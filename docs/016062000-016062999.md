# StackOverflow 问答 16062000-16062999

# algorithm - 如何最有效地分配房间？

> ID：16062004
> 
> 赞同：2
> 
> 时间：2013-04-17T13:53:38.687
> 
> 标签：algorithm, language-agnostic

# 故事：

我们公司很快就要出去了。对于我们在度假村的住宿，我们的每两个同事将共用一个房间。我们的管理员助理已经收集了我们对与谁共享房间的偏好，现在她必须决定如何安排房间以尽量减少所需的房间数量。每个人都将被安排与他或她想要的人共享一个房间。比如只有同事，Allen想和Bob或者Chris合住一个房间，Bob想和Chris合用，Chris想和Allen合用；那么唯一的结果将是：Allen 和 Chris 共用一个房间，而 Bob 单独使用一个房间，总共需要 2 个房间。

# 问题：

将故事简化为算法问题（尽管这可能不是最好的简化）：我们在图中有几个节点，并且节点相互连接。我们只关心双向连接的节点，所以现在我们有一个无向图。如何将无向图中的节点分组，以便 1）任何组最多包含 2 个节点，2）如果一个组包含 2 个节点，则节点是连接的，3）最小化组的数量。

# 算法：

我脑海中浮现的是贪婪地解决这个问题。在排列的每一步中，只需移除一个孤立节点或两个节点，以使图中剩余的边数最大化。通过反复这样做，我们最终会找到解决方案。

*请以最佳方式解决问题（我不是在寻找尝试所有组合的方法）或证明上述贪心算法是最佳的。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:07:45.750

您正在解决的问题是在图中找到[最大匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29)。这意味着找到不共享顶点的最大边数。在您的情况下，这些边将对应于共享房间，其余顶点将是单人房间。

可以使用[Blossom 算法](http://en.wikipedia.org/wiki/Blossom_algorithm)在多项式时间内找到最大匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:03:46.350

这是 Haskell 中的一些粗略的东西。函数“pairs”列出了所有具有共同偏好的配对，以及没有共同伴侣的人（与“”配对）。函数“choose”从配对列表中返回配对。如果一对中的两个人还与另一个（相同的）第三人配对，“选择”将从对列表的其余部分中删除这两个人，并且结果对清空。所需房间的数量等于最终列表的长度。

输出（最好有更多不同的例子来测试）：

```
*Main> choose graph
[["Chris","Allen"],["Bob","Isaak"]]

*Main> choose graph1
[["Allen","Chris"],["Bob",""],["Dave",""],["Chris","Max"]] --four rooms
  would be needed, although Chris appears in two pairs (..figured they can 
  decide later who stays where.)

*Main> choose graph2 --example given by Dante is not a Geek
[["Allen","Chris"],["Bob",""]] 
```

代码：

```
import Data.List (group, sort, delete)

graph = [("Chris",["Isaak","Bob","Allen"]) --(person,preferences)
        ,("Allen",["Chris","Bob"])
        ,("Bob",["Allen","Chris","Isaak"])
        ,("Isaak",["Bob","Chris"])]

graph1 = [("Allen",["Bob","Chris"]), ("Bob",["Chris"]), ("Dave",[])
         ,("Chris",["Allen", "Max"]), ("Max", ["Chris"])]

graph2 = [("Allen",["Bob","Chris"]), ("Bob",["Chris"]), ("Chris",["Allen"])]

pairs graph = pairs' graph [] where
  pairs' []                 result = concat result
  pairs' (x@(person1,_):xs) result
    | null test = if elem [[person1, ""]] result 
                     then pairs' xs result
                     else pairs' xs ([[person1,""]]:result)
    | otherwise = 
        pairs' xs ((filter (\[x,y] -> notElem [y,x] (concat result)) test):result)
   where isMutual a b = elem (fst a) (snd b) && elem (fst b) (snd a)
         test = foldr comb [] graph
         comb a@(person2,_) b = 
           if isMutual a x then [person1,person2]:b else b

choose graph = comb paired [] where
  paired = pairs graph
  comb []             result = filter (/=["",""]) result
  comb (x@[p1,p2]:xs) result 
    | x == ["",""] = comb xs result
    | test         = 
        comb (map delete' xs) (x:map delete' result)
    | otherwise    = comb xs (x:result)
   where delete' [x,y] = if elem x [p1,p2] then ["",y]
                            else if elem y [p1,p2] then [x,""] 
                            else [x,y]
         test = if not . null . filter ((>=2) . length) . group 
                       . sort . map (delete p2 . delete p1) 
                       . filter (\y -> y /= x && (elem p1 y || elem p2 y)) $ paired
                   then True
                   else False 
```

# php - Netbeans 为第一次 php 调试试验输出错误，然后拒绝连续的调试请求

> ID：16062010
> 
> 赞同：0
> 
> 时间：2013-04-17T13:53:59.847
> 
> 标签：php, debugging, netbeans-7

第一次写\调试php代码，不知道为什么这么难！！！

当我第一次开始时`Netbeans`，我只想在项目中调试一个打开的脚本，所以我开始调试，`Output`窗口中显示了一个特定于应用程序的错误（即 SQL 语法错误），所以我可以处理该错误，但之后出现了实际问题.

*   如果我添加断点并再次开始调试，它不会启动，我完全确定它不会到达断点。

*   所以我重新启动了`Netbeans`。保存我的断点，开始调试，它甚至不遵守断点！

问候

# iphone - 未调用自定义 UIButton 的操作

> ID：16062020
> 
> 赞同：3
> 
> 时间：2013-04-17T13:54:29.847
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uibutton

我有以下子类`UIButton`：

```
@interface MyButton : UIButton
- (IBAction) buttonPressed:(id)sender;
@end

@implementation MyButton

- (void)awakeFromNib
{
    NSLog(@"awake from nib");
}

- (IBAction) buttonPressed:(id)sender
{
    NSLog(@"button pressed");
}

@end 
```

我在我的父 xib 中添加了一个按钮，将它的类设置为 MyButton，并将它的操作连接到`First Responder`'s method `buttonPressed`。

当我启动一个应用程序并使用我的按钮加载我的父 xib 时，`awakeFromNib`会调用 MyButton 类。但是当我按下按钮时，什么也没有发生。我期待我`buttonPressed`的`MyButton`课堂方法会被调用。

我想，我的按钮视图是响应者链中的第一个响应者，但显然我做错了什么。

你能建议点什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:07:00.877

如果您希望您的按钮始终调用声明的方法，请将上面的代码添加到`awakeFromNib`方法中

```
[self addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

稍后当您将其添加到视图控制器时，不要为其分配新操作，这样它将始终调用您的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:02:09.590

取决于您对按钮所做的事情 - 没有真正需要创建子类。

以下是一些代码如何制作一个触发方法的简单按钮：

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[myButton setFrame:CGRectMake(10, 10, 100, 30)];
[myButton setTitle:@"Title" forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(myMethod:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:myButton]; 
```

添加目标位告诉按钮在用户触摸按钮内部（点击它）时触发给定的选择器。目标是选择器所在的对象。

希望这会有所帮助，除非您有自定义布局或特定的自定义功能，否则您不需要继承 UIButton。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T14:13:36.967

由于您想处理按钮代码本身的操作，您可能必须重写此方法`- (void)sendActionsForControlEvents:(UIControlEvents)controlEvents`并处理您的事件，就好像它被发送到您的按钮一样；

# windows - 重定向标准错误和输出流被推迟

> ID：16062021
> 
> 赞同：1
> 
> 时间：2013-04-17T13:54:31.610
> 
> 标签：windows, perl, redirect, cmd

我需要将输出和错误流从一个 Windows 进程（GNU make.exe 执行 armcc 工具链）重定向到一些用 perl 编写的过滤器。我正在运行的命令是：

```
Make Release 2>&1 | c:\cygwin\bin\perl ../tools/armfilt.pl 
```

编译过程会抛出一些打印件，这些打印件应该在`STDOUT`经过一些修改后放置。但是我遇到了一个问题：make 生成的所有打印实际上都被推迟到 make 过程结束，然后才显示给用户。所以，我的问题是：

1.  为什么会发生？我试图将第二个进程（perl.exe）的优先级从“正常”更改为“高于正常”，但它没有帮助......
2.  如何克服这个问题？
3.  我认为可能的解决方法之一可能是仅将`STDERR`打印件发送到 perl（这是我真正需要的），而不是`STDOUT+STDERR`. 但我不知道如何在 Windows 中做到这一点。

微软关于管道操作员使用的解释说：

> 管道运算符 (|) 获取一个命令的输出（**默认为 STDOUT**）并将其引导到另一个命令的输入（默认为 STDIN）。

但是没有解释如何更改这个默认的 STDOUT 管道。有可能吗？

# sql - 将 SQL Server 日期数据类型导入 Excel 日期格式时出现问题

> ID：16062023
> 
> 赞同：1
> 
> 时间：2013-04-17T13:54:32.253
> 
> 标签：sql, excel, vba, recordset

我正在将数据从 SQL Server 2012 数据库导入 Excel。我遇到的问题是 SQL Server 2012`Date`数据类型列在 Excel 中没有被一致地识别。

如果我使用 ADO 记录集从特定列导入数据，则具有列数据类型`Date`或的数据将作为 VBA 数据类型（而不是或）`Datetime`复制到记录集中。`String``Date``Integer`

在 Excel 中重现 Recordset 会产生格式为 的字符串`yyyy-mm-dd`。即使我更改了格式，Excel 也不会将这些单元格识别为日期/时间。

然而，当我从另一个单元格引用 Excel 单元格时，`Date`类型被识别（例如：A1 包含我的 SQL VBA 记录集查询的结果，例如“2013-04-17”。我进入单元格 A2“=A1 + 1” , A2 将显示为 41382。

但是，当我使用 MS Query 从使用 ListObjects 和 ODBC 的同一数据库中提取数据时，返回来自同一数据库的相同数据，并且 Excel 可以正确解释日期（即，我`Datetime`通过SQL 数据类型导入名为“事务日期”的列MS Query 结果将是一个 MS Excel 日期“整数”）。

如何修改我的 VBA 记录集代码以将格式中的数据`yyyy-mm-dd`视为日期而不是字符串？

谢谢，约翰

PS：我执行的 SQL 查询各不相同，因此有时我从数据类型为“日期”的列中获取数据，有时它只是整数或 Double 数据类型。这意味着实际上不可能将“Convert(INT, TransactionDate)”硬编码到 SELECT 语句中。但是，我完全是 SQL 的业余爱好者，因此可能有一个超级简单的解决方案（例如，如果我曾经访问数据类型为“DateTime”的列，那么 SQL 应该始终发送“CONVERT（DBL，XXX）”而不是 XXX，其中 XXX 是数据类型为 DATE 的列。

```
Function GetSQL(strQuery As String) As Variant

Dim rst As ADODB.Recordset
Dim element As Variant
Dim i, j As Integer
Dim v As Variant
On Error GoTo aError

Call ConnecttoDB

cnt.Open
Set rst = New ADODB.Recordset
rst.Open strQuery, cnt, adOpenStatic
rst.MoveFirst
If rst.RecordCount = 0 Then   'i.e. if it's empty
    v = CVErr(xlErrNA)
    rst.Close
    cnt.Close
Else
End If
 v = rst.GetRows

For i = 0 To UBound(v, 1)
    For j = 0 To UBound(v, 2)
        If v(i, j) = -9999 Then
            v(i, j) = CVErr(xlErrNA)
        Else
        End If
    Next j
Next i
GetSQL = Application.WorksheetFunction.Transpose(v)
rst.Close
cnt.Close
Exit Function

aError:
MsgBox Err.Description
rst.Close
cnt.Close
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:04:43.830

该问题源于使用 Excel 函数 Transpose 而不是循环遍历 Recordset 结果对象的内容。

在通过 Excel 转置的过程中，Recordset 中包含的一些信息（例如示例数据类型）似乎丢失了。这会导致 Excel 将日期解释为字符串。

我猜你打算使用循环而不是使用 Excel Transpose 函数，因为这样可以避免上述信息的丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:53:36.033

ado recdset 中的字段类型无法更改，但您尝试过UDT 吗？这里有一个用户定义类型的简短示例，它将包装 ado 记录集。然后在您的代码中，您将使用您自己的记录集，该记录集将使用日期数据类型。

*添加对 Microsoft ActiveX 数据对象库的引用。*

**标准模块vba代码：**

```
Private Const CONNECTION_STRING As String = "Provider=sqloledb;Data Source=SQLSERVER2012;Initial Catalog=Test;Integrated Security=SSPI;"
Private Const SQL_QUERY As String = "select * from dbo.DateTest"

Public Type MyRecord
    Id As Long
    CreatedAt As Date
End Type

Public Sub test()
    Dim myRecodset() As MyRecord
    myRecodset = GetSQL
End Sub

Public Function GetSQL() As MyRecord()

    On Error GoTo aError

    Dim adodbConnection As ADODB.Connection
    Set adodbConnection = New ADODB.Connection
    With adodbConnection
        .ConnectionString = CONNECTION_STRING
        .CursorLocation = adUseServer
        .Open
    End With

    Dim newRecordset() As MyRecord
    Dim newRecord As MyRecord
    Dim rowIndex As Long
    Dim adodbRecordset As ADODB.Recordset

    Set adodbRecordset = New ADODB.Recordset
    With adodbRecordset
        .Open SQL_QUERY, adodbConnection, adOpenStatic
        .MoveFirst

        ReDim newRecordset(.RecordCount - 1)

        Do While Not .EOF
            newRecord.Id = .Fields("Id")
            newRecord.CreatedAt = .Fields("CreatedAt")
            newRecordset(rowIndex) = newRecord
            rowIndex = rowIndex + 1
            .MoveNext
        Loop

    End With

    GetSQL = newRecordset

aError:
    If (Err.Number <> 0) Then MsgBox Err.Description
    adodbRecordset.Close
    adodbConnection.Close
End Function 
```

**用这张表测试：**

```
CREATE TABLE [dbo].[DateTest]
(
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [CreatedAt] [date] NOT NULL
) 
```

# javascript - Chrome 与 Safari 中的 Javascript 事件

> ID：16062024
> 
> 赞同：0
> 
> 时间：2013-04-17T13:54:38.113
> 
> 标签：javascript, ruby-on-rails-3, backbone.js

我有一个看起来像这样的 HTML 元素：

```
<select class="indiv_unit" name="indiv_unit" id="indiv_unit"> 
```

我正在尝试在 Javascript/Backbone.js 视图中捕获选择事件（当用户做出选择时），如下所示：

```
events : {

    "click select.indiv_unit" : 'changeIndivUnit',
}, 
```

Safari 和 Firefox 浏览器能够捕获选择事件，但 Chrome 不能。我怀疑 Chrome 的问题是我没有“真正”抓住选择，而是抓住了选择框中的点击。我试过这样的事情：

```
"select select.indiv_unit" 
```

但这不起作用，而且看起来也不对。有人可以指出检测适用于所有浏览器的选择事件的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:03:05.053

将其更改为：

```
'change select.indiv_unit': 'changeIndivUnit' 
```

您可以使用[http://jsfiddle.net/T8Dsf/](http://jsfiddle.net/T8Dsf/)对其进行测试。

# optimization - 在图中查找循环（ 不一定是哈密顿量或访问所有节点）

> ID：16062026
> 
> 赞同：1
> 
> 时间：2013-04-17T13:54:46.803
> 
> 标签：optimization, graph, graph-algorithm, heuristics, traveling-salesman

我有图 1 中的图[（](https://i.stack.imgur.com/VaStJ.png)第一张图像），并希望连接红色节点以具有循环，但循环不必像图[2](https://i.stack.imgur.com/dtQVw.png)和图[3那样是哈密顿量](https://i.stack.imgur.com/hOKA5.png)（最后两张图片）。这个问题的搜索空间比 TSP 大得多，因为我们可以访问一个节点两次。像 TSP 一样，不可能在一个大图中评估所有组合，我应该尝试启发式，但问题是，与 TSP 不同，循环或旅行的长度在这里不是固定的。因为，访问所有蓝色节点不是强制性的，这导致长度可变，包括一些蓝色节点。如何每次都生成一个可能的“有效”组合进行评估？我的意思是，一个循环可以是{A，e，B，l，k，j，D，j，k，C，g，f，e}或{A，e，B，l，k，j，D， j, i, h, g, C, g, f, e}，但不是 {A, e, B, l, k, C, g, f, e} 或 {A, B, k, C, i, D}。

**更新：** 最终目标是根据长度和风险评估哪个周期是最优/接近最优的（见下文）。所以我不仅要尽量减少长度，还要尽量减少风险。除非您知道其所有节点的顺序，否则这将导致无法评估循环风险。希望这能澄清为什么我不能在生成过程的中间评估新周期。我们可以：

*   一个一个地生成和评估可能的循环；
*   或生成所有可能的循环，然后进行评估。

**风险定义：** 假设循环是将主节点（红色节点之一）连接到所有其他红色节点的环。如果环的任何部分（边缘）发生故障，则不应从主节点断开任何红色节点（这是理想的）。然而，有些边我们必须通过两次（由于没有连接所有红色节点的哈密顿循环），如果这些边出现故障，一些红色节点可能会完全断开连接。因此，循环风险是风险边缘长度的总和（我们在环/巡回中有两次）乘以在切割每个风险边缘的情况下我们丢失的红色节点数。

![图1](https://i.stack.imgur.com/VaStJ.png)

![图 2](https://i.stack.imgur.com/dtQVw.png) ![图 3](https://i.stack.imgur.com/hOKA5.png)

我正在处理的 3D 图的真实示例包括 5 个红色节点和 95 个蓝色节点，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/IuAvo.png)

这里是包含上图邻接矩阵的 Excel 表[的](http://sdrv.ms/YQTuy8)链接（前五个节点为红色，其余为蓝色）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:16:36.313

经过更多思考，我决定重写我的解决方案可能会更好，因为您可以使用红色节点两次，这使得我最初绘制红色节点之间路径的想法效率低下。但是，它并没有完全浪费，因为红色节点之间的蓝色节点很重要。

您实际上可以使用 BFS 的修改版本来解决这个问题，更不用说[回溯算法](http://en.wikipedia.org/wiki/Backtracking)。对于每个唯一的分支，都存储了以下信息，其中大部分只是为了更快地拒绝而以更多空间为代价，实际上只需要前两项：

*   完整的当前路径。（仅包含起始红色节点的列表）
*   剩余的红色节点。（最初所有红色节点）
*   最后一个红色节点。（最初是起始红色节点）
*   自上一个红色节点以来的蓝色节点集。（最初为空）
*   计数为 1 的节点集。（最初为空）
*   计数为 2 的节点集。（最初为空）

该算法从单个节点开始，然后使用 BFS 或 DFS 扩展相邻节点，重复此过程，直到结果是有效的游览或要扩展的节点被拒绝。所以基本的伪代码（当前路径和剩余的红点）如下所示。其中 rn 是红色节点的集合，t 是有效路径的列表，p/p2 是节点的路径，r/r2 是红色节点的集合，v 是要扩展的节点，a 是可能的节点扩展到。

```
function PATHS2HOME(G,rn)
    create a queue Q
    create a list t
    p = empty list
    v ← rn.pop()
    r ← rn
    add v to p
    Q.enqueue((p,r))
    while Q is not empty
        p, r ← Q.dequeue()
        if r is empty and the first and last elements of p are the same:
            add p to t
        else
            v ← last element of p
            for all vertices a in G.adjacentVertices(v) do 
                if canExpand(p,a)
                    p2 ← copy(p)
                    r2 ← copy(r)
                    add a to the end of p2
                    if isRedNode(a) and a in r2
                        remove a from r2
                    Q.enqueue( (p2,r2) )
    return t 
```

以下条件可防止节点扩展。可能不是一个完整的列表。

*   红色节点：
    *   如果它在计数为 2 的节点集中。这是因为红色节点会被使用两次以上。
    *   如果等于最后一个红色节点。当一个红色节点与其他三个蓝色节点相邻时，这可以防止“奇怪的”旅行。因此，红色节点 A 与蓝色节点 b、c 和 d 相邻。然后您将结束一个巡演，其中部分巡演看起来像 bAcAd。
*   蓝色节点：
    *   如果它在计数为 2 的节点集中。这是因为红色节点会被使用两次以上。
    *   如果它在自上一个红色节点以来的蓝色节点集中。这是因为它会导致红色节点之间的蓝色节点循环。

可能的优化：

*   您可以绘制出红色节点之间的路径，使用它来构建后缀树，它显示了给定以下路径可以到达的红色节点 Like。这样做的好处是，如果扩展路径导致已经访问过两次的红色节点，您可以避免扩展节点。因此，这只是一个有用的检查，一旦至少 1 个红色节点被访问过两次。
*   使用算法的并行版本。单个线程可能正在访问队列，并且队列中的元素之间没有交互。虽然我怀疑可能有更好的方法。有可能将运行时间从数百秒缩短到几秒。尽管这取决于并行化水平和效率。您也可以将其应用于先前的算法。实际上我改用这个算法的原因几乎被否定了
*   您可以使用堆栈而不是队列。这里的主要好处是通过使用深度优先的方法，队列的大小应该保持相当小。

# php - preg_match，是什么导致了错误？

> ID：16062028
> 
> 赞同：2
> 
> 时间：2013-04-17T13:54:53.600
> 
> 标签：php, preg-match

所以我正在尝试解析一些内容。它看起来像这样。

```
## This is a Title ##

- Content will go here, so blah blah blah - 
```

现在我通过 php/mysql 从表中抓取它，并使用 preg_match 像这样提取文本。

```
preg_match('/\##(.*?)\##/', $m_data['field'], $mod_title);
preg_match('/\-(.*?)\-/', $m_data['field'], $mod_content); 
```

这工作正常。但是，如果两者中的任何一个都有换行符，我会得到一个 php 错误。

```
## This is a 
Title ##

- Content will go here, so blah 
blah blah - 
```

这会导致以下 php 错误。

```
 A PHP Error was encountered

 Severity: Notice

 Message: Undefined offset: 1

 Filename: libraries/Functions.php(656) : eval()'d code

 Line Number: 472 
```

我假设它正在考虑的偏移量是

```
$title = $mod_title[1];                                              
$content = $mod_content[1]; 
```

但是当有换行符时，数组 mod_content 是空的。

我很确定这是我的正则表达式，但我不是它的专家，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:00:44.450

只需将“s”修饰符添加到您的正则表达式：

```
preg_match('/\##(.*?)\##/s', $m_data['field'], $title);
preg_match('/\-(.*?)\-/s', $m_data['field'], $content); 
```

**s (PCRE_DOTALL)**

如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

有关更多信息，请参阅： http: [//php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:05:25.023

这是因为 preg_match 与断线不匹配。

解决这个问题的方法是以 /s 结尾，而不是仅仅 /。

所以它会是这样的：

```
preg_match('/\##(.*?)\##/s', $m_data['field'], $title);
preg_match('/\-(.*?)\-/s', $m_data['field'], $content); 
```

# java - Java5中的方法公司在另一个泛型中使用泛型

> ID：16062031
> 
> 赞同：1
> 
> 时间：2013-04-17T13:55:03.837
> 
> 标签：java, generics, methods, java-5

我在使用*Generics定义**Java5*方法时遇到了一些问题。

 *我试验了一下，我可以定义一个方法如下：

```
public <R extends Runnable & MyInterface, T> void submit(R runnable, T task); 
```

因此，`submit`只接受`R`实现接口的类对象的实例`Runnable`和`MyInterface`. 现在，假设我想做如下的事情：

```
public <C extends Callable & MyInterface, T> submit(C<T> callable); 
```

其中 C 是 a `Callable`，它也实现`MyInterface`并具有 type 的返回值`T`。在这种情况下，IDE 会在方法的固件中报告错误：

```
required: class
found: type parameter C
where C,T are type-variables 
```

定义第二种`submit`方法的正确方法是什么？

PS：我不知道这个标题是不是最好的。请在确定问题类型后随时改进标题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:56:21.530

类型参数不能被赋予其他类型参数，例如`C<T>`- 但它们可以受参数化类型的限制。使用以下内容：

```
public <C extends Callable<T> & MyInterface, T> submit(C callable); 
```*

# powershell - Enable-PSRemoting 后无法创建远程 powershell 会话

> ID：16062033
> 
> 赞同：22
> 
> 时间：2013-04-17T13:55:07.507
> 
> 标签：powershell, remoting

我不能远程进入任何机器来挽救我的生命！我已经尝试了我能找到的一切。如果有人可以排除故障或指导我，我将不胜感激，因为这将是添加到我的域的好工具。

设置：

1.  域内的客户端机器
2.  *域内或域外的服务器*计算机 - 虚拟化并用于 WSUS 计算机名称：wsustest
3.  客户端服务器机器物理计算机名称：epizzi-pc

脚步：

```
启用-pssremoting 完成！在所有机器上
使用 * 配置的trustedhosts 或添加了客户端机器
以防万一，关闭公共配置文件的防火墙

```

* * *

```
输入-PSSession -ComputerName wsustest -Credential wsustest\administrator
Enter-PSSession -ComputerName epizzi-pc -Credential epizzi-pc\administrador
Enter-PSSession : 连接到远程服务器 epizzi-pc 失败，并显示以下错误消息： WinRM 无法处理请求。以下错误代码为 0x80090311
使用 Kerberos 身份验证时发生：当前没有可用于服务登录请求的登录服务器。  
 可能的原因有：
  - 指定的用户名或密码无效。
  -Kerberos 在没有指定身份验证方法和用户名时使用。
  -Kerberos 接受域用户名，但不接受本地用户名。
  - 远程计算机名称和端口的服务主体名称 (SPN) 不存在。
  -客户端和远程计算机在不同的域中，两个域之间没有信任。
 检查上述问题后，请尝试以下操作：
  - 检查事件查看器以获取与身份验证相关的事件。
  -改变认证方式；将目标计算机添加到 WinRM TrustedHosts 配置设置或使用 HTTPS 传输。
 请注意，TrustedHosts 列表中的计算机可能未经过身份验证。
   - 有关 WinRM 配置的更多信息，请运行以下命令：winrm help config。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。
在行：1 字符：1
+ Enter-PSSession -ComputerName epizzi-pc -Credential epizzi-pc\administrador
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo : InvalidArgument: (epizzi-pc:String) [Enter-PSSession], PSRemotingTransportException
    + FullyQualifiedErrorId : CreateRemoteRunspaceFailed

```

* * *

```
输入-PSSession -ComputerName wsustest -UseSSL -Credential wsustest\administrator

*Enter-PSSession：连接到远程服务器 wsustest 失败并显示以下错误消息：WinRM 无法完成操作。验证指定的计算机名称是
有效，该计算机可通过网络访问，并且 WinRM 服务的防火墙例外已启用并允许从该计算机进行访问。默认情况下，WinRM
公共配置文件的防火墙例外限制对同一本地子网中的远程计算机的访问。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。
在行：1 字符：1
+ Enter-PSSession -ComputerName wsustest -UseSSL -Credential wsustest\administrato ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo : InvalidArgument: (wsustest:String) [Enter-PSSession], PSRemotingTransportException
    + FullyQualifiedErrorId : CreateRemoteRunspaceFailed*
错误：

```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-27T01:39:32.123

我在远程连接到服务器时遇到了同样的问题，发现这篇博文非常有帮助 - [http://jeffgraves.me/2013/10/14/powershell-remoting/](http://jeffgraves.me/2013/10/14/powershell-remoting/)

对于我的具体情况，我做了以下事情：

在本地机器上

1.  winrm quickconfig（虽然这已经配置好了）
2.  winrm s winrm/config/client '@{TrustedHosts="myservername.domain"}'

在远程机器上

1.  启用-psremoting-force
2.  Set-PSSessionConfiguration -ShowSecurityDescriptorUI -Name Microsoft.PowerShell -Force

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-25T01:34:56.043

我通过使用完全合格的登录解决了这个问题。我没有使用“netbiosdomain\accountname”，而是使用 fqdn\accountname，就像在 get-credential 提示中的 Microsoft.com\myaccount 中一样。可能并不适合所有人，但值得一试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-29T05:23:48.077

我就是这样做的。我在我的脚本中使用它。

```
# This is only done once
Read-Host -AsSecureString | ConvertFrom-SecureString | Out-File
c:\Windows\temp\securepass.txt

# Setup credentials
$SecureString = Get-Content c:\Windows\temp\securepass.txt | ConvertTo-SecureString
$mycredentials = New-Object -TypeName System.Management.Automation.PSCredential
    -ArgumentList "yourDomain\userID",$SecureString

# Open remote session:
$MyRSession = New-PSSession -ComputerName Computer1 -Credential $mycredentials
    -Authentication default

# Use remote session:
Enter-PSSession $MyRSession 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T15:24:17.740

摆脱`-UseSSL`. 我启用了 PSRemoting，但在使用时遇到了问题。我想我可以稍后再看，但现在没关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T20:58:01.333

如果客户端和服务器计算机之间没有信任，则必须在服务器端启用基本身份验证。通过切换服务器上的 WSMAN: 驱动器上的正确属性来执行此操作。由于鸡和蛋的问题，您显然必须在控制台或通过远程桌面以交互方式执行此操作:) 此外，这也可能发挥作用：

[http://www.nivot.org/blog/post/2009/10/30/PowerShell20EnablingRemotingWithVirtualXPModeOnWindows7](http://www.nivot.org/blog/post/2009/10/30/PowerShell20EnablingRemotingWithVirtualXPModeOnWindows7)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-06T14:27:49.993

我遇到了同样的错误`currently no logon servers available`。该问题已通过使用`Domain\Username`用户 UPN 或`Username@Domain`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T16:51:25.600

I have achieved a remote session with Enter-pssession command, had to follow these exact parameters

```
$creds =  get-credential (the -credential parameter in enter-pssession does not work properly, thus u must         previously enter the object at another variable)
Enter-pssession -computername wsustest -authentication Default -credentials $creds 
```

i Also had to set both client and remote server in the trusted hosts wsman: space

another solution which surely wouldve worked but i havent tried, wouldve been setting https: which is harder to do.

thx to all, your comments certainly led to the solution!

# ios - 为什么 UIScrollView 停止滚动？

> ID：16062034
> 
> 赞同：1
> 
> 时间：2013-04-17T13:55:08.107
> 
> 标签：ios, objective-c, uiscrollview

我正在编辑这个问题，因为我找到了这个问题的确切原因。对不起以前的。

我有`UIScrollView`我的`ViewController`. 我正在使用故事板、ios6、xcode 4.5。设置`scrollView` `ContentSize`in`viewDidAppear`方法。

我是`presenting`一个`modelViewController`。当我消失那个模型视图控制器时，我的`scrollview`工作就停止了。我签入登录`content size`方法`viewDidAppear`，它显示正确的大小（更大的帧大小）。它仍然停止滚动。

为什么会这样。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:20:46.760

> 你怎么躲`ContanerView`？

尝试这个：

隐藏：[self.view sendSubviewToBack:ContanerView]；取消隐藏：[self.view bringSubviewToFront:ContanerView];

# javascript - 在jQuery中附加到一个类的最近的div

> ID：16062044
> 
> 赞同：0
> 
> 时间：2013-04-17T13:55:31.407
> 
> 标签：javascript, jquery, html, jquery-autocomplete

我有一个使用 jQuery 自动完成功能的 Web 应用程序。在我的网页上，我有几个文本框，其中附加了自动完成类，在它们下方是空的 div，用于附加自动完成结果。目前，无论我输入哪个文本框，它都会附加到第一个文本框下的 div 中。我如何将它附加到我正在输入的框下方的那个？

jQuery代码：

```
<script type="text/javascript">
$(document).ready(function () {
$("input.autocomplete").autocomplete({
    appendTo: '.container',
    source: function (request, response) {
        $.ajax({
            url: '/Home/GetUsers',
            type: "POST",
            dataType: "json",
            data: { query: request.term },
            success: function (data) {
                response($.map(data, function (item) {
                    return { label: item, value: item };
                }));
            }
        })  ;
    }
});
})
</script> 
```

HTML（总共有 18 个文本框，但我觉得这足以说明我在做什么）：

```
Employee Name (Team Leader): <input type ="text" name="empName1" class="autocomplete"/>
    <div class ="container"></div>
    <br/>
    <br/>
    Employee Name (Event Process Owner): <input type ="text" name="empName2" class="autocomplete"/>
    <div class ="container"></div>
    <br/>
    <br/>
    Employee Name (Sponsor): <input type ="text" name="sponsor" class="autocomplete"/>
    <div class ="container"></div>
    <br/>
    <br/>
    Employee Name: <input type ="text" name="empName3" class="autocomplete"/>
    <div class ="container"></div>
    Employee Name: <input type ="text" name="empName4" class="autocomplete"/>
    <div class ="container"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:59:22.297

**工作演示**：http: [//jsfiddle.net/mohammadAdil/muwxt/](http://jsfiddle.net/mohammadAdil/muwxt/)

```
$('input').each(function () {
    $(this).autocomplete({
        search: function (event, ui) {
            $(this).next('.container').empty();
        },
        source: function (request, response) {
            $.ajax({
                 url: '/Home/GetUsers',
                 type: "POST",
                 dataType: "json",
                 data: { query: request.term },
                 success: function (data) {
                       response($.map(data, function (item) {
                            return { label: item, value: item };
                         })
                       );
                 }  
            });
        }
    }).data('autocomplete')._renderItem = function (ul, item) {

        return $('<li/>')
            .data('item.autocomplete', item)
            .append(item.value)
            .appendTo($(this.element).next('.container'));
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T20:04:30.973

我不知道您是否可以更改 HTML，但这会起作用：

HTML（用于第一个自动完成框）

```
Employee Name (Team Leader): <input type ="text" name="empName1" class="autocomplete"/>
<div class ="empName1 container"></div> 
```

JS

```
$("input.autocomplete").autocomplete({
    appendTo: '.container.' + $(this).attr('name'), 
```

您还应该将此添加到您的 ajax 调用中：

```
error: function() { response(""); } 
```

因为，正如自动完成 API 文档中所说

> 即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T20:24:18.410

我认为我的解决方案会减慢加载速度，但可以工作（我希望）。

首先为您添加`.container`一个 id，但不要删除该类。

然后使用每个：

```
$('.autocomplet').each(function(){
    var target = $(this)
    target.autocomplete({
        appendTo: getcontainer(target),
        source: function (request, response) {
        $.ajax({
            url: '/Home/GetUsers',
            type: "POST",
            dataType: "json",
            data: { query: request.term },
            success: function (data) {
                response($.map(data, function (item) {
                    return { label: item, value: item };
                }));
            }
        })  ;
    }
}) 
```

为了不丢失目标的引用，我们将其保存在 var 中。Append 只接受选择器，所以我们创建了一个返回选择器的函数：

```
function getContainer(target){
    var selectedID = target.next('.container').attr('id');
    return '#'+selectedID;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T15:38:04.160

在 ajax 调用的成功函数中，您可以使用 jquery 模板（google jquery.tmpl）将 html 附加到某些 div，同时考虑到发件人来决定要转到哪个 div。我自己也遇到了这个问题，这个解决方案工作得很好.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-04T15:24:59.153

自动完成结果附加在正确的 div 中。只是将一个文本字段和一个 div 包装在一起。:**[演示](http://jsfiddle.net/r6cm4/1/)**

**JQuery：**稍微修改了 jquery 部分，如下**-**

```
$(document).ready(function () {

var availableTags = [
  "ActionScript",      "AppleScript",      "Asp",      "BASIC",      "C",      "C++",
  "Clojure",      "COBOL",      "ColdFusion",      "Erlang",      "Fortran",      "Groovy",
  "Haskell",      "Java",      "JavaScript",      "Lisp",      "Perl",      "PHP",
  "Python",      "Ruby",      "Scala",      "Scheme"
];

try{

    $(".autocomplete").each(function(){
        $(this).autocomplete({
search: function (event, ui) {
        $(this).parent().find('.container').empty();
    },
source: availableTags,
}).data('autocomplete')._renderItem = function(div, item) {

return $('<li/>')
   .data('item.autocomplete', item)
   .append(item.value)
.appendTo($(':focus').parent().find('.container'));
};
})
}
catch(e){alert(e)}  }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-06T04:56:22.170

我认为问题出在`appendTo`选项上。尝试以下

```
$(document).ready(function () {
    $("input.autocomplete").each(function () {
        var $this = $(this),
            name = $this.attr('name');
        $this.autocomplete({
            appendTo: 'input[name=' + name + '] + .container',
            source: function (request, response) {
                $.ajax({
                    url: '/Home/GetUsers',
                    type: "POST",
                    dataType: "json",
                    data: { query: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item, value: item };
                        }));
                    }
                });
            }
        });
    });
}); 
```

# perl - 带有 perl -pi -e 的 CRLF

> ID：16062047
> 
> 赞同：1
> 
> 时间：2013-04-17T13:55:36.903
> 
> 标签：perl

在我拥有的 perl 程序中，我要求对具有受限权限的文件进行就地编辑：

```
for my $file (@files) {
    `sudo perl -pi -e 's/foo(.?foo2)/bar\$1/m' '$file'`;
} 
```

foo 和 foo2 之间可能有换行符，但文件使用 CRLF 作为换行符。如何将 -pi 命令中的 CRLF 与 s///m 或 s///s 匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:58:51.460

怎么样`\s*`？或者，如果您想变得具体`[\r\n]{0,2}`。前者匹配 0 个或多个空格，后者匹配 0 到 2 个换行符或回车符。您还不需要以逐行模式读取文件，使用`-0777`.

也许比以单行方式运行许多系统命令更好的解决方案是创建一个包含文件列表的脚本文件，例如

```
system(qw(sudo perl -0777 -pi script.pl), @files); 
```

并且脚本文件仅包含您的替换：

```
s/foo(?=\s*foo2)/bar/m; 
```

我还用前瞻`$1`断言替换了反向引用。请注意，我建议您在不使用`-i`开关或`-i.bak`启用备份选项的情况下运行它，直到您知道它可以按预期与您的文件一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:51:33.850

在我回答你的问题之前，让我们先解决两件事。

首先，你有一个无用的反引号。改为使用`system`。

```
for my $file (@files) {
    system("sudo perl ...");
} 
```

其次，您没有正确地将 of 的内容`$file`转换为 shell 文字。考虑一下如果`$file`包含单引号会发生什么。使固定：

```
use String::ShellQuote qw( shell_quote );
for my $file (@files) {
    system(shell_quote('sudo', 'perl', ..., $file));
} 
```

或者您可以完全避免使用外壳：

```
for my $file (@files) {
    system('sudo', 'perl', ..., $file);
} 
```

* * *

关于你的问题。

`-p`导致 Perl 用

```
while (<>) {
   ... -e ...
} continue {
   print;
} 
```

像这样，

```
/foo(\r\nfoo2)/ 
```

或更灵活

```
/foo(\s*\nfoo2)/ 
```

因为您还没有阅读，所以不可能匹配`foo2`。您可以`<>`通过首先执行来读取整个文件`local $/;`，这可以通过添加`-0777`get

```
$/ = undef;
while (<>) {
   ...[ code from -e ]...
} continue {
   print;
} 
```

所以你需要的是：

```
for my $file (@files) {
    system('sudo', 'perl', '-i', '-0777pe', 's/foo(\s*\nfoo2)/bar$1/', $file);
} 
```

或者你甚至可以避免`for`循环并使用

```
system('sudo', 'perl', '-i', '-0777pe', 's/foo(\s*\nfoo2)/bar$1/', @files); 
```

# web-services - 获取 404 Not Found CF 错误 API

> ID：16062049
> 
> 赞同：0
> 
> 时间：2013-04-17T13:55:42.120
> 
> 标签：web-services, api, coldfusion

我正在尝试连接到外部 Web 服务以访问他们的数据库以进行某些操作。我有以下代码，但是当我运行时，它给出了

“404 未找到”CFE。

```
<cfscript>
httpService = new http();
httpService.setMethod("Post");
httpService.setThrowOnError(true);
httpService.setTimeOut(30);
httpService.setURL("http://xxxxxxxxxxxxx.svc");//THEIR http
httpService.setusername("MY USERNAME I HAVE BEEN GIVEN TO ACCESS THEIR web");
httpService.setPassword("THE PASSWORD THEY ASSIGNED ME");   
httpService.addParam(type="body", name="Content-Type", value="text/plain");

result = httpService.send().getPrefix();
</cfscript> 
```

任何人都可以帮忙吗？

我也尝试过像这样设置用户名和密码。但我不知道这是否是问题所在。

```
httpService.addParam(type="formfield", name="userName", value="MY USERNAME"); 
```

当我改变

```
 httpService.setURL("httpxxxxxxxxx.svc"); 
```

至

```
 httpService.setURL("httpxxxxxxxxx.svc/basicHttp"); 
```

它改为给出“415 Unsupported Media Type”。还没有找到可以帮助我解决这个问题的真正来源。这些是外部来源给我的 URL。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:11:46.067

我认为下面的行有问题：

```
httpService.addParam(type="body", name="Content-Type", value="text/plain"); 
```

[根据文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d85.html)，您可能希望类型为“标题” 。我不确定这是否一定会停止 404 错误（这将取决于外部 Web 服务）。

如果这不能解决它，我接下来要做的是：

*   安装[提琴手](http://fiddler2.com/)
*   启动提琴手
*   将 httpService.setProxyServer("127.0.0.1") httpService.setProxyPort("8888") 添加到您的代码中
*   重试 ColdFusion 页面。请求现在应该出现在 Fiddler 中。

您现在可以检查请求和响应，这可能会为您提供有关什么不起作用的线索。您还可以将请求保存为来自 fiddler 的 .SAZ 文件并发送给服务的开发人员，他们可以查看它并可能会给您反馈。

# facebook-graph-api - 文件获取内容请求 400 图形 api

> ID：16062050
> 
> 赞同：0
> 
> 时间：2013-04-17T13:55:43.920
> 
> 标签：facebook-graph-api, request, file-get-contents

当我使用 file_get_contents（[https://graph.facebook.com/xxxxxxxxx?access_token=xxxxxxxxxxxxxxxx](https://graph.facebook.com/xxxxxxxxx?access_token=xxxxxxxxxxxxxxxx)）提出请求时，我得到了这个结果。

遇到 PHP 错误

严重性：警告

消息：file_get_contents（[https://graph.facebook.com/xxxxxxxxx?access_token=xxxxxxxxxxxxxxxx](https://graph.facebook.com/xxxxxxxxx?access_token=xxxxxxxxxxxxxxxx)）：无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求

但是当我在浏览器中复制网址时它可以工作，有人知道吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:43:44.677

利用

```
$ctx = stream_context_create(['http'=>['ignore_errors' => true]]);
$data = file_get_contents($url, 0 , $ctx); 
```

对于 http 答案代码与 200 不同。

ps：5.4 的数组语法；如果您使用 <5.4，请将 [ ... ] 更改为 array( ... )

# elasticsearch - Graylogs、RabbitMQ 或 ElasticSearch 的多种 AMQP 配置

> ID：16062051
> 
> 赞同：0
> 
> 时间：2013-04-17T13:55:49.343
> 
> 标签：elasticsearch, rabbitmq, message-queue, amqp, graylog2

这是我想做的事情：

我正在使用 RabbitMQ VHosts 来打破不同的项目工作流程，每个 vhosts 都有自己的日志交换/队列，Graylogs 从中消费。

问题是 Graylogs 只能配置一个 AMQP 服务器和/或 VHost。

我正在寻找的是一种解决方法：

1.  让 RabbitMQ 将消息从一个 VHost (A) 转发到另一个 VHost (B)
2.  为多个 RabbitMQ VHosts 配置 Graylogs
3.  为多个 RabbitMQ 虚拟主机配置 ElasticSearch
4.  其他建议

因此，对于解决我的问题，上述任何一项都会很棒或有一些见识。我知道我可以使用相同的 VHost，但这本身就是另一个问题。

更新：

~~看起来 #1 选项是不行的~~
看起来选项 #1 可以通过 @Jeremy 发布的 Shovel Plugin 完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:38:12.917

AFAIK 最新版本的 Graylog 允许您运行多个 Graylog 服务器。这样做并将每个绑定到不同的消息队列会解决您的问题吗？

# visual-studio-2012 - 如何在 VS2012 中自动格式化代码缩进？

> ID：16062057
> 
> 赞同：10
> 
> 时间：2013-04-17T13:55:58.093
> 
> 标签：visual-studio-2012, format, indentation, auto-indent

如何在 VS2012 中自动格式化代码以节省键入和删除空格和制表符的时间？

![在此处输入图像描述](https://i.stack.imgur.com/nEmF6.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T19:41:30.470

如果您希望在输入文本时格式化代码，**工具\选项\文本编辑器**区域中有一些额外的设置。

由于您的示例似乎是配置文件 (XML)，请查看 XML 编辑器。

![在此处输入图像描述](https://i.stack.imgur.com/M91fl.png)

否则，要随时格式化，*@mitaka*和*@Xaruth*的建议很好。

请注意，激活**格式文档**和**格式选择**的按键会有所不同，具体取决于您在 Visual Studio 中活动的开发设置。要查看在您的 VS 副本中为命令分配了哪些击键，请查看“**编辑**”菜单。

![在此处输入图像描述](https://i.stack.imgur.com/NJYA6.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T15:11:27.463

我使用以下组合在 VS2012 中自动格式化我的代码的缩进。

web.config 中未格式化的代码块： ![未格式化的 xml 块](https://i.stack.imgur.com/wOTXz.png)

**Ctrl + A**选择要在VS2012中格式化的文件中的所有代码。或者您可以手动选择代码块。

**Ctrl + K**，然后**Ctrl + F**将使用适当的缩进格式化代码。

格式化代码块 ![在此处输入图像描述](https://i.stack.imgur.com/cmkDF.png)

# c# - 将 css 类添加到剃刀元素

> ID：16062059
> 
> 赞同：9
> 
> 时间：2013-04-17T13:56:09.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

如果我有类似的东西：

`@Html.EditorFor(model => model.name)`甚至：`@Html.CheckBoxFor(m => m.RememberMe)`

我将如何为它们添加一个 css 类或一个 id？我一直在阅读有关助手的内容，但我是否必须为每个元素制作一个助手？有没有简单的方法可以将类或 id 添加到剃刀表单元素？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T14:01:54.073

You cannot do that with the `EditorFor` helper simply because you don't know what template will be used. You could achieve it but you will need to write a custom editor template. For example this could be achieved by overriding the [`default editor template`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html) and taking into account the second parameter which represents an additional view data.

Here's an example of how such a custom editor template could look for string types (`~/Views/Shared/EditorTemplates/string.cshtml`):

```
@Html.TextBox(
    "", 
    ViewData.TemplateInfo.FormattedModelValue,
    ViewData
) 
```

and then you could use it like that:

```
@Html.EditorFor(model => model.name, new { @class = "myclass" }) 
```

With the CheckBoxFor helper you could do that:

```
@Html.CheckBoxFor(m => m.RememberMe, new { @class = "myclass" }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:04:17.253

CheckboxFor 很容易，你可以这样做：

```
@Html.CheckBoxFor(m => m.RememberMe, new { @class="your_class", @id="the_id" }) 
```

EditorFor 有点棘手，因为它不支持开箱即用。我的意思是您可以为每种类型创建一个模板，然后执行 TextBoxFor 添加 html 属性（与 CheckBoxFor 的语法相同）。您可能必须为您想要支持的每种类型执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:58:52.510

因为`EditorFor`不是特定于类型的，所以你不能在那些上使用它。

对于[`CheckBoxFor`](http://msdn.microsoft.com/en-us/library/ee830433%28v=vs.108%29.aspx)，您可以使用：

```
@Html.CheckBoxFor(m => m.RememberMe, new { @class = "myClass", id = "myID" }) 
```

注意`@`前面，`class`因为这是 C# 中的保留关键字

# jquery - 来自 AJAX Succes 的 JSON 结果的 jQuery 循环挂起，因为 firefox 一直在执行 javascript

> ID：16062060
> 
> 赞同：1
> 
> 时间：2013-04-17T13:56:12.513
> 
> 标签：jquery, ajax, json, list

关于这个问题： [jQuery loop over JSON result from AJAX Success?](https://stackoverflow.com/questions/733314/jquery-loop-over-json-result-from-ajax-success)

我有以下内容，这使得 Firefox 在返回太多项目（新 div）之前使用了太多的 cpu，其中只有一些“未定义”文本，尽管我可以看到（在我使用的小提琴页面上）我的方式想要检索项目（例如user.functionTitle）是正确的。这里出了什么问题？

```
var result = [{"id":7,
"loginID":"jdoe",
"userStatus":"ACTIVE",
"firstName":"John",
"middleName":"",
"prefix":"",
"lastName":"Doe",
"functionTitle":"Junior developer"},
{"id":8,
"loginID":"jadoe",
"userStatus":"ACTIVE",
"firstName":"Jane",
"middleName":"",
"prefix":"",
"lastName":"Doe",
"functionTitle":"Junior developer"}
]; 
```

下面是我尝试用firebug调试的ajax语句，但在“$ .each（result，function（idx，user）{”行之后它只是挂起，直到Firefox告诉我一些javascript花费了太多时间......

```
 $.ajax({
        type : 'POST',
        url : "../hrm/search",
        contentType : 'application/x-www-form-urlencoded',
        cache: false,
        data: "name=" + $("#site-search").val(),
        dataType : 'text',
        success : function(result) {
            if (result != null) {
                $.each(result, function(idx, user) {
                        $('#found-users').append("<div class='option'>" +
                            "<div class='pass-wrapper'>" +
                        "</div>" +
                            "<div class='sr-content'>" + user.firstName + " " + user.prefix + " " + user.lastName + "</div>" +
                            "<div class='sr-content'>" + user.functionTitle + "</div>" +
                        + "</div>");
                });
                $("#found-users").show;
            } else {
                 $('#found-users').hide;
                 $('#found-users div').empty();
            }

        }
    }); 
```

jsp 页面中的代码如下所示：

```
 <div><input type="text" placeholder="search" id="site-search"></div>
                            <div id="found-users" class="search-results options">
                            </div> 
```

首先：如果我把数据和下面的语句放在一个 jsfiddle 页面中，它会完全按照它应该做的那样做，它会弹出两次函数标题。当我将 div 添加到页面而不是弹出警报时，相同的代码如何执行两次以上？其次，为什么 user.functionTitle 突然返回 undefined？

```
$.each(result, function(idx, user) {
        alert(user.functionTitle);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:43:47.737

解决方案非常简单：只需将 dataType 从 text 更改为 json ，一切正常，否则每个循环将处理自己进入的每个字符

# c++ - QDockWidget 可见分隔符

> ID：16062061
> 
> 赞同：0
> 
> 时间：2013-04-17T13:56:12.763
> 
> 标签：c++, qt, qdockwidget

我的应用程序中有一个左侧停靠`QDockWidget`。我希望它有可见的边框和分隔符，但默认情况下它没有。

如何设置停靠小部件以使其具有可见边缘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:57:58.490

您始终可以将框架小部件作为停靠小部件的子小部件，但是在浮动小部件时您将拥有双框架。

# c++ - 设置高 DPI 时防止我的 Win32 应用程序的 UI 元素按比例放大

> ID：16062062
> 
> 赞同：2
> 
> 时间：2013-04-17T13:56:13.463
> 
> 标签：c++, winapi, visual-studio-2008, dpi

当窗口设置为“将文本大小调整为“125%”时，我的 Win32 应用程序的 UI（但不是它的窗口大小）会按比例放大。这会导致文本字符串被截断并且 UI 元素从窗口边缘消失。

我想防止这种情况发生，这样文本就不会按比例放大，并且应用程序会正确显示。由于正确获取这个旧的旧应用程序 DPI 感知的时间投入太高，我只想通过调整 UI 元素的大小来防止 Windows 破坏 UI 来使该应用程序可用。

我曾尝试在启动期间调用 SetProcessDPIAware()，但当它不起作用时，表明应用程序在其清单中是 DPI Aware。但是，这些措施都没有任何效果。

我用来指定 DPI 感知的清单片段：

```
<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
  <asmv3:application
           xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">
    <asmv3:windowsSettings
      xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
      <dpiAware>true</dpiAware>
    </asmv3:windowsSettings>
  </asmv3:application>
</assembly> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-19T22:34:55.180

我在使用 SDL OpenGL 时遇到了类似的问题。Windows DPI 缩放在不知情的应用程序上的实现非常糟糕，例如放大全屏视口和裁剪侧面。

我对清单没有任何运气。

我可以通过调用来解决它，`SetProcessDPIAware();`但它必须在 SDLmain 执行之前发生。也许您的“启动期间”还不够早。我在函数之前将它用作全局变量初始化器`main`：

```
BOOL dpi_result = SetProcessDPIAware();

int main( int argc, char **argv )
{
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T12:48:49.160

这只是对在此问题上错误怀疑 MFC / Windows 7 的警告。

我遇到了同样的问题。我们的（较旧的）MFC 应用程序在 Windows 7 上运行且字体设置为 125% 时，以错误的大小显示对话框。控件被缩放，但每个对话框都小了大约 25%。

起初，我在对话框代码中搜索可能设置其大小/位置的任何内容。然后我看到网上很多人在将MFC应用程序迁移到Windows 7时遇到对话框大小的问题，这增加了我对MFC / Windows 7的怀疑。

最后，我阅读了一个类似的讨论，发现 spy++ 的维护者的评论说，它在退出时保存大小/位置的功能在字体/ DPI 更改后强制窗口大小错误。我们的软件也在做同样的事情，但代码在主应用程序中，而不是在对话框中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:09:00.257

对于 125% 的字体缩放，DPI 感知设置不相关。发生的情况是文本将大 25%，然后您有责任扩展您的 UI 以匹配。您的对话框通常需要大 25% 才能容纳更大的文本。您不仅需要缩放尺寸，还需要缩放位置。由你来编写所有这些代码。或者使用一个为你做这件事的 UI 框架。

对于大于 125% 的字体缩放，DPI 感知设置开始发挥作用。会发生什么：

1.  如果您的应用未标记为 DPI 感知，Windows 将使用光栅图像调整大小来缩放您的应用。这将导致您的视觉元素被像素化。
2.  如果你的应用被标记为 DPI 感知，Windows 将忠实地呈现你的应用。同样，您有责任缩放 UI 以适应文本。

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/dd464660.aspx)包含所有血淋淋的细节。

回到你的具体问题。你说：

> 我想防止这种情况发生，这样文本就不会按比例放大，并且应用程序会正确显示。

换句话说，您是说您想忽略用户的字体缩放设置并以 100% DPI 进行渲染，而不管他们的意愿如何。您可以通过将所有文本的大小减小 25% 来做到这一点。我真的不建议你这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-21T04:07:22.370

在我团队的应用程序中，我们在程序集属性而不是应用程序属性上有 asmv3 的 xmlns 属性。

而不是这一行：

```
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'> 
```

这一行：

```
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0' xmlns:asmv3="urn:schemas-microsoft-com:asm.v3"> 
```

我拿了我的产品的应用清单并将其剥离到只有父节点和父节点。这里供参考：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">
  <asmv3:application>
    <asmv3:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
      <dpiAware>true</dpiAware>
    </asmv3:windowsSettings>
  </asmv3:application>
</assembly> 
```

# jquery - 动态 select2 不触发更改事件

> ID：16062064
> 
> 赞同：25
> 
> 时间：2013-04-17T13:56:14.633
> 
> 标签：jquery, events, onchange, jquery-select2

我有一个表格，里面有几个选择。我在这些选择上应用了 select2 jquery 插件，如下所示：

```
$("select.company_select, select.positions_select").select2(); 
```

选择工作正常，但我有这个代码来自动提交我的表单（我在表单标签上有自动提交类）。

```
var currentData;
    $('.autosubmit input, .autosubmit select, .autosubmit textarea').live('focus', function () {
        currentData = $(this).val();
    });

    $('.autosubmit input, .autosubmit select, .autosubmit textarea').live('change', function () {
        console.log('autosubmiting...');
        var $this = $(this);
        if (!currentData || currentData != $this.val()) {
            $($this.get(0).form).ajaxSubmit(function (response, status, xhr, $form) {
                currentData = "";
            });
        }
    }); 
```

问题是，使用 select2，更改或焦点事件根本不会触发。如果我删除 select2，则事件会完美触发。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-17T14:14:23.270

Select2 只有 2 个事件，`open`并且`change`( [http://select2.github.io/select2/#events](http://select2.github.io/select2/#events) )，您只能向它们添加侦听器。您可以使用`open`event 而不是`focus`for`<select>`元素。请不要使用`live()`方法，因为它已被弃用。改为使用`on()`。

```
var currentData;
$(".autosubmit select").on("open", function() {
    currentData = $(this).val();
});
$(".autosubmit input").on("focus", function() {
    currentData = $(this).val();
});
$(".autosubmit input, .autosubmit select").on("change", function() {
    var $this = $(this);
    console.log('autosubmitting');
    if (!currentData || currentData != $this.val()) {
        $($this.get(0).form).ajaxSubmit(function (response, status, xhr, $form) {
            currentData = "";
        });
    }
}); 
```

这是[小提琴](http://jsfiddle.net/4BLAa/412/)

# scala - 定义方法时的 NoMethodError

> ID：16062067
> 
> 赞同：0
> 
> 时间：2013-04-17T13:56:19.227
> 
> 标签：scala

我正在关注 Coursera Scala 类的视频 3.1，但无法让我的 Scala 工作表识别出确实为 Empty 类定义了 contains 方法：

```
package objsets

abstract class IntSet {
  def incl(x:Int): IntSet
  def contains(x:Int): Boolean
}

class Empty extends IntSet {
def contains(x: Int): Boolean = false
def incl(x: Int): IntSet = new NonEmpty(x, new Empty, new Empty)
}

class NonEmpty (elem: Int, left: IntSet, right: IntSet) extends IntSet {
    def contains(x: Int):Boolean =
        if (x < elem) left contains x
        else if (x > elem) right contains x
        else true

    def incl(x:Int):IntSet =
        if (x < elem) new NonEmpty(elem, left incl x,right)
        else if (x > elem) new NonEmpty(elem, left, right incl x)
        else this
}

object Video1 {
    val empty = new Empty
    empty.contains(2)
} 
```

在对象 Video1 的末尾，当我调用 .contains() 时，我在 Scala IDE 工作表中收到以下错误：

`NoSuchMethodError: objsets.Empty.contains(I)Z`

# java - 如何将证书链添加到密钥库？

> ID：16062072
> 
> 赞同：38
> 
> 时间：2013-04-17T13:56:23.050
> 
> 标签：java, openssl, certificate, keystore, keytool

我有证书链文件-certificate.cer：

```
subject=/C...
issuer=/C=US/O=VeriSign, Inc...
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----

subject=/C=US/O=VeriSign, Inc...
issuer=/C=US/O=VeriSign, Inc...
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----

subject=/C=US/O=VeriSign, Inc...
issuer=/C=US/O=VeriSign, Inc...
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE----- 
```

我需要将此证书链添加到密钥库。
我所做的：

```
openssl x509 -outform der -in certificate.cer -out cert.der
keytool -v -importcert -alias mykey -file cert.der -keypass <passwd> -keystore keystore -storepass <passwd> -alias <myalias> 
```

结果我在密钥库中只有 1 个证书。
但应该有 3。
可能有什么问题？

**解决方案：**
CA 向我发送了 PKCS#7 格式的证书。
我将它们存储在 certificate.p7b 文件中，然后通过以下命令成功地将它们添加到密钥库：

```
keytool -import -trustcacerts -file certificate.p7b -keystore keystore -storepass <mypasswd> -alias "myalias" 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2016-11-01T18:22:15.523

我通过将所有 pem 组合在一起解决了这个问题：

```
cat cert.pem chain.pem fullchain.pem >all.pem
openssl pkcs12 -export -in all.pem -inkey privkey.pem -out cert_and_key.p12 -name tomcat -CAfile chain.pem -caname root -password MYPASSWORD
keytool -importkeystore -deststorepass MYPASSWORD -destkeypass MYPASSWORD -destkeystore MyDSKeyStore.jks -srckeystore cert_and_key.p12 -srcstoretype PKCS12 -srcstorepass MYPASSWORD -alias tomcat
keytool -import -trustcacerts -alias root -file chain.pem -keystore MyDSKeyStore.jks -storepass MYPASSWORD 
```

（keytool 不知道如何处理 PKCS7 格式的密钥）

我从letsencrypt得到了所有的pems

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-17T14:08:29.653

从 keytool man - 它导入证书链，如果输入以 PKCS#7 格式给出，否则只导入单个证书。您应该能够通过 openssl crl2pkcs7 命令使用 openssl 将证书转换为 PKCS#7 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-04T04:19:48.503

我用下面来解决我的密钥库链问题谢谢@nont

```
echo -e 'Concat certs'
cat "${DIR_PATH}/tls/server/public/server.cert.pem" "${DIR_PATH}/tls/intermediate/certs/ca-chain-bundle.cert.pem" > "${DIR_PATH}/tls/server/tomcat/all.cert.pem"
echo -e "Creating new tomcat keystore"
openssl pkcs12 -inkey "${DIR_PATH}/tls/server/private/server.key.pem" -in "${DIR_PATH}/tls/server/tomcat/all.cert.pem" -export -out "${DIR_PATH}/tls/server/tomcat/tomcat.pfx" -password pass:changeit 
```

# jpa - 如何使用 EclipseLink (JPA) 调用 Oracle 存储过程

> ID：16062074
> 
> 赞同：4
> 
> 时间：2013-04-17T13:56:26.173
> 
> 标签：jpa, stored-procedures, eclipselink

有人可以解释一下如何使用 EclipseLink 调用存储过程吗？这是我的存储过程：

```
TYPE nested_varchar2 IS TABLE OF varchar2(15);
TYPE nested_number IS TABLE OF number(1);

 procedure set_pacs_state_cond(
    icond in varchar2, -- where condition
    icheck_state in number, -- check expected current state
    iso_id_list out nested_varchar2, -- list of suboperators
    ipac_list out nested_varchar2, -- list of pacs
    iresult out nested_number -- list of results
); 
```

我使用 EclipseLink 2.4.1 作为 JPA 实现。请在下面查看我的代码。

```
PLSQLStoredProcedureCall call = new PLSQLStoredProcedureCall();

call.setProcedureName("PCK_PR.set_pacs_state_cond");

call.addNamedArgument("icond", "icond", Types.VARCHAR);
call.addNamedArgument("icheck_state", "icheck_state", Types.NUMERIC);
call.addNamedOutputArgument("iso_id_list", "iso_id_list", Types.ARRAY, "nested_varchar2");
call.addNamedOutputArgument("ipac_list", "ipac_list", Types.ARRAY, "nested_varchar2");
call.addNamedOutputArgument("iresult","iresult", Types.ARRAY, "nested_number");

DataModifyQuery valQuery = new DataModifyQuery();
valQuery.setCall(call);

valQuery.addArgument("icond");
valQuery.addArgument("icheck_state");
valQuery.addArgument("iso_id_list", java.sql.Array.class);
valQuery.addArgument("ipac_list", java.sql.Array.class);
valQuery.addArgument("iresult", java.sql.Array.class);

List test1 = new ArrayList();
List test2 = new ArrayList();
List test3 = new ArrayList();

valQuery.addArgumentValue("WHERE");
valQuery.addArgumentValue(1);
valQuery.addArgumentValue(test1);
valQuery.addArgumentValue(test2);
valQuery.addArgumentValue(test3);

session.executeQuery(valQuery);

List results = (List) session.executeQuery(valQuery);

em.getTransaction().commit();

DatabaseRecord record = (DatabaseRecord)results.get(0);

List ii = (List) record.get("iso_id_list");
List i = (List) record.get("ipac_list");
List r = (List) record.get("iresult");

em.close(); 
```

我收到以下错误：

```
Internal Exception: java.sql.SQLException: ORA-06550: line 5, column 21:
PLS-00201: identifier 'ARRAY' must be declared
ORA-06550: line 5, column 21: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:15:05.047

不能通过 JDBC 返回 PLSQL TABLE 类型。PLSQLStoredProcedureCall 的工作方式是将 TABLE 类型与 VARRAY 类型包装在一起。您需要自己创建镜像 VARRAY 类型，并指定它们。这是一个或测试之一的示例，

```
 PLSQLCollection collection = new PLSQLCollection();
    collection.setTypeName("PLSQL_P.PLSQL_CITY_LIST");
    collection.setCompatibleType("PLSQL_P_PLSQL_CITY_LIST");
    collection.setNestedType(JDBCTypes.VARCHAR_TYPE);

    PLSQLStoredProcedureCall call = new PLSQLStoredProcedureCall();
    call.setProcedureName("PLSQL_P.PLSQL_CITY_LIST_IN");
    call.addNamedArgument("P_CITY_LIST", collection);
    call.addNamedArgument("P_CITY", JDBCTypes.VARCHAR_TYPE);
    DataModifyQuery query = new DataModifyQuery();
    query.addArgument("P_CITY_LIST", java.sql.Array.class);
    query.addArgument("P_CITY", String.class);
    query.setCall(call); 
```

# c++ - 为什么我的程序在运行时使用的内存不断增长？

> ID：16062076
> 
> 赞同：0
> 
> 时间：2013-04-17T13:56:33.060
> 
> 标签：c++, memory, 2d, sdl, game-engine

从第一次搜索这个我发现一些消息来源说我可能有内存泄漏。但是当我详细搜索内存泄漏是什么时，它说我在使用“new”而不使用“delete”时发生了但是我在整个程序中甚至没有使用过一次 new 所以我假设这意味着问题是别的. 我没有任何不断增长的数组或任何我能想到的会导致这种情况的东西。在程序初始化之后，我想它在那之后不会改变，但我会成长，而且我可能会很快添加。

该程序非常大，因此我认为将其全部粘贴在这里不是一个好主意。也许只是一些可能导致这种情况的事物的一般想法可以帮助我知道在哪里看。

只是给出一个想法，该应用程序是一个 2d 横向滚动条，就像超级马里奥世界

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:24:02.287

由于您使用`SDL`，我怀疑分配来自`SDL`像`IMG_Load`or之类的调用`SDL_LoadWave`。根据经验，当 API 为您提供指针时，这意味着您也必须要求 API 释放它。

举个[`SDL_Surface`](http://sdl.beuc.net/sdl.wiki/SDL_Surface)例子，调用`IMG_Load`（或任何其他用于分配图像的 API 函数）将分配内存。完成后，您将需要手动调用`SDL_FreeSurface`每个人`SDL_Surface`以释放内存。

中的所有其他资源都是一样的`SDL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:25:41.020

我看到您将 SDL 作为您的标签之一，所以我假设这个 2D 游戏正在使用该库。

如果是这种情况，那么库功能之一的使用很可能是动态分配内存。

如果您正在为 Mac OS X 开发，您可以使用与 Xcode 捆绑在一起的免费工具，称为 Instruments；这有一个用于识别内存泄漏的模板。

如果您正在为 Windows 进行开发，那么您可以使用许多工具，其中之一是 Intel 的 Parallel Studio，它内置了一个内存分析工具，尽管它不是免费的。

观察内存使用情况的另一种选择可能是使用跨平台的 Google C++ 测试框架。此框架将允许您测试部分代码，以便您可以看到对 SDL 的调用导致您的内存快速增长。

# c# - Linq Lambda - 浏览次数最多的页面

> ID：16062083
> 
> 赞同：2
> 
> 时间：2013-04-17T13:57:00.747
> 
> 标签：c#, linq, linq-to-sql, asp.net-mvc-4, pagedlist

我有一个 C# MVC4 Web 应用程序，我试图找出它的 linq 语句。（如果可能，Lambda）

我有两张表，Hits 和 Posts。点击跟踪网站上每个页面的所有访问。帖子就像博客条目。当用户访问 Post 时，PostId 会记录在 Hit 表中。

表：

**点击** HitId、Url、PostId

**帖子** PostId、PostDate 等

该网站的一个类别是“观看次数最多”，它将显示按点击次数降序排列的观看次数最多的帖子列表。

最后，我使用的是 IPagedList，所以请记住最终列表需要排序。

我试过的：

```
 var postCount = 
    _db.Posts.Join(_db.Hits, posts => posts.PostId, hits => hits.PostId, (posts, hits) => new { posts, hits })
    .GroupBy(num => num.posts.PostId)
    .OrderByDescending(gp => gp.Count())
    .Select(g => g.Key).ToList();

   var results = _db.Posts.Where(p => postCount.Contains(p.PostId));
   const int pageSize = 5;
   var pageNumber = (page ?? 1);
   return View(results.ToPagedList(pageNumber, pageSize)); 
```

所以 postCount 是一个由 MostViewed 排序的 PostId 列表，这就是我想要的。但是，由于我使用的是 IPagedList，因此出现此错误：

```
 The method 'Skip' is only supported for sorted input in LINQ to Entities. The method 'OrderBy' must be called before the method 'Skip'. 
```

任何帮助表示赞赏！谢谢！

# 编辑

感谢任何试图提供帮助的人。

如果我添加 .ToList()：

```
 var results = _db.Posts.Where(p => all2.Contains(p.PostId)).ToList(); 
```

这解决了错误，但它仍然丢失了 postCount 的顺序。它现在只是按 PostId 排序。

也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:26:08.533

该代码看起来非常复杂。您可以通过简单地按点击次数对帖子进行排序来将其减少为*一个查询，如下所示：*

```
var results = from post in _db.Posts
              join hit in _db.Hits
              on post.PostId equals hit.PostId
              group hit by post into g
              orderby g.Count() descending
              select g.Key;

return View(results.ToPagedList(page ?? 1, 5)); 
```

这将转化为如下内容：

```
SELECT Post.PostId, Post.PostDate, Post.Whatever, ..., COUNT(*) C
    FROM Post
    INNER JOIN Hit ON Post.PostId = Hit.PostId
    GROUP BY Post.PostId, Post.PostDate, Post.Whatever, ...
    ORDER BY C DESC
    OFFSET @offset ROWS
    FETCH NEXT @pageSize ROWS ONLY 
```

此外，通过添加`.ToList()`到您的查询中，它将从您的数据库中获取所有内容并在内存中进行过滤，这可能会慢得多，具体取决于服务器和数据库之间的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:30:38.380

以下情况如何：

```
var results = _db.Posts.Join(_db.Hits, posts => posts.PostId, hits => hits.PostId, (posts, hits) => new { posts, hits })
    .GroupBy(num => num.posts)
    .OrderByDescending(gp => gp.Count())
    .Select(g => g.Key)
    .ToList(); 
```

# javascript - 相对于其背后图像的文本颜色

> ID：16062085
> 
> 赞同：2
> 
> 时间：2013-04-17T13:57:04.743
> 
> 标签：javascript, jquery, css, colors

我有一种强烈的感觉，那就是这是不可能的——但这就是我在这里的原因。

我有一个网站，它的主页上有一个全屏幻灯片，一个带有透明背景和深色文本/内容的标题。问题是在较暗的图像上，您看不到内容，因为它也很暗。

显然我可以给 div 一个背景，但这不是设计所要求的。

有什么方法可以让文本相对于背景着色，可能是“反转”颜色效果或类似的东西？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:04:18.220

1.  将信息存储在文件名中（最简单） - 例如 image1_light.png、imagex_dark.jpg 并查看 _light 或 _dark。或者

2.  [如何以编程方式选择对比度好的 RGB 颜色？](https://stackoverflow.com/questions/7260989/how-to-pick-good-contrast-rgb-colors-programmatically)

3.  canvas/html5[使用 JavaScript 或 jQuery，如何在鼠标特别移动的地方获得 RGB 颜色 <img> 或 <div> 元素](https://stackoverflow.com/questions/7985722/using-javascript-or-jquery-how-can-i-get-the-rgb-color-where-ever-the-mouse-is)

要看的demo是[http://www.script-tutorials.com/demos/158/index.html](http://www.script-tutorials.com/demos/158/index.html)在这里你需要确定文字的位置，看看文字下面的主色是什么

`$(".navigation").position()`是 {上：30，左：381}
`$(".navigation").width())`是 214
`$(".navigation").height())`是 68

我认为代码会是这样的

[工作示例](http://jsfiddle.net/mplungjan/jwL5S/)

```
var ctx,canvas;   
$(function(){ // on page load, this should likely be on image transition

  // creating canvas object in memory. 
  // Since I do not append it anywhere it is not rendered
  canvas = $("<canvas/>")[0]; // a jQuery object on its own does not work
  ctx = canvas.getContext('2d');

  var image = new Image(); // create an image object in memory
  image.onload = function () {
      // resize
      canvas.width=this.width;
      canvas.height=this.height; 
      // render the image on the canvas
      ctx.drawImage(image, 0, 0); 
      var nav =  $(".navigation"); // get the navigation container
      // find a pixel about in the middle where the navigation would be
      var pos = {left: nav.position().left+(nav.width()/2), top: nav.position().top+(nav.height()/2) }
      var pixel = ctx.getImageData(pos.left,pos.top, 1, 1).data;
      $canvas=null; // no longer need this canvas 
      var invertedPixelColor = "rgba("+(255-pixel[0])+", "+(255-pixel[1])+", "+(255-pixel[2])+", "+1+")"; // invert it, ignoring the alpha channel
      nav.css("color",invertedPixelColor); // set the nav text to inverted color
      // here you could save the colour and reuse it 
      // if the user navigates to the same image
  }
  image.src = $(body).css('background-image'); // load the image, triggering the calc

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:40:28.433

你可以通过蛮力做到这一点。确定每个图像的文本颜色，然后在图像根据新图像的名称更改时使用 Javascript 设置颜色。当然，这意味着如果您更改任何图像，您也必须更改 Javascript。

# python - django，从过滤对象列表中获取一个对象，该对象具有字段的最大值

> ID：16062092
> 
> 赞同：0
> 
> 时间：2013-04-17T13:57:16.297
> 
> 标签：python, django

`Modelname.objects.filter(student__in=malerep).order_by('-Votes','-student__Percentage')` 在这里，我想专门获得票数最多的学生。我想做的是，获取参加选举并获得一些选票的学生名单，然后根据他们获得的票数对他们进行排序。Now if i can access the first object in this list , i can make necessary modifications for the student in the database who won the election and also get the details of the rest. 我被困在这一点上。请帮忙

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:40:34.650

此时，您有两个选择：

首先，使用“max”来获取某个字段的最大值，并使用该最大值来检索特定的学生实例。好的方面，这很容易实现；不好的一面，您需要两次访问数据库才能实现目标。

其次，使用 raw()。您可以执行所有您想要的复杂查询。这将解决您的问题。好的一面是，您有最大的自由来执行任何查询；不好的一面，需要sql知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:29:18.867

'objs=Modelname.objects.filter(student__in=malerep).order_by('-Votes','-student__Percentage')' 然后使用`objs[0]`i 能够以最大票数和最大百分比访问学生的对象，以防出现平局.

# java - 如何阻止数组元素相互叠加？

> ID：16062098
> 
> 赞同：0
> 
> 时间：2013-04-17T13:57:41.400
> 
> 标签：java, android, andengine

我正在使用 AndEngine 开发一款适用于 Android 的游戏，并且我有一系列汽车对象，它们在屏幕上的不同车道上从左到右移动。当汽车超过相机宽度（屏幕尺寸）时，我将其位置设置为 0（屏幕左侧）- spriteWidth()（就在屏幕视口的左侧）。我的问题是，由于返回的随机坐标，这些汽车一直在彼此重叠。我尝试了很多事情，但它一直在发生。

这是用于在游戏开始时设置汽车坐标的方法，以及向右离开屏幕的方法。

```
public Vector2 randomRoadCoord()
{
    int Y;
    int X;

    int arrayLength = rManager.getInstance().roadPosition.length;
    int arrayFirstValue = 1;

    Random xR = new Random();
    int Low = (int) (5 *(0 - rManager.getInstance().car_region.getWidth()));
    int High = (int) (0 - rManager.getInstance().car_region.getWidth());
    X = xR.nextInt(High-Low) + Low;

    Random yR = new Random();

    int LowY = arrayFirstValue;
    int HighY = arrayLength;
    Y = yR.nextInt(HighY-LowY) + LowY;;

    if (firstLoad)
    {
        for(int i = 0; i < rManager.getInstance().carArray.length; i++)
        {
            for(int j = 0; j < rManager.getInstance().carArray.length; j++)
            {
                while(rManager.getInstance().carArray[i].getCarSprite().collidesWith(rManager.getInstance().carArray[j].getCarSprite()))
                    X-= 150;
            }
        }
    }

    lastX = X;
    lastY = Y;
    return new Vector2(X, Y);
} 
```

如您所见，在某些区域之间返回随机 x 和 y 值；具体来说，相机的顶部和底部（静态相机，所以基本上是视口），以及屏幕外的 -50 到 -450 之间（类似的东西）。我的问题是我需要他们停止加载，因为如果发生碰撞，用户就会输掉游戏。我尝试检查每辆汽车的精灵，看看它在加载时是否已经与另一辆汽车发生碰撞（尽管这肯定会产生减速，如果确实如此，请将 X 坐标进一步向左移动，但它似乎没有做任何事情。

```
/*if (firstLoad)
        {
        for(int i = 0; i < rManager.getInstance().carArray.length; i++)
        {
            while(rManager.getInstance().carArray[i].getCarX() + 100 > X && X > rManager.getInstance().carArray[i].getCarX() - 100)
                X-= 150;
        }       
        firstLoad = true;
    }   */ 
```

我也试过检查这辆车是否在其他车的 x + 150 和 x - 150 之间，但这也无济于事。不是所有的车都装在彼此的顶部，但肯定不止1辆，这太多了。

谢谢。请随时提出任何问题。

- - - - - - - - - - - - - - - - - 更新：

我尝试使用整形外科医生的建议，但同样的问题仍然存在。尽管将汽车装载在另一辆汽车上的可能性要小得多，但仍然偶尔会**发生**。这次我把代码注释了，应该更容易理解。

```
for (int i = 0; i < rManager.getInstance().carArray.length; i++)
            {
                if(rManager.getInstance().carArray[i].getCarSprite().getX() < (rManager.camera.getWidth() + rManager.getInstance().carArray[i].getCarSprite().getWidth()))
                {
                    // moves car from left to right
                    rManager.getInstance().carArray[i].getCarSprite().setPosition(rManager.getInstance().carArray[i].getCarSprite().getX() + (rManager.getInstance().carArray[i].getSpeed() * 4), rManager.getInstance().carArray[i].getCarSprite().getY()); 
                } 

                else //if out of the screen
                {       
                    //set the position to the left of the screen
                    rManager.getInstance().carArray[i].getCarSprite().setPosition(randomRoadCoord().x, rManager.getInstance().roadPosition[(int) randomRoadCoord().y].y);

                    //if colliding with another car
                    while(collidesWithExisting(rManager.getInstance().carArray[i]))
                    {   //set a new random pos
                        rManager.getInstance().carArray[i].getCarSprite().setPosition(randomRoadCoord().x, rManager.getInstance().roadPosition[(int) randomRoadCoord().y].y);
                    }
                }
            } 
```

方法：

```
boolean collidesWithExisting(Car pCar)
{
    for(int j = 0; j < rManager.getInstance().carArray.length; j++)
    {
        if (rManager.getInstance().carArray[j] == pCar)
            return false;

        if(rManager.getInstance().carArray[j].getCarSprite().collidesWith(pCar.getCarSprite()))
            return true;
    }
    return false;
} 
```

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:58:20.400

您的循环至少存在一个问题：当 X 值更改时，您检查 .collidesWith() 的条件不会改变。因此可能会发生额外的误报。

第二个问题是，如果发生 collidesWith() 事件，则无法知道新的 x 是否也会在循环的早期对另一辆车造成 collidesWith() 事件。想象一下在两辆车之间放置第三辆车，两辆车之间的距离太近而无法容纳一辆汽车。没有办法在单循环或双循环中解决这个问题。

**所以这里有一个不同的策略：**只让*一个*轴完全随机。一次通过 X 轴（汽车的行驶方向）一辆车。随机确定该位置是否应该有汽车。如果是，则沿 Y 轴随机定位该车。没有太多麻烦，您可以让每一步放置一辆或多辆汽车。

如果您不希望网格如此明显，您可以将您的 X 循环提前 1/2 车长。然后，您只需要检查与上一次迭代中放置的汽车或汽车的碰撞，您只需在 Y 轴上偏移以防止碰撞。

**这也是第二种策略：** 将每辆车随机放置在一个循环中。循环测试以查看当前汽车是否与任何其他汽车发生碰撞。继续随机重新分配它的 x 和 y 直到它不碰撞。最后，您将拥有一系列不接触的汽车。

```
 Car newCar = new Car();
   newCar.setPosition(randomXPostion, randomYPosition);
   while(testCarCollidesWithExisting(newCar)){
       newCar.setPosition(randomXPostion, randomYPosition);
   } 
```

"testCarCollidesWithExisting" 方法循环遍历已经放置的汽车数组，如果新车重叠，则返回 true，如果汽车不重叠，则返回 false。

== 更新完整示例 ==

这是一个工作示例。使用的图形是 andengine 示例中的“坦克”。有一个警告：如果您放置的坦克数量超过了容纳的数量，脚本将会挂起，因为它会卡在一个 while 循环中。我认为大约 20 与您可以使用该尺寸的图像和舞台尺寸一样多。

包 com.example.andenginetestbed;

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.texture.ITexture;
import org.andengine.opengl.texture.bitmap.BitmapTexture;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.texture.region.TextureRegionFactory;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.adt.io.in.IInputStreamOpener;
import org.andengine.util.debug.Debug;

import android.os.Bundle;
import android.view.Menu;

public class TestBed extends SimpleBaseGameActivity {

    // ===========================================================
    // Constants
    // ===========================================================

    private static final int CAMERA_WIDTH = 720;
    private static final int CAMERA_HEIGHT = 480;

    // ===========================================================
    // Fields
    // ===========================================================

    private ITexture mTexture;
    private ITextureRegion mFaceTextureRegion;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_test_bed);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.test_bed, menu);
        return true;
    }

    @Override
    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
        try {
            this.mTexture = new BitmapTexture(this.getTextureManager(), new IInputStreamOpener() {
                @Override
                public InputStream open() throws IOException {
                    return getAssets().open("tank.png");
                }
            });

            this.mTexture.load();
            this.mFaceTextureRegion = TextureRegionFactory.extractFromTexture(this.mTexture);
        } catch (IOException e) {
            Debug.e(e);
        }
    }
    ArrayList<Sprite> placedSprites = new ArrayList<Sprite>();
    @Override
    protected Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

        /* Calculate the coordinates for the face, so its centered on the camera. */
        final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
        final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;

        /* Create the face and add it to the scene. */
        for (int i = 0; i < 20; i++) {
            final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion, this.getVertexBufferObjectManager());
            scene.attachChild(face);
            face.setPosition((float)(Math.random()*CAMERA_WIDTH), (float)(Math.random()*CAMERA_HEIGHT));
            while(faceDoesNotOverlap(face)){
                face.setPosition((float)(Math.random()*CAMERA_WIDTH), (float)(Math.random()*CAMERA_HEIGHT));                
            }
            placedSprites.add(face);

        }

        return scene;
    }

    private boolean faceDoesNotOverlap(Sprite face) {
        for (int i = 0; i < placedSprites.size(); i++) {
            if(face.collidesWith(placedSprites.get(i))){
                return true;
            }
        }
        return false;
    }

} 
```

# internet-explorer - IE中的css文本溢出位置

> ID：16062105
> 
> 赞同：0
> 
> 时间：2013-04-17T13:58:02.353
> 
> 标签：internet-explorer, css

使用文本溢出省略号样式时，在 IE 浏览器中正确对齐某些文本时遇到问题。当将此样式放置在跨度上时，以下跨度会与省略号不符，似乎会导致中断。[这里的例子](http://dabblet.com/gist/5404436)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:01:35.553

那是因为您使第一个`span`元素显示为`display:inline-block`.

要么显示其余的跨度，要么设置`vertical-align:text-bottom`为第一个跨度。

# spring - Spring 3.2 属性文件自动装配失败

> ID：16062111
> 
> 赞同：0
> 
> 时间：2013-04-17T13:58:20.510
> 
> 标签：spring, spring-mvc, annotations

我在将属性文件添加到 spring 3.2.2 Web 应用程序时遇到问题。

我的 Web.xml：

```
 <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/mvc-dispatcher-servlet.xml,
                /WEB-INF/spring-security.xml
            </param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

  <!-- Spring Security -->  
 <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>contextAttribute</param-name>
        <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.spring</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的 mvc-dispatcher-servlet.xml：

```
<mvc:default-servlet-handler />
<mvc:annotation-driven />
 <context:annotation-config/>
<context:property-placeholder location="/WEB-INF/application.properties"/>
<context:component-scan base-package="com.mypackage.controller" />
<context:component-scan base-package="com.mypackage.model" />
<context:component-scan base-package="com.mypackage.model.service" />
<context:component-scan base-package="com.mypackage.model.serviceImpl" /> 
```

我还在 xml 标头中添加了相应的“上下文”模式定义。

另外还有一个 spring-security.xml （我不在这里发布内容）。

我的类 com.mypackage.model.serviceImpl.FeatureServiceImpl 从 application.properties 读取，如下所示：

```
…
@Autowired
private Environment env;
env.getProperty("db.host"); 
```

我得到这个例外：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'featureController': Injection of autowired dependencies failed;
…
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.mypackage.model.serviceImpl.FeatureServiceImpl com.mypackage.controller.FeatureController.featureService; 
```

我在这里想念什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:53:00.633

这个

```
<context:property-placeholder location="/WEB-INF/application.properties"/> 
```

意味着您可以`db.host`像这样访问该属性：

```
@Value("${db.host}")
private String dbHost; 
```

application.properties 文件应该看起来像这样

```
db.host=myserver
db.url=jdbc:mysql://localhost:3306/myapp
db.pwd=mypassword
db.mymultiline = cheesey \
chips \
ketchup
db.another = 42 
```

# app-store - 求内购助手类

> ID：16062115
> 
> 赞同：0
> 
> 时间：2013-04-17T13:58:29.587
> 
> 标签：app-store, in-app-purchase

我正在使用`UIStoreKit`来实现 App Store 上的应用内购买。

我曾经听说网上有一些帮助类可以帮助处理幕后的一切，所以我可以使用简单的方法来使用它。

我不记得或找不到名字。我很乐意指导一个受欢迎的课程来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:56:21.433

好，我知道了。它被称为[这里](http://blog.mugunthkumar.com/coding/introducing-mkstorekit-%E2%80%93-version-3/)和[这里](http://blog.mugunthkumar.com/coding/iphone-tutorial-%E2%80%93-in-app-purchases/)`MKStorekit` 都有指南

> MKStoreKit [Github 链接](https://github.com/MugunthKumar/MKStoreKit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T14:01:42.447

you can see the followings links:

[http://xcodenoobies.blogspot.fr/2012/04/implementing-inapp-purchase-in-xcode.html](http://xcodenoobies.blogspot.fr/2012/04/implementing-inapp-purchase-in-xcode.html) [http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# matlab - 调用 GUI 在 for 循环 Matlab 中获取输入

> ID：16062122
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:58:57.707
> 
> 标签：matlab, user-interface

我正在运行一个具有 for 循环的脚本。在 for 循环中，我正在调用 GUI。GUI 打开时显示 3 个数字。然后它有一个按钮，用于从 GUI 获取输入。

当我运行它时，它会在不接受输入的情况下进行迭代，因此我无法接受输入。
我使用了 uiwait 和 uiresume 但它们不起作用（可能是因为我无法使用它）。

任何形式的帮助将不胜感激。
谢谢

这是演示代码：
脚本：

```
for i=1:5  
    tp1(i)  
end 
```

图形用户界面：

```
function tp1_OpeningFcn(hObject, eventdata, handles, varargin)

handles.output = hObject;  
global j  
guidata(hObject, handles);  
i=varargin{1};  
set(handles.edit1,'String',num2str(i));    

function edit2_Callback(hObject, eventdata, handles)  
global t;    
t=get(hObject,'String');    

function pushbutton1_Callback(hObject, eventdata, handles)  
global t  
t  
close('gcbf') 
```

这是代码片段。

在 gui 我有 2 个编辑框。edit1 用于输出，edit2 用于输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:07:52.697

我希望按钮的回调知道将用户输入放置在哪里以便其他功能可以找到...如果是，请尝试这样的操作让您的程序等待：

```
h = msgbox(                         ...
    'Close this when you''re done', ...
    'The user interface says...',   ...
    'help', 'non-modal'             ...
);
uiwait(h); 
```

# sql - 复制行并更改一小部分列？

> ID：16062123
> 
> 赞同：3
> 
> 时间：2013-04-17T13:59:05.393
> 
> 标签：sql, oracle

首先，让我先说我知道类似问题的 INSERT/SELECT 解决方案（请参阅[此处](https://stackoverflow.com/questions/2783150/mysql-how-to-copy-rows-but-change-a-few-fields)），但它不适用于我的场景。

我正在寻找一种不需要明确列出所有列的解决方案，因为这些列是提前未知的。此查询将在数十个独立数据库中的同一张表上运行。所有数据库都有一个公共列的子集，但每个都有自己独特的列，特定于该数据库。

那么，有没有办法复制整行，更改一些已知/恒定的列子集，然后在不明确列出所有列的情况下重新插入它？唯一的解决方案是使用从模式中收集的 DDL 信息动态构建查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:10:22.807

**注意：此答案适用于 SQL Server。在此答案之后将[oracle标签添加到问题中](/questions/tagged/oracle "显示标记为“oracle”的问题")**

根据良好设计的原则，我将假设您的表有一个`IDENTITY`也是主键的列。我们还假设它没有**计算**列（或时间戳或任何需要更多操作的类型）。最后让我们假设您至少知道这个 ID 列的名称，这是标准的，例如“ `id`”。

您可以使用以下顺序：

```
SELECT * INTO #tmp FROM tbl WHERE id = @copyfrom;
ALTER TABLE #tmp DROP COLUMN id;
UPDATE #tmp SET
   column1 = ...,
   column2 = ...,
   column3 = ...;  --- the subset of columns you want to change
INSERT tbl SELECT * FROM #tmp; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!6/d25bdd/1/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:10:40.770

`create table as`我认为您可以通过（或`select into`）和更新的组合来做您想做的事情。

因此，创建表的副本：

```
create table newTable as
    select *
    from oldTable 
```

或者，取决于您的数据库：

```
select *
into newTable
from oldTable 
```

然后使用 update 进行更改：

```
update newTable
    set col2 = col1,
        code = (case when code = 'bad' then good else code end) 
```

# c# - 如何以最快的方式求解具有 4 个或 7 个变量的多项式

> ID：16062124
> 
> 赞同：0
> 
> 时间：2013-04-17T13:59:10.457
> 
> 标签：c#, polynomial-math, factorization

给定方程：

```
K = Ap + Bq + Cr + Ds. 
```

**我试过的解决方案：**

我们已经知道的术语：**A、B、C、D、K**

在给定 p, q, r 的情况下找到术语 s；

```
p=0, q=0, r=1;
compute() => s = (K - Ap - Bq - Cr)/D; 
```

继续直到**s 变为 < 0；** *对于所有项 p=0, q=0, r=1...n;*

同样继续，直到**s 变为 < 0；** *对于 p=0, q=1..n, r=1...n 的所有项；*

和，

最后，继续直到**s 变为 < 0；** *对于 p=1..n、q=1..n 和 r=1..n 的所有项；*

编码 3 个循环用于更新 p、q 和 r。

如果 K 变大，例如 1000...、8145、45000 等，则需要更多时间来计算；

请不要建议外部库...我正在寻找编码解决方案。

**示例片段**

```
for (int i = 0; i < preSpecifiedIterations; i++)
{
 p = i;

 if (A * p > K)  //Exit condition ; if Ap > K
  break;

  for (int j = 0; j < preSpecifiedIterations; j++)
  {
   q = j;

   if (B * q > K) //Exit condition ; if Bq > K
    break;

   for (int k = 1; k < preSpecifiedIterations; k++)
   {
    r = k;
    // compute s given p, q, and r;
    s = (K - (A * p) - (B * q) - (C * r)) / D;

    if (s < 0) //Exit condition ; don't process if s < 0 i.e negative values
     break;
    else
     ...
   }
  }
} 
```

另外，如果有人注意到：**preSpecifiedIterations** -> 是否可以确定在计算之前需要多少次迭代？

有没有更好的算法来解决上述问题？

**非常感谢阅读。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:39:12.373

对于 StackOverflow，这不是一个很好的问题；对于数学站点之一来说更好。但无论如何我都会在这里回答。

您当然可以比蛮力做得更好，就像您在这里所做的那样。您应该能够在几微秒内计算出答案。

*当且仅当 (A, B, C, D) 的最大公约数*整除 K 时，存在解。*这就是贝祖身份*的扩展形式。

为了确定 (1) gcd 是什么以及 (2) p, q, r, s 的值是什么，您可以使用*Extended Euclidean Algorithm*，您可以在此处阅读：

[http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

我的建议是首先编写一个程序来求解以下形式的简单线性丢番图方程`ax + by = c`。完成此操作后，请阅读 Wikipedia 文章中名为“超过两个数字的情况”的部分，该部分描述了如何扩展算法以处理您的情况。

# c - 你怎么能找到电子枪/扫描线的位置？

> ID：16062131
> 
> 赞同：1
> 
> 时间：2013-04-17T13:59:33.163
> 
> 标签：c, zxspectrum

如何在 ZX Spectrum 上找到电子枪的位置（即主动改变像素/扫描线）？

不同的 Spectrum 型号的时间略有不同。

如果这是不可能的，有没有办法等待某种形式的垂直同步事件？（即在屏幕底部的顶部。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:23:20.740

There is a 3 byte frame counter at address 23672.

```
23672 FRAMES 
3 byte (least significant first), frame counter. Incremented every 20ms. 
```

I'm making the assumption that this is incremented by the 50Hz interrupt. So I'll just poll it in a loop until the least significant byte changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:43:36.890

您拥有的唯一可靠的同步事件是在屏幕刷新的垂直空白期开始时产生的 50Hz 中断。

基本上，您有两种选择。绝大多数人只会从中断等待屏幕开始。对于不同的模型和克隆，所需的等待时间是不同的。大多数依赖这种精确时间的程序只支持一两个模型。最先进的程序会尝试识别特定的克隆/模型并相应地调整时间，但由于任务的复杂性和缺乏足够详细的文档，没有人基于这种方法创建真正可移植的程序在许多模型上。

第二个选项是使用端口#FF。它不是一个真正的端口，但从它读取会返回 ULA 当前从屏幕获取的字节的值（或 255）。因此，可以在中断上同步，然后轮询端口#FF，直到它返回不同于 255 的值（假设您的屏幕包含不同的内容）。但是，请注意，一些常见的 Spectrum 模型，例如 +2A 和 +3，没有这种行为，所以再一次，如果您对支持的模型的良好覆盖感兴趣，这不是一个选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T09:35:06.050

那是很久以前的事了，但我记得有一个内存刷新计数器会针对每条扫描线进行更新。如果在 vblank 将其设置为 0，它将包含当前扫描线。

# c# - 验证一个字符串数组的所有项目是否出现在另一个字符串数组中的最佳算法

> ID：16062132
> 
> 赞同：-3
> 
> 时间：2013-04-17T13:59:37.197
> 
> 标签：c#, indexof, arrays

我有两个字符串数组，一个包含文件名，如 file1.docx、file2.docx、file3.docx，另一个数组来自 UI 控件，必须像第一个但添加了日期。我需要验证第一个数组的所有项都存在于第二个数组中（是第二个数组项字符串的一部分）。

```
foreach (UITestControl t in children)
{
    Boolean found = false;

    var div = t as HtmlDiv;
    if (div == null) continue;
    String actualText = div.InnerText;

    foreach (string t1 in searchResultNames)
    {
        if (!found)
        {
            if (actualText.IndexOf(t1, StringComparison.InvariantCultureIgnoreCase) >= 0)
            {
                found = true;
                result.AssertTrue(found, t1 + "found in search result");
            }
        }
    } 
```

我使用 indexOf 方法，但也许可以以某种方式改进此代码？

我们的代码中使用的算法结果是永远不会失败:) 因为如果找到至少一个项目，它总是返回 true :) 然后它只是通过 foreach 循环并将找到的值设置为 true 并且一切都很好:) 所以我需要更改此代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:03:16.533

```
bool allExist = !firstArray.Except(secondArray).Any() 
```

**EDIT**

```
bool allExist = !firstArray.Except(secondArray, new MyComparer()).Any() 
```

* * *

```
public class MyComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.StartsWith(y);
    }

    public int GetHashCode(string obj)
    {
        return obj[0].GetHashCode();
    }
} 
```

# android - setText 方法对动态设置 MaskFilterSpan 的 EditText 没有影响

> ID：16062139
> 
> 赞同：0
> 
> 时间：2013-04-17T14:00:05.847
> 
> 标签：android, android-edittext, settext, spannable

环境：安卓4.2

**布局/activity_main.xml**

```
<EditText
    android:id="@+id/et_content"
    android:background="#AAAAAA"
    android:layout_width="match_parent"
    android:textSize="40sp"
    android:layout_height="match_parent"
    android:gravity="left|top" >

    <requestFocus />
</EditText> 
```

**测试1**（成功！有效果）：

```
SpannableStringBuilder spanText = SpannableStringBuilder.valueOf("abcdefghijklmnopqrstuvwxyz");
MaskFilterSpan maskFilterSpan = new MaskFilterSpan(new BlurMaskFilter(3, Blur.OUTER));
spanText.setSpan(maskFilterSpan, 0, spanText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
etContent.setText(spanText); 
```

**测试2**（失败！没有效果，为什么？？？）：

```
String str = etContent.getText().toString();
SpannableStringBuilder spanText = SpannableStringBuilder.valueOf(str);
MaskFilterSpan maskFilterSpan = new MaskFilterSpan(new BlurMaskFilter(3, Blur.OUTER));
spanText.setSpan(maskFilterSpan, 0, etContent.length(), Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
etContent.setText(spanText); 
```

不同的是，第二段代码是从EditText获取的数据。第二个代码使用**String str = etContent.getText().toString();** 我在第一段代码之前尝试了添加代码editText.setText（“123456”），发现模糊效果也失败了。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T17:33:17.023

如果您在 AndroidManifest.xml 中的 Activity 上设置 android:hardwareAccelerated="false"，它会正确呈现。

硬件加速不支持 BlurMaskFilter。

[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

# iphone - 覆盖 iPhone 上滚动视图的 3D 阴影

> ID：16062141
> 
> 赞同：0
> 
> 时间：2013-04-17T14:00:09.607
> 
> 标签：iphone, scrollview

我附加了一个带有页面控件的滚动视图的图像，并且滚动视图周围有一个边框我想知道如何实现我已经完成了滚动视图的东西。所以只是寻找一种方法来实现那个 3d 阴影边框

谢谢

![在此处输入图像描述](https://i.stack.imgur.com/JFzwj.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:00:34.020

只需在 Photoshop 或任何具有透明度的东西中制作阴影。在将带有 addSubview 的滚动视图添加到视图后添加此图像，它的外观和感觉就像附加图片中的滚动视图。

# php - 尝试在 WordPress 中使用 DFP 定位 - 需要有关问题的建议 -

> ID：16062147
> 
> 赞同：1
> 
> 时间：2013-04-17T14:00:45.047
> 
> 标签：php, javascript, wordpress, google-dfp

好的，这是我的场景：我在 DFP 中定义了以下自定义定位条件：

*   键：smag-lps，值是在 WordPress 中匹配的静态页面名称，用于定位广告的目标网页
*   key: postid, values - 允许用户输入帖子的 id 来定位广告的帖子。

目标是投放 DFP 广告，以在创建广告时选择页面名称或帖子 ID。在我的 WordPress 主题 header.php 中，我尝试了：

```
<script type='text/javascript'>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') +
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
</script>
<script type="text/javascript">
      googletag.cmd.push(function() {
        googletag.pubads().set("adsense_background_color", "FFFFFF");
      });
</script>
<script type='text/javascript'>
      googletag.cmd.push(function() {
        googletag.defineSlot('/2152723/SM-Leaderboard1', [728, 90], 'div-gpt-ad-1366056066154-0').addService(googletag.pubads());
            .addService(googletag.pubads())
            .setTargeting("smag-lps", "<?php echo get_current_page(); ?>")
                    .setTargeting("postid", "<?php echo get_the_ID(); ?>");
        googletag.defineSlot('/2152723/SM-Leaderboard2', [728, 90], 'div-gpt-ad-1366056066154-1').addService(googletag.pubads());
            .addService(googletag.pubads())
            .setTargeting("smag-lps", "<?php echo get_current_page(); ?>")
                    .setTargeting("postid", "<?php echo get_the_ID(); ?>");
googletag.pubads().enableSingleRequest();
        googletag.enableServices();
      };
</script> 
```

当我尝试使用 php echo 检索当前页面或 ID 时，它正在破坏我的网站。关于我做错了什么有什么建议吗？

-M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:33:17.100

你可以试试这个（你在脚本标签中，也许谷歌代码的 php 代码出错了）将引号添加到 echo 字符串中。

```
.setTargeting("smag-lps", <?php echo '"'.get_current_page().'"'; ?>)
.setTargeting("postid", <?php echo '"'.get_the_ID().'"'; ?>); 
```

# node.js - 我应该使用不同的套接字连接还是不同的命名空间？

> ID：16062148
> 
> 赞同：1
> 
> 时间：2013-04-17T14:00:44.910
> 
> 标签：node.js, sockets, websocket, socket.io, iisnode

我的 socket.io 实现中有不同的通道，并且将与连接到这些通道的客户端交换大量数据。所以我有点困惑，我应该在socket.io中使用命名空间概念，它为同一套接字连接下的每个通道创建单独的命名空间，还是应该在每个通道的不同端口上创建不同的套接字连接？请给我关于这两个选项将如何影响性能等的建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:35:22.283

命名空间似乎比不必要地捆绑多个套接字更好。您可以来回发送的数据量将受到整体带宽容量的限制。除非套接字连接到不同的机器，或者单个套接字的使用效率低下（即同步/阻塞活动），否则打开新的套接字连接不会神奇地增加吞吐量。

# ruby-on-rails - Paypal Express Checkout：可以使用 ActiveMerchant 设置收件人吗？

> ID：16062150
> 
> 赞同：0
> 
> 时间：2013-04-17T14:00:46.353
> 
> 标签：ruby-on-rails, ruby, paypal, activemerchant

我正在使用 ActiveMerchant 和 Paypal Express Checkout 付款。可以设置收件人吗？例如：

```
gateway =  ActiveMerchant::Billing::PaypalExpressGateway.new(
  :login => "...",
  :password => "...",
  :signature => "..."
)

response = gateway.setup_purchase(100,
  ip: request.remote_ip,
  return_url: 'http://localhost:3000/cancel',
  cancel_return_url: 'http://localhost:3000/return',
  recipient: 'seller@example.com' # Set recipient here
)

redirect_to gateway.redirect_url_for(response.token) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-21T15:36:09.570

收件人是什么意思？您正在设置网关以将所有付款定向到这些凭据的所有者。

# c# - List.Contains() 的循环实现看起来比内置的更快。是吗？如果是这样，为什么？

> ID：16062154
> 
> 赞同：12
> 
> 时间：2013-04-17T14:00:52.460
> 
> 标签：c#, optimization, generic-list

（[这个问题来自从这里开始的讨论](https://stackoverflow.com/questions/16059391/most-efficient-way-to-find-if-a-value-exists-within-a-c-sharp-list/16059650#16059650)）

我正在比较使用中查找值的时间与`true`手动循环的时间。`List<bool>``List.Contains()`

我看到的结果与其他人报告的结果不同。我已经在几个系统上尝试过，在我尝试过的所有系统上，循环似乎快了 2 到 3.5 倍。这些系统的范围从运行 XP 和 .Net 4 的 5 年前的笔记本电脑到运行 Windows 8 和 .Net 4.5 的最新 PC。

其他人报告了不同的结果，即`List.Contains()`与循环速度大致相同或略快。

这是我的测试代码。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;

namespace ConsoleApplication1
{
    internal class Program
    {
        private static void Main()
        {
            int size = 10000000;
            int count = 10;
            List<bool> data = new List<bool>(size);

            for (int i = 0; i < size; ++i)
                data.Add(false);

            var sw = new Stopwatch();

            for (int trial = 0; trial < 5; ++trial)
            {
                sw.Restart();

                for (int i = 0; i < count; ++i)
                    TestViaLoop(data);

                sw.Stop();
                Console.WriteLine(sw.ElapsedMilliseconds + " TestViaLoop()");
                sw.Restart();

                for (int i = 0; i < count; ++i)
                    TestViaListContains(data);

                sw.Stop();
                Console.WriteLine(sw.ElapsedMilliseconds + " TestViaListContains()");
                Console.WriteLine();
            }
        }

        static bool TestViaLoop(List<bool> data)
        {
            for (int i = 0; i < data.Count; ++i)
                if (data[i])
                    return true;

            return false;
        }

        static bool TestViaListContains(List<bool> data)
        {
            return data.Contains(true);
        }
    }
} 
```

要测试此代码，您应该将其编译为 x86 RELEASE 版本，并从调试器*外部运行它。*

这是我使用 .Net 4.5 框架从我的 Windows 8 x64 PC 得到的结果（尽管我使用 .Net 4 得到了类似的结果）：

```
Times are in milliseconds

126 TestViaLoop()
441 TestViaListContains()

122 TestViaLoop()
428 TestViaListContains()

131 TestViaLoop()
431 TestViaListContains()

138 TestViaLoop()
426 TestViaListContains()

122 TestViaLoop()
439 TestViaListContains() 
```

如您所见，循环花费了我系统上大约 1/3 的时间。

现在，如果我们使用它`Resharper`来查看它的实现，`List.Contains()`它看起来像这样：

```
bool Contains(T item)
{
    if (item == null)
    {
        for (int j = 0x0; j < this._size; j++)
        {
            if (this._items[j] == null)
            {
                return true;
            }
        }
        return false;
    }
    EqualityComparer<T> comparer = EqualityComparer<T>.Default;
    for (int i = 0x0; i < this._size; i++)
    {
        if (comparer.Equals(this._items[i], item))
        {
            return true;
        }
    }
    return false;
} 
```

虽然它正在使用`Comparer.Equals()`（这应该使它比循环慢）它也`_items[]`直接使用私有数组，这避免了将用于我的循环实现的索引范围检查。

我有三个问题：

1.  其他人可以复制我看到的结果吗？（请记住在调试器之外运行发布版本。）
2.  如果是这样，任何人都可以解释我的循环如何比 快得多`List.Contains()`吗？
3.  如果没有，谁能解释为什么我看到我的循环更快？

这对我来说不仅仅是学术上的兴趣，因为我编写的代码可以处理大量数字数据并且需要尽可能快，这是我需要了解的事情。（注意：是的，我分析了一些东西，只尝试优化需要优化的东西......我知道过早优化的问题。）

[编辑]

我突然想到这可能与处理器有关。我尝试过的所有系统都有英特尔处理器，尽管型号非常不同，从 3.8GHz 的四核到 1.6GHz 的奔腾 M 单核......

对于那些看到循环运行速度较慢的人，您正在运行英特尔处理器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:32:17.223

它使用了 GenericEqualityComparer，如果我们看一下 Equals 方法的实现是这样的：

```
public override bool Equals(T x, T y)
{
  if ((object) x != null)
  {
    if ((object) y != null)
      return x.Equals(y);
    else
      return false;
  }
  else
    return (object) y == null;
} 
```

当它检查对象是否不等于 null 时，它会对它们进行装箱，并得到两个装箱操作。此 IL 代码显示了它的外观：

```
IL_0002: box !T
IL_0007: ldnull
IL_0008: ceq 
```

* * *

**由 280Z28 编辑：**相同方法的 CIL 在 .NET 4.5 中略有不同。

```
public override bool Equals(T x, T y)
{
    if (x != null)
        return ((y != null) && x.Equals(y));

    if (y != null)
        return false;

    return true;
} 
```

这里是IL。对于任何查看 Reflector 的人，请注意`brfalse.s`和`brnull.s`是相同的说明。

```
L_0000: ldarg.1 
L_0001: box !T
L_0006: brnull.s L_0021
... 
```

基线 JIT 编译器不会优化框操作，但我没有检查 NGen 或优化编译器是否可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:41:18.873

您的循环实现产生与 相同的输出`Contains`，但您不能在一般情况下使用它。即，您最终将不得不`Equals`对更复杂的对象进行比较。该`Contains`实现比您的实现**执行更多的工作**，所以我不明白为什么**在这种情况下**您应该期望它更快。

如果你有一个自定义`Person`对象的列表，并重写`Equals`方法来比较它们的`Address` `Name` `SSNumber`and `DateOfBirth`，那么循环将以几乎相同的性能成本执行。

我希望原始值，然后是循环迭代将优于 generic `Contains`，但这是一个过早的优化，你不会（基本上）比`Contains`更复杂的对象比较做得更好。

# maven - 允许 sbt.ivy 使用带有自签名证书的 https 存储库下载工件

> ID：16062158
> 
> 赞同：1
> 
> 时间：2013-04-17T14:01:09.840
> 
> 标签：maven, playframework, ssl-certificate, playframework-2.1

使用自签名证书访问 https 存储库时出现下一个错误。

> [错误] 服务器访问错误：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider .certpath.SunCertPathBuilderException：无法找到请求目标 url= [https://example.com/nexus的有效证书路径/content/repositories/public/microsoft/sqlserver/4.0.jdbc4/sqlserver-4.0.jdbc4.pom](https://example.com/nexus/content/repositories/public/microsoft/sqlserver/4.0.jdbc4/sqlserver-4.0.jdbc4.pom)

我已经使用添加了服务器证书`keytool`，但它仍然无法正常工作。

另一方面，使用相同的 JVM 版本 (jdk_7.0.15) maven 效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:36:55.410

我的系统中有几个 jdk 和 jre。问题是使用不同的版本。使用正确版本的keytool解决了这个问题

# c++ - 如何计算 char 数组中的元素数？

> ID：16062159
> 
> 赞同：3
> 
> 时间：2013-04-17T14:01:12.860
> 
> 标签：c++, windows, string, char, sizeof

我试图计算数组中的元素数，并被告知该行

```
int r = sizeof(array) / sizeof(array[0]) 
```

会给我数组中元素的数量。而且我发现该方法确实有效，至少对于 int 数组。然而，当我尝试这段代码时，事情就坏了。

```
#include <iostream>
#include <Windows.h>
using namespace std;

int main() {
    char binaryPath[MAX_PATH];
    GetModuleFileName(NULL, binaryPath, MAX_PATH);
    cout << "binaryPath: " << binaryPath << endl;
    cout << "sizeof(binaryPath): " << sizeof(binaryPath) << endl;
    cout << "sizeof(binaryPath[0]: " << sizeof(binaryPath[0]) << endl;

    return 0;
} 
```

当这个程序运行 binaryPath 的值是

```
C:\Users\Anish\workspace\CppSync\Debug\CppSync.exe 
```

这似乎有一个 sizeof 返回的大小（以字节为单位？位？idk，有人可以解释一下吗？）为 260。该行

```
sizeof(binaryPath[0]); 
```

给出值 1。

显然，然后将 260 除以 1 得到 260 的结果，这不是数组中元素的数量（据我计算，它是 42 左右）。有人可以解释我做错了什么吗？

我有一个偷偷摸摸的怀疑，它实际上不是我认为的数组（我来自 Java 和 python），但我不确定，所以我问你们。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T14:03:24.343

260 is `MAX_PATH`, which you're getting because `sizeof` returns the size of the entire array - not just the size of the string inside the array.

To get the behavior you're looking for, use `strlen` instead:

```
cout << "binaryPath: " << binaryPath << endl;
cout << "strlen(binaryPath): " << strlen(binaryPath) << endl; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:03:12.323

If you are looking for the size of the string then you need to use [`strlen`](http://en.cppreference.com/w/c/string/byte/strlen), if you use `sizeof` it will tell you the allocated amount not the size of the null terminated string:

```
std::cout << "strlen(binaryPath: " << strlen(binaryPath) << std::endl; 
```

You will need to add `#include <cstring>` on the top.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T14:04:24.770

您将数组的大小与其包含的字符串的长度混淆了。`sizeof(arrayVar)`为您提供数组的整个大小，而不管它包含的字符串有多长。您需要使用它`strlen()`来确定它所包含的字符串的实际长度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T14:18:06.250

回想一下，C++ 和 C 中的 char 数组用于存储原始字符串，并且此类字符串的结尾由空字符标记。

该运算符`sizeof`不是**动态**的：它将为您提供整个数组的大小，或者您*以字节*（或字符，因为它们具有相同的大小）提供的任何类型，如您的代码中所定义。因此*260*肯定是 的值`MAX_PATH`，用于定义 char 数组`binaryPath`。

`GetModuleFilename`根据上述约定，调用后存储在该数组中的字符串将以空值终止。为了获得它的长度，您需要计算其中的字符，直到达到空字符或使用`strlen`C 库提供的函数。

一些指示：

*   [sizeof 是做什么的？](https://stackoverflow.com/questions/3203162/what-does-sizeof-do)
*   [斯特伦](http://www.cplusplus.com/reference/cstring/strlen)

# css - 使用 BootStrap 中的背景颜色

> ID：16062164
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:01:31.040
> 
> 标签：css, twitter-bootstrap

因此，当我意识到当我将 div 与 btn 类一起放置时，我只是在进行实验，它也会使 div 成为 btn，但有趣的是它有一个非常好的背景。我可以使用那个背景吗？我真的很想让它成为我侧边栏的背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:12:25.790

您[真的应该考虑安装 Firebug](https://getfirebug.com/)来检查页面上的某些元素及其 CSS 属性（在这种情况下）。

Firebug 将允许您选择一个元素并检查该元素的所有相关 CSS。然后您可以搜索您喜欢的属性，然后将其复制到您自己的 CSS 文件中的类中。

![它将向您显示一个类似于此的界面](https://i.stack.imgur.com/WqTmm.png)

# boost - 使用 Visual Studio 2012 构建提升，作为工具集提供什么？

> ID：16062165
> 
> 赞同：0
> 
> 时间：2013-04-17T14:01:32.407
> 
> 标签：boost

1.  使用 Visual Studio 2012 构建提升时，我应该提供什么作为工具集？

    *   msvc-10.0
    *   msvc-11.0（它存在吗？）
    *   msvc（自动检测？）
2.  使用 Visual Studio 2012 构建 boost x64 的推荐字符串是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T13:54:25.447

我参与了为您构建提升的图形工具的编程：http: [//vertexwahn.de/bluego.html](http://vertexwahn.de/bluego.html)

![在此处输入图像描述](https://i.stack.imgur.com/sWkX5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:06:42.433

您可以使用`bootstrap; b2`which 会自动为您选择。请参阅升压安装指南。

[在 Windows 上构建提升](http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html#id37)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:20:10.377

自己问我的问题。提供`msvc`工作正常。

# sql - Oracle REGEXP_REPLACE 函数中的括号错误

> ID：16062167
> 
> 赞同：0
> 
> 时间：2013-04-17T14:01:41.337
> 
> 标签：sql, regex, oracle, plsql

我编写了一个 Oracle 函数，它将一些符号替换为其他符号。字符串示例：

```
SELECT ReplaceStringFormat('Employee with FIO <FIO>') FROM dual; 
```

替换后的结果：

```
'Employee with FIO '||FIO||'' 
```

当字符串以括号开头或以括号结尾时出现错误 ORA-12725，如下所示：

```
SELECT ReplaceStringFormat('(<DEPTID>) have <EMP_NUMB> employees') FROM dual; 
```

或者

```
SELECT ReplaceStringFormat('Employee <FIO> works in dept (<DEPTID>)') FROM dual; 
```

我是 REGEXP 的新手。请解释一下，我该如何解决我的问题。

函数代码：

```
CREATE OR REPLACE FUNCTION ReplaceStringFormat (p_source_string IN VARCHAR2)
   RETURN VARCHAR2 IS

 v_result_string VARCHAR2(4000);
  v_counter BINARY_INTEGER := 1;
  v_flag NUMBER(1);
  v_last_char CHAR(1);
  v_last_char_new VARCHAR(5);
  v_first_char CHAR(1);
  v_first_char_new VARCHAR(5);
  v_first_char_flag NUMBER(1) := 0;

  BEGIN
    v_result_string := p_source_string;
    v_flag := 0; 
     WHILE v_counter <= 2 LOOP
      IF v_flag = 0 THEN
       IF INSTR (v_result_string, '<') = 1 THEN
        v_result_string := REGEXP_REPLACE(v_result_string, '<', '', '1', '1');
        v_first_char_flag := 1;
       ELSE
        IF v_first_char_flag = 0 THEN 
         v_first_char := SUBSTR(v_result_string, 1, 1);
         v_first_char_new := ''''||v_first_char;
         v_result_string := REGEXP_REPLACE(v_result_string, v_first_char, v_first_char_new, 1);
         v_first_char_flag := 1;
        ELSE
         v_result_string := REPLACE(v_result_string, '<', '''||');
         v_counter := v_counter + 1;
         v_flag := 1;
        END IF;
      END IF;
      ELSE
       v_result_string := REPLACE(v_result_string, '>','||''');
       v_last_char := SUBSTR(v_result_string, LENGTH(v_result_string), 1);
       v_last_char_new := v_last_char||'''';
       v_result_string := REGEXP_REPLACE(v_result_string, v_last_char, v_last_char_new, LENGTH(v_result_string));
       v_counter := v_counter + 1;
     END IF;
    END LOOP;  
  RETURN v_result_string;
END ReplaceStringFormat; 
```

ORA-12725 出现在以下行：

```
v_result_string := REGEXP_REPLACE(v_result_string, v_first_char, v_first_char_new, 1); 
```

和

```
v_result_string := REGEXP_REPLACE(v_result_string, v_last_char, v_last_char_new, LENGTH(v_result_string)); 
```

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:23:03.053

我不确定您是否真的需要正则表达式。标准[`REPLACE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions153.htm#i78608)应该起作用：

```
SQL> SELECT '''' || REPLACE(REPLACE(txt, '<', '''||'), '>', '||''') || '''' rep
  2    FROM (SELECT 'Employee <FIO> works in dept (<DEPTID>)' txt FROM dual);

REP
-------------------------------------------------
'Employee '||FIO||' works in dept ('||DEPTID||')' 
```

关于您的`ORA-12725`错误，您应该在代码中添加调试信息。我不确定您要在这里完成什么，但是如果您添加一个异常块，您会发现：

```
v_result_string = 'Employee '||FIO||' works in dept ('||D'EPTID||')
v_last_char     = )
v_last_char_new = )' 
```

这里的字符串`)`不是正确的正则表达式。

似乎您想用这个字符替换*字符串*的最后一个字符，后跟一个单引号。再一次，我认为您正在尝试使用正则表达式，因为它们不是最合适的工具。附加单引号最好留给附加运算符`||`（或[`concat`](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)函数）。

正则表达式是一个强大的工具，但[它们并不是最适合所有任务](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)。要执行附加字符串等基本操作，您应该使用标准函数。

# jquery - 使用 jQuery 从列表中动态读取属性

> ID：16062172
> 
> 赞同：1
> 
> 时间：2013-04-17T14:01:52.040
> 
> 标签：jquery, html-lists

现在我有一个 ul 列表，其中包含许多单选按钮选项和一个单独的表。当用户从 ul 列表中单击一个选项时，它会在表中添加一行，其中包含 'category' 和 'select' li 属性（但是硬编码的）和一个供用户写笔记的文本区域。我是 jQuery 新手，所以现在一切都是硬编码的，这显然不理想。

这是我现在拥有的代码示例。首先，基本列表用户从以下选项中选择：

```
<ul class="current_medication">
      <li class="category" title="Chronic Pain Referral">Chronic Pain Referral
        <ul>
        <li class="select" title="Chronic referral"><input type="radio" class="addRow1" id="radio1" name="modalities" value="1">
           <label for="radio1">Chronic referral</label></li>
        </ul>
      </li> 
```

然后是当用户单击单选选项时添加表格行的 jQuery 代码：

```
$('.addRow1').click(function() {
$('.mainTable > tbody:last').one().append('<tr style="text-align:center"><td>Chronic Pain Referral</td><td>Chronic referral</td><td><textarea name="notes"></textarea></td></tr>');
}); 
```

如您所见，它是硬编码的，因此列表中的另一个选项将具有类“addRow2”，并且将有一个与 addRow1 过于相似的 jQuery 函数，其中 td 标记之间的信息已更改。

我想要的是能够通过以某种方式读取类别的标题属性并选择“li”来自动执行此操作，这样我就可以为它们都提供一个 addRow 函数。我假设答案在 .attr() 的某个地方，但我不确定如何让它从单击的单选按钮中读取，然后从前面的 'li's 最接近包含标题属性的单选按钮获取相关信息.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:17:01.720

您可以将点击绑定中的代码更改为：

```
$('.mainTable > tbody:last').one().append(
    '<tr style="text-align:center"><td>' 
  + $(this).closest("li.category").attr("title")
  + '</td><td>'
  + $(this).closest("li.select").attr("title")
  + '</td><td><textarea name="notes"></textarea></td></tr>');
}); 
```

（如果我确实正确理解了您的问题）。

但请注意，它不会转义 HTML，例如，如果您的类别`<li>`是：

```
<li class="category" title="Chronic Pain &lt;b&gt;Referral"> 
```

（它将显示慢性疼痛**转诊**）。

所以我宁愿这样做：

```
$('.addRow1').click(function() {
 var tr = $(
    '<tr style="text-align:center"><td class="cat"></td>' 
  + '<td class="sel"></td>'
  + '<td><textarea name="notes"></textarea></td></tr>');
 $('.mainTable > tbody:last').one().append(tr);
 tr.find(".cat").text($(this).closest("li.category").attr("title"));
 tr.find(".sel").text($(this).closest("li.select").attr("title"));
}); 
```

# passwords - Joomla 2.5 - 设置最小密码长度

> ID：16062174
> 
> 赞同：2
> 
> 时间：2013-04-17T14:01:55.297
> 
> 标签：passwords, joomla2.5

我想将最小密码长度设置为**8**，但不知何故我无法做到这一点。

我尝试通过更改正则表达式来更改`validate.js`其中的内容`\media\system\js`，但它没有用。

```
this.setHandler('password', 
                 function (value) {
                 regex=/^\S[\S ]{6,98}\S$/; //Changed from 2 to 6
                 return regex.test(value);
                 }
               ); 
```

有没有办法增加密码的最小值，如果不满足则显示适当的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:15:20.643

要设置密码长度，包括两个步骤，

1.  条件：转到`root\components\com_users\models\registration.php` 并添加

    ```
    If (strlen($data['password']) < 8) {
    $this->setError(JText::sprintf('PLG_USER_PROFILE_REGWARN_PASS', $user->getError()));
        return false;
    } 
    ```

2.  消息：最后转到`root\administrator\language\en-GB\en-GB.plg_user_profile.ini`并添加

    `PLG_USER_PROFILE_REGWARN_PASS="Please enter a valid password of 8 or more characters"`

# css - Skinning for different languages

> ID：16062186
> 
> 赞同：0
> 
> 时间：2013-04-17T14:02:16.413
> 
> 标签：css, apache-flex, skinning, flex-spark

I have a flex application that currently supports english , now my task is to translate it to different languages, that requires support for different parameters for the styles, for example , some buttons need to be wider and some font sizes need to change.

At first I tryed to add a css file at runtime, that was ignored (I guess because of the skin file attached to the component)

My question is what is the recomended way to support multy-language/styled flex application (css or skin) , and how is it done with skinning ?

Thanks!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:46:01.930

一种方法

> 支持多语言/风格的 flex 应用程序

是手动的 - 每种语言都有一个 Flex 应用程序项目，每个项目都包含适当的样式和资源文件。您可以将公共代码移动到每个应用程序所依赖的库项目中......但这不会很好地扩展到超过 3 种语言。

更好但更复杂的是只有一个应用程序，它在运行时加载一个语言资源包和一个特定于语言的 CSS 文件。

首先，您的应用程序需要“知道”它所显示的语言。也许您对用户进行身份验证，从服务器了解他们的语言环境，然后为该语言环境加载 ResourceBundle。

其次，您加载特定于语言环境的 CSS 以适应加载的语言。我建议您将样式表拆分为“main”（编译到应用程序中，具有所有不会更改的样式）和“locale”（仅包含根据语言更改的样式）。

尽早在您的应用程序启动过程中，加载您的语言 .css 文件（例如，从服务器 URL），例如

```
var cssLoader:URLLoader = new URLLoader();
var req:URLRequest = new URLRequest("path_to_server_side_css_file");
cssLoader.addEventListener(Event.COMPLETE, cssLoadCompleteHandler);
cssLoader.addEventListener(IOErrorEvent.IO_ERROR, someErrorHandler);
cssLoader.load(req); 
```

在 cssLoadCompleteHandler() 中，魔法发生了。你想去掉任何可能妨碍你解析的东西，比如注释、空行，也许是命名空间。然后迭代提取每个样式、选择器等的文件。基本上你在这里是字符串黑客，这从来都不是最有趣的代码：/ 这是一个不平凡的代码块，你会想要最干净、最有纪律的CSS 文件，你必须让它工作。它与尝试解析 HTML 的复杂性没有什么不同，只是希望您可以控制 CSS 输入的质量。（你会想要对此进行一些测试，相信我）

无论如何...一旦您拥有每种样式，例如 .foo{} 或 #bar {} 等，然后调用

```
FlexGlobals.topLevelApplication.styleManager.setStyleDeclaration(...) ; 
```

依次为每一个。最后打电话

```
FlexGlobals.topLevelApplication.styleManager.styleDeclarationsChanged(); 
```

现在，您可以使用`styleManager.getStyleDeclaration("")`Skin 类中的样式（通过 ）来获得您需要的样式，无论是从烘焙样式还是动态加载的样式。

希望能有所帮助。它可以做到，但实施起来并非易事。祝你好运。

# javascript - 如何在 JavaScript 中围绕微时间创建时间范围？

> ID：16062188
> 
> 赞同：1
> 
> 时间：2013-04-17T14:02:19.607
> 
> 标签：javascript, datetime, utc

我有一个以微秒为单位的时间戳`1279408157000439`，我想找到最接近的任意时间范围的下限和上限。

因此，如果我的时间范围是分钟，我想找到与包含此时间戳的分钟相对应的时间戳（以微秒为单位），直到此时间戳之后的一分钟之前的微秒。

我正在使用 JavaScript。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:56:55.723

您可以使用数学地板和天花板函数来完成此操作。

```
var ts = 1279408157000439; // in microseconds
var interval = 60000000; // microseconds in one minute

var lowerBound = Math.floor(ts/interval) * interval;
var upperBound = Math.ceil(ts/interval) * interval;

// account for case where we are exactly on the boundary line
if (upperBound === lowerBound) upperBound += interval; 
```

# extjs - ExtJs 分页忽略了 totalProperty

> ID：16062194
> 
> 赞同：1
> 
> 时间：2013-04-17T14:02:47.270
> 
> 标签：extjs, extjs4.1

我使用 ExtJs 4.1

我的网格工作正常，但在设置正确的分页时遇到问题。分页工具栏获取错误的记录数和页数。

**服务器**总共有 8 行，但只返回指定的 4 行。所以它应该是 2 页，每页 4 行。

**初始加载的**Json如下所示：****

 **```
{
    "value": {
        "data": [{
                "id": "user1",
                "title": "index0"
            }, {
                "id": "user2",
                "title": "index1"
            }, {
                "id": "user3",
                "title": "index2"
            }, {
                "id": "user4",
                "title": "index3"
            }
        ],
        "total": 8,
        "page": 1,
        "pages": 2,
        "pagesize": "4"
    }
} 
```

**设置**：

```
nItemsPerPage = 4; 
```

**分页工具栏**：

```
var oPagingToolbar = Ext.create( 'Ext.toolbar.Paging', {
            store         : oStoreUsers,
            pageSize      : nItemsPerPage,
            dock          : 'bottom',
            displayInfo   : true
         } ); 
```

我的**网格**有商店`oStoreUsers`和停靠的分页工具栏。

**商店**已加载：

```
// tried each of the following lines for loading
// none gave me 2 pages
oStoreUsers.load( { params: { start: 0, limit: nItemsPerPage } } );
oStoreUsers.loadPage( 1 );
oStoreUsers.loadPage( 1, { params: { start: 0, limit: nItemsPerPage } } ); 
```

该商店具有以下属性：

```
root: 'value.data',
pageSize: nItemsPerPage 
```

**问题**：将 4 行加载到存储中并显示在网格中。但是，分页工具栏会说`Page 1 of 1`和`Displaying 1 - 4 of 4`，什么时候应该`Page 1 of 2`和`Displaying 1 - 4 of 8`。

如何让它发挥作用？

* * *

编辑：

`reader`

```
 reader: {
           type         : 'json',
           root         : 'value.data',
           totalProperty: 'total'
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:18:16.930

您的 totalProperty 不正确。需要`value.total`。**

# spring - CAS SSO with Java EE Web Container Authentication

> ID：16062195
> 
> 赞同：0
> 
> 时间：2013-04-17T14:02:50.327
> 
> 标签：spring, jakarta-ee, spring-security, single-sign-on, cas

I'm new to Spring 3.1 and I've been using Java EE Web Container Authentication so far for security (the `<jee>` tag has come in quite handy). However, the project that I'm working on has a few separate applications that need to have access to the current user's information without logging in multiple times.

Not wanting to reinvent the wheel, I've struggled with using CAS over the past couple of days and have finally got it working with the example that comes with the package. Now, what I would like to do is use the web container setup that I've created in an individual system and use it in CAS. Is this possible or do I need to be looking into some other form of gathering the user's roles?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:17:06.800

由于您使用 Java EE 身份验证，因此您的 SSO 框架应该支持 Java EE 代理。在您的情况下，SSO 框架应该支持 WebSphere。[不幸的是，像 CAS 和 JOSSO ( http://www.josso.org/confluence/display/JOSSO1/Setup+JOSSO+Agent+%28SP%29](http://www.josso.org/confluence/display/JOSSO1/Setup+JOSSO+Agent+%28SP%29) ) 这样的开源提供商不支持 WebSphere。可能您需要使用商业 SSO 框架，虱子 SiteMinder： https: [//supportcontent.ca.com/cadocs/0/CA%20SiteMinder%20Agent%20for%20WebSphere%20r12%20SP2-ENU/Bookshelf_Files/HTML/index.htm？ toc.htm?941171.html](https://supportcontent.ca.com/cadocs/0/CA%20SiteMinder%20Agent%20for%20WebSphere%20r12%20SP2-ENU/Bookshelf_Files/HTML/index.htm?toc.htm?941171.html)

另一种方法是放弃 Java EE 身份验证并在所有应用程序中使用 SpringSecurity 身份验证。在这种情况下，您将能够使用 CAS 或 JOSSO。

# c - 在正常操作中是否存在未使用的 ROM 字节？

> ID：16062200
> 
> 赞同：0
> 
> 时间：2013-04-17T14:03:09.863
> 
> 标签：c, zxspectrum

在正常操作中是否存在未使用的 ROM 字节？

我想解码地址总线，拉下 ROMCS 并将数据放在数据总线*上仅用于一个地址*。

ZX Spectrum 正常操作中从未使用过的 ROM 中的地址吗？也许我可以找到一个字符位图的位置，然后永远不要使用那个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:39:18.317

如果没有 ZX 编程参考或手边的 ROM 内容，很难指向任何单个字节，但我可能会给你一些想法：

*   选择一个你不打算使用的函数（比如，保存到磁带），使用它的入口点作为地址
*   找到字体的存储位置，在其中一个字符中选择一个字节。很可能一切仍然有效，但是您会在角色中错误地绘制那条线
*   选择启动时开始执行的位置，但要等到第一条指令执行后才启用电路
*   从字面上寻找未使用的部分，那些可能看起来像是相当大的连续运行的 0xFF 字节（等等，我在模拟器中找到了 ROM，有这样一个区域，从 0x386E 到 0x3CFF，但我不知道如果此 ROM 是原始的或更改的，您需要检查您的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T09:07:30.523

现在对内存进行征税，但如果我们需要存储一些额外的字节等，我们曾经使用打印机缓冲区。它有 256 个字节长，并且紧跟在屏幕转储内存之后。我相信它是从 &5B00 到 &5BFF。

# javascript - Using a PHP session and Javascript to set a cookie - possibly redundant?

> ID：16062203
> 
> 赞同：0
> 
> 时间：2013-04-17T14:03:11.570
> 
> 标签：javascript, cookies, php

I am using PHP sessions to protect access to my CMS without being logged in. It's working, but I'm also setting a cookie using JavaScript so that users are redirected to the CMS from the login.php page if they have already authenticated. The cookie's expiration is 1 day, but I'm starting to wonder whether using a session and having a cookie is a bit redundant?

Can I use PHP sessions alone to accomplish these two tasks?

EDIT: To clarify - I set a PHP session variable on the login.php page. If you try to access the cms.php page, it will check to see if that session variable exists. If not, it knows you didn't come from the login page and it will redirect you.

I was under the impression that PHP sessions were destroyed when the browsing session ends, and I was using JavaScript to do some other work, so I Googled 'how to set a cookie using javascript' and did it that way (having never set a cookie before). I don't want the user to have to login each time just because they closed their browser, so I set a cookie that lasts for 1 day. This way, when they hit login.php it redirects them to cms.php and that page sees the session variable has been set by login.php and allows the redirect.

# python - Python字典数组

> ID：16062205
> 
> 赞同：1
> 
> 时间：2013-04-17T14:03:13.600
> 
> 标签：python, list, dictionary

我想问一个特别的问题，我最近遇到的。

我有包含项目的列表，例如

```
list1 = ['library','book','room','author','description','genre','publish_date','price','title'] 
```

和包含键和值的字典，键是 list1 中的项目，值是它的子项，例如

```
dictionary1 = {'room': ['book'], 'title': [], 'price': [], 'author': [], 'library': [ 'room', 'book'], 'book': ['author', 'title', 'genre', 'price', 'publish_date', 'description'], 'publish_date': [], 'genre': [], 'description': []} 
```

基本上我想要做的是浏览dictionary1中的项目，如果某个键的值也是带有值的键，我想将值的值添加到键中。

例如：

```
'library': ['room','book'] 
```

书包含作者、标题、流派、价格、出版日期、描述。

我想将所有这些项目添加到库密钥中，所以它看起来像：

```
'library': ['room','book','author', 'title', 'genre', 'price', 'publish_date', 'description'], 'publish_date': [], 'genre': [], 'description': []] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:29:45.930

伪代码：

```
dictionary = ...//your input
dictionaryOut={}

list=[]

for key, value in dictionary
    dictionaryOut[key] = copy(value)

    if length(value[0]):
        list=[value[0]]

    while not empty(list):
        list.append(dictionary(list[0]))
        dictionaryOut[key].append(dictionary(list.pop(0)) 
```

只要我们在谈论 python 就应该这样做，并且附加到 value 实际上会更新字典中的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:59:03.033

您的大问题是：您不想复制数据您不想在迭代时吃掉数据。

```
 import pprint

  def main():
      inlist = ['library','book','room','author','description','genre','publish_date','price','title']
      mydict = {'room': ['book'], 'title': [], 'price': [], 'author': [], 'library': [ 'room', 'book'], 'book': ['author', 'title', 'genre', 'price', 'publish_date', 'description'], 'publish_date': [], 'genre': [], 'description': []}

      for item in inlist:
          values = set(mydict.get(item, []))
          workingset = values.copy() # preserve the original set of items so iterating doesn't go nuts
          for potential_key in values:
              # we're going to cast into sets to add them, then recast into lists
              workingset.update(set(mydict.get(potential_key, [])))

          if values:
              mydict[item] = list(workingset)

      pprint.pprint(mydict)
  if __name__ == '__main__':
      main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:10:04.377

字典理解：

```
{key: set(values + sum([dictionary1[value] for value in values], []))
       for key, values in dictionary1.iteritems()} 
```

# html - Wrap text to a specific width within a page

> ID：16062212
> 
> 赞同：0
> 
> 时间：2013-04-17T14:03:27.333
> 
> 标签：html, css, asp-classic, styles

This centres the text within the page width okay, however I need to wrap the text at something like a 480px width so I don't have a long line of text

```
Params = "x=0; y=320; width="&page.width&"; alignment=center; size=18; html=true" 
```

For example: currently its

```
 Welcome to 

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor 
```

BUT I need it to wrap at

```
 Welcome to 

              Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                             sed do eiusmod tempor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:23:26.823

使用不间断空格：

```
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed&nbsp;do&nbsp;eiusmod&nbsp;tempor.</p> 
```

[演示](http://jsfiddle.net/avFeL/)

# symfony - 使用 symfony2 安装 piwik

> ID：16062217
> 
> 赞同：2
> 
> 时间：2013-04-17T14:03:32.987
> 
> 标签：symfony, installation, matomo

我想为我的 symfony2 项目安装 piwik。

我还没有找到关于这个用例的任何文档。最佳做法是什么？

我应该将它安装在 /web/piwik 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:38:56.913

我找到的答案来自[这个网站](http://library.linode.com/web-applications/analytics/piwik/ubuntu-12.04-precise-pangolin)。

主要步骤是：

*   为 piwik 创建一个数据库用户等

    ```
    mysql -u root -p
    create database piwik;
    CREATE USER 'piwik'@'localhost' IDENTIFIED BY '12345';
    GRANT ALL PRIVILEGES ON piwik.* TO 'piwik' IDENTIFIED BY '12345'; 
    ```

*   为 piwik 创建一个虚拟主机

*   安装 piwik（我只需要安装 pdo_mysql）
*   `base.html.twig`在symfony2 中集成 piwik 的 js 代码

# c# - 如何从通用接口调用 InterfaceMethods

> ID：16062223
> 
> 赞同：1
> 
> 时间：2013-04-17T14:03:48.247
> 
> 标签：c#

可以说，我有一个通用接口

```
IWhatEver<T> : where T : ....
{
    T DoStuff(object value);
}

class Foo : IWhatEver<string> {...}
class Bar: IWhatEver<double> {...} 
```

该接口由几个类实现。

如何将此接口的实例存储在列表中以及如何调用 DoStuff 函数？

像这样的东西：

```
List<IWhatEver<????>> whatEvers = new List<IWhatEver<????>>();  // doesnt work...

whatEvers.Add(new Foo());
whatEvers.Add(new Bar());

var whatWillThisBe = whatEvers.Select(w => w.DoStuff(withSomeObject)); 
```

我相信这甚至是不可能的，但也许我在这里忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:07:53.163

一种选择是创建一个非泛型基接口并从中继承泛型

```
IWhatEver 
{
    object DoStuff(object value);
}

IWhatEver<T> : IWhatEver where T : ....
{
    new T DoStuff(object value);
} 
```

您还可以有一个基本抽象类，它继承自 IWhatEver 并`IWhatEver.DoStuff`通过调用显式实现`IWhatEver<T>.DoStuff`。

```
abstract class BaseWhatEver<T> : IWhatEver<T>
{
    abstract T DoStuff(object value);

    object IWhatEver.DoStuff(object value)
    {
          return ((IWhatEver<T>) this)DoStuff(value);
    }
} 
```

# java - 如何消除平铺纹理之间的间隙？

> ID：16062224
> 
> 赞同：13
> 
> 时间：2013-04-17T14:03:48.527
> 
> 标签：java, libgdx, textures, sprite, tile

我正在使用 LibGDX 制作平台游戏。我在平台上使用方形瓷砖，但是当它们被绘制时，其中一些在它们之间有间隙。当我放大/缩小或围绕间隙移动位置移动相机时。

更多细节：

*   瓷砖是 32x32，我尝试了 32x32 和 64x64。
*   瓦片以 32 像素间隔排列​​（例如，第一个瓦片将是 x=0 y=0，第二个 x=32 y=0，以此类推在 x 和 y 方向上）。
*   间隙不是纹理伪影，因为我已经检查过了。
*   我使用`TexturePacker`带有填充的。

我最好的猜测是将纹理转换为屏幕坐标时出现问题，但不知道如何解决这个问题，我找不到任何解决方案。我用瓷砖尺寸检查并仔细检查了我的精度并将它们排列起来。

有没有人遇到过同样的问题或知道如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-04T22:22:19.680

我通过将类的`duplicatePadding`字段设置为.`TexturePacker.Settings``true`

示例代码：

```
import com.badlogic.gdx.tools.texturepacker.TexturePacker;
import com.badlogic.gdx.tools.texturepacker.TexturePacker.Settings;

Settings settings = new Settings();
settings.maxWidth = 1024;
settings.maxHeight = 1024;
settings.duplicatePadding = true;

TexturePacker.process(settings, "source", "destination", "name"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-22T09:44:58.397

好吧，我是来拯救你的！

该解决方案称为“边缘填充”。现在，如果您正在使用图块集，我可以向您保证这将起作用。

就我个人而言，我正在使用 Tiled，它允许我调整我的图块集中的边距和间距。唯一的缺点是您必须将 GIMP 与此插件一起使用：[http ://registry.gimp.org/node/26044](http://registry.gimp.org/node/26044)

这个插件可以让你将边缘填充应用于你的图块集，瞧！不再有丑陋的文物。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-05T22:37:17.513

[流血的](http://www.java-gaming.org/topics/bleeding/26823/msg/237162/view.html#msg237162)

[差距](http://www.java-gaming.org/index.php?topic=28376.0)

简短的回答是它可能是您的过滤器，可能需要设置为 NEAREST。

可能还想查看[Libgdx 的工作教程。](https://code.google.com/p/libgdx/wiki/GraphicsTileMaps#Tiled_Maps)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-05T13:15:55.677

这被称为“纹理出血”。您需要为您的图块添加填充，以便当纹理流血时，它可以收集正确的像素数据来填补空白。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-16T21:57:44.480

我知道在这篇文章上回答有点晚了，但是当我在寻找解决方案时，我来到了这里。

然而，对我来说，我找到了一种更简单的方法来消除瓷砖之间随机出现的闪烁或间隙。

我只是在我为玩家的位置得到的非常长的小数上添加了一个演员：

```
camera.position.set((int)robot.position.x, (int)robot.position.y, 0); 
```

这让玩家移动非常奇怪，为了让他再次平稳移动，我还在它的渲染方法中添加了一个演员：

```
batcher.draw(robotSprite, (int)robot.position.x, (int)robot.position.y, 16, 16); 
```

瞧！完美地为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-24T17:24:20.683

我会在这里发布我的解决方案以及我为 Libgdx 尝试过的关于这个问题的方法。

--

**T1。**制作从某处下载到填充 2 的原始精灵表（无图集文件）。

~~**A1。**这对于重新打包没有图集的 spritesheet 是不可能的，即使您找到了切片/拆分工具，它也应该是一堆需要为 TiledMap(.tmx) 正确重新打包的图像~~

**A1（更新）。**@Nine Magics 提供的脚本将是最好的方法！（我用这个作为我的最终解决方案）

--

**T2。**使用**libgdx-nighty**或**gdx-toolg**`TiledMapPacker`提供的，批处理代码应该是：

 ****```
java -classpath "gdx.jar";"gdx-natives.jar";"gdx-backend-lwjgl.jar";"gdx-backend-lwjgl-natives.jar";"gdx-tiled-preprocessor.jar";"extensions/gdx-tools/gdx-tools.jar" com.badlogic.gdx.tiledmappacker.TiledMapPacker "PathToYourProject\android\assets\RawMap" "PathToYourProject\android\assets\Map" --strip-unused 
```

**A2。**如果您使用复杂的文件夹路径对文件进行分类，则[Tiled](http://www.mapeditor.org/)无法读取的输出 .tmx `.png`。并且输出文件可能无法加载`AtlasTmxMapLoader`。

--

**T3。**相机位置校正，使相机位置为整数。代码喜欢来自[libgdx tiledmap 的 @Julian 或 @strangecat 闪烁与最近过滤](https://stackoverflow.com/questions/18984955/libgdx-tiledmap-flicker-with-nearest-filtering)

**A3。**我毫无问题地使用此解决方案，并且还发布了与它们不同的代码。

```
 float cameraX = (int)(mainCamera.position.x * Game.PPM_X) / Game.PPM_X;
    float cameraY = (int)(mainCamera.position.y * Game.PPM_X) / Game.PPM_X;
    float cameraZ = mainCamera.position.z;
    mainCamera.position.set(cameraX, cameraY, cameraZ); 
```

并且还加载它`TmxMapLoader.Parameters`

```
 TmxMapLoader.Parameters params = new TmxMapLoader.Parameters();
    params.textureMinFilter = Texture.TextureFilter.Linear;
    params.textureMagFilter = Texture.TextureFilter.Nearest;
    params.generateMipMaps = true;
    assetManager.load(TILED_MAP_SETS.FIRST_MAP, TiledMap.class, params); 
```

如果您使用**PPM**并希望逐像素移动，则可以对游戏使用此整数校正，否则您可以将位置转换为整数。

我几乎浪费了一整天的时间来解决这个问题，希望这些调查可以帮助每个游戏开发者:)

**编辑(2018/04/21)** 我发现 Unity 也有同样的[问题](https://youtu.be/ryISV_nH8qw?t=6m25s)，但我没有测试如果 Libgdx 默认有**2x Anti-Alias**设置。Libgdx 可能会通过关闭 Anti-Alias 来解决 Unity 问题。****

# android - 使用 WindowManager 自定义布局

> ID：16062225
> 
> 赞同：2
> 
> 时间：2013-04-17T14:03:52.697
> 
> 标签：android

出于某种原因，我不断收到 Error inflating Class 消息，因为我正在尝试实现

引起：java.lang.NullPointerException at pap.crowslanding.GameView.(GameView.java:49)

第49行是这个

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

我这样做是因为我没有参加活动，有什么建议吗？

编辑：

```
public class GameView extends SurfaceView {
static final long FPS = 10;
public Bitmap bmp;
public SurfaceHolder holder;
public LoopGameThread loopGameThread;
public static Sprite sprite;
public LayoutInflater inflater;

//maze variables
  public int width;                 
  public int height;
  private float cellWidth;
  private boolean[][] north;     // is there a wall to north of cell i, j
  private boolean[][] east;
  private boolean[][] south;
  private boolean[][] west;
  private boolean[][] visited;
  private double size;
  boolean done = false;

  Display display = new 
  Paint paint = new Paint();

//maze variables
   public GameView(Context context) {
    super(context);
   WindowManager wm = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
   Display display = wm.getDefaultDisplay();
   Point screenSize = new Point();
    display.getSize(screenSize);
    int width = screenSize.x;
    int height = screenSize.y;

}
public GameView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO
}

public GameView(Context context, AttributeSet attrs) {

    super(context, attrs);

    //maze variables
    initVars(attrs);
    initMaze();
    generate(1, 1);
    //maze variables
    loopGameThread = new LoopGameThread(this);
    holder = getHolder();

    holder.addCallback(new Callback() {

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {

        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            loopGameThread.isStart(true);
            loopGameThread.start();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {

        }

    });

    bmp = BitmapFactory.decodeResource(getResources(), R.drawable.crow);
    sprite = new Sprite(this, bmp);

}

//MAZE VARIABLES

private void initVars(AttributeSet attrs) {
      //requires display variables
  } 
```

然后在我的 initVars 中，我需要使用那些显示变量

编辑 2：

```
package pap.crowslanding;

import android.content.Context;
import android.content.Intent;
import android.graphics.Point;
import android.os.Bundle;
import android.os.Handler;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnTouchListener;
import android.widget.Button;

public class Game extends MainActivity{
static boolean pressedUp = false;
 protected static GameView gameV;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.tester1);

    Button moveLeft = (Button) findViewById(R.id.button1);
    gameV = (GameView)findViewById(R.id.game_view);

    moveLeft.setOnTouchListener(new View.OnTouchListener() {

        private Handler mHandler;

        @Override public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                if (mHandler != null) return true;
                mHandler = new Handler();
                mHandler.postDelayed(mAction, 100);
                break;
            case MotionEvent.ACTION_UP:
                if (mHandler == null) return true;
                mHandler.removeCallbacks(mAction);
                mHandler = null;
                break;
            }
            return false;
        }

        Runnable mAction = new Runnable() {
            @Override public void run() {
                System.out.println("Performing action...");
                mHandler.postDelayed(this, 100);
                GameView.sprite.movementGo();
            }
        };

    });
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:14:38.387

您需要将上下文传递给调用此函数的任何类。

例如，您可以在类中保留本地上下文值，您可以在函数中引用该值。首先，您需要创建一个构造函数，它将上下文传递给您的类以供使用。

```
public class Example {
    Context mContext;

    public Example(Context mContext;){
        this.mContext = mContext;
    }

    public someFunction(){
        ...
        WindowManager wm = (WindowManager)mContext.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        ...
     }
} 
```

在创建类实例并使用它的 Activity 类中，您需要像这样传递 Activity 的上下文：

```
public class SomeActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Example test = new Example(this); //You are passing in the Activity as the context here
        test.someFunction();

    }
} 
```

**编辑您的编辑：**

在 GameView 类中创建一个新的局部变量：

```
private Context mContext; 
```

`mContext`然后在您的 GameView 构造函数中分配一个值，如下所示：

```
 public GameView(Context context) {
      super(context);
      mContext = context;
      ...
  } 
```

您现在可以在函数`mContext`内部使用`initVars()`

# opencv - 获取持有某个点的向量

> ID：16062229
> 
> 赞同：0
> 
> 时间：2013-04-17T14:03:58.427
> 
> 标签：opencv, vector, point

我有一个图像灰色部分的点向量，写成这样：

```
std::vector<Point> vectorg;
for(i = 0; i <= hei - 1; i++) {
   for(j = 0; j <= wid - 1; j++) {
      if(mask(i,j) == 128) {
          vectorg.push_back(Point(j,i));
      }
   }
} 
```

可以通过以下方式了解存储在某个单元格中的坐标：

```
cout << vectorg[0].x;
cout << vectorg[0].y; 
```

现在的问题是反过来，是否有可能知道哪个单元格拥有特定的坐标？非常感谢，我也是opencv编程的新手，我会照顾你的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:55:11.450

只需执行以下操作：

```
#include <algorithm>
// ...

Point p(searchedX, searchedY);

std::vector<Point>::iterator element = std::find(vectorg.begin(), vectorg.end(), p);

if (element != vectorg.end()) {
    cout << (*element).x << endl;
    cout << (*element).y << endl;
} else {
    cout << "The point is not in the vector" << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:11:51.167

这可能是矫枉过正，但一种方法（不进行贪婪的穷举搜索）是建立一个[FLANN 索引](http://docs.opencv.org/modules/flann/doc/flann_fast_approximate_nearest_neighbor_search.html)来存储您的点的位置。

特征矩阵由您的点的坐标组成。由于 OpenCV 知道如何将向量转换为矩阵，因此您应该能够按原样使用当前向量。然后，如果您只想要一个点，只需询问查询中的 1 个最近邻居（k 参数）。

好处是，如果您稍后决定还需要附近的最近点，只需提高 k 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:54:34.153

很抱歉回复晚了，感谢您的回答，他们间接地启发了我。

我找到了一个简单的方法来做到这一点。这是通过制作另一个 Mat 来保存保存坐标的数字。

```
std::vector<Point> vectorg;
cv::Mat_<int> Index =Mat_<int>::zeros(hei,wid);
for(i = 0; i <= hei - 1; i++) {
   for(j = 0; j <= wid - 1; j++) {
      if(mask(i,j) == 128) {
          vectorg.push_back(Point(j,i));
          Index(vector[count])=count;
          count++;
      }
   }
} 
```

这样我就可以通过简单地知道哪个单元格拥有某些坐标：

```
cout<<Index(36,362); //as example 
```

非常感谢，下次我会照顾你的。

# bash - 为什么提取文件名的字符串连接不起作用？

> ID：16062235
> 
> 赞同：0
> 
> 时间：2013-04-17T14:04:22.147
> 
> 标签：bash

我有一个文件“a.txt”，其中包含带有路径的文件名。

一个.txt：

```
/root/chan/properties.lo  
/root/attributes.cc   
/root/chan/eagle/bath.ear 
```

我想提取这些文件名并将它们放在一个变量中：

```
#!/bin/bash
for i in $(cat a.txt);  do
    o+=$(basename $i)
done

echo $o 
```

但它不起作用。我得到：

```
feedBackMailConfiguration.xmltiess 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:11:56.393

```
while read -r i;
do
   o=$o" "$(basename $i)
done < a.txt

echo $o 
```

以上会做到。（复制和粘贴错误的编辑）

更多编辑：刚刚尝试过这个（终结者，ubuntu），它给出了正确的结果：

```
while read -r i; do o="$o $(basename $i)";done < a.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:44:04.160

"o+=..." 不是真正可移植的（哪个版本的 bash 允许它？在你提到它之前我从未见过它？它看起来像 perl 机制）

Edit2：在 vladintok 对输出的评论之后，我添加了 DEBUG 信息以尝试查明问题

Edit3：尝试排除对报告的奇怪输出的所有可能解释的另一个步骤......我取消别名，并取消设置任何名为“o”和“basename”的函数......

尝试：

```
#!/bin/bash
unalias o         2>/dev/null 
unalias basename  2>/dev/null
unset o           2>/dev/null
unset basename    2>/dev/null
for i in $(cat a.txt);  do
    printf 'DEBUG: i is: %s\n' "$i"
    o="${o} $(basename $i)"
done

printf 'DEBUG: final o is: %s\n' "$o"
echo $o
#end of the script. 
```

（当然上面是一个SINGLE文件。命名为'test.bash'，使其可执行：`chmod +x test.bash`，然后执行它`./test.bash`：）

Edit1：我纠正了`o=$o" "$(basename $i)`Pantoine`o="${o} $(basename $i)"`指出的错误。否则， toto=$toto" "titi : 将分配给 toto 直到第一个空格的所有内容（它将在 $toto 内的某个地方，在第一次迭代之后或者如果基本名称包含空格）...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:19:43.373

您只需要在脚本中添加空格连接，如下所示：

```
#!/bin/bash
for i in $(cat a.txt);  do
    # Check the " " at the end of the following line  
    o+=$(basename $i)" "
done

echo $o 
```

它会起作用

# javascript - Internet Explorer 10 和 top.window.pageYOffset

> ID：16062239
> 
> 赞同：2
> 
> 时间：2013-04-17T14:04:29.850
> 
> 标签：javascript, browser, internet-explorer-10

我`window.pageYOffset`用来查找滚动条的位置（在 Firefox 中工作正常），但在 IE10 中始终未定义

我试过使用：

```
window.pageYOffset // undefined
document.body.scrollTop // always 0
document.documentElement.scrolltop // undefined
top.window.scrollY // undefined 
```

这是 IE10 的已知问题吗？

这是启用了兼容模式。没有它， pageYOffset 将按预期工作。我们必须使用兼容模式，因为这是我们客户的要求

该代码显示一个日历，需要在文本框上显示。当用户在页面上滚动时，它的位置会发生变化： UPDATED WITH CODE:

```
function showCalendar(e, datePicker) {
    top.calendarReturnFunc = function(value, controlId) {
        getDatePicker(controlId).dateBox.hasDate = "True";
        dateChosen(value, controlId, true);
    };
    top.datePickerActive = function() { return true; };
    var itop = top.window.screenTop != undefined ? top.window.screenTop : parseInt(top.window.screenY) + parseInt(130);
    var ileft = top.window.screenLeft != undefined ? top.window.screenLeft : parseInt(top.window.screenX);

    var x = e.screenX - parseInt(ileft);
    var y;

    if (typeof top.window.pageYOffset === "undefined") {
        y = (e.screenY - parseInt(itop) - datePicker.yOffset) + document.documentElement.scrollTop; //IE10?...
    }
    else {
        y = (e.screenY - parseInt(itop) - datePicker.yOffset) + top.window.pageYOffset; //works fine in firefox
    }

    if (datePicker.alignLeft) {
        x -= 180;
    }
    if (!datePicker.alignBottom) {
        y -= 178;
    }
    _calendar.style.left = x + "px";
    _calendar.style.top = y + "px";
    _calendar.style.display = "block";
    _calendar.datePicker = datePicker;
    _calendar.callingFrame = this;
    _calendar.src = datePicker.calendarUrl + "&Date=" + escape(datePicker.dateBox.value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:23:16.190

您可以`document.documentElement.scrollTop`用于 IE。您没有大写示例中 scrollTop 中的 T 。

# php - AJAX 发布到 php

> ID：16062242
> 
> 赞同：0
> 
> 时间：2013-04-17T14:04:46.587
> 
> 标签：php, mysql, ajax

虽然我遵循了来自[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)的示例代码，当然 Stackoverflow 我找不到解决我的问题的方法。

我在 html 中有一个切换图像，每次用户单击它时，都会更改图像并更新 DB 中的列。代码如下：

**HTML**

```
<input type="image" src="smileys/heart.gif" class="play" onclick="toggle(this,'<?php echo $ida;?>')"/> 
```

**AJAX**

```
 function toggle(el,al){
        if(el.className=="play")
        {
            el.src='smileys/lol.gif';
            el.className="pause";
    $.post("update.php", { "hr": 1, "ida": al } );

        }
        else if(el.className=="pause")
        {
            el.src='smileys/heart.gif';
            el.className="play";
    $.post("update.php", { "hr": 0, "ida": al } );
        }
        console.log(al);
        return false;
    } 
```

**更新.php**

```
<?php 
$host       = "localhost";
$user       = "user";
$pass       = "pass";
$database   = "db";

$heart=$_GET["hr"];
$ida=$_GET["ida"];

$con = mysql_connect($host,$user,$pass);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db($database, $con);
mysql_query("UPDATE tablename SET heart='$heart' WHERE id='$ida'");
?> 
```

切换功能运行良好，但当用户单击图像时，数据库不会更新。我相信它与`$.post`函数有关，没有将数据正确发送到 php.ini。

顺便说一句，如果我这样做

```
http://domain.com/update.php?hr=1&ida=127 
```

有用。

注意：我只在这个例子中使用 mysql 而不是 PDO。...是的，我的代码又乱又丑，还在学习。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:09:15.467

嗯，这是一个 _POST 请求而不是 _GET，因此，要捕获它的值，您需要`$_POST`使用`$_GET`.

另外，正如我注意到的，还有 _GET 链接，所以你需要`$.post`用`$.get`.

# linux - 使用 perf 监控原始事件计数器

> ID：16062244
> 
> 赞同：6
> 
> 时间：2013-04-17T14:04:50.440
> 
> 标签：linux, profiling, intel, perf

我正在尝试在具有多个（物理）处理器的（Intel Xeon）机器上测量某些硬件事件。具体来说，我想知道为读取“非核心”数据发出了多少请求。

我在 Intels 文档中找到[了 OFFCORE_REQUESTS](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/amplifierxe/win/ug_docs/reference/pmw_dp/events/offcore_requests.html)硬件事件，它给出了事件描述符 0xB0 和数据需求，附加掩码 0x01。

那么告诉 perf 记录事件 0xB1 （即`0xB0 | 0x01`）并将其称为：

```
perf record -e r0B1 ./mytestapp someargs 
```

或者这是不正确的？因为`perf report`这样输入的事件没有显示输出。

perf 文档在这方面相当稀疏，除了一个[教程条目](https://perf.wiki.kernel.org/index.php/Tutorial#Options_controlling_event_selection)没有说明它是哪个事件（尽管这个对我有用），或者它是如何编码的......

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T08:53:53.590

好的，所以我想我想通了。

对于我使用的 Intel 机器，格式如下： `<umask><eventselector>`两者都是十六进制值。可以删除 umask 的前导零，但不能用于事件选择器。

因此，对于`0xB0`带有面具的事件，`0x01`我可以调用：

```
perf record -e r1B0 ./mytestapp someargs 
```

我无法在 perf 内核代码中找到它的确切解析（这里有任何内核黑客吗？），但我找到了以下来源：

*   [c't 杂志 13/03（需要订阅）](http://www.heise.de/artikel-archiv/ct/2013/03/166_Linux-durchleuchtet)中对 perf 与原始事件的使用描述，其中描述了一些原始事件及其来自英特尔架构软件开发人员手册（第 3b 卷）的描述
*   [内核邮件列表](http://kerneltrap.org/mailarchive/git-commits-head/2010/5/18/32913)上的一个补丁，讨论记录它的正确方法。它指定上面的模式是“......是x86特定的并且不完整”
*   **（更新）**较新版本的手册页显示了英特尔机器上的示例：`man perf-list`

**更新**：正如评论中指出的（谢谢！），libpfm 翻译器可用于获取正确的事件描述符。用户“osgx”发现的评论中链接的网站（Bojan Nikolic：如何监控所有 CPU 性能事件）对其进行了更详细的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-08T13:51:05.993

看来您也可以使用：

```
perf record -e cpu/event=0xB1,umask=0x1/u ./mytestapp someargs 
```

我不知道这种语法记录在哪里。

您也可以使用其他参数（edge、inv、cmask）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-10T21:56:48.070

有几个库可以帮助处理原始 PMU 事件。

perf 自己的 wiki [https://perf.wiki.kernel.org/index.php/Tutorial#Events](https://perf.wiki.kernel.org/index.php/Tutorial#Events)推荐[`perf list --help`手册页](https://man7.org/linux/man-pages/man1/perf-list.1.html)以获取有关原始事件编码的信息。现代 perf 版本将列出原始事件作为`perf list`输出的一部分（“...如果链接到 libpfm4 库，则提供事件的一些简短描述。”）。`perf list --details`还将打印事件的原始 ID 和掩码。

Bojan Nikolic 有[“如何监控所有 CPU 性能事件”](http://www.bnikolic.co.uk/blog/hpc-prof-events.html)博客文章，其中介绍了[libpfm4 (perfmon2)](http://perfmon2.sourceforge.net/)库的使用，以便在同一库提供的工具`showevtinfo`和工具的帮助下为 perf 编码原始事件。`check_events`

还有一个 perf python 包装器`ocperf`，它接受英特尔的事件名称。它由 Andi Kleen（英特尔开源技术中心）编写，作为[pmu-tools 实用程序集的](https://github.com/andikleen/pmu-tools)一部分（[2013 年的 LWN 帖子，英特尔在](https://lwn.net/Articles/556983/)[https://download.01.org/perfmon/](https://download.01.org/perfmon/)上的事件列表）。有一个 ocperf (2011) [http://halobates.de/modern-pmus-yokohama.pdf](http://halobates.de/modern-pmus-yokohama.pdf)的演示：

```
ocperf
•Perf wrapper to support Intel specific events
•Allows symbolic events and some additional events

    ocperf record -a −e offcore_response.any_data.remote_dram_0 sleep 10 
```

[PAPI 库](https://icl.utk.edu/papi/)也有工具来探索带有一些描述的原始事件 - [`papi_native_avail`](https://linux.die.net/man/1/papi_native_avail).

# php - 如何用 Amazon S3 替换 PHP imagecopyresampled？

> ID：16062246
> 
> 赞同：2
> 
> 时间：2013-04-17T14:04:52.730
> 
> 标签：php, jquery, amazon-s3, jquery-file-upload

我正在使用[jquery 文件上传](http://blueimp.github.io/jQuery-File-Upload/)脚本，并已成功将主图像上传到 Amazon S3。我现在正在尝试交换多个图像大小以上传到 S3 中的子文件夹或对象。

在 UploadHandler.php 文件中的**create_scaled_image**函数中，如何将 imagecopyresampled 调用替换为 S3 调用？这甚至可能吗？

这是图像调整大小并将文件写入的内容：

```
 $success = $src_img && @imagecopyresampled(
        $new_img,
        $src_img,
        $dst_x,
        $dst_y,
        0,
        0,
        $new_width,
        $new_height,
        $img_width,
        $img_height
    ) && $write_image($new_img, $new_file_path, $image_quality);
    // Free up memory (imagedestroy does not delete files):
    @imagedestroy($src_img);
    @imagedestroy($new_img); 
```

我可以以某种方式调整内存中的图像大小，然后将文件保存到我的 S3 对象吗？

```
 $bucket = "pics.mysite.com";

 $file = ??
 $uploaded_file = ??
 $response = $s3->create_object($bucket, $file, array('fileUpload' => $uploaded_file, 'acl' => AmazonS3::ACL_PUBLIC));
 if ($response->isOK()) {
     //success
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:28:10.210

您可以捕获`imagejpeg()`相关保存函数的输出，以生成图像文件内容的内存表示。我不知道该 s3 库是否允许您上传字符串，而不仅仅是将其指向文件，但它会是这样的：

```
... image operations
ob_start();
imagejpeg($img); // out $img gd handle as a .jpg file
$jpg = ob_get_clean();

$s3->upload(.... 'filedata' => $jpg);
                 ^^^^^^^^^^---whatever it'be in the S3 lib to send from a string 
```

# jquery - on.keypress 仅适用于 html 中的第一次输入

> ID：16062255
> 
> 赞同：0
> 
> 时间：2013-04-17T14:05:13.870
> 
> 标签：jquery

为什么这个 jquery 只对 html 中的第一个输入起作用？

```
//check answer on ENTER keyboard press
$("body").on("keypress", "input:text[name=guesslogo]", function(e){
    if (e.keyCode == 13) {  
        $(this).siblings(".check").trigger("click");
    }
}); 
```

html，在这个 html 示例中，它仅适用于最后一个：S

```
<article id="level-1" class="unlocked" style="position: absolute; display: block; top: 0px; opacity: 1;">
    <h2>Level: 1 - 3</h2>
    <figure>
        <a href="#1" class="answered"><img src="logos/1.png" width="60" height="60" alt="1"></a>
    </figure>
    <figure>
        <a href="#2" class="logo" style="opacity: 1;"><img src="logos/2.png" width="60" height="60" alt="2"></a>
        <figcaption id="2" style="display: none;">
            <a href="#" class="close">Close</a>
            <img src="logos/2.png" width="150" height="150" alt="2">
            <a href="#" class="hint">13</a>
            <input type="text" name="guesslogo" data-lang="ge">
            <a href="#" class="check">Check</a>
            <!-- <a href="#" class="clear">Clear</a> -->
            <a href="#" class="facebookask">Ask a friend on Facebook</a>
        </figcaption>
    </figure>
    <figure>
        <a href="#3" class="answered"><img src="logos/3.png" width="60" height="60" alt="3"></a>
    </figure>
    <figure>
        <a href="#5" class="answered"><img src="logos/5.png" width="60" height="60" alt="5"></a>
    </figure>
    <figure>
        <a href="#6" class="answered"><img src="logos/6.png" width="60" height="60" alt="6"></a>
    </figure>
    <figure>
        <a href="#8" class="answered"><img src="logos/8.png" width="60" height="60" alt="8"></a>
    </figure>
    <figure>
        <a href="#9" class="answered"><img src="logos/9.png" width="60" height="60" alt="9"></a>
    </figure>
    <figure>
        <a href="#10" class="answered"><img src="logos/10.png" width="60" height="60" alt="10"></a>
    </figure>
    <figure>
        <a href="#11" class="answered"><img src="logos/11.png" width="60" height="60" alt="11"></a>
    </figure>
    <figure>
        <a href="#12" class="answered"><img src="logos/12.png" width="60" height="60" alt="12"></a>
    </figure>
    <figure>
        <a href="#13" class="answered"><img src="logos/13.png" width="60" height="60" alt="13"></a>
    </figure>
    <figure>
        <a href="#14" class="answered"><img src="logos/14.png" width="60" height="60" alt="14"></a>
    </figure>
    <figure>
        <a href="#15" class="answered"><img src="logos/15.png" width="60" height="60" alt="15"></a>
    </figure>
    <figure>
        <a href="#16" class="answered"><img src="logos/16.png" width="60" height="60" alt="16"></a>
    </figure>
    <figure>
        <a href="#17" class="answered"><img src="logos/17.png" width="60" height="60" alt="17"></a>
    </figure>
    <figure>
        <a href="#18" class="answered"><img src="logos/18.png" width="60" height="60" alt="18"></a>
    </figure>
    <figure>
        <a href="#19" class="answered"><img src="logos/19.png" width="60" height="60" alt="19"></a>
    </figure>
    <figure>
        <a href="#20" class="answered"><img src="logos/20.png" width="60" height="60" alt="20"></a>
    </figure>
    <figure>
        <a href="#21" class="answered"><img src="logos/21.png" width="60" height="60" alt="21"></a>
    </figure>
    <figure>
        <a href="#22" class="logo" style="opacity: 1;"><img src="logos/22.png" width="60" height="60" alt="22"></a>
        <figcaption id="22">
            <a href="#" class="close">Close</a>
            <img src="logos/22.png" width="150" height="150" alt="22">
            <a href="#" class="hint">13</a>
            <input type="text" name="guesslogo" data-lang="ge">
            <a href="#" class="check">Check</a>
            <!-- <a href="#" class="clear">Clear</a> -->
            <a href="#" class="facebookask">Ask a friend on Facebook</a>
        </figcaption>
    </figure>
    <figure>
        <a href="#23" class="logo" style="opacity: 1;"><img src="logos/23.png" width="60" height="60" alt="23"></a>
        <figcaption id="23">
            <a href="#" class="close">Close</a>
            <img src="logos/23.png" width="150" height="150" alt="23">
            <a href="#" class="hint">13</a>
            <input type="text" name="guesslogo" data-lang="en">
            <a href="#" class="check">Check</a>
            <!-- <a href="#" class="clear">Clear</a> -->
            <a href="#" class="facebookask">Ask a friend on Facebook</a>
        </figcaption>
    </figure>
</article> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:13:18.110

我已经复制并测试了您的代码，它似乎在这里工作得很好：

[http://jsfiddle.net/YeFVt/](http://jsfiddle.net/YeFVt/)

```
$(document).on("keypress", "input:text[name=guesslogo]", function(e){
    console.log(e.keyCode);
    if (e.keyCode == 13) {  
        console.log('got here');
        $(this).siblings(".check").trigger("click");
    }
}); 
```

这可能与您的 .check 链接在您的实时代码中无法正常工作有关？

最后一个错误与`<input>`未关闭的标签有关。

# java - Web 应用程序审计跟踪

> ID：16062256
> 
> 赞同：1
> 
> 时间：2013-04-17T14:05:18.240
> 
> 标签：java, oracle

我正在为执行插入/更新/删除记录的用户 ID 登录的 Web 应用程序执行审计跟踪。

插入/更新触发器没有问题。但是，对于删除触发器，数据库将不知道执行删除的“用户 ID”。

我正在使用带有连接池的 oracle 数据库和 jdbc。

如何将“用户 ID”传递给删除触发器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-12T15:10:19.773

看看[Audit4j](http://audit4j.org)。它支持对应用程序审计的开箱即用支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:11:19.810

你在使用 JPA 吗？如果是这样，您使用的是 EclipseLink 吗？如果是这样，这可以在没有触发器的情况下完成吗？

如果您对所有三个答案的回答都是肯定的，我有没有为您提供答案。看看[EclipseLink 的历史表功能](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History#Example_history_table)。我过去曾成功地使用它来实施审计跟踪。

否则，通过设置状态列来考虑“软删除”。您只需将行状态设置为禁用，而不是从数据库中物理删除行。在您的 Select 查询中，只需添加“and where status != disabled”。

# d3.js - D3.js 圆环图... arc.centroid(d) 不受 d.innerRadius 和 d.outerRadius 的影响

> ID：16062257
> 
> 赞同：3
> 
> 时间：2013-04-17T14:05:18.847
> 
> 标签：d3.js, pie-chart, donut-chart

我正在创建一个甜甜圈（或饼图），并且我想将标签放在该区域之外。我为它创建了一个小提琴[http://jsfiddle.net/VeeTee/mA3V7/](http://jsfiddle.net/VeeTee/mA3V7/)。

```
arcs.append("svg:text")
    .attr("transform", function(d) {
        //this is where I want to make a translation to the outside border
        d.innerRadius = radius;
        d.outerRadius = height/2;
        return "translate(" + arc.centroid(d) +")";
    })
    .attr("dy", ".35em")
    .attr("text-anchor", "middle")
    .text(function(d, i) { return d.value.toFixed(2); }); 
```

arc.centroid(d) -> 总是给出相同的结果（因此是相同的翻译）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T15:15:14.040

不知道你的意思是什么，它总是给你相同的结果，但你可以通过将质心的坐标乘以 1.5 将标签放在图表之外。代码是这样的。

```
.attr("transform", function(d) {
        var c = arc.centroid(d);
        return "translate(" + c[0]*1.5 +"," + c[1]*1.5 + ")";
    }) 
```

[在这里](http://jsfiddle.net/mA3V7/1/)更新了 jsfiddle 。

# dojo - 如何检查函数是否在 DOH 中引发错误？

> ID：16062265
> 
> 赞同：2
> 
> 时间：2013-04-17T14:05:38.857
> 
> 标签：dojo, tdd, doh

我试图检查一个函数是否抛出错误，并做了这个：

```
 define([
     'doh/runner',
     'app/Obj'
 ], function(
     doh,    
     Obj 
 ){
     doh.register('Test Obj exception', [
         function () {
             try {          
                 new Obj(); // should throw error
             } catch(e) {
                 doh.t(e, 'should give an error if no parameters given');               
             }
         }
 ]); 
```

**obj.js**文件：

```
...
constructor: function (args){
  if (!args) { throw 'Error' }
  ...
}
... 
```

但也许在 Doh 中有什么正确的方法可以解决这个问题？有人可以解释吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T17:03:44.693

你想要 doh.assertError()

例子：

```
doh.assertError(TypeError, this.field, "setValue",
    [{
        CreatedOn: "March 10th, 2014"
    }],
    "setValue() on an invalid format should throw a TypeError"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:01:35.017

[此示例测试](http://archive.dojotoolkit.org/nightly/checkout/util/doh/runner.html?testModule=aa&paths=aa,//gist.github.com/gitgrimbo/5406688/raw/e6bc4469ce72dfd6d50e61e885889cb915a3f66b/gistfile1)表明 DOH 正确捕获并显示错误。

[这个要点](https://gist.github.com/gitgrimbo/5406688)是测试，并包含以下代码：

```
var Obj = function () {
    if (arguments.length < 1) {
        throw 'Error - There are ' + arguments.length + ' arguments';
    }
};
define(["doh/runner"], function(doh){
    var tests = [
        function () {
            new Obj(); // wrong call
        }
    ];
    doh.register('Test Obj exception', tests);
}); 
```

屏幕截图显示了 1 错误，以及`Error`抛出的错误消息：

![在此处输入图像描述](https://i.stack.imgur.com/SjULY.png)

# vba - VBA MSSOAP.SoapClient30 错误：为 SOAP 请求提供的参数数量不正确 HRESULT=0x80070057

> ID：16062267
> 
> 赞同：1
> 
> 时间：2013-04-17T14:05:54.920
> 
> 标签：vba, soap

**更新**：所以我想我需要以某种方式在方法参数处提交一个复杂类型 - 我如何使用 VBA 做到这一点？

这是我第一次编写 VBA 代码，我将不胜感激任何关于如何解决问题的可能指示。基本上，我写了一个小肥皂服务，它工作正常——我用 SoapUI 测试它——所以我猜其他应用程序应该能够使用它。

[服务生成的 WSDL 在这里](https://gist.github.com/abolotnov/5404528)。也许，它对 VBScript SOAPClient 的使用不太友好 - 在这个方向上的任何点都会有很大帮助。

我正在尝试将一些实际使用它的代码放在一起（下面的 VBScript） - 我在谷歌搜索时发现的一个示例之上构建了它。它会产生以下错误：

```
Incorrect number of parameters supplied for SOAP request HRESULT=0x80070057

Module Module1

    Dim WSDLFileName As String
    Dim base64attachment As String
    Dim attachment_filename As String
    Dim summary As String
    Dim SoapClient
    Dim res

    Sub Main()
        WSDLFileName = "http://localhost:7777/?wsdl"
        base64attachment = "UG9ydG1hbiBpcyBwb3J0Zm9saW8gbWFuYWdlbWVudCBzb2Z0d2FyZSB0byBoZWxwIFBNTyBrZWV"
        attachment_filename = "test_file.txt"
        summary = "test issue with summary"
        SoapClient = CreateObject("MSSOAP.SoapClient30")
        SoapClient.MSSoapInit(WSDLFileName)
        res = SoapClient.CreateJiraIssueWithBase64Attachment(summary, base64attachment, attachment_filename)
        Console.Out.WriteLine(res)
    End Sub

End Module 
```

任何指针都会有所帮助，我在这里迷路了。

我期望它应该产生这样的响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:open="open.JiraAdapter">
   <soapenv:Header/>
   <soapenv:Body>
      <open:CreateJiraIssueWithBase64Attachment>
         <open:summary>some summary</open:summary>
         <open:base64attachment>BASE64CODEDFILE</open:base64attachment>
         <open:attachment_filename>NAME of the file attached</open:attachment_filename>
      </open:CreateJiraIssueWithBase64Attachment>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:35:12.880

您的服务响应包含复杂类型对象。

```
<xs:element name="CreateJiraIssueWithBase64AttachmentResult" type="s0:Status" minOccurs="0" nillable="true"/> 
```

为了能够使用复杂类型，您需要使用“MSSOAP.SoapSerializer30”来创建请求和“MSSOAP.SoapReader30”来读取响应。

SOAP UI 可以帮助您查看正确的请求结构（标签、命名空间和操作）。我认为是这样的

```
Connector = CreateObject("MSSOAP.HttpConnector30") 
Connector.Property("EndPointURL") = "url"
Connector.Property("UseSSL") = True
Connector.Connect
Connector.Property("SoapAction") = "CreateJiraIssueWithBase64Attachment"
Connector.BeginMessage

Serializer = CreateObject("MSSOAP.SoapSerializer30")
Serializer.Init(Connector.InputStream)
Serializer.StartEnvelope
Serializer.StartBody
Serializer.StartElement("CreateJiraIssueWithBase64Attachment";"open.jiraAdapter.test")
Serializer.StartElement("summary";"open.jiraAdapter.test")
Serializer.WriteString("another test issue for JUR")
Serializer.EndElement
Serializer.StartElement("base64attachment";"open.jiraAdapter.test")
Serializer.WriteString("Y29kZTogaHR0cDovL3Bhc3RlYmluLmNvbS9EbUx3N0oycQ0KeG1sOiBodHRwOi8vcGFzdGViaW4uY29tLzE3Q2MxVjJM")
Serializer.EndElement 
Serializer.StartElement("attachment_filename";"open.jiraAdapter.test")
Serializer.WriteString("readme.txt")
Serializer.EndElement   
Serializer.EndElement   
Serializer.EndBody
Serializer.EndEnvelope    
Connector.EndMessage

Reader = CreateObject("MSSOAP.SoapReader30")
Reader.Load(Connector.OutputStream)  
/// Reader.Body.xml - response 
```

希望这对您有所帮助。

# c# - 如果达到日期时间，显示消息框？

> ID：16062269
> 
> 赞同：1
> 
> 时间：2013-04-17T14:06:03.250
> 
> 标签：c#, wpf, datetime, dispatchertimer

我需要有关日期时间的帮助。
我希望我的应用程序检查 DateTime 是否结束并给我一个消息框。
我该怎么写？
代码：

```
private void listjob()
{
    DispatcherTimer dispatcherTimer = new DispatcherTimer();
    dispatcherTimer.Tick += new EventHandler(listjob3_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 0, 1);
    dispatcherTimer.Start();
}
private void listjob3_Tick(object sender, EventArgs e)
{
    if (listbox3job())
    {
        DateTime? start = DateTimePicker1.Value;
        DateTime? end = DateTimePicker2.Value;
        DateTime now = DateTime.Now;
        if (?) // here is what I want it to check if end time is started
        {
           Xceed.Wpf.Toolkit.MessageBox.Show("End Time started");
           DispatcherTimer timer = (DispatcherTimer)sender;
           timer.Stop();
           timer = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:07:19.743

除非我严重误解了你想要的东西：

```
if (now >= end) 
```

或者换句话说，如果当前时间大于或等于结束时间。如果您只是想知道当前时间是否**超过结束时间**，那么：

```
if (now > end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:09:00.090

```
if(end<= now) 
```

就是这样。如果您对类型有疑问，请使用 ToShortDateString() 或其他属性

# twitter-bootstrap - 在 asp.net 中使用 UpdatePanel 部分呈现的引导 css

> ID：16062270
> 
> 赞同：1
> 
> 时间：2013-04-17T14:06:06.733
> 
> 标签：twitter-bootstrap

我在我的 ASP.NET 应用程序中使用 Bootstrap-Twitter 样式和主内容架构（下面的代码）。第一次加载时一切正常，两个 span6 div 并排，顶部菜单正常。我检查了@media 样式，两个 div 都可以。当任何更新面板执行部分渲染（单击左侧更新面板中的树）时，一切都会发生变化。主要的，我认为关键的问题是现在@media 发生了变化（现在是@media（最大宽度：767px），而在更新之前是@media（最小宽度：1200px））。当您在平板电脑或一些小分辨率中打开时，宽显示器中的显示页面会发生变化，并且仅在更新面板部分呈现时才会发生这种情况。有没有人有这种类型的错误的经验？

主码：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js lt-ie10" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
<head id="Head1" runat="server">   
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>Web Client</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Le styles -->
    <link rel="stylesheet" href="../assets/css/bootstrap.css" media="all" />

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="../assets/js/html5shiv.js" ></script>
    <![endif]-->
    <script src="../assets/js/modernizr-2.5.3-respond-1.1.0.min.js"></script>

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="~/assets/ico/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="~/assets/ico/apple-touch-icon-144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="~/assets/ico/apple-touch-icon-114-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="~/assets/ico/apple-touch-icon-72-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" href="~/assets/ico/apple-touch-icon-57-precomposed.png" />

<asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>

</head>
<body>
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <form id="mainForm" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" OnAsyncPostBackError="ScriptManager1_AsyncPostBackError" AsyncPostBackTimeout="360000">
        <Scripts>
            <asp:ScriptReference Path="~/assets/js/jquery-1.7.2.min.js" />
             <asp:ScriptReference Path="~/assets/js/bootstrap/bootstrap.min.js" />
            <asp:ScriptReference Path="~/assets/js/bootstrap/dropdown.js" />
            <asp:ScriptReference Path="~/assets/js/bootstrap/tab.js" />
            <asp:ScriptReference Path="~/assets/js/bootstrap/button.js" />
            <asp:ScriptReference Path="~/assets/js/bootstrap/tooltip.js" />
            <asp:ScriptReference Path="~/assets/js/bootstrap/modal.js" />
            <asp:ScriptReference Path="~/JS/Safari3AjaxHack.js" />
            <asp:ScriptReference Path="~/js/default.js" />
            <asp:ScriptReference Path="~/JS/LongPolling.js" />
        </Scripts>
    </asp:ScriptManager>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
         <!--TOP MENU CODE-->
        </div>        
      </div>      
    </div>
    <div class="container">
        <div class="row">
            <asp:ContentPlaceHolder ID="DefaultContent" runat="server" />
        </div>
    </div>
    <footer class="footer">        
       <div class="navbar navbar-fixed-bottom">      
           <div class="navbar-inner">
               <div class="container">                  
                   <p class="pull-right">
                        v<%= Application["ShellVersion"] %>&nbsp;  
                       Copyright 2012 All rights reserved.
                   </p>
               </div>
           </div>
       </div>
    </footer>       
</form>
</body>
</html> 
```

内容代码：

```
<asp:Content ID="content" ContentPlaceHolderID="DefaultContent" Runat="Server">   
    <div class="span6">
        <div class="well">           
            <asp:UpdatePanel ID="upLeft" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:TreeView ID="tree" runat="server" OnTreeNodePopulate="tree_TreeNodePopulate"
                        ExpandDepth="1" NodeWrap="true" OnSelectedNodeChanged="tree_SelectedNodeChanged"
                        SelectedNodeStyle-BackColor="#000066" SelectedNodeStyle-ForeColor="#FFFFFF" />
                    <link rel="stylesheet" href="../assets/css/bootstrap.css" media="all" />
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="ibtnExpand" EventName="Click" />
                    <asp:AsyncPostBackTrigger ControlID="ibtnCollapse" EventName="Click" />
                    <asp:AsyncPostBackTrigger ControlID="ibtnRefresh" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel>
        </div>
    </div>
    <div class="span6">
        <asp:UpdatePanel ID="upRight" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <div runat="server" id="rightDIV">
                    <ul class="nav nav-tabs" id="browseTab">
                        <li class="active"><a href="#recordTab" data-toggle="tab"><%= GetStaticTabTitle() %></a></li>
                        <asp:Repeater ID="rptTabs" runat="server">
                            <ItemTemplate>
                                <%# GetTabCommand(Container.DataItem) %>
                            </ItemTemplate>
                        </asp:Repeater>
                    </ul>
                    <div class="tab-content" style="overflow: visible;" id="rightTabs">
                        <uc:RecordInfo ID="recordDetailsInfo" runat="server" />
                        <div class="tab-pane active" id="recordTab">
                            <uc:Record ID="Details" runat="server" />
                            <uc:Files ID="Files" runat="server" />
                            <uc:Agenda ID="Agenda" runat="server" />
                            <uc:Section ID="Section" runat="server" />
                            <uc:Item ID="Item" runat="server" />
                            <asp:Panel ID="panelFiles" runat="server" Style="height: 300px; padding-bottom: 60px; margin-left: 0; padding-left: 0;"
                                CssClass="span6">
                                <iframe name="ifrmFiles" seamless="seamless" id="ifrmFiles" src="" runat="server"
                                    class="span6" style="height: 295px; margin-left: 0; padding-left: 0; border: 0 none #ffffff; background: #ffffff url('../Images/file-loader.gif') no-repeat 5% 5%;">Your browser doesn't support iframes.</iframe>
                            </asp:Panel>
                        </div>                      
                    </div>
                </div>               
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:21.600

我用容器流体引导类修复了这个问题。我用流体选项替换了所有容器和行。现在它工作正常，我认为它比以前更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T12:49:13.823

即使使用流体，我也遇到了同样的错误，当我删除 UpdatePanel 时它可以正常工作：

```
<li>
      <asp:UpdatePanel ID="upp" runat="server">
        <ContentTemplate>
         some content
        </ContentTemplate>
      </asp:UpdatePanel>
</li> 
```

# java - 具有非最终字段的不可变对象如何成为线程不安全的？

> ID：16062274
> 
> 赞同：8
> 
> 时间：2013-04-17T14:06:17.893
> 
> 标签：java, multithreading, concurrency, java-memory-model

说我们有这个

```
// This is trivially immutable.
public class Foo {
    private String bar;
    public Foo(String bar) {
        this.bar = bar;
    }
    public String getBar() {
        return bar;
    }
} 
```

是什么让这个线程不安全？从这个[问题](https://stackoverflow.com/q/16061030/106261)开始。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T14:13:58.577

`Foo`一旦安全发布，它就是线程安全的。例如，这个程序可以打印“不安全”（它可能不会使用热点/x86 的组合）——如果你做`bar`final 它就不会发生：

```
public class UnsafePublication {

    static Foo foo;

    public static void main(String[] args) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                while (foo == null) {}
                if (!"abc".equals(foo.getBar())) System.out.println("unsafe");
            }
        }).start();

        new Thread(new Runnable() {
            @Override
            public void run() {
                foo = new Foo("abc");
            }
        }).start();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T14:13:37.190

由于 JVM 优化，你永远不能假设操作是按照它们编写的顺序执行的，除非它对同一个线程很重要。因此，当您调用构造函数然后将对结果对象的引用传递给另一个线程时，JVM 可能实际上不会**在同一个线程**中需要之前写入 foo.bar 的值。

这意味着在多线程环境中，可以在将构造函数中的值写入之前调用 getBar 方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T08:49:25.807

很可能你现在已经得到了答案，但只是为了确保我也想添加我的解释。

为了使对象（对于您的情况）是线程安全的，它必须：

*   不可变
*   安全发布

**不可变**- 你做到了。bar一旦设置就无法修改。这里很明显。

**安全发布**。根据示例，代码未安全发布。因为 bar 不是最终的，所以编译器可以自由地对其进行重新排序，因为它认为合适。编译器可以在写入 bar*之前*发布（写入主存）对 Foo 实例的引用。这意味着 bar 为空。因此，*首先*将对 Foo 的引用写入主内存，*然后*写入 bar。在这两个事件之间，另一个线程可以看到陈旧的栏为空。

如果您将 final 添加到它，JMM 将保证：

*final 字段的值保证对访问构造对象的其他线程可见。*

或者，final 字段阻止重新排序。因此，使该变量为 final 将确保线程安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T14:35:01.607

从评论中发布的[链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5-110)：

```
class FinalFieldExample { 
    final int x;
    int y; 
    static FinalFieldExample f;

    public FinalFieldExample() {
        x = 3; 
        y = 4; 
    } 

    static void writer() {
        f = new FinalFieldExample();
    } 

    static void reader() {
        if (f != null) {
            int i = f.x;  // guaranteed to see 3  
            int j = f.y;  // could see 0
        } 
    } 
} 
```

一个线程可能会调用`writer()`，而另一个线程可能会调用`reader()`. reader() 中的 if 条件可以评估为 true，但由于 y 不是 final，因此对象初始化**可能尚未完全完成**（因此对象尚未安全发布），因此`int j = 0`可能在尚未初始化时发生。

# cassandra - 发出什么查询以仅提取列名（无值）？

> ID：16062277
> 
> 赞同：0
> 
> 时间：2013-04-17T14:06:24.933
> 
> 标签：cassandra, hector

`RangeSliceQuery`有一种方便的方法来仅提取密钥 -但我在(like )`setReturnKeysOnly()`中找不到类似的东西。`SliceQuery``setReturnColumnNamesOnly()`

Hector API 中是否提供了此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:41:03.663

如果您只想获取属于特定列族的列名，我可以向您展示如何使用 cql 实现它

```
select * from system.schema_columns WHERE keyspace_name='#KS' AND columnfamily_name='#CF' allow filtering; 
```

现在我认为使用你的 hector api 实现同样的事情不会是很大的技术障碍。

干杯

# ruby-on-rails - rails blog 添加评论重定向到活动管理员登录页面

> ID：16062278
> 
> 赞同：0
> 
> 时间：2013-04-17T14:06:27.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我正在创建一个`active_admin`用于管理面板的博客应用程序。当我尝试对帖子发表评论时，它会将我重定向到`active_admin`登录页面。

评论型号：-

```
class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post, :counter_cache => true
  attr_accessible :text, :user_id, :post_id

  validate :text, :presence => true
end 
```

活跃的管理员评论模型：-

```
ActiveAdmin.register Comment, :as => "PostComment" do

end 
```

职位控制器：-

```
def show
    @post = Post.find(params[:id])
    @showPost = true
    respond_with do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
end 
```

评论控制器：-

```
class CommentsController < ApplicationController
    before_filter :auth_user

   def create
     @post = Post.find(params[:post_id])
     params[:comment][:user_id] = current_user.id
     @comment = @post.comments.create(params[:comment])
     redirect_to post_path(@post)
   end
end 
```

评论表：-

```
<%= semantic_form_for ([@post, @post.comments.build]), :html => { :id => "comment-form", :class => "metta-form"} do |f| %>
    <h5 class="pull-left">Comments</h5>
  <div class="clearfix">
  </div>
    <div class="wrap-comment-form">
        <%= f.inputs do %>
            <%= f.input :text, :label => false, :input_html => { :class => "comment-text pull-left" } %>
        <% end %>
        <%= f.actions do %>
            <%= f.action :submit, :label => "Add Comment", :button_html => { :placeholder => "Enter Your Comment Here", :class => "btn btn-primary btn-metta pull-right" } %>
        <% end %>
    </div>
<% end %> 
```

当我单击添加评论按钮时，它会将我带到活动的管理员登录页面。有人可以帮我吗？

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper ApplicationHelper

  def after_sign_in_path_for(resource) 
    '/users/home'
    end
  def after_sign_up_path_for(resource)
    '/users/home'
  end
  def auth_user
    redirect_to new_user_path unless user_signed_in?
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:36:23.690

看这里：`before_filter :auth_user`

所以你被重定向到登录页面的原因是你还没有登录。

# c++ - 刷新 Qt 表单 - 似乎卡住了

> ID：16062282
> 
> 赞同：0
> 
> 时间：2013-04-17T14:06:37.890
> 
> 标签：c++, qt

我的 Qt 表单有一个表格和一些标签。表格内容和标签内容变化太快，有时好像表格卡住了。但是，当我最小化表单并再次最大化它时，会出现最新的值。有关解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:53:13.803

不要每秒更新数千次用户界面。您在显示屏上看到的图像通常每秒仅更新 60 次。如果你有 CRT 显示器，刷新率可能是 50 Hz - 120 Hz，但在大多数显示器中，刷新率是 60 Hz。

绝对不需要比显示器的刷新率更频繁地更新标签内容。内容从未见过。但是更新用户界面小部件的成本很高，因此预计窗口似乎会被冻结。你正在做很多不必要的工作。

不要在每次数据更改时更新小部件。使用[计时器](http://qt-project.org/doc/qt-4.8/qobject.html#startTimer)来更新小部件。16 毫秒的计时器间隔意味着小部件每秒更新约 60 次。但更慢的更新速度很可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:13:05.517

我的建议是[`repaint()`](http://qt-project.org/doc/qt-4.8/qwidget.html#repaint)在更改项目后使用：

> 通过立即调用paintEvent() 直接重绘小部件，除非更新被禁用或小部件被隐藏。
> 
> 我们建议仅在需要立即重新绘制时才使用 repaint()，例如在动画期间。在几乎所有情况下 update() 更好，因为它允许 Qt 优化速度并最小化闪烁。

您可以将信号连接到该小部件，而不是直接调用，因为`repaint()`它是一个插槽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:59:29.733

我的水晶球表明您正在为 a 使用自定义模型`QTableWidget`，但您的自定义模型未`dataChanged`正确发出信号。您的帖子没有包含足够的数据——您使用的是哪种“表格”，您如何为其提供数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:34:58.283

完全同意 Roku 的回答。无需以更快的速度更新用户界面，然后用户可以阅读它。我怀疑每秒超过 2-3 次的东西是否有任何更新意义。好吧，如果您使用智能代理（如网格中的进度条或其他视觉对象），则每秒可以达到 5-10 次。但是仍然没有必要每秒执行 1000 次网格更新

# php - 未经身份验证的用户使用 Twitter API 1.1 的最佳方式

> ID：16062284
> 
> 赞同：1
> 
> 时间：2013-04-17T14:06:41.547
> 
> 标签：php, jquery, api, twitter, oauth

我提前为我的英语道歉。

我需要获取有关特定主题的最后一条推文（例如……嗯……推特！）。

今天，我使用[https://search.twitter.com/search.json?q=twitter](https://search.twitter.com/search.json?q=twitter)来获取它。但如您所知，这已被弃用，它将关闭。所以我尝试将 1.1 API 与 PHP (twitteroauth) 一起使用，但我遇到了这个问题：

*我网站的每个访问者都会通过 AJAX 获得有关某个主题的最新 Twitter 状态。如果访问者停留在我的页面中，则 twitter 数据将刷新所有 10 秒。*

**编辑：***请注意，我有很多页面，而且每个页面的主题都不同。*

今天，我的大多数访问者都没有通过我的网站和 Twitter 的身份验证。如果我使用 PHP 方式获取数据并显示给我的访问者，如果我的访问者数量太高，我将受到速率限制。有我的问题：

1.  有一种方法可以使用我的密钥构建一些“匿名”令牌，以将速率限制窗口“委托”给我的“匿名”用户？
2.  如果没有，我使用 1.1 的 API 是否现实？如何？
3.  而且，如果不是再次，你的建议是什么，你有什么建议来解决这个问题？

非常感谢不吝赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T01:16:51.973

我决定使用带有 AJAX 的 PHP CURL的[流式 API来获取我的数据。](https://dev.twitter.com/docs/streaming-apis)

# linux - 在 Mac OS 中查找可写文件

> ID：16062291
> 
> 赞同：4
> 
> 时间：2013-04-17T14:07:06.877
> 
> 标签：linux, macos, find

我想在我的目录中找到（递归）可写文件。我的操作系统是 MacOS。

我试过了：

```
find . -type  -writable 
```

但外壳返回错误：

> 查找：-type：-writable：未知类型

为什么我得到错误？有替代品吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:28:09.313

可由谁写？

如果你的意思是任何人都可以写，你可以使用：

```
find . -type f -perm -0222 
```

或者

```
find . -type f -perm -ugo=w 
```

如果您的意思是可写 by `other`，请使用：

```
find . -type f -perm -0002 
```

或者

```
find . -type f -perm -o=w 
```

# python - 在新式类中替换 __str__

> ID：16062293
> 
> 赞同：4
> 
> 时间：2013-04-17T14:07:12.633
> 
> 标签：python, python-2.7

我正在转换旧的 Python 代码并用新样式类替换了一些类。问题是这破坏了替换的行为，`__str__`我不知道为什么。

```
class OldStyle():
    def __str__(self):
        return 'original'

old = OldStyle()
print old
old.__str__ = lambda: 'modified'
print old

class NewStyle(object):
    def __str__(self):
        return 'original'

new = NewStyle()
print new
new.__str__ = lambda: 'modified'
print new 
```

我期望

```
original
modified
original
modified 
```

但我得到了

```
original
modified
original
original 
```

也就是说，`__str__`没有正确替换为新样式。打印`new.__str__`正确返回新的 lambda，但`str(new)`仍不调用它。我认为这是一些方法查找缓存问题，但即使该对象以前从未打印过，也会发生这种情况。

为什么会这样？我从来没有听说过这种行为差异，它只发生在`__str__`，其他方法被替换得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:25:25.223

这记录在 python 数据模型中的[特殊方法名称](http://docs.python.org/2/reference/datamodel.html#special-method-names)下。具体来说：

> 例如，如果一个类定义了一个名为 的方法`__getitem__`，并且 x 是该类的一个实例，那么对于旧式类和新式类`x[i]`大致等价。`x.__getitem__(i)``type(x).__getitem__(x, i)`

我相信这可以让新式类在这些操作方面更有效率，因为对于旧式类，python 被迫查找属性然后调用属性，对于新式类，python 可以将其作为 C 结构的一部分在某处有效地将查找和调用推送到本机 C 代码中。例如：

```
class Foo:
    def __add__(self,other):
        return 4 + other

class Bar(object):
    def __add__(self,other):
        return 4 + other

import timeit
print timeit.timeit('f + 5','from __main__ import Foo; f = Foo()')
print timeit.timeit('b + 5','from __main__ import Bar; b = Bar()') 
```

对我来说（python2.7.3，OS-X 10.5.8），new-style class 快了将近 4 倍！

```
2.27801704407
0.602614879608 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:15:38.887

这有效：

```
NewStyle.__str__ = lambda self: 'modified' 
```

看起来我们现在看到的`__str__`方法是绑定到类类型，而不是实例。我不确定为什么会这样。您可以`new.__str__()`显式调用并获取替换的方法，但`str(new)`始终调用`NewStyle.__str__(new)`.

# ruby-on-rails - 创建删除链接时消息的未定义局部变量

> ID：16062301
> 
> 赞同：0
> 
> 时间：2013-04-17T14:07:34.463
> 
> 标签：ruby-on-rails

对于我的收件箱，我创建了一种从收件箱中删除多条消息的方法。现在我正在尝试设置如何删除当前用户正在查看的消息。消息底部应该有一个链接，内容为`Delete`。当用户单击`Delete`链接时，消息将被删除，用户将被重定向到他们的收件箱。

将代码添加到控制器时，我现在什至无法查看收件箱消息。我`undefined local variable or method "message" error`在尝试查看消息时收到一条消息，页面标题为`NameError in Messages#show`.

有谁知道我该如何解决这个问题？

添加到控制器的新代码：

```
 def destroy
     @message = Message.find(params[:id])
     @message.destroy
     flash[:notice] = "Successfully deleted message."
     redirect_to user_messages_path(@user, @messages)
   end 
```

消息控制器：

```
Class MessagesController < ApplicationController
  before_filter :set_user

  def show
     @message = Message.find(params[:id])
     @message.readingmessage if @message.recipient == current_user
   end

   def destroy
     @message = Message.find(params[:id])
     @message.destroy
     flash[:notice] = "Successfully deleted message."
     redirect_to user_messages_path(@user, @messages)
   end

  private
    def set_user
      @user = current_user
    end
end 
```

显示.html：

```
<%= link_to "remove", message, :confirm => 'Are you sure?', :method => :delete %> 
```

路线：

```
Dating::Application.routes.draw do
  get 'signup' => 'users#new'
  get 'login' => 'sessions#new'
  get 'logout' => 'sessions#destroy'
  get 'edit' => 'users#edit'
  get "/profile/:id" => "users#show"
  get "profile/:id/settings" => 'users#edit'
  match 'settings/:id' => 'users#settings'

  resources :users
  resources :sessions
  resources :password_resets
  resources :galleries
  resources :photos
  resources :searches

  resources :users do  
      get 'settings', on: :member  
  end

  root to: 'users#new'
  root to: 'galleries#index'

  resources :users do |user|
    resources :messages do
      collection do
        post 'delete_multiple'
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:12:30.090

我认为你需要`@message`像这样在你的 link_to 中使用：

```
<%= link_to "remove", @message, :confirm => 'Are you sure?', :method => :delete %> 
```

# php - 不能使用while循环代替foreach循环进行分页php mysql

> ID：16062302
> 
> 赞同：0
> 
> 时间：2013-04-17T14:07:34.663
> 
> 标签：php, mysql, for-loop, pagination, while-loop

如何将显示从表中获取的内容的 foreach 循环替换为使用此 while 循环显示？

foreach 循环的代码在这里： http: [//pastebin.com/pWpLwVH3](http://pastebin.com/pWpLwVH3)

while 循环代码在这里： http: [//pastebin.com/XZH6GxmW](http://pastebin.com/XZH6GxmW)

两者都是简单的代码，但无法找到使用 while 代替 for 的方法。不幸的是，目前正在执行分页和分页代码都进入 while 循环以显示表格字段。

已经尝试了很长时间，但总是以某种错误结束。最后一个错误是

以这种方式修改代码时提供的 foreach() 参数无效：http: [//pastebin.com/8bJDVhS8](http://pastebin.com/8bJDVhS8)

感谢大家！这个论坛和我一起创造了奇迹！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:12:41.063

```
 $rows = $data_p = mysql_query("SELECT * FROM pharmacies $max") or die(mysql_error()); 
...
    <?php foreach($rows as $row): ?> 
```

您还没有 FETCHED 任何行，因此您正在尝试对语句结果句柄进行 foreach。循环应该是

```
<?php while($row = mysql_fetch_array($rows)) { ?> 
```

反而。

# javascript - 删除右键单击表格箭头 firefox

> ID：16062303
> 
> 赞同：1
> 
> 时间：2013-04-17T14:07:34.907
> 
> 标签：javascript, jquery, html, css, firefox

![在此处输入图像描述](https://i.stack.imgur.com/vJ8xJ.png)

我正在尝试使用 javascript 和引导程序为表创建上下文菜单，但是当我右键单击可编辑 div 中的表时，我会看到一些箭头，允许用户添加一些新的行和列。无论如何要删除它们吗？

**我正在使用火狐**

非常感谢。

更新：链接到小提琴[http://jsfiddle.net/toby3105/LSyC8/7/](http://jsfiddle.net/toby3105/LSyC8/7/)

```
<div id="context" data-toggle="context" data-target="#context-menu" contenteditable="true">
            <table border="1">
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                    </tr>
                </tbody>
            </table>
        </div> 
```

我认为这与引导程序无关，我认为我只与 Firefox 有关。z-index 为 15000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:02:44.683

显然这可以解决问题。

```
document.designMode = "on";
document.execCommand("enableObjectResizing", false, "false");
document.execCommand("enableInlineTableEditing", false, "false"); 
```

# java - 如何在我的 strings.xml 文件中列出在 MainActivity.java 中创建的字符串

> ID：16062304
> 
> 赞同：0
> 
> 时间：2013-04-17T14:07:35.690
> 
> 标签：java, android, xml, eclipse, string

我`string`在我的`main.java`文件中创建了一个如下：

```
String message = "Current Location \nLongitude: "+ location.getLongitude()+"\nLatitude: "+ location.getLatitude(); 
```

我想将此字符串放在我的`strings.xml`文件中。

这样我就可以`string`在我的应用程序的不同位置显示值。

我不知道该怎么做。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:10:42.917

您只能手动编辑您的 strings.xml，而不是 proramatically。如果这是一个动态字符串（我假设它是），您将不得不将它保存在例如静态变量中，但不能将其写入 strings.xml。

# javascript - PhantomJS 网页#render 不显示包含在网页#content 中的 javascript 生成的 SVG

> ID：16062316
> 
> 赞同：2
> 
> 时间：2013-04-17T14:08:06.580
> 
> 标签：javascript, pdf, svg, phantomjs

这是我的 PhantomJS 脚本：[https ://gist.github.com/beckyconning/5404506](https://gist.github.com/beckyconning/5404506)

这是页面中包含的 javascript：[https ://gist.github.com/beckyconning/5404532](https://gist.github.com/beckyconning/5404532)

这是相关的 HTML：

```
<div id="participant-overview-chart"></div> 
```

该图表显示在所有浏览器中，并且 svg 包含在 pages#content 的输出中，但它不会显示在 PhantomJS 的 pages#render 创建的文件中。

如果我将生成的 SVG 手动包含到显示的 div 中，但我需要自动生成这些图形。

我尝试注入 jQuery 并运行 $(document).ready 并且我当前的 PhantomJS 脚本中包含超时。我不知道下一步该尝试什么哈哈！

感谢您提供有关调试此的任何帮助或指示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:30:01.170

在 PhantomJS 中，jQuery 从 $().height() 返回一个不准确的值；

手动设置 Raphael 绘图上下文的宽度和高度，而不是从元素的高度（以像素为单位）解决了这个问题。

```
var chart_container = $('#participant-overview-chart');
var chart_width = 529; //chart_container.height();
var chart_height = 529; //chart_container.height();
var r = Raphael(chart_container[0], 529, 529); 
```

将尝试使用非普通的 javascript 方式从元素中获取像素尺寸，如果可行，我将对其进行更新。

调试 PhantomJS PDF 缺少元素错误的提示：将网页渲染为 PNG。这可以在透明背景下显示文档，这可以帮助您找到元素隐藏的位置。

# php - heroku 中的 PHPExcel 插件

> ID：16062319
> 
> 赞同：1
> 
> 时间：2013-04-17T14:08:11.980
> 
> 标签：php, heroku, phpexcel, php-extension

如何在 herokuapp 中安装 PHPExcel 插件？任何输入将不胜感激！

我在服务器中启用了“php_zlib 扩展”，但无法启用“php_zip 扩展”。在 herokuapp 中使用 PHPExcel 功能是否有解决方法/替代方法？

谢谢，小布

# c# - 不明白 <>0 是什么意思

> ID：16062320
> 
> 赞同：2
> 
> 时间：2013-04-17T14:08:12.080
> 
> 标签：c#, excel

嗨，我正在尝试理解一个公式并用 c# 编写它，但到目前为止我还没有设法理解这个公式的作用，有人可以解释一下吗？

```
if(if(c57=> d57;g57;h57)<>0;(((if(c57>=d57;d57;c57))*100/11))/(if(c57 >=d57;c57;d57)));(100/11))) 
```

真正让我迷失的是<>0，我已经用谷歌搜索了一段时间，但到目前为止还没有找到它的作用。请问有人可以解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:10:03.000

`<>0`相当于“不等于零”

在这种情况下，它可能等同于“not False”，例如取部分公式：

`if(c57=> d57)<>0`

评估 C57 是否不 >= D57

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:10:11.747

`<>`表示“不相等”，如≠。`!=`在大多数编程语言中也称为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T14:11:33.420

这取决于语言，但在大多数情况下`<>`意味着“不等于”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T14:11:37.140

`<>`是*不等于*运算符。

`a1<>0`与 C#中的相同`a1!=0`。

有关Excel 计算运算符的文档，请参阅[http://office.microsoft.com/en-us/excel-help/calculation-operators-and-precedence-HP010342223.aspx?CTT=1](http://office.microsoft.com/en-us/excel-help/calculation-operators-and-precedence-HP010342223.aspx?CTT=1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T14:14:15.533

`<>`是不等式运算符，意思`a <> b`是`a is not equal to b`。这将用`a != b`C# 编写。

据我所知，唯一使用的语言`<>`是 VB/VbScript（这是 Excel 语法的基础）、SQL、BASIC 和 Pascal。在 T-SQL 中，您实际上可以使用`!=`，但它是非标准 SQL，因此`<>`是首选。

# javascript - 如何在子视图的事件处理程序中访问 ParentView

> ID：16062321
> 
> 赞同：0
> 
> 时间：2013-04-17T14:08:14.367
> 
> 标签：javascript, ember.js

我想从事件处理程序访问 parentView，但是当我单击子视图文本时，我收到 this.parentView 未定义的错误？event.view.parentView 也不起作用。

```
<html>
<head>
</head>
<body>
<script src="js/libs/jquery-1.9.1.js"></script>
    <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
    <script src="js/libs/ember-1.0.0-rc.2.js"></script>
    <script>

        App = Ember.Application.create();

        App.ChildView = Ember.View.extend({
           template : Ember.Handlebars.compile("Child View {{ view.elementId }} parent={{ view.parentView.elementId}}"),
           click:function(event){
               alert("parent="+this.parentView.elementId);
           }
        });

        App.TopView = Ember.View.extend({
           template : Ember.Handlebars.compile("Top View {{ view.elementId }} {{ view App.ChildView }}")
        });

        var v = App.TopView.create();
        v.append();
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:31:02.983

目前，在 Ember 中，我们必须使用[`get`](http://emberjs.com/api/#method_get)和[`set`](http://emberjs.com/api/#method_set)方法来读取或为属性赋值。

所以你应该这样做：

```
App.ChildView = Ember.View.extend({
    template : Ember.Handlebars.compile(
        "Child View {{view.elementId}} parent={{ view.parentView.elementId}}"
    ),
    click:function(event){
        alert("parent=" + this.get('parentView.elementId');
    }
}); 
```

# php - 连接两个表以获取计数

> ID：16062325
> 
> 赞同：1
> 
> 时间：2013-04-17T14:08:18.070
> 
> 标签：php, mysql, sql, join

我正在尝试使用以下有问题的 sql 查询来计算特定页面上的评论：

```
$query = "SELECT * FROM `comments` WHERE is_approved = '1' AND page_id = '943'"
$query = mysql_query($query);
$total = mysql_num_rows($query);
echo $total; 
```

问题是它输出的是 0 而不是 2。

表格如下：

页数：

```
id:1 page_id:943

id:2 page_id:978

id:3 page_id:977 
```

注释：

```
id:2 page_id:1 "hello"

id:3 page_id:1 "great"

id:4 page_id:3 "super" 
```

所以真正的原始查询应该是从页面表中设置的每个评论中获取真实的**，** 如加入`page_id``page_id``comments.page_id = pages.id`

最终的代码会是什么样子来进行连接和/或获得该计数？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:11:30.483

```
"SELECT * FROM comments, pages WHERE comments.page_id = pages.id AND is_approved = '1' AND comments.page_id = '943'" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:11:44.503

尝试：

```
SELECT c.* FROM `comments` c
JOIN `pages` p on c.page_id = p.id
WHERE c.is_approved = '1' AND p.page_id = '943' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:13:04.797

尝试使用：

```
SELECT count(*) as cnt
FROM `comments` c join pages p on c.page_id =  p.id
WHERE c.is_approved = '1' AND p.page_id = '943' 
```

在不同的表中有两个具有相同名称的列表示不同的东西，这似乎是一个非常糟糕的数据库设计。您可能应该将名称更改为`pages.page_id`其他名称。

而且，这会直接返回计数，因此您可以从行中读取值。如果您只想要计数，则没有理由返回所有匹配的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:20:59.497

不需要加入：

```
$query = "SELECT * FROM `comments` WHERE is_approved = '1' AND WHERE page_id IN (SELECT id WHERE page_id = '943')"
$query = mysql_query($query);
$total = mysql_num_rows($query);
echo $total; 
```

当然，如果您不需要/使用数据，我会建议使用计数语句：

```
$query = "SELECT COUNT(*) as total FROM `comments` WHERE is_approved = '1' AND WHERE page_id IN (SELECT id WHERE page_id = '943')"
$result = mysql_query($query);
$row = mysql_fetch_assoc($result);
$total = $row['total'];
echo $total; 
```

# c# - 对象序列化上下文中的 TYPE FIDELITY 是什么？

> ID：16062326
> 
> 赞同：5
> 
> 时间：2013-04-17T14:08:19.113
> 
> 标签：c#, .net

我正在尝试序列化一个泛型类。我将此序列化存储到磁盘。在查看 MSDN 时，它是这么说[的](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.110%29.aspx)。

> 二进制序列化保留了类型保真度，这对于在应用程序的不同调用之间保留对象的状态很有用。

**类型保真度**是什么意思？这会保留保存的对象类型吗？有没有比序列化对象并将其保存到磁盘来实现我想要做的“更好”的方法？

```
public class foo<T>
{
       public T coolProperty {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:14:13.140

二进制序列化包括对象的完整状态，因此当您反序列化（例如在同一应用程序的另一个调用中）时，您会得到一个精确的副本。所以是的，它将保留类型。XML 序列化只包括对象的公共属性，对于在不同平台之间传递对象数据很有用。

# matlab - 将极坐标图像转换为笛卡尔坐标

> ID：16062335
> 
> 赞同：0
> 
> 时间：2013-04-17T14:08:41.457
> 
> 标签：matlab, cartesian, polar-coordinates

我正在尝试将极坐标图像转换为笛卡尔坐标。

[将图像转换为极坐标的示例明确地做到这一点 - 想要一个光滑的矩阵方法](https://stackoverflow.com/questions/12924598/examples-to-convert-image-to-polar-coordinates-do-it-explicitly-want-a-slick-m)

我以为使用上面使用的方法是小菜一碟，但事实并非如此！如果有人在我的代码中发现错误，请告诉我！

```
phi=(0:.01:1)*2*pi;
r=0:.01:2;

psi=r<0.5;

psi_c=cos(phi).'*psi;

[P R z]=find(psi_c);
L=500;

X=R.*cos(P);
Y=R.*sin(P);

Xmin=min(X);Xmax=max(X);
Ymin=min(Y);Ymax=max(Y);

F=TriScatteredInterp(X,Y,z);

[Xi,Yi]=meshgrid(linspace(-Xmax,Xmax,L),linspace(-Ymax,Ymax,L));
Zi=F(Xi,Yi); 
```

我发现非常奇怪的是，当我更改 phi 时，它会发生根本性的变化，而不是按照我期望的方式！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:19:51.197

```
[X,Y] = pol2cart(THETA,RHO) 
```

在从极坐标转换为笛卡尔坐标的情况下。

同样地，

```
[X,Y] = pol2cart(THETA,RHO,Z) 
```

将圆柱形网格转换为相应的笛卡尔坐标。

但我不确定这些功能是你需要的。

# http - 在 chrome 中查找网页上允许的待处理请求数？

> ID：16062342
> 
> 赞同：2
> 
> 时间：2013-04-17T14:09:25.793
> 
> 标签：http, google-chrome

当 HTTP 请求未完成/无法在 chrome 中完成时，它会显示状态待定。

我正在尝试使用 ajax 请求动态修改我的网页内容。我有几个基于页面上不同事件的 ajax 请求。如果一些 HTTP 请求在该事件结束时无法完成/或过早停止，我将获得这些 HTTP 请求的待处理状态。

但是，问题是在几个这些 HTTP 挂起请求之后在此网页上发出的任何 HTTP 请求，它们也成为挂起请求，而没有被 chrome 浏览器实际请求。我认为他们被添加到队列中。这发生在有确定数量的待处理请求之后 - 我的浏览器有 2 个。

我不确定如何禁用此队列或增加允许的 HTTP 挂起请求的数量并允许其他 HTTP 请求通过。如果有人可以告诉我这是如何工作的以及如何更改此设置.. 那就太好了。

# windows - RegSetValueEx 需要以管理员身份运行才能工作？

> ID：16062343
> 
> 赞同：2
> 
> 时间：2013-04-17T14:09:29.307
> 
> 标签：windows, vb.net, vb6, registry, regedit

我创建了一个小型 vb6 应用程序，它在 HKLM 配置单元中编辑注册表。它利用函数[RegSetValueEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724923%28v=vs.85%29.aspx)。但是当在 windows 7 和 windows 8 pc 中运行 exe 文件时，即使在管理员用户中运行它也不会编辑注册表。

在 Windows XP 中它工作正常。如果我在 Windows 7 和 8 中运行与“以管理员身份运行”相同的应用程序（通过右键单击 exe 然后运行）那么它可以正常工作。我认为 Windows 7 和 8 id 设计为像仅此而已。但是有什么方法可以在不以管理员身份运行的情况下编辑它吗？或者vb6中是否有任何相同的代码。

这是我的小[代码](https://skydrive.live.com/redir?resid=2B635F7D896B131!126&authkey=!AEyRfE_Gx0ydmt0)

**重要提示：** 检查代码时创建exe然后运行exe并单击按钮（HKEY_LOCAL_MACHINE\SOFTWARE\Demo注册表被添加到wow32节点，因为vb6是32位应用程序）。通过打开代码直接运行代码可以更改注册表.但是创建exe然后运行它会产生问题，这是任何应用程序中的实时场景。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T14:25:49.660

自 Windows 2000 以来，Microsoft 一直警告开发人员不要以普通用户身份访问注册表的 HKLM 分支，因为它迟早会被限制为管理员。他们还说你不应该写信给`Program Files`.

他们直到 Windows Vista 才强制执行该规则，因此没有人觉得需要更改任何内容。

现在你有了它：不要以普通用户的身份写信给 HKLM - 它不起作用。不要将您的设置写入`Program Files`. 它不起作用。

普通用户运行的应用程序可以将他们的数据写入注册表中的用户文件夹和用户配置单元，其他任何地方都没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:41:56.113

如果您的应用程序的唯一目的是写入 HKLM 配置单元中的该值，那么您将需要向可执行文件添加“requiresAdministrator”清单，从而导致 Windows 在每次运行时提示用户进行管理员访问。

如果这是一个较大项目的一小部分，那么您应该使用 COM 提升或只运行带有上述清单的小型存根可执行文件，允许窗口仅在需要时提示。

如果您的应用程序根本不需要管理员访问权限，那么您应该停止它尝试写入管理员受限位置，而是使用用户自己的 HKCU 配置单元。

# perl - 为什么 IPC::Open3 调用 cmd.exe 而不是请求的程序？

> ID：16062344
> 
> 赞同：2
> 
> 时间：2013-04-17T14:09:30.530
> 
> 标签：perl, ipcopen3

我在 Windows 7 上的 Perl 5.16.3 x64（用 VC10 编译）上运行它。

当我运行这样的事情时：

```
use strict;
use warnings;
use IPC::Open3;
use Symbol 'gensym';

my $command = q[perl -e "$| = 1; for (1..60) { print '.'; sleep 1 }"];

my ($in, $out, $err);
$out = gensym;
$err = gensym;

my $pid = open3($in, $out, $err, $command); 
```

我可以在进程列表中看到调用的实际命令`IPC::Open3`是：

```
cmd.exe /x/d/c perl -e "$| = 1; for (1..60) { print '.'; sleep 1 }" 
```

当然，这会创建一个带有实际调用的子进程：

```
perl -e "$| = 1; for (1..60) { print '.'; sleep 1 }" 
```

因此，我得到的是`pid`与 cmd.exe 对应的，而不是 perl.exe 对应的。

该文档没有提及有关此调用顺序的任何内容或有关 Windows 上不同行为的任何内容。我这里没有 Linux/Unix 机器来测试它，但我敢打赌它不会在那里做类似的事情（如果有人可以测试，如果我错了，请告诉我）。

无论如何，我想知道为什么`IPC::Open3`要这样做？为什么不直接在该命令中调用 perl？

提前感谢您的任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:28:59.743

要执行 shell 命令，您需要一个 shell。

Like `system`,`open3`具有以下调用约定：

```
open3(..., ..., ..., $SHELL_COMMAND)
open3(..., ..., ..., $PROG, @ONE_OR_MORE_ARGS) 
```

以下不应调用 shell：

```
my @command = ('perl', '-e', '$| = 1; for (1..60) { print q{.}; sleep 1 }');
my $pid = open3($in, $out, $err, @command); 
```

# c# - C# 的对接库

> ID：16062346
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:09:45.047
> 
> 标签：c#, wpf, winforms, dock

我正在寻找在 C# 应用程序中使用的对接库。它可以为 WPF 设计，但我更喜欢 WinForms 应用程序。当然，它应该提供标准的对接机会。
我将在用户可以控制大量不同进程的应用程序中使用它，这些进程可以在应用程序生命周期内动态出现和消失。因此，主要标准如下：我应该有机会动态创建停靠窗口和位于其上的控件，并将有关所有停靠窗口位置的信息保存在某个文件中（我可以使用其他方式保存的内容）。应用程序重新启动后，它应该在应用程序关闭之前恢复所有停靠窗口的状态（以及它们的所有内容，但我可以手动加载它）。
不幸的是，我找到了唯一一个包含所有必需功能的对接组件库——它是 Telerik WinControls。但这对我的目的来说太慢了。

请给我一个好的对接库！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:24:09.723

[阿瓦隆码头](http://avalondock.codeplex.com/)

它提供了易于操作的绑定机制和 MVVM 以及良好的序列化机制。它是 SharpDevelop 中使用的对接库。加上它的免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:18:39.167

Actipro 制造一个

[Actipro 对接库](http://www.actiprosoftware.com/products/controls/windowsforms/docking)

我使用了他们停靠库的 WPF 版本（不是 WinForms），它非常好。我不知道你为什么说 Telerik 对接库太慢了。

# jquery - jQuery.on() 没有按预期工作

> ID：16062347
> 
> 赞同：1
> 
> 时间：2013-04-17T14:09:48.047
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我有三个滑块，我们称它们为一、二、三。滑块的值应该是`one >= two >= three`。

我创建了一个小提琴，在创建滑块时设置了更改和滑动的回调：

```
$(document).ready(function() {
    var oneValue = 5,
        twoValue = 3,
        threeValue =1;

    var one = $('#one'),
        two = $('#two'),
        three = $('#three');

    one.slider({
        min: 0,
        max: 10,
        value: oneValue,
        change: function(e, ui) {
            oneValue = ui.value;
            oneTest();
        },
        slide: function(e, ui) {
            oneValue = ui.value;
            oneTest();
        }
    });

    two.slider({
        min: 0,
        max: 10,
        value: twoValue,
        change: function(e, ui) {
            twoValue = ui.value;
            twoTest();
        },
        slide: function(e, ui) {
            twoValue = ui.value;
            twoTest();
        }
    });

    three.slider({
        min: 0,
        max: 10,
        value: threeValue,
        change: function(e, ui) {
            threeValue = ui.value;
            threeTest();
        },
        slide: function(e, ui) {
            threeValue = ui.value;
            threeTest();
        }
    });

    function oneTest() {
        console.log('oneTest');
        if (oneValue < twoValue) {
            two.slider('value', oneValue);
        }
    }
    function twoTest() {
        console.log('twoTest');
        if (twoValue < threeValue) {
            three.slider('value', twoValue);
        }
        if (twoValue > oneValue) {
            one.slider('value', twoValue);
        }
    }
    function threeTest() {
        console.log('threeTest');
        if (threeValue > twoValue) {
            two.slider('value', threeValue);
        }
    }
}); 
```

小提琴在这里：http: [//jsfiddle.net/RAGvr/3/](http://jsfiddle.net/RAGvr/3/)。它像我期望的那样工作。

但是，我需要能够在创建滑块后附加事件处理程序。所以我创建了滑块，然后用 jQuery.on()监听`change`和事件。`slide`像这样：

```
$(document).ready(function() {
    var oneValue = 5,
        twoValue = 3,
        threeValue =1;

    var one = $('#one'),
        two = $('#two'),
        three = $('#three');

    one.slider({
        min: 0,
        max: 10,
        value: oneValue
    });

    two.slider({
        min: 0,
        max: 10,
        value: twoValue
    });

    three.slider({
        min: 0,
        max: 10,
        value: threeValue
    });

    one.on('change slide', function(e, ui) {
        oneValue = ui.value;
        oneTest();
    });

    two.on('change slide', function(e, ui) {
        twoValue = ui.value;
        twoTest();
    });

    three.on('change slide', function(e, ui) {
        threeValue = ui.value;
        threeTest();
    });

    function oneTest() {
        console.log('oneTest');
        if (oneValue < twoValue) {
            two.slider('value', oneValue);
        }
    }
    function twoTest() {
        console.log('twoTest');
        if (twoValue < threeValue) {
            three.slider('value', twoValue);
        }
        if (twoValue > oneValue) {
            one.slider('value', twoValue);
        }
    }
    function threeTest() {
        console.log('threeTest');
        if (threeValue > twoValue) {
            two.slider('value', threeValue);
        }
    }
}); 
```

Fiddle 在这里，[http://jsfiddle.net/RAGvr/4/](http://jsfiddle.net/RAGvr/4/)，但根本不像第一个那样工作。如果我移动滑块 3，则不会触发其他滑块的回调。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:12:33.080

[您将事件命名错误](http://api.jqueryui.com/slider/#event-change)。

名称是`slidechange`：

```
one.on('slidechange', function(e, ui) {
    oneValue = ui.value;
    oneTest();
}); 
```

[演示](http://jsfiddle.net/RAGvr/6/)

您应该查看[jQuery UI 滑块的 API](http://api.jqueryui.com/slider/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:14:50.810

当您在配置之外使用 jquery ui 小部件事件时，您需要预先添加小部件名称

```
one.on('sliderchange slide', function(e, ui) {
    oneValue = ui.value;
    oneTest();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:31:47.103

你们都部分正确，我非常感谢您的快速回答。`slide`监听和事件的正确方法`change`应该是：

```
one.on('slide slidechange', function(e, ui) {
// code here
}); 
```

尽管正如@Arun 所建议的那样，这些事件似乎`sliderchange`并`sliderslide`没有被解雇。

这是更新事件名称的小提琴：http: [//jsfiddle.net/RAGvr/7/](http://jsfiddle.net/RAGvr/7/)。

# php - PHP动态字符串更新参考

> ID：16062349
> 
> 赞同：2
> 
> 时间：2013-04-17T14:09:58.107
> 
> 标签：php, string, pointers, reference

有没有办法做到这一点：

```
$myVar = 2;
$str = "I'm number:".$myVar;
$myVar = 3;

echo $str; 
```

输出将是：`"I'm number: 3";`

我想要一个字符串，它的一部分就像一个指针，它的值将通过对引用变量的最后修改来设置。

例如，即使我这样做：

```
 $myStr = "hi";
 $myStrReference = &$myStr;
 $dynamicStr = "bye ".$myStrReference;
 $myStr = "bye";
 echo $dynamicStr; 
```

这将输出“ ”，但由于上次更改，`bye hi`我希望它是“ ”。`bye bye`我认为问题在于将指针连接到字符串时，指针的值是使用的值。因此，无法使用连接后设置的值输出字符串。

有任何想法吗？

**更新**：`$dynamicStr`将被附加到 a`$biggerString`并且最后`$finalResult`( `$biggerString+$dynamicStr`) 将回显给用户。因此，我唯一的选择是做某种`echo eval($finalResult)`有`$finalResult`内部`echo($dynamicStr)`和`$dynamicStr='$myStr'`（如劳森建议）的地方，对吧？

更新：

```
$myVar = 2;
$str = function() use (&$myVar) {
    return "I'm number $myVar";
};

$finalStr = "hi ".$str();
$myVar = 3;
echo $finalStr; 
```

我希望这个输出：“嗨，我是 3 号”而不是“嗨，我是 2 号”......但事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:12:04.327

这里的问题是，一旦为变量分配了一个值（在您的情况下是一个字符串），它的值在再次修改之前不会改变。

您可以使用匿名函数来完成类似的事情：

```
$myVar = 2;
$str = function() use (&$myVar) {
    return "I'm number $myVar";
};

echo $str(); // I'm number 2
$myVar = 3;
echo $str(); // I'm number 3 
```

当函数被分配给它时，可以从内部访问`$str`变量。`$myVar`在任何时间点调用它都将使用 的最新值`$myVar`。

**更新**

关于你的最后一个问题，如果你想进一步扩展字符串，你可以创建另一个包装器：

```
$myVar = 2;
$str = function() use (&$myVar) {
    return "I'm number $myVar";
};

$finalStr = function($str) {
    return "hi " . $str();
}

$myVar = 3;

echo $finalStr($str); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T14:20:45.220

这比我以前简单一点。单引号告诉 PHP 不要将 $myVar 转换为值。

```
<?php
$myVar = 2;
$str = 'I\'m number: $myVar';
$myVar = 3;

echo eval("echo(\"$str\");");
?> 
```

# ios - 在 UIImagePicker Controller 上提供一个选择区域来单独捕获选择的区域？

> ID：16062350
> 
> 赞同：0
> 
> 时间：2013-04-17T14:09:58.730
> 
> 标签：ios, user-interface, uiimageview, uiimagepickercontroller, crop

在谷歌上搜索了一整天后，我无法找到任何适合我需要的模型。其实我的需要是

1.提供一个选择区域框，`UIImagePicker`如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/BJ6bc.jpg)

2.用户可以`resize`选择区域，宽度和高度都可以修改。

3.一旦选定区域，如果用户按下捕获按钮，则应单独捕获所选部分。

是否可以实现上述所有功能？请推荐一些好的教程。

还有`UIImageView`.如果我从照片库中获取图像，我将显示所选图像。在这里我想提供用户可以选择图像的一部分并在使用之前对其进行裁剪。

请提出一些解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:34:31.980

我不会给你完整的答案，只是一些起点：

*   使用我在评论中指出的[库。](http://github.com/spoletto/SPUserResizableView)
*   实现委托，因为它返回你想要的：

> 然后实现以下委托方法。
> 
> *   (void)userResizableViewDidBeginEditing:(SPUserResizableView *)userResizableView;
> *   (void)userResizableViewDidEndEditing:(SPUserResizableView *)userResizableView

# git - 参考 git 中的上一个/下一个提交？

> ID：16062358
> 
> 赞同：27
> 
> 时间：2013-04-17T14:10:15.033
> 
> 标签：git, commit

我见过 git 命令使用诸如 之类的语法`HEAD~`，但我无法在 Git[参考手册](http://git-scm.com/docs)中找到这种语法。

这是我所理解的：`<commit>~<n>`指的是提交*<n>*步骤早于*<commit>*（其中*<n>*是一个整数），并且`commit~`简单地表示相同并且*<n>*隐式为一。

现在，这是正确的吗？在那种情况下，这总是有效吗？如果*<commit>*是两个分支之间合并的结果，那么提交将`<commit>~`引用哪个呢？是否有一些相应的语法来引用下一个提交或稍后的提交*<n>步骤？*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T14:31:09.730

[在 Pro Git 中的 Acenstry References](http://git-scm.com/book/en/Git-Tools-Revision-Selection#Ancestry-References)一章中，您对它的工作原理有一个非常清楚的解释：

*   `~`用于获取第一个父级。
*   `^`可用于获取其他父母（`^2`例如，用于合并）。

但是你没有一个简单的方法来引用下一个提交，即使[有更复杂的方法](https://stackoverflow.com/questions/2263674/how-do-i-find-the-next-commit-in-git)来获取它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-22T01:46:50.007

简单地回答标题中的问题（因为这就是让我从谷歌来到这里的原因）：

要签出上一个提交：

```
git checkout HEAD^ 
```

签出下一个提交（假设没有分支）：

```
git checkout `git log --reverse --ancestry-path HEAD..master | head -n 1 | cut -d \  -f 2` 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-29T20:09:59.843

受@cexbrayat 回答的启发，我发现这样想很有用：

如何引用提交的祖先中的某些内容，其中提交可以有多个父项：

*   `^n`指定哪个父级

*   `~n`指定哪一代

两者都默认为一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-19T20:10:29.763

要引用分支上的最新提交，您还可以使用`@~1`

```
git checkout @~1 
```

# c# - 任务在一天中占用的小时数的算法

> ID：16062359
> 
> 赞同：8
> 
> 时间：2013-04-17T14:10:14.827
> 
> 标签：c#, asp.net, algorithm

```
Edit:
Steps:
Start at target day. 
Then move backwards until no events are carried over from another day.
From there, start counting hours, and keep track of carried over hours. 
Day cannot last more than ActualDayLength()
Then, once you know that, work your way back to target and then calculate actual occupied hours. 
```

我有放在日历上的任务：

![在此处输入图像描述](https://i.stack.imgur.com/kLrkv.png)

现在让我给出一些背景信息：每天在这里“持续”7.5 小时。但是我使用了一个名为 DayHours 的变量（现在是 7.5）。（DayHours 也用于锁定时间，这将在下面描述）。

此日历的目标是为员工安排 7.5 小时的工作日。

我需要的是一种算法，它可以正确地告诉我一天实际占用了多少小时。

这看起来很简单，但实际上是相当递归的。

首先，一些笔记。您会注意到案例经理在 14 小时时可以在 7.5 小时的 2 天中完成，剩下 1 小时。它被延长到 3 天，因为 1\. 计划是 5 小时长，以及 2\. 直到当天的前置任务完成后才能开始。

还有锁定时间的概念。紫色是锁定时间。这是一个 10 小时的锁定时间块。这意味着，在 12 日，我只能做 (7.5 - 7.5) 小时的工作，而周一也只能做 (7.5 - 2.5) 小时的工作。

我已经有一个函数来计算实际一天的可用时间来解决这个问题：

```
public decimal GetActualDayLength(DateTime day, Schedule s)
{
    var e = Schedules.GetAllWithElement();
    var t = Timeless(day);
    var locked = from p in e
                 where p.EmployeID == s.EmployeID &&
                 ((p.DateTo.Value.Date) >= t &&
                 Timeless(p.DateFrom.Value) <= t) &&
                 p.IsLocked
                 select p;

    decimal hrs = 0.0M;

    foreach (var c in locked)
    {
        if (c.Hours.Value <= DaysManager.GetDayHours())
            hrs += c.Hours.Value;
        else if (Timeless(c.DateTo.Value) != t)
            hrs += DaysManager.GetDayHours();
        else
        {
            if (c.Hours.Value % DaysManager.GetDayHours() > 0)
                hrs += c.Hours.Value % DaysManager.GetDayHours();
            else
                hrs += DaysManager.GetDayHours();
        }
    }

    return DaysManager.GetDayHours() - hrs;
} 
```

还有携带时间的概念。

**这是一个例子：**

![在此处输入图像描述](https://i.stack.imgur.com/rnkhu.png)

现在让我们以 18 号星期四为例（18 号有 1 个案例）：

要找到该员工这一天的小时数，我们需要首先查看当天开始、结束或落入当天的任务。

我不知道我在 18 号可以做多少小时，因为那天结束的任务可能有携带时间。所以我去看看执行单元测试的开始日。我也想不通，因为 NWDM 当天完成，它可能需要几个小时。

所以现在我去评估 NWDM。啊，这一天没有结束，所以我知道日程安排需要 5 / 7.5 小时。

所以我继续前进，每天通过的时间增加 7.5 小时。

然后我到了 NWDM 的最后一天。在那之前，我工作了 5 + 7.5 + 7.5 + 7.5 小时，

所以我投入了 27.5 小时，所以我会在 22 日投入 (30 - 27.5 = 2.5h) 来完成它。所以我还有 5 个小时的时间来进行执行单元测试。

这意味着我需要 1.5 小时才能完成它。现在案例是 1 小时。

如果案例是 7.5 - 1.5 或更多，我们说这一天已满并返回 DayHours。

因此，我们完成了。返回值为 1.5 + 1 = 2.5。

该函数应该看起来有点像这样：

```
public decimal GetHours(IEnumerable<Schedule> s, DateTime today)
{
    DateTime t = Timeless(today);

    decimal hrs = 0;
    foreach (Schedule c in s)
    {
        if (c.Hours.Value <= DaysManager.GetDayHours())
            hrs += c.Hours.Value;
        else if (Timeless(c.DateTo.Value) != t)
            hrs += DaysManager.GetDayHours();
        else
        {
            if (c.Hours.Value % DaysManager.GetDayHours() > 0)
                hrs += c.Hours.Value % DaysManager.GetDayHours();
            else
                hrs += DaysManager.GetDayHours();
        }
    }
    return hrs;
} 
```

要获取在给定日期内开始、结束或落下的事件，我使用：

```
public IEnumerable<Schedule> GetAllToday(DateTime date, int employeeID, Schedule current)
{
    DateTime t = Timeless(date);
    int sid = current == null ? -1 : current.ScheduleID;

    var e = Schedules.GetAllWithElement();
    return from p in e
           where (((Timeless(p.DateTo.Value) >= t &&
           Timeless(p.DateFrom.Value) <= t &&
           p.EmployeID == employeeID) &&
           (p.IsLocked || (Timeless(p.DateFrom.Value) < t &&
           (sid == -1 ? true : Timeless(p.DateFrom.Value) < current.DateFrom.Value)) ||
           bumpedList.Any(d => d.ScheduleID == p.ScheduleID)) &&
           p.ScheduleID != sid) ||
           ((Timeless(p.DateTo.Value) >= t &&
           (Timeless(p.DateFrom.Value) == t || (Timeless(p.DateFrom.Value) < t &&
           (sid == -1 ? true : Timeless(p.DateFrom.Value) > current.DateFrom.Value))) &&
           p.EmployeID == employeeID) &&
           !p.IsLocked &&
           !bumpedList.Any(d => d.ScheduleID == p.ScheduleID) &&
           p.ScheduleID != sid)) &&
           p.ScheduleID != sid
           select p;
        } 
```

附表有以下相关字段：

```
DateFrom
DateTo
Hours
EmployeeID 
```

时间表看起来像：

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Schedule")]
public partial class Schedule : INotifyPropertyChanging, INotifyPropertyChanged
{
    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);
    private int _ScheduleID;
    private System.Nullable<System.DateTime> _DateFrom;
    private System.Nullable<decimal> _Hours;
    private System.Nullable<int> _EmployeID;
    private System.Nullable<int> _RecurringID;
    private System.Nullable<int> _Priority;
    private System.Nullable<System.DateTime> _DateTo;
    private bool _IsLocked;
    private System.Nullable<int> _BumpPriority;
    private EntitySet<Case> _Cases;
    private EntitySet<Project> _Projects;
    private EntitySet<Task> _Tasks;
    private EntitySet<Task> _Tasks1;
    private EntityRef<Employee> _Employee;
    private EntityRef<Recurring> _Recurring;

    #region Extensibility Method Definitions
    partial void OnLoaded();
    partial void OnValidate(System.Data.Linq.ChangeAction action);
    partial void OnCreated();
    partial void OnScheduleIDChanging(int value);
    partial void OnScheduleIDChanged();
    partial void OnDateFromChanging(System.Nullable<System.DateTime> value);
    partial void OnDateFromChanged();
    partial void OnHoursChanging(System.Nullable<decimal> value);
    partial void OnHoursChanged();
    partial void OnEmployeIDChanging(System.Nullable<int> value);
    partial void OnEmployeIDChanged();
    partial void OnRecurringIDChanging(System.Nullable<int> value);
    partial void OnRecurringIDChanged();
    partial void OnPriorityChanging(System.Nullable<int> value);
    partial void OnPriorityChanged();
    partial void OnDateToChanging(System.Nullable<System.DateTime> value);
    partial void OnDateToChanged();
    partial void OnIsLockedChanging(bool value);
    partial void OnIsLockedChanged();
    partial void OnBumpPriorityChanging(System.Nullable<int> value);
    partial void OnBumpPriorityChanged();
    #endregion

    public Schedule()
    {
        this._Cases = new EntitySet<Case>(new Action<Case>(this.attach_Cases), new Action<Case>(this.detach_Cases));
        this._Projects = new EntitySet<Project>(new Action<Project>(this.attach_Projects), new Action<Project>(this.detach_Projects));
        this._Tasks = new EntitySet<Task>(new Action<Task>(this.attach_Tasks), new Action<Task>(this.detach_Tasks));
        this._Tasks1 = new EntitySet<Task>(new Action<Task>(this.attach_Tasks1), new Action<Task>(this.detach_Tasks1));
        this._Employee = default(EntityRef<Employee>);
        this._Recurring = default(EntityRef<Recurring>);
        OnCreated();
    }
} 
```

任何人都可以帮助我开发一种可以做到这一点的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T12:51:35.177

尽管你的问题很复杂，解释得也不是很清楚，但我会尽力回答。或者更准确地暗示你应该如何分解和解决它（或者我将如何解决它）。

> 我需要的是一种算法，它可以正确地告诉我一天实际占用了多少小时。

起初我看不出真正的问题，以防万一你有`DateTo`可用的价值`Schedule`。除非它等于`DateFrom`+ `Hours`。在这种情况下，它并不反映真实`DateTo`但有些无关紧要的价值。

我假设 any`Schedule`是由开始时间`DateFrom`和持续时间定义的`Hours`。`DateTo`是计算值和高效计算是问题的真正核心。

所以我认为这个功能在任何时间范围内都可以使用时间非常简单。用伪代码说话：

```
TimeSpan GetAvailableTime(DateRange range)
    var tasks = FindIntersectingTasks(range)

    ' now the algorithm which finds available hours on given collection 
    ' of tasks
    ' firstly - we need to determine relevant ranges which intersect 
    '           with given range
    var occupiedRanges = New List<DateRange>(tasks.Count)
    for each task in tasks
        var intersection = range.Intersect(
            new DateRange(task.DateFrom, task.DateTo)
        )

        if Not intersection.IsEmpty
            occupiedRanges.Add(intersection)
        end 
    end 

    ' secondly - sort ranges by start so we can easily merge them
    ranges.Sort(range => range.DateFrom)
    var mergedOccupiedRanges = new List(DateRange)

    ' thirdly - merge ranges so that we have collection with 
    '           non-overlaping ranges (and also sorted)
    for each occupiedRange in occupiedRanges
        ' range may merge only it there is non-empty intersection
        if occupiedRange.CanMerge(mergedOccupiedRanges.Last)
             var mergedRange = range.Merge(mergedOccupiedRanges.Last)
             mergedOccupiedRanges.RemoveLast()
             mergedOccupiedRanges.Add(mergedRange)
        end
    end 

    ' fourthly - it is simple now to determine available/occupied hours
    var timeAvailable = range.Duration
    for each mergedRange in mergedOccupiedRanges
        timeAvailable -= mergedRange.Duration
    end

    return timeAvailable
end

IEnumerable<Schedule> FindIntersectingTasks(DateRange range)
    return From schedule In allEvents
           Where schedule.DateFrom <= range.To 
               And schedule.DateTo >= range.From
end 
```

您可能需要一些调整，因为`DateTime`预计正常的 24 小时工作日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T17:22:13.243

这不能回答确切的问题，但我建议通过使用一些辅助方法扩展您的类（对象）来简化您的逻辑，例如返回占用天数列表的方法/属性。如果您无法访问这些类（即它们不是来自您的代码库） - 然后创建新类并映射到这些类。此外 - .NET DateTime 类具有一些非常有用的属性和枚举，例如“DayOfWeek”和“TimeOfDay”，它们可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:48:43.727

像这样：

1.  创建有空闲时间的日期列表。
2.  对于列表中的每个项目，添加可用于您的任务的最长时间。
3.  如果您的项目所需的时间达到 0，请停止添加块。

# django - Django 1.5 Geodjango 点场作为管理内联中的地图

> ID：16062360
> 
> 赞同：2
> 
> 时间：2013-04-17T14:10:18.343
> 
> 标签：django, geodjango

我有一个模型

```
from django.contrib.gis.db import models
class Venue(models.Model):
    event = models.ForeignKey(Event, verbose_name=_('Event') )
    name = models.CharField(max_length=32, unique=True)
    geometry = models.PointField(srid=4326)
    objects = models.GeoManager() 
```

现在我正在尝试将几何字段显示为内联管理类中的地图

```
class VenueInline(admin.TabularInline):
    model = Venue
    extra = 1 
```

但是 django 不显示地图，而是显示文本区域。在内联中显示地图的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:01:23.947

您可以使用[django-location-field](https://github.com/codasus/django-location-field)：

```
from django.contrib.gis.db import models
from location_field.models import LocationField

class Venue(models.Model):
    event = models.ForeignKey(Event, verbose_name=_('Event') )
    name = models.CharField(max_length=32, unique=True)
    geometry = LocationField(srid=4326)
    objects = models.GeoManager() 
```

有关更多示例，请查看 example_project [models.py](https://github.com/codasus/django-location-field/blob/master/example_project/example_project/models.py)。

# titanium - 钛合金：从不同的控制器访问 UI？

> ID：16062363
> 
> 赞同：6
> 
> 时间：2013-04-17T14:10:30.000
> 
> 标签：titanium, appcelerator

我似乎无法更新 Titanium Appcelerator Alloy 中的对象，

我基本上希望能够将表行添加到我当前所在的不同控制器/视图中的表中.....希望下面能更好地描述这一点：s

篮子.xml

```
<Alloy>
    <Window id="basketWindow" class="container">
        <TableView id="basketTable" />
        <Button id="addItemButton" onClick="addItem">Add Item</Button>
    </Window>
</Alloy> 
```

篮子.js

```
function addItem()
{
    var itemList = Alloy.createController('item_list');

    itemList.getView().open();
} 
```

item_list.xml

```
<Alloy>
    <Window id="itemListWindow" class="container">
        <TableView id="itemListTable">
            <TableViewRow id="item1" className="item" onClick="addItemToBasket">
                Test Item
            </TableViewRow>
        </TableView>
    </Window>
</Alloy> 
```

item_list.js

```
function addItemToBasket()
{
    var row = Ti.UI.createTableViewRow({title: 'Test Item'});

    // Here i would ideally want to put something like $.basketTable.append(row);
    // But nothing happens, im guessing it cant find $.basketTable as its in a different controller?

} 
```

有人知道吗？

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T03:27:15.473

一个简单易用的解决方案是在您将商品添加到购物篮时触发应用程序范围的事件：

```
function addItemToBasket() {
    Ti.App.fireEvent("app:itemAddedToBasket", {
       title : "Test Item", 
       otherAttribute : "Value"
    });
} 
```

然后在某处的篮子控制器中监听事件，并添加表格行：

```
// inside basket.js
Ti.App.addEventListener("app:itemAddedToBasket", function(e) {
    // object 'e' has all the row information we need to create the row
    var row = Ti.UI.createTableViewRow({
        title: e.title, 
        otherAttribute: e.otherAttribute
    });
    // Now append it to the table
    $.basketTable.append(row);
}); 
```

# c# - 如何使用 protobuf 克隆整数

> ID：16062364
> 
> 赞同：1
> 
> 时间：2013-04-17T14:10:30.400
> 
> 标签：c#, protobuf-net

我在克隆整数时遇到问题，这是我使用的虚拟类

```
[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
public class Ac
{

    private int _ao = -1;

    public int AO
    {
        get
        {
            return _ao;
        }
        set
        {
            _ao = value;
        }
    }
}; 
```

当我在 AO 为零时克隆它时，当我尝试添加默认属性时，我得到 -1 的值，我得到正确的项目，但在某些属性中，当它保持为 -1 时，我得到 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:45:35.190

这与默认值有关。由于久违的原因，protobuf-net 在 v1.0 中假设默认为零。您可以在类型模型上关闭它，但更简单的选择是通过添加`[DefaultValue(-1)]`到字段来告诉它默认值为 -1。您也可以在反序列化期间禁用构造函数 ( `[ProtoContract(SkipConstructor=true)]`，但我个人觉得这不太令人愉快。

关闭零默认行为可能更广泛。

# javascript - JavaScript：未捕获的引用错误：未定义 erik

> ID：16062366
> 
> 赞同：2
> 
> 时间：2013-04-17T14:10:35.153
> 
> 标签：javascript, syntax-error, referenceerror

我正在编写一个小实用程序，可以让我更轻松地使用画布。但是，当我运行代码时，我得到了错误`Uncaught SyntaxError: Unexpected token = (erik.core.js:5)` 和`Uncaught ReferenceError: erik is not defined (test.html:14( (anonymous function)`.

这是我的 HTML 代码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ErikJs Unit Testing</title>
    <script src="erik.core.js"></script>
    ...
</head>
<body>
    ...
    <canvas id="myCanvas" width="500" height="400"></canvas>

    <script>
    var ctx = erik.initCanvas("#myCanvas");

        ctx.beginPath();
        ctx.moveTo(100, 200);
        ctx.lineTo(200, 300);
        ctx.stroke();
    </script>
</body>
</html> 
```

和 JavaScript (erik.core.js)：

```
var Erik = function () {    
    this.author = "Erik Royall";
};

Erik.prototype.initCanvas = function ( element, y = '2d' ) {
    this.canvas = document.querySelectorAll( element );
    this.context = canvas.getContext( y );
    return this.context;
};

var erik = new Erik(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:19:32.037

JavaScript 没有默认参数值。`y = '2d'`从函数声明中删除。

另请参阅[为 JavaScript 函数设置默认参数值](https://stackoverflow.com/questions/894860/set-a-default-parameter-value-for-a-javascript-function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T17:44:52.460

除了 johusman 的回答之外，默认参数现在是 ECMAScript 6 的一部分，这意味着这在支持此功能的 JS 引擎上应该是完全有效的。对于尚不支持默认参数的引擎，[esnext](https://github.com/esnext)项目提供了一个转译器，可从项目[GitHub 页面](https://github.com/esnext/es6-default-params)获得。

# javascript - Javascript在HTML选择上显示div

> ID：16062367
> 
> 赞同：2
> 
> 时间：2013-04-17T14:10:40.057
> 
> 标签：javascript

我一直在使用 javascript 创建一个下拉列表，该列表根据选择的选项显示一个 div。

所有代码都可以在这里看到：

[http://jsfiddle.net/nmdTy/](http://jsfiddle.net/nmdTy/)

```
var select = document.getElementById('test'),
onChange = function(event) {
    var shown = this.options[this.selectedIndex].value == 1;
    document.getElementById('hidden_div').style.display = shown ? 'block' : 'none';
}; 
```

我想知道如何简化此代码并删除重复 - 也许是某种循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:21:14.100

您不需要两个事件处理程序，您可以使用变量（如下所示）来确定哪些`div`需要显示或隐藏。

```
var select = document.getElementById('test'), onChange = function(event) {
    var div1 = 'hidden_div';
    var div2 = 'hidden_div2';

    var index1 = this.options[this.selectedIndex].value == 1;
    var index2 = this.options[this.selectedIndex].value == 2;

    if(index1 || index2){
        document.getElementById(div1).style.display = index1 ? 'block' : 'none';
        document.getElementById(div2).style.display = index2 ? 'block' : 'none';
    }
    else{
        document.getElementById(div1).style.display = 'none';
        document.getElementById(div2).style.display = 'none';
    }
};

// attach event handler
if (window.addEventListener) {
    select.addEventListener('change', onChange, false);
} else {
    // of course, IE < 9 needs special treatment
    select.attachEvent('onchange', function() {
        onChange.apply(select, arguments);
    });
} 
```

# [工作小提琴](http://jsfiddle.net/nmdTy/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:29:03.110

另一个代码：

```
var select = document.getElementById('test'),
    nbItems = 2,
    onChange = function (event) {
        var val = this.options[this.selectedIndex].value;

        for (var i = 1; i <= nbItems; i++) {
            document.getElementById('hidden_div' + i).style.display = val == i ? 'block' : 'none';
        }
    }; 
```

[http://jsfiddle.net/nmdTy/11/](http://jsfiddle.net/nmdTy/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:21:55.847

*我不太确定“重复*”是什么意思，但我的猜测是，您不想键入`div`要隐藏/显示的每个 s。
这种任务可能有多种方法。最普遍的是将`div`id 放在一个单独的数组中。然后，您可以隐藏除选定 div 之外的所有 div。

```
var divs = ["hidden_div1", "special_hidden", "one_more_hidden"];  
var select = document.getElementById('test');
var onchange = function(event) {   //Use var!
    var shown = this.options[this.selectedIndex].value;
    for(var i=0; i<window.divs.length; i++) {   //It would be more effective to save last shown div in a variable, but I've chosen this aproach with loop
        var div = document.getElementById(window.divs[i]);
        if(div!=null) {
          if(i==shown)  
            div.style.display="block";
          else
            div.style.display="none";
        }
    }
};
select.addEventListener("change", onchange);  //Could type the function right here, without using "onchange" variable 
```

在我的代码中，`<option>`值表示数组中的索引。这是[jsFiddle](http://jsfiddle.net/Darker/KpdPx/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:22:20.770

在 IE<9 中委派更改事件是一件痛苦的事情。有可能，[检查这个问题，看看它是如何完成的](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)，但这不是你所说的优雅。

但是您的代码不会委托事件，因此只需将处理程序直接附加到`onload`事件就可以解决问题（并且它与 X 浏览器兼容）：

```
document.getElementById('test').onchange = function(e)
{
    e = e || window.event;//the only IE headache
    var shown = this.options[this.selectedIndex].value == 1;
    document.getElementById('hidden_div').style.display = shown ? 'block' : 'none';
    //^^ could keep a reference to this in a closure
}; 
```

完整的代码（`onload`对隐藏的 div 进行闭包引用*并* [防止 ie 中的内存泄漏](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)）应如下所示：

```
var winLoad = function(e)
{
    var hiddenDiv = document.getElementById('hidden_div');
    document.getElementById('test').onchange = function(e)
    {
        var shown = !!(this.option[this.selectedIndex].value == 1);//to be safe, coerce to bool
        hiddenDiv.style.display = shown ? 'block' : 'none';
    };
    if (window.addEventListener)
    {
        return window.removeEventListener('load',winLoad,false);
    }
    return window.detachEvent('onload',winLoad);
};
if (window.addEventListener)
{
    window.addEventListener('load',winLoad,false);
}
else
{
    window.attachEvent('onload',winLoad);
} 
```

这应该在所有主要浏览器上都可以正常工作，甚至是 IE7（也可能是 IE6）

# jboss-arquillian - 如何将 Glassfish 的 resourcesXml 指定为资源本身，而不是本地文件？

> ID：16062370
> 
> 赞同：1
> 
> 时间：2013-04-17T14:10:44.477
> 
> 标签：jboss-arquillian

我想将我所有的配置文件（arquillian.xml、glassfish-resources.xml、test-persistence.xml）放在一个库中，并在我想在项目中运行测试时引用它。但似乎 resourceXml 只允许文件路径而不是类路径：变量。

有没有办法做到这一点？

我的配置目前基于 arquillian-persistence-tutorial 示例项目。我实际上没有需要的特殊配置。只是一个内存数据库等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:40:07.957

我通过扩展 Arquillian 类来修复它，并在任何测试之前将资源写入本地文件（在目标文件夹中）。

现在在域项目中，我只需要在单元测试中执行此操作：

```
public class MyEntityRepositoryImplTest extends BaseArquillianTest {

  @Deployment
  public static Archive<?> createDeployment() {
    return create().//
        addClass(MyEntityRepositoryImpl.class).//
        addClass(MyEntityDaoImpl.class).//
        addClass(MockSomeRepositoryImpl.class).//
        addClass(MyEntityJpa.class);
  }

  @EJB
  private MyEntityRepository myEntityRepository;

  @Test 
  public void mMytest () {
  } 
```

# c# - 有条件地在 C# ASP.net Webforms 中包含 css

> ID：16062384
> 
> 赞同：2
> 
> 时间：2013-04-17T14:11:41.240
> 
> 标签：c#, asp.net, css, internet-explorer, webforms

我试图根据用户使用的浏览器有条件地包含一个 css 文件。而且我已经能够让它以一种方式工作，但不是我想要的方式，因为它需要一个额外的样式表。工作方式，在我的 Site.Master 文件中，我包含了 ie8 的样式表。

```
<link href="~/Styles/ie8.css" rel="Stylesheet" type="text/css" /> 
```

然后在 Site.Master.cs 中的`Page_Load`函数。

```
 if (!(browser.Type == "IE8" ||
        browser.Type == "IE7" ||
        browser.Type == "IE6" ||
        browser.Type == "IE5"))
    {
        Page.Header.Controls.Add(new LiteralControl(
            "<link rel=\" stylesheet\" type=\"text/css\" href=\"" + ResolveUrl("~/Styles/ie.css") + "\" />"));
    } 
```

这工作并且css是正确的并且在ie10中使用开发者工具和兼容性我可以看到它包含正确的css。但是，如果我将代码更改为应该等效的代码。它不起作用。Site.Master：

```
<link href="~/Styles/ie.css" rel="Stylesheet" type="text/css" /> 
```

站点.Master.cs

```
 if ((browser.Type == "IE8" ||
        browser.Type == "IE7" ||
        browser.Type == "IE6" ||
        browser.Type == "IE5"))
    {
        Page.Header.Controls.Add(new LiteralControl(
            "<link rel=\" stylesheet\" type=\"text/css\" href=\"" + ResolveUrl("~/Styles/ie8.css") + "\" />"));
    } 
```

如果我在 ie10 的兼容模式下放置断点，`Page.Header.Controls.Add`我可以看到该函数被调用。但是当我去开发工具并寻找使用 ie8.css 中定义的类的元素时，它们并不存在，就像它从未包含在内一样。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:20:23.907

[您应该使用条件注释](http://www.quirksmode.org/css/condcom.html)，而不是检查 IE 服务器端：

```
<!--[if lte IE 8]><link href="ie8.css" rel="Stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 7]><link href="ie.css" rel="Stylesheet" type="text/css" /><![endif]--> 
```

# ruby - 如何根据特定标签获取参数值？

> ID：16062388
> 
> 赞同：0
> 
> 时间：2013-04-17T14:11:47.520
> 
> 标签：ruby, arrays, methods, sinatra

我正在解析 JSON 并将其传递为`fields_array`呈现`erb`模板。这是一个 Sinatra 应用程序。

我有：

```
private

def fields_params
  # example of parsed JSON, Company Name sometimes is Field6 but sometimes Field3
  [["Company Name", "Field6"], ["Email", "Field5"]]  
end

def company_name
  # I want to return company name from params[company_field_id]
  # Maybe something like:
  id = fields_params.select{|field| field[0] == "Company Name" }.flatten[1]
  params[id]
end

def fields_array
  fields_params.collect do |label, param_id| 
    { label: label, value: params[param_id] } if params[param_id]
  end
end 
```

我应该如何`company_name`获得`params`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:20:30.607

使用[查找方法](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)

```
fields_params.find{|x| x.first == "Company Name"}.last # => "Field6" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:25:47.503

`[["Company Name", "Field6"], ["Email", "Field5"]]`是一种常见的数据模式，一旦你认识到它，你就会知道它很容易被强制转换为哈希：

```
hash = Hash[[["Company Name", "Field6"], ["Email", "Field5"]]] 
```

这是它现在的样子：

```
{
    "公司名称" => "字段6",
           “电子邮件” => “字段 5”
}

```

那时，很容易获得价值：

```
hash['Company Name']
=> "Field6" 
```

因此，我将修改您的代码以返回哈希值，从而更容易检索值：

```
定义字段参数
  # 解析的 JSON 示例，公司名称有时是 Field6，有时是 Field3
  哈希[[[“公司名称”，“字段6”]，[“电子邮件”，“字段5”]]]
结尾

```

很多时候，我看到的 JSON 在解析后已经会产生某种哈希。如果没有看到你的输入 JSON，我不能肯定地说，但它可能已经是那种格式，你正在做的事情是将它变成一个数组数组，这就是哈希在运行时的样子`map`or `collect`or has已经`to_a`申请了。

# sql - 针对不同输入元素的通用 SQL 查询

> ID：16062391
> 
> 赞同：0
> 
> 时间：2013-04-17T14:11:54.577
> 
> 标签：sql, oracle

我对以下抽象示例上下文有一个 SQL 查询问题：我的 sql 查询有 2 个不同的输入数据，定义为“MainElement”，其中一个的键为 123，另一个主元素的键为 789。

此外，我有一个名为**Relation**的表`pk`，其中包含`FirstElement`、`SecondElement`和`ThirdElement`。

此外，还有一个名为**Props**`pk`的表，其中包含`name`和列`valueString`。关于此上下文的特殊功能是 Props 中的 column`name`定义**了**另外 2 个列，称为`4thElement`和`5thElement`table **Relation**作为一行，其值位于 column `valueString`。

```
|pk | 1stElement | 2ndElement | 3rdElement |
|abc|-----123----|-----456----|-----null---|
|def|-----789----|-----101112-|---131415---|

|Pk | Name | ValueString |
|def|4thElement|161718---|
|def|5thElement|ghi------| 
```

如您所见，`MainElement` **789在****Props**`4thElement`中具有and的值，但`5thElement`在**Props中**`MainElement` **123**没有任何值。

 **我需要的是一个带有输入值的通用 SQL 查询，例如 123 或 789 ，它返回两个主要元素的结果，与 123 在**Props**中没有任何值`1stElement`的事实无关。`MainElement`

 **样本结果：

```
|1stElement | 2ndElement | 3rdElement | 4thElement | 5thElement |
|123--------|------456---|-----null---|---null-----|----null----|
|789--------|----101112--|---131415---|---161718---|----ghi-----| 
```

我正在使用**Oracle SQL Developer**。

```
Select 
rel.1stElement,
....
From 
Relation rel,
Props pro,
Where 
? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:25:47.100

这应该可以完成工作，这通常是您需要的数据透视查询：

```
SELECT rel.pk, rel.1stElement, rel.2ndElement, rel.3rdElement 
     , MAX(CASE WHEN pro.Name = '4thElement' 
           THEN pro.ValueString 
           ELSE NULL
           END) as 4thElement
     , MAX(CASE WHEN pro.Name = '5thElement' 
           THEN pro.ValueString
           ELSE NULL
           END) as 5thElement
FROM Relation rel 
    LEFT OUTER JOIN Props pro 
        ON rel.pk = pro.pk
GROUP BY rel.pk, rel.1stElement, rel.2ndElement, rel.3rdElement 
```****

# android - 数字时钟wiget不在TextViews中显示时间

> ID：16062397
> 
> 赞同：1
> 
> 时间：2013-04-17T14:12:00.273
> 
> 标签：android, widget, textview, clock, simpledateformat

我对java和android编程很陌生。到目前为止，它一直很有趣！我制作了一个可以工作的数字时钟小部件，只是它没有更新时间。经过一番研究，我用不同的方法重写了代码。现在，我没有时间出现在我的 TextView 布局中。谁能帮我弄清楚问题是什么？

这是我的整个 ClockWidgetProvider.java

```
package com.acsoft.bsiclock;

import java.text.DateFormat;
import java.text.SimpleDateFormat;

import java.util.Date;

import android.app.Service;

import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;

import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;

import android.os.IBinder;

import android.widget.RemoteViews;

import com.acsoft.bsiclock.R;

/**
 * The ClockWidgetProvider class is the widget place holder for the ClockWidget.
 */
public class ClockWidgetProvider extends AppWidgetProvider {
    /**
     * Inner class representing the update service.
     */
    public static class ClockUpdateService extends Service {
        private static final String ACTION_UPDATE =
            "com.cmwmobile.android.samples.clock.action.UPDATE";

        private final static IntentFilter intentFilter;

        static {
            intentFilter = new IntentFilter();
            intentFilter.addAction(Intent.ACTION_TIME_TICK);
            intentFilter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
            intentFilter.addAction(Intent.ACTION_TIME_CHANGED);
            intentFilter.addAction(ACTION_UPDATE);
        }

        /**
         * BroadcastReceiver receiving the updates.
         */
        private final BroadcastReceiver clockChangedReceiver = new
                BroadcastReceiver() {
            /**
             * {@inheritDoc}
             */
            public void onReceive(Context context, Intent intent) {
                updateTime(context);
            }
        };

        /**
         * {@inheritDoc}
         */
        public IBinder onBind(Intent intent) {
            return null;
        }
        /**
         * {@inheritDoc}
         */
        public void onCreate() {
            super.onCreate();

            registerReceiver(clockChangedReceiver, intentFilter);
        }
        /**
         * {@inheritDoc}
         */
        public void onDestroy() {
            super.onDestroy();

            unregisterReceiver(clockChangedReceiver);
        }
        /**
         * {@inheritDoc}
         */
        public void onStart(Intent intent, int startId) {
            if (intent != null && intent.getAction() != null) {
                if (intent.getAction().equals(ACTION_UPDATE)) {
                    updateTime(this);
                }
            }
        }
    }

    /**
     * Method buildUpdate builds the RemoveViews to be displayed.
     * @param context used to retrieve resources.
     * @return RemoveViews instance.
     */

    private static RemoteViews buildUpdate(Context context) {

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

        String currentDate = DateFormat.getDateInstance(DateFormat.LONG).format(new Date());
        views.setTextViewText(R.id.date,currentDate );

        String hour = "hh";
                SimpleDateFormat.getTimeInstance().format(new Date());
                views.setTextViewText(R.id.hour, hour);

        String minute = "mm";
                SimpleDateFormat.getTimeInstance().format(new Date());
                views.setTextViewText(R.id.minute, minute);

        String ampm = "a";
                SimpleDateFormat.getTimeInstance().format(new Date());
                views.setTextViewText(R.id.ampm, ampm);

        return views;
    }

    /**
     * {@inheritDoc}
     */
    public void onDisabled(Context context) {
        super.onDisabled(context);

        context.stopService(new Intent(context,
            ClockUpdateService.class));
    }
    /**
     * {@inheritDoc}
     */
    public void onEnabled(Context context) {
        super.onEnabled(context);

        context.startService(new Intent(
            ClockUpdateService.ACTION_UPDATE));
    }
    /**
     * {@inheritDoc}
     */
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        context.startService(new Intent(
            ClockUpdateService.ACTION_UPDATE));
    }
    /**
     * Method updateTime updates the time.
     * @param context used to retrieve resources.
     */
    private static void updateTime(Context context) {
        RemoteViews remoteViews = buildUpdate(context);

        ComponentName clockWidget = new ComponentName(context,
            ClockWidgetProvider.class);

        AppWidgetManager appWidgetManager = AppWidgetManager.
            getInstance(context);
        appWidgetManager.updateAppWidget(clockWidget, remoteViews);
    }
} 
```

这是我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/clockbr"
    android:orientation="vertical"
    android:padding="5dp"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    tools:context=".Bioshock_Infinite_Clock_4x2" >

    <TextView
        android:id="@+id/date"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:paddingTop="1dp"
        android:textColor="#4c4439"
        android:textSize="12sp"
        android:typeface="serif" />

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="33dp" >

        <TextView
            android:id="@+id/hour"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".305"
            android:gravity="right"
            android:textColor="#4c4439"
            android:textSize="26sp"
            android:textStyle="bold"
            android:typeface="serif" />

        <TextView
            android:id="@+id/minute"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".365"
            android:gravity="center"
            android:textColor="#4c4439"
            android:textSize="26sp"
            android:textStyle="bold"
            android:typeface="serif" />

        <!-- <TextView
            android:id="@+id/am_pm"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".32"
            android:gravity="left"
            android:textColor="#4c4439"
            android:textSize="24sp"
            android:textStyle="bold"
            android:typeface="serif" /> -->

        <TextView
            android:id="@+id/ampm"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".32"
            android:gravity="left"
            android:textColor="#4c4439"
            android:textSize="24sp"
            android:textStyle="bold"
            android:typeface="serif" />

    </LinearLayout>

</LinearLayout> 
```

据我所知，我没有看到任何错误是我的 logcat。我对 SimpleDateFormat 尝试了一些不同的方法，但仍然没有运气。希望我错过了一些简单的东西！

任何帮助表示赞赏！

# android - 搜索数据库中是否存在数据并执行操作

> ID：16062402
> 
> 赞同：0
> 
> 时间：2013-04-17T14:12:20.513
> 
> 标签：android, database, sqlite

我有一个包含一些数据的数据库。我想在每次按下按钮时检查我的链接是否已经在数据库中。如果它存在，我将显示一个 toast，否则我会将它写入数据库。

```
 public boolean Exists(String link) {
           Cursor cursor = ourDatabase.rawQuery("select 1 from fav where link="+link, 
                new String[] {link });
           boolean exists = (cursor.getCount() > 0);
           cursor.close();
           return exists;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:18:41.617

URL 中的**:**使 sqlite 令人困惑。您可以通过用单引号将 URL 括起来来转义它。

你的`Exists(String link)`功能应该如下

```
 public boolean Exists(String link) {
           Cursor cursor = ourDatabase.rawQuery("select 1 from fav where link='"+link+"'",new String[] {});
           boolean exists = (cursor.getCount() > 0);
           cursor.close();
           return exists;
        } 
```

# java - Eclipse 总是在 Android 中重新索引存储库

> ID：16062403
> 
> 赞同：1
> 
> 时间：2013-04-17T14:12:21.073
> 
> 标签：java, android, repository

当我在 android 中工作时，在我的 Eclipse 窗口的右下角，每当我保存文件时，它都会显示“重新索引存储库”。启用此功能后，Eclipse 运行非常缓慢，除非我在 Android 进度条中强行停止它，否则它不会完成重新索引。我已经进入我的偏好并在 Eclipse 中禁用了 Git 的自动刷新设置，但无济于事。有什么建议么？

# excel - 当我从 Excel 将值上传到数据库时，为什么会收到 NullPointerException？

> ID：16062408
> 
> 赞同：4
> 
> 时间：2013-04-17T14:12:29.127
> 
> 标签：excel, spring-mvc

我正在开发一个 Spring Web 应用程序。当我从 Excel 工作表中获取值并上传到我的数据库时，我得到了 NullPointerException，即使我正在验证这些值。

在我的 Excel 工作表中，当我获取该列值时，第 5 列数据为空，我得到 NullPointerException。如何验证该列值？

这是我的代码：

```
 try
    {
        if(getCellValue(row.getCell(4)).tostring()!="")
        {

        criterias.put("fullName",getCellValue(row.getCell(5)));
        Driver driver=genericDAO.getByCriteria(Driver.class, criterias);
        if(driver==null)
        {
        error = true;
        lineError.append("Invalid driver name, ");
        }
        else
        {
        eztoll.setDriver(driver);
         }
        }
    catch(Exception ex)
    {
    e.printstacktrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:17:18.797

如果使用此代码，您的代码可以工作吗

```
 String val=(String) getCellValue(row.getCell(5));
    if(!(StringUtils.isEmpty(val)))
    {
     blah,blah,blah....!!!
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:12:18.913

你得到的例外纯粹是因为`expression`你的`if condition`. 在这个`getCellValue(row.getCell(4)).tostring()`表达式中，它试图调用导致 NullPointerException`toString()`的值的方法。`Null`

# regex - Symfony2 IBAN 验证器为有效的英国 IBAN 返回 false

> ID：16062413
> 
> 赞同：0
> 
> 时间：2013-04-17T14:12:35.947
> 
> 标签：regex, validation, symfony, preg-match

验证代码如下所示：

```
public function validate($value, Constraint $constraint)
    {
        if (null === $value || '' === $value) {
            return;
        }

        $teststring = preg_replace('/\s+/', '', $value);

        if (strlen($teststring) < 4) {
            $this->context->addViolation($constraint->message, array('{{ value }}' => $value));
            return;
        }

        $teststring = substr($teststring, 4)
            . strval(ord($teststring{0}) - 55)
            . strval(ord($teststring{1}) - 55)
            . substr($teststring, 2, 2);

        $letterToInt = function ($letter) {
            return intval(ord(strtolower($letter[0])) - 87);
        };

        $teststring = preg_replace_callback('/[A-Za-z]/', $letterToInt, $teststring);

        $rest=0;
        $strlen = strlen($teststring);
        for ($pos = 0; $pos < $strlen; $pos += 7) {
            $part = strval($rest) . substr($teststring, $pos, 7);
            $rest = intval($part) % 97;
        }

        if ($rest != 1) {
            $this->context->addViolation($constraint->message, array('{{ value }}' => $value));
            return;
        }
    } 
```

对于有效的英国 IBAN，此测试失败。有效的 IBAN 代码如下所示：**GB29 RBOS 6016 1331 9268 19**

测试代码看起来像

```
 public function getValidIbans()
    {
        return array(
            array('CH93 0076 2011 6238 5295 7'), //Switzerland
            array('CH9300762011623852957'), // Switzerland without spaces

            //Country list
            //http://www.rbs.co.uk/corporate/international/g0/guide-to-international-business/regulatory-information/iban/iban-example.ashx
            // array('GB29 RBOS 6016 1331 9268 19'), //United Kingdom -- currently fails!

            array('AL47 2121 1009 0000 0002 3569 8741'), //Albania
            array('AD12 0001 2030 2003 5910 0100'), //Andorra
            array('AT61 1904 3002 3457 3201'), //Austria
            array('AZ21 NABZ 0000 0000 1370 1000 1944'), //Azerbaijan
            array('BH67 BMAG 0000 1299 1234 56'), //Bahrain
            array('BE62 5100 0754 7061'), //Belgium
            array('BA39 1290 0794 0102 8494'), //Bosnia and Herzegovina
            array('BG80 BNBG 9661 1020 3456 78'), //Bulgaria
            array('HR12 1001 0051 8630 0016 0'), //Croatia
            array('CY17 0020 0128 0000 0012 0052 7600'), //Cyprus
            array('CZ65 0800 0000 1920 0014 5399'), //Czech Republic
            array('DK50 0040 0440 1162 43'), //Denmark
            array('EE38 2200 2210 2014 5685'), //Estonia
            array('FO97 5432 0388 8999 44'), //Faroe Islands
            array('FI21 1234 5600 0007 85'), //Finland
            array('FR14 2004 1010 0505 0001 3M02 606'), //France
            array('GE29 NB00 0000 0101 9049 17'), //Georgia
            array('DE89 3704 0044 0532 0130 00'), //Germany
            array('GI75 NWBK 0000 0000 7099 453'), //Gibraltar
            array('GR16 0110 1250 0000 0001 2300 695'), //Greece
            array('GL56 0444 9876 5432 10'), //Greenland
            array('HU42 1177 3016 1111 1018 0000 0000'), //Hungary
            array('IS14 0159 2600 7654 5510 7303 39'), //Iceland
            array('IE29 AIBK 9311 5212 3456 78'), //Ireland
            array('IL62 0108 0000 0009 9999 999'), //Israel
            array('IT40 S054 2811 1010 0000 0123 456'), //Italy
            array('LV80 BANK 0000 4351 9500 1'), //Latvia
            array('LB62 0999 0000 0001 0019 0122 9114'), //Lebanon
            array('LI21 0881 0000 2324 013A A'), //Liechtenstein
            array('LT12 1000 0111 0100 1000'), //Lithuania
            array('LU28 0019 4006 4475 0000'), //Luxembourg
            array('MK072 5012 0000 0589 84'), //Macedonia
            array('MT84 MALT 0110 0001 2345 MTLC AST0 01S'), //Malta
            array('MU17 BOMM 0101 1010 3030 0200 000M UR'), //Mauritius
            array('MD24 AG00 0225 1000 1310 4168'), //Moldova
            array('MC93 2005 2222 1001 1223 3M44 555'), //Monaco
            array('ME25 5050 0001 2345 6789 51'), //Montenegro
            array('NL39 RABO 0300 0652 64'), //Netherlands
            array('NO93 8601 1117 947'), //Norway
            array('PK36 SCBL 0000 0011 2345 6702'), //Pakistan
            array('PL60 1020 1026 0000 0422 7020 1111'), //Poland
            array('PT50 0002 0123 1234 5678 9015 4'), //Portugal
            array('RO49 AAAA 1B31 0075 9384 0000'), //Romania
            array('SM86 U032 2509 8000 0000 0270 100'), //San Marino
            array('SA03 8000 0000 6080 1016 7519'), //Saudi Arabia
            array('RS35 2600 0560 1001 6113 79'), //Serbia
            array('SK31 1200 0000 1987 4263 7541'), //Slovak Republic
            array('SI56 1910 0000 0123 438'), //Slovenia
            array('ES80 2310 0001 1800 0001 2345'), //Spain
            array('SE35 5000 0000 0549 1000 0003'), //Sweden
            array('CH93 0076 2011 6238 5295 7'), //Switzerland
            array('TN59 1000 6035 1835 9847 8831'), //Tunisia
            array('TR33 0006 1005 1978 6457 8413 26'), //Turkey
            array('AE07 0331 2345 6789 0123 456'), //UAE
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:29:46.030

您确定英国 IBAN 有效吗？我尝试了许多在线验证器，但他们似乎都没有接受它。

您可以自己尝试：
[www.paymentsscouncil.org.uk](http://www.paymentscouncil.org.uk/resources_and_publications/iban_checker/)
[www.natwest.com](http://www.natwest.com/apps/secure/tools/iban_new/Iban/IBAN_Checker.aspx?Theme=rbs)

您的验证者接受`GB29 NWBK 6016 1331 9268 19`（取自[此处](http://www.ecbs.org/iban/united-kingdom-uk-bank-account-number.html)）和`GB19 LOYD 3096 1700 7099 43`（取自[此处](http://www.paymentscouncil.org.uk/resources_and_publications/iban_checker/)）。

我认为您的 IBAN 号码中的校验和号码不正确，如果您将其更改`29`为`86`：`GB86 RBOS 6016 1331 9268 19`它将是有效的。

# iphone - iPhone - 网络搜索

> ID：16062415
> 
> 赞同：1
> 
> 时间：2013-04-17T14:12:39.873
> 
> 标签：iphone, networking, network-scan

我正在尝试扫描本地网络以查找硬件设备。我希望我的应用程序具有搜索功能，但我不知道如何开始。我以前使用过 Reachability，但看不出在这种情况下会有什么帮助。我需要做什么来扫描/搜索网络？

# java - Selenium java 我想在多个浏览器、版本上运行测试脚本，那么最好的方法是什么

> ID：16062417
> 
> 赞同：0
> 
> 时间：2013-04-17T14:12:41.543
> 
> 标签：java, selenium, selenium-webdriver, selenium-grid

目前我有一个只支持火狐浏览器的框架。现在我将加强我的框架工作，以便任何人都可以通过提出你的想法来给我你的想法。

目前我正在使用 Selenium Java、Hybrid framework、maven setup、Webdriver surefire 报告。所以

1）如果我想在多个浏览器和多个版本的浏览器上并行运行测试用例。什么是最好的方法？

谢谢R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:24:12.917

那么你需要为并行运行设置[网格。](https://code.google.com/p/selenium/wiki/Grid2)

你需要让你的浏览器启动代码依赖于一个可配置的参数。您可以将其作为 testng xml 的参数，也可以将其作为系统参数。根据此参数的值，您的侦听器或您的启动代码（我希望这将是孤立的，因为您提到了一个框架已经到位）应该能够使用此参数来决定要启动哪个浏览器/节点。

对于并行运行，如果您可以使用一些框架会更好。我们使用 testng 作为框架，支持并行运行，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:50:42.900

我知道你不想听，但实际上最好的方法是*反复试验*

*   您的网站在不同浏览器中的行为会有所不同。所以你必须为*几乎每个浏览器*更新你的脚本，你必须**手动完成**
*   浏览速度会有所不同。也许在你的脚本中投资隐式等待
*   是的，你会讨厌它。

我的“最佳方法”是：

1.  为一个最常用的浏览器实现脚本并尽可能自动化
2.  在其他版本中，手动调整最关键的功能
3.  与业务部门沟通，在不再支持某些晦涩的浏览器（如 IE 6）的地方编写代码，以便您有更多时间完善脚本

# batch-file - 如何在同一目录中使用 .bat 文件运行 .exe

> ID：16062418
> 
> 赞同：2
> 
> 时间：2013-04-17T14:12:42.117
> 
> 标签：batch-file

我正在制作一个可以为我自动运行文件的程序，但我想从 run.bat 文件所在的同一位置或目录运行 .exe 文件！

我有这样的垃圾箱：

```
:FarCry 2
echo Starting game...
start FarCry2.exe
pause
:exit 
```

但它不会启动！为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:40:04.380

尝试

```
start "" "%~dp0farcry2.exe" 
```

这应该将批处理的驱动器和目录添加到可执行文件名称中。

添加空的“窗口标题”只是克服`START`奇怪语法的常见做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:14:40.803

如果 FarCry2.exe 与 run.dat 位于同一文件夹中，请将 FarCry2.exe 替换为 ./FarCry2.exe

# r - ggplot 2：在 facet_wrap 面板中结合自由和固定比例

> ID：16062420
> 
> 赞同：2
> 
> 时间：2013-04-17T14:12:45.680
> 
> 标签：r, ggplot2, facet-wrap

使用 绘制多个面板时`facet_wrap`，是否可以允许在面板行之间自由缩放（**但在每行面板内的列之间固定**）？

换句话说，在下面的例子中，是否有可能允许每个物种的 y 尺度是自由的，但该物种的所有年份都是固定的？

> 例如，理想情况下，顶行上的每个“ant”面板的 y 比例为 0:400，而底行上的每个“emu”面板的 y 比例为 100:500。

在此先感谢您的任何建议。

```
d=as.data.frame(cbind(sample(1:500), c(1:500)))
colnames(d) = c("x","y")
d$year=gl(5,20,labels=c("2001","2002", "2003", "2004","2005"))
d$species=gl(5,25,labels=c("ant","bee","crab","donkey","emu"))
qplot(x, y, data = d)+facet_wrap(~species+year, scales = "free_y", drop = FALSE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:17:44.087

我认为您需要使用而`facet_grid()`不是作为行和​​列。所以y轴对于一行中的所有列都是相同的。`facet_wrap()``species``year`

```
qplot(x, y, data = d)+
  facet_grid(species~year, scales = "free_y", drop = FALSE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/3Dtad.png)

# dart - Dart：默认 gitignore？

> ID：16062424
> 
> 赞同：13
> 
> 时间：2013-04-17T14:13:02.977
> 
> 标签：dart

我创建了一个新应用程序，Dart 编辑器 (M4) 创建了大量文件和文件夹。现在我不确定哪个可以安全地放入 gitignore。这是树：

```
app/.buildlog
app/build.dart
app/packages/analyzer_experimental
app/packages/args
app/packages/browser
app/packages/csslib
app/packages/html5lib
app/packages/js
app/packages/logging
app/packages/meta
app/packages/pathos
app/packages/source_maps
app/packages/unittest
app/packages/web_ui
app/pubspec.lock
app/pubspec.yaml
app/web/app.css
app/web/app.dart
app/web/app.html
app/web/out/app.css
app/web/out/app.dart
app/web/out/app.dart.map
app/web/out/app.html
app/web/out/app.html_bootstrap.dart
app/web/out/packages
app/web/out/xclickcounter.dart
app/web/out/xclickcounter.dart.map
app/web/packages
app/web/xclickcounter.dart
app/web/xclickcounter.html 
```

我假设可以忽略以下文件：

```
app/.buildlog
app/packages/*
app/web/out/*
app/web/packages 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T14:55:22.703

从[dartlang.org 上的](https://www.dartlang.org/tools/private-files.html)[*What Not to Commit*](https://www.dartlang.org/tools/private-files.html)：

```
# files and directories created by pub
.dart_tool/
.packages
.pub/
build/
pubspec.lock  # Except for application packages
# API documentation directory created by dartdoc
doc/api/
# files and directories created by other development environments
*.iml         # IntelliJ
*.ipr         # IntelliJ
*.iws         # IntelliJ
.idea/        # IntelliJ
.DS_Store     # Mac
# generated JavaScript files
*.dart.js
*.info.json      # Produced by the --dump-info flag.
*.js             # When generated by dart2js. Don't specify *.js if your
                 # project includes source files written in JavaScript.
*.js_
*.js.deps
*.js.map 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T11:06:18.660

**不要提交**以下由 pub、Dart Editor 和 dart2js 创建的文件和目录：

```
packages/
pubspec.lock  // Except for application packages
.project
.buildlog
*.js_
*.js.deps
*.js.map 
```

**不要提交**其他开发环境丢弃的文件和目录。例如：

```
.project      // Eclipse
*.iml         // IntelliJ
*.ipr         // IntelliJ
*.iws         // IntelliJ
.idea/        // IntelliJ
.DS_Store     // Mac 
```

**避免提交**生成的 JavaScript 文件：

```
*.dart.js 
```

有关更多详细信息，请阅读[https://www.dartlang.org/tools/private-files.html](https://www.dartlang.org/tools/private-files.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-21T06:42:28.153

**飞镖默认**

```
.packages      # mapping file from package names to local path
packages       # until `--no-package-symlinks` is the default
build/         # contains the output of `pub build`
.pubspec.lock  # controversial - Dart guideline is to only commit
               #     for applications but not for packages
.pub/          # cache files generated by `pub` 
               # .pub was moved to .dart_tool/.pub 
```

**build**新的[https://github.com/dart-lang/build](https://github.com/dart-lang/build)包引入了一个

```
.dart_tool/ 
```

应该排除的目录。

> 当涉及到生成的文件时，通常最好不要将它们提交给源代码管理，但特定的构建器可能会提供其他建议。

**IDE**

```
.idea # IntelliJ, WebStorm 
```

**巴泽尔**

```
/bazel-*
.bazelify
packages.bzl
BUILD
WORKSPACE 
```

也可以看看

*   [https://github.com/github/gitignore/blob/master/Dart.gitignore](https://github.com/github/gitignore/blob/master/Dart.gitignore)
*   [https://www.dartlang.org/guides/libraries/private-files](https://www.dartlang.org/guides/libraries/private-files)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T14:52:30.430

Github 上的 gitignore 存储库中提供了最新的 Dart .gitignore 示例：

[https://github.com/github/gitignore/blob/master/Dart.gitignore](https://github.com/github/gitignore/blob/master/Dart.gitignore)

请注意，这不包含 IDE 或编辑器文件，仅包含 Dart 文件。您可以在同一个 repo 中找到 IDE 和编辑器 .gitignores。

我包含`doc/api`在我的 .gitignore 中。我倾向于写大量的文档评论，我喜欢用它`dartdoc`来生成文档以供审查。

# c# - 试图捕获这段代码中的所有返回路径

> ID：16062430
> 
> 赞同：-7
> 
> 时间：2013-04-17T14:13:15.110
> 
> 标签：c#

我希望以前没有人问过这个问题，有没有办法突出显示 return 语句应该在方法中使用的所有返回路径？因为我有一段相当长的代码块，其中包含可能的路径，但我仍然没有找到它上面的每条路径。（我认为这将是一个有用的工具）干杯。

```
 static double findconversion(int menuOption, int submenuOption) {

        if (menuOption == 1) {

            if (submenuOption == 1) {

                    Console.Write("\nYou chose to convert Celcius to Fahrenheit" +            "\nEnter the number that you want to convert, (between -500 and 500)"
                        + "\nOr enter 0 to return to the previous menu: ");
                    double celnum = int.Parse(Console.ReadLine()); 

                if (celnum == 0) {
                    Console.WriteLine("\nYou cancelled your selection"); return celnum;

                } else if ((-500 > celnum) || (celnum > 500)) {
                    Console.WriteLine("\nchoose a number between -500 to 500 please"); 

                    findconversion(menuOption, submenuOption); return celnum;

                } else if ((-500 <= celnum) && (celnum <= 500)) {

                    double result = Celsiusandfahrenheit(celnum, submenuOption);

                    if (submenuOption == 1) {
                        Console.WriteLine("\n   " + celnum + (" degrees celcius converted to fahrenheit is: {0:0.00} degrees fahrenheit"), result);
                        return celnum;
                    } else if (submenuOption == 2) {
                        Console.WriteLine("\n   " + celnum + (" degrees fahrenheit converted to celcius is: {0:0.00} degrees celcius"), result);
                        return celnum;
                    } return celnum;
                }

            } else if (submenuOption == 2) {
                Console.Write("\nYou chose to convert Fahrenheit to Celsius" + "\nEnter the number that you want to convert, (between -500 and 500)"
                    + "\nOr enter 0 to return to the previous menu: "); 

                double celnum = int.Parse(Console.ReadLine()); 

                if (celnum == 0) {
                    Console.WriteLine("\nYou cancelled your selection"); return celnum;

                } else if ((-500 > celnum) || (celnum > 500)) {
                    Console.WriteLine("\nchoose a number between -500 to 500 please");

                    findconversion(menuOption, submenuOption); return celnum;
                } else if ((-500 <= celnum) && (celnum <= 500)) {

                    double result = Celsiusandfahrenheit(celnum, submenuOption);
                    if (submenuOption == 2) {
                        Console.WriteLine("\n   " + celnum + (" degrees fahrenheit converted to celcius is: {0:0.00} degrees celcius"), result); return celnum;
                    }

                } return celnum;

            } 

        } else if (menuOption == 2) {

            if (submenuOption == 1) {
                Console.Write("\nYou chose to convert centimetres to feet and inches" + "\nEnter the number that you want to convert to feet and inches, (between -500 and 500)."
                    + "\nOr enter 0 to return to the previous menu: ");
                double celnum = int.Parse(Console.ReadLine()); 

                if (celnum == 0) {
                    Console.WriteLine("\nYou cancelled your selection"); return celnum;

                } else if ((-500 > celnum) || (celnum > 500)) {
                    Console.WriteLine("\nchoose a number between -500 to 500 please"); 

                    findconversion(menuOption, submenuOption); return celnum;

                } else if ((-500 <= celnum) && (celnum <= 500)) {

                    double result = cmsandfeet(celnum, submenuOption);
                    // double result1 = cmsandinches(centnum, submenuOption, empty);
                    result = Math.Floor(result);
                    double result1 = ((celnum - (result * 30.48)) / 2.54);
                    if (submenuOption == 1) { Console.WriteLine("\n   " + celnum + (" centimetres converted to feet and inches is: {0:0} feet and {1:0.00} inches"), result, result1); } return celnum;

                } 

                return celnum;
            } 

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:30:01.383

我开始以评论的形式回答这个问题，但我意识到可能有足够的指导性内容来保证完整的答案。

作为开发人员，您有责任了解逻辑流程，并了解代码中所有路径的位置。作为一个非常普遍的经验法则，您想仔细查看每个`if`/`else`结构，并决定：这个条件块的末尾是我返回的地方，还是在此之后逻辑会继续？逐步了解每一种可能性，并亲自查看您是否在正确的区域着陆。

您可以通过良好的格式帮助自己成为更好的编码员。例如，在“-500 到 500 之间的 celnum”块的末尾，你有这个：

```
if (submenuOption == 1) { Console.WriteLine("\n   " + celnum + (" centimetres converted to feet and inches is: {0:0} feet and {1:0.00} inches"), result, result1); } return celnum; 
```

这很糟糕，原因有很多，其中最起码的原因是`return celnum`排在很长的队伍末尾。无论条件如何，它都会执行，但如果不仔细研究，我不知道。相反，这更清楚：

```
if (submenuOption == 1) { 
    Console.WriteLine("\n   " + celnum + (" centimetres converted to feet and inches is: {0:0} feet and {1:0.00} inches"), result, result1);
}
return celnum; 
```

这直接直观地向我展示了您正在返回一个值，而不管 submenuOption 的值如何。

您必须查看的另一件事是具有默认情况或“隐式`else`”。您在几种情况下都这样做，这很好，（例如，`return celnum`在“它是否在 -500 和 500 的范围内”之后）。你不这样做，导致错误，是你最外层的条件。

你有`if submenuOption == 1`，你有`else if submenuOption == 2`，但在那之后你什么都没有。如果 submenuOption 不是 1 或 2 会发生什么？在这种情况下，您不会返回任何东西。在您已知的情况之外，您需要一个默认情况 - 要么抛出错误，要么返回一个表明没有选择好的选项的值。那应该可以解决您的编译器问题。

# encryption - 保护 Java 源代码不被访问

> ID：16062432
> 
> 赞同：98
> 
> 时间：2013-04-17T14:13:18.380
> 
> 标签：encryption

上周，我不得不为作业创建一个小 GUI。我的同学都没有这样做。他们从我们必须上传它的地方偷了我的一个，然后他们又把它上传成了他们的。当我告诉我的老师这是我所有的工作时，他不相信我。

所以我想在里面放一个无用的方法或其他东西，并附上我编码的证明。我想到了加密。到目前为止我最好的主意：

```
String key = ("ZGV2ZWxvcGVkIGJ5IFdhckdvZE5U"); //My proof in base64 
```

你能想到其他更好的方法吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-04-17T17:34:20.200

很久以前我和你有同样的问题。我们有 Windows 2000 机器并将文件上传到每个人都可以看到的 Novel 网络文件夹。我使用了几个技巧来击败最好的小偷：空白水印；元数据水印；不寻常的字符；可信时间戳；作案手法。这是他们的顺序。

## 空白水印：

这是我对水印的最初贡献。我需要一个在文本文件中工作的隐形水印。我想出的技巧是在编程语句（或段落）之间放入特定的空白模式。该文件在他们看来是一样的：一些编程语句和换行符。仔细选择文本会显示空白。每个空行将包含一定数量的空格，这些空格显然不是随机的或偶然的。（例如17）实际上，这种方法对我有用，因为他们无法弄清楚我在文档中嵌入了什么。

## 元数据水印

您可以在此处更改文件的元数据以包含信息。您可以将您的姓名、哈希值等嵌入文件的不可见部分，尤其是 EXE 文件。在 NT 时代，备用数据流很流行。

## 不寻常的字符

我会把这个扔进去只是为了好玩。一个古老的 IRC 模仿技巧是用与另一个人的名字相似的字母来命名。您可以在水印中使用它。Windows 中的字符映射将为您提供许多不寻常的字符，这些字符看起来类似于但不是您可能在源代码中使用的字母或数字。这些出现在别人作品中的特定位置不可能是偶然的。

## 可信时间戳

简而言之，您将文件（或其哈希）发送给第三方，然后第三方为其附加时间戳并使用私钥对其进行签名。任何想要证明您何时创建文档的人都可以访问受信任的第三方（通常是网站）来验证您的创建时间证明。这些已被用于知识产权纠纷的法庭案件中，因此它们是一种非常有力的证据形式。它们是完成您正在寻找的证明的标准方法。（我先把其他的 b/c 包括在内，它们很简单，它们更有趣，并且可能会起作用。）

[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Trusted_timestamping)可能会帮助您的教师了解您的证据，并且外部链接部分有许多提供者，包括免费提供者。在将它们用于重要的事情之前，我会通过免费的测试文件运行几天。

## 作案手法

所以，你做了什么，你现在有证据对吗？不，学生们仍然可以说你偷了他们的想法或其他一些废话。我对此的解决方法是私下与我的导师建立我的一种或多种方法。我告诉教练寻找空白，寻找某些符号等，但永远不要告诉其他人水印是什么。如果讲师同意对您的简单技术保密，他们可能会继续正常工作。如果没有，总是有可信的时间戳。;)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-04-17T14:18:54.333

如果你的同学从上传网站窃取了你的代码，我会加密你的作业并将密钥通过电子邮件发送给老师。如果您想复杂一点，您可以使用 PGP 来执行此操作，或者像带有密码的 Zip 文件这样简单的操作。

编辑：PGP 将允许您在不泄露您的密钥的情况下进行加密/签名，但您无法击败带有密码的 Zip 文件的简单性，因此只需在每个家庭作业中选择一个新密钥即可。简约之美 :)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-04-17T14:15:01.700

如果您要向老师提供源代码，则只需将 a 添加`serialVersionUID`到您的课程文件中，该文件是您姓名的加密版本。你可以自己解密给老师。

这对其他人没有任何意义，只是对你而言。你可以说这是一个生成的代码，如果他们窃取它，可能根本不会费心去修改它。

如果你想以一种时尚的方式来做，你可以使用[这个技巧](https://stackoverflow.com/questions/15182496/why-does-this-code-print-hello-world)，如果你找到产生你名字的随机种子。:) 那将是*您的号码*，无论它出现在哪里，都可以证明是*您*制作了该代码。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-04-17T14:27:50.500

这发生在我的一对学生身上，他们住在同一个公寓里。有人从办公桌抽屉里的磁盘上偷走了源代码。

小偷稍微修改了被盗的来源，使其不明显。无论如何，我注意到代码的相似之处，并在编辑器中检查了源代码。有些行的末端有多余的空格。每个学生的来源都有相同数量的额外空格。

您可以利用它对信息进行编码而不使其可见。您可以在某些行的末尾使用空格对您的姓名首字母或学生 ID 进行编码。

小偷可能会对可见代码进行外观更改，但可能会错过不可见字符。

**编辑：**

再想一想，您可以将空格和制表符用作摩尔斯电码的dits和dahs，并将您的名字放在多行的末尾。小偷可以删除、重新排序或重新键入某些行，而不会破坏您的身份。

**编辑2：**

“空白隐写术”是在空白中隐藏消息的术语。谷歌搜索它揭示了这个可以追溯到 90 年代[的开源实现，使用霍夫曼编码而不是摩尔斯电码。](http://www.darkside.com.au/snow/)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-04-17T18:48:35.063

对我来说，这似乎是一个 IT 管理问题。每个学生都应该有自己的上传区域，其他学生无法访问。

老师将是更高级别的，能够访问每个学生的上传文件夹。如果这不可能，请使用@exabrial 答案，因为这是最简单的解决方案。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-04-18T00:06:30.997

您能做的最好的事情就是使用密码压缩源代码并将密码通过电子邮件发送给老师。

问题解决了。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-04-17T14:20:07.637

使用分布式（=独立）**版本控制系统**，例如*git*。也可能有用。

带有您的姓名和日期的版本历史可能足以令人信服。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-17T14:20:06.190

什么被偷了？

*   来源 ？您可以将随机字符串放入其中（但可以更改）。您也可以尝试添加只有您知道的特殊行为（特殊按键会更改颜色行），然后您可以问老师“其他人知道这个特殊组合吗？”。最好的方法是如果在 5 分钟的活动后存档中没有一个空的无用文件，则使程序崩溃，您的同学将懒得等待这段时间。

*   二进制？只比较每个.class的校验和就足够了（你的同学懒得重写class文件）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-18T23:05:59.337

只需在最后一分钟发布您的解决方案。这不会给任何人时间来复制它。

并向管理员发送反馈以禁止学生查看其他学生的作业。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-19T01:57:02.747

如果您以带有密码加密的 .zip 文件上传文件，那么任何人都可以通过下载 .zip 文件来破解密码，如果他们是一个大作弊的小偷，他们的 cpu 就会对其运行一百万次查询。不幸的是，有些是而且很容易做到。

其他学生可以在共享服务器上查看您的源。老师真的应该给你自己的密码加密目录来上传。这可以通过添加子域轻松完成。但也许老师可能会允许您将文件上传到您自己的服务器，以便他在那里访问它们。

也可以对脚本进行模糊处理，使其具有 document.write('This page waswritten by xxxxx')，从而强制复制您作品的任何人无法删除信用，除非他们首先解密它。但真正的答案是，您的学校需要为每个学生提供自己的受密码保护的目录。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-18T03:36:20.707

就我而言，我的老师们采用了更好的方法。他们提供的问题与我们的注册号有关。前任：

> 函数/理论的输入是我们的注册号，每个学生都不同

因此，每个学生的答案或解决方法都相对不同。这使得所有学生都必须自己做作业，或者至少知道如何通过自己的注册来破解方法[it可能比学习课程更难;)]。

```
Hope your lecturer will read this thread before his next tutorial :D 
```

# angularjs - Angular - 不同的路线，相同的模板/控制器，不同的加载方法

> ID：16062434
> 
> 赞同：10
> 
> 时间：2013-04-17T14:13:26.723
> 
> 标签：angularjs, routing, angularjs-routing

我想使用路由，但我总是想使用相同的模板和控制器。我有这样的路线：

```
**a/:albumid** 
```

和

```
**i/:imageid** 
```

在第一种情况下，我想加载图像数组并将它们添加到列表中。在第二种情况下，我想加载单个图像并将其添加到列表中。

所以区别仅在于数据加载。最有效的方法是什么？

也可以为 ng-show 制作动画吗？像jQuery的slideDown这样的东西？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T21:36:17.680

查看这篇文章，它描述了一种完全按照您的意愿行事的方法：

[http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)

我用过这个技术，效果很好。

简而言之，类似这样的路由：

```
$routeProvider
    .when("/a/:album_id", {
        action: "album.list"
    }).when("/i/:imgid", {
        action: "images.load"
    }) 
```

然后在您的控制器中，您可以访问`$route.current.action`并执行适当的操作。诀窍是在您的控制器中创建一个函数来完成所有工作（文章称它为`render()`），然后在 $routeChangeSuccess 触发时调用该函数：

```
$scope.$on(
   "$routeChangeSuccess",
   function( $currentRoute, $previousRoute ){
        // Update the rendering.
        render();
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T23:30:41.373

我创建了一个超级简单的指令来处理这个问题，它允许路由更像 Rails 或 Codeigniter 路由，其中​​控制器方法位于路由定义中。方法名称在 routeProvider.when 选项中设置，指令在路由模板中设置。请参阅：[https ://stackoverflow.com/a/22714634/250991](https://stackoverflow.com/a/22714634/250991)

# quicktime - 在 QuickTime 中设置隔行扫描信息

> ID：16062435
> 
> 赞同：0
> 
> 时间：2013-04-17T14:13:28.027
> 
> 标签：quicktime

我正在尝试通过 QuickTime 7 API 在我正在创建的电影上设置正确的隔行扫描信息。

我想让我的电影逐行扫描，但是当我目视检查输出时，每一帧都被压缩到上半部分。因此，即使我确保 QuickTime 知道我的电影是否`kQTFieldsProgressiveScan`存在，它仍然会感到困惑。

这就是我正在做的事情：

```
myCreateNewMovie(...);
ICMCompressionSessionOptionsCreate(...);
BeginMediaEdits(media);

myCreate(ImageDescription with appropriate FieldInfoImageDescriptionExtension2);
SetMediaSampleDescription(media, ImageDescription); 
```

然后在编写每一帧时我添加相同的描述：

```
ICMImageDescriptionSetProperty(myFieldInfoImageDescription, ...);
AddMediaSample2(...); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T09:13:56.637

从网上的各种点点滴滴中，我得到的印象是为媒体设置示例描述被覆盖了。现在我`FieldInfo`在我的 ICM 编码帧输出回调中设置数据，这似乎是令人满意的。

# javascript - 如何用 JavaScript 中的其他内容替换输入中的非 Ascii 字符

> ID：16062446
> 
> 赞同：1
> 
> 时间：2013-04-17T14:13:50.293
> 
> 标签：javascript, html, encoding, ascii, non-ascii-characters

我正在使用 WebSocket 为 JavaScript 游戏实现聊天功能。我想用其他字母替换用户在输入文本字段中写入的非 ascii 字符。Ä 替换为 a，Ö 替换为 o。并且所有其他非ASCII字符都应替换为“”。

```
var message = document.getElementById("write_message").value;
message = message.replace(/ä/g, "a").replace(/ö/g, "o");
message = message.replace(/^[\000-\177]/g, "");
ws.send("M" + message); 
```

我尝试了上述代码的更简单版本，但不知何故，所有用户输入似乎都被替换了。甚至是ASCII字符。我从另一个 Stackoverflow 问题中找到了正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:23:20.280

您必须知道支持的 html 页面的字符集。根据它是 unicode 还是某些 8 位字符，使用`\uzzzz`或`\xzz`匹配`z`表示十六进制数字的字符。

示例：`message = message.replace(/^[\u0080-\uffff]/g, "");`ascii-fies unicode 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:03:49.097

您的代码是正确的，除了抑扬符`^`必须出现在左括号`[`之后以表示否定。否则，它意味着完全不同的东西。

但是，我认为您实际上想将大写的 Ä 和 Ö 映射到 A 和 O 而不是删除它们。为此，您将使用

```
message = message.replace(/ä/g, "a")
                 .replace(/ö/g, "o")
                 .replace(/Ä/g, "A")
                 .replace(/Ö/g, "O")
                 .replace(/[^\000-\177]/g, ""); 
```

# session - Meteor 不会保存会话值

> ID：16062448
> 
> 赞同：0
> 
> 时间：2013-04-17T14:13:54.637
> 
> 标签：session, meteor

我试图使用 Session.get() 和 Session.set() 来检查用户是否单击了按钮。如果实现此代码以检查会话是否已设置。

```
"click .alt": function(event,template){

        if (Session.get("selected") === false){
            var clicked = event.currentTarget;
            clicked.className += " chosen";
            var data = clicked.dataset; 
            console.log(data);
            Session.set("selected", true);
        if (data.corr == true){
            console.log("Hi");
        }
        else{
            console.log("Not Hi");
        }
    }
    else{
        console.log("session was set to true");
    }
} 
```

consol.log(data) 总是被打印，但即使 data.corr=true，“Hi”也会被更新。出于某种未知的原因，对我来说，这不起作用。希望有人可以帮助我。

**更新** 这将不起作用：

```
 if (Session.get("selected") == false){
        Session.set("selected", true);
        var clicked = event.currentTarget;

        if (clicked.dataset.corr == true){
            //Recording the time and calculating some points                
            time = new Date;
            time = time.getTime();
            time = 3000-Math.floor((time -Session.get("startedTime"))/10 );
            gameCol.insert({team:Session.get("teamnr"), points: time});
            console.log("Correct answer");
        }
        else{
            //0 points for wrong answer
            gameCol.insert({team:Session.get("teamnr"), points: 0});
            console.log("Wrong answer");
        }
    }
    else{
        console.log("You have answered");
    } 
```

这有效：

```
 if (Session.get("selected") == false){
        Session.set("selected", true);
        var clicked = event.currentTarget;

        if (clicked.dataset.corr == true){
            //Recording the time and calculating some points                
            time = new Date;
            time = time.getTime();
            time = 3000-Math.floor((time -Session.get("startedTime"))/10 );
            gameCol.insert({team:Session.get("teamnr"), points: time});
            console.log("Correct answer");
        }
        else{
            //0 points for wrong answer
            //gameCol.insert({team:Session.get("teamnr"), points: 0});
            console.log("Wrong answer");
        }
    }
    else{
        console.log("You have answered");
    } 
```

唯一的区别是在 db 中插入错误答案的行是 remover。见行 //gameCol.insert({team:Session.get("teamnr"), points: 0});

**更新 1.1** 将 if/else 更改为两个 if 反而有效

```
if (clicked.dataset.corr == true){
            //Recording the time and calculating some points                
            time = new Date;
            time = time.getTime();
            time = 3000-Math.floor((time -Session.get("startedTime"))/10 );
            gameCol.insert({team:Session.get("teamnr"), points: time});
            console.log("Correct answer");
        }
        if(clicked.dataset.corr == false){
            //0 points for wrong answer
            gameCol.insert({team:Session.get("teamnr"), points: 0});
            console.log("Wrong answer");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:58:48.977

它确实有效。我将您的代码（删除了一些我不知道它的用途的东西）添加到香草流星项目中，它工作得很好。

我使用创建了一个项目`mrt create`，这段代码在每次点击 hello-template 时将会话设置为 true。

```
if (Meteor.isClient) {

  Meteor.startup(function() {
    Session.set("selected", false);
  });

  Template.hello.greeting = function () {
    return "Welcome to so-q.";
  };

  Template.hello.events({
    "click": function(event,template){

      if (Session.get("selected") === false){
        console.log("session was set to false");
        Session.set("selected", true);
      }
      else{
        console.log("session was set to true");
        Session.set("selected", false);
      }
    }
  });

}

if (Meteor.isServer) {
  Meteor.startup(function () {
// code to run on server at startup
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:11:09.937

尝试`if (Session.equals('selected', false))`代替`if (Session.get('selected') === false`. 它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:07:30.213

我想我发现了问题所在，可能是我对 Meteor 的理解不够。我认为，当在模板中使用响应式数据时，任何绑定模板数据的更改都会触发模板中所有绑定数据的重新计算。会话数据也在模板中绑定的函数中设置和使用。因此，一旦触发重新计算，会话就会再次设置为 false。

一旦我将模板分成较小的部分，每个部分都包含一个单独的模板，这种行为就结束了。

# python - 带有pyodbc的生成器中缺少列名

> ID：16062449
> 
> 赞同：0
> 
> 时间：2013-04-17T14:13:56.450
> 
> 标签：python, generator, pyodbc

我使用 Pyodbc 连接到 sqlserver 以获取几行。我执行的选择查询获取了近 200,000 行，导致内存问题。

为了解决这个问题，我使用生成器对象，在任何时间点获取 5000 行..

这种执行的问题是生成器对象。我丢失了数据列名称..

例如，如果我的 table1 有列 NAME，通过正常执行我可以访问结果集作为 result.NAME

但我不能对生成器对象做同样的事情。它不允许我通过列名进行访问。

任何输入都会有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:48:53.527

用于批量[`Cursor.fetchmany()`](https://code.google.com/p/pyodbc/wiki/Cursor#fetchmany)处理查询结果返回一个[`pyodbc.Row`](https://code.google.com/p/pyodbc/wiki/Objects#Rows)对象列表，允许按列名引用。

以 SQL Server 查询为例，该查询以 5 个为一组返回数据库名称：

## 不带发电机

```
connection = pyodbc.connect(driver='{SQL Server Native Client 11.0}',
                            server='localhost', database='master',
                            trusted_connection='yes')
sql = 'select name from sys.databases'
cursor = connection.cursor().execute(sql)
while True:
    rows = cursor.fetchmany(5)
    if not rows:
        break
    for row in rows:
        print row.name 
```

## [使用生成器（从此处](http://code.activestate.com/recipes/137270-use-generators-for-fetching-large-db-record-sets/)的示例修改）

```
def rows(cursor, size=5):
    while True:
        rows = cursor.fetchmany(size)
        if not rows:
            break
        for row in rows:
            yield row 

connection = pyodbc.connect(driver='{SQL Server Native Client 11.0}',
                            server='localhost', database='master',
                            trusted_connection='yes')
sql = 'select name from sys.databases'
cursor = connection.cursor().execute(sql)
for row in rows(cursor):
    print row.name 
```

# php - 从 html 中删除特定的 a 标签

> ID：16062450
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:13:57.860
> 
> 标签：php, html-parsing

我正在解析我网站上的各种 html 页面。我希望删除一些特定的“a”标签。所有 a 标签看起来像这样：

```
<a href="#cite-note-2"><span>..</span></a>
<a href="#cite-sub">....</a> 
```

所以我想要的是删除所有href以#cite开头的标签

请在 php 中建议一些正则表达式。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:45:52.830

试试这个正则表达式：

`'/<a[\s]{1,}href=[\'"]\#cite.*?[\'"].*?>.*?<\/a>/ims'`

.

例如：

`$a = preg_replace('/<a[\s]{1,}href=[\'"]\#cite.*?[\'"].*?>.*?<\/a>/ims', '', $a);`

# c# - 当所选项目是回发列表中的最后一项时，DropDownList 选择列表中的第一项

> ID：16062452
> 
> 赞同：0
> 
> 时间：2013-04-17T14:14:04.930
> 
> 标签：c#, asp.net, html-select

我的`DropDownList`.

该列表工作正常，直到我选择列表中的最后一项并单击按钮进行回发。一旦回发发生，列表中的选定项目将更改为第一个项目。

列表中的所有其他项目都可以正常工作并保持选中状态。

该列表是在一个内部生成的`if (!IsPostBack)`

没有其他代码控制列表中的选定项目。

为了解决这个问题，我在列表末尾添加了一个空白列表项，它似乎解决了这个问题。

```
if (!IsPostBack)
{
    List<RolesWithPermissions> lstPerms = Utility.loadRolesAndPermissions();

    foreach (RolesWithPermissions perm in lstPerms)
    {
       drpUsers.Items.Add(new ListItem(perm.userRole, perm.userPermissions));
    }
    drpUsers.Items.Add("");
}

protected void dtnEditPerms_Click(object sender, EventArgs e)
{
    string permissions = drpUsers.SelectedValue.ToString();
} 
```

这些是背后代码中唯一与导致问题的drp down 列表交互的部分。

这是下拉列表代码。

```
<asp:DropDownList ID="drpUsers" runat="server">
    </asp:DropDownList> 
```

# git - 什么是 subversion/git 的一个好的非分支非本地替代方案？

> ID：16062458
> 
> 赞同：0
> 
> 时间：2013-04-17T14:14:28.907
> 
> 标签：git, svn, version-control

所以，你不会听到我说 svn 和 git 不是非常强大和通用的工具，但是对于非本地开发（中央网络共享）来说，它不能很好地发挥作用（两个人实际上可以在同一个文件上工作) 并产生了相当多的开销，所以具体来说，我想知道是否有任何替代方案可以在中央网络共享上运行良好（主要使用的功能是责备和识别稳定代码和开发代码）。

我知道这是一个相当广泛的问题，我希望这属于 Stackoverflow 的范围，但由于类似的问题没有解决，我决定试一试这个问题。

* * *

在反应中似乎存在一个常见的误解：现在我们正在使用颠覆，我们正在提交我们的更改，我们正在使用标签来区分版本并仅将已标记的更改推送到生产环境。此外，似乎有人相信本地副本在某种程度上是协作开发的圣杯。让我告诉你，如果你在同一个项目上最多只能与 4 个开发人员一起工作，那么如果你不使用一些需要编译所有代码和单一语法的古老的低级语言，那么处理相同的文件是理想的错误会破坏整个应用程序。确实，偶尔这确实会导致不必要的错误，但总的来说它工作得非常好，并且有助于加快开发速度。*实际*的*主要问题在于，如果不同的人在同一个 svn checkout 上提交和工作，svn 往往会中断很多。此外，还有一些其他的事情往往会引起麻烦（svn 似乎不喜欢坐在共享上，尽管其中一个答案可能有助于“解决”这个问题），但事实是所有这些事情都是由事实上，SVN 和 GIT 都基于个人开发人员在他们自己的本地副本上工作的想法，这与我们正在做的共享代码库上紧密结合的开发风格不符。*

 **经过讨论后，我们得出结论，我们可以想象一个更简单的不太先进的源代码控制系统，更适合这种开发风格（例如，像体验*这样的全自动修订跟踪系统）*用户拥有谷歌驱动器文件+另外某种形式的“标记”文件），我们认为其他人也必须考虑到这一点，这就是这个问题的来源。如果您认为我们的开发风格很糟糕，请允许我指出，我们公司目前的效率能够达到我们与之竞争的类似大型 Web 应用程序开发公司的 3-5 倍（以及不增长的选择）是有意识的），是的，这种设置是帮助达到这种效率的原因之一，因为无论流行的版本控制系统多么漂亮：它们添加*了很多*的开销。正如我在下面的评论之一中所说，对于我们来说，设置本地开发环境意味着必须设置大约 50x4=200 个不同的开发应用程序才能运行。这意味着在每个开发系统上都有 3 个不同的 IIS 实例（由于我们正在使用的“插件”的限制以及这个“插件”的 3 个不同版本的必要性），一个 apache/tomcat 实例和一个 apache/jetty 实例. 另外，为每个开发人员在这 5 个实例中分离出 50 个应用程序的不同子集。（而且我什至不想考虑如何让这 5 个实例相互运行，以及如何处理跨应用程序请求）将所有这些与当前设置进行比较，在当前设置中，我们只需要每个应用程序的三个不同实例（开发、暂存和生产）它' s 根本没有道理。而且我什至没有提到公司中只有大约 2 或 3 人知道如何设置这些实例......顺便说一句，这是一团糟（对于新项目，我们已经从这个混乱中迁移出来，但是对于所有旧的仍然支持但无关紧要的项目）。*

 *我试图使这个问题尽可能笼统，以防止它仅适用于我们，但是某些人在某些答案和评论中给出的那种反应令人难以置信的傲慢。老实说，我们已经考虑过这个问题，我问了一个相当具体的问题。如果问题是要寻找 svn/git 的替代方案，那么来给出答案就太冒昧了：“使用 svn”/“使用 git”或“这个问题让我哭了”。并且没有冒犯@David W. 因为与其他一些人不同，我认识到您真诚地试图提供帮助，但在看到这些评论后，我认真地考虑过退出 stackoverflow。</rant>

无论哪种方式，我仍然希望有人能够向我指出一些完全不同的源代码控制方法，但从表面上看，情况并非如此。也许有一天我会自己写，但现在我没有时间，所以我有点希望其他人已经这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:44:54.857

*其他答案已经指出，通常多人同时在一台服务器上工作可能会有问题。我同意-但是，您写道，这对您有用，所以我不会为此争论。*

也就是说，我的版本控制解决方案是：

*   每个项目有一个存储库，具有三个分支（dev、staging、prod）。
*   在每台服务器上，始终签出与服务器角色 (dev/staging/prod) 对应的分支。

这样，多人可以在一台服务器上工作。他们只是像往常一样提交，与碰巧在同一系统上工作的任何同事协调。使用 Git 会更容易一些，因为它可以更轻松地只提交工作副本中的一部分更改，但它也适用于 SVN。

通过合并在系统之间交换代码。如果在“dev”中完成了一项新功能，可以将“dev”代码合并到“staging”中，然后将“staging”合并到“prod”中。标签可用于识别适合合并到下一阶段的版本 - 因此您不仅可以将最新的“dev”合并到“staging”中，还可以将标签“featureX-dev”合并到分​​支上的旧版本“开发”。

如果您使用 Git，如果您必须中断工作并有工作正在进行，本地分支可能会很有用。然后，您可以将正在进行的工作提交到本地临时分支，保持工作副本（和主分支）干净，以便其他人可以在同一台服务器上工作。当然，这需要临时检查您的临时分支，因此您需要与在同一系统上工作的其他任何人协调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:43:18.980

如果没有服务器来规范修改，那么您就无法阻止两个人同时修改同一个文件。这就是为什么`file://`当你有多个人在一个项目上工作时，你不应该在 Subversion 中使用该协议。你不应该在净份额上使用它。

对于 Subversion，您可以使用该`svnserve`过程在包含共享的系统上创建轻量级服务器。它简单快捷。甚至可以将其设置为 Windows 服务。完成后，您可以使用该`svn://`协议，该`svnserve`过程将调节更改。

在这种情况下，Git 可能真的会大放异彩。使用 Git，您通常有一个主存储库，您可以在其中*推送*和*拉取*更改，但这实际上是在使用 Git，就像 Subversion 一样，您无法以这种方式获得 Git 的全部功能。

Git 允许您拥有多个存储库，每个存储库相互拉取和推送更改。事实上，您甚至根本不需要主 Git 存储库。而且，这就是为什么 Git 可能是您处理设置的最佳方式的原因。

您和您的同事都可以拥有自己的私有 Git 存储库。您自己办理入住和退房手续。[你们通过电子邮件](http://andrewprice.me.uk/weblog/entry/generating-patch-emails-with-git)相互同步。没有服务器。没有 Windows 共享。两个人同时尝试更改同一个文件没有问题。

我使用[Dropbox](http://dropbox.com)来存储我的 Git 存储库，因此我可以在家中和工作中使用我的存储库。

> **警告**：如果你像这样使用 Dropbox，你不能让两个人同时推送到这个 Dropbox Git 存储库。你可以让多人做拉动，但不能推动。

但是，这个 Dropbox Git 存储库不会在我和其他人之间共享。它是我的，而且只有我的。我在工作时在我的电脑上使用它，然后回家，然后继续在家工作。如上所述，我使用电子邮件将该存储库与我项目中的其他人同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:30:23.597

> 让我告诉你，如果你在同一个项目上最多只与 4 个开发人员一起工作，那么在同一个文件上工作是理想的

说谎。即使对于围绕单个通用（**真正常见**的映射网络驱动器）代码库的 2 个开发人员，您**也无法**保证，他们不会同时修改同一个文件并覆盖外部更改（使用古老的“锁定和等待”模型除外） ），因此 - 有很多头痛

> 实际的主要问题在于，如果不同的人在同一个 svn checkout 上提交和工作，svn 往往会中断很多。

实际的主要问题**不是Subversion**（如果以正确的方式（tm）使用，它不会破坏任何东西） - 而是未经培训的用户，使用显微镜进行钉钉

> 对我们来说，设置本地开发环境意味着必须设置大约 50x4=200 个不同的开发应用程序才能运行

您可以（已经）更改您的工作流程以正确使用 Subversion，**而无需**构建 LDE。只需添加**本地工作**区层（开发人员在个人 WC 中编辑代码）和服务器上的提交后挂钩以更新服务器开发环境（并且，如果在提交 /for 过时的 WC/ 之前更新 + 合并可能会惹恼开发人员，则可能开始使用分支）

> 我们可以想象一个更简单的不太先进的源代码控制系统更适合这种开发风格

嗯，它是 WebDAV - 在此之上没有任何东西的线性版本控制。对于最终用户，它将是相同的共享驱动器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:52:04.987

> 我想知道是否有任何替代方案可以在中央网络共享上运行良好

恐怕，但**真正的选择**是“改变你懒惰的工作流程和习惯”——你想（现在）结合不兼容的东西

“50-100 个不同的项目”只是 50-100 个存储库（在中心位置）和 50-100 个开发盒上的工作副本（需要一些工作来创建它，是的，但它是一次性操作）和**一个（两个在**DVCS 的情况 - 添加了推送）开发人员稍后在开发过程中采取的**额外行动- 提交。**

用定义明确且易于管理的开发过程和公平的价格替换“非托管无政府状态”的开销最小**

# jquery - 在 jQuery 中拖动图像

> ID：16062459
> 
> 赞同：0
> 
> 时间：2013-04-17T14:14:32.450
> 
> 标签：jquery, file, drag-and-drop

我开发了一个选项，使用户能够将图像拖放到 a`div`中并上传该图像。为此，我正在使用：

```
jQuery.event.props.push('dataTransfer'); 
```

为了获取文件，我正在使用：

```
var files=e.originalEvent.dataTransfer.files; 
```

但我注意到我可以从计算机中获取文件，但无法获取浏览器同一页面上的图像。

为什么会这样？反正有没有把图像拖到同一页上？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:19:30.540

我无法回答你为什么会这样，因为我没有使用 jQuery 拖放。但我知道 HTML5 支持[拖放](http://www.w3schools.com/html/html5_draganddrop.asp)。也许你可以用它来解决它:)

# maximo - 用于在客户端上创建 Xls 文件的 IBM Maximo 文件对话框

> ID：16062470
> 
> 赞同：1
> 
> 时间：2013-04-17T14:15:11.093
> 
> 标签：maximo

我想使用 IBM Maximo 在客户端获取创建 xls 报告文件的位置。但我找不到打开文件对话框的方法。我可以使用用户可以通过“下载”链接下载结果集的相同对象。但我不知道如何找到和使用那个对象，有可能吗？

# firefox-addon - 如何在 Firefox 中创建一个类似于 mac os 中“查找”窗口的窗口

> ID：16062472
> 
> 赞同：0
> 
> 时间：2013-04-17T14:15:14.433
> 
> 标签：firefox-addon

我正在尝试设计一个 Firefox 扩展程序，它显示页面中所选单词的一些信息。

对于这些信息，我喜欢有一个没有边界的窗口，并且有一个指向所选单词的指针。类似于这张图片（mac os 中的查找功能）：

[样品1](http://i.stack.imgur.com/eN7E3.jpg)

这是 Firefox 本身的另一个例子：

[样品2](http://i1-news.softpedia-static.com/images/news-700/Firefox-22-Aurora-Adds-Support-for-HTML5-Desktop-Notifications.png?1365575637)

任何关于如何创建这种窗口的想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:41:57.103

我认为您正在寻找一个[面板](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html "控制板")来执行此操作，并且您可能也可以使用[选择](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/selection.html)模块来处理文本。但是你会发现让你的面板指向你想要的文本有点挑战，目前面板不容易支持这样的定位。

# jquery - Zope 生成的 Ajax 响应文本在某些情况下无法到达客户端

> ID：16062478
> 
> 赞同：0
> 
> 时间：2013-04-17T14:15:26.637
> 
> 标签：jquery, ajax, plone, httpresponse, zope

我有一个 Zope/Plone 服务器，它有一个浏览器（我们称之为`thebrowser`），它将签名请求发送到 ReSTful Web 服务，接收 XML，将其转换为 HTML 并通过 AJAX 将其传递给客户端（因此，从客户端的角度来看，一切都发生在我的服务器上）。大多数情况下这是有效的，但对于某些请求它不会，我不知道为什么。失败的请求需要几秒钟，数据长度约为 100 kB，但我们这里不是在谈论分钟或兆字节。

奇怪的是，该`ZServerHTTPResponse`对象看起来还不错，但它以空字符串的形式到达 Web 客户端（Firefox、Firebug）！

工具链如下所示：

在皮肤中，我有一个`Script (Python)`：

```
## Script (Python) "theservice"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=
##
thebrowser = context.getBrowser('thebrowser')
return thebrowser.get(thedict={'path':'/'.join(traverse_subpath)}) 
```

这使得请求`/theservice/some/sub/path`起作用；`some/sub/path`放在`path`钥匙里。

`get`方法`thebrowser`接受参数，进行一般处理（向[https://remote.service.somewhere/some/sub/path](https://remote.service.somewhere/some/sub/path)`path`发送签名请求），根据 将 XML 响应提供给正确的转换方法，并返回响应，例如由 jquery 手风琴使用。`path`

浏览器`thebrowser`看起来像这样（为清楚起见，删除了错误处理等）：

```
def transformer(func):
    """
    decorator function for generic processing
    """
    def f2(self, txt, req=None, auth_tup=None):
        global HTML_HEAD, HTML_TAIL
        ham = func(self, txt, auth_tup=auth_tup)
        res = list(HTML_HEAD)
        res.extend(ham)
        res.extend(HTML_TAIL)
        return u''.join(res)

    f2.__name__ = func.__name__
    return f2

class Browser(BrowserView):

    def get(self, propagate=True, thedict=None):
        """
        send a request to the remote ReSTful service
        and transform the received XML text to HTML

        pretty URL:
        /theservice/path/as/sub/path
        """
        context = self.context
        request = context.request
        response = request.response
        if thedict is None:
            thedict = request.form
        path = thedict['path']
        # ... set the 'pseudonym', 'theurl' variables ...
        auth_tuples = self._auth_tuples(pseudonym)
        code = None
        text = None
        fo = urlopen(theurl)
        code = fo.code
        headers = fo.info().headers
        # set the headers explicitly; might be unnecessary:
        for line in headers:
            name, text = line.split(':', 1) # found: ': '
            handle_header(response, name, text)
        raw = fo.read().strip()
        text = unicode(raw, 'utf-8')   # -> unicode
        fo.close()
        text = self.transform(path, text, response, theurl, auth_tuples)
        response.setBody(text)
        return response
        # -------------------------------------------------------- get

    def transform(self, path, txt, response, theurl=None, auth_tup=None):
        """
        Choose a transformer function, apply it to the given text,
        and return the HTML text generated
        """
        transformer = self.getTransformer(path) # not included here
        html = transformer(self,                # e.g. tf_xy; see below
                           txt.decode('utf-8'),
                           theurl or path,
                           auth_tup=auth_tup)
        if html is not None:
            response.setHeader('Content-Type', 'text/html; charset=utf-8')
            return html
        return txt.encode('utf-8')

    @transformer
    def tf_xy(self, txt, auth_tup=None):
        """
        transform function for path xy
        """
        root = ElementTree.fromstring(txt)
        res = []
        for child in root.getchildren():
            if child.tag == 'foo':
                res.append(''.join(('<p>', child.text, '</p>'))) # example
            # ...
        return res 
```

当我对`get`方法应用另一个装饰器来记录结果时，我得到了有关该`ZServerHTTPResponse`对象的以下信息：

```
headers = {'connection': 'close',
           'content-length': '110626',
           'content-type': 'text/html; charset=utf-8',
           'date': 'Wed, 17 Apr 2013 09:04:13 GMT',
           'status': '200 OK',
           'transfer-encoding': 'chunked'}
accumulated_headers = 'Set-Cookie: JSESSIONID=471108159E6EF40EB9F2F7305E77EB69; Path=/; Secure\r\n'
body = '<!DOCTYPE html><html><head><meta h(... 110575 bytes total ...)iv></body></html>'
errmsg = 'OK'
status = 200 
```

...这对我来说看起来很合理。无论如何，对于某些请求（可能是响应较大或处理时间最长的请求），客户端浏览器会看到一个空字符串。

版本：Zope 2.10.13、Python 2.4.6（64 位）、Plone 3.3（是的，我们将切换到 Plone 4，但这需要一些时间......）

**更新：** 当我修复`ElementTree`导入以使用编译版本时，我认为我的问题已经解决：

```
try:
    from celementtree import fromstring        # modern Python versions
except ImportError:
    try:
        from cElementTree import fromstring    # Python 2.4
    except ImportError:
        from elementtree import fromstring     # emergency fallback 
```

不幸的是，这对我有用，但对客户无效。

Zope 站点在通常的 RewriteRule 处于活动状态的 Apache VirtualHost 中提供服务：

```
RewriteRule ^/(.*) http://localhost:8082/VirtualHostBase/http/%{HTTP_HOST}:80/theportalroot/VirtualHostRoot/$1 [L,P] 
```

根据 Firebug，不存在 content-length 标头（这可以被 Apache 剥离吗？！）。以下是完整的响应标头：

```
Connection          Keep-Alive
Content-Encoding    gzip
Content-Type        text/html; charset=utf-8
Date                Thu, 18 Apr 2013 12:31:41 GMT
Keep-Alive          timeout=15, max=99
Server              Zope/(Zope 2.10.7-final, python 2.4.6, linux2) ZServer/1.1 Plone/3.2.2 ShellEx Server/4.0.0
Set-Cookie          JSESSIONID=308B09957635CA02829AF5C362FB60E3; Path=/; Secure
Transfer-Encoding   chunked
Vary                Accept-Encoding 
```

我尝试直接通过 Zope 获得响应，但要做到这一点，我显然必须访问 Zope 根目录，并且那里存在权限问题。

# beyondcompare - 为什么 Beyond compare 会在合并模式下打开 git diff？

> ID：16062479
> 
> 赞同：1
> 
> 时间：2013-04-17T14:15:26.710
> 
> 标签：beyondcompare, beyondcompare3

我们已经在我的项目中过渡到 git，现在我想超越它应该使用它的工作。我已阅读[scootersoftware 页面](http://www.scootersoftware.com/support.php?zz=kb_vcs#gitwindows)上的说明。我已经尝试了这两种选择，刚才我在我的 .gitconfig 中使用了旧版本：

```
[diff]
    tool = bc3
[difftool "bc3"]
    path = "\"c:/program files/beyond compare 3/bcomp.exe\" \"$LOCAL\" \"$REMOTE\"" 
```

这不像我预期的那样工作。这打开了超越比较工具，但由于某种原因，我进入了合并模式，顶部有三个窗口，底部有一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T13:58:52.963

不确定您的情况是否与我的相同，但我遇到了类似的问题，但这是由 .gitconfig 中的合并设置引起的

我的设置包含以下行

```
[merge]
tool = BeyondCompare3

[diff]
guitool = BeyondCompare3

[difftool "BeyondCompare3"]
path = C:/Program Files (x86)/Beyond Compare 3/BComp.exe
cmd = \"C:/Program Files (x86)/Beyond Compare 3/BComp.exe\" \"$LOCAL\" \"$REMOTE\"

[mergetool "BeyondCompare3"]
path = C:/Program Files (x86)/Beyond Compare 3/bcomp.exe
cmd = \"C:/Program Files (x86)/Beyond Compare 3/bcomp.exe\" \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\" 
```

似乎发生的是 git 使用后一个选项（带有四个参数）而不是前者。

解决方法是从

```
[mergetool "BeyondCompare3"] 
```

至

```
[mergetool "MergeBeyondCompare3"] 
```

这意味着它使用带有两个参数的 difftool 版本。

您会期望您还应该能够将第一部分更改为

```
[merge]
tool = MergeBeyondCompare3 
```

但是如果你这样做了，那么该命令`git difftool file1.txt file2.txt`将使用 Merge 而不是 diff 将使用返回到我们所在的位置。

缺点是如果你真的想使用合并，你需要使用`-t MergeBeyondCompare3`命令行选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T23:47:09.507

我相信我得到了您希望的窗口，这是我的设置。

```
[diff]
    tool = bc3x
    renames = copies
[difftool "bc3x"]
    cmd = \"c:/program files (x86)/beyond compare 3/bcomp.exe\" \"$LOCAL\" \"$REMOTE\"
[difftool]
    prompt = false 
```

我多年来一直使用相同的设置，并没有给我带来任何问题。希望这可以帮助。

# javascript - 如何异步读取 JSON 对象？

> ID：16062488
> 
> 赞同：-2
> 
> 时间：2013-04-17T14:16:00.733
> 
> 标签：javascript, jquery, json

如何一次运行 20 个函数，在同一页面上的浏览器中异步读取对象？

```
var myLargeOBJECT = {}; // object on page

var  read1 = function(){
   $.getJSON( myLargeOBJECT, function( json ) {
      console.dir( json);
    });

}

// etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:26:31.990

您可以在 java 脚本中尝试线程，网络中有一些库我没有使用它们，但我认为这是您需要的，我检查了一下，有一个简单而有益于您正在做的事情 [http://sourceforge.net /项目/jsthread/](http://sourceforge.net/projects/jsthread/)

```
<script type="text/javascript">
  function function1(){
   //Do something
  }

function function2(){
 //Do something
}

    Concurrent.Thread.create(function1);
    Concurrent.Thread.create(function2);    
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:28:10.870

改用 $.ajax 并根据您的要求设置 async = true 或 async = false

```
$.ajax({
 url: myUrl,
 dataType: 'json',
 async: true,
 data: myData,
 success: function(data) {
//stuff
  }
}); 
```

# c# - 强类型 MVC 视图模型

> ID：16062490
> 
> 赞同：1
> 
> 时间：2013-04-17T14:16:02.427
> 
> 标签：c#, asp.net-mvc, razor

我正在尝试强烈键入呈现为 ASP.NET ASPX 页面的 MVC 视图模型。一切都在一个大项目中。但是，它说它找不到名称空间，我做错了什么？

这是错误：

```
CS0234: The type or namespace name 'MyModel' does not exist in the namespace 
'MyProject.Models' (are you missing an assembly reference?) 
```

这是我的自定义模型：

```
namespace MyProject.Models {
    public class MyModel{
        public string companyID { get; set; }
        public MyModel(string companyID){
            this.companyID = companyID;
        }
    }
} 
```

这是我在 ASPX 中呈现的强类型视图，文件名为 MyStronglyTypedView.aspx：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<MyProject.Models.MyModel>" %>
<%@ import namespace='MyProject.Models' %>
.....
<script runat="server">
    protected void Page_Load(object sender, EventArgs e) {
        var curCompany = Model.companyID;
    }
</script>
.... 
```

以下是我调用页面并将模型传递给它的方式（我在单独的 Razor 页面上将其作为部分调用）：

```
@Html.Partial("MyStronglyTypedView",new MyProject.Models.MyModel("1")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:46:39.610

您遇到的错误是由于`Page`指令`Inherits`属性值不正确而发生的。指令是 ASP.NET 标记的一部分，因此不是特定于语言的。例如

```
System.Web.Mvc.ViewPage<MyProject.Models.MyModel> 
```

是您在 C# 中指定泛型类型的方式，但在 VB.NET 中会这样说

```
System.Web.Mvc.ViewPage(of MyProject.Models.MyModel) 
```

总而言之，这里的类型应该用 CLR 表示法指定。在您的情况下，它可能看起来像

```
System.Web.Mvc.ViewPage`1[[MyProject.Models.MyModel, MyProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 
```

这就是所谓的完全限定类型名称。要查看特定类型的此名称，可以使用`Type.FullName`属性：

```
Type targetType = typeof(System.Web.Mvc.ViewPage<MyProject.Models.MyModel>);
string name = targetType.FullName; 
```

# c# - 使用 LINQ 从循环中获取单个 ID

> ID：16062493
> 
> 赞同：0
> 
> 时间：2013-04-17T14:16:12.453
> 
> 标签：c#, linq

我有一种方法可以将具有相同 productID 的商品组合在一起，然后将它们的数量加在一起以获取购物车中的商品。现在我正在尝试添加它，它还添加了从添加到购物车的页面中的数量。因此，在调用此方法时，我会发送用户选择的 productid 和数量以添加到总数量中。但是我遇到的问题是比较发送到此方法的项目的产品 ID 和组合在一起的产品 ID。

这是我下面的内容，评论部分是我试图解决这个问题但发现我的想法是错误的。

```
double totalQty = 0;
bool isQtyValid = true;

List<ShoppingCartDTO> shoppingList = ShoppingCart.Fetch(string.Format("WHERE SessionID='{0}'", sessionID)); 
foreach (ShoppingCartDTO temp in shoppingList)
 {
    var groupList = shoppingList.GroupBy(item => item.ProductID);
    foreach (var m in groupList)
     {                    
        //var productID = m.Select(p => p.ProductID);
        //int prodID = Convert.ToInt32(productID);
        //if (ProductID == prodID)
        //{
             var sum = m.Sum(i => i.Quantity);
             totalQty = sum;
             //totalQty += qty;
             isQtyValid = CheckQty(totalQty, temp.ProductID, temp.CustomerID);
        //}
     }
 } 
```

如果有人可以提供一些指示或想法，我将不胜感激。如果它可以使用更多解释，我也可以这样做，或者如果您想查看我正在使用的更多代码，我也可以添加。

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:19:19.183

您按产品 ID 分组，因此它属于[`Key`](http://msdn.microsoft.com/en-us/library/bb343251.aspx)您的组：

```
foreach (var m in groupList)
{                    
    var productID = m.Key;
    // The rest of your code.
} 
```

# api - 具有平铺视图样式的列表视图，子项不出现？

> ID：16062495
> 
> 赞同：0
> 
> 时间：2013-04-17T14:16:20.683
> 
> 标签：api, winapi, listview

我正在`ListView`使用 pure `win32` `api`。但是当我设置`ListView`平铺视图时。那么子项目不会出现在项目旁边。我的代码如下：

```
ListView_SetView(m_hwndListview,LV_VIEW_TILE);
//Set tile view info
SIZE size = { 150, 75 };
LVTILEVIEWINFO tileViewInfo = {0};

tileViewInfo.cbSize   = sizeof(tileViewInfo);
tileViewInfo.dwFlags  = LVTVIF_FIXEDSIZE;
tileViewInfo.dwMask   = LVTVIM_COLUMNS | LVTVIM_TILESIZE;
tileViewInfo.cLines   = 3;
tileViewInfo.sizeTile = size;

//Set tile info
LVTILEINFO lvti = {0};
int order[2];
order[0]=2;
order[1]=1;
lvti.cbSize = sizeof(LVTILEINFO);
lvti.iItem = 0;
lvti.cColumns = 2;
lvti.piColFmt =  LVCFMT_LEFT;
lvti.puColumns = PUINT(order);

ListView_SetTileInfo(m_hwndListview, &lvti);
ListView_SetTileViewInfo(m_hwndListview, &tileViewInfo); 
```

有谁知道解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T21:32:26.120

`lvti.piColFmt`应该是指向列格式值数组的指针，而不是单个值。在你的情况下，它可能是这样的：

```
int colfmt[2];
colfmt[0] = LVCFMT_LEFT;
colfmt[1] = LVCFMT_LEFT;
lvti.piColFmt = colfmt; 
```

希望有帮助！

# javascript - 使用 Javascript 更改表单信息？

> ID：16062496
> 
> 赞同：1
> 
> 时间：2013-04-17T14:16:28.110
> 
> 标签：javascript, paypal

有没有办法用 Javascript 更改表单的内容？

我有一系列贝宝按钮，但希望用户能够以加元或美元购物。

表单看起来像这样：

```
<form onsubmit="return false;">
<input name="amount" value="6.99" type="hidden" />
<input name="currency_code" value="CAD" type="hidden" />
</form> 
```

我需要将 value="CAD' 更改为 value="USD"

有什么方法可以让我在网站上设置一个按钮或某种“切换”，让用户可以更改货币？它应该发生在每个产品上。

我有人实现了简单的购物车，但它们不再可用

有没有更好的方法来做到这一点？（我虽然这可能是最简单的）但也许应该在结帐时以某种方式完成？我想这会更复杂。

在此先感谢，希望我已经清楚了！如果您需要更多信息，请与我们联系。

我的网站是 www.bodesi.com（如果有帮助的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:53:36.803

您可以通过 javascript DOM 来实现。

例子：`<input type="button" onclick="document.getElementsByName('currency_code')[0].value='USD';">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:49:09.073

您可以使用 jQuery 轻松完成此操作，看起来您的网站已经包含它。

这是一种方法：http: [//jsfiddle.net/x7LDN/](http://jsfiddle.net/x7LDN/)

```
$(function() {
    $('#change_currency').click(function(){
        $('input[name="currency_code"]').val('USD');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:56:54.820

如果我正确理解了您的要求，请在某处向用户询问货币

```
<select name = "currency" id='currency' >  
 <option value='USD'>USD</option>
 <option value='CAD'>CAD</option>
</select> 
```

然后在同一页面上使用javascript更改paypal按钮的值

如果您使用的是 jquery：

```
(function($){ 
  $("#currency").change(function(){ 
     $('input[name="currency_code"]').val($(this).val());
  }); 
})(jQuery); 
```

如果你想使用干净的 javascript 然后

```
document.getElementById('currency').onchange =  function(){ 
  document.getElementsByName('currency_code')[0].value= this.value; 
} 
```

# ruby-on-rails - Rails 3 + 乘客配置文件

> ID：16062501
> 
> 赞同：1
> 
> 时间：2013-04-17T14:16:40.907
> 
> 标签：ruby-on-rails, apache, .htaccess, passenger

我一直在尝试在最初用于多个 php 应用程序的盒子上安装 rails 应用程序。我安装了乘客并创建了一个 conf 文件，但我对它们如何协同工作感到困惑。

如果我想访问 Rails 应用程序，我的 ServerName 应该是什么？这个盒子是一个运行 apache2 的 debian 挤压，安装了乘客模块。下面是我的conf文件。我目前必须去 xxx.xxx.xxx.xxx/leoadmin/public 才能让应用程序正常运行。我在公共目录中有以下 htaccess。如果我的 conf 文件配置正确，我认为这是不必要的。

我认为我的主要问题是 conf 文件配置错误。我相信正在加载 conf 文件，但我不明白为什么我仍然需要 htaccess 才能看到任何操作。

.htaccess

```
#PassengerEnabled On
PassengerAppRoot /var/www/leoadmin/
#Options -MultiViews
#PassengerResolveSymlinksInDocumentRoot on
#Set this to whatever environment you'll be running in
RailsEnv production
#RackBaseURI /var/www/leoadmin 
```

虚拟主机配置

```
<VirtualHost *>

    ServerName leoadmin

    DocumentRoot /var/www/leoadmin/public
    <Directory /var/www/leoadmin/public>
            Allow from all
    </Directory>
    Alias /leoadmin /var/www/leoadmin/public
    <Location /leoadmin>
            SetEnv RAILS_RELATIVE_URL_ROOT "/leoadmin"
            PassengerAppRoot /var/www/leoadmin
    </Location>

    ErrorLog /var/log/apache2/leoadmin-error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/leoadmin-access.log combined

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:33:20.460

几个月前，我在试图解决这个问题时感到痛苦和痛苦，我的配置允许我做子 URI，所以我不确定这是否是你想要的，但它会沿着这些路线。我从来不需要`.htaccess`这个设置的文件：

```
NameVirtualHost *:80 <VirtualHost *:80>
ServerName www.test.co.uk
DocumentRoot /web/rails
<Directory /web/rails>
    Allow from all
</Directory>

RailsBaseURI /test
RailsEnv development
<Directory /web/rails_projects/test/>
    Options -MultiViews
</Directory> 
```

对我来说`/web/rails`是一个根目录，从那里我有许多符号链接到我`/home/`存储项目的目录。ServerName 是您用于将被识别的机器的任何限定名称。

（以防万一，我正在运行乘客 3.0.9 和 Rails 3.2.11）

# grails - 在 Grails 中安装 war 文件时运行脚本

> ID：16062503
> 
> 赞同：0
> 
> 时间：2013-04-17T14:16:47.277
> 
> 标签：grails, installation, war

在安装 Grails 战争文件期间是否可以运行某种脚本？

例如，我想在安装过程中将我的应用程序的 Config.groovy 文件复制到我们的 Tomcat 服务器的 conf 文件夹中。通过这种方式，它可以用作外部配置文件（而不必每次都手动创建并移动它）。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:35:37.933

我认为您可以使用 BootStrap 来做到这一点。当您的应用程序初始化时，检查您是否在 Tomcat（catalina.home 属性）中，如果文件不存在，请创建。

```
class BootStrap {
  def init = {
    if(grails.util.Environment.warDeployed) {
       String homeFolder = System.getProperty('catalina.home')
       if(homeFolder) {
         File externalConfigFile = new File("$homeFolder/conf/MyAppConfig.groovy")
         if(!externalConfigFile.exists()) {
           externalConfigFile.createNewFile()
         }
       }
    }
  }
} 
```

# c# - 删除和重新排序列表元素

> ID：16062505
> 
> 赞同：0
> 
> 时间：2013-04-17T14:16:51.300
> 
> 标签：c#, linq, linq-to-objects

**是否可以在不**使用 C# 循环 (foreach; for; while; etc) 而仅使用 C# Linq 或 lambda 表达式的情况下解决以下问题？

问题：给定一个 Task 对象列表和一个已删除 TaskId 的列表。我希望仅使用不在已删除 TaskId 列表中的元素更新**该**列表，并且对剩余的 Task 元素进行重新排序。

## 细节：

```
(1*) Given a list of Task objects:

TaskId  Group   Name    Order

281        1    "abc"   1  
726        1    "dre"   2  // note: will be removed  
9891       1    "euf"   3  // note: will be removed  
87         1    "wop"   4  
932        1    "hjd"   5  

102        2    "fhl"   1  // note: will be removed  
44         2    "bgg"   2  
30         2    "qds"   3  
293        2    "djf"   4  // note: will be removed  
389        2    "hkd"   5  

12         3    "hjf"   1  
900        3    "xdf"   2  // note: will be removed  

(2*) Given a list of removed TaskIds:  
TaskId  
726  
9891  
102  
293  
900 
```

现在，在基于列表 (2*) 删除列表 (1*) 之后，我希望列表 (1*) 看起来像（注意：剩余元素的顺序也会更新）：

列表 (1*) 已更新：

```
TaskId  Group   Name    Order  

281        1    "abc"   1  
87         1    "wop"   2  // note: new order  
932        1    "hjd"   3  // note: new order  

44         2    "bgg"   1  // note: new order  
30         2    "qds"   2  // note: new order  
389        2    "hkd"   3  // note: new order  

12         3    "hjf"   1  // note: order is kept unchanged. 
```

Task 类的定义如下：

```
 public class Task {
      public int TaskId { get;set; }
      public int Group { get; set;}
      public string Name { get; set; }
      public int Order { get; set;}

} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T14:28:38.233

```
var tasks = new[]{
        new Task{TaskId = 281, Group = 1, Name = "abc", Order =1},
        new Task{TaskId = 726 , Group = 1, Name = "dre", Order =2},
        new Task{TaskId = 9891, Group = 1, Name = "euf", Order =3},
        new Task{TaskId = 102, Group = 2, Name = "wop", Order =1},
        new Task{TaskId = 44, Group = 2, Name = "wop", Order =2},
        new Task{TaskId = 30, Group = 2, Name = "wop", Order =3},
        new Task{TaskId = 293, Group = 2, Name = "wop", Order =4},
        new Task{TaskId = 295, Group = 3, Name = "was", Order =1},
};

int[] itemsToRemove = {726, 102, 293};

tasks.Where(task => !itemsToRemove.Contains(task.TaskId))
     .GroupBy(task => task.Group)
     .SelectMany(grp => grp.Select((task, grpIndex) => 
                                   { task.Order = grpIndex + 1; return task; })); 
```

这将返回：

```
TaskId Group   Name Order
281    1       abc  1 
9891   1       euf  2 
44     2       wop  1  
30     2       wop  2 
295    3       was  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:28:50.323

```
List<Task> tasksList = new List<Task>();
List<int> tasksIds = new List<int>();
List<Task> resultList = tasksList.FindAll(task => !taskIds.Contains(task.TaskId)); 
```

# vba - 使用 Access 的应用程序定义或对象定义的错误

> ID：16062506
> 
> 赞同：0
> 
> 时间：2013-04-17T14:16:57.217
> 
> 标签：vba, email, ms-access, outlook, ms-office

我正在尝试从 Access 通过 Outlook 发送自动电子邮件，但我遇到了一个问题，如果用户尚未打开他们的电子邮件，我将获得`Application-Defined or Object-Defined Error`. 我正在使用后期绑定来避免 .dll，因为我在 Office 2003 和 Office 2010 上都有用户。

无论如何围绕这个错误并且仍然允许电子邮件通过？或者如果还没有，可能会“迫使”前景开放？

提前致谢

当然，这是电子邮件的完整代码。

当我通过它失败时`Set appOutlookRec = .Recipients.Add(myR!Email)`

```
Option Explicit
Function SendEmail(strDep, strIssue, strPriority, strDate, strDesc, wonum, user)

Const olMailItem = 0
Const olTo = 1
Const olCC = 2
Dim sqlVar As String
Dim strSQL As String

If strDep = "Cycle" Then

ElseIf strDep = "Fabrication" Then
    sqlVar = "Fabricator"
ElseIf strDep = "Facility" Then
    sqlVar = "Facility"
ElseIf strDep = "Gage" Then
    sqlVar = "Gage"
ElseIf strDep = "IT" Then
    sqlVar = "IT"
ElseIf strDep = "Machine Shop" Then
    sqlVar = "Machine_Shop_Manager"
ElseIf strDep = "Safety" Then
    sqlVar = "Safety"
ElseIf strDep = "Maintenance" Then
    sqlVar = "Maintenance_Manager"
ElseIf strDep = "Supplies Request" Then
    sqlVar = "Supplies"
Else:
End If

Dim myR As Recordset

'Refers to Outlook's Application object
Dim appOutlook As Object
'Refers to an Outlook email message
Dim appOutlookMsg As Object
'Refers to an Outlook email recipient
Dim appOutlookRec As Object

'Create an Outlook session in the background
Set appOutlook = CreateObject("Outlook.Application")

'Create a new empty email message
Set appOutlookMsg = appOutlook.CreateItem(olMailItem)

'Using the new, empty message...
With appOutlookMsg    

strSQL = "SELECT Email FROM Employees WHERE " & sqlVar & " = True"
Set myR = CurrentDb.OpenRecordset(strSQL)

Do While Not myR.EOF
Set appOutlookRec = .Recipients.Add(myR!Email)
appOutlookRec.Type = olTo
myR.MoveNext
Loop

strSQL = "SELECT Email FROM Employees WHERE '" & user & "' = Username"

Set myR = CurrentDb.OpenRecordset(strSQL)

Set appOutlookRec = .Recipients.Add(myR!Email)
appOutlookRec.Type = olCC

.Subject = wonum

.Body = "Department: " & strDep & vbNewLine & vbNewLine & _
    "Issue is at: " & strIssue & vbNewLine & vbNewLine & _
    "Priority is: " & strPriority & vbNewLine & vbNewLine & _
    "Complete by: " & strDate & vbNewLine & vbNewLine & _
    "Description: " & strDesc

.Send

End With

Set myR = Nothing
Set appOutlookMsg = Nothing
Set appOutlook = Nothing
Set appOutlookRec = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:39:44.660

尝试在 .Send 之前使用 .Save。我正在通过 MS Access 安排 Outlook 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T13:45:51.053

因此，似乎正在发生的是您对 Outlook.Application 的引用。停滞 - 因为没有更好的词。您不仅想创建 Outlook 会话 - 您还想连接到现有的正在运行的应用程序。

我不是 Access 的专家，所以我只建议笼统地说：尝试在已经运行的 Outlook 应用程序上获取句柄，否则让它打开 Outlook（给它时间使用 sleep/wait 和 DoEvents 命令完全启动）并再次尝试获取该句柄。

我`VBA`在 Outlook 中使用试图读取发件人姓名（也得到相同的错误）。追溯到我获取当前 Outlook 应用程序句柄的方法。代替：

```
Set appOutlook = CreateObject("Outlook.Application"); 
```

我不得不：

```
Set appOutlook = ThisOutlookSession; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T15:19:09.330

在该行之后`Set appOutlook = CreateObject("Outlook.Application")`，添加以下内容：

```
set NS = appOutlook.GetNamespace("MAPI")
NS.Logon 
```

# nlp - 我应该删除带有 POS 标记的停用词吗？

> ID：16062511
> 
> 赞同：1
> 
> 时间：2013-04-17T14:17:14.503
> 
> 标签：nlp, stemming, chunking, pos-tagger

我是这个 NLP 的新手，但我见过的所有 POS 标记和句子分块的例子似乎都没有删除停用词。所以我有一个问题，如果我正在做 POS 标记和分块，这是否消除了删除停用词（以及词干）的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:38:36.230

如果没有更多上下文来解释您要完成的工作，则绝对没有理由删除停用词。大多数需要 POS 标签的应用程序都需要它们用于所有输入文本，包括停用词。

# r - R while循环和次数

> ID：16062517
> 
> 赞同：-2
> 
> 时间：2013-04-17T14:17:27.547
> 
> 标签：r, for-loop, while-loop

有一个while循环，这工作正常。但是我还需要添加另一个条件。

我需要循环继续运行，直到它满足 while 循环，但我还需要补充一点，这只能重复 x 次。

我认为您必须创建一个 for 循环才能执行 x 次，是否可以在其中放置一个 while 循环？

基本上我怎样才能使循环达到目标或在 x 循环后停止？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T14:25:20.480

中的表达式`while`必须为 TRUE，循环才能继续。您可以使用`|`或`&`添加额外的条件。此循环运行 99 次或直到随机变量的总和小于 100。

```
counter <- 0
result <- 0

while(counter < 100 | sum(result) < 100) {
  result <- sum(result, rnorm(1, mean = 5, sd = 1))
  counter <- sum(counter, 1)
}

> result
[1] 101.5264
> counter
[1] 21 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:29:04.313

只需将当前迭代器值作为参数传递给您的函数。这样，如果达到特定值，您就可以中断递归。

但是如果你使用递归，为什么会有一个while循环，例如：

```
add_one_recursive = function(number) {
   number = number + 1
   cat("New number = ", number, "\n")
   if(number > 10) {
      return(number)
   } else {
      return(add_one_recursive(number))
   }
 }
final_number = add_one_recursive(0) 
New number =  1 
New number =  2 
New number =  3 
New number =  4 
New number =  5 
New number =  6 
New number =  7 
New number =  8 
New number =  9 
New number =  10 
New number =  11 
```

根本不需要显式循环。

# ruby-on-rails - 在 Rails 的 ApplicationController 中将 id 保存到会话中以某种方式不起作用

> ID：16062518
> 
> 赞同：0
> 
> 时间：2013-04-17T14:17:31.450
> 
> 标签：ruby-on-rails, session, ruby-on-rails-3.2

我是 Rails 新手，现在正在学习“使用 Ruby on Rails 进行敏捷 Web 开发”教程。他们正在建立一个网上商店，任务 D 是关于创建一个购物车。为了让 LineItemsController 知道将物品放在哪个购物车中，cart_id 保存在会话中：

```
class ApplicationController < ActionController::Base

  private
  def current_cart
    Cart.find(session[:cart_id])
  rescue ActiveRecord::RecordNotFound
    cart = Cart.create
    session[:card_id] = cart.id
    cart
  end

end 
```

奇怪的是，这不起作用（尽管经过彻底的互联网搜索，在我看来，没有其他人遇到过这个问题）。LineItemsController (< ApplicationController) 按理调用 current_cart，但 session[:cart_id] 始终为 nil，因此会引发 RecordNotFound 错误并创建新的购物车。这导致很多购物车仅包含 1 件商品。

奇怪的是，如果我将相同的方法放入 LineItemsController 类本身，一切都会正常运行！不过，这不是一个可接受的解决方案，因为我可能还需要在其他控制器中使用 current_cart 方法。无论如何，方法被继承有什么区别？？？

我正在使用 Rails 3.2.13 和 Ruby 2.0.0，本教程似乎适用于 Rails 3.2.0 和早期版本的 Ruby。从那以后，关于会话的任何事情都发生了变化，所以我必须做一些不同的事情？？？还是我错过了一些明显的东西？？？如果我没有让这个基本的东西正常工作，我不确定如何继续本教程......

* * *

**编辑**
以提供一些上下文： current_cart 基本上称为`@cart = current_cart`：

```
class LineItemsController < ApplicationController

  #creates a line_item of a product and puts it in the cart
  def create 
    @cart = current_cart 
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)

    #...
  end     
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:55:36.050

您的代码中有错字，您正在阅读 session[:car*t*_id] 但正在编写 session[:car*d*_id]

另外，如果你想继承你的方法，你应该使用`protected`而不是`private`

# javascript - 禁用输入提交

> ID：16062525
> 
> 赞同：13
> 
> 时间：2013-04-17T14:18:01.663
> 
> 标签：javascript, jquery, html

我有一个内部带有文本字段的表单，如果用户在选择文本字段时按下，我试图禁用浏览器提交整个表单时的默认行为`Enter`。

```
$('#recaptcha_response_field').keydown(function(event) { if (event.keyCode == 13) {
     event.preventDefault();
     event.stopPropagation();
     event.stopImmediatePropagation();
     alert("You Press ENTER key");
     return false;
   } 
}); 
```

目前正在获取“您按 ENTER 键”并且默认行为未被覆盖。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T14:22:36.090

尝试这个：

```
$(document).on("keypress", 'form', function (e) {
    var code = e.keyCode || e.which;
    if (code == 13) {
        e.preventDefault();
        return false;
    }
}); 
```

这将阻止表单提交`keypress`

[**在这里演示**](http://jsfiddle.net/6Avvk/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-13T20:54:21.230

我发现了这个，它对我有用。

```
<input type="text" name="somename" id="someid" value="" onkeypress="return event.keyCode!=13"> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-15T12:19:53.297

防止脚本阻止其他元素（例如 textarea）上的 enter 键。将目标从“表单”更改为“输入”。

```
$(document).on("keypress", "input", function (e) {
    var code = e.keyCode || e.which;
    if (code == 13) {
        e.preventDefault();
        return false;
    }
});
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T14:50:27.260

如果上述解决方案都不适合您，并且您仍然在使用 javascript，为什么不使用按钮类型作为“按钮”`<input type='button'>`并使用 javascript 提交

```
$('#form_id').submit(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-27T09:58:10.327

你可以使用这个脚本来防止整个输入。

```
<script type="text/javascript">
        $(document).on("keypress", 'form', function (e) {
            if (e.target.className.indexOf("allowEnter") == -1) {
                var code = e.keyCode || e.which;
                if (code == 13) {
                    e.preventDefault();
                    return false;
                }
            }
        });
    </script> 
```

你把控件需要使用的类名输入

# c# - 将对象转换为字符串数组？

> ID：16062527
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:08.680
> 
> 标签：c#, linq, casting

我有这个代码：

```
Strutture = from Ricettivito s in Strutture
            where s.ServiziAttivi.Cast<string>().Intersect(IDSServizi).Count() == IDSServizi.Count()
            select s; 
```

我需要：

1.  将 ServiziAttivi（MyService 列表）转换为字符串列表（必须包含 MyService.UniqueID）
2.  然后，检查此列表是否包含 IDSServizi 的每个元素（这是一个字符串列表）。

但似乎我无法进行这种转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:27:41.710

首先转换为`.Cast<Ricettivita.MyService>()`然后选择一个字符串属性。

```
 where s.ServiziAttivi
             .Cast<Ricettivita.MyService>()
             .Select(x=>x.UniqueID).Intersect(IDSServizi).Count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:22:42.010

我认为你应该使用`Select`而不是`Cast`：

```
Strutture = from Ricettivito s in Strutture
            where s.ServiziAttivi.Select(x => (string)x.UniqueID).Intersect(IDSServizi).Count() == IDSServizi.Count()
            select s; 
```

# string - 具有 R1C1 引用样式的列的 Excel 匹配函数

> ID：16062531
> 
> 赞同：2
> 
> 时间：2013-04-17T14:18:22.007
> 
> 标签：string, excel, reference, match, excel-formula

我正在使用 excel 来查看我的数据，我有一个 2000 列和数千行的矩阵。我想在特定列中搜索一些字符串。我一直在网上阅读，该`Match()`功能通常用于此目的。实际上，我不确定两件事：

1-如何制定命令，因为我的列是 R1C1 参考样式？（我的意思是我有数字而不是字母作为列名）

2-我不知道我有多少行，我只想让函数在整个列中搜索这个字符串。这是我找到的命令，它不能解决上述两个问题中的任何一个

```
=MATCH("string",A1:A100, 0) 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:29:50.237

这是一个简单的：

```
=MATCH("string",A:A,0) 
```

但是，首选技术通常是创建命名引用。然后，您可以只使用要在`MATCH()`公式中搜索的范围的名称。命名范围通常更容易在较大的项目中使用（或从小开始但您希望在工作簿变大时保持一定灵活性的项目）。

**编辑：**如果你想坚持 R1C1，公式可能看起来像这样：`=MATCH("string",C1,0)`

# c# - Windows Phone 7.1 中的 C# SetProperty() 方法在哪里？

> ID：16062533
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:30.120
> 
> 标签：c#, .net, data-binding, properties, mvvm-light

我的应用程序是使用 MVVM Light 的 C# 应用程序，面向 Windows Phone 7.1 平台。我的视图模型中有一个属性，其源内容是通过 REST 请求从外部 Web 服务器异步检索的。该属性经常用于与 View 的 UI 元素的绑定。

我发现这个 SO post 显示了正确执行此操作的模式。使用此模式，如果支持该属性的私有数据成员从未设置，则该属性的初始*获取*请求将返回*NULL 。*异步加载完成后，将调用**SetProperty()**以更新属性。我的猜测是，这种技术用于避免触发对*setter*的嵌套调用，同时仍然引发属性的属性更改事件，从而通知绑定到该属性的 UI 元素。*setter*是私有的，以避免任何外部代码干扰这种模式：

[将异步结果分配给数据绑定属性](https://stackoverflow.com/questions/11176349/assigning-an-async-result-to-a-data-binding-property)

问题是我找不到包含**SetProperty()**的 WP7 程序集。我发现这个包含自定义的 WP7 的 MVVM 示例，但是您必须从受保护的类派生才能使用它，如果可以避免它，我不想这样做：

[Windows 应用商店应用：WPF 和 Silverlight 开发人员指南，第 2 部分](http://archive.msdn.microsoft.com/mag201303winstore/Release/ProjectReleases.aspx?ReleaseId=5988)

在哪里可以找到用于 WP7的**SetProperty()方法？**

# php - 使用 php 和 twitter 引导的动态下拉菜单

> ID：16062537
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:36.493
> 
> 标签：php, html, twitter-bootstrap

感谢您阅读...我有 2 层导航。它按好，坏和评论计数对内容进行排序。如果用户点击好它会带来另一个按时间对内容进行排序的导航。比如今天，过去一周，过去一个月。

我可以添加`class='active'`使用`$_SERVER['PHP_SELF']`，但 twitter bootsrap 下拉菜单并不简单`class='active'`，它很复杂。我无法提出解决方案。我应该使用吗？前锋？我不知道。请查看代码中的 html 命令。这是我的代码。

```
<ul class="nav nav-tabs">
        <li <?php if (basename($_SERVER['PHP_SELF']) == '/?Top'): ?> class="active"<?php endif; ?>><a href="/?Top">Top Content</a></li> 
        <li <?php if (basename($_SERVER['PHP_SELF']) == '/?Bad'): ?> class="active"<?php endif; ?>><a href="/?Bad">Bad Content</a></li>
        <li <?php if (basename($_SERVER['PHP_SELF']) == '/?Comments'): ?> class="active"<?php endif; ?>><a href="/?Comments">Most Commented</a></li>
<!-- It's confusing me when It comes here... because as you see active option is not li tag. it's bunch of html code and also any url bellow can ben any of those up -->
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-time"></i> Today <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="URL=week" />Last 1 Week</a></li>
              <li><a href="URL=month" />Last 1 Month </a></li>
              <li><a href="URL=all" />All</a></li>
            </ul>
          </li>
    </ul> 
```

html 推荐：当它来到这里时，我感到很困惑......因为正如你所见，活动的 li 不是 li，它是一堆 html 代码，而且下面的任何 url 都可以是其中的任何一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:29:43.930

您可以在您的孩子下拉列表中使用`"active"`外部类`li`（该类具有 class `"dropdown"`）和另一个类。`"active"`

这是一个例子

```
<ul class="nav nav-tabs">
    <li class=""><a href="#">Home</a></li>
    <li><a href="#">Help</a></li>
    <li class="dropdown active">
      <a href="#" data-toggle="dropdown" class="dropdown-toggle">Dropdown <b class="caret"></b></a>
      <ul class="dropdown-menu">
        <li><a href="#">Action</a></li>
        <li class="active"><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a href="#">Separated link</a></li>
      </ul>
    </li>
  </ul> 
```

[JSBin](http://jsbin.com/oyiqak/2/)中的现场演示

# filesystems - 将文件标记为“正在使用”

> ID：16062539
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:39.243
> 
> 标签：filesystems, embedded, fat

我正在开发类似“MP3 播放器”的 USB 设备。它被 USB 主机 (Windows) 视为大容量存储设备。我希望能够在连接设备时继续播放当前歌曲。在理想的世界中，用户应该能够使用他的文件资源管理器删除所有 mp3 文件，但当前正在播放的文件会被 Windows 视为“正在使用”。

文件系统是 FAT，我使用 FatFS 来读取设备上的文件。

FAT 是否允许这样的事情（将文件标记为“正在使用”）？有什么更聪明的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:50:27.890

与并非专门为此目的设计的每个文件系统一样，FAT 不是集群文件系统。因此，没有规定一次从多个主机安装它。所以不能同时从USB主机的操作系统和USB设备的嵌入式操作系统挂载。在文件系统级别“正在使用”文件的概念对于非集群文件系统来说是没有意义的。

有关集群文件系统的示例，请查看[OCFS2](http://en.wikipedia.org/wiki/OCFS2)或[GFS2](http://en.wikipedia.org/wiki/GFS2)。但是这些需要网络锁管理器之类的东西，而且您不太可能轻松地将它们用于 USB 设备之类的应用程序。

# php - 在while循环中使用mysql查询获取先前查询时出错

> ID：16062540
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:41.463
> 
> 标签：php, mysql, syntax, nested

我有 2 个查询。我正在应用第一个选择查询，并使用 my_fetch_array 通过 while 循环获取结果，但是，在那段时间内，我正在使用另一个选择查询，但此时我遇到了错误。

我不能在 while 内使用另一个选择吗？

```
$i = 1;
$result1 = mysql_query("SELECT x, count(*) FROM table1 group by x ORDER BY count(*) desc");

while ($rowRes1= mysql_fetch_array($result1 ))
{
echo "<tr>";
echo "<td ALIGN=CENTER style=width:5%>" . $i . "</td>";
echo "<td ALIGN=CENTER style=width:40%>" . $rowRes1['0'] . "</td>";
echo "<td ALIGN=CENTER style=width:10%>" . $rowRes1['1'] . "</td>";

$result2 = mysql_query("SELECT x FROM data where x = $rowRes1['0'] ORDER BY y ASC LIMIT 1")

while ($rowRes2= mysql_fetch_array($result2 ))
{ 
echo "<td ALIGN=CENTER style=width:10%>" .     $rowRes2['0'] . "</td>";
}
$i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:28:33.937

PHP 无法解释包含数组访问器的字符串，例如双引号字符串中的 $rowRes1['1']。

将数据存储在另一个变量中，例如 $rowRes1Col = $rowRes1['0']; 并在字符串中使用它。

# asp.net - 在 AppState 和 Session 中存储数据

> ID：16062545
> 
> 赞同：0
> 
> 时间：2013-04-17T14:18:54.697
> 
> 标签：asp.net

在我的 AppStart.cshtml 中，我从数据库中获取一些数据、进行计算、序列化/反序列化 json 字符串等，然后通过执行以下操作将结果存储在几个 AppState 变量中：(C#)

```
AppState["myVar1"]="aString";
AppState["myVar2"]=anArray; 
```

这些变量经常被访问并且定义起来有点繁重，所以我认为这样的事情是有意义的，而不是每次需要时都从头开始创建数据。即使不需要优化，它对我来说仍然有意义，因为它还通过在需要数据的一堆地方没有相同的代码来增加可读性和绝对可维护性。

同样，我通过在用户登录时将数据放入 Session 来针对每个用户执行类似的操作，例如

```
Session["userVar1"]="myString";
Session["userVar2"]=myAray; 
```

但是，我刚刚读到，当我们想要读取它们时，我们永远不应该依赖存储在其中的数据仍然存在，因为它们存储在可能已被清除的服务器内存中。这是真的？所以当我们想要访问其中一个时，我们应该首先检查它是否为空？如果幸运的话，它不为空，我们可以立即使用它，否则我们再次设置它。这是应该如何使用存储在 AppState 和 Session 中的数据吗？如果是这样，如果它们为空，那么重新设置它们的好方法是什么？我想做一些事情，比如创建一个函数来设置它们是否为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:27:07.263

在您的情况下，如果服务器偶尔清除数据（例如，从 IIS 重新启动应用程序进程）听起来很好，因为您所描述的只是一个缓存方案。缓存数据本质上是瞬态的。如果它在那里，请使用它。如果它不存在，请重新获取它（并使用结果再次填充缓存）。

我的建议是从缓存本身的结构中抽象出您的缓存机制（应用程序状态和会话状态）。在这个结构中，您可以检查数据是否被缓存，如果没有，则重新缓存它。考虑这样一个对象：

```
public class CacheManager
{
    public static string MyString
    {
        get
        {
            if (string.IsNullOrWhiteSpace(AppState["myVar1"]))
            {
                // Fetch the value to be cached and set it in AppState["myVar1"]
            }
            return AppState["myVar1"];
        }
    }
} 
```

现在，在您的应用程序中的任何地方，您都可以通过调用来获取值：

```
CacheManager.MyString 
```

应用程序的其余部分不知道也不关心它是来自应用程序状态、会话状态、数据库、文件还是缓存数据的任何其他临时位置。这完全由缓存管理器对象处理。因此，如果您想更改某些值的位置，请在该位置更改它们。或者，如果出于测试目的，您想完全删除缓存并始终获取数据，您只需将缓存管理器实现换成始终返回重新获取的数据的实现。应用程序的其余部分完全不知道实现。

# umbraco - 茶叶商务 + Umbraco

> ID：16062549
> 
> 赞同：2
> 
> 时间：2013-04-17T14:19:08.217
> 
> 标签：umbraco, umbraco-teacommerce

我有一个现有的 Umbraco 网站。我想添加用户可以购买产品然后付款的选项等。

阅读似乎 TeaCommerce ( [http://www.teacommerce.net/en/products/tea-commerce-starter-kit.aspx](http://www.teacommerce.net/en/products/tea-commerce-starter-kit.aspx) ) 是一个可用于实现此目的的模块。

所以我下载并安装它。一切似乎都安装得很好，但现在阅读所有文档，没有说明下一步该做什么或如何继续。

然后我下载了入门工具包。按照说明（[http://www.teacommerce.net/media/11341/installation_guide.pdf](http://www.teacommerce.net/media/11341/installation_guide.pdf)），入门工具包并不能完全运行，所以我不知道一切是如何运行的。

当我说入门工具包没有运行时，我的意思是我收到以下错误

`Error loading Razor Script /general/meta-description.cshtml 'string' does not contain a definition for 'mediaItem'`

`Error loading Razor Script /cart/mini-cart.cshtml Cannot perform runtime binding on a null reference`

我意识到没有与该站点关联的模板 - 因此添加一个模板可以加载上述页面，但会显示错误。

从这一点开始，任何人都可以指导我或指出我可以复制自己的工作解决方案，或者如何将它与我现有的 Umbraco 站点集成？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T09:53:08.490

与许多电子商务软件包不同，teacommerce 没有内置产品目录 - 因此您必须在 Umbraco 节点结构中构建目录 - 或使用“产品信息提取器”在 XML 文件中使用目录或通过 API 访问。

我假设您正在设置目录的节点结构 - 因此您尚未构建任何“产品”节点，或者无法通过访问“产品”节点中的字段（mediaitem）之一/general/meta-description.cshtml 这是一个剃须刀脚本文件。因此，调试 /general/meta-description.cshtml 文件，您可以在其中看到对 mediaitem 字段的引用，您应该找出问题所在。

ucommerce 是一种替代方案，功能更全面，但应考虑其对营销部分（允许您建立折扣）等功能的年度费用定价模型，并且每年可能花费数千欧元 - 茶商务花费数百欧元，但是一次性收费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:14:49.307

我没有使用过teacommerce，但可以推荐 uCommerce [http://our.umbraco.org/projects/website-utilities/ucommerce](http://our.umbraco.org/projects/website-utilities/ucommerce)它是免费的，你甚至可以得到一个完全建成的剃须刀店，你可以根据需要进行调整。到目前为止在我的选择中，是 umbraco 上最简单的商务产品。

# java - Java 测试：通过运行代码大量生成模拟对象

> ID：16062558
> 
> 赞同：1
> 
> 时间：2013-04-17T14:19:32.493
> 
> 标签：java, debugging, testing, mocking

大家好 :) 在[JVM 调试模式下](https://stackoverflow.com/questions/138511/what-are-java-command-line-options-to-set-to-allow-jvm-to-be-remotely-debugged)，您可以检查运行代码时存在的对象。

这意味着可以创建一个实用程序，该实用程序可以生成这些对象的转储以准备使用模拟（或者足够接近，希望如此）。这些模拟将跨越程序运行的整个范围，这将极大地有助于构建广泛的测试覆盖率。

因为懒惰很好，所以我想知道这样的实用程序当前是否可用。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:26:24.197

我不知道从内存/堆转储或调试模式执行此操作的方法，但是...

如果您想将任意 java 对象序列化到文件中或从文件中序列化以用于测试，那么您可以使用[XStream](http://xstream.codehaus.org/)来执行此操作。然后，您可以轻松地在单元测试中使用它们。

如果您的对象都是可序列化的，您也可以使用标准 Java 序列化。

要首先收集数据，您可以使用 AspectJ 或 Spring-AOP 或类似方法创建方面。我过去做过类似的事情，而且效果很好。

不过要注意一点：如果您正在这样做，那么对对象的任何重构都需要重构测试数据。使用 XStream 更容易，因为它是您处理的 XML 文件。

# scala - 如何使 JavaFX 应用程序在 Retina 显示屏上不模糊

> ID：16062559
> 
> 赞同：9
> 
> 时间：2013-04-17T14:19:37.310
> 
> 标签：scala, javafx-2, javafx, retina-display

JavaFX 应用程序在 MacBook Pro Retina 屏幕上显得模糊。有没有办法清晰地显示应用程序？在一篇博客文章/评论中提到了目前的情况：http: [//fxexperience.com/2012/11/retina-display-macbook-pro/](http://fxexperience.com/2012/11/retina-display-macbook-pro/)

这是示例 fxml：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<VBox xmlns:fx="http://javafx.com/fxml">
    <MenuBar>
        <Menu text="File">
            <items>
                <MenuItem text="Exit"/>
            </items>
        </Menu>
    </MenuBar>
</VBox> 
```

示例代码：

```
import javafx.application.Application
import javafx.fxml.FXMLLoader
import javafx.scene.Scene
import javafx.scene.layout.VBox
import javafx.scene.paint.Color
import javafx.stage.Stage

object CreateFX extends App {
    override def main(args: Array[String]) = {
      println("CreateFX starting up...")
      Application.launch(classOf[CreateFX], args: _*)
    }
}

class CreateFX extends Application {
    def start(stage: Stage): Unit = {
        println("start "+stage)

        stage.setTitle("CreateFX")

        val root: VBox = FXMLLoader.load(getClass().getResource("MainScreenVBox.fxml"))//new VBox

        val scene = new Scene(root, 800, 600)
        scene.setFill(Color.GREEN)

        stage.setScene(scene)
        stage.show()
    }
} 
```

结果： ![产生的应用程序](https://i.stack.imgur.com/MjdgU.png)

Java版本：`1.7.0_21`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:42:26.753

在评论的同一篇文章中，Richard Blair 指出，这已在最新的 JavaFX 版本中得到修复（在 Java 8 的 EAP 中可用，可在[此处](http://jdk8.java.net/download.html)下载）

# python - Python 字符串索引必须是整数而不是 str

> ID：16062562
> 
> 赞同：-4
> 
> 时间：2013-04-17T14:19:49.030
> 
> 标签：python, python-2.7

这是我的代码：

```
dbcur.execute('select girismuzik from users where name = ?', [username])
rrf = dbcur.fetchone()
girismuzik = rrf
self.sendData("\x1A" + "\x0C" [girismuzik]) 
```

但这是错误：

```
string indices must be integers not str 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:20:47.863

您正在尝试在此处对字符串进行切片：

```
self.sendData("\x1A" + "\x0C" [girismuzik]) 
```

并`girismuzik`引用一个字符串值。

也许您忘记了逗号？

```
self.sendData("\x1A" + "\x0C", [girismuzik]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:22:09.460

如果没有堆栈跟踪和其他代码，很难说出更多信息。但，

```
self.sendData("\x1A" + "\x0C" [girismuzik]) 
```

这就是问题。

具体来说：`"\x0C" [girismuzik]`

这是什么，是一个字符串，然后是一个索引。（因为您可能忘记了 a `,`）。它将转换为`"string"[x]`，如果`x`不是 int，则为错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:25:49.647

A`cursor.fetchone()`可能会从您的查询中返回一个结果行的元组（其中包含一列）。

您可能更喜欢以下内容：

```
dbcur.execute('select girismuzik from users where name = ?', [username])
rrf = dbcur.fetchone()
girismuzik = rrf[0]
self.sendData("\x1A" + "\x0C" + girismuzik) 
```

# php - 如何使用 Jquery 和 PHP 从 .ajax HTTP 请求中检索数据？

> ID：16062565
> 
> 赞同：0
> 
> 时间：2013-04-17T14:19:52.970
> 
> 标签：php, jquery, ajax, json

我需要从一个 PHP 文件中检索一个数组，该文件是一个返回数组的 SQL 查询。我已将其编码`json_encode();`并返回。

这是我的 JS 文件：

```
$(document).ready(function() {
$('#indicators').change(function() {
    $('#countries').fadeIn('slow');
    var indic_val = $(this).val();
    var countries = $.ajax({
        url: 'scripts/chart_handler.php',
        dataType: "json",
        type: 'POST',
        data: {'indicator' : indic_val},
        async:false,
        success: (function ( data ){
            console.log(data);
            $.each(data, function(i,key) {
                $('#countries').append('<option value="'+ key +'">'+ key +'</option>');
                    });
               })
         });
    });
}); 
```

我正在进入成功标签，但数据返回为空。我必须使用什么来获取数据数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:59:33.997

我的问题的答案只是在 PHP 脚本中更改“返回或结束”行。这要归功于对 AJAX 的误解。

改变：

> 返回 json_encode($array);

为了：

> 回声 json_encode($array);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:01:05.833

我认为这可能是由 UTF8-BOM（字节顺序标记）引起的。BOM 被添加到 json 字符串的开头，这将使它失效。

尝试将您的文档转换为没有 BOM 的 UTF8，然后再试一次。

有关详细信息，请参阅 SO 上的其他线程：[json_decode 在 webservice 调用后返回 NULL](https://stackoverflow.com/questions/689185/json-decode-returns-null-after-webservice-call)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:28:38.923

您可以尝试使用 getJSON

```
$.getJSON('scripts/chart_handler.php')
.done(function( data ) {
  $.each( data, function( i, item ) {

   $('#countries').append('<option value="'+ item +'">'+ item +'</option>');

  });
}); 
```

如果您在查询中使用 FECH ASSOC，您将需要使用 item.namefield 其中 namefield 是您想要插入的唯一项目的字段名称

您可以使用 firebug（firefox 扩展）来调试并查看项目 dom extruture

如果您想通过 get 方法发送内容，请执行以下操作

```
$.getJSON('scripts/chart_handler.php',{indicator : indic_val})
.done(function( data ) {
  $.each( data, function( i, item ) {

   $('#countries').append('<option value="'+ item +'">'+ item +'</option>');

  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:31:44.890

使用以下代码

```
$('#ddlCountry').change(function(){

        $.ajax({                
            type:'POST',
            url:'<?php echo base_url(); ?>admin_in_action/GetDivisionByCountry.php',
            datatype:'json',
            data:{countryId:this.value},
            cache:false,
            success:function(result){
                $('#ddlDivision').get(0).options.length = 0;
                $('#ddlDivision').get(0).options[0] = new Option("--Select--", "0");

                $.map(result, function(item){
                    $('#ddlDivision').get(0).options[$('#ddlDivision').get(0).options.length] = new Option(item.DivisionName, item.DivisionID);
                });                

            },
            error:function(){}
        });            
    }); 
```

# c# - 在“ParameterEditor”类型中找不到属性“ApplicationId”

> ID：16062567
> 
> 赞同：1
> 
> 时间：2013-04-17T14:20:00.650
> 
> 标签：c#, silverlight-5.0

我在使用 Silverlight 构建的用户控件时遇到问题。问题是在用户控件的类中，我添加了一个属性`public Guid ApplicationId`，并且在页面上我想绑定到某个值。当我尝试这样做时，我得到“在类型'ParameterEditor'中找不到属性'ApplicationId'”`ParameterEditor`我的用户控件在哪里。

问题的一些代码。在用户控件中：

```
 public ParameterEditor()
    {
        InitializeComponent();
        SetParametersForEdit();
    }

    public Guid ApplicationId
    {
        get { return (Guid)GetValue(ApplicationGUID); }
        set
        {
            if (ApplicationId == value) return;
            SetValue(ApplicationGUID, value);
        }
    } 
```

在我想显示这个控件的页面的 XAML 中，我有这个：

```
<vbView:ParameterEditor x:Name="paramConfig" Grid.Row="3" Grid.Column="2"
                       DataContext="{Binding SelectedRoute}"
                       ApplicationId="{Binding ApplicationId}"
                        /> 
```

并且`ApplicationId`在页面的 .cs 文件中。问题是我已经用其他控件完成了这件事，而且效果很好，老实说，我不知道为什么会在这里发生。

* * *

`DependencyProperty`定义：

```
public static readonly DependencyProperty ApplicationGUID = DependencyProperty.Register(
        "Application GUID", typeof(Guid), typeof(ParameterEditor),
        new PropertyMetadata((source, _) => ((ParameterEditor)source).SetInitialGuid()));

    private void SetInitialGuid()
    {
        ApplicationId = Guid.Empty;
    } 
```

# android - 如何在 simple_list_item_2 中构造和显示信息？

> ID：16062569
> 
> 赞同：3
> 
> 时间：2013-04-17T14:20:04.627
> 
> 标签：android, android-layout

我从我的（测试）数据库中获取客户信息列表，我想显示它。客户由具有、和成员的`Customer`类表示。它的方法只返回. 我创建了仅使用布局的，因此仅显示客户的 - 如下所示：`name``info``note``toString``name``DemoDatabaseMainActivity``simple_list_item_1``name`

```
public class DemoDatabaseMainActivity extends ListActivity {

    private CustomerDataSource datasource;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new CustomerDataSource(this);
        datasource.open();

        List<Customer> values = datasource.getAllCustomers();

        ArrayAdapter<Customer> adapter = new ArrayAdapter<Customer>(this,
                                   android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }
...
} 
```

它工作得很好；但是，我想学习下一步...

我想修改代码，以便我可以使用第一行的`android.R.layout.simple_list_item_2`where和第二行的+ ？应该实现什么而不是，以及我应该使用什么适配器或其他什么？`name``info``note``Customer.toString()`

**根据 Patric 的评论[https://stackoverflow.com/a/16062742/1346705进行](https://stackoverflow.com/a/16062742/1346705)**更新**——对此，我希望修改后的解决方案是这样的：**

 **```
public class DemoDatabaseMainActivity extends ListActivity {

    private CustomerDataSource datasource;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new CustomerDataSource(this);
        datasource.open();

        List<Customer> values = datasource.getAllCustomers();

        TwolineAdapter adapter = new TwolineAdapter(this, values);  // here the difference
        setListAdapter(adapter);
    }
...
} 
```

所以，我以`TwolineAdapter`这种方式添加了我的课程：

```
public class TwolineAdapter extends ArrayAdapter<Customer> {

    private List<Customer> objects;

    public TwolineAdapter(Context context, List<Customer> objects) {
        super(context, android.R.layout.simple_list_item_2, objects);
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        TextView text1 = (TextView) view.findViewById(android.R.id.text1);
        TextView text2 = (TextView) view.findViewById(android.R.id.text2);

        text1.setText(objects.get(position).getName());
        text2.setText(objects.get(position).getInfo() 
                      + " (" + objects.get(position).getNote() + ")");
        return view;
    }
} 
```

但它不起作用（显然是因为我的一些错误）。注意构造函数代码调用`simple_list_item_2`中的。`super`运行时，代码显示错误日志消息，如：

```
E/ArrayAdapter(27961): You must supply a resource ID for a TextView 
```

我想问你问题出在哪里。试图找到原因，我已经修改了`TwolineAdapter`与原来相同的工作方式`simple_list_item_1`

```
public class TwolineAdapter extends ArrayAdapter<Customer> {

    private List<Customer> objects;

    public TwolineAdapter(Context context, List<Customer> objects) {
        super(context, android.R.layout.simple_list_item_1, objects);
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView view  = (TextView)super.getView(position, convertView, parent);
        view.setText(objects.get(position).getInfo());  // displaying a different info
        return view;
    }
} 
```

为了确保覆盖`getView`有效，我显示了客户信息的不同部分。它工作得很好。换句话说，不是显示通用`toString`方法，而是显示我的特定`getInfo`结果。

无论如何，我需要使用`simple_list_item_2`. 接下来我该怎么做？（我的结论是我在构造函数中做错了什么。我是对的吗？问题出在哪里？）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T14:27:46.247

您可以覆盖的`getView`方法`ArrayAdapter`：

```
 new ArrayAdapter (context, android.R.layout.simple_list_item_2, android.R.id.text1, list)
  {
    public View getView(int position, View convertView, ViewGroup parent) {
      View view = super.getView(position, convertView, parent);
      TextView text1 = (TextView) view.findViewById(android.R.id.text1);
      TextView text2 = (TextView) view.findViewById(android.R.id.text2);
      text1.setText("1");
      text2.setText("2");
      return view;
    }
  }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:28:20.300

查看[本](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)教程，了解如何创建自定义 listView。作为初学者，它从新的项目阶段开始，我认为它会对你有所帮助。至于你应该使用什么而不是你的`toString()`方法，只需在你的`Customer`类中创建一些 getter 来检索数据。像这样的东西：

```
public String getName(){
return this.name;
} 
```

并在您的代码中使用它，如下所示：

```
 Customer x = new Customer();
//return the customer name into a string, obviously you will return it in a list that you will pass it to the listview
String customerName = x.getName(); 
```**

# javascript - 扩展访问令牌

> ID：16062579
> 
> 赞同：0
> 
> 时间：2013-04-17T14:20:40.247
> 
> 标签：javascript, facebook

我正在尝试将我的短期访问令牌交换为长期访问令牌。这是我的代码

```
 var params = {};
    params['client_id'] = 'XXXXXX';//REMOVED APP ID
    params['client_secret'] ='XXXXXX';//REMOVED APP SECRET
    params['grant_type'] = 'fb_exchange_token';
    params['fb_exchange_token'] = 'XXXXXX';//accessToken
    params['response_type'] = 'text';

    FB.api('/oauth/access_token', params,  dojo.hitch(this,function(response) {
        console.log(response)
    })); 
```

当我看到响应时，在火灾错误中，我得到了新的访问令牌及其到期时间。然而，上面代码中的 reaponse 变量有一个错误对象，而不是访问令牌和到期时间。

有没有人遇到过这种情况？你能告诉我我在这里做错了什么吗？

提前致谢。

# java - 滚动浏览网格视图时滚动崩溃程序

> ID：16062582
> 
> 赞同：0
> 
> 时间：2013-04-17T14:20:46.847
> 
> 标签：java, android

当我尝试滚动浏览我的单词搜索时，我的程序崩溃并抛出一个空指针异常。然而我不知道为什么，

我的网格视图是用数组创建的

```
 String [] WordSearch =  new String[FormattedWords.length];

    for(int i = 1; i<FormattedWords.length ;i++)
    {
        WordSearch[i-1] = FormattedWords[i];
    } 
```

，logcat 也给了我这个

```
04-17 14:19:37.623: E/AndroidRuntime(5969): FATAL EXCEPTION: main
04-17 14:19:37.623: E/AndroidRuntime(5969): java.lang.NullPointerException
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.GridView.makeAndAddView(GridView.java:1331)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.GridView.makeRow(GridView.java:331)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.GridView.fillDown(GridView.java:283)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.GridView.fillGap(GridView.java:243)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5036)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.AbsListView.scrollIfNeeded(AbsListView.java:3193)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.AbsListView.startScrollIfNeeded(AbsListView.java:3138)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3463)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.View.dispatchTouchEvent(View.java:7127)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.View.dispatchPointerEvent(View.java:7307)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.InputEventReceiver.nativeConsumeBatchedInputEvents(Native Method)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.InputEventReceiver.consumeBatchedInputEvents(InputEventReceiver.java:163)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl.doConsumeBatchedInput(ViewRootImpl.java:4203)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.run(ViewRootImpl.java:4243)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.Choreographer.doFrame(Choreographer.java:523)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.os.Handler.handleCallback(Handler.java:615)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.os.Looper.loop(Looper.java:137)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at java.lang.reflect.Method.invoke(Method.java:511)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-17 14:19:37.623: E/AndroidRuntime(5969):     at dalvik.system.NativeStart.main(Native Method) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:53:41.800

为什么 for 循环从 1 开始并按原样插入数据？这`NullPointerException`很可能是由 for 循环将字符串插入到`WordSearch`数组中引起的。

例如。

假设 FormattedWords 是一个数组（您正在使用 .length 属性），如果`FormattedWords.length`是 3 并且包含：

```
FormattedWords[0] = "a";
FormattedWords[1] = "b";
FormattedWords[2] = "c"; 
```

在for循环之后`WordSearch`将包含：

```
WordSearch[0] = "b";
WordSearch[1] = "c";
WordSearch[2] = null; 
```

你的问题似乎在这里。

**编辑**

如果要省略 FormattedWords 中的第一个值，那么您应该开始`WordSearch`调整大小`FormattedWords.lenght - 1`以避免 NPE。

例如。

```
String [] WordSearch =  new String[FormattedWords.length - 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T07:15:56.280

如果值`FormattedWords[i]`等于`null`意味着当视图出现在前面时应用程序将崩溃

# linux - MATLAB 执行命令行脚本以启动 C++ 程序？（不含墨西哥）

> ID：16062589
> 
> 赞同：0
> 
> 时间：2013-04-17T14:20:53.730
> 
> 标签：linux, matlab, command-line

我在**Ubuntu下运行****MATLAB 2011a**，并且我有一些从命令行执行的**C++**函数，例如 `./community sample_networks/karate.bin -l -1 -q 0.01 > sample_networks/karateout.txt' 这些 C++ 函数产生一个我想从 MATLAB 中获取的文本文件

 ****我还没有编写这些 C++ 函数，只想让 MATLAB 将一个字符串传递给要执行的命令行，以便可以从 MATLAB 中获取文本文件结果。我想暂时避免使用**MEX 。**

编辑（使用`system`命令不起作用）：

> > pwd ans = /home/alex/Documents/MATLAB/MATLABsvnWorkingDir/Bloom/graphAnalysis/analysisAttempt2/functionsDownloaded/BlondelLouvainCPP/Community_BGLL_CPPLinux system('./community sample_networks/karate.bin -l -1 -q 0.01 > sample_networks/karateout.txt > sample_networks/karateout.txt') ./community: /home/alex/matlab2011a/sys/os/glnx86/libstdc++.so.6: 未找到版本“GLIBCXX_3.4.11”（./community 要求）ans = 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:28:57.970

看起来你只需要使用[系统](http://www.mathworks.com/help/matlab/ref/system.html)功能。此函数将启动另一个可执行文件，并等待其完成。****

# c# - 异步 CTP 在 VS 2010 SP1 中不起作用？

> ID：16062590
> 
> 赞同：4
> 
> 时间：2013-04-17T14:20:53.817
> 
> 标签：c#, vb.net, visual-studio-2010, async-ctp

我下载了[Async CTP](http://www.microsoft.com/en-ca/download/details.aspx?id=9983)并将其安装在我的开发机器上，它同时具有 VS 2010 和 VS 2012。安装似乎已经成功完成（没有错误）。

我创建了一个全新的 WinForms 项目（语言：VB.NET），并用`Async`.

问题是`Async`无法识别关键字。有没有人设法使它工作以及如何工作？

在 VS 2012 中做同样的事情，针对 .NET 框架 4.5 工作。

**注意：**此时我不需要任何*Silverlight*、*Windows Phone*甚至*Web*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:27:37.207

正如@Ramhound 所建议的，我卸载了与 VS 2012 和 2010 相关的所有内容，然后安装了 2010 + SP1 + 应用的 Async CTP3。正确安装的 Async CTP3 会显示欢迎屏幕并提示重新启动。之后 VS 2010 开始支持`async`关键字。但是，为了完全支持，需要从这里引用相应的库（取决于平台）：

```
c:\Users\%username%\Documents\Microsoft Visual Studio Async CTP\Samples\ 
```

就我而言，它是`AsyncCtpLibrary.dll`。否则它将突出显示语法，但不会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T12:40:16.653

应该没有必要这样做。

您已经安装了 VS2012，它完全支持`async`/ `await`。您可以[安装`Microsoft.Bcl.Async`](http://nuget.org/packages/Microsoft.Bcl.Async/)以获取`async`/`await`支持下级平台，包括 .NET 4.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T03:19:07.627

我在[使用 Async 和 Await 的异步编程](https://stackoverflow.com/a/16097562/200449)中回答了这个问题，以及是否在不安装 .NET 4.5 的情况下使用更多 C# 5.0 功能。/VS2012（这在 Winfows XP 中是不可能的）而不仅仅是`async/await`在我对[Where can I find a TPL dataflow version for 4.0 的回答中？](https://stackoverflow.com/a/15972581/200449).

请注意，安装了 .NET 4.5 的机器上的 .NET 4.0 与安装了 .NET 4.5 的 .NET 4.0 不同。换句话说，您无法[在安装了 .NET 4.5 的机器上可靠地开发和测试 .NET 4.0 应用程序](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a/)。后者独立于您是否安装了扩展

# android - SECURITY_ERR: DOM Exception 18 在 WebView 中打开数据库时

> ID：16062591
> 
> 赞同：1
> 
> 时间：2013-04-17T14:20:58.467
> 
> 标签：android, webview

我有两个应用程序，它们都在 webview 中使用 SQL 数据库。

其中一个在我的设备上运行良好，但另一个在尝试打开数据库时会引发此错误。

未捕获的错误：SECURITY_ERR：DOM 异常 18

两个项目中的一切都相似，我尝试了很多东西但没有找到原因。

我从头开始了一个项目，它运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T21:50:41.093

这花了我一整天的时间来弄清楚，所以我想提供有关如何在 Android 4.2 和 4.3 上解决此问题的完整文档。

您**可以**`file://`从WebView 中的 URL 使用 Web SQL 。科尔多瓦人设法做到了。您必须做的只有**三件事：**

1）打电话`setDatabaseEnabled()`（呃）：

```
webView.getSettings().setDatabaseEnabled(true); 
```

2) 设置数据库文件路径。是的，这在 Android 4.4 中已被弃用，但如果您想避免在之前的 Kitkat 中出现 DOM 异常 18，则*需要它：*

```
String databasePath = getContext().getApplicationContext().getDir(
  "database", Context.MODE_PRIVATE).getPath();
webView.getSettings().setDatabasePath(databasePath); 
```

3）设置`onExceededDatabaseQuota`处理程序。是的，它在 Android 4.4 中已被弃用，等等。

```
 webView.setWebChromeClient(new WebChromeClient() {

      @Override
      public void onExceededDatabaseQuota(String url, String databaseIdentifier, long currentQuota, long estimatedSize,
                                          long totalUsedQuota, WebStorage.QuotaUpdater quotaUpdater) {
        quotaUpdater.updateQuota(estimatedSize * 2);
      }
    }); 
```

如果您跳过*这 3 个步骤中的任何一个*，那么您将收到 DOM Exception 18 错误并且 Web SQL 将无法工作。你已经被警告过了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T18:01:59.717

我通过覆盖 onExceededDatabaseQuota 方法解决了“SECURITY_ERR: DOM Exception 18”。

```
webView = (WebView) findViewById(R.id.webView1);
webView.setWebChromeClient(new WebChromeClient() {
    @Override
    public void onExceededDatabaseQuota(String url, String databaseIdentifier, long currentQuota, long estimatedSize,
        long totalUsedQuota, WebStorage.QuotaUpdater quotaUpdater) {
        quotaUpdater.updateQuota(estimatedSize * 2);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T15:27:10.027

我正面临着这个问题。但我不知道我的建议对你有没有帮助

我已经创建了一个这样的数据库：

```
db = window.openDatabase("myDatabase", "1.0", "my.Database", 1024); 
```

在 Android 4.0.3 上没有问题，问题出现在 Android 4.1 上（SECURITY_ERR: DOM Exception 18）

然后我通过删除“dotes”和奇怪的字符来修改我的数据库名称，如下所示：

```
db = window.openDatabase("myDatabase", "1.0", "myDatabase", 1024); 
```

然后我的问题就解决了:)

我正在谷歌搜索该问题的解决方案，然后我现在已经解决了：D

希望这是您问题的解决方案（正如问题 1 个月前提出的那样）

# python - 曼哈顿距离推荐系统 Python

> ID：16062594
> 
> 赞同：1
> 
> 时间：2013-04-17T14:21:03.623
> 
> 标签：python, distance

所以我已经尝试了一段时间，但无法让它发挥作用。如果您查看图片，您会在 x 轴和 y 轴上看到 2 个人，这两个人都是他们对电影的评分。问题是我如何计算这些人之间的曼哈顿距离。

![在此处输入图像描述](https://i.stack.imgur.com/CHiub.png)

所以这就是我已经拥有的...... **编辑** 我忘了说 prefs 是一个以 personname 作为键和第二个 dict 作为值的字典。第二个字典包含作为键的电影和作为值的评级.. 并且 person1 和 2 只是带有名称的字符串，可以在 prefs 中找到

```
def sum_manhattan(prefs,person1,person2):
    """Calculates the Manhattan distance between two critics"""
    total = 0
    ##assume person1 is the x axes and person 2 is the y axes
    x = prefs[person1]
    y = prefs[person2]

    for movie in x:
        if movie in y:
            total = abs(x[movie]-y[movie])
    return total 
```

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:07:13.033

根据 Alkini 发布的链接，我会说你应该替换

```
total = abs(x[movie]-y[movie]) 
```

和

```
total += abs(x[movie]-y[movie]) 
```

让事情发挥作用。

您发布的代码所做的是返回上一部电影评分之间差异的绝对值，而我认为您需要添加所有电影的评分差异。

# svn - 如何用实际数据替换 svn:externals？即从其他存储库保留属性的副本

> ID：16062595
> 
> 赞同：2
> 
> 时间：2013-04-17T14:21:13.803
> 
> 标签：svn

我有一个使用 Subversion 管理的项目。该项目使用 svn:externals 链接到其他存储库。现在我想用它们引用的实际数据替换外部数据。我怎样才能做到这一点？我需要在两个存储库之间复制，但命令行客户端不支持。我还想保留 svn:mime-type 之类的属性。To `add`or `import`the data 将使用我的自动道具或不使用，但我需要原始属性。我没有服务器访问权限。

我能想出的最佳解决方案是`svn merge -r 0:123 http://repo.svn/path/to/external external`，但这不会复制外部资源的第一个版本，我得到的只是树冲突。

这个问题类似于[如何在 Subversion 存储库之间复制保留属性但不保留历史记录](https://stackoverflow.com/questions/1649143/how-to-copy-between-subversion-repositories-preserving-properties-but-not-preser)，但我不能使用`svnadmin load`。

# jquery - Jquery ui 图像循环器

> ID：16062597
> 
> 赞同：1
> 
> 时间：2013-04-17T14:21:26.813
> 
> 标签：jquery, image, jquery-ui

我一直在使用 jquery ui 进行开发。今天我被困在图像循环仪上。默认图像滑块代码适用于 3 张图片。我的网站上有 30 张图片，我必须使用 ui-cycler 流畅地循环它，但这是不可能的。为了使它工作，我必须在图像循环器开始发挥作用之前点击静态图片 X 时间。这是 3 个图像的循环器代码：

```
<script>
    $(function() {
        // TODO refactor into a widget and get rid of these plugin methods
        $.fn.left = function( using ) {
            return this.position({
                my: "right middle",
                at: "left+25 middle",
                of: "#container",
                collision: "none",
                using: using
            });
        };
        $.fn.right = function( using ) {
            return this.position({
                my: "left middle",
                at: "right-25 middle",
                of: "#container",
                collision: "none",
                using: using
            });
        };
        $.fn.center = function( using ) {
            return this.position({
                my: "center middle",
                at: "center middle",
                of: "#container",
                using: using
            });
        };

        $( "img:eq(0)" ).left();
        $( "img:eq(1)" ).center();
        $( "img:eq(2)" ).right();

        function animate( to ) {
            $( this ).stop( true, false ).animate( to );
        }
        function next( event ) {
            event.preventDefault();
            $( "img:eq(2)" ).center( animate );
            $( "img:eq(1)" ).left( animate )
            $( "img:eq(0)" ).right().appendTo( "#container" );
        }
        function previous( event ) {
            event.preventDefault();
            $( "img:eq(0)" ).center( animate );
            $( "img:eq(1)" ).right( animate );
            $( "img:eq(2)" ).left().prependTo( "#container" );
        }
        $( "#previous" ).click( previous );
        $( "#next" ).click( next );

        $( "img" ).click(function( event ) {
            $( "img" ).index( this ) === 0 ? previous( event ) : next( event );
        });

        $( window ).resize(function() {
            $( "img:eq(0)" ).left( animate );
            $( "img:eq(1)" ).center( animate );
            $( "img:eq(2)" ).right( animate );
        });
    });
    </script> 
```

这是我的图片参考html：

```
 <div id="container">

        <img class = "slide"  src="images/slide1.jpg"  alt="Race2"/>
        <img class="slide" src="images/slide2.jpg"  alt="Akshay Kumar"/>
        <img class = "slide" src = "images/slide_eng1.jpg" alt = "English Roller"/>
        <img class = "slide" src = "images/slide_eng2.jpg" alt = "Bruce Willis"/>
<!-- still many image -->
    </div> 
```

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T19:17:08.003

首先，您必须使用函数 ext_right 隐藏其余图像（索引 3 及以上），并且您应该更改 append 和 prepend，如下所示：

```
<script>
        $(function () {
            // TODO refactor into a widget and get rid of these plugin methods
            $.fn.left = function (using) {
                return this.position({
                    my: "right middle",
                    at: "left+25 middle",
                    of: "#image_container",
                    collision: "none",
                    using: using
                });
            };
            $.fn.right = function (using) {
                return this.position({
                    my: "left middle",
                    at: "right-25 middle",
                    of: "#image_container",
                    collision: "none",
                    using: using
                });
            };
            $.fn.center = function (using) {
                return this.position({
                    my: "center middle",
                    at: "center middle",
                    of: "#image_container",
                    using: using
                });
            };

            $.fn.ext_right = function () {
                return this.position({
                    my: "left middle",
                    at: "right+30 middle",
                    of: "#image_container",
                    collision: "none",
                });
            };

            $("img.cycler:eq(0)").left();
            $("img.cycler:eq(1)").center();
            $("img.cycler:eq(2)").right();

            /*Place the rest of the image_container images hidden to the right*/
            $("img.cycler:gt(2)").ext_right();

            function animate(to) {
                $(this).stop(true, false).animate(to);
            }

            function next(event) {
                event.preventDefault();
                $("img.cycler:eq(2)").center(animate);
                $("img.cycler:eq(1)").left(animate)
                //$("img.cycler:eq(0)").right().appendTo("#image_container");                
                $("img.cycler:eq(3)").right();
                $("img.cycler:eq(0)").ext_right().appendTo("#image_container");
            }
            function previous(event) {
                event.preventDefault();
                $("img.cycler:eq(0)").center(animate);
                $("img.cycler:eq(1)").right(animate);                                
                //$("img.cycler:eq(2)").left().prependTo("#image_container");
                $("img.cycler:eq(2)").ext_right();
                $("img.cycler:last").left().prependTo("#image_container");                                
            }

            $("#previous").click(previous);
            $("#next").click(next);

            $("img.cycler").click(function (event) {
                $("img.cycler").index(this) === 0 ? previous(event) : next(event);
            });

            $(window).resize(function () {
                $("img.cycler:eq(0)").left(animate);
                $("img.cycler:eq(1)").center(animate);
                $("img.cycler:eq(2)").right(animate);
            });
        });
    </script> 
```

以下是图片：

```
<div id="image_container">                    
                    <img class="cycler" src="images/flight.jpg" width="512" height="307" alt="flight" />
                    <img class="cycler" src="images/rocket.jpg" width="300" height="353" alt="rocket" />
                    <img class="cycler" src="images/earth.jpg" width="458" height="308" alt="earth" /> 
                    <img class="cycler" src="images/high_tatras.jpg" width="512" height="307" alt="flight" />
                    <img class="cycler" src="images/high_tatras2.jpg" width="300" height="353" alt="rocket" />
                    <img class="cycler" src="images/high_tatras3.jpg" width="458" height="308" alt="earth" />                    
                <a id="previous" href="#">Previous</a>  <a id="next" href="#">Next</a>
</div> 
```

# javascript - 动画回调中的jQuery动画只工作一次

> ID：16062599
> 
> 赞同：3
> 
> 时间：2013-04-17T14:21:30.570
> 
> 标签：javascript, jquery, animation

我有两个触发 jQuery 动画的分页链接。

动画上的回调函数触发第二个动画。

这很好用，但是，它仅在第一次调用该函数时才有效。

每次之后，2个动画中的第一个起作用，而第二个不起作用，它只是改变了没有效果的CSS。

我在这里绞尽脑汁，没有效果（双关语）。

```
function switchItem(e) {
    e.preventDefault();

    // If not current piece
    if($(this).hasClass('light')) {

        /*  VARIABLES */
        var container = $('.portfolio footer .portfolio_content');
        var link = $(this).attr('id');
        var newItem = $(this).html();

        /*===================================================
        *   This is the Key part here
        ===================================================*/

            /* FIRST ANIMATION */

            container.animate({
                'right':'-100%'
            }, 300, 'swing',

            // Callback Function
            function() {

                $(this).html('').css({'left':'-100%'});

                $.get('inc/portfolio/'+link+'.php', function(data) {

                    container.html(data);

                    /* SECOND ANIMATION */

                    container.animate({
                        'left':'0%'
                    }, 300, 'swing');

                });
            });     
    }
} 
```

这是演示：[http ://eoghanoloughlin.com/my_site/#portfolio](http://eoghanoloughlin.com/my_site/#portfolio)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:31:32.107

请参阅此处的工作示例，您的左侧与您的第一个右侧 -100% 动画冲突，最后如果您不重置右侧，那么它将与您的第二个左侧动画冲突

[http://jsfiddle.net/PAdr3/2/](http://jsfiddle.net/PAdr3/2/)

在动画之前向左重置

```
container.css('left', 'auto'); 
```

并在完成后重新设置

```
container.animate({
     'left':'0%'
 }, 300, 'swing', function() {
    $(this).css('right', 'auto');

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:27:51.453

我认为在第一个动画准备好之前，动画函数不会串起来。文档说：

> 如果提供，则在动画完成后触发完整的回调函数。这对于将不同的动画按顺序串在一起很有用。

像这样的东西可能会起作用：

```
function switchItem(e) {
    e.preventDefault();
    // If not current piece
    if($(this).hasClass('light')) {
        /*  VARIABLES */
        var container = $('.portfolio footer .portfolio_content');
        var link = $(this).attr('id');
        var newItem = $(this).html();

        /*===================================================
        *   This is the Key part here
        ===================================================*/
            /* FIRST ANIMATION */
            container.animate({
                'right':'-100%'
            }, 300, 'swing',
            // Callback Function
            function() {
                $(this).html('').css({'left':'-100%'});
                $.get('inc/portfolio/'+link+'.php', function(data) {
                    container.html(data);
                });
            }).complete(
                /* SECOND ANIMATION */
                container.animate({
                    'left':'0%'
                }, 300, 'swing');
            );     
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:28:30.197

当您将页面中的 html 替换为新内容时，它不会自动添加侦听器或其他通过 javascript 添加的 jquery 增强功能。

我怀疑在将使用 $.get 获取的内容放入页面后，您需要再次应用这些内容。

另一种选择是在一次加载中添加所有内容，但隐藏第二页。这可能是比使用 $.get 更好的选择

# c++ - 自动格式化 - Eclipse C++

> ID：16062600
> 
> 赞同：3
> 
> 时间：2013-04-17T14:21:30.487
> 
> 标签：c++, eclipse, eclipse-cdt

大家好，我试图阻止 Eclipse 中的自动格式化，使其在结尾有 throw() 语句的函数之后缩进我的左大括号和右大括号。

例如

```
void function(std::string param) throw()
{

} 
```

自动格式化后将如下所示：

```
void function(std::string param) throw()
  {

  } 
```

但是每次我自动格式化我的代码时，它都会在括号前面添加另一个选项卡。任何人都知道我可以如何关闭此功能，或者它是一个错误

Eclipse 信息：版本：Juno Release Build id：20120614-1722 使用 CDT

**注意：** 我使用的是我自己的代码样式配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:30:50.323

该样式的名称是[*Whitesmiths*](http://en.wikipedia.org/wiki/Indent_style#Whitesmiths_style) - 尝试将其更改为[*Allman*](http://en.wikipedia.org/wiki/Indent_style#Allman_style)。

在 C/C++ 透视模式下，转到 Window > Preferences > C/C++ > Code Style

![在此处输入图像描述](https://i.stack.imgur.com/Svznk.png)

选择 BSD/Allman 或任何你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:00:56.820

您可能需要考虑[Astyle](http://astyleclipse.sourceforge.net/)，这是一个 eclipse 插件，一个美妙的代码美化命令行工具的接口。可以设置缩进、格式化等。非常方便的工具。

# c# - C# 连接到远程 oracle 数据库。ORA-12154 无法解析指定的连接标识符

> ID：16062601
> 
> 赞同：0
> 
> 时间：2013-04-17T14:21:37.143
> 
> 标签：c#, sql, oracle

我编写了一个连接到 Oracle 10g 数据库的应用程序。在一台计算机上它可以正常工作，但在另一台计算机上它会出错。两台计算机都不是数据库服务器。

```
ORA-12154: TNS:could not resolve the connect identifier specified 
```

使用的连接字符串：

```
private string = "provider=MSDAORA;Data Source=192.168.1.5/MyInstance;User Id=username;Password=password";
private OleDbDataAdapter oda = oda = new OleDbDataAdapter();
private OleDbConnection oracleConnection = new OleDbConnection(conString.ToString()); 
```

但是，它工作的计算机是另一个 oracle 实例的数据库服务器！

我的应用程序需要能够从任何计算机连接到 Oracle 实例。

有任何想法吗？

编辑：我试过这个[Oracle 连接字符串的确切格式是什么？](https://stackoverflow.com/questions/5076524/what-is-the-exact-format-of-a-connection-string-for-oracle)但无法让任何选项起作用。

编辑：我找到了一个有效的连接字符串。

```
Provider=OraOLEDB.Oracle; Data Source=(DESCRIPTION=(CID=GTU_APP)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.5)(PORT=1521)))(CONNECT_DATA=(SID=MyInstanceID)(SERVER=DEDICATED)));User Id = myusername; Password = mypassword; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:59:53.463

由于您可以通过 SqlDeveloper 进行连接，因此这应该是与您的连接字符串相关的问题。我不太确定是否有办法获取 SqlDeveloper 的连接字符串。[使用connectionstrings.com](http://connectionstrings.com/oracle)变体验证您的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:29:49.380

在玩了很多关于以下连接字符串的游戏后，我的工作。

提供者=OraOLEDB.Oracle；数据源=(DESCRIPTION=(CID=GTU_APP)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.5)(PORT=1521)))(CONNECT_DATA=(SID=MyInstanceID)(SERVER=DEDICATED)) );用户 ID = 我的用户名; 密码 = 我的密码；

# jsf - h:button 不提交表单

> ID：16062602
> 
> 赞同：0
> 
> 时间：2013-04-17T14:21:39.150
> 
> 标签：jsf, form-submit

我正在创建一个登录页面，我想将检索到的提交数据传递给我的服务层。

我的服务层如下所示：

```
@Component
@Scope("session")
public class LandingPageService implements Serializable{

    /**
     * landingPageDAO
     */
    @Autowired
    private LandingPageDAO landingPageDAO;

    /**
     * LandingPage Instance
     */
    private LandingPage instance = null;

    public LandingPage getInstance() {
        logger.trace("returning instance...");

        if(instance == null) {
            instance = new LandingPage();
        }

        return instance;
    }

    /**
     * writes the LandingPage Domain Object into the DB
     */
    public void persist() {
        logger.trace("persisting...");
        landingPageDAO.persist(instance);
        instance = null;
    } 
```

我的表格看起来像这样：

```
<h:form class="homepage_invitee_form" action="" method="POST">
                                    <h:inputText required="true" value="#{landingPageService.instance.userEmail}" name="email" placeholder="Email Address"
                                        id="email_address_new" type="text placeholder" />
                                    <p:watermark for="email_address_new" value="Email Address" />
                                    <br />
                                    <h:inputText required="true" value="#{landingPageService.instance.firstName}" name="firstName" placeholder="First Name"
                                        id="firstname_new" type="text placeholder" />
                                    <p:watermark for="firstname_new" value="First Name" />

                                    <h:button value="Request Invitation" type="submit"
                                        styleClass="btn btn-primary opal_btn" id="submit_form_new"
                                        action="#{landingPageService.persist()}"/>

                                </h:form> 
```

当我按下提交时，我的表格没有得到处理。我什至看不到我的日志消息。任何想法，我必须改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:26:16.050

阅读. [_ `<h:button>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/button.html)它呈现一个 GET 按钮并且不支持该`action`属性。调查 webbrowser 的开发工具集中的 HTTP 流量（在 Chrome/IE/Firebug 中按 F12 并检查*Network*选项卡）也暗示`<h:button>`没有执行回发。

改为使用[`<h:commandButton>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/commandButton.html)，如每个演示表单提交的理智 JSF 教程中所示。

```
<h:commandButton id="submit_form_new" value="Request Invitation"
    action="#{landingPageService.persist}"
    styleClass="btn btn-primary opal_btn" /> 
```

### 也可以看看：

*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)

# wpf - WPF按钮一种样式的不同图像

> ID：16062604
> 
> 赞同：1
> 
> 时间：2013-04-17T14:21:49.970
> 
> 标签：wpf, data-binding

我不明白为什么不显示图像。我想要一种样式的不同按钮图像。我尝试将按钮图像设置为按钮样式的图像刷，但是我将在所有按钮上只有一张图片。

```
<Button
    Height="64" Width="64" Margin="0,0,50,50"
    Style="{DynamicResource MyButtonStyle}" VerticalAlignment="Bottom"
    HorizontalAlignment="Right">
    <Image Source="image1.png"/>
</Button>
<Button
    Height="64" Width="64" Margin="0,0,125,50"
    Style="{DynamicResource MyButtonStyle}" VerticalAlignment="Bottom" 
    HorizontalAlignment="Right">
    <Image Source="image2.png"/>
</Button> 
```

按钮样式

```
<Style x:Key="MyButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid>
                    <Rectangle x:Name="rectangle" Stroke="Black" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" TargetName="rectangle" Value="0.8"/>
                        <Setter Property="Stroke" TargetName="rectangle" Value="#FF478CFB"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="OpacityMask" TargetName="rectangle" Value="{x:Null}"/>
                        <Setter Property="Effect" TargetName="rectangle">
                            <Setter.Value>
                                <BlurEffect/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:27:00.783

你的风格不见了`ContentPresenter`。因此，当您将图像设置为`Content`a`Button`时，在使用您的 Style 时它实际上无处可放`ControlTemplate`

所以是这样的：

注意-我已将您更改`Grid`为 a `Border`，因此摆脱了`Rectangle`嵌入的内部并添加`ContentPresenter`为`Border`

```
<Style x:Key="MyButtonStyle"
        TargetType="{x:Type Button}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Button}">
        <Border x:Name="rectangle">
          <ContentPresenter />
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="IsMouseOver"
                    Value="True">
            <Setter TargetName="rectangle"
                    Property="Opacity"
                    Value="0.8" />
            <Setter TargetName="rectangle"
                    Property="BorderBrush"
                    Value="#FF478CFB" />
          </Trigger>
          <Trigger Property="IsPressed"
                    Value="True">
            <Setter TargetName="rectangle"
                    Property="OpacityMask"
                    Value="{x:Null}" />
            <Setter TargetName="rectangle"
                    Property="Effect">
              <Setter.Value>
                <BlurEffect />
              </Setter.Value>
            </Setter>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

用法：

和你一样——

```
<Button
    Height="64" Width="64" Margin="0,0,125,50"
    Style="{DynamicResource MyButtonStyle}" VerticalAlignment="Bottom" 
    HorizontalAlignment="Right">
    <Image Source="image2.png"/>
</Button> 
```

# actionscript-3 - 与命名空间内部中的定义 leftIdle1 存在冲突

> ID：16062606
> 
> 赞同：1
> 
> 时间：2013-04-17T14:21:58.793
> 
> 标签：actionscript-3, stage, instances

我正在使用 Flash Professional CS5.5 中的 Actionscript 3.0 编写游戏脚本，但出现错误。

```
Scene 1, Layer 'as2', Frame 153, Line 4 1151: A conflict exists with definition leftIdle1 in namespace internal. 
```

（我也将这些与其他变量一起使用。）

现在它是一个平台游戏，我将在游戏中放置过场动画，我需要从帧切换并将代码放在另一个帧中。但它给出了那个错误，我关闭了“自动声明舞台实例”功能，现在我检查了这个网站并用谷歌搜索了它，人们用他们的 Movieclips 得到它，我用我的变量得到它。

这是我的脚本：

```
var leftKeyDown1:Boolean = false;
var rightKeyDown1:Boolean = false;
var spaceKeyDown1:Boolean = false;
var leftIdle1:Boolean = false;
var rightIdle1:Boolean = true;
var mainSpeed1:Number = 4;

player.addEventListener(Event.ENTER_FRAME, moveChar);
function moveChar(event:Event)
{

    if (leftKeyDown1)
    {
        player.x -=  mainSpeed1;
        leftIdle1 = true;
        rightIdle1 = false;
        player.gotoAndStop("walk_left");
    }
    if (rightKeyDown1)
    {
        player.x +=  mainSpeed1;
        rightIdle1 = true;
        leftIdle1 = false;
        player.gotoAndStop("walk_right");
    }

    if (rightIdle1 && !rightKeyDown1 && !leftKeyDown1)
    {
        player.gotoAndStop("idle_right");
    }
    else if (leftIdle1 && !rightKeyDown1 && !leftKeyDown1)
    {
        player.gotoAndStop("idle_left");
    }

    if (collide.hitTestObject(player))
    {
        player.x = player.x + mainSpeed1;
    }

    if (trigger1.hitTestObject(player))
    {
        son1.gotoAndStop("walkRight");
        trigger1.gotoAndStop(2);
        son1.x +=  2;
    }
    if (trigger2.hitTestObject(player))
    {
        gotoAndPlay(4);
    }
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
function checkKeysDown(event:KeyboardEvent)
{
    if (event.keyCode == 37 || event.keyCode == 65)
    {
        leftKeyDown1 = true;
    }
    if (event.keyCode == 39 || event.keyCode == 68)
    {
        rightKeyDown1 = true;
    }
    if (event.keyCode == 32)
    {
        spaceKeyDown1 = true;
    }
}

stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysU1);
function checkKeysUp(event:KeyboardEvent)
{

    if (event.keyCode == 37 || event.keyCode == 65)
    {
        leftKeyDown1 = false;
    }
    if (event.keyCode == 32)
    {
        spaceKeyDown1 = false;
    }
    if (event.keyCode == 39 || event.keyCode == 68)
    {
        rightKeyDown1 = false;
    }

} 
```

它可能以一种奇怪的方式编码，但无论如何。我现在不知道该怎么做。帮助将不胜感激。

编辑：

哦，我也遇到了另一个错误。它具有重复功能，我似乎无法修复它，只能重命名它们，每次重命名它们都需要很长时间。因此，如果有人对此有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T20:37:59.760

你有重复的定义。

例如：

```
var leftIdle1:Boolean 
```

多次存在 - 删除重复项

# java - 为什么 JComboBox 在构建时需要项目 -1？

> ID：16062608
> 
> 赞同：0
> 
> 时间：2013-04-17T14:22:01.363
> 
> 标签：java, swing, custom-controls, jcombobox

我试图理解为什么以下代码不起作用：

```
 JComboBox status = new javax.swing.JComboBox();
           status.setModel(new DefaultComboBoxModel() {
            @Override
            public void addElement(Object anObject) {
                statusList.add((RequirementStatus) anObject);
                super.addElement(anObject);
            }

            @Override
            public int getSize() {
                return statusList.size();
            }

            @Override
            public Object getElementAt(int index) {
                return index >= 0 && index < statusList.size()
                        ? statusList.get(index) : null;
            }
        });
        status.setRenderer(new ListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list,
                    Object value, int index, boolean isSelected,
                    boolean cellHasFocus) {

                return index >= 0 ? new JLabel(
                        ((RequirementStatus) ((ComboBoxModel) status.getModel())
                        .getElementAt(index)).getStatus())
                        : new JLabel("");
            }
        }); 
```

而这个确实：

```
 JComboBox status = new javax.swing.JComboBox();
           status.setModel(new DefaultComboBoxModel() {
            @Override
            public void addElement(Object anObject) {
                statusList.add((RequirementStatus) anObject);
                super.addElement(anObject);
            }

            @Override
            public int getSize() {
                return statusList.size();
            }

            @Override
            public Object getElementAt(int index) {
                return statusList.get(index);
            }
        });
        status.setRenderer(new ListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list,
                    Object value, int index, boolean isSelected,
                    boolean cellHasFocus) {

                return index >= 0 ? new JLabel(
                        ((RequirementStatus) ((ComboBoxModel) status.getModel())
                        .getElementAt(index)).getStatus())
                        : new JLabel("-none-");
            }
        }); 
```

我不得不将该条件添加到代码中，因为由于某种原因，在构建 GUI 时，代码请求在位置 -1 处呈现元素。如果我不返回带有一些文本的标签，则组合框根本不会显示。

**编辑：**

如果此解决方法不存在，这是我得到的错误：

```
java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.ArrayList.get(ArrayList.java:324)
    at net.sourceforge.javydreamercsw.client.ui.nodes.actions.EditRequirementDialog$5.getElementAt(EditRequirementDialog.java:119)
    at net.sourceforge.javydreamercsw.client.ui.nodes.actions.EditRequirementDialog$6.getListCellRendererComponent(EditRequirementDialog.java:127)
    at javax.swing.plaf.basic.BasicComboBoxUI.getDisplaySize(BasicComboBoxUI.java:1334)
    at javax.swing.plaf.basic.BasicComboBoxUI.getMinimumSize(BasicComboBoxUI.java:903)
    at javax.swing.plaf.basic.BasicComboBoxUI.getPreferredSize(BasicComboBoxUI.java:892)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1642)
    at javax.swing.GroupLayout$ComponentSpring.calculateNonlinkedPreferredSize(GroupLayout.java:2944)
    at javax.swing.GroupLayout$ComponentSpring.calculatePreferredSize(GroupLayout.java:2905)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1593)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1593)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1593)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1590)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1588)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$Group.getSpringSize(GroupLayout.java:1604)
    at javax.swing.GroupLayout$Group.calculateSize(GroupLayout.java:1588)
    at javax.swing.GroupLayout$Group.calculatePreferredSize(GroupLayout.java:1568)
    at javax.swing.GroupLayout$Spring.getPreferredSize(GroupLayout.java:1325)
    at javax.swing.GroupLayout$SequentialGroup.setValidSize(GroupLayout.java:1972)
    at javax.swing.GroupLayout$Group.setSize(GroupLayout.java:1553)
    at javax.swing.GroupLayout.calculateAutopadding(GroupLayout.java:1058)
    at javax.swing.GroupLayout.layoutContainer(GroupLayout.java:897)
    at java.awt.Container.layout(Container.java:1419)
    at java.awt.Container.doLayout(Container.java:1408)
    at java.awt.Container.validateTree(Container.java:1505)
    at java.awt.Container.validateTree(Container.java:1511)
    at java.awt.Container.validateTree(Container.java:1511)
    at java.awt.Container.validateTree(Container.java:1511)
    at java.awt.Container.validate(Container.java:1478)
    at java.awt.Dialog.conditionalShow(Dialog.java:890)
    at java.awt.Dialog.show(Dialog.java:1036)
    at java.awt.Component.show(Component.java:1591)
    at java.awt.Component.setVisible(Component.java:1543)
    at java.awt.Window.setVisible(Window.java:843)
    at java.awt.Dialog.setVisible(Dialog.java:987)
    at net.sourceforge.javydreamercsw.client.ui.nodes.actions.EditRequirementAction$1.run(EditRequirementAction.java:33)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:666)
    at java.awt.EventQueue.access$400(EventQueue.java:81)
    at java.awt.EventQueue$2.run(EventQueue.java:627)
    at java.awt.EventQueue$2.run(EventQueue.java:625)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:636)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:159)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
[catch] at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

我知道这应该是一件容易的事，就像设置一个标志但我找不到它。

有任何想法吗？

**解决方案：** 删除模型覆盖并更改渲染器代码如下：

```
status.setRenderer(new ListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list,
                    Object value, int index, boolean isSelected,
                    boolean cellHasFocus) {
                return index >= 0 ? new JLabel(
                        ((RequirementStatus) value).getStatus())
                        : new JLabel(((RequirementStatus) list.getSelectedValue()).getStatus());
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:47:47.900

从 JComboBox#setRenderer javadoc：

> 为了显示选定的项目，调用 aRenderer.getListCellRendererComponent，传递列表对象和 -1 的索引。

# c# - Windows 窗体中未显示英镑和欧元符号，而是显示 J

> ID：16062609
> 
> 赞同：1
> 
> 时间：2013-04-17T14:22:02.840
> 
> 标签：c#, windows, winforms, currency, symbols

我们编写了一个程序，它在两台相同的机器上表现不同。在一台机器上显示带有英镑符号的价格。我们根据列表设置符号，例如 { "£", "€", "€" }; 两台机器都配置了相同的语言和键盘设置。我们不依赖于货币设置，但即便如此，两台机器上的货币设置都是相同的。但是在一台机器上，该符号被“翻译”为字母 J。我们在 Windows 窗体上使用 C# 2010 将这个带有标签，想知道是什么原因造成的？

更新我使用相同的字体和相同的方法来显示它。两台机器都运行 Win7 sp1 它不仅带有英镑符号，而且欧元符号显示为 J ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:44:27.933

多亏了我很棒的 Google-fu，我想出了一些东西，但我只能在我的一台机器上测试它，所以我不确定它是否会为你做，但无论如何都要试一试。

```
var encoder = System.Text.Encoding.GetEncoding(858); //also tried with 437
byte[] c = new byte[] { 156 };
Console.WriteLine(encoder.GetString(c)); 
```

这会在我的机器上打印出“£”。

取自该线程：[http ://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/dccd38e0-6f9e-4fb2-b114-bc44128ca634/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/dccd38e0-6f9e-4fb2-b114-bc44128ca634/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T13:17:27.640

我们的网站（我们自己的网站和其他知名网站的网站）也有类似的问题，其中英镑 (£) 符号显示为字母 J。我们还注意到，同时文本在不应该的时候是粗体和倾斜的已经。

经过大量调查发现，我们遇到的大部分机器上安装的 Helvetica 字体有问题，有两种可能的解决方案：

1.  如果您可以控制机器，请删除“Helvetica Bold Oblique”、“Helvetica Bold”和“Helvetica Oblique”字体（“Helvetica Regular”似乎可以正常工作）。
2.  在您的应用程序/网站中使用不同的字体。

# asp.net-mvc - 使客户端和服务器端验证规则相同

> ID：16062614
> 
> 赞同：2
> 
> 时间：2013-04-17T14:22:17.263
> 
> 标签：asp.net-mvc, knockout.js, client-side-validation, server-side-validation

我有一个使用 ASP.NET MVC 和 KnockoutJS 作为 MVVM 部分的应用程序。服务器通过 JSON 将数据绑定到服务器。客户端处理数据并在此之后进行标准 POST 回调。

我现在必须处理一些业务逻辑，例如：

*   如果 property2 == "FOOBAR"，则 property1 必须优于 10
*   property2 必须是 != ""

等等等等......（我必须处理很多条件）

那么，为了简单起见，是否可以避免服务器端代码（C#）和客户端（JS）之间的代码重复？想法是在一个地方定义验证规则（可能使用数据注释）并使用这些规则生成 JS 代码（用于客户端验证）或 C# 代码（用于服务器端验证）。

提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:27:15.263

我想[内置注释](http://msdn.microsoft.com/en-GB/library/system.componentmodel.dataannotations.aspx)与添加 jQuery 验证相结合将适合您的大多数业务需求。

例如，您的第二个可以使用`[Required]`

对于那些需要一些额外的东西（比如你提到的第一个场景），你可以看看[`Remote`验证](https://stackoverflow.com/questions/4752877/remote-validation-in-asp-net-mvc-3-how-to-use-additionalfields-in-action-method) **或**实现你自己的注释（但是当连接到 jQuery 验证以添加你的新注释时，这会变得有点棘手）。

# javascript - 使用 Video.JS 同步两个视频

> ID：16062619
> 
> 赞同：1
> 
> 时间：2013-04-17T14:22:24.687
> 
> 标签：javascript, html5-video, video.js, async.js

好的，所以我有两个 video.js 播放器（canv1 和 canv2），每个播放器都播放相同视频的副本。我想在canv1的某个时间码暂停canv2，然后在canv1的稍后时间码，将canv2与canv1同步并播放。

目标是canv2可以暂停自己然后赶上canv1。问题是，我的同步功能遇到了问题。有某种滞后，所以当我同步时，我会丢失 7 到 10 帧视频。

这就是这个概念。此代码使用 Video.JS API。[https://github.com/zencoder/video-js/blob/master/docs/api.md](https://github.com/zencoder/video-js/blob/master/docs/api.md)

```
var conchShell = canv1; // Lord of the Flies, Bitch!

// Accepts player objects as arguments - canv1, canv2
function pause(){ 
    for (var i = 0, j = arguments.length; i < j; i++){
        arguments[i].pause();
        console.log( arguments[i] + '1 is paused' ); /* TODO: REMOVE CONSOLE LOGS BEFORE DEPLOYMENT */
    }
}   

function play(){    
    for (var i = 0, j = arguments.length; i < j; i++){
        arguments[i].play();
        console.log( arguments[i] + '1 is playing' );
    }
}

function syncToConchShell() {
    for (var i = 0, j = arguments.length; i < j; i++){
        arguments[i].currentTime(conchShell.currentTime());
        console.log( arguments[i] + 'was synchronized with' + conchShell );
    }
} 
```

conchShell 是拥有主时间线的玩家，其他玩家与之同步。所以问题是，当我运行同步功能时，conchShell 视频仍然比我尝试同步的视频提前 5 到 10 帧结束。我认为这是由于运行同步功能所需的时间。即，视频在几分之一秒内完全同步，但在 canv2 赶上之前，conchShell 已经领先了几帧。

所以问题是：有没有一种简单的方法可以计算出一个函数运行了多少时间？因为如果有的话，我可以把那个时间附加到canv2上的时间码上，我们就很好了。

**更新：**

好的，我尝试了其他一些方法。我现在正在使用异步库并且取得了更多的成功。我唯一的问题是它在 async.js 的第 505 行抛出“对象不是函数”错误。据我所知，这通常是因缺少分号而引发的错误。

无论如何，这是我现在所拥有的现场版本。如果您愿意，请查看代码

[http://staging.15four.com/videotest](http://staging.15four.com/videotest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:50:37.020

如果您使用的是 HTML5 视频或 Flash 后备，则没有任何信息。你在这两个方面都有问题吗？我在使用 Flash 播放器时遇到的一个问题是它不允许完美的搜索——所以几乎总是你只有几帧。

回答您的问题：有一种简单的方法可以测量函数花费了多长时间：

```
var start = new Date();
// some code to measure
var end = new Date();
var diffMs = end - start; 
```

但是我不认为它可以解决你的问题。

如果您只关心 HTML5 视频，那么我可以向您建议不同的可能性：

1.  [Popcorn.js](http://popcornjs.org/demos)库是为将视频与内容同步而设计的，不过我还没有看到有两个视频的工作示例。
2.  [GitHub 上有一个mediagroup.js](https://github.com/rwldrn/mediagroup.js)的原型- 用于同步视频的库。

第二个很有趣——他们正在使用`requestAnimationFrame`函数，如果你正在使用`setTimeout`或者你应该切换到它`setInterval`——它更准确。

**更新：** 解决您直接使用异步的问题：我在 Chrome 中更新代码时遇到的问题是：对象不是函数。我以前没有使用过 async.js。但似乎你应该将函数或对象数组传递给你的 async.parallel，可能像这样：

```
async.parallel([
    function() {
        async.each(players, syncSingleToConch, function() {
            console.log('error with the each function');
        })
    },
    function() {
       conchShell.currentTime(arguments[0].currentTime())
    } /* ... more ... */ 
]); 
```

然而，函数`async.parallel`采用回调参数，我认为这才是真正的异步。与迭代器相同`async.each`- 它们具有项目和回调作为参数。我无法提供更多帮助，因为我不是该主题的专家。也许用 async.js 标签标记你的问题？

# jquery - 如何在悬停时计算所有先前的“li”元素宽度？

> ID：16062624
> 
> 赞同：0
> 
> 时间：2013-04-17T14:22:54.223
> 
> 标签：jquery, hover, width

我有列表，我正在尝试编写 jQuery 代码来计算之前的 li 宽度，而不是悬停在某个元素上。例如，如果我悬停第三个元素，我需要获得第一个 + 第二个元素的宽度。

```
<ul>
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
    <li>Fourth</li>
</ul> 
```

目前的代码：

```
jQuery('ul li').each(function() {
    jQuery(this).hover(function () {
        jQuery(this).prevAll().width();
    });
}); 
```

但我只得到一个先前的元素宽度。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:25:32.770

如果你想要宽度的总和：

```
jQuery('ul li').each(function() {
    jQuery(this).hover(function () {
        var prevWidth = 0
        jQuery(this).prevAll().each(function(){prevWidth  += $(this).width();});
        alert(prevWidth );
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:27:05.553

```
jQuery('ul li').on('mouseenter', function () {
    var width = 0;
    jQuery(this).prevAll().each(function() {
        widht = width + $(this).width();
    });
    console.log(width);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:23:54.293

尝试这个 -

```
jQuery(this).prevAll().each(function(){
  $(this).width();
}); 
```

# java - 正则表达式用于匹配特定字符之间和之前和之后的空格

> ID：16062627
> 
> 赞同：0
> 
> 时间：2013-04-17T14:22:59.533
> 
> 标签：java, regex

因此，我一直在互联网上搜索 4 个多小时以寻找有关如何执行此操作的线索，但我找不到一种方法来做我想做的所有事情。我想要的是输入这个（例如）：

```
 word1 !  ?? word2 word3 ..   .. word4, word5, word6 !?. word7 !! !
word8 word9 ?
. word10 
```

然后 match `.`，`!`并`?`以任何顺序和中间的任何空格，以便它返回我：

```
["word1", "word2 word3", "word4, word5, word6", "word7", "word8 word9", "word10"] 
```

值得一提的是我想`String.split()`用于此目的，但任何其他更有效/更简单的方法都会非常受欢迎！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:32:07.763

你可以试试这个方法

```
String data="word1 !  ?? word2 word3 ..   .. word4, word5, word6 !?. word7 !! !" +
        "word8 word9 ?" +
        ". word10";
for (String s:data.split("\\s*([!?.]+\\s*)+")){
    System.out.println(s);
} 
```

输出

```
word1
word2 word3
word4, word5, word6
word7
word8 word9
word10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:30:15.307

尝试

```
 String s = "word1 !  ?? word2 word3 ..   .. word4, word5, word6 !?. word7 !! ! \n word8 word9 ?\n. word10";
    String[] a = s.split("(\\s*[!?.\n\r]+\\s*)+");
    System.out.println(Arrays.toString(a)); 
```

输出

```
[word1, word2 word3, word4, word5, word6, word7, word8 word9, word10] 
```

# c# - 从类库调用操作时服务器返回一个无效的肥皂错误

> ID：16062631
> 
> 赞同：0
> 
> 时间：2013-04-17T14:23:21.917
> 
> 标签：c#, .net, asp.net-mvc, web-services

我正在使用 Visual Studio 2012。我有一个引用类库的 ASP.NET MVC 4 Web 应用程序。这个类库有一个服务引用。我通过将 URL 插入到 .wsdl 文件中添加的服务引用。

我已经正确设置了一切。当我调用其中一个操作时，我收到一个错误：

> 服务器返回一个无效的 SOAP 故障。有关更多详细信息，请参阅 InnerException。

然后当我查看内部异常时：

> 根级别的数据无效。第 16 行，第 17 位。

我做的一切都是正确的，我只是不知道为什么当我调用其中一个操作时会出现这个错误。我在哪里可以看到返回的内容？我无法控制这项服务，我只是在使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:32:51.497

在发出请求时运行 fiddler。 [http://fiddler2.com/](http://fiddler2.com/)

这将允许您查看实际发送的内容以及实际返回的内容

# php - 比较来自两个不同格式的 xml 提要的数据

> ID：16062634
> 
> 赞同：0
> 
> 时间：2013-04-17T14:23:23.463
> 
> 标签：php, xml, simplexml

我已经得到了这两个提要（在生产中会有更多）关于一个事件的票价 - 这两个提要的格式不同，但基本上显示相同的信息。

我想做的是比较价格属性并找到最低价格，我知道如何比较实际价格

```
if(floatval($feed1['price']) > floatval($feed2['price']]){
    return $feed1['price'];
}
else {
    return $feed2['price'];
} 
```

但是让我难以理解的是如何确保我比较相同的事件价格，因为它们来自不同格式的提要。

IE。我如何从两个提要中比较伦敦 HMV 音乐会的常设价格？

**饲料 1**

```
<type id="4558" name="Rolling Stones Concert" url="http://example1.com">
    <event id="52115351" name="HMV forum - London">
        <ticket name="Stalls" id="1354855" price="120"/>
        <ticket name="Standing" id="4654845" price="85"/>
    </event>

    <event id="52115351" name="Webley Arena - London">
        <ticket name="Stalls" id="4556147" price="110"/>
        <ticket name="Standing" id="9743466" price="95"/>
    </event>
</type> 
```

**饲料 2**

```
<type id="5786" name="Rolling Stones Concert - World Tour" url="http://example2.com">
    <market id="45645634" name="London - HMV">
        <unit name="Seating" id="212770047" price="125"/>
        <unit name="Standing" id="212770046" price="80"/>
    </market>

    <market id="45645914" name="London - Wembley">
        <unit name="Seating" id="212770047" price="109"/>
        <unit name="Standing" id="212770046" price="99"/>
    </market>
</type> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:21:25.827

您正在寻找一种叫做[*信息提取*(IE)](http://en.wikipedia.org/wiki/Information_extraction)的东西。这通常通过[自然语言处理 (NLP)](http://en.wikipedia.org/wiki/Natural_language_processing)完成，例如，您需要一些能够分析的程序

```
<type id="4558" name="Rolling Stones Concert" url="http://example1.com"> 
```

在第一个提要中表示与

```
<type id="5786" name="Rolling Stones Concert - World Tour" url="http://example2.com"> 
```

尽管存在差异，但在第二个提要中：

```
id="4558"                     =/=  id="5786"
name="Rolling Stones Concert" =/=  name="Rolling Stones Concert - World Tour"
<event>                       =/=  <market>
id="45645634"                 =/=  id="45645914"
name="HMV forum - London"     =/=  name="London - HMV"
<ticket>                      =/=  <unit>
name="Stalls"                 =/=  name="Stalls" 
```

正如您可以想象的那样，您将获得的每个新提要都会有所不同。如果您预先分析数据结构（例如*<event>*是*<market>*以及哪些属性属于彼此，那么您可以对这些值运行文本分析并进行相似性分析。

此外，如果有常见的同义词，例如*Stalls* is *Seating*（反之亦然），您可以预先降低复杂性。

```
[feed 1] -- streamline --> [sfeed 1]\                   / [combined feed]
                     ...             X compare / align X
[feed N] -- streamline --> [sfeed N]/                   \ [unknown data] 
```

# jquery - 带有 div 的 jQuery 链接按钮

> ID：16062636
> 
> 赞同：0
> 
> 时间：2013-04-17T14:23:29.173
> 
> 标签：jquery, css, html, button

好的所以我试图将一个 div 与一个按钮链接，有多个 div 并且每个 div 将被分配它自己的按钮，我想要实现的是当一个 div 可见时改变其按钮的颜色。

到目前为止，这是我的代码，它不起作用。

```
<ul style="padding-left:10em;">
    <li id="btID-1">1</li>
    <li id="btID-2">2</li>
    <li id="btID-3">3</li>
    <li id="btID-4">4</li>
</ul>
<div id="pgID-1" class="ui-content">content 1</div>
<div id="pgID-2" class="ui-content">content 2</div>
<div id="pgID-3" class="ui-content">content 3</div>
<div id="pgID-4" class="ui-content">content 4</div> 
```

jQuery代码：

```
 $(document).ready(function () {
     $('.ui-content').hide();
     $('#pgID-1').show();
     $(setPage);

     function setPage() {

         var active = $('.ui-content:visible');
         currPage = $('.ui-content:visible').index(active);

         currButton = $('.ui-dot').index(currPage);
         $(currButton).css("color:#ff0000");

     }

 }); 
```

我还希望按钮显示其 div 并隐藏其余部分。我想知道我的代码有什么问题，以及是否有更好的方法来实现同样的目标。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:55:33.177

不是 100% 确定我理解要求，但这应该可以解决问题：

```
<ul id="btns" style="padding-left:10em;">
    <li id="btID-1">1</li>
    <li id="btID-2">2</li>
    <li id="btID-3">3</li>
    <li id="btID-4">4</li>
</ul>
<div id="pgID-1" class="ui-content">content 1</div>
<div id="pgID-2" class="ui-content">content 2</div>
<div id="pgID-3" class="ui-content">content 3</div>
<div id="pgID-4" class="ui-content">content 4</div>

 $(document).ready(function () {
     $('.ui-content').hide();
     $('#pgID-1').show();

     $('#btns li').click(function(){
         $('.ui-content').hide();
         $('#btns li').css("color","black");
         var IDno = $(this).attr("id").substr(5);
         $('#pgID-'+IDno).show();
         $(this).css("color","red");
     });

 }); 
```

请参阅 JSFiddle 以查看它的工作原理：

[http://jsfiddle.net/w5QJK/12/](http://jsfiddle.net/w5QJK/12/)

# google-maps - Google Maps API for Business 可用于 localhost URL？

> ID：16062637
> 
> 赞同：1
> 
> 时间：2013-04-17T14:23:33.747
> 
> 标签：google-maps

我正在使用地理编码进行一个新项目，但现在我正在本地测试我的网站。如何注册本地 URL（例如：）`[http://localhost/myWebApp]`？或者只有当我的网站在虚拟主机服务上时我才会看到更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:34:35.560

通过使用 javascript V3 api，您只需在脚本声明中输入 api 密钥。例子：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=enteryourapikeyhere&sensor=false"></script> 
```

您可以按照此处所需的步骤在您的页面中实施它：

[谷歌地图 JavaScript API v3](https://developers.google.com/maps/documentation/javascript/tutorial)

# r - 使用 R 进行区间回归

> ID：16062638
> 
> 赞同：1
> 
> 时间：2013-04-17T14:23:33.877
> 
> 标签：r, regression, intervals, linear-regression

我需要对表示为区间（下限和上限）的响应数据进行多元回归分析，我假设该区间是对数正态分布的，在许多解释变量上。

我发现该软件包`intReg`可以执行此操作，但由于我不断收到消息，因此并没有取得太大的成功。

```
There were 50 or more warnings (use warnings() to see the first 50) 
```

这些是我的响应数据的日志：

```
> head(y)
       lb       ub
[1,] 6.756932 6.852243
[2,] 6.246107 6.400257
[3,] 6.063785 6.246107
[4,] 7.019297 7.093405
[5,] 6.756932 6.852243
[6,] 6.400257 6.533789 
```

以下是我认为最重要的两个变量作为示例：

```
> head(inc_lev)
[1] low    high   high   low    high   middle
Levels: high low middle

> head(usage)
[1] 12.9  8.6  4.3 17.2 12.9 12.9 
```

然后我尝试运行回归，但我得到的是：

```
> intreg<-intReg(y~inc_lev+usage, data=data)
There were 50 or more warnings (use warnings() to see the first 50)
Warning messages:
1: In Sys.setlocale("LC_COLLATE", loc) :
  OS reports request to set locale to "" cannot be honored 
```

ETC...

所以我的问题是：1）这里有什么问题，2）我做错了什么，3）还有另一种方法可以在 R 中执行区间回归吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T08:51:27.240

我在日期处理方面遇到了同样的问题，到目前为止一直忽略它，但发现了这个（旧）帖子并决定确定修复它。

您需要做的是`LC_COLLATE`在启动 R ( ) 之前的环境中或从 R 内部设置一些合理的值`export LC_COLLATE=C`：

```
> as.gset(as.POSIXct(Sys.time()))
{<<POSIXct>>}
Warning message:
In Sys.setlocale("LC_COLLATE", loc) :
  OS reports request to set locale to "" cannot be honored
> Sys.getenv("LC_COLLATE")
[1] ""
> Sys.setenv("LC_COLLATE"="C")
> as.gset(as.POSIXct(Sys.time()))
{<<POSIXct>>}
> Sys.unsetenv("LC_COLLATE")
> as.gset(as.POSIXct(Sys.time()))
{<<POSIXct>>}
Warning message:
In Sys.setlocale("LC_COLLATE", loc) :
  OS reports request to set locale to "" cannot be honored 
```

`Sys.setenv(LC_COLLATE="C")`请注意，带有日期的 gset 操作之后没有错误消息。我知道您没有使用集合或日期，但我认为这两种情况下的警告可能是由相同的根本原因（排序规则和语言环境）引起的。

如果有人有类似的警告并且可以测试是否有`Sys.setlocale`帮助，请写下关于它是如何工作的评论。

# javascript - 获取 Javascript 计算器来做一个像 (5-3+2) 这样的等式，只有 2 个数字输入

> ID：16062639
> 
> 赞同：0
> 
> 时间：2013-04-17T14:23:34.147
> 
> 标签：javascript, calculator

我正在制作这个 Javascript 计算器，但我不知道如何让计算器解决 5-(3+1)、5-3+1 之类的问题。它只打印等式的 5-3 部分而不是 +1 这是我的代码：

```
<html>
<script>
function calc()
{
var D = "";
var A = document.getElementById("num1").value;
var B = document.getElementById("op").value;
var C = parseInt(document.getElementById("num2").value);
if(B == "+")
{
    D = parseInt(A)+parseInt(C);
}
else if(B == "-")
{
    D = parseInt(A)-parseInt(C);
}
else if(B == "*")
{
    D = parseInt(A)*parseInt(C);
}
else if(B == "/")
{
    D = parseInt(A)/parseInt(C);
}
else
{
    alert("Error")
}
document.getElementById("result").value = parseInt(D);
}
function conteq()
{
var D = document.getElementById("result").value;
var E = "";
document.getElementById("num1").value = D;
document.getElementById("op").value = E;
document.getElementById("num2").value = E;
    document.getElementById("result").value = E;
}
function resetcalc()
{
    var E = "";
    document.getElementById("num1").value = E;
    document.getElementById("op").value = E;
    document.getElementById("num2").value = E;
    document.getElementById("result").value = E;
}
</script>

<body>
<table align="center">
<td>This is a basic Javascript Calculator.<br /></td></table>
<table align="center"><td>(Number 1)<input type="text" id="num1" align="middle" name="num1" />
</td>
<table align="center"><td>(Operator)<input type="text" align="middle" id="op" name="op" /></td>    </table>
<table align="center"> <td>(Number 2)<input type="text" align="middle" id="num2" name="num2" /></td>  </table>
<table align="center"> <td><input type="button" align="middle" value="=" onClick="calc()" /></td>    </table>
<table align="center"><td>(Result)<input type="text" id="result" name="result" readonly />
</td></table>

<table align="center"><td><input type="button" value="Set Answer to Number 1" onClick="conteq()"    /></td></table>
<table align="center"><td><input type="button" value="Reset" onClick="resetcalc()" /></td></table>
</table>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:34:22.697

您正在尝试将 ( 转换为整数，但不能（因为它不是）：

```
function calc()
{
    var D = "";
    var A = document.getElementById("num1").value;
    var B = document.getElementById("op").value;
    var C = document.getElementById("num2").value;

    D = eval(A + B + C);

    document.getElementById("result").value = D;
} 
```

# mysql - 如果另一行具有“BETTER”值，则从表中删除一行

> ID：16062640
> 
> 赞同：1
> 
> 时间：2013-04-17T14:23:38.637
> 
> 标签：mysql, sql-update, delete-row

我无法很好地提出一个正确描述我的问题的问题。

但是..这就是我想要实现的

有一个表格存储学生参加考试的结果。

```
Student Name |Roll Number| Subject | Result

Andy         | 111       | Math    | Fail
Bob          | 112       | Science | Pass
Carl         | 113       | History | Pass
Andy         | 111       | Math    | Pass
Bob          | 112       | Science | Fail
Bob          | 112       | History | Fail
Carl         | 113       | History | Fail 
```

上面是一个 MySQL 表，如果对于相同的学生+学科组合，还有另一行具有“好”结果，我想删除反映“坏”结果的特定行。即..安迪第一次数学不及格，但后来通过了。所以应该删除第一行。而且，鲍勃通过了科学一次，但在第二次尝试中失败了。所以应该删除第二次尝试。

我想要的表：

```
Student Name |Roll Number| Subject | Result

Bob          | 112       | Science | Pass
Carl         | 113       | History | Pass
Andy         | 111       | Math    | Pass
Bob          | 112       | History | Fail
Carl         | 112       | History | Fail 
```

如果删除不起作用，可能会将最佳值插入另一个表并截断该表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:27:00.917

使用提供的数据，您可以将其作为聚合查询来执行：

```
select StudentName, RollNumber, Subject,
       (case when MAX(Result = 'Pass') = 1 then 'Pass' else 'Fail' end) as Result
from t
group by StudentName, RollNumber, Subject 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:30:07.210

使用 mysql 特殊的[多表删除语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)：

```
delete a 
from results a
join results b
    on b.roll_number = a.roll_number
    and b.subject = a.subject
    and b.result = 'Pass'
where a.result = 'Fail' 
```

如果有匹配的通过行，这只会删除失败的行。如果除了“通过”之外还有其他“好”的结果，您将不得不相应地调整条件。

# php - CakePHP 2.x MSSQL 2008 连接

> ID：16062643
> 
> 赞同：1
> 
> 时间：2013-04-17T14:23:57.890
> 
> 标签：php, sql-server, cakephp

我的 Windows 机器（Windows 8，使用 WAMP）上有 CakePHP 2.x 和 PHP 5.4.3。我必须连接到其他 mssql 服务器，因为我需要那里的一些数据。我已经尝试了很多连接方式，但错误信息总是一样的：

```
Error: A Database connection using "Sqlserver" was missing or unable to connect. 
The database server returned this error: Selected driver is not enabled

Error: Sqlserver driver is NOT enabled 
```

我的 database.php 配置：

```
public $urniki = array(
    'datasource' => 'Database/Sqlserver',
    'persistent' => false,
    'host' => 'somehost.com',
    'login' => 'user',
    'password' => 'pass',
    'database' => 'db',
    'prefix' => '',
    'encoding' => 'utf8',
); 
```

知道如何连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:03:01.907

确保您已安装 PHP 的 SQLServer 驱动程序，并且此行在您的 php.ini 中

```
Extension=php_sqlsrv.dll 
```

有关更多详细信息，请参见：[http ://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/install-the-sql-server-driver-for-php](http://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/install-the-sql-server-driver-for-php)

# php - 将单选更改为复选框，并使用几个类别更改 SQL

> ID：16062645
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:03.000
> 
> 标签：php, sql, checkbox, where, radio

我正在寻找将单选更改为复选框并使用它进行 SQL SELECT 的想法：

现在用户通过表单单选（一个类别）代码选择类别：

```
$zapytanie = $pdo->prepare('SELECT * FROM pytania_new WHERE Kategoria = :kategoria'); 
```

脚本显示了我们选择的一个类别的所有问题。

现在我想选择几个类别，所以我将当前代码更改为显示复选框表单并将所选类别保存到数组，但现在我不知道如何执行 SQL 来向我显示几个类别的问题

```
$zapytanie = $pdo->prepare('SELECT * FROM pytania_new WHERE Kategoria = :kategoria AND :kategoria2'); 
```

这不想工作。

下一个问题是如何检查 SQL 应该从数据库下载多少类别。

我希望你能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:56:54.237

好的，所以首先我们必须创建所有类别的字符串，如下所示：

```
$kategorie = join(',',$kategoria); 
```

之后有简单的 SQL 可以在 base 中找到一些类别

```
$zapytanie = $pdo->prepare("SELECT * FROM pytania_new WHERE Kategoria IN ($kategories)"); 
```

这就是全部:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:36:13.610

你可以用一个简单的 for 循环来做到这一点。

```
$categories = array("first","second");
$query = "";
$delimiter = "";
foreach($categories as $category) {
  $query .= $delimiter . "kategoria = $category";
  $delimiter = " OR "; //Dont really know how your sql looks but this makes more sense. Otherwise change to AND if a row can have multiple categories
}
$sql = "SELECT * FROM pytania_new WHERE $query"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:32:22.780

`AND`运算符需要提及列，而不是值所以在你的情况下`Kategoria = :kategoria AND Kategoria2 = :kategoria2`

但是我们没有你的结构，也许你没有第二列，所以你需要收到 2 行结果？然后使用`OR`运算符：

`Kategoria = :kategoria OR Kategoria = :kategoria2`

# java - 如何以编程方式测量请求的成本（cpm_usd）？

> ID：16062647
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:05.797
> 
> 标签：java, python, google-app-engine, performance-testing

我想跟踪到达我的[GAE](https://developers.google.com/appengine)前端实例的所有请求的[cpm_usd 值。](https://developers.google.com/appengine/docs/java/tools/appstats)[我在应用程序的日志](https://developers.google.com/appengine/docs/java/logs/overview)中看到了 cpm_usd 标头。**但是有没有办法在运行时访问这些数字以便绘制它们？**我想为每个端点创建一个近乎实时的成本指标。

 ***   /rest/foo1：0.000011 美元
*   /rest/foo2：0.000013 美元
*   /休息/bar1：0.000014 美元
*   /rest/bar2：0.000016 美元

是否有可信赖的测试程序来执行此操作？如果没有，是否有另一种不涉及解析我的日志文件的方法？或者我只能通过在后台解析日志来获得这些数字？

**更新**

[如此处](https://stackoverflow.com/questions/3415004/log-only-http-servlet-response-headers)所述，我尝试添加一个拦截 {add,set}Header() 调用的[sitebricks](https://code.google.com/p/google-sitebricks/)请求过滤器。

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    chain.doFilter(request, new HttpServletResponseWrapper((HttpServletResponse) response) {
        @Override
        public void setHeader(String name, String value) {
            if ("X-AppEngine-Estimated-CPM-US-Dollars".equals(name)) {
                // log request costs
            }
            super.setHeader(name, value);
        }

        @Override
        public void addHeader(String name, String value) {
            if ("X-AppEngine-Estimated-CPM-US-Dollars".equals(name)) {
                // log request costs
            }
            super.addHeader(name, value);
        }
    });
} 
```

我假设标题要么具有不同的名称，要么 GAE 以不同的方式设置标题。无论哪种情况，我都没有看到成本标头被捕获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:24:19.197

标头由位于您的实例前面的应用程序服务器添加，因此您无法从代码中访问此标头。

您将不得不解析日志文件，并且可以考虑使用[log2bq](https://code.google.com/p/log2bq/)来执行此操作。**

# css - 如何使用 sass 正确避免在 HTML 上嵌入 twitter 引导类名称

> ID：16062650
> 
> 赞同：18
> 
> 时间：2013-04-17T14:24:13.977
> 
> 标签：css, html, twitter-bootstrap, sass

我正在开发一个刚刚开始的 Rails 项目。我们想使用 twitter bootstrap 作为我们样式的基础，一开始我们会直接在 HTML 代码中使用 bootstrap 的类名，就像在 bootstrap 的文档中显示的那样，但是在阅读了以下帖子之后：

[可维护 CSS 中的经验教训](http://blog.pamelafox.org/2012/12/a-tale-of-two-bootstraps-lessons.html)

[请停止在您的 HTML 中嵌入 Bootstrap 类](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)

很清楚为什么这不是使用引导程序的正确原因，所以在阅读了更多内容之后：

[将 CSS 与 HTML 解耦](http://thenittygritty.co/decouple-css)

[smacss](http://smacss.com/)

除此之外，似乎使用 sass @extend 是避免使用引导程序的类名的正确方法，所以不要这样做：

```
<button type="submit" class="btn">Search</button> 
```

我们会这样做：

```
<button type="submit" class="button">Search</button> 
```

我们的 sass 代码如下所示：

```
.button {
   @extend ".btn";
} 
```

这种方法的问题是，除了每次我们扩展引导类以使用不同的名称时将添加的一堆额外选择器之外，在引导程序使用如下选择器的情况下：

```
.form-search .input-append .btn, .form-search .form-input-append .btn {
  border-radius: 0 14px 14px 0;
} 
```

该按钮不会获​​得正确的样式，因为 sass 不会将相同的规则应用于我们的自定义类名，我的意思是，sass**没有**这样做：

```
.form-search .input-append .btn, .form-search .input-append .button, 
.form-search .form-input-append .btn, .form-search .form-input-append .button {
  border-radius: 0 14px 14px 0;
} 
```

所以我想知道，这是避免将引导程序的类名嵌入到 HTML 中的正确方法，如果是这样，我应该如何处理这个问题（它经常发生）？如果不是，那么使用自定义类名但仍然从引导程序中获取样式的更好方法是什么。

我非常感谢您对此的想法。请记住，我只是在学习整体网页设计（css、sass、less、html、js 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T11:53:08.740

我建议您查看 sass 占位符类[http://sass-lang.com/documentation/file.SASS_REFERENCE.html#placeholders](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#placeholders)，以免使您的 css 膨胀。很可能您不会使用引导程序中包含的每个元素，并且占位符只有在您的代码中实际扩展时才会写入您的样式表。

此外，我认为人们往往会对 css 框架的工作方式以及 css 和 html 的解耦实际工作方式感到困惑。对于非常大的网站（或您期望最终会变得非常大的网站），性能和 css 文件大小至关重要，某种 OOCSS 方法是您的最佳选择。这意味着您不可避免地会在 HTML 中直接使用格式化代码。

如果您可以让自己的效率降低一点并且希望您的 HTML 干净，请确保使用语义类（按钮示例：call-to-action、call-to-action-secondary、submit、btn-primary、btn-企业颜色等...）

还要记住将你的 JS 与 CSS 解耦！使用特殊的类来附加行为（例如 js-submit、js-call-to-action 等......）

最后但同样重要的是：不要计划更新您的 CSS 框架。这些框架旨在为您提供先机，而不是成为您的整体设计解决方案。扩展它们、调整它们、使它们成为你自己的、投资于设计并创建你自己的外观，以使你的应用程序独一无二。如果让您想到更新的原因是担心跟上标准更改，那么最好使用 compass mixins。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T13:29:39.580

当您将 .btn 重命名为 .button 时，您还应该将 .form-search 重命名为 .form-searchnew 等吗？在这种情况下，上面示例中的 sass 代码应该类似于：

```
.form-searchnew .input-appendnew .button {
  extend(.form-search .input-append .btn);
} 
```

这很有意义（我不知道 sass）并导致您期望的 css。

我认为引导程序不仅仅与 CSS 有关。Bootstrap 是关于 css、html（结构）和 javascript 的。即使您将 css 与 html 分开，我也不容易迁移到其他框架。除了 css，您还必须更改 html 结构和 javascript 调用。

示例从 Twitter 的 Bootstrap 2 迁移到 3（请参阅：将[Bootstrap 更新到版本 3 - 我需要做什么？](https://stackoverflow.com/questions/17974998/updating-bootstrap-to-version-3-what-do-i-have-to-do/18069643)）。我还想知道您是否可以通过将旧类扩展到新 css 来进行迁移（请参阅：[http ://bassjobsen.weblogs.fm/migrate-your-templates-from-twitter-bootstrap-2-x-to-twitter-bootstrap -3/](http://bassjobsen.weblogs.fm/migrate-your-templates-from-twitter-bootstrap-2-x-to-twitter-bootstrap-3/) )。阅读[迁移指南](http://bootply.com/bootstrap-3-migration-guide)后，我认为您不能。

其他解决方案。Angular JS 将 Twitter 的 Bootstrap 与 javascript 分离。同样在这种情况下，迁移似乎也不是无痛的，请参阅：[Angular Dialog directives with Bootstrap 3](https://stackoverflow.com/questions/18150629/angular-dialog-directives-with-bootstrap-3/18241469)

也许也读过这篇文章：[http](http://www.jasonwong.org/post/45849350459/migrating-from-zurb-foundation-twitter-bootstrap-to) ://www.jasonwong.org/post/45849350459/migrating-from-zurb-foundation-twitter-bootstrap-to 。它指的是[Bourdon](http://bourbon.io/)和[Neat](http://neat.bourbon.io/)。

他们网站上的例子：

```
<!-- HTML markup for the section right below this code block -->
<section>
  <aside>What is it about?</aside>
  <article>Neat is an open source semantic grid framework built on top of Sass and Bourbon…&lt;/article>
</section>

// Enter Neat
section {
  @include outer-container;
  aside { @include span-columns(3); }
  article { @include span-columns(9); }
}
// And the result is... 
```

正如他们所说：“它完全依赖于 Sass mixins，不会污染您的 HTML”，这似乎是您正在寻找的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-26T00:34:13.987

For being new to most of this, you're on the right track; the resources you've been reading are excellent. But, I think the concerns you have might not be justified:

> ...the button won't get the right style because sass will not apply that same rule to our custom class name...

In fact, I think you must be mistaken. According to the Sass documentation:

> @extend works by inserting the extending selector (e.g. .seriousError) anywhere in the stylesheet that the extended selector (.e.g .error) appears.

See [http://sass-lang.com/documentation/file.SASS_REFERENCE.html#how_it_works](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#how_it_works) for the full code example.

Your original solution was actually correct. Use extends, but without the quotes:

```
.button {
  @extend .btn; //no quotes
} 
```

I tested this using your example, and it works correctly. Sass copies all the selectors with ".btn" and on those newly created selectors, it replaces ".btn" with ".button".

Also, if Sass produces too much duplication for your liking, don't worry about it (so long as you are following best practices as pointed out by the links you posted). Duplicate code is easily compressed if the server uses gzip or the equivalent; the client shouldn't notice any slower loading times, although it might take slightly longer to "unzip" the CSS. As for CSS selector speed, don't worry about that either; the only case where speed matters for selectors is on the JavaScript side, particularly with jQuery. For your Sass code, simply follow best practices for maintainability (notably, modularization as you are trying to do, i.e. SMACSS) and you'll be good to go.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T03:28:50.057

使用`@extend`，但不要引用选择器：

`.button { @extend .btn; }`

然后你会看到 Sass 也扩展了相关的选择器，就像你想要的一样（`.form-search .input-append .btn`等等）。

> …除了每次我们扩展引导类时都会添加的一堆额外选择器，只是为了使用不同的名称…</p>

`@extend`通过复制选择器来工作。如果你不想这样，你可以在 HTML 中“扩展”——即添加 Bootstrap 的类名。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T23:13:01.510

sam 和 tjklemz 给出的答案将帮助您解决当前的技术挑战，但也可以将您的 CSS 和 HTML 进一步解耦。我将在下面给出一个示例，但请记住，这只是一个演示 mixins/扩展 CSS 类的强大功能的快速示例。

我还强烈建议查看[ZURB Foundation 框架](http://foundation.zurb.com/)，因为它本身就是 SASS，并且在设计时考虑了这种开发风格。

例如：

```
<body>
    <div id="my-header">
        <h1><a href="#">My Company</a></h1>
        <h2>My Tagline</h2>
    </div>
    <div id="my-main">
        <div class="my-widget">
            <h1>Widget Title</h1>
            <a>Widget Option 1</a>
            <a>Widget Option 2</a> 
        </div>    
    </div>
</body> 
```

使用随附的 SCSS：

```
//these examples wouldn't really work
//because bootstrap needs more markup
#my-header {
    @extend .navbar;
}
#my-header h1 {
    @extend .branding;
}
#my-main {
    @extend .container;
}

//good example
.my-widget {
    @extend .well;
    @extend .hero-unit;
}
.my-widget a {
    @extend .btn;
} 
```

# c++ - 关于类成员函数指针的sizeof

> ID：16062651
> 
> 赞同：13
> 
> 时间：2013-04-17T14:24:15.617
> 
> 标签：c++, class, pointers, sizeof, member

假设我们有一个 A 类

```
class A; 
```

和这些类型定义

```
typedef void (A::*a_func_ptr)(void);
typedef void (*func_ptr)(void); 
```

我的问题是为什么 sizeof(a_func_ptr) 返回 16，而 sizeof(func_ptr) 返回 4（对于 x86 系统上的任何指针）？

例如

```
int main(int argc, char *argv[])
{
  int a = sizeof(a_func_ptr);
  int b = sizeof(func_ptr);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T14:27:45.537

> 我的问题是为什么 sizeof(a_func_ptr) 返回 16，而 sizeof(func_ptr) 返回 4（对于 x86 系统上的任何指针）？

因为指向成员的指针的实现方式不同。它们*不是*引擎盖下的指针。一些编译器，例如 MSVC，将它们实现为`struct`其中包含多个成员。

阅读这篇有趣的文章：

*   [指向成员函数的指针是很奇怪的动物](https://devblogs.microsoft.com/oldnewthing/20040209-00/?p=40713)

请注意，在某些编译器中，它们可能具有相同的大小。底线是：它们依赖于编译器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:39:58.657

考虑以下：

```
#include <iostream>

class A {
public:
    virtual void foo(){ std::cout << "A::foo" << std::endl; }
    void bar(){ std::cout << "A::bar" << std::endl; }
};

class B : public A {
public:
     void foo(){  std::cout << "B::foo" << std::endl; }
     void bar(){ std::cout << "B::bar" << std::endl; }
};

typedef void (A::*a_func_ptr)(void);

int main() {
   a_func_ptr f = &A::foo;
   a_func_ptr g = &A::bar;
   B b;
   A a;
   (b.*f)();
   (b.*g)();
   (a.*f)();
   (a.*g)();
} 
```

输出：

```
B::foo
A::bar
A::foo
A::bar 
```

两个成员指针都属于同一类型，但在每种情况下都正确路由了调用。

不知何故，生成的程序*必须知道*指向方法的指针实际上是**简单方法**还是**虚拟**方法。因此，方法指针的运行时表示必须包含更多信息来处理第二种情况。

[备注：大小似乎取决于实现（我`8`在我的系统上）。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T14:33:31.257

[指向成员函数的指针可能是此处](http://www.parashift.com/c++-faq/cant-cvt-memfnptr-to-voidptr.html)C++ FAQ 中指出的数据结构。[指向成员函数的指针也是非常奇怪的动物](https://blogs.msdn.microsoft.com/oldnewthing/20040209-00/?p=40713)，它提供了一个如何在 Visual C++ 中实现的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T14:28:25.070

类的指向成员函数不像常规指针那样保存“确切地址”。它比常规函数指针存储更多信息。

因此，当您使用`sizeof`来测量类的指向成员函数的大小时，您不应期望它与常规函数指针的大小相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T14:29:43.770

> 虽然 C 和 C++ 中的函数指针可以实现为简单地址，因此通常 sizeof(Fx)==sizeof(void *)，但 C++ 中的成员指针通常实现为“胖指针”，通常是大小的两到三倍一个简单的函数指针，用于处理虚拟继承。

资料来源：[维基百科](http://en.wikipedia.org/wiki/Function_pointer)

这个[SO answer 提供了额外的信息](https://stackoverflow.com/questions/13875786/pointers-to-members-representations/13875868#13875868)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T14:32:47.037

这里讨论了一个相关的问题： [sizeof(some pointer) 是否总是等于四？](https://stackoverflow.com/questions/399003/is-the-sizeofsome-pointer-always-equal-to-four)

请参阅： [指向成员函数的指针是非常奇怪的动物](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx) 以获取更多信息。

# google-maps-api-3 - Google Map Javascript API：没有 Google Places 信息的地图

> ID：16062653
> 
> 赞同：2
> 
> 时间：2013-04-17T14:24:20.243
> 
> 标签：google-maps-api-3

我没有在谷歌地图脚本中请求地点库，但谷歌的 poi 信息仍在显示。我看到了其他未显示这些 poi 的示例。隐藏这些 poi 的正确配置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:09:58.443

以下是我之前的做法：

```
var myStyles =[
    {
        featureType: "poi",
        elementType: "labels",
        stylers: [
              { visibility: "off" }
        ]
    }
];

var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(54.42838,-2.9623),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    styles: myStyles 
};

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

# ruby-on-rails - 用于保存 Rails send_data 输出的 curl 命令

> ID：16062656
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:34.720
> 
> 标签：ruby-on-rails, curl, libcurl, rails-api

我是 rails api 和 curl 命令的新手。

我有一个 rails api，它响应从本机应用程序发送的请求。对于使用 curl 命令从本机 api 发送的请求之一，我的 rails api 正在将保存到数据库的文件发送到该桌面应用程序。

但是当我使用 curl -o/-O 命令时，我不知道如何使用 curl 命令保存该文件，仅保存文件对象（例如：#）而不是实际文件。当我在浏览器上调用相同的 rails 方法时，我会正确下载文件。

提前致谢

**更新** 我可以保存那些可以在浏览器上内联显示但不是全部的文件类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:48:10.147

您可以使用任何 shell 命令并通过命令将其保存到文件中`> file_name`。在你的情况下，它将是

`curl http://example.com > filename`

# android - Corona SDK 将图像设置为壁纸？

> ID：16062657
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:36.803
> 
> 标签：android, coronasdk

嘿，有什么想法如何在适用于 Android 的 corona sdk 中将图像设置为壁纸？我的程序中有图像，当有人单击按钮时，我想将其设置为手机壁纸

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:25:30.230

您需要创建一个调用函数的侦听器事件。

背景代码：

本地背景 = display.newImage("start.png")

屏幕组：插入（背景）

# c# - MVC4 ViewModel - 在一个事务中将数据添加到 2 个表中

> ID：16062658
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:40.190
> 
> 标签：c#, asp.net-mvc, mvvm, viewmodel

我正在为一个项目使用 MVC 4 和实体框架。当我想创建一个由 ProductType 组成的产品时（产品类型由 ProductCompany 组成）。所以我有 3 个表（实际上是 2 个，因为产品公司表仅用于选择公司），我想做的是通过“创建产品”表单一次性添加产品和产品类型。

我读到我必须使用 ViewModel 技术，但我不知道它是否能满足我的需求。

有什么帮助吗？如果有什么不清楚的地方，请随时说出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:44:11.457

没有“ViewModel 技术”之类的东西。视图模型只是一种模式。这个想法是，与其直接传递您的实体的视图，它通常具有比您在视图中需要的更多的数据并且同时缺少您在视图中可能需要的某些数据，而是创建一个“视图模型”，这只是另一个POCO 仅包含您的视图所需的数据。您从您的实体填充视图模型的数据，但它不必具有与您的实体相同的所有字段，并且通常会具有对您的实体没有意义的附加字段，例如与 a`SelectList`一起使用的 a `DropDownFor`。

# c - 如何处理 ls | C中的“管道”命令

> ID：16062660
> 
> 赞同：1
> 
> 时间：2013-04-17T14:24:43.243
> 
> 标签：c, shell, pipe, ls

我有一个用 C 编写的 shell 程序，当我尝试运行命令“ls |”时 （只是 ls 和一个管道，后面什么都没有），我的程序永远循环。您可以忽略 modePtr... 这个解析器所做的是从用户输入中获取一串字符，因此它正在解析命令“ls |” 我猜问题在于没有一个“案例”会导致空管道命令落入，从而导致无限循环？有什么建议么？

```
int parse(char *inputString, char *cmdArgv[], char **supplementPtr, int *modePtr)
{
int cmdArgc = 0, terminate = 0;
char *srcPtr = inputString;
//printf("parse fun%sends", inputString);
while(*srcPtr != '\0' && terminate == 0)
{
    *cmdArgv = srcPtr;
    cmdArgc++;
    //printf("parse fun2%sends", *cmdArgv);
    while(*srcPtr != ' ' && *srcPtr != '\t' && *srcPtr != '\0' && *srcPtr != '\n' && terminate == 0)
    {
        // Handles redirection/pipes
        switch(*srcPtr)
        {
            // Background mode
            case '&':
                *modePtr = BACKGROUND;
                break;
            // Output mode
            case '>':
                *modePtr = OUTPUT_REDIRECTION;
                *cmdArgv = '\0';
                srcPtr++;
                if(*srcPtr == '>')
                {
                    *modePtr = OUTPUT_APP;
                    srcPtr++;
                }
                while(*srcPtr == ' ' || *srcPtr == '\t' || *srcPtr == '\0')
                    srcPtr++;
                *supplementPtr = srcPtr;
                chop(*supplementPtr);
                terminate = 1;
                break;
            // Input mode
            case '<':
                *modePtr = INPUT_REDIRECTION;
                *cmdArgv = '\0';
                srcPtr++;
                while(*srcPtr == ' ' || *srcPtr == '\t' || *srcPtr == '\0')
                    srcPtr++;
                *supplementPtr = srcPtr;
                chop(*supplementPtr);
                terminate = 1;
                break;
            // Pipe mode
            case '|':
                *modePtr = PIPELINE;
                *cmdArgv = '\0';
                srcPtr++;
                while(*srcPtr == ' ' || *srcPtr == '\t' || *srcPtr == '\0')
                    srcPtr++;
                *supplementPtr = srcPtr;
                //chop(*supplementPtr);
                terminate = 1;
                break;
        }
        srcPtr++;
    }
    // Process commands when these occur
    while((*srcPtr == ' ' || *srcPtr == '\t' || *srcPtr == '\n') && terminate == 0)
    {
        *srcPtr = '\0';
        srcPtr++;
    }
    cmdArgv++;
}
/*srcPtr++;
*srcPtr = '\0';
destPtr--;*/
*cmdArgv = '\0';
return cmdArgc;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:37:48.233

如果您`ls |`在普通 shell 中尝试，它会在尝试启动任何内容之前提示您输入管道的其余部分（另一个命令）。没有命令读取输出的管道是无稽之谈。

这个成语（在代码中重复了几次）被打破了：

```
srcPtr++;
while (*srcPtr == ' ' || *srcPtr == '\t' || *srcPtr == '\0')
    srcPtr++; 
```

您不能跳过`'\0'`字符串末尾的 null ！您立即陷入“未定义的行为”。您需要查看循环逻辑，也许是为了：

```
srcPtr++;
while (*srcPtr == ' ' || *srcPtr == '\t')
    srcPtr++;
if (*srcPtr == '\0')
    ...no more data in string... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:49:55.940

你可能把问题复杂化了。如果您希望程序读取通过管道传输给它的列表项...

```
#define MAXLINELEN 1000
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char *argv[]) {

    char line[MAXLINELEN];
    FILE *fpin;

    fpin=stdin;

    while(fgets(line,MAXLINELEN,fpin)!=NULL) printf("%s",line);

} 
```

...然后您可以使用 strtok() 解析每行上的项目，或者如果您使用“ls -1”，则每个列表项无论如何都在唯一的行上。

希望这可以帮助。

# java - 如何在 JRadioButtons 中使用 ActionListener

> ID：16062662
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:46.947
> 
> 标签：java, swing, graphics, actionlistener, jradiobutton

我想用 Java 做一个非常简单的“画图”。现在我遇到了麻烦，因为我不知道如何使用 JRaddioButtons 中的 actionListener 来更改我想要绘制的线条的颜色。

我显示我的代码，如果太大，抱歉：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import java.awt.geom.Line2D;
import java.util.ArrayList;
import javax.swing.JComponent;
import javax.swing.JFrame;
import java.awt.*;
import java.awt.event.*;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JRadioButtonMenuItem;
import javax.swing.ButtonGroup;
import javax.swing.JMenuBar;
import javax.swing.KeyStroke;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.JPanel;
import javax.swing.JFrame;

public class Dibujar extends JComponent {

    private Point inicioArrastre;
    private Point finArrastre;
    private ArrayList<Shape> lineas = new ArrayList<Shape>();

    public Dibujar() {
        super();
        addMouseListener(new MouseAdapter() {

            public void mousePressed(MouseEvent e) { // cuando se presiona el mouse
                inicioArrastre = new Point(e.getX(), e.getY());
                repaint();
            }

            public void mouseReleased(MouseEvent e) { // cuando se deja de presionar el mouse
                finArrastre = new Point(e.getX(), e.getY());
                Shape linea = crearLinea(inicioArrastre.x, inicioArrastre.y, finArrastre.x, finArrastre.y);
                lineas.add(linea);
                repaint();
            }
        });
        addMouseMotionListener(new MouseMotionAdapter() {

            public void mouseDragged(MouseEvent e) { // cuando se esta arrastrando el mouse
                finArrastre = new Point(e.getX(), e.getY());
                Shape linea = crearLinea(inicioArrastre.x, inicioArrastre.y, finArrastre.x, finArrastre.y);
                lineas.add(linea);
                inicioArrastre = new Point(finArrastre.x, finArrastre.y);
                repaint();
            }
        });
    }

    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(Color.RED);
        for (Shape linea : lineas) { // dibuja todos las elipses
            g2.draw(linea);
        }
    }

    private Line2D.Float crearLinea(int x1, int y1, int x2, int y2) {
        return new Line2D.Float(x1, y1, x2, y2);
    }

    public static void main(String[] a3d) {
        Dibujar dibu = new Dibujar();
        JFrame ventana = new JFrame("Dibujar");
        ventana.setJMenuBar(dibu.createMenuBar());
        ventana.setSize(400, 300);
        ventana.setLocationRelativeTo(null);
        ventana.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ventana.add(new Dibujar());
        ventana.setVisible(true);
    }

    public JMenuBar createMenuBar() {
        JMenuBar menuBar;
        JMenu menu, submenu;
        JMenuItem menuItem;
        JRadioButtonMenuItem rbMenuItem;

        //Create the menu bar.
        menuBar = new JMenuBar();

        //Build the first menu.
        menu = new JMenu("A Menu");
        menu.setMnemonic(KeyEvent.VK_A);
        menu.getAccessibleContext().setAccessibleDescription(
                "The only menu in this program that has menu items");
        menuBar.add(menu);

        //a group of JMenuItems
        menuItem = new JMenuItem("Select a Color",
                                 KeyEvent.VK_T);
        //menuItem.setMnemonic(KeyEvent.VK_T); //used constructor instead
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_1, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription(
                "This doesn't really do anything");
        menu.add(menuItem);

        menuItem.setMnemonic(KeyEvent.VK_B);
        menu.add(menuItem);

        menuItem.setMnemonic(KeyEvent.VK_D);
        menu.add(menuItem);

        //a group of radio button menu items
        menu.addSeparator();
        ButtonGroup group = new ButtonGroup();

        rbMenuItem = new JRadioButtonMenuItem("RED");
        rbMenuItem.setSelected(true);
        rbMenuItem.setMnemonic(KeyEvent.VK_R);
        rbMenuItem.addActionListener(null);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);

        rbMenuItem = new JRadioButtonMenuItem("BLUE");
        rbMenuItem.setMnemonic(KeyEvent.VK_B);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);

        return menuBar;
    }
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:29:11.607

你只需要一个 actionperformed 方法

```
 RadioButton.addActionListener(new ActionListener() 
{
  public void actionPerformed(ActionEvent e) 
  {
    // Enter your code, to change the color    
  }
}); 
```

# android - Android 应用程序中的 OutOfMemoryError

> ID：16062665
> 
> 赞同：0
> 
> 时间：2013-04-17T14:24:58.293
> 
> 标签：android, out-of-memory, logcat

谁能向我解释这个 LogCat 输出以及如何解决它？我正在用我的手机（三星 Galaxy Nexus）测试我的 Android 应用程序，就这样；系统强制拘留并将其打印在 LogCat ...

```
04-17 09:43:09.189: E/AndroidRuntime(1194): FATAL EXCEPTION: main
04-17 09:43:09.189: E/AndroidRuntime(1194): java.lang.OutOfMemoryError
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:527)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:301)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:326)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.graphics.drawable.Drawable.createFromPath(Drawable.java:894)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.ImageView.resolveUri(ImageView.java:638)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.ImageView.setImageURI(ImageView.java:379)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at tian.proto.galeriaImagenes$ImageAdapter.getView(galeriaImagenes.java:169)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:193)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.View.measure(View.java:15172)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.View.measure(View.java:15172)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.View.measure(View.java:15172)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.View.measure(View.java:15172)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.View.measure(View.java:15172)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.Choreographer.doFrame(Choreographer.java:525)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.os.Handler.handleCallback(Handler.java:615)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.os.Looper.loop(Looper.java:137)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at android.app.ActivityThread.main(ActivityThread.java:4899)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at java.lang.reflect.Method.invoke(Method.java:511)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-17 09:43:09.189: E/AndroidRuntime(1194):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:29:54.647

[如果您在运行时加载位图，您可以在使用此技术](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)从设备读取它时将其缩小。如果您从`res`目录中加载它，您可能只需要使用图像编辑器将其缩小。无论哪种方式，图像显然太大而无法放入内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:34:02.183

如我所见，您用于`ImageView.setImageURI`加载图像。

现在许多图像，尤其是由更高分辨率的相机（或手机）拍摄的图像，很容易占用比在屏幕上显示它们实际所需的空间更多的空间。

当您尝试将它们直接加载到位图中时，您的应用程序将耗尽内存并崩溃。另请参阅此[问题](https://stackoverflow.com/questions/477572/strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object#823966)或@oakleaf 的答案，以获取有关使用大型位图的 Android 开发人员培训的链接。

# java - 格式化没有语言环境的数字

> ID：16062666
> 
> 赞同：3
> 
> 时间：2013-04-17T14:24:58.533
> 
> 标签：java, format, decimalformat

用户可以在 GUI 上指定文件输出格式。特别是他可以定义数字格式。第一个想法是让他指定一种可以与 DecimalFormat 一起使用的格式，但 DecimalFormat 对我的用例来说至少有两个主要缺点：

*   它使用用户的语言环境，所以##.## 转换'.' 到“，”在德国。
*   逗号前后的数字没有区别，因此您不能将 12.50 格式化为 1250。在我的用例中也是必需的。

StringFormat 也无法做到这一点。所以我的问题是你是否知道任何已经处理这个问题的库，或者我是否必须自己编写一个简单的格式化程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-09T12:55:47.637

```
DecimalFormatSymbols otherSymbols = new DecimalFormatSymbols(Locale.ENGLISH);
DecimalFormat decimalFormat = new DecimalFormat("##.##");
decimalFormat.setDecimalFormatSymbols(otherSymbols); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T23:45:34.303

> 它使用用户的语言环境

不是这样。从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)：

“要获取特定语言环境的 NumberFormat，包括默认语言环境，请调用 NumberFormat 的工厂方法之一，例如 getInstance()。一般情况下，不要直接调用 DecimalFormat 构造函数”。

# php - 选择多个 div 并更改其背景

> ID：16062667
> 
> 赞同：1
> 
> 时间：2013-04-17T14:24:59.737
> 
> 标签：php, javascript, jquery, css

我在 php 中循环创建多个 div，如下所示。

```
 <?php
    for ($i=0; $i<=9; $i++)
    {
    for ($j=0; $j<=9; $j++)
        {
   echo "<div class=\"bg\" id=\"aaa".$i."\" style=\" position:absolute;top:".($i*10)."%;left:".($j*10)."%;\"> 
</div>";
        }
 }
?> 
```

我想选择多个 div（不是全部）并使用 jquery 更改它们的背景。我似乎无法弄清楚如何进行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:00:51.317

如果要根据索引选择 div，可以使用 nth-of-type 选择器：

```
divs = $('.bg:nth-of-type(1)');
divs.css('background-color','blue'); 
```

您可以通过将它们添加到变量来选择多个元素：

```
divs.add('.bg:nth-of-type(2)').add('.bg:nth-of-type(3)'); 
```

请注意，这些是 css 选择器，因此在 css 中简单地执行此操作可能是一个想法：

```
.bg:nth-of-type(1),
.bg:nth-of-type(2),
.bg:nth-of-type(3){
    background-color: blue;
} 
```

另请注意，您可以在括号内使用表达式来表示序列中的多个值。

```
.bg:nth-of-type(3n+1){ //will select every fourth div
    background-color: blue;
} 
```

除非你能想出一个更好的标准来判断你想改变哪个 div，否则这可能是最好的方法。

**来源**

[jQuery API - .add()](http://api.jquery.com/add/)
[MDN - CSS :nth-of-type 选择器](http://developer.mozilla.org/en-US/docs/CSS/%3anth-of-type)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:26:42.773

您可以选择以 id 开头的 div`aaa`

```
$('div[id^=aaa]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:29:42.490

这应该可以解决问题：

```
var arrayDivs = $('div[id^=aaa]');
$.each(arrayDivs, function(){
    $(this).css('background-color', '#000');
}); 
```

如果您想选择多个列表而不是所有“aaa”+整数列表，您将需要知道这些列表的数量，或者您需要在循环中有所不同。更多信息会很棒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:45:44.960

```
//select all elements with class bg and add background image
$('.bg').css('background-image',"url('some_image.gif')"); 
```

更好的是使用 css：

```
.bg {
    background-image: url('some_image.gif');
} 
```

如果你只想要类 bg 中的一些 div：

```
$('.bg').each(function(index,element){
//your code here eg:
if(index == 2)
   alert(index);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T14:39:04.093

“正确”的方式（如果你可以这么说的话）是将要分配公共属性的元素与适当的类分组。然后，您可以通过 CSS 操作它们

所以本质上，在上面的代码中循环：

```
for ($i=0; $i<=9; $i++) {
  for ($j=0; $j<=9; $j++) {
    $classes = 'bg';
    if( [somelogic]  ) { $classes .= ' bluefront';    }
    if( [otherlogic] ) { $classes .= ' greenback';    }

    echo "<div class=\"".$classes."\" id=\"aaa".$i."\" style=\" position:absolute;top:".($i*10)."%;left:".($j*10)."%;\"></div>";
  }
} 
```

然后，通过 CSS ：

```
.bg.bluefront { color: blue; }
.bg.greenback.bluefront { background-color: green; color: white; } 
```

# php - 无限深度类别，子类别

> ID：16062668
> 
> 赞同：0
> 
> 时间：2013-04-17T14:25:04.027
> 
> 标签：php, tree

我正在尝试在我的网站中实现无限深度类别、子类别部分。我真的很困惑。表结构为

```
id                medium int  auto incrimant , primary
name              varchar
parent            medium int 
```

我正在寻找以下问题的解决方案：

1.  如何编写代码以允许用户输入无限类别、子类别？
2.  如何在选择框中按树顺序加载类别、子类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:03:59.250

您可以创建一个数组并递归地构建树：

```
$q = mysql_query("SELECT id, parent_id, name FROM categories");
while ($r = mysql_fetch_row($q)) {
  $names[$r[0]] = $r[2];
  $children[$r[0]][] = $r[1];
 }

function render_select($root=0, $level=-1) {
  global $names, $children;
  if ($root != 0)
    echo '<option>' . strrep(' ', $level) . $names[$root] . '</option>';
  foreach ($children[$root] as $child)
    render_select($child, $level+1);
}

echo '<select>';
render_select();
echo '</select>'; 
```

1.  [更高效的层级系统](https://stackoverflow.com/questions/8431463/more-efficient-hierarchy-system/8431551)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:29:28.700

使用 MPTT，您需要稍微更改表结构以使用 MPTT。但这是一种无限深度的无限方式。

来源：[http ://waliaz.com/modified-pre-ordered-traversal-tree-mptt---explained.html](http://waliaz.com/modified-pre-ordered-traversal-tree-mptt---explained.html)

# facebook - 如何通过 Open Graph 发布我“看过”或“想看”的电影？

> ID：16062670
> 
> 赞同：4
> 
> 时间：2013-04-17T14:25:11.580
> 
> 标签：facebook, facebook-graph-api, collections, facebook-opengraph, movies

我希望能够让我的应用程序的用户能够将他们“观看”的电影添加到他们的时间线中 - 特别是在他们的时间线的“**电影**”集合中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/fuNuS.png)

这些活动似乎仅通过“**电影**”应用程序（Facebook 控制的内部应用程序）发布。有没有办法通过`video_watches`or`video_wants_to_watch`动作以编程方式将电影添加到这些集合之一？

我可以看到任何应用程序都可以通过文档通过这些操作发布

*   [https://developers.facebook.com/docs/opengraph/guides/video.watches/](https://developers.facebook.com/docs/opengraph/guides/video.watches/)
*   [https://developers.facebook.com/docs/opengraph/guides/video.wants_to_watch/](https://developers.facebook.com/docs/opengraph/guides/video.wants_to_watch/)

但它们最终会在不同应用程序的 Collection 下“沙盒化”（如果应用程序为该特定操作/对象对设置了 Collection）。

此外，似乎没有办法像 Music 集合那样将应用程序的集合数据与 Movies 集合联系起来——这就是我假设第三方应用程序的`video_watches`数据将附加或与 Facebook 的“**电影**”应用程序数据结合的方式。

我试图按照[https://developers.facebook.com/docs/opengraph/guides/collections/#datatodefaultsections](https://developers.facebook.com/docs/opengraph/guides/collections/#datatodefaultsections)上的文档创建一个用于集成应用程序数据的 URL，但它似乎根本不起作用。

[https://www.facebook.com/me/movies?[appname]](https://www.facebook.com/me/movies?[appname])什么都不做。它只是将您带到时间轴上的“**电影**”集合，而没有将您的应用程序数据添加到该部分的选项。**与Music**此处显示的内容（[来自 Facebook 文档](https://developers.facebook.com/docs/opengraph/guides/collections/#datatodefaultsections)）完全不同，您可以选择将应用程序的数据添加到 Movies 集合中：

 **![在此处输入图像描述](https://i.stack.imgur.com/No1jL.png)

在这一点上，这是只有“**音乐**”系列独有的东西吗？其他“第一方”集合（除了**Music**）何时会接受“第三方”应用程序数据？

另请参阅相关问题：

*   [http://facebook.stackoverflow.com/questions/15759032/facebook-api-to-get-watched-movies-tv-show-list-or-read-book-list](http://facebook.stackoverflow.com/questions/15759032/facebook-api-to-get-watched-movies-tv-show-list-or-read-book-list)
*   [http://facebook.stackoverflow.com/questions/15886745/how-does-one-enable-an-apps-data-to-be-added-to-users-default-sections](http://facebook.stackoverflow.com/questions/15886745/how-does-one-enable-an-apps-data-to-be-added-to-users-default-sections)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T21:57:38.033

您需要打开图形项目才能使用此方法：[https ://developers.facebook.com/docs/reference/opengraph/action-type/video.wants_to_watch](https://developers.facebook.com/docs/reference/opengraph/action-type/video.wants_to_watch)

如果您使用类型为movie.other 的开放图形对象，您可以使用：

```
https://graph.facebook.com/me/video.wants_to_watch?access_token=ACCESS_TOKEN&method=POST&other=http%3A%2F%2Fsamples.ogp.me%2F467235199955838 
```

我使用 trakt.tv 来获取电影打开的图形对象。例如，如果您想将[《星球大战前传 VI》](http://trakt.tv/movie/star-wars-episode-vi-return-of-the-jedi-1983 "星球大战")添加到您在 Facebook 上的 whatchlist 中，您可以使用：

```
https://graph.facebook.com/me/video.wants_to_watch?access_token=ACCESS_TOKEN&method=POST&movie=http://trakt.tv/movie/star-wars-episode-vi-return-of-the-jedi-1983 
```

请注意，在 trakt.tv 中，打开的图形是电影。

您也可以添加观看的电影、评分、添加书籍、音乐... [https://developers.facebook.com/docs/reference/opengraph/action-type](https://developers.facebook.com/docs/reference/opengraph/action-type)**

# drupal - 如何使用 Drupal nice menus 来显示任何级别的书籍菜单？

> ID：16062672
> 
> 赞同：0
> 
> 时间：2013-04-17T14:25:13.097
> 
> 标签：drupal, menu

我想使用 Drupal [Nice Menus](http://drupal.org/project/nice_menus)来显示某些书籍或任何级别的子书籍，但看不到[theme_nice_menus](http://drupal.org/node/236418)函数将如何做到这一点。

我正在查看下面的代码示例以获得一些灵感：

第一个示例适用于所有书籍，但我需要传递选定的书籍，甚至是子书。

第二个示例适用于一本书，但不使用漂亮的菜单？可以将输出`menu_tree_all_data`或`menu_tree_output`传递给`theme_nice_menus`函数吗？

第三个来自github 上的[bookoblock](http://github.com/balsama/bookoblock)模块，它显示了如何获取一本书，而不是从其孩子那里获取子书，并且不使用漂亮的菜单。

我正在尝试创建这些示例中的一些内容。从子书而不是顶级书生成菜单是我想做的一件事。

```
<?php
$master_menu = '';
$books = book_get_books();
foreach($books as $book_nid=>$book) {
  $menu = theme('nice_menus', array('id' => $book['mlid'], 'direction' => 'right', 'depth' => -1, 'menu_name' => $book['menu_name'], 'menu' => NULL));
  $master_menu .= $menu['content'];
}
print $master_menu;
?>

<?php
  $book_top_page= 49;
  $tree = menu_tree_all_data(book_menu_name($book_top_page));
  print drupal_render(menu_tree_output($tree));
?>

<?php
function bookoblock_block_view() {
  if ($book = bookoblock_is_book_node()) {
    // menu_build_tree() doesn't accept zero for depth, so we convert that to
    // NULL and add 1 if it's not 0 to account for the first (skipped) level.
    $max_depth = variable_get('bookoblock_depth', NULL);
    $max_depth = ($max_depth == 0) ? NULL : ($max_depth + 1);

    // Vars and params for the menu_build_tree() function.
    $path = 'node/' . $book['bid'];
    $parent = menu_link_get_preferred($path, book_menu_name($book['bid']));
    $parameters = array(
      'only_active_trail' => FALSE,
      'min_depth' => $parent['depth'] + 1,
      'max_depth' => $max_depth,
    );

    // Build the tree and block title.
    $children = menu_build_tree($parent['menu_name'], $parameters);
    $book_name = (book_toc($book['bid'], 1));

    // Build and return the $block array.
    $block['subject'] = l($book_name[$book['p1']], 'node/' . $book['bid']);
    $block['content'] = menu_tree_output($children);
    return $block;
  }
  // If the current node isn't part of a book, just return nothing.
  return NULL;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:58:40.103

我决定使用第一种方法，调整 Drupal API [book_get_books](http://api.drupal.org/api/drupal/modules!book!book.module/function/book_get_books/7)函数的代码以仅选择所需的书籍。

```
<?php
$master_menu = '';
unset($four_books);
  $four_books_list = "91,323,47,149";
  $four_books = &drupal_static(__FUNCTION__);
  if (!isset($four_books)) {
    $four_books = array();
    $nids = db_query("SELECT DISTINCT(bid) FROM {book} where bid in (91,323,47,149)")->fetchCol();

    if ($nids) {
      $query = db_select('book', 'b', array('fetch' => PDO::FETCH_ASSOC));
      $query->join('node', 'n', 'b.nid = n.nid');
      $query->join('menu_links', 'ml', 'b.mlid = ml.mlid');
      $query->addField('n', 'type', 'type');
      $query->addField('n', 'title', 'title');
      $query->fields('b');
      $query->fields('ml');
      $query->condition('n.nid', $nids, 'IN');
      $query->condition('n.status', 1);
      $query->orderBy('ml.weight');
      $query->orderBy('ml.link_title');
      $query->addTag('node_access');
      $result2 = $query->execute();
      foreach ($result2 as $link) {
        $link['href'] = $link['link_path'];
        $link['options'] = unserialize($link['options']);
        $four_books[$link['bid']] = $link;
      }
    }
  }

foreach($four_books as $book_nid=>$book) {
  $menu = theme('nice_menus', array('id' => $book['mlid'], 'direction' => 'right', 'depth' => -1, 'menu_name' => $book['menu_name'], 'menu' => NULL));
  $master_menu .= $menu['content'];
}
print $master_menu;
?> 
```

# orientation - Graphviz：节点内部方向

> ID：16062673
> 
> 赞同：1
> 
> 时间：2013-04-17T14:25:16.850
> 
> 标签：orientation, nodes, graphviz

以下graphviz代码：

```
digraph g {

labelloc="t";
label="Feed creation process";

graph [
rankdir = "LR"
];
node [
fontsize = "16"
shape = "record"
];
edge [];

abc [shape=none, margin=0, rankdir=""
label=<
<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4">
<TR><TD ROWSPAN="3"><FONT COLOR="red">hello</FONT><BR/>world</TD>
<TD COLSPAN="3">b</TD>
<TD ROWSPAN="3" BGCOLOR="lightgrey">g</TD>
<TD ROWSPAN="3">h</TD>
</TR>
<TR><TD>c</TD>
<TD PORT="here">d</TD>
<TD>e</TD>
</TR>
<TR><TD COLSPAN="3">f</TD>
</TR>
</TABLE>>];
} 
```

给出：

![在此处输入图像描述](https://i.stack.imgur.com/dpCrI.png)

我想将表格方向顺时针旋转 90°，这样行将是：

*   `hello world`将在顶部
*   `f`, 'c|d|e `and`b`on the row below, 'c|d|e`垂直对齐
*   `g`
*   `h`

例如（文本方向错误！）：

![在此处输入图像描述](https://i.stack.imgur.com/vHomw.png)

有没有办法在不影响图中节点顺序的情况下旋转节点内部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:51:21.050

我玩过 HTML`COLSPAN`并`ROWSPAN`得到：

```
abc2 [shape=none, margin=0, orientation=120.0,
label=
    <
    <TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4">
       <TR>
          <TD COLSPAN="3"><FONT COLOR="red">HELLO</FONT><BR/>world</TD>
       </TR>
       <TR>
          <TD ROWSPAN="3">b</TD>
          <TD>c</TD>
          <TD ROWSPAN="3">f</TD>
        </TR>
        <TR>
          <TD PORT="here">d</TD>
        </TR>
        <TR>
          <TD>e</TD>
       </TR>
       <TR>
          <TD COLSPAN="3" BGCOLOR="lightgrey">g</TD>
       </TR>
       <TR>
          <TD COLSPAN="3">h</TD>
       </TR>

    </TABLE>
    >
]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/Zn8Xn.png)

# php - 命名空间 - __autoload() 需要错误的类

> ID：16062674
> 
> 赞同：0
> 
> 时间：2013-04-17T14:25:17.880
> 
> 标签：php, autoload

我在我的文件中构建了一个没有命名空间的新对象：

```
new My\Validator(); 
```

上面，在我得到的同一个文件中`__autoload():`

```
function __autoload($className) 
{
    var_dump($className);
} 
```

函数`__autoload()`打印

```
'My\My\Validator'. 
```

双子`'My'`从哪里来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:07:15.990

它正在添加`My`命名空间，因为`My`当您使用`new My\Validator()`.

```
namespace My;
$obj = new My\Validator(); 
```

将被翻译成：

```
$obj = new My\My\Validator(); 
```

由于您已经在`My`命名空间内，您可以：

*   要么打电话`new Validator()`
*   或致电`new \My\Validator()`

开头`\`将告诉 PHP 查看全局命名空间。

* * *

附带说明一下，使用[`spl_autoload_register`](http://php.net/manual/en/function.spl-autoload-register.php)代替被认为是一种很好的做法`__autoload`，因为您可以设置多个*自动加载器回调*。

# android - 动态设置网格布局的行数和列数

> ID：16062675
> 
> 赞同：3
> 
> 时间：2013-04-17T14:25:18.467
> 
> 标签：android, android-widget

我正在`LinearLayouts`动态添加`GridLayout`。我正在寻找它们以显示为网格视图。
是否可以计算一行中可以放置多少个线性布局并为网格布局设置列数？
我应该使用 gridview 自动对齐它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:38:25.053

如果要根据 的宽度计算列数`GridLayout`，请覆盖该`onMeasure`方法。它提供`widthSpec`和`heightSpec`作为参数，您可以使用[MeasureSpec.getSize()](http://developer.android.com/reference/android/view/View.MeasureSpec.html)从中获取以像素为单位的实际宽度和高度。`GridLayout`从那里，根据您刚刚找到的宽度计算您想要显示的列数，并使用`setColumnCount`它来显示该列数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-02T15:43:58.530

GridLayout 的覆盖`onMeasure`工作。示例（在 Kotlin 中，但应该很容易翻译成 Java）：

```
override fun onMeasure(widthSpec: Int, heightSpec: Int) {
    var childWidth = 0
    for (i in 0 until childCount) {
        val c = getChildAt(i)
        if (c.visibility == View.GONE) {
            continue
        }
        val params = c.layoutParams
        if (params.width>childWidth) childWidth = params.width
    }
    val width = MeasureSpec.getSize(widthSpec)

    columnCount=width/childWidth
    super.onMeasure(widthSpec, heightSpec)
} 
```

`requestLayout()`尽管@drdaanger 在他的回复中提到了什么，但我不必这样做。

# visual-studio-2010 - 在 VS 2010 中使用部分图表打开 EF 设计器

> ID：16062678
> 
> 赞同：0
> 
> 时间：2013-04-17T14:25:21.550
> 
> 标签：visual-studio-2010, entity-framework, visual-studio-2012, edmx

最近，我的团队最近从 VS 2010 升级到 VS 2012。同时，我们创建了代码库的一个分支，我们需要在 VS 2010 中处理该分支以提供遗留支持和错误修复，以及可以使用的当前版本2012 年。升级后，我们决定在 EDMX 中使用部分图表，但几天后，我们不得不将该 EDMX 合并到在 VS 2010 中打开的不同分支中。

我们似乎遇到的问题是 EDMX 的设计器不会加载到 VS2010 中，因为部分图表已经存在。有没有其他人遇到过这个问题？是已知问题吗？有什么解决方案吗？我试过打谷歌，但我没有找到有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:37:12.597

[查看此Visual Studio 2012 兼容性页面](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)的底部。您会在“实体数据模型 (EDMX) 文件”部分找到它似乎是一种解决方法。

希望有帮助！

# xml - 将命名空间分配给本地元素

> ID：16062680
> 
> 赞同：0
> 
> 时间：2013-04-17T14:25:26.713
> 
> 标签：xml, xsd

我有一个xml文件。我无法更改 xml 结构，因此我必须更改 xsd 文件。问题是关于命名空间

```
<po:purchaseOrder orderDate="2001-01-01" xmlns:po="http://objectshop.com/ns/po" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://objectshop.com/ns/po po.xsd ">
<shipTo country="USA">
    <name>Alice Smith</name>
    <street>123 Maple Street</street>
    <city>Cambridge</city>
    <state>MA</state>
    <postalcode>12345</postalcode>
</shipTo>
</po:purchaseOrder> 
```

所以通常我应该把 ns 放在每个元素中。如果我这样做，那很好。我如何设计xsd文件的问题。特别是如何在 xsd 中本地分配命名空间？

```
<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="http://objectshop.com/ns/po"
elementFormDefault="qualified" xmlns="http://www.w3.org/2001/XMLSchema"
xmlns:po="http://objectshop.com/ns/po">

<complexType name="PurchaseOrderType">
    <sequence>
        <element name="shipTo" type="po:Address" maxOccurs="unbounded" minOccurs="0" ></element>
        <element name="billTo" type="po:Address" maxOccurs="unbounded" minOccurs="0"></element>
        <element name="items" type="po:Items" maxOccurs="unbounded" minOccurs="0"></element>
    </sequence>

    <attribute name="orderDate" type="date"></attribute>
</complexType>
</schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:47:54.413

您发布的 XSD 不完整，因此很难说您的设置是什么。因此，我将根据 XML 解释两个不同的选项。一个应该说明你的具体情况。

如果我从 XML 开始并从中生成 XSD，这就是您通常会得到的：

**XSD1：**

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns:po="http://objectshop.com/ns/po" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://objectshop.com/ns/po" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:import schemaLocation="XSD2.xsd" />
  <xsd:element name="purchaseOrder">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="shipTo" />
      </xsd:sequence>
      <xsd:attribute name="orderDate" type="xsd:date" use="required" />
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

**XSD2：**

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="shipTo">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="name" type="xsd:string" />
        <xsd:element name="street" type="xsd:string" />
        <xsd:element name="city" type="xsd:string" />
        <xsd:element name="state" type="xsd:string" />
        <xsd:element name="postalcode" type="xsd:unsignedShort" />
      </xsd:sequence>
      <xsd:attribute name="country" type="xsd:string" use="required" />
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

这两个 XSD 验证您发布的 XML。他们展示的是您将如何引用不在命名空间中的内容——我认为这就是您的问题所在。

但是，也可以用一个 XSD 文件描述这样的 XML。“tell-tale”是只有文档元素是合格的（在你的情况下`purchaseOrder`），而其他一切都是“不合格的”。要默认实现这一点，需要使用`elementFormDefault="unqualified"`.

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns:po="http://objectshop.com/ns/po" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://objectshop.com/ns/po" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="purchaseOrder" type="po:PurchaseOrderType"/>
    <xsd:complexType name="PurchaseOrderType">
        <xsd:sequence>
            <xsd:element name="shipTo" type="po:Address" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="orderDate" type="xsd:date" use="required"/>
    </xsd:complexType>
    <xsd:complexType name="Address">
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string"/>
            <xsd:element name="street" type="xsd:string"/>
            <xsd:element name="city" type="xsd:string"/>
            <xsd:element name="state" type="xsd:string"/>
            <xsd:element name="postalcode" type="xsd:unsignedShort"/>
        </xsd:sequence>
        <xsd:attribute name="country" type="xsd:string" use="required"/>
    </xsd:complexType>
</xsd:schema> 
```

或者，对于每个元素/属性，您可以通过设置表单属性来覆盖架构级别的默认设置。下面是一个示例（仅用于说明，不与您的 XML 匹配）。

```
<xsd:element name="name" type="xsd:string" form="qualified"/>
<xsd:attribute name="country" type="xsd:string" use="required" form="qualified"/> 
```

在这种情况下，XML 应该是：

```
<po:purchaseOrder orderDate="2001-01-01" xmlns:po="http://objectshop.com/ns/po" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://objectshop.com/ns/po po.xsd ">
    <shipTo po:country="USA">
        <po:name>Alice Smith</po:name>
        <street>123 Maple Street</street>
        <city>Cambridge</city>
        <state>MA</state>
        <postalcode>12345</postalcode>
    </shipTo>
</po:purchaseOrder> 
```

# asp.net - 使用 YouTube API 和 CORS 上传视频

> ID：16062682
> 
> 赞同：1
> 
> 时间：2013-04-17T14:25:35.913
> 
> 标签：asp.net, ajax, youtube-api

我试图让我们网站的访问者将视频上传到我们的 YouTube 频道。因此，我不想使用 OAuth 处理身份验证，否则我将需要在任何地方分发我们的用户名和密码。而且我不想直接上传，因为我不想自己托管视频。

因此，我有一个在面板中收集一些详细信息的表单，该按钮强制将帖子返回到我创建 Video 对象并获取 FormUploadToken 的代码后面。然后，我使用这些信息创建一个发布到页面上的 Literal 的内容。

选择文件，然后单击上传按钮。立即触发中止事件，但没有理由说明原因。

有任何想法吗？？帮助将不胜感激：

```
 <form id="Form1" runat="server">
            <asp:Literal ID="Literal1" runat="server"></asp:Literal>
            <br />
            <dx:ASPxPanel ID="ASPxPanel1" runat="server" Width="200px">
            <PanelCollection>
                <dx:PanelContent ID="PanelContent1" runat="server" SupportsDisabledAttribute="True">
                    <dx:ASPxLabel ID="ASPxLabel1" runat="server" Text="Name"> </dx:ASPxLabel>
                    <dx:ASPxTextBox ID="NameTextBox" runat="server" Width="170px" Text="Simon"> </dx:ASPxTextBox>
                    <dx:ASPxLabel ID="ASPxLabel2" runat="server" Text="Email address"> </dx:ASPxLabel>
                    <dx:ASPxTextBox ID="EmailTextBox" runat="server" Width="170px" Text="info@example.com"> </dx:ASPxTextBox>
                    <dx:ASPxLabel ID="ASPxLabel3" runat="server" Text="Video title"> </dx:ASPxLabel> 
                    <dx:ASPxTextBox ID="VideoTitleTextBox" runat="server" Width="170px" Text="My new video title"> </dx:ASPxTextBox>
                    <dx:ASPxLabel ID="ASPxLabel4" runat="server" Text="Keywords - comma separated"> </dx:ASPxLabel>
                    <dx:ASPxTextBox ID="KeywordsTextBox" runat="server" Width="170px" Text="India, Kochin"> </dx:ASPxTextBox>
                    <dx:ASPxLabel ID="ASPxLabel5" runat="server" Text="Video description"> </dx:ASPxLabel>
                    <dx:ASPxTextBox ID="VideoDescriptionTextBox" runat="server" Width="170px" Text="An amazing description that makes a lot of sense"> </dx:ASPxTextBox>

                    <dx:ASPxButton ID="ASPxButton1" runat="server" onclick="VideoUploadBttn_Click" Text="ASPxButton"> </dx:ASPxButton>

                </dx:PanelContent>
            </PanelCollection>
            </dx:ASPxPanel>
        </form>

        <dx:ASPxPanel ID="ASPxPanel2" runat="server" Width="200px" Visible="False">
        <PanelCollection>
        <dx:PanelContent ID="PanelContent2" runat="server" SupportsDisabledAttribute="True">
            <asp:Literal ID="Literal2" runat="server"></asp:Literal>
        </dx:PanelContent>
        </PanelCollection>
        </dx:ASPxPanel>

<script type="text/javascript">
    function fileSelected() {
        var file = document.getElementById('fileToUpload').files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > 1024 * 1024)
                fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            else
                fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

            document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
            document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
            document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
        }
    }

    function uploadFile() {
        var fd = new FormData();
        fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);

        xhr.open("POST", document.UploadForm.action);
        console.log('action url: ' + document.UploadForm.action);

        xhr.send(fd);
    }

    function uploadProgress(evt) {
        if (evt.lengthComputable) {
            var percentComplete = Math.round(evt.loaded * 100 / evt.total);
            document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
        }
        else {
            document.getElementById('progressNumber').innerHTML = 'unable to compute';
        }
    }

    function uploadComplete(evt) {
        /* This event is raised when the server send back a response */
        alert(evt.target.responseText);
    }

    function uploadFailed(evt) {
        alert("There was an error attempting to upload the file.");
    }

    function uploadCanceled(evt) {
        alert("The upload has been canceled by the user or the browser dropped the connection.");
        console.log(evt);
    }
</script> 
```

然后后面的代码是这样的：

```
protected void VideoUploadBttn_Click(object sender, EventArgs e)
{
    Video newVideo = new Video();

    newVideo.Title = VideoTitleTextBox.Text;
    newVideo.Tags.Add(new MediaCategory("Travel", YouTubeNameTable.CategorySchema));
    newVideo.Keywords = KeywordsTextBox.Text;
    newVideo.Description = VideoDescriptionTextBox.Text;
    newVideo.YouTubeEntry.Private = false;
    newVideo.Keywords = "Travel";
    newVideo.Tags.Add(new MediaCategory("Motorbike", YouTubeNameTable.DeveloperTagSchema));

    // alternatively, you could just specify a descriptive string
    // newVideo.YouTubeEntry.setYouTubeExtension("location", "Mountain View, CA");
    YouTubeRequestSettings settings = new YouTubeRequestSettings(_AppName, _APIKey, _Username, _Password);
    YouTubeRequest request = new YouTubeRequest(settings);

    FormUploadToken uploadToken = request.CreateFormUploadToken(newVideo);
    string actionUrl = uploadToken.Url;
    string token = uploadToken.Token;

    StringBuilder sb = new StringBuilder();
    string url = String.Format("{0}?nexturl={1}", actionUrl, System.Web.HttpUtility.UrlEncode("http://bbc.co.uk"));

    sb.AppendFormat("<form name=\"UploadForm\" action=\"{0}\" method =\"post\" enctype=\"multipart/form-data\" >", url);
    sb.Append("<input type=\"file\" name=\"file\" id=\"fileToUpload\" onchange=\"fileSelected();\" />");
    sb.AppendFormat("<input type=\"hidden\" name=\"token\" value=\"{0}\"/>", token);
    sb.Append("<div id=\"fileName\"></div>");
    sb.Append("<div id=\"fileSize\"></div>");
    sb.Append("<div id=\"fileType\"></div>");

    sb.Append("<input type=\"submit\" value=\"Upload\" onclick=\"uploadFile()\" />");
    sb.Append("<div id=\"progressNumber\"></div>");

    sb.Append("</form>");

    Literal2.Text = sb.ToString();

    ASPxPanel1.Visible = false;
    ASPxPanel2.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:58:31.080

找到了！这与我们使用 ClientLogin 或 CORS 的事实无关，而与表单按钮上的输入类型是提交类型而不是按钮这一事实无关。

简单地改变它是一种享受。添加 AuthSubUtil 很容易，因此视频会上传到个人帐户，然后我们将它们链接到我们的播放列表。

新问题似乎与 nextUrl 参数有关 - 请参见此处： [Youtube API、nexturl 和 XMLHttpRequest](https://stackoverflow.com/questions/16078958/youtube-api-nexturl-and-xmlhttprequest)

# r - 像包猿的 plot.phylo 一样更改 plot.dendrogram 中的叶子颜色

> ID：16062684
> 
> 赞同：4
> 
> 时间：2013-04-17T14:25:35.973
> 
> 标签：r, dendrogram, ape, col, dendextend

我正在尝试以与使用包“ape”绘制树时相同的“样式”绘制凝聚聚类（带有 Agnes 的 UPGMA）的结果。我在下图中包含了一个简单的示例 ![图 1\. 所需最终输出的简单示例](https://i.stack.imgur.com/DNe4y.png)

关键问题是我希望能够根据叶子标签中的 a 模式为树状图的叶子着色。我尝试了两种方法：要么我使用，要么`hc2Newick`使用 Joris Meys 在[Change](https://stackoverflow.com/questions/4720307/change-dendrogram-leaves) Dendrogram Leaves 的答案中提出的代码。两者都没有给出令人满意的输出。可能是我也不完全理解树状图的构建方式。`abundance.agnes.ave`可以在[https://www.dropbox.com/s/gke9qnvwptltkky/abundance.agnes.ave](https://www.dropbox.com/s/gke9qnvwptltkky/abundance.agnes.ave)上找到对象的 ASCII 保存（从运行 agnes 中存储） 。

当我使用第一个选项（`hc2Newick` 来自 bioconductor 的`ctc`包）时，我在使用此代码时得到下图：

```
write(hc2Newick(as.hclust(abundance.agnes.ave)),file="all_samples_euclidean.tre")
eucltree<-read.tree(file="all_samples_euclidean.tre")
eucltree.laz<-ladderize(eucltree,FALSE)
tiplabs<-eucltree$tip.label
numbertiplabs<-length(tiplabs)
colourtips<-rep("green",numbertiplabs)
colourtips[grep("II",tiplabs)]<-"red"
plot(eucltree.laz,tip.color=colourtips,adj=1,cex=0.6,use.edge.length=F)
add.scale.bar() 
```

![使用 plot.phylo](https://i.stack.imgur.com/HK1ME.png)

这显然不理想，情节的“对齐”不是我想要的。我想这与分支长度计算有关，但是我不知道如何解决这个问题。当然，与 colLab 函数的结果相比，它看起来更像是我想要报告的树状图样式。此外，`use.edge.length=T`在上面的代码中使用确实会给出一个未正确“对齐”的聚类： ![具有分支长度的 Plot.phylo](https://i.stack.imgur.com/Tf4hl.png)

使用 Joris Meys 的 colLab 函数和以下代码的第二种方法给出了下图

```
clusDendro<-as.dendrogram(as.hclust(abundance.agnes.ave))
labelColors<-c("red","green")
clusMember<-rep(1,length(rownames(abundance.x)))
clusMember[grep("II",rownames(abundance.x))]<-2
names(clusMember)<-rownames(abundance.x)

colLab <- function(n)
{
  if(is.leaf(n)) {
    a <- attributes(n)
    # clusMember - a vector designating leaf grouping
    # labelColors - a vector of colors for the above grouping
    labCol <- labelColors[clusMember[which(names(clusMember) == a$label)]]
    attr(n, "nodePar") <- c(a$nodePar, lab.col = labCol)
  }
  n
}

clusDendro<-dendrapply(clusDendro, colLab)
plot(clusDendro,horiz=T,axes=F) 
```

![使用 colLab](https://i.stack.imgur.com/JECEw.png) 这个情节越来越接近我想要的，但是我不知道为什么叶子上会出现空心圆圈以及如何去除它们。

任何帮助深表感谢。

亲切的问候，

调频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T16:10:18.333

这个功能现在可以在一个名为“ [dendextend](https://github.com/talgalili/dendextend) ”的新包中使用，它正是为这种事情而构建的。

您可以在以下 URL 的“使用”部分中的演示文稿和小插图中看到许多示例：[https ://github.com/talgalili/dendextend](https://github.com/talgalili/dendextend)

在以下 SO 问题中刚刚回答了一个几乎完全正确的问题：

[https://stackoverflow.com/a/18832457/256662](https://stackoverflow.com/a/18832457/256662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:20:16.893

我很久以前写过这段代码，看起来机制上有些改变。

我使用的`plot.dendrogram`函数有一个参数`nodePar`。自从我上次使用该函数以来，行为发生了变化，虽然这通常用于内部节点，但它显然也会对外部节点产生影响。根据帮助文件，`pch`默认值为now。`1:2`

因此，您需要`pch=NA`在添加到`colLab`函数外部节点的属性中具体指定。尝试像这样调整它：

```
colLab <- function(n)
{
  if(is.leaf(n)) {
    a <- attributes(n)
    # clusMember - a vector designating leaf grouping
    # labelColors - a vector of colors for the above grouping
    labCol <- labelColors[clusMember[which(names(clusMember) == a$label)]]

    attr(n, "nodePar") <- 
        if(is.list(a$nodePar)) c(a$nodePar, lab.col = labCol,pch=NA) else
                               list(lab.col = labCol,pch=NA)
  }
  n
} 
```

在我的机器上，这解决了问题。

或者，您可以查看包`use.edge.length`中函数`plot.phylo`的参数`ape`。您将其设置为`FALSE`，但根据您的解释，我相信您希望将其设置为默认值，`TRUE`.

编辑：为了使函数更通用，添加`labelColors`和`clusMember`作为函数的参数可能是一个好主意。我的 quick-n-dirty 解决方案不是干净代码的最佳示例......

也忘记我所说的使用边缘长度。猿包将其解释为真正的树状图，并且将`use.edge.length`边缘`TRUE`长度转换为进化时间。因此，树状图的“奇怪”轮廓。

另请注意，如果树叶没有`nodePar`属性，使用该函数添加额外参数`c()`将导致不良效果：如果添加 eg `lab.cex=0.6`，该`c()`函数将创建一个向量而不是列表，并在`lab.cex`任何时候将值转换为字符参数列表中有一个字符值。在这种情况下，这将是颜色的名称，这解释了您在评论中谈到的错误。

# calayer - 通过组合多条路径创建 CALayer 蒙版

> ID：16062688
> 
> 赞同：5
> 
> 时间：2013-04-17T14:25:47.133
> 
> 标签：calayer, uibezierpath, cgpath, quartz-core, cashapelayer

我正在尝试为包含图像的 CALayer 创建一个蒙版。该掩码应能够使用多条路径的联合或联合的逆。就可能是分离或联合否认的维恩图而言（在此处查找我无法发布的维恩图图形：[https](https://en.wikipedia.org/wiki/Logical_connective#Common_logical_connectives) ://en.wikipedia.org/wiki/Logical_connective#Common_logical_connectives ）。我还在专门的 iOS 论坛中启动了一个线程，其中包含大量图形和更多示例代码：[http ://www.raywenderlich.com/forums/viewtopic.php?f=2&t=7155](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=7155)

我确实成功地创建了第一种情况：多条路径的联合（析取）。

您可以将代码复制到新的单屏应用程序中进行试用（不要忘记包含 Quartz 框架）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // create a yellow background
    UIView *bg = [[UIView alloc] initWithFrame:self.view.bounds];
    bg.backgroundColor = [UIColor yellowColor];
    [self.view addSubview:bg];

    // create the layer on top of the yellow background that will be masked
    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = self.view.layer.bounds;
    imageLayer.backgroundColor = [[UIColor blueColor] CGColor];

    // create the mask that will be applied to the layer on top of the
    // yellow background
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.fillRule = kCAFillRuleEvenOdd;
    maskLayer.frame = self.view.frame;
    CAShapeLayer *maskSubLayer1 = [CAShapeLayer layer];
    maskSubLayer1.fillRule = kCAFillRuleEvenOdd;
    maskSubLayer1.frame = self.view.frame;
    CAShapeLayer *maskSubLayer2 = [CAShapeLayer layer];
    maskSubLayer2.fillRule = kCAFillRuleEvenOdd;
    maskSubLayer2.frame = self.view.frame;

    // add the paths to sublayers of the mask
    maskSubLayer1.path = CGPathCreateWithRect((CGRect){{100, 140}, {100, 150}}, nil);
    maskSubLayer2.path = CGPathCreateWithEllipseInRect((CGRect){{80, 40}, {190, 190}}, nil);
    // add the sublayers to the mask
    // (instead of using CGPathAddPath())
    [maskLayer addSublayer:maskSubLayer1];
    [maskLayer addSublayer:maskSubLayer2];
    // apply the mask to the layer on top of the yellow background
    imageLayer.mask = maskLayer;
    [self.view.layer addSublayer:imageLayer];

} 
```

然而，逆向似乎无法驯服，例如使用蒙面掩码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // create a yellow background
    UIView *bg = [[UIView alloc] initWithFrame:self.view.bounds];
    bg.backgroundColor = [UIColor yellowColor];
    [self.view addSubview:bg];

    // create the layer on top of the yellow background that will be masked
    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = self.view.layer.bounds;
    imageLayer.backgroundColor = [[UIColor blueColor] CGColor];

    // create the mask that will be applied to the layer on top of the
    // yellow background
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.fillRule = kCAFillRuleEvenOdd;
    maskLayer.frame = self.view.frame;
    CAShapeLayer *maskSubLayer1 = [CAShapeLayer layer];
    maskSubLayer1.fillRule = kCAFillRuleEvenOdd;
    maskSubLayer1.frame = self.view.frame;
    CAShapeLayer *maskSubLayer2 = [CAShapeLayer layer];
    maskSubLayer2.fillRule = kCAFillRuleEvenOdd;
    maskSubLayer2.frame = self.view.frame;

    // add the paths to sublayers of the mask
    maskSubLayer1.path = CGPathCreateWithRect((CGRect){{100, 140}, {100, 150}}, nil);
    [maskLayer addSublayer:maskSubLayer1];
    maskSubLayer2.path = CGPathCreateWithEllipseInRect((CGRect){{80, 40}, {190, 190}}, nil);
    [maskLayer addSublayer:maskSubLayer2];
    // use the maskLayer to mask the maskBackgroundLayer
    CALayer *maskBackgroundLayer = [CAShapeLayer layer];
    maskBackgroundLayer.frame = self.view.layer.bounds;
    maskBackgroundLayer.backgroundColor = [[UIColor greenColor] CGColor];
    maskBackgroundLayer.mask = maskLayer;

    // apply the maskBackgroundLayer to the layer on top of the yellow background
    imageLayer.mask = maskBackgroundLayer;
    [self.view.layer addSublayer:imageLayer];
    // just for testing: instead of the 2 lines above look at the maskBackgroundLayer
//    [self.view.layer addSublayer:maskBackgroundLayer];

} 
```

我正在寻找如何实现这种效果的想法。

类似的问题是： [iOS - 使用 UIBezierPath appendPath 剪切两条路径的联合](https://stackoverflow.com/questions/15551384/ios-clipping-union-of-two-paths-using-uibezierpath-appendpath) （在我的情况下不适用，因为交叉点可能是不规则的） [在 iOS 上结合相交 CGPaths](https://stackoverflow.com/questions/10723237/combining-intersecting-cgpaths-on-ios?rq=1) （未解决）

# c# - 在 SQL Server 2005 datetime c# 中插入日期和时间时出错？

> ID：16062696
> 
> 赞同：-5
> 
> 时间：2013-04-17T14:26:01.693
> 
> 标签：c#, sql, sql-server-2005

保存到 SQL Server 2005 时出现问题：

```
cmd = new SqlCommand("INSERT into survey_Request1(sur_no,sur_custname,sur_address,sur_emp,sur_date,sur_time,Sur_status)values(" + "'" + textBox9.Text + "'" + "," + "'" + textBox8.Text + "'" + "," + "'" + textBox5.Text + "'" + "," + "'" + textBox1.Text + "'" + "," + "Convert(Datetime,Convert(char(15),"+"'" + dateTimePicker2.Value +"'"+")" + "," + "'" + dateTimePicker1.Value.ToLongTimeString() + "'" + "," + "'" + "Active" + "'" + ")", conn);
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:38:12.990

您应该**始终**使用**参数化**查询 - 这可以防止 SQL 注入攻击，提高性能，并避免将数据不必要地转换为字符串以将其插入数据库。

尝试这样的事情：

```
// define your INSERT query as string *WITH PARAMETERS*
string insertStmt = "INSERT into survey_Request1(sur_no, sur_custname, sur_address, sur_emp, sur_date, sur_time, Sur_status) VALUES(@Surname, @SurCustName, @SurAddress, @SurEmp, @SurDate, @SurTime, @SurStatus)";

// put your connection and command into "using" blocks
using(SqlConnection conn = new SqlConnection("-your-connection-string-here-"))
using(SqlCommand cmd = new SqlCommand(insertStmt, conn))
{
    // define parameters and supply values
    cmd.Parameters.AddWithValue("@Surname", textBox9.Text.Trim());
    cmd.Parameters.AddWithValue("@SurCustName", textBox8.Text.Trim());
    cmd.Parameters.AddWithValue("@SurAddress", textBox5.Text.Trim());
    cmd.Parameters.AddWithValue("@SurEmp", textBox1.Text.Trim());
    cmd.Parameters.AddWithValue("@SurDate", dateTimePicker2.Value.Date);
    cmd.Parameters.AddWithValue("@SurTime", dateTimePicker2.Value.Time);
    cmd.Parameters.AddWithValue("@SurStatus", "Active");

    // open connection, execute query, close connection again
    conn.Open();
    int rowsAffected = cmd.ExecuteNonQuery();
    conn.Close();
} 
```

建议使用更具表现力的名称来**命名您的文本框。**`textbox9`并没有真正告诉我是哪个文本框 -`textboxSurname`会**更好**！

# wif - WIF .NET 4.5 破坏了 Windows Server AppFabric 配置工具 - 如何报告以及如何解决？

> ID：16062700
> 
> 赞同：0
> 
> 时间：2013-04-17T14:26:12.047
> 
> 标签：wif, appfabric

将 WCF 服务移至 WIF 4.5 后，许多元素已添加到 web.config 架构中，例如“serviceCredentials useIdentityConfiguration="true"”

现在我无法从 IIS 7.5 管理网站配置，因为 AppFabric 无法识别和加载配置。

如何解决这个问题，我如何向 MS 提交错误 - 我无法再找到客户咨询博客，我不确定在 ms connect 上的哪个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T08:01:59.917

Microsoft 的解决方法是：“您可以修改 %systemroot%\System32\inetsrv\config\schema\ServiceModel_schema.xml 以在属性“principalPermissionMode”下添加。”

请注意，如果您这样做，则不能在该文件夹中拥有文件的备份副本，您必须将备份副本放在其他地方，否则会出现“某事”并且根本无法加载架构。

# java - Linkify 是否适用于 Android 中的 TextView？

> ID：16062705
> 
> 赞同：3
> 
> 时间：2013-04-17T14:26:22.383
> 
> 标签：java, android, linkify

我有此代码适用于调用 EditText 的方法，我尝试对 TextView 使用相同的代码，但它不起作用。文本不会像在 EditText 中那样变成超链接，有人知道为什么吗？

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView tv = (TextView) findViewById(R.id.link_view);
    // make sure that setText call comes BEFORE Linkify.addLinks call
    tv.setText(tv.getText().toString());
    Linkify.addLinks(tv, Linkify.WEB_URLS);
}} 
```

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableRow>

        <TextView
            android:id="@+id/link_lbl"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:paddingRight="10dip"
            android:text="Link" />

        <TextView
            android:id="@+id/link_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="google.com" />
    </TableRow>
</TableLayout> 
```

这将在 EditText 中正常工作，我只需要帮助在 TextView 中做同样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:30:24.337

试试下面的代码。这对我来说可以。

```
TextView tv = ....
tv.setMovementMethod(LinkMovementMethod.getInstance());

String content = tv.getText().toString();
List<String> links = new ArrayList<String>();

Pattern p = Patterns.WEB_URL;
Matcher m = p.matcher(content);
while (m.find()) {
    String urlStr = m.group();
    links.add(urlStr);
}

SpannableString f = new SpannableString(content);

for (int i = 0; i < links.size(); i++) {
    final String url = links.get(i);

    f.setSpan(new InternalURLSpan(new OnClickListener() {
        public void onClick(View v) {
            Context ctx = v.getContext();
            String urlToOpen = url;
            if (!urlToOpen.startsWith("http://") || !urlToOpen.startsWith("https://"))
                urlToOpen = "http://" + urlToOpen;
            openURLInBrowser(urlToOpen, ctx);
        }
    }), content.indexOf(url), content.indexOf(url) + url.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
}

tv.setText(f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:34:29.603

具有可点击的跨度并使用可点击的跨度设置文本。您可以为 clickabke 跨度设置自定义颜色。当您单击 textview 中的文本时，它会显示一个 toast。

```
String title="hello";
SpannableString ss1=  new SpannableString(title);
    ss1.setSpan(new MyClickableSpan(title), 0, ss1.length(), 0); 
    tv = (TextView) findViewById(R.id.textview);
    tv.setText(ss1);
    tv.setMovementMethod(LinkMovementMethod.getInstance()); 
```

我的可点击跨度

```
 class MyClickableSpan extends ClickableSpan{     
   String clicked;
   public MyClickableSpan(String string)  
   {
    super();
    clicked =string;
   }
   public void onClick(View tv) 
   {
     // onclick of text in textview do something 
 Toast.makeText(MainActivity.this,clicked ,Toast.LENGTH_SHORT).show();
     //display a toast 
   }
   public void updateDrawState(TextPaint ds)
   {
     ds.setColor(Color.BLUE);//set text color 
     ds.setUnderlineText(true); // set to false to remove underline
   }
  } 
```

结果快照

![在此处输入图像描述](https://i.stack.imgur.com/qVobC.png)

编辑：

在 textview 中单击文本打开带有 URL 的浏览器。您还可以将 url 传递给活动。检索 url 并在 webview 中加载 url。

```
 <uses-permission android:name="android.permission.INTERNET"/>

public void onClick(View tv) {
//do something

   Toast.makeText(MainActivity.this,clicked ,
        Toast.LENGTH_SHORT).show();
   String url = "http://www.example.com";
   Intent i = new Intent(Intent.ACTION_VIEW);
   i.setData(Uri.parse(url));
   startActivity(i);
}

                OR 
```

在 onClick()

```
 Intent t= new Intent(MainActivity.this,SecondActivity.class);
   t.putExtra("key","http://www.google.com");
   startActivity(t); 
```

第二个.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >

  <WebView
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:id="@+id/wv"></WebView>
  </LinearLayout> 
```

然后在 SecondActivity

公共类 SecondActivity 扩展 Activity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    WebView wv= (WebView) findViewById(R.id.wv);
    Bundle extras= getIntent().getExtras();
    if(extras!=null)
    {
        wv.loadUrl(extras.getString("key"));
    }   
} 
 } 
```

# operating-system - 页表管理

> ID：16062707
> 
> 赞同：0
> 
> 时间：2013-04-17T14:26:24.290
> 
> 标签：operating-system, paging, virtual-memory

我理解了 OS 中分页的概念，只是想知道页表在哪里。它是出现在主内存还是辅助内存中。期待相同的回复。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:51:49.770

如果 CPU/OS 设计允许，一些 2 级页表可以像任何其他页一样换出到磁盘。

但是，您不想交换内核本身的第一级页表和某些页和页表。如果这样做，您可能会死锁系统。

# javascript - Javascript ajax 回调和变量初始化

> ID：16062708
> 
> 赞同：0
> 
> 时间：2013-04-17T14:26:28.383
> 
> 标签：javascript

以下代码来自一个显示分页表的简单页面。

```
var exviewmodel = function() {
    var self = this;
    self.getList = function(pagenum) {
        $.getJSON("/api/v1/getList", { page: pagenum }, function(data) {
           self.paginator.count(data.count);
        });
    };
    self.paginator = new Paginator(self.getList);
}; 
```

我检查并验证了代码是否有效，并且计数在 ajax 成功的分页器中正确更新。

我觉得这很奇怪，因为仅在定义了 ajax 回调之后才初始化分页器对象。

当 JS 解释器看到像 getList 这样的函数定义时，它到底做了什么，它引用了尚未在异步回调中初始化的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:32:55.410

> 当 JS 解释器看到像 getList 这样的函数定义时，它到底做了什么，它引用了尚未在异步回调中初始化的属性？

它去。“这是一个函数，OK”。

只有当函数被调用时，它才会尝试访问的变量才有意义。

# javascript - 如何使用 jquery 获取数据并在网页上动态填充

> ID：16062709
> 
> 赞同：3
> 
> 时间：2013-04-17T14:26:30.280
> 
> 标签：javascript, jquery, html, json

我想使用 jquery 获取存储在 mysql 中的数据并将其动态填充到网页上。我尝试了这段代码，但它不起作用。

```
<html>
<head>
  <script src="jquery-1.7.2.js"></script>
</head>
<body>
<pre>
<script>
  var url = "https://natiweb-natiweb.rhcloud.com/game.php";

  $.getJSON(url,function(data){
    $.each(data,function(i,user){
      alert("inside JSON");
      alert(user.appname+"\n"+user.applink);
      var a = document.createElement('a');
      var linkText = document.createTextNode(user.appname);
      a.appendChild(linkText);

      a.title = linkText;
      a.href = user.applink;
      document.body.appendChild(a);
      var b = document.createElement('br');
      document.body.appendChild(b);

    });
  }
);

</script>
</pre>
</body>
</html> 
```

它从不执行 getJSON 查询。我不知道怎么了。“内部 JSON”没有被打印出来。我尝试使用专用的 js 文件编写相同的脚本代码并且它有效。我希望它在正文中工作，因为我必须通过从 mysql 获取链接来动态创建链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:56:45.193

*   首先，在文档准备好后执行您的代码：

    ```
     $(function(){
        /* your code */
     }); 
    ```

或者

```
 $(document).ready(function(){
        /* your code*/
     }); 
```

*   其次，使用$.ajax，传入错误回调，检查是否有异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:47:25.133

+1 adeneo - 如果您在开发人员控制台中查看 chrome，您会看到您收到 CORS 错误。除此之外，您的代码应该可以工作。返回的 JSON 很好，您的代码似乎用它做了正确的事情，但您没有得到 JSON。

请参阅此 SO [XmlHttpRequest 错误中的答案：Access-Control-Allow-Origin 不允许使用 Origin null 以获得](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)对解决方案的良好解释。

# c# - 方法'GetKennel'没有重载需要1个参数c＃

> ID：16062711
> 
> 赞同：0
> 
> 时间：2013-04-17T14:26:41.307
> 
> 标签：c#, arguments, overloading

刚刚掌握了c#的基础知识，所以如果这是一个简单的修复/没有正确解释，我提前道歉

故事目标：制作一个连接来自 sql 的信息的 UI

问题：错误如标题所述，尽我所知尝试修复它，绕过它等。

当用户选择“查看狗窝”时，我想要做的是在 UI 面板中显示狗窝的结果

理论上它应该是这样的：

狗窝名称 [txtbox "example"]
Address1 [txtbox "Example"]
等等...

```
 private void **Kennel_Load(object sender, EventArgs e)**    <-------Error
{
  DataTable dt = _kennelDAL.GetKennel(_kennelDAL);
  if (dt.Rows.Count > 0)
  {
    DataRow row = dt.Rows[0];
    txtKennelName.Text = row["Name"].ToString();
    txtAddress1.Text = row["Address1"].ToString();
    txtAddress2.Text = row["Address2"].ToString();
    txtAddress3.Text = row["Address3"].ToString();
    txtPostcode.Text = row["Postcode"].ToString();
    txtCapacity.Text = row["Capacity"].ToString();

  }
} 
```

此代码定义来自...

```
 public DataTable GetKennel(string name, string address1, string address2, string address3,string postcode, int capacity)
{
    DataTable dt = new DataTable();
    //Code here
    using (SqlConnection con = new SqlConnection(ConnectionString))
    {
        SqlCommand cmd = new SqlCommand("[dbo].[Kennel_SelectByID]", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@Kennel_Name", name);
        cmd.Parameters.AddWithValue("@Kennel_Address1", address1);
        cmd.Parameters.AddWithValue("@Kennel_Address2", address2);
        cmd.Parameters.AddWithValue("@Kennel_Address3", address3);
        cmd.Parameters.AddWithValue("@Kennel_postcode", postcode);
        cmd.Parameters.AddWithValue("@Kennel_capacity", capacity);
        SqlDataAdapter sda = new SqlDataAdapter(cmd);
        sda.Fill(dt);
    }
    return dt; 
```

如果这个问题有问题，再次道歉，只是在这个问题上停留了很长一段时间！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:33:08.940

该错误准确地说明了问题：

您有一个方法 - 在您的情况下 - 需要六个参数，但您只能使用一个 ( `_kennelDAL`) 调用它。

你的电话应该看起来更像这样：

```
DataTable dt = _kennelDAL.GetKennel(textBoxName.Text, textBoxAddress1.Text,
                                    textBoxAddress2.Text, textBoxPostCode.Text
                                    textBoxCapacity.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:30:55.340

`DataTable dt = _kennelDAL.GetKennel(_kennelDAL);`

你用一个参数调用它，不管`_kennelDAL`是什么。

但是，您已将此方法定义为具有多个参数：

```
public DataTable GetKennel(string name, string address1, string address2, string address3,string postcode, int capacity) 
```

您必须将它们传入（即，物理地*给*它*名称*、*地址*等），或者创建一个接受任何`_kennelDAL`内容的重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:33:56.973

你想用

```
DataTable dt = _kennelDAL.GetKennel("MyName", "MyAddress1", "MyAddress2", "MyAddress3", "MyPostCode", 10); 
```

# c# - 动态更改 URL

> ID：16062719
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:00.167
> 
> 标签：c#, asp.net, web-applications, webforms

我们有一个在 Asp.net 4.0 WebForms 中开发的 Web 应用程序 URL 是，例如 www.mysite.com，最初它是应用程序的单个数据库。

现在我们必须让它让多个客户可以使用它，反对开发人员的建议，我们正在使用多个 sql DB

所以现在我需要弄清楚如何让我们所有的页面像这样与每个客户一起工作而不是每个人都去这里 www.mysite.com/login.aspx

我需要能够使 URL 以这种方式工作 www.mysite.com/Cust1/ 重定向到 www.mysite.com/Cust1/ Login.aspx

然后客户使用的所有其他 URL 中都将包含 Cust1

# sql - 如何提取加权平均值？

> ID：16062722
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:03.927
> 
> 标签：sql, firebird

假设我有这样的表：

```
IDofemployee category value importance range  date
1            1        2     5          1       2013-04-17
1            1        3     4          2       2013-04-17
1            2        4     3          1       2013-04-17
2            1        7     2          1       2013-04-18
2            1        3     2          2       2013-04-18 
```

现在我想在firebird中作为SQL查询的结果是这样的：

（如果范围相同，它应该取具有相同范围的所有值的平均值，但对于不同的员工是分开的）

```
emp    wAVG                           date
1      (([2*5+4*3]/2)+[3*4])/3 =7.6   2013-04-17
2      (7*2+3*2)/2=10                 2013-04-18 
```

所以这是因为在 emp1 中，它必须从第 1 行和第 3 行取平均值，因为范围在两种情况下都是 =1，所以它取自 row1 = 2*5(value*importance) from row3 =4*3 sum 2*5 + 4 *3 这个总和除以 2 因为有 2 行具有相同的范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:07:22.413

怎么样

```
select IDofemployee, date, sum(sa) / sum(sc) as wAVG
from (
   select IDofemployee, date, sum(value*importance) / count(value) sa, count(value) sc
   from TAB
   group by IDofemployee, range, date
)
group by IDofemployee, date 
```

请注意，如果`value`和`importance`都是整数类型，您需要将它们转换为浮点数，否则除法的结果也将是整数（即您得到的答案是 7 而不是 7.6）。投射替换

```
sum(value*importance) / count(value) sa 
```

在上面的查询中

```
cast(sum(value*importance) / count(value) as double precision) sa 
```

此外，`value`and`date`是关键字，不应用作字段名称。

# c - 使用 C 中的递归函数测试回文

> ID：16062723
> 
> 赞同：1
> 
> 时间：2013-04-17T14:27:03.943
> 
> 标签：c, function, recursion, logic

我试图编写程序来测试一个字符串是否是回文，但我总是得到输出，因为它不是一个。我的代码有什么问题？

```
#include <stdio.h>
#include <string.h>

int is_palindrome(int start, int end, char *str)
{
    if (str[start] != str[end])
        return 0;
    else if (start == end)
        return 1;
    else
        return is_palindrome(++start, --end, str);

    return 0;

}
int main()
{
    char str[20];
    int length,start=0,end=length-1;
    int result;
    printf("Enter the String.\n");
    fgets( str, sizeof( str ), stdin );
    length = strlen(str);

    if(is_palindrome(start,end,str))
        printf("It's a palindrome!\n");
    else
        printf("It's not a palindrome! \n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:29:38.460

什么时候`++start`和`--end`对方擦肩而过？

```
else if (start == end) 
```

应该是`>=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:37:07.923

你有两个主要问题，

**1）**您在没有先初始化的情况下`end`使用初始化：`length``length`

```
length = strlen(str);
/* initialize end here */ 
```

**2）**您没有考虑从以下字符串末尾获得的换行符`fgets`：

```
end = length - 2; /* don't include the newline */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T10:17:39.053

在这个`is_palindrome()`函数中你必须检查它，否则它对回文词的偶数字符不起作用

```
if(start>end)
    return 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T17:31:13.403

与 `if(start==end)`有逻辑错误相符。

这是由最后一次递归调用引起的，其中 last 和 end 的值将始终相同，即它们都将位于数组的中心。因此，函数`is_palindrome()`将始终返回`1`，输出将始终为`It's a palindrome!`

# iphone - 从数据库中获取记录时显示空表视图

> ID：16062729
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:15.403
> 
> 标签：iphone, ios, objective-c, ipad, ios6

我有一个 tableview，`-(void)tableView: didSelectRowAtIndexPath:`我正在从 sqlite 数据库中获取记录并显示在另一个 detailViewController 的 tableview 上。获取记录时 UI 卡住了。我必须`tableView`在带有活动指示器的行上显示空的detailViewController，直到没有从数据库中获取所有记录。但是问题是，当我调用函数从`-(void)viewDidLoad`detailViewController的数据库中获取记录并且出现黑屏时，主运行循环被阻塞. 我在某处读过在后台线程上执行数据库操作不好。所以我不能在后台线程上执行获取操作。解决此问题的最佳方法是什么？

如何在detailViewController的视图更新时显示记录。是否有任何好的设计模式或者在后台线程上执行数据库操作是否正确？在viewDidAppear中进行诸如数据库操作之类的繁重操作也可以吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:55:59.643

我认为在不同的线程上加载数据库不是问题。但是如果你想用你的数据库结果更新表视图，使用方法 performSelectorOnMainThread。由于 UI 更新应该始终在主线程中。

表视图是否需要来自数据库的结果？还是只针对detailView？如果只针对detailView，为什么不在detailView出现的时候查询数据库呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:32:25.440

在方法中从数据库中获取记录**`viewWillAppear`**并将其放入`NSMutableArray`并检查它`NSLog(@"%@",myMutableArr);`是否有正确的数据然后放入`UITableView`

请参阅[本教程](http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/)，[这也是官方文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/)

# javascript - 我对后缀代码的 Javascript 中缀破坏了 jsFiddle - 为什么？

> ID：16062730
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:27:15.577
> 
> 标签：javascript, jsfiddle

这是代码，我在 HTML 部分中的所有内容是`<p></p>`

选项是**onDomready**和**jQuery 1.9.1**

```
var operators = '+-*/()';

Array.prototype.peek = function () {
    return this[this.length - 1];
};

function isDigit(c) {
    return !isOperator(c);
}

function isOperator(c) {
    return operators.indexOf(c) >= 0;
}

function operatorPriority(operator) {
    return operator === '*' || operator === '/' ? 1 : 0;
}

function comparePriority(a, b) {
    return operatorPriority(a) >= operatorPriority(b);
}

function toPostfix(infix) {
    var stack = [];
    stack.push('(');
    infix += ')';

    var count = 0;
    var postfix = "";

    while (stack.length > 0) {
        var c = infix.charAt(count++);
        if (isDigit(c)) {
            postfix += c;
        } else if (c === '(') {
            stack.push(c);
        } else if (isOperator(c)) {
            while (isOperator(stack.peek())) {
                if (comparePriority(stack.peek(), c)) {
                    postfix += stack.pop();
                } else {
                    break;
                }
            }
            stack.push(c);
        } else { // assumed )
            while (stack.peek() !== '(') {
                postfix += stack.pop();
            }
            stack.pop();
        }
    }
    return postfix;
}

var infix = "2+4+5";
$('p').text(toPostfix(infix)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:36:12.350

在您的 while 循环中，您必须添加一个条件`count`：

```
while (stack.length > 0 && count <= infix.length) {
    ...
} 
```

# php - PHP 简单 HTML DOM 解析器 div 选择器

> ID：16062732
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:19.013
> 
> 标签：php, simple-html-dom, php-parser

我有 div，想要获取`7,89`数字，我的选择器是

```
<div class="titlePageSprite star-box-giga-star"> 7,89 </div>

$ret['Rating'] = $html->find('div.star-box-giga-star')->content; 
```

但我得到空数组，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:30:44.660

尝试这个：

```
$ret['Rating'] = $html->find('div.star-box-giga-star', 0)->innertext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:31:05.517

`find()`返回与查找参数匹配的所有元素的 DOMNodeList，即使只有一个（或没有）匹配元素。您可以通过可选参数具体告诉它要返回哪个节点：

```
$rating = $html->find('div.star-box-giga-star', 0)
                                              ^^^^---return 1st node (0-based) 
```

或类似的愚蠢的东西

```
$nodes = $html->find(...);
foreach($nodes as $node) {
     $rating = $node->content;
     break;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T14:31:25.467

直接使用 XPath：

```
 foreach($xpath->query('//div[contains(@class, "star-box-giga-star")]') as $rating) {
      echo $rating->nodeValue, '<br>';
   } 
```

# java - XPage - 从 JavaBean 保存属性文件

> ID：16062736
> 
> 赞同：1
> 
> 时间：2013-04-17T14:27:32.027
> 
> 标签：java, xpages, xpages-extlib

经过一些尝试和大量谷歌搜索后，我最终再次询问 =)

我有一个 Java Bean，它创建了一个`TreeSet<String>`包含一些用户供我的数据库使用的用户。因为创建我的需要一些时间`TreeSet`我想将它保存到`properties`文件中。

获取/读取我的 Bean 中的属性文件没有问题，设置属性也很容易，但是如何`OutputStream`为我的资源创建一个？

代码片段：

```
try {
    Properties userproperties;
    userproperties = new Properties();
    userproperties.load(FacesContextEx.getCurrentInstance().getExternalContext().getResourceAsStream("WEB-INF/user.properties"));

    for (String groupmember : groupmembers) {
        userproperties.setProperty("UserList", groupmember);
    }
    // userproperties.save(OutputStream, comments)

} catch (Exception e) {
    // some errorhandling
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:32:49.657

您可以通过 DXL 导入来执行此操作。在文件系统上创建一个 DXL 文件并将其导入数据库。

请注意，网络用户必须至少具有设计者权限（高级 ACL 设置）

但似乎 8.5.2 有一个错误，我无法让它与这个版本一起工作。

# javascript - 在 AngularJS 中过滤模板 HTML

> ID：16062737
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:38.507
> 
> 标签：javascript, html, angularjs

我想使用像 i18n 引擎这样的过滤器，这个过滤器工作正常。但是，如果我尝试在模板 HTML 中使用 i18n 过滤器（使用 $routeProvider），我将无法完成这项工作。

我的过滤器：

```
app.filter('i18n', function() {
    return function (input) {
        return $.i18n._(input);
    }
}); 
```

我的 HTML 模板：

```
<div class="fieldConfig first">
                <label id="label_topology" for="topology" class="labelMedio">{{"Topologia" | i18n}}:</label>                    
            </div> 
```

我的控制器：

```
function WanCtrl($scope, $routParams, $i18n) {
    $scope.title = 'Wan';

}; 
```

我是否需要在控制器中添加更多内容才能在模板中使用过滤器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:10:20.730

要在任何地方（控制器、指令、服务等）使用过滤器，而不仅仅是在模板中，您需要引用[`$filter`service](http://docs.angularjs.org/api/ng.$filter)。在您的情况下，您`$i18n`在控制器的参数中引用这不是正确的方法。

相反，传入`$filter`，并像这样使用`i18n`过滤器：

```
function WanCtrl($scope, $routeParams, $filter) {
    $scope.title = $filter('i18n')('Wan');
} 
```

有关更多说明，请参阅有关[此问题的 StackOverflow 帖子](https://stackoverflow.com/a/14302334/586621)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T10:16:06.067

像 i18n 引擎这样的过滤器？角度翻译支持这一点！:)

[http://pascalprecht.github.io/angular-translate/](http://pascalprecht.github.io/angular-translate/)

# java - 输入字段更改后的 Wicket 数据表过滤

> ID：16062744
> 
> 赞同：0
> 
> 时间：2013-04-17T14:27:47.307
> 
> 标签：java, javascript, filter, datatable, wicket

在 Wicket 应用程序中，我有一个带有 SortableDataProvider 扩展的 DefaultDataTable 和一个可点击的列（AbstractColumn 的扩展）。

数据表附带一个搜索字段和按钮，因此用户可以过滤表（比较搜索词和表内容）。

但是，我更喜欢不同的方法。如果用户不必单击按钮来匹配结果会更好，但表格将在每个字符插入或删除搜索字段后更新（立即过滤，而不是在按下按钮后）。此外，与搜索词匹配的记录部分应加下划线或接收不同的字体颜色。

我知道使用 Javascript 可以实现这样的事情，但我不知道如何将 Javascript 附加到数据表。我怎样才能做到这一点？还是有更好/替代的方法来实现我的愿望？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:50:05.740

您可以使用`AjaxFormComponentUpdatingBehavior`将 ajax 行为添加到表单组件。ajax 的调用取决于构造函数中指定的 js 事件，在本例中为“onkeyup”。然后，您将组件定位为要重新渲染 ajax 的组件，用于 wicket 4、5`target.addComponent(datatable);`用于 wicket 6x `target.add(datatable);`。但请注意，数据表将其 OutputMarkupId 设置为 true `target.addComponent(datatable);`，这对于 wicket ajax 所针对的任何组件都是必需的。

```
datatable.setOutputMarkupId(true); 

field.add(new AjaxFormComponentUpdatingBehavior("onkeyup") { 
   @Override 
   protected void onUpdate(AjaxRequestTarget target) { 
           target.addComponent(datatable); 
   }
}); 
```

您可能还需要[节流](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxEventBehavior.html#setThrottleDelay%28org.apache.wicket.util.time.Duration%29)，希望这会有所帮助！

# java - Java：发送和接收的单个类

> ID：16062746
> 
> 赞同：1
> 
> 时间：2013-04-17T14:27:50.953
> 
> 标签：java

我正在编写一个具有规范的选择性重复程序：

“在不失一般性的情况下，将发送者和接收者实体实现在同一个类（SRNode）中。SRNode的每个进程都可以同时进行发送和接收。”

我对通过 UDP 数据包进行通信的理解是，您有一个仅关注发送的 Sender/Server 类和一个仅关注接收的 Receiver/Client 类。接收者在等待消息时阻塞，那么如何创建一个可以*在阻塞*和等待消息时发送消息的单一实体呢？我猜这是很有可能的，因为这是我的家庭作业的要求，但也许我并不完全了解发送/接收功能，即使我以前使用过它们。任何帮助/解释表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:33:16.800

我怀疑你的作业是为了教你并发和线程。为了避免为您这样做，也许您应该阅读一些有关[Java 并发的文章](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

# python - 补丁 - 如何检查补丁类的实例是否称为类函数？

> ID：16062749
> 
> 赞同：0
> 
> 时间：2013-04-17T14:28:00.780
> 
> 标签：python, mocking, patch

我正在尝试修补一个类，让一个被测函数创建一个修补类的实例，让该实例调用一个类函数，然后我想测试该类函数是否被调用。我怎样才能做到这一点？

以下是我的代码的基本变体：

测试文件：

```
class TestChannel(unittest.TestCase):
    @patch("notification.models.Channel")
    def testAddChannelWithNamePutsChannel(self, *args):
        addChannelWithName("channel1")
        self.assertTrue(Channel.put.called) 
```

要测试的代码：

```
def addChannelWithName(name):
    channel = Channel(name = name)
    channel.put() 
```

基本上，我想测试调用了 channel.put() 。当然，这段代码不起作用，因为我正在检查类函数 put() 是否不是为实例调用的，而是在一般情况下调用的。我需要在实例上调用它才能通过。我已经尝试了几种模拟 Channel 类不同部分的变体，它是返回值，但我似乎无法让它工作。我该怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:35:18.663

让 addChannelWithName 函数返回 Channel 实例怎么样？

```
def addChannelWithName(name):
    channel = Channel(name = name)
    channel.put()
    return channel

class TestChannel(unittest.TestCase):
    @patch("notification.models.Channel")
    def testAddChannelWithNamePutsChannel(self, *args):
        channel = addChannelWithName("channel1")
        self.assertTrue(channel.put.called) 
```

# jquery-isotope - 同位素列移位布局和居中项目可以组合吗？

> ID：16062760
> 
> 赞同：0
> 
> 时间：2013-04-17T14:28:30.627
> 
> 标签：jquery-isotope

当我尝试结合同位素居中布局和列移位布局时，我无法使元素居中。

下面的示例：
**居中布局**（工作正常） - [http://www.fiveblackcats.com/cl/stack/centered.html](http://www.fiveblackcats.com/cl/stack/centered.html)
**列移位布局**（工作正常） - [http://www.fiveblackcats.com/cl/stack/column_shift .html](http://www.fiveblackcats.com/cl/stack/column_shift.html)
**两者的组合**（列移位仍然可以正常工作，但元素未居中） - [http://www.fiveblackcats.com/cl/stack/column_shift.html](http://www.fiveblackcats.com/cl/stack/column_shift.html)

如果有人能指出我在这里缺少的东西，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T15:41:24.253

这样做的唯一方法是正确合并 2 个布局。

我已经做到了，但它根本不干净。它需要进行重大重构以避免变量重复。但它有效。

```
$container.isotope({
    itemSelector : '.item',
    layoutMode: 'masonryColumnShift',
    masonry : {
      columnWidth : 292,
      gutterWidth: 10
    }
}) 
```

你可以在这里看到它：http: [//jsfiddle.net/Spope/AwMZ9/](http://jsfiddle.net/Spope/AwMZ9/)

如果可以的话，我稍后会尝试清理它。

# kendo-ui - kendo 数据源中的 'options' 参数

> ID：16062763
> 
> 赞同：7
> 
> 时间：2013-04-17T14:28:32.883
> 
> 标签：kendo-ui, datasource

现在我正在学习使用 kendoui 开发 Web 应用程序，当我尝试使用自定义弹出 kendoWindow 而不是 kendo 内置编辑窗口更新网格数据时，我不知道如何将请求发送到远程服务器，所以我尝试在[此页面](http://docs.kendoui.com/api/framework/datasource)的官方api文档中找到答案，但是出现了一个新问题，显示为以下代码：

```
<script>
    var dataSource = new kendo.data.DataSource({
        transport: {
            read  : function (options) {
                /* implementation omitted for brevity */
            },
            update: function (options) {
                // make JSONP request to http://demos.kendoui.com/service/products/update

                $.ajax({
                    url     : "http://demos.kendoui.com/service/products/update",
                    dataType: "jsonp", // "jsonp" is required for cross-domain requests; use "json" for same-domain requests
                    // send the updated data items as the "models" service parameter encoded in JSON
                    data    : {
                        models: kendo.stringify(options.data.models)
                    },
                    success : function (result) {
                        // notify the data source that the request succeeded

                        options.success(result);
                    },
                    error   : function (result) {
                        // notify the data source that the request failed
                        options.error(result);
                    }
                });
            }
        },
        batch    : true,
        schema   : {
            model: { id: "ProductID" }
        }
    });

    dataSource.fetch(function () {
        var product = dataSource.at(0);
        product.set("UnitPrice", 20);
        dataSource.sync(); makes request to http://demos.kendoui.com/service/products/update
    });
</script> 
```

这是一个示例，用于说明如何将 update 指定为向远程服务发出 HTTP 请求的函数

我的问题是传递给读取和更新函数的参数“选项”是什么。我发现的唯一线索是 transport.parametermap 函数的参数，但我不确定它们之间有什么关系，所以希望有人为我解释一下

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:41:16.667

options 参数是您已经发现的。KendoUI 让您为它的数据源类的数据访问方法指定一个函数而不是一些配置。

如果您指定一个函数，kendoUI 怎么会知道您何时完成加载数据？它不能。所以有这个选项变量传递给你的函数（实际上，它可以有每个名称，例如 dfhajkfhd），你可以调用它让 kendoUI 知道你的进度。为此，它具有您可以调用的**成功**和**错误**方法。

您从 kendo-docs 中复制的评论正是如此。

或者你有什么不同的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:16:14.237

真的很感谢那些回答了这个问题并尝试

我从问题中链接的 kendo-docs 底部找到了答案。

1.  创建了一个新的“数据源”对象并在其中定义了读取和更新传输
2.  当 dataSource 准备好时，使用 dataSource 的 'get' 方法来获取我需要通过 id 更新的数据项。
3.  更新数据使用'set'方法并通过'sync'方法提交

最后一步是将数据同步到数据库下面是我使用的代码

```
var updateDataSource = new kendo.data.DataSource({
    type: "odata",
    transport: {
        read: {
            url: "/api/odata/PEMEP/TaskInformations/?"
        },
        update: {
            url: "/api/odata/PEMEP/TaskInformations/?",
            type: "PUT",
            dataType: "json",
        },
    },
    schema: {
        model: {
            id: "_id"
        }
    },
    sync: function() { // close edit window when update request finished

        $("#window").data("kendoWindow").close();
    },
    error: function(e) {
        console.log(e.status);
    }
});
updateDataSource.fetch(function() {

    var task = updateDataSource.get(id); // get dataitem by id

    task.set("status", status); // set new values
    task.set("retreatReason", retreatReason);

    updateDataSource.sync(); //submit the change 
}); 
```

# asp.net - 如何调用外部服务器/网络服务上的方法？

> ID：16062767
> 
> 赞同：1
> 
> 时间：2013-04-17T14:28:39.893
> 
> 标签：asp.net, web-services, asp.net-mvc-4

我正在尝试从[http://www.ibanbic.be/IBANBIC.asmx调用方法](http://www.ibanbic.be/IBANBIC.asmx)

我已经阅读了很多论坛和教程，但所有信息都是关于在 ASP.net 中设置 Web 服务或使用 ajax / javascript。我只需要调用函数：calculateIBAN1。

一步一步的教程会很棒。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:31:08.710

> 一步一步的教程会很棒。

在解决方案资源管理器中右键单击`References`项目中的菜单，然后选择`Add Service Reference...`. 在地址类型中`http://www.ibanbic.be/IBANBIC.asmx`单击`Go`，然后单击`OK`。这将生成一个强类型客户端代理，允许您调用服务：

```
using (var client = new ServiceReference1.BANBICSoapClient("IBANBICSoap"))
{
    string result = client.calculateIBAN1("iso country", "some account");
} 
```

请注意，这还将`<system.serviceModel>`向您的 web.config 文件添加一个，您可以在其中管理 WCF 客户端端点。

或者，您可以使用`svcutil.exe`为服务生成客户端代理，如[`this article`](http://msdn.microsoft.com/en-us/library/ms734691.aspx)MSDN 中所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:35:14.437

ASP.NET：

首先，您必须添加一个 Web 服务：

![在此处输入图像描述](https://i.stack.imgur.com/Fzxn7.png)

然后您必须实例化 Web 服务并调用该方法。

![在此处输入图像描述](https://i.stack.imgur.com/qrlMg.png)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:49:35.513

基于他们的网站 [http://www.ibanbic.be/IBANBIC.asmx?op=calculateIBAN1](http://www.ibanbic.be/IBANBIC.asmx?op=calculateIBAN1)

您可以像这样进行简单的 Ajax 调用：

```
var ISOCountry = 'IT';
var account = 'IT60 X054 2811 1010 0000 0123 456';
var url = "http://www.ibanbic.be/IBANBIC.asmx?op=calculateIBAN1"
        jQuery.ajax({
            type: 'GET',
            url: url,
            timeout: 4000,
            data: {'ISOcountry':ISOCountry, 'account' : account},
            success: onSuccess,
            error: onError,
            dataType: 'json',
            complete: function() {
            }
        });
}
function onSuccess(data, textStatus, jqXHR) {
    // do something
}
function onError(jqXHR, textStatus, errorThrown) {
    // do something
} 
```

# php - PHP 数组键值比较

> ID：16062774
> 
> 赞同：0
> 
> 时间：2013-04-17T14:29:03.337
> 
> 标签：php, arrays

我有两个数组，我试图找出两者之间的差异/相似之处。

这是数组：

```
 [781]=>
   array(7) {
     ["Pri_ID"]=>
     string(3) "781"
     ["Type"]=>
     string(7) "Athlete"
     ["EntryDate"]=>
     string(10) "2013-04-15"
     ["Status"]=>
     string(6) "Active"
     }
    [782]=>
    array(7) {
    ["Pri_ID"]=>
    string(3) "782"
    ["EntryDate"]=>
    string(10) "2013-04-15"
    ["Status"]=>
    string(7) "Removed"
    } 
```

这是第二个数组：

```
 [780]=>
      array(7) {
      ["Pri_ID"]=>
      string(3) "781"
      ["EntryDate"]=>
      string(10) "2013-04-15"
      ["Status"]=>
      string(7) "Removed"
      }
      [782]=>
      array(7) {
      ["Pri_ID"]=>
      string(3) "782"
      ["EntryDate"]=>
      string(10) "2013-04-15"
      ["Status"]=>
      string(7) "Active"
      } 
```

请注意，第二个数组 (780 ) 中的键在第一个数组中不存在。另请注意，第二个数组（id 782）的“状态”现在为“活动”，但最初处于已删除状态。

该项目的总体目标是比较两个数组，找出任何差异，然后将这些差异放在数组或字符串中，然后通过电子邮件发送差异。这是我到目前为止所尝试的：

```
$Deleted[] = array_diff_assoc($myarrayOld, $myarrayNew);
$Added[] = array_diff_assoc($myarrayNew, $myarrayOld); 
```

这将获取数组键之间的更改，但不会获取数组的状态键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:37:30.763

使用这样的递归函数

```
function array_diff_assoc_recursive($array1, $array2) {
    $difference=array();
    foreach($array1 as $key => $value) {
        if( is_array($value) ) {
            if( !isset($array2[$key]) || !is_array($array2[$key]) ) {
                $difference[$key] = $value;
            } else {
                $new_diff = array_diff_assoc_recursive($value, $array2[$key]);
                if( !empty($new_diff) )
                    $difference[$key] = $new_diff;
            }
        } else if( !array_key_exists($key,$array2) || $array2[$key] !== $value ) {
            $difference[$key] = $value;
        }
    }
    return $difference;
} 
```

参考：[PHP 文档](http://www.php.net/manual/en/function.array-diff-assoc.php#111675)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:32:07.720

这是一个比较 2 个数组的小代码。

```
function compareAssociativeArrays($first_array, $second_array)
{
$result = array_diff_assoc($first_array, $second_array);
if(!empty($result))
{
//Arrays are different
//print_r($result); will return the difference as key => value pairs.
return FALSE;
}
else
{
//Arrays are same.
//print_r($result); returns empty array.
return TRUE;
}
}

//Usage:
$first = array(
'name' => 'Zoran',
'smart' => 'not really'
);

$second = array(
'smart' => 'not really',
'name' => 'Zoran'
);

if(compareAssociativeArrays($first, $second))
{
echo 'Arrays are same';
}
else
{
echo 'Arrays are different';
} 
```

# java - 从CSV读取时间序列预测encog 3 java

> ID：16062779
> 
> 赞同：5
> 
> 时间：2013-04-17T14:29:18.857
> 
> 标签：java, csv, time-series, encog

我正在开发一个时间序列预测系统。我为 Java 购买了 Book of Encog3，但我需要知道 hot 才能提交一个包含 3 列的 CSV 文件并尝试预测第二列。CSV 定义如下：

`Date`, `DeviceConsumption`,`TotalPower`

我需要将该文件加载到加载器中，然后指定我要预测的列（即`DeviceConsumption`）。第三列用于提供更多信息并创建模式。

在示例中（如太阳黑子）我看到

```
TemporalMLDataSet result = new TemporalMLDataSet(windowSize,1);
TemporalDataDescription desc = new TemporalDataDescription(new ActivationSIN(),Type.RAW, false, true);

result.addDescription(desc); 
```

但是我在哪里可以定义我想要预测的列？？

谢谢你。

**编辑 2** 我做了一些改进：

对不起，但我还是不明白。正如你所说，我能够创建 2 TemporalDataDescription。但是我必须将两者都添加到同一个 TemporalMLDataSet 中吗？

```
TemporalMLDataSet result = new TemporalMLDataSet(WINDOW_SIZE,1);
TemporalDataDescription desc = new TemporalDataDescription(
TemporalDataDescription.Type.RAW,true,true);
    result.addDescription(desc);
TemporalDataDescription desc2 = new TemporalDataDescription(
TemporalDataDescription.Type.RAW,false,true);
    result.addDescription(desc2);

    for(int year = TRAIN_START;year<TRAIN_END;year++)
    {
        TemporalPoint point = new TemporalPoint(2);
        point.setSequence(year);
        point.setData(0, this.deviceConsumption[year]);
        point.setData(1, this.TotalPower[year]);
        result.getPoints().add(point);

    }
    result.generate(); 
```

这是对的吗？

**EDIT3**前面的代码是正确的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:24:24.603

使用 TemporalMLDataSet 时，您为训练集中需要的每个值创建一个 TemporalDataDescription 对象。因此，对于您的数据集，您将有两个 TemporalDataDescription 对象。一个用于 DeviceConsumption，一个用于 TotalPower。最后的两个布尔值允许您指定预测列。您可以将 DeviceConsumption 设置为输入和输出，并将 TotalPower 设置为仅输入。MLDataSet 并不真正了解 Data 列，您只需将其设置为数值递增的值，例如太阳黑子示例的工作方式。

列可以标记为输入和/或输出。输入列用于预测，输出列是您要预测的内容。单个列可以（并且通常是）输入和输出。太阳黑子的例子就是这种情况，上面的数据也是这种情况。

# c# - 从字符串数组中读取数据点

> ID：16062784
> 
> 赞同：1
> 
> 时间：2013-04-17T14:29:33.100
> 
> 标签：c#, string, multidimensional-array

我有一个包含如下数字的文本文件：

```
84 152 100 52 95 186 169 106 37
86 149 101 56 93 181 171 116 37
84 152 100 52 95 186 169 106 37
86 149 101 56 93 181 171 116 37
84 152 100 52 95 186 169 106 37
86 149 101 56 93 181 171 116 37
84 152 100 52 95 186 169 106 37
86 149 101 56 93 181 171 116 37 
```

有没有办法读取 2 个数据点，例如 (84,152)，然后是 (100,52)？

```
string[] lines = File.ReadAllLines(@"C:\Users\Farhan Afzal\Downloads\data_1_2.txt");
string[] line = lines.Select(l => String.Join(" ", l.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))).ToArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:33:36.650

```
var lines = File.ReadAllLines(@"C:\items.txt");
var points = new List<Tuple<int, int>>();
var items = lines.SelectMany(ln => ln.Split(new[] {' '}).Select(n => Convert.ToInt32(n)))
                 .ToList();
for (int i = 0; i < items.Count(); i+=2)
{    
    int second = (i + 1) < items.Count() ? items[ i + 1] : Int32.MinValue;                
    points.Add(Tuple.Create(items[i], second));
} 
```

TODO：错误/输入格式处理

使用[MoreLINQ Batch()](http://code.google.com/p/morelinq/wiki/OperatorsOverview)这将只是

```
items.Batch(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:38:02.383

在副作用的帮助下

```
int dummy = 0;
var result = list.GroupBy(x => dummy++%2)
                .Select(g => g.ToArray())
                .ToList(); 
```

还有一个没有副作用的长版本

```
var result = list.Select((x,i)=>new {item=x,index=i})
                .GroupBy(x => x.index%2)
                .Select(g => g.Select(x=>x.item).ToArray())
                .ToList(); 
```

# .net - WCF 服务之间的通信

> ID：16062786
> 
> 赞同：2
> 
> 时间：2013-04-17T14:29:39.067
> 
> 标签：.net, wcf, c#-4.0, servicemodelex

我正在将服务构建到现有应用程序中，其中构建每个服务的目的是仅由一个客户端使用，并且客户端和服务器设置有双工通信通道。

限制

1.  我没有重新设计现有基础设施的选项
2.  我无法使用可共享会话

要求：

1.  我需要能够在客户端服务之间进行通信（例如，如果用户单击一个项目并想要共享该项目，客户端出于某种原因可能无法处理“共享”功能并需要通过它交给另一个客户处理 - 这必须通过服务完成）
2.  客户端之间的通信必须由服务进行。

为了让这个最初工作，我直接在两个客户端之间设置了一个 IPC 通道（netNamedPipeBinding），但我被告知通过服务器发送所有内容。在大多数情况下，这种情况下的“服务器”与客户端在同一台机器上运行，所以我想出了这个非常粗略的概念验证尝试（见下面的代码块）。

问题：当为订阅服务调用方法时，当前服务（在其中调用方法）的操作上下文为空 - 这使服务无法回调客户端

我正在考虑使用 Juval Löwy 在他的 ServiceModelEx 框架中提供的发布/订阅框架，但是当所有客户端已经在他们自己和各自的服务之间建立了双工通信设置时，这似乎是不必要的......所以目的只是添加一个简单的发布/订阅层，概念上位于这些服务“下方”，可以与任何愿意订阅的服务对话。

欢迎提出建议和建设性批评！

* * *

```
 public static class SubscriptionManager<TEventArgs> 
    where TEventArgs : class
{
    private static ConcurrentDictionary<int, Action<TEventArgs>> _subscribers =
       new ConcurrentDictionary<int, Action<TEventArgs>>();

    // sessionId is NOT the WCF SessionId
    public static void FireEvent( int sessionId, TEventArgs eventArgs ) 
    {
        var subscribers = _subscribers.Where( s => s.Key == sessionId );
        var actions = subscribers.Select( keyValuePair => keyValuePair.Value );

        foreach ( var action in actions )
            action.BeginInvoke( eventArgs, action.EndInvoke, null );
    }

    public static void Subscribe(int sessionId, Action<TEventArgs> eventHandler)
    {
        _subscribers.TryAdd(sessionId, eventHandler);
    }

    public static Action<TEventArgs> Unsubscribe(int sessionId)
    {
        Action<TEventArgs> eventHandler;
        _subscribers.TryRemove(sessionId, out eventHandler);
        return eventHandler;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T17:56:40.723

所以首先，我正在实施的模式似乎可以归类为[Mediator Pattern](http://code.msdn.microsoft.com/windowsdesktop/The-Mediator-Pattern-c2c07b54)。

所以我通过传入 FireEvent 调用服务的当前实例上下文来解决这个问题，在我的情况下，它应该与订阅服务的上下文相同。

我在这里处理的情况是断开连接的客户端应用程序，它们在同一用户的上下文中并从同一客户端计算机运行，但（根据要求）它们必须通过服务层进行通信。

我开始从他的库中使用 WCF 同步上下文和 Juval Lowy 的`ThreadPoolBehavior`类`ServiceModelEx`，但我与 Ninject WCF Extensions 阻碍了这一点的实现相关联。

所以这个解决方案必须根据你自己的实现进行调整，但是为了让你了解我是如何让它工作的，这里是我更新`FireEvent`方法的要点：

```
public static void FireEvent( int sessionId, TData eventData, InstanceContext context )
{
    var subscribers = Subscribers.Where( s => s.Key == sessionId );

    var eventArguments = subscribers.Select( kvp => kvp.Value );

    foreach ( var argument in eventArguments )
    {
        // set data associated with the event
        argument.SetData( eventData );

        NinjectInstanceProvider instanceProvider = null;
        Object instance = null;

        try
        {
            // get a "synchronized instance" of the service of type defined by event args
            instanceProvider = new NinjectInstanceProvider( argument.ServiceType );
            instance = instanceProvider.GetInstance( context );

            // get the method from our "synchronized instance"
            // filter by argument types so we don't run into any issues with ambiguity
            var argumentTypes = new[] { typeof ( TEventArgs ) };
            var method = instance.GetType().GetMethod( argument.Callback, argumentTypes );

            // our method arguments
            var arguments = new object[] { argument };

            // invoke the method on our "synchronized instance"
            method.Invoke( instance, arguments );

            // release the instance
            instanceProvider.ReleaseInstance( context, instance );
        }
        catch
        {
            // log
        }
        finally
        {
            if( provider != null )
            {
                if( instance != null ) { instanceProvider.ReleaseInstance( context, instance ); }
            }
        }
    }
} 
```

# google-analytics - 谷歌分析：有没有办法重新跟踪浏览量

> ID：16062796
> 
> 赞同：1
> 
> 时间：2013-04-17T14:29:50.730
> 
> 标签：google-analytics, analytics

我有一种情况`_trackPageview`会被调用。然后，**之后**我有一个`_customVar`人口。

有没有办法在不做另一个`_trackPageview`或`_trackEvent`. 我们不希望重复的页面浏览量，也不希望干扰现有的基于事件的报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:51:18.157

没有。你需要发送某种命中。通常最好使用非交互式的虚拟事件触发。

```
_gaq.push(['_setCustomVar', 1, 'name', 'val', 1]);
_gaq.push(['_trackEvent', 'CV', 'set', '', 0, true]); //non interactive event 
```

您还可以使用其他点击类型，例如[社交](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSocial)或[计时](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingTiming)事件。这将使它不会出现在事件报告中，如果您不使用社交或时间报告，它可能会很好。但我建议坚持正常的事件，并从报告中忽略它。

# android - 如何从 Web 服务获取文本输出到文本视图

> ID：16062798
> 
> 赞同：1
> 
> 时间：2013-04-17T14:29:54.950
> 
> 标签：android, mobile, textview

我有一个移动应用程序，用于搜索连接到 Web 服务的定义。当前输出以吐司弹出的形式出现，但我希望它出现在文本视图中以使其看起来更好、更具可读性。

```
public class Definition extends Activity {

Button btnSend, btnSaveFave, btnReturn;
EditText enterDefinition;
//String wordRecieved;

private InputStream OpenHttpConnection(String urlString) 
        throws IOException
        {
            InputStream in = null;
            int response = -1;

            URL url = new URL(urlString); 
            URLConnection conn = url.openConnection();

            if (!(conn instanceof HttpURLConnection))                     
                throw new IOException("Not an HTTP connection");        
            try{
                HttpURLConnection httpConn = (HttpURLConnection) conn;
                httpConn.setAllowUserInteraction(false);
                httpConn.setInstanceFollowRedirects(true);
                httpConn.setRequestMethod("GET");
                httpConn.connect();
                response = httpConn.getResponseCode();                 
                if (response == HttpURLConnection.HTTP_OK) {
                    in = httpConn.getInputStream();                                 
                }                     
            }
            catch (Exception ex)
            {
                Log.d("Networking", ex.getLocalizedMessage());
                throw new IOException("Error connecting");
            }
            return in;     
        }

private String WordDefinition(String word) { 
InputStream in = null;
String strDefinition = "";
//wordRecieved = word;
try {
    in = OpenHttpConnection(
    "http://services.aonaware.com/DictService/DictService.asmx/Define?word=" + word);
    Document doc = null;
    DocumentBuilderFactory dbf = 
        DocumentBuilderFactory.newInstance();
    DocumentBuilder db;            
    try {
        db = dbf.newDocumentBuilder();
        doc = db.parse(in);
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }            
    doc.getDocumentElement().normalize(); 

    //---retrieve all the <Definition> elements---
    NodeList definitionElements = 
        doc.getElementsByTagName("Definition"); 

    //---iterate through each <Definition> elements---
    for (int i = 0; i < definitionElements.getLength(); i++) { 
        Node itemNode = definitionElements.item(i); 
        if (itemNode.getNodeType() == Node.ELEMENT_NODE) 
        {            
            //---convert the Definition node into an Element---
            Element definitionElement = (Element) itemNode;

            //---get all the <WordDefinition> elements under 
            // the <Definition> element---
            NodeList wordDefinitionElements = 
                (definitionElement).getElementsByTagName(
                "WordDefinition");

            strDefinition = "";
            //---iterate through each <WordDefinition> elements---
            for (int j = 0; j < wordDefinitionElements.getLength(); j++) {                    
                //---convert a <WordDefinition> node into an Element---
                Element wordDefinitionElement = 
                    (Element) wordDefinitionElements.item(j);

                //---get all the child nodes under the 
                // <WordDefinition> element---
                NodeList textNodes = 
                    ((Node) wordDefinitionElement).getChildNodes();

                strDefinition += 
                    ((Node) textNodes.item(0)).getNodeValue() + ". \n";    
            }

        } 
    }
} catch (IOException e1) {
    Log.d("NetworkingActivity", e1.getLocalizedMessage());
}   
//---return the definitions of the word---
return strDefinition;
}

private class AccessWebServiceTask extends AsyncTask<String, Void, String> {
protected String doInBackground(String... urls) {
    return WordDefinition(urls[0]);
}

protected void onPostExecute(String result) 
{
            //I think the this is where the output problem is however im unsure
    //enterDefinition.setText(result);
    Toast.makeText(getBaseContext(), result, Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:47:36.537

希望对你有帮助。。

```
 public class Definition extends Activity {
          TextView textView;

          @Overide
          public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.xyz);
          textView = (TextView) findViewById(R.id.abc);
          } 
```

现在只需调用`textView.setText(result)`post Execute 即可。

# asp.net - asp.net中gridview中的Excel数据表？

> ID：16062799
> 
> 赞同：1
> 
> 时间：2013-04-17T14:29:55.553
> 
> 标签：asp.net

无论如何我们可以在 GridView 中显示 excel 可编辑数据表（而不是导出）？因此用户可以即时编辑它们。任何 3rd 方控件也适用于此选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:41:11.750

我认为[Aspose Cells](http://www.aspose.com/.net/excel-component.aspx)组件正是您正在寻找的。否则，使用 Skydrive 或其他服务也是一种选择，如果这对您有用的话。

# c# - 创建新文件错误

> ID：16062800
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:29:56.213
> 
> 标签：c#

当我尝试创建存储在服务器中的临时文件时，我得到

> System.IO.IOException：该进程无法访问该文件，因为它正被另一个进程使用。

要创建文件，我使用以下代码

```
public override void SaveAs(string filename)
{
    using (var file = File.Open(filename, FileMode.CreateNew))
    stream.CopyTo(file);
} 
```

我已经搜索过，我得到的解决方案是在读取文件时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:50:33.080

如果您需要唯一的文件名，我建议您使用[Path.GetTempFileName 方法](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)

```
public override string SaveStreamInTempFile()
{
    string tempFileName = Path.GetTempFileName();
    using (var file = File.Open(tempFileName, FileMode.CreateNew))
    stream.CopyTo(file);

    return tempFileName;
} 
```

# c++ - excev() 帮助：我可以使用“./program”吗？

> ID：16062803
> 
> 赞同：1
> 
> 时间：2013-04-17T14:30:06.007
> 
> 标签：c++, linux, exec

我一直在尝试使用 excev 来启动我制作的程序。我需要说一些类似的东西`execv("./myprogram");`。但是，这是行不通的。我试过了`execv("myprogram");`。帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:33:08.680

```
const char *path = "./myprogram";
const char *arg0 = path;

if (execl(path, arg0, (char *) NULL) == -1) {
    perror("execl");
} 
```

试试看。第一个参数是程序名称，其余是命令行参数。第一个命令行参数通常是程序的名称（`$0`在 shell 脚本中）。因此，您实际上将程序名称传递了两次。参数列表的结尾用 表示`(char *) NULL`。

如果这不起作用，请确保当前目录正确。

# python - numpy cov（协方差）函数，它到底计算什么？

> ID：16062804
> 
> 赞同：7
> 
> 时间：2013-04-17T14:30:05.877
> 
> 标签：python, numpy, statistics, scipy

我假设`numpy.cov(X)`将样本协方差矩阵计算为：

```
1/(N-1) * Sum (x_i - m)(x_i - m)^T (where m is the mean) 
```

即外部产品的总和。但在文档中没有任何地方真正这么说，它只是说“估计协方差矩阵”。

谁能确认这是否是它在内部所做的？（我知道我可以用参数改变前面的常数`bias`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:47:25.097

正如您所看到的[source](https://github.com/numpy/numpy/blob/v1.7.0/numpy/lib/function_base.py#L1947)，在最简单的情况下，没有掩码，并且每个`N`变量都有`M`样本，它返回`(N, N)`计算为的协方差矩阵：

```
(x-m) * (x-m).T.conj() / (N - 1) 
```

其中`*`代表矩阵乘积^([1])

大致实现为：

```
X -= X.mean(axis=0)
N = X.shape[1]

fact = float(N - 1)

return dot(X, X.T.conj()) / fact 
```

如果您想查看源代码，[请查看此处](https://github.com/numpy/numpy/blob/v1.7.0/numpy/lib/function_base.py#L1947)而不是 E 先生的链接，除非您对屏蔽数组感兴趣。正如您所提到[的，文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html)不是很好。

^([1])在这种情况下是有效的（但不完全是）外积，因为`(x-m)`具有`N`长度的列向量，`M`因此`(x-m).T`是尽可能多的行向量。最终结果是所有外部产品的总和。如果顺序颠倒，同样`*`会给出内部（标量）产品。但是，从技术上讲，这些都只是标准矩阵乘法，真正的外积只是列向量与行向量的乘积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:44:54.523

是的，这就是`numpy.cov`计算。FWIW，我已经将输出`numpy.cov`与显式迭代样本（如您提供的伪代码）进行了比较，以比较性能，并且结果输出数组的差异是由于浮点精度所期望的。

# asp.net - 表单认证 - Cookie 重放攻击 - 保护

> ID：16062808
> 
> 赞同：7
> 
> 时间：2013-04-17T14:30:14.637
> 
> 标签：asp.net, security

有人问我关于 ASP.NET 网站表单身份验证的 cookie 重放攻击。

我已遵循以下建议来防止任何攻击，但我认为如果有人设法获取 cookie（尽管时间很短），该网站仍然容易受到攻击。有没有办法在注销时完全销毁表单身份验证会话，这样即使有人窃取了 cookie，也没有机会恶意使用它

遵循的建议是

我们相信我们已经采取了所有负责任的措施来在 ASP.NET 范围内防止这种情况发生。请看下面的详细回复。

但是，我们已经实施了 Microsoft 推荐的步骤来防御这种情况（请参阅[http://support.microsoft.com/default.aspx?scid=kb;en-us;900111](http://support.microsoft.com/default.aspx?scid=kb;en-us;900111)）

· 身份验证 cookie 永远不会写入客户端计算机，因此很难窃取。

· 应用程序可通过 SSL 运行，因此绝不会通过非安全连接发出 cookie

· 我们强制使用 15 分钟超时的绝对过期时间，这意味着任何问题 cookie 在该时间限制之后都将无用

· 我们使用 httpOnly cookie，这样任何人都无法以编程方式拦截或更改此 cookie。

因此，即使上述预防措施被打破（我们认为这种可能性很小），恶意用户也只有 15 分钟的时间来打破预防措施并成功登录

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:01:21.363

一个简单的想法是生成一个随机 guid 并将其存储在 cookie 的用户数据部分。然后，当用户注销时，您从用户数据中检索 guid 并将其写入服务器端存储库，并带有此“会话”已结束的注释。

然后，有一个 http 模块检查每个请求是否来自 cookie 的 userdata 部分的 guid 没有指向已结束的会话。如果是，则终止请求并发出警告说已重复使用过期的 cookie。

这会带来每个请求的额外查找成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:38:37.860

> 有没有办法在注销时完全销毁表单身份验证会话，这样即使有人窃取了 cookie，也没有机会恶意使用它

方法是在您的服务器上跟踪用户已注销以及何时注销，因此即使它会使用有效的经过身份验证的 cookie 查看页面，您也要仔细检查该用户是否也登录了您的服务器记录。

这意味着您必须在数据库上有一个额外的表来保存和检查您的用户状态的登录注销，而不是 100% 依靠身份验证 cookie。

> 有没有办法在注销时完全销毁表单身份验证会话

在 cookie 被盗的最坏情况下，您实际上不能。

为什么会这样，因为表单身份验证实际上是在 cookie 上保留所有数据（例如何时过期、用户是谁等）。因此，您不能删除它，它位于 cookie 上，另一种方法是将其与服务器上的自定义数据同步，并具有额外的安全级别。

相关：[一些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-07T19:26:48.110

您可以轻松地使“早于 X 日期”的表单身份验证票无效。

A`FormsAuthenticationTicket`有一个名为的内置属性`IssueDate`，可让您执行此操作。

例如，您可以这样做：

1.  在用户的数据库记录中存储一个日期，你可以命名它`ValidSince`
2.  读取里面的令牌日期`Application_AcquireRequestState`（在 global.asax 中）
3.  如果令牌的`IssueDate`日期早于数据库日期 - 注销！

当您想使特定用户无效时 - 只需将数据库中的该日期重置为当前日期。

如果您需要一些实际的代码示例，我在[这里](https://www.jitbit.com/alexblog/282-invalidating-aspnet-forms-authentication-tickets-server-side/)写了博客。

一个非常常见的用例是“使上次更改密码之前创建的所有会话无效”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-19T21:54:28.703

我实现了一个系统，该系统在第一个经过身份验证的请求上将 SessionID 存储在 auth cookie 中，然后验证活动 SessionID 与后续请求中的 cookie 匹配。 [有关此答案的详细信息。](https://stackoverflow.com/a/48873966/391994) 这避免了@WiktorZychla 的回答中建议的服务器端跟踪。

这可以通过在会话和身份验证 cookie 中存储传入 IP + Request.Browser + SessionID 的哈希值来改进，而不仅仅是 SessionID。

# plugins - 在命令行中使用 -T .cfg 时 Nagios 服务返回 null

> ID：16062813
> 
> 赞同：0
> 
> 时间：2013-04-17T14:30:22.917
> 
> 标签：plugins, monitoring, nagios

我目前正在学习如何制作脚本来为 Nagios 框架创建插件。对于一些默认选项，我们有一个带有 .cfg 文件的脚本。

所以我们添加了一个服务并定义了一个命令。对于命令，我们编写了以下内容

```
command-line      filepath -T file.cfg 
```

文件路径是脚本的目标，.cfg 是它的模板。如果没有 -T file.cfg 选项，它可以工作并返回在我们的脚本中硬编码的选项作为状态信息。我们想要 .cfg 文件中的选项之一，因此我们确实需要让脚本访问它，但在添加“-T file.cfg”部分时，服务返回的状态信息（空）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:58:43.697

解决了，

我们还必须定义配置路径的路径

```
filepath/file.cfg 
```

# html - html - 如何使图像停留在背景的某些部分

> ID：16062819
> 
> 赞同：0
> 
> 时间：2013-04-17T14:30:34.413
> 
> 标签：html, css, image, background

我有一个背景图像，CSS 中的大小被覆盖，因此它会随着浏览器窗口大小的调整而调整大小。但是当我放置图像时，如何定位它们以便它们根据背景留在某个位置？我尝试使用 left:...px 和 top:...px 并且我知道为什么这不起作用，因为当我调整窗口大小时，它会停留在远离左侧和顶部的那个位置，但是解决方案是什么? 我希望图像根据窗口/背景的大小按比例调整大小并保持在背景的某个位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:39:31.963

使用带有 %'s 的绝对定位

**HTML：**

```
<div id="foo"></div> 
```

**CSS：**

```
#foo{
    position:absolute;
    top:10%;
    left:20%;
} 
```

对于位置，您可以根据最适合的套件使用绝对、固定或相对。

固定：相对于浏览器窗口；

相对：相对于自然位置

绝对：相对于第一个定位的祖先

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-09T13:40:37.213

如果您希望调整背景图像的大小但将特定元素保持在相同的垂直位置，一种方法是在 background-position 属性中使用 calc() 函数，并将 background-size 设置为 100%。

例如：

```
background-image: url('your image');
background-position: top calc(200px - 20vw) right;
background-attachment: fixed;
background-size: 100%;
background-repeat: no-repeat; 
```

随着图像的扩展，图像内部要保持在相同垂直位置的元素自然会变大并向下移动。计算中的负视口值补偿了这种垂直向下移动，而第一个值设置了元素的垂直位置。调整 calc() 函数中的值，直到您对结果满意为止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:49:19.093

我不太了解您的问题（也许您应该尝试放置一些代码或创建一个 jsfiddle）。

但是我认为你应该看看 css3 [background-size](http://www.w3schools.com/cssref/css3_pr_background-size.asp)属性。

我想[这个来自 W3C 的样本](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_background-size2)就是你需要的。

# c# - 如何在 listBox 中显示多个本地数据库项？

> ID：16062820
> 
> 赞同：0
> 
> 时间：2013-04-17T14:30:37.403
> 
> 标签：c#, database, textbox, listbox

我是编程新手，我的问题是我试图在列表框中显示多个项目，而这些项目来自本地数据库。我在本地数据库中有一个表用户，其中包含列 ID、名字、姓氏、电子邮件和地址。

我已经将 listBox 与我的本地 dababase 表“Users”绑定了，这就是我目前得到的：

```
private void button_ShowItems_Click(object sender, EventArgs e)
    {
        var dt = new DataTable();

        string connectionString = @"Data Source=MyDatabase;Password=xxxxxx;";

        using (var cn = new SqlCeConnection(connectionString))
        using (var cmd = new SqlCeCommand("Select * From Users", cn))
        {
            cn.Open();

            using (var reader = cmd.ExecuteReader())
            {
                dt.Load(reader);
                listBox_Users.DataSource = dt;
                listBox_users.DisplayMember = "Firstname" + "Lastname";
                listBox_Users.ValueMember = "ID";
            }
        }
    } 
```

当我按下按钮时，它只显示“名字”而不是“姓氏”。

我得到了一个带有文本框的表单，可以将数据输入到本地数据库“用户”中，并且可以正常工作：

```
private void button_add_Click(object sender, EventArgs e)
{
var insertSQL = "INSERT INTO Inimesed (Firstname, Lastname, Email, Address) VALUES (Firstname, Lastname, Email, Address)";

string connectionString = @"Data Source=myDatabase;Password=xxxxxx;";
using (var cn = new SqlCeConnection(connectionString))
using (var cmd = new SqlCeCommand(insertSQL, cn))
    {
         cn.Open();

        cmd.Parameters.Add("@Firstname", SqlDbType.NVarChar);
        cmd.Parameters.Add("@Lastname", SqlDbType.NVarChar);
        cmd.Parameters.Add("@Email", SqlDbType.NVarChar);
        cmd.Parameters.Add("@Address", SqlDbType.NVarChar);

        cmd.Parameters["Firstname"].Value = textBox1_Firstname.Text;
        cmd.Parameters["Lastname"].Value = textBox2_Lastname.Text;
        cmd.Parameters["Email"].Value = textBox3_Email.Text;
        cmd.Parameters["Address"].Value = textBox4_Address.Text;
        cmd.ExecuteNonQuery();

    } 
```

}

* * *

如果有人知道，我还有一个后续问题：我需要做什么才能使用“名字”+“姓氏”将选定的列表框值添加回文本框中？

有大量关于“如何在 C# 中将文本框项目添加到本地数据库”的教程，但没有“如何将本地数据库项目添加到文本框”的教程。我得到了所有定义的值。我应该在“foreach”命令中使用“foreach”命令、“if”命令还是“if”命令？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:33:07.040

无论出于何种原因，您都无法绑定连接 - 最好的办法是使用 Linq 创建一个包含连接本身的匿名类型 - 见下文。

```
var results = (from row in dt.AsEnumerable()
               select new  
               {
                   UserID = row.Field<int>("UserPK"), 
                   FirstName = row.Field<string>("FirstName"), 
                   LastName = row.Field<string>("LastName"), 
                   FullName = row.Field<string>("FirstName") + " " + row.Field<string>("LastName") 
               }).ToList();

listBox1.DataSource = results;
listBox1.DisplayMember = "FullName";
listBox1.ValueMember = "UserID"; 
```

瞧，正确显示全名。

# winforms - Xtragrid 排序似乎没有被可靠地删除

> ID：16062822
> 
> 赞同：2
> 
> 时间：2013-04-17T14:30:39.277
> 
> 标签：winforms, devexpress, xtragrid

我在 Winforms 上有一个 DevExpress Xtragrid，即使在用户编辑单元格时，我也希望保持相同的排序顺序。我的问题是，即使在清除了所有排序之后（通过 ctrl 单击列标题），有时行仍然会像动态排序一样跳来跳去。我想知道是否有人知道为什么会发生这种情况。

# c++ - 调用后缺少函数值

> ID：16062823
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:30:39.497
> 
> 标签：c++

我正在为一个班级做一个项目。该代码根据从文件中读取的数据计算运费。我遇到的问题是在计算中。从音量函数传递的值保持为零。我认为我没有正确传递它。此外，不需要使用全局变量——尤其是使用计算函数——使用参数是我从教授那里得到的最后反馈。

这是代码：

```
#include <iostream> 
#include <iomanip> 
#include <cmath> 
#include <fstream> 

using namespace std;  

void header(int lab_number, char lab_part)
{ 
    cout << "Kevin Schultz\n"; 
    cout << "Lab" << lab_number << lab_part << endl << endl; 
} 

double length, width, height, x, weight, total = 0, shipping_cost, volume;

int main () 
{ 
    double calculate(double length, double width, double height);
    double volume;
    double chargeAmount;
    double charge(ifstream & inFile, ofstream & prt);

    ifstream inFile; 
    ofstream prt("lab7new_out.txt"); 

    header(7, 'A'); 
    prt << "        S & S Global Services\n";
    prt << "    Shipping Cost Analysis Report\n\n"; 
    prt << "Length Width Height Weight Shipping\n"; 
    prt << "                             Cost\n\n"; 

    inFile.open("c:\\lab7\\pkg.txt"); 
        if (!inFile) 
        cout << "Error opening the file\n"; 

    inFile >> length; 
    inFile >> width; 
    inFile >> height; 
    inFile >> weight; 

    volume = calculate(length, width, height);      
    chargeAmount = charge(inFile, prt);

    prt << "------------------------------------" << endl;
    prt << "\nTotal cost: $" << total; 

    system("pause"); 
    return 0; 

} 

double calculate(double length, double width, double height)
        { 
            double volume; 
            volume = length * width * height; 
            return volume; 
        } 

double charge(ifstream & inFile, ofstream & prt) 
        {
            const double basic_charge = 12;
            const double Vsurcharge = 5;
            const double Dsurcharge = 4;
            const double Wsurcharge = 2;
            double netWeight = 0;

            while (!inFile.eof())  
            { 
                shipping_cost = basic_charge; 

                if (volume > 7)  
                    shipping_cost += Vsurcharge; 
                if (length > 3 || width > 3 || height > 3) 
                    shipping_cost += Dsurcharge; 
                if (weight > 50) 
                {
                    netWeight = weight - 50;
                    shipping_cost += netWeight * Wsurcharge; 
                }
                total += shipping_cost; 
                prt << setw(4) << right << setprecision(1) << length << setw(6) << right << setprecision(1) << width << setw(6) << right << setprecision(1) << height << setw(8) << right; 
                prt << weight << setw(5) << right << setprecision(2) << fixed << "$" << shipping_cost << endl; 

                inFile >> length; 
                inFile >> width; 
                inFile >> height; 
                inFile >> weight; 
            }
             return total;
        } 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:01:28.517

正如您的教授所说，请不要使用全局变量。在您的代码中，您有不同的变量`volume`，我怀疑您是否知道何时访问哪些变量。让我们浏览一下您的代码：

```
 double volume;    // global variable, never written, read in function charge

 int main() {
    ...
    double volume; // local variable, only visible in function main, but never used
    ...
 }

 double calculate(double length, double width, double height) {
    double volume; // local variable, only visible in calculate
    volume = ...;
    return volume;
 }

 double charge(ifstream & inFile, ofstream & prt) {
    ...
    if(volume > 7) // no local variable volume defined, so using global variable volume
    ...
 } 
```

此外，您声明了一个函数计算，但您从不调用它。

请考虑启用尽可能多的编译器警告。它将帮助您找到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:48:47.333

尝试这样的事情。问题是你需要在调用它之前声明你的函数原型，但是如果你把你的主函数放在你的 .c 文件的底部，你就不需要贴花原型函数，希望它很清楚

```
#include <iostream> 
#include <iomanip> 
#include <cmath> 
#include <fstream> 

using namespace std;  

void header(int lab_number, char lab_part)
{ 
    cout << "Kevin Schultz\n"; 
    cout << "Lab" << lab_number << lab_part << endl << endl; 
} 

double length, width, height, x, weight, total = 0, shipping_cost, volume;

double calculate(double length, double width, double height)
{ 
    double volume; 
    volume = length * width * height; 
    return volume; 
} 

double charge(ifstream & inFile, ofstream & prt) 
{
            const double basic_charge = 12;
            const double Vsurcharge = 5;
            const double Dsurcharge = 4;
            const double Wsurcharge = 2;
            double netWeight = 0;

            while (!inFile.eof())  
            { 
                shipping_cost = basic_charge; 

                if (volume > 7)  
                    shipping_cost += Vsurcharge; 
                if (length > 3 || width > 3 || height > 3) 
                    shipping_cost += Dsurcharge; 
                if (weight > 50) 
                {
                    netWeight = weight - 50;
                    shipping_cost += netWeight * Wsurcharge; 
                }
                total += shipping_cost; 
                prt << setw(4) << right << setprecision(1) << length << setw(6) << right << setprecision(1) << width << setw(6) << right << setprecision(1) << height << setw(8) << right; 
                prt << weight << setw(5) << right << setprecision(2) << fixed << "$" << shipping_cost << endl; 

                inFile >> length; 
                inFile >> width; 
                inFile >> height; 
                inFile >> weight; 
            }
     return total;
}

int main () 
{ 

    double volume = calculate(length, width, height);
    double chargeAmount;

    ifstream inFile; 
    ofstream prt("lab7new_out.txt"); 

    header(7, 'A'); 
    prt << "        S & S Global Services\n";
    prt << "    Shipping Cost Analysis Report\n\n"; 
    prt << "Length Width Height Weight Shipping\n"; 
    prt << "                             Cost\n\n"; 

    inFile.open("c:\\lab7\\pkg.txt"); 
        if (!inFile) 
        cout << "Error opening the file\n"; 

    inFile >> length; 
    inFile >> width; 
    inFile >> height; 
    inFile >> weight; 

    chargeAmount = charge(inFile, prt);

    prt << "------------------------------------" << endl;
    prt << "\nTotal cost: $" << total; 

    system("pause"); 
    return 0; 

} 
```

# php - 将 stdClass 类的对象转换为 JSON 对象

> ID：16062824
> 
> 赞同：17
> 
> 时间：2013-04-17T14:30:41.137
> 
> 标签：php, javascript, json, object, converter

这是我的 php 文件中的内容：

```
$session = $m->session; 
```

$session 现在是：

```
object(stdClass)[31]
  public 'id' => string '21112' (length=5)
  public 'external_id' => string '' (length=0)
  public 'sessiongroupid' => string '1843' (length=4)
  public 'eventid' => string '5588' (length=4)
  public 'order' => string '0' (length=1)
  public 'name' => string 'Ferdau Conference' (length=17)
  public 'description' => string 'Ferdau Conference' (length=17)
  public 'starttime' => string '2013-04-18 18:00:00' (length=19)
  public 'endtime' => string '2013-04-18 18:04:00' (length=19)
  public 'speaker' => string '' (length=0)
  public 'location' => string 'Waregem' (length=7)
  public 'mapid' => string '0' (length=1)
  public 'xpos' => string '0.000000' (length=8)
  public 'ypos' => string '0.000000' (length=8)
  public 'maptype' => string 'plan' (length=4)
  public 'imageurl' => string '' (length=0)
  public 'presentation' => string '' (length=0)
  public 'organizer' => string '0' (length=1)
  public 'twitter' => string '' (length=0)
  public 'allowAddToFavorites' => string '0' (length=1)
  public 'allowAddToAgenda' => string '0' (length=1)
  public 'votes' => string '0' (length=1)
  public 'url' => string 'http://ferdau.be' (length=16)
  public 'venueid' => string '0' (length=1) 
```

我想将所有信息发送到我的 javascript 文件中名为 save 的函数。像这样：

```
echo '<a onclick="save('.$session.')" style="cursor:pointer;" class="metacell">
                        <img src="'.buildUri("images/icons/favorite.png").'" width="16" />
                        <span>Add to favorites</span>
                    </a>'; 
```

当我尝试这个时，我总是得到一个错误，只能发送一个字符串。如何将此对象转换为可以发送到我的 javascript 函数的对象？

我试过这个没有结果：`$data = json_encode($session);`

当我做`$data = json_encode((array)$session)`

我明白了：

```
<a class="metacell" style="cursor:pointer;" ferdau.be","venueid":"0"})"="" \="" 18:04:00","speaker":"","location":"waregem","mapid":"0","xpos":"0.000000","ypos":"0.000000","maptype":"plan","imageurl":"","presentation":"","organizer":"0","twitter":"","allowaddtofavorites":"0","allowaddtoagenda":"0","votes":"0","url":"http:\="" 18:00:00","endtime":"2013-04-18="" conference","starttime":"2013-04-18="" conference","description":"ferdau="" id":"21112","external_id":"","sessiongroupid":"1843","eventid":"5588","order":"0","name":"ferdau="" onclick="save({"> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-17T14:50:31.673

`$data = json_encode((array)$session);`是正确的方法。

我猜你显示的 html 就是你在 firebug/chrome 开发工具/IE 开发工具中看到的。这就是浏览器尝试呈现它之后的样子。尝试查看原始源代码以查看输出的实际样子。您此时的问题是由双引号`json_encode`引起的，导致浏览器引擎认为`onclick`属性在`$data`.

您将需要在 HTML 中混合使用转义双引号和/或使用单引号。我会从单引号开始，因为这样会更简单。但是您还必须确保其中的任何值都不`$data`包含未转义的单引号（因为这会导致同样的问题）。

# mysql - 将两列合并为一列

> ID：16062825
> 
> 赞同：7
> 
> 时间：2013-04-17T14:30:42.573
> 
> 标签：mysql, sql

我有第 1 列和第 2 列，并希望将它们合并到同一张表的第 3 列中。如果第 2 列为空，则显示第 1 列值，如果第 1 列为空，则显示第 2 列数据。如果两者都为null，则显示null。我尝试了两件事：

1）使用 CONCAT `SELECT CONCAT(Column1, Column2) AS Column3 FROM TEST_ATTRIBUTES`。

只有当它们都不为空时，它才会合并列。否则它只会打印空值。

2）使用（第1列+第2列）。

`SELECT (Column1 + Column2) AS Column3 FROM TEST_ATTRIBUTES`.

不显示所需的输出。

我正在用java编写这段代码。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T14:31:49.750

使用`COALESCE()`，这不会连接，而是返回列表中的第一个非空值。

```
SELECT Column1, 
       Column2, 
       COALESCE(Column1, Column2) AS Column3 
FROM   TEST_ATTRIBUTES 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/01885/2)

如果有可能它们都为空，

```
SELECT Column1, 
       Column2, 
       IF(Column1 IS NULL AND Column2 IS NULL, NULL, CONCAT(COALESCE(Column1,''), COALESCE(Column2,''))) AS Column3 
FROM   TEST_ATTRIBUTES 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/01885/1)

# sql - 数据库审计跟踪和重建以前的结果

> ID：16062832
> 
> 赞同：1
> 
> 时间：2013-04-17T14:30:53.900
> 
> 标签：sql, database, database-design

我有一个存储业务联系人和相关信息的表。

目前，每天都会将所有联系人的副本保存在表格中。表结构如下所示：

```
Date        CompanyName          Description      Address        Industry
20130416    Alpha Corp           bla bla bal      6100 main st.  Finicial 

20130417    Alpha Corp           bla bla bal      6100 main st.  Finicial 
20130417    Beta Corp            bla bla bal      6500 main st.  Consumer

20130418    Alpha Corp           bla bla bal      6120 main st.  Finicial 
20130418    Beta Corp            bla bla bal      6500 main st.  Consumer 
```

这说明了添加 20130417 "Beta Corp" 和修改 20130418 "Alpa corp" 时会发生什么。

我想将其更改为具有审计跟踪功能。目前我想到的是一个存储所有当前条目的表（引入新字段 CompanyID int auto-intrement）

```
CompanyID CompanyName Description Address Industry 
```

还有一张表来存储所有的历史变化

```
CompanyID CompanyName Description Address Industry ChangeTime Action User 
```

大多数查询将是从今天开始获取联系人列表，这在新架构下将很容易，但我仍然希望能够执行诸如“获取截至 20130416 的联系人列表”之类的查询，这应该返回 1 行。而且通过当前条目和更改日志来构建历史数据感觉相当肮脏。

在类似的情况下你会怎么做？和推理？

最好的，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:49:19.020

审计跟踪通常可以识别谁更改了什么。您正在寻找完全不同的东西。您希望您的数据库能够回答诸如`select * from table_name where (data appears as it did on 2013-01-15);`.

据我所知，Richard Snodgrass 发表了最早使用 SQL 解决此类问题的综合著作。他将面向时间的数据库（和表）分为这些类别。

*   有效时间表：这些时间表捕捉了“不断变化的现实的历史”。
*   事务时间表：它们捕获“变化表的状态序列”。
*   双时态表：这些实现了有效时间和事务时间表。

我认为您正在寻找双时态表。

他的《[用 SQL 开发面向时间的数据库应用程序》](https://www.cs.arizona.edu/~rts/tdbbook.pdf)一书可从他在亚利桑那大学的教师网页上以 PDF 格式下载。因为它是免费的，所以在你把自己挖到一个洞之前，没有理由不浏览它。仔细阅读代码以了解完整性约束。（弄错了，你的数据库几乎一文不值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:41:08.980

我使用过必须维护审计历史的数据库。为此，有一个名为“Timeframe ID”的字段。如果此字段的值为 -1，则表示该记录是过去的。如果为 0，则记录是当前的。在某些情况下，它会是 1，表示它是未来的记录（这种情况很少见）。

这些表还有一个“修改”日期字段。因此，如果用户进行更新，您只需将当前 Timeframe 0 记录更新为 -1 并插入一个包含修改后数据的新行。通过这种方式，您可以知道谁更改了什么以及何时更改。或者，在您每天更新数据的情况下，修改日期将是加载记录的日期。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:52:27.397

我认为你在正确的轨道上约翰尼。我的建议是像您建议的那样拆分表格。

Travis 的解决方案可能工作正常，但考虑到历史快照会随着时间的推移变得非常大。如果将它们分开，当天的查询将运行得很快。如果你把它们放在一起，随着时间的推移，查询自然会变得越来越慢（当然可能需要一段时间才能注意到）。

Travis 提出的将修订 ID 与公司 ID 配对的想法很好。过去我将其称为“快照”ID。我在表中有一个快照 ID，然后是另一个包含我可以加入的快照详细信息的表。

例如：

公司表：

```
CompanyID, CompanyName, Description, Address, Industry
```

公司历史表（其中 Snapshot ID 和 Company ID 代表您的密钥）：

```
SnapshotID, CompanyID, CompanyName, Description, Address, Industry
```

快照表：

```
SnapshotID, CreateDate, CreateDateTime
```

我强烈考虑将创建快照的时间归零，以使查询更容易一些。如果它们真的只代表一天，那么时间就会变得烦人。您仍然可以存储它以查看它的实际完成时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:22:55.867

有些事情要考虑。首先，审计的目的是什么？审计不同于维护面向时间的数据。如果您正在审核，您将需要能够撤消更改的信息。因此，保存旧数据很重要，但保存更改发生的日期以及更改的人员或应用程序也很重要。这样，如果您在周三和周五发布应用程序的新版本，则会发现一个错误，它改变了很多不应该改变的东西；您确切地知道该应用程序从周三到周五更改了哪些记录，并且可以轻松修复不良变化。真正的审计应该总是通过触发器而不是应用程序来处理。

历史数据不同，你这样做是因为你需要知道某事在某个时间点的状态。例如，在订单详细信息表中，您可能希望存储订单时商品的价格，而不是一年后查询记录时的价格。在这种情况下，您可以将所有内容存储在一个表中，如果您有一个大型数据库分区，则按时间进行分区。这涉及在每次数据更改时将应用程序放入一个新行中。如果您这样做，您可能希望创建一个仅显示当前记录的视图。事实上，我会更改表的名称并使用您当前的表名创建视图，以避免破坏任何现有代码。这将帮助您避免在针对此表编写新代码时忘记输入仅获取活动数据的限定符。

或者您可以做两个表，其中旧值通过触发器移动（甚至不要考虑通过应用程序进行移动，为此必须处理任何可能的表更改，并且触发器是确保发生这种情况的唯一地方) 当数据发生变化时。如果您这样做，那么您可能希望创建一个将两个表联合在一起的视图，以便您可以查询所有数据。

# jquery - jqGrid中未格式化的行数据

> ID：16062837
> 
> 赞同：3
> 
> 时间：2013-04-17T14:31:08.367
> 
> 标签：jquery, jqgrid

在[这个问题](https://stackoverflow.com/questions/3758915/jquery-and-jqgrid-retrieve-data-from-row)中，Oleg 描述了如何从 jqGrid 的行 ID 中检索行数据。

在我的代码中，我想在 subGridRowExpanded 中显示有关一行的更多数据：

```
standardGrid.subGridRowExpanded = function (subgridId, rowId) {
    var dataFromTheRow = jQuery('#CompanyGrid').jqGrid('getRowData', rowId);
    var html = '<span style="padding-left:80px">' + dataFromTheRow.CompanyName + ' ' + 
        dataFromTheRow.StatusDesc + '</span>';
    $("#" + subgridId).html(html);
} 
```

我的主网格列之一有一个自定义格式化程序，它返回格式化为链接的数据：

```
var colModel = [
    { name: 'CompanyID', label: 'Id', width: 30, align: "right" },
    { name: 'CompanyName', label: 'Company Name', search: true, formatter: CompanyLink },
    ... 
```

和

```
function CompanyLink(cellValue, options, rowdata, action) {
    return '<a href="CompanyProfile.aspx?CompanyId=' + rowdata.CompanyID + '">' + 
            rowdata.CompanyName + '</a>';
} 
```

当我使用上述答案检索数据时，它会以我的子网格格式、锚点和所有格式显示。我希望它只返回原始数据。

所以，我尝试向 col 模型添加一个 unformat 。基于[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)代码，我添加了

```
function CompanyUnLink(cellValue, options) {
    return $(cellValue).text();
} 
```

并将 CompanyName 行的 colModel 更改为

```
{ name: 'CompanyName', label: 'Company Name', search: true, formatter: CompanyLink, unformat: CompanyUnLink }, 
```

但是 unformat 例程传递了一个未使用锚格式化的 cellValue。

我将 unformat 更改为

```
function CompanyUnLink(cellValue, options) {
    // weird, the unformat actually passes in the raw data, and not the decorated one
    return cellValue;
} 
```

它有效。但这对我来说似乎是错误的。有没有更好或更正确的方法来做到这一点？

下面是一个完整代码的小例子：

```
<table id="datalist"></table> 
<script type="text/javascript">
function CompanyLink(cellValue, options, rowdata, action) {
    return '<a href="CompanyProfile.aspx?CompanyId=' + rowdata.CompanyID + '">' + rowdata.CompanyName + '</a>';
}

function CompanyUnLink(cellValue, options, rowdata, action) {
    // weird, the unformat actually passes in the raw data, and not the decorated one
    return cellValue;
}

$("#datalist").jqGrid({
    datatype: 'local',
    colModel: [
                { name: 'CompanyID', label: 'Id', width: 30, align: "right" },
                { name: 'CompanyName', label: 'Company Name', search: true, formatter: CompanyLink },
            ],
    caption: "SubGrid Format Test",
    subGrid: true,
    subGridRowExpanded: function (subgridId, rowId) {
        var dataFromTheRow = $('#datalist').jqGrid('getRowData', rowId);
        var html = '<span style="padding-left:10px">' + dataFromTheRow.CompanyName + ' ' + dataFromTheRow.Info + '</span>';
        $("#" + subgridId).html(html);
    }
});

var mydata = [
        { CompanyID: 1, CompanyName: "Company1", Info: "Info on Company 1" },
        { CompanyID: 2, CompanyName: "Company2", Info: "Info on Company 2" },
        { CompanyID: 3, CompanyName: "Company3", Info: "Info on Company 3" },
        { CompanyID: 4, CompanyName: "Company4", Info: "Info on Company 4" },
    ];

for (var i = 0; i <= mydata.length; i++)
    $("#datalist").jqGrid('addRowData', i + 1, mydata[i]);

</script> 
```

subGrid 行显示用锚点装饰的 CompanyName，即它不是原始行数据。

如果您更改 colModel 以调用 unformat 例程

```
 colModel: [
                { name: 'CompanyID', label: 'Id', width: 30, align: "right" },
                { name: 'CompanyName', label: 'Company Name', search: true, formatter: CompanyLink, unformat: CompanyUnLink },
            ], 
```

文本不再装饰。但是 unformat 例程的 cellValue 是未经修饰的，这让我觉得是错误的。

# sorting - 在 solr 中对文本字段进行排序

> ID：16062840
> 
> 赞同：4
> 
> 时间：2013-04-17T14:31:10.820
> 
> 标签：sorting, solr, solrcloud

我正在使用 solr 3.4 并希望在文本字段中对 solr 搜索结果进行排序。如何像 int 自然排序一样实现对文本字段的排序？

有什么方法可以在查询期间将文本字段转换为 int 吗？

我的排序字段是字符串类型，我希望它在排序时表现为 int 字段。我无法更改字段类型，因为索引大小太大且无法重新索引。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:14:07.103

不太确定，但您可以使用 abs 或任何可能将其转换为 int 值并将其用于排序的数学函数 来检查[函数查询](http://wiki.apache.org/solr/FunctionQuery)

例如`abs(some_field) desc`

否则，将该字段复制到需要重新索引的 int 类型的新字段中。

此外，排序不适用于多值和标记化的文本字段。

[文档](http://wiki.apache.org/solr/CommonQueryParameters#sort)- 可以对文档的“分数”或任何 multiValued="false" indexed="true" 字段进行排序，前提是该字段未标记化（即：没有分析器）或使用仅生成单个 Term（即：使用 KeywordTokenizer）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-31T13:12:11.550

在查询期间不可能这样做。

您必须有[额外的字段](https://lucene.apache.org/solr/guide/7_5/defining-fields.html)并将文本字段[复制](https://lucene.apache.org/solr/guide/7_5/copying-fields.html)到新的整数字段上，然后重新索引您的数据库。使用[过滤器](https://lucene.apache.org/solr/guide/7_5/charfilterfactories.html)以确保转换将起作用。

# internet-explorer - Iframe 的标签 在 IE8 中不起作用

> ID：16062841
> 
> 赞同：4
> 
> 时间：2013-04-17T14:31:12.867
> 
> 标签：internet-explorer, iframe, x-ua-compatible

我得到了 IE 的这种 HTML 结构。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head></head>
<body id="body">
    <div>
      <iframe>
         <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
         <html xmlns="http://www.w3.org/1999/xhtml">
            <head></head>
            <body> 
                <!-- Here goes some graphic content using dojo libs -->
            </body>
         <html>      
      </iframe>
    </div>
</body>
<html> 
```

当我插入两个标题（iframe html的主和标题）标签时

`<meta http-equiv="X-UA-Compatible" content="IE=8,IE=9"/>`

无论标签内的内容是什么（IE=8 或 IE=8、IE-9 或 IE=EDGE 等）

在 IE8 浏览器模式下不生成内部 iframe。但！！在 IE7 或 IE9 下工作正常

当我删除标签时 - 在所有版本的 IE 中都可以正常工作。

问题出在哪里？在 DOCTYPE 中，标签还是其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T20:05:34.023

页面根据最顶层的框架呈现（浏览器模式在开始时只设置一次，嵌套框架中的所有值都被忽略）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T09:24:16.193

通过测试我可以确认[rocky](https://stackoverflow.com/users/1332034/rocky)的答案。通过更改最顶层框架的文档类型，我能够让 IE9 呈现标准模式。我不需要发送 X-UA-Compatible 标头或元标记。

顶部的任何帧都不会改变模式，所以我的结构

```
<!doctype html>
<html lang="en">
    ...
    <iframe>
        <!DOCTYPE HTML PUBLIC "-//W3C//Dtd HTML 4.0 transitional//en">
        <html>
        ...
        <iframe>
            <!DOCTYPE html>
            ... 
```

导致所有帧的标准模式，包括正确呈现 html5 的第三个帧。

（是的，它很丑，但不幸的是，它是固定应用程序的一部分）。

# java - 使用@Mock时Mockito将Null值注入Spring bean？

> ID：16062842
> 
> 赞同：3
> 
> 时间：2013-04-17T14:31:15.233
> 
> 标签：java, spring, unit-testing, mockito

由于我是 Spring Test MVC 的新手，所以我不明白这个问题。我从 [http://markchensblog.blogspot.in/search/label/Spring获取了下面的代码](http://markchensblog.blogspot.in/search/label/Spring)

变量`mockproductService`不是从应用程序上下文注入的，它`null`在使用`@Mock`注释和获取资产错误时包含值。

我目前遇到的Assertion错误如下：

```
java.lang.AssertionError: Model attribute 'Products' expected:<[com.pointel.spring.test.Product@e1b42, com.pointel.spring.test.Product@e1f03]> but was:<[]>
    at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:60)
    at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:89)
    at org.springframework.test.web.servlet.result.ModelResultMatchers$2.match(ModelResultMatchers.java:68)
    at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:141)
    at com.pointel.spring.test.ProductControllerTest.testMethod(ProductControllerTest.java:84) 
```

注意：如果我使用`@Autowired`而不是`@Mock`它工作正常。

测试控制器类

```
RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations={"classpath:mvc-dispatcher-servlet.xml"})
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class})
public class ProductControllerTest {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

   @InjectMocks
    private ProductController productController;

    @Mock
    //@Autowired
    private ProductService mockproductService;

    @Before
    public void setup() {

    MockitoAnnotations.initMocks(this);

    List<Product> products = new ArrayList<Product>();
    Product product1 = new Product();
    product1.setId(new Long(1));

    Product product2 = new Product();
    product2.setId(new Long(2));

    products.add(product1);
    products.add(product2);

    Mockito.when(mockproductService.findAllProducts()).thenReturn(products);

    this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();

    }

    @Test
    public void testMethod() throws Exception {

    List<Product> products = new ArrayList<Product>();

    Product product1 = new Product();
    product1.setId(new Long(1));

    Product product2 = new Product();
    product2.setId(new Long(2));

    products.add(product1);
    products.add(product2);

    RequestBuilder requestBuilder = MockMvcRequestBuilders.get("/products");

    this.mockMvc.perform(requestBuilder).
        andExpect(MockMvcResultMatchers.status().isOk())
        .andExpect(MockMvcResultMatchers.model().attribute("Products", products))
           //.andExpect(MockMvcResultMatchers.model().size(2))
        .andExpect(MockMvcResultMatchers.view().name("show_products"));

    }
} 
```

控制器类

```
@Controller
public class ProductController {

    @Autowired
    private ProductService productService;

    @RequestMapping("/products")
    public String testController(ModelMap model){
        model.addAttribute("Products",productService.findAllProducts());
        return "show_products";
    }
} 
```

WebServletContext mvc-dispatcher-servlet.xml

```
<bean id="someDependencyMock" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="com.pointel.spring.test.ProductService" />
</bean>
    <context:component-scan base-package="com.pointel.spring.test" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" >     
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T21:55:16.620

对我来说，从引用的博客源中获取 Spring 和 Mockito 的组合应该如何按预期工作还不清楚。至少我可以解释一下你的观察：

*   您的测试 ( `this.mockMvc.perform()`) 正在处理 Spring 创建的 Web 应用程序上下文。在那个上下文中`ProductController`是由 Spring ( `context:component-scan`) 实例化的。然后与您在as中`productService`创建的 Mockito 模拟自动连接。`mvc-dispatcher-servlet.xml``someDependencyMock`
*   如果注入`mockproductService`via `@Autowired`，**Spring**`someDependencyMock`会从其上下文中注入实例。因此，您的呼叫在此实例上正常工作，如前所述`Mockito.when()`，该实例已正确连接到。`ProductController`
*   但是如果你注入`mockproductService`via `@Mock`，**Mockito 会**注入一个**新**实例`ProductService`，而不是 Spring 上下文之一，因为它对 Spring 一无所知。因此，您的`Mockito.when()`调用不会在 Spring 自动装配的模拟上运行，因此`someDependencyMock`保持未初始化状态。

所以我不清楚博客中的原始代码是如何工作的：

*   带有注释的`productController`属性`@InjectMocks`将由 Mockito 初始化，甚至正确连接到`mockproductService`测试类中的 。但是 Spring 对该对象一无所知，也不会在`this.mockMvc.perform()`调用中使用它。因此，我假设即使您删除了测试类中的属性和调用，如果您`mockproductService`只按预期注入测试工作。`@Autowired``productController``MockitoAnnotations.initMocks()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T22:54:21.713

我没有看过您提到的教程，因为您提供的代码足以说明原作者的专业知识或缺乏专业知识。

测试的一般规则是不要混合不同类型的测试。第一级测试是**单元测试**，这意味着您正在测试**单个工作单元**（通常是单个类）。一旦单元测试通过，您就可以编写将某些组件（类）组合在一起的**集成测试**，并测试它们如何协同工作。

一个类很少依赖任何东西，因此要创建一个真正好的单元测试，您需要**模拟它的所有依赖**项。

```
@RunWith(MockitoJUnitRunner.class)
public class ProductControllerTest {
    @Mock private ProductService mockproductService;
    @InjectMocks private ProductController productController;

    @Test
    public void testMethod() throws Exception {
        // Prepare sample test data.
        final Product product1 = Mockito.mock(Product.class);
        final Product product2 = Mockito.mock(Product.class);
        final ArrayList<Product> products = new ArrayList<Product>();
        products.add(product1);
        products.add(product2);
        final ModelMap mmap = Mockito.mock(ModelMap.class);

        // Configure the mocked objects.
        Mockito.when(product1.getId()).thenReturn(new Long(1));
        Mockito.when(product2.getId()).thenReturn(new Long(2));
        Mockito.when(mockproductService.findAllProducts()).thenReturn(products);
        final mmap = Mockito.mock(ModelMap.class);

        // Call the method under test.
        final String returned = productController.testController(mmap);

        // Check if everything went as planned.
        Mockito.verify(mmap).addAttribute("Products", products);
        assertNotNull(returned);
        assertEquals("show_products", returned);
    }
} 
```

这就是单元测试的样子。首先你准备好数据（对象）——注意它们都是模拟的。此外，使用`final`可防止意外分配，即意外覆盖现有值。

其次，您配置每个模拟对象的行为。如果`Product`将要求 a 提供 ID，那么您指定在这种情况下模拟实例将返回什么。顺便说一句，我真的看不出设置这些产品 ID 的目的，所以测试的第一部分可能如下所示：

```
 final Product product1 = Mockito.mock(Product.class);
        final Product product2 = Mockito.mock(Product.class);
        final ArrayList<Product> products = new ArrayList<Product>();
        products.add(product1);
        products.add(product2);
        final mmap = Mockito.mock(ModelMap.class);

        // Configure the mocked objects.
        Mockito.when(mockproductService.findAllProducts()).thenReturn(products);
        final mmap = Mockito.mock(ModelMap.class); 
```

第三，调用被测方法并存储其结果：

```
 final String returned = productController.testController(mmap); 
```

最后，您检查被测类是否按预期运行。在这种情况下，应该使用这些确切的参数值调用`ModelMap`的方法。`addAttribute()`并且返回的字符串不应该是`null`，并且应该是`"show_products"`- 注意方法的参数顺序，`assertEquals(expected, actual)`因为在测试失败的情况下，JUnit 会打印出一条消息说“期望这个，但得到那个。”。

```
 Mockito.verify(mmap).addAttribute("Products", products);
        assertNotNull(returned);
        assertEquals("show_products", returned); 
```

祝测试顺利！

PS我忘了解释开头：

```
 @RunWith(MockitoJUnitRunner.class)
    public class ProductControllerTest {
        @Mock private ProductService mockproductService;
        @InjectMocks private ProductController productController; 
```

为了`@InjectMocks`像 Spring 一样工作`@Autowired`，测试必须与`MockitoJUnitRunner`类一起运行 - 它会找到所有`@Mock`成员，创建它们并将正确的注入到标记为的成员中`@InjectMocks`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T15:17:45.347

我认为@Cebence 提供的答案存在问题，因为它没有考虑到OP 对spring-webmvc-test @WebApplication 的使用。如果你是你运行提供的示例

```
@RunWith(MockitoJUnitRunner.class) 
```

你还有你的

```
 @Autowired private WebApplicationContext wac; 
```

然后测试将失败。我遇到了与@Human Being 相同的问题，我发现一个简单的解决方案是将控制器中的服务设置为不需要。不理想，但这是解决方案：

**控制器：**

```
@Controller
public class MyController
{
    @Autowired(required=false)
    MyService myService;
    .
    .
    .
} 
```

**考试：**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="classpath:/META-INF/spring/applicationContext-test.xml")
@WebAppConfiguration
public class MyControllerTest
{
    // This is the backend service we are going to mock
    @Mock
    MyService myService;

    // This is the component we are testing and we inject our mocked
    // objects into it
    @InjectMocks
    @Resource
    private MyController myController;

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup()
    {
        MockitoAnnotations.initMocks(this);
        this.mockMvc = webAppContextSetup(this.wac).build();

        List<Object> data = new ArrayList<Object>();

        // Mock one of the service mthods
        when(myService.getAll()).thenReturn(datasets);   
    }

    @Test
    public void testQuery() throws Exception
    {
        this.mockMvc.perform(get("/data").accept(MediaType.APPLICATION_JSON))
                .andExpect(status().isOk())
                .andExpect(content().contentType("application/json;charset=UTF-8"))
                .andExpect(jsonPath("$.value").value("Hello"));
    }

} 
```

**和应用上下文：**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/data/neo4j
http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
http://www.springframework.org/schema/mvc 
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd 
">

    <mvc:annotation-driven/>
    <context:annotation-config/>
    <context:component-scan base-package="com.me.controller" /> 

</beans> 
```

# c++ - 这种模式在 C++ 中有效吗？

> ID：16062847
> 
> 赞同：2
> 
> 时间：2013-04-17T14:31:20.967
> 
> 标签：c++, c++11, static-analysis, c++98, prefast

我正在我的项目上运行 PREfast 静态代码分析，它给了我 C6001 'using uninitialized memory' 这种模式的错误：

```
// AutoSelectGDIObject is a class
if (AutoSelectGDIObject & select_image = AutoSelectGDIObject(hDCImgSource, hBmp))
{
   // use hDCImgSource knowing that hBmp is selected into it
}
// now we are guaranteed that hDCImgSource has had hBmp removed and its previous bmp re-selected into itself 
```

我试图利用的技巧是允许 select_image 的范围仅限于 if 表达式（即 if (condition) { expression-block = 条件变量的生命周期}。

VS 已经愉快地编译（并且可能会运行它）很长一段时间了。我已经很久没有这样的单步代码了，但据我所知，如果 select_image 的运算符 bool() 返回 true，它只会进入 if 块，并且在退出 if 块时会破坏 select_image 的实例。

PREfast 错了吗？或者这里有什么微妙的东西使我上面的代码和假设不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:35:59.083

> PREfast 错了吗？或者这里有什么微妙的东西使我上面的代码和假设不正确？

该代码是无效的 C++，但 VC 会编译它，因为它允许作为文档化扩展，将对非`const`限定类型的左值引用绑定到临时对象。

在我看来，这是一个愚蠢的扩展。根据 C++ 标准，临时对象只能被绑定到左值引用`const`或右值引用（在这种情况下，它们的生命周期超出了创建它们的完整表达式的末尾）。

因此，你的`if`陈述应该是：

```
if (AutoSelectGDIObject const& select_image = 
//                      ^^^^^
                               AutoSelectGDIObject(hDCImgSource, hBmp)) 
```

例如，参见这个[**活生生的例子**](http://ideone.com/MU2q6w)。

但是请注意，*您根本不需要*在此处使用引用。换句话说，以下`if`语句也是有效的，并且比创建对左值引用的临时绑定更好地表达了您的意图`const`：

```
if (AutoSelectGDIObject select_image = AutoSelectGDIObject(hDCImgSource, hBmp)) 
```

例如，参见这个[**活生生的例子**](http://ideone.com/l9dupk)。此外，上面还允许您*修改* `select_image`，而对 的引用`const`则不允许。

# c# - 如何使用 Linq 从列表列表中创建查找？

> ID：16062849
> 
> 赞同：2
> 
> 时间：2013-04-17T14:31:27.090
> 
> 标签：c#, linq

我的输入数据是下面的行**列表**，称之为行

> author1::author2::author3 - 标题

我创建了一个提取作者和标题的函数：

```
ExtractNameAndAuthors(string line, out string title, IList<string> authors) 
```

我现在想以如下形式使用 Linq 创建一个查找 (ILookup) 对象：

> 键：标题
> 值：作者列表

有人真正精通Linq吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:38:14.977

LINQ 通常不能很好地处理`out`参数。你*可以*这样做，但通常最好避免它。与其通过参数传递数据，不如创建一个保存标题和作者列表的新类型，以便`ExtractNameAndAuthors`可以返回该类型的实例：

```
public class Book
{
    public Book(string title, IList<string> authors)
    {
        Title = title;
        Authors = authors;
    }

    public string Title{get;private set;}
    public IList<string> Authors{get; private set;}
} 
```

一旦你有了它，并进行了`ExtractNameAndAuthors`相应的修改，你可以这样做：

```
var lookup = lines.Select(line => ExtractNameAndAuthors(line))
    .ToLookup(book => book.Title, book => book.Authors); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:38:26.220

```
var list = new []{"author1::author2::author3 - title1",
                  "author1::author2::author3 - title2",};

var splited = list.Select(line => line.Split('-'));   

var result = splited
   .ToLookup(line => line[1], 
             line => line[0].Split(new[]{"::"}, StringSplitOptions.RemoveEmptyEntries)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:44:51.337

```
public class Book
{
    public Book(string line)
    {
        this.Line = line;
    }

    public string Line { get; set; }
    public string[] Authors
    {
        get
        {
            return Line.Substring(0, Line.IndexOf("-") - 1).Split(new string[] { "::" }, StringSplitOptions.RemoveEmptyEntries);
        }
    }
    public string Name
    {
        get
        {
            return Line.Substring(Line.IndexOf("-") + 1);
        }
    }
}

static void Main(string[] args)
{
    var books = new List<Book>
    {
        new Book("author1::author2::author3 - title1"),
        new Book("author1::author2 - title2")            
    };

    var auth3books = books.Where(b => b.Authors.Contains("author3"));
} 
```

# javascript - jQueryUI手风琴不起作用

> ID：16062851
> 
> 赞同：2
> 
> 时间：2013-04-17T14:31:31.670
> 
> 标签：javascript, jquery

使用 jQuery UI，我使用的是手风琴，它看起来很酷。默认第一个选项卡或任何它的名称是打开的，我想要它以便它们全部关闭并且仅在单击时打开。有什么办法吗？

此外，您能否使该区域的开口仅足以容纳其中的实际内容？我认为正在发生的是打开时的默认大小等于其中任何一个中最大的大小。

这是我的在线示例，单击播放选项卡，您将明白我的意思。当用户第一次看到它时，他看不到其他选项卡，因为它们在屏幕下方，因为空间很大。 [http://www.taffatech.com/Demo.html](http://www.taffatech.com/Demo.html)

```
<div id="accordion2">
     <h3>Welcome</h3>

    <div>Choose a game!</div>
     <h3>Play Game 1</h3>

    <div>
        <p>Game 1 is in development
            <div align="center">
                <canvas id="myCanvas" width="600" height="400" align="center" style="border:1px solid #ffffff;"></canvas>
            </div>
        </p>
    </div>

<h3>Play Game 2</h3>

    <div>
        <p>Game 2 is in development</p>
    </div>

<h3>Play Game 3</h3>

    <div>
        <p>Game 3 is in development</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:34:08.863

在选项中，设置`active`为`false`和`collapsible`，`true`如下所示：

```
$('div#accordion2').accordion({active: false, collapsible: true}); 
```

# api - REST API WCS 中的令牌生成

> ID：16062859
> 
> 赞同：2
> 
> 时间：2013-04-17T14:31:51.717
> 
> 标签：api, rest, websphere-commerce, wcs

如何在不调用 REST API 中的登录/访客服务的情况下生成 WCToken？

我们可以使用 WCToken 生成的表单 login/guest 并调用其他各种 web 服务来检索数据，我们如何在不调用 login/guest 的情况下调用其他服务？

我从观察中发现，WCToken 是基于 userId 以及另外 2 个令牌（activitytokenid、activitytokenSignature）生成的。这个 WCToken 是否存储在任何数据库表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T15:29:54.920

> 如何在不调用 REST API 中的登录/访客服务的情况下生成 WCToken？

如果没有定制，这是不可能的。

> 我们可以使用 WCToken 生成的表单 login/guest 并调用其他各种 web 服务来检索数据，我们如何在不调用 login/guest 的情况下调用其他服务？

您可以调用 REST 服务，而无需先调用 login 或 guest。您的请求将作为普通用户处理。

> 我从观察中发现，WCToken 是基于 userId 以及另外 2 个令牌（activitytokenid、activitytokenSignature）生成的。这个 WCToken 是否存储在任何数据库表中？

令牌中的数据是 CTMGT 表中存储内容的加密版本。

# jquery - 如何使用 jQuery 阻止 IE 忽略哈希

> ID：16062861
> 
> 赞同：1
> 
> 时间：2013-04-17T14:31:53.690
> 
> 标签：jquery, hash, hyperlink

这是我的示例链接：

```
<div class="aside-box">
<a href="#">test 1</a>
<a href="#login-box" class="login-window">test 2</a>
</div> 
```

一些 IE 浏览器忽略了哈希。所以而不是显示：

```
<a href="#login-box" class="login-window"> 
```

它只显示：

```
<a href="#" class="login-window"> 
```

我可以在此链接之前添加一些 jQuery，以确保仅在它已被剥离的情况下才不会忽略它？

我正在尝试使用它，但到目前为止还没有运气：

```
<script type="text/javascript">
$('#aside-box a:not([href*="#"])').live('click',function() 
$(this).attr('href', $(this).attr('href') + "#aside-box");        
});
</script> 
```

**我已经编辑了这个，因为上述解决方案（实际上）有效。**

jQuery（上图）修复了它。我的印象是它不起作用，但它影响的人只是给我回信说它现在工作正常。

很难与那里的每个浏览器一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:52:04.337

猜测你在这里的意思，但也许你的问题是`#aside-box`当你将它定义为一个类而不是你的 HTML 中的一个 id 时你试图定位（例如，当前你的 jQuery 就是这样做的）。

此外，一些古老的浏览器只会遵循使用 name 属性定义的片段，例如`<a name='foo' id='foo'>`.

除此之外，如果您单击，`<a href="#foo">bar</a>`您将被带到具有 id 的元素`foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:19:47.917

原来原来的帖子有解决方案。我只是无法重现问题，最后收到确认，在 jQuery 安装到位后它实际上正在工作。

# wso2 - 问题构建 WSO2 治理注册表源代码

> ID：16062862
> 
> 赞同：0
> 
> 时间：2013-04-17T14:31:56.017
> 
> 标签：wso2, wso2carbon

我一直在尝试从“_http://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.5/products/greg/4.5.3”中签出的源代码构建 WSO2 治理注册表如网站所述。

运行 pom.xml 时出现以下错误

```
------------------------------------------------------------------------
[INFO] Building WSO2 Governance Registry Source 4.5.3
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- incremental-build-plugin:1.3:incremental-build (default) @ wso2greg-src ---
[INFO] Verifying module descriptor ...
[INFO] Verifying parent modules...
[INFO] Verifying resources...
[INFO] Resources directory does not exist : H:\WorkSpace_1\WSO2\modules\source\src\main\resources
[INFO] Verifying sources...
[INFO] No sources to check ...
[INFO] 
[INFO] --- maven-antrun-plugin:1.1:run (clean-checkout) @ wso2greg-src ---
[INFO] Executing tasks
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-svn-revision-number-plugin:1.1:revision (default) @ wso2greg-src ---
[INFO] 
[INFO] --- gmaven-plugin:1.0-rc-5:execute (default) @ wso2greg-src ---
[INFO] 
[INFO] --- exec-maven-plugin:1.1.1:exec (default) @ wso2greg-src ---
[INFO] svn: E160013: '/repos/wso2/!svn/rvr/170534/branches/solutions/governance/4.5.3' **path not found**
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.125s
[INFO] Finished at: Wed Apr 17 19:37:22 IST 2013
[INFO] Final Memory: 7M/12M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.1.1:exec (default) on project wso2greg-src: Result of cmd.exe /X /C "svn co -r170329 _https://svn.wso2.org/repos/wso2/branches/solutions/governance/4.5.3 checkout" execution is: '1'. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] _http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我已经尝试手动点击提到的存储库位置'_https://svn.wso2.org/repos/wso2/branches/solutions/governance/4.5.3'，但版本号为**4.5.3 的存储库不存在。**

如果您知道，任何人都可以建议一个替代位置，或者任何其他成功构建它的方式。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:13:20.260

您为什么要尝试构建源代码？..对于新手来说有点困难..如果您真的需要它，您必须从这里结帐[1]并需要构建

*   依赖关系
*   服务存根
*   成分
*   特征
*   product 之前需要构建相同版本的 orbit[2] 和 kernel[3]

[1] [https://svn.wso2.com/wso2/custom/projects/projects/carbon/4.0.0/platform/tags/4.0.5/](https://svn.wso2.com/wso2/custom/projects/projects/carbon/4.0.0/platform/tags/4.0.5/) [2] [https://svn.wso2.com/wso2/ custom/projects/projects/carbon/4.0.0/orbit/tags/4.0.5/](https://svn.wso2.com/wso2/custom/projects/projects/carbon/4.0.0/orbit/tags/4.0.5/) [3] [https://svn.wso2.com/wso2/custom/projects/projects/carbon/4.0.0/kernel/tags /4.0.5/](https://svn.wso2.com/wso2/custom/projects/projects/carbon/4.0.0/kernel/tags/4.0.5/)

# ruby-on-rails - Rails 用户“未见页面”计数器

> ID：16062865
> 
> 赞同：3
> 
> 时间：2013-04-17T14:31:59.840
> 
> 标签：ruby-on-rails, ruby, devise, counter

我有一个使用设计进行身份验证的简单 Rails 应用程序。我有兴趣为每个用户创建一个在他们访问某些页面时更新的计数器。

例如：

用户计数器 = 4

用户访问页面 A 用户计数器 = 3

用户再次访问页面 A 用户计数器 = 3

用户访问页面 B 用户计数器 = 2

我正在研究计数器缓存，它计算与用户关联的模型的实例数，这在正确的道路上是否有点？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:27:09.387

有一百万种方法可以剥这只猫的皮......但是这里有一个。

您需要创建一个将用户连接到页面的 PageVisits 连接模型，并且在该模型上具有您手动递增的计数器。

```
class User < ActiveRecord::Base
  has_many :page_visits
end

class Page < ActiveRecord::Base
  has_many :page_visits
end

class PageVisits < ActiveRecord::Base
  belongs_to :page
  belongs_to :user
end

class CampaignsController < ApplicationController
  def show
    @page = Page.find(params[:id]

    if current_user
      page_visit = @page.page_visits.where(user_id: current_user.id).first_or_create
      page_visit.increment(:visits)
    end

    respond_with(@page)
  end   
end 
```

就像我说的，有很多方法，这只是一种简单的方法。我个人会使用 redis 来完成这类任务。

# java - 为什么使用“this”关键字来获取超类方法

> ID：16062867
> 
> 赞同：8
> 
> 时间：2013-04-17T14:32:01.110
> 
> 标签：java

我看到了一些使用`this`关键字获取超类方法的 Java 示例。示例：`this.superClassMethod()`。在通常情况下，我们会使用`super`. 有人可以举例说明为什么开发人员使用`this`而不是`super`？谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T14:42:16.490

在调用者的类中被*覆盖*`this.method()`之前和`super.method()`之前没有区别。`method()`

 *例如，与

```
class SuperClass {

    public void method() {
        System.out.println("SuperClass");
    }

}

class SubClass extends SuperClass {

    public SubClass() {
        method();
        this.method();
        super.method();
    }

} 
```

打电话

```
new SubClass(); 
```

印刷

```
SuperClass
SuperClass
SuperClass 
```

同时与

```
class SuperClass {

    public void method() {
        System.out.println("SuperClass");
    }

}

class SubClass extends SuperClass {

    @Override
    public void method() {
        System.out.println("SubClass");
    }

    public SubClass() {
        method();
        this.method();
        super.method();
    }

} 
```

打电话

```
new SubClass(); 
```

印刷

```
SubClass
SubClass
SuperClass 
```

* * *

`this.field`并行地，`super.field`直到say*隐藏*在调用者的类中`field`之前没有区别。

 *例如，与

```
class SuperClass {

    protected String field = "SuperClass";

}

class SubClass extends SuperClass {

    public SubClass(String field) {
        System.out.println(field);
        System.out.println(this.field);
        System.out.println(super.field);
    }

} 
```

打电话

```
new SubClass("parameter"); 
```

印刷

```
parameter
SuperClass
SuperClass 
```

同时与

```
class SuperClass {

    protected String field = "SuperClass";

}

class SubClass extends SuperClass {

    private String field = "SubClass";

    public SubClass(String field) {
        System.out.println(field);
        System.out.println(this.field);
        System.out.println(super.field);
    }

} 
```

打电话

```
new SubClass("parameter"); 
```

印刷

```
parameter
SubClass
SuperClass 
```

* * *

旁注：在*隐藏*时`methods()`被*覆盖*。`fields`

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:34:08.260

Using`this`不会调用超类方法。它实际上是多余的，因为它专门调用了这个实例的方法。如果您想调用同一实例的另一个构造函数，这可能是相关的，但否则它与仅调用该方法相同。

它可能对变量作用域有用（例如，当有一个与实例变量同名的局部变量时）以确保使用实例变量，但在调用方法时没有区别。

就我个人而言，我认为开发人员希望利用代码完成功能，并且 IDE 在输入后会显示可能的方法名称`this.`:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T14:40:04.893

***super*用于访问基类的方法，而*this*用于访问当前类的方法。**

很少有参考
1）[这个的用法](http://www.javatips.net/blog/2011/12/java-this-keyword)
2）[对 SO 上的 super 的批评](https://stackoverflow.com/questions/4090834/when-do-i-use-super-in-java)

扩展这个概念，如果你写 super()，它指的是基类的构造函数，如果你写 this()，它指的是你正在编写这段代码的类的构造函数。

```
class Animal {
  void eat() {
    System.out.println("animal : eat");
  }
}

class Dog extends Animal {
  void eat() {
    System.out.println("dog : eat");
  }
  void anotherEat() {
    super.eat();
  }
}

public class Test {
  public static void main(String[] args) {
    Animal a = new Animal();
    a.eat();
    Dog d = new Dog();
    d.eat();
    d.anotherEat();
  }
} 
```

输出将是

```
animal : eat
dog : eat
animal : eat 
```

第三行打印“animal:eat”，因为我们调用了 super.eat()。如果我们调用 this.eat()，它会打印为“dog:eat”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:20:15.160

许多 oracle/sun java 代码都使用它。当它不需要示例时，请参见 java\awt\Event.java #translate

```
public void translate(int dx, int dy) {
    this.x += dx;
    this.y +=     
} 
```

（如果您提取 src.zip 并搜索它。在 *.java 中会看到很多这样的实例，其中没有覆盖的局部变量/参数，但它们仍然使用这种样式。

与参数或自动完成无关（它只是 x）我认为它是一个编码标准，以明确我们正在谈论当前/此类中的方法或字段。

**基类的方法**：即使在我们的类中还没有被覆盖，它可以在以后的日期，所以它的未来准备好了。直到方法被覆盖它工作正常，如果它被覆盖它是准确的。

因此，为了清晰起见，我认为这是一个最佳实践编码约定。它不会使代码膨胀，因为不编写只是语法糖，编译器会将其添加到类代码中。***

# javascript - 将变量从 javascript 解析为 html 树枝

> ID：16062870
> 
> 赞同：2
> 
> 时间：2013-04-17T14:32:11.063
> 
> 标签：javascript, symfony, twig

我开始在 Symfony2 中使用 html twig，但遇到了以下问题：

```
function goEditConflict(){
    $("#go").on("click", function(){
    id = $("#case_number").val();

    windows.location = {{ path("acf_case_conflict_edit", {"id" : id}) }} ;
    });
} 
```

> ACFCaseBundle:Shared:caseHierachy.js.twig 中不存在变量“id”，第 38 行

我尝试根据 id 变量重定向页面，但出现错误，当我尝试重定向到`{{ path("acf_case_conflict_edit", {"id" : id}) }}`该变量时不存在。

如何在我的树枝代码中使用 js 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:37:13.897

您的树枝将在您的 javascript 运行之前被写入，因此，它无法解析来自 jquery 调用的 id。在这种情况下，您最好使用 javascript 将 id 附加到虚拟路由：

acf_case_conflict.yml：

```
acf_case_conflict_stub:
    pattern:  /
    defaults: { _controller: "Bundle:acf_case_conflict:edit" } 
```

抽出js：

```
function goEditConflict(){
    $("#go").on("click", function(){
    id = $("#case_number").val();
    windows.location = {{ path("acf_case_conflict_stub")}}+"/"+id+"/edit";
    });
} 
```

这将在每次呈现页面时写入新的 js 文件以具有新的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-19T13:26:12.763

使用此代码

```
function goEditConflict(){
 $("#go").on("click", function(){
    var url = "{{ path("acf_case_conflict_edit", {"id" : js_id}) }}";

    js_id = $("#case_number").val();
    url = url.replace("id", js_id);
    windows.location = url ;
 });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T07:37:23.997

我做了以下事情：

```
function goEditConflict(){
    $("#go").on("click", function(){
    id = $("#case_number").val();
    {% set var %}
          id
    {% endset %}
    windows.location = {{ path("acf_case_conflict_edit", {"id" : var}) }} ;
    });
} 
```

# c++ - 将函数传递给类的OO方式

> ID：16062872
> 
> 赞同：3
> 
> 时间：2013-04-17T14:32:20.073
> 
> 标签：c++, oop, design-patterns

我正在使用旧版 C 库进行网络连接。例如，它允许我创建一个套接字服务器。我必须将函数指针传递给库以处理协议 - 例如处理消息结构、标头长度等。

在 C 程序中，您只需将指针传递给函数，例如`get_protocol`. 但是这样做的OO方式是什么。

我有一个包装类，我们称之为`socket_server`。我希望能够在运行时传递不同协议所需的函数指针。

我怎么做？这是策略模式解决的问题吗？

编辑

我喜欢 std::function 的想法，但我们暂时停留在 VS2008 上，所以 C++11 还没有对我开放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:43:22.800

## 使用`std::function`

```
class Test
{
    std::function<void()> func;
public:
    Test(const std::function<void()> &func) : func(func) {}

    void do_something()
    {
        func();
    }
};

void my_func()
{
    std::cout << "Hello" << std::endl;
}

int main()
{
    Test test(my_func);
    test.do_something();
} 
```

## 基于模板

```
template <typename Func>
class Test
{
    Func *func;
public:
    Test(const Func &func) : func(func) {}

    void do_something()
    {
        func();
    }
};

void my_func()
{
    std::cout << "Hello" << std::endl;
}

int main()
{
    Test<void()> test(my_func);
//  Test<decltype(my_func)> test(my_func); // This is even better
    test.do_something();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:48:24.973

正如评论者建议的那样，您应该使用 C++11 新功能`std::function`。

就个人而言，在 C++03 中，我已经很喜欢函子了。整个`<algorithm>`标题都是亲函子，（当然现在是 C++11 `std::function`）

仿函数是一个覆盖 的对象，`operator()`您可以调用它`()`来执行此类函数。

您可以将其`operator()`视为“perform()”函数，就像简化的单一策略一样。

```
struct Functor
{
    void operator()(int param_a, const string& param_b)
    {
          // perform what you want
    }
    int my_member;
}

Functor f;
f(0,"go_std_function") 
```

但除非你有充分的理由，否则请选择`std::function`. 它是手工仿函数的概括，也是经典函数：任何可调用的函数:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:40:53.860

如果我理解正确的话。这是你需要做的：

在您的头文件中，创建一个要作为静态传递的函数。例如：

```
static void* ThreadWorker(void* worker); 
```

在您的源文件中，您可以这样称呼它：

```
pthread_create(&thread, NULL, ThreadWorker, (void *) worker); 
```

该函数必须是静态的，因为编译器不知道哪个实例正在调用它。但我相信有人可以更好地解释它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:16:30.583

执行此操作的“OO C”方式也是传递一个`void *`值以允许将某些上下文传递给回调函数。传递的实际值将是指向回调函数可以理解的某种类型的指针`struct`（在转换回真实类型之后）。这不是类型安全的，但它在实践中工作得非常好，并且`struct`可以轻松地保存指向 C++ 对象的指针，从而允许将 thunk 关闭为一个健全的 API。

如果没有这样的指针，您实际上只能调用静态方法作为回调（或将对象引用放在全局变量中，这确实很讨厌！）当然，此时它不再是真正的 OO C 接口要么，而是一些讨厌的东西，考虑重写或切换到在其他东西之上构建变得理智。

# drupal - 主题化 ubercart 地址窗格

> ID：16062873
> 
> 赞同：0
> 
> 时间：2013-04-17T14:32:21.897
> 
> 标签：drupal, ubercart

我正在尝试使用表单更改主题结帐地址窗格。

```
function mymodule_theme() {
    return array(
        'billing_pane_theme' =>array(
            'render element' => 'form',
            'path'=> drupal_get_path('theme', 'twitter_bootstrap').'/templates/checkout',
            'template' => 'checkout-billing-fields',

        ),

        'delivery_pane_theme' => array(
            'render element' => 'form',
            'path'=> drupal_get_path('theme', 'twitter_bootstrap').'/templates/checkout',
            'template' => 'checkout-delivery-fields',

        ),

    );
}

function mymodule_form_alter(&$form, &$form_state, $form_id) {

    if($form_id == 'uc_cart_checkout_form') {
        $form['panes']['billing']['#theme'] = 'billing_pane_theme';
        $form['panes']['delivery']['#theme'] = 'delivery_pane_theme';

    }
} 
```

当用户单击“结帐”按钮或刷新结帐页面时，第一次一切顺利，但如果用户选择“保存的地址”或“我的帐单信息与我的交货信息相同”（窗格通过 ajax 请求呈现）然后主题不适用，并且显示默认地址字段窗格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:52:54.517

尝试查看#ahah 回调属性并检查返回的表单是否触发了更改，我猜它只返回完整表单的“切片”，跳过您的主题。

# sdk - Surface SDK TagVisualizationHostAdapter 内部崩溃

> ID：16062876
> 
> 赞同：2
> 
> 时间：2013-04-17T14:32:23.610
> 
> 标签：sdk, tags, pixelsense

我们正在开发支持标签的 SUR40 应用程序。但有时我们在移动标签时会在 TagVisualizationHostAdapter 内遇到奇怪且难以重现的崩溃。我们有一个充当 TagVisualizationHost 的 ScatterView。

在堆栈跟踪下方。任何人的想法？

谢谢，

马丁

```
System.ArgumentNullException: Value cannot be null. Parameter name: visualization

at Microsoft.Surface.Presentation.Controls.TagVisualizationHostAdapter.NotifyVisualizationMoved(TagVisualization visualization, Point center, Double orientation, UIElement relativeTo)
at Microsoft.Surface.Presentation.Controls.ScatterViewTagVisualizationHostAdapter.OnContainerMoved(ScatterViewItem container, Point containerCenter, Double containerOrientation)
at Microsoft.Surface.Presentation.Controls.ScatterViewTagVisualizationHostAdapter.OnContainerPositionChanged(ScatterContentControlBase item)
at Microsoft.Surface.Presentation.Controls.ScatterContentControlBase.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
at Microsoft.Surface.Presentation.Controls.ScatterContentControlBase.OnManipulationDeltaPrivate(ManipulationDeltaEventArgs e)
at Microsoft.Surface.Presentation.Controls.ScatterContentControlBase.OnManipulationDelta(ManipulationDeltaEventArgs e)
at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
at System.Windows.Input.InputManager.ProcessStagingArea()
at System.Windows.Input.ManipulationDevice.ProcessManipulationInput(InputEventArgs e)
at System.Windows.Input.ManipulationLogic.OnInertiaTick(Object sender, EventArgs e)
at System.Windows.Threading.DispatcherTimer.FireTick(Object unused)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
at System.Windows.Threading.DispatcherOperation.InvokeImpl()
at System.Threading.ExecutionContext.runTryCode(Object userData)
at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Windows.Threading.DispatcherOperation.Invoke()
at System.Windows.Threading.Dispatcher.ProcessQueue()
at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
at System.Windows.Application.RunInternal(Window window)
at System.Windows.Application.Run()
at MaterialSource.App.Main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T14:17:04.790

我知道这是一篇旧帖子，但我今天也遇到了同样的错误。我进行了更多测试，在我看来，错误与标签和表面之间的不正确接触有关。在我的情况下，如果我在我的代码仍在`VisualizationAdded`事件处理程序中时移动或删除标签，它似乎会发生。如果您发现了另一个原因，您可能想在这里分享吗？谢谢朱利安

# android - 不正确的行尾

> ID：16062877
> 
> 赞同：2
> 
> 时间：2013-04-17T14:32:24.817
> 
> 标签：android, xml, eclipse

所以我有一个几个月前工作的项目。安装 Windows 8 后，我决定重新安装 Eclipse 并导入我的旧项目并再次查看。所以一切正常安装了 ADT 和 SDK。

然后我尝试启动项目，它说我有一个错误..所以我看了看，看到了这个。 ![在此处输入图像描述](https://i.stack.imgur.com/xsT2v.png)

和这个： ![在此处输入图像描述](https://i.stack.imgur.com/GmQZX.png)

我似乎无法理解这些错误的含义以及如何解决它们。如果有人有解决方案或想法，请告诉我。

问候尼克拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:34:00.010

这是格式错误。按 ctrl+shift+F。然后保存、清理和重建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T07:16:13.517

这是我遇到的解决方案

解决方案 1： - 打开布局文件 Ctrl+Shift+F（MacOSX 中为 Command+Shift+F）保存布局文件并关闭它。删除构建器可能创建的任何 .out 文件。清洁项目。

解决方案2： - 您也可以选择完整的代码，剪切它然后再次粘贴。这也不会干扰您的 xml 格式。

解决方案 3：对于少数编码人员来说，它在清理项目后就可以工作

希望这会有所帮助。如果我能提供任何帮助，请告诉我

# html - 表格 td 中的复选框列表将文本分成 IE7 中的下一行

> ID：16062884
> 
> 赞同：1
> 
> 时间：2013-04-17T14:32:41.553
> 
> 标签：html, css, html-table

我在固定宽度为 160 像素的“td”中有一个复选框列表。复选框列表显示正常，并在 FF、chrome、IE8 和 IE9 中自动使用

```
 <table border="1" cellspacing="0" cellpadding="0">
          <tr>

            <td style="width:160px;"> 
              <label class="tdLabel">my chekcbox:</label><br />
              <asp:CheckBoxList id="chk1" AutoPostBack="True" EnableViewState="true" CellPadding="5" CellSpacing="5"
                                RepeatColumns="1" RepeatDirection="Horizontal" RepeatLayout="Flow" runat="server" OnSelectedIndexChanged="chk1_SelectedIndexChanged">
              </asp:CheckBoxList>
           </td>
</tr>
</table> 
```

在 FF 中，每个项目的复选框旁边的文本都显示在一行中。但在 IE7 中，一些文本进入下一行。我试过了

```
float:left
text-align:left
clear:both
display:inline 
```

在 'td' 和 checkboxlist 上。没有任何工作。请帮忙。

编辑：

```
<td style="width:160px;white-space: nowrap;"> 
          <label class="tdLabel">my chekcbox:</label><br />
          <span id="xxxx"><input id="ctl00_ctl00_ContentPlaceHolder4_ContentPlaceHolder2_chk1_0" type="checkbox"  /><label >Paln text1 goes here</label><br /><input id="ctl00_ctl00_ContentPlaceHolder4_ContentPlaceHolder2_chk1_1" type="checkbox"  /><label >Paln text2 goes here</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:36:58.647

在 css 中尝试`white-space: nowrap;`

那应该可以解决问题:)

对于 ie7，将您的文本包装在 p 标签中，然后将 `white-space: nowrap;` 添加到 p 标签

# java - 使用 while 循环在 Java 中创建棋盘格

> ID：16062888
> 
> 赞同：-5
> 
> 时间：2013-04-17T14:32:49.317
> 
> 标签：java, loops

目标是使用以下模式创建一个 ASCII 棋盘：

```
+--+
|  |
+--+ 
```

我在 Java 中使用以下代码创建了一个带有 n 个框的板，但问题是当我传递 n 个参数时，生成的框像一条线一样垂直堆叠：

```
+--+
|  |
+--+
+--+
|  |
+--+ 
```

我希望这些框跨行迭代，因此它形成一个像这样的棋盘格模式：

```
+--+--+
|  |  |
+--+--+
|  |  |
+--+--+ 
```

Java代码是：

```
public class Checkerboard {
public static void main(String[] args) {
    int x = Integer.parseInt(args[0]);
    printBoard(x);
}

public static void printBox(int numOfBoxes) {

    int i = 0;
    while(i < numOfBoxes)
    i++;    
     System.out.print("+--+");
     System.out.println("|  |");
     System.out.println("+--+");
} 
```

}

任何投入将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:44:34.483

你可以沿着这个伪代码构建一些东西：

```
for y=0 to 3 * ysize
   for x=0 to 3 * xsize
      if x even and y even
        print +
      if x even and y odd
        print |
      if x odd  and y even
        print --
      if x odd  and y odd
        print space space 
```

我认为单个 while 循环无法满足您的需求。

如果您想稍后将国际象棋图形放在棋盘上，最好将棋盘保存到 a 中`StringBuffer`并将其“渲染”到屏幕上；）

# python - Django中的布尔查询

> ID：16062890
> 
> 赞同：0
> 
> 时间：2013-04-17T14:32:49.830
> 
> 标签：python, sql, django

当我这样做时，我有一个“工作”对象

```
 jobs=Job.objects.exclude(end_time__lte =datetime.now(), isActive=True) 
```

或者

```
 jobs.filter( isActive=True) 
```

isAvtive 查询根本不起作用。可能是什么问题？我使用 MySQL，在作业表中 True 注册为 1 ，Fakse 注册为 0 ，以及 Job 模型：

```
class Job(models.Model):
title=models.CharField(max_length=40)
genre=models.ManyToManyField(JobGenre)  
location=models.TextField()
start_time=models.DateTimeField()             
end_time=models.DateTimeField()
description=models.TextField()
reward=models.TextField(null=True)
isActive=models.BooleanField(default=True)

def __unicode__(self):
    return self.title

class meta:
    ordering=['-end_time','creator'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:37:10.237

目前尚不清楚您要达到的目标。如果您想要所有记录 where `isActive`is `TRUE`，那么...

```
jobs = Job.objects.filter(isActive=True) 
```

...应该管用。如果要排除`isActive`is 的所有记录`TRUE`，那么您想要...

```
jobs = Job.objects.filter(isActive=False) 
```

这两个中的一个应该返回一些结果，除非您的数据库表中没有数据。

# iframe - 如何阻止 iframe 更改父窗口位置

> ID：16062891
> 
> 赞同：1
> 
> 时间：2013-04-17T14:32:53.383
> 
> 标签：iframe, google-docs

我在 Google Docs 中创建了一个抵押贷款计算器并将其嵌入到 iframe 中。但是，在计算器中进行的任何更改，甚至在 iframe 中滚动都会将父页面滚动回顶部。我该如何阻止这种行为？
页面是[抵押贷款提前还款计算器](http://clubthrifty.com/mortgage-prepayment-calculator-loan-payoff-calculator/)

# java - 为什么 @Transactional(propagation = Propagation.SUPPORTS, readOnly = true) 修复 Hibernate 延迟加载异常？

> ID：16062893
> 
> 赞同：18
> 
> 时间：2013-04-17T14:33:03.803
> 
> 标签：java, spring, hibernate

我将我正在开发的应用程序从使用 AspectJ 加载时间编织切换到使用 Spring CGlib 代理，在我这样做之后，我开始在代码的许多部分中开始出现休眠延迟加载异常，而在过去没有异常是抛出。

我已经能够通过添加`@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)`一堆以前的公共方法来解决这些延迟加载异常，这些方法上没有任何事务属性，但调用 spring 存储库以从数据库中读取数据。

任何人都知道为什么添加`@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)`消除了休眠延迟加载异常以及为什么这些注释在 AspectJ 加载时间编织中不需要但在 out 时需要？

**更新 2** **我相信删除 AspectJ 不是问题**，但问题是我并没有真正理解 SUPPORTS 传播的实际行为。特别是 SUPPORTS 如何与 JPA EntityManager 交互，因此我删除了一堆导致延迟加载异常的 SUPPORTS 传播。在阅读了 Spring Transaction Manager 的源代码之后，该做什么就变得很清楚了。Spring 文档并没有很好地指出的关键思想是 @Transactional 注释用作将 EntityManager 的生命周期与事务方法的开始和结束联系起来的同步点。还强烈推荐[http://www.ibm.com/developerworks/java/library/j-ts1/](http://www.ibm.com/developerworks/java/library/j-ts1/)上的这一系列文章和这篇博文[http://doanduyhai.wordpress.com/2011/11/21/spring-persistencecontext-explained/](http://doanduyhai.wordpress.com/2011/11/21/spring-persistencecontext-explained/)

**更新 1**

这不是通过 AOP 代理调用私有 @Transactional 方法的情况。这些问题发生在从其他服务调用的公共方法中。

这是代码结构的示例，我在其中看到了问题。

```
@Service
public class FooService 
{
   @Autowired
   private BarService barService;

   public void someMethodThatOnlyReads() {
      SomeResult result = this.barService.anotherMethodThatOnlyReads()

      // the following line blows up with a HibernateLazyLoadingEcxeption 
     // unless there is a @Transactional supports annotation on this method
      result.getEntity().followSomeRelationship(); 
    }

}

@Service
public class BarService 
{
   @Autowired
   private BarRepository barRepo;

   public SomeResult anotherMethodThatOnlyReads()
   {
      SomeEntity entity =  this.barRepo.findSomeEntity(1123);
      SomeResult result = new SomeResult();
      result.setEntity(entity);
      return result; 
    }
}

@Repository
public class BarRepository 
{
   @PersistenceContext
   private EntityManager em;

   public SomeEntity findSomeEntity(id Integer)
   {
      em.find(SomeEntity.class,id);
   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T01:31:56.217

我假设您的代码没有使用`OpenSessionInViewFilter`或类似的东西。

如果没有`@Transactional`注解，Hibernate 会话会在离开`BarRepository.findSomeEntity()`方法后关闭。

当一个`@Transactional`方法被调用并且`TransactionalInterceptor`被正确绑定到该方法（通过 cglib 代理或您在 Spring 上下文中拥有的任何其他 AOP 配置）时，Spring 会为整个带注释的方法保持打开状态，从而防止任何延迟加载异常。

`DEBUG`如果您在`org.springframework.transaction`and `org.springframework.orm.hibernate3`（或者`hibernate4`如果您在 Hibernate 4 上）记录器上打开日志记录，尤其是`HibernateTransactionManager`类 and `org.springframework.transaction.support.AbstractPlatformTransactionManager`，您应该确切地看到 Spring 在代码流中的哪些点决定它需要打开和关闭 Hibernate 会话。日志还应显示会话或事务在每个点打开/关闭的原因。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T14:54:27.137

我不完全确定它为什么会发生，但我的理论如下。

当您从 AspectJ 编织转移到 CGLIB 代理时，`@Transactional`放置在从同一对象调用的方法上的注释将停止生效。这意味着这些方法中的代码将以非事务方式执行（除非您`@Transacional`的调用堆栈中有另一个`@Transacional`真正生效的方法）。

[Javadoc`Propagation.SUPPORTS`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/transaction/annotation/Propagation.html)说：

> 注意：对于具有事务同步的事务管理器，PROPAGATION_SUPPORTS 与根本没有事务略有不同，因为它定义了同步将适用的事务范围。**因此，相同的资源（JDBC 连接、Hibernate Session 等）将在整个指定范围内共享。**请注意，这取决于事务管理器的实际同步配置。

因此，当您的代码以非事务方式执行时，`Session`用于加载对象的 Hibernate 将无法用于随后的惰性属性初始化。当您使用 注释代码堆栈中的顶级方法时`@Transactional(propagation = Propagation.SUPPORTS)`，Hibernate`Session`将可用，直到您离开该方法。

# apache-camel - 带有石英的 apache 骆驼和带有来自端点的自定义组件

> ID：16062895
> 
> 赞同：0
> 
> 时间：2013-04-17T14:33:05.787
> 
> 标签：apache-camel

我正在开发自定义骆驼组件。它只有消费者支持意味着它只能**从端点**调用。假设我的自定义组件注册了“mycomp”方案。

**需求 1：**我们有需要支持以下路线的用例。

from("mycomp:Something").to("file:data/outbox");

上面的路线正在工作，因为我已经为端点提供了 createConsumer() 的实现

**需求 2：**现在，我们还有一个要求是在特定时间从上述路线开始。（假设每天早上 08:00）

对于 Req2，我决定使用骆驼石英组件。正如我们所知，石英也**只支持来自端点**和我的 req2 的端点，就像..

来自("quartz://myTimer?cron=0+0+8+*+*+*")

**现在，问题：**

我的自定义组件需要 from() 端点，它还需要在特定时间触发。但石英也仅适用于 from() 端点。在 Camel 中，我不能有两条 from 像 .. from("xxx").from("yyy") ..

**解决方法之一：**

我可以开发为“mycomp”定义的启动路线的处理器，最终路线将类似于..

from("quartz://myTimer?cron=0+0+8+*+*+*") **.process** (ProcessorWhich_StartsMyRoute );

来自（“mycomp：某事”）。**没有自动启动**（）。**routeId** (" **MyRoute** ").to("file:data/outbox");

但是我再次需要想出一个处理器，它使用石英调度在特定时间停止 MyRoute .. 它会像..

from("quartz://myTimerStop?cron=0+30+8+*+*+*") **.process** (ProcessorWhich_StopsMyRoute );

上面，我在上午 8 点 30 分停下来。但这是此解决方案的限制，在现实生活中，我不知道什么是停止 MyRoute 的安全时间。

请分享您对如何实现 Req1 和 Req2 的想法/意见。请询问您是否需要有关我的用例的更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:58:19.350

只需使用 cron-shedled 路由策略，也许？

这是一个有用的链接 -[文档](http://camel.apache.org/cronscheduledroutepolicy.html)

只需创建一个新策略，设置开始时间或停止时间或任何您想要的，然后将策略添加到您的路线。

例如；

```
CronScheduledRoutePolicy yourPolicy = new CronScheduledRoutePolicy();

//set start time etc on your policy 

    from("mycomp:Something").routePolicy(yourPolicy).
    noAutoStartup().
    routeId("MyRoute").
    to("file:data/outbox"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:50:12.170

**第二种解决方法/解决方案：**

同时，我找到了另一种方法来实现这一点。

我开发了一个处理器，它首先调用suspendRoute（），然后立即调用resumeRoute（）方法来使用'mycomp'方案进行路由..如下所示..

**路线：**

from("quartz://myTimer?cron=0+0+8+*+*+*").process(ProcessorWhich_SuspendResumeMyRoute **)** ;

from("mycomp:Something").noAutoStartup().routeId("MyRoute").to("file:data/outbox");

**处理器**

```
 public void process(Exchange exchange) throws Exception {
        CamelContext ctx = exchange.getContext();
        ctx.suspendRoute(routeName);
        ctx.resumeRoute(routeName);
    } 
```

现在，在以上两个中；第二个看起来更接近理想的解决方案。**任何人都可以像上面那样分享挂起（）和恢复（）路线所需要的（性能和设计）。**使用第二种解决方案，MyRoute 将在上午 8:00 开始，第二天在上午 8:00 再次开始，它首先暂停，然后恢复，第三天再次在上午 8:00 ..暂停然后恢复。

# jquery - 通过 AJAX 加载内容后 jQuery 不起作用

> ID：16062899
> 
> 赞同：66
> 
> 时间：2013-04-17T14:33:09.740
> 
> 标签：jquery, ajax

在[这个页面上](http://quickerbook.imobisoft.eu/HotelSearch/RegionHotelList.aspx?SearchFlag=region&RegionID=1&id=1&SpecificDateFlag=0&CheckInDate=17-04-2013&CheckOutDate=18-04-2013&NoofRooms=1&NoofAdults=2&NoofChildren=0&BookingFlag=room)，我有一个 jQuery 弹出窗口和可调整大小的缩略图。如果我将鼠标悬停在缩略图上，图像会完美调整大小。此外，当我单击页脚中的黄色大电视按钮“QuickBook TV”时，弹出窗口会完全按照我的意愿显示。

但是，当我单击“下一步”或“上一个”按钮时，AJAX 用于加载新内容，而我的 jQuery 不再适用于弹出或缩略图。我已经搜索了许多论坛以查找有关此问题的信息，但由于对 jQuery 的了解有限，我无法理解我需要做什么。

**以下是弹出的jQuery**

```
$(document).ready(function() {

        $(".iframe").colorbox({ iframe: true, width: "1000px", height: "500px" });
        $(".inline").colorbox({ inline: true, width: "50%" });
        $(".callbacks").colorbox({
            onOpen: function() { alert('onOpen: colorbox is about to open'); },
            onLoad: function() { alert('onLoad: colorbox has started to load the targeted content'); },
            onComplete: function() { alert('onComplete: colorbox has displayed the loaded content'); },
            onCleanup: function() { alert('onCleanup: colorbox has begun the close process'); },
            onClosed: function() { alert('onClosed: colorbox has completely closed'); }
        });

        //Example of preserving a JavaScript event for inline calls.
        $("#click").click(function() {
            $('#click').css({ "background-color": "#f00", "color": "#fff", "cursor": "inherit" }).text("Open this window again and this message will still be here.");
            return false;
        });
    }); 
```

**这是缩略图 jQuery**

```
$(function() {

var xwidth = ($('.image-popout img').width())/1;
var xheight = ($('.image-popout img').height())/1;

$('.image-popout img').css(
        {'width': xwidth, 'height': xheight}
); //By default set the width and height of the image.

$('.image-popout img').parent().css(
        {'width': xwidth, 'height': xheight}
);

$('.image-popout img').hover(
    function() {
        $(this).stop().animate( {
            width   : xwidth * 3,
            height  : xheight * 3,
            margin : -(xwidth/3)
            }, 200
        ); //END FUNCTION

        $(this).addClass('image-popout-shadow');

    }, //END HOVER IN
    function() {
        $(this).stop().animate( {
            width   : xwidth,
            height  : xheight,
            margin : 0
            }, 200, function() {
                $(this).removeClass('image-popout-shadow');
    }); //END FUNCTION

    }
);

}); 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-17T14:46:59.273

jQuery 选择器在代码执行时选择存在于 DOM 中的匹配元素，并且不会动态更新。当您调用一个函数时，例如`.hover()`添加事件处理程序，它只会将它们添加到这些元素中。当您执行 AJAX 调用并替换页面的一部分时，您将删除那些绑定了事件处理程序的元素并用新元素替换它们。即使这些元素现在与该选择器匹配，它们也不会绑定事件处理程序，因为执行此操作的代码已经执行。

**事件处理程序**

特别是对于事件处理程序（即`.click()`），您可以使用事件委托来解决这个问题。基本原则是将事件处理程序绑定到静态（页面加载时存在，永远不会被替换）元素，该元素将包含所有动态（AJAX 加载）内容。[您可以在jQuery 文档](http://api.jquery.com/on/#direct-and-delegated-events)中阅读有关事件委托的更多信息。

对于您的`click`事件处理程序，更新后的代码如下所示：

```
$(document).on('click', "#click", function () {
    $('#click').css({
        "background-color": "#f00",
        "color": "#fff",
        "cursor": "inherit"
    }).text("Open this window again and this message will still be here.");
    return false;
}); 
```

这会将事件处理程序绑定到整个文档（因此在页面卸载之前永远不会被删除），它将对`click`具有. 理想情况下，您会在 DOM 中使用更接近动态元素的东西（可能在您的页面上始终存在并包含您的所有页面内容），因为这会稍微提高效率。`id``click``<div>`

但是，当您需要处理时，问题就来了`.hover()`。JavaScript 中没有实际的`hover`事件，jQuery 只是提供该函数作为将事件处理程序绑定到`mouseenter`和`mouseleave`事件的便捷简写。但是，您可以使用事件委托：

```
$(document).on({
    mouseenter: function () {
        $(this).stop().animate({
            width: xwidth * 3,
            height: xheight * 3,
            margin: -(xwidth / 3)
        }, 200); //END FUNCTION

        $(this).addClass('image-popout-shadow');
    },
    mouseleave: function () {
        $(this).stop().animate({
            width: xwidth,
            height: xheight,
            margin: 0
        }, 200, function () {
            $(this).removeClass('image-popout-shadow');
        }); //END FUNCTION

    }
}, '.image-popout img'); 
```

* * *

**jQuery 插件**

这涵盖了事件处理程序绑定。然而，这并不是你所做的全部。您还初始化了一个 jQuery 插件（颜色框），并且无法将它们委托给元素。加载 AJAX 内容后，您将不得不再次调用这些行；最简单的方法是将它们移动到一个单独的命名函数中，然后您可以在两个地方调用（在页面加载和 AJAX 请求`success`回调中）：

```
function initialiseColorbox() {
    $(".iframe").colorbox({
        iframe: true,
        width: "1000px",
        height: "500px"
    });
    $(".inline").colorbox({
        inline: true,
        width: "50%"
    });
    $(".callbacks").colorbox({
        onOpen: function () {
            alert('onOpen: colorbox is about to open');
        },
        onLoad: function () {
            alert('onLoad: colorbox has started to load the targeted content');
        },
        onComplete: function () {
            alert('onComplete: colorbox has displayed the loaded content');
        },
        onCleanup: function () {
            alert('onCleanup: colorbox has begun the close process');
        },
        onClosed: function () {
            alert('onClosed: colorbox has completely closed');
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-05-08T07:18:37.607

在我找到适合我的解决方案之前遇到了同样的问题。因此，如果将来有人可以试一试，让我知道它是否正确，因为我能找到的所有解决方案都比这复杂一点。

正如 Tamer Durgun 所说，我们还将您的代码放在 ajaxStop 中，因此每次 ajax 完成任何事件时都会恢复您的代码。

```
$( document ).ajaxStop(function() {

//your code

} 
```

为我工作:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-30T07:49:20.610

```
// EXAMPLE FOR JQUERY AJAX COMPLETE FUNC.
$.ajax({
    // get a form template first
    url: "../FPFU/templates/yeni-workout-form.html",
    type: "get",
    success: function(data){
        // insert this template into your container
        $(".content").html(data);
    },
    error: function(){
        alert_fail.removeClass("gizle");
        alert_fail.addClass("goster");
        alert_fail.html("Template getirilemedi.");
    },
    complete: function(){
        // after all done you can manupulate here your new content
        // tinymce yükleme
        tinymce.init({
            selector: '#workout-aciklama'
        });
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T14:42:38.780

替换内容时，您的事件处理程序将丢失。当您设置`hover`事件时，jQuery 正在将它们设置在当前页面上的事件上。因此，当您将它们替换为 ajax 时，这些事件不会与这些元素相关联，因为它们是新的。

要解决此问题，您可以调用再次绑定它们的函数，也可以改为在文档上设置事件处理程序，如本[答案](https://stackoverflow.com/questions/9827095/is-it-possible-to-use-jquery-on-and-hover)中使用 $(document).on

这样，在文档上设置了事件，并且任何新元素都将调用该事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-12T08:52:16.047

您可以使用 jQuery 的[delegate()](http://api.jquery.com/delegate/)方法，该方法基于一组特定的根元素，将处理程序附加到现在或将来与选择器匹配的所有元素的一个或多个事件。在我的情况下，它按预期工作

这个`$(selector).click(function(e){}`

[使用delegate()](http://api.jquery.com/delegate/)方法后变成这个

`$( "body" ).delegate( "selector", "click", function(e) {}`

希望这会有所帮助；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-16T22:37:30.267

只是一种选择。

```
$(window).on('load', _ => {
    // some jQuery code ..
}) 
```

这会将任何委托处理程序绑定到窗口。一旦窗口完全加载，它将触发，包括所有图形/包含/挂钩/请求，而不仅仅是 DOM。

`$(document).ready(_ => ...`保留仅在 DOM 准备好后触发的事件，这不适用于 AJAX 动态加载的内容。您可以在特定元素完全加载时运行函数或任何事件，方法是将其定义为@Anthony Grist 在他的答案中解释的，或者将加载事件绑定到窗口，如上所示。

[https://api.jquery.com/load-event/](https://api.jquery.com/load-event/)
[https://api.jquery.com/on/#on-events-selector-data-handler](https://api.jquery.com/on/#on-events-selector-data-handler)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-28T16:19:02.973

我迟到了，但我会把两个答案结合起来。满足我特定需求的方法是将 ajaxstop 合并到完整的

```
complete: function () {
     $( document ).ajaxStop(function() {
         //now that all have been added to the dom, you can put in some code for your needs.
         console.log($(".subareafilterActive").get().length)

     })
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-28T14:03:54.913

您可以在某处检索数据表单后使用jQuery ajax的完整功能，它会在ajax完成后看到更新的元素

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-27T16:18:03.507

这对我有用，

代替：

```
$(document).ready(function(){
//code
}); 
```

我做了：

```
$(document).on('mouseenter', function(){
//code
}); 
```

# c++ - 从文件读取到数组

> ID：16062907
> 
> 赞同：-2
> 
> 时间：2013-04-17T14:33:33.910
> 
> 标签：c++

我有下面的代码填充一个数组并打印出数组，然后以相反的顺序打印出数组。现在我的问题是我已经做到了，我怎样才能不从循环中填充列表，而是从文件中填充它？

代码：

```
void popArray(int array1[]){
  for(int x = 0; x < 10; x++){
    array1[x] = x;
    cout << setw(2) << array1[x];
  }
}

void reverseList(int array1[]){
  for(int x = 9; x > -1; x--){
    cout << setw(2) << array1[x];
  }
}

int main()
{
  int array1[9];

  popArray(array1);

  cout << "\n";

  reverseList(array1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:41:52.330

这取决于您计划如何在文件中包含这些数字。您可以在一行上各有一个整数并继续读取文件直到结束，或者您可以有 csv 值。然后，您可以在 popArray 函数中读取该文件。以下是阅读文件的一些参考： [http ://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

如果您打算在文件的每一行上使用一个整数，则可以使用以下内容。

```
void popArray(int array1[], std::string filename) {
    ifstream myfile (filename);
    while ( myfile.good() )
    {
        std::string line;

        getline (myfile,line);
        array1[x] = atoi(line.c_str());
        cout << line << endl;
    }
    myfile.close();
} 
```

# junit - 预期的注释类型

> ID：16062910
> 
> 赞同：13
> 
> 时间：2013-04-17T14:33:35.337
> 
> 标签：junit, intellij-idea

我刚刚创建了这个单元测试，我得到了一个红色的波浪线`@Test`，上面写着“预期的注释类型”。这是什么意思？

```
package com.sample.bank.account;

import junit.framework.Test;
import static org.junit.Assert.*;

public class LoanTest {

    @Test
    public void testAppliyPaymentSubtractsCorrectAmount()
    {
        Loan loan = new Loan("test subtract", 1000);
        loan.applyPayment(100);
        assertEquals(900, loan.getBalance());
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-17T14:37:44.880

进口应该是

```
import org.junit.Test; 
```

并不是

```
import junit.framework.Test; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-08T15:30:49.873

进口应该是

```
import org.junit.Test; 
```

如果您使用的是 jUnit 4。

如果您使用的是 jUnit 3.8。

```
import junit.framework.Test; 
```

应该可以正常工作。

# scala - 如何从外部填充游戏！模型

> ID：16062911
> 
> 赞同：0
> 
> 时间：2013-04-17T14:33:35.790
> 
> 标签：scala, playframework, playframework-2.0

填补这出戏的最佳主意是什么！具有来自外部来源的数据的模型？

到目前为止，我的应用程序足够小，简单地编写一个执行 JDBC 插入的 Scala 应用程序根本不是问题，但我真的很讨厌这个想法。

最好我希望能够使用游戏！来自独立 shell scala 应用程序的模型，但到目前为止我无法弄清楚如何去做。真的是创建一个视图并用 curl 调用它（例如）唯一的机会吗？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:49:05.947

一个 Json api 应该足够好吗？

# java - 在java中的调试模式和发布模式之间切换代码 - android

> ID：16062912
> 
> 赞同：9
> 
> 时间：2013-04-17T14:33:35.900
> 
> 标签：java, android

我想知道是否有人知道如何在调试模式和发布模式之间切换代码？例如，在 C# 中，有 #debug 来区分调试代码。#debug 中的代码仅在调试模式下执行。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T14:42:45.900

据此（ [2012](http://developer.android.com/tools/sdk/tools-notes.html)年 3 月修订）：

> Build
> 添加了一项功能，允许您仅在调试模式下运行某些代码。构建现在生成一个名为的类，`BuildConfig`其中包含一个`DEBUG`根据您的构建类型自动设置的常量。
> 您可以检查`BuildConfig.DEBUG`代码中的 ( ) 常量以运行仅调试功能。

# android - 我怎么知道那个应用程序。在android中是通过我的应用程序启动的

> ID：16062916
> 
> 赞同：1
> 
> 时间：2013-04-17T14:33:40.693
> 
> 标签：android

我想做设计应用程序。这将能够检测到特定的应用程序。已启动，我想杀死它（如果它在阻止列表中）。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:01:58.527

你只能看到启动的应用程序列表，你不能通过自己的应用程序杀死其他应用程序，因为它是由操作系统处理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:56:43.343

我想您需要查看 ActivityManager ( [http://developer.android.com/reference/android/app/ActivityManager.html](http://developer.android.com/reference/android/app/ActivityManager.html) )。这将帮助您找到正在运行的进程。也许这有帮助：

```
boolean ProcessRunning(String name) {
        ActivityManager manager = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
        List<RunningProcess> processes = manager.getRunningAppProcesses();
        for (RunningProcess process : processes) {
            if (name.equals(process.name)) {
                return true;
            }
        }
        return false;
} 
```

我没有对此进行测试，但此链接也可能会有所帮助：[Automate close of applications in Android](https://stackoverflow.com/questions/7195167/automate-closing-of-applications-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:53:04.563

您好，您可以为此使用 PackageManager 类：

```
 List<PackageInfo> pInfos = getPackageManager().getInstalledPackages(PackageManager.GET_ACTIVITIES);
for (PackageInfo pInfo : pInfos) {
  ActivityInfo[] aInfos = pInfo.activities;
  if (aInfos != null) {
    for (ActivityInfo activityInfo : aInfos) {
      Log.i("ACT", activityInfo.name);
      // do whatever else you like... 
    }
  }
} 
```

# spring - 将 jndi 数据源与 spring 批处理管理一起使用

> ID：16062922
> 
> 赞同：7
> 
> 时间：2013-04-17T14:33:58.197
> 
> 标签：spring, spring-batch, spring-batch-admin

在使用 Spring Batch Admin 时，它会尝试为 dataSource、transactionManager 等提供一些默认值。

**如果您想覆盖这些默认值，您可以在META-INF/spring/batch/servlet/override/**文件夹下创建自己的 xml bean 定义，并在引导期间保证默认属性将被覆盖。

在 spring-batch-admin 中，在 data-source-context.xml 中使用此定义定义了 dataSource 默认值

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${batch.jdbc.driver}" />
    <property name="url" value="${batch.jdbc.url}" />
    <property name="username" value="${batch.jdbc.user}" />
    <property name="password" value="${batch.jdbc.password}" />
    <property name="testWhileIdle" value="${batch.jdbc.testWhileIdle}"/>
    <property name="validationQuery" value="${batch.jdbc.validationQuery}"/>
</bean> 
```

现在，我想用 JNDI 数据源覆盖这个数据源，所以我删除了类似的属性行`batch.jdbc.driver`，`batch.jdbc.url`并具有以下 jndi 定义

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
     <property name="jndiName" value="java:comp/env/jdbc/dbconn" />
</bean> 
```

正如您可能很容易猜到的那样，系统首先尝试初始化 data-source-context.xml 中定义的 dataSource bean，并且由于它找不到属性值 batch.jdbc.* 的任何值，因此它失败并出现异常。

> 无法解析字符串值 [${batch.jdbc.driver}] 中的占位符“batch.jdbc.driver”

由于我将使用 JNDI 并且不想处理这些属性值，因此我无法继续。

在这种情况下如何覆盖 dataSource 的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-20T13:00:00.417

在 Spring Batch Admin 中，正在加载 2 个 Spring ApplicationContext：

*   servlet-config.xml
*   webapp-config.xml

servlet-config.xml 有这些导入：

```
<import resource="classpath*:/META-INF/spring/batch/servlet/resources/*.xml" />
<import resource="classpath*:/META-INF/spring/batch/servlet/manager/*.xml" />
<import resource="classpath*:/META-INF/spring/batch/servlet/override/*.xml" /> 
```

webapp-config.xml 有这些导入：

```
<import resource="classpath*:/META-INF/spring/batch/bootstrap/**/*.xml" />
<import resource="classpath*:/META-INF/spring/batch/override/**/*.xml" /> 
```

servlet-config.xml 配置 servlet，webapp-config.xml 配置（后端部分）应用程序。问题是 dataSource bean 是第二个配置的一部分/定义，而不是第一个。因此，当您将 dataSource bean 添加到 servlet 配置（/META-INF/spring/batch/servlet/override/*.xml）的覆盖时，正如您所做的那样，您将新 bean 添加到第一个上下文，而不是覆盖第二个上下文的 dataSource bean。

**因此，您需要将自定义 data-source-context.xml 放在 META-INF/spring/batch/override/ 下，而不是 META-INF/spring/batch/servlet/override/**

然后它工作，你甚至不会得到`Could not resolve placeholder 'batch.jdbc.driver' in string value [${batch.jdbc.driver}]`错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T10:52:47.497

从 Spring 3.1 开始，“配置文件”功能允许您根据您所在的环境设置数据源“源”。（用于本地测试的嵌入式，用于部署的 JNDI。）

这看起来像下面这样；

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- "production" datasource -->
    <jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/dbconn"/>

    <!-- profile for "local" testing -->
    <beans profile="local">
            <!-- datasource that only gets created in that active profile -->
        <jdbc:embedded-database id="dataSource" type="H2"/>
    </beans>

</beans> 
```

在此示例中，当“活动配置文件”设置为“本地”时，它会覆盖 jndi-lookup 数据源。

# android - 片段 - InstantiationException：没有空的构造函数 -> Google Maps v2？

> ID：16062923
> 
> 赞同：17
> 
> 时间：2013-04-17T14:33:58.130
> 
> 标签：android, constructor, fragment, instantiationexception

当我通过 App-Change 按钮再次打开已关闭的应用程序时，我收到此错误消息：

```
Caused by: java.lang.InstantiationException: can't instantiate class com.*.FragmentContact$1; no empty constructor 
```

我发现了一些关于内部类的技巧，并使它们成为静态等。但是这个 FragmentContact 是***.java 文件中的一个****公共**类，并且**有一个公共的空构造函数**。我在这个项目中使用 Google Maps Api v2 并从互联网的某个地方做一个技巧来设置我的 MapView。看这里：

 ****```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_contact, null);

    try {
        MapsInitializer.initialize(this.getActivity().getApplicationContext());
    } catch (GooglePlayServicesNotAvailableException e) {
        e.printStackTrace();
    }

    fragment = new SupportMapFragment() {
        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            mMap = fragment.getMap();
            if (mMap != null) {
                setupMap();
            }
        }
    };

    getFragmentManager().beginTransaction().replace(R.id.fragment_orte_map_parent, fragment).commit();

    return v;
} 
```

当我把这个 MapView 东西剪掉时，一切正常。也许有人可以解释我做错了什么。

我完整的堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.*/com.*.MainActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.*.FragmentContact$1: make sure class name exists, is public, and has an empty constructor that is public
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2357)
   at android.app.ActivityThread.access$600(ActivityThread.java:153)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:5226)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
   at dalvik.system.NativeStart.main(Native Method)
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.*.FragmentContact$1: make sure class name exists, is public, and has an empty constructor that is public
   at android.support.v4.app.Fragment.instantiate(Fragment.java:405)
   at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
   at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1767)
   at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:208)
   at com.*.MainActivity.onCreate(MainActivity.java:20)
   at android.app.Activity.performCreate(Activity.java:5104)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2261)
   ... 11 more
Caused by: java.lang.InstantiationException: can't instantiate class com.*.FragmentContact$1; no empty constructor
   at java.lang.Class.newInstanceImpl(Native Method)
   at java.lang.Class.newInstance(Class.java:1319)
   at android.support.v4.app.Fragment.instantiate(Fragment.java:394)
   ... 18 more 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-17T15:40:41.550

> 但是这些 FragmentContact 是 *.java 文件中的一个公共类，并且有一个公共的空构造函数。

该错误不是在抱怨`FragmentContact`. 它抱怨`FragmentContact`( `FragmentContact$1`) 的第一个内部类。您不能将 a`Fragment`实现为任何东西的内部类，因为它不能从外部类外部实例化。内部类`static`很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T11:39:42.863

我已经有这个问题很久了，最后这里的评论已经为我解决了。`$1`关于匿名内部类含义的好信息。

将您的地图初始化移动到一个新的公共类，例如`MyMapFragment.java`. 这将允许在没有实例的情况下实例化片段

对于那些仍然不确定如何解决它的人。编写代码如下（使用原始问题中的示例代码）：

```
//Existing code to instantiate map
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.fragment_contact, null);

    try {
        MapsInitializer.initialize(this.getActivity().getApplicationContext());
    } catch (GooglePlayServicesNotAvailableException e) {
        e.printStackTrace();
    }

    fragment = new MyMapFragment();

    //added callback for catching when the map has finished loading
    mapFragment.setLoadedCallback(new MapLoadedCallback() {
        @Override
        public void onLoaded(GoogleMap map) {
            mMap = map;
        }
    });

    getFragmentManager().beginTransaction().replace(R.id.fragment_orte_map_parent, fragment).commit();

    return v;
}
.... 
```

创建新`MyMapFragment.java` 的，使其不再是内部类。这将允许在没有外部类的情况下创建片段。

```
public class MyMapFragment extends SupportMapFragment 
{
    GoogleMap mMap;
    public MyMapFragment() {
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
         mMap = fragment.getMap();
         if (mMap != null) {
             mCallback.onLoaded(mMap);
        }
    }
} 
```

创建`MapLoadedCallback.java`以允许您处理地图何时完成加载并检索已加载地图对象的实例

```
public interface MapLoadedCallback {
    void onLoaded(GoogleMap map);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-01T04:08:26.707

1.  理想情况下，我们不应该在片段构造函数中传递任何东西，片段构造函数应该是空的或默认的。

2.  现在第二个问题是，如果我们想传递接口变量或参数怎么办——

    *   一个。我们应该使用 Bundle 来传递数据。
    *   湾。对于Interface，我们可以将Parceble放在bundle中并使该接口实现parceble
    *   C。如果可能的话，我们可以在活动和片段中实现该接口，我们可以在 OnAttach 中初始化监听器，其中我们有上下文 [（上下文）监听器]。

这样在配置更改期间。字体更改，Activity 重新创建监听器不会取消初始化，我们可以避免空指针异常。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-11-25T08:48:00.937

```
 private Entity mEntity;
  public YourFragment() {}
  public static YourFragment getInstance(Entity mEntity) {
    YourFragment fragment = new YourFragment();
    fragment.mEntity = mEntity;
    return fragment;
  } 
```

当你使用这个片段时，只需调用静态方法`getInstance`。****

# c# - 在显示其他表单时禁用完整表单

> ID：16062934
> 
> 赞同：4
> 
> 时间：2013-04-17T14:34:24.310
> 
> 标签：c#, .net, winforms, .net-3.5

我想禁用我的`mainForm`while`optionsForm`设置为显示。

为此，我正在考虑在`mainForm`无法进行交互的顶部放置一个不可见的表单（但只有通过鼠标点击，键盘敲击仍然有效）。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T14:37:43.213

您可以做以下两件事之一：

1) 将表单显示为对话框。这将防止在 Form2 可见时选择第一个表单。

```
Form f2 = new Form2();
f2.ShowDialog(); 
```

或 2) 如果您想以非模态方式显示（这听起来像是您不想要的），请禁用第一个表单上的所有控件。

```
Form f2 = new Form2();
f2.Shown += ToggleControls;
f2.Closing += ToggleControls;
f2.Show();

public void ToggleControls(object o, sender e)
{
    foreach(Control c in this.Controls)
    {
        c.Enabled = !c.Enabled;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:39:14.457

或者您可以在另一个打开时隐藏主窗体：

```
this.Visible = false;
optionsForm.ShowDialog();
this.Visible = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-19T10:37:25.517

在性能良好的情况下效果最佳。`Button-Click`在您的主表单事件中尝试此操作。

```
try 
{
    form2 f = new form2();
    Enabled = false;
    f.ShowDialog(this);
    Enabled = true;
    f.Dispose();
} 
catch (Exception exception) 
{
    MessageBox.Show(exception.Message);
} 
```

# python - 如何使用 BeautifulSoup 从 html 中解析印地语字体？

> ID：16062936
> 
> 赞同：1
> 
> 时间：2013-04-17T14:34:26.120
> 
> 标签：python, utf-8, html-parsing, beautifulsoup, hindi

我想使用 BeautifulSoup 获取标签的内容。

我的代码：

```
html= "<html><body><td class="HindiTextGray" align="left" valign="top">
      <br />
      सूरत। सिल्कसिटी सूरत के कपड़ा बाजार की व्यापारिक प्रक्रिया में बड़ा बदलाव देखने को मिल रहा है।&lt;br /> 
      </td></body></html>"

soup = BeautifulSoup(html)
td =soup.find('td')
extra = td.script.extract()
td.table.extract()
td.span.extract()
self.response.write(td.contents) 
```

我想要的是：

```
 सूरत। सिल्कसिटी सूरत के कपड़ा बाजार की व्यापारिक प्रक्रिया में बड़ा बदलाव देखने को मिल रहा है। 
```

但我得到：

> [u'\n',
> , u'\r\n \u0938\u0942\u0930\u0924\u0964
> \u0938\u093f\u0932\u094d\u0915\u0938\u093f\u091f\u0940 \u0938\u0942\u0930\u0924 \u0915\u0947 \u0915\u092a\u0921\u093c\u093e \u092c\u093e\u091c\u093e\u0930 \u0915\u0940 \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u093f\u0915 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u092e\u0947\u0902 \u092c\u0921 \u093c\u093e \u092c\u0926\u0932\u093e\u0935 \u0926\u0947\u0916\u0928\u0947 \u0915\u094b \u092e\u093f\u0932 \u0930\u0939\u093e \u0939\u0948\u0964 \u092f\u0939 \u092c\u0926\u0932\u093e\u0935 \u0938\u0948\u091f\u093f\u0902\u0917 \u0906\u0927\u093e\u0930\u093f\u0924 \u0935\u094d\u092f\u093e\u092a\u093e\u0930 \u092a \u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0915\u093e \u0939\u0948\u0964 \u0907\u0938\u092e\u0947\u0902 90 \u092b\u0956\u092b\09516\0\u092 u092a\u0921\u093c\u093e\u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940 \u0935\u093f\u0936\u094d\u0935\u093e\u0938 \u0930\u0916\u0924\u0947\u0947\u0942, u0915\u093f\u0928 \u0907\u0938\u0915\u0947 \u092e\u0941\u0924\u093e\u092c\u093f\u0915 \u0935\u094d\u092f\u093e\u092a\u093e\u0930 \u0915\u0930\u0928\u0947 \ u0935\u093e\u0932\u094b\u0902 \u0915\u0940 \u0938\u0902\u0916\u094d\u092f\u093e \u092e\u0939\u091c 15 \u092a\u094d\u0930\u0924\u093f\u0936\u0924 \u0939\u0940 \u0939\u0948\u0964',\u0932\u0947\u0915\u093f\u0928 \u0907\u0938\u0915\u0947 \u092e\u0941\u0924\u093e\u092c\u093f\u0915 \u0935\u094d\u092f\u093e\u092a\u093e\u0930 \u0915\u0930 \u0928\u0947 \u0935\u093e\u0932\u094b\u0902 \u0915\u0940 \u0938\u0902\u0916\u094d\u092f\u093e \u092e\u0939\u091c 15\u092a\00094d\u092a\0994d\u0962 u0924 \u0939\u0940 \u0939\u0948\u0964',\u0932\u0947\u0915\u093f\u0928 \u0907\u0938\u0915\u0947 \u092e\u0941\u0924\u093e\u092c\u093f\u0915 \u0935\u094d\u092f\u093e\u092a\u093e\u0930 \u0915\u0930 \u0928\u0947 \u0935\u093e\u0932\u094b\u0902 \u0915\u0940 \u0938\u0902\u0916\u094d\u092f\u093e \u092e\u0939\u091c 15\u092a\00094d\u092a\0994d\u0962 u0924 \u0939\u0940 \u0939\u0948\u0964',
> ,

# c# - LINQ var .tolist() 作为转发器的数据源，作为字段名放置什么？

> ID：16062946
> 
> 赞同：0
> 
> 时间：2013-04-17T14:34:48.023
> 
> 标签：c#, asp.net, linq

我使用以下将列表绑定到中继器

```
var confhullresults = (from b in dtConf.AsEnumerable()
                       where b.Field<string>("Location") == "Hull"
                       select b).ToList();

rptConfHull.DataSource = confhullresults;
rptConfHull.DataBind(); 
```

然后在我通常拥有的aspx页面中

```
<%# Eval("FieldName") #> 
```

我不知道该放什么，我可以在最后看到所有字段的名称都是 0,1,2,3 但我试过了

```
<%# Eval(0) #> 
```

和

```
<%# Eval("0") #> 
```

不走运，有人帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:37:43.830

```
var confhullresults = (from b in dtConf.AsEnumerable()
                       where b.Field<string>("Location") == "Hull"
                       select new{ Location= b.Field<string>("Location")}).ToList(); 
```

并绑定

```
<%# Eval("Location") #> 
```

# android - HttpUriRequest#addHeader(...) 正在根除我的实体

> ID：16062948
> 
> 赞同：0
> 
> 时间：2013-04-17T14:34:58.313
> 
> 标签：android, http-request

我正在使用基本身份验证与 Android 中的网络服务交谈。这意味着我发送的标题看起来像

```
Authorization Basic [user:pass base 64 string here] 
```

我正在设置我的请求：

```
public CreateUserService(Intent intent, int id) throws UnsupportedEncodingException {
    super(id);
    List<NameValuePair> params = new ArrayList<NameValuePair>();

    params.add(new BasicNameValuePair("email", intent.getStringExtra(FeedIntentService.EXTRA_UID)));
    //and so on.

    setupRequest(null, params);
} 
```

然后在一个超类中我有一个方法

```
protected void setupRequest(List<Header> headers, List<NameValuePair> params) throws UnsupportedEncodingException {
    mRequest = new HttpPost(getUri());
    mRequest.addHeader(new BasicHeader("Authorization", "Basic " + AUTH_STRING));
    //AUTH_STRING = the base 64 encoded user:pass pair
    if(headers!=null) {
        for(Header h: headers) {
            mRequest.addHeader(h);
        }
    }
    if(params!=null)
        ((HttpEntityEnclosingRequestBase) mRequest).setEntity(new UrlEncodedFormEntity(params));
} 
```

问题是服务器没有收到我的请求正文。我在提琴手中阅读了请求，确实它似乎丢失了。但是，当我*删除*线

```
 mRequest.addHeader(new BasicHeader("Authorization", "Basic " + AUTH_STRING); 
```

并查看提琴手中的请求，我可以像预期的那样看到正文，尽管显然服务器拒绝了未经授权的请求。

AUTH_STRING 的编码如下：

```
private static final String APP_KEY = "user";
private static final String APP_SECRET = "pass";
private static final String APP_STRING = APP_KEY + ":" + APP_SECRET;
private static final String APP_BASE_64 = Base64.encodeToString( APP_STRING.getBytes() , Base64.DEFAULT ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:31:30.910

只是跟进我的评论导致您的解决方案。

在大多数情况下，我发现当 Auth 标头中的 base64 编码字符串无效时，服务器往往会表现得很奇怪。所以验证 Authorization Header 是否正确。

一般来说，最好先用 curl 尝试这些东西。以下是带有 curl 的示例命令

```
curl -X POST -H "Authorization: Basic <base64-encoded String>" http://some.server.url.com/some-endpoint 
```

我看到你添加了 trim() 来修复它。真正的解决方案是使用 Base64.NO_WRAP ( [http://developer.android.com/reference/android/util/Base64.html#NO_WRAP](http://developer.android.com/reference/android/util/Base64.html#NO_WRAP) )。所以你想在编码时这样做：

```
Base64.encodeToString( APP_STRING.getBytes() , Base64.NO_WRAP ); 
```

我可能第一次应该注意到，但不管怎样，我很高兴我的第一个想法导致了你的答案:-)

# c# - EF 可以用新构建的实体更新现有行吗？

> ID：16062950
> 
> 赞同：0
> 
> 时间：2013-04-17T14:35:05.387
> 
> 标签：c#, asp.net-mvc, entity-framework-4

我在我的应用程序中使用 EF。

我想添加和保存实体。

我在我的应用程序中创建了一个新的实体对象并设法将其添加到数据库中。

现在我想更新一个现有的实体。

我从数据库中获取了一个现有实体，

在 UI 中呈现

现在我想反映用户的变化。

我是否必须再次从数据库中获取实体并将值一一分配给它的属性？

我试图创建一个新实体并将其保存到数据库中。它没有显示错误，但没有反映在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:47:43.717

假设您有一个发布模型对象`model`和具有工作数据库上下文的控制器的表单`_context`，您可以使用以下代码更改现有实体（属性可能会有所不同）：

```
[HttpPost]
public ActionResult SubmitForm(MyViewModel model)
{
    // Retrieve existing object
    var someObject = _context.Resources.OfType<MyEntityType>.Where
        (o => o.Id == model.Id).SingleOrDefault;

    // Assign new values to entity
    someObject.SomeProperty = model.SomeProperty;
    someObject.SomeOtherProperty = model.SomeOtherProperty;

    // Commit
    _context.SaveChanges();
} 
```

更新：或者，有关如何附加新对象代替现有对象的详细信息，请参阅[此答案。](https://stackoverflow.com/a/7642616/1043198)

# drupal-7 - 基于 Xampp 的 Wampserver 项目

> ID：16062951
> 
> 赞同：0
> 
> 时间：2013-04-17T14:35:06.970
> 
> 标签：drupal-7, xampp, wampserver

我已经收到了一个使用 xampp 制作的项目，但它在我的 wampserver 版本上不合逻辑地失败了。今天经过大量测试，得出的结论是我的 Wampserver 根本不“喜欢”该项目，从而产生了 Xampp 没有遇到的不合逻辑的错误。

现在，当我更喜欢 wampserver 并且已经有很多正常工作的项目时，我几乎需要为这个项目打开 xampp。我只需要让这个项目也能在我的 wampserver 上运行，让我的生活更轻松。

**那么，问题**是关于 xampp 和 wampserver 之间存在哪些可能会产生此错误的差异？我尝试使用相同的 Apache 和 php 版本，但没有任何结果。

错误是：

`EntityMetadataWrapperException: Unknown data property commerce_product. in EntityStructureWrapper->getPropertyInfo() (line 340 of C:\wamp\www\upplev\sites\all\modules\contrib\entity\includes\entity.wrapper.inc).`

而且似乎无望解决。关于这个问题已经浏览了整个网络，但没有一个建议的解决方案对我有用。所以我只剩下试图模拟我的 wampserver 的行为或 xampp 了。

该项目适用于 xampp 7.2 版，无需任何特殊设置。

# objective-c - Objective C 共享类的只读实例

> ID：16062957
> 
> 赞同：3
> 
> 时间：2013-04-17T14:35:21.573
> 
> 标签：objective-c

我想在Objective C中创建一个类的只读实例。我有一个向量类，它基本上是x和y位置的浮点数和一些方法。在很多情况下，我需要一个 (0, 0)-vector，所以我想而不是每次都分配一个新的，我将拥有一个共享的零向量，如下所示：

```
// Don't want to do this all the time (allocate new vector)
compare(v, [[Vector alloc] initWithCartesian:0:0]);

// Want to do this instead (use a shared vector, only allocate once)
compare(v, [Vector zeroVector]);

// My attempt so far
+ (Vector *)zeroVector {
    static Vector *sharedZeroVector = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedZeroVector = [[self alloc] initWithCartesian:0:0];
    });
    return sharedZeroVector;
}

// The problem
v.x = 3; 
```

这很好用，除了零向量不是只读的，这感觉有点傻。作为一个注释，我想提一下，这更像是一个想知道如何做的问题，而不是一个实际的问题，我不知道它是否会产生一些实际的差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:40:43.343

常见的解决方案是让所有实例不可变（参见`NSNumber`等`NSDecimalNumber`），可能还有第二个可变类（`NSString`vs`NSMutableString`或`NSArray`vs `NSMutableArray`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T15:05:32.147

取决于您的标准向量应该如何工作。如果您不想通过属性设置 x 和 y，您可以将它们设为只读：

```
@property (nonatomic, readonly) NSInteger x;
@property (nonatomic, readonly) NSInteger y; 
```

如果您的某些向量应该是可读写的，您可以创建一个只读类 Vector 并派生一个类 MutableVector：

```
@interface Vector : NSObject
  @property (nonatomic, readonly) NSInteger x;
  @property (nonatomic, readonly) NSInteger y;
@end

@interface MutableVector : Vector
  @property (nonatomic) NSInteger x;
  @property (nonatomic) NSInteger y;
@end 
```

然后，您将对 zeroVector 使用 Vector，对所有其他人使用 MutableVector。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:02:25.247

你只是想阻止其他类改变这个类的字段吗？

将它们标记为`@private`and （如 Sulthan 所写），确保您的`-zeroVector`方法返回的类是不可变的（可能是 的不可变子类`Vector`），即没有允许其他代码更改其状态的方法。

另请参阅[有关 Obj-C 私有字段的相关问题](https://stackoverflow.com/questions/1262463/how-to-make-a-real-private-instance-variable)。

# sql - SQL 'like' 表达式匹配所有 varchar 值（即没有进行实际过滤）？

> ID：16062960
> 
> 赞同：2
> 
> 时间：2013-04-17T14:35:27.987
> 
> 标签：sql, sql-server, sql-server-2008, select, sql-like

我想知道我可以使用哪个表达式`like`，它**总是**匹配的。也就是说，它实际上并没有过滤掉任何东西。

例如，假设如果以下 SQL 返回 1000 条记录...

```
select * from rts.Address 
```

...那么这也应该返回 1000 条记录...

```
select * from rts.Address where StreetName like 'likeExpressionHere' 
```

我尝试使用这个：

```
select * from rts.Address where StreetName like '%%' 
```

..但这仍然做了一些过滤（即一些记录丢失）..

此外，表中的`StreetName`值都不`rts.Address`是空值（即它们都有一些 varchar 值）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:36:50.070

这将取决于您的数据，但`where Streetname like '%'`应该可以工作。

例如，如果该列可以为空，则需要添加

`where StreetName like '%' OR StreetName IS NULL`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:39:14.073

你的问题不是`like`应该工作的。最有可能的`StretName`是 NULL 值。

你不能用like来解决这个问题，尽管你可以这样做：

```
where coalesce(StreetName, '<NULL>') like '%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:38:09.023

这个问题似乎很笼统。提供更多信息，例如表格的内容。也可以根据您的需要调整 sql 中的类似或位置，因此这应该没什么大不了的。下面是通配符 描述 % 替代零个或多个字符 _ 恰好替代一个字符 [charlist] charlist 中的任何单个字符 [^charlist] 或

[!charlist]

不在 charlistd 卡使用表中的任何单个字符。请参考相同的更多信息

# iphone - 将图像放在另一个图像之上

> ID：16062974
> 
> 赞同：0
> 
> 时间：2013-04-17T14:36:17.593
> 
> 标签：iphone, ios, objective-c, uiimageview, uiimage

我想做的是以下。用户可以使用 iPhone 相机拍照。拍照后，他们将在所拍照片的顶部放置另一张图像。放置在顶部的图像也应旋转 25°。除了旋转之外，我还需要将顶部的图像降低到拍摄照片下方一点。你可以在这里看到我的意思。

![在此处输入图像描述](https://i.stack.imgur.com/jfbkv.png)

我有以下。

```
-(UIImage *)drawImage:(UIImage*)profileImage withBadge:(UIImage *)badge
{
    UIGraphicsBeginImageContextWithOptions(profileImage.size, NO, 0.0f);
    [profileImage drawInRect:CGRectMake(0, 0, profileImage.size.width, profileImage.size.height)];
    [badge drawInRect:CGRectMake(profileImage.size.width - badge.size.width, profileImage.size.height - badge.size.height,badge.size.width,badge.size.height)];

    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultImage;
}

-(void)captureImage {
    UIImage *img1 = [cropFilter imageFromCurrentlyProcessedOutput];
    UIImage *img2 = [UIImage imageNamed:@"genkonstage.jpg"]; 
    UIImage *img = [self drawImage:img1 withBadge:img2];

    //UIImage *img = [cropFilter imageFromCurrentlyProcessedOutput];
    [stillCamera.inputCamera unlockForConfiguration];
    [stillCamera stopCameraCapture];
    [self removeAllTargets];

    staticPicture = [[GPUImagePicture alloc] initWithImage:img
                                       smoothlyScaleOutput:YES]; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:58:19.840

我会建议这样的事情：

```
#define DEGREES_TO_RADIANS(x) (M_PI * x / 180.0)

-(UIImage *)drawImage:(UIImage*)profileImage withBadge:(UIImage *)badge
{
    UIGraphicsBeginImageContextWithOptions(profileImage.size, NO, 0.0f);
    CGContextRef imageContext = UIGraphicsGetCurrentContext();
    CGContextClearRect(imageContext, CGRectMake(0, 0, profileImage.size.width, profileImage.size.height));  // just in case let's clear the context
    [profileImage drawInRect:CGRectMake(0, 0, profileImage.size.width, profileImage.size.height)];
    float angle = DEGREES_TO_RADIANS(20);
    CGContextSaveGState (imageContext); {
        CGContextTranslateCTM(imageContext, profileImage.size.width - badge.size.width, profileImage.size.height - badge.size.height); // this will shift your context
        CGAffineTransform rotationMatrix = CGAffineTransformMake(cos(angle), -sin(angle), sin(angle), cos(angle), 0, 0);
        CGContextConcatCTM(imageContext, rotationMatrix); // this will rotate the context
        // Now, having the context prepared (rotated and translated), draw the badge into it
        [badge drawInRect:CGRectMake(0, 0, badge.size.width, badge.size.height)];
    } CGContextRestoreGState (imageContext);
    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultImage;
} 
```

这段代码对我有用。

# c - 关闭 C 程序之前的确认

> ID：16062978
> 
> 赞同：3
> 
> 时间：2013-04-17T14:36:25.647
> 
> 标签：c, visual-studio, return, exit

我在关闭 C 中的程序之前要求确认时遇到问题。我正在寻找程序以在输入 0 时启动确认退出循环，但是当输入 0 而不是要求确认时，程序当前立即关闭。

```
else if (input == 0)//if they chose to exit

        {
printf("You have input 0, program is attempting to close, do you wish to continue? Press 0 for yes, any other number for no");
scanf_s ("%d", &secondinput);

        if (secondinput == 0)
        {

            return;
        }

        else if (secondinput !=0)
        {
            print_menu(1);
            scanf_s("%d", &input);
        } 
```

我猜我错过了一个更优雅的解决方案我已经尝试了一些东西，但无法让它工作。

正在发生的事情的示例：输入 1 将整数添加到数组中 请求添加整数，例如，按 0 时输入 8 程序旨在说明“您希望关闭吗，0 表示是，任何其他整数表示否”当按下 0 时，程序立即关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:47:30.753

您可以包含一个 do while 循环，并在其中包含操作。

```
 do
    {
       */some operation */
       printf("\n enter an number to continue : (0 to stop) :")
       scanf("%d",&input);
     }while(input!=0); 
```

只要输入的数字不等于 0，程序就会继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:48:12.387

一种简单的可能性是标准输入仍然包含一个等待读取的值（特别是零）。假设用户没有`0 0`在控制台上键入（两个输入）之类的东西，那么问题很可能出在未显示的代码上。它可能不会像您期望的那样从标准输入中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:10:12.473

我不确定你的代码的其余部分是什么样的，但是当我输入 1 和 0 时，我能够让这段代码完美地工作，（我正在使用 Visual Studio 2008 和 Visual C++）

```
#include <stdio.h>

int main(int arg, char** args)
{
    int input;
    int secondinput;

    while(1)
    { 
        printf("input: ");
        scanf_s("%d", &input);
        if (input == 1)
        {
            //dosomething
        }
        else if (input == 0)//if they chose to exit

        {
            printf("You have input 0, program is attempting to close, do you wish to continue? Press 0 for yes, any other number for no");
            scanf_s ("%d", &secondinput);

            if (secondinput == 0)
            {

                return 0;
            }
        }
    }
} 
```

# magento - Magento 如何将克隆产品设置为不属于任何类别？

> ID：16062981
> 
> 赞同：0
> 
> 时间：2013-04-17T14:36:47.693
> 
> 标签：magento

我可以使用“复制”方法创建产品的副本，它似乎工作得很好。但是，我想从任何类别中取消分配重复的产品，但`$clone->setCategoryIds()`不是为我这样做。有没有一种巧妙的方法来做到这一点？

我也有复制产品的图像，但是没有为主图像、缩略图和小图像选择它们。有什么简单的方法可以做到这一点吗？

```
 $clone=$product->duplicate();
            $clone->setSku($clonedSku);
            $clone->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_NOT_VISIBLE);
            $clone->setPrice(5);
            $clone->setCategoryIds();
            $clone->setStatus(1);
            $clone->getResource()->save($clone); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:40:29.220

试着打电话

```
$clone->unlockAttribute('category_ids'); 
```

前

```
$this->unlockAttribute('category_ids');. 
```

# macos - 为什么我无法取消 CFHost 信息解析？

> ID：16062984
> 
> 赞同：6
> 
> 时间：2013-04-17T14:36:55.893
> 
> 标签：macos, network-programming, core-services

AFAIK在 OS X（和 iOS）上`CFHost`提供唯一的*公共 API*，用于异步和/或可以取消的 DNS 解析（因此可以实现自定义超时）。所有其他 API 都是同步的，无法取消，因此每次 DNS 查找都必须*浪费一个线程*以使操作异步或可停止（即使 Grand Central Dispatch 每次查找都会浪费一个线程，您不必创建线程你自己）。每个 DNS 解析调用都有一个阻塞线程（这样的调用可能会阻塞相当长的时间，在我的系统上，超时是 30 秒，然后调用最终会超时）如果您需要解析大量 DNS，这确实不是要走的路主机名。

`CFHost`对我来说似乎是一个很好的工作。它可以同步使用，在这种情况下，文档说可以从另一个线程取消阻塞请求，并且可以异步使用，在这种情况下请求在后台运行，如果需要也可以取消，但它在成功或自然超时之前不会阻塞任何线程。内部`CFHost`使用`getaddrinfo_async_*`函数，但这不是公共 API，据我所知，这些函数是私有的，不应直接使用它们。

所以这是我编写的一段简单的代码，用于`CFHost`使用取消测试查找，但它没有按预期工作，我不知道为什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <dispatch/dispatch.h>
#include <CoreServices/CoreServices.h>

int main (int argc, char ** argv ) {
    CFHostRef host;
    dispatch_time_t timeout;
    CFAbsoluteTime startTime;
    dispatch_queue_t timeoutQueue;

    startTime = CFAbsoluteTimeGetCurrent();

    host = CFHostCreateWithName(kCFAllocatorDefault, CFSTR("www.apple.com"));
    assert(host);

    timeout = dispatch_time(DISPATCH_TIME_NOW, 5 * 1000 * 1000 * 1000ull);
    timeoutQueue = dispatch_get_global_queue(
        DISPATCH_QUEUE_PRIORITY_DEFAULT, 0
    );
    assert(timeoutQueue);

    dispatch_after(timeout, timeoutQueue,
        ^{
            printf("%u: Timeout limit reached, canceling.\n",
                (unsigned)(CFAbsoluteTimeGetCurrent() - startTime)
            );
            CFHostCancelInfoResolution(host, kCFHostAddresses);
        }
    );

    printf("%u: Starting name resolution.\n",
        (unsigned)(CFAbsoluteTimeGetCurrent() - startTime)
    );
    CFHostStartInfoResolution(host, kCFHostAddresses, NULL);
    printf("%u: Name resolution terminated.\n",
        (unsigned)(CFAbsoluteTimeGetCurrent() - startTime)
    );

    return 0;
} 
```

如果 DNS 服务器配置正确，此代码将很快解析名称：

```
0: Starting name resolution.
0: Name resolution terminated. 
```

这是意料之中的。但是，如果我在系统中“错误配置”了 DNS，那么所有 DNS 查询都会超时，这就是我得到的结果：

```
0: Starting name resolution.
5: Timeout limit reached, canceling.
30: Name resolution terminated. 
```

5秒后取消计时器被击中，我取消了请求，但请求不会停止，它会再阻塞25秒。实际上，如果我不取消请求，它也会阻塞 30 秒，因为正如我上面所说，这是我系统的自然 DNS 超时。所以对的调用`CFHostCancelInfoResolution`完全**没有任何**作用。

引用 Apple 的`CFHost`文档：

> **CFHostStartInfoResolution**
> 
> [...]
> 
> 在同步模式下，此函数会一直阻塞，直到解析完成，在这种情况下，此函数返回 TRUE，直到通过从另一个线程调用 CFHostCancelInfoResolution 来停止解析，在这种情况下，此函数返回 FALSE，或者直到发生错误。

好的，我**正在**从另一个线程调用 CFHostCancelInfoResolution，但该函数一直处于阻塞状态。这要么是 API 中的错误，要么是文档中的错误，或者我太愚蠢而无法正确使用此 API，并且我在这里忽略了一些非常基本的东西。

## 更新

这实际上可能是一个错误。我刚刚在 10.6 上测试了上面的代码，它完全按预期工作，查找在 5 秒后被取消。在 10.7 和 10.8 上，取消调用不执行任何操作，代码会阻塞，直到达到正常的 DNS 超时。

# binding - 在 Lift 中将 Scala 绑定到 HTML

> ID：16062989
> 
> 赞同：0
> 
> 时间：2013-04-17T14:37:03.813
> 
> 标签：binding, lift

我已经开始玩 Lift。我想创建一个基本应用程序，它通过输入字段从用户那里获取输入，对该输入执行数据库搜索，并获取该数据库搜索的结果并创建一个对象列表，然后将其绑定到一些 html 代码。

我只需要绑定部分的帮助，但首先需要一些背景信息。

我有一个列表[节点]：
`case class Node(aname:String, adata:String) {..}`

我有这个 html 要绑定到：

```
<div class="lift:helloWorld.displayNodes">
    <div>
            <div><li><B>Node:</B></li></div>
                <div>Name: <node:name></node:name></div>
                <div>Data: <node:data></node:data></div>
                <BR>
        </div>
</div> 
```

问题是这段代码从代码片段中调用了我的方法 displayNodes 并将其自身传递进来。这样我可以绑定到它，因为我有 html 代码。所以我像这样绑定：

```
//this method is called from the index.html and 
def displayNodes(html : NodeSeq) : NodeSeq = {
    nodeList.flatMap {node => Helpers.bind("node", html, "name"->node.name, "data"->node.data) }
} 
```

**现在的问题：**
我如何绑定而不在 html 中指定我希望 html 代码调用哪个方法。我的意思是我想删除这一行：`<div class="lift:helloWorld.displayNodes">`因为我不想在填充列表之前调用它。所以基本上不是html“调用”scala代码，而是我希望scala代码调用html并绑定到它，但只有在它有数据之后。如何才能做到这一点？

PS - 我查看了 cookbook.liftweb.net，但他们没有我需要的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:11:34.007

我不确定您是如何设置系统的，但通常对于服务器推送，您需要使用 Comet 演员。下面的代码应该让您开始使用该路径，因为它将执行初始渲染，然后允许您根据消息事件向页面发送部分更新。因此，在这种情况下，它将响应`pushList`加载列表时应发送的事件。[您可以在此处](http://exploring.liftweb.net/master/index-11.html)阅读有关演员的更多信息。

**HTML 文件**

```
<div data-lift="comet?type=HelloWorldActor">
   <span id="nodes"></span> 
</div> 
```

**演员**

```
case class HelloWorldActor() extends CometActor {
  //Handle any messages received
  override def lowPriority: PartialFunction[Any, Unit] = {
    case "pushList" => 
      partialUpdate {
        JsCmds.SetHtml("nodes", displayNodes.apply(listTemplate))
      }
  }

  //Look up the template from templates-hidden/list.html or if that does not exist
  //use the default NodeSeq specified
  def listTemplate = Templates.apply("templates-hidden" :: "list" :: Nil) openOr
    <div>
       <div><li><B>Node:</B></li></div>
       <div>Name: <span name="name"></span></div>
       <div>Data: <span name="data"></span></div>
       <BR>
    </div>

  //Load the list, and then on completion send the actor the message to push the list
  //This could also happen from outside the actor, you'd send the message in a similar 
  //fashion from wherever it happens
  def loadList() = {
    //load the data in your list and on complete
    this ! "pushList"
  }

  //The CSS Selector to output the node
  def displayNodes = {
    "*" #> nodeList.map { node =>
      "@name" #> node.name &
      "@data" #> node.data
    }
  }

  //Initial CSS Transformation
  override def render = {
    //Your initial CSS transformation
  }
} 
```

您将看到[`JsCmds.SetHtml`](http://exploring.liftweb.net/master/index-10.html)在页面上实际设置 HTML 的内容。它只是一个 JavaScript 命令，它在 html 元素上查找给定的 id，然后将其替换为`NodeSeq`指定的。如果您不打算使用 Comet，则可以使用该命令作为来自任何返回`JsCmd`.

我还提取了输出节点的 HTML，以便于说明。该`Templates`对象包含一种使用设计者友好模板的机制，可以查找和重复使用，因此您不会丢失任何这样做的东西。但是，如果您想在一个文件中继续使用 HTML，您可以捕获初始元素中的元素，`render`例如：（当然`"#nodes" #> { ns => listTemplate = ns; PassThru }`更改`listTemplate`为 a`var`之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:12:58.410

我建议使用`SHtml.idMemoize` [http://lift.la/blog/shtmlidmemoize-simple-ajax-updating](http://lift.la/blog/shtmlidmemoize-simple-ajax-updating) 这种方式，您最初可以拥有一个带有输入但没有结果的页面。在用户输入他的数据并且服务器获取数据库数据后，您通过查询更新结果`outer.setHtml`

它比设置更便宜、更容易`CometActor`，但只有在用户提出问题时才能得到结果。因此，这种方式服务器将无法自行将一些更新推送到浏览器。

# php - $_POST 不适用于 apache 重写。使用 index.php 作为控制器

> ID：16062990
> 
> 赞同：1
> 
> 时间：2013-04-17T14:37:05.397
> 
> 标签：php, apache, post, controller, rewrite

问题：我无法在任何地方获得任何 POST 变量。甚至不在 index.php 的顶部。这是因为 apache 重写规则吗？

这是我的 .htaccess 重写规则：

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

这使得一切都进入 index.php 我使用它作为我的控制器文件所以一切都首先通过 index.php

我需要哪些其他 apache 规则才能将 $_POST 数据获取到我的 index.php？

这是基本形式：

```
<form action="/signup" name="form_name" method="POST" id=""> 
<input type="text" name="field1" value="" /> 
<input type="text" name="field2" value="" /> 
<input type="submit" name="" value="Submit" /> 
</form> 
```

# mkmapview - MKMapView 黑屏

> ID：16062994
> 
> 赞同：0
> 
> 时间：2013-04-17T14:37:18.627
> 
> 标签：mkmapview, mapkit, instruments

有人使用本机 MKMapKit 遇到过未捕获的崩溃吗？

如果我们反复访问进出地图功能，我们有一个带有一些地图的应用程序来显示周围的地方或人。我们在地图上上下移动，以强制加载地图的隐藏部分。

重复几次后，屏幕变黑，应用程序崩溃，没有任何堆栈跟踪消息。

在控制台上有时会出现“收到内存警告”消息之前。

我在模拟器上使用僵尸工具和使用分配工具的设备对应用程序进行了分析，没有任何其他结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:52:18.110

最后我们解决了将带有 MKMapView 的组件移动到 ARC 的问题，我们有大量没有 ARC 支持的遗留代码。

仅为此组件启用 ARC（使用 -fobjc-arc 编译器标志）可以完美运行。

问候

# autohotkey - 无法让 coordmode 在一个非常简单的脚本中工作

> ID：16062998
> 
> 赞同：3
> 
> 时间：2013-04-17T14:37:32.410
> 
> 标签：autohotkey

我写了这个脚本，所以我可以通过他们自己的热键在屏幕上单击 4 个坐标。

但是当打开任何窗户时，坐标会变得混乱。

试图包括 coordmode 但它根本不运行。

试图弄清楚这一点，但我发现了更复杂的脚本的例子，所以我不明白。

一点建议将不胜感激。泰。

```
*1:: 
Click 325, 333 
return

*2:: 
Click 809, 334
return

*3:: 
Click 318, 699
return

*4::
Click 813, 696
return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:44:05.650

尝试在脚本顶部设置以下内容

```
CoordMode,Mouse,Relative 
```

这将使您的（新）鼠标坐标相对于窗口，而不是屏幕。

你能在另一个脚本中试试这个吗？

```
#SingleInstance Force
#Persistent
SetTimer, Check, 300
Check:
MouseGetPos,X,Y
ToolTip,X%X%`,Y%Y%
Return 
```

运行时显示鼠标坐标，因为它们是正确的（基于屏幕，而不是窗口）