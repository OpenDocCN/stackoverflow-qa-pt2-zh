# StackOverflow 问答 13605000-13605999

# visual-studio - 项目经理或其他人必须在 TFS 上签入之前确认代码

> ID：13605000
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:46.447
> 
> 标签：visual-studio, tfs

我认为标题解释了我需要什么。我们有一个非常大的开发部门。每个人都在 TFS 上签入和签出代码。但在签入操作之前，管理员或项目经理（或某些需要的人）必须控制代码，然后确认或取消签入操作。因为有些代码可能不正确或危险。您知道用于 TFS 的类似工具吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:33:07.050

您可能可以在 TFS/VS 上自定义您的流程，但我们在我工作的地方使用的是：

1）开发人员进行更改，而不是签入，而是创建一个搁置集。

2）经理检查shevesets并签入或将其发送回开发人员进行一些返工。

只要每个人都尊重这个过程，它就可以正常工作。

您可以在这里查看搁置集：http: [//msdn.microsoft.com/en-us/library/ms181403 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms181403(v=vs.110).aspx)

希望能帮助到你。

# android - 如何摆脱android对话框中烦人的标题

> ID：13605002
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:53.120
> 
> 标签：android, dialog

如何摆脱android对话框中烦人的标题？

这就像我阅读对话框：

```
data myDialog = new data(context);
myDialog.show(); 
```

这是我的对话

```
public class data extends Dialog {
    public data(Context context) {
        super(context);
    }
    TextView txtName;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.data);
        setTitle("annoying  title");
        Button btnClose;
        Button btnexit;

        txtName = (TextView)findViewById(R.id.txtName);
        txtName.setText(MyParam.Fname_Lname);
        //txtName.setText(MyParam.zPhone);

        btnClose = (Button) findViewById(R.id.btnDiel);
        btnClose.setOnClickListener(new Close());

        btnexit = (Button) findViewById(R.id.btnSMS);
        btnexit.setOnClickListener(new exit());
    }

    private class Close implements android.view.View.OnClickListener {
        public void onClick(View v) {
            data.this.dismiss();
        }
    }

    private class exit implements android.view.View.OnClickListener {
        public void onClick(View v) {
             data.this.dismiss();
        }
    } 
```

我尝试删除此行`setTitle("annoying title");`

我试试这个

```
myDialog.getWindow();
myDialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

但如果我这样做，我会看到我的对话框是垂直线

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:28:22.210

`dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);`之前 试试这个`dialog.setContentView(R.layout.mydialog);`

`android:theme="@android:style/Theme.Light.NoTitleBar"`您只需在不想显示标题栏的活动中定义主题。

有关详细信息[，没有标题和边框的自定义对话框](https://stackoverflow.com/questions/5407454/custom-dialog-without-title-and-border)。

[Android 对话框：删除标题栏](https://stackoverflow.com/questions/6263639/android-dialog-removing-title-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:30:12.723

我不知道你在哪里声明了类型数据，但是你在哪里调用 Dialog 构造函数是这样的：

```
new Dialog(getContext(),android.R.style.Theme_Translucent_NoTitleBar); 
```

# blackberry - 以编程方式启动 bbm

> ID：13605003
> 
> 赞同：1
> 
> 时间：2012-11-28T12:23:56.117
> 
> 标签：blackberry, messenger

我们如何以编程方式启动黑莓信使。任何帮助将不胜感激。据我所知，以下将获取 BlackberryMessenger 实例，但可以执行哪些操作来启动 BBM：

```
BlackBerryMessenger bbm= BlackBerryMessenger.getInstance(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:09:16.733

我仍然敦促您考虑我上面的评论，但是您应该能够使 BBM 出现在前台：

```
int modHandle = CodeModuleManager.getModuleHandle( <bbm module name> );
ApplicationDescriptor[] apDes = CodeModuleManager.getApplicationDescriptors( modHandle ); 
ApplicationManager.getApplicationManager().runApplication(apDes [ 0 ] ); 
```

您必须找出合适的模块名称，并将该字符串放入对 getModuleHandle() 的调用中。BBM 有一堆模块，我不知道哪个是主要模块。

# c# - 身份映射模式和表数据网关 c#

> ID：13605007
> 
> 赞同：0
> 
> 时间：2012-11-28T12:24:04.193
> 
> 标签：c#, design-patterns, datamapper, identity-map

我正在我的项目中实现身份映射模式和 DataMapper 模式。但我有一些问题。

当我通过网关从数据库中获取数据时，我正在创建对象的新实例并返回 List ...

关于身份映射，从数据库获取数据的最佳方法是什么？我想从数据库中获取患者并将这些数据显示给用户..

身份图中对象的 ID 呢？我的解决方案（在我看来）：1）使用一些默认 id 创建新对象 2）将对象保存到数据库 3）获取数据库中最后一个对象的 id 4）设置对象的新 id 5）使用新 id 保存到缓存... .

这是一个很好的解决方案？

谢谢你的帮助！

我的身份映射对象（单例）：

```
public class PacientMap
{

    //Cache obsahující jednotlivé instance entiti

    private static PacientMap _instance;
    private Dictionary<int, Pacient> _cache; // Slouží k ukládání objektů pacient

    //Privátní konstruktor, (zaručí mi, že nedojde k vytvoření další instance) => metoda PacientGetInstance ho zavolá jen jednou
    private PacientMap()
    {
            _cache = new Dictionary<int, Pacient>();
    }

    //Metoda pro vytvoreni objektu jedinacek
    public static PacientMap PacientGetInstance()
    {   
        //Je-li promenna instance null, tak se vytvori objekt
        if (_instance == null)
        {
            _instance = new PacientMap();
        }

       //Vratime jedinacka
        return _instance;
    }

    /***********************************
     Vrátí jedinečnou instanci pro zadaný klíč. Pokud instance neexistuje, bude
     vytvořena a uložena do cache.
    ***************************************/
    public Pacient GetPacient(int klic)
    {
        // Pokud je v cache objekt s daným klicem
        if (_cache.ContainsKey(klic))
        {
            //Vrátím objekt
            return _cache[klic];
        }
        // Pokud jsem ho v cache nenasel
        // Zkusím ho najít v databázi
        if (SerachInDb(klic))
        {
            // Pokud byl nalezen v DB, byl automaticky uložen do cahe a jen si ho pod jeho id v cahe nejdu
            return _cache[klic];
        }

        // Pokud nebyl nikde nalezen, vyhodíme chybu
        throw new Exception();
    }

    /// <summary>
    /// Najde Pacienta v databází a pokud ho najde ulozí ho do cache a vrací TRUE
    /// Pokud ho nenejde vrací FALSE
    /// </summary>
    /// <param name="klic"></param>
    /// <returns></returns>
    private bool SerachInDb(int klic)
    {

        Pacient pac = PacientDataGateway.GetInstance().SelectByPacientId(klic);

        if (pac == null)
        {
            return false;
        }

        _cache.Add(klic, pac);

        return true;
    }

    /// <summary>
    /// Vytvoření nového pacienta
    /// </summary>
    /// <param name="klic"></param>
    /// <param name="pacient"></param>
    /// <returns></returns>
    public bool Add(int IdPacienta, string jmeno, string prijmeni, DateTime datumNarozeni, string cisloPojisteni, string telefon, int zubarId)
    {
        if(SerachInDb(zubarId))
        {
            return true;
        }

        Pacient pacient = new Pacient(0, jmeno, prijmeni, datumNarozeni, cisloPojisteni, telefon, zubarId);

        if(PacientDataGateway.GetInstance().insert(pacient))
        {
            // TODO: Selectnu si púoslední záznam z DB a zjistím so jeho id
        }

        return true;
    }

} 
```

还有Pacient Mapper：

```
 public List<Pacient> SelectPacient()
    {
        Database db = new Database();
        db.Connect();

        SqlCommand command = db.CreateCommand("SELECT ID,jmeno,prijmeni,datumNarozeni,cisloPojisteni,telefon,Zubarid FROM pacient");

        SqlDataReader reader = db.Select(command);

        List<Pacient> pacienti = new List<Pacient>();

        Pacient pacient = null;
        while (reader.Read())
        {
            pacient = new Pacient();

            pacient.Id = reader.GetInt32(0);
            pacient.Jmeno = reader.GetString(1);
            pacient.Prijmeni = reader.GetString(2);
            pacient.DatumNarozeni = reader.GetDateTime(3);
            pacient.CisloPojisteni = reader.GetString(4);
            pacient.Telefon = reader.GetString(5);
            pacient.idZubare = reader.GetInt32(6);

            pacienti.Add(pacient);
        }
        reader.Close();
        db.Close();

        return pacienti;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:58:03.703

在从数据库中获取对象之前，您必须检查 IdentityMap 是否存在，这可以防止您获得同一对象的多个副本以及随后的更新冲突。当您通过 Id 请求单个对象时，您可以先检查该对象的 IdentityMap，如果您还没有该对象，则仅调用数据库。对于多个对象，这是无法做到的，因为结果是不确定的。您必须查询数据库，然后检查地图，填补空白。

最终，IdentityMap 的工作是确保在任何时候给定范围内只存在一个对象的内存副本。如果你的实现了这一点，那么它就完成了。

如果您的地图以 Id 为键，则在将其添加到地图之前，您需要一个 Id。这可以在客户端或通过插入查询完成。我更喜欢客户端分配密钥，因为您不必往返即可获得 Id。但是，您提出的方法似乎还可以。

我自己的 IdentityMap 实现由 Type 键入，然后 Id 使用嵌套字典。如果您的键是表范围的，这很方便。

# php - 使用 jquery-fileupload 进行 Ajax 调用

> ID：13605008
> 
> 赞同：1
> 
> 时间：2012-11-28T12:24:04.853
> 
> 标签：php, jquery, file-upload

在我的网站上加载 jquery-fileupload 时出现以下错误：

```
http://www.testsite.net/uploadfile/%5Bobject%20Object%5D?_=1354103435936 
```

错误是（页面响应）

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
    <html><head>
    <title>404 Not Found</title>
    </head><body>

<h1>Not Found</h1>    
<p>The requested URL was not found on this server.</p>

</body></html> 
```

阅读 main.js 我在这个调用中发现了错误：

```
 // Load existing files:
    $.ajax({
        // Uncomment the following to send cross-domain cookies:
        //xhrFields: {withCredentials: true},
        url: $('#fileupload').fileupload('option', 'url'),
        dataType: 'json',
        context: $('#fileupload')[0]
    }).done(function (result) {
        if (result && result.length) {
            $(this).fileupload('option', 'done')
                .call(this, null, {result: result});
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-22T12:52:47.830

我通过在 $(document).ready() 上包含 main.js 来修复错误

这样 main.js 中的函数就可以检测到

```
$(document).ready(function(){

  $.getScript('js/main.js');

  // make sure that the url in the main.js is correct
  // and if you still got errors, set timer
  // 
  // setTimeout(function(){
  //
  // 	$.getScript('js/main.js');
  // }, 1000);
  // 
  // after 1 second, the main.js will be included in the file

});
```

# c - 如何将数组 [4] 转换为数组 [2] [2]？

> ID：13605010
> 
> 赞同：3
> 
> 时间：2012-11-28T12:24:06.863
> 
> 标签：c, arrays, casting

我有一个数组`short frame[4]`，我希望它作为函数参数`short frame[2][2]`

我该如何施放它？我尝试了不同的东西（比如`*(short [2][2])&frame[0]*)`，但我仍然收到错误消息。

同样不起作用的是，如果我声明函数并使用while`void function(short frame[2][2])` 调用函数是`function(&frame[0])``frame``short frame[4];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:38:26.657

无论如何，我认为这不是一个好习惯：

```
f((short (*)[2])a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:38:20.823

这在这里有效，尽管有警告。

```
#include <stdio.h>
void function(short frame[2][2])
{
  for (int i = 0; i < 2; i++)
    for (int j = 0; j < 2; j++)
      printf("%d ", frame[i][j]);
  printf("\n");
}
int main()
{
  short frame[4] = { 0, 1, 2, 3 };
  function(&frame[0]);
  return 0;
} 
```

你得到什么错误信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:38:21.387

您不能在不同维度的数组之间进行转换。

它不知道你想要哪个方向。

您必须编写一个函数。

在伪代码中：

```
function castArray(short[4] input){
   short[2][2] output = new short[2][2];
   output[0][0] = input[0];
   output[0][1] = input[1];
   output[1][0] = input[2];
   output[1][1] = input[3];
   return output;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:38:57.627

您可以像这样简单地实现它：

将一维数组转换为二维数组

```
short frame[MAX];
short dup_frame[ROW][COL];
int i,j,k;
for(i = 0 ; i < MAX ; i++)
{
  j= i / ROW ;  // you can do it by i / COL also 
  k= i % ROW ; // you can do it by i % COL also 
  dup_frame[j][k] = frame[i];
} 
```

# actionscript-3 - 如何将位图 X 位置放入整数或数字？

> ID：13605011
> 
> 赞同：1
> 
> 时间：2012-11-28T12:24:07.333
> 
> 标签：actionscript-3

假设“temp1”是一个嵌入式图像，并且给定了 ax 和 y 位置。我想获取它的坐标并将其放入一个整数中。我试图查看但没有任何信息，而且它显然现在以我的方式工作这样做，这是我是怎么做到的..

```
public var temp1:Bitmap = new Bitmap()
public var t1:int;
public var image:MovieClip = new MovieClip()
public var eater:MovieClip = new MovieClip();

[Embed(source="Asset/Levels/Easy.swf")]
private var Easy:Class;

[Embed(source="Asset/Levels/Eat.swf")]
private var Eat:Class;

public class Game extends Sprite
{
    eater = new Eat();

    image = new Easy();
    image.x = 100;
    image.y = 100;
    stage.addChild(image);
    image.addEventListener(MouseEvent.CLICK, click);

}

public function click(event:MouseEvent):void
{
    temp1 = event.target.getChildAt(0);
    tester();
}

public function tester():void
{
    t1 = temp1.x;
    trace("t1 " + t1);
    eater.x = t1;
    stage.addChild(eater);
} 
```

注意：这只是我写的一个例子来解释我所处的情况。

我还尝试将其作为“数字”变量而不是“整数”。跟踪它后，它只显示为“0”。

我这样做的原因是因为我在舞台上有一组位图。它是一个 6x6 的位图图像网格。当我在舞台上单击图像时，我想获取它的 x、y 坐标并将其提供给整数..这样我就可以使用保存的 x 和 y 位置用影片剪辑覆盖位图。我已经对其进行了编程，以便图像在影片剪辑文件（Swf）结束时消失。问题是当我这样做，除了动画剪辑的 x 和 y 位置外，一切都很顺利。它出现在舞台的左上角。我希望它出现在位图上，所以使用这个公式我认为它会起作用，但我就是想不通为什么它不保存斧头位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:44:14.903

我手头没有 Flash，但是当您将`temp1`值更改为

```
temp1 = event.currentTarget as Bitmap; 
```

# c# - 将位图从 C# 传递到 C++

> ID：13605013
> 
> 赞同：0
> 
> 时间：2012-11-28T12:24:11.667
> 
> 标签：c#, c++

如何将从 C# 加载的 Bitmap 对象传递给 C++ 本机代码，实际上我正在包装一些要从 C# 使用的 OpenCV API 但我在从 c# 传递位图并在 c++ 上重建它时遇到了问题

任何代码或想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:28:26.820

您可以使用该`LockBits`方法将`Bitmap`像素锁定在内存中，并使用 P/Invoke 调用将指向第一个像素的指针、尺寸和步幅传递给 C++。

概述`LockBits`：[https ://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)

在本机代码完成图像处理后，您可以使用`UnlockBits`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:30:00.617

如果您有一个 .NET Bitmap 对象，您可以使用函数[GetHBitmap()](http://msdn.microsoft.com/en-us/library/1dz311e4.aspx)来获取指向可从非托管代码访问的图像的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T09:29:10.977

[您可以使用EmguCV](http://www.emgu.com/wiki/index.php/Main_Page)而不是实现自己的包装器。

# c# - 检查移动（.m）网站是否存在查询问题

> ID：13605014
> 
> 赞同：0
> 
> 时间：2012-11-28T12:24:13.870
> 
> 标签：c#, web, httpwebrequest, exists

我无法检查 url 是否存在。我使用以下方法进行大多数检查 - 这是我找到的最好的方法，可以保存完整的 Web 请求，但它确实允许检查地址，例如：

英国广播公司

m. 的任何移动站点都没有效果和中断。

```
public static bool Does_URL_Exists(string str_url)
    {
        // using MyClient from linked post
        using (var client = new MyClient())
        {
            client.HeadOnly = true;
            // fine, no content downloaded
            try
            {
                //System.Windows.Forms.MessageBox.Show(str_url);
                string s1 = client.DownloadString(str_url);
                return true;
            }
            catch
            {
                return false;
            }

        }

    }
class MyClient : WebClient
{
    public bool HeadOnly { get; set; }
    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest req = base.GetWebRequest(address);
        if (HeadOnly && req.Method == "GET")
        {
            req.Method = "HEAD";
        }
        return req;
    }
} 
```

关于我如何完成这项工作的任何线索。www.bbc.co.uk/m 也不好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T21:01:41.967

您不需要将所有链接字符串加载到客户端，仅在连接到 url 正常（200）时检查状态。

网址为：“ [http://www.bbc.co.uk/](http://www.bbc.co.uk/) ”。我认为直接链接之类的移动设备是：“ [http://www.m.bbc.co.uk/](http://www.m.bbc.co.uk/) ”

希望对你有所帮助

# python - 用于模糊匹配的 Python 哈希表

> ID：13605017
> 
> 赞同：3
> 
> 时间：2012-11-28T12:24:21.847
> 
> 标签：python, dictionary, hashtable

我正在尝试实现一种允许基于键快速查找的数据结构。

当`dict`我的查找涉及相等时
（例如`key == somevalue`转换为`datadict[somevalue]`.

问题是我还需要能够基于更复杂的比较（例如`key > 50`或）有效地查找键`key.startswith('abc')`。

显然我不能在这两种情况下使用相同的解决方案，但目前我无法弄清楚如何解决这两种情况。任何人都可以建议这样做的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:28:10.597

听起来您不需要哈希算法-而是某种形式的二叉树。甚至是您使用该`bisect`模块的列表。值得一看：[Python 的标准库 - 是否有平衡二叉树的模块？](https://stackoverflow.com/questions/2298165/pythons-standard-library-is-there-a-module-for-balanced-binary-tree)

另一种选择（取决于您的数据）是使用内存`sqlite3`数据库并为可能的查找创建适当的索引——但您将用性能/内存和 SQL 语法来换取灵活性......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:27:11.303

*   将所有数据项放在一个列表中。
*   对键上的列表进行排序。
*   使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)有效地查找 where`key > 50`或 where的项目`key.startswith('abc')`。

当然，这只有在您拥有非常多的数据项时才会有所回报。如果您没有那么多，只需遍历列表并将您的条件应用于每个键。

# django - django sweetpie 支持 mashery iodocs？

> ID：13605018
> 
> 赞同：2
> 
> 时间：2012-11-28T12:24:24.357
> 
> 标签：django, api, tastypie, iodocs, mashery

[Mashery iodocs](https://github.com/mashery/iodocs)是一个记录 API 的工具。它需要两个配置 json 对象才能运行。如果让美味派自动生成这些对象，那就太好了。Tastypie 可以生成[带有 schema 的 json](http://django-tastypie.readthedocs.org/en/latest/interacting.html#inspecting-the-resource-s-schema)，但是它与 iodocs 的期望不兼容。关于如何使用美味派自动生成此配置的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:49:01.110

目前，我不相信有一种方法可以直接从 TastyPie 生成那种文档。但是，我发现这个项目在创建交互式 API 文档方面很有用。

[https://github.com/Hipo/Django-API-Playground](https://github.com/Hipo/Django-API-Playground)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:32:53.343

另一个自动生成文档的项目 - [https://github.com/minism/django-tastypie-swagger](https://github.com/minism/django-tastypie-swagger)

虽然到目前为止我还没有找到任何令人信服的东西！

# c++ - 将 Sqrt(x) 计算为 x * InvSqrt(x) 在 Doom 3 BFG 代码中是否有意义？

> ID：13605026
> 
> 赞同：44
> 
> 时间：2012-11-28T12:25:03.930
> 
> 标签：c++, optimization, micro-optimization, math.h

我浏览了最近发布的[Doom 3 BFG 源代码](https://github.com/id-Software/DOOM-3-BFG)，当我发现一些似乎没有任何意义的东西时。Doom 3 在[idMath](https://github.com/id-Software/DOOM-3-BFG/blob/master/neo/idlib/math/Math.h#L315)类中封装了数学函数。有些函数只是从 转发到相应的函数`math.h`，但有些是重新实现（例如[idMath::exp16()](https://github.com/id-Software/DOOM-3-BFG/blob/master/neo/idlib/math/Math.h#L884)），我认为它们比它们的对应函数具有更高的性能`math.h`（可能以牺牲精度为代价）。

然而，令我困惑的是他们实现该`float idMath::Sqrt(float x)`功能的方式：

```
ID_INLINE float idMath::InvSqrt( float x ) {
     return ( x > FLT_SMALLEST_NON_DENORMAL ) ? sqrtf( 1.0f / x ) : INFINITY;
}

ID_INLINE float idMath::Sqrt( float x ) {
     return ( x >= 0.0f ) ? x * InvSqrt( x ) : 0.0f;
} 
```

这似乎执行了两个不必要的浮点运算：首先是除法，然后是乘法。

有趣的是，[最初的 Doom 3 源代码](https://github.com/id-Software/DOOM-3)也以这种方式实现了平方根函数，但反平方根使用的是[快速反平方根算法](http://en.wikipedia.org/wiki/Fast_inverse_square_root)。

```
ID_INLINE float idMath::InvSqrt( float x ) {

    dword a = ((union _flint*)(&x))->i;
    union _flint seed;

    assert( initialized );

    double y = x * 0.5f;
    seed.i = (( ( (3*EXP_BIAS-1) - ( (a >> EXP_POS) & 0xFF) ) >> 1)<<EXP_POS) | iSqrt[(a >> (EXP_POS-LOOKUP_BITS)) & LOOKUP_MASK];
    double r = seed.f;
    r = r * ( 1.5f - r * r * y );
    r = r * ( 1.5f - r * r * y );
    return (float) r;
}

ID_INLINE float idMath::Sqrt( float x ) {
    return x * InvSqrt( x );
} 
```

您认为在计算`Sqrt(x)`中是否有任何优势，就`x * InvSqrt(x)`好像在`InvSqrt(x)`内部只调用`math.h`'s `fsqrt(1.f/x)`？我是否可能在这里遗漏了一些关于非规范化浮点数的重要信息，或者这只是 id 软件方面的草率？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T22:42:16.360

我可以看到这样做的两个原因：首先，“快速 invSqrt”方法（实际上是 Newton Raphson）现在是许多硬件中使用的方法，因此这种方法为利用此类硬件（和一次可能进行四个或更多这样的操作）。这篇文章稍微讨论一下：

[计算平方根有多慢（多少个周期）？](https://stackoverflow.com/questions/7724061/how-slow-how-many-cycles-is-calculating-a-square-root)

第二个原因是兼容性。如果更改计算平方根的代码路径，可能会得到不同的结果（尤其是零、NaN 等），并失去与依赖于旧系统的代码的兼容性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T20:45:03.723

据我所知，`InvSqrt`它用于计算颜色，因为颜色取决于光线从表面反射的角度，这为您提供了一些使用平方根的倒数的函数。

在他们的例子中，他们在计算这些数字时不需要很高的精度，因此 Doom 3 代码背后的工程师（最初来自 Quake III）想出了一种非常*非常*快速的方法来计算`InvSqrt`仅使用几次 Newton-Raphson 迭代的近似值.

这就是为什么他们`InvSqrt`在所有代码中使用，而不是使用内置（较慢）函数。我想使用`x * InvSqrt(x)`is 是为了避免将工作乘以二（通过有*两个*非常有效的函数，一个 for`InvSqrt`和另一个 for `Sqrt`）。

你应该阅读[这篇](http://www.beyond3d.com/content/articles/8/)文章，它可能会对这个问题有所了解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T21:09:04.843

当代码被多人修改时，很难回答为什么它具有当前形式的问题，尤其是在没有修订历史的情况下。

然而，鉴于 1/3 世纪的编程经验，这段代码符合其他人提到的模式：`InvSqrt`曾经很快，用它来计算平方根是有意义的。然后`InvSqrt`改了，也没人更新`Sqrt`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T20:55:36.370

他们也有可能遇到了一个相对幼稚的版本，`sqrtf`对于更大的数字来说，它的速度明显较慢。

# c# - 请帮助我了解 C# 和 LINQ

> ID：13605032
> 
> 赞同：0
> 
> 时间：2012-11-28T12:25:29.567
> 
> 标签：c#, .net, linq, linq-to-sql

我是 C# 和 LINQ 的新手。我创建了新网站，我想在我的网站上创建一个视图表单。就像人们在我的网站上阅读内容时一样，它会在我的数据库中将 View table 更新为 1。我的意思是当人们点击“阅读更多”按钮时，它会更新数据库。这是我的代码/我知道它完全错误/：

```
var a = from b in db.Infos
        where b.Id == Id
        select b;
var v = db.Infos.Single(g => g.Id == Id);
var c = v.Viewed;
Info medee = new Info();
medee.Viewed = c + 1;
db.Infos.InsertOnSubmit(medee);
db.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:38:44.893

您的代码不清楚并且不会执行您的请求，因为`medee`没有链接到已经存在的实体，根据我从您的代码中了解到的情况，您必须执行以下操作：

```
var a = from b in db.Infos
        where b.Id == Id
        select b;
a.Viewed += 1;
db.SubmitChanges(); 
```

# c# - C# Visual Studio 中的单元测试

> ID：13605035
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:25:42.327
> 
> 标签：c#, unit-testing

我正在为这个类进行单元测试，这是一个三角形类，它取边并确定三角形是不等边、等腰还是等边。

```
public struct Point
{
    public int x, y;

    public Point(int a, int b)
    {
        x = a;
        y = b;
    }
}

public class Triangle
{
    double[] sides;

    public Triangle(double a, double b, double c)
    {
        if ((a <= 0) || (b <= 0) || (c <= 0))
        {
            throw new ArgumentException(" ");
        }
        sides = new double[] { a, b, c };
    }

    public Triangle(double[] s)
    {
        sides = new double[s.Length];
        for (int i = 0; i < s.Length; i++)
            sides[i] = s[i];
    }

    public Triangle(Point a, Point b, Point c)
    {
        sides = new double[3];
        sides[0] = Math.Sqrt(Math.Pow((double)(b.x - a.x), 2.0) + Math.Pow((double)(b.y - a.y), 2.0));
        sides[1] = Math.Sqrt(Math.Pow((double)(b.x - c.x), 2.0) + Math.Pow((double)(b.x - a.x), 2.0));
        sides[2] = Math.Sqrt(Math.Pow((double)(c.x - a.x), 2.0) + Math.Pow((double)(c.x - a.x), 2.0));
    }

    public Triangle(Point[] s)
    {
        sides = new double[s.Length];
        sides[0] = Math.Sqrt(Math.Pow((double)(s[1].x - s[0].x), 2.0) + Math.Pow((double)(s[1].y - s[0].y), 2.0));
        sides[1] = Math.Sqrt(Math.Pow((double)(s[1].x - s[2].x), 2.0) + Math.Pow((double)(s[1].x - s[2].x), 2.0));
        sides[2] = Math.Sqrt(Math.Pow((double)(s[2].x - s[0].x), 2.0) + Math.Pow((double)(s[2].x - s[0].x), 2.0));
    }

    private int uniqueSides()
    {
        return sides.Distinct<double>().Count();
    }

    public bool isScalene()
    {
        if (uniqueSides() == 1)
            return true;
        return false;
    }

    public bool isEquilateral()
    {
        if (uniqueSides() == 3)
            return true;
        return false;
    }

    public bool isIsosceles()
    {
        if (uniqueSides() == 2)
            return true;
        return false;
    }
} 
```

}

isScaleneTest 失败了，我不知道为什么？

```
[TestMethod()]
    public void isScaleneTest()
    {
        Triangle target = new Triangle(1.2, 2.1, 7.1);
        Assert.IsTrue(target.isScalene());
    } 
```

我也很难弄清楚如何测试其他方法。isEquilateral 和 isIsosceles 已通过测试并通过，但我无法通过任何其他测试。有任何想法吗？测试构造函数有什么意义吗？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:30:57.607

您的代码`sides.Distinct<double>().Count();`返回超过 1。

看看这个线程，

[不同的是不使用 LINQ to Objects](https://stackoverflow.com/questions/1365748/distinct-not-working-with-linq-to-objects)

> LINQ Distinct 在自定义对象方面并不那么聪明。
> 
> 它所做的只是查看您的列表并查看它有两个不同的对象（它不关心它们对于成员字段具有相同的值）。

如链接所示，您可以实现 IEquatable

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:36:41.443

不等边三角形有三个*不相等*的边。的代码`isScalene`应该是：

```
public bool isScalene()
{
    if (uniqueSides() == 3)
        return true;
    return false;
} 
```

此外，is 的代码`isEquilateral`是错误的。等边三角形有三个*相等*的边，所以等边三角形的回报`uniqueSides`应该是 1 副 3。

# highcharts - 如何在 Highcharts 图例值中一一设置颜色数组？

> ID：13605041
> 
> 赞同：0
> 
> 时间：2012-11-28T12:26:00.487
> 
> 标签：highcharts

我必须在饼图图例值中设置不同的颜色。如果我使用静态颜色，则在所有图例中设置颜色代码。但是当我设置 array[0] 时不显示颜色。

我的代码：

```
data: [
    {/literal}
        {section name=foo start=1 loop=$value.0.count+1 step=0}
            {assign var=op value=$smarty.section.foo.index}
            {assign var=a value=optcount$op}
            {assign var=an value=optans$op} 
            {assign var=cor value=$colors.col$op}
            {literal}
                {name: '{/literal}{$value.0.$an}{literal}',y: {/literal}{$value.0.$a}{literal}, color: '{/literal}$cor{literal}'}
            {/literal}
            {if $op neq $value.0.count},{/if}
        {/section}
    {literal}
] 
```

这`$colors`是一个数组，具有以下值：

```
$colors = array(col1 => '#6B8E23', col2 => '#A9A9A9', col3 => '#696969', col4 => '##FFFFFF', col5 => 'blue'); 
```

如果我像这样传递值，它的工作但在所有图例中以一种颜色分配：

```
{literal}
    {name: '{/literal}{$value.0.$an}{literal}',y: {/literal}{$value.0.$a}{literal}, color: '{/literal}green{literal}'}
{/literal} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:34:49.657

```
 {foreach from=$value[1] item=foo key=k name=myloop}                             
                            {assign var=op value=$smarty.foreach.myloop.index}                                  
                            {assign var=cor value=$colors.$op}                                  
                            {literal}                               
                            {name: '{/literal}{$k}:{$foo}{literal}',y: {/literal}{$foo}{literal}, color: '{/literal}{$cor}{literal}'}
                            {/literal}  
                            {if $op le $count},{/if}                                
                            {/foreach} 
```

# css - 使用 CSS 为相邻元素块中的元素设置样式

> ID：13605045
> 
> 赞同：1
> 
> 时间：2012-11-28T12:26:24.870
> 
> 标签：css, css-selectors

在某些文章文本中，图像被包裹在`p.img`标签中，标签分别位于顶部和尾部，并带有边框和一些填充：

```
p.img {
    border-top: 1px dotted #414042;
    border-bottom: 1px dotted #414042;
    padding-top: 20px;
    padding-bottom: 20px;
} 
```

然而，当一堆图片相继出现时，像这样：

```
<p class="img"><img ...></p>
<p class="img"><img ...></p>
<p class="img"><img ...></p>
<p class="img"><img ...></p> 
```

我只希望 padding-top 和border-top 应用于`p.img`组中的第一个，以及组`padding-bottom`中`border-bottom`的最后一个`p.img`。`p.img' 需要删除所有边框和填充。

我尝试尝试使用`p.img + p.img`相邻的选择器，但我无法影响`p.img`组中的第一个和最后一个。

在我求助于 JS 之前，如果有人可以帮助我仅使用 CSS 实现这一点，那就太好了。

**编辑** 一些建议我使用第一个孩子和最后一个孩子选择器，但我不想影响任何不属于一组相邻 p.img 的 p.img。即这行不通（在 sass 中）

```
p.img + p.img {
        border-top: 0;
        border-bottom: 0;
        padding-top: 0;

        &:first-child {
            border-bottom: 0;
            padding-bottom: 0;
        }

        &:last-child {
            border-top: 0;
            padding-top: 0;
        }

    } 
```

我的文章可能是这样的：

```
article 
    p
    p
    p.img
    p
    p.img
    p.img
    p.img
    p 
```

这只是我想要设计样式的三个组中的 p.img；不是第一个，个人的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:29:10.470

可以用css3吗？（即你需要支持旧版本的IE吗？）

如果可以，您可以使用[`:first-child`和`:last-child`](http://www.quirksmode.org/css/firstchild.html)选择器。

这些将完全符合您的要求，但[缺乏支持。](http://caniuse.com/#feat=css-sel3)在 IE8 及以下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:35:03.370

```
p.img {
    border-top: 1px dotted #414042;
    border-bottom: 1px dotted #414042;
    padding-top: 20px;
    padding-bottom: 20px;
}

p.img:first-child {
    padding-top: 40px;
}

p.img:last-child {
    padding-bottom: 40px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:49:25.350

假设你有一个平坦的背景颜色，你可以负边距和一个实心的顶部边框来覆盖之前`p`的 s 虚线底部边框：

```
p {
  margin: 0 0 20px;
}
p.img {
  border-top: 1px dotted #414042;
  border-bottom: 1px dotted #414042;
  padding: 20px 0;
}
p.img+p.img {
  margin-top: -21px;
  border-top: 1px solid #fff;
  padding-top: 0;
} 
```

`#fff`你的背景颜色在哪里。演示链接：http: [//jsfiddle.net/n7P5d/](http://jsfiddle.net/n7P5d/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:32:27.807

您可能想尝试`:first-of-type`和`:last-of-type`选择器。

正如安迪所说，浏览器支持将是你的症结所在。

[http://caniuse.com/#feat=css-sel3](http://caniuse.com/#feat=css-sel3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:46:54.263

现在你已经更新了它，看看你的文章结构，你会一直知道图像是如何分组的吗？如果它是手动的，你不能只添加一些额外的 css 并创建一个新类，例如：

p.img {

}

p.img-first { 边界顶部：{

p.img-last {边框底部：}

所以你的文章现在是：

文章 p p p.img p p.img-first p.img p.img-last p

但是，如果它不是手动的并且您不确定图像将如何显示，那么 JS 是唯一的选择。

# java - Solr 如何使用邻近搜索和通配符进行 eDisMax 查询？

> ID：13605049
> 
> 赞同：2
> 
> 时间：2012-11-28T12:26:34.687
> 
> 标签：java, solr, solrj

我正在尝试使用 eDisMax 查询解析器来获取短语的通配符结果，但它似乎不起作用。

```
field:value           comment:...text... The best movie ever! ...text... 
```

唯一的查询字段是评论。

查询`query: "\" best movie \""`<= this 返回结果！

查询`query: "\" best mov* \""`<= this 不返回结果。

**如何使用邻近和通配符进行查询？**

我也尝试过使用标准查询解析器，但它不支持邻近度+通配符。我已经看到其他一些建议安装补丁的答案，但我想保留标准的 Solr 构建。

我正在使用 SolrJ 和 Solr 3.6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:58:19.377

通过使用此处提到的解决方案 ( [SOLR-1604](https://issues.apache.org/jira/browse/SOLR-1604) )，您可以将通配符添加到短语查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-14T13:07:42.470

我正在使用 solr 6.0。在 solr UI 中，我选择了 edismax 搜索，在 q 字段中我写了“best move*”并设置了 qf。它返回正确的输出。

# entity-framework - 尝试删除后导航键丢失

> ID：13605050
> 
> 赞同：1
> 
> 时间：2012-11-28T12:26:43.127
> 
> 标签：entity-framework, ef-code-first

我有代码优先实体框架。
当我尝试从具有其他表的外键的表中删除行时，我得到一个异常。在我尝试再次加载数据时处理异常后，我尝试删除的选定项目的**导航键变为****空**

为什么会发生这种情况，我该如何解决。

删除过程非常简单：

```
public class Person
{
     public int ID {get;set;}
     public string Name {get;set;}

     public Something Something {get;set;}
     public ICollection<Profile> Profile {get;set;}
}

try 
{
    var p = en.Person.First(t => t.ID == 14);
    //p.Something here is not null;
    en.Remove(p)
    en.SaveChanges(); // I'm get an exception here
} 
catch { /*error handling */} 
finally 
{
    var p = en.Person.First(t => t.ID == 14);
    //but p.Something here is null;
} 
```

但在**en.SaveChange()**我得到一个例外。

> DELETE 语句与 FOREIGN KEY 约束“FK_person_profile

这是我班的一个样本。
SomeThing**属性**是一个导航键。首先选择**Something** have value。但在第二个选择里面**最终**阻止它变为空。

现在修复删除问题后，我在将对象添加到数据库后遇到了同样的问题。并且重新加载功能没有帮助。
有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:23:46.867

我想我理解您的问题 - 您正在删除一个实体，它导致错误并且您想要恢复。但是，在 finally 块中，当您再次从当前上下文中再次获取实体时，这是不正确的。

问题是您希望您的上下文从数据库中重新加载，但这并不是它的工作原理。您实际上正在做的是回到您的上下文，这是一个工作单元并检索内存中的实体，因为您检索的实体被标记为删除，因此它的属性没有被加载。如果要从数据库刷新，则需要使用[DbEntityEntry.Reload](http://msdn.microsoft.com/en-us/library/gg679450%28v=vs.103%29.aspx)完全使用条目重新加载实体。

使用您的代码示例：

```
var p = en.Person.First(t => t.ID == 14);
en.Entry(p).Reload(); 
```

# html - Tizen 上的 Android 应用程序

> ID：13605051
> 
> 赞同：2
> 
> 时间：2012-11-28T12:26:43.293
> 
> 标签：html, tizen

我正在研究 Tizen。在 Tizen 上开发一个我已经在 Android 上开发的应用程序。

我必须在背景中放置一个图像。然后在其上放置按钮。单击该按钮并在 javascript 中接收其操作。

如何将图像放置在背景中。

是他们在 Tizen 平台上传输 android 应用程序的任何方式吗？

我们可以在 Tizen 上制作我们的 android 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:10:59.060

`background-image`在 CSS 中可以做到。

例如，将 mesh_background_1280x720.jpg 放入 images 目录而不是修复 style.css：

```
body {
    background-image: url("../images/mesh_background_1280x720.jpg");
} 
```

对我来说这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-01T03:49:47.097

您可以使用 Jquery Mobile 来完成。

```
.ui-icon-myapp-custom {
    background: url("settings.png") no-repeat rgba(0, 0, 0, 0.4) !important;
} 
```

在 HTML 中，

```
<a href="#user_info" data-role="button" data-theme="b" data-iconpos="right" data-icon="myapp-custom" >
Custom Icon
</a> 
```

有关详细信息，请查看 [http://jquerymobile.com/test/docs/buttons/buttons-icons.html](http://jquerymobile.com/test/docs/buttons/buttons-icons.html)

目前 Tizen SDK 不支持将 Android 应用程序转换为 Tizen。但是有办法。一家 Open Mobile 公司为 tizen 开发了 ACL（Application Compatible Layer）。如果您有 Android 应用程序，您可以将其提交给他们，他们可以将其转换为 Tizen。所有申请学分都将在您的名字上。他们会从三星那里得到一笔钱。在 Tizen 商店中搜索 ACL，您会在 ACL 下找到几个应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T23:09:00.707

我可以告诉你如何使用 Tizen Native (WYSIWYG) 来做到这一点。如果您正在寻找基于代码的答案，请忽略这一点。然而，对于那些试图在 Tizen Studio 中学习和导航的人来说，这非常有帮助！

启动 Tizen Studio

文件/新 Tizen 项目

模板 / 下一个

移动 / 下一个

本机应用程序 / 下一个

UI Builder 单一视图（左下）/下一个

在 Project Explorer（左上角）中打开 Layout / Layout.xml 的树（双击打开 Layout）。

选择设计选项卡（中心）

在 Palette 中，UI Container（就在中心的右侧）

将“网格”从调色板拖到屏幕上

在属性选项卡中（最右边或打开：窗口/显示视图/其他/选择属性确定）

将 Col Count 更改为 720 并将 Row Count 更改为 1280

将“网格”从调色板拖到屏幕上

现在您应该看到更多 (22) 个 UI 组件

将调色板中的“背景”拖到您的屏幕上如果它没有自动调整大小（Hello BUG），请执行以下操作。拖动到比您的屏幕尺寸大一点（假设为高清，请查看此内容，我认为这是 Tizen 商店所要求的）。

突出显示背景，再次转到属性选项卡，底部变化属性：左 0，上 0，宽度 720，高度 1280。前几次它会给你带来麻烦，直到你发现 BG 调整大小的窗口不能再高比 BLUE TOP 和底部的窗口应该更大，直到您手动输入正确的尺寸，如上所示。

现在转到或打开您的资源选项卡（只需从 Windows 资源管理器拖放文件）并找到您已在 Adob​​e PS 中正确调整大小并使用“保存为 WEB”来减小 jpg 文件大小的背景图像。

拖到屏幕上的背景“图层”上。

对于按钮，您可以：将 UI 组件中的“BUTTON”拖到背景上，或者更好地将 UI 组件中的“图像”拖到背景上...

然后将“资源管理器”选项卡中的图像（来自 Adob​​e PS 的预制按钮）拖放到空白图像占位符上。您必须在“属性”选项卡中手动调整它的大小以获得正确的比例。

重复更多图像、按钮和文本，因为内置文本“标签”至少可以说是可怕的。您始终可以使其中任何一个执行按钮操作。

就我而言，现在我需要学习如何对所述按钮和动作进行编程。

哇！这将为您节省数周！希望我能一步一步找到这样的！

现在在哪里发布这个？IO

**PS如果你觉得这很有用。勾选小黑色向上箭头以对此进行投票。纯粹是为了帮助别人，我没有“点赞”的奖励。**

# c# - 在 WinForms、C#、.Net2.0 中继承 ListViewItem

> ID：13605065
> 
> 赞同：1
> 
> 时间：2012-11-28T12:27:21.960
> 
> 标签：c#, listview

我在 System.Windows.Forms 中遇到了 ListView 的问题，我无法自己处理它，请求帮助或提示我哪里做错了？
描述：
- 我有一个类 - 将其命名为 cListViewItem（'c' 来自自定义），它继承自标准 ListViewItem，但存储我自己的数据处理类。现在，在使用 ListView.items.Add( ) 将 cListViewItem 添加到 ListView 类之后，我似乎无法控制项目的名称。
- 我的源代码片段（为了这篇文章的目的而改变了）

```
using System.Windows.Forms;
cListViewItem:ListViewItem
{
  // gives a basic idea
  public cListViewItem( myclass DataStorage )
  {
    // constructor only stores DataStorage to a local variable for further use;
    this._storage = DataStorage;
  }
  protected myclass _storage;
  // and there goes the fun:
  // I thought that ListView class uses .Text property when drawing items, but that is not truth
  // my idea was to 'cheat' a little with:
  new public String Text
  {
    get
    {
      // overriding a getter should be enough i thought, but i was wrong
      return( some string value from DataStorage class passed via constructor );
      // setter is not rly needed here, because data comes from this._storage class;
      // in later stages i've even added this line, to be informed whenever it's called ofc before return( ); otherwise VisualStudio would not compile
      MessageBox.Show( "Calling item's .Text property" );
      // guess what? this message box NEVER shows up;
    }
  }
} 
```

我看到使用 .Text setter 很重要，但构造函数是我能做到的最后一刻，在创建 cListViewItem 之后，它被添加到 ListView Items 属性并显示，所以没有地方再次调用 .Text = "" 。
我的代码仅在我在 cListViewItem 的构造函数中设置所有内容时才有效，例如：

```
public cListViewItem( myclass DataStorage )
{
   this._storage = DataStorage;
   this.Text = DataStorage.String1;
   // and if I add subitems here, I will see em when the ListView.View property be changed  to View.Details
} 
```

那我是瞎了还是怎么了？当我使用 cListViewItem.Text = "string" 时，我会在 ListView 中看到 'string' 但是当我只是覆盖 .Text getter 时，我看不到这些项目:(

ListView 类提供了以我需要的方式显示项目的灵活性。我想创建一个类，将我的自定义数据存储类与 ListView 类绑定。在我的应用程序的下一阶段，我想为 ListView 中的选定项目绑定一个表单，这将允许我更改项目（我的自定义类）的值。这就是为什么我想让每个 ListViewItems 项记住相应的自定义数据存储类。
ListView 中显示的名称永远不会是唯一的，因此允许多个相同的名称，但项目会因 id 值而不同（数据库方面）；
我只是不明白为什么使用 ListViewItem.Text 设置器来完成这项工作，尽管 ListView 类不使用 ListViewItem.Text 获取器来显示项目（我的 MessageBox 永远不会弹出）？
请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:53:20.887

这里的主要问题是您使用`new`关键字隐藏属性。原始属性不是`virtual`（“可覆盖”），因此它不会被覆盖而是被遮蔽。

阅读[此处](http://broadcast.oreilly.com/2009/10/understanding-c-using-virtual.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:40:02.713

如果我理解正确，那么以下几点可能会有所帮助。

为了存储自定义数据，您实际上不需要从 ListViewItem 类派生，而是可以使用 ListViewItem 的实例并将 Tag 属性设置为任何对象，这可以是您的 DataStorage 类。如果你这样做，那么在你构建 ListViewItem 之后设置它的 Text

```
DataStorage storage = GetDataStorage();  
ListViewItem item = new ListViewItem(storage.Name);
item.Tag = storage; 
```

如果要继承 ListViewItem 然后在构造函数中设置值

```
public cListViewItem( myclass DataStorage )
{
    // constructor only stores DataStorage to a local variable for further use;
    this._storage = DataStorage;
    this.Text = this._storage.Name;
} 
```

属性和方法隐藏至少让我自己有点困惑，我不太记得规则，但最终自动完成的对 Text 的调用不会调用你的版本......

# php - foreach循环内的while循环问题

> ID：13605066
> 
> 赞同：0
> 
> 时间：2012-11-28T12:27:23.970
> 
> 标签：php, mysql, foreach, while-loop

我正在尝试使用 a 更新一系列日期，`Shift_ID`但`Shift_ID`输入的日期取决于它是星期几。因此，例如，如果我有一个日期范围，`$from = "2012-12-01"` `$to = "2012-12-28"`我正在尝试制作它，以便我可以选择一个复选框（例如：）`value="Fri" name = "offdays[]"`来指示哪一天是`offdays`. 如果 an`offdays`与设置范围内的一天匹配，则`Shift_ID = "6"`否则为工作日，并且`Shift_ID = "3"`

希望这一切都会在一分钟内变得有意义，我正在尽力解释它并为您提供一些有用的变量。

所以这是我的代码：

```
if(isset($_POST['submit']))
    {
    if(isset($_POST['offdays']))
        {
        //$off is set through the config settings//
        $shift = mysqli_real_escape_string($_POST['shift']);
        $from = mysqli_real_escape_string($_POST['from']);
        $to = mysqli_real_escape_string($_POST['to']);
        $emp_id = mysqli_real_escape_string($_POST['emp_id']);

        foreach($_POST['offdays'] as $checkbox)
            {
            echo "Checkbox: " . $checkbox . "<br>";//error checking
            $sql = ("SELECT Date FROM schedule WHERE (Date BETWEEN '$from' AND '$to') AND (Emp_ID = '$emp_id')");

            if(!$result_date_query = $mysqli->query($sql))
                {
                echo "INSERT ERROR 1 HERE";
                }
                echo "SELECT SQL: " . $sql . "<br>";//error checking

                while($row = $result_date_query->fetch_assoc())
                    {
                    echo "Date: " . $row['Date'] . "<br>";//error checking
                    $date = date('D',strtotime($row['Date']));

                    if($date == $checkbox)
                        {
                        echo "MATCHED! Date: " . $date . " Checkbox: " . $checkbox . "<br>";//error checking
                        $sql = ("UPDATE schedule SET Shift_ID = '$off' WHERE Date = '" . $row['Date'] . "' AND Emp_ID = '$emp_id'");

                        if(!$result_update_offdays_query = $mysqli->query($sql))
                            {
                            echo "INSERT ERROR 2 HERE";
                            }
                            echo "UPDATE DAYS OFF SQL: " . $sql . "<br><br>";//error checking
                        }
                    else
                        {
                        echo "NOT MATCHED! Date: " . $date . " Checkbox: " . $checkbox . "<br>";//error checking
                        $sql = ("UPDATE schedule SET Shift_ID = '$shift' WHERE Date = '" . $row['Date'] . "' AND Emp_ID = '$emp_id'");

                        if(!$result_update_shift_query = $mysqli->query($sql))
                            {
                            echo "INSERT ERROR 3 HERE";
                            }
                            echo "UPDATE SHIFT SQL: " . $sql . "<br><br>";//error checking
                        }               
                    }
                }       
            }
        } 
```

当我查看打印的回声语句时，一切都很完美！当一个日期在星期五登陆时，它显示它正在进入`Shift_ID = "6"`，任何其他日期显示`Shift_ID = "3"`。问题是这些表格没有反映我的陈述告诉我的内容，它们都只是更新为`Shift_ID = "3"`.

最后，我希望能够选择多个`offdays`，但是当我选择多个时，它会在下一个循环中覆盖我的前一天，这是有道理的。

我不知道发生了什么，如果有人能给我一个线索，我将不胜感激。

**更新：**当我`exit;`在休息日更新后添加时，如下所示：

```
echo "UPDATE DAYS OFF SQL: " . $sql . "<br><br>";//error
exit; 
```

它确实将休息日更新为`Shift_ID = "6"`，因此在那之后一定会发生一些事情。

**编辑：**似乎问题出在用户权限上。我无法解释为什么，但是在删除用户并创建一个具有完全权限的新用户之后，事情开始起作用了。我选择了@andho 的答案，因为他帮助我在聊天论坛中找到了答案，并且还添加了一种清理我的代码的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:18:38.417

这并不能解决您的问题，而是简化了解决方案！

如果您的 offdays 变量如下：`$offdays = array('Fri', 'Sun');`

您可以首先在一个查询中将范围内的所有日期设置为 $shift：

```
UPDATE Schedule SET Shift_ID = '$shift' WHERE Date BETWEEN '$from' AND '$to' AND Emp_ID = '$emp_id' 
```

然后，您可以遍历`foreach ($offdays as $offday) {`并更新这些休息日：

```
UPDATE Schedule SET Shift_ID = '$off' WHERE Date BETWEEN '$from' AND '$to' AND Emp_ID = '$emp_id' AND DATE_FORMAT(Date, '%a') = '$offday' 
```

那应该`$offday's`将范围内的所有内容更新为`$off`.

这将减少您的循环和查询，从而提供更精简的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:33:47.507

```
 $sql = ("SELECT `Date` FROM schedule WHERE (`Date` BETWEEN '$from' AND '$to') AND (Emp_ID = '$emp_id')"); 
```

对所有字段名日期使用反引号（`），因为它在 mysql 中保留。

# jms - jms 在任何服务器上发送消息

> ID：13605069
> 
> 赞同：0
> 
> 时间：2012-11-28T12:27:37.920
> 
> 标签：jms, sendmessage

我想编写用于在任何 jms 服务器上发送消息的通用代码。所以为此我想如果我有 jndi.properties 文件，那么我们可以将服务器配置放在这个文件中，我们可以通过代码访问这个文件，但我只能为“ActiveMQ 服务器”执行此操作。现在我面临在任何其他服务器（如 glassfish 服务器或 jboss 服务器）上发送消息的问题。有人可以帮我完成这项任务。

这是我的代码：

```
public class Producer 
{
   public Producer() throws JMSException, NamingException,IOException 
  {
   InputStream is = getClass().getResourceAsStream("my.jndi.properties");
   Properties jndiParamaters = new Properties();
   jndiParamaters.load(is);  
   Context jndi = new InitialContext(jndiParamaters); 
   ConnectionFactory conFactory = (ConnectionFactory) jndi.lookup("connectionFactory");
   Connection connection; 
   connection = conFactory.createConnection();
try 
{
    connection.start();   
   Session session = connection.createSession(false,Session.AUTO_ACKNOWLEDGE);  
    Destination destination = (Destination) jndi.lookup("Myqueue"); 
    MessageProducer producer = session.createProducer(destination); 
    TextMessage message = session.createTextMessage("Hello World!"); 
    producer.send(message);
    System.out.println("Sent message '" + message.getText() + "'");
} 
finally 
{
   connection.close();
}
}
public static void main(String[] args) throws JMSException 
{   
try
{
   BasicConfigurator.configure();
    new Producer();
} 
catch (Exception e) 
{
  e.printStackTrace();
}

}

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:33:10.680

您是否尝试过使用 Spring JMS 模板？[http://static.springsource.org/spring/docs/2.0.x/reference/jms.html](http://static.springsource.org/spring/docs/2.0.x/reference/jms.html) 它为 JMS 提供了一个抽象层，并且可能在您的实现发生变化时为您提供帮助。

# asp.net - 从excel中提取的空字段

> ID：13605070
> 
> 赞同：0
> 
> 时间：2012-11-28T12:27:44.937
> 
> 标签：asp.net, asp.net-mvc-3, excel

这是我的问题：

我正在从 .NET MVC 应用程序上的 Excel 文件中读取数据，我正在做的是从 excel 中读取所有数据，然后遍历每条记录，将记录中包含的数据插入到我的业务模型中。

一切都完美无缺。但是，我发现有时从 excel 中检索一个字段时会返回一个空字符串。奇怪的是，这个字段可以包含一个简单的字符串或一个将被视为数组的字符串（它可以包含“|”字符来构建数组）在某些 excel 文件中，当“|”字段返回空时 char 存在，而其他不存在时，这种行为在该文件中是一致的。

还有其他字段可以接收分隔符并且总是可以正常工作。这两个字段之间的唯一区别是，工作的是纯字符串，而失败的是一串数字，可能是“|” 将它们分开。

我尝试更改分隔符（我尝试使用 '#' 得到相同的结果）并将单元格专门格式化为文本，但没有任何成功。

这是从excel中提取数据的方法

```
private DataSet queryData(OleDbConnection objConn) {
    string strConString = "SELECT * FROM [Hoja1$] WHERE NUMACCION <> ''";
    OleDbCommand objCmdSelect = new OleDbCommand(strConString, objConn);
    OleDbDataAdapter objAdapter1 = new OleDbDataAdapter();
    objAdapter1.SelectCommand = objCmdSelect;
    DataSet objDataset = new DataSet();
    objAdapter1.Fill(objDataset, "ExcelData");
    return objDataset;
} 
```

我首先检查 excel 中的字段：

```
fieldsDictionary.Add("Hours", table.Columns["HOURS"].Ordinal); 
```

后来，在循环数据集时，我使用以下方法提取数据：

```
string hourString = row.ItemArray[fieldsDictionary["Hours"]].ToString(); 
```

这个 hourString 在某些记录中是空的。在某些 Excel 文件中，当记录包含“|”时为空，而在其他 Excel 文件中不包含时为空。我还没有找到一个文件，它在两个类的记录上都返回空。

我对此感到很困惑。我很确定它必须与字段数据的数字性质有关，但无法理解为什么当我将 excel 文件上的单元格强制为“文本”时它不能解决

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:11:21.073

好的。我终于解决了这个问题。

如果 Excel 包含可能不同类的数据，则似乎 Excel 无法将整个列识别为相同的数据类型。即使您将单元格格式强制为工作簿上的文本，也会发生这种情况，因为当您查询数据时，它会根据收到的第一条记录将该字段识别为确定类型；这就是为什么不同的文件会清空不同类型的记录，以纯文本开头的文件会清空数值，反之亦然。

我找到了一个解决方案，只需将连接字符串更改为 Excel。

这是我原来的连接字符串

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=pathToFile;Extended Properties="Excel 8.0;HDR=Yes;" 
```

这是解决问题的那个

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=pathToFile;Extended Properties="Excel 8.0;HDR=Yes;IMEX=1" 
```

参数 IMEX=1 向 excel 表明它必须将所有混合数据列作为纯文本进行管理。如果您需要编辑 excel 文件，这对您不起作用，因为此参数也会以只读模式打开它。然而，它非常适合我的情况。

# hadoop - 使用单个映射器的 Hadoop 流式传输

> ID：13605074
> 
> 赞同：0
> 
> 时间：2012-11-28T12:28:04.667
> 
> 标签：hadoop, hadoop-streaming

我正在使用 Hadoop 流，我启动脚本如下：

```
../hadoop/bin/hadoop jar ../hadoop/contrib/streaming/hadoop-streaming-1.0.4.jar \
        -mapper ../tests/mapper.php     \
        -reducer ../tests/reducer.php   \
        -input data                     \
        -output out 
```

“数据”是 2.5 GB 的 txt 文件。

但是在 ps axf 我只能看到一个映射器。我尝试使用 -Dmapred.map.tasks=10，但结果相同 - 单个映射器。

如何让 hadoop 拆分我的输入文件并启动多个映射器进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:15:53.050

详细说明我的评论 - 如果您的文件不在 HDFS 中，并且您正在使用本地运行程序运行，那么文件本身将仅由单个映射器处理。

一个大文件通常由几个映射器处理，因为它作为几个块存储在 HDFS 中。

一个 2.5 GB 的文件，块大小为 512M，在 HDFS 中将被拆分为约 5 个块。如果文件是可拆分的（纯文本，或使用可拆分的压缩编解码器，例如 snappy，但不是 gzip），则 hadoop 将启动每个块的映射器来处理文件。

希望这有助于解释您所看到的

# javascript - 获取并呈现集合后，是否可以在 Backbone 中触发事件？

> ID：13605076
> 
> 赞同：3
> 
> 时间：2012-11-28T12:28:08.363
> 
> 标签：javascript, backbone.js, backbone-events

在 Backbone 集合上调用 collection.fetch({ add: true }) 之后，我想在更新集合的视图完成渲染后触发一个事件。

“[集合视图](https://github.com/hubgit/hubmed/blob/gh-pages/js/views.js#L129)”有一个“添加”方法，它为集合中的每个新项目生成一个“[项目视图](https://github.com/hubgit/hubmed/blob/gh-pages/js/views.js#L157)”，在该视图上调用“渲染”，并将其添加到集合视图中。

有没有办法在获取集合完成时触发事件，并且所有项目都已添加和呈现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T21:32:42.083

[`fetch`集合上](http://backbonejs.org/#Collection-fetch)的方法需要一个`success`参数：

> **拿来** `collection.fetch([options])`
> 
> [...]**选项**哈希接受`success`和`error`回调，它们将分别作为参数传递（集合、响应、选项）和（集合、xhr、选项）。

`success`回调将在集合更新*后被*调用，因此它将*在*所有`"add"`事件被触发和处理后被调用。所以你可以这样做：

```
collection.fetch({
    success: function(collection, response, options) {
        collection.trigger('fetched_and_notified');
    }
}); 
```

任何关心的人都可以`collection.on('fetched_and_notified', ...)`收听这样的事件。如果您愿意，您可以提供自己的`fetch`实现来自动触发此事件，如下所示：

```
fetch: function(options) {
    options = options ? _.clone(options) : { };

    var success     = options.success;
    options.success = function(collection, response, options) {
        collection.trigger('fetched_and_notified', collection);
        if(success)
            success(collection, response, options);
    };
    Backbone.Collection.prototype.fetch.call(this, options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:12:29.023

[您可以使用Backbone.Events](http://backbonejs.org/#Events)根据您的应用程序在各种对象上触发自定义事件

要在渲染视图后触发事件，请执行以下操作：

```
var MyView = Backbone.View.extend({

  initialize: function() {
     _.bindAll(this);
  },  

  render: function() {
     //Do all the rendering

     this.trigger('myEvent');
  }
}); 
```

[this.trigger('myEvent'](http://backbonejs.org/#Events-trigger) ) 是行之有效的。

# android - 后台接近警报服务

> ID：13605080
> 
> 赞同：0
> 
> 时间：2012-11-28T12:28:15.900
> 
> 标签：android

我正在开发一个应用程序，当用户输入具有给定纬度、经度和半径的特定位置时，我需要一个接近警报。我编写了一个服务，该服务`LocationListener`通过 a 实现和侦听，`BroadcastReceiver`以便在用户靠近时发出通知。一切正常，但是当我从最近的应用程序列表中删除应用程序时，它不再发送广播意图。但是根据我的实际要求，即使用户从最近列表中删除应用程序或应用程序不在后台，当用户处于具有给定半径的特定纬度和经度时，我也需要收到通知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:00:37.250

我认为你做错了。我确定是否在您的帖子中提供了一些代码。

您必须`LocationManager`用于此类要求。在此处阅读[文档](http://developer.android.com/reference/android/location/LocationManager.html)。第一行说

> 此类提供对系统位置服务的访问。这些服务允许应用程序获取设备地理位置的定期更新，***或在设备进入给定地理位置附近时触发应用程序指定的 Intent。***

`addProximityAlert`即使您的应用未运行，也可以使用其 API注册接近警报。

# android - Cocos2dx Android：getFileData 无法从资产中获取 .json 文件

> ID：13605092
> 
> 赞同：0
> 
> 时间：2012-11-28T12:29:20.330
> 
> 标签：android, c++, json, cocos2d-x, assets

我正在开发适用于 Android 和 IOS 的跨平台应用程序。当我尝试获取位于 assets 文件夹中的 .json 文件时，如下所示

```
const char * genrefile =   CCFileUtils::sharedFileUtils()->fullPathFromRelativePath("genres.json");
CCLog( " %s ---------- genrefile ---------", genrefile);

size_t size;
unsigned char * charbuffer = CCFileUtils::sharedFileUtils()->getFileData(genrefile, "rb", 0); 
```

控制来自具有以下堆栈跟踪的应用程序

```
11-28 16:53:51.319: INFO/DEBUG(13089): *** *** *** *** *** *** *** *** *** *** *** *** 

*** *** *** ***
11-28 16:53:51.319: INFO/DEBUG(13089): Build fingerprint: 'samsung/GT-P7300/GT-P7300:3.1/HMJ37/XWKI3:user/release-keys'
11-28 16:53:51.319: INFO/DEBUG(13089): pid: 13255, tid: 13263  >>> com.humit <<<
11-28 16:53:51.319: INFO/DEBUG(13089): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
11-28 16:53:51.319: INFO/DEBUG(13089):  r0 000c4780  r1 00218274  r2 00000000  r3 00000000
11-28 16:53:51.319: INFO/DEBUG(13089):  r4 80f80524  r5 00000000  r6 5c160c18  r7 52b1df2c
11-28 16:53:51.319: INFO/DEBUG(13089):  r8 5c160b70  r9 52b1df24  10 52b1df10  fp 00000000
11-28 16:53:51.319: INFO/DEBUG(13089):  ip afc03108  sp 5c160488  lr 80d5f981  pc 80d5f516  cpsr 40000030
11-28 16:53:51.319: INFO/DEBUG(13089):  d0  c449c9bc448522eb  d1  447a0000c425612c
11-28 16:53:51.319: INFO/DEBUG(13089):  d2  46fffe00c47a0000  d3  c1e00000ffffffe4
11-28 16:53:51.319: INFO/DEBUG(13089):  d4  c1dec600c1dac600  d5  4110000000000009
11-28 16:53:51.319: INFO/DEBUG(13089):  d6  3f800000ffffffe0  d7  4485261dbf800000
11-28 16:53:51.319: INFO/DEBUG(13089):  d8  0000000000000000  d9  0000000000000000
11-28 16:53:51.319: INFO/DEBUG(13089):  d10 0000000000000000  d11 0000000000000000
11-28 16:53:51.319: INFO/DEBUG(13089):  d12 0000000000000000  d13 0000000000000000
11-28 16:53:51.319: INFO/DEBUG(13089):  d14 0000000000000000  d15 0000000000000000
11-28 16:53:51.319: INFO/DEBUG(13089):  scr 60000012
11-28 16:53:51.409: DEBUG/Finsky(2593): [1] 5.onFinished: Installation state replication succeeded.
11-28 16:53:51.459: INFO/DEBUG(13089):          #00  pc 0015f516  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d11CCFileUtils18getFileDataFromZipEPKcS2_Pm)
11-28 16:53:51.469: INFO/DEBUG(13089):          #01  pc 0015f97c  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d11CCFileUtils11getFileDataEPKcS2_Pm)
11-28 16:53:51.469: INFO/DEBUG(13089):          #02  pc 000f0fe2  /data/data/com.humit/lib/libgame.so (_ZN17SelectGenreScreen9loadgenreEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #03  pc 000f11fa  /data/data/com.humit/lib/libgame.so (_ZN17SelectGenreScreen4initEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #04  pc 000f0934  /data/data/com.humit/lib/libgame.so (_ZN17SelectGenreScreen6createEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #05  pc 000f0b1c  /data/data/com.humit/lib/libgame.so (_ZN17SelectGenreScreen5sceneEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #06  pc 000f6c24  /data/data/com.humit/lib/libgame.so (_ZN18RandomPlayerScreen22onHttpRequestCompletedEPN7cocos2d6CCNodeEPv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #07  pc 001bd1fa  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d9extension12CCHttpClient25dispatchResponseCallbacksEf)
11-28 16:53:51.469: INFO/DEBUG(13089):          #08  pc 000f8a72  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d7CCTimer6updateEf)
11-28 16:53:51.469: INFO/DEBUG(13089):          #09  pc 000fe49e  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d11CCScheduler6updateEf)
11-28 16:53:51.469: INFO/DEBUG(13089):          #10  pc 001288c0  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d10CCDirector9drawSceneEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #11  pc 00129ec0  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d21CCDisplayLinkDirector8mainLoopEv)
11-28 16:53:51.469: INFO/DEBUG(13089):          #12  pc 00165a08  /data/data/com.humit/lib/libgame.so (Java_org_cocos2dx_lib_Cocos2dxRenderer_nativeRender)
11-28 16:53:51.469: INFO/DEBUG(13089):          #13  pc 00011d34  /system/lib/libdvm.so
11-28 16:53:51.469: INFO/DEBUG(13089):          #14  pc 000411a2  /system/lib/libdvm.so (dvmCallJNIMethod_staticNoRef)
11-28 16:53:51.469: INFO/DEBUG(13089): libc base address: aff00000
11-28 16:53:51.469: INFO/DEBUG(13089): code around pc:
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f4f4 4c5b44a5 9007447c 92059106 4b599304 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f504 681b58e3 230093a1 2300931f 9b04931e 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f514 601a2200 2b009b06 e07dd100 2b009b05 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f524 e07bd100 781b9b06 d1002b00 9b06e078 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f534 f01a1c18 1c03fef1 9b1e931e d1002b00 
11-28 16:53:51.469: INFO/DEBUG(13089): code around lr:
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f960 1c18447b ed52f16d ab091c04 f16d1c18 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f970 1c02ed4e 9b009903 1c211c08 fdb8f7ff 
11-28 16:53:51.469: INFO/DEBUG(13089): 80d5f980 930a1c03 447b4b75 21651c18 ff9cf7fe 
11-28 
```

`getFileData(...)`类中的方法`CCFileUtils`可以很好地获取图像，但不能用于其他文件。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:14:54.267

试试这个：

```
unsigned long bufferSize = 0;
unsigned char * charbuffer = CCFileUtils::sharedFileUtils()->getFileData(genrefile, "rb", &bufferSize ); 
```

# oracle - sql plus中嵌套循环的困惑

> ID：13605097
> 
> 赞同：0
> 
> 时间：2012-11-28T12:29:35.683
> 
> 标签：oracle, sqlplus

我`IF`在 sql*plus 中使用条件，但无法访问内循环中的外循环变量。这是我的声明：

```
DECLARE
  LOOPSTART INT;
  LOOPEND INT;
  VALUE INT;
  CURSOR EMPID IS (SELECT EMPNO FROM EMP);
BEGIN
  SELECT EMPNO INTO LOOPSTART FROM emp WHERE ROWNUM <= 1;
  SELECT MAX(EMPNO) INTO LOOPEND FROM EMP;

  FOR COUNT IN LOOPSTART..LOOPEND LOOP
    BEGIN
      FOR EMPID1 IN EMPID LOOP
        IF (EMPID1.EMPNO != COUNT) THEN
          DBMS_OUTPUT.PUT_LINE(LOOPSTART);
          exit;
        END IF;
      END LOOP;
    END;
  END LOOP;
END; 
```

这个错误来了：

*ORA-06550：第 13 行，第 22 列：PLS-00204：函数或伪列 'COUNT' 只能在 SQL 语句中使用 ORA-06550：第 13 行，第 2 列：PL/SQL：语句被忽略*

1.  宣布
2.  循环开始；
3.  循环整数；

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:33:46.343

重命名用于 count_my 的变量计数或您喜欢的任何其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:39:25.823

COUNT 是一个 keywork 重命名 COUNT 它将起作用

# android - Android OnClickListener 未触发单独布局上的按钮

> ID：13605099
> 
> 赞同：4
> 
> 时间：2012-11-28T12:29:36.257
> 
> 标签：android, onclicklistener, buttonclick

我有两种不同的布局。一个是在 Activity 启动时加载，另一个是在运行一些检查并创建自定义对话框后加载。对话框中有一个按钮来触发，此时，onclick 有一条 Toast 消息，因此我可以确认该按钮已被单击。不幸的是，单击按钮时我无法得到任何响应。我一直在网上，我找不到我所缺少的。

```
public class myactivity extends Activity{
    Dialog accesspopup;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_myactivity); 

        View inflatedView = getLayoutInflater().inflate(R.layout.dialoglayout, null);
        final Button cabtn = (Button)inflatedView.findViewById(R.id.cb);
        cabtn.setOnClickListener(cListener);
    }

    private OnClickListener cListener = new OnClickListener() {
        public void onClick(View v) {
            //Log.d("HiThereActivity", "THIS IS DEBUG OUTPUT TO LOGCAT");
            Toast.makeText(myactivity.this, "The Start button was clicked.", Toast.LENGTH_LONG).show();
        }
    };

public void showPopup(){
    accesspopup = new Dialog(myactivity.this);
    accesspopup.setContentView(R.layout.pop_window);
    accesspopup.setCancelable(false);
    accesspopup.setTitle("Window Title");
    accesspopup.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:58:08.923

我做了一些更多的搜索，发现我需要在我用来构建和显示对话框的方法中创建 OnClickListener，而不是在 OnCreate 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:04:22.887

用这种方式...

```
public class myactivity extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_myactivity); 

        View inflatedView = getLayoutInflater().inflate(R.layout.dialoglayout, null);
        final Button cabtn = (Button)inflatedView.findViewById(R.id.cb);

        cabtn.setOnClickListener(new OnClickListener()
       {

                public void onClick(View v) 
                {
                       Toast.makeText(myactivity.this, "The Start button was clicked.", Toast.LENGTH_LONG).show();
                }
       });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:00:23.653

可能仍然是您的**R.layout.activity_myactivity**是您活动中的可控内容视图。

所以你必须将你的新布局定义为`setContentView.`

或者你提到它是一个`Dialog`盒子。

因此，您可以为如下所示的对话框添加内容视图，

```
Dialog d = new Dialog (this);
d.setContentView(your inflated view); 
```

# android - 错误 ACTION_INSERT android 2.3

> ID：13605104
> 
> 赞同：1
> 
> 时间：2012-11-28T12:29:51.163
> 
> 标签：android, android-intent, android-calendar, android-event

我正在尝试在日历中插入一个事件，它在 android 4+ 和 android 2.2- 中完美运行，但是当我在 android 2.3 中运行应用程序时，我有这样的强制关闭：

找不到要处理的活动

```
Intent { act=android.intent.action.INSERT dat=content://com.android.calendar/events (has extras) } 
```

我在这里显示代码：

```
 int currentapiVersion = android.os.Build.VERSION.SDK_INT;
            Uri u;
            if (currentapiVersion > android.os.Build.VERSION_CODES.FROYO){
                u = Uri.parse("content://com.android.calendar/events");
            } else{
                u = Uri.parse("content://calendar/events");
            }

            Intent intent = new Intent(Intent.ACTION_INSERT)
                    .setData(u)
                    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, begin.getTimeInMillis())
                    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, end.getTimeInMillis())
                    .putExtra(Events.TITLE, title)
                    .putExtra(Events.DESCRIPTION, description)
                    .putExtra(Events.EVENT_LOCATION, getString(R.string.lugar)+ ": "+lugar)                     
                    .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY);

                    String dest = new String();
                    for(int k=0;k<destinatarios.length;k++){
                        if(dest.equals("")){
                            dest = destinatarios[k];
                        }else{
                            dest += ","+destinatarios[k];
                        }

                    }
                    intent.putExtra(Intent.EXTRA_EMAIL, dest);

            startActivity(intent); 
```

我显示logcat：

```
11-28 12:13:06.113: E/AndroidRuntime(350): FATAL EXCEPTION: main
11-28 12:13:06.113: E/AndroidRuntime(350): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.INSERT dat=content://com.android.calendar/events (has extras) }
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.Activity.startActivityForResult(Activity.java:2827)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.Activity.startActivity(Activity.java:2933)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.moya.gestor.futbol.EventList.onContextItemSelected(EventList.java:283)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.Activity.onMenuItemSelected(Activity.java:2209)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback.onMenuItemSelected(PhoneWindow.java:2785)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:137)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:873)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.widget.ListView.performItemClick(ListView.java:3513)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.os.Handler.handleCallback(Handler.java:587)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.os.Looper.loop(Looper.java:123)
11-28 12:13:06.113: E/AndroidRuntime(350):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 12:13:06.113: E/AndroidRuntime(350):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 12:13:06.113: E/AndroidRuntime(350):  at java.lang.reflect.Method.invoke(Method.java:507)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 12:13:06.113: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 12:13:06.113: E/AndroidRuntime(350):  at dalvik.system.NativeStart.main(Native Method) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:02:43.067

试试这个方法来获取不同操作系统版本的事件 URI

```
@TargetApi(14)
private String getCalendarUriBase(Activity act) {

    String calendarUriBase = null;
    Uri calendars = Uri.parse("content://calendar/calendars");
    Cursor managedCursor = null;
    try {
        managedCursor = act.managedQuery(calendars, null, null, null, null);
    } catch (Exception e) {
    }
    if (managedCursor != null) {
        calendarUriBase = "content://calendar/";
    } else {
        calendars = Uri.parse("content://com.android.calendar/calendars");
        try {
            managedCursor = act.managedQuery(calendars, null, null, null, null);
        } catch (Exception e) {
        }
        if (managedCursor != null) {
            calendarUriBase = "content://com.android.calendar/";
        }
    }
    return calendarUriBase;
} 
```

由于不同版本的 URI 会有所不同，您可以使用特定版本的字段名称。CalendarContract 从 4.0 版本开始可用

```
ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
Uri EVENTS_URI = null;
if (currentapiVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
        values.put(CalendarContract.Events.DTSTART, starttime);
        values.put(CalendarContract.Events.DTEND, endtime);
        values.put(CalendarContract.Events.TITLE, eventName);
        values.put(CalendarContract.Events.EVENT_LOCATION, eventLocation);
        values.put(CalendarContract.Events.DESCRIPTION, eventName);
        values.put(CalendarContract.Events.CALENDAR_ID, 1);
        values.put(CalendarContract.Events.HAS_ALARM,1);
        values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());
        values.put(CalendarContract.Events.ALL_DAY, 0);
        values.put(CalendarContract.Events.HAS_ALARM, 1);
        values.put(CalendarContract.Events.ACCESS_LEVEL, CalendarContract.Events.ACCESS_DEFAULT);

        EVENTS_URI = CalendarContract.Events.CONTENT_URI;
    }
    else{
        EVENTS_URI = Uri.parse(getCalendarUriBase(getInstance()) + "events");

        values.put("calendar_id", 1);
        values.put("title", eventName);
        values.put("allDay", 0);
        values.put("dtstart", starttime);
        values.put("dtend", endtime);
        values.put("description", eventName);
        values.put("visibility", 0);
        values.put("hasAlarm", 1);
        values.put("eventLocation", eventLocation);
        values.put("eventTimezone", TimeZone.getDefault().getID());
    }
//      Log.e("check", EVENTS_URI.toString());

cr.insert(EVENTS_URI, values); 
```

# mysql - 显示来自具有相同字段的两个表的数据

> ID：13605116
> 
> 赞同：-2
> 
> 时间：2012-11-28T12:30:15.113
> 
> 标签：mysql, sql, join

我有两个表 table1 和 table2 具有相同的字段。如果我想显示来自 table1 和 table2 的数据怎么办？我有这样的表：

表格1

```
无名
1个

```

表2

```
无名
2 乙

```

我想要结果：

```
无名
1个
2 乙

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:31:37.670

```
SELECT no, name FROM table1
UNION ALL
SELECT no, name FROM table2 
```

`UNION ALL`vs之间的区别`UNION`？

*   `UNION`删除重复项
*   `UNION ALL`没有，只是追加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:31:34.340

采用[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)

```
SELECT NO, Name FROM Table1
UNION
SELECT NO, Name FROM Table2 
```

如果您不想删除重复记录，请使用`UNION ALL`

```
SELECT NO, Name FROM Table1
UNION ALL
SELECT NO, Name FROM Table2 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/83a85/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:32:11.110

尝试：

```
select no, name from table1
union all
select no, name from table2 
```

# android - 当我还没有钥匙时，如何防止 Flurry 崩溃

> ID：13605120
> 
> 赞同：0
> 
> 时间：2012-11-28T12:30:34.527
> 
> 标签：android, flurry

有时我的应用程序无法及时编写密钥。当它不能时，这是一个会导致整个应用程序崩溃的异常。有什么方法可以设置 Flurry 使其在这些情况下不会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:55:19.977

通常我这样定义密钥：

```
public final static String FLURRY_KEY = "your key..."; 
```

这不会产生任何问题，如果这不是一个可能的解决方案，请说明您如何尝试实施它。

# jsp - 所有下拉值的总和

> ID：13605126
> 
> 赞同：0
> 
> 时间：2012-11-28T12:31:04.683
> 
> 标签：jsp, jdbc

我的 jsp 中有一个包含数据库中所有用户的下拉列表。当我选择一个用户时，我可以获得相应结果的详细信息，但是当我点击全部时，它应该单独给出总数。下面是我用来单独获取的代码。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@include file="DBCon.jsp" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8" />

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#from" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                $( "#to" ).datepicker( "option", "minDate", selectedDate );
            }
        });
        $( "#to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    });
    </script>

    </head> 
    <body><form name="Reports" method="post" action="DropDown.jsp"><table><tr>

                     <td>From</td><td><input type="text" id="from" name="from"></td></tr>

                     <tr><td>To</td><td><input type="text" id="to" name="to"></td></tr>
                     <tr><td>Select user:</td><td><select name="user" id="user">

            <option value="">Select User</option>
            <%
            try{
                ps=con.prepareStatement("select substr(sys_connect_by_path(userid,','),2) userid from (select rownum rowno,'''' || userid || '''' userid from users where rownum < 4)where connect_by_isleaf = 1 connect by prior rowno = rowno - 1 start with rowno = 1");
                rs=ps.executeQuery();
                while(rs.next()){
              %>
                <option value="<%String user2=rs.getString(1);out.println(user2);%>">All</option>
                <%
            }
            }
            catch(Exception e)
                                       {
                out.println(e);
            }
            %>
            <%
            try{
                ps=con.prepareStatement("Select Distinct Specialist from Scope1");
                rs=ps.executeQuery();
                while(rs.next()){
              %>
                <option value="'<%String user1=rs.getString(1);out.print(user1);%>'"><%out.print(user1);%></option>
                <%
            }
            out.println("<select>");
            }
            catch(Exception e)
                                       {
                out.println(e);
            }
            %>

                             </select></td></tr>
                     <tr><td>
        Select Type:</td><td><select name="type" id="type">
            <option value="">Select Type</option>
            <option value="'Updates','Multibases','DAIS','Acds','Legis','LegAll'">All</option>
            <%
            try{
                ps=con.prepareStatement("Select Distinct type from Scope1");
                rs=ps.executeQuery();
                while(rs.next()){
        %>
                <option value="'<%String type1=rs.getString(1).trim();out.print(type1);%>'"><%out.println(type1.trim());%></option>
                <%
            }
            out.println("<Select>");
            }
            catch(Exception e)
                                       {
                out.println(e);
            }
            %>
                            </select></td></tr>
                     <tr><td><input type="submit" value="Generate" id="sub1" name="sub1"></td></tr>
        </table> </form>   </body>
</html> 
```

得到的结果如下。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@include file="DBCon.jsp" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body><table>
        <%
        String a=request.getParameter("type").trim();
        String b=request.getParameter("user").trim();
        String c=request.getParameter("from").trim();
        String d=request.getParameter("to").trim();
        try{%>
        <tr><b><%=b%></b></tr><%
            //String sql=("SELECT type, SUM(Update_Count) FROM Scope1 where type in ("+a+") and Specialist in ("+b+") and (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"') group by type");
            //out.print(sql);
            ps1=con.prepareStatement("SELECT type, SUM(Update_Count) FROM Scope1 where type in ("+a+") and Specialist in ("+b+") and (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"') group by type");
            rs1=ps1.executeQuery();
            while(rs1.next())
            {
            %>

            <tr><td><b><%=rs1.getString(1)%></b></td><td><%=rs1.getString(2)%></td></tr>
            <%
            }
        }
        catch(Exception e)
        {
            out.println(e);
}
%>
   </table> </body>
</html> 
```

谢谢

# asp.net-mvc - 至少一个对象必须实现 IComparable？

> ID：13605128
> 
> 赞同：3
> 
> 时间：2012-11-28T12:31:18.477
> 
> 标签：asp.net-mvc, linq, dynamic-linq

模型：

```
return (from m in meterReadings
       group m by new { date = m.ReadDate } into g
       select new
       {
           ReadDate = g.Key.date.ToString("dd.MM.yyyy - HH:mm:ss"),
           T1 = from t1 in g
                where t1.Name == "T1"
                select t1.Value.ToString("0,0.000"),
           T2 = from t2 in g
                where t2.Name == "T2"
                select t2.Value.ToString("0,0.000"),
           T3 = from t3 in g
                where t3.Name == "T3"
                select t3.Value.ToString("0,0.000"),
           Total = from total in g
                where total.Name == "Toplam"
                select total.Value.ToString("0,0.000")
       }).AsQueryable<object>(); 
```

询问

```
var table = MeterReadingManager.GetMeterReadingsPivot(meterReadings, 1);
//No Error (in title)
rows = table.OrderBy("ReadDate","desc").Skip((pageIndex) * pageSize).Take(pageSize)
//Error  (in title)
rows = table.OrderBy("T1","desc").Skip((pageIndex) * pageSize).Take(pageSize) 
```

当我按 ReadDate 订购时，它可以工作。但是当我尝试按其他字段排序时，我得到了错误：`At least one object must implement IComparable`

为什么我会收到此错误？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:24:30.507

如果要对任何类型的项目列表进行排序，则必须实现该类型才能`IComparable`使排序算法能够比较项目。`T1`是一个`IQueryable`，没有实现`IComparable`。我认为您打算为 T1、T2 和 T3 创建字符串值。如果是这样，您应该添加`FirstOrDefault()`到创建 T1 等的每个 linq 语句中。

**编辑**

（在您发表评论后）

我的意思是：

```
T1 = (from t1 in g
     where t1.Name == "T1"
     select t1.Value.ToString("0,0.000")).FirstOrDefault() 
```

Now`T1`是一个字符串，因此可以用于排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:43:33.313

你可以试试`ThenByDescending`：

```
var rows = table
    .OrderByDescending(x => x.ReadDate).Skip((pageIndex) * pageSize).Take(pageSize)
    .ThenByDescending(x => x.T1).Skip((pageIndex) * pageSize).Take(pageSize); 
```

**更新**：如果按一个字段排序，您可以使用反射（慢一点）：

```
var tableInfo = table.GetType().GetProperty("T1"); 
var sortedRow = table.OrderByDescending(x => tableInfo.GetValue(x, null)).Skip((pageIndex) * pageSize).Take(pageSize); 
```

# javascript - 使用 Silverlight 以编程方式打开新的浏览器选项卡并设置内容

> ID：13605132
> 
> 赞同：1
> 
> 时间：2012-11-28T12:31:30.877
> 
> 标签：javascript, silverlight

想知道 Silverlight 中是否有任何方法可以打开新的浏览器选项卡并设置其内容。简而言之，我的应用程序接收文件（二进制数据）并且需要让用户的浏览器显示它们。

我的应用程序从云存储库中下载内容（图像/pdfs/whatever），并将它们作为二进制数据存储在本地缓存中；然后在那之后，我需要一种方法在新选项卡中向最终用户显示这些现在的本地内容。“新标签”的要求是由于 silverlight 不支持渲染许多文件类型，例如 .gif、.pdf 和其他文件——浏览器可以轻松处理的东西，无论是本机还是广泛使用的插件。所以我目前的 WTF-y 解决方案使用 System.Windows.Browser 并包含以下内容：

```
 // Get document and body
        var doc = HtmlPage.Document;
        var body = doc.Body;

        // Create a <form> element and add it to the body
        var newForm = doc.CreateElement("form");
        newForm.SetAttribute("action", "www.example.com/contentpresenter.php");
        newForm.SetAttribute("enctype", "multipart/form-data");
        newForm.SetAttribute("method", "POST");
        newForm.SetAttribute("target", "_blank");
        body.AppendChild(newForm);

        var inp = doc.CreateElement("input");
        inp.SetAttribute("type", "text");
        inp.SetAttribute("name", "mcontent");
        inp.SetAttribute("value", Tools.ToBase64( content.Content as Stream ));
        newForm.AppendChild(inp);

        var inpt = doc.CreateElement("input");
        inpt.SetAttribute("type", "text");
        inpt.SetAttribute("name", "tcontent");
        inpt.SetAttribute("value", content.ContentType);
        newForm.AppendChild(inpt);

        // Send away!
        newForm.Invoke("submit"); 
```

简而言之，它创建了一个将内容发布到远程 PHP 脚本的 javascript 脚本，该脚本只对内容进行解码和呈现，这将在新选项卡中打开。是的，我完全知道这听起来多么愚蠢——但它确实起到了作用并按预期工作。

据我所知，由于安全限制，创建一个新的 HtmlWindow 并构建/更改其内容不是一种选择。一个明显的选择是让 Silverlight 生成 javascript，这反过来会创建一个新选项卡来加载所提供的内容，但是 javascript 在处理二进制或 base64 数据方面并不太大 - 至少不能无缝地跨浏览器 - 无论如何，整个事情看起来都很愚蠢.

有没有一种解决方案可以仅通过 Silverlight 实现这一目标，或者至少涉及最少数量的 javascript？或者，您是否推荐任何 javascript 库来处理 base64 数据？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:42:45.487

我建议你找到 Telerik 的 silverlight 组件源并使用 RadHtmlPlaceholder（有点错误）。+ 您可以启用受信任的应用程序以在 SL 5 的浏览器中运行并使用 WebBrowser 控件（最佳质量），但仅适用于 Windows。

# database - 填充表中的 SQLite 查询不返回任何内容？

> ID：13605135
> 
> 赞同：1
> 
> 时间：2012-11-28T12:31:41.503
> 
> 标签：database, sqlite

我在 sqlite 中创建了一个名为 AllWords.db 的数据库，其中包含所有英文单词的列表（计数：172820）。当我发出全选查询时，它会返回一个包含所有 172820 个单词的列表。另外，当我像这样打印表格单词的计数时：

```
SELECT COUNT(*) FROM words; 
```

输出是 172820，所以数据库清楚地包含了所有的单词。但是，当我尝试检查一个单词是否存在（我唯一想要对这个数据库做的事情）时，它不会打印任何东西：

```
SELECT * FROM words WHERE word="stuff"; 
```

什么都不返回。

该数据库是一个表，唯一的列是“单词”，其中所有单词都作为行。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:37:49.400

只是为了确保您在数据库中使用了一个词，请查看您的表

```
select * from words limit 10 
```

> 房子的
> 东西
> 树
> ...

然后选择您看到的单词之一

```
select * from words where word = 'stuff' 
```

**编辑**：根据@MichaelEakins 修复 where 子句

**Edit2**：不幸的是，在这种情况下单引号和双引号之间没有区别，请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!5/48e4c/4/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:41:03.540

回答我自己的问题，因为我知道出了什么问题。为了填充表格，我编写了一个 python 程序来将一个名为 words.txt 的文件（所有单词，由换行符分隔）解析为 sqlite。我的问题是查询变成了：

```
INSERT INTO WORDS VALUES('englishWord\n') 
```

这弄乱了数据库。我修复了它并开始工作，感谢@ScoPi 使用 LIKE 的提示，它帮助我弄清楚有一个流浪的换行符。

# c++ - 使用来自不同线程的数据实时更新 QTableView 的最佳策略

> ID：13605141
> 
> 赞同：6
> 
> 时间：2012-11-28T12:31:56.463
> 
> 标签：c++, multithreading, qtableview, ui-thread

我有一个应用程序，现在启动几个线程（如 5-10）来收集来自不同来源的数据。
它们与主 GUI 线程分开，所以我不会感觉到 GUI 有任何缓慢，而且我可以在后台线程工作时继续工作。一切都很好。
但现在我希望能够在我的主 GUI 中的 QTableView 中显示结果。数据是分配给它们的字符串，它可以有 10,000 到 100,000 个结果，这些结果应该在 QTableView 中多达 100,000 行。

我的问题是从线程更新主 GUI 中的表的最佳方法是什么，以便 TH GUI 在更新时不会变慢或空闲。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T12:59:39.310

我会这样做：

向工作线程添加一个信号，该信号在每次新一批数据准备好时发出。使用 Qt::QueuedConnection 将此信号连接到主 GUI 线程中定义的插槽。这个槽应该从工作线程收集处理过的数据并将其插入到表的模型中。模型自然也应该在 GUI 线程中。

## 更新 1

更详细的解释。你已经把线程搞定了，所以你所要做的就是稍微扩展它们。例子：

```
// NOTE:
// In this example I'm assuming that the thread continues to work after
// preparing first batch of data. One thread can prepare multiple batches
// over time. If that's not the case for you then you can probably
// safely ignore mutex stuff and intermediary tmp variables.
class MyWorker : public QThread
{
    // ...
    public:
        void run()
        {
            while (bWork)
            {
                QList<MyData> myData;
                // Populate 'myData' variable with your data.
                // ...

                // Now, store myData in more persistent buffer and emit the
                // ready signal.
                dataBatchMutex.lock();
                dataBatch.append(myData);
                dataBatchMutex.unlock();
                emit dataBatchReady();
            }
        }

        QList<MyData> popLastBatch()
        {
            QMutexLocker l(&dataBatchMutex);
            QList<MyData> tmp = dataBatch;
            dataBatch.clear();
            return tmp;
        }

    signals:
        void dataBatchReady();

    private:
        QMutex dataBatchMutex;
        QList<MyData> dataBatch;
}; 
```

我们有工作线程。现在关于 GUI 线程：

1.  创建您的工作线程对象。
2.  将信号连接`dataBatchReady()`到 GUI 线程中的插槽。记得使用`Qt::QueuedConnection`.
3.  启动线程。
4.  执行该插槽时，您需要确定哪个工作线程具有新数据。您可以将它们全部弹出（效率不高），或者您可以向工作人员添加其他方法以查明该`dataBatch`字段是否为空。您还可以发明其他方法来确定哪个线程发出了信号 - 这取决于您自己的想法。
5.  当您找出线程时，只需调用该`popLastBatch()`线程并将返回的列表添加到模型中。该模型将负责其余的工作。如果您仍有性能问题，请参阅 tHand 的回复。

**注意：**我没有测试代码，所以它可能包含一些明显的错误。不过，您应该明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:32:40.200

您的性能问题可能与添加每一行时控件执行的操作有关。

例如参见： [QTableView 非常慢（即使只有 3000 行）](https://stackoverflow.com/questions/4031168/qtableview-is-extremely-slow-even-for-only-3000-rows)

# ios - 从对象属性中获取 null 而不是字符串

> ID：13605142
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:32:00.233
> 
> 标签：ios

请看一下这个![调试器片段](../Images/aad86a37da6a3ae745450475d8ba3880.png) 所以...我填满了这个属性，对吗？它属于我的`visit`对象

所以我尝试使用以下方法从中获取该字符串：

```
NSLog([NSString stringWithFormat:@"%@/%@", @"Doctor: ", visit.doctorName]); 
```

这是输出：

> 医生：/(null)

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:53:26.377

**回答更新的问题：**

你能告诉我们你是如何声明属性医生名的吗？你用ARC吗？

# python - IPC 通信：使用 POSIX IPC 在 python 中接收 C 应用程序发布的结构

> ID：13605152
> 
> 赞同：0
> 
> 时间：2012-11-28T12:32:37.317
> 
> 标签：python, posix, ipc, structure

我们开发一个IPC模块

其中应用程序 A（C 应用程序使用 Mqueue）将在 IPC Queue 中发布结构数据

应用程序 B (python Based uses POSIX IPC for Python) 必须访问队列并获取结构数据

由于 Python 没有直接的结构处理能力..我将如何从队列中接收发布的结构

或者是什么方法来处理这个问题..

# android - Android：模拟器定制问题

> ID：13605158
> 
> 赞同：0
> 
> 时间：2012-11-28T12:33:08.097
> 
> 标签：android

我有 android sdk 21。我正在尝试使用 api 15 和自定义分辨率创建虚拟设备。问题是没有可以设置自定义分辨率的字段。那可能吗 ？。还有一件事，为什么我不能将 CPU 更改为 Intel ？我使用 android manager 下载了 SDK。

![在此处输入图像描述](../Images/d5e16fdf628590a5c0d2742ab093adb1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:06:12.963

可能是因为你没有使用最新的 Eclipse -> Juno

就我而言，这是我的 Eclipse 配置

![在此处输入图像描述](../Images/08afe451b88339b0a2036ef7d121f118.png)

这是我的安装

![在此处输入图像描述](../Images/b4572c73bc6fb5a610f0f2d64776e59a.png)

这是我在模拟器配置中得到的

![在此处输入图像描述](../Images/b9abdbca4c9ed24dd0004fb66a9ad538.png)

这是在我的 PC (Windows) 上，但我在我的 MAC Book 上进行了测试，结果完全一样。

# php - 如何使用 Javascript 或 PHP 处理 .LIST 文件？

> ID：13605164
> 
> 赞同：0
> 
> 时间：2012-11-28T12:33:18.980
> 
> 标签：php, javascript, list

我有一个`.list`文件，我想将其用作 JS 或 PHP 的数组。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:05:28.413

**快速解决方案**

```
<?php
$fp = fopen('path/to/your/file.list', 'r');
$array = array();
while( ! feof($fp))
{
    $array[] = fgets($fp, 1024);
}
fclose($fp);

print_r($array);
?> 
```

这将创建一个数组，每个条目都是 .list 文件的一行。

**延伸阅读**

如果您想了解更多信息，例如错误处理，您可以查看[fgets() 上的这个 php 手册页，](http://php.net/fgets)那里有代码示例。

您可能还对[fgetcsv()](http://php.net/fgetcsv)感兴趣，它也有代码示例

# java - 从 bin 文件夹加载类

> ID：13605165
> 
> 赞同：2
> 
> 时间：2012-11-28T12:33:20.470
> 
> 标签：java, eclipse, byte, classloader, bin

我想在我的代码中使用 bin 文件夹中的 .class 文件 - 将其转换为字节，但不知道如何获取它。我有 bin/example.class，我需要加载它并检查我的类有多少字节。

我发现了类似的东西：

```
public class MyClassLoader extends ClassLoader{ 

      public MyClassLoader(){ 
            super(MyClassLoader.class.getClassLoader()); 
      } 
} 
```

但这似乎没有帮助，它必须是一些非常简单的方法来做到这一点。它看起来真的很简单，整个互联网都试图推动我编写数千行 classLoader 代码。

编辑：我的 java 文件是以编程方式编译的，.class 文件是以编程方式创建的，所以我不能只引用它的名称，它也在工作区的其他地方。

一些提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:05:06.957

只需将 bin 文件夹添加到您的类路径！

要获取字节数，请获取资源 URL，转换为 File 对象并查询大小。

例子：

```
package test;

import java.io.File;
import java.net.URISyntaxException;
import java.net.URL;

public class Example {

    public static final String NAME = Example.class.getSimpleName() + ".class";

    public static void main(String[] args) throws URISyntaxException {
        URL url = Example.class.getResource(NAME);
        long size = new File(url.toURI().getPath()).length();
        System.out.printf("The size of file '%s' is %d bytes\n", NAME, size);
    }

} 
```

将输出：

文件“Example.class”的大小为 1461 字节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:07:37.207

你可以这样做：

```
public class MyClassLoader extends ClassLoader { 

    protected synchronized Class<?> loadClass(String name, boolean resolve)
        throws ClassNotFoundException {

        try {
            return super.loadClass(name, resolve);
        }
        catch (ClassNotFoundException e) {

            // TODO: test, if you can load the class with 
            // the given name. if not, rethrow the exception!

            byte[] b = loadClassData(name);
            return defineClass(name, b, 0, b.length);
        }

    }

    private byte[] loadClassData(String name) {
        // TODO: read contents of your file to byte array
    }

} 
```

# c# - Windows Phone 8 线程 无效的跨线程访问

> ID：13605166
> 
> 赞同：2
> 
> 时间：2012-11-28T12:33:21.610
> 
> 标签：c#, windows-phone-8, multithreading

我正在为 Windows Phone 8 制作 Tic-Tac-Toe 游戏，我希望该游戏与自己进行对战，作为主菜单的背景

```
private Button[] bts;
private List<Button> temp = new List<Button>();
private int[,] winningConditions;
private int counter;
private string Board;

public MainPage()
{
    InitializeComponent();
    bts = new[] { _1, _2, _3, _4, _5, _6, _7, _8, _9 };
    winningConditions = new[,] { { 0, 1, 2 }, { 3, 4, 5 }, { 6, 7, 8 }, { 0, 3, 6 },
    { 1, 4, 7 }, { 2, 5, 8 }, { 0, 4, 8 }, { 2, 4, 6 } };
    counter = 0;
    bTextFont();
}

private void NewGame()
{
    foreach (Button i in bts)
        i.Content = "";//here I get an Exception saying Invalid cross-thread access
    while (true)
    {
        NearlyHuman();
        someOneWon();
        counter++;
    }
}
private void form_Loaded(object sender, RoutedEventArgs e)
{
    Thread backGround = new Thread(new ThreadStart(NewGame));
    backGround.Start();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T13:06:47.113

您不能直接从任何其他线程访问 UI 线程。因此，在 Dispatcher.BeginInvoke() 中包含您的 UI 访问代码

```
Dispatcher.BeginInvoke(() =>
    {
        foreach (Button i in bts)
           i.Content = "";
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T19:50:56.003

*   利用**后台工作者**。

对于*Windows Phone 8*： http: **[//msdn.microsoft.com/en-us/library/windows/apps/cc221403 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/cc221403(v=vs.105).aspx)**

# .net - 如何从 Telerik RadGrid 中删除自动生成的列？

> ID：13605169
> 
> 赞同：3
> 
> 时间：2012-11-28T12:33:25.323
> 
> 标签：.net, telerik, radgrid

我动态更改 RadGrid 的列，对于一些我不需要的数据源，我需要 AutoGenerateColumns。但是在使用 AutoGenerateColumns=True 进行数据绑定后，我尝试清除 Columns 列表并添加新的但旧的自动生成的列仍然存在。VB.NET上有一个添加新列的代码示例

```
reportGrid.AutoGenerateColumns = False
reportGrid.Columns.Clear()
Dim column As New GridBoundColumn
column .DataField = "field1"
column .HeaderText = "header1"
reportGrid.Columns.Add(column) 
```

`Columns.Clear()`不删除自动生成的列，我该如何删除它们？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:42:15.307

[链接到 Telerik 网站](http://www.telerik.com/help/wpf/gridview-prevent-column-autogenerate.html)

这是关于如何做你想做的事情的文档。

或检查 `Grid.MasterTableView.AutoGeneratedColums`集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:52:02.660

根据 Telerik 的说法，无法删除已添加到 Grid 的 Column 集合中的 Grid 列。一个建议是将其 Visibile/Display 属性设置为 false。

[http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-removing-column-on-runtime.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-removing-column-on-runtime.aspx)

# javascript - 由于隐藏的 div，按钮不可见

> ID：13605171
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:33:31.857
> 
> 标签：javascript, jquery, html, hidden

我有这个 HTML 代码，我有一个`div`和一个`button`.

现在，我使用 jQuery 进行了`div`“隐藏”，它只会在您选择正确的`<option>`. 但是现在只有在`button`也是时才可见`div`。

HTML：

```
<div id="great">
    Do you like the netherlands?
    <input type="text" id="greatBox" value="Why..."
</div>

<input type="button" id="submitbutton" value="Submit"> 
```

JS/Jquery 看起来像这样

（它分布在文件中，其余的都不需要（我猜））

```
$('#great').hide()

$("#selectlist").change(function(){
    var value = $(this).val();
    if ($(this).val() ==  "netherlands") { 
        $('#great').slideDown(750)
        $('#other').hide()
    }
    if ($(this).val() == "other") { 
        $('#great').hide()
    }
}); 
```

还没有任何 jQuery/javascript 绑定到该按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:43:41.260

你需要关闭`<input type="text" id="greatBox" value="Why..."` `>`

因为它是打开的，所以 div 永远不会关闭，之后的所有内容都将被隐藏。

# c# - 确定是否使用 Microsoft.Deployment.WindowsInstaller.PatchInstallation 安装了补丁

> ID：13605172
> 
> 赞同：1
> 
> 时间：2012-11-28T12:33:31.717
> 
> 标签：c#, wix, windows-installer, wix3.5, dtf

我认为这会相当简单，但是我在使用 PatchInstallation 类时遇到了问题，它是 Microsoft.Deployment.WindowsInstaller 的一部分。

获得正确的补丁代码和产品代码（目标代码）后，我只是调用了 IsInstalled 属性，但正在抛出 ArgumentNullExceptions。

```
PatchInstallation patchInstallation = new PatchInstallation(patchCode.ToString("B"), productCode.ToString("B"));
return patchInstallation.IsInstalled; 
```

异常文本是：

> System.ArgumentNullException 发生 Message=Value 不能为空。参数名称：String Source=mscorlib ParamName=String
> StackTrace: at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)在 Microsoft.Deployment.WindowsInstaller.PatchInstallation.get_State() 在 Microsoft.Deployment.WindowsInstaller.PatchInstallation.get_IsInstalled() InnerException：

如果有人对我做错了什么有任何想法，请告诉我！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:32:42.267

您必须先选择一个上下文，然后才能获得补丁的状态。使用接受 UserContexts 的四参数构造函数并选择 UserManaged、UserUnmanaged 或 Machine 之一。

# windows-8 - WinJS ListView 灵活的项目高度通过 GroupInfo 附加灰色框

> ID：13605173
> 
> 赞同：0
> 
> 时间：2012-11-28T12:33:40.390
> 
> 标签：windows-8, winjs

我正在显示一个 ListView 控件，其中包含不同高度的项目。项目的高度因标题文本元素而异。我读到了[GridLayout 的 groupInfo 属性](http://msdn.microsoft.com/en-us/library/windows/apps/br211744.aspx)，它在调整项目大小方面就像一个魅力。我将单元格的高度设置得相当小，以便我的项目可以适合最近的单元格跨度。

长话短说，我需要在列表末尾添加始终有一个特定项目。我通过手动弹出项目、插入新数据、将项目添加到列表的后面来做到这一点。这行得通。我的渲染函数可以识别项目并正确渲染项目本身（它具有与其余项目不同的 css 类），但它总是在下一列中添加这些灰色框。这些框的大小对应于 groupInfo 单元格宽度/单元格高度的大小。

为什么会出现这种情况？

![在此处输入图像描述](../Images/c406c541fb8a3004fbdaadd630d797a8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:33:40.390

所以就在我输入这个的时候，我想出了一个摆脱这些的方法。还是不明白他们为什么会出现。我查看了用于最后附加的项目的 css。我在上面设置了一个填充。当我删除填充时，灰色框不再出现。

我将渲染的 html 更改为：

```
<div class='item extraclasswithpadding'>
   Content
</div> 
```

至：

```
<div class='item'>
   <div class='extraclasswithpadding'>
      Content
   </div>
</div> 
```

现在一切看起来都很好。不完全是 ListView 的答案会这样做，但肯定是一个可靠的解决方法。

# javascript - javascript放大img

> ID：13605175
> 
> 赞同：1
> 
> 时间：2012-11-28T12:33:42.850
> 
> 标签：javascript, addeventlistener

当发生“鼠标悬停”时，我在尝试更改图像大小时遇到​​了一些问题。

我知道可以用css来实现，但是需要用js来实现。

JS代码：

```
// id is passed to this function.
...
var content = document.getElementById("content");
var li;
// generate lists of img from db.
li = document.createElement("li");      
li.innerHTML = '<img src="' + id + '" />';
content.appendChild(li);
addDomListener(li, 'mouseover', function(){
    li.style.height = '600px';
    li.style.width = '800px';
}); 
```

HTML 代码：

```
<div>
  <ul id="content">
  </ul>
</div> 
```

似乎是对的，但它不起作用。我怀疑问题是“li.style.height”。谁能告诉我实现它的正确方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:38:52.550

`li`您正在更改元素本身的高度和宽度，而不是`img`元素，以替换您的以下代码：

```
li.style.height = '600px';
li.style.width = '800px'; 
```

对于这个：

```
li.firstChild.style.height = '600px';
li.firstChild.style.width = '800px'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:37:39.307

您正在更改 li 元素的尺寸，而不是图像本身，因此行为是预期的。您需要先获得指向图像的指针。

此外，您应该使用 jQuery 来操作 DOM 并在鼠标事件上修改元素的样式。它会让你的喜欢更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:43:32.523

Change the size of the `<img>`, not of the `<li>`:

```
var li = document.createElement("li");
var img = document.createElement("img");
img.src = id;
li.appendChild(img);
content.appendChild(li);
addDomListener(li, 'mouseover', function(){
    img.height = '600px';
    img.width = '800px';
}); 
```

# html - Firefox 打印顶部对齐在第二页不好

> ID：13605179
> 
> 赞同：2
> 
> 时间：2012-11-28T12:33:47.833
> 
> 标签：html, css, firefox, browser

```
<html>
<head>
</head>
<body>
    <div style="height:9.5in;width:7in;position:relative;overflow:hidden;">
        <div style="position: absolute;left: 204px; top: 64px;">
            <h1>One</h1>
        </div>
    </div>
    <div style="page-break-after: always"></div>
    <div style="height:9.5in;width:7in;position:relative;overflow:hidden;">
        <div style="position: absolute;left: 204px; top: 64px;">
            <h1>Two</h1>
        </div>
            <div style="position: absolute;left: 204px; top: 164px;">
            <h1>Three</h1>
        </div>
    </div>
</body>
</html> 
```

上面的代码在浏览器中正确显示，但在 Firefox 的打印/打印预览中，第二页 css 顶部不起作用。“二”和“三”这两个词都被覆盖了。请帮我正确对齐。 ![在此处输入图像描述](../Images/293e0265bc8f6d976b286472c570ba04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:37:23.330

Firefox 中有一个棘手的打印渲染错误会导致此行为。Firefox 中第二个（或更多）打印页面的上边距过高 1 像素。在我称之为“y-pos 死区”的内部，元素的 y 定位被忽略，从而导致文本“Two”和“Three”彼此重叠呈现，就好像它们都具有 css 定义 top ：0像素。

最简单的修复/破解是在第一个页面之后的任何页面上添加一个 margin-top:1px 。

如果您想更好地可视化此问题，请在绝对定位的 div 上添加边框。

（如果您想深入了解 Firefox 是如何进行渲染的，请尝试设置负边距顶部：-80px，它仍然会出现渲染错误。但是如果您突然上升到 -85px，错误就会消失。这开始表明该错误与 Firefox 尝试在页面之间的排水沟周围呈现的方式有关。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T08:27:54.650

我整天都在与这个错误作斗争，直到我发现这个问题，谢谢！这为我指明了正确的方向。purgatory101 的修复对我不起作用，但至少我可以看到，FF 无法打印任何具有绝对位置的东西。我们将其更改为相对，现在它似乎可以工作了。仍然有一个错误，当它从打印机出来时，它会向右移动一点（预览还可以，纸张不行），但这对我来说是一个巨大的成功。

所以我的解决方案：将您需要定位的所有内容放入具有绝对定位的 div 包装器中，并在其中放置与您之前使用的坐标相同的相对 div。

```
<div style="position: absolute;">
       <div style="position: relative; top: ...">
             blah
       </div>
       <div style="position: relative; top: ...">
             bleh
       </div>
</div> 
```

**更新**：我意识到 IE 遭受了类似的错误 - 所有绝对定位的元素都从第二页（例如 z-index 或不透明度）松散了 css 样式，但至少它们保持在正确的坐标上。在我看来，只有 chrome 现在一切正常。

# java - Java字符串格式化解决方案

> ID：13605180
> 
> 赞同：0
> 
> 时间：2012-11-28T12:33:58.997
> 
> 标签：java, string, formatting, spell-checking

我有一个公司的字符串描述，它是由不同的用户（手写）写的讨厌的。这是一个示例（关注点、空格、首字母等）：

> XXXX 是一家全球管理咨询、技术服务和外包公司，拥有 257,000 名员工，为 120 多个国家/地区的客户提供服务。结合无与伦比的经验、跨所有行业和业务职能的综合能力以及对全球最成功公司的广泛研究，XXXX 与客户帮助他们成为高绩效企业和政府。截至 2012 年 7 月 31 日的财政年度，公司创造了 279 亿美元的净收入。

现在我想要的是将字符串格式化为更好的版本，如下所示：

> XXXX 是一家全球管理咨询、技术服务和外包公司，拥有 257,000 名员工，为 120 多个国家的客户提供服务。XXXX 结合无与伦比的经验、跨所有行业和业务职能的综合能力以及对全球最成功公司的广泛研究，与客户合作，帮助他们成为高绩效企业和政府。该公司在截至 2012 年 8 月 31 日的财政年度创造了 279 亿美元的净收入。

我的问题是：是否有任何已定义方法的库可以进行所有拼写更正、不需要的空格删除等..？

到目前为止，如果是“///”，我会用“，”和 toUpperCase() 替换像“”这样的东西。在前面等。

```
desc = desc.replace("  ", " ");
desc = desc.replace("..", ".");
desc = desc.replace(" .", ".");
desc = desc.replace(" ,", ", ");
desc = desc.replace(".,", ".");
desc = desc.replace(",.", ".");
desc = desc.replace(", .", ".");
desc = desc.replace("*", ""); 
```

我确信有一个更清洁和更好的版本可以做到这一点。也许使用正则表达式？

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:37:03.663

如果我试图解决您的问题，我可能会一次阅读文本 1 `char`，并在您进行时对其进行格式化。例如，在伪代码中......

```
while (has more chars){
    char letter = readChar();
    if (letter == ','){
        // checking for the ',.' combination
        letter = readChar(); 
        if (readChar == '.'){
            // write out a '.' only
            out.print('.');
        }
        else {
            // it wasn't the ',.' combination, so you need to output both characters, whatever they are
            out.print(',');
            out.print(letter);
        }
    }
    else if (another letter you want to filter){
        // etc.
    }
    else {
        // doesn't match any of the filters, so just output the letter
        out.print(letter);
    }
} 
```

基本上，如果您一次阅读文本 1 `char`，您可以随时检测您选择的任何格式问题，并立即更正它们。这提供了性能改进，因为您只读取文本字符串一次（而不是 8 次，就像您目前正在做的那样），并允许您添加任意数量的不同/复杂的格式更改。然而，缺点是您需要自己编写逻辑，而不是依赖内置函数。

# php - 在 Select 上显示结果

> ID：13605181
> 
> 赞同：1
> 
> 时间：2012-11-28T12:33:59.283
> 
> 标签：php, javascript

我在下面使用`code`，它显示？？？仅代替`result`. 你能帮我纠正`error`下面表格中的错误吗？消息显示空白结果，如 ?? 格式。有什么帮助吗？--

```
<table width="100%" border="0" cellspacing="2" cellpadding="2">
  <tr>
    <td width="12%">&nbsp;</td>
    <td width="2%">&nbsp;</td>
    <td width="2%">&nbsp;</td>
    <td width="2%">&nbsp;</td>
    <td width="16%">&nbsp;</td>
    <td width="66%">&nbsp;</td>
  </tr>
  <tr>
    <td><img src="images/australia1.jpg" width="132" height="70"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><select name="select">
      <option>Select Course Type</option>
      <option>Under Graduate</option>
      <option>Post Graduate</option>
    </select>
    </td>
    <td><div id="message"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;/td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

</table>
<script type="text/javascript" language="javascript">
var messages = {
    Under Graduate: 'UG text is here',
    Post Graduate: 'PG text is here'
}
$('select').change(function() {
    $('#message').text(messages[$(this).val()]);
});​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:37:59.930

您的消息对象中有语法错误。您需要在其中包含空格的键周围使用引号：

```
var messages = {
    'Under Graduate': 'UG text is here',
    'Post Graduate': 'PG text is here'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:38:14.440

我认为您只是缺少`value`属性并使用单字标识符

```
<option vale="under_graduate">Under Graduate</option>

var messages = {
    under_graduate: 'UG text is here',
    val1: 'PG text is here'
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:40:11.950

```
<script type="text/javascript" language="javascript">
var messages = {
    under: 'UG text is here',
    post: 'PG text is here'
}
$('select').change(function() {
    if($(this).val() != '')
        $('#message').text(messages[$(this).val()]);
});​
</script>

<select name="select">
  <option value="">Select Course Type</option>
  <option value="under">Under Graduate</option>
  <option value="post">Post Graduate</option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:51:19.903

试试这个

```
 <script type="text/javascript" language="javascript">

  $('#select').change(function() {

    var selectVal = $('#select :selected').val();
     $(#message).text(selectVal);

});
   </script> 
```

并更换

```
 <select name="select"> 
```

经过

```
 <select id="select"> 
```

# sql-server-2008 - 如何限制 SSRS 中的参数？

> ID：13605183
> 
> 赞同：0
> 
> 时间：2012-11-28T12:34:00.757
> 
> 标签：sql-server-2008, ssrs-2008

我有一个 SP 如下

```
CREATE procedure [dbo].[SAMPLE]
(
@ID varchar(20)=null,      

@FromDate varchar(20)=null,
@ToDate varchar(20)=null,
@LastDate varchar(20)=null,
@TransType varchar(50)  = '',
@ProviderId varchar(max)=null,
@Payerid varchar(max)=null,
@PageNum    int =1,
@PageSize int=10,
@Mode int=0,
@DateType  varchar(20)=null,
@SortOrder varchar(10)='',
@SortColumn varchar(50)=''
) 
```

在过程中，实现了一些逻辑。

现在我必须使用上面的 sp 在 SSRS 中生成报告

我按照数据源创建方法，通过选择查询类型作为存储过程创建数据集，现在它显示了上述所有参数。现在我只想为 id 传递参数，**如果 id 存在**于我的表中，它必须显示数据。但我必须显示所有这些参数，但这些参数**不应该要求**传递它的值。

任何机构都可以为我提供解决方案。因为我从 3 天开始就面临着斗争。

**请记住**，它不是向下钻取、钻取或子报表。它是从存储过程创建的简单报告

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:28:22.063

选择参数列表中的每个参数，步骤如下：

1.  转到参数属性
2.  选择“默认值”选项卡
3.  在这里选择“指定值”
4.  给出你想要的值
5.  转到“常规”选项卡将参数选择为“隐藏”
    注意：按照上述步骤操作您不想由用户选择的参数。
    而对于 ID 则保持原样，以便用户在运行报告时可以给出。

# javascript - 如何让 kmllayer 事件在谷歌地球插件上弹出气球

> ID：13605186
> 
> 赞同：1
> 
> 时间：2012-11-28T12:34:20.440
> 
> 标签：javascript, jquery, google-earth-plugin

我使用谷歌地图 api v3 设计了一个功能齐全的地图，但是我想使用谷歌地球插件创建完全相同的地图。地图可以在[这里找到](http://www.spectrumasa.com/mcmap)

我已经设法在 GE - 各大洲和地区加载了 kml 文件。我怎么无法让点击事件工作。不知道这是如何工作的以下是我目前拥有的

```
google.earth.addEventListener(kmlLayer,'click',function(kmlEvent) {
            kmlEvent.preventDefault(); 
            console.log("help");

            $('#balloon').html("");
            kmlClick = true;
            var surveyid = kmlEvent.featureData.id;

            if(!updateSurveyFlag){
                updateSurveyView(surveyid, updateSurveyFlag);
            }
            console.log("help2");
            $.ajax({
                url : 'http://' + top.location.host + '/mcmap/feed/kml.php?action=kmlclick',
                data : "id=" + surveyid,
                dataType : 'json',
                success : function(data) { 
```

控制台记录帮助后没有任何执行。我想使用 GE，因为性能比 GM 好得多，但前提是我使用网络链接。[如果我使用了 fetch kml 方法，则使用此问题](http://code.google.com/p/earth-api-samples/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Summary%20Component%20OpSys%20Browser%20Status%20Stars%20Internal&groupby=&sort=&id=39)中提到的扩展进行放大会很慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:41:42.993

很可能是您对 jquery 的调用`$('#balloon').html("");`失败了。可能是您尝试在 jquery 正确加载之前调用代码。

要解决此问题，请确保在加载完成后对 jquery 进行任何调用。

另外，另一方面，我会尝试通过用命名方法替换匿名函数来分离调用。这种分离不会改变功能，它只是通过避免过度嵌套来保持代码更清晰。

```
// called when jquery and the document have finished loading
$(function() {
  google.earth.addEventListener(kmlLayer,'click', myEventListener);
});

// custom event listener
var myEventListener = function(kmlEvent) {
  kmlEvent.preventDefault(); 
  console.log("help");
  $('#balloon').html(""); // should work now as jquery is ready.
  kmlClick = true;
  var surveyid = kmlEvent.featureData.id;
  if(!updateSurveyFlag) {
    updateSurveyView(surveyid, updateSurveyFlag);
  }

  console.log("help2");

  // etc...
} 
```

# css - CSS在标题中居中我的幻灯片

> ID：13605196
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:04.373
> 
> 标签：css

我一直在尝试将标题内的滑块居中。标题和整个容器整齐地居中，只有 margin: 0 auto; 然后我尝试在标题中包含幻灯片，并尝试通过多种方式正确放置它。是的，我通过使用 position:abslute 然后使用坐标来成功实现自己的配置，但这不适用于世界其他地方。

该网站（正在建设中）是 www.hrcprojectconsulting.com

既然你能看到所有的 CSS 东西，你知道天上可以怎么定位吗？我尝试了所有的保证金组合，但我没有我能想到的选项。

一个好消息是 Internet Explorer 10 现在也可用于 Windows 7，所以 CSS3 的东西和 html5 占位符可以工作，所以我再也不会为向后的东西编码了。

注意：如果您碰巧看到一切正常，这是因为您的显示器和分辨率与我相同。

谢谢你

滑块的代码：

```
 <style type="text/css" media="screen">
#slider {
    width: 960px; /* important to be same as image width */
    height: 150px; /* important to be same as image height */
    position: relative; /* important */
    overflow: hidden; /* important */
}
#sliderContent {
    width: 960px; /* important to be same as image width or wider */
    position: absolute;
    top: 125px;
    left:265px;

    margin-left: 0;
}
.sliderImage {
    float: left;
    position: relative;
    display: none;
}
.sliderImage span {
    position: absolute;
    font: 10px/15px Arial, Helvetica, sans-serif;
    padding: 10px 13px;
    width: 384px;
    background-color: #000;
    filter: alpha(opacity=70);
    -moz-opacity: 0.7;
    -khtml-opacity: 0.7;
    opacity: 0.7;
    color: #fff;
    display: none;
} 
```

我主页的代码：

```
<style type = "text/css">
::selection{ background-color: #E13300; color: white; }
::-moz-selection {background-color: #E13300; color: white; }
::webkit-selection{ background-color: #E13300; color: white; }

body{

    background:url('../assets/uploads/miweb/gradient2.png');
    background-repeat:repeat-x;
    font: 13px/20px normal Helvetica, Arial, sans-serif;
    color: #4F5155;
    margin:0;
    padding:0;
    line-height: 1.5em;

}

b{font-size: 110%;}
em{color: red;}

#maincontainer{
width: 960px; /*Width of main container*/
margin: 0 auto; /*Center container on page*/
}

#topsection{
background: url("../jq185/css/start/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x scroll 50% 50% #2191C0;
height: 300px; /*Height of top section*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:39:18.633

这是因为`ul`具有默认填充。您必须将填充设置为`ul#sliderContent`0：

```
 #sliderContent {
    padding:0;
    margin:0;
 } 
```

然后你应该`position: absolute`从你的样式表中删除。

要将其`sliderContent`放在底部，您可以这样做：

```
 #topsection {
    position: relative;
 }
 #slider {
    position: absolute;
    bottom: 0;
 }
 #sliderContent {
    padding: 0;
    margin: 0;
 } 
```

# sql - 从 SQL 中的存储过程中获取 RETURN 值

> ID：13605198
> 
> 赞同：79
> 
> 时间：2012-11-28T12:35:05.943
> 
> 标签：sql, sql-server

我有一个存储过程，它以 0 或 1 的 RETURN 值结束。

我想在另一个存储过程的 IF 语句中使用这个值。

如何获取前一个存储过程的返回值并将其保存在后者的变量中？

我找不到任何相关的东西。所有问题都是关于在 C# 中获取 RETURN 值。

我在想，也许是这样的：

**SP_二**

```
DECLARE @returnValue INT
SET @returnValue = EXEC SP_One

IF @returnValue = 1
BEGIN
   --do something
END
ELSE
BEGIN
   --do something else
END 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-28T12:40:40.577

这应该适合你。事实上，您正在考虑的那个也可以：-

```
 .......
 DECLARE @returnvalue INT

 EXEC @returnvalue = SP_One
 ..... 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-17T19:59:28.860

接受的答案对双重 EXEC 无效（只需要第一个 EXEC）：

```
DECLARE @returnvalue int;
EXEC @returnvalue = SP_SomeProc
PRINT @returnvalue 
```

而且您仍然需要调用 PRINT（至少在 Visual Studio 中）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-28T12:42:40.003

`EXEC`在令牌之后分配：

```
DECLARE @returnValue INT

EXEC @returnValue = SP_One 
```

# sql - Excel 到 Sql Server 表数据加载问题

> ID：13605201
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:27.097
> 
> 标签：sql, sql-server, excel, ssis

我正在使用 SSIS 将数据从 Excel 导入 Sql 表。

我面临一些字符串值被 NULL 值替换的问题（因为前 8 条记录仅包含数值）。不用说，我尝试使用 IMEX=1 附加连接字符串，但问题仍然存在，我不想按照几篇文章中的建议篡改 REGISTRY。

你们能否建议解决这个问题，在 Excel 中前 8 条记录之后的列中可能存在字符串值，但它应该与数据库中的原始数据一起使用。我正在寻找一个好的解决方法，知道这似乎是一个标准问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:37:08.143

请参阅我对关于如何在事后修复 excel 源的元数据的类似问题的回答。

[https://stackoverflow.com/a/13459855/236348](https://stackoverflow.com/a/13459855/236348)

也试试这个：

> 查看位于注册表 REG_DWORD "TypeGuessRows" 的 [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel]。这是不让 Excel 仅使用前 8 行来猜测列数据类型的关键。将此值设置为 0 以扫描所有行。**这可能会损害性能**。另请注意，添加 IMEX=1 选项可能会导致 IMEX 功能仅在 8 行后设置。改用 IMEX=0 以确保强制注册表 TypeGuessRows=0（扫描所有行）工作。

从这个页面： http: [//www.connectionstrings.com/excel](http://www.connectionstrings.com/excel)

在 Windows 7 中，此键位于：[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Jet\4.0\Engines\Excel]

TypeGuessRows 的范围为 0 表示全部或 1-16 表示要扫描的行数。根据您的应用程序进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:53:23.283

我找到了解决此问题的临时解决方法。如果有一天有人发现它有用，请检查在此处发布...
解决方案：1）在 ConnectionString 中使用 IMEX = 1
2）将第一行保留为 Header = FALSE
3）现在使用数据流任务将数据从 Excel 导入到 Sql数据，但仅在使用条件拆分消除第一行（即标题行）之后。

此解决方案确保即使在前 8 个数据行中没有字母数字值，JET/ACE 连接器的标题为字母数字也会将数据类型检测为 STRING - DT_STR。这解决了在两者之间插入 NULLS 的问题。

有关以 Excel 作为源的问题以及使用 IMEX=1 的可能解决方案的详细信息...请参阅：
URL 1：[http ://microsoft-ssis.blogspot.in/2011/06/mixed-data-types-in-excel-列.html](http://microsoft-ssis.blogspot.in/2011/06/mixed-data-types-in-excel-column.html)

网址 2： [http ://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/1b9020ec-616c-42e2-99c0-18f1258ff5db](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/1b9020ec-616c-42e2-99c0-18f1258ff5db)

谢谢，

贾斯汀·塞缪尔。

# c# - Marshal.copy 从 bitmap.scan0 到 float[]

> ID：13605203
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:28.547
> 
> 标签：c#, bitmap, mono, marshalling

我正在尝试将托管位图复制到非托管浮点数组（用于 Opencl.net 包装器的 Cl.CreateImage2D）。不幸的是，我遇到了一个异常，但是如果我将数组长度 (srcIMGBytesSize) 除以 4，我就成功了。我的数组长度有问题吗？图像格式为 Format32bppArgb。我正在使用单声道。

```
System.Drawing.Bitmap bmpImage = new System.Drawing.Bitmap(inputImage);
bitmapData = bmpImage.LockBits( new Rectangle(0, 0, bmpImage.Width, bmpImage.Height), ImageLockMode.ReadOnly, inputImage.PixelFormat);
IntPtr srcBmpPtr = bitmapData.Scan0;
int bitsPerPixel = Image.GetPixelFormatSize( inputImage.PixelFormat );
srcIMGBytesSize = bitmapData.Stride * bitmapData.Height;
float[] srcImage2DData = new float[srcIMGBytesSize];
Marshal.Copy(srcBmpPtr, srcImage2DData, 0, srcIMGBytesSize);   //Exception at this line
bmpImage.UnlockBits( bitmapData ); 
```

尝试将数据复制到 float[] 数组时出现以下异常：

```
System.Runtime.InteropServices.SEHException (0x80004005): External component has thrown an exception.
   at System.Runtime.InteropServices.Marshal.CopyToManaged(IntPtr source, Object destination, Int32 startIndex, Int32 length)
   at System.Runtime.InteropServices.Marshal.Copy(IntPtr source, Single[] destination, Int32 startIndex, Int32 length) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:04:42.423

从 MSDN查看此[链接](http://msdn.microsoft.com/en-us/library/a53bd6cz.aspx)

> 非托管的 C 样式数组不包含边界信息，这会阻止验证 startIndex 和 length 参数。因此，对应于源参数的非托管数据会填充托管数组，而不管其有用性如何。在调用此方法之前，您必须使用适当的大小初始化托管数组。

基本上，您正在尝试将字节数组复制到浮点数组，每个浮点（单）的大小为 4 个字节，因此，非托管数组中的每四个字节将使用 Marshal.Copy 存储在一个浮点值中，您可以检查一下通过执行以下代码：

```
byte[] byteSrcImage2DData = new byte[srcIMGBytesSize];
Marshal.Copy(srcBmpPtr, byteImage2DData, 0, srcIMGBytesSize); 
```

它之所以有效，是因为整个源数组将使用目标数组的所有字段，这与您第一次尝试仅使用第一季度不同。

您可以使用此代码解决您的问题。您可以先将非托管数组复制到字节数组，然后可以将字节数组复制到浮点数组：

```
System.Drawing.Bitmap bmpImage = new System.Drawing.Bitmap(inputImage);
BitmapData bitmapData = bmpImage.LockBits(new Rectangle(0, 0, bmpImage.Width, bmpImage.Height), ImageLockMode.ReadOnly, inputImage.PixelFormat);
IntPtr srcBmpPtr = bitmapData.Scan0;
int bitsPerPixel = Image.GetPixelFormatSize(inputImage.PixelFormat);
int srcIMGBytesSize = bitmapData.Stride * bitmapData.Height;
byte[] byteSrcImage2DData = new byte[srcIMGBytesSize];
Marshal.Copy(srcBmpPtr, byteSrcImage2DData, 0, srcIMGBytesSize);
float[] srcImage2DData = new float[srcIMGBytesSize];
Array.Copy(byteSrcImage2DData, srcImage2DData,srcIMGBytesSize);   //Exception at this line
bmpImage.UnlockBits(bitmapData); 
```

# actionscript-3 - 事件监听器不会在 AS3 周围第二次工作

> ID：13605204
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:31.683
> 
> 标签：actionscript-3

我被困住了！如果我需要详细说明，请发表评论，我会详细说明。

我尝试创建一些代码，将链接对象动态添加到舞台，然后在放置在正确区域时删除，然后再创建下一个，依此类推。信息在一个数组中，它会循环播放，直到游戏完成并达到*targetScore*。如果计时器用完，游戏将停止，并调用*win()*或*loss()*函数并显示重试按钮。这工作正常，直到游戏停止并且我尝试使用*retry()*函数重新启动程序。*retry()*函数尝试重新设置程序启动时的所有内容，方法是再次创建棒球*对象*，然后让*releaseToDrop()*像第一次一样重复一切。根据我停止的位置，当我第二次到达同一个地方时，*clicktoDrag1()*函数无法拾取当前对象。它可以位于从库动态创建的 8 个对象中的任何一个上。当舞台在 *mouse_up* 上听到监听器时，我可以单击并拖动对象，但随后它有点分崩离析，因为它与数组（在*retry()*函数中重置）稍微不同步，它是目标即使所有跟踪语句都按应有的方式读取，drop on 也无法识别它。我知道这有很多东西要看，我不确定这是否可以通过论坛解决，但任何一般性提示都会受到赞赏。

我通常保持代码简单，但我想推进并让代码自己编写，这似乎一直有效，直到事情变得对我来说太复杂了。

我以前从未发帖寻求帮助，但我已经给出了一切，如果无法修复，我将不得不重新开始并简化。

提前感谢，如果有人花时间看这个，我会很谦虚 - 并且愿意更多地使用这个论坛来成为一个更好的编码器。

这一切都在时间线上，这是代码。

```
import flash.display.MovieClip;
import flash.ui.Mouse;

var startPosX = 450;
var startPosY = 400;

//setup first clip
var baseball:MovieClip = new Baseball();
baseball.name = "baseball";

addChild(baseball);
baseball.buttonMode = true;
baseball.x = startPosX;
baseball.y = startPosY;

activity_txt.text = "Swinging a baseball bat";

//setup small clips
baseballSmall.visible = false;
golfSmall.visible = false;
swimSmall.visible = false;
boxingSmall.visible = false;
tennisSmall.visible = false;
dartsSmall.visible = false;
powerSmall.visible = false;
marathonSmall.visible = false;

theEnd.visible = false;
retry_btn.visible = false;

fast1.visible = false;
fast2.visible = false;
fast3.visible = false;
fast4.visible = false;
slow1.visible = false;
slow2.visible = false;
slow3.visible = false;
slow4.visible = false;

//setup vars
var counter:int = 0;
var sportCounter:int = 0;
var startingLife:int = 15;
var playerLife = startingLife;
var lifeBoost:int = 3;
var targetScore:int = 8;
var countdownTimer:Timer = new Timer(500,0);
var questionTimer:Timer = new Timer(250,2);
var score:int =  0; 

var smallArray = new Array("baseballSmall","golfSmall", "swimSmall", "boxingSmall","tennisSmall", "dartsSmall", "powerSmall", "marathonSmall");
var sportArray = new Array("baseball","Golf", "Swimming", "Boxing", "Tennis", "Darts", "PowerLifting", "Marathon");
var answersArray = new Array("fast", "fast", "slow", "fast", "fast", "slow", "slow", "slow");
var letArray = new Array("fast1", "fast2", "slow1", "fast3", "fast4", "slow2", "slow3", "slow4");
var activityTXTArray = new Array("Golf swing", "100m swim", "Boxing punch", "Tennis racquet swing", "Darts throw", "Power lifting", "Marathon");

var arraySmall:Array = smallArray;
var arrayLet:Array = letArray;
var arrayActivity:Array = activityTXTArray;

//var draggable = getChildByName(sportArray[0]);

//setup bonus bar
bonusBar.gotoAndStop(2);
bonusBar.x = timeBar.x;
bonusBar.y = timeBar.y - timeBar.height;
bonusBar.height = timeBar.height/startingLife * lifeBoost;

playerLife = startingLife;
timeBar.height = playerLife * (300/startingLife);   

/* listeners */
countdownTimer.addEventListener(TimerEvent.TIMER, timerTick);
countdownTimer.start();
retry_btn.addEventListener(MouseEvent.CLICK, retry);
baseball.addEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
stage.addEventListener(MouseEvent.MOUSE_UP, releaseToDrop);

function clickToDrag1(event:MouseEvent):void
{   
    var draggable = getChildByName(sportArray[sportCounter]);
    trace("the counter name is "+ sportArray[sportCounter]);
    trace("the baseball name is "+ baseball.name);
    trace("the draggable name is "+ draggable.name);
    trace("the answer array is "+ answersArray[counter]);
    trace("the sport array is "+ sportArray[sportCounter]);
    this.setChildIndex(draggable,this.numChildren-1);
    draggable.startDrag();
}

function releaseToDrop(event:MouseEvent):void
{
        //get current obj name from sportArray
    var draggable = getChildByName(sportArray[sportCounter]);
        //check if this obj is dropped on the Fast or Slow MovieClip
    if(draggable.hitTestObject(getChildByName(answersArray[counter])))
    {           
            //move on to the next F/S answer
        counter++;
        score++;

        var tick = new Tick();
        addChild(tick);     
        tick.x = 370;
        tick.y = 200;

        activity_txt.text = activityTXTArray.shift();

        playerLife += lifeBoost;
        timeBar.height = playerLife * (300/startingLife);
        bonusBar.gotoAndPlay(2);        

        var smallName = getChildByName(smallArray.shift());
        smallName.visible = true;

        var letters = getChildByName(letArray.shift());
        letters.visible = true;

            //remove the drag listenter on the current object (name assigned via sportArray)
        draggable.removeEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
            //stage.removeEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
            //remove the current object
        removeChild(getChildByName(sportArray[sportCounter]));
            //delete ref
        var deleteRef = getChildByName(sportArray[sportCounter]);
        deleteRef = null;
            //move on to the next one
        sportCounter++;
            //add a new object
        var obj:Class = getDefinitionByName(sportArray[sportCounter]) as Class;
        var myMclip = new obj();
            //name it
        myMclip.name = sportArray[sportCounter];
            //var clipName = getChildByName(sportArray[0]);
        myMclip.x = myMclip.y = 400;
        myMclip.buttonMode = true;
        trace("myClip name "+myMclip.name);
        addChild(myMclip);
            //add listener to new obj (is this removed via draggable?)
        myMclip.addEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
        //stage.addEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
    }
    else{
        draggable.x = startPosX;
        draggable.y = startPosY;
        draggable.stopDrag();
        var cross = new Cross();
        addChild(cross);
        cross.x = 370;
        cross.y = 200
    }   
}

function timerTick(e:TimerEvent):void {
    //removes from 40(life) every half a second
    playerLife -= 1;
    //bar height = % of whats left of life
    timeBar.height = playerLife * (300/startingLife);
    bonusBar.y = timeBar.y - timeBar.height;

    if(playerLife == 0) {                                       
        loseGame(); 
    } else if(playerLife>0 && score > targetScore-1) {
        winGame();
    }
}

function loseGame():void
{
    var removeCurrent = getChildByName(sportArray[sportCounter]);
    removeCurrent.visible = false;  
    hideStuff();
    theEnd.visible = true;
    theEnd.end_txt.text = "sorry you lost"
    retry_btn.visible = true;
    //baseball.removeEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
    //stage.removeEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
    //baseball = null;
    trace(baseball);    
}

function winGame():void
{
    var removeCurrent = getChildByName(sportArray[sportCounter]);
    removeCurrent.visible = false;
    hideStuff();
    theEnd.visible = true;
    theEnd.end_txt.text = "You've won!"
    retry_btn.visible = true;
    baseball.removeEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
    //stage.removeEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
}

function retry(e:MouseEvent):void
{
    playerLife = startingLife;
    timeBar.height = playerLife * (300/startingLife);

    score = 0;
    counter = 0;
    sportCounter = 0;

    countdownTimer.reset();
    countdownTimer.start();

    var baseball:MovieClip = new Baseball();
    baseball.name = "baseball";
    trace("the type is "+baseball);
    trace("the name is " + baseball.name);
    addChild(baseball);
    baseball.buttonMode = true;
    baseball.x = startPosX;
    baseball.y = startPosY; 

    baseball.addEventListener(MouseEvent.MOUSE_DOWN, clickToDrag1);
    //stage.addEventListener(MouseEvent.MOUSE_UP, releaseToDrop);

    activity_txt.text = "Swinging a baseball bat";

    smallArray = arraySmall;
    letArray = arrayLet;
    activityTXTArray = arrayActivity;

    retry_btn.visible = false;
    theEnd.visible = false;
    showStuff();
    smallArray = new Array("baseballSmall","golfSmall", "swimSmall", "boxingSmall","tennisSmall", "dartsSmall", "powerSmall", "marathonSmall");
var sportArray = new Array("baseball","Golf", "Swimming", "Boxing", "Tennis", "Darts", "PowerLifting", "Marathon");
var answersArray = new Array("fast", "fast", "slow", "fast", "fast", "slow", "slow", "slow");
var letArray = new Array("fast1", "fast2", "slow1", "fast3", "fast4", "slow2", "slow3", "slow4");
var activityTXTArray = new Array("Golf swing", "100m swim", "Boxing punch", "Tennis racquet swing", "Darts throw", "Power lifting", "Marathon");
}

function showStuff():void
{
    activity_txt.visible = true;
    fast.visible = true;
    slow.visible = true;
    timeBar.visible = true;
    bonusBar.visible = true;
}

function hideStuff():void
{
    fast1.visible = false;
    fast2.visible = false;
    fast3.visible = false;
    fast4.visible = false;
    slow1.visible = false;
    slow2.visible = false;

    baseballSmall.visible = false;
    golfSmall.visible = false;
    swimSmall.visible = false;
    boxingSmall.visible = false;
    tennisSmall.visible = false;
    dartsSmall.visible = false;

    activity_txt.visible = false;
    fast.visible = false;
    slow.visible = false;
    timeBar.visible = false;
    bonusBar.visible = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T16:59:15.757

OP 已解决该问题，[如此评论中](https://stackoverflow.com/questions/13605204/event-listener-wont-work-second-time-around-as3/16697564#comment18661198_13605204)所示：

> 我没有在游戏结束时移除这个对象，我已经隐藏了它，所以当它再次出现时，就会创建一个副本。我已经删除它而不是隐藏它，它工作正常。在舞台上放置两个剪辑会产生一些奇怪的拖放行为，这有点泄露了它。“这不是‘我的’答案。MangoPop 在评论中回答了这个问题，但忘记添加它作为答案。”

# common-lisp - 使用显式资源管理初始化数据结构时的适当错误处理？

> ID：13605205
> 
> 赞同：5
> 
> 时间：2012-11-28T12:35:34.133
> 
> 标签：common-lisp

初始化数据结构或对象时，如果子对象使用后需要显式释放过程，初始化过程中出现错误应该如何处理？

让我举个例子，用 SUBOBJ1 和 SUBOBJ2 槽初始化一个 OBJECT 对象，将外部指针设置为 int 值：

```
(defun init-object ()
  (let ((obj (make-object)))
    (setf (subobj1 obj) (cffi:foreign-alloc :int)
          (subobj2 obj) (cffi:foreign-alloc :int))
    obj)) 
```

如果我们在 SUBOBJ2 插槽的 FOREIGN-ALLOCing 中出现错误，我们应该对 SUBOBJ1 插槽进行 FOREIGN-FREEing 以避免内存泄漏。

作为一个想法，我可以写如下：

```
(defun init-object ()
  (let ((obj (make-object)))
    (handler-case
        (setf (subobj1 obj) (cffi:foreign-alloc :int)
              (subobj2 obj) (cffi:foreign-alloc :int))
      (condition (c)   ; forcedly handling all conditions
        (when (subobj1 obj) (cffi:foreign-free (subobj1 obj)))
        (error c)))    ; invoke the condition c again explicitly
    obj)) 
```

你有什么更好的主意，或者通常是惯用的模式吗？

谢谢

* * *

在回答之后，我使用 UNWIND-PROTECT 添加了一个代码。它不会起作用，因为即使所有分配都成功完成，解除分配表单也会运行。

```
(defun init-object ()
  (let ((obj (make-object)))
    (unwind-protect
      (progn
        (setf (subobj1 obj) (cffi:foreign-alloc :int)
              (subobj2 obj) (cffi:foreign-alloc :int))
        obj)
      ; foreign pointers freed even when successfully initialized
      (when (subobj2 obj) (cffi:foreign-free (subobj2 obj)))
      (when (subobj1 obj) (cffi:foreign-free (subobj1 obj)))))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T12:49:35.317

使用[UNWIND-PROTECT](http://www.lispworks.com/documentation/HyperSpec/Body/s_unwind.htm#unwind-protect)。当错误导致退出范围时，`unwind-protect`允许您强制执行清理表单。

像这样的东西：

```
(defun init-object ()
  (let ((obj (make-object)))
    (unwind-protect
        (setf (subobj1 obj) (cffi:foreign-alloc :int)
              (subobj2 obj) (cffi:foreign-alloc :int))
      (unless (and (subobj2 obj) (subobj1 obj))
        (when (subobj1 obj) (cffi:foreign-free (subobj1 obj)))
        (when (subobj2 obj) (cffi:foreign-free (subobj2 obj)))))
    obj)) 
```

使用任何可用的方法来检测插槽是否已绑定。上面假设一个未初始化的插槽的值为`NIL`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T14:52:42.743

Common Lisp 具有对应于当今语言（例如 Java、C#）异常和资源管理语句的工具，例如`try`with`catch`和/或`finally`.

正如您在代码中所做的那样，Common Lisp 中的`try`-是通过 实现的。可以简单地重新发送相同的错误信号，但您不会在实际发生的调试器上捕获错误。Java 在创建异常时包含异常的堆栈跟踪。C# 包括抛出异常时的堆栈跟踪。无论如何，我认为两者都有办法用内部异常抛出新异常，因此您可以访问原始堆栈跟踪。`catch`[`handler-case`](http://www.lispworks.com/documentation/HyperSpec/Body/m_hand_1.htm)

-in Common Lisp 是用`try`. 第一个表单正常执行，其余的不管第一个表单是否正常返回都无条件执行。`finally`[`unwind-protect`](http://www.lispworks.com/documentation/HyperSpec/Body/s_unwind.htm)

Common Lisp 有一个工具，它允许在发出错误信号的地方运行代码，即[`handler-bind`](http://www.lispworks.com/documentation/HyperSpec/Body/m_handle.htm). 主要区别`handler-case`在于它不会倒回堆栈，并且如果没有非本地退出的处理程序，它不会阻止错误弹出到其他处理程序或调试器。

因此，你会使用这样的东西：

```
(defun init-object ()
  (let ((obj (make-object)))
    (handler-bind
        (;; forcedly handling all conditions
         (condition #'(lambda (c)
                        (declare (ignore c))
                        (when (subobj1 obj) (cffi:foreign-free (subobj1 obj)))
                        ;; return normally, allowing the condition to go up the handler chain
                        ;; and possibly to the debugger, if none exits non-locally
                        )))
      (setf (subobj1 obj) (cffi:foreign-alloc :int)
            (subobj2 obj) (cffi:foreign-alloc :int)))
    obj)) 
```

我建议您不要与 匹配`condition`，因为所有条件都继承自它，例如`storage-condition`. 在无法或不可能恢复的情况下，您可能不想做任何事情。

* * *

仅供参考，Common Lisp 中完整的--`try`子句是通过around实现的：`catch``finally``unwind-protect``handler-case`

```
(unwind-protect
     (handler-case
         (do-something)
       (error-type-1 ()
         (foo))
       (error-type-2 (e)
         (bar e)))
  (cleanup-form-1)
  (cleanup-form-2)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T11:19:44.913

有人建议使用`UNWIND-PROTECT`. 这是处理资源分配的惯用方式。但是，如果您的目标是在出错时释放资源，但如果一切成功则返回这些资源，您可以使用类似以下的内容：

```
(defun init-object ()
  (let ((obj (create-object)))
    (handler-case
        (progn
          (setf (subobj1 obj) (cffi:foreign-alloc :int))
          (setf (subobj2 obj) (cffi:foreign-alloc :int))
          obj)
      (error (condition)
        (free-object obj)
        ;; Re-throw the error up in the call chain
        (error condition)))))

(defun free-object (obj)
  (when (subobj2 obj) (cffi:foreign-free (subobj2 obj)))
  (when (subobj1 obj) (cffi:foreign-free (subobj1 obj)))) 
```

实现相同目的的另一种方法是进行检查以验证是否已到达函数的末尾，如果没有则释放对象。但是，我不太喜欢这种风格，因为它并不能很好地准确显示正在发生的事情。

但是请注意，当您使用该功能时，`INIT-OBJECT`您需要将其包含在`UNWIND-PROTECT`. 否则，一旦函数返回的对象被 GC 处理，您将泄漏资源。

这样做的方法是在使用该函数时始终执行以下操作：

```
(let ((obj (init-object)))
  (unwind-protect
      ... use object here ...
    (free-object obj))) 
```

另一种解决方案是在对象被 GC 时释放它。没有标准的做法，但必要的功能被抽象在`TRIVIAL-GARBAGE:FINALIZE`函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T22:06:08.940

我同意 Rainer 的建议：我将一个`unwind-protect`表单包装在一个宏中，并检查受保护子句中的初始化是否成功。

# java - 滚动时 ListView 条目正在更改其布局

> ID：13605206
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:35.967
> 
> 标签：java, android, android-layout

嗨，我发现了一个我无法理解的非常奇怪的问题。希望有人可以帮助我：

如果所有视图都显示在屏幕上，我的列表看起来很棒。一旦屏幕变小（或列表较长），有时条目的视图就会与它们应有的视图不同。这个问题可以通过向上或向下滚动来限制，以便条目离开窗口。

我有一个列表视图，其中包含不同的条目类型，具有不同的布局文件。这是应该决定将显示什么布局的方法：

```
public View getView(int position, View view, ViewGroup parent) {
        NavigationListEntry i = entries.get(position);
        View v = view;
        if (v == null)
            switch(i.Type) {
            case ACTIVE_ENTRY:
                v = inflater.inflate(R.layout.list_nav_row_active, null);
                break;
            case HEADER:
                v = inflater.inflate(R.layout.list_nav_row_header, null);
                break;
            ...
            default:
                v = inflater.inflate(R.layout.list_nav_row_active, null);
                break;
            }
} 
```

你知道为什么会发生这种情况吗？

/edit 如果我只删除“if (v == null)”，它似乎可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:43:31.617

您在这里遇到问题，`View`您在参数中获得的回收可能与`Type`您想要返回的不同。假设 v 属于 A 类型，并且它不为空，您发布的代码对此没有任何说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:15:26.457

如果您删除`if(v==null)`，则不会重用已经膨胀的视图。如果你这样做，列表视图会有点迟钝。

最好的方法是

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    NavigationListEntry i = getItem(position);
    if(null == convertView){
        convertView = inflateNewView(i.type);
        holder = (ViewHolder) convertView.getTag();
    } else{
        //getting tag to obtain the already found views
        holder = (ViewHolder) convertView.getTag();
        if(holder.type != i.type){
            convertView = inflateNewView(i.type); 
            holder = (ViewHolder) convertView.getTag();
        }
    }

    //always update the elements 
    holder.title.setText(i.getTitle());
    holder.desc.setText(i.getDesc());
    holder.content.setText(i.getContent());

    return convertView;
}

/**
 * Inflates a new view for the specified type
 * @return the newly inflated view
 */
private View inflateNewView(int type){
        View convertView = null;
        switch(type) {
        case ACTIVE_ENTRY:
            convertView = inflater.inflate(R.layout.list_nav_row_active, null);
            break;
        case HEADER:
            convertView = inflater.inflate(R.layout.list_nav_row_header, null);
            break;
        ...
        default:
            convertView = inflater.inflate(R.layout.list_nav_row_active, null);
            break;
        }
        holder = new ViewHolder();
        convertView = inflater.inflate(LAYOUT_RESOURCE, null);
        holder.title = (TextView) convertView.findViewById(R.id.txtTitle);
        holder.desc = (TextView) convertView.findViewById(R.id.txtDesc);
        holder.content = (TextView) convertView.findViewById(R.id.txtContent);
        holder.type = type;
        //setting tag to reduce hierarchy lookup
        convertView.setTag(holder);

    return convertView;
}
/**
 * Holder class to improve performance. Helps in reducing view hierarchy lookup
 */
private static class ViewHolder {

    TextView title;
    TextView desc;
    TextView content;
    int type;

} 
```

这是至少尝试回收您的观点的最佳方式。希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T12:44:43.503

滚动或更新视图时，位置可能会发生变化。建议使用数组而不是位置

# javascript - 设置多个具有相同ID的表单元素的值，Paypal

> ID：13605207
> 
> 赞同：0
> 
> 时间：2012-11-28T12:35:36.390
> 
> 标签：javascript, html, paypal

我正在尝试找出paypal的问题。

我在页面上有多个“立即购买”按钮，我需要为所有按钮设置一个值。

“立即购买”按钮元素都具有相同的 ID。

每个“立即购买”按钮代表一个许可证范围，因此有“1-5”、“6-10”、“11-20”等。我有一个版本列表，它们在页面中循环如下：

```
$strWeights1 .= "<span id='1".$row['Tag']."' onclick='select_weight(this.id)' class='linkoff'>". $row['Tag'] . "</span> | "; 
```

我可能想多了，但是在所有“立即购买”按钮中设置所选“版本”的最佳方法是什么？

我正在考虑使用贝宝变量“item_number”

干杯

就像我说过的按钮来自 PayPal，我无法控制那里的字段的命名，因此我遇到了这个问题。

好的，所以选择权重功能只是使跨度像href标签一样工作，打开和关闭“按钮”。

```
function select_weight(value){

        value = value.substr(1);

        document.forms["fontweight"]["fw"].value = value;
        //this.forms["item_number"].value = value;

        thin = document.getElementById('1Thin');
        if(thin != null){
            thin.className = "linkoff";
            thin = document.getElementById('2Thin');
            thin.className = "linkoff";
        }
        light = document.getElementById('1Light');
        if(light != null){
            light.className = "linkoff";
            light = document.getElementById('2Light');
            light.className = "linkoff";
        }
        book = document.getElementById('1Book');
        if(book != null){
            book.className = "linkoff";
            book = document.getElementById('2Book');
            book.className = "linkoff";
        }
        medium = document.getElementById('1Medium');
        if(medium != null){
            medium.className = "linkoff";
            medium = document.getElementById('2Medium');
            medium.className = "linkoff";
        }
        bold = document.getElementById('1Bold');
        if(bold != null){
            bold.className = "linkoff";
            bold = document.getElementById('2Bold');
            bold.className = "linkoff";
        }
        heavy = document.getElementById('1Heavy');
        if(heavy != null){
            heavy.className = "linkoff";
            heavy = document.getElementById('2Heavy');
            heavy.className = "linkoff";
        }
        black = document.getElementById('1Black');          
        if(black != null){
            black.className = "linkoff";
            black = document.getElementById('1Black');
            black.className = "linkoff";
        }

        //alert(value);
        fontweight1 = document.getElementById('1'+value);
        fontweight2 = document.getElementById('2'+value);
        fontweight1.className = "linkon";
        fontweight2.className = "linkon";} 
```

这是按钮的代码，它在页面中出现了大约 16 次，“item_name”和“hosted_button_id”每次都会改变：

```
<form target=\"paypal\" action=\"https://www.paypal.com/cgi-bin/webscr\" method=\"post\" onsubmit=\"return validateForm()\" >
            <input type=\"hidden\" name=\"cmd\" value=\"_s-xclick\">
            <input type=\"hidden\" name=\"hosted_button_id\" value=\"xxxxxxxx\">
            <input type=\"hidden\" name=\"item_name\" value=\"".$strProdName." : 1-5 terminals \">
            <input type=\"hidden\" name=\"item_number\" value=\" [set this value] \">
            <input type=\"image\" onMouseOver=\"this.src='images/paypalon.png';\" onMouseOut=\"this.src='images/paypaloff.png';\" src=\"images/paypaloff.png\" border=\"0\" name=\"submit\" alt=\"PayPal — The safer, easier way to pay online.\">
            <input type='hidden' name='notify_url' value='http://ipn.php'>
        </form> 
```

我一直在思考如何解决这个问题。我可以使用表单验证功能来访问特定表单并以这种方式设置值吗？我一直在尝试这个并取得了任何成功。

```
function validateForm(form)
{
    var x=document.forms["fontweight"]["fw"].value;

    if (x==null || x=="")
    {
        alert("Hold on a moment, you need to select a weight before hitting the ‘Buy’ button.");
        return false;
    }
    else{

        field = document.form;
        //this.form['item_number'].value = x;
        alert(field['item_name'].value);
        return false;
    }
} 
```

表单标签中有这个调用

```
onsubmit="return validateForm(this.form)" 
```

我在正确的轨道上>还是应该放弃它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:24:43.003

好的，看来我已经解决了这个问题。我已使用“onClick”将验证移至按钮。我正在传递 (this.form) 并使用它来获取元素。

虽然我很欣赏具有相同名称的多个 ID 是错误的，但 PayPal 按钮的名称与我的代码相同。

# sql - 如何在 SQL 表中插入空行？

> ID：13605208
> 
> 赞同：44
> 
> 时间：2012-11-28T12:35:35.893
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [将行插入到只有一个 IDENTITY 列的表中](https://stackoverflow.com/questions/4117676/inserting-rows-into-a-table-with-one-identity-column-only)

我有一个只有一列的 SQL 表。Column 是一个自动增量字段，例如：

```
Id INT IDENTITY 
```

我需要在这个表中插入一行（这是一个临时的大容量/虚拟表）：

```
INSERT INTO my_table VALUES () 
```

但我有一个语法错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-28T12:39:08.563

```
INSERT INTO my_table DEFAULT VALUES 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:39:05.480

尝试插入显式空值：

```
INSERT INTO my_table VALUES (NULL, NULL); 
```

# matlab - 在 MATLAB GUI 中捕捉键盘按键

> ID：13605211
> 
> 赞同：1
> 
> 时间：2012-11-28T12:35:52.847
> 
> 标签：matlab, radio-button, matlab-figure, matlab-guide

我正在使用 matlab，我想要有单选按钮，一些键映射到它。

以下代码用于显示单选按钮并从用户那里获取值。有人可以帮我为女性映射键 1，为男性映射键 2。

```
hgen_radio = uibuttongroup('visible','on','Units','pixels','Position',[1750 1045 170,50],'Title','Gender');
set(hgen_radio,'SelectionChangeFcn',@isMale_Callback);
ugen0 = uicontrol('Style','Radio','String','Male',...
    'pos',[10 5 50 25],'parent',hgen_radio,'HandleVisibility','off');
ugen1 = uicontrol('Style','Radio','String','Female',...
    'pos',[70 5 70 25],'parent',hgen_radio,'HandleVisibility','off');
set(hgen_radio,'SelectedObject',[]); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:28:27.347

在 MATLAB 中，按键必须被包含 UICONTROL 的图形捕获，然后通过。这是一种简单的方法来做到这一点。

```
hgen_radio = uibuttongroup('visible','on','Units','Normalized','Position',[.2 .2 .2 .2],'Title','Gender');
set(hgen_radio,'SelectionChangeFcn',@(x,y)disp('Clicked!'));
ugen0 = uicontrol('Style','Radio','String','Male',...
    'pos',[10 5 50 25],'parent',hgen_radio,'HandleVisibility','off');
ugen1 = uicontrol('Style','Radio','String','Female',...
    'pos',[70 5 70 25],'parent',hgen_radio,'HandleVisibility','off');
set(hgen_radio,'SelectedObject',[]);

set(gcf,'keypressFcn',@(x,y)catchKey(hgen_radio,x,y)) 
```

其中 catchKey.m 有类似的东西：

```
function catchKey(hgen_radio,varargin)

switch varargin{2}.Key
    case {'1','2'}
        %to do: check if previous value was female, or male...
        feval(get(hgen_radio,'SelectionChangeFcn'))
    otherwise
        %pass other keypresss through
end 
```

另一个例子见：[http](http://www.mathworks.com/matlabcentral/answers/1450) ://www.mathworks.com/matlabcentral/answers/1450 。

对于任何复杂的应用程序，你不应该像我上面那样传递句柄；而是使用 setappdata 和 getappdata 将所有句柄的值存储在 APPDATA 中。这显着澄清了很多代码。例如 [http://www.mathworks.com/help/matlab/ref/setappdata.html](http://www.mathworks.com/help/matlab/ref/setappdata.html)

# google-apps-script - 遍历范围，将字符串附加到每个

> ID：13605213
> 
> 赞同：62
> 
> 时间：2012-11-28T12:36:00.567
> 
> 标签：google-apps-script, google-sheets

我在 Google 表格（activerange）中选择了一系列单元格。我想遍历该范围内的每个单元格，并在末尾添加一个字符串。字符串始终相同，并且可以硬编码到函数中。

这似乎是一件非常简单的事情，但我已经把代码弄乱了一个小时，没有任何有用的事情发生，而且文档真的没有帮助。

这就是我现在所拥有的。我不编写 JS 代码（我确实知道 VBA，因为这会有所帮助..）。

```
function appendString() {
  var range = SpreadsheetApp.getActiveSheet().getActiveRange();
  for (var i = 0; i < range.length; i++) {
    var currentValue = range[i].getValue();
    var withString = currentValue + " string";
    range[i].setValue(withString);
  }
} 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-28T12:53:32.533

你可以尝试这样的事情：

```
//
// helper `forEachRangeCell` function
//

function forEachRangeCell(range, f) {
  const numRows = range.getNumRows();
  const numCols = range.getNumColumns();

  for (let i = 1; i <= numCols; i++) {
    for (let j = 1; j <= numRows; j++) {
      const cell = range.getCell(j, i)

      f(cell)
    }
  }
}

//
// Usage
//

const range = SpreadsheetApp.getActiveSheet().getActiveRange();

forEachRangeCell(range, (cell) => {
  cell.setValue(`${cell.getValue()} string`)
}) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-19T14:07:18.530

或者使用[setValues()](https://developers.google.com/apps-script/reference/spreadsheet/range#setValues(Object))同时写入所有值。似乎也执行得更快。

```
var range = SpreadsheetApp.getActiveSheet().getActiveRange();
var numRows = range.getNumRows();
var numCols = range.getNumColumns();
var writeValues = []
for (var i = 1; i <= numRows; i++) {
  var row = []
  for (var j = 1; j <= numCols; j++) {
    var currentValue = range.getCell(i,j).getValue();
    var withString = currentValue + " string";
    row.push(withString)
  }
  writeValues.push(row)
}
range.setValues(writeValues) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-01-16T19:09:29.420

**2020 年 3 月编辑：**您现在可以使用现代 ECMAScript。[如果启用 V8 运行时](https://developers.google.com/apps-script/guides/v8-runtime/migration)，则可以：

```
function appendString() {
  const range = SpreadsheetApp.getActiveSheet().getActiveRange();
  const values = range.getValues();
  const modified = values.map(row => row.map(currentValue => currentValue + " string"));
  range.setValues(modified);
} 
```

如果您必须使用较旧的 Javascript 版本，您可以：

```
function appendString() {
    var range = SpreadsheetApp.getActiveSheet().getActiveRange();
    var values = range.getValues();

    values.forEach(function(row, rowId) {
        row.forEach(function(col, colId) {
            values[rowId][colId] += " string";
        });
    });

    range.setValues(values);
} 
```

请注意，`rowId`并且`colId`是从零开始的。在接受的答案中，索引是基于 1 的。或者您`map`不使用箭头运算符：

```
function appendString() {
  var range = SpreadsheetApp.getActiveSheet().getActiveRange();
  var values = range.getValues();

  var modified = values.map(function (row) {
    return row.map(function (col) { 
      return col + " string"; 
    }); 
  })

  range.setValues(modified);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-17T19:59:11.040

[这是Voy 帖子](https://stackoverflow.com/a/29730928/2314626)的更新，使用[range.getValues()](https://developers.google.com/apps-script/reference/spreadsheet/range#getvalues)获取所有值并省略临时数组。应该更快，因为`range.getCell().getValue()`在二维循环中省略了。请注意，索引从此`0`片段中开始。我也觉得这更具可读性。

```
 var cells = range.getValues();
  var numRows = range.getNumRows();
  var numCols = range.getNumColumns();
  for (var i = 0; i < numRows; i++) {
    for (var j = 0; j < numCols; j++) {
      cells[i][j] += " string";
    }
  }

  range.setValues(cells); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-04T02:56:27.293

这是一个非常通用的函数，它迭代一个范围的值。它也可以用来`reduce`在它上面做一个功能（这在你的情况下很有用）。如果您只想找到元素的第一个，它也可以跳出循环。

它可以很容易地更改为接受实际的 Range 实例而不是值数组。

```
function range_reduce(rangeValues,fn,collection) {
  collection = collection || [];
  var debug_rr = "<<";
  for(var rowIndex = 0, row=undefined; rowIndex<rangeValues.length && (row = rangeValues[rowIndex]); rowIndex++) { 
    for(var colIndex = 0, value=undefined; colIndex<row.length && (value = row[colIndex]); colIndex++) {
      try {
        collection = fn(collection, value, rowIndex, colIndex);
      } catch (e) {
        if(! e instanceof BreakException) {
          throw e;
        } else {
          return collection;
        }
      }
    }
  }
  return collection;
}

// this is a created, arbitrary function to serve as a way
// to break out of the reduce function. Your callback would
// `throw new BreakException()` and `rang_reduce` would stop
// there and not continue iterating over "rangeValues".
function BreakException(); 
```

在你的情况下：

```
var range = SpreadsheetApp.getActiveSheet().getActiveRange()
var writeValues = range_reduce(range.getValues(), function(collection, value, row, col) {
    collection[row] || collection.push([]);
    collection[row].push(value + " string");
});
range.setValues(writeValues) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-16T15:59:19.367

[google-sheets](/questions/tagged/google-sheets "显示标记为“谷歌表格”的问题")
您可以使用查找和替换轻松完成此操作。

*   选择您的范围

*   寻找：

    ```
    ^(.*)$ 
    ```

*   代替：

    ```
    $1AppendString 
    ```

*   标记使用正则表达式

*   点击全部替换

我看不出在这里使用脚本有什么好处，但是，如果必须，您也可以通过工作表 API发出[Find Replace请求。](https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets/request#FindReplaceRequest)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-08T17:27:21.790

Google 表格使用多维数组，因此为了让您的生活更轻松，您可以像这样展平数组：

```
range.getValues().flat().forEach(function(item, i){
    var currentValue = item[i].getValue();
    var withString = currentValue + " string";
    item[i].setValue(withString);
});
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-05T16:41:57.227

我就是这样做的。它有点长，但我认为它非常实用且可重复使用。绝对实用。

这使用 V8 引擎和 TypeScript

```
/*
    Transforms the original "Array of Arrays"—
    [
        [a, b, c, d, e],
        [a, b, c, d, e],
        [...],
        ...,
    ]

    into an "Array of Objects".
    [
        {timestamp: a, email: b, response_1: c, response_2: d, response_3: e},
        {timestamp: a, email: b, response_1: c, response_2: d, response_3: e},
        {...},
        ...,
    ]
*/
var original_values = SpreadsheetApp.getActiveSheet()
  .getRange("A:E")
  .getValues()
  .map(
    ([
      a, b, c, d, e,
   // f, g, h, i, j,
   // k, l, m, n, o,
   // p, q, r, s, t,
   // u, v, w, x, y,
   // z, aa, ab, ac, ad,
   // etc...
    ]) => {
      return Object.create({
        timestamp: a,
        email: b,
        response_1: c,
        response_2: d,
        response_3: e,
      });
    }
  );

/*
    Appends the string to some part of the Objects in our Array.
    Since the Objects match the table structure (hopefully) we can be
    pretty specific.

    I tried to mock how a Google Form might collect responses.
*/
var appended_string = original_values.map(
  (arg: { timestamp; email; response_1; response_2; response_3 }) => {
    switch (typeof arg.response_1) {
      case "string":
        return Object.assign(arg, {
          response_1: (arg.response_1 += " string"),
        });

      default:
        return arg;
    }
  }
);

/*
    Need to reshape the "Array of Objects" back into an "Array of Arrays".
    Pretty simple compared to the original.
*/
var values_to_set = appended_string.map(
  (arg: { timestamp; email; response_1; response_2; response_3 }) => {
    return [
      arg.timestamp,
      arg.email,
      arg.response_1,
      arg.response_2,
      arg.response_3,
    ];
  }
);

/*
    Here we'll take our finalized "values_to_set Array of Arrays" and
    use it as the input for ".setValues()".

    All Google Sheets data starts and ends as an "Array of Arrays" but...
    It is significantly easier to work with as an "Array of Objects".

    Rhetorical Question: Who wants to keep track of indexes?
*/
SpreadsheetApp.getActiveSheet().getRange("A:E").setValues(values_to_set); 
```

# office-2013 - 使用 Microsoft Office 应用程序 2013 将数据从一个 Excel 工作表导出到一个新的 Excel 工作表

> ID：13605216
> 
> 赞同：1
> 
> 时间：2012-11-28T12:36:08.717
> 
> 标签：office-2013

我面临 Microsoft Office 应用程序 2013 的任务窗格控制的问题，我创建了一个 Office 2013 应用程序，其中我使用办公应用程序在 excel 上写入数据并从中读取数据。这工作正常，但现在我希望从当前 excel 表中读取的值到另一个新的 excel 表中。现在，我使用 javascript 从互联网上的一些参考资料中编写了一个代码来执行此操作，并且它可以在浏览器上运行。但我无法让它在应用程序上运行。如果我正在处理当前的 excelsheet 实例，它可能会起作用，但我也不知道如何得到它。我在这篇文章中附上了 javascript 代码。还有一件事，当我在 excel 中打开应用程序时，它显示以下错误消息网站的附加组件无法运行。检查 Internet 选项中的安全设置。我尝试更改互联网选项中的设置并将所有内容设置为启用。我仍然收到此错误。任何帮助深表感谢。谢谢。

```
var MyArray = [['Berlin'],['Munich'],['Duisburg']];
function writeToExcel() {
    var i, j, str;  
    var   myTable = MyArray;    
    alert(myTable.length);      
    var   rowCount = myTable.length;
    var  excel = new ActiveXObject('Excel.Application');// Activates Excel          
    excel.Visible = true;
    excel.Workbooks.Add(); // Opens a new Workbook
    excel.Application.Visible = true; // Shows Excel on the screen
    var i=0
    myTable.forEach(
        function(item) 
        {
            alert(item) 
            excel.ActiveSheet.Cells(i + 1).Value = item; // Writes to the sheet
            i=i+1;
        }
    );
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:27:37.383

据我所知，Javascript API 不支持创建新工作表。您可以参考以下链接： [http ://social.msdn.microsoft.com/Forums/en-US/appsforoffice/thread/01c75559-a591-4d2b-a0ea-24103cdea1d5](http://social.msdn.microsoft.com/Forums/en-US/appsforoffice/thread/01c75559-a591-4d2b-a0ea-24103cdea1d5)

# sql - Nexus DB 断言失败

> ID：13605224
> 
> 赞同：1
> 
> 时间：2012-11-28T12:36:46.720
> 
> 标签：sql, nexusdb

NexusDB：Query1058317796：查询执行失败：引发意外异常对象：[EAssertionFailed] 断言失败（C:\DSN\WIN\lib2006\Fontes\Externos\NexusDB2\nxsrBufferManager.pas，第 1115 行）[$3CA1/15521]

我试过这个 sql`SELECT * FROM "Operaca", "Pessoas"` 许多连接点在我的数据库中不起作用！！！

帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:41:51.873

在没有显式连接的情况下从多个表中进行选择会导致交叉连接，这会很快耗尽可用 RAM。谷歌“sql 加入教程”。

# python - 如何使用 Django 报告获取 PDF 版本的报告

> ID：13605228
> 
> 赞同：1
> 
> 时间：2012-11-28T12:36:54.907
> 
> 标签：python, django, django-admin

使用`Django_reporting-0.21-py2.7`我能够查看报告并能够将报告下载为 CSV 文件。有没有办法我可以得到相同的 PDF 格式的报告（最好通过 Django 管理页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:47:10.477

尝试使用[xhtml2pdf](http://pypi.python.org/pypi/xhtml2pdf/)将您的报告转换为 PDF 格式。您还可以[在 django 文档](https://docs.djangoproject.com/en/dev/howto/outputting-pdf/)中找到有关在 django 中输出 PDF 的更多信息。

# c# - 继承 Global.asax 和 Application_Start 问题

> ID：13605230
> 
> 赞同：3
> 
> 时间：2012-11-28T12:37:03.397
> 
> 标签：c#, asp.net, global-asax

我正在尝试继承一个基础 global.asax 类来创建我的自定义 global.asax 类。但是我的客户继承的全局类不能正常工作。它的 Application_Start 不会被调用。

有谁知道为什么？

```
public class BaseGlobal : HttpApplication
{
    protected void Application_Start(Object sender, EventArgs e)
    {
        log4net.Config.XmlConfigurator.Configure();
        Logger.Warn("Portal Started");  //I can find it log file
    }
    ......
}

public class MyGlobal : BaseGlobal
{
        new protected void Application_Start(Object sender, EventArgs e)
        {
            base.Application_Start(sender,e);

            Logger.Warn("Portal Started 2"); // Can not find it in log file
        }
}

<%@ Application Codebehind="Global.asax.cs" Inherits="Membership_ABC.MyGlobal" Language="C#" %> 
```

在日志文件中，我找不到“Portal started 2”，而只是“Portal Started”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:18:05.500

On startup of an application, the runtime takes the `HttpApplication` descendant that is pointed out by the `Global.asax` file, and creates an instance of it. The runtime does not know or care how the class got to be descended from `HttpApplication`, it just cares that it is, in fact a descendant.

After that it start calling method on it, treating it as a regular `HttpApplication` object. Since the `new` modifier effectively breaks the inheritance chain (it's just a new method that happens to share the old methods name) it is not called, but instead the method of the parent class is called. Basically you have this situation (pseudocode):

```
HttpApplication httpApp = new MyGlobal();
httpApp.Application_Start(..) 
// ^^^ calls BaseGlobal.Application_Start(..)
//because the is not an unbroken chain from HttpApplication to MyGlobal 
```

This is an example and consequence of the Brittle Base Class problem, a topic about which Eric Lippert [has written in depth](http://blogs.msdn.com/b/ericlippert/archive/tags/brittle+base+classes/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:00:18.000

解决方法是在基类中声明函数virtual，然后在子类中重写。

但是由于您不能编辑基类来声明 Application_Start 方法为虚拟的，因此它不起作用： [是否可以覆盖非虚拟方法？](https://stackoverflow.com/questions/1853896/is-it-possible-to-override-a-non-virtual-method)

接受的答案给出了一个与您的情况相匹配的示例。

# javascript - IE9 Javascript onkeydown 事件改变光标位置并且不允许编辑粘贴的数据

> ID：13605232
> 
> 赞同：1
> 
> 时间：2012-11-28T12:37:03.550
> 
> 标签：javascript, dom-events, onkeydown

我在 IE9（仅限 IE）中编辑粘贴数据时遇到问题，当我尝试用空格分隔粘贴的字符串时，光标会在文本开头或结尾处运行。然后它添加空格或我按下的任何其他字符。如果我只是从键盘输入带有空格的新值，则不会出现问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>Test JS</title>
</head>

<body>
    <form method="post">
        <label for="direction">Your input here: </label><input name="direction" type="text" id="direction" size="55" maxlength="150" onkeydown="javascript:this.value=this.value.toUpperCase();" value="BIARRITZ1919PPDPTO903"/>
    </form>
</body>
</html> 
```

我也尝试添加一个“ `javascript:this.value=this.value.toUpperCase(); return true;`”，但没有成功。

# .net - 如何在 .NET Web API 中设置模型绑定？

> ID：13605240
> 
> 赞同：0
> 
> 时间：2012-11-28T12:37:34.613
> 
> 标签：.net, asp.net-web-api

我很难让 Web API 与 XML 一起工作。似乎它应该适用于 XML，但许多初学者教程只将整数和字符串传递给一个非常简单的模型。

我能够从 HttpWebRequest 中提取 XML，但我想尝试将 XML 绑定到模型。不过，我对如何使用 XML 进行发布感到困惑。

每次我将 XML（任何 XML，我只是在试验）发布到我的 ApiController 方法时，我为 XML 创建的模型对象都是空的。所以，我假设有些东西没有连接起来。我不确定是否必须在 Global.asax.cs 文件中添加一个条目，或者我是否需要一个帮助类或什么。

有人可以指出我正确的方向吗？（请不要“只使用 JSON”的建议。我也想做 JSON，但我也想知道如何让 XML 正常工作。）

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:33:39.863

最简单的方法是对您的对象执行简单的获取，以获取要发回的 XML 示例。

要记住的事情：

1.  包括`xmlns:i="http://www.w3.org/2001/XMLSchema-instance"`指示空值所需的命名空间
2.  如果使用标准 XML 序列化器配置，您也需要命名空间，例如`xmlns="http://schemas.datacontract.org/2004/07/MvcApplication10.Controllers"`
3.  执行 get 时将接受标头设置为`accept: application/xml`
4.  发布到控制器时设置内容类型。`content-type: application/xml`

使用示例对象和控制器。

```
public class Foo
{
    public string Bar { get; set; }
}

public class FoosController : ApiController
{
    // GET api/foos
    public Foo Get()
    {
        return new Foo { Bar = "Test" }; 
    }

    // GET api/foos
    public Foo Post(Foo test)
    {
        return test;
    }
} 
```

我在 /api/foos 上执行 GET 并获得一个示例对象：

```
User-Agent: Fiddler
Host: localhost
accept: application/xml 
```

回复：

```
<Foo xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MvcApplication10.Controllers"><Bar>Testing</Bar></Foo> 
```

要将其发回，我只需将内容类型标头更改为 xml 中的值并将其发回：

```
User-Agent: Fiddler
Host: localhost:61280
content-type: application/xml
Content-Length: 167 
```

要求

```
<Foo xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MvcApplication10.Controllers"><Bar>Testing Response</Bar></Foo 
```

回复

```
<Foo xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MvcApplication10.Controllers"><Bar>Testing Response</Bar></Foo> 
```

**更新**

对于复杂的 XML 模型，您需要开始使用 DataContract 注释[http://msdn.microsoft.com/en-us/library/ms731045.aspx](http://msdn.microsoft.com/en-us/library/ms731045.aspx)。

例子：

```
[DataContract(Name = "Person")]
public class Foo
{
    [DataMember(Name = "Address", IsRequired = False)]
    public string Bar { get; set; }
} 
```

这会改变所需的 XML

```
<Person xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MvcApplication10.Controllers"><Address>Testing Response</Address></Person> 
```

对于收藏等看这里[http://msdn.microsoft.com/en-us/library/aa347850.aspx](http://msdn.microsoft.com/en-us/library/aa347850.aspx)

# html - 底部div内的多个div

> ID：13605241
> 
> 赞同：0
> 
> 时间：2012-11-28T12:37:36.780
> 
> 标签：html, css

当我将具有不同高度的多个 div 对齐到底部时出现问题。我希望所有 div 都在底部（甚至是示例中的“封闭聊天”）。一种解决方案是使用

```
position: absolute; 
bottom: 0; 
right XXpx; 
```

但是还有其他方法吗？我不想用 javascript 设置正确的值。

这是我的例子 - [http://jsfiddle.net/T3Evb/](http://jsfiddle.net/T3Evb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:42:24.973

```
#chatbar {
  position: fixed;
  bottom: 0;
  right: 0;
  width: 100%;
}

.chat {
  display: inline-block;
  background-color: green;
  width: 200px;
  text-align: center;
  margin-right: 10px;
}

.chat.open {
  display: inline-block;
  height: 130px;
  vertical-align: bottom;
}
```

```
<div id="chatbar">
  <div class="chat open">
    Chat window
  </div>
  <div class="chat">
    Closed chat window
  </div>
</div>
```

我删除了[float](https://css-tricks.com/almanac/properties/f/float/) css 属性，并将这些s的[显示](https://css-tricks.com/almanac/properties/d/display/)行为更改为.`div``inline-block`

此时，[vertical-align](https://css-tricks.com/almanac/properties/v/vertical-align/) css 属性允许按照我的意愿对齐元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:16:54.940

很简单：将一个 html 标签作为容器，另外一个作为绝对标签，如下所示：

```
<div class="chat">
   <div class="chat_contain">
      <div class="chat_window"></div>
   </div>
   <div class="chat_contain">
      <div class="chat_window"></div>
   </div>
</div> 
```

和CSS：

```
.chat{
   width:auto;
   display:inline-block;
   position:fixed;
   bottom:0px;
   right:0px;
 }
.chat_contain{
   position:relative;
   float:right;
 }
.chat_window{
   position:absolute:
   bottom:0px;
   left:0px;
 } 
```

请记住，我的代码用于设置位置，而不是所有样式表。自己编辑祝你好运

# tfs - 无法从 VS 2012 跨不同域访问 TFS 2010

> ID：13605243
> 
> 赞同：0
> 
> 时间：2012-11-28T12:37:47.153
> 
> 标签：tfs

我已经创建了一个 TFS 项目集合和一个团队项目，我还有一个团队项目 \ 组 undyer，我已经添加了所有团队项目用户。TFS 由域 B 控制，用户将尝试从域 A 连接到 TFS。所有 TFS 用户都有域 A 和域 B 帐户。

当我尝试从域 AI 中的机器连接到 TFS 时，系统会提示输入域 B 凭据，凭据弹出窗口两次或三次，然后我收到一条错误消息，提示“未提供帐户信息......”

关于应该将我的用户添加到哪个 TFS（团队项目或团队集合）组的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:47:11.900

您需要将自己的新组添加到名为“项目集合有效用户”的 TeamProject 组中，否则不允许他们访问 TFS。

# javascript - 在 Javascript Game for Windows 8 上给笔记本电脑充电有什么影响

> ID：13605247
> 
> 赞同：0
> 
> 时间：2012-11-28T12:37:50.757
> 
> 标签：javascript, winrt-xaml

我正在使用 JavaScript 和 HTML5 开发游戏。在使用画布的概念时，我在屏幕上渲染图像，然后移动坐标以使图像看起来移动。当笔记本电脑充电时，图像移动非常快，但一旦拔掉电源，图像速度就会下降。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:46:12.737

在 Windows 笔记本电脑上，您可以使用默认设计的电源选项，以在笔记本电脑从充电器上拔下电源时降低处理器和视频性能。此外，如果您的游戏调试浏览器是 IE，则 windows 也会降低 IE 的 javascript 性能。说明我的话的第一个 Google 链接：[http](http://www.sevenforums.com/tutorials/778-power-plan-settings-change.html) ://www.sevenforums.com/tutorials/778-power-plan-settings-change.html （Windows 8 的选项相同）。

# java - Java converting Image to BufferedImage

> ID：13605248
> 
> 赞同：92
> 
> 时间：2012-11-28T12:37:50.373
> 
> 标签：java, image, casting, bufferedimage

There is already question like this [link](https://stackoverflow.com/questions/9132149/how-to-convert-buffered-image-to-image-and-vice-versa) on StackOverflow and the accepted answer is "casting":

```
Image image = ImageIO.read(new File(file));
BufferedImage buffered = (BufferedImage) image; 
```

In my program I try:

```
final float FACTOR  = 4f;
BufferedImage img = ImageIO.read(new File("graphic.png"));
int scaleX = (int) (img.getWidth() * FACTOR);
int scaleY = (int) (img.getHeight() * FACTOR);
Image image = img.getScaledInstance(scaleX, scaleY, Image.SCALE_SMOOTH);
BufferedImage buffered = (BufferedImage) image; 
```

Unfortunatelly I get run time error:

> sun.awt.image.ToolkitImage cannot be cast to java.awt.image.BufferedImage

Obviously casting does not work.
Question is: What is (or is there) the proper way of converting Image to BufferedImage?

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-11-28T12:47:11.273

From a [Java Game Engine](http://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/util/ImageTool.java#31):

```
/**
 * Converts a given Image into a BufferedImage
 *
 * @param img The Image to be converted
 * @return The converted BufferedImage
 */
public static BufferedImage toBufferedImage(Image img)
{
    if (img instanceof BufferedImage)
    {
        return (BufferedImage) img;
    }

    // Create a buffered image with transparency
    BufferedImage bimage = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);

    // Draw the image on to the buffered image
    Graphics2D bGr = bimage.createGraphics();
    bGr.drawImage(img, 0, 0, null);
    bGr.dispose();

    // Return the buffered image
    return bimage;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-28T12:51:08.903

One way to handle this is to create a new BufferedImage, and tell it's graphics object to draw your scaled image into the new BufferedImage:

```
final float FACTOR  = 4f;
BufferedImage img = ImageIO.read(new File("graphic.png"));
int scaleX = (int) (img.getWidth() * FACTOR);
int scaleY = (int) (img.getHeight() * FACTOR);
Image image = img.getScaledInstance(scaleX, scaleY, Image.SCALE_SMOOTH);
BufferedImage buffered = new BufferedImage(scaleX, scaleY, TYPE);
buffered.getGraphics().drawImage(image, 0, 0 , null); 
```

That should do the trick without casting.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-27T12:42:35.537

If you use Kotlin, you can add an extension method to Image in the same manner Sri Harsha Chilakapati suggests.

```
fun Image.toBufferedImage(): BufferedImage {
    if (this is BufferedImage) {
        return this
    }
    val bufferedImage = BufferedImage(this.getWidth(null), this.getHeight(null), BufferedImage.TYPE_INT_ARGB)

    val graphics2D = bufferedImage.createGraphics()
    graphics2D.drawImage(this, 0, 0, null)
    graphics2D.dispose()

    return bufferedImage
} 
```

And use it like this:

```
myImage.toBufferedImage() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T12:47:58.380

If you are getting back a `sun.awt.image.ToolkitImage`, you can cast the Image to that, and then use [getBufferedImage()](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/awt/image/ToolkitImage.html#getBufferedImage%28%29) to get the `BufferedImage`.

So instead of your last line of code where you are casting you would just do:

```
BufferedImage buffered = ((ToolkitImage) image).getBufferedImage(); 
```

# database - CodeIgniter 数据库查询缓存问题

> ID：13605252
> 
> 赞同：1
> 
> 时间：2012-11-28T12:38:02.447
> 
> 标签：database, codeigniter, caching

我通过 application/config/database.php 文件在 CodeIgniter 中启用了查询缓存，它起作用了。然后我禁用它，并注释掉文件夹路径。然后，当我重新启用缓存并取消注释文件夹路径时，缓存将不起作用。

我尝试过其他目录。这在本地服务器和 Web 服务器上都是一个问题。

```
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = './application/cache/'; 
```

这些是我的 database.php 设置。我试过删除'。从字符串的开头。我还尝试删除尾随和前面的斜杠。

任何帮助将非常感激。谢谢你。

编辑：我知道该文件夹是可写的，因为存储整页缓存有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-24T11:54:44.713

在 config/database.php 中定义缓存目录如下：

```
$db['default']['cachedir'] = APPPATH . 'cache'; 
```

另外，确保您的目录是可写的（如果您在 Mac 或 Linux 上）

```
sudo chmod 777 -R application/cache 
```

如果仍然不起作用，请在运行 db 查询之前尝试显式打开缓存。

```
$this->db->cache_on(); 
```

# modeling - Enterprise Architect：测试工件渲染的默认设置可能吗？

> ID：13605253
> 
> 赞同：0
> 
> 时间：2012-11-28T12:38:08.590
> 
> 标签：modeling, application-settings, enterprise-architect

对于用例和测试类/套件，Sparx EA 确实支持矩形表示法，而不是默认的椭圆外观。（如此处所述：[http](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/usingrectanglenotation.html) ://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/usingrectanglenotation.html ）

是否可以将矩形符号设为 [ EA 范围 | 项目范围 | package-wide ]测试类/套件的*默认值？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:34:44.653

由于这里没有答案，我在 Sparx 论坛上发布了同样的问题，一位用户回答了它：您可以使用[EA 的 API](http://www.sparxsystems.com/uml_tool_guide/sdk_for_enterprise_architect/theautomationinterface.htm "API")来[实现，因为没有这样的设置。](http://www.sparxsystems.com/cgi-bin/yabb/YaBB.cgi?num=1359389297 "回答")

# jquery - 样式表相对于菜单加载的定位

> ID：13605258
> 
> 赞同：3
> 
> 时间：2012-11-28T12:38:23.907
> 
> 标签：jquery, html, css

我正在为一个酒店网站做一些设计工作，并注意到导航间歇性地没有加载——我没有建立这个网站——但是当我正在处理它时，我想我会为他们修复——看着导航 css 的代码位于头部的 javascripts 下方 - 所以我将它移到顶部 - 似乎在我的 imac 上的 chrome/firefox/safari 中工作 - 但由于我不明白 JS 在我的页面中实际上在做什么偏执它可能会影响其他浏览器的功能！？

可能只是偏执狂-但我想我会检查一下以放松心情，因为我不知道是否有原因首先以这种方式出现-或者只是编码错误！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:48:01.177

好吧，大多数人使用 Windows，所以我建议尝试[为 MAC 运行获得一个 Wine 端口](http://www.davidbaumgold.com/tutorials/wine-mac/)，并在其下安装 Firefox、Chrome、Opera 和 MSIE。

至于我自己（Win 7、Chrome、FF、MSIE、Opera - 最新版本），看起来还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:48:37.493

包含的 javascript 是标准的 jquery 函数，不会因为 css 被向上移动而产生任何影响。

由于无法保证文件的加载时间，一般来说，我怀疑任何严重的 JS 库都会在加载 css 的顺序方面存在问题。

# java - 如何在 Hibernate 中按顺序使用子句

> ID：13605259
> 
> 赞同：0
> 
> 时间：2012-11-28T12:38:24.037
> 
> 标签：java, hibernate

我想通过 Hibernate 从具有具体顺序的数据库中获取对象。这个订单是这样的：

作为第一个我想获取标题为例如`first_column`不为空的列的对象，

作为第二个我想获取列`second_column`不为空的对象，

作为最后一个我想获取`third_column`作为另一个对象/表的 id 的对象，而这个另一个对象有一个具有具体值的字段，例如：`"something"`.

我以这种方式创建了标准：

```
criteria.addOrder(Order.asc("firstColumn"));
criteria.addOrder(Order.asc("secondColumn")); 
```

但我怎样才能满足最后一个要求？有了这个限制，我可以做这样的事情：

```
criteria.createAlias("thirdColumn", "t");
criteria.add(Restrictions.eq("t.field", "something")); 
```

但是我必须使用顺序，而不是限制三个单独的`Criteria`结果，因为我也在使用`setFirstResult()`and `setMaxResults()`of`Criteria`在我的前端实现分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:21:50.247

如果您可以用 SQL 编写语句，那么您可能可以摆脱本文中提到的方法[，](http://blog.tremend.ro/2008/06/10/how-to-order-by-a-custom-sql-formulaexpression-when-using-hibernate-criteria-api/)即创建 Order 的自定义子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-06T17:14:52.410

我认为您可以简单地使用“。” 分隔符并编写代码如下

```
criteria.createAlias("thirdColumn", "t");
criteria.addOrder(Order.asc("t.field")); 
```

# adobe - 如何在 CQ5 中配置声明式服务

> ID：13605260
> 
> 赞同：3
> 
> 时间：2012-11-28T12:38:24.537
> 
> 标签：adobe, osgi, aem, apache-felix

如何在 CQ5 中通过 OSGI 控制台配置声明式服务。我能够构建示例服务，捆绑代码我得到 jar 并通过捆绑从 OSGI 控制台安装

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:50:30.743

The first step is define your service has having configuration parameters. You might have something like this:

```
package com.sample.osgi;

import java.util.Map;

import org.apache.felix.scr.annotations.Activate;
import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Modified;
import org.apache.felix.scr.annotations.Property;

@Component(label = "Service Label", description = "Service Description", metatype = true, immediate = true)
public class ConfigurableService {

    @Property(value="default value", label = "Sample Parameter", description = "Example of a component parameter")  
    private static final String SAMPLE_PARAM_NAME = "param.one"; 

    @Activate
    protected void activate(final Map<String, Object> props) {
        this.update(props);
    }

    @Modified
    protected void update(final Map<String, Object> props) {        
        System.out.println(props.get(SAMPLE_PARAM_NAME));
    }

} 
```

Once you have your service, you should use maven to generate the scr descriptors, create your bundle and deploy it to your local server. This is described on [this page](http://dev.day.com/content/docs/en/cq/current/developing/developmenttools/developing-with-maven.html#Creating%20the%20project%20structure).

Once you've deployed you should be able to see your service in the felix console on your server. For example:

```
http://localhost:4502/system/console/configMgr/com.sample.osgi.ConfigurableService 
```

As we added an update method with the @Modified annotation, your component will receive updates to the configured values as they are made with calls to that method.

You can find more information on the SCR annotations [on the felix site](http://felix.apache.org/site/scr-annotations.html#SCRAnnotations-Service)

# objective-c - iPhone 5标签栏下方的黑色空间

> ID：13605270
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:39:03.570
> 
> 标签：objective-c, ios, xcode, ios6, iphone-5

我目前正在开发一个新的应用程序。这个应用程序有一个登录屏幕。当您登录时。你去一个标签栏控制器。但在我的标签栏下方有一个黑色空间。你可以在下面看到它。有人知道如何做到这一点吗？

![在此处输入图像描述](../Images/6196ca097af57d11cc15fc38343502dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:40:49.560

是的，这很正常，您的应用程序不支持 4" 屏幕尺寸。为了确保应用程序不会损坏，Apple 将在 3.5" 模式下运行不支持 4" 屏幕的应用程序。

`Default-568h@2x.png`为了让您的应用程序支持 4 英寸屏幕尺寸，请添加名称为 640x1136 的新开始屏幕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:40:25.947

添加尺寸为 640x1136 的启动图像，名称为 Default-568h@2x.png 并再次检查..

# r - 使用 set.seed 函数的原因

> ID：13605271
> 
> 赞同：200
> 
> 时间：2012-11-28T12:39:04.507
> 
> 标签：r, random

在启动程序之前，我已经多次看到`set.seed`R 中的函数。我知道它基本上用于随机数生成。有什么特别需要设置的吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-11-28T12:52:17.233

需求是对可重现结果的可能期望，例如，这可能来自尝试调试程序，或者当然来自尝试重做它的工作：

这两个结果我们将“永远”不会重现，因为我只是要求一些“随机”的东西：

```
R> sample(LETTERS, 5)
[1] "K" "N" "R" "Z" "G"
R> sample(LETTERS, 5)
[1] "L" "P" "J" "E" "D" 
```

然而，这两个是相同的，*因为我设置了种子*：

```
R> set.seed(42); sample(LETTERS, 5)
[1] "X" "Z" "G" "T" "O"
R> set.seed(42); sample(LETTERS, 5)
[1] "X" "Z" "G" "T" "O"
R> 
```

有大量关于这一切的文献；维基百科是一个好的开始。本质上，这些 RNG 被称为伪随机数生成器，因为它们实际上是*完全算法*的：给定相同的种子，你会得到相同的序列。这*是一个特性*，而不是一个错误。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-10-31T13:50:52.807

每次想要获得可重现的随机结果时，都必须设置种子。

```
set.seed(1)
rnorm(4)
set.seed(1)
rnorm(4) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-06-12T15:34:45.280

只是添加一些附加方面。设置种子的必要性：在学术界，如果有人声称他的算法在一次模拟中达到了 98.05% 的性能，那么其​​他人需要能够重现它。

```
?set.seed 
```

通过这个函数的帮助文件，这些是一些有趣的事实：

> (1) set.seed() 返回NULL，不可见
> 
> (2)“一开始是没有种子的，需要时根据当前时间和进程ID创建一个新的。因此，不同的会话默认会给出不同的模拟结果。但是，种子可能会从一个如果先前保存的工作区已恢复，则上一个会话。”，这就是为什么您下次想要相同的随机序列序列时要使用相同的整数值调用 set.seed() 的原因。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-28T18:52:48.663

当我们尝试优化涉及随机生成数字的函数时（例如在基于模拟的估计中），修复种子是必不可少的。粗略地说，如果我们不固定种子，由于绘制不同的随机数引起的变化很可能导致优化算法失败。

假设由于某种原因，您想通过模拟估计给定样本的均值零正态分布的标准偏差 (sd)。这可以通过围绕步骤运行数值优化来实现

1.  （设置种子）
2.  给定 sd 的值，生成正态分布数据
3.  在给定模拟分布的情况下评估数据的可能性

以下函数执行此操作，一次没有步骤 1.，一次包含它：

```
# without fixing the seed
simllh <- function(sd, y, Ns){
  simdist <- density(rnorm(Ns, mean = 0, sd = sd))
  llh <- sapply(y, function(x){ simdist$y[which.min((x - simdist$x)^2)] })
  return(-sum(log(llh)))
}
# same function with fixed seed
simllh.fix.seed <- function(sd,y,Ns){
  set.seed(48)
  simdist <- density(rnorm(Ns,mean=0,sd=sd))
  llh <- sapply(y,function(x){simdist$y[which.min((x-simdist$x)^2)]})
  return(-sum(log(llh)))
} 
```

我们可以通过简短的蒙特卡罗研究来检查这两个函数在发现真实参数值方面的相对性能：

```
N <- 20; sd <- 2 # features of simulated data
est1 <- rep(NA,1000); est2 <- rep(NA,1000) # initialize the estimate stores
for (i in 1:1000) {
  as.numeric(Sys.time())-> t; set.seed((t - floor(t)) * 1e8 -> seed) # set the seed to random seed
  y <- rnorm(N, sd = sd) # generate the data
  est1[i] <- optim(1, simllh, y = y, Ns = 1000, lower = 0.01)$par
  est2[i] <- optim(1, simllh.fix.seed, y = y, Ns = 1000, lower = 0.01)$par
}
hist(est1)
hist(est2) 
```

参数估计的结果分布是：

![不固定种子的参数估计直方图](../Images/a458fe263d7c29f6d067735d3fb70dfc.png) ![固定种子的参数估计直方图](../Images/fa064c219ae94d480f56f55ac7805279.png)

当我们修复种子时，数值搜索更频繁地接近真实参数值 2。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-23T11:42:38.327

基本上 set.seed() 函数将有助于重用相同的随机变量集，我们将来可能需要使用相同的随机变量再次评估特定任务

我们只需要在使用任何随机数生成函数之前声明它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-29T09:08:21.747

`set.seed`是一个基本函数，它能够（每次你想要）与其他函数（`rnorm`, `runif`, `sample`）一起生成相同的随机值。

下面是一个**没有 set.seed的例子**

```
> set.seed(NULL)
> rnorm(5)
[1]  1.5982677 -2.2572974  2.3057461  0.5935456  0.1143519
> rnorm(5)
[1]  0.15135371  0.20266228  0.95084266  0.09319339 -1.11049182
> set.seed(NULL)
> runif(5)
[1] 0.05697712 0.31892399 0.92547023 0.88360393 0.90015169
> runif(5)
[1] 0.09374559 0.64406494 0.65817582 0.30179009 0.19760375
> set.seed(NULL)
> sample(5)
[1] 5 4 3 1 2
> sample(5)
[1] 2 1 5 4 3 
```

下面是一个**带有 set.seed的示例**

```
> set.seed(123)
> rnorm(5)
[1] -0.56047565 -0.23017749  1.55870831  0.07050839  0.12928774
> set.seed(123)
> rnorm(5)
[1] -0.56047565 -0.23017749  1.55870831  0.07050839  0.12928774
> set.seed(123)
> runif(5)
[1] 0.2875775 0.7883051 0.4089769 0.8830174 0.9404673
> set.seed(123)
> runif(5)
[1] 0.2875775 0.7883051 0.4089769 0.8830174 0.9404673
> set.seed(123)
> sample(5)
[1] 3 2 5 4 1
> set.seed(123)
> sample(5)
[1] 3 2 5 4 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-01T07:29:25.567

只是为了进一步添加......如果你想要一致性，你需要在每次做一些随机的事情时设置种子。种子不会保持不变。

```
set.seed(0)
rnorm(3)
set.seed(0)
rnorm(3)

[1]  1.2629543 -0.3262334  1.3297993
[1]  1.2629543 -0.3262334  1.3297993 
```

```
set.seed(0)
rnorm(3)
rnorm(3)

[1]  1.2629543 -0.3262334  1.3297993
[1]  1.2724293  0.4146414 -1.5399500 
```

# java - 无需受保护资源的 JSF/Java EE 登录

> ID：13605277
> 
> 赞同：2
> 
> 时间：2012-11-28T12:39:24.013
> 
> 标签：java, jsf, jakarta-ee, authentication, j-security-check

在使用容器管理的安全性的 JSF2 / Java EE 6 Web 应用程序中，基于表单的身份验证 (j_security_check) 需要请求一个受保护的页面，之后容器会为您处理登录过程，一旦通过身份验证，就会将浏览器重定向到请求的页面.

在许多常见情况下，这不是您希望应用程序的行为方式。例如，您可能希望拥有同一页面的只读版本和可更新版本。如果用户未登录，您可以在该页面上放置一个“立即登录以编辑”按钮，如果用户已登录，则使字段可编辑。但在两种情况下它都是相同的 JSF 页面，并且该视图不能既不受保护又受保护，因此 j_security_check 似乎无法处理这种情况。

所以，两个问题：

1) 可以操纵 j_security_check 来实现此功能吗？或 2) 如果 j_security_check 不能，JSF / JavaEE webapps 实现这一点的“正常”方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:49:34.453

登录用户也可以在不安全的页面中使用。您可以通过检查是否存在[`HttpServletRequest#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)和角色检查来执行登录检查，[`HttpServletRequest#isUserInRole()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isUserInRole%28java.lang.String%29)并相应地呈现受限组件。

例如，仅在用户未登录时显示“登录编辑”按钮：

```
<h:commandButton 
    value="Login to edit" action="#{auth.login}" 
    rendered="#{empty request.remoteUser}" /> 
```

并且仅在用户登录或具有所需角色时显示“编辑”按钮：

```
<h:commandButton 
    value="Edit" action="#{someBean.edit(someItem)}" 
    rendered="#{not empty request.remoteUser}" />
<!-- or -->
<h:commandButton 
    value="Edit" action="#{someBean.edit(someItem)}" 
    rendered="#{request.isUserInRole('ADMIN')}" /> 
```

# django - 迁移时传递 South 随机唯一默认值

> ID：13605280
> 
> 赞同：12
> 
> 时间：2012-11-28T12:39:31.917
> 
> 标签：django, django-south

我正在尝试使用现有数据转发迁移模型。该模型有一个新字段，其约束为 unique=True 和 null=False。当我做

```
./manage.py schemamigration myapp --auto 
```

South 让我通过询问为新字段指定默认值：

```
Specify a one-off value to use for existing columns now 
```

通常我将其设置为 None 但由于该字段需要是唯一的，我想知道是否可以通过以下方式向 South 传递一个唯一值：

```
 >>> import uuid; uuid.uuid1().hex[0:35] 
```

这给了我一条错误消息

```
! Invalid input: invalid syntax 
```

如果可以通过命令行迁移时传递 South 随机唯一默认值，有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-28T13:11:57.157

不幸的是，只有`datetime`模块可用作模式迁移中的一次性值。

但是，您可以通过将其拆分为三个迁移来实现相同的效果：

*   在没有约束的情况下向模型添加新字段（null=True，unique=False）
*   使用数据迁移将 UUID 添加到新字段
*   在新字段上添加约束（null=False，unique=True）

数据迁移教程：[http ://south.readthedocs.org/en/0.7.6/tutorial/part3.html#data-migrations](http://south.readthedocs.org/en/0.7.6/tutorial/part3.html#data-migrations)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-30T19:02:17.777

在 django 1.7+ 中，您可以执行以下操作。它首先添加没有索引且没有唯一性的字段。然后它分配唯一值（我基于名称并使用您需要创建的 slugify 方法），最后再次更改字段以添加索引和唯一属性。

```
from django.db import migrations
import re
import django.contrib.postgres.fields
from common.utils import slugify
import django.core.validators

def set_slugs(apps, schema_editor):
    categories = apps.get_model("myapp", "Category").objects.all()
    for category in categories:
        category.slug = slugify(category.name)
        category.save()

class Migration(migrations.Migration):

    dependencies = [
        ('myapp', '0034_auto_20150906_1936'),
    ]

    operations = [
        migrations.AddField(
            model_name='category',
            name='slug',
            field=models.CharField(max_length=30, validators=[django.core.validators.MinLengthValidator(2), django.core.validators.RegexValidator(re.compile('^[0-9a-z-]+$'), 'Enter a valid slug.', 'invalid')], help_text='Required. 2 to 30 characters and can only contain a-z, 0-9, and the dash (-)', unique=False, db_index=False, null=True),
            preserve_default=False,
        ),
        migrations.RunPython(set_slugs),
        migrations.AlterField(
            model_name='category',
            name='slug',
            field=models.CharField(help_text='Required. 2 to 30 characters and can only contain a-z, 0-9, and the dash (-)', unique=True, max_length=30, db_index=True, validators=[django.core.validators.MinLengthValidator(2), django.core.validators.RegexValidator(re.compile('^[0-9a-z-]+$'), 'Enter a valid slug.', 'invalid')]),
        ),
    ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-01T14:53:24.747

[这](https://github.com/django/django/commit/1f9e44030e9c5300b97ef7b029f482c53a66f13b)是 Django 关于迁移唯一字段的官方方法。

```
Migrations that add unique fields
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 Applying a "plain" migration that adds a unique non-nullable field to a table
 with existing rows will raise an error because the value used to populate
 existing rows is generated only once, thus breaking the unique constraint.

 Therefore, the following steps should be taken. In this example, we'll add a
 non-nullable :class:`~django.db.models.UUIDField` with a default value. Modify
 the respective field according to your needs.

 * Add the field on your model with ``default=...`` and ``unique=True``
   arguments. In the example, we use ``uuid.uuid4`` for the default.

 * Run the :djadmin:`makemigrations` command.

 * Edit the created migration file.

   The generated migration class should look similar to this::

     class Migration(migrations.Migration):

         dependencies = [
             ('myapp', '0003_auto_20150129_1705'),
         ]

         operations = [
             migrations.AddField(
                 model_name='mymodel',
                 name='uuid',
                 field=models.UUIDField(max_length=32, unique=True, default=uuid.uuid4),
             ),
         ]

   You will need to make three changes:

   * Add a second :class:`~django.db.migrations.operations.AddField` operation
     copied from the generated one and change it to
     :class:`~django.db.migrations.operations.AlterField`.

   * On the first operation (``AddField``), change ``unique=True`` to
     ``null=True`` -- this will create the intermediary null field.

   * Between the two operations, add a
     :class:`~django.db.migrations.operations.RunPython` or
     :class:`~django.db.migrations.operations.RunSQL` operation to generate a
     unique value (UUID in the example) for each existing row.

   The resulting migration should look similar to this::

     # -*- coding: utf-8 -*-
     from __future__ import unicode_literals

     from django.db import migrations, models
     import uuid

     def gen_uuid(apps, schema_editor):
         MyModel = apps.get_model('myapp', 'MyModel')
         for row in MyModel.objects.all():
             row.uuid = uuid.uuid4()
             row.save()

     class Migration(migrations.Migration):

         dependencies = [
             ('myapp', '0003_auto_20150129_1705'),
         ]

         operations = [
             migrations.AddField(
                 model_name='mymodel',
                 name='uuid',
                 field=models.UUIDField(default=uuid.uuid4, null=True),
             ),
             # omit reverse_code=... if you don't want the migration to be reversible.
             migrations.RunPython(gen_uuid, reverse_code=migrations.RunPython.noop),
             migrations.AlterField(
                 model_name='mymodel',
                 name='uuid',
                 field=models.UUIDField(default=uuid.uuid4, unique=True),
             ),
         ]
* Now you can apply the migration as usual with the :djadmin:`migrate` command.

   Note there is a race condition if you allow objects to be created while this
   migration is running. Objects created after the ``AddField`` and before
   ``RunPython`` will have their original ``uuid``’s overwritten. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T12:56:36.437

您可以手动编辑迁移文件：

我需要在某个字段中添加随机字符，所以我导入了 random 和 randint

```
import random
import string 
```

并将默认值更改为

```
default=random.choice(string.lowercase) 
```

有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-01T18:18:58.573

有办法为南的每一行做独特的价值。

### 在 models.py 中定义 slug 为：

```
class Foo(models.Model):
  slug = models.SlugField(unique=True, default='')
  .... 
```

### 创建新的迁移

运行 python manage.py schemamigration --auto foo

### 打开新的迁移文件，然后编辑它：

```
# Change add_column to this:
db.add_column(u'account_funnel', 'slug',
            self.gf('django.db.models.foo.Foo')(default='', 
                  unique=False,  
                  max_length=50),
            keep_default=False)

# right above this add such python code:
foos = orm['foo.Foo'].objects.all()
for foo in foos:
        foo.slug = slugify(funnel.name)
        foo.save()

# Modify slug as unique field
db.create_unique(u'foo_foo', ['slug'])

ps mark this migration as no_dry_run = True
pss do not forget to import slugify function from django.template.defaultfilters import slugify 
```

# eclipse - 如何覆盖 Eclipse 4 中父方案的键绑定？

> ID：13605282
> 
> 赞同：2
> 
> 时间：2012-11-28T12:39:39.890
> 
> 标签：eclipse, keyboard-shortcuts

我正在升级 RCP 应用程序以使用 Eclipse 4.2.1。我遇到的问题之一是我的自定义方案中的键绑定不再覆盖 Eclipse 键绑定。

我在一个示例插件项目中重现了这个问题。这是通过遵循然后改编[本教程](http://www.vogella.com/articles/EclipseCommandsKeybindings/article.html)创建的。我无法附加项目本身，所以只包含了 plugin.xml 文件的内容。

我有自己的方案，它扩展了默认方案：

```
 <scheme
        id="test.MyScheme"
        name="My Scheme"
        parentId="org.eclipse.ui.defaultAcceleratorConfiguration">
  </scheme> 
```

我有一个带有键绑定`Ctrl`+的命令`N`：

```
 <key
        commandId="test.MyCommand"
        contextId="org.eclipse.ui.contexts.window"
        schemeId="test.MyScheme"
        sequence="M1+N">
  </key> 
```

在 Eclipse 3.7.2 中，按`Ctrl`+`N`将运行我的命令。

在 Eclipse 4.2.1 中，它会弹出一个框，要求我在运行命令和启动“新建”向导之间进行选择。我需要做什么才能恢复原始行为？

plugin.xml 的完整内容如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="application"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="test.Application">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="RCP Perspective"
            class="test.Perspective"
            id="test.perspective">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="test.MyCommandHandler"
            id="test.MyCommand"
            name="My Command">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="fileMenu"
               label="File">
            <command
                  commandId="test.MyCommand"
                  label="My Command"
                  style="push">
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="test.MyCommand"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="test.MyScheme"
            sequence="M1+N">
      </key>
      <scheme
            id="test.MyScheme"
            name="My Scheme"
            parentId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </scheme>
   </extension>
   <extension
         id="product"
         point="org.eclipse.core.runtime.products">
      <product
            application="test.application"
            name="My Product">
         <property
               name="appName"
               value="My Product">
         </property>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini">
         </property>
      </product>
   </extension>

</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:48:32.560

旧机制似乎不起作用，但还有另一种方法。

1.  添加扩展 org.eclipse.e4.workbench.model
2.  添加处理器片段
3.  找到有问题的键绑定：MAppliction->MBindingTable->MKeyBinding
4.  从绑定表中删除键绑定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T14:13:55.617

plugin.xml 旁边的插件目录中可能缺少以下文件：

```
plugin_customization.ini 
```

它的内容应该是：

```
org.eclipse.ui/KEY_CONFIGURATION_ID=test.MyScheme 
```

另请参阅本[教程](http://www.vogella.com/tutorials/EclipseCommandsKeybindings/article.html)和[此处的章节](http://www.vogella.com/tutorials/EclipseRCP/article.html#keybindings)。

# mysql - 如何让 XAMPP 控制面板正确安装和启动服务？

> ID：13605283
> 
> 赞同：3
> 
> 时间：2012-11-28T12:39:41.027
> 
> 标签：mysql, apache, service, xampp

所以最近每次我尝试将 Apache/MySQL/FileZilla 作为 XAMPP 上的服务安装时，它都会这样说：

```
5:20:18 AM  [Apache]    Apache Service detected with wrong path
5:20:18 AM  [Apache]    Change XAMPP Apache settings or
5:20:18 AM  [Apache]    Uninstall/disable the other service manually first
5:20:18 AM  [Apache]    Found Path: ERROR: Not Able To Open Service Manager
5:20:18 AM  [Apache]    Expected Path: "f:\xampp\apache\bin\httpd.exe" -k runservice
5:20:18 AM  [Apache]    Successful! 
```

之后，我无法从 XAMPP 面板启动该过程，直到我从那里卸载服务并且模块名称以红色突出显示。虽然如果我将它们作为服务安装（红色名称和所有），我可以进入服务管理器并手动启动它们并且它们启动正常，甚至 XAMPP 控制面板将它们变为绿色并注意到它们运行。这也可能发生在 Tomcat 上，我只是从不使用它，所以我没有弄乱它。所有路径似乎都是正确的（我确实在 F 驱动器上有它），但即使在无数次重新安装和注册表擦除之后，XAMPP 控件似乎也不想处理正确安装和运行服务。对此感到有些沮丧，因此在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:00:01.073

这可能都是关于权限、文件 ACL 等的。

当您以正常模式（不是作为服务）启动 XAMPP 时，它以启动它的用户的权限启动。这可能是您的 Windows 帐户。

XAMPP 可以访问您的 windows 帐户拥有的所有文件。因此，如果您创建目录“F:\some_dir”，XAMPP 在正常模式下应该可以访问它并且应该没有问题，因为 XAMPP 正在使用您的帐户来访问文件。

**当应用程序作为服务启动时 - 它使用另一个 Windows 帐户**（服务默认使用 2 个帐户：本地服务、网络服务）。**该帐户可能无法读取和写入属于您的个人 windows 帐户的文件**。

**可以更改用于特定服务的帐户。**您可以运行 services.msc，选择服务并转到属性，应该有“登录”选项卡。

您还可以更改文件/目录权限并使其可用于服务帐户，但我认为第一个解决方案更好。

XAMPP 的另一个问题是控制面板，默认情况下它在没有管理权限的情况下启动，并且当您从开始菜单启动它时，它无法控制任何服务。安装后的某些版本的 XAMPP 将以管理员权限运行 XAMPP 控制面板，并且它可以正常工作，直到您关闭该应用程序并重新启动（没有管理员权限）。

如果您尝试启动 XAMPP 控制面板并且它不询问管理员帐户 - 您必须右键单击 XAMPP 控制面板图标并单击“以管理员身份运行”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:39:19.720

对于 WAMP 服务器上的 no accesses，转到 appache 的 httpd.conf，然后搜索如下内容：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory> 
```

但是它通过 order 和deny 具有其他一些值....您必须将其更改为上述值才能使其工作。

我的httpd.conf中也有这个，也许你可以用它来......：

```
<Directory "D:/wamp_together/www/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride all

    #
    # Controls who can get stuff from this server.
    #

#   onlineoffline tag - don't remove
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1

</Directory> 
```

# ios - MasterViewController 在横向中不存在

> ID：13605284
> 
> 赞同：1
> 
> 时间：2012-11-28T12:39:44.757
> 
> 标签：ios, uisplitviewcontroller

![在此处输入图像描述](../Images/d496701a926d459ac2df8ef8602112a3.png)

大家好！我已经用谷歌搜索了，阅读了文档..但是......有没有人知道为什么会发生这种情况？

最奇怪的问题是，我和我的朋友有类似的 ipad（iPad 3 4G (iOS 6.0.1)）。这是他的截图。我什至无法重现它。我们都有 iOS 6.0.1。

请，任何想法/提示将不胜感激！

# iphone - iphone sdk 中的 NSdateFormatter

> ID：13605287
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:39:51.050
> 
> 标签：iphone, ios, ios4, nsdateformatter, nsdatecomponents

我是ios开发的初学者。我被困在 NSdateFormatter 类中。我的问题是：

在“10 月 25 日”这个日期支持哪种格式化程序？

请帮助我，提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:46:55.640

您可以按“Oct, 25”格式化日期，您必须在“th”后面加上格式化的日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:44:21.367

```
 [yourDateFormatter setDateFormat:@"LLL,dd'th'"]; 
```

LLL：一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

dd：01~31（月中的某天）

有关日期格式的更多信息，请参阅此链接中的我的博客。

[我的博客](http://parasjoshi3.blogspot.in/2012/01/date-formate-info-for-iphone-sdk.html)

**例如**

使用下面的 2 行代码调用此方法..

```
NSString *strDate = [self StringFromDate:@"Oct, 25th"];
NSLog(@"\n New Date is HERE  =====>> %@",strDate); 
```

这是刚刚粘贴到您的`.m`文件中的方法

```
-(NSString *)StringFromDate:(NSString *)DateLocal{
    //    DateLocal = [self trimString:DateLocal];
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];   
    [dateFormatter setDateFormat:@"LLL,dd'th'"];

    NSDate *date = [dateFormatter dateFromString: DateLocal];
    NSString *tt = [dateFormatter stringFromDate:date];
    NSDate *dateReturn = [dateFormatter dateFromString:tt];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd,LLL"];// set the format which you want
    NSString *dateString = [dateFormat stringFromDate:dateReturn];  
    NSLog(@"Date is HERE  =====>> %@",dateString);
    [dateFormat release];
    return dateString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:48:37.760

我想强调您不要使用明确的日期格式，因为如果用户设置未设置为英语，则日期可能无法正确显示。

相反，您应该使用 的`dateStyle`和`timeStyle`属性[`NSDateFormatter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)。

请参阅 Apple[`NSDateFormatterStyle`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-SW2)文档以了解哪一个适合您。

# three.js - STLLoader 出现问题

> ID：13605290
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:39:56.393
> 
> 标签：three.js

当我尝试加载由 SolidWorks 创建的 .stl 模型时，它的加载非常巨大。我做错了什么？我使用了示例 stlloader 代码，只是更改*了 loader.load*。

[http://www.filehosting.org/file/details/398106/mod1.STL](http://www.filehosting.org/file/details/398106/mod1.STL) - 我的模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:05:31.097

您可以在创建网格后对其进行缩放。

```
mesh.scale.multiplyScalar( 0.2 ); 
```

# iphone - 在 iPhone 中使用 NSXML 解析器解析 SOAP 响应中的问题？

> ID：13605291
> 
> 赞同：0
> 
> 时间：2012-11-28T12:39:58.803
> 
> 标签：iphone, soap, nsxmlparser

我在我的应用程序中使用了 SOAP 网络服务。我已将 SOAP 请求发送到服务器并以 XML 格式获取结果。我正在使用 NSXML Parser 来解析数据。

我想让数据“真实”，当我试图解析内容应用程序崩溃时，我无法解析该数据。

```
<ServiceFinalResult>
<Response  xmlns="http://aaaa.com/test/schemas/services/myaccounts/data/_1_0">
  true
</Response> 
</ServiceFinalResult> 
```

所以请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:47:10.407

试试这个代码。

```
NSString *soapMessage = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
    "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
    "<soap:Body>\n"
    "<name>testName</name>\n"
    "</soap:Body>\n"
    "</soap:Envelope>\n";

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:webServiceUrl];

NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];              
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:yourSoapAction forHTTPHeaderField:@"SOAPAction"];
[req addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"POST"];    
[req setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSHTTPURLResponse* urlResponse = nil;
NSError *error = [[[NSError alloc] init] autorelease];  
NSData *webData = [NSURLConnection sendSynchronousRequest:req returningResponse:&urlResponse error:&error]; 
```

# declaration - 动态分配的全局结构

> ID：13605296
> 
> 赞同：1
> 
> 时间：2012-11-28T12:40:15.973
> 
> 标签：declaration, structure

如何声明具有动态分配的全局结构？我所知道的只是通过数组结构，但那是静态的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:41:25.400

可以在函数中动态分配结构。

```
#include <stdlib.h>

struct s *p;

int main(void)
{
    p = malloc(sizeof *p);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:52:10.633

标准做法是在头文件中声明结构并在函数中定义它。

例如：

```
struct node {
int data;
struct node* next;
}; 
```

这将在头文件中定义，并将在函数中动态分配内存，如下所示

```
int main(void){
struct node *head;
head = malloc(sizeof(struct node));
//operations goes here
} 
```

也不要忘记`free`使用后的结构。

# c# - 用空值初始化枚举

> ID：13605303
> 
> 赞同：12
> 
> 时间：2012-11-28T12:40:50.013
> 
> 标签：c#, .net

如何创建具有空值的枚举

前任：

```
public enum MyEnum
{
    [StringValue("X")]
    MyX,
    [StringValue("Y")]
    MyY,      
    None
} 
```

其中 None 值为 null 或 String.Empty

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T12:44:14.513

你可以尝试这样的事情： -

```
public MyEnum? value= null; 
```

或者你可以试试这个： -

```
 public MyEnum value= MyEnum.None; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T12:53:54.910

正如所有其他答案所说，您**不能**将枚举值设为空。您**可以**做的是添加一个具有空值的`Description`属性（例如您的）。`StringValue`

例如：

```
public enum MyEnum
{
    [Description(null)]
    None = 0,
    [Description("X")]
    MyX,
    [Description("Y")]
    MyY
} 
```

您可以使用以下函数获取 Enum 的描述：

```
 public static string GetEnumDescription(Enum value)
    {
        FieldInfo fi = value.GetType().GetField(value.ToString());

        DescriptionAttribute[] attributes =
            (DescriptionAttribute[])fi.GetCustomAttributes(
            typeof(DescriptionAttribute),
            false);

        if (attributes != null && attributes.Length > 0)
            return attributes[0].Description;
        else
            return value.ToString();
    } 
```

**用法：**

```
MyEnum e = MyEnum.None;
string s2 = GetEnumDescription((MyEnum)e); // This returns null 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T12:47:37.280

所有枚举类型都是值类型，并且不同的成员也派生自成员类型（允许的类型是`byte`, `sbyte`, `short`, `ushort`, `int`, `uint`, `long`, 或`ulong`- 如[文档所示](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)）。

这意味着枚举的成员不能是`null`.

处理默认`enum`值的一种方法是将`None`值作为第一个值并将其设置为负值（对于有符号枚举）或`0`.

```
public enum MyEnum
{
    [StringValue(null)]
    None = -1,
    [StringValue("X")]
    MyX,
    [StringValue("Y")]
    MyY      
} 
```

`null`如果您声明一个可为空的实例 - ，则可以引用枚举`myenum?`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-28T12:48:01.247

使用 ”？” 可空类型的操作符！！

```
public MyEnum? myEnum= null; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T12:48:35.187

没有“具有空值的枚举”之类的东西。C# 中的枚举只是一个命名整数。在您的情况下，`None`只是`2`（为了完整性，`MyX`is`0`和`MyY`is `1`）的别名。默认情况下，枚举的基础数据类型是`int`，但它也可以是其他不同大小/符号的基于整数的原始类型。

如果您想要一个“空”枚举，则必须使用`MyEnum?`，也就是`Nullable<MyEnum>`。

# ruby-on-rails - Rails - 使用参数（路由）重定向 URL

> ID：13605304
> 
> 赞同：0
> 
> 时间：2012-11-28T12:40:51.323
> 
> 标签：ruby-on-rails, url, routes, haml, param

我正在尝试为在某个 url 中有参数的任何人创建一个重定向到主页。我目前在我的路线中有这个：

`match "/pr?campaign=#{'params[:campaign]'}" => redirect("/")`

但它不能正确识别它，如果我`/pr?campaign=test`输入网址，我会得到一个找不到页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:27:23.267

我不确定我是否理解你的问题，也许试试这个：

```
match '/pr'           => 'controller#action'           # responds to no additional params
match '/pr/:campaign' => 'another_controller#action'   # responds to another param. 
```

因此，`/pr`将被 接收`controller#action`，但`/pr/test`将被接收`another_controller#action`并接收*测试*为`params[:campaign]`

**编辑（此问题的实际解决方案）：**

```
match '/pr' => redirect('/') 
```

# eclipse-plugin - 选择checkedTreeselectionDialog中的所有条目

> ID：13605308
> 
> 赞同：0
> 
> 时间：2012-11-28T12:41:16.193
> 
> 标签：eclipse-plugin

我正在使用 org.eclipse.ui.dialogs.CheckedTreeSelectionDialog 来显示值列表。我想默认选择（检查）所有值。你能否让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:39:11.797

您可以使用[setInitialElementSelections](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/SelectionDialog.html#setInitialElementSelections%28java.util.List%29)方法设置最初检查哪些节点（在创建对话框时）。

```
CheckedTreeSelectionDialog dlg = new CheckedTreeSelectionDialog(shell, 
    new cLabelProvider(), 
    new cContentProvider());
dlg.setInput(model);
dlg.setInitialElementSelections(model.getAllElements()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T07:55:17.483

另外，请确保 在打开对话框`dlg.setInitialElementSelections(model.getAllElements());`
*之前*
`dlg.open();`执行您的操作：否则它将无法正常工作。

# java - 初始化 ArrayLists 的编码实践

> ID：13605310
> 
> 赞同：0
> 
> 时间：2012-11-28T12:41:18.360
> 
> 标签：java, arraylist

我正在寻求改进我的 Java 编码。

有人可以提供链接或解释是否有初始化 ArrayLists 的实践代码并避免以下问题：

-我在一个类中有 6 个 ArrayList，有些是其他类的子集。因为有些是其他人的子集，我知道它们通过“addAll()”和“add()”方法共享相同的引用。

结果，通过尝试更改子集中的元素，我也在更改原始集合，因为它们再次共享相同的引用。我的代码非常混乱，以至于一些“get”调用导致我的 2 个 ArrayLists 被重置。

我研究了这个论坛和谷歌，我似乎无法找到我想要的相关信息。我只找到 ArrayLists 的简单示例。我注意到这个论坛上有一些与 ArrayList 参考相关的问题，所以我认为这个问题的答案将在未来对其他人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:50:20.287

> 有人可以提供链接或解释是否有初始化 ArrayLists 的实践代码并避免以下问题：

没有这样的实践代码，或最佳实践或初始化 ArrayLists 的任何内容。

问题基本上是您需要*了解*Java 中使用对现有对象的引用和创建新对象之间的区别。然后你需要选择合适的...*取决于你想要做什么*。

（在这个主题上询问“最佳实践”就像询问是否应该使用`+`或`-`运营商的“最佳实践”......）

我建议您不要在谷歌上搜索“最佳实践”，而是回到您的 Java 教科书/教程/讲义并阅读：

*   什么是 Java 对象引用
*   对象分配意味着什么，以及
*   操作员做什么`new`。

并确保您*真正*了解它们。当您了解它们时，您将能够理解使用哪个来执行您在程序中尝试执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:02:26.217

addAll 添加对 ArrayList 中对象的引用，而不是对象的副本。如果您想要副本，则必须遍历第一个 ArrayList，并且对于每个对象，调用将创建对象副本的“克隆”函数，并将其添加到新的 ArrayList。

例子：

```
public static void main(String[] args) {
    ArrayList<Foo> A = new ArrayList<Foo>();
    A.add(new Foo("foo1", 1));
    A.add(new Foo("foo2", 2));
    ArrayList<Foo> B = new ArrayList<Foo>();
    System.out.println("Before: ");
    System.out.println("A:");
    for(Foo foo:A){
        System.out.println(foo);
        try {
            B.add((Foo)foo.clone());
        } catch (CloneNotSupportedException ex) {
            //Never Gonna Happen
        }
    }
    System.out.println("B:");
    for(Foo foo:B){
        System.out.println(foo);
    }

    A.remove(0);

    System.out.println("After:");
    System.out.println("A:");
    for(Foo foo:A){
        System.out.println(foo);
    }
    System.out.println("B:");
    for(Foo foo:B){
        System.out.println(foo);
    }
}

public static class Foo{
    private String Name;
    private int Id;

    public Foo(String Name, int Id) {
        this.Name = Name;
        this.Id = Id;
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        return new Foo(Name,Id);
    }

    @Override
    public String toString() {
        return "Name: "+Name+", Id: "+Id;
    }
} 
```

这打印出来：

```
Before: 
A:
Name: foo1, Id: 1
Name: foo2, Id: 2
B:
Name: foo1, Id: 1
Name: foo2, Id: 2
After:
A:
Name: foo2, Id: 2
B:
Name: foo1, Id: 1
Name: foo2, Id: 2 
```

如果您处理您创建的类的 ArrayLists，请确保它们都覆盖了“克隆”功能。对于包含您还创建的类的类，请使用您为父类“克隆”中的内部类创建的“克隆”函数。等等。

# c# - 如何克隆 EF 实体

> ID：13605316
> 
> 赞同：0
> 
> 时间：2012-11-28T12:41:35.460
> 
> 标签：c#, .net, entity-framework, orm, entity-framework-4

我有流动的场景：

1) 实体图从 EF 加载。（STE，4.3.1）

2) 该实体可能（或可能不会）被修改。

3) 这个实体由 WCF 发送到服务器。

**4）我想复制这个实体并将其作为新实体保存到数据库中。**

问题是我不知道如何将所有实体设置为已添加状态。

知道怎么做吗？谢谢。

# java - 在将字符串添加到集合之前是否会进行复制？

> ID：13605317
> 
> 赞同：3
> 
> 时间：2012-11-28T12:41:37.740
> 
> 标签：java

```
List<String> list = new ArrayList<String>();
String string = null;
string = "123";
list.add(string);
string = "456";
list.add(string);

for (String s : list)
{
    System.out.println(s);
} 
```

该程序输出：

```
123
456 
```

这是很自然的。

然而，我正在以另一种方式思考。“string”是实际 String 对象的引用（指针）。执行 add() 时，它只存储引用。当“字符串”引用另一个字符串对象时，为什么列表仍然保留原始对象？它会在 add() 之前进行复制吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:42:41.447

String 变量的“值”是对作为字符串的（不可变）对象的引用。

所以没有字符串的副本，而是引用的副本。拥有此引用不允许您更改原始变量（您没有指向它的链接）并且不允许您更改字符串，因为它是不可变的。

在两次调用 add 之后，arrayList 包含的数组内部是两个不同的引用。它们可以指向相同的字符串，但更改一个引用不会更改另一个引用。如果您想在这种情况下更改第一个引用以指向与第二个相同的字符串，最简单的方法是`list.set(0, list.get(1));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:42:56.983

> 当“字符串”引用另一个字符串对象时，为什么列表仍然保留原始对象？

您添加到列表中的是对字符串的引用。后来，当你这样做

```
string = "456"; 
```

您没有*更改现有字符串，而是将对**不同*字符串的引用分配给`string`变量。原始字符串是不变的（实际上Java中的字符串是不可变的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:45:04.823

因为变量'string'只不过是一个指向内存地址的指针。当您在列表中添加“字符串”时，“字符串”的内存地址将输入列表中。当您再次分配一个值时，它只是更改新变量指向的内存中的地址

# android - 在 Robolectric 中删除 tearDown() 中的文件失败

> ID：13605319
> 
> 赞同：1
> 
> 时间：2012-11-28T12:41:39.360
> 
> 标签：android, android-asynctask, robolectric

我遇到了一个无法解决的问题，因为 Internet 上的相关信息太少。所以这就是我想要做的：

`File`我在测试类的`setUp()`部分创建了一个。

```
@Before
    public void setUp() {
        activity = new MainActivity();
        TestUtils.copyAsset(activity, "test.zip");
        File archive = new File(Environment.getExternalStorageDirectory(), "/test.zip");
        archiveManager = new ArchiveManager(archive, ArchiveType.ZIP);
    } 
```

然后我运行一个测试，启动一个`AsyncTask`通过侦听器返回结果的测试。

```
@Test
public void testExtractFiles() {
    ZipEntry entry = ((ZipArchive) archiveManager.getArchive()).getZipFile().getEntry(
            "test.pdf");
    ZipEntryFile zef = new ZipEntryFile(Environment.getExternalStorageDirectory() + "test.pdf",
            entry.getName(), new EntryWrapper(new ParseableZipEntry(entry)));
    OnFileExtractedListener listener = new OnFileExtractedListener() {

        @Override
        public void onFileExtracted(File file, boolean open) {
            System.out.println("==================extract");
            Assert.assertNotNull("file not null", file);
            Assert.assertTrue("file exists", file.exists());
            Assert.assertTrue("don't open", !open);
        }

        @Override
        public void onExtractionCompleted() {
        }
    };
    ArrayList<File> files = new ArrayList<File>();
    files.add(zef);

    archiveManager.extractFiles(activity, files, Environment.getExternalStorageDirectory(),
            listener);
} 
```

测试运行良好，现在我需要删除`File`我创建的，所以我使用以下代码

```
@After
public void tearDown() {
    try {
        FileUtils.cleanDirectory(Environment.getExternalStorageDirectory());
    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println(Arrays.toString(Environment.getExternalStorageDirectory().list()));
} 
```

文件没有被删除，我得到以下异常：

```
java.io.IOException: Unable to delete file: C:\Users\user\AppData\Local\Temp\android-external-cache\test.zip
at org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:2279)
at org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:1653)
at com.foo.bar.manager.ArchiveManagerTest.tearDown(ArchiveManagerTest.java:48)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:36)
at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) 
```

有什么办法可以克服这个问题？我绝对确定我遗漏了一些重要的东西，但正如我所说，关于这个主题的信息不足。提前致谢。

# android - LEFT JOIN 和 ORDER BY 修改了 android 4 和更低版本之间的行为？

> ID：13605323
> 
> 赞同：0
> 
> 时间：2012-11-28T12:42:09.857
> 
> 标签：android, sqlite

我有一个应用程序，可以对包含两个表的数据库进行此 SQL 查询，一个包含项目的表和一个包含日期集的表。每个数据集都可以来自一个项目，它是一组日期（:)）

> SELECT distinct items.date from items left join datesets on items.inicio=datesets.capoID 和 items.capoID=datesets.capoID ORDER BY datesets.date

我按 datesets.date 排序，因为 date 是表示日期的整数，例如：1357340400

在 android 4.X 手机上，查询给了我正确排序的结果。查询的结果是：

```
11-28 13:24:09.457: I/System.out(9148): 16-03-2012
11-28 13:24:09.457: I/System.out(9148): 01-06-2012
11-28 13:24:09.457: I/System.out(9148): 22-06-2012
11-28 13:24:09.457: I/System.out(9148): 21-07-2012
11-28 13:24:09.457: I/System.out(9148): 26-09-2012
11-28 13:24:09.457: I/System.out(9148): 30-10-2012
11-28 13:24:09.457: I/System.out(9148): 05-12-2012
11-28 13:24:09.457: I/System.out(9148): 08-12-2012
11-28 13:24:09.457: I/System.out(9148): 27-12-2012
11-28 13:24:09.457: I/System.out(9148): 05-01-2013
11-28 13:24:09.457: I/System.out(9148): 25-02-2013
11-28 13:24:09.457: I/System.out(9148): 10-03-2013
11-28 13:24:09.457: I/System.out(9148): 23-04-2013
11-28 13:24:09.457: I/System.out(9148): 27-04-2013
11-28 13:24:09.457: I/System.out(9148): 11-05-2013
11-28 13:24:09.457: I/System.out(9148): 23-06-2013
11-28 13:24:09.457: I/System.out(9148): 01-07-2013
11-28 13:24:09.457: I/System.out(9148): 15-08-2013
11-28 13:24:09.457: I/System.out(9148): 11-09-2013
11-28 13:24:09.457: I/System.out(9148): 21-09-2013 
```

在 Android 3.2、2.3 等（低于 4 的版本）中，结果不正确，没有正确排序：

```
11-28 13:22:50.734: I/System.out(3181): 01-06-2012
11-28 13:22:50.734: I/System.out(3181): 16-03-2012
11-28 13:22:50.734: I/System.out(3181): 21-07-2012
11-28 13:22:50.734: I/System.out(3181): 26-09-2012
11-28 13:22:50.734: I/System.out(3181): 22-06-2012
11-28 13:22:50.734: I/System.out(3181): 30-10-2012
11-28 13:22:50.734: I/System.out(3181): 08-12-2012
11-28 13:22:50.734: I/System.out(3181): 27-12-2012
11-28 13:22:50.734: I/System.out(3181): 05-01-2013
11-28 13:22:50.734: I/System.out(3181): 05-12-2012
11-28 13:22:50.734: I/System.out(3181): 25-02-2013
11-28 13:22:50.734: I/System.out(3181): 10-03-2013
11-28 13:22:50.734: I/System.out(3181): 23-04-2013
11-28 13:22:50.734: I/System.out(3181): 27-04-2013
11-28 13:22:50.734: I/System.out(3181): 11-05-2013
11-28 13:22:50.734: I/System.out(3181): 23-06-2013
11-28 13:22:50.734: I/System.out(3181): 01-07-2013
11-28 13:22:50.734: I/System.out(3181): 15-08-2013
11-28 13:22:50.734: I/System.out(3181): 11-09-2013
11-28 13:22:50.734: I/System.out(3181): 21-09-2013 
```

编辑：

我使用这个代码来打印日期：

```
 cursor.moveToFirst();
        while (cursor.isAfterLast() == false) {
            System.out.println(cursor.getString(3)); 
            cursor.moveToNext();
        } 
```

# java - How to handle exceptions for multiple Route

> ID：13605334
> 
> 赞同：9
> 
> 时间：2012-11-28T12:42:42.147
> 
> 标签：java, exception-handling, spark-java

I'm getting to grips with the [Spark Framework](http://www.sparkjava.com/) and I'm trying to understand the best way of handling exceptions in a uniform way for multiple Routes.

At the moment I have a number of Routes which **all** handle exceptions along the lines of:

```
...
catch (final Exception e) {
    ...
    response.status(418);
    return e.getMessage();
}
... 
```

This leaves a lot to be desired, mainly the exception logic is duplicated between them. I know that it can be improved by refactoring but I was wondering if there's something similar to the [ExceptionHandler](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html) mechanism in Spring where you can perform an action when a particular exception is thrown, e.g.:

```
@ExceptionHandler(Exception.class)
public void handleException(final Exception e, final HttpServletRequest request) {
    ...executed for the matching exception...
} 
```

So, is there a Spark-esque mechanism for exception handling? I've checked the documentation and come up short. If there isn't, I'll go ahead with my refactoring plans. Thanks.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-06T19:54:44.520

You can handle exceptions like so:

```
get("/throwexception", (request, response) -> {
    throw new NotFoundException();
});

exception(NotFoundException.class, (e, request, response) -> {
    response.status(404);
    response.body("Resource not found");
}); 
```

Example taken from the [Spark docs](http://sparkjava.com/documentation.html#exception-mapping).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T19:24:56.417

I've been dealing with this very issue. This is what I came up with. It will need tweaking to your environment.

```
public class ExceptionHandler extends MustacheTemplateHandler
{
private final WrappedHandler inter;

public abstract static class WrappedHandler
{
    public abstract Object handle(Request req, Response res);       
}

public static ExceptionHandler wrap(String path, WrappedHandler internal)
{
    return new ExceptionHandler(path, internal);
}

private ExceptionHandler(String path, WrappedHandler internal) 
{
    super(path);
    inter = internal;
}

@Override
public Object handle(Request req, Response res) 
{
    try 
    {
        return inter.handle(req, res);
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return new ModelAndView(e, "errors");
    }
}
} 
```

and then (using import static):

```
 get(wrap("/download", new DownloadHandler()));
    post(wrap("/upload", new UploadHandler())); 
```

# python - 为什么 Python 在返回结果时显示“绑定方法....”，我怎样才能让它停止？

> ID：13605338
> 
> 赞同：5
> 
> 时间：2012-11-28T12:42:54.433
> 
> 标签：python, methods

我不断得到我正在寻找的答案 plus `bound method tramStop.returnUpcomingTimes of <__main__.tramStop instance at 0x141d030>`。

我将时间信息作为一长串时间接收，我将其设置为变量 SabinesTimes，然后将其从字符串转换为列表（以便能够遍历时间而不是字符）。

**这是我的代码：**

```
from datetime import datetime
from time import strftime
import shlex # <http://stackoverflow.com/questions/6868382/python-shlex-split-ignore-single-quotes> 
import types

# SabinesTimes is given to me as one long string, I need to iterate through each time and compare to current time.  So I convert it to a comma delineated list. 

SabinesTimes = "04:55 05:55 06:10 07:20 08:35 09:45 10:58 11:00 12:00 13:00 14:00 15:00 16:00 17:00 18:00 19:00 20:00 21:00 22:00 23:59"
SabinesTimes = ','.join(shlex.split(SabinesTimes))
SabinesTimes = SabinesTimes.split(",")

class ligne():
    def __init__ (self, stops):
        self.stops = stops
    def returnAllStopsOnLigne(self):
        return stops

# inherits from Ligne
class tramStop(ligne):
    def __init__ (self, times):
        self.times = times 
    def returnUpcomingTimes(self):
        now = strftime("%H:%M")
        Departing_Trams = [i for i in self.times if i>= now]
        return Departing_Trams

sabines = tramStop(SabinesTimes)

# the goal is to print all times greater than the current time at sabines.returnUpcomingTimes
print sabines.returnUpcomingTimes() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:55:03.317

您在问题中的代码应该可以工作。您实际运行的代码必须是

```
print sabines.returnUpcomingTimes 
```

而不是

```
print sabines.returnUpcomingTimes() 
```

# javascript - 如何在 JavaScript 中验证 EAN / GTIN 条形码

> ID：13605340
> 
> 赞同：15
> 
> 时间：2012-11-28T12:42:57.563
> 
> 标签：javascript, node.js, validation, barcode

如何检查字符串是否是 JavaScript 中的有效 EAN / GTIN 条形码？

我需要检查 EAN8、EAN12、EAN13、EAN14、EAN18 以及 GTIN12、GTIN13、GTIN14。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-28T12:42:57.563

**编辑**我还创建了一个 npm 模块，可以在[github](https://github.com/dominiklessel/barcoder)上找到。

我创建了一个小型库，它支持 EAN8、EAN12、EAN13、EAN14、EAN18、GTIN12、GTIN13 和 GTIN14。

它适用于 node.js 和所有现代浏览器。

**条形码.js：**

```
/*!
 * Barcoder
 * Copyright (c) 2013 mifitto GmbH <dominik@mifitto.com>
 * MIT Licensed
 */

(function() {

  'use strict';

  /**
   * Library version.
   */

  var version = '1.1.0';

  /**
   * Supported formats
   */

  var minValidLength = 6;
  var maxValidLength = 18;
  var usualValidChars = /^\d+$/;

  var formats = {
    'ean8'   : { validChars : /^\d+$/, validLength : 8 },
    'ean12'  : { validChars : /^\d+$/, validLength : 12 },
    'ean13'  : { validChars : /^\d+$/, validLength : 13 },
    'ean14'  : { validChars : /^\d+$/, validLength : 14 },
    'ean18'  : { validChars : /^\d+$/, validLength : 18 },
    'gtin12' : { validChars : /^\d+$/, validLength : 12 },
    'gtin13' : { validChars : /^\d+$/, validLength : 13 },
    'gtin14' : { validChars : /^\d+$/, validLength : 14 }
  };

  /**
   * Validates the checksum (Modulo 10)
   * GTIN implementation factor 3
   *
   * @param  {String} value The barcode to validate
   * @return {Boolean}
   * @api private
   */

  var validateGtin = function( value ) {

    var barcode = value.substring( 0, value.length - 1 );
    var checksum = parseInt( value.substring( value.length - 1 ), 10 );
    var calcSum = 0;
    var calcChecksum = 0;

    barcode.split('').map(function( number, index ) {
      number = parseInt( number, 10 );
      if ( value.length % 2 === 0 ) {
        index += 1;
      }
      if ( index % 2 === 0 ) {
        calcSum += number;
      }
      else {
        calcSum += number * 3;
      }
    });

    calcSum %= 10;
    calcChecksum = (calcSum === 0) ? 0 : (10 - calcSum);

    if ( calcChecksum !== checksum ) {
      return false;
    }

    return true;

  };

  /**
   * Barcoder class
   *
   * @param {string}  format    See formats
   * @param {Object}  options   Valid option `enableZeroPadding`, defaults to `true`
   * @api public
   */

  var Barcoder = function ( format, options ) {

    if ( format && !formats[format] ) throw new Error( '"format" invalid' );

    this.format = (format) ? formats[format] : 'autoSelect';
    this.options = (options) ? options : { enableZeroPadding : true };

    if ( !this.options.enableZeroPadding ) {
      this.options.enableZeroPadding = true;
    }

  };

  /**
   * Validates a barcode
   *
   * @param  {string}  barcode   EAN/GTIN barcode
   * @return {Boolean}
   * @api public
   */

  Barcoder.prototype.validate = function( barcode ) {

    var self = this;

    if ( self.format === 'autoSelect' ) {

      if ( barcode.length < minValidLength || barcode.length > maxValidLength ) {
        return false;
      }

      var isValidGtin = validateGtin( barcode );
      var paddedBarcode = barcode;
      var successfullyPadded = false;

      if ( !isValidGtin ) {
        var possiblyMissingZeros = maxValidLength - barcode.length;
        while( possiblyMissingZeros-- ) {
          paddedBarcode = '0' + paddedBarcode;
          if ( validateGtin( paddedBarcode ) ) {
            isValidGtin = true;
            successfullyPadded = true;
            break;
          }
        }
      }

      return {
        possibleType: (barcode.length > 8) ? 'GTIN' + barcode.length : 'EAN8 / padded GTIN',
        isValid: isValidGtin
      };

    }

    var validChars = self.format.validChars;
    var validLength = self.format.validLength;
    var enableZeroPadding = self.options.enableZeroPadding;

    if ( validChars.exec( barcode ) === null ) {
      return false;
    }

    if ( enableZeroPadding && barcode.length < validLength ) {
      var missingZeros = validLength - barcode.length;
      while( missingZeros-- ) {
        barcode = '0' + barcode;
      }
    }
    else if ( !enableZeroPadding && barcode.length != validLength ) {
      return false;
    }
    else if ( barcode.length > validLength ) {
      return false;
    }

    return validateGtin( barcode );

  };

  /**
   * Export
   */

  if ( 'undefined' !== typeof module && module.exports ) {
    module.exports = Barcoder;
    exports.version = version;
  }

  if ( 'undefined' === typeof ender ) {
    this['Barcoder'] = Barcoder;
  }

  if ( 'function' === typeof define && define.amd ) {
    define('Barcoder', [], function () {
      return Barcoder;
    });
  }

}).call( this ); 
```

**安装：**

```
$ npm install barcoder 
```

**用法：**

```
var Barcoder = require('barcoder');

var ean1 = '0016T20054453';
var ean2 = '9330071314999';

var validator = new Barcoder('ean13');

console.log( '%s ean1 is valid: %s', ean1, validator.validate( ean1 ) );
console.log( '%s ean2 is valid: %s', ean1, validator.validate( ean2 ) );

// or /w automatic type selection

validator = new Barcoder();

var validation1 = validator.validate( ean1 );
var validation2 = validator.validate( ean2 );

console.log( '%s is valid: %s and has guessed type: %s', ean1, validation1.isValid, validation1.possibleType );
console.log( '%s is valid: %s and has guessed type: %s', ean2, validation2.isValid, validation2.possibleType ); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-12T11:11:26.983

我不知道为什么，但@doms 解决方案对我来说不能正常工作。我也想**计算**新代码以及**验证**旧代码。我最终得到了这个，我已经验证至少可以在我的浏览器中工作：

```
function eanCheckDigit(s){
    var result = 0;
    for (let counter = s.length-1; counter >=0; counter--){
        result = result + parseInt(s.charAt(counter)) * (1+(2*(counter % 2)));
    }
    return (10 - (result % 10)) % 10;
} 
```

**2020 更新 -**必须在计数器前面添加`let`，否则表示计数器未定义。

**2020 年第 2 次更新 -** 经过大量的斗争，我意识到这个公式仅适用于 10 位（甚至长度为数字）的 UPC。如果你传递一个 11 位数字，这不起作用。因此，我对其进行了修改以适用于任何长度的 UPC。让我知道这是否可以写得更干净。

```
function eanCheckDigit(s){
        let result = 0;
        let i = 1;
        for (let counter = s.length-1; counter >=0; counter--){
            result = result + parseInt(s.charAt(counter)) * (1+(2*(i % 2)));
            i++;
        }
        return (10 - (result % 10)) % 10;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-28T08:04:46.040

这是一个简短的版本，可以检查 EAN13 校验位是否有效：

```
 var checkSum = ean.split('').reduce(function(p,v,i) {
    return i % 2 == 0 ? p + 1 * v : p + 3 * v;
    }, 0);
  if (checkSum % 10 != 0) {
    alert('error');
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T07:13:48.500

这是我的解决方案，使用规范检查不同长度的条形码以计算最后的校验位（见注）：

```
// ean/gtin validation for 8, 12, 13 & 14 digit barcodes
function codeOnBlur(barcode) {

    var barcodeLengthArr = [8, 12, 13, 14];
    var allowedChars = new RegExp(/\d{8,14}/); // >7 & <15
    // put numbers in array and convert to type Int.
    var barcodeArray = barcode.split('');
    for( var i = 0; i < barcodeArray.length; i++) {
        barcodeArray[i] = parseInt(barcodeArray[i], 10);
    }
    // get the last digit for checking later
    var checkDigit = barcodeArray.slice(-1)[0];
    // we'll need a to compare it to this:
    var remainder = 0;

    // check if input (barcode) is in the array and check against the regex. 
    if (($.inArray(barcode.length, barcodeLengthArr) > -1) && (allowedChars.test(barcode))) {
        console.log("barcodeArray ", barcodeArray, " :: checkDigit ", checkDigit);

        // Pop the last item from the barcode array, test if the length is 
        // odd or even (see note on calculating the check digit) and 
        // multiply each item in array based in position: 
        var total = 0;
        barcodeArray.pop();
        // odd length after pop
        if (barcodeArray.length % 2 === 1) {
            for (var i = barcodeArray.length - 1; i >= 0; i--) {
                barcodeArray[i] = i % 2 === 0 ? barcodeArray[i] * 3 : barcodeArray[i] * 1;
                total += barcodeArray[i];
            }
        // even length after pop
        } else if (barcodeArray.length % 2 === 0) {

            for (var i = barcodeArray.length - 1; i >= 0; i--) {
                barcodeArray[i] = i % 2 === 0 ? barcodeArray[i] * 1 : barcodeArray[i] * 3;
                total += barcodeArray[i];
            }
        } else {
            // validation passed = false
        }
        // calculate the remainder of totalrounded up to nearest multiple of 10:
        remainder = (Math.ceil((total + 1) / 10) * 10) - total;
        console.log("loop total = ", total, ", remainder: ", remainder);

        if ( remainder === checkDigit ) {
            //validation passed = true;
            return;
        } else {
              //validation passed = false; 
        }

    } else {
        //validation Passed = false;
    }
} 
```

我敢肯定这段代码可以整理一些:)

手动检查“完整性位”或校验位：

```
 barcode: 13:   4  0  1  1  2  0  0  2  9  6  9  0  8
               8:                  5  0  8  1  8  9  0  7

  multiplier:       3  1  3  1  3  1  3  1  3  1  3  1  check digit 
```

要逆向使用 8 位代码：

```
0*1 + 9*3 + 8*1 + 1*3 + 8*1 + 0*3 + 5*1 = 73

Difference from 73 to 80 is 7 (the specification will have you round up to
 the nearest power of 10). 
```

7 既是校验位，也是 80-73 的余数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-11T08:32:43.103

GS1 US 发布了 GTIN 的校验位计算算法。它使用填充来计算各种条形码，实际上比我在上面找到的其他方法要简单得多。

它适用于 GTIN 条码：GTIN-8、GTIN-12 (UPC)、GTIN-13 (EAN) 和 GTIN-14 (ITF-14)。

```
function isValidBarcode(value) {
  // We only allow correct length barcodes
  if (!value.match(/^(\d{8}|\d{12,14})$/)) {
    return false;
  }

  const paddedValue = value.padStart(14, '0');

  let result = 0;
  for (let i = 0; i < paddedValue.length - 1; i += 1) {
    result += parseInt(paddedValue.charAt(i), 10) * ((i % 2 === 0) ? 3 : 1);
  }

  return ((10 - (result % 10)) % 10) === parseInt(paddedValue.charAt(13), 10);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-27T22:17:31.890

这就是我想出的：

```
/**
 * Test a string for valid EAN5 EAN8 EAN13 EAN14 EAN18
 * @see: https://www.activebarcode.com/codes/ean13.html
 * @param  {string} ean A string to be tested
 * @return {boolean} true for a valid EAN
 * @author Vitim.us <https://stackoverflow.com/a/65928239/938822>
 */
function isValidEAN(ean) {
    function testChecksum(ean) {
        const digits = ean.slice(0, -1);
        const checkDigit = ean.slice(-1) | 0;
        let sum = 0;
        for (let i = digits.length - 1; i >= 0; i--) {
            sum += (digits.charAt(i) * (1 + (2 * (i % 2)))) | 0;
        }
        sum = (10 - (sum % 10)) % 10;
        return sum === checkDigit;
    }
    ean = String(ean);
    const isValidLength = ean.length === 18 || ean.length === 14 || ean.length === 13 || ean.length === 8 || ean.length === 5;
    return isValidLength && /^\d+$/.test(ean) && testChecksum(ean);
}
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-11T21:56:54.983

如果此代码有点太长，我很抱歉，但这是我用于验证 EAN13 条形码的代码：

```
function isBarcode(barcode) {
    if (typeof barcode === 'number') {
        throw 'RuntimeError: Barcode MUST NOT be in number format'
    } else if (barcode.length!==12) {
        throw 'RuntimeError: String length is not 12'
    };
    var _= barcode.toString().split("")
    var _1 = 0
    var _2 = 0
    var __
    for ($=0;$<=10;++$) {
        _1+=+_[$]
    };for ($=10;$>=0;$-=2) {
       _2+=+_[$]
    };_2*=2
    var _3 = _1+_2
    __=+_3.toString().substring(1,2)
    if (__>9) {
        __=+_3.toString().substring(1,2)
    } else if (__===0) {
        __=10
    };
    __=10-__
    if (__===+_[11]) {
        return true
    }
    return false
}; 
```

# ruby-on-rails - 具有相同路由参数的 Rails POST 参数

> ID：13605343
> 
> 赞同：0
> 
> 时间：2012-11-28T12:43:03.677
> 
> 标签：ruby-on-rails

我有以下路线：

```
post ':client_name/login' => 'auth#log_in' 
```

客户端我有一个包含以下字段的表单：

1.  用户名
2.  密码
3.  *和*client_name

我希望表单数据会覆盖路由数据，以便我可以在需要时更改客户端名称。但事实并非如此。有没有机会访问它？还是一种直接访问帖子数据的方法*？*

仅供参考：除非用户首先输入错误的密码，否则我不会显示该 <input> 标记。在那种情况下，我提供它（已经填写了路线中的值）。这主要对可能从其客户之一获得链接的内部用户有用，然后他们可以使用客户的特殊值登录，从而为他们提供更通用的访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:28:18.640

好吧，直到有人给我一个更好的解决方案（而且我不相信没有更好的解决方案），我会将发布的客户名称的名称更改为`:override_client_name`.

# blackberry-cascades - Blackberry10 级联 onTrigger

> ID：13605344
> 
> 赞同：0
> 
> 时间：2012-11-28T12:43:07.937
> 
> 标签：blackberry-cascades

我在此使用了[TabbedPane](https://developer.blackberry.com/cascades/reference/bb__cascades__tabbedpane.html)，同时单击我需要调用另一个 qml 文件这是正在使用的代码，但它不起作用

```
TabbedPane {
  showTabsOnActionBar: tabs
  sidebarState: SidebarState.VisibleCompact
  Tab {
    imageSource: "asset:///msg.png"
    Page {
      id: page1                 
      actions: [
        ActionItem {
          onTriggered: {
            var page = pageDefinition.createObject();
            navigationPane.push(page);
          }
          attachedObjects: ComponentDefinition {
            id: pageDefinition;
            source: "x.qml"
          }
        }
      ]
      actionBarVisibility: ChromeVisibility.Visible
    }
} 
```

任何人都可以向我发送代码如何在此函数中添加 Click 事件谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:10:40.357

这是为不同屏幕创建选项卡的示例。您在主选项卡中进入下一个 qml，如下所示：

```
Tab {
  title: "Puppies"
  NavigationPane {
    id: navigationPane
    Sample //this is one qml page as like Sample.qml
    {
    }
  }
}

Tab {
  title: "Kittens"
  NavigationPane
  {
    id: testpage
    Test //this is one qml page as like Test.qml
    {
    }
  }
} 
```

您可以通过设置 id 来访问其他 QML 文件。

# iphone - 在 iOS 中添加一个包含主详细信息的新选项卡

> ID：13605347
> 
> 赞同：0
> 
> 时间：2012-11-28T12:43:27.890
> 
> 标签：iphone, ios, xcode

我使用*选项卡式应用程序*模板（不使用情节提要）创建了一个应用程序，并添加了几个选项卡及其功能。现在我想添加另一个具有*Master Detail*功能的选项卡。似乎没有办法在不创建新应用程序的情况下使用*Master Detail模板。*我尝试使用*Master Detail*模板创建一个新应用程序，以便查看它生成的代码，但我不知道如何将该代码合并到我现有的选项卡式应用程序中。我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:56:07.970

在 iPhone 上，主/详细结构基本上是嵌入在导航控制器中的表格视图控制器和在选择表格中的单元格时推送的另一个自定义视图控制器。

如果您在代码中执行此操作，请初始化您的表格视图控制器，以表格视图控制器为根初始化导航控制器，并更新选项卡栏控制器的`viewControllers`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:09:33.113

你可以这样做......（在菲利普的回答中添加示例）

```
MasterViewController *masterViewController=[[MasterViewController alloc] init];
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:masterViewController];
[masterViewController release]; //if not ARC

tabbarController.viewControllers=[NSArray arrayWithObjects:navigationController,
                                  viewController1,
                                  viewController2, 
                                  //More view controller objects, 
                                  nil];
[navigationController release]; //if not ARC 
```

MasterViewController 可能包含一个 UITableView 作为子视图，或者它可能只是一个 UITableViewCotroller （因为您需要 Master-Detail 流。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:18:55.300

to get your whished behaviour in storyboards drag a navigation control in and make THAT a 'child' of the tabbar

# html - 如何底部对齐可变长度的标题

> ID：13605348
> 
> 赞同：3
> 
> 时间：2012-11-28T12:43:28.673
> 
> 标签：html, css

我有一个设计，我需要将标题与另一列中的某些内容对齐。

标题的长度可以是可变的，所以我试图弄清楚如何在所有情况下对齐边框底部。

（下面只是一些演示代码来突出我的问题）

```
<div class="container">
    <div class="header-container">
        <h1>Short title</h1>
    </div>
    <div class="header-container">
        <h1>This is a much longer title title</h1>
    </div>
</div>​

.header-container 
{
    width: 200px;
    font-size: 1.4em;  
    margin: 10px 20px; 
    float: right; 
    border-bottom: 1px solid #bbb;        
}​ 
```

请参见

[http://jsfiddle.net/bmxSY/](http://jsfiddle.net/bmxSY/)

所以在短标题的情况下，第一行应该是空白的。反正有没有用纯css做这个。我可能会对字符进行计数并添加一个边距顶部，但这不是 100% 万无一失的。

***编辑******** 这里真正的问题是标题需要与不同的包含 div 中的内容对齐。所以示例 HTML 标记和 CSS 应该更像...

```
<div class="container">
    <div class="span4">
        <div class="header-container">
            <h1>Short title</h1>
        </div>
    </div>
    <div class="span8">
        <div class="header-container">
            <h1>This is a much longer title title</h1>
        </div>
    </div>
</div>​

.header-container {
    width: 200px;
    font-size: 1.4em;  
    margin: 10px 20px; 
    border-bottom: 1px solid #bbb;
    text-align: left;
}

.span4 
{
    width:60%;
    float: left;
}

.span8
{
    width:40%;
    float: left;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:55:27.923

最简单的方法是：http `display: inline-block`: [//jsfiddle.net/thirtydot/bmxSY/7/](http://jsfiddle.net/thirtydot/bmxSY/7/)

```
.container {
    text-align: right;
}
.header-container {
    width: 200px;
    font-size: 1.4em;  
    margin: 10px 20px; 
    border-bottom: 1px solid #bbb;
    text-align: left;
    display: inline-block;
    vertical-align: bottom;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:52:18.527

### 其实这是不可能的，但是通过欺骗，我们可以做到。

```
.outer {
    position:relative;
    display:table;
    height: 200px;
    width: 200px;
    vertical-align: middle; 
    text-align: center;
    border: 1px solid #CCCCCC;
    background:red;
    float:left
}
.inner {
    width:100%;
    display:table-cell;
    vertical-align:bottom;
    position:relative;
}
p{background:blue;border:1px solid #000} 
```

### 演示：[http ://www.pmob.co.uk/temp/vertical-align9.htm](http://www.pmob.co.uk/temp/vertical-align9.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:54:38.180

用于`table-cell`对齐父级底部的 div。

不幸`dispaly:table-cell`的是不支持`margin`选项所以你需要通过边界来操作它。

**CSS**

```
.container{display:table-row; float:right}
.header-container
{
    width: 200px;
    font-size: 1.4em;  
    border-right:20px solid white;   border-left:20px solid white;
    border-top:10px solid white;   border-bottom:10px solid white;
    border-bottom: 1px solid #bbb;        
    display:table-cell; vertical-align:bottom
} 
```

**[演示](http://jsfiddle.net/bmxSY/5/)**

# c# - 如何调用restful webservice

> ID：13605352
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:43:37.593
> 
> 标签：c#, asp.net, web-services

我如何连接到任何宁静`webservice`的使用`C#`

我有以下关于`webservice`

`BASE_URL`是托管的`URL`。`WebServices`然后`BASE_URL`是所需的`GROUP`名称，然后是所需的`METHOD`名称。

例如，

```
BASE_URL = https://www.abcd.com/ws/

GROUP = transaction

METHOD = createTransaction 
```

这将给出一个完整的 URL：

```
https://www.abcd.com/ws/transaction/createTransaction 
```

每个调用都必须包含以下参数（作为 POST 变量）：

```
Name

username 

password 

pin 
```

请帮助我提供一些链接以实现编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:52:32.317

您可以使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)类。

```
 static async void Main()
    {
        try 
           {
      // Create a New HttpClient object.
      HttpClient client = new HttpClient();

      HttpResponseMessage response = await client.PostAsync("https://www.abcd.com/ws/transaction/createTransaction");
      response.EnsureSuccessStatusCode();
      string responseBody = await response.Content.ReadAsStringAsync();
      // Above three lines can be replaced with new helper method in following line 
      // string body = await client.GetStringAsync(uri);

      Console.WriteLine(responseBody);
    }  
    catch(HttpRequestException e)
    {
      Console.WriteLine("\nException Caught!"); 
      Console.WriteLine("Message :{0} ",e.Message);
    }
  } 
```

这还不完整，您必须以 HttpContent 对象格式将参数传递给 PostAsync 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T13:15:02.213

**这是在asp.net c#中调用或使用rest webservice的一种技术**

```
var client = new RestClient("url");
var request = new RestRequest(Method.POST);
request.AddHeader("content-type", "application/json");
request.AddParameter("application/x-www-form-urlencoded","type=password&user_id=test@gmail.com",ParameterType.RequestBody);
IRestResponse response = client.Execute(request); 
```

# email - javax.mail.MessagingException：无法向 SMTP 主机发送命令；嵌套异常是：javax.net.ssl.SSLKeyException: RSA premaster secret error

> ID：13605354
> 
> 赞同：1
> 
> 时间：2012-11-28T12:43:40.917
> 
> 标签：email, smtp, gmail, java

在 jdk1.4 中我可以发送邮件，但是当我尝试使用 jdk1.6 发送邮件时出现以下异常。

```
我的工作环境。
=========================
1.操作系统：windwos 2008
2.JAVA：JDK1.6
3.邮件接口：java mail1.4
4.邮箱：gmail
5.smtp端口：465或587

```

```
线程“主”java.lang.RuntimeException 中的异常：javax.mail.MessagingExcep
化：无法向 SMTP 主机发送命令；
嵌套异常是：
    javax.net.ssl.SSLKeyException：RSA premaster secret 错误
    在 SendMailTLS.main(SendMailTLS.java:47)
引起：javax.mail.MessagingException：无法向 SMTP 主机发送命令；
嵌套异常是：
    javax.net.ssl.SSLKeyException：RSA premaster secret 错误
    在 com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1365)
    在 com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1353)
    在 com.sun.mail.smtp.SMTPTransport.ehlo（SMTPTransport.java:794）
    在 com.sun.mail.smtp.SMTPTransport.protocolConnect（SMTPTransport.java:33
6)
    在 javax.mail.Service.connect(Service.java:258)
    在 javax.mail.Service.connect(Service.java:137)
    在 javax.mail.Service.connect(Service.java:86)
    在 javax.mail.Transport.send0(Transport.java:150)
    在 javax.mail.Transport.send(Transport.java:80)
    在 SendMailTLS.main(SendMailTLS.java:42)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:23:25.670

您使用的是最新版本的 JDK 吗？你能提供不工作的源代码吗？请显示邮件代码的输出：

*   System.out.println("Java 版本：" + System.getProperty("java.version"));
*   System.out.println("外部目录：" +System.getProperty("java.ext.dirs"));

# c# - Web API 表单数据收集

> ID：13605358
> 
> 赞同：12
> 
> 时间：2012-11-28T12:43:49.347
> 
> 标签：c#, asp.net, jquery, asp.net-web-api

我正在尝试将表单序列化值发布到控制器（Web API Self Host）。我不明白为什么 NameValueCollection 没有正确绑定。使用 jQuery 的客户端：

```
// Form Submit Handler
$( '#form-parameters' ).submit(function (event) {

        event.preventDefault();

        var formData = $(this).serialize();
        // Post serialized form data
        postAssemblyParameters(formData);
});

// Post Form Data to controller test
function postAssemblyParameters(formData){
        $.ajax({
                url: http://localhost/api/test/1,
                type: 'POST',
                data: formData,
                dataType: 'application/x-www-form-urlencoded',
                success: function(x3d) {
                },
                error: function(xhr) {

                }
        });
} 
```

使用 Web API Self Host 的服务器端：

```
public void Post([FromUri] int id, [FromBody] NameValueCollection formData)
{
        Console.WriteLine(id); // OK

        // Collection is NULL
        foreach (var key in formData.AllKeys)
        {
                foreach (var val in formData.GetValues(key))
                {
                        Console.WriteLine(key + ": " + val);
                }
        }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-02T05:29:27.157

尝试使用 FormDataCollection，而不是 NameValueCollection。

[http://weblogs.asp.net/cibrax/archive/2012/08/10/binding-form-data-in-asp-net-web-api.aspx](http://weblogs.asp.net/cibrax/archive/2012/08/10/binding-form-data-in-asp-net-web-api.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-24T07:30:46.847

或者您可以使用构建“ReadAsNameValueCollection”，如下所示：

```
NameValueCollection MyNameValueCollection = formData.ReadAsNameValueCollection(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-15T23:03:25.510

谢谢斯科特。你的回答正是我所需要的。在此基础上，我编写了以下小实用程序方法，它将派上用场，因为它将所有数据值从流中提取出来（使用 FormDataCollection）并将它们放入 NamedValueCollection（您可以按您想要的任何顺序访问）。

```
/// <summary>
/// Copy the values contained in the given FormDataCollection into 
/// a NameValueCollection instance.
/// </summary>
/// <param name="formDataCollection">The FormDataCollection instance. (required, but can be empty)</param>
/// <returns>The NameValueCollection. Never returned null, but may be empty.</returns>
public static NameValueCollection Convert(FormDataCollection formDataCollection)
{
    Validate.IsNotNull("formDataCollection", formDataCollection);

    IEnumerator<KeyValuePair<string, string>> pairs = formDataCollection.GetEnumerator();

    NameValueCollection collection = new NameValueCollection();

    while (pairs.MoveNext())
    {
        KeyValuePair<string, string> pair = pairs.Current;

        collection.Add(pair.Key, pair.Value);
    }

    return collection
 } 
```

# c# - 禁用 Kendo UI Grid 中特定列的列菜单

> ID：13605362
> 
> 赞同：7
> 
> 时间：2012-11-28T12:44:06.180
> 
> 标签：c#, kendo-ui

是否可以禁用 Kendo UI Grid 中特定列的列菜单？如果是，应该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T19:17:18.430

开箱即用，您只能通过列菜单将列排除在显示/隐藏之外（即不会为该列定义一个复选框，您可以选中/取消选中该复选框）。为此，您应该在定义列时使用**菜单选项。**例如

```
 jQuery("#Grid").kendoGrid({
    "columns": [{
        "title": "Person ID",
        "menu": false, //this way
        "field": "PersonID" 
    },
    {
        "field": "Name",
        "encoded": true
    },
    //... 
```

如果您希望完全隐藏列菜单，比如说第三列，您可以使用以下解决方法：

```
$(function(){
     $('#GridName .k-header-column-menu').eq(2).hide()
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T03:45:18.853

您可以在定义列时在 MVC 中使用它。示例代码如下。

columns.Bound(person => person.FirstName).IncludeInMenu(false);

# php - 由于公共 dns 更改亚马逊 ec2，kaltura 管理控制台显示错误

> ID：13605366
> 
> 赞同：0
> 
> 时间：2012-11-28T12:44:19.973
> 
> 标签：php, amazon-ec2, amazon, kaltura

我正在使用亚马逊 ec2 安装我的 kaltura。我已成功安装它，它工作正常。但是一段时间后，我重新启动了我的亚马逊 ec2 实例，以便公共 DNS 发生了变化。之后，我检查了 kaltura。起始页工作正常，但在管理控制台中显示

**发生错误 应用程序错误**

我认为这是因为亚马逊 EC2 中的 publixc DNS 更改。我在许多 kaltura 论坛中进行了搜索，他们要求检查**searchd、my.cnf**文件配置并更改**主机**文件配置。我仍然无法解决我的问题。谁能解释一下什么是文件，包括 kaltura 中的主机名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:59:48.113

我通过更改以下文件中的公共 dns 并重新启动 apache 服务器来使其工作

应用程序/admin_console/configs/application.ini

应用程序/配置/apache/my_kaltura.conf

app/alpha/config/kConfLocal.php

应用程序/批处理/batch_config.ini

app/batch/batches/Mailer/emails_en.ini

# visual-studio-2010 - InitializeComponent 函数中的代码被删除

> ID：13605368
> 
> 赞同：1
> 
> 时间：2012-11-28T12:44:35.840
> 
> 标签：visual-studio-2010, user-controls, initialization

这个错误是突然开始的。
我正在更改一些控件位置，Visual Studio 2010 正在重写该`InitializeComponent`函数。问题是它删除了一些`new`功能。

之前的代码：

```
private void InitializeComponent()
{
    this.advButton1 = new AdvButton();
    this.advButton2 = new AdvButton();
    this.advButton3 = new AdvButton();
    this.advButton4 = new AdvButton();
    this.SuspendLayout(); 
```

在设计器中移动按钮后的代码：

```
private void InitializeComponent()
{
    this.SuspendLayout(); 
```

这只发生在我自己的用户控件中，它们与表单位于相同的命名空间下。

另一个问题（不一致）：
我正在将我的用户控件添加到表单中，查看`InitializeComponent`功能 - 我在任何地方都看不到控件。

我已经卸载了 Visual Studio 2010 并使用 Service Pack 1 重新安装它。有
什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:42:12.637

最后通过将类`AdvButton`从内部更改为公共来解决它。

# mysql - 在MySql /父子关系中链接不同表中的列

> ID：13605370
> 
> 赞同：0
> 
> 时间：2012-11-28T12:44:41.150
> 
> 标签：mysql, parent-child

我有两张桌子。“用户”和“电影”。用户表由“id”（自动递增）、“name”和“password”列组成。现在存储了 2 个用户名。在电影表中有“标题”和“年份”列。PHP 脚本允许每个用户观看新电影并将其添加到他们的列表中。我如何链接或建立父子关系或在 MySQL 中实现它所需的任何东西？哦，我也使用Adminer。现在，当我登录一个用户时，我仍然可以看到与其他用户一起添加的相同电影。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:35:41.340

如果您坚持只使用评论中所述的两个表，则必须重新设计 Movies 表以包含一个 UserID 列，该列标识哪个用户创建了该条目。然后您可以过滤数据，以便用户只能看到有关他们添加到列表中的电影的信息。

这不是一个好的设计[——Jeremy Smyth的](https://stackoverflow.com/users/121971/jeremy-smyth)[答案](https://stackoverflow.com/a/13605554/15168)建议使用额外的表格将电影与用户联系起来更明智，但您已经指出这是不允许的。它不是一个好的设计的原因是你最终会得到很多行，表明同一部电影是在同一年发行的，每一行都是由不同的用户输入的，所以会有不必要的重复。出错的机会也更多；您将获得 1938 年的“乱世佳人”、1939 年的“乱世佳人”和 1940 年的“乱世佳人”的条目，而应该只有一年（1939 年，碰巧）。

* * *

> 您能否更具体地说明我必须做什么...

在只有两个表的系统中，您将创建 Movies 表，如下所示：

```
CREATE TABLE Movies
(
     Title    VARCHAR(32) NOT NULL,
     Year     INTEGER NOT NULL,
     UserID   INTEGER NOT NULL REFERENCES Users(ID),
     PRIMARY KEY(Title, Year, UserID)
); 
```

当你在这个表中插入一条记录时，你记录了插入的用户的ID，这样你就可以查询谁创建了哪些电影记录。

如果您实际上要从数据库的其他位置引用此表，您可能会在此处添加一个 ID 列，但如果有更多表，那么您将从该表中删除 UserID 列并创建一个关系表：

```
CREATE TABLE Movies
(
     ID       INTEGER AUTOINCREMENT PRIMARY KEY,
     Title    VARCHAR(32) NOT NULL,
     Year     INTEGER NOT NULL,
     UNIQUE(Title, Year)
);

CREATE TABLE Users_Movies
(
    MovieID   INTEGER NOT NULL REFERENCES Movies(ID),
    UserID    INTEGER NOT NULL REFERENCES Users(ID),
    PRIMARY KEY(MovieID, UserID)
); 
```

现在，您可以拥有 1939 年“乱世佳人”的一条记录，其 ID 号可能为 207，并且 20 个不同的人可能将 MovieID 207 列为他们的电影之一，在 Users_Movies 表中有 20 条简单记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:54:55.620

您需要在两个表之间创建“多对多”关系。

去做这个：

*   首先，在表中创建一`ID`列`Movies`来唯一标识每一个
*   然后，创建另一个名为`user_movies`（或“已观看”或有用的东西）的表，其中包含用户 ID、电影 ID 以及您希望添加的任何其他信息，例如观看日期或评分（“星”数）等。

然后，每当用户观看电影时，将记录添加到`user_movies`表中以标记他们已经完成电影的事实。

应该是多对多的，因为每个用户可以看几部电影，但每部电影可以被多个用户观看。在这种情况下，“父子”关系是不合适的，因为它是一对多的关系。

# math - Max to 0 to Max 算法

> ID：13605375
> 
> 赞同：0
> 
> 时间：2012-11-28T12:45:01.130
> 
> 标签：math, compass-sass, sass

首先，让我警告您，我的数学知识相当有限（因此我来这里询问这个问题）。

这是一个愚蠢的例子，但我本质上想要的是拥有可变数量的行，并且能够设置一个最大值，然后对于每个渐进行减少该值直到一半，此时开始再次增加该值回到最后一行的最大值。

为了说明这一点......鉴于：`maxValue = 20`和`rows = 5`，我需要能够获得以下行值的值（是的，甚至是 0）：

```
row 1: 20
row 2: 10
row 3: 0
row 4: 10
row 5: 20 
```

但是有一些限制，因为我试图在使用 SASS 的 Compass 中执行此操作。有关可用操作的信息，请参见[此处](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#operations)，但为了让您了解它的要点，只有基本操作可用。

我能够遍历行，因此只需要适用于系列中每一行的计算。这是我可以使用的循环：

```
$maxValue:20;
$rows:5;

@for $i from 1 through $rows {
    // calculation here.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:24:10.627

我以前没有真正使用过 SASS，但是使用基本的 if 和 floor 函数尝试这样的事情，不确定是否可以工作

```
// set various variables
$maxValue:20;
$rows:5;
// get row number before middle row, this instance it will be 2
$middleRow = floor( $maxValue / $rows )
// get increment amount, this instance should be 10
$decreaseValue = ( max / floor( rows / 2) )

@for $i from 0 through $rows - 1 {

   @if $i <= $middleRow {

      ( $maxValue- ( $decreaseValue * $i ) )

    }

   @else{

    // times by -1 to make positive value
       ( $maxValue - ( $decreaseValue * -$i ) ) * -1

    }
} 
```

我已经在 js 中测试了上述内容（使用相对语法）并产生了所需的结果（[jsBin 示例](http://jsbin.com/eqikob/1/edit)）。希望这可以帮助

# python - Python XML 点名构造函数

> ID：13605381
> 
> 赞同：1
> 
> 时间：2012-11-28T12:45:07.420
> 
> 标签：python, xml, constructor, lxml, helper

我有一个我正在自动化管理的 Solace JMS 消息框，并且该设备使用许多非常小的 XML 帖子进行配置。由于该设备在其 XML 规范中有非常多的命令，因此我需要一种创建任意 XML 请求的方法。

XML 看起来像：

```
<rpc semp-version="soltr/5_5">
<create>
<message-vpn>
<vpn-name>developer.testvpn</vpn-name>
</message-vpn>
</create>
</rpc> 
```

第二次调用更改设置可能如下所示：

```
<rpc semp-version="soltr/5_5">
<message-vpn>
<vpn-name>developer.testvpn</vpn-name>
<export-policy>
<no>
<export-subscriptions/>
</no>
</export-policy>
</message-vpn>
</rpc> 
```

由于 XML 规范中有许多命令，我正在寻找一种方法来从点名称空间之类的东西中自由地创建它们。例如：

```
mycall = SolaceXML()
mycall.create.message_vpn.vpn_name="developer.testvpn"
mycall.message_vpn.vpn_name='developer.testvpn'
mycall.message_vpn.export_policy.no.export_subscription 
```

**更新** 我在下面发布了我的解决方案。它不像我想要的那么小，但它对我有用。

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:42:30.327

与此同时，我找到了解决方案。希望这对其他人有帮助。此解决方案从点名称空间调用构建嵌套字典对象，然后将其转换为 XML。

```
from xml.dom.minidom import Document
import copy
import re
from collections import OrderedDict

class d2x:
    ''' Converts Dictionary to XML '''
    def __init__(self, structure):
        self.doc = Document()
        if len(structure) == 1:
            rootName = str(structure.keys()[0])
            self.root = self.doc.createElement(rootName)
            self.doc.appendChild(self.root)
            self.build(self.root, structure[rootName])

    def build(self, father, structure):
        if type(structure) == dict:
            for k in structure:
                tag = self.doc.createElement(k)
                father.appendChild(tag)
                self.build(tag, structure[k])
        elif type(structure) == OrderedDict:
            for k in structure:
                tag = self.doc.createElement(k)
                father.appendChild(tag)
                self.build(tag, structure[k])

        elif type(structure) == list:
            grandFather = father.parentNode
            tagName = father.tagName
            grandFather.removeChild(father)
            for l in structure:
                tag = self.doc.createElement(tagName)
                self.build(tag, l)
                grandFather.appendChild(tag)

        else:
            data = str(structure)
            tag = self.doc.createTextNode(data)
            father.appendChild(tag)

    def display(self):
        # I render from the root instead of doc to get rid of the XML header
        #return self.root.toprettyxml(indent="  ")
        return self.root.toxml()

class SolaceNode:
    ''' a sub dictionary builder '''
    def __init__(self):
        self.__dict__ = OrderedDict()
    def __getattr__(self, name):
        name = re.sub("_", "-", name)
        try:
            return self.__dict__[name]
        except:
            self.__dict__[name] = SolaceNode()
            return self.__dict__[name]
    def __str__(self):
        return str(self.__dict__)
    def __repr__(self):
        return str(self.__dict__)
    def __call__(self, *args, **kwargs):
        return self.__dict__
    def __setattr__(self, name, value):
        name = re.sub("_", "-", name)
        self.__dict__[name] = value

class SolaceXMLBuilder(object):
    ''' main dictionary builder

    Any dot-name-space like calling of a instance of SolaceXMLBuilder will create
    nested dictionary keys. These are converted to XML whenever the instance 
    representation is called ( __repr__ ) 

    Example

    a=SolaceXMLBuilder()
    a.foo.bar.baz=2
    str(a)
    '<rpc semp-version="soltr/5_5">\n<foo><bar><baz>2</baz></bar></foo></rpc>'

    '''
    def __init__(self):
        self.__dict__ = OrderedDict()
        self.__setattr__ = None
    def __getattr__(self, name):
        name = re.sub("_", "-", name)
        try:
            return self.__dict__[name]
        except:
            self.__dict__[name] = SolaceNode()
            return self.__dict__[name]
    def __repr__(self):
        # Show XML
        myxml = d2x(eval(str(self.__dict__)))
        # I had to conjur up my own header cause solace doesnt like </rpc> to have attribs
        #return str('<rpc semp-version="soltr/5_5">\n%s</rpc>' % myxml.display())
        return str('<rpc semp-version="soltr/5_5">\n%s</rpc>' % myxml.display())
    def __call__(self, *args, **kwargs):
        return self.__dict__
    # def __setattr__(self, name, value):
    #   raise Exception('no you cant create assignments here, only on sub-elements')

if __name__ == '__main__':
    x = SolaceXMLBuilder()
    x.create.message_vpn.vpn_name='NEWVPN'
    print(x)

    # <?xml version="1.0" ?>
    # <rpc semp-version="soltr/5_5">
    #   <create>
    #     <message-vpn>
    #       <vpn-name>
    #         NEWVPN
    #       </vpn-name>
    #     </message-vpn>
    #   </create>
    # </rpc semp-version="soltr/5_5">   

    x=SolaceXMLBuilder()
    x.message_vpn.vpn_name='NEWVPN'
    x.message_vpn.no.feature_X
    print(x)

    # <?xml version="1.0" ?>
    # <rpc semp-version="soltr/5_5">
    #   <message-vpn>
    #     <vpn-name>
    #       NEWVPN
    #     </vpn-name>
    #     <no>
    #       <feature-X/>
    #     </no>
    #   </message-vpn>
    # </rpc semp-version="soltr/5_5">

    # >>> client = SolaceAPI('pt1')
    # >>> xml = SolaceXMLBuilder()
    # >>> xml.create.message_vpn.vpn_name='NEWVPN'
    # >>> client.rpc(str(xml))
    # {u'rpc-reply': {u'execute-result': {u'@code': u'ok'}, u'@semp-version': u'soltr/5_5'}} 
```

# php - php或/和mysql中的多重排序不生效

> ID：13605383
> 
> 赞同：0
> 
> 时间：2012-11-28T12:45:25.527
> 
> 标签：php, mysql, arrays, sorting, multidimensional-array

**编辑**

解决了 ！这是我的错，mysql 查询和 php 方法都运行良好。我非常糟糕的例子使我自己感到困惑。实际上，他们应该按收藏（真/假）然后按日期对产品进行分类。

* * *

我正在尝试按两个“cols”对多维数组进行排序，但它对我不起作用：O

我已经搜索并复制了所有可能的方式（mysql - order by，php - array_multisort()），但它仍然对我不起作用......

这是我首先尝试的方法：

```
// MySQL Query
SELECT * FROM `test` ORDER BY `name` ASC, `age` DESC;
// or
SELECT * FROM `test` ORDER BY `name`, `age`;
// or
SELECT * FROM `test` ORDER BY name, age;
// or
SELECT * FROM `test` ORDER BY name, age DECT;

// `name` is VARCHAR and `age` is INT 
```

所以，我尝试了所有可能的语法，但查询不会给我想要的结果。

原表：

```
ID    NAME     AGE
---------------------
1     adam     23
2     bernd    30
3     cris     22
4     dora     21
5     anton    18
6     brad     36
7     sam      41
8     ali      13 
```

我想从 MySQP 查询中得到什么：

```
ID    NAME     AGE
---------------------  // first sort by name...
8     ali      13      // then sort by age
5     anton    18      // ...
1     adam     23      // for each "similar" name or names with "a", "b", ...
2     bernd    30      // and so on...
6     brad     36
3     cris     22
4     dora     21
7     sam      41 
```

但它实际上给了我按 NAME ( ORDER BY `name`, `age`) 或 AGE ( ORDER BY `age`, `name`;

当我感到沮丧时，我决定只获取该查询并在 PHP 中对其进行排序...

好吧，我也尝试了一些代码，但它们也都不起作用。

这是我现在实际做的：

```
// this array is just exported from mysql to debug without mysql query...
$test = array(
  array('id' => '1','name' => 'adam','age' => '23'),
  array('id' => '2','name' => 'bernd','age' => '30'),
  array('id' => '3','name' => 'cris','age' => '22'),
  array('id' => '4','name' => 'dora','age' => '21'),
  array('id' => '5','name' => 'anton','age' => '18'),
  array('id' => '6','name' => 'brad','age' => '36'),
  array('id' => '7','name' => 'sam','age' => '50'),
  array('id' => '8','name' => 'ali','age' => '13')
);

// ...print out the original array
foreach( $test as $key => $value ) {
    echo $value['name'] . " - " . $value['age'] . "<br>";
}

// here is the part where i am sorting...
$sort = array();
foreach ($test as $key => $value ) {
    $sort['name'][$key] = $value['name'];
    $sort['age'][$key] = $value['age'];
}

array_multisort($sort['age'], SORT_ASC, $sort['name'], SORT_DESC, $test);
// ...till here.

// reorder array and print the new sorted array
$sorted = array();
for( $i = 0; $i < count( $sort['name'] ); $i++ ) {
    array_push( $sorted, array( $sort['name'][$i], $sort['age'][$i] ) );
    echo $sort['name'][$i] . " - " . $sort['age'][$i] . "<br>";
} 
```

但是你会看到如果你测试这个，排序只会影响年龄......

我不知道我做错了什么，请告诉我伙计们T_T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:49:09.353

在我看来，您只想对名称的**第一个字符**进行排序：

你应该试试：

```
SELECT * FROM `test` ORDER BY SUBSTR(name,0,1), age; 
```

您遇到的是绝对预期的行为。为什么？如果您首先按 排序`name`，您将获得按名称列中的*完整字符串排序的结果，其中*

```
'adam' < 'ali' < 'anton' 
```

如果有不止一行`name='adam'`，但年龄不同，像这样：

```
ID    NAME     AGE
---------------------
1     adam     23
5     anton    18
8     ali      13
9     adam     52 
```

你会得到这个结果`SELECT * FROM test ORDER BY name, age;`

```
ID    NAME     AGE
---------------------
1     adam     23
9     adam     52
8     ali      13
5     anton    18 
```

因为它首先按`name`列排序，其中两个`adam`值相同，然后根据年龄排序，其中 23 小于 52...

但现在，按姓名的第一个字符和年龄排序`SELECT * FROM test ORDER BY SUBSTR(name,0,1), age;`：

```
ID    NAME     AGE
---------------------
8     ali      13
5     anton    18
1     adam     23
9     adam     52 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:51:23.547

如果我对您的理解正确，您要做的就是仅按名称的第一个字母排序，然后按年龄排序。- 你从 mysql 得到的正是我对你的查询和数据集的期望。如果您选择多列进行排序，则仅当您在第一列中具有相同的值时，第二列才会起作用，例如，如果您有两个 Adam，一个 18 岁，一个 20 岁，则这两个将按年龄排序。如果你有亚当和贝丝，都是 18 岁，贝丝会在“按年龄、姓名排序”中排在亚当之后

# php - mongodb getLastError() php

> ID：13605385
> 
> 赞同：2
> 
> 时间：2012-11-28T12:45:41.550
> 
> 标签：php, mongodb, getlasterror

我如何在 php 中使用 getLastError() 来检查我的保存方法是否插入到 mongo？

我设置我的数据库如下：

```
$this->databaseEngine = $app['mongo'];
$this->db = $this->databaseEngine->dbname;
$this->collection = $this->db->collectionname; 
```

然后我的插入查询如下所示：

```
$query = array(
    'fieldname' => $fieldname
);
$this->collection->insert($query); 
```

然后我想使用 getLastError() 来检查它是否正确插入，如果不正确，为什么。但我不确定如何实现它。

我在插入后使用：

```
$this->collection->getLastError("what goes here?"); 
```

干杯。

## 更新

我最终用它来得到最后一个错误：

```
echo '<pre>' . print_r($this->databaseEngine->lastError(), true) . '</pre>'; 
```

Sammaye 的方法也同样有效，见下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:49:30.337

> $this->collection->getLastError("这里发生了什么？");

那里什么也没有，返回的`getLastError`是 MongoDB ( [http://www.php.net/manual/en/mongodb.lasterror.php](http://www.php.net/manual/en/mongodb.lasterror.php) ) 的最后一个错误。它也用于 MongoDB 类 (atm)。

您不必那样使用它，而是可以这样做：

```
$this->collection->insert($query, ARRAY('safe' => TRUE)); 
```

这将从函数返回一个数组，详细说明它是否实际插入。可以通过阅读此页面找到数组的详细信息：

[http://www.php.net/manual/en/mongocollection.insert.php](http://www.php.net/manual/en/mongocollection.insert.php)

# wpf - 如何使用 MatrixTransform 将缩放限制为 500%？

> ID：13605387
> 
> 赞同：1
> 
> 时间：2012-11-28T12:45:49.940
> 
> 标签：wpf, zooming, rendertransform

我有一个`Image`如下图所示。使用`MatrixTransform`I 可以轻松放大和缩小。如何检测缩放是否太小/太大？例如，我想将缩放限制为 10-200%。

```
<ScrollViewer x:Name="scrollViewer" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
   <Border x:Name="border" ClipToBounds="True" Width="Auto" Height="Auto">
     <Image x:Name="image" Source="test.png"/>
   </Border>
 </ScrollViewer> 
```

实际改造：

```
Point p = e.MouseDevice.GetPosition(image);

Matrix m = image.RenderTransform.Value;
if (e.Delta > 0)
    m.ScaleAtPrepend(1.1, 1.1, p.X, p.Y);
else
    m.ScaleAtPrepend(1.0 / 1.1, 1.0 / 1.1, p.X, p.Y);

// How do I know if the zoom level is lower than 10% or higher than 200%?
image.RenderTransform = new MatrixTransform(m); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T12:51:24.707

除非您也旋转，否则[Matrix.M11](http://msdn.microsoft.com/en-us/library/system.windows.media.matrix.m11.aspx)（或 M22）会为您提供缩放因子。

```
Matrix m = image.RenderTransform.Value;
...
if (m.M11 >= 0.1 && m.M11 <= 2.0)
{
    image.RenderTransform = new MatrixTransform(m);
} 
```

# php - codeigniter php中的cronjob

> ID：13605388
> 
> 赞同：1
> 
> 时间：2012-11-28T12:45:52.053
> 
> 标签：php, codeigniter, cron, cpanel

我几乎尝试了以前答案中的所有内容

命令：`/usr/local/bin/php /home/username/public_html/temp/index.php/ controller function`

这是我正在使用的命令，因为我的站点位于特定域的临时文件夹中 之前有错误，`404`但现在显示

无法打开输入文件：`/home/username/public_html/temp/index.php/`

对解决方案有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:50:29.307

我实际上不记得 CodeIgniter 是如何进行路由的第一步的——但我坚信它使用重写规则来做到这一点。因此，如果你想使用 codeIgniter 的路由，你需要通过 Apache/nginx。对不起。

不过，一个很好的电话会是`wget -q http://whatever.your.site.is/index.php/controller/function`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:42:40.317

只需删除最后的斜线，这样它就会显示为这样

```
/usr/local/bin/php /home/username/public_html/temp/index.php controller function 
```

# c# - 如何从数组中检索特定索引？

> ID：13605389
> 
> 赞同：0
> 
> 时间：2012-11-28T12:45:54.530
> 
> 标签：c#, .net, linq

我有这个数组：

```
 Point[] arr  = samples.pointsArray; 
```

我使用这一行来检索满足条件的所有元素：

```
var maxXCol = arr.Where( p => maxX.X == p.X ); 
```

知道如何修改上面的行，只获取这些元素的索引吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:47:04.107

**编辑**

使用它的版本`Select`同时获取索引和对象，并创建一个匿名对象，其中包含对象和索引。它看起来像这样：

```
someEnumerable.Select((obj, idx) => new {Item = obj, Index = idx}) 
```

您需要在使用*之前*`Where`执行此操作，以便在过滤操作后原始索引保持不变。

在以下操作中，您可以像这样使用该项目：

```
x => x.Item 
```

和这样的索引：

```
x => x.Index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:53:32.363

```
var maxXCol = arr.Select((p, inx) => new { p,inx})
                 .Where(y => maxX.X == y.p.X)
                 .Select(z => z.inx); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:47:15.807

您可以使用`Select`带有索引的重载，并将该索引与原始行一起投影。然后只取结果集合的索引。

```
var maxXCol = arr
    .Select((p, index) => new { Item = p, Index = index })
    .Where(p => maxX.X == p.Item.X)
    .Select(x => x.Index); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:53:56.560

您可以先使用匿名类型的索引选择值，然后根据您的条件过滤它，然后选择索引。

```
var result = arr.Select((g, index) => new { g, index })
              .Where(r => maxX.X == r.X)
              .Select(t => t.index); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T12:55:19.163

尝试这个：

```
arr.Select((e,i)=>new{index=i, value=e}).Where(ei=>ei.value.X==maxX.X).Select(ei=>ei.index); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T12:59:20.780

```
var maxXCol = arr
    .Select((a, b) => new { b, a })
    .Where(p => maxX.X == p.a.X)
    .Select(i=>i.b); 
```

# excel - Excel宏来订购不同数量的列

> ID：13605391
> 
> 赞同：0
> 
> 时间：2012-11-28T12:45:57.070
> 
> 标签：excel, vba

我有一个包含 10 列的电子表格（A 列、B 列、...、J 列）。我正在尝试创建一个宏来根据第 1 行和第 3 行中的条目（首先按值排序第 1 行中的 A 到 Z，然后按第 3 行中的值 A 到 Z）。

如果我记录自己这样做，这很容易。但是，如果将来需要排序的列数发生变化（例如，如果添加了两个新列），则以这种方式记录的宏不再起作用。如何创建一个宏来对突出显示的列执行此排序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:21:34.803

```
Sub SortColumns()

    Dim rngSort As Range

    With ActiveSheet

        Set rngSort = .Range("A1").CurrentRegion

        With .Sort.SortFields
        .Clear

        .Add Key:=rngSort.Rows(1), SortOn:=xlSortOnValues, _
                             Order:=xlAscending, DataOption:=xlSortNormal

        .Add Key:=rngSort.Rows(3), SortOn:=xlSortOnValues, _
                             Order:=xlAscending, DataOption:=xlSortNormal
        End With

        With .Sort
            .SetRange rngSort
            .Header = xlGuess
            .MatchCase = False
            .Orientation = xlLeftToRight
            .SortMethod = xlPinYin
            .Apply
        End With

    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:59:09.233

虽然我同意之前发布的评论，但这里对你的成长有点鼓励。删除已知标题名称的代码

```
'   Delete Extranious Rows based on header name
    Dim cellcolumn As Integer
'   Replace each name in "" with the names of headers you do want
    For Each b In Array("Unit Type", "Unit Profile", "Drop Profile", "Delivery Type", "Activity Time", "Miles")
        On Error Resume Next
        rng1 = b
        strSearch = rng1
            Set aCell = Sheets("Sheet1").Rows(1).Find(What:=strSearch, LookIn:=xlValues, _
                                        LookAt:=xlWhole, SearchOrder:=xlByRows, _
                                        SearchDirection:=xlNext, MatchCase:=False, _
                                        SearchFormat:=False)
            cellcolumn = aCell.Column
            Columns(cellcolumn).EntireColumn.Select
            Selection.Intert Shift:=xlToRight
    Next b 
```

您尝试完成的任务可以通过多种方式完成。此方法将删除无关信息。当您知道要移动的内容和位置时，下一部分会组织信息。

```
Sub Organize()

'   Organize Trip Stat
    Dim Heder(1 To 5) As String
    Heder(1) = "trip_id"
    Heder(2) = "driver_id"
    Heder(3) = "route_nbr"
    Heder(4) = "trailer_id"
    Heder(5) = "trip_type_code"
    For a = 1 To 5

Call Organize(Heder(a))

Next a
End Sub 
```

调用下一个代码来完成该过程

```
Function Organize(TheHeder)
For b = 1 To 50
If Cells(1, b).Text = TheHeder Then
Cells(1, b).EntireColumn.Select
    If Range("B1").Text = TheHeder Then GoTo nextstep:
    Selection.Cut
    Columns(2).Select
    Selection.Insert (xlToRight)
End If
Next b
nextstep:
End Function 
```

这两个步骤在我的努力中对我很有用。继续搜索和学习！

# c - 我可以检查是否设置了工会成员吗？

> ID：13605394
> 
> 赞同：0
> 
> 时间：2012-11-28T12:46:02.827
> 
> 标签：c, unions

拥有这个工会和结构：

```
tydef union{
  TYPE1 t1;
  TYPE2 t2;
  TYPE3 t3;
}myunion;

typedef struct{
   uint8 ID;
   uint8 value;
}TYPE1;

typedef struct{
   uint8 ID;
   uint8 flag;
   long value;
}TYPE2; 
```

我想执行这样的功能：

```
CheckIfSet(&myunion.t1); 
```

这有点像这样：

```
CheckIfSet(void *test){
  if (test.ID != NULL) then{
   return TRUE;
  }
  return FALSE;
} 
```

在执行此检查之前，我正在执行另一个函数，这应该会导致 myunion.t1 的设置 - 但我需要检查它是否确实发生了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:48:40.733

不可以。您必须跟踪工会的哪个字段处于活动状态。联合的后备内存在其字段之间共享，因此设置一个可能会影响另一个的值。

另外，不要忘记访问联合的非活动字段会导致未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:50:54.507

不，你不能那样做。`C`在纯语言中没有“设置”这样的东西。即使您没有初始化变量，它也包含一些垃圾值，该值属于该变量类型的所有可能值的集合。您无法区分这是有效值还是垃圾值。

您需要引入某种标志，用于检查初始化状态。例如，标志可以被初始化为`FALSE`初始，一旦你设置了你的联合，它将被更改为`TRUE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:49:05.937

将 ID 的值初始化为您不使用的值并对其进行测试。

# c# - C# 获取 XML 标记值

> ID：13605396
> 
> 赞同：7
> 
> 时间：2012-11-28T12:46:07.170
> 
> 标签：c#, xml

我有一个名为`BackupManager.xml`

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<Settings>
<directory id="backUpPath" value="D:/BACKUPS/"></directory>
<filename id="feilname" value="SameName"></filename>
<period id ="period" value="15"></period>
</Settings>
</configuration> 
```

我正在尝试从标签中获取值到字符串例如：-我需要将“backUpPath”标签的值作为“D:/BACKUPS/”到字符串说“str”

我试过的代码是

```
XmlDocument infodoc = new XmlDocument();
infodoc.Load("BackupManager.xml");
//int col = infodoc.GetElementsByTagName("directory").Count;
String str = infodoc.GetElementByID("directory").value; 
```

但我在'str'上得到空值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:48:51.020

试用

linq到xml的方式

```
IEnumerable<XElement> direclty = infodoc.Elements("Settings").Elements("directory");
var rosterUserIds = direclty .Select(r => r.Attribute("value").Value); 
```

**或者**

```
 XmlNodeList nodeList=
(infodoc.SelectNodes("configuration/Settings/directory"));

foreach (XmlNode elem in nodeList)
{
string strValue = elem.Attributes[1].Value;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-02T01:47:19.013

如果您想在这种情况下获取“目录”标签的值，请使用它作为简短语法：

```
var directory = infodoc.GetElementsByTagName("directory")[0].Attributes["value"].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T19:55:57.657

过去我不得不处理一个巨大的 XML 并且性能是一个问题。我所需要的只是对 XML 的非缓存、只进、只读访问。

**此外，我无法控制模式，只需要从 XML 和CDATA**中挤出某些标记值。

以下是我最终使用的：

```
private string GetValueFromXmlTag(string xml, string tag)
{
    if (xml == null || tag == null || xml.Length == 0 || tag.Length == 0)
        return "";

    string
        startTag = "<" + tag + ">",
        endTag = "</" + tag + ">",
        value = null;

    int
        startTagIndex = xml.IndexOf(tag, StringComparison.OrdinalIgnoreCase),
        endTagIndex = xml.IndexOf(endTag, StringComparison.OrdinalIgnoreCase);

    if (startTagIndex < 0 || endTagIndex < 0)
        return "";

    int valueIndex = startTagIndex += startTag.Length - 1;

    try
    {
        value = xml.Substring(valueIndex, endTagIndex - valueIndex);
    }
    catch (ArgumentOutOfRangeException responseXmlParserEx)
    {
        string err = string.Format("Error reading value for \"{0}\" tag from XXX XML", tag);
        log.Error(err, responseXmlParserEx);
    }

    return (value ?? "");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-15T13:02:56.370

```
if (xml.NodeType == XmlNodeType.Element && xml.Name == "Architecture")
{
    string architecture = xml.ReadElementContentAsString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:49:37.027

因为您没有 ID 为“目录”的元素。无论你想要

```
GetElementByID("backUpPath").GetAttribute("value"); 
```

或者

```
GetElementsByTagName("directory"); 
```

请记住，第二个方法返回一个 XMLNodeList！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T12:50:59.450

如果你想你可以使用`XmlReader`

```
 string str ="";
   using (var reader = new StreamReader(BackupManager.xml))
            {
                var all = reader.ReadToEnd();
                StringReader stringReader = new StringReader(all);
                XmlReader xmlReader = XmlTextReader.Create(stringReader,new System.Xml.XmlReaderSettings() { IgnoreWhitespace = true, IgnoreComments = true });
                while (xmlReader.Read())
                    if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "directory")
                         str = xmlReader["value"];

            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T12:53:54.680

```
XmlDocument infodoc = new XmlDocument();
infodoc.Load("BackupManager.xml");
XmlElement directoryElement = document.GetElementById("directory");
string backupPath = directoryElement.GetAttribute("value"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-27T04:32:01.287

```
XmlDocument infodoc = new XmlDocument();
  //Server.MapPath() return the xml file address
            infodoc.Load(Server.MapPath("~/XMLFile1.xml"));
            XmlNodeList nodeList =
(infodoc.SelectNodes("configuration/Settings/backUPpath"));
            foreach (XmlNode elem in nodeList)
            {

               Response.Write(elem.Attributes[1].Value);

            } 
```

# c++ - 更改 cv::remap 的地图以包括调整大小

> ID：13605400
> 
> 赞同：2
> 
> 时间：2012-11-28T12:46:33.517
> 
> 标签：c++, image, opencv

我用 消除了图像中的失真`cv::remap()`。必要的地图是用`cv::initUndistortRectifyMap()`. 现在我还想调整图像的大小，如果可能的话，我想将它包含在我的地图中，这样`cv::remap()`可以消除失真并立即调整图像的大小。

有没有一种简单的方法可以更改地图以使它们同时执行两项任务？我必须更改地图并且无法从头开始计算它们，因为我不再拥有输入参数`cv::initUndistortRectifyMap()`。

我可以自己计算每个条目，但我正在寻找不同的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:52:02.003

OpenCV 确实提供了一些计算 cv::remap() 映射的函数

1.  InitUndistortRectigyMap()
2.  变形仿射（）
3.  翘曲透视（）

但是，这些都不能用于组合两个变换。一起使用它们的唯一机会是构建您的自定义函数。查看 warpAffine 的代码 - 可用于调整图像大小，可以在任务中为您提供一些帮助。

# sudoers - Sudoers 无法阻止命令从 bash shell 脚本执行

> ID：13605401
> 
> 赞同：0
> 
> 时间：2012-11-28T12:46:43.580
> 
> 标签：sudoers

我想防止用户`sudo rm`在任何地方使用“”表单。
我已编辑`sudoers`：

# admin 组的成员可以获得 root 权限

```
%admin ALL=(ALL) ALL,!/bin/rm 
```

还好：</p>

```
derek@derek-desktop:~$ sudo rm

Sorry, user derek is not allowed to execute '/bin/rm' as root on derek-desktop. 
```

但我用 rm 命令创建了一个 test.sh

```
derek@derek-desktop:~$ cat test.sh
rm --help 
```

它向我显示了 rm 帮助。似乎`sudoers`无法阻止这种行为。我想禁用所有从 rm 运行的用户`sudo`。
你能帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:42:43.410

您添加到 sudoers 的内容运行良好。它可以防止组中的用户在服务器上的任何位置`admin`运行。`sudo rm`但是，这并不能阻止它们运行`rm`

如果你改变 test.sh 有`sudo rm --help`这**将**错误。

如果您不信任用户运行 rm 命令，也许您可​​以在全局 bash.bashrc 中创建一个 if 语句，例如....

```
group=`groups`
if [[ $group == *admin* ]] ; then
        alias rm=''
        alias unalias=''
fi 
```

希望这为您的问题提供了一些替代方案。

# c# - 键盘记录器如何显着提高 PostMessage() 的性能

> ID：13605408
> 
> 赞同：5
> 
> 时间：2012-11-28T12:47:07.850
> 
> 标签：c#, .net, winforms, winapi

我想看看我是否能够通过在干净状态下在我的系统上运行“基准”、安装键盘记录器并重复基准测试来检测系统上是否存在键盘记录器。这个想法是键盘记录器需要消耗资源才能正确运行，并且应该导致较低的基准分数。

在代码中，我基本上编写了两个 while 循环，它们使用 win32API 调用 SendMessage() 和 PostMessage() 来模拟击键。它在给定的时间内执行循环并记录它发送了多少成功消息。

我期望键盘记录器要么没有可衡量的差异（毕竟，桌面上一直在执行很多“东西”，而且我认为键盘记录器可能不会使用很多......）或者它会导致数字略低。

这主要是我在“ **SendMessage()** ”调用的情况下看到的。

我不明白的是，我的基准测试显示对**PostMessage()的调用次数急剧增加**

在安装键盘记录器之前，平均执行多次，我看到每秒大约 10k PostMessage()。安装键盘记录器后，我现在看到每秒有近 25k 次 PostMessage() 调用。

这对我来说没有任何意义。

如果我对 PostMessage 的理解是正确的，它会在进程的消息队列中添加一条 windows 消息并恢复执行（而 SendMessage 会等到进程处理完消息后再返回）。我希望 PostMessage 的执行速度比 SendMessage 快，并且一旦消息队列已满，一些消息可能会丢失....但在我有限的理解中，没有任何东西可以帮助我理解键盘记录器如何提高性能 - 如此显着.

我觉得代码很简单。我可以确认它确实注册为击键（我将它们发送到记事本中）并且它们的键盘记录器正在记录它们。

有人可以向我解释我错过了什么吗？

键盘记录器如何提高性能？！

**更新** 我正在运行基准测试 10 次并对结果进行平均。
暂停键盘记录器（以便它仍然安装，但不记录）仍然产生了很高的结果。卸载键盘记录器并重新启动我的机器后，10 次运行的平均值现在是每秒 9.9k；非常符合我原来的结果。

我确实必须重新启动机器才能完成卸载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T15:44:38.183

限制 PostMessage() 调用的因素并不多。在内部，它必须获得一个锁才能访问线程的消息队列，以便以安全的方式附加消息。这里的异常值是没有记录器这样做太慢了，每秒 10K 调用并不多。只要应用程序正在清空队列，Windows 内部很可能有一个节流阀会在短时间内阻止调用。不知道这是不是真的。

这在很大程度上取决于键盘记录器到底使用了什么钩子，有不止一个候选者。但是没有钩子可以检测到一条消息被添加到队列中，只有当从队列中检索到一条消息并将其分派到窗口时。像 WH_GETMESSAGE、WH_CALLWNDPROC 或 WH_CALLWNDPROCRET。所以接下来是记录器会使**清空**队列变慢。

这为您所看到的内容提供了解释，如果您在没有限制的情况下调用 PostMessage()，那么您将*溢出*消息队列。默认情况下，它只能包含 10,000 条消息。如果你溢出它，你会得到一个快速的回报，你会衡量一个更高的利率。

所以我猜你忘了看 PostMessage() 的返回值。无法添加消息时返回 FALSE。

# java - 使用 Jinterop 从 java 调用 COM api

> ID：13605409
> 
> 赞同：1
> 
> 时间：2012-11-28T12:47:09.193
> 
> 标签：java, com, j-interop

我使用 jinterop 作为 dcom 网桥。使用 CLASSID 我能够创建 com 对象。

```
// Create a session
    JISession session = JISession.createSession("domain", "user",
            "password");
    session.useSessionSecurity(true);
    // JISystem.setAutoRegisteration(true);
    JIComServer comServer = new JIComServer(
            JIClsid.valueOf("E4BE20dd4-9F1-4B05-9117-AFB4B295"),
            "ipaddress", session);

    // Instantiate the COM Server
    IJIComObject comObject = comServer.createInstance();

    IJIDispatch ieObjectDispatch = (IJIDispatch) JIObjectFactory
            .narrowObject((IJIComObject) comObject
                    .queryInterface(IJIDispatch.IID));
    IJITypeInfo typeInfo = ieObjectDispatch.getTypeInfo(0); 
    FuncDesc funcDesc = typeInfo.getFuncDesc(0);
 JICallBuilder callObject = new JICallBuilder (true);
      callObject.setOpnum (0);
      callObject.addInParamAsString(new String("API"),JIFlags.FLAG_REPRESENTATION_STRING_LPWSTR);
      callObject.addOutParamAsObject(IJIComObject.class,JIFlags.FLAG_REPRESENTATION_STRING_LPWSTR);

      Object[] result = ieObjectDispatch.call ( callObject ); 
```

我的问题是我没有 IDL 文件的信息（因为它是第三方 COM），那么我如何设置 callObject.setOpnum (0) 的值？

注意：即使我使用调用方法，我也会收到未知名称 [0x80020006] 错误。示例： JIVariant[] results = ieObjectDispatch.callMethodA("COM API name",params);

请帮我..

谢谢，阿米特

# java - 大写的 SimpleDateFormat 月份名称

> ID：13605417
> 
> 赞同：11
> 
> 时间：2012-11-28T12:47:31.097
> 
> 标签：java, jasper-reports

如何将月份名称更改为大写。有人知道吗？

这是我的示例条件：

```
(new SimpleDateFormat("MMMM yyyy")).format($P{date_start}) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T12:58:26.833

使用`.toUpperCase()`，如下：

```
(new SimpleDateFormat("MMMM yyyy")).format($P{date_start}).toString().toUpperCase() 
```

# jquery - 在选择框中绑定需要时间

> ID：13605420
> 
> 赞同：0
> 
> 时间：2012-11-28T12:47:38.917
> 
> 标签：jquery

选择第一个选择框选项时有 2 个选择框，相应的选项将显示在从 db 获取的第二个选择框中。当它选择第一个选择框的选项时`$('.optInSrcAccount').val(arr[10]);`。第二个选择框在采用与第一个选择框选项相对应的形式 db 后显示该选项，并且在给出此选项时`$('#optExBankAccount').val(arr[11]);`它没有改变。选择了第一个 oselectbox 选项，但没有选择第二个。请帮助我

```
 $('.pInfoExp').live('dblclick',function(){
              var arr = $(this).attr('class').split( " " );
              if(arr[1]=='edit'){

                    $('.optInSrcAccount').val(arr[10]);
                    $('.optInSrcAccount').change();

                    if(arr[10] == 1 && arr[10]){ 

                    $('#optExBankAccount').val(arr[11]);
                    $('#optExBankAccount').change();

                    }
                    $("#popExpence" ).dialog({
                          resizable: true,
                          height: 500,
                          width: 1200,
                          modal: true,
                          buttons: {
                          },
                          close: function() {

                          }
                    });
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:14:58.087

```
 $('.optInSrcAccount').change(function(){
    //do some thing
  }); 
```

为了以编程方式执行上述方法，您需要编写此

```
 $('.optInSrcAccount').trigger('change');

  $('#ddlFirst').change(function(){
    //do some thing
    Bind2ndDropdown();

  }); 
```

# java - HTTP 条件 GET

> ID：13605425
> 
> 赞同：0
> 
> 时间：2012-11-28T12:48:08.153
> 
> 标签：java, urlconnection

我正在尝试检查文件是否在给定日期之后被修改。我发现[我正在尝试使用 Java 的 HttpURLConnection 进行“条件获取”，但我从未得到 304 状态代码](https://stackoverflow.com/questions/7095897/im-trying-to-use-javas-httpurlconnection-to-do-a-conditional-get-but-i-neve)。这似乎是我需要的。但如果我尝试：

```
URLConnection connection = new URL("http://cdn3.sstatic.net/stackoverflow/img/favicon.ico").openConnection();
connection.setRequestProperty("If-Modified-Since", "Wed, 06 Oct 2010 02:53:46 GMT");
System.out.println(connection.getHeaderFields()); 
```

输出是：

```
{null=[HTTP/1.1 200 OK], ETag=["087588e2bb5cd1:0"],
Date=[Wed, 28 Nov 2012 12:39:31 GMT], Content-Length=[1150],
Last-Modified=[Sun, 28 Oct 2012 16:44:54 GMT], Accept-Ranges=[bytes],
Connection=[keep-alive], Content-Type=[image/x-icon], X-Cache=[HIT],
Server=[NetDNA-cache/2.2], Cache-Control=[max-age=604800]} 
```

**编辑**

我试过今天的日期，但仍然没有返回 304。

> 格林威治标准时间 2012 年 11 月 28 日星期三 12:59:56

它应该返回 304 但你可以看到它没有，任何帮助都被占用了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:52:47.650

该文件*已*被修改。*在结果之后*将您的`If-Modified-Since`标题更改为某些内容。*`Last-Modified`*

 *我尝试过（使用 curl），这个 CDN 似乎在日期方面有问题。要获得对请求的`304`响应`If-Modified-Since`，您*需要*提供确切的`Last-Modified`日期（此处为 2012 年 10 月 28 日星期日 16:44:54 GMT）。不用说，这是来自这个 CDN 的邪恶行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T16:00:04.793

你应该使用这样的东西......

***connection.addRequestProperty("If-Modified-Since", lastModified);***

这是代码：

```
try {
                    HttpResponseCache cache = responseCache.getInstalled();
                    cacheResponse = cache.get(uri, "GET",
                            new HashMap<String, List<String>>());
                    if (cacheResponse != null) {
                        Map<String, List<String>> headers = cacheResponse
                                .getHeaders();
                        List<String> eTagHeader = headers.get("ETag");
                        eTag = eTagHeader.get(0);
                        if (eTag != null) {
                            connection.addRequestProperty("If-None-Match", eTag);
                        }
                        if(headers.containsKey("Last-Modified")){
                            List<String> lastModifiedList = headers.get("Last-Modified");
                            if(null != lastModifiedList && !lastModifiedList.isEmpty()){
                                String lastModified = lastModifiedList.get(0);
                                if(null != lastModified){ connection.addRequestProperty("If-Modified-Since", lastModified);
                                }
                            }
                        }
                    }
                } catch (IOException e1) {
                    Log.e(TAG, String.format("Cannot read from cache.", url),
                            e1);
                } 
```*

# statistics - 使用机器学习进行预测

> ID：13605427
> 
> 赞同：0
> 
> 时间：2012-11-28T12:48:16.553
> 
> 标签：statistics, machine-learning, regression, svm, decision-tree

假设我有一些过去 5 年的数据，并且我已经根据这些数据训练了我的分类器（任何决策树、支持向量机等），即给定适当的输入特征数据和正确的输出标签。

现在，当我必须进行预测（预测输出）时，我可以提供当年的输入特征数据，分类器将预测正确的输出标签。

到目前为止，一切都很好。

但是假设如果我没有当前的输入特征数据，我该如何仅根据过去的数据进行预测？

例如选举预测，即哪个政党将从每个选区中获胜。在这个我们有很多过去的数据，但没有当前的输入特征数据，那么如何去做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:40:45.733

Bogatron 的评论是正确的答案。如果您不使用输入功能并要求返回标签，则分类器是错误的方法。根据过去的数据对未来进行建模通常是通过[回归](http://en.wikipedia.org/wiki/Linear_regression)来完成的。最简单的方法可能是最小二乘法，它允许您选择一个简单的模型（想想曲线拟合），您可以从中选择一个数据点并计算预测值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:04:24.410

我认为他的意思是分类。在分类时，您通常将现有数据分成两组：测试和训练。您对训练数据进行所有训练，当您认为完成时，您可以使用测试集进行验证。如果集合上的表现非常不同，那么您要么训练过度，要么根本无法将问题归类为这种类型。如果您的数据很少，您可以尝试[k-fold](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29#K-fold_cross-validation)策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:05:21.910

What you are trying to do is probably called "time series forecasting" and your input can then be a window over the past predictions (or past data if still inside the current window position).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T22:40:24.823

您只能根据训练集中的内容（旧数据或当前数据）进行预测。获得对新样本进行泛化的准确预测的最佳方法是确保您不会过度拟合您的模型。如果您觉得您的模型不能准确反映您必须预测的最新数据中的内容，那么您可能需要获取其他功能。

# ruby-on-rails - Ruby 将行添加到代码块 (Proc)

> ID：13605431
> 
> 赞同：2
> 
> 时间：2012-11-28T12:48:30.910
> 
> 标签：ruby-on-rails, ruby, metaprogramming

示例很简单，我需要 Ruby **1.8.7的解决方案**

**编辑** 添加`Ramaze`调用以更好地解释编辑块的需要。我想要一种更改块的方法，以便我可以在`rescue`线程失败时包装块并记录。API[链接](http://ramaze.net/documentation/Innate/SingletonMethods.html#defer-instance_method)

```
class Foo
  def self.execute(&block)
    # Remaze will create new thread to execute the block
    # I want to change block so that I can add rescue in case thread fails
    Ramaze::defer(block)
  end
end 
```

用法

```
Foo.execute do
  puts "Hello!!!"
end
# => Hello!!! 
```

我正在尝试做的是添加几行代码，`&block`例如`puts "World!!!`最后但动态。现实世界的实现是我有一个推迟创建线程的类，我想在推迟创建线程`rescue`之前添加块。这样，每当线程失败时，我都不需要挠头。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:26:15.577

原来解决方案很简单，只是没有使用积木的经验，马上就能看到。塞尔吉奥建议的东西。

```
class Foo
  def self.execute(&block)
    Ramaze::defer(&wrap(&block))
  end

  private

  def self.wrap(&block)
    return lambda do
     begin
      yield
      rescue Exception => e
       Log.error "[ERROR IN THREAD] #{e.message}, #{e.backtrace}"
      end
    end
  end
end 
```

# javascript - 调用 API 方法时 Javascript 卡住

> ID：13605439
> 
> 赞同：0
> 
> 时间：2012-11-28T12:48:40.243
> 
> 标签：javascript, jquery, ajax, api

我使用 AJAX 通过 PHP 从 MySQL 数据库中收集数据，但是当我尝试使用收集的数据调用 API 方法时，网页上的所有 Javascript 函数都会卡住。

AJAX代码结构：

```
$.post(
  "userdata.php",
  { id: ""+userid+"" },
  function(data) {
    // call my API when AJAX call completed
  }
); 
```

上面的代码完美运行。例如我试过`alert(data);`，它会提醒请求的用户名。

我的完整代码：

```
$.post(
  "userdata.php",
  { id: ""+userid+"" },
  function(data) {
    $.formdata.clear();
    $.formdata.addname(data);
  }
); 
```

我的 API 也可以正常工作。我认为错误是因为`$`标志，就像`$.post`它的内部一样`$.formdata`。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:57:52.323

`$`符号是要引用的名称`jQuery`。在这里，您尝试引用 jQuery 的一个名为`formdata`.

该`formdata`对象看起来像您编写的东西，因为它具有`clear`和`addname`方法。尝试在没有美元符号的情况下调用它。

```
formdata.clear();
formdata.addname(data); 
```

# ruby-on-rails - rails bootstrap 网站上的“请求桌面站点”选项

> ID：13605444
> 
> 赞同：0
> 
> 时间：2012-11-28T12:48:57.620
> 
> 标签：ruby-on-rails, twitter-bootstrap, responsive-design

我想在基于 twitter 引导框架的 Rails 网站上添加“请求桌面站点”选项。

使用 twitter bootstrap 会忽略 android 浏览器（可能还有其他移动浏览器）中的“桌面视图”选项。

如果用户要求，我想为移动用户提供一个伪造标准 1280x800（或类似）分辨率的选项，而忽略响应式设计。

这可以在 Rails 应用程序中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:39:52.577

理论上，您可以将所有媒体查询放在单独的 .less 文件中（我认为大多数媒体查询都在以“响应”开头的文件中）。然后提供两个不同版本的 CSS。每个人都可以通过响应式 CSS 获得一个，另一个是在移动设备上单击“桌面”视图的用户。

# c# - 如何将制表符分隔的文件转换为 CSV 文件

> ID：13605451
> 
> 赞同：0
> 
> 时间：2012-11-28T12:49:07.077
> 
> 标签：c#, asp.net, csv

我有一个大约 1.2 GB 的制表符分隔文本文件，我需要使用 c# 将其转换为 CSV 文件（逗号分隔）。我必须将批量数据插入到 sqlserver 中，数据在 txt 文件中，该文件是制表符分隔的，但我希望它先转换为 CSV 然后插入到 sql server 中，或者有什么合适的方法可以将制表符分隔的数据插入sql server 数据库高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:51:40.837

将制表符分隔文件导入 Excel（或其他电子表格程序），然后将其导出为 CSV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T16:09:57.573

SQL Server 2005 中的 BULK INSERT 命令默认使用制表符作为字段分隔符，因此无需将制表符分隔的文本文件转换为 csv 格式。

事实上，将其转换为真正的 csv 会使事情变得更加困难。BULK INSERT 不会将引号视为字符串分隔符，因此真正的 csv 文件在字符串中的某处用逗号封装字符串的真正 csv 文件将中断导入。

有关详细信息，请参阅[https://msdn.microsoft.com/en-us/library/ms188365(v=sql.90).aspx](https://msdn.microsoft.com/en-us/library/ms188365(v=sql.90).aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:52:25.980

如果您使用的是 sqlserver，您应该看看 SSIS（SqlServer 集成服务）。此工具将帮助您以有效的方式导入 csv 文件。您可以在此工具中配置分隔符，因此无需将制表符替换为逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:04:19.753

我想出了这个在制表符上分开的：

```
 using(System.IO.StreamReader rdr = new System.IO.StreamReader(@"C:\text.txt"))
   {
            int counter = 0;
            string lne;
            while((lne = rdr.ReadLine()) != null)
            {
                string[] temp = lne.Split('\t');
                Console.WriteLine(temp[0]);
                Console.WriteLine(temp[1]);
                counter++;
            }
   }
   Console.ReadLine(); 
```

之后，您可以使用 StringBuilder 用逗号连接数组中的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:23:26.417

如果它的 SQl Server 2005 及更高版本，请右键单击要导入的数据库并选择**Tasks**然后**Import Data**。指向您的制表符分隔文件，然后浏览剩余的屏幕。在最后一个屏幕上，就在您实际导入之前，您可以选择将其保存为**SSIS 包**（复选框）。这是迄今为止最简单、快速和有效的方式（无需从制表符分隔到 csv 的转换）无需编写任何代码即可导入它，并且该代码也可在向导结束时使用，可用于自动执行任务，如果需要。

# ios - 与 twitter 一起使用时，iOS facebook 登录未重定向到主页

> ID：13605460
> 
> 赞同：2
> 
> 时间：2012-11-28T12:49:34.567
> 
> 标签：ios

我在我的应用程序中使用 facebook 和 twitter 共享。Facebook sdk 工作正常，但是当我集成 twitter 时，facebook 重定向显示黑屏。

如果我评论 twitter 代码，那么它可以正常工作。

我找不到确切的原因和解决方案。

谢谢，

# jquery - history.js：如何管理后退按钮

> ID：13605463
> 
> 赞同：0
> 
> 时间：2012-11-28T12:49:51.243
> 
> 标签：jquery, html, back, history.js

在 html5 历史 API 中，我正在尝试使用 history.js 实现 ajax 导航，使用 jquery 将 html 内容附加到容器 div。

它可以更改页面，但是当我在浏览器中按下后退按钮时，它只会更改地址栏中的 usr，但页面保持不变。

```
/* SETUP HISTORY JS */
var History = window.History;
var State = History.getState();

// Log Initial State
//History.log('initial:', State.data, State.title, State.url);

// Bind to State Change
History.Adapter.bind(window,'statechange',function(){
    var State = History.getState();
});
/* END SETUP HISTORY JS */ 
```

点击链接我定义了link_title_link_href和文件的ajaxurl，所以我在ajax中获取它的内容并更新历史：

```
// CHANGING THE PAGES
$.get(''+ajax_url,function(data) {
    $('#container').append(''+data); //LOAD THE PAGE
    History.pushState({state:''+link_href,rand:Math.random()}, link_title, link_href);
} 
```

我想用旧的 html 值刷新#container 内容，我需要获取状态并执行另一个 get() 调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:44:28.283

也许尝试将您的 ajax 调用绑定状态更改

```
History.Adapter.bind(window,'statechange',function(){
var State = History.getState();
//Do ajax call here...
}); 
```

这应该保留内容，因此当您向前或向后导航时，容器将具有旧值。

# ant - 如何获得声纳蚂蚁任务的结果并将其发布在 Jenkins 上？

> ID：13605464
> 
> 赞同：1
> 
> 时间：2012-11-28T12:49:51.473
> 
> 标签：ant, jenkins, sonarqube

我为声纳准备了蚂蚁任务并且它可以工作（我在声纳页面上看到结果并且构建成功）。但是如何在詹金斯中显示分析的结果？我在我的工作目录中看不到任何结果。

```
<target name="sonar" depends="depended targets">
    <!-- Execute Sonar -->
    <property name="sonar.projectVersion" value="1.0" />
    <sonar:sonar key="key" version="1.0" xmlns:sonar="antlib:org.sonar.ant">
        <sources>
            <path location="someSrcDir1" />
            <path location="someSrcDir2" />
            <path location="someSrcDir3" />
        </sources>

         <binaries>
            <path location="someDirWithBin1" />
            <path location="someDirWithBin1" />
            <path location="someDirWithBin1" />
            <path location="someDirWithBin1" />
         </binaries>    
    </sonar:sonar>
</target> 
```

如何在 Jenkins 中获取和发布结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:29:00.737

无法将 Sonar 结果发布到 Jenkins，这是 2 种用于不同目的的不同产品。在 Jenkins 作业执行 Sonar 分析后，您必须转到 Sonar Web 界面才能获得结果。

您唯一可以获得的是从 Jenkins 到 Sonar 的链接，但它仅在使用 Maven 或 Sonar 独立构建步骤时可用（而且，它有点错误）。

# c++ - 每个应用程序实例多于一个音频会话

> ID：13605471
> 
> 赞同：1
> 
> 时间：2012-11-28T12:50:33.897
> 
> 标签：c++, windows, ms-media-foundation, audiosession, wasapi

WASAPI 或 Media Foundation 是否允许为单个进程创建多个音频会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:56:30.207

[管理音频会话 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374921%28v=vs.85%29.aspx)

尤其：

> ... 通常，应用程序维护一个音频会话，**尽管应用程序可以创建多个会话。**...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:39:22.353

调用时`IMMDevice::Activate`，您可以选择提供指向您需要的特定会话的参数。拥有它，`NULL`您将被附加到默认会话。

> 引导音频会话
> 
> [会话 GUID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370826%28v=vs.85%29.aspx)。此成员是一个 GUID 值，用于标识流所属的音频会话。如果 GUID 标识了以前打开的会话，则该方法将流添加到该会话。如果 GUID 未识别现有会话，则该方法会打开一个新会话并将流添加到该会话。流在其生命周期内仍然是同一会话的成员。

# c++ - C++ linux argv 破折号参数

> ID：13605473
> 
> 赞同：1
> 
> 时间：2012-11-28T12:50:35.827
> 
> 标签：c++, linux, string

我一直在尝试在 Linux 上使用 C++ 控制台应用程序。

我想根据他使用的参数更改用户的选项。

喜欢：`./my -n 1234`或`./my -f file.txt`

-n 或 -f 始终为 argv[1] 1234 或 file.txt 始终为 argv[2]

我的主要（）

```
int main(int argc, char *argv[]) 
```

到目前为止，这是我的代码：

```
string numlist, num;

if (argc < 3) {
   fprintf(stderr,"usage stuff...%s %s", argv[0], argv[0]);
   exit(0);
}

char *f = "-f";
char *n = "-n";
char *argv0 = argv[0];
char *argv1 = argv[1];
char *argv2 = argv[2];

if (strcmp(argv1, f) == 0){
    numlist = argv[2];
    //more data for this parameter
}

if (strcmp(argv1, n) == 0){
    num = argv[2];
    //more data for this parameter
} 
```

问题：

当我尝试`./my -n 1234`
这应该跳过第一个 if 块，然后执行第二个 if 块。
或`./my -f file.txt`
应该执行第一个 if 块，并跳过第二个 if 块。

现在使用我当前的代码，如果我输入 -n 或 -f 它会跳过所有 if 块。

-- 编辑 --
我想我已经解决了问题实际上不在 argv 上，而是在我的 if 块上。

谢谢大家，我会检查你所有的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:00:57.890

[这](http://www.cplusplus.com/forum/articles/13355/)有帮助吗？它看起来像是一种解析命令参数的好方法。

（还有一个更复杂[的](http://www.cplusplus.com/articles/DEN36Up4/)，虽然我认为第一个已经足够好了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:04:11.793

我不知道你的完整源代码是什么，但它对我有用：

```
#include <string.h>
#include <string>
#include <stdio.h>

using namespace std;

int main(int argc, char **argv){

    if (argc < 3) {
       fprintf(stderr,"usage stuff...%s %s", argv[0], argv[0]);
       exit(0);
    }

    string numlist;
    string num;

    char *f = "-f";
    char *n = "-n";
    char *argv0 = argv[0];
    char *argv1 = argv[1];
    char *argv2 = argv[2];

    if (strcmp(argv1, f) == 0){
        numlist = argv[2];
       //more data for this parameter
    }

    if (strcmp(argv1, n) == 0){
        num = argv[2];
    //more data for this parameter
    }
} 
```

我添加了`using namespace std`以使代码的编写更容易，我还将验证移到顶部，因为如果 argv[2] 不存在，它将引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:14:15.060

除非您想将其作为自己的练习，否则您可能应该为此使用库函数。

Walter 已经提到了[boost::program_options](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options.html)。如果您不想使用 Boost，您还可以查看[getopt](https://en.wikipedia.org/wiki/Getopt)，这是一个久经考验的真正 C 库函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:21:08.503

在你的 if 子句中添加一些输出语句，比如`printf("this is option -f\n")`，我敢打赌你会看到它不会跳过两个 if 体，只有一个。

看起来您对 C++ 中的字符串处理不是很熟悉。寻找`std::string`并了解如何使用字符串比使用`char*`. 我认为使用 boost 最好留给更有经验的程序员，但你可以试一试，

# php - Zend_Filter_Input 和 Zend_Validate_InArray-Validator，它有一个数组作为它的指针

> ID：13605475
> 
> 赞同：2
> 
> 时间：2012-11-28T12:50:46.187
> 
> 标签：php, arrays, zend-validate, zend-filter

我正在使用 Zend_Filter_Input 过滤和验证我的数据。对于一个字段（性别），我使用 Zend_Validate_InArray 来验证，如果值在

```
array('m', 'w'); 
```

到现在为止还挺好。
在运行我的 UnitTests 时，我注意到空数组也是性别的有效值。
为了分析这一点，我编写了以下代码：

```
$genderArray = array('m', 'w');
$needle = array();
if(in_array($needle, $genderArray)) {
    Zend_Debug::dump('is in array');
} else {
    Zend_Debug::dump('is not in array');
}

$validator = new Tueks_Validate_InArray($genderArray);
if ($validator->isValid($needle)) {
    Zend_Debug::dump('is in array');
} else {
    Zend_Debug::dump('is not in array');
} 
```

两次，我都得到'不在数组中'。

但是当我使用以下代码时：

```
$child = new Tueks_Placereport_Child();
$child->setGender($needle);
$child->validate(); 
```

一切正常（--> array() 是 array('m', 'w') 的一部分）？！？

这是我的验证方法的相关部分：

```
$genderArray = array('m', 'w');
$filters = array();
$validators = array('gender'=> 
                     array('presence'=> 'required',
                           new Tueks_Validate_InArray($genderArray)
                          )
                   );
$input = new Zend_Filter_Input($filters, $validators, $this->_data); 
```

Tueks_Validate_InArray 与 Zend_Validate_InArray 相同，但有其他消息。我没有看到问题，为什么在使用 Zend_Filter_Input 时，一个空数组是一个有效值。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:36:39.403

这实际上是Zend 框架中[的一个错误](http://framework.zend.com/issues/browse/ZF-11710)，目前尚未修复。由于`Zend_Filter_Input`Zend Framework 2 已经停止使用，我非常怀疑它是否会停止。但是，票证上附带了一个补丁程序，可以解决此问题。

我还做了一些调试，可以追踪到`_validateRule`Zend_Filter_Input[中](http://www.zendframework.com/code/filedetails.php?repname=zf.Zend+Framework&path=%2Ftrunk%2Flibrary%2FZend%2FFilter%2FInput.php&rev=24504)的方法：

在那里你可以找到这个代码块：

```
if (!is_array($field)) {
    $field = array($field);
}
[...]
foreach ($field as $key => $value) {
[...]
    if (!$validatorChain->isValid($value)) { 
```

`$field`包含字段的值。可以看到，如果传入一个非数组的值，它会被放入一个数组中，这样就进入了foreach块。但是，如果您传递一个空数组，`$field`则将保留，因此不会输入`array(0) {}`整个块。`foreach`因此不会执行单个验证（也不会执行非空检查）。

我也试图找到一种解决方法，但它们都相当尴尬。因此，最简单的解决方法是检查是否`$value`为空数组。

# c# - SQLCLR 存储过程中的 SqlBulkCopy？

> ID：13605476
> 
> 赞同：0
> 
> 时间：2012-11-28T12:50:48.027
> 
> 标签：c#, .net, sql, sqlclr

我创建了从外部服务检索大量数据的 SQLCLR 存储过程。我可以将数据批量复制到同一个 SQLCLR 存储过程中的新表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:20:33.390

我将在这里缩小到如何在 SQL 中从服务中公开数据的一般问题。可以做的是将存储过程重写为流式传输结果的[表值 CLR 函数](http://msdn.microsoft.com/en-us/library/ms131103.aspx)。然后你可以像这样使用：

```
insert into MyTable(id, name)
select id, name from dbo.MyTableFunc(agrs) 
```

对此的基础设施进行了很好的优化，我使用了它，当我停止优化时，它很快就能达到每秒 3k 行，而瓶颈在于通过网络获取行。

将服务公开为函数的好处是您也可以直接在查询和连接中使用它，无需先将其存储到磁盘上的表中（对于慢速磁盘、事务日志、锁定 yadayada 的额外步骤）。它也可以优雅地取消，你可以这样做`top 100`。

如果您告诉我们更多/提供一些代码，我们可以提供更多帮助。

# sql - 在PL SQL中如何通过选择其他表来创建表

> ID：13605477
> 
> 赞同：0
> 
> 时间：2012-11-28T12:50:47.843
> 
> 标签：sql, oracle, plsql

在 Pl SQL 中，我通过选择其他表但没有得到结果来创建表。给我一些想法来解决这个问题。我的部分代码。

```
 sqlstring :=q'[ create table sbs  pll 8 nologging as
     select /*+parallel(e,8)*/
     e.*  from event_t e
     where
     pid_id0  >= to_char(pin23.pin_convert.unix_to_rt_pid (pin23.pin_convert.string_to_unix_ts((trunc(sysdate)),'dd/mm/yy')))
     and poid_type in ('/event/billing/payment/voucher') ]' ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:28:20.410

这是一个小测试用例，应该可以满足您的需求：

```
create table event_t
( event_id     number
, pid_id0      number
, poid_type  varchar2(100)
); 
```

我创建了这个，因为我不知道你的 event_t 表的结构，除非我可以从你的代码中确定。

然后在 PL/SQL 中这有效：

```
declare
   sqlstring varchar2(4000);

begin
   sqlstring := q'[create table sbs parallel  8 nologging as
                   select /*+ parallel(e, 8) */
                          e.*  
                   from   event_t e
                   where  pid_id0  >= 5
                   and    poid_type in ('/event/billing/payment/voucher')]';

    execute immediate sqlstring;
end; 
```

然后您可以从 sbs 中选择。

我不得不更改 pid_id0 谓词，因为我没有你的包。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:35:53.737

**您必须使用''**转义代码中使用的单引号

# sql - 将查询的值放入参数中

> ID：13605480
> 
> 赞同：0
> 
> 时间：2012-11-28T12:50:57.767
> 
> 标签：sql, sql-server, delphi

我正在尝试将我们在项目中使用的一些 SQL 代码转换为使用参数。插入工作正常：

```
with SQLDataSet do begin
  Close;
  SQL.Text := 'INSERT INTO testtable (keyname, waarde) VALUES (:keyname,:waarde)';
  Prepare;
  for i := 1 to 10000 do begin
    ParamByName('waarde').AsInteger := i;
    ParamByName('keyname').AsString := 'Testa'+IntToStr(i);
    ExecSql;
  end;
end; 
```

工作又好又快。

但是，我不能让它与选择语句一起使用。起初，以下似乎有效：

```
with SQLDataSet do begin
  SQL.Clear;
  SQL.Text := 'SELECT :waarde = waarde FROM testtable WHERE keyname = :keyname';
  Prepare;
  for i := 1 to 10000 do begin
    ParamByName('keyname').AsString := 'Testa'+IntToStr(i);
    ExecSQL;
    k[i] := ParamByName('waarde').AsInteger;
    Close;
  end;
end; 
```

但是 k[i] 的值只是被 0 填充。我是否需要继续选择老式方式、发出查询、打开和遍历结果集，或者当您有一个只有 1 行的查询可以直接选择参数值时，是否有办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:42:51.317

**简短的回答：**继续按照你现在的方式做。没有理由使用参数来获取查询结果。

**更长的答案：**

您可以使用 ADOCommand（不确定 ODBCExpess 等效项是什么）并执行`SELECT INTO`查询：

```
SELECT
  YourField
INTO
  :YourParam
FROM
  YourTable
WHERE
  ID = 1 
```

以类似的方式，您可以执行存储过程。

但是，使用参数主要是为了确保*输入*有效并被视为某种类型。它还允许数据库使用更好的缓存，因为它们将查询缓存一次并将参数视为变量。

对于*输出*（返回的字段），这是没用的。即使使用普通列，查询也已被缓存。因此，只需像现在一样执行查询并读取其字段。您可以使用参数，但它们只会增加更多的复杂性和限制，没有任何好处。这些类型的参数对于读取存储过程和程序块的输出特别有用。

在您的特定情况下，您想要检索很多字段（也许全部？）在这种情况下，执行单个查询并循环遍历结果可能比像现在这样执行 1000 个小查询更好。每个查询都有一点初始化等开销，如果您设法一次查询所需的所有数据，则可以节省 1000 次开销。此外，如果您这样做（获取多条数据记录），则无法将这些结果提取到参数中，因此这是参数会限制您的原因之一，因此如果可以的话，也是仅将参数用于输入的另一个原因。

**你的结果：**

您得到的原因`0`是因为您从未设置参数值。所以它的值保持为NULL。因为您使用 请求值`AsInteger`，所以该值被转换为整数，因此返回`0`。

查询返回的值（返回的一个字段）可能`0`也是如此。您实际上查询了一个表达式`X = Y`，其中 X 是参数的值，Y 是字段的值。由于参数的值为 NULL，因此表达式的计算结果始终为 false（对 NULL 值使用普通比较运算符始终返回 false，无论您使用哪个运算符或另一个值是什么）。由于 true 和 false 通常表示为 0/1 微小的 int 字段，因此字段值也可能会返回`0`。但是您不会在发布的代码中使用此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:16:41.407

您不能参数化列名。waarde 必须是表中的列名。你应该把你的代码改成这样。（未测试）

```
with SQLDataSet do begin
  SQL.Clear;
  SQL.Text := 'SELECT waarde FROM testtable WHERE keyname = :keyname';
  Prepare;
  for i := 1 to 10000 do begin
    ParamByName('keyname').AsString := 'Testa'+IntToStr(i);
    ExecSQL;
    k[i] := SQLDataSet['waarde'];
    Close;
  end;
end; 
```

# initialization - 为什么 Rails 初始化失败？

> ID：13605490
> 
> 赞同：1
> 
> 时间：2012-11-28T12:51:25.770
> 
> 标签：initialization, ruby-on-rails-3.2, bundler

我正在使用带有 Ruby 1.9.3-p327 的 Rails 3.2.9。

在我的服务器上部署“capistrano”后，我无法初始化我的 Rails 应用程序，因为它会导致导致 Rails 和 Ruby 解释器崩溃的错误。

如果没有任何明确的错误消息，我必须依赖回溯、控制帧和内存转储。所以很难调试并找出错误来自哪里。在这里发布太长了。

在部署期间，我必须在我的**config/application.rb**文件中进行设置，以使 deploy:asset:precompile 任务通过，否则我会陷入 ruby​​ 崩溃：

```
config.assets.initialize_on_precompile = false 
```

部署后，我只运行了一个 rake db:reset 来测试从我的应用程序对数据库的访问，但这会导致崩溃，所以我测试了从控制台和“newly-Rails-app-directly-created-on”对我的数据库的访问-服务器”。这方面一切正常（创建数据库，并授予访问权限）。所以我排除了来自 database.yml 或 postgres 数据库设置的任何问题。

此外，经过很长时间的搜索（我在这个问题上花了整整一周时间），我设法找到问题来自 Rails 初始化。

更具体地说，我的 config/application.rb 中的这些行导致 Rails 和 Ruby 崩溃。

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

我尝试了这两个选项，它们都使应用程序崩溃。我也尝试对它们发表评论，但在 Rails 读取 application.rb 之后，其他一些东西也会使 Rails 和 Ruby 崩溃。

我怀疑某些东西与捆绑器和 gem 资产管道有关。如果我运行**gem list**命令，我可以看到捆绑器安装在我的服务器上，有几个版本：

```
bundler (1.2.1, 1.1.4, 1.1.3) 
```

如果我运行 rvm gemset 列表，我会看到默认 gemset 正在使用中，并且没有任何其他：

```
gemset for ruby-1.9.3-p327 (found in /usr/local/rvm/ruby-1.9.3-p327
=> (default)
   global 
```

我不知道如何确保 Rake/Rails 正在使用这个 gemset 和这个版本的 ruby​​ ？

此外，如果我以 root 身份连接；**bundle install**将导致以下错误：

```
ERROR: Gem bundler is not installed, run `gem install bundler` first 
```

如果以用户身份连接，它将起作用。

**请注意，rvm 已使用“sudo”作为系统范围安装。**

我的其他 gem 由 bundler 管理并存储到： **/var/www/opf/shared/bundle/ruby/**

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '~>3.2'
gem 'pg', '>= 0.14'
gem 'haml-rails', '~> 0.3'

group :developpement do
  gem 'rspec-rails', '>= 2.11'
  gem 'capistrano', '>= 2.12'
  gem 'faker', '>= 1.0'
  gem 'rvm-capistrano'
end

group :test do 
  gem 'rspec', '>= 2.11'
  gem 'webrat', '>= 0.7'
  gem 'spork-rails', '>= 3.2'
  gem 'factory_girl_rails', '>= 4.0'
end

group :assets do
  gem 'sass-rails',   '>= 3.2.3'
  gem 'coffee-rails', '>= 3.2.1'
  gem 'compass-rails', '>= 1.0'
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'annotate'
gem 'excel_rails', '~> 0.3'
gem 'spreadsheet', '~> 0.7'
gem 'schema_plus', '~> 0.4'
gem 'ar-octopus', '~> 0.3'
gem 'squeel', '~> 1.0'
gem 'devise', '~> 2.1'
gem 'role_model'
gem 'declarative_authorization'
gem 'rails-translate-routes', '~> 0.1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:57:04.800

我终于找到了解决方案！

首先知道 PhusionPassenger 显示的错误消息：

```
Passenger encountered the following error:
The application spawner server exited unexpectedly: Unexpected end-of-file detected.

Exception class:
    PhusionPassenger::Rack::ApplicationSpawner::Error 
```

与宝石无关，但通常情况下可能如此处[所述](https://makandracards.com/makandra/8049-how-to-fix-passenger-unexpected-end-of-file-detected-error)。

[你可以在这里](https://stackoverflow.com/a/15656949/1640771)找到我的解决方案。

# c# - 将带有序列化的画布内容保存到 WPF

> ID：13605493
> 
> 赞同：2
> 
> 时间：2012-11-28T12:51:41.433
> 
> 标签：c#, wpf

我正在尝试通过序列化保存我在 Canvas 中的 WPF 代码。

我想要做的是我可以在我的 C# 程序中添加元素，然后当我按下保存时，我想将我的画布的内容保存到一个文件中。

我正在使用 SaveFileDialog 首先打开一个对话框，我可以保存文件。

但是当我试图保存它时，我遇到了问题。

```
 Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
        dlg.FileName = "Name_" + random_save_name; 
        dlg.DefaultExt = ".text";
        dlg.Filter = "Text documents (.txt)|*.txt";
        Nullable<bool> result = dlg.ShowDialog();

        if (result == true)
        {
            SerializeToXML(this.parentWindow, this.parentWindow.canvas, 96, dlg.FileName);
        } 
```

canvas 是我的画布的名称，SerializeToXML 像这样锁定。

```
 public static void SerializeToXML(MainWindow window, Canvas canvas, int dpi, string filename)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(Canvas));
        TextWriter textWriter = new StreamWriter(filename);
        serializer.Serialize(textWriter, canvas);
        textWriter.Close();
     } 
```

我可以运行该程序，但我得到一个异常。我可能做错了，但我很难找到解决方案。

Eddt：“反映类型‘System.Windows.Controls.Canvas’时出现错误。” 和“异常拦截：SerialixeToXML，也拦截了一个异常，调用堆栈展开到从发生异常的用户代码调用之前的点。在调试器选项中选择了“展开未处理异常的调用堆栈”“我不是VS 中调试器的最佳读数，这就是现场活动所说的

编辑2：确实找到了这个：http: [//blogs.msdn.com/b/ashish/archive/2008/01/15/dynamically-produce-xaml-files-using-xamlwriter-save-method.aspx](http://blogs.msdn.com/b/ashish/archive/2008/01/15/dynamically-producing-xaml-files-using-xamlwriter-save-method.aspx)现在我可以保存到一个txt文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:43:30.487

我所做的是：

```
 public static void SerializeToXML(MainWindow window, Canvas canvas, int dpi, string filename)
    {
        string mystrXAML = XamlWriter.Save(canvas);
        FileStream filestream = File.Create(filename);
        StreamWriter streamwriter = new StreamWriter(filestream);
        streamwriter.Write(mystrXAML);
        streamwriter.Close();
        filestream.Close();
    } 
```

这样我可以保存画布。

# javascript - AngularJS指令中有很多听众

> ID：13605495
> 
> 赞同：1
> 
> 时间：2012-11-28T12:51:46.220
> 
> 标签：javascript, angularjs

我知道任何 DOM 操作都应该通过指令而不是控制器来完成。
到目前为止，我的手风琴指令中有大约 10 个侦听器，它们对添加/删除项目、激活等做出反应。此外，我的控制器中有很多事件。

*   我想知道（ab）使用这种交互是否可以？
*   也许让许多指令处理 1 个侦听器并使用它们传递某些参数会更好？

抱歉这么模糊的问题，只是想知道什么是真正的“角度”方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T13:45:28.173

指令不应该相互了解，除非它们之间具有某种层次结构或设计的交互行为，因此共享侦听器会很麻烦。即使他们彼此认识，也不习惯分享听众。如果您没有性能或内存问题，那么您就没有需要解决的问题。

您是否曾尝试打开 firefly 或 Chrome 的开发者工具，查看为某些元素注册了多少事件处理程序？很多！在整个 DOM 中的任何给定时间都有数百个侦听器处于活动状态（请注意，不仅仅是 AngularJs）。此外，您唯一要减少的是事件侦听器引用，而不是作为事件结果执行的功能。

所以不要担心你现在拥有的那 10 个听众。但是，如果我们有一个具体的例子，我们可能能够通过使用`$scope`代替（通过[`$watch`](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)，或[`$observe`](https://docs.angularjs.org/api/ng/type/$compile.directive.Attributes#$observe)另一个指令已经设置的某些属性）来帮助减轻一些事件处理程序。

* * *

作为旁注，如果您在指令或控制器之间确实有很高的内聚性：

> 您的指令/控制器中可能有太多逻辑，您非常依赖 $scope 来共享数据。在这些情况下，您应该考虑简化指令并将依赖于状态的逻辑移动到服务中。避免[过度依赖 Scope](https://blog.safaribooksonline.com/2014/04/08/refactoring-angularjs-get-hands-filthy/)。

# java - 将 JLabel 添加到面板 - 如何正确布局组件？

> ID：13605497
> 
> 赞同：1
> 
> 时间：2012-11-28T12:51:47.133
> 
> 标签：java, swing, jpanel, jlabel, layout-manager

我想在框架中添加一些单词，所以我使用了`panel1.add(new JLabel("Hello"));`

但是有些按钮的大小和位置是定制的。我听说我们必须`setLayout(null)`自定义按钮，这也导致标签不显示。（不知道是不是因为这个）

解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T12:54:17.290

我将向您介绍有关布局组件的[Java 教程——它们很好地介绍了 Swing 格式和布局。](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

而不是调用`setLayout(null)`，您可能应该调用特定的`LayoutManager`，例如`setLayout(new FlowLayout());`以便 Java 知道如何显示您的组件。在尝试将组件添加到`JPanel`. `LayoutManager`您赋予该方法的类型`setLayout()`将指示 Java 以特定方式绘制 GUI，例如在网格中，或者只是一个接一个。上面链接的教程将解释所有这些，并有一个不同`LayoutManager`的视觉示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T12:55:17.190

不要使用空布局。定义如何放置按钮的规则，并使用一些 LayoutManager 或创建自己的。

# regex - 匹配带或不带小数点的数字

> ID：13605501
> 
> 赞同：5
> 
> 时间：2012-11-28T12:52:02.993
> 
> 标签：regex

我一直在尝试找到我需要的正则表达式。前 3 个字符。和小数点后两个字符。

我试试这个

```
[+ -]?[0-9]{0,3}[.]?[0-9]{0,2}    # but accepted as 55555 or the 
[+ -]?[0-9]{0,3}[.][0-9]{0,2}     # but this is not accepted as the 44 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:55:58.000

用这个：

```
^[+ -]?[0-9]{1,3}([.][0-9]{1,2})?$ 
```

[现场观看](http://regexr.com?32vcg)

我在开头和结尾添加了锚点。如果这些被省略，则 55555 会产生两个匹配项：555 和 55。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T13:02:49.900

`55555`在您的第一次尝试中匹配，因为您仅将小数点设为可选，`44`而在第二次尝试中未匹配，因为您仅将小数点设为不可选。您要做的是使小数位和以下数字都是可选的。

您还需要以其他方式锚定匹配，`123`例如将匹配。`45.12``345``12345.12345`

如果要验证字符串，请使用：`^[-+]?[0-9]{1,3}(\.[0-9]{1,2})?$`

解释：

```
^                # Match the start of string
[-+]?            # Optional plus or minus
[0-9]{1,3}       # Followed by 1 - 3 digits 
(\.[0-9]{1,2})?  # Optionally followed by decimal place (escaped \) & 1-2 digits 
$                # Match the end of the string 
```

在这里试试吧[！](http://rubular.com/r/6Webl259eS)

*进一步说明：*

这将只匹配符合模式的字符串，即`123.34`

如果你想匹配字符串中的模式，即`I am 123.34 cm tall`

而不是使用`(^|\s)`and`(\s|$)`作为锚点：

```
(^|\s)[-+]?[0-9]{1,3}(\.[0-9]{1,2})?(\s|$) 
```

其中匹配`^`行`|`首任何空格`\s`，与行尾相同`$`。匹配将包含空格，因此请记住在`trim(match)`需要时将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T12:54:01.607

你可以尝试这样的事情： -

```
 ^?[0-9]{1,3}([.][0-9][0-9]?)? 
```

或者

```
 \d+(\.\d{1,2})? 
```

# javascript - 当对话框在 html 中可见时，防止焦点在不在对话框中的输入元素中

> ID：13605503
> 
> 赞同：-2
> 
> 时间：2012-11-28T12:52:06.010
> 
> 标签：javascript, html, css

我已经在 html 中实现了对话框。

我想要的是::

在我的对话框中，有一个带有表单元素的表单。对话框下方的主页中还有另一个表单。

现在，当我按下制表符时，光标将移动到每个表单元素，包括对话框下方的元素。

我只想限制对话框下方表单元素中的选项卡。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:55:56.770

可以按属性管理`tabIndex`

假设您的新表单有三个输入框

```
<input type="text" tabIndex="31" name="inp1" id="inp1">
<input type="text" tabIndex="32" name="inp2" id="inp2">
<input type="text" tabIndex="33" name="inp3" id="inp3" onBlur="tabIndexToFirst()"> 
```

现在，当您到达最后一个表单元素并按 Tab 时，您需要跳转到该表单的第一个表单元素。

**JS**：

```
function showNewForm() {
 document.getElelmentById('inp1').focus();
}
function tabIndexToFirst() {
 document.getElelmentById('inp1').focus();
} 
```

# php - 当单元格包含更多用逗号分隔的多值时如何显示数据

> ID：13605508
> 
> 赞同：1
> 
> 时间：2012-11-28T12:52:17.513
> 
> 标签：php, mysql, sql

我有以下代码，但我有问题。

```
$query = "SELECT p.*,(TO_DAYS(p.start_date) - TO_DAYS(NOW())) AS daydiff FROM #__jblance_project p ".
                 "WHERE p.status=".$db->quote('COM_JBLANCE_OPEN')." AND p.approved=1  AND '$now' > p.start_date AND  p.id_category=202 ".
                 "ORDER BY p.is_featured DESC, p.id DESC ". 
```

问题是当字段 id_category 具有多个值时

```
202,203,204 
```

尽管我已将代码更改为，但它没有显示任何结果

```
AND  p.id_category=202 OR .id_category=203 OR .id_category=204 
```

因为单元格包含用逗号分隔的所有值

任何建议。

感谢：D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:56:09.093

```
$query = "SELECT p.*,(TO_DAYS(p.start_date) - TO_DAYS(NOW())) AS daydiff FROM #__jblance_project as p ". "WHERE p.status=".$db->quote('COM_JBLANCE_OPEN')." AND p.approved=1 AND '$now' > p.start_date AND p.id_category=202 ". "ORDER BY p.is_featured DESC, p.id DESC ". 
```

添加为 FROM #__jblance_project as p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:05:11.800

没有真正可靠的方法可以做到这一点......你遇到了一些丑陋的事情，比如：

```
id_category LIKE "%,123" OR
id_category LIKE "123,%" OR
id_category LIKE "%,123,%" OR
id_category = "123" 
```

之所以如此丑陋，是因为使用这样的分隔字段是个坏主意。相反，您应该创建一个包含两列的单独表：

*   项目的 id
*   类别的 id

这是一个多对多的关系。

如果您确实想进一步使用您的 hack，我建议不要像这样格式化 id_category：

```
123,456,789 
```

但反而：

```
,123,456,789, 
```

所以前后都要加逗号。至少您可以将类似查询简化为：

```
id_category LIKE "%,123,%" 
```

**编辑：**我不知道`FIND_IN_SET`. 这听起来像是一个有效的解决方案，尽管规范化您的数据仍然会给您带来更好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:03:45.867

扩展我的评论，考虑改变这个：

```
SELECT p.*,(TO_DAYS(p.start_date) - TO_DAYS(NOW())) AS daydiff 
FROM #__jblance_project p
WHERE p.status=<something>
AND p.approved=1  AND '$now' > p.start_date 
AND p.id_category=202
ORDER BY p.is_featured DESC, p.id DESC 
```

类似于：

```
SELECT p.*,(TO_DAYS(p.start_date) - TO_DAYS(NOW())) AS daydiff 
FROM #__jblance_project p
WHERE p.status=<something>
AND p.approved=1  AND '$now' > p.start_date 
AND 0 < FIND_IN_SET(202, p.id_category)
ORDER BY p.is_featured DESC, p.id DESC 
```

另外，我可能会将完整的 PHP 语句写为：

```
$query = sprintf('SELECT p.*,(TO_DAYS(p.start_date) - TO_DAYS(NOW())) AS daydiff 
    FROM #__jblance_project p
    WHERE p.status=%s
    AND p.approved=1  AND '%s' > p.start_date 
    AND 0 < FIND_IN_SET(202, p.id_category)
    ORDER BY p.is_featured DESC, p.id DESC', $db->quote('COM_JBLANCE_OPEN'), $now); 
```

请注意，这比“正确”解决方案更像是一种解决方法。您真的应该考虑重新格式化您的数据库，以便每个字段都有一个条目，而不是逗号分隔的列表。

后两个使用[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)应该笨拙地实现您的目标的字符串函数。

[这个相关的问题](https://stackoverflow.com/questions/10480568/comma-separated-values-in-mysql-in-clause)，尤其是答案和评论可能具有指导意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:09:37.730

您在 mysql 中使用了 IN() 关键字。

```
p.id_category IN (202,203,204) 
```

在这里，您可以像这样传递动态类别 id 数组。

```
$array_cat_id = impload(',' ,$pass_array_of_the_id);

p.id_category IN ($array_cat_id) 
```

# android - ArrayList 中的所有元素都意外更改了它们的值

> ID：13605511
> 
> 赞同：0
> 
> 时间：2012-11-28T12:52:25.287
> 
> 标签：android, parsing, arraylist, android-asynctask

这是我的课：

```
public class JsoupParser 
{
    ArrayList<CompanyInfo> arr = new ArrayList<CompanyInfo>();

    public static final String SITE = "http://www.example.com/";

    public JsoupParser() {}

    public ArrayList<CompanyInfo> parse(final String link) 
                           throws InterruptedException, ExecutionException
    {

        new RealParser().execute(link).get();

        return arr;
    }

    class RealParser extends AsyncTask<String, Void, Void>
    {
        @Override
        protected Void doInBackground(String... params) 
        {

            Document doc = null;
            String link = params[0];
            try 
            {
                doc = Jsoup.connect(link).get();
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }

            Elements a = doc.select("a.company_logo");
            Elements img = a.select("img");
            Iterator aIter = a.iterator();
            int i = 0;
            CompanyInfo info = new CompanyInfo();
            while(aIter.hasNext())
            {
                aIter.next();
                info.setCompanyName(a.get(i).attr("title"));
                info.setCompanyListingLink(SITE+ a.get(i).attr("href"));
                info.setCompanyLogoLink(SITE+ img.get(i).attr("src"));
                arr.add(info);
                ++i;
            }
            return null;
        }           
    }
} 
```

我敢肯定，解析代码工作正常（在 Java 项目中测试）。

问题是，`arr`最后的所有元素都变得相同（突然变得等于插入到的第一个元素`arr`）。我调试并看到，每个元素都不同。

每次`info`对象不同时，这意味着我添加了不同的元素来`arr`执行此操作`arr.add(info);`。在循环中调试`while`一切正常，但一旦退出`AsyncTask`，`arr`就会变成具有多个相同对象的 ArrayList 。

我该如何解决这个问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:54:48.383

是的，因为您不断重复使用同一个`CompanyInfo`对象。
您需要`CompanyInfo info = new CompanyInfo();`在`while`循环内移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:57:01.763

把这个放在循环里面

```
CompanyInfo info = new CompanyInfo(); 
```

喜欢

信息 = 新公司信息（）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:58:01.030

首先，您`arr`一遍又一遍地将相同的对象添加到您的对象中。如果这会产生您观察到的结果，请不要感到惊讶。

其次，您正在以`aIter`一种非常不寻常的方式使用迭代器；看起来您混淆了迭代器的使用和对索引的循环。

# salesforce - 具有受影响机会的 Salesforce soql 活动

> ID：13605512
> 
> 赞同：4
> 
> 时间：2012-11-28T12:52:27.243
> 
> 标签：salesforce, soql

我正在尝试创建一个 SOQL 查询，该查询返回**具有影响机会的活动**列表，类似于具有相同名称的标准活动报告。以下似乎没有返回与报告相同的值：

```
SELECT Id,Name FROM Opportunity
where CampaignId in (SELECT CampaignId from CampaignMember where CampaignId = '??') 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:41:12.837

如果您追求简单的东西 - 这可能就足够了：

```
SELECT Campaign.Name, Id, Name, Amount
FROM Opportunity
WHERE CampaignId != null AND CloseDate = THIS_MONTH 
```

您可以轻松地将其转换为汇总查询，该查询也可以为您提供每个广告系列的总数：

```
SELECT Campaign.Name, Campaign.NumberOfOpportunities, SUM(Amount), COUNT(Id)
FROM Opportunity
WHERE CampaignId != null AND CloseDate = THIS_MONTH
GROUP BY Campaign.Name, Campaign.NumberOfOpportunities 
```

（如果你会得到`Campaign.NumberOfOpportunities`Opps 和计数之间的差异，那没关系。这是因为第一个字段是“所有时间计数器”，而后一个字段受 影响`WHERE CloseDate = THIS_MONTH`）

* * *

如果您需要与报告返回的完全一致的数据集（尤其是“已响应”），这将很棘手，因为[这些对象的 ERD 图](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_erd_majors.htm)有点讨厌。

> Campaign Influence 允许营销人员衡量和报告影响了单个机会的多个活动。

所以我们可以以某种方式从联系开始，通过 OpportunityContactRole 转到机会。同时从 Contact 转到 CampaignMembers 到 Campaign。

```
SELECT Name, Email, Account.Name, 
    (SELECT HasResponded, Campaign.Name FROM CampaignMembers),
    (SELECT Opportunity.Name, Opportunity.Amount FROM OpportunityContactRoles)
FROM Contact 
LIMIT 10 
```

但是，您必须处理查询结果以获取活动名称（例如，我认为不允许使用 Data Loader 导出子查询）。

* * *

最后但并非最不重要的一点 - 如果您**只对一个 Campaign 或一个 Opp**感兴趣，它可以被简化（而且您非常接近！）

```
SELECT Contact.Name, Opportunity.Account.Name, Opportunity.Name, Opportunity.Amount
FROM OpportunityContactRole
WHERE ContactId IN (SELECT ContactId FROM CampaignMember WHERE Campaign.Name = 'Sample Campaign') 
```

# javascript - 使用jQuery水平滑动DIV

> ID：13605513
> 
> 赞同：1
> 
> 时间：2012-11-28T12:52:26.750
> 
> 标签：javascript, jquery, css

在用户向下滚动 (x) 像素后，我将 DIV 水平滑动到视口中。如果他们向上滚动，它会再次滚动出去。然而，它滑动的方式似乎非常非常生涩（它也会暂停）。

```
<div id="doom_o"></div> 
```

```
div#doom_o {
    position: fixed;
    left: -300px;
    z-index: -1;
    height: 400px;
    width: 309px;
    background-image: url("../images/doom_o.png");
    background-repeat: no-repeat;
} 
```

```
$(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
        setTimeout(function() {
            $('#doom_o').stop().animate({left: "20%"});
        }, 250);
    } 
    else {
        setTimeout(function() {
            $('#doom_o').stop().animate({left: "-300px"});
        }, 250);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:59:52.930

您需要`setTimeout`从条件中删除调用`if`，然后将整个块放入它自己的`setTimeout`. 这将意味着代码仅在滚动完成时运行一次，而不是每次触发滚动事件时都会运行，这就是导致卡顿的原因。

```
var timer;
$(window).scroll(function() {
    clearTimeout(timer);
    var timer = setTimeout(function() {
        if ($(this).scrollTop() > 100) {
            $('#doom_o').stop().animate({ left: "20%" });
        } 
        else {
            $('#doom_o').stop().animate({ left: "-300px" });
        }
    }, 150)
}); 
```

[**示例小提琴**](http://jsfiddle.net/cNLTX/3/)

# java - 如何从 Ajax 请求加载和处理 HTML

> ID：13605519
> 
> 赞同：0
> 
> 时间：2012-11-28T12:53:13.337
> 
> 标签：java, android, ajax, dom-manipulation

我想在我的 android 应用程序中运行一个后台任务，它发送一个 Ajax 请求，从响应中解析/操作 HTML 并从 HTML 数据创建一个新对象。

请求和操作数据并创建新对象（无需多线程）非常容易。我可以创建一个 WebView，使用一些 JavaScript 函数加载一个本地 HTML 文件，从 JavaScript 发送一个 Ajax 请求，使用 jQuery 对其进行操作，然后通过“MyJavaScriptInterface”将其发送回来。

## Java 代码片段

```
// method of 'MyJavaScriptInterface'
public void processJSON(String jsonArrayString) {
    try {
        JSONArray array = new JSONArray(jsonArrayString);
        for (int i = 0; i < array.length(); i++) {
            JSONObject row = array.getJSONObject(i);
            // MyObject obj = new MyObject(row.getString("title"),
            //                             row.getString("href")  );
            // do something fancy with the object
        }
    } catch (JSONException e) {
        Log.e("MyJavaScriptInterface", e.getMessage(), e);
    }
}

// initialize WebView
webView.addJavascriptInterface(new MyJavaScriptInterface(), "android");

// load local html file with JavaScript functions
webView.loadUrl("file:///android_asset/www/index.html"); 
```

## JavaScript 代码片段

```
$.ajax({
    url: 'http://example.com/index',
    success: function(data) {
        $(data).find('#container').children().each(function(){

            jsonArray.push( {
                'title': this.title, 
                'href': this.href
            } )
        });

        jsonArray = JSON.stringify(jsonArray);
        // send 'jsonArray' back to the android device
        android.processJSON( jsonArray );
    }
}); 
```

## HTML 代码片段：

这就是网站的样子——但我无法控制内容。

```
<!DOCTYPE html>
<html>
    <!-- header -->
    [...]
    <body>
        <div id="container">
            <a href="someUrl" title="someTitle"><img src="relativeImageUrl"></a>
                <!-- more links -->
                [...]
        </div>
    </body>
</html> 
```

我想在一个单独的线程中加载数据，但这对于 WebView 是不可能的，所以这是我的问题：

# 问题

*   **如果没有**jQuery 和 JavaScript，我应该如何执行相同的任务？
*   有没有一种简单的方法可以访问 Java 中的 DOM（或者我是否必须解析 HTML 数据的整个 XML 结构）？

提前致谢！

# c# - 性能 - FunctionCall vs Event vs Action vs Delegate

> ID：13605522
> 
> 赞同：3
> 
> 时间：2012-11-28T12:53:27.933
> 
> 标签：c#, performance, events, dependency-injection, delegates

目前我正在使用 Microsoft Sync Framework 来同步数据库。我需要收集由 Microsoft Sync Framework 插入/更新/删除的每条记录的信息，并对这些信息进行处理。

同步速度可以超过每分钟 50.000 条记录。所以这意味着我的附加代码需要非常轻量级，否则将是巨大的性能损失。

Microsoft Sync Framework`SyncProgress`为每条记录引发一个事件。我订阅了这样的代码：

```
// Assembly1
SyncProvider.SyncProgress += OnSyncProgress;
// ....
private void OnSyncProgress(object sender, DbSyncProgressEventArgs e)
{
    switch (args.Stage)
    {
        case DbSyncStage.ApplyingInserts:
            // MethodCall/Delegate/Action<>/EventHandler<> => HandleInsertedRecordInformation 
            // Do something with inserted record info
            break;
        case DbSyncStage.ApplyingUpdates:
            // MethodCall/Delegate/Action<>/EventHandler<> => HandleUpdatedRecordInformation  
            // Do something with updated record info
            break;
        case DbSyncStage.ApplyingDeletes:
            // MethodCall/Delegate/Action<>/EventHandler<> => HandleDeletedRecordInformation
            // Do something with deleted record info
            break;
    }
} 
```

在另一个程序集中的其他地方，我有三种方法：

```
// Assembly2
public class SyncInformation
{
    public void HandleInsertedRecordInformation(...) {...}
    public void HandleUpdatedRecordInformation(...) {...}
    public void HandleInsertedRecordInformation(...) {...}
} 
```

`Assembly2`有参考`Assembly1`。所以对需要处理收集到的信息`Assembly1`的类的存在一无所知。`SyncInformation`所以我有以下选项来触发此代码：

1.  `Assembly2`
    在1.1中使用事件并订阅它。事件处理程序<>
    1.2。行动<>
    1.3。代表们
2.  使用依赖注入：
    `public class Assembly2.SyncInformation : Assembly1.ISyncInformation`
3.  其他？

我知道性能取决于：

*   OnSyncProgress
    *   转变
    *   使用方法调用、委托、Action<> 或 EventHandler<>
*   SyncInformation 类的实现

我目前不关心`SyncInformation`类的实现。我主要关注`OnSyncProgress`方法以及如何调用`SyncInformation`方法。

所以我的问题是：

*   **最有效的方法是什么？**
*   **什么是最无效的方法？**
*   **有没有比使用 switch in 更好的方法`OnSyncProgress`？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T13:04:22.780

> 同步速度可以超过每分钟 50.000 条记录。所以这意味着我的附加代码需要非常轻量级，否则将是巨大的性能损失。

不，不会的。

50k / 分钟并不是大量的方法调用，除非您需要在每条记录中进行数千次这样的调用。这有点过早优化的味道。如果我们忽略故意写得不好的代码和每次调用的反射，调用方法的***绝对最慢***的方法是通过无类型委托`DynamicInvoke`，并且可以在我的机器上在 42 毫秒内完成 50k 次调用。其他任何东西（类型化委托`Invoke`、直接`callvirt`在类或接口上`dynamic`、静态`call`等）甚至都无法测量（例如：对于 50k 次调用，它实际上是 0 毫秒）。

IMO，您最好使用分析器来查看真正重要的内容。它几乎肯定是“做”代码，而不是管道。

# php - 简单 Gearman 代码的分段错误。PHP 命令行

> ID：13605525
> 
> 赞同：1
> 
> 时间：2012-11-28T12:53:31.653
> 
> 标签：php, libc, gearman

这是一个非常悲伤的故事。我正在尝试在我的项目中开始使用 Gearman。但不能运行简单的测试。

```
root@140141-10009:~# cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=12.04
DISTRIB_CODENAME=precise
DISTRIB_DESCRIPTION="Ubuntu 12.04.1 LTS" 
```

PHP

```
root@140141-10009:~# php -v
PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) (built: Sep 12 2012 18:59:41)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

齿轮人

```
root@140141-10009:~# gearmand -V
gearmand 0.34 - https://bugs.launchpad.net/gearmand 
```

PHP PECL Gearman 1.1.0，从源代码编译，没有错误。所有 (2) 项测试均通过。没有启用其他 PHP 扩展。

客户端.php：

```
<?php
$client = new GearmanClient();
$client->addServer('127.0.0.1');
$client->setTimeout(10000);
$client->addTask('taskplus2', 10);
$client->addTask('taskplus2', 15);
$client->runTasks(); 
```

错误：

```
root@140141-10009:~/gearman/proto# php client.php
Segmentation fault 
```

dmesg：

```
[15066.824900] php[20520]: segfault at f ip 00007f128470ba40 sp 00007fffd9f1dd28 error 4 in libc-2.15.so[7f12845c1000+1b5000] 
```

我已经尝试过 PHP 5.3、5.4、Ububtu 10.04、12.04，使用 gearman-ppa 而没有使用。我还尝试了 PECL Gearman 0.8.1、0.8.3、1.0.2、1.0.3、1.1.0。安装所有这些以清理设置 Ubuntu。谷歌搜索`libc6 gearman`没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:40:42.207

该方法[`GearmanClient::addTask()`](http://php.net/manual/en/gearmanclient.addtask.php)接受字符串而不是整数作为第二个参数。

尝试：

```
$client->addTask('taskplus2', serialize(10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:05:09.540

尝试从官网更新 gearmand 版本到 1.1.2。

# css - IE8 中的 CSS 固定标头

> ID：13605528
> 
> 赞同：0
> 
> 时间：2012-11-28T12:53:39.077
> 
> 标签：css, internet-explorer

下面的代码可以正常工作，但是当涉及到 Ie 7 和 8 时，它就不行了。基本上，当我滚动标题时，标题应该保持固定，并且内容在下方滚动。在 IE 中，标题无处不在。

```
.header{
position: fixed;
background-color:#000;
top: 0;
height: 46px;
width: 940px;
margin-left: 50%;
padding-top: 4px;
left: -470px;
} 
```

只有CSS有解决方案吗？

# ruby - 终止由于 I/O 而阻塞的线程

> ID：13605530
> 
> 赞同：0
> 
> 时间：2012-11-28T12:53:50.867
> 
> 标签：ruby, multithreading

我创建了一个永远读取串口的线程。用于`readlines`读取串口中的数据；如果那里没有数据，它会阻塞直到接收到数据，一旦接收到数据，它就会尝试再次读取。

我无法终止我的程序。如果我调用 abort，程序不会关闭，因为其中一个线程`readlines`正在阻塞。我也不能终止线程（出于同样的原因，我假设）。尽管阻塞，我怎样才能杀死线程`readlines`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:31:17.423

你可以试试`interrupting`这个线程，看看它是否有帮助。

# pex - PEX 的可扩展性

> ID：13605535
> 
> 赞同：1
> 
> 时间：2012-11-28T12:53:57.620
> 
> 标签：pex

我已经通过 Pex, [Extensions Writer Handbook](http://research.microsoft.com/en-us/projects/pex/guidancepexextensions.pdf)但这个文档只有 5 页，并不详尽。我需要更多关于可扩展性的信息。

我已经访问了[http://pex.codeplex.com/](http://pex.codeplex.com/)，它为不同的测试框架加上 DySy 和 ASE 扩展扩展了 pex。但是，它再次编写了 pex 版本 0.18，当前版本为 0.94.x。许多类被重构和改变。因此，它无法编译。

我被困在哪里，我需要根据我的逻辑扩展测试方法名称的创建，我应该从哪里开始？网络上有没有针对 pex 0.94.x 的开源项目可供我学习和参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T17:41:22.867

你是对的，该手册对更改测试方法名称创建没有帮助我在这个博客[http://tech.rofas.net/?tag=/code上找到了这段代码](http://tech.rofas.net/?tag=/code)

```
class KeepOriginalTestNamesAttribute : PexTestNamerAttributeBase
{
    protected override IPexTestNamer CreateTestNamer(IPexExplorationComponent host)
    {
        return new TestNamer(host);
    }

    class TestNamer : PexExplorationComponentElementBase, IPexTestNamer
    {
        private readonly SafeSet<string> _names;

        public TestNamer(IPexExplorationComponent host) : base(host)
        {
            _names = new SafeSet<string>();
        }

        public bool TryCreateTestName(IPexGeneratedTest test, out string testName)
        {
            var template = ReflectionHelper.EscapeForMetadataName(test.ExplorationName.Method.ShortName);
            testName = MetadataHelper.GetUniqueNumberedName(_names, template);
            _names.Add(testName);
            Debug.WriteLine("*** " + testName + " ***");
            Debug.WriteLine(test.BodyCode);

            return true;
        }
    }
} 
```

# xcode - 我在哪里可以找到 Mac OS X 中使用的最新开源基类，例如 NSMutableDictionary、NSString、NS****、

> ID：13605540
> 
> 赞同：0
> 
> 时间：2012-11-28T12:54:09.850
> 
> 标签：xcode, macos, open-source, nsobject, base-class

你知道一些链接，我可以在其中浏览 Mac OS X 中使用的基类的源代码吗？我已经有这个[链接](http://svn.gna.org/svn/gnustep/libs/base/branches/reorg/Source/)，我发现它非常有用，但根据我最近遇到的情况（使用 NSCache 时），它似乎不是最新的源代码。

当我使用 NSCache 的 objectForKey: 时，会在其中调用 [NSCache cache:willEvictObject:]。但是根据此[链接](http://svn.gna.org/svn/gnustep/libs/base/branches/reorg/Source/)中的代码，调用 objectForKey: 时无法调用 cache:willEvictObject。我需要知道 NSCache 的 objectForKey 方法的真正行为是什么。

了解 API 类的源代码有助于调试、优化和从基类创建子类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:58:03.090

> 你知道一些链接，我可以在其中浏览 XCode 中使用的基类的源代码吗？

（事先稍作更正：不是“在 Xcode 中”，Xcode 与这些无关，它们不是 Xcode 的一部分，而是 OS X 和 iOS SDK 的一部分。此外，它拼写为 Xcode，带有小写的“c”。）

好吧，进入主题：没有。Cocoa 框架是封闭源代码的。一个例外是 CoreFoundation，Apple 在[http://opensource.apple.com](http://opensource.apple.com)上提供了它的源代码，但 Foundation 和其他框架并未公开发布。

# c++ - c++ 在调用 std::vector::clear 时崩溃

> ID：13605543
> 
> 赞同：2
> 
> 时间：2012-11-28T12:54:22.953
> 
> 标签：c++, crash, stdvector

我有一个`std::vector<Pointer>`where 指针与 Boost 的侵入式 ptr 非常相似。存在一些差异，但该系统运行良好，因此几个月来，我怀疑它是否存在任何缺陷。该向量包含约 30 个接口的列表，每个元素都有一个相当复杂对象的实现。崩溃发生如下：

```
v.clear() // -> CRASH 
```

奇怪的是，如果以任何其他方式清除矢量，则不会发生崩溃；例如下面的代码不会崩溃。

```
while(v.size()) v.pop_back();
or
while(v.size()) v.erase(v.begin()); 
```

如果我使用标志“/RTCsu”和“/RTCc”进行编译，它也不会崩溃。如果我调试所有项目的释放正确发生，它甚至会成功退出清除函数，但是如果在清除之后我确实“进入”它会再次进入清除函数并在调用函数“迭代器”时崩溃结尾（）”

这是怎么回事？由于调试器和应用程序验证程序未能给我任何相关信息，我应该检查内存的哪一部分是否损坏？有没有人偶然发现过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:29:30.310

该智能指针是否具有复制构造函数和赋值运算符？STL 容器存储包含项目的副本，如果您的智能指针有问题，则可能导致您描述的问题。

# c# - C# 使用正则表达式替换格式错误的 XML 关闭标记

> ID：13605544
> 
> 赞同：0
> 
> 时间：2012-11-28T12:54:22.940
> 
> 标签：c#, regex, string

我有一个格式错误的 xml 文件，它是用不正确的结束标签生成的，如下所示。

```
<Root>
.
.
<Question id='1' type='text'>London</Question id='1' type='text'>
<Question id='2' type='radio'>4</Question id='2' type='radio'>
<Question id='3' type='check'>6</Question id='3' type='check'>
.
.
</Root> 
```

我需要使用适当的结束标签来优化这个 XML 文件，如下所示。

```
<Question id='1' type='text'>London</Question> 
```

总之关闭标签，如，

```
<Question id='some id' type='some type'> should be replaced with </Question> 
```

文件中有数百个标签。如何使用 RegEx 的字符串操作来处理该文件以创建格式良好的 XML 文件。

谢谢，

查图尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:04:37.863

假设`str`是格式错误的 XML 字符串：

```
string fixed = Regex.Replace(str, @"</([^\s]+)[^>]+>", "</$1>"); 
```

测试正则表达式的一个非常有用的东西是来自 Rad Software的[Regex Designer 。](http://www.radsoftware.com.au/regexdesigner/)它是免费的，完全兼容 .NET 并且具有内置帮助。

# ajax - 如何使用 Json 和 Ajax 自动更新视图中的数据

> ID：13605553
> 
> 赞同：0
> 
> 时间：2012-11-28T12:54:49.287
> 
> 标签：ajax, asp.net-mvc, json

使用 MVC，我有一个控制器，它从数据库中获取数据并将其显示在视图中。当我按 F5 以使用新数据“更新”视图/页面时工作得很好。

但是，我想每隔 x 秒用新数据更新页面，而不必刷新页面本身 - 我只希望数据更新，而不是页面。我知道我可以使用 JSON 控制器来执行此操作，但我找不到任何关于此的好的信息或教程。

在使用 PHP 和 Ajax/JavaScript 之前我一直在这样做，但现在我需要使用 MVC 来做同样的事情。

任何人都知道有关如何使用 MVC 和 JSON 每 x 秒更新一次网页上的数据的任何教程？

# ruby-on-rails - 在 rails 和 mongoid 中观察一个字段

> ID：13605555
> 
> 赞同：3
> 
> 时间：2012-11-28T12:55:00.997
> 
> 标签：ruby-on-rails, mongoid, observers

我有一个`User`模型`Following`，`Follower`

**用户模型**

```
has_and_belongs_to_many :followers, class_name: 'User', inverse_of: :following
has_and_belongs_to_many :following, class_name: 'User', inverse_of: :followers 
```

**追随者**

```
has_and_belongs_to_many :followers, class_name: 'User', inverse_of: :following 
```

**下列的**

```
has_and_belongs_to_many :followings, class_name: 'User', inverse_of: :followers 
```

我有一个`UserObserver`应该查看用户是否`follower_ids`更改然后将其添加到用户`Activities`

那么我怎样才能只查看更改`follower_ids`并让最新的用户`id`放入`activities`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:56:12.280

我认为，在这种情况下，最好的选择是将添加新关注者的逻辑封装在一个方法中，并且在这个方法中，你可以触发任何你想要的东西：

```
#encoding: utf-8
class User
  include Mongoid::Document
  field :followers, type: Array
  attr_readonly :followers

  def add_new_follower(new_follower)
    unless followers.include?(user) 
      followers << user 
      trigger_added_follower_observers(user)
    end
  end

  private
  def trigger_added_follower_observers(new_follower)
    # trigger the stuff you want
  end
end 
```

还有其他选择，例如使用 ruby​​ 的 Observable 模块 (http://www.ruby-doc.org/stdlib-1.9.3/libdoc/observer/rdoc/Observable.html)、MongoID 观察者 (http://mongoid.org /en/mongoid/docs/callbacks.html#observers）或 before_save 钩子，但是恕我直言，我认为上面的代码是您拥有的最佳选择，而不会“伤害”您的模型。

希望能帮助到你。

# windows-phone-7 - 从 Windows phone 7 中的 Webbrowser 控件中检索选定的文本

> ID：13605557
> 
> 赞同：2
> 
> 时间：2012-11-28T12:55:05.240
> 
> 标签：windows-phone-7, webbrowser-control

当使用 Tap 选择它时，我正在尝试从 Windows phone 7 中的 Webbrowser 控件中检索选定的文本。还想在选择文本时删除复制图标。

当保持点击时，我想确认网络浏览器控件有任何选定的文本。我怎么能在那里开支票。

我还想突出显示 Webbrowser Control 中的选定文本。

所以这里的问题是识别选定文本的开始和停止。

我感谢任何有关此的帮助或资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:16:24.770

通过调用

```
function GetSelectedText() {
       window.external.Notify(document.selection.createRange().htmlText);           
    } 
```

并添加

```
Browser.ScriptNotify += new EventHandler<NotifyEventArgs>(Browser_ScriptNotify);

......
void Browser_ScriptNotify(object sender, NotifyEventArgs e)
{
  if(e.Value != null)
     MessageBox.Show(e.Value);
} 
```

为我解决。感谢@Sergei Grebnov 为您提供指导。

# mysql - mysql insert ...在重复键更新上返回插入的行ID

> ID：13605558
> 
> 赞同：0
> 
> 时间：2012-11-28T12:55:07.067
> 
> 标签：mysql

好的，问题不是关于如何返回 ID，而更像是如何跳过它......我有一种情况，我使用 last_insert_id() 来获取最后插入的行的 id，但如果我想得到一个零没有插入任何行。问题如下：

*   我插入...更新一些记录：因为新插入行，所以返回所有 ID
*   然后我重复这个过程：这次不返回 ID。**耶！这正是我想要的**
*   我更改了一个列值并重复该过程：但是现在返回了我已更改列值的行的 ID。这让我非常生气。如果 mysql 没有插入任何内容，我根本不希望它返回 ID

所以总结一下：

*   插入新记录时：返回 ID
*   插入相同记录时：不返回 ID
*   更新值时：返回更新行的更新 ID :(

有解决方法吗？

我知道会发生这种情况，因为 mysql 可能不会对相同的记录执行更新，但仍然......我很想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:06:19.257

您应该能够检索插入的行数并使用它来确定是否插入了任何内容。如果您使用“原始”查询（即没有可能提供插入行数的 API），看起来 ROW_COUNT() 可能会给您想要的。

# magento - Magento 导航

> ID：13605564
> 
> 赞同：0
> 
> 时间：2012-11-28T12:55:27.877
> 
> 标签：magento, content-management-system, e-commerce

我正在使用 Magento Go 并且刚刚开始使用它，我已经被卡住了！如何将联系页面、主页和关于我们的页面添加到主导航！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:13:00.263

不幸的是，这是 Magento Go 的一个限制。有一种解决方法，但我知道没有系统定义的方法可以做到这一点。

**解决方法：**

在 CMS 中创建一个静态块，并使用小部件定义到每个 CMS/类别页面的链接。将静态块添加到您希望显示它的位置。每次要包含或更改链接时，您都必须手动更新静态块。我们已经这样做了，是的，这很痛苦，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:31:28.330

这是 Magento Go wiki 关于将 CMS 页面添加到主导航的部分。它使用 Magento 内置的 URL 重定向管理器，如果你在做 Magento 工作，它真的很方便。

[http://go.magento.co.uk/support/kb/entry/name/adding-page-links-in-the-navigation-bar/](http://go.magento.co.uk/support/kb/entry/name/adding-page-links-in-the-navigation-bar/)

编辑 - 实际上，这可能会将我重定向到英国域，因此 url 可能不一定适合您，具体取决于您所在的位置。只需在 Magento Go 搜索表单中输入“将页面链接添加到主导航”，它就会为您提供相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-03T12:51:40.127

对于联系页面，您可以创建：

```
url < a href="<?php echo $this->getBaseUrl()?>contacts">Contact</a> 
```

接下来关于我们：

```
<a href="<?php echo $this->getUrl()?>about us"> 
```

# iphone - 如何存储 zip 文件数据

> ID：13605566
> 
> 赞同：0
> 
> 时间：2012-11-28T12:55:38.960
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用 nsurlconnection 类从服务器下载 zip 文件。这里我需要根据响应存储 zip 数据而不需要解压缩。我在下载全部文件后进行解压缩操作。所以请告诉我如何根据每个响应保存 zip 文件信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:22:59.470

只需从 NSUrlResponse 中获取 responseData，然后做任何你想做的事情。

如果要将其存储在磁盘上，请使用 writeToFile 方法。

# asp.net-mvc-4 - 使用 MVC 4 实现 Windows Identity Foundation

> ID：13605568
> 
> 赞同：1
> 
> 时间：2012-11-28T12:55:55.870
> 
> 标签：asp.net-mvc-4, visual-studio-2012, single-sign-on, .net-4.5, wif

我有一组应用程序访问同一个数据库来验证用户身份。这个想法是有一个门户，用户可以在其中登录一次，然后能够访问他有权访问的应用程序 (SSO)。用户可以使用用户名/密码或他的域帐户登录。

我是 WIF 的新手，我想看看用 WIF 实现它是否是个好主意。我正在使用 MVC 4 和 Visual Studio 2012，并且我已经从扩展库下载了访问和身份工具。但似乎它使用工具中的本地 STS 来模仿 STS 网站。我的问题是..

*   在这种情况下使用 WIF 是个好主意吗？
*   如何在 Visual Studio 2012 中创建 STS 网站？因为项目模板中缺少 ASP.NET STS 网站模板。
*   是否有一个很好的教程来展示如何在 VS 2012 中实现 WIF？我查看了本教程，但没有多大帮助：http: [//blogs.msdn.com/b/vbertocci/archive/2012/03/15/windows-identity-foundation-in-the-net-framework-4 -5-beta-tools-samples-claims-everywhere.aspx](http://blogs.msdn.com/b/vbertocci/archive/2012/03/15/windows-identity-foundation-in-the-net-framework-4-5-beta-tools-samples-claims-everywhere.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:37:14.980

因此，如果我正确理解了要求，您希望对位于不同域的多个 Web 应用程序进行单点登录。如果是这种情况，那么带有令牌的基于声明的身份是一个很好的解决方案。WIF 支持这一点，好消息是 WIF 是 .NET 4.5 的一部分，而不是现在的单独库。Access & Identity 工具附带的 STS 仅用于开发期间的调试和测试。您可以使用 Active Directory 联合身份验证服务或 Windows Azure AppFabric 访问控制来创建 STS。在这方面有一些关于[Pluralsight](http://pluralsight.com/training/)的很好的培训课程。我推荐的一门课程是Dominick Baier 的“ [ASP.NET 4.5 中的身份和访问控制”。](http://pluralsight.com/training/courses/TableOfContents?courseName=iac-aspnet&highlight=dominick-baier_iac-aspnet-m3-windowsauth%2a7#iac-aspnet-m3-windowsauth)您可以使用[Pluralsight 的免费试用版来试用该课程](https://pluralsight.com/training/Subscribe/Step1?isTrial=True). 关于这个主题的另一个很好的信息来源是[Dominick 的博客](http://leastprivilege.com/)。他还是[名为 IdentityServer 的开源项目](https://github.com/thinktecture/Thinktecture.IdentityServer.v2)的主要作者，该项目是使用 .NET 4.5、MVC 4、Web API 和 WCF 构建的轻量级安全令牌服务。项目中有例子。

# mysql - 我如何从 mysql 中通过这样的匹配来获取这些值？

> ID：13605570
> 
> 赞同：0
> 
> 时间：2012-11-28T12:55:56.910
> 
> 标签：mysql, sql

我有两个带有 uid 的表。两张桌子上都一样。

但发生在一张桌子上的 uid 就像 12/2456。在另一个表中，uid 就像 24560。

客户最后加了0。

现在我必须根据 uid 从两个表中检索记录，匹配​​为 2456。

我如何才能拿起所有 id 只剩下 12 （年）的行并且必须与另一个匹配

桌子？

第一张桌子

```
id  uid 

 101 12/2496 
```

第二张桌子

```
did  uid 
1122 24960 
```

现在我需要像这样的答案

```
id   did   uid 
101  1122  24960 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:01:54.510

让两个部分看起来相同：

```
select * 
from table1 t1
join table2 t2 on t2.uid/10 = substr(t1.uid, 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:03:57.857

```
select tbl1.id,
tbl2.did,
tbl2.uid
from tbl1 join
tbl2
on
replace(t2.uid,0,'') = substr(t1.uid, 3); 
```

# iphone - Why don't i get a deprecated warning for "shouldAutorotateToInterfaceOrientation:"

> ID：13605581
> 
> 赞同：0
> 
> 时间：2012-11-28T12:56:31.620
> 
> 标签：iphone, objective-c, ios, ios6

i'm trying to update an application for iOS 6\. So i run it with the 6.0 Simulator to see if i get any errors or warnings, but there aren't any. But in fact i was expecting to get a warning for `shouldAutorotateToInterfaceOrientation:` because it's deprecated in iOS 6\. Why don't i get a warning? Do i need to do something else than running it with a 6.0 simulator?

Thanks guys!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:01:48.060

deprecated warning comes when you call deprecated function byself. as `shouldAutorotateToInterfaceOrientation:` is in view hierarchy in iOS5 but not in iOS6 so when you build app for iOS6 this function behave like normal view controller function and not consider in view life cycle. That's why warning not shown by xCode.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:20:55.753

The warning won't come in the Simulator, it will come in Xcode. Try setting your "Deployment Target" to 6.0 in Xcode and the warning should appear.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:25:08.773

If your app is deployed only for iOS6, you will see that warning, otherwise, you should implement both methods (`shouldAutorotateToInterfaceOrientation` for pre-iOS6 & `shouldAutorotate` for iOS6)

# python - Python 关于 f.tell()

> ID：13605582
> 
> 赞同：2
> 
> 时间：2012-11-28T12:56:35.543
> 
> 标签：python, python-2.6

我正在阅读有关`.html`使用正则表达式（`re`模块）搜索文件的教程。我正在使用解释器。

我打开了文件并进行了搜索。每次尝试后，我都会`f.seek(0)`回到文件的开头进行下一次尝试。我使用 . 确认了我在文件中的位置`f.tell()`。

我第一次这样做时，文件的位置（以字节为单位）被返回而没有`L`附加。但是经过几次尝试，`f.tell()`返回了`L`附加的位置。

我了解`L`表示文件位置（in `bytes`）是`long number`. 但是为什么会`f.tell()`突然开始返回`L`，而以前没有呢？

然后我关闭并重新打开文件，并从一开始就`f.tell()`返回`long number`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:01:20.540

是的，`L`表示 a `long`（实际上仅受内存和计算时间的限制）。

一旦值超出类型可以处理的范围， Python 通常会自动将 s 提升为`int`s 。此外，如果发生与另一个操作的某些操作，则结果始终是( → )。`long``int``long``long``0 + 0L``0L`

在你的情况下，我只能推测是什么导致了这种影响。也许阅读超出一定限度会导致促销，也许是一些内部处理（并不总是发生）是原因。

我不认为这对你很重要。

# java - 使 JPanel 透明以查看框架后面？

> ID：13605589
> 
> 赞同：2
> 
> 时间：2012-11-28T12:56:49.410
> 
> 标签：java, swing, jframe, translucency

我知道如何做一个有形或半透明的`JFrame`，但我想在我的框架中有一个半透明的矩形区域，以便用户可以看到后面的内容。我不知道该怎么做，并且对框架后面的内容进行屏幕截图对我不起作用，因为我真的希望用户看到框架后面的动态变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:07:52.673

> 但我想在我的框架中有一个半透明的矩形区域，以便用户可以看到后面的内容。

*   `JFrame`有`BorderLayout`,`BorderLayout`有 5 个区域,

*   利用这个优势`BorderLayout`，创建一个区域`Translucent JFrame`并保持`CENTER`半透明，在其他区域放置一个不透明的面板。

*   mabye 现在，有真正的理由混合`AWT`（不支持透明度和半透明）与，您`Swing`可以放入`AWT Panels`、和区域`NORTH``SOUTH``EAST``WEST`

> 框架后面的屏幕截图对我不起作用，因为我真的想要框架后面的用户动态变化。

*   请参阅[@camickr 的屏幕图像](http://tips4java.wordpress.com/2008/10/13/screen-image/)

# iphone - iPhone 未在 iPhone 5 模拟器上显示指定的 4 英寸启动图像

> ID：13605590
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:56:52.513
> 
> 标签：iphone, objective-c, ios, ios6

我在目标摘要中指定了 4 英寸启动图像，但 iOS 6 4 英寸模拟器在我启动应用程序时显示 3.5 英寸图像。任何人的想法？您需要哪些附加信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:58:40.610

确保将其命名为 Default-568h@2x.png (640x1136)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:17:48.087

Click on the image in xcode then right side u see the **Image Properties** check the Dimensions

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:01:51.787

这可能是 .xib 文件的约束问题，请尝试以下链接更改自动布局配置 [http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-默认情况下如何关闭自动布局/](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)

现在iphone设备的图像如下：要在iPhone 4英寸上运行图像，您必须在名称和扩展名之间 添加**-568h@2x**

例如：MYimage-568h@2x.png

对于 3.5 英寸显示器，只需将图像命名为：MYimage@2x.png

对于普通的 iphone {3Gs 或更早版本}，只需将图像命名为：MYimage.png

# r - ggplot2 生成绘图后更改翻转条的颜色

> ID：13605591
> 
> 赞同：1
> 
> 时间：2012-11-28T12:56:52.547
> 
> 标签：r, colors, ggplot2, bar-chart

使用循环，我创建了一系列翻转的条形图，看起来就像这里制作的那样。创建它们之后，我想给明显不同的条形图赋予不同的颜色。因此我需要在创建绘图后更改条形的颜色。我试过使用`scale_fill_manual`，但这没有效果。这是 1 个图表的数据的结构方式，以及我的脚本

```
Station=rep("Station",5)
Slice=-1*(0:4)
mean.TD=c(344,1129,355,1349,674)
se.TD=c(114,438,121,390,14)
data115=data.frame(Station, Slice,mean.TD,se.TD)
data115

FC115=ggplot(data115, aes(x=Slice, y=mean.TD ))    +
  geom_bar(stat="identity", position=position_dodge()) +      
  geom_errorbar(aes(ymin=mean.TD-se.TD, ymax=mean.TD+se.TD), 
  width=3                                                                                           
  position=position_dodge(.9))+
theme_bw()+
ylab(expression("nematode densities (ind. 10cm"^-2*")"))  +      
xlab("Depth (cm)")+                                                   
coord_flip()     +                                             
scale_x_continuous(breaks = -4:0, labels=c("4-5","3-4","2-3","1-2","0-1"))           

FC115 
```

# javascript - 在 Closure Compier 中跳过全局变量冲突

> ID：13605594
> 
> 赞同：0
> 
> 时间：2012-11-28T12:57:10.297
> 
> 标签：javascript, node.js, google-closure-compiler

我正在使用 HTML5 WebWorkers，我遇到了这样的问题（在使用闭包编译器编译我的脚本时）：

我有两个文件（.js），里面有这段代码：

```
...

var encoder = null;

... 
```

换句话说，我有两个同名的全局变量。

这些文件将用作我要启动的两个工作人员的源，并且据我所知，这两个文件都将在它们自己的范围内执行，并且在运行时不会发生冲突。

另一个条件是我想一次编译两个文件（模块）

```
--module module1:1

--js file

--module module2:1

--js file2.js 
```

但是，Closure Compiler 检测到冲突并说 module2 应该依赖于 module1，因为两者都有相同的全局变量。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:10:01.650

有几个不同的选项：

1.  将您的变量用作全局（窗口）对象的属性。定义如下：`window.encoder = window['encoder'] || {};`
2.  `@suppress {duplicate}`向第二个变量定义添加注释。
3.  添加一个立即执行的匿名函数包装器，将您的变量定义移出全局范围。然后，您可能需要显式导出变量以在全局范围内重新公开它。

# html - 查找 html 页面后面的图像

> ID：13605596
> 
> 赞同：0
> 
> 时间：2012-11-28T12:57:33.027
> 
> 标签：html, rendering

[我想从页面http://www.kapaktoplama.com/](http://www.kapaktoplama.com/)获取左上角的图像

但是，当我检查萤火虫时，图像源代码是

```
<div class="headerPic"> 
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
```

这张图在哪里？哪个代码部分在此网站中创建了该图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:59:19.957

它是由 CSS 设置的。看一下css文件，你会发现

```
.headerPic {
   background: url(images/tane.jpg) no-repeat left top;
   width: 525px;
   height: 440px;
   float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:59:28.880

这是图片吗？：

[http://www.kapaktoplama.com/images/tane.jpg](http://www.kapaktoplama.com/images/tane.jpg)

# java - EditTextView Android中的多行字符串

> ID：13605597
> 
> 赞同：0
> 
> 时间：2012-11-28T12:57:42.733
> 
> 标签：java, android, textview

我用这段代码创建了我的 EditTextView：

```
 mEditTxtZusatzInfo = new EditTextBackEvent(this);
        mEditTxtZusatzInfo.setGravity(Gravity.START);
        mEditTxtZusatzInfo.setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
        mEditTxtZusatzInfo.setTextColor(Color.BLACK);
        mEditTxtZusatzInfo.setBackgroundResource(R.drawable.edittextbackground); 
```

后来我尝试将 EditTextView 的文本设置为：

```
 test sdgdf
gdf
ghu
fjh#
sfk

dfopgjpdfjgpodfjgpodfjgdfg
dfgdfg42534 
```

但是文本只出现在一行中。

我查看了我的文本详细信息：

十六进制换行符另存为：“0A”

Notepad++ 正确显示字符串！

如何让我的 EditTextView 显示多行？

感谢您的帮助，并为我糟糕的英语感到抱歉。

最好的问候施万迪

编辑：

EditText 是一个扩展 EditText 的自定义类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:15:26.853

使用此 setSingleLine() 将单行属性设置为 false；

```
mEditTxtZusatzInfo.setSingleLine(false); 
```

并且您必须将高度设置为 wrap_content 否则它不会增加其视图高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:11:05.800

在 xml 文件中使用多行文本而不是 EditText

# ruby-on-rails - 如何从 Rails 中的 date_select 或 select_date 获取日期？

> ID：13605598
> 
> 赞同：27
> 
> 时间：2012-11-28T12:57:43.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, params

使用给了`select_date`我一个`params[:my_date]`with`year`和属性。如何轻松获取 Date 对象？我希望有类似的东西。`month``day``params[:my_date].to_date`

我也很乐意使用`date_select`。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-28T14:08:54.320

使用 date_select 为您提供 3 个单独的键/值对，分别代表日、月和年。因此，您可以将它们`Date.new`作为参数传入以创建新的 Date 对象。

示例 date_select 返回`Event`模型的参数：

```
"event"=>
 {"name"=>"Birthday",
  "date(1i)"=>"2012",
  "date(2i)"=>"11",
  "date(3i)"=>"28"}, 
```

然后创建新`Date`对象：

```
event = params[:event]
date = Date.new event["date(1i)"].to_i, event["date(2i)"].to_i, event["date(3i)"].to_i 
```

相反，您可以决定将此逻辑包装在一个方法中：

```
def flatten_date_array hash
  %w(1 2 3).map { |e| hash["date(#{e}i)"].to_i }
end 
```

然后将其称为`date = Date.new *flatten_date_array params[:event]`. 但这不是真正属于控制器的逻辑，因此您可能决定将其移至其他地方。您甚至可以将其扩展到`Date`类上，并将其称为`date = Date.new_from_hash params[:event]`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-20T20:14:54.373

这是另一个：

```
# view
<%= date_select('event', 'date') %>

# controller
date = Date.civil(*params[:event].sort.map(&:last).map(&:to_i)) 
```

可在[http://kevinlochner.com/use-rails-dateselect-without-an-activerecord找到](http://kevinlochner.com/use-rails-dateselect-without-an-activerecord)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-19T23:40:00.447

我使用以下方法，它有以下好处：

1.  它不必通过显式命名参数键`xxx(1i)`（`xxx(3i)`因此可以通过更改为来修改以捕获小时和分钟`Date`）`DateTime`；和
2.  `params`即使这些参数填充了许多其他键值对，它也会从一组中提取日期。

`params`是格式的哈希`{ xxx(1i): '2017', xxx(2i): 12, xxx(3i): 31, ... }`；`date_key`是目标日期参数的公共子字符串`xxx`。

```
def date_from_params(params, date_key)
  date_keys = params.keys.select { |k| k.to_s.match?(date_key.to_s) }.sort
  date_array = params.values_at(*date_keys).map(&:to_i)
  Date.civil(*date_array)
end 
```

我选择将它作为 的类方法`ApplicationRecord`，而不是作为 的实例辅助方法`ApplicationController`。*我的理由是 ActiveRecord 实例化器 ( ie,* ) 中存在类似的逻辑`Model.new`来解析从 Rails 表单传入的日期。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-01T17:02:48.110

这是另一个

```
Date.civil(params[:event]["date(1i)"].to_i,params[:event]["date(2i)"].to_i,params[:event]["date(3i)"].to_i) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-30T10:30:42.897

这是rails 5的另一个：

```
module Convert
  extend ActiveSupport::Concern

  included  do
    before_action :convert_date
  end

  protected

  def convert_date
    self.params = ActionController::Parameters.new(build_date(params.to_unsafe_h))
  end

  def build_date(params)
    return params.map{|e| build_date(e)} if  params.is_a? Array

    return params unless params.is_a? Hash

    params.reduce({}) do |hash, (key, value)|
      if result = (/(.*)\(\di\)\z/).match(key)
        params_name = result[1]
        date_params = (1..3).map do |index|
          params.delete("#{params_name}(#{index}i)").to_i
        end
        hash[params_name] =  Date.civil(*date_params)
      else
        hash[key] = build_date(value)
      end

      hash
    end
  end
end 
```

您需要将其包含到您的控制器或 application_controller.rb 中：

```
class ApplicationController < ActionController::Base
  include Convert
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-03T20:15:47.013

使用 date_select 示例@joofsh 的答案，这是我使用的“单线”，假设日期字段被调用`start_date`：

```
ev_params = params[:event]

date = Time.zone.local(*ev_params.select {|k,v| k.to_s.index('start_date(') == 0 }.sort.map {|p| p[1].to_i}) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-01-25T19:17:14.503

Rails 5 + use `select_date`，在您看来*请注意前缀*

```
<%= select_date Date.today - 3.months, prefix: :start_date %> 
```

然后在您的控制器中，您只需处理：

```
your_date = Date.civil(params[:start_date][:year].to_i, params[:start_date][:month].to_i, params[:start_date][:day].to_i) 
```

前缀将三个日期组件绑定到一个对象中。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2017-01-04T18:13:53.880

或者干脆这样做：

```
your_date_var = Time.parse(params[:my_date]) 
```

# javascript - RequireJS：“requirejs”和“require”函数之间的区别

> ID：13605600
> 
> 赞同：82
> 
> 时间：2012-11-28T12:57:44.963
> 
> 标签：javascript, requirejs, require

我正在使用requireJS 2.x。我发现一些教程（和官方文档）有时使用

```
requirejs.config({ [...] });
requirejs(["module"]) ... 
```

而有时

```
require.config({ [...] });
require(["module"]) ... 
```

这两个函数（require和requirejs）之间有什么区别吗？我在文档中找不到任何关于此的信息。:(

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-28T16:28:02.143

它们完全相同。

原因是某些环境可能已经有了`require`，在这种情况下 RequireJS 不会覆盖它并允许通过`requirejs`

看到这个提交 - [https://github.com/jrburke/requirejs/commit/be45948433b053921dc6a6a57bf06d04e13b3b39](https://github.com/jrburke/requirejs/commit/be45948433b053921dc6a6a57bf06d04e13b3b39)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-11-14T21:50:27.503

### `requirejs`和`require`一样吗？

从 RequireJS 2.1.15 开始，`require`在`requirejs`全局空间中确实“完全一样”，正如您可以在控制台中执行的此测试所证明的那样：

```
> require === requirejs
true 
```

测试返回`true`告诉您它们是*完全相同的函数对象*。它们不是恰好具有相似或相同代码的两个函数。它们是同一个对象，句号。

但是请注意，当您执行时传递给函数`define(['require'], function (require) {`的 The`require`传递给函数通常与 global*不同*`require`。

### 你应该使用`require`or`requirejs`吗？

这取决于。RequireJS 是一个 AMD 加载器，但它不是镇上唯一的加载器。如果您想编写 100% 符合[AMD 规范](https://github.com/amdjs/amdjs-api/wiki/AMD)的代码，以便使用您的代码的人可以使用他们想要的任何加载器而无需修改您的代码，那么您应该`require`在全局级别使用，因为`requirejs`特定于 RequireJS。另一个 AMD 加载程序不会定义它。AMD 规范定义`require`但没有定义`requirejs`.

如果您正在加载定义全局的其他内容，`require`则必须`requirejs`在全局级别使用以避免冲突。

在模块内部，始终使用`define`来获取对`require`. 无论全局空间中是否存在冲突，您都应该这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-13T13:03:52.880

好的，它们可能确实“完全相同”。然后让我们关注为什么你会使用一个而不是另一个......

不清楚的是什么应该被认为是“最佳实践”：如果 requirejs 提供了额外的保证“如果某些环境可能已经有一个 require”，那么总是使用 requirejs 函数来定义一个 require 配置不是一个好主意吗？比要求功能？

另外，如果发生了不可想象的事情并且所讨论的环境不仅已经定义了“require”而且还定义了“requirejs”，会发生什么？这是否意味着我们也应该有一个requirejsjs？等等...？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T19:14:06.387

它们是相同的打开网站，已经加载了要求

然后打开 Chrome 控制台

在控制台中输入 require 并回车

在控制台中输入 requirejs 并回车

您会发现它们是相同的功能但名称不同

# java - Java字节缓冲区getLong（）溢出长变量

> ID：13605611
> 
> 赞同：1
> 
> 时间：2012-11-28T12:58:18.440
> 
> 标签：java

我正在开发一个非常简单的 ByteBuffer，用于 java 1.4。我有一个小骨架，基本上只是 put/getInt() put/getLong() 的实现很差。我的问题是，虽然 putInt 和 getInt 有效，但 getLong() （我认为是）不起作用。

当我读出第四个字节并将其转换为 long 时，它会溢出。但是我所有的变量都很长，所以它不应该溢出。

下面是代码（请记住，这只是一个开始）：

```
public class ByteBuffer {

    private byte[] buffer;
    private int first = 0;
    private int last = 0;
    private int size;
    private int elements;

    public ByteBuffer(int size) {
        this.size = size;
        buffer = new byte[size];
    }

    public void putInt(int theInt) {
        for (int i = 0; i < 4; i++) {
            put((byte) (theInt >>> (8 * i)));
        }
    }

    public int getInt() {
        int theInt = 0;
        for (int i = 0; i < 4; i++) {
            theInt |= (0xFF & get()) << (8 * i);
        }
        return theInt;
    }

    public void putLong(long theLong) {
        for (int i = 0; i < 8; i++) {
            put((byte) (theLong >>> (8 * i)));
        }
    }

    public long getLong() {
        long theLong = 0L;
        for (int i = 0; i < 8; i++) {
            theLong |= (long) ((0xFF & get()) << (8 * i));
        }
        return theLong;
    }

    public void put(byte theByte) {
        buffer[last++] = theByte;
        if (last == size) {
            last = 0;
        }
        elements++;
    }

    public byte get() {
        byte theByte = buffer[first++];
        if (first == size) {
            first = 0;
        }
        elements--;
        return theByte;
    }

    public byte[] array() {
        return (byte[]) buffer.clone();
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        ByteBuffer buff = new ByteBuffer(512);

        buff.putLong(9223372036854775807L);
        buff.putLong(-9223372036854775808L);

        System.out.println(9223372036854775807L);
        System.out.println(-9223372036854775808L);

        long l1 = buff.getLong();
        long l2 = buff.getLong();
        System.out.println(l1);
        System.out.println(l2);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:05:32.123

在您的 getLong 方法中，您必须将 (0xFF & get()) 转换为 long，然后才能将其移动超过 32 位。您还可以使用长文字 (0xFFL) 代替 int 文字 (0xFF)。

原因是“int && byte”操作 (0xFF & get()) 的结果类型是 int。移位操作的规范是这样的，如果 a 是 int，“a << b”实际上将移位“b modulo 32”位，如果 a 是 long，则“b modulo 64”位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:26:31.363

```
theLong |= (long) ((0xFF & get()) << (8 * i)); 
```

移动一个从字节传播的 int 值，并且只能移动 32 位位置。

解决方案：

```
theLong |= ((long) (0xFF & get())) << (8 * i); 
```

# java - 重新加载使用 LinearLayout 创建的 Listview

> ID：13605612
> 
> 赞同：0
> 
> 时间：2012-11-28T12:58:21.060
> 
> 标签：java, android, listview, android-linearlayout

我正在创建一个`ListView`using `LinearLayout`. 我这样做是因为我想将此列表放在`ScrollView`. 这是我使用`LinearLayout`.

```
adapter = new BookingSessionListAdapter(this,null, appDeleg);  
LinearLayout ll = (LinearLayout)this.findViewById(R.id.listLayout);

LinearLayout.LayoutParams layoutParams =
newLinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
LinearLayout.LayoutParams.WRAP_CONTENT);

for (int i = 0; i < adapter.getCount(); i++)   
{    
    View item = adapter.getView(i, null, null);    
    ll.addView(item,layoutParams);

} 
```

现在我想刷新列表。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:22:56.763

首先让我告诉你，你正在使用一个真正粗略的实现来显示一个`List`. 您可能想考虑使用`ListView`它而不是重新发明轮子。但是，这是一段粗略的代码，它将`List`根据新的`BookingSessionListAdapter`.

```
public void refreshList(BookingSessionListAdapter adapter, LinearLayout ll,
        LinearLayout.LayoutParams layoutParams) {
    ll.removeAllViews();
    for (int i = 0; i < adapter.getCount(); i++) {
        View item = adapter.getView(i, null, null);
        ll.addView(item, layoutParams);

    }
} 
```

这样做是删除`Views`你的所有内容`LinearLayout`并`Views`根据新添加`BookingSessionListAdapter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:20:21.523

您必须自己完成工作，这通常与 ListView 一起免费提供。在不了解您的数据（有多少项目等）的情况下很难提出解决方案

一种方法是从 LinearLayout 中删除所有视图并再次添加新视图：

```
protected void notifyDataChange() {
   ll.removeAllViews();
   for (int i = 0; i < adapter.getCount(); i++) {    
      View item = adapter.getView(i, null, null);    
      ll.addView(item,layoutParams);
   }
} 
```

但是，我会重新考虑您的整个方法，因为 ListView / Adapter 将为您完成所有繁重的工作（内存管理/视图缓存等）。

HTH。

# php - 如何从 symfony2 中 AJAX 发送的 $_POST 获取数据

> ID：13605616
> 
> 赞同：0
> 
> 时间：2012-11-28T12:58:31.433
> 
> 标签：php, ajax, post

我像这样在 ajax 中发送数据到我的控制器

```
var city='LONDON';
r.open("POST",url,true) 
r.setRequestHeader('Content-Type',
                   'application/x-www-form-urlencoded; charset=UTF-8');
r.send(city); 
```

这是我的控制器

```
public function updateDataAction(){
        $request = $this->getRequest();  
        $data = $request->request->get('city');

        var_dump($data);

        return new Response($data); 
} 
```

当我使用 var_dump($data) 时，函数返回 null。如何正确发送和检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:00:43.090

尝试使用 print_r($_POST); 打印 Post 数组 或 $request->request->all();

# c# - 如何使用 C# 使用 DomainName 获取 AD 中的 OU 名称列表？

> ID：13605618
> 
> 赞同：5
> 
> 时间：2012-11-28T12:58:32.777
> 
> 标签：c#, active-directory

我想从 Active Directory 中获取 OU 列表。

我只有域名。

我如何使用 c# 来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T13:21:22.473

尝试这样的事情：

```
// connect to "RootDSE" to find default naming context
DirectoryEntry rootDSE = new DirectoryEntry("LDAP://RootDSE");

string defaultContext = rootDSE.Properties["defaultNamingContext"][0].ToString();

// bind to default naming context - if you *know* where you want to bind to - 
// you can just use that information right away
DirectoryEntry domainRoot = new DirectoryEntry("LDAP://" + defaultContext);

// set up directory searcher based on default naming context entry
DirectorySearcher ouSearcher = new DirectorySearcher(domainRoot);

// SearchScope: OneLevel = only immediate subordinates (top-level OUs); 
// subtree = all OU's in the whole domain (can take **LONG** time!)
ouSearcher.SearchScope = SearchScope.OneLevel;
// ouSearcher.SearchScope = SearchScope.Subtree;

// define properties to load - here I just get the "OU" attribute, the name of the OU
ouSearcher.PropertiesToLoad.Add("ou");

// define filter - only select organizational units
ouSearcher.Filter = "(objectCategory=organizationalUnit)";

// do search and iterate over results
foreach (SearchResult deResult in ouSearcher.FindAll())
{
    string ouName = deResult.Properties["ou"][0].ToString();
} 
```

如果您有一个域名（例如`mycompany.com`），那么*通常*会调用LDAP 根域`dc=mycompany,dc=com`- 这是一种约定，但不一定非要如此。这就是为什么我要连接到`LDAP://RootDSE`虚拟 LDAP 根目录并读出`Default Naming Context`提供默认 LDAP 路径的属性。

如果您**知道**要连接到哪里 - 可以跳过第一步，只需提供有效的 LDAP 路径（例如`LDAP://dc=YourCompany,dc=co,dc=jp`或其他）来创建`domainRoot`目录条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T13:34:49.800

在项目中添加对 System.DirectoryServices 的引用

```
 public static List<string> ListOu()
    {
        List<string> ous = new List<string>();
        using (DirectoryEntry root = new DirectoryEntry("LDAP://dc=DOMAIN,dc=COM"))
        {
            DirectorySearcher searcher = new DirectorySearcher(root);
            searcher.Filter = "(&(objectClass=organizationalUnit))";
            searcher.SearchScope = SearchScope.Subtree;
            searcher.PropertiesToLoad.Add("distinguishedName");

            var result = searcher.FindAll();
            foreach (SearchResult entry in result)
            {
                ous.Add(entry.GetDirectoryEntry().Properties["distinguishedName"].Value.ToString());
            }        

            result.Dispose();
            searcher.Dispose();
        }
        return ous;
    } 
```

# java - 复制多线程使用的 java 集合

> ID：13605622
> 
> 赞同：0
> 
> 时间：2012-11-28T12:58:48.320
> 
> 标签：java, multithreading, spring, rmi

我有一个名为 qoute 的 java 进程在 linux server1 和 server2 上独立运行。

此 qoute 进程用于使用 Spring Rmi 创建一个 QuotingThread，并在该线程中使用一组符号更新“quotableSet”集合和 PriorityBlockingQueue“addSymQ”。

```
<bean id="quotes-core" class="com.process.quotes.QuotesHandler" scope="singleton" init-method="init">
      <constructor-arg>
         <bean id="continuousQuotingThread" class="com.process.quotes.QuotingThread" scope="singleton" >
            <property name="futureTaskUtil" ref="futureTaskUtil" />
            <property name="continueToProcess" ref="continueToProcess" />
            <property name="addSymQ" ref="addSymQ" />
         </bean>
      </constructor-arg>
   </bean>

   <bean class="org.springframework.remoting.rmi.RmiServiceExporter">
      <property name="serviceName" value="Quotes-Core" />
      <property name="service" ref="quotes-core" />
      <property name="serviceInterface" value="com.remote.QuotesHandlerIF" />
      <property name="registryPort" value="${${quotes-processor-port}}" />
   </bean> 
```

QuotingThread 根据以这种方式配置的 QuotesClient 中的符号更新“quotableSet”和“addSymQ”。

```
<bean id="quotes" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
        <property name="serviceUrl" value="rmi://${${quotes-processor-host}}:${${quotes-processor-port}}/Quotes-Core" />
        <property name="serviceInterface" value="com.remote.QuotesHandlerIF" />
        <property name="refreshStubOnConnectFailure" value="true" />
        <property name="lookupStubOnStartup" value="false" />
</bean> 
```

由于每个报价过程使用 Spring Rmi 创建了 2 个单独的 QuotingThread，

例如，符号 a、b、c 被引用进程 1 添加到 'quotableSet'、'addSymQ' 中，符号 e、f、g 被引用进程 2 添加到 'quotableSet'、'addSymQ' 中。

加法就是这样完成的。

```
QuotingThread:
--------------------------------
    public void addSymbols(String commaDelimSymbolsList) {
        if (null != commaDelimSymbolsList && commaDelimSymbolsList.length() > 0) {
            String[] symAr = commaDelimSymbolsList.split(",");
            for (int i = 0; i < symAr.length; i++) {
                    addSymQ.add(sec.getUniqueSymbol());             
            }
        }
    }

public void run() {

        while (continueToProcess.get()) {
            try {
                while (addSymQ.peek() != null) {
                    String symbol = addSymQ.poll();
                    quotableSet.add(symbol);                    
                    // some usage with quotable set                                         
                }
                Iterator<String> ite = quotableSet.iterator();
                while (ite.hasNext()) {
                    String symbol = ite.next();
                    if (symbol != null && symbol.trim().length() > 0) {
                        // some usage with quotable set 
                    }
                }
                Thread.sleep(2000);
            } catch (Exception e) {
                logger.error("Exception : ", e);
            }
        }
    } 
```

'quotableSet' 和 'addSymQ' 是这样声明的，

```
private Set<String> quotableSet = Collections.synchronizedSet(new HashSet<String>(Arrays.asList("DJ!DJI,NQ!COMP,CX!SPX,RU!RUT,CX!VIX,CX!TNX");

 private PriorityBlockingQueue<String> addSymQ; 
```

我需要的是符号应该在线程的 'quotableSet' 和 'addSymQ' 集合上复制。

我的意思是符号 a、b、c、e、f、g 应该平等地添加到线程 'quotableSet' 和 'addSymQ' 集合中。

因此，如果一台服务器出现故障，第二台服务器可以为应用程序提供服务。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:05:21.470

让我看看我是否理解正确。

您有两台服务器，每台都运行一个报价流程实例。报价流程中有 2 个线程为这些集合提供服务。现在我感到困惑的是，您说“应该在两个线程的 'quotableSet' 和 'addSymQ' 集合上复制”这是否意味着您希望在报价过程中的 2 个线程之间共享集合？如果是这样，那比我从中得到的要容易得多-“如果一台服务器出现故障，第二台服务器可以为应用程序提供服务”，这表明您希望在两台服务器之间同步集合，而不是两个线程。

或者您是否要求同步线程和进程？或者，只要集合本身在服务器之间复制，这两个线程是否可以在集合中具有不同的值？

以下是每个方面的一些提示：

1) 跨线程同步。只需使集合在两个线程的共享资源中可用，确保您已同步集合。你去吧。

2) 跨进程同步。您将需要在两个进程之间建立一些连接，如套接字，以允许它们相互发送和接收集合值。这将需要在报价过程中打开一个额外的线程来处理这个问题。

祝你好运。

# sencha-touch - 如何确保动画在所有视图中正常工作

> ID：13605623
> 
> 赞同：0
> 
> 时间：2012-11-28T12:58:51.547
> 
> 标签：sencha-touch, sencha-touch-2

是否有一种标准方法可以使已停用的视图具有滑开的动画或使视图处于活动状态以滑入？

我正在考虑为视图端口设置一个基本控制器，然后是一个事件“activeitemchange”，它设置视图的动画。但是当我从基本控制器继承我的控制器时，我收到以下错误：

```
Failed loading 'http://localhost:1212/touch/src/app/AppController.js' 
```

不确定问题是什么，或者即使这是实现这一目标的正确方法......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:03:41.167

这是一个使用导航视图的示例，其中动画在导航视图的配置中仅设置一次。

[http://www.senchafiddle.com/full/!izRlK/](http://www.senchafiddle.com/full/!izRlK/)

希望这可以帮助

# jdbc - 具有有效免费许可证的 JDataConnect 许可证问题

> ID：13605626
> 
> 赞同：0
> 
> 时间：2012-11-28T12:59:06.697
> 
> 标签：jdbc

JDataConnect 已被我们多年前用于从 Java 访问 Microsoft Access 数据库。对于一个迁移项目，我们正在试探性地考虑再次使用它。与此同时，原则上可以进行远程访问。一年前我进行了一次成功的测试。

今天我在另一台机器上重试，免费许可证来自： [http ://www.jnetdirect.com/free-software/jdataconnect-single.html](http://www.jnetdirect.com/free-software/jdataconnect-single.html)

我已经下载并安装了 3.679.232 JDCSetup_4_0.exe

在端口 1150 上打开防火墙后，我原则上可以使用 JData2_0.sql.$Driver 作为驱动程序和如下连接字符串进行连接：

```
jdbc:JDataConnect:1150//leto/c:\\y_wf\\data\\smartCRM\\smartCRM.mdb 
```

然后我收到错误消息：

```
Attempt 1, Connect to JDataServer on server leto port:1150  Result was: java.sql.SQLException: ServerException:You should upgrade the license for this version. The current License is valid only for version 3 
SQLState: 01000
VendorError: 0 
```

我很困惑，因为我使用了 JnetDirects 网页上的许可证密钥。似乎没有可用的版本 3 下载。这里可能发生了什么导致情况失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:09:06.197

JNetDirect 支持回答了以下问题：

*经过进一步验证，我注意到（并更正）虽然在下载文件之前在下载页面上提供的密钥和主 JDataConnect 页面是正确的（下面红色的那个），但在另一个页面上提供的那个（Wolfgang使用）有1个不同的数字。它已得到纠正。*

# java - Java继承接口中的注解

> ID：13605627
> 
> 赞同：2
> 
> 时间：2012-11-28T12:59:07.613
> 
> 标签：java, web-services, annotations

我最近开始研究 Java Web Services，发现以下令人费解的问题：

如果我在具有@Consumes 注释的接口中定义了一个方法，然后我实现了该接口，则该服务可以正常工作，就好像@Consumes 是继承的一样。

但是，从阅读各种文章和[here](https://stackoverflow.com/questions/4745798/why-java-classes-do-not-inherit-annotations-from-implemented-interfaces)来看，注释似乎没有被继承。

我敲了以下测试来检查这一点：

```
interface ITestAnnotationInheritance {
    @Consumes
    void test();
}

class TestAnnotationInheritanceImpl implements ITestAnnotationInheritance {
    @Override
    //@Consumes     // This doesn't appear to be inherited from interface
    public void test() {}

    public static void main(String[] args) throws SecurityException, NoSuchMethodException {
        System.out.println(TestAnnotationInheritanceImpl.class.getMethod("test").getAnnotation(Consumes.class));
    }
} 
```

结果是：

```
null 
```

如果我取消注释 TestAnnotationInheritanceImpl 类中的@Consumes，则输出为：

```
@javax.ws.rs.Consumes(value=[*/*]) 
```

这证明注解不是继承的，但是 Web 服务怎么能正常工作呢？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:07:42.137

假设您正在谈论方法上的 Web 服务注释，那么框架可能正在使用反射来查找超类中声明的方法上的注释......或者甚至通过继承层次结构查找在已实现或覆盖的方法上声明的注释同一个签名。（您可能可以通过查看框架源代码来弄清楚到底发生了什么......）

* * *

试试你的例子的这个变体：

```
class TestAnnotationInheritance {
    @Consumes
    public void test() {}
}

class TestAnnotationInheritance2 extends TestAnnotationInheritance {
    public static void main(String[] args) 
    throws SecurityException, NoSuchMethodException {
        System.out.println(TestAnnotationInheritance2.class.getMethod("test").
                           getAnnotation(Consumes.class));
    }
} 
```

我认为这将表明该方法上存在注释。（这里的区别是我们没有用另一个没有 @Consumes 注释的声明覆盖具有 @Consumes 注释的方法声明。）

* * *

请注意，类上的注解通常不会被继承，但如果它们是用`@Inherited`注解声明的，它们就会被继承；请参阅[JLS 9.6.3.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.3)和[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/Inherited.html)。

IMO，注释继承的概念有点橡皮。但幸运的是，它不会影响核心 Java 类型系统和计算模型。

# sql - Oracle SQL - 执行顺序或 OR / AND 条件

> ID：13605628
> 
> 赞同：1
> 
> 时间：2012-11-28T12:59:06.947
> 
> 标签：sql, oracle

执行查询时得到错误的结果，但得到的错误行取决于执行顺序。说明：如果我首先执行查询如下：

```
select * 
from PROG_TSUJETO_ATRIB_VIG sujetoatri0_ 
where ((sujetoatri0_.valor like 'COM2' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('01/01/2001 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('01/01/2049 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'COM1' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('01/01/2001 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('01/01/2049 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'Suje' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('06/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('06/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'Suj' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('28/05/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('03/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'CSA.1' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('19/08/2013 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('20/08/2010 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    and(sujetoatri0_.IDN_PARM_ATRIBUTO=55 )and(sujetoatri0_.FECHA_BAJA_LOGICA is NULL ) 
```

我得到的结果是：

```
IDN_SUJETO_ATRIB_VIG    FEC_INI_VIGENCIA    IDN_SUJETO  FEC_FIN_VIGENCIA    VALOR   IDN_PARM_ATRIBUTO   SIOMAUD_USUARIO_ALTA    
1   2000-10-10 00:00:00 2   2050-10-10 00:00:00 COM2    55  (null)  (null)  (null)  (null)  (null)  (null)
2   2000-10-10 00:00:00 1   2050-10-10 00:00:00 COM1    55  (null)  (null)  (null)  (null)  (null)  (null)
541 2015-06-06 00:00:00 1245    2015-06-10 00:00:00 Suje    57  (null)  (null)  (null)  (null)  (null)  (null)
544 2015-05-28 00:00:00 1246    2015-06-03 00:00:00 Suj 57  (null)  (null)  (null)  (null)  (null)  (null) 
```

我不应该得到第 3 行和第 4 行，因为我要求的是 55 而那些有 57。但更重要的是，如果我更改 OR 条件（第 3 和第 5）的顺序，如下所示：

```
select *
from PROG_TSUJETO_ATRIB_VIG sujetoatri0_ 
where ((sujetoatri0_.valor like 'COM2' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('01/01/2001 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('01/01/2049 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'COM1' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('01/01/2001 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('01/01/2049 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'CSA.1' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('19/08/2013 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('20/08/2010 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'Suje' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('06/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('06/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    or((sujetoatri0_.valor like 'Suj' )and(sujetoatri0_.FEC_INI_VIGENCIA<=to_date('28/05/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS'))and(sujetoatri0_.FEC_FIN_VIGENCIA>=to_date('03/06/2015 00:00:00' , 'dd/MM/yyyy HH24:MI:SS')))
    and(sujetoatri0_.IDN_PARM_ATRIBUTO=55 )and(sujetoatri0_.FECHA_BAJA_LOGICA is NULL ) 
```

获取的结果是：

```
IDN_SUJETO_ATRIB_VIG    FEC_INI_VIGENCIA    IDN_SUJETO  FEC_FIN_VIGENCIA    VALOR   IDN_PARM_ATRIBUTO   SIOMAUD_USUARIO_ALTA    SIOMAUD_FECHA_ALTA  SIOMAUD_USUARIO_ULT_MODIF   SIOMAUD_FECHA_ULT_MODIF SIOMAUD_FECHA_BAJA  FECHA_BAJA_LOGICA
1   2000-10-10 00:00:00 2   2050-10-10 00:00:00 COM2    55  (null)  (null)  (null)  (null)  (null)  (null)
2   2000-10-10 00:00:00 1   2050-10-10 00:00:00 COM1    55  (null)  (null)  (null)  (null)  (null)  (null)
337 2011-06-01 00:00:00 1142    2011-06-30 00:00:00 CSA.1   57  (null)  (null)  (null)  (null)  (null)  (null)
541 2015-06-06 00:00:00 1245    2015-06-10 00:00:00 Suje    57  (null)  (null)  (null)  (null)  (null)  (null) 
```

也就是说，它只排除了最后一个错误条件。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:05:20.543

AND 比 OR 具有更高的优先级 - 所以`a AND b OR c AND d`实际上`(a AND b) OR (c AND d)`类似，`A OR b OR c AND d`实际上是`A OR b OR (c AND d)`. 见[这里](http://docs.oracle.com/html/A95915_01/sqopr.htm)。检查你的包围！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:17:56.597

From your first query, I have copied, but re-formatted for readability. Your issue is that all of your "OR" conditions are at the same level as your final "AND" conditions making them qualify.

```
select 
      * 
   from 
      PROG_TSUJETO_ATRIB_VIG sujetoatri0_ 
   where 
         (     ( sujetoatri0_.valor like 'COM2' )
           and ( sujetoatri0_.FEC_INI_VIGENCIA <= to_date('01/01/2001 00:00:00', 'dd/MM/yyyy HH24:MI:SS' ))
           and ( sujetoatri0_.FEC_FIN_VIGENCIA >= to_date('01/01/2049 00:00:00', 'dd/MM/yyyy HH24:MI:SS' ))
         )
      or (     ( sujetoatri0_.valor like 'COM1' )
           and ( sujetoatri0_.FEC_INI_VIGENCIA <= to_date('01/01/2001 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
           and ( sujetoatri0_.FEC_FIN_VIGENCIA >= to_date('01/01/2049 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
         )
      or (     (  sujetoatri0_.valor like 'Suje' )
           and ( sujetoatri0_.FEC_INI_VIGENCIA <= to_date('06/06/2015 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
           and ( sujetoatri0_.FEC_FIN_VIGENCIA >= to_date('06/06/2015 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
         )
      or (     ( sujetoatri0_.valor like 'Suj' )
           and ( sujetoatri0_.FEC_INI_VIGENCIA <= to_date('28/05/2015 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
           and ( sujetoatri0_.FEC_FIN_VIGENCIA >= to_date('03/06/2015 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
         )
      or (     ( sujetoatri0_.valor like 'CSA.1' )
           and ( sujetoatri0_.FEC_INI_VIGENCIA <= to_date('19/08/2013 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
           and ( sujetoatri0_.FEC_FIN_VIGENCIA >= to_date('20/08/2010 00:00:00', 'dd/MM/yyyy HH24:MI:SS'))
         )
     and ( sujetoatri0_.IDN_PARM_ATRIBUTO=55 )
     and ( sujetoatri0_.FECHA_BAJA_LOGICA is NULL ) 
```

I think what you really want is...

```
where (     ( or condition 1)
         OR ( or condition 2)
         OR ( or condition 3)
         OR ( or condition 4)
      )
      AND ( your 55 condition )
      AND ( your null condition ) 
```

So, by wrapping all your OR conditions as one, it changes the statement to

```
select where ( any of these or conditions )
         AND ( 55 condition )
         AND ( null condition ) 
```

Per your comment back, the answer is more as Will described, what your query is being interpreted as is PROCESSED as

```
 ( com2 test )
OR ( com1 test )
OR ( suje test )
OR ( suj test )
OR (( CSA.1 test ) AND ( 55 test ) AND ( null test )) 
```

# erlang - Erlang 主管树终止

> ID：13605629
> 
> 赞同：0
> 
> 时间：2012-11-28T12:59:13.667
> 
> 标签：erlang, erlang-otp, erlang-supervisor

我正在尝试构建一个具有以下结构的主管树：

1 个根主管 -> 3 个“级别”主管 -> 每个级别主管都有一个初始化主管 -> X 个工人（现在只有 1 个）

但是由于某种原因，启动第二级主管会使整个树终止，如果我只启动 1 个根 -> 1 个级别 -> 1 个初始化 -> 1 个工作人员（或更多工作人员），那很好，但是一旦我尝试添加更多监督树终止。

```
-module(otp_supervisor).
-behavior(supervisor).

-export([start_cell/1]).
-export([init/1]).

start_cell(root) ->
    supervisor:start_link({local, root}, ?MODULE, [root]);
start_cell({Type, Role}) ->
    supervisor:start_link({local, Type}, ?MODULE, [{Type, Role}]).

init([root]) -> 
    init_root(one_for_one, 3, 60);
init([{level, Param}]) -> 
    init_level(one_for_one, 3, 60, {member, Param});
init([{member, Param}]) -> 
    init_member(one_for_one, 3, 60, Param).

init_root(RestartStrategy, MaxRestart, MaxTime) ->
    io:format("~p ~s: Spawning...~n", [self(), root_supervisor]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {olevel,
                {otp_supervisor, start_cell, [{level, overseer}]},
                permanent, 1000, supervisor, [otp_supervisor]
            },
            {slevel,
                {otp_supervisor, start_cell, [{level, supervisor}]},
              permanent, 1000, supervisor, [otp_supervisor]
            },
            {wlevel,
                {otp_supervisor, start_cell, [{level, worker}]},
                permanent, 1000, supervisor, [otp_supervisor]
            }
        ]
        }
    }.

init_level(RestartStrategy, MaxRestart, MaxTime, {member, overseer}) ->
    io:format("~p ~s: Spawning...~n", [self(), overseer_level_supervisor]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {oinit,
                {otp_supervisor, start_cell, [{member, overseer}]},
                permanent, 1000, supervisor, [otp_supervisor]}
        ]
        }
    };
init_level(RestartStrategy, MaxRestart, MaxTime, {member, supervisor}) ->
    io:format("~p ~s: Spawning...~n", [self(), supervisor_level_supervisor]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {sinit,
                {otp_supervisor, start_cell, [{member, supervisor}]},
                permanent, 1000, supervisor, [otp_supervisor]}
        ]
        }
    };
init_level(RestartStrategy, MaxRestart, MaxTime, {member, worker}) ->
    io:format("~p ~s: Spawning...~n", [self(), worker_level_supervisor]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {winit,
                {otp_supervisor, start_cell, [{member, worker}]},
                permanent, 1000, supervisor, [otp_supervisor]}
        ]
        }
    }.

init_member(RestartStrategy, MaxRestart, MaxTime, overseer) ->
    io:format("~p ~s: Spawning...~n", [self(), init_overseer]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {ol_core,
                {aux_datasocket, start, [ol_overseer1]},
                permanent, 1000, worker, [aux_datasocket]
            }
        ]
        }
    };
init_member(RestartStrategy, MaxRestart, MaxTime, supervisor) ->
    io:format("~p ~s: Spawning...~n", [self(), init_supervisor]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {sl_core,
                {aux_datasocket, start, [sl_overseer1]},
                permanent, 1000, worker, [aux_datasocket]
            }
        ]
        }
    };
init_member(RestartStrategy, MaxRestart, MaxTime, worker) ->
    io:format("~p ~s: Spawning...~n", [self(), init_worker]),
    {ok, {
        {RestartStrategy, MaxRestart, MaxTime},
        [
            {wl_core,
                {aux_datasocket, start, [wl_overseer1]},
                permanent, 1000, worker, [aux_datasocket]
            }
        ]
        }
    }. 
```

aux_datasocket 模块是一个非常简单的 gen_server ，它本身工作得很好（因为它现在除了启动 gen_server 什么都不做）所以我很肯定错误不在于该模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:01:53.440

猜测：您正在使用注册点对同一主管进行多次注册`{local, Type}`。调试的方法是运行`rel -boot start_sasl`，然后查找崩溃/进度报告并尝试找出问题所在。多重性问题表明这是错误的。

另一个重要的事情是，从 shell 运行它会将树链接到 shell。因此，如果您最终因错误而终止 shell，则 poof 也会进入主管树。您需要将其移出链接网络：

```
Pid = spawn(fun() -> {ok, _} = supervisor_tree_start(), receive stop -> ok end end),
...
Pid ! stop. 
```

# postgresql - 将表示时间戳的字符串转换为 PostgreSQL 中的实际时间戳？

> ID：13605630
> 
> 赞同：7
> 
> 时间：2012-11-28T12:59:16.490
> 
> 标签：postgresql, datetime, database-design, timestamp

在 PostgreSQL 中：我转换`string`为`timestamp`with `to_timestamp()`：

```
select * from ms_secondaryhealthcarearea
where to_timestamp((COALESCE(update_datetime, '19900101010101'),'YYYYMMDDHH24MISS') 
    > to_timestamp('20121128191843','YYYYMMDDHH24MISS') 
```

但我得到这个错误：

```
ERROR:  syntax error at end of input
LINE 1: ...H24MISS') >to_timestamp('20121128191843','YYYYMMDDHH24MISS')
                                                                       ^
********** Error **********

ERROR: syntax error at end of input
SQL state: 42601
Character: 176 
```

为什么？如何将 a 转换`string`为`timestamp`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T13:02:39.207

一个太多的左括号。试试这个：

```
select * 
from ms_secondaryhealthcarearea 
where to_timestamp(COALESCE(update_datetime, '19900101010101'),'YYYYMMDDHH24MISS') >to_timestamp('20121128191843','YYYYMMDDHH24MISS') 
```

您在 to_timestamp 有两个左括号：

```
where to_timestamp((COA.. -- <-- the second one  is not needed! 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T13:34:05.443

[@ppeterka](https://stackoverflow.com/a/13605692/939860)指出了语法错误。

更紧迫的问题是：为什么将`timestamp`数据存储为字符串开头？如果您的情况允许，请考虑将列转换为正确的类型：

```
ALTER TABLE ms_secondaryhealthcarearea
ALTER COLUMN update_datetime TYPE timestamp
USING to_timestamp(update_datetime,'YYYYMMDDHH24MISS'); 
```

或使用[`timestamptz`](https://stackoverflow.com/a/9576170/939860)- 取决于您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-25T20:30:17.157

将字符串转换为 PostgreSql 的时间戳类型的另一种方法是上面的，

```
SELECT to_timestamp('23-11-1986 06:30:00', 'DD-MM-YYYY hh24:mi:ss')::timestamp without time zone; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-08T13:07:16.250

我的要求与我阅读标题的方式相同。如何将纪元时间戳作为文本转换为真实时间戳。就我而言，我从 json 对象中提取了一个。所以我最终得到了一个时间戳作为毫秒的文本

`'1528446110978'`（格林威治标准时间：2018 年 6 月 8 日星期五上午 8:21:50.978）

这是我尝试过的。只是后者（ts_ok_with_ms）是完全正确的。

```
SELECT
  data->>'expiration' AS expiration,
  pg_typeof(data->>'expiration'),
  -- to_timestamp(data->>'expiration'), < ERROR: function to_timestamp(text) does not exist
  to_timestamp(
    (data->>'expiration')::int8
  ) AS ts_wrong,
  to_timestamp(
    LEFT(
      data->>'expiration',
      10
    )::int8
  ) AS ts_ok,
  to_timestamp(
    LEFT(
      data->>'expiration',
      10
    )::int8
  ) + (
    CASE
      WHEN LENGTH(data->>'expiration') = 13
      THEN RIGHT(data->>'expiration', 3) ELSE '0'
    END||' ms')::interval AS ts_ok_with_ms
FROM (
  SELECT '{"expiration": 1528446110978}'::json AS data
) dummy 
```

这是返回的（转置）记录：

```
expiration    1528446110978
pg_typeof     text
ts_wrong      50404-07-12 12:09:37.999872+00
ts_ok         2018-06-08 08:21:50+00
ts_ok_with_ms 2018-06-08 08:21:50.978+00 
```

我确定我忽略了一个更简单的版本，即如何从 json 对象中的时间戳字符串获取带有 ms (ts_ok_with_ms) 的真实时间戳，但我希望这仍然会有所帮助。

*更新：为了您的方便，这里有一个功能。*

```
CREATE OR REPLACE FUNCTION data.timestamp_from_text(ts text)
RETURNS timestamptz
LANGUAGE SQL AS
$$
  SELECT to_timestamp(LEFT(ts, 10)::int8) +
  (
    CASE
      WHEN LENGTH(ts) = 13
      THEN RIGHT(ts, 3) ELSE '0'
    END||' ms'
  )::interval
$$; 
```

# macos - Mac OS X 二进制文件的 MACOSX_DEPLOYMENT_TARGET

> ID：13605640
> 
> 赞同：4
> 
> 时间：2012-11-28T12:59:46.040
> 
> 标签：macos, binaryfiles

编译二进制文件时，是否可以从二进制文件中读取 MACOSX_DEPLOYMENT_TARGET 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:20:06.883

一种选择是`LC_VERSION_MIN_MACOSX`在 Mach-O 视图标题中查找加载命令。但是，它仅在 10.8 中添加，并且它可能不存在于以前版本的 Mac OS X 中构建的二进制文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:54:28.810

如果您浏览应用程序，请右键单击应用程序图标，然后选择“显示包内容”。然后打开“目录”文件夹。然后打开 MacOS 文件夹并右键单击可执行文件。选择“获取信息”，然后阅读“已创建”的内容。我认为应该这样做。

# python - 尝试在 SublimeText2 中导入 python 模块时出现 ImportError

> ID：13605646
> 
> 赞同：6
> 
> 时间：2012-11-28T13:00:01.843
> 
> 标签：python, sublimetext2, sublimetext

我是 SublimeText2 的新手。到目前为止，我发现它非常好，但我只是遇到了一个我无法解决的问题。我正在尝试将 Python 模块*mechanize*导入我的脚本中。然而，每当运行它（只是*导入机械化*线），我得到：

```
Traceback (most recent call last):
  File "/Users/gabrielbianconi/Desktop/test.py", line 1, in <module>
    import mechanize
ImportError: No module named mechanize
[Finished in 0.3s with exit code 1] 
```

但是，当我在终端中运行此行时，它可以完美运行：

```
gb-air:~ gabrielbianconi$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import mechanize
>>> 
```

我想这是ST2的问题。我看到Mac上的ST2使用系统的python，所以我不明白为什么它不识别模块。

非常感谢。

编辑：我在 OS X Mountain Lion 上。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:45:00.650

我设法解决了这个问题。ST2 没有使用与终端相同的 python。对于任何有同样错误的人，您可以通过选择：Sublime Text 2 > Preferences > Browser Packages...然后进入“Python”文件夹并打开“Python.sublime_build”来解决这个问题。现在编辑“cmd”参数以匹配所需的 Python 路径。对我来说（使用 MacPorts），结果是：

```
{
    "cmd": ["/opt/local/bin/python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T01:05:56.483

这段代码帮助了我（在linux终端输入）：

```
echo "export PATH=~/bin:$PATH" >> ~/.profile 
```

（[来源](https://realpython.com/blog/python/setting-up-sublime-text-3-for-full-stack-python-development/)）

# jquery - 单击一行时使用jquery获取列的值

> ID：13605647
> 
> 赞同：0
> 
> 时间：2012-11-28T13:00:14.170
> 
> 标签：jquery, asp.net, gridview

我有一个gridview如下：

```
 <asp:GridView ID="gvSentDate" runat="server">
                    <Columns>
                        <asp:BoundField DataField="NumberWithText" HeaderText="Number" ReadOnly="true" />
                        <asp:BoundField DataField="NumberWithMask" HeaderText="Number"
                            ReadOnly="true" />
                    </Columns>
                </asp:GridView> 
```

每当用户单击该行时，我都想获取 NumberWithText 的文本。我有以下按列获取的 jquery，但是当用户单击整行时，我只想获取该列：

```
 $(document).ready(function () {

            $("#<%=gvSentDate.ClientID%> tr:has(td)").hover(function (e) {
                $(this).css("cursor", "pointer");
            });

            $("#<%=gvSentDate.ClientID%> tr:has(td)").click(function (e) {
                var selTD = $(e.target).closest("tr");
                alert(selTD.text());
            });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:05:35.043

您可以尝试以下代码：

```
$(document).ready(function () {

        $("#<%=gvSentDate.ClientID%> tr:has(td)").hover(function (e) {
            $(this).css("cursor", "pointer");
        });

        $("#<%=gvSentDate.ClientID%> tr:has(td)").click(function (e) {
            var selTD = $(e.target).closest("tr");
            alert(selTD.text());

    $(this).closest('table').find('th').eq($(this).index());
        });
}); 
```

# jersey - 如何使用 Jersey 框架过滤 curl 命令数据中的无效参数

> ID：13605650
> 
> 赞同：1
> 
> 时间：2012-11-28T13:00:21.127
> 
> 标签：jersey

**我的资源类：**

```
 @POST 
    @Path("/add")
    @Consumes({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    public Object add(Flow flow){
        Object obj = fun(flow.getParam1(),flow.getParam2());
        return obj;
    } 
```

Flow是一个`JAXB`类，`params`都是它的成员变量。
**使用的命令：**

```
curl -X POST -HContent-type:application/xml -k --data "<rootElementName param1=\"val1\" param2=\"val2\"/>" https://<ip>:8443/xxxx/add

curl -X POST -HContent-type:application/json -k --data "{\"@param1\":\"val1\",\"@param2\":\"val2\"}" https://<ip>:8443/xxxx/add 
```

我的要求是识别无效的参数名称并通过错误。
**前任：**

```
curl -X POST -HContent-type:application/xml -k --data "<rootElementName invalidParam1=\"val1\" param2=\"val2\"/>" https://<ip>:8443/xxxx/add 
```

资源类必须验证此数据并返回消息 Invalid `param`: invalidParam1 对于 HTTP GET 方法，我通过迭代多值映射来完成此操作`uriInfo.getQueryParameters()`

请建议更好的方法来对方法进行无效`param`验证`POST`（如果可能，通过重用多值映射验证代码）

# java - 为什么这个 HashMap.get 返回 null？

> ID：13605652
> 
> 赞同：0
> 
> 时间：2012-11-28T13:00:25.930
> 
> 标签：java

我正在`HashMap`像这样插入值

```
String group_name[]=group_names.split(",");
String group_ids[]=new_groups.split(",");
Hashtable<Integer,String> hm=new Hashtable<Integer,String>(10);
for(int i=0;i<group_ids.length;i++){
    if (group_ids[i]!=null && !group_ids.equals("")) {
        hm.put(Integer.parseInt(group_ids[i]), group_name[i]);
    } 
```

在下面的代码中，list2 是`ArrayList`它的键，`HashMap`我正在检索如下值

```
for(String group_id1:list2) {
    int gid=Integer.parseInt(group_id1); 
    String group_name=hm.get(Integer.parseInt(group_id1)); 
```

这里 hm.get() 方法返回 null

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:02:01.687

```
if (group_ids[i]!=null && !group_ids.equals("")) { 
```

应该是

```
if (group_ids[i]!=null && !group_ids[i].equals("")) { 
```

# titanium - 通过钛金属按钮退出应用程序

> ID：13605653
> 
> 赞同：2
> 
> 时间：2012-11-28T13:00:29.507
> 
> 标签：titanium, titanium-mobile

当我尝试通过单击按钮退出应用程序时，我对钛非常陌生，它再次显示钛闪屏！

我正在使用以下代码

```
var win=Ti.UI.createWindow({
    backgroundColor:'#ddd',
    exitOnClose:true        
});

var button=Ti.UI.createButton({
    title:'back',
    left:10,top:10  
});

button.addEventListener('click',function(e){
    win.close();
});

var text=Ti.UI.createLabel({
    text:'Home page',
    color:'#000',
    font:{ fontSize:20} 
});

win.add(button);
win.add(text);

win.open(); 
```

如何通过单击按钮退出应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T03:17:11.923

您可以通过将以下属性添加到应用程序的第一个窗口来简单地关闭应用程序。

```
 exitOnClose: true 
```

然后在关闭窗口的位置键入以下代码

```
 win.close();
     var activity = Titanium.Android.currentActivity;
     activity.finish(); 
```

参考：[退出 Titanium 应用程序 Android](http://developer.appcelerator.com/question/83911/titaniumappexit-for-android)。希望它能解决你的问题！！

# jquery - 优化 jQuery 中的选择器

> ID：13605660
> 
> 赞同：0
> 
> 时间：2012-11-28T13:01:05.150
> 
> 标签：jquery

我们如何优化这个选择器：

```
$(".testClass div#testID:eq(0)") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:01:59.790

由于只有一个元素可以具有给定的 ID，因此只需执行

```
$("#testID") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:02:01.320

非常优化的版本：

```
$("#testID") 
```

# sql - 如何通过 vb.net 中的 SQL 将“布尔”列添加到 ms-access

> ID：13605663
> 
> 赞同：6
> 
> 时间：2012-11-28T13:01:27.303
> 
> 标签：sql, vb.net, ms-access

我正在尝试`Boolean`使用 SQL 在 ms-access 中的表中添加一列。我正在使用 JET，这是我尝试过的 SQL 查询。

```
Query = "ALTER TABLE tabDatafiveMinutely ADD CON0001 BOOLEAN DEFAULT FALSE"
Query = "ALTER TABLE tabDatafiveMinutely ADD CON0001 BOOLEAN" 
```

我得到的错误是“字段定义中的语法错误”

谢谢你的帮助

编辑：

我现在想设置默认值`null`而不是`false`. 我试过`default null`了，这仍然给我`false`，有人可以帮忙吗？

结果：

一个 ms-access 数据库只能取`true`并且`false`不能为空。因此，我决定使用 and`integer`代替。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T13:30:33.180

列的等效 SQL 类型`Yes/No`是`BIT`

```
ALTER TABLE tabDatafiveMinutely
    ADD COLUMN CON0001 BIT   DEFAULT 0   NOT NULL 
```

[微软的文档](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)说

> **注意**
> DEFAULT 语句只能通过 Jet OLE DB 提供程序和 ADO 执行。如果通过 Access SQL View 用户界面使用，它将返回错误消息。

* * *

正如@Pere 指出的那样，Jet Engine（Access' 查询引擎）不会将 DEFAULT 值应用于现有行。更改表后必须运行 UPDATE 语句。

```
UPDATE tabDatafiveMinutely SET CON0001 = 0 WHERE CON0001 IS NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T13:11:55.987

您应该使用 BIT 数据类型而不是 BOOLEAN。

[访问数据类型。](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms714540%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:20:21.580

我不确定您从哪里阅读语法，但您需要更好的来源。

```
ALTER TABLE tabDatafiveMinutely
ADD COLUMN CON0001 <datatype> 
```

对于布尔类型，我认为您需要从 BIT、INTEGER 或 CHAR(1) 中进行选择。它取决于应用程序。例如，遗留系统经常在 CHAR(1) 列中使用“t”和“f”。

# quickblox - QuickBlox：如何在点对点聊天模块中共享图像/视频？

> ID：13605664
> 
> 赞同：4
> 
> 时间：2012-11-28T13:01:28.473
> 
> 标签：quickblox

我正在尝试在聊天模块中共享图像/视频。我为此参考了[示例](http://quickblox.com/developers/SimpleSample-chat_users-ios)代码，但找不到任何帮助。

Alos 我提到了[http://quickblox.com/modules/chat/它说通过](http://quickblox.com/modules/chat/)**插入我们功能齐全的聊天模块**将实时聊天功能添加到您的应用程序。快速、防火墙友好、强大和安全。这是否意味着我必须购买全功能的聊天模块？

请建议我正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:04:45.237

是的，QuickBlox Chat 允许在 2 个用户之间共享文件、视频/音频。

目前 iOS SDK 不提供发送文件、实时聊天的方法。此功能目前处于 Beta 测试阶段。我们正在为最终用户开发简单的界面，为此我们需要更多时间。我希望，我们将在 12 月底完成它。

但是，我们允许开发人员自己开发此功能。你需要什么？

1.  只需在 2 个用户之间创建简单的 TCP/UDP 套接字并通过它发送文件、音频/视频流
2.  对于**1**，您需要知道彼此的 IP 地址和端口 - 有 STUN 协议允许知道自己的地址（IP 和端口） - 这是我的 STUN 协议的 iOS 实现[https://github.com/soulfly/STUN-iOS](https://github.com/soulfly/STUN-iOS)
3.  如果您已经知道您的地址（IP 和端口） - 只需通过简单的聊天消息将其发送给您的对手 - 然后执行**1**项。

这就是你所需要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T12:32:14.157

你有一个像这样的uploadMethod，

```
-(IBAction)uploadFile:(id)sender
{

    self.imagePicker = [[UIImagePickerController alloc] init];
    self.imagePicker.allowsEditing = NO;
    self.imagePicker.delegate = self;
    self.imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentViewController:self.imagePicker animated:YES completion:nil];
} 
```

在 QBChatDelegate 中，你有这个方法

```
- (void)completedWithResult:(Result*)result{
    // Upload file result
    if(result.success && [result isKindOfClass:[QBCFileUploadTaskResult class]])
    {

        QBCFileUploadTaskResult *res = (QBCFileUploadTaskResult *)result;
        NSUInteger uploadedFileID = res.uploadedBlob.ID;

        QBChatMessage *message = [[QBChatMessage alloc] init];
        message.recipientID = self.opponent.ID;

        NSMutableDictionary *msgDict = [[NSMutableDictionary alloc]init];
        [msgDict setValue:[NSNumber numberWithInt:uploadedFileID] forKey:@"fileID"];
        message.customParameters = msgDict;

        [[QBChat instance] sendMessage:message];

    }
    else
    {
        NSLog(@"errors=%@", result.errors);
    }
} 
```

在这里，您将获取上传的文件 ID，并将其作为消息发送..

在你的 chatDidReceiveNotification

```
- (void)chatDidReceiveMessageNotification:(NSNotification *)notification{
QBChatMessage *message = notification.userInfo[kMessage];

    if(message.customParameters != nil)
    {
        NSUInteger fileID = [message.customParameters[@"fileID"] integerValue];

        // download file by ID
        [QBContent TDownloadFileWithBlobID:fileID delegate:self];
    }
} 
```

此方法再次调用`completedWithResult`方法，在此处添加此代码...

```
if(result.success && [result isKindOfClass:[QBCFileDownloadTaskResult class]]){
        QBCFileDownloadTaskResult *res = (QBCFileDownloadTaskResult *)result;

        if ([res file]) {

                UIImageView* imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithData:[res file]]];
                [self.messages addObject:imageView];

            [self.messagesTableView reloadData];

        }

    }else{
        NSLog(@"errors=%@", result.errors);
    } 
```

如果要在 tableView 中显示图像，请像这样更改 cellForRow ..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if([[self.messages objectAtIndex:indexPath.row]isKindOfClass:[QBChatMessage class]])
    {
        static NSString *ChatMessageCellIdentifier = @"ChatMessageCellIdentifier";

        ChatMessageTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ChatMessageCellIdentifier];
        if(cell == nil){
            cell = [[ChatMessageTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ChatMessageCellIdentifier];
        }

        QBChatMessage *message = (QBChatMessage *)self.messages[indexPath.row];
        //
        [cell configureCellWithMessage:message is1To1Chat:self.opponent != nil];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        return cell;

    }
    else if ([[self.messages objectAtIndex:indexPath.row]isKindOfClass:[UIImageView class]])
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier"];

        if (nil == cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                          reuseIdentifier:@"CellIdentifier"];
        }
        UIImageView *receivedImage = [self.messages objectAtIndex:indexPath.row];
        [cell.contentView addSubview:receivedImage];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        return cell;

    }
} 
```

我已经尝试过了，这段代码有效。干杯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:11:09.953

**更新**：

QuickBlox 为开发人员发布了 VideoChat 和无限 API 调用[http://quickblox.com/blog/2013/02/quickblox-updates-videochat-and-unlimited-api-calls-for-developers](http://quickblox.com/blog/2013/02/quickblox-updates-videochat-and-unlimited-api-calls-for-developers)

因此，如果您想使用代码并将其与您的应用程序集成，请查看适用于 iOS 的简单代码示例[http://quickblox.com/developers/SimpleSample-videochat-ios](http://quickblox.com/developers/SimpleSample-videochat-ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-30T08:46:27.720

如果您的要求只是 1-1 聊天，请查看此链接 [http://quickblox.com/developers/SimpleSample-chat_users-ios#Send_files](http://quickblox.com/developers/SimpleSample-chat_users-ios#Send_files) 这适用于 1-1 聊天。

但是，如果有房间，我现在无法找到任何解决方案。我想弄清楚。如果有人知道方法，请在此处发布。

# php - 如何检测从点击、iframe 或图像 PHP 打开的页面？

> ID：13605665
> 
> 赞同：1
> 
> 时间：2012-11-28T13:01:31.437
> 
> 标签：php, image, iframe, click

关联：

```
<a id="mylink" href="http://mysite.com/traffic_analityc.php">My Link</a> 
```

或图片：

```
<img src="http://mysite.com/traffic_analityc.php" /> 
```

或 iframe ：

```
<iframe src="http://mysite.com/traffic_analityc.php"></iframe> 
```

谢谢之前..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:05:08.550

在每个链接中添加一个`GET`引用，然后在以下位置获取该引用`traffic_analityc.php`：

*链接*：

```
<a id="mylink" href="http://mysite.com/traffic_analityc.php?src=href">My Link</a> 
```

*图片*：

```
<img src="http://mysite.com/traffic_analityc.php?src=img" /> 
```

*框架*：

```
<iframe src="http://mysite.com/traffic_analityc.php?src=iframe"></iframe> 
```

然后在`traffic_analityc.php`：

```
$source = isset($_GET['src']) ? $_GET['src'] : ''; 
```

`$source`当然等于 href、img 或 iframe。

# c# - C# JSON 解析

> ID：13605667
> 
> 赞同：1
> 
> 时间：2012-11-28T13:01:38.067
> 
> 标签：c#, json, parsing

我在解析一些 JSON 数据时遇到问题：

```
{
    "title": "LED SIDE DIRECTION INDICATOR 9-33V CATEGORY 6, 19cm CABLE CHROME BASE  LED AUTO LAMPS",
    "user_price": {
        "inc_tax_value": 34.067,
        "ex_tax_value": 30.97,
        "base_inc_tax": 34.067,
        "base_ex_tax": 30.97,
        "currency_code": "",
        "price_rule": "35"
    },
    "local_quantity": 0,
    "global_quantity": 0,
    "url": "http://ishop2.cooldrive.com.au/products/3102CM",
    "all_warehouse_quantity": 0,
    "description1": "LED SIDE DIRECTION INDICATOR",
    "description2": "9-33V CATEGORY 6, 19cm CABLE",
    "description3": "CHROME BASE  LED AUTO LAMPS",
    "price_per": 1,
    "default_pack_quantity": 1,
    "code": "3102CM"
} 
```

我尝试了许多示例，但无法从此产品信息示例中获取任何数据。这是我想要使用的：

```
string testJson = new HttpHelper().POST("http://ishop2.cooldrive.com.au/api/product", "code=3102CM");
        System.Windows.Forms.Clipboard.SetText(testJson);
        MyJsonClass tester = new System.Web.Script.Serialization.JavaScriptSerializer()
            .Deserialize<MyJsonClass>(@testJson); 
```

文本如上返回，但 testJson 始终为空......

```
private class MyJsonClass
{   
    public IList<IDictionary<string, string>> data { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:08:44.197

这适用于您的 json

```
var dict = new JavaScriptSerializer().Deserialize<Dictionary<string, object>>(testJson);

Console.WriteLine(dict["url"]);

var price = (Dictionary<string, object>)dict["user_price"];
Console.WriteLine(price["inc_tax_value"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:17:25.137

If the fields of the json object are always the same, then you could use strong typed classes instead of dictionaries. The json serializer will serialize correctly to the following classes:

```
private class MyJsonClass
{
    public string title { get; set; }
    public UserPrice user_price { get; set; }
    public int local_quantity { get; set; }
    ...
}

private class UserPrice
{
    public decimal inc_tax_value { get; set; }
    public decimal ex_tax_value { get; set; }
    ...
} 
```

# python - Python unittest：我们可以重复执行单元测试用例可配置的次数吗？

> ID：13605669
> 
> 赞同：5
> 
> 时间：2012-11-28T13:01:41.380
> 
> 标签：python, unit-testing

我们可以重复执行单元测试用例可配置的次数吗？

例如，我有一个名为的单元测试脚本`Test_MyHardware`，其中包含几个测试用例`test_customHardware1`和`test_customHardware2`.

有没有办法用 Python 的 unittest 模块重复执行`test_customHardware1`200 次和500 次？`test_customHardware2`

**注意**：上述案例是简化的。实际上，我们将有 1000 个测试用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:21:09.720

虽然[unittest 模块](http://docs.python.org/2/library/unittest.html)对此没有任何选择，但有几种方法可以实现这一点：

*   您可以（ab）使用[timeit 模块](http://docs.python.org/2/library/timeit.html)重复调用测试方法。请记住：测试方法就像普通方法一样，您可以自己调用它们。不需要特殊的魔法。
*   您可以使用[装饰器](http://docs.python.org/2/reference/compound_stmts.html#function)来实现此目的：

    ```
    #!/usr/bin/env python

    import unittest

    def repeat(times):
        def repeatHelper(f):
            def callHelper(*args):
                for i in range(0, times):
                    f(*args)

            return callHelper

        return repeatHelper

    class SomeTests(unittest.TestCase):
        @repeat(10)
        def test_me(self):
            print "You will see me 10 times"

    if __name__ == '__main__':
        unittest.main() 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-20T09:54:32.860

`unittest.main()`更好的选择是多次调用`exit=False`. 此示例将重复次数作为参数并调用`unittest.main`该次数：

```
parser = argparse.ArgumentParser()
parser.add_argument("-r", "--repeat", dest="repeat", help="repeat tests")
(args, unitargs) = parser.parse_known_args()
unitargs.insert(0, "placeholder") # unittest ignores first arg
# add more arguments to unitargs here
repeat = vars(args)["repeat"]
if repeat == None:
    repeat = 1
else:
    repeat = int(repeat)
for iteration in range(repeat):
    wasSuccessful = unittest.main(exit=False, argv=unitargs).result.wasSuccessful()
    if not wasSuccessful:
        sys.exit(1) 
```

这允许更大的灵活性，因为它将运行用户请求指定次数的所有测试。

您需要导入：

```
import unittest
import argparse 
```

# android - 在 android imageview 中更改图像 1 秒

> ID：13605670
> 
> 赞同：1
> 
> 时间：2012-11-28T13:01:42.530
> 
> 标签：android, android-imageview

我试图在 1 秒后更改图像以查看图像。但它没有在屏幕上显示任何图像。以下是代码。请帮助。谢谢。

代码-

```
public class Shapes extends Activity {

     Timer timer = new Timer();
     int flag;
     String images[]={};
     ImageView iv;
     static int v[]={R.drawable.round,R.drawable.rectangle};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shapes);
         iv=(ImageView) findViewById(R.id.imageView1);

         timer.schedule(new TimerTask() {

             public void run() {
                 runOnUiThread(new Runnable() {

                     public void run() {

                        if (flag > 1) {
                             timer.cancel();
                             timer = null;
                         } else
                             iv.setImageResource(v[flag++]);

                     }
                 });

             }
         }, System.currentTimeMillis(), 1000);

    }
} 
```

我如何检查资源图像并更改它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:07:55.990

使用 Handler 而不是 Timer

```
Handler handler = new Handler();

Runnable changeImage = new Runnable(){

    @Override
    public void run(){
        if(flag>1)
           handler.removeCallbacks(changeImage);
        else{
           iv.setImageResource(v[flag++]);
           handler.postDelayed(changeImage, 1000);
        }
    }

}; 
```

第一次从 oncreate() 开始

```
public void onCreate(Bundle b){

    handler.postDelayed(changeImage, 1000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:13:00.527

```
timer.scheduleAtFixedRate(new TimerTask() {

     public void run() {
             runOnUiThread(new Runnable() {

                 public void run() {
                     flag++;
                      if (flag > 1) {
                          timer.cancel();
                          timer = null;
                      } 
                      else
                          iv.setImageResource(v[flag]);
                     }
                 });

             }
         }, 1000, 1000); // wait 1 second before start.. then repeat every second.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:07:11.020

这是因为您将 System.currentTimeMillis() 作为延迟。尝试将其替换为 0，因为时间应在 0 毫秒后开始。

# c# - ANTLR 删除树上的节点

> ID：13605675
> 
> 赞同：2
> 
> 时间：2012-11-28T13:01:52.787
> 
> 标签：c#, parsing, tree, antlr, abstract-syntax-tree

我在 ANTLR 邮件列表档案中问过这个问题，但没有得到回复，所以我会在这里尝试。

在树遍历期间删除节点/树是否有问题？我想找到任何特定的子树并摆脱它们。我以为这条规则会起作用...

```
attribute  : ^(ATTRIBUTE ID ATTR_VALUE) -> ; 
```

但我得到一个 NullPointerException。

此外，您能否编写通用规则来匹配具有一系列根标记的树？

```
tree : : ^(root attribute+ children+=.*) -> ^(root $children*);

fragment root : A | B; 
```

我似乎一直在收到 EmptyRewriteExceptions :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:09:38.457

> 在树遍历期间删除节点/树是否有问题？

在某些情况下，这*可能*会出错。例如，每当`attribute`（您刚刚重写以被删除）成为其他树的根时。可能还有其他原因，但这是其中之一。何时`attribute`将永远是树上的领先者，我认为它不会造成任何伤害。如果这不能回答您的问题，请考虑发布[SSCCE](http://sscce.org)（请务必发布实际的 SSCCE！）。

> 此外，您能否编写通用规则来匹配具有一系列根标记的树？

不，操作员`+=`创建了一个`List`s `Common[Token/Tree]`。您需要将 移至`.*`另一个规则，如下所示（未经测试！）：

```
tree : ^(root attribute+ children) -> ^(root children);

children : .* ; 
```

# jsp - 在会话范围内设置按钮值

> ID：13605677
> 
> 赞同：2
> 
> 时间：2012-11-28T13:01:58.677
> 
> 标签：jsp

我正在尝试在会话范围内设置值，但未设置请发现问题异常即将到来：

`<%String name=request.getParameter("name");%><% if(request.getParameter("name").equals(name)){session.setAttribute("EmployeeById",name);}%>`

在这里您可以找到实际上我想在会话中设置按钮值的代码，并且我正在使用其他 jsp。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
         pageEncoding="ISO-8859-1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt" %>
<%@ taglib prefix="sql" uri="http://java.sun.com/jstl/sql" %>
<%@ taglib prefix="x" uri="http://java.sun.com/jstl/xml" %>

<html>
<head>
    <script type="text/javascript">
        function popuponclick() {
            var mywindow = window.open("file.jsp", "file", "status=1,width=350,height=150");
        }
    </script>
</head>
<body>
<form name="form1">
    <%String name = request.getParameter("name");%>

    <% if (request.getParameter("name").equals(name)) {
        session.setAttribute("EmployeeById", name);
    }
    %>
    <table>
        <tr>
            <td><input type="submit" onclick="popuponclick()" value="GetEmployeeById" name="name"/>
                <input type="hidden" name="GetEmp" value="1"></td>
        </tr>

        <tr>
            <td><input type="submit" onclick="popuponclick()" value="GetEmployeeByname" name="name1"></td>
        </tr>
    </table>
</form>
</body>
</html> 
```

我的第二个 .jsp 就是我通过会话范围获取值的地方

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="sql" uri="http://java.sun.com/jstl/sql"%>
<%@ taglib prefix="x" uri="http://java.sun.com/jstl/xml"%>
<%@page
    import="com.nousinfo.tutorial.employee.service.model.bo.EmployeeBO"%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

</head>
<%
    String attributeValue = (String)session.getAttribute("EmployeeById");
out.println(attributeValue);
%>
<body>

<% if ("GetEmployeeById".equals(attributeValue)) { %>
<div>
<table>
<tr>
<td>GetEmployeeByName</td>
</tr>
<tr>
<td><input type="text" name="GetEmployeeByName"/></td></tr>
</table>
</div>
<% } else { %>
<div>
<table>
<tr>
<td>GetEmployeeById</td>
</tr>
<tr>
<td><input type="text" name="GetEmployeeById"/></td></tr>
</table>
</div>
<% } %>
<table>

            <tr>
                <td><input type="submit" name="submit" value="find"></td>
            </tr>
        </table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:30:00.900

第一件事：

您是否知道即使您没有收到异常，此代码也没有任何意义？您正在获取 name 参数，然后再次获取它并使用相同的值进行检查。这种情况将永远存在`true`。

第二件事：

代码如下：

```
String name = request.getParameter("name");
session.setAttribute("EmployeeById", name); 
```

应该在 servlet 中使用，而不是在 JSP 页面中。在 JSP 页面中，您可以使用[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)从请求、会话或应用程序范围中获取值。

例如：

```
${requestScope['name']} 
```

这是在 JSP 页面中获取请求属性的正确方法。

您得到的原因`NPE`是因为该请求在您的 JSP 页面中尚不可用，但它确实存在`null`。首先，您需要检查请求是否不是`null`，如果不是，则对其进行处理。

检查[SO Servlets Wiki](https://stackoverflow.com/tags/servlets/info)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:10:28.697

试试这个 <%! 字符串名称=request.getParameter("name");%>

# html - 强制 div 内容在一行上

> ID：13605684
> 
> 赞同：2
> 
> 时间：2012-11-28T13:02:17.340
> 
> 标签：html, css

我在这里寻找解决方案，但是当我尝试时，它没有用。我希望字母在一行上。请忽略我对内联元素的使用：

```
<div style="width: 100%; overflow: hidden; whitespace: nowrap;">
A 
B 
C 
D
E
F
G
H
I
J
K
L
M
N
O
P
Q
R
S
T
U
V
W
X
Y
Z
</div> 
```

如何将所有字母放在一行中？

编辑：这是网站：http: [//goo.gl/tef6u](http://goo.gl/tef6u)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:16:29.387

在您的网站上，您有`whitespace`它的本意`white-space`。

[http://jsfiddle.net/Kyle_Sevenoaks/RUe6x/](http://jsfiddle.net/Kyle_Sevenoaks/RUe6x/)

此外，在每个字母之间都有一个`<br>`换行符，唯一的反击方法是删除它们或添加

```
br
{
    display: none;
} 
```

如果您无法更改 HTML，则添加到您的 CSS。

[http://jsfiddle.net/Kyle_Sevenoaks/RUe6x/1/](http://jsfiddle.net/Kyle_Sevenoaks/RUe6x/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:14:55.473

在您所指的网站上，`<br/>`每个字母后面都有一个。`<br/>`表示“中断”，仅用于跳到下一行。所以你所要做的就是删除这些标签，你会做得很好。如果您不知道标签的用途，则不要使用标签；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T13:16:33.840

请检查以下链接，

这里所有字母都在一条水平线上，带有`width: 100%;` [http://jsfiddle.net/QN68Q/5/](http://jsfiddle.net/QN68Q/5/)

要在一条垂直线上设置字母，您可以获得以下链接设置`width: 1%;` [http://jsfiddle.net/QN68Q/4/](http://jsfiddle.net/QN68Q/4/)

# php - 如何在使用 php microtime() 作为开始时间和提交时间的网站中击败计时功能？

> ID：13605685
> 
> 赞同：-2
> 
> 时间：2012-11-28T13:02:19.847
> 
> 标签：php, javascript, html, web-services, firefox

我正在使用一个有时间限制的在线问答游戏，当我询问问题集时，他们会回答问题，并且 html 源中存在“start_time”输入（可能他们使用 php 的 microtime() 发送）。当我提交表单（即问题）时，他们可能会使用提交的 start_time 并将其与服务器当前的微时间进行比较，然后使用持续时间来确定我的回答速度。

有什么办法可以打败那个时机吗？

他们不使用任何 cookie，当我用我的 id（在文本框中）请求问题时，他们会发送带有我的 id 和 start_time 嵌入在 html 中的问题。因此，我认为可以在提交时将 start_time 调整为接近当前时间？但是我如何计算最接近的服务器 current_time 呢？任何提示都可以，尽管详细的说明会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:12:35.067

假设您具有微时间的价值。（在源代码 html 上搜索）您需要在本地运行 php 和 apache。

所以你可以试试：

```
 list($microSec, $timeStamp) = explode(" ", 'microtime value you geted on code');
 echo date('F jS, Y, H:i:', $timeStamp) . (date('s', $timeStamp) + $microSec); //here the actual date from server. 
```

根据您来自服务器的实际日期，您可以：

```
echo microtime('the date you want inject on code'); //date format Y-m-d 
```

现在您可以使用某种“萤火虫”来运行 javascript/jquery 来更改隐藏值。

```
jQuery('#input_hidden_id').val('here the value you get on php code'); 
```

请记住，此代码尚未经过测试。

编辑：我无意伤害某人或某些代码或某些系统完整性，但我很乐意“打破”客户端的一些安全问题。就像“等待更多 12938721 秒下载”只是“无辜”的事情。如果您使用此代码建议来不利于您的风险，我不建议您这样做。在做一些愚蠢的事情之前想想其他人。

# php - 带字符串的 PHP 数组标称索引

> ID：13605688
> 
> 赞同：0
> 
> 时间：2012-11-28T13:02:27.077
> 
> 标签：php, arrays

我有一个输入 CSV 的 PHP 应用程序；在第一列中，我将类别和子类别都用“|”分隔。我必须将这些东西放在 Open Cart DB 中，该数据库具有相同的类别和子类别表（“parent_id”列表示类别的 category_id）。我想构建一个包含所有所需字段的类，如下所示：

```
class Categorie {
    public $category_id;
    public $parent_id;
    public $image;
    public $top;
    public $column;
    public $sort_order;
    public $status;
    public $date_modified;
    public $date_added;
    public $language_id;
    public $name;
    public $description;
    public $meta_description;
    public $meta_keywords;
} 
```

然后我分析数据：

```
$categorie = array();
while ( ( $riga_file = fgetcsv( $file, 100000, "\t" ) ) !== false )
{
     $array_el = count( $riga_file );
     for( $el_cur = 0; $el_cur < $array_el; $el_cur++ )
     {
         switch ( $el_cur )
         {
             case 0:
             $colonne = explode( "|", $riga_file[$el_corr] );
             $categoria = new Categorie();
             $categoria->image = "";
             $categoria->top = 1;
             $categoria->column = 1;
             // ... bla adding description data
             if( $categorie[$colonne[0]] == NULL ) // (1)
             {
                 $categoria->name = $colonne[0];
                 $categoria->category_id = $id_categoria;
                 $categoria->parent_id = 0;
                 $categorie[$colonne[0]] = $categoria;
                 $id_categoria++;
             }
             if( $colonne[1] != NULL ) // (2)
             {
                 $categoria->name = $colonne[1];
                 if( $categorie[$colonne[1]] == NULL )
                 {
                     $categoria->category_id = $id_categoria;
                     $categoria->parent_id = $categorie[$colonne[0]]->category_id;
                     $categorie[$colonne[1]] = $categorie;
                     $id_categoria++;
                 }
             }
             break;
         } 
```

我应该有一个数组，其中包含一组独特的对象，例如：

```
 // OUT(3)
  Category 1
  Subcategory 1
  Category 2
  Subcategory 2... 
```

如果我将 $categoria（不是 $categorie）的回声放在 (1) 和 (2) 中，我会准确地看到我在 OUT(3) 中写下的内容，这让我认为我的“引擎”是正确的。当我尝试搜索数组时出现问题：

```
echo "<table border='1'>";
            foreach( $categorie as $value )
            {
                echo "<tr>
                           <td>$value->category_id</td>
                           <td>$value->parent_id</td>
                           <td>$value->name</td>
                      </tr>";
            }
            echo "</table>"; 
```

因为我根本没有得到类别，而且大多数但不是所有的子类别。我是在“搜索引擎”上做错了什么，还是对 PHP 数组有误解（可能是因为我来自 C++，而这个 php 让我大吃一惊）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:02:43.347

我解决了问题，或者更好：问题。

1）我拼错了一个变量：在（2）中我写道：

```
$categorie[$colonne[1]] = $categorie; 
```

正确的写法是：

```
$categorie[$colonne[1]] = $categoria; 
```

2）更大的问题来自我对 PHP 的“不了解”，事实上，解决了问题 1，我得到了如下输出：

```
subcategory1
subcategory1
subcategory2
subcategory2 
```

等等。这让我猜测当我这样做时：

```
$categorie[$colonne[1]] = $categoria; 
```

PHP 不会复制里面的值，而是使用地址。遵循正确的代码：

```
switch ( $el_corr )
                    {
                        case 0:                                                 // Categorie e sottocategorie
                            $colonne = explode( "|", $riga_file[$el_corr] );
                            $categoria = new Categorie();
                            $categoria->image = "";
                            $categoria->top = 1;
                            $categoria->column = 1;
                            $categoria->sort_order = 0;
                            $categoria->status = 1;
                            // Category_Description Campi
                            $categoria->language_id = 1;
                            $categoria->name = $colonne[0];
                            $categoria->description = "";
                            $categoria->meta_description = "";
                            $categoria->meta_keywords = "";
                            ////////////////////////
                            if( $categorie[$colonne[0]] == NULL )
                            //if( !trova_categorie( $colonne[0], $categorie ) )
                            {
                                $categoria->name = $colonne[0];
                                $categoria->category_id = $id_categoria;
                                $categoria->parent_id = 0;
                                $categorie[$colonne[0]] = $categoria;
                                $id_categoria++;
                            }
                            $categoria = new Categorie();
                            $categoria->image = "";
                            $categoria->top = 1;
                            $categoria->column = 1;
                            $categoria->sort_order = 0;
                            $categoria->status = 1;
                            // Category_Description Campi
                            $categoria->language_id = 1;
                            $categoria->name = $colonne[0];
                            $categoria->description = "";
                            $categoria->meta_description = "";
                            $categoria->meta_keywords = "";
                            if( $colonne[1] != NULL )
                            {
                                $categoria->name = $colonne[1];
                                if( $categorie[$colonne[1]] == NULL )
                                //if( !trova_categorie( $colonne[1], $categorie ) )
                                {
                                    $categoria->category_id = $id_categoria;
                                    $categoria->parent_id = $categorie[$colonne[0]]->category_id;
                                    $categorie[$colonne[1]] = $categoria;
                                    $id_categoria++;
                                }
                            }
                            break;
                    } 
```

# jquery - 如何使 bxslider goToSlide 函数没有动画 - 只是跳转/出现在幻灯片上？

> ID：13605690
> 
> 赞同：2
> 
> 时间：2012-11-28T13:02:32.363
> 
> 标签：jquery, bxslider

我正在使用 bxslider，就滑块而言，这是一个非常棒的 jquery 滑块插件。

[http://bxslider.com/](http://bxslider.com/)

我使用该`goToSlide();`功能。

```
bxslider.goToSlide(slide); 
```

我正试图`goToSlide`跳到幻灯片 - 而不是动画。

有人可以帮忙吗？我做了一个小提琴...

[http://jsfiddle.net/dHxAJ/1/](http://jsfiddle.net/dHxAJ/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T19:20:08.913

只需覆盖 css 转换即可解决此问题

完整答案在这里 [如何移动到下一张没有 BxSlider 动画的幻灯片？](https://stackoverflow.com/questions/14179654/how-to-move-to-the-next-slide-without-animation-for-bxslider/20428940#20428940)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T17:42:28.643

有一种更简单的方法可以在没有动画的情况下跳转到幻灯片：

```
$('.slidejump-2').on('click', function(e) {
  slider.reloadSlider({
    startSlide:1,
  });
}); 
```

或者对于您的示例：

```
JumpToSlide = function (slideNumber) {

        var slide = slideNumber - 1;

        bxslider.reloadSlider({
          startSlide:slide,
          pager: false,
            auto: false
        });

    }; 
```

这会重新加载滑块并将开始帧设置为您选择的任何内容。分叉的小提琴在[这里](http://jsfiddle.net/richbruce/2audvybc/1/)

# c# - 相关实体的休眠合并

> ID：13605691
> 
> 赞同：0
> 
> 时间：2012-11-28T13:02:37.763
> 
> 标签：c#, nhibernate, merge

我有一个 User 对象，它有一个与之关联的 UserProfile 对象，每个对象都有自己的数据库表。我已经使用双向映射将休眠映射设置为级联操作，这样我就可以在 User 对象上调用 Save ，它将自动创建用户配置文件对象，在单个操作中插入键列中生成的 UserId . 这工作正常。Hibernate映射如下

```
<class name="User" table="[User]">
    <id name="UserId" unsaved-value="0">
      <generator class="identity" />
    </id>
    <property name="FirstName" />
    <property name="LastName" />
    <property name="EmailAddress" />
    <property name="DateOfBirth" />
    <property name="Gender" />
    <property name="PostcodePartOne" />
    <property name="PostcodePartTwo" />
    <many-to-one name="UserLocation" column="UserLocationId" />
    <property name="DateJoined" />
    <property name="LastLoggedOn" />
    <property name="Status"/>
    <property name="StatusNotes" />
    <one-to-one name="Profile" class="UserProfile" cascade="all" />
  </class>

<class name="UserProfile" table="UserProfile">
    <id name="UserProfileId" column="UserId">
      <generator class="foreign">
        <param name="property">User</param>
      </generator>
    </id>
    <one-to-one name="User" class="User" constrained="true" />
    <property name="Height" />
    <many-to-one name="BodyType" column="BodyTypeId" />
    <many-to-one name="Ethnicity" column="EthnicityId" />
    <many-to-one name="MaritalStatus" column="MaritalStatusId"/>
    <property name="NumberOfChildren" />
    <many-to-one name="WantsChildren" column="WantsChildrenId" />
    <many-to-one name="Religion" column="ReligionId" />
    <many-to-one name="Drinking" column="DrinkingId" />
    <many-to-one name="Smoking" column="SmokingId" />
    <many-to-one name="Diet" column="DietId" />
    <many-to-one name="Education" column="EducationId" />
    <many-to-one name="Socialising" column="SocialisingId" />
    <many-to-one name="Travelling" column="TravellingId" />
    <many-to-one name="Romance" column="RomanceId" />
    <many-to-one name="SexualOpenness" column="SexualOpennessId" />
    <many-to-one name="SexualFrequency" column="SexualFrequencyId" />
    <many-to-one name="SharedInterests" column="SharedInterestsId" />
    <many-to-one name="TimeWithPartner" column="TimeWithPartnerId" />
    <many-to-one name="Ambition" column="AmbitionId" />
    <many-to-one name="Emigrating" column="EmigratingId" />
    <many-to-one name="FamilyInvolvement" column="FamilyInvolvementId" />
    <property name="LastUpdated" />
    <one-to-one name="ProfileText" class="UserProfileText" cascade="all" />
  </class> 
```

当我尝试进行分离更新时不起作用。我创建了一个新的 User 和 UserProfile 对象，将它们与彼此的引用链接起来，就像我在保存时所做的那样，然后将 User.UserId 分配给我要更新的已保存用户 ID。然后我调用 session.merge(user) 但得到以下错误

```
 Message "Error updating item of type 'User':a different object with the same identifier value was already associated with the session: 153, of entity: UserProfile" string 
```

这是否告诉我它很乐意合并用户对象但由于某种原因无法合并用户配置文件？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:45:06.620

认为我发现了问题。我正在将 UserProfiles“用户”属性引用设置为父用户对象，但我没有将它的“用户 ID”属性设置为 PK，所以它认为它属于父用户，但它的用户 ID 仍然为零标识符。在 Profile 对象上设置 UserId 以及 User 对象有效

# c - 到 Haskell 的 C 代码

> ID：13605700
> 
> 赞同：2
> 
> 时间：2012-11-28T13:03:08.117
> 
> 标签：c, haskell, code-translation

所以，我想将一部分 C 代码转换为 Haskell。我用 C 编写了这部分（这是我想做的一个简化示例），但是作为 Haskell 的新手，我无法真正让它工作。

```
float g(int n, float a, float p, float s)
{
    int c;
    while (n>0)
    {
        c = n % 2;
        if (!c) s += p;
        else s -= p;
        p *= a;
        n--;
    }
    return s;
} 
```

有人有任何想法/解决方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T15:39:22.297

[Lee 的翻译](https://stackoverflow.com/a/13605938/1011995)已经很不错了（好吧，他混淆了奇偶案例^(（1）)），但他陷入了几个性能陷阱。

```
g n a p s =
  if n > 0
  then
    let c = n `mod` 2
        s' = (if c == 0 then (-) else (+)) s p
        p' = p * a
    in g (n-1) a p' s'        
  else s 
```

1.  他`mod`用`rem`. 后者映射到机器划分，前者执行额外的检查以确保非负结果。因此`mod`比 , 慢一点`rem`，如果其中一个满足需求 - 因为它们在两个参数都是非负的情况下产生相同的结果；或者因为结果仅与 0 进行比较（这里两个条件都满足） -`rem`是可取的。更好，而且更惯用的是使用`even`（`rem`出于上述原因而使用）。不过，差异并不大。

2.  没有类型签名。这意味着代码是（类型类）多态的，因此不可能进行严格分析，也不可能进行任何专业化。如果代码在特定类型的同一模块中使用，GHC 可以（并且通常会，如果启用优化）为该特定类型创建一个专用版本，允许严格分析和一些其他优化（内联类方法`(+)`等） )，在这种情况下，一个人不会支付多态惩罚。但是，如果使用站点位于不同的模块中，则不会发生这种情况。如果需要（类型类）多态代码，则应标记它`INLINABLE`或`INLINE`（对于 GHC < 7），以便其展开在`.hi`文件中公开，并且可以在使用现场对功能进行专门化和优化。

    由于`g`是递归的，所以不能内联[意思是GHC不能内联；原则上这是可能的]在使用现场，这通常会比单纯的专业化实现更多的优化。

    一种通常可以更好地优化递归函数的技术是工人/包装器转换。一个人创建一个调用递归（本地）工作者的包装器，然后可以内联非递归包装器，并且当使用已知参数调用工作者时，这可以实现进一步的优化，如常量折叠，或者在函数参数的情况下，内联。特别是后者通常会产生巨大的影响，当与静态参数转换结合使用时（递归调用中从不改变的参数不会作为参数传递给递归工作者）。

    在这种情况下，我们只有一个类型的静态参数`Float`，因此带有 SAT 的工人/包装器转换通常没有区别（根据经验，SAT 在

    *   静态参数是一个函数
    *   几个非函数参数是静态的

    所以根据这条规则，我们不应该期望 w/w + SAT 有任何好处，一般来说，没有）。这里我们有*一个*特殊情况，其中 w/w + SAT 可以产生很大的不同，那就是当因子`a`为 1 时。GHC`{-# RULES #-}`可以消除各种类型的乘法 1，并且使用如此短的循环体，乘法更多或每次迭代减少会有所不同，在应用第 3 点和第 4 点后，运行时间减少了约 40%。（没有`RULES`乘以 0 或`-1`浮点类型，因为NaN 不适用。）对于所有其他，w/w + `0*x = 0`SATed`(-1)*x = -x``a`

    ```
    {-# INLINABLE g #-}
    g n a p s = worker n p s
      where
        worker n p s
          | n <= 0    = s
          | otherwise = let s' = if even n then s + p else s - p
                        in worker (n-1) a (p*a) s' 
    ```

    与执行相同优化的顶级递归版本没有明显不同。

3.  严格。GHC 的严格度分析器不错，但并不完美。它无法通过算法看到足够远的距离来确定函数是

    *   严格的`p`if `n >= 1` （假设加法 - `(+)`- 在两个参数中都是严格的）
    *   `a`if也很严格`n >= 2`（假设`(*)`两个参数都严格）

    然后产生一个对两者都严格的工人。相反，您会得到一个使用 unboxed `Int#`for`n`和 unboxed `Float#`for的工人`s`（我在`Int -> Float -> Float -> Float -> Float`这里使用的类型，对应于 C），以及 boxed `Float`s for `a`and `p`。因此，在每次迭代中，您都会获得两次拆箱和一次重新装箱。这（相对）花费了大量时间，因为除此之外它只是一些简单的算术和测试。帮助 GHC 一点，并使工作人员（或`g`本身，如果你不进行工作人员/包装器转换）严格`p`（例如爆炸模式）。这足以让 GHC 在整个过程中使用未装箱的值来生产工人。

4.  使用除法来测试奇偶校验（如果类型是`Int`并且使用了 LLVM 后端，则不适用）。

    GHC 的优化器还没有深入到低级位，因此本机代码生成器发出除法指令

    ```
    x `rem` 2 == 0 
    ```

    而且，当循环体的其余部分和这里一样便宜时，这会花费很多时间。LLVM 的优化器已经被教导用 type 的位掩码替换它`Int`，因此`ghc -O2 -fllvm`您无需手动执行此操作。使用本机代码生成器，将其替换为

    ```
    x .&. 1 == 0 
    ```

    （`import Data.Bits`当然需要）产生显着的加速（在普通平台上，按位比除法快得多）。

最终结果

```
{-# INLINABLE g #-}
g n a p s = worker n p s
  where
    worker k !ap acc
        | k > 0 = worker (k-1) (ap*a) (if k .&. (1 :: Int) == 0 then acc + ap else acc - ap)
        | otherwise = acc 
```

执行与 的结果没有明显不同（对于测试值）`gcc -O3 -msse2 loop.c`，除了`a = -1`，其中 gcc 用否定替换乘法（假设所有 NaN 等效）。

* * *

^((1))他并不孤单，

```
c = n % 2;
if (!c) s += p;
else s -= p; 
```

似乎真的很棘手，据我所知，*每个人*^(（2）)都错了。

^((2))除了一个例外;)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T13:29:20.230

作为第一步，让我们简化您的代码：

```
float g(int n, float a, float p, float s) {
    if (n <= 0) return s;

    float s2 = n % 2 == 0 ? s + p : s - p;
    return g(n - 1, a, a*p, s2)
} 
```

我们已将您的原始函数转换为具有特定结构的递归函数。这是一个序列！我们可以方便地将其转换为 Haskell：

```
gs :: Bool -> Float -> Float -> Float -> [Float]
gs nb a p s = s : gs (not nb) a (a*p) (if nb then s - p else s + p) 
```

最后我们只需要索引这个列表：

```
g :: Integer -> Float -> Float -> Float -> Float
g n a p s = gs (even n) a p s !! (n - 1) 
```

该代码未经测试，但应该可以工作。如果不是，那可能只是一个错误的错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T14:56:32.497

这是我在 Haskell 中解决这个问题的方法。首先，我观察到这里有几个循环合并为一个：我们是

1.  形成一个几何序列（其因子是 p 的适当负数）
2.  取序列的前缀
3.  对结果求和

因此，我的解决方案也遵循这种结构，并带有一点点`s`并`p`投入了很好的措施，因为这就是您的代码所做的。在从头开始的版本中，我可能会完全放弃这两个参数。

```
g n a p s = sum (s : take n (iterate (*(-a)) start)) where
    start | odd n     = -p
          | otherwise = p 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-28T13:16:21.260

一个相当直接的翻译是：

```
g n a p s =
  if n > 0
  then
    let c = n `mod` 2
        s' = (if c == 0 then (-) else (+)) s p
        p' = p * a
    in g (n-1) a p' s'        
  else s 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-28T15:28:42.670

查看`g`函数的签名（*即，* `float g (int n, float a, float p, float s)`）你知道你的 Haskell 函数将接收 4 个元素并返回一个浮点数，因此：

```
g :: Integer -> Float -> Float -> Float -> Float 
```

现在让我们看看循环，我们看到这`n > 0`是停止情况，并且`n--;`将是递归调用中使用的递减步骤。所以：

```
g :: Integer -> Float -> Float -> Float -> Float
g n a p s | n <= 0 = s 
```

to ，你在循环中`n > 0`有另一个条件。`if (!(n % 2)) s += p;` `else s -= p;`如果`n`是奇怪的比你会做`s += p`，`p *= a`和`n--`。在 Haskell 中，它将是：

```
g :: Integer -> Float -> Float -> Float -> Float
g n a p s | n <= 0 = s
          | odd n = g (n-1) a (p*a) (s+p) 
```

If `n`is even than you will do `s-=p`, `p*=a;`and `n--`. 因此：

```
g :: Integer -> Float -> Float -> Float -> Float
g n a p s | n <= 0 = s
          | odd n = g (n-1) a (p*a) (s+p)
          | otherwise = g (n-1) a (p*a) (s-p) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-29T10:48:30.670

您可以使用 Haskell Prelude 函数几乎自然地对循环进行编码[`until :: (a -> Bool) -> (a -> a) -> a -> a`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:until)：

```
g :: Int -> Float -> Float -> Float -> Float
g n a p s = 
  fst.snd $ 
    until ((<= 0).fst) 
          (\(n,(!s,!p)) -> (n-1, (if even n then s+p else s-p, p*a)))
          (n,(s,p)) 
```

bang 模式`!s`和`!p`标记严格计算的中间变量，以防止过度懒惰，否则会损害效率。

`until pred step start`重复应用该`step`函数，直到`pred`使用最后生成的值调用将保持，从初始值开始`start`。它可以用伪代码表示：

```
def until (pred, step, start):             // well, actually,
  while( true ):                         def until (pred, step, start): 
    if pred(start): return(start)          if pred(start): return(start)
    start := step(start)                   call until(pred, step, step(start)) 
```

* * *

在存在[尾调用优化](http://en.wikipedia.org/wiki/Tail_call)的情况下，第一个伪代码等效于第二个伪代码（实际上是如何`until`实现[的](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-Base.html#until)） ，这就是为什么在存在 TCO 的许多函数式语言中，循环是通过递归编码的。

所以在 Haskell 中，`until`编码为

```
until p f x  | p x       = x
             | otherwise = until p f (f x) 
```

但它可能有不同的编码，明确的中期结果：

```
until p f x = last $ go x     -- or, last (go x)
  where go x | p x       = [x]
             | otherwise = x : go (f x) 
```

使用 Haskell 标准的高阶函数[`break`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:break)，[`iterate`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:iterate)这可以写成流处理代码，

```
until p f x = let (_,(r:_)) = break p (iterate f x) in r
                       -- or: span (not.p) .... 
```

要不就

```
until p f x = head $ dropWhile (not.p) $ iterate f x    -- or, equivalently,
           -- head . dropWhile (not.p) . iterate f $ x 
```

如果给定的 Haskell 实现中不存在 TCO，则将使用最后一个版本。

* * *

希望这可以更清楚地说明[Daniel Wagner 的答案](https://stackoverflow.com/a/13607971/849891)中的流处理代码是如何产生的，

```
g n a p s = s + (sum . take n . iterate (*(-a)) $ if odd n then (-p) else p) 
```

因为所涉及的谓词是关于从`n`, 和

```
fst . snd . head . dropWhile ((> 0).fst) $
  iterate (\(n,(!s,!p)) -> (n-1, (if even n then s+p else s-p, p*a)))
          (n,(s,p))
===
fst . snd . head . dropWhile ((> 0).fst) $
  iterate (\(n,(!s,!p)) -> (n-1, (s+p, p*(-a))))
          (n,(s, if odd n then (-p) else p))          -- 0 is even
===
fst . (!! n) $
  iterate (\(!s,!p) -> (s+p, p*(-a)))
          (s, if odd n then (-p) else p)    
===
foldl' (+) s . take n . iterate (*(-a)) $ if odd n then (-p) else p 
```

在[纯](http://en.wikipedia.org/wiki/Purely_functional) [FP](http://en.wikipedia.org/wiki/Functional_programming)中，流处理范式使计算的所有历史都可用，作为值的流（列表）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-30T03:12:14.150

扩展@Landei 和@MathematicalOrchid 在问题下方的评论：解决手头问题的算法总是O(n)。但是，如果您意识到您实际上是在计算[几何级数](http://en.wikipedia.org/wiki/Geometric_series)的部分总和，则可以使用著名的求和公式：

```
g n a p s = s + (-1)**n * p * ((-a)**n-1) / (-a-1) 
```

这将更快，因为通过[重复平方](http://en.wikipedia.org/wiki/Repeated_squaring)或[其他聪明的方法](http://en.wikipedia.org/wiki/Addition-chain_exponentiation)可以比 O(n) 更快地完成幂运算，现代编译器可能会自动将其用于整数幂。

# scala - 在 scala 中管理自定义表达式的最佳方法

> ID：13605704
> 
> 赞同：0
> 
> 时间：2012-11-28T13:03:21.263
> 
> 标签：scala, null, operators, overloading, abstract-syntax-tree

我正在为自定义无类型表达式创建一个新的抽象语法树，我想在其上重新定义 == 运算符，如下所示：

```
trait Expression {
  def ==(other: Expression): Expression = Equality(this, other)
  def !=(other: Expression): Expression = Inequality(this, other)
}
case class Equality(e1: Expression, e2: Expression) extends Expression
case class Inequality(e1: Expression, e2: Expression) extends Expression
case class Integer(e: Int) extends Expression
case class Boolean(e: Boolean) extends Expression 
```

我现在遇到的唯一问题是测试这种表达式的无效性。例如，当我写这个时：

```
val formula: Expression = someFunctionReturingAnExpression
if(formula != null) {
  ... use the formula.
} 
```

它抛出一个`java.lang.NullPointerException`，因为它正在将该方法`!=`应用于`formula`.

关于如何具有可表达性`!=`以及空检查的任何好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:23:16.933

您在那里重载了`==`,`!=`运算符。您显示的代码并没有真正为我编译，因为它无法在 if 子句中将 Expression 转换为 Boolean。因此，您可以在那里对 null 使用向下转换，以便编译器使用`==`操作符 from `Any`：

```
if (formula != null.asInstanceOf[Any]) {
    println("hello")
} 
```

上面的表达对我有用。

您还可以使用来自的引用相等运算符`AnyRef`：

```
if (formula eq null) {
    println("hello")
}

if (formula ne null) {
    println("!hello")
} 
```

我还订阅了 ziggystar 和 Dylan 的评论 - 您应该使用不同的运算符名称（`===`例如）并且不要使用`null`-`Option`来代替。

# html - 龙卷风 websocket 意外关闭

> ID：13605705
> 
> 赞同：2
> 
> 时间：2012-11-28T13:03:33.653
> 
> 标签：html, websocket, tornado

我不知道为什么套接字在 Windows 平台上关闭。

以下简单服务器适用于我的 linux 机器（chrome 和 firefox），但不适用于我的 windows 机器或 android 手机，我只看到“套接字关闭”消息。这个[聊天演示](https://github.com/facebook/tornado/blob/master/demos/websocket/chatdemo.py)可以在我尝试过的所有平台上找到。感谢您的任何建议。

贾斯汀

---- 服务器代码：-----

```
import tornado.httpserver
import tornado.websocket
import tornado.ioloop
import tornado.web
import time

class WSHandler(tornado.websocket.WebSocketHandler):
    def open(self):
        print 'new connection'
        self.write_message("Hello World")
        for i in range(3):
            self.write_message('Testing %d' % i)
            i += 1
            time.sleep(1)
        self.close()      
    def on_message(self, message):
        print 'message received %s' % message

    def on_close(self):
      print 'connection closed'

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("logdemo.html")

application = tornado.web.Application([
        (r'/', MainHandler),
        (r'/ws', WSHandler),
])

if __name__ == "__main__":
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(8888)
    print 'serving on port 8888'
    tornado.ioloop.IOLoop.instance().start() 
```

---- logdemo.html ----

```
<!doctype html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script>
      function log(m) {
        d = document.getElementById("log");
        d.innerHTML = m + "<br/>" + d.innerHTML;
      }
      $(document).ready(function () {
      var ws = new WebSocket("ws://raspberrypi.local:8888/ws");

      ws.onopen = function(evt) { log("socket opened"); };
      ws.onmessage = function(evt) { log("message: " + evt.data); ws.send("GOTIT");};
      ws.onclose = function(evt) { log("socket closed"); };
      });
     </script>
  </head>
  <body>
    <h1>Websockets Streaming</h1>
    <div id="log"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-21T16:49:04.613

您在 WSHandler 的 open 方法中调用 self.close() 。我相信这就是原因，不是吗？

# javascript - 点击获取 iFrame ID？

> ID：13605708
> 
> 赞同：0
> 
> 时间：2012-11-28T13:03:45.600
> 
> 标签：javascript, jquery, iframe

`iframe`我在我的网站中使用了以下内容

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
 jQuery('#video1').click(function(){
   alert($(this).attr('id'));
  });
</script>

<iframe id="video1" width="520" height="360" src="http://www.youtube.com/embed/TJ2X4dFhAC0?enablejsapi" frameborder="0" allowfullscreen></iframe> 
```

我需要获取iframe 视频`id`的`iframe`onclick，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:09:15.717

通过从同一标签访问它来获取标签的价值似乎很疯狂。我不知道你在做什么。如果你有很多 iframe，那么你可以说我想获取被点击的 iframe 的 id。那么单身你可以做到这一点

```
 $('#video1').click(function(){
   alert($(this).attr('id'));
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:12:08.373

我假设您有多个 iframe，因此目标是确定他们点击了哪一个？如果是这样，这应该工作：

```
$(function() { //Attach to the jquery onLoad function
    $('iframe').click(function() {
        var id = $(this).id;
        console.log(id);
        // do stuff with id here
    });
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-28T13:06:46.510

```
onclick='call(this)' 
```

在 JavaScript 中

```
function call(ev)
{
alert(ev.id)
} 
```

在jQuery中

```
function call(ev)
{
alert($(ev).attr('id'));
} 
```

# ruby-on-rails - 回形针输出 url 而不是图像

> ID：13605709
> 
> 赞同：0
> 
> 时间：2012-11-28T13:03:50.753
> 
> 标签：ruby-on-rails, paperclip

在我的节目视图中：`<dd><%= @truck_fleet.avatar.url(:medium) %></dd>`

获取输出：`/system/truck_fleets/avatars/000/000/001/medium/logo.thumbnail.png?1354107497`

Def，我想显示头像而不是 URL :)

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:15:58.597

告诉 rails 它是一个图像：

```
<%= image_tag @truck_fleet.avatar.url(:medium) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:08:22.683

您需要做的就是将 URL 包装在属性`<img>`下的标签中，如下所示：`src`

```
<img src="<%= @truck_fleet.avatar.url(:medium) %>"/> 
```

# asp.net - ASP.NET 临时禁用验证器

> ID：13605710
> 
> 赞同：0
> 
> 时间：2012-11-28T13:03:55.387
> 
> 标签：asp.net, validation, temporary

我刚刚开始学习 ASP.NET 并使用一个 GridView 来查看和编辑记录，以及一个 DetailsView 来添加新记录来实现简单的应用程序。我已经为 DetailsView 添加了一些验证器，它的效果很好，但是当我在 GridView 中编辑记录然后尝试更新时，这些验证器此时会干扰并阻止我更新记录。避免此问题的最佳做法是什么？当我单击 Grid 的更新按钮时，我尝试禁用验证器，但似乎验证发生在此事件之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:26:24.273

哦，我的错，这是微不足道的，我在 msdn 教程中找到了一个解决方案：http: [//msdn.microsoft.com/en-us/library/bb426882.aspx](http://msdn.microsoft.com/en-us/library/bb426882.aspx)

# java - 为什么我不能复制/转换列表 > 进入 SortedMap ,整数>?

> ID：13605713
> 
> 赞同：0
> 
> 时间：2012-11-28T13:04:03.710
> 
> 标签：java, list, map

我想将我的元素从 a 复制`List<Set<String>>`到 a`SortedMap<Set<String>,Integer>`中，但我总是得到：

```
java.lang.ClassCastException: java.util.HashSet cannot be cast to java.lang.Comparable. (or HashMap could be a TreeSet too, vice versa) 
```

我一直在阅读的一些地方说这是不可能的，但这是正确的吗？

我不敢相信我不能将原始列表或集合复制到地图中。

这是我尝试过的：

```
List<Set<String> > tempnewOut= new ArrayList<>(); 
SortedMap<Set<String>,Integer> freqSetsWithCount= new TreeMap<>(); 
for (Set<String> set : tempnewOut) 
{ 
    freqSetsWithCount.put(set, 0); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:13:28.390

`TreeMap`您在 a （接口的实现之一）中用作键的类`SortedMap`必须实现 interface `Comparable`，或者您必须`TreeMap`通过向构造函数提供 a`Comparator`来创建 。

您正在尝试使用 a`HashSet<String>`作为键。`HashSet`没有实现`Comparable`，而且你没有提供 a `Comparator`，所以你得到了`ClassCastException`.

一种解决方案是`TreeMap`通过将 a 传递`Comparator`给构造函数来创建它。您必须实现 的`compare`方法`Comparator`来指定集合在地图中的排序方式。

```
List<Set<String>> list = new ArrayList<>();

Comparator<Set<String>> comparator = new Comparator<Set<String>>() {
    @Override
    public int compare(Set<String> o1, Set<String> o2) {
        // TODO: Implement your logic to compare the sets
    }
};

SortedMap<Set<String>, Integer> set = new TreeMap<>(comparator);

// TODO: Fill the set 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:18:13.913

A SortedMap is, as the name implies, a Map of sorted elements. To be able to sort elements in this manner, the Comparable interface has to be implemented on the elements inside it.

The List of Sets that you're working with, doesn't implement the Comparable interface, so you aren't able to simply put the Set from your List inside the Set of your SortedMap without converting them to something that implements Comparable I'm afraid...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:12:25.360

我不是 100% 确定，但我认为`Set`接口不会扩展`Comparable`接口。但是为了在 sortedMap 中使用对象作为 Key，它需要实现`Comparable`.

这是合乎逻辑的，如果您不知道一个实例是否大于、等于或小于另一个实例，则无法对任何内容进行排序......

像其他人一样，我建议您使用 Integer 作为 Key 如果这有意义的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:12:39.543

SortedMap 要求键（您的情况是哈希集）实现可比较的接口来对其进行排序。

Hashset 没有实现它，因此它不能在 SortedMap 实现中进行类型转换。您可以编写自己的 Set 来扩展 hashmap 并实现可比的以使其工作。

如果你想按整数排序，只需切换键和值

```
SortedMap<Integer,Set<String>> 
```

javadoc对我来说很清楚

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/SortedMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/SortedMap.html)

# ruby-on-rails - Rails 中模型属性的默认值

> ID：13605717
> 
> 赞同：2
> 
> 时间：2012-11-28T13:04:09.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, activemodel

在 Rails 中为模型设置默认值的正确方法是什么？

```
class User < ActiveRecord::Base
  attr_accessible :name, :points
end 
```

我希望点从 0 而不是`nil`. 理想情况下，立即创建默认值，而不是等待将`User`其保存到数据库中。但我想使用 a `before_save`or 数据库约束也可以：

```
class User < ActiveRecord::Base
  attr_accessible :name, :points
  before_save :set_defaults

  private
  def set_defaults
    self.points = 0
  end
end 
```

使用最新的稳定 Rails。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T13:06:39.707

在您的迁移中设置它：

```
 t.integer :points, default: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T13:10:41.577

`migration`您可以通过或使用模型`setter`方法设置默认值。

```
change_column :user, :points, :integer, :default => 0 
```

或者，

```
def points
    @points ||= 0
end 
```

# infinispan - Infinispan keyset() 不适合生产

> ID：13605719
> 
> 赞同：1
> 
> 时间：2012-11-28T13:04:17.780
> 
> 标签：infinispan

我决定使用 infinispan 分布式网格来扩展我的应用程序以支持集群，但是在使用这种共享资源时遇到了限制。如何检索分布式缓存中的所有值或键？我问这个是因为在他们的文档中，不建议在生产中运行所有收集方法（意思是 keySet()）。现在我有一个带有键/值对的本地存储桶/缓存，但是为了处理我需要检索键并遍历集合的值。设置 set = cache.keySet();

当本地缓存中有大量条目时，keySet() 返回一个副本，这对内存来说是一个沉重的负担。我尝试使用查询功能，但是如果我想查找值并且不需要它，则有一些网络调用。此外，查询功能不支持复杂的过滤器。您知道在生产中使用 infinispan 时哪种方法最好吗？

由于这是一个实验阶段，我正在使用最后一个 infinispan 版本。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:20:51.870

Map/Reduce 功能允许您遍历存储的所有条目，还可以迁移数据所在的逻辑，因此不会增加很多负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T15:15:07.633

我们在生产中使用 keySet() 仅供参考。在低数据负载下性能似乎不是一个大问题，但是您当然应该非常小心地使用这些方法，因为它们可能会对性能产生很大影响，具体取决于您使用缓存的方式。远程缓存查询对我来说似乎是一个非常方便的功能。

# javascript - 给定调用 javascript 的 setInterval(setTimeout) 函数

> ID：13605720
> 
> 赞同：1
> 
> 时间：2012-11-28T13:04:17.913
> 
> 标签：javascript, setinterval

我需要通过给定的延迟调用一些给定次数的函数。我应该怎么做 - 为定时器声明变量并将其传递给调用函数以在某个时刻或循环中停止定时器（n 次）调用 setTimeout 一次（或另一种方法来保持一次延迟时间）或其他。谢谢。

**编辑以修复语法错误**

```
 var timerID = null;
    var n = 5;
    this.timerID = setInterval(function(){ 
              funcToInvoke(n,timerID){ 
                   if(invokeNumber == n){
                       clearInterval(timerID);
                       return;
                   }
                   else { do something}
               }
    },delay) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:23:52.423

是的，这种方法很常见，并且比`setTimeout`循环调用（固定次数）更好。它比这更高效，也更灵活，因为间隔将动态停止（可能会检查未来的情况）。

但是，您的代码有点混乱。固定的：

```
// Assuming we a have
//  n
//  delay
//  funcToInvoke
// and execute in context of some object
var that = this,
    numberOfInvokes = 0;
this.timer = setInterval(function() {
     // "this" points to the global object
     if (numberOfInvokes == n)
          clearInterval(that.timer);
     else
          funcToInvoke(numberOfInvokes);
     numberOfInvokes++;
}, delay); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:19:26.673

您当前的方法有语法问题，您不能有像`this.timerID`) 这样的函数参数。实际上，您应该删除整个`funcToInvoke`声明，并将 and 声明`n`为`timerID`局部变量，这样它们将可用于闭包。像这样：

```
// Don't forget to define n here!
var n = 5;
// Change timerID to local var instead of property
var timerID = null;
timerID = setInterval(function(){ 
    if(invokeNumber == n){
        clearInterval(timerID);
        return;
    } else { 
        //do something
    }
    // You can setTimeout again anywhere in this function if needed
}, delay); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:10:53.553

如果你想要一个近似的延迟， setInterval 可能没问题。如果您想要更精确的间隔，那么重复调用 setTimeout 会更好，因为您可以根据自上次调用以来的时间调整到下一次调用的时间长度。

例如，对于每秒滴答的时钟，您可以重复调用 setTimeout，将延迟设置为下一整秒之后。

# jquery - 制作覆盖以覆盖另一个元素的高度

> ID：13605727
> 
> 赞同：0
> 
> 时间：2012-11-28T13:04:33.443
> 
> 标签：jquery, css

我在屏幕上有许多元素需要用叠加层覆盖。元素具有不同的大小，并且可以在页面的生命周期内调整大小。

我可以使用这个 CSS 在需要的地方放置叠加层，除了 100% 的高度不起作用：

```
.upgrade {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
} 
```

CSS中有什么方法可以将一个元素设置为完全覆盖另一个元素。如果 CSS 不是一个选项，我的后备计划是使用 jQuery/JavaScript 设置初始高度，然后跟踪调整大小事件。我希望这是正确的做法...

但是，我真的希望可以用 CSS 解决 100% 的高度问题。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:10:33.723

将绝对定位的元素放在它应该覆盖的元素中，在您的 HTML 中。然后制作你想要覆盖的元素`position: relative;`。

之后，您将绝对定位元素的 CSS 修改为：

```
.upgrade {
   position: absolute;
   top: 0;
   left: 0;
   bottom: 0;
   right: 0;
} 
```

绝对定位的元素现在将相对于最近的具有相对位置的父元素进行定位。因此，顶部、底部、左侧和右侧将与该元素而不是整个文档相关 - 因此您应该覆盖整个元素。

**更新：**

[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/position#Absolute_positioning)上提供了有关绝对定位的更多信息。CSS-Tricks 也有[一篇](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)关于这个主题的短文。

# c# - IE 重定向页面失败

> ID：13605735
> 
> 赞同：1
> 
> 时间：2012-11-28T13:05:07.960
> 
> 标签：c#, internet-explorer

我有一个问题，我正在使用 response.redirect 将页面重定向到其他域，它在 Firefox 中运行良好，但在 ie 中它显示空白网页。当我试图查看提琴手中发生的事情时，它说对象已移动，但重定向不会在这里发生。有趣的是我无法在我的本地环境中复制它，但它发生在我的 DEV 和 QAL 服务器中。

当我在开发和 QAL 服务器中尝试时，IE 将其重定向到所需的页面。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:17:20.073

**Try to clear cache in Internet Explorer**

You probably set redirect to some page and then change it to other page.

Sometimes when permanent redirect occurs, IE cache it and don't ask for a page one more time but get the redirect path from cache. IE don't even refresh the address textbox which is misleading.

# ios - MPMoviePlayer 关闭全屏导致黑色视图/块

> ID：13605743
> 
> 赞同：1
> 
> 时间：2012-11-28T13:05:39.240
> 
> 标签：ios, video, mpmovieplayer

我正在从 MPMoviePlayer（不是全屏）播放视频，当我进入全屏时，视频继续播放并显示全屏。但是当我再次关闭全屏时，我只能在播放“小”视频的地方看到黑色背景。它不响应触摸或任何东西。

我从不在我的播放器上调用 stop 并且没有声明 viewdiddissapear （或类似的）函数。电影播放器​​也没有发布。

我希望视频在我关闭全屏时继续播放。有什么想法吗？

**编辑它可以在 iPad 1 上运行，但不能在 iPad 2 上运行……奇怪……我需要它才能正常工作。

电影播放器​​初始化：

```
NSURL *fileURL = [NSURL fileURLWithPath:filePath];
self.moviePlayer = [[MPMoviePlayerController alloc] init];
self.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
self.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
self.moviePlayer.contentURL = fileURL;
self.moviePlayer.backgroundView.backgroundColor = [UIColor blackColor];
self.moviePlayer.shouldAutoplay = YES;
[self.moviePlayer.view setFrame:CGRectMake(1024, floorf((self.view.bounds.size.height / 2) - (318 / 2)), 425, 318)];
[self.moviePlayer prepareToPlay];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(MPMoviePlayerLoadStateDidChange:)
                                             name:MPMoviePlayerLoadStateDidChangeNotification
                                           object:self.moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(MPMoviePlayerDidFinish:)
                                             name:MPMoviePlayerPlaybackStateDidChangeNotification
                                           object:self.moviePlayer];

[self.view addSubview:self.moviePlayer.view];
[self.view bringSubviewToFront:self.moviePlayer.view];

[UIView animateWithDuration:0.25
                      delay:0.0
                    options:UIViewAnimationCurveEaseOut
                 animations:^{
                     self.moviePlayer.view.transform = CGAffineTransformIdentity;
                     self.moviePlayer.view.position = CGPointMake(floorf(787 - (self.moviePlayer.view.frame.size.width / 2)),
                                                      self.moviePlayer.view.position.y);
                 }
                 completion:nil]; 
```

通知

```
- (void)MPMoviePlayerLoadStateDidChange:(NSNotification *)notification
{
NSLog(@"Loadstate changed");
if((self.moviePlayer.loadState & MPMovieLoadStatePlaythroughOK) == MPMovieLoadStatePlaythroughOK)
{
    [self.moviePlayer play];
}
}

- (void)MPMoviePlayerDidFinish:(NSNotification *)notification
{
MPMovieFinishReason finishReason = (MPMovieFinishReason) [notification.userInfo objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];

switch(finishReason)
{
    case MPMovieFinishReasonPlaybackError: NSLog(@"Stopped playback due to error");
    case MPMovieFinishReasonPlaybackEnded: NSLog(@"I just quitted");
    case MPMovieFinishReasonUserExited: NSLog(@"User quitted");
}
} 
```

# c# - WinForm 事件处理程序激活太慢

> ID：13605744
> 
> 赞同：1
> 
> 时间：2012-11-28T13:05:45.713
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio

我希望你看看这段代码： 我有一个名为 Button1 的按钮。

```
 private void button1_MouseHover(object sender, EventArgs e)
    {
        button1.BackColor = Color.Black;
    }

    private void button1_MouseLeave(object sender, EventArgs e)
    {
        button1.BackColor = Color.Blue;
    } 
```

此代码有效，但问题是延迟非常小。更改颜色大约有 1/2 秒的延迟。我在 WPF 中尝试过同样的事情，并且绝对没有延迟。基本上我希望鼠标事件尽快触发。

我可以通过什么方式完成这项任务？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:09:58.727

尝试使用 MouseEnter 事件而不是 MouseHover - 后者在“延迟后”被触发，因为 Windows 无法判断鼠标正在悬停，除非它已经静止了一会儿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:13:52.783

调用`[button1.Invalidate(false)](http://msdn.microsoft.com/de-de/library/vstudio/xz8ytzt0.aspx)`将导致在下一帧内重绘控件。将此行放在您的变色代码之后，看看它是否有效。

# razor - 如何使 MVC 4 Razor Html.Raw 在脚本标签内的 HTML 中分配工作

> ID：13605745
> 
> 赞同：6
> 
> 时间：2012-11-28T13:05:45.917
> 
> 标签：razor, asp.net-mvc-4, jqote

对于一个项目，我使用 jqote 在由 MVC 4 和 Razor 生成的 JavaScript 和 HTML 中进行模板化。

请查看 HTML 和 Razor 中的以下代码：

```
<script id="testTemplate" type="text/html">
    <p>Some html</p>
    @{string id = "<%=this.Id%>";}

    <!-- 1 -->
    @if(true) 
    {   
        @Html.Raw(@"<select id="""+id+@"""></select>")
    }
    <!-- 2 -->
    @if(true)
    {
        <select id="@Html.Raw(id)"></select>
    }
    <!-- 3 -->
    @Html.Raw(@"<select id="""+id+@"""></select>")
    <!-- 4 -->
    <select id="@Html.Raw(id)"></select>
    <!-- 5 -->
    <select id="<%=this.Id%>"></select>
</script> 
```

输出是这样的：

```
<script id="testTemplate" type="text/html">
    <!-- 1 -->
    <select id="<%=this.Id%>"></select> <!--Good!-->
    <!-- 2 -->
    <select id="&lt;%=this.Id%&gt;"></select> <!--BAD!-->
    <!-- 3 -->
    <select id="<%=this.Id%>"></select> <!--Good!-->
    <!-- 4 -->
    <select id="<%=this.Id%>"></select> <!--Good!-->
    <!-- 5 -->
    <select id="<%=this.Id%>"></select> <!--Good!-->
</script> 
```

现在，问题在于`<!-- 2 -->`. 人们会期望`Html.Raw`在这里踢，但不知何故它没有。或者 Razor 想要对其中的内容进行 HtmlEncode。

问题是：***有人知道为什么吗？这是一个错误还是设计使然？***

没有脚本标签它可以工作。但是我们需要脚本标签，因为我们需要在 JavaScript 中进行模板化。

硬编码它可以工作，但我们需要使用一个变量，因为它并不总是一个模板。

如果没有`@if`它，它就可以工作，但它就在那里，我们需要它。

## 解决方法

这些行给出了类似的良好输出：

```
@if(true)
{
    <select id= "@Html.Raw(id)"></select>
}
@if(true)
{
    <select id ="@Html.Raw(id)"></select>
}
@if(true)
{
    <select id @Html.Raw("=")"@Html.Raw(id)"></select>
} 
```

我们计划这样做：

```
<script id="testTemplate" type="text/html">
    @{string id = @"id=""<%=this.Id%>""";}
    @if(true)
    {   
        <select @Html.Raw(id)></select>
    }
</script> 
```

...尽可能保持标记完整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:19:47.413

**编辑**阅读正确提供的代码后：

这看起来像一个错误。它以某种方式连接到 id 属性。将属性更改为其他内容即可。

```
@if(true) 
{   
    <select data-id="@Html.Raw(id)"></select>
} 
```

显然这不是一个解决方案，只是一个验证。您的示例 4 或多或少暗示它不是设计使然，否则也应该失败。

# html - IE 和 chrome 的大纲属性冲突

> ID：13605748
> 
> 赞同：0
> 
> 时间：2012-11-28T13:06:10.487
> 
> 标签：html, css, cross-browser, outline

我这里有个问题，我在 html 中有一个复选框和一个超链接：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html>
    <head>
    <title>test</title>
    </head>
    <body>                                                              
        <div>
            <input type="checkbox" class="checkbox" id="readAndAgree" name="readAndAgree">
            <div>
                <label for="readAndAgree"> 
                    I have read and agree to the <a href="http://stackoverflow.com/">Credit Profile Authorization</a>. 
                </label>
            </div>
        </div>
    </body>
    </html> 
```

当按下“标签”时，您可以看到复选框和超链接周围有虚线边框。

但是如果在头部添加css，

```
 <style>
        input{outline-color:green;}
        a{outline-color:green;}
 </style> 
```

复选框周围的虚线边框和超链接在 IE 8、9 10 中消失。IE7 仍然显示它。

我为 chrome 添加了 outline-color 属性，以在按“tab”而不是默认的橙色时显示绿色轮廓。

* * *

那么如何兼容这两种浏览器呢？在chrome中，它会显示绿色突出显示，同时在IE 8、9、10中，按下“tab”时会显示虚线轮廓/边框？

在 ie7 中会显示，因为 ie7 不支持大纲。但是带有!DOCTYPE 的IE8、IE9、IE10 支持大纲。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:40:07.930

CSS：

```
 input:focus,
  a:focus {
    outline: 1px dotted;
    outline: auto -webkit-focus-ring-color;
    outline-color: green;
  } 
```

按 T​​ab 和：ie、ff、opera：显示虚线边框
chrome、safari 环形边框

[http://jsfiddle.net/84bFN/3/](http://jsfiddle.net/84bFN/3/)

# sharepoint-2013 - 是否可以在不使用 SharePoint Designer 的情况下将外部内容类型映射到 Office 项目类型？

> ID：13605756
> 
> 赞同：0
> 
> 时间：2012-11-28T13:06:49.797
> 
> 标签：sharepoint-2013, external-contenttype

我需要将 Outlook 连接到外部列表，并且必须将其内容类型映射到 Office 项目类型，但不幸的是我在 SPD2013 中看不到它。可能是因为 BDC 模型使用了 OData，它在 SPD2013 中的支持有限（[我的问题](https://sharepoint.stackexchange.com/questions/52555/external-content-type-based-on-odata-is-invisible-in-spd2013-but-visible-in-a-w)）。

**那么，是否可以在不使用 SharePoint Designer 的情况下将外部内容类型映射到 Office 项目类型？如果是这样，我该怎么做？**

先感谢您。

PS：SharePoint 2013 RTM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:28:40.453

欢呼！经过三天不成功的谷歌搜索并到处问这个问题:-)我试图自己调查它，最后，我找到了一种方法！

用手绘制它似乎很容易。为此，您必须在 BDC 模型文件（扩展名为 .bdcm 的 xml）中进行 2 处更改：

**将名称为 Office 项目类型的属性添加到实体**

```
<Entities>
    <Entity Name="AbsenceCalendar" DefaultDisplayName="AbsenceCalendar"  Namespace="MyNameSpace" Version="1.0.0.0" EstimatedInstanceCount="2000">
<Properties>
    <Property Name="OutlookItemType" Type="System.String">Appointment</Property>
    ...
</Properties>
... 
```

**将必要的字段映射到 Office 项目类型。**例如，对于约会办公室项目类型的必填字段，它可能看起来像

```
<Method Name="ReadSpecificAbsenceCalendarEntity" DefaultDisplayName="Read Specific AbsenceCalendarEntity" IsStatic="false">    
......    
  <Parameter Name="@AbsenceCalendarEntity" Direction="Return">
     <TypeDescriptor Name="AbsenceCalendarEntity" DefaultDisplayName="AbsenceCalendarEntity" TypeName="Microsoft.BusinessData.Runtime.DynamicType">   
       <TypeDescriptors> 
           <TypeDescriptor Name="Title" DefaultDisplayName="Title" TypeName="System.String"> 
              <Properties>
                <Property Name="OfficeProperty" Type="System.String">Subject</Property>
              </Properties>
           </TypeDescriptor>
           <TypeDescriptor Name="StartDate" DefaultDisplayName="StartDate" TypeName="System.DateTime">
              <Properties>
                 <Property Name="OfficeProperty" Type="System.String">Start</Property>
               </Properties>
            </TypeDescriptor>
            <TypeDescriptor Name="EndDate" DefaultDisplayName="EndDate" TypeName="System.DateTime">
                <Properties>
                       <Property Name="OfficeProperty" Type="System.String">End</Property>
                 </Properties>
            </TypeDescriptor>
....... 
```

# javascript - 使用 javascript 或 jquery 在页面加载时全屏显示

> ID：13605757
> 
> 赞同：2
> 
> 时间：2012-11-28T13:06:59.453
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 javascript 或 jquery 触发键盘的 f11 事件？](https://stackoverflow.com/questions/8253245/how-to-trigger-f11-event-of-keyboard-using-javascript-or-jquery)

是否可以使用javascript或jquery在页面加载时进入全屏购买调用“F11”按键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:03:41.693

我猜你可以使用 html5 全屏 API

```
var element = document.getElementById("myDiv");
// Mozilla
video.mozRequestFullScreen();
// Webkit
video.webkitEnterFullScreen(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:10:50.787

```
<html>
<head>
<script type="text/javascript">
function nWin() {
window.open( "http://www.google.com/", "myWindow", "fullscreen=1")
}
</script>
</head>
<body>
<form>
<input type="button" onClick="nWin()" value="FullScreen">
</form>
</body> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T13:11:24.627

简短的回答 - 是的。长答案 - 这取决于......

您可以执行[window.open()](http://www.w3schools.com/jsref/met_win_open.asp)来打开一个新的全屏窗口 - 但不要让原来的全屏窗口。这样做的一个缺点是，今天的大多数弹出窗口阻止程序都会阻止以这种方式自动打开窗口。

另一种方法是在该登录页面上提供一个链接并将`window.open`函数绑定到`onclick`该链接的事件。这应该可以防止弹出窗口阻止程序问题并为您提供所需的内容。

在任何情况下，您都会留下来自用户的交互，这在所有场景中都是必需的。

# c++ - 在作为此类实例的类中创建公共属性

> ID：13605761
> 
> 赞同：1
> 
> 时间：2012-11-28T13:07:20.653
> 
> 标签：c++, class, instance

我正在创建一个名为的类`Circle`，并且需要一个公共属性来访问它的“父”`Circle`实例。因此我这样编码：

```
class Circle {
public:
...
    Circle parent;
...
} 
```

但这给了我一个错误：`Incomplete type is not allowed`

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:10:28.027

那是做不到的。考虑一下您的类型的内存占用量是多少： a`Circle`包含 a `Circle`，因此它的大小不能小于 inner `Circle`，但该大小与 external 的大小相同，从而`Circle`产生矛盾。

也许您打算存储*指针*或*智能指针*？这是允许的，因为编译器知道指针的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:10:18.187

您应该将 parent 定义为指向`Circle`：

```
Circle *parent; 
```

# intellij-idea - scss 文件中的 FontAwesome 错误

> ID：13605762
> 
> 赞同：0
> 
> 时间：2012-11-28T13:07:26.227
> 
> 标签：intellij-idea, sass, font-awesome

各位 web 开发人员您好，我是 SASS 的新手，使用 Intellij IDEA Ultimate 进行开发。`font-awesome.scss`我将文件从目录复制`fontawesome/sass`到我的项目中，我从 IDE 中得到了一些错误，主要是这样的结构：

```
.btn, .nav-tabs {
  [class^="icon-"], 
  [class*=" icon-"] {
    /* keeps button heights with and without icons the same */
    line-height: .9em;
  }
} 
```

它一直在唠叨冒号作为和之间的分隔`,`符。`[class^="icon-"]``[class*=" icon-"]`

**但**如果该部分看起来像这样

```
a [class^="icon-"],
a [class*=" icon-"] {
  display: inline-block;
  text-decoration: inherit;
} 
```

一切看起来都很好。

此外，在生成的`font-awesome.css`文件中，存在一些明显的错误，因为`text-decoration: inherit;`肯定没有有效的 CSS 值。可能这些是错误，还是我在这里出错了？

我应该如何更改上面显示的`scss`文件的语法以防止错误？

我想使用，`font-awesome.scss`因为我也计划在整个项目中使用 SASS，如果我能以同样的方式使用**fontawesome ，那就太酷了。**

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:00:53.870

提供的示例代码是有效的 Sass 并且可以按应有的方式进行编译。您的 IDE 只是缺少 Sass 的正确语法突出显示。

# php - 如何从数组中随机读取文本字符串，其中文本存储在 MySQL 数据库中

> ID：13605763
> 
> 赞同：2
> 
> 时间：2012-11-28T13:07:26.490
> 
> 标签：php, mysql, database, arrays

在盯着这些代码行，并在多个编码论坛上研究了几个小时之后，我被我的代码卡住了，它不能完全发挥作用。我正在尝试成功运行这个 PHP 脚本，以便可以从 MySQL 表中随机查询文本引用并显示在我网站的页脚中。每次用户刷新网站时，报价都应该改变。我还试图记录每个报价显示的次数，然后当我的网站上显示特定报价时，计数器会告诉站点用户该特定报价已显示多少次。到目前为止，我的代码是：

```
 <?php

    include('Includes/inc_connect.php');
    $DBName = 'database';
    if (!@mysql_select_db($DBName, $DBConnect))
        echo "<p style='text-align:center'>There are no quotes to view!</p>";
    else {
        $TableName = "randomquote";
        $SQLstring = "SELECT quote FROM $TableName";
                    //executes the query
        $QueryResult = @mysql_query($SQLstring, $DBConnect);
            if ($QueryResult === false)
            {
                echo "<p>Unable to retrieve the data.</p>" . "<p>Error code: " . mysql_errno($DBConnect) . ": " . mysql_error($DBConnect) . "</p>";
            }
            else
            {
                $quote_array = array();//Creates a blank array
    //use a while loop to extract the data from the database table into an indexed array
                while(($Row = mysql_fetch_row($QueryResult)) !== FALSE)
                {
                    $quote_array = $Row[0];
                }
            }

    //assign the contents of the table to an array variable
            $quote_count=count($quote_array);
            $RandomArrayIndex = rand(0, $quote_count-1);
            $quote = stripslashes($quote_array[$RandomArrayIndex]);
                $SQLString = "UPDATE randomquote SET display_count " . " = display_count + 1 WHERE quote = " . $quote_array[$quote];

                $SQLString = "SELECT display_count from randomquote WHERE quote = " . $quote_array[$quote];
                $display_count = @mysql_query($SQLString, $DBConnect);
    //display the random quote on the Web page
                echo "<p style='text-align:center;font-style:italic'><strong>" . $quote . "</strong></p>\n";
                echo "<p style='text-align:center>This quote has displayed " . $display_count . " times.</p>/n";
    }
        else
        {
    //specify that the comments cannot be read
        echo "<p>The quote cannot be displayed at this time</p>\n";
        }
else
{
//specify that there are no quotes
echo "<p>There are no quotes to display.</p>\n";
} 
```

我是 PHP 和 MySQL 的学生，因此非常感谢任何和所有的帮助和建议。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:26:06.087

我相信这可能会有所帮助：

改变

```
$SQLstring = "SELECT quote FROM $TableName"; 
```

到

```
$SQLstring = "SELECT quote FROM $TableName ORDER BY RAND()"; 
```

或者如果您一次只想要一个报价

```
$SQLstring = "SELECT quote FROM $TableName ORDER BY RAND() LIMIT 1"; 
```

我在这里假设您对显示计数的更新工作正常。

然后，您可以删除代码的随机数组部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:52:53.333

您还可以考虑改进 - 如果我理解正确，您正在做的是获取所有报价，然后使用 php 随机选择一个。为什么不使用 php 随机选择一个数字（假设您的报价表有一个 id 键的报价 ID）并只查询它？

在伪代码中
$rand_post_id = rand(0,$num_of_quotes);
$query = "从 $TableName WHERE quote_id=$quoteId 中选择报价";
$res = $mysql_query($query,$dbconnect);

并确保您正确地转义了我没有的报价 ID。

# amazon-s3 - 将 s3 数据迁移到谷歌云存储

> ID：13605766
> 
> 赞同：5
> 
> 时间：2012-11-28T13:07:30.703
> 
> 标签：amazon-s3, google-bigquery, google-cloud-storage

我在 Google App Engine 上部署了一个 python Web 应用程序。

我需要获取存储在 Amazon S3 上的日志文件并将其加载到 Google Cloud Storage 中。一旦它在 Google Cloud Storage 中，我可能需要执行一些转换并最终将数据导入 BigQuery 进行分析。

我尝试使用 gsutil 作为某种概念证明，因为 boto 是 gsutil 的引擎盖，我想在我的项目中使用 boto。这没有用。

我想知道是否有人设法在两个云之间直接传输文件。如果可能的话，我想看一个简单的例子。最后，这项任务必须通过在 GAE 上执行的代码来完成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T15:57:22.920

根据这个[线程](https://groups.google.com/group/gs-discussion/browse_thread/thread/c55228796f30fa86/991d6be9af30381d?lnk=gst&q=s3%20cloud%20storage#991d6be9af30381d)，您可以使用 gsutil 将数据从 S3 流式传输到 Google Cloud Storage，但每个字节仍然需要经过两跳：S3 到您的本地计算机，然后您的计算机到 GCS。但是，由于您使用的是 App Engine，因此您应该能够从 S3 中提取并存入 GCS。除了 App Engine 是中介之外，它与上述进程相同，即每个字节从 S3 传输到您的应用程序，然后传输到 GCS。您可以将 boto 用于拉方，将[Google Cloud Storage API](https://developers.google.com/appengine/docs/python/googlestorage/)用于推方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T12:13:46.953

Google 允许您将整个存储桶从 S3 导入存储服务：

[https://cloud.google.com/storage/transfer/getting-started](https://cloud.google.com/storage/transfer/getting-started)

您可以在源存储桶上设置文件过滤器以仅导入您想要的文件，或“目录”（即具有特定前缀的任何内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:54:58.433

我不知道有任何云提供商提供用于将数据传输到竞争云提供商的 API。云提供商没有动力帮助您将数据转移到竞争中。您几乎可以肯定必须将数据读取到中间机器，然后再将其写入 Google。

# php - 从 Yii 或 Laravel 中的现有数据库生成迁移

> ID：13605767
> 
> 赞同：16
> 
> 时间：2012-11-28T13:07:29.097
> 
> 标签：php, database, yii, migration, laravel

我正在开发一个具有相当复杂的数据库（150 多个表）的项目。为了能够维护更改，我决定添加迁移，最好使用 Yii 或 Laravel。

有人知道，是否可以从现有数据库生成初始迁移？

手动创建它会：

*   永远和
*   非常容易出错。

如果没有办法，是否有人知道支持此类功能的基于 PHP 的良好框架？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-08T18:27:23.883

在 Yii 中完成此操作的说明：

1.  将您的数据库连接设置添加到`protected/config/console.php`.

2.  运行`yiic migrate create initial`以创建用于迁移的存根代码。

3.  [将此要点](https://gist.github.com/bmarston/5541632)的内容复制到`protected/commands/InitialDbMigrationCommand.php`.

4.  运行`yiic initialdbmigration 'name_of_your_database' > initial_migration.php`以生成初始数据库迁移`up()`的`down()`方法。

5.  复制并粘贴`up()`和`down()`方法 from到在步骤 2 中`initial_migration.php`创建的文件夹中的文件。`protected/migrations`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-31T10:35:29.790

' [Doctrine Project](http://www.doctrine-project.org/ "教义计划") '（又名 Doctrine）能够为现有数据库结构创建数据库迁移，因此您可以重新创建现有结构。它可以在 Symfony、Laravel、Yii 和许多框架中轻松实现。

示例来自：
[http ://symfony.com/legacy/doc/doctrine/1_2/en/07-Migrations](http://symfony.com/legacy/doc/doctrine/1_2/en/07-Migrations)

> **从数据库**
> 
> 如果您有一个现有的数据库，您可以构建一组迁移类，通过运行以下命令重新创建您的数据库。
> 
> ```
> $ ./symfony doctrine:generate-migrations-db 
> ```
> 
> **从模型**
> 
> 如果您有一组现有的模型，您可以构建一组迁移类，通过运行以下命令来创建您的数据库。
> 
> ```
> $ ./symfony doctrine:generate-migrations-models 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T11:34:17.847

这是我创建的一个 Laravel 包，它正是这样做的。它会自动从您现有的数据库中生成干净且准确的 Laravel 迁移。

由于它不对数据库做任何假设，它应该适用于任何数据库结构，同时甚至保留原始索引和外键名称。

[https://github.com/Xethron/migrations-generator](https://github.com/Xethron/migrations-generator)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-16T15:56:14.297

至于 Yii 1.x，*schmunk*创造了一个很棒的[`database-command`](https://github.com/schmunk42/database-command)yiic 命令。

**此命令仅涵盖迁移。您必须编写自己的向下迁移**。

要使用它：

1.  [从 GitHub](https://github.com/schmunk42/database-command/tags)获取最新版本并将其内容放入`/protected/commands`文件夹（如果不存在，则创建一个）。请注意，您需要按*原样*放置内容（[**没有**](http://www.yiiframework.com/doc/guide/1.1/en/topics.console#c18820)此特定命令的子文件夹），这与我们对扩展所做的操作相反。

2.  如果您想使用命令（如文档中建议的那样`EDatabaseCommand.php`），将文件（和里面的类）重命名为 。如果没有这个修复，您将不得不使用命令，因为[文档和代码之间存在轻微的不一致](https://github.com/schmunk42/database-command/issues/17)（至少在最新版本中，在撰写本文时；也许*schmunk*会解决这个问题）。`DatabaseCommand.php``yiic database``yiic edatabase`

**   有了这个，导航回`protected`控制台中的文件夹并执行`yiic database dump migration_name --prefix=table_name`.* 

 *这将在文件名的开头创建一个具有正确日期和时间的迁移`protected/runtime/migration_name.php`文件，其中填充了一系列[`CDbMigration`](http://www.yiiframework.com/doc/api/1.1/CDbMigration/)命令以重新创建您的数据库模式。访问文档中的“[用法](https://github.com/schmunk42/database-command#usage)”部分以阅读有关自定义命令的更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T11:31:47.577

好吧，因为迁移是关于设置您的数据库结构并对其进行更改，而不是反映当前数据库，所以没有这种方法。

这也不是你必须要做的一步。您可以从现在的位置开始，这将使您能够回滚到这一点。这意味着您可以对当前表进行迁移，而无需指定它们的整个结构，而只需指定更改。

假设您有一个名为 user 的表，并希望将他们的名字添加到其中。

```
php artisan migrate:make add_firstname_to_user 
```

现在进入`application/migrations`并找到迁移文件，添加这个

```
public function up()
{
    Schema::table('user', function($table)
    {
        $table->string('firstname');
    });
}

public function down() {
    Schema::table('user', function($table)
    {
        $table->drop_column('firstname');
    });
} 
```

现在您可以添加迁移它

```
php artisan migrate:install // if you haven't run this, should only be once
php artisan migrate 
```

..并回滚使用

```
php artisan migrate:rollback 
```

这将添加或删除列名，而不会以任何其他方式影响您的表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-12T19:10:24.950

我认为答案是：[https](https://github.com/jamband/yii2-schemadump) ://github.com/jamband/yii2-schmadump for Yii2 “这个命令从现有数据库生成模式。”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T01:48:22.477

我同时使用 Yii 和 Laravel，但我找不到你需要的任何一个。它们都创建空文件，您需要自己创建迁移脚本。对于一个有 150 个表的表，自己创建迁移将是一个挑战，但它并不像你想象的那么难。因为您已经拥有有关字段的信息，所以创建时间不会太长。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-02T11:36:09.290

Yii 现在有一个：

这允许分布式团队轻松地在本地更新数据库，然后通过版本控制系统（我使用 git）自动将其更新与其余代码一起分发给其他开发人员。它还对 xml 和迁移文件执行完整的初始数据库转储。

项目主页： [https ://code.google.com/p/yii-automatically-generated-migration-files/](https://code.google.com/p/yii-automatically-generated-migration-files/)

源代码： [https ://code.google.com/p/yii-automatically-generated-migration-files/source/checkout](https://code.google.com/p/yii-automatically-generated-migration-files/source/checkout)

我从头开始创建它，因为我对必须手动执行此操作才能将其分发给我的团队的事实感到恼火。

希望能帮助到你！

随时分享错误、改进和评论。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-14T20:11:44.460

在做了一些研究之后，这是你需要的 Laravel：[https ://github.com/XCMer/larry-four-generator](https://github.com/XCMer/larry-four-generator)

（至少是第 4 版，谁知道这会工作多久，Laravel 变化太快，并且有太多重大变化）

您需要运行`php artisan larry:fromdb`它，它会向您显示表格...您还可以排除或仅处理某些表格（查看自述文件）。

同样，如果你想在 MySQL Workbench 之类的东西中构建你的模式，超级超级有用。我还看到提到了一个可以解析工作台文件的包......但是链接已经死了。

您可能还希望将此 larry 包用于：[https ://github.com/JeffreyWay/Laravel-4-Generators](https://github.com/JeffreyWay/Laravel-4-Generators)

然后，您可以创建一个 la CakePHP 样式的脚手架。

或者，试试这个包：[https ://github.com/barryvdh/laravel-migration-generator](https://github.com/barryvdh/laravel-migration-generator)*

# clojure - 需要与 disj 类似的功能，但需要 clojure 中的列表。总体上可能吗？

> ID：13605768
> 
> 赞同：3
> 
> 时间：2012-11-28T13:07:34.390
> 
> 标签：clojure

我需要遍历一个列表并对每个元素和不包括该元素的元素进行一些计算。例如，有一个 list ，`(1 2 3 1)`我需要对`(1) (2 3 1)`、`(2) (1 3 1)`和。`(3) (1 2 1)``(1) (2 3 1)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:50:34.067

似乎是列表理解的工作：

```
(defn gimme-pairs [coll]
  (for [x coll]
    [(list x) (remove #{x} coll)]))

user=> (gimme-pairs [1 2 3])
([(1) (2 3)] [(2) (1 3)] [(3) (1 2)]) 
```

我实际上会跳过为单个元素创建列表，这将使代码更容易：

```
(defn gimme-pairs [coll]
  (for [x coll]
    [x (remove #{x} coll)]))

user=> (gimme-pairs [1 2 3])
([1 (2 3)] [2 (1 3)] [3 (1 2)]) 
```

如果您需要保留重复项，则可以使用索引集合：

```
(defn gimme-pairs [coll]
  (let [indexed (map-indexed vector coll)
        remove-index (partial map second)]
    (for [[i x] indexed]
      [x (remove-index (remove #{[i x]} indexed))])))

user=> (gimme-pairs [1 2 3 1])
([1 (2 3 1)] [2 (1 3 1)] [3 (1 2 1)] [1 (1 2 3)]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T14:04:36.323

> (...) 每个元素和不包括该元素的元素。

*每个元素*听起来都像`map`. *排除该元素*听起来像一个`filter`. 让我们从后者开始。

```
user=> (filter #(not= % 1) '(1 2 3))
(2 3) 
```

伟大的。现在让我们尝试将它映射到所有元素上。

```
user=> (let [coll '(1 2 3)] (map (fn [elem] (filter #(not= % elem) coll)) coll))
((2 3) (1 3) (1 2)) 
```

创建实际的配对留给读者作为练习。提示：修改中使用的闭包`map`。

请记住，上面建议的解决方案应该适用于短列表，但它的复杂度为 O(n²)。另一个问题是没有正确处理具有重复项的集合。

让我们采用递归方法。我们将基于`loop`和的递归`recur`。

```
(defn pairs [coll]
  (loop [ahead coll behind [] answer []]
    (if (empty? ahead)
      answer
      (let [[current & remaining] ahead]
        (recur remaining
               (conj behind current)
               (conj answer [(list current)
                             (concat behind remaining)])))))) 
```

一个简单的例子：

```
user=> (pairs '(1 2 3))
[[(1) (2 3)] [(2) (1 3)] [(3) (1 2)]] 
```

具有重复项的向量：

```
user=> (pairs [1 5 6 5])
[[(1) (5 6 5)] [(5) (1 6 5)] [(6) (1 5 5)] [(5) (1 5 6)]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:24:44.223

```
(def l [1 2 3])

(first (reduce (fn [[res ll] e]
                 [(conj res [(list e) (rest ll)])
                  (conj (vec (rest ll)) e)])
               [[] l] l))
=> [[(1) (2 3)] [(2) (3 1)] [(3) (1 2)]] 
```

# jquery - 填充剩余垂直空间的第二个元素

> ID：13605773
> 
> 赞同：3
> 
> 时间：2012-11-28T13:07:37.417
> 
> 标签：jquery, html, css

我有一个固定高度的容器。

容器有 2 段。

我希望第一个`p`具有动态高度（具有最小高度和最大高度），具体取决于它的内容，而第二个 p 占据剩余的垂直空间。

例如在[这个小提琴](http://jsfiddle.net/danield770/ryZvL/)中：我希望粉红色的 p 填充剩余的黄色空间，并在第一个 p 元素增长时相应地缩小。

我已经看到如何让 div 填充水平空间（即使用`bfc`- 块格式化上下文），但我似乎无法找到垂直填充的 css 解决方案。

如果这不能用 css 完成，我想知道如何用 jquery 做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T13:19:35.193

你可以像这样使用第二个粉色 div

```
.two
{
    background-color: pink;
    height: inherit;
} 
```

[看到这个小提琴](http://jsfiddle.net/Dineshkani/4jMqx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T20:22:32.650

实际上，这样做的方法是使用[css tables](http://www.w3.org/TR/CSS2/tables.html#table-display)。

在第二个表格行上设置`height:100%`是导致它占用“剩余高度”的原因

**[更新小提琴 - 小内容](http://jsfiddle.net/danield770/ryZvL/13/)**

**[更新小提琴 - 更多内容](http://jsfiddle.net/danield770/ryZvL/14/)**

## 标记

```
<div class="wrapper">
    <div class="one">
        text1
    </div>
    <div class="two">
        text2
    </div>
</div> 
```

## CSS

```
.wrapper
{
    height:200px;
    width: 200px;
    background-color: yellow;
    display: table;
}
.wrapper > div
{
    width: 100%;
    display: table-row;
}
.one
{
    min-height: 100px;
    max-height: 180px;
    background-color: beige;
    text-align: left;

}
.two
{
    background-color: pink;
    height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:24:43.250

使用 jquery 你可以做到这一点：试试看：

```
var fillRemaining = $("p.one").parent().height() - $("p.one").height();
$(".p.two").css('height',fillRemaining); 
```

完成......祝你好运

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-28T13:23:22.190

如果你正在处理`background colors`你可以[做这个技巧](http://jsfiddle.net/ryZvL/3/)

# java - 如何在 JUnit 4 测试类中运行单个方法？

> ID：13605774
> 
> 赞同：2
> 
> 时间：2012-11-28T13:07:40.097
> 
> 标签：java, junit, junit4, junit3

我已经查看了所有类似的问题，但在我看来，没有一个给出可靠的答案。我有一个测试类（JUnit 4，但也对 JUnit 3 感兴趣），我想从这些类中以编程/动态方式（而不是从命令行）运行各个测试方法。比如说，有 5 种测试方法，但我只想运行 2 种。我怎样才能以编程方式/动态方式实现这一点（而不是从命令行、Eclipse 等）。

此外，在测试类中存在带`@Before`注释的方法的情况。因此，在运行单个测试方法时，`@Before`也应该预先运行。怎么能克服呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:55:13.710

这是一个简单的单一方法运行器。它基于 JUnit 4 框架，但可以运行任何方法，不一定用 @Test 注释

```
 private Result runTest(final Class<?> testClazz, final String methodName)
            throws InitializationError {
        BlockJUnit4ClassRunner runner = new BlockJUnit4ClassRunner(testClazz) {
            @Override
            protected List<FrameworkMethod> computeTestMethods() {
                try {
                    Method method = testClazz.getMethod(methodName);
                    return Arrays.asList(new FrameworkMethod(method));

                } catch (Exception e) {
                    throw new RuntimeException(e);
                }
            }
        };
        Result res = new Result();
        runner.run(res);
        return res;
    }

    class Result extends RunNotifier {
        Failure failure;

        @Override
        public void fireTestFailure(Failure failure) {
            this.failure = failure;
        };

        boolean isOK() {
            return failure == null;
        }

        public Failure getFailure() {
            return failure;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:11:47.077

我认为这只能通过自定义[TestRunner](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/textui/TestRunner.html)来完成。您可以在启动测试时将希望运行的测试名称作为参数传递。一个更高级的解决方案是实现一个自定义注释（比如说@TestGroup），它以组名作为参数。您可以用它来注释您的测试方法，为您想要一起运行的那些测试提供相同的组名。同样，在启动测试时将组名作为参数传递。在您的测试运行程序中，仅收集具有相应组名的方法并启动这些测试。

但是，最简单的解决方案是将要单独运行的那些测试移动到另一个文件中......

# c# - Singleton 中具有生活方式 PerWebRequest 的对象

> ID：13605777
> 
> 赞同：2
> 
> 时间：2012-11-28T13:07:47.260
> 
> 标签：c#, inversion-of-control, castle-windsor

如果在每个请求中创建了具有 Singleton 生活方式 PerWebRequest 的对象，我在文档中没有找到任何参考。

对我来说，似乎当 PerWebRequest 对象在 Singleton 中解析时，它将在本地存储到 Singleton 对象，并且不再充当 PerWebRequest 对象。

它是错误还是功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:33:40.670

您能否澄清一下“单例中具有生活方式 PerWebRequest 的对象”是什么意思？如果您的意思是您有一个具有 Singleton 生活方式的对象依赖于具有 PerWebRequest 生活方式的对象，那么 Singleton 对象将在容器的整个生命周期内具有相同的 PerWebRequest 对象实例。Castle 不会“即时”“修改”依赖项（这没有多大意义）。通常，对象具有“较短”预期生活方式的依赖关系并不是一个好主意（单例不应该依赖于瞬态或 PerWebRequest）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T21:13:22.300

很可能这是一个错误。准确地说，这是应用程序代码中的错误，而不是 IoC 容器中的错误。

长寿命对象不应试图将短寿命对象作为其状态的一部分。

解决方案是要么完全删除依赖关系，要么将依赖关系从对象状态的一部分中删除。

# java - 使实例变量静态

> ID：13605778
> 
> 赞同：0
> 
> 时间：2012-11-28T13:07:52.190
> 
> 标签：java

我遇到了一个关于使实例变量静态的Java问题：

```
public class Student {
 private static String name;

 public Student(String name) {
    this.name = name;
 }

 public String getName() {
  return name;
 }  
} 
```

并测试：

```
public void testBadStatic() {
  Student studentA = new Student("a");
  assertEquals("a", studentA.getName());
  Student studentB = new Student("b");
  assertEquals("b", studentB.getName());
  assertEquals("a", studentA.getName()); 
```

我认为第二个 assertEquals 会失败，因为 name 变量是静态的，所以它已经被分配了“a”。但是，正确的输出对于第二个断言应该是 true，对于最后一个断言应该是 false。有人可以帮我理解这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:11:58.763

我认为您在`final`和`static`变量之间感到困惑。

**最终**（但不是静态）变量与实例相关联，并且可以在构造函数中或通过静态初始化获取值。

**静态**变量与类相关联，因此对于给定类的所有实例，它们在一个 JVM 实例中共享相同的值。

**最终静态**变量提供了两者中最受限制的一个：它实际上是一个常量：不能更改，并且对于给定类的所有实例都是相同的。

结论：

```
this.name = name; 
```

语句更新一个与类相关的值，而不是单个实例，因此在这样的调用之后，每个实例将“看到”相同的值 - 最后一次赋值操作的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:11:03.447

第二个断言不会失败，因为这一行：

```
Student studentB = new Student("b"); 
```

将更改*所有*实例的`name`变量。

 *所以当第二个断言出现时，`Student.name` *is* `"b"`。（请注意，这是`Student`我在这里引用的类）。

第三个断言确实会失败，因为`name`对于所有实例（现在`studentA`和`studentB`现在都是`"b"`.

换句话说：

```
Student studentA = new Student("a");
  // studentA.name = "a"
assertEquals("a", studentA.getName());    // This passes
Student studentB = new Student("b");
  // studentB.name = "b"
  // studentA.name = "b"
assertEquals("b", studentB.getName());    // This passes
assertEquals("a", studentA.getName());    // This fails 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:11:35.687

> 公共学生（字符串名称）{

这是你的构造函数。每当您创建此类的实例时，都会调用此“方法”。但是，静态变量属于该类。因此，将静态字符串名称设置为一个值会更改所有现有实例的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:11:30.730

静态变量不是“不变”意义上的“静态”——它意味着所有实例共享同一个变量，因此第二个构造函数调用将静态变量的值替换为“b”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T13:09:22.410

尝试 ：

```
public class Student {
    private static String name;

    public Student(String name) {
        Studen.name = name;
    }

    public String getName() {
        return Student.name;
    }  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T13:14:02.150

第二个断言将传递您将“b”分配给构造函数中的静态变量。这也是第三个断言会失败的原因（预期为“a”，发现为“b”）。*

# php - 使用 SUM 的 ZF2 自定义数据库查询

> ID：13605785
> 
> 赞同：1
> 
> 时间：2012-11-28T13:08:15.583
> 
> 标签：php, mysql, zend-framework2

有人可以给我一个提示我做错了什么吗？

```
public function getPaymentSumByTypeAndProject($project_id,$type) {
  $type = (int) $type;
  $project_id = (int) $project_id;
  $rowset = $this->tableGateway->select(array('total_amount' => new Expression('SUM(payment.amount)')))->where(array('type' => $type, 'project_id' => $project_id));
  $row = $rowset->toArray();
  if (!$row) {
    throw new \Exception("Busted :/");
  }
  return $rowset;
} 
```

我想做同样的查询：

```
SELECT SUM(amount) FROM payment WHERE type='$type' AND project_id ='$project_id'; 
```

编辑：我取得了很小的进步，我已经想出了如何对整列求和

```
public function getPaymentSumByTypeAndProject($project_id, $type) {
    $type = (int) $type;
    $project_id = (int) $project_id;
    $resultSet = $this->tableGateway->select(function (Select $select) {
                $select->columns(array(new \Zend\Db\Sql\Expression('SUM(amount) as amount')))->where('type="0"');
            });
    return $resultSet; 
```

也许有人可以帮我弄清楚如何添加条件：“WHERE type='$type' AND project_id='$project_id'”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T10:38:52.623

我知道这是一个老问题，但我遇到了它，并认为我会投入两分钱：

```
public function getPaymentSumByTypeAndProject($project_id, $type) {
    // This TableGateway is already setup for the table 'payment'
    // So we can skip the ->from('payment')
    $sql = $this->tableGateway->getSql();

    // We'll follow the regular order of SQL ( SELECT, FROM, WHERE )
    // So the query is easier to understand
    $select = $sql->select()
            // Use an alias as key in the columns array instead of
            // in the expression itself
            ->columns(array('amount' => new \Zend\Db\Sql\Expression('SUM(amount)')))
            // Type casting the variables as integer can take place
            // here ( it even tells us a little about the table structure )
            ->where(array('type' => (int)$type, 'project_id' => (int)$project_id));

    // Use selectWith as a shortcut to get a resultSet for the above select
    return $this->tableGateway->selectWith($select);
} 
```

此外，可以像这样从表网关中检索适配器：

```
$adapter = $this->tableGateway->getAdapter(); 
```

但是当您使用上述方法进行选择时，您不再需要它了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T06:14:33.163

好的，现在这正在工作，告诉我这是怎么做的？

```
 public function getPaymentSumByTypeAndProject($project_id, $type) {
        $type = (int) $type;
        $project_id = (int) $project_id;
        $adapter = $this->tableGateway->adapter;
        $sql = new Sql($adapter);
        $select = $sql->select();
        $select->from('payment');
        $select->where(array('type'=>$type,'project_id'=>$project_id));
        $select->columns(array(new \Zend\Db\Sql\Expression('SUM(amount) as amount')));
        $selectString = $sql->getSqlStringForSqlObject($select);
        $resultSet = $adapter->query($selectString, $adapter::QUERY_MODE_EXECUTE);
        return $resultSet;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-19T05:45:10.293

用这个

```
 $select = $this->getSql()->select()
       ->columns(array('amount' => new \Zend\Db\Sql\Expression('SUM(amount)')))
       ->where("type ='$type'")
       ->where("project_id ='$project_id'");
    $resultSet = $this->selectWith($select);
    $row = $resultSet->current();   
    // echo $select->getSqlString();die; //check query use this line
    if(!$row){
        return False;
    }
    return $row->amount; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:13:27.767

尝试那样做而不是`(int) $type`

```
 intval($type); 
```

和

```
 intval($project_id); 
```

并在您的 sql 中将您的变量更改为

```
 '".$type."' 
```

和

```
 '".$project_id."' 
```

# actionscript-3 - 根据条件显示弹性状态

> ID：13605791
> 
> 赞同：0
> 
> 时间：2012-11-28T13:08:35.177
> 
> 标签：actionscript-3, flex4

我正在创建一个弹性应用程序。我创建了一个 mxml 文件，它有两个 spark 状态 State 1、State 2、一个按钮和三个复选框。状态 1 是一个主 mxml。当我单击按钮时，它进入状态 2。状态 2 是另一个 mxml，我已将其导入到主 mxml 中，例如

```
<summary:mySummary includeIn="mySummaryDetails" /> 
```

mySummary mxml 还包含四种不同的状态。

我的需要是当我从状态 1 中选择复选框并单击按钮然后根据选定的复选框我想从 mySummary mxml 显示特定状态。那么我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:11:06.747

尝试在单击方法中检查您的复选框选择。

```
function buttonClick():void
{
  currentState = "State2";

  if(checkBox1.selected)
     mySummary.currentState = "mySummaryState1";

  if(checkBox2.selected)
     mySummary.currentState = "mySummaryState2";

  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:11:52.253

您可以添加到您的`click`方法：

```
mySummary.currentState = "State1"; 
```

# ajax - Rails 提交远程表单单击单选按钮

> ID：13605801
> 
> 赞同：1
> 
> 时间：2012-11-28T13:09:27.970
> 
> 标签：ajax, ruby-on-rails-3

当您选择单选按钮（如下）时，我有一个提交的表单。目前页面在提交时会刷新，我想使用 Jquery 和远程提交，所以它不会刷新。知道从哪里开始吗？

```
<%= simple_form_for(@order) do |f| %>
    <%= f.input :orderstatus_id, :as => :radio, :label => false do %>
        <% current_user.account.orderstatuses.order(:status_order).each do |os| %>
        <p id="invoice-color-select">
                <%= f.radio_button :orderstatus_id, os.id, :class => 'selector', :onclick => "this.form.submit();" %>
                <%= f.label "#{os.name}", :style => "background: ##{os.color}", :class => 'status' %>
    </p>
      <% end %>
    <% end %>

    <div style="margin-top:20px">
        <% if !current_user.account.has_plan? || current_user.account.plan_key== "ultra" %>
            <a class="fancybox" href="#editstatus">Edit</a>
        <% end %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:32:40.873

我将此添加到我的视图中：

```
<%= f.radio_button :orderstatus_id, os.id, :class => 'selector', :onclick => "this.form.submit();" %> 
```

您可以在`:onclick`此处查看该部分。

# visual-studio - 从 Visual Studio 2012 Express 添加 Team Foundation Server

> ID：13605813
> 
> 赞同：1
> 
> 时间：2012-11-28T13:10:16.747
> 
> 标签：visual-studio, azure-devops

我已经注册了[Visual Studio Team Foundation Service](http://tfs.visualstudio.com/)。我已经建立了一个新的团队项目。当我单击“打开 Visual Studio 的新实例”链接时，没有任何反应。所以，我想我会尝试手动添加团队基础服务器。因此，我尝试将以下 URL 添加为我的团队基础服务器。预览显示：[http](http://mydomain.visualstudio.com:8080/) ://mydomain.visualstudio.com:8080/ 。当我尝试添加它时，我收到以下错误：

```
TF31002: Unable to connect to this Team Foundation Server: http://mydomain.visualstudio.com:8080/. 
```

我还尝试连接到此 URL [http://mydomain.visualstudio.com:8080/defaultcollection](http://mydomain.visualstudio.com:8080/defaultcollection)，但出现相同错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:08:26.967

尝试[http://mydomain.visualstudio.com:8080/tfs](http://mydomain.visualstudio.com:8080/tfs)。这种格式对我有用

# matlab - 过滤音频信号

> ID：13605815
> 
> 赞同：0
> 
> 时间：2012-11-28T13:10:26.817
> 
> 标签：matlab, filter

我在 MATLAB 中使用 FDAtool 制作了 Equiripple FIR 高通滤波器。我想从这个过滤器传递一个语音信号，只选择语音输入的高频部分。问题是我不知道如何通过这个过滤器传递语音输入。

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:16:38.677

wavread('filename') 将 wav 文件转换为数字数组。尝试搜索“使用 MatLab 进行音频处理”以获取详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:16:36.437

将文件中的语音信号读入向量，然后使用类似

```
d = fdesign.highpass('N,Fc',10,1000,48000);
hp = design(d);
signal = filter(hp, signal) 
```

在这里找到：

[http://www.mathworks.de/de/help/dsp/ref/fdesign.highpass.html](http://www.mathworks.de/de/help/dsp/ref/fdesign.highpass.html)

# jquery - jquery themeroller 中使用的小部件？

> ID：13605819
> 
> 赞同：4
> 
> 时间：2012-11-28T13:10:30.070
> 
> 标签：jquery

我需要自定义我的网站，比如准备好主题滚轮，而且我不知道 jquery 主题滚轮中使用的小部件，所以我需要 jquery themeroller 中使用的小部件的详细信息`i searched a lot but no use in that`。有什么可以帮助我的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:07:17.737

看起来[*lavoiesl*](https://github.com/lavoiesl/jQueryUIThemeRoller)做得很好，收集了制作本地版本的 Themeroller 所需的所有必要文件。恕我直言，我不会使用此工具，因为并非所有浏览器都支持它，并且您必须为所有元素指定特定的类名。

但是，如果你想走这条路，你需要做的就是上传[*lavoiesl*](https://github.com/lavoiesl/jQueryUIThemeRoller)存储库的内容并导航到 /themeroller/index.php ，然后你就走了。破解！

[仅供参考：经过测试，我发现在 _head.php 文件中，app_screen 样式表在http://jqueryui.com/themeroller/app_css/app_screen.css](http://jqueryui.com/themeroller/app_css/app_screen.css)不再可用，它现在位于：[http://static .jquery.com/ui/themeroller/app_css/app_screen.css](http://static.jquery.com/ui/themeroller/app_css/app_screen.css)。

这是我根据上面列出的步骤整理的测试页面：http: [//jeffreykarbowski.com/themeroller/themeroller/](http://jeffreykarbowski.com/themeroller/themeroller/)

祝你好运！

# java - 在java中将字节转换为blob并再次从blob转换为字节时的不同结果

> ID：13605822
> 
> 赞同：0
> 
> 时间：2012-11-28T13:10:35.940
> 
> 标签：java

我有一个将指纹模板转换为字节数组（序列化）的任务。然后我比较了两个字节数组，然后将其转换为 blob，然后将其从字节数组转换回 blob。当我打印它们时，它们给了我不同的结果。这是代码

```
`Blob blob = con.createBlob();
blob.setBytes(1, enroller.getTemplate().serialize());
System.out.println(enroller.getTemplate().serialize());
//prints [B@53de73a3

int blobLength = (int) blob.length();  
byte[] blobAsBytes = blob.getBytes(1, blobLength);
System.out.println(blobAsBytes);
//prints [B@3179fd59` 
```

有任何想法吗？

编辑：我也尝试使用 array.equals() 它给了我一个错误的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:13:28.657

为什么你会期望这些是一样的？您正在使用`toString()`字节数组上的方法进行打印，这将为您提供类型信息 + 与（但不一定）内存位置相关的数字*（*实际上`hashCode()`是`toString()`未覆盖的时间）。

如果要比较这些，请`equals()`在两个字节数组上使用。或者可能一个一个地比较元素（如果大小不匹配，首先检查长度以避免不必要的遍历）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:13:43.820

打印的输出是“java object id”，而不是数组的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:14:49.900

您不是在比较数组的内容，而是比较它们的引用。

使用[`Arrays.equals()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29)它包含各种原始类型的重载方法。

# c# - Winforms DataBinding 仅以一种方式工作

> ID：13605824
> 
> 赞同：1
> 
> 时间：2012-11-28T13:10:40.973
> 
> 标签：c#, .net, winforms, data-binding

我通过以下方式进行 DataBinding

```
 private List<MyEditor> Editors { get; set; }
    private Dictionary<int,object> dictionary

    private void SetEditors()
    {
        Editors.Clear();

        foreach (var element in dictionary)
        {
            var editor = MyFactory.GetEditor();
            editor.DataBindings.DefaultDataSourceUpdateMode = DataSourceUpdateMode.OnPropertyChanged;
            editor.DataBindings.Add("Value", element, "Value");

            //some code

            Editors.Add(editor);

        }

        //some more code
    } 
```

然后在 GUI 中我对`Value`of进行了一些更改`Editors[0]`，之后在另一段代码中我尝试从`dictionary`元素中获取值并发现它没有改变，即使我`Editors[0].DataBindings["Value"].WriteValue()`用来确保将数据写入`dictionary`.

在调试器中，我可以看到下图：

```
 Editors[0].DataBindings["Value"]    {System.Windows.Forms.Binding}  System.Windows.Forms.Binding
            ....
    DataSource  {[0, oldValue]} object {System.Collections.Generic.KeyValuePair<int,object>}
            .... 
```

尽管

```
 Editors[0].Value    "newValue"  object {string} 
```

会是什么呢？将不胜感激任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:46:00.460

我不确定我是否正确地遵循，但我相信答案是当您枚举字典时，您获得的 KeyValuePair (KVP) 对象是在枚举时创建的。再次枚举它，您将得到一组不同的对象。这是因为 KVP 是一种值类型。

要更改 KVP 引用的内容，您必须返回到原始 Dictionary 对象。数据绑定不会这样做。

# excel - Excel 匹配多个条件加搜索

> ID：13605825
> 
> 赞同：1
> 
> 时间：2012-11-28T13:10:41.927
> 
> 标签：excel, search, excel-2007, match

这是我之前的两个问题的后续：[Excel Match multiple criteria](https://stackoverflow.com/questions/13588655/excel-match-multiple-criteria) and [Excel find cells from range where search value is within the cell](https://stackoverflow.com/questions/13587464/excel-find-cells-from-range-where-search-value-is-within-the-cell)。抱歉，如果我张贴过多，但我认为每个问题都略有不同，如果我不能将他们的答案标记为正确，那么为后续问题打扰人们似乎是不公平的。

如果满足所有条件，我有这段工作代码，它检查 3 列数据以从 range1 返回一个值：

```
=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(SEARCH(range4,J2)),0)) 
```

但是，如果在 range4 或 range5 中找到匹配项，我需要 SEARCH 选项才能工作，并且感谢该站点的 John Bustos 和 Barry Houdini，我知道如何在 MATCH 函数中使用 OR 命令：

```
=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(((C2 = range4)+(D2 = range5))>0),0)) 
```

上面的代码适用于完全匹配，但 C2 和 D2 的值是包含在单个单元格中的数字列表，并且 range4 和 range5 是每个单元格中的单个年份，因此必须使用 SEARCH 函数来检查单个年份是否存在年列表。因此，从上面的两个工作代码来看，我认为这会起作用：

```
=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(((SEARCH(range4,J2))+(SEARCH(range5,J2))>0)),0)) 
```

但是，它没有，也没有：

```
=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(((SEARCH(range4,J2))+(SEARCH(range5,J2)))),0)) 
```

我记得按 CTRL+SHIFT+ENTER，它总是返回 #N/A。我知道它应该返回值，因为第一个示例在我尝试将其转换为 OR 命令之前有效。

我希望有人可以对此有所了解。提前致谢，

最好的祝愿，

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:41:28.803

对于数组公式，它不是“Ctrl + Shift + Enter”。试试看它是否有任何作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:42:37.363

更改为 SEARCH 时遇到的问题是，`C2=range4`在以前版本的公式中，结果为 TRUE 或 FALSE，而`SEARCH(range4,J2)`返回数字（J2 中范围 4 值的位置）或 VALUE！如果它不在 J2 中，则错误

...因此，如果只有一个 SEARCH 找到了一个值，而另一个没有找到，您仍然会得到由那个没有找到的错误产生的错误，并且 MATCH 不会得到匹配，所以“OR”不起作用........要解决这个问题，您需要添加一些内容以使搜索返回 TRUE 或 FALSE - 您可以使用 ISNUMBER 执行此操作，即

`=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(ISNUMBER(SEARCH(range4,J2))+ISNUMBER(SEARCH(range5,J2))>0),0))`

另请注意，您引用的第一个公式：

`=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*(SEARCH(range4,J2)),0))`

可能无法按预期工作，因为 SEARCH 可能返回 1 以外的数字，因此您也需要 ISNUMBER ，即

`=INDEX(range1,MATCH(1,(A2=range2)*(B2=range3)*ISNUMBER(SEARCH(range4,J2)),0))`

# ruby-on-rails - 显示用户在 rails 中使用 from 和 to date 切换

> ID：13605826
> 
> 赞同：0
> 
> 时间：2012-11-28T13:10:45.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有下表，其中包含日期和用户班次。 ![在此处输入图像描述](../Images/c0f8cc2d52b52bb7f011e3c8ef9976d6.png)

在视图中，我必须以表格形式显示`from_date`[Shift start date] `to_date`[Shift end date.] 和`shift_id` 用户。这似乎很复杂。我正在考虑使用“ `group by`”，但我做不到。如果你们可以给我查询我可以显示它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:22:26.977

我想您正在尝试在一个查询中选择开始日期和结束日期。如果是这样，查询可能是这样的：

```
SELECT a.*, (SELECT min(shift_date) FROM shifts
             WHERE user_id = a.user_id AND shift_date > a.shift_date) end_date
  FROM shifts a 
```

您可以根据您的要求调整此查询并将其转换为 Rails 的查询。

# php - MySQLi 在第一次查询后准备查询失败

> ID：13605833
> 
> 赞同：0
> 
> 时间：2012-11-28T13:10:55.827
> 
> 标签：php, mysql, mysqli, prepared-statement

我有一个函数可以从一个表中选择大量信息。然后这会启动另一个函数以从另一个表中获取一些信息。

这是缩短的代码：

```
$con = new mysqli("localhost", "user", "password");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$con->select_db("stories_test");

getStories($con);

function getStories($con) {
    ... //get's a load of data from one table
    $result = getStoryName($con, $stringstoryid);
    ... //More stuff here
}

function getStoryName($con) {
    $newquery = "SELECT storyname, genre FROM stories WHERE storyid = 'Anewstory9856'";
    if ($stmt = $con->prepare($newquery)) {
        echo $newquery;
        $stmt->execute();
        $stmt->bind_result($storname, $genre);
        while ($stmt->fetch()) {
            $resultarray = array (
                'storname' => $storname,
                'genre' => $genre
            );
        }
    }
    else {
        echo 'statement failed';
    }
    return $resultarray;
} 
```

我得到的只是第二个查询中的“语句失败”。我已经在一个单独的脚本中尝试了完全相同的查询，它工作正常，但在这里它似乎在“准备”时失败了。

有没有人有任何线索？

# java - HSQLDB 2.2 跳过某些实体而不为它们创建表

> ID：13605835
> 
> 赞同：0
> 
> 时间：2012-11-28T13:10:56.390
> 
> 标签：java, hibernate, hsqldb

我正在使用`Hibernate 3.5.5`和`HSQLDB 2.2.9`。我使用 JPA 语义来定义实体并拥有大约 10 个实体。

由于某些未知原因，HSQLDB 似乎没有选择三个实体，因为我在 HSQLDB 资源管理器中找不到相应的表，并且对这些表的任何引用都会导致 SQL 异常`user lacks privilege or object not found: <TableName>`。

所有三个实体的格式都与其他实体相同，如下所示：

```
@Entity
@Table(name = "<TABLE_NAME>")
public class TableName
{
     // private members;

     // protected default constructor for the ORM

     @Id
     @Column(name = <PRIMARY_KEY>)
     // public getter for Primary Key member.

     @Column(name = <COLUMN_NAME>)
     // public getters for all other members;

     // protected setters
} 
```

有没有人遇到过 HSQLDB 跳过某些实体的类似问题？

至少，它一直在跳过相同的三个实体，我无法弄清楚这些实体与其他实体有什么不同。所有这些实体都是使用 Eclipse 中的 JPA facet 生成的，因此它们之间没有区别。

**编辑 1**：

我的 persistence.xml 就是这样：

```
<persistence-unit name="fssPersistenceUnit" transaction-type="RESOURCE_LOCAL">
</persistence-unit> 
```

并且 HSQLDB 2.0 用于选择所有带有 注释的实体`@Entity`，而 HSQLDB 2.2.9 并没有选择所有实体，而是留下了前面提到的三个实体。

**编辑 2**：启用 SQL 语句的日志记录后，我看到这三个表的 CREATE TABLE 语句已回滚。我无法获得有关这些创建表语句有什么问题的任何进一步信息。此外，CREATE TABLE 语句在打印时会被截断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:06:55.240

HSQLDB 的 Hibernate 方言在 Hibernate 3.6 及更高版本中进行了更新。不知道 3.5.x 是否能很好地与 HSQLDB 2.2.x 配合使用

在任何情况下，您都可以使用 file: database 并将 hsqldb.sqllog=2 属性添加到数据库 URL。这将生成所有已执行 SQL 语句的日志。然后，您可以检查缺少表的语句。

请参阅指南：

[http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html](http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:34:29.700

好吧，我猜你的代码中实际上并没有这个确切的文本：

```
@Entity
@Table(name = "<TABLE_NAME>")
public class TableName 
```

（使用实际`<TABLE_NAME>`字符串），但是您将其编写为通用/伪代码示例。（因为如果您实际使用字符串“ `<TABLE_NAME>`”，它将是休眠的无效字符串，并且不会创建架构）。

您能告诉我们您在没有由 Hibernate 创建表的实体上使用的实际表名和列名吗？在某些情况下，底层数据库（在您的情况下为 HSQLDB）有一些保留字，它不允许用于表和/或名称，如果是这种情况，它可能会静默失败（我在 PostgreSQL 和 MySQL 中偶然发现了这一点，其中Hibernate 生成的模式可以在 MySQL 中工作，但会默默地无法在 PostgreSQL 中创建某些表，因为后者不“喜欢”某个表名）。

这同样适用于字段/列名称。

# javascript - 是否可以使用 Knockout.js 创建计算数组

> ID：13605837
> 
> 赞同：4
> 
> 时间：2012-11-28T13:11:04.973
> 
> 标签：javascript, knockout.js

我有一个`ViewModel`带有可观察数组的 knockout.js：

```
function ItemsViewModel() {
    this.data = ko.observableArray([
        new Item(1, "One description"),
        new Item(2, "Two description"),
        new Item(3, "Three description"),
        // ... etc
    ]);
} 
```

该项目如下所示：

```
function Item(id, name) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
}; 
```

基于我在我创建的可观察数组，我`ViewModel`想创建第二个计算数组，如下所示：

```
function ItemsViewModel() {
    this.data = ko.observableArray([
        new Item(1, "One description"),
        new Item(2, "Two description"),
        new Item(3, "Three description"),
        // ... etc
    ]);

    this.computedData = // here I want to create a computed array based on the values
                        // of this.data
} 
```

我似乎无法在 knockout.js 文档的任何地方找到如何创建此计算数组的示例。您能否给我一个示例，说明如何将第一个数组转换为以下形式的计算数组：

```
this.computedData = [
    { dataItem: data[0].name + ' ' + data[0].id },
    { dataItem: data[1].name + ' ' + data[1].id },
    // ... etc.
] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T13:33:23.450

您可以`computed`为此使用可观察的：

```
self.computedData = ko.computed(function() {
    return ko.utils.arrayMap(self.data(), function(item) {
        return { dataItem: item.name() + ' ' + item.id() };
    });
}); 
```

这是工作示例：http: [//jsfiddle.net/vyshniakov/3fesA/1/](http://jsfiddle.net/vyshniakov/3fesA/1/)

在文档中阅读有关计算的更多信息：http: [//knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)

# android - Android为一天中的特定时间设置重复警报

> ID：13605840
> 
> 赞同：1
> 
> 时间：2012-11-28T13:11:20.583
> 
> 标签：android, intervals, repeatingalarm

我正在尝试设置一个重复警报，它将每分钟下载一个文件，但仅在 8:00 到 22:00 之间。我觉得我真的很接近，但我看不到我正在犯的错误。当前广播接收器未激活。如果手动设置重复报警为**alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+10000, 60000,pendingIntent);** 它工作正常。任何指导将不胜感激。

```
protected void scheduleNextUpdate()
      {
        Intent intent = new Intent("TEST");
        PendingIntent pendingIntent =
            PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        int updateInterval =  1;
        long nextUpdate =(60000 * updateInterval);

        long currentTimeMillis = System.currentTimeMillis();

        long nextUpdateTimeMillis = currentTimeMillis + nextUpdate;
        Time nextUpdateTime = new Time();
        nextUpdateTime.set(nextUpdateTimeMillis);

        if (nextUpdateTime.hour < 8 || nextUpdateTime.hour > 22)
        {
          nextUpdateTime.hour = 8;
          nextUpdateTime.minute = 0;
          nextUpdateTime.second = 0;
          nextUpdateTimeMillis = nextUpdateTime.toMillis(false) + DateUtils.DAY_IN_MILLIS;
        }

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+10000, nextUpdateTimeMillis,pendingIntent);

        boolean alarmUp = (PendingIntent.getBroadcast(this, 0, 
                new Intent("TEST"), 
                PendingIntent.FLAG_NO_CREATE) != null);

        if (alarmUp)
        {
            Log.d("myTag", "Alarm is already active");
        }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:22:54.897

您应该在 8:00 到 22:00 之间重复设置闹钟，就像您提到的那样：

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+10000, 60000,pendingIntent); 
```

这将每分钟重复一次。但是您必须明确取消警报。您可以在下载完成后取消它，方法是检查它是否已经是 22:00。或者通过另一个将在 22:00 时触发的警报。否则它不会停止。

利用`alarmManager.cancel (pendingIntent)`

此处描述：http: [//developer.android.com/reference/android/app/AlarmManager.html#cancel (android.app.PendingIntent](http://developer.android.com/reference/android/app/AlarmManager.html#cancel(android.app.PendingIntent)

希望这可以帮助。

# php - PHP file_get_contents 然后替换函数中的字符串

> ID：13605842
> 
> 赞同：0
> 
> 时间：2012-11-28T13:11:23.910
> 
> 标签：php, function, file-get-contents, phpmailer, str-replace

> ```
> **User_Tpl.html**
> <html><head></head>
> <body>
> Hello {NAME},
> Business name : {BUSINESS_NAME}.
> Tel : {TELEPHONE}.
> Mob : {MOBILE}.
> </body>
> </html> 
> ```

```
function mailFooter($content) {

  $sBusiness = 'Business name';
  $sTelp = '0';
  $sMobile = '0';

  $content = str_replace('{BUSINESS_NAME}', $sBusiness, $content);
  $content = str_replace('{TELEPHONE}', $sTelp, $content);
  $content = str_replace('{MOBILE}', $sMobile, $content);

  return $content;
}

$content = file_get_contents('page/email/User_Tpl.html');
$content = str_replace('{SUBJECT}', $subject, $content);
$content = str_replace('{NAME}', $ownerName, $content);

**mailerFooter($content);**
// always return {BUSINESS_NAME}, {TELEPHONE}

$mail->AddAddress( $email );
$mail->SetFrom($name );
$mail->AddReplyTo( $reply );
$mail->Subject = trim($subject);
$mail->MsgHTML( trim($content) );
$mail->IsHTML(true); 
$mail->Send(); 
```

我使用 PHPMailer 作为 Mailer 库以及如何替换 mailFooter() 函数中的那些 {strings}。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:28:58.230

使用数组

```
$content ='
<html><head></head>
<body>
Hello {NAME},
Business name : {BUSINESS_NAME}.
Tel : {TELEPHONE}.
Mob : {MOBILE}.
</body>
</html>';

$search= array ('{BUSINESS_NAME}','{TELEPHONE}','{MOBILE}');
$replace=array($sBusiness,$sTelp,$sMobile);
$content =str_replace($search,$replace,$content); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T14:26:33.603

```
 private arr = array(
    "{title}" => "Home page",
    "{email}" => "my@mail.com",
    ...
    );
    private $content = "Title for my site - {title}, if you interesting my email addres -> {email}"

$this->content = strtr($this->content, $this->arr);

echo $this->content; 
```

此返回 -> “我的网站的标题 - 主页，如果您对我的电子邮件地址感兴趣 -> my@mail.com”

# ios - “__block 变量”内存管理的规则是什么？

> ID：13605844
> 
> 赞同：2
> 
> 时间：2012-11-28T13:11:25.490
> 
> 标签：ios, variables, object, memory-management, block

我阅读了“块编程主题”文档。但我对`__block Variables`'s 的管理不是很清楚。

当`__block Variables`是一种标准 C 标量（如 int、double）时，一切正常。但如果它是一个对象。当我使用复制相关的块变量时`Block_copy()`。我发现对象的retainCount总是1。那么我该如何管理内存呢？是否我只需要管理相关的块变量使用`Block_release`，运行时系统会处理`__block Variables`。

我不是英语母语人士，希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:05:18.313

在非 ARC 情况下，__block 修饰符不要增加 retainCount。您必须手动管理对象的生命周期

# javascript - 呈现 div 背景图像后的 jQuery 事件

> ID：13605851
> 
> 赞同：1
> 
> 时间：2012-11-28T13:11:49.167
> 
> 标签：javascript, jquery, html, css

感谢您抽出一些时间。

我想知道是否有一种可能的方法使用 jQuery 在 div 背景图像完成下载和渲染后立即触发函数。

假设你有这个 div

```
<div id="img1" class="img1"> </div> 
```

img1 样式在哪里

```
.img1 {
    background-image: some_big_image.png;
    background-position:center;
    background-repeat:no-repeat;
    background-size:cover;  
    display: none;
} 
```

考虑这个 javascript 函数

```
function showDiv() {
  $("#img1").fadeIn(1000);
} 
```

有没有办法在图像渲染后立即调用上一个函数？通过渲染，我的意思是调整大小以很好地适应它的 div 并准备好显示。

我发现了很多关于在页面加载后或下载图像后触发功能的信息，但没有关于后渲染的信息。

你们是最棒的。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:17:03.973

Try

```
var img = new Image();
img.src = "/some_big_image.png";
img.onload = function( ) {
    $("#img1").css("background-image", "url('" + img.src + "')" ).fadeIn(1000);
} 
```

Fiddle [**here**](http://jsfiddle.net/bruno/5cR4G/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:17:07.803

I know you already accepted an answer above, but this can be simplified grealy to just use the jquery magic function

```
$(function() {
    $("#img1").fadeIn(1000);
} 
```

You replied above that the onload event wasn't working for you. The $(function() { //code here } ); fires when the dom is completely ready (not sure if all browsers do this by default for the onload event), so perhaps that is why you were having issues. It is also handy because you can call it multiple places on your page and they will be combined (rather then directly setting onload, which will be overriden if its set somewhere else)

Fiddle here: [http://jsfiddle.net/5cR4G/8/](http://jsfiddle.net/5cR4G/8/)

# objective-c - iPhone 5 UI 屏幕问题

> ID：13605861
> 
> 赞同：0
> 
> 时间：2012-11-28T13:12:25.373
> 
> 标签：objective-c, user-interface, ios6, xcode4.5, iphone-5

经过大量谷歌搜索后，我问了这个问题。我有一个应用程序，我想让它与 iPhone5 兼容。我在包含近 10 个视图的应用中添加了 Default-568h@2x。所以我改变了这样的看法..

在 viewDidLoad 中：

```
 if ([[UIScreen mainScreen] bounds].size.height >= 568) {
      self.view.frame = CGRectMake(0, 0, 320, 568);
    //iPhone5
    }
    else {
    }
window.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

我在 didFinishLaunching 中使用以下选项进行了更改：

```
window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; 
```

这样做后，我发现了一些问题..

1.  屏幕底部，即 88px 长，即使放置在其上的控件也无法触摸 - 为此，我已在 MainWindow.xib 的属性中设置了 FullScreenAtLaunch 检查，但不起作用
2.  我有文本框，当它聚焦时键盘即将到来，但在键盘视图之上，如何摆脱它。

如何解决这个问题，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:24:04.543

这是因为在您`UIWindow`在 App 委托类中创建您的行中，您可能会有如下内容：

```
self.window = [[UIWindow alloc] initWithFrame:CGRectMake(0,0,320,480); 
```

将其更改为：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

还有你现在做的地方：

```
if ([[UIScreen mainScreen] bounds].size.height >= 568) {
  self.view.frame = CGRectMake(0, 0, 320, 568);
//iPhone5
}
else {
} 
```

你也可以这样做：

```
self.view.frame = [[UIScreen mainScreen] bounds]; 
```

但大多数情况下，这并不需要，因为视图控制器的视图会正确占用空间。如果您在界面生成器中正确设置了 AutoResizeMasks，您将不会在代码中设置框架。

# html - 响应式设计在不同尺寸的屏幕上显示不同

> ID：13605867
> 
> 赞同：0
> 
> 时间：2012-11-28T13:12:36.187
> 
> 标签：html, css, responsive-design

我正在做一个响应式设计的 wordpress 网站。现在我的标记是这样的

```
<div class="contact-wrap">
  <div class="contact-number">123-456-7890</div><!--.contact-number-->
  <div class="user-login"><a href="#"><span class="login-icon">Login</span></a></div><!--.user-login-->
</div> 
```

而css是这样的

```
.contact-wrap {
  padding: 0;
  margin: 25px 0 0 0;
  overflow: hidden;
}
.contact-wrap .contact-number {
  background-image: url('images/contact-icon.png');
  background-position: 0 7px;
  background-repeat: no-repeat;
  color: #d4001a;
  font-size: 22px;
  font-weight: bold;
  padding: 0 0 0 24px;
  float: left;
}
.contact-wrap .user-login {
  padding: 4px 0 0 0;
  float: right;
}
.user-login a {
  background-image: url('images/login-bg-sprited.png');
  background-position: 0 -27px;
  background-repeat: no-repeat;
  padding: ;
  width: 62px;
  height: 27px;
  display:inline-block;
  padding: 0 0 0 4px;
} 
```

现在，由于该站点将处于响应状态，它正在寻找 960 像素和更大的屏幕，但是当我调整屏幕大小时，联系人号码的背景图像不是很好。这是更大屏幕的屏幕截图。 ![在此处输入图像描述](../Images/a9379d77516c7d66b98080d3c43b654d.png)

这是屏幕尺寸`320X480.`

![在此处输入图像描述](../Images/5bcc932368be54ed762e198c22191740.png)

所以有人可以告诉我这里出了什么问题。任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:44:17.587

我测试了您发布的代码，它在所有桌面浏览器中都可以正常工作，甚至 IE

![测试](../Images/8c0c84e889a900f9ad68ad3311854447.png)

您的问题出在您发布的代码周围，可能是某种继承的样式。您可以尝试以下几件事：

将选择器**.contact-wrap .contact-number**更改为简单**的 .contact-number**

将< **div** class="contact-number">123-456-7890</ **div** >改为< **span** class="contact-number">123-456-7890</ **span** >

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:40:19.687

你可以在 div 上做一个负边距顶部 - 登录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T07:21:14.427

我已经浏览了它在不同尺寸的设备上运行良好的代码，它的问题可能与负数上给出的一些边距属性以及其他继承的类有关。

# asp.net - 如何在我的域之外为 href 提供一个位置？

> ID：13605869
> 
> 赞同：1
> 
> 时间：2012-11-28T13:12:36.283
> 
> 标签：asp.net, href

```
 <a target="_blank" href='www.twitter.com/<%#Eval("FromUser") %>'> 
           <asp:Image ID="userImage" runat="server" ImageUrl='<%#Eval("Profile") %>' />
         </a> 
```

当我点击图片时，我被重定向到“http://localhost:49898/www.twitter.com/blablabla”

如何从我的 href 中删除“http://localhost:49898/”这部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:13:59.717

只需添加`http://`到您的锚点：

```
<a target="_blank" href='http://www.twitter.com/<%#Eval("FromUser") %>'> 
    <asp:Image ID="userImage" runat="server" ImageUrl='<%#Eval("Profile") %>' />
</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:14:20.153

把协议放在前面。试试[http://twitter.com](http://twitter.com) ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:14:52.460

试试这个 ：

> href='http://www.twitter.com/<%#Eval("FromUser") %>'

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T13:17:30.927

因为你没有指定 http ，这意味着它没有得到它必须搜索的协议名称或者它没有得到 DNS 服务器，这就是它默认重定向到 localhost 的原因。在锚点前使用 http。

```
<a target="_blank" href='http://www.twitter.com/<%#Eval("FromUser") %>'> 
           <asp:Image ID="userImage" runat="server" ImageUrl='<%#Eval("Profile") %>' />
         </a> 
```

# facebook - 发布显式操作时样式损坏

> ID：13605871
> 
> 赞同：0
> 
> 时间：2012-11-28T13:12:37.873
> 
> 标签：facebook, facebook-graph-api, action

我有一个定义了动作和对象的应用程序；这些动作是明确共享的 ( `fb:explicitly_shared = true`)。

一切都按预期工作，但是，当我在动态消息中看到帖子时，我没有看到编辑对象时看到的模型（通过预览），而是在动态消息中看到了更大的画面。

我附上了 2 张图片，显示了同一帖子的正常样式和异常样式。此行为仅发生在新闻提要中。时间线总是好的。

正常： [https ://picasaweb.google.com/lh/photo/Z5cXJlOR6eRO6Af0PC_ZPNMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/Z5cXJlOR6eRO6Af0PC_ZPNMTjNZETYmyPJy0liipFm0?feat=directlink)

异常： [https ://picasaweb.google.com/lh/photo/TrVV4CCBUoptIIoee4lVKNMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/TrVV4CCBUoptIIoee4lVKNMTjNZETYmyPJy0liipFm0?feat=directlink)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:14:08.147

这是明确共享内容的预期行为。

# mysql - 用于分组数据的 MySQL 查询

> ID：13605872
> 
> 赞同：2
> 
> 时间：2012-11-28T13:12:47.700
> 
> 标签：mysql

谁能指导我为以下场景编写 MySQL 查询。

表中的数据是这样的，

```
Table Name: user

user_id     country     city            age
----------------------------------------------
1           India       Mumbai          22
2           India       Mumbai          22
3           India       Delhi           22
4           India       Delhi           23
5           India       Chennai         23
6           China       Beijing         20
7           China       Beijing         20
8           China       Shanghai        20
9           USA         New York        30
10          USA         New York        30
11          USA         New York        30
12          USA         Los Angeles     31
13          USA         Los Angeles     31
14          USA         Los Angeles     40 
```

我希望结果是这样的，基本上是特定国家城市中所有年龄相同的用户的总和。

```
country     city            age     age_count
----------------------------------------------
India       Mumbai          22          2
India       Delhi           22          1
India       Delhi           23          1
India       Chennai         23          1
China       Beijing         20          2
China       Shanghai        20          1
USA         New York        30          3
USA         Los Angeles     31          2
USA         Los Angeles     40          1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:15:40.353

试试这个 ：;

```
SELECT country,
       city,
       age,
       count(user_id) AS age_count
FROM user
GROUP BY country,
         city,
         round(age) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T13:15:45.023

```
select country, city, age, count(*) age_count
from user 
group by country, city, age 
```

# sql - 这个查询竞争条件是免费的吗？

> ID：13605874
> 
> 赞同：2
> 
> 时间：2012-11-28T13:12:58.077
> 
> 标签：sql, race-condition

假设我们有一个`t1`表，其中整数`weight`列被标记为唯一，`item_id`是主键。以下查询会失败吗？

```
UPDATE t1
  SET weight = SELECT new_weight FROM (
    SELECT MAX(weight) + 1 AS new_weight FROM t1
  ) qs
WHERE item_id = ? 
```

`?`论据在哪里。是否有可能由于比赛两个项目会尝试设置相同的重量？还是该数据库引擎是特定的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:16:29.890

是的，由于比赛条件，您可以获得两个相同的重量值。切换以`ISOLATION LEVEL SERIALIZABLE`避免这种情况（您可能会遇到死锁，而您可以重试。您可以避免任何数据损坏）。或者使用特定于 RDBMS 的适当悲观锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:14:35.210

如果两个事务并行执行，这是可能的。

两个事务将获得相同的值`MAX(weight)+1`，然后尝试使用相同的值进行更新，从而导致违反约束。

# xml - 如何在 Orbeon Form Builder 中添加水平滚动条

> ID：13605877
> 
> 赞同：0
> 
> 时间：2012-11-28T13:13:22.260
> 
> 标签：xml, orbeon, xforms

我们使用表单生成器在重复部分创建了一个包含 14 列的表。现在我们看不到细胞了。因为单元格宽度变窄。如何在表单生成器中添加滚动条以正常查看单元格？
**更新！**
现在它看起来像：[这个](https://www.dropbox.com/s/ejiuwagngjhv2bd/FB.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:48:27.370

对于我在这里放置的一个简单示例，以下内容似乎可以解决问题：

```
.xbl-fr-grid { overflow: scroll }
.xbl-fr-grid .fr-grid { width: 1500px; max-width: none } 
```

但是您可能希望根据自己的情况进行调整，为此使用 Chrome 开发工具或 Firebug，以及 CSS 知识会派上用场。

# java - 在 checkstyle 中使用 ID 抑制

> ID：13605883
> 
> 赞同：3
> 
> 时间：2012-11-28T13:13:38.483
> 
> 标签：java, javadoc, checkstyle

我想让 checkstyle 在测试中忽略缺少的 javadoc for`@throws`子句，但在非测试中抱怨。

因为抑制文件不支持[JavadocMethod](http://checkstyle.sourceforge.net/config_javadoc.html)的子属性，所以我被迫要么完全忽略测试中的 javadoc，要么根本不忽略，没有粒度。这也是[this other question的结论。](https://stackoverflow.com/questions/9016848/how-to-ignore-checkstyle-warning-for-missing-throws-for-test-method)

这就是我现在正在尝试的：我是否可以在我的 checkstyle 配置中有两个具有不同 ID（例如`test`和）的 JavadocMethod 模块，并有选择地在非测试中抑制模块，反之亦然？`notest``test`

我无法让它工作，我开始认为我不能在 checkstyle 中有重复的模块。有什么见解吗？

以下是我在配置 xml 中关于 JavadocMethod 的规则：

```
<module name="JavadocMethod">
  <property name="id" value="nontest"/>
</module>
<module name="JavadocMethod">
  <property name="id" value="test"/>
  <property name="allowMissingThrowsTags" value="true"/>
</module> 
```

这是我的抑制文件：

```
<suppressions>
   <!-- Supress non-test-doc on tests -->
   <suppress id="nontestdoc" files=".*(?:Test|IT).*java" />
   <suppress id="testdoc" files=".*(?!Test|IT).*java" />
</suppressions> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T12:00:01.003

您可以在 checkstyle 中有重复的模块。

分别用和尝试了2个`Indentation`模块。并使用了以下类似的东西`tab 2``tab 4``suppression.xml`

```
<?xml version="1.0"?>

<!DOCTYPE suppressions PUBLIC
    "-//Puppy Crawl//DTD Suppressions 1.1//EN"
    "http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">

<suppressions>
    <suppress id="IndnA" files=".*\.java"/>
    <suppress id="IndnB" files=".*\.java"/>
</suppressions> 
```

什么是正则`.*(?:Test|IT).*java`表达式`.*(?!Test|IT).*java`？为什么要使用 LookAhead？

请检查文件`.*\.java`是否有效。

# php - php 在 mysql 更新查询中使用两个数组

> ID：13605886
> 
> 赞同：1
> 
> 时间：2012-11-28T13:13:44.330
> 
> 标签：php, mysql, sql

嘿伙计们，我想在 mysql UPDATE 查询中使用两个数组。所以这就是我所拥有的：

例如：

```
$ergebnis:
Array ( [0] => 100 [1] => 200 [2] => 15 )

$Index:
Array ( [0] => 3 [1] => 8 [2] => 11 ) 
```

这就是我尝试过的：

```
UPDATE `lm_Artikel` 
SET Bestand='".$ergebnis."' 
WHERE `Index` = '".$Index."' 
```

此查询似乎不起作用。我不知道为什么我启用了 php 错误报告并且没有错误，当我运行查询时它不会更改我的数据库中的任何内容。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:16:58.590

您需要为数组*的每个*元素执行此操作，因此，您可以使用该`foreach()`函数：

```
foreach($ergebnis as $key => $value){
    $sql = "UPDATE lm_Artikel SET Bestand='".$value."' WHERE `Index` = '".$Index[$key]."'";
    mysqli_query($sql);
} 
```

PS很可能有一个纯sql替代方案，但我不太喜欢SQL，所以我会把它留给有更多专业知识的人。

另外，请注意，将索引设置为数组键可能更容易：

```
$ergebnis = Array(3=>100, 8=>200, 11=>15); 
```

然后`foreach()`看起来会好一点：

```
foreach($ergebnis as $key => $value){
    $sql = "UPDATE lm_Artikel SET Bestand='".$value."' WHERE `Index` = '".$key."'";
    mysqli_query($sql);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T13:22:10.527

同学，

看起来您的数据库字段是一个 int 值，因此您可以尝试按值执行它，如下所示：

```
foreach( $Index as $key => $i ) :

    $query = "UPDATE lm_Artikel SET Bestand=".$ergebnis[$key]." WHERE Index = " . $i;
    mysqli_query($query);

endforeach; 
```

尝试一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:19:47.650

1.  您容易受到[**SQL 注入的影响**](https://stackoverflow.com/questions/601300/what-is-sql-injection)
2.  您不能在查询中使用数组。查询是字符串，数组不是。

您要么需要使用循环，要么使用`CASE`语句：

```
UPDATE `lm_Artikel`
SET `Bestandteil` = CASE `Index`
  WHEN <insert id> THEN <insert value>
  WHEN <insert other id> THEN <insert other value>
  <etc>
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T13:19:28.297

```
$data_db = array( '3' => 100,
          '8' => 200,
          '11' => 15);

foreach($data_db as $key=>$value) {
    $q = 'UPDATE lm_Artikel SET Bestand=' . $value . ' WHERE `Index` = ' . $key;
    mysqli_query($sql);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T13:19:15.533

假设这些是值对，即`$ergebnis[0]`是 for`$Index[0]`等等。

```
foreach ($ergebnis as $key => $value) {
    $sql = 'UPDATE lm_Artikel SET Bestand=' . (int)$value . ' WHERE `Index` = ' . (int)$Index[$key];
    // execute query...
} 
```

**几点注意事项：**

*   您对[SQL 注入持](http://php.net/manual/en/security.database.sql-injection.php)开放态度。我用作`(int)`快速补丁。
*   我鼓励您查看[Prepared Statements](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。
*   您应该避免将列命名为 SQL 关键字，例如`Index`.

# java - 从父类重载方法与覆盖

> ID：13605894
> 
> 赞同：1
> 
> 时间：2012-11-28T13:14:15.973
> 
> 标签：java

如果一个方法被重载，它是否仍然从父类继承原始方法？超载呢？它还会继承原来的加上被覆盖的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:16:22.093

> 如果一个方法被重载，它是否仍然从父类继承原始方法？

是的，您可以同时使用它们。

> 超载呢？它还会继承原来的加上被覆盖的吗？

再次 - 是的，但在这种情况下，要访问原始方法，您必须使用 call `super.originalMethod()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:17:19.667

> if a method is overloaded, does it still inherit the original method from the parent class?

yes.

> What about overriding?

yes, but the overidden method is not accessible to other classes.

> Would it also inherit the original plus the overridden one?

yes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:16:57.940

In case of overloading, the method in the parent class is still available in the child class.

In case of overriding, the method doesn't run the parent's version unless explicitly called using `super.method()`.

# xml - 如何使用字段文本而不是字段值导出 TADODataSet

> ID：13605901
> 
> 赞同：1
> 
> 时间：2012-11-28T13:14:40.463
> 
> 标签：xml, delphi, tadodataset

我有一个 TADODataSet 与一个存储过程连接，它产生 40 Columns * 800 Row TADODataSet 有一个 AfterOpen 事件，它为其分配一个 OnGetText 字段如下：

```
procedure TForm1.ADODataSet1AfterOpen(DataSet: TDataSet);
begin
  with DataSet do 
  begin
    Fields[4].DisplayLabel:=TR(AS2); //RefId
    Fields[4].DisplayWidth:=8;
    Fields[4].Tag:=1;
    Fields[4].OnGetText:=RefGetText;

    Fields[5].DisplayLabel:=TR(AS3); //ClientId
    Fields[5].DisplayWidth:=8;
    Fields[5].Tag:=1;
    Fields[5].OnGetText:=ClientGetText;
  end;
end;

procedure TForm1.RefGetText(Sender: TField; var Text: String; DisplayText:   Boolean);
begin
  if Sender.DataSet.FieldByName('RelStoreId').AsString='' then
    Text:='NO REF ID'
  else
    KHDM.RefGetText(Sender,Text,DisplayText);
end;

procedure TForm1.ClientGetText(Sender: TField; var Text: String; DisplayText:   Boolean);
begin
  if Sender.DataSet.FieldByName('ClientId').AsString='' then
    Text:='Client ID is not Assigned'
  else
    KHDM.ClientGetText(Sender,Text,DisplayText);
end; 
```

我想将数据导出到带有文本的 XML 我不想在字段和记录上进行循环，因为它非常慢我想要像批量复制这样的东西来流式传输或类似的东西

我无法改变我的工作方式，因为大约有 800 个模块使用相同的方式......

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:51:14.630

由于您不想进行太多更改，因此您无法做太多优化。

我希望您可以对此进行优化：如果您的数据集具有固定字段（在设计时添加），您可以使用组件字段引用该字段，该字段通常命名为 DataSetNameFieldName，（例如 cdsEmployeeEMPNO）。

如果是这种情况，您可以参考`cdsEmployeeEMPNO.AsString`（或您需要的任何属性）。这更快的原因是因为您在这种情况下使用的字段组件已经知道它引用了哪个字段。

在您的情况下，您使用名称查找：`if Sender.DataSet.FieldByName('RelStoreId').AsString=`.. 这意味着每次，代码都会执行`DataSet.Fields.IndexOf(FieldName)`. 这是一个缓慢的查找，因为这些字段没有排序或任何东西。鉴于您的数据集的大小，这可能是数千个这样的查找，如果您做得更聪明，速度很容易翻倍。

如果由于某种原因，您不能使用这些字段组件包装器，您也可以执行一次查找，将所需字段的索引存储在数据模块中的变量中并请求如下值：`if Sender.DataSet.Fields[RelStoreIdIndex].AsString=` 您现在使用字段的索引直接，这会保存查找。这将使它更快一点。

但是请注意，XML 输出也很慢。您没有显示任何导出代码，但也许那里可能存在一些严重的优化可能性。在开始重构所有内容之前，最好对代码的各个部分进行一些分析以找到实际的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:35:41.523

我以前使用过这种技术 - 对你有帮助吗？我可以看到输出的长度是一个问题，但你可能会以某种方式解决它。也许看看 ClientDataset.SavetoFile() 方法

```
function DataSetToXml(const ADataSet : TOraQuery) : String;
var
  Provider : TDataSetProvider;
  ClientDataSet : TClientDataset;
begin
  Provider := TDataSetProvider.Create(nil);
  try
    Provider.Name := 'tmpProvider';
    Provider.DataSet := ADataSet;
    ClientDataSet := TClientDataSet.Create(nil);
    try
      ClientDataSet.Data := Provider.Data;
      Result := ClientDataSet.XMLData;
    finally
      FreeAndNil(ClientDataSet);
    end;
  finally
    FreeAndNil(Provider);
  end;
end; 
```

# javascript - d3.js 的日期轴

> ID：13605904
> 
> 赞同：0
> 
> 时间：2012-11-28T13:14:51.183
> 
> 标签：javascript, json, d3.js

我又玩了 d3.js 这个 javascript 库。我可以创建一个带有 2 个数字轴的图表，但现在我想要一个数字轴和一个带有日期的轴。不幸的是，我无法做到这一点。

首先，那是没有运行的代码：

```
d3.json('builds.json', 
        function(data){

            var format = d3.time.format("%Y-%m-%d");

            data.forEach(function(d) {
                d.finished_at = format.parse(d.finished_at);
              });

            var margin = {top: 40, right: 40, bottom: 40, left: 40},
            width = 960,
            height = 500;

            var x = d3.time.scale()
                .domain(d3.extent(data, function(d) { return d.finished_at; }))
               .range([0, width - margin.right - margin.left]);

            var y = d3.scale.linear()
                .domain(d3.extent(data, function(d) { return d.result; }))
                .range([height - margin.top - margin.bottom, 0]);

            var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom");

            var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left");

            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height)
              .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            svg.selectAll("circle")
                .data(data)
              .enter().append("circle")
                .attr("cx", function(d) { return x(d.finished_at); })
                .attr("cy", function(d) { return y(d.result); })
                .attr("r", 6);

            svg.append("g") // Render the axis by calling a <g> selection.
                .attr("transform", "translate(0," + y.range()[0] + ")") //setzt x-achse an null punkt von y-achse
                .call(xAxis);

            svg.append("g")
                .call(yAxis);

        }); 
```

变量finished_at 看起来像这样：“finished_at”：“2011-11-20”，我试图解析它。

但输出如下：

![在此处输入图像描述](../Images/b95271853ad269e4d94bea078dd45b02.png)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:33:25.047

问题可能出在您的数据上。您需要确认`finished_at`JSON 中的所有值格式正确。

您的代码似乎与一个小型工作 JSON 数据集完美配合：http: [//bl.ocks.org/4162693](http://bl.ocks.org/4162693)

# java - 列出 java 应用程序的所有文件和默认路径

> ID：13605908
> 
> 赞同：0
> 
> 时间：2012-11-28T13:14:57.840
> 
> 标签：java, file-io, io

有时，当我们在 Java 标准应用程序上加载文件时会遇到问题，因为我们找不到默认路径，特别是使用构建工具或 Eclipse 或 Netbeans 等 IDE。我们如何列出应用程序的默认路径和其中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:21:34.830

不幸的是，你没有说你在说什么“默认路径”。

*   如果你想知道命令的执行路径，它在PATH环境变量中。
*   如果您想要构建或执行类路径，“默认”和找出它是什么的方式都取决于您使用的工具。
*   如果您想要当前目录，请参阅 Rafael 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:16:17.030

在您的应用程序上使用上面的代码。它将打印当前路径（“.”）并列出其上的所有文件。

```
File currentFolder = new File(".");
File[] listOfFiles = currentFolder.listFiles();
System.out.printf("Current path: %s\n", currentFolder.getAbsolutePath());
  for (File file : listOfFiles) {
    // Test if it is no
    if (file.isFile()) {
      System.out.println(file.getName());
    }
  } 
```

# c# - 全局设置：忽略 HTML/Javascript

> ID：13605910
> 
> 赞同：0
> 
> 时间：2012-11-28T13:15:08.300
> 
> 标签：c#, javascript, asp.net, html, telerik

我问了一个与此类似的问题（[在此处查找](https://stackoverflow.com/questions/13582226/handle-every-user-input-as-plain-text)）。
但我觉得它不是很好，现在我想再试一次，试试更好。

我的问题是，有几个用户想要使用 Characters，可用于将 HTML 或 Javascript 注入我的应用程序（<、> 等）。
是否有任何全局设置、方法或任何我可以用来阻止 HTML 或 Javascript 执行并仅显示它的东西？

**例如：**
用户输入：
`New<br>Folder`
正确输出：
`New<br>Folder`
错误输出：
`New
Folder`

PS：我有 ASP 和 Telerik 控件。
其中一些显示正确，例如按钮。

# wireshark - 查找命令行查询以检查 Wireshark 文件中是否存在校验和错误

> ID：13605914
> 
> 赞同：0
> 
> 时间：2012-11-28T13:15:19.240
> 
> 标签：wireshark

我正在寻找检查我的 Wireshark 文件是否有校验和错误的命令，我可以使用命令**ip.checksum_bad == 1**来完成，但这是来自应用程序 GUI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T04:58:28.267

```
tshark -R 'ip.checksum_bad==1' -Vr file 
```

会成功的......

请参阅 tshark 的手册页。

# android - android中的Json对象解析

> ID：13605920
> 
> 赞同：0
> 
> 时间：2012-11-28T13:15:38.130
> 
> 标签：android

我想提取json对象放到另一个数组中，我不知道怎么做，我在前面提取

**{“海得拉巴”：3，“班加罗尔”：1，“孟买”：4}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:55:58.880

[从这里](https://code.google.com/p/google-gson/downloads/list)使用一个名为 Gson 的开源库

像这样使用它..

```
Gson gson = new Gson();
yourClass[] value = gson.fromJson(yourJsonString, yourClass[].class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:24:20.923

您可以使用 keys() 方法迭代 JSON 键。

例子：

```
 JSONObject example = new JSONObject();
    try {
             //Creating your json
            example.put("hyderabad", 3);
            example.put("bangalore", 1);
            example.put("mumbai", 4);

            String jsonArray[] = new String[example.length()];
            Iterator keysIterator = example.keys();
            for(int i = 0; keysIterator.hasNext(); i++)
            {
                jsonArray[i] = keysIterator.next().toString();
            }

    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

# android - Android手机上的安装文件在哪里

> ID：13605922
> 
> 赞同：-1
> 
> 时间：2012-11-28T13:15:39.890
> 
> 标签：android, location, external, apk

嗨朋友我想知道安装文件在安卓手机上的位置。亲爱的，我在我的手机上找不到那个文件。

我正在使用三星galaxys2。

任何人都尝试将数据存储在文本文件中，并且在我在我的单元格上运行我的代码而不是模拟器我通过我的单元格运行我的代码之后，我想在我的单元格上看到该文件。

我很抱歉英语不好。

```
 public void actionPerformed(ActionEvent e) {
               // TODO Auto-generated method stub

         if(windowOpen == false)    {
        Connection con = null;
        java.sql.Statement stmt = null;
        ResultSet rs = null;
        JFrame f = new JFrame();
        f.setTitle("Delete Sub_Category :");
        f.setSize(600,200);

        model = new DefaultTableModel(datas,titles);
        table = new JTable(model);

        JScrollPane scrollPane = new JScrollPane(table);     
        f.getContentPane().add(scrollPane, BorderLayout.CENTER);
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        JButton deleteButton = new JButton("Delete");
        JButton cancelButton = new JButton("Cancel");
        f.getContentPane().add(panel,BorderLayout.SOUTH);
        panel.add(deleteButton);
        panel.add(cancelButton); 
```

很抱歉，这不是我的代码，我无法发送我的问题，所以我这样发布。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:14:13.140

从 API 级别 8 开始，您可以允许您的应用程序安装在外部存储设备上，即设备的 SD 卡上。这是一个可选功能，您可以使用**android:installLocation**清单属性为您的应用程序声明。

如果你不声明这个属性，你的应用程序将只安装在内部存储上，不能移动到外部存储上。内部位置是/data/app/yourapplicationsname。

我也有一个链接，我想你可以很容易地解决你的问题。链接如下： -[你的问题的重要链接](https://android.stackexchange.com/questions/3002/where-in-the-file-system-are-applications-installed/)

# asp.net-mvc - 在 MVC 4 中为实体动态创建数据库连接字符串

> ID：13605923
> 
> 赞同：3
> 
> 时间：2012-11-28T13:15:41.057
> 
> 标签：asp.net-mvc

我在 MVC 4 项目中有一个实体，连接字符串由实体创建向导放置在 web.config 中。

我需要更改它并在运行时将密码分配给连接字符串（存储在 web.config 之外）。

1.  如何将 web.config 之外的值与存储在 web.config 中的字符串结合起来？

2.  或者我可以将实体连接完全移到 web.config 之外？

**这是现有的实体连接字符串：**

```
add name="MyEntities" connectionString="metadata=res://*/Models.NewUsers.csdl|res://*/Models.NewUsers.ssdl|res://*/Models.NewUsers.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=mydb;initial catalog=MyDatabase;persist security info=True;user id=sa;password=Mypassword;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /></connectionStrings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:25:32.517

对于 2，您始终可以`web.config`在创建时将新的 connectionString （而不是 from ）直接传递给上下文：

```
string newCS = "add name=...";
var context = new MyEntities(newCS); 
```

对于 1，[使用 EntityConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/bb738533.aspx)解析现有的 CS 或构建一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:21:36.063

一个简单的解决方案可能是使用基于以下内容的东西：

```
string con = ConfigurationManager.ConnectionStrings["PerinatalDataEntities"].
    ConnectionString;
con = con.replace("user id=sa", "user id=MyUser").
    Replace("password=Mypassword","password=MyNewpassword") 
```

我相信还有一个连接构建器，但我从未使用过它。

# c++ - C++ 中的前向声明和循环头包含

> ID：13605930
> 
> 赞同：1
> 
> 时间：2012-11-28T13:15:54.847
> 
> 标签：c++

我有两节课

### 请求管理器.h

```
#ifndef REQUESTMANAGER_H
#define REQUESTMANAGER_H

#include "RequestClient.h"
class RequestManager
{
public:
     void AddReqeustItem(RequestClient *req);

private:
 std::list<RequestClient*> m_reqClientContainer;
};
#endif 
```

### 请求客户端.h

```
#ifndef REQUESTCLIENT_H
#define REQUESTCLIENT_H

class RequestManager; // Forward declaration to avoid cyclic inclusion.

class RequestClient {
public:
void CreateRequest(RequestManager* pManager)
{
  // ... I am creating a request.
  pManager->AddReqeustItem(req);
};
#endif 
```

在上面的代码中，我在请求客户端类中收到错误未定义的 RequestManager。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:20:09.880

您不能使用只有前向声明的类型。前向声明用于告诉编译器该类型存在但编译器不知道该类型的内容。

我的建议：

*   在头文件中，我只会定义类和函数成员。因此，如果仅使用指针，则可以进行前向声明。
*   在正文文件中，编写您的成员函数的代码并包含头文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:18:30.230

将成员函数定义放在#includes 两个头文件的源文件中。

或者，如果您仍然希望它是`inline`（或者如果它是模板化的），那么在定义所有相关代码之后，将成员函数体的定义进一步放在标题中。在单个头文件的情况下（在这里确实有意义）：

```
class B; // forward decl
class A {
  void use(B*);
};

class B {
  void use(A*);
};

void A::use(B*b) { /* ... */ }
void B::use(A*a) { /* ... */ } 
```

*请注意*，将代码拆分为文件（几个头文件和一个源代码）只是为了方便程序员（使代码的其他部分更容易维护和使用），但从编译器的角度来看，这并没有没关系：它只看到一个大代码文件（预处理后）。因此，如何将上述布局拆分为标题和源文件取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:19:40.337

您使用 方法`RequestManager::AddReqeustItem()`，但只有 . 的前向声明`RequestManager`。仅通过前向声明，编译器甚至不知道 RequestManager 存在哪些方法。所以，要解决这个问题，你必须提供RequestManager的*定义*，通常在头文件中。

将 的方法定义移动`CreateRequest()`到 cpp 文件中并在其中包含 RequestManager.h

请求管理器.cpp：

```
#include "RequestManager.h"
...
void CreateRequest(RequestManager* pManager)
{
  // ... I am creating a request.
  pManger->AddReqeustItem( req);
} 
```

# model-view-controller - 这些模型应该是单例的吗？（Zend 框架）

> ID：13605933
> 
> 赞同：0
> 
> 时间：2012-11-28T13:15:59.847
> 
> 标签：model-view-controller, zend-framework, models

在我的项目中，名为 Object_X 的类代表 X 类的单个实例（数据库表中的一行）。

我还必须创建模型来支持这些 Object_X 类。例如：我认为像“isEmailAddressTaken($email)”或“isLogged()”这样的方法（例如对于客户数据库表）应该放在模型（Model_Customer）中，对吗？

现在，如果一个类 Object_X 代表数据库中的一行，而 Model_X 代表一般的 db 表，那么 Model_X 应该是单例吗？

我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:17:08.860

这取决于任务。除了数据库访问之外，zend 框架还有更多功能，这可能会对您有所帮助。

具体来说，对于任何类型的验证，您都应该`Zend_Validate`根据需要使用和创建验证器。例如，为了检查电子邮件是否已被占用，您应该声明`Application_Validate_UserEmail_NotExists`which extends `Zend_Validate_Abstract`。那么您将能够在您需要的任何地方使用该验证器类（尤其是在表单中）

```
<?php

class Application_Validate_UserEmail_NotExists extends Zend_Validate_Abstract
{   
    const REGISTERED_USER_EMAIL = 'invalid';
    const REGISTERED_USER_EMAIL_MESSAGE = 'Email already registered';

    protected $_messageTemplates = array(
        self::REGISTERED_USER_EMAIL => self::REGISTERED_USER_EMAIL_MESSAGE,
    );

    public function isValid($value)
    {   

        $modelUsers = new Model_Users();
        $user = $modelUsers->fetchRegisteredWithEmail($value);

        if (is_object($user)) {
            $this->isAlreadyRegisteredError = true;
            $this->_error(self::REGISTERED_USER_EMAIL);
            return false;
        }

        return true;
    }

}

$validator = new Application_Validate_UserEmail_NotExists();
if ($validator->isValid('email@domain.com')) {
    ....
} 
```

要检查用户是否登录，您应该使用`Zend_Auth`，它提供了各种功能来处理用户身份验证和会话管理。

# random - ExpressionEngine - 显示每个频道的最近 3 个条目，然后是随机（但不重复）条目

> ID：13605934
> 
> 赞同：1
> 
> 时间：2012-11-28T13:16:04.270
> 
> 标签：random, expressionengine

我需要从 4 个不同的通道输出最近的 3 个条目，然后是来自四个通道中的任何一个的随机条目，但不包括任何最近的条目。知道如何做到这一点吗？我知道如何显示随机条目，我知道如何显示频道的 3 个最新条目，但不知道如何将这两件事结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:14:03.527

新的堆栈交换站点提供了一个很好的答案：

[https://expressionengine.stackexchange.com/questions/734/expressionengine-displaying-most-recent-3-entries-of-each-channel-followed-by](https://expressionengine.stackexchange.com/questions/734/expressionengine-displaying-most-recent-3-entries-of-each-channel-followed-by)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:47:12.893

像这样？有点笨重但有效..

```
 {exp:channel:entries channel="about" limit="3"}
  ..content..
 {/exp:channel:entries}

 {exp:channel:entries channel="news" limit="3"}
  .content..
 {/exp:channel:entries}

 {exp:channel:entries channel="services" limit="3"}
 ..content..
 {/exp:channel:entries}

 {exp:channel:entries channel="about|news|services" limit="1000"}
 ..content..
 {/exp:channel:entries} 
```

如果您想要更多答案，您应该查看此站点：

[http://expressionengine.stackexchange.com](http://expressionengine.stackexchange.com)

# php - 将多维数组排序/拆分为许多较小的数组

> ID：13605937
> 
> 赞同：0
> 
> 时间：2012-11-28T13:16:18.833
> 
> 标签：php, arrays, multidimensional-array

**更新：**对不起，我想通了.. 我只取出 $value[0]，所以它只有一个结果。需要更多的睡眠。非常感谢。我仍然愿意就更清洁的方式拆分数组提出建议。

`$tdata`我有一个具有这种结构的数组：

```
Array
(
    [] => Array
    (
        [0] => Array
            (
                [firstName] => test
                [lastName] => test
                [userName] => test@test.com
                [password] => test
                [course] => test
                [role] => test
            )

        [1] => Array
            (
                [firstName] => test
                [lastName] => test
                [userName] => test@test.com
                [password] => test
                [course] => test
                [role] => test
            )

    )

    [delete] => Array
    (
        [0] => Array
            (
                [firstName] => test
                [lastName] => test
                [userName] => test@test.com
                [password] => test
                [course] => test
                [role] => test
            )

    )

    [update] => Array
    (
        [0] => Array
            (
                [firstName] => test
                [lastName] => test
                [userName] => test@test.com
                [password] => test
                [course] => test
                [role] => test
            )

    )

    [outrole] => Array
    (
        [0] => Array
            (
                [firstName] => test
                [lastName] => test
                [userName] => test@test.com
                [password] => test
                [course] => test
                [role] => test
            )

    )

) 
```

我正在尝试将其拆分为较小的数组。像这样：

```
foreach ($tdata as $key => $value) {

    if ($key == '') {
       $create[] = $value[0];
    }elseif ($key == 'outrole') {
       $outrole[]  = $value[0];
    }elseif ($key == 'delete') {
       $delete[] = $value[0];
    }elseif ($key == 'update') {
       $update[] = $value[0];
    }else{
     $noaction[] = $value[0];
    }

} 
```

我认为，这样数组就会不断覆盖自己。`print_r($create)`或任何其他数组总是只返回 1 个结果。可以启发我并告诉我我做错了什么吗？

如果有更好的方法，我也很想听听。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:26:57.153

您的数组是嵌套的。要制作更小的数组，您应该在内部值内迭代：

```
foreach ($tdata as $key => $value) {
    if ($key == '') {
       foreach($value as $subValue) {
           $create[] = $subValue;
       }
    }elseif ($key == 'outrole') {
       foreach($value as $subValue) {
           $outrole[] = $subValue;
       }
    } // ... and so on...        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:27:45.787

如果这些键始终存在，那么您实际上并不需要循环：

```
$create = $original['create'];
$outrole = $original['outrole']; 
```

您可以添加检查是否已设置：

```
$create = isset($original['create']) ? $original['create'] : array(); 
```

如果它不存在，这会将其设置为空白数组。

# actionscript-3 - Actionscript：以恒定延迟在扬声器上（通过缓冲区）播放麦克风的声音

> ID：13605942
> 
> 赞同：4
> 
> 时间：2012-11-28T13:16:23.840
> 
> 标签：actionscript-3, flash, audio, actionscript, signal-processing

我正在寻找一个从麦克风采样信号并在扬声器上播放的代码示例。我需要一个在不同平台（PC、android、iphone）上具有合理恒定延迟的解决方案。延迟大约 1-2 秒对我来说是可以的，我不介意每次应用程序启动时它都会变化。

我尝试在 Sound 和 Microphpne 类上使用 SampleDataEvent.SAMPLE_DATA 事件。一个事件将数据放入缓冲区，另一个事件将读取数据。但是似乎不可能提供恒定的延迟，要么延迟不断增长，要么降低到我要输出的样本少于 2048 个并且 Sound 类停止生成 SampleDataEvent.SAMPLE_DATA 事件的程度。

我不想处理每个传入的帧，所以使用 setLoopBack(true) 不是一个选项。

ps 这在 Android 设备上比在 PC 上更容易出现问题。虽然当我开始在 PC 上调整应用程序窗口大小时，延迟也开始增长。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:24:43.240

不幸的是，这是不可能的……至少不是直接的。

某些声音设备将在录制和播放之间使用不同的时钟。对于手机来说尤其如此，其中运行麦克风的硬件很可能与耳机音频输出不同。

基本上，如果您以 44.1kHz 录制并以 44.1kHz 播放，但这些时钟不同步，您可能会以 44.099kHz 录制并以 44.101kHz 播放。随着时间的推移，这种漂移将意味着缓冲区中没有足够的数据发送到输出。

另一个复杂因素（很可能是您的问题）是您的记录和播放采样率可能不同。如果您从麦克风以 11kHz 录制并以 48kHz 播放，您会注意到 11 不能均匀地适合 48。软件通常用于对录音进行上采样。有时这是通过一个很好的算法来完成的，该算法可以保证为您提供必要的输出。其他时候，11kHz 将被推到 44kHz 并被认为“足够接近”。

简而言之，您不能依赖录制和播放设备同步，而需要自己同步。有很多算法可以处理这个问题。最简单的方法是在这里和那里添加一个样本，以平均它之前和之后的样本。如果您只使用几个样本进行此操作，您将听不见。根据您遇到的漂移问题，这可能就足够了。

# iphone - iPhone 4S 和 iPhone 5 的设备类型文本

> ID：13605944
> 
> 赞同：0
> 
> 时间：2012-11-28T13:16:26.610
> 
> 标签：iphone, ios

以下代码的输出将是什么：

```
NSString *deviceType = [UIDevice currentDevice].model;
NSLog(@"Device Type: %@", deviceType); 
```

在 iPhone 4 中，它将打印“iPhone”，但在 iPhone 4S 或 iPhone 5 中，输出会是什么？我没有 iPhone 4S 或 5 设备。但我需要知道它才能在所有版本的 iPhone 中实现通话功能。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:19:21.647

> in iPhone 4, it will print "iPhone" but in iPhone 4S or iPhone 5 what will be the output?

Also "iPhone".

([documentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html).)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:28:40.087

UIDevice 没有帮助

```
#include <sys/types.h>
#include <sys/sysctl.h>

- (NSString *)deviceModel
{
    NSString *deviceModel = nil;
    char buffer[32];
    size_t length = sizeof(buffer);
    if (sysctlbyname("hw.machine", &buffer, &length, NULL, 0) == 0) {
        deviceModel = [[NSString alloc] initWithCString:buffer encoding:NSASCIIStringEncoding];
    }
    return [deviceModel autorelease];
} 
```

我也不知道 5 的常数，但我*知道*它们是独一无二的：

```
if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";
if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
if ([platform isEqualToString:@"iPhone3,3"])    return @"Verizon iPhone 4";
if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";
if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";
if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";
if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";
if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2 (GSM)";
if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2";
if ([platform isEqualToString:@"iPad3,1"])      return @"iPad-3G (WiFi)";
if ([platform isEqualToString:@"iPad3,2"])      return @"iPad-3G (4G)";
if ([platform isEqualToString:@"iPad3,3"])      return @"iPad-3G (4G)";
if ([platform isEqualToString:@"i386"])         return @"Simulator";
if ([platform isEqualToString:@"x86_64"])       return @"Simulator"; 
```

电话 5 GSM - iPhone5,1

iPhone 5 CDMA - iPhone5,2

iPod 5 - iPod5,1

从 iOS 文件名中获取的信息。请查看[http://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/](http://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:29:49.887

如果您试图区分 iPhone4/4S 和 iPhone5，您应该检查屏幕尺寸，而不是设备型号。

# php - PHP MPDF53，背景图片

> ID：13605947
> 
> 赞同：2
> 
> 时间：2012-11-28T13:16:29.557
> 
> 标签：php, mpdf

此代码从 html 创建一个 pdf。这是一个[例子](https://eurozaem.ru/static/test.pdf)。如何使第二页的背景图像像第一页一样？

```
$mpdf = new mPDF('utf-8','A4','8','',10,10,22,22,10,20);
$html = '<div id="for_pdf">
    <h3>some text</h3>
    ...
    <h3>some text</h3>
</div>';
$stylesheet = file_get_contents('./static/css/print.css');
$mpdf->WriteHTML($stylesheet,1);
$mpdf->list_indent_first_level = 0;
$mpdf->WriteHTML($html,2);
$mpdf->Output("$doc_name.pdf",'D'); 
```

print.css 文件的一部分：

```
#for_pdf{
    background-image: url("/static/image/pdf_img/big_logo.gif");
    background-repeat: no-repeat;
    background-position: center;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T07:19:39.673

我知道这是一个老问题，但解决方案是在 CSS 中使用 @page 选择器。

```
@page {
    background: url("/static/image/pdf_img/big_logo.gif") 50% 0 no-repeat;
} 
```

*我把你的 CSS 变成了简写，但做同样的事情。

上面的代码应该添加到您的 css 文件或 html 文件中的标签内。

@page 也应该是 css 中的第一个调用，否则 mPDF 将忽略它。

无论您有多少页面，使用 @page 都会对每个页面进行更改。您还可以通过执行“@page :first {}”来做一些更酷的事情，它允许您只为第一页放置自定义设置，然后使用常规 @page 以不同于第一页的方式影响其余部分。

# java - 具有重复外观的两个字符之间的 Java 正则表达式模式

> ID：13605948
> 
> 赞同：4
> 
> 时间：2012-11-28T13:16:29.637
> 
> 标签：java, regex, string

我有一个包含字符串的文本文件

```
<><> name: idontknow <><><> dob: <> 
```

我只想获取字符串名称和 dob，但使用正则表达式我得到 <> 名称和 <><> dob。
我使用的正则表达式模式是

```
(?<=>).*?(?=:) 
```

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:19:00.413

您想匹配除`<`or之外的字符`>`。您可以使用[否定字符类](http://www.regular-expressions.info/charclass.html#negated)而不是使用`.`which 匹配任何内容：

```
[^<>]*?(?=:) 
```

在线查看它：[rubular](http://rubular.com/r/11Z1trB1JI)

# perl - perl 合并多个 CSV 文件

> ID：13605954
> 
> 赞同：0
> 
> 时间：2012-11-28T13:16:40.470
> 
> 标签：perl, csv, merge

如何在 perl 中合并多个 CSV 文件？

例如，我有文件 1 **Packet1.csv**看起来像：

```
#type, number, info, availability
computer, t.100, pentium 2, yes
computer, t.1000, pentium 3, yes
computer, t.2000, pentium 4, no
computer, t.3000, pentium 5, yes 
```

和文件 2 **Packet2.csv**看起来像：

```
#type, number, info, availability
computer, t.100, pentium 2, yes
computer, t.1000, pentium 3, no
computer, t.2000, pentium 4, no
computer, t.4000, pentium 6, no 
```

我想要的输出是单个文件，其中**数据包**的数量 不固定：

```
#type, number, info, **Packet1** availability, **Packet2** availability
computer, t.100, pentium 2, yes, yes
computer, t.1000, pentium 3, yes, no
computer, t.2000, pentium 4, no, no
computer, t.3000, pentium 5, yes
computer, t.4000, pentium 6, no 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:49:15.717

回到您对多维散列的尝试：[散列的散列 perl](https://stackoverflow.com/questions/13566521/hash-of-hashes-perl)，您将需要更改正在使用的数据结构以存储特定元素的多个条目。

CSV 可以直观地读入具有 2 个级别的哈希。csv 的行可以通过它们的 ID 进行散列（在这种情况下，我猜 ID 是数字 't.100'、't.1000' 等），并且每行的值可以使用存储在二级散列中标题字符串作为其键。如果您使用 Data::Dumper 查看结构，它将看起来像这样：

```
$VAR1 = {
          't.1000' => {
                        'info' => 'pentium 3',
                        'availability' => 'yes',
                        'type' => 'computer'
                      },
          't.100' => {
                       'info' => 'pentium 2',
                       'availability' => 'yes',
                       'type' => 'computer'
                     }
        }; 
```

'number' 是否也是每个 'row hash' 的键取决于你，这取决于它的用处（通常你已经知道行的键才能访问它）。

这种数据结构可以很好地存储一个 CSV 文件。但是，我们需要增加一层额外的复杂性，以便以您描述的方式合并多个 CSV。例如，为了跟踪特定 ID 出现的文件，我们可以将第三个哈希存储为“可用性”键的值，因为该值在相同“数字”的条目之间发生变化：

```
'availability' => {
          'Packet1' => 'yes',
          'Packet2' => 'no'
        }; 
```

一旦所有文件都被读入这个结构，打印出最终的 CSV 就是一个循环外部哈希键的过程，并且对于每一行，以正确的顺序“连接”行的键。“数据包”哈希也可以循环检索所有“可用性”值，这些值可以附加到每行的末尾。

我希望这可以帮助您了解处理此类数据的一种可能方式。如果您发现它们很困难，您可以询问实施的特定部分，我会很乐意详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:46:30.240

*   您如何识别哪台计算机是哪台？您是否依赖前三个字段作为计算机标识？
*   如果第一个字段不是`computer`怎么办？
*   如果这两个文件与计算机类型不一致会怎样？

在弄清楚如何处理这个问题之前，你真的必须回答这些问题。但是，您可能必须处理[引用](http://perldoc.perl.org/perlreftut.html)。

我认为您的问题与标准 Perl 数据结构仅存储单个值这一事实有关。您可以拥有单个值的哈希值，也可以拥有单个值的数组，但每个结构中不能有多个值。Perl 通过使用*引用*来解决这个问题。

例如，假设您有一个名为*%computer*的散列，它由第二个字段键入：

```
my %system;

$system{t.100} = {}    #This is a hash of hashes
$system{t.100}->{INFO} = "pentium 2";
$system{t.100}->{TYPE} = "computer";
$computer{t.100}->{AVAILABLITY} = []  #Storing an array in this hash entry (hash of hashes of arrays)
$computer{t.100}->{AVAILABILITY}->[0] = "yes";
$computer{5.100}->{AVAILABILITY}->[1] = "yes"; 
```

您还可以通过*取消引用*数组来使用`push`和：`pop`

 *```
push @{ $computer{t.100}->{AVAILABILITY} }, "yes"; 
```

请注意，我用 包围了对数组的引用`$computer{t.100}->{AVAILABILITY}`，`@{...}`它从对数组的引用返回到数组。

我希望这是你要问的。您可以使用[Text::CSV](https://metacpan.org/pod/Text%3a%3aCSV)模块来解析您的 CSV 文件，但如果格式不太古怪，您可能只需使用该`split`命令。*

# css - 使用 Spring 的静态内容

> ID：13605956
> 
> 赞同：0
> 
> 时间：2012-11-28T13:16:40.577
> 
> 标签：css, spring, model-view-controller

我在用着

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

在我的 SpringMVC 应用程序中处理静态内容。这工作正常。我可以使用“/resources”url上传图像并在应用程序中检索它们。我想在jsp中使用jpeg作为背景图像，所以我只是将jpeg放到我工作区的资源文件夹中. 但是，我的工作区文件夹中的任何地方都没有资源文件夹。spring 在哪里存储这些图像？如何进入此文件夹以添加我的背景图片？

根据要求 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-    app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>SpringMVCTest</display-name>

<servlet>
    <servlet-name>springMVCTest</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>springMVCTest</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

servlet.xml 澄清一切配置正确。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<tx:annotation-driven /> 
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" />
<context:component-scan base-package="/"></context:component-scan>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<property name="prefix" value="/WEB-INF/jsp/"></property>
<property name="suffix" value=".jsp"></property>
</bean>

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:maxUploadSize="1000000" />

<bean id="personService" class="PersonServiceImpl" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/test" />
    <property name="username" value="root" />
    <property name="password" value="" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" /> 
    <property name="packagesToScan" value="/" />
    <property name="hibernateProperties">
        <props> 
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

调用保存图片方法

```
saveImage(context.getRealPath("/resources/" + person.getId() + ".jpg"), image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:35:24.820

> 但是，我的工作区文件夹中的任何地方都没有资源文件夹

它应该出现在 WebContent 中。如果它不存在`<mvc:resource>`，则不用于提供静态内容。

> 如何进入此文件夹以添加我的背景图片？

在 WebContent 下创建资源文件夹并将图像放入其中。通过 访问图像`/resources/foo.jpeg`。

# php - 想要在 PHP 中将给定日期的 EST 转换为 PST

> ID：13605961
> 
> 赞同：0
> 
> 时间：2012-11-28T13:16:55.270
> 
> 标签：php

我们可以将 EST 格式的日期更改为 PST 格式吗...就像任何 PHP 函数一样

Ex`2012-11-28 08:00:00`是 EST 到 PST`2012-11-28 05:00:00`

我知道我们可以直接从 EST 中减去 3 小时。但是有内置函数支持它的 PHP 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:53:52.530

```
$time = new DateTime($date, new DateTimeZone('America/New_York'));
$time->setTimezone(new DateTimeZone('America/Los_Angeles'));
echo $time->format('Y-m-d H:i:s'); 
```

# javascript - parallax horizontal navigation with javascript

> ID：13605964
> 
> 赞同：0
> 
> 时间：2012-11-28T13:17:03.060
> 
> 标签：javascript, horizontal-scrolling, parallax

I'm studying parallax and horizontal scrolling website and I get in touch with this fantastic website: [http://www.black5.de/](http://www.black5.de/)

Exploring with firebug I found that their developers:

*   use absolute positioned elements
*   use a non-scrolling container
*   recreate a custom navigation controller using arrow keys, mouse wheel and in-page anchor

I tried to re-implement this logic here: [http://www.albertobottarini.com/parallax/index-manual.html](http://www.albertobottarini.com/parallax/index-manual.html)

As you can see anchor links works but navigation with arrows and mouse wheel don't works (and it's correct because I don't create custom controllers for them). Implementing custom navigation seems very hard job (for example I have to take care about user keep pressing arrow key because they want to speed up navigation). I tried some other jquery plugin (like jparallax) but the resulted webpage is the same as mine where everything seems choppy and jerky.

How can I recreate the fluidity and pleasantness of www.black5.de? Do you think it will be a huge project? Do you know some useful library/plugin?

Thanks

# vim - Triggering supertab on dot (and also Tab)

> ID：13605967
> 
> 赞同：0
> 
> 时间：2012-11-28T13:17:10.690
> 
> 标签：vim, supertab

i'm looking for a way to trigger SuperTab when writing a . (dot) in insert mode. I came up with something like this:

```
inoremap <buffer> . .<C-x><C-o> 
```

But this just triggers Omnicompletion and not SuperTab. I want it to trigger SuperTab so I have my SuperTab configuration (preselect first entry, autoclose preview window). Also I still want my normal SuperTab binding (which is Tab).

This could probably be solved by simulating a keypress (while in insert mode), but I just cant get it working.

```
inoremap <buffer> . .<Tab> 
```

Just inserts a literal tab. Any hints?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:08:51.163

`inoremap`确切的意思是：

> **`:ino[remap] {lhs} {rhs}`**
> 
> 将键序列映射`{lhs}`到`{rhs}`map 命令适用的模式。**禁止**,的映射 `{rhs}`，以避免嵌套和递归映射。

你有没有尝试过：

```
:imap . .<tab> 
```

?

# php - gzip 压缩 vs ob_gzhandler

> ID：13605974
> 
> 赞同：1
> 
> 时间：2012-11-28T13:17:30.550
> 
> 标签：php

在我的 PHP.INI 中，`gzip compression`已经启用。我可以`ob_start('ob_gzhandler');`在我的 PHP 页面中使用吗？这两者有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T13:26:10.657

像这样启用压缩：在 PHP.ini 中可以这样做：

```
zlib.output_compression = On 
```

这意味着 PHP 服务的每个页面都将被压缩，这可能是也可能不是您想要的。

但是，使用 ob_start('ob_gzhandler') 只会压缩特定的缓冲区/页面，不会影响 PHP 提供的任何其他内容。

如果您只想压缩某些输出，请使用第二种方法。将两者混合将毫无意义，并且可能只会使用额外的 CPU 周期来尝试压缩已经压缩的输出。

可能是 PHP 足够聪明，只能进行一次压缩，但同时使用这两种方法仍然是徒劳的。

通常最好在您的 Web 服务器中启用压缩，但这取决于您要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:37:06.130

你不能同时使用这两者。

“你不能同时使用 ob_gzhandler() 和 zlib.output_compression。还要注意使用 zlib.output_compression 优于 ob_gzhandler()。”

[http://www.php.net/manual/en/function.ob-gzhandler.php](http://www.php.net/manual/en/function.ob-gzhandler.php)

如果需要缓冲输出，您仍然可以使用 ob_start()，只是不能使用 gzhandler 回调。

# c# - 在 c# webbrowser 中访问全局 javascript 变量

> ID：13605980
> 
> 赞同：1
> 
> 时间：2012-11-28T13:17:42.823
> 
> 标签：c#, javascript, winforms, browser

我有一个 Javascript 文件，其中有一个全局变量，该变量设置为某个整数值。我使用 WebBrowser 控件在 C# 中加载 Javascript。我需要在 WinForms 标签中显示全局变量的值。

我尝试将全局变量放在隐藏的 html 字段中并调用以下 C# 代码：

```
var distance = mapWebBrowser.Document.GetElementsByTagName("input")["distance"];

        if (distance != null)
            mileageText.Text = Convert.ToString(distance); 
```

但这会显示`System.Windows.Forms.HtmlElement`在标签中，而我需要存储在其中的实际值。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:47:39.610

给隐藏字段一个id并调用这个工作吗？`mapWebBrowser.Document.GetElementById("distance").InnerHtml`（距离是id）

# android - Corrupted colors after Bitmap processing

> ID：13605983
> 
> 赞同：0
> 
> 时间：2012-11-28T13:17:54.423
> 
> 标签：android, android-ndk, android-image

I use Android NDK to set color for individual pixel. It looks something like that:

```
typedef struct {
    uint8_t red;
    uint8_t green;
    uint8_t blue;
    uint8_t alpha;
} rgba;

JNIEXPORT void JNICALL Java_com_package_jniBmpTest(JNIEnv* env, jobject obj, jobject bitmapIn, jobject bitmapOut) {
    AndroidBitmapInfo   infoIn;
    void*               pixelsIn;
    AndroidBitmapInfo   infoOut;
    void*               pixelsOut;

    if ((ret = AndroidBitmap_getInfo(env, bitmapIn, &infoIn)) < 0 ||
        (ret = AndroidBitmap_getInfo(env, bitmapOut, &infoOut)) < 0) {
        return;
    }

    if (infoIn.format != ANDROID_BITMAP_FORMAT_RGBA_8888 ||
        infoOut.format != ANDROID_BITMAP_FORMAT_RGBA_8888) {
        return;
    }

    if ((ret = AndroidBitmap_lockPixels(env, bitmapIn, &pixelsIn)) < 0 ||
        (ret = AndroidBitmap_lockPixels(env, bitmapOut, &pixelsOut)) < 0) {
        LOGE("Error! %d", ret);
    }

    rgba* input = (rgba*) pixelsIn;
    rgba* output = (rgba*) pixelsOut;
    int w = infoIn.width;
    int h = infoIn.height;

    int n;
    for (n = 0; y < w * h; n++) {
        output[n].red = input[n].red;
        output[n].green = input[n].green;
        output[n].blue = input[n].blue;
        output[n].alpha = 127;
    }

    AndroidBitmap_unlockPixels(env, bitmapIn);
    AndroidBitmap_unlockPixels(env, bitmapOut);
} 
```

I need to set bitmap semi-transparent (it is simplified example - my code is much more complicated, but bug exists in this code, too). Problem is that instead of semi-transparent bitmap as a result I have image with corrupted colors. It is semi-transparent, too, but colors are not correct (for example, white color is black, blue is green...). What's the possible problem?

Thanks for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:34:45.867

解决它。很抱歉在五分钟后提出问题并回答:)

解决方案如下：

```
float alpha;
alpha = 0.5;
output[n].red = (int) (input[n].red * alpha);
output[n].green = (int) (input[n].green * alpha);
output[n].blue = (int) (input[n].blue * alpha);
output[n].alpha = (int) (255 * alpha); 
```

# php - PHP 转到数组的下一个元素

> ID：13605992
> 
> 赞同：1
> 
> 时间：2012-11-28T13:18:22.650
> 
> 标签：php, arrays, arraylist

我使用以下代码创建了一个数组列表：

```
<?php

$ids = array();

if (mysql_num_rows($query1))
{
    while ($result = mysql_fetch_assoc($query1))
    {
        $ids["{$result['user_id']}"] = $result;
    }
}
mysql_free_result($query1);

?> 
```

现在，我需要从数组中读取两个元素。第一个是当前元素，第二个是数组的下一个元素。因此，简化的过程如下：

```
i=0: current_element (pos:0), next_element (pos:1)
i=1: current_element (pos:1), next_element (pos:2)
etc 
```

为此，我已经编写了以下代码，但我无法为每个循环获取下一个元素！

这是代码：

```
if (count($ids)) 
{ 
    foreach ($ids AS $id => $data) 
    { 
        $userA=$data['user_id'];
        $userB=next($data['user_id']);
    }
} 
```

我收到的消息是：警告：next() 期望参数 1 是数组，在第 X 行的 array.php 中给出的字符串

有人可以帮忙吗？也许我尝试做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:32:41.947

, [`current`](http://php.net/manual/en/function.current.php), [`next`](http://php.net/manual/en/function.next.php),函数与数组本身一起工作，并在数组上放置一个位置标记[`prev`](http://php.net/manual/en/function.prev.php)。[`end`](http://php.net/manual/en/function.end.php)如果您想使用该`next`功能，也许这是代码：

```
if (is_array($ids)) 
{ 
    while(next($ids) !== FALSE) // make sure you still got a next element
    {
        prev($ids);             // move flag back because invoking 'next()' above moved the flag forward
        $userA = current($ids); // store the current element
        next($ids);             // move flag to next element
        $userB = current($ids); // store the current element
        echo('  userA='.$userA['user_id']);
        echo('; userB='.$userB['user_id']);
        echo("<br/>");
    }
} 
```

您将在屏幕上看到以下文本：

```
userA=1; userB=2
userA=2; userB=3
userA=3; userB=4
userA=4; userB=5
userA=5; userB=6
userA=6; userB=7
userA=7; userB=8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:21:28.640

你得到第一个项目，然后循环其余的项目，在每个循环结束时，你将当前项目作为下一个项目移动......代码应该更好地解释它：

```
if (false !== ($userA = current($ids))) {
    while (false !== ($userB = next($ids))) {
        // do stuff with $userA['user_id'] and $userB['user_id']
        $userA = $userB;
    }
} 
```

**上一个答案**

您可以将数组分块成对：

```
foreach (array_chunk($ids, 2) as $pair) {
    $userA = $pair[0]['user_id']
    $userB = $pair[1]['user_id']; // may not exist if $ids size is uneven
} 
```

也可以看看：[`array_chunk()`](http://www.php.net/array_chunk)

# mysql - 在 2 个表中选择匹配的字符串

> ID：13605993
> 
> 赞同：0
> 
> 时间：2012-11-28T13:18:22.873
> 
> 标签：mysql, sql, select

**表A**

```
Id  | M  | D  |   Y   |
=======================
1  | 10  | 28  | 2012 |
2  | 11  | 29  | 2012 |
3  | 12  | 30  | 2012 | 
```

**表B**

```
Id  | M  | D  |   Y   |
=======================
4  | 09  | 28  | 2012 |
5  | 11  | 29  | 2012 |
6  | 01  | 30  | 2013 | 
```

我将按**M**和**D搜索**

例如：如果匹配 M = 11 AND D = 29 ... 那么将返回 ID(s) **2** , **5**

我只能通过这样的一张桌子找到

```
mysql_query("SELECT * FROM TableA WHERE M='11' AND Y='29' ORDER BY D ASC , Id DESC;";) 
```

但是如何在多个表中查找？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:20:07.373

使用`UNION`两个`SELECT`s之间的子句

```
(SELECT Id, M, D, Y FROM TableA WHERE M='11' AND Y='29')
UNION
(SELECT Id, M, D, Y FROM TableB WHERE M='11' AND Y='29')
ORDER BY D ASC , Id DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:20:39.990

```
SELECT * FROM TableA WHERE M='11' AND Y='29'
UNION
SELECT * FROM TableB WHERE M='11' AND Y='29'
ORDER BY D ASC , Id DESC; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:22:54.430

您最好使用`UNION ALL`（如果`tableB`有相同的记录）来获取所有记录。否则只会`UNION`做。

```
SELECT * FROM TableA WHERE M='11' AND Y='29'
UNION ALL
SELECT * FROM TableB WHERE M='11' AND Y='29'
ORDER BY D ASC , Id DESC; 
```

# php - 地理位置到php？

> ID：13605995
> 
> 赞同：-3
> 
> 时间：2012-11-28T13:18:34.313
> 
> 标签：php, mysql, database, location, geo

我有一个充满漂亮地理位置的数据库。lng和lat的，问题是。我找到了一个漂亮的小 sql 选择，它可以帮助我比较地理位置，并从我的数据库中选择最接近的那些，但恐怕我需要使用我当前的地理位置来找出哪个是最近的，那么如何我会去把它放到 SQL 选择中吗？

下面的代码是“漂亮”的选择。

```
SELECT latitude, longitude, SQRT(
    POW(69.1 * (latitude - [startlat]), 2) +
    POW(69.1 * ([startlng] - longitude) * COS(latitude / 57.3), 2)) AS distance
FROM TableName HAVING distance < 25 ORDER BY distance; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:29:16.813

有很多方法可以做到这一点，我建议首先获取当前位置的地理位置，然后将 lat/lng 存储在会话/cookie 中，甚至首先存储在数据库中。然后将其应用于 SQL。

这可能包含答案 -[使用 php、API 自动获取纬度和经度](https://stackoverflow.com/questions/8633574/get-latitude-and-longitude-automatically-using-php-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:35:41.403

您首先需要学习的是如何在前端通过 PHP 检索数据库信息，例如使用 AJAX。首先知道如何使用数据库 <-> PHP <-> Javascript。你不能这样做：数据库 <-> javascript。所以不要问怎么做，因为这是不可能的。