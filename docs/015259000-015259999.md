# StackOverflow 问答 15259000-15259999

# java - AssetManager - 使用哪一个

> ID：15259003
> 
> 赞同：1
> 
> 时间：2013-03-06T22:03:41.140
> 
> 标签：java, libgdx

两个版本都可以，但我不确定要使用哪个版本以及为什么要使用那个版本？如果您已经卸载了资产，是否需要处理 TextureAtlas？

**版本 1：与 png 一起加载包文件（带有位置数据的 TexturePacker 文件）。**

```
gameSpriteSheet = new TextureAtlas(Gdx.files.internal(DATA_DIR_PATH + "GameSpritesPack.txt"));

assetManager.load(DATA_DIR_PATH + "GameSpritesPack.txt");
assetManager.load(DATA_DIR_PATH + "GameSpritesPack.png");

// Call only if assetmanager's update method returns true
headerRegion = getTexture("MainMenuHeader", gameSpriteSheet); 
```

卸载：

```
if (assetManager.isLoaded(DATA_DIR_PATH + "GameSpritesPack.txt")) {
   assetManager.unload(DATA_DIR_PATH + "GameSpritesPack.txt");
}

if (assetManager.isLoaded(DATA_DIR_PATH + "GameSpritesPack.png")) {
   assetManager.unload(DATA_DIR_PATH + "GameSpritesPack.png");
}

if(gameSpriteSheet != null) {
   gameSpriteSheet.dispose();
} 
```

**版本 2：仅加载包文件（带有位置数据的 TexturePacker 文件）。**

```
assetManager.load(DATA_DIR_PATH + "GameSpritesPack.txt");

// Call only if assetmanager's update method returns true
gameSpriteSheet = assetManager.get(DATA_DIR_PATH + "GameSpritesPack.txt", TextureAtlas.class);
headerRegion = getTexture("MainMenuHeader", gameSpriteSheet); 
```

卸载：

```
if (assetManager.isLoaded(DATA_DIR_PATH + "GameSpritesPack.txt")) {
   assetManager.unload(DATA_DIR_PATH + "GameSpritesPack.txt");
}

if(gameSpriteSheet != null) {
   gameSpriteSheet.dispose();
} 
```

**注意：**我已经阅读了关于 AssetManager 和其他博客的 Mario 的帖子，但我似乎不明白为什么上述两个版本都能正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T03:29:39.203

AssetManager 用于“在后台”加载资产。您列出的第一个版本只是在当前线程中同步加载图集。它实际上根本没有使用 AssetManager。这很好并且可以工作，缺点是如果你的图集很大（或者你有很多你正在这样做的），你的应用程序将“挂起”一会儿：

```
gameSpriteSheet = new TextureAtlas(Gdx.files.internal(DATA_DIR_PATH + "GameSpritesPack.txt")); 
```

运行。您可以在第一个示例中删除这两`assetManager`行，因为在这种情况下它们没有做任何事情（有用）。

第二个版本是`AssetManager`. 基本上，您要求资产管理器在`... new TextureAtlas(...)`后台线程上运行您在第一个版本 ( ) 中使用的代码。您必须等到该后台线程完成（即，`update()`返回真）。这个想法是，您可以在前台的渲染线程上做其他事情（即，在加载游戏资源时在屏幕上制作漂亮的图案以分散用户的注意力），同时定期检查加载是否完成。

# wcf - 如何通过 http 使用 WCF 进行 Windows 身份验证？

> ID：15259006
> 
> 赞同：0
> 
> 时间：2013-03-06T22:04:01.010
> 
> 标签：wcf

谁能告诉我如何通过 http 使用 WCF 进行 Windows 身份验证？从根本上讲，我认为 Windows 身份验证不需要 https。https 中的 s 对流量进行加密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:07:58.437

也许[这](http://www.codeproject.com/Articles/36289/8-steps-to-enable-windows-authentication-on-WCF-Ba)就是您正在寻找的。

# java - 程序错误地计算了数字的平方

> ID：15259013
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:04:07.817
> 
> 标签：java

以下程序应该计算数字的平方（与上一个问题不同的程序）我尝试这样做是因为之前的程序使用了 bufferedReader 来尝试使用扫描仪。例如，当输入 2 作为数字时，它会输出 1.0 作为该数字的平方值。任何帮助将非常感激！顺便说一句，抱歉我无法通过第一个屏幕，除非我出于某种原因将每行间隔 4 次。

```
import java.util.Scanner;

public class Main {
  public static void main(String[] args) {
    System.out.println("enter number");
    Scanner in=new Scanner(System.in);
    System.out.println("the sqare of that number  is "+sqrt(in.nextInt()));
  }

  static double sqrt(double x){
    double result;
    double i=0;
    if(x<0)
      result=-1;
    else{
      while (true){
        if((i*i)>x)
          break;
        i++;
      }
      i=i-1;
      result= (i * i);
      result= (i * i);
    }
    return result;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:07:47.313

~~你为什么回来`result`？该`i`变量在循环结束时保存平方根`while`，尝试返回`i`. 然后，第一个`if`语句可以简单地变成：~~

 ~~```
if (x < 0)
    return -1; 
```~~ 

~~你可以完全摆脱`result`。~~

* * *

我不完全理解你的目标是什么。你的`while`-loop 计算平方根`x`- 这有什么意义？为什么不只是`return x*x`？事实上，你甚至不需要（相当糟糕的命名）`sqrt`方法：

```
System.out.print("Enter a number: ");
Scanner in = new Scanner(System.in);
int n = in.nextInt();
System.out.println("The sqare of that number  is " + (n*n));
in.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:20:16.963

看起来你想要什么 while 循环是`if ( i > x) break;`. 那么结果应该是正确的，因为在 while 循环之后从 i 中减去 1 - 使其等于 x。因此，`result = i * i`是 x 的平方，因为 i == x。

# java - 是否可以创建具有可变数量输入值的方法？

> ID：15259016
> 
> 赞同：0
> 
> 时间：2013-03-06T22:04:20.063
> 
> 标签：java, methods

我想按照`[return] methodName(int numberOfTimes, String[numberOfTimes] strings)`_`numberOfChoices``String`

我想知道，正如我写的那样，它不会工作，因为它会在编译时失败，因为`numberOfChoices`没有定义，而且，如果它可以编译，那么解决它仍然很棘手。

我认为我最好的选择是使用`String... strings`并执行这样的 for 循环：

```
void methodName(int numberOfTimes, String... strings) {
    for(int i = 0, i < numberOfTimes; i++) {
        // do something with strings[i]
    }
} 
```

但我仍然想知道我最初想要的是否可能。

编辑：我很笨，一直在考虑在工作空间之外“分享”我的方法，这就是为什么我希望它以最通用的方式工作。解决方案实际上`numberOfChoices`是`String`在`methodName`. 类似的东西`methodname("One", "Two")`。所以，固定代码将是......

```
void methodName(String... choices) {
    for(int i = 0; i < choices.length; i++) {
        // do something with choices[i]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:13:16.637

在 java 中，数组是动态的，所以它们不需要在方法参数中指定索引

[return] methodname(int numberOfTimes, String[] strings) 有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:15:50.643

`strings`Java 将变量参数视为数组，因此您可以像往常一样迭代。

示例（返回所有用空格连接的字符串）：

```
public void wordsToSentence(String... words) {
    final StringBuilder builder = new StringBuilder();
    boolean notFirst = false;
    for (String s : words) {
        if (notFirst) builder.append(" ");
        else notFirst = true;
        builder.append(s);
    }
    return builder.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:09:26.317

如果变量参数始终是同一类型（如字符串），您可以使用数组或列表作为参数，该方法不会关心数组的大小，只是它是一个数组

```
void methodName(int numberOfTimes, String[] myStrings) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:11:27.233

最后一个参数类型后面的三个句点表示最后一个参数可以作为数组或字符串参数序列传递。然后，您可以在不知道数字的情况下使用循环，例如：

```
for (String stringParam: args) {
   // your logic on stringParam
} 
```

# java - 启动运行命令的问题

> ID：15259018
> 
> 赞同：0
> 
> 时间：2013-03-06T22:04:22.503
> 
> 标签：java, runnable

首先，我想说对不起，如果我的问题听起来不是很具体，我对编程不是很了解，请原谅我。

这段代码的问题是我希望它随机移动方块（虽然知道它只是反复打招呼）但是 run() 没有激活。

代码：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import javax.swing.*;
import java.net.*;

public class Square extends JApplet {

    int X = 10;
    int Y = 10;

    public void init() {
        FlowLayout flow = new FlowLayout();
        setLayout(flow);
    }

    public void paint(Graphics screen) {
        // Paint lines
        Graphics2D g2 = (Graphics2D) screen;
        g2.draw(new Line2D.Double(X, Y, (X + 50), Y));
        g2.draw(new Line2D.Double(X, Y, X, (Y + 50)));
        g2.draw(new Line2D.Double(X, (Y + 50), (X + 50), (Y + 50)));
        g2.draw(new Line2D.Double((X + 50), (Y + 50), (X + 50), Y));
    }

    public void run() {
        System.out.println("Hi2");
        while (true) {
            System.out.println("Hi");
            repaint();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // do nothing
            }
        }
        }

    public static void main(String[] args) {
        JFrame f = new JFrame("Square");
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {System.exit(0);}
        });
        JApplet applet = new Square();
        f.getContentPane().add("Center", applet);
        applet.init();
        f.pack();
        f.setSize(new Dimension(550,100));
        f.setVisible(true);

    }
} 
```

（我知道我导入了一些我可能不需要的东西，我从另一个代码中复制了一些）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:12:09.110

虽然你有一个`run`方法，但你的类没有实现`Runnable`，所以它不能在`Thread`. 为了让您`Thread`运行，您必须实施`Runnable`并创建一个新`Thread`的 on `init`：

```
new Thread(this).start(); 
```

如果您打算与 UI 组件交互，请忘记`Threads`. Swing 有自己的[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，允许您安全地与 UI 组件交互。看看使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)代替。

# opengl - 在 3d 中创建一个立方体

> ID：15259019
> 
> 赞同：0
> 
> 时间：2013-03-06T22:04:33.663
> 
> 标签：opengl

我正在尝试在我的棋盘地板上添加墙壁，以便它们形成一个立方体，我已经有了底部，但我很难画出背面或墙壁。

这是我的代码：

```
class Checkerboard {
  int displayListId;
  int width;
  int depth;
public:
  Checkerboard(int width, int depth): width(width), depth(depth) {}
  double centerx() {return width / 2;}
  double centerz() {return depth / 2;}
  void create() {
    displayListId = glGenLists(1);
    glNewList(displayListId, GL_COMPILE);
    GLfloat lightPosition[] = {4, 3, 7, 1};
    glLightfv(GL_LIGHT0, GL_POSITION, lightPosition);
    glBegin(GL_QUADS);
    glNormal3d(0, 1, 0);
    for (int x = 0; x < width - 1; x++) {
      for (int z = 0; z < depth - 1; z++) {
        glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE,
                     (x + z) % 2 == 0 ? RED : WHITE);
        glVertex3d(x, 0, z);
        glVertex3d(x+1, 0, z);
        glVertex3d(x+1, 0, z+1);
        glVertex3d(x, 0, z+1);
      }
    }
    glEnd();
    glEndList();
  }
  void draw() {
    glCallList(displayListId);
  }
} 
```

;

我正在尝试添加以下代码：

```
glColor3f(1.0f,1.0f,0.0f);    // Color Yellow
    glVertex3d( 1.0f,-1.0f,-1.0f);    // Top Right Of The Quad (Back)
    glVertex3d(-1.0f,-1.0f,-1.0f);    // Top Left Of The Quad (Back)
    glVertex3d(-1.0f, 1.0f,-1.0f);    // Bottom Left Of The Quad (Back)
    glVertex3d( 1.0f, 1.0f,-1.0f);    // Bottom Right Of The Quad (Back) 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:56:51.360

也许您正在有效地绘制您要添加的面，但由于背面剔除，您看不到它。在绘制四边形之前尝试一下`glDisable(GL_CULL_FACE);`，或者尝试更改顶点的顺序。

注意：如果您禁用背面剔除，请将其视为调试程序的临时解决方法。背面剔除是一项重要的优化，应在大多数情况下启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:06:00.290

将代码更改为：

```
glColor3f(1.0f,1.0f,0.0f);    // Color Yellow
glVertex3d( 1.0f, 1.0f,-1.0f);    // Top Right Of The Quad (Back)
glVertex3d( -1.0f, 1.0f,-1.0f);    // Top Left Of The Quad (Back)
glVertex3d( -1.0f, -1.0f,-1.0f);    // Bottom Left Of The Quad (Back)
glVertex3d( 1.0f, -1.0f,-1.0f);    // Bottom Right Of The Quad (Back) 
```

请注意，您的评论按正确的缠绕顺序 (CCW)，但您的顶点不是（它们是顺时针方向的）。默认情况下，OpenGL 会剔除它们（不显示它们），因为如果启用剔除，它会认为它们是背面。

# haskell - Haskell IO 平均函数 IO，纯 vs 非纯尝试

> ID：15259021
> 
> 赞同：2
> 
> 时间：2013-03-06T22:04:41.890
> 
> 标签：haskell, io, functional-programming

我正在尝试编写一个程序，其中用户不断输入数字并在输入负数后输出平均值这是我试图保持`pure separate from unpure` 有人可以给我修复此代码的提示，以及纯和不纯的分离提示。

```
getFloat :: IO Float
getFloat = do line <- getLine
              return (read line:: Float) 
```

“不纯的部分”

```
average :: IO Float
average = do x <- getFloat
             return((fst help x)/(snd help x)) 
```

“纯粹的部分”

```
help x 
    |x>=0 = (x+sum1, 1+ counter)
    |otherwise = (sum1 , counter)
    where 
    sum1 = 0.0
    counter = 0.0 
```

我收到这个错误

```
.hs:45:26:
    Couldn't match expected type `(t0 -> Float, b0)'
                with actual type `t1 -> (t1, t2)'
    In the first argument of `fst', namely `help'
    In the first argument of `(/)', namely `(fst help x)'
    In the first argument of `return', namely
      `((fst help x) / (snd help x))'
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T22:25:29.297

让我们先看看你的代码有什么问题，然后再看看如何修复它。

该功能`getFloat`很好，并且完全按照您的想法进行。

该功能`help`不会*像*您认为的那样做。事实上，当输入一个值时，`x`它只返回元组`(x,1.0)`if `x > 0`，否则返回`(0.0,0.0)`.. 你可以给它类型：

```
help :: Double -> (Double,Double) 
```

而我猜你打算让它有类型

```
help :: [Double] -> (Double,Double) 
```

你可以这样写你想要的版本：

```
help xs = (sum xs, fromIntegral (length xs)) 
```

在函数`average`中，您有表达式`fst help x`，括号中的内容如下所示：`(fst help) x`。这就是您的错误消息的原因：您只能应用于`fst`type 的`(a,b)`内容，但您试图将其应用于 type 的内容`Double -> (Double,Double)`，因此会引发错误。

如果我要编写这个函数，我可能会做这样的事情：

```
import Data.List (takeWhile) -- take elements from a list while predicate is satisfied

avg xs = sum xs / fromIntegral (length xs)

main = do numbers <- fmap (takeWhile (>0) . map read . words) getContents
          return (avg numbers) 
```

函数`avg`是纯的。该函数`takeWhile (>0) . map read . words`也是纯函数，可以这样分解：

```
helper :: String -> [Double]
helper = takeWhile (>0) . map read . words

main = do numbers <- fmap helper getContents
          return (avg numbers) 
```

这说明了一个一般原则 - 使用不纯代码输入和输出您将使用的值，并使用纯代码转换这些值。

# ruby-on-rails - 乘客错误访问 PG

> ID：15259023
> 
> 赞同：0
> 
> 时间：2013-03-06T22:05:16.523
> 
> 标签：ruby-on-rails, passenger

我正在使用 Bitnami Rails 和 PG 堆栈、Apache 和Passenger。

我从乘客那里得到这个错误：

```
fe_sendauth: no password supplied (PG::Error) 
```

我认为这是因为Passenger 没有启动生产环境。

我将 RailsEnv 产品添加到我的 httpd.conf 文件中，所以它现在看起来像这样：

```
<VirtualHost *:80>
ServerName ndeavor.ameipro.com
RailsEnv production
DocumentRoot /opt/bitnami/projects/ndeavor/releases/20130305221240/public
<Directory /opt/bitnami/projects/ndeavor/releases/20130305221240/public>
Allow from all
Options -MultiViews
</Directory>
</VirtualHost> 
```

如何判断Passenger 是否正在尝试启动Rails 生产环境？

谢谢！

# html - 在固定的粘性页脚下应用两个背景

> ID：15259025
> 
> 赞同：0
> 
> 时间：2013-03-06T22:05:33.977
> 
> 标签：html, css

我正在使用以下基本 html 和 css 模式（尽管我的实时代码看起来非常不同）

```
html, body {height: 100%;}

#wrap {min-height: 100%;}

#main {overflow:auto;
    padding-bottom: 150px;}  /* must be same height as the footer */

#footer {position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;} 

/*Opera Fix*/
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;/
}

<div id="wrap">

    <div id="header">

    </div>

    <div id="main">

    </div>

</div>

<div id="footer">

</div> 
```

在我的页面底部获得一个粘性页脚。

我已经为 body 标签应用了两个背景。一个是重复的木质纹理，然后是顶部的阴影。这两个都在页脚下。

它几乎可以工作，但是在长页面上（您必须向下滚动才能看到页脚），当您调整浏览器窗口的大小时，阴影（而不是木头）会爬上页面。我已经尝试将阴影移动到右下角的位置，但这根本不起作用。

这是它的一个阶段：我在 FF 和 Safari [http://www.dnbsandbox.com/diablo/中重复了这个问题](http://www.dnbsandbox.com/diablo/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:36:21.000

从 css 的第一行删除它：

```
html {
  height: 100%;
} 
```

# actionscript-3 - TitleWindow 顶部的 Flex 4 组件

> ID：15259027
> 
> 赞同：1
> 
> 时间：2013-03-06T22:05:36.237
> 
> 标签：actionscript-3, apache-flex, flex4

我有`s:Group`带有一些 ui 元素的 Flex，我希望它始终（！）在我的应用程序内的任何组件之上，包括`s:TitleWindow`（对话框）。如何使用 Flex 4 实现它？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:12:50.950

你应该使用这个`mx.managers.PopUpManager`类。它提供了一个简单的界面来处理显示内容高于任何其他内容。

您可以编写自己的接口来封装`PopUpManager`接口，让您有机会将所有“始终位于顶部”的组件再次置于顶部，即使您添加另一个应该出现在后面的弹出窗口也是如此。

简单的例子：

```
public final class AlwaysOnTopPopUpManager {

    private static var alwaysOnTopDisplayObjects:Array;

    public static function addAlwaysOnTopObject(displayObject:IFlexDisplayObject):void
    {
        alwaysOnTopDisplayObjects = alwaysOnTopDisplayObjects || [];

        if (alwaysOnTopDisplayObjects.indexOf(displayObject) == -1)
        {
            alwaysOnTopDisplayObjects.push(displayObject);
            arrange();
        }
    }

    public static function removeAlwaysOnTopObject(displayObject:IFlexDisplayObject):void
    {
        if (alwaysOnTopDisplayObjects)
        {
            var index:int = alwaysOnTopDisplayObjects.indexOf(displayObject);

            if (index != -1)
            {
                alwaysOnTopDisplayObjects.splice(index, 1);
            }
        }
    }

    // uses the same interface as mx.managers.PopUpManager
    public static function addPopUp(window:IFlexDisplayObject, parent:DisplayObject, modal:Boolean = false, childList:String = null, moduleFactory:IFlexModuleFactory = null):void
    {
        mx.managers.PopUpManager.addPopUp(window, parent, modal, childList, moduleFactory);
        arrange();
    }

    private static function arrange():void
    {
        for each (var popup:IFlexDisplayObject in alwaysOnTopDisplayObjects)
        {
            mx.managers.PopUpManager.bringToFront(popup);
        }
    } 
```

该类包含要显示在任何其他内容之上的对象列表。每次将对象添加到该列表或弹出窗口时，`arrange()`都会调用该方法并将所有已注册的对象再次置于前面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:27:19.597

应用程序创建完成事件后，在 systemManager.rawChildren 中添加您的顶级组件。往下看：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               creationComplete="application_creationCompleteHandler(event)"
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.core.UIComponent;
            import mx.events.CloseEvent;
            import mx.events.FlexEvent;
            import mx.managers.PopUpManager;

            protected function application_creationCompleteHandler(event:FlexEvent):void
            {
                panel.width = width;
                panel.height = 300;
                systemManager.rawChildren.addChild(panel);
            }

            protected function addPopup():void
            {
                PopUpManager.addPopUp(titleWin, this, true);
                PopUpManager.centerPopUp(titleWin);
            }

            protected function button_clickHandler(event:MouseEvent):void
            {
                addPopup();
            }

            protected function titleWin_closeHandler(evt:CloseEvent):void 
            {
                PopUpManager.removePopUp(evt.currentTarget as UIComponent);
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:Panel id="panel" backgroundColor="0x00ff00" alpha="0.9" title="Panel">
            <s:layout>
                <s:VerticalLayout paddingLeft="50" horizontalAlign="left" verticalAlign="middle" />
            </s:layout>
            <s:Button id="btn" width="200" height="100" label="create popup" 
                      click="button_clickHandler(event)" /> 
        </s:Panel>

        <s:TitleWindow id="titleWin"
                       title="Spark TitleWindow"
                       close="titleWin_closeHandler(event);"
                       width="300">
            <s:layout>
                <s:VerticalLayout paddingLeft="10" paddingRight="10"
                                  paddingTop="10" paddingBottom="10" />
            </s:layout>
            <s:Label text="Popup window"
                     fontSize="24"
                     width="100%"/>
        </s:TitleWindow>
    </fx:Declarations>
</s:Application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:55:03.097

如果所有元素都在同一个 MXML 文件中，则只需将`s:Group`元素放在文件底部作为文件的最后一个元素。

如果您的视图更动态地连接，那么您可以使用以下内容强制其索引：

```
var topIndex:int = myParentView.numChildren - 1;
myParentView.setChildIndex(myGroupElement, topIndex); 
```

如果`myGroupElement`对您`s:Group`或其 ID 的引用在哪里。

`myGroupElement`必须已经`myParentView`是执行此代码时的子代。

如果您的`s:Group`元素只是偶尔显示，您可能对`Popup`s 感兴趣。

# jquery - 覆盖分配的空间

> ID：15259030
> 
> 赞同：1
> 
> 时间：2013-03-06T22:05:41.863
> 
> 标签：jquery, css, html

我试图在页面上水平跨越 3 个图像。我需要这些像css`background-size: cover;`那样行事。两个外部图像表现良好，因为它们的纵横比允许高度填充空白空间。然而，熊的图片由于其纵横比而无法复制相同的行为。

我需要这张图片拉伸，直到它达到盒子的全高。如果它超过了框的宽度，超出的部分将被 隐藏`overflow: hidden;`。我如何做到这一点是考虑到响应能力（调整窗口大小时缩放图像（％）。）

这是我的代码： HTML：

```
<section>
    <div class="albumns">
        <article>
            <div class="albumn a1">
                <%=image_tag("mount.jpg")%>
            </div>
        </article>
        <article>
            <div class="albumn a2">
                <%=image_tag("bear.jpg")%>
            </div>
        </article>
        <article>
            <div class="albumn a3">
                <%=image_tag("mount.jpg")%>
            </div>
        </article>
    </div>
</div>
</section> 
```

CSS：

```
.albumns {
position: relative;
}
.albumn {
width: 100%;
float: none;
& img {
    width: 100%;
}
} 
```

![在此处输入图像描述](../Images/99acaea5cb74209a766344cc0baee6ef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:12:16.100

由于图像的高度可变，您需要修复其容器的高度。试试这个：

```
.albumn{
    overflow:hidden;
    width:33%;
    height:200px; /*The height you want the images*/
}
.albumn img{
    height:100%;
    width:auto;
    display:block;
    margin:0 auto;
} 
```

# c++ - 布局中有多个 QGLWidget

> ID：15259033
> 
> 赞同：1
> 
> 时间：2013-03-06T22:05:58.440
> 
> 标签：c++, qt, opengl, qglwidget

我想编写一个单线程应用程序，它会显示两个 QGLWidget（一个用于 3D，一个用于 2D）。我试图查找同时显示的两个 QGLWidgets 的信息，但我没有找到任何对我有帮助的东西。

现在，我认为我不需要共享上下文 - 显示的数据没有以有用的方式相关。两者应该放在 QMainWindow 内，最好用 QSplitter 分开。出于测试目的，我将两个 QGLWidget 放入一个 QHBoxLayout，但由于某种原因，一次只显示其中一个。它取决于创建小部件实例的顺序，就好像一个以某种方式覆盖另一个。QSplitter 根本不显示任何内容。如果我尝试对它们都调用 show()，则只会出现一个窗口。（我通过将布局放在一起的 QWidget 将 QGLWidgets 放入 QMainWindow。）

我错过了什么还是与我如何使用小部件有关？

主窗口：

```
MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{

    ViewsWidget *widget = new ViewsWidget();

    this->setCentralWidget(widget);
    this->resize(640,480);
}

ViewsWidget::ViewsWidget()
{
    //create two QGLWidgets
    ModelView *modelView2 = new ModelView(this);
    UnfoldedView *unfoldedView2 = new UnfoldedView(this);

    QHBoxLayout *layout = new QHBoxLayout();

    layout->addWidget(modelView2);
    layout->addWidget(unfoldedView2);

    unfoldedView2->setMaximumSize(200,100);
    modelView2->setMaximumSize(200,100);

} 
```

QGL小部件：

```
typedef struct
{
    float XYZW[4];
    float RGBA[4];
} Vertex;

GLuint bufferId;

Vertex Vertices[] = //vertices
    {
    };

GLubyte Indices[] = {  //indices
};

const size_t BufferSize = sizeof(Vertices);
const size_t VertexSize = sizeof(Vertices[0]);
const size_t RgbOffset = sizeof(Vertices[0].XYZW);

static const char *vertexShaderSource =
    "attribute highp vec4 posAttr;\n"
    "attribute lowp vec4 colAttr;\n"
    "varying lowp vec4 col;\n"
    "uniform highp mat4 matrix;\n"
    "void main() {\n"
    "   col = colAttr;\n"
    "   gl_Position = matrix * posAttr;\n"
    "}\n";

static const char *fragmentShaderSource =
    "varying lowp vec4 col;\n"
    "void main() {\n"
    "   gl_FragColor = col;\n"
    "}\n";

ModelView::ModelView(QWidget *parent)
{

    this->setSizePolicy(QSizePolicy::MinimumExpanding, QSizePolicy::MinimumExpanding);
    this->setParent(parent);

}

void ModelView::initializeGL()
{

    m_program = new QGLShaderProgram(this);
    m_program->addShaderFromSourceCode(QGLShader::Vertex, vertexShaderSource);
    m_program->addShaderFromSourceCode(QGLShader::Fragment, fragmentShaderSource);
    m_program->link();
}

void ModelView::paintGL()
{

    glClearColor(1.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glViewport(0, 0, 200, 160);

    m_program->bind();

    QMatrix4x4 matrix;
    matrix.perspective(60, 4.0/3.0, 0.1, 100.0);
    matrix.translate(0, 0, -2);

    vertices = (GLfloat *)fileSystem->getVertices();
    colors = (GLfloat *)fileSystem->getColors();

    m_program->setUniformValue(m_matrixUniform, matrix);

    m_posAttr = m_program->attributeLocation("posAttr");
    m_colAttr = m_program->attributeLocation("colAttr");
    m_matrixUniform = m_program->uniformLocation("matrix");

    glGenBuffers(1, &BufferId);

    glBindBuffer(GL_ARRAY_BUFFER, BufferId);
    glBufferData(GL_ARRAY_BUFFER, BufferSize, Vertices, GL_STATIC_DRAW);

    glVertexAttribPointer(m_posAttr, 2, GL_FLOAT, GL_FALSE, VertexSize, 0);
    glVertexAttribPointer(m_colAttr, 3, GL_FLOAT, GL_FALSE, VertexSize, (GLvoid *)RgbOffset);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glGenBuffers(1, &IndexBufferId);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexBufferId);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glDrawElements(GL_TRIANGLES, 48, GL_UNSIGNED_BYTE, NULL);

    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0);

    m_program->release();

}

void ModelView::resizeGL(int w, int h)
{
    glViewport( 0, 0, w, qMax( h, 1 ) );
} 
```

ModelView 和 UnfoldedView 类的代码几乎相同（目前）。我认为他们自己不会分享任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:57:04.723

我忘记在 ViewsWidget 中调用 setLayout()，我将布局放在一起。我直接将QSplitter设置为QMainWindow的中心Widget就开始工作了。它似乎已正确渲染，但没有办法将小部件正确连接在一起。

# sencha-touch - Sencha Ext.Map 在被拒绝时使用当前位置

> ID：15259034
> 
> 赞同：0
> 
> 时间：2013-03-06T22:06:01.850
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Ext.Map

```
{
    xtype: 'map',
    height: '100%',
    useCurrentLocation: true,
    mapOptions: {
        zoom: 18
    }
} 
```

我如何知道用户拒绝分享他的位置以便我可以显示错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:32:27.793

在您的 mapOptions :: 之后将以下内容添加到您的 mapObject

```
mapOptions : { . . . 
  zoom : 18
},

geo:new Ext.util.GeoLocation({

    autoUpdate:true,
    maximumAge: 0,
    timeout:2000,
    listeners:{
        locationupdate: function(geo) {
            center = new google.maps.LatLng(geo.latitude, geo.longitude);
            if (map.rendered)
                map.update(center)
            else
                map.on('activate', map.onUpdate, map, {single: true, data: center});
        },
        locationerror: function (geo,bTimeout, bPermissionDenied, bLocationUnavailable, message) {
            if(bLocationUnavailable){
                alert('Your Current Location is Unavailable on this device');
            }
            else if (bPermissionDenied){
                alert('Location capabilities have been disabled on this device.');
            }      
        }
    }
}); 
```

# php - Simplexml 不显示信息

> ID：15259038
> 
> 赞同：0
> 
> 时间：2013-03-06T22:06:28.577
> 
> 标签：php, xml, parsing, simplexml

我使用 IMDBAPI 创建了一个搜索 html 页面，为我搜索的项目创建了一个 xml 文件。然后我有一个 php 文件，它将解析该文件并仅从 xml 文件中提取我想要显示的数据。当我得到一个空白的白页时，一切似乎都在工作。问题是什么都没有显示。

XML 的一部分

```
<IMDBDocumentList>
<item>
<rating>8.7</rating>
<rating_count>10301</rating_count>
<year>1999</year>
<genres>
<item>Animation</item>
<item>Action</item>
<item>Adventure</item>
<item>Comedy</item>
<item>Drama</item>
<item>Fantasy</item>
<item>Romance</item>
</genres>
<rated>PG</rated>
<title>Wan pÃ®su: One Piece</title>
<imdb_url>http://www.imdb.com/title/tt0388629/</imdb_url>
<directors>
<item>KÃ´nosuke Uda</item>
</directors>
<actors>
<item>Mayumi Tanaka</item>
<item>Kazuya Nakai</item>
<item>Akemi Okamura</item>
<item>Kappei Yamaguchi</item>
<item>Mahito Ã”ba</item>
<item>Hiroaki Hirata</item>
<item>Colleen Clinkenbeard</item>
<item>Ikue Ã”tani</item>
<item>Chikao Ã”tsuka</item>
<item>Yuriko Yamaguchi</item>
<item>Luci Christian</item>
<item>Christopher Sabat</item>
<item>Sonny Strait</item>
<item>Kazuki Yao</item>
</actors> 
```

PHP 解析

```
$lib  = simplexml_load_file("test.xml");
$xml = $lib->IMDBDocumentList->item;
$rating = $xml->rating;
$year = $xml->year;
print $rating;
print $year; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:14:47.483

`IMDBDocumentList`是你的*根节点*，所以你不需要解决它：

```
$xml = $lib->item; 
```

# javascript - 如何在编译时在 javascript 全局命名空间中定义 clojurescript 函数？

> ID：15259046
> 
> 赞同：7
> 
> 时间：2013-03-06T22:07:04.093
> 
> 标签：javascript, clojurescript

我正在寻找一种在编译时在 Javascript 全局命名空间中定义 Clojurescript 函数的方法。我所说的编译时的意思是我希望 Clojurescript 编译器输出这个：`function some_fn() { }`. 我知道这不是惯用的，一切都应该驻留在名称空间中，但我所处的环境迫使我这样做。因此，理想情况下，类似`(defn ^:global some-fn [])`的工作方式与工作方式类似，`:export`但会忽略名称空间。

我知道使用 goog.global 定义全局函数的运行时方法，例如 `(set! goog.global.someFunction some-clojure-fn)`，但这在我的环境中不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T22:51:58.667

也许您可以在命名空间中定义它，然后在窗口（或 GLOBAL 或这取决于您的环境）对象中公开它：

```
(defn foo [x] (* 2 x))
(aset js/window "foo" myns/foo)  ;; where myns is where foo is defined 
```

然后，您应该能够`foo`从窗口（这是浏览器中的全局 JavaScript 命名空间）调用。

**更新**：正如@TerjeNorderhaug 所建议的，您可以在全局命名空间中设置一个变量，如下所示：

```
(set! js/foo foo) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-01T19:00:23.157

**将 javascript var 设置为匿名 Clojurescript 函数**将在 Javascript 全局命名空间中定义编译后的函数：

`(set! js/some_fn (fn []))`

调用函数按预期工作：

`(js/some_fn)`

# node.js - node.js 事件流作为客户端

> ID：15259047
> 
> 赞同：0
> 
> 时间：2013-03-06T22:07:04.633
> 
> 标签：node.js

我有一个我想使用的网络流，但是由于 CORS 限制并且 EventSource 不支持身份验证，我不能直接使用它。

我想使用 node.js 从源（domainA）获取流并将其中继给请求者。所以流程是： domainA --> node.js --> client 我使用 https.request 来获取数据，但问题是它在第一次之后关闭了连接。

所以我的问题是 - 我将如何在 node.js 上正确实现它？我如何保持连接活动和数据来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:49:01.030

我实际上能够自己解决这个问题。由于CORS限制，我试图做的只是“镜像”事件源。第一次请求后连接一直关闭，我发现我实际上发送了错误的标头。发送 "Accept": "text/event-stream" 后，连接保持打开状态并且数据流动。不管怎么说，还是要谢谢你！

# android - 为什么我必须滚动才能刷新我的列表视图？

> ID：15259049
> 
> 赞同：0
> 
> 时间：2013-03-06T22:07:12.457
> 
> 标签：android, listview

我是安卓新手。我试图让我的列表视图更新，我已经尝试了一切......从在 ui 线程上调用 notifydatasetchanged 到只是简单地重新创建我的列表适配器，但无论出于何种原因，当我更新时，无论我使用哪种方法我有滚动查看更改。我的意思是数据更新（比如列表中的 13:01 更改为 13:02），它会更新，但要查看更改，我必须滚动以使 13:01 离开屏幕，然后返回将在视觉上更新。为什么是这样？（我现在无法发布代码，因为我正在使用手机，但如果需要，我会稍后发布。）

编辑：这是相关代码……抱歉，我已经好几天没在电脑前了。

ListFragment 的相关部分：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    super.onCreateView(inflater, container, savedInstanceState);

    return inflater.inflate(R.layout.match_fragment, container, false);
}

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    MatchAdapter adapter = (MatchAdapter) this.getListAdapter();

    if(futureMatches)
        adapter = new MatchAdapter (this.getActivity(), ((MainActivity)this.getActivity()).getMatches(), futureMatches);
    else
        adapter = new MatchAdapter (this.getActivity(), ((MainActivity)this.getActivity()).getPastMatches(), futureMatches);

    setListAdapter(adapter);
}

public void refresh()
{
    MatchAdapter adapter;

    //Update array in mainactivity
    if(futureMatches)
        MainActivity.refreshMatches((MainActivity) getActivity());
    else
        MainActivity.refreshPastMatches((MainActivity) getActivity());

    //put updated entries in the adapter
    if(futureMatches)
        adapter = new MatchAdapter (getActivity(), ((MainActivity)getActivity()).getMatches(), futureMatches);
    else
        adapter = new MatchAdapter (getActivity(), ((MainActivity)getActivity()).getPastMatches(), futureMatches);

    setListAdapter(adapter);
    updateList();
}

public void updateList(){

    this.getActivity().runOnUiThread(new Runnable() {

        public void run() {
            ((BaseAdapter) getListAdapter()).notifyDataSetChanged();
            getListView().refreshDrawableState();
            getListView().invalidate();
        }
    });
}

public void onViewStateRestored(Bundle savedInstanceState)
{
    super.onViewStateRestored(savedInstanceState);
}

public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    refresh();
} 
```

我的适配器类：

```
public class MatchAdapter extends BaseAdapter
{
private final Activity context;
private LayoutInflater inflater;
private boolean time = false;
private boolean futureMatchAdapter = true;
private ArrayList<String> matchList;

public MatchAdapter(Context cont, ArrayList<String> matches, boolean isFutureMatchAdapter)
{
    matchList = matches;
    futureMatchAdapter = isFutureMatchAdapter;
    context = (Activity) cont;
    inflater = LayoutInflater.from(context);
}

public int getCount()
{
    return MatchAdapter.size();
}

@Override
public Object getItem(int position)
{
    return MatchAdapter.get(position);
}

public long getItemId(int position)
{
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{
    ViewHolder holder;
    String curPos = ""; 
    curPos = MatchAdapter.get(position);

    //times, future matches and past matches are handled differently
    if(curPos.contains("Last updated:"))
        time = true;
    else
        time = false;

    if (convertView == null)
    {
        holder = new ViewHolder();
        if(time)
        {
            convertView = inflater.inflate(R.layout.time_item, null);
            holder.title = (TextView) convertView.findViewById(R.id.item_time);
        }
        else
        {
            if(futureMatchAdapter)
            {
                convertView = inflater.inflate(R.layout.feed_item, null);
                holder.title = (TextView) convertView.findViewById(R.id.item_title);
            }
            else
            {
                convertView = inflater.inflate(R.layout.past_feed_item, null);
                holder.title = (TextView) convertView.findViewById(R.id.item_title_past);
            }
        }

        convertView.setTag(holder);
    }
    else
        holder = (ViewHolder) convertView.getTag();

    if(futureMatchAdapter)
        holder.title.setText(matchList.get(position));
    else
    {
        String matchString = matchList.get(position);

        String alwaysVisible = matchString.replace("<", "vs");
        alwaysVisible = alwaysVisible.replace(">", "vs");

        if(!time)
            alwaysVisible = alwaysVisible.substring(0, alwaysVisible.length() - 1);

        holder.title.setText(alwaysVisible);

        if(matchString.contains(">"))
        {
            String winner = matchString.substring(0, matchString.indexOf(">")) + "won!";
            alwaysVisible = alwaysVisible.concat(winner);
        }
        else if(matchString.contains("<"))
        {
            String winner = matchString.substring(matchString.indexOf("<") + 2, matchString.indexOf("\n")) + " won!";
            alwaysVisible = alwaysVisible.concat(winner);
        }       

        holder.title.setOnClickListener(new pastMatchesOnclickListener(alwaysVisible) 
        {
            public void onClick(View v) 
            {
                ((TextView) v).setText(matchWinner);
            }
        });
    }

    return convertView;
}

static class ViewHolder
{
    TextView title;
    TextView time;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:10:17.330

您是否尝试使用适配器更新您的列表？

```
dataadapter.clear();
dataadapter.addAll(allDataResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:11:39.990

要显示和更新内容，`ListView`您应该：

1.  创建或查找您的`ListView`
2.  创建你的`ListAdapter`
3.  将您添加`ListAdapter`到您的`ListView`
4.  将数据添加到您的`ListAdapter`
5.  致电`notifyDataSetChanged()`您的`ListAdapter`.

例子：

```
ListView listView = (ListView) findViewById(R.id.listview);
MyListAdapter myListAdapter = new MyListAdapter();
listView.setAdapter(myListAdapter);

myListAdapter.add("Hello");
myListAdapter.add("Hi");
myListAdapter.notifyDataSetChanged(); 
```

注意：如果您使用的子类`ArrayAdapter`将`notifyDataSetChanged()`在您使用方法时为您调用`add()`，`addAll()`等。

# ruby-on-rails-3 - Rails 如何区分属于不同用户的即时变量

> ID：15259054
> 
> 赞同：1
> 
> 时间：2013-03-06T22:07:20.867
> 
> 标签：ruby-on-rails-3

我正在关注 RailsCast 实现 Facebook API。在`User`模型中，我有一个方法：

```
 def facebook
     @facebook ||= Koala::Facebook::API.new(oauth_token) 
```

它创建了一个即时变量，可以与用户模型中的其他方法共享。

我的问题是：

如果我的 Rails 应用程序有 100 个用户在线，每个用户创建一个实例`@facebook`，Rails 怎么知道哪个`@facebook`与用户关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:09:30.953

它没有。Web 应用程序中没有“在线”之类的东西，每次单击链接时，都会发送一个请求。对于该请求，所有类都被实例化，包括运行您发布的代码。

请求完成后，这些类将被处理掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:10:25.997

实例变量与它们所属的对象的实例相关联。

用户与他们自己的`User`实例进行交互，因为它与他们的会话或特定请求相关联。请求是使用特定于请求的控制器实例来处理的，这些实例又处理 a 的特定实例`User`，因此是`@facebook`值。

# javascript - Javascript / jquery - 像 PHPs $_GET

> ID：15259057
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:07:34.353
> 
> 标签：javascript, jquery

我在我的网址中设置了一个变量：

```
http://mydomain.com?myvar=1 
```

现在我需要在页面加载时检查这一点。我通常会在 PHP 中执行此操作，但我需要使用一些 jQuery。我想做的是：

```
$(document).ready(function() {
    var somevar = $GET['myvar'];
    if (somevar = '1') {
        $('#someDiv').hide();
    }
}); 
```

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:09:22.567

这是一个可以做到这一点的函数：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

# macos - 如何在 OS X 上的屏幕上绘制矩形？

> ID：15259060
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:07:39.780
> 
> 标签：macos, cocoa, drawing, core-graphics

当用户选择要捕获的区域时，我想在 OS X 上的当前屏幕上绘制矩形，例如来自 Grab 应用程序的矩形。任何人都可以给我建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:45:21.447

我这样做的方式是，创建您自己的自定义窗口，然后您可以给它一个透明背景和一个代表您的选择矩形的边框。谷歌搜索客户窗口可可，或不规则形状窗口可可，你会发现很多例子。

# arrays - Perl 数组转储

> ID：15259061
> 
> 赞同：0
> 
> 时间：2013-03-06T22:07:42.790
> 
> 标签：arrays, perl, output

***我这样做：***

```
my @items = [];

sub pushItem {
   my $itemId = "i" . sprintf("%d", $_[0]);
   push(@items, $itemId);
}

sub popItems {
   $itemsXml = "<key>items</key>\n<array>\n";

   foreach (@items) {
      $itemsXml .= "<string>$_</string>\n";
   }

   $itemsXml .= "</array>\n";

   return $itemsXml;
}

pushItem(0);
pushItem(1);
pushItem(2);
print popItems(); 
```

***我明白了：***

```
 <key>items</key>
 <array>
 <string>ARRAY(0x7fa1730070d0)</string>
 <string>i0</string>
 <string>i1</string>
 <string>i2</string>
 </array> 
```

***问题当然是：***

```
<string>ARRAY(0x7fa1730070d0)</string> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:09:04.190

```
my @items = []; 
```

应该

```
my @items = (); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:12:12.277

`[]`创建一个数组和对该数组的引用，并返回后者。这意味着`@items`除了创建之外，以下内容还填充了对第二个数组的引用`@items`：

```
 my @items = []; 
```

你只是想要

```
 my @items; 
```

如果你坚持给它分配一些东西，你会想给它分配一个零标量列表，你可以这样做：

```
 my @items = (); 
```

但实际上，这只是一种浪费（因为您正在清除一个空数组）并且它增加了不必要的复杂性（什么都不做的代码）。

* * *

需要明确的是，`@items = ();`（相对于`my @items = ();`）仍然有用，尽管很少。我认为我唯一一次使用它是在以下形式的代码中：

```
my @buf;
while (my $item = get()) {
   if (check($item)) {
      something(@buf);
      @buf = ();
   }

   push @buf, $item;
}

something(@buf) if @buf; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T22:15:28.417

你的问题是你的第一行：

```
my @items = []; 
```

它应该是：

```
my @items = (); 
```

问题是您已经为数组@items 的第一个元素分配了一个数组引用，然后您将一堆其他值推送到它上面。

如果您使用括号对其进行初始化，它会执行您想要的操作，即创建一个空数组。如果您注释掉对 pushItem 的调用并运行脚本，这会变得更加明显。

# php - 在 Wordpress 中仅显示一个类别的帖子时遇到问题

> ID：15259071
> 
> 赞同：0
> 
> 时间：2013-03-06T22:08:09.980
> 
> 标签：php, wordpress, categories

我很难仅将所需的类别拉入 Wordpress 上的存档页面。我的代码在下面，我认为通过定义*get-category-by-slug*这会起作用，但它会将所有帖子从每个类别拉到页面中。

```
<?php
    $category = get_category_by_slug('weddings');
    $args = array(
                 'post_type' => 'elp_projects',
                 'posts_per_page' => 12,
                 'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1)
                 );
    query_posts($args);
    $x = 0;

    while (have_posts()) : the_post();
?> 
```

任何有关如何解决此问题的想法将不胜感激。

我也尝试过这些组合，但没有运气。

```
<?php
    $category = get_category_by_slug('weddings');
    $args = array(
                 'post_type' => 'elp_projects',
                 'posts_per_page' => 12,
                 'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1)
                 );
    $query = new WP_Query( 'category_name=weddings' );
    $x = 0;

    while (have_posts()) : the_post();
?> 
```

和

```
<?php $query = new WP_Query( 'category_name=weddings' ); ?> 
```

和

```
<?php
    $args = array(
                 'post_type' => 'elp_projects',
                 'posts_per_page' => 12,
                 'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1)
                 );
    $query = new WP_Query( 'category_name=weddings' );
    $x = 0;

    while (have_posts()) : the_post();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:46:55.980

如果您愿意，请不要使用`query_posts`它不是查询数据的最佳方式，它是[**最后的手段**](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts#answers-header) 。

而是使用`WP_Query`从一个类别中获取帖子只是`$query = new WP_Query( 'category_name=staff' );`参考此[**页面**](https://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)以获取有关如何使用从一个类别中获取帖子的更多信息`WP_Query`。

**编辑** 试试这个

```
$the_query = new WP_Query( array( 
  'post_type' => 'page',
  'orderby' => 'date',
  'category_name' => 'wedding', //name of category by slug
  'order' => 'DESC',
  'posts_per_page' => )); // how many posts to show

  // Put into the loop
  while ( $the_query->have_posts() ) :
   $the_query->the_post();
   echo '<li>' . get_the_title() . '</li>';
  endwhile;

  // Restore original Post Data if needed
  wp_reset_postdata(); 
```

# javascript - 输入-存储-存储-输出

> ID：15259072
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:08:15.300
> 
> 标签：javascript, html, input, output

我无法获得在另一页上存储一些值并将其输出到下一页的功能。例如，我有 dog.html 和 cat.html，它们分别有一个提交按钮。我想获取 dog.html 和 cat.html 的输入并在 pay.html 上输出值（单击 cat.html 中的提交按钮后

我在 pay4.html 中有这段代码，我可以从上一页获取值。

```
function getParams(){
    var idx = document.URL.indexOf('?');
    var params = new Array();
    if (idx != -1) {
        var pairs = document.URL.substring(idx+1,
                document.URL.length).split('&');
        for (var i=0; i<pairs.length; i++){
            nameVal = pairs[i].split('=');
            params[nameVal[0]] = nameVal[1];
        }
    }
    return params;
}
params = getParams();
Name = unescape(params["Name"]);
Address = unescape(params["Address"]);
ContactNo = unescape(params["ContactNo"]);
Email = unescape(params["Email"]);
document.write("Name: " + Name + "<br>");
document.write("Address: " + Address + "<br>");
document.write("Contact number: " + ContactNo + "<br>");
document.write("E-mail: " + Email + "<br>"); 
```

在输出我输入的所有值之前，我需要在某些页面中再次输入。

```
<form name="info" action="pay1.html" type=GET>
<form name="info" action="pay2.html" type=GET>
<form name="info" action="pay3.html" type=GET>
<form name="info" action="pay4.html" type=GET> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:14:14.697

尝试使用 cookie 将您的数据传输到多个页面（假设它们在同一个域中）。如果它在服务器上运行，则可以使用会话。

[在https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)阅读更多内容

# jquery - IE8 及以下 jQuery .click() ajax 问题

> ID：15259074
> 
> 赞同：0
> 
> 时间：2013-03-06T22:08:25.607
> 
> 标签：jquery, ajax, internet-explorer

我有一个奇怪的问题，即在另一个单击事件触发单选按钮被选中之前，一个函数绑定到单选输入上的单击事件触发。听起来有点混乱，所以这里看一下代码：

```
<div class="side">
    <input type="radio" id="100" value="100" name="radiogroup" style="display:none;" />
    <label for="100">
        <img src="" />
        <span>Description</span>
    </label>
</div> 
```

大多数浏览器都支持点击标签来触发选择单选输入，当然 IE 不支持。因此，我在我的 html 上使用条件类，例如

```
<!--[if IE 8]><html class="no-js lt-ie9 ie8" lang="en" xmlns="http://www.w3.org/1999/xhtml"> <![endif]--> 
```

这允许轻松创建 IE 特定的 javascript。在这种情况下，我需要在单击标签时模拟对无线电输入的单击，我这样做是这样的：

```
$(".lt-ie9 .side label").bind("click", function() {
    $(this).siblings("input").click();
}); 
```

到目前为止一切正常。当我在单击无线电输入时尝试插入 AJAX 调用时出现问题，如下所示：

```
$("input[name=radiogroup]").bind("click", function() {
    //some ajax call referencing which radio option is selected.
}); 
```

我遇到的问题是，在无线电输入实际切换到最新选择之前，ajax 方法就被触发了。因此，例如，如果我有多个无线电输入，例如 id/值“100”、“101”、“102”等。如果我点击 100，然后我点击 101，则 ajax 调用使用的值100 而不是最近点击的值 101。有人知道为什么会这样吗？在我看来，在选中最新的单选按钮之前不应调用 ajax 方法。希望这一切都有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:24:21.487

它通过将绑定切换到“更改”而不是“点击”来工作，但是 IE 仍然有问题。我通过调用 $(this).siblings("input").click().change(); 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:03:59.430

IE 将无法使用 display:none 在收音机上触发点击标签；但是，您可以通过触发隐藏元素（或单击事件）上的更改事件来解决此问题（类似于您所拥有的）；您的标记也有问题。

我修改了您的标记以修复不能以数字开头的 ID，并添加了稍微修改的代码 - 也许比您的解决方案更模块化？

```
<div class="side">
    <input type="radio" id="my100" value="100" name="radiogroup" style="display:none;" />
    <label id='my100label' for="my100">
        <img src="" />
        <span>Description</span>
    </label>
</div> 
```

和代码，使用新的 id：

```
$('.side').on('click','#my100label',function(){
  $('#my100').prop('checked',true).trigger('change');
});
$('#my100').on('change',function(){
  alert('Howdy I am:'+ $(this).prop('checked'));
}); 
```

注意：您可以删除`.prop()`代码并简单地触发“点击”事件，但是，在收音机的更改/点击中的第一次道具将是错误的（尚未更改/点击） - 如果您请务必注意这一点走那条路。在这种情况下最好监视更改事件，因为您将无法手动“单击”元素，并且由于其隐藏性质，需要使用代码更改/单击它 - 如果在表单内，它不会提交。

注意：在此处使用 jQuery 1.9.1 和 IE8 测试此代码：http: [//jsbin.com/ocisul/1/edit](http://jsbin.com/ocisul/1/edit)

# javascript - 语法错误 JSONLoader

> ID：15259076
> 
> 赞同：0
> 
> 时间：2013-03-06T22:08:38.120
> 
> 标签：javascript, json, three.js

我正在尝试将我的模型从 c4d 导入到 three.js 中。我知道有一个适合我的 OBJLoader。如果我想使用我导出的波前 (.obj) 并使用**convert_obj_three.py**进行转换，它不会返回任何错误并且 json 文件看起来很好。

但是，如果我想在我的 three.js 脚本中加载生成的 .js 文件，它会返回：

**Uncaught SyntaxError: Unexpected token ;**

这是我尝试过的：

```
var loader2 = new THREE.JSONLoader();
loader2.load('assets/models/test.js', createScene);
function createScene(){
    mesh = new THREE.Mesh();
    scene.add(mesh);
} 
```

test.js：[http ://www.file-upload.net/download-7296129/test.js.html](http://www.file-upload.net/download-7296129/test.js.html)

错误：[http ://www.file-upload.net/download-7296139/screenie.png.html](http://www.file-upload.net/download-7296139/screenie.png.html)

这是整个代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - loaders - OBJ loader</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: gray;
                color: #fff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
        </style>
    </head>

    <body>
        <div id="info">
        <a href="http://threejs.org" target="_blank">three.js</a> - OBJLoader test
        </div>

        <script src="assets/three.min.js"></script>
        <script src="assets/OBJLoader.js"></script>

        <script src="assets/TrackballControls.js"></script>

        <script src="assets/Detector.js"></script>
        <script src="assets/stats.min.js"></script>

        <script>

            var container, stats;

            var camera, scene, controls, renderer;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 900;

                // controls

                controls = new THREE.TrackballControls( camera );

                controls.rotateSpeed = 5.0;
                controls.zoomSpeed = 5;
                controls.panSpeed = 2;

                controls.noZoom = false;
                controls.noPan = false;

                controls.staticMoving = true;
                controls.dynamicDampingFactor = 0.3;

                // scene

                scene = new THREE.Scene();

                var ambient = new THREE.AmbientLight( 0xfff3dd );
                scene.add( ambient );

                var directionalLight = new THREE.DirectionalLight( 0xffeedd );
                directionalLight.position.set( 0, 0, 1 ).normalize();
                scene.add( directionalLight );

                // model

                var loader2 = new THREE.JSONLoader();
                loader2.load('assets/models/test.js', function (geometry, materials){

                    mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
                    scene.add(mesh);

                });

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );
                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                controls.handleResize();
                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function animate() {

                requestAnimationFrame( animate );
                render();

            }

            function render() {

                controls.update();
                renderer.render( scene, camera );

            }

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:20:09.343

加载json文件的函数：

```
THREE.JSONLoader.prototype.load = function ( url, callback, texturePath )

loader2.load('assets/models/test.js', function(geometry, materials){

   mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
   scene.add(mesh);

}); 
```

# c++ - 在 C++ 中初始化一个指向类对象中父级的静态指针

> ID：15259078
> 
> 赞同：0
> 
> 时间：2013-03-06T22:08:47.720
> 
> 标签：c++, oop

我希望能够从 Element 类访问我的 Mesh 类中的所有节点。我相信我已经正确设置了两个类来执行此操作，但是我不清楚将静态指针初始化为 Element 内部的 Mesh 的最佳实践。你通常会为此做什么？

谢谢！

代码（到目前为止）

//Mesh.h

```
#pragma once
#ifndef MESH_H
#define MESH_H

#include <vector>
#include <map>
#include "Eigen/Eigen"
#include "Element.h"
#include "Node.h"

class Mesh {
public:
    std::vector< Node* >                m_Nodes;
    std::vector< Element* >             m_Elements;

    Eigen::MatrixXd                     m_K;
    Eigen::VectorXd                     m_F;
    Eigen::VectorXd                     m_u;

    void Mesh::LoadFile(wchar_t* MeshFile);

};

#endif 
```

//元素.h

```
#pragma once
#ifndef ELEMENT_H
#define ELEMENT_H

#include <vector>

class Mesh;

class Element {
public:
    static Mesh *                       m_Parent;
    static int                          m_ElementCount;
    int                                 m_ElementIndex;
    std::vector< int >                  m_ElementNodes;
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:38:46.877

我缺乏对您的帖子发表评论的声誉，所以我必须在这里发帖。

为什么不让每个 Element 实例都有自己的指向其父对象的指针？每个指针都可以指向同一个 Mesh 对象。节省内存真的那么重要吗？

即使你最终得到了一个单一的网格，如果将来你确实想扩展到多个网格，每个网格都有一组元素，那么更改将更容易完成。

如果您*确实*需要一个指向父网格的静态指针，您可以将元素的构造封装在 Mesh 的方法中，并在 Mesh 的构造函数中将父指针设置为*this*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:46:27.310

您必须定义静态指针（在任何源文件中；不在 中`*.h`）：

```
Mesh* Element::m_Parent; // initialized to NULL by the system 
```

此外，要初始化它，请使用以下语法：

```
Element::m_Parent = whatever; 
```

我尽量不改变你的类设计中的任何东西，但你应该考虑哪些成员函数和字段应该是`static`，哪些不应该；现在的设计看起来不太方便。

# c# - 复制交易功能的麻烦

> ID：15259081
> 
> 赞同：0
> 
> 时间：2013-03-06T22:08:59.873
> 
> 标签：c#, sql, transactions

我正在更新一个在 Live 环境中工作和使用的当前程序，它保存客户和订单，然后将它们导出到旧数据库。所有的报表还在旧系统中完成，而新系统中的报表系统正在开发中，这就是为什么这些都需要导出的原因。

该程序有一个内置的 C# TransactionManager，用于在一个事务中将多个从 C# 到 SQL 的调用分组。每当我尝试复制它时，我都会出错并且无法正常工作。

这是到位的代码，工作：

```
using (ITransactionInfo trx = this.TransactionManager.BeginTransaction())
{
    //
    // Update the customer. If the customer doesn't exist, then create a new one.
    //
    this.SaveCustomer(Order);

    //
    // Save the Order.
    //
    this.Store.SaveCorporateOrder(Order, ServiceContext.UserId);

    //
    // Save the Order notes and the customer notes.
    //
    this.NotesService.AppendNotes(NoteObjectTypes.CorporateOrder, Order.Id, Order.OrderNotes);
    this.NotesService.AppendNotes(NoteObjectTypes.Customer, Order.Customer.Id, Order.CustomerNotes);

    //
    // Export the Order if it's new.
    //
    this.ExportOrder(Order, lastSavedVersion);

    //
    // Commit the transaction.
    //
    trx.Commit();
} 
```

所有这些功能只是格式化数据并将参数发送到数据库中的存储过程，这些过程在数据库上执行选择/插入/更新操作。

SaveCustomer 存储过程将客户保存到新数据库中。

SaveCorporateOrder 存储过程获取由 Save Customer 存储过程编写的信息，并使用它来将 Order 保存到新数据库中。

ExportOrder 存储过程获取由前两个存储过程写入的信息，并将 Order 导出到旧数据库。

这些存储过程中的每一个都包含在@@TRANCOUNT == 0 时启动新事务的代码，并在末尾有一个提交语句。由于 C# 中的事务，似乎这些都没有被使用，但是没有代码可以将事务信息或连接信息传递给我可以看到的存储过程。这是在 SQL 2005 服务器上工作和使用的。

当我尝试构建它并在使用 SQL 2008R2 的开发环境中使用它时，我收到如下错误

```
"Uncommittable transaction is detected at the end of the batch" 
```

和

```
"The server failed to resume the transaction" 
```

似乎每个人都在开始自己的事务，并且无法从前一个未提交的事务中读取数据，而不是看到它在同一个事务中。我不知道不同的 SQL 版本是否会导致其工作方式不同，但完全相同的代码在 Live 安装中有效，但在我的开发环境中无效。

任何想法，甚至是下一步的方向都会很棒！

谢谢！-雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:57:09.520

我认为问题是因为交易失败并且没有被拒绝。当任何 SQL 查询失败时，您没有回滚调用。你检查过这些查询吗？

# vb.net - VB.NET 如何在 webbrowser-control 的 msgbox 中单击 Ok？

> ID：15259082
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:01.427
> 
> 标签：vb.net, webbrowser-control

VB.NET 如何在 webbrowser 控件的 msgbox 中单击确定？

当 msgbox 显示时，我尝试了此代码

```
SendKeys.Send("{ENTER}") 
```

但我只是实时打开webbrowser-control，是不是另一种方式？

# php - 强制下载其他服务器上的文件

> ID：15259083
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:02.457
> 
> 标签：php, javascript, .htaccess

我正在尝试找出如何使用 mp4 文件和 flv 文件强制下载（右键单击 + 另存为）。我会使用 .htaccess 强制下载，但 mp4 和 flv 文件不在我的服务器上。它们是从其他网站解析的直接链接。有谁知道我怎么能做到这一点？我使用了 download="" html5 标签，但它似乎只适用于谷歌浏览器。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:14:47.810

最好的选择是将“强制下载”逻辑从`.htaccess`PHP 文件中移出，然后让该文件获取远程文件并将其传递给收件人。

# sql - 如何检查一个表数据是否在其他进程中被引用

> ID：15259086
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:07.867
> 
> 标签：sql, tsql, sybase

如何检查一个表数据是否在其他进程/过程中被引用/是否在sybase的其他表中被使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:14:29.790

尝试这个

```
SELECT DISTINCT o.name, o.xtype
    FROM dbo.syscomments c
    INNER JOIN dbo.sysobjects o ON c.id=o.id
    WHERE c.TEXT LIKE 'Table_Name_here' 
   -- and xtype = 'P' --un-comment if you want only procedures 
```

# visual-studio-2012 - VS2012，带有 Edmx 的 SQL Server CE 3.5

> ID：15259094
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:24.890
> 
> 标签：visual-studio-2012, sql-server-ce

我有一个程序，我们分发给使用 SQL Server CE 3.5 数据库的客户群。我们最近将我们的VS从2010升级到2012。现在我需要稍微修改一下数据库。我知道 VS2012 不再支持 SQL Server CE 3.5，但是升级到 4.0 将花费我大量的时间。

有没有办法手动向我的 EDMX 添加字段？我可以使用脚本更改我的数据库，但我希望我的 EDMX 匹配，这样我就不必对我的数据库进行更多调用。

我尝试手动添加该字段，但是当我调用该表时，我得到一个无效的列错误。我也已经将该字段添加到数据库文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:44:47.497

在VS2010中用edmx打开项目，根据更新的数据库结构替换成新的，在VS 2012中打开项目

# asp.net-mvc - 在 MVC4 中为 DisplayFor 使用 EditorFor 模板？

> ID：15259098
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:09:34.513
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用编辑器模板在我的 viewModel 视图中创建一个 Html.EditorFor(property) 。有一个不同的 .cshtml 文件包含“@​​Html.EditorFor(property)”。

现在，根据我的 viewModel 的属性值，我需要改为显示 DisplayFor。

我尝试通过在我的 EditorTemplate 中添加一些条件逻辑来做到这一点，但似乎无法从那里访问我的 viewModel 的属性（因为编辑器模板使用的是@model.someOtherModel 而不是@viewModel）。所以如果我可以说类似的话

```
// Razor
if(true)
{ EditorFor(property) }
else {DisplayFor(property)} 
```

在我的 viewModel 看来，这可行。我只是不知道如何为我的对象定义一个“显示模板”，就像我定义一个编辑器模板一样。

另一种解决方案可能是从编辑器模板访问 viewModel 数据......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:12:11.007

在 Razor 中，您应该使用类似于以下语法的内容：

```
@if (condition) {
   @Html.EditorFor(modelItem => model.property)
} else {
   @Html.DisplayFor(modelItem => model.property)
} 
```

您是否收到可以分享的特定错误？

# java - Android：打开具有特定路径的文件

> ID：15259099
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:50.277
> 
> 标签：java, android, fileinputstream, fileoutputstream, illegalargumentexception

我尝试创建文件 ^ 设置一些文本 ^ 然后阅读它，但我明白了

“java.lang.IllegalArgumentException：文件 /mnt/sdcard/new.txt 包含路径分隔符”

在线 (75) - FileInputStream fis = new FileInputStream(new File(Environment.getExternalStorageDirectory() + File.separator +fileName));

这是我的代码：

```
String fileName = "new.txt";

file = new File(Environment.getExternalStorageDirectory() + File.separator + fileName);
    Log.d("External Storage :"," "+ Environment.getExternalStorageDirectory() + File.separator + fileName);
    if(!file.exists()){
        try {
            file.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("IOException: "," "+e.getMessage());
        }
    }else{
        Log.d("Create error:", "file exist");
    }

    try {
        FileOutputStream fout = openFileOutput(fileName, MODE_WORLD_READABLE );
        OutputStreamWriter osw = new OutputStreamWriter(fout);
        osw.write("its first file and i need to know how it work's");
        fout.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        Log.d("FOS  OSW :", ""+e.getMessage());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.d("osw write :", ""+e.getMessage());
    }

    try {
        FileInputStream fis = new FileInputStream(new File(Environment.getExternalStorageDirectory() + File.separator +fileName));     
        InputStreamReader isr = new InputStreamReader(fis);
        BufferedReader bf  = new BufferedReader(isr);
        try {
            fis.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            Log.d("fis close :", ""+e1.getMessage());
        }
        try {
            tvRead.setText("text : "+bf.readLine());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("to tv Read  :", ""+e.getMessage());
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        Log.d("fis open :", ""+e.getMessage());

    }
} 
```

# python - X 次连续失败后停止 pytest

> ID：15259102
> 
> 赞同：0
> 
> 时间：2013-03-06T22:09:57.313
> 
> 标签：python, testing, pytest

目前 pytest 具有 --maxfail=X 标志，可在 X total 失败后停止整个系统。

有人可以告诉我如何做同样的事情，但不是完全失败，而是连续 X 次失败？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T21:06:11.333

尝试使用`--maxfail parameter`. 签到`pytest -h`：

```
pytest --maxfail=num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:52:35.720

我确信有一个更好的解决方案，但您可以编写一个脚本，通过您想要的所有测试逐个调用：

```
pass=py.test.main(test) 
```

并保持一个计数器在 pass=0（即测试通过）时重置，并在计数器达到 X 时抛出异常：

```
count=0
for tests:
    pass=py.test.main(test)
    if pass=1: count+=1
    else: count=0
    if count==X BREAK; 
```

# dynamics-crm-2011 - 从 ASP.NET 登录到 CRM

> ID：15259106
> 
> 赞同：1
> 
> 时间：2013-03-06T22:10:13.073
> 
> 标签：dynamics-crm-2011

我正在编写一个应用程序，我必须在其中从 ASP.NET 代码登录到 CRM 2011 服务器。我很快找到了这篇文章：

[http://msdn.microsoft.com/en-us/library/cc156363.aspx](http://msdn.microsoft.com/en-us/library/cc156363.aspx)

我遇到的问题是那篇文章中的这段代码：

```
//Create the Service
CrmService service = new CrmService();
service.Credentials = System.Net.CredentialCache.DefaultCredentials;
service.CrmAuthenticationTokenValue = token;
service.Url = crmurl; 
```

Visual Studio 无法解析 CrmService。所以我尝试为这个项目添加一个网络引用，并将网络引用指向我正在使用的 CRM 服务。我从 CRM 中的 Settings->Customizations 获得的 URL，我正在使用组织服务端点。但是，在我添加该引用之后 CrmService 仍然无法解析。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:53:41.597

首先，您已经链接了一篇 CRM 4 MSDN 文章，有些事情已经改变，所以您可能想试试这个：[使用 Microsoft Dynamics CRM Web 服务验证用户](http://msdn.microsoft.com/en-us/library/gg328497.aspx)。

然后作为替代方案，您可能想尝试`CrmConnection`该类，它是`Microsoft.Xrm.Client`. 这意味着您可以使用连接字符串方法向 CRM 进行身份验证（并让班级负责所有繁重的工作）。

```
var connection = CrmConnection.Parse("Url=http://crm.contoso.com/xrmContoso; Domain=CONTOSO; Username=jsmith; Password=passcode;");
var service = new OrganizationService(connection);
var context = new CrmOrganizationServiceContext(connection); 
```

您还可以将连接字符串保留在`config`文件中，这让生活变得更加轻松。

相关文章：

*   [与 Microsoft Dynamics CRM 的简化连接](http://msdn.microsoft.com/en-gb/library/gg695810.aspx)。
*   [示例：使用 Microsoft Dynamics CRM 的简化连接快速入门](http://msdn.microsoft.com/en-gb/library/jj602970.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:22:30.017

If you're using standard AD authentication with a local environment this answer should work fine: [How to Authenticate to CRM 2011?](https://stackoverflow.com/questions/15090305/how-to-authenticate-to-crm-2011/15091928#15091928)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:26:01.090

Actually, the login procedure is heavily dependent on the authentication provider you're targeting. I'm currently in the process of structuring that info in a pedagogic way on my blog so you're welcome to check it out and nag if it's too techy.

There are at the moment four such ways.

*   Active directory
*   Live id
*   Federation
*   Online federation

Which is applicable in your case, you should know already. If not, there's code for that too uploaded just a few days ago.

```
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Client;
...
public AuthenticationProviderType GetAuthenticationProviderType(Uri address)
{
  IServiceManagement<IOrganizationService> organizationServiceManagement
    = ServiceConfigurationFactory.CreateManagement
      <IOrganizationService>(address);
  return organizationServiceManagement.AuthenticationType;
} 
```

Assuming that you're aiming for AD, you're in luck. It's the easiest.

```
Uri organizationUrl = new Uri("http ... Organization.svc");
OrganizationServiceProxy organizationService = new OrganizationServiceProxy(
  organizationUrl, null, null, null); 
```

If you're aiming for Live Id - that's stingy. I'm still trying to set up a graspable example. The ones at MSDN are just too heavy and confusing. At least when one's dense and lazy like me. More info at mentioned but undisclosed location.

# ruby-on-rails - 了解 RSpec 测试

> ID：15259107
> 
> 赞同：0
> 
> 时间：2013-03-06T22:10:13.113
> 
> 标签：ruby-on-rails

我一直在寻找一段时间，并没有找到关于 RoR 中测试结构的明确解释。（我正在学习 Michael Hartl 的书）。

1.  由于我使用 rspec 进行测试，我还需要保留“test”文件夹吗？
2.  “spec”文件夹结构是否严格分配给特定的测试目的？
3.  “生成”测试脚本时，除了创建脚本文件之外，它还会做其他事情吗？（即我可以手动创建它吗？）

第二个问题来自这个错误：

```
undefined method `visit' for #<RSpec::Core::ExampleGroup: ... 
```

一旦我的非常简单的测试文件不在 /spec/requests 中（但在 /spec/views 中），就会发生这种情况：

```
require 'spec_helper'

describe "Home page" do

  subject { page }

###1
  describe "title" do
    before { visit root_path }

    it { should have_selector('h1',    text: 'Welcome') }
    it { should have_selector('title', text: 'Home') }

  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:14:37.560

1）不，您不需要该`test`文件夹。只有`spec`，除非您使用的是 Test::Unit。

2）您可以随意订购`spec`。一般建议的格式是

```
spec/
  controllers/
  views/      
  models/ 
  lib/ #Only if you have stuff in lib you need to test    
  spec_helper.rb 
```

名称如`spec/controllers/items_controller_spec.rb`, 和`spec/models/item_spec.rb`

3）我不确定你的意思。对于 RSpec，您只需要创建一个使用其语法的文件来测试您的 Ruby 代码的某些部分。它不会创建脚本——你会。

关于您的最后一个问题`visit`：

似乎您正在尝试使用[Capybara](https://github.com/jnicklas/capybara)方法 ( `visit`)。Capybara 负责在浏览器中访问您的网站，而不是 RSpec。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:16:33.087

1.  不，我的理解是该`test`文件夹通常用于 Test::Unit 的东西。您可以删除或保留它；离开它并没有什么坏处。
2.  他们希望您以一种非常具体的方式组织这些东西。例如，如果您有`app/models/user.rb`，您的规范应该在`spec/models/user_spec.rb`.
3.  除了创建测试脚本之外，我不知道它还能做什么。你完全可以手工制作，我一直都在做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:21:20.753

1.  不
2.  见下文
3.  不，只创建文件

您需要使用一种特定的文件夹结构来运行 Capybara 验收测试。这些是其中包含“访问”的测试

水豚1.0

```
spec/requests 
```

水豚2.0

```
spec/features 
```

# php - PHP shmop id 引用和数组大小

> ID：15259111
> 
> 赞同：2
> 
> 时间：2013-03-06T22:10:15.833
> 
> 标签：php, ajax, apache, caching, shared-memory

我试图通过编写函数来自动处理数组和命名来简化对缓存函数的调用。这应该适用于数据不经常更新的大多数情况。这是我到目前为止得到的：

```
function save_cache($data, $name) {
    // get id for name of cache
    $id=shmop_open(get_cache_id($name), "c", 0644, get_array_size($data));

    // return int for data size or boolean false for fail
    if ($id) return shmop_write($id, serialize($data), 0);
    else return false;
}

function get_cache($name) {
    $id=shmop_open(get_cache_id($name), "a", 0644, shmop_size(get_cache_id($name)));
    if ($id) $data=unserialize(shmop_read($id, 0, shmop_size($id)));
    else return false;          // failed to load data

    if ($data) return $data;    // array retrieved
    else return false;          // failed to load data
}

function get_cache_id($name) {
    // build list to return a number for a string id
    // maintain this as new caches are created
    $id=array(  'test'  => 1,
                'test2' => 2
                );

    return $id[$name];
}

function get_array_size($a){
    $size = 0;
    while(list($k, $v) = each($a))$size += is_array($v) ? get_array_size($v) : strlen($v);
    return $size;
} 
```

问题出在 get_cache($name) 函数的第一行。由于这是动态的，我需要根据字符串 $name 查找请求的数组的大小，并在 get_cache_id($name) 中使用我的 id 列表引用它。问题是使用 shmop_open 我需要来自 shmop_size 的大小，但是要使用 shmop_size 我首先需要 shmop_open.... 最后我的 apache 错误日志，第 13 行是 get_cache($name) 中 $id 变量的赋值。

[2013 年 3 月 6 日星期三 15:57:57] [错误] [客户端 127.0.0.1] PHP 警告：shmop_size()：在 /home/mark/htdocs/phplib/cache 中没有 ID 为 [1] 的共享内存段。 php 在第 13 行 [2013 年 3 月 6 日星期三 15:57:57] [错误] [客户端 127.0.0.1] PHP 注意：反序列化（）：/home/mark/htdocs/phplib/cache 中 7769 个字节的偏移量 7765 处出错。第 14 行的 php

编辑：工作代码和实现 - 除了下面的答案，这个脚本的 get_array_size 函数是错误的，应该完全省略。相反，在 save_cache 函数中使用 strlen(serialize($data)) 来确定要存储的缓存大小。此外，您还需要删除该 ID 之前存储的缓存。最终脚本应如下所示：

```
function save_cache($data, $name, $timeout) {
    // delete cache
    $id=shmop_open(get_cache_id($name), "a", 0, 0);
    shmop_delete($id);
    shmop_close($id);

    // get id for name of cache
    $id=shmop_open(get_cache_id($name), "c", 0644, strlen(serialize($data)));

    // return int for data size or boolean false for fail
    if ($id) {
        set_timeout($name, $timeout);
        return shmop_write($id, serialize($data), 0);
    }
    else return false;
}

function get_cache($name) {
    if (!check_timeout($name)) {
        $id=shmop_open(get_cache_id($name), "a", 0, 0);

        if ($id) $data=unserialize(shmop_read($id, 0, shmop_size($id)));
        else return false;          // failed to load data

        if ($data) {                // array retrieved
            shmop_close();
            return $data;
        }
        else return false;          // failed to load data
    }
    else return false;              // data was expired
}

function get_cache_id($name) {
    $id=array(  'test1' => 1
                'test2' => 2
                );

    return $id[$name];
}

function set_timeout($name, $int) {
    $timeout=new DateTime(date('Y-m-d H:i:s'));
    date_add($timeout, date_interval_create_from_date_string("$int seconds"));
    $timeout=date_format($timeout, 'YmdHis');

    $id=shmop_open(100, "a", 0, 0);
    if ($id) $tl=unserialize(shmop_read($id, 0, shmop_size($id)));
    else $tl=array();
    shmop_delete($id);
    shmop_close($id);

    $tl[$name]=$timeout;
    $id=shmop_open(100, "c", 0644, strlen(serialize($tl)));
    shmop_write($id, serialize($tl), 0);
}

function check_timeout($name) {
    $now=new DateTime(date('Y-m-d H:i:s'));
    $now=date_format($now, 'YmdHis');

    $id=shmop_open(100, "a", 0, 0);
    if ($id) $tl=unserialize(shmop_read($id, 0, shmop_size($id)));
    else return true;
    shmop_close($id);

    $timeout=$tl[$name];
    return (intval($now)>intval($timeout));
} 
```

调用此函数以用于 AJAX 自动完成搜索的示例：

```
header('Content-type: application/json; charset=utf-8');
include '../phplib/conn.php';
include '../phplib/cache.php';

$searchTerm=$_GET['srch'];
$test=array();
$test=get_cache('test');
if (!$test) {
    $odbc=odbc_connection(); // defined in conn.php
    $sql="SELECT * FROM mysearchtable";
    $result=odbc_exec($odbc, $sql) or
        die("<pre>".date('[Y-m-d][H:i:s]').
        " Error: [".odbc_error()."] ".odbc_errormsg()."\n\n $sql");

    $i=0;
    while ($row=odbc_fetch_array($result)) {
        foreach ($row as $key => $value) $row[$key]=trim($value);
        $test[$i]=$row;
        $i++;
    }

    save_cache($test, 'test1', 600); // 10 minutes timeout
    odbc_close($odbc);
}

$result=array();
foreach ($test as $key) {
    if (strpos($key['item'])===0) { // starts the string
    // if (strpos($key['item'])!==false) { // in the string anywhere
        $result[]=array('item' => $key['item'], 'label' => $key['label']);
    }
}

echo json_encode($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:24:24.670

看函数说明中的注释：[shmop_open](http://php.net/manual/en/function.shmop-open.php)

`shmop_open` 3rd and 4th parameters should be 0 when opening an already existing segment. If you are getting a cache, the segement should already be created, therefore you don't need to get the segment size in `get_cache`.

# php - php mysqliprepared statements 存储过程 OUT 参数

> ID：15259113
> 
> 赞同：3
> 
> 时间：2013-03-06T22:10:18.623
> 
> 标签：php, stored-procedures, parameters, mysqli, prepared-statement

我有一个问题涉及在 mysqli 准备好的语句中使用存储过程。我将展示的代码片段确实有效，我只是想知道为什么。准备好的语句调用一个带有 6 个参数的存储过程，其中第 6 个是 OUT 参数。

```
 if (!($stmt = $this->sql->prepare("CALL registerUser(?,?,?,?,?,?);"))) { ... }
    $stmt->bind_param("issisi", $id, $email, $pwd, $ip, $actKey, $notUsed);
    $stmt->execute();
    $stmt->bind_result($isSuccessful);
    $stmt->fetch();
    $stmt->close();
    $this->sql->close(); 
```

OUT 参数绑定到

```
$notUsed 
```

执行后不会产生任何值，但是

```
$isSuccessful 
```

我绑定到结果，确实从过程中返回了OUT参数，这个返回值可以是0或1，我已经多次确认了。我只是不明白为什么会发生这种情况，因为该过程不会产生任何结果。

# tfs - TFS 2010 - 限制自定义工作项模板的能力

> ID：15259115
> 
> 赞同：0
> 
> 时间：2013-03-06T22:10:29.723
> 
> 标签：tfs, permissions

有没有办法让项目管理员组的成员无法修改他们项目中的工作项类型定义？

如果我要创建一个模仿项目管理员的自定义组（包含相同的权限），需要拒绝哪些权限？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:15:10.703

这可能会有所帮助：

[管理流程模板权限](http://msdn.microsoft.com/en-gb/library/ms252587%28v=vs.110%29.aspx#Collection)

拥有此权限的用户可以下载、创建、编辑流程模板并将其上传到团队项目集合。

# jquery - 带有下一个/上一个按钮的 CSS/jQuery 全屏幻灯片

> ID：15259117
> 
> 赞同：0
> 
> 时间：2013-03-06T22:10:34.733
> 
> 标签：jquery, css, slide, horizontal-scrolling

我有一个全屏网站，我在 1960 年在 9800 的容器内使用 5 个 div 以及一个带有“上一个”和“下一个”按钮的顶部栏。

目标是在按钮保持不变的情况下滑过 1960 年到下一张幻灯片。现在我已经完成了所有设置并开始工作，基本动画正在运行，但我对一些事情感到好奇；

1.  使用按钮，我试图弄清楚如何制作它，所以当你在第一张幻灯片上时，让它说“回家”和“下一张”，然后说你点击“下一张”，新的幻灯片进来了需要将“回家”更改为“以前”。然后在最后一张幻灯片上反之亦然。

2.  此外，即使在幻灯片 5 之后单击下一步，我当前如何输入“开始”和“结束”原因，它也会继续运行。

当前的jQuery：

```
$(document).ready(function () {
    $(".next_p").click(function () {
        $("#projects").animate({
            marginLeft: "-=1960px"
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:03:26.587

一种可能的解决方案（存在多种解决方案）：

**[演示](http://jsfiddle.net/KML9k/1/)**

html

```
<a href="#" class="prev_p">Previous</a>

<a href="#" class="start">Start</a>

<a href="#" class="next_p">Next</a>
    <div id="projects">
        <div class="slide gray"></div>
        <div class="slide white"></div>
        <div class="slide black"></div>
        <div class="slide gray"></div>
        <div class="slide white"></div>
        <div class="slide black"></div>
    </div> 
```

CSS

```
#projects {
    position:relative;
    float:left;
    width:9800px;
    height:300px;
    overflow:hidden;
}
.slide {
    position:relative;
    float:left;
    border:1px solid black;
    width:1960px;
    height:300px;
}
.gray {
    background-color:gray;
}
.white {
    background-color:white;
}
.black {
    background-color:black;
} 
```

jQuery

```
$(function () {
     $(".prev_p").hide();
     $(".start").hide();
     var slidewidth = 1960; //in Pixels
     var animationSpeed = 300; //in Milliseconds

     //start page
     $(".start").click(function () {
         $("#projects").animate({
             marginLeft: "0px"
         }, animationSpeed, function () {
             $(".start").hide();
             $(".prev_p").hide();
             $(".next_p").show();
         });
     });
     //next page
     $(".next_p").click(function () {
         $("#projects").animate({
             marginLeft: "-=" + slidewidth + "px"
         }, animationSpeed, function () {
             //check location after animation and hide controls
             //that no longer serve a purpose and add those that do
             var marginLeft = $("#projects").css("margin-left");
             var numberOfSlides = 5;
             if (marginLeft == "-" + (slidewidth * (numberOfSlides - 2)) + "px") {
                 $(".next_p").hide();
             }
             if (marginLeft != "0px") $(".start").show();
             else $(".start").hide();
             $(".prev_p").show();
         });

     });
     //previous page
     $(".prev_p").click(function () {
         $("#projects").animate({
             marginLeft: "+=" + slidewidth + "px"
         }, animationSpeed, function () {
             //check location after animation and hide controls
             //that no longer serve a purpose and add those that do
             var marginLeft = $("#projects").css("margin-left");
             if (marginLeft == "0px") {
                 $(".prev_p").hide();
                 $(".start").hide();
             } else {
                 $(".start").show();
             }
             $(".next_p").show();
         });

     });
 }); 
```

# prolog - 在 Prolog 中使用累加器评估多项式的 评估问题

> ID：15259118
> 
> 赞同：3
> 
> 时间：2013-03-06T22:10:37.763
> 
> 标签：prolog, polynomial-math, accumulator

## 背景

我需要写一个谓词eval(P,A,R)，其中：
P表示多项式系数的列表，即1+2x+3x^2表示为[1,2,3]。
A 表示 X 的值
。R 是多项式在 X=A 处的结果。

*示例：* eval([3,1,2],3,R) 产生 R = 24。 ***编辑，以前不正确的示例**

我正在尝试使用本文中的累加器和[Learn Prolog Now](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse20)上的示例。

**我的算法：**
0\. 将结果和指数变量初始化为 0。
1\. 取列表的头部。
2\. 将列表的头部乘以 A^(exponent)。
3\. 更新结果和指数。

**我的代码：**

```
eval(P,A,R) :- accEval(P,A,0,0,R).      
accEval(([H|T]),A,Pow,Accres,R) :- 
        Rnew is (Accres+H*(A**Pow)), 
        Pownew is Pow+1, 
        R = Accres, 
        accEval(T,A,Pownew,Rnew,Rnew).  % *See below
accEval([],A,Pow,Accres,Accres).

% *Previously, when the second Rnew in this line was R instead, output was "no". 
```

**产生跟踪：**

```
| ?- eval([1,2],3,R).
  1    1  Call: eval([1,2],3,_20) ? 
  2    2  Call: accEval([1,2],3,0,0,_20) ? 
  3    3  Call: _126 is 0+1*3**0 ? 
  3    3  Exit: 1.0 is 0+1*3**0 ? 
  4    3  Call: _157 is 0+1 ? 
  4    3  Exit: 1 is 0+1 ? 
  5    3  Call: accEval([2],3,1,1.0,1.0) ? 
  6    4  Call: _218 is 1.0+2*3**1 ? 
  6    4  Exit: 7.0 is 1.0+2*3**1 ? 
  7    4  Call: _249 is 1+1 ? 
  7    4  Exit: 2 is 1+1 ? 
  8    4  Call: accEval([],3,2,7.0,7.0) ? 
  8    4  Exit: accEval([],3,2,7.0,7.0) ?  % We have the correct answer.
  5    3  Exit: accEval([2],3,1,1.0,1.0) ? % Wait! What are you doing!?
  2    2  Exit: accEval([1,2],3,0,0,0) ?   % Why is this falling back out?
  1    1  Exit: eval([1,2],3,0) ? 

R = 0  % Incorrect. The answer should be 7. 
```

如我的代码中所述，以前的尝试对 R 没有产生任何价值，而是产生“否”或在其他实现中产生“是”。

## 问题

为什么结果会丢失，没有带回原来的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:20:15.207

这有点简单：

```
eval(P,A,R) :- accEval(P,A,0,0,R).
accEval(([H|T]),A,Pow,Accres,R) :-
        Rnew is (Accres+H*(A**Pow)),
        Pownew is Pow+1,
        accEval(T,A,Pownew,Rnew,R).  % *See below
accEval([],_A,_Pow,Accres,Accres). 
```

但你的例子似乎不正确

```
?-  eval([3,2,1],3,R).
R = 18. 
```

确实 3+2*X+X^2 with X=3 产生 18

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:21:54.840

应该在递归结束时与累加器值统一的变量已经绑定到一个值。您使用累加器的方式如下：

*   当你第一次“调用”谓词时，给累加器一个初始值
*   使用累加器将累加值传递给递归调用
*   将结果与递归结束子句中的累加器统一起来

根据经验，谓词头部的 Result 变量与向下传递给递归调用的变量相同。这样，一旦它与最后的实际结果（在递归结束子句中）统一起来，它也将在递归之外传递给调用者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T19:54:57.743

这里的策略可能是所谓的霍纳模式。在霍纳模式中，您不需要幂函数 (**)/2 或 (^)/2。[霍纳模式](https://en.wikipedia.org/wiki/Horner's_method)说：

```
a_0 + a_1*x + .. + a_n-1*x^n-1 + a_n*x^n =

a_0 + x*(a_1 + .. + x*(a_n-1 + x*a_n)..) 
```

如果您允许以相反的顺序提供系数 [a_n,..,a_0]，那么 Horner 模式很容易在 Prolog 中实现，如下所示：

```
eval([C|L], X, R) :-
    eval(L, C, X, R).

eval([C|L], A, X, R) :-
    B is A*X+C,
    eval(L, B, X, R).
eval([], A, _, A). 
```

作为奖励，霍纳方案在数值上更稳定。这是一个示例运行：

```
?- eval([2,1,3],3,R).
R = 24 
```

# php - mysql 查询获取今天和 tommrows 日期

> ID：15259119
> 
> 赞同：0
> 
> 时间：2013-03-06T22:10:40.493
> 
> 标签：php, mysql

```
SELECT
   doctors. fullname,
   dutyroster.date,
   dutyroster.time
FROM
   dutyroster
INNER JOIN doctors ON doctors.docid = dutyroster.docid
WHERE doctors.docid = $doc_id AND
dutyroster.date = DATE(NOW()) AND DATE(NOW())+ INTERVAL 1 DAY
ORDER BY dutyroster.`date`  ASC"; 
```

此查询用于从名为 dutyroster 的表中查找特定医生信息。我只想获取当天和明天的文档信息。但这不起作用。

我做了第二个，它也不起作用，因为它返回当前一个和所有下一个日期

```
SELECT
    doctors. fullname,
    dutyroster.date,
    dutyroster.time
FROM
    dutyroster
INNER JOIN doctors ON doctors.docid = dutyroster.docid
WHERE doctors.docid = $doc_id AND
DATE_SUB(CURDATE(),INTERVAL 2 DAY) <= dutyroster.date
ORDER BY dutyroster.`date`  ASC" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:14:03.437

代替

```
... AND dutyroster.date = DATE(NOW()) AND DATE(NOW())+ INTERVAL 1 DAY 
```

尝试

```
... AND (dutyroster.date = CURDATE() OR 
         dutyroster.date = CURDATE() + INTERVAL 1 DAY)) 
```

或更简洁的方式，正如@MarcM 建议的那样

```
... AND dutyroster.date IN (CURDATE(), CURDATE() + INTERVAL 1 day) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:27:06.330

从您的第一次尝试开始，您几乎看起来像是在尝试编写 COBOL！此外，为了将来参考，“这不起作用”不是一个有用的评论。你应该说出实际发生的事情。

无论如何，尝试将您的 where 子句更改为：

WHERE doctors.docid = $doc_id AND (dutyroster.date = CURRENT_DATE OR dutyroster.date = CURRENT_DATE + INTERVAL 1 DAY)

或者：

WHERE Doctors.docid = $doc_id AND dutyroster.date IN (CURRENT_DATE, CURRENT_DATE + INTERVAL 1 DAY))

# c++ - std::bind 和 winsock.h 绑定混淆

> ID：15259120
> 
> 赞同：8
> 
> 时间：2013-03-06T22:10:52.903
> 
> 标签：c++, namespaces, winsock, std

我正在处理一个非常大的项目，在一个文件中，我们突然遇到一个编译时错误，编译器似乎认为我们对 winsock.h`bind()`的调用实际上是对`std::bind()`. 似乎包含文件中的某处有`using namespace std`代码片段。我们可以尝试找到它们`using namespace std`在哪里使用并删除它们，但也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T22:12:06.340

您可以更改`::bind()`用于指定全局命名空间的调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-06T23:48:07.603

是的，这很不幸。正如我在[http://gcc.gnu.org/ml/libstdc++/2011-03/msg00143.html](http://gcc.gnu.org/ml/libstdc++/2011-03/msg00143.html)中描述的那样，`std::bind`除非您使用正确的参数类型，否则模板是更好的匹配：

> 问题是套接字 bind() 函数具有这个签名：
> `int bind(int, const sockaddr*, socklen_t);`
> 因此示例中使用非常量指针的调用发现可变参数模板 std::bind 是更好的匹配。如果第三个参数是除 socklen_t 之外的任何整数类型，也会发生同样的情况。

您的代码可以与 GCC 一起使用，因为我向 GCC 添加了一个符合标准的扩展来`std::bind`防止这种歧义，如果第一个参数是“socket-like”（我使用and`std::bind`定义的），则从重载集中删除。不过，这对其他实现没有帮助。`is_integral``is_enum`

无论如何，删除`using namespace std;`是一个好主意，但可能并不完全足够，因为对它的非限定调用`bind()`恰好使用命名空间中定义的类型`std`（例如`std::size_t`）仍然可以`std::bind`通过参数相关查找找到。乔纳森·波特的回答是确保您获得正确功能的最佳方式：将其限定为`::bind`.

# php - 试图将base64（图像）文件保存到服务器，它是空的

> ID：15259123
> 
> 赞同：3
> 
> 时间：2013-03-06T22:11:04.697
> 
> 标签：php, ajax, canvas, png

我正在尝试将画布图像保存到服务器中的文件夹中，但是在检查时该文件为空。我正在使用 AJAX 将编码数据传递给我的 php 脚本，然后 php 脚本将其保存到服务器，为空。

这是我的代码：

JS/AJAX：

```
function convertCanvasToImage(thecanvas) {
                var ajax = new XMLHttpRequest();
                ajax.open("POST",'testSave.php',false);
                ajax.setRequestHeader('Content-Type', 'application/upload');
                ajax.send(canvasData);
            } 
```

PHP (testSave.php):

```
 $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    $unencodedData= base64_decode($filteredData);

    //echo "unencodedData".$unencodedData;

    $fp = fopen( 'test.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp ); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:38:53.310

您在函数中缺少一行`<canvas>`来使用该函数将 转换为数据`.toDataURL()`。

```
function convertCanvasToImage( thecanvas ) {
    var canvasData = thecanvas.toDataURL( 'image/png' ), //add this
        ajax = new XMLHttpRequest();
    ajax.open( 'POST', 'testSave.php', false );
    ajax.setRequestHeader( 'Content-Type', 'application/upload' );
    ajax.send( canvasData );
};

var thecanvas = document.getElementById( 'canvasId' );
convertCanvasToImage( thecanvas ); 
```

# google-chrome - 开发者 Chrome 扩展：包无效。详细信息：“无法 uzip 扩展”

> ID：15259125
> 
> 赞同：4
> 
> 时间：2013-03-06T22:11:12.557
> 
> 标签：google-chrome, google-chrome-extension

我开发了一个 chrome 扩展。我做了一些小的更新，突然无法通过 chrome web-store 安装扩展。我得到错误

`Package is in valid. Details: 'Could not unzip extension'`

![在此处输入图像描述](../Images/75d4e35a8e3aa8f0d099c0768a460a2a.png)

zip 文件似乎有问题。据我了解，在将 zip 文件上传到 chrome 网上商店时，它会被加密为`crx-file`. 会不会是那里发生了小插曲？

通过“加载未打包的扩展”或拖动 crx 文件在本地安装扩展时，它工作正常。所以清单没有问题。我还检查了无效的文件名。我什至创建了一个删除所有文件的版本。

我也尝试了[这篇](https://stackoverflow.com/questions/7984320/chrome-extension-invalid-package-detailscant-unzip-the-extension)SE 帖子中的解决方案。

令我惊讶的是，我找不到谷歌对 chrome 扩展的支持。没有电子邮件或任何我可以联系以寻求帮助的东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:26:24.333

我昨天也遇到了同样的问题。*显然*为我解决了这个问题（我尝试了很多事情，可能与您进行了所有相同的网络搜索）是在顶层压缩文件而不是压缩包含它们的目录。也就是说，zip 列表如下所示：

```
$ unzip -l extension.zip 
Archive:  extension.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
     659  03-05-13 14:12   manifest.json
... 
```

而**不是**这样：

```
$ unzip -l extension.zip 
Archive:  extension.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
        0  03-05-13 15:41   extension/
      641  03-05-13 15:41   extension/manifest.json
... 
```

尽管我发誓后一种包装早些时候对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T00:36:39.130

我今天有一个类似的问题。rhashimoto 的解决方案对我不起作用。

我在 Linux 上开发，最后我发现问题是从 Windows 的角度来看，文件名中有一个保留字符（“：”）。我删除了名称有问题的文件，重新提交，一切正常。

顺便说一句，我的 zip 存档的格式据说会导致上述答案出现问题，但在我修复了文件名问题后它仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T22:39:08.677

有时会发生这种情况，因为扩展是在 OS X 或 Linux 上创建的，并且包含在 Windows 中名称非法的文件。有关详细信息，请参阅[此问题。](https://code.google.com/p/chromium/issues/detail?id=428511)

该错误中给出的列表[来自 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)，其中说：

> 不要使用以下保留名称作为文件名：CON、PRN、AUX、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、 LPT6、LPT7、LPT8 和 LPT9。还要避免这些名称后跟扩展名；例如，不推荐使用 NUL.txt。

因此，例如，在 Windows 上，您不能拥有名为“aux.css”或“aux.html”的文件。

# django - Django South 模式迁移

> ID：15259128
> 
> 赞同：2
> 
> 时间：2013-03-06T22:11:19.360
> 
> 标签：django, django-models, django-south

假设我有一个位于我存储的任何模式迁移文件之间的数据库状态。有什么方法可以运行以前的迁移，同时跳过如下错误？

```
django.db.utils.DatabaseError: relation "post_postcategory" already exists 
```

South 在到达数据库中尚不存在的迁移部分之前遇到了此错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:39:06.423

你可以尝试运行`manage.py migrate --merge`

# c++ - 静态、全局和多个翻译单元

> ID：15259131
> 
> 赞同：5
> 
> 时间：2013-03-06T22:11:37.167
> 
> 标签：c++, compiler-construction, static, global

这包括三个相互关联的问题：

1) 你到底是如何得到多个翻译单元的？当然，所有源文件和头文件都会“加入”在一起，否则您最终会得到不属于该“程序”一部分的代码调用代码。翻译单元和程序不一样吗？

2) 静态对象/类如何处理多个翻译单元？如果不同翻译单元中的多个源文件包含一个会创建一个对象（具有静态数据成员）的标题，每个翻译单元是否会有一个单独的静态数据成员？

3) 与问题 2 类似，全局变量是否在多个翻译单元之间共享（有点像我暗示它们是单独的程序——只是一起编译？？？）还是全局变量仍然起作用……在所有翻译单元中都是全局的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T22:15:03.960

1）每个源文件，连同它包含的头文件，被称为一个翻译单元。它被编译成一个目标文件。然后链接器最终将所有目标文件连接到最终的可执行文件中。（简化，但给你一个基本的想法）

2）链接器将消除副本。

3) 是的，见 2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:15:38.833

1.  不，它们每个都被编译成一个目标文件，这些文件随后被链接在一起。

2.  如果对象已声明但未在标头中定义，这是更好的做法，那么将只定义一个对象（*假设*它实际上定义在一个源文件中）并且包含标头的每个人都将有一种方法用它编程。

    `static`源文件中原本处于全局范围内的对象将无法在该翻译单元之外访问。在任何类或函数之外，`static`将范围限制为翻译单元。

3.  非静态范围的对象，是的，它们确实如此。

# html - 元素不可知的约束？

> ID：15259132
> 
> 赞同：1
> 
> 时间：2013-03-06T22:11:38.433
> 
> 标签：html, xml, xsd

对于我正在使用的 XSD，经过验证的标记是有效的 HTML。我试图应用的规则应该能够应用于任何 HTML 元素。换句话说，我的规则与元素无关。我主要关心约束属性。

```
<xs:element name="div">
    <xs:complexType>
        <xs:sequence>
            <xs:any>
                    <xs:attribute name="containerColor">
                        <xs:simpleType>
                            <xs:restriction base="xs:string">
                                <xs:enumeration value="green"/>
                                <xs:enumeration value="red"/>
                                <xs:enumeration value="blue"/>
                                <xs:enumeration value="yellow"/>
                                <xs:enumeration value="grey"/>
                                <xs:enumeration value="black"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:attribute>
                    <xs:unique name="id" >
                        <xs:selector xpath="*"></xs:selector>
                        <xs:field xpath="*"></xs:field>
                    </xs:unique>
                </xs:any>
            </xs:sequence>
    </xs:complexType>
</xs:element> 
```

我是 XSD 的新手。我确信我有一些基本的误解。

*   *在上面的例子中，我想说任何可以有（但不是必须有）一个“containerColor”属性。如果使用此属性，则必须是枚举颜色之一。*

*   *此外，任何元素都可以有一个 ID，并且它应该是唯一的。*

在上面的尝试中，我抱怨任何元素不是属性/唯一的有效上下文。

从选择器的角度来看，我关心将我正在构建的规则应用于所有元素的集合，而不是特定的元素。有没有办法用 XSD 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:05:06.993

不，您想要的内容无法使用 XSD 通配符来表述。[此链接提供了](http://www.w3.org/TR/xmlschema-1/#declare-openness)[一个](http://www.w3.org/TR/xmlschema11-1/#declare-openness)视图，让您了解在 XSD 1.0 和XSD 1.1中允许使用 xsd:any 粒子做什么。基本上，您唯一可以嵌套的是注释。

如果你真的需要，你必须使用其他模式语言。Relax NG 是唯一一种模式语言（我知道），它可以通过使用通用名称类 <anyName> 作为 <element> 轻松完成您想要的工作。但是，它不（我相信）处理唯一性 - 您必须依赖 xsd:ID 数据类型。

至于唯一性和 Schematron，[看看这个](https://stackoverflow.com/questions/12803048/about-using-xsunique-on-xsitype-in-a-sequence/12803969#12803969)，也在 SO。如果 XSD 1.1 是一个选项，那么您至少可以替换 Schematron 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:18:44.513

您是否可以编写 XSD 模式来做您想做的事，取决于您想要限制多少文档，以及您在命名相关元素方面是否有任何自由。

在通常情况下，属性是与特定的复杂类型相关联的（因此间接地与特定元素相关联），因为属性很少适用于所有元素。（例如：一个名为 containerColor 的属性出现在 HTML 的 head 和 meta 元素上时是否有意义？那是什么意思？）

但是 XSD 支持顶级属性的声明。以下 XSD 架构声明了名为`id`且不`containerColor`在任何命名空间中的属性。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"> 

  <xs:attribute name="containerColor">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:enumeration value="green"/>
        <xs:enumeration value="red"/>
        <xs:enumeration value="blue"/>
        <xs:enumeration value="yellow"/>
        <xs:enumeration value="grey"/>
        <xs:enumeration value="black"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>

  <xs:attribute name="id" type="xs:ID"/>

</xs:schema> 
```

它们是顶级属性，不绑定到特定元素。因此，原则上，您可以将此模式交给 XSD 验证器，请求它扫描文档，接受它没有 XSD 声明的所有内容，并验证它有声明的所有内容。（XSD 规范将此称为“宽松验证”。）它的唯一声明是针对您的两个属性，因此它将验证它们并传递其他所有内容。效果将是您声明的属性在所有元素上都是允许的，并且无论它们出现在哪里都会得到验证。

这里的主要障碍是 XSD 没有尝试规范甚至定义验证器与外部世界之间的接口，并且不能保证声称符合规范的给定验证器将允许您通过这样的请求调用它。（好的一面是，对于许多 XSD 验证器，从文档元素开始的宽松验证是默认操作模式，有时是您可以获得的唯一一种，因此这可能适用于您使用的任何验证器。）

另一种方法是为 XHTML 制作 XSD 模式文档的本地副本，并将您的属性添加到应该能够携带它们的所有元素中。XSD 1.1 有一些结构可以使这项任务更容易。

# r - 当我将文本文件导入 R 时，我得到一个特殊字符附加到第一列的第一个值

> ID：15259139
> 
> 赞同：14
> 
> 时间：2013-03-06T22:12:04.487
> 
> 标签：r

有时当我将文本文件导入 R 时，我会将字符“ï»¿”附加到第一列的第一个值。有人知道为什么吗？

例如具有以下值的文本文件：

```
2011_21,3130
2010_51,4153
2011_16,3168
2010_20,3945
2012_38,2099
2012_17,2436
2010_40,2090
2011_2 ,1462 
```

在 R 中产生以下结果：

第一次我读了文件：

```
ts_data <- read.csv("yr_wk sales.csv", header=FALSE)
head(ts_data) 
```

这是返回的数据：

```
 V1   V2
1 ï»¿2011_21 3130
2    2010_51 4153
3    2011_16 3168
4    2010_20 3945
5    2012_38 2099
6    2012_17 2436 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-01-18T09:37:42.663

You need to use the following:

```
ts_data <- read.csv("yr_wk sales.csv", fileEncoding="UTF-8-BOM", header=FALSE)
head(ts_data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-07T20:37:30.930

我在 Microsoft Word 上处理 txt 文件时遇到了这个问题。我使用记事本将MS Word保存的txt中的数据复制到一个新的txt文件中，问题就解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T00:19:46.497

正如我在评论中指出的那样，这是[Byte Order Mark](http://en.wikipedia.org/wiki/Byte_order_mark)。这里有关于处理它的讨论（ [http://cran.r-project.org/doc/manuals/R-data.html ）。](http://cran.r-project.org/doc/manuals/R-data.html)

如果您知道文件编码，则可以对其进行排序。假设它是 UTF-8：

```
ts_data <- read.table("yr_wk sales.csv", fileEncoding = "UTF-8") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-02T16:14:13.610

打开您的 Excel .csv 文件，转到文件、另存为...，然后将文件类型从“CSV UTF-8（逗号分隔）（*.csv）”更改为“CSV（逗号分隔）（* .csv）”文件类型。放下麦克风 - 轻松固定。

# javascript - 在给定时间内在谷歌地图上动画半径增长/缩小

> ID：15259140
> 
> 赞同：4
> 
> 时间：2013-03-06T22:12:06.237
> 
> 标签：javascript, google-maps, animation, geometry

我正在尝试为 Google Maps API 上的圆半径的增长/收缩设置动画。现在我所拥有的是 JS 中的一个方法，它需要给定的时间，最终半径并计算半径的增量，它计算时间速率（或等待循环的下一次迭代的毫秒数） . 问题是它的工作时间更长（比如 3 秒或更长时间），而在更小的时间里，它花费的时间比它应该的要多（几乎所有低于或等于 1 秒的时间，它都需要 2 秒）。方法如下>

```
var animateRadius = function(change){
        var radiusDelta = Math.abs(change.FinalRadius-Circle.getRadius());
        var radiusChangeRate = 1;
        var timeRate = (radiusChangeRate*change.FinalTime)/radiusDelta;
        if(timeRate <= 1){
            /*since the setInterval method only works with miliseconds
              if the timespan is less than one milisecond, the radius change 
              rate has to be bigger in order to make it on time, and since this
              only happens in smaller times, I think the error is around here..*/ 
            timeRate = 1;
            radiusChangeRate = (timeRate*radiusDelta)/change.FinalTime; 
                        }
        if(change.FinalRadius > Circle.getRadius()){
            //This just tells if the circle is growing or shrinking
            radiusChangeRate = radiusChangeRate*-1; 
        }

        var interval = window.setInterval(function(){
            if(visionRadiusCircle.getRadius() == change.FinalRadius){
                window.clearInterval(interval);
                interval = 0;
            }
            Circle.setRadius(Circle.getRadius() - radiusChangeRate);

        }, timeRate);
    } 
```

我不知道为什么这不起作用。有什么想法吗？欢迎任何想法，即使它是不同的算法（我什至不确定是否有更好的方法来做到这一点）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:10:24.900

这是我所做的。您可以通过调整 setTimeout 函数中给出的时间间隔来调整动画。[http://jsbin.com/oritec/2/edit](http://jsbin.com/oritec/2/edit)

```
 function getCircle() {
    var circle = {
    path: google.maps.SymbolPath.CIRCLE,
    fillColor: 'red',
    fillOpacity: 0.6,
    scale: 2,
    strokeColor: 'red',
    strokeWeight: 1,
    strokeOpacity: 0.6
    };
    return circle;
      }
      function init() {
    var mapCenter = new google.maps.LatLng(41.7833, 5.2167);

    var map = new google.maps.Map(document.getElementById('map'), {
      'zoom': 2,
      'center': mapCenter,
       draggable: false,
       disableDefaultUI: true,
      'mapTypeId': google.maps.MapTypeId.ROADMAP
    });
    var rad = 0;
    var sop = 1;
    var sw = 1;
    var fillop = 1;     
    var marker = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(18.7000, 79.1833),
      icon: getCircle(),
      draggable: false
    });

   for(var i=0;i<10;i++)
     {  
       setTimeout(function(){                   
                    animate();
                    rad += 50000;
                    sop -= 0.1;
                    fillop -= 0.1;
                    sw -= 0.1;
                },i* 50);
     }  

  function animate(){
         var circle2 = new google.maps.Circle({
      map: map,
      radius: rad, 
      center: new google.maps.LatLng(18.7000, 79.1833),
      strokeColor: "#FF0000",
      fillColor: "#FF0000",
      fillOpacity: fillop,
      strokeWeight: sw,
      strokeOpacity: sop
    });
     setTimeout(function(){ 
       circle2.setMap(null); },100);
}   
      } 
      google.maps.event.addDomListener(window, 'load', init); 
```

# ios - 数组值中的 Objective-C (iOS) 变量替换

> ID：15259142
> 
> 赞同：0
> 
> 时间：2013-03-06T22:12:08.303
> 
> 标签：ios, objective-c, nsarray

如何编写`NSArray`值以利用类似于此的变量`NSString`：

```
Levelname=[NSString stringWithFormat:@"Background1Level%d.png",LevelNO];
    [backgroundimagview setImage:[UIImage imageNamed:Levelname]]; 
```

这是我需要转换以使用 LevelNO 变量的代码块：

```
 [character setImage:[UIImage imageNamed:@"character1_09.png"]];
        character.animationImages=[NSArray arrayWithObjects:
                              [UIImage imageNamed:@"character1_01.png"],
                              [UIImage imageNamed:@"character1_02.png"],
                              [UIImage imageNamed:@"character1_03.png"],
                              [UIImage imageNamed:@"character1_04.png"],nil ]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:18:25.063

用整数循环遍历它们，而不是“LevelNO”使用该整数。像这样的东西：

```
for(int i = 0; i < {number of levels here}, i++)
{
  Levelname=[NSString stringWithFormat:@"Background1Level%d.png",i];
  [myArray addObject:[UIImage imageWithName:Levelname];
} 
```

确保保留一个数组并替换 myArray

# pandas - qtconsole 不将熊猫数据帧呈现为 html notebook_repr_html 选项

> ID：15259144
> 
> 赞同：11
> 
> 时间：2013-03-06T22:12:10.010
> 
> 标签：pandas, ipython, qtconsole

我最近升级了我的熊猫版本。我现在安装了最新的稳定版本：

```
pd.__version__
Out[5]: '0.10.1' 
```

在此升级之前，这是数据帧在 qtconsole shell 中的显示方式（这不是我的屏幕截图，只是我在网上找到的一个）。

![在 qtconsole 中将 pandas 数据帧呈现为 html 表](../Images/5eee6b06e9d93a03614697068da6435b.png)

最新版本的 pandas 还使用不同的方法来设置显示选项。

pandas不是 using `pd.set_printoptions`，而是希望您使用如下`set_option`配置：

```
pd.set_option('display.notebook_repr_html', True) 
```

升级我的 pandas 版本后，qtconsole 不再将数据帧呈现为 html 表。

一个例子：

```
import numpy as np
import pandas as pd

pd.set_option('display.notebook_repr_html', True)
pd.set_option('display.expand_frame_repr', True)
pd.set_option('display.precision', 3)
pd.set_option('display.line_width', 100)
pd.set_option('display.max_rows', 50)
pd.set_option('display.max_columns', 10)
pd.set_option('display.max_colwidth', 15) 
```

当我创建一个数据框...

```
f = lambda x: x*np.random.rand()
data = {"a": pd.Series(np.arange(10) ** 2 ),
        "b": pd.Series(map(f, np.ones(10))) }
df = pd.DataFrame(data)
df 
```

这是我在 qtconsole shell 中看到的：

```
Out[4]: 
    a     b
0   0  0.15
1   1  0.74
2   4  0.81
3   9  0.94
4  16  0.40
5  25  0.03
6  36  0.40
7  49  0.43
8  64  0.56
9  81  0.14 
```

您可以检查当前显示配置的设置方式：

```
opts = ["max_columns", 
        "max_rows", 
        "line_width", 
        "max_colwidth", 
        "notebook_repr_html", 
        "pprint_nest_depth", 
        "expand_frame_repr" ]

for opt in opts:
    print opt, pd.get_option(opt)

Out[5]
max_columns 10
max_rows 50
line_width 100
max_colwidth 15
notebook_repr_html True
pprint_nest_depth 3
expand_frame_repr True 
```

为了在 qtconsole 中呈现美化的 html 表，我缺少什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T01:42:26.847

据我所知，该`notebook_repr_html`选项仅适用于实际的 IPython Notebook 而不是 QTConsole。

在 QTConsole 中，您可以执行以下操作：

```
from IPython.display import HTML
import numpy as np
import pandas

df = pandas.DataFrame(np.random.normal(size=(75,5)))
HTML(df.to_html()) 
```

您可能会遇到的一个问题是 HTML 对于 QTConsole 的缓冲区来说是否太长。在这种情况下，根据我的经验，什么都不会出现。

# c# - 在 Visual Studio 中使用 SQL Server 存储过程

> ID：15259151
> 
> 赞同：1
> 
> 时间：2013-03-06T22:12:36.083
> 
> 标签：c#, sql, visual-studio-2010, sql-server-2005, stored-procedures

**我的经验和我正在使用的东西**

所以我刚开始使用 ASP.NET 中的一个非常基本的 Web 应用程序，以便更熟悉 SQL Server Management Studios 和 Visual Studios 2010。通常，我使用 MySQL、PHP 和 Sublime Text Editor 2。我是对 C# 和在 Visual Studios 中实现数据库不是很有经验。所以我正在尝试使用 SQL Server Management Studios 中的存储过程并在 Visual Studios 2010 中实现它。

**问题**

所以这是我的问题：我正在尝试创建一个链接到 SQL Server 的基本网页，并能够添加、删除、搜索和显示数据库中的所有记录。现在我已经根据我认为正确的添加/删除代码编写了自己的代码，当我单击按钮时没有任何反应。所以我相信你可以看到我的挫败感来自哪里。我不确定问题出在我的 C# 编码还是我的 SQL 编码中。

我想专注于让我的添加/删除按钮工作，然后找出显示所有文件的逻辑。我希望能够单击一个按钮，然后让它显示所有文件，而不仅仅是显示一个网格。我的数据库称为 FirstApp。

**这是我的 web.config 文件中的内容：**

```
<add name="FirstApp" connectionString="Data Source=PCNAME\SQLEXPRESS;Initial Catalog=FirstApp;Integrated Security=True"
  providerName="System.Data.SqlClient" /> 
```

**现在这是我的 Default.aspx.cs 文件中的内容：**

****现在正确的代码！****

```
 namespace FirstApp
  {
  public partial class _Default : System.Web.UI.Page
  {
  public string CommandArgument { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    private void MessageBox(string msg)
    {
        Label lbl = new Label();
        lbl.Text = "<script language='javascript'>" + Environment.NewLine +  "window.alert('" + msg + "')</script>";
        Page.Controls.Add(lbl);
    }

    //Add a new company to the database
    protected void add_Click(object sender, EventArgs e)
    {
        SqlDataReader rdr = null;
        string connectionString = null;
        SqlConnection cnn;
        connectionString = "Data Source=ITXDK29M91\\SQLEXPRESS;Initial Catalog=FirstApp;Integrated Security=True";
        cnn = new SqlConnection(connectionString);
        try
        {
            cnn.Open();
            SqlCommand cmd = new SqlCommand("dbo.Add_Company", cnn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@companyname", companyname.Text);
            cmd.Parameters.AddWithValue("@companyphone", companyphone.Text);
            cmd.Parameters.AddWithValue("@companyid", companyid.Text);
            cmd.Parameters.AddWithValue("@companytype", companytype.Text);
            rdr = cmd.ExecuteReader();
         }
        finally
        {

            //Close the connections 
            if (cnn != null)
            {
                cnn.Close();
            }
            if (rdr != null)
            {
                rdr.Close();
            }
        }
     }

     //Delete a company from the database
     protected void delete_Click(object sender, EventArgs e)
     {
         SqlDataReader rdr = null;
        SqlConnection cnn;
        string connectionString = null;
        connectionString = "Data Source=ITXDK29M91\\SQLEXPRESS;Initial Catalog=FirstApp;Integrated Security=True";
        cnn = new SqlConnection(connectionString);
        try
        {
            cnn.Open();
            SqlCommand cmd = new SqlCommand("dbo.deleteCo", cnn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@ID", SqlDbType.Int);
            rdr = cmd.ExecuteReader();

        }

        finally
        {

            //Close the connections 
            if (cnn != null)
            {
                cnn.Close();
            }
            if (rdr != null)
            {
                rdr.Close();
            }
        }
    }

    protected void Search_Click(object sender, EventArgs e)
    {

    }

    protected void Getall_Click(object sender, EventArgs e)
    {

    }

  }
  } 
```

**这是我在 Default.aspx 的源代码中的内容**

```
 <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">      <h2>Ready for an Adventure? Let&#39;s get started! 
     </h2> <hr />This is where you can enter information about your company. 
 <br />
 <form method="post" action="">
Company Name:<br /> 
<asp:TextBox ID="companyname" runat="server"></asp:TextBox>
<br />
Company Phone Number:<br />
<asp:TextBox ID="companyphone" runat="server"></asp:TextBox>
<br />
Company Tax ID Number:
<br />
<asp:TextBox ID="companyid" runat="server"></asp:TextBox>
<br />
Type of business: <br />
     <asp:TextBox ID="companytype" runat="server"></asp:TextBox>
<br />
 <asp:Button ID="add" runat="server" BackColor="DeepSkyBlue" 
BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" 
CssClass="submitButton" Font-Names="Palatino Linotype" ForeColor="White" 
onclick="add_Click" Text="Submit" Width="128px" />
</form> <hr /> 
Want to delete your company information?<br />
Enter in the Company ID Number:&nbsp;
<br />
 <asp:TextBox ID="PrimaryKey" runat="server" Width="120px"></asp:TextBox>
 <br />
 <asp:Button ID="delete" runat="server" BackColor="DeepSkyBlue" 
BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" 
CssClass="submitButton" Font-Names="Palatino Linotype" ForeColor="White" 
onclick="delete_Click" Text="Delete Info" Width="119px" />
<br />
<hr /> 
Looking for similar companies?
<br />
(Ex: Retail, Designer, Restaurant, etc.) &nbsp;
<br />
Enter the type of company:
 <br />
 <asp:TextBox ID="scompanyid" runat="server" Width="120px"></asp:TextBox>
 <br />
 <asp:Button ID="Search" runat="server" BackColor="DeepSkyBlue" 
 BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" 
 CssClass="submitButton" Font-Names="Palatino Linotype" ForeColor="White" 
 onclick="Search_Click" Text="Start Searching!" Width="119px" />
 <br />
 <hr /> 
   Want to see all the companies that we work with? <br /> 
   Click the button below! 
 <br />
 <asp:Button ID="Getall" runat="server" BackColor="DeepSkyBlue" 
 BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" 
 CssClass="submitButton" Font-Names="Palatino Linotype" ForeColor="White" 
 onclick="Getall_Click" Text="Get all records!" Width="119px" />
 <br />
   <br />
   </asp:Content> 
```

***更新：我已经更新了代码以显示正确的代码。添加按钮有效，但我的删除按钮无效。我仍在试图弄清楚这一点。***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T22:16:58.913

您实际上并没有打开连接或执行 SQL 命令。通常，您执行简单命令的方式是：

```
using (var conn = new SqlConnection(connectionString))
{
    using (var comm = conn.CreateCommand())
    {
        conn.Open();
        comm.CommandText = "SOME SQL HERE";

        // command type, parameters, etc.

        //pick one of the following
        comm.ExecuteNonQuery();
        int value = (int)comm.ExecuteScalar();
        SqlDataReader reader = comm.ExecuteReader();

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T22:55:51.763

您需要实际执行该命令。有四种执行类型（取决于您期望从查询语句中获得的结果类型）

*   ExecuteReader - 返回的行和列（例如普通选择查询）
*   ExecuteNonquery - 没有预期的结果。（例如删除记录）
*   ExecuteScalar - 单个值（例如 Count、Max 等）
*   ExecuteXMLReader - 用于 XML 的东西

像这样的东西

```
cmd.ExecuteNonquery(); 
```

即使在担心执行命令之前，您总是需要一个打开的连接来执行命令，并且您需要将命令链接到它：

```
SqlConnection cn = new SqlConnection(connStr);
cn.Command = cmd;
cn.Open();
<your command/parameter code here>
cmd.ExecuteNonquery(); 
```

并且不要忘记以您找到它的方式放回东西：

```
cmd.Close();
cn.Close(); 
```

我还会提出其他建议——比如将电话号码设为 varchar，因为你不会将其作为数字进行算术——但这不是你现在真正的问题。

最良好的祝愿！

仅供参考：附带主题：每当您开始使用命令返回结果时，您的 SqlDataReader 都不需要“新”，因为使用 ExecuteReader 执行的命令会创建并返回一个 SqlDataReader 对象。这意味着你可以这样做

```
//This next line not needed
//dr = new SqlDataReader()   
SqlDataReader dr = cmd.ExecuteReader(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:28:19.683

看起来您没有执行 SQL 语句。尝试创建一个执行以下操作的方法，然后从删除按钮单击事件中调用该方法。

```
 public static void DeleteSomething()
    {
        using (var conn = new SqlConnection(connectionString))
        {
            using (SqlCommand cmd = new SqlCommand("usp_proc_delete", conn.CreateCommand()))
            {
                 conn.Open()
                 cmd.CommandType = CommandType.StoredProcedure;
                 cmd.Parameters.AddWithValue("@PrimaryKey", SqlDbType.Int);
                 cmd.ExecuteNonQuery();
            }
        }
    } 
```

# firefox - Selenium RC 卡在检查资源别名

> ID：15259152
> 
> 赞同：1
> 
> 时间：2013-03-06T22:12:40.067
> 
> 标签：firefox, selenium, debian, regression-testing, xvfb

我正在尝试使用 Selenium RC 在网站上运行回归测试。我使用 Selenium IDE 工具和与之相关的 3 个测试创建了一个测试套件。这些测试在 IDE 中成功运行，但是当我尝试使用 Selenium 服务器运行它们时，我总是卡在“检查资源别名”

我正在使用以下命令：

```
java -jar /home/adam/selenium/selenium-server-standalone-2.31.0.jar -htmlSuite *firefox /usr/lib/iceweasel/firefox-bin http://devwebsite.com /root/selenium/tests/suite.html /root/selenium/results.html -firefoxProfileTemplate /root/.mozilla/firefox/9r0afiwh.profile -log debug.log 
```

卡住的最后几行输出：

```
INFO: Launching a standalone server
13:51:10.594 INFO - Writing debug logs to debug.log
13:51:10.595 INFO - Java: Sun Microsystems Inc. 14.0-b16
13:51:10.596 INFO - OS: Linux 2.6.32-5-686 i386
13:51:10.603 INFO - v2.31.0, with Core v2.31.0\. Built from revision 1bd294d
13:51:10.711 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
13:51:10.712 INFO - Version Jetty/5.1.x
13:51:10.714 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
13:51:10.715 INFO - Started HttpContext[/selenium-server,/selenium-server]
13:51:10.715 INFO - Started HttpContext[/,/]
13:51:46.397 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@867e89
13:51:46.398 INFO - Started HttpContext[/wd,/wd]
13:51:46.408 INFO - Started SocketListener on 0.0.0.0:4444
13:51:46.408 INFO - Started org.openqa.jetty.jetty.Server@86f241
jar:file:/home/adam/selenium/selenium-server-standalone-2.31.0.jar!/customProfileDirCUSTFFCHROME
13:51:46.508 INFO - Preparing Firefox profile...
13:51:48.019 INFO - Launching Firefox...
13:51:48.739 INFO - Checking Resource aliases 
```

一切似乎都可以正常运行，直到它实际运行测试。研究表明人们在用 HTML 命名测试套件时使用“测试用例”而不是“测试套件”存在问题，我没有这样做。我还删除了测试套件文件中的 XML 行，看看它是否重要。我没有使用代理，因为这里的另一个用户遇到了这个错误的问题。

这一切都在无头 Debian 服务器上运行。有许多指南用于演示如何使用 Xvfb 进行设置。我确定我错过了一些简单的东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:58:46.963

我个人使用硒网络驱动程序。如果您需要启动脚本，这可能是 RC 客户端的替代方案。

# windows-phone-8 - 在 Windows Phone 8 中访问环境光传感器读数并显示背光级别

> ID：15259154
> 
> 赞同：1
> 
> 时间：2013-03-06T22:12:52.100
> 
> 标签：windows-phone-8, sensors

我正在尝试设计一个利用环境照明条件和屏幕亮度级别进行一些计算的应用程序。我需要制作这个应用程序的两个版本，一个用于 Windows Phone 8，一个用于 Windows 8，用于平板电脑和 PC。我搜索了高低，但我只能找到适用于 Windows 8 的 Light Sensor api。我无法找到任何 API 来访问 Windows Phone 8 设备上的环境光传感器，而且我没有看到任何可以让我确定的地方屏幕的亮度级别（适用于 PC 或手机）。有人知道如何访问 Windows Phone 8 中的环境光传感器 (als) 读数和显示屏（屏幕）的亮度级别吗？我还想访问 Windows 8 的显示器亮度级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:19:35.993

设备传感器值可从 Windows.Devices.Sensors 命名空间获得

更具体地说，环境光传感器的 LightSensor 类。

```
var lightSensor = Windows.Devices.Sensors.LightSensor; 
```

可以通过在 AudioVideoCaptureDevice 上设置属性 KnownCameraAudioVideoProperties.VideoTorchMode / VideoTorchPower 来访问背光

这里有一个代码示例[（stackoverflow）](https://stackoverflow.com/questions/13454422/wp8-reflection-api-issue-please-check/13473773#13473773)，它可能会做你正在寻找的东西

不要忘记将所需的功能添加到清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T13:53:56.340

现在可以使用 Windows Phone 8.1

有关更多信息，请查看：http: [//msdn.microsoft.com/en-us/library/ie/windows.devices.sensors.lightsensor](http://msdn.microsoft.com/en-us/library/ie/windows.devices.sensors.lightsensor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T18:48:35.957

对于其他寻找这个问题的答案的人。

在 Windows Phone 8（直到现在，意味着 GDR 3）中 - 没有用于访问环境光传感器的 API。指向的所有引用`Windows.Devices.Sensors.LightSensor`都与 Windows 8 相关，而不是 Windows Phone 8。

# ios - XMPPFramework 委托函数在模拟器中被调用，但不在手机上

> ID：15259163
> 
> 赞同：3
> 
> 时间：2013-03-06T22:13:56.157
> 
> 标签：ios, objective-c, xcode, ejabberd, xmppframework

我正在按照以下教程进行操作：http: [//mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)使用 ejabberd 服务器设置 iOS 应用程序。到目前为止，我几乎已经将代码复制到了一个新项目中。

我的问题是 XMPP 委托函数 AppDelegate.m 在手机上运行时没有被调用。在模拟器中一切正常，下面的两个函数被调用。

```
 - (void)xmppStreamDidConnect:(XMPPStream *)sender {
    NSLog(@"in WSAppDelegate - xmppStreamDidConnect");
    isOpen = YES;
    NSError *error = nil;
    [[self xmppStream] authenticateWithPassword:password error:&error];

}

- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender {
    NSLog(@"in WSAppDelegate - xmppStreamDidAuthenticate");

    [self goOnline];

} 
```

我可以在电话和模拟器上连接，因为此呼叫运行没有错误：

```
[xmppStream connect:&error] 
```

这是我的 AppDelegate.h 代码：

```
#import <UIKit/UIKit.h>
#import "XMPPRoster.h"
#import "XMPP.h"
#import "SMChatDelegate.h"
#import "SMMessageDelegate.h"

@class SMBuddyListViewController;

@interface WSAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    SMBuddyListViewController *viewController;

    XMPPStream *xmppStream;
    XMPPRoster *xmppRoster;

    NSString *password;

    BOOL isOpen;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet SMBuddyListViewController *viewController;

@property (nonatomic, readonly) XMPPStream *xmppStream;
@property (nonatomic, readonly) XMPPRoster *xmppRoster;

@property (nonatomic, assign) id  _chatDelegate;
@property (nonatomic, assign) id  _messageDelegate;

- (BOOL)connect;
- (void)disconnect;

@end 
```

和 AppDelegate.m：

```
#import "WSBuddyListViewController.h"

@interface WSAppDelegate()

- (void)setupStream;

- (void)goOnline;
- (void)goOffline;

@end

@implementation WSAppDelegate

@synthesize xmppStream;
@synthesize xmppRoster;
@synthesize window;
@synthesize viewController;
@synthesize _chatDelegate;
@synthesize _messageDelegate;

- (void)applicationWillResignActive:(UIApplication *)application {

    [self disconnect];

}

- (void)applicationDidBecomeActive:(UIApplication *)application {

    [self setupStream];
    BOOL connected = NO;
    connected = [self connect];
    NSLog(@"*** connected = %i", connected);

}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    return YES;
}

- (void)setupStream {
    NSLog(@"in WSAppDelegate - setupStream");

    xmppStream = [[XMPPStream alloc] init];
    [xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [xmppStream setHostName:@"localhost"];

}

- (void)goOnline {
    NSLog(@"in WSAppDelegate - goOnline");

    XMPPPresence *presence = [XMPPPresence presence];
    [[self xmppStream] sendElement:presence];
}

- (void)goOffline {
    XMPPPresence *presence = [XMPPPresence presenceWithType:@"unavailable"];
    [[self xmppStream] sendElement:presence];
}

- (BOOL)connect {
    NSLog(@"in WSAppDelegate - connect");

    [self setupStream];

    NSString *jabberID = [[NSUserDefaults standardUserDefaults] stringForKey:@"userID"];
    NSString *myPassword = [[NSUserDefaults standardUserDefaults] stringForKey:@"userPassword"];

    if (![xmppStream isDisconnected]) {
        NSLog(@"in WSAppDelegate - connect - if (![xmppStream isDisconnected]) ");

        return YES;
    }

    if (jabberID == nil || myPassword == nil) {
        NSLog(@"in WSAppDelegate - connect - if (jabberID == nil || myPassword == nil)");

        return NO;
    }

    [xmppStream setMyJID:[XMPPJID jidWithString:jabberID]];
    password = myPassword;

    NSError *error = nil;
    if (![xmppStream connect:&error])
    {
        NSLog(@"in WSAppDelegate - connect - if (![xmppStream connect:&error]))");

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                            message:[NSString stringWithFormat:@"Can't connect to server %@", [error localizedDescription]]
                                                           delegate:nil
                                                  cancelButtonTitle:@"Ok"
                                                  otherButtonTitles:nil];
        [alertView show];

        return NO;
    }

    return YES;
}

- (void)disconnect {

    [self goOffline];
    [xmppStream disconnect];
    [_chatDelegate didDisconnect];
}

#pragma mark -
#pragma mark XMPP delegates

- (void)xmppStreamDidConnect:(XMPPStream *)sender {
    NSLog(@"in WSAppDelegate - xmppStreamDidConnect");
    isOpen = YES;
    NSError *error = nil;
    [[self xmppStream] authenticateWithPassword:password error:&error];

}

- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender {
    NSLog(@"in WSAppDelegate - xmppStreamDidAuthenticate");

    [self goOnline];

}

- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq {

    return NO;

}

- (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message {
    NSLog(@"in WSAppDelegate - xmppStream:(XMPPStream *)sender didReceiveMessage");

    NSString *msg = [[message elementForName:@"body"] stringValue];
    NSString *from = [[message attributeForName:@"from"] stringValue];

    NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
    [m setObject:msg forKey:@"msg"];
    [m setObject:from forKey:@"sender"];

    [_messageDelegate newMessageReceived:m];

}

- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence {
    NSLog(@"in WSAppDelegate - xmppStream:(XMPPStream *)sender didReceivePresence:");

    NSString *presenceType = [presence type]; // online/offline
    NSString *myUsername = [[sender myJID] user];
    NSString *presenceFromUser = [[presence from] user];

    if (![presenceFromUser isEqualToString:myUsername]) {

        if ([presenceType isEqualToString:@"available"]) {

            [_chatDelegate newBuddyOnline:[NSString stringWithFormat:@"%@@%@", presenceFromUser, @"localhost"]];

        } else if ([presenceType isEqualToString:@"unavailable"]) {

            [_chatDelegate buddyWentOffline:[NSString stringWithFormat:@"%@@%@", presenceFromUser, @"localhost"]];

        }

    }

}

- (void)dealloc {

    [xmppStream removeDelegate:self];
    [xmppRoster removeDelegate:self];

    [xmppStream disconnect];
}
@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:02:16.617

如果您查看您的`setupStream`方法，您使用的名称是“localhost”。这让我相信服务器在您的开发机器上，并且设备正在尝试连接到自身（本地主机）。您必须将其替换为您的服务器名称。

这可能在模拟器中有效，因为客户端和服务器是一体的。

**更新**：

我刚刚通读了教程，它在描述它在真实设备上的工作方式方面做得并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T12:38:43.080

正如 Mike D 所说，您正在连接到您机器上的服务器（[xmppStream setHostName:@"localhost"];) 为了连接到“localhost”，您必须更改设备上的主机文件（/etc /hosts），但这是 Apple 禁止的，因为您的应用程序无法更改沙箱之外的内容。（除非设备已越狱）。过去遇到类似问题时，我在安卓手机上做过这些事情。检查这个讨论（[iPhone上是否存在hosts文件？如何更改它？](https://stackoverflow.com/questions/2028544/does-hosts-file-exist-on-the-iphone-how-to-change-it)）

# expert-system - 与剪辑中的 nil 相比

> ID：15259165
> 
> 赞同：0
> 
> 时间：2013-03-06T22:14:05.247
> 
> 标签：expert-system, clips

我如何与剪辑中的 nil 进行比较？
我试过了

```
(defrule update-time                                                        
    ?cur-time <- (current-time ?time)                                           
    (order (event-time ?new-time-o&:(neq ?new-time-o nil))) 
```

我也试过

```
(neq ?new-time-o "nil") 
```

它似乎都不起作用，我没有激活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T18:53:58.980

您没有提供足够的信息来回答您的问题。给定适当的数据，此规则将激活：

```
CLIPS> (deftemplate order (slot event-time))
CLIPS> 
(defrule update-time                                                        
   ?cur-time <- (current-time ?time)                                           
   (order (event-time ?new-time-o&:(neq ?new-time-o nil)))    
   =>)
CLIPS> (assert (order (event-time (time))))
<Fact-1>
CLIPS> (assert (current-time (time)))
<Fact-2>
CLIPS> (agenda)
0      update-time: f-2,f-1
For a total of 1 activation.
CLIPS> 
```

# javascript - 从 JavaScript 以编程方式“在 Adob e Reader 中打开”

> ID：15259166
> 
> 赞同：1
> 
> 时间：2013-03-06T22:14:07.773
> 
> 标签：javascript, cordova, pdf, mobile, safari

iOS Safari 浏览器有一个方便的选项，只要您在浏览器中打开 PDF 页面，就会出现该选项

如果您安装了 Adob​​e Reader，将出现一个按钮，上面写着：

> 在“Adobe Reader”中打开...

但是，如果您打开隐藏 HUD（地址栏等）的 PDF 文档，例如在电话间隙应用程序中，或者使用以下元数据快速而肮脏的“添加到主屏幕应用程序”：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

那么，显然，该按钮将不会出现。

我仍想在 Adob​​e Reader 中打开 PDF 文档。有谁知道以编程方式执行此操作的方法？

我想在 phonegap 应用程序中包含 jsPDF，并保存结果，这将是最简单的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:44:32.293

在 Vince Parsons（和其他人）的帮助下，我解决了这个问题。

使用 PhoneGap 插件，您可以创建/公开一个 JavaScript 调用，然后在 Objective-c 中进行处理。

这是您需要的两行（是的，只有两行！），以及随后的解释：

```
self.docInteractionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:myDocumentPath]];
[self.docInteractionController presentOpenInMenuFromRect:CGRectMake(0,100,1,1) inView:UIApplication.sharedApplication.keyWindow animated:YES]; 
```

* * *

## 解释

您的输入将是文件位置。在我的情况下，它在应用程序沙箱内，所以它看起来像：

```
/var/mobile/Applications/B16-HU83-GU1D-1D3NT1F13R/Documents/DocumentToExport.pdf 
```

如果您想使用外部 URL，您可以（通过调整），但出于我的目的，它是内部的。

因此，将我的文件位置作为输入（我们称之为输入变量`myDocumentPath`），您只需要声明一个文档控制器：

```
self.docInteractionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:myDocumentPath]]; 
```

这将创建一个`UIDocumentInteractionController`using`interactionControllerWithURL`方法，该方法需要一个`NSURL`变量。我们使用该方法创建该`NSURL`变量`fileURLWithPath`，并将其传递给我们的`myDocumentPath`.

下一行调用`presentOpenInMenuFromRect` 了一个矩形和一个视口：

```
[self.docInteractionController presentOpenInMenuFromRect:CGRectMake(0,0,1,1) inView:UIApplication.sharedApplication.keyWindow animated:YES]; 
```

矩形在位置 0,0 处创建，宽度和高度为 0,0 ( `GCRectMake(0,0,1,1)`)，视口取自 PhoneGap 应用程序：`UIApplication.sharedApplication.keyWindow`

只需要两行代码就可以解决这个问题，我感到既高兴又惊讶。诚然，没有办法只使用 JavaScript，但它仍然非常优雅，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:00:01.620

如果 PDF 是使用 URL 从服务器打开或从本地设备打开，您可以使用 PhoneGap InAppBrowser ( [http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser) ) 打开 PDF ，您可以使用 PDFViewer 插件：[https](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer) ://github.com/phonegap/phonegap-plugins/tree/master/iOS/PDFViewer 。

两种方式都将使用本机默认 PDF 阅读器打开 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T11:40:04.427

我真的在寻找一种现成的解决方案，并在某一时刻放弃了。GitHub 上有一些旧的存储库，一些文章建立在绿色标记答案的两行上——但没有什么能让我满意。

这就是为什么我分叉`cordova-plugin-file-opener2`来改变 iOS 的行为，这对我来说是完美的。为了也允许并行使用分叉插件，我创造性地将其重命名为`cordova-plugin-file-opener3`. 它提供与分叉插件版本 2.0.1 相同的功能，除了在 iOS 上显示“打开方式”-对话框。

对插件的更改是微不足道的。只是替换了一个方法调用并进行了一些重命名。不知道为什么很难找到一个可行的解决方案 - 但也许我没有找到正确的方法。

**您可以在此处找到存储库：**

```
https://github.com/napolitano/cordova-plugin-file-opener3 
```

随意使用它。

# javascript - 检查输入值是否为空或默认值

> ID：15259170
> 
> 赞同：7
> 
> 时间：2013-03-06T22:14:28.690
> 
> 标签：javascript, jquery

我正在寻找一种优雅的方法来检查输入值是否为空且不是默认值。

例如，假设我们输入了 value `Username`，这是一个默认值，一旦用户点击这个输入字段`Username`就会被删除，这样用户就可以输入他想要的内容。为了清楚起见，这是加载页面时的外观：

`<input type="text" class="defaultValue" value="Username" />`

现在默认情况下，这个字段永远不会为空，除非用户会做一些事情让它为空，所以只是为了确保我需要检查这两件事。我这样做的方式非常简单：

```
if($(".defaultValue").val().length == 0 || $(".defaultValue").val() == "Username")
   alert("Please enter your username"); 
```

所以这行得通，但看起来很难看。而且通常我需要处理巨大的表单，因此我的代码变得非常丑陋且难以管理，有什么办法可以改进吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T22:17:18.800

尝试：

```
if (this.value == '' || this.value == this.defaultValue) {
  // value is empty or is default value
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T22:18:44.270

尝试编写一个辅助函数来为您执行此检查。

```
var isEmptyOrDefault = function(field, default) {
    var value = $(field).val();
    return (value.length === 0 || value === default);
}; 
```

所以你可以使用它：

```
if (isEmptyOrDefault($('.defaultValue'), 'Username')) {
    alert("Please enter your username");
} 
```

# asp.net-web-api - 删除由于将 XML 正文粘贴到 Fiddler 中而 POST 的换行符

> ID：15259174
> 
> 赞同：0
> 
> 时间：2013-03-06T22:14:42.623
> 
> 标签：asp.net-web-api, fiddler

我在记事本中创建了一些 XML（认为任何额外的字符或格式都将被剥离 = 纯字符串），然后将其粘贴到 Fiddler 中。它看起来像这样：

```
<MyValue1>AB</MyValue1>
<MyValue2>BlahBlah</MyValue2> 
```

当我在我的 Web API 服务中检查原始消息时，我看到如下符号：

```
<MyValue1>AB</MyValue1>\r\n\t\t<MyValue2>BlahBlah</MyValue2>\r\n\t\t 
```

注意`\r\n\t\t`?

如果我回到 Fiddler 并将 XML 变成*单行字符串*，而不是格式化和缩进的 XML 文档，那么我看不到这些字符。

1.  如何使这些换行符不是要发布到我的服务的 XML 的一部分，而不必在 Fiddler 中创建单行 XML？

# ninject - 如何使用 Ninject 约定扩展将泛型类型与继承绑定

> ID：15259175
> 
> 赞同：4
> 
> 时间：2013-03-06T22:14:46.090
> 
> 标签：ninject, ioc-container, ninject-extensions, open-generics, ninject-conventions

如何使用[Ninject 约定](https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Components)`InitializerForXXX`将（非泛型实现）绑定到`IInitializer<XXX>`（泛型接口），以便请求解析名称以*InitializerFor*开头并以类似结尾的非泛型实现：`IInitializer<T>`*`typeof(T).Name`*

 *```
initializerFactory.CreateFor<Blue>();        //resolves InitializerOfBlue
initializerFactory.CreateFor<ShadeOfBlue>(); //resolves InitializerOfShadeOfBlue 
```

其中没有非抽象类直接实现`IInitializer<T>`，并且一些实现继承自其他实现：

*   `InitializerForShadeOfBlue`继承自`InitializerForBlue`
*   `InitializerForBlue`从抽象继承`Initializer<Blue>`
*   abstract`Initializer<T>`直接实现`IInitializer<T>`

我希望我可以将 a`.EndsWith(typeof(T).Name)`用于我可以使用的给定约定，因为在*ShadeOfxxx*静脉`IInitializer<T>`中实际上有数百个初始化程序。如果我必须映射所有这些，我最好找到一种在运行时通过反射解决的方法。

 *鉴于以下情况：

**更新：使用自定义绑定生成器进行绑定（请参阅下面的答案以了解实现）**

```
 void Bootstrap(IBindingRoot kernel)
    {
        kernel.Bind<IInitializerFactory>()
            .To<InitializerFactory>()
            .InSingletonScope();

        kernel.Bind(scanner =>
                    scanner.FromThisAssembly().SelectAllClasses()
                        .WhichAreNotGeneric()
                        .InheritedFrom(typeof(IComplexContent))
                        .BindAllInterfaces());

        kernel.Bind(scanner =>
                    scanner.FromThisAssembly().SelectAllClasses()
                        .WhichAreNotGeneric()
                        .InheritedFrom(typeof(IInitializer<>))
                        .BindWith<FirstTypeParameterNameMatchesEndOfBoundClassNameGenerator>());
    } 
```

**主要方法**

```
void Main(IEnumerable<string> values)
{
    // setup bindings
    var kernel = new StandardKernel();
    Bootstrap(kernel);

    IInitializerFactory initializerFactory = 
        kernel.Get<IInitializerFactory>();

    IInitializer<ShadeOfBlueComplexContent> initializer = 
        initializerFactory.CreateFor<ShadeOfBlueComplexContent>();

    initializer.Initialize(values);
} 
```

**初始化工厂**

```
interface IInitializerFactory
{
    IInitializer<T> CreateFor<T>() where T : class, IComplexContent, new();
}

class InitializerFactory : IInitializerFactory
{
    public IInitializer<T> CreateFor<T>() where T : class, IComplexContent, new()
    {
        return MagicallyGetInitializer<T>();
    }

    //behind the curtain, whirring noises are heard as 't' is resolved...
    private static IInitializer<T> MagicallyGetInitializer<T>() 
        where T : class, IComplexContent, new()
    {
        IInitializer<T> i = null;
        return i;
    }
} 
```

**初始化器**

```
interface IInitializer<out T> where T : IComplexContent
{
    T Initialize(IEnumerable<string> values);
}

abstract class Initializer<T> : IInitializer<T> where T : IComplexContent
{
    public abstract T Initialize(IEnumerable<string> values);
}

class InitializerOfBlue : Initializer<Blue>
{
    private readonly Blue _content;

    public InitializerOfBlue(Blue content) {_content = content;}

    public override Blue Initialize(IEnumerable<string> values)
    {
        _content.BlueSpecificProperty = values.ElementAt(0);
        //... populate other blue-specific properties like this
        return _content;
    }
}

class InitializerOfShadeOfBlue : InitializerOfBlue
{
    public InitializerOfShadeOfBlue(ShadeOfBlue content) : base(content){}
} 
```

**内容模型**

```
interface IComplexContent
{
    string OneBasicProperty { get; set; }
    // other properties are specific to implementation
    string UniqueOperation();
}

abstract class BaseComplexContent : IComplexContent
{
    public string OneBasicProperty { get; set; }
    public abstract string UniqueOperation();
}

class Blue : BaseComplexContent
{
    // initializer sets this
    public string PropertyForAllKindsOfBlue { get; set; }

    // initializer doesn't interact with this
    public override string UniqueOperation() {return "I'm plain.";}
}

class ShadeOfBlue : Blue
{
    // initializer doesn't interact with this
    public override string UniqueOperation() {return "I'm fabulous!";}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T23:51:52.643

您过度指定班级选择

```
 kernel.Bind(scanner =>
                scanner.FromThisAssembly().SelectAllClasses()
                    .WhichAreNotGeneric()
                    .InheritedFrom(typeof (IInitializer<>)) 
```

这已经足够了。您需要做的是添加一个自定义绑定生成器。选择`IInitializer<Blue>`for`InitializerForBlue`和`IInitializer<ShadeOfBlue>`for`InitializerForShadeOfBlue`

[https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind](https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:14:19.517

**BEGIN SOLUTION CANDIDATE - 自定义绑定生成器：**

**自定义绑定生成器**

感谢@RemoGloor 和@RubenBartelink 的建议。不过我很难过 - 问题是我最终将 to 绑定`IInitializer<Blue>`到`InitializerOfShadeOfBlue`. 我需要能够以某种方式将绑定候选中的泛型类型参数从更改为，因为`Blue`这是运行时从工厂方法请求的内容。`ShadeOfBlue``IInitializer<Blue>``IInitializer<ShadeOfBlue>`

有没有办法修改绑定候选的泛型类型参数列表？还是我在大声疾呼错误的实施？感谢对我的 OP 或此答案的任何编辑建议。

```
/// <summary>Creates bindings on open generic types where bound implementations'
/// names end  with the name of the generic type argument</summary>
public class FirstTypeParameterNameMatchesEndOfBoundClassNameGenerator : IBindingGenerator
{
    public IEnumerable<IBindingWhenInNamedWithOrOnSyntax<object>> CreateBindings(Type type, IBindingRoot bindingRoot)
    {
        if (type == null) throw new ArgumentNullException("type");
        if (bindingRoot == null) throw new ArgumentNullException("bindingRoot");

        // only consider concrete, non-abstract classes
        if (type.IsInterface || type.IsAbstract) yield break;

        var bindingType = GetBindingType(type);

        if (bindingType != null)
            yield return bindingRoot.Bind(bindingType).To(type);
        // ARGH! bindingType == IInitializer`1[[Blue]] but I want
        // IInitializer`1[[ShadeOfBlue]] for type == ShadeOfBlue

    }

    private static Type GetBindingType(Type type)
    {
        Type goodMatch = null;

        foreach (var candidate in type.GetInterfaces())
        {
            // skip non-generic interfaces
            if (!candidate.IsGenericType) continue;

            // assumption: using argument in first position
            var firstArg = candidate.GetGenericArguments().First();
            if (!type.Name.EndsWith(firstArg.Name)) continue;

            // IInitializer<XXX> matches InitializerOfXXX
            goodMatch = candidate;
            break;
        }
        if (goodMatch == null)
        {
            // if no match on interfaces, walk through the ancestor types
            foreach (var candidate in type.GetAllAncestors())
            {
                goodMatch = GetBindingType(candidate);
                if (goodMatch != null) break;
            }
        }
        return goodMatch;
    } 
```

**类型扩展助手**

```
public static class TypeExtensions
{
    // returns all ancestor types starting with the parent
    public static IEnumerable<Type> GetAllAncestors(this Type type)
    {
        for (var current = type.BaseType; current != null; current = current.BaseType)
            yield return current;
    }
} 
```

**END SOLUTION CANDIDATE - 自定义绑定生成器****

# delphi - Delphi 组件运行时创建

> ID：15259178
> 
> 赞同：0
> 
> 时间：2013-03-06T22:15:00.533
> 
> 标签：delphi, components

我在运行时创建了一个组件，但我遇到了一个问题，因为当我创建其中两个组件时，我会更改其中一个组件的属性值，但它似乎也会更改另一个组件。

如何在运行时创建组件，以便它们是单独的组件而不是彼此的实例？

好的，这就是我用来创建组件的代码。

```
Cell[CellCount]:= TBattery.Create(nil);   
Cell[CellCount].Top := Random(500);    
Cell[CellCount].Left := Random(500);   
Cell[CellCount].Parent := Self;   
Cell[CellCount].ID := CellCount;   
CellCount := CellCount + 1; 
```

我正在使用 GDI 图形在多个 TBattery 实例之间画线。我遇到的问题是；如果我创建两个组件然后添加第三个，当我移动第三个时，线条会被绘制到那个组件上，而不是粘在第二个组件上。

我上传了我的源文件，我确信其中很多都没有意义，我的实现可能很糟糕，但感谢任何帮助！提前致谢

[http://pastebin.com/8WUkT1rw](http://pastebin.com/8WUkT1rw)

[http://pastebin.com/BpASvc7N](http://pastebin.com/BpASvc7N)

如果这有助于理解代码的用途，它们都是我学校项目的电路模拟器的一部分：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:06:41.713

一个简单的运行时组件创建是......

首先创建一个单元 第二个创建一个程序 ex

```
procedure Label_Comp(Location: TWinControl; Text: String; Label_Left,Label_Top,Numofcomp: Integer; NameOwn: string; Label_Autosize,Label_FontBold,Label_Trans: Boolean); 
```

在变量中添加

```
var
 MyLabel: TsLabel; 
```

然后是程序代码

```
procedure Label_Comp(Location: TWinControl; Text: String;            
  Label_Left,Label_Top,Numofcomp: Integer; NameOwn: string;                                                               
  Label_Autosize,Label_FontBold,Label_Trans: Boolean);
begin
 MyLabel := TLabel.Create(main);
 MyLabel.Name := 'Label' + NameOwn + IntToStr(Numofcomp);
 MyLabel.Parent := Location;
 MyLabel.Caption := Text;
 MyLabel.Left := Label_Left;
 MyLabel.Top := Label_Top;
 MyLabel.Font.Name := 'Tahoma';
 MyLabel.Font.Size := 8;
 MyLabel.Font.Color := clWindowText;
 MyLabel.AutoSize := Label_Autosize;
 if Label_FontBold = True then
   MyLabel.Font.Style := MyLabel.Font.Style + [fsBold];
 MyLabel.Transparent := Label_Trans;
 MyLabel.Visible := True;
end; 
```

并根据需要从您的程序中调用它

```
for i := 0 to 10 do 
 Label_Comp(main.panelBattery,'Exit',90,24,i,'',True,True,True); 
```

这里的问题是要记住 i 语句...

我希望我能帮助...

# java - 如何让我的 800*600 游戏适合所有屏幕分辨率？

> ID：15259179
> 
> 赞同：0
> 
> 时间：2013-03-06T22:15:01.030
> 
> 标签：java

我创建了一个 800*600 的游戏。我怎样才能使它适合所有电脑屏幕？这通常会怎么做？其他网站也说过根据屏幕分辨率将所有内容设置为一定的比例。但是，如果游戏中的每个图像的大小与屏幕分辨率相比都发生了变化，则意味着图像不会出现在正确的位置并导致其他问题。是否可以“拉伸”我的 800*600 游戏，使其适合任何尺寸？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:22:03.163

您需要使游戏分辨率独立。这意味着您创建自己的“游戏单元”概念（如果您愿意，它可能与相对于 800x600 屏幕的像素完全相同），然后专门在这些游戏单元上运行。

每当您在屏幕上绘制某些东西时，您都会将坐标和大小从游戏单位转换为像素。您将需要具有可以双向转换的功能，因为您可能还希望将点击事件从屏幕空间转换到游戏空间。

开始游戏时，您需要决定屏幕分辨率和纵横比。如果纵横比不同（*例如*宽屏），您可以选择拉伸游戏区域或将其信箱化。通过将所有翻译代码移至较低级别并仅在您的游戏单元内运行，从长远来看，您可以为自己省去很多痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:21:35.480

是的，你可以把它拉长。在 800 x 600 的 JPanel 上制作游戏的主要组件，然后将该 JPanel 添加到您的 JFrame。然后玩家可以调整 JFrame 的大小，组件不会离开屏幕，它们会根据 JFrame 的新大小改变形状和大小。请记住，鼠标相对于 JFrame 的位置会发生一些变化，但是将鼠标位置除以 JFrame 的高度/宽度，然后乘以 JPanel 的高度/宽度，以获得相对于 JPanel 的位置。使用这种方法，您可以让用户最大化您的游戏，并且仍然让组件看起来正常。

# r - R中模拟掷骰子和硬币的结果

> ID：15259182
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:15:09.003
> 
> 标签：r, statistics, probability

该实验涉及掷一个公平的骰子并让 x 说，然后掷一个公平的硬币 x 次并记录反面的数量。我需要做这个实验 50 次并将结果记录在一个向量中，（然后我将用它来绘制一个直方图。）

到目前为止，这是我的代码：

```
 for (i in 1:100)
    {X <- sample(6,1,replace=TRUE,c(1,1,1,1,1,1)/6)
    Y <- sample(2,1,replace=TRUE,c(1,1)/2)}
    Youtcomes <- c(sum(Y))
    Youtcomes 
```

但我没有给我一个包含 100 个元素的向量，而是一直只得到一个数字。我哪里错了？

注意：我必须使用 for 循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T22:38:46.913

`R`使用向量化的事实。然后，您可以使用二项分布来复制抛硬币。

```
heads <- rbinom(size = sample(6,100, replace = TRUE), n=100, prob = 0.5)
sum(heads) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T22:40:24.770

也许我错过了一些东西，但是一个叫做`sample()`100 次掷骰子的电话有什么问题，然后把它插上`rbinom()`去掷硬币呢？我们将输出传递`sample()`给`size`参数

```
> set.seed(1)
> rbinom(100, size = sample(6, 100, replace = TRUE), prob = 0.5)
  [1] 1 1 1 6 1 2 2 2 3 1 2 1 2 1 1 0 3 1 1 3 6 1 2 0 2 1 1 1 2 2 2 1 0 1 4 3 3
 [38] 1 5 2 3 2 2 1 3 2 0 2 1 4 2 3 1 1 1 0 1 1 1 1 2 2 1 2 3 1 0 2 1 2 2 4 2 1
 [75] 1 5 3 2 3 5 1 2 3 1 4 0 3 1 2 1 1 0 1 5 2 3 0 2 2 3 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T22:27:24.100

# Discalimer：（非常低效的解决方案，请参阅 mnel/Gavin 的解决方案）

> 正如您可以阅读每个答案下面的许多许多..许多评论，而*这个答案*试图回答 OP 的具体问题（尽管他的要求可能效率低下），本着保持论坛礼仪的精神，有些人（正确地) 指出这个问题的品味很差，我的回答并不符合论坛的要求。我接受所有批评并仅出于明显的原因将答案留在这里（标记为答案，连续性）。我建议您查看 mnel/Gavin 的答案，以获得针对*此特定问题的矢量化解决方案*问题。如果你有兴趣查看 for-loop 的实现，请参考这篇文章的底部，但我建议你看一下它以了解 for-loop 的结构，但不要为此具体实现 for-loop问题。谢谢你。

* * *

除了@Joshua 已经提到的*主要*问题之外，您的代码充满了很多问题：

首先，每次在循环内重写 X 和 Y 的值，因此，在循环结束时，只有 Y 的最后一个值被求和。

其次，您的代码`Y`不正确。你说，你必须获得`x`投掷硬币的数量，但是，你使用`sample(2, 1, ...)`. `1`必须替换为与`X`骰子卷中的数字相同的数字。

试试这个代码：

```
Youtcomes <- sapply(1:100, function(x) {
    X <- sample(1:6, 1, replace=TRUE, rep(1,6)/6)
    Y <- sample(c("H", "T"), X, replace=TRUE, rep(1,2)/2)
    sum(Y == "T")
}) 
```

在这里，我们循环了 100 次，每次采样 1 到 6 之间的值并存储在 X 中。然后，我们采样`head`(H) 或`tail`(T)`X`次并存储在 Y 中。

现在，`sum(Y == "T")`给出 x (1 <= x <= 100) 的当前值的总和。因此，最后`Youtcomes`将是您的一组模拟`Y == Tail`值。

然后，你可以做一个`hist(Youtcomes)`.

**编辑：**如果它是一个需要的for循环解决方案，

```
# always assign the variable you'll index inside for-loop
# else the object will keep growing every time and a copy of 
# entire object is made for every i, which makes it extremely 
# slow/inefficient.
Youtcomes <- rep(0, 100)
for (i in 1:100) {
    X <- sample(1:6, 1, replace=TRUE, rep(1,6)/6)
    Y <- sample(c("H", "T"), X, replace=TRUE, rep(1,2)/2)
    # assign output inside the loop with [i] indexing
    Youtcomes[i] <- sum(Y == "T")
    # since Youtcomes is assigned a 100 values of 0's before
    # the values will replace 0' at each i. Thus the object 
    # is not copied every time. This is faster/efficient.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T22:32:06.640

阿伦打败了我。但是许多方法中的另一种可能是（如果我正确理解您想要的结果..

```
X <- sample(6,100,replace=TRUE,c(1,1,1,1,1,1)/6)
Y <- lapply(X , function(x){ res <- sample( c( "H" , "T" ) , x , replace=TRUE , c(1,1)/2 ) ; table( res ) } ) 
```

你想对结果进行直方图....

```
res <- unlist(Y)
hist( res[names( res )=="T"] ) 
```

# php - 如何让我的 server.php 持续运行？

> ID：15259183
> 
> 赞同：3
> 
> 时间：2013-03-06T22:15:17.607
> 
> 标签：php, sockets, client

所以我有这个服务器代码，它适用于我的客户端。但它从客户端获取一条消息并反向发送一条消息。这是代码：SERVER.php

```
<?php 

    $host = "127.0.0.1"; 
    $port = 1234; 

    // don't timeout! 
    set_time_limit(0); 

    // create socket 
    $socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n"); 

    // bind socket to port 
    $result = socket_bind($socket, $host, $port) or die("Could not bind to socket\n"); 

    // start listening for connections 
    $result = socket_listen($socket, 3) or die("Could not set up socket listener\n"); 

    // accept incoming connections 
    // spawn another socket to handle communication 
    $spawn = socket_accept($socket) or die("Could not accept incoming connection\n"); 

    // read client input 
    $input = socket_read($spawn, 1024) or die("Could not read input\n"); 

    // clean up input string 
    $input = trim($input); 

    // reverse client input and send back 
    $output = strrev($input) . "\n"; 
    socket_write($spawn, $output, strlen ($output)) or die("Could not write output\n"); 

    // close sockets 
    socket_close($spawn); 
    socket_close($socket); 

?> 
```

如何编辑此代码以便它可以连续运行？客户端当然不必熬夜，它只会打开一个新的套接字，发送一条消息，从服务器取回并关闭套接字。下次我想发消息时，我会再次执行上一步。

现在，如果我发送一条消息并从服务器获得响应，它们都会关闭套接字。请帮我修改服务器端，使其不会关闭套接字并等待新连接。

我尝试添加一个while循环，但是一旦客户端关闭，服务器就会再次关闭，说它无法再从客户端读取。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:35:32.037

我想到了。你们中的大多数人都接近解决它，就像我使用 while() 循环一样。但是你不能只是把你的代码放在 while 中并期望它能够工作。正确的做法如下：

```
<?php 
$host = "127.0.0.1"; 
$port = 1234; 

// don't timeout! 
set_time_limit(0); 

// create socket 
$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n"); 

// bind socket to port 
$result = socket_bind($socket, $host, $port) or die("Could not bind to socket\n"); 
    while(true) {
    // start listening for connections 
    $result = socket_listen($socket, 3) or die("Could not set up socket listener\n"); 

    // accept incoming connections 
    // spawn another socket to handle communication 
    $spawn = socket_accept($socket) or die("Could not accept incoming connection\n"); 

    // read client input 
    $input = socket_read($spawn, 1024) or die("Could not read input\n"); 

    // clean up input string 
    $input = trim($input); 

    // reverse client input and send back 
    $output = strrev($input) . "\n"; 
    socket_write($spawn, $output, strlen ($output)) or die("Could not write output\n"); 
    }
// close sockets 
socket_close($spawn); 
socket_close($socket); 

?> 
```

如果您尝试将 while 放在任何其他位置，则会引入错误。 **谢谢大家的帮助 :D**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:26:56.223

接受后你需要分叉 - 见这里[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

接受需要在一个循环中。接受分叉后，处理该客户端的进程。

IE

```
while (TRUE)
{
    $spawn = socket_accept($socket) or die("Could not accept incoming connection\n"); 

    $pid = pcntl_fork();
    if ($pid == -1) {
         die('could not fork');
    } else if ($pid) {
         // we are the parent
         socket_close($spawn);
    } else {
         // we are the child
         // Use $spawn for communication as you see fit
         // exit();
    }    
} 
```

您将需要使用[信号处理程序](http://php.net/manual/en/function.pcntl-signal.php)来整理僵尸进程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T22:20:58.337

“蛮横”的方式是将您的代码插入无限循环中。

```
While(1){
     .
     .
 } 
```

否则，在收到您的消息后，您可以递归调用您的脚本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T22:41:39.387

```
 while( TRUE ) {

      // your code

  } 
```

# networking - TCL：如何根据日期戳将日志消息分组在一起

> ID：15259189
> 
> 赞同：0
> 
> 时间：2013-03-06T22:15:39.147
> 
> 标签：networking, logging, tcl, cisco-ios

我对 TCL 很陌生，需要一些帮助，根据来自 Cisco 路由器的日期戳将日志消息分组在一起。

更新：示例日志中的更改。发现当 DD 是个位数时有一个额外的空格。例如“1”

Samplelog : 显示日志

```
THREADID: Feb  1 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Feb  1 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Feb  1 HH:MM:SS.SSS  : %TYPE-OF-VAIRBLE: OFFLINE
THREADID: Feb  1 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Feb  3 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: UP
THREADID: Feb  3 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: UP
THREADID: Feb  4 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Feb  4 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Mar 15 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: UP
THREADID: Mar 15 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Mar 15 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Mar 16 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: UP
THREADID: Mar 16 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN
THREADID: Mar 16 HH:MM:SS.SSS : %TYPE-OF-VAIRBLE: DOWN 
```

期望的输出

```
Feb 01 || 3 down
Feb 04 || 2 down
Mar 15 || 2 down
Mar 16 || 2 down 
```

使用新逻辑更新了新代码，以尝试解决额外空间，尽管这没有按预期工作。

```
set y [read -nonewline [set f [open "tmp.txt" r]]];

array set counts [list];
foreach message [split $y "\n"] {
    # This gets the status, ie: DOWN/UP/OFFLINE.
    set status [lindex [split $message] end]; # will assign last field
    set mon [lindex [split $message] 1]; # number represents the filed number
    set day [lindex [split $message] 2];
    if {$day ==""} {
        set day [lindex [split $message] 3];
     } else {
        set day [lindex [split $message] 2]
    }
        # +number represents the counter
    if {[info exists counts($mon,$day,$status)]} {
            set counts($mon,$day,$status) [expr {$counts($mon,$day,$status)+1}] 
    } else {
            set counts($mon,$day,$status) 1
    }   
}

# sort based for down type events

puts "\n\n MMM DD || Cnt Status"
puts " ====================="

foreach count [lsort -increasing -unique [array names counts]] {

    foreach {mon day status} [split $count ","] { break; }
    if {$status =="down"} {
    puts " $mon $day || [set counts($count)] \t $status"
    }
}

if {[info exists f]} { close $f } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:44:38.977

只需使用关联数组—— [`array`](http://www.tcl.tk/man/tcl8.6/TclCmd/array.htm)（原文如此！）或[`dict`](http://www.tcl.tk/man/tcl8.6/TclCmd/dict.htm)（出现在 Tcl 8.5 中）。

在扫描之前，您的数组是空的，当您扫描日志文件并从中解析文本行时（取决于实际的文件格式，这可以使用[`split`](http://www.tcl.tk/man/tcl8.6/TclCmd/split.htm)or[`regexp`](http://www.tcl.tk/man/tcl8.6/TclCmd/regexp.htm)或[`string range`](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M40)等来完成），您检查是否有与您的分组匹配的条目标准已存在于数组中。如果没有，您将一些数据结构插入到您的数组中，并由一些初始值填充。如果存在匹配条目，则使用新数据更新与其关联的数据结构。

至于实际的数据结构......对于`array`s 我会使用两个元素[`list`](http://www.tcl.tk/man/tcl8.6/TclCmd/list.htm)s - 它们的元素分别保存“up”和“down”事件的数量。`dict`ionaries 可以嵌套，所以你可以使用这种可能性。

请注意，我不清楚您的日志文件的真正含义，因此您的关联数组的元素可能应该保留一些其他值，但总体思路仍然成立：这是关联数组的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:57:37.317

试试这个 - 您需要将“file.txt”更改为您的日志文件。

```
set y [read -nonewline [set f [open "file.txt" r]]];

array set counts [list];
foreach message [split $y "\n"] {
        # This gets the status, ie: DOWN/UP/OFFLINE.
        set status [lindex [split $message] end];
        set id [lindex [split $message] 3];
        if {[info exists counts($id,$status)]} {
                set counts($id,$status) [expr {$counts($id,$status)+1}]
        } else {
                set counts($id,$status) 1
        }
}

foreach count [lsort -increasing -unique [array names counts]] {
        foreach {name status} [split $count ","] { break; }
        puts "MMM $name || [set counts($count)] $status"
}

if {[info exists f]} { close $f } 
```

此输出（对于您提供的示例日志）给出：

```
MMM 01 || 3 DOWN
MMM 01 || 1 OFFLINE
MMM 03 || 2 UP
MMM 04 || 2 DOWN 
```

# javafx-2 - JavaFX 我可以重绘舞台吗？

> ID：15259195
> 
> 赞同：0
> 
> 时间：2013-03-06T22:16:23.727
> 
> 标签：javafx-2, javafx

![在此处输入图像描述](../Images/05ef27ee251e698585923013100f0364.png)在您通过键盘在程序中输入一些值后，阶段开始，但同时我想让阶段打开，用户可以再次输入一些值并重新启动阶段。

那可能吗？

我想做这样的事情：

```
 primaryStage.setScene(scene);
    primaryStage.show();

    javafx.application.Platform.runLater(new Runnable() {
        public void run() {
            if (TastaturEingabe.readBoolean("Möchten Sie ein neues Diagramm zeichnen?")) {

                // Input through keyboard
                readInputJahrgang(vintage, FIRST_PROMPT);
                readInputLager(vintage, FIRST_PROMPT);
                primaryStage.hide();
            } else {
                primaryStage.close();
            }
            return;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:04:19.300

这是用户和应用程序之间交互的错误设计。

```
javafx.application.Platform.runLater(new Runnable() {
    public void run() { 
```

将在 JFX 线程上运行，当您在命令行中与用户交谈时，UI 将被冻结。

您可以在单独的线程中通过命令行与用户交谈，该线程可以使用 runLater() 调用来通知 JFX，有关新的用户输入。

所以，你可以在 start 方法中创建一个单独的线程，然后把

```
readInputJahrgang(vintage, FIRST_PROMPT);
readInputLager(vintage, FIRST_PROMPT); 
```

调用它的可运行文件。

当用户输入重绘 UI 所需的新信息时，调用 runLater()。

在一般情况下，您不需要强制 JavaFX 重绘任何内容。它会自己做所有事情

# c++ - 提升 flat_map 容器

> ID：15259196
> 
> 赞同：2
> 
> 时间：2013-03-06T22:16:28.353
> 
> 标签：c++, boost, stl

在处理一些遗留代码时，我遇到了内存问题，主要是（我相信）由于 STL 映射的广泛使用（特别是“maps-of-maps”。）

我正在将 Boost flat_map 视为一种可能的解决方案。有没有人对 flat_maps 有任何第一手经验，特别是在速度和/或内存使用方面的改进方面？我当然意识到这可能非常依赖于存储的数据类型和存储方式，但仍然对人们的实际体验感到好奇。

谁能指出一些可靠的例子？

举个例子：这个map-of-a-map的代码有几种情况；也就是说，值是另一个映射的映射。

通过用一对向量替换“内部”映射，我将内存占用减少了 10:1（3G 到 300M）。当然，这会减慢搜索速度，但对于这种特殊情况，这似乎并不重要。它涉及大约一天的重构和仔细测试。

Boost 的 flat_map 听起来可能正是我所需要的，但除了 Boost 网站上的类描述之外，我似乎找不到太多关于它的信息。寻找一些第一手的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-29T18:11:53.423

Boost`flat_map`是一个基于二叉树的映射实现，除了二叉树存储为键值对的（排序的）向量。

你基本上可以找出关于性能的答案（相对于`std::map`你自己基于这个事实：

*   迭代地图或大部分地图应该是超快的，相对
*   查找通常应该相对较快
*   添加或删除值在理论上要慢得多，但在实践中 - 假设您的键和值类型很小并且映射元素的数量不是很高 - 可能在速度上相当（或者在小型映射上甚至更好 - 通常在插入时不需要分配)
*   等等

在您的情况下-地图的地图-您将失去“将事物展平”的一些好处，因为您将拥有一个带有指向内部地图的指针的外部地图（如果不是更多的间接级别） ; 但是平面地图至少可以帮助您减少这种情况。此外，假设您有两个级别的映射，您可以安排它以便*连续*存储所有内部映射（通过适当地构建内部映射或使用您自己的分配器实例化它们，这是一个更棘手的事情）；在这种情况下，您可以用映射索引替换指向映射的指针，从而减少它们占用的空间量并使编译器的工作更轻松。

您可能还想阅读 Boost 的[文档`flat_map`](http://www.boost.org/doc/libs/1_55_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx)；你也可以像我一样使用力量并阅读[源代码](http://www.boost.org/doc/libs/1_63_0/boost/container/flat_map.hpp)（以及[底层的源代码`flat_tree`](http://www.boost.org/doc/libs/1_63_0/boost/container/detail/flat_tree.hpp)）；我`flat_map`自己其实没有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T13:53:42.003

我知道这是一个老问题，但这可能对发现这个问题的人有用。

我发现这`flat_map`在搜索、查找和迭代大型地图方面有了很大的改进。地图在内存中使用连续数据的事实也使得插入速度比您预期的要快，因为数据局部性很大。如果您在地图中执行的插入操作多于查找操作，那么它可能不适合您。

话虽如此，由于数据局部性，将随机值重复插入已排序的向量比链表上的相同更快 - 尽管大 O 可能会告诉你。（在 VS2017 和 G++ 4.8 中测试）。

# ruby - 有人在 Ruby 1.9.3 下使用 FTPS/FTP::TLS 吗？

> ID：15259199
> 
> 赞同：0
> 
> 时间：2013-03-06T22:16:37.973
> 
> 标签：ruby, ssl, ftps

我已经尝试了几个 gem、examples 等，但无法正常工作，更有希望的 gem 是：[double-bag-ftps](https://github.com/bnix/double-bag-ftps)和[FTPFXP](https://github.com/square/ftpfxp)，我可以连接但我无法传输文件，无论是主动模式还是被动模式..

使用 ftpfxp 的示例代码：

```
@conn2 = Net::FTPFXPTLS.new
@conn2.passive = true
@conn2.debug_mode = true
@conn2.connect('192.168.0.2', 990)
@conn2.login('myuser2', 'mypass2')
@conn2.chdir('/')
@conn2.get("data.txt")
@conn2.close 
```

双袋示例代码：

```
ftps = DoubleBagFTPS.new
ftps.ssl_context = DoubleBagFTPS.create_ssl_context(:verify_mode => OpenSSL::SSL::VERIFY_NONE)
ftps.connect('192.168.0.2')
ftps.login('myuser2', 'mypass2')
ftps.chdir('/')
ftps.get("data.txt")
ftps.close 
```

双袋样本错误：

```
~/.rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/double-bag-ftps-0.1.0/lib/double_bag_ftps.rb:148:in `connect': Broken pipe - SSL_connect (Errno::EPIPE) 
```

ftpfxp 的示例错误：

```
~/.rbenv/versions/1.9.3-p385/lib/ruby/1.9.1/net/ftp.rb:206:in `initialize': No route to host - connect(2) (Errno::EHOSTUNREACH) 
```

任何不涉及外部命令的建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:03:33.733

我已经解决了这个问题，服务器在尝试使用显式 tls 以被动模式连接时返回了一个私有 IP 地址，所以我在 Double-Bag-FTPS 中添加了一行来检查返回的 IP 是否是私有回退到原来的公网IP地址...

[GitHub 拉取请求](https://github.com/bnix/double-bag-ftps/pull/3)

所以如果有人有同样的问题，也许这就是答案希望这可以帮助别人:)

# php - javascript不起作用

> ID：15259200
> 
> 赞同：0
> 
> 时间：2013-03-06T22:16:39.587
> 
> 标签：php, jquery, codeigniter, smarty

我在代码的开头有这个脚本：

```
 <!--rest--> 
        <script src="{base_url()}assets/js/jquery.js" type="text/javascript"></script>  
        <script src="{base_url()}assets/js/ajaxmenu.js" type="text/javascript"></script>  
        <script src="{base_url()}assets/js/cycle.js" type="text/javascript"></script>
        <script src="{base_url()}assets/js/slide.js" type="text/javascript"></script>
        <script src="{base_url()}assets/js/last.js" type="text/javascript"></script>
        <script src="{base_url()}assets/js/fancydropdown.js" type="text/javascript"></script>

    <!--end rest-->

    <!--fancybox-->

     <script src="{base_url()}assets/js/fancy/jquery-1.9.0.min.js" type="text/javascript"></script> 
     <script src="{base_url()}assets/js/fancy/jquery.fancybox-buttons.js" type="text/javascript"></script> 

    <!--end fancybox--> 
```

'rest' 中包含的所有脚本都可以正常工作，但 fancybox 不能正常工作。如果我评论“休息”脚本，fancybox 工作。我把这个脚本放在“结束休息”和fancybox 之间，警报不会出现。

.........................................

```
 <!--end rest-->
        <script>
                            $(document).ready(function () {
                            alert("Hello!");
                            });
        </script>
     <!--fancybox-->

     <script src="{base_url()}assets/js/fancy/jquery-1.9.0.min.js"                     type="text/javascript">
     </script> 
```

…………………………………………………………………………………………

脚本不能一起工作的可能问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:18:36.140

你包括 jquery 两次。注释掉`fancy`目录中的那个，我敢打赌fancybox会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:20:51.847

我相信你必须在加载 jquery 后移动你的 jquery 插件/依赖项。像这样：

```
 <script src="{base_url()}assets/js/jquery.js" type="text/javascript"></script>
 <!--end fancybox-->
 <script>
     $(document).ready(function () {
         alert("Hello!");
     });
 </script>
 <!--rest--> 
```

# sql - 从单列唯一的 Oracle 表中选择记录

> ID：15259201
> 
> 赞同：1
> 
> 时间：2013-03-06T22:16:43.443
> 
> 标签：sql, oracle, unique

我试图找出一种简单而优雅的方法来返回由某个列唯一标识的表中的每一行和每一列。

换句话说。想象一个表中有以下列和行...我想要所有唯一的重复 ID 行...

```
id | duplicateID |Name | col1 | col2 | col3

1  |  1          |A    |B     | C    | D
2  |  1          |A    |B     | C    | D
3  |  3          |A    |B     | C    | D
4  |  3          |A    |B     | C    | D
5  |  1          |A    |B     | C    | D
6  |  5          |A    |B     | C    | D
7  |  5          |A    |B     | C    | D
8  |  6          |A    |B     | C    | D 
```

我希望返回 ID 1、3、6 和 8 中的所有记录。因为这些都是来自重复记录列的唯一 ID。但我也想要这些行中的所有记录。有没有办法简单地做到这一点？我没有想象...到目前为止，我已经写了几个令人费解的查询，但都没有很好的结果。我必须说我不是 sql 专家。

**更新**

```
1  |  1          |A    |B     | C    | D
3  |  3          |A    |B     | C    | D
6  |  5          |A    |B     | C    | D
8  |  6          |A    |B     | C    | D 
```

将是我需要的样本结果。顺便说一句，这一切都适用于 Oracle 表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:18:49.067

您可以使用类似的分析

```
select id, duplicateid, name, col1, col2, col3
  from (select id, duplicateid, name, col1, col2, col3,
               row_number() over (partition by duplicateid order by id) rn
          from your_tab)
 where rn = 1; 
```

小提琴：[http ://sqlfiddle.com/#!4/c38b1/1](http://sqlfiddle.com/#!4/c38b1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:19:57.457

不确定我是否理解这个问题，但这里是：

```
 select * from T
         inner join
         (
         select distinct duplicateID from T
         ) as V
         on T.id = V.duplicateID 
```

# xamarin.android - OSX Lion 上的适用于 Android 的 Mono：错误 XA9010：无法确定许可证版本。(XA9010)

> ID：15259207
> 
> 赞同：1
> 
> 时间：2013-03-06T22:17:09.107
> 
> 标签：xamarin.android

从昨天将我的 Mono for Android 更新到 4.6.0-49 后，我开始收到此错误。这发生在 OSX Lion 上，有人有同样的问题吗？

我很确定我拥有正确的许可证，我什至尝试重新激活它，但仍然无法正常工作。

# ember.js - emberjs 获取自动控制器

> ID：15259208
> 
> 赞同：2
> 
> 时间：2013-03-06T22:17:15.127
> 
> 标签：ember.js

我正在尝试使用 qunit 和 sinon 测试我的应用程序。我想测试控制器的一些行为，包括它在转换时的设置。例如，`setupController`在给定路线中的“”中。

但是问题是控制器是自动创建的，我只知道你可以通过`controllerFor`路由中的 ' ' 调用来获取它。如何从外部获取给定页面的自动生成控制器，例如`App.xxxxx`

请注意，我尝试`transitionTo`将控制器作为第二个参数传递给“”，但这意味着“ `setupController`”永远不会被调用，因此我无法测试我想要的场景。如果有一种方法可以强制调用 setupController，即使您传递了第二个参数，这也可以完成这项工作

谢谢你的帮助

# android - Android 确定屏幕尺寸

> ID：15259210
> 
> 赞同：0
> 
> 时间：2013-03-06T22:17:26.220
> 
> 标签：android

我正在开发一个应该支持多个屏幕的应用程序。对于普通屏幕，我将布局设置在 viewflipper 中，这样我的图标就不会拥挤。但是我想在大屏幕上做的是将所有图标放在一个布局中，而不使用 viewflipper 来利用屏幕。

这是我的普通屏幕布局：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/lighterred"
android:layout_gravity="center"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/logo"
    android:layout_gravity="center"
    android:text="@string/app_name"
    android:textSize="30sp"
    android:padding="15dp"
    android:textStyle="bold"
    android:textColor="@color/white"
    android:contentDescription="@string/app_name" />

<ViewFlipper 
android:id="@+id/mainFlipper"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
android:background="@color/white"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:gravity="center_vertical|center"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvMainNote"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textStyle="bold"
    android:text="@string/slidetoleft" />

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button
    android:id="@+id/ibSymptoms"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/symptoms"
    android:textStyle="bold"
    android:textColor="@color/black"
    android:layout_margin="20dp"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/symptoms" />

<Button
    android:id="@+id/ibConditions"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/conditions"
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/conditions" /> 
```

```
<Button
    android:id="@+id/ibMedicalAssessment"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/medicalassessment"
    android:textStyle="bold"
    android:textColor="@color/black"
    android:layout_margin="20dp"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/med_assessments" />

<Button
    android:id="@+id/ibProfile"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/profile"
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/profile" />

</LinearLayout> <!-- 2nd row -->

</LinearLayout>

<LinearLayout
android:background="@color/white"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:gravity="center_vertical|center" >

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button
    android:id="@+id/ibTests"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/tests"
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/tests" />

<Button
    android:id="@+id/ibTreatment"
    android:layout_margin="20dp"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/treatment"
    android:textStyle="bold"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/treatment" />

</LinearLayout>

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button
    android:id="@+id/ibSpecialists"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/specialists"
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/specialists" />

<Button
    android:id="@+id/ibDisclaimer"
    android:layout_margin="20dp"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:contentDescription="@string/app_name"
    android:text="@string/about"
    android:textStyle="bold"
    android:textColor="@color/black"
    android:background="@drawable/custom_button"
    android:drawableTop="@drawable/disclaimer" />

</LinearLayout> 

</LinearLayout>

</ViewFlipper>
</LinearLayout> 
```

那么我怎么能在大屏幕上做到这一点呢？

谢谢和regrads。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:23:44.680

Preferably you would use the regular xml files and place them in the right folders (e.g. layout-xlarge) then you have a layout for smaller sizes and layouts for larger sizes.

Also programatically depending on which version of android you are outputting to you would use

```
getResources().getConfiguration() 
```

and using that find if the device screen size is

```
SCREENLAYOUT_SIZE_XLARGE 
```

for xlarge screens (> 7inches) or

```
SCREENLAYOUT_SIZE_LARGE 
```

for large screens (between 4 inches and 7 inches) the first boundry is not defined before HoneyComb (API 11+) while the second boundry has problems on certain devices.

EDIT: I agree with FoamyGuy fragments would be so much better, especially since you can control each fragments logic specifically (eg. create a layout for large screens and create a layout for fragment with small screens (if you want to use a view flipper) or just start a new fragment like a new activity as shown in the Fragment docs).

# xml - 删除 lisp 程序中的标签

> ID：15259211
> 
> 赞同：1
> 
> 时间：2013-03-06T22:17:30.890
> 
> 标签：xml, tags, lisp

我需要帮助编程一些东西。我正在使用 Common Lisp 进行编码，并且正在尝试从字符串列表中删除标签。我读入了一个 XML 格式的文件，我的目标是删除出现在`<`和之间`>`的任何文本，如果标签以 开头`?xml`，则需要删除整行。我知道[`remove`/`delete`](http://www.lispworks.com/documentation/lw50/CLHS/Body/f_rm_rm.htm) / 有可在命令行上使用的函数，但我正试图在我的实际 Lisp 代码中进行这种删除，但我不知道该怎么做。每次我尝试都会出错。

现在这是我读取文件的代码（它有效）：

```
;;;Program: Lisp Assignment 1
;;;Author: Mouse

(defun file-lines (file)
;;;returns a list of strings and the number of
;;;lines read.
    (with-open-file (i file)
    (loop for line = (read-line i nil nil)
          and line-count from 0
          while line
          collect line into lines
          finally (return (values lines line-count))))) 
```

我的想法是，在这行之后`while line`，我必须输入代码来检查标签，但我不知道该使用什么。每次我调用`remove`or`delete`方法时，都会出现错误。我不知道我是否没有正确地称呼他们或其他什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:32:56.587

我认为你的问题不是很清楚。为什么你问从字符串列表中删除标签，而你的示例代码从文件中读取行？假设您确实在询问字符串列表，标签是否可以分布在多个这些字符串上？此外，您询问`remove`并`delete`没有提及您真正尝试过什么以及它是如何失败的。如果您想直接更改文件的内容，那么您不能只是从流中删除内容并期望它起作用。

这是一种通过逐个字符读取流来删除标签的简单方法：

```
(defun remove-tags (string)
  (flet ((read-tag (instream)
           (loop for char = (read-char instream nil nil)
                 while (not (string= char #\>)))))
    (with-output-to-string (outstream)
      (with-input-from-string (instream string)
        (loop for char = (read-char instream nil nil)
              while char
              if (char= char #\<) do (read-tag instream)
              else do (write-char char outstream))))))

CL-USER> (remove-tags "<p><a href=\"foo\">bar</a> frob <emph>baz</emph> quux</p>")
"bar frob baz quux" 
```

如果您想读取和写入文件，只需用相应的形式替换`with-output-to-string`和。`with-input-from-string``with-open-file`

但这只是一个让您入门的示例。即使这只是一个学术练习，你也需要让它更加健壮。例如，它失败了：

```
CL-USER> (remove-tags "<p><a href=\"fo>o\">bar</a>")
"o\">bar" 
```

（如果我没记错的话，XML 字符串中允许使用未转义的右尖括号。）

此外，这既没有经过测试也没有以任何方式优化速度 - 处理字符*可能*太慢，并且它不处理`?xml`标签的删除。所有这些都留给读者作为练习。

出于*实际*目的，您可能真的应该只使用其中一个 XML 库，或者使用 regexen 并祈祷。解析和处理 XML 是一个问题，在实际使用中几乎所有语言的许多库中都已解决，并且有很多细节会出错（如果你真的只是想删除一些标签，也许不是这样，但*原则*)，无论如何，这都是一个相当无聊的练习。

# javascript - .length 的数组警报 0 不知道为什么

> ID：15259218
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:17:48.247
> 
> 标签：javascript, jquery

我对 JQuery 很陌生，我正在尝试创建一个事件，因此当单击表行时它会执行某些操作，但它会有一个`for`循环，但这不起作用所以我删除了循环并发出警报以查看数组中有多少项目，它会发出警报 0。我不确定为什么，在页面加载时，脚本会从我的数据库中生成标记并将它们加载到左侧的地图上（工作正常且符合预期）屏幕上制作了一张桌子，上面写着每个站点在哪条街上，当您单击表格行时，它应该居中并放大标记（我可以自己弄清楚那部分）但现在它告诉我那里数组中什么都没有，我不知道为什么。谢谢。

```
 <?php
require_once('config.inc.php');
require_once($rootdir . $dirsubfolder . 'navbar.php');
include($rootdir . $dirsubfolder . 'php/findmarkers.php');
?>
<script>

$(document).ready(function() {
var arrMarkers = [];
var zoom = 6;
var initialLocation;
var map;
var markersArray = new Array();

$("table#listOfStops").find('tr').each(function() {
  $(this).on('click', function() {

      alert(arrMarkers.length);

  });
});

$(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 230; // Calculate the top offset
    $('#gmaps').css('height', (h - offsetTop));
  }).resize();
  loadScript();
});
function initialize() {
  geocode = new google.maps.Geocoder();
 var mapOptions = {
  zoom: 10,
  center: new google.maps.LatLng(56.7626362, -111.379652),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDefaultUI: false,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  }
};

  map = new google.maps.Map(document.getElementById('gmaps'),
  mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    var latitude = event.latLng.lat();
    var longitude = event.latLng.lng();
    deleteOverlays();
    addMarker(event.latLng);
    updateTextFields(latitude, longitude);
  });
  <?php while($stmt -> fetch()) { ?>
  var long = "<?php echo $gLongitude ?>";
  var lati = "<?php echo $gLatitude; ?>";
  var title = "<?php echo $gTitle; ?>"
  setMarker(lati, long, title);
  <? } $stmt -> close(); $mysqli -> close();?>

}

function setMarker(lat,lon, markerTitle) {
  var latLonMarker = new google.maps.LatLng(lat,lon);
  marker = new google.maps.Marker({
    position: latLonMarker,
    map: map,
    icon: 'icon.png',
    title: markerTitle
  });
  google.maps.event.addListener(marker, 'dragend', function() {
    $('#inputLatitude').val(this.getPosition().lat());
    $('#inputLongitude').val(this.getPosition().lng());
  });
  arrMarkers.push(marker);
}

function loadScript() {
  var script = document.createElement('script');
  script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&' +
  'callback=initialize';
  document.body.appendChild(script);
}
</script>

<?php include($rootdir . $dirsubfolder . 'php/findmarkers.php'); ?>

<div style="padding-top: 5%; padding-bottom: 5%;">
<div class="container-fluid">
<div class="row-fluid">
  <div class="span3 container hero-unit">
  <h2 style="text-align: center;">Route <?php echo $gRouteNumber ?></h2>
  <h4 style="text-align: center;" class="alert-info">Begins <? echo $gArrivalTime; ?></h4>
  <br />

  <table id="listOfStops" class="table table-striped">
  <thead>
  <tr>
    <th>Stop #</th>
    <th>Street Name</th>
  </tr>
  </thead>
  <tbody>
  <?php
  $i = 0;
  while($stmt -> fetch()) {
    echo '<tr  id="' . $i . '">';
    echo '<td>' . $gStopNumber . '</td>';
    echo '<td>' . $gStreetName . '</td>';
    echo '</tr>';
  $i++;} $stmt -> close(); $mysqli -> close(); ?>  
  </tbody>
  </table>

  </div>

<div class="span9">
<div id="gmaps"></div>
</div>
</div>
</div>
</div>

<?php
require_once('footer.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:50:40.247

As I already stated in my comment, you are declaring `arrMarkers` as a local variable in your `document ready` function.

That means, it is `undefined` in the `setMarker` function.

Try making it a global variable and you should be good.

# windows - 使用 SetDroppedWidth 后 MFC ComboBox 下拉按钮丢失

> ID：15259219
> 
> 赞同：1
> 
> 时间：2013-03-06T22:17:49.793
> 
> 标签：windows, winapi, mfc, gdi

这是一个 Windows MFC 编程问题。我有一个派生的 CComboBox 实现自己的项目绘制和测量。我做了一点改进，下拉列表宽度可以根据列表内容进行调整。我在 OnDropDown 消息处理程序中使用 SetDroppedWidth 来做到这一点。插入字符串并单击组合框后，所选字符串内容占用了所有静态/编辑区域，并且缺少下拉按钮。我可以看到项目 ID 为 -1 的项目的宽度已更改/重置为 ItemDraw 方法中新放置的宽度。我不认为这是正确的行为。我希望新的下拉宽度仅对列表项生效，其项 ID 不小于 0。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:07:40.013

尝试使用这个。

在您的 OnDropDown 处理程序中调用[CComboBox::GetComboBoxInfo](http://msdn.microsoft.com/en-US/library/z6k2dt8t%28v=vs.80%29.aspx)。它将返回`COMBOBOXINFO`结构的指针。此结构中包含下拉列表框的 HWND `hwndList`。直接在这个 hwndList 上使用 MoveWindow() API，看看它是否有效

如果这不起作用，请尝试发布`CB_SETDROPPEDWIDTH`消息。如您所知，`SetDroppedWidth`它只是`CB_SETDROPPEDWIDTH`消息的包装器。它被实现为`SendMessage`调用。试试这个：

```
::PostMessage(m_myComboBox.GetSafeHwnd(), CB_SETDROPPEDWIDTH, nWidth, 0); 
```

# git - GitHub for Windows：如何取消设置 svn-remote.svn.url

> ID：15259227
> 
> 赞同：8
> 
> 时间：2013-03-06T22:18:31.900
> 
> 标签：git, svn, github, git-svn, github-for-windows

从我的本地仓库路径的 cmd 行，我执行`git svn clone`了命令，但使用了错误的 url。

然后我尝试`git svn clone`使用正确的 url 执行，但我不能，因为它告诉我`"svn-remote.svn.url already set"`

如何取消设置`svn-remote.svn.url`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T16:37:19.993

您遇到的错误并没有太大帮助。`svn-remote.svn.url`指您的 Git 配置的一部分，它存储在几个不同的文件中；此位位于`.git/config`存储库的根目录中。

有几个不同的选项可以解决这个问题：

1.  正如其他人建议的那样，只需删除整个 Git 存储库并重新开始。

2.  再次，正如 Chronial 建议的那样，删除 Git 配置中的那部分内容。有两种方法可以做到这一点：

    1.  使用`git config`命令：

        ```
        git config --remove-section svn-remote.svn 
        ```

    2.  自己编辑`.git/config`文件。如果您在文本编辑器中打开它，您会发现如下所示的部分，您需要将其删除：

        ```
        [svn-remote "svn"]
                url = http://duff.path/to/repo
                fetch = trunk:refs/remotes/svn/trunk
                branches = branches/*:refs/remotes/svn/*
                tags = tags/*:refs/remotes/svn/tags/* 
        ```

    由于您的 URL 是 duff，因此您不会有任何远程分支。如果你曾经成功地`git svn fetch`/ `git svn clone`，你需要担心保持你拥有的分支安全，或者明智地删除它们，但这不是问题。

    上述任何一个步骤都会让您仿佛从未运行过`git svn clone`，您可以重新开始。

3.  如果您的命令唯一有问题的`git svn clone`是 URL，您可以修复它。如上所述，您可以使用以下方法执行此操作`git config`：

    ```
    git config svn-remote.svn.url http://correct.path/to/repo 
    ```

    或通过`.git/config`手动编辑和更正路径。

    更正后，您可以运行`git svn fetch`以完成克隆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:24:53.463

我建议删除回购并重新创建它。如果你在那里有自己的分支，我建议克隆 repo 并处理克隆。这样你就摆脱了所有的 git-svn 数据。

如果你想尝试修复你的 repo，运行这个命令来取消设置 svn-remote 的东西：

```
git config --remove-section svn-remote 
```

# android - android 应用程序无法获取 GPS，直到手机重新启动

> ID：15259229
> 
> 赞同：2
> 
> 时间：2013-03-06T22:18:39.447
> 
> 标签：android, gps, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean, ota

我从用户那里收到多份报告，他们在重新启动手机之前无法在我的应用程序中获取 GPS 或定位服务，然后一切正常。

我从使用我的应用程序的一组用户中只收到了有限的 android 用户投诉样本，但它似乎与这个问题惊人地相似：

[https://code.google.com/p/android/issues/detail?id=39745](https://code.google.com/p/android/issues/detail?id=39745)

谷歌 OTA 更新上周向其他一些运营商推出。查看过去几个月的代码更改，我没有更改任何 GPS/定位内容，除非我必须使用新的谷歌地图，但我不知道我的特定用户投诉是否来自一个非常旧版本或从最新版本或任何版本升级。

它似乎与 Android 4.2 有关，但我也无法确认，除了用户重启手机的相似性，一切都神奇地自行解决。我不认为这对我的用户来说是一个有效的故障排除选项。

基本上想知道是否有其他人在代码中解决了这个问题，并将其放在这里以防其他开发人员可以与此相关

# java - 使用带有 URLConnection 的 Get 请求

> ID：15259235
> 
> 赞同：0
> 
> 时间：2013-03-06T22:18:52.130
> 
> 标签：java, url, networking, network-programming, ioexception

我目前正在编写程序以与我的网络中的设备进行通信，以下代码是我到目前为止所拥有的，它通过了身份验证并且可以从设备获取网页，但是当我运行时我无法让 GET 请求工作下面的代码，我得到错误：

```
 Exception in thread "main" java.io.FileNotFoundException: http://192.168.100.222:80
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) 
```

当我在网页上输入数据时，它相当于[http://l192.168.xxx.xxx/2?A=3&p=1&X=1234](http://l192.168.xxx.xxx/2?A=3&p=1&X=1234)，并且从 tcpflow 开始，它确实如此，我尝试使用[http](http://192.168.xxx.xxx/2?A=3&p=1&X=1234)`GET /2?A=4&p=1&X=1234 HTTP/1.1`创建一个新的 url 连接[://192.168.xxx.xxx/2?A=3&p=1&X=1234](http://192.168.xxx.xxx/2?A=3&p=1&X=1234)，它有效，但我有多个输入选项，我不想为每个选项创建一个新连接，我该如何做保持联系？或者我在代码中做错了什么？

提前致谢。

```
public class main {
public static void main(String[] argv) throws Exception {
    Authenticator.setDefault(new MyAuthenticator());
    URL url = new URL("http://192.168.xxx.xxx");
    URLConnection connection = url.openConnection();
    connection.setDoOutput(true);
    connection.setDoInput(true);
    OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());
    out.write("Get /2?A=4&p=1&X=1234 HTTP1.1");
    out.close();        
    BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String decodedString;
    while ((decodedString = in.readLine()) != null) {
            System.out.println(decodedString);
    }
    in.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:02:52.057

> 我不想为他们每个人创建一个新的连接

别担心。`HttpURLConnection`在引擎盖下进行连接池。只需使用您的实际 URL，不要试图超越 Java。

# php - 登录后重定向

> ID：15259238
> 
> 赞同：-3
> 
> 时间：2013-03-06T22:19:04.893
> 
> 标签：php, redirect, request

这是我当前使用的代码，在本地主机上这个工作很好并且重定向，但是当我尝试在像altervista.org这样的免费网站上上传时，这没有更多的重定向..为什么？

```
<?php
           $p = $_GET['azione'];
           // login.php?azione=login
           if($p == "login"){

            if(!isset($_POST['invia'])){ ?>
               <div class="loginform">
                <h3>Login!</h3>
                <form class="form-horizontal" method="post" action="#" id="formlogin">
                   <div class="control-group">
                    <label class="control-label" for="username"></label>
                    <div class="controls">
                       <input type="text" placeholder="Username" name="username" id="username" /><br>
                    </div>
                   </div>
                   <div class="control-group">
                    <div class="controls">
                       <input type="password" placeholder="Password" name="password" id="password" /><br>
                    </div>
                   </div>
                   <div class="control-group">
                    <div class="controls">
                       <button type="submit" class="btn btn-large" name="invia" id="login" value="Accedi">
                        Sign in!
                       </button>
                       <br><br>
                       <a href='register.php'>Sign Up Now!</a> <br><br>
                       <a href='forgotpass.php'>Forgot Your Password?</a>
                    </div>
                   </div>  
                </form>
               </div>   

        <?php   } else {
                $username = mysql_real_escape_string($_POST['username']);
                $password = mysql_real_escape_string($_POST['password']);

                if($username == "" || $password == ""){
                   echo "<div class='alert alert-error'>
                                            <strong>Sorry!</strong> Complete all fields!
                                         </div>";
                     header("Refresh: 2; URL= login.php?azione=login");

                } else {
                        $password_cript = md5($password);
                    $recuperadati = mysql_query("SELECT * FROM utenti WHERE username = '$username' AND password = '$password_cript'");
                    $verificadati = mysql_num_rows($recuperadati);

                    if($verificadati == 1){
                       $sessione = mysql_fetch_array($recuperadati);
                       $_SESSION['utente'] = $sessione['username'];
                       $_SESSION['id_user_logged'] = $sessione['id']; 
                        echo "<div class='alert alert-success'>
                                                          You are now logged in!
                                                      </div>";
                              header("Refresh: 2; URL= profile.php?username=".$_SESSION['utente']."");

                    } else {
                        echo "<div class='alert alert-error'>
                                                         <strong>Sorry!</strong> Username or Password not found!
                             <a href='login.php?azione=login'>Try again</a> or <a href='register.php'>Sign Up now</a>
                                                      </div>";
                    }

                }

            }
            // login.php?azione=logout
            } elseif ($p == "logout"){

               session_destroy();
               echo "<div class='alert alert-success'>
                                    Logout!
                                 </div>";
               header("Refresh: 2; URL= index.php");
            }
        ?> 
```

刚刚添加了login.php的完整代码，也许它可以是最大的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:21:20.660

除非您在本地服务器上启用了输出缓冲，否则在使用标头函数之前回显输出不应该起作用。它可能在您的生产服务器上被关闭。

尝试这个：

```
if($verificadati == 1){
                           $sessione = mysql_fetch_array($recuperadati);
                           $_SESSION['utente'] = $sessione['username'];
                           $_SESSION['id_user_logged'] = $sessione['id']; 
header("Refresh: 2; URL= profile.php?username=".$_SESSION['utente']."");
                            echo "<div class='alert alert-success'>
                                                              You are now logged in!
                                                          </div>";

                        } else {
                            echo "<div class='alert alert-error'>
                                                             <strong>Sorry!</strong> Username or Password not found!
                                 <a href='login.php?azione=login'>Try again</a> or <a href='register.php'>Sign Up now</a>
                                                          </div>";
                        } 
```

如您所见，您应该移动

```
echo "<div class='alert alert-success'>You are now logged in!</div>"; 
```

到您的目标网页。

# javascript - 带有 jQ uery 的 AJAX 的 Google Feed API

> ID：15259245
> 
> 赞同：2
> 
> 时间：2013-03-06T22:19:53.630
> 
> 标签：javascript, jquery, ajax, google-feed-api

我正在尝试使用 Google 的 Feed API 加载 RSS 提要，它给了我一个 JSON 字符串。
（文档：[https](https://developers.google.com/feed/) ://developers.google.com/feed/ ）。

但是，我正在尝试使用 jQuery 的 AJAX 而不是 vanilla JavaScript XHR。由于某种原因它不起作用，我无法确定原因。但是，在浏览器中加载 URL 是可行的（获取下面代码中的链接）。

我准备了一个 jsFiddle：http: [//jsfiddle.net/gberger/fNwpD/](http://jsfiddle.net/gberger/fNwpD/)

```
$.ajax({
        url:'http://ajax.googleapis.com/ajax/services/feed/load?hl=ja&output=json-in-script&q=http%3A%2F%2Ffeeds.gawker.com%2Flifehacker%2Ffull&v=1.0&num=3',
        success: function(data){
            alert(JSON.stringify(data));
        },
        error: function(error){
            alert(this.url);
            alert(JSON.stringify(error));
        }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:25:08.143

只需添加`dataType: 'jsonp'`到您的选项对象。由于[Same-origin policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript) ，您的代码无法正常工作。如果服务器支持 JSONP（Feed API 支持），JSONP 是一种处理方式。

```
$.ajax({
    url: 'xy',
    success: function () {},
    error: function () {},
    dataType: 'jsonp'
}); 
```

[你的工作小提琴](http://jsfiddle.net/fNwpD/3/)

# jquery - 超大：特定照片的外部链接？

> ID：15259246
> 
> 赞同：0
> 
> 时间：2013-03-06T22:19:56.467
> 
> 标签：jquery, supersized

我将[Supersized](http://buildinternet.com/project/supersized/) jQuery 插件用于图片库。

如何从外部页面链接到超大画廊中的特定图像？

这是我来自 jquery 页面的代码：

jQuery(函数($){

```
 $.supersized({

slideshow:   1, 
autoplay: 0,            
start_slide : document.write (location
                                .hash
                                .replace(/^#/,'')
                                  .replace(/im=([0-9]+).*$/,'$1')),

stop_loop: 0,           
random: 0, 
```

....etc......
slide_links：'num'，
thumb_links：1，
thumbnail_navigation：0，
slides：[

{图片：'photos/BE_oct14-4.jpg'，标题：'slide0'，拇指：''，网址：''}，{图片：'photos/cinqueterre-4.jpg'，标题：'slide1'，拇指：''，网址：''}，

以及来自外部 html 页面的链接：< href="photos.html#im=3>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:26:35.520

您可以在将本地图片添加到幻灯片数组时添加外部图片：

```
slides : [
    {image : 'http://externalURL/pic01.jpg', title : 'pic01', thumb : 'http://externalURL/pic01T.jpg', url : 'http://anyUrl'},
    {image : 'http://externalURL/pic02.jpg', title : 'pic02', thumb : 'http://externalURL/pic02T.jpg', url : 'http://anyUrl'},
    {image : 'localPath/pic01.jpg', title : 'pic01_l', thumb : 'localPath/pic01T.jpg', url : 'http://anyUrl'}
] 
```

# scala - 在 Scala 中，如何在不知道长度的情况下获取从第 n 个元素到列表末尾的列表切片？

> ID：15259250
> 
> 赞同：57
> 
> 时间：2013-03-06T22:20:03.760
> 
> 标签：scala

我正在寻找一种优雅的方法来从元素 n 开始获取列表的一部分，而无需指定列表的长度。假设我们有一个多行字符串，我将其拆分为多行，然后想要获取从第 3 行开始的所有行的列表：

```
string.split("\n").slice(3,X)       // But I don't know what X is... 
```

我在这里真正感兴趣的是是否有办法获取调用返回的列表的引用，以便在调用`split`时可以替换它的长度，有点像幻想（在这种情况下它会读作）？在 python 中，不需要指定切片的最后一个元素。`X``slice``_``slice(3,_.length)`

当然我可以通过在拆分后使用临时变量来解决这个问题，或者创建一个语法很好的辅助函数，但我只是好奇。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-06T22:21:10.050

只需删除您不需要的前 n 个元素：

```
List(1,2,3,4).drop(2)
res0: List[Int] = List(3, 4) 
```

或者在你的情况下：

```
string.split("\n").drop(2) 
```

还有一种`.take(n)`做相反事情的配对方法，你可以把它想象成`.slice(0,n)`.

如果您需要这两个部分，请使用`.splitAt`：

```
val (left, right) = List(1,2,3,4).splitAt(2)
left: List[Int] = List(1, 2)
right: List[Int] = List(3, 4) 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-03-16T20:05:37.730

正确答案是`takeRight(n)`：

```
"communism is sharing => resource saver".takeRight(3)
                                              //> res0: String = ver 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-27T08:32:00.363

你可以使用scala的list方法'takeRight'，当List的长度不够时，不会抛出异常，像这样：

```
val t = List(1,2,3,4,5);
t.takeRight(3);
res1: List[Int] = List(3,4,5) 
```

如果列表不长于您想要的长度，则不会抛出异常：

```
val t = List(4,5);
t.takeRight(3);
res1: List[Int] = List(4,5) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-11T04:50:52.420

获取最后两个元素：

`List(1,2,3,4,5).reverseIterator.take(2)`

# java - 播放/录制 .DSS 或 .DS2 文件

> ID：15259262
> 
> 赞同：5
> 
> 时间：2013-03-06T22:20:53.313
> 
> 标签：java, android, audio, android-audiomanager

我有一个正在运行的项目，它应该允许播放并最终录制 .DSS（“数字语音标准”）和 .DS2（“数字语音标准 Pro”）音频文件。但是，我似乎找不到任何关于它的信息。有没有什么办法可以实现这一点，或者有任何图书馆可以让它启动和运行？

我正在使用 android 内置的 android.media.MediaPlayer，如果这无论如何有用的话。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T19:11:42.167

我也检查过这个。DS2 和 DSS 由 Olympus、Philips 和 Grundig 专有拥有。所以文档非常安静。这就是为什么你很难找到任何关于它的信息。这很愚蠢，我知道。我希望它更开源，但还是有希望的。一个月前，我看到一个 iPhone 应用程序在某种程度上使用了 DS2 和 DSS 文件，它们不是奥林巴斯、飞利浦或 Grundig 的附属公司。所以它可能在某个地方。现在你可能不得不解决这个问题。我能否询问您打算如何处理 .dss 和 .ds2 文件，以便我可以就可能的解决方法提供建议。

[数字语音标准维基](http://en.wikipedia.org/wiki/Digital_Speech_Standard)

# matlab - MATLAB - 将多个文件拼接在一起

> ID：15259264
> 
> 赞同：0
> 
> 时间：2013-03-06T22:20:54.777
> 
> 标签：matlab

我是 MATLAB 编程的新手，有些语法让我无法理解。所以我需要一点帮助。另外我需要一些复杂的循环想法。

**这是我所拥有的细分**：

*   12 个单独`.dat`的文件，每个文件的标题类似于`output_1_x.dat`,`output_2_x.dat`等。
*   每个文件实际上是被分离和处理的整体的一部分
*   每个`.dat`文件大约是。3.9 GB

**这是我需要做的**：

*   创建一个包含来自每个单独文件的所有数据的单个文件，即我需要重新创建原始文件。
*   将此完整的输出文件称为`output_final.dat`
*   它必须在 MATLAB 中完成，没有其他选择（实际上可能存在；见下面的注释）

**暗示什么**：

*   我必须将`fread`每个 3.9 GB 文件分成块或数据包，一次可能 100 MB（使用嵌入式循环？）
*   这些数据包必须先被读取，然后再按顺序写入
*   在一个文件被读取然后写入之后`output_final.dat`，下一个文件被自动读取和写入（主循环）。

嗯，差不多就是这样。我搜索了“合并多个文件”并找到[了这个](https://stackoverflow.com/questions/9957121/merging-multiple-files-into-one-file-by-using-matlab)。这并不是我需要做的……我不需要获取文件的一部分或文件中的数据，并将其写入新文件。我只是...连接...？这在 Java 或 Perl 中很简单，但我只有 MATLAB 作为工具。

注意：然而，我在 OpenSUSE 中运行 KDE，是在一个非常强大的机器上。也许也是终端专家的人知道从内核执行此操作的命令/脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:51:03.557

因此，在这个网站上，我们通常会将您指向[whathaveyoutried.com](http://mattgemmell.com/2008/12/08/what-have-you-tried/)，但这个问题的措辞很好。

我不会写代码，但我会告诉你我会怎么做。所以首先我对你为什么需要`fread`这个文件有点困惑。您只是将一个文件附加到另一个文件的末尾吗？

您实际上可以使用 unix 命令来实现您想要的：

```
files = dir('*.dat');
for i = 1:length(files)
    string = sprintf('cat %s >> output_final.dat.temp', files(i).name);
    unix(string);
end 
```

该代码应该遍历所有文件并将所有内容通过管道输入`output_final.dat.temp`（然后只需重命名它，我们不希望它包含在任何内容中）；

但是如果你真的想使用`fread`，因为你想以某种方式解析这些行，那么你可以使用相同的过程：

```
files = dir('*.dat');
fidF = fopen('output_final.dat', 'w');
for i = 1:length(files)
    fid = fopen(files(i).name);
    while(~feof(fid))
        string = fgetl(fid) %You may choose to parse the string in some manner here
        fprintf(fidF, '%s', string)
    end
end 
```

请记住，如果您不解析这些行，这将花费更长的时间。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:54:17.933

我建议在其中两个文件上使用[matlab.io.matfileclass](http://www.mathworks.com/help/matlab/ref/matlab.io.matfileclass.html)对象：

```
matObj1 = matfile('datafile1.mat')
matObj2 = matfile('datafile2.mat') 
```

这不会将任何数据加载到内存中。然后，您可以使用对象的方法将变量从一个文件顺序保存到另一个文件。

```
matObj1.varName = matObj2.varName 
```

您可以使用`fieldnames(mathObj1)`并循环获取一个文件中的所有变量以将内容从一个文件复制到另一个文件。然后，您可以通过删除复制的字段来清除一些空间。或者，您可以通过直接移动数据来使用风险更大的过程：

```
matObj1.varName = rmfield(matObj2,'varName') 
```

只是一个免责声明：没有尝试过，使用风险自负。

# xpath - XPath 函数 selectNodes 在 Windows 8 中不可用

> ID：15259269
> 
> 赞同：1
> 
> 时间：2013-03-06T22:21:11.517
> 
> 标签：xpath, windows-8, selectnodes

自从我安装了 Windows 8 后，这段小小的 JavaScript 代码让我很生气

```
xmlDoc=http_request.responseXML.documentElement;
var nodes = xmlDoc.selectNodes('/rfp_object/category'); 
```

直到那一刻，多年来一切都运行良好，但现在我在使用 Windows 8 时遇到了麻烦。错误显示：该对象不支持属性或方法 selectNodes。

在 Chrome、Firefox、Safari 和 Windows Vista 中，它符合我的预期。但在 Windows 8 下不行。更奇特的是，它在 XP 服务器上的开发中运行良好，但在 Windows Server 2008 上的生产中却不行。

将 selectNodes 更改为 getElementsByTagName('category') 在这种情况下效果很好，但不是一种选择，因为我需要在其他情况下过滤数据。

那么我必须做些什么，才能让它像以前一样为 Windows8 用户工作。任何帮助将不胜感激。

洛伦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:47:48.513

我认为 IE 10 是`responseXML`一个 IE XML DOM 文档，而早期版本的 IE 是一个 MSXML XML DOM 文档。方法`selectSingleNode`和`selectNodes`是 MSXML DOM API 的一部分，但不是 IE DOM API 的一部分。我不认为 IE 为其 DOM 文档提供 XPath 支持，因此您需要决定是否要将其转换`responseXML`为 MSXML DOM 文档

```
var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
doc.loadXML(new XMLSerializer().serializeToString(http_request.responseXML)); 
```

然后`selectNodes`在`doc`变量上使用，或者您将检查 IE 提供的方法，如 getElementsByTagName 和 querySelector 是否允许您找到您要查找的内容，或者您​​需要检查 XPath 的 Javascript 实现，如[https://github.com/ilinsky /xpath.js](https://github.com/ilinsky/xpath.js)允许您编写所需的查询。

# jquery-mobile - JQM 页面上出现不需要的滚动条？

> ID：15259273
> 
> 赞同：0
> 
> 时间：2013-03-06T22:21:23.187
> 
> 标签：jquery-mobile

![JQM页面滚动条][1] 连内容的长度都没有覆盖整个页面，我看到页面上有一个垂直的滚动条，我确定不是我自己的CSS造成的。

什么可能导致这种行为？

提前致谢

[1]：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:33:31.803

您看到的是空白滚动条，还是您的页面下方有大量“空白”？如果您看到一个空白滚动条，它是由 css 引起的，例如下面的示例。（不确定它在 jquery-mobile 中的样子）。

```
 html,body{
   height:100%
  }
  html{
   overflow-y:scroll
  } 
```

# python - python在滑动窗口分析的每次迭代中莫名其妙地缩短了步长

> ID：15259274
> 
> 赞同：-4
> 
> 时间：2013-03-06T22:21:23.153
> 
> 标签：python, memory, iteration, short, sliding-window

我正在开发一个程序，该程序在染色体上的一系列滑动窗口中估计统计量 Tajima's D。染色体本身也被分为许多具有（希望）功能意义的不同区域。滑动窗口分析由我的脚本对每个区域执行。

在程序开始时，我定义了滑动窗口的大小以及从一个窗口移动到下一个窗口的步长。我导入一个包含每个不同染色体区域坐标的文件，并导入另一个包含我正在使用的所有 SNP 数据的文件（这是逐行读取的，因为它是一个大文件）。程序循环遍历染色体位置列表。对于每个位置，它生成用于分析的步骤和窗口的索引，将 SNP 数据划分为输出文件（与步骤相对应），计算每个步骤文件的关键统计数据，并结合这些统计数据来估计每个窗口的 Tajima 的 D。

该程序适用于 SNP 数据的小文件。它也适用于第一个染色体断点的第一次迭代。然而，对于大文件的 SNP 数据，随着程序遍历每个染色体区域，分析中的步长会莫名其妙地减小。对于第一个染色体区域，步长为 2500 个核苷酸（这是假设的）。然而，对于第二个染色体片段，步长是 1966，第三个是 732。

如果有人对为什么会出现这种情况有任何建议，请告诉我。我特别难过，因为这个程序似乎适用于小文件的大小，但不适用于较大的文件。

我的代码如下：

```
import sys
import math
import fileinput
import shlex
import string
windowSize = int(500)
stepSize = int(250)
n = int(50)     #number of individuals in the anaysis
SNP_file = open("SNPs-1.txt",'r')
SNP_file.readline()
breakpoints = open("C:/Users/gwilymh/Desktop/Python/Breakpoint coordinates.txt", 'r')
breakpoints = list(breakpoints)
numSegments = len(breakpoints)
# Open a file to store the Tajima's D results:
outputFile = open("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/Tajima's D estimates.txt", 'a')
outputFile.write(str("segmentNumber\tchrSegmentName\tsegmentStart\tsegmentStop\twindowNumber\twindowStart\twindowStop\tWindowSize\tnSNPs\tS\tD\n"))

#Calculating parameters a1, a2, b1, b2, c1 and c2
numPairwiseComparisons=n*((n-1)/2)
b1=(n+1)/(3*(n-1))
b2=(2*(n**2+n+3))/(9*n*(n-1))
num=list(range(1,n))                # n-1 values as a list
i=0
a1=0
for i in num:
   a1=a1+(1/i)
   i=i+1
j=0
a2=0
for j in num:
    a2=a2+(1/j**2)
    j=j+1
c1=(b1/a1)-(1/a1**2)
c2=(1/(a1**2+a2))*(b2 - ((n+2)/(a1*n))+ (a2/a1**2) )

counter6=0
#For each segment, assign a number and identify the start and stop coodrinates and the segment name
for counter6 in range(counter6,numSegments):
    segment = shlex.shlex(breakpoints[counter6],posix = True)
    segment.whitespace += '\t'
    segment.whitespace_split = True
    segment = list(segment)
    segmentName = segment[0]
    segmentNumber = int(counter6+1)
    segmentStartPos = int(segment[1])
    segmentStopPos = int(segment[2])
    outputFile1 = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_Count of SNPs and mismatches per step.txt")%(str(segmentNumber),str(segmentName))), 'a')

#Make output files to index the lcoations of each window within each segment
    windowFileIndex = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_windowFileIndex.txt")%(str(segmentNumber),str(segmentName))), 'a')
    k = segmentStartPos - 1
    windowNumber = 0
    while (k+1) <=segmentStopPos:
        windowStart = k+1
        windowNumber = windowNumber+1
        windowStop = k + windowSize 
        if windowStop > segmentStopPos:
            windowStop = segmentStopPos
        windowFileIndex.write(("%s\t%s\t%s\n")%(str(windowNumber),str(windowStart),str(windowStop)))
        k=k+stepSize
    windowFileIndex.close()

# Make output files for each step to export the corresponding SNP data into + an index of these output files
    stepFileIndex = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_stepFileIndex.txt")%(str(segmentNumber),str(segmentName))), 'a')
    i = segmentStartPos-1
    stepNumber = 0
    while (i+1) <= segmentStopPos:
        stepStart = i+1
        stepNumber = stepNumber+1
        stepStop = i+stepSize 
        if stepStop > segmentStopPos:
            stepStop = segmentStopPos
        stepFile = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_step_%s.txt")%(str(segmentNumber),str(segmentName),str(stepNumber))), 'a')
        stepFileIndex.write(("%s\t%s\t%s\n")%(str(stepNumber),str(stepStart),str(stepStop)))
        i=i+stepSize
    stepFile.close()
    stepFileIndex.close()

# Open the index file for each step in current chromosomal segment
    stepFileIndex = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_stepFileIndex.txt")%(str(segmentNumber),str(segmentName))), 'r')
    stepFileIndex = list(stepFileIndex)
    numSteps = len(stepFileIndex)

    while 1:
        currentSNP = SNP_file.readline()
        if not currentSNP: break
        currentSNP = shlex.shlex(currentSNP,posix=True)
        currentSNP.whitespace += '\t'
        currentSNP.whitespace_split = True
        currentSNP = list(currentSNP)
        SNPlocation = int(currentSNP[0])
        if SNPlocation > segmentStopPos:break
        stepIndexBin = int(((SNPlocation-segmentStartPos-1)/stepSize)+1)
        #print(SNPlocation, stepIndexBin)
        writeFile = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_step_%s.txt")%(str(segmentNumber),str(segmentName),str(stepIndexBin))), 'a')
        writeFile.write((("%s\n")%(str(currentSNP[:]))))
        writeFile.close()

    counter3=0
    for counter3 in range(counter3,numSteps):
# open up each step in the list of steps across the chromosomal segment:
        L=shlex.shlex(stepFileIndex[counter3],posix=True)
        L.whitespace += '\t'
        L.whitespace_split = True
        L=list(L)
        #print(L)
        stepNumber = int(L[0])
        stepStart = int(L[1])
        stepStop = int(L[2])
        stepSize = int(stepStop-(stepStart-1))
#Now open the file of SNPs corresponding with the window in question and convert it into a list:
        currentStepFile = open(("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_step_%s.txt")%(str(segmentNumber),str(segmentName),str(counter3+1)),'r')
        currentStepFile = list(currentStepFile)
        nSNPsInCurrentStepFile = len(currentStepFile)
        print("number of SNPs in this step is:", nSNPsInCurrentStepFile)
        #print(currentStepFile)
        if nSNPsInCurrentStepFile == 0:
            mismatchesPerSiteList = [0] 
        else:
# For each line of the file, estimate the per site parameters relevent to Tajima's D
            mismatchesPerSiteList = list()
            counter4=0
            for counter4 in range(counter4,nSNPsInCurrentStepFile):
                CountA=0
                CountG=0
                CountC=0
                CountT=0
                x = counter4
                lineOfData = currentStepFile[x]
                counter5=0
                for counter5 in range(0,len(lineOfData)):
                    if lineOfData[counter5]==("A" or "a"): CountA=CountA+1
                    elif lineOfData[counter5]==("G" or "g"): CountG=CountG+1
                    elif lineOfData[counter5]==("C" or "c"): CountC=CountC+1
                    elif lineOfData[counter5]==("T" or "t"): CountT=CountT+1
                    else: continue
                AxG=CountA*CountG
                AxC=CountA*CountC
                AxT=CountA*CountT
                GxC=CountG*CountC
                GxT=CountG*CountT
                CxT=CountC*CountT
                NumberMismatches = AxG+AxC+AxT+GxC+GxT+CxT
                mismatchesPerSiteList=mismatchesPerSiteList+[NumberMismatches]
        outputFile1.write(str(("%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n")%(segmentNumber, segmentName,stepNumber,stepStart,stepStop,stepSize,nSNPsInCurrentStepFile,sum(mismatchesPerSiteList))))
    outputFile1.close()

    windowFileIndex = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_windowFileIndex.txt")%(str(segmentNumber),str(segmentName))), 'r')
    windowFileIndex = list(windowFileIndex)
    numberOfWindows = len(windowFileIndex)
    stepData = open((("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_Count of SNPs and mismatches per step.txt")%(str(segmentNumber),str(segmentName))), 'r')
   stepData = list(stepData)
    numberOfSteps = len(stepData)

    counter = 0
    for counter in range(counter, numberOfWindows):
        window = shlex.shlex(windowFileIndex[counter], posix = True)
        window.whitespace += "\t"
        window.whitespace_split = True
        window = list(window)
        windowNumber = int(window[0])
        firstCoordinateInCurrentWindow = int(window[1])
        lastCoordinateInCurrentWindow = int(window[2])
        currentWindowSize = lastCoordinateInCurrentWindow - firstCoordinateInCurrentWindow +1
        nSNPsInThisWindow = 0
        nMismatchesInThisWindow = 0

        counter2 = 0
        for counter2 in range(counter2,numberOfSteps):
            step = shlex.shlex(stepData[counter2], posix=True)
            step.whitespace += "\t"
            step.whitespace_split = True
            step = list(step)
            lastCoordinateInCurrentStep = int(step[4])
            if lastCoordinateInCurrentStep < firstCoordinateInCurrentWindow: continue
            elif lastCoordinateInCurrentStep <= lastCoordinateInCurrentWindow:
                nSNPsInThisStep = int(step[6])
                nMismatchesInThisStep = int(step[7])
                nSNPsInThisWindow = nSNPsInThisWindow + nSNPsInThisStep
                nMismatchesInThisWindow = nMismatchesInThisWindow + nMismatchesInThisStep
            elif lastCoordinateInCurrentStep > lastCoordinateInCurrentWindow: break
        if nSNPsInThisWindow ==0 :
            S = 0
            D = 0
        else:
            S = nSNPsInThisWindow/currentWindowSize
            pi = nMismatchesInThisWindow/(currentWindowSize*numPairwiseComparisons)
            print(nSNPsInThisWindow,nMismatchesInThisWindow,currentWindowSize,S,pi)
            D = (pi-(S/a1))/math.sqrt(c1*S + c2*S*(S-1/currentWindowSize))
        outputFile.write(str(("%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n")%(segmentNumber,segmentName,segmentStartPos,segmentStopPos,windowNumber,firstCoordinateInCurrentWindow,lastCoordinateInCurrentWindow,currentWindowSize,nSNPsInThisWindow,S,D))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:28:54.673

快速搜索显示您确实更改`stepSize`了第 110 行：

```
 stepStart = int(L[1])
    stepStop = int(L[2])
    stepSize = int(stepStop-(stepStart-1)) 
```

`stepStop`并且`stepStart`似乎取决于您文件的内容，因此我们无法进一步调试它。

# c# - 从字符串中删除隐藏字符

> ID：15259275
> 
> 赞同：43
> 
> 时间：2013-03-06T22:21:30.770
> 
> 标签：c#, .net, string, hidden-characters

我的问题：

我有一个 .NET 应用程序，它通过电子邮件发送时事通讯。在 Outlook 中查看时事通讯时，Outlook 会显示一个问号来代替它无法识别的隐藏字符。这些隐藏字符来自最终用户，他们将组成时事通讯的 html 复制并粘贴到表单中并提交。如果这些隐藏字符出现在字符串的末尾或开头，则 c# trim() 会删除它们。当在 gmail 中查看时事通讯时，gmail 可以很好地忽略它们。将这些隐藏字符粘贴到 Word 文档中并打开“显示段落标记和隐藏符号”选项时，符号显示为一个更大矩形内的一个矩形。此外，组成时事通讯的文本可以是任何语言，因此必须接受 Unicode 字符。一世' 我尝试循环遍历字符串以检测字符，但循环无法识别它并通过它。还要求最终用户在提交之前先将 html 粘贴到记事本中是不可能的。

我的问题：
如何使用 C# 检测和消除这些隐藏字符？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-06T22:27:21.190

您可以使用以下内容从输入字符串中删除所有控制字符：

```
string input; // this is your input string
string output = new string(input.Where(c => !char.IsControl(c)).ToArray()); 
```

[这是该](https://msdn.microsoft.com/en-us/library/system.char.iscontrol.aspx)方法的文档`IsControl()`。

或者如果你只想保留字母和数字，你也可以使用[`IsLetter`](https://msdn.microsoft.com/en-us/library/system.char.isletter.aspx)and[`IsDigit`](https://msdn.microsoft.com/en-us/library/system.char.isdigit.aspx)函数：

```
string output = new string(input.Where(c => char.IsLetter(c) || char.IsDigit(c)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-02-17T05:27:25.110

我通常使用这个正则表达式来替换所有不可打印的字符。

顺便说一句，大多数人认为制表符、换行符和回车符是不可打印的字符，但对我来说不是。

所以这里是表达式：

```
string output = Regex.Replace(input, @"[^\u0009\u000A\u000D\u0020-\u007E]", "*"); 
```

*   `^`表示如果它是以下任何一种：
*   `\u0009`是标签
*   `\u000A`是换行
*   `\u000D`是回车
*   `\u0020-\u007E`表示从空间到的所有内容`~`——即 ASCII 中的所有内容。

如果要进行更改，请参阅[ASCII 表。](http://www.asciitable.com/)请记住，它会删除每个非 ASCII 字符。

要在上面进行测试，您可以自己创建一个字符串，如下所示：

```
 string input = string.Empty;

    for (int i = 0; i < 255; i++)
    {
        input += (char)(i);
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-30T12:30:32.823

最适合我的是：

```
string result = new string(value.Where(c =>  char.IsLetterOrDigit(c) || (c >= ' ' && c <= byte.MaxValue)).ToArray()); 
```

在我确保字符是任何字母或数字的地方，这样我就不会忽略任何非英文字母，或者如果它不是字母，我会检查它是否是大于或等于空格的 ascii 字符以确保我忽略了一些控制字符，这样可以确保我不会忽略标点符号。

有些人建议使用 IsControl 来检查字符是否不可打印，但例如忽略从左到右标记。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-15T00:27:46.727

```
new string(input.Where(c => !char.IsControl(c)).ToArray()); 
```

IsControl 遗漏了一些控制字符，例如从左到右标记 (LRM)（在进行复制粘贴时通常隐藏在字符串中的字符）。如果您确定您的字符串只有数字和数字，那么您可以使用 IsLetterOrDigit

```
new string(input.Where(c => char.IsLetterOrDigit(c)).ToArray()) 
```

如果你的字符串有特殊字符，那么

```
new string(input.Where(c => c < 128).ToArray()) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-06T22:27:52.473

你可以这样做：

```
var hChars = new char[] {...};
var result = new string(yourString.Where(c => !hChars.Contains(c)).ToArray()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-30T15:16:32.963

### TLDR 答案

使用这个正则表达式...

```
\P{Cc}\P{Cn}\P{Cs} 
```

像这样...

```
var regex = new Regex(@"![\P{Cc}\P{Cn}\P{Cs}]"); 
```

### TLDR 解释

*   `\P{Cc}`:*不*匹配控制字符。
*   `\P{Cn}`：*不*匹配未分配的字符。
*   `\P{Cs}`:*不*匹配 UTF-8 无效字符。

### 工作演示

在这个演示中，我使用这个正则表达式来搜索字符串`"Hello, World!"`。最后那个奇怪的字符是`(char)4`——这是[`END TRANSMISSION`](https://www.fileformat.info/info/unicode/char/0004/index.htm).

```
using System;
using System.Text.RegularExpressions;

public class Test {
    public static void Main() {
        var regex = new Regex(@"![\P{Cc}\P{Cn}\P{Cs}]");
        var matches = regex.Matches("Hello, World!" + (char)4);
        Console.WriteLine("Results: " + matches.Count);
        foreach (Match match in matches) {
            Console.WriteLine("Result: " + match);
        }
    }
} 
```

[**IDEOne.com 上的完整工作演示**](https://ideone.com/jPvXVt)

上述代码的输出：

```
Results: 1
Result: ! 
```

### 备择方案

*   `\P{C}`: 只匹配可见字符。不要匹配任何不可见的字符。
*   `\P{Cc}`: 只匹配非控制字符。不匹配任何控制字符。
*   `\P{Cc}\P{Cn}`：仅匹配已分配的非控制字符。不要匹配任何控制或未分配的字符。
*   `\P{Cc}\P{Cn}\P{Cs}`：仅匹配已分配且 UTF-8 有效的非控制字符。不匹配任何控制、未分配或 UTF-8 无效字符。
*   `\P{Cc}\P{Cn}\P{Cs}\P{Cf}`：仅匹配已分配且 UTF-8 有效的非控制、非格式字符。不匹配任何控制、未分配、格式化或 UTF-8 无效字符。

### 来源和解释

查看可用于在正则表达式中进行测试的[Unicode 字符属性。](https://en.wikipedia.org/wiki/Unicode_character_property#General_Category)您应该能够在[Microsoft .NET](https://docs.microsoft.com/en-us/dotnet/standard/base-types/character-classes-in-regular-expressions)、[JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes)、[Python](https://pypi.org/project/regex/)、[Java](https://javascript.info/regexp-unicode)、[PHP](https://www.php.net/manual/en/parle.regex.unicodecharclass.php)、[Ruby](https://ruby-doc.org/core-2.4.1/Regexp.html)、[Perl](https://perldoc.perl.org/5.8.9/perlrecharclass)、[Golang](https://golang.org/pkg/regexp/syntax/)甚至[Adob](https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/using-regular-expressions-in-functions/regular-expression-syntax.html) ​​e 中使用这些正则表达式。了解 Unicode 字符类是*非常可转移的知识*，所以我推荐使用它！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-17T21:43:29.920

我使用这个快速而肮脏的 oneliner 从损坏的 Windows 10 计算器应用程序留下的 LTR/RTL 标记中清除了一些输入。这可能与完美相去甚远，但足以快速修复：

```
string cleaned = new string(input.Where(c => !char.IsControl(c) && (char.IsLetterOrDigit(c) || char.IsPunctuation(c) || char.IsSeparator(c) || char.IsSymbol(c) || char.IsWhiteSpace(c))).ToArray()); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-09-29T15:56:56.923

```
string output = new string(input.Where(c => !char.IsControl(c)).ToArray()); 
```

这肯定会解决问题。我在一个字符串中有一个不可打印的替代字符（ASCII 26），这导致我的应用程序中断，这行代码删除了这些字符

# php - PHP 会话变量是否适用于 EXE 非浏览器应用程序？

> ID：15259278
> 
> 赞同：0
> 
> 时间：2013-03-06T22:21:40.393
> 
> 标签：php, vb.net

我正在开发一款在 VB.NET 2010 中使用 Internet PHP 和下载的 EXE 客户端的游戏。

由于下载的 EXE 不是浏览器，php 是否能够启动与客户端的会话，或者是否需要另一条路由来为每个 PHP 调用验证客户端？

```
vb.net 2010
php 5.0
MySQL
GoDaddy.com as hosting service 
```

以前因为不是问题而关闭？

好吧，让我把它重新表述为两个单独的部分：

使用 WebClient 的 vb.net 应用程序（例如：使用客户端作为 Systems.net 的新 WebClient）可以与虚拟主机保持有效的 PHP 会话吗？

（那部分是简单的是或否）

如果不是，那么建议使用什么方法来维护与 vb.net 应用程序的会话类型连接？

在看到你放弃并关闭第一次尝试问这个问题之后，我不希望你能回答这两个问题，因为我什至还没来得及跑完牛奶去商店。>:|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:31:07.267

PHP 会话依赖于 cookie ^†，因此只要客户端可以使用 http cookie，就可以了。

会话中的其他所有内容都由 PHP 在服务器上处理，因此客户端不需要知道或担心它。cookie 是客户端看到的关于会话的唯一内容。

至于 VB.Net WebClient 是否可以使用 cookie ......好吧，一个快速的谷歌搜索会提取大量信息，这证实它确实可以这样做 -[例如，这个答案在 SO 上](https://stackoverflow.com/questions/2825377/how-can-i-get-the-webclient-to-use-cookies)。

^† *是的，我知道会话也可以使用 GET 请求来维护状态，但这并不理想；饼干是要走的路。*

# java - 构建快速的 Android 应用程序 - Java 还是本机？

> ID：15259279
> 
> 赞同：9
> 
> 时间：2013-03-06T22:21:42.360
> 
> 标签：java, android, c++, c

我即将开始构建一个 Android 应用程序（我目前正在开发 Web 服务和数据库），我想知道使用 Java 或直接编码成 C 或 C++ 之间的应用程序速度是否存在显着差异.

该应用程序不包含任何复杂的图形或物理，其速度主要取决于多个对象与 REST Web 服务之间的传输速度。

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-06T22:24:27.920

[谷歌说](http://developer.android.com/tools/sdk/ndk/index.html)你可能应该坚持使用 Java：

> 在下载 NDK 之前，您应该了解 NDK 不会使大多数应用程序受益。作为开发人员，您需要平衡其优点和缺点。值得注意的是，在 Android 上使用本机代码通常不会带来显着的性能提升，但它总是会增加应用程序的复杂性。一般来说，你应该只在它对你的应用程序必不可少的情况下使用 NDK——永远不要因为你只是喜欢用 C/C++ 编程。
> 
> NDK 的典型候选对象是独立的、CPU 密集型的操作，它们不会分配太多内存，例如信号处理、物理模拟等。在检查您是否应该使用本机代码进行开发时，请考虑您的需求并查看 Android 框架 API 是否提供了您需要的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:26:21.450

我不建议使用 NDK，因为您已经提到您正在从头开始为 android 构建它。[谷歌在这里](http://developer.android.com/tools/sdk/ndk/index.html)特别指出，由于上述原因，您不应该使用 NDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:22:54.133

我建议您使用 Java 并通过 Spring for Android 使用您的 REST Web 服务。消费它们太容易了。目前我在 Android Play Store 中有一个已发布的应用程序正在使用它，源代码在 GitHub 中，你可以看看。

祝你好运！

# php - 表单操作 URL 与页面 URL 不同

> ID：15259287
> 
> 赞同：0
> 
> 时间：2013-03-06T22:22:15.340
> 
> 标签：php, javascript, jquery, ajax

**问题**：我有一个表单，其表单 action="url" 与表单所在的页面 URL 不同。

页面 URL = www.page.com
表单操作 =“ [http://www.differentserver.com](http://www.differentserver.com) ”

**问题**：发布表单时，它导航到表单操作 URL。

**问题**：仍然发布到操作 URL 但使用 jquery/ajax 留在表单页面上的最佳方式是什么

此外，操作 URL 会发回一个 xml，说明潜在客户是否通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:24:16.030

您不能使用 AJAX 将数据提交到另一个域。

但是，您可以使用旧的“hack”：

```
<form action="http://www.differentserver.com/" method="post" target="hiddeniframe">
    ...
</form>
<iframe style="display:none" name="hiddeniframe"></iframe> 
```

这会将表单提交到其他域，但似乎不会影响当前文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:23:43.240

您始终可以将其发布到隐藏的 Iframe`target='framename'`并挂钩到 Iframe 的 ONLOAD 事件以检测它何时完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:23:44.290

在 differentserver.com 之后重定向或使用 curl 执行操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:36:17.957

[Jquery 做得很好](http://api.jquery.com/jQuery.post/)

发布整个表格

```
//Jquery Code
$.post("test.php", $("#form_name").serialize(), function(result){
 // return 
 var aa = result;

}); 
```

发布表格的特定部分

```
//Jquery Code
 /* get some values from elements on the page: */
 var $form = $( this ),
  term = $form.find( 'input[name="s"]' ).val(),
  url = $form.attr( 'action' );

 /* Send the data using post */
 var posting = $.post( url, { s: term } );

 /* Put the results in a div */
 posting.done(function( data ) {
   var content = $( data ).find( '#content' );
  $( "#result" ).empty().append( content );
   }); 
```

如果您使用提交按钮，这将阻止表单正常发布。

```
 /* stop form from submitting normally */
  event.preventDefault(); 
```

# php - 在没有 https 的情况下安全地发送 php 表单？

> ID：15259292
> 
> 赞同：0
> 
> 时间：2013-03-06T22:22:33.450
> 
> 标签：php, forms, security, hash, https

我是网站安全的新手，我需要建立一个注册和登录系统。我还没有使用 https，如何确保我的注册安全？

这是我的注册表单 index.php，我使用 ajax 将表单值传递给 create_account.php 。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript" language="javascript">
function submitForm() {
    $.ajax({type:'POST', url: 'create_account.php', data:$('#ContactForm').serialize(), success: function(response) {
        $('#ContactForm').find('.form_result').html(response);
    }});

    return false;
}

</script>
<form id="ContactForm" onsubmit="return submitForm();" method="POST">
   <input type="text" name="fname" value=""/> 
   <input type="text" name="lname" value="" />
   <input type="text" name="email" value="" />
   <input type="text" name="vEmail" value="" /> 
   <input type="password" name="password" value="" />
   <input type="password" name="vPassword" value="" />
   <input type="submit" name="submit" value="Submit" onclick="password.value=sha256_hash(password.value)"/>
<div class="form_result"> 
```

我试过 onclick="password.value=sha256_hash(password.value)" 但它根本不起作用。现在我不确定攻击者如何获取从 index.php 发送到 create_account.php 的信息。是否可以散列（sha256/512）并用javascript加盐？在 create_account.php 中，我已经在做这种类型的安全性了。

如果不可能，我们如何设置https（我对ssl几乎一无所知）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:29:01.150

> 我还没有使用 https，如何确保我的注册安全？

开始使用 HTTPS。任何其他方法都是疯狂的，并且不安全。

> 我试过 onclick="password.value=sha256_hash(password.value)" 但它根本不起作用。

发送散列密码对安全性的贡献很小。它将降低（虽然不是很大程度）攻击者发现用户正在使用的密码的风险（这将有助于保护回收密码的用户）但是如果他们在传输过程中嗅探它，那么他们仍然可以知道他们需要什么字符串发送到您的站点以该用户身份登录。

> 是否可以散列（sha256/512）并用javascript加盐？

可能的？是的。作为解决这个问题的方法有用吗？一点也不。

如果您想要安全，请获得 SSL 支持。

> 如果不可能，我们如何设置https（我对ssl几乎一无所知）？

基本方法是：

1.  购买或生成证书（生成自己的证书会导致问题，因为它不会由普通用户的浏览器信任的人签名）
2.  配置您的服务器以使用证书（您如何执行此操作取决于服务器，Google 是您的朋友，它可以找到类似[这些说明在 Debian 系统上为 Apache HTTPD 设置 SSL 的内容](http://www.debian-administration.org/articles/349)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:30:14.147

虽然我确信您可以在发送密码客户端之前对其进行加盐，但这在安全性方面对您没有多大帮助。是的，它将防止原始密码在传输过程中被窥探，但这也会将您的哈希盐暴露给任何有互联网连接的人，因此他们可以通过彩虹表窃取密码。假设您仍然选择这样做，您是否想在每次有人尝试登录时重新散列？您最好通过 SSL 证书进行设置。

至于设置 SSL，我很快 google 了一下，发现了[这个](http://www.ehow.com/how_7340693_configure-ssl-php.html). 如果您只是在测试自己，您应该可以[生成自己的证书](http://www.openssl.org/docs/HOWTO/certificates.txt)，但是如果您要进行生产，则需要从注册提供商（如威瑞信）购买证书。同样，您使用的任何托管服务提供商都可能会迫使您在测试期间使用购买的托管服务提供商。

同样，如果您使用的是共享托管服务提供商，您可能需要请他们帮忙安装您的证书。

# session - 如何唯一标识 Grails 中的请求？

> ID：15259295
> 
> 赞同：0
> 
> 时间：2013-03-06T22:22:55.367
> 
> 标签：session, grails

Grails[请求](http://grails.org/doc/2.2.0/ref/Servlet%20API/request.html)对象是[HttpServletRequest](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html)的一个实例。有什么方法可以从请求对象中获取唯一的 id？我的最终目标是存储特定于请求的会话数据，因此我需要一个`String`可以用作唯一标识符的或数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:53:49.757

也许添加一个唯一的 id 作为请求属性？

```
request.setAttribute('UID', Math.random()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:01:14.090

为什么不在过滤器中使用静态 ThreadLocal？

# paypal - 音乐销售网站中的贝宝集成

> ID：15259299
> 
> 赞同：0
> 
> 时间：2013-03-06T22:23:37.240
> 
> 标签：paypal, payment-gateway

我正在建立一个网站，人们加入并创建一个帐户来向访问者出售音乐并通过 Paypal 收款。步骤将是。

人们购买音乐并向会员Paypal账户汇款，然后Paypal的回复应该发送到网站，验证付款，然后将结果插入数据库并将链接发送给买家下载音乐。

我基本上拥有其他一切，但不确定使用哪个 Paypal 服务来实现上述结果。我正在查看 IPN，但这涉及会员（卖家）在其 Paypal 帐户中设置响应 URL，以便将响应发送到网站。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:39:24.033

您可以使用 Website Payments Standard、Website Payments Pro 或 Express Checkout 来执行此操作。您对变量“notify_url”也是正确的，这将允许您在按钮代码中传递 IPN URL，这样就不需要在 PayPal 帐户中设置它。

# php - 具有多个键的多维数组输出到 foreach 循环

> ID：15259305
> 
> 赞同：0
> 
> 时间：2013-03-06T22:24:10.497
> 
> 标签：php, arrays, multidimensional-array, foreach

我有一个 MD 数组，我需要在其上运行一个函数以返回结果。把它放在上下文中，它的 5 个服务器带有 1-3 个硬盘驱动器，可以获得可用的剩余空间。

```
$array = array(
"Server 1" => array("C" => "85791338496", "D" => "322119397376"),
"Server 2" => array("C" => "268327448576", "E" => "536733544448", "H" => "274874757120"),
"Server 3" => array("C" => "42947571712", "E" => "214744166400"),
"Server 4" => array("C" => "64317550592", "D" => "150320705536"),
"Server 5" => array("C" => "64317550592")
); 
```

它需要遍历每个服务器，然后是每个硬盘驱动器以返回可用空间。执行此操作的功能受到控制，但基于上述数组的循环是我卡住的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:28:50.120

```
foreach ($array as $server => $disks) {
    print $server .' has the following disks:';
    foreach ($disks as $disk => $avalable_space) {
        print $disk .' has '. $available_space . 'available space';
    }
} 
```

# unit-testing - How to mock a request when unit testing a service in grails

> ID：15259307
> 
> 赞同：9
> 
> 时间：2013-03-06T22:24:16.643
> 
> 标签：unit-testing, grails, groovy, spock

I am trying to unit test a service that has a method requiring a request object.

```
import org.springframework.web.context.request.RequestContextHolder as RCH

class AddressService {

    def update (account, params) {
        try {
            def request = RCH.requestAttributes.request
            // retrieve some info from the request object such as the IP ...
            // Implement update logic
        } catch (all) { 
            /* do something with the exception */ 
        }
    }
} 
```

How do you mock the request object ?

And by the way, I am using Spock to unit test my classes.

Thank you

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-11T00:31:28.747

此代码似乎适用于基本单元测试（[从 Robert Fletcher 的帖子修改](http://grails.1312388.n4.nabble.com/cannot-mock-request-in-testing-controller-tp1338897p1338898.html)）：

```
void createRequestContextHolder() {
    MockHttpServletRequest request = new MockHttpServletRequest()
    request.characterEncoding = 'UTF-8'

    GrailsWebRequest webRequest = new GrailsWebRequest(request, new MockHttpServletResponse(), ServletContextHolder.servletContext)
    request.setAttribute(GrailsApplicationAttributes.WEB_REQUEST, webRequest)

    RequestContextHolder.setRequestAttributes(webRequest)
} 
```

它可以作为函数添加到您的标准 Grails 单元测试中，因为函数名称不以“test”开头......或者您可以以其他方式处理代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-09T18:03:25.913

模拟这些的一种简单方法是修改元类以在调用`RequestContextHolder`时返回模拟。`getRequestAttributes()`

我为此编写了一个简单的规范，当它不起作用时，我感到非常惊讶！所以这是一个非常有趣的问题。经过一番调查，我发现在这种特殊情况下，有几个陷阱需要注意。

1.  当您检索请求对象时`RCH.requestAttributes.request`，您是通过一个`RequestAttributes`未实现该`getRequest()`方法的接口来执行此操作的。`RequestAttributes`如果返回的对象实际上具有此属性，这在 groovy 中非常好，但在 spock 中模拟接口时将不起作用。因此，您需要模拟一个实际具有此方法的接口或类。

2.  我第一次尝试解决 1.，是将模拟类型更改为`ServletRequestAttributes`，它确实有一个`getRequest()`方法。然而，这个方法是最终的。当使用最终方法的值存根模拟时，存根值将被简单地忽略。在这种情况下，`null`被退回。

通过为此测试创建一个名为 的自定义接口`MockRequestAttributes`，并在规范中将此接口用于 Mock，这两个问题都可以轻松克服。

这导致了以下代码：

```
import org.springframework.web.context.request.RequestContextHolder

// modified for testing
class AddressService {

    def localAddress
    def contentType

    def update() {
        def request = RequestContextHolder.requestAttributes.request
        localAddress = request.localAddr
        contentType = request.contentType
    }
} 
```

* * *

```
import org.springframework.web.context.request.RequestAttributes
import javax.servlet.http.HttpServletRequest

interface MockRequestAttributes extends RequestAttributes {
    HttpServletRequest getRequest()
} 
```

* * *

```
import org.springframework.web.context.request.RequestContextHolder
import spock.lang.Specification

import javax.servlet.http.HttpServletRequest

class MockRequestSpec extends Specification {

    def "let's mock a request"() {
        setup:
        def requestAttributesMock = Mock(MockRequestAttributes)
        def requestMock = Mock(HttpServletRequest)
        RequestContextHolder.metaClass.'static'.getRequestAttributes = {->
            requestAttributesMock
        }

        when:
        def service = new AddressService()
        def result = service.update()

        then:
        1 * requestAttributesMock.getRequest() >> requestMock
        1 * requestMock.localAddr >> '127.0.0.1'
        1 * requestMock.contentType >> 'text/plain'
        service.localAddress == '127.0.0.1'
        service.contentType == 'text/plain'

        cleanup:
        RequestContextHolder.metaClass = null
    }

} 
```

# javascript - Javascript DOM背景位置getelementbyid（）？

> ID：15259310
> 
> 赞同：0
> 
> 时间：2013-03-06T22:24:22.180
> 
> 标签：javascript, dom, getelementbyid, background-position

[我在这里](https://stackoverflow.com/questions/7630840/make-background-position-variable)读到我可以使用以下方法定位我的 div 背景图像：

```
var yValue = 20;
document.getElementById('a1').style.backgroundPosition = '0px ' + yValue + 'px'; 
```

但是我将如何为`body` `background-position`使用 JavaScript 执行此操作，主体`id = 'bodyname'`是否为`getElementById()`函数参数提供了一个？

```
<!DOCTYPE html>
<html>
<head>
<style>
body
{ 
    background-image: url('image.gif');
    background-repeat: repeat;
    background-attachment:fixed;
    background-position: 77px 100px;
}
</style>
</head>

<body>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:28:02.947

你可以给身体一个id，这没有问题。但是您可以通过标记名轻松获取元素。

```
var bodyElements = document.getElementsByTagName('body'); 
```

由于该方法返回一个数组，因此 body 标记将是第一个元素：

```
bodyElements[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:26:30.450

为了使用 getElementById 选择您的身体，您需要为其添加一个 id：

html:

```
<body id="bodyid"></body> 
```

javascript:

```
var body = document.getElementById('bodyid'); 
```

# ruby-on-rails - 将客户端javascript模板与backbone.js的rails逻辑混合

> ID：15259315
> 
> 赞同：2
> 
> 时间：2013-03-06T22:24:51.830
> 
> 标签：ruby-on-rails, backbone.js

我已经使用 Backbone.js 工作了一段时间，我现在遇到的一件事是；有时您需要将服务器端逻辑放入 .eco.jst 模板中

例如

*   i18n 翻译（目前查看 i18n.js gem）
*   没有硬编码的路径 (somemodel_path(somemodel))
*   授权（例如，如果用户可以销毁此模型，则显示删除按钮）。Atm 我通过在填充的 json 中传入一些权限对象来解决这个问题。
*   渲染像 simple_form 或 S3_file_uploader 之类的 html 帮助程序（atm 我通过在服务器端渲染它来解决这个问题，并将显示置于无）

如您所知，.eco 由 node.js 解析，所以我不能在 eco 文件中调用 ruby​​。我通过在头部创建一个“数据”对象来解决大多数这些问题。与此类似：

```
window.data = {
    some_translation = "<%= t('cool') %>",
    <%= "can_destoy_model = true," if can?('destroy', Model) %>
    post_edit_link = "<%= post_path(@post) %>
} 
```

除了这很笨重（这只是一个例子，通常这会更有序，或者我向某个 dom 元素添加一个 html5 数据属性），这很耗时，有时你必须重新创建完整的业务逻辑，否则这将是 rails 中的 oneliner （以 S3_file_uploader 为例，它需要编码的亚马逊策略文件和令牌）

您对此有何看法？我是否应该不使用 .eco （尽管我喜欢单独文件中的模板而不是污染视图）。例如，如果我使用小胡子或车把，我是否能够使用服务器端逻辑？如果是，您会推荐哪种宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:48:17.687

我在 Backbone.js 方面的经验是有限的，但我已经设法使用以下 gem 设置了一个带有无逻辑模板的环境：

*   [车把_资产](https://github.com/leshill/handlebars_assets)
*   [haml_assets](https://github.com/carezone/haml_assets)

还有一堆其他的东西，甚至是我目前正在开发的一个迷你框架（你可以在[这里](https://github.com/sergelerator/sharkbone)找到它）

我选择了这种方法来使用 Backbone构建[单页应用程序。](http://en.wikipedia.org/wiki/Single-page_application)

基本上，`haml_assets`gem 为[sprocket](https://github.com/sstephenson/sprockets)提供了解析`.haml`文件的能力，这不是必需的，但我喜欢 HAML 语法。`handlebars_assets`gem 提供了在服务器端和客户端解析 Handlebars 模板的方法。您可以在模板中使用 Ruby 代码，并且可以解决您提到的 i18n 和路径方法问题。

我发现这些工具非常适合帮助 DRY 应用程序的模板，它确实可以让您免于在模板中添加逻辑。例如，如果您使用 Backbone 视图来决定是否显示`delete`按钮，您可以将逻辑保留在 Backbone 视图中，并使用该逻辑来呈现正确的 Handlebars 模板（或部分模板）。

使用您的示例：

咖啡脚本：

```
class ProjectShowView extends Backbone.View
  template: (context) -> HandlebarsTemplates['projects/show'](context)
  deleteButtonTemplate: (context) -> HandlebarsTemplates['projects/shared/delete_button'](context)

  render: (canDelete = false) ->
    @$el.html(@template(@model.toJSON()))
    @$('.delete_button_container').append(@deleteButtonTemplate()) if canDelete
    @ 
```

该示例非常原始和基本，但有望指向正确的方向。我希望它有帮助！

# coda - Coda 2 publish button not working

> ID：15259318
> 
> 赞同：14
> 
> 时间：2013-03-06T22:25:15.943
> 
> 标签：coda

I have exactly the same site settings in coda 1.7.4 as I do in coda 2 but when I click the publish arrow in coda 2 it tells me "Set both local and Remote paths in a site to publish your changes". I have already done that but it still is not working. As I said the same settings are in the older version and it works fine and publishes.

Anyone have any of the same problems.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-20T16:47:45.947

我今天就这个问题联系了 Coda 支持...和你一样，在设置一个具有正确远程和本地根目录的站点后 - 确认是因为我可以连接到两者 - 但发布窗口仍然显示“设置本地和远程路径在网站上发布您的更改”。

从字面上**看，解决方案是关闭 Coda 并重新打开它**。显然这是一个已知问题，在设置新站点时，您必须重新启动 Coda 才能使用发布功能。

只需关闭 Coda 并重新启动它，发布功能现在对我有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-26T10:52:49.387

我遇到了这个问题，以上都没有奏效。我从 Coda 的团队得到了以下回复，它很有效。

1.  右键单击有问题的已保存站点，然后选择编辑。禁用发布和自动索引。
2.  保存并关闭站点
3.  打开站点，然后从菜单栏中选择“文件”>“站点”>“重建站点索引”
4.  索引完成后，重新启动 Coda，然后重新启用发布（以及可选的自动索引）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-06T10:28:53.430

在我在网站设置中勾选“使用发布”之前，我遇到了同样的问题。查看图片：[CODA 2 站点设置](http://i.stack.imgur.com/Is4En.jpg)

我现在可以在 Mac 上通过 ⌥⌘P 发布。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-19T04:58:43.060

Publish 停止为我的一个网站工作，但原因与其他人在这里讨论的完全不同。我使用 Time Machine 回滚到该站点的最新版本，重命名原始文件夹，以便我知道不要使用它。然而，Coda 2 一直指向原始（重命名）文件夹。

因此，Coda 似乎使用唯一 ID 来标识本地根文件夹，而不是简单的文件路径。在大多数情况下，这可能是一个好主意——这意味着如果您在 Finder 中移动或更改此文件夹的名称，Coda 仍然知道它在哪里。但是，如果实际文件夹发生更改（就像从备份中恢复时一样），您可能会遇到意外。

我仍然不知道为什么发布功能停止使用重命名的文件夹。（在某些方面我很高兴它做到了，因为它阻止了我从错误的文件夹发布。）我所知道的是更新站点的“本地根”解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-09T17:11:27.310

令人难以置信的是，Panic 到现在还没有解决这个问题。

查找并删除每个 Coda 相关文件并重新安装 Coda 并没有帮助。

我的“修复”（这次）是在 Coda 中删除该站点并重新创建它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-17T15:31:22.400

我的“修复”（这次）是：

*   将 FTP 服务器的域编辑为不工作，
*   打开网站，
*   让它抱怨服务器错误，
*   关闭尾声，
*   重新打开尾声，
*   修复FTP域，
*   打开网站，

瞧！

一个典型的“我通过抱怨学习”的案例。;-)

（尾声 2.6.10...）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-14T20:20:24.813

具体来说，您必须关闭 Coda 中所有打开的文档，重新确认为站点配置的本地和远程目录，然后关闭 Coda2 并重新打开它。

老实说，像这样的错误仍然存​​在，真是太神奇了。这么多年过去了，我仍然需要保留 Dreamweaver。得到它尾声！#尾声 #尾声2

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-10T20:46:33.227

我有一种情况，发布工作正常，然后神秘地停止了。

我尝试了 BenLeah、Ben Darlington、Robert Barrueco 和 Manu 之前回答的所有建议，并升级到最新版本的 Coda2（从 2.6.9 到 2.6.10），但这些都没有恢复发布。

最终对我有用的是物理删除 Coda2 中的站点连接面板并完全创建一个新站点（具有完全相同的设置）。不确定如果将来发布再次关闭，这是否会再次起作用，或者它是否可以为其他任何人解决问题。如果有的话，我会更新这个答案。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-04-30T19:01:15.777

您必须设置 FTP，将鼠标放在您的站点和页面之间的文件上。在菜单下方，单击文件后，您将在中间打开一个屏幕。然后你把你的FTP设置。

# php - how to get the number from url like this: index?5

> ID：15259319
> 
> 赞同：0
> 
> 时间：2013-03-06T22:25:17.643
> 
> 标签：php, variables

if I have url:

```
site.com/index.php?t=12 
```

i cant get 12 with $_get['t'] but if the url like this:

```
site.com/index.php?12 
```

how to get if and if it's like this

```
site.com/index.php?t12 
```

how to get the number thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:26:39.803

这应该这样做：

```
$str = array_keys($_GET)[0]; // PHP 5.4 and up
list($str) = array_keys($_GET); // all versions 
```

从那里您可以像解析任何其他字符串一样解析出数字：`preg_replace("/\D/","",$str);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:34:36.367

在 之后访问普通非参数值的老式方法`?`是：

```
print $_SERVER["QUERY_STRING"]; 
```

如果确实只有您的`t12`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:43:44.737

网址：`http://yoursite.com/index.php?t12`

```
print_r($_SERVER);
>>
$_SERVER: Array
    [QUERY_STRING] => t12
    [REQUEST_METHOD] => GET
    [SCRIPT_NAME] => /index.php
    [REQUEST_URI] => /index.php?t12
    [DOCUMENT_URI] => /index.php 
```

您可以结合`$_SERVER['QUERY_STRING']`和 Kolink 的答案。此外，根据字符串非数字部分的可能性，您还可以使用`trim()`字符掩码`explode('t',$_SERVER['QUERY_STRING'])`. 我个人的偏好是使用爆炸和修剪。

# linux - Linux : IP address to service?

> ID：15259320
> 
> 赞同：1
> 
> 时间：2013-03-06T22:25:20.437
> 
> 标签：linux, service, ip, daemon

I have an app running as a daemon on a linux box (Red Hat). The purpose of the app is to act as a registrar of sorts -- another device can connect to this host machine, and register (this is me, I am here -- this kind of thing). There is more than one IP address for this machine.

How do I connect/send/forward incoming connections (i.e., the registration data) to my daemon? That is, when the device wants to register and connects to my IP address, how do I direct the traffic to my process/daemon?

Thank you very much for all your help!

:bp:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:32:35.627

嗨，您可能需要提供更多信息。

听起来你想做的是用你的守护进程监听一个 tcp 端口。在不同的语言中有不同的方法可以做到这一点。

另一件需要注意的是保留的端口范围。某些端口只能由具有提升权限的用户使用。请参阅此处[http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers) [TCP 和 UDP 端口范围](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)，只要该端口上没有其他内容，它们的动态范围就可以免费使用。

您使用什么语言？在 Perl中，[这](http://www.perlfect.com/articles/sockets.shtml)就是你听的方式。我可以列出其他语言的其他教程，但没有多大意义。

针对评论，我认为[这个](https://stackoverflow.com/questions/3998569/how-to-bind-raw-socket-to-specific-interface)stackoverflow 问题回答了这个问题。

# vb.net - VB .Net listboxes and collections of objects

> ID：15259325
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:25:30.107
> 
> 标签：vb.net

I would like to move Item objects between the 2 following collections.

```
Private ItemsInRoom As New List(Of CItem)

Private Inv As New List(Of CItem) 
```

I would like this to be done through 2 ListBoxes. 1 is the Inventory and the other is the Item list. How can I do this.

The `CItem` class has several members, only the Name of the item needs to be shown in the `ListBox`. I have been at this for hours, but I can't get anything to work. Does this explanation make sense in what I'm trying to do? If not, what else can I explain so someone might help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:22:43.703

在您的`CItem`课程中，您需要覆盖该`ToString()`功能。这将使名称显示在`listbox`.

```
Public Class CItem    
    Public Overrides Function ToString() As String
      Return Me.Name
    End Function
    'etc...
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:03:58.740

我想你想要的是这样的：

![形式](../Images/c903ced870441f6db51ddf0ce2109714.png)

这是通过以下代码完成的：

```
Option Explicit On

Public Class Form1

    Private ItemsInRoom As New List(Of CItem)
    Private ItemsInInv As New List(Of CItem)

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        MyBase.OnLoad(e)

        ItemsInInv.Add(New CItem(1001, "Egret"))
        ItemsInInv.Add(New CItem(1002, "Dove"))
        ItemsInInv.Add(New CItem(1003, "Hawk"))

        UpdateBindings()
    End Sub

    Public Function CheckOut(ByVal item As CItem) As Boolean
        If item IsNot Nothing Then
            ItemsInInv.Remove(item)
            ItemsInRoom.Add(item)
            Return True
        End If
        Return False
    End Function

    Public Function CheckIn(ByVal item As CItem) As Boolean
        If item IsNot Nothing Then
            ItemsInRoom.Remove(item)
            ItemsInInv.Add(item)
            Return True
        End If
        Return False
    End Function

    Public Sub UpdateBindings()
        itemsInInvListBox.BeginUpdate()
        itemsInInvListBox.DataSource = Nothing
        itemsInInvListBox.DataSource = ItemsInInv
        itemsInInvListBox.DisplayMember = "Name"
        itemsInInvListBox.EndUpdate()
        itemsInInvListBox.Refresh()

        itemsInRoomListBox.BeginUpdate()
        itemsInRoomListBox.DataSource = Nothing
        itemsInRoomListBox.DataSource = ItemsInRoom
        itemsInRoomListBox.DisplayMember = "Name"
        itemsInRoomListBox.EndUpdate()
        itemsInRoomListBox.Refresh()
    End Sub

    Private Sub itemsInInvListBox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles itemsInInvListBox.SelectedIndexChanged
        checkOutButton.Enabled = itemsInInvListBox.SelectedIndex <> -1
    End Sub

    Private Sub itemsInRoomListBox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles itemsInRoomListBox.SelectedIndexChanged
        checkInButton.Enabled = itemsInRoomListBox.SelectedIndex <> -1
    End Sub

    Private Sub checkOutButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles checkOutButton.Click
        Dim item As CItem = CType(itemsInInvListBox.SelectedItem, CItem)
        If CheckOut(item) Then
            UpdateBindings()
        End If
    End Sub

    Private Sub checkInButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles checkInButton.Click
        Dim item As CItem = CType(itemsInRoomListBox.SelectedItem, CItem)
        If CheckIn(item) Then
            UpdateBindings()
        End If
    End Sub
End Class

Public Class CItem
    Public Sub New(ByVal item_id As UInteger, ByVal item_name As String)
        Me.m_id = item_id
        Me.m_name = item_name
    End Sub
    Private m_name As String
    Public Property Name() As String
        Get
            Return m_name
        End Get
        Set(ByVal value As String)
            m_name = value
        End Set
    End Property

    Private ReadOnly m_id As UInteger
    Public ReadOnly Property ID() As UInteger
        Get
            Return m_id
        End Get
    End Property

End Class 
```

# node.js - TimeZone on nodeJs using oAuth

> ID：15259327
> 
> 赞同：1
> 
> 时间：2013-03-06T22:25:33.643
> 
> 标签：node.js, oauth, express, tumblr

I am working with the tumbler API and I am using the express framework for node.js, but I have a problem using the tumblr oAuth. The problem is the difference in timezones.

How I can change my current timezone?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:33:45.873

您可以在调用任何日期函数之前设置 TZ 环境变量。

```
> process.env.TZ = 'Europe/Amsterdam'
'Europe/Amsterdam'
> d = new Date()
Wed Mar 06 2013 23:30:42 GMT+0100 (CET)
> d.toString()
'Wed Mar 06 2013 23:30:42 GMT+0100 (CET)'
> d.toUTCString()
'Wed, 06 Mar 2013 22:30:42 GMT' 
```

# perl - Perl Use of uninitialized value in addition (+) at.. WWW::Mechanize::Timed

> ID：15259328
> 
> 赞同：0
> 
> 时间：2013-03-06T22:25:46.550
> 
> 标签：perl, www-mechanize

**I have the following very simple piece of code:**

```
#!/usr/bin/perl

use strict;
use warnings;

use WWW::Mechanize::Timed;
my $ua = WWW::Mechanize::Timed->new();
my $url = 'www.stackoverflow.com';

$ua->get($url);    
print "Total time: " . $ua->client_total_time . "\n";
print "Elapsed time: " . $ua->client_elapsed_time . "\n"; 
```

**The error I am getting:**

When running the program I sometimes get the following error, it does not happen all the time, its seems to appear intermittently.

`Use of uninitialized value in addition (+) at /usr/local/share/perl/5.10.1/WWW/Mechanize/Timed.pm line 52.`

**Is there something obvious I am overlooking, as I cant understand why this error is occurring, let alone why it only happens sometimes?**

Your help is much appreciated, many thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:52:16.410

我相信问题在于

```
my $url = 'www.stackoverflow.com'; 
```

不是实际的 URL。这只是一个主机名。您是说您的程序有时可以在不指定`http://`方案的情况下运行吗？你需要

```
my $url = 'http://www.stackoverflow.com'; 
```

此外，您想检查返回代码`->get()`，或添加`autocheck => 1`到构造函数。::Mechanize 历史中的某个时刻成为默认设置，但我不知道您使用的是哪个版本。

# android - Android OutofMemory with ObjecOutputStream

> ID：15259329
> 
> 赞同：2
> 
> 时间：2013-03-06T22:25:56.133
> 
> 标签：android, garbage-collection, out-of-memory

I have created a client/server pair with two threads to send and receive objects, While it runs fine at the beginning I'm experiencing an OutofMemory error when it runs for a while, I was looking out how te garbage collector works in Android 2.3.4 and it seems that some objects are kept by the ObjectInputStream and ObjectOutputStream from being collected by the GC. I used the Memory Analysis Tool in Eclipse to find out where the memory leak is located and found that there is a IdentityHashMap object that keeps the reference to te data being sent and received. I will like to find out a way around this issue on how to release this data or how to remove the reference this object keeps on my data preventing it from being collected. The memory heap I'm working with is pretty big for a cell phone 64M, and if I try the same with big chunks of data it works fine, as long as I don't run it for very long.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:32:00.967

问：你在任何时候都在做“reset()”吗？

对象流会记住写入它们的每个对象，除非您重置它们。

# ruby-on-rails - Viewing the result that a query return with "puts"

> ID：15259330
> 
> 赞同：0
> 
> 时间：2013-03-06T22:25:57.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

I have a query something like this in my controller that I am passing it as JSON to JBuilder,etc.... But JBuilder shows nothing! it just shows { }

```
@students =  Students.top_students.joins(:program).where("programs.organization_id = ?", params[:id]).limit(10) 
```

So before it gets to there I just wanted to make sure it is getting the correct data, its joins are correct, etc.. So can I do that?

If I just say `puts @students` it will print something like, I want to see what is inside each of them.

```
#<Student:0x007fd33ebe57a8>
#<Student:0x007fd33ebe4d08>
#<Student:0x007fd33ebe3ea8> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:35:57.540

定义一个`to_s`方法`Student`，你的`puts`输出会更有用。我建议使用`inspect`：

```
def to_s
  inspect
end 
```

或者，您可以迭代`@students`并执行更多输出：

```
@students.each do |student|
  puts "Id: #{student.id}"
  puts "Name: #{student.name}"
  ...
end 
```

或者，如果您想保持简单，快速`collect`就可以了：

```
puts @students.collect(&:inspect) 
```

# objective-c - 更改为纵向模式时，UITableViewCells 使用自动布局水平滚动

> ID：15259332
> 
> 赞同：3
> 
> 时间：2013-03-06T22:26:02.137
> 
> 标签：objective-c, uitableview, horizontal-scrolling, autolayout

我正在创建一个主要是 UITableView 的屏幕，其中包含具有不同控件和布局的单元格。我让 tableview 工作得很好，直到我切换到允许 tableview 单元水平滚动的纵向模式。单元格不应该水平滚动；只能垂直。当我导航到屏幕并且我已经处于纵向模式时，它工作正常，甚至可以横向并返回纵向。

需要注意的一些事情是我正在使用 iPad、故事板、自动布局，并且 UITableViewCell 是自定义的并且没有笔尖（尽管当我尝试使用笔尖时它会做同样的事情）。所有控件和布局约束都以编程方式添加。我正在使用一个自定义视图控制器，里面有一个视图。在视图内部，我有 tableview 和工具栏。如果我删除视图，以便 tableview 直接位于自定义视图控制器下，它可以正常工作，但是我不能拥有工具栏。

这是我用来解决问题的测试代码：

```
// Remove all existing subviews
for(UIView *subView in self.contentView.subviews)
{
    [subView removeFromSuperview];
}

UILabel *testLabel = [[UILabel alloc] init];
testLabel.text = @"Test";
[testLabel setTranslatesAutoresizingMaskIntoConstraints:NO];
self.contentView addSubview:testLabel];

NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(testLabel);
NSString *format = [NSString stringWithFormat:@"V:|-[testLabel]-|"];

NSArray *constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:nil metrics:nil views:viewsDictionary];
//[self.contentView addConstraints:constraintsArray]; 
```

滚动按预期工作，直到我取消注释该行以添加约束。这段代码在我的自定义单元格的方法中，每次单元格出列时都会被调用。我尝试单独添加约束，而不使用视觉格式，但没有运气。我也做了一些研究，发现了从单元格中删除约束并将它们添加到 contentView 的代码，但这也没有帮助。

从横向模式更改为纵向模式时，我需要做些什么来防止单元格水平滚动？

更多信息：经过更多调试后，我发现表格视图的内容大小没有水平缩小。宽度保持在 1024。

# ruby-on-rails - Rails 3 中的用户视图是否有类似于 active admin 的 gem？

> ID：15259334
> 
> 赞同：0
> 
> 时间：2013-03-06T22:26:20.543
> 
> 标签：ruby-on-rails, activeadmin

只是好奇是否有类似于 ActiveAdmin 的 gem 用于在以 current_user 身份登录时查看数据。对于已经存在的任何列，拥有过滤器和排序非常好，如果我不必重新发明轮子，我不想这样做。

只是检查，真的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:49:39.147

并不是说我不幸遇到过。

但是，如果您只是在寻找一种方法来为一组数据提供一些交互性，`jquery-datatables-rails`gem 可能会满足您的需求（这实际上只是 datatables.net 中 datatables JS 库的 gem 包装器[）](http://datatables.net/)：

[https://github.com/rweng/jquery-datatables-rails](https://github.com/rweng/jquery-datatables-rails)

此外，这里有一个使用它的 railscast - [http://railscasts.com/episodes/340-datatables](http://railscasts.com/episodes/340-datatables)

希望有帮助！

# c# - 使泛型类型成为变量

> ID：15259344
> 
> 赞同：2
> 
> 时间：2013-03-06T22:26:50.810
> 
> 标签：c#, generics

```
var type = data.ClientBaseObject.GetType();
var newClientObject = GetDataContextedObject(type, data.ClientBaseObject);

private object GetDataContextedObject(Type type, object jobObject)
    {
        switch (type.Name.ToUpper())
        {
            case "JOBNUMBER":
                {
                    return GetObjectFromDataContext<JobNumber>(jobObject);
                }
            case "NA_HEADER":
                {
                    return GetObjectFromDataContext<NA_Header>(jobObject);
                }
        }
        return null;
    }

        private  object GetObjectFromDataContext<T>(object jobObject) where T: class, IJobID
        {
            var newObject = jobObject as T;
            return _dc.GetTable<T>().FirstOrDefault(j => j.JobID == newObject.JobID);
        } 
```

在上面的代码中，我想知道是否有一种方法可以使`GetObjectFromDataContext`into `GetObjectFromDataContext<type>`，而不必为每个类获取 type.Name 并为每个类创建一个案例。这可以做到吗？

如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:28:43.020

是否所有允许的类型都实现了一个通用接口？如果是这样，那么是的；更改`GetObjectFromDataContext`为接受基类型作为泛型参数。

但是，必须在编译时确定通用参数。否则该功能将如何提供类型安全？那时你也可以把所有东西都传递出去`object`。

编辑：根据您的更新。

我*必须*能够`Type`在运行时传入一个参数，然后不，你不能做你想做的事。由于这一切都发生在运行时，您将不得不有选择地调用通用版本。出于同样的原因，您不能使用[带](http://msdn.microsoft.com/en-us/library/bb310460.aspx)[参数](http://msdn.microsoft.com/en-us/library/bb310460.aspx)[的重载；`GetTable``Type`](http://msdn.microsoft.com/en-us/library/bb310460.aspx)你需要一个演员，因为它返回一个`ITable`.

您真的需要使用`Type`参数动态执行此操作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:29:44.957

你可以这样写：

```
private object GetDataContextedObject<T>(object jobObject)
{
    return GetObjectFromDataContext<T>(jobObject);
} 
```

# arrays - 如何在 Matlab 中将存储在单元格中的值打印为字符串（整个单词）？

> ID：15259353
> 
> 赞同：0
> 
> 时间：2013-03-06T22:27:13.430
> 
> 标签：arrays, string, matlab, printf

为了

```
A=[100;300;1000;240] 
```

和

```
B=cell(8,1) 
```

我将以下结果存储在 B

```
[100]
[300]
[1000]
[240]
[100;300;240]
[100;1000]
[300;1000]
[100;300;1000] 
```

我想打印这些以将输出显示为：

```
choose first
choose second
choose third
choose fourth
choose first or second or fourth
choose first or third
.
.
etc 
```

基本上，从数组`A=[100;300;1000;240]`中，我希望其中的每个值都由一个**字符串**表示，而**不是一个变量**。知道怎么做吗？

* * *

笔记 ：

对于我的代码，我希望用户在数组**A**中输入他们自己的数字，因此**A**的长度是可变的，可以大于 4。单元格**B**的大小也会根据公式而变化，因此它并不总是固定的尺寸为 8。

* * *

我也很欣赏一个简单的代码，不要太复杂（除非必要），因为我没有 matlab 的专业知识。更简单的代码可以帮助我理解和学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:32:59.740

对于映射，我只会使用[地图对象](http://www.mathworks.com/help/matlab/ref/containers.mapclass.html)

```
index_to_string = containers.Map(keySet,valueSet) 
```

在哪里

```
keySet = 1:20
valueSet = {'first'; 'second'; ...; 'twentieth'} 
```

如果`A`在打印前可用，您可以使用相同的`valueSet`，只需将其切成`A`.

```
index_to_string = containers.Map(A,valueSet(1:length(A))) 
```

例子：

```
G = cell(size(B))
for i = 1:length(B)
    out1 = 'choose ';
    if len(B{i}) == 1
        out1 = [out1, index_to_string(B{i})];
    else
        temp = B{i}
        for j=1:(length(temp)-1)
            out1 = [out1, index_to_string(temp(j)), ' or ' ];
        end
        out1 = [out1, index_to_string(temp(end))];
    end
    G{i} = out1
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:22:05.193

这是我的做法

```
function IChooseYouPikachu(Choices, Results)
% put in A for choices and B for results

%simple boolean to indicate whether a choice has been made already
answerChosen = 0;

for k = 1:length(Results)
    Response = 'choose';
    for m =  1:length(Choices)
        if any(Results{k} == Choices(m))
            if answerChosen
                Response = [Response ' or ' NumToOrd(m)];
            else
                answerChosen = 1;
                Response = [Response ' ' NumToOrd(m)];
            end
        end
    end
    fprintf('%s\n',Response);
    answerChosen = 0;
end

function ordinal = NumToOrd(number)
switch number
    case 1, ordinal = 'first';
    case 2, ordinal = 'second';
    case 3, ordinal = 'third';
    case 4, ordinal = 'fourth';
    otherwise, ordinal = 'out of index';
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:19:29.233

这个答案完全基于`JaredS's`答案。我刚刚澄清了你的疑惑。

把它写在一些m文件中。

```
Choices=A; Results=B;
%simple boolean to indicate whether a choice has been made already
answerChosen = 0;

for k = 1:length(Results)
    Response = 'choose';
    for m =  1:length(Choices)
        if any(Results{k} == Choices(m))
            if answerChosen
                Response = [Response ' or ' NumToOrd(m)];
            else
                answerChosen = 1;
                Response = [Response ' ' NumToOrd(m)];
            end
        end
    end
    fprintf('%s\n',Response);
    answerChosen = 0;
 end 
```

请把下面的函数写在一个单独的文件中，并把它放在与前面的m文件相同的目录下。然后你应该得到一个错误说：`"Undefined function 'NumToOrd' for input arguments of type 'double'."`

```
function ordinal = NumToOrd(number)
switch number
    case 1, ordinal = 'first';
    case 2, ordinal = 'second';
    case 3, ordinal = 'third';
    case 4, ordinal = 'fourth';
    otherwise, ordinal = 'out of index';
end 
```

# c# - 从数据网格中收集指定列和行中的数据

> ID：15259354
> 
> 赞同：2
> 
> 时间：2013-03-06T22:27:19.403
> 
> 标签：c#, wpf, datagrid

在我的 WPF 应用程序中，我正在数据网格中浏览数据库。我的代码的重点是将数据网格中选定的单元格内容存储到一些值列表中以供进一步操作。我的代码适用于 12 岁以下的选定项目，但对于更多项目，它会抛出`NullRefferenceException`“

> 你调用的对象是空的”。

谢谢你的帮助。

代码：

```
List<string> graphValue = new List<string>(dataGrid1.SelectedItems.Count); //create list 
IList someList = new ArrayList(dataGrid1.SelectedItems); //define Ilist
DataGridColumn dataGridCol = dataGrid1.Columns[listBox1.SelectedIndex]; 
//select column whom i wana collect data

if (dataGrid1.SelectedItems != null)    //when selection applied..
{
   for (int i = 0; i < dataGrid1.SelectedItems.Count; i++) //go row by row in selected column above
   {
      try
      {
         id = ((TextBlock)dataGridCol.GetCellContent(someList[i])).Text.ToString(); //save cell content to string
         graphValue.Add(id); //add value to Ilist
      }

      catch (Exception ex)
      { 
         System.Windows.MessageBox.Show(ex.Message, "error"); }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T10:48:14.323

### 这个简单的代码可能会对您有所帮助。首先，我们将遍历 Data-grid 的每条记录，然后通过提供 Row 和 Column 作为循环选择特定的单元格/列数据。

```
for(int row =0; row < dg_CountInventory.Rows.Count; row ++)
{
TextBlock b = dg_CountInventory.Columns[1].GetCellContent(dg_CountInventory.Items[row ]) as TextBlock;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:35:33.863

当你定义你`someList`的

```
IList someList = new ArrayList(dataGrid1.SelectedItems); 
```

您实际上创建了一个`ArrayList`所有值都是`null`. 之后，您尝试`GetCellContent()`使用它归档方法。

```
dataGridCol.GetCellContent(someList[i])).Text 
```

`someList[i]`可能`null`，这就是你得到的原因`NullRefferenceException`。在使用它之前添加这个数组的一些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:41:43.817

我在谷歌上搜索，找到了适合我的解决方案。我会在这里给其他人。如果有人能解释我在前面的代码中做错了什么，我将不胜感激。

这段代码对我有用：

```
if (dataGrid1.SelectedItems.Count > 0)    //when selection applied..
  {
   for (int i = 0; i < dataGrid1.SelectedItems.Count; i++) //go row by row in selected column above
      {
       try
         {
          System.Data.DataRowView selectedFile = (System.Data.DataRowView)dataGrid1.SelectedItems[i];
          string str = Convert.ToString(selectedFile.Row.ItemArray[listBox1.SelectedIndex]);
          graphValue.Add(str);
         }
       catch (Exception ex)
         { System.Windows.MessageBox.Show(ex.Message, "error"); }
      } 
```

现在我可以选择`DataGrid`超过 10 行。参考：http: [//www.codeproject.com/Questions/119505/Get-Selected-items-in-a-WPF-datagrid](http://www.codeproject.com/Questions/119505/Get-Selected-items-in-a-WPF-datagrid) 现在我真的很高兴，谢谢大家您的时间。

# exception - Windows 7 上的 C++ Builder 中的语音 API (SAPI) 浮点除法零

> ID：15259361
> 
> 赞同：3
> 
> 时间：2013-03-06T22:27:36.550
> 
> 标签：exception, text-to-speech, c++builder, sapi

我在 C++ Builder 中将以下代码用于盲人的 Text-To-Speech 应用程序控件（很可能在 Delphi 中可以使用类似的示例）。主窗体已`KeyPreview`检查属性以启用键 F11 预览以开始说话活动（聚焦）控件。代码原样有效，但存在一些问题。此示例在 C++ Builder 代码中，但根据我的发现，Delphi 遇到了同样的问题，我找到的解决方案是相同的。如果您有 Delphi 解决方案，请随时发布，反正它是相似的。

```
#include <sapi.h>
#include <WTypes.h>

//---------------------------------------------------------------------------
// Speak text string (synchronous function)
//---------------------------------------------------------------------------

bool SpeakText(UnicodeString Text)
{
ISpVoice* pVoice = NULL;

if (FAILED(::CoInitialize(NULL))) return false;

Word Saved8087CW = Default8087CW;                                               // Disable floating point division by zero exception caused by Speak
Set8087CW(0x133f);

HRESULT hr = CoCreateInstance(CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void **)&pVoice);
if (SUCCEEDED(hr))
    {
    //pVoice->SpeakCompleteEvent()
    //pVoice->SetSyncSpeakTimeout(1000);
    hr = pVoice->Speak(WideString(Text).c_bstr(), SPF_DEFAULT, NULL);
    pVoice->Release();
    pVoice = NULL;
    }

Set8087CW(Saved8087CW);

::CoUninitialize();
return true;
}

//---------------------------------------------------------------------------
void __fastcall TForm1::FormKeyUp(TObject *Sender, WORD &Key, TShiftState Shift)
{
UnicodeString Speaker;

if (Key == VK_F11)
    {
    if      (Screen->ActiveControl->InheritsFrom(__classid(TButton)))   { Speaker += "Button, "   + static_cast<TButton*>(Screen->ActiveControl)->Caption + "."; }
    else if (Screen->ActiveControl->InheritsFrom(__classid(TEdit)))     { Speaker += "Edit box, " + static_cast<TEdit*>(Screen->ActiveControl)->Text      + "."; }
    }

if (Speaker != "") SpeakText(Speaker);
}
//--------------------------------------------------------------------------- 
```

问题：

1.  如果我不使用该函数覆盖异常， pVoice->Speak 会导致**浮点除以零。**`Set8087CW`这只发生在 Windows 7（也可能是 Vista 和 Windows 8）上，但不会在同一程序（编译的 exe）中的 Windows XP 上发生。有没有不使用的解决方案`Set8087CW`？删除这些行将导致问题和异常。我有BCB2010。

2.  函数是同步的，在完成读取文本之前不会关闭或将控制权返回给程序。这是较长文本的问题。它还阻止程序事件。有没有办法让它异步或引入一个事件来定期检查 F11 键状态，如果再次按下 F11，它会停止读取并取消初始化对象？例如，每 300 毫秒（或每个单词后等）轮询一次按键 F11，如果按下，停止说话？还是线程运行？

3.  SAPI 是否有一些在各个站点上写入的内存泄漏？

4.  上面的代码可以用and`OleCheck`代替吗？`CoCreateInstance``CoUninitialize`

**Remy Lebeau 建议的寻求解决方案的人的更新：**

```
SavedCW = Get8087CW();
Set8087CW(SavedCW | 0x4);
hr = pVoice->Speak(WideString(Text).c_bstr(), SPF_DEFAULT | SPF_ASYNC, NULL);
pVoice->WaitUntilDone(-1); // Waits until text is done... if F11 is pressed simply go out of scope and speech will stop
Set8087CW(SavedCW); 
```

还可以在 CodeRage 4 会话中找到详细示例：http: [//cc.embarcadero.com/item/27264](http://cc.embarcadero.com/item/27264)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:04:02.853

1.  Vista中也确实发生了该错误。屏蔽浮点异常是唯一的解决方案。

2.  要使`Speak()`异步运行，您需要`SPF_ASYNC`在调用它时包含该标志。如果您需要检测异步说话何时结束，您可以使用`ISpVoice::WaitUntilDone()`, 或调用`ISpVoice::SpeakCompleteEvent()`并将返回的函数传递`HANDLE`给`WaitFor...()`函数族之一，例如`WaitForSingleObject().`

3.  其他网站谈论什么样的泄漏？

4.  不代替，不。 `OleCheck()`只检查一个值的`HRESULT`值，如果它是错误值则抛出异常。您仍然必须首先调用返回实际`HRESULT`值的 COM 函数。如果有的话，`OleCheck()`将成为替代品`SUCCEEDED()`。

对于您正在尝试的内容，我建议采用以下方法：

```
struct s8087CW
{
    Word Saved8087CW;

    s8087CW(Word NewCW)
    {
        Saved8087CW = Default8087CW;
        Set8087CW(NewCW);
        // alternatively, the VCL documentation says to use SetExceptionMask() instead of Set8087CW() directly...
    }

    ~s8087CW()
    {
        Set8087CW(Saved8087CW);
    }
};

//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent *Owner)
    : TForm(Owner)
{
    ::CoInitialize(NULL);
}

//---------------------------------------------------------------------------
__fastcall TForm1::~TForm1()
{
    if (pVoice) pVoice->Release();
    ::CoUninitialize();
}

//---------------------------------------------------------------------------
void __fastcall TForm1::FormKeyUp(TObject *Sender, WORD &Key, TShiftState Shift)
{
    if (Key == VK_F11)
    {
        TWinControl *Ctrl = Screen->ActiveControl;
        if (Ctrl)
        {
            TButton *btn;
            TEdit *edit;

            if ((btn = dynamic_cast<TButton*>(Ctrl)) != NULL)
                SpeakText("Button, " + btn->Caption);

            else if ((edit = dynamic_cast<TEdit*>(Ctrl)) != NULL)
                SpeakText("Edit box, " + edit->Text);
        }
    }
}

//---------------------------------------------------------------------------
ISpVoice* pVoice = NULL;

bool __fastcall TForm1::SpeakText(const String &Text)
{
    s8087CW cw(0x133f);

    if (!pVoice)
    {
        if (FAILED(CoCreateInstance(CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void **)&pVoice)))
            return false;
    }

    SPVOICESTATUS stat;
    pVoice->GetStatus(&stat, NULL);
    while (stat.dwRunningState == SPRS_IS_SPEAKING)
    {
        ULONG skipped;
        pVoice->Skip(L"SENTENCE", 1000, &skipped);
        pVoice->GetStatus(&stat, NULL);
    }

    return SUCCEEDED(pVoice->Speak(WideString(Text).c_bstr(), SPF_ASYNC, NULL));
} 
```

# php - PHP数组修改

> ID：15259366
> 
> 赞同：0
> 
> 时间：2013-03-06T22:27:51.497
> 
> 标签：php, arrays

我有一个包含二维数组的文件，每个嵌套数组的第一项的形式为 id=>2。

我想将数组提取到另一个文件中，找到数组中的最后一个 id，向其中添加一个，创建一个包含该新 id 术语的新数组元素，将其添加到数组中，然后将编辑后的数组保存回原始文件.

这个看似简单的任务让我打败了。只要在原始文件中完成处理，我就可以完成所有工作，并且我可以使用 file_get_contents() 将一个文件的内容放入另一个文件中。但是，如果我尝试使用我提取的任何内容，例如数组名​​称，php 会告诉我它是未定义的。

如果有人能给我一个关于如何做到这一点的指针，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:32:03.487

```
include 'thefile.php';
$id = 0;
foreach($thearray as $item){
   if($item['item_id'] > $id) $id = $item['item_id'];
}
$id++;
$thearray[] = array('item_id' => $id);
file_put_contents('thefile.php','<?php $thearray = '.var_export($thearray, true).';'); 
```

# asp.net-mvc - 通过 ajax json ASP.MVC 控制器下载文件不起作用。没有得到 MIME 响应。只是在窗口中呈现为文本

> ID：15259368
> 
> 赞同：1
> 
> 时间：2013-03-06T22:28:01.913
> 
> 标签：asp.net-mvc, json, jquery

当我尝试通过 ajax json MVC 控制器下载文件时不起作用。没有得到 MIME 响应。只是在窗口中呈现为文本。我尝试了论坛中提到的所有选项，但没有运气。请帮忙。控制器发回正确的文件，但我认为 javascript ajax 将其呈现为 json。当我单击下载按钮时，我想获得文件的“保存”或“打开”文件响应标题提示。

```
 $("#btnDownloadEDIFile").bind("click", function (e)
    {
        e.preventDefault();
        displayAjaxLoading(true);

        $.ajax({
            type: 'POST',
            dataType: "json",
            async: false,
            contentType: 'application/json; charset=utf-8',
            url: '@Url.Action(MVC.AccountsPayable.StagedInvoice.DownloadFile())',
            data: JSON.stringify({ StagedFileId: $('#StagedFileId').val() , FilePath:      $('#FilePath').val() , SourceFileName: $('#SourceFileName').val() }),
            success: function (result) {
                //alert(result);
                if (result != "") {
                    displayNotoficationError([result]);
                }
                else {

                }

            },

            error: function (result) {
                //debugger;
                alert(result);
                displayNotoficationError([result]);
            }
        });
    }); 
```

当我执行此操作时，它会在窗口上呈现为文本，并且还会在 javascript 中引发 ajax 错误。

这是控制器代码

```
 public virtual ActionResult DownloadFile(Nullable<int> StagedFileId, string FilePath, string SourceFileName)
    {

        string _FullPath = _WebApplicationConfiguration.SourceStagedInvoiceFileFolder + FilePath;
        if (System.IO.File.Exists(_FullPath))
        {

            HttpContext.Response.ClearContent();
            HttpContext.Response.ContentType = "application/octet-stream";

            HttpContext.Response.AddHeader("content-disposition",

                                                   "attachment; filename=" + SourceFileName);

            HttpContext.Response.BinaryWrite(System.IO.File.ReadAllBytes(_FullPath));
            return File(_FullPath, "text/octet-stream", SourceFileName);

        }
        else
        {

            return Content("");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:31:45.770

我知道这并不完全是您想要做的，但我对完全不同的方法感到非常满意。无论文件如何链接到或使用什么浏览器，此方法都会强制下载/打开对话框。您所要做的就是确保您希望此行为的所有文件都必须位于指定的文件夹中，在本例中为 /Library。

将此添加到经典 Asp.Net 或 MVC 中的 Global.asax 文件中。

```
protected void Application_BeginRequest()
{
    if (Request.Path.Contains("/Library/") && (File.Exists(Request.PhysicalPath)))
    {
        var fileInfo = new FileInfo(Request.PhysicalPath);

        Response.Clear();
        Response.TransmitFile(Request.Path);
        Response.AddHeader("Content-Disposition", "attachment;filename=" + fileInfo.Name);
        Response.AddHeader("Content-Length", fileInfo.Length.ToString());
        Response.Flush();
        Response.End();
    }
} 
```

我从这个网站得到了这个想法，但我找不到给予信用的链接。对不起。

# json.net - 如何添加字典 到现有的 JSON.Net 的 JObject？

> ID：15259379
> 
> 赞同：26
> 
> 时间：2013-03-06T22:28:42.773
> 
> 标签：json.net

我有一个通过解析一些 JSON 文本创建的 JObject（使用 JSON.Net）。我直接操作，在这个 JObject 的顶层添加键。当我添加的值是一个字符串时，我没有问题：

```
json["newkey"] = "New Value"; // works 
```

但如果我能弄清楚如何添加字典，我会被诅咒的，例如：

```
Dictionary<string,string> dict = new Dictionary<string,string>();
dict["one"] = "1";
dict["two"] = "2";
json["dict"] = dict;          // fails 
```

我已经做了大量的谷歌搜索和阅读 JSON.Net 文档，但一切似乎都倾向于将 JSON 文本转换为 JObject，或者使用序列化将 .NET 对象作为 JSON 文本编写。或者使用一些花哨的 LINQ 语句来处理复杂对象的各种事情......

我已经尝试过这些，但都没有奏效：

```
json["dict"] = new JObject(dict);
json["dict"] = new JObject((Dictionary<string,string>)dict);
json["dict"] = new JArray(dict);  // desperation sets in :)
json["dict"] = (JObject)dict;     // please dear god let this work 
```

我遇到的大多数最新错误是：

**无法确定 System.Collections.Generic.KeyValuePair`2[System.String,System.String] 类型的 JSON 对象类型。**

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-23T14:06:33.090

我相信你正在寻找这样的东西：

```
json["dict"] = JObject.FromObject(dict); 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-03-25T19:55:44.467

你可以使用一个绝望的“hack”，它并不漂亮（做两次同样的事情）但它有效:)

```
 json["dict"] = JObject.Parse(JsonConvert.SerializeObject(dict)); 
```

# javascript - 延迟 CreateJS 动画时间线

> ID：15259381
> 
> 赞同：1
> 
> 时间：2013-03-06T22:28:43.077
> 
> 标签：javascript, flash, animation, delay, createjs

我一直在使用 Swiffy 很容易地输出 .fla 文件，但后来有人告诉我，如果在 iPad 上以横向模式查看，显示器会在项目的一半上交替“闪烁”白色。非常奇怪的行为，我无法在任何其他设备上复制。

所以，我开始尝试使用 CreateJS 来解决这个问题。我这个时候的JS只知道编辑别人开发的代码就够了，所以到现在为止我的效率很低。

我已经做到了这一点：

```
/* js
this.stop();
var t=setTimeout(function(){(this.play())}, 1000);
*/

or

/* js
this.stop();
setTimeout(this.play(), 1000);
*/ 
```

我无法让动画记住超时，我尝试了许多不同的变体来尝试让一些魔法发生。它所做的只是立即加载下一帧，它根本不会暂停。我在哪里错了？

这是原始的动作脚本：

```
stop();

var shortTimer:Timer=new Timer(1000); 
shortTimer.addEventListener(TimerEvent.TIMER, timerN1); 
shortTimer.start(); 

function timerN1(e:TimerEvent):void{ 
    play(); 
    shortTimer.reset(); 
} 
```

任何帮助都将不胜感激，因为我自己在几周的休息时间都无法解决这个问题，而且我的客户变得越来越生气。更像是一个设计师，就编程而言仍然非常未受过教育。同样，在这一点上，即使是建议也会非常有帮助。好像破解不了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:39:30.107

这种语法更正确：

```
 /* js
this.stop();
var t=setTimeout(function(){(this.play())}, 1000);
*/ 

```

但是，您可能会发现“this”是 Window，而不是调用它的 MovieClip。您可以通过使用本地引用（在本例中为“_this”）来解决此问题。

```
 /* js
this.stop();
var _this = this;
var t=setTimeout(function(){
    console.log(this, _this);
    _this.play();
}, 1000);
*/ 

```

您可以通过查看控制台来测试它，并查看“this”和“_this”之间的区别。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:11:04.310

您能否发布更多您正在使用的代码？您是否尝试过使用 onAnimationEnd 函数：

```
var _this = this;

_this.onAnimationEnd = function() {
    _this.stop();
    setTimeout(function(){
       _this.play();
    }, 1000)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T16:09:38.370

试试这个让你的作用域在你的`setTimeout`函数中保持活力：

```
sprite.on('animationend', function(event) {
    event.target.stop();
    setTimeout(animationend.bind(event.target), 1000);
});

function animationend() {
    this.gotoAndPlay('run');
} 
```

通过使用，`.bind()`您可以将对象作为被调用函数的范围传递。[更多信息在这里](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/bind)。

# html - 将 CSS 填充/边距添加到 Div

> ID：15259382
> 
> 赞同：1
> 
> 时间：2013-03-06T22:28:43.243
> 
> 标签：html, css, css-float

我正在尝试将`padding: 16px 0;` 3 个 div 放在彼此左侧浮动，但我很难做到这一点。

**示例：** [http ://codepen.io/anon/pen/ifpAs](http://codepen.io/anon/pen/ifpAs)

`border-bottom: medium double red;`应该在 section-one-widgets 下方 16px 。

为什么这不起作用，有没有办法做到这一点而不针对特定的 div ID，例如 #search、#logo、#social 等，因为以后可能会放置更多小部件？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:32:07.593

```
#section-one:after {
  content: "";
  clear: both;
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:33:03.110

[http://codepen.io/anon/pen/eqJBg](http://codepen.io/anon/pen/eqJBg)

由于所有三个内部 div 都是浮动的，因此它们会从布局中移除，并且您的容器 div 只会获得 16 像素的高度。在其中添加一个 clear 使其可以按您的预期工作。类似于由许多重置样式表实现的 clearfix。

[编辑，因为我们不喜欢仅链接的答案]

HTML

```
<div id="section-one">
    ...
    <div class="clr"></div>
</div> <!--end #section-one--> 
```

CSS

```
.clr {
  clear:both; 
} 
```

# jquery - 将上一个/下一个按钮添加到针对 DIVS 的水平内容滚动器

> ID：15259387
> 
> 赞同：1
> 
> 时间：2013-03-06T22:29:00.523
> 
> 标签：jquery, button, navigation, cycle, horizontal-scrolling

我已经为 div 上的一些滚动实现了[jQuery Custom Scroller](http://manos.malihu.gr/jquery-custom-content-scroller/)，这很好用。我什至使用平滑滚动来水平滚动到某些 DIV，但我的问题是我想要一个下一个和上一个导航按钮，但我无法在任何地方找到它。

下面是我的 HTML 和 jQuery。预先感谢

```
<div id="source-container">
        <div class="container-inner">
                <div class="source-item item one current" id="the-cedarburg">
                    <div class="source-slide-title">
                        <h2>the cedarburg</h2>
                    </div>
                </div>
                <div class="source-item item two"  id="our-farm">

                  </div>

                </div>
                <div class="source-item item three"  id="our-rooibos">

                </div>
                <div class="source-item item four"  id="our-process">

                </div>
                <div class="source-item item five"  id="our-innovation">

                  </div>

                </div>
                <div class="source-item item six">

                </div>
                <div class="source-item item seven">

                </div>
                <div class="source-item item eight">

                </div>
                <div class="source-item item nine">

                </div>
                <div class="source-item item ten">

                </div>
                <div class="source-item item eleven">

                </div>
                <div class="source-item item twelve">

                </div>
                <div class="source-item item thirteen">

                </div>
                <div class="source-item item fourteen">

                </div>
                <div class="source-item item fifteen">

                </div>
                <div class="source-item item sixteen">

                </div>
                <div class="source-item item seventeen">

                </div>
                <div class="source-item item eighteen">

                </div>
                <div class="source-item item nineteen" >

                </div>
                <div class="source-item item twenty">

                </div>
                <div class="source-item item twentyone">

                </div>
                <div class="source-item item twentytwo">

                </div>
            </div>
    </div>
 </div> 
```

**CSS：**

```
#source-container{
    overflow-x: hidden;
    overflow-y: hidden;
}

.source-item{
float: left;
display: inline-block;
background-repeat:no-repeat;
background-size:cover;
background-position: center;
 -moz-background-size: cover;
}

#source-container .one{background-image:url(images/source/1-the-cedarberg.jpg);}

#source-container .two{background-image:url(images/source/2-the-cedarberg.jpg);}

#source-container .three{background-image:url(images/source/3-the-cedarberg.jpg);}

#source-container .four{background-image:url(images/source/4-the-cedarberg.jpg);}

#source-container .five{background-image:url(images/source/5-the-cedarberg.jpg);}

#source-container .six{background-image:url(images/source/6-the-cedarberg.jpg);}

#source-container .seven{background-image:url(images/source/2-our-farm.jpg);}

#source-container .eight{background-image:url(images/source/1-our-farm.jpg);}

#source-container .nine{background-image:url(images/source/3-our-farm.jpg);}

#source-container .ten{background-image:url(images/source/4-our-farm.jpg);}

#source-container .eleven{background-image:url(images/source/1-our-rooibos.jpg);}

#source-container .twelve{background-image:url(images/source/6-the-cedarberg.jpg);}

#source-container .thirteen{background-image:url(images/source/1-the-cedarberg.jpg);}

#source-container .fourteen{background-image:url(images/source/2-the-cedarberg.jpg);}

#source-container .fifteen{background-image:url(images/source/3-the-cedarberg.jpg);}

#source-container .sixteen{background-image:url(images/source/4-the-cedarberg.jpg);}

#source-container .seventeen{background-image:url(images/source/5-the-cedarberg.jpg);}

#source-container .eighteen{background-image:url(images/source/6-the-cedarberg.jpg);}

#source-container .nineteen{background-image:url(images/source/1-the-cedarberg.jpg);}

#source-container .twenty{background-image:url(images/source/2-the-cedarberg.jpg);}

#source-container .twentyone{background-image:url(images/source/3-the-cedarberg.jpg);}

#source-container .twentytwo{background-image:url(images/source/4-the-cedarberg.jpg);}

.mCSB_dragger_bar{box-sizing:border-box;}

.source-item{border-right:5px solid #e1001a; border-left:5px solid #3c1c11;} 
```

**脚本：**

```
<script>
$(function(){
 $('.container-inner').css({'width':(jQuery(window).width())*22+'px'});
    $(window).resize(function(){
        $('.container-inner').css({'width':(jQuery(window).width())*22+'px'});
    });
});

$(document).ready(function(e) {
$("#source-container").mCustomScrollbar({
                    horizontalScroll:true,
                    mouseWheelPixels: 500,
                    autoDraggerLength: false,
                    callbacks:{
                        onScroll:function(){ 
                            $("."+this.attr("id")+"-pos").text(mcs.left);
                        }
                    }
                });
});

$(function(){
 $('#source-container').css({'height':(jQuery(window).height())/100*80+'px'});
    $(window).resize(function(){
        $('#source-container').css({'height':(jQuery(window).height())/100*80+'px'});
    });
});

$(function(){
 $('.source-item').css({'width':(jQuery(window).width())+'px'});
    $(window).resize(function(){
        $('.source-item').css({'width':(jQuery(window).width())+'px'});
    });
});

$(function(){
$('.source-item').css({'height':($('#source-container').height())+'px'});
    $('#source-container').resize(function(){
        $('#source-item').css({'height':($('#source-container').height())+'px'});
    });
});
$(".output a[rel~='_mCS_2_scrollTo']").click(function(e){
                    e.preventDefault();

                    $("#source-container").mCustomScrollbar("scrollTo",$(this).attr("href"));
});
$('ul li a').on('click', function() {  
    $('ul li a.active').removeClass('active');
    $(this).addClass('active');    
});

$('.source-slide-dropdown').on('click', function() {  
    $('.source-slide-dropdown').css('border-bottom-right-radius','0px');  

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:56:12.043

将“Next”和“Prev”按钮连接到插件的 scrollTo 方法怎么样？从您提供的文档链接中，您似乎可以出于某种原因滚动到给定 ID 的元素（要求每个元素都有一个 id 而不是使用元素索引滚动）：

```
var elID="#el-1";
$(".content").mCustomScrollbar("scrollTo",elID); 
```

在滚动条中获取当前项目的支持不多，因此您可能必须自己管理（通过可以通过滚动或单击下一步/上一个按钮更新的索引）并使用该方法上面滚动到下一个 div。

我已经使用常规滚动器（而不是插件）为此做了一个[小提琴](http://jsfiddle.net/nPF6F/9/)。这是它的javascript源代码：

```
var currentElement = $("#wrapper > div:nth-child(2)");
var onScroll = function () {
    //get the current element
    var container = $("#source-container");
    var wrapper = $("#wrapper");
    var children = wrapper.children();
    var position = 0;
    for (var i = 0; i < children.length; i++) {
        var child = $(children[i]);
        var childLeft = container.offset().left < child.offset().left;
        if (childLeft) {
            currentElement = child;
            console.log(currentElement)
            return;
        }
    }
}

var indexClick = function () {
    console.log($("#inputScrollIndex").val())
    var index = parseInt($("#inputScrollIndex").val(), 10) - 1;
    if (index < 1) {
        index = 0;
    }
    console.log(index);
    scrollToIndex(index);
}

var scrollToIndex = function (index) {
    var element = $($("#wrapper").children()[index]);
    scrollToElement(element);
}

var scrollToElement = function ($element) {
    var container = $("#source-container");
    var wrapper = $("#wrapper");
    var children = wrapper.children();
    var width = 0;
    for (var i = 0; i < children.length; i++) {
        var child = $(children[i]);
        if (child.get(0) == $element.get(0)) {
            if (i == 0) {
                width = 0;
            }
            container.animate({
                scrollLeft: width
            }, 100);
            onScroll();
        }
        if (child.next().length > 0) {
            //make sure we factor in borders/padding/margin in height
            width += child.next().offset().left - child.offset().left
        } else {
            width += child.width();
        }
    }
}

var next = function (e) {
    scrollToElement(currentElement);
}

var prev = function (e) {
    var container = $("#source-container");
    if (currentElement.prev().length > 0) {
        if (container.offset().left == currentElement.prev().offset().left) {
            currentElement = currentElement.prev().prev().length > 0 ? currentElement.prev().prev() : currentElement.prev();
        } else {
            currentElement = currentElement.prev();
        }
    }
    scrollToElement(currentElement);
}

$("#source-container").scroll(onScroll);
$("#scrollIndex").click(indexClick);
$("#next").click(next);
$("#prev").click(prev); 
```

# java - 如何让生成的 karaf kar 文件包含在 maven 程序集中？

> ID：15259391
> 
> 赞同：1
> 
> 时间：2013-03-06T22:29:04.293
> 
> 标签：java, maven, apache-karaf

试图让 maven 程序集插件包含我的 kar 文件。

下面的内容适用于“war”或“jar”，但不适用于“kar”。

```
<dependencySets>
    <dependencySet>
        <includes>
            <include>${project.groupId}:*:kar:${project.version}</include>
        </includes>
        <useProjectArtifact>true</useProjectArtifact>
        <outputDirectory>karaf/deploy</outputDirectory>
        <unpack>false</unpack>
    </dependencySet>
</dependencySets> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-12T09:34:27.167

尝试将 kar 文件添加为 pom.xml 中的依赖项。

# windows - 结合 p4 describe 和 p4 changes 命令以获得所需的结果

> ID：15259392
> 
> 赞同：2
> 
> 时间：2013-03-06T22:29:10.467
> 
> 标签：windows, perforce

问题是，使用`p4 changes`命令，您可以为在该时间段内提交的所有更改列表指定时间范围，例如

```
p4 changes -l //depot/main/Project/src/...@2013/02/20,@now" 
```

将为您提供有关提交的每个更改列表的详细信息，但不会为您提供包含在此更改列表中的文件名。

和

```
p4 describe 6254561 
```

命令将为您提供有关 6254561 更改列表的所有信息，包括受影响的文件，但您不能为所有更改列表指定时间范围。

有机会以某种方式组合这些命令吗？或者也许有命令可以满足我的需要，但我只是不知道？我只需要获取有关每个更改列表、此更改列表中受影响的文件以及项目路径和时间范围的所有描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:38:33.890

如果您使用的是 Mac 或 Linux，则可以将这两个命令连接在一起以获得所需的输出：

```
p4 changes -l //depot/main/Project/src/...@2013/02/20,@now" | cut -d " " -f 2 | xargs p4 describe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:45:55.950

像这样的事情应该指向正确的方向：

```
for /f "tokens=2" %x in ('p4 changes //depot/main/Project/src/...@2013/02/20^,@now') do @(p4 describe -s %x & echo --------) 
```

注意那里的逃跑`,`者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:06:56.470

你应该选择一种你觉得舒服的脚本语言：Perl、Python、Ruby 等。所有这些脚本语言都有功能齐全的 Perforce 库，并附带了很多关于如何编写这些简单脚本的示例。

花几分钟时间熟悉您选择的脚本语言，以及它如何与 Perforce 交互，当您准备好编写更复杂和详细的脚本时，将获得更好的工具开发体验满足您的工作需要。

看这里开始：[http ://www.perforce.com/product/components/apis](http://www.perforce.com/product/components/apis)

# ruby-on-rails - rmagick“安装”并且无法找到 gem 的内容

> ID：15259393
> 
> 赞同：1
> 
> 时间：2013-03-06T22:29:13.573
> 
> 标签：ruby-on-rails, ruby, imagemagick, osx-lion, rmagick

这里有点菜鸟，对不起，如果这已经解决了，但我在任何地方都找不到这个。

将 OSX 10.7 与 Jewelry Box、Ruby 1.8 和 Rails 3 一起使用。

花了几个小时浏览在其他网站上找到的修复程序和 SO，我一直在前进和后退，试图获得一个无法通过 rmagick 安装的捆绑包。我已经解决了没有在正确位置找到 magickwand.h 的问题，只是发现它变得更好了。

```
Elliott:trunk jitscaleusa$ sudo gem install rmagick
Password:
Building native extensions.  This could take a while...
Successfully installed rmagick-2.13.2
Installing ri documentation for rmagick-2.13.2

No definition for Magick_colors

No definition for Magick_fonts

No definition for Magick_init_formats

No definition for Magick_limit_resource

No definition for Magick_set_cache_threshold

No definition for Magick_set_log_event_mask

No definition for Magick_set_log_format

No definition for Image_initialize

No definition for Image_combine

No definition for Image_constitute

No definition for Image__load

No definition for Image_capture

No definition for Image_ping

No definition for Image_read

No definition for Image_read_inline

No definition for Image_from_blob

No definition for Image_adaptive_blur

No definition for Image_adaptive_blur_channel

No definition for Image_adaptive_resize

No definition for Image_adaptive_sharpen

No definition for Image_adaptive_sharpen_channel

No definition for Image_adaptive_threshold

No definition for Image_add_compose_mask

No definition for Image_add_noise

No definition for Image_add_noise_channel

No definition for Image_add_profile

No definition for Image_affine_transform

No definition for Image_remap

No definition for Image_alpha

No definition for Image_alpha_q

No definition for Image_aref

No definition for Image_aset

No definition for Image_auto_gamma_channel

No definition for Image_auto_level_channel

No definition for Image_auto_orient

No definition for Image_auto_orient_bang

No definition for Image_properties

No definition for Image_bilevel_channel

No definition for Image_black_threshold

No definition for Image_blend

No definition for Image_blue_shift

No definition for Image_blur_image

No definition for Image_blur_channel

No definition for Image_border

No definition for Image_border_bang

No definition for Image_change_geometry

No definition for Image_change_geometry

No definition for Image_changed_q

No definition for Image_channel

No definition for Image_compare_channel

No definition for Image_check_destroyed

No definition for Image_compare_channel

No definition for Image_channel_depth

No definition for Image_channel_extrema

No definition for Image_channel_mean

No definition for Image_charcoal

No definition for Image_chop

No definition for Image_clut_channel

No definition for Image_clone

No definition for Image_color_flood_fill

No definition for Image_color_histogram

No definition for Image_colorize

No definition for Image_colormap

No definition for Image_composite

No definition for Image_composite_bang

No definition for Image_composite_affine

No definition for Image_composite_channel

No definition for Image_composite_channel_bang

No definition for Image_composite_mathematics

No definition for Image_composite_tiled

No definition for Image_composite_tiled_bang

No definition for Image_compress_colormap_bang

No definition for Image_contrast

No definition for Image_contrast_stretch_channel

No definition for Image_convolve

No definition for Image_convolve_channel

No definition for Image_copy

No definition for Image_crop

No definition for Image_crop_bang

No definition for Image_cycle_colormap

No definition for Image_decipher

No definition for Image_define

No definition for Image_deskew

No definition for Image_delete_compose_mask

No definition for Image_delete_profile

No definition for Image_despeckle

No definition for Image_destroy_bang

No definition for Image_destroyed_q

No definition for Image_difference

No definition for Image_dispatch

No definition for Image_displace

No definition for Image_display

No definition for Image_dissolve

No definition for Image_distort

No definition for Image_distortion_channel

No definition for Image__dump

No definition for Image_dup

No definition for Image_each_profile

No definition for Image_edge

No definition for Image_emboss

No definition for Image_encipher

No definition for Image_enhance

No definition for Image_equalize

No definition for Image_equalize_channel

No definition for Image_erase_bang

No definition for Image_excerpt

No definition for Image_excerpt_bang

No definition for Image_export_pixels

No definition for Image_export_pixels_to_str

No definition for Image_extent

No definition for Image_find_similar_region

No definition for Image_flip

No definition for Image_flip_bang

No definition for Image_flop

No definition for Image_flop_bang

No definition for Image_frame

No definition for Image_function_channel

No definition for Image_gamma_channel

No definition for Image_gamma_correct

No definition for Image_gaussian_blur

No definition for Image_gaussian_blur_channel

No definition for Image_get_pixels

No definition for Image_gray_q

No definition for Image_gray_q

No definition for Image_histogram_q

No definition for Image_implode

No definition for Image_import_pixels

No definition for Image_init_copy

No definition for Image_inspect

No definition for Image_level2

No definition for Image_level_channel

No definition for Image_level_colors

No definition for Image_levelize_channel

No definition for Image_linear_stretch

No definition for Image_liquid_rescale

No definition for Image_magnify

No definition for Image_magnify_bang

No definition for Image_map

No definition for Image_marshal_dump

No definition for Image_marshal_load

No definition for Image_mask

No definition for Image_matte_flood_fill

No definition for Image_median_filter

No definition for Image_minify

No definition for Image_minify_bang

No definition for Image_modulate

No definition for Image_monochrome_q

No definition for Image_motion_blur

No definition for Image_negate

No definition for Image_negate_channel

No definition for Image_normalize

No definition for Image_normalize_channel

No definition for Image_oil_paint

No definition for Image_opaque

No definition for Image_opaque_channel

No definition for Image_opaque_q

No definition for Image_ordered_dither

No definition for Image_paint_transparent

No definition for Image_palette_q

No definition for Image_pixel_color

No definition for Image_polaroid

No definition for Image_posterize

No definition for Image_preview

No definition for Image_profile_bang

No definition for Image_quantize

No definition for Image_quantum_operator

No definition for Image_radial_blur

No definition for Image_radial_blur_channel

No definition for Image_raise

No definition for Image_random_threshold_channel

No definition for Image_recolor

No definition for Image_reduce_noise

No definition for Image_resize

No definition for Image_resize_bang

No definition for Image_roll

No definition for Image_rotate

No definition for Image_rotate_bang

No definition for Image_sample

No definition for Image_sample_bang

No definition for Image_scale

No definition for Image_scale_bang

No definition for Image_segment

No definition for Image_selective_blur_channel

No definition for Image_separate

No definition for Image_sepiatone

No definition for Image_set_channel_depth

No definition for Image_shade

No definition for Image_shadow

No definition for Image_sharpen

No definition for Image_sharpen_channel

No definition for Image_shave

No definition for Image_shave_bang

No definition for Image_shear

No definition for Image_sigmoidal_contrast_channel

No definition for Image_signature

No definition for Image_sketch

No definition for Image_solarize

No definition for Image_spaceship

No definition for Image_sparse_color

No definition for Image_splice

No definition for Image_spread

No definition for Image_stegano

No definition for Image_stereo

No definition for Image_strip_bang

No definition for Image_store_pixels

No definition for Image_swirl

No definition for Image_sync_profiles

No definition for Image_texture_flood_fill

No definition for Image_threshold

No definition for Image_thumbnail

No definition for Image_thumbnail_bang

No definition for Image_tint

No definition for Image_to_color

No definition for Image_to_blob

No definition for Image_transparent

No definition for Image_transparent_chroma

No definition for Image_transpose

No definition for Image_transpose_bang

No definition for Image_transverse

No definition for Image_transverse_bang

No definition for Image_trim

No definition for Image_trim_bang

No definition for Image_undefine

No definition for Image_unique_colors

No definition for Image_unsharp_mask

No definition for Image_unsharp_mask_channel

No definition for Image_vignette

No definition for Image_watermark

No definition for Image_wave

No definition for Image_wet_floor

No definition for Image_white_threshold

No definition for Image_write

No definition for ImageList_remap

No definition for ImageList_animate

No definition for ImageList_append

No definition for ImageList_average

No definition for ImageList_coalesce

No definition for ImageList_composite_layers

No definition for ImageList_deconstruct

No definition for ImageList_display

No definition for ImageList_flatten_images

No definition for ImageList_fx

No definition for ImageList_map

No definition for ImageList_montage

No definition for ImageList_morph

No definition for ImageList_mosaic

No definition for ImageList_optimize_layers

No definition for ImageList_quantize

No definition for ImageList_to_blob

No definition for ImageList_write

No definition for Draw_annotate

No definition for Draw_clone

No definition for Draw_composite

No definition for Draw_draw

No definition for Draw_dup

No definition for Draw_get_type_metrics

No definition for Draw_get_multiline_type_metrics

No definition for Draw_initialize

No definition for Draw_init_copy

No definition for Draw_inspect

No definition for Draw_marshal_dump

No definition for Draw_marshal_load

No definition for Draw_primitive

No definition for DrawOptions_initialize

No definition for Pixel_from_color

No definition for Pixel_from_HSL

No definition for Pixel_from_hsla

No definition for Pixel_spaceship

No definition for Pixel_case_eq

No definition for Pixel_eql_q

No definition for Pixel_initialize

No definition for Pixel_init_copy

No definition for Pixel_clone

No definition for Pixel_dup

No definition for Pixel_fcmp

No definition for Pixel_hash

No definition for Pixel_intensity

No definition for Pixel_marshal_dump

No definition for Pixel_marshal_load

No definition for Pixel_to_color

No definition for Pixel_to_HSL

No definition for Pixel_to_hsla

No definition for Pixel_to_s

No definition for Montage_initialize

No definition for rm_no_freeze

No definition for Info_initialize

No definition for Info_channel

No definition for rm_no_freeze

No definition for Info_define

No definition for Info_aset

No definition for Info_aref

No definition for Info_undefine

No definition for PolaroidOptions_initialize

No definition for GradientFill_initialize

No definition for GradientFill_fill

No definition for TextureFill_initialize

No definition for TextureFill_fill

No definition for ImageMagickError_initialize

No definition for Enum_initialize

No definition for Enum_to_s

No definition for Enum_to_i

No definition for Enum_spaceship

No definition for Enum_case_eq
/Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/rdoc/rdoc.rb:280: warning: conflicting chdir during another chdir block
/Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/rdoc/rdoc.rb:287: warning: conflicting chdir during another chdir block
Done installing documentation for rmagick after 3 seconds
1 gem installed 
```

好的，安装..？缺少很多定义。事情正在发生。让我们看看内容是否达到了我的预期。

```
Elliott:trunk jitscaleusa$ gem contents rmagick
Unable to find gem 'rmagick' in default gem paths

Directories searched:
/Users/jitscaleusa/.rvm/gems/ruby-1.8.7-p371/specifications
/Users/jitscaleusa/.rvm/gems/ruby-1.8.7-p371@global/specifications
Elliott:trunk jitscaleusa$ bundle install
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Using rake (10.0.3) 
Using Ascii85 (1.0.2) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.4) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.11) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using activerecord-import (0.3.1) 
Using activeresource (3.2.11) 
Using addressable (2.3.2) 
Using authlogic (3.1.3) 
Using cancan (1.6.8) 
Using highline (1.6.15) 
Using net-ssh (2.6.2) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.13.5) 
Using coffee-script-source (1.3.3) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.6) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.11) 
Using coffee-rails (3.2.2) 
Using cookiejar (0.3.0) 
Using country-select (1.1.1) 
Using cron-spec (0.1.2) 
Using daemons (1.1.9) 
Using hiredis (0.4.5) 
Using em-hiredis (0.1.1) 
Using eventmachine (1.0.0) 
Using em-socksify (0.2.1) 
Using http_parser.rb (0.5.3) 
Using em-http-request (1.0.3) 
Using fastercsv (1.5.5) 
Using faye-websocket (0.4.6) 
Using yajl-ruby (1.1.0) 
Using faye (0.8.6) 
Using faye-redis (0.1.0) 
Using geokit (1.6.5) 
Using google_visualr (2.1.3) 
Using googlecharts (1.6.8) 
Using haml (3.1.7) 
Using hashery (2.0.1) 
Using jbuilder (0.9.0) 
Using jquery-rails (2.1.2) 
Using libv8 (3.3.10.4) 
Using mustache (0.99.4) 
Using parallel-forkmanager (1.5.1) 
Using ruby-rc4 (0.1.5) 
Using pdf-reader (1.2.0) 
Using pg (0.14.1) 
Using ttfunk (1.0.3) 
Using prawn (0.12.0) 
Using bundler (1.3.1) 
Using rails (3.2.11) 
Using redis (3.0.1) 
Using redis-namespace (1.2.1) 
Using request_store (1.0.5) 
Installing rmagick (2.12.2) 
Errno::EACCES: Permission denied - /Users/jitscaleusa/.rvm/gems/ruby-1.8.7-p371/gems/rmagick-2.12.2/README.html
An error occurred while installing rmagick (2.12.2), and Bundler cannot
continue.
Make sure that `gem install rmagick -v '2.12.2'` succeeds before bundling.
Elliott:trunk jitscaleusa$ sudo gem install rmagick -v '2.12.2'
Password:
Fetching: rmagick-2.12.2.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

    /Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
checking for clang... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.3.5... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
Can't install RMagick 2.12.2\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/bin/ruby
    --with-MagickCorelib
    --without-MagickCorelib
    --with-Magicklib
    --without-Magicklib

Gem files will remain installed in /Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/gems/1.8/gems/rmagick-2.12.2 for inspection.
Results logged to /Users/jitscaleusa/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/gems/1.8/gems/rmagick-2.12.2/ext/RMagick/gem_make.out
Elliott:trunk jitscaleusa$ mdfind RMagick
/Users/jitscaleusa/Library/Application Support/Firefox/Profiles/9abgx4e5.default/sessionstore.js
/opt/local/share/doc/ImageMagick-6.8.0/www/sitemap.html
/opt/local/share/doc/ImageMagick-6.8.0/www/mirrors.html
/opt/local/share/doc/ImageMagick-6.8.0/www/index.html
/opt/local/share/doc/ImageMagick-6.8.0/www/history.html
/opt/local/share/doc/ImageMagick-6.8.0/www/changelog.html
/opt/local/share/doc/ImageMagick-6.8.0/www/api/pixel-view.html
/opt/local/share/doc/ImageMagick-6.8.0/www/api/colorspace.html
/opt/local/share/doc/ImageMagick-6.8.0/www/api.html
/opt/local/share/doc/ImageMagick-6.8.0/www/Magick++/ChangeLog.html
/opt/local/share/doc/ImageMagick-6.8.0/index.html
/opt/local/share/doc/ImageMagick-6.8.0/ChangeLog
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports.tar
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/ruby/rb-rmagick
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/ruby/rb-rmagick/Portfile
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/PortIndex.quick
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/PortIndex
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/PortIndex
/Users/jitscaleusa/guruee/tags/production/Gemfile
/Users/jitscaleusa/guruee/tags/production/Gemfile.lock
/Users/jitscaleusa/guruee/trunk/Gemfile
/Users/jitscaleusa/guruee/trunk/Gemfile.lock 
```

嗯。找不到刚刚下载的rmagick，无法捆绑。嘉尔。

```
Elliott:trunk jitscaleusa$ convert --version
Version: ImageMagick 6.8.0-10 2013-03-03 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features:  OpenCL 
```

有没有人遇到过这个问题并找到合理的解决方案？提前感谢并道歉，如果之前已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:56:03.690

试试看 ...

```
 brew install imagemagick     
 gem install rmagick 
```

[欲了解更多信息](http://www.codedrop.ca/blog/archives/214)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:57:27.560

看起来 rmagick 没有找到它需要的一些库。[https://coderwall.com/p/wnomjg](https://coderwall.com/p/wnomjg)提供了一个有效的修复方法，以确保它正确链接。gem 尝试安装，报告说它安装了，而实际上它没有安装。

# python - os.walk 是否利用操作系统返回的文件类型来提高效率？

> ID：15259395
> 
> 赞同：2
> 
> 时间：2013-03-06T22:29:17.827
> 
> 标签：python, optimization, directory

该[`os.walk`](http://docs.python.org/2/library/os.html#os.walk)函数返回目录和文件的单独列表。许多常见操作系统（如 Windows 和 Linux）上的底层操作系统调用返回一个文件类型或标志，指定每个目录条目是文件还是目录；如果没有这个标志，就必须为每个返回的文件名再次查询操作系统。代码是`os.walk`使用这些信息还是将其丢弃[`os.listdir`](http://docs.python.org/2/library/os.html#os.listdir)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:30:09.010

不，它没有。

在后台，`os.walk()`使用`os.listdir()`和`os.path.isdir()`分别列出文件和目录。见[源代码`walk()`](http://hg.python.org/cpython/file/2.7/Lib/os.py#l209)。

具体来说：

```
try:
    # Note that listdir and error are globals in this module due
    # to earlier import-*.
    names = listdir(top)
except error, err:
    if onerror is not None:
        onerror(err)
    return

dirs, nondirs = [], []
for name in names:
    if isdir(join(top, name)):
        dirs.append(name)
    else:
        nondirs.append(name) 
```

where `listdir`and`isdir`是`os.listdir()`and`os.path.isdir()`函数的模块全局变量。它为子目录递归地调用自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:37:56.773

正如 Martijn Pieters 的回答所解释的，`os.walk`只使用`os.listdir`and `os.path.isdir`。

在邮件列表上对此进行了几次讨论，但没有针对标准库提出具体建议。有各种边缘情况使这不像看起来那么简单。此外，如果 Python 3.4 或更高版本增加了一个新`path`模块，则很有可能`os.walk`只是被替换/弃用，而不是就地改进。

但是，您可以使用许多第三方模块。

最简单的可能是 Ben Hoyt 的[`betterwalk`](https://github.com/benhoyt/betterwalk). 我相信他打算在 PyPI 上得到这个，甚至可能将它提交给 Python 3.4 或更高版本，但目前你必须在 github 上安装它。`betterwalk`提供了一个`os.listdir`名为 的替代品，并在它之上构建`iterdir_stat`了一个 90% 完整的替代品。`os.walk`在大多数 POSIX 系统和 Win32 上，它通常可以避免不必要`stat`的调用。（在某些情况下它的工作不如`fts (3)`/ `nftw (3)`/好`find (1)`，但在最坏的情况下它只是做了一些不必要的调用，而不是失败。最后我检查的可能不完整的部分正在处理符号链接，可能还有错误处理。）

POSIX 系统还有一个很好的包装器`fts`，就现代 POSIX 系统的性能而言，这显然是理想的——但它有一个不同的（在我看来更好，但仍然不同）界面，并且不支持 Windows 或其他平台（甚至更旧的 POSIX 系统）。

PyPI 和其他地方还有大约 30 多个“与路径有关的一切”模块，其中一些具有类似新`walk`的功能。

# pointers - 使用 ipmage 的 ROS 应用程序中的分段错误

> ID：15259396
> 
> 赞同：0
> 
> 时间：2013-03-06T22:29:25.100
> 
> 标签：pointers, opencv, segmentation-fault, iplimage, ros

我正在尝试在我的**ROS**节点中使用**cvBlob** lib检测视频源上的 blob。我想，我在**指针**上犯了一个错误，但我不知道在哪里。此外，我是否必须释放一些这个变量？

 ****```
Mat& corridorProces(Mat& resultImg)
{   
    Mat srcMat=resultImg.clone();
    cvtColor( resultImg, resultImg, CV_RGB2GRAY );
    IplImage src= resultImg.clone();
    IplImage *src_g= new IplImage(src);
    IplImage *src_g_inv=new IplImage(src);
    cvThreshold(src_g, src_g_inv,35,255, CV_THRESH_BINARY_INV);
    cvThreshold(src_g, src_g,40,255, CV_THRESH_BINARY);    
    IplImage *labelImg=cvCreateImage(cvGetSize(src_g), IPL_DEPTH_LABEL, 1);
    cvb::CvBlobs blobs;
    unsigned int result=cvb::cvLabel(src_g, labelImg, blobs);   
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:41:06.160

您需要使用 cvCopy 将图像复制到另一个图像。此外，您需要使用 cvReleaseImage(&image); 释放图像。****

# objective-c - 如何在 iOS 中使用边缘插图？

> ID：15259398
> 
> 赞同：2
> 
> 时间：2013-03-06T22:29:29.093
> 
> 标签：objective-c, cocoa-touch

我将如何使用边缘插图使图像适合按钮内？我不确定 UIEdgeInsetsMake() 中的参数使用什么值。我可以以某种方式使用按钮的宽度和高度来设置它们吗？

我希望按钮在未选中时只是一个图像。我了解如何执行“未选择时”部分，但我不知道如何使用边缘插图，也不知道该术语的确切含义。

我现在有这个：

```
image = [image resizableImageWithCapInsets:UIEdgeInsetsMake(<#CGFloat top#>, <#CGFloat left#>, <#CGFloat bottom#>, <#CGFloat right#>)];

[button setImage:image forState:!UIControlStateSelected]; 
```

另外，一旦按钮被选中，我将如何恢复为不使用图像？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-06T22:44:40.390

我想我明白你在说什么。如果我误解了您的问题，请告诉我。

说你有`myImage.png`。将其初始化如下：

```
[button setImage:[UIImage imageNamed:@"myImage.png"] forState:UIControlStateNormal]; 
```

然后，假设您已经为 Interface Builder 中的按钮连接了 IBAction：

```
- (IBAction)myButtonWasPressed:(UIButton *)sender
{
    [sender setImage:nil];
} 
```

# c# - 使用 MySqlDataAdapter 更新不起作用

> ID：15259400
> 
> 赞同：5
> 
> 时间：2013-03-06T22:29:50.897
> 
> 标签：c#, mysql, dataadapter

我正在尝试使用 MySqlDatAdapter 来更新 MySql 表。但是，表格永远不会更新！！！我以前这样做过，但使用的是 SQL 服务器。我的代码中是否还有其他特定于 MySql 的内容？

```
 DataTable myTable = new DataTable("testtable");

        MySqlConnection mySqlCon = new MySqlConnection(ConfigurationManager.ConnectionStrings["DBConStr"].ConnectionString);

        MySqlCommand mySqlCmd = new MySqlCommand("SELECT * FROM testtable WHERE Name = 'Tom'");
        mySqlCmd.Connection = mySqlCon;

        MySqlDataAdapter adapter = new MySqlDataAdapter(mySqlCmd);
        MySqlCommandBuilder myCB = new MySqlCommandBuilder(adapter);
        adapter.UpdateCommand = myCB.GetUpdateCommand();

        mySqlCon.Open();

        adapter.Fill(myTable);
        myTable.Rows[0]["Name"] = "Was Tom";
        myTable.AcceptChanges();
        adapter.Update(myTable);
        mySqlCon.Close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T22:31:41.957

更新前删除`myTable.AcceptChanges()`。Othwerwise 会将所有行设置[`RowState`](http://msdn.microsoft.com/en-us/library/system.data.datarowstate%28v=vs.110%29.aspx)为`Unchanged`，因此 DataAdapter 将不知道某些内容已更改。

`adapter.Update(myTable)``AcceptChanges`更新完成后会调用自己。

所以...

```
myTable.Rows[0]["Name"] = "Was Tom";
//myTable.AcceptChanges();
adapter.Update(myTable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T17:44:43.250

我的一些人需要研究以下解决方案；在其他情况下，人们可能需要不同的解决方案。像这样在运行时调试时，甚至不要对 Datatable 进行任何操作，

```
myTable.GetChanges(); // Return Any of Chnages Made without applying myTable.Accepchanges()
myTable.GetChanges(DataRowState.Added); // Return added rows without applying myTable.Accepchanges()
myTable.GetChanges(DataRowState.Deleted); 
myTable.GetChanges(DataRowState.Detached);
myTable.GetChanges(DataRowState.Modified);
myTable.GetChanges(DataRowState.Unchanged); 
```

您可以根据上述命令获取数据。所以最好在将数据表传递给更新或插入或删除命令之前尝试调试。

如果 myTable.GetChanges() 返回 null 那么您可以 SetAdded() 或 SetModified() 返回您的 DataTable；

```
foreach(DataRow row in myTable.Rows)
{
  row.SetAdded(); // For Insert Command
  row.SetModified(); // For Update Command
} 
```

# javascript - 在正确的地方使用 toFixed

> ID：15259401
> 
> 赞同：0
> 
> 时间：2013-03-06T22:29:51.133
> 
> 标签：javascript

我有一个表单，它从输入字段和下拉列表中输出计算。

除了总数之外，脚本还不错。当您输入一个数字并从下拉列表中选择一个值时，在 html 中总计将四舍五入到小数点后 2 位。

谁能明白为什么会这样？

表格如下：

```
<input type="text" name="amount" id="amount" maxlength="6" autocomplete="off"/><span class="paymentalert" style="color:red;"></span>
<br /><br />
<label for="delivery">Delivery:</label>
<select id="delivery" name="delivery">
    <option value="1.50">Fast</option>
    <option value="2.50">Medium</option>
    <option value="3.50">Slow</option>
</select> 
```

javascript如下：

```
function updateCost()
{
    var amount = parseFloat($('#amount').val()).toFixed(2);
    var delivery = parseFloat($('#delivery').val()).toFixed(2);   

    var total = parseFloat(amount) + parseFloat(delivery);
    $("#total").html(total);
    $("#amountdiv").html(amount);
    $("#deliverydiv").html(delivery);

    var fixedrate =  parseFloat(total / 100 * 8.2).toFixed(2);

    var grandtotal = parseFloat(fixedrate) + parseFloat(total);
    $("#grandtotal").html(grandtotal);
    $("#total").html(total);
    $("#fixedrate").html(fixedrate);    

}

$(document).ready(function(){
    $('#amount').change(function(){ updateCost(); });
    $('#delivery').change(function(){ updateCost(); });
    $('#grandtotal').change(function(){ updateCost(); });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:36:57.650

`toFixed(2)`只应在输出它的代码部分中使用。在这种情况下，您应该有类似 , 的结构`$("#someID").html(total.toFixed(2))`，并删除多余`parseFloat()`的 s。像这样的东西：

```
function updateCost() {
    var amount = parseFloat(document.getElementById("amount").value),
        delivery = parseFloat(document.getElementById("delivery").value),
        total = amount + delivery,
        fixedrate =  total / 100 * 8.2,
        grandtotal = fixedrate + total;

    document.getElementById("total").innerHTML = total.toFixed(2);
    document.getElementById("amountdiv").innerHTML = amount.toFixed(2);
    document.getElementById("deliverydiv").innerHTML = delivery.toFixed(2);
    document.getElementById("grandtotal").innerHTML = grandtotal.toFixed(2);
    document.getElementById("fixedrate").innerHTML = fixedrate.toFixed(2);
}

$(function(){
    document.getElementById("amount").onchange =
        document.getElementById("delivery").onchange = updateCost;
}); 
```

# php - 安装 Slim、PHP、Ubuntu

> ID：15259404
> 
> 赞同：2
> 
> 时间：2013-03-06T22:30:04.570
> 
> 标签：php, slim

我正在尝试在 Ubuntu 上的本地 LAMP 服务器上安装 Slim，但我卡在了第二个基地。从我的教程和在线找到的各种文档中：

您现在可以访问 composer 命令。如果我去终端输入：

```
$ composer
Composer version b474944155429eb4cce186c746d55287ee6bb3f4

Usage:
[options] command [arguments] 
```

下一步是将 Slim 指定为您的应用程序所需的包。这可以通过项目根目录中的 composer.json 文件来完成。

我的项目的根在哪里？我以为会

```
/var/www/slim 
```

我尝试将 composer.json 添加到：

```
/var/www/slim 
```

并站在 /slim 中定义一个 index.php 脚本：

```
<?php
require 'vendor/autoload.php';
$app = new \Slim\Slim();
$app->get('/hello/:name', function ($name) {
echo "Hello, $name";
});
?> 
```

去

```
http://localhost/var/www/slim 
```

浏览器返回：

警告：require(vendor/autoload.php)：打开流失败：第 2 行的 /var/www/slim/index.php 中没有这样的文件或目录

致命错误：require()：无法在 /var/www/slim/index.php 中打开所需的 'vendor/autoload.php' (include_path='.:/usr/share/php:/usr/share/pear') 2号线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T19:50:44.440

好吧，您的帖子中似乎有不止一个问题，但无论如何......

1.  “我的项目的根源在哪里？”

`/var/www`如果您没有更改主机/Apache 设置，则项目的根目录应该在其中。

然后到你的第二个问题，我会冒昧地改述一下:)

2.  “如何创建您的 Web 应用程序，并在其中包含 composer 安装的包？” 转到您各自的网络根目录，可能在您的情况下`/var/www`并在其中创建`"index.php"`. 然后，在控制台中，运行以下命令：

    ```
    composer install 
    ```

这应该安装 composer.json 中定义的包，它们应该在同一个 web 根目录中。
如果一切都进行了 OO，您将在以下新目录中拥有：`/var/www/vendor`

现在，转到您的 web-root 目录并`index.php` *在其中创建您的和，在开头添加以下行*：

```
require 'vendor/autoload.php';
// to load all the packages installed with composer, not only slim. If 
//composer was run in the right directory and w/o problems of course :)

 $app = new \Slim\Slim();
// to instantiate Slim script instance and assign it to the pointer $app
$app->get('/hello/:name', function ($name) {
echo "Hello, $name";
})
//to create your 1st route  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T16:20:45.610

你需要跑

```
composer install 
```

从终端。之后，添加

```
$app->run(); 
```

在 index.php 中。

# deployment - XNA 项目突然停止工作

> ID：15259407
> 
> 赞同：0
> 
> 时间：2013-03-06T22:30:13.490
> 
> 标签：deployment, build, xna, visual-studio-debugging

大约一周前，我上次处理我的 XNA 项目时它运行良好，我做的最后一件事是将它部署到 XBox 进行演示。现在，在没有更改之后，由于某种原因它不会构建我收到以下错误：

> 无法将文件“E:\Prototype2\DebugView XNA\bin\x86\Debug\Content\font.xnb”复制到“bin\x86\Debug\font.xnb”。设备未准备好。Prototype2 的 Windows 副本**

我检查了此路径，该路径中没有名为 Content 的文件夹，也没有 font.xnb 文件。我不知道为什么它会突然以这种方式出现问题，或者为什么它想要这个文件。

# python-2.7 - Django中的名称错误

> ID：15259409
> 
> 赞同：1
> 
> 时间：2013-03-06T22:30:18.767
> 
> 标签：python-2.7, django-views

我正在使用 Django/python 并遇到了一些错误，我似乎无法在网上找到相关的答案。

我正在从views.py测试以下内容：

```
def teamRoster(request, pk): #shows list of players

    tempteams = Teams.objects.get(id=pk)
    tempteams = tempteams.players.all()
    team = get_object_or_404(Teams, id=pk)

    context = {
        'teamList': tempteams,
        'team': team,
    }

return render(request, "roster/teamRoster.html", context) 
```

我在外壳中得到什么：

```
from roster.models import Teams, Player
tempteams=Teams.objects.get(id=pk)

Traceback (most recent call last):
File "<console>", line 1, in <module>

NameError: name 'pk' is not defined 
```

如果我尝试下一行：

```
tempteams = tempteams.players.all()

Traceback (most recent call last):
File "<console>", line 1, in <module> 

NameError: name 'tempteams' is not defined 
```

我的数据确实有一个 pk 属性，我在制作我的 json 文件时输入了该属性，而不是自动分配一个。我不确定我需要在哪里定义 pk。我对 django/python 相当陌生，但我确实对另一个定义（同一个项目）做了类似的事情，而且效果很好。任何指导将不胜感激。如果有帮助，我的模型和代码的其他部分位于[https://github.com/historymaiden/Athletic-Team-App](https://github.com/historymaiden/Athletic-Team-App) - 该应用程序称为名册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:54:13.990

您尚未在 shell 中定义 pk 这就是您在此处收到错误的原因

```
from roster.models import Teams, Player
tempteams=Teams.objects.get(id=pk)

Traceback (most recent call last):
File "<console>", line 1, in <module>

NameError: name 'pk' is not defined 
```

因为最后一个代码块失败了，所以也没有定义 tempteams

```
tempteams = tempteams.players.all()

Traceback (most recent call last):
File "<console>", line 1, in <module> 

NameError: name 'tempteams' is not defined 
```

# android - 通过android控制Mac的界面

> ID：15259413
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:30:37.940
> 
> 标签：android

我有兴趣为 android 编写一个移动应用程序和一个用于近距离控制 Mac 个人计算机的远程桌面客户端。我能找到的所有当前实现都使用 UDP over WiFi，这要求计算机与手机在同一个 WiFi 网络上。有谁知道我可能会研究的另一个界面来完成这项工作？即蓝牙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:47:31.940

我可以想到几种在 Android - Mac 之间进行通信的方式：

1.  **通过远程服务器获取数据**- 这里的优势是即使不在 WiFi 上，Android 也可以控制 Mac。但潜在的安全风险更大（如何配对设备？）。如果您的 Mac 有公共 IP，它可以充当远程服务器。
2.  **本地 WLAN** - 使用私有 IP 地址。让它安全可能比不让它更容易。1，但 Android 设备必须连接到与 Mac 相同的 WiFi/LAN。
3.  **蓝牙**- 必须在影响电池寿命的 Android 设备中启用 BT。范围比 WLAN 低。
4.  **声音**- 我认为它被低估了。您的 Android 设备会发出高于大约范围内的音调。18kHz，Mac 会使用麦克风来收听并采取相应的行动。优点：Android可以关闭WLAN和关闭数据连接。Mac 也可以离线。缺点：除非你的用例很简单，否则通过这个接口实现协议会比较麻烦。我以这种方式做了一些 Android-Android 界面，效果比我预期的要好。

至于底层协议，这取决于您的用例。如果您打算实现远程控制，而不是流媒体等，出于明显的原因（主要是可靠性，这意味着更容易实现），我会使用 TCP 而不是 UDP。

# sql - SQL select语句ORDER BY关系到第二张表？

> ID：15259418
> 
> 赞同：0
> 
> 时间：2013-03-06T22:31:10.073
> 
> 标签：sql, select, sql-order-by

我有表 A，其中包含一个表示它们相关的表 B 对象的 int 行。

多个 As 可以引用同一个 B。B 不引用 A

我想返回它们相关的 B 对象中的一行所排序的。

有没有办法在一条 SQL 语句中做到这一点？甚至2个？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:33:05.287

你可以把任何东西放在你的`SELECT`列表和`ORDER BY`任何你想要的列中，只要它在`tablea`或`tableb`

```
SELECT a.ID
FROM tablea
 INNER JOIN tableb ON tablea.ID = tableb.ID
ORDER BY tableb.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:34:06.900

您是否尝试过使用

```
Select (columns that you want to display)
from TableA INNER JOIN TableB
ON TableA.col = TableB.col
Order By TableB.ColumnName 
```

# python - 目录不存在时的错误处理

> ID：15259421
> 
> 赞同：4
> 
> 时间：2013-03-06T22:31:26.127
> 
> 标签：python

我有一种情况，我想将 MP3 存储在一个目录中，如果该目录不存在则创建该目录，如果无法创建该目录则退出程序。我读到这`os.path.exists()`比 对性能的影响更大`os.makedirs()`，因此考虑到这一点，我编写了以下代码：

```
try: 
    # If directory has not yet been created
    os.makedirs('Tracks')
    with open('Tracks/' + title + '.mp3', 'w') as mp3:
        mp3.write(mp3File.content)
        print '%s has been created.' % fileName

except OSError, e:
    # If directory has already been created and is accessible
    if os.path.exists('Tracks'):
        with open('Tracks/' + title + '.mp3', 'w') as mp3:
            mp3.write(mp3File.content)
            print '%s has been created.' % fileName

    else: # Directory cannot be created because of file permissions, etc. 
        sys.exit("Error creating 'Tracks' Directory. Cannot save MP3\. Check permissions.") 
```

这有意义吗？或者我应该坚持使用更简洁但可能更昂贵的版本，即先检查目录是否存在然后制作它？9/10 次，目录将在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:45:53.210

该`try-except`块可能更快，尽管正如@t-8ch 所说，这并不重要。但是，它不必如此“不干净”：

```
try: 
    # try the thing you expect to work
    mp3 = open('Tracks/' + title + '.mp3', 'w')
except OSError, e:
    # exception is for the unlikely case
    os.makedirs('Tracks')
    mp3 = open('Tracks/' + title + '.mp3', 'w')

mp3.write(mp3File.content)
mp3.close()
print '%s has been created.' % fileName 
```

如果您确实想先`try`创建目录，可以执行以下操作：

```
try: 
    # If directory has not yet been created
    os.makedirs('Tracks')
except OSError, e:
    # If directory has already been created or is inaccessible
    if not os.path.exists('Tracks')
        sys.exit("Error creating 'Tracks' Directory. Cannot save MP3\. Check permissions.")
with open('Tracks/' + title + '.mp3', 'w') as mp3:
    mp3.write(mp3File.content)
    print '%s has been created.' % fileName 
```

# android - CameraPreview 和 GoogleMaps API v2 View 之间的 Android SurfaceView 冲突

> ID：15259423
> 
> 赞同：1
> 
> 时间：2013-03-06T22:31:58.840
> 
> 标签：android, surfaceview, google-maps-android-api-2

我的应用程序有一组托管 FragmentActivity 的选项卡。其中一些选项卡包含 GoogleMaps Api v2 Support MapFragment 和/或 MapView，另一个选项卡是 QR 扫描仪。

我面临的问题是，如果您当前在一个选项卡上查看 SupportMapFragment 或 MapView，然后切换到 Scanner 选项卡，SurfaceView 仍然被之前的 SupportMapFragment / MapView 接管（当然，除非 Fragment/View 被删除在选择扫描仪选项卡之前）。由于使用了 SurfaceView，在尝试将 GoogleMaps Api v2 合并到 v1 之前，这不是问题。

我不确定如何解决这个问题，我在选择“扫描仪”选项卡并启动camerapreview时沿着“清除”表面视图的线路进行思考吗？并以某种方式使用画布实现这一目标？但是我对 SurfaceView 类的知识并不多。

附件是我的“CameraPreview”类，用于处理扫描仪选项卡上的 Android 相机。GoogleMaps api v2 类只是 Google 提供的基本设置，没什么特别的。

感谢您的时间和帮助。

```
class CameraPreview extends ViewGroup implements SurfaceHolder.Callback {
    private final String TAG = "CameraPreview";

    SurfaceView mSurfaceView;
    SurfaceHolder mHolder;
    Size mPreviewSize;
    List<Size> mSupportedPreviewSizes;
    Camera mCamera;
    PreviewCallback mPreviewCallback;
    AutoFocusCallback mAutoFocusCallback;

    CameraPreview(Context context, PreviewCallback previewCallback, AutoFocusCallback autoFocusCb) {
        super(context);

        mPreviewCallback = previewCallback;
        mAutoFocusCallback = autoFocusCb;        
        mSurfaceView = new SurfaceView(context);
        addView(mSurfaceView);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }

    public void setCamera(Camera camera) {
        mCamera = camera;
        if (mCamera != null) {
            mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
            requestLayout();
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // We purposely disregard child measurements because act as a
        // wrapper to a SurfaceView that centers the camera preview instead
        // of stretching it.
        final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
        final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
        setMeasuredDimension(width, height);

        if (mSupportedPreviewSizes != null) {
            mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed && getChildCount() > 0) {
            final View child = getChildAt(0);

            final int width = r - l;
            final int height = b - t;

            int previewWidth = width;
            int previewHeight = height;
            if (mPreviewSize != null) {
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
            }

            // Center the child SurfaceView within the parent.
            if (width * previewHeight > height * previewWidth) {
                final int scaledChildWidth = previewWidth * height / previewHeight;
                child.layout(0, 0, width, height);
            } else {
                final int scaledChildHeight = previewHeight * width / previewWidth;
                child.layout(0, 0, width,height);

            }
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {

        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        try {
            if (mCamera != null) {
                mCamera.setPreviewDisplay(holder);
                mCamera.setDisplayOrientation(90);
            }
        } catch (IOException exception) {
            Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        if (mCamera != null) {
            mCamera.stopPreview();
        }
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio = (double) w / h;
        if (sizes == null) return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        if (holder.getSurface() == null){
            // preview surface does not exist
            return;
        }

        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        if(mCamera!=null){
            Camera.Parameters parameters = mCamera.getParameters();

            parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
            requestLayout();

            mCamera.setParameters(parameters);
            mCamera.setPreviewCallback(mPreviewCallback);
            mCamera.startPreview();
            mCamera.autoFocus(mAutoFocusCallback);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:56:07.310

从文档的声音来看，您一次应该只运行一个表面视图。

我在前面有一个类似的带有 CameraPreview 的 MapFragment，发现我需要 MapFragment 在相机预览片段起作用之前释放其资源。

这意味着将 MapFragment 换成 CamreaPreviewFragment 而不仅仅是将其添加到顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T14:51:39.367

几天前我遇到了同样的问题，我需要在 GoogleMap v2 上显示一个相机预览视图，以下是我的解决方案，希望对您有所帮助。

```
 // construct a camera preview layout then show it, or remove it then hide
    popCamera.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if(cameraBar.getVisibility() == View.VISIBLE) {
                cameraBar.removeAllViews();
                cameraBar.setVisibility(View.INVISIBLE);
            }else if(cameraBar.getVisibility() == View.INVISIBLE) {
                // new camera surface view then add to preview area
                if (cameraSurfaceView == null) {
                    cameraSurfaceView = new CameraSurfaceView(getApplicationContext());
                    // === the key point ===
                    **cameraSurfaceView.setZOrderOnTop(true);**
                    LinearLayout.LayoutParams param = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.MATCH_PARENT,
                            LinearLayout.LayoutParams.MATCH_PARENT);
                    previewArea.addView(cameraSurfaceView, param);
                }

                cameraBar.removeAllViews();

                cameraBar.addView(previewArea);
                cameraBar.addView(snapArea);
                cameraBar.setVisibility(View.VISIBLE);
            }
        }
    }); 
```

# c# - 异常和返回语句是 C# 中唯一可能的提前退出吗？

> ID：15259428
> 
> 赞同：19
> 
> 时间：2013-03-06T22:32:03.877
> 
> 标签：c#, .net

例如，我很好奇，如果在下面的代码中，我可以保证要么`Foo()`或`Bar()`将被执行。

```
try {
    ... // Assume there is no return statement here
    Foo();
} catch (Exception e) {
    Bar();
} 
```

我对`finally`块非常熟悉，不需要对该功能进行解释。

我问是因为上面的代码由于存在 . 而在 Java 中*无法*`Throwable`工作，我发现这是一个艰难的过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T00:12:10.583

还有停止应用程序的“烧毁房屋”方法：

```
Environment.Exit(int code);
Environment.FailFast(string message);
Thread.CurrentThread.Abort();
AppDomain.Unload(AppDomain.CurrentDomain); 
```

为了好玩，这是另一个:)

```
[DllImport("kernel32.dll",SetLastError = true)]
static extern bool WriteProcessMemory(
      IntPtr hProcess, 
      IntPtr lpBaseAddress, 
      byte [] lpBuffer, 
      uint nSize, 
      out UIntPtr lpNumberOfBytesWritten);

var myProcess = Process.GetCurrentProcess();
var hProcess = myProcess.Handle;
var rnd = new Random();
while(true)
{
    var writeTo = new IntPtr((int)rnd.Next(0, int.MaxValue));
    var toWrite = new byte[1024];
    UIntPtr written;
    WriteProcessMemory(
        hProcess, 
        writeTo, 
        toWrite, 
        (uint)toWrite.Length, 
        out written);
} 
```

出于好奇和刺激，让我们带他们去试驾吧！

我们的试验台：

```
 static void Main(string[] args)
    {
        Trace.Listeners.Add(new ConsoleTraceListener());
        AppDomain.CurrentDomain.UnhandledException += OnNoes;
        try
        {
            // INSERT BURN STATEMENT
            Foo();
        }
        catch (Exception e)
        {
            Bar();
        }
        finally
        {
            Baz();
        }
    }

    static void Foo()
    {
        Trace.WriteLine("I AM FOO!");
    }
    static void Bar()
    {
        Trace.WriteLine("I AM BAR!");
    }
    static void Baz()
    {
        Trace.WriteLine("I AM BAZ!");
    }
    static void OnNoes(object sender, UnhandledExceptionEventArgs e)
    {
        Trace.WriteLine("OhNoes!");
    } 
```

结果！

烧伤声明：

```
Thread.CurrentThread.Abort(); 
```

输出：

```
I AM BAR!
I AM BAZ! 
```

烧伤声明：

```
AppDomain.Unload(AppDomain.CurrentDomain); 
```

输出：

```
I AM BAR!
I AM BAZ! 
```

烧伤声明：

```
Environment.Exit(-1); 
```

输出：

```
Nothing! No trace output at all! 
```

烧伤声明：

```
Environment.FailFast("Burn!!!"); 
```

输出：

```
Application crash! A FatalExecutionEngineError was thrown, 
which was not caught by any block/handler. No trace output. 
```

所以你去吧！什么？我错过了一个？

烧伤声明：

```
Splode(); 
```

其中“Splode”是：

```
 static void Splode()
    {
        var myProcess = Process.GetCurrentProcess();
        var hProcess = myProcess.Handle;
        var rnd = new Random();
        while (true)
        {
            var writeTo = new IntPtr((int)rnd.Next(0, int.MaxValue));
            var toWrite = new byte[1024];
            UIntPtr written;
            WriteProcessMemory(
                hProcess,
                writeTo,
                toWrite,
                (uint)toWrite.Length,
                out written);
        }            
    } 
```

输出：

```
Application crash! A FatalExecutionEngineError was thrown, 
which was not caught by any block/handler. No trace output.
Crashed Visual Studio while running attached! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T00:05:16.933

是的...最明显的是`await`, `yield break`/ `yield return`, `goto`,`if(false)`等，如评论中所述。但是所有这些语句/表达式都必须由您自己在包含您的`try`语句的方法中编写，因此您不必担心它们。

但是，即使除此之外，还有*一种*方法可以在不抛出异常或返回（或运行这两种方法中的任何一种）的情况下退出。那就是......抛出一些不是例外的东西。

C# 语言规范规定，您可以抛出的唯一内容是 class 的实例`Exception`或`null`文字（在这种情况下`NullReferenceException`抛出 a。）见 §8.9.5：

> [throw] 表达式必须表示类类型 System.Exception、派生自 System.Exception 的类类型或具有 System.Exception（或其子类）作为其有效基类的类型参数类型的值。如果表达式的评估产生 null，则会引发 System.NullReferenceException。

但是，此限制仅限制 C# 代码。C#代码编译成中间语言，不受此限制。也可在 C# 语言规范 §8.10 中找到：

> 某些编程语言可能支持无法表示为派生自 System.Exception 的对象的异常，尽管 C# 代码永远不会生成此类异常。

为了捕获这些异常，您需要使用通用的 catch 子句，如下所示：

```
try
{
    //...
    Foo();
}
catch
{
    Bar();
} 
```

注意：此方法仅适用于编译到 2.0 版之前的 .NET 框架。从该版本开始，CLR 将抛出的对象包装在`RuntimeWrappedException`. 谢谢，斯维克！

此外，其他一些人提到杀死进程或抛出一个`StackOverflowException`，这两者都可以很好地完成这项任务。除了这些可能还有其他方法，但我不这么认为（除了突然拔掉电脑，天堂禁止。）希望这有帮助！——布兰登

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T17:42:03.473

假设我们有以下代码：

```
try
{
    /*Breaking statement goes here*/

    Foo();
}
catch (Exception ex)
{
    Bar();
}
finally
{
    Baz();
} 
```

我会将断路器分为 3 个常见原因：

1.  代码流语句：

    1.1。[`return`](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx): 富(-); 酒吧（-）; 巴兹（+）；

    1.2\. [`goto`](http://msdn.microsoft.com/en-us/library/13940fs2.aspx): 富(-); 酒吧（-）; 巴兹（+）；

    1.3\. [`if(false)`](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx): 富(-); 酒吧（-）; 巴兹（+）；

    1.4\. [`while(true){}`](http://msdn.microsoft.com/en-us/library/2aeyhxcd.aspx): 富(-); 酒吧（-）; 巴兹（-）；

    1.5。[`yield return`](http://msdn.microsoft.com/en-us/library/vstudio/9k7k7cf0.aspx), 如果方法返回 IEnumerable 并`yield return`出现在`try`块之前： Foo(-); 酒吧（-）; 巴兹（-）；

    1.6\. [`yield break`](http://msdn.microsoft.com/en-us/library/vstudio/9k7k7cf0.aspx), 如果方法返回 IEnumerable: Foo(-); 酒吧（-）; 巴兹（-）；

    1.7\. [`break`](http://msdn.microsoft.com/en-us/library/adbctzc4.aspx), 如果代码被循环包裹： Foo(-); 酒吧（-）; 巴兹（+）；

    1.8\. [`continue`](http://msdn.microsoft.com/en-us/library/923ahwt1.aspx), 如果代码被循环包裹： Foo(-); 酒吧（-）; 巴兹（+）；

2.  进程/域/线程终止。

    2.1。[`Process.GetCurrentProcess().Kill()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx): 富(-); 酒吧（-）; 巴兹（-）；

    2.2\. [`Environment.Exit(0)`](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx): 富(-); 酒吧（-）; 巴兹（-）；

    2.3\. [`Environment.FailFast("")`](http://msdn.microsoft.com/en-us/library/ms131100.aspx): 富(-); 酒吧（-）; 巴兹（-）；

    2.4\. [`AppDomain.Unload(AppDomain.CurrentDomain)`](http://msdn.microsoft.com/en-us/library/system.appdomain.unload.aspx): 富(-); 酒吧（+）；巴兹（+）；

    2.5\. [`Thread.CurrentThread.Abort()`](http://msdn.microsoft.com/en-us/library/5b50fdsz.aspx): 富(-); 酒吧（+）；巴兹（+）；

3.  未处理的异常。

    3.1。.NET 2.0 之前的非托管代码中的异常：Foo(-); 酒吧（-）; 巴兹（+）；

    3.2\. 自 .NET 2.0 以来的非托管代码中的异常：Foo(-); 酒吧（+）；巴兹（+）；

    3.3\. 自 .NET 4.0 以来损坏的进程状态异常（也未[`<legacyCorruptedStateExceptionsPolicy>`](http://msdn.microsoft.com/en-us/library/dd638517.aspx)指定[`HandleProcessCorruptedStateExceptionsAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx)）：Foo(-); 酒吧（-）; 巴兹（+）；

    3.4\. .NET 4.0 之前的损坏的进程状态异常[`<legacyCorruptedStateExceptionsPolicy>`](http://msdn.microsoft.com/en-us/library/dd638517.aspx)或[`HandleProcessCorruptedStateExceptionsAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx)指定：Foo(-); 酒吧（+）；巴兹（+）；

    3.5\. 自 .NET 2.0 以来在另一个线程中出现异常并且[`<legacyUnhandledExceptionPolicy>`](http://msdn.microsoft.com/en-us/library/ms228965.aspx)未启用：Foo(-); 酒吧（-）; 巴兹（-）；

    3.6\. .NET 2.0 之前的另一个线程中的异常或[`<legacyUnhandledExceptionPolicy>`](http://msdn.microsoft.com/en-us/library/ms228965.aspx)已启用：Foo(+); 酒吧（-）; 巴兹（+）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T00:18:38.343

还有其他几个选项（当一家公司认为交易捕获了一切时，The Daily WTF 中提到了一个），即操作系统关闭、任务被终止以及机器断电（别笑，它确实发生了） ）。其中一些你可以使用 Form_Closing 事件干净地处理，例如（操作系统关闭），但有些你不能。操作系统和其他应用程序（例如，崩溃时的 VS）通过每 X 分钟保存一个临时状态来绕过这些情况。如果该状态存在，则应用程序意外终止。如果不存在这样的状态，则应用程序干净地退出并且数据被正确保存。

# mysql - MySQL：使用一个查询的结果作为另一个查询的输入

> ID：15259434
> 
> 赞同：0
> 
> 时间：2013-03-06T22:32:30.283
> 
> 标签：mysql, join, subquery, resultset

我有一个庞大的数据库，其中某个查询大约需要 7 秒才能返回结果，因为每个查询在其他计算中都会进行多次计数。为了加快速度，我想创建一个已经计算和存储这些计数的新查找表。

我知道我可以很容易地编写一个程序来填充表格，但我想知道是否有一种方法可以在**没有**外部处理的情况下生成相同的结果集。

例如，结果集来自：

`SELECT DISTINCT city, state FROM lkp_city_state AS locations;`

现在，对于这些城市/州组合中的每一个，我想计算其中的法拉利和兰博基尼的数量。类似的东西

```
SELECT COUNT(*) as num_ferarris FROM cars WHERE manufacturer = 'ferarri' AND city = locations.city AND state = locations.state
    JOIN
SELECT COUNT(*) as num_lambos FROM cars WHERE manufacturer = 'lamborghini' AND city = locations.city AND state = locations.state` 
```

理想的结果集列将类似于：

`city | state | num_ferarris | num_lambos`

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:44:15.907

您可以在一个查询中直接加入您的列表

```
SELECT 
      locations.city,
      locations.state,
      cars.manufacturer,
      COUNT(*)
   FROM cars 
      JOIN lkp_city_state AS locations;
         on cars.city = locations.city
        and cars.state = locations.state
   WHERE 
         cars.manufacturer = 'ferarri' 
      OR cars.manufacturer = 'lamborghini'
   GROUP BY
      locations.city,
      locations.state,
      cars.manufacturer 
```

如果您希望它在一行中，您可以旋转结果

```
SELECT 
      locations.city,
      locations.state,
      sum( case when cars.manufacturer = 'ferarri' then 1 else 0 end ) as Num_Ferarri,
      sum( case when cars.manufacturer = 'lamborghini' then 1 else 0 end ) as Num_Lambos
   FROM cars 
      JOIN lkp_city_state AS locations;
         on cars.city = locations.city
        and cars.state = locations.state
   WHERE 
         cars.manufacturer = 'ferarri' 
      OR cars.manufacturer = 'lamborghini';
       GROUP BY
          locations.city,
          locations.state, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:50:03.090

首先，考虑使用`indexes`. 我过去没有使用它们，但最近证实它们在加速查询方面做得非常好。

其次，我认为这样的事情可以奏效：

```
SELECT * FROM
(    SELECT 
      c.city, c.state, COUNT(*) as num_lambo
    FROM cars AS c
    LEFT JOIN locations
      ON  locations.city = c.city AND locations.state = c.state
    WHERE manufacturer = 'lambo' )A

JOIN

(    SELECT 
      c.city, c.state, COUNT(*) as num_ferr
    FROM cars AS c
    LEFT JOIN locations
      ON  locations.city = c.city AND locations.state = c.state
    WHERE manufacturer = 'ferrari' )B 
```

[SQL Fiddle 测试](http://sqlfiddle.com/#!2/77cda/17)

# php - 如何获取另一个数组内的数组的值

> ID：15259438
> 
> 赞同：2
> 
> 时间：2013-03-06T22:32:48.497
> 
> 标签：php

我有这个：

```
Array
(
  [28] => Array
    (
        [name] => HTC Touch HD
    )
) 
```

主数组中只有一个数组，我只有名称的值。问题是我不知道索引（28）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:34:01.790

您`array_values`通常可以使用来摆脱任何奇怪的键：

```
$normal = array_values($arr);
$normal[0]['name'] 
```

或者在这种特殊情况下，`end`这只是有点hacky：

```
end($normal)['name'] 
```

[http://codepad.viper-7.com/cApBjK](http://codepad.viper-7.com/cApBjK)

（是的，`reset`还有`first`这样的工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:35:12.190

你也可以只使用

```
$array = array_pop($array); 
```

然后获取`name`元素：

```
$array['name'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:41:14.903

非常不言自明:)

```
<?php
$array = array(
    28 => array(
        'name' => 'HTC Touch HD'
    )
);

$key = current(array_keys($array));

echo '<pre>';
print_r($array[$key]);
echo '</pre>';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:37:08.117

你可以尝试这样的事情：

```
 reset($outerArray);
    $innerArray = current($outerArray); 
```

现在你应该可以访问你想要的值了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T22:36:24.557

如果您不知道数组的结构，可以使用[foreach](http://php.net/manual/en/control-structures.foreach.php)构造。

# javascript - 用 d3 绘制非连续线

> ID：15259444
> 
> 赞同：24
> 
> 时间：2013-03-06T22:33:26.350
> 
> 标签：javascript, d3.js

我正在使用 d3.js 制作一个简单的折线图。我想知道是否有办法在图表中创建“洞”，即在没有可用数据的情况下是否可以中断或切断线。

我正在考虑从域中删除我不需要的地方，或者在特定段中将线宽设置为 0，但我找不到执行其中任何一个的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-06T22:51:23.207

D3[行](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line)生成器有一个内置函数来执行此操作，[line.defined](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line_defined)。您可以使用此函数来控制定义行的位置和未定义行的位置（例如丢失数据的位置。）如果您想在点数组中的第二个值是 javascript NaN 值时使行未定义，您可以说：

```
line.defined(function(d) { return !isNaN(d[1]); }); 
```

[这](http://bl.ocks.org/mbostock/3035090)是一个很好的例子。

# java - 如何去除服务之间的重复代码

> ID：15259446
> 
> 赞同：1
> 
> 时间：2013-03-06T22:33:31.163
> 
> 标签：java, design-patterns, service, soa

我有 10 个原子服务，每个都有自己的实体。（每个服务的单独项目）

在每个服务中，我都有一个 Helper，它做的事情完全相同，但取决于它们的实体。

我想停止在每个服务上重复代码，所以我正在创建一个实用服务，它将为其他人提供该帮助，我的问题来了：

如果我在帮助程序和每个服务的实体之间有这种依赖关系，我该怎么做？

这是帮助程序的一个示例：

```
...
SomethingPK somethingPK = toSomethingPK(something);
SomethingEntity somethingEntity = (SomethingEntity)session.get(SomethingEntity.class, somethingPK);
somethingEntity = toSomethingEntity(something);
AnotherEntity another = new AnotherEntity();
//attribute sets
somethingEntity.setAnother(another);
... 
```

每个服务都有自己的 SomethingPK、SomethingEntity 和 AnotherEntity 作为 Hibernate 上的映射实体。我怎样才能松开这个连接？

说得通？

*今天：重复的代码如*

**服务ABC项目**

```
abc.entities.AbcType (DTO)
abc.entities.AbcEntity (Entity)
abc.entities.AbcPK (Entity's PK)
abc.entities.AbcAnotherEntity (Entity)
abc.helpers.CommonHelper (Bean)

abc.helpers.CommonHelpers.createSomethingThatIsNotBusinessLogic(Session session, AbcType abc) {
        ...
        AbcPK key = parseToAbcPK(abc);
        AbcEntity abcEntity = (AbcEntity)session.get(AbcEntity.class, key);
        abcEntity = parseToAbcEntity(abc);
        AbcAnotherEntity abcAnother = new AbcAnotherEntity();
        AbcEntity.setAnother(another);
        ...
    } 
```

**服务XYZ项目**

```
xyz.entities.XyzType
xyz.entities.XyzEntity
xyz.entities.XyzPK
xyz.entities.XyzAnotherEntity
xyz.helpers.CommonHelper

xyz.helpers.CommonHelpers.createSomethingThatIsNotBusinessLogic(Session session, XyzType xyz) {
        ...
        XyzPK key = parseToXyzPK(xyz);
        XyzEntity xyzEntity = (XyzEntity)session.get(XyzEntity.class, key);
        xyzEntity = parseToXyzEntity(xyz);
        XyzAnotherEntity xyzAnother = new XyzAnotherEntity();
        XyzEntity.setAnother(another);
        ...
    } 
```

*需要重构来实现这样的事情：*

**服务ABC项目**

```
abc.entities.AbcType (DTO)
abc.entities.AbcEntity (Entity)
abc.entities.AbcPK (Entity's PK)
abc.entities.AbcAnotherEntity (Entity) 
```

**服务XYZ项目**

```
xyz.entities.XyzType
xyz.entities.XyzEntity
xyz.entities.XyzPK
xyz.entities.XyzAnotherEntity 
```

**服务公用事业项目**

```
utilities.CommonHelper

utilities.helpers.CommonHelpers.createSomethingThatIsNotBusinessLogic(Session session, ?Type type) {
        ...
        //same code prepared to deal with any entity, entityPK or type.
        ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:43:13.740

解决了！

A 将公共实体移至公用事业服务项目，但我将表名留空。在每个服务中，我为指向实用程序服务上的那些实体的外部实体创建了一个映射，并配置了它们的表名。然后我能够将我所有的助手移动到实用程序服务，因为所有相关实体都在那里。所以，最后，服务之间没有重复的代码，我仍然可以为每个服务创建一个不同的表。

无论如何，感谢您的所有帮助！采用一些不同的方法来尝试解决问题真是太好了。

如何将此问题标记为已解决？

# ember.js - Ember RC1：需要访问才能在路由事件中查看

> ID：15259448
> 
> 赞同：1
> 
> 时间：2013-03-06T22:33:41.210
> 
> 标签：ember.js

在之前的 Ember 版本中，javacsript 事件对象将作为参数传递给路由的事件处理函数。在 RC1 中不再通过。我也找不到任何方法从路线中获取视图对象。我正在构建一个表单以使用 FormData 对象将文件上传到后端数据存储区。我知道我可以在视图而不是路由中处理事件，但我更愿意处理所有在路由器本身中更改路由器状态的事件。

此代码在以前的版本中有效：

```
add_asset: Ember.Route.extend({
   upload: function(router, event) {
      var form = event.target.form;
      var view = event.view;
      var form_data = new FormData(form);
      var uploadModel = new App.Asset();
      var success_callback = function(){
         console.log('uploaded!');
         router.transitionTo('root.portfolios.show_portfolio', event.context)
      };
      var error_callback = function() {
         console.log('error uploading');
      };
      uploadModel.upload(form_data, success_callback, error_callback);
  }
}); 
```

我无法找到使用路由事件处理程序获取事件对象或视图对象的方法。这可能吗？谢谢。

# slidify - 在 slideify 中自定义幻灯片布局

> ID：15259455
> 
> 赞同：7
> 
> 时间：2013-03-06T22:34:08.907
> 
> 标签：slidify

我有兴趣在我的 index.Rmd 文件中为不同的幻灯片使用不同的布局。[复制此处](http://ramnathv.github.com/slidify/customize.html)和下方提供的模板后，我在文件`assets/layouts`夹中创建了一个 .html 文件。

```
<slide class="{{ class }}" id="{{ id }}">
  <hgroup>
    {{{ header }}}
  </hgroup>
  <article>
    <hr noshade size=4 color='red'>  
    {{{ content }}}  
    <div class='left' style='float:left;width:48%'>
     {{{ left }}}
    </div>    
    <div class='right' style='float:right;width:48%'>
     {{{ right }}}
    </div>
  </article>
</slide> 
```

到目前为止，还不清楚：

1）为什么我的幻灯片中的幻灯片是空白的并且没有显示以下任何内容：

```
---
#testing
hello

*** left

- point a
- point b
- point c

*** right

- point a
- point b
- point c 
```

* * *

2）如何从我的资产文件夹中为**单个幻灯片**而不是整个幻灯片“调用”自定义布局

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T02:42:08.710

您可以将幻灯片的布局指定为元数据。例如，如果您将问题中描述的布局保存为`twocol.html`，`assets/layouts`那么您可以在幻灯片级别元数据中指定布局。A`&`指定布局，a`.`指定类，a`#`指定 id。您还可以自由地将自己的自定义元数据定义为`key:value`对。

```
--- &twocol

## Two Columns

*** left

- point a
- point b
- point c

*** right

- point a
- point b
- point c 
```

# c# - TCPLister Pickel

> ID：15259463
> 
> 赞同：0
> 
> 时间：2013-03-06T22:34:47.497
> 
> 标签：c#, tcplistener

所以我的好老板给我带来了一个问题，因为我知道我在 C# 方面的方式（不是很好，但有点），并询问是否可以构建一个简单的 Syslog 服务器，而不是出去购买一个。所以我当然接受了挑战，然后去了城里。我开发了一个 Alpha 版本（它让应用程序将所有内容直接输入到数据库中），但他问我是否可以采用客户端与侦听器的方法（PIA 但合理）。现在我相信我已经正确构建了 TCPClient，但我被困在 TCPlistener 部分，如果有人能指出我正确的方向，我希望得到一些帮助。以下是我迄今为止编写的 3 个程序（alpha、客户端、以及部分侦听器）

Α：

```
 EventLog alog = new EventLog();
   alog.Log = "Application";
   alog.MachineName = ".";
   DateTime fifteenMinsAgo = DateTime.Now.AddMinutes(-15);
   foreach (EventLogEntry entry in alog.Entries)
   {
   if (entry.TimeGenerated > fifteenMinsAgo)
   {
   SqlConnection sql = new SqlConnection("Server=x.x.x.x;Database=yy;User ID=abcd;password=efg");
   sql.Open();
   SqlCommand cmd = new SqlCommand(@"insert into ApplicationLog(Level,DateTime,Source,EventID,TaskCategory,ServerName,Message) values (@Level,@DateTime,@Source,@EventID,@TaskCategory,@ServerName,@Message)", sql);
   cmd.Parameters.AddWithValue("@Level", entry.EntryType);
   cmd.Parameters.AddWithValue("@DateTime", entry.TimeGenerated);
   cmd.Parameters.AddWithValue("@Source", entry.Source);
   cmd.Parameters.AddWithValue("@EventID", entry.InstanceId);
   cmd.Parameters.AddWithValue("@TaskCategory", entry.Category);
   cmd.Parameters.AddWithValue("@ServerName", entry.MachineName);
   cmd.Parameters.AddWithValue("@Message", entry.Message);
   cmd.ExecuteNonQuery();
   sql.Close();

            }
        } 
```

TCP客户端：

```
 EventLog alog = new EventLog();
   alog.Log = "Application";
   alog.MachineName = ".";
   DateTime fifteenMinsAgo = DateTime.Now.AddMinutes(-15);
   foreach (EventLogEntry entry in alog.Entries)
   {
   if (entry.TimeGenerated > fifteenMinsAgo)
   {
     TcpClient client = new TcpClient();
     IPEndPoint serverendpoint = new IPEndPoint(IPAddress.Parse("x.x.x.x"), yyyy);
     client.Connect(serverendpoint);
     NetworkStream clientstream = client.GetStream();
     ASCIIEncoding encoder = new ASCIIEncoding();
     byte[] buffer = encoder.GetBytes(entry.ToString());
     clientstream.Write(buffer, 0, buffer.Length);
     clientstream.Flush();
            }
        } 
```

TCP监听器：

```
 TcpListener tcpServerListener = new TcpListener(IPAddress.Parse("127.0.0.1"), yyyy);
    tcpServerListener.Start();
    Console.WriteLine("Server Started");
    Socket serverSocket = tcpServerListener.AcceptSocket();
    if (serverSocket.Connected)
    {
      NetworkStream serverSockStream = new NetworkStream(serverSocket);
      serverSockStream.ReadByte();
    } 
```

# jakarta-mail - Java 邮件：无法连接到 SMTP 主机：...，端口：...，java.net.ConnectException：操作超时

> ID：15259464
> 
> 赞同：2
> 
> 时间：2013-03-06T22:34:47.980
> 
> 标签：jakarta-mail, java-7

提前感谢您对此的任何帮助。Java Mail 一直对我有用，但现在它抛出了这个烦人的异常：

**//例外：**

```
run:
DEBUG: setDebug: JavaMail version 1.4.6
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "xxxxxx", port 25, isSSL false
Exception in thread "main" java.lang.RuntimeException: javax.mail.MessagingException: Could not connect to SMTP host: xxxxxx, port: 25;
  nested exception is:
    java.net.ConnectException: Operation timed out
    at vesso.mail.TestMail.sendMail(TestMail.java:79)
    at vesso.mail.TestMail.main(TestMail.java:26)
Caused by: javax.mail.MessagingException: Could not connect to SMTP host: mail.mentorlicitacao.com.br, port: 25;
  nested exception is:
    java.net.ConnectException: Operation timed out
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1962)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654)
    at javax.mail.Service.connect(Service.java:295)
    at vesso.mail.TestMail.sendMail(TestMail.java:71)
    ... 1 more
Caused by: java.net.ConnectException: Operation timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:321)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:237)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1928)
    ... 4 more
Java Result: 1
BUILD SUCCESSFUL (total time: 1 minute 19 seconds) 
```

我尝试与 Mail.app 连接（使用 MacOS），它运行良好。

**//代码：**

```
 final String host = "xxxx";
    final int port = 25;
    final String username = "xxxx";
    final String password = "xxxx";

    Properties props = new Properties();

    props.put("mail.smtp.auth", "true");

    Session session = Session.getInstance(props,
        new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
        });
    session.setDebug(true);

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(username));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(username));
        message.setSubject("Teste");
        message.setText("Bla, Bla, Bla!");

        Transport transport = session.getTransport("smtp");
        transport.connect (host, port, username, password);
        transport.sendMessage(message, message.getAllRecipients());
        transport.close();  

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:03:03.510

通过将端口从 25 更改为 587 解决了问题。我得出的结论是我的 ISP 阻止了此端口。

感谢大家。

# ravendb - WebAPI 和 OData - 返回带有先决条件的 Queryable

> ID：15259466
> 
> 赞同：3
> 
> 时间：2013-03-06T22:34:58.940
> 
> 标签：ravendb, odata, asp.net-web-api

我有一个简单的 GET 方法，它返回 IQueryable，并且对查询有一些先决条件：

```
[Queryable(HandleNullPropagation = HandleNullPropagationOption.False)]
public IQueryable<Message> Get()
{
    using (var session = RavenStore.GetSession())
    {
        var messages = session.Query<Message>().Where(x => x.TargetUserId == this.User.Identity.Name || x.SourceUserId == this.User.Identity.Name);
        return messages;
    }
} 
```

这是 RavenDB，顺便说一句。我遇到的问题是，在执行时，用户 ID 被替换为“[EMPTY_STRING]”，所以它运行的实际查询是这样的：

> 'TargetUserId:[[EMPTY_STRING]] OR SourceUserId:[[EMPTY_STRING]]' 在索引.....

这显然是错误的。

如果我返回 List 而不是 IQueriable - 它工作正常，因此管道中的某些内容会更改查询。有没有人对如何使这项工作有任何见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:44:17.230

当首先将值复制到局部变量时，它应该可以工作：

```
var userName = this.User.Identity.Name;
return session.Query<Message>()
              .Where(x => x.TargetUserId == userName ||
                          x.SourceUserId == userName); 
```

这是因为在执行查询时，Raven 客户端查询翻译器无法解析谓词中表达的对象。通过将它们复制到局部变量中，您将常量值传递给表达式。

我相信这与*闭包*有关。也许对表达式树有更直接了解的人可以在评论中更好地解释。

# javascript - 如何用javascript知道输入位置

> ID：15259467
> 
> 赞同：0
> 
> 时间：2013-03-06T22:35:02.160
> 
> 标签：javascript, jquery

我看到了这个验证插件[http://demos.usejquery.com/ketchup-plugin/](http://demos.usejquery.com/ketchup-plugin/)我想知道，你如何确定输入的位置？如您所见，使用该插件会显示一条消息，但它如何确切知道有错误的输入在哪里并将消息准确地放在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:41:14.503

该插件的源代码，特别是错误消息容器的源代码如下所示：

```
createErrorContainer: function(form, el) {      
  if(typeof form == 'function') {
    this.defaults.createErrorContainer = form;
    return this;
  } else {
    var elOffset = el.offset();

    return $('<div/>', {
             html   : '<ul></ul><span></span>',
             'class': 'ketchup-error',
             css    : {
                        top : elOffset.top,
                        left: elOffset.left + el.outerWidth() - 20
                      }
           }).appendTo('body');
  }
}, 
```

如您所见，它使用 .offset() 方法来获取输入字段相对于文档的位置。

更多信息在这里：[http ://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:39:48.340

在原始 JavaScript 中获取元素（可能通过 id）后：

```
element.offsetLeft
element.offsetTop 
```

或者使用 jQuery 的跨浏览器[.offset()](http://api.jquery.com/offset/)函数。

为了验证 Html5 已经这样做了。您真的不需要使用 Javascript 进行验证。当浏览器不支持它时，还有可用的[pollyfills填充对 html5 表单验证的支持。](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

# javascript - 如果在函数中用作不能再更改的参数， foo 会变成什么？

> ID：15259471
> 
> 赞同：0
> 
> 时间：2013-03-06T22:35:16.280
> 
> 标签：javascript, function

我究竟将什么作为参数附加到函数#1？一个新对象，一个字符串，还是别的什么？它看起来不像是参考，因为更改 foo 没有任何效果。据我所见，bar1、bar2 和 bar 3 的行为完全相同。它们之间有区别吗？

```
foo = 5;

bar1 = (function(){return fooBar(foo);}()); // <--- #1
bar2 = (function(){return fooBar("5");}()); // <--- #2
bar3 = (function(){return fooBar(5);}());   // <--- #3

alert(bar1);
alert(bar2);
alert(bar3); 
```

编辑 -> 根据要求，fooBar 函数

```
var p = 3;

function fooBar(n)
{
    return (p*n);
}

foo = 5;
bar = (function(){return fooBar(foo);}());

alert(bar); 
```

编辑 2

```
function fooBar(n)
{
    return (n[0]+n[1]);
}

foo = [20, 15];
bar = (function(){return fooBar(foo);}());

foo = [4, 565];

alert(bar); // 35 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:42:10.993

由于您的`foo`变量是全局变量（没有`var`在外部范围内定义关键字 / 定义），因此它也可以在您的匿名函数中使用。

然而，你的`fooBar`函数是未定义的，所以很难说出它在做什么。

此外，最好使用`console.dir()`转储变量，因为它还显示类型。

编辑：显然`console.dir()`不显示类型（至少在 Chrome 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:43:51.760

`bar1`成为返回的结果`fooBar(foo)`is`fooBar(5)`并且计算结果为`3*5`, finally`15`

并且因为这 3 个语句被编写为自调用函数`function(){ .... }()`，所以在该语句之后更改 foo`bar1 = ...`将无效，因为 foo 的值`foo`已经传递给它。

# python - 传递 4 位数字以查看

> ID：15259472
> 
> 赞同：0
> 
> 时间：2013-03-06T22:35:16.420
> 
> 标签：python, regex, django

为什么这不起作用：

```
(r'^something/(?P<id1>\d+)/(?P<id2>\d+)/(?:(?P<id3>\d+)/)(?:(?P<id4>\d+)/)?$', 'something'), 
```

我想要实现的是第一个数字是必需的，第三个和第四个是可选的。因此，用户可以将 2、3 或 4 个参数传递给定义如下的视图：

```
def compare(request, id1, id2, id3=None, id4=None): 
```

我当前的代码在传递 3 或 4 个参数时工作，而不是 2 个。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:36:28.653

第三个数字组在您的正则表达式中是强制性的。

```
^something/(?P<id1>\d+)/(?P<id2>\d+)/(?:(?P<id3>\d+)/)?(?:(?P<id4>\d+)/)?$ 
```

此外，如所写，第三组和第四组之后的斜线是强制性的：

```
In [4]: p = re.compile(r'^something/(?P<id1>\d+)/(?P<id2>\d+)/(?:(?P<id3>\d+)/)?(?:(?P<id4>\d+)/)?$')

In [5]: p.match('something/1/2/3/4/').groups()
Out[5]: ('1', '2', '3', '4')

In [6]: p.match('something/1/2/3/4').groups()
Out[6]: ('1', '2', '3', None)

In [7]: p.match('something/1/2/3/').groups()
Out[7]: ('1', '2', '3', None)

In [8]: p.match('something/1/2/3').groups()
Out[8]: ('1', '2', None, None)

In [9]: p.match('something/1/2/').groups()
Out[9]: ('1', '2', None, None) 
```

您可能希望将第三组移至第四组，并将第四组设为可选：

```
In [12]: p = re.compile(r'^something/(?P<id1>\d+)/(?P<id2>\d+)/(?:(?P<id3>\d+))?(?:/(?P<id4>\d+)/?)?$')

In [13]: import re
KeyboardInterrupt

In [13]: p.match('something/1/2/3/4').groups()
Out[13]: ('1', '2', '3', '4')

In [14]: p.match('something/1/2/3/').groups()
Out[14]: ('1', '2', '3', None)

In [15]: p.match('something/1/2/3').groups()
Out[15]: ('1', '2', '3', None)

In [16]: p.match('something/1/2/').groups()
Out[16]: ('1', '2', None, None) 
```

# eclipse - Windows 显示设置的 SWT 问题

> ID：15259474
> 
> 赞同：1
> 
> 时间：2013-03-06T22:35:33.720
> 
> 标签：eclipse, swt

我有一个用 SWT 开发的固定外壳大小 (800x600) 的应用程序。问题是，如果我更改 Windows 的显示设置（从小到中/大），应用程序的少数部分会被截断。那么有什么方法可以根据显示设置的选择给出动态尺寸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:05:19.893

固定的外壳尺寸很少是正确的方法。相反，使用布局来设置约束并让 SWT 确定大小。这将使 dpi 更改更有可能正常工作，并且应用程序更有可能在其他操作系统或不同版本的 Windows 上看起来正确。

# php - 如何使用 php 优化/过滤来自 mysql 数据库的搜索结果？

> ID：15259477
> 
> 赞同：1
> 
> 时间：2013-03-06T22:35:53.100
> 
> 标签：php, javascript, jquery, mysql, xhtml

我正在尝试开发我的网站，需要一些支持。所以我的网页搜索产品信息并返回适当的结果。当用户在搜索框中搜索关键字或产品标题并提交查询时，它工作得非常好，但现在获得的结果列表，我想要一个过滤器搜索用户可以根据价格、品牌、类别等过滤搜索结果。

我在 mysql 数据库中有两个表 1：product_info 列 productid、title、description、brand、category、price 2：product_image productid,imageid,imagename,image

请帮助我了解我应该如何开始这个过程。我在网上看过，他们对使用哪个脚本有多种建议，但我想使用最简单的方法，因为我对这一切都不熟悉。您可以提出与此主题相关的任何建议。谢谢:)

只是为了让您知道，对于单个搜索框，我使用了以下代码。

```
$query= "
    SELECT * 
    FROM `product_info`
    WHERE `title` LIKE '% ".$search_name." %'
    OR `title` LIKE '% ".$search_name."'
    OR `title` LIKE '".$search_name." %'
    OR `title` = '".$search_name."'";

    $query_run=mysql_query($query);

    if(mysql_num_rows($query_run)>=1) 

    {
        echo'Showing '.mysql_num_rows($query_run).' results for items with "'.$search_name.'" in    the title:';

//the result is displayed in the table format.

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:55:35.580

答案是您不为此使用 php。拥有数据库的整个想法是您对它运行查询，以便根据标准从中选择数据。因此，您为查询构建了一个合适的 WHERE 子句，该子句将仅提取与用户请求的条件匹配的行。

# c++ - 声明混合类型的多维数组的最有效方法是什么？

> ID：15259478
> 
> 赞同：0
> 
> 时间：2013-03-06T22:35:56.027
> 
> 标签：c++, arrays, visual-c++, vector

我正在创建一个类来帮助创建 excel 文件。我正在考虑在计算最终输出之前将工作表数据存储在内存中的各种方法。理想情况下，我想做一些类似的事情，`std::string myArray["Sheet1"][3][7] = "this is the value of row 3 column 7 in worksheet Sheet1"`但这在 C++ 中似乎是不可能的......或者是吗？

有什么简单的方法可以解决这个问题，还是我必须创建一个多维向量并有一个带有相应索引的单独数组来确定工作表名称？IE，

```
std::vector<std::vector<std::vector<std::string> > > Worksheet;
std::vector<std::string> WorksheetNames;
// whenever I create a new worksheet...
WorksheetNames[7] = "Sheet1";
// and then to reference that worksheets' data...
Worksheet[7][1][1] = "value of row 1 column 1"; 
```

* * *

```
class ExcelSheet {
    string Code, Worksheet, Style; // temp vars for data manipulation
    std::vector<std::vector<std::vector<std::string> > > Worksheet;

public:
    ExcelSheet();
    ExcelSheet(int,int);
    ~ExcelSheet();
    void Create();
    void Destroy();
    bool SetEntryValue(std::string szWorksheet, int nColumn, int nRow);
    bool SetEntryStyle(std::string szWorksheet, int nColumn, int nRow);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:43:28.510

您正在寻找（嵌套的）[关联容器](http://en.cppreference.com/w/cpp/container)。这样的事情应该让你开始：

```
typedef std::map< unsigned, std::string > columns;
typedef std::map< unsigned, columns > rows;
typedef std::map< std::string, rows > sheets;

sheets my_sheets;
my_sheets["Sheet1"][3][7] = "hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:38:36.820

我想 a`std::unordered_map<string, ExcelSheet*>`会比存储一个字符串向量来引用您的工作表更好。

通过这种方式，您可以在恒定时间内访问单个工作表，而不必担心很多事情。当然，这在内存中不会有连续的布局，但我想你不需要它。您仍然可以将名称存储在特定工作表中（并在`std::vector`需要时将它们存储在 a 中），并将地图用作按名称访问特定工作表的配对。

# matlab - Matlab中的二维对象数组

> ID：15259482
> 
> 赞同：0
> 
> 时间：2013-03-06T22:36:03.117
> 
> 标签：matlab

我创建了一个名为神经元的句柄子类，我想将其实例放入 x,y 可寻址数据结构中。对象与在 x,y 网格中“旁边”的其他实例进行交互。我创建了另一个名为 nnet 的类，它有一个我想成为 NxN 神经元数组的 Network 属性。每个神经元都有一个属性，它是“旁边”其他神经元的一维句柄数组，但我还想要一个网格数据结构，我可以用它来通过它们的 x，y 来识别神经元句柄。类的开头看起来像这样，然后构造函数去识别所有邻居并将句柄附加到它们。

```
classdef nnet < handle
%NNET structure of interconnected neuron objects

properties
    Network;
end

properties(Constant=true)
    AllPositions = cellstr(['NW'; 'N '; 'NE';  ...
                            'W ';       'E ';  ...
                            'SW'; 'S '; 'SE']);
end

methods
    function obj = nnet(dimX, dimY)
        % Constructor creates and fills a net with X by Y neurons
        % and automatically connects neighbors
        % fill initial array
        for y = 1:dimY
            for x = 1:dimX
                obj.Network(x,y) = neuron(x,y);
            end
        end 
```

Matlab 似乎不喜欢 n-dim 数组中除了 double 之外的任何东西，因为我收到了这样的抱怨“无法从神经元转换为 double”。我可以使用的内置数据结构的任何想法或如何修改和使其工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:40:12.780

在任何分配之前使 Network 成为一个单元格数组

```
obj.Network = cell(dimX, dimY);
for y = 1:dimY
    for x = 1:dimX
        obj.Network(x,y) = neuron(x,y);
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:19:53.273

在开始向数组添加元素之前，请创建一个空数组`neuron`s。

```
obj.Network = neuron.empty; 
```

`empty`是所有类的内置方法，专门为此设计的。

# c# - 使用 linq 规范化对象

> ID：15259486
> 
> 赞同：3
> 
> 时间：2013-03-06T22:36:14.150
> 
> 标签：c#, linq

我有`IEnumerable<RuleSelection>`这些属性：

```
public class RuleSelection{
  public int RuleId { get; set;}
  public int? CriteriaId { get; set; }
  public int? CriteriaSourceId{ get; set; }
} 
```

`RuleId`in`RuleSelection`不是唯一的。

我可以编写一个 linq 查询来将这些规范化为`IEnumerable<Rule>`：

```
public class Rule{
  public int RuleId { get; set; }
  public IEnumerable<int> Criteria { get; set; }
  public IEnumerable<int> CriteriaSource { get; set; }
} 
```

`Rule.RuleId`将是唯一的，并且属性`Criteria`将分别`CriteriaSource`包括所有的`CriteriaId`' 和`CriteriaSourceId`' `RuleId`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:43:36.577

听起来你想要这样的东西：

```
var rules = selections.GroupBy(rs => rs.RuleId)
                      .Select(g => new Rule {
                                  RuleId = g.Key,
                                  Criteria = g.Select(rs => rs.CriteriaId)
                                              .Where(c => c != null)
                                              .Select(c => c.Value)
                                              .ToList(),
                                  CriteriaSource = g.Select(rs => rs.CriteriaSourceId)
                                                    .Where(c => c != null)
                                                    .Select(c => c.Value)
                                                    .ToList(),
                              }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:53:11.760

使用我的 FullOuterGroupJoin 扩展方法

*   [LINQ - 完全外部联接](https://stackoverflow.com/questions/5489987/linq-full-outer-join/13503860#13503860)

你可以：

```
theRules.FullOuterGroupJoin(theRules,
        r => r.RuleId,
        r => r.RuleId,
        (crit, critSource, id) => new Rule { 
            RuleId = id, 
            Criteria = crit
                .Where(r => r.CriteriaId.HasValue)
                .Select(r => r.CriteriaId.Value),
            CriteriaSource = critSource
                .Where(r => r.CriteriaSourceId.HasValue)
                .Select(r => r.CriteriaSourceId.Value),
        }
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:45:28.133

要写这个：

```
var rules =
    from sel in selections
    group sel by sel.RuleId into rg
    select new Rule {
        RuleId = rg.Key,
        Criteria = rg.Select(r => r.CriteriaId).FilterValues(),
        CriteriaSource = rg.Select(r => r.CriteriaSourceId).FilterValues(),
    }; 
```

我创建了以下`FilterValues`扩展（以消除重复）：

```
public static IEnumerable<T> FilterValues<T>(
    this IEnumerable<T?> items)
    where T : struct
{
    // omitting argument validation
    return 
        from item in items 
        where item.HasValue
        select item.Value;
} 
```

我着手提供基本上是 JonSkeet 答案的纯查询语法版本。为了消除属性分配的重复，我放弃了这一点，并最终采用了这种组合扩展和查询语法的方法。

# mongodb - 列出所有键上唯一 Mongo DB 值的计数因子

> ID：15259493
> 
> 赞同：4
> 
> 时间：2013-03-06T22:36:43.043
> 
> 标签：mongodb, aggregation-framework, pymongo

我正在为我一直在使用的 MongoDB 准备一个描述性的“模式”（quelle horreur）。

我使用出色的[variety.js](https://github.com/variety/variety)创建了所有键的列表并显示每个键的覆盖范围。但是，如果与键对应的值具有一小组值，我希望能够将整个集合列为“可用值”。在 R 中，我会将这些视为分类变量的“因素”，即性别：[“M”、“F”]。

我知道我可以只使用 R + RMongo，查询每个变量，并且基本上执行与创建直方图相同的过程，但我想知道正确的 Mongo.query()/javascript/Map,Reduce 方法这个。我了解 db.collection.aggregate() 函数正是为此而设计的。

在问这个之前，我参考了：

*   [http://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)
*   [http://docs.mongodb.org/manual/reference/method/db.collection.distinct/](http://docs.mongodb.org/manual/reference/method/db.collection.distinct/)
*   [如何使用 python 在 mongodb 中查询不同的结果？](https://stackoverflow.com/questions/12007726/how-to-query-for-distinct-results-in-mongodb-with-python)
*   [获取 mongodb 中所有唯一标签的列表](https://stackoverflow.com/questions/4976567/get-a-list-of-all-unique-tags-in-mongodb)
*   [http://cookbook.mongodb.org/patterns/count_tags/](http://cookbook.mongodb.org/patterns/count_tags/)

但不能完全正确地获得管道顺序。因此，例如，如果我有这样的文件：

```
{_id : 1, "key1" : "value1", "key2": "value3"}
{_id : 2, "key1" : "value2", "key2": "value3"} 
```

我想返回类似的东西：

```
{"key1" : ["value1", "value2"]}
{"key2" : ["value3"]} 
```

或者更好，计数：

```
{"key1" : ["value1" : 1, "value2" : 1]}
{"key2" : ["value3" : 2]} 
```

我认识到这样做的一个问题是任何具有各种不同值的值——例如，文本字段或连续变量。理想情况下，如果有超过 x 个不同的可能值，最好截断，比如不超过 20 个唯一值。如果我发现它实际上更多，我会直接查询该变量。

这是不是这样的：

```
db.collection.aggregate(
   {$limit: 20,
    $group: {
        _id: "$??varname",
        count: {$sum: 1}
   }}) 
```

首先，我怎样才能引用 ??varname？每个键的名称？

我看到了这个有 95% 的链接： [Binning and tabulate (unique/count) in Mongo](https://stackoverflow.com/questions/11611024/binning-and-tabulate-unique-count-in-mongo)

和...

```
input data:

{ "_id" : 1, "age" : 22.34, "gender" : "f" }
{ "_id" : 2, "age" : 23.9, "gender" : "f" }
{ "_id" : 3, "age" : 27.4, "gender" : "f" }
{ "_id" : 4, "age" : 26.9, "gender" : "m" }
{ "_id" : 5, "age" : 26, "gender" : "m" } 
```

这个脚本：

```
db.collection.aggregate(
   {$project: {gender:1}},
   {$group: {
        _id: "$gender",
        count: {$sum: 1}
   }}) 
```

产生：

```
{"result" : 
   [
     {"_id" : "m", "count" : 2},
     {"_id" : "f", "count" : 3}
   ],
   "ok" : 1
} 
```

但是我不明白的是，对于具有可能大量返回值的未知数量/名称的键，我如何一般地执行此操作？此示例知道键名称是性别，并且响应集很小（2 个值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T21:47:08.743

如果您已经运行了输出集合中所有键名称的脚本，则可以动态生成聚合框架管道。这意味着要么扩展variety.js 类型脚本，要么只是编写你自己的。

如果传递一个名为“keys”的数组，它有几个非“_id”命名字段（我假设顶级字段并且你不关心数组、嵌入文档等），这就是它在 JS 中的样子.

```
keys = ["key1", "key2"];
group = { "$group" : { "_id" : null } } ;
keys.forEach( function(f) {
     group["$group"][f+"List"] = { "$addToSet" : "$" + f };  } );
db.collection.aggregate(group);
{
    "result" : [
        {
            "_id" : null,
            "key1List" : [
                "value2",
                "value1"
            ],
            "key2List" : [
                "value3"
            ]
        }
    ],
    "ok" : 1
} 
```

# python - 如何让 Jython 与 PIG 一起工作？

> ID：15259499
> 
> 赞同：2
> 
> 时间：2013-03-06T22:37:06.880
> 
> 标签：python, jython, apache-pig

我在服务器上安装了 jython jar 和 Pig。也有猪罐子。有人可以帮助我采取正确的步骤来捆绑它们，以便我可以使用我的 Python UDF 吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T15:58:13.460

根据我在 Pig 中的短暂经验，有两种方法可以做到这一点：您可以将 jar 放在 Pig 的 lib 文件夹中，大约 的某个地方`/usr/share/pig/lib/`，或者使用 grunt（Pig shell）中的特定位置注册 jar，使用：

`REGISTER /path/to/your/jar/jython.jar;`

一旦可用，请使用以下命令从 grunt 注册您的 UDF：

`REGISTER '/path/to/your/udf/udf.py' USING jython as py_udf;`

你可以像这样使用它：`py_udf.my_method(*)`

my_method 是您创建的 python 方法的名称。

# java - JTextArea 中的 BufferedReader 输出

> ID：15259504
> 
> 赞同：1
> 
> 时间：2013-03-06T22:37:16.250
> 
> 标签：java, swing, jtextarea, bufferedreader

我正在尝试从`BufferedReader`另一个类中调用一行我希望能够`JTextArea`在我的主类中输出结果

**这是我的主要课程：**

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;
import java.io.*;
import java.lang.Process.*;

public class FTP {
    public static void main (String []args){
            Runnable runner = new Runnable(){
                public void run()
                {

                    LookAndFeel nimbusLook = new LookAndFeel();
                    nimbusLook.NimbusLookAndFeel();

                    JFrame frame = new JFrame("BNA FTP Diagnose");
                    frame.setVisible(true);
                    frame.setResizable(false);
                    frame.setSize(540, 420);
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLocation(150, 150);

                    JMenuBar menuBar = new JMenuBar();
                    frame.setJMenuBar(menuBar);

                    JMenu fileMenu = new JMenu("File");
                    menuBar.add(fileMenu);
                    final JMenuItem exitMenuItem = new JMenuItem("Exit");
                    fileMenu.add(exitMenuItem);

                    JMenu helpMenu = new JMenu("Help");
                    menuBar.add(new JPanel());
                    menuBar.add(helpMenu);
                    final JMenuItem aboutMenuItem = new JMenuItem("About");
                    helpMenu.add(aboutMenuItem);

                    JPanel titlePanel = new JPanel(new BorderLayout());
                    frame.add(titlePanel, BorderLayout.NORTH);

                    JLabel titleLabel = new JLabel("FTP Diagnose", JLabel.CENTER);
                    titleLabel.setFont(new Font(null, Font.BOLD, 14));
                    titleLabel.setForeground(Color.BLUE);
                    titlePanel.add(titleLabel);

                    JPanel gridPanel = new JPanel(new GridLayout(1, 1));
                    frame.add(gridPanel);

                    JPanel vendorPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
                    gridPanel.add(vendorPanel);

                    final String vendor [] = {"LLesiant" ,"WK-CCH", "Proquest", "Notes", "Research Institute of America", "Thomson", 
                            "BNAI PDF Processing", " TM Portfolios to Indexing", "Postscript to PRODLOGIN1", "www.firstdoor.net", "psp.bna.com", "WEST", "LexisNexis", "McArdle Printing Company", 
                            "Breaking News Email", "Ex Libris", "Pandora", "Bloomberg Law", "Acquire Media Site 1", "Acquire Media Site 2", "Quicksite", "QA Quicksite"};
                    final JComboBox vendorList = new JComboBox(vendor);
                    vendorPanel.add(vendorList);

                    JPanel diagnoseButtonPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
                    gridPanel.add(diagnoseButtonPanel);
                    final JButton diagnoseButton = new JButton("Diagnose");
                    diagnoseButtonPanel.add(diagnoseButton);

                    JPanel centerPanel = new JPanel(new BorderLayout());
                    frame.add(centerPanel, BorderLayout.SOUTH);
                    JPanel commandPanel = new JPanel(new GridLayout(1, 0));
                    centerPanel.add(commandPanel);

                    final JTextArea commandResultArea = new JTextArea(7, 0);
                    JScrollPane scroll = new JScrollPane(commandResultArea, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
                    commandPanel.add(scroll);
                    commandResultArea.setEditable(false);

                    ActionListener buttonListener = new ActionListener(){

                        public void actionPerformed(ActionEvent ae)

                        {
                            int selectedIndex = vendorList.getSelectedIndex();

                            String llesiant = "ftp.llesiant.com";
                            String wkCCH = "FTP1.cch.com";
                            String proquest = "ftp.proquest.com";
                            String notes = "notes5.bna.com";

                            //String lineThree = null;

                            CommandClass readCommand = new CommandClass();

                            if (selectedIndex == 0)
                            {
                                readCommand.getCommand(llesiant);
                            }
                            else if (selectedIndex == 1)
                            {
                                readCommand.getCommand(wkCCH);
                            }
                            else if (selectedIndex == 2)
                            {
                                readCommand.getCommand(proquest);
                            }
                            else if (selectedIndex == 3)
                            {
                                readCommand.getCommand(notes);
                            }

                        }

                    };
                    diagnoseButton.addActionListener(buttonListener);

                    ActionListener exitListener = new ActionListener (){

                        public void actionPerformed(ActionEvent el)
                        {

                            if (el.getSource()== exitMenuItem)
                            {
                                JOptionPane.showMessageDialog(null, "FTP Program will exit now!");
                                System.exit(0);
                            }

                        }

                    };

                    exitMenuItem.addActionListener(exitListener);

                    ActionListener aboutListener = new ActionListener()
                    {
                        public void actionPerformed(ActionEvent al)
                        {

                            if (al.getSource()== aboutMenuItem)

                            {
                            JOptionPane.showMessageDialog(null, "This Software was made for Editors to. \nDiagnose BNA Bloomberg client FTP site.");

                            }
                        }

                    };
                    aboutMenuItem.addActionListener(aboutListener);             
                    }

            };
            EventQueue.invokeLater(runner);

        }

} 
```

**这是我的命令类：**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import javax.swing.JOptionPane;

public class CommandClass {

    public String line;

    public void getCommand(String ftpSite)

    {

        String command = "ping ";

        try
        {
        Process p = Runtime.getRuntime().exec(command +ftpSite);

        BufferedReader readOutput = new BufferedReader(new InputStreamReader (p.getInputStream()));

        JOptionPane.showMessageDialog(null, "FTP is connected");

        while ((line = readOutput.readLine()) != null)
        {

                System.out.println(line);   

        }
        readOutput.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();

        }

    }

} 
```

**这是我的外观类：**

```
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class LookAndFeel {

    public void NimbusLookAndFeel()
    {

        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            // If Nimbus is not available, you can set the GUI to another look and feel.
        }

    }

} 
```

我正在尝试做的事情：输出在控制台中打印得很好，但我希望能够在邮件类的 JTextArea 中打印出来，我也尝试返回字符串行的值，但它似乎一直返回 null。如果我想做的事情是不可能的。有没有办法让我的 JTextArea.setText (commandCLass)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:45:16.463

像这样改进您的`getCommand`方法以正确返回`String`并在主类中使用该返回值以显示在`JTextArea`

```
public String getCommand(String ftpSite){
    String command = "ping ";
    StringBuffer output = new StringBuffer();
    try{
         Process p = Runtime.getRuntime().exec(command +ftpSite);
         //BufferedReader readOutput = new BufferedReader(new InputStreamReader (p.getInputStream()));
        InputStreamReader ir = new InputStreamReader (p.getInputStream());
        int outputChar = 0;
        while((outputChar = ir.read()) != -1){
            output.append((char)outputChar);
        if(!ir.ready()){ // If the next read is not guarenteed, come out of loop.
            break;
        }
            }
          ir.close();
         JOptionPane.showMessageDialog(null, "FTP is connected");
         //while ((line = readOutput.readLine()) != null){
              //System.out.println(line);   
              //output.append(line).append("\n");
         //}
         //readOutput.close();
    }catch (IOException e){
        e.printStackTrace();
    }
    return output.toString();
} 
```

**FTP 类中的 if-else 块**

```
 CommandClass readCommand = new CommandClass();

                        if (selectedIndex == 0)
                        {
                            commandResultArea.setText(readCommand.getCommand(llesiant));
                        }
                        else if (selectedIndex == 1)
                        {
                            commandResultArea.setText(readCommand.getCommand(wkCCH));
                        }
                        else if (selectedIndex == 2)
                        {
                            commandResultArea.setText(readCommand.getCommand(proquest));
                        }
                        else if (selectedIndex == 3)
                        {
                           commandResultArea.setText(readCommand.getCommand(notes));
                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:19:41.463

FTP类：

我这样做是为了当你 ping 服务器时，它会返回一个字符串。您可以修改它以主动编辑 JTextField 中的文本，但这工作正常。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;
import java.io.*;
import java.lang.Process.*;

public class FTP {

  public static void main (String []args)
  {
    Runnable runner = new Runnable(){

      public void run()
      {

        LookAndFeel nimbusLook = new LookAndFeel();
        nimbusLook.NimbusLookAndFeel();

        JFrame frame = new JFrame("BNA FTP Diagnose");
        frame.setVisible(true);
        frame.setResizable(false);
        frame.setSize(540, 420);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(150, 150);

        JMenuBar menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        JMenu fileMenu = new JMenu("File");
        menuBar.add(fileMenu);
        final JMenuItem exitMenuItem = new JMenuItem("Exit");
        fileMenu.add(exitMenuItem);

        JMenu helpMenu = new JMenu("Help");
        menuBar.add(new JPanel());
        menuBar.add(helpMenu);
        final JMenuItem aboutMenuItem = new JMenuItem("About");
        helpMenu.add(aboutMenuItem);

        JPanel titlePanel = new JPanel(new BorderLayout());
        frame.add(titlePanel, BorderLayout.NORTH);

        JLabel titleLabel = new JLabel("FTP Diagnose", JLabel.CENTER);
        titleLabel.setFont(new Font(null, Font.BOLD, 14));
        titleLabel.setForeground(Color.BLUE);
        titlePanel.add(titleLabel);

        JPanel gridPanel = new JPanel(new GridLayout(1, 1));
        frame.add(gridPanel);

        JPanel vendorPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        gridPanel.add(vendorPanel);

        final String vendor [] = {"LLesiant" ,"WK-CCH", "Proquest", "Notes", "Research Institute of America", "Thomson", 
          "BNAI PDF Processing", " TM Portfolios to Indexing", "Postscript to PRODLOGIN1", "www.firstdoor.net", "psp.bna.com", "WEST", "LexisNexis", "McArdle Printing Company", 
          "Breaking News Email", "Ex Libris", "Pandora", "Bloomberg Law", "Acquire Media Site 1", "Acquire Media Site 2", "Quicksite", "QA Quicksite"};
        final JComboBox vendorList = new JComboBox(vendor);
        vendorPanel.add(vendorList);

        JPanel diagnoseButtonPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        gridPanel.add(diagnoseButtonPanel);
        final JButton diagnoseButton = new JButton("Diagnose");
        diagnoseButtonPanel.add(diagnoseButton);

        JPanel centerPanel = new JPanel(new BorderLayout());
        frame.add(centerPanel, BorderLayout.SOUTH);
        JPanel commandPanel = new JPanel(new GridLayout(1, 0));
        centerPanel.add(commandPanel);

        final JTextArea commandResultArea = new JTextArea(7, 0);
        JScrollPane scroll = new JScrollPane(commandResultArea, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        commandPanel.add(scroll);
        commandResultArea.setEditable(false);

        ActionListener buttonListener = new ActionListener(){

          public void actionPerformed(ActionEvent ae)

          {
            int selectedIndex = vendorList.getSelectedIndex();

            String llesiant = "ftp.llesiant.com";
            String wkCCH = "FTP1.cch.com";
            String proquest = "ftp.proquest.com";
            String notes = "notes5.bna.com";

            //String lineThree = null;

            CommandClass readCommand = new CommandClass();

            if (selectedIndex == 0)
            {
              commandResultArea.setText(readCommand.getCommand(llesiant)); //these return strings

            }
            else if (selectedIndex == 1)
            {
              commandResultArea.setText(readCommand.getCommand(wkCCH));
            }
            else if (selectedIndex == 2)
            {
              commandResultArea.setText(readCommand.getCommand(proquest));
            }
            else if (selectedIndex == 3)
            {
              commandResultArea.setText(readCommand.getCommand(notes));
            }

          }

        };
        diagnoseButton.addActionListener(buttonListener);

        ActionListener exitListener = new ActionListener (){

          public void actionPerformed(ActionEvent el)
          {

            if (el.getSource()== exitMenuItem)
            {
              JOptionPane.showMessageDialog(null, "FTP Program will exit now!");
              System.exit(0);
            }

          }

        };

        exitMenuItem.addActionListener(exitListener);

        ActionListener aboutListener = new ActionListener()
        {
          public void actionPerformed(ActionEvent al)
          {

            if (al.getSource()== aboutMenuItem)

            {
              JOptionPane.showMessageDialog(null, "This Software was made for Editors to. \nDiagnose BNA Bloomberg client FTP site.");

            }
          }

        };
        aboutMenuItem.addActionListener(aboutListener);             
      }

    };
    EventQueue.invokeLater(runner);

  }

} 
```

命令类：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import javax.swing.JOptionPane;

public class CommandClass extends FTP {

  public String line, output = "";

  public String getCommand(String ftpSite)

  {

    String command = "ping ";

    try
    {
      Process p = Runtime.getRuntime().exec(command +ftpSite);

      BufferedReader readOutput = new BufferedReader(new InputStreamReader (p.getInputStream()));

      JOptionPane.showMessageDialog(null, "FTP is connected");

      while ((line = readOutput.readLine()) != null)
      {

        System.out.println(line);   
        output += line + "\n";

      }
      readOutput.close();
    }
    catch (IOException e)
    {
      e.printStackTrace();

    }
    return output;
  }

} 
```

# math - 方案中的魔方

> ID：15259508
> 
> 赞同：0
> 
> 时间：2013-03-06T22:37:37.977
> 
> 标签：math, scheme, callcc, magic-square

我仍然是 Scheme 的新手，并试图通过 call/cc 和 amb 运算符来解决魔方。目前，它正在打印：

```
1 1 1 31 Row 1
16 16 1 1 Row 2
16 1 16 1 Row 3
1 16 16 1 Row 4 
```

我不明白为什么它只使用这些数字。是我的与众不同吗？程序？这是我的代码：

```
;; check whether an element of one given list is a member of any 
;; of the other given lists
(define distinct?
  (lambda (o l)
    (if (null? l)
    #t
    (if (= (car l) o)
            '()
            (distinct? o (cdr l)))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:35:53.937

我注意到你的“与众不同？” 过程从不返回错误值。您遇到的问题是您的断言总是通过。当您完全删除 assert 的调用时可以看到这一点，结果没有改变。在您的嵌套 if 检查中，您应该将您的 '() 替换为布尔值 false：#f

# html - 是否有任何 JavaScript 框架支持 MVC 4 SPA 中的离线场景？

> ID：15259515
> 
> 赞同：3
> 
> 时间：2013-03-06T22:38:02.063
> 
> 标签：html, asp.net-mvc-4, offline-caching, singlepage, offline-browsing

Steve Sanderson 使用 upshot.js JavaScript 框架为具有离线支持的移动设备展示了 MVC 4 SPA“送货卡车司机”。

[http://channel9.msdn.com/Events/TechDays/TechDays-2012-Belgium/199](http://channel9.msdn.com/Events/TechDays/TechDays-2012-Belgium/199)

似乎 MVC 团队放弃了对 upshot.js 的支持

是否有任何其他 JavaScript 框架可以为移动设备提供离线支持？

示例：MVC4 SPA 应用程序正在智能手机上运行。电话可能会失去接收信号。SPA 使用 HTML5 本地存储来保存离线时的数据更改。有问题的 JavaScript 框架将检测移动设备何时恢复在线并将更改从 HTML5 本地存储同步到 DB 服务器。

如果 MVC 团队为在移动设备上离线运行的单页应用程序 (SPA) 模板提供支持，那将非常有帮助。如果您认为它会有所帮助，请投票给它：http: [//aspnet.uservoice.com/forums/147203-spa-single-page-application-framework-with-javas/suggestions/3721721-offline-support-for-单页应用程序模板](http://aspnet.uservoice.com/forums/147203-spa-single-page-application-framework-with-javas/suggestions/3721721-offline-support-for-single-page-application-templa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:13:10.823

[SpineJS](http://spinejs.com)支持模型对象的持久本地存储。[这](http://spinejs.com/docs/local)是指南。程序员使用它实际上非常透明，我强烈推荐它。

具体来说，它通过以下方式满足您的要求：

1.  它使您能够在离线时在本地保存状态更改
2.  当它重新上线并将更改推送到后端时，可以向服务器端服务宣布自己
3.  Spine.js 的创建者计划使用 AJAX CRUD 重播您在离线时所做的交易来实现该过程的自动化，请在[此处](http://spinejs.com/mobile/docs/offline)阅读。

# android - 为 gridview 获得类似 google currents 的效果

> ID：15259516
> 
> 赞同：2
> 
> 时间：2013-03-06T22:38:03.780
> 
> 标签：android, android-animation, android-gridview

我有一个应用程序，其中包含在网格视图中显示的项目列表。我希望能够创建一个动画效果，就像在 google current 中使用的那样，当一个新项目出现在屏幕上时，它会慢慢地向上移动到它固定的地方。

目前我一直在 GridView 元素上使用 android:layoutAnimation ，但这似乎并没有提供我想要的那种控制。有没有人对此有任何关于可能需要做什么的指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:17:39.710

我正在制作相同的动画。基本上，我创建了一个自定义布局，它扩展了 LinearLayout 并实现了 onGlobalLayoutListener。在 onGlobalLayout() 我遍历所有孩子并在每个孩子上使用 .startAnimation 。对于动画使用这样的东西：

slide_up.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator" >

    <translate
        android:duration="800"
        android:fromYDelta="100%p"
        android:toYDelta="0" />

    <alpha
        android:duration="800"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" />

    <rotate
        android:duration="800"
        android:fromDegrees="25"
        android:pivotX="0"
        android:pivotY="0"
        android:toDegrees="0" />

</set> 
```

**编辑：** 这里有更多信息：http: [//shardulprabhu.blogspot.de/2012/09/google-now-cards-layout.html](http://shardulprabhu.blogspot.de/2012/09/google-now-cards-layout.html)

# document - 如何“document.write();” 在同一页上？

> ID：15259518
> 
> 赞同：1
> 
> 时间：2013-03-06T22:38:12.203
> 
> 标签：document

基本上，我制作了一个允许您输入 2 个数字的表格，当您按下“添加”按钮时，程序会将答案写到屏幕上，唯一的事情是当写出答案时，它会出现在单独的页面上. 如何让它写入同一页面，下面是 HTML 代码：

```
<form type="twoNum" method="get">
<input type="float" placeholder="Enter first number here..." name="num1" id="n1"/>
&nbsp;
<input type="float" placeholder="Enter second number here..." name="num2" id="n2"/>
<input type="button" value="Add" name="sndfunct" onClick="twoNum(this.form);"/>
</form> 
```

下面是 Javascript 代码：

```
function twoNum(form)
{
var num1 = form.num1.value;
var num2 = form.num2.value;
var intNum1 = parseFloat(num1);
var intNum2 = parseFloat(num2);
document.writeln(intNum1 + intNum2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:03:54.440

请注意，使用`document.write()`被认为是不好的做法。例如，请参阅W3C 网站上[的警告。](http://www.w3.org/TR/2012/CR-html5-20121217/dom.html#dom-document-write)

此外，您不能使用它来编辑已关闭的文档。`document.write()`只能在加载文档时使用。

为了做你想做的事，你应该`<span id="foo"></span>`在你的文档中有一个地方，然后做：

```
document.getElementById("foo").textContent = intNum1 + intNum2; 
```

这会将您的号码插入*到*您的 span 元素中。实际上，它替换了（以前为空的）span 元素的内容。

编辑：当然，它可以是任何类型的元素。我只是为了示例使用了 span 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:17:19.810

你可以写`<p id="answer"></p>`在表格里。然后创建`var answer=intNum1 + intNum2`，然后`document.writeln(intNum1 + intNum2)`写`document.getElementById("answer").innerHTML=answer`！

# python - 在python中制作数据列表的列

> ID：15259519
> 
> 赞同：0
> 
> 时间：2013-03-06T22:38:13.863
> 
> 标签：python, list

所以我有一个程序，它读取一堆文件并附加我需要的必要数据。我现在需要获取这些特定数据并将它们显示为列表。更具体地说，这些是我拥有的参数：

a = 光源，b = 光度，c = 光度误差，d = HST，e = XRS，f = gmag，g = z，h = rh

我想在一个列表中显示它，每个定义一个特定的列。我只是不知道我应该在我为执行此操作的各种 for 循环中插入 print 语句的确切位置。

我将不胜感激任何帮助！这是程序（主要关注的是完成的 for 循环以及它们如何遍历数据，并且不用担心缩进，该程序到目前为止工作正常，我只需要显示附加在列中的数据）：

```
 import sys
    import os 
    import re
    import urllib
    import urllib2
    from os.path import basename
    import urlparse 
    import shutil

    base_dirname = '/projects/XRB_Web/apmanuel/499/'
    base_sourcefile = base_dirname + 'Sources.txt'

    try:
      file = open(base_sourcefile, 'r')
    except IOError:
      print 'Cannot open: '+base_sourcefile

    Source = []
    Finallist =  [] 
    ACS = [] 
    SRC = []

    for line in file: 
      data_line_check = (line.strip())
      if data_line_check: 

        line =  re.sub(r'\s+', ' ', line)
        point  = line.split('|')
        temp_source =  (point[0]).strip()
        if temp_source and len(point) == 3:
              Source = (point[0]).strip() 
              Source = re.sub(r'\s', '_', Source)
              print Source+"\n" 

        temp_finallist = (point[1]).strip()
        if temp_finallist: 
             Finallistaddress = (point[1]).strip()
             Finallistaddress = re.sub(r'\s', '_', Finallistaddress) 
             Luminositybase_dirname1 = '/projects/XRB_Web/apmanuel/499/Lists/' + Finallistaddress

     try:
       file2 = open(Luminositybase_dirname1, 'r')
     except IOError:
       print 'Cannot open: '+Luminositybase_dirname1

     source = []
     luminosity = []
     luminosityerr = []

     for line in file2: 
         pointy = line.split()
     a = int(pointy[0])
         b = float(pointy[5])
         c = float(pointy[6])

         source.append(a)
         luminosity.append(b)
         luminosityerr.append(c)

        temp_HST = (point[2]).strip()
        if temp_HST: 
          HSTaddress = (point[2]).strip()
          HSTaddress = re.sub(r'\s', '_', HSTaddress) 
          HSTbase_dirname2 = '/projects/XRB_Web/apmanuel/499/Lists/' + HSTaddress

     try:
       file3 = open(HSTbase_dirname2, 'r')
     except IOError:
       print 'Cannot open: '+HSTbase_dirname2

     HST = []

     for line in file3: 
     pointy2 = line.split()
     d = int(pointy2[0])
         HST.append(d)

      temp_XRS = (point[3]).strip()
      if temp_XRS: 
        XRSaddress = (point[3]).strip()
        XRSaddress =re.sub(r'\s', '_', XRSaddress) 
        XRSbase_dirname3 = '/projects/XRB_Web/apmanuel/499/Lists/' + XRSaddress

     try:
       file4 = open(XRSbase_dirname3, 'r')
     except IOError:
       print 'Cannot open: '+XRSbase_dirname3

     XRS = []

     for line in file4: 
     pointy3 = line.split() 
     e = int(pointy3[0])
         XRS.append(e)

    temp_others = (point[4]).strip()
    if temp_others: 
       othersaddress = (point[4]).strip()
       othersaddress =re.sub(r'\s', '_', othersaddress) 
       othersbase_dirname4 = '/projects/XRB_Web/apmanuel/499/Lists/' + othersaddress

     try:
       file5 = open(othersbase_dirname4, 'r')
     except IOError:
       print 'Cannot open: '+othersbase_dirname4

     gmag = []
     z = []
     rh = []

     for line in file5: 
     pointy4 = line.split()
     f = float(pointy4[3])
         g = float(pointy4[5])
         h = float(pointy4[7])
         rh.append(f)
         gmag.append(g)
         z.append(h) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T00:02:39.217

此函数将返回行列表的列。请注意，这要求列表在您尝试访问的列中都有一个元素，但如果需要，更改它会相对简单。

```
def getcolumn(matrix,index):        #index specifies which column of the matrix you want. note that like all other list indexes, this starts from 0, not one.
    column = []
    for row in matrix:
        column.append(row[index])
    return column 
```

# ios - didReceiveMemoryWarning 使用标签栏

> ID：15259530
> 
> 赞同：0
> 
> 时间：2013-03-06T22:38:38.893
> 
> 标签：ios, cocoa-touch, memory-management, didreceivememorywarning, viewdidunload

我有一个`UITabBar`控股`3 UIViewControllers`。一个是地图，另一个是表格，第三个是我自己的自定义控制器。我最近注意到我的应用程序在低内存运行时存在一些问题，这是由于我不清楚`didReceiveMemoryWarning`发生时该怎么做。

通常，当有足够的内存时，所有功能都很好。我会将我的所有控制器都分配到`applicationDidFinishLaunchingWithOptions`并且所有控制器都工作得很好。

但是当内存有点低时会发生什么（出于某种原因）只有我的表行为不端。首先，我可以看到应用收到了内存警告。然后只有我的桌子得到一个`viewDidUnload`. 起初我不确定为什么我的桌子变成了**`*completely empty*`**，但后来我意识到我的委托方法停止工作，这使得我的`reloadData`基本上毫无意义。

所以，我现在可以看到它在`didReceiveMemoryWarning`我所有的 viewController 中级联。但是 viewDidUnload 只在我的桌子上被调用。

我想知道发生了什么事？

*   如何从 viewDidUnload 中恢复？如果我的观点是零，谁负责把它带回来？为什么只有我的表获得 viewDidUnload？我正在阅读[这个链接](http://the.ichibod.com/kiji/uiviewcontroller-memory-management-methods/)和[那个](http://blog.lukhnos.org/post/101548146/iphone-view-controller-memory-management-in-a-nutshell)链接，以及一些苹果文档，但没有找到解释为什么我的观点没有恢复。

在这种情况下我应该怎么做？

# .net - System.Data.Sqlite v1.0.81 是否使用 SQLlite v3.？

> ID：15259534
> 
> 赞同：1
> 
> 时间：2013-03-06T22:38:48.800
> 
> 标签：.net, sqlite, versioning

说明哪个版本的 Sqlite 编译到 System.Data.Sqlite 的表在哪里？

我正在开发一个引用 v1.0.81 的项目，我想知道从那时起修复了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:48:08.383

是的，Sqlite v3.7.12.1。

请在此处查看您的发行版的源代码：http:
[//system.data.sqlite.org/downloads/1.0.81.0/sqlite-netFx-source-1.0.81.0.zip](http://system.data.sqlite.org/downloads/1.0.81.0/sqlite-netFx-source-1.0.81.0.zip)

版本号在：

```
\SQLite.Interop\src\core\sqlite3.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:50:59.633

一般信息可在[常见问题解答中找到](http://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki)

大量[下载](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)版本和编译/发布信息。

至于版本表，您需要从[SQLite](http://www.sqlite.org/news.html)版本信息中恢复。

# visual-studio-2010 - Installshield LE 不会将 32 位可执行文件安装到 64 位 Windows 上的 Program Files 中

> ID：15259537
> 
> 赞同：1
> 
> 时间：2013-03-06T22:39:01.237
> 
> 标签：visual-studio-2010, installshield

我正在使用 Visual Studio 2010 中内置的 InstallShield LE 为插件制作安装程序。插件在单独的进程中运行，因此即使主机应用程序是 64 位，它们也始终是 32 位的。插件必须安装到与主机应用程序相同的目录中。`Program Files`因此，即使在 64 位 Windows 上，插件也应始终安装- 而不是`Program Files (x86)`.

InstallShield 的`[ProgramFilesFolder]`预定义文件夹检测到项目输出为 32 位，并`Program Files (x86)`在 64 位计算机上评估为。

我想我可以通过使用固定文件夹而不是`[ProgramFilesFolder]`. 但是Installshield似乎将其更改为`Program Files (x86)`无论如何！我想它试图提供帮助。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:54:32.497

重定向是由操作系统完成的，而不是由 InstallShield 完成的。这同样适用于使用其他设置创作工具构建的 MSI 包。[我在如何在 x64 平台上使用 WIX x86 安装程序安装 VS 帮助中](https://stackoverflow.com/questions/14977712/how-to-install-vs-help-using-wix-x86-installer-on-a-x64-platform/14999502#14999502)详细解释了这一点 ？

# sql - 如何获得最后一个连续性 类似于 Oracle 查询中的记录

> ID：15259540
> 
> 赞同：0
> 
> 时间：2013-03-06T22:39:17.343
> 
> 标签：sql, oracle, oracle11g

我有几个链接表，我正在尝试查找其中一个子表在具有给定值的行中有 3 个（或一些用户设置的参数）记录的数据集，其中排序是按日期（在另一个链接表）

```
Table1
ID     LinkID   Flag
AA1    AA       30
AA2    AA       30
AA3    AA       60
AA4    AA       30
BB1    BB       30
BB2    BB       30
BB3    BB       30
BB4    BB       40

Table2
TA1    CA      2/1/2013
TA2    CA      1/1/2013
TA3    CA      12/1/2012
TA4    CA      11/1/2012
TB1    CB      2/2/2013
TB2    CB      1/1/2013
TB3    CB      12/1/2012
TB4    CB      11/2/2012 
```

其他表将它们链接在一起，但我可以将 AA 链接到 CA 记录，因此连接的结果集具有

```
AA       30     2/1/2013
AA       30     1/1/2013
AA       60     12/1/2012
AA       30     11/1/2012
BB       30     1/1/2013
BB       30     2/2/2013
BB       30     12/1/2012
BB       40     11/2/2012 
```

我如何查询，以便如果他们想要最后 3 个连续“30”记录的记录，我只得到 BB，但如果他们想要最后 2 个连续“30”记录的集合，我两个都得到？而且，当然，对于最近记录中没有标记为 30 的任何数据，我从来没有得到这些数据？

我从连接十几个表的现有查询开始，并根据最新的 30 个表返回数据，并显示前一个。我认为对于这个修改，我需要完全重新组织它，但我对如何处理它持空白，我认为上面显示了我正在尝试做的事情。

我不需要工作 sql（无论如何我都没有提供足够的数据示例），而是一个 sql 伪代码，它显示了如何根据在另一个间接链接表中找到的顺序来查找具有给定值的连续记录。或者，就此而言，如果它都在一个表中，如何获取它，如上面的结果集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:44:27.183

听起来你会想要使用`LAG`和/或`LEAD`分析函数。所以，例如，

```
LAG( flag ) OVER (PARTITION BY id ORDER BY date_column DESC) prior_flag_value 
```

将`flag`基于. `id`_ `date_column`您也可以回顾不止一排

```
LAG( flag, 2 ) OVER (PARTITION BY id ORDER BY date_column DESC) prior_flag_value 
```

会先从两行中获取值。同样，您可以使用`LEAD`来获取下一行的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:57:44.313

听起来您正在根据日期查找连续出现的记录数。

为此，请执行以下操作：

(1) 使用 row_number() 为每个 col1 值枚举月份： `row_number() over (partition by col1)`作为 seqnum_1。

(2) 使用 row_number() 为每个 col1、col2 组合枚举月份： `row_number() over (partition by col1, col2)`作为 seqnum_2。

(3) 现在`seqnum_1 - seqnum_2`识别连续值组。

(4) 对每条记录的每组进行计数： `count(*) over (partition by col1, seqnum_1 - seqnum_2) as thegroupsize`。

现在，您可以选择 groupsize 有 2 个或更多元素的位置。

# django - 使用事务确保 2 个模型保存或不保存

> ID：15259542
> 
> 赞同：1
> 
> 时间：2013-03-06T22:39:25.780
> 
> 标签：django, sqlite, transactions

我需要确保 Model1 和 Model2 都保存或都不保存，我很确定我应该能够在事务中执行此操作，但它似乎不起作用。

我不确定我是否了解交易如何正常工作。我认为该事务对于包装在装饰器中的整个函数调用都是有益的。

我也不确定这是否也只是一个 Sqlite 问题。

## 模型.py

```
from django.db import models
class Model1( models.Model ):
    name = models.CharField( max_length = 20 )
    number = models.IntegerField( )

class Model2( models.Model ):
    name = models.CharField( max_length = 20 )
    number = models.IntegerField( )
    parent = models.ForeignKey( Model1 ) 
```

## 示例交易代码

```
from django.db import transaction

@transaction.commit_manually
def somefunction( name ):
    try:
        a = Model1.objects.get( name = name )
    except Model1.DoesNotExist:
        a = Model1( name = name )

    try:
        b = Mode2.objects.get( name = name)
    except Model2.DoesNotExist:
        b = Model2( name = name )

    a.number = 3
    b.number = 'a'

    try:
        a.save()
        b.parent = a
        b.save()
        transaction.commit()
    except:
        transaction.rollback() 
```

我没有尝试过 MySQL 或 Postgres，因为我实际上没有发现任何具体说 Sqlite 不能做到这一点的东西，所以只是想知道我做错了什么，或者它是否确实是 Sqlite3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:59:05.537

所以最终的答案是事务工作正常，只是我的单元测试没有继承自

[https://docs.djangoproject.com/en/1.2/topics/testing/#django.test.TransactionTestCase](https://docs.djangoproject.com/en/1.2/topics/testing/#django.test.TransactionTestCase)

因为我只是从 TestCase 继承的，所以每个 test_ 方法都包装在一个事务中，我无法控制 .commit() 或 .rollback() 行为。

这只是我完全没有意识到测试用例是如何运行的。

# node.js - 寻找具有基于模板的假数据的 REST API（NodeJS + 键值存储）

> ID：15259543
> 
> 赞同：0
> 
> 时间：2013-03-06T22:39:27.267
> 
> 标签：node.js, rest, fixtures

我希望能够编写这样的配置...

```
{
    'collection' : 'payments',
    'rows'     : 100,
    'template' : {
        "id"            : "1...100000",
        "status"        : ["None", "SentToPayer", "Overdue", "Completed"],
        "amount"        : ["100","200","500"]
    }
} 
```

...它将在键值存储（可能是 MongoDB）中创建一个键值对集合，其中包含 100 行，如下所示：

```
{
    "id": "80494",
    "status": "None",
    "amount": "200"
} 
```

并且可以通过 REST API 完全访问和编辑数据。

`GET http://server/payments/80494`可能会让我得到上面的节点。

我很确定我以前见过这样的东西，但我现在找不到。有谁知道能给我想要的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:19:16.837

我最终创造了自己的东西。

这个将数据放入 MongoDB 数据库中。 [https://github.com/janjarfalk/datafixture.js](https://github.com/janjarfalk/datafixture.js)

这个暴露了。 [https://github.com/tdegrunt/mongodb-rest](https://github.com/tdegrunt/mongodb-rest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T06:54:24.473

您可以尝试[使用 json-server](https://github.com/typicode/json-server)在服务器端伪造 REST API，或[尝试 FakeRest](https://github.com/marmelab/FakeRest)在客户端伪造 REST API。

# python - pandas 聚合的条件总和

> ID：15259547
> 
> 赞同：23
> 
> 时间：2013-03-06T22:39:42.590
> 
> 标签：python, r, pandas, data.table

我最近刚刚从 R 切换到 python，并且在再次习惯数据帧而不是使用 R 的 data.table 时遇到了一些麻烦。我遇到的问题是我想获取一个字符串列表，检查一个值，然后将该字符串的计数相加 - 由用户分解。所以我想获取这些数据：

```
 A_id       B    C
1:   a1    "up"  100
2:   a2  "down"  102
3:   a3    "up"  100
3:   a3    "up"  250
4:   a4  "left"  100
5:   a5 "right"  102 
```

并返回：

```
 A_id_grouped   sum_up   sum_down  ...  over_200_up
1:           a1        1          0  ...            0
2:           a2        0          1                 0
3:           a3        2          0  ...            1
4:           a4        0          0                 0
5:           a5        0          0  ...            0 
```

在我使用 R 代码（使用 data.table）之前

```
>DT[ ,list(A_id_grouped, sum_up = sum(B == "up"),
+  sum_down = sum(B == "down"), 
+  ...,
+  over_200_up = sum(up == "up" & < 200), by=list(A)]; 
```

然而，我最近对 ​​Python 的所有尝试都失败了：

```
DT.agg({"D": [np.sum(DT[DT["B"]=="up"]),np.sum(DT[DT["B"]=="up"])], ...
    "C": np.sum(DT[(DT["B"]=="up") & (DT["C"]>200)])
    }) 
```

先感谢您！这似乎是一个简单的问题，但我在任何地方都找不到。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T02:45:52.397

为了补充 unutbu 的答案，这是一种`apply`在 groupby 对象上使用的方法。

```
>>> df.groupby('A_id').apply(lambda x: pd.Series(dict(
    sum_up=(x.B == 'up').sum(),
    sum_down=(x.B == 'down').sum(),
    over_200_up=((x.B == 'up') & (x.C > 200)).sum()
)))
      over_200_up  sum_down  sum_up
A_id                               
a1              0         0       1
a2              0         1       0
a3              1         0       2
a4              0         0       0
a5              0         0       0 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-06T23:07:59.043

可能有更好的方法；我对熊猫很陌生，但这有效：

```
import pandas as pd
import numpy as np

df = pd.DataFrame({'A_id':'a1 a2 a3 a3 a4 a5'.split(),
                   'B': 'up down up up left right'.split(),
                   'C': [100, 102, 100, 250, 100, 102]})

df['D'] = (df['B']=='up') & (df['C'] > 200)
grouped = df.groupby(['A_id'])

def sum_up(grp):
    return np.sum(grp=='up')
def sum_down(grp):
    return np.sum(grp=='down')
def over_200_up(grp):
    return np.sum(grp)

result = grouped.agg({'B': [sum_up, sum_down],
                      'D': [over_200_up]})
result.columns = [col[1] for col in result.columns]
print(result) 
```

产量

```
 sum_up  sum_down  over_200_up
A_id                               
a1         1         0            0
a2         0         1            0
a3         2         0            1
a4         0         0            0
a5         0         0            0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-10-01T04:44:34.873

一个老问题；我觉得更好的方法，避免应用，是在分组和聚合之前创建一个新的数据框：

```
 df = df.set_index('A_id')

outcome = {'sum_up' : df.B.eq('up'),
           'sum_down': df.B.eq('down'),
           'over_200_up' : df.B.eq('up') & df.C.gt(200)}

outcome = pd.DataFrame(outcome).groupby(level=0).sum()

outcome

      sum_up  sum_down  over_200_up
A_id                               
a1         1         0            0
a2         0         1            0
a3         2         0            1
a4         0         0            0
a5         0         0            0 
```

另一种选择是在分组之前取消堆叠；但是，我觉得这是一个更长且不必要的过程：

```
(df
  .set_index(['A_id', 'B'], append = True)
  .C
  .unstack('B')
  .assign(gt_200 = lambda df: df.up.gt(200))
  .groupby(level='A_id')
  .agg(sum_up=('up', 'count'), 
       sum_down =('down', 'count'), 
       over_200_up = ('gt_200', 'sum')
      )
)

      sum_up  sum_down  over_200_up
A_id                               
a1         1         0            0
a2         0         1            0
a3         2         0            1
a4         0         0            0
a5         0         0            0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-04T18:50:31.843

在这里，我最近使用 df assign 和 numpy 的 where 方法学到了什么：

df3=

```
A_id       B    C
1:   a1    "up"  100
2:   a2  "down"  102
3:   a3    "up"  100
3:   a3    "up"  250
4:   a4  "left"  100
5:   a5 "right"  102 
```

```
df3.assign(sum_up= np.where(df3['B']=='up',1,0),sum_down= np.where(df3['B']=='down',1,0),
          over_200_up= np.where((df3['B']=='up') & (df3['C']>200),1,0)).groupby('A_id',as_index=False).agg({'sum_up':sum,'sum_down':sum,'over_200_up':sum}) 
```

结果=

```
 A_id  sum_up   sum_down  over_200_up
0   a1    1        0         0
1   a2    0        1         0
2   a3    2        0         1
3   a4    0        0         0
4   a5    0        0         0 
```

如果您熟悉 SQL 案例并希望在 pandas 中应用相同的逻辑，这也类似于

```
select a,
       sum(case when B='up' then 1 else 0 end) as sum_up
       ....
from   table
group by a 
```

# android - 使视图不可聚焦

> ID：15259548
> 
> 赞同：2
> 
> 时间：2013-03-06T22:39:44.557
> 
> 标签：android, android-listview, android-ui

我有一个使用两种不同行布局的列表视图。一种是显示日期标题，另一种是显示该日期的一组任务。当用户触摸它时，我不想突出显示日期标题。也就是说，我不希望包含日期标题的视图的背景发生任何变化。

到目前为止，我已经完成了以下操作：

```
v.setEnabled(false);
v.setClickable(false);
v.setFocusableInTouchMode(false); 
```

其中 v 是从包含日期标题的布局中膨胀的视图。

视图的原始背景是白色的，当它没有与用户的手指接触时。最初，日期标题视图在触摸时会有蓝色背景。在上面的代码之后，背景现在是灰色的。即使在触摸时，我也不希望背景从白色变为白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:41:10.777

您应该覆盖[`isEnabled(int position)`](http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled%28int%29)自定义适配器中的方法。从官方 API 页面：

> 如果指定位置的项目不是分隔符，则返回 true。（分隔符是不可选择、不可点击的项目）。如果位置无效，则结果未指定。在这种情况下应抛出 ArrayIndexOutOfBoundsException 以快速失败。

# mysql - SQL 多重排序

> ID：15259551
> 
> 赞同：0
> 
> 时间：2013-03-06T22:39:54.520
> 
> 标签：mysql, sql

我正在研究在 MySQL 中实现的 EAV 数据库，所以当我说实体时，您可以将其读取为表。由于它是一个非关系数据库，我无法为表等提供任何 SQL，但我希望得到关系数据库的概念答案，我将自己转换为 EAV SQL。

我正在建立一个迷你股票市场系统。有一个“资产”实体可以有许多“需求”和“要约”实体。资产实体也可能有许多“交易”实体。每个交易实体都有一个“share_price”属性。并非所有资产都有需求、报价或交易实体。

我想返回按资产分组的报价和需求实体列表，即如果资产有 2 个报价和 3 个需求，则只会显示 1 个结果。这必须按与需求或要约资产相关的交易的最高股价进行排序。然后，对每个需求或报价的最高 share_price 进行整体排序。如果资产有需求或要约但没有交易，则 share_price 将返回 NULL。

所以说数据是这样的：

```
Asset 1 has 1 offer, 1 demand and 2 deals with share_price 7.50 and 12.00 
Asset 2 has 1 offer and 1 deal with share_price 8.00
Asset 3 has 3 offers and 3 demands and no deals
Asset 4 has no offers and no demand and 1 deal with share_price 13.00 
```

我想要结果：

```
Asset       share_price
Asset 1     12.00
Asset 2     8.00
Asset 3     null 
```

注意：资产 4 不在结果集中，因为它没有报价或需求。

我知道这是一个复杂的问题，我真的不想多次访问数据库或在 PHP 中进行任何数组重新排序。非常感谢任何帮助。

有些用户希望看到我拥有的 SQL。在这里，但这并没有太大意义，因为它是一个专门的 EAV 数据库。

```
SELECT DISTINCT data.asset_guid, r.guid_two, data.share_price FROM (

    select rr.guid_one as asset_guid, max(msv.string) as share_price from market_entities ee

    join market_entity_relationships rr on ee.guid = rr.guid_two
    JOIN market_metadata as mt on ee.guid = mt.entity_guid
            JOIN market_metastrings as msn on mt.name_id = msn.id
            JOIN market_metastrings as msv on mt.value_id = msv.id

    where subtype = 6 and msn.string = 'share_price' and rr.relationship = 'asset_deal'
    group by                    
        rr.guid_one 
    ) data 

   left outer JOIN market_entities e on e.guid = data.asset_guid  
   left outer JOIN market_entity_relationships r on r.guid_one = e.guid  
   WHERE  r.relationship = 'trade_share' 
   GROUP BY data.asset_guid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:42:14.270

假设您有 3 个表、资产、优惠和共享，您可以使用如下查询。

```
SELECT asset, MAX(share_Price)
FROM assets
 INNER JOIN offers ON assets.id = offers.id //requires there are offers
 LEFT OUTER JOIN shares ON assets.id = shares.id // returns results even if no shares
GROUP BY asset
ORDER BY asset 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:51:24.037

如果不完全了解您的表结构（您应该发布它），看起来您只需要使用单个`LEFT JOIN`, 和`GROUP BY`and `MAX`：

```
SELECT a.assetname, MAX(d.share_price)
FROM asset a
   LEFT JOIN deal d ON a.AssetId = d.AssetId
GROUP BY a.assetname
ORDER BY MAX(d.share_price) DESC 
```

我假设您的 Asset 表和 Deal 表有一个共同的键，在上面的例子中，AssetId。不知道为什么你需要加入 Demand 或 Offer，除非这些链接到你的 Deal 表。发布您的表结构将减轻这种担忧......

**- 编辑 -**

关于您的评论，您只想显示有报价或有需求的资产？如果是这样，这应该工作：

```
SELECT a.assetname, MAX(d.share_price)
FROM asset a
   LEFT JOIN deal d ON a.AssetId = d.AssetId
   LEFT JOIN offer o ON o.AssetId = d.AssetId
   LEFT JOIN demand de ON de.AssetId = d.AssetId
WHERE o.AssetId IS NOT NULL OR de.AssetId IS NOT NULL
GROUP BY a.assetname
ORDER BY MAX(d.share_price) DESC 
```

这将仅包括至少有报价或至少有需求的资产。

# makefile - 运行生成文件时出错

> ID：15259553
> 
> 赞同：0
> 
> 时间：2013-03-06T22:40:00.593
> 
> 标签：makefile

这是我的makefile的样子：

```
.PHONY: all clean

all : 1wchaotic.png

1wchaotic.png : plot-script1.gp duffing stroboscopic points1.data
    gnuplot "$<" > "$@"

points1.data : duffing
    ./duffing -a 1 -b 1 -w 1 -u 0.1 -A 35.5 -t 1000 | ./stroboscopic > points1.data

duffing : duffing.c Makefile
    make

clean :
    rm *~ *.png *.data 
```

* * *

这是我运行makefile时得到的：

```
user@ubuntu:~/HW$ make -f makefile2

./duffing -a 1 -b 1 -w 1 -u 0.1 -A 35.5 -t 1000 | ./stroboscopic > points1.data

make: *** [points1.data] Error 255 
```

# java - java/camel/spring/jpa 应用程序中的动态配置

> ID：15259555
> 
> 赞同：2
> 
> 时间：2013-03-06T22:40:12.200
> 
> 标签：java, spring, jpa, apache-camel, shiro

我使用 java、camel、spring、shiro、c3p0 和 jpa 编写了一个应用程序。此应用程序需要连接到一些 Web 服务和一些数据库，并且它现在具有使用经典 spring propertyplaceholders 和 .prop 属性文件的静态配置。我使用 @Value 注释在 java 类中注入属性，并使用带有 ${} 占位符的 spring 定义数据源。在配置中有用于 Web 服务的 url、用户名、密码和用于数据源的数据库、url、用户名、密码。

现在我需要进行动态/多租户配置。我的意思是每个“客户”都可以拥有自己的一组密码，并且这些登录名/密码会随着时间而改变。使用 shiro 我可以向 Subject 添加一些数据，这样我就可以向它添加当前属性并将它们放在我需要的地方。但是我怎样才能继续使用@value 注释呢？而且，最重要的问题是，如何在运行时更改数据源参数？我在 c3p0 文档中看到使用 getConnection(username,password) 和一对新的用户名和密码创建一个新池并关闭旧池。但我不使用 getConnection 因为只有 EntityManager 使用数据源。

请帮我！谢谢，马里奥

经过大量搜索，我认为我可以这样做：

*   对于属性，使用公共配置中的 DynamicCombinedConfiguration，但我不知道如何告诉它从 Shiro 主题中读取租户 ID
*   对于 JPA，使用 spring 中的 AbstractDataSource，但我不知道我是否可以从 Shiro Subject 读取租户 ID

你能告诉我我的方向是否正确吗？

再次感谢，马里奥

# jquery - JQuery-使用Div中的值更改锚标记的href

> ID：15259562
> 
> 赞同：0
> 
> 时间：2013-03-06T22:40:29.863
> 
> 标签：jquery, .net, cluetip

我在更改锚标记中的 href 值时遇到问题。基本上，我想使用一个线索提示，它根据已登录用户的员工 ID 打开一个工具提示页面。

提示代码：

```
 $(document).ready
    (
      function () {

          $('#sticky').cluetip({ sticky: true, closePosition: 'title', arrows: true });
          $('a.jt:eq(0)').cluetip({
              cluetipClass: 'jtip',
              arrows: true,
              dropShadow: false,
              hoverIntent: false,
              sticky: true,
              mouseOutClose: true,
              closePosition: 'title',
              closeText: '<img src="Images/cross.png" alt="close"/>'
          }); 
```

}

现在，可以看到锚标签：

```
 <a class="jt" style="color: #FFFFFF;" id="Anchor_work"  runat="server" href='WorkExp.aspx?Emplid=12345'>Previous Work Experience</a> 
```

我正在尝试使用 jquery 更改 href 链接以指向正确的员工 ID。所以，我想将员工 ID 的值存储在 DIV 中。

```
 <div id="Workexp_div" runat="server"/> 
```

JQuery 使用 DIV 标签更改 href：

```
 $(document).ready
    (
      function () {

          $('#sticky').cluetip({ sticky: true, closePosition: 'title', arrows: true });
          $('a.jt:eq(0)').cluetip({
              cluetipClass: 'jtip',
              arrows: true,
              dropShadow: false,
              hoverIntent: false,
              sticky: true,
              mouseOutClose: true,
              closePosition: 'title',
              closeText: '<img src="Images/cross.png" alt="close"/>'
          });

          function showDivText() {

              //divObj = document.getElementById('Workexp_Div'); 
              divObj = document.getElementById("#<%= Workexp_Div.ClientID %>");
              if (divObj) {
                  if (divObj.textContent) { // FF
                      alert(divObj.textContent);
                  } else {  // IE           
                      alert(divObj.innerText);  //alert ( divObj.innerHTML );
                  }
              }
          }
          //var new_href = "WorkExp.aspx?Emplid=" + $('#ctl00_ContentPlaceHolder1_Workexp_div').InnerText;
          var new_href = "WorkExp.aspx?Emplid=" + showDivText();
          $("#Anchor_work").attr("href", new_href);
          //= 'WorkExp.aspx?Emplid='+ $('#ctl00_ContentPlaceHolder1_Workexp_div').InnerText;           

      }

    ); 
```

上面的代码给了我一个错误，说 WorkExp_div 在当前上下文中不存在。我尝试通过删除客户端 ID 执行 divObj = document.getElementById('Workexp_Div'); 但随后该对象返回为空。

谁能告诉我如何检索 div 标签的值并更改标签中 href 的值？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:14:34.293

如果您更换：

```
 function showDivText() {

          //divObj = document.getElementById('Workexp_Div'); 
          divObj = document.getElementById("#<%= Workexp_Div.ClientID %>");
          if (divObj) {
              if (divObj.textContent) { // FF
                  alert(divObj.textContent);
              } else {  // IE           
                  alert(divObj.innerText);  //alert ( divObj.innerHTML );
              }
          }
      } 
```

和：

```
function showDivText() {
    var divObj = $("#<%= Workexp_Div.ClientID %>");
    alert(divObj.text());
    return divObj.text();
} 
```

那会发出警报并返回正确的值吗？

如果是这样，那么您可以删除它并执行以下操作：

```
var new_href = "WorkExp.aspx?Emplid=" +  $("#<%= Workexp_Div.ClientID %>").text(); 
```

# plsql - 检索表格以统计数字，最好的方法

> ID：15259563
> 
> 赞同：0
> 
> 时间：2013-03-06T22:40:31.667
> 
> 标签：plsql, count

我有一个作为函数的一部分运行的查询，该函数生成一个包含计数、平均值和逗号分隔列表的单行表，如下所示：

```
select
  (select 
    count(*)
    from vw_disp_details
    where round = 2013
    and rating = 1) applicants,
  (select 
    count(*)
    from vw_disp_details
    where round = 2013
    and rating = 1
    and applied != 'yes') s_applicants,
  (select 
    LISTAGG(discipline, ',')
    WITHIN GROUP (ORDER BY discipline) 
    from (select discipline,
          count(*) discipline_number 
          from vw_disp_details
          where round = 2013
          and rating = 1
          group by discipline)) disciplines,
  (select 
    LISTAGG(discipline_count, ',')
    WITHIN GROUP (ORDER BY discipline)
    from (select discipline,
          count(*) discipline_count
          from vw_disp_details
          where round = 2013
          and rating = 1
          group by discipline)) disciplines_count,
  (select 
    round(avg(util.getawardstocols(application_id,'1','AWARD_NAME')), 2) 
    from vw_disp_details 
    where round = 2013
    and rating = 1) average_award_score,
  (select
    round(avg(age))
    from vw_disp_details
    where round = 2013
    and rating = 1) average_age
from dual; 
```

除了不是 6 个主要子查询，而是有 23 个。

这将返回类似这样的内容（如果它是 CSV）：

```
applicants | s_applicants | disciplines               | disciplines_count | average_award_score | average_age
107        | 67           | "speed,accuracy,strength" | 3                 | 97                  | 23 
```

现在我以编程方式将 where 子句的“rating = 1”部分换成其他表达式。它们都运行得相当快，除了“rating = 1”需要大约 90 秒才能运行，这是因为 vw_disp_details 视图中的 rating 列本身是由子查询编译的：

```
(SELECT score
FROM read r,
eval_criteria_lookup ecl
WHERE r.criteria_id        = ecl.criteria_id
AND r.application_id       = a.lgo_application_id
AND criteria_description   = 'Overall Score'
AND type                   = 'ABC'
) reader_rank 
```

因此，当函数运行时，这个额外的查询似乎会大大减慢一切。

我的问题是，有没有更好（更有效）的方法来运行这样的查询，基本上只是一系列计数和平均值，我如何重构以优化速度，以便评级 = 1 查询不需要运行 90 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:36:31.553

您可以选择 MATERIALIZE vw_disp_details VIEW。这将预先计算评级列的值。对于如何保持物化视图的最新状态有多种选择，您可能希望使用 ON COMMIT 子句，以便 vw_disp_details 始终正确。

查看官方文档，看看是否适合您。 [http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:57:24.590

只需一个即可完成所有大部分查询。而不是这样做：

```
select
  (select (count(*)                           from my_tab) as count_all,
  (select avg(age)                            from my_tab) as avg_age,
  (select avg(mypkg.get_award(application_id) from my_tab) as_avg-app_id 
from dual; 
```

做就是了：

```
select count(*), avg(age),avg(mypkg.get_award(application_id)) from my_tab; 
```

然后，也许你可以为其他结果做一些联合。但这一步本身应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:20:48.853

我可以通过做两件事来解决这个问题：创建一个只显示我需要的结果的新视图，这让我在速度上获得了边际收益，并且在该视图中将导致延迟的子查询的 where 子句移到视图的 where 子句并将子查询的结果作为视图中的列添加。这仍然会返回相同的结果，这要归功于表中总是会有记录，为视图查询的每一行访问的子查询。

```
SELECT
  a.application_id,
  util.getstatus (a.application_id) status,
  (SELECT score
    FROM applicant_read ar,
    eval_criteria_lookup ecl
    WHERE ar.criteria_id        = ecl.criteria_id
    AND ar.application_id       = a.application_id
    AND criteria_description   = 'Overall Score'        //THESE TWO FIELDS
    AND type                   = 'ABC'                  //ARE CRITERIA_ID = 15
    ) score
  as.test_total test_total
FROM application a,
  applicant_scores as
WHERE a.application_id = as.application_id(+); 
```

成为

```
SELECT
  a.application_id,
  util.getstatus (a.application_id) status,
  ar.score,
  as.test_total test_total
FROM application a,
  applicant_scores as,
  applicant_read ar
WHERE a.application_id = as.application_id(+)
AND ar.application_id  = a.application_id(+)
AND ar.criteria_id     = 15; 
```

# php - 无法读取属性 JQUERY 数组数据

> ID：15259566
> 
> 赞同：1
> 
> 时间：2013-03-06T22:40:36.347
> 
> 标签：php, jquery, null

我正在尝试验证 data.announce 但我收到此错误“Uncaught TypeError: Cannot read property 'announce' of null”

所以这是我的代码

**.php 文件：**

```
 $return = array("msg" => "You'll recive an email with instructions!");
  return json_encode($return); 
```

**jQuery：**

```
$("form[id='common-handler/register'] #submit").click(function(e) {
        e.preventDefault();
        if(locked == 1)
            return false;
        locked = 1;

        var _form = $(this).closest('form').attr('id');
        $.post("/"+_form, $(this).closest('form').serialize(), function(data) {
            if(!isEmpty(data.announce))
                $("#search_bar").html(data.msg).fadeIn("slow");
            else
                $("form[id='" + _form + "'] p.msg").text(data.msg);
        }, "json");
    });

function isEmpty(str) {
    return (!str || 0 === str.length);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:43:25.780

您不能在 PHP 文件中返回数据，除非您将其包含在另一个 PHP 文件中的某个位置，因此您将需要它来获取您的`$.post()`, 通过 JSON 输出工作：

```
echo json_encode(array("msg" => "You'll recive an email with instructions!"));
exit(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:45:29.833

尝试这个：

```
return $return = json_encode( array( "announce" => array("msg" => "You'll recive an email with instructions!") ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:45:37.460

您没有“announce”作为要返回的数组中的键之一，只有“msg”

你要：

```
array("msg" => "You'll recive an email with instructions!", "announce"=>"My announcement"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T23:20:03.763

尝试改变：

if(!isEmpty(data.announce))

至：

if(null == data.announce)

# r - R中的系数变量成员

> ID：15259568
> 
> 赞同：0
> 
> 时间：2013-03-06T22:40:48.793
> 
> 标签：r, names, lm, model.matrix

在使用正则表达式之前，我已经为此制定了一个非常冗长的解决方案，但我希望有一种更原生的方法来做到这一点。

给定一个模型，也许像

```
data(tips, package="reshape2")
mod <- lm(tip ~ total_bill*sex + sex*day, tips)
mod$coefficients 
```

我想确定公式中哪个系数与哪个变量有关。像这样：

```
|    Coefficient     |    Variable    |
|:-------------------|:---------------|
| total_bill         | total_bill     |
| sexMale            | sex            |
| daySat             | day            |
| daySun             | day            |
| dayThur            | day            |
| total_bill:sexMale | total_bill,sex |
| sexMale:daySat     | sex,day        |
| sexMale:daySun     | sex,day        |
| sexMale:dayThur    | sex,day        | 
```

我已经检查过了`model.matrix`，`model.formula`但是那些让我看到了这行代码

```
.Internal(model.matrix(t, data)) 
```

我深入研究了 C 代码，但我认为必须有一种更简单的方法。有没有？

为了回应 DWin 的好回答，我构建了一个复杂的示例，其中正则表达式可能会失败。这是正则表达式让我害怕的边缘情况之一。

它`data.frame`是用变量名和值构建的，这些变量名和值很容易混淆，这种情况经常发生。

```
baseball <- data.frame(Bat=sample(1:100, 20, replace=T), Batter=sample(c("David", "Batley", "Bob", "Ace"), 20, replace=T), Hits=sample(1:20, 20, replace=T))
baseball
bMod <- lm(Hits ~ Bat*Batter, baseball)
bMod$coefficients

col.matx <- sapply(colnames(model.matrix(bMod)), function(cols) sapply(labels(bMod), function(trm) grep(patt=trm, x=cols, value=TRUE))) 
```

这将连续变量`Bat`与 的所有系数相匹配`factor` `Batter`。

是的，这是一个愚蠢的例子，但很容易发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:23:11.797

这不是确切的答案，但应该能够看到一种重新排列它以满足您的目的的方法。第一步确定`labels`每个`model.matrix`列名中有哪些。

```
col.matx <- sapply(colnames(model.matrix(mod)), function(cols) 
         sapply(labels(mod), function(trm) grep(patt=trm, x=cols, value=TRUE)))
#---------------------------------------
               (Intercept) total_bill   sexMale     daySat      daySun      dayThur    
total_bill     Character,0 "total_bill" Character,0 Character,0 Character,0 Character,0
sex            Character,0 Character,0  "sexMale"   Character,0 Character,0 Character,0
day            Character,0 Character,0  Character,0 "daySat"    "daySun"    "dayThur"  
total_bill:sex Character,0 Character,0  Character,0 Character,0 Character,0 Character,0
sex:day        Character,0 Character,0  Character,0 Character,0 Character,0 Character,0
               total_bill:sexMale   sexMale:daySat   sexMale:daySun   sexMale:dayThur  
total_bill     "total_bill:sexMale" Character,0      Character,0      Character,0      
sex            "total_bill:sexMale" "sexMale:daySat" "sexMale:daySun" "sexMale:dayThur"
day            Character,0          "sexMale:daySat" "sexMale:daySun" "sexMale:dayThur"
total_bill:sex "total_bill:sexMale" Character,0      Character,0      Character,0      
sex:day        Character,0          Character,0      Character,0      Character,0 
```

当值不是零长度项时，需要折叠与矩阵值相关联的结果的行名：

```
> which(sapply(col.matx, length) != 0 , arr.ind=TRUE)
 [1]  6 12 18 23 28 31 32 34 37 38 42 43 47 48 
```

所以这会从上面的矩阵中挑选出项目名称，并使用模算术将它们与 term.labels 相关联：

```
data.frame(coef =  unlist(col.matx[
                      which(sapply(col.matx, length) != 0 , arr.ind=TRUE)] ), 
           term.label =rownames(col.matx)[
                       which(sapply(col.matx, length) != 0 , arr.ind=TRUE) %% 5 ])
                 coef     term.label
1          total_bill     total_bill
2             sexMale            sex
3              daySat            day
4              daySun            day
5             dayThur            day
6  total_bill:sexMale     total_bill
7  total_bill:sexMale            sex
8  total_bill:sexMale total_bill:sex
9      sexMale:daySat            sex
10     sexMale:daySat            day
11     sexMale:daySun            sex
12     sexMale:daySun            day
13    sexMale:dayThur            sex
14    sexMale:dayThur            day 
```

折叠值方法是 SO 上的常见请求。有一个在过去 24 小时内得到答复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:00:19.697

好的，使用完全包含在模型中的信息找到了 lm 模型的解决方案。

```
require(plyr)       # for join function
require(reshape2)   # for melt function

matchCoefs <- function(model)
{
    # get the terms
    theTerms <- model$terms
    # get the assignment position
    thePos <- model$assign
    # get intercept indicator
    inter <- attr(theTerms, "intercept")
    # get coef names
    coefNames <- names(coef(model))
    # get pred names
    predNames <- attr(theTerms, "term.labels")
    # expand out pred names to match coefficient names
    predNames <- predNames[thePos]
    # if there's an intercept term add it to the pred names
    if(inter == 1)
    {
        predNames <- c("(Intercept)", predNames)
    }

    # build data.frame linking term to coefficient name
    matching <- data.frame(Term=predNames, Coefficient=coefNames)

    ## now match individual predictor to term
    # get matrix as data.frame
    factorMat <- as.data.frame(attr(theTerms, "factor"))
    # add column from rownames as identifier
    factorMat$.Pred <- rownames(factorMat)
    # melt it down for comparison
    factorMelt <- melt(factorMat, id.vars=".Pred", variable.name="Term", )
    # only keep rows where there's a match
    factorMelt <- factorMelt[factorMelt$value == 1, ]
    # again, bring in coefficient if needed
    if(inter == 1)
    {
        factorMelt <- rbind(data.frame(.Pred="(Intercept)", Term="(Intercept)", value=1), factorMelt)
    }
    # join into the matching data.frame
    matching <- join(matching, factorMelt, by="Term")

    return(matching)
}

# fit some models with different terms
mod1 <- lm(tip ~ total_bill * sex + day, tips)
mod2 <- lm(tip ~ total_bill * sex + day - 1, tips)
mod3 <- lm(tip ~ (total_bill + sex + day)^3, tips)
mod4 <- lm(tip ~ total_bill * sex + day + I(total_bill^2), tips)

matchCoefs(mod1)
matchCoefs(mod2)
matchCoefs(mod3)
matchCoefs(mod4)

# now with the convoluted baseball example
baseball <- data.frame(Bat=sample(1:100, 20, replace=T), Batter=sample(c("David", "Batley", "Bob", "Ace"), 20, replace=T), Hits=sample(1:20, 20, replace=T))
bMod <- lm(Hits ~ Bat*Batter, baseball)
matchCoefs(bMod) 
```

没有循环，所有内置函数，没有正则表达式。我需要对此进行更多测试并输入数据类型信息，但这应该比较简单。

# javascript - 样式单选按钮 (CSS/jQuery)

> ID：15259573
> 
> 赞同：0
> 
> 时间：2013-03-06T22:41:07.813
> 
> 标签：javascript, jquery, css

我有这个：http: [//jsfiddle.net/ptWhn/](http://jsfiddle.net/ptWhn/)

```
<pre>
/*HTML*/
`<label class="for_radio"><input type="radio"><span>radio-button-1</span></label>`
`<label class="for_radio"><input type="radio"><span>radio-button-2</span></label>`

/*jQuery*/
$(document).ready(function(){
$('input[type="radio"]').click(function() {
if($('input[type="radio"]').is(':checked')) { 
$(this).closest('label').addClass('active');}
else {
$(this).closest('label').removeClass('active');
}

});
      });

/*CSS*/
.active {
    background: #ffc;
}
</pre> 
```

......在选择单选按钮时，在选择单个背景颜色时，它的有意义有效，除了我无法弄清楚如何删除当未选中其中一个单选按钮时更改背景颜色的.active类。而且在 jsfiddle 中，由于某种原因，当单击另一个单选按钮时，备用单选按钮不会取消选择。

我无法弄清楚原因的第二件事是为什么我似乎需要在 if 语句之前使用 .click(function() 。也就是说，

```
if($('input[type="radio"]').is(':checked')) { 
$(this).closest('label').addClass('active');} 
```

... 本身不能作为 JS 片段工作。为什么？

将不胜感激任何见解。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:43:27.863

首先，将您的 pre 标签更改为 script 标签。

与其使用 if 语句来添加和删除类，不如直接使用`toggleClass()`?

```
$('input[type="radio"]').click(function() {
   if($('input[type="radio"]').is(':checked')) { 
      $(this).closest('label').toggleClass('active');
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:50:51.237

你不需要 if 语句，试试这个：

```
$(document).ready(function(){
   $('input[type="radio"]').click(function() {
      $('input:not(:checked)').parent().removeClass("active");
      $('input:checked').parent().addClass("active");
   });
}); 
```

另外，您说“单击另一个单选按钮时，备用单选按钮不会取消选择”。

将名称属性添加到您的输入中，即：`Name="Group1"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:51:27.913

好的，这里有几件事。

首先，组中的单选按钮需要具有相同的名称。例如：

```
<label class="for_radio"><input type="radio" name="buttons"><span>radio-button-1</span></label>
<label class="for_radio"><input type="radio" name="buttons"><span>radio-button-2</span></label> 
```

这将解决备用按钮未取消选择的问题。

要解决添加和删除类的问题，请使用 jQuery toggleClass：

```
$('input[type="radio"]').click(function() {
    $(this).closest('label').toggleClass('active');
}); 
```

不需要 if 语句。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:45:42.257

我将尝试回答这个问题，因为每个人都专注于您使用`<pre>`而不是`<script>`.

```
$('input[type="radio"]').on('change',function() {
    $('label.active').removeClass('active'); //removes class on old active label
    $(this).parent().addClass('active'); // adds class to new active label
} 
```

我这样做而不是使用 .toggleClass() 的原因是因为如果您有两个以上的单选按钮，这实际上会起作用。

# perl - Perl 子例程命名冲突

> ID：15259576
> 
> 赞同：1
> 
> 时间：2013-03-06T22:41:16.543
> 
> 标签：perl

Perl 在解析@INC 路径中的模块时如何解决子例程命名冲突？

我正在编写一个 Perl 模块，我不希望我的子例程名称与已经存在的任何内容发生冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:53:01.710

这应该在这里有所启发。

测试脚本

```
#!/usr/bin/perl

use warnings;
use strict;

# import 'print_stuff' from TestPackage
# so you can call this sub without package name
use TestPackage qw(print_stuff);

my $string = "whatever";
TestPackage::print_stuff($string);
print_stuff($string);

sub print_stuff {
    my $str = shift;

    print "test.pl: $str\n";
} 
```

测试包

```
package TestPackage;
# Export subs, which will enable you to call these
# subs without package name(TestPackage)
require Exporter;
@ISA = qw(Exporter);
@EXPORT_OK = qw(print_stuff);

sub print_stuff {
    my $str = shift;

    print "TestPackage: $str\n";
}   
1; 
```

输出：

```
$ test.pl
TestPackage: whatever
test.pl: whatever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:50:19.740

使用 package 在模块中构建单独的命名空间，这样可以避免此类问题。package 语句将编译单元声明为在给定的命名空间中。[此链接](http://perldoc.perl.org/perlmod.html)可能会对您有所帮助。

# python - 在python中封装套接字数据的正确方法？

> ID：15259578
> 
> 赞同：1
> 
> 时间：2013-03-06T22:41:26.873
> 
> 标签：python, sockets

我正在开发一个应用程序，该应用程序通过套接字向其自身的另一个实例发送和接收数据，我很好奇用“END”标签封装数据的最有效方法。例如，这里有两个函数用于通过套接字连接进行读写：

```
def sockWrite(conn, data):
    data = data + ":::END"
    conn.write(data)

def sockRead(conn):
    data = ""
    recvdata = conn.read()
    while recvdata:
        data = data + recvdata
        if data.endswith(':::END'):
            data = data[:len(data)-6]
            break
        recvdata = conn.read()
    if data == "":
        print 'SOCKR: No data')
    else:
        print 'SOCKR: %s', data)
    return data 
```

我基本上是在写入时添加“:::END”，因为单次写入可能会发生多次读取。因此，读取循环直到它到达“:::END”。

如果数据变量包含恰好出现在其中一次读取末尾的字符串“:::END”，这当然会导致问题。

是否有适当的方法以尽可能少的带宽添加来封装数据？我曾考虑过 pickle 或 json，但担心会增加大量带宽，因为我相信它们会将二进制数据转换为 ASCII。我说得对吗？

谢谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:48:29.487

Zeroth：你*真的*需要优化这个吗？

通常你发送相对较小的消息。当您查看忽略了多少以太网、IP 和 TCP 开销以及占用带宽的 RTT 时，从 512 字节的消息中削减 60 字节通常是愚蠢的。

另一方面，当您*发送*大量消息时，通常不需要在同一连接上发送多条消息。

查看常见的 Internet 协议，如 HTTP、IMAP 等。它们中的大多数使用行分隔、人类可读、易于调试的纯文本。HTTP 可以以二进制形式发送“消息的其余部分”，但是在完成发送后关闭套接字。

99% 的时间，这已经足够了。如果您认为它在您的情况下不够好，我*仍然*会编写协议的文本版本，然后在您调试完所有内容并正常工作后添加一个可选的二进制版本（然后测试它是否真的有所作为）。

* * *

同时，您的代码存在两个问题。

首先，如您所知，如果您将`":::END"`其用作分隔符，并且您的消息可以在其数据中包含该字符串，那么您就会有歧义。解决这个问题的常用方法是某种形式的转义或引用。举一个非常简单的例子：

```
def sockWrite(conn, data):
    data = data.replace(':', r'\:') + ":::END"
    conn.write(data) 
```

现在在阅读方面，您只需取消分隔符，然后`replace('r\:', ':')`在消息上。（当然，为了使用 6 字节的`':::END'`分隔符而对每个冒号进行转义是很浪费的——你不妨只使用未转义的冒号作为分隔符，或者编写更复杂的转义机制。）

其次，“单次写入可能会发生多次读取”是对的，但单次读取可能会发生多次写入也是正确的。您可以阅读此消息的一半，以及下一条消息的一半。这意味着您不能只使用`endswith`; 您必须使用`partition`or之类的东西`split`，并编写可以处理多条消息的代码，还必须编写可以存储部分消息的代码，直到下一次`read`循环。

* * *

同时，针对您的具体问题：

> 是否有适当的方法以尽可能少的带宽添加来封装数据？

当然，至少有三种合适的方式：定界符、前缀或自定界格式。

你已经找到了第一个。它的问题是：除非有一些字符串永远不可能出现在您的数据中（例如，`'\0'`在人类可读的 UTF-8 文本中），否则您可以选择不需要转义的分隔符。

像 JSON 这样的自定界格式是最简单的解决方案。当最后一个打开的大括号/括号关闭时，消息就结束了，是下一个的时候了。

或者，您可以为每条消息添加包含长度的标头作为前缀。这就是许多低级协议（如 TCP）所做的。最简单的格式之一是[netstring](http://en.wikipedia.org/wiki/Netstring)，其中标头只是以字节为单位的长度，表示为正常的 base-10 字符串，后跟冒号。netstring 协议*还*使用逗号作为分隔符，这增加了一些错误检查。

* * *

> 我曾考虑过pickle或json，但担心会增加大量带宽，因为我相信它们会将二进制数据转换为ASCII

`pickle`具有二进制和文本格式。正如[文档](http://docs.python.org/3/library/pickle.html#data-stream-format)所解释的，如果您使用协议`2`、、`3`或`HIGHEST_PROTOCOL`，您将获得相当有效的二进制格式。

另一方面，JSON 只处理字符串、数字、数组和字典。您必须先将任何二进制数据手动呈现为字符串（或字符串或数字的数组，或其他），然后才能对其进行 JSON 编码，然后在另一端进行反转。两种常见的方法是 base-64 和 hex，它们分别增加了 25% 和 100% 的数据大小，但如果你真的需要，还有更有效的方法可以做到这一点。

当然，JSON 协议本身使用的字符比严格必要的要多，所有这些引号和逗号等等，以及您为任何字段提供的任何名称都将作为未压缩的 UTF-8 发送。如果确实存在问题，您始终可以将 JSON 替换为[BSON](http://bsonspec.org)、[Protocol Buffers](http://code.google.com/p/protobuf/)、[XDR或其他不太“浪费”的序列化格式。](http://en.wikipedia.org/wiki/External_Data_Representation)

同时，`pickle`不是自定界的。您必须先将消息分开，然后才能解开它们。JSON*是*`json.loads`自定界的，但除非先将消息分开，否则不能只使用；你将不得不写一些更复杂的东西。最简单的方法是重复调用[`raw_decode`](http://docs.python.org/3/library/json.html#json.JSONDecoder.raw_decode)缓冲区，直到你得到一个对象。

# java - java.dyn 被重命名了吗？

> ID：15259579
> 
> 赞同：2
> 
> 时间：2013-03-06T22:41:30.263
> 
> 标签：java, dynamic

“java.dyn”包发生了什么？我无法在 Eclipse 的 java 1.7 中得到它。其实我只是想了解*“InvokeDynamic”*并尝试运行[这个](http://oneminutedistraction.wordpress.com/2010/11/22/invokedynamic-bytecode-in-jdk-7/)例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:46:13.473

是的，它变成了[java.lang.invoke 包](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/package-frame.html)

# xpages - 提交的 XPage 是否可以在完成后初始化，以便后退按钮显示一个干净的页面

> ID：15259580
> 
> 赞同：0
> 
> 时间：2013-03-06T22:41:37.547
> 
> 标签：xpages

默认情况下，My XPage 创建一个新文档，并在通过验证时重定向到一个新页面。

如果用户提交页面并且某些字段未通过验证，则错误消息将按预期显示在消息控件中。如果用户更正了错误并且页面然后通过验证，它将按预期重定向到ThankYou.xsp 页面。

但是，如果他们随后按下浏览器的“后退”按钮，他们将返回 XPage 并再次看到验证错误。

有没有一种方法可以避免这种行为，而是在成功提交时重置 XPage，以便在按下 Back 时显示新页面？

这是提交按钮设置...

`<xp:eventHandler event="onclick" submit="true" refreshMode="complete" immediate="false" save="true" id="eventHandler1"`>

导航...

`<xp:this.navigationRules`> `<xp:navigationRule outcome="xsp-success" viewId="/ThankYou.xsp"`> `</xp:navigationRule`> `</xp:this.navigationRules`>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:10:14.393

我有过类似的问题。就我而言，如果用户刷新页面，它会复制文档。我能够通过使用一个函数重定向到当前页面来解决这个问题。Tommy Valand 最初是这样写的： [http ://dontpanic82.blogspot.com/2010/06/xpages-avoid-saving-duplicate-documents.html](http://dontpanic82.blogspot.com/2010/06/xpages-avoid-saving-duplicate-documents.html)

我将其修改为重定向到选项卡表的当前选项卡。如果您不使用这些，请从功能中删除它。我相信在您的情况下，如果您在重定向到ThankYou 页面之前使用此功能，那么后退按钮将不会显示验证错误。它可能只会显示经过验证的文档。

您将希望将此函数包含在 SSJS 代码库中。保存新文档后调用该函数。我是这样称呼它的：

```
 redirectToCurrentDocument( false, "Invoices" ) 
```

Invoices 是我要重定向到的选项卡的名称。

```
 function redirectToCurrentDocument( switchMode:boolean, tab){
  try {
    if( typeof currentDocument === 'undefined' || viewScope.stopRedirect ){ return;     }
    // Gets the name of the XPage. E.g. /Person.xsp
    var page = view.getPageName();

    // Finds extra parameters, strips away XPages parameters/trims leading &
    var parameters = context.getUrl().getQueryString().substring(1);
    var extraParameters = parameters.replace( 
     /([&\?^]*_[a-z0-9=]+[&]{0,1})|(tab=\w{0,}[\&]{0,1})|(action=\w{4}Document[\&]{0,1})|(documentId=[\w]{32}[\&]{0,1})/ig, '').replace( /\&$/, '' );

    // Gets the unid of the current document
    //var unid = currentDocument.getDocument().getUniversalID();
    //var unid = document1.getDocument().getUniversalID();  //changed this line to make work with multiple data sources - SJZ
    var unid = document1.getDocument().getNoteID();  //also changed to use NoteID since it gave runtime errors for new documents - SJZ

    // Sets/changes the action according according to the mode the document is in
    var isEditable = currentDocument.isEditable();
    if( switchMode ){ isEditable = !isEditable; } // false -> true / true -> false

    var action = ( isEditable ) ? 'editDocument' : 'openDocument';

    // Open the current document via a get request
    var redirectUrl = page + '?documentId=' + unid + '&action=' + action;

    if( extraParameters ){ redirectUrl += '&' + extraParameters; }

    //print("tab=" + tab)
    redirectUrl += '&tab=' + tab

    context.redirectToPage( redirectUrl );
  } catch(e){ /* Exception logging */ }
} 
```

希望对您有所帮助。这对我很有效。

# ios - 如何强制 parse.com 将对象添加为字符串而不是数组？

> ID：15259582
> 
> 赞同：0
> 
> 时间：2013-03-06T22:41:40.217
> 
> 标签：ios, objective-c, cocoa, parse-platform

当我通过使用添加 NSString

```
[myObject addObject:myString forKey:myKey] 
```

字符串被转换为数组。

我怎样才能强制它成为一个字符串？我应该使用数据浏览器手动创建表的行，还是有办法通过代码来创建（当通过 objectWithClassName 创建类时）？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:22:39.797

简单的回答：

```
[myObject setObject:myString forKey:myKey] 
```

SETObject 而不是 ADDObject

# objective-c - 双指针上的 OCMock 参数匹配

> ID：15259583
> 
> 赞同：2
> 
> 时间：2013-03-06T22:41:53.063
> 
> 标签：objective-c, ocmock

对于这样的选择器：

```
-(void) callFoo:(NSError**)error; 
```

我怎样才能得到像下面这样的期望工作？ARC 不喜欢这种期望，我不想为整个单元测试文件禁用 ARC！

```
[[mockObject expect] callFoo:[OCMArg anyPointer]]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T08:18:01.773

`anyPointer`返回 void *，但在 ARC 下，[指向 Objective-C 对象的双指针使用 __autoreleasing 隐式限定](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#indirect-parameters)。

尝试将其更改为：

```
[[mockObject expect] callFoo:(NSError * __autoreleasing *)[OCMArg anyPointer]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T23:11:23.657

通常，当 OCMock 对某个选择器有问题时，除了编写 OCMock 喜欢的包装选择器之外别无他法。丑陋的 hack，但它绕过它，让你使用 ARC，并且设置时间不到一分钟。

不幸的是，我发现自己一直在使用 OCMock。

# jquery - 如何更具体地使用 .slideToggle？

> ID：15259586
> 
> 赞同：2
> 
> 时间：2013-03-06T22:42:01.797
> 
> 标签：jquery

*可怕的标题，但我很难说出我的问题。*

我正在尝试制作几个框，只需单击一个按钮，所有这些框都会`.slideToggle()`显示大量信息。我的问题是每个框都应该有自己的按钮，因为它现在已经编码，无论我点击什么按钮，只有一个描述会展开和折叠。

我编写了以下 jQuery 代码：

```
$(document).ready(function() {
    $('#sponsor-description').hide();

    $('#sponsor .expand').click(function() {
         $('#sponsor-description').slideToggle('slow');
    });
}); 
```

您可以在网站上亲自试用（单击橙色的“展开”按钮）：[http](http://dacc.fredrixdesign.com/sponsors/) ://dacc.fredrixdesign.com/sponsors/ 。

当我单击“扩展”按钮之一时，我将如何使相应的描述向下滑动？我想`$(this)`在某种程度上可能会有所帮助，但我不确定。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:46:20.427

#sponsor-description 是一个 ID。你真的在滥用身份证。对于每个元素，它们必须是唯一的。我建议要么使用唯一的 id，要么使用 css 类中更好的选择器。

现在，您使用赞助商描述作为每个描述元素的 id，这就是您的代码失败的原因。

我不知道 Wordpress，但是如果您可以将所有这些 id 属性更改为类，那么您将是黄金。假设您可以更改它们，您的代码将是：

```
$('.sponsor .expand').click(function() {
     $(this).parents('.sponsor').children('.sponsor-description').slideToggle('slow');
}); 
```

# java - 为具有多种布局的 Android 优化代码

> ID：15259593
> 
> 赞同：2
> 
> 时间：2013-03-06T22:42:20.813
> 
> 标签：java, android, android-layout

我正在创建一个具有两种布局的 Android 应用程序。所有布局都有一些共同特征，例如顶部相同，唯一的区别在于底部。

目前我已经为两个布局创建了两个单独的 java 文件。我只是简单地复制了实现类似按钮等功能的代码

![在此处输入图像描述](../Images/5ed2dfad902e630d17802aaa7cfc5c20.png)

看到的部分是图片是布局的顶部，两种布局都相同；

有什么方法可以通过可重用代码来优化功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:48:53.583

在我看来，这有助于**`<include>`**在您的主要布局中使用。

**步：**

您必须为您的通用布局创建一个 XML 文件。

**顶栏.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width=”match_parent”
    android:layout_height="wrap_content"
    android:background="@color/titlebar_bg">

     <ImageView android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:src="@drawable/gafricalogo" />
</FrameLayout> 
```

像这样，现在您必须将此 XML 文件包含到您需要的位置。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"    
    android:gravity="center_horizontal">

     <include layout="@layout/topbar"/>   

      ...

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:48:09.780

我认为这个标签栏也可以用于这个..

以下是完整教程的链接...

[http://mindstick.com/Articles/7e659092-3046-4461-97ba-b2b28616241e/?tab%20layout%20android%20application](http://mindstick.com/Articles/7e659092-3046-4461-97ba-b2b28616241e/?tab%20layout%20android%20application)

# scala - 为什么这个复杂的理解失败？

> ID：15259595
> 
> 赞同：0
> 
> 时间：2013-03-06T22:42:24.223
> 
> 标签：scala

```
object Example extends App {
  val result = for {
    a <- Some(22.5)
    b <- Some(Map("t1" -> 10.0, "t2" -> 22.0))
    c <- Some(Map("t1" -> 10.0, "t2" -> 22.0))
    (aa, bb) <- b
    d <- Map("t1" -> 10.0, "t2" -> 22.0).get(aa)
    e <- Map("t1" -> 10.0, "t2" -> 22.0).get(aa)
    f <- Some(123123.213)
    g <- Some(123123.232)
    h <- Some(234234.22)
    i = g * h
  } yield 10
}

//scala: type mismatch;
//found   : scala.collection.immutable.Iterable[Int]
//required: Option[?]
//(aa, bb) <- b
//^ 
```

# php - 在我开始之前需要帮助，将图像显示给多人

> ID：15259596
> 
> 赞同：0
> 
> 时间：2013-03-06T22:42:26.877
> 
> 标签：php, javascript, jquery, ruby, html

我正在研究我需要学习什么语言来做以下事情，

屏幕需要多人可以查看，例如地图首先他们会登录，1 个人可以控制整个地图，包括诸如战争迷雾、放置标记等控件。1-5 人应该能够看到地图，但不能对其进行任何更改。

对正确方向的任何帮助都会有所帮助。如果这在编程中确实有名称或其他名称，请告诉我，我至少会对其进行一些研究。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:49:27.883

这可以通过多种方式实现，但一种比较合适的新技术/方法是[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)。基本思想是用户订阅各种服务器提要并在服务器广播新事件时接收更新。

通过这种方式，Person 1 可以向服务器发送请求以触发在地图上放置令牌。然后将设置服务器以将此事件广播给所有订阅者（人 2-5）。

粘合剂将是您在 Javascript 中组合的某种客户端应用程序，它将处理来自服务器的响应并充当用户的应用程序。您需要考虑一些方法来控制人 1 和人 2-5 之间的差异。这可以通过客户端-服务器设置来完成，其中客户端应用程序依赖于来自应用程序服务器的权限和身份验证。

您可以使用任意数量的技术来完成最后一段中的任务，选择任何让您感觉最舒服的技术。如果我这样做，我可能会在客户端使用backbone.js，然后在服务器端使用某种RESTful API。RESTful 相当普遍，因此只需使用您喜欢的任何语言实现服务器端，该语言具有对 Comet 和 REST 的 3rd 方库支持。

# asp.net-mvc - MVC 自动生成的带有日期的创建页面抛出需要的非空项目

> ID：15259599
> 
> 赞同：1
> 
> 时间：2013-03-06T22:43:03.403
> 
> 标签：asp.net-mvc, entity-framework

我有一个带有不可为空日期字段的简单表。该字段在 DB 中具有默认值 GetDate()。DB 表是通过 EntityFramework 提出的，当我让 MVC 4 模板为该表自动生成一个 create.cshtml 页面时，它可以工作，但是当我尝试运行该表时出现错误： **传递到字典中的模型项是null，但此字典需要“System.DateTime”类型的非 null 模型项。**

CSHTML 文件：

```
@model MyModel.Content
<div class="editor-label">
        @Html.LabelFor(model => model.ActiveDate)
    </div>      
    <div class="editor-field">
        @Html.EditorFor(model => model.ActiveDate)
        @Html.ValidationMessageFor(model => model.ActiveDate)
    </div> 
```

EF 自动生成的类：

```
public partial class Content
{
    public int ID { get; set; }
    public string Title { get; set; }
    public int CategoryID { get; set; }
    public string Content1 { get; set; }
    public bool IsActive { get; set; }
    public System.DateTime ActiveDate { get; set; }
    public System.DateTime DeactiveDate { get; set; }
    public System.DateTime LastEditDate { get; set; }
    public string LastEditor { get; set; }

    public virtual ContentCategory ContentCategory { get; set; }
} 
```

这似乎不是一种不寻常的方法。模板不应该能够处理创建新的不可为空的日期吗？

我必须做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:45:39.787

我处理这个问题的方法是在我的视图模型上使用可为空的 DateTimes 并在它们上设置 [Required] 属性，这样如果模型验证，那么我可以保证当我将值复制到我的实体模型并保存数据时，然后它会成功。这样，您可以将实体模型（保存到数据库的内容）保留为非空日期时间。

另一个选项是根据其他数据或基于当前日期时间，如果有一些合理的东西，则为日期时间提供默认值。例如，将 ActiveDate 默认为当前日期，因此默认情况下它现在开始处于活动状态。

否则，第一个选项是最好的，因为您不想提供像 1/1/0001 这样无意义的默认值

# python - 使用 .txt 文件 python 中的信息创建矩阵

> ID：15259600
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:43:03.587
> 
> 标签：python, matrix, python-2.7

我有一个 .txt 文件，内容如下：

狗 鸟 32.0 貉 43 鸟 浣熊 16

我想在 python 中创建一个矩阵，其中包含 dog、bird、raccoon 列和 dog、bird、raccoon 行，并在矩阵单元格中插入数字。

例如，狗和鸟的横截面为 32.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:19:43.837

我认为如果您的文本文件的格式稍有不同，编写代码会更容易。有点像 x 列、y 列和 az 列。看起来像这样的东西：

```
Dog      Bird     32
Raccoon  Dog      43
Bird     Raccoon  16 
```

我这样做是为了让它工作。这并不完全正确，但它可能会让你走上正确的轨道。

```
def printMatrix(matrix,rows,columns,row):
    print matrix[row-1][columns-1]

if __name__=='__main__':
    matrix=[]

    with open('matrix.txt','r') as f:

        for l in f:
            t=l.split(',')
            matrix.append(t)
    printMatrix(matrix, 3, 3, 1) 
```

# networking - 为什么使用 Wireshark 在我的桌面和手持应用程序之间看不到任何对话？

> ID：15259602
> 
> 赞同：0
> 
> 时间：2013-03-06T22:43:15.647
> 
> 标签：networking, tcp, windows-ce, network-protocols, wireshark

我有一个在我的桌面上运行并连接到手持设备上的 Windows CE 应用程序的 Windows 应用程序。手持设备使用 Windows 应用程序作为其管道来获取数据（它下载表格，然后将它们转换为另一种格式，但就这个问题而言，这可能既不存在也不存在）。

由于我们遇到了奇怪的异常情况，在某些极少数情况下手持应用程序挂起（如果文件大小是一个非常具体的数字 - 请参阅[当数据量可被 1023 或 1024 整除时，为什么提取操作会崩溃？](https://stackoverflow.com/questions/15098568/why-would-a-fetch-operation-crash-when-the-amount-of-data-is-divisible-by-1023-o)），我想准确查看两个设备之间传递的内容。

我已经在命令行中使用“ipconfig”获得了两台机器/设备的 IP 地址。在他们通信时运行 Wireshark（活动*正在*发生），然后仔细研究捕获，我看到有几次涉及桌面机器的 IP 地址（作为目标和源），但我*从来*没有看到手持设备的 IP 地址...为什么不？

台式机参与的许多“谈话”似乎也与wireshark有关。

所以这两个设备/应用程序显然正在通信，但就好像 Wireshark 对它视而不见......？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:46:25.157

如果台式机和手持设备通过 Wi-Fi 网络进行通信，并且您在台式机上运行 Wireshark，那么如果您在 Wi-Fi 网络上捕获，那应该可以工作（在这种情况下，请*关闭*混杂和监控模式） .

如果您在第三台机器上运行 Wireshark，则必须在第三台机器上[以混杂模式或监控模式进行捕获](http://wiki.wireshark.org/CaptureSetup/WLAN)，并且监控模式在 Windows 上不起作用。如果网络受到保护（WEP、WPA、WPA2 等），则需要[配置 Wireshark 来解密网络上的数据包](http://wiki.wireshark.org/HowToDecrypt802.11)。

如果台式机和手持设备通过移动电话网络进行通信，您*可能*能够在台式机上运行 Wireshark 并捕获流量（但可能不是在 Windows 上），但您将无法在第三台机器上运行它。

# java - 找不到包 IntelliJ IDEA Skype4java

> ID：15259603
> 
> 赞同：0
> 
> 时间：2013-03-06T22:43:24.603
> 
> 标签：java, intellij-idea, skype, skype4java

我非常沮丧，我什至无法开始编写我的插件，因为我在编译一个简单的测试用例时遇到了这样的问题。

我按照IDEAs网站上的指南添加库，这似乎是成功的，因为IntelliSense检测到包/类，但后来我来编译..找不到包

这是一个屏幕截图：非常感谢任何建议，谢谢。

![截屏](../Images/1197ecb10d76898f66f24e27c4a61d99.png)

如您所见，它似乎在 IDE 中获取库（检测包/类/方法等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:48:38.620

您似乎告诉 IntelliJ，该库是包含所有分发（源、文档等）的 zip 文件。提取 zip 文件，并使其指向该 zip 可能包含的 jar 文件。

# sql - 如何从 T-SQL 中的字符串中删除扩展的 ASCII 字符？

> ID：15259622
> 
> 赞同：15
> 
> 时间：2013-03-06T22:44:05.983
> 
> 标签：sql, sql-server, string, tsql, ascii

我需要从 T-SQL 中的 SELECT 语句中过滤掉（删除）扩展的 ASCII 字符。

我正在使用存储过程来做到这一点。

预期输入：

```
ËËËËeeeeËËËË 
```

预期输出：

```
eeee 
```

我发现的只是[MySQL](https://forums.oracle.com/forums/thread.jspa?threadID=995686)。

我正在使用 ：

```
Microsoft SQL Server Management Studio  11.0.2100.60
Microsoft .NET Framework    4.0.30319.17929 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T23:35:14.000

好的，试试这个。他们似乎有同样的问题。无论如何，您需要根据您的要求对其进行修改。

```
CREATE FUNCTION RemoveNonASCII 
(
    @nstring nvarchar(255)
)
RETURNS varchar(255)
AS
BEGIN

    DECLARE @Result varchar(255)
    SET @Result = ''

    DECLARE @nchar nvarchar(1)
    DECLARE @position int

    SET @position = 1
    WHILE @position <= LEN(@nstring)
    BEGIN
        SET @nchar = SUBSTRING(@nstring, @position, 1)
        --Unicode & ASCII are the same from 1 to 255.
        --Only Unicode goes beyond 255
        --0 to 31 are non-printable characters
        IF UNICODE(@nchar) between 32 and 255
            SET @Result = @Result + @nchar
        SET @position = @position + 1
    END

    RETURN @Result

END
GO 
```

[在SqlServerCentral](http://www.sqlservercentral.com/Forums/Topic1001736-391-1.aspx#bm1015640)查看

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-23T16:45:59.180

接受的答案是使用应该避免的循环......

我的解决方案是完全可内联的，很容易从中创建一个 UDF（或者甚至更好：一个内联 TVF）。

想法：创建一组运行数字（这里它受限于 sys.objects 中的对象数量，但有大量示例如何动态创建数字计数）。在第二个 CTE 中，字符串被拆分为单个字符。最后的选择带着清理过的字符串返回。

```
DECLARE @tbl TABLE(ID INT IDENTITY, EvilString NVARCHAR(100));
INSERT INTO @tbl(EvilString) VALUES('ËËËËeeeeËËËË'),('ËaËËbËeeeeËËËcË');

WITH RunningNumbers AS
(
    SELECT ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) AS Nmbr
    FROM sys.objects
)
,SingleChars AS
(
    SELECT tbl.ID,rn.Nmbr,SUBSTRING(tbl.EvilString,rn.Nmbr,1) AS Chr
    FROM @tbl AS tbl
    CROSS APPLY (SELECT TOP(LEN(tbl.EvilString)) Nmbr FROM RunningNumbers) AS rn 
)
SELECT ID,EvilString
      ,(
        SELECT '' + Chr 
        FROM SingleChars AS sc
        WHERE sc.ID=tbl.ID AND ASCII(Chr)<128
        ORDER BY sc.Nmbr
        FOR XML PATH('')
      ) AS GoodString
FROM @tbl As tbl 
```

结果

```
1   ËËËËeeeeËËËË    eeee
2   ËaËËbËeeeeËËËcË abeeeec 
```

[这是我的另一个答案](https://stackoverflow.com/a/32048968/5089204)，该方法用于将所有*特殊*字符替换为*安全*字符以获得*纯拉丁文*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-24T08:42:36.740

只是更正上面的代码（它正在削减 DOT）

```
CREATE FUNCTION [dbo].[RemoveNonASCII] 
(
    @nstring nvarchar(255)
)
RETURNS nvarchar(255)
AS
BEGIN

    DECLARE @Result nvarchar(255)
    SET @Result = ''

    DECLARE @nchar nvarchar(1)
    DECLARE @position int

    SET @position = 1
    WHILE @position <= LEN(@nstring)
    BEGIN
        SET @nchar = SUBSTRING(@nstring, @position, 1)
        --Unicode & ASCII are the same from 1 to 255.
        --Only Unicode goes beyond 255
        --0 to 31 are non-printable characters
        IF (UNICODE(@nchar) between 192 and 198) or (UNICODE(@nchar) between 225 and 230) -- letter A or a with accents
            SET @nchar = 'a'
        IF (UNICODE(@nchar) between 200 and 203) or (UNICODE(@nchar) between 232 and 235) -- letter E or e with accents
            SET @nchar = 'e'
        IF (UNICODE(@nchar) between 204 and 207) or (UNICODE(@nchar) between 236 and 239) -- letter I or i with accents
            SET @nchar = 'i'
        IF (UNICODE(@nchar) between 210 and 214) or (UNICODE(@nchar) between 242 and 246) or (UNICODE(@nchar)=240) -- letter O or o with accents
            SET @nchar = 'o'
        IF (UNICODE(@nchar) between 217 and 220) or (UNICODE(@nchar) between 249 and 252)  -- letter U or u with accents
            SET @nchar = 'u'
        IF (UNICODE(@nchar)=199)  or (UNICODE(@nchar)=231)  -- letter Ç or ç 
            SET @nchar = 'c'
        IF (UNICODE(@nchar)=209)  or (UNICODE(@nchar)=241)  -- letter Ñ or ñ 
            SET @nchar = 'n'
        IF (UNICODE(@nchar) between 45 and 46) or (UNICODE(@nchar) between 48 and 57) or (UNICODE(@nchar)  between 64 and 90) or (UNICODE(@nchar) = 95) or (UNICODE(@nchar)  between 97 and 122)
            SET @Result = @Result + @nchar
        SET @position = @position + 1
    END
    set @Result = lower(@Result) -- e-mails in lower case
    RETURN @Result

END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-26T21:51:49.347

感谢您分享您的代码。

我需要类似的东西，不仅用于清理电子邮件地址，还用于一般用途，在用户网站输入通过集成模块到达 SAP ERP 之前对其进行过滤。

在巴西跑步，它必须服从语言口音……

这是生成的代码。

也许有一天它可以帮助某人，就像它对我一样。

```
 IF EXISTS
     (
         SELECT * 
           FROM sys.objects 
          WHERE object_id = OBJECT_ID(N'[dbo].[fnRemoveNonASCII]') 
            AND type IN (N'FN')
     )
         DROP FUNCTION dbo.fnRemoveNonASCII
     GO

     CREATE FUNCTION [dbo].[fnRemoveNonASCII] 
     (
         @nstring nvarchar(MAX) 
     )
     RETURNS nvarchar(MAX)
     AS
     BEGIN

         DECLARE @nchar nvarchar(1)      -- individual char in string
         DECLARE @nUnicode nvarchar(3)   -- ASCII for individual char in string
         DECLARE @position int           -- subscript to control loop in the string
         DECLARE @Result nvarchar(MAX)   -- return valus

         SET @Result = ''
         SET @position = 1

         WHILE @position <= LEN(@nstring)

            BEGIN

                --Unicode & ASCII are the same from 1 to 255.
                --Only Unicode goes beyond 255
                --0 to 31 are non-printable characters

                SET @nchar = SUBSTRING(@nstring, @position, 1)

                SET @nUnicode = UNICODE(@nChar) 

                IF @nUnicode = 10 
                   OR @nUnicode = 13
                   OR @nUnicode BETWEEN 32  AND 126
                   OR @nUnicode = 160
                   OR @nUnicode BETWEEN 192 AND 207
                   OR @nUnicode BETWEEN 210 AND 213
                   OR @nUnicode BETWEEN 217 AND 219
                   OR @nUnicode BETWEEN 224 AND 227
                   OR @nUnicode BETWEEN 231 AND 234
                   OR @nUnicode = 236
                   OR @nUnicode = 237
                   OR @nUnicode BETWEEN 242 AND 245
                   OR @nUnicode = 247
                   OR @nUnicode = 249
                   OR @nUnicode = 250        

                   SET @Result = @Result + @nchar

                ELSE IF @nUnicode = 9 -- TAB
                   SET @Result =  @Result + '  '

                ELSE
                   SET @Result =  @Result + ' '

                SET @position = @position + 1
         END

         RETURN @Result
     END

     /*
     ---------------------------------------------------------------------------------------------------------------

     -- Tabela dos caracteres Unicode/ASCII exportáveis

     &#9;   |   &#x9;      |    %9     =    TAB
     &#10;     |    &#xa;      |    %a     =    0A   Line Feed
     &#13;     |    &#xd;      |    %d     =    0D   Carriage Return
     &#32;      |   &#x20;  |   %20 =   <space>  
     &#33;     |    &#x21;  |   %21 =   !            
     &#34;     |    &#x22;  |   %22 =   "            
     &#35;     |    &#x23;  |   %23 =   #            
     &#36;     |    &#x24;  |   %24 =   $            
     &#37;     |    &#x25;  |   %25 =   %            
     &#38;     |    &#x26;  |   %26 =   &            
     &#39;     |    &#x27;  |   %27 =   '            
     &#40;     |    &#x28;  |   %28 =   (            
     &#41;     |    &#x29;  |   %29 =   )            
     &#42;     |    &#x2a;  |   %2a =   *            
     &#43;     |    &#x2b;  |   %2b =   +            
     &#44;     |    &#x2c;  |   %2c =   ,            
     &#45;     |    &#x2d;  |   %2d =   -            
     &#46;     |    &#x2e;  |   %2e =   .            
     &#47;     |    &#x2f;  |   %2f =   /            
     &#48;     |    &#x30;  |   %30 =   0            
     &#49;     |    &#x31;  |   %31 =   1            
     &#50;     |    &#x32;  |   %32 =   2            
     &#51;     |    &#x33;  |   %33 =   3            
     &#52;     |    &#x34;  |   %34 =   4            
     &#53;     |    &#x35;  |   %35 =   5            
     &#54;     |    &#x36;  |   %36 =   6            
     &#55;     |    &#x37;  |   %37 =   7            
     &#56;     |    &#x38;  |   %38 =   8            
     &#57;     |    &#x39;  |   %39 =   9            
     &#58;     |    &#x3a;  |   %3a =   :            
     &#59;     |    &#x3b;  |   %3b =   ;            
     &#60;     |    &#x3c;  |   %3c =   <            
     &#61;     |    &#x3d;  |   %3d =   =            
     &#62;     |    &#x3e;  |   %3e =   >            
     &#63;     |    &#x3f;  |   %3f =   ?            
     &#64;     |    &#x40;  |   %40 =   @   
     &#65;     |    &#x41;  |   %41 =   A
     &#66;     |    &#x42;  |   %42 =   B
     &#67;     |    &#x43;  |   %43 =   C
     &#68;     |    &#x44;  |   %44 =   D
     &#69;     |    &#x45;  |   %45 =   E
     &#70;     |    &#x46;  |   %46 =   F
     &#71;     |    &#x47;  |   %47 =   G
     &#72;     |    &#x48;  |   %48 =   H
     &#73;     |    &#x49;  |   %49 =   I
     &#74;     |    &#x4a;  |   %4a =   J
     &#75;     |    &#x4b;  |   %4b =   K
     &#76;     |    &#x4c;  |   %4c =   L
     &#77;     |    &#x4d;  |   %4d =   M
     &#78;     |    &#x4e;  |   %4e =   N
     &#79;     |    &#x4f;  |   %4f =   O 
     &#80;     |    &#x50;  |   %50 =   P
     &#81;     |    &#x51;  |   %51 =   Q
     &#82;     |    &#x52;  |   %52 =   R
     &#83;     |    &#x53;  |   %53 =   S
     &#84;     |    &#x54;  |   %54 =   T
     &#85;     |    &#x55;  |   %55 =   U
     &#86;     |    &#x56;  |   %56 =   V
     &#87;     |    &#x57;  |   %57 =   W
     &#88;     |    &#x58;  |   %58 =   X
     &#89;     |    &#x59;  |   %59 =   Y
     &#90;     |    &#x5a;  |   %5a =   Z
     &#91;     |    &#x5b;  |   %5b =   [
     &#92;     |    &#x5c;  |   %5c =   \
     &#93;     |    &#x5d;  |   %5d =   ]
     &#94;     |    &#x5e;  |   %5e =   ^
     &#95;     |    &#x5f;  |   %5f =   _
     &#96;     |    &#x60;  |   %60 =   `
     &#97;     |    &#x61;  |   %61 =   a
     &#98;     |    &#x62;  |   %62 =   b
     &#99;     |    &#x63;  |   %63 =   c
     &#100; |   &#x64;  |   %64 =   d
     &#101; |   &#x65;  |   %65 =   e
     &#102; |   &#x66;  |   %66 =   f
     &#103; |   &#x67;  |   %67 =   g
     &#104; |   &#x68;  |   %68 =   h
     &#105; |   &#x69;  |   %69 =   i
     &#106; |   &#x6a;  |   %6a =   j
     &#107; |   &#x6b;  |   %6b =   k
     &#108; |   &#x6c;  |   %6c =   l
     &#109; |   &#x6d;  |   %6d =   m
     &#110; |   &#x6e;  |   %6e =   n
     &#111; |   &#x6f;  |   %6f =   o
     &#112; |   &#x70;  |   %70 =   p
     &#113; |   &#x71;  |   %71 =   q
     &#114; |   &#x72;  |   %72 =   r
     &#115; |   &#x73;  |   %73 =   s
     &#116; |   &#x74;  |   %74 =   t
     &#117; |   &#x75;  |   %75 =   u
     &#118; |   &#x76;  |   %76 =   v
     &#119; |   &#x77;  |   %77 =   w
     &#120; |   &#x78;  |   %78 =   x
     &#121; |   &#x79;  |   %79 =   y
     &#122; |   &#x7a;  |   %7a =   z
     &#123; |   &#x7b;  |   %7b =   {
     &#124; |   &#x7c;  |   %7c =   |
     &#125; |   &#x7d;  |   %7d =   }
     &#126; |   &#x7e;  |   %7e =   ~
     &#160; |   &#xa0;  |   %a0 =   <nbsp>      
     &#192; |   &#xc0;  |   %c0 =   À
     &#193; |   &#xc1;  |   %c1 =   Á
     &#194; |   &#xc2;  |   %c2 =   Â
     &#195; |   &#xc3;  |   %c3 =   Ã
     &#196; |   &#xc4;  |   %c4 =   Ä
     &#197; |   &#xc5;  |   %c5 =   Å
     &#198; |   &#xc6;  |   %c6 =   Æ
     &#199; |   &#xc7;  |   %c7 =   Ç
     &#200; |   &#xc8;  |   %c8 =   È
     &#201; |   &#xc9;  |   %c9 =   É
     &#202; |   &#xca;  |   %ca =   Ê
     &#203; |   &#xcb;  |   %cb =   Ë
     &#204; |   &#xcc;  |   %cc =   Ì
     &#205; |   &#xcd;  |   %cd =   Í
     &#206; |   &#xce;  |   %ce =   Î
     &#207; |   &#xcf;  |   %cf =   Ï
     &#210; |   &#xd2;  |   %d2 =   Ò
     &#211; |   &#xd3;  |   %d3 =   Ó
     &#212; |   &#xd4;  |   %d4 =   Ô
     &#213; |   &#xd5;  |   %d5 =   Õ
     &#217; |   &#xd9;  |   %d9 =   Ù
     &#218; |   &#xda;  |   %da =   Ú
     &#219; |   &#xdb;  |   %db =   Û
     &#224; |   &#xe0;  |   %e0 =   à
     &#225; |   &#xe1;  |   %e1 =   á
     &#226; |   &#xe2;  |   %e2 =   â
     &#227; |   &#xe3;  |   %e3 =   ã
     &#231; |   &#xe7;  |   %e7 =   ç
     &#232; |   &#xe8;  |   %e8 =   è
     &#233; |   &#xe9;  |   %e9 =   é
     &#234; |   &#xea;  |   %ea =   ê
     &#236; |   &#xec;  |   %ec =   ì
     &#237; |   &#xed;  |   %ed =   í
     &#242; |   &#xf2;  |   %f2 =   ò
     &#243; |   &#xf3;  |   %f3 =   ó
     &#244; |   &#xf4;  |   %f4 =   ô
     &#245; |   &#xf5;  |   %f5 =   õ
     &#247; |   &#xf7;  |   %f7 =   ÷
     &#249; |   &#xf9;  |   %f9 =   ù
     &#250; |   &#xfa;  |   %fa =   ú
     */

     GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-30T20:59:57.473

amit kohan 提供的解决方案有效，但对我来说太慢了。对于大字符串数据，每个字符的迭代不是最优的。我制作了以下功能，虽然不是很紧凑但速度很快。

```
CREATE FUNCTIONdbo.F_StripLowAscii
(
   @Name nvarchar(max)
)
RETURN nvarchar(max) as
BEGIN
DECLARE @Result nvarchar(max) 

    If @Name IS NULL 
      RETURN @Name 

    DECLARE @BlankRange VARCHAR(15) 
    DECLARE @FoundAt INTEGER 

    -- ASCII CHAR #0 needs a special treatment
    SET @BlankRange = '%[' + CHAR(0) + ']%' 
    SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    WHILE @FoundAt > 0 
    BEGIN 
        SET @name = left(@name, @FoundAt-1 ) + SUBSTRING(@name, @FoundAt+1, LEN(@Name))
        SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    END 

    SET @BlankRange = '%[' + CHAR(1)+'-'+CHAR(8) + ']%' 
    SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    WHILE @FoundAt > 0 
    BEGIN 
        SET @name = Replace(@Name, SUBSTRING(@Name, @FoundAt,1),'')
        SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    END 

    SET @BlankRange = '%[' + CHAR(11)+'-'+CHAR(12) + ']%' 
    SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    WHILE @FoundAt > 0 
    BEGIN 
        SET @name = Replace(@Name, SUBSTRING(@Name, @FoundAt,1),'')
        SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    END 

    SET @BlankRange = '%[' + CHAR(14)+'-'+CHAR(31) + ']%' 
    SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    WHILE @FoundAt > 0 
    BEGIN 
        SET @name = Replace(@Name, SUBSTRING(@Name, @FoundAt,1),'')
        SET @FoundAt = PATINDEX(@BlankRange ,@Name COLLATE SQL_Latin1_General_CP850_Bin) 
    END 

    RETURN @Name 

END
GO 
```

# html - 如何将 CSS 样式添加到 HTML 中的焦点锚点

> ID：15259631
> 
> 赞同：6
> 
> 时间：2013-03-06T22:44:31.597
> 
> 标签：html, css, anchor

在第 1 页有一个链接，可将您带到第 2 页的某个点

`<a href="page2.html#position">MY TEXT HERE</a>`

这会将您直接带到第 2 页上的锚点（位置），代码如下

```
<a name="position"> MORE TEXT HERE</a> 
```

现在，我的问题是当 #position 在 URL 中时如何更改文本和背景颜色？

例如：www.domainname.com/page2.html#position

这是我使用但不起作用的 CSS：

```
#position {
color:#ff0000;
background-color:#f5f36e;
} 
```

这是一个例子[http://jsfiddle.net/jvtcj/2/](http://jsfiddle.net/jvtcj/2/)

先感谢您！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T22:51:24.973

使用`:target`选择器：

```
a:target, /* or simply */
:target {
    /* CSS to style the focused/target element */
} 
```

您最好使用`id`特定元素的 来接收焦点，因为如果没有完全弃用，命名锚似乎已被删除。

参考：

*   [CSS 选择器，第 3 级](http://www.w3.org/TR/selectors/#selectors)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:50:28.407

您可以使用 CSS3伪选择器： [http](http://blog.teamtreehouse.com/stay-on-target)`:target` ://blog.teamtreehouse.com/stay-on-target

另外，不要使用旧的神话`<a name="destination">...</a>`，您只需要`id`跳到您想要跳转到的部分，例如`<section id="destination">...</section>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:57:42.753

```
<a href="#position2" id="position">MY TEXT HERE</a>
...
<a name="position2" id="pos2"> MORE TEXT HERE</a> 
```

...在CSS中：

```
a[name=position2]:target{     
    background-color:green;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:48:14.730

尝试使用

```
<a name="position" class="position"> MORE TEXT HERE</a> 
```

并在 CSS 中使用

```
.position {
color:#ff0000;
background-color:#f5f36e;
} 
```

[http://jsfiddle.net/jvtcj/4/](http://jsfiddle.net/jvtcj/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T22:49:34.607

为标签添加一个 id。

您可以在此处查看如何使用您的示例

[http://jsfiddle.net/h5NZh/](http://jsfiddle.net/h5NZh/)

```
<a id="position" href="#position">MY TEXT HERE</a> 
```

# php - 使用 jquery ajax 上传多个图像并使用 php 处理它们

> ID：15259632
> 
> 赞同：6
> 
> 时间：2013-03-06T22:44:35.187
> 
> 标签：php, jquery, ajax, image, multipartform-data

我以前从未做过这样的事情，我在问如何做到这一点。我可以找到如何使用纯 html 多格式部分等来执行此操作。但是现在如何使用 ajax 来执行此操作？

伪代码：

html:

```
<input type="text" class="imgform" name="imagename" value="name" />
<input type="file" class="imgform_image" name="image" value="C:\Users\william\Pictures\image.png" />
<input type="button" id="btn" form="imgform" /> 
```

查询：

```
$('body').on('click', '#btn', function(){
    var form = $(this).attr("form");
    var string = $('.' + form).serialize();

    var image = $('.imgform_image').value("form");
    image = converttobase64(image);

    $.post('action.php?action=uploadimg', string + {'image':image}, function (data){    
       datalader(data);
    });
}); 
```

不知道如何做到这一点。还有一种方法可以对多个 img 文件执行此操作，并检查文件是否实际上是图像，当然使用文件名作为图像名称而不是使用输入文本字段。

任何提示、链接或代码示例都会很有用，谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T20:44:55.697

注意：我完全审查了我的答案并使其变得更好！

**HTML**

首先我们制作一个没有确认按钮的传统表格。相反，我们制作了一个按钮。

```
<form enctype="multipart/form-data" id="myform">    
    <input type="text" name="some_usual_form_data" />
    <br>
    <input type="file" accept="image/*" multiple name="img[]" id="image" /> <sub>note that you have to use [] behind the name or php wil only see one image</sub>
    <br>
    <input type="button" value="Upload images" class="upload" />
</form>
<progress value="0" max="100"></progress>
<hr>
<div id="content_here_please"></div> 
```

**Javascript/jquery 上传端**

比这里的 Javascript .. o 是和 Jquery 上传图像和其他表单数据：

```
 $(document).ready(function () { 
        $('body').on('click', '.upload', function(){
            // Get the form data. This serializes the entire form. pritty easy huh!
            var form = new FormData($('#myform')[0]);

            // Make the ajax call
            $.ajax({
                url: 'action.php',
                type: 'POST',
                xhr: function() {
                    var myXhr = $.ajaxSettings.xhr();
                    if(myXhr.upload){
                        myXhr.upload.addEventListener('progress',progress, false);
                    }
                    return myXhr;
                },
                //add beforesend handler to validate or something
                //beforeSend: functionname,
                success: function (res) {
                    $('#content_here_please').html(res);
                },
                //add error handler for when a error occurs if you want!
                //error: errorfunction,
                data: form,
                // this is the important stuf you need to overide the usual post behavior
                cache: false,
                contentType: false,
                processData: false
            });
        });
    }); 

    // Yes outside of the .ready space becouse this is a function not an event listner!
    function progress(e){
        if(e.lengthComputable){
            //this makes a nice fancy progress bar
            $('progress').attr({value:e.loaded,max:e.total});
        }
    } 
```

**PHP处理端**

对于那些需要 php 端来处理这些图像的人来说，这里是循环槽的 php 代码：

```
<?php

    $succeed = 0;
    $error = 0;
    $thegoodstuf = '';
    foreach($_FILES["img"]["error"] as $key => $value) {
        if ($value == UPLOAD_ERR_OK){
            $succeed++;

            // get the image original name
            $name = $_FILES["img"]["name"][$key];

            // get some specs of the images
            $arr_image_details = getimagesize($_FILES["img"]["tmp_name"][$key]); 
            $width = $arr_image_details[0];
            $height = $arr_image_details[1];
            $mime = $arr_image_details['mime'];

            // Replace the images to a new nice location. Note the use of copy() instead of move_uploaded_file(). I did this becouse the copy function will replace with the good file rights and  move_uploaded_file will not shame on you move_uploaded_file.
            copy($_FILES['img']['tmp_name'][$key], './upload/'.$name);

            // make some nice html to send back
            $thegoodstuf .= "
                                <br>
                                <hr>
                                <br>

                                <h2>Image $succeed - $name</h2>
                                <br>
                                specs,
                                <br>
                                width: $width  <br>
                                height: $height <br>
                                mime type: $mime <br>
                                <br>
                                <br>
                                <img src='./upload/$name' title='$name' />
            ";
        }
        else{
            $error++;
        }
    }

    echo 'Good lord vader '.$succeed.' images where uploaded with success!<br>';

    if($error){
        echo 'shameful display! '.$error.' images where not properly uploaded!<br>';
    }

    echo 'O jeah there was a field containing some usual form data: '. $_REQUEST['some_usual_form_data'];

    echo $thegoodstuf;

?> 
```

在我的开发网络服务器上进行现场演示，[它并不总是在线！](http://paperboat.tk/test/multiple%20image%20upload%20ajax/)

**如果要压缩和调整大小**

你需要这个类：

```
class SimpleImage{   

        var $image; 
        var $image_type;   

        function load($filename){   
            $image_info = getimagesize($filename); 
            $this->image_type = $image_info[2]; 

            if($this->image_type == IMAGETYPE_JPEG)
            {   
                $this->image = imagecreatefromjpeg($filename); 
            }
            elseif($this->image_type == IMAGETYPE_GIF) 
            {   
                $this->image = imagecreatefromgif($filename); 
            }
            elseif($this->image_type == IMAGETYPE_PNG)
            {   
                $this->image = imagecreatefrompng($filename); 
            }
        } 

        function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=0777){   

            if($image_type == IMAGETYPE_JPEG)
            { 
                $gelukt = imagejpeg($this->image,$filename,$compression); 
            }
            elseif($image_type == IMAGETYPE_GIF)
            {   
                $gelukt = imagegif($this->image,$filename); 
            }
            elseif($image_type == IMAGETYPE_PNG)
            {   
                $gelukt = imagepng($this->image,$filename); 
            } 

            if($permissions != false)
            {   
                chmod($filename,$permissions); 
            }

            return $gelukt; 
        } 

        function output($image_type=IMAGETYPE_JPEG) { 

            if($image_type == IMAGETYPE_JPEG)
            { 
                imagejpeg($this->image); 
            } 
            elseif($image_type == IMAGETYPE_GIF) 
            {   
                imagegif($this->image); 
            }
            elseif($image_type == IMAGETYPE_PNG)
            {   
                imagepng($this->image); 
            } 
        } 

        function getWidth(){   

            return imagesx($this->image);

        } 

        function getHeight(){   

            return imagesy($this->image); 

        } 

        function maxSize($width = 1920, $height = 1080){
            if(($this->getHeight() > $height) && ($this->getWidth() > $width)){
                $ratio = $height / $this->getHeight(); 
                $newwidth = $this->getWidth() * $ratio; 

                if($newwidth > $width){
                    $ratio = $width / $newwidth; 
                    $height = $height * $ratio;
                    $newwidth = $width;
                }

                $this->resize($newwidth,$height);
                return true;
            }
            elseif($this->getHeight() > $height){
                $ratio = $height / $this->getHeight(); 
                $width = $this->getWidth() * $ratio; 

                $this->resize($width,$height);
                return true;
            }
            elseif($this->getWidth() > $width){
                $ratio = $width / $this->getWidth(); 
                $height = $this->getheight() * $ratio;  

                $this->resize($width,$height);
                return true;
            }
            return false;
        }

        function resizeToHeight($height){   
            $ratio = $height / $this->getHeight(); 
            $width = $this->getWidth() * $ratio; 
            $this->resize($width,$height); 
        }   

        function resizeToWidth($width){ 
            $ratio = $width / $this->getWidth(); 
            $height = $this->getheight() * $ratio; 
            $this->resize($width,$height); 
        }   

        function scale($scale){ 
            $width = $this->getWidth() * $scale/100; 
            $height = $this->getheight() * $scale/100; 
            $this->resize($width,$height); 
        }   

        function resize($width,$height) { 

            $new_image = imagecreatetruecolor($width, $height); 
            if( $this->image_type == IMAGETYPE_GIF || $this->image_type == IMAGETYPE_PNG )
            { 
                $current_transparent = imagecolortransparent($this->image); 

                if($current_transparent != -1) {
                    $transparent_color = imagecolorsforindex($this->image, $current_transparent); 
                    $current_transparent = imagecolorallocate($new_image, $transparent_color['red'], $transparent_color['green'], $transparent_color['blue']); 
                    imagefill($new_image, 0, 0, $current_transparent); 
                    imagecolortransparent($new_image, $current_transparent); 
                }
                elseif($this->image_type == IMAGETYPE_PNG)
                { 
                    imagealphablending($new_image, false); 
                    $color = imagecolorallocatealpha($new_image, 0, 0, 0, 127); 
                    imagefill($new_image, 0, 0, $color); 
                    imagesavealpha($new_image, true); 

            } 
        } 

        imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight()); 
        $this->image = $new_image;   
    }
} 
```

你可以像这样使用它：

```
$succeed = 0;
$error = 0;
$thegoodstuf = '';
foreach($_FILES["img"]["error"] as $key => $value) {
    if ($value == UPLOAD_ERR_OK){
        $succeed++;

        $name = $_FILES["img"]["name"][$key];

        $image = new SimpleImage();
        $image->load($_FILES['img']['tmp_name'][$key]); 
        $chek = $image->maxSize();

        if($chek){
            $move = $image->save('./upload/'.$name);
            $message= 'Afbeelding verkleind naar beter formaat!<br>';
        }
        else{
            $move = copy($_FILES['img']['tmp_name'][$key], './upload/'.$name);
            #$move = move_uploaded_file($_FILES['img']['tmp_name'][$key], './upload/'.$name);
            $message= '';
        }

        if($move){

            $arr_image_details = getimagesize('./upload/'.$name); 
            $width = $arr_image_details[0];
            $height = $arr_image_details[1];
            $mime = $arr_image_details['mime'];

            $thegoodstuf .= "
                            <br>
                            <hr>
                            <br>

                            <h2>Image $succeed - $name</h2>
                            <br>
                            specs,
                            <br>
                            $message
                            width: $width  <br>
                            height: $height <br>
                            mime type: $mime <br>
                            <br>
                            <br>
                            <img src='./upload/$name' title='$name' />
            ";
        }
        else{
            $error++;
        }
    }
    else{
        $error++;
    }
}

echo 'Good lord vader '.$succeed.' images where uploaded with success!<br>';

if($error){
    echo 'shameful display! '.$error.' images where not properly uploaded!<br>';
}

echo 'O jeah there was a field containing some usual form data: '. $_REQUEST['some_usual_form_data'];

echo $thegoodstuf; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T19:18:25.623

我有一个带有调整大小的更新版本：

```
$succeed = 0;
$error = 0;
$thegoodstuf = '';
foreach($_FILES["file"]["error"] as $key => $value) {
    if ($value == UPLOAD_ERR_OK){
        $succeed++;

    // get the image original name
    $name = $_FILES["file"]["name"][$key];
    $ext = pathinfo($name, PATHINFO_EXTENSION);
    $img_name=md5($name.rand(00000,99999)).".".$ext;//rename filename

    if($ext=="jpg" || $ext=="jpeg" ){
        $uploadedfile = $_FILES['file']['tmp_name'][$key];
        $src = imagecreatefromjpeg($uploadedfile);
    }else if($ext=="png"){
        $uploadedfile = $_FILES['file']['tmp_name'][$key];
        $src = imagecreatefrompng($uploadedfile);
    }else {
        $src = imagecreatefromgif($uploadedfile);
    }

    list($width,$height)=getimagesize($uploadedfile);

    $new_width=800;
    $new_height=($height/$width)*$new_width;
    $tmp=imagecreatetruecolor($new_width,$new_height);

    $new_width1=140;
    $new_height1=($height/$width)*$new_width1;
    $tmp1=imagecreatetruecolor($new_width1,$new_height1);

    imagecopyresampled($tmp,$src,0,0,0,0,$new_width,$new_height,
     $width,$height);

    imagecopyresampled($tmp1,$src,0,0,0,0,$new_width1,$new_height1, 
    $width,$height);

    $filename = "../../photos/".$img_name;
    $filename1 = "../../photos/tn/".$img_name;

    imagejpeg($tmp,$filename,100);
    imagejpeg($tmp1,$filename1,100);

    imagedestroy($src);
    imagedestroy($tmp);
    imagedestroy($tmp1);

//insert to DB here

    // make some nice html to send back
    $thegoodstuf .= "
                        <br>
                        <hr>
                        <div class='thumbnail'>
                        <b class='alert alert-info'>Image $succeed - $img_name</b>
                        <br>
                        width: $new_width  <br>
                        height: $new_height <br>
                        mime type: $mime <br>
                        <br>
                        <br>
                        <img src='../../photos/$img_name' title='$img_name' class='thumbnail'/>
                        </div>
    ";
}
else{
    $error++;
}

}
echo $thegoodstuf;
echo $succeed.' images where uploaded with success!<br>';

if($error){
    echo $error.' images where not properly uploaded!<br>';
} 
```

# android - AsyncTask 运行时黑屏

> ID：15259635
> 
> 赞同：2
> 
> 时间：2013-03-06T22:44:48.693
> 
> 标签：android, android-asynctask, progress-bar

我是在这里提问的新手，所以任何关于此的建议都将不胜感激......但我的问题是：

我正在尝试从一项活动切换到另一项活动，我将在其中显示来自服务器的一些数据。我正在通过 AsyncTask 从服务器中提取数据，但是当下载时间较长时，活动之间会显示黑屏。我已经尝试将 AsyncTask 从 onCreate() 放到 onStart() 但那里没有变化。

新活动：

```
public class SalesMenu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setContentView(R.layout.sales_menu);        
    setProgressBarIndeterminateVisibility(true);
    super.onCreate(savedInstanceState);
}

@Override
protected void onStart() {
    List<HashMap<String, Object>> result = null;
    AsyncTask<Void, Boolean, List<HashMap<String, Object>>> aTask = new AsyncSearchRead(
            "sale.order", 
            new Object[0], 
            new String[] {"name"}, 
            this).execute();

    try {
        result = aTask.get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
    Log.d("test", (result!=null ? result.toString() : "nothing"));
    super.onStart();
}

} 
```

我的异步任务：

```
public class AsyncSearchRead extends AsyncTask<Void, Boolean, List<HashMap<String, Object>>> {
String mModel; 
boolean mCount; 
Integer mOffset;
Integer mLimit; 
String mOrder; 
boolean mReverseOrder; 
Object[] mConditions;
String[] mFields;
Activity parentActivity;

public AsyncSearchRead(String model, boolean count, Integer offset, Integer limit, 
                    String order, boolean reverseOrder, Object[] conditions, String[] fields,
                    Activity activity) {
    mModel = model;
    mCount = count;
    mOffset = offset;
    mLimit = limit;
    mOrder = order;
    mReverseOrder = reverseOrder;
    mConditions = conditions;
    mFields = fields;
    parentActivity = activity;
}

@Override
protected List<HashMap<String, Object>> doInBackground(Void... params) {
    Long[] ids;
    List<HashMap<String, Object>> results;
            //Downloading the data
    ids = SetServer.connection.search(mModel, mCount, mOffset, mLimit, mOrder, mReverseOrder, mConditions);
    results = SetServer.connection.read(mModel, ids, mFields);

    return results;
}

@Override
protected void onPostExecute(List<HashMap<String, Object>> result) {
    parentActivity.setProgressBarIndeterminateVisibility(false);
}

} 
```

当我没有关闭 onPostExecute 的可见性时，它在显示活动后继续旋转，但仅在加载后显示。

我怎样才能让它显示活动，然后才开始加载数据并显示一些进度条/加载器？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T22:48:39.800

这是因为你正在使用[`.get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29). `.get()`本质上是[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)同步的（让主线程等到它完成），所以它基本上就像根本不运行`AsyncTask`。

我的建议如下：

1.  移动`List<HashMap<String, Object>> result = null;`成为成员变量。
2.  删除整个`try/catch`语句（其中`.get()`的那个），以及对`Log.*`.
3.  移动你`AsyncTask`成为一个内部类`SalesMenu`。
4.  做`this.result = result`in `onPostExecute()`，以及您需要对其进行的任何其他处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:49:58.310

除了@Eric 的回答，这是一个非常好的建议（+1），尝试把`super.onCreate()`before `setContentView()`。作为一般规则，在重写的 Android 生命周期方法中，超级调用应该在其他任何事情之前发生，并且在这两种方法的情况下尤其重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:52:55.337

除了其他优秀的回答。

在您的方法中，为了显示您定期`doInBackground()`调用的进度，这又会调用. 仅在返回**后**调用。`publichProgress()``onProgressUpdate()``onPostExecute()` **`doInBackground()`**

 **[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中有一个完整的用法示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T11:46:11.077

在执行任何长时间运行的任务时需要考虑以下几点：1) 将它们排除在主线程之外 2) 将 Async 任务类用于短期任务并使它们异步，使用带有线程的处理程序 3) 排除任何长时间运行/繁重的任务oncreate 方法中的任务 4) 在 super.onStart() 之后执行任何任务；在 onStart() 或 onCreate 超级调用下调用。

希望这会帮助你。**

# jquery - 循环遍历列表？

> ID：15259637
> 
> 赞同：0
> 
> 时间：2013-03-06T22:45:04.527
> 
> 标签：jquery

```
<ul id ="questions">
    <li class="question"></li>
    <li class="question"></li>
    <li class="question"></li>
</ul> 
```

如何遍历每个列表元素？

到目前为止，我有：

```
$("#questions li").each(function() { }); 
```

但是没有运气，有什么想法吗？

我不得不提一下，除了第一个 li 之外的所有内容都是即时添加的，这就是为什么循环没有拾取它们的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:48:19.290

`**[LIVE DEMO](http://jsbin.com/ujiver/1/edit)**`

使用`.ready function`，这样做后，DOM 修改将在读取后发生。

```
$(function(){
   $("#questions li").each(function() {
          // DO SOMETHING
   });
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

或者使用您的 fireBug 或 devTool 来获取任何其他可能的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:51:57.707

使用函数参数获取每个列表项的索引和值：

```
$("#questions li").each(function(index, value) {
    console.log(index + '' + $(value).html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:52:28.937

您似乎正在遍历每个列表项。

如果将 dom 元素更改为：

```
<ul id ="questions">
    <li class="question">one</li>
    <li class="question">two</li>
    <li class="question">three</li> 
</ul> 
```

然后在文档加载时使用以下 jQuery 代码：

```
$(function(){
   $("#questions li").each(function() {
          alert($(this).html()); //Or whatever you want to do with that item
   });
}); 
```

你应该输出：

*   一
*   二
*   三

[注意：您可以在http://jsfiddle.net/](http://jsfiddle.net/)测试您的 JavaScript 和 jQuery

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:59:23.253

当您遍历每个列表项时，您想做什么？使用该`.each`功能应该很好用。如果您遇到问题，尽管可能是因为您过早调用该函数，在这种情况下`ready function`（如@roXon 所述）将解决该问题。否则，如果您遇到问题。`id`这可能是因为您`=`在`<ul>`

这是一个遍历每个元素的 jQuery 示例：

```
$('#questions li').each(function() {
    var i = $(this).index() + 1;
    $(this).text("List item " + i);
}); 
```

随意玩弄它：[http ://codepen.io/sdthornton/pen/gkayG](http://codepen.io/sdthornton/pen/gkayG)

# sql - Oracle SQL - 将两个查询的两个结果合二为一

> ID：15259638
> 
> 赞同：1
> 
> 时间：2013-03-06T22:45:08.993
> 
> 标签：sql, oracle

我有这两个单独的查询：

查询 1

```
select '2013-03-03' As "Week_Of",
count(player_id) as cohort_size
from player
where trunc(create_dtime) > To_Date('2013-Mar-03','yyyy-mon-dd')-7
and trunc(create_dtime) <= To_Date('2013-Mar-03','yyyy-mon-dd')
and world_flag != '1'
; 
```

哪个输出：

```
Week_of      Cohort_size
2013-03-03      18183 
```

查询 2

```
select '2013-03-03' As "Week_Of", 
count(player_id) as Day_0_Ret
from player
where trunc(init_dtime)-trunc(create_dtime) >= 0
and trunc(create_dtime) > To_Date('2013-Mar-03','yyyy-mon-dd')-7
and trunc(create_dtime) <= To_Date('2013-Mar-03','yyyy-mon-dd')
and world_flag != '1'
; 
```

哪些输出：

```
Week_of      Day_0_Ret
2013-03-03      15684 
```

我想把这两个查询放在一起，所以我有一个查询输出：

```
Week_of         Cohort_Size     Day_0_Ret
2013-03-03       18183              15684 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:48:57.397

使用`case`语句进行条件计数：

```
select '2013-03-03' As "Week_Of",
count(player_id) as cohort_size ,
count(case 
        when trunc(init_dtime)-trunc(create_dtime) >= 0 
        then player_id 
      end) as Day_0_Ret
from player
where trunc(create_dtime) > To_Date('2013-Mar-03','yyyy-mon-dd')-7
and trunc(create_dtime) <= To_Date('2013-Mar-03','yyyy-mon-dd')
and world_flag != '1'
; 
```

# python - 创建 Python 包和导入模块

> ID：15259639
> 
> 赞同：2
> 
> 时间：2013-03-06T22:45:10.987
> 
> 标签：python, module, package, python-import

我正在尝试编写我的第一个 Python 包，几乎我所有的模块都需要使用 NumPy。我应该`import numpy`在每个模块中编写还是在包中的某个地方我可以只导入一次以便每个模块都可以使用它？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:00:20.650

是的，只要在需要的地方导入它。

*不要*太聪明地编写为您导入所有内容的函数或为您导入内容并从中导入内容的元模块`import *`；所有这些只会使您的代码难以阅读，并且只是发生错误的另一个地方。

# android - 管理活动之间的类

> ID：15259640
> 
> 赞同：0
> 
> 时间：2013-03-06T22:45:15.360
> 
> 标签：android

我目前正在研究一个项目，在这个项目中我必须创建一个小型安卓游戏。如果一切顺利，我的游戏或多或少会像游戏男孩的旧口袋妖怪游戏。

游戏是使用多个活动（初始屏幕、菜单、游戏视图、战斗视图等）构建的。现在我的大部分事情都在工作。但是有一件事情困扰着我，我周围的人无法给出明确的答案。

在游戏中，我有一个名为 MusicPlayer.java 的类。该类用于在大部分活动中播放背景音乐。现在我在活动的 oncreate 中初始化这个类，并将其设置为播放 res/raw 文件夹中的 .mp3 文件。当我开始一个不同的活动时，我从 MusicPlayer 调用 .close()。

```
public class MusicPlayer {

private MediaPlayer player;

public void Play(int songid, Context cont)
{
    player = MediaPlayer.create(cont, songid);
    try {
            player.start();
    }
    catch (Exception e)
    {
        Log.d("MusicPlayer","Something wend wrong while starting the song!");
        Log.d("ERROR",e.toString());
    }
}

public void close()
{
    if(player != null)
    {
        player.stop();
        player.release();
        player = null;
    }
} 
```

一遍又一遍地创建这个类感觉有点笨拙，它迫使我在每一项活动中开始一首新歌。我还注意到，当开始一项新活动时，旧活动会继续运行。如果我不调用 .close ，音乐将继续在下一个窗口中播放。有没有办法再次访问这个对象？例如调用改变/停止歌曲的方法？我已经对此进行了一些谷歌尝试，但我无法让对象随 Activity 一起移动。它不适合 .putExtras() ，我也无法创建它的 Parcelable。

是的，现在这是一个相当多的文字，我很抱歉......但是对我的项目的这种限制真的让我很烦恼，而且我对 android/java 编程的知识非常有限（我习惯于 .net，现在只在 java/android 中工作了一个月）它会有所改善，所以如果有人知道我应该研究的东西，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:53:36.767

您可以使用 a[`Intent Service`](https://developer.android.com/training/run-background-service/create-service.html)来播放音乐，使用 Intent 从您的 Activity 中进行通信（例如更改歌曲、在您的应用不在前台时停止音乐等）

# python-2.7 - Python 高效包装器

> ID：15259641
> 
> 赞同：1
> 
> 时间：2013-03-06T22:45:16.287
> 
> 标签：python-2.7, overhead

Python 函数调用相对[昂贵。](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Data_Aggregation) 但是我不断遇到我希望能够以不同方式调用函数的情况，最简单的方法似乎是使用不同的调用在函数周围创建一个轻量级包装器。

**是否有比调用函数的方式更pythonic和/或更有效的方式来启用更多功能？**

* * *

对于一个完全人为的、过于简单的例子来说明我在问什么：

```
from math import sqrt
from collections import namedtuple

Point = namedtuple('Point', 'x y')

def distFunc(x1, y1, x2, y2):
    return sqrt((x1-x2)**2 + (y1-y2)**2)

def pointDistFunc(p1, p2):
    return distFunc(p1.x, p1.y, p2.x, p2.y) 
```

有没有更好的方法来编写 pointDistFunc？

事实上，这一次：

```
p1 = Point(1, 1)
p2 = Point(100, 100)

if __name__ == '__main__':
    import timeit
    print(timeit.timeit("distFunc(1, 1, 100, 100)", setup="from __main__ import distFunc"))
    print(timeit.timeit('pointDistFunc(p1, p2)', setup= 'from __main__ import pointDistFunc, p1, p2')) 
```

给出：

```
0.392938508373
0.977704155415 
```

所以开销似乎很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:20:54.453

我认为，总的来说，最好的办法是写最清晰的代码，不要过分担心效率。我认为在这种情况下，我会按照您已经做过的方式对其进行编码，而不必担心。

但是如果你知道一些代码会被大量调用，并且你希望它尽可能快，那么你也许可以通过重写来加快速度。在您的简单示例中，您可以通过重写包装器来进行计算来提高速度：

```
def pointDistFunc(p1, p2):
    return sqrt((p1.x-p2.x)**2 + (p1.y-p2.y)**2) 
```

理想情况下，您应该在某处进行一些单元测试来检查

```
pointDistFunc(p1, p2) == distFunc(p1.x, p1.y, p2.x, p2.y) 
```

这样，如果您最终更改`distFunc()`但忘记也更改`pointDistFunc()`测试将失败并且您会被提醒。

您提到的那条指南并不是要阻止您编写包装器；更多的是建议如何重写涉及列表之类的热点：

```
def gen_point_dist_from_lst(lst, p2):
    return (sqrt((p1.x-p2.x)**2 + (p1.y-p2.y)**2) for p1 in lst) 
```

如果列表有 1000 个点，那么与直接的生成器表达式相比，上面的函数调用节省了 2000 个函数调用

```
(pointDistFunc(p1, p2) for p1 in lst) 
```

关键是在你尝试这些技巧之前先真正遇到问题。如果您的程序已经足够快地运行，也许您不需要优化任何东西。如果需要您的代码更快，您可以尝试这些技巧。

PS 如果你可以使用 PyPy 来做你正在做的事情，它应该可以消除函数调用的开销。PyPy 有一个即时编译器，可以为您优化程序中的热点。

[http://speed.pypy.org/](http://speed.pypy.org/)

# javascript - 通过变量引用 Javascript 对象

> ID：15259648
> 
> 赞同：0
> 
> 时间：2013-03-06T22:45:42.797
> 
> 标签：javascript

我有一个像这样的对象：

```
var theObject = { 
    keyName1: { keyName2: value2, keyName3: value3, keyName4: value40 },
    ...,
    keyName10: { keyName2: value6, keyName3: value7, keyName4: value8 }
} 
```

`theObject["keyName10"]["keyName3"]`我知道我可以通过or引用 value7，`theObject.keyName10.keyName3` 但我需要将一个变量设置为类似搜索路径的东西，并以某种方式将其传递给`theObject`并直接获取 value7。

就像是：

```
var path = keyName10.keyName3;
var myValue = theObject(path); 
```

对象甚至可以进一步进入对象初始阶段。现在我正在通过看起来很糟糕的嵌套 for 循环来解决它。我错过了更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:09:06.097

我只是尝试添加一个有趣的解决方案。我绝对不会像这样使用它，但这个想法可能适用于你的情况。我也质疑这种方法的效率。

```
var theObject = { 
    keyName1: { keyName2: value2, keyName3: value3, keyName4: value40 },
    ...,
    keyName10: { keyName2: value6, keyName3: value7, keyName4: value8 }
}
var path = 'keyName10/keyName3';

function getProp(theObject, path){
    var parts = path.split("/"),
    idx = parts[0],
    newParts = parts.splice(0, 1),
    newPath = newParts.join("/"),
    obj = theObject[idx];

    // add some validation and error handling in case or error on path 
    // or missing property on obj

    // I do not like the line below, would need to find a better way to see
    // if the function return something or it does some recursion
    // need to figure the right condition to see if we are at des
    if(parts.length == 1) {
        return obj;
    } else {
       return getProp(obj, newPath);
    }
} 
```

可能有帮助：[如何检查对象是否在 JavaScript 中具有属性？](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-a-property-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:51:15.960

为什么不创建一个getter函数...

```
var path = 'keyName10/keyName3'

function getTheThing(key){
    var parts = key.split("/")
    return theObject[parts[0]][parts[1]]
}

var myValue = getTheThing(path) 
```

您可以通过将对象和 getter 的键传递给它来使其更通用，从而允许使用路径来访问不同的对象...

```
var path = 'keyName10/keyName3'

function getTheThing(key, obj){
    var parts = key.split("/")
    return obj[parts[0]][parts[1]]
}

var myValue = getTheThing(path,theObject) 
```

# python - 如何知道python生成器中可迭代的数量

> ID：15259649
> 
> 赞同：1
> 
> 时间：2013-03-06T22:45:42.863
> 
> 标签：python, generator, yield

我有以下代码

```
>>> x = ['a','b','c','d','e']
>>> def test_yield(lst):
...     for el in lst:
...        yield el
... 
>>> var = test_yield(x)
>>> var.next()
'a'
>>> var.next()
'b'
>>> var.next()
'c'
>>> var.next()
'd'
>>> var.next()
'e' 
```

我如何从生成器中知道可迭代的长度（在这种情况下是列表的长度）。在我的真实情况下，我没有确切的清单。我从发电机那里得到。简单地说，我想知道在我的第二个 var.next() 左右之后 var 中的可迭代数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:47:36.710

你不能。迭代器可以是无限的。

```
def test_yield():
    count = 1
    while True:
        count += 1
        yield count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:50:20.830

如果您知道您的迭代器不是无限的（请参阅@unutbu 的答案），您可以先将结果放入列表中，然后获取长度：

```
stuff = list(test_yield(x))
print(len(stuff)) 
```

# c++ - 保持两个交叉通信的 asio io_service 对象繁忙

> ID：15259650
> 
> 赞同：2
> 
> 时间：2013-03-06T22:45:43.537
> 
> 标签：c++, boost, boost-asio

我使用 boost:asio 和多​​个 io_services 来保持不同形式的阻塞 I/O 分开。例如，我有一个 io_service 用于阻塞文件 I/O，另一个用于长时间运行的 CPU 密集型任务（这可以扩展到第三个用于阻塞网络 I/O 等）一般来说，我想确保一种形式阻塞 I/O 不能饿死其他的。

我遇到的问题是，由于在一个 io_service 中运行的任务可以将事件发布到其他 io_service（例如，受 CPU 限制的任务可能需要启动文件 I/O 操作，或者完成的文件 I/O 操作可能会调用 CPU-绑定回调），我不知道如何让两个 io_services 都运行，直到它们都没有事件。

通常使用单个 I/O 服务，您可以执行以下操作：

```
 shared_ptr<asio::io_service> io_service (new asio::io_service);
 shared_ptr<asio::io_service::work> work (
   new asio::io_service::work(*io_service));

 // Create worker thread(s) that call io_service->run()

 io_service->post(/* some event */);

 work.reset();

 // Join worker thread(s) 
```

但是，如果我只是为这两个 io_services 执行此操作，那么我没有在其中发布初始事件的那个会立即完成。即使我向两者发布初始事件，如果 io_service B 上的初始事件在 io_service A 上的任务向 B 发布新事件之前完成，io_service B 也会过早完成。

如何在 io_service A 仍在处理事件时保持 io_service B 运行（因为服务 A 中的一个排队事件可能会向 B 发布新事件），反之亦然，同时仍然确保两个 io_services 退出它们的 run() 方法如果他们同时出局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:31:04.843

想出了一种方法来做到这一点，所以记录下来以防其他人在搜索中发现这个问题：

*   每创建N个交叉通信的io_services，为它们每一个创建一个工作对象，然后启动它们的工作线程。

*   创建一个不会运行任何工作线程的“主”io_service 对象。

*   不允许将事件直接发布到服务。相反，为 io_services 创建访问器函数，它将：

    1.  在主线程上创建一个工作对象。
    2.  将回调包装在一个运行真正回调的函数中，然后删除工作。
    3.  而是发布这个包装的回调。
*   在执行的主要流程中，一旦所有 N io_services 都已启动并且您已将工作发布到其中至少一个，请在主 io_service 上调用 run()。

*   当master io_service 的run() 方法返回时，删除所有N 个交叉通信io_services 上的初始工作，并加入所有工作线程。

让主 io_service 的线程自己处理每个其他 io_service 可确保它们不会终止，直到主 io_service 用完工作。让每个其他 io_services 自己在主 io_service 上为每个发布的回调工作确保主 io_service 不会耗尽工作，直到每个其他 io_services 不再有任何发布的回调要处理。

一个例子（可以封装在一个类中）：

```
shared_ptr<boost::asio::io_service> master_io_service;

void RunWorker(boost::shared_ptr<boost::asio::io_service> io_service) {
  io_service->run();
}

void RunCallbackAndDeleteWork(boost::function<void()> callback,
                              boost::asio::io_service::work* work) {
  callback();
  delete work;
}

// All new posted callbacks must come through here, rather than being posted
// directly to the io_service object.
void PostToService(boost::shared_ptr<boost::asio::io_service> io_service,
                   boost::function<void()> callback) {
  io_service->post(boost::bind(
      &RunCallbackAndDeleteWork, callback,
      new boost::asio::io_service::work(*master_io_service)));
}

int main() {
  vector<boost::shared_ptr<boost::asio::io_service> > io_services;
  vector<boost::shared_ptr<boost::asio::io_service::work> > initial_work;
  boost::thread_pool worker_threads;

  master_io_service.reset(new boost::asio::io_service);

  const int kNumServices = X;
  const int kNumWorkersPerService = Y;
  for (int i = 0; i < kNumServices; ++i) {
    shared_ptr<boost::asio::io_service> io_service(new boost::asio::io_service);
    io_services.push_back(io_service);
    initial_work.push_back(new boost::asio::io_service::work(*io_service));

    for (int j = 0; j < kNumWorkersPerService; ++j) {
      worker_threads.create_thread(boost::bind(&RunWorker, io_service));
    }
  }

  // Use PostToService to start initial task(s) on at least one of the services

  master_io_service->run();

  // At this point, there is no real work left in the services, only the work
  // objects in the initial_work vector.
  initial_work.clear();
  worker_threads.join_all();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:07:12.857

[HTTP 服务器示例 2](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/http/server2/io_service_pool.cpp)做了类似的事情，您可能会发现它很有用。它使用为每个`io_service`保留`vector`s`shared_ptr<boost::asio::io_service>`和 a的池的概念。它使用线程池来运行每个服务。`shared_ptr<boost::asio::io_service::work>``io_service`

该示例使用循环调度来分配 I/O 服务的工作，我认为这不适用于您的情况，因为您有`io_service`A 和`io_service`B的特定任务。

# events - 我可以在 Microsoft Lync API 的哪个位置为传入的 IM 设置事件处理程序？

> ID：15259653
> 
> 赞同：3
> 
> 时间：2013-03-06T22:45:51.523
> 
> 标签：events, powershell, lync, growl, lync-client-sdk

我正在为 InstantMessageReceived 事件设置一个处理程序，但它似乎只触发传出的文本消息，而不是传入的。这是我正在运行的代码：

```
# Register the app with Growl
$icon = "https://docs.google.com/uc?export=download&id=0B1Weg9ZlwneOZmY2b1NSVXJ0Q2s"
$types = '"new-im","new-call","invitation","share"'
& 'C:\Program Files (x86)\Growl for Windows\growlnotify.exe' /a:Lync /ai:$icon /r:$types "Registration."

#We just need the Model API for this example
import-module "C:\Program Files (x86)\Microsoft Lync\SDK\Assemblies\Desktop\Microsoft.Lync.Model.Dll"

#Get a reference to the Client object
$client = [Microsoft.Lync.Model.LyncClient]::GetClient()

#Set the client to reference to the local client
$self = $client.Self

# What do we do here?
$conversationMgr = $client.ConversationManager

# Register events for existing conversations.

$i = 0

for ($i=0; $i -lt $conversationMgr.Conversations.Count; $i++) {

Register-ObjectEvent -InputObject $conversationMgr.Conversations[$i].Modalities[1] -EventName "InstantMessageReceived" `
                    -SourceIdentifier "new im $i" `
                    -action {
                               $message = $EventArgs.Text
                               Write-Host "DEBUG: New incoming IM - $message"

                               # Try to get the name of the person...
                               $contactInfo = $Event.Sender.Conversation.Participants[1].Contact.GetContactInformation([Microsoft.Lync.Model.ContactInformationType[]] @("FirstName", "LastName", "DisplayName", "PrimaryEmailAddress", "Photo", "IconUrl", "IconStream"))
                               $name = " "
                               if ($contactInfo.Get_Item("FirstName")) { $name = $contactInfo.Get_Item("FirstName") + " " + $contactInfo.Get_Item("LastName") + ":" }
                               elseif ($contactInfo.Get_Item("DisplayName")) { $name = $contactInfo.Get_Item("DisplayName") + ":"}
                               else { $name = $contactInfo.Get_Item("PrimaryEmailAddress") + ":" }

                               # We need to check if the Lync window (conversation?) has focus or not.
                               if (1) {
                                  # We need to send our growl notification.
                                  & 'C:\Program Files (x86)\Growl for Windows\growlnotify.exe' /a:Lync /n:new-im /t:"New Instant Message" "$name $message" 
                               }

                            }
}

# If this exits, no more events.
while (1) { } 
```

每次我向其他人输入 IM 消息时，它都会执行我尝试对传入消息执行的操作。但对那些人来说，没有什么可以触发的，只是外向的。我已经浏览了所有文档，并且没有任何其他候选事件，我确定是这个。但是 Modality 对象只是存储了一些关于它是 IM 还是屏幕共享之类的东西，没有什么用处。

[http://msdn.microsoft.com/en-us/library/lync/microsoft.lync.model.conversation.instantmessagemodality_di_3_uc_ocs14mreflyncclnt_members(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/lync/microsoft.lync.model.conversation.instantmessagemodality_di_3_uc_ocs14mreflyncclnt_members(v=office.14).aspx)

我在哪里搞砸了？我更喜欢 Powershell 中的答案，但我认为这不是 Powershell 特有的问题，所以如果你知道如何在 C# 或 Visual Basic 或类似的东西中做到这一点，我也会很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:16:32.187

我没有 Lync，因此我可以自己进行测试，但请查看[此链接](http://www.codelync.com/2011/11/developing-screen-pop-applications/)，其中显示了如何使用 API。

问题是（据我了解）每个媒体的每个参与者都有一种模式。因此，对于仅使用文本的两个成员的对话，将有两种模式，一种用于传入消息（来自远程参与者），另一种用于传出。这在此处指定

> 在收到即时消息时发生，**如果 InstantMessageModality 属于本地参与者则发送**。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/lync/microsoft.lync.model.conversation.instantmessagemodality.instantmessagereceived_di_3_uc_ocs14mreflyncclnt%28v=office.14%29.aspx)

当您注册您的对象事件时，您将其注册到“您的模态”，而不是远程模态。要解决这个问题，您似乎需要从经理那里接受每个对话，查看除代表您的参与者之外的每个参与者（检查`IsSelf`属性）。然后从参与者（除了你自己）那里获取模式并注册`InstantMessageReceived`活动。

至少那是我从中得到的，但正如我所说，我没有使用 Lync 的经验，所以我很容易出错。

我对如何完成的猜测（非常未经测试）：

```
# What do we do here?  You get the manager the keeps track of every conversation
$conversationMgr = $client.ConversationManager

# Register events for existing conversations.

#You may need to use '$conversation in $conversationMgr.GetEnumerator()'
foreach ($conversation in $conversationMgr) {

    #Get remote participants
    $conversation.Participants | where { !$_.IsSelf } | foreach {
        #Get IM modality
        $textmod = [InstantMessageModality]($_.Modalities[ModalityTypes.InstantMessage])

        Register-ObjectEvent -InputObject $textmod -EventName "InstantMessageReceived" `
                    -SourceIdentifier "new im $i" `
                    -action {
                            #...

        }
    }
} 
```

# ruby-on-rails - 在 has_many 模型上调用 clear 后如何更新 belongs_to 模型

> ID：15259655
> 
> 赞同：0
> 
> 时间：2013-03-06T22:45:58.937
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有两个 ActiveRecord 模型（我不打算包括迁移）：

```
class User < ActiveRecord::Base
    belongs_to :subscription, :inverse_of => :users
end 
```

和

```
class Subscription < ActiveRecord::Base
    has_many :users, :inverse_of => :subscription
end 
```

我可以为`rails console`每个模型创建一个新对象，然后将用户添加到订阅模型：

```
>> s = Subscription.create
  => #<Subscription id: 1>
>> u = User.create
  => #<User id: 1, subscription_id: nil>
>> s.users << u
  => [#<User id: 1, subscription_id: 1>]
>> u
  => #<User id: 1, subscription_id: 1> 
```

但是如果我使用 Array.clear 方法，它会清除集合，但不会立即更新关联的模型：

```
>> s.users.clear
  => []
>> u
  => #<User id: 1, subscription_id: 1> 
```

如果我调用`u.reload`它，它将从数据库中提取最新版本，但它不应该为了更新我的缓存模型而这样做。我尝试按照[Bi-Directional Associations](http://guides.rubyonrails.org/association_basics.html#bi-directional-associations)`:inverse_of`中的建议使用，但没有奏效。

# sql-server - 无法删除合并拉订阅

> ID：15259656
> 
> 赞同：1
> 
> 时间：2013-03-06T22:45:59.760
> 
> 标签：sql-server, replication, merge-replication

环境：将pull订阅与匿名订阅者合并，使用网络同步，发布者为2008R2，订阅者为SQLEXPRESS 2008R2。

问题：我在订阅者上运行 sp_dropmergepullsubscription，在发布者上运行 sp_dropmergesubscription，订阅在订阅者上被删除，但为什么我在发布者的 sysmergesubscriptions 中看到该订阅者的条目，状态仍然为 1？

我在[这里](https://stackoverflow.com/questions/7876913/sql-server-replication-removing-broken-subscriptions-at-the-publisher)找到了一种 建议手动删除条目的方法，但是为什么我必须手动删除东西？

在订阅者上运行 sp_dropmergepullsubscription 后是否需要在发布者上运行 sp_dropmergesubscription？仅在订阅者端删除订阅是不够的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:37:51.083

不要手动删除 sysmergesubscriptions 中的条目。手动删除这些条目可能会导致以后无法添加新订阅者。

要在订阅数据库的订阅者处删除对 Merge 发布的拉取订阅，请执行[sp_dropmergepullsubscription](http://msdn.microsoft.com/en-us/library/ms187336.aspx)。然后在发布数据库上的发布者处执行[sp_dropmergesubscription](http://msdn.microsoft.com/en-us/library/ms176045.aspx)。这在[How to: Delete a Pull Subscription](http://msdn.microsoft.com/en-us/library/ms146906.aspx)中有介绍。

在发布者处执行 sp_dropmergesubscription 不会从 sysmergesubscription 中删除条目，但会将状态设置为 2，这表明它已被删除。

如果 sysmergesubscriptions 中的状态仍然为 1，那么您可能错误地执行了 sp_dropmergesubscription。确保指定@publication、@subscriber 和@subscriber_db。此外，为 @subscription_type 指定 pull 值。

# regex - 鸡蛋正则表达式

> ID：15259658
> 
> 赞同：0
> 
> 时间：2013-03-06T22:46:05.410
> 
> 标签：regex, perl

假设：

```
my $s1='A "sentence" ... is a concatination of nondelimiters followed by delimiters,
        followed by nondelimiters, followed by delimiters, ...'; 
```

或者

```
my $s2='"A "sentence" ... is a concatination of delimiters followed by nondelimiters,
        followed by delimiters, followed by nondelimiters, ..."'; 
```

我尝试使用标量 $d 中设置的分隔符通过正则表达式将其拆分为列表 @a：

```
my $d = ' ,."'; # delimiter set
my @a = $s1 =~ /([^$d]+)([$d]+)/g; # gives |A| "|sentence|" ... |is| |a| |... 
```

在第二种情况下，句子可以使用

```
my @a = $s2 =~ /([$d]+)([^$d]+)/g; # gives |"|A| "|sentence|" ... |is| |a|... 
```

一个正则表达式如何处理这两种情况？需要帮助 - 请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:05:50.580

您需要一个连续的分隔符或非分隔符块。只需使用

```
$s =~ /([$d]+|[^$d]+)/g; 
```

# c++ - 如何确保成员函数被调用一次

> ID：15259660
> 
> 赞同：1
> 
> 时间：2013-03-06T22:46:16.073
> 
> 标签：c++, boost, c++11

假设我有一个名为 foo 的对象列表。我如何确保在创建第一个 foo 时调用成员 init() 但只调用一次。另外我如何确保当最后一个对象被销毁时，成员 quit() 被调用但只调用一次。

我知道 c++11 有 std::call_once，而对于 c++03，boost 有 boost::call_once。

我的第一次尝试看起来像这样，但退出部分显然是错误的：

```
class foo
{
public:

    foo() { init(); }

    ~foo() 
    {
        // this is wrong
        quit();
    }

private:

    void init()
    {
        static boost::once_flag flag = BOOST_ONCE_INIT;
        boost::call_once( flag, [] () { /* init something */ }  );
    }

    void quit()
    {
        static boost::once_flag flag = BOOST_ONCE_INIT;
        boost::call_once( flag, [] () { /* quit something */ } );
    }
}; 
```

有没有办法仅依靠 c++ 工具来使其正确？

这是我实际尝试做的一个小补充。我正在尝试将 SDL 窗口包装在 c++ 类中，并希望调用 SDL_Init() 和 SDL_Quit 以及适当的时间。我的第一次尝试在这里： http: [//pastebin.com/Y9X0UwUB](http://pastebin.com/Y9X0UwUB)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:48:44.030

听起来您希望这些方法成为`static`，然后还维护活动对象数量的私有静态计数，该计数在构造函数和析构函数中递增/递减并检查。

显然，如果这是一个多线程应用程序，您将需要某种形式的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:49:38.930

您可以创建一个新类，在构造时调用 init 函数，在销毁时调用 quit 函数，然后让类的所有实例在构造时接收到该类实例的 shared_ptr。

```
class foo_init_quit {
    public:
      foo_init_quit(){init();}
      ~foo_init_quit(){quit();}
};

std::vector<foo> do_something() {
    auto init_quit = make_shared<foo_init_quit>();
    std::vector<foo> vec;
    vec.emplace_back(init_quit);
    //...
    return vec;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:01:26.780

```
struct Funkay
{
    Funkay() : { ++count; init(); }
    ~Funkay() { --count; quit(); }

private:
    static size_t count;
    void init() { if (count == 1) ???; }
    void quit() { if (count == 0) ???; }
};
size_t Funkay::count = 0; 
```

# d3.js - .selectAll() 究竟是做什么的？

> ID：15259667
> 
> 赞同：5
> 
> 时间：2013-03-06T22:46:29.400
> 
> 标签：d3.js, html-table

我一直在玩[“使用 D3.js 将 XML 呈现为 HTML 表”](https://gist.github.com/ashleybot/1873934)示例，以尝试学习**D3.js** API。我想我已经掌握了它，但我无法真正理解它的`.selectAll()`作用，而且它[的文档](https://github.com/mbostock/d3/wiki/Selections#wiki-selectAll)也不是很有帮助。

如果您查看示例，第 17 行：`var td = tr.selectAll("td")`。我也可以这样写`tr.selectAll("tr")`，它会返回完全相同的表格/页面。事实上我可以写`tr.selectAll("SomethingCompletelyRandom")`，它仍然可以工作，但我不能删除`.selectAll()`.

这里发生了什么？做什么`.selectAll()`？它如何依赖于选择器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:04:56.237

您指向的 API 链接在先前的选择中使用 selectAll（它是一个子选择），因此您查看可能没有意义（并且可能会令人困惑。）要查看的文档的相关部分是[这里](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll)，更一般地说，该选择文档页面的介绍，[这里](https://github.com/mbostock/d3/wiki/Selections)。

`td`在这两种情况下同时使用and的原因`tr`是初始选择在这两种情况下都不会返回任何内容（因为您从中选择的地方，`tr`，还没有附加任何内容。）选择您将要创建的内容是标准做法，因为将其扩展到动画并更新它变得非常重要。

我建议您查看[三个小圆圈](http://mbostock.github.com/d3/tutorial/circle.html)和[使用连接进行思考的](http://bost.ocks.org/mike/join/)教程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:03:35.957

它选择`<td>`作为父节点的子节点的所有`<tr>`节点。D3将此作为数组对象`selectAll()`返回，即将返回一个包含节点数组`<td>`作为对象的数组，您可以在每个对象上调用其他d3函数。此外，了解幕后情况的一个好方法是使用 Chrome 开发人员工具并在控制台中执行一些代码。

例如，假设您有这张表：

```
<table>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

如果你`d3.selectAll("td")`在控制台中运行，你得到的结果将是：

```
[Array[3]]  // A two dimensional array that contains 3 of the "td" nodes, each of of which is an object.
  >0: td       // A D3 selection object.
  >1: td
  >2: td
   length: 3
   parentNode: document
   __proto__: Array[0] 
```

# python - Pyro4 有时会在超过 4 个并发连接后抛出“由对等方重置连接”（Erno 104）

> ID：15259668
> 
> 赞同：1
> 
> 时间：2013-03-06T22:46:43.067
> 
> 标签：python, connection, pyro

我已经搜索和搜索，但找不到答案。我正在尝试在两个 unix 设备之间打开一个 Pyro 连接。我可以使用具有相同 URI 字符串的 Pyro4 代理连接到设备 4 次。在第五个连接上，实例挂起我的获取数据函数调用。它通过 core.py pyro 包并最终等待获取数据。偶尔，在第四个之后创建的这些打开的连接之一会抛出一个 ConnectionClosedError 异常，如下所示：

```
 ConnectionClosedError("receiving: connection lost: "+str(x))
 ConnectionClosedError: receiving: connection lost: [Errno 104] Connection reset by peer 
```

如果我不清楚，以下是导致此问题的原因： - 在与设备的不同 SSH 会话上打开 4 个连接，并运行设置 pyro 代理的重复测试。（这些工作正常且完整，没有错误）-打开更多连接，所有连接都挂在我的电话上以获取数据。它们挂起至少 5 分钟，有些会不经常引发上述异常。-并非所有人都会这样做。一旦 4 个正在运行的测试中的 1 个完成，挂起的第 5 个测试将启动并正常完成。其他人将跟随，但一次不会超过 4 个。

最后，以下代码（在 socketutil.py 中）是实际发生异常的地方：

```
def receiveData(sock, size):
    """Retrieve a given number of bytes from a socket.
    It is expected the socket is able to supply that number of bytes.
    If it isn't, an exception is raised (you will not get a zero length result
    or a result that is smaller than what you asked for). The partial data that
    has been received however is stored in the 'partialData' attribute of
    the exception object."""
    try:
        retrydelay=0.0
        msglen=0
        chunks=[]
        if hasattr(socket, "MSG_WAITALL"):
            # waitall is very convenient and if a socket error occurs,
            # we can assume the receive has failed. No need for a loop,
            # unless it is a retryable error.
            # Some systems have an erratic MSG_WAITALL and sometimes still return
            # less bytes than asked. In that case, we drop down into the normal
            # receive loop to finish the task.
           while True:
            try:
                data=sock.recv(size, socket.MSG_WAITALL)
                if len(data)==size:
                    return data
                # less data than asked, drop down into normal receive loop to finish
                msglen=len(data)
                chunks=[data]
                break
            except socket.timeout:
                raise TimeoutError("receiving: timeout")
            except socket.error:
                x=sys.exc_info()[1]
                err=getattr(x, "errno", x.args[0])
                if err not in ERRNO_RETRIES:
                    ################HERE:###############
                    raise ConnectionClosedError("receiving: connection lost: "+str(x))
                time.sleep(0.00001+retrydelay)  # a slight delay to wait before retrying
                retrydelay=__nextRetrydelay(retrydelay) 
```

真的很感激这里的一些方向。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:32:14.437

原来这是服务器在启动时创建的最小线程数。出于某种原因，它不会在应该添加的时候再添加。

# javascript - 访问继承的修改对象的原始属性

> ID：15259670
> 
> 赞同：0
> 
> 时间：2013-03-06T22:46:46.363
> 
> 标签：javascript, inheritance

在“Javascript The Definitive Guide”中阅读继承我读过

> 如果 [an object] 先前继承了属性 x，则该继承的属性现在被新创建的具有相同名称的自己的属性隐藏。

我创建了一个示例以更好地理解它

```
var o = {x:1};
var p = Object.create(o);
p.x = 5;
console.log(p.x); //5
console.log(p); //Object {x: 5, x: 1} 
```

在这种情况下，是否可以出于任何原因访问`x`具有 value的属性`1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:49:23.563

你可以做：

```
delete p.x; 
```

您也许还可以这样做：

```
p.constructor.prototype.x; 
```

但这并不是特别健壮，因为构造函数属性是可写的，并且如果对象是使用 Object.create 构造的，则它的构造函数是 Object 函数，并且它的原型不是`p`原型。即使它引用了一个对象，它的原型属性也可能不是你寻找的对象。

你也可以这样做：

```
p.__proto__.x; 
```

但这是非标准的，并非所有浏览器都支持，而且未来`__proto__`似乎不确定。

所以也许最好做类似的事情：

```
if (p.hasOwnProperty('x')) {
  var x = p.x;
  delete p.x;
  var x2 = p.x;
  p.x = x;
} 
```

但请注意，如果这很重要，这可能会影响从 for..in 循环返回属性的顺序（不应该如此，因为顺序不能保证并且浏览器之间的顺序也不一致，但这更有可能不同）。像素

# c++ - 服务器日期时间与客户端日期时间

> ID：15259671
> 
> 赞同：0
> 
> 时间：2013-03-06T22:46:50.690
> 
> 标签：c++, sql, networking, mfc

我很可能错过了一些简单的解决方案，但是我有一个可执行文件（用 c++ 编写），我在其中使用和/或将当前日期时间保存到 SQLite 或 Sybase 数据库中（两个可执行数据库都在服务器上）我的问题有的是我希望它使用来自服务器计算机（数据库所在的位置）的日期时间，而不是使用客户端上的日期时间。有没有办法让数据库从它所在的计算机或其他方式获取服务器时间？这可能吗，还是我确保客户端与服务器在同一时间？

现在我只是使用一个简单的 sql 查询：

```
Select dateTime('now'); //for SQLite
Select Now(*); //for Sybase 
```

编辑： Sybase 确实已经正确地为您提供了服务器时间，所以我只是在寻找 SQLite 解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:07:23.320

唯一真正的解决方案是使用 ntp 或 sntp 保持所有机器的时间同步。比任何其他解决方案都更容易和更准确，并且所有现代操作系统都具有与时间服务器同步的标准规定。

您可以选择在某些外部服务器上同步，在您所在位置的服务器上安装一个，和/或购买一个专用设备作为您的网络的 ntp 服务器。这完全取决于您是希望时间绝对正确（这将需要咨询一些外部时间信号）还是仅在您的机器之间正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:17:13.367

如果您想使用服务器时间，那么最简单的方法是从服务器获取它，或者通过执行您现在正在做的事情，或者通过向您的应用程序添加另一层，例如驻留在服务器上并发送本地机器时间到数据库。这种方法的好处是，如果你改变你的业务需求，允许其他时区的机器使用你的应用，那么本地时间不受影响。

除此之外，您必须确保机器同步，这并不总是安全的，例如，如果您使用外部时间信号并且它变得不可用。

# javascript - 防止 IFrame 导航

> ID：15259673
> 
> 赞同：2
> 
> 时间：2013-03-06T22:46:53.967
> 
> 标签：javascript, html, iframe

`iframe`我通过 JS 将 HTML 字符串写入其内容文档，使用 an来显示 HTML 电子邮件内容。`iframe`如果用户单击显示的电子邮件中的链接，我不希望用户在其中导航。现在我有这些选择：

1.  在新的浏览器窗口或选项卡中打开链接（**首选**）
2.  阻止所有导航（次优，仅当没有其他选项时）
3.  更好的选择我不知道？

我怎样才能完成这两个选项中的任何一个？

我知道这`HTML5`引入了一个`sandbox`属性，但不幸的是，它只适用于`Chrome`and `Safari`，所以这不是一个选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-24T00:59:59.823

如果 iframe 来自不同的来源，则此方法将通过重置 iframe 源（如果它发生更改）来阻止导航：

```
 var $iframe = $('iframe');
  var iframeUrl = 'http://example.com/foo';
  var iframeLoaded = false;
  $iframe.on('load', function () {
    if (!iframeLoaded) {  # Allow initial load of iframe.
      iframeLoaded = true;
      return;
    }

    # Reset iframe location back to original source to prevent navigation.
    iframeLoaded = false;
    $iframe[0].src = iframeUrl;
  }); 
```

不幸的是，无法检测 iframe 加载的*开始*，因此它会在返回之前短暂闪烁新内容。另外，请注意，这会破坏浏览器的后退按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:57:44.410

您可以遍历 iframe 中的所有链接并添加`target="_blank"`到它们。

（对不起，但我只知道如何在 JQuery 中执行此操作，因此很抱歉在此链接示例而没有在问题中标记它）：

```
$("#iframeID").contents().find("a").each(function() {
    $(this).attr("target", "_blank");
}); 
```

示例： http: [//jsfiddle.net/yP7Nd/](http://jsfiddle.net/yP7Nd/) - （忽略我的 JQuery 代码上方的 JS 位，我必须这样做才能正确加载一些 IFrame 内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-07T04:55:20.390

对于托管 iframe 的页面，定义一个[CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)，将其限制[`child-src`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/child-src)为特定来源，例如域。仅供参考，这不适用于 Internet Explorer。这是一个相关的[答案](https://security.stackexchange.com/a/153404/214065)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:58:22.493

您应该能够用显示的文本替换所有链接，例如：

```
var links = document.links;
var i = links.length;
var link, text, node;

while (i--) {
  link = links[i];
  text = link.textContent || link.innerText || '';
  node = document.createTextNode(text);
  link.parentNode.replaceChild(node, link);
} 
```

请注意，[链接集合](http://www.w3.org/html/wg/drafts/html/master/single-page.html#dom-document-links)是实时的，因此是反向循环。

# java - 弃用方法但保留功能

> ID：15259677
> 
> 赞同：2
> 
> 时间：2013-03-06T22:47:04.877
> 
> 标签：java, deprecated

假设我有一个带有抽象类的库，该类具有抽象方法：

```
public abstract class MyAbstractClass{

    public void myMethod(){
        int a = doSomething("hi");
    }

    public abstract void doSomething(String param);
} 
```

现在我决定为方法添加一个参数，但我想保留旧方法的功能以保持旧代码可用：

```
public void myMethod(){
    int a = ?
}

/**
 * @deprecated use doSomething(String, String) instead.
 */
@Deprecated
public int doSomething(String param){ return doSomething(param, null); }

public abstract int doSomething(String param, String secondParam); 
```

`myMethod`在这种情况下我将如何实现我的？

* * *

Android 支持库中的[`PagerAdapter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/support/v4/view/PagerAdapter.java#PagerAdapter.startUpdate%28android.view.View%29)类实际上有类似这样的结构，但反过来：

```
public Object instantiateItem(ViewGroup container, int position) {
    return instantiateItem((View) container, position);
}

/**
 * @deprecated Use {@link #instantiateItem(ViewGroup, int)}
 */
public Object instantiateItem(View container, int position) {
    throw new UnsupportedOperationException(
            "Required method instantiateItem was not overridden");
} 
```

应该劝阻这种行为吗？如果我要使用这种结构，我怎么知道要调用什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:19:11.103

我想我看到了你的困境。您在库中有一个抽象类，人们正在对其进行子类化并实现它的抽象方法，并且您希望弃用此方法并添加一个新的抽象方法，而应该实现向前推进。

这是我要做的：

# 前

从`Feature`您图书馆的用户子类化的类开始

```
public abstract class Feature {
    public abstract void doSomething(String param);
} 
```

# 后

保持`Feature`类几乎不变，但是弃用该方法并在您的文档中宣传人们现在应该子类`NewFeature`化而不是`Feature`在该类中实现闪亮的新抽象方法。子类`Feature`应该仍然有效的现有代码。

```
public abstract class Feature {
    /**
      @deprecated Extend NewFeature instead and implement doSomething(a, b) 
    */
    @Deprecated
    public abstract void doSomething(String param);
}

public abstract class NewFeature extends Feature {

    @Deprecated
    @Override
    public void doSomething(String param) {
        doSomething(param, null);
    }

    public abstract void doSomething(String param, String paramTwo);
} 
```

# 未来更远

一旦足够的时间过去了，您就可以删除`Feature`该类。例如，我认为 spring 倾向于在它们第一次被宣传为已弃用之后删除整个版本的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:20:44.620

根据评论，这就是我要做的事情：

```
public void myMethod(){
    int a = doSomething("hi", "theOptimalSecondArgumentValue");
}

/**
 * @deprecated use doSomething(String, String) instead.
 */
@Deprecated
public abstract int doSomething(String param);

/**
 * Delegates to {@link #doSomething(String)} and thus ignores the second argument 
 * by default. Subclasses should override this method to return a better result,
 * taking the second argument into account
 */
public int doSomething(String param, String secondParam) {
    return doSomething(param);
} 
```

现有的子类仍然可以工作，但会处于“降级”模式，其中第二个参数总是被忽略。

新的子类将简单地通过以下方式实现：

```
@Override
public int doSomething(String param) {
    doSomething(param, "theOptimalDefaultValue");
}

@Override
public int doSomething(String param, String secondParam) {
    // compute the result using the two arguments
} 
```

# javascript - 如何检测 jquery fullcalendar 是否需要从服务器获取事件？

> ID：15259682
> 
> 赞同：0
> 
> 时间：2013-03-06T22:47:30.727
> 
> 标签：javascript, jquery, fullcalendar

我正在加载 30 天的事件。在每周视图中，我看到它在每周视图中工作了 3/4 周。

然后，当我单击下一步按钮时，我看不到任何事件。

有没有办法/选项来检测插件是否需要获取新事件，无论我前进还是后退？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:38:16.720

You should define this function [http://arshaw.com/fullcalendar/docs/event_data/events_function/](http://arshaw.com/fullcalendar/docs/event_data/events_function/) and check and load events from server by ajax like in example.

# php - SQLSTATE[28000] [1045]：服务器提供程序崩溃后出现奇怪的 PDO 错误

> ID：15259685
> 
> 赞同：3
> 
> 时间：2013-03-06T22:47:39.270
> 
> 标签：php, pdo

在服务器崩溃后，我们的数据库出现了一个奇怪的错误......

密码和用户是正确的，我们使用一个简单的 PDO 连接：

```
session_start();
ini_set('display_errors', 1);
ini_set('log_errors', 1);
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=databaseName', 'correctUSER','correctPassword');
    die('ok');
}
catch(Exception $e)`enter code here`
{
    die('Erreur : '.$e->getMessage());
} 
```

但是我们有一个：“错误：SQLSTATE [28000] [1045] 用户'correctUSER'@'localhost'的访问被拒绝（使用密码：YES）”？？

我们尝试删除，重新创建数据库和用户，但我们总是遇到问题，奇怪的是，如果我们尝试使用 root 用户 => 它可以工作，但使用 root 密码并不安全......

有人有解决办法吗？？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T11:07:42.040

这是mysql的错误，我必须做一个

修复表 mysql.user

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T05:41:19.777

这个错误实际上没有什么奇怪的。答案非常简单明了。

> 密码和用户是正确的

正如您从下面的错误消息中看到的那样，您的这种说法根本不正确。
因此，要解决该问题，您必须提供正确的用户名和密码。

也只是一个旁注：从你的代码中删除那些 try-catch-die 的东西。它完全没用，多余且不安全。

# django - django 未安装在 virtualenv 中，--no-site-packages 标志未纠正问题

> ID：15259688
> 
> 赞同：0
> 
> 时间：2013-03-06T22:48:01.007
> 
> 标签：django, virtualenv

我遇到的问题类似于[pip / virtualenv / django 安装问题](https://stackoverflow.com/questions/7976089/pip-virtualenv-django-installation-issue)，但该答案中发布的解决方案对我不起作用。

我使用 --no-site-packages 创建了一个虚拟环境：

```
virtualenv venv --distribute --no-site-packages 
```

但是当我激活环境并尝试安装 django (sudo pip install django) 时，我收到以下消息：

```
teddy@coolermaster:~/heroku/battle/hellodjango$ source venv/bin/activate
(venv)teddy@coolermaster:~/heroku/battle/hellodjango$ sudo pip install Django  
Requirement already satisfied (use --upgrade to upgrade): Django in   /usr/local/lib/python2.7/dist-packages 
Cleaning up... 
```

请注意，在上面的消息中，pip 在我的本地“dist-packages”文件夹中找到了 django 安装，而不是我的“site-packages”

如果我尝试在 python 解释器中导入 django，我会收到错误：“没有名为 django 的模块。”

我应该使用命令“pip install django”而不是“sudo pip install django”吗？当我尝试运行“pip install django”时，我看到“OSError: [Errno 13] Permission denied: '/home/teddy/heroku/battle/hellodjango/venv/build'”

问题可能与权限有关（因为我使用的是 sudo）吗？如果是这样，为什么它不允许我在没有 sudo 的情况下进行 pip 安装？或者问题可能是我的 virtualenv 忽略了站点包但仍在使用我的 dist 包中的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:49:15.543

使用 sudo 后清理：

```
sudo rm -rf /home/teddy/heroku/battle/hellodjango/venv/build 
```

不要再使用 sudo 了。

# android - 如何在 FragmentActivity 中禁用窗口的标题？

> ID：15259694
> 
> 赞同：6
> 
> 时间：2013-03-06T22:48:30.533
> 
> 标签：android, android-fragmentactivity, android-titlebar

在我扩展 FragmentActivity 类的活动中，我无法使用`this.requestWindowFeature(Window.FEATURE_NO_TITLE);`. 它给出了 ANR。

如何禁用 FragmentActivity 的标题？

这是活动开始的部分代码：

```
public class NewOrderActivity extends FragmentActivity implements TabListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        ...
    }
} 
```

**编辑： 答案：**

好的，我发现在一个声明了 ActionBar 的活动中，标题是 Action Bar 的一部分，而不是窗口本身。

所以在我的代码中，我这样做是为了摆脱窗口的（或者更好地说，ActionBar 的）标题：

```
...
...
final ActionBar actionBar = getActionBar();
actionBar.setDisplayOptions(Window.FEATURE_NO_TITLE);
...
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T13:17:57.827

你应该使用： - `getSupportActionBar().setDisplayShowTitleEnabled(false);`

getSupportActionBar().setDisplayShowHomeEnabled(false);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:55:21.440

尝试将`*.NoActionBar`主题应用到您的活动中`AndroidManifest.xml`

```
<activity 
    android:name=".NewOrderActivity"
    android:theme="@android:style/Theme.Holo.NoActionBar">
    <!-- ... -->
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T02:22:15.573

这个技巧解决了你的问题:)

```
ActionBar bar = getActionBar();    
bar.hide(); 
```

或者

```
 ActionBar bar = getActionBar();
    bar.setDisplayShowHomeEnabled(false);
    bar.setDisplayShowTitleEnabled(false); 
```

# excel - 合并两个具有相同数据或列中不同数据的excel行

> ID：15259705
> 
> 赞同：0
> 
> 时间：2013-03-06T22:49:14.223
> 
> 标签：excel, ms-access, merge

我在excel中有以下问题。我有一个电子表格，其中包含按访问 ID 排序的数据，并希望合并具有相同访问 ID 的行。问题是这样的：

12345 值（column1） 值（column2） 值（column3）

12345 无值（第 1 列） 有值（第 2 列） 无值（第 3 列）

这些行具有具有相同值的共同列，或者它们具有其中一行包含信息而另一行具有空白的列。

如何合并 12345 个 ID 以填充所有列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:18:56.873

我想你还有另一个问题，你可能知道也可能不知道。您不仅有缺失值，还有不匹配的值。Sheet1 在 C2 中的值 12346 与 Sheet2 12346 C2 不同。解决这个问题的唯一方法是人工决策，您的目标是尽可能地自动化，然后着手处理您必须手动完成的工作。

表 1

```
ID  |C1 |C2 |C3
12345   |The    |   |Jumped
12346   |   |Quick  |
12347   |   |   |Brown
12348   |Fox    |   | 
```

表 2

```
ID  |C1 C2  C3
12345   |   |   |Jumped
12346   |The    |   |
12347   |   |Quick  |Brown
12354   |Fox    |   | 
```

要保留原始数据，请将 sheet3 作为组合数据集的位置

*   将两个工作表中的 ID 列复制到 Sheet3
*   使用 remove duplicates 为每个 ID 留下一个，并对它们进行排序

表 3

```
ID
12345
12346
12347
12348
12354 
```

*   使用 Vlookup 转移表 1 和表 2 中的值

    =VLOOKUP(A2,Sheet1!A:D,2,FALSE)

表 3

```
ID  |S1C1   |S1C2   |S1C3   |S2C1   |S2C2   |S3C3
12345   |The    |0  |Jumped |0  |0  |Jumped
12346   |0  |Quick  |0  |The    |0  |0
12347   |0  |0  |Brown  |0  |Quick  |Brown
12348   |Fox    |0  |0  #N/A    #N/A    #N/A
12354   #N/A    #N/A    #N/A    |Fox    |0  |0 
```

复制并粘贴所有 sheet3 以将公式转换为值（非常重要）

现在创建新的连接列并使用公式来识别和移动匹配的值。

这个公式的修改可以让你把剩下的工作拼凑起来。

```
=IF(B2=E2,B2,"no match") 
```

![截屏](../Images/6ea3bc440fc5a831dc16dd9d112a79e6.png)

# regex - 正则表达式匹配 (，但不匹配 \(

> ID：15259712
> 
> 赞同：0
> 
> 时间：2013-03-06T22:49:40.017
> 
> 标签：regex

我正在尝试创建一个正则表达式来匹配字符串中的每个 ( 和 )，但排除 \( 和 \)。这样我就可以替换每个括号，但保留前面带有斜线的括号。

示例字符串： (,)(5)(5)( )(\()(9)(1)(87x)(100 )(ASP\)( )(5)

编辑：替换后的期望结果：,55 \(9187x100 ASP\) 5 然后我可以删除 \ 并获得我想要的字符串,55 (9187x100 ASP) 5

编辑：我正在使用 VB.NET

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:51:23.590

这将匹配括号前面没有斜杠（以及前面的字符）：

```
[^\\]\( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:51:33.030

好吧，您必须考虑上下文。所以首先你想要没有 a`\`然后你想要 a`(`或 a `)`。

```
[^\\]\(
[^\\]\) 
```

但是你可以把两个括号放在一个字符类中

```
[^\\][\)\(] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:18:06.707

使用look-behind，您只能匹配没有立即以“\”开头的“（”或“）”：

```
/(?<!\\)[\(\)]/ 
```

# c - pthread_create 中的多个参数

> ID：15259714
> 
> 赞同：3
> 
> 时间：2013-03-06T22:49:48.740
> 
> 标签：c, linux, pthreads

根据 pthread_create 手册页，该函数的参数是：

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                      void *(*start_routine) (void *), void *arg); 
```

关于 void `*arg`，我只是想知道是否可以向它传递多个参数，因为我编写的函数需要 2 个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:51:58.363

与您一起`void*`，您可以传递您选择的结构：

```
struct my_args {
  int arg1;
  double arg2;
}; 
```

这有效地允许您传入任意参数。您的线程启动例程除了解包那些调用真正的线程启动例程（它本身可能来自该结构）之外什么也不能做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:53:16.240

创建一个结构并重写您的函数以仅采用 1 个参数并在结构内传递两个参数。

代替

```
thread_start(int a, int b) { 
```

采用

```
typedef struct ts_args {
   int a;
   int b;
} ts_args;

thread_start(ts_args *args) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:53:32.200

使用结构和`malloc`. 例如

```
struct 
{
   int x;
   int y;
   char str[10];
} args;

args_for_thread = malloc(sizeof(args));

args_for_thread->x = 5;

... etc 
```

然后`args_for_thread`用作（使用从 void* 到 args* 的强制转换）的参数`args`。`pthread_create`由该线程来释放内存。

# java - spring 处理 POST 数据 - 注释正确的控制器

> ID：15259718
> 
> 赞同：0
> 
> 时间：2013-03-06T22:49:58.433
> 
> 标签：java, forms, spring, request

我在配置 spring MVC 以在正确的控制器中处理表单 POST 数据时遇到问题。我有一个`add`要向数据库添加新记录的操作。

提交表单后，我收到 404 错误（`http://localhost:8084/lyricsBase/song/submit.html`），所以我想我在路由表单提交时出错了。

这是我的控制器代码：

```
public class SongController extends MultiActionController {

    [...]
    @RequestMapping(value = "/song/submit.html", method = RequestMethod.POST)
    public ModelAndView submit(@RequestParam("song") Song song) throws Exception {
        HashMap model = new HashMap();
        model.put("song", song);
        // or do something better here...
        return new ModelAndView("t.edit", model);
    } 
```

这是视图表单标签：

```
<form:form method="POST" commandName="song" action="submit.html"> 
```

我的应用程序代码可在[github](https://github.com/tkoomzaaskz/lyricsBase/tree/5a00efb733a87a9b3c8fa7dda084176ff7cb33b5)上找到。以下是重要文件：[表单视图](https://github.com/tkoomzaaskz/lyricsBase/blob/5a00efb733a87a9b3c8fa7dda084176ff7cb33b5/src/main/webapp/WEB-INF/jsp/edit.jsp)、[控制器](https://github.com/tkoomzaaskz/lyricsBase/blob/5a00efb733a87a9b3c8fa7dda084176ff7cb33b5/src/main/java/com/blogspot/symfonyworld/lyricsbase/controller/SongController.java)（该类是一个多控制器，因为我不想为每个操作创建单独的文件）和[servlet 配置](https://github.com/tkoomzaaskz/lyricsBase/blob/5a00efb733a87a9b3c8fa7dda084176ff7cb33b5/src/main/webapp/WEB-INF/lyricsBaseApp-servlet.xml)。

不知道这是否重要，但我正在为视图层使用图块（并且在[tiles.xml](https://github.com/tkoomzaaskz/lyricsBase/blob/5a00efb733a87a9b3c8fa7dda084176ff7cb33b5/src/main/resources/tiles.xml)中使用了逻辑视图名称）。

此外，我并不完全了解 spring 路由是如何工作的。到目前为止，我在 servlet xml 中定义了一个映射，但不知道这是否是一个好方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:17:07.387

歌曲的发布价值是多少？我不确定 Spring 是否将发布的数据转录或反序列化为对象/实体。你可以尝试改变；

```
@RequestMapping(value = "/song/submit.html", method = RequestMethod.POST)
public ModelAndView submit(@RequestParam("song") Song song) throws Exception { 
```

进入

```
@RequestMapping(value = "/song/submit.html", method = RequestMethod.POST)
public ModelAndView submit(@RequestParam("song") String song) throws Exception { 
```

看看有没有收到。

另一种方式，是从请求对象中读取参数；

```
@RequestMapping(value = "/song/submit.html", method = RequestMethod.POST)
public ModelAndView submit(HttpServletRequest request) throws Exception {

Object song = request.getParameter("song"); 
```

格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:03:18.603

如果您的应用程序 URL 是：

```
http://localhost:8084/lyricsBase/song/submit.html 
```

请求映射应该像（删除映射中的第一个'/'）：

```
@RequestMapping(value = "song/submit.html", method = RequestMethod.POST)
public ModelAndView submit(@ModelAttribute("song") Song song) throws Exception {
} 
```

jsp中的form标签应该是：

```
<form:form method="POST" commandName="song" action="song/submit.html"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:49:07.463

试试这个，`@RequestParam("song")`改成`@RequestBody`

# visual-studio - 如何使 Microsoft C++ 编译器将未知标志视为错误而不是警告？

> ID：15259720
> 
> 赞同：3
> 
> 时间：2013-03-06T22:50:00.883
> 
> 标签：visual-studio, visual-c++, build, build-process

出于各种原因，我希望能够编写脚本来检测 MS C++ 编译器是否支持特定标志。我正在使用来自 Windows 7.1 SDK 的编译器：

```
C:\> cl /version
Microsoft (R) C/C++ Optimizing Compiler Version 16.00.30319.01 for x64
Copyright (C) Microsoft Corporation.  All rights reserved. 
```

所以假设我想知道`/GLEFGB`这个编译器是否支持这个标志（它不支持，因为它不存在）：

```
C:\>cl /c ./foo.cc /GLEFBG
Microsoft (R) C/C++ Optimizing Compiler Version 16.00.30319.01 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line warning D9002 : ignoring unknown option '/GEFBG'
foo.cc 
```

好的，好的开始，但它是一个警告，它不会将退出状态设置为无效：

```
C:\>echo %errorLevel%
0 
```

因此，如果我们将警告作为错误打开，我们应该完成`/WX`，对吗？

```
C:\>cl /c ./foo.cc /WX /GLEFBG

Microsoft (R) C/C++ Optimizing Compiler Version 16.00.30319.01 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line warning D9002 : ignoring unknown option '/GEFBG'
foo.cc 
```

错误的。这越来越令人失望。也许D9002`/WX`由于某种原因没有被捕获？`/we`也许我们可以通过使用该代码明确地使其成为错误？小心猜测这是否可行？

```
C:\>cl /c ./foo.cc /WX /weD9002 /GLEFBG
Microsoft (R) C/C++ Optimizing Compiler Version 16.00.30319.01 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line error D8021 : invalid numeric argument '/weD9002' 
```

不，现在我们出错了，因为这个编译器警告的标签显然不是`/we`. 我也试过`/we9002`了，也不行。

所以，现在我没有想法了。如果传递了无效标志，关于如何说服`cl`以非零退出状态出错的任何想法？如果没有这种行为，真的很难询问编译器是否支持标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-05T12:31:33.307

我遇到了同样的问题。虽然`cl`没有报告它们，但您也许可以检查`cl`.

我最终编写了一个执行另一个程序的python脚本，如果该程序返回错误或程序向`stderr`脚本写入任何内容报告失败（即退出代码1）：

```
#!/usr/bin/python3
import subprocess
import sys

proc = subprocess.Popen(sys.argv[1:], stderr=subprocess.PIPE)

got_error = False

for l in proc.stderr:
    try:
        print(str(l, errors="replace"), end="")
    except TypeError:
        print(str(l), end="")
    got_error = True

proc.wait()

if got_error or proc.poll() != 0:
    sys.exit(1) 
```

我已经在 cygwin 下试过了，但它也应该在 dos 提示下工作（也许你必须用 python 解释器专门调用它）：

```
python3 chkerr cl /c ./foo.cc /GLEFBG 
```

`chkerr`我给脚本起的名字在哪里。

# html - CSS3旋转过渡导致间歇性鼠标点击检测

> ID：15259726
> 
> 赞同：8
> 
> 时间：2013-03-06T22:50:44.310
> 
> 标签：html, css, onclick, css-transitions, css-transforms

这是一个与 CSS3 Rotate on animated element 非常相似的问题，[导致点击事件不调用](https://stackoverflow.com/questions/13833227/css3-rotate-on-animated-element-causing-click-event-not-to-invoke?answertab=active#tab-top)

虽然我的问题有点不同，但不能评论它以添加支持信息。

查看我的沙箱：http: [//jsfiddle.net/5bsG3/2/](http://jsfiddle.net/5bsG3/2/)

在鼠标悬停时，我在围绕 Y 轴旋转的链接中有一个跨度。并不总是检测到单击事件（用于 jQuery 或仅用于链接导航）。尝试单击链接的填充区域（就在文本之外，但在链接上）。几乎就好像命中检测存在问题，因为跨度在旋转，因此在鼠标没有点击跨度的角度。即使鼠标仍然点击 LINK 的填充区域。70-110度左右的角度似乎是问题所在。

上述帖子中提出的解决方案实际上并未解决此问题。此外，我的问题可能有点不同，因为我的旋转是作为 CSS 转换而不是 JS 间隔触发器处理的。

有什么想法吗？有没有人见过这个？我知道这是一种俗气的链接方式，但对于目标网站来说，这是可以接受的数量的奶酪。

随意简化 jsfiddle，我从简单开始并添加了一些调试信息来帮助识别问题。

html:

```
<ul>
  <li><a href="" class="flip-link"><span>Click this link</span></a></li>
  <li id="LinkCounter">LinkClicked</li>
  <li>&nbsp</li>
  <li id="SpanCounter">SpanClicked</li>
<ul> 
```

CSS：

```
ul li
{
    display: inline;
    float: left ;
}

.flip-link
{
    float:left ;
}

span
{
    float:left ;
}

.flip-link {
    display: block;
    overflow: hidden;

    height: 20px;
    padding: 5px 50px 7px 50px ;
    margin-right: 10px ;

    background: #AAA;

    -webkit-perspective: 50px;
       -moz-perspective: 50px;
        -ms-perspective: 50px;
            perspective: 50px;

    -webkit-perspective-origin: 50% 50%;
       -moz-perspective-origin: 50% 50%;
        -ms-perspective-origin: 50% 50%;
            perspective-origin: 50% 50%;
}

.flip-link span {
    display: block;
    position: relative;

    background: #EEE;

    padding: 0px 10px ;

    -webkit-transition: all 1000ms ease;
       -moz-transition: all 1000ms ease;
        -ms-transition: all 1000ms ease;
            transition: all 1000ms ease;

    -webkit-transform-origin: 50% 0%;
       -moz-transform-origin: 50% 0%;
        -ms-transform-origin: 50% 0%;
            transform-origin: 50% 0%;

    -webkit-transform-style: preserve-3d;
       -moz-transform-style: preserve-3d;
        -ms-transform-style: preserve-3d;
            transform-style: preserve-3d;

}
    .flip-link:hover span
    {
        -webkit-transform: translate3d( 0px, 0px, 0px ) rotateY( 360deg );
           -moz-transform: translate3d( 0px, 0px, 0px ) rotateY( 360deg );
            -ms-transform: translate3d( 0px, 0px, 0px ) rotateY( 360deg );
                transform: translate3d( 0px, 0px, 0px ) rotateY( 360deg );

        color: #55FF55 ;
    } 
```

JS：

```
var linkClickCount = 0 ;
var spanClickCount = 0 ;

$(document).ready(function () {
    $('.flip-link').click(function () {
            linkClickCount++ ;            
            $("#LinkCounter").text(linkClickCount);

            return (false);
    });

    $('.flip-link span').click(function () {
            spanClickCount++ ;            
            $("#SpanCounter").text(spanClickCount);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:07:59.433

问题。由于使用 CSS 存在浏览器差异，甚至浏览器之间存在差异，因此使用纯 CSS 解决方案会有问题。您还必须意识到 CSS 实际上会在您的 div 处于动画中间时折叠它们。我们的愿景实际上并没有发生什么，它实际上将 div 大小折叠为 0，这意味着当您单击时，您将无法“实际单击它。下面显示您应该将绝对定位的 div 作为叠加层并处理单击即使是从一个清晰的、不可见的 div 中仍然会产生您实际单击链接的错觉。

```
<a id="link"></a>

 $("#link").click(function(){

spanClickCount++;
$("#SpanCounter").text(spanClickCount);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T08:32:36.337

旋转以显示其背面的元素不会在背面收到点击，除非您特别强制背面可见。

在您的跨度上使用它：

```
-webkit-backface-visibility: visible;
   -moz-backface-visibility: visible;
    -ms-backface-visibility: visible;
     -o-backface-visibility: visible; 
```

见：http: [//jsfiddle.net/5bsG3/8/](http://jsfiddle.net/5bsG3/8/)

# python - 腌制对象能否可靠地编码为 Postgres 字符串（与 NOTIFY 一起发送）？

> ID：15259728
> 
> 赞同：1
> 
> 时间：2013-03-06T22:50:52.733
> 
> 标签：python, postgresql, pickle, psycopg2

[Postgres NOTIFY](http://www.postgresql.org/docs/9.0/static/sql-notify.html)仅支持字符串文字（无二进制数据）。我设法通过以下方式将它与腌制对象一起使用：

```
message = cPickle.dumps(objectFoo)
cursor = connection.cursor() # this is psycopg2 connection
cursor.execute("NOTIFY channelFoo, %s", [message]) 
```

但是，如果我在编码对象中放入了一些棘手的字节（例如 '\x80' 字符串）。从以下位置返回错误`execute()`：

> psycopg2.DataError：用于编码“UTF8”的无效字节序列：0x80

有没有解决的办法？一种允许可靠地将腌制对象序列化为 Postgres 字符串的方法，无论对象包含什么数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:00:12.280

Python 泡菜是字节的二进制序列。如果您需要将泡菜放入字符串中，请对其进行编码。典型的技术包括使用 base64 或 uuencode。然后在接收端对其进行解码。

# android - 如何创建与操作栏重叠的视图？

> ID：15259729
> 
> 赞同：0
> 
> 时间：2013-03-06T22:50:57.563
> 
> 标签：android

我创建了一个全屏菜单。当菜单打开时，我希望它占据整个屏幕，包括操作栏所占据的空间。我正在以一种使简单地隐藏操作不可接受的方式为菜单设置动画。

我的问题是，有没有一种方法可以让菜单在操作栏上设置动画，并在它上面安顿下来，这样栏就被菜单遮住了？

是否可以将视图附加到 action_bar_overlay_layout？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:09:29.697

我认为您可以为全屏菜单使用自定义对话框，并根据需要为对话框/其内容设置动画。基本上，如果您需要全屏对话框，您可以请求正确的窗口模式，如下所示：

```
Dialog dialog = new Dialog(...);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.custom_dialog);
...
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:11:10.423

如果我想要全屏重叠，我将整个原始布局包装在一个相对布局中，然后膨胀具有 fill_parent 属性的重叠视图，并将其添加到外部相对布局中。

如果您希望原始视图变暗，请在背景颜色中使用 alpha 透明度。

但我不确定这是否会与操作栏重叠，因为出于兼容性原因我不使用它。

# ghostscript - 在 ghostscript 中渲染文本注释

> ID：15259730
> 
> 赞同：1
> 
> 时间：2013-03-06T22:50:59.300
> 
> 标签：ghostscript

我正在使用 Ghostscript 将可搜索的 PDF 转换为图像 PDF，以便可以使用图像工具包使用如下命令行查看它们：

```
gswin32 -o c:\temp\output%d.png -r300 -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -dDOINTERPOLATE -dSAFER -sDEVICE=png16m c:\temp\test.pdf 
```

如果我添加 -dDOPDFMARKS 命令行参数，它会呈现注释标记，显示有注释但没有注释文本。

有谁知道如何让 Ghostscript 呈现注释文本？我已经在没有任何运气的情况下搜索了它的生活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:55:14.130

这是可能的，但它会是hacky。

Ghostscript 是一个开源的 postscript 解释器。PDF 只是使用特殊预定义字典的后记文件。在 ghostscript 8.62 或更早版本中，字典作为 postscript 文本文件位于目录 /lib 中。/lib 内部是一个文件 pdf_draw.ps，用于将 PDF 呈现为您在 .png 文件中看到的内容。在 pdf_draw.ps 内部是 /drawidget 的定义，它绘制了您看到的代表注释的小符号。在他在代码中的位置，整个注释都是可用的，只是没有被使用。

一个简单的演示是`just after the /drawwidget { %...`在 /drawwidget 行的正下方添加如下所示的 2 行 ( )，然后使用 gswin32c 在控制台中运行 gswin32。这将导致在控制台窗口中呈现 PDF 时显示 2 行。

```
/drawwidget { % <scalefactor> <annot> drawwidget -
    dup   /Contents known {dup /Contents get  == } if 
    dup   /T known { dup /T get  == } if 
```

输出

```
(This is a test sticky note)
(Laurie Shufeldt) 
```

它变得棘手的地方是定义如何处理注释，这就是它们不被显示的原因。

在这种情况下，一种方法可能是在小部件顶部放置一个脚注引用，并在页面底部放置一个脚注，其文本格式对粘性的意图有意义。

或者，便签可以是适当的图像，类似于在 acrobat 中展开时的外观，但这将覆盖便签下方的内容。

实现的难度取决于在实现中投入了多少努力。编辑`pdf_draw.ps`非常hacky，但又快又容易。应该可以将 hack 放入他们自己的文件中，并将它们作为命令行的一部分调用。如果将更改放入标题中，“它应该”在当前版本的 ghostscript 中工作，而不仅仅是旧版本。

预先定义允许的便签数量和脚注的固定位置将简化脚注的放置。如果便笺具有超长文本，则文本需要具有特殊格式以允许换行，其中假定没有换行符的短文本更容易编程。

也许您只是想从便笺中提取数据并将它们放入数据库中。如果是这样的话，上面的代码就接近你需要的了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:09:36.880

如果没有看到您的 PDF 文件，我无法确定，但有几个可能的原因。您的注释可能已关闭，即当您打开 PDF 文件时不显示任何内容。它可能没有外观流，Ghostscript 不会为所有注释类型制造外观流。

### 更新

提供的[PDF 样本](http://www.filedropper.com/imagepdfwithstickynote)包含 2 个注释：第一个是“弹出”注释；第二个是文本注释。

弹出注释基本上是交互式的，因为您可以打开和关闭它们，移动它们等等。但是，Ghostscript 不支持交互式元素。所以你得到的是弹出窗口的图标，但你没有得到相关的文本注释。

目前无法使用 Ghostscript 呈现此文本。

# select - AngularJS过滤多个选择输入

> ID：15259732
> 
> 赞同：7
> 
> 时间：2013-03-06T22:51:00.550
> 
> 标签：select, filter, angularjs

我真的很惊讶没有任何文档或关于 AngularJS 的这种更高级过滤机制的问题 - 它对于任何 UI 都是必不可少的。

我需要过滤掉包含当前项目的选择选项。*问题是当我们遍历进入过滤器的项目*时，如何拼接出每个选项，并为正在过滤的列表中的每个选择返回正确的结果。

例如，如果我们有三个地区 - 加拿大、英国、美国 - 选择输入应如下所示：

```
Canada
  [select]
    [option0] United Kingdom
    [option1] United States

United Kingdom
  [select]
    [option0] Canada
    [option1] United States

United States
  [select]
    [option0] Canada    
    [option1] United Kingdom 
```

*.. 等等...*

HTML：

```
<div ng-repeat="region in data.regions">
    <h2> {{region.name}} </h2>
    <input ui-select2="version2" type="hidden" name="keywordsLocal-{{$index}}" class="region-keywords input-xlarge" data-ng-model="data.regions[$index].keywords" required-multiple />
    <select ui-select2 id="copy-{{$index}}" ng-show="region.length > 1" class="input-xlarge" ng-click="_copy($event, $index)" data-ng-model="data.regions[$index].keywords">
        <option value="">Use the same keywords as:</option>
        <option ng-repeat="region in data.regions | myFilter" value="{{region.keywords}}">{{region.name}}</option>
    </select>
</div> 
```

Javascript：

```
app.filter('myFilter', function() {

    return function(items) {
        var group = [];

        for (var i = 0; i < items.length; i++) {
            group.push(items.name);
        }

        for (var i = 0; i < group.length; i++) {
           group[i].splice(i, 1);
        }

        return group;

    };

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:28:51.687

使选择不包括当前选择的内容存在缺陷。我将在解决方案中包含错误，以便您查看。

ng-options 是您所需要的。这是一个使用 2 个单独选择的示例。

```
<select ng-model='selectedCountry' ng-options='country.name for country in countries'></select>
<select ng-model='selectedCountry' ng-options='country.name for country in filteredCountries()'></select> 
```

这是`$scope`碎片。请注意，filteredCountries 只是返回国家，减去所选国家。

```
 $scope.countries = [{name:'United States'},{name:'United Kingdom'},{name:'Canada'}];

  $scope.filteredCountries = function(){
    var filteredCountries = [];
    angular.forEach($scope.countries, function(val, key){
      if(val !== $scope.selectedCountry){
        this.push(val);
      }
    },filteredCountries);
    return filteredCountries;
  }; 
```

您会注意到的错误是，一旦您选择第二个，它就不会显示您选择的值，因为它会立即从选项中过滤掉。这不是最好的用户体验。

工作示例： http: [//plnkr.co/edit/cRBdkE3akCeBXYqfyHFO](http://plnkr.co/edit/cRBdkE3akCeBXYqfyHFO)

**更新：** 由于您不能将 ng-options 与 AngularUI Select2 指令一起使用，这里是一个带有 select 2 示例的 plunkr：[http ://plnkr.co/edit/Hmt1OXYvtHOAZPzW7YK3?p=preview](http://plnkr.co/edit/Hmt1OXYvtHOAZPzW7YK3?p=preview)

此外，与上面列出的 filtersCountries 函数不同，a`watch`会更有效。它只会在检测到观察值发生变化时运行代码。

```
$scope.$watch('version1model',function(){
    $scope.filteredItems = [];
    angular.forEach($scope.items, function(val, key){
      if(val.id != $scope.version1model){
        this.push(val);
      }
    },$scope.filteredItems); 
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:46:20.857

我想出了一个解决方案。它是一个基本过滤器，但我实际上将 ng-repeat 中索引的当前值传递给过滤器：

筛选：

```
app.filter('keywordFilter', function() {
    return function(items, name) {
        var arrayToReturn = [];
        for (var i = 0; i < items.length; i++) {
            if (items[i].name != name.name) {
                arrayToReturn.push(items[i]);
            }
        }
        return arrayToReturn;
    };
}); 
```

HTML

```
<select ui-select2 id="copy-{{$index}}" class="input-xlarge" ng-change="_copy($index)" ng-options="region.name for region in data.regions | keywordFilter: {name: region.name}" data-ng-model="selectedKeywords">
    <option value="">Use same keywords as:</option>
</select> 
```

# html - 在 ROR html.erb 页面上呈现 txt 文件

> ID：15259735
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:51:05.350
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我的一个 html.erb 页面上有一个指向文本文件的链接。我想在另一个 html.erb 页面中打开并显示该文本文件，该页面上还有其他一些东西（横幅、菜单栏和其他东西）。

* * *

html1.erb

## 菜单栏

<=链接到文件 1>

* * *

html2.erb

## 菜单栏

显示 file1.txt

其他东西（按钮，复选框n东西）

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:53:41.117

你试过这个吗？

```
<%= render :file => '/some/file1.txt' %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:15:40.647

```
 <%= render file: 'path/to/text', formats: ['txt'] %> 
```

# highcharts - highcharts 共享工具提示指针

> ID：15259738
> 
> 赞同：0
> 
> 时间：2013-03-06T22:51:20.380
> 
> 标签：highcharts

我有一个显示各种天气数据的图表，并且它正确地做到了这一点。

工具提示适用于系列中的数据，但我想以附加文本的形式从另一个数据数组向每个数据添加一些附加数据。

第一个数据数组是

```
var hightemp = new Array(12.2, 12.9, 22.7, 26.0, 29.8, 31.5
                        ,33.5, 30.5, 25.1, 23.6, 15.2, 13.2); 
```

第二个是

```
var hightempT = new Array("at 16:44 on 29 January 2013"
                  , "at 13:58 on 29 February 2012", "at 18:03 on 28 March 2012"
                  , "at 17:44 on 21 April 2011", "at 17:08 on 26 May 2012"
                  , "at 17:22 on 26 June 2011", "at 17:10 on 26 July 2012"
                  , "at 17:06 on 10 August 2012", "at 18:10 on 07 September 2012"
                  , "at 14:55 on 01 October 2011", "at 13:53 on 03 November 2011"
                  , "at 14:13 on 22 December 2012"); 
```

因此，当工具提示通过点 1 运行时，它当前读取`HT : 12.2C`并且我希望它`HT : 12.2C at 16:44 on 29 January 2013`通过访问第二个数组中的相同位置并将脚本添加到工具提示的末尾来读取。我需要知道的是什么指针变量指向数组 1 中的位置 1，以便我可以使用它来访问数组 2 中的适当数据？

附加数据。

好的，我已经按照您的建议格式化了一个变量

```
var hightemp = new Array(
                         { y:12.2, time:"at 16:44 on 29 January 2013"},
                         { y:12.9, time:"at 13:58 on 29 February 2012"},
                         { y:22.7, time:"at 18:03 on 28 March 2012"},
                         { y:26.0, time:"at 17:44 on 21 April 2011"},
                         { y:29.8, time:"at 17:08 on 26 May 2012"},
                         { y:31.5, time:"at 17:22 on 26 June 2011"},
                         { y:33.5, time:"at 17:10 on 26 July 2012"},
                         { y:30.5, time:"at 17:06 on 10 August 2012"},
                         { y:25.1, time:"at 18:10 on 07 September 2012"},
                         { y:23.6, time:"at 14:55 on 01 October 2011"},
                         { y:15.2, time:"at 13:53 on 03 November 2011"},
                         { y:13.2, time:"at 14:13 on 22 December 2012"}
                        ); 
```

但是代码

```
 formatter: function() {
            return 'HT:'+ this.y + this.x + this.time; 
```

在工具提示中给出`HT:12.2Janundefined`，所以它找到了`y`&`x`但不是上面数组中的时间

按照您的建议使用`point.x`代码不会产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:51:27.917

你不需要两个数组。如下格式化数据点：

```
[{ y:12.2, text:"at 16:44 on 29 January 2013"},
 { y:12.9, text:"at 13:58 on 29 February 2012"}
...
 ] 
```

在工具提示功能中，您现在可以访问点 y 和文本属性。使用工具提示的示例是[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-simple/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-simple/)

如果您按照我的建议设置点，则可以在格式化程序函数中引用 this.point.text 。

# php - 从一堆 xml 文件中特定正则表达式模式的搜索结果中获取 xpath

> ID：15259746
> 
> 赞同：0
> 
> 时间：2013-03-06T22:51:56.300
> 
> 标签：php, python, xml, regex, xpath

我有很多 XML 文件，我必须在这些文件中搜索一个字符串（详细地说，这将是一个不太复杂的正则表达式）。

结果我想得到字符串所在节点的xpath，即：

```
pattern = /home|house/

files: file1.xml, file2.xml etc 
```

结果：

```
"home" in file1.xml, xpath: //root/cars/car[2]
"house" in file2.xml, xpath: //root[1]/elemA[2][@attribute1='first'] 
```

我怎样才能做到这一点？我可以使用 PHP、python、Javascript、VIM 插件（因为我已经使用过这些插件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:04:57.080

搜索：

```
 //*[contains('home') or contains('house')] 
```

在 PHP 中：

使用 DOMDocument 和 DOMXPath，然后只调用`DOMNode::getNodePath()`生成的匹配项。

如果你真的需要一个正则表达式而不是之前的那些匹配，php 的 DOMDocument 只有 XPATH 1.0 函数，但你可以通过添加一个用户定义的函数来向 DOMXPath 添加功能`DOMXPath::registerPhpFunctions`

在没有太多错误处理的情况下快速制作一些东西：

```
function xpathregexmatch($nodelist,$regex){
        foreach($nodelist as $node){
                if( $node instanceof DOMText && preg_match($regex,$node->nodeValue)) return true;
        }
        return false;
}

foreach(glob('*.xml') as $file){
        $d = new DOMDocument();
        $d->load($file);
        $x = new DOMXPath($d);
        $x->registerNamespace("php", "http://php.net/xpath");
        $x->registerPHPFunctions('xpathregexmatch');
        $matches = $x->query('//*[php:function("xpathregexmatch",text(),"/house|home/")]');
        if($matches->length){
                foreach($matches as $node){
                        echo $file. ':'.$node->getNodePath().PHP_EOL;
                }
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:43:52.650

在 PHP[`glob`](http://php.net/glob)中：XML 文件、[`xpath`](http://php.net/simplexmlelement.xpath)所有节点、[`preg_match_all`](http://php.net/preg_match_all)它们的文本以及如果匹配，获取节点的 xpath[`getNodePath()`](https://stackoverflow.com/a/14014917/367456)并输出：

```
$pattern = '/home|house|guide/iu';

foreach (glob('data/*.xml') as $file)
{
    foreach (simplexml_load_file($file)->xpath('//*') as $node)
    {
        if (!preg_match_all($pattern, $node, $matches)) continue;

        printf(
            "\"%s\" in %s, xpath: %s\n", implode('", "', $matches[0]),
            basename($file), dom_import_simplexml($node)->getNodePath()
        );
    }
} 
```

结果（示例）：

```
"Guide" in iana-charsets-2013-03-05.xml, xpath: /*/*[7]/*[158]/*[4]
"Guide" in iana-charsets-2013-03-05.xml, xpath: /*/*[7]/*[224]/*[2]
"Guide" in iana-charsets-2013-03-05.xml, xpath: /*/*[7]/*[224]/*[4]
"guide" in rdf-dmoz.xml, xpath: /*/*[4]/d:Description
"guide" in rdf-dmoz.xml, xpath: /*/*[5]/d:Description 
```

好问题顺便说一句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:58:19.133

php simplexml：

```
$xml=simplexml_load_string("file1.xml");
foreach ($xml->cars->car[2] as $car) {
    // do sth with $car
} 
```

有关更多信息，请更具体地说明您的问题。

# php - PHP函数不会打印带有变量的消息

> ID：15259747
> 
> 赞同：0
> 
> 时间：2013-03-06T22:51:57.177
> 
> 标签：php, function, variables

所以我正在尝试创建某种错误消息，代码如下所示：

```
function callError($errorcode, $attempts) {
    $errormessage = array(
        "0" => "Du har angivit fel lösenord, du har ". $attempts ." försök kvar. Kontrollera att du har skrivit rätt användarnamn.",
        "1" => "Ditt konto har låsts, kontakta webmaster för att återställa det.",
        "2" => "Användare finns inte, kontrollera att du har skrivit rätt användarnamn."
    );

    return $errormessage[$errorcode];
} 
```

但是当我运行第一条错误消息时它不起作用，它甚至不会出现。另一方面，当我运行另外两个时，它完美无瑕！我试图返回一个包含 $errormessage 和 $attempts 的数组，但这也不起作用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:02:29.357

这似乎是变量类型的问题。

确保你在这方面是一致的。例如，让我们决定我们希望这些值是`int`：

```
function callError($errorcode, $attempts) {

    $errorcode = (int) $errorcode;
    $errormessage = array(
        0 => "Du har angivit fel lösenord, du har ". $attempts ." försök kvar. Kontrollera att du har skrivit rätt användarnamn.",
        1 => "Ditt konto har låsts, kontakta webmaster för att återställa det.",
        2 => "Användare finns inte, kontrollera att du har skrivit rätt användarnamn."
    );

    return $errormessage[$errorcode];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:03:00.263

尝试使用带有后备安全机制的开关。

```
function callError($errorcode, $attempts) {
    $output = '';

    switch((int)$errorcode) {
        case 0:
            $output = 'Du har angivit fel lösenord, du har '. $attempts .' försök kvar. Kontrollera att du har skrivit rätt användarnamn.';
            break;
        case 1:
            $output = 'Ditt konto har låsts, kontakta webmaster för att återställa det.';
            break;
        case 2:
            $output = 'Användare finns inte, kontrollera att du har skrivit rätt användarnamn.';
            break;
        default:
            $output = 'SOMETHING WENT WRONG [CUSTOM MESSAGE]'.$errorcode.' : '.$attempts;
            break;
    }

    // Do something more here with your error handling if needed

    // Return the output message
    return $output;
} 
```

这将强制类型转换`$errorcode`为整数。但这对于这种情况并不重要`default`，但它会排除字符串中的整数问题`"1"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:56:28.100

确保索引是字符串添加

```
$errorcode = "$errorcode"; 
```

作为函数的第一行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:03:32.773

提示：将其更改为`switch()`语句：

```
function callError($errorcode, $attempts) {
    switch ($errorcode) {
        case 0:
            return "Du har angivit fel lösenord, du har ". $attempts ." försök kvar. Kontrollera att du har skrivit rätt användarnamn.";
        case 1:
            return "Ditt konto har låsts, kontakta webmaster för att återställa det.";
        case 2:
            return "Användare finns inte, kontrollera att du har skrivit rätt användarnamn.";
        default:
            return "No error associated";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T23:03:45.097

答案只是删除数组中串起来的数字。

见@fedorqui 评论！

# android - uiautomator中如何使用多点触控？

> ID：15259752
> 
> 赞同：2
> 
> 时间：2013-03-06T22:52:04.723
> 
> 标签：android, integration-testing, android-uiautomator

我还没有找到任何方法来自动化 uiautomator 测试中的多点触控动作

鉴于它是 com.android.uiautomator.* 类的框架，我怎样才能自动化多点触控动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T13:00:04.963

在 android API 级别 18 中，android UiObject 为这种多点手势提供了 api。[在这里检查](http://developer.android.com/tools/help/uiautomator/UiObject.html#pinchIn%28int,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T15:48:51.250

2017 年 3 月 1 日更新当我第一次回答这个问题时，Android-17 的当前文档，例如[http://developer.android.com/tools/help/uiautomator/UiObject.html](http://developer.android.com/tools/help/uiautomator/UiObject.html)似乎没有提供任何方式来提供多点触控或其他复杂的手势，如捏和缩放。

但是正如@Project 指出的那样，现在支持多点触控手势。[https://developer.android.com/reference/androidx/test/uiautomator/UiObject#performmultipointergesture](https://developer.android.com/reference/androidx/test/uiautomator/UiObject#performmultipointergesture)

在这个阶段，我还没有测试过这种能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T02:10:59.877

您可以使用 pinchOut / pinchIn 方法进行缩小和放大。或者如果您想要更细粒度的控制，请使用 JulianHarty 指出的多点触控手势。

```
UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());
        device.findObject(uiSelector).pinchOut(percent, steps); 
```

# asp.net-mvc - 我必须一直指定 System.Web.HttpContext.Current.Server 吗？

> ID：15259754
> 
> 赞同：0
> 
> 时间：2013-03-06T22:52:10.837
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用 Server.Mappath，需要指定“System.Web.HttpContext.Current.Server”。作为前缀。我不能将其作为包含而不是每次使用“服务器”来执行。这是在类中使用而不是在控制器中使用，因此需要。

控制器代码：

```
string strMapPath = Server.MapPath("~/XML/"); 
```

上课时：

```
string strMapPath = System.Web.HttpContext.Current.Server.MapPath("~/XML/"); 
```

也适用于会话对象的使用：

```
System.Web.HttpContext.Current.Session["MasterDocument"] = myDoc; 
```

如果我能做这样的事情会很好：

```
include System.Web.HttpContext.Current; 
```

但不可能。

想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:54:20.663

您可以使用*using alias 指令*；

```
using Server = System.Web.HttpContext.Current.Server; 
```

这将允许您直接在控制器代码中使用它；

```
string strMapPath = Server.MapPath("~/XML/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:51:09.670

这应该工作

```
public class YourClass
{
    public YourClass()
    {
        Server = System.Web.HttpContext.Current.Server;
    }

    protected HttpServerUtility Server
    {
        get; set;
    }

    public void SomeWork()
    {
        Server.MapPath("somepath");
    }
} 
```

# twitter-bootstrap - Twitter BootStrap - 响应式设计

> ID：15259762
> 
> 赞同：0
> 
> 时间：2013-03-06T22:52:26.110
> 
> 标签：twitter-bootstrap

我已按照 Twitter Bootstrap 网站上的说明将以下两行代码发布到我的页面头部

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

不幸的是，响应功能无法正常工作。还有其他我应该注意的事情吗？任何帮助和指导表示赞赏。

谢谢

也许如果我发布索引页面的代码。

见下文

```
 <!DOCTYPE html>
        <html>
        <head>
        <title>Welcome to Rentraro.com - Holiday Home Rental Accommodation & Property Management, Rarotonga, Cook Islands, South Pacific</title>
        <meta name="verify-v1" content="gTdq786N6XdrCTtj7ulUYYLtkvVDNwR5INO860wLw8Y=" /> 
        <meta name="keywords" content="Accommodation, Heritage, Muri, Rentraro, holiday home rental, rarotonga accommodation, 
        holiday rental, vacation home rental, vacation house rental, Rent, Rental, Rarotonga, Cook Islands, South Pacific, Beach, 
        lagoon, luxury, Bungalows, Polynesia, South Seas, studio apartment, self contained, private home, private house, studio, 
        vacation, holiday, diving, honeymoon couples, blue lagoon, mountain, tropical, peaceful, cottages, coral beach units, 
        coral beach, units, family home, sunset, house rental, home rental, familiy, family home rentals, family house rentals, 
        families, secluded, sunset, rarotonga holiday homes, rarotonga holiday house, rarotonga home rental, rarotonga home rentals, 
        property management, cook islands holiday homes, rental home accommodation rarotonga, rarotonga house rental, rarotonga villa rental, 
        rarotonga studio rental, rarotonga information" />
        <meta name="description" content="Property Management and Holiday Home Rental Accomodation Specialists, Rarotonga, Cook Islands, South Pacific" />
        <meta name="content-language" content="en" />
        <meta name="copyright" content="Heritage Holdings, Rarotonga, Cook Islands" />
        <meta name="robots" content="index, follow" />
        <meta name="rating" content="general" />
        <meta name="revist-after" content="30" />
        <meta name="classification" content="Holiday Home Rental, House Rental, Private Accommodation, South Pacific, Cook Islands, Rarotonga" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- all css start -->
        <link rel="icon" type="image/png" href="img/favicon.ico" />
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="style.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <!-- all css end -->
        </head>
        <body>
        <!-- start of nav -->
        <div class="container-fluid">
        <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
        <ul class="nav">
        <a class="brand" href="index.html" ><span class="navaho">RentRaro<span style="color: #69c8da">.com</span></span></a>
        <li class="active"><a href="index.html">Home</a></li>
        <li><a href="aboutUs.html">About Us</a></li>
        <li><a href="homesForRent.html">Homes For Rent</a></li>
        <li><a href="mapOfRarotonga.html">Map of Rarotonga</a></li>
        <li><a href="activities.html">Activities</a></li>
        <li class="dropdown">
        <a class="dropdown-toggle"
        data-toggle="dropdown"
        href="#">
        Read Me
        <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
        <!-- links -->
        <li><a href="faqs.html">FAQ's</a></li>
        <li><a href="tipSheet.html">Tip Sheet</a></li>
        <li><a href="rarotongaGuide.html">Rarotonga Guide</a></li>
        </ul>
        </li>
        <li><a href="links.html">Links</a></li>
        <li><a href="photoGallery.html">Photo Gallery</a></li>
        <li><a href="contactUs.html">Contact Us</a></li>
        </ul>
        <!-- clock starts here -->
        <p>
        <div id="tP" style="color : white; text-align: right; margin-right: 20px;">
        </div>
        </p>
        <!-- clock ends here  -->
        </div>
        </div>
        <!-- nav ends here -->
        <br/>
        <br/>
        <br/>
        <br/>

        <!--- container holding and aligning all content -->

        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style ">
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_pinterest_pinit"></a>
        <a class="addthis_counter addthis_pill_style"></a>
        </div>
        <!-- AddThis Button END -->

        <!-- big blue unit start -->
        <div class="hero-unit">
        <div class="text-center">
        <h1><span class="head">Welcome to rentraro.com</span></h1>
        <p>Property management and holiday home rental accommodation specialists<br/>
        Rarotonga | Cook Islands | South Pacific </p>
        <p>
        <br/>
        <a href="aboutUs.html" class="btn btn-primary btn-large">
        Learn more
        </a>

        </p>
        </div>
        </div>
        <!-- big blue unit end -->

        <div class="row-fluid">
                <ul class="thumbnails">
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/kia_manuia_cottage_10_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                        <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5>Kia Manuia Cottage</h5>
                        <p><a href="kiaManuiaCottage.html" class="btn btn-primary">More...</a></p>
                      </div>
                    </div>
                  </li>
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/tehoras_homestead_15_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Tehoras Homestead </h5>
                        <p><a href="tehorasHomestead.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                  </li>
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/papa_mauris_11_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Papa Mauri's Place</h5>
                        <p><a href="papaMaurisPlace.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div> 
                    </li>
                       <li class="span2">
                    <div class="thumbnail">
                      <img src="img/raro_beach_bach_07_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Raro Beach Bach</h5>
                        <p><a href="raroBeachBach.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                     </li>
                     <li class="span2">
                    <div class="thumbnail">
                      <img src="img/te_akapuao_07_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Te Akapuaou Villa</h5>
                        <p><a href="teAkapuaoVilla.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                  </li>
                  <li class="span2">
                    <div class="thumbnail">

                    <a href="#myModal" role="button" style="width: 134px" class="btn btn-danger" data-toggle="modal"><i class="icon-tag icon-white"></i> Latest Specials</a>
                    <a href="#myModal2" role="button" style="width: 134px" class="btn btn-success" data-toggle="modal"><i class="icon-info-sign icon-white"></i> News</a>
                    <a href="docs/events.pdf" role="button" style="width: 134px" class="btn btn-info" data-toggle="modal"><i class="icon-info-sign icon-white"></i> Calender of Events</a>

                    </div>
                  </li>
                </ul>
              </div>

        <div class="row-fluid">
                <ul class="thumbnails">
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/muri_central_14_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                        <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5>Muri Central</h5>
                        <p><a href="muriCentral.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                  </li>
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/Coffee_House_13_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Coffee House </h5>
                        <p><a href="coffeeHouse.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                  </li>
                  <li class="span2">
                    <div class="thumbnail">
                      <img src="img/temara_sunrise_09_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Temara Sunrise</h5>
                        <p><a href="temaraSunrise.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div> 
                    </li>
                          <li class="span2">
                    <div class="thumbnail">
                      <img src="img/kakaia_retreat_14_sm.jpg" class="img-polaroid" alt="">
                      <div class="caption">
                      <p class="text-error"><i class="icon-star-empty"></i>New Listing</p>
                        <h5 class="fad">Kakaia Retreat</h5>
                        <p><a href="kakaiaRetreat.html" class="btn btn-primary">More...</a></p> 
                      </div>
                    </div>
                  </li>
                       <li class="span4">

                    <!-- Button to trigger modal 1 and 2 above under te Akapuao -->

                    <!-- Modal1 Specials -->
                    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                    <h3 id="myModalLabel" class="muted">Latest Specials</h3>
                    </div>
                    <div class="modal-body">
                    <p><a href="muriLodge.html">Muri Lodge</a> <br/>December thru Jan NZ$2300.00 per week for the whole house.</br>
                    Feb thru March NZ$1800.00 per week for the whole house.</p>
                    <p class="text-warning">More specials to come.</p>
                    </div>
                    <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
                    </div>
                    </div>
                    <!-- Modal2 News & Happenings -->
                    <div id="myModal2" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                    <h3 id="myModalLabel" class="muted">News and Happenings</h3>
                    </div>
                    <div class="modal-body">
                    <ul>
                    <li>03/03/2013 New Website Launched.</li>
                    <li>14/11/2011 We were in the press - <a href="http://www.cinews.co.ck/2011/November/Wed16/local.htm#1111140102" target="_new">Air New Zealand Tourism Awards.</a></li>
                    </ul>
                    </div>
                    <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
                    </div>
                    </div>

                    <div class="well">
                   <p class="text-success"><i class="icon-globe"></i>Trending content from our site's pages.<p>
                    <!-- AddThis Trending Content BEGIN -->
                    <div id="addthis_trendingcontent"></div>
                    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4fd7a2f13ac8bb1a"></script>
                    <script type="text/javascript">
                    addthis.box("#addthis_trendingcontent", {
                        feed_title : "",
                        feed_type : "trending",
                        feed_period : "day",
                        num_links : 5,
                        height : "auto",
                        width : "auto",
                        domain : "www.rentraro.com"});
                    </script>
                    <!-- AddThis Trending Content END -->

                    </div>

                  </li>
                </ul>
              </div>

        <!--- bottom footer -->
        <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
        <div class="row-fluid">
        <div class="span12">
        <div class="text-center">
        <br/>
        <small>
        <address>
        PO Box 2165
        Rarotonga, Cook Islands 
        <abbr title="Phone">P:</abbr> (00682) 55519
        <abbr title="Fax">F:</abbr> (00682) 28017
        <abbr title="Email">E:</abbr> <a href="mailto:heritage@oyster.net.ck?Subject=General Enquiry from Rentraro Home Page">heritage@oyster.net.ck </a><br>
        &#169; www.rentraro.com 2013
        </address>  </small>
        </div>
        </div>
        </div>
        </div>
        </div>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>

        <!-- scripts -->

        <script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
        <script src="http//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/goSquared.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4fd7a2f13ac8bb1a"></script>
        <script type="text/javascript" src="js/clock.js">
        // Clock Script Generated By Maxx Blade's Clock v2.0d
        // http://www.maxxblade.co.uk/clock
        </script>
        <!-- scripts end -->
        </div>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:13:28.887

我使用的是最新的 Boostrap，响应文件包含在主项目中。

您使用的链接只有在您的服务器或本地计算机的文件夹 assets->css-> 中有 bootstrap-responsive.css 时才有效。

您可以使用[bootstrapcdn](http://www.bootstrapcdn.com/?v=03042013192251#tab_quickstart)提供的链接来包含远程文件

**css**

```
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"> 
```

**js**

```
<script src="http//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script> 
```

[或者你可以在这里](http://twitter.github.com/bootstrap/assets/bootstrap.zip)下载Boostrap ，并根据你正在使用的调用css或js的文件的相对路径来使用它。

例如，如果 bootstrasp.css 和 bootstrap.js 文件在 yourfile.html 的同一目录下，这里是 yourfile.html 的内容：

```
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Javascript · Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

 <link href="bootstrapn.css" rel="stylesheet">

  </head>

<body>
<button type="button" class="btn btn-primary" data-loading-text="Loading...">Hello World!</button>

<script src="bootstrap.js"></script>

</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:53:46.210

如果您想要响应式设计，您还应该使用`fluid`容器版本：`container-fluid`和`row-fluid`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T17:29:22.870

您的 AddThis 小部件正在破坏一切。我尝试使用引导/响应式设计将 AddThis 小部件添加到另一个主题，但事情停止了工作（即滑块、切换等）。

具体来说，任何包含 addthis_widget.js 的行都会导致问题：

```
<script type="text/javascript" 
src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4fd7a2f13ac8bb1a">
</script> 
```

我能找到的唯一解决方案是从我的所有页面中删除所有 AddThis 小部件。

# macos - 对受保护的主机 URL 执行 Ping

> ID：15259768
> 
> 赞同：0
> 
> 时间：2013-03-06T22:52:45.420
> 
> 标签：macos, cocoa, terminal, ping

我在使用 PING 实用程序时遇到了一个奇怪的问题。当我在终端上执行 PING 命令来测试主机的连接性时，它在以太网上运行良好，但在 WiFi 上却不行。但我可以使用我的应用程序访问 WiFi 上的主机。唯一的区别是我在从我的应用程序连接主机时使用 HTTPS。现在，当我使用 HTTPS:// 为主机添加前缀时，我在终端上收到“未知主机”错误。知道有什么问题吗？以及如何在这样的安全服务器上执行 Ping？

```
ping -c10 -b en1 test.retail.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:18:48.307

似乎对 ping 的作用存在误解。**Ping 正在发送 ICMP 回显请求数据包并等待相应的响应。ICMP 是与 TCP 完全不同的网络协议，TCP 用于 HTTPS。**

主机可以响应 HTTPS 连接尝试但不响应 ping（例如，因为主机本身的防火墙或您与您尝试 ping 的主机之间的某处丢弃了 ICMP 回显请求数据包或响应），反之亦然反之亦然（例如，因为主机没有运行 Web 服务器，或者对它的访问受到限制/防火墙）。

Ping 是查看您是否可以访问配置为响应 ICMP 回显请求数据包的主机的正确工具（如果您可以合理地假设您和主机之间或主机上没有防火墙，则过滤掉此类网络流量），并确定您和主机之间的响应时间。

但是，如果您想测试主机是否在某个 TCP 端口上响应（例如 HTTP Web 服务器的端口 80，或 HTTPS Web 服务器的 443），您可以在终端中使用 Telnet：

```
telnet www.google.com 80 
```

如果有服务器在该 TCP 端口上侦听，您将看到如下内容：

```
Trying 173.194.69.106...
Connected to www.google.com.
Escape character is '^]'. 
```

如果它是一个 Web 服务器，那么如果你愿意，你甚至可以与它进行 HTTP 通信：

```
GET / 
```

它会回复：

```
HTTP/1.0 302 Found
Location: http://www.google.com/
Cache-Control: private
Content-Type: text/html; charset=UTF-8
(...) 
```

现在我们已经解决了这个问题，问题仍然是为什么您的主机确实通过以太网响应 ping，而不是通过 Wi-Fi。

**一个原因可能是，许多网络在使用有线以太网连接时允许不受限制地访问所有内部主机，但有一个防火墙来限制从无线网络到 LAN 或 DMZ 上的主机的连接。**

您尝试 ping 的主机在哪里？网络流量如何从以太网和 Wi-Fi 网络路由到您的主机？

# c++ - 将参数传递给 boost::thread 没有重载函数需要 2 个参数

> ID：15259769
> 
> 赞同：2
> 
> 时间：2013-03-06T22:52:46.443
> 
> 标签：c++, visual-c++, boost

从 boost::thread 文档看来，我可以通过执行以下操作将参数传递给线程函数：

```
boost::thread* myThread = new boost::thread(callbackFunc, param); 
```

但是，当我这样做时，编译器会抱怨

> 没有重载函数需要 2 个参数

我的代码：

```
#include <boost/thread/thread.hpp>
void Game::playSound(sf::Sound* s) {
    boost::thread soundThread(playSoundTask, s);
    soundThread.join();
}

void Game::playSoundTask(sf::Sound* s) {
    // do things
} 
```

我正在使用 Ogre3d 附带的 boost 副本，我想它可能已经很老了。不过，有趣的是，我查看了 thread.hpp，它确实具有用于具有 2 个或更多参数的构造函数的模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T23:04:23.317

问题是成员函数采用隐式的第一个参数`Type*`，其中`Type`是类的类型。这是在类型实例上调用成员函数的机制，这意味着您必须向`boost::thread`构造函数传递一个额外的参数。您还必须将成员函数的地址作为`&ClassName::functionName`.

我做了一个小的编译和运行示例，希望能说明使用：

```
#include <boost/thread.hpp>
#include <iostream>

struct Foo
{
  void foo(int i) 
  {
    std::cout << "foo(" << i << ")\n";
  }
  void bar()
  {
    int i = 42;
    boost::thread t(&Foo::foo, this, i);
    t.join();
  }
};

int main()
{
  Foo f;
  f.bar();
} 
```

# c# - 图的数据源过滤

> ID：15259770
> 
> 赞同：0
> 
> 时间：2013-03-06T22:52:50.203
> 
> 标签：c#, visual-studio-2010, graph, datasource

我有一个看起来像这样的表：

```
id | group | time_stamp | value
---|-------|------------|------
01 | 1     | 02:30      | 8
02 | 2     | 03:00      | 9
03 | 2     | 03:00      | 14
04 | 1     | 03:30      | 10
05 | 2     | 04:00      | 12 
```

我想在折线图中显示第 1 组的值。我创建了一个数据源和一个图表。图系列的 XValueMember 是 a `time_stamp`，而 YValueMember 是 a `value`。现在图表基于所有记录，我完全理解。但是如何只选择某个组的记录呢？我想制作一个按钮来切换组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:20:51.850

您可以通过执行以下操作将数据转换为您想要的形式。

```
var lineGraphs = data
    .GroupBy(x => x.group)
    .Select(g => new
    {
        Group = g.Key,
        Points = g
            .Select(x => new { X = x.time_stamp, Y = x.value })
            .OrderBy(p => p.X)
            .ToList()
    })
    .ToList(); 
```

然后，命名空间`System.Windows.Forms.DataVisualization`具有交互式图形控件，可为您提供显示此类数据的基本功能。

# c++ - SFML 2.0 具有相同的精灵循环

> ID：15259771
> 
> 赞同：1
> 
> 时间：2013-03-06T22:52:51.407
> 
> 标签：c++, sfml

我正在使用 SFML 2.0 将入侵者精灵列表绘制到我的游戏中。目前我必须继续复制和粘贴我的代码来绘制更多的精灵：

```
//load the invaders images
sf::Texture invaders;
sf::Texture invaders2;
sf::Texture invaders3;
sf::Texture invaders4;
sf::Texture invaders5;
sf::Texture invaders6;
invaders.loadFromFile("images/invaders.png");
invaders2.loadFromFile("images/invaders.png");
invaders3.loadFromFile("images/invaders.png");
invaders4.loadFromFile("images/invaders.png");
invaders5.loadFromFile("images/invaders.png");
invaders6.loadFromFile("images/invaders.png");

//Sprites
sf::Sprite invadersSprite(invaders);
sf::Sprite invadersSprite2(invaders2);
sf::Sprite invadersSprite3(invaders3);
sf::Sprite invadersSprite4(invaders4);
sf::Sprite invadersSprite5(invaders5);
sf::Sprite invadersSprite6(invaders6);

invadersSprite2.setPosition(30,NULL);
invadersSprite3.setPosition(60,NULL);
invadersSprite4.setPosition(90,NULL);
invadersSprite5.setPosition(120,NULL);
invadersSprite6.setPosition(150,NULL);

if(Clock.getElapsedTime().asSeconds()>REFRESH_RATE)
        {

            //carry out updating tasks
            static float spriteTimer=0.0;  //keep track of sprite time
            spriteTimer+=Clock.getElapsedTime().asSeconds();

            static int count=0; //keep track of where the sub rect is
            if(spriteTimer>delay)
            {
                invadersSprite.setTextureRect(area);
                invadersSprite2.setTextureRect(area);
                invadersSprite3.setTextureRect(area);
                invadersSprite4.setTextureRect(area);
                invadersSprite5.setTextureRect(area);
                invadersSprite6.setTextureRect(area);
                ++count;
                invadersSprite.move(xVelocity, yVelocity);  
                invadersSprite2.move(xVelocity, yVelocity); 
                invadersSprite3.move(xVelocity, yVelocity); 
                invadersSprite4.move(xVelocity, yVelocity); 
                invadersSprite5.move(xVelocity, yVelocity); 
                invadersSprite6.move(xVelocity, yVelocity); 

if (invadersSprite.getPosition().x >= 770 || invadersSprite2.getPosition().x >= 770 || invadersSprite3.getPosition().x >= 770 || invadersSprite4.getPosition().x >= 770 || invadersSprite5.getPosition().x >= 770 || invadersSprite6.getPosition().x >= 770)// When it hits the right hand side of the screen it will move back down to the left
            {
                xVelocity = left;
                invadersSprite.move(0,down);
                invadersSprite2.move(0,down);
                invadersSprite3.move(0,down);
                invadersSprite4.move(0,down);
                invadersSprite5.move(0,down);
                invadersSprite6.move(0,down);
            } 
            else if (invadersSprite.getPosition().x <= 0 || invadersSprite2.getPosition().x <= 0 || invadersSprite3.getPosition().x <= 0 || invadersSprite4.getPosition().x <= 0 || invadersSprite5.getPosition().x <= 0 || invadersSprite6.getPosition().x <= 0) // When it hits the left hand side of the screen it will move up to the right.
            {
                invadersSprite.move(0,down);
                invadersSprite2.move(0,down);
                invadersSprite3.move(0,down);
                invadersSprite4.move(0,down);
                invadersSprite5.move(0,down);
                invadersSprite6.move(0,down);
                xVelocity = right;
            } 
```

显然我还没有将所有代码添加到这篇文章中，坦率地说我不认为这是必要的，因为我只需要向你们展示我正在复制大量代码只是为了绘制更多的精灵。我知道必须有一种更简单的方法来做到这一点。我知道有，假设您正在创建另一个碰巧使用精灵的游戏，但是 1000 次然后我知道一些可怜的程序员不会在那里做我目前正在做的事情。

我一直想知道制作一个包含 10 个数字的数组：

```
int invadersArray[10] = {1,2,3,4,5,6,7,8,9,10}; 
```

然后执行一个 for 循环，将精灵的渲染循环 10 次，这意味着精灵被加载了 10 次。我在这里正确吗？如果我可以，我可能会得到一些帮助，比如如何做到这一点？

或者也许将精灵保存在内存中，找到它然后用我的数组循环那个内存位置？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:00:03.467

是的，你把它复杂化了，而不是在你应该使用的地方使用数组或容器。每当您最终复制一个变量时，变量名称末尾的数字会增加，是时候使用容器了。

由于您的所有`sf::Texture`s 都完全相同，因此您只需执行一次：

```
// Create a texture
sf::Texture invaderTexture;
// Load image file into that texture
invaderTexture.loadFromFile("images/invaders.png"); 
```

然后，如果您想创建 10 个入侵者精灵，您将拥有一个`sf::Sprite`. 在这里，我向您展示了`std::vector`，但其他容器（或普通的旧数组）也可以工作：

```
// Create a vector of 10 sprites initialised with the texture above
std::vector<sf::Sprite> invaderSprites(10, sf::Sprite(invaderTexture)); 
```

如您所见，它们都使用相同的`invaderTexture`. 这要好得多，因为您不需要为每个入侵者在内存中放置纹理的副本。

然后你可以循环`invaderSprites`设置它们的属性：

```
// Loop over the elements of the vector of sprites
for (int i = 0; i < invaderSprites.size(); i++) {
  invaderSprites[i].setPosition(...);
} 
```

这应该可以帮助您入门。

* * *

对数组做同样的初始化看起来像这样：

```
// Create an array of 10 sprites (cannot initialise them with textures here)
sf::Sprite invaderSprites[10];
// Loop over each sprite, setting their textures
for (int i = 0; i < 10; i++) {
  invaderSprites[i].setTexture(invaderTexture);
} 
```

然后，每当您需要对所有入侵者做某事时，您都可以执行相同类型的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:57:32.757

由于`sf::Sprite`保留了指向您正在使用的纹理的 const 指针，因此您可以毫无问题地重复使用相同的纹理。当一个纹理可以做的时候，你会无缘无故地制作很多纹理。不幸的是，这同样不适用于移动精灵，因为它们是单独的对象。

# java - 将字符串中的第一个字母大写

> ID：15259774
> 
> 赞同：30
> 
> 时间：2013-03-06T22:53:02.710
> 
> 标签：java, stringbuilder, capitalize

我无法将字符串中的第一个字母转换为大写字母：

```
rackingSystem.toLowerCase(); // has capitals in every word, so first convert all to lower case
StringBuilder rackingSystemSb = new StringBuilder();
rackingSystemSb.append(rackingSystem);
rackingSystemSb.setCharAt(0, Character.toUpperCase(rackingSystemSb.charAt(0))); 
rackingSystem = rackingSystemSb.toString(); 
```

这个好像不行。。

有什么建议么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-06T23:02:06.570

尝试做：

```
rackingSystem = rackingSystem.toLowerCase(); 
```

代替：

```
rackingSystem.toLowerCase(); 
```

字符串是不可变的，您必须重新分配`toLowerCase()`.

不过更简单（只要您的字符串大于长度 2）：

```
rackingSystem = rackingSystem.substring(0,1).toUpperCase() + rackingSystem.substring(1).toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-06T23:05:47.110

```
StringBuilder rackingSystemSb = new StringBuilder(rackingSystem.toLowerCase());
rackingSystemSb.setCharAt(0, Character.toUpperCase(rackingSystemSb.charAt(0)));
rackingSystem = rackingSystemSb.toString(); 
```

# java - jprofiler“热点”视图是否正确考虑了通过 JNI 调用的本机代码消耗的 CPU？

> ID：15259775
> 
> 赞同：8
> 
> 时间：2013-03-06T22:53:10.470
> 
> 标签：java, jprofiler

我一直在使用 JProfiler 分析一段通过 JNI 调用本机 C 代码的 Java 代码，并且我从“CPU Views”窗口得到了奇怪的结果。特别是，“调用树”选项卡上的信息告诉我，调用本机代码的 Java 方法消耗了最高部分的运行时间，但“热点”选项卡甚至根本没有列出该方法。我还注意到 org.joda.time 类的类似故事，据报道它们有相当大的一部分 CPU，但没有被报告为热点，我想知道这是否是因为它们花费大量时间调用本机日期转换代码。

对此问题的任何见解将不胜感激。

编辑：我刚刚发现了一篇非常令人不安的学术论文，题为“Evaluating the Accuracy of Java Profilers”（我会提供一个链接，但看起来这个文件的谷歌结果引用的科罗拉多大学服务器现在非常不开心，所以我必须从 Google 的“快速查看”链接中下载一份副本）。我怀疑本机方法的问题在于它们被多计了，因为对它们的调用很多，它们很短，并且调用可能会导致屈服点；但是，我不确定这是否适用于时间转换例程。请注意，在对同一测试运行使用插桩分析和采样分析时，我得到了显着不同的结果，并且插桩结果更符合我的直觉。我将这篇论文推荐给那些对分析运行的结果摸不着头脑的人。不过，仍然希望有人对此有更多信息；“分析器错误”不是一个非常令人欣慰的结果。

编辑 2： 看起来 colorado.edu 已经整理好了，这是链接：[http ://www-plan.cs.colorado.edu/klipto/mytkowicz-pldi10.pdf](http://www-plan.cs.colorado.edu/klipto/mytkowicz-pldi10.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:45:02.213

热点视图显示了具有较大固有时间的方法。在调用树视图中，您会在调用树的顶部看到总时间较长的方法。这些方法通常不是热点。

什么被认为是“固有时间”取决于您的过滤器是如何配置的。

请参阅[此帮助主题](http://resources.ej-technologies.com/jprofiler/help/doc/helptopics/cpu/hotspotsAndFilters.html)以获取详细说明。

# python - 从 python 终止一个 linux 命令行实用程序

> ID：15259777
> 
> 赞同：2
> 
> 时间：2013-03-06T22:53:11.837
> 
> 标签：python, linux, angstrom-linux

我有一个来自`canutils`被调用的命令行实用程序`candump`。它是这样工作的：

我运行 candump（指​​定我要转储的总线）

```
root@beaglebone: candump can0 
```

然后它运行直到我结束它使用`CTRL+C`

但是，当我像这样在 python 脚本中运行它时。

```
Popen(["candump","can0"],stdout=PIPE) 
```

或者

```
call(["candump","can0"]) 
```

我不确定如何结束它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:59:20.207

如果要控制子进程，请不要使用 call 命令

如果你像上面那样使用 Popen，你应该将它分配给这样的变量：

```
p = Popen(["candump","can0"],stdout=PIPE) 
```

一旦你有了 p 然后你可以在它上面使用以下 SIGNAL 命令之一 [http://docs.python.org/2/library/subprocess.html#subprocess.Popen.send_signal](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.send_signal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:59:15.903

使用`Popen()`, 并调用`send_signal(signal.SIGINT)`返回的`Popen`对象。

# javascript - 在 IOS 设备上暂停 (html5) youtube 视频

> ID：15259779
> 
> 赞同：1
> 
> 时间：2013-03-06T22:53:15.363
> 
> 标签：javascript, ios, html, youtube, swfobject

我正在尝试在已加载**youtube.com**的 IOS UIview 中使用**MY OWN**按钮暂停视频。我一直在尝试与 youtube api 进行交互，但没有运气。

 **我正在考虑注入我自己的代码来与播放器交互（swfobject 对象？是吗？）。我试图连接到播放器/swfobject，但没有成功。*再次澄清一下，我不想将自己的视频嵌入到新的网络视图中。*（我知道怎么做。一个很酷的方法是使用[Tubeplayer 插件](http://tikku.com/jquery-youtube-tubeplayer-plugin#tubeplayer_tutorial_4)）。

所以我想做的是：

1.  注入我将从我的移动应用程序调用的暂停 JavaScript 函数。
2.  然后该函数将执行以下操作：

    ```
    var theSwfobject = window.swfobject; //**Find the youtube video object for reuse.**
    theSwfobject.PauseVideo(); 
    ```

所以简短的问题是：**如何在 youtube.com 上找到并重用 youtube 视频对象**（以便我可以注入一个 pause() 函数来从 IOS 调用以暂停视频）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:16:39.623

根据您的最新评论，我希望在 JavaScript 中做一些事情。这是我将设置的一个小 API 来控制此实例中的视频元素。由于视频元素似乎没有 id，因此使用了 getElementsByTagName：

```
var myVideoController = {};

myVideoController = (function() {

  "use strict";      

  var muted = false;

  var module = {

    //Grabs video element by tag name and assumes there would only be one if it exists 
    getVideoElement : function() {
      var videoElements = document.getElementsByTagName('video');
      var videoElement = null;

      if(videoElements[0]) {
        videoElement = videoElements[0];
      }

      return videoElement;
    },

    /** 
     * Wrapper to make interacting with html5 video element functions easier.
     * @param functionName - name of function to invoke on the video element
     * @params - any additional parameters will be fed as arguments to the functionName function
     */
    callVideoFunction : function(functionName) {
      var videoElement = module.getVideoElement();
      var functionArguments = [];

      if(videoElement !== null) {
        functionArguments = module.getSubArguments(arguments, 1);

        if(functionArguments.length > 0) {
          videoElement[functionName](functionArguments);
        } else {
          videoElement[functionName]();
        }
      }
    },

    setVideoProperty : function(propertyName, propertyValue) {
      var videoElement = module.getVideoElement();

      if(videoElement !== null) {
        videoElement[propertyName] = propertyValue;
      }
    },

    /* Helper method to grab array of function arguments for callVideoFunction
       since the arguments object in functions looks like an array but isn't
       so .shift() is not defined */
    getSubArguments : function (args, indexFrom) {

      var subArguments = [];

      for(var i = indexFrom; i < args.length; i++) {
        subArguments.push(args[i]);
      }

      return subArguments;
    },

    //Pause the video
    pauseVideo : function() {
      module.callVideoFunction('pause');
    },

    //Play the video
    playVideo : function() {
      module.callVideoFunction('play');
    },

    //Mute/Unmute video
    flipVideoMute : function() {
      muted = !muted;
      module.setVideoProperty('muted', muted);
    }
  };

  return module;

})(); 
```

我在[http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)对其进行了测试，其中 w3 设置了一个 HTML5 视频，其中包含有关 api 使用情况的反馈。我将上面的代码复制到 javascript 控制台并运行如下命令：

```
//Start video
myVideoController.playVideo();

//Pause video
myVideoController.pauseVideo();

//Restart video
myVideoController.playVideo();

//Mute video
myVideoController.flipVideoMute();

//Unmute video
myVideoController.flipVideoMute(); 
```**

# sql - 触发器是否应该只用于 SQL 无法实现的事情？

> ID：15259781
> 
> 赞同：2
> 
> 时间：2013-03-06T22:53:19.033
> 
> 标签：sql, database, sqlite, database-design, triggers

我目前正在编写一个使用 SQLite 的应用程序。SQLite 没有`ON UPDATE`时间戳功能，所以我为它编写了第一个触发器。然后我写了一个触发器来在插入的修改和创建的字段上添加当前时间戳。

当我去删除插入的修改/创建字段的设置时，问题就来了。我觉得我在向将来可能会看到我的代码的开发人员隐瞒一些东西。这可能是混乱的根源。

他们如何知道 sql 来自触发器。我应该评论它吗？这是不好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:00:42.953

根据经验，触发器旨在实现 SQL 功能规则，例如包含、排除、分区等。这种东西属于模型，应尽可能作为触发器实现。它必须与数据库一起交付，**否则模型将被破坏**。

关于您的情况，这更像是一种黑客攻击。如果你不能做不同的事情，那就去做，然后像你说的那样添加评论。但它应该仍然是一个例外。

请记住，触发器所做的几乎所有事情都可以在应用程序层完成（无论您想要什么）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:06:42.523

“我觉得我对开发人员隐瞒了一些东西......” - 这是一个非常好的观点。我遇到过许多使用@@Identity 的开发人员，他们真的很震惊，如果有人在插入另一行的表上放置一个触发器，他们最终会得到错误的身份。（与 SCOPE_IDENTITY() 相反 - 我知道这些是特定于 sql server 的，但这几乎就是我所知道的......）

它是隐藏的——除了文档之外，我不确定你是否可以让它更明显。

这就是为什么许多人尽可能避免使用它们的原因——我想如果在某些情况下没有简单的方法可以使用它们，那么只要它有充分的文档记录等等。我认为就像游标一样，虽然被许多人嘲笑，但它们可能非常强大和有用.. .但如果可以避免它们可能是最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:00:22.567

良好的观察力。有些事情只有触发器才能做。但是，我建议如果有任何替代方法可以使用触发器，那么请使用替代方法。我不熟悉 SQLite，但在任何其他数据库中，我会使用 DEFAULT 而不是触发器来为新记录加时间戳。为了捕获更新日期，我会将其包含在存储过程中，或者您拥有的任何数据库端逻辑中（RandomUs1r 建议的那种）。我可能会考虑使用触发器，但仅限于非常基本的操作。

您是正确的，触发器可能会令人困惑且难以调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:57:24.337

在修改记录的代码上，要在 SQLLite 中获取当前时间戳...，请尝试：

```
DATETIME('NOW') 
```

# ios - cv::Mat 与 UIImageView 宽度不匹配？

> ID：15259789
> 
> 赞同：0
> 
> 时间：2013-03-06T22:54:00.183
> 
> 标签：ios, opencv, width, avfoundation, frame

我正在使用 AVFoundation 来捕获视频帧，使用 opencv 处理并将结果显示在新 iPad 上的 UIImageView 中。opencv 进程执行以下操作（“inImg”是视频帧）：

```
cv::Mat testROI = inImg.rowRange(0,100);
testROI = testROI.colRange(0,10);
testROI.setTo(255); // this is a BGRA frame. 
```

但是，我没有在框架的左上角得到一个垂直的白条（100 行 x 10 列），而是从右上角到左下角有 100 条阶梯状水平线，每条长 10 像素。

经过一番调查，我意识到显示帧的宽度似乎比 cv::Mat 宽 8 个像素。（即第 2 行的第 9 个像素位于第 1 行的第 1 个像素的正下方。）。

视频帧本身显示正确（行之间没有位移）。当 AVCaptureSession.sessionPreset 为 AVCaptureSessionPresetMedium (frame rows=480, cols=360) 但为 AVCaptureSessionPresetHigh (frame rows=640, cols=480) 时不会出现问题。

全屏显示 360 列。（我尝试逐个像素遍历和修改 cv::Mat。像素 1-360 显示正确。361-368 消失，369 显示在像素 1 的正下方）。

我尝试了 imageview.contentMode (UIViewContentModeScaleAspectFill 和 UIViewContentModeScaleAspectFit) 和 imageview.clipsToBound (YES/NO) 的组合，但没有运气。

可能是什么问题呢？非常感谢。

我使用以下代码创建 AVCaptureSession：

```
NSArray* devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

if ([devices count] == 0) {
    NSLog(@"No video capture devices found");
    return NO;
}

for (AVCaptureDevice *device in devices) {
     if ([device position] == AVCaptureDevicePositionFront) {
           _captureDevice = device;
     }
}

NSError* error_exp = nil;
if ([_captureDevice lockForConfiguration:&error_exp]) {
    [_captureDevice setWhiteBalanceMode:AVCaptureWhiteBalanceModeContinuousAutoWhiteBalance];
    [_captureDevice unlockForConfiguration];
}
// Create the capture session
_captureSession = [[AVCaptureSession alloc] init];
_captureSession.sessionPreset = AVCaptureSessionPresetMedium;

// Create device input
NSError *error = nil;
AVCaptureDeviceInput *input = [[AVCaptureDeviceInput alloc] initWithDevice:_captureDevice error:&error];

// Create and configure device output
_videoOutput = [[AVCaptureVideoDataOutput alloc] init];

dispatch_queue_t queue = dispatch_queue_create("cameraQueue", NULL); 
[_videoOutput setSampleBufferDelegate:self queue:queue];
dispatch_release(queue); 

_videoOutput.alwaysDiscardsLateVideoFrames = YES; 

OSType format = kCVPixelFormatType_32BGRA;

_videoOutput.videoSettings = [NSDictionary dictionaryWithObject:[NSNumber numberWithUnsignedInt:format]forKey:(id)kCVPixelBufferPixelFormatTypeKey];

// Connect up inputs and outputs
if ([_captureSession canAddInput:input]) {
    [_captureSession addInput:input];
}

if ([_captureSession canAddOutput:_videoOutput]) {
    [_captureSession addOutput:_videoOutput];
}

AVCaptureConnection * captureConnection = [_videoOutput connectionWithMediaType:AVMediaTypeVideo];

if (captureConnection.isVideoMinFrameDurationSupported)
    captureConnection.videoMinFrameDuration = CMTimeMake(1, 60);
if (captureConnection.isVideoMaxFrameDurationSupported)
    captureConnection.videoMaxFrameDuration = CMTimeMake(1, 60);

if (captureConnection.supportsVideoMirroring)
    [captureConnection setVideoMirrored:NO];

[captureConnection setVideoOrientation:AVCaptureVideoOrientationPortraitUpsideDown]; 
```

当接收到帧时，会调用以下函数：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
@autoreleasepool {

    CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    OSType format = CVPixelBufferGetPixelFormatType(pixelBuffer);
    CGRect videoRect = CGRectMake(0.0f, 0.0f, CVPixelBufferGetWidth(pixelBuffer), CVPixelBufferGetHeight(pixelBuffer));

    AVCaptureConnection *currentConnection = [[_videoOutput connections] objectAtIndex:0];

    AVCaptureVideoOrientation videoOrientation = [currentConnection videoOrientation];
    CGImageRef quartzImage;

    // For color mode a 4-channel cv::Mat is created from the BGRA data
    CVPixelBufferLockBaseAddress(pixelBuffer, 0);
    void *baseaddress = CVPixelBufferGetBaseAddress(pixelBuffer);

    cv::Mat mat(videoRect.size.height, videoRect.size.width, CV_8UC4, baseaddress, 0);

    if ([self doFrame]) { // a flag to switch processing ON/OFF
            [self processFrame:mat videoRect:videoRect videoOrientation:videoOrientation];  // "processFrame" is the opencv function shown above
    }

    CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];
    quartzImage = [self.context createCGImage:ciImage fromRect:ciImage.extent];
    CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);

    UIImage *image = [UIImage imageWithCGImage:quartzImage scale:1.0 orientation:UIImageOrientationUp];

    CGImageRelease(quartzImage);

    [self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:33:57.940

我假设您正在使用构造函数`Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP)`并且 AUTO_STEP 为 0 并假设行步幅为`width*bytesPerPixel`.

这通常是错误的——将行与某个更大的边界对齐是*很常见的。*在这种情况下，360 不是 16 的倍数，但 368 是；这强烈表明它与 16 像素边界对齐（也许有助于在 16×16 块中处理的算法？）。

尝试

```
cv::Mat mat(videoRect.size.height, videoRect.size.width, CV_8UC4, baseaddress, CVPixelBufferGetBytesPerRow(pixelBuffer)); 
```

# android - 配置更改时的片段保存状态

> ID：15259790
> 
> 赞同：0
> 
> 时间：2013-03-06T22:54:08.547
> 
> 标签：android, android-fragments, android-loadermanager, android-configchanges

我正在开发 Twitter 客户端。我有带有加载器的 TimelineFragment，它从 db 和 web 加载数据。我在 onActivityCreated 中有 setRetainInstance(true)。

方向更改视图何时回收？我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:46:23.243

这取决于您要保存的内容。您的成员变量将被保存，但您必须使用它们来重新初始化您的视图小部件，例如 TextView、EditText、Buttons。

或者，如果您要保存其简单数据，例如 TextViews、EditText、Buttons 等上的文本，您可以在它们上使用名为“freezesText”的 xml 功能

# jquery - 通过 href 从 JSP 向控制器传递单元格的值

> ID：15259794
> 
> 赞同：0
> 
> 时间：2013-03-06T22:54:36.097
> 
> 标签：jquery, jsp, tags

我需要使用 href 标记将单元格的值传递给控制器​​。在这种情况下，值是从数据库中填充的。这是最好的方法吗？我不确定它是如何完成的，但我尝试过但它不起作用。我也需要java脚本吗？帮助！

```
<td class="ln" <a href="AnalysisController"><c:out value="${summary.labelNbr}" /></a></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:59:57.233

```
<td class="ln"><a href="AnalysisController?value=${summary.labelNbr}"><c:out value="${summary.labelNbr}" /></a></td> 
```

# java - 为什么 gluProject 不能用 LWJGL 给出正确的屏幕空间坐标

> ID：15259798
> 
> 赞同：1
> 
> 时间：2013-03-06T22:54:43.023
> 
> 标签：java, opengl, 3d, lwjgl

所以我正在使用 gluProject 获取 3d 坐标并告诉我它们在屏幕上渲染的位置。问题是我没有得到与 gluProject 相同的坐标以及它们实际最终渲染的位置。奇怪的是，如果相机的 x、y 和 z 与我正在测试的点之间的差异相等（例如，相机在 5、3、4 和 2、0、1 点）它给出了正确的价值观。我正在使用 gluLookAt() 进行相机转换。我已经确认我用于渲染的相同矩阵正在传递给 gluProject。下面是我的渲染代码 camera.look() 和我在 gluProject 中的部分：

渲染：

```
glEnable(GL_LIGHTING);
glEnable(GL_NORMAL_ARRAY);
glViewport(0, 0, Display.getHeight(), Display.getHeight());
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(90.0f, 1, .1f, 1000f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
cam.look();
for (Cube cube : cubes) {
    cube.draw();
}
grid.draw(); 
```

相机.look（）：

```
void look() {
    calcPoints(xAng, yAng);
    gluLookAt(x, y, z, x + dx, y + dy, z + dz, 0, 1, 0);
} 
```

与 gluProject 部分：

```
glViewport(0, 0, Display.getHeight(), Display.getHeight());
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(90.0f, 1, .1f, 1000f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
cam.look();

modelview = BufferUtils.createFloatBuffer(16); //floatbuffers, defined earlier
projection = BufferUtils.createFloatBuffer(16);
viewport = BufferUtils.createIntBuffer(16);
FloatBuffer result = BufferUtils.createFloatBuffer(3);

glGetFloat(GL_MODELVIEW_MATRIX, modelview);
glGetFloat(GL_PROJECTION_MATRIX, projection);
glGetInteger(GL_VIEWPORT, viewport);

gluProject(1f, 0f, 0f, modelview, projection, viewport, result);
//Utils.printFloatBuffer(projection);
//Utils.printFloatBuffer(modelview);
System.out.println(result.get(0) + " " + result.get(1) + " " + result.get(2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:17:25.450

也许尝试让向上向量与相机方向和位置成直角，而不是始终保持 (0, 1, 0)。

# wordpress - Wordpress Landing.php 页面：访问我的插件然后重定向

> ID：15259799
> 
> 赞同：0
> 
> 时间：2013-03-06T22:54:45.630
> 
> 标签：wordpress, redirect

我需要为可以访问我的 wp 插件然后重定向到主页的入站广告商链接创建一个静态 php 登录页面 (landing.php)。是否可以从“常规”.php 文件访问我的插件？如果是这样，怎么做？或者有没有更好的方法在 WP 中做到这一点，它不加载模板，只访问我的 wp 插件并重定向到主页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:10:52.483

将此行放在登陆 php 的顶部：

```
require('/path/to/wp-load.php'); 
```

之后，您可以使用所有 WordPress 功能，包括您的插件。

# .net - ASP.NET MVC 4 捆绑和缩小

> ID：15259800
> 
> 赞同：2
> 
> 时间：2013-03-06T22:54:47.193
> 
> 标签：.net, asp.net-mvc-4, bundling-and-minification

我一直试图在非调试模式下使缩小工作，但由于某种原因，当我包含`<compilation debug="false" />`在我的 Web.config 中时它不起作用。

但是，当我使用 时`BundleTable.Enableoptimizations = true`，它似乎工作正常。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:48:31.987

默认情况下，如果您在`debug`模式下构建，它会被禁用。但是如果你想在模式下启用它`release`但在模式下禁用它`debug`。`debug`在您的捆绑配置中，您可以默认启用它，并仅在调试模式下使用 c#指令将其关闭。

```
BundleTable.Enableoptimizations = true

#if DEBUG
    BundleTable.Enableoptimizations = false
#endif 
```

# asp.net-mvc - 带有组合框的 Knockout 可变长度列表的 ASP.NET - 如何绑定？

> ID：15259807
> 
> 赞同：0
> 
> 时间：2013-03-06T22:55:30.837
> 
> 标签：asp.net-mvc, knockout.js, viewmodel, knockout-2.0, asp.net-mvc-viewmodel

使用以下 ASP.NET 模型

```
public class User
  {
    public string Name { get; set; }
    public LEmail LEmail { get; set; }
  }
public class LEmail
  {
    public IList<CLabel> Labels;
    public IList<CEmail> Emails;
  }
public class CLabels
  {
    public IList<CLabel> Labels { get; set; }
  }
public class CLabel
  {
    public string Name { get; set; }
  }
public abstract class CEmail
  {
    public string SelectedLabel { get; set; }
    public string Name { get; set; }
  } 
```

用虚拟数据填充它并作为`User`对象发送到适当的视图，我在视图中有以下剔除定义：

```
@using (Html.BeginForm("MyAction", "MyController", FormMethod.Post, new { id = "MyEditor" }))
{
  @Html.EditorFor(m => @Model.LEmail)
 <p>
    <input type="submit" value="Save" data-bind="enable: Emails().length > 0" />
    <a href="/">Cancel</a>
  </p>

  <p data-bind="visible: saveFailed" class="error">A problem occurred saving the data.</p>

  <div id="debug" style="clear: both">
    <hr />
    <h2>Debug:</h2>
    <div data-bind="text: ko.toJSON(viewModel)"></div>
  </div>
}

<script type="text/javascript">

  $(function() {
    ko.applyBindings(viewModel);

    $("#profileEditorForm").validate({
      submitHandler: function(form) {
    if (viewModel.save())
      window.location.href = "/";
    return false;
      }
    });
  });

  var viewModel = {

    Name: ko.observable("@Model.Name"),

    Labels: ko.observableArray(@Html.Json(Model.LEmail.Labels) || []),
    Emails: ko.observableArray(@Html.Json(Model.LEmail.Emails) || []),
    addEmail: function() {
      viewModel.Emails.push(@Html.Json(new CEmail()));
    },
    removeEmail: function(eml) {
      viewModel.Emails.remove(eml);
    },

    saveFailed: ko.observable(false),

    // Returns true if successful
    save: function() {
      var saveSuccess = false;
      viewModel.saveFailed(false);

      // Executed synchronously for simplicity
      jQuery.ajax({
    type: "POST",
    url: "@Url.Action("MyAction", "MyController")",
    data: ko.toJSON(viewModel),
    dataType: "json",
    contentType: "application/json",
    success: function(returnedData) {
      saveSuccess = returnedData.Success || false;
      viewModel.saveFailed(!saveSuccess);
    },
    async: false
      });       
      return saveSuccess;
    }
  };
</script> 
```

最后，实际上应该处理可变长度列表的编辑器模板如下所示：

```
@model MyDomain.ViewModels.LEmail

<table>
    <tbody data-bind="template: { name: 'EmailsTemplate', foreach: Emails }" />
</table>

<button data-bind="click: addEmail">Add Email</button>

<script id="EmailsTemplate" type="text/html">
      <tr>
        <td>
      @* PROBLEM IS HERE!! Labels won't show (they will it this code taken out of template) *@
           <select data-bind="options: Labels"></select></td>
        <td>
          <input type="text" data-bind="value: Name, uniqueName: true" class="required" /></td>
        <td>
          <a href="#" data-bind="click: function() { viewModel.removeEmail(this); }">Delete</a></td>
      </tr>
</script> 
```

本质上我

1.  无法使其在`EditorTemplate`for 组合框（或下拉列表）中工作。无论我做什么，它都不会附加到标签上。如果我将它带到其他地方的模板之外 - 它会按预期工作。
2.  此外，根据选择填写电子邮件内的“SelectedValue” - 如何执行此操作。

3.  选择所有内容后，（这必须很简单）如何将其全部发布回来而不会丢失值（如您所见，它是一个超级嵌套模型）。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:21:22.183

标签在您的视图模型上，而不是每封电子邮件。由于模板是在 Knockout foreach 绑定的上下文中呈现的，因此绑定上下文已更改为电子邮件。

这是我写你的观点的方式：

```
@model FiveW.ViewModels.LabeledEmail

<table>
    <tbody data-bind="foreach: Emails">
        <tr>
           <td>
              <select data-bind="options: $root.Labels, value: SelectedLabel"></select>
           </td>
           <td>
              <input type="text" data-bind="value: Name, uniqueName: true" class="required" />
           </td>
           <td>
              <a href="#" data-bind="click: function() { viewModel.removeEmail(this); }">Delete</a>
           </td>
      </tr>
    </tbody>
</table>

<button data-bind="click: addEmail">Add Labeled Email</button> 
```

修复在 $root.Labels 中：我们需要告诉 Knockout 使用 $root（您的视图模型），因为标签实际上在您的视图模型上，而不是在单个电子邮件上。

另请注意，我没有使用命名模板。这是优选的。除非您在视图中的多个位置使用模板，否则您应该像我在上面所做的那样使用匿名的内联模板。

# html - 将包含在父元素中的旋转元素居中对齐

> ID：15259808
> 
> 赞同：0
> 
> 时间：2013-03-06T22:55:31.753
> 
> 标签：html, css

我有一个元素正在使用`transform: rotate(90deg);`，但它不在父元素的中心。

我也试图让它尽可能跨浏览器（透明度等），但到目前为止还没有好运。

**jsFIDDLE：http: [//jsfiddle.net/K8RXr/4](http://jsfiddle.net/K8RXr/4)**

*我旋转的原因`&lt;`是因为我将来会使用图标字体/图像来替换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:00:47.413

这似乎不是居中的原因是因为您已经旋转了它。当 css 停止转换时，它会执行所有正常样式，然后对其进行转换。因此，如果要删除`transform`，您会发现问题不在于水平居中，而在于垂直居中。要解决此问题，您必须添加

```
display:table-cell;
vertical-align:middle; 
```

箭头在中间对齐

我[这里有小提琴](http://jsfiddle.net/burn123/K8RXr/6/)

此外，如果您需要帮助以使某些东西更加跨浏览器兼容，[http](http://prefixr.com/) ://prefixr.com/是一个很好的工具。例如，它会把你`opacity:0.5;`变成

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
filter: alpha(opacity=50);
opacity:0.5; 
```

哪个对 Internet Explorer 有帮助

# cassandra - 有没有办法在 Cassandra 中按数据类型而不是字符串进行聚类排序？

> ID：15259810
> 
> 赞同：1
> 
> 时间：2013-03-06T22:55:45.160
> 
> 标签：cassandra, cql3

我使用以下 CQL 在 cqlsh 中的 CQL3 中创建了一个表：

```
CREATE TABLE test (
    locationid int,
    pulseid int,
    name text, PRIMARY KEY(locationid, pulseid)
) WITH CLUSTERING ORDER BY (locationid ASC, pulseid DESC); 
```

请注意，locationid 是一个整数。

但是，在我插入数据并运行选择之后，我注意到 locationid 的升序排序似乎是基于字符串，而不是整数。

```
cqlsh:citypulse> select * from test;
 locationid | pulseid | name
------------+---------+------
          0 |       3 | test
          0 |       2 | test
          0 |       1 | test
          0 |       0 | test
         10 |       3 | test
          5 |       3 | test 
```

请注意 0 10 5\. 有没有办法通过其实际数据类型对其进行排序？

谢谢，艾莉森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:17:40.283

在 Cassandra 中，主键的第一部分是“分区键”。该密钥用于在集群中分发数据。它以随机方式执行此操作以实现均匀分布。这意味着您不能按主键的第一部分进行排序。

你用的是哪个版本的 Cassandra？在最新版本的 1.2 (1.2.2) 中，您使用的示例中的 create 语句无效。

# asp.net-mvc - 在用户会话期间在 MVC 中持久化数据

> ID：15259811
> 
> 赞同：-2
> 
> 时间：2013-03-06T22:55:47.307
> 
> 标签：asp.net-mvc, session, cookies

提前道歉，因为我确信这个话题之前毫无疑问被问过，但我找不到任何回答我的具体查询的帖子。

请记住，我是 MVC 的新手，这就是我必须要做的。我有一个使用 MVC 3 框架在 VS 2010 下开发的项目。我有一个搜索页面，其中包含 6 个字段和一个嵌套模型，它本身包含 3 个字段。

我可以成功地将所有这些数据发布回自身，并且数据作为模型成功传递并返回，因此这些字段保留了用户提供的数据。

在我继续在另一个视图上实际使用此搜索条件之前，我有个想法。我想在用户会话期间保留此搜索条件，甚至可能将搜索结果保留在内存中。

这背后的原因只是为了节省我的用户时间：

a) 无需继续重新输入他们的搜索条件，无论他们如何进入或离开搜索页面

b) 通过更快地呈现搜索结果来加快用户体验

后者不如第一个要求重要。

我已经做了一些谷歌搜索，并且确实浏览了这个网站上的类似主题。从我读到的使用会话（如果开发 PHP 站点，我通常会使用）是不可以的。从我读到的原因来看，为什么你不应该使用会话似乎是有效的，我很乐意接受它。

但是现在我被留在了一个地方，我在摸索自己的想法，想知道实现这个简单目标的最佳实践到底是什么，可以在项目后期应用于类似情况。

我还查看了 OutputCache 方法，但它并没有像我预期的那样运行。在测试中，我将超时设置为 30 秒。提交搜索后，我单击了指向我的搜索页面的链接以查看这些字段是否会自动填充，但它们没有。但是然后单击搜索按钮，将检索缓存中的值。我以为我正在取得进展，但是当我尝试提交新值时，缓存中的旧值又回来了，即我实际上无法在强制执行缓存的情况下更改我的搜索条件。所以我认为这是一种探索的途径。

最后一个选项似乎建议使用 cookie 作为最有可能的候选者，但无论对错，我都觉得这不是最好的解决方案。我原以为 MVC 3 设计模式会有一种更简单且推荐的持久值方法。我确定有，但我还没有发现它。

我已经开始使用 JQuery 并且再次提到了这一点，但我不确定这是否是正确的方向。

因此，总而言之，我的问题实际上归结为更广泛的社区认为在我的情况下持久化数据的最佳实践。效率、可扩展性和弹性至关重要，因为我将拥有庞大的全球用户群，最终将使用这个网络应用程序。

提前致谢！

皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:21:44.987

我只会使用cookies。它们易于使用，您可以将它们保留多久，或者在用户关闭浏览器时让它们过期，并且听起来您在其中存储任何敏感信息。

# java - ehcache 从文件配置

> ID：15259814
> 
> 赞同：1
> 
> 时间：2013-03-06T22:56:13.797
> 
> 标签：java, caching, ehcache, configure

这可能是一个愚蠢的问题，但我正在尝试从 java 类中的 xml 文件配置 ehcache。我在“/src/main/resource”中有 ehcache.xml，并且在“/src/main/java/com/.../xyzDAO.java”的 java 类中进行配置

```
CacheManager cm     =   CacheManager.create("CLASSPATH:ehcache.xml");
cache               =   cm.getCache("mycache"); 
```

它说找不到该文件。这是首先配置ehcache的正确方法吗？

请建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:22:35.387

javadoc for`CacheManager.create(String)`不是很全面。但是如果这个方法像`CacheManager(String)`构造函数一样工作，它需要一个完整的路径名。如果您想使用在类路径中找到的文件，我建议您使用另一种`create`方法，例如`CacheManager.create(URl)`or `CacheManager.create(InputStream)`。

# r - 从 Flexmix 中提取最优参数：单变量数据

> ID：15259816
> 
> 赞同：1
> 
> 时间：2013-03-06T22:56:17.760
> 
> 标签：r

我正在尝试在[HMM](https://rads.stackoverflow.com/amzn/click/com/1584885734)书中复制一个表：

![在此处输入图像描述](../Images/dab45f1a41a05c68d05822ab8ec4ff4b.png)

具体来说，k=2 模型。

我正在使用代码：

```
dat<-as.data.frame(c(13,  8,  23,   22, 18, 15, 14, 11, 24, 18, 14, 16, 8,  14, 27, 15, 10, 13, 10, 23, 41, 20, 15, 15, 16, 18, 31, 15, 8,  16, 26, 17, 27, 22, 15, 11, 32, 19, 35, 19, 6,  11, 27, 20, 26, 16, 11, 18, 22, 28, 30, 8,  32, 19, 36, 27, 7,  36, 13, 39, 29, 18, 24, 26, 21, 23, 16, 22, 13, 17, 20, 13, 23, 14, 22, 16, 12, 22, 22, 17, 21, 13, 18, 24, 19, 21, 20, 25, 21, 15, 25, 15, 21, 22, 34, 16, 16, 21, 26, 10, 18, 12, 14, 21, 15, 15, 18))
colnames(dat)<-"x"

x2 <- flexmix(x~1, data=dat, k=2,model=FLXMRglm(formula=x~1,family="poisson"))
summary(x2) 
```

检查先验和日志，似乎语法正在做我想要的:)。我的问题是如何提取分量意味着 lambda（15.777 和 26.840 以上）？我不相信它们只是每个集群中数据的平均值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:31:57.143

```
exp(parameters(x2)) 
```

您可以使用`parameters`来提取系数，但模型默认使用对数链接功能，因此您需要使用`exp`来转换回原始比例。

# jquery - 使用 jQuery 选择 json 值

> ID：15259818
> 
> 赞同：0
> 
> 时间：2013-03-06T22:56:29.467
> 
> 标签：jquery, json

我有一个json对象如下：

```
[{"Id":"1","Item":"Apples","PricePerKilo":"10.00"},
 {"Id":"3","Item":"Oranges","PricePerKilo":"12.00"}] 
```

我希望得到 ID 为 3 的 PricePerKilo。

```
var fruits = jQuery("#products").data('productData'); 
```

顺便说一下，fruits 持有 json 对象...

我将解释我想在 SQL 中做什么，因为我发现这种方式更容易解释

```
SELECT PricePerKilo From fruits WHERE Id = 3 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:59:39.560

你必须循环！（另外，如果`fruits`保存 JSON 而不是数组 [它不能同时保存两者]，那么您应该`jQuery.parseJSON`先使用它。）

```
var i, fruit;

for(i = 0; fruit = fruits[i]; i++) {
    if(fruit.Id == 3)
        break;
} 
```

`fruit`将包含带有`Id`of`3`或`undefined`不存在的水果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:01:06.403

您必须遍历数组并选择匹配的 id：

```
$.each(fruits, function(i, val){
    if (val.Id == 3) {
        // val is now the single fruit object with the id of 3
    }
}); 
```

# ruby-on-rails - ruby 版本的自动切换非交互式 shell

> ID：15259819
> 
> 赞同：0
> 
> 时间：2013-03-06T22:56:29.747
> 
> 标签：ruby-on-rails, bash, ubuntu, rvm, sh

## 背景

操作系统：Ubuntu 12.04
RVM 版本：1.18.16（稳定） 默认 ruby​​：ruby 1.9.3-p385（通过 rvm）

## 确认 RVM 工作正常且 .rvmrc 受信任

```
$ bash -lc 'cd /home/client1/websites/site1; ruby -v' - client1
ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-linux]

$ bash -lc 'cd /home/client1/websites/site2; ruby -v' - client1
ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2012.02

$ bash -lc 'rvm rvmrc trusted /home/client1/websites/site2/.rvmrc'
The rvmrc at '/home/client1/websites/site2/.rvmrc' is currently trusted. 
```

## 所需效果

```
$ bash -c 'cd /home/client1/websites/site2; ruby -v' - client1
ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-linux]

$ bash -c 'cd /home/client1/websites/site2; ruby -v' - client1
ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2012.02 
```

## 当前效果

```
$ bash -c 'cd /home/client1/websites/site2; ruby -v' - client1
ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-linux]

$ bash -c 'cd /home/client1/websites/site2; ruby -v' - client1
ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-linux] 
```

## 尝试过的事情

放置： `[[ -s /usr/local/rvm/scripts/rvm ]] && . /usr/local/rvm/scripts/rvm` 在以下文件中：

*   ~/.bashrc,
*   ~/.profile,
*   ~/.bash_profile,
*   /etc/bash.bashrc

好吧，在文件的最顶部，在其他任何事情都可能导致问题之前。

**旁注：**我尝试过使用 .ruby-version 方法，但它似乎也不起作用（感谢 mpapis on irc）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:03:53.617

一般来说 bash 需要以某种方式调用来处理各种 profile/rc 文件。尝试执行 bash 作为`bash -L -c "your command here"`替代，它会激活登录模式以正确解析所有必要的启动文件。

**编辑**：如果不需要登录外壳，则必须强制交互模式自动获取源`~/.bashrc`。这是因为`-c`阻止了一个普通的交互式控制台被实例化。这可以通过`bash -i -c "command"`.

# java - @Override 命令与“准备好编程 Java？”不兼容

> ID：15259823
> 
> 赞同：-6
> 
> 时间：2013-03-06T22:56:43.607
> 
> 标签：java, swing, overriding

显然@Override 是**非法令牌**

我怎么能得到这个，这可能吗？

编辑：

*我很抱歉。我不知道Ready to Program 是java v. 1.4。我是一个新手，最初认为 java 语言词汇是通用的，只有类会随着版本的变化而变化。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:19:47.417

查找一下，您正在使用的东西（“Ready to program Java”）随**Java 1.4**一起提供。很*古老*。

所以......不，`@Override`不允许，而且你不能直接在`JFrame`.

请参阅：[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#setLayout(java.awt.LayoutManager)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#setLayout(java.awt.LayoutManager))

> 默认情况下，该组件的布局可能不设置，而应设置其 contentPane 的布局。例如：thisComponent.getContentPane().setLayout(new GridLayout(1, 2))
> 
> 尝试设置此组件的布局将导致抛出运行时异常。子类可以禁用此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:03:21.607

您不应该直接在 JFrame 上设置布局。正如错误所说的' `use Project1.getContentPane().setLayout() instead`'。

最好先将 JPanel 添加到 JFrame，然后将所有项目添加到 JPanel。您也只能更改 JPanel 上的布局管理器，而不是 JFrame

# macos - 绘制到 NSImage 时，我的 NSBitmapImageRep 中的像素太多

> ID：15259824
> 
> 赞同：3
> 
> 时间：2013-03-06T22:56:49.623
> 
> 标签：macos, cocoa, nsimage

我正在尝试从另一个 NSImage 的内容创建一个正好为 200 x 300 像素的 NSImage。我不只是缩放，而是从更大的图像中获取它。

生成的图像看起来就像我想要的像素。但是，数量太多了。NSImage 报告的大小为 200 x 300，图像表示报告的大小为 200 x 300，但图像表示报告的像素数是其两倍：400 x 600。当我将此图像表示保存到文件时，我得到400 x 600 的图像。

这是我的做法：

```
NSRect destRect = NSMakeRect(0,0,200,300);
NSImage* destImage = [[NSImage alloc] initWithSize:destRect.size];

// lock focus, set interpolation
[destImage lockFocus];
NSImageInterpolation oldInterpolation = [[NSGraphicsContext currentContext] imageInterpolation];
[[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationHigh];

[_image drawInRect:destRect fromRect:srcRect operation:NSCompositeCopy fraction:1.0];

[destImage unlockFocus];
[[NSGraphicsContext currentContext] setImageInterpolation:oldInterpolation];

NSData* tiffImageData = [destImage TIFFRepresentation];
NSBitmapImageRep* tiffImageRep = [NSBitmapImageRep imageRepWithData:tiffImageData]; 
```

在调试器中，您可以看到 NSBitmapImageRep 的大小正确，但像素数是其两倍。

```
po tiffImageRep
(NSBitmapImageRep *) $5 = 0x000000010301ad80 NSBitmapImageRep 0x10301ad80 Size={200, 300} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) **Pixels=400x600** Alpha=YES Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x10f353a40 
```

所以，当我将它保存到磁盘时，我得到的图像是 400 x 600，而不是 200 x 300。我该如何解决这个问题？

# ios - 在 iOS 中使用 NSNumberFormatter 进行货币转换时遇到问题

> ID：15259826
> 
> 赞同：0
> 
> 时间：2013-03-06T22:56:56.523
> 
> 标签：ios, uitextfield, nsnumberformatter, uitextfielddelegate

我有一个 UITextField 在我的应用程序中接收来自用户的数字输入。然后，在我的 shouldChangeCharactersInRange 委托方法中，使用 NSNumberFormatter 将此文本字段中的值转换为货币格式。当我输入数字“12345678”时，该数字会正确转换为 $123456.78（数字一次输入一位，到目前为止，一切正常）。但是，当我在此之后输入另一个数字（例如 9）时，不是显示“1234567.89”，而是显示数字“1234567.88”。如果我在那之后输入另一个数字，则在此之后完全不同的数字（我在应用程序中使用数字键盘输入数字。这是我拥有的代码：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
modifiedValue = [formatter stringFromNumber:[NSNumber numberWithFloat:[modifiedValue floatValue]]];
textField.text = modifiedValue; 
```

导致这种异常转换的行是这一行：

```
modifiedValue = [formatter stringFromNumber:[NSNumber numberWithFloat:[modifiedValue floatValue]]]; 
```

谁能明白这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:07:25.200

进行 string->float 转换时可能会出现舍入错误。处理货币时不应使用浮点数。你可以用 a`NSDecimalNumber`代替。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
// Below 2 lines if converting from a "currency" string
NSNumber *modifiedNumber = [formatter numberFromString:modifiedValue]; // To convert from the currency string to a number object
NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithDecimal:[modifiedNumber decimalValue]]; 
// OR the below line if converting from a non-currency string 
NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:modifiedValue];
modifiedValue = [formatter stringFromNumber:decimal]; // Convert the new decimal back to a currency string 
```

您还可以考虑使数字格式化程序宽松 - 通常有助于用户输入的数据。

```
[formatter setLenient:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:04:16.553

当我将数字转换为货币时，我通常会运行以下代码：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *text             = _textField.text;
    NSString *decimalSeperator = @".";
    NSCharacterSet *charSet    = nil;
    NSString *numberChars      = @"0123456789";

    // the number formatter will only be instantiated once ...

    static NSNumberFormatter *numberFormatter;
    if (!numberFormatter)
    {
        [numberFormatter setLocale:[NSLocale currentLocale]];
        numberFormatter = [[NSNumberFormatter alloc] init];
        numberFormatter.numberStyle           = NSNumberFormatterCurrencyStyle;
        numberFormatter.maximumFractionDigits = 10;
        numberFormatter.minimumFractionDigits = 0;
        numberFormatter.decimalSeparator      = decimalSeperator;
        numberFormatter.usesGroupingSeparator = NO;
    }

    // create a character set of valid chars (numbers and optionally a decimal sign) ...

    NSRange decimalRange = [text rangeOfString:decimalSeperator];
    BOOL isDecimalNumber = (decimalRange.location != NSNotFound);
    if (isDecimalNumber)
    {
        charSet = [NSCharacterSet characterSetWithCharactersInString:numberChars];        
    }
    else
    {
        numberChars = [numberChars stringByAppendingString:decimalSeperator];
        charSet = [NSCharacterSet characterSetWithCharactersInString:numberChars];
    }

    // remove amy characters from the string that are not a number or decimal sign ...

    NSCharacterSet *invertedCharSet = [charSet invertedSet];
    NSString *trimmedString = [string stringByTrimmingCharactersInSet:invertedCharSet];
    text = [text stringByReplacingCharactersInRange:range withString:trimmedString];

    // whenever a decimalSeperator is entered, we'll just update the textField.
    // whenever other chars are entered, we'll calculate the new number and update the textField accordingly.

    if ([string isEqualToString:decimalSeperator] == YES) 
    {
        textField.text = text;
    }
    else 
    {
        NSNumber *number = [numberFormatter numberFromString:text];
        if (number == nil) 
        {
            number = [NSNumber numberWithInt:0];   
        }
        textField.text = isDecimalNumber ? text : [numberFormatter stringFromNumber:number];
    }

    return NO; // we return NO because we have manually edited the textField contents.
} 
```

解释这一点的链接是[Re-Apply currency formatting to a UITextField on a change event](https://stackoverflow.com/questions/2388448/re-apply-currency-formatting-to-a-uitextfield-on-a-change-event)

希望这有效！

# arrays - 如何在随机位置找到数组的值？

> ID：15259827
> 
> 赞同：0
> 
> 时间：2013-03-06T22:56:57.123
> 
> 标签：arrays, random, unity3d, unityscript

我有一个要随机化的对象数组，我想知道如何使用 Debug.log 在数组中找到随机位置的数据？这主要是为了让我知道它是否工作正常。

我的代码：

```
 while(Deck.length != suffledDeck.length)
    {       
        var ranNum = Random.Range(1,Deck.length);

        suffledDeck.Add(Deck[ranNum]);

        Debug.Log(suffledDeck[ranNum]);

        //Debug.Log(suffledDeck[ranNum]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:28:32.593

您可以使用此函数对数组进行洗牌：

```
//@ http://jsfromhell.com/array/shuffle [v1.0]
function shuffle(o){ //v1.0
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};
deck = shuffle(deck); 
```

之后，您可以正常访问您的阵列。

# c# - 如何以编程方式获取渲染内容？

> ID：15259830
> 
> 赞同：12
> 
> 时间：2013-03-06T22:57:12.860
> 
> 标签：c#, sitecore, sitecore6

我正在尝试编写一种方法，该方法将为碰巧存在于特定占位符中的任何渲染输出内容（即 HTML）。目标是传递一个`Sitecore.Data.Items.Item`和我感兴趣的占位符键，并且该方法应该返回呈现的内容。

这个问题似乎是没有建立页面上下文，因此调用会在 Sublayout`RenderControl()`的方法中引发空引用错误。`GetCacheKey()`

有人知道以编程方式呈现子布局或 XSLT 呈现的方法吗？

这是我到目前为止所得到的：

```
private string GetPlaceholderContent(Item item, string placeHolder)
{
    StringWriter sw = new StringWriter();
    using (HtmlTextWriter writer = new HtmlTextWriter(sw))
    {
        foreach (RenderingReference renderingReference in item.Visualization.GetRenderings(Sitecore.Context.Device, false))
        {
            if (renderingReference.Placeholder == placeHolder)
            {
                // This ensures we're only dealing with Sublayouts
                if (renderingReference.RenderingItem.InnerItem.IsOfType(Sitecore.TemplateIDs.Sublayout))
                {
                    var control = renderingReference.GetControl();
                    control.RenderControl(writer); // Throws null reference error in GetCacheKey()
                }
            }
        }
    }

    return sw.ToString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-12T16:18:00.037

自最初提出问题以来已经将近 8 年了，现在它变成了[Uniform](https://uniform.dev/uniform-for-sitecore) - 渲染任何项目/占位符片段！

是的，它将您提供的项目切割成占位符/渲染：

[![在此处输入图像描述](../Images/77109e38feaa1f92bd033f39bb47a219.png)](https://i.stack.imgur.com/E5lCO.jpg)

下一步是生成标记（针对每个可能的数据源）：

[![在此处输入图像描述](../Images/a673b13f6e4453cfcd7d4e01ef7d1fa6.png)](https://i.stack.imgur.com/6SJ4v.png)

该内容发布到 CDN 中，浏览器选择要加载的版本 = 个性化有效！

换句话说，您提出的问题变成了一种尖端产品，**可以在此基础上做更多**事情！

您可以对 Uniform 程序集进行逆向工程，以查看它们实际上是如何做到的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:30:45.857

在我看来，以编程方式呈现子布局的最佳方式是使用中继器，并`<sc:Sublayout>`在`<ItemTemplate>`.

从那里您只需执行以下一项或两项操作：

1.  将 的`DataSource`属性设置`<sc:Sublayout>`为所需项目的 GUID 的字符串表示形式（即子布局的数据源，如果有）

2.  将 的`Path`属性设置`<sc:Sublayout>`为要渲染的子布局的路径。

服务器/站点核心将处理其余部分。

# dialog - Pyside 代码不显示任何内容

> ID：15259832
> 
> 赞同：0
> 
> 时间：2013-03-06T22:57:31.957
> 
> 标签：dialog

请有人告诉我为什么这段代码似乎确实有效。那就是至少显示一个对话框。

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *

class Form(QDialog):
def _init_(self,parent = None):
    super(Form , self).__init__(parent)

    self.numberLabel1 = QLabel("first Number")
    self.numberLabel2 = QLabel("Second Number")
    self.txtField1 = QLineEdit() 
    self.txtField2 = QLineEdit()
    self.btnSum = QPushButton("Sum")
    self.resultKeep = QLabel()

    grid = QGridLayout()

    grid.addWidget(self.numberLabel1,0,0) 
    grid.addWidget(self.txtField1,0,1)
    grid.addWidget(self.numberLabel2,1,0)
    grid.addWidget(self.txtField2,1,1)
    grid.addWidget(self.resultKeep,0,2)
    grid.addWidget(self.btnSum,0,3)
    self.setLayout(grid)
if __name__ == '__init__'    :   
    app = QApplication(sys.a`enter code here`rgv)
    form = Form()
    form.show()        
    #sys.exit(app.exec_()) 
```

# c# - 创建类似于消息框的窗口，一旦关闭窗口，代码将继续运行

> ID：15259839
> 
> 赞同：2
> 
> 时间：2013-03-06T22:57:49.350
> 
> 标签：c#, wpf

我想在主线程上创建一个窗口，使其表现得像`messagebox`窗口。换句话说，我正在寻找类似的东西：

```
var myView = new Views.MyWindow();
myView.Show(); // I want to wait here until myView is closed?

// continue execution once myView is closed 
```

我知道我可以创建一个信号量来实现这一点，并让另一个窗口在关闭后释放信号量，但是消息框窗口如何在同一个线程上做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:59:22.343

你必须使用[`ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk%28v=vs.80%29.aspx)而不是`Show()`

引用 MSDN：

> 调用此方法时，它后面的代码要等到对话框关闭后才会执行。

该`ShowDialog()`方法返回一个`bool?`对象。使用它，您将能够知道用户是否刚刚关闭了窗口、单击了`Accept`按钮等：

```
var result = myView.ShowDialog();
if (result) {
    //do something here...
} 
```

# c++ - 有效地建立总面积表

> ID：15259842
> 
> 赞同：1
> 
> 时间：2013-03-06T22:58:00.000
> 
> 标签：c++, visual-c++, image-processing, sse

我正在尝试构建一个总面积表，以供以后在自适应阈值例程中使用。由于此代码将用于时间关键型软件，因此我试图从中挤出尽可能多的周期。

出于性能考虑，该表是每个像素的无符号整数。

当我附加我的分析器时，我表明我最大的性能瓶颈发生在执行 x-pass 时。

计算的简单数学表达式是：

```
sat_[y * width + x] = sat_[y * width + x - 1] + buff_[y * width + x]
where the running sum resets at every new y position. 
```

在这种情况下，`sat_`是表示 SAT 的无符号整数的一维指针，并且`buff_`是 8 位无符号单色缓冲区。

我的实现如下所示：

```
uint *pSat = sat_;
char *pBuff = buff_;

for (size_t y = 0; y < height; ++y, pSat += width, pBuff += width)
{
    uint curr = 0;
    for (uint x = 0; x < width; x += 4)
    {
        pSat[x + 0] = curr += pBuff[x + 0];
        pSat[x + 1] = curr += pBuff[x + 1];
        pSat[x + 2] = curr += pBuff[x + 2];
        pSat[x + 3] = curr += pBuff[x + 3];
    }
} 
```

循环是手动展开的，因为我的编译器 (VC11) 没有为我做这件事。我遇到的问题是整个分段例程花费大量时间来运行该循环，我想知道是否有人对什么可以加快它有任何想法。我可以访问所有 SSE 的集合，以及运行该例程的任何机器的 AVX，所以如果那里有什么东西，那将非常有用。

此外，一旦我挤出最后一个周期，我就计划将其扩展到多核，但我希望在使模型更复杂之前让单线程计算尽可能紧凑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:15:53.850

你有一个依赖链沿着每一行运行；每个结果都取决于前一个结果。所以你不能在那个方向矢量化/并行化。

但是，听起来每一行都独立于所有其他行，因此您可以通过同时计算多行来进行矢量化/并行化。您需要转置数组，以允许向量指令访问内存中的相邻元素。^*

但是，这会产生一个问题。从缓存的角度来看，沿着行走现在绝对是可怕的（每次迭代都是缓存未命中）。解决这个问题的方法是交换循环顺序。

但请注意，每个元素都被精确读取一次。而且您对每个元素的计算量很少。因此，在达到 100% CPU 使用率之前，您基本上会受到主内存带宽的限制。

* * *

[* 这个限制可能会在 AVX2 中解除，我不确定...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:29:53.390

从算法上讲，我认为您无法做任何事情来进一步优化它。尽管您在描述中没有使用术语 OLAP 多维数据集，但您基本上只是在构建一个 OLAP 多维数据集。您拥有的代码是构建 OLAP 多维数据集的标准方法。

如果您提供有关您正在使用的硬件的详细信息，则可能有一些可用的优化。例如，有一种 GPU 编程方法可能会更快，也可能不会。注意：该线程上的另一篇文章提到并行化是不可能的。这不一定是真的......您的算法不能并行实现，但有些算法可以保持数据级并行性，可以通过 GPU 方法加以利用。

# api - 如何构建 REST 资源层次结构？

> ID：15259843
> 
> 赞同：22
> 
> 时间：2013-03-06T22:58:04.153
> 
> 标签：api, rest, uri, restful-url, restful-architecture

我是服务器端 Web 开发的新手，最近我阅读了很多关于实现 RESTful API 的内容。我仍然坚持的 REST API 的一个方面是如何构建 URI 层次结构，以识别客户端可以与之交互的资源。具体来说，我一直在决定层次结构的详细程度以及在资源由其他资源类型组成的情况下该怎么做。

这是一个例子，希望能说明我的意思。想象一下，我们有一个 Web 服务，可以让用户从其他用户那里购买产品。所以在这个简单的例子中，有两个顶级资源**users**和**products**。下面是我开始构建 URI 层次结构的方法，

**对于用户：**

```
/users
      /{id}
           /location
           /about
           /name
           /seller_rating
           /bought
           /sold 
```

**对于产品：**

```
/products
         /{id}
              /name
              /category
              /description
              /keywords
              /buyer
              /seller 
```

在这两种情况下，每个层次结构中的对象都引用另一个层次结构中对象的子集。例如`/users/{id}/bought`，某个用户已购买的产品列表，它是`/products`. 此外，`/products/{id}/seller`引用销售特定产品的用户。

由于这些 URI 引用其他对象或其他对象的子集，API 是否应该支持这样的事情：`/users/{id}/bought/id/description`和`/products/{id}/buyer/location`？因为如果支持这些类型的 URI，有什么办法阻止这样的事情`/users/{id}/bought/{id}/buyer/bought/{id}/seller/name`，或者同样令人费解的事情？此外，在这种情况下，由于服务器中的路由器必须解释任意长度的 URI，您将如何处理路由？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-08T23:26:05.957

目标是构建方便的资源标识符，不要尝试交叉引用所有内容。您不必在 URL 表示中重复您的数据库关系 :)

像这样的链接`/product/{id}/buyer`永远不应该存在，因为该资源已经有了标识符：`/user/{id}`

尽管可以拥有，`/product/{id}/buyers-list`因为买家列表是产品的属性，在其他情况下不存在。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T23:37:34.097

您应该以 CRUD 方式来考虑它，其中每个实体都支持 Create、Read、Update 和 Delete（通常分别使用 GET、POST、PUT 和 DELETE HTTP 动词）。

这意味着您的端点通常只会深入一层。例如

用户

```
GET    /users       - Return a list of all users (you may not want to make this publically available)
GET    /users/:id   - Return the user with that id
POST   /users      - Create a new user. Return a 201 Status Code and the newly created id (if you want)
PUT    /users/:id   - Update the user with that id
DELETE /users/:id  - Delete the user with that id 
```

进入更多细节，例如`/users/:id/about`可能没有必要。虽然它可能会起作用，但它可能会变得有点过于具体。

也许在您的情况下，您可以添加：

```
GET    /users/:id/bought - Array of products that the user bought
GET    /users/:id/sold   - Array of products that the user sold 
```

您可以在其中返回一个 id 列表（可以通过 products API 获取），或者如果您愿意，您可以在将它们发回之前填充产品。如果您确实选择填充它们，那么您可能不应该填充每个产品引用的用户。这将导致循环包含并且是错误的。

对于产品，在您的情况下，我会使用：

```
GET    /products- Return a list of all products
GET    /products/:id   - Return the products with that id
POST   /products- Create a new product. Return a 201 Status Code and the newly created id (if you want)
PUT    /products/:id   - Update the product with that id
DELETE /products/:id  - Delete the product with that id

GET    /products/:id/buyers     - Array of who bought the product
GET    /products/:id/sellers    - Array of everyone selling the product 
```

# php - PHP 最佳实践：给定的参数是否应该始终具有一致的类型？

> ID：15259844
> 
> 赞同：3
> 
> 时间：2013-03-06T22:58:13.033
> 
> 标签：php, types, parameters

我有一个接受`checkGlossary`bool 参数和可选`glossary`数组的函数。
他们的状态直接联系在一起。如果 bool 为 FALSE，则*永远*
不需要 词汇表，反之，如果 bool 为 TRUE，则*始终*需要词汇表。

 **对我来说，这似乎可以很容易地简化为：

```
// Current
function doSomething($param1, $param2, $checkGlossary=FALSE, $glossary=NULL){
    // blah blah blah
    if($checkGlossary)
        array_search($glossary[$param2]);
    // etc etc etc
} 
```

... 到：

```
// Proposed
function doSomething($param1, $param2, $glossary=FALSE){
    // blah blah blah
    if($glossary)
        array_search($glossary[$param2]);
    // etc etc etc
} 
```

我唯一的犹豫是`$glossary`（*bool*或*array*）的类型是不可预测的。
只要我不违反一些*最佳实践*指南，它就不会打扰我。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:00:38.873

您可以使用[`is_array()`](http://www.php.net/manual/en/function.is-array.php)and[`is_bool()`](http://www.php.net/manual/en/function.is-bool.php)来检查它的类型！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T07:04:19.083

使用 PHP 称为数据类型的函数参数总是一个坏主意`mixed`。它需要在函数中添加额外的代码来检查参数的类型，显然它会变得非常混乱。

在您的特殊情况下，最简单的解决方案可能是使用数组长度作为是否使用词汇表代码的指标。您需要一种方法来声明不应使用词汇表数组。所以你应该问自己：什么时候使用词汇表是没有意义的？当然是空的时候。因此，我建议您摆脱该标志并将`array()`其他参数定义为默认值：

```
function doSomething($param1, $param2, $glossary=array()) {
    if (count($array) > 0) {
        // do your glossary code here
    }
    // all the other stuff goes here
} 
```

对我来说，这在语义上似乎是正确的并且工作得很好。

我不知道你在那里构建什么，但另一种解决方案是将它们全部放入一个类中并将词汇表作为实例变量。如果您可以在多个函数调用中使用词汇表。它大致看起来像这样：

```
 public class SomeAccurateClassName {
     private $glossary = array();

     function setGlossary(array $glossary) {
         $this->glossary = $glossary;
     }

     function doSomething($param1, $param2) {
         if (count($array) > 0) {
             // do your glossary code here
         }
         // all the other stuff goes here
     }
 } 
```

考虑到您基本上有一个状态（使用词汇表或不使用词汇表），将其封装在一个类中可能是个好主意。**

# linux - Git、Windows、Linux 和 NTFS：“索引文件打开失败”

> ID：15259848
> 
> 赞同：1
> 
> 时间：2013-03-06T22:58:37.433
> 
> 标签：linux, windows, git, ntfs

我在 Windows 7 的 NTFS 分区上创建了一个 git repo，在 Linux（Ubuntu 12 x64，双启动设置）中打开它时`index file open failed`出现错误。我怎样才能找出问题所在？该分区以读写方式安装，我从未遇到任何其他问题。git 是否以 Windows 与 Linux 的不同格式存储数据，我需要进行克隆或一些转换？我真的很希望能够在两个操作系统中处理同一个 repo 而无需克隆......

澄清：在*.git*`cat: index: Input/output error` 目录中运行命令时，我也得到了，所以这是一个与 NTFS 相关的问题......但在以跨系统方式使用 git 并且我已经运行其他应用程序之前，我从来没有遇到过它NTFS 部分和复制的文件...`cat index`

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:21:59.397

您的 Linux NTFS 驱动程序已损坏，或者您的文件系统损坏，或两者兼而有之。重新启动到 Windows 并运行磁盘检查实用程序，然后查看完成后的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:18:24.473

该`.git/index`文件是一个二进制文件，它描述了当前的工作目录。也许 a`git fsck`能够修复它（将你拥有的那个移开，以确保它在你闲逛时不会丢失，或者对存储库的副本进行任何经验）。您可能会尝试在本地克隆存储库，克隆可能会获得文件的良好副本，然后您可以将其复制到损坏的文件上。

可能是权限问题？备份相关内容，对驱动器进行碎片整理，运行硬件检查（可能是损坏/损坏的磁盘！）。*

# mysql - 为什么 MySQL 导入比导出慢？

> ID：15259854
> 
> 赞同：0
> 
> 时间：2013-03-06T22:59:29.400
> 
> 标签：mysql, mysqldump, mysqlimport

我刚刚从命令行使用**mysqldump**导出了一个 150 MB 的表。导出它大约需要 5 秒钟。

但是，当我尝试导入同一个文件时，最多需要 5 分钟。

为什么进口比出口慢，有没有办法加快速度？我需要导出/导入大于 1 GB 的表。

它与锁有关系吗？由于 select 正在读取数据，因此导出它会更快，而 import 正在写入数据并且可能会更慢，因为它需要写锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:10:00.727

读取比在 DBMS 中写入要简单得多。那是在您考虑事务日志之前。例如，您必须写入数据行；您还必须更新新行所在的表上的所有索引。这意味着每条书面记录不仅仅是一个 I/O。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:15:34.570

在几乎任何媒介上，写作都比阅读慢。在 DBMS 中，必须维护索引，必须检查约束，必须分配空间，必须遵守事务边界，必须进行事务日志记录以便回滚工作，......

# eclipse - 是否有用于在 Eclipse 中停止当前控制台的键盘快捷键？

> ID：15259857
> 
> 赞同：1
> 
> 时间：2013-03-06T22:59:35.640
> 
> 标签：eclipse, debugging, keyboard-shortcuts

我正在开发一个包含 main 类的 Java 应用程序。我可以使用随后启动应用程序，可以通过点击选择运行历史记录中第一项的菜单选项`Ctrl+Alt+X J`来重新运行应用程序。`Alt+R T Enter`

但要**停止**应用程序，我必须单击控制台视图中的红色小方块。这很烦人，因为它迫使我使用鼠标，`Alt+R T Enter`然后再次使用鼠标重新聚焦编辑器。

Eclipse 是如此可配置，必须有一个键盘快捷键来停止应用程序在我还没有找到的当前控制台中运行。在调用**中有**一个条目，但无论我分配什么绑定或设置什么条件，无论我是否使用调试透视图，它们似乎都不会触发。`Window > Preferences > Keys``Terminate``Terminate and Relaunch``when`

请帮助 Eclipse 新手避开鼠标 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:28:57.940

转到首选项 -> 常规 -> 键

找到“终止”将您的绑定设置为您想要的任何内容。

然后将“When”从“Debugging”更改为“Editing Java Source”。

# mysql - MySQL表中的地址搜索

> ID：15259859
> 
> 赞同：1
> 
> 时间：2013-03-06T22:59:43.907
> 
> 标签：mysql, sql, search, database-design

我有一个包含五百万个地址作为字符串的表。有一个用户界面允许您按地址搜索，它以最简单的方式实现 -`LIKE`在搜索字符串的两端使用带有通配符的语法。然而，这种方法真的很慢（特别是当搜索结果必须按某些标准排序时）。我想使用全文搜索，因为它会更快，但它限制了用户，我不想要它，因为大多数搜索查询只包含单词的一部分。地址也可以缩写。

我能做些什么？如何在不牺牲大部分用户体验的情况下实现地址搜索以提高效率。

**编辑**`match against`我刚刚读到，在执行全文搜索 时，我实际上可以在字符串末尾使用通配符。因此，如果我存储反向地址，也许我可以进行前缀通配符全文搜索。但它会更快吗？多少？有一些基准吗？我找不到一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:13:30.530

您可能想查看[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。SQL 中的`LIKE`运算符效率非常低，尤其是当您有那么多记录时。

# android - 如何处理我的应用程序没有互联网的问题？

> ID：15259860
> 
> 赞同：0
> 
> 时间：2013-03-06T22:59:44.073
> 
> 标签：android, error-handling, connection, google-maps-android-api-2

我的应用程序需要 Internet 从我的数据库中检索数据。此外，它使用谷歌地图作为主要活动。我发现每当我在没有互联网连接的情况下测试它时，屏幕都会变黑然后就崩溃了。当我没有互联网时，我应该如何在我的代码中处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:14:15.600

试试这个.......

```
public boolean isNet()
 {
     boolean status=false;
     String line;
     try
     {
         URL url = new URL("http://www.google.com");
         BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
         while(( line = reader.readLine()) != null) 
         {
         }
         status=true;
    }
    catch (IOException ex)
    {
        System.out.println("ex in isNet : "+ex.toString());
        if(ex.toString().equals("java.net.UnknownHostException: www.google.com"))
            status=false;
    }
    catch(Exception e)
    {

    }
    return status;
 }

if(status==true)
            {
            //Do your operation
            }
            else
                show("No Internet Connection."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:01:59.623

您可以检查互联网连接：

```
public boolean isOnline() 
{
    //Getting the ConnectivityManager.
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    //Getting NetworkInfo from the Connectivity manager.
    NetworkInfo netInfo = cm.getActiveNetworkInfo();

    //If I received an info and isConnectedOrConnecting return true then there is an Internet connection.
    if (netInfo != null && netInfo.isConnectedOrConnecting()) 
    {
        return true;
    }
    return false;
} 
```

如果互联网连接不可用，则向用户显示一条消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:51:47.163

这个问题已经回答过几次了，试试这些：

[Android - 如何检查互联网访问，而不仅仅是连接到 wifi？](https://stackoverflow.com/questions/9861182/android-how-to-check-internet-access-not-just-connectivity-to-wifi)

[检查android上的互联网连接](https://stackoverflow.com/questions/4086159/checking-internet-connection-on-android)

# jquery - slideDown Jquery CSS 设置？

> ID：15259862
> 
> 赞同：0
> 
> 时间：2013-03-06T22:59:46.800
> 
> 标签：jquery, css, drop-down-menu, navigation, slidedown

好的，所以我有一个菜单，我想从另一个菜单下面滑下来。我不确定我是否正确设置了 jQuery。我将发布设计的图片链接。

[导航设置设计](http://img.photobucket.com/albums/v88/Nesso/ScreenShot2013-03-06at44128PM_zpsae8db47c.png)

我所拥有的是头部的一部分，全部包含在 div 中，而没有。显示的菜单下方有一个菜单（底部的浅灰色部分），它包含在另一个 div (#subMenu) 中用于查询。基本上，我希望下面的那个向下滑动并通过单击图像中显示的顶部菜单上的链接来显示自己。

下面的菜单通过 z-index 和相对论分层并定位在页面上。它被命名为#SubMenu，高 60px，查询设置如下：

```
$(document).ready(function()){
//build a var to target #subMen div
var menu = $j('#subMenu')
//use click from link id
$('#menu-item-47').click(function(event){
    event.preventDefault();
    //if the menu is visible slide it up
    if (menu.is(":visible"))
        {
            menu.slideUp(50);
            $(this).removeClass("open");
        }
        //otherwise, slide menu down
        else
        {
            menu.SlideDown(50);
            $(this).addClass("open");
        }
});

}); 
```

然而，在 wordpress 中插入和设置后，单击链接后我没有得到任何效果。我可能在 wordpress 中安装它是错误的，但我宁愿从一开始就解决问题。因为如果代码设置错误，那就没有意义了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:01:53.643

你有一个错字`slideDown`。

此外，您应该使用`jQuery`而不是`$`因为 WP`.noConflict()`默认使用。

# vim - Vundle 插件：安装插件的具体版本

> ID：15259868
> 
> 赞同：2
> 
> 时间：2013-03-06T23:00:16.913
> 
> 标签：vim, vim-plugin

我使用 vim 并尝试使用“Vundle”。它有助于安装像 Ruby on Rails 这样的插件：

```
Bundle 'scrooloose/nerdtree'
Bundle 'scrooloose/nerdcommenter'  
             ... I write in my _vimrc file 
```

但是当我看到时，它会从 github 安装这个插件的最新版本。但我想安装以前的版本之一。谁知道怎么做我想做的事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T23:13:31.973

我认为 Vundle 不允许您指定 repo ref。我认为你可以解决这个问题。Vundle 假设你想要主人的脑袋，所以创建你自己的 fork 来控制版本。

换句话说，fork 插件 repo，将 master 分支重置为您想要的版本，然后在`.vimrc`

```
Bundle '<your username>/nerdcommenter' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-30T19:43:44.943

您可以通过 vundle 安装特定版本。不知何故。

*   首先正常安装你的包。
*   然后，转到捆绑目录（例如`cd ~/.ssh/bundle/nerdtree`）并签出您需要的版本：`git checkout <thecommithash-or-release>`.

多田！

您永远无法通过 vundle 更新 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T11:02:02.360

还有一个被遗忘的拉取请求，允许安装特定的插件版本：[https](https://github.com/VundleVim/Vundle.vim/pull/681) ://github.com/VundleVim/Vundle.vim/pull/681 ，语法：

```
Plugin 'kien/ctrlp.vim', {'version': '1.79'} 
```

这证实了从 Vimscript 内部是不可能的。惭愧，这个功能是必须的.​​..

TODO 列表中的[当前 README](https://github.com/VundleVim/Vundle.vim/tree/b255382d6242d7ea3877bf059d2934125e0c4d95)中也提到了这一点：

> 允许指定修订/版本？

# machine-learning - liblbfgs 在 C++ 中编译

> ID：15259875
> 
> 赞同：1
> 
> 时间：2013-03-06T22:47:38.973
> 
> 标签：machine-learning, optimization, c++

有没有人尝试过使用 liblbfgs 提供的 LBFGS 包编译*程序*。我相信它是一个流行的[包](http://www.chokkan.org/software/liblbfgs/)。我似乎无法使用以下命令编译示例程序：

`g++ sample.cpp -o sample`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T20:19:22.320

文森特在评论中给出的答案解决了链接错误的问题

```
 g++ sample.cpp -o sample -llbfgs 
```

供参考。这有助于构建 crfsuite 包

# windows-phone-8 - Windows Phone 8 本地化字符串变量

> ID：15259877
> 
> 赞同：1
> 
> 时间：2013-03-06T23:01:04.670
> 
> 标签：windows-phone-8, localization

我对 Windows Phone 开发相当陌生，并且在尝试将我的应用程序本地化为几种不同的语言时遇到了障碍。我正在使用每种语言的 AppResources.resx 来本地化静态字符串，但是我似乎无法弄清楚如何本地化动态创建的字符串变量。例如...

字符串日期 = DateTime.Now.ToString("MMMM dd");

这将返回“3 月 6 日”。但是当设备的语言设置为西班牙语时，我想显示“6 de Marzo”而不是“March 6”。关于如何去做这件事的任何想法？只需要指出正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:05:03.403

不确定它是否也存在于 WinPhone8 中，但您可以尝试使用

```
string date = DateTime.Now.ToString(CultureInfo.CurrentCulture.DateTimeFormat.MonthDayPattern); 
```

# git - 两个主存储库的最简单策略

> ID：15259879
> 
> 赞同：1
> 
> 时间：2013-03-06T23:01:09.533
> 
> 标签：git

我有以下情况：

*   第三方 github 仓库
*   第三方仓库的本地克隆
*   个人远程，在本地克隆中推送更改

个人遥控器*不在*github 中。

我希望能够做三件事：

1.  在分支（我们称之为`testing`）中对本地仓库进行更改
2.  从原始远程拉到主分支
3.  将`testing`分支推送到我的个人遥​​控器（用于备份）

我不确定如何将个人遥控器添加到我的本地克隆中，以便原始遥控器仍然可以使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:41:33.147

`git remote add personal git://url.to.your.personal.repository`会让你添加你的遥控器。您可以使用`git push personal testing`. 您原来的遥控器应该不受影响。`git remote`、和其他命令的手册页`git push`应该可以帮助您找出您可能想要对遥控器执行的其他操作。通常它归结为如果没有选择默认值，或者如果您想在默认值以外的遥控器上操作，则指定要对哪个遥控器执行操作。

# php - 如何在这个多维 php 数组中获取这些特定值？

> ID：15259881
> 
> 赞同：0
> 
> 时间：2013-03-06T23:01:15.643
> 
> 标签：php, arrays, multidimensional-array

这可能是一个愚蠢的问题，但是如何从使用“print_r”后显示以下内容的多维数组中返回值“ESEAX”、“EAIIX”等？

```
Array ( 
[ESEAX] => Array ( ) 
[EAIIX] => Array ( ) 
[EANAX] => Array ( ) 
[EATVX] => Array ( ) 
[EVBAX] => Array ( ) ) 
Array ( 
[ESEAX] => Array ( ) 
[EAIIX] => Array ( ) 
[EANAX] => Array ( ) 
[EATVX] => Array ( ) 
[EVBAX] => Array ( ) ) 
```

我尝试在不同的地方使用索引（即：[0]），并嵌套了 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:04:53.053

如果您只关心每个数组的键，您可以使用`array_keys`. IE：

```
$arr = Array ( 
"ESEAX" => Array () 
"EAIIX" => Array () 
"EANAX" => Array () 
"EATVX" => Array () 
"EVBAX" => Array ()) 

$arr = array_keys($arr); 
```

将产生一个数组，如：

```
Array (
"ESEAX",
"EAIIX",
"EANAX",
"EATVX",
"EVBAX"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:04:45.197

该`array_keys`功能应该做你想做的事。 [http://www.php.net/manual/en/function.array-keys.php](http://www.php.net/manual/en/function.array-keys.php)

# ruby - grep -e 在 solaris 中抱怨 (/usr/xpg4/bin/grep)

> ID：15259882
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:01:21.197
> 
> 标签：ruby, shell, solaris

我在 ruby​​ 脚本中有一个简单的 shell 命令。

```
command="cat file_name | grep -e 'text1 text2.*'" 
```

它在 AIX 和 Linux 上运行良好，但在 SOLARIS 上失败。我试图查看它使用的是哪个 grep，它返回`/usr/xpg4/bin/grep`的结果对我来说看起来不错。请让我知道还有什么可能导致问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:25:48.560

在 Solaris 上，我建议一定要使用 GNU grep。（因为您热衷于使用 -e 选项）

如果您使用的是**Solaris 10**：默认情况下会安装 GNU grep，但它可能不是 PATH 的一部分，因为它存在于`/usr/sfw/bin`. 二进制文件的名称是`ggrep`.

如果您使用的是**Solaris 11**：GNU grep 默认安装在全局区域上，但默认情况下不会进入本地区域。如果已安装，它将已经在您的 PATH 中，但就像在 Solaris 10 上一样，它被称为`ggrep`. 如果未安装，则只需执行`pkg install gnu-grep`.

要使您的脚本可移植，您可以在脚本的开头执行以下操作：

```
# Default values
GREP=grep
EGREP=egrep

if [ `uname` == "SunOS" ]; then
  GREP=ggrep
  EGREP=gegrep
fi 
```

.. 然后在脚本中的任何地方，当你想执行'grep'时，你都会引用 $GREP 等等。

# google-maps - Google 静态地图 API：JavaScript 中的 URL 签名

> ID：15259885
> 
> 赞同：10
> 
> 时间：2013-03-06T23:01:32.040
> 
> 标签：google-maps, google-static-maps

如何**在 JavaScript 中生成有效签名**，我确实有业务密钥和客户端 ID，但无法继续进行静态映射 api 有效 url 签名，因为我正在使用 JavaScript 调用此 API 并希望发送签名和客户端 ID 以获得完整利用我的使用限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-11T13:45:19.013

这是 Google 在其[文档](https://developers.google.com/maps/documentation/maps-static/get-api-key#dig-sig-key)中提供的用于签署静态地图 URL 的示例 Javascript (node.js) 代码的链接：

[https://github.com/googlemaps/url-signing/blob/gh-pages/urlSigner.js](https://github.com/googlemaps/url-signing/blob/gh-pages/urlSigner.js)

我已经将这段代码变成了[gmaps-url-signer](https://www.npmjs.com/package/gmaps-url-signer)节点/npm 模块。这是您可以使用它使用 gmaps-url-signer 库对静态地图 URL 进行签名的方法：

```
const urlSigner = require('gmaps-url-signer');

const key = 'my_google_api_key';
const secret = 'my_static_maps_secret';
const domain = 'http://maps.googleapis.com';

// Path to your static map
let path = '/maps/api/staticmap?zoom=2&scale=1&size=350x250&maptype=terrain&format=png&visual_refresh=true';
path += `&key=${key}`;

console.log('Full signed URL:');
console.log(domain + urlSigner.sign(path, secret)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-16T23:14:30.700

## [Google 的 URL 签名示例](http://googlemaps.github.io/url-signing/index.html)

包括以下语言的示例，包括 Node/JS：

*   Python
*   爪哇
*   节点/JS
*   PHP
*   C＃
*   Perl
*   红宝石
*   VB.NET
*   Objective-C

对于 Node/JS，它看起来像这样：

```
'use strict'

const crypto = require('crypto');
const url = require('url');

/**
 * Convert from 'web safe' base64 to true base64.
 *
 * @param  {string} safeEncodedString The code you want to translate
 *                                    from a web safe form.
 * @return {string}
 */
function removeWebSafe(safeEncodedString) {
  return safeEncodedString.replace(/-/g, '+').replace(/_/g, '/');
}

/**
 * Convert from true base64 to 'web safe' base64
 *
 * @param  {string} encodedString The code you want to translate to a
 *                                web safe form.
 * @return {string}
 */
function makeWebSafe(encodedString) {
  return encodedString.replace(/\+/g, '-').replace(/\//g, '_');
}

/**
 * Takes a base64 code and decodes it.
 *
 * @param  {string} code The encoded data.
 * @return {string}
 */
function decodeBase64Hash(code) {
  // "new Buffer(...)" is deprecated. Use Buffer.from if it exists.
  return Buffer.from ? Buffer.from(code, 'base64') : new Buffer(code, 'base64');
}

/**
 * Takes a key and signs the data with it.
 *
 * @param  {string} key  Your unique secret key.
 * @param  {string} data The url to sign.
 * @return {string}
 */
function encodeBase64Hash(key, data) {
  return crypto.createHmac('sha1', key).update(data).digest('base64');
}

/**
 * Sign a URL using a secret key.
 *
 * @param  {string} path   The url you want to sign.
 * @param  {string} secret Your unique secret key.
 * @return {string}
 */
function sign(path, secret) {
  const uri = url.parse(path);
  const safeSecret = decodeBase64Hash(removeWebSafe(secret));
  const hashedSignature = makeWebSafe(encodeBase64Hash(safeSecret, uri.path));
  return url.format(uri) + '&signature=' + hashedSignature;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T17:11:17.270

Google 不建议使用 JavaScript 对 URL 进行签名，因为它会将加密密钥暴露给用户。

您可以在此链接中看到：

[https://developers.google.com/maps/documentation/business/faq#signature_jses](https://developers.google.com/maps/documentation/business/faq#signature_jses)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T04:00:04.360

如果你的意思是你有一个 Javascript 服务器（NodeJS/Meteor）并且想要获取签名的 URL，我使用这个包。

[https://github.com/temsa/qs-google-signature](https://github.com/temsa/qs-google-signature)

# android - 锁屏前的活动

> ID：15259892
> 
> 赞同：2
> 
> 时间：2013-03-06T23:02:05.387
> 
> 标签：android, android-activity, lockscreen, keyguard

我想在锁屏前创建一个活动。我不想完全跳过键盘保护。我用 TYPE_SYSTEM_OVERLAY 标志尝试了它，但我无法处理任何事件。它与 FLAG_SHOW_WHEN_LOCKED 一起使用，但是有一个黑色背景，我希望它像这张图片一样：

没有黑色背景和事件处理的 Activity [http://s1.directupload.net/images/130306/sctc586t.jpg](http://s1.directupload.net/images/130306/sctc586t.jpg)

如果它像 TYPE_SYSTEM_OVERLAY 但带有事件处理，那就太好了。那可能吗？我读到 TYPE_SYSTEM_OVERLAY 无法获取任何事件，但是否有其他选项可以在锁屏前设置活动？也许有根权限？它应该看起来像在图片中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:29:58.537

为避免黑色背景，请尝试使用半透明主题。在您的清单（活动或应用程序）使用`android:theme="android:style/Theme.Translucent"`

还有一种方法可以为来自不同制造商的某些设备的锁屏创建小部件，据我所知 HTC 开发者页面有这样的工具，但我从未测试过，恐怕只适用于感应设备。

如果您只对设备感兴趣，您还可以查看您的制造商开发者页面！

**编辑：**

其他相关网站：

1.  [Android 锁屏小工具](https://stackoverflow.com/questions/4116001/android-lock-screen-widget)
2.  4.2的特点：http: [//developer.android.com/about/versions/android-4.2.html#Lockscreen](http://developer.android.com/about/versions/android-4.2.html#Lockscreen)

# ruby-on-rails - 使用 postgres 让 webrick 服务器在 80 端口上运行

> ID：15259896
> 
> 赞同：1
> 
> 时间：2013-03-06T23:02:25.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

当我尝试在端口 80 上运行 webrick 时出现 postgres 错误，如下所示：

`rvmsudo rails s -p 80`

然后我得到这个错误：

```
Users/user/.rvm/gems/ruby-1.9.3-p194@app/gems/activerecord-3.2.12/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize': FATAL:  role "root" does not exist (PG::Error) 
```

加上更多的堆栈跟踪。

我尝试将我的用户更改为`root`在 database.yml 中，但没有运气。有什么建议么？

编辑：尝试在本地运行，而不是用于生产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T08:21:31.737

首先，我同意不以 root 身份运行生产 Web 服务器。这只是个坏主意。

至于这里发生了什么，您没有提供 PostgreSQL 登录凭据，因此它发送的是进程所有者的名称，并且没有密码。您显然还使用了一种在 PostgreSQL 端不需要密码的身份验证方法。我建议通过 tcp/ip 进行连接（将 localhost 指定为主机），并确保将 auth 类型`pg_hba.conf`设置为`md5`（但如果您不能这样做，则使用客户端证书可能可以使用证书身份验证）。

从那里确保正确指定了用户名和密码。

# android - Android：BitmapFactory.decodeFile 返回 null...（已验证路径名参数！）

> ID：15259898
> 
> 赞同：0
> 
> 时间：2013-03-06T23:02:40.143
> 
> 标签：android

我不明白为什么我的 decodeFile 方法返回 null ...这是我的（非常简单的）代码：

```
...
File f = new File(dataString);
photo_bitmap = BitmapFactory.decodeFile(f.getAbsolutePath());
Log.i("Data... : ", dataString); //show  "/external/images/media/832"
Log.i("arbre.getString File : ", f.getAbsolutePath()); //show  "/external/images/media/832"
if (photo_bitmap == null) Log.i("BITMAP", "BITMAP IS NULL"); //show this if...my Bitmap is null, why ? 
photo_string = BitMapToString(photo_bitmap); //then java.lang.NullPointerException :/
photo_string = photo_string.substring(0, 10);
... 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T16:14:19.320

检查您是否设置了此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

就我而言，这解决了问题

# qt - Qt Creator 2.6.2 和 Qt 4.8.4：Qt 版本未正确安装

> ID：15259900
> 
> 赞同：3
> 
> 时间：2013-03-06T23:02:49.777
> 
> 标签：qt, windows-7, qt4, qt-creator

Windows 7：我已经安装了 Qt 4.8.4 Win 和 Qt Creator 2.6.2 Win，VS2010（[从这里](http://qt-project.org/downloads#qt-other)）。当我尝试打开一个项目（之前使用 Qt 4.8.3 / Creator 2.5.2 编译）时，它说我需要一个工具包 ( `no valid kit`)，最终我在`Qt version is not properly installed`. 全部显示在下面的屏幕截图中。

我检查了一些解决方案：

1.  SO [QT 版本没有正确安装，请运行 make install](https://stackoverflow.com/questions/14581528/qt-version-is-not-properly-installed-please-run-make-install) is for Linux
2.  有人说，我需要安装 Qt SDK，[但是我在哪里可以找到这个](http://qt-project.org/downloads#qt-other)（这个包含[旧的 Creator / Qt 版本](http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html)），如果我需要 SDK，各个安装程序会有什么意义？
3.  有人说，我需要将 Qt 添加到路径中，但究竟是什么？创造者？Qt 4.8.4，`qmake`目录？
4.  不知何故，我失败了`make install`，没有任何反应。
5.  我已经安装了包括 Creator 2.6.2 的 5.0.1 作为一个安装，这个工作。但是当我下载 4.8.4 时。并尝试将其添加为 QT 版本，同样的问题：`Qt version is not properly installed`

知道我需要做什么或安装什么。

-- 编辑 -- 试验列表 ---

1.  将我的 Qt 4.8.4 及其`qmake`目录添加到`PATH`
2.  以不同的顺序重新安装 Qt：首先是 Qt 4.8.4 / 之后是 Creator 2.6.2
3.  打开 Qt CMD Prompt `qmake install`（如建议）：`4.8.4\install:1: Parse Error ('INSTALLING Qt Source Package Version 4.8.4.') Error processing project file: install`
4.  `qmake install`来自 Qt CMD。运行 20 分钟，笔记本电脑变得极热，然后崩溃

![配置套件](../Images/dcf5267df26f9537b7beb806b700a052.png)

![成套工具](../Images/2403552f47990dcc6028f1328e6879e8.png)

![未安装 Qt 版本](../Images/6c3c1951ad317d390743b8d59d4424f0.png)

```
P:\Qt\Libs\4.8.4>qmake\qmake.exe install
QMAKESPEC has not been set, so configuration cannot be deduced.
Error processing project file: install 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-08T08:39:08.577

我有同样的问题。尝试从 BIN 文件夹中选择“qmake.exe”，而不是 qmake 文件夹，所以在你的情况下可能是 P:\Qt\Libs\4.8.4\bin\qmake.exe

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:16:42.383

基于 SO：[构建后如何在 Windows 上安装 Qt？](https://stackoverflow.com/questions/4699311/how-to-install-qt-on-windows-after-building)我最终到了[http://qt-project.org/doc/qt-4.8/install-win.html](http://qt-project.org/doc/qt-4.8/install-win.html)

简单地运行`configure`为我解决了它，我没有构建，没有别的。安装程序确实应用了几个补丁，所以我仍然不明白为什么我必须运行配置。

# jquery - On Change 禁用基于其他选择框值的选择框

> ID：15259904
> 
> 赞同：0
> 
> 时间：2013-03-06T23:03:02.800
> 
> 标签：jquery, html

我有 3 个选择框

如果任何选择框或两个选择框的计数等于 2，则应禁用其余选择框。

这是HTML

```
 <ul>
                            <li><span>抹茶</span></br>
                            <select name="01345[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label> 箱&lt;/label></li>
                            <li><span>カフェラテ&lt;/span></br>
                            <select name="02345[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label> 箱&lt;/label></li>
                            <li><span>ストロベリー    </span></br>
                            <select name="24190[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label> 箱&lt;/label></li>
                        </ul> 
```

这是jQuery

```
$('select').change(function(){
    var disable = false;
    first_sel = parseInt($('#cinchForm select.cinch_set1:eq(0)').val());
    second_sel = parseInt($('#cinchForm select.cinch_set1:eq(1)').val());
    third_sel = parseInt($('#cinchForm select.cinch_set1:eq(2)').val());
    alert(first_sel+"-"+second_sel+"-"+third_sel);
    count = first_sel+second_sel+third_sel;
    if(count == 2){
        if(first_sel == 0){
            $('#cinchForm select.cinch_set1:eq(0)').attr('disabled', 'disabled');
            $('#cinchForm select.cinch_set1:eq(1)').removeAttr('disabled');
            $('#cinchForm select.cinch_set1:eq(2)').removeAttr('disabled');
        }
        else if(second_sel == 0){
            $('#cinchForm select.cinch_set1:eq(1)').attr('disabled', 'disabled');
            $('#cinchForm select.cinch_set1:eq(0)').removeAttr('disabled');
            $('#cinchForm select.cinch_set1:eq(2)').removeAttr('disabled');
        }
        else if(third_sel == 0){
            $('#cinchForm select.cinch_set1:eq(2)').attr('disabled', 'disabled');
            $('#cinchForm select.cinch_set1:eq(1)').removeAttr('disabled');
            $('#cinchForm select.cinch_set1:eq(0)').removeAttr('disabled');
        }
    }else{
        $('#cinchForm select.cinch_set1:eq(0)').removeAttr('disabled');
        $('#cinchForm select.cinch_set1:eq(1)').removeAttr('disabled');
        $('#cinchForm select.cinch_set1:eq(2)').removeAttr('disabled');
    }
}); 
```

如果两个选择框的计数为 2，我可以禁用第三个选择框

但如果单个选择框的计数为 2，我的逻辑将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:25:46.427

你最好使用数组。考虑以下代码，因为我添加了一个函数来检查是否在任何时候，选择是否超过 2。

```
<form id="cinchForm">
                            <ul>
                            <li><span>Apples</span></br>
                            <select name="01345[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label>Each</label></li>
                            <li><span>Oranges</span></br>
                            <select name="02345[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label>Each</label></li>
                            <li><span>Bananas</span></br>
                            <select name="24190[]" class="cinch_set1">
                                <option value="0"></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select><label>Each</label></li>
                        </ul>
</form>

<div id="myresults">is empty</div> 
```

你的 JS：

```
$('select').change(function(){
     var disable = false;
    var totalSelection = 0;
    var selected = $(this).val();
    var first_sel = $('#cinchForm select.cinch_set1:eq(0)').val();
    var second_sel = $('#cinchForm select.cinch_set1:eq(1)').val();
    var third_sel = $('#cinchForm select.cinch_set1:eq(2)').val();
     var mySelectValues=new Array(first_sel,second_sel,third_sel);
for (var i = 0; i < mySelectValues.length; i++) {
    totalSelection += parseInt(mySelectValues[i]);
}    

    //If one is already selected, the next value CAN NOT be two
         if (totalSelection > 2){
            alert('Value can not be more than 2');   
            $(this).val('1');
             totalSelection = totalSelection -1;
        }

    //If total selection if more than two, disable all selection boxes EXCEPT those with value
    if (totalSelection >= 2){
    $('#cinchForm select').attr('disabled', 'disabled');       
    }

    //HTML output
    $("#myresults").html(totalSelection);    
}); 
```

在小提琴上：http: [//jsfiddle.net/zgpXf/62/](http://jsfiddle.net/zgpXf/62/)

我没有添加重置或 .removeAttr('disabled'); 规则，因为这可以很容易地用你所追求的和我没有时间来完成:)

但是这个解决方案应该有助于解决您的逻辑问题。

# c# - 使用后面的代码加载网页

> ID：15259905
> 
> 赞同：0
> 
> 时间：2013-03-06T23:03:11.507
> 
> 标签：c#, .net, wpf, xaml, webbrowser-control

我有一个场景，我正在从我公司的一个 Intranet 页面中抓取一些值。我不打算在我的应用程序中显示该页面。我只需要网页中的一些数据。

但我注意到`WebBrowser`必须在 Xaml 中创建一个才能触发 LoadComplete 事件。由于我不打算显示网页，我宁愿不在 Xaml 中创建它。

这是一个示例，说明了我在说什么。

* * *

**Xaml 版本（事件触发良好）：**

*xml:*

```
<WebBrowser x:Name="webBrowser" Visibility="Collapsed"/> 
```

*代码：*

```
public MainWindow()
{
    InitializeComponent();

    webBrowser.LoadCompleted += WebBrowserOnLoadCompleted;
    webBrowser.Navigate("http://stackoverflow.com/");
}

private void WebBrowserOnLoadCompleted(object sender, NavigationEventArgs navArgs)
{
    MessageBox.Show("PageLoaded");
} 
```

结果：然后 MessageBox 显示。（事件触发）

* * *

**仅代码版本（事件不触发）：**

*代码：*

```
public MainWindow()
{
    InitializeComponent();

    WebBrowser codeBehindBrowser = new WebBrowser();
    codeBehindBrowser.LoadCompleted += WebBrowserOnLoadCompleted;
    codeBehindBrowser.Navigate("http://stackoverflow.com/");
}

private void WebBrowserOnLoadCompleted(object sender, NavigationEventArgs navArgs)
{
    MessageBox.Show("PageLoaded");
} 
```

结果：事件未触发。

* * *

**`WebBrowser`如果我在后面输入代码，有没有办法让事件触发？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:14:51.870

如果不需要显示页面，最好使用[WebClient](http://msdn.microsoft.com/en-us/library/tt0f69eh%28v=vs.80%29.aspx)类

```
WebClient client = new WebClient();
//client.Credentials = new NetworkCredential("username", "password");
string reply = client.DownloadString(address); 
```

还有一个[DownloadStringAsync](http://msdn.microsoft.com/en-US/library/system.net.webclient.downloadstringasync%28v=vs.80%29.aspx)方法，不会阻塞 UI

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:02:36.857

代码隐藏浏览器不加载的原因是它不在可视树中：它没有被放入 UI。Xaml 之所以有效，是因为它*已*被放入可视树中，仅仅是因为它是在 Xaml 中创建的。

如果您想从代码创建浏览器，那么要让它工作，您需要将它放入可视树中。例如：

```
<Window x:Class="WebBrowserLoadTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid x:Name="LayoutRoot"/>
</Window> 
```

```
public MainWindow()
{
    InitializeComponent();

    WebBrowser codeBehindBrowser = new WebBrowser { Visibility = Visibility.Collapsed };
    codeBehindBrowser.LoadCompleted += CodeBehindBrowserOnLoadCompleted;
    codeBehindBrowser.Navigate("http://stackoverflow.com/");
    this.LayoutRoot.Children.Add(codeBehindBrowser);
}

private void CodeBehindBrowserOnLoadCompleted(object sender, NavigationEventArgs e)
{
    MessageBox.Show("CodeBehindBrowser loaded, yay!");
} 
```

只要它以某种方式插入到可视树中，它就应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:28:07.743

```
 MyWebClient client = new MyWebClient();
        client.DownloadStringCompleted += new MyWebClient.DownloadStringCompletedEventHandler(HandleDownloadStringCompleted);

    // call the async method
        client.DownloadStringAsync(url, handler); 
```

# javascript - javascript dom连接背景位置字符串/自动更新背景图像？

> ID：15259906
> 
> 赞同：0
> 
> 时间：2013-03-06T23:03:15.657
> 
> 标签：javascript, dom, string-concatenation, background-position

我似乎对这条线有问题：

```
back_x += 1;
back_y += 10;           

document.getElementById('body_id').style.backgroundPosition =  back_x + 'px ' + back_y + 'px'; 
```

.css 文件

```
body
{   
   background: #000;    
background-image:url('image.jpg');
background-repeat:repeat;
font-family: Helvetica, sans-serif; font-size: 18px; line-height: 24px;
background-attachment:fixed;
} 
```

`<BODY id = "body_id"; >`

基本上，我正在尝试使用 Javascript 来更新背景图像位置，该位置仅在循环中工作一次，此后不再工作。页面上的其他所有内容都运行良好。可能是字符串没有正确连接吗？

编辑：几分钟后，我的页面运行良好，然后所有 JavaScript 函数都停止工作！=(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:16:44.963

我没有看到您的代码有任何问题。

但你也许可以测试一下：

```
function updatePositionBackground(x, y) {
   document.body.style.backgroundPosition = x + "px " + y+ "px";
} 
```

做一个示例：http: [//jsfiddle.net/RN8mB/](http://jsfiddle.net/RN8mB/)

您可以看到背景位置已正确更新。

# makefile - 如何编译我的代码并链接到 Trilinos 库

> ID：15259907
> 
> 赞同：1
> 
> 时间：2013-03-06T23:03:19.573
> 
> 标签：makefile, cmake, compilation, linker, trilinos

我刚刚安装了 trilinos 11.0.3，现在我正在尝试使用 cmake 编译我的第一个应用程序。

我要编译的文件在这里 [http://code.google.com/p/trilinos/wiki/EpetraSimpleVector](http://code.google.com/p/trilinos/wiki/EpetraSimpleVector)

`cmake`尽管对于每个 trilinos 软件包，我都收到以下警告（以防万一），但第一个命令似乎有效：

```
 CMake Warning (dev) at /home/giorgos/Documents/TRILINOS/lib/cmake/Trilinos/
    TrilinosTargets.cmake:208 (ADD_LIBRARY):        
    ADD_LIBRARY called with SHARED option but the target platform does not
    support dynamic linking.  Building a STATIC library instead.  This may lead
    to problems. 
```

除此之外，似乎 trilinos 的位置包含和库已正确找到

但是，该`make`命令会生成类似错误的列表，例如：

```
 /home/giorgos/Documents/mpi_tests/trilinos_test/test1/src/teuchos_test.cpp:11:
    undefined reference to `Epetra_SerialComm::Epetra_SerialComm()'

    /home/giorgos/Documents/mpi_tests/trilinos_test/test1/src/teuchos_test.cpp:16: 
    undefined reference to `Epetra_Map::Epetra_Map(int, int, Epetra_Comm const&)'

    /home/giorgos/Documents/mpi_tests/trilinos_test/test1/src/teuchos_test.cpp:19: 
    undefined reference to `Epetra_Vector::Epetra_Vector(Epetra_BlockMap const&, bool)'

    /home/giorgos/Documents/mpi_tests/trilinos_test/test1/src/teuchos_test.cpp:20: 
    undefined reference to `Epetra_Vector::Epetra_Vector(Epetra_BlockMap const&, bool)' 
```

知道这里发生了什么吗？

（我将源文件命名为 teuchos_test.cpp 因为首先我尝试从 teuchos 包中编译一些代码，但是我收到了与上面类似的错误）

谢谢

乔戈斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-04T13:30:59.743

您可以使用`cmake`或`make`使用 Trilinos 构建您的程序。我把你推荐给官方教程网站[这里](https://github.com/trilinos/Trilinos_tutorial/wiki/TrilinosHandsOnTutorial#build-trilinos-yourself-on-your-computer)，它对这两种方法都提供了详细的解释。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T22:54:45.550

我无法使用 cmake 编译 trilinos 示例，但我可以通过链接我自己的所有内容来做到这一点。对于给我上述错误的例子，我做了以下

```
 g++ -o teuchos_test teuchos_test.cpp \ 
  -I/home/giorgos/Documents/TRILINOS/include \
  -L/home/giorgos/Documents/TRILINOS/lib -lepetra 
```

因为它仅取决于 epetra 包（我仍然需要更改名称:)）

但是，如果有人知道如何用 cmake 编译 trilinos，我会很感激这里的输入

# couchdb - couchDB 排序复杂键

> ID：15259910
> 
> 赞同：1
> 
> 时间：2013-03-06T23:03:22.800
> 
> 标签：couchdb

我有一个 couchDB 数据库，它有几个不同的文档“类型”，它们都与一个主要的“类型”相关。

在常见的博客/文章示例中，主要类型是博客文章，其他类型是评论（尽管有 3 种不同类型的评论。

所有类型都有日期，但是，我希望按日期对博客文章进行排序，但也返回评论中的所有数据。我可以编写一个生成键的发射器，如下所示：

```
[date, postID, docTypeNumber] 
```

其中 docTypeNumber 对于 post 为 1，对于不同的评论文档类型为 > 1。

例如：

```
["2013-03-01", 101, 1]
[null, 101, 2]
[null, 101, 2]
[null, 101, 3]
["2013-03-02", 101, 1]
[null, 102, 2]
[null, 102, 3] 
```

当然，如果我发出这个，所有的空值都会被排序在一起。有没有办法忽略空值，并按数组中的第二个项目对它们进行分组，但如果它不为空，则按第一个对它们进行排序？

或者，我是否必须获取所有文件以记录发布日期才能进行排序？

我不想使用列表，它们太慢了，而且我正在处理一个可能很大的数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:40:30.367

您似乎想使用帖子日期对所有数据（帖子和评论）进行排序。由于在您的设计评论文档中不包含发布日期（仅评论日期），因此很难使用视图整理模式。我建议更改数据库设计以使博客文章 ID 有意义并包含日期，例如。与作者 ID 连接的日期。这样，如果您`[doc._id, doc.type]`从帖子和`[doc.post, doc.type]`评论文档中发出，您将拥有按日期分组和排序的帖子和评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:49:56.150

您可以通过在 map 函数中使用条件来做到这一点。

```
if(date != null) {
  emit([date, postID, docTypeNumber]);
}
else {
  emit([postID, docTypeNumber]);
} 
```

我不知道您是否希望数组长度可变。如果没有，您可以先添加排序变量。下面的代码片段可以工作，因为 date 和 postID 可能永远不会有相同的值。

```
if(date != null) {
  sortValue = date;
}
else {
  sortValue = postID;
}
emit(sortValue, date, postID, docTypeNumber); 
```

更新：我想了更多。一般来说，我根据我想要执行的查询来提出我的观点。所以我问自己，*我需要查询什么？*似乎在您的情况下，您*可能*在这里有两个不同的查询。如果是这样，我建议有两种不同的观点。由于您将运行两个视图而不是一个视图，因此需要支付性能损失，但我怀疑它对用户来说是可感知的。而且它可能会占用更多的磁盘空间。对您的好处将是更清晰和更明确的代码。

# c - C - 方程的求值顺序

> ID：15259917
> 
> 赞同：5
> 
> 时间：2013-03-06T23:03:36.793
> 
> 标签：c, equation, operator-precedence

我已经对评估顺序进行了大量研究 - 但无法弄清楚这个方程的结果如何：

```
z = !x + y * z / 4 % 2 - 1 
```

我最好的猜测是（从左到右）：

```
z = !x + {[([y * z] / 4) % 2] - 1} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T23:06:50.370

评估顺序和运算符优先级是两个不同的东西。

你最好的猜测是正确的。所有乘法运算符`*` `/` `%`具有相同的优先级，并且从左到右绑定。加法运算符`-`的优先级较低。一元运算`!`符比乘法或加法运算符绑定得更紧密。并且赋值运算符的`=`优先级很低（但仍高于逗号运算符）。

所以这：

```
z = !x + y * z / 4 % 2 - 1 
```

相当于：

```
z = (!x) + (((y * z) / 4) % 2) - 1 
```

但是操作数可以按任何顺序合法地求值（除了某些运算符，如`&&`, `||`, `,`，它们强制从左到右求值）。如果操作数是简单的变量，这可能无关紧要，但类似于：

```
z = func(x) * func(y); 
```

这两个函数调用可以按任意顺序发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:08:08.353

看不懂就改写表情

```
z = !x + y * z / 4 % 2 - 1

notx = !x;         /* you can move this line 1, 2, or 3 lines down */
tmp1 = y * z;
tmp2 = tmp1 / 4;
tmp3 = tmp2 % 2;
tmp4 = notx + tmp3;
tmp5 = tmp4 - 1; 
```

# php - 基于 PHP / MySQL 的网站的支付系统

> ID：15259928
> 
> 赞同：0
> 
> 时间：2013-03-06T23:04:26.060
> 
> 标签：php, sql, system, payment

我为零售品牌创建了一个网站。

我的网站是用 PHP、HTML、CSS 和一些 JS 编码的。现在，我需要建立一个支付系统。我已经实现了购物车代码，并希望允许用户在线支付。

我显然想尽量减少成本。我知道 Paypal 会向卖家收取所付金额​​的很大一部分。还有其他更便宜/免费而且当然安全的选项，有人可以推荐我可以附加到我的网站的在线支付吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:06:44.113

我过去使用过[Stripe](https://stripe.com/)。它是安全的，并且有一个非常容易实现的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:08:47.390

eBay 收费近 4%，条纹收费 2.9% + 0.30 美元

# python - 配置 suds 以使用自定义响应 xml 解析器来处理大响应负载

> ID：15259929
> 
> 赞同：4
> 
> 时间：2013-03-06T23:04:26.373
> 
> 标签：python, suds

我正在构建 python 客户端应用程序以使用 suds python 使用来自 WebService 的数据。现在我可以进行远程调用并获得响应。我的问题是响应大小很大 - 现在为 100Mb，并且将来会增长。我已请求 WebService 提供者更新 API，这将允许我请求模型的一部分，但现在运气不佳。

请建议如何将 suds 客户端配置为：

*   为响应消息使用自定义流解析器 - 这将提取我只需要的信息
*   并避免运行 suds.sax.parser 并且不要构建包含整个响应树的 DOM 对象
*   我还希望我的解析器将响应直接保存到磁盘上的文件中，而不是将其存储在内存中（为了实现后者，我认为我需要传递自定义的 suds 传输，这将为我这样做）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:48:15.637

对于我手头的任务，我找到了部分问题的解决方案 - 我正在使用`suds.plugin.MessagePlugin`实现来清除保存的 WebService 响应有效负载并防止 suds 将其解析为 DOM。这是我原来问题中的第 2 项：

> 避免运行 suds.sax.parser 并且不要构建包含整个响应树的 DOM 对象

下面是将此方法与公共 Web 服务一起使用的示例。

查看[gist中的完整代码](https://gist.github.com/smartkiwi/5153378#file-suds_prevent_parsing)

```
 import suds
    class PayloadInterceptor(suds.plugin.MessagePlugin):
        def __init__(self, *args, **kwargs):
            self.last_payload = None

        def received(self, context):
            #recieved xml as a string
            print "%s bytes received" % len(context.reply)
            self.last_payload = context.reply    
            #clean up reply to prevent parsing
            context.reply = ""
            return context

    if __name__=='__main__':    
        wsurl = "http://webservices.oorsprong.org/websamples.countryinfo/CountryInfoService.wso?WSDL"
        payload_interceptor = PayloadInterceptor()
        client = suds.client.Client(wsurl, plugins=[payload_interceptor])
        print client
        res = client.service.CapitalCity("NL")
        print "received %s bytes" % len(payload_interceptor.last_payload)
        print "parsed result: %s" % res
        print "response payload: %s" % payload_interceptor.last_payload 
```

产生输出：

```
 ...    
    received 336 bytes
    parsed result: None
    response payload: <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Body>
        <m:CapitalCityResponse xmlns:m="http://www.oorsprong.org/websamples.countryinfo">
          <m:CapitalCityResult>Amsterdam</m:CapitalCityResult>
        </m:CapitalCityResponse>
      </soap:Body>
    </soap:Envelope> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-19T12:16:55.203

您可以使用`retxml`使 suds 返回原始 XML 响应的选项，绕过解析和缓慢的对象树构建。在此处阅读更多信息： [https](https://fedorahosted.org/suds/ticket/257) ://fedorahosted.org/suds/ticket/257 。

# ios - 选择性删除自定义手势识别器

> ID：15259932
> 
> 赞同：1
> 
> 时间：2013-03-06T23:04:33.787
> 
> 标签：ios, objective-c, rotation, gesture-recognition

我想将自定义识别器的手势移除到图像视图。kerby turner 是一根手指旋转。

```
-(void) enableRotation{
[[self mainImageView] setUserInteractionEnabled:YES];
[self addRotationGestureToView:[self mainImageView]];
    //[self addTapGestureToView:[self mainImageView] numberOfTaps:1];
}

- (void)addTapGestureToView:(UIView *)view numberOfTaps:(NSInteger)numberOfTaps
{
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[tap setNumberOfTapsRequired:numberOfTaps];
[view addGestureRecognizer:tap];
 }

- (void)addRotationGestureToView:(UIView *)view
{
NSLog(@"'Adding KT Rotation recognizer to the rotation");
KTOneFingerRotationGestureRecognizer *rotation = [[KTOneFingerRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotating:)];
[view addGestureRecognizer:rotation];
 }

- (void)rotating:(KTOneFingerRotationGestureRecognizer *)recognizer
{
UIView *view = [recognizer view];
[view setTransform:CGAffineTransformRotate([view transform], [recognizer rotation])];
}

- (void)removeRotationGestureFromView: (UIImageView *) imgView {
//UIRotationGestureRecognizer *rotate = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotationRemoved:)];
//[imgView removeGestureRecognizer:rotate];
KTOneFingerRotationGestureRecognizer *rotation = [[KTOneFingerRotationGestureRecognizer alloc] init];

while(self.mainImageView.gestureRecognizers.count){
    [self.mainImageView removeGestureRecognizer:[self.mainImageView.gestureRecognizers objectAtIndex:0]];
    //[self.mainImageView removeGestureRecognizer:rotation];
}
NSLog(@"Trying to remove rotation on this gesture");
} 
```

我在自定义磁贴选项卡中调用它

```
 if(rotationToggle%2==0){
            [self enableRotation];
            NSLog(@"%d", rotationToggle);
        }
        else{
            [self removeRotationGestureFromView:self.mainImageView];
                            NSLog(@"%d", rotationToggle);
        }
        rotationToggle +=1; 
```

其中rotationToggle 是一个静态整数。

如何删除只有一个手势识别器。当前方法删除图像视图中的所有识别器。如果我只是 [imgView removeGestureRecognizer:rotate]; 或 [self.mainImgView removeGestureRecognizer:rotate];

这没用。提前致谢。让我知道如果我忘了在这里提及一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:11:55.273

您正在创建一个新手势实例并尝试删除它，而不是删除之前添加的一个。保留前一个的引用并将其删除。

例如：-

```
@property (nonatomic, strong) KTOneFingerRotationGestureRecognizer *rotation;

- (void)addRotationGestureToView:(UIView *)view
{
   self.rotation = [[KTOneFingerRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotating:)];
   [view addGestureRecognizer:rotation];
}

- (void)removeRotationGestureFromView:(UIImageView *)imgView {
    [self.mainImageView removeGestureRecognizer:self.rotation];
} 
```

# ruby-on-rails - 在每个对象上使用不同方法的数组上调用 to_json

> ID：15259933
> 
> 赞同：1
> 
> 时间：2013-03-06T23:04:35.503
> 
> 标签：ruby-on-rails, ruby, json, sinatra

我有一个 sinatra 服务将一个 json 对象数组返回到我的 rails 应用程序。这些对象都是不同的类型。我正在尝试将 :methods 选项传递给 to_json 调用，但每个对象都需要调用不同的方法。下面的代码不起作用，因为我返回了一个 json 对象数组。

```
params = {:assets => {'1' => {:asset_type => "file", :urls => [:original]},
                      '2' => {:asset_type => "image", :urls => [:original, :thumbnail]}
                     }
         }

get 'url' do
  assets = []

  params[:assets].each do |asset_id,asset_params|
    asset = Asset.find asset_id
    methods = asset_params[:urls]
    asset_json = asset.to_json :methods => methods
    assets << asset_json
  end
  assets
end

#expected output:

[{"id" => 1, "type" => "file", "original" => "/filesystem/asset/1/filename.txt"}, {"id" => 2, "type => "image", "original" => "/filesystem/asset/2/image.jpg", "thumbnail" => "/filesystem/asset/2/image_thumb.jpg"}] 
```

有没有一种方法可以将 assets 数组转换为 json 而无需对该数组中的每个对象都这样做？或者其他方式来返回我想要的东西？谢谢。

一位同事建议的解决方案似乎可行，但有点 hacky。返回值可能是（因为 to_json 实际上只是创建一个字符串）：

```
"[" + assets.join(',') + "]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:40:26.530

快速解决方案：不要返回`assets`，但是`assets.to_json`。（一个理想的解决方案是不调用`to_json`每个资产，而只在最后调用一次。）

旁注：请不要说那`to_json`是“真的只是创建一个字符串”。如果这么简单，我们就不需要`json`宝石了。

# visual-studio-2010 - 缺少模拟器 Windows Phone 7？

> ID：15259935
> 
> 赞同：0
> 
> 时间：2013-03-06T23:04:52.727
> 
> 标签：visual-studio-2010, visual-studio, windows-phone-7, windows-phone-7-emulator

我在我的机器上安装了 7.1 和 7.8 Sdk，但是当我在 Vs 2010 Ultimate 中创建一个新项目时，我得到了一个项目，但没有任何模拟器可供选择。

![在此处输入图像描述](../Images/566a1147458d5facae47abec4b16ebbe.png)

我在 Windows 7 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:17:01.380

1.关闭所有 Visual Studio 和 Windows Phone Emulator 实例。

2.删除%LocalAppData%\Microsoft\Phone Tools\CoreCon的内容。

3.重启Visual Studio。

# .htaccess - .htaccess 阻止 PHP 引用文件访问

> ID：15259942
> 
> 赞同：1
> 
> 时间：2013-03-06T23:05:22.800
> 
> 标签：.htaccess

我的服务器上有一个 PHP 文件，我不希望没有正确引用的任何人访问它。

这是我目前有效的规则。

```
RewriteCond %{REQUEST_URI} .streamer\.php*
RewriteCond %{HTTP_REFERER} !.*domain.com.*
RewriteRule .* - [F] 
```

这条规则是否足够友好`mod_rewrite`？还是需要清洁或整理一下？它确实起作用，但我不是专家，`mod_rewrite`我相信可能有比我的方法更好的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:29:42.563

您可以将`%{REQUEST_URI}`条件与规则本身结合起来，并且可以清理引荐来源正则表达式：

```
RewriteCond %{HTTP_REFERER} !^https?://[^/]+\.domain\.com/? [NC]
RewriteRule .streamer\.php - [F] 
```

请注意，这也会阻止空白引用，例如，如果您将链接直接复制并粘贴到浏览器的 URL 地址栏中。如果你想允许空白引用，你需要添加一个额外的条件：

```
RewriteCond %{HTTP_REFERER} ^$ [OR]
RewriteCond %{HTTP_REFERER} !^https?://[^/]+\.domain\.com/? [NC]
RewriteRule .streamer\.php - [F] 
```

# iphone - NSFetchedResultsController 和表格部分

> ID：15259943
> 
> 赞同：1
> 
> 时间：2013-03-06T23:05:27.453
> 
> 标签：iphone, ios, objective-c, core-data

我正在使用`NSFetchedResultsController`它的委托来填充`tableview`来自核心数据托管对象的数据，[如此处所述](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。

但是，我还没有找到一种方法来做一些不同的事情：我需要表格的第一部分有一些自定义的静态内容，而表格的第二部分应该将内容`NSFetchedResultsController`对象数组接收到它的行中。

我怎样才能明确告诉我`NSFetchedResultsController`将它获取的所有内容放入第 1 部分而不是 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:24:17.483

与其尝试操纵您的数据源，不如修改您发送到`UITableView`. 例如，如果它询问节数，则返回 1 + 获取的结果控制器报告的节数。如果它要求一个单元格，只需检查您是否在第 0 部分并对其进行特殊处理。

一般来说，MVC 下的职责分离意味着您的控制器应该负责提供自定义内容而不是您的模型。你的模型不应该知道它的数据应该如何呈现。通过这种方式，您可以以多种方式呈现相同的数据，而无需拼凑出丑陋的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:17:41.610

如果您的静态内容足够简单，您也可以将其全部粘贴到标题中（而不是第 0 节）。

```
- (void)viewDidLoad
{
    UIView *header = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
    // add labels, buttons, etc to header
    // ...
    self.tableView.tableHeaderView = header;
} 
```

# mod-rewrite - mod_rewrite 重定向根目录，重写子目录

> ID：15259944
> 
> 赞同：0
> 
> 时间：2013-03-06T23:05:30.337
> 
> 标签：mod-rewrite

我正在为我的组织设置网址缩短服务。我想将缩短的 url**重写为我的 index.php 文件，但将请求****重定向**到我的主网站的根目录，即：

请求：short.domain.tld/abc
用户看到：short.domain.tld/abc
提供的页面：short.domain.tld/index.php?code=abc

请求：short.domain.tld/
用户看到：website.domain.tld
提供的页面：website.domain.tld（在我的网站服务器上）

我的 .htaccess 文件目前是：

```
Options +FollowSymLinks 
RewriteEngine on

RewriteCond %{REQUEST_FILENAME}  !-s 
RewriteRule ^/(.*)$ index.php?code=$1 [L] 
RewriteRule ^.*$ http://website.domain.tld/ 
```

我不确定如何区分对子目录的请求和对域根的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:36:53.193

您可以在根目录的 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST}  short\.domain\.tld  [NC]
RewriteCond %{REQUEST_URI}  !index\.php       [NC]
RewriteRule  ^([^/]+)/?   /index.php?code=$1  [NC,L]

RewriteCond %{HTTP_HOST}  short\.domain\.tld  [NC]
RewriteCond %{REQUEST_URI}   ^/$      
RewriteRule  .*    http://website.domain.tld  [R=301,L] 
```

内部映射

`http://short.domain.tld/abc`带或不带斜杠（显示在地址栏中）

到

`http://short.domain.tld/index.php?code=abc`

假设字符串`abc`是动态的。

* * *

或永久重定向

`http://short.domain.tld/`没有段路径

到：

`http://website.domain.tld/` （显示在地址栏中）

# android - Android - “暂停”系统时钟定时器

> ID：15259948
> 
> 赞同：0
> 
> 时间：2013-03-06T23:05:41.040
> 
> 标签：android

首先，这是我的代码：

```
public class MyClass extends Activity {

private Runnable updateTask = new Runnable() {  
    public void run() {
        now = SystemClock.uptimeMillis();
        elapsed = duration - (now - mStart); //duration = 30000
        if (elapsed > 0) {
            seconds = (int) (elapsed / 1000);
            minutes = seconds / 60;
            seconds     = seconds % 60;

            mHandler.postAtTime(this, now + 1000);
        }
        else {
            mHandler.removeCallbacks(this);
            finish();
        }
    }
};

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mStart = SystemClock.uptimeMillis();
    mHandler.post(updateTask);

    this.pause.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(MyClass.this,NextActivity.class);
            MyClass.this.startActivity(intent);
        }
    });
}

public void onStop(){
    super.onStop();
    mHandler.removeCallbacks(updateTask);
}

public void onRestart(){
    super.onRestart();
    mHandler.post(updateTask);
} 
```

我缩短了代码以使其更易于阅读。计时器工作正常，计时器倒计时到零。我遇到的问题是，当我按下暂停按钮时，我试图“暂停”计时器。暂停按钮实际上启动了一个新的活动，它显示了一个暂停屏幕，完全阻碍了当前活动。现在我知道 SystemClock 没有暂停，所以我能做的最好的事情就是在 onStop() 中删除运行计时器 (mHandler.removeCallbacks(updateTask)) 的线程，然后在 onRestart 中调用它重新启动。

问题是当 onRestart() 时，计时器显示为好像它在暂停活动期间在后台运行。假设我在 25 秒处暂停。如果我在暂停屏幕中停留 5 秒并返回到主要活动，则计时器现在将显示 20 秒，而不是预期的 25 秒。我知道即使我在暂停屏幕中，SystemClock 仍在运行。我不知道如何操作 SystemClock 值来给我它停止的时间。

我从 StackOverflow 上的某个人那里借来了计时器代码，但我不知道“mStart”和“now”应该做什么。我已经为此工作了大约三个小时，但我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:10:59.443

> 我遇到的问题是，当我按下暂停按钮时，我试图“暂停”计时器。

没有直接的方法可以暂停计时器，但您可以取消它并更改`mStart`以实现您想要的：

```
this.pause.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        mHandler.removeCallbacks(updateTask);
        // Start your pause screen
    }
}); 
```

然后，当您想恢复计时器更新`mStart`但调整您的计算以删除任何经过的时间时。

```
protect void onResume() {
    super.onResume();

    // Move these here from onCreate()
    mStart = SystemClock.uptimeMillis() - elapsed;
    mHandler.post(updateTask);
} 
```

**加法**
这让我很困扰，可能是因为我累了：

```
elapsed = duration - (now - mStart);
if (elapsed > 0) { 
```

因为*对我来说*它不如

```
elapsed = now - mStart;
if (elapsed < duration) { 
```

但这只是我很挑剔，使用对您最有意义的方法。

如果您使用：

```
elapsed = duration - (now - mStart); 
```

那么正确的方程式（正如您在下面指出的）是：

```
mStart = SystemClock.uptimeMillis() + elapsed - duration 
```

* * *

> 我不知道“mStart”和“now”应该做什么。

这两个变量用于计算计时器已经运行了多长时间。

*   `now`就是现在。
*   `mStart`是计时器开始的时间。
*   `now - mStart`是计时器运行了多长时间。

# jquery - 使用 jQuery-menu-aim

> ID：15259950
> 
> 赞同：5
> 
> 时间：2013-03-06T23:05:48.390
> 
> 标签：jquery, drop-down-menu

我刚刚发现：[http](http://bjk5.com/post/44698559168/breaking-down-amazons-mega-dropdown) ://bjk5.com/post/44698559168/break-down-amazons-mega-dropdown ，我想在我的网站上实现它，但坦率地说我不知道​​怎么做。

我阅读了文档，内容如下：

*   [https://github.com/kamens/jQuery-menu-aim](https://github.com/kamens/jQuery-menu-aim)

但我不确定我应该做什么。

此`jQuery`代码是否应该`index.html`在标签中的页面上`<script>`？

此外，我知道我应该这样使用它：

```
$("#menu").menuAim({
    activate: $.noop,  // fired on row activation
    deactivate: $.noop,  // fired on row deactivation
}); 
```

但是我怎么知道我应该使用哪个类？

我的菜单代码如下：

```
 <h3 class="demo-panel-title">Menu</h3>
  <div class="row demo-row">
    <div class="span9">
      <div class="navbar navbar-inverse">
        <div class="navbar-inner">
          <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li>
                  <a href="#">
                    Menu Item
                    <span class="navbar-unread">1</span>
                  </a>
                </li>
                <li class="active">
                  <a href="#">
                    Messages
                    <span class="navbar-unread">1</span>
                  </a>
                  <ul>
                    <li><a href="#">Element One</a></li>
                    <li>
                      <a href="#">Sub menu</a>
                      <ul>
                        <li><a href="#">Element One</a></li>
                        <li><a href="#">Element Two</a></li>
                        <li><a href="#">Element Three</a></li>
                      </ul> <!-- /Sub menu -->
                    </li>
                    <li><a href="#">Element Three</a></li>
                    <li>
                      <a href="#">Sub menu</a>
                      <ul>
                        <li><a href="#">Element One</a></li>
                        <li><a href="#">Element Two</a></li>
                        <li><a href="#">Element Three</a></li>
                        <li><a href="#">Element One</a></li>
                        <li><a href="#">Element Two</a></li>
                        <li><a href="#">Element Three</a></li>
                      </ul> <!-- /Sub menu -->
                    </li>

                  </ul> <!-- /Sub menu -->
                </li>
                <li>
                  <a href="#">
                    About Us
                    <span class="navbar-unread">1</span>
                  </a>
                </li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T17:58:16.207

这只是我放在一起的演示代码，因为在嵌套时我无法让我的标记工作。我不得不把 subnav 项目放在不同的盒子里。

[http://codepen.io/mikevoermans/pen/EtKxp](http://codepen.io/mikevoermans/pen/EtKxp)

**HTML**

```
<ul id="main_nav">
            <li><a href="#">Item 1</a></li>
            <li><a href="#">Item 2</a></li>
            <li><a href="#">Item 3</a></li>
            <li><a href="#">Item 4</a></li>
            <li><a href="#">Item 5</a></li>
        </ul>

        <div id="flyouts">

            <ul class="sub-menu">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
                <li><a href="#">Sub Item 3</a></li>
                <li><a href="#">Sub Item 4</a></li>
            </ul>

            <ul class="sub-menu">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
                <li><a href="#">Sub Item 3</a></li>
                <li><a href="#">Sub Item 4</a></li>
                <li><a href="#">Sub Item 5</a></li>
                <li><a href="#">Sub Item 6</a></li>
                <li><a href="#">Sub Item 7</a></li>
                <li><a href="#">Sub Item 8</a></li>
            </ul>

            <ul class="sub-menu">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
                <li><a href="#">Sub Item 3</a></li>
                <li><a href="#">Sub Item 4</a></li>
                <li><a href="#">Sub Item 5</a></li>
                <li><a href="#">Sub Item 6</a></li>
                <li><a href="#">Sub Item 7</a></li>
            </ul>

            <ul class="sub-menu">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
            </ul>

            <ul class="sub-menu">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
                <li><a href="#">Sub Item 3</a></li>
                <li><a href="#">Sub Item 4</a></li>
            </ul>

        </div>
        <!-- /#flyouts --> 
```

**JS**

```
$("#main_nav").menuAim({
    activate: function(a){
        var idx = $(a).index();
        $('#flyouts ul').eq(idx).show();
    },  // fired on row activation
    deactivate: function(a){
        var idx = $(a).index();
        $('#flyouts ul').eq(idx).hide();

    }  // fired on row deactivation
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-18T22:56:12.030

这比 mikevoermans 发布的更清晰、更语义化（无意冒犯）。

您可以保留嵌套，而不必制作额外的 var。另外，按索引定位是不好的，因为如果您的某个项目没有子导航怎么办。

您只需要相应地指定所有内容。我让它在 Natgeo 网站上运行，但我无法链接到它，因为我们还没有启动。

HTML：

```
<nav id="main-nav">
<ul>
    <li class="parentnav">
        <a>Parent</a>
        <ul class="subnav">
            <li><a href="" title="">child</a></li>
            <li><a href="" title="">child</a></li>
        </ul>
    </li>
    </li>
        <a>Parent</a>
    </li>
    <li class="parentnav">
        <a>Parent</a>
        <ul class="subnav">
            <li><a href="" title="">child</a></li>
            <li><a href="" title="">child</a></li>
        </ul>
    </li>
</ul></nav> 
```

JS：

```
$("#main-nav").menuAim({
    rowSelector: "li.parentnav",
    submenuDirection: "below",
    tolerance: 0,
    activate: function(a){
        $(a).children('.subnav').show();
    },
    deactivate: function(a){
        $(a).children('.subnav').hide();
    }
}); 
```

// 方向可以是：左、右、上或下。

// 更大的容忍度 = 更少的容忍度..它是向后的并且错过领先但就是这样 0 意味着有很大的容忍度，所以少即是多：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:35:36.507

我不知道您的 css 菜单当前适用于哪些类，但要使其正常工作，您只需将空的 jQuery 函数 $.noop 替换为适用于您的类的函数即可。遵循以下几行的东西应该可以工作（使用 nav 类）：

```
$(".nav").menuAim({
    activate: function(a){$(a).addClass("submenu-visible")},  
    deactivate: function(a){$(a).removeClass("submenu-visible")},  
}); 
```

# ruby-on-rails - OpenSSL 版本问题

> ID：15259954
> 
> 赞同：0
> 
> 时间：2013-03-06T23:06:00.480
> 
> 标签：ruby-on-rails, openssl, rvm

我似乎无法让我的计算机使用正确版本的 OpenSSL。我似乎已经完成了[这个人](https://stackoverflow.com/questions/15185661/openssl-version-macosx-homebrew)所做的事情，并且我已经尝试过完成[这里](http://foodpicky.com/?p=99)和[这里](http://railsapps.github.com/openssl-certificate-verify-failed.html)的教程。

在尝试完成所有这些之后，尽管给了我，`openssl version`仍然输出.`OpenSSL 0.9.8r 8 Feb 2011``brew link openssl --force``Warning: Already linked: /usr/local/Cellar/openssl/1.0.1e`

我应该怎么做才能正确安装openssl？我似乎无法将 RoR 与我拥有的版本一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:08:31.623

尝试：

```
rvm get head
rvm install 2.0.0 --autolibs=3 
```

rvm 将自动执行所有必需的步骤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:45:18.310

问题源于我安装的 Ruby。显然，如[this answer](https://stackoverflow.com/a/9905801/1292230)中所述，“非 LLVM 版本的 GCC”不再包含在 XCode 命令行工具中。

安装红宝石：

`rvm install ruby --with-gcc=clang`

工作，我在大约 10 分钟内安装了 RVM、Ruby 和 Rails，尽管我花了一周的时间进行调试和重新安装。

# javascript - 在 jQuery 移动按钮上调用 button("refresh") 会破坏按钮样式

> ID：15259955
> 
> 赞同：5
> 
> 时间：2013-03-06T23:06:01.697
> 
> 标签：javascript, jquery-mobile

我正在尝试动态更新 jQuery 移动按钮上的文本。该按钮实际上是一个样式为按钮的链接。

根据[jQuery 移动文档](http://api.jquerymobile.com/button/#method-refresh)`button("refresh")`，如果您通过 javascript 操作按钮，则应该调用。但是，当我这样做时，按钮的样式变得疯狂 - 它缩小到一半高度并且按钮看起来很糟糕。

[这是一个演示问题的 JS Fiddle](http://jsfiddle.net/rfdQC/)。

代码基本上如下：

```
$(function() {
    // Buttonize
    var $button = $("#myCrapButton");
    $button.button();

    // Change text on click
    $button.click(function() {
        $button.text("Awesome Button");
        $button.button("refresh");
    });
}); 
```

更重要的是，调用`button("refresh")`会导致 javascript 错误：`Cannot call method 'removeClass' of undefined`.

**我知道我可以通过操作`.ui-btn-text` `span`嵌套在按钮内的那个**来解决这个问题；但是，这似乎是错误的方法，因为它需要明确了解 jquery Mobile 的内部工作原理。

谁能告诉我如何让刷新调用工作？

使用版本：

*   jQuery 1.9.1
*   jQuery Mobile 1.3.0（在 JSFiddle 中它是 1.3.0 测试版，但最终具有相同的行为）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:12:49.680

编辑：

抱歉，阅读速度很快，并没有看到您专门寻找刷新功能。正如您注意到的那样，jQM 没有在锚标记按钮上提供该功能。

好吧，另一种选择就是用新按钮替换按钮，然后让 jQM 像以前一样添加标记

*   [http://jsfiddle.net/rfdQC/4/](http://jsfiddle.net/rfdQC/4/)

JS

```
$(function() {
    // Buttonize
    var $button = $("#myCrapButton");
    var $clone = $button.clone();
    $button.button();

    // Change text on click
    $button.click(function() {
        $clone.text("Awesome Button");
        $clone.button();
        $button.replaceWith($clone);
    });
}); 
```

希望这可以帮助！

原来的：

您只需要深入了解 jQM 添加的添加标记。

```
<a id="myCrapButton" href="#" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">
            Click me!
        </span>
    </span>
</a> 
```

您正在更改按钮文本：

```
<a id="myCrapButton" href="#" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c">
    Awesome Button
</a> 
```

这样做会丢失 jQM 显示按钮所需的添加标记。您需要更改嵌套跨度文本。

```
$(function() {
    // Buttonize
    var $button = $("#myCrapButton");
    $button.button();

    // Change text on click
    $button.click(function() {
        $button.children().children().text("Awesome Button");
    });
}); 
```

无需刷新：

```
<a id="myCrapButton" href="#" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">
            Awesome Button
        </span>
    </span>
</a> 
```

现场示例：

*   [http://jsfiddle.net/rfdQC/3/](http://jsfiddle.net/rfdQC/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:12:38.213

没关系; 刚刚在文档顶部找到了这个：

> 注意：按钮样式的链接具有与下面真正的基于表单的按钮相同的视觉选项，但有一些重要的区别。基于链接的按钮不是按钮插件的一部分，仅使用底层的 buttonMarkup 插件来生成按钮样式，因此不支持表单按钮方法（启用、禁用、刷新）。如果您需要禁用基于链接的按钮（或任何元素），可以使用 JavaScript 自己应用禁用的类 ui-disabled 来实现相同的效果。

虽然这实际上并没有解决我的问题（如何更新按钮文本） - 至少它回答了为什么不支持“刷新”方法。

**编辑：**

我知道我可以*直接*更新按钮上的文本；我在最初的问题中说了很多：

> **我知道我可以通过操作嵌套在按钮内的 .ui-btn-text 跨度来解决这个问题**；但是，这似乎是错误的方法，因为它需要明确了解 jquery Mobile 的内部工作原理。

我希望通过某种方式让“刷新”方法起作用来避免这种解决方案。但是，根据我后来找到的文档片段（并在上面引用过），我意识到使用“刷新”方法不是一种选择。

鉴于; 我仍然希望有另一种方法来更新按钮上的文本，而无需显式处理生成的 DOM 元素（即通过使用 jQM API）——但据我所知，没有 API 方法可以这样做。更新 DOM 元素似乎是实现预期结果的唯一方法。

@Phil Pafford ( `$(this).find('span span')`) 和 @OmarNew2PHP ( `$button.children().children()`) 提供的两个选择器（在我看来）都是不正确的。是的，它们在上面给出的示例中完美运行，但是，如果您向按钮添加图标：

```
<a id="myCrapButton" href="#" data-icon="delete">Click me!</a> 
```

然后 jQM 添加了一个附加项`span`来显示该图标（为简洁起见修剪了锚标记属性）：

```
<a href="#">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">Delete</span>
        <span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
    </span>
</a> 
```

使用上面的选择器会将文本添加到**两个**内部`span`标签。这是我希望避免直接更新 DOM 的另一个例子——因为你不能（也不应该）预测 jQM 将生成什么。

但是，归根结底，更新按钮内文本的最佳方法似乎是使用我希望避免的方法：

```
$button.click(function() {
    $(".ui-btn-text", this).text("Awesome Button");
}); 
```

感谢您的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-31T19:56:31.277

我花了几个小时在这上面，最后这对我有用。一种干净的解决方案。因此，如果您有一个在元素中创建以下 html 的 javascript

```
<div id="buttonParent">
  <a href='#' id="1_button" data-role="button">Click me</a>
  <a href='#' id="2_button" data-role="button">Another Click me</a>
</div> 
```

然后在下面调用将刷新按钮。

```
jQuery('#buttonParent').trigger('create'); 
```

请注意，下面没有工作，并给出了例外。

```
jQuery('#1_button').button('refresh') 
```

可以帮助像我这样的人。这是浪费时间。jqm 需要修复这个错误。我在这些按钮周围有一个包装器，用于可折叠集并刷新它工作正常，但这个按钮刷新一直抛出错误。这很烦人。

# .htaccess - 删除共享主机子文件夹中的“/web”

> ID：15259961
> 
> 赞同：1
> 
> 时间：2013-03-06T23:06:24.237
> 
> 标签：.htaccess, redirect, symfony

我的域上有一个包含 sf2 应用程序的子文件夹。访问应用程序的实际 url 是这样的：**www.mydomain.com/subfolder/web**

我想从网址中正确删除“/ web”。

我试图在我的子文件夹中使用这个 htaccess 来做到这一点：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/$1 [QSA,L]
</IfModule> 
```

在 web 目录中重定向请求

但是当我想用这条消息进入主 URL 时，它给了我一个 404： **“找不到'GET /subfolder/'的路由”**

我知道我错过了一些东西，但我真的不知道是什么而且我真的不是 htaccess 专家

PS：创建虚拟主机来解决问题是不可能的，因为我在共享主机上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:02:28.277

我使用符号链接。

从网络根： `ln -s subfolder/web newfolder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:12:25.427

查看 RewriteRule 的文档 [http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

您传递的第一个参数是它匹配的模式

您基本上匹配子文件夹内的任何目录并将其重定向到 web/

我想你想要的是这样的

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} ! ^subfolder/web.
RewriteRule ^subfolder(.*)$ subfolder/web/$1 [QSA,L] 
```

所以我认为这样做是：

*   虽然请求不是文件，也不是 subfolder/web 或 subfolder/web/
*   将 url 从 subfolder(.*)$ 重写为 subfolder/web/$1

# linux - ACL 如何影响 ls / stat() 结果？

> ID：15259965
> 
> 赞同：3
> 
> 时间：2013-03-06T23:06:43.037
> 
> 标签：linux, bash, posix, acl

为什么`drwxrwxr-x+`没有组可写位时会显示目录？

让我们给一个额外的用户 (john)`rwx`对目录的权限，如下所示：

```
$ mkdir logfiles
$ setfacl -m user:john:rwx logfiles
$ getfacl -ce logfiles
user::rwx
user:john:rwx                   #effective:rwx
group::r-x                      #effective:r-x
mask::rwx
other::r-x 
```

这正是我想要的，john 现在拥有与目录所有者等效的访问权限。然而，

```
$ ls -ld logfiles
drwxrwxr-x+ 2 bob users 4096 Mar  6 22:38 logfiles

$ find -perm +020 -ls
  8197    4 drwxrwxr-x   2 bob      users        4096 Mar  6 22:38 ./logfiles 
```

没有组具有写权限，但 ls 的输出和 find 的匹配结果会提示其他情况。这直接来自 lstat(2) 系统调用的 st_mode 字段；为什么`S_IWGRP`要设置位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-05T10:27:35.400

一旦为给定的文件或目录激活了 POSIX ACL。组类权限模式不再是组权限，实际上是掩码ACL条目（与 无关`umask`）。`+`所以现在因为您的文件具有 POSIX ACL 扩展名（从 中的后缀可以看出`ls -l`），`rwx`ls、stat 和 find 显示的实际上不再是组类权限模式。修改组类权限模式`chmod`也只是改变了掩码，并没有改变真正的组类权限模式。这意味着您更改组类权限模式的唯一方法是使用`setfacl`.

掩码 ACL 条目似乎是“分配”组类的所有 ACL 条目的最大可能权限。这包括命名用户、命名组和所属组。它不包括拥有用户和其他类。这可以限制为任何命名用户、命名组或所属组分配的权限。为了获得最大的灵活性，请将掩码`rwx`设置为 ，然后根据您的判断设置命名用户、命名组和拥有组权限。这一切都适用于`cd`,`ls`和其他东西。然而，这确实意味着当使用`ls`, 或`stat`.. 等时，它们都会显示`rwx`在 group 类中，即使这不是真的。

为什么这个面具在这里？它解决什么目的？看起来这个掩码是为了向后兼容不理解 POSIX ACL 的程序。如果一个程序不理解 POSIX ACL 并`rwx`在组类中看到（实际上它实际上是掩码），它是否成功访问目录/文件会发生什么？（我不知道这个问题的答案）。我认为这真的很奇怪，应该被删除。但这就是 POSIX ACL 的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:20:21.553

这可能是你的答案——ACL 传播：

```
http://users.suse.com/~agruen/acl/linux-acls/online/ 
```

一些文件系统允许它作为挂载选项。我不知道你有什么文件系统，所以这可能是一个糟糕的答案。

# string - 在 StringTemplate 中获取字符串值的长度

> ID：15259969
> 
> 赞同：0
> 
> 时间：2013-03-06T23:06:51.297
> 
> 标签：string, stringtemplate, stringtemplate-4

[根据文档](http://www.antlr.org/wiki/display/ST/Expressions#Expressions-Propertyreferences)，您可以引用`<object.property>`格式中对象的属性。我希望这能让我检查字符串的长度，但它似乎不起作用。我认为这是因为该方法是`String.length()`，并且根据文档，如果我执行类似的操作`<mystr.length>`，它将查找一个名为的方法`getLength()`和一个名为的字段`length`，但它从不查找一个名为的方法`length()`。我在 Scala REPL 中通过这个快速检查进行了验证：

```
scala> import org.stringtemplate.v4._; import scala.collection.JavaConverters._;
import org.stringtemplate.v4._
import scala.collection.JavaConverters._

scala> new ST("<xs:{ x | <x>:<x.length> }>").add("xs", List("hello", "goodbye").asJava).render
res0: String = "hello: goodbye: "

scala> case class S(val s:String) { def getLength = s.length }
defined class S

scala> new ST("<xs:{ x | <x>:<x.length> }>").add("xs", List("hello", "goodbye").map(S).asJava).render
res1: String = "S(hello):5 S(goodbye):7 " 
```

因此，如果 Strings 有一个`getLength()`方法或一个`length`字段，它就会起作用......

有没有更简单的方法来获取字符串长度？也许是内置的 StringTemplate 函数，或者我不知道的其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:45:41.717

[我在Cheatsheet 的 Functions 列表中](http://www.antlr.org/wiki/display/ST4/StringTemplate+cheat+sheet#StringTemplatecheatsheet-Functions)找到了答案：`strlen`

```
scala> new ST("<xs:{ x | <x>:<strlen(x)> }>").add("xs", List("hello", "goodbye").asJava).render
res6: String = "hello:5 goodbye:7 " 
```

# spring - 如何完全禁用 WebSphere 8.5 类路径扫描？

> ID：15259972
> 
> 赞同：3
> 
> 时间：2013-03-06T23:07:13.743
> 
> 标签：spring, jakarta-ee, websphere-8

有什么方法可以告诉 WebSphere 8.5 服务器在加载时*不扫描我的 Web 应用程序的类路径？*我们正在将应用程序从 WAS 版本 6.1 迁移到 WAS 8.5。在 6.1 版本中，WAS 没有扫描类路径，而是进行资源注入。我们在 6.1 中使用 Spring 为我们的应用程序进行资源注入。现在，我们到了 8.5，WAS 服务器正在尝试在加载类时扫描它们，这会导致我们的应用程序配置出现问题。

我真的很想要一种方法来禁用 WAS 进行扫描，并让我们的 Spring 配置继续为我们的应用程序处理资源注入。有谁知道该怎么做？

我尝试了以下方法：

1.  使用 EAR 清单中的“Ignore-Scanning-Packages”设置来禁用对我们的包的扫描（这似乎没有效果）
2.  使用服务器（和 EAR 清单）上的“UseEJB61FEPScanPolicy”设置让 WAS 以旧方式做事（这也没有效果）

我可能会尝试任何线索或其他事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T05:51:35.097

我不确定这是否适用于您的情况，但实际上，扫描资源注入仅适用于服务器版本 2.5。因此，避免 Websphere 扫描您的项目的一种快速方法是在`web.xml`文件中，您可以像这样设置根标签

`<web-app version="2.4">`

如果您仍然想使用服务器版本 3.0，您也可以添加`metadata-complete="true"`到根标签中，这将告诉 Websphere 根本不扫描您的项目。

例子：

`<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" metadata-complete="true" version="3.0">`

# mysql - AWS RDS 中的 DES_ENCRYPT 问题

> ID：15259979
> 
> 赞同：0
> 
> 时间：2013-03-06T23:07:37.323
> 
> 标签：mysql, encryption, amazon-web-services, des, rds

我在 Amazon Web Services RDS MySQL 数据库上遇到 DES_ENCRYPT 问题 - AWS RDS 是 SSL，因此它应该支持 DES_ENCRYPTION - 特别是当我从 php_myadmin 或 cli 运行 SQL 查询时，使用以下命令 -

```
 SELECT `ID`,  DES_ENCRYPT( `Name`,'xxxxxxxxxxxxxxxxxxxxxx') FROM names; 
```

它有效，我看到了一个 id 和加密名称列表但是如果我运行

```
'UPDATE names SET `Name` = DES_ENCRYPT( `Name`,'xxxxxxxxxxxxxxxxxxxxxx'); 
```

查询看起来有效，但该`Name`列只包含空白 - 任何建议将不胜感激......

# objective-c - 在 Cocoa 类中使用 Core Audio

> ID：15259980
> 
> 赞同：2
> 
> 时间：2013-03-06T23:07:41.473
> 
> 标签：objective-c, macos, cocoa, core-audio, coremidi

我一直在研究[Learning Core Audio](http://www.amazon.co.uk/Learning-Core-Audio-Hands-Programming/dp/0321636848)书中的示例。这本书很好地解释了 API 及其工作原理，但并没有真正讨论如何将它们集成到 Cocoa 项目中。

我真的不确定如何将核心音频/midi 编程与 obj-c 类混合。有没有很好的教程来解释这样做的标准做法？

在这一点上，我想到的一些问题是：

*   如果我需要一个 userdata 结构，我可以用某种 obj-c 实例变量或@properties 替换它，还是必须是 C 结构？
*   我应该将音频回调函数放在我的代码中的什么位置？他们可以坐在@implementation 之外的某个地方吗？
*   由于回调函数是用 C 编写的，如果我想调用 Objective-C 函数或访问其中的类属性该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:32:56.043

通常的做法是将您的类实例作为用户数据传递，如果回调将其声明为 void*。然后，您的回调可以将其转换为对象并调用其中的任何方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:51:12.100

C 是 Objective C 的一个适当的子集。所以你可以只使用 C 数据类型和调用约定来将 Core 音频与 Cocoa 集成。C 源代码可以放在单独的 .c 文件中，也可以放在 Objective C 实现中。Objective C 对象可以被视为指向 C 回调中的 C 结构的指针。

此外，不建议在实时 Core Audio 回调中使用 Objective C 消息传递。

# asp.net-mvc-3 - ASP.NET MVC Razor 渲染不使用属性进行编码，即。数据标注

> ID：15259984
> 
> 赞同：2
> 
> 时间：2013-03-06T23:08:10.223
> 
> 标签：asp.net-mvc-3, razor

是否可以在视图模型中使用属性来指定剃须刀在没有 html 编码的情况下呈现字符串？

编辑：我要问的是是否可以在模型中添加一个属性并让它修改数据表示（例如如何添加 [Disable]、[Layout(...)]、[Required] 等.) - 以这样一种方式，它会使字符串中的 html 呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:25:15.947

我不知道，但似乎您可以将数据类型从字符串更改为 HTMLString。如果您使用 HTMlString，它应该在字符串中呈现 HTML。

请参阅[始终使用 MVC3 和 Razor 输出原始 HTML](https://stackoverflow.com/questions/6216340/always-output-raw-html-using-mvc3-and-razor)

该线程中的第二个响应显示了使用属性显示原始 html 的一种可能方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:45:23.227

尝试`Html.Raw(yourstring)`

这应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:59:59.250

**MVC 默认将字符串输出为纯字符串，而不是 HTML。**

例如在你的`Action`：

```
public ActionResult Test()
{
    var model = new TestViewModel(); // your view model
    model.Message = "<b>hello</b>";
    return View(model);
} 
```

你的`View`：

```
@model MyProject.TestViewModel

<div>
    @Model.Message
</div> 
```

这将呈现为：

```
<b>hello</b> 
```

如果您想实际将其呈现为 HTML，则需要将上面的内容更改为：

```
@MvcHtmlString.Create(Model.Message) 
```

或者，您可以创建一个扩展以使其更好：

```
 public static MvcHtmlString ToMvcHtmlString(this String str)
    {
        if (string.IsNullOrEmpty(str))
            return MvcHtmlString.Empty;
        else
            return MvcHtmlString.Create(str);
    } 
```

因此，要将字符串呈现为 HTML，在您的 中`View`，您可以编写：

```
@Model.Message.ToMvcHtmlString() 
```

如果这不是您所追求的，您应该向我们提供您的代码在哪里崩溃的示例。

# r - 柯西主值数值积分

> ID：15259988
> 
> 赞同：1
> 
> 时间：2013-03-06T23:08:17.827
> 
> 标签：r, numerical-integration

我正在使用 R 的积分函数，但被积函数给我带来了一些麻烦（它有一个奇点）。考虑到这一点，

```
distrib <- function(x){
  dnorm(x, mean=700,sd=50)
}

phi <- function(nu, epsilon=20, maxi=Inf){

  fun <- function(nup)  {
    lambdap <- 1e7/nup
    distrib(lambdap) / (nup*(nup - nu))
  }
  # first part: from epsilon to nu - epsilon
  I1 <- integrate(fun, epsilon, nu-epsilon, rel.tol = 1e-8,
                  subdivisions = 200L)
  # second part: from nu + epsilon to Infty
  I2 <- integrate(fun, nu+epsilon, maxi, rel.tol = 1e-8, 
                  subdivisions = 200L)

  I1$value + I2$value 

}

x <- seq(1e7/500, 1e7/1000, length=200)

phi1 <- sapply(x, phi)    
phi1 <- sapply(x, phi, epsilon=5)
#Error in integrate(fun, epsilon, nu - epsilon, rel.tol = 1e-08, subdivisions = #200L) : 
#  the integral is probably divergent 
```

有没有比使用截止参数并手动调整它直到给出结果（不一定准确）更好的方法来计算 R 中的此类主值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:48:09.893

如果您考虑以奇点为中心的区间上的积分，您可以使用变量的变化来使被积函数对称：奇点消失，如论文[Numerical evaluation of a generalized Cauchy principal value (A. Nyiri and L. Bayanyi) 中所述, 1999)](http://mat76.mat.uni-miskolc.hu/~mnotes/downloader.php?article=mmn_16.pdf)。

```
# Principal value of \( \int_{x_0-a}^{x_0+a} \dfrac{ f(x) }{ h(x) - h(x0) } dx \)
pv_integrate <- function( f, h, x0, a, epsilon = 1e-6 ) {
  # Estimate the derivatives of f and h
  f1 <- ( f(x0+epsilon) - f(x0-epsilon) ) / ( 2 * epsilon )
  h1 <- ( h(x0+epsilon) - h(x0-epsilon) ) / ( 2 * epsilon )
  h2 <- ( h(x0+epsilon) + h(x0-epsilon) - 2 * h(x0) ) / epsilon^2 
  # Function to integrate. 
  # We just "symmetrize" the integrand, to get rid of the singularity,
  # but, to be able to integrate it numerically, 
  # we have to provide a value at the singularity.
  # Details: http://mat76.mat.uni-miskolc.hu/~mnotes/downloader.php?article=mmn_16.pdf
  g <- function(u) 
    ifelse( u != 0,
      f( x0 - u ) / ( h(x0 - u) - h(x0) ) + f( x0 + u ) / ( h(x0+u) - h(x0) ),
      2 * f1 / h1 - f(x0) * h2 / h1^2
    )
  integrate( g, 0, a )
}

# Compare with the numeric results in the article
pv_integrate( function(x) 1,      function(x) x,    0, 1  ) # 0
pv_integrate( function(x) 1,      function(x) x^3,  1, .5 ) # -0.3425633
pv_integrate( function(x) exp(x), function(x) x,    0, 1  ) # 2.114502
pv_integrate( function(x) x^2,    function(x) x^4,  1, .5 ) # 0.1318667 
```

# oracle - 如何改进查询中的oracle row_number

> ID：15259989
> 
> 赞同：0
> 
> 时间：2013-03-06T23:08:19.400
> 
> 标签：oracle, plsql, plsqldeveloper

```
表_A
------------------
援助          
------------------
1     

表_B
------------------
B_id | 援助
------------------
1 1
2 1
3 1

表_C
-----------------------------------------
B_id | 处理日期
-----------------------------------------
1 20130101 12:20:01
2 20130101 12:10:01
3 20130101 13:00:01

```

如何`process_date`从基于时序窗口`Table_C`的参考中检索最大值。如果我想检索并在计时窗口中，那么它应该返回 id 作为 1 和 process_date 作为`Table_A.A_id``Table_C``Table_C.b_id``max(process_date)``20130101 12:09:00``12:21:00``12:20:01`

下面的查询是我正在使用：

```
select b_id, 
       process_date
  from (select c1.b_id,
               c1.process_date,
               row_number() over(partition by a.a_id 
                                 order by c1.process_date desc) rn
          from table_a a
               inner join 
               table_b b
                 on a.a_id = b.a_id
               inner join 
               table_c c1
                 on b.b_id = c1.b_id
       ) 
 where rn = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:51:30.283

如果我遵循，您需要给定 a_id 的最大处理日期和相应的 b_id，其中处理日期在设定的日期范围内。这是一个不需要任何分析函数或行号的解决方案。我使用 with 子句和 dual 只是为了复制您的示例表。如果您有 table_a、table_b、table_c，则可以删除它。

```
with table_a as 
(
 select 1 a_id from dual
),
table_b as 
(
 select 1 b_id, 1 a_id from dual union all
 select 2 b_id, 1 a_id from dual union all
 select 3 b_id, 1 a_id from dual
), table_c as
(
 select 1 b_id, to_date('20130101 12:20:01', 'yyyymmdd hh24:mi:ss') process_date from dual union all
 select 2 b_id, to_date('20130101 12:10:01', 'yyyymmdd hh24:mi:ss') process_date from dual union all
 select 3 b_id, to_date('20130101 13:00:01', 'yyyymmdd hh24:mi:ss') process_date from dual
) 
select table_c.b_id, 
       table_c.process_date
  from table_b,
       table_c
 where table_b.b_id = table_c.b_id
   and table_b.a_id = 1
   and table_c.process_date = (select max(process_date)
                                 from table_b b2,
                                      table_c c2
                                where table_b.a_id = b2.a_id
                                  and b2.b_id = c2.b_id
                                  and c2.process_date between to_date('20130101 12:09:00', 'yyyymmdd hh24:mi:ss')  and 
                                                              to_date('20130101 12:21:00', 'yyyymmdd hh24:mi:ss')
                              ) 
```

返回：

```
----------------------------
b_id  |  process_date
----------------------------
1       1/1/2013 12:20:01 
```

# python - 用完 cron.hourly 不会导入 Python 模块

> ID：15259990
> 
> 赞同：2
> 
> 时间：2013-03-06T23:08:19.837
> 
> 标签：python, ubuntu, cron

我的 cron.hourly 用完了。它已经 chmod +x'd，并且运行良好。我的问题是它不能将 Python 模块识别为可导入的。

我有 ~/Foo/src，其中包含我变成可执行文件（main）的原始 Python 代码，以及我尝试导入的另一个模块（foobar）。我有一个**init** .py 坐在那里，空的，应该可以导入任何一个模块。事实上，运行我的脚本

```
python src/main.py 
```

一切正常，我没有收到此错误。跑步时

```
run-parts -v /etc/cron.hourly/main 
```

我收到如下错误：

```
ImportError: No module named foobar
run-parts: /etc/cron.hourly//main exited with return code 1 
```

我导入 foobar 的方式是

```
os.chdir("/home/ubuntu/Foo/src/")
import foobar 
```

同样，这在从 Python 运行时有效，但在运行我的可执行文件时无效。为什么会这样，我可以改变什么来避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:14:25.303

```
import sys
sys.path.append("/home/ubuntu/Foo/src")

import foobar 
```

从文档：

> 系统路径
> 
> 指定模块搜索路径的字符串列表。从环境变量 PYTHONPATH 初始化，加上依赖于安装的默认值。
> 
> 在程序启动时初始化时，此列表的第一项 path[0] 是包含用于调用 Python 解释器的脚本的目录。如果脚本目录不可用（例如，如果交互调用解释器或从标准输入读取脚本），path[0] 是空字符串，它指示 Python 首先搜索当前目录中的模块。请注意，脚本目录是在 PYTHONPATH 插入的条目之前插入的。
> 
> 程序可以出于自己的目的自由修改此列表。

# php - 让 PHP 和 MySQL 博客将旧帖子移动到不同的页面？

> ID：15259992
> 
> 赞同：0
> 
> 时间：2013-03-06T23:08:23.343
> 
> 标签：php, html, mysql

我有兴趣制作一个 PHP 博客，我知道如何制作一个 php 表单将内容放入 MySQL 数据库，但我想知道一些事情。

假设我在数据库中有 5 个帖子，这些帖子显示在网页上，但是在这五个帖子之后，我想添加一个新帖子并使其仅显示这六个帖子中的五个，并为额外的一个。

有点像谷歌如何不在一个页面上显示所有结果，但很多。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:13:24.203

您需要更改获取帖子的查询以使用 LIMIT 和 ORDER BY

在第一页你会有

```
SELECT * from posts ORDER BY id DESC LIMIT 5; 
```

这将获取最新的帖子（假设一个递增的整数 ID），并且仅限于获取其中的五个。

然后，您需要一个单独的查询来获取行数，以便知道要显示多少页：

```
SELECT COUNT(*) FROM posts; 
```

然后查询的结果将在代码中使用，如下所示：

```
$num_pages = $post_count / $posts_per_page;
for($i=0; $num_pages < $i; $i++)
{
    print "<a href='?page=$i'>page $i</a>";
} 
```

然后您的第二页需要计算正确的偏移量。例如

```
$offset = $_GET['page'] * $posts_per_page - $posts_per_page; 
```

然后执行如下查询以获取接下来的五个帖子。LIMIT 之后的第一个数字应该是上面计算的数字。LIMIT 5,5 表示在第五个结果之后开始，最多再获得五个。[MySQL 文档](https://dev.mysql.com/doc/refman/5.5/en/select.html#idp66801280)

```
SELECT * FROM posts order by id desc LIMIT 5,5 
```

# css - 如何从引导程序中覆盖 img-width？将css规则设置为null？

> ID：15259993
> 
> 赞同：0
> 
> 时间：2013-03-06T23:08:26.250
> 
> 标签：css, twitter-bootstrap, overriding

我正在使用引导程序，并且我有一个非常小的自定义覆盖样式表，它最后加载并且它似乎工作得很好，但是我发现引导程序有

```
img {img-width:100%;} 
```

我发现它导致 Chrome 确实缩小了一些图像的大小，这些图像在 FF 中显示很好，所以我尝试使用检查器，如果我消除了规则，一切似乎都很好.. 但我不知道如何在子 css 中做到这一点表，因为

```
{img-width: ;} 
```

不合法吗？我试过了

```
{img-width:100;} 
```

这似乎让检查员很高兴，因为它知道它是垃圾但在现实生活中不起作用，因为它忽略了规则？那么如何在子样式表中将 css 属性设置为 null 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:42:25.213

答案！！img {img-width : none;} 感谢 Github 对引导程序问题的回答......不胜感激 Madth3 和 Roman C 更正......

# c# - .net环境中的mongoDB无法连接

> ID：15259994
> 
> 赞同：0
> 
> 时间：2013-03-06T23:08:27.680
> 
> 标签：c#, vb.net, mongodb

我下载了必要的 c# 库并尝试进行基本连接，但它似乎无法识别 C# 库，并且尝试访问没有可用源消息的文件失败。

```
Locating source for 'C:\build\mongo-csharp-driver\Driver
\Core\MongoClient.cs'. Checksum: MD5 {7f d4 a9 70 6d 1 24 e 31 bb 0 2e 91 6 8c 9e}
The file 'C:\build\mongo-csharp-driver\Driver\Core\MongoClient.cs' 
does not exist. 
```

我使用 Nuget 包进行安装，它似乎正在寻找不正确的源文件夹。这是我的代码虽然......

```
 Dim connectionString As String = "mongodb://127.0.0.1"
    Dim client = New MongoClient(connectionString)
    Dim server As MongoServer
    Dim db As MongoDatabase
    Dim siteCollection As MongoCollection

    server = client.GetServer()

    db = server.GetDatabase("test")
    siteCollection = db("test") 
```

# c# - 在数据实体asp中的嵌套选定语句中使用不存在

> ID：15259999
> 
> 赞同：0
> 
> 时间：2013-03-06T23:09:03.843
> 
> 标签：c#, asp.net, join

我是 ASP.NET 的新手，正在尝试编写一个在 SQL 中没有问题但在 C# 中无法执行的查询。

我有两张桌子：

**城镇**
t_id（主要）
t_desc

**TownCounty**
tc_id (primary )
co_id (county id )
t_id (from the town table)
t_active (Y/N)

我想要做的是显示所有未分配给特定县（co_id）（即“DUB”）的城镇，如果它们被分配给该县，则在它们不活动时显示它们（t_active =“N” ）。

在 SQL 中，我编写了以下语句，效果很好

```
select a.t_desc as "Town " from town a
where not exists(
select * from  towncounty b where 
b.co_id like "DUB" and 
b.t_active = "Y" and
b.t_id = a.t_id) 
```

现在我正试图让它在 ASP.NET (C#) 中工作。我已经写了以下声明，但无济于事：

```
IEnumerable<Town> Towns = (from co in handyman.townCounties
where co.co_id != county_id || t_active = "N" 
join to in handyman.towns on co.t_id equals to.t_id into coto 
from subcoto in coto.DefaultIfEmpty() 
select new Town 
{ 
   Id = subcoto.t_id, <br/>
   Name = subcoto.t_desc <br/>
}); 
```

试图做一个左连接，但它返回一个烂摊子。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T13:12:55.477

我很久以前就解决了这个问题，但不记得我现在做了什么，不再有代码，只是想结束这个问题，抱歉没有帮助