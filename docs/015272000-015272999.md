# StackOverflow 问答 15272000-15272999

# c++ - 使用静态链接声明静态成员

> ID：15272012
> 
> 赞同：4
> 
> 时间：2013-03-07T13:05:30.020
> 
> 标签：c++, static, namespaces, linkage

我有一个 C++ 类，它声明了一个静态成员。整个类包含在一个头文件中，我宁愿避免创建一个 .cpp 文件只是为了包含静态成员定义。我一直在尝试使用 static 关键字（在 C 意义上）和匿名命名空间，这两者都应该给出一个在头文件静态链接（asfaik）中声明的变量，但是这两种方法都不起作用，谁能给我一个解决方案问题？

```
struct ServiceType {} ;
struct Transport
{
    static ServiceType service ;
};

//error: definition of ‘Transport::service’ is not in namespace enclosing ‘Transport’
//namespace { ServiceType Transport::service ; }

//error: ‘static’ may not be used when defining a static data member
//static ServiceType Transport::service ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:00:43.420

如果目标只是不必创建`.cpp`文件，最简单的解决方案可能是将静态数据成员包装在内联静态成员函数中。换句话说，类似：

```
struct Transport
{
    static ServiceType& service()
    {
        static ServiceType theData;
        return theData;
    }
}; 
```

当然，您必须使用语法`service()`，而不仅仅是`service`，来访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:13:22.810

您不能定义具有内部链接的静态成员。

如果您`service`在头文件中定义静态成员，您将在每个源中都有一个实例，其中包含此头文件。如果这不是问题，您可以将匿名命名空间包裹在整个`struct Transport`

```
namespace {
struct Transport
{
    static ServiceType service ;
};

ServiceType Transport::service;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:12:36.997

匿名命名空间在整个编译单元中都是可见的。如果您在多个源文件中包含标头，您将得到多个名为 Transport::service 的符号。那是行不通的，因为你会`symbol already defined`从链接器中得到一个错误。

恐怕 C++ 的工作方式不允许您在不移动文件中`service`符号的定义的情况下摆脱这种情况`.cpp`。

所以，在一个`.cpp`文件中，要么做，要么`Transport::ServiceType service;`如果你不想`service`成为命名空间的一部分，在`extern ServiceType service;`标题和.`ServiceType service;``.cpp`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:15:23.340

尝试

```
ServiceType Transport::service ; 
```

这是错误的：

```
namespace { ServiceType Transport::service ; } //You are adding it in an unnamed namespace, rather than whatever namespace Transport is actually in - presumably the global namespace 
```

这是错误的：

```
static ServiceType Transport::service ; // You dont need the static here, only in the struct. 
```

如果您坚持将它放在标题中，我希望您会收到链接器错误

# sql-server-2008 - 如何使用 2012 为 SQL Server 2008 开发？

> ID：15272016
> 
> 赞同：3
> 
> 时间：2013-03-07T13:05:36.533
> 
> 标签：sql-server-2008, version, compatibility, sql-server-2012

当我使用 MSBuild 4 时，我可以针对 .NET Framework 3.5 和更早的版本，并且仅在版本 4 上可用的所有功能在该项目中将不可用。

我想在 SQL Server 2012 中做类似的事情。我可以在其中配置一个数据库，使其行为类似于 SQL Server 2008 吗？我可以让一个数据库不接受仅适用于 SQL Server 2012 的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:09:34.083

您可以在数据库属性中设置兼容性级别。

1.  右键单击数据库
2.  点击`Properties`
3.  选择`Options`
4.  选择`Compatability Level`

    *   110 = SQL 2012
    *   100 = SQL 2008 和 2008 R2
    *   90 = SQL 2005

此选项仅影响此特定数据库的行为，而不影响整个服务器。它应该只被视为部分向后兼容。 **如果您的意图是让 SQL Server 将此数据库视为 SQL 2008 数据库，那么最好的方法是在 SQL 2008 而不是 SQL 2012 中运行它。**

这是一个非常详细的解释：[http ://technet.microsoft.com/en-us/library/bb510680(v=sql.110).aspx](http://technet.microsoft.com/en-us/library/bb510680(v=sql.110).aspx)

**T-SQL**

```
ALTER DATABASE database_name SET COMPATIBILITY_LEVEL = { 90 | 100 | 110 } 
```

# css - jQueryUI 选项卡出现在所有其他元素之上

> ID：15272022
> 
> 赞同：1
> 
> 时间：2013-03-07T13:05:58.207
> 
> 标签：css, jquery-ui, z-index

我普通的旧 CSS 菜单出现在 jQuery UI 的后面，比如标签！即使包含 div 的 z-index 是正确的。有没有办法解决这个问题？

![CSS 菜单出现在 jQuery UI 的后面，比如标签](../Images/bbd7ffac13ac1ac43fd9f71ec5aca0be.png)

```
/* dropdown menu container */
#navigation-1 li ul.navigation-2 {
    margin:0;
    padding: 5px;
    display:none;
    position:absolute;
    top:71px;
    left:-71px;
    border-radius: 4px;
    border: 3px solid #ea453c;
    background:white;
    width: 730px;
    box-shadow: 0 1px 6px #999;
    z-index: 999;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:10:23.487

是的。尝试探索或实验 css 中的位置，例如：相对、固定、绝对等。

注意：如果您的 div/元素没有相对、固定、绝对等位置，您将无法使用 z-index。：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:46:26.117

我使用 Firebug 更仔细地探索了 CSS，发现 ui-menu 类已经将位置设置为绝对。然后我添加了这个规则：

```
.ui-menu{
    z-index: 10;                             
} 
```

您可能必须根据情况尝试使用确切的值，但该值使我的菜单项安全地位于选项卡之上。如果您只想将其应用于特定菜单，则可以为菜单的父容器添加更具体的选择器。

# barcode-scanner - DS9808 规则单条码

> ID：15272026
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:06:09.223
> 
> 标签：barcode-scanner, motorola, handheld

我工作的公司最近更换了一些手持式扫描仪，并需要它们具有与一些旧扫描仪相同的功能。我们曾经使用 InterMec-EasySet 创建执行以下操作的条形码。

1.  扫描包含地址的 20 个条码之一（easySet 制作）
2.  扫描包裹上的许多跟踪条形码

结果：扫描地址条码后，扫描仪将设置其当前规则为“追加 [tab]”。[tab]' 和 [Address] 从现在开始的所有扫描。这样所有的扫描都会填写包裹信息然后是他们的 DB 程序下一个字段中的目标地址。这将一直持续到另一个地址被扫描，然后它会废弃它的规则并使用不同的地址创建一个新的。

现在我们有一个摩托罗拉（符号）DS9808

它具有规则编程但没有足够的内存来存储 20 多个地址。我可以创建一系列条形码来一个接一个地扫描，以使用[编程手册](http://www.google.ca/url?sa=t&rct=j&q=72e-69680&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=https%3A%2F%2Fdocs.symbol.com%2Fmanuals%2F6968003a.pdf&ei=QpM4UZ3zNuvy0wHu1IDIAg&usg=AFQjCNF086EEb-Y5twDMUKXPN5IQJy5JcA&bvm=bv.43287494,d.dmQ%22)设置我想要的规则但是随着流量的增加，这将是一个巨大的时间浪费。

问题：抱歉花了这么长时间才找到真正的问题。有谁知道如何解码[编程手册](http://www.google.ca/url?sa=t&rct=j&q=72e-69680&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=https%3A%2F%2Fdocs.symbol.com%2Fmanuals%2F6968003a.pdf&ei=QpM4UZ3zNuvy0wHu1IDIAg&usg=AFQjCNF086EEb-Y5twDMUKXPN5IQJy5JcA&bvm=bv.43287494,d.dmQ%22)中的条形码，以便我可以创建 1 个清除所有规则的条形码，然后将默认规则设置为 [数据扫描] [tab]“。” [标签] [固定地址]

如果其中有任何不清楚，请随时要求澄清。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:54:16.097

原来123Scan软件确实有这个功能......只是不是一个非常用户友好的程序......不知何故，我什至没有看到隐藏在右上角的按钮。

感谢大家的帮助

# sql - 如何获得以下输出？

> ID：15272030
> 
> 赞同：0
> 
> 时间：2013-03-07T13:06:20.370
> 
> 标签：sql, oracle

如何获得以下输出？

**输入：**

```
t1
-----------------
col1    col2
----------------
2        a
1        c
3        b
---------------- 
```

**输出：**

```
t1
-----------------
col1        col2
----------------
1           a
2           b
3           c
---------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:33:18.230

您可以尝试使用行号，例如：

```
SELECT row_number() OVER (ORDER BY a.col2) as col1, col2
FROM t1 a ORDER BY a.col2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:28:08.010

```
select  C1.col1, C2.col2
from
  (select col1, row_number() over (order by col1) rn
  from t1) C1
join 
  (select col2, row_number() over (order by col2) rn
  from t1) C2
on C1.rn=C2.rn
order by C1.rn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:10:19.353

尝试这个..

```
select col1,col2 from
(select col1,rownum rn from(select col1 from t1 order by col1)) a,
(select col2,rownum rn from(select col2 from t1 order by col2)) b
where a.rn=b.rn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:38:35.530

我认为以下查询可能会对您有所帮助。

```
SELECT * FROM t1 ORDER BY col1 ; 
```

请检查此链接以获取更多练习

[http://www.sqlfiddle.com/#!3/2e3e9/1/0](http://www.sqlfiddle.com/#!3/2e3e9/1/0)

# c# - 管理组合框和复杂对象

> ID：15272031
> 
> 赞同：3
> 
> 时间：2013-03-07T13:06:21.227
> 
> 标签：c#, wpf, combobox

我试图弄清楚如何处理带有复杂对象的组合框。

我有以下两个课程：

备份版本.cs

```
public class BackupVersion
{
public string Name { get; set; }
public BackupVersion() { }

    public BackupVersion(string name)
    {
        Name = name;
    }
} 
```

子系统版本.cs

```
public class SubsystemVersions : ObservableCollection<BackupVersion>
{
    public SubsystemVersions()
    {
        Add(new BackupVersion("amit"));
        Add(new BackupVersion("aaa"));
        Add(new BackupVersion("ofir"));
    }

} 
```

我还必须关注 XAML 窗口：

```
<Grid>
    <StackPanel>
        <StackPanel.Resources>
            <local:SubsystemVersions x:Key="Backups"/>
        </StackPanel.Resources>
        <ComboBox Name="c1"
                  ItemsSource="{StaticResource Backups}"
                  Text="mmm"
                  DisplayMemberPath="Name"
                  SelectedValuePath="Name"
                  IsEditable="true"
                  IsReadOnly="true"/>
        <TextBlock Text="{Binding ElementName=comboBox1, Path=SelectedItem}"/>
    </StackPanel>
</Grid> 
```

这样，在后面的代码中，我可以使用以下命令在组合框中获取选定的字符串：

```
this.c1.SelectedValue.ToString() 
```

我的问题是，我怎样才能取回原始对象，即 BackupVersion 对象？

如果我正在做一些不常见的事情，还请评论编码风格（例如，这是定义和绑定集合的最佳方式吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:07:43.320

要取回原始对象：

```
this.c1.SelectedItem; 
```

# php - CakePHP 没有看到多重关系 HABTM，而 SQL 查询工作正常

> ID：15272032
> 
> 赞同：0
> 
> 时间：2013-03-07T13:06:27.687
> 
> 标签：php, mysql, cakephp, cakephp-model

蛋糕查询：

```
$this->Token->find("first", array(
    "conditions" => array(
             "Token.token" => $token),
    "contain" => array( 
             "TokenGroup" => array(
                          "TokenPermission" => array("fields" => array("path") )
) ) )); 
```

返回（部分）如下内容：

```
[TokenGroup] => Array
    (
        [id] => 1
        [name] => admin
        [modified] => 2013-03-07 00:00:00
        [created] => 2013-03-07 00:00:00
        [TokenPermission] => Array
            (
            )

    ) 
```

TokenPermition 数组是空的，但是当我使用 SQL 时：

```
SELECT 
   TokenPermission.path 
FROM 
    tokens AS Token 
INNER JOIN 
   token_groups AS TokenGroup ON (Token.token_group_id = TokenGroup.id) 
INNER JOIN 
   token_groups_token_permissions AS JoinTable ON (TokenGroup.id = JoinTable.token_group_id) 
INNER JOIN 
   token_permissions AS TokenPermission ON (TokenPermission.id = JoinTable.token_permission_id); 
WHERE 
   Token.token = $token 
```

它返回我 TokenPermission 数据：

```
[TokenPermission] => Array
      (
             [path] => TOKEN_NUMBER
      ) 
```

此外，当我要求不同的用户组权限时，它可以返回分配给组号 1 的权限 - 这不是用户，而是管理员！

**那么，如果 SQL 返回一切正常，为什么 Cake 看不到正确的关系呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:44:41.623

如果查看 Cake 运行的查询，您可能会找到答案。将代码放在 find 方法之后：

```
$this->Token->->getDataSource()->getLog(false, false); 
```

# jquery - 重新绑定 Jquery 自动完成？

> ID：15272034
> 
> 赞同：0
> 
> 时间：2013-03-07T13:06:31.320
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete

我想在其选择事件上重新绑定自动完成插件，实际上我想从建议中删除所选项目。目前代码就像下面粘贴的一样，如果我在 select 函数中复制整个插件调用，那将是无稽之谈，因为我也必须将其粘贴到复制的调用的 select 事件中，依此类推。还有其他简单的方法吗？

```
$("#txtEmployeeID").autocomplete({
            source: function (request, response) {
                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");

                var matching = $.grep(newEmployeesWithIds, function (value) {
                    var name = value.value;
                    var id = value.id;

                    return matcher.test(name) || matcher.test(id);
                });
                response(matching);
            },
            select: function (event, value) {

                $.ajax({
                    type: "GET", //GET or POST or PUT or DELETE verb
                    url: "http://localhost:46455/EmployeeSearchService.svc/GetEmployee", // Location of the service
                    data: {
                        "name": value.item.value
                    }, //Data sent to server
                    dataType: "Json", //Expected data format from server
                    processdata: "false", //True or False
                    success: function (employee) {//On Successfull service call
                        //INSERTING THE SELECTED OBJECT IN A UL
                        var employee = $.parseJSON(employee);
                        $('#ulSelectedEmployees').append($('<li>').attr('id', employee.TRGEmpID).css('padding', '5px').attr('class', 'ui-menu-item').html(employee.FullName).append($('<img>').attr('src', 'Styles/images/close_icon.png').attr('height', '20px').css('float', 'right').css('padding', '2px 13px')));
                        if ($('#ulSelectedEmployees').css('display') == 'none')
                        {
                            $('#ulSelectedEmployees').show();
                            $('#' + employee.TRGEmpID).fadeIn(700);
                        }
                        else
                        {
                            $('#' + employee.TRGEmpID).fadeIn(700);
                        }
                        /*DELETING THE ELEMENT TO REBIND AUTOCOMPLETE*/
                        for(var k = 0 ; k < newEmployeesWithIds.length ; k ++)
                        {
                            if(newEmployeesWithIds[k].id == employee.TRGEmpID)
                                break;
                        }

                        newEmployeesWithIds.splice(k, 1);
                    },
                    error: function (msg) {//On UnSuccessfull service call
                        ServiceFailed(msg);
                    }
                });
            }
        }); 
```

# javascript - 如何显示下载文件弹出窗口（不是新窗口）？

> ID：15272042
> 
> 赞同：0
> 
> 时间：2013-03-07T13:06:48.277
> 
> 标签：javascript, jquery, asp.net, internet-explorer, download

我尝试使用javascript在IE上显示“另存为”弹出窗口（jquery也可以）。预期结果是： ![在此处输入图像描述](../Images/17d8d850a52c48778a0d8dc511376caa.png)

我使用这段代码：

```
window.open("some url on my server", "_self"); 
```

我得到： ![在此处输入图像描述](../Images/4830687e02df2d85cad6184ad7927e4f.png)

我怎样才能让它看起来像第一张图片？作为页面底部的弹出窗口，而不是像我得到的那样模态..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:13:19.820

你不能用 JavaScript 或 jQuery 做到这一点。您需要按如下方式设置请求的 HTTP 标头：

```
header('Content-disposition: attachment; filename=excel1.xlsx');
header('Content-type: application/vnd.ms-excel'); 
```

上面是一个 PHP 示例。告诉浏览器将请求作为八位字节流处理将提示用户进行`Save As...`对话。

# powershell - Powershell Hyper-V 脚本不起作用？+ 自动安装 Windows

> ID：15272049
> 
> 赞同：1
> 
> 时间：2013-03-07T13:07:17.277
> 
> 标签：powershell, automation, hyper-v

所以我有一个奇怪的问题。当我执行这样的命令时：

```
New-VM -Name "MattTest" -MemoryStartupBytes 2GB -BootDevice CD -SwitchName Lab -path c:\VMdocs -NewVHDSizeBytes 40GB –NewVHDPath c:\base.vhdx

Set-VMDvdDrive -VMName MattTest -Path C:\ISOFiles\Windows2008.

Start-VM -Name MattTest 
```

它工作正常，但是如果我制作一个脚本，我会收到大量错误，例如在名为 PS.ps1 并通过 Powershell 运行的脚本中完全相同的东西，我得到：

> New-VM : 参数无效。根据给定的标准无法找到任何开关。在 C:\Users\mrsmith\Desktop\PS.ps1:1 char:1 + New-VM -Name "MattTest" -MemoryStartupBytes 2GB -BootDevice CD -SwitchName Lab - ... + ~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : InvalidArgument: (Lab:String) [New-VM], VirtualizationInvalidArgumentException + FullyQualifiedErrorId : InvalidParameter,Microsoft.HyperV.PowerShell.Commands .NewVMCommand
> 
> Set-VMDvdDrive : 参数无效。Hyper-V 无法找到名为 MattTest 的虚拟机。在 C:\Users\mrsmith\Desktop\PS.ps1:3 char:1 + Set-VMDvdDrive -VMName MattTest -Path C:\ISOFiles\Windows2008。+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~ + CategoryInfo : InvalidArgument: (MattTest:String) [Set-VMDvdDrive], VirtualizationInvalidArgumentException + FullyQualifiedErrorId : InvalidParameter,Microsoft.HyperV.PowerShell.Commands.SetVMDvdDriveCommand
> 
> Set-VMDvdDrive : 参数无效。找不到 DVD 驱动器。在 C:\Users\mrsmith\Desktop\PS.ps1:3 char:1 + Set-VMDvdDrive -VMName MattTest -Path C:\ISOFiles\Windows2008。+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~ + CategoryInfo : InvalidArgument: (:) [Set-VMDvdDrive], VirtualizationInvalidArgumentException + FullyQualifiedErrorId : InvalidParameter,Microsoft.HyperV.PowerShell.Commands.SetVMDvdDriveCommand
> 
> Start-VM : 参数无效。Hyper-V 无法找到名为 MattTest 的虚拟机。在 C:\Users\mrsmith\Desktop\PS.ps1:5 char:1 + Start-VM -Name MattTest + ~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : InvalidArgument: (MattTest:String) [Start-VM], VirtualizationInvalidArgumentException + FullyQualifiedErrorId : InvalidParameter,Microsoft.HyperV.PowerShell.Commands.StartVMCommand

我不确定是什么原因造成的？是否与模块有关，因为我已经检查过并且 Hyper-V cmdlet 正在运行（考虑到我可以手动输入这些，它们会很好）

还有一个附带问题：这些说明将进入“安装 Windows XXXX”屏幕。有没有办法自动化这个过程？或者不是真的（比如让它点击下一步，选择一个硬盘驱动器，安装等等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:15:40.550

只是为了确保提示符（例如'PS C:\Users\mrsmith\Desktop>'）不是脚本的一部分，对吧？如果是这样删除它。

看起来，它是脚本的一部分，因为`PS`它是一个别名`Get-Process`，它尝试将“C:\Users\mrsmith\Desktop”作为进程名称传递。

# php - 带有 HTML 标签的 FPDF 文本

> ID：15272050
> 
> 赞同：0
> 
> 时间：2013-03-07T13:07:18.047
> 
> 标签：php, html, pdf, fpdf

我正在使用 FPDF 创建 A4 大小的 PDF，我可以添加文本/图像，这工作正常。我有一个动态生成的字符串，其中包含一些 HTML 标签（BR 等），我想知道如何将输出输出到 PDF 上，而不是从字面上打印标签。

```
$centre = urldecode($row_CertDetails['centre_name']);

$pdf->Text(10, 110, $centre); 
```

我在一些论坛上看到有人提到`WriteHTML`，但是我的 FPDF 版本似乎没有包含它。

它是一个附加组件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:20:35.830

Yes, it is an Add-On:

> **Write HTML**
> 
> Author: Clément Lavoillotte
> License: FPDF
> 
> This is an enhancement of the `WriteHTML()` method from tutorial 6\. Supported tags are: ...

Please see [Write HTML FPDF Script #42](http://www.fpdf.org/en/script/script42.php) which I think is the latest version, but feel free to [browse the FPDF scripts/Add-Ons](http://www.fpdf.org/en/script/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:44:26.647

反正我已经解决了。

因为我也在使用 FPDI，所以我所做的是在[http://www.fpdf.org/en/script/script42.php](http://www.fpdf.org/en/script/script42.php)中提取类的内容并将其放入`FPDI.php`文件中。

# ios - iOS，在Objective C中使用结构，结构值不可从超级视图分配

> ID：15272052
> 
> 赞同：6
> 
> 时间：2013-03-07T13:07:25.443
> 
> 标签：ios, objective-c, struct

可以说，我正在尝试使用结构将三个值存储为一个单元。`Expression not assignable`当我尝试从对象的超级视图将值分配给结构的值时，我收到一个错误：“ ”。

有谁知道这是为什么？

在我班级的 .h 文件中，我定义了结构和属性

```
@interface MyClass : UIView

{
    struct customStruct {
        float a;
        float b;
        float c;
    };

}

@property (assign, nonatomic) struct customStruct myStruct; 
```

从超级视图我尝试分配一个值，我得到一个错误：“ `Expression not assignable`”

```
object.myStruct.a = someValue; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T13:13:23.423

试试这个：

```
struct customStruct aStruct = object.myStruct;
aStruct.a = someValue;
object.myStruct = aStruct 
```

这与不能这样做的情况完全相同：

```
view.frame.size.width = aWidthValue; 
```

顺便说一句，在类接口中声明结构似乎是一种非常糟糕的风格。这更清洁：

```
typedef struct { 
    float a;
    float b;
    float c;
} customStruct;

@interface MyClass : UIView

@property (assign, nonatomic) customStruct myStruct; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T13:12:28.950

这是因为`object.myStruct`返回结构成员的副本，并且没有必要更改`a`该副本的成员。

您应该让整个结构更改成员，然后再次设置结构成员（使用 get/set 合成方法）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T13:12:51.490

在范围之外/之前定义它`interface`：

```
struct LevelPath{
    int theme;
    int level;
};

//here goes your interface line
@interface BNGameViewController : UIViewController{
}
//create propertee here
@property (nonatomic, assign) struct LevelPath levelPath; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T18:05:39.060

为了补充前面的建议，我建议不要将您的结构存储为属性，而是存储为成员变量。例如：

```
@interface MyClass () {

    CGPoint myPoint;

} 
```

然后在您的班级中，您可以直接为该结构分配新值：

```
myPoint.x = 100.0; 
```

而不是@property，它是只读的：

```
myPoint = CGPointMake(100.0, myPoint.y); 
```

鉴于这不是 NSObject 子类，除非您要覆盖 getter/setter 方法，否则我看不到将其变为一个的目的`@property`，因为这对于 ARC 帮助您的对象的内存管理非常有用。但是，如果我在这一点上错了，请纠正我（哎哟）。

# android - android 4.0-4.2 的不同手机上的不同 WIDGET 边距？

> ID：15272053
> 
> 赞同：0
> 
> 时间：2013-03-07T13:07:28.357
> 
> 标签：android, widget, margins

我有一个小问题 - 我有适用于 android ICS 及更高版本的应用程序（主屏幕小部件）。但是具有不同操作系统版本（4.0.4、4.1.2、4.2 等）以及不同品牌（三星、HTC、LG ......）的不同手机使我的应用看起来不同。

好的，这并不总是发生，但在某些手机上，只有 Android 会为我自己添加自动边距 - 而在某些手机上则不会！这怎么可能，以及如何避免这种情况？看起来每个品牌都以自己的方式做这件事——这对他们来说很好，但对我来说很糟糕:)

编辑：我使用 dp，而不是 px。主要问题不在于 dp/px 也不在于纵向/横向变化。主要问题是，例如在 phone1 上，我的小部件没有边距（就像粘在屏幕边框上一样），而在其他手机上，它具有应有的自动边距。当我将自己的边距添加到小部件提供程序时，它在手机 1 上具有此边距，但在其他手机上它具有（我的边距 + 自动边距）。希望，现在很清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:12:26.073

欢迎来到真人秀，Android 不是平台独立的，Java 也不是。

出于这个原因，单个 android layout.xml 应该使用在所有目标设备中都可以接受布局的元素。屏幕比例不同，dpi不同分辨率不同......作为最佳实践：

使用 dp 大小而不是像素 为肖像和风景做不同的布局 根据屏幕大小（和不同的布局）有多个文件夹

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:45:29.490

好吧，要关闭这个答案-看起来确实没有选择在所有设备上具有相同的边距-因为不同的设备使用不同的主屏幕实现。我对此无能为力...关闭。

# r - 有没有一种惯用的方法将列表或向量作为参数拼接到函数中？

> ID：15272054
> 
> 赞同：3
> 
> 时间：2013-03-07T13:07:35.503
> 
> 标签：r

```
v <- runif(100, 0, 10)
seq(???(round(range(v))), length.out=5) 
```

有便利功能吗？？？或以最少的击键次数完成此操作的其他方式——尤其是在交互工作时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:13:38.273

您正在寻找`do.call`

```
do.call(seq,c(round(range(v)),list(length.out=5))) 
```

您需要使用`c(...,list(OtherArgs))`将所有参数组合到一个列表中。

但是，如果我想在交互工作时用最少的击键来做到这一点，我可能会用“硬”的方式来做：

```
rv <- round(range(v))
seq(rv[1],rv[2],length.out=5) 
```

（56 对 51 次击键，但要跟踪的嵌套括号更少，两个短命令可能比一个长命令更容易）

# java - JavaMail and Java 1.4 - Logger not found

> ID：15272058
> 
> 赞同：1
> 
> 时间：2013-03-07T13:07:44.507
> 
> 标签：java, jakarta-mail, jdk1.4

I'm trying to use JavaMail API 1.4.6 in my project which uses Java 1.4 (required). I'm getting error:

```
[stderr] java.lang.NoClassDefFoundError: java.util.logging.Logger  
[stderr]    at com.sun.mail.util.MailLogger.<init>(MailLogger.java:104)  
[stderr]    at javax.mail.Session.initLogger(Session.java:227)  
[stderr]    at javax.mail.Session.<init>(Session.java:212)  
[stderr]    at javax.mail.Session.getDefaultInstance(Session.java:315) 
```

Where can I download the old java libraries to include in my project? I have only Java 1.7 installed on my Windows 8 PC.

Is it possible to use a different Logger library here, or try and older JavaMail API version?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:27:55.620

You mention in [this comment](https://stackoverflow.com/questions/15272058/javamail-and-java-1-4-logger-not-found/15273739#comment21545221_15272273) that you're using the JRE on an embedded device (Ricoh printer). If you're referring to Ricoh's [ESA](http://www.ricoh.com/esa/) then this claims to be J2*ME*, not J2*SE*. J2ME includes some but not all the standard J2SE classes, and `java.util.logging` appears to be one of those packages that is not included.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:18:30.710

You can use Log4J library for logging. Its open source and you can download the same from

```
http://logging.apache.org/log4j/1.2/download.html 
```

So, you can use your Java lib with this Log4j. You have to add this lin in your classpath.

Following is the simple configuration for Log4j

```
log4j.rootLogger=INFO, file, stdout

 log4j.logger.com.test.pkg=info
 log4j.logger.org.hibernate.SQL=STDOUT

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=/tmp/test.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=7
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d %-5p [%t] [%c{1}:%L] %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %-5p [%t] [%c{1}:%L] %m%n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T20:48:22.783

JavaMail 1.4.6 is the first release to [add support for debug output using java.util.logging](https://java.net/projects/javamail/sources/mercurial/content/doc/release/CHANGES.txt?rev=873).

You can try downgrade to [JavaMail 1.4.5](http://www.oracle.com/technetwork/java/javamail/javamail145-1904579.html) which doesn't depend on `java.util.logging` and use the [com.sun.mail:android-activation:1.5.5](https://java.net/projects/javamail/pages/Android) for the activation dependency if that is not already included with your Java Runtime. Out of the box, [JavaMail doesn't support JavaME](https://stackoverflow.com/questions/1701098/which-library-is-used-to-access-the-gmail-emails-using-j2me).

# jqgrid - 使用不同数据绑定网格时如何避免调用page_load方法

> ID：15272059
> 
> 赞同：0
> 
> 时间：2013-03-07T13:07:45.020
> 
> 标签：jqgrid, postback

我想通过在服务器端将其与不同的 List<> 对象绑定来更改按钮单击时的网格视图中的数据，它成功地绑定了数据，但是由于它是在按钮上的回发单击，因此网格视图被加载了旧数据在 page_load 方法中对其进行了初始化。

在我的按钮的 onclick 事件中将网格与新数据绑定后，如何避免调用页面加载方法。

我尝试使用 (!isPostBack) 但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:59:27.563

让您的按钮事件设置一个网格参数，该参数回发到您的服务器控件，指示您正在更改哪个数据源为网格提供数据，然后重新加载网格。它现在应该只显示新数据集。

例子：

$('#gridName').jqGrid('setGridParam', { postData: { ChangeGridDataSet: true} }).trigger('reloadGrid', [{ page: 1}]);

# android - 两次调用 moveTaskToBack

> ID：15272068
> 
> 赞同：0
> 
> 时间：2013-03-07T13:08:11.997
> 
> 标签：android

我正在创建一个主屏幕应用程序。我希望这个应用程序可以用作锁屏。因此，当我写下正确的密码时，我会使用 moveTaskToBack 将任务置于后台运行，并且运行良好。

接收 Intent.ACTION_SCREEN_ON 我开始使用相同的活动实例

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(i); 
```

什么也在起作用。但在那之后，如果我再次输入正确的密码并调用 moveTaskToBack，它就不起作用了。

恢复：我第一次调用 moveTaskToBack 它运行良好，但在第二次调用中，它没有。

在我的宣言中：

```
android:launchMode="singleInstance" 
```

# php - 用php合并两个文件文本

> ID：15272069
> 
> 赞同：2
> 
> 时间：2013-03-07T13:08:11.887
> 
> 标签：php

我有两个以这种方式创建的文本文件：

```
<?php
$lines = file('Country.txt');
$newf = array();
foreach ($lines as $line)
  $newf[] = substr($line, 2);
file_put_contents('country2.txt', implode("\n", $newf));

$lines2 = file('countryenglish.txt');
$newf2 = array();
foreach ($lines2 as $line)
  $newf2[] = substr($line, 3);
file_put_contents('countryenglish2.txt', implode("\n", $newf2));

?> 
```

两者都显示如下数据：

```
Country2.txt: 
Text1Data1
text1Data2
text1Data3
> 
countryenglish2.txt 
Text2Data1
text2Data2
text2Data3 
```

我想显示：

```
Text2Data1Text1Data1 
text2Data2text1Data2
text2Data3text1Data3 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:11:22.457

试试这个：你需要提供第三个参数`FILE_APPEND`，否则它会覆盖文件。

```
file_put_contents('countryenglish2.txt', implode("\n", $newf2), FILE_APPEND); 
```

参考： http: [//php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:13:11.077

从您的函数中，您可以执行以下操作：

```
$newf3 = array();
$to = count($newf2);

for ($i=0; $i<$to; $i++) {
  $newf3[] = $newf2[$i] . $newf1[$i];
}

print_r($newf3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:16:40.230

你可以尝试这样的事情：

```
$lines = file('Country.txt');
$lines2 = file('countryenglish.txt');

foreach ($lines as $key => $val) {
    $lines[$key] = $val.$lines2[$key];
}

file_put_contents('countryenglish2.txt', implode("\n", $lines)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:14:48.703

上面的文件附加答案是最好的方法。这里有一个来源供您参考[http://w3schools.com/php/php_file.asp](http://w3schools.com/php/php_file.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-11T00:28:06.033

你可以签出这个：[https ://github.com/bircher/php-merge](https://github.com/bircher/php-merge)

> 在处理文本的修订时，有时会面临一个问题，即基于相同的原始文本有多个修订。我们不想选择一个并丢弃另一个，而是要合并两个修订版。
> 
> Git 已经非常出色地做到了这一点。在 php 应用程序中，我们需要一个简单的工具来做同样的事情。有 xdiff_string_merge3 功能的 xdiff PECL 扩展。但是 xdiff_string_merge3 的行为方式与 git 不同，并且 xdiff 在您的系统上可能不可用。
> 
> PhpMerge 是一个解决这个问题的小型库。有两个类：\PhpMerge\PhpMerge 和 \PhpMerge\GitMerge，它们实现了 \PhpMerge\PhpMergeInterface，它只有一个合并方法。
> 
> PhpMerge 使用 SebastianBergmann\Diff\Differ 来获取不同版本之间的差异并从中计算合并文本。GitMerge 使用 GitWrapper\GitWrapper，将文本写入临时文件并使用命令行 git 合并文本。

# drop-down-menu - 用自定义图像替换 Kendo 默认下拉列表模板？

> ID：15272072
> 
> 赞同：1
> 
> 时间：2013-03-07T13:08:25.177
> 
> 标签：drop-down-menu, kendo-ui, background-image

我想要做的是当我点击我的图片时，我希望 kendo dorpdownlist 向我推荐一些选项。是否可以 ？

我试图用 CSS 替换下拉列表的默认模板，但没有成功。

在这里，我尝试简单地替换下拉列表的默认黑色箭头，但没有成功。来源：[http ://docs.kendoui.c​​om/getting-started/web/appearance-styling?x=54&y=12](http://docs.kendoui.com/getting-started/web/appearance-styling?x=54&y=12)

-----------------------------------------HTML

```
<select id="customList" class="k-widget k-dropdown"></select> 
```

-----------------------------Javascript

```
$("#customList").kendoDropDownList().data("kendoDropDownList"); 
```

-----------------------------------------CSS

```
#customList .k-icon .k-i-arrow-s
{
    background-image:url('../../resources/img/components/addtab.png');
} 
```

但我真正想要实现的是完全替换剑道下拉列表的默认模板，并用我的图像代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:41:09.350

有几个问题要记住：

1.  包含箭头的 HTML 元素不是兄弟姐妹的后代，`customList`而是兄弟姐妹的后代。这是因为 KendoUI用其他元素*装饰*了原始元素。
2.  您只是重新定义`background-image`，但您需要重新定义两个额外的 CSS 属性：因为它是在 Kendo UI CSS 文件中定义的，用于偏移`background-position`图标。`background-size``k-i-arrow-s`

所以，你应该这样做：

```
span.k-icon.k-i-arrow-s {
    background-image:url('../../resources/img/components/addtab.png');
    background-size: 16px 16px;
    background-position: 0 0;
} 
```

如果您可以重新定义每个附加元素，**或者**您以编程方式定义 CSS：

```
.ob-style {
    background-image:url('../../resources/img/components/addtab.png');
    background-size: 16px 16px;
    background-position: 0 0;
} 
```

和一个 JavaScript：

```
var list = $("#customList").kendoDropDownList({...}).data("kendoDropDownList");
$(list.wrapper).find(".k-icon.k-i-arrow-s").addClass("ob-style"); 
```

# qt - 在 QT 中连接信号和插槽

> ID：15272074
> 
> 赞同：0
> 
> 时间：2013-03-07T13:08:33.060
> 
> 标签：qt, signals-slots

是否可以将 A 类信号连接到自己的插槽

示例为`connect(objecta1, Signala1,objecta1,slota1)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:13:27.823

是的，一个类可以对自己的信号做出反应。但请注意不要从触发的插槽发出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:49:58.990

是的，它非常简单，例如 QTimer：

```
myClass::myClass(QObject * parent):QObject(parent) {
    timer = new QTimer();
    timer->setSingleShot(true);
    connect(timer, SIGNAL(timeout()), this, SLOT(myClassTimeout() ));
    timer->start(1000);
} 
```

然后你有

```
void myClass::myClassTimeout() { 
//...
} 
```

# asp.net - Is there any way to get notified about the internal exceptions thrown by Sql Server2005

> ID：15272078
> 
> 赞同：1
> 
> 时间：2013-03-07T13:09:04.130
> 
> 标签：asp.net, sql-server-2008, tsql, sql-server-2005

I want to know , If I can catch all errors occurred in my database and log it to some user defined table.

**Reason:**

Why I am as so is that, I have web-app running with `Sql2005` as backend. Web app is developed using `Linq2Sql`. It was developed on `2008R2` where as deployed over `Sql2005` on a `Shared Hosting environment`.

I am continuously getting `datetime datatype` error, as in 2008 i have used `date datatype`.

So, what I want is to catch any similar exceptions internally , occurred anywhere in my database and log it to my custom table with fields

**Requirements**

1.  Table Name from where the exception has been thrown
2.  Name of Procedure, in case if I use it in future
3.  Exception message
4.  Date time of occurrence

**Please Note**

I dont want to write tablewise exception handling procedures. I want some generic way to get all exceptions, as same as we handle errors in ASP.Net , Global.asax.

**Exception I am getting**

`The version of SQL Server in use does not support datatype 'date'.`

based on above exception, I am not sure which table is throwing this exception. So I want a stored procedure to catch the detail and save to my custom table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:31:54.897

Those errors aren't *internal* to SQL server. It's probably not even SQL that's giving it to you but rather the db drivers.

If you are using stored procedures, then SQL server would have prevented those s'procs from even being created with the unsupported data type usage.

Considering you are using LINQ, my guess is that LINQ itself is throwing the problem and you'll need to use your regular exception handling around database calls to find it.

Of course, a better path, would be to regenerate your model and/or do a code analysis to locate all references to invalid data types. Or, even better, switch to a host that is somewhat up to date with their version of SQL server. There have been a lot of security and performance improvements since then.

# matlab - matlab中的结构：节省负载和工作

> ID：15272079
> 
> 赞同：0
> 
> 时间：2013-03-07T13:09:09.663
> 
> 标签：matlab, structure

我正在尝试使用 matlab 中的结构。我有一个看起来像这样的代码：

```
for i=1:10
    a(i).p=some value;
    a(i).q=some other value
end 
```

我将它保存到一个mat文件，但它似乎并不成功。谁能告诉我，如何将这个结构保存并加载到文件中/从文件中读取特定类型的数据？`a(i).q`例如，加载结构后如何读取字段？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:27:01.367

用于保存和加载使用[`save`](http://www.mathworks.com/help/matlab/ref/save.html)and [`load`](http://www.mathworks.com/help/matlab/ref/load.html)：

```
for ii=1:10
    a(ii).p = rand(1);
    a(ii).q = rand(1);
end
save( 'myMatFile.mat', 'a' ); % note that the variable name is passed as a STRING

clear a; % remove a from workspace. it is gone...
exist( 'a', 'var' ), % make sure a is gone

load( 'myMatFile.mat' ); % load 
exist( 'a', 'var' ), % a now exists! Ta-da!!

a(5).q, % access the fifth element of a 
```

PS
[最好不要在Matlab中使用`i`and作为变量`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

# visual-studio - 在 IIS Express 下运行时，每次更改 .cshtml 文件中的内容时都必须重新编译？

> ID：15272082
> 
> 赞同：2
> 
> 时间：2013-03-07T13:09:24.030
> 
> 标签：visual-studio

我们最近从内置的 VS.NET 开发网络服务器更改为 IIS Express，但现在我们遇到了一个奇怪的问题，每次更改 .cshtml 文件时，网络服务器都会抱怨无法读取资源文件：

编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

读取资源文件时出错'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\f8182027\1ae20e7e\ResX\res​​ources.resetpassword.nb-no.resources'-'系统不能找到指定的文件。

重新编译解决了这个问题，但它很烦人。

任何人都知道如何解决这个问题？

# visual-c++ - 如何启用手写笔输入并阅读文本并将其保存在 Windows 7 CE 应用程序中？

> ID：15272083
> 
> 赞同：0
> 
> 时间：2013-03-07T13:09:31.130
> 
> 标签：visual-c++, silverlight-3.0, windows-embedded-compact, windows-7-embedded

我一直在使用 Windows 7 CE 设备。该平台使用 Silverlight 3 for Windows Embedded 和 Expression Blend 3。代码将在 VC++ 中完成。我对一个要求感到震惊。

用户可以选择在他想要的屏幕的任何部分写入文本。我必须实现这个功能。无论他写什么，我都需要以他写的方式保存（手写应该是一样的）。

我在编码和 VC++ 方面都没有发言权。我正在寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:24:46.000

我得到了答案。我们有 INKPresenter 类，所以我们可以实际使用它:)

我尝试并完成了..感谢您不回复

# php - PHP : 查找 Chrome 和 Safari 浏览器

> ID：15272084
> 
> 赞同：13
> 
> 时间：2013-03-07T13:09:31.670
> 
> 标签：php, user-agent

我使用下面的代码来查找用户代理，

```
 $user_agent = $_SERVER['HTTP_USER_AGENT']; 
    if (preg_match('/MSIE/i', $user_agent)) { 
       echo "Internet Explorer";
    }
    if (preg_match('/Firefox/i', $user_agent)) { 
       echo "FireFox";
    }
    if (strpos( $user_agent, 'Chrome') !== false)
    {
        echo "Google Chrome";
    }
    if (strpos( $user_agent, 'Safari') !== false)
    {
       echo "Safari";
    }
    if (preg_match('/Opera/i', $user_agent)) { 
       echo "Opera";
    }

    ?> 
```

但是我的 chrome 浏览器突然返回到 useragent 下面

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.155 Safari/537.22 
```

它包含单词 safari 和 chrome.so 都打印了浏览器名称。this.thanks 的解决方案是什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T13:14:08.327

Chrome 的用户代理包含`Safari`但 Safari 的用户代理不包含`Chrome`所以使用`if ... elseif`：

```
if (stripos( $user_agent, 'Chrome') !== false)
{
    echo "Google Chrome";
}

elseif (stripos( $user_agent, 'Safari') !== false)
{
   echo "Safari";
} 
```

注意：使用`stripos`而不是`strpos`考虑大小写变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:14:16.527

试试这个 ：

```
$browser = get_browser(null, true);
print_r($browser); 
```

From doc ：**尝试通过在 browscap.ini 文件中查找浏览器的信息来确定用户浏览器的功能。**

参考： http: [//php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

# css - Bootstrap 子菜单出现在下拉菜单中

> ID：15272085
> 
> 赞同：1
> 
> 时间：2013-03-07T13:09:32.680
> 
> 标签：css, twitter, drop-down-menu, twitter-bootstrap, submenu

我正在使用最新的 Twitter Bootstrap 和来自["Awful Media"](http://awfulmedia.com/downloads/free-responsive-website-template-respond-1-5-html5-css3-bootstrap/)的 "Respond" 主题。

我的问题是，我的下拉菜单的子菜单出现在下拉菜单上方，而不是在右侧左右，您无法正确阅读任何内容..

（我不知道我应该准确发布哪个代码，如果您查看我的[beta-Testsite](http://www.testpflanze.de/)可能会有所帮助？导致问题的子菜单位于“采取行动”下。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:21:25.967

从这里匹配您的 html 和类

它与您的代码完全相同{可以使用相同的}

[用于引导的 Devin walker 多子导航栏](http://bit.ly/YOTgk5)

* * *

并为新孩子添加主题课程以获得相同的外观和感觉

## 如果这解决了

为下拉项目尝试这些样式

```
.navbar .nav > li > a {
  float: none;
  margin: 25px 10px 5px;
  padding: 5px;
  font-size: 18px;
  line-height: 19px;
  margin-left: 20px;
  color: #999999;
  border: none;
  background-image: url("../img/color.jpg");
  background-size: 100%;
  background-position: -200px -10px;
  background-repeat: no-repeat;
  font-family: 'Lato', sans-serif;
  -webkit-transition: background-position .5s ease, color .8s ease;  
  -moz-transition: background-position .5s ease, color .8s ease;
  -o-transition: background-position .5s ease, color .8s ease;
}
.navbar .nav > li > a:hover {
  color: #fff;
  background-position: 0 0;
  text-decoration: none;
  background-color: transparent;
  font-family: 'Lato', sans-serif;
}

.navbar .nav .active > a,
.navbar .nav .active > a:hover {
  text-decoration: none;
  color: #fff;
  background-position: 0 0;
  background-image: url("../img/color.jpg");
  background-size: 100%;
} 
```

# python - 在 Python 2.7 上使用 xpath 提取 href 值

> ID：15272087
> 
> 赞同：4
> 
> 时间：2013-03-07T13:09:34.233
> 
> 标签：python, html, xpath

我有这个 HTML：

```
<a href="some content">Click here</a> 
```

如何在 Python 2.7 上提取`some content`和`click me`使用？`xpath`

到目前为止，我有以下内容（仅从 href 结果中提取“一些内容”）：

```
import lxml.etree as LE
import requests

r = requests.get("http://localhost")
html = r.text
root = LH.fromstring(html)
print root.xpath('//a/@href') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:15:29.050

您只能使用 XPath 选择一个或另一个，但您可以选择所有`<a>`元素，然后选择`href`属性和文本内容，如下所示：

```
for elt in root.xpath('//a'):
    print(elt.attrib['href'], elt.text_content()) 
```

# c++ - SDL 事件循环退出？

> ID：15272089
> 
> 赞同：4
> 
> 时间：2013-03-07T13:09:41.613
> 
> 标签：c++, visual-c++, sdl

我正在使用 SDL 为图形制作 C++ 中的 RTS。

每次我运行游戏时，它都会在没有错误或编译器调试窗口中出现任何错误的情况下崩溃。它不会立即或持续崩溃，有时需要 10 秒才能崩溃，有时需要 2 分钟才能崩溃。

当我玩弄返回值时（在 main 函数的末尾），结果发现它并没有崩溃，而是退出，因为返回值与我将其更改为一致。

我唯一的理论是我的民意调查事件循环出现故障并告诉程序在不应该退出时退出。

这是我的事件循环，包含在我的游戏循环中：

```
 if( SDL_PollEvent( &event ) )
    {
        if( event.type == SDL_MOUSEMOTION )
        {
            mx = event.motion.x;
            my = event.motion.y;
        }

        if( event.type == SDL_MOUSEBUTTONDOWN )
        {
            if( hut.getselected() && hut.getplacable() )
            {
                hut.place( map );
            }
        }

        if( event.type == SDL_QUIT )
        {
            quit = true;
        }

        switch( event.key.keysym.sym )
        {
        case SDLK_ESCAPE: quit = true; break;
        }
    } 
```

是否有可能当鼠标移动或单击时，它会混淆它的退出？我认为 ram 也没有超载，因为它只显示它需要平铺的东西。

我的编译器 VisualC++ 是否也有可能搞砸了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T15:01:32.233

如何将代码段末尾的开关更改为：

```
if (event.type == SDL_KEYDOWN && event.key.keysym.sym == SDLK_ESCAPE) {
    quit = true;
} 
```

因为在您的代码中您检查所有事件的键符号，所以当您测试它是否是转义时，通常事件类型错误，并且您得到键符号的“垃圾”值，有时它与 ESC 匹配。

* * *

`event.type`实际上测试with 开关可能是个好主意：

```
switch(event.type) {
case SDL_MOUSEMOTION:
    //....
    break;
case SDK_KEYDOWN:
    switch(event.key.keysym.sym) {
    case SDLK_ESCAPE: 
        quit = true;
        break;
    // cases for other keypresses
    }
    break;
// cases for other events
} 
```

# c++ - 返回特定类型对象的工厂函数-如何以更好的方式执行此操作

> ID：15272090
> 
> 赞同：3
> 
> 时间：2013-03-07T13:09:42.177
> 
> 标签：c++, pointers, shared-ptr, factory

我有 3 个类，，，，`B`派生自一个基类：`C``D``A`

```
class A
{
// body
};

class B : public A
{
// body
};

class C : public A
{
// body
};

class D : public A
{
// body
}; 
```

我想创建一个工厂函数，它可以让我创建特定类型（或）的对象`B`并将`C`其`D`作为指向`A`类的指针返回：

```
typedef std::shared_ptr<A> a_ptr;

a_ptr createObject(int type)
{
    switch(type)
    {
    case 0:
        return a_ptr(new B());
    break;
    case 1:
        return a_ptr(new C());
    break;
    case 2:
        return a_ptr(new D());
    break;
    }
} 
```

然后，如果我有一个类型的指针`B`，我想将`B`工厂创建的对象分配给它。我想到的唯一合理的解决方案是：

```
std::shared_ptr<B> b = std::shared_ptr<B>(dynamic_cast<B*>(createObject(0))); 
```

但它看起来很丑。有没有更好的解决方案？或者也许我应该尝试用我的函数创建对象的不同方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:17:09.213

如果要执行 a 的运行时向下转换`shared_ptr`，请使用`std::dynamic_pointer_cast<>`：

```
std::shared_ptr<B> b = std::dynamic_pointer_cast<B>(createObject(0)); 
```

如果要创建的对象的类型是在运行时确定的，并且您*尝试*检查返回的对象是否具有 type `B`，那么我看不到比动态向下转换更好的选择。

另一方面，如果您100%*确定*指向的对象具有 type `B`，那么您可以使用`std::static_pointer_cast<>`：

```
std::shared_ptr<B> b = std::static_pointer_cast<B>(createObject(0)); 
```

但是，在您 100% 确定地知道这一点的那一刻，我不明白为什么这样的指令不应该变成：

```
std::shared_ptr<B> b = std::make_shared<B>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:21:42.517

对于少数“类型”，您的 createObject 看起来还不错。如果有很多“类型”，它只会变得丑陋。然后，您可以通过为相应类的工厂函数创建一个表映射类型来做得更好。例如：

```
std::map<int, std::function <a_ptr ()> > dispatcherTable = 
{
    {0, createB },
    {1, createC },
    {2, createD }
}; 
```

然后你可以使用你的“类型”作为表的索引：

```
new_a = dispatcherTable[a](); 
```

那些“createB”、“createC”等可以是你工厂类的静态成员或B、C等类的静态成员。你想要的任何方式。

# ruby-on-rails-3.2 - Rails 3.2 和 Ransack - 是否可以在 sort_link 中传递其他参数？

> ID：15272095
> 
> 赞同：2
> 
> 时间：2013-03-07T13:09:53.683
> 
> 标签：ruby-on-rails-3.2, ransack

一切都在标题中...

使用 rails 3.2.11 和 Ransack 都可以正常工作...我添加了一个功能，让我的用户选择每页显示的项目数，它也可以正常工作，但是当我单击 sort_link 时，我失去了“per_page”选项

因为我可以像这样将其他参数传递给 will_paginate

```
<%= will_paginate :params => {:pp => params[:pp]} %> 
```

有没有办法用 Ransack sort_link 做同样的事情？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T10:11:38.353

我找到了！

解决方案 ：

```
<th><%= sort_link(@q, :profile_last_name, 'Last name',{:pp => params[:pp]}) %></th> 
```

干杯

# jquery - 滚动功能上的 jquery 加载无法正常工作

> ID：15272098
> 
> 赞同：0
> 
> 时间：2013-03-07T13:09:59.900
> 
> 标签：jquery, function, automation, infinite-scroll

我使用 fieg 的 jquery.ias.js，它有一个函数“onRenderComplete”。你可以在[github 链接上得到这个](https://github.com/webcreate/infinite-ajax-scroll)

我有一个文章列表，其中加载新项目效果很好。但是每个生成快速视图的项目都有一个脚本部分

```
$("p.ex-[ID]").click(function(){
        $(".express-[ID] .top").delay(500).load("/[Name4URL]/a-[ID]/ .express");
        $(".express-[ID] .bottom-ex .ex-desc").delay(500).load("/[Name4URL]/a-[ID]/ #tab1.tab_content");
        $(".express-container-[ID]").fadeIn(500);

        window.setTimeout(function() {
            MagicZoomPlus.refresh("Zoomer2");
            $(".mz-thumbs a:gt(3)").addClass("nope");
            $(".mz-thumbs a:gt(7)").addClass("nope2");

            $(".image-container .mz-thumbs a:eq(3)").addClass("no-margin-right no-margin-top");
            $(".image-container .mz-thumbs a:eq(7)").addClass("no-margin-right");
            $(".image-container .mz-thumbs a:eq(0)").addClass("no-margin-top");
            $(".image-container .mz-thumbs a:eq(1)").addClass("no-margin-top");
            $(".image-container .mz-thumbs a:eq(2)").addClass("no-margin-top");
        }, 1200); 
    });

    $(".express-container-[ID] .close").click(function(){
        $(".express-[ID] .top").load("/[Name4URL]/a-[ID]/ .clear");
        $(".express-[ID] .bottom-ex .ex-desc").load("/[Name4URL]/a-[ID]/ .clear");
        $(".express-container-[ID]").fadeOut(500);
    }); 
```

对于未加载的项目，这很好用。但是新加载的项目没有触发。这是 jquery.ias 部分：

```
$(document).ready(function() {
jQuery.ias({
    container : ".container",
    item: ".item",
    pagination: ".articlePages",
    next: 'a .next',
    loader: '<img src=/layout/cyt/img/ajax-loader.gif"/>',
    triggerPageThreshold: 1,
    history: false,
    onRenderComplete: function(items) {

    }
});
}); 
```

我试图将脚本部分实现到 onRenderComplete 函数中，但它不起作用，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T15:32:02.010

我相信你应该使用 jquery .on() 方法[http://api.jquery.com/on/](http://api.jquery.com/on/)。click 方法不适用于动态插入的 DOM 元素。你应该这样做：

```
$("selector-that-contains-p.ex-[ID]").on("click", "p.ex-[ID]", function() {// do the stuff
}); 
```

# php - php mysql 将 * 添加到 SELECT 语句

> ID：15272100
> 
> 赞同：1
> 
> 时间：2013-03-07T13:10:02.257
> 
> 标签：php, mysql

我怎样才能做出这样的事情（在 SELECT 命令中添加一些东西）：

```
 $query = "SELECT a.name,a.surname,b.email,c.phone 
           FROM users as a 
           inner join users_email as b 
           inner join users_phone as c
           WHERE a.id=b.id AND a.id=c.id";

 $query .= "ORDER BY a.surname";  

 $result = mysql_query($query,$con); 
```

结果应该是：

```
$query = "SELECT a.name,a.surname,b.email,c.phone 
          FROM users as a 
          inner join users_email as b 
          inner join users_phone as c
          WHERE a.id=b.id AND a.id=c.id
          ORDER BY a.name";   

$result = mysql_query($query,$con);
$row=mysql_num_fields($result) 
```

...但它给出了一个错误：mysql_num_fields() 期望参数 1 是资源，在第 32 行的 C:\xampp-portable\htdocs\db\file.php 中给出的布尔值...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:12:04.533

`space`连接查询时总是给出一个。

```
 $query = "SELECT a.name,a.surname,b.email,c.phone 
           FROM users as a 
           inner join users_email as b 
           inner join users_telefon as c
           WHERE a.id=b.id AND a.id=c.id ";

 $query .= " ORDER BY a.prenume";
            ^ 
```

也有练习`mysql_error()`。

```
$result = mysql_query($query,$con) or die(mysql_error()); 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:12:27.570

后面加空格

```
WHERE a.id=b.id AND a.id=c.id"; 
```

所以应该是：

```
WHERE a.id=b.id AND a.id=c.id "; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T13:12:42.903

试试这个：

```
$query = "SELECT a.name,a.surname,b.email,c.phone 
           FROM users as a 
           inner join users_email as b 
           inner join users_telefon as c
           WHERE a.id=b.id AND a.id=c.id";

 $query .= " ORDER BY a.prenume";  

 $result = mysql_query($query,$con); 
```

订购前需要一个“空格”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T13:15:44.340

```
$query = "SELECT a.name,a.surname,b.email,c.phone 
          FROM users as a 
          inner join users_email as b ON a.id=b.id
          inner join users_telefon as c ON a.id=c.id
          ORDER BY a.name"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:11:32.943

应该是

```
 $query .= " ORDER BY a.prenume order(asc/desc)"; 
```

插入

```
 $query .= "ORDER BY a.prenume"; 
```

你需要在 ORDER BY 之前给空间

# java - jtable中的动态jcombobox项目

> ID：15272104
> 
> 赞同：0
> 
> 时间：2013-03-07T13:10:12.520
> 
> 标签：java, swing, jtable, dynamic-data, jcombobox

我正在尝试创建一个每行有两个组合框的 Jtable。我检查了这方面的教程，发现我可以在组合框中添加静态数据。但是我怎么可以将动态数据加载到组合框中。

甚至，每当用户从行中选择组合框 1 时，都会基于此更新组合框 2。

![在此处输入图像描述](../Images/4d0a23d67a8a97c82a1a95ece4ae9c2a.png)

有人可以帮我吗？

如果我`removeAllItems()`从组合框中进行操作，那么组合框 2 将更新，但我无法添加新条目。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:02:17.373

表有两列都呈现为`JComboBox.`现在，Column-2 项目的选择取决于 Column-1 选择。

![JComboBox 选择](../Images/fad7f840728fd289b0b39c37d4859f5f.png)

```
import java.awt.Component;
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;

import javax.swing.DefaultCellEditor;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class ComboBoxExample {

    private void createUI() {

        JFrame frame = new JFrame();

        Object[] columNames = {"Combo-1", "Combo-2"};
        Object[][] data = {{"", ""}, {"", ""}, {"", ""}, {"", ""}};

        JTable table = new JTable(data, columNames);

        table.getColumnModel().getColumn(0).setCellEditor(new CustomComboBoxEditor());
        table.getColumnModel().getColumn(1).setCellEditor(new CustomComboBoxEditor());

        frame.add(new JScrollPane(table));
        frame.setTitle("Column -2 based on Column - 1 ComboBox Selection.");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new ComboBoxExample().createUI();
            }
        };

        EventQueue.invokeLater(r);
    }

}

class CustomComboBoxEditor extends DefaultCellEditor {

    // Declare a model that is used for adding the elements to the `ComboBox`
    private DefaultComboBoxModel model;

    private List<String> obtainedList;

    public CustomComboBoxEditor() {
        super(new JComboBox());
        this.model = (DefaultComboBoxModel)((JComboBox)getComponent()).getModel();
        obtainedList = new ArrayList<String>();

        obtainedList.add("One");
        obtainedList.add("Two");
        obtainedList.add("Three");
        obtainedList.add("Four");
        obtainedList.add("Five");
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {

       if(column == 0) {
           model.removeAllElements();
           for(int i = 0; i < obtainedList.size(); i++) {
               model.addElement(obtainedList.get(i));
            } 
        } else {

             model.removeAllElements();
             String selectedItem = (String) table.getValueAt(row, 0);
             for(int i = 0; i < obtainedList.size(); i++) {
                    if(!selectedItem.equals(obtainedList.get(i)))
                    model.addElement(obtainedList.get(i));
             } 
         } // Close else

        return super.getTableCellEditorComponent(table, value, isSelected, row, column);
     }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:51:08.697

尝试这样的事情，你可以在这个例子中更改 DATA，然后重新绘制并执行单元格的渲染器：

```
 public void example(){  

      TableColumn tmpColum =table.getColumnModel().getColumn(1);
      String[] DATA = { "Data 1", "Data 2", "Data 3", "Data 4" };
      JComboBox comboBox = new JComboBox(DATA);

      DefaultCellEditor defaultCellEditor=new DefaultCellEditor(comboBox);
      tmpColum.setCellEditor(defaultCellEditor);
      tmpColum.setCellRenderer(new CheckBoxCellRenderer(comboBox));
      table.repaint();
   }

/**
   Custom class for adding elements in the JComboBox.
*/
class CheckBoxCellRenderer implements TableCellRenderer {
        JComboBox combo;
        public CheckBoxCellRenderer(JComboBox comboBox) {
            this.combo = new JComboBox();
            for (int i=0; i<comboBox.getItemCount(); i++){
                combo.addItem(comboBox.getItemAt(i));
            }
        }
        public Component getTableCellRendererComponent(JTable jtable, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            combo.setSelectedItem(value);
            return combo;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T12:32:52.177

removeAllItems() 调用后，将组合框中的项目添加为

```
 combobox.addItem("one");
  combobox.addItem("two"); 
```

# c# - 从另一个表单重新加载组合框项目

> ID：15272105
> 
> 赞同：2
> 
> 时间：2013-03-07T13:10:13.940
> 
> 标签：c#, winforms

我有两个表单，我想从 Form2 重新加载 Form1 中的组合框项目。我将 Form1 设置为 Form2 的 MdiParent，如下所示：

```
Form2 f2 = new Form2();
f2.MdiParent = this;
f2.Show(); 
```

如何从 Form2 中访问 Form1 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:42:49.987

尝试这个，

```
String nameComboBox = "nameComboBoxForm1"; //name of combobox in form1
ComboBox comboBoxForm1 = (ComboBox)f2.MdiParent.FindControl(nameComboBox); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:45:11.610

`Form1`你需要定义一个这样的属性：

```
Public ComboBox.ObjectCollection MyComboboxitems{
    get{ return {the Combox's name}.Items}
} 
```

然后`Form2`在`Load`事件处理程序中：

```
{name of form2 combobox}.Items = ((Form1)Me.MdiParent).MyComboboxitems; 
```

这是为了不公开表单一上组合框的所有属性，而只是您想要的。

在代码示例中，将 {...} 替换为实际的对象名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:20:55.367

您可以在 Form1 中声明一个公共静态列表并将其设置为 form1combobox 的数据源，如下所示。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.IsMdiContainer = true;
    }
    public static List<string> list;
    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.MdiParent = this;
        frm2.Show();
        comboBox11.DataSource = list;
    }
} 
```

在 form2 的加载事件中，将声明的 form1 列表设置为引用具有 form2.combobox 项的新实例化列表。

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }
    List<string> list = new List<string> { "a", "b", "c" };
    private void Form2_Load(object sender, EventArgs e)
    {            
        comboBox1.DataSource = list;
        Form1.list = list;

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T08:20:21.760

尝试这个：

```
Form1 f1 = (Form1)Application.OpenForms["Form1"];
ComboBox cb = (ComboBox)f1.Controls["comboBox1"];
cb.Items.Clear();
cb.Items.Add("Testing1");
cb.Items.Add("Testing2"); 
```

# asp.net-mvc - 在 div 的 Style 属性中使用 MVC3 ViewData

> ID：15272111
> 
> 赞同：2
> 
> 时间：2013-03-07T13:10:42.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html, razor, viewdata

我正在做一个 MVC3 项目。

我已经在控制器中计算出一个十进制值到 ViewData["nReceived"] 中。之后控制器调用索引视图。

我可以在元素外部的索引视图上显示它

```
<div class="bar bar-success" style="width: 42%;">Received  @ViewData["nReceived"]</div> 
```

但我需要将此值用作替换宽度百分比的元素的属性。

我试过这个没有成功：

```
<div class="bar bar-success" style="width: @ViewData["nReceived"]%;">Received</div> 
```

还有这个：

```
@ViewContext.Writer
    .Write("<div class=\"bar bar-success\" style=\"width: @ViewData["nReceived"]%;">") 
```

关于如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:35:01.593

这应该可以使用`@()`

```
<div class="bar bar-success" style="width:@(ViewData["nReceived"])%;">Received</div> 
```

另外由于您使用的是MVC3，您也可以`ViewBag`尝试

```
<div class="bar bar-success" style="width:@(ViewBag.nReceived)%;">Received</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:15:57.257

`style='width: @Html.Raw(ViewData["nReceived"])'`你打破了你的报价，你需要这个在这里呈现出一点不同

# html - 从左到右自动定位div

> ID：15272119
> 
> 赞同：0
> 
> 时间：2013-03-07T13:11:10.377
> 
> 标签：html, positioning

我将尝试比标题更好地解释这一点。

我有一个宽度 = $(window).width() 的大 div

现在我将有一个未确定数量的 div 以图像作为背景。

我希望这一切都从左到右定位到大 div 中。由于大 div 将具有不同的尺寸（屏幕分辨率），但带有图像的 div 将始终具有相同的尺寸（全部 300x200）...我想例如，如果只有 4 个带有图像的 div 适合第一行，第五个图像 div 去到第二行。

从哪儿开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:16:10.610

只需为`div`容器内的元素定义宽度，然后将它们向左浮动。例如：

```
div.container > div {
    width: 300px;
    height: 200px;
    float: left;
} 
```

这是一个[**jsFiddle 演示**](http://jsfiddle.net/uWMzX/)（调整结果窗格的大小以查看它的实际效果）。

# php - PHP 动态变量名

> ID：15272129
> 
> 赞同：2
> 
> 时间：2013-03-07T13:11:37.727
> 
> 标签：php

我想要一个这样的动态属性名称：

```
$_taxVocabName = 'name';
$node->field_ . $_taxVocabName; 
```

这应该调用：

```
$node->field_name 
```

我怎样才能做到这一点？

我在 php.net 或其他地方找不到任何东西。

谢谢萨沙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:18:32.710

两种方式：

首先，使用一个变量：

```
$property = 'field_' . $_taxVocabName;

$node->$property; 
```

其次，使用大括号：

```
$node->{'field_' . $_taxVocabName}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T04:21:34.383

我认为这样做的更好方法是

```
$taxVocabName = "name";
$property = "field_" . $taxVocabName; 
```

然后，您当然必须将变量设置为一个值...

像这样：

```
$$property = "My variable variable"; 
```

或者：

```
$field_name = "My variable variable"; 
```

我知道这有点晚了，但也许这会帮助其他人。

# ehcache - EHCache 不同环境下的自动对等发现

> ID：15272130
> 
> 赞同：0
> 
> 时间：2013-03-07T13:11:43.147
> 
> 标签：ehcache

为了避免不同的环境在自动多播 EHCache 配置中共享相同的缓存数据，请求的配置是什么？

我有一个测试和一个产品环境，并且缓存名称是相同的，所以我假设如果我不修改 ehcache 配置，产品数据也会缓存在测试环境中吗？

修改 multiCastGroupAddress 是否足以避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:10:17.527

简短的回答是肯定的。

但是，我猜（希望？）测试和生产机器位于不同的子网中，因此即使具有相同的机器`multiCastGroupAddress`也可以工作，因为默认设置`timeToLive`是`1`（= 多播仅限于同一子网）。有关更多信息，请参阅[RMI 复制缓存上的 Ehcache 文档。](http://www.ehcache.org/documentation/2.5/replication/rmi-replicated-caching)

# ios - Json 解析失败

> ID：15272132
> 
> 赞同：1
> 
> 时间：2013-03-07T13:11:45.733
> 
> 标签：ios, objective-c, json

我正在创建一个简单的登录页面。在我的项目中，我想解析 json 字符串。但它给了我以下错误。

```
-JSONValue failed. Error trace is: (
"Error Domain=org.brautaset.JSON.ErrorDomain Code=4 
\"Valid fragment, but not JSON\" 
UserInfo=0xa6e70a0 {NSLocalizedDescription=Valid fragment, but not JSON}" 
```

在我的代码中，如果我放置另一个 json 字符串而不是它正在工作。而且我原来的 json 字符串也给了我浏览器中的数据。那么该怎么办？

我的代码是：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://dev.bevbucks.com/gbs/api.json/token?user=rverma@prismetric.com&pwd=verma!pris"]];
NSURLResponse *response = nil;
NSError *error = nil;
//getting the data
NSData *newData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
//json parse

NSString *responseString = [[NSString alloc] initWithData:newData encoding:NSUTF8StringEncoding];
NSDictionary *jsonObject = [responseString JSONValue];
NSLog(@"type :  %@", jsonObject  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:25:57.763

返回的字符串：

```
"60ee094456b6fc03f386af50c443b471" 
```

不是有效的 JSON，至少应该是：

```
[ "60ee094456b6fc03f386af50c443b471" ] 
```

所以服务器中存在错误，而不是您的代码。如果您无法修复此错误，那么您将不得不解决它。

来自[JSON.org](http://www.json.org/)：

> JSON 建立在两种结构之上：
> 
> *   名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。
>     
>     
> *   值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。

# slickgrid - SlickGrid 确实 dataview.deleteItem() 也删除了实际的 Grid 数据

> ID：15272148
> 
> 赞同：0
> 
> 时间：2013-03-07T13:12:38.447
> 
> 标签：slickgrid

也许我误解了 Grid 数据与 dataView 的交互，但是如果我删除了 dataview 中的一行：

```
for (var i = 1; i <= 4; i++) {
  dataViewMG2.deleteItem(i);
} 
```

在我看来，它不应该从 dataArray 对象中删除实际数据。我应该能够再次 setItems() 并重新显示数据：

```
dataViewMG2.beginUpdate();
dataViewMG2.setItems(modaldata2);
dataViewMG2.endUpdate(); 
```

然而......当我检查数据对象（modaldata2）时，它的长度为0。有人可以向我解释一下吗？

一如既往...谢谢。

# c# - 如何扩展 ASP.Net 4 成员的用户表

> ID：15272156
> 
> 赞同：4
> 
> 时间：2013-03-07T13:13:02.860
> 
> 标签：c#, sql, asp.net-membership, asp.net-4.0

我想扩展 ASP.Net 4 会员的用户表，如下图所示

![在此处输入图像描述](../Images/3a1d8f7d90a5e97852c2e0e5003e4311.png)

因此，当用户在网站上注册时，我可以控制额外的列（“WaitingApprovalRevenue”、“ApprovedRevenue”和“WithdrawnRevenue”）

或者我应该使用默认的 asp.net 用户表？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:04:30.243

您可以使用`Profile`提供程序，但默认的 ASP.NET 提供程序有一个缺点，它基本上将所有值存储在单个字段中。当您在 ASP.NET 环境之外有一些需要使用这些值的东西（例如，用于报告目的）时，这会变得很困难。

如果这不是问题，`Profile`请按照 Tim 链接的方式使用，否则我会创建一个单独的表，其中用户 GUID 作为键并以这种方式链接它。

# tree - ScrolledComposite 中的 SWT 树

> ID：15272158
> 
> 赞同：0
> 
> 时间：2013-03-07T13:13:08.860
> 
> 标签：tree, scroll, swt, scrolledcomposite

我一直在尝试创建一个包含合成的对话框。如果组合变得太小而无法显示其内容，则组合可以添加水平和垂直滚动条。在合成内部有一个树小部件。如果列或行无法显示在给定区域中，则此树小部件应以类似的方式提供滚动条。

我正在尝试做的一个很好的例子是 Eclipse 的 Window > Preferences 对话框中的 Validation 选项。如果将列的大小调整为更大，它有一个提供滚动条的表。同时，如果对话框的大小减小，它会为组合提供一个滚动条。

我试图做的是创建一个 ScrolledComposite，在其中放置另一个具有 GridLayout 的 Composite。之后，我在复合材料中放置了一棵树和一堆标签和按钮。但是，当在 Tree 中放置太多 TreeColumns 或 TreeItems 时，只会扩大大小而不是显示滚动条。

知道我做错了什么以及应该如何正确完成吗？先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T14:16:10.453

尝试使用以下内容在树上设置宽度提示：

```
Tree tree = ...
GridData gd = new GridData();
gd.widthHint = XX;
gd.heightHint = XX;
tree.setLayoutData(gd); 
```

# java-me - Java ME 三重存储

> ID：15272160
> 
> 赞同：1
> 
> 时间：2013-03-07T13:13:12.707
> 
> 标签：java-me, ontology, cdc, triplestore

我目前正在编写一个具有内部 OWL 推理引擎（Hermit & Pellet）并从后端服务器接收本体数据（传感器数据）的 Java ME 程序。有时，这些数据也由原始传感器数据和后端服务器上推理器的推理结果组成。推理只会在网络故障的情况下在移动设备上执行。

目前我缺乏一种存储后端数据以供进一步处理的好方法。我已经查找了 Triple Stores，但我想知道是否有任何适用于 Java ME 应用程序的好东西？

格茨

新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:02:58.423

你以错误的方式接近这个。在服务器上进行推理并将结果发送到您的应用程序。

推理在计算上是困难的。尝试在移动设备上执行此操作将是糟糕的用户体验，因为它很慢，或者除了玩具数据之外什么都不起作用。

有执行推理的 RDF 数据库非常好，如果你*真的*需要 DL 推理，有许多专用的 OWL 推理器，将 SPARQL 端点放在前面并不难，这样你就可以远程查询它们。选择一个最适合您的需求并继续使用它；在后端进行推理，通过 SPARQL 协议 (HTTP) 获取结果。

# css - CSS - 填充浮动元素旁边的剩余宽度并防止内容落在浮动元素下方？

> ID：15272164
> 
> 赞同：2
> 
> 时间：2013-03-07T13:13:21.347
> 
> 标签：css, css-float, fill

我遇到的问题是我需要将一个具有固定宽度的元素向左浮动，并在它旁边有一个元素填充剩余的宽度。

我知道的唯一解决方案是浮动第一个元素，然后它旁边的元素将自动填充剩余的宽度。我遇到的问题如下：

[http://codepen.io/anon/pen/udBsx](http://codepen.io/anon/pen/udBsx)

如果绿色含量高于红色，它会跳到红色下方。有什么办法可以防止这种情况发生吗？我玩过，`clear`但我不认为我可以做任何事情来防止它发生。

更糟糕的是，该网站是响应式的。如果不是，我可以给绿色元素一个静态宽度并浮动它，但事实并非如此。我不能使用百分比，因为红色元素具有静态宽度。

我相信 flexbox 有我正在寻找的东西，但不幸的是，由于缺乏支持，它现在不是一个选择。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:19:59.483

编辑：

CSS 代码应如下所示：

```
.floated {
  width:200px; float:left; 
}

.fill {
  margin-left:200px;
} 
```

# jquery - 为什么我的 jquery 选择器在这个谷歌地图功能中不起作用？

> ID：15272171
> 
> 赞同：0
> 
> 时间：2013-03-07T13:13:35.233
> 
> 标签：jquery, google-maps-api-3

当我将鼠标悬停在页面上的一个元素上时，我试图使用[addDomListener运行一个函数。](https://developers.google.com/maps/documentation/javascript/events#DomEvents)这在我使用 getElementById 选择对象时有效：

```
google.maps.event.addDomListener(document.getElementById('myID'), 'mouseover', mouseoverListener); 
```

但是当我尝试使用 jQuery 选择器时它不起作用：

```
google.maps.event.addDomListener($('#myID'), 'mouseover', mouseoverListener); 
```

我想，也许 Google API 不允许我运行 jQuery 或者我没有加载它，但是如果我执行以下操作：

```
$('#myID').append('1'); 
```

这很好用，我在#myID 中得到“1”。

我错过了什么，为什么选择器不能以我认为合乎逻辑的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:17:12.063

Google API`addDomListener`需要一个 DOM 节点，而不是 jQuery 对象，使用这个：

```
google.maps.event.addDomListener($('#myID')[0], 'mouseover', mouseoverListener); 
```

# spring - 使用弹簧时出现空指针异常-尽管正确加载了bean

> ID：15272176
> 
> 赞同：0
> 
> 时间：2013-03-07T13:13:39.283
> 
> 标签：spring, hibernate, jakarta-ee, design-patterns, spring-mvc

我有一个豆子：

```
public class StatusPollingFilter extends AbstractDiscovery implements UserTester 
```

定义为 ：

```
<bean
id="statusPollingFilter"
class="com.xxxxx.yyyyyyy.zzz.StatusPollingFilter">
<property
    name="evoDao"
    ref="evoDaoFacade">
</property> 
```

它加载正常，如日志所示：

```
2013-03-07 11:30:14,703 INFO DefaultListableBeanFactory [RunJSPModule] - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@14966cc: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.config.internalTransactionAdvisor,tilesConfigurer,viewResolver,urlMapping,discovery,statu
sPollingFilter, 
```

当我尝试将其用作：

```
TopoObject topoobj = evoDao.getTopoObjectDao().findById(topoId); 
```

evoDao 是完成这项工作的主要人员：类 AbstractDiscovery 为：

```
//Reference to the DAO facade, for accessing the database via hibernate.
protected EvoTAMDAOFacade evoDao; 
```

**问题？** 因为我扩展了 AbstractDiscovery，所以我认为我可以访问 evoDao 并像往常一样使用它来获取我的 Dao，但似乎不是——我哪里出错了？为什么找不到道？

EvoTAMDAOFacade 被注入到 AbstractDiscovery 中：

```
/**
 * DI method for accessing the DAO facade for accessing the
 * database via hibernate.
 * @param dao 
 */
public void setEvoDao(EvoTAMDAOFacade dao)
{
    this.evoDao = dao;
} 
```

getTopoObjectDao() 在注入的 EvoTAMDAOFacade 中定义为：

```
public TopoObjectDAO getTopoObjectDao()
{
    return this.topoObjectDao;
} 
```

AbstractDiscovery 定义为：

```
public abstract class AbstractDiscovery implements Discovery 
```

例外是：

```
[07 Mar 2013  11:42:24:353] POLL: Exception while getting obj during status update java.lang.NullPointerException 162.109.37.114 at:
java.lang.NullPointerException 
```

**另一个Q？**statusPollFilter 在多个对象的调度程序中作为线程运行 - 我实际上不确定我是否应该将其定义为单例 bean，但如果我不这样做，我如何访问 Dao？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:55:21.140

阅读更多 - 我遇到了ans。因为 StatusPollingFilter 对象在调度程序的控制下（我知道调度程序与它有关），所以它不知道 spring bean，这就是为什么我在尝试注入 bean 时总是得到 null 的原因。

我创建了一个类：

```
 ApplicationContextProvider implements ApplicationContextAware 
```

添加静态访问

```
private static ApplicationContext   appContext; 
```

为它做了一个二传手：

```
public void setApplicationContext(ApplicationContext context)
{
    appContext = context;
} 
```

并添加

```
public static Object getBean(String beanName) throws BeansException
{
    return appContext.getBean(beanName);
} 
```

在代码中用作：

```
EvoTAMDAOFacade evoDao = (EvoTAMDAOFacade) ApplicationContextProvider.getBean("evoDaoFacade"); 
```

我现在可以访问外观 bean 和所有注入外观的 bean。我仍然有休眠会话的问题，但那是由于其他一些问题。

pt 这里是我无法访问 bean，因为它无法控制 spring 容器，所以我需要以某种方式获取它，可能可以通过工厂方法完成它，但是当有更简单的方法时为什么要乱来。感谢任何可能发布或试图理解我的问题的人的帮助。

# android - 电话鸿沟跨平台应用

> ID：15272182
> 
> 赞同：0
> 
> 时间：2013-03-07T13:13:57.207
> 
> 标签：android, ios, cordova, mobile

我是移动开发的新手。我正在参加在线课程和研究，但通常是否需要有一个后端数据库来存储手机应用程序的信息，或者手机应用程序通常在哪里处理数据？我正在考虑存储电话记录或任务项以供用户检索的简单示例。还有身份验证，在设置登录时，这通常会从应用程序创建者需要维护的后端数据库或身份验证服务器发生吗？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:56:29.633

通常，后端数据存储在服务器的数据库中，就像在 Web 应用程序中所做的那样。然后，您将使用基于 HTTP 的服务（例如 ASP.NET Web API）公开数据，以便 JavaScript 与服务进行通信。数据通常被编码为 JSON 在服务和您的应用程序之间传输数据。现在，您的移动应用程序将从服务中获取数据并显示在 UI 中，更新数据将发送到服务，服务将其更新到数据库。

# .net - 来自 IE 的 WCF 服务调用不起作用，但在 Chrome 中它可以工作。可能的代理问题？

> ID：15272183
> 
> 赞同：1
> 
> 时间：2013-03-07T13:13:57.477
> 
> 标签：.net, wcf, internet-explorer, exception-handling, proxy

我们有一个 ASP.NET 应用程序。它通过 JavaScript 中的 ScriptManager.AddServiceReference 引用调用 WCF 服务。

直到我们将应用程序转换为使用“集成 Windows 身份验证”，一切都很好。

但在将其转换为“集成 Windows 身份验证”后，我们开始收到 javascript 错误，例如：

```
"Error in deserializing body of request message for operation 'GetStockCodeData'. 
 The OperationFormatter could not deserialize any information from the Message because 
 the Message  is empty  (IsEmpty = true). " 
```

顺便说一句，WCF 调用在某些客户端上运行良好，但在其他一些客户端上不起作用。

有趣的是，当我们在有问题的客户端上打开 Fiddler 时，一切正常。

这似乎是代理问题，但在同一台机器上，使用相同的代理配置，其他一些用户可以工作。

你能给我们一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:54:17.217

从错误来看，这可能与我在这里讨论的问题有关：http: [//blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-身份验证挑战时的字节长度是预期的.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-bytes-in-length-when-authentication-challenges-are-expected.aspx)

简短的总结是，如果客户端浏览器希望获得身份验证质询，它可能会省略请求的 POST 正文（出于性能原因），直到服务器发出身份验证质询。

# javascript - jQuery：获取可能包含或不包含链接的段落标记的文本内容

> ID：15272184
> 
> 赞同：0
> 
> 时间：2013-03-07T13:13:58.160
> 
> 标签：javascript, html, jquery

我使用以下方法成功获取了 div 集合中第一段的文本：

```
$('#businessListings div.listing').each(function() {
    console.log('text: ' + $(this).find('p:first').html());
}); 
```

一个示例 div 如下所示：

```
<div id="businessListings" class="unifyRepeatArea">
    <div class="unifyRepeat listing">
        <p>123 ABC Child Care</p>
        <p>Jane Doe, Owner</p>
        <p>555-555-1234</p>
        <img src="images/123ABCchildcare.jpg" width="50" height="50">
    </div>
...
</div> 
```

问题是，集合中的某些段落**可能**有一个链接：

```
<p><a href="http://www.123abcchildcare.com">123 ABC Child Care</a></p> 
```

我怎样才能得到每个 div 的第一段中的文本，无论该段是否有链接？

[工作 jsFiddle](http://jsfiddle.net/eventide/JZ6au/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:15:36.460

您应该尝试使用`text()`而不是`html()`：

```
$('#businessListings div.listing').each(function() {
    console.log('text: ' + $(this).find('p:first').text());
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/JZ6au/2/)。

# python - mysql为文件列表加载数据infile

> ID：15272188
> 
> 赞同：1
> 
> 时间：2013-03-07T13:14:14.140
> 
> 标签：python, mysql, csv, load-data-infile

我使用的是 ubuntu 12.04 操作系统。我有一个装满文件的`.csv`文件夹。我需要将所有这些 csv 文件导入到本地机器上的 mysql 数据库中。目前，我一直在使用这种语法，从 mysql 命令行，将 csv 文件逐个加载到数据库中：

```
load data local infile 'file_name.csv' into table table_name  fields terminated by ',' optionally enclosed by '"'  lines terminated by '\r\n'; 
```

这真的很好用。我想知道是否有一种方法可以一次加载所有这些文件。我的第一个想法是制作一个 python 脚本来处理它：

```
import MySQLdb as mysql
import os
import string
db=mysql.connect(host="localhost",user="XXXX",passwd="XXXX",db="test")
l = os.listdir(".")
for file_name in l:
        print file_name
        c=db.cursor()
        if (file_name.find("DIV.csv")>-1):
                c.execute("""load data local infile '%s' into table cef_div_table fields terminated by ',' optionally enclosed by '"'  lines terminated by '\r\n';""" % file_name) 
```

使用此解决方案，我遇到了不适用于新版本的 MySQL 客户端的问题，除非我使用该选项`load data local infile`从命令行启动 MySQL 。`--local-infile`这真的是拖累...

我找到了一个似乎可行的解决方案。我`local_file = 1`在 python 中建立连接时使用该选项（如此处建议：[MySQL LOAD DATA LOCAL INFILE Python](https://stackoverflow.com/questions/12890098/mysql-load-data-local-infile-python)）。这样，代码看起来就完成了，没有任何错误，但没有任何东西都上传到数据库中。

这很奇怪，只是为了确保，我尝试从 mysql 命令行上传单个文件，并且它可以工作文件。

我愿意尝试另一种解决方案，即一次将多个 csv 文件上传到 mysql 中。任何帮助是极大的赞赏！

# jquery - 如何在图片右上角显示删除按钮？

> ID：15272191
> 
> 赞同：28
> 
> 时间：2013-03-07T13:14:21.410
> 
> 标签：jquery, html

我想在右上角显示删除按钮以显示图像？我怎么能做到这一点？

我的html是这样的：-

主图：

```
<img id="' + id + '" src="../Images/DefaultPhotoMale.png" class="' + item + '" width="40" height="40" alt="image" title="' + projectTitle + '" style="cursor:pointer" /> 
```

x 按钮图像显示在上图的右上角

*   `'<img id="' + item.Soid + '" src="../Images/RemoveButton.ico" style="display:none" title="Remove Specialization" />`

请不要设置背景图像，我需要该删除按钮的单击事件，如下所示：

![在此处输入图像描述](../Images/93047b8afa879252cb52d4d26d8a85d9.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-07T13:37:17.467

`position: relative`使用和的常用方法`position: absolute`。

HTML：

```
<div class="img-wrap">
    <span class="close">&times;</span>
    <img src="http://lorempixel.com/100/80">
</div> 
```

CSS：

```
.img-wrap {
    position: relative;
    ...
}
.img-wrap .close {
    position: absolute;
    top: 2px;
    right: 2px;
    z-index: 100;
    ...
} 
```

扩展演示（+JS交互）[http://jsfiddle.net/yHNEv/](http://jsfiddle.net/yHNEv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:22:26.773

尝试类似的东西

```
<div style="position: relative">
    <img src="http://www.google.co.in/images/srpr/logo4w.png" />
    <img src="http://wecision.com/enterprise/images/icons/closeIcon.png" style="position: absolute; top: 4px; right: 5px"/>
</div> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ugqKw/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T13:28:08.350

我已经为你编写了一个[http://jsfiddle.net/PPN7Q/](http://jsfiddle.net/PPN7Q/)

您需要将图像包装在 DIV 中

```
<div class="thumbnail">
<img src="http://96pix.com/images/renee-v.jpg" />
 <a href="">Delete</a>
</div> 
```

并应用以下 CSS 规则

```
.thumbnail {
width:50px;
height:50px;
position:relative;
}

.thumbnail img {
max-width:100%;
max-height:100%;
}

.thumbnail a {
display:block;
width:10px;
height:10px;
position:absolute;
top:3px;
right:3px;
background:#c00;
overflow:hidden;
text-indent:-9999px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:21:57.140

```
<div style=" float: right;margin-left: 289px;position: absolute;">*</div>
<img src="score.png" width="300" height="300" /> 
```

Please try this. It might help.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:18:55.277

在我看来，你可以设置`style="position:absolute;top:0px;right:0px;"`for`RemoveButton.ico`和`style="position:relative;"`for `div`with`img`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T13:30:29.677

你可以试试这个：

```
<div style="position:relative; width:'mainimagewidth'">
main image<img src="" />
<span style="position:absolute; top:0; right:0;">ximage<img src="" /></span>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-04T21:46:56.173

你应该为此写一个插件

```
(function ($, window, document, undefined) {

'use strict';

var defaults = {};

var Delete = function (element) {

    // You can access all lightgallery variables and functions like this.
    this.core = $(element).data('lightGallery');

    this.$el = $(element);
    this.core.s = $.extend({}, defaults, this.core.s)

    this.init();

    return this;
}

Delete.prototype.init = function () {
    var deleteIcon = '<span id="lg-clear" class="lg-icon deletePicture"><span class="glyphicon glyphicon-trash"></span></span>';
    this.core.$outer.find('.lg-toolbar').append(deleteIcon);

    this.delete();

};

Delete.prototype.delete = function () {
    var that = this;
    var image_id = '';
    this.core.$outer.find('.deletePicture').on('click', function () {
    // get vars from data-* attribute
        image_id = that.core.$items.eq(that.core.index).data('id');
        table_name = that.core.$items.eq(that.core.index).data('table-name');

        /**
         * Remove Touchpoint Retailer Image
         */
        var formData = new FormData();
        formData.append('image_id', image_id);
        $.ajax(......).success(function()
        {
            var thumbcount = that.core.$outer.find('.lg-thumb-item').length;
            if(thumbcount >= 1) {
                // remove slides
            }
            else {
                that.core.destroy();
            }
        });

    });
}

/**
 * Destroy function must be defined.
 * lightgallery will automatically call your module destroy function
 * before destroying the gallery
 */
Delete.prototype.destroy = function () {

}

// Attach your module with lightgallery
$.fn.lightGallery.modules.delete = Delete;

})(jQuery, window, document); 
```

# ios - xcode以编程方式展开segue

> ID：15272192
> 
> 赞同：3
> 
> 时间：2013-03-07T13:14:30.883
> 
> 标签：ios, objective-c, xcode

我们如何以编程方式执行 push xcode unwind segue？

我知道简单的方法是使用情节提要并将按钮拉到“退出”，但我打算在退出视图之前先运行一些代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:43:52.570

要回到 rootViewController 使用：

```
[self.navigationController popToRootViewControllerAnimated:(BOOL)] 
```

或者去一个特定的控制器：

```
[self.navigationController popToViewController:
    [[self.navigationController viewControllers]
    objectAtIndex:THEINDEXOFTHEVIEWCONTROLLERTOUNWINDTO]
    animated:YES]; 
```

有关更多详细信息，请参阅我在这篇文章中的回答： [Push to root View controller in UIStoryboard](https://stackoverflow.com/questions/15024559/push-to-root-view-controller-in-uistoryboard/15024772#15024772)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T13:29:01.260

如果您只想在退出之前执行一些代码（尽管保持简单，否则您将获得 UI 锁定，直到您返回某些内容），您可以覆盖`canPerformUnwindSegueAction:fromViewController:withSender:`目标控制器。

可能是这样的：

```
- (BOOL)canPerformUnwindSegueAction:(SEL)action 
                 fromViewController:(UIViewController *)fromViewController 
                         withSender:(id)sender
{
    // Some operation...

    return YES; // Or NO if something went wrong and you want to abort
} 
```

否则，您实际上可以以编程方式创建 segue 并通过覆盖来管理动画/展开逻辑`segueForUnwindingToViewController:fromViewController:identifier:`。

您可以在[此处找到完整的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:22:42.023

您可以通过在 UIViewController 中调用此方法在代码中发生转场

```
- (void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender 
```

您仍将在故事板中的 2 个视图之间创建转场，只需确保命名转场并在标识符参数中使用准确的名称

# javascript - jQuery Sortable：将值存储在多维数组中

> ID：15272193
> 
> 赞同：3
> 
> 时间：2013-03-07T13:14:36.260
> 
> 标签：javascript, jquery, multidimensional-array, jquery-ui-sortable

我有一个可排序的列表（jQuery UI），格式如下：

```
<ul class="baseList">
    <li id="3">Item 1
        <ul class="childList">
            <li id="68">Child 1 of Item 1</li>
            <li id="69">Child 2 of Item 1</li>
            <li id="70">Child 3 of Item 1</li>
        </ul>   
    </li>
    <li id="8">Item 2
        <ul class="childList">
            <li id="81">Child 1 of Item 2</li>
            <li id="83">Child 2 of Item 2</li>
        </ul> 
    </li>
</ul> 
```

我想要实现的是获取一个由以下内容组成的数组变量：

`var entireList = [];` `entireList = [[3,[68, 69, 70], 8, [81, 83]]]`

所以我可以将该变量发布到 PHP 以在数据库中处理它。

我似乎无法弄清楚如何在 javascript 中解决这个问题。到目前为止，我有以下内容：

```
var childList = $('.childList, .baseList').sortable({
        placeholder: "ui-state-highlight",
        opacity: 0.6,
        update: function(event, ui){
            var childArray = $('.childList').sortable('toArray');
            var parentsArray = $('.baseList').sortable('toArray');
            for(p in parentsArray)
            {
                postChildData[parentsArray[p]] = childArray;
            }
            console.log(postChildData);
        }
    }); 
```

现在这适用于减半，我的结果是： `[3: Array[3], 8: Array[3]]` 归结为它只需要第一个`<li>`元素的孩子。

这里有人可以帮我获得一个像我上面写的那样的数组（entireList）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:55:52.463

而不是`childArray`在你的 for 循环中使用这个：

```
$('#' + parentsArray[p] + ' > ul').sortable('toArray'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:44:00.390

它可能不是正确的 css，但给第二个列表一个不同的类名，在这个例子中我给了它 childList2。如果您不想修改 ul 您也可以将差异提升到父 li

```
 var childArray = [];
    var childArray2 = [];

    $.each(childList, function(children) {
       childArray.push(children);
    });
    $.each(childList2, function(children2) {
       childArray2.push(children2);
     }); 
```

如果那不起作用，我应该停止猜测，而无需自己进行测试。你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:55:02.230

好的，我终于找到了解决方案：我需要创建一个新数组，在其中我需要存储父 ID 以及包含子数组的数组。

这样做的方法是将 for 循环替换为以下内容：

```
for(p in parentsArray)
{
   postListData[p] = Array(parentsArray[p], $('#' + parentsArray[p] + ' > ul').sortable('toArray'));
} 
```

# oop - 类的传入耦合和传出耦合有什么区别？

> ID：15272195
> 
> 赞同：18
> 
> 时间：2013-03-07T13:14:37.353
> 
> 标签：oop, sonarqube, code-metrics, coupling

[像Sonar](http://www.sonarsource.org/)这样的代码质量度量工具确实提供了深入到一个类并找出以下数量的能力：

1.  *传入（传入）耦合*
2.  *传出（传出）耦合*

这两个参数是什么？你能用一个简单的人为例子来描述吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-07T14:02:29.210

根据[维基百科](http://en.wikipedia.org/wiki/Software_package_metrics)：

> **传入耦合（Ca）：**其他包中依赖于包内类的类的数量是包责任的指标。传入=传入。
> 
> **传出耦合（Ce）：**包中的类所依赖的其他包中的类的数量是包对外部性的依赖的一个指标。传出=传出。

因此，如果您有具有以下结构的类（或包或其他）：

```
class Foo {
    Quux q;
}

class Bar {
    Quux q;
}

class Quux {
    // ...
} 
```

然后`Foo`和`Bar`每个有一个*传出*耦合，并`Quux`有两个*传入*耦合。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-08T08:09:17.683

既然你提到了声纳，这里是[他们的文档页面提供的定义](http://docs.codehaus.org/display/SONAR/Metric+definitions#Metricdefinitions-Design)

*   传入耦合：类传入耦合是衡量有多少其他类使用特定类的量度。
*   传出耦合：类传出耦合是衡量特定类使用多少不同类的量度。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-01-17T16:52:27.647

耦合是依赖关系的一种度量。

传入耦合：

*   **谁取决于你**。
*   衡量有多少其他包使用特定包。
*   传入的依赖项。

传出耦合：

*   **你靠谁**。
*   衡量特定包使用了多少不同的包。
*   传出依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T14:54:34.727

其他用户已经从定义的角度给出了答案。在这里，我给出了用于包级粒度的*传入耦合 ( **Ca** )*和*传出耦合 ( **Ce** )的示例。*

假设***package1***有 3 个类（即**A**、**B**、**C**），而***package2***有 2 个类（即**P**、**Q**）。对于 package1，**A**类有 2 个出边，**B**类有 1 个出边，**C**类有 1 个入边。类似地，对于 package2，**P**类有 2 个入边，**Q**类有 1 个入边和 1 个出边。[见图]。

[![传入和传出耦合](../Images/baa224beda469ad5cdcdd8688fd80d48.png)](https://i.stack.imgur.com/htk1l.png)

要计算包的**Ca**，请计算包中依赖于它的类的数量。您可以对该包的所有类一一进行，然后合并依赖类。

要计算包的**Ce**，请计算所分析包中依赖于其他包的类的数量。计算该包的所有类，然后取联合。

所以，计算如下——

## 包1

```
Ca = {} union {} union {Q}  
   = {Q} 
   =  1

Ce = {P, Q} union {P} union {}
   = {P, Q,}
   = 2 
```

## 包2

```
Ca = {A, B} union {A}
   = {A, B}
   = 2

Ce = {} union {C}
   = {C}
   = 1 
```

传入耦合和传出耦合也用于计算封装的*不稳定性 ( **I** )*。不稳定性是传出耦合 (Ce) 与总封装耦合 (Ce + Ca) 之间的比率。公式是

`I = Ce / (Ce + Ca)`

不稳定的值在0到1之间。向1的值表示不稳定的包（即容易改变），向0的值表示稳定的包。

对于此示例， `Instability for package1 = 2/(1+2) = 0.67` 并且，

`Instability for package2 = 1/(2+1) = 0.33`

因此，我们可以通过测量传入和传出耦合得出结论 package1 比 package2 更不稳定。

有关其他信息，您也可以查看[本文](https://www.researchgate.net/publication/314082764_Software_Instability_Analysis_Based_on_Afferent_and_Efferent_Coupling_Measures/figures?lo=1)。

# python - 用python合成没有警告和错误箭头

> ID：15272196
> 
> 赞同：1
> 
> 时间：2013-03-07T13:14:39.500
> 
> 标签：python, vim, syntastic

我有关注[vimrc](https://github.com/mictadlo/vimrc4GO/blob/master/.vimrc)，但我没有从 syntastic 获得警告和错误的箭头![](../Images/62cbad0ff2419a8ca583de98005822de.png)

如下图所示![在此处输入图像描述](../Images/825f10a0ec45208b8356f6e2cd6e7c38.png)

此外，我无法将标尺与**设置标尺**一起使用。为什么我没有收到未使用变量“a”的警告？

我做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:42:44.860

Syntastic 正在检查您的代码是否符合[PEP8。](http://www.python.org/dev/peps/pep-0008/). 这是 Python 社区通常遵循的关于格式化代码的建议。

*   第一个错误是因为您这样做了，`import os`但是您实际上并没有从`os`代码中调用任何方法，因为该行已被注释掉。你不应该导入你不使用的模块。
*   [第二个是因为 PEP8 指定在导入和代码开始之间](http://www.python.org/dev/peps/pep-0008/#blank-lines)应该有2 个空白行。
*   第三是因为 PEP8 还说不应该有尾随空格。

就统治者而言，我不确定您指的是什么。

# ios - 滑动删除单元格移动单元格的自定义 UILabel？

> ID：15272200
> 
> 赞同：1
> 
> 时间：2013-03-07T13:14:49.427
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我有一个 UITableViewCell 并且我已将自定义 UILabel 添加到单元格中。我实现了 UITableView 的删除方法，以允许在滑动单元格时删除它。问题是，当刷卡时，单元格

*   自动将自定义 UILabel 移到左侧。如何删除此功能或更改它们向左移动的程度？

*   只有某些 UILabel 被移动。不是所有的人？为什么会这样？如何更改这种行为以使所有 UILabel/UIView 向左移动而不是少数几个？

谢谢

# iphone - 如果我们通过 NSData 如何播放音频？

> ID：15272204
> 
> 赞同：7
> 
> 时间：2013-03-07T13:14:56.027
> 
> 标签：iphone, ios, objective-c, avaudioplayer, audio-recording

我将此路径（文件：//localhost/var/mobile/Applications/8F81BA4C-7C6F-4496-BDA7-30C45478D758/Documents/sound.wav）转换为音频文件，即录制。

我正在将此路径转换为 ​​NSData。

**NSData 是： 示例：**

```
<00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 64617461 1cf50200 32003200 e2ffe2ff 3cff3cff 08fe08fe 44fe44fe 04fe04fe e6fde6fd 95fd95fd 96fe96fe b9feb9fe ........................................................................................................................f7fef7fe 96ff96ff bdffbdff d6ffd6ff 92009200 23012301 b200b200 79007900 5c015c01 fe01fe01 f101f101 fc01fc01 7b027b02 36023602 > 
```

我想玩这个 NSData ，

**我确实喜欢下面：**

```
NSString *urlString = [[NSString alloc] initWithData:appDelegate.dataTestingWasteData encoding:NSUTF8StringEncoding];
NSURL *url = [[NSURL alloc] initWithString:urlString];
self.palyer=[[AVPlayer alloc] initWithURL:url];
[self.palyer play]; 
```

**但没有播放，urlString 打印为空。**

相同的路径`(file://localhost/var/mobile/Applications/8F81BA4C-7C6F-4496-BDA7-30C45478D758/Documents/sound.wav)`

**如果我们使用下面的代码，正在播放：**

```
-(void)playAudio
{
    if (!audioRecorder.recording)
    {
        stopButton.enabled = YES;
        recordButton.enabled = NO;
        NSError *error;
        audioPlayer = [[AVAudioPlayer alloc]
                           initWithContentsOfURL:audioRecorder.url
                           error:&error];
        audioPlayer.delegate = self;
        if (error)
            NSLog(@"Error: %@",[error localizedDescription]);
        else
            [audioPlayer play];
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T13:42:54.647

```
NSString *urlString = [[NSString alloc] initWithData:appDelegate.dataTestingWasteData encoding:NSUTF8StringEncoding];
NSURL *url = [[NSURL alloc] initWithString:urlString];

NSData *wavDATA = [NSData dataWithContentsOfURL:url];
NSError *error;

self.player=[[AVAudioPlayer alloc] initWithData:wavDATA error:&error];
[self.player play]; 
```

# mysql - 从join中获取最新记录

> ID：15272205
> 
> 赞同：2
> 
> 时间：2013-03-07T13:14:57.977
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT f.name, MAX( cmt.created_at ) AS CommentDate, cmt.comment AS LastComment
FROM families f
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
WHERE f.id =12212 
```

我得到了评论的最后日期，但我没有得到最后的评论（根据那个日期），而是得到了第一个评论。那个怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:26:30.500

这正是您的查询所要求的：您正在选择名称、最长评论日期，然后是加入的第一个评论（在这种情况下，恰好是第一个评论）。您需要在其中添加额外的逻辑才能获得最新评论。

不同的 SQL 风格有不同的方法来做到这一点，但以下应该适用于任何地方：

```
select    f.name,
          cmt.created_at as CommentDate,
          cmt.comment as LastComment
from      families f
left join comments cmt
on        cmt.commentable_id = f.id
left join comments latest_cmt
on        latest_cmt.commentable_id = f.id
and       latest_cmt.created_at > cmt.created_at
where     f.id = 12212
and       latest_cmt.id is null; 
```

我们假设评论表有一个`id`字段作为它的主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:19:00.473

试试这个方法：

```
SELECT f.name, cmt.created_at AS CommentDate, cmt.comment AS LastComment
FROM families f
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
WHERE f.id =12212
and cmt.created_at = (
                        SELECT MAX( cmt.created_at ) 
                        FROM families f
                        LEFT JOIN comments cmt ON f.id = cmt.commentable_id
                        WHERE f.id =12212
                      ) 
```

或者

```
SELECT f.name, cmt.created_at AS CommentDate, cmt.comment AS LastComment
FROM families f
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
WHERE f.id =12212
and cmt.created_at = (
                        SELECT MAX( created_at ) 
                        FROM comments
                        WHERE commentable_id =12212
                      ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:19:07.053

假设您在 Sql-Server 上：您的查询不应该工作，因为没有分组。

我认为您需要的是`TOP(1)` *订购后* `cmt.created_at DESC`；

```
SELECT TOP (1) f.name, cmt.created_at AS CommentDate, cmt.comment AS LastComment
FROM families f
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
WHERE f.id =12212
ORDER BY cmt.created_at DESC 
```

对于 mysql，我认为您可以`LIMIT`改用`TOP`：

```
SELECT f.name, cmt.created_at AS CommentDate, cmt.comment AS LastComment
FROM families f
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
WHERE f.id =12212
ORDER BY cmt.created_at DESC
LIMIT 1 
```

# ide - 使用 LiveCode 编辑多边形点

> ID：15272215
> 
> 赞同：0
> 
> 时间：2013-03-07T13:15:39.410
> 
> 标签：ide, polygon, livecode

使用 LiveCode，我可以直观地编辑多边形的点吗？我可以添加和删除单个点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:41:19.610

是的你可以。右键单击多边形图形并从上下文菜单中选择 Reshape Polygon，或者当它被选中时，从对象菜单中选择 Reshape Polygon。然后每个点都有一个句柄。您可以通过选项单击并拖动一个点来创建新点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:41:50.920

如果您不想在视觉上编辑点，您还可以使用多边形由 (x,y) 点的 cr 分隔列表定义的事实。您可以通过脚本编辑列表或将图形 x 的点放入字段中，编辑列表，然后设置多边形的点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T11:20:13.367

您也可以通过更改图形的“editmode”属性在脚本中执行此操作

```
set the editmode of graphic 1 to "polygon" 
```

要删除编辑句柄，只需将编辑模式设置回空：

```
set the editmode of graphic 1 to empty 
```

# php - PDO 插入不起作用

> ID：15272220
> 
> 赞同：0
> 
> 时间：2013-03-07T13:15:51.770
> 
> 标签：php, mysql, insert, pdo

我正在尝试从数据库中的一个表中获取记录并将其放在另一个表中（作为数据的备份 - 需要保留 7 年，包括已删除的数据）。选择有效，删除有效，但插入无效。怎么了？我能做些什么来修复它？

代码：

```
////////// DELETE STUDENT RECORD /////////
///// step 1 - copy all data to exStudentInfo with removal date //////

$studentID = $_REQUEST['sID'];
// pull student data from the database //
$query = "SELECT * FROM studentinfo WHERE studentID=" . $studentID;
$statement = $db->prepare($query);
$statement ->execute();
while($row = $statement->fetchObject())
    {
        $studentFirst = $row->studentFirst;
        $studentLast = $row->studentLast;
        $studentDOB = $row->studentDOB;
        $studentGrade = $row->studentGrade;
        $studentClass = $row->studentClass;
        $studentAllergy = $row->studentAllergy;
        $studentFam = $row->studentFam;
        $removeDate = date("Y-m-d");
    } 
```

已解决：问题出在 $query 中...我使用了普通的撇号 (') 而不是正确的反引号 (`) - 我忘记在绑定值中包含 photo 字段。

```
$query = "INSERT INTO 'sundayschool'.'exstudentinfo' ('studentID' ,'studentFirst' ,'studentLast' ,'famID' ,'studentDOB' ,'studentGrade' ,'studentClass' ,'studentAllergy' ,'studentPhoto' ,'removeDate') VALUES (:id, :first, :last, :fam, :dob, :grade, :class, :allergy, :date)"; 
```

正确形式：

```
$query = "INSERT INTO `sundayschool`.`exstudentinfo` (`studentID` ,`studentFirst` ,`studentLast` ,`famID` ,`studentDOB` ,`studentGrade` ,`studentClass` ,`studentAllergy` ,`studentPhoto` ,`removeDate`) VALUES (:id, :first, :last, :fam, :dob, :grade, :class, :allergy,:photo,:date)";
$statement = $db->prepare($query);
$statement->bindValue(':id',$studentID, PDO::PARAM_INT);
$statement->bindValue(':first',$studentFirst, PDO::PARAM_STR);
$statement->bindValue(':last',$studentLast, PDO::PARAM_STR);
$statement->bindValue(':fam',$studentFam, PDO::PARAM_INT);
$statement->bindValue(':dob',$studentDOB, PDO::PARAM_STR);
$statement->bindValue(':grade',$studentGrade, PDO::PARAM_STR);
$statement->bindValue(':class',$studentClass, PDO::PARAM_STR);
$statement->bindValue(':allergy',$studentAllergy, PDO::PARAM_STR);
$statement->bindValue(':date',$removeDate, PDO::PARAM_STR);
$statement->execute();

///// step 2 - Delete student from studentinfo table //////
$stmt = $db->prepare("DELETE FROM studentinfo WHERE studentID=:id");
$stmt->bindValue(':id', $studentID);
$stmt->execute();
echo $studentFirst . " " . $studentLast . " has been removed from the system (and backed up)";
echo "<p><a href='admin.php'>&lt;&lt; Return to administration page</a></p>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:40:40.657

这让我一直想知道为什么每个人都如此渴望为每个简单的插入编写**几个屏幕的代码**。
如果您可以获得一个准备好插入执行的数组，那么获取对象有什么意义？

```
$row = $statement->fetch(PDO::FETCH_ASSOC));
$row['removeDate'] = date("Y-m-d");
$query = "INSERT INTO exstudentinfo (studentID ,studentFirst,studentLast,famID,studentDOB,studentGrade,studentClass,studentAllergy,studentPhoto,removeDate) VALUES (:id, :first, :last, :fam, :dob, :grade, :class, :allergy, :date)";
$statement = $db->prepare($query);
$statement->execute($row); 
```

没有双重分配和绑定！

更不用说mysql可以让你[在一个查询中做到这一点](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

```
INSERT INTO exstudentinfo SELECT *, CURDATE() as removeDate FROM studentinfo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:19:31.830

您确实应该添加正确的错误处理，但问题是您想将 9 个值插入 10 个字段，并且您在字段和表名中使用引号：

```
$query = "INSERT INTO sundayschool.exstudentinfo
           (studentID ,studentFirst ,studentLast ,famID ,studentDOB ,studentGrade ,studentClass ,studentAllergy ,studentPhoto ,removeDate)
           // 10 fields
         VALUES
           (:id, :first, :last, :fam, :dob, :grade, :class, :allergy, :date)";
           // 9 values, photo is missing 
```

如果您需要引用例如 mysql 保留字，则需要为表或字段名称使用反引号：

```
$query = "INSERT INTO `sundayschool`.`exstudentinfo`
            // etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:20:06.410

您缺少在和`studentPhoto`之间插入的部分。您尝试插入 10 个字段，但您只提供 9 个字段的信息。`allergy``date`

另外，在这里丢失引号。你不需要它们：

```
$query = "INSERT INTO `sundayschool`.`exstudentinfo` (studentID ,studentFirst ,studentLast ,famID ,studentDOB ,studentGrade ,studentClass ,studentAllergy ,studentPhoto ,removeDate) VALUES (:id, :first, :last, :fam, :dob, :grade, :class, :allergy, :date)"; 
```

记得添加`studentPhoto`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:23:01.050

乍一看，您的线路：

```
$query = "INSERT INTO 'sundayschool'.'exstudentinfo' ('studentID' ,'studentFirst' ,'studentLast' ,'famID' ,'studentDOB' ,'studentGrade' ,'studentClass' ,'studentAllergy' ,'studentPhoto' ,'removeDate') VALUES (:id, :first, :last, :fam, :dob, :grade, :class, :allergy, :date)"; 
```

需要更改为使用反引号而不是单引号：

```
$query = "INSERT INTO `sundayschool`.`exstudentinfo` 
(
  `studentID`,
  `studentFirst`,
  `studentLast`,
  `famID`,
  `studentDOB`,
  `studentGrade`,
  `studentClass`,
  `studentAllergy`,
  `studentPhoto`,
  `removeDate`
) 

VALUES (
  :id, 
  :first, 
  :last, 
  :fam, 
  :dob, 
  :grade, 
  :class, 
  :allergy, 
  :photo, 
  :date
)"; 
```

# python - 如何使用 ZPublisher.Client.call 设置 HTTP 方法？

> ID：15272221
> 
> 赞同：0
> 
> 时间：2013-03-07T13:15:53.747
> 
> 标签：python, zope

我尝试`[ZPublisher.Client](https://github.com/zopefoundation/Zope/blob/master/src/ZPublisher/Client.py).call`使用`method`参数调用 Zope 2.10.9 来设置 HTTP 方法（`GET`、`POST`等），但它没有按预期工作：它总是发送一个 POST 请求。如果我不提供`method`参数，它总是发送一个 GET 请求。

申请代码：

```
Client.call(
    'http://...',
    username = 'jdoe',
    password = 'mypw',
    method = 'GET') 
```

我在[Client.py](https://github.com/zopefoundation/Zope/blob/master/src/ZPublisher/Client.py)中对其进行了一些跟踪：

```
def call(url,username=None, password=None, **kw):
    return apply(Function(url,username=username, password=password), (), kw) 
```

好的，所以`kw = { 'method': 'GET' }`。据我所知，这转化为

```
Function.__init__(
    'http://...',
    username = 'jdoe',
    password = 'mypw'
).__call__(
    method = 'GET') 
```

`Function.__init__`期望`method`作为其参数的一部分，但它没有在那里传递：

```
 def __init__(self,url,
                 arguments=(),method=None,username=None,password=None,
                 timeout=None,
                 **headers):
        ...
        if method is not None: self.method=method 
```

`Function.__call__`预计`method`已经设置：

```
 def __call__(self,*args,**kw):
        method=self.method 
```

**应该修改`call`签名和`apply`调用以适应`__init__`，还是我误解了什么？**如果它真的是一个错误，这里有一个建议的补丁（Works For Me™）：

```
--- Client.py.orig
+++ Client.py
@@ -271,9 +271,9 @@

         return f

-def call(url,username=None, password=None, **kw):
+def call(url, arguments=(), method=None, username=None, password=None, timeout=None, **kw):

-    return apply(Function(url,username=username, password=password), (), kw)
+    return apply(Function(url, arguments=arguments, method=method, username=username, password=password, timeout=timeout), (), kw)

 ##############################################################################
 # Implementation details below here 
```

[错误报告](https://bugs.launchpad.net/zope2/+bug/1152193)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:14:28.947

该`ZPublisher.Client`模块真的很古老，应该被认为是未维护的，真的。

是的，该`call()`函数不处理更改`method`, 并按照您建议的方式添加处理方法。解决方法是不使用该`call()`函数，而是`Function()`直接使用该类。

随意将补丁添加到[Zope 问题跟踪器](https://bugs.launchpad.net/zope/+bugs)。

# api - OpenX rest api - 获取发布者下的站点列表

> ID：15272228
> 
> 赞同：0
> 
> 时间：2013-03-07T13:16:08.553
> 
> 标签：api, rest, xml-rpc, openx

我正在尝试找到一种方法来使用 OpenX REST API 获取发布者下的所有站点。但是文档（[http://www.openx.com/docs/openx_help_center/content/index.html](http://www.openx.com/docs/openx_help_center/content/index.html)）没有提供关于每个发布者 ID（account_id）或任何其他参数的“过滤”结果的任何见解。

有谁知道这是否受 Rest API 支持？

我发现了一些有限的 XMLRPC api“过滤”选项，但在 REST 上没有。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:05:42.070

显然没有这样的方法。通过添加 ?overload=medium 解决了这个问题，它将从 OpenX 获取所有站点，然后在我的客户端中遍历站点列表并比较 account_id。

# haskell - 输出函数名的函数

> ID：15272231
> 
> 赞同：10
> 
> 时间：2013-03-07T13:16:11.410
> 
> 标签：haskell, metaprogramming, template-haskell

是否可以在 Haskell 中实现一个返回自己的函数名的函数？

一种可能的类型可能是`(a -> b) -> String`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T14:40:18.423

您想要一个接受函数参数并返回与该函数名称相对应的定义站点变量名称的函数吗？

这不可能没有元编程，这通常表明你做错了:)。但假设你不是，实现正确方向的一种方法是通过[Template Haskell](http://hackage.haskell.org/package/template-haskell)，它可以获得唯一的名称（编译器如何命名事物）。例如

```
Prelude Language.Haskell.TH> :set -XTemplateHaskell
Prelude Language.Haskell.TH> let f x y = x + y
Prelude Language.Haskell.TH> $( stringE . show =<< reify 'f )

     "VarI f_1627394057
                (ForallT [PlainTV a_1627394063]
                         [ClassP GHC.Num.Num [VarT a_1627394063]]
                              (AppT (AppT ArrowT (VarT a_1627394063)) 
                                    (AppT (AppT ArrowT (VarT a_1627394063)) 
                                         (VarT a_1627394063)))) 
                         Nothing (Fixity 9 InfixL)" 
```

现在我们对变量了解很多。因此，您可以通过将名称传递给函数（通过'f）而不是 f 本身来玩游戏。

不过，您肯定处于反射和元编程的世界中，因此更多地了解您正在尝试做什么会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T16:46:28.240

为了澄清 dons 的帖子中提到的内容：Haskell 中没有函数有名称。有一些绑定可以绑定函数，但是如果我有这样一个函数（调用它`getName`），那么你期望它返回什么：

```
let f x = x
    g   = f
    h   = f
in  getName g == getName h 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:11:40.507

我不知道你需要它做什么，但也许一个简单的解决方案就足够了？像这样：

```
data NamedFunction a b = NamedFunction { 
    name :: String,
    apply :: a -> b
}

timesTwo :: NamedFunction Int Int
timesTwo = NamedFunction "timesTwo" (\x -> 2 * x) 
```

您可以按如下方式使用：

```
ghci> timesTwo `apply` 7
14
ghci> name timesTwo
"timesTwo" 
```

然后，您可以编写自己的版本`(.)`：

```
-- contrast (.)  ::    (b -> c) ->          (a -> b) ->         (a -> c)
compose :: NamedFunction b c -> NamedFunction a b -> NamedFunction a c
compose (NamedFunction n1 f1) (NamedFunction n2 f2) = 
     NamedFunction (n1++ " . " ++ n2) (f1 . f2) 
```

在 ghci 中：

```
ghci> let f = timesTwo `compose` timesTwo in (f `apply` 7, name f) 
(28,"timesTwo . timesTwo") 
```

你必须重新实现你自己的版本`map`，`filter`等等，你以后肯定会遇到其他问题，但也许这就是你所需要的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:42:38.197

我错过了什么吗？这个函数返回它自己的函数名。

```
Prelude> let myNameIs::(a->b) -> String; myNameIs f = "myNameIs"
Prelude> :type myNameIs
myNameIs :: (a -> b) -> String
Prelude> myNameIs myNameIs
"myNameIs" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-02T21:52:51.350

您可以使用 CPP 预处理您的源代码。在 CPP 中

```
#define _NAMEOF(name) #name 
```

定义一个宏 ,`_NAMEOF`用于字符串化文本（包括用程序员的引号括起来）。然后，您可以按如下方式使用它：

```
head [] = error $ _NAMEOF(head) ++ ": empty list!" 
```

哪个 CPP 应该转换为有效的 Haskell 源代码行：

```
head [] = error $ "head" ++ ": empty list!" 
```

# android - 没有 Fragments 的 Android 版 Facebook SDK 3.0 不起作用

> ID：15272232
> 
> 赞同：3
> 
> 时间：2013-03-07T13:16:13.017
> 
> 标签：android, facebook, android-facebook

我想使用 Facebook SDK 3.0 for Android 来做一些简单的图形请求。由于我不会使用`Fragment`s，因此我无法使用 Facebook 开发人员文档中发布的示例。

我已经设置了一些简单`Activity`的 s，但它们不起作用。[我在这里](https://stackoverflow.com/questions/13897056/when-to-request-permissions-with-facebooks-new-android-sdk-3-0)和[这里](https://stackoverflow.com/questions/14096403/facebook-login-with-android-sdk-3-0-causing-anrs-or-not-working-at-all)提出了赏金问题。但这并没有真正帮助。

与此同时，我阅读了很多关于 Facebook SDK 的帖子并尝试了数十个小时，但没有成功。[最后，我在这个博客](http://adilatwork.blogspot.co.uk/2013/02/facebook-android-sdk-30-requesting.html)上找到了一个额外的代码示例。所以我设置了一个完整`Activity`的，将所有朋友的家乡打印到LogCat。

但这也不起作用。相反，它只要求基本权限（公共信息+朋友列表）然后退出。我究竟做错了什么？Facebook 应用程序的密钥哈希、包名和类名已设置，LogCat 中没有任何有趣的内容。

```
package com.my.package;

import java.util.Arrays;
import java.util.Date;
import java.util.List;
import org.json.JSONArray;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.widget.Toast;
import com.facebook.*;

public class FBRequest extends Activity {

    private static final String PERMISSION_FRIENDS_HOMETOWN = "friends_hometown";
    private static final String PREFERENCE_ACCESS_TOKEN = "facebookAccessToken";
    private static final String PREFERENCE_EXPIRATION_DATE = "facebookAccessTokenExpires";
    private ProgressDialog mProgress;
    private SharedPreferences mPrefs;

    private void showToast(final String text) {
        runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
            }
        });
    }

    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
        try {
            startFacebookRequest();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session session = Session.getActiveSession();
        if (session != null) {
            session.onActivityResult(this, requestCode, resultCode, data);
        }
    }

    public interface FacebookConnectHandler {
        public void onSuccess();
        public void onFailure();
    }

    public void startFacebookRequest() {
        connectToFacebook(new FacebookConnectHandler() {
            @Override
            public void onSuccess() {
                // safety check
                if (isFinishing()) { return; }

                showProgressDialog("Connecting to Facebook ...");

                // check for publish permissions

                final List<String> permissions_required = Arrays.asList(PERMISSION_FRIENDS_HOMETOWN);

                if (Session.getActiveSession().getPermissions() == null || !Session.getActiveSession().getPermissions().containsAll(permissions_required)) {
                    // need to make a Session.openActiveSessionFromCache(...) call
                    // because of a bug in the Facebook sdk
                    // where a second call to get permissions
                    // won't result in a session callback when the token is updated

                    if (Session.openActiveSessionFromCache(FBRequest.this) == null) {
                        showToast("Could not connect to Facebook! (3)");
                        return;
                    }

                    Session.getActiveSession().addCallback(new Session.StatusCallback() {
                        @Override
                        public void call(Session session, SessionState state, Exception exception) {
                            if (exception != null || state.equals(SessionState.CLOSED) || state.equals(SessionState.CLOSED_LOGIN_FAILED)) {
                                // didn't get required permissions

                                session.removeCallback(this);

                                // safety check
                                if (!isFinishing()) {
                                    showToast("Could not connect to Facebook! (4)");
                                }
                            }
                            else if (state.equals(SessionState.OPENED_TOKEN_UPDATED) && session.getPermissions().containsAll(permissions_required)) {
                                // got required permissions

                                session.removeCallback(this);

                                // safety check
                                if (!isFinishing()) {
                                    startFacebookRequest();
                                }
                            }
                        }
                    });

                    Session.getActiveSession().requestNewReadPermissions(new Session.NewPermissionsRequest(FBRequest.this, permissions_required));
                    return;
                }
                startGraphRequest(Session.getActiveSession());
            }

            @Override
            public void onFailure() {
                cancelProgressDialog();
                showToast("Could not connect to Facebook! (1)");
            }
        });
    }

    private void startGraphRequest(Session session) {
        Request.executeGraphPathRequestAsync(session, "me/friends/?access_token="+session.getAccessToken()+"&fields=id,name,hometown&limit=500", new Request.Callback() {
            @Override
            public void onCompleted(Response response) {
                if (response != null) {
                    try {
                        JSONArray jarr = response.getGraphObject().getInnerJSONObject().getJSONArray("data");
                        JSONObject entry;
                        StringBuilder backupStr = new StringBuilder();
                        int nExistingEntries = existingEntries.length;
                        for (int i = 0; i < jarr.length(); i++) {
                            entry = jarr.getJSONObject(i);
                            if (!entry.isNull("id") && !entry.isNull("name") && !entry.isNull("hometown")) {
                                System.out.println(entry.getString("hometown"));
                            }
                        }
                    }
                    catch (Exception e) {
                        e.printStackTrace();
                        showToast("Unexpected error!");
                    }
                }
            }
        });
    }

    private void connectToFacebook(final FacebookConnectHandler handler) {

        // check whether the user already has an active session
        // and try opening it if we do

        // (note: making a Session.openActiveSessionFromCache(...) call
        // instead of simply checking whether the active session is opened
        // because of a bug in the Facebook sdk
        // where successive calls to update a token
        // (requesting additional permissions etc)
        // don't result in a session callback)

        if (Session.getActiveSession() != null && Session.openActiveSessionFromCache(this) != null) {
            handler.onSuccess();
            return;
        }

        // initialise the session status callback

        Session.StatusCallback callback = new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {

                if (isFinishing()) { return; }

                // check session state

                if (state.equals(SessionState.CLOSED) || state.equals(SessionState.CLOSED_LOGIN_FAILED)) {

                    clearFacebookSharedPreferences();

                    // specific action for when the session is closed
                    // because an open-session request failed
                    if (state.equals(SessionState.CLOSED_LOGIN_FAILED)) {
                        cancelProgressDialog();
                        handler.onFailure();
                    }
                }
                else if (state.equals(SessionState.OPENED)) {
                    cancelProgressDialog();

                    saveFacebookSharedPreferences(session.getAccessToken(), session.getExpirationDate().getTime());

                    showToast("Succeeded connecting to Facebook");

                    handler.onSuccess();
                }
            }
        };

        // make the call to open the session

        showProgressDialog("Connecting to Facebook...");

        if (Session.getActiveSession() == null && mPrefs.contains(PREFERENCE_ACCESS_TOKEN) && mPrefs.contains(PREFERENCE_EXPIRATION_DATE)) {
            // open a session from the access token info
            // saved in the app's shared preferences

            String accessTokenString = mPrefs.getString(PREFERENCE_ACCESS_TOKEN, "");

            Date accessTokenExpires = new Date(mPrefs.getLong(PREFERENCE_EXPIRATION_DATE, 0));

            AccessToken accessToken = AccessToken.createFromExistingAccessToken(accessTokenString, accessTokenExpires, null, null, null);

            Session.openActiveSessionWithAccessToken(this, accessToken, callback);
        }
        else {
            // open a new session, logging in if necessary
            Session.openActiveSession(this, true, callback);
        }
    }

    private void saveFacebookSharedPreferences(final String token, final long expiration) {
        if (mPrefs != null) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString(PREFERENCE_ACCESS_TOKEN, token);
            editor.putLong(PREFERENCE_EXPIRATION_DATE, expiration);
            editor.commit();
        }
    }

    private void clearFacebookSharedPreferences() {
        if (mPrefs != null) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.remove(PREFERENCE_ACCESS_TOKEN);
            editor.remove(PREFERENCE_EXPIRATION_DATE);
            editor.commit();
        }
    }

    private void showProgressDialog(final String text) {
        mProgress = ProgressDialog.show(getApplicationContext(), "Facebook", text, true, false);
    }

    private void cancelProgressDialog() {
        if (mProgress != null) {
            if (mProgress.isShowing()) {
                mProgress.dismiss();
            }
            mProgress = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        cancelProgressDialog();
    }

} 
```

提前致谢！

**编辑：**代码*确实*有效，但我没有调用`setContentView()`，并且在一个错误情况下调用了`Activity`'s 。`finish()`这就是为什么无法看到第二个（扩展）权限请求的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T13:32:42.200

上面的代码工作正常，除了我做了一些小改动，即在显示进度对话框时，它给出了异常窗口错误标记，为此**我改变了上下文**。我还评论了一条未使用“existingEntries”的行。

我可以登录并且应用程序请求访问朋友家乡访问权限。我可以看到朋友的身份和他们的家乡。

**更新的工作版本：**

```
package com.example.options;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.widget.Toast;

import com.facebook.AccessToken;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.Session.Builder;
import com.facebook.Session.NewPermissionsRequest;
import com.facebook.Session.OpenRequest;
import com.facebook.SessionLoginBehavior;
import com.facebook.SessionState;

public class FBRequest extends Activity {

    private static final String PERMISSION_FRIENDS_HOMETOWN = "friends_hometown";
    private static final String PREFERENCE_ACCESS_TOKEN = "facebookAccessToken";
    private static final String PREFERENCE_EXPIRATION_DATE = "facebookAccessTokenExpires";
    private ProgressDialog mProgress;
    private SharedPreferences mPrefs;

    private void showToast(final String text) {
        runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
            }
        });
    }

    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
        try {
            startFacebookRequest();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if(resultCode == RESULT_OK && requestCode == Session.DEFAULT_AUTHORIZE_ACTIVITY_CODE)
        {
            Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
            Session session = Session.getActiveSession(); 

            if (session != null && !session.isClosed()) 
            {
                startFacebookRequest();
            }
        }
    }

    public interface FacebookConnectHandler {
        public void onSuccess();
        public void onFailure();
    }

    public void startFacebookRequest() {
        connectToFacebook(new FacebookConnectHandler() {
            @Override
            public void onSuccess() {
                // safety check
                if (isFinishing()) { return; }

                showProgressDialog("Connecting to Facebook ...");

                // check for publish permissions

                final List<String> permissions_required = Arrays.asList(PERMISSION_FRIENDS_HOMETOWN);

                if (Session.getActiveSession().getPermissions() == null || !Session.getActiveSession().getPermissions().containsAll(permissions_required)) {
                    // need to make a Session.openActiveSessionFromCache(...) call
                    // because of a bug in the Facebook sdk
                    // where a second call to get permissions
                    // won't result in a session callback when the token is updated

                    if (Session.openActiveSessionFromCache(FBRequest.this) == null) {
                        showToast("Could not connect to Facebook! (3)");
                        return;
                    }

                    Session.getActiveSession().addCallback(new Session.StatusCallback() {
                        @Override
                        public void call(Session session, SessionState state, Exception exception) {
                            if (exception != null || state.equals(SessionState.CLOSED) || state.equals(SessionState.CLOSED_LOGIN_FAILED)) {
                                // didn't get required permissions

                                session.removeCallback(this);

                                // safety check
                                if (!isFinishing()) {
                                    showToast("Could not connect to Facebook! (4)");
                                }
                            }
                            else if (state.equals(SessionState.OPENED_TOKEN_UPDATED) && session.getPermissions().containsAll(permissions_required)) {
                                // got required permissions

                                session.removeCallback(this);

                                // safety check
                                if (!isFinishing()) {
                                    startFacebookRequest();
                                }
                            }
                        }
                    });

                    NewPermissionsRequest req = new Session.NewPermissionsRequest(FBRequest.this, permissions_required);
                    req.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
                    Session.getActiveSession().requestNewReadPermissions(req);
                    return;
                }
                startGraphRequest(Session.getActiveSession());
            }

            @Override
            public void onFailure() {
                cancelProgressDialog();
                showToast("Could not connect to Facebook! (1)");
            }
        });
    }

    private void startGraphRequest(Session session) {
        Request.executeGraphPathRequestAsync(session, "me/friends/?access_token="+session.getAccessToken()+"&fields=id,name,hometown&limit=500", new Request.Callback() 
        {
            @Override
            public void onCompleted(Response response) {
                if (response != null) {
                    try {
                        JSONArray jarr = response.getGraphObject().getInnerJSONObject().getJSONArray("data");
                        JSONObject entry;
                        StringBuilder backupStr = new StringBuilder();
//                        int nExistingEntries = existingEntries.length;
                        for (int i = 0; i < jarr.length(); i++) {
                            entry = jarr.getJSONObject(i);
                            if (!entry.isNull("id") && !entry.isNull("name") && !entry.isNull("hometown")) {
                                System.out.println(entry.getString("hometown"));
                            }
                        }
                    }
                    catch (Exception e) {
                        e.printStackTrace();
                        showToast("Unexpected error!");
                    }

                    showToast("Friends list populated");
                    cancelProgressDialog();
                }
            }
        });
    }

    private void connectToFacebook(final FacebookConnectHandler handler) {

        // check whether the user already has an active session
        // and try opening it if we do

        // (note: making a Session.openActiveSessionFromCache(...) call
        // instead of simply checking whether the active session is opened
        // because of a bug in the Facebook sdk
        // where successive calls to update a token
        // (requesting additional permissions etc)
        // don't result in a session callback)

        if (Session.getActiveSession() != null && Session.openActiveSessionFromCache(this) != null) {
            handler.onSuccess();
            return;
        }

        // initialise the session status callback

        Session.StatusCallback callback = new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {

                if (isFinishing()) { return; }

                // check session state

                if (state.equals(SessionState.CLOSED) || state.equals(SessionState.CLOSED_LOGIN_FAILED)) {

                    clearFacebookSharedPreferences();

                    // specific action for when the session is closed
                    // because an open-session request failed
                    if (state.equals(SessionState.CLOSED_LOGIN_FAILED)) {
                        cancelProgressDialog();
                        handler.onFailure();
                    }
                }
                else if (state.equals(SessionState.OPENED)) {
                    cancelProgressDialog();

                    saveFacebookSharedPreferences(session.getAccessToken(), session.getExpirationDate().getTime());

                    showToast("Succeeded connecting to Facebook");

                    handler.onSuccess();
                }
            }
        };

        // make the call to open the session

        showProgressDialog("Connecting to Facebook...");

        if (Session.getActiveSession() == null && mPrefs.contains(PREFERENCE_ACCESS_TOKEN) && mPrefs.contains(PREFERENCE_EXPIRATION_DATE)) {
            // open a session from the access token info
            // saved in the app's shared preferences

            String accessTokenString = mPrefs.getString(PREFERENCE_ACCESS_TOKEN, "");

            Date accessTokenExpires = new Date(mPrefs.getLong(PREFERENCE_EXPIRATION_DATE, 0));

            AccessToken accessToken = AccessToken.createFromExistingAccessToken(accessTokenString, accessTokenExpires, null, null, null);

            Session.openActiveSessionWithAccessToken(this, accessToken, callback);
        }
        else {
            // open a new session, logging in if necessary
            OpenRequest op = new Session.OpenRequest(this);

            op.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
            op.setCallback(null);

            List<String> permissions = new ArrayList<String>();
            permissions.add(PERMISSION_FRIENDS_HOMETOWN);
            op.setPermissions(permissions);

            Session session = new Builder(this).build();
            Session.setActiveSession(session);
            session.openForRead(op);
        }
    }

    private void saveFacebookSharedPreferences(final String token, final long expiration) {
        if (mPrefs != null) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString(PREFERENCE_ACCESS_TOKEN, token);
            editor.putLong(PREFERENCE_EXPIRATION_DATE, expiration);
            editor.commit();
        }
    }

    private void clearFacebookSharedPreferences() {
        if (mPrefs != null) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.remove(PREFERENCE_ACCESS_TOKEN);
            editor.remove(PREFERENCE_EXPIRATION_DATE);
            editor.commit();
        }
    }

    private void showProgressDialog(final String text) {
        cancelProgressDialog();
        mProgress = ProgressDialog.show(FBRequest.this, "Facebook", text, true, false);
    }

    private void cancelProgressDialog() {
        if (mProgress != null) {
            if (mProgress.isShowing()) {
                mProgress.dismiss();
            }
            mProgress = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        cancelProgressDialog();
    }

} 
```

日志猫：

```
......
......
03-11 18:57:26.781: I/System.out(6729): {"id":"10555075614xxxx","name":"Khammam"}
03-11 18:57:26.781: I/System.out(6729): {"id":"11042167564xxxx","name":"Warangal, India"}
03-11 18:57:26.789: I/System.out(6729): {"id":"11042167564xxxx","name":"Warangal, India"}
03-11 18:57:26.796: I/System.out(6729): {"id":"13074615695xxxx","name":"Jaggayyapet, India"}
03-11 18:57:26.812: I/System.out(6729): {"id":"12530386417xxxx","name":"Kodada, India"}
03-11 18:57:26.812: I/System.out(6729): {"id":"11047265564xxxx","name":"Vishakhapatnam, Andhra Pradesh, India"} 
```

**更新：**

第一次登录时它会询问所有权限，并删除了 SSO 登录，因为我没有使用本机应用程序配置我的 Facebook 应用程序（使用密钥库哈希键）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T14:37:17.663

使用以下 facebook SDK [https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)

以下是您要求的代码（从 facebook 获取好友列表）

```
try {

  Facebook mFacebook = new Facebook(Constants.FB_APP_ID);
  AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
  Bundle bundle = new Bundle();
  bundle.putString("fields", "birthday");
  mFacebook.request("me/friends", bundle, new FriendListRequestListener());

} catch(Exception e){
    Log.e(Constants.LOGTAG, " " + CLASSTAG + " Exception = "+e.getMessage());
}

public class FriendListRequestListener extends BaseRequestListener {

    public void onComplete(final String response) {
        _error = null;

        try {
            JSONObject json = Util.parseJson(response);
            final JSONArray friends = json.getJSONArray("data");

            FacebookActivity.this.runOnUiThread(new Runnable() {
                public void run() {
                    // Do stuff here with your friends array, 
                    // which is an array of JSONObjects.
                }
            });

        } catch (JSONException e) {
            _error = "JSON Error in response";
        } catch (FacebookError e) {
            _error = "Facebook Error: " + e.getMessage();
        }

        if (_error != null)
        {
            FacebookActivity.this.runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(getApplicationContext(), "Error occurred:  " + 
                                    _error, Toast.LENGTH_LONG).show();
                }
            });
        }
    }
} 
```

我希望它可以帮助你和其他人。

# jpa - 标准 API 相关

> ID：15272235
> 
> 赞同：6
> 
> 时间：2013-03-07T13:16:17.167
> 
> 标签：jpa, jpa-2.0, criteria, criteria-api

我一直在谷歌搜索，但不明白调用 javax.persistence.criteria.Subquery en the Criteria API 的方法相关的后果是什么。

[http://www.objectdb.com/api/java/jpa/criteria/Subquery/correlate_CollectionJoin_](http://www.objectdb.com/api/java/jpa/criteria/Subquery/correlate_CollectionJoin_)

这是来自 Pro JPA2 Mastering the Java Persistence API 一书。

> 在为此查询创建条件 API 查询定义时，我们必须关联 Project 的员工属性，然后将其连接到直接下属，以计算平均工资。此示例还演示了使用 Path 接口的 type() 方法来进行类型的多态比较：

```
CriteriaQuery<Project> c = cb.createQuery(Project.class);
Root<Project> project = c.from(Project.class);
Join<Project,Employee> emp = project.join("employees");
Subquery<Number> sq = c.subquery(Number.class);
Join<Project,Employee> sqEmp = sq.correlate(emp);
Join<Employee,Employee> directs = sqEmp.join("directs");
c.select(project)
 .where(cb.equal(project.type(), DesignProject.class),
        cb.isNotEmpty(emp.<Collection>get("directs")),
        cb.ge(sq, cb.parameter(Number.class, "value"))); 
```

这条线有什么作用？
加入 sqEmp = sq.correlate(emp);

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T21:39:24.197

它使您可以访问主查询引用的员工，以便您可以在子查询中使用它及其表

# linux - 如何使用 Perl 读取 HDIO_GET_IDENTITY

> ID：15272238
> 
> 赞同：1
> 
> 时间：2013-03-07T13:16:20.940
> 
> 标签：linux, perl, fcntl

我想在 Linux 上使用 perl 读取 HDIO_GET_IDENTITY。我正在尝试使用 Fcntl 模块，但我发现 Perl 模块文档的解释性不是很好。谁能给我指点如何做到这一点？

[https://metacpan.org/module/Fcntl](https://metacpan.org/module/Fcntl)

# android - 如何使用 Graph API 获取特定用户的所有 Facebook 帖子

> ID：15272241
> 
> 赞同：0
> 
> 时间：2013-03-07T13:16:28.847
> 
> 标签：android, facebook-graph-api

就像主题状态一样，我想为某些用户获取（公共）帖子列表。我期待“ [https://graph.facebook.com/search?q=from%3Dsome_user&type=post](https://graph.facebook.com/search?q=from%3Dsome_user&type=post) ”可能会起作用，但我什么也没得到。

假设 xxx 是有效的用户名或 id，其中人员不需要与使用访问令牌的人员有任何关系（如果需要 AT）。

这甚至可能吗？有任何想法吗？

编辑：如果没有，我会选择“ [https://graph.facebook.com/user-id/posts](https://graph.facebook.com/user-id/posts) ”，但我真的很想通过“搜索”访问公共帖子。

提前致谢。

ps 我正在使用 Android 但不使用 SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:39:09.773

以这种方式搜索帖子似乎在任何一端都没有效率。

如果您有用户 ID，则使用帖子、提要或主页。

脸书说：

> 您还可以通过将 aq 参数添加到家庭连接 URL 来搜索单个用户的新闻提要，仅限于该用户的朋友：
> 
> 新闻提要：[https ://graph.facebook.com/me/home?q=facebook](https://graph.facebook.com/me/home?q=facebook)

从那里您可以将具有正确隐私响应的 from.id 添加到单独的对象。

# regex - 如何使用 sed 替换 json 文件中键的值

> ID：15272244
> 
> 赞同：1
> 
> 时间：2013-03-07T13:16:53.623
> 
> 标签：regex, sed

我正在尝试替换以下 json 键值对，

```
"$$RESULT_REPORTER$$":"HTML", to 
"$$RESULT_REPORTER$$":"XML" 
```

使用 sed。

这是我正在使用的 sed 命令，

```
sed -i 's/^\(\"\$\$RESULT_REPORTER\$\$\"*:*\).*$/\1\"XML\"/' /path/to/file 
```

但问题是我无法在末尾保留逗号，并且它给了我 json 解析错误。替换字符串后如何保留逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:19:31.280

只需将逗号添加到替换中：

```
$ sed -i 's/^\(\"\$\$RESULT_REPORTER\$\$\"*:*\).*$/\1\"XML\",/' file
###                                                 HERE ---^ 
```

**编辑**

```
$ cat file
"$$RESULT_REPORTER$$":"HTML",
"$$RESULT_REPORTER$$":"HTML"

$ sed 's/^\("$\$RESULT_REPORTER\$\$":"\)[^"]*/\1XML/' file
"$$RESULT_REPORTER$$":"XML",
"$$RESULT_REPORTER$$":"XML" 
```

# mediawiki - Mediawiki 上次编辑的页面

> ID：15272245
> 
> 赞同：0
> 
> 时间：2013-03-07T13:16:54.673
> 
> 标签：mediawiki, wiki

我有一个包含许多页面的大型媒体 wiki，它的结构非常好，并由许多人维护。

但是，我需要一些小工具或功能来显示主页上的最新更改。

例如：更改页面的名称，按日期排序 - 列表中的 20 行..

也许不是每一个小的编辑文本的保存，但通常是最后一个被编辑的页面。

有没有办法做到这一点？对于用户来说，看看最近是否发生了一些变化，这将是非常有帮助的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:20:57.267

您可以嵌入，`Special:Recentchanges`或者如果您想将更改嵌入某处，请`{{Special:RecentChanges/20}}`在您的页面中添加代码。

# vba - 如何从 dist 列表中保存 GAL 的完整联系人并在 Outlook vba 中另存为私人联系人

> ID：15272247
> 
> 赞同：0
> 
> 时间：2013-03-07T13:17:06.660
> 
> 标签：vba, outlook, outlook-2010, distribution-list

当我打开通讯组列表并双击不属于我的个人联系人的成员并从更多选项菜单中选择添加到联系人时，它会打开他们的联系信息。然后我可以将其保存到我的个人联系人中。有没有办法通过 VBA 做到这一点，所以我不必单独单击并保存每个联系人？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:44:17.253

如果您使用的是 Outlook 对象模型，则您无法选择显式地创建一个新联系人并一次复制一个属性。

如果使用 Redemption 是一个选项，您可以调用 RDOAddressEntry.CopyTo 并将（新创建的）联系人作为参数传递。

源地址条目来自哪里？

# javascript - 在浏览器中显示原始高度和宽度的大图像

> ID：15272255
> 
> 赞同：0
> 
> 时间：2013-03-07T13:17:30.603
> 
> 标签：javascript, jquery, html, image

我有一种情况，我想在浏览器中显示一个 2200 像素宽度和 1600 像素高度的 HTML 图像。但问题是图像通过放大显示，并且默认显示一个缩放选项。我想在不放大的情况下以原始大小显示此图像，可能带有滚动条。是否有任何 JS 或 jQuery 插件来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:43:18.113

我假设您的意思是您是在浏览器中而不是在网页中单独查看图像？即[http://domain.com/image.jpg](http://domain.com/image.jpg) - 如果是这样，那么您将无法再控制图像，因此您无法对其应用任何 JS/CSS 规则

# android - Android - 如何阻止用户删除应用程序

> ID：15272258
> 
> 赞同：0
> 
> 时间：2013-03-07T13:17:40.670
> 
> 标签：android

是否可以阻止用户删除应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:18:09.613

不，出于安全原因，这对于第三方应用程序是不可能的。这样做是为了删除恶意软件类型的应用程序。

您可以通过将您的应用安装到 让用户更难使用`/system/app`，但这需要设备获得 root 权限。如果设备已植根，用户只需将其删除即可。

许多 OEM 设备上预装的应用程序是作为设备上 ROM 的一部分安装的，因此除非您 root，否则无法删除。它们是`/system/app`在构建 ROM 映像时安装的。如果您可以联系并说服 OEM 以这种方式包含您的应用程序，那就去做吧。

# r - spplot() 使用逐行数据的点阵图

> ID：15272260
> 
> 赞同：1
> 
> 时间：2013-03-07T13:17:45.117
> 
> 标签：r, graphics, rgdal

当数据按行排列时，如何使用 spplot() 创建点阵图，例如每个地区都有更多的值（我有`unemp`多年的失业率（`year`）地区`CSO_NAME)`？

这是我加载地图和合并数据的代码：

```
library(rgdal)
library(sqldf)

# Import map and assign data.shape@data to spdata
data.shape<-readOGR(dsn="folder",layer="mylayer")    
spdata <- data.shape@data

# Load statistics data
unemp <- read.csv("cso_unemployment_rwise.csv")

# Merge data with spdata
spdata <- sqldf("select sp.*, cu.year, cu.unemp from spdata sp join unemp cu on (sp.nazok_a = cu.CSO_NAME) ")

# Build new spdata
spdata_merged <- SpatialPolygonsDataFrame(data.shape, spdata) 
# This fails: length(Sr@polygons) == nrow(data) is not TRUE 
```

我想我可以使用类似的东西`formula`，例如条形图的这个例子：

```
barchart(spdata$year~spdata$unemp|spdata$CSO_NAME) 
```

但是因为我无法将数据与多边形合并，所以我不知道下一步应该做什么。在这种情况下，我可以轻松地转置数据，然后使用类似的东西：

```
spplot(spdata,c("y2009","y2010","y2011","y2012",...)) 
```

**可重现的例子**

这是样本数据，`stats_data`只有一个分组变量`year`和`stats_data2`两个分组变量`year`，`sex`

```
# Get map
con <- url("http://gadm.org/data/rda/CZE_adm2.RData")
print(load(con))
close(con)
gadm_data <- gadm@data

# Create sample Data
stats_data <-
  data.frame(

      as.character(rep(gadm_data$NAME_2,3)),
      as.numeric(round(runif(3*length(gadm_data$NAME_2), 0, 1),digits=3)*100),
      as.factor(rep(c(2010,2011,2012),length(gadm_data$NAME_2)))
  )
names(stats_data) <- c("NAME_2","UNEMPR","YEAR") # str(stats_data)

# Add each year to map data
library("sqldf")
gadm_data <- sqldf("select gd.*, sd.UNEMPR as u2010 from gadm_data gd join stats_data sd using (NAME_2) where year = 2010")
gadm_data <- sqldf("select gd.*, sd.UNEMPR as u2011 from gadm_data gd join stats_data sd using (NAME_2) where year = 2011")
gadm_data <- sqldf("select gd.*, sd.UNEMPR as u2012 from gadm_data gd join stats_data sd using (NAME_2) where year = 2012")
gadm@data <- gadm_data

# Plot     
spplot(gadm,c("u2010","u2011","u2012"),at=c(0,10,20,30,40,50,70,100))

# Create sample Data, two factor variables
stats_data2 <-
  data.frame(

    as.character(rep(gadm_data$NAME_2,6)),
    as.numeric(round(runif(6*length(gadm_data$NAME_2), 0, 1),digits=3)*100),
    as.factor(rep(c(2010,2011,2012),2*length(gadm_data$NAME_2))),
    as.factor(c("f","m"))
  )
names(stats_data2) <- c("NAME_2","UNEMPR","YEAR","SEX") # str(stats_data2) 
```

我可以使用 进行丑陋的数据操作`sqldf`，但是随着添加更多因素，这变得越来越复杂。假设我有 2 个具有 2 和 10 个值的因子，那么我必须添加 20 列。

R 版本 2.15.1，Windows XP，SP3

# jquery - jQuery - 就地编辑 - 带有隐藏字段且没有 POST

> ID：15272262
> 
> 赞同：0
> 
> 时间：2013-03-07T13:18:01.720
> 
> 标签：jquery, edit-in-place

我发现的许多解决方案都涉及实时发布已更改的数据。我不想要那个。

我期待：

*   将 div / span（单击/聚焦）转换为输入（就像任何普通的 Edit it place 一样）
*   隐藏输入但将其保留在 DOM 中，以便我可以发出 Ajax 请求，在该请求中我可以**序列化表单中的所有输入**。

# php - MVC - 模型中的小逻辑？

> ID：15272266
> 
> 赞同：0
> 
> 时间：2013-03-07T13:18:15.833
> 
> 标签：php, model-view-controller

我试过用谷歌搜索，但我想要一劳永逸的答案。

我们正在讨论是否可以将业务逻辑放入模型中。

例如，如果您想确保您的 id 在数据库中设置为 int。那你可以`intval($id)`在模型课上做吗？或者如果文本输入太短。还是您“必须”在控制器中执行此操作？

哪个是正确的方法？

对我来说，诸如计算和模型中不需要的其他东西（应该非常干净）应该在控制器中。

我很抱歉可能重复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T13:21:01.807

**胖模型，瘦控制器。**

在你的模型中进行铸造很好，因为你只在一个地方而不是在你在控制器中调用相关设置器的多个地方进行铸造。如果你在十个不同的控制器中使用了十次设置器，那么你必须确保你在十个不同的地方转换了变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:03:35.647

不要再担心在哪里做演员表了`int`。开始担心您显然对 MVC 有非常错误的理解（不幸的是，正如许多人所做的那样）。模型**就是一切**。该模型为*您*的应用程序建模。该模型是一个独立的块，代表您的应用程序*所做*的事情。

控制器只是让你的模型做某事的一种方式。它是外部世界和“您的应用程序”之间的粘合剂。控制器收到一个请求，并根据该请求决定模型应该做什么。然后要求视图可视化刚刚发生的事情或让用户了解模型的状态。

我通常从以下方面考虑结构：

*   控制器
*   模型
    1.  服务
    2.  原语
    3.  存储/数据库
*   看法
    *   模板

模型是最大的块。它被分解为*原语*，它们是代表应用程序中的一*件事*的单个对象（类） （用户对象、发布对象）；*services*，这是*您可以做的事情*（“注册用户”、“创建帖子”）；和*storage/database*，它负责管理从数据库中存储/检索原语。它们如何协同工作以及如何命名它们取决于您的应用程序，但这些是您通常需要处理的概念部分。

视图是它自己的层，可能包含也可能不包含模板。

如您所见，这是应用程序需要完成的大部分工作，控制器是其中最小的部分。控制器主要接收输入，调用*模型服务*并指示应呈现哪个视图作为响应。

形象化为什么这种分离是有意义的：问问自己你将如何使用你的*应用程序*。拥有一个用户可以做事的网站是典型的。但也许你也想有一个 JSON API 接口呢？还是用于管理任务的命令行客户端？这两种情况都只需要不同的输入处理和不同的输出。但是“注册用户”和“创建帖子”是相同的操作，无论它们是如何被调用的。因此它们属于模型，您只需要稍微不同的控制器和视图来创建 JSON API 或 CLI 工具。在这一切中，控制器确实是最小的部分，**不能包含业务逻辑**。

# javascript - 从输入中输入的天数添加今天的日期

> ID：15272272
> 
> 赞同：0
> 
> 时间：2013-03-07T13:18:29.067
> 
> 标签：javascript, jquery, date

我正在寻找一些 javascript，其中用户在表单中的输入框中输入一个数字，然后它从今天的日期计算日期

例如

用户输入 10 然后显示日期为 17/03/2013

今天的日期前 10 天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:23:17.950

```
var result = new Date();
result.setDate(result.getDate() + 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:23:43.103

尝试这个，

```
var add_days = parseInt(document.getElementById('text1').value);
var now = new Date();
now.setDate(now.getDate()+add_days);
alert(now); // Display this now to wherever you want 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:32:51.463

您应该在 javascript 类 Date 中添加 de 天数；

```
var addDays = $('#addDaysText').text();
var currentDate = new Date(); //get current date
var futureDate = currentDate() + addDays; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T05:22:53.560

除非您开始跨越月线，否则这些答案中的大多数都会起作用。例如，如果今天是 8 号，你加 10，你将得到 18 号，但如果今天是 24 号，你加 10，你将得到 34 号！

正确的做法是将其转换为绝对时间格式，添加单位，然后再转换回来。

```
var now = new Date().getTime();
var diff = 10; // days
var futureTime = now + 10*24*60*60*1000; // 24 hrs/day, 60 mins/hr, 60 sec/min, 1000 ms/sec
var future = new Date(futureTime); 
```

如果您想开始做一些非常奇怪的事情，我建议您使用库。我为浏览器和/或 nodejs 编写了一个，不久前使用[https://github.com/deitch/jsorm-i18n](https://github.com/deitch/jsorm-i18n)

# zend-framework2 - ZfcUser 中的用户状态到底是什么？

> ID：15272279
> 
> 赞同：7
> 
> 时间：2013-03-07T13:18:55.117
> 
> 标签：zend-framework2, zfcuser

谁能告诉我，[ZfcUser](https://github.com/ZF-Commons/ZfcUser)中的“用户状态”到底在做什么以及我们为什么需要它？这个用户状态是什么意思（我认为这不是它所指的角色）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T00:08:04.987

可以通过在 zfcuser.global.php 中的配置数组中添加两个值来使用用户状态

例如，为了将状态用作活动/非活动，您可以添加以下内容：

'enable_user_state' => true，'allowed_login_states' => 数组（1），

现在必须从管理员那里将用户状态设置为 1，否则该特定用户的登录将失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T13:44:30.033

基本上它是一个指示用户状态的标志。有时您需要能够禁用用户，或者以其他方式影响他们的“状态”，而无需实际从表中删除它们。如果您使用这样的系统，这就是状态列的用途。

举个简单的例子，考虑一个论坛上的临时禁止用户，你不想删除他们，所以你将他们的状态设置为禁止，只允许没有被禁止的用户登录。

当然，可以有更多状态来指示其他事情，例如尚未通过确认电子邮件验证的帐户，或者需要管理员批准，无论在您的用户生态系统中真正有意义的事情。可能你根本不需要任何东西，在这种情况下你可以放心地忽略它。

# iphone - 在 iphone sdk 中解析 excel 文件

> ID：15272280
> 
> 赞同：3
> 
> 时间：2013-03-07T13:18:55.187
> 
> 标签：iphone, ios, xml

我正在开发一个需要解析 .xls 文件的 iphone 应用程序。我进行了 DhlibLxs 解析，但没有找到任何解决方案。是否有任何其他可以解析 xls 文件的库或框架。我能够解析 csv 但如何解析 excel 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:27:11.227

**不，没有这样的产品可以为您提供 100% 的准确度。**

很少有项目可以读取 xls 文件，但特定于该版本的文件。

但是，您可以使用 CSV 文件。

* * *

我和我的团队做了几个月的研究并且能够阅读，但写作更难。

原因：

尝试将 xlsx 文件重命名为 zip。然后解压，你会发现大约 12 个（我错过的确切数量）文件。

读取每个文件的内容。然后你就会知道所有文件是如何相互关联的，因为一个文件包含 A、B、C... 而另一个包含 1,2,3... 第三个包含它们之间的链接，第四个包含公式，依此类推。

最重要的是，文件扩展名xls、xlsx和2003、2007、2011不断变化。我想只有微软excel开发人员才会详细了解这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:25:51.557

您应该将您的 xls 文件转换为 .csv 文件，然后通过`NSString`'s 方法读取 csv 文件的每一行`componentsSeparatedByString:@","`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:29:33.237

[libxls](http://sourceforge.net/projects/libxls/)怎么样？...

它的描述说，它是一个“**用于解析 Excel (XLS) 文件的库，带有用于将 Excel 文件转换为 CSV 的示例程序**”。

这个问题还提供了一些有趣的链接：[Read data from Excel file in Objective-C (iPhone)](https://stackoverflow.com/questions/3516129/read-data-from-excel-file-in-objective-c-iphone)。您可以将其与答案合并：[objective-c loading data from excel](https://stackoverflow.com/questions/9974501/objective-c-loading-data-from-excel)

希望它会有所帮助......!!!

# javascript - 哪个 for 循环在 javascript 中更有效？

> ID：15272284
> 
> 赞同：2
> 
> 时间：2013-03-07T13:18:57.680
> 
> 标签：javascript, for-loop, comparison, performance

哪个效率更高？

```
// < 11
for(var i = 0; i < 11; i++){ ... } 
```

或者

```
// <= 10
for(var i = 0; i <= 10; i++){ ... } 
```

我不确切知道 for 函数是如何工作的，但我假设它`< 11`更有效，因为`<= 10`似乎在每次`10`比较中它也检查它是否也相等，而不仅仅是更小，所以它必须进行 2 次比较而不是一。

我是对的，或者这是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:25:57.047

如果有任何区别，那将是非常小的。您应该使用更易于维护的代码。通常`<`首选运算符，因为从 0 开始循环，而计数器是`< x`迭代`x`。

但是，任何差异都不是因为进行了`<=`两次比较，因为它没有。

当比较两个数值时，计算机实际上将它们相减，并检查会发生什么。如果结果是正数、负数或零，则不同的运算符会给出正确的结果：

```
operator:   true when result is:
----------  ---------------------
<           negative
<=          not positive
==          zero
>           positive
>=          not negative 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T13:29:04.803

每当您有性能问题时，请务必在[jsPerf.com](http://jsperf.com)上提出。

有了[这个测试用例](http://jsperf.com/loopcompare-15272284)：

*   在 FF18 中，*第一个*循环的速度快得可以忽略不计
*   在 FF19 中，*第二个*循环的速度快得可以忽略不计。
*   在 Chrome 25 中，它们*完全相同*。

实际上，这充其量只是一个微预优化，您可能应该将注意力集中在其他地方。

# jquery - 从jquery获取asp下拉列表中的选定项目

> ID：15272285
> 
> 赞同：0
> 
> 时间：2013-03-07T13:18:58.903
> 
> 标签：jquery, asp.net, .net

我有一个 asp 下拉列表：

```
<asp:DropDownList runat="server" ID="select_install_type" name="select install type">
                          <asp:ListItem Values="0" id ="installTypeMeterAndTransmitter" />   
                           <asp:ListItem Values="1" id ="installTypeTransmitterOnly" /> 
                            <asp:ListItem Values="2" id="installTypeMeterOnly"/>
                         </asp:DropDownList> 
```

我在服务器端使用本地化名称填充其项目：

```
private void FillInstallTypeControl()
        {
            this.select_install_type.Items[0].Text = CultureResourceHelper.GetConst("meter_and_transmitter");
            this.select_install_type.Items[1].Text = CultureResourceHelper.GetConst("transmitter_only");
            this.select_install_type.Items[2].Text = CultureResourceHelper.GetConst("meter_only");
        } 
```

现在我想写一个简单的jquery方法在选择改变时运行，并根据新的选择做一些事情：

```
 $('#select_install_type').change(function () {

                select_install_type.
                var selected = ($("#select_install_type").val());
              } 
```

我可以获得选定的值，但由于它是本地化的，我不想将其文本与一些字符串进行比较，如下所示：

```
if (selected == "אאאא")
{ //Do something
} 
```

我怎样才能知道选择了哪些项目？也许得到选定的索引或ID？但我是 jquery 的新手，所以我不知道该怎么做。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:26:31.097

尝试：

```
 $('#' + <%= select_install_type.ClientID %>).change(function () {
            var selected = $(this).val();
  } 
```

或者您可以获取所选选项的 id：

```
 $('#' + <%= select_install_type.ClientID %>).change(function () {
            var selected = $(this).find('option:selected').prop("id");
  } 
```

`**[jQuery Sample](http://jsfiddle.net/RF35g/)**`

# c# - 从数据库表中选择两行

> ID：15272286
> 
> 赞同：1
> 
> 时间：2013-03-07T13:18:58.903
> 
> 标签：c#, linq

我想这是一个非常标准的任务，但我仍然无法习惯 LINQ。我需要数据库中表中的两行，现在我使用两个单独的 LINQ 查询：

```
 imageInfo = AppConfigService.All().Where(a =>(a.ConfigProperty == "MaterialImages")).FirstOrDefault();
        imageLocation = AppConfigService.All().Where(c => (c.ConfigProperty == "DefaultImagePath")).FirstOrDefault(); 
```

我想要的是将信息保存在一个变量中，例如`imageInfo[0]`for my`MaterialImages`和`imageInfo[1]`for my`DefaultImagePath`或类似的东西。尽管我对 LINQ 的了解非常少，但我认为这两个查询是不需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:25:06.917

您可以使用`Concat`和`Take(1)`：

```
var imageInfoLocation =
    (from a in AppConfigService
     where a.ConfigProperty == "MaterialImages"
     select cust).Take(1)
    .Concat(
    (from a in AppConfigService
     where a.ConfigProperty == "DefaultImagePath"
     select cust).Take(1))
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:25:17.233

您可以在下面使用单个查询，但您的原始查询更具可读性：

```
var res = AppConfigService
    .All()
    .Where(a =>(a.ConfigProperty == "MaterialImages" || a.ConfigProperty == "DefaultImagePath"))
    .GroupBy(a => a.ConfigProperty)
    .ToDictionary(g => g.Key, g => g.FirstOrDefault()); 
```

这将带回一个不超过两个项目的字典：一个用于`ConfigProperty`，另一个用于具有该属性的第一个或默认项目。如果没有带有`"MaterialImages"`or的源行`"DefaultImagePath"`，则结果将包含少于两个项目。您可以通过使用相应的常量作为键查找来从字典中获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:27:01.287

我认为不可能在一个查询中进行，因为您希望列表中的第一个元素满足两个不同的条件，如果您想在一个集合中获得结果，可以使用联合

```
var union = imageInfo = AppConfigService.All().
   Where(a =>(a.ConfigProperty == "MaterialImages")).FirstOrDefault().
  Union(
           AppConfigService.All().Where(c => (c.ConfigProperty ==
                                        "DefaultImagePath")).FirstOrDefault()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T13:20:56.460

You can use the following,

```
 var rows = AppConfigService.All().Where(a =>(a.ConfigProperty == "MaterialImages" || c.ConfigProperty == "DefaultImagePath")); 
```

# arrays - 如何在 R 中生成一组“语言”对象？

> ID：15272292
> 
> 赞同：1
> 
> 时间：2013-03-07T13:19:07.597
> 
> 标签：arrays, r, types, legend

我想将格式化的图例文本存储在一个数组中。

```
normFactor= c(1e-1, 1e-2, 1e-3)

legend_text[1] = bquote(mu ~ "=" ~ .(normFactor[1]))
legend_text[2] = bquote(mu ~ "=" ~ .(normFactor[2]))
legend_text[3] = bquote(mu ~ "=" ~ .(normFactor[3])) 
```

bquote-output 似乎是以下类型`language`：

```
str(bquote(mu ~ "=" ~ .(normFactor[3]))) 
```

> 语言 mu ~ "=" ~ 0.001

所以我想我可以设置一组语言元素：

```
legend_text = language() 
```

不幸的是，这不起作用，我想知道如何将这些元素存储在数组中，...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:17:31.707

您可以将它们存储在列表中，或者更好地创建它们，如下所示：

```
lapply(seq_along(normFactor),
         function(i)bquote(mu ~ "=" ~ .(normFactor[i])))

[[1]]
mu ~ "=" ~ 0.1

[[2]]
mu ~ "=" ~ 0.01

[[3]]
mu ~ "=" ~ 0.001 
```

`bquote`创建语言对象实际上可以使用`as.list`和转换为列表或从列表转换`as.call`。因此，可以修改 above 的解决方案，例如：

```
> ll <- lapply(seq_along(normFactor),
+        function(i)as.list(bquote(mu ~ "=" ~ .(normFactor[i]))))
> str(ll)
List of 3
 $ :List of 3
  ..$ : symbol ~
  ..$ : language mu ~ "="
  ..$ : num 0.1
 $ :List of 3
  ..$ : symbol ~
  ..$ : language mu ~ "="
  ..$ : num 0.01
 $ :List of 3
  ..$ : symbol ~
  ..$ : language mu ~ "="
  ..$ : num 0.001 
```

然后将结果强制到调用列表：

```
> lapply(ll,as.call)
[[1]]
mu ~ "=" ~ 0.1

[[2]]
mu ~ "=" ~ 0.01

[[3]]
mu ~ "=" ~ 0.001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:56:21.500

语言不是原子数据类型，因此结果将是一个列表而不是一个向量。动态类型是你的朋友：

```
legend_text<- c(
 bquote(mu ~ "=" ~ .(normFactor[1])),
 bquote(mu ~ "=" ~ .(normFactor[2])),
 bquote(mu ~ "=" ~ .(normFactor[3]))
) 
```

不过，我不知道这是否是您的传奇真正需要的操作系统。

# c - 将数据保存到二进制文件

> ID：15272295
> 
> 赞同：0
> 
> 时间：2013-03-07T13:19:15.353
> 
> 标签：c, types, binaryfiles, sizeof

以二进制模式 [8 位或 12 位] 将字符保存到文件时需要多少空间？

```
fprintf(f,"%ld",ch); 
```

另外，如果我保存很长 [say 5] 那么需要多少空间 3bits [101] 或 8bits [00000101]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:30:16.637

```
fprintf(f,"%ld",...) 
```

会将您的数字转换为十进制数字，并将使用 log_10(ch) 字节进行存储。当您使用[fwrite](http://www.cplusplus.com/reference/cstdio/fwrite/)存储它时，它将占用您指定的字节数。

```
fwrite (buffer , 1 , sizeof(buffer) , f ) 
```

另请注意，您永远不会将单个位存储到文件中，因为读写访问是按字节计算的，因此始终是 8 的倍数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:23:29.870

它复制`long`在您的平台上存储 a 所需的字节数 ( `sizeof (long)`)。如果它只复制表示数字所需的位，则在读取数据时将无法解释数据。

但是，在您的代码中，您正在复制到一个字符串。因此将存储字符（可能是 ASCII）表示，而不是二进制数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:22:23.347

你需要一个很好的帮助工具：[**sizeof** Wiki article](http://en.wikipedia.org/wiki/Sizeof)

引用：

> 在编程语言 C 和 C++ 中，一元运算符 sizeof 用于计算任何数据类型的大小，以表示该类型所需的字节数来衡量。在这种情况下，字节与无符号字符相同，并且可能大于 8 位，尽管这种情况并不常见。sizeof 的结果是它前面的表达式或带括号的类型说明符的类型的大小，并且具有通常由 size_t 表示的无符号整数类型。sizeof 可以应用于任何数据类型，包括原始类型，如整数和浮点类型、指针类型或复合数据类型（联合、结构或 C++ 类）。

所以基本上：如果你想知道某些东西将使用多少字节，只需使用**sizeof**。

**但是要小心**：*指针*和其他实际上是指针但使用方式不同的元素（如数组）仅以字节为单位显示指针的大小......而不是指针指向的结构！并且存储指针的用途非常有限 - 下次您要使用的对象可能位于内存中的不同位置。

# hadoop - 在 HDFS 上看不到 TABLE

> ID：15272298
> 
> 赞同：0
> 
> 时间：2013-03-07T13:19:24.357
> 
> 标签：hadoop, hive, hdfs

我创建了如下表格。

```
CREATE TABLE apachelog (
   host STRING, identity STRING, user STRING, time STRING, request STRING, status STRING,
   size STRING, referer STRING, agent STRING)
   ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
   WITH SERDEPROPERTIES ( "input.regex" = "([^ ]*) ([^ ]*) ([^ ]*) (-
   |\\[[^\\]]*\\]) ([^ \"]*|\"[^\"]*\") (-|[0-9]*) (-|[0-9]*)(?: ([^
   \"]*|\"[^\"]*\") ([^ \"]*|\"[^\"]*\"))?", "output.format.string" =
   "%1$s %2$s %3$s %4$s %5$s %6$s %7$s %8$s %9$s" )
    STORED AS TEXTFILE
   LOCATION 's3://dinendra80/H4P3'; 
```

我可以看到表格在那里并且有正确的行数。

```
hive> show tables; 
OK 
apachelog 
Time taken: 14.376 seconds 
```

我找到仓库位置。

```
hadoop@domU-12-31-39-02-5D-B7:~$ cat hive/conf/hive-default.xml | grep warehouse 
<name>hive.metastore.warehouse.dir</name> 
<value>/mnt/hive_081/warehouse</value> 
<description>location of default database for the warehouse</description> 
```

然后，当我这样做时，我收到一条错误消息。

```
hadoop fs -lsr /mnt/hive_081

lsr: Cannot access /mnt/hive_081: No such file or directory.

Same thing when I look for /mnt/hive_081/warehouse 
```

我做错了什么？我从一开始就完成了所有设置 3 次，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:11:47.097

因为在创建表时，您明确指定表数据位置在“ **s3** ”文件系统上，而不是在 hive-default 中使用关键字**LOCATION**定义的位置。[...位置 's3://dinendra80/H4P3'..]

此关键字将覆盖 conf 文件中指定的表的默认 HDFS 存储位置。

如果您删除 LOCATION 's3://dinendra80/H4P3'，hive 会将表存储在 '/mnt/hive_081/warehouse' 中，您将能够从 Hadoop cli 中使用它。

# java - Application design using Fragments, ViewPager, PullToRefresh

> ID：15272303
> 
> 赞同：1
> 
> 时间：2013-03-07T13:19:43.590
> 
> 标签：java, android, android-fragments, android-viewpager

I'm now working on the Android application which main Activity extends [FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html) (support library). This activity contains [ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html) view, which adapter is [FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html). To be exact, the adapter is a custom subclass, which extends FragmentStatePagerAdapter.

Adapter class has getItem() method to return a Fragment instance. I store these fragments within SparseArray not to create new fragment each time getItem() called. When the activity is destroyed, I clear this array, so I hope to create all of these fragments again when activity is recreated.

There is a scenario: user starts the app, then goes to the Android's Home (Launcher) screen, works with another apps, then Android OS kills our application to free up memory. When the user comes back to our application (it is not restarted from the very beginning, but is recreated and resumed from the place user has leaved it on), I watch the following sequence of callback calls:

```
Application: onCreate() called
Fragment: onAttach() called
Fragment: onCreate() called
Activity: onCreate() called
Fragment: onViewCreated() called
Activity: onStart() called 
```

There are more than one Fragment (ViewPager calls getItem() for the current one and the two its neighbors - next and previous), but let's consider there's only one fragment to simplify it.

I used to think that activity's onCreate() should be called earlier than the fragments ones. This **only** happens when the app is brought back from background state being previously killed by the OS.

*I want to perform some background action before displaying anything within this activity (including fragments, so I don't want their onCreate() methods to be called so early). How may I do this in the described case?*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:38:52.887

我发现最好使用[onActivityCreated()](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)回调来确保此时创建主机活动。所以没有必要在 Fragment 的[onCreate()](http://developer.android.com/reference/android/app/Fragment.html#onCreate%28android.os.Bundle%29)方法中对 UI 做一些重要的事情。

# asynchronous - 使 TcpListener 异步处理连接的正确方法是什么？

> ID：15272305
> 
> 赞同：3
> 
> 时间：2013-03-07T13:19:50.530
> 
> 标签：asynchronous, f#, async-await, tcplistener

对不起，很长的帖子。我想`TcpListener`用来侦听端口，处理不同（后台）线程中传入连接请求的繁重工作，然后在准备好时将响应发送回客户端。我在 MSDN 上阅读了很多代码和示例，并为服务器提出了以下实现。

对于以下所有实现，请假设以下变量：

```
let sva = "127.0.0.1"
let dspt = 32000

let respondToQuery (ns_ : NetworkStream) (bta_ : byte array) : unit =
    // DO HEAVY LIFTING
    () 
```

**实现1**（普通的同步服务器；我[从这个 MSDN 页面翻译的代码](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)）

```
let runSync () : unit =
    printfn "Entering runSync ()"
    let (laddr : IPAddress) = IPAddress.Parse sva
    let (svr : TcpListener) = new TcpListener (laddr, dspt)
    try
        svr.Start ()
        let (bta : byte array) = Array.zeroCreate<byte> imbs
        while true do
            printfn "Listening on port %d at %s" dspt sva
            let (cl : TcpClient) = svr.AcceptTcpClient ()
            let (ns : NetworkStream) = cl.GetStream ()
            respondToQuery ns bta
            cl.Close ()
        svr.Stop ()
        printfn "Exiting runSync () normally"
    with
        | excp ->
            printfn "Error:  %s" excp.Message
            printfn "Exiting runSync () with error" 
```

**实现2**（我[在这个 MSDN 页面上](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.beginaccepttcpclient.aspx)的代码翻译）

```
let runAsyncBE () : unit =
    printfn "Entering runAsyncBE ()"
    let (tcc : ManualResetEvent) = new ManualResetEvent (false)
    let (bta : byte array) = Array.zeroCreate<byte> imbs
    let datcc (ar2_ : IAsyncResult) : unit =
        let tcpl2 = ar2_.AsyncState :?> TcpListener
        let tcpc2 = tcpl2.EndAcceptTcpClient ar2_
        let (ns2 : NetworkStream) = tcpc2.GetStream ()
        respondToQuery ns2 bta
        tcpc2.Close ()
        tcc.Set () |> ignore
    let rec dbatc (tcpl2_ : TcpListener) : unit =
        tcc.Reset () |> ignore
        printfn "Listening on port %d at %s" dspt sva
        tcpl2_.BeginAcceptTcpClient (new AsyncCallback (datcc), tcpl2_) |> ignore
        tcc.WaitOne () |> ignore
        dbatc tcpl2_
    let (laddr : IPAddress) = IPAddress.Parse sva
    let (tcpl : TcpListener) = new TcpListener (laddr, dspt)
    try
        tcpl.Start ()
        dbatc tcpl
        printfn "Exiting try block"
        printfn "Exiting runAsyncBE () normally"
    with
        | excp ->
            printfn "Error:  %s" excp.Message
            printfn "Exiting runAsyncBE () with error" 
```

**实现3**（我的实现基于[异步工作流的 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd233250.aspx)）

```
let runAsyncA () : unit =
    printfn "Entering runAsyncA ()"
    let (laddr : IPAddress) = IPAddress.Parse sva
    let (svr : TcpListener) = new TcpListener (laddr, dspt)
    try
        svr.Start ()
        let (bta : byte array) = Array.zeroCreate<byte> imbs
        while true do
            printfn "Listening on port %d at %s" dspt sva
            let (cl : TcpClient) = svr.AcceptTcpClient ()
            let (ns : NetworkStream) = cl.GetStream ()
            async {respondToQuery ns bta} |> Async.RunSynchronously
            cl.Close ()
        svr.Stop ()
        printfn "Exiting runAsyncA () normally"
    with
        | excp ->
            printfn "Error:  %s" excp.Message
            printfn "Exiting runAsyncA () with error" 
```

现在，根据我对 MSDN 文档的阅读，我认为那`Implementation 3`会是最快的。但是当我用来自多台机器的多个查询访问服务器时，它们都以大致相同的速度运行。这让我相信我一定做错了什么。

在后台执行繁重的工作，并在完成后将响应返回给客户端，同时允许另一个客户端可能也连接并在另一个后台线程中启动另一个任务，是不是`Implementation 2`或者`Implementation 3`是“正确”的方法？`TcpListener`如果没有，您能告诉我应该阅读哪些课程（或教程）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:03:50.533

主循环的正确结构应如下所示：

```
let respondToQuery (client:TcpClient) = async {
  try
    let stream = client.GetStream()
    () // TODO: The actual processing goes here!
  finally
    client.Close() }

async {
  while true do 
    let! client = t.AcceptTcpClientAsync() |> Async.AwaitTask
    respondToQuery client |> Async.Start } 
```

需要注意的关键事项是：

*   我将主循环包裹在里面`async`，这样你就可以异步等待客户端使用`AcceptTcpClientAsync`（不在那里阻塞）

*   该`respondToQuery`函数返回一个在后台使用 启动的异步计算`Async.Start`，以便处理可以在等待下一个客户端的同时并行继续（使用时`Async.RunSynchronously`您将阻塞并等待`respondToQuery`完成）

*   为了使这个完全异步，里面的代码`respondToQuery`也需要使用流的异步操作——寻找`AsyncRead`和`AsyncWrite`。

您也可以使用`Async.StartChild`，在这种情况下，子计算（的主体`respondToQuery`）获得与父级相同的取消令牌，因此当您取消主异步工作流时，它也会取消所有子级：

```
 while true do 
    let! client = t.AcceptTcpClientAsync() |> Async.AwaitTask
    do! respondToQuery client |> Async.StartChild |> Async.Ignore } 
```

该`Async.StartChild`方法返回一个异步计算（使用`let!`or开始`do!`），我们需要忽略它返回的令牌（可用于等待子进程完成）。

# c# - Structural hashing of array of double in c#

> ID：15272311
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:20:26.690
> 
> 标签：c#, .net, hashcode

I would like to do structural hashing in a C# array, and I dont know how to do so. This seems like a very basic and very simple question in any language, but I can't make it work in C#...

I have an array of 383 double. when I hash it, I get a very odd value

```
// this returns 134217728
let h = ((IStructuralEquatable) data).GetHashCode(EqualityComparer<double>.Default) 
```

which happens to be such that `ln h / ln 2 = 27` ...

How can one get in C# the structural hashcode of an array of hashable stuff ?

**Edit** better illustration

In particular the following code would produce stupid results

```
 var vala = new[] { 1f, 354652f, 3f };
    var valb = new[] { 1f, 56f, 545013f };
    var valc = new[] { 1f, 2584356483f,  68763948475f };

    var hashA = ((IStructuralEquatable)vala).GetHashCode(EqualityComparer<float>.Default);
    var hashB = ((IStructuralEquatable)valb).GetHashCode(EqualityComparer<float>.Default);
    var hashC = ((IStructuralEquatable)valc).GetHashCode(EqualityComparer<float>.Default); 
```

the hash is consistently `796917760`. (it seem to change with the 1st number though...)

**Conclusion**

The conclusion seems to be that structural hashing is just broken in C#, in practical terms.

(of course litterally, it is not, as others have argued an almost constant function is a valid hash function.....)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:22:15.533

The value you get is not really odd because values returned by `GetHashCode` are **opaque**. You are not supposed to be able to derive *any* information from them, so any value is as odd as any other.

That said, `IStructuralEquatable` is billed as the solution to your problem, and indeed it works for me:

```
var a = new[] { 1f, 2f, 3f };
var b = new[] { 1f, 2f, 3f };

var hashA=((IStructuralEquatable)a).GetHashCode(EqualityComparer<float>.Default);
var hashB=((IStructuralEquatable)b).GetHashCode(EqualityComparer<float>.Default);

Console.WriteLine(hashA == hashB); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:35:41.600

结构哈希码指示两个不同的对象（或集合）是否在*语义*上表示相同的数据。它工作正常；例如：

```
// invent some data
double[] vals1 = new double[383];
Random rand = new Random(12345);
for (int i = 0; i < vals1.Length; i++)
    vals1[i] = rand.NextDouble();
double[] vals2 = (double[])vals1.Clone();

// test with object rules
Console.WriteLine("{0} vs {1}",
    vals1.GetHashCode(), vals2.GetHashCode()); // 2 different numbers
Console.WriteLine(Equals(vals1, vals2)); // False

// now test using structural-equatable rules
IStructuralEquatable se1 = vals1, se2 = vals2;
var comparer = EqualityComparer<double>.Default;
Console.WriteLine("{0} vs {1}",
    se1.GetHashCode(comparer), se2.GetHashCode(comparer)); // 2 identical numbers
Console.WriteLine(se1.Equals(se2, comparer)); // True 
```

# java - 在没有客户端的 Java 中通过 LAN 进行通信

> ID：15272313
> 
> 赞同：0
> 
> 时间：2013-03-07T13:20:29.013
> 
> 标签：java

只是一个简单的问题：我目前正在尝试编写一个程序，该程序应该从连接到我们局域网的设备中捕获数据，然后将其存储在数据库中。问题是我无法在所述设备中安装 Java（ZK Software X628C，用于确认员工访问的指纹读取器）。我只需要发送一个简短的命令，然后取回数据。

有可能用Java实现这样的东西吗？我发现的一切都是用 Java 编写的服务器/客户端之间的通信。

提前致谢。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:43:10.673

由于该设备通过**网络**进行通信，这就很好地暗示了这种通信是独立于 Java 的。它很可能使用一些网络标准。然而，Java 是编写通过网络与该设备进行通信的软件的好选择，因为它已经实现了许多网络功能。

我看到制造商提到了可用于此设备的 SDK（软件开发工具包），因此这至少告诉人们有关如何与此设备通信的信息*应该*普遍可用。如果 SDK 在 Java 中不可用，这可能需要软件开发人员进行更多（低级的、技术性的）工作，但总的来说，**如果所有必要的信息都可用**的话，这应该是可能的。

也许您应该首先联系制造商以了解 SDK 以及他们为软件开发人员提供的其他哪些信息？

# dart - 将多个 Web 组件类放入一个库中

> ID：15272316
> 
> 赞同：3
> 
> 时间：2013-03-07T13:20:37.923
> 
> 标签：dart, dart-webui

我想在一个库中定义多个 Web Web 组件。像这样：

```
library myapp;

import 'package:web_ui/web_ui.dart';

class Component1 extends WebComponent {
  int count = 0;
  void increment() {
    count++;
  }
}

class Component2 extends WebComponent {
  int count = 0;
  void increment() {
    count++;
  }
} 
```

然后在这样的 html 文件中使用它们：

```
<script type="application/dart" src="myapp.dart"></script>

<element name="x-component1" constructor="Component1" extends="div">
  <template>
    <button on-click="increment()">Click me</button>
    <span>(click count: {{count}})</span>
  </template>
</element>

<element name="x-component2" constructor="Component2" extends="div">
  <template>
    <button on-click="increment()">Click me</button>
    <span>(click count: {{count}})</span>
  </template>
</element>

<div is="x-component1"></div>
<div is="x-component2"></div> 
```

当我试图运行这个程序时，我得到：

在类“Component1”中未声明构造函数“Component1.forElement”。

我的问题：

有没有办法将多个 Web 组件类放入一个库中？因为现在看起来每个 Web 组件类都必须在自己的库中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:42:25.023

我认为目前没有办法使这项工作。我打开：[https](https://github.com/dart-lang/web-ui/issues/389) ://github.com/dart-lang/web-ui/issues/389来跟踪错误。

# ember.js - Cannot access Controller in init function of View in 1.0.0rc

> ID：15272318
> 
> 赞同：2
> 
> 时间：2013-03-07T13:20:43.397
> 
> 标签：ember.js

I have a view which is setup by a route plus an associated controller. I can trace that the controller is created but in the `init()` function of the view, when I do this:

```
init: function() {                  
  this._super();                     
  console.log(this.get('controller'));
} 
```

The controller is `null`. If I check in `didInsertElement()`, the controller is set. I think it would be useful to have the controller in the `init()` function already. Why is this not the case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:31:26.107

情况就是这样，因为**init() 在创建视图时被调用（= Ember 对象）**。Ember 在某处做了类似于以下的事情。然后你的 init 被调用。

```
var view = Ember.View.create({}); 
```

**此时未分配控制器。**控制器在稍后分配。大多数时候，这是在你的路线上。从 Routes 的渲染代码中查看此代码：

```
function setupView(view, container, options) {
  var defaultView = options.into ? 'view:default' : 'view:toplevel';

  view = view || container.lookup(defaultView); // the view gets created here and init gets called

  if (!get(view, 'templateName')) {
    set(view, 'template', options.template);

    set(view, '_debugTemplateName', options.name);
  }

  set(view, 'renderedName', options.name);
  set(view, 'controller', options.controller); // controller gets assigned to view

  return view;
} 
```

如您所见，首先实例化视图，**然后将控制器分配**给它。

**为什么 Ember 会这样做？是不是错了？** 您目前的理解是，始终有一个控制器与您的视图相连。但情况并非总是如此。以 {{view}} 帮助器为例。通常你用一个 contextBinding 来设置它。所以“控制器”属性并不总是设置！

**在你的情况下你应该怎么做？** 您没有详细概述您的要求，但是使用[willInsertElement](http://emberjs.com/api/classes/Ember.View.html#event_willInsertElement) () 钩子应该没问题。这是在元素位于 DOM 之前。那应该足够早访问它，对吧？

# php - Codeigniter $this->db->order_by(' ','desc') result is not complete

> ID：15272321
> 
> 赞同：11
> 
> 时间：2013-03-07T13:20:51.927
> 
> 标签：php, codeigniter

I want to sort my database values in descending order using this query below in my model. However, it doesn't completely sort in descending order all the values in the database but when ascending is used, it works well.

```
function sort_all_courses_desc($tennant_id)
{
    $this->db->select('*');
    $this->db->where('tennant_id',$tennant_id);
    $this->db->order_by("course_name","desc");
    $this->db->from('courses');
    $query=$this->db->get();
    return $query->result();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T01:33:02.113

将 from 放在 where 之前，并将 order_by 放在最后：

```
$this->db->select('*');
$this->db->from('courses');
$this->db->where('tennant_id',$tennant_id);
$this->db->order_by("UPPER(course_name)","desc"); 
```

或尝试二进制：

```
ORDER BY BINARY course_name DESC; 
```

您应该在 codeigniter 上手动添加以进行二进制排序。

并设置“course_name”字符列。

> 如果对字符类型列使用排序，则通常以不区分大小写的方式进行排序。

课程表中的结构数据类型是什么？

如果您感到沮丧，您可以使用 PHP 放入数组并返回：

使用 natcasesort 按“自然顺序”排序：（参考：[http](http://php.net/manual/en/function.natcasesort.php) ://php.net/manual/en/function.natcasesort.php ）

您来自数据库的数组作为示例`$array_db = $result_from_db`：：

```
$final_result = natcasesort($array_db);

print_r($final_result); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-02T06:27:41.837

将该行 `$this->db->order_by("course_name","desc");` 放在查询的顶部。喜欢

```
$this->db->order_by("course_name","desc");$this->db->select('*');
$this->db->where('tennant_id',$tennant_id);
$this->db->from('courses');
$query=$this->db->get();
return $query->result(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-11T06:04:39.350

```
$this->db1->where('tennant_id', $tennant_id);
$this->db1->order_by('id', 'DESC');
return $this->db1->get('courses')->result(); 
```

# ruby-on-rails - Connecting to external database with rails

> ID：15272324
> 
> 赞同：0
> 
> 时间：2013-03-07T13:20:59.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

I need to have access to my vbulletin forum database on other server than my rails app. I created `vbulletin` entry in `database.yml`

```
vbulletin:
  adapter: mysql2
  encoding: latin2
  database: db_name
  username: username
  password: password
  host: forum.hostname.pl
  port: 3306 
```

And created simple model `vbuser.rb`

```
class Vbuser < ActiveRecord::Base
  establish_connection(:vbulletin)
  self.table_name = 'user'
end 
```

Now, I'm trying run `Vbuser.last` in console but get : `Mysql2::Error: Can't connect to MySQL server on 'forum.hostname.pl' (110)`

What can be the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:25:27.177

我能想到的两个原因-：您提供的详细信息不正确，或者主机不允许您直接连接。不要认为这是特定于 Rails 的问题。你能快速检查一下其他语言（php 等），看看你是否能够连接？你的语法对我来说似乎很好。

快速检查在 localhost 上创建一个 connect.php 文件。

在那个文件中

```
<?php
$link=mysqli_connect('host','user','pwd','database') or die("can't connect");
if ($link)
echo "Working";
mysqli_close($link);
?> 
```

你得到了什么？

# java - Where is the "Hello World" coming from in Spring MVC Samples

> ID：15272325
> 
> 赞同：3
> 
> 时间：2013-03-07T13:21:01.330
> 
> 标签：java, jquery, spring, spring-mvc

I am trying to review the code in Spring Show Case from git

[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

But I am missing something on the first page if you click on the simple link you get back "Hello World" in green.

So I looked in the JSP page and I found this code:

```
<ul>
            <li>
                <a id="simpleLink" class="textLink" href="<c:url value="/simple" />">GET /simple</a>
            </li>
            <li>
                <a id="simpleRevisited" class="textLink" href="<c:url value="/simple/revisited" />">GET /simple/revisited</a>
            </li>
        </ul> 
```

Where does the call to the contoller but I dont see how the JSP page knows where to put the "Hello World" in green.

I then reviewed the control and I found:

```
@Controller
public class SimpleController {

    @RequestMapping("/simple")
    public @ResponseBody String simple() {
        return "Hello world!";
    }

} 
```

Which sents the "Hello World" out to the JSP but how does the JSP know where to put it? I dont see any tag

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:30:14.353

看起来魔术正在[JSP 代码](https://github.com/SpringSource/spring-mvc-showcase/blob/master/src/main/webapp/WEB-INF/views/home.jsp)底部的 jQuery 中发生。这对于 Hello World 教程来说有点复杂，但这不是重点。

单击链接后，使用 AJAX 从服务器请求数据：

```
$("a.textLink").click(function(){
    var link = $(this);
    $.ajax({ url: link.attr("href"), dataType: "text", success: function(text) { MvcUtil.showSuccessResponse(text, link); }, error: function(xhr) { MvcUtil.showErrorResponse(xhr.responseText, link); }});
    return false;
}); 
```

*最终，通过 JavaScript 方法，您到达了设置响应元素并在页面上显示Hello World*消息的这段代码。

```
MvcUtil.showResponse = function(type, text, element) {
    var responseElementId = element.attr("id") + "Response";
    var responseElement = $("#" + responseElementId);
    if (responseElement.length == 0) {
        responseElement = $('<span id="' + responseElementId + '" class="' + type + '" style="display:none">' + text + '</span>').insertAfter(element);
    } else {
        responseElement.replaceWith('<span id="' + responseElementId + '" class="' + type + '" style="display:none">' + text + '</span>');
    responseElement = $("#" + responseElementId);
    }
    responseElement.fadeIn("slow");
}; 
```

# javascript - JavaScript code design

> ID：15272328
> 
> 赞同：1
> 
> 时间：2013-03-07T13:21:11.830
> 
> 标签：javascript

The question it more about the design of the code and how it could be written better. The code itself works as it should.

A little about the code itself: the function checks the object passed as the first argument and either return a string with the type of object (`array`, `date`, `xmlhttprequest`, etc.) or a Boolean when comparing an object with a string value.

The function can also iterate through an array of objects and returns a Boolean value, an array of Boolean results, or an object.

```
(function ( global ) {
  "use strict";
  Object.type = function type( testObject, testAgainst, returnType ) {
    var result, getType = function ( object ) {
      var result;
      if ( object && object.nodeType !== undefined ) {
        result = 'dom';
      }
      else if ( object === global ) {
        result = 'global';
      }
      else {
        result = ({}).toString.call( object ).match( /\s([a-zA-Z]+)/ )[1].toLowerCase();
      }
      return result;
    };

    if ( getType( testAgainst ) !== 'undefined' ) {
      if ( getType( testAgainst ) === 'string' ) {
        return getType( testObject ) === testAgainst;
      }
      else if ( getType( testAgainst ) === 'array' ) {
        if ( getType( returnType ) === 'undefined' ) {
          returnType = 'boolean';
        }
        result = {
          'boolean': function () {
            return testObject.every(function ( member, index ) {
              return getType( member ) === testAgainst[index];
            });
          },
          'array': function () {
            return testObject.map(function ( member, index ) {
              return getType( member ) === testAgainst[index];
            });
          },
          'object': function () {
            var result = {};
            testObject.forEach(function ( member, index ) {
              result[ getType( member ) ] = getType( member) === testAgainst[index];
            });
            return result;
          }
        };
        return result[ returnType ]();
      }
    }
    return getType( testObject );
  };
}( this )); 
```

Usage examples:

```
 (function () {
    var objects = [null, 0, undefined, new Date(), new XMLHttpRequest(), function () {}, {}, [], 'string'],
      matches = ['null', 'number', 'undefined', 'date', 'xmlhttprequest', 'function', 'object', 'array', 'string'],
      misses = ['array', 'number', 'string', 'date', 'xmlhttprequest', 'function', 'object', 'number', 'string'];

    console.dir({
      "objects array: ": objects,
      "matches array: ": matches,
      "misses array: ": misses,
      "Object.type( {} )": Object.type( {} ), //returns 'object'
      "Object.type( 2013, 'number' )": Object.type( 2013, 'number' ), //returns true
      "Object.type( objects, matches )": Object.type( objects, matches), //returns true
      "Object.type( objects, misses )": Object.type( objects, misses ), //returns false
      "Object.type( objects, matches, 'object' )": Object.type( objects, matches, 'object' ),
      "Object.type( objects, matches, 'array' )": Object.type( objects, matches, 'array' ), //returns Array[9] (true, true, true, true, true, true, true, true, true)
      "Object.type( objects, misses, 'object' )": Object.type( objects, misses, 'object' ),
      "Object.type( objects, misses, 'array' )": Object.type( objects, misses, 'array' ) //returns Array[9] (false, true, false, true, true, true, true, false, true)
    });
  }()); 
```

The problem with the design that mainly bugs me is that the majority of the code is inside nested `if` statements.

What design changes I could make to this code to make it ready for production?

**Edit:**
I've created a [gist](https://gist.github.com/silverstrike/5108601) where I updated the above code based on comments ([https://gist.github.com/silverstrike/5108601](https://gist.github.com/silverstrike/5108601))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:34:31.683

您应该使用*提前返回*（[没有充分的理由不使用它们](https://softwareengineering.stackexchange.com/questions/118703/where-did-the-notion-of-one-return-only-come-from)），它将大大简化您的代码并取消嵌套所有这些 if 语句。例如，`getType`变成这样：

```
function getType(object) {
    if (object && object.nodeType !== undefined)
        return 'dom';
    if (object === global)
        return 'global';
    return ({}).toString.call(object).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
} 
```

您已经在使用另[一种替代一百万个 IF 语句](https://stackoverflow.com/q/10029089/1048572)（对象文字），但您可能只选择其中一个而不是混合它们。特别是在你的情况下，你有一个要执行的函数对象，一些 if 语句会更短/更容易读/写。

# dynamics-crm-2011 - 如何确保联系人在帐户中

> ID：15272330
> 
> 赞同：1
> 
> 时间：2013-03-07T13:21:19.700
> 
> 标签：dynamics-crm-2011

我有一个自定义实体，其中包含对联系人的查找和对帐户的另一个查找。
确保帐户位于联系人的父帐户中的最佳方法是什么？

我正在考虑让用户只选择联系人查找并自动填充只读帐户查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:17:59.117

我认为你的想法很好，但如果你有很多联系人，他们可能很难选择。另一种策略是使用选择了父帐户的条件过滤查找联系人。看一些例子：

*   [http://crmconsultancy.wordpress.com/2011/05/17/filtered-lookups-in-crm-2011/](http://crmconsultancy.wordpress.com/2011/05/17/filtered-lookups-in-crm-2011/)
*   [http://crmdm.blogspot.pt/2011/05/lookup-filtering-in-crm-2011-using.html](http://crmdm.blogspot.pt/2011/05/lookup-filtering-in-crm-2011-using.html)
*   [http://www.powerobjects.com/blog/2011/02/17/microsoft-dynamics-crm-2011-filtered-lookups/](http://www.powerobjects.com/blog/2011/02/17/microsoft-dynamics-crm-2011-filtered-lookups/)

使用 Javascript，您可以警告用户首先选择帐户，或者在用户选择帐户之前禁用联系人。

# perl - join files depending on filenames

> ID：15272331
> 
> 赞同：-4
> 
> 时间：2013-03-07T13:21:20.160
> 
> 标签：perl, list, filenames

Example filenames:

```
example_12345_8943759847.csv
example_23456_9859877.csv
example_34567_92837458738.csv
example_12345_1165253.csv
example_23456_9983632652.csv
example_23456_2345.csv 
```

I need to join files that have the same middle-number, eg. *23456*.csv Thing is I don't know this middle-number so I suppose this has to be some variable? I imagine I would have to list filenames with the same middle-part-number and then output this list?

I have only Perl or sed to my disposal.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:33:24.130

这是任务的一部分（在 Perl 中）。查找共享中间部分的文件组：

```
use strict;
use warnings;

my @files = qw/
    example_12345_8943759847.csv
    example_23456_9859877.csv
    example_34567_92837458738.csv
    example_12345_1165253.csv
    example_23456_9983632652.csv
    example_23456_2345.csv
/;

my %middles;

#This creates a hash. The keys are the middle number; 
#the values are arrays of filenames that share that middle number.
foreach (@files)
{
    push @{$middles{$1}},$_ if (/[a-z]+_(\d+)_\d+\.csv/);
}

#Now process the results
foreach my $middle (keys %middles)
{
    #Get a group of filenames sharing the same middle part.
    my @files_to_join = @{$middles{$middle}};

    #Join them here...
} 
```

其余的取决于您所说的“加入”是什么意思。您可能会发现该[`Text::CSV`模块](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)有助于处理 CSV 文件。

# symfony - cap deploy 在资产步骤失败

> ID：15272334
> 
> 赞同：1
> 
> 时间：2013-03-07T13:21:25.487
> 
> 标签：symfony, deployment, capifony

我尝试使用 capifony 在我的 ubuntu 服务器上部署我的 Symfony 2 应用程序，但是当我使用它时它失败了`cap deploy`

我收到以下错误：

```
--> Installing bundle's assets..............................✘
*** [err :: mysite.com] PHP Warning:  require_once(/home/mysite.com/www/releases/20130307125604/app/bootstrap.php.cache): failed to open stream: No such file or directory in /home/mysite.com/www/releases/20130307125604/app/console on line 10
*** [err :: mysite.com] PHP Fatal error:  require_once(): Failed opening required '/home/mysite.com/www/releases/20130307125604/app/bootstrap.php.cache' (include_path='.:/usr/share/php:/usr/share/pear') in /home/mysite.com/www/releases/20130307125604/app/console on line 10
*** [deploy:update_code] rolling back
failed: "sh -c 'sh -c '\\''cd /home/mysite.com/www/releases/20130307125604 && php app/console assets:install web --env=prod'\\'''" on mysite.com 
```

这是我的 deploy.rb

```
set :application, "mysite"
set :domain,      "#{application}.com"
set :deploy_to,   "/home/#{domain}/www"

ssh_options[:user] = 'root'
set :repository,  "git@github.com:Me/mysite.git"
set :scm,         :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, or `none`

set :model_manager, "doctrine"
# Or: `propel`

role :web,        domain                         # Your HTTP server, Apache/etc
role :app,        domain                         # This may be the same as your `Web` server
role :db,         domain, :primary => true       # This is where Symfony2 migrations will run

set  :use_sudo,      false
set  :keep_releases,  3 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:23:29.620

好像你错过了这一行：

```
set :use_composer, true 
```

# php - 从 PHP 将丹麦语字符插入到 sql server

> ID：15272338
> 
> 赞同：7
> 
> 时间：2013-03-07T13:21:45.283
> 
> 标签：php, sql-server, sql-server-2008-r2

将丹麦语字符插入 sql server 到具有 nvarchar 数据类型的字段时，丹麦语字符格式错误。示例： brændstof 被转换为 brÃ¦ndstof。当它直接来自 sql server 查询窗口时，它工作正常。我尝试为该字段提供不同的排序规则（Latin1_Genaral、Danish_Greenlandic_100_CI_AI、Danish_Norwegian_CI_AI 等）有没有办法实现这一点。我正在使用[Microsoft Drivers 3.0 for PHP for SQL Server](http://www.microsoft.com/en-in/download/details.aspx?id=20098)。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:30:17.623

而不是文字 'æ'，使用它的 CHAR 等价物，看看会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:47:10.680

我现在不知道丹麦字母怎么样，但我在 SQL SERVER 中遇到了亚美尼亚语的问题。我这样解决了这个问题。

```
insert into sometable(field) values( N'myArmenianText' ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T10:25:24.490

我使用了一种解决方法，只是在插入表格之前对丹麦字符串进行了 html 编码，并且在显示时刚刚解码回来

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T13:40:42.207

就像这里的猜测一样：

我认为问题出在 PHP 部分，而不是 MySQL 部分（我读到您为该字段使用了一些专门针对丹麦语的编码）。甚至更早。曾经尝试在 HTML 页面上放置一个 'ä'（真正的字符，而不是`&auml;`）？它会转换为其他一些字符，例如您问题中的示例。所以我在这里看到了两种可能性：

*   用户输入的 URl 编码不正确
*   PHP 使用了一些不支持丹麦语字符的编码。

或者可能是 3 和 4（不太可能）：

*   字符错误地到达客户端（如果您将一些字符重新发送到服务器，我不知道是否是这种情况）
*   用户代理转换字符，从而将格式错误的字符发送到服务器（或显示错误，这意味着正确的字符在服务器上，但您无法使用浏览器查看它们）

# vba - Outlook vba 计算日期之间的文件夹项目

> ID：15272339
> 
> 赞同：2
> 
> 时间：2013-03-07T13:21:46.663
> 
> 标签：vba, count, outlook, directory

我一直在修改我最初在这个网站上找到的一些代码（fmunkert，2012），其中最初计算了一组文件夹中的项目（电子邮件）的数量。

然后生成两个消息输出（消息 1：文件夹中的电子邮件总数，消息 2：截止日期列表）。

我已经修改了模块以计算两个集合文件夹并将它们组合成两个消息中每一个的一组整体统计信息。

由于这些文件夹涵盖一整年，我想将第二条消息限制为仅显示过去 30 天的日期，因此我尝试设置我相信会检查的区域。

但是，除了大约 3 个日期显示一个随机数之外，我只得到显示 1 个项目的所有日期。

我完全修改的代码

```
Sub InboxEmails()

Dim objOutlook As Object, objnSpace As Object, objFolder As MAPIFolder, objFolder1 As MAPIFolder, objFolder2 As MAPIFolder
Dim EmailCount1 As Integer
Dim EmailCount2 As Integer
Set objOutlook = CreateObject("Outlook.Application")
Set objnSpace = objOutlook.GetNamespace("MAPI")

    ' Verify exisitence of 2013 Actioned / Updated Folder
    On Error Resume Next
    Set objFolder1 = objnSpace.Folders("test@sample.net").Folders("Inbox").Folders("Alico Metlife  Actioned / Updated").Folders("2013 (Actioned / Updated)")
    If Err.Number <> 0 Then
    Err.Clear
    MsgBox "2013 Actioned / Updated Folder Not Found."
    Exit Sub
    End If

    ' Verify exisitence of 2013 IRs Raised Folder
    On Error Resume Next
    Set objFolder2 = objnSpace.Folders("test@sample.net").Folders("Inbox").Folders("Alico MetLife IRs Raised").Folders("2013 (IRs Raised)")
    If Err.Number <> 0 Then
    Err.Clear
    MsgBox "2013 IRs Raised Folder Not Found."
    Exit Sub
    End If

'All folders are present, OK to continue.

EmailCount1 = objFolder1.Items.Count
EmailCount2 = objFolder2.Items.Count

MsgBox "Number of chargeable emails: " & EmailCount1 + EmailCount2

Dim dateStr As String
Dim myItems1 As Outlook.Items
Dim myItems2 As Outlook.Items
Dim dict As Object
Dim msg As String
Set dict = CreateObject("Scripting.Dictionary")
Set myItems1 = objFolder1.Items
Set myItems2 = objFolder2.Items
myItems.SetColumns ("SentOn")

' Determine date of each message:
For Each myItem In myItems1
    dateStr = GetDate(myItem.SentOn)
    If Not dict.Exists(dateStr) Then
        dict(dateStr) = 0
    End If

    dict(dateStr) = CLng(dict(dateStr)) + 1

Next myItem

' Determine date of each message:
For Each myItem In myItems2
    dateStr = GetDate(myItem.SentOn)
    If Not dict.Exists(dateStr) Then
        dict(dateStr) = 0
    End If

    dict(dateStr) = CLng(dict(dateStr)) + 1

Next myItem

' Output counts per day:
msg = ""
For Each o In dict.Keys
    msg = msg & o & ": " & dict(o) & " items" & vbCrLf
Next
MsgBox msg

Set objFolder = Nothing
Set objnSpace = Nothing
Set objOutlook = Nothing
End Sub 
```

尝试版本 1

```
If Not dict.Exists(dateStr >= IsDate(Now) - 30) Then 
```

尝试版本 2

```
If Not dict.Equals(dateStr >= IsDate(Now) - 30) Then 
```

尝试版本 3

```
If Not dateStr >= IsDate(Now) - 30 Then 
```

我很确定这将是我需要改变的区域，但是我无法开始工作。我很高兴知道我在哪里出错了。

编辑：我一直在做更多的研究，并且知道我在正确的轨道上，这是我最新的代码

```
Dim dateStr As Date
Dim myItems2 As Outlook.Items
Dim dict As Object
Dim msg As String
Dim lastweek As Date
Set dict = CreateObject("Scripting.Dictionary")
Set myItems2 = objFolder2.Items
myItems2.SetColumns ("SentOn")

'Determine date of each message:
For Each myItem In myItems2
dateStr = GetDate(myItem.SentOn)

lastweek = Date
If Not dict.Item(dateStr) >= ((lastweek) - 30) Then
dict.Remove myItems2.myItem
Else

dict(dateStr) = CLng(dict(dateStr)) + 1

End If

Next myItem 
```

虽然我在每一行上都使用了手表来确保它按预期传递日期，但这仍然没有转到 if 语句的 else 部分。

'dateStr' 显示项目的日期，而 '(lastweek) - 30' 显示当前日期前 30 天的日期。

有了这个在 if 语句中，我希望它转到那些日期的语句的 else 部分，其中日期在 30 天内。但是，这不会发生，我不明白为什么不发生。

参考
fmunkert (2012)，[按日期计算 Outlook 中的电子邮件](https://stackoverflow.com/questions/9189681/counting-emails-in-outlook-by-date)[在线]（访问 03/2013）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:47:59.000

好吧，我终于偶然发现了我出错的地方，只是发现我的这行代码有问题

```
If Not dateStr >= ((lastweek) - 30) Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T15:35:31.647

这似乎是放置此代码的好地方。它按日期计算收件箱项目。

```
Sub UserCount()

    ' Put your email, and start date here.
    InboxEmails "user@domain.com", "1/1/2014"

End Sub

Sub InboxEmails(strEmail As String, strStartDate)

    Dim objOutlook As Object, objnSpace As Object, objFolder As MAPIFolder, _
    objDict As Object, strDate As String

    Set objOutlook = CreateObject("Outlook.Application")
    Set objnSpace = objOutlook.GetNamespace("MAPI")
    Set objFolder = objnSpace.Folders(strEmail).Folders("Inbox")

    Set myItems = objFolder.Items
    Set dict = CreateObject("Scripting.Dictionary")

    ' Cache the SentOn column.
    myItems.SetColumns ("SentOn")

    ' Count messages by date.
    For Each myItem In myItems

        ' Only look for emails, other object types do not have a SendOn property.
        If myItem.MessageClass = "IPM.Note" Then

            ' Strip time from datetime.
            dateStr = FormatDateTime(myItem.SentOn, 2)

            ' Only find messages after startDate.
            If CDate(dateStr) > CDate(strStartDate) Then

                    If Not dict.Exists(dateStr) Then
                        dict(dateStr) = 1
                    Else
                        dict(dateStr) = CLng(dict(dateStr)) + 1
                    End If

            End If

        End If

    Next myItem

    ' Print the results to the Immediate Window (Ctrl + G).
    For Each o In dict.Keys
        Debug.Print o & vbTab & dict(o)
    Next

End Sub 
```

# android - The app crashes with ClassNotFoundException

> ID：15272341
> 
> 赞同：2
> 
> 时间：2013-03-07T13:21:52.100
> 
> 标签：android, eclipse-adt

I am facing the ClassNotFoundException while launching my application.

> java.lang.RuntimeException: Unable to instantiate application com.tsf.esharp.DataSystem: java.lang.ClassNotFoundException: com.tsf.esharp.DataSystem at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
> at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3952) at android.app.ActivityThread.access$1300(ActivityThread.java:128)
> at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1199)
> at android.os.Handler.dispatchMessage(Handler.java:99)
> at android.os.Looper.loop(Looper.java:137)
> at android.app.ActivityThread.main(ActivityThread.java:4514)
> at java.lang.reflect.Method.invokeNative(Native Method)
> at java.lang.reflect.Method.invoke(Method.java:511)
> at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
> at dalvik.system.NativeStart.main(Native Method)
> Caused by: java.lang.ClassNotFoundException: com.tsf.esharp.DataSystem at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61) at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
> at android.app.Instrumentation.newApplication(Instrumentation.java:946)
> at android.app.LoadedApk.makeApplication(LoadedApk.java:477)
> ... 11 more
> Force finishing activity com.tsf.esharp.ui.activity/.LauncherActivity

I am facing this problem once after I introduced a library project and added it to my application. Can anybody know what could be the problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:00:49.290

出于多种原因，您可以获得 ClassNotFoundException。通常是当一个库没有正确导入或者对使用哪个类存在混淆时，例如，如果您有两个名称相似的包并且每个包中都有相同的类。

因为您提到这个问题是在您导入库项目后开始的，所以我猜这个问题与您使用库的方式有关。以下是一些可以尝试的事情：

您需要确保正确添加库。将库添加到项目中有正确和错误的方法。对于正确的方法，右键单击您的项目 Properties --> Android 并在此处添加您的库。[开发人员指南](http://developer.android.com/tools/projects/projects-eclipse.html)中有更多关于如何正确执行此操作的信息。检查是否有帮助。

# php - find all javascript sources when using file_get_contents, then load them

> ID：15272344
> 
> 赞同：0
> 
> 时间：2013-03-07T13:22:06.293
> 
> 标签：php

I am trying to find out how much time it takes for url to load. For this I use `file_get_contents`:

```
$time_start = microtime(true); 
$homepage = file_get_contents('http://www.stackoverflow.com/');
$time_end = microtime(true); 
$execution_time = ($time_end - $time_start); 
```

I think this way is incorrect because it wont load any of the javascript sources. I was thinking if I could somehow scan urls source code for javascript sources, then open each javascript source and get the time it took to load, then combine each javascript source loading time with `file_get_content` loading time - I would get a *somewhat more accurate* result than I have now.

I also tried few other methods using curl, javascript, iframes but all of them had problems (unrealistic results or crashes).

Edit: I need to write a script, i know there are many tools available for this (did i mention anywhere im looking for a tool?).

Edit2: Ok, after hours of reasearch i found something that i think might help me - i need to create dom file using [http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net) , then find all javascript elements and get all src from them. I dont know why noone suggested using this earlier.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:32:21.437

好的，经过数小时的研究，我发现了一些我认为可能对我有帮助的东西——我需要使用[http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)创建 dom 文件，然后找到所有 javascript 元素并从中获取所有 src。我不知道为什么没有人建议早点使用它。

# java - 带线程的服务。延迟后如何重新启动一些线程？

> ID：15272349
> 
> 赞同：1
> 
> 时间：2013-03-07T13:22:18.293
> 
> 标签：java, android, multithreading, handler

我正在尝试使用 Handler 来执行此操作，但我的 Handler 想要是静态的，所以我不能使用`startThread`方法。

这是处理程序

```
private class ServiceHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        Integer tmp = msg.what;
        Log.d(Tag, tmp.toString());
        switch (msg.what) {
        case THREAD_SYNC_START:
            startSyncThread();
            break;
        case THREAD_SYNC_STOP:
            mSyncThread.interrupt();
            break;
        default:
            break;
        }
    }
} 
```

这是我的服务启动线程的方法

```
private void startSyncThread() {
    if (mSyncThread != null) mSyncThread.interrupt();
    mSyncThread = new SyncThread();
    mSyncThread.start();
} 
```

线程向处理程序发送消息

```
 mServiceHandler.sendEmptyMessageDelayed(THREAD_SYNC_START, 2000); 
```

我不需要任何泄漏，所以我正在寻找正确的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:09:41.790

我写了一些示例代码，您使用 AsyncTask 代替，并让它的回调确定您是否应该创建一个新的 AsyncTask。请告诉我是否错了。

测试片段：

```
public class TestFragment extends Fragment {
    private Handler mHandler;

    /*
     * Skipping most code and I will only show you the most essential.
     */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mHandler = new Handler();

        startAsyncTask(0);
    }

    private void startAsyncTask(long milisecondsToDelay) {
        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {
                TestAsyncTask testAsyncTask = new TestAsyncTask(new FragmentCallback() {

                    @Override
                    public void onTaskDone() {
                        startAsyncTask(1000);
                    }
                });

                testAsyncTask.execute();
            }
        }, milisecondsToDelay);

    }

    public interface FragmentCallback {
        public void onTaskDone();
    }
} 
```

测试异步任务：

```
public class TestAsyncTask extends AsyncTask<Void, Void, Void> {
    private boolean mShouldCreateNewAsyncTask;
    private FragmentCallback mFragmentCallback;

    public TestAsyncTask(FragmentCallback fragmentCallback) {
        mFragmentCallback = fragmentCallback;
    }

    @Override
    protected Void doInBackground(Void... params) {
        /*
         * Do your loop or whatever and when you need to restart it set
         * mShouldCreateNewAsyncTask = true and return null.
         */

        mShouldCreateNewAsyncTask = true;

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        if (mShouldCreateNewAsyncTask) {
            mFragmentCallback.onTaskDone();
        }
    }
} 
```

# c# - 为什么 WebRequest 使用无效的 URL？

> ID：15272350
> 
> 赞同：0
> 
> 时间：2013-03-07T13:22:20.007
> 
> 标签：c#, httpwebrequest

我正在尝试使用它登录到一个站点`HTTPWebRequest`，它可以工作。问题是即使我传递了错误的凭据，或者是错误的 URL，它也能正常工作。不抛出异常。

我应该怎么做才能在以下代码中出现异常？

```
try
{
    WebRequest request = WebRequest.Create("http://192.1111.1.1111");
    ViewBag.Message = request.ContentLength;
}
catch (Exception e)
{
    ViewBag.Message = "failed";
} 
```

或者还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:25:32.200

您实际上并没有提出请求，只是创建了类。为了发出请求，您需要阅读响应。您还可以通过访问请求流来发起请求。

```
//Create a new WebRequest Object to the mentioned URL.
WebRequest myWebRequest=WebRequest.Create("http://www.contoso.com");

// This will throw an exception if the request fails
WebResponse myWebResponse=myWebRequest.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:26:39.227

您没有使用此代码执行请求，您必须添加：

```
try
{
    WebRequest request = WebRequest.Create("http://192.1111.1.1111");
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    ViewBag.Message = response.ContentLength;
}
catch (WebException e)
{
    ViewBag.Message = "failed";
} 
```

之后，除此之外，您可以检查[状态代码](http://en.wikipedia.org/wiki/HTTP_code)（401 Unauthorized 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:26:54.563

您需要实际提出请求，而不仅仅是创建类。

您可以通过以下方式获得响应：

`HttpWebResponse response = (HttpWebResponse)request.GetResponse();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:27:14.157

您提供的代码示例只是初始化请求对象。您提供给请求的参数被认为是有效的，因此不会引发异常。

当您进行连接尝试时，可能会引发错误。

有关哪些异常以及何时引发的更多信息，请参阅[MSDN 文档。`WebRequest.Create()`](http://msdn.microsoft.com/en-us/library/bw00b1dc.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T19:20:36.403

谢谢大家...我研究了您的答案，是的，它起作用了...我可以使用一些有效凭据登录Facebook...太好了！！！:) 下面是我的最终代码：-

```
 CookieCollection cookies = new CookieCollection();
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(@"https://www.facebook.com");
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(cookies);
        //Get the response from the server and save the cookies from the first request..
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        cookies = response.Cookies;

        string getUrl = "https://www.facebook.com/login.php?login_attempt=1";
        string postData = String.Format("email={0}&pass={1}", "", "");
        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl);
        getRequest.CookieContainer = new CookieContainer();
        getRequest.CookieContainer.Add(cookies); //recover cookies First request
        getRequest.Method = WebRequestMethods.Http.Post;
        getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        getRequest.AllowWriteStreamBuffering = true;
        getRequest.ProtocolVersion = HttpVersion.Version11;
        getRequest.AllowAutoRedirect = true;
        getRequest.ContentType = "application/x-www-form-urlencoded";

        byte[] byteArray = Encoding.ASCII.GetBytes(postData);
        getRequest.ContentLength = byteArray.Length;
        Stream newStream = getRequest.GetRequestStream(); //open connection
        newStream.Write(byteArray, 0, byteArray.Length); // Send the data.
        newStream.Close();

        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
        {
            string sourceCode = sr.ReadToEnd();
            ViewBag.Message = sourceCode;

        } 
```

当然，除了 httpwebrequest 和 httpwebresponse 之外，代码中还有很多其他的东西......
1）您必须运行两次 httpwebrequest 才能首先获取 cookie 集合，然后使用相同的 cookiecollection 实际登录因为 facebook 在登录前设置了某些 cookie它需要在登录时获取...
2）（这是我之前的问题的答案，即如何检查 URL 是否正常工作）所以你要做的是获取字符串中的页面内容（在本例中为 sourceCode）n 然后只需搜索你认为的特定字符串可能出现在结果页面中......就像在这种情况下，如果我成功登录，我可能会被重定向到 FB 上用户的主页。并且该页面可能包含用户名或页面标题之类的内容是“Facebook”...... n 等等......这样我们如何检查带有或不带凭据的 URL 是否成功......

就是这样......这个简单的事情花了我差不多三天......！荒谬的！

# silverstripe - 包括主题目录之外的导航菜单

> ID：15272354
> 
> 赞同：2
> 
> 时间：2013-03-07T13:22:27.530
> 
> 标签：silverstripe

我正在使用这个画廊。

[http://www.silverstriperesources.com/modules/silverstripe-3-gallery-plugin-module/](http://www.silverstriperesources.com/modules/silverstripe-3-gallery-plugin-module/)

我需要包含一个导航菜单文件，它位于`themes/simple/templates/includes`.

我怎样才能做到这一点？问题是 ss3Gallery 文件夹（在根目录中），并且分别`GalleryPage.ss`不在`themes/simple`.

因此，GalleryPage.ss 中的这段代码 `<% include NavigationPage %>`将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:21:34.637

如果 SilverStripe 3 适用于 SilverStripe 2.x 等主题，您应该能够将**/ss3Gallery/templates**文件夹复制到**/themes/simple_ss3Gallery/templates**。这些新文件将覆盖扩展目录中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:57:58.343

您是否尝试过附加`?flush=all`到您的网址？

如果我没记错的话（至少在 SS 2.x 中），SilverStripe 尝试查找的顺序包括：

1.  mysite/模板/包括/
2.  主题/你的主题/模板/包括/
3.  你的模块/模板/包括/

因此，您始终可以覆盖包含（或布局）。

# .net - WCF 服务共享存储

> ID：15272358
> 
> 赞同：2
> 
> 时间：2013-03-07T13:22:37.743
> 
> 标签：.net, wcf

我有 2 种方法的简单 WCF 服务：写入、读取。第一种方法将简单数据存储在某个存储中，另一种方法将通过键读取这些数据。

在调用 write 方法后，数据应该可以立即读取。此外，数据应存储短时间（可配置，如 10 分钟 TTL）。

为不同用户存储这些数据的最佳解决方案是什么？

System.Runtime.Caching/memcached/mongodb 之类的东西？

**UPD。有什么建议吗？不理想但很好？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:28:26.550

您有以下选择：

**1\. System.Runtime.Caching**

优点：

*   内置，实施成本低
*   有过期机制

缺点：

*   并发问题，您的密钥需要是唯一的
*   恶意用户可能会在简单密钥的情况下检索其他用户的数据
*   wcf服务主机重启后数据会丢失

**2\. [WCF 会议](http://msdn.microsoft.com/en-us/library/ms733040.aspx)**

优点：

*   简单访问缓存数据，同一个服务实例用于处理用户请求。
*   没有并发问题，用户被会话隔离。

缺点：

*   内存开销，为每个会话创建的单个服务实例
*   使用会话开始/结束限制工作流 [OperationContract(IsInitiating=true, IsTerminating=true)]
*   wcf服务主机重启后数据会丢失

**3\. [ASP.NET 会话状态](http://blogs.msdn.com/b/wenlong/archive/2010/02/21/using-asp-net-sessions-from-wcf.aspx)**

优点：

*   具有持久性机制的内置会话（重启时数据不会丢失，请参见 sessionState mode="SQLServer"）。
*   没有并发问题，用户被会话隔离。

缺点：

*   仅在兼容模式下工作，混合了两种技术。
*   需要 sql 服务器

**4\. 自实现存储，从文件系统到sql server/mongodb**

优点：

*   重启时数据不丢失
*   可能具有基于作业的内部数据过期机制。

缺点：

*   部署/配置/支持成本
*   手动实施
*   手动用户隔离/并发/安全处理

根据您评论中的答案，您有：多线程环境，即使在检索到数据后也必须保留数据（我假设直到过期时间用完），并且数据大小很小，每个项目几 kb；您将存储数百个项目，并且即使在服务重新启动后数据也需要保留（同样，直到过期）。

现在取决于 - 如果生产级系统可能需要容错、负载平衡和扩展 - 我会选择 sql server，即使这意味着更高的开发成本。

如果您需要为测试/演示目的提供快速而肮脏的解决方案 - 使用内存缓存（当然，在这种情况下，您将不得不放弃 -persist after restart- 要求）。

另一个快速的解决方案是将数据存储在临时文件中，其中 key 是文件名。这将在重新启动之间保留数据，但在安全性和并发性方面会有同样的问题。

# git - 将外部仓库导入 Git 的最佳方式

> ID：15272365
> 
> 赞同：0
> 
> 时间：2013-03-07T13:23:06.157
> 
> 标签：git, svn

在我当前的项目中，我们正在使用通过 SVN 管理的第 3 方库，我想将其添加到本地 github 以进行内部管理（跨版本跟踪外部更新，以及对库的内部修改）。在 SVN 中，我使用 svn import 和“[供应商分支](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html)”策略完成了这项工作。

我在 git 中尝试了类似的方法：创建一个 repo，将其克隆到本地，svn 将库导出到本地克隆，提交和推送。除了推，一切都很好。由于大型二进制文件（图形、Tarballs，甚至一些针对各种平台的已编译 DLL/SO/DYLIB），总 repo 约为 1.7G。是的，我知道这些文件不应该在 Repo 中，但是这个开发人员感觉不是这样，现在我一直在处理它。我知道二进制文件不是 git 的强项（就像其他所有源代码控制系统一样），但必须有办法做到这一点。现在，git-push 还没有完成（它消耗了大量的 CPU 和网络带宽大约 30 分钟，然后在接下来的 10 小时内处于空闲状态）。

如何使用 Git 管理这样的供应商存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:30:18.947

获取 SVN 存储库的最佳方法是使用`git svn`子命令。首先做一个`git svn clone`（这可能需要*很长时间*，因为它必须向 SVN 询问 repo 的每个完整版本并在`git`本地构建一个存储库），并使其与`git svn rebase`. 您可以使用这样的存储库做什么有严格的限制，请仔细阅读文档。对于随意使用它很好，如果小心，甚至可以使用`git svn`.

# html - 分组和定位列表项 (li)

> ID：15272368
> 
> 赞同：1
> 
> 时间：2013-03-07T13:23:18.013
> 
> 标签：html, css

可以说我有以下列表：

```
<ul>
<li>item1</li>
<li>item2</li>
<li>item3</li>

<li>item4</li>
<li>item5</li>
<li>item6</li>

<li>item7</li>
<li>item8</li>
</ul> 
```

我需要它在网页上这样显示：

```
item1    item2    item3
item4    item5    item6
item7    item8 
```

我将如何做到这一点？使用 CSS 是否足够容易，还是有一些神奇的 PHP 技巧？

我收到了一些答案，但它们似乎都基于我的解决方案，但它需要 870px 并按原样订购，而且我正在使用引导程序。反应灵敏，没有桌子等等..

任何帮助非常感谢谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:29:54.327

Woudn`t使用css样式如下就足够了吗？

```
ul{
    width: 870px;
}
li{
    width: 33.33%;
    float: left;
} 
```

使用 870px 是因为作者在问题中声明了该值。这也可以是任何其他值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:32:59.407

尝试设置无序列表的宽度

```
<style>
ul{
  width: 30em;//<<<
}

ul li{
  float: left;
  width: 10em;
}
</style>
<ul>
    <li>item1</li>
    <li>item2</li>
    <li>item3</li>
    <li>item4</li>
    <li>item5</li>
    <li>item6</li>
    <li>item7</li>
    <li>item8</li>
</ul> 
```

在行动：http: [//jsfiddle.net/zsLUa/](http://jsfiddle.net/zsLUa/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:28:46.047

如果您只需要连续显示 3 个项目，那么 css`:nth-child`会有所帮助：

```
li:nth-child(3n-1) {
   clear: both;
} 
```

**注意：IE8及更低版本不支持**

这里有一些 javascript/jQuery 用于 IE8 和 IE7 支持：

```
if (document.all && !document.querySelector || document.all && document.querySelector && !document.addEventListener) {
   $("li").each(function (index) {
      if (index % 4 === 0)
         $(this).css('clear', 'both');
   });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:25:58.477

这真的是一个 CSS 的东西。阅读：[http](http://alistapart.com/article/css-floats-101) ://alistapart.com/article/css-floats-101 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:26:58.643

看看这个页面

[http://d.alistapart.com/multicolumnlists/example1.html](http://d.alistapart.com/multicolumnlists/example1.html)

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T13:54:53.727

另一种解决方案将与列一起使用。

```
ul{
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:3;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T13:28:35.727

考虑使用没有边框的 html 表格。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-07T13:31:15.833

这个 CSS 对我有用。调整宽度以满足您的需求。

```
 ul
  {
    width: 500px;
  }

  li
  {
      display:inline-block;
      width: 160px;
  } 
```

[链接到现场演示](http://scratchpad.io/B4tcnz3Yo5)。

# python - 带有过滤的 SQLAlchemy 连接实际上并不过滤

> ID：15272373
> 
> 赞同：1
> 
> 时间：2013-03-07T13:23:32.020
> 
> 标签：python, database-design, orm, sqlalchemy, flask

问题出在主题的标题中。所以这里是细节。

我正在使用 Flask-SQLAlchemy 和 PostgreSQL，我的数据库架构是这样的：

```
class Settings(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    key = db.Column(db.String(), unique=True)

    lang = db.relationship('Lang', order_by='Lang.id')

    def __init__(self, key, lang):
        self.key = key
        self.lang = lang

    def __repr__(self):
        return '<Settings %r, %r>' % (self.key, self.lang)

class Lang(db.Model):
    __tablename__ = 'settings_lang'
    id = db.Column(db.Integer, primary_key=True)
    lang = db.Column(db.String(2))
    value = db.Column(db.Text())

    parent_id = db.Column(db.Integer, db.ForeignKey('settings.id'))

    def __init__(self, lang, value):
        self.lang = lang
        self.value = value

    def __repr__(self):
        return '<Lang %r, %r>' % (self.lang, self.value) 
```

我使用这样的查询：

```
for data in db.session.query(Settings).join(Lang).filter(Lang.lang.contains('en')).all():
    print data 
```

并期望它只返回“en”语言的设置。但相反，我得到了所有的语言。

可能是什么问题以及如何处理？

UPD：SQL 输出

```
SELECT settings.id AS settings_id, settings.key AS settings_key 
FROM settings JOIN settings_lang ON settings.id = settings_lang.parent_id 
WHERE settings_lang.lang LIKE '%%' || %(lang_1)s || '%%'
{'lang_1': 'en'}

SELECT settings_lang.id AS settings_lang_id, settings_lang.lang AS settings_lang_lang, 
       settings_lang.value AS settings_lang_value,
       settings_lang.parent_id AS  settings_lang_parent_id 
FROM settings_lang 
WHERE %(param_1)s = settings_lang.parent_id ORDER BY settings_lang.id
{'param_1': 1} 
```

来自 settings_lang 的示例行：

```
        id parent_id 语言值
        1 1 "zh" "研究"
        2 1 "ru" "НПП"
```

# java - 360 度的正弦输出非零

> ID：15272377
> 
> 赞同：0
> 
> 时间：2013-03-07T13:23:42.080
> 
> 标签：java, floating-point

我有这个java代码来计算sin（360）：

```
if(re.equals(" sin "))
{
    try{
        String next=data.get(i+1);
        v1 = Double.parseDouble(next);
        double degreess = v1;
        double radianss = Math.toRadians(degreess);

        BigDecimal bDecimal1 = new BigDecimal(
            Math.sin(radianss), MathContext.DECIMAL32);

        re=""+bDecimal1;
        //re=""+Math.sin(Math.toRadians(Double.valueOf(next)));
        i++;
    }
    catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我希望`sin(360)`应该正好是 0。

但我的结果是非零：`-0.0000000000000002449294`。为什么这不是零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:30:37.347

在处理浮点值时，您应该使用`abs(sin360 - 0) < delta`(其中 delta 非常小，如 0.0000001) 而不是`sin360 == 0`. 这是浮点内部表示问题。 [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:38:54.440

你总是可以使用十进制格式：

```
DecimalFormat format = new DecimalFormat();
format.setMaximumFractionDigits(2);
System.out.println(format.format(bDecimal1)); 
```

# jquery - 滑动切换下一个元素

> ID：15272381
> 
> 赞同：2
> 
> 时间：2013-03-07T13:23:46.890
> 
> 标签：jquery, html, slidetoggle

我想要 5 个`<p>`标签，当点击时，`<div>`在下面显示一个。我可以在我命名每个`<p>`不同的地方这样做，`<div>`但这会导致很多 jQuery。

所以，目前我有：

```
<p class="flip">Example</p>
<div class="panel">
  <p>Example Panel</p>
</div><!--End panel-->

<p class="flip">Example</p>
<div class="panel">
  <p>Example Panel</p>
</div><!--End panel-->

<p class="flip">Example</p>
<div class="panel">
  <p>Example Panel</p>
</div><!--End panel--> 
```

我目前拥有的 jQuery 是：

```
$(document).ready(function() {
  $('.flip').click(function() {
    $('.panel').slideToggle('slow');
  });
}); 
```

这显然是`.panels`一次切换。澄清一下，我希望第一个`.flip`切换第一个`.panel.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:26:10.867

只需要做一些简单的 DOM 遍历来选择`<div class="panel">`相对于被点击的正确元素`<p class="flip">`：

```
$('.flip').click(function(e) {
    $(this).next('div.panel').slideToggle('slow');
}); 
```

在`click`事件处理函数内部，`this`是`<p>`被点击的元素。如果它是 a并且它具有 class ，则调用`.next('div.panel')`将选择 DOM 中的下一个元素。`<div>``panel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T21:59:52.077

我有下一个问题......我想当我点击 img 时`.act`将其一一隐藏

我找到了解决方案，但`noact`我想找到解决方案`.act`

这是我的代码：

```
$(document).ready(function(){
    $('.noact').show();
    $('.act').show();
    $('.noact').click(function(){
        var x = $(this).next('.act') ;
        x.slideToggle(1000);
    });
    $('.act').click(function(){
        $('.noact').slideToggle(1000);
    });
}); 
```

# c - 如何在 Ubuntu 11.10 上使用 C 代码在 CD/DVD 媒体上剩余空间？

> ID：15272382
> 
> 赞同：1
> 
> 时间：2013-03-07T13:23:47.580
> 
> 标签：c

我们使用 libhal API 来了解 CD/DVD 类型，检查可用空间，如果空间足够，我们使用 growisofs 命令将数据写入媒体。使用 Ubuntu 10.10 它曾经可以工作。但是在 Ubuntu 11.10 中，libhal API 崩溃了。我看到 libhal 已被弃用。

如果有的话，你能告诉我替代图书馆吗？我检查了libudev，但无法弄清楚如何在媒体上获得可用空间。有没有办法获得可用空间？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:01:02.000

`libhal`已被[DeviceKit 取代](http://www.freedesktop.org/wiki/Software/DeviceKit)。

# java - 从 Jinternal Frame 刷新 JFrame

> ID：15272388
> 
> 赞同：0
> 
> 时间：2013-03-07T13:24:26.560
> 
> 标签：java, swing, refresh

你好朋友我有一个扩展 JFrame 和 JInternalFrames 的摇摆应用程序。我需要从 JInternalFrame 中的 ActionEvent 刷新 MainFrame。我的主机（伪）

```
 public class MainFrame extends JFrame{
    .................

    }
public void Refresh(){
    invalidate();
    validate();
    } 
```

我的 JInternalFrame(Pseud0)

```
public class EndOfTerm extends JInternalFrame implements ActionListener{

public void actionPerformed(ActionEvent ae){

.........
new MainFrame().Refresh();

}

} 
```

我在 ActionEvent 之后得到两帧，一帧没有组件，第二帧带有似乎重叠的组件。请帮忙。＃初学者＃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:35:18.843

您必须将 MainFrame 保存在 InternalFrame 中。

```
public class EndOfTerm extends JInternalFrame implements ActionListener{

    private MainFram mainFrame;

    public EndOfTerm(MainFrame mainFrame) {
        this.mainFrame = mainFrame;
    }

    public void actionPerformed(ActionEvent ae){

        .........
        mainFrame.Refresh();

    }

} 
```

创建 InternalFrame 时，您必须传递 MainFrame。

```
new InternalFrame(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:36:27.107

我认为您也可以在 JInternalFrame 中调用 getParent(this) 来获取对封闭 JFrame 的引用。

# java - 为什么这段 Java 代码比它下面的 Objective-C 代码运行得更快？

> ID：15272398
> 
> 赞同：1
> 
> 时间：2013-03-07T13:25:13.123
> 
> 标签：java, objective-c, c, arrays

“C 快，Java 慢”，对吧？

我比较了 Video2Brain 的 Objectiv-C 3.0 教程中的时间表示例，用于**a)**  Eclipse/Java 和**b)** MacBook Pro Quadcore 上的 XCode/Objectiv-C。结果绝对让我吃惊。Java 比 Objective-C 实现快 3 倍。Java：0.718 秒，而 Objective-C：2.416 秒。

**问题**：我想念什么？这怎么解释？谢谢！

**一）Java代码：**

```
public static void main(String[] args) {

int timesTable[][] = new int[10][10];
long beginTime = System.currentTimeMillis();

// 10 000 000 x
for (int count = 0; count < 10000000; count++) {
   for (int row = 0; row < 10; row++) {
      for (int col = 0; col < 10; col++) {
         timesTable[row][col] = (row +1) * (col +1);
      }
   }
 }
 long endTime = System.currentTimeMillis();
 System.out.println("Time elapsed = " + (endTime - beginTime) + "ms");
 } 
```

**b) Objective-C 代码**

```
int main(int argc, char* argv[]) {
int timesTable[10][10];

CFAbsoluteTime beginTime = CFAbsoluteTimeGetCurrent();

 // 10 000 000 x
for (int count = 0; count < 10000000; count++) {
  for (int row = 0; row < 10; row++) {
    for (int col = 0; col < 10; col++) {
       timesTable[row][col] = (row +1) * (col +1);
    }
  }
}
 CFAbsoluteTime endTime = CFAbsoluteTimeGetCurrent();
 NSLog(@"Time elapsed = %f", endTime - beginTime);
} 
```

**更新**

@nhahtdh 编译器选项：编译器：Apple LLVM 编译器 4.2

@jlordo：当我更改为 timesTable[row][column] = (row +1) * (column +1) * count 时，我得到相同的结果

@uchuugaka：是的，我同意它与 Java 相比基本上是 C。我两次都进行了五次测试。系统已重新启动。没有其他应用程序在运行。

@Anoop Vaidya：是的，最新版本，我得到相同的时间，LLVM GCC 4.2 或 Apple LLVM 编译器 4.2 没有区别

**更新2**

@justin：谢谢，问题解决了。构建设置 -> 优化级别

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T13:33:49.423

你的“基准”是有缺陷的。C 优化器（用于 ObjC 测试）应该意识到可以删除整个循环。速度比较应该在启用优化的情况下进行（例如`-O3`）。在启用优化的情况下运行测试时，上述程序经过的时间为 0.0 秒（是的，我测试并确认了这一点）。

必须设计一个更好的基准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T13:27:06.453

这很可能是一个不准确的基准。

读这个：

[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

# javascript - 数据表 - 无法使用 tabletools 将新添加的行导出到 CSV 文件

> ID：15272399
> 
> 赞同：1
> 
> 时间：2013-03-07T13:25:15.080
> 
> 标签：javascript, jquery, csv, datatable

我有一个数据表，我会根据一些操作继续向其追加行。现在我还有一个 csv 导出按钮，可以将表格导出为 CSV。这就是我初始化表格的方式

```
mytable = $("#serviceTable").dataTable({
"bPaginate": false, 
"sDom": 'T<"clear">lfrtip',
"oTableTools": {
"sSwfPath": contextRoot+"/js/copy_csv_xls_pdf.swf",
"aButtons": [
 {
 "sExtends":    "csv",
 "sButtonText": "Export To CSV",
 "sFileName": "Operations.csv"
 }
]
},
}); 
```

我最初在表中有两行，我继续使用`fnOpen`.

现在，当我将表格导出为 CSV 时，只有原始的两行被导出，而不是表格的最新内容？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:40:20.707

您的 eventListener 仅在实例化时抓取页面上的元素，您需要等到准备好将其移动到 CSV 然后附加侦听器。

# clojure - Clojure 向量作为函数参数

> ID：15272403
> 
> 赞同：2
> 
> 时间：2013-03-07T13:25:19.383
> 
> 标签：clojure

由于对 clojure 完全没有经验，并且自大学以来没有任何函数式编程实践，我试图解释一些示例代码以找出 clojure 语法。

我首先编写了几个版本的斐波那契 ( [https://gist.github.com/pcalcao/ea4176719d778ea3ab9e](https://gist.github.com/pcalcao/ea4176719d778ea3ab9e) )，但我仍然不能说我完全理解更复杂的形式。

例如，这个：

```
(defn fib_map [n]
  (last (take (+ n 1)
    (map first (iterate (fn [[a b]] [b (+ a b)]) [0 1]))))) 
```

我正在努力真正理解这段代码的最里面的部分：

```
fn [[a b]] [b (+ a b)] 
```

现在，根据我的理解，我们正在创建一个匿名函数，它接收一个参数，一个具有两个值的向量（这是解构，对吗？），并返回另一个向量。

现在，我们这样做的原因是什么，而不是：

```
fn [a b] [b (+ a b)] 
```

这些是等价的吗？或者我们只是让我们的匿名函数接收一个参数作为“噱头”来使用`iterate`？

对不起，如果这很明显，但就像我说的，类似 Lisp 的语言还不是我的强项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T13:42:17.717

你已经自己弄清楚了。

表单的功能`(fn [[a b]] ...)`是使用解构。它需要一个参数，该参数应该是支持 clojure`nth`功能的向量或其他类型的对象。使用解构，它将前两个值“拉”出向量，并将它们分配给局部变量`a`和`b`.

函数的形式`(fn [a b] ...)`是两个参数的函数。两者不等价。

您必须使用`(fn [[a b]] ...)`表单的原因`iterate`是它`iterate`仅适用于单参数函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:34:01.510

这是因为 iterate 只需要两个参数，即一个函数和一个参数。[参看。文档](http://clojuredocs.org/clojure_core/clojure.core/iterate)

# c++ - C++11优化作为回调传递的空函数

> ID：15272404
> 
> 赞同：4
> 
> 时间：2013-03-07T13:25:27.150
> 
> 标签：c++, templates, c++11, lambda, callback

我有一个函数模板：

```
template <class ReportFunc>
void func (ReportFunc report_func)
{
    for (/* ... */)
    {
         do_something (a, b);
         report_func (a, b, c);
         do_something_else (b, c);
    }
} 
```

有时需要在没有任何 ReportFunc 的情况下调用 func()，即循环只调用 do_something() 和 do_something_else() 而没有别的。如果我编写了一个不带 ReportFunc 参数的 f() 重载，我将不得不复制 f() 的实现代码，只需删除调用 report_func() 的行。

我有几个这样的函数——有时我想用 ReportFunc 调用它们，有时没有它。所以我想避免所有的代码重复。如果我传递一个空的 lambda 或 void 或类似的东西，它是否应该让 C++11 编译器生成一个不调用任何 report_func() 的 f() 实例？它是否与简单地删除调用 report_func() 的行一样快，甚至一个空的 lambda 也会有一些编译器未优化的开销？（在我的具体情况下，我使用 GCC）

另外：如果一个空的 lambda 确实这样做了，并且我将函数 f() 的返回类型更改为 ReportFunc，即它返回 report_func 参数，那么将返回的值存储在变量中并调用它是否仍然安全？（即使它是一个空的 lambda？所以理论上可以调用它，它只是意味着什么都没有发生）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:50:41.503

只需传递一个空函子。

只要您打开了优化，编译器就会实例化模板，内联对仿函数的（空）调用，因此什么也不做。它应该优化到什么都没有，不要费心元编程来尝试删除调用。

我不会发誓 G++ 会以同样的方式优化“什么都不做”的 lambda，但它应该这样做，因为类型是已知的，并且它的函数调用运算符是内联的并且已知是空的。

使用 lambda 没有固有的开销，它只是用 an 声明对象类型`operator()`并创建该类型的临时对象的语法糖。编译器前端需要做很多工作才能完成所有这些工作，但是一旦类型存在，优化器就应该将其视为与执行相同操作的用户定义结构完全相同。出于这个原因，返回它也是安全的，它只是一个对象类型的实例，就像一个用户定义的函数对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:32:44.547

只要您的 lambda 不通过引用捕获任何局部变量，就可以安全地返回它并稍后调用（对于空 lambda，它只是一个没有成员变量的可调用对象，因此可以安全地复制和返回）。

至于调用消除，由您的编译器决定 lambda 什么都不做并删除调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:36:52.800

您可以尝试这种方法，它实现简单，没有代码重复，并且减轻了在每个调用点传递空 lambda 的痛苦：

```
struct EmptyParam
{
  void operator()(int a, int b, int c){}
};

template <class ReportFunc>
void func (ReportFunc report_func)
{
  int a = 0, b = 0, c = 0;
  for (/* ... */)
  {
    do_something (a, b);
    report_func (a, b, c);
    do_something_else (b, c);
  }
}

void func()
{
  func<EmptyParam>(EmptyParam());
}

int _tmain(int argc, _TCHAR* argv[])
{
  func([](int,int,int){});
  func();
    return 0;
} 
```

编辑：为了完整起见，下面是完全避免调用 report_func 的版本。对于您的特定情况，它并没有比我提出的第一个解决方案更优化，只是另一种做事方式。就个人而言，我会采用上述解决方案：

```
struct EmptyParam{};

template <class ReportFunc>
struct CallReportFunc
{
  static void Call(const ReportFunc & report_func, int a, int b, int c)
  {
    report_func (a, b, c);
  }
};

template <>
struct CallReportFunc<EmptyParam>
{
  static void Call(const EmptyParam &/*report_func*/, int /*a*/, int /*b*/, int /*c*/)
  {
    // do nothing
  }
};

template <class ReportFunc>
void func (ReportFunc report_func)
{
  int a =0,b =0,c=0;
  for (;true;)
  {
    CallReportFunc<ReportFunc>::Call(report_func, a, b, c);
  }
}

void func()
{
  func<EmptyParam>(EmptyParam());
}

int _tmain(int argc, _TCHAR* argv[])
{
  func([](int,int,int){});
  func();
    return 0;
} 
```

# c# - Microsoft.Reporting.WebForms.ReportViewer 控件在 ToolBar 内添加自定义控件

> ID：15272410
> 
> 赞同：7
> 
> 时间：2013-03-07T13:25:34.833
> 
> 标签：c#, asp.net, inheritance, webforms, reportviewer

有什么方法可以在 Microsoft.Reporting.WebForms.ReportViewer 控件中添加我的自定义控件。
我正在开发 ASP.NET Web 应用程序，我想在 reportviewer 的工具栏中添加我的自定义控件。

阅读这个[blogspot](http://devgig.blogspot.com/2009/05/extend-reportviewer-toolbar.html)看起来这在 WinForms 中是可能的。

因此，我开始编写我自己的继承 ReportViewer 的 RerpotViewerClass 并在开始时堆叠起来。看起来我不能覆盖 WebForms 上的 OnControlAdded 方法？
然后我使用 OnLoad() 或任何其他方法？

```
 public class ReportViewerToolbarExtension : Microsoft.Reporting.WebForms.ReportViewer
    {
        protected override void OnControlAdded(ControlEventArgs e)
        {

                base.OnControlAdded(e);

        }        
    } 
```

引发错误

```
'Microsoft.Reporting.WebForms.ReportViewer' does not contain a definition for 'OnControlAdded' 
```

“ControlEventArgs”对我来说也是痛苦的一部分吗？

当我尝试实现 SetToolStripItems(Control c)

我不能使用 ToolStripItemCollection 也工具条，因为它们属于命名空间 System.Windows.Forms。
我应该引用 WinForms 还是 Web 命名空间中有模拟控件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T15:57:33.250

遗憾的是，无法自定义 Web 报表查看器工具栏。通过查看反汇编代码可以看到使用的 ToolbarControl 是自定义的，它是一个内部密封类，您只能隐藏或显示工具栏。

但是，您可以隐藏工具栏并创建自己的工具栏，以实现与现有工具栏和您自己的控件相同的功能。

这是微软建议的路线。

> 如果您想要不同的工具栏实现，您可以创建自定义工具栏来替换默认工具栏。

这可以在以下位置找到：http: [//msdn.microsoft.com/en-us/library/ms251670.aspx](http://msdn.microsoft.com/en-us/library/ms251670.aspx)

我要做的是反汇编代码并将其重新实现为具有所有子类的公共类，从我的第一眼看来，这些子类似乎没有什么太复杂或难以做的事情。

**也可以通过使用jquery**之类的工具或仅**DOM** api编辑 DOM 来通过前端添加它。下面的 Web 开发人员帖子演示了如何做到这一点。*请*记住，如果您希望将服务器端控件添加到工具栏中，则需要确保您不会使视图状态无效并且它们可以正常工作。

有关类似问题，请参阅 asp.net 论坛上托管的以下帖子。

*   [通过向其中添加 WebControls 自定义报表查看器工具栏](http://forums.asp.net/t/1563850.aspx/1)

有用的拆卸工具。

*   [ILSpy](http://ilspy.net/)（免费）
*   [Reflector.Net](http://www.red-gate.com/products/dotnet-development/reflector/)（商业）

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:29:14.077

![在此处输入图像描述](../Images/458f7cc7565e9b49cef795e9b098f614.png)

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
    <asp:ScriptManager runat="server" EnablePartialRendering="false">
    </asp:ScriptManager>
    <rsweb:ReportViewer ID="ReportViewer1" runat="server" Width="830px" Font-Names="Verdana" Font-Size="8pt" InteractiveDeviceInfos="(Коллекция)" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
        <LocalReport ReportPath="Report.rdlc">
        </LocalReport>
    </rsweb:ReportViewer>
    <div id="container" class=" " style="display: inline-block; font-family: Verdana; font-size: 8pt; vertical-align: top;">
        <table cellpadding="0" cellspacing="0" style="display: inline;">
            <tbody>
                <tr>
                    <td height="28px">
                        <asp:DropDownList runat="server" ID="ComboBox1" OnSelectedIndexChanged="ComboBox1_SelectedIndexChanged" AutoPostBack="True">
                            <asp:ListItem>Option 1</asp:ListItem>
                            <asp:ListItem>Option 2</asp:ListItem>
                            <asp:ListItem>Option 3</asp:ListItem>
                        </asp:DropDownList>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $($('#ReportViewer1_fixedTable').find('td[colspan=3] div[id^="ReportViewer1"]')[1])
                    .find('div')
                    .first()
                    .append($('#container').detach());
        });
    </script>
    </form>
</body>
</html> 
```

**默认.aspx.cs**

```
using System;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void ComboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Label1.Text = ComboBox1.SelectedItem.Text;
    }
} 
```

当您使用 ExtJS 或 Ext.Net 时，请将脚本块替换为：

```
<script type="text/javascript">
    Ext.onReady(function () {
        Ext.get(Ext.query('#ReportViewer1 td[colspan=3] div[id^="ReportViewer1"]')[1]).last().appendChild(Ext.get(Ext.query('#container')));
    });
</script> 
```

# angularjs - 如何以角度测试事件？

> ID：15272414
> 
> 赞同：66
> 
> 时间：2013-03-07T13:25:39.243
> 
> 标签：angularjs, unit-testing, angularjs-directive, jasmine, dom-events

我需要测试事件是否正确发出或广播，并手动触发事件。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-07T22:22:34.153

如果您只需要对事件触发和捕获进行一些测试，我就是这样做的。为了确保某个事件被触发（`$emit`-ed 或`$broadcast`-ed），间谍是要走的路。您需要引用将调用`$emit`or的范围`$broadcast`，然后执行以下操作：

```
spyOn(scope, "$emit")
//run code to test
expect(scope.$emit).toHaveBeenCalledWith("MY_EVENT_ID", other, possible, args); 
```

如果您不需要或不想担心与 一起传递的参数`$emit`，您可以在`$on`上放置一个`$rootScope`并设置一个标志以知道事件已发出。像这样的东西：

```
var eventEmitted = false;
$rootScope.$on("MY_EVENT_ID", function() {
   eventEmitted = true;
});
//run code to test
expect(eventEmitted).toBe(true); 
```

对于在捕获事件时运行的测试功能 ( `$on`)，它更容易一些。只需`$rootScope`从`inject`函数中获取一个，然后发送所需的事件。

```
$rootScope.$broadcast("EVENT_TO_TEST", other, possible, args);
//expects for event here 
```

现在，我想这个事件处理将在指令或控制器（或两者）中发生。关于设置指令测试，请参阅[https://github.com/vojtajina/ng-directive-testing](https://github.com/vojtajina/ng-directive-testing)。有关设置控制器测试，请参阅[https://github.com/angular/angular-phonecat/blob/master/test/unit/controllersSpec.js#L27](https://github.com/angular/angular-phonecat/blob/master/test/unit/controllersSpec.js#L27)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T20:21:12.820

以下是 Angular JS 中 $broadcast 事件应遵循的步骤

在注入时初始化 rootScope 和范围存根，如下所示：

```
var rootScope;
var scopeStub = beforeEach(function() {
    inject(function($rootScope, _$controller_) {
        rootScope = $rootScope;
        scopeStub = $rootScope.$new();
        $controller = _$controller_;
    });
}); 
```

使用 rootScope 创建控制器后引发事件，如下所示：

```
rootScope.$broadcast('eventName', parameter1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-30T11:10:24.740

我们将这个语法用于 A1

```
=========== Controller ========
    var vm = this;
    $scope.$on('myEvent', function(event, data){
        console.log('event number', data.id);
    });
============ Test =============
 it('should throw myEvent', function() {
    var data = {};
    $scope.$broadcast('myEvent', {id:1});
    $scope.$broadcast('myEvent', {id:2});
    $scope.$broadcast('myEvent', {id:3});
});

============ Output ============
Chrome LOG: '--------------------------------------------'
Chrome LOG: 'event number', 1
Chrome LOG: 'event number', 2
Chrome LOG: 'event number', 3 
```

# python - python json转储

> ID：15272421
> 
> 赞同：28
> 
> 时间：2013-03-07T13:26:03.503
> 
> 标签：python

我有以下字符串，需要将其转换为没有 u'' 的列表：

```
my_str = "[{u'name': u'squats', u'wrs': [[u'99', 8]], u'id': 2}]" 
```

我可以通过使用摆脱“

```
import ast
str_w_quotes = ast.literal_eval(my_str) 
```

然后我做：

```
import json
json.dumps(str_w_quotes) 
```

并得到

```
[{\"id\": 2, \"name\": \"squats\", \"wrs\": [[\"55\", 9]]}] 
```

有没有办法摆脱反斜杠？目标是：

```
[{"id": 2, "name": "squats", "wrs": [["55", 9]]}] 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-07-17T09:42:13.203

这有效，但似乎不太优雅

```
import json
json.dumps(json.JSONDecoder().decode(str_w_quotes)) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-01T21:56:44.833

json.dumps 认为它`"`​​是字符串的一部分，而不是 json 格式的一部分。

```
import json
json.dumps(json.load(str_w_quotes)) 
```

应该给你：

```
 [{"id": 2, "name": "squats", "wrs": [["55", 9]]}] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-04-05T02:25:06.743

您不会将字符串转储为 JSON，而是将字符串加载为 JSON。

```
import json
json.loads(str_w_quotes) 
```

您的字符串已经是 JSON 格式。您不想再次将其转储为 JSON。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-07T13:32:17.740

```
>>> "[{\"id\": 2, \"name\": \"squats\", \"wrs\": [[\"55\", 9]]}]".replace('\\"',"\"")
'[{"id": 2, "name": "squats", "wrs": [["55", 9]]}]' 
```

请注意，您可以在原始字符串上执行此操作

```
>>> "[{u'name': u'squats', u'wrs': [[u'99', 8]], u'id': 2}]".replace("u\'","\'")
"[{'name': 'squats', 'wrs': [['99', 8]], 'id': 2}]" 
```

# plugins - azure media services - 如何保护我的视频 URL 不被用户下载？

> ID：15272431
> 
> 赞同：1
> 
> 时间：2013-03-07T13:26:41.457
> 
> 标签：plugins, azure, authorization, media

我们正在使用 Windows Media Server 2003 和 2008 为我的一个项目提供视频。

**在其中启用了授权 URL 插件**- 这样我可以通过形成哈希码（使用 IP 等）来生成动态安全 URL。使 URL 不能被他人绕过或使用。

现在我打算切换到 Windows Azure 媒体服务，我可以**在 Azure 中为我的 URL 配置授权插件或任何此类安全性**吗？

因为我不希望用户访问或窃取我的视频。

此致，

Prasanth.k

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:45:37.873

不可以，不能将任何标准 Windows Media Server 插件与 Azure 媒体服务一起使用。但是，如果您确实查看文档，您会看到 Azure 媒体服务中默认保护所有媒体：

*   [如何：通过下载交付资产（渐进式下载）](http://www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/media-services-dotnet/#download-asset)
*   [如何：通过流式传输资产（流畅的流式传输左右）](http://www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/media-services-dotnet/#stream-asset)

如果仔细阅读并遵循所有参考文档，您将看到所有操作的第一步是创建`AccessPolicy`. 例如：

```
IAccessPolicy accessPolicy = _context.AccessPolicies.Create("File Download Policy", TimeSpan.FromDays(30), AccessPermissions.Read); 
```

因此，除非您真的想要，否则您通常会`can't`真正提供对资产的普通/原始/完整/无限访问。换句话说 - 媒体服务中的内容默认受到保护。

# python - 如何找到 python facebook graph api connection_name？

> ID：15272433
> 
> 赞同：0
> 
> 时间：2013-03-07T13:26:54.467
> 
> 标签：python, facebook-graph-api

我正在使用 python facebook graph api，在获得我的 access_token 后，我执行以下操作：

```
graph = facebook.GraphAPI(response['access_token'])
user = graph.get_object("me") 
```

然后我试着打电话：

```
graph.get_connections(self, id, connection_name, **args) 
```

但我不知道在哪里可以找到 connection_name 并且在库示例中，我只能找到用于获取您的朋友姓名列表的“朋友”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T15:29:31.740

这取决于要访问的**参考。**例如对于**Page**，请查看以下 URL 中的“ **Edges ”表：** [https ://developers.facebook.com/docs/graph-api/reference/page/](https://developers.facebook.com/docs/graph-api/reference/page/)

# c# - 在 C# 中构建交互式图表

> ID：15272439
> 
> 赞同：-6
> 
> 时间：2013-03-07T13:27:03.783
> 
> 标签：c#, visual-studio-2012, charts

我正在尝试构建一个交互式图表，用户可以选择并标记图表中的各个数据点。我在 C# windows 窗体中使用 Visual Studio 2012。我是编程新手，希望得到任何帮助/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:38:32.240

您可以在这里使用 mschart 控件是链接[http://archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

# android - 选择什么“android：inputType”？

> ID：15272446
> 
> 赞同：1
> 
> 时间：2013-03-07T13:27:35.747
> 
> 标签：android, android-edittext

我只需要输入以下字符`0-9`和`_`

EditText 中选择什么“android: inputType”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:14:50.023

就这样做`XML`

```
android:digits="0123456789_" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:31:58.317

尝试将此添加到您的`EditText`

```
EditText text = findViewById(R.id.your_edit_text); /* Find your EditText here. */
text.setKeyListener(DigitsKeyListener.getInstance("0123456789_")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:10:06.230

如果您只想输入数字，请选择此项`android:digits="0123456789_"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:27:09.223

好的。试试下面的代码

```
 InputFilter[] Textfilters = new InputFilter[1];
    Textfilters[0] = new InputFilter(){
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        // TODO Auto-generated method stub
        if (end > start) {

            char[] acceptedChars = new char[]{'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '_'};

            for (int index = start; index < end; index++) {
                if (!new String(acceptedChars).contains(String.valueOf(source.charAt(index)))) {
                return "";
                  }
                }
             }
                return null;
        }

    };
 editxt.setFilters(Textfilters); 
```

# pdf-generation - com界面中的'Let'是什么意思？

> ID：15272448
> 
> 赞同：1
> 
> 时间：2013-03-07T13:27:39.220
> 
> 标签：pdf-generation, com-interface

这可能是一个非常愚蠢的问题 - 我是 com-interface 的新手。我无法通过谷歌搜索找到任何信息（“让”这个词太常见了）。

我正在尝试通过 Jacob-library 调用 PDFCreator COM 接口来自动创建 PDF。

我正在阅读[PDFCreator 网站](http://www.pdfforge.org/content/clspdfcreator)上的 API ，并查看：

```
Public Property Let cOptionProfile(ByVal ProfileName As String, ByVal PropertyName As String, ByVal value As Variant)
Public Property Get cOptions() As clsPDFCreatorOptions
Public Property Set cOptions(ByVal Options1 As clsPDFCreatorOptions) 
```

“让”是什么意思？这些只是拼写错误，应该是“设置”的意思吗？

谢谢你的帮助。

# c# - 字符串数组到字符串转换所需的 Linq 语法

> ID：15272449
> 
> 赞同：1
> 
> 时间：2013-03-07T13:27:42.283
> 
> 标签：c#, linq, c#-4.0

我有来自特定文件夹的数组中选定文件的列表。

```
String[] allfiles = System.IO.Directory.GetFiles(Target, "*.*", System.IO.SearchOption.AllDirectories); 
```

我需要将所有这些文件转换为字符串变量，并在 LINQ 的帮助下每行附加“\n”字符。我可以在循环的帮助下像下面那样做，但我在 LINQ 语法中需要。

```
String strFileName = string.Empty;

for ( int i = 0; i < allfiles.Length ; i++)
  strFileName = strFileName + "\n" + allfiles[1] ; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:31:14.730

首先，我会[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383571.aspx)改用，所以你不需要等到所有文件都被读取。然后你可以使用[`string.Join(Environment.NewLine, allFileNames)`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)：

```
IEnumerable<string> allFileNames = Directory.EnumerateFiles(Target, "*.*", System.IO.SearchOption.AllDirectories);
string strFileNames  = string.Join(Environment.NewLine, allFileNames); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T13:29:52.360

很容易

```
String.Join("\n",allFiles) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T13:33:30.827

您不需要 Linq 来执行此操作，您可以使用`String.Join`Jamiec 的回答中说明的方法。

现在，如果你真的想用 Linq 来做，你可以使用`Aggregate`：

```
string strFileName = allfiles.Aggregate("", (acc, file) => acc + "\n" + file); 
```

或者更好的是，使用`StringBuilder`：

```
string strFileName = allfiles.Aggregate(
                                  new StringBuilder(),
                                  (acc, file) => acc.AppendLine(file),
                                  acc => acc.ToString()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T13:33:56.143

如果**需要**使用 LINQ：

```
var result = allFiles.Aggregate(new StringBuilder(),
                                (sb, s) => sb.AppendLine(s),
                                sb => sb.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:31:13.690

你不需要 linq 。只需使用简单的 string.Join() 方法。

```
string.Join("\n",allfiles); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-07T13:30:13.170

您不需要 Linq 来执行此操作，您可以改用 string.Join() 方法。

```
String strFileName = string.Join("\n", allfiles); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-07T13:30:51.003

以下应该工作

```
String.Join(delimiter,stringArray); 
```

# javascript - 使用 javascript 从 text 和 textarea 字段内容制作标签

> ID：15272451
> 
> 赞同：0
> 
> 时间：2013-03-07T13:27:48.750
> 
> 标签：javascript, text, tags, textarea, auto-update

有没有办法从文本字段、textarea 字段和一些自定义文本中选择内容，结合所有内容并使用该内容自动更新 textarea 字段，但单词用逗号分隔，如下所示：

*   内容文本字段：`Samsung tv`;
*   上下文文本区域字段：`Led Smart tv`;
*   自定义文本：`check the price`;

结果：一个 textarea 字段将自动更新：

> 三星，电视，LED，智能，电视，检查，价格？

我有这段代码可以将内容从文本更新到文本区域，但我不知道如何在每个单词后面加上逗号：

```
<script type="text/javascript">
            function update(elem) { 
                document.getElementById('textareaDescription').value = " check price for " + elem.value ;  
            }
        </script>
Text: <input type="text" onchange="update(this)">
        <br>
        Textarea auto update : <textarea name="" id="textareaDescription" cols="30" rows="10"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:35:21.227

变量 1 + "," + 变量 2 + "," + 变量。这就是你想要弄清楚的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:39:00.713

在你的更新功能中试试这个：

```
// replace
var myVal = elem.value
var regex = new RegExp(' ', 'g');
myVal = myVal.replace(regex,", ");
document.getElementById('textareaDescription').value = " check price for " + myVal ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:39:04.690

您必须修改更新功能，如下所示

```
 function update(elem) { 
          var tosplit = "check price for " + elem.value ;
           //Get another field value, replace anotherfieldid with your actual field
           //You can add any number of fields like this. 
            var anotherfield =  document.getElementById('anotherfieldid').value 
            tosplit =  tosplit+anotherfield; 
          var text =tosplit.split(" ");
          document.getElementById('textareaDescription').value = text ;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:04:10.960

虽然您已经接受了答案，但我想建议这个替代方案：

```
function updateValue(els, output){
    // creates an empty array
    var textArray = [];

    /* iterates through the `els` array and if the value is not
       an empty string, splits the value at the white-spaces
       and pushes the array of values to the `textArray` */
    for (var i=0,len=els.length; i<len; i++){
        if (els[i].value !== ''){
            textArray.push(els[i].value.split(/\s/));
        }
    }

    /* makes the value of the `output` (textarea) equal to the 
       comma-separated string of words from the inputs, and
       adds a full-stop/period to the end of the 'sentence' */
    output.value = textArray.join(',') + '.';
}

var inputs = document.getElementsByTagName('input'),
    output = document.getElementById('result'),
    els = [];

// makes an array from the `inputs` nodeList 
for (var i = 0, len = inputs.length; i<len; i++) {
    els.push(inputs[i]);
}

// assigns the function to call
for (var i = 0, len = els.length; i<len; i++) {
    els[i].onkeyup = function(e){
        updateValue(els, result);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XwBmQ/)。

* * *

**编辑**以解决 OP 留下的问题（在下面的评论中）：

> 在`var inputs = document.getElementsByTagName('input')`我不能通过标签名而不是标签名来获取元素`id`？

当然可以。对于如何收集要采取行动的相关元素，您有多种选择；不过，在示例中，我只会将这些元素放入`els`变量中；因为那已经是传递给函数的那个​​了（但可以根据自己的代码进行调整）。

首先，使用`document.getElementById()`：

```
var els = [document.getElementById('one'),document.getElementById('two')]; 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/XwBmQ/6/)（注意删除了第一个`for`循环，该循环用于将相关节点推送到`els`数组中）。

其次，您可以使用一个数组来包含`id`您想要操作的那些元素：

```
/* not every browser has access to `indexOf()` for arrays, so an
   alternative is defined */

function inArray(needle,haystack) {
    // use native version if possible:
    if ([].indexOf !== undefined){
        return haystack.indexOf(needle);
    }
    // otherwise use custom approach:
    else {
        for (var i=0,len=haystack.length; i<len; i++){
            if (needle == haystack[i]){
                return i;
            }
        }
        return -1;
    }
}

var inputs = document.getElementsByTagName('input'),
    output = document.getElementById('result'),
    // array of the `id`s of the elements you want to use:
    elementIdsToUse = ['one','two'],
    els = [];

for (var i = 0, len = inputs.length; i<len; i++) {
    // if the `inputs[i]` node's `id` is in the array of `id`s...
    if (inArray(inputs[i].id,elementIdsToUse) > -1){
        // push that node to the `els` array:
        els.push(inputs[i]);
    }
}

for (var i = 0, len = els.length; i<len; i++) {
    els[i].onkeyup = function(e){
        updateValue(els, result);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XwBmQ/8/)。

第三，您当然可以使用类名（同样，使用`indexOf()`）：

```
for (var i = 0, len = inputs.length; i<len; i++) {
    if (inputs[i].className.indexOf('useThis') > -1){
        els.push(inputs[i]);
    }
}

for (var i = 0, len = els.length; i<len; i++) {
    els[i].onkeyup = function(e){
        updateValue(els, result);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XwBmQ/2/)。

最后，在改变主意之后；一种扩展`Array`原型的`Array.indexOf()`方法，如果当前浏览器中不存在该方法，则提供该方法：

```
Array.prototype.indexOf = Array.prototype.indexOf || function(needle) {
    for (var i = 0, len = this.length; i<len; i++){
        if (this[i] == needle){
            return i;
        }
    }
    return -1;
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XwBmQ/10/)。

它允许`Array.indexOf()`直接调用，而不是（如上所述）必须在不支持的浏览器中不必要地使用*两个函数调用（并且**每次都*测试它的存在）来成功使用*一个*函数。

# java - Android多活动访问一个java类

> ID：15272457
> 
> 赞同：1
> 
> 时间：2013-03-07T13:28:17.480
> 
> 标签：java, android

我是android开发的新手，感谢任何帮助。我有多个必须访问一个 java 类的 android 活动。此类具有同步的 getter 和 setter，但我在跨活动创建此类的单个实例时遇到问题。有什么方法可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:30:40.810

您需要的是[“单例”](http://en.wikipedia.org/wiki/Singleton_pattern)模式：

```
public final class Singleton {
    private final static Singleton ourInstance = new Singleton();
    public static Singleton getInstance() {
        return ourInstance;
    }

    // Contructor is private, so it won't be possible 
    // to create instance of this class from outside of it.
    private Singleton() {
    }
} 
```

现在在您的孩子班级中，只需使用：

```
Singleton.getInstance() 
```

访问此类的一个单一对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:30:27.420

您可以使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)设计模式。这是在java中实现它的一种方法

```
public class Singleton 
{
  private static Singleton uniqInstance;

  private Singleton() 
  {
  }

  public static synchronized Singleton getInstance() 
  {
    if (uniqInstance == null) {
      uniqInstance = new Singleton();
    }
  return uniqInstance;
  } 
 // other useful methods here
} 
```

# java - 如何查找远程 JNDI

> ID：15272467
> 
> 赞同：2
> 
> 时间：2013-03-07T13:28:47.010
> 
> 标签：java, jms, jndi, ibm-mq, mq

是否可以在 IBM MQ 中查找远程 JNDI。我的场景是我在机器 A 上安装了 MQ，带有 JNDI 资源（MQ Explorer 中的 JMS 管理对象）。现在，如果我想从独立的 JAVA 类通过 JMS 连接到 MQ，我可以从“file://JNDI_FACTORY”中查找. 所有的例子都只提到了这一点。但是，如果我想要机器 B 上的独立 JAVA 类，是否有可能？即机器 B 有 JAVA 类，它必须连接到远程 JNDI（在机器 A 上）并查找连接工厂。我可以在机器 B 的 java 类中对属性 ContextProviderUrl 使用“A:port 的主机名”之类的东西来从机器 A 访问远程对象吗？

还建议我进行远程 JNDI 查找。

请帮忙！

谢谢查克里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:47:07.220

为简单起见，所有 MQ JMS 示例都使用文件 JNDI 来演示初始上下文的使用。您可以修改示例以查找 LDAP 服务器以获取连接工厂和目标信息。

首先在 MQExplorer 中，您需要选择`LDAP Server`将连接工厂和目标信息保存到 LDAP 服务器的选项。然后在您的应用程序中，您需要有如下所示的代码：

```
 String initialContextUrl = "ldap://myhost:991/c=uk,o=ACME"
  String contextFactory = "com.sun.jndi.ldap.LdapCtxFactory";
  Hashtable environment = new Hashtable();
  environment.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);
  environment.put(Context.PROVIDER_URL, initialContextUrl);
  Context context = new InitialDirContext(environment); 
```

请参阅信息中心主题[*使用 JNDI 检索 JMS 应用程序中的受管对象以获取*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm24350_.htm)详细信息和其他代码示例。

# joomla - 从 1.5 升级到 2.5 后的 Joomla 问题

> ID：15272472
> 
> 赞同：1
> 
> 时间：2013-03-07T13:29:13.420
> 
> 标签：joomla, joomla2.5, joomla1.5

我刚刚使用 jupgrade 将 Joomla 网站从 1.5 升级到 2.5.6。它在某种程度上起作用，但仅在每个页面上显示部分内容。

我怀疑问题在于较新的 Joomla 不再使用旧站点确实使用的部分。不幸的是，我不知道如何将其转换为新的仅限类别系统。

任何人都可以建议它是如何完成的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:37:38.730

据我所知，JUpgrade 应该将内容作为一个整体来处理 如果它没有完全工作，请尝试再次运行升级，因为 JUpgrade 已经知道有故障（前提是您有旧 Joomla 站点的备份）但在此之前这样做，请确保您使用的是 Joomla 1.5.26 而不是更早的版本。

如果失败，您应该联系 JUpgrade 的开发人员，或者尝试使用商业迁移工具，例如[SPupgrade](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/15609)。

希望这可以帮助

# android - 单击时Android微调器崩溃

> ID：15272473
> 
> 赞同：1
> 
> 时间：2013-03-07T13:29:13.867
> 
> 标签：android, spinner, android-arrayadapter, android-spinner

我的页面上有一个`spinner`，使用`arrayAdapter`. 当我启动我的应用程序时，一切正常，但是当我单击 时`spinner`，应用程序崩溃并且`logcat`我没有引用我的代码中的任何一行。这是引用微调器的代码区域：

```
profiles = (Spinner) findViewById(R.id.spinner1);

    SetSql getprofiles = new SetSql(this);
    getprofiles.open();
    spinnerArray = getprofiles.getProfiles();
    if(spinnerArray[0]==null){
        spinnerArray = new String[1];
        spinnerArray[0] = "No Profiles, Please Create One";
    }
    getprofiles.close();

    ArrayAdapter<String> array = new ArrayAdapter<String>(UserActivity.this, android.R.layout.simple_spinner_item, spinnerArray);
    array.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    profiles.setAdapter(array);

    //I am using the post method to make sure that this spinner wont run when the activity is started
    profiles.post(new Runnable(){
        public void run(){
            profiles.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> ListView, View arg1,
                        int pos, long arg3) {
                    // TODO Auto-generated method stub
                        if(!profiles.getItemAtPosition(pos).toString().equals("No Profiles, Please Create One")){
                            String selected = profiles.getItemAtPosition(pos).toString();
                            Intent intent = new Intent(UserActivity.this, DPAActivity.class);
                            intent.putExtra("username", selected);
                            startActivity(intent);
                        }
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            });
        }

    }); 
```

更多日志：

```
03-07 16:25:45.740: E/AndroidRuntime(6929): FATAL EXCEPTION: main
03-07 16:25:45.740: E/AndroidRuntime(6929): java.lang.NullPointerException
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:332)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:328)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.AbsListView.obtainView(AbsListView.java:1409)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.ListView.onMeasure(ListView.java:1127)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.View.measure(View.java:8313)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.View.measure(View.java:8313)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.View.measure(View.java:8313)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.View.measure(View.java:8313)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.View.measure(View.java:8313)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.os.Looper.loop(Looper.java:130)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at java.lang.reflect.Method.invoke(Method.java:507)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-07 16:25:45.740: E/AndroidRuntime(6929):     at dalvik.system.NativeStart.main(Native Method) 
```

**我的 getProfiles 代码**

```
 public void createProfile(String name) {
        // TODO Auto-generated method stub
        ContentValues cv = new ContentValues();
        cv.put(KEY_USER, name);
        ourDatabase.insert(TABLE_USERS, null, cv);
    }

    public String[] getProfiles() throws SQLException{
        String[] columns = new String[]{KEY_USER};
        Cursor c = ourDatabase.query(TABLE_USERS, columns, null, null, null, null, KEY_ROWID);
        String[] result = new String[100];

        int iName = c.getColumnIndex(KEY_USER);
        int count = 0;
        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){ 
            result[count] = c.getString(iName);
            count++;
        }
        return result;
    }
} 
```

这将返回一个字符串数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:41:52.750

```
 if(arrayspinner[0]==null){
        arrayspinner = new String[1];
        arrayspinner[0] = "No Profiles, Please Create One";
    } 
```

更改您的代码并尝试

编辑：

而不是`Array`尝试使用`ArrayList`

```
List<String> arrayList=Arrays.asList(your string array); 
```

或者尝试通过获取响应的大小来初始化数组。

编辑2：

```
List<String> a= Arrays.asList(new String[]{});
        if(a.size()==0){
            a=new ArrayList<String>();
        a.add("xxx");
        a.add("bbbb");
        }
        final Spinner s=(Spinner)findViewById(R.id.spinner1);
        ArrayAdapter<String> array = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, a);
        array.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(array);
        s.post(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                s.setOnItemSelectedListener(new OnItemSelectedListener() {

                    @Override
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }
                });
            }
        }); 
```

尝试了与您的代码相同的示例，它可以工作。

编辑 3：

```
public String[] getProfiles() throws SQLException{
        String[] columns = new String[]{KEY_USER};
        Cursor c = ourDatabase.query(TABLE_USERS, columns, null, null, null, null, KEY_ROWID);
        String[] result;
        if(c != null && c.getCount()!=0){
        result = new String[c.getCount()];

        int iName = c.getColumnIndex(KEY_USER);
        int count = 0;
        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){ 
            result[count] = c.getString(iName);
            count++;
        }
        }else{
        result = new String[]{"No Profiles, Please Create One"};
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:35:18.110

将 if 内部条件更改 `onItemSelected` 为：

```
if(profiles.getItemAtPosition(pos).
                       toString().equals("No Profiles, Please Create One")){
   // your code here....
 } 
```

因为目前您正在使用 `ListView.getItemAtPosition`从 Spinner 获取选定项目

# eclipse - eGit 合并冲突 - 与暂存文件比较的错误内容

> ID：15272474
> 
> 赞同：2
> 
> 时间：2013-03-07T13:29:22.693
> 
> 标签：eclipse, merge, conflict, egit, mergetool

我们一直在 Eclipse 中使用 git 和 eGit（Helios 和 Juno - 这个问题在两者中都是一样的），直到我们今天早上尝试合并。

我们有一个分支**G_Claims**（我已经检查过它在本地和远程之间同步），提交最新的一组更改，将它们向上推送，然后想要将**master**上的一些最近工作合并到其中，这样我们的更改不会影响**master**，直到我们已经完成并合并它们。

所以。o) 最新更改 o) 提交（推送到远程**G_Claims** o) 合并 ->**远程/主**

有冲突。单击第一个标记的文件（标记为分阶段 - 黑白星号）执行 Team -> MergeTool 与 HEAD 比较或与工作文件比较（在这种情况下无关紧要，两者都有相同的结果）

它在左侧页面上显示当前文件，在右侧显示一个文件，该文件标有**远程/主**服务器上的最新提交（比如“我的更改”abd76f ...），但显示的内容完全不同的版本。

现在，如果我们单击一个不同的文件，该文件被标记为需要解决冲突（红色菱形），那么比较会在右侧面板中正确显示**远程/主（'我的更改'abd76f ...）版本文件。**

当您使用 MergeTool 来“解决”暂存文件时，这仅仅是一个视觉错误吗

（因为此文件的合并是自动的）

单击 MergeTool 是否期望“看到”合并更改错误？在这种情况下，我们只需要记住在合并后对（部分）暂存文件使用比较头，并且只对冲突文件使用 MergeTool？

它似乎显示了正确的信息，但也许只是右侧面板的*标签*错误-它应该在合并之前显示文件的（以前的？？）版本，但将其标记为其他内容-不是'我的改变' abd76f ......这显然不是......

# jquery - 带有 jquery 自动完成功能的 Knockoutjs 在自动完成结果中显示符号

> ID：15272484
> 
> 赞同：0
> 
> 时间：2013-03-07T13:29:49.777
> 
> 标签：jquery, autocomplete, knockout.js, symbols

我正在使用带有 jquery 自动完成功能的 knockoutjs，它工作正常，除了自动完成结果显示符号和文本。

![jQuery 自动完成](../Images/6eb6915c8994176ea0b0b66734852d43.png)

```
ko.bindingHandlers.ko_mission_autocomplete = {
    init: function (element, params) {
        var options = params().split(' ');
        var searchType = options[0];
        $(element).bind("focus", function () {
            $(element).change();
        });
        $(element).autocomplete({
            source: function (request, response) {
            var keyword = request.term;
                //return result;
                $.ajax({
                    type: "POST",
                    url: SolrUrl,
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    data: '{ "searchSource":' + searchSource + ', "searchTarget": "' + searchTarget + '", "keyword": "' + keyword + '" }',
                    success: function (data) {

                        //alert("ajax request called successfully");
                        var tempData = $.parseJSON(data.d);
                        response($.map(tempData, function (item) {
                            return {
                                label: item.Name,
                                value: item.Name,
                                id: item.ID
                            }
                        }));
                    },
                    error: function (xhr, errorType, exception) { //Triggered if an error communicating with server  
                        var errorMessage = exception || xhr.statusText; //If exception null, then default to xhr.statusText  
                        alert("There was an error : " + errorMessage);
                    },
                    complete: function (data) {                        
                    }
                });
            },
            minLength: 3,                  
            select: function (event, ui) {
                $(this).change();
                $(element).data("valueID", ui.item.id);                              
            }
        });        
    },
    update: function (element, params) {
        $(element).change();       
    }
}; 
```

当我验证 json 数据时它是正确的，但是它显示为符号。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:34:52.600

你`twitter bootstrap`有没有机会使用？这看起来可能存在 CSS 类冲突。

# c++ - C++ 中的类属性变量

> ID：15272489
> 
> 赞同：5
> 
> 时间：2013-03-07T13:29:56.683
> 
> 标签：c++, properties

我知道类属性对象的实现已经讨论过很多次了，但是我需要的与提出的各种解决方案略有不同。

我想要的是一个与变量具有相同语义的对象，但是当它的值改变时，我想执行一些操作。这意味着具有隐式 get/set 方法，实现重载运算符 = 和隐式转换运算符。

请注意，当我的意思是“类属性”时，我的意思不一定是语义`object.property`，而只是一种具有隐式 get/set 方法的方式（如 中`property-like-variable = value`）。原因是我有一些使用变量的现有代码，我想在每次变量值更改时执行一些操作而不更改现有代码（只有变量的声明应该更改）。

我用这样的最少代码获得了这个结果：

```
#include <stdio.h>

class Int
{
    int _value;

public:
    // default constructor
    Int() { printf("Int: initial value undefined\n"); }

    // assignment constructor
    Int(int value) : _value(value) { printf("Int: initial value is %d\n", _value); }

    // property get
    operator const int() const { return _value; }

    // property set
    int operator=(int value)
    { 
        _value = value;
        printf("new value is %d\n", value);
        return value;
    }

    // TODO: overload other operators if needed
}; 
```

这是一个示例用法：

```
class C
{
    Int _i;

public:
    C() : _i(2) { }

    void foo()
    {
        _i = 3;
        printf("foo(): _i = %d\n", _i);
    }
};

int main()
{
    int i;
    Int I;

    i = 1;
    I = i;
    I = I + 1;

    C c;
    c.foo();
} 
```

现在有几个问题：

1.  是否已经讨论过这一特定需求？有设计模式吗？
2.  我在这里做坏事？（从实现和设计的角度来看）
3.  这样做有一些性能方面的缺点，或者编译器能够在没有开销的情况下对其进行优化？
4.  有更好的方法来调用这个构造吗？因为这似乎不是严格意义上的“属性”（这似乎更类似于“装箱”类中的变量）。
5.  这可以用模板概括吗？我没有看到一种简单的方法来做到这一点，因为做这些事情的需要是在获取/设置值时执行自定义的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:49:35.683

广告**问题 2**：我发现您的代码存在两个一般性问题：

1.  声明中的第一个*const*限定符`operator const int()`没有意义（gcc 对此发出警告）

2.  `Int&`赋值运算符的返回类型不应该是，`int`否则它将具有与原始 int 不同的语义，并且以下 c++ 代码将无法编译：

    ```
    Int i;
    (i=2)=3; 
    ```

广告**问题 3**：如果您的 set/get 函数除了分配/返回值什么都不做，那么它们应该被完全优化。如果你打电话`printf()`，你可能会严重陷入性能问题；）。

广告**问题 5**：模板的泛化似乎很困难，包括通过模板专门化为不同类型定制它：

```
template<typename T> class observe
{
    T _value;

public:
    // default constructor
    observe() { cout << "Int: initial value undefined" << endl; }

    // assignment constructor
    observe(const T& v) : _value(v) { cout << "initial value is " << v << endl; }

    // property get
    operator T() const { return _value; }

    // property set
    observe<T>& operator=(const T& value)
    {
        _value = value;
        cout << "new value is " << _value << endl;
        return *this;
    }
};

// special behavior for the assignment of doubles
template<> observe<double>& observe<double>::operator =(const double& value)
{
    _value = value;
    cout << "new double value is " << _value << endl;
    return *this;
}

observe<double> d;
d = 1.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:47:54.257

我认为要使它更像一个属性，“设置”代码需要在里面`class C`。这个怎么样：

```
class C
{
public:
    class i_property_class {

...methods from your current Int class

    } i;

...rest of class C
} 
```

`i_property_class`如果可行，那么您`operator=`可能想尝试[为](https://stackoverflow.com/questions/3882186/trouble-with-inheritance-of-operator-in-c).

然后关于你的问题 5，使这个基类成为模板也应该起作用。

# excel - 使用 VBA 在 Excel 2010 中报告

> ID：15272490
> 
> 赞同：0
> 
> 时间：2013-03-07T13:30:01.237
> 
> 标签：excel, excel-2010, vba

请问我该怎么做！？我有一个 60 张的 excel 工作簿，所有 60 张都有相同的列标题和列数。

每张纸是一个国家的名称，行在 A 列中具有名称，在 B 中具有状态，在代码 D 中具有

我需要使用所有 60 张表格生成一份报告，这些表格按国家/地区列出所有名称，其中值 B =“XYV”，并在 D 中显示相应的值。

希望这是有道理的！

我一直在尝试在工作表中使用数据透视表，但如果我只选择所需的列（这需要永远做！）或者如果我选择整个工作表，我会得到无效的引用。

我可以在 VBA 宏中执行此操作吗？

抱歉，我是这种方式的 Excel 新手，因此我们将不胜感激……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:16:33.043

使用 VBA，这是可行的（尽管它需要整理——我已经将它包括在内以给你这个想法）：

```
Sub FindItems()

Const Thing As String = "XYV"

'remember which workbook you are on
Dim wb As Workbook
Set wb = ActiveWorkbook

'create new book for answer
Dim AnswerBook As Workbook
Set AnswerBook = Workbooks.Add

'loop over sheets in original workbook
Dim ws As Worksheet
Dim c As Range
Dim BCells As Range

For Each ws In wb.Worksheets

    'check each cell in column B
    wb.Activate
    ws.Select

    Range("B1").Select
    Set BCells = Range(ActiveCell, ActiveCell.End(xlDown))

    For Each c In BCells

        If LCase(c.Value) = LCase(Thing) Then

            'add to list
            AnswerBook.Activate
            ActiveCell.Value = ws.Name
            ActiveCell.Offset(0, 1).Value = c.Value
            ActiveCell.Offset(0, 2).Value = c.Offset(0, 2).Value

            ActiveCell.Offset(1, 0).Select

        End If
    Next c

Next ws 
```

结束子

# c++ - 如何检查连接是否丢失

> ID：15272491
> 
> 赞同：4
> 
> 时间：2013-03-07T13:30:01.607
> 
> 标签：c++, sockets, winapi, tcp, winsock2

如何检查我与服务器的连接是否丢失？（无论是客户端还是服务器端）我正在使用 TCP 连接，并且服务器接收无限客户端。服务器为每个客户端创建线程。这样我就可以为每个客户接收/发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:59:18.950

您可以考虑在套接字上使用[TCP-keepalive 选项](http://msdn.microsoft.com/en-us/library/windows/desktop/ee470551%28v=vs.85%29.aspx)作为一种选择。

但是很多 NAT 和全状态防火墙如果在一段时间内没有观察到任何活动，实际上会丢弃 TCP 连接。而且这个活动超时可能比 TCP 支持的周期性 keepalive 消息更快。出于这个原因，每 30-60 秒向您的服务器发送一条协议消息通常足以保持与 NAT 相关的“活动”连接。

我个人的看法是这样的。如果连接需要长时间运行，则客户端有责任通知服务器“我还在这里”。服务器应定期唤醒并关闭在过去 N 秒内没有任何流量的任何 TCP 连接。（其中 N 是您的应用程序的合理值）。在您的情况下，“每个客户端线程”方法意味着每个线程只需要决定远程客户端何时变得无响应。

在协议中，客户端可以每 30-60 秒向服务器发送它自己的自定义“ping”消息。服务器总是回复此消息并记录客户端仍然存在。

我正在讨论的很多内容实际上取决于您的协议、您的服务的功能以及连接预计会持续多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:36:28.623

在您的应用程序中构建一个[ping 系统](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:14:40.353

如果套接字不再连接，则`send()`返回`SOCKET_ERROR`并`WSAGetLastError()`返回`WSAENOTCONN`或其他相关错误。

如果您正在读取数据并`recv()`返回零，则对等方已执行有序关闭。

如果您正在从未连接的套接字读取，则`recv()`返回`SOCKET_ERROR`并`WSAGetLastError()`返回`WSAENOTCONN`或其他相关错误。

[WinSock 错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668.aspx)记录在 MSDN 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:15:03.270

始终保持异步或同步接收调用未完成（许多应用程序无论如何都会这样做） - 在连接丢失时，这将根据您的特定接收 API 完成失败条件。

# c++ - 使用opencv使用3通道制作直方图

> ID：15272501
> 
> 赞同：0
> 
> 时间：2013-03-07T13:30:20.627
> 
> 标签：c++, opencv, image-processing, exception-handling

我试图绘制 3 通道图像的直方图和“opencv_tut.exe 中 0x752e812f 处的未处理异常：Microsoft C++ 异常：内存位置 0x0019ef5c 处的 cv::Exception ..”它不断收到此错误。甚至无法调试它继续进入装配。

问题出在直方图中的线条绘制部分，其他的工作正常。

这是代码：

无效颜色直方图（）{

```
Mat image = imread("c:/aaa.jpg");
vector<Mat> bgr_planes;
split(image, bgr_planes);

if(!image.data){

    cout<<"No image"<<endl;

}

int histSize = 256;
float range[] = {0, 256};
const float* histRange = {range};

Mat b_hist, g_hist, r_hist;

calcHist(&bgr_planes[0], 1, 0, Mat(), b_hist, 1, &histSize, &histRange, true, false);
calcHist(&bgr_planes[1], 1, 0, Mat(), g_hist, 1, &histSize, &histRange, true, false); 
calcHist(&bgr_planes[2], 1, 0, Mat(), r_hist, 1, &histSize, &histRange, true, false); 

int hist_w = 512;
int hist_h = 400;

int bin_w = cvRound((double) hist_w/histSize);

Mat histImage(hist_h, hist_w, CV_8UC3, Scalar(0,0,0));

normalize(b_hist, b_hist, 0, histImage.rows, NORM_MINMAX, -1, Mat());
normalize(g_hist, g_hist, 0, histImage.rows, NORM_MINMAX, -1, Mat());
normalize(r_hist, r_hist, 0, histImage.rows, NORM_MINMAX, -1, Mat());

for(int i=0; i<histSize; i++){

  line( histImage, Point( bin_w*(i-1), hist_h - cvRound(b_hist.at<float>(i-1))) , Point( bin_w*(i), hist_h - cvRound(b_hist.at<float>(i))), Scalar( 255, 0, 0), 2, 8, 0  );
  line( histImage, Point( bin_w*(i-1), hist_h - cvRound(g_hist.at<float>(i-1))), Point( bin_w*(i), hist_h - cvRound(g_hist.at<float>(i))), Scalar( 0, 255, 0), 2, 8, 0  );
  line( histImage, Point( bin_w*(i-1), hist_h - cvRound(r_hist.at<float>(i-1))) , Point( bin_w*(i), hist_h - cvRound(r_hist.at<float>(i))), Scalar( 0, 0, 255), 2, 8, 0  );

}

namedWindow("Histogram", CV_WINDOW_AUTOSIZE);
imshow("Histogram", histImage); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:23:30.103

可能是一个任性的指针或超出分配内存的范围。不要假设您之前的代码是正确的；像这样的问题有时可能会更早引起，并且只会在以后出现。

无论如何，您似乎在这里修改了代码：http: [//docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)

主要区别在于您的 for 循环从 0 变为 histSize，而他们的循环从 1 变为 histSize。由于此索引用于计算循环中的数组位置，我猜这是您的问题。

# ios - iOS 图像从 NSDocumentDirectory 保存和访问图像

> ID：15272505
> 
> 赞同：-3
> 
> 时间：2013-03-07T13:30:34.340
> 
> 标签：ios

我对从 NSDocumentDirectory 访问多个图像感到非常沮丧。请参阅我在此过程中所做的步骤以及我想从您那里得到什么。

我的应用程序可以使用以下代码下载图像：

```
 // get the image from the url
  UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]];

  // Save the image file into document folder
  NSString *dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];

  // Saving JPG File
   **NSString *jpefilepath = [dir stringByAppendingPathComponent:[NSString stringWithFormat:@"%dwallpaper.jpg",arc4random()]];**
  NSData *data1 = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0f)];
                                    [data1 writeToFile:jpefilepath atomically:YES]; 
```

使用此代码，我下载所有具有唯一名称的图像。我使用 jpefilepath 直接存储在 mysql 数据库中。

现在我对如何使用示例代码直接从本地路径访问图像有疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:45:56.287

使用此方法：

```
 UIImage *testImage = [UIImage imageWithContentsOfFile:filePath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:43:45.483

加载图像：

```
UIImage *image = [UIImage imageWithContentsOfFile:jpefilepath]; 
```

加载数据：

```
NSData *data = [NSData dataWithContentsOfFile:jpefilepath]; 
```

# c++ - 在类构造函数中调用虚函数

> ID：15272508
> 
> 赞同：2
> 
> 时间：2013-03-07T13:30:46.367
> 
> 标签：c++, inheritance

在 C++ 中，我们不应该调用构造函数/析构函数虚函数。

如果我在类范围内显式调用这些函数怎么办？

本质上，我们是在说我们不想从虚拟中获利。

下面的伪代码正确吗？

```
 struct CA{ 
    CA(){ CA::foo();} // calling foo() without CA is wrong
    virtual int foo(){} 
 };

 struct CB{ 
    CB(){ CB::foo();} // calling foo() without CB is wrong
    virtual int foo(); 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:34:44.083

该调用`CB::foo()`不是动态分派的，因此没有不幸的惊喜在等待您或任何阅读此代码的人。完全没问题。实际上，也可以简单地调用`foo()`，因为在这种情况下这与标准相同，尽管您可能想为您的同事留下评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:18:24.907

```
struct CA{ 
   CA(){ CA::foo(); } // calling foo() without CA is wrong
   virtual int foo(){}
};

struct CB { 
   CB(){ CB::foo(); } // calling foo() without CB is wrong
   virtual int foo(); 
}; 
```

我看不出这两个类之间有任何明显的区别，考虑到必须在程序中定义非纯虚函数，必须在`CB::foo`某个地方定义，并且它是在类定义中定义还是无关紧要别的地方。

在这两种情况下，调用`foo()`（没有明确的限定）都是*错误*的。`foo()`使用和之间的区别在于`Type::foo()`，在第一种情况下，您使用的是动态调度，此时最终将调用函数的*最终*覆盖器*，*而在限定的情况下 ( )，额外的限定禁止动态调度。*`Type::foo`*

 *重要的是要注意*此时*。*对象*的动态类型在类型层次结构中的构造过程中发生变化。在评估基本构造函数时，动态类型是`base`，因此*最终覆盖*器只能从该类中获取。基本构造函数完成后，动态类型将更改为层次结构中的下一个类型，并且可以从这两种类型中选择最终的覆盖器，依此类推。

```
struct base {
   base() { foo() };
   virtual void foo() { std::cout << "base\n"; }
};
struct d1 : base {
   d1() : base() { foo() };
};
struct d2 : d1 {
   d2() : d1() { foo() };
   virtual void foo() { std::cout << "d2\n"; }
}; 
```

类型对象的`d2`构造将从构造`base`子对象开始，`foo()`那里的调用将被分派给最终的覆盖器，此时它只考虑`base`类型并打印`"base"`. 然后`d1`执行构造函数，调用`foo()`在此级别选择最终覆盖器，它仍然是`base::foo()`. 完成后，对`d2`构造函数进行评估。在这一点上，最终的覆盖器正在打印`d2::foo()`并`"d2"`产生：

```
base
base
d2 
```

请注意，即使我们正在创建的唯一完整对象是 type `d2`，它也暂时表现为一个`base`对象，然后作为一个`d1`对象，并且只有当`d2`构造函数开始执行时，它才开始表现为一个`d2`对象并调用`d2`. 这被许多人认为是令人困惑的。

请注意，因为每个级别的对象的*动态*类型正是正在评估的构造函数的类型，所以最终的覆盖器将始终被分派给该类型。添加额外的资格并没有太大的区别，除非在处理......

**纯虚函数**

纯虚函数可以有定义。pure 限定符意味着派生类型必须提供该虚函数的定义，也意味着在执行动态调度时永远不会调用纯虚函数（如果已定义）。在这种特殊情况下，禁用动态调度的额外限定可用于调用该特定实现：

```
struct base {
   base() { base::foo(); }  // [*]
   virtual void foo() = 0;
};
void base::foo() { std::cout << "base\n"; }
struct derived : base {
   derived() : base() { foo(); base::foo(); }
   virtual void foo() { std::cout << "derived\n"; }
}; 
```

`foo`这是对in的非限定调用格式错误的唯一情况`[*]`，因为当该构造函数被评估时`foo`是纯虚拟的并且没有*最终覆盖*器。另一方面，添加限定条件会禁用动态调度，上面的代码将编译并运行。另请注意，在`derived`构造函数中，您可以使用额外的限定来选择函数的特定定义，该定义`base::foo`可能不是此级别的最终覆盖器。上面的代码打印：

```
base
derived
base 
```*

# oracle - 如何在where子句中给出记录数

> ID：15272509
> 
> 赞同：0
> 
> 时间：2013-03-07T13:30:49.177
> 
> 标签：oracle, plsql, plsqldeveloper

我有以下代码：

```
select b_id, 
       process_date
  from (select c1.b_id,
               c1.process_date,
               row_number() over(partition by a.a_id 
                                 order by c1.process_date desc) rn
          from table_a a
               inner join 
               table_b b
                 on a.a_id = b.a_id
               inner join 
               table_c c1
                 on b.b_id = c1.b_id
       ) 
 where rn = 1; 
```

如何动态分配 rn 即 rn=count(rn) .Tried 并给出错误说不是按功能分组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:32:48.083

您不能在 where 子句中使用 count。使用 group by 和 have。

例如：

```
SELECT columnname, COUNT(*)   
FROM TableName
GROUP BY columnname
HAVING COUNT(*) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:42:12.313

您可以使用 count(*) 作为分析函数：

```
select b_id, 
       process_date
  from (select c1.b_id,
               c1.process_date,
               row_number() over(partition by a.a_id 
                                 order by c1.process_date desc) rn,
               count(*) over()                                  cn
          from table_a a
               inner join 
               table_b b
                 on a.a_id = b.a_id
               inner join 
               table_c c1
                 on b.b_id = c1.b_id
       ) 
 where rn = cn; 
```

如果您只是想获得最后一个 process_date 它足以对子查询进行排序：

```
select b_id, 
           process_date
      from (select c1.b_id,
                   c1.process_date,                   
              from table_a a
                   inner join 
                   table_b b
                     on a.a_id = b.a_id
                   inner join 
                   table_c c1
                     on b.b_id = c1.b_id
              order by c1.process_date desc
           ) 
        where rownum = 1;

 where rn = cn; 
```

# javascript - 如何在不使用 toUppercase 的情况下将字母从小写更改为大写？

> ID：15272516
> 
> 赞同：-5
> 
> 时间：2013-03-07T13:31:13.747
> 
> 标签：javascript

我想知道这是如何不使用函数的。我试过使用`String.fromCharCode`，但我想我做得不对。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:34:28.113

如果您想`a`通过`z`. Unicode 数据库中涉及到映射。

`toUpperCase`适合这项工作的工具也是如此。根据[规范](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.16)，它使用 Unicode 数据库来选择合适的大写字符。（该链接是 to`toLowerCase`因为`toUpperCase`只是说它与 做相同的事情`toLowerCase`，但为大写。）

但是，如果您只支持`a`通过的英文字母`z`，则它们由字符代码 97 到 122 表示，包括 97 到 122。`A`through`Z`由字符代码 65 到 90 表示，包括 65 到 90。所以：

```
var upperChar = String.fromCharCode(lowerChar.charCodeAt(0) - 32); 
```

会做的。但我强烈建议*不*要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:34:47.313

看看 ascii 表[ASCII](http://www.asciitable.com/index/asciifull.gif)。A = 65 ... a = 97

并且不要忘记这不是正确的方法，但如果你需要达到这个级别的编程，这就是方法。这仅适用于 ascii（英文字母）。

会有很多缺点，但这是您问题的答案:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:40:22.407

'A' 的 ASCII 值是 65，而 'a' 是 97。它们之间的差是 97 – 65 = 32 所以如果我们在 'A' 的 ASCII 值中加上 32，那么它将是 'a'，如果我们减去'a' 的 ASCII 值中的 32 将是 'A'。所有字母都是如此。一般规则：

大写字符 = 小写字符 – 32

小写字符 = 大写字符 + 32

# java - 具有下限和上限的 Apache Commons Math SimplexSolver？

> ID：15272520
> 
> 赞同：0
> 
> 时间：2013-03-07T13:31:16.553
> 
> 标签：java, matlab, linear-programming, simplex

我打算使用 Apache Commons Math 库中提供的 Simplex 方法来解决以下线性规划问题。我没有让它工作，我发现 API 文档有限。

**问题**

从向量 开始`s0`，确定`s`，解：

```
| min   f' * s
|  s
|
| s.t.  s_l <= s <= s_u 
```

其中`f`是一个向量，`s_l`分别`s_u`是 的下界和上界`s`。

我可以在 Matlab 中使用该命令轻松解决这个问题，`linprog(f, [], [], [], [], s_l, s_u, s0, options)`并希望在 Java 中做同样的事情，最好使用 Apache Commons Math。

**单纯形求解器**

我尝试使用[`SimplexSolver`](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/optim/linear/SimplexSolver.html)类似于此处解释的 Apache Commons Math：http: [//google-opensource.blogspot.se/2009/06/introducing-apache-commons-math.html](http://google-opensource.blogspot.se/2009/06/introducing-apache-commons-math.html)

但是我无法缝合来定义我的界限`s_l`，`s_u`并且我必须使用这种方法来提供`LinearConstraint`（我没有）。

你应该能够做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:49:56.330

我不确定是否有捷径，但实际上下限和上限只是 2 个线性约束。

确保您的第一个变量大于下限的第一个元素（约束 1）并且小于上限的第一个元素（约束 2）。

然后确保你的第二个变量....等等。

这可能写起来很费力，但正确写起来应该不会太难。

# mongodb - mongo的命令行身份验证失败

> ID：15272521
> 
> 赞同：54
> 
> 时间：2013-03-07T13:31:22.817
> 
> 标签：mongodb

我在 osx 上运行 mongo 2.2.2。

当我执行以下身份验证时，一切正常：

```
$ mongo
>> use admin
>> db.auth("uname", "password") 
```

日志：

```
Thu Mar  7 13:51:08 [initandlisten] connection accepted from 127.0.0.1:63474 #10 (4 connections now open)
Thu Mar  7 13:51:08 [conn10]  authenticate db: admin { authenticate: 1, nonce: "123", user: "uname", key: "456" } 
```

但是，当我尝试直接从命令行进行身份验证时：

```
$ mongo admin -u uname -p password 
```

我收到以下错误：

```
Thu Mar  7 14:25:52 [initandlisten] connection accepted from 127.0.0.1:63939 #12 (5 connections now open)
Thu Mar  7 14:25:52 [conn12]  authenticate db: admin { authenticate: 1, nonce: "789", user: "uname", key: "147" }
Thu Mar  7 14:25:52 [conn12] auth: key mismatch uname, ns:admin
Thu Mar  7 14:25:52 [conn12] end connection 127.0.0.1:63939 (4 connections now open) 
```

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-07T04:10:02.293

包含特殊字符（尤其是美元符号）的密码必须放在单引号中以保护它们免受命令外壳的影响：

```
$ mongo admin -u uname -p 'password' 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-04-04T10:49:55.467

您必须使用`--authenticationDatabase`来指示 mongodb 在哪里可以找到您创建的用户。例如：

```
mongo admin -u uname -p 'password' --authenticationDatabase admin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-29T10:35:34.270

**这是从终端访问经过身份验证的 MongoDB 数据库的方法**

```
mongo -u user_name -p "your_password" host_name/database_name 
```

**前任：**

```
mongo -u hasib -p "123456" localhost/my_db 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T12:59:45.720

您还可以使用 mongo 连接 URL 进行连接，如下所示：

```
mongo "mongodb://<user>:<password>@<host: 127.0.0.1>:<port: 27017>/<db_name>?authSource=admin" 
```

*   db_name 是可选的。
*   如果您连接到 localhost，则主机通常是 127.0.0.1。
*   端口通常是 27017。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2018-08-07T08:49:50.887

要通过命令行登录 MongoDB，请执行以下操作

```
$ mongo admin -u 'username' -p 'Password' 
```

# hadoop - 使用 hadoop 将数据读/写到 Cassandra

> ID：15272522
> 
> 赞同：0
> 
> 时间：2013-03-07T13:31:26.367
> 
> 标签：hadoop, mapreduce, cassandra

我一直在尝试将 hadoop 与 cassandra 集成。

已经运行的 wordcount 示例。

但是我需要示例代码来通过使用 hector 将 hadoop 与 cassandra 连接起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:36:24.780

查看[此演示文稿](http://www.slideshare.net/rastrick/presentation-12982302)和相关 github 站点上的代码示例。它适用于 Cassandra 1.1，但它会引导您完成每一步。

# cucumber-jvm - Cucumber.wants_to_quit 的 cucumber-jvm 等价物是什么？

> ID：15272523
> 
> 赞同：0
> 
> 时间：2013-03-07T13:31:27.443
> 
> 标签：cucumber-jvm

我正在使用 cucumber-jvm 编写测试，我希望系统在第一个失败的场景中停止运行测试。我找到了为 Cucumber Ruby 编写的示例代码，它通过 After 挂钩执行此操作。我正在寻找正确的 java 类和调用方法，这相当于在 Ruby 中设置 Cucumber.wants_to_quit = true。

这是我的示例代码：

```
@After
public void quitOnErrors(Scenario scenario) {
    if (scenario.isFailed()) {
                    // Need the correct class/method/property to call here.
        cucumber.api.junit.Cucumber.wants_to_quit = true;   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:21:05.180

我找不到使用 Cucumber-JVM 本地执行此操作的任何方法，但您始终可以这样做：

```
static boolean prevScenarioFailed = false;

@Before
public void setup() throws Exception {
    if (prevScenarioFailed) {
        throw new IllegalStateException("Previous scenario failed!");
    }
    // rest of your setup
}

@After
public void teardown(Scenario scenario) throws Exception {
    prevScenarioFailed = scenario.isFailed();
    // rest of your teardown
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T03:01:50.637

cucumber-jvm 在第一次测试失败时退出的公认答案使用

```
throw new IllegalStateException() 
```

在我的经验中不起作用。

请尝试使用 cucumber 命令行开关`-y`。

我没有找到任何硬性文档`-y`，但在[此处](https://groups.google.com/forum/#!topic/cukes/3zv3xLUABLE)提出了建议，并且在那次对话中的开发人员致力于实现它。我已经对其进行了测试，并且可以按预期工作。

我还没有找到 cucumber-jvm 版本，`Cucumber.wants_to_quit?`但也许这将涵盖您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T10:48:42.033

在步骤定义文件中创建黄瓜钩子有助于在场景失败后停止测试。这涉及创建`@Before`和`@After`方法。看看这个例子：

```
@Before
  public void setUp() {
    if (prevScenarioFailed) {
      throw new IllegalStateException("Previous scenario failed!");
    }

  }

  @After()
  public void stopExecutionAfterFailure(Scenario scenario) {
    prevScenarioFailed = scenario.isFailed();
  } 
```

# php - PDO 准备文字

> ID：15272524
> 
> 赞同：0
> 
> 时间：2013-03-07T13:31:30.143
> 
> 标签：php, mysql, pdo, prepared-statement, prepare

假设我有一个非常基本的更新查询：

```
$sql = 'UPDATE `table` SET column = :value WHERE id = :id'; 
```

我用 PDO 准备这个，我可以将“列”列设置为任何值。很好，这很好用。

我可以很容易地使用这个准备好的语句将列设置为特定值：

```
 UPDATE `table` SET column = 12 WHERE id = 123 
```

但是，如果我想运行查询怎么办：

```
 'UPDATE `table` SET column = column + 1 WHERE id = 123 
```

这可能使用相同的准备好的语句吗？我猜不是，这很遗憾，因为使用准备好的语句可能不值得，因为我不确切知道如何计算列的值。

例如 $stmt->execute(array(':value' => 'column + 1', ':id' => 123));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:36:47.107

您可以通过循环使用它：

```
$column = 12;
$params = array(':value' => $column, ':id' => 123);

for ($i = 1; $i <= 10; $i++) {
    $params[':value'] = '' . $column + $i; // string, not integer!

    $stmt->execute($params);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:22:59.933

我认为这里没有问题。
为什么您不能在需要时准备并执行以下查询？

```
UPDATE `table` SET column = column + 1 WHERE id = ? 
```

和这个

```
UPDATE `table` SET column = column - 1 WHERE id = ? 
```

什么时候需要减去？

您是否有 [不是虚构的，而是基于真实生活的] 案例可以让您解决问题吗？
很确定有一个优雅的解决方案

# python - 将大文件加载到 pandas DataFrame 时出现意外行为

> ID：15272529
> 
> 赞同：1
> 
> 时间：2013-03-07T13:31:42.347
> 
> 标签：python, pandas, large-files

我正在尝试将一个大（1.5G）文件加载到熊猫中，但遇到了一些非常奇怪的问题。当我加载文件时，一列似乎具有混合数据类型 - 一些“str”和一些“float”。例如

> > > session.visitor_gwp[2] '185511.545011'
> > > 
> > > session.visitor_gwp[8540709] 1349514214092.844

Series 本身的 dtype 是 dtype('O')。文件中列的内容是数字和字母数字数据的混合。所以我希望*所有*元素都是'str'类型。

这仅发生在某些特定的列组合中（仅提取 unix 中的相关列会生成工作文件），并且似乎取决于文件中行的顺序！

该文件有 14 列和 10M 行。

这是我正在使用的命令： sessions=pandas.read_csv('bigfile.txt', delimiter='\t')

我尝试将comment 和quotechar 设置为文件中未出现的字符，例如'~'。这没有帮助。

我可以通过明确指定 dtype 来解决这个问题，但自动类型检测的行为似乎很奇怪，因为我认为（可能是错误的）Series 对象应该表示单一类型的元素。

谢谢，马丁

熊猫。**版本**= '0.10.1' numpy。**版本**='1.7.0'

# c# - 更新按钮不起作用

> ID：15272532
> 
> 赞同：0
> 
> 时间：2013-03-07T13:31:52.763
> 
> 标签：c#, .net, database, winforms

我正在尝试通过 C# 中的 Windows 窗体按钮更新我的数据库。当我运行我将要显示的代码时，它没有显示任何错误，但它不会更改数据库或数据网格中的数据。

```
private void update_Click(object sender, EventArgs e)
{
    SqlConnection NewCon = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=E:\ASPNET\cd\cdcwk2\cddatabase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
    SqlCommand cmd = new SqlCommand("UPDATE cdstock set cd_title='" + cdtext.Text + "', artist='" + artisttext.Text + "',genre='" + genretext.Text + "', rating=" + ratingtext.Text + ", cd_discription='" + distext.Text + "' where cd_id =" + idtext.Text + ";", NewCon);
    MessageBox.Show("UPDATE cdstock  set cd_title='" + cdtext.Text + "', artist='" + artisttext.Text + "',genre='" + genretext.Text + "', rating='" + ratingtext.Text + "', cd_discription='" + distext.Text + "' where cd_id ='" + idtext.Text + "'");

    NewCon.Open();

    cmd.ExecuteNonQuery();

    NewCon.Close();
    MessageBox.Show("Record Has Now Been UPDATED!!");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:27:40.370

嗨，我找到了解决方案，现在工作正常，谢谢您的时间。解决方案如下。

```
 String NewCon = @"Data Source=.\SQLEXPRESS;AttachDbFilename=E:\ASPNET\cd\cdcwk2\cddatabase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";

         SqlConnection con = new SqlConnection(NewCon);
         SqlCommand cmd = new SqlCommand();

         cmd.CommandText = "UPDATE cdstock set cd_title='" + cdtext.Text + "', artist='" + artisttext.Text + "',genre='" + genretext.Text + "', cd_discription='" + distext.Text + "', rating=" + ratingtext.Text + " where cd_id = " + dataGridView1.CurrentRow.Cells[0].Value;
         cmd.Connection = con;
         cmd.Connection.Open();

         cmd.ExecuteNonQuery();
         cmd.Connection.Close(); 
```

cddatabaseDataSet3.GetChanges(); this.cdstockTableAdapter.Fill(this.cddatabaseDataSet3.cdstock);

```
 MessageBox.Show("Record Has Now Been UPDATED!!"); 
```

# jpa - 乐观锁和全表锁

> ID：15272535
> 
> 赞同：3
> 
> 时间：2013-03-07T13:32:10.927
> 
> 标签：jpa

我们有一个系统，我们偶尔会遇到乐观锁定异常。我们已经在代码中解决了这个问题，但现在我正在查看 JPA 2 并看到它有一个注释 (@Version) 来处理这个问题。
我们遇到的问题是多个事务在一个表上工作，并且使用全表锁这会导致乐观锁定异常，即使没有对相同的记录进行更改。

我们在 JBoss 4.2 服务器上使用休眠，数据库可以是 MySQL 或 SQL Server。

如果我们改为使用@Version，这是否会在两个数据库上强制执行行锁定，或者我们仍然可以期望看到由全表锁定引起的乐观锁定异常？

**编辑：**
我们实际看到的不是乐观锁定错误，而是死锁：

> SQLServerException：事务在锁定资源上与另一个进程死锁，并已被选为死锁牺牲品。重新运行事务。

我们在代码中处理这个问题，但我想知道@Version 在这种情况下是否有帮助。
至少在其中一种情况下，这种死锁是由表锁引起的，其中两个客户端正在处理自己的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:14:09.823

可能重复：[乐观与悲观锁定](https://stackoverflow.com/questions/129329/optimistic-vs-pessimistic-locking)

乐观锁定异常几乎总是一个有状态的并发问题。例如：两个线程加载完全相同的实体，并行更改对象然后保存。**无论**事务（表或行锁定）如何，当这种情况发生时，您都会得到一个乐观锁定异常（请参阅参考问题）。

我很震惊你得到乐观的锁定异常`@Version`，在这种情况下你可能会得到真正的[RDBMS OCC 错误](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)，但我对此表示怀疑。最有可能发生的是整个对象与行不同（因为您没有指定`@Version`），在这种情况下，对行的任何更改都会导致乐观锁定异常。请在您的问题中添加例外，所以我不必假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:57:44.610

这取决于您的 SQL 语句。每当事务无论出于何种原因未能获得所需资源的锁时，都会发生乐观锁。这可能是由于表锁或行锁造成的。没关系。

如果您正在运行需要表锁的 SQL 查询，那么您将无法使用版本字段。默认情况下，MS SQL Server 使用行锁。所以可能你有小表或缺少主键，或者 SQL Server 有其他原因在你的查询上使用表锁。

您应该调查产生表锁并尝试调整它的查询。您应该期望偶尔发生锁定并在您的应用程序中处理它。

# c++ - 哪种数据结构支持高效删除和随机访问？

> ID：15272538
> 
> 赞同：7
> 
> 时间：2013-03-07T13:32:26.923
> 
> 标签：c++, arrays, list, data-structures, random-access

我正在寻找一种数据结构，我可以在其中有效地删除项目并且还支持随机访问。

我也需要有效的插入，但由于元素的顺序并不重要，我想我可以为它可能必须存储的最大元素数量预先分配内存，然后总是将新元素放在最后，这样就不会重新分配或移动其他元素是必要的。

据我所知，链表非常适合删除，但访问其元素可能需要 O(n) 时间。另一方面，一个简单的数组（例如`vector`在 C++ 中）具有随机访问属性，但从这种结构中删除一个元素的复杂度为 O(n)。

实际上，随机访问要求比我真正需要的要强。我只需要能够随机均匀地选择结构的一个元素。显然有效的访问属性意味着我需要的操作的效率，但我不确定这两者是否等效。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:49:59.147

我相信您在问题中暗示的解决方案实际上就是您所需要的，除了一个小细节。

你建议：

> 我想我可以为它可能必须存储的最大元素数量预先分配内存，然后总是将新元素放在最后，这样就不需要重新分配或移动其他元素。

如果您确实可以建立一个合理的最大条目数，那么我建议您使用该条目数预先分配一个数组（例如，`std::array`如果在编译时已知最大值，或者使用`std::vector`其他），建立一个元素计数（到计算当前存储的元素数量），然后执行以下操作：

1.  最初您将计数设置为 0
2.  插入元素时，将其添加到末尾并增加计数
3.  删除元素时，*将其与最后一个元素交换*并减少计数
4.  对于随机访问（在您描述的意义上，即从字面上随机选择一个元素），您确定一个介于 0 和 count 之间的随机数，然后选择该元素

我更改的唯一细节是元素删除，我建议您将其实现为*带有最后一个元素的开关位置*。

可能的实现：

```
#include <vector>
#include <utility>
#include <iostream>

template <typename Elem>
class randomaccesstable
{
public:
  randomaccesstable(std::size_t initial_size)
   : data_(initial_size) , count_(0)
  { }

  randomaccesstable &push_back(const Elem &elem)
  {
    if (count_ < data_.size())
      data_[count_++] = elem;
    else {
      data_.push_back(elem);
      ++count_;
    }
    return *this;
  }

  randomaccesstable &remove(const std::size_t index)
  {
    if (index < count_)
    {
      std::swap(data_[index],data_[count_-1]);
      --count_;
    }
    return *this;
  }

  const Elem &operator[](const std::size_t index) const
  { return data_[index]; }

  Elem &operator[](const std::size_t index)
  { return data_[index]; }

  std::size_t size() const
  { return count_; }

private:
  std::vector<Elem>  data_;
  std::size_t        count_;
};

int main()
{
  randomaccesstable<int> table(10);
  table.push_back(3);
  table.push_back(12);
  table.push_back(2);

  for (std::size_t i = 0 ; i < table.size() ; ++i)
    std::cout << table[i] << ' ';
  std::cout << '\n';

  table.remove(1);   // this removes the entry for 12, swapping it for 2

  for (std::size_t i = 0 ; i < table.size() ; ++i)
    std::cout << table[i] << ' ';
  std::cout << '\n';

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:34:02.420

我建议使用[hash table](http://en.wikipedia.org/wiki/Hash_table)。在那里，您可以删除和查找具有恒定复杂性的元素。在 C++ 中，您可以使用`std::unordered_map`(C++11) 或`boost::unordered_map`(pre-C++11) 和在 java -`HashMap`中。

# node.js - Windows 7 32 位上的 Socket.io 安装失败

> ID：15272542
> 
> 赞同：10
> 
> 时间：2013-03-07T13:32:37.387
> 
> 标签：node.js, websocket, socket.io, phpwebsocket

> 我安装了node.js **v0.8.22**并尝试在Windows 7 32bit Socket.io安装socket.io连续失败。控制台日志是：

```
C:\Program Files\nodejs>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 200 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io/-/socket.io-0.9.13.tgz
npm http 200 https://registry.npmjs.org/socket.io/-/socket.io-0.9.13.tgz
npm ERR! Error: EPERM, mkdir 'C:\Program Files\nodejs\node_modules\socket.io'
npm ERR!  { [Error: EPERM, mkdir 'C:\Program Files\nodejs\node_modules\socket.io
']
npm ERR!   errno: 50,
npm ERR!   code: 'EPERM',
npm ERR!   path: 'C:\\Program Files\\nodejs\\node_modules\\socket.io',
npm ERR!   fstream_type: 'Directory',
npm ERR!   fstream_path: 'C:\\Program Files\\nodejs\\node_modules\\socket.io',
npm ERR!   fstream_class: 'DirWriter',
npm ERR!   fstream_stack:
npm ERR!    [ 'DirWriter._create (C:\\Program Files\\nodejs\\node_modules\\npm\\
node_modules\\fstream\\lib\\dir-writer.js:36:23)',
npm ERR!      'C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\mkdir
p\\index.js:37:53',
npm ERR!      'Object.oncomplete (fs.js:297:15)' ] }
npm ERR!
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd C:\Program Files\nodejs
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! path C:\Program Files\nodejs\node_modules\socket.io
npm ERR! fstream_path C:\Program Files\nodejs\node_modules\socket.io
npm ERR! fstream_type Directory
npm ERR! fstream_class DirWriter
npm ERR! code EPERM
npm ERR! errno 50
npm ERR! stack Error: EPERM, mkdir 'C:\Program Files\nodejs\node_modules\socket.
io'
npm ERR! fstream_stack DirWriter._create (C:\Program Files\nodejs\node_modules\n
pm\node_modules\fstream\lib\dir-writer.js:36:23)
npm ERR! fstream_stack C:\Program Files\nodejs\node_modules\npm\node_modules\mkd
irp\index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR! Error: EPERM, open 'C:\Program Files\nodejs\npm-debug.log'
npm ERR!  { [Error: EPERM, open 'C:\Program Files\nodejs\npm-debug.log']
npm ERR!   errno: 50,
npm ERR!   code: 'EPERM',
npm ERR!   path: 'C:\\Program Files\\nodejs\\npm-debug.log' }
npm ERR!
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd C:\Program Files\nodejs
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! path C:\Program Files\nodejs\npm-debug.log
npm ERR! code EPERM
npm ERR! errno 50
npm ERR! stack Error: EPERM, open 'C:\Program Files\nodejs\npm-debug.log'
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Program Files\nodejs\npm-debug.log
npm ERR! not ok code 0 
```

> **有什么解决方法吗？如何在 Windows 7 32 位上安装 Socket.io？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-09T16:17:44.140

当我尝试运行 npm install 并得到“npm ERR！错误：EPERM，mkdir”时，我将分享在 Windows 上对我有用的东西......

我必须手动授予写入文件夹的权限...

在你的情况下，你需要去

```
C:\Program Files\nodejs\node_modules\ 
```

使用 Windows 资源管理器，右键单击，选择“属性”并转到“安全”选项卡

您会看到很多用户...只需将权限授予您需要的用户，然后再次尝试运行 npm install...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T13:35:53.283

看起来您需要以管理员权限运行它，尝试以管理员身份运行 CMD（以管理员身份运行），然后`npm install socket.io`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-10T07:06:51.047

我使用 windows powershell（在 win7 上）而不是 vanilla 命令提示符，并且上面的错误消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-04T09:22:33.177

谢谢@Griiettner 的指点。如果您通过 gitbash 运行/执行，则授予“C:\Program Files (x86)\Git”文件夹的管理员权限。

与上面相同，使用 Windows 资源管理器，右键单击，选择“属性”并转到“安全”选项卡。

当我使用“npm config set prefix”命令更改配置（遵循此博客[http://blog.webbb.be/command-not-found-node-npm/](http://blog.webbb.be/command-not-found-node-npm/)）时，这发生/让我很震惊，但我已经把回到旧位置。使用“npm config set prefix C:/Users/[Username]/AppData/Roaming/npm”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-10T16:18:53.053

我想我会分享一个尚未发布的解决方案：确保您的节点应用程序尚未运行。我在运行 Node 应用程序时尝试删除依赖项 ( `npm uninstall mongoose --save`) 时遇到了这个问题，这显然不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-02T05:26:44.577

在我的情况下，我对 Babel 有同样的问题，通过全局安装他来解决

# sql - 在 Sql Server 2008 中显示浮点结果更具可读性

> ID：15272544
> 
> 赞同：0
> 
> 时间：2013-03-07T13:32:42.513
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这个查询：

```
select a.Nm,sum(NoInvoAb * CstPr) as 'kostnadRadLev_intäckt'
from dbo.ProdTr pt
inner join dbo.Actor a on a.CustNo = pt.CustNo
where a.CustNo > 0 and pt.TrDt like '2012%'
group by a.Nm 
```

结果的第一行：

> Cykelmagasinet AB 27865867.000000

但是，我想将浮点数的格式更改为更易于阅读的格式：27 865 867.000000 或 27.865.867,00000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:54:05.273

采用：

```
convert(varchar,cast(sum(NoInvoAb * CstPr) as money),-1) 
```

例如：

```
declare @aa int

set @aa =123123123
Select convert(varchar,cast(@aa as money),-1) as ColumnName 
```

输出：

```
123,123,123.00 
```

# java - 枚举：将字符串转换为枚举

> ID：15272556
> 
> 赞同：3
> 
> 时间：2013-03-07T13:33:14.407
> 
> 标签：java, enums

```
public enum Gender{

    m("male"), f("female");

    private final String value;

    private Gender(String option){
          value = option;
    }
} 
```

我可以知道如何将字符串“男性”转换为任何枚举吗？是的，该值与枚举不同。这行不通

```
 Gender.valueOf("male"); 
```

我正在考虑提供一个

1）用for循环解析

或者

2）静态初始化一个Map

...

我觉得第二种方式更好，因为当我初始化地图时，如果存在相同的字符串，我可以抛出运行时异常。

有什么优点和缺点，或者还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:38:47.640

我会使用地图：

```
public enum Gender {

    m("male"), f("female");

    private final String value;

    private static final Map<String, Gender> values = new HashMap<String, Gender>();
    static {
        for (Gender g : Gender.values()) {
            if (values.put(g.value, g) != null) {
                  throw new IllegalArgumentException("duplicate value: " + g.value);
            }
        }
    }

    private Gender(String option) {
          value = option;
    }

    public static Gender fromString(String option) {
        return values.get(option);
    }
} 
```

与第一种方法相比，我看到了两个优点：

1.  此方法可以将字符串转换为`Gender`时间`O(1)`，而另一种方法需要`O(n)`时间。
2.  这将自动检测重复值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:06:47.873

这是一个更通用的解决方案。每当枚举映射到代码值时，我都会使用它。当您有一个枚举表示一系列离散值时，它特别有用，这些值映射到一个数据库表。请注意，接下来定义的几个类型只需编写一次，然后就可以在任何枚举上使用。

您首先定义您的枚举（或要存储在集合中的 POJO）将实现的接口：

```
public interface Coded<T> {
    T getCode();
} 
```

以下利用[Google Guava](https://code.google.com/p/guava-libraries/)，但是，您可以执行空检查而不是使用它们的[Optional](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Optional.html)类：

```
public final class CodedFinder {

    private CodedFinder() {}

    public static <V, T extends Enum<T> & Coded<V>> T find(final Class<T> target, final V code) {
        final Optional<T> found = findInternal(Arrays.asList(target.getEnumConstants()), code);
        if (! found.isPresent()) {
            throw new IllegalArgumentException(code.toString() + " is invalid for " + target.getSimpleName());
        }
        return found.get();
    }

    // Additional find methods for arrays and iterables redacted for clarity.

    private static <V, T extends Coded<V>> Optional<T> findInternal(final Iterable<T> values, final V code) {
        return Iterables.tryFind(values, CodedPredicate.of(code));
    }
} 
```

上面的方法使用[Class#getEnumConstants](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29)来检索枚举中定义的所有值。实际调用的 find 方法不仅可以用于枚举，还可以用于数组和集合等。

我们必须定义一个[Predicate](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Predicate.html)来利用[Guava 的 find 方法](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html)：

```
public final class CodedPredicate<V, T extends Coded<V>> implements com.google.common.base.Predicate<T> {
    private final V value;

    private CodedPredicate(final V value) {
        this.value = value;
    }

    public static <V, T extends Coded<V>> CodedPredicate<V, T> of(final V value) {
        return new CodedPredicate<V, T>(value);
    }

    public boolean apply(final T current) {
        return value.equals(current.getCode());
    }
} 
```

该谓词是通用的，因此您可以使用`Coded<Integer>`或任何其他具有合理`equals()`实现的 POJO。

看起来代码很多，但实际上上面只定义了三种类型，并且可以在任意数量的项目中共享。每当你想搜索一个值时，它变得微不足道：

```
public final class GenderTest {

    @Test(groups="unit")
    public static void testValid() {

        assert CodedFinder.find(Gender.class, "male")  == Gender.m;
        assert CodedFinder.find(Gender.class, "female") == Gender.f;
    }

    @Test(groups="unit", expectedExceptions=IllegalArgumentException.class)
    public static void testInvalid() {

        CodedFinder.find(Gender.class, "foo");
    }

    public enum Gender implements Coded<String> {

        m("male"), f("female");

        private final String value;

        private Gender(final String option) {
              value = option;
        }

        public String getCode()
        {
            return value;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:39:48.303

我遇到过这种情况几次，通常使用您的第一种方法：

```
public static Gender forValue(String value) {
    for (Gender gender : gender.values()) {
        if (gender.value.equals(value)) {
            return gender;
        }
    }

    return null; // or throw something like IllegalArgumentException 
} 
```

鉴于您`value`已声明`final`并且所有实例都需要从代码中声明，*您*始终对值的唯一性负责，因此对我而言，这个问题几乎不存在。

# salesforce - 是否可以根据记录类型创建自定义保存和添加产品自定义按钮，其中只有自定义字段用于机会

> ID：15272562
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:33:40.593
> 
> 标签：salesforce

设想：

客户需要在保存机会记录之前捕获一些详细信息。我想自定义 Product 对象，但无法成功自定义该对象，因为我无法删除必填字段。所以我想创建一个自定义按钮，就像保存和添加机会产品一样。

可能吗？请帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-21T08:04:41.907

我必须覆盖机会的“编辑”按钮（因为无法覆盖“保存”），以便在保存时将其重定向到另一个页面，在那里我可以获得该对象的值

# android - Web Api 上的 Android REST 请求，JSON 响应被分块

> ID：15272565
> 
> 赞同：0
> 
> 时间：2013-03-07T13:33:53.427
> 
> 标签：android, json, asp.net-web-api

我有一个简单的解析器来从 Web Api 服务获取 JSON 数据。

```
public JSONArray getJSONArrayFromUrl(String url) {
        InputStream is = null;
        JSONArray jObj = null;
        String json = "";
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                //json += line;
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

它有效，但我的问题是，当数据稍大时，它们会被分块！！！！当内容较小时，一切正常，但在其他方面我得到了“没有价值”之类的异常。

我使用 Restlet 查询 REST Web Api 服务，异常是

```
Unterminated array at character 13 of [application/json,UTF-8] 
```

我在 IIS 中发现了一些关于内容长度的问题，但无法找到或理解任何解决方案，有人可以提供帮助，我绝对认为这不是客户端的问题，但我认为我应该专注于服务器端！

[编辑]

我应该得到的 JSON：

```
[
{
$id: "1",
ExamId: 1,
Title: "Agile Part Two",
ClassId: 1,
Description: "Agile Development 202",
Details: "What is Agile software Development? I explain agile with one dozen words: Iterative planning, honest plans, project heartbeat, working software, team ...",
TotalTime: "03:00:00",
RowVersion: "AAAAAAAAD6M=",
Class: null,
Questions: [
{
$id: "2",
QuestionId: 1,
ExamId: 1,
Question1: "You are a coach facilitating retrospective meeting. What is the main purpose of this meeting that facilitator need to ensure during the meeting?",
TimeAverage: "00:10:00",
RowVersion: "AAAAAAAAD6Q=",
Choices: [
{
$id: "3",
ChoiceId: 1,
QuestionId: 1,
Choice1: "Peer pressure, Fine-grain coordination, Focusing on the few, Daily commitment and Raising impediments.",
IsCorrect: true,
Points: 12,
RowVersion: "AAAAAAAAD64=",
Question: {
$ref: "2"
}
},
{
$id: "4",
ChoiceId: 2,
QuestionId: 1,
Choice1: "Know the work, Get a fresh start, Commit to shared goals and Create focus and abundance.",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7g=",
Question: {
$ref: "2"
}
},
{
$id: "5",
ChoiceId: 3,
QuestionId: 1,
Choice1: "True-up, Show and tell, Get direct feedback, Offer insights and Ask for help.",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7c=",
Question: {
$ref: "2"
}
},
{
$id: "6",
ChoiceId: 5,
QuestionId: 1,
Choice1: "Inspect and adapt. Look back at how, not what Do (even) better next time.",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7Y=",
Question: {
$ref: "2"
}
}
],
Exam: {
$ref: "1"
}
},
{
$id: "7",
QuestionId: 2,
ExamId: 1,
Question1: "How does tools like FIT and Fitness compliment Agile?",
TimeAverage: "00:10:00",
RowVersion: "AAAAAAAAD6Y=",
Choices: [
{
$id: "8",
ChoiceId: 6,
QuestionId: 2,
Choice1: "Automated Acceptance Tests",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7U=",
Question: {
$ref: "7"
}
},
{
$id: "9",
ChoiceId: 7,
QuestionId: 2,
Choice1: "Continuous Integration",
IsCorrect: true,
Points: 15,
RowVersion: "AAAAAAAAD7Q=",
Question: {
$ref: "7"
}
},
{
$id: "10",
ChoiceId: 8,
QuestionId: 2,
Choice1: "Unit Test",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7k=",
Question: {
$ref: "7"
}
},
{
$id: "11",
ChoiceId: 9,
QuestionId: 2,
Choice1: "Code coverage metrics",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7o=",
Question: {
$ref: "7"
}
}
],
Exam: {
$ref: "1"
}
},
{
$id: "12",
QuestionId: 3,
ExamId: 1,
Question1: "What does "Timeboxed" means in Agile terms?",
TimeAverage: "00:05:00",
RowVersion: "AAAAAAAAD6g=",
Choices: [
{
$id: "13",
ChoiceId: 10,
QuestionId: 3,
Choice1: "Fast",
IsCorrect: true,
Points: 13,
RowVersion: "AAAAAAAAD7s=",
Question: {
$ref: "12"
}
},
{
$id: "14",
ChoiceId: 11,
QuestionId: 3,
Choice1: "Flexible",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD7w=",
Question: {
$ref: "12"
}
},
{
$id: "15",
ChoiceId: 12,
QuestionId: 3,
Choice1: "Frequent",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD70=",
Question: {
$ref: "12"
}
},
{
$id: "16",
ChoiceId: 13,
QuestionId: 3,
Choice1: "Fixed",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD74=",
Question: {
$ref: "12"
}
}
],
Exam: {
$ref: "1"
}
},
{
$id: "17",
QuestionId: 4,
ExamId: 1,
Question1: "How are EVM metrics used in Agile?",
TimeAverage: "00:15:00",
RowVersion: "AAAAAAAAD6o=",
Choices: [
{
$id: "18",
ChoiceId: 14,
QuestionId: 4,
Choice1: "They are used to prioritize projects.",
IsCorrect: true,
Points: 22,
RowVersion: "AAAAAAAAD78=",
Question: {
$ref: "17"
}
},
{
$id: "19",
ChoiceId: 15,
QuestionId: 4,
Choice1: "They are used to monitor project performance",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8A=",
Question: {
$ref: "17"
}
},
{
$id: "20",
ChoiceId: 16,
QuestionId: 4,
Choice1: "They are used to analyze risk.",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8E=",
Question: {
$ref: "17"
}
},
{
$id: "21",
ChoiceId: 17,
QuestionId: 4,
Choice1: "They are used to measure coach's performance.",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8I=",
Question: {
$ref: "17"
}
}
],
Exam: {
$ref: "1"
}
},
{
$id: "22",
QuestionId: 5,
ExamId: 1,
Question1: "If a team can complete 10 story points in an iteration then how long will it take for the team to complete 100 story points?",
TimeAverage: "00:12:00",
RowVersion: "AAAAAAAAD6w=",
Choices: [
{
$id: "23",
ChoiceId: 19,
QuestionId: 5,
Choice1: "10 Iterations",
IsCorrect: true,
Points: 11,
RowVersion: "AAAAAAAAD8Q=",
Question: {
$ref: "22"
}
},
{
$id: "24",
ChoiceId: 20,
QuestionId: 5,
Choice1: "10 waves",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8U=",
Question: {
$ref: "22"
}
},
{
$id: "25",
ChoiceId: 21,
QuestionId: 5,
Choice1: "20 Iterations",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8Y=",
Question: {
$ref: "22"
}
},
{
$id: "26",
ChoiceId: 23,
QuestionId: 5,
Choice1: "20 waves",
IsCorrect: false,
Points: 0,
RowVersion: "AAAAAAAAD8g=",
Question: {
$ref: "22"
}
}
],
Exam: {
$ref: "1"
}
}
],
Schedule: {
$id: "27",
ScheduleId: 1,
DateScheduled: "2013-03-06T00:00:00",
RowVersion: "AAAAAAAAD8k=",
Exam: {
$ref: "1"
}
}
}
] 
```

我得到的 JSON：

```
[{"ClassId":1,"Description":"Agile Development 202","Schedule":{"RowVersion":"AAAAAAAAD8k=","Exam":{"$ref":"1"},"DateScheduled":"2013-03-06T00:00:00","ScheduleId":1,"$id":"27"},"Questions":[{"Exam":{"$ref":"1"},"RowVersion":"AAAAAAAAD6Q=","Choices":[{"Question":{"$ref":"2"},"RowVersion":"AAAAAAAAD64=","QuestionId":1,"IsCorrect":true,"ChoiceId":1,"Points":12,"$id":"3","Choice1":"Peer pressure, Fine-grain coordination, Focusing on the few, Daily commitment and Raising impediments."},{"Question":{"$ref":"2"},"RowVersion":"AAAAAAAAD7g=","QuestionId":1,"IsCorrect":false,"ChoiceId":2,"Points":0,"$id":"4","Choice1":"Know the work, Get a fresh start, Commit to shared goals and Create focus and abundance."},{"Question":{"$ref":"2"},"RowVersion":"AAAAAAAAD7c=","QuestionId":1,"IsCorrect":false,"ChoiceId":3,"Points":0,"$id":"5","Choice1":"True-up, Show and tell, Get direct feedback, Offer insights and Ask for help."},{"Question":{"$ref":"2"},"RowVersion":"AAAAAAAAD7Y=","QuestionId":1,"IsCorrect":false,"ChoiceId":5,"Points":0,"$id":"6","Choice1":"Inspect and adapt. Look back at how, not what\r\nDo (even) better next time."}],"QuestionId":1,"TimeAverage":"00:10:00","ExamId":1,"Question1":"You are a coach facilitating retrospective meeting. What is the main purpose of this meeting that facilitator need to ensure during the meeting?","$id":"2"},{"Exam":{"$ref":"1"},"RowVersion":"AAAAAAAAD6Y=","Choices":[{"Question":{"$ref":"7"},"RowVersion":"AAAAAAAAD7U=","QuestionId":2,"IsCorrect":false,"ChoiceId":6,"Points":0,"$id":"8","Choice1":"Automated Acceptance Tests"},{"Question":{"$ref":"7"},"RowVersion":"AAAAAAAAD7Q=","QuestionId":2,"IsCorrect":true,"ChoiceId":7,"Points":15,"$id":"9","Choice1":"Continuous Integration"},{"Question":{"$ref":"7"},"RowVersion":"AAAAAAAAD7k=","QuestionId":2,"IsCorrect":false,"ChoiceId":8,"Points":0,"$id":"10","Choice1":"Unit Test"},{"Question":{"$ref":"7"},"RowVersion":"AAAAAAAAD7o=","QuestionId":2,"IsCorrect":false,"ChoiceId":9,"Points":0,"$id":"11","Choice1":"Code coverage metrics"}],"QuestionId":2,"TimeAverage":"00:10:00","ExamId":1,"Question1":"How does tools like FIT and Fitness compliment Agile?","$id":"7"},{"Exam":{"$ref":"1"},"RowVersion":"AAAAAAAAD6g=","Choices":[{"Question":{"$ref":"12"},"RowVersion":"AAAAAAAAD7s=","QuestionId":3,"IsCorrect":true,"ChoiceId":10,"Points":13,"$id":"13","Choice1":"Fast"},{"Question":{"$ref":"12"},"RowVersion":"AAAAAAAAD7w=","QuestionId":3,"IsCorrect":false,"ChoiceId":11,"Points":0,"$id":"14","Choice1":"Flexible"},{"Question":{"$ref":"12"},"RowVersion":"AAAAAAAAD70=","QuestionId":3,"IsCorrect":false,"ChoiceId":12,"Points":0,"$id":"15","Choice1":"Frequent"},{"Question":{"$ref":"12"},"RowVersion":"AAAAAAAAD74=","QuestionId":3,"IsCorrect":false,"ChoiceId":13,"Points":0,"$id":"16","Choice1":"Fixed"}],"QuestionId":3,"TimeAverage":"00:05:00","ExamId":1,"Question1":"What does \"Timeboxed\" means in Agile terms?","$id":"12"},{"Exam":{"$ref":"1"},"RowVersion":"AAAAAAAAD6o=","Choices":[{"Question":{"$ref":"17"},"RowVersion":"AAAAAAAAD78=","QuestionId":4,"IsCorrect":true,"ChoiceId":14,"Points":22,"$id":"18","Choice1":"They are used to prioritize projects."},{"Question":{"$ref":"17"},"RowVersion":"AAAAAAAAD8A=","QuestionId":4,"IsCorrect":false,"ChoiceId":15,"Points":0,"$id":"19","Choice1":"They are used to monitor project performance"},{"Question":{"$ref":"17"},"RowVersion":"AAAAAAAAD8E=","QuestionId":4,"IsCorrect":false,"ChoiceId":16,"Points":0,"$id":"20","Choice1":"They are used to analyze risk."},{"Question":{"$ref":"17"},"RowVersion":"AAAAAAAAD8I=","QuestionId":4,"IsCorrect":false,"ChoiceId":17,"Points":0,"$id":"21","Choice1":"They are used to measure coach's performance."}],"QuestionId":4,"TimeAverage":"00:15:00","ExamId":1,"Question1":"How are EVM metrics used in Agile?","$id":"17"},{"Exam":{"$ref":"1"},"RowVersion":"AAAAAAAAD6w=","Choices":[{"Question":{"$ref":"22"},"RowVersion":"AAAAAAAAD8Q=","QuestionId":5,"IsCorrect":true,"ChoiceId":19,"Points":11,"$id":"23","Choice1":"10 Iterations"},{"Question":{"$ref":"22"},"RowVersion":"AAA 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:07:16.800

解决了禁用分块编码的问题。

请参阅此[答案中的详细信息](https://stackoverflow.com/a/8608046/122769)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:18:00.083

```
[
    {
        "ClassId": 1,
        "Description": "Agile Development 202",
        "Schedule": {
            "RowVersion": "AAAAAAAAD8k=",
            "Exam": {
                "$ref": "1"
            },
            "DateScheduled": "2013-03-06T00:00:00",
            "ScheduleId": 1,
            "$id": "27"
        },
        "Questions": [
            {
                "Exam": {
                    "$ref": "1"
                },
                "RowVersion": "AAAAAAAAD6Q=",
                "Choices": [
                    {
                        "Question": {
                            "$ref": "2"
                        },
                        "RowVersion": "AAAAAAAAD64=",
                        "QuestionId": 1,
                        "IsCorrect": true,
                        "ChoiceId": 1,
                        "Points": 12,
                        "$id": "3",
                        "Choice1": "Peer pressure, Fine-grain coordination, Focusing on the few, Daily commitment and Raising impediments."
                    },
                    {
                        "Question": {
                            "$ref": "2"
                        },
                        "RowVersion": "AAAAAAAAD7g=",
                        "QuestionId": 1,
                        "IsCorrect": false,
                        "ChoiceId": 2,
                        "Points": 0,
                        "$id": "4",
                        "Choice1": "Know the work, Get a fresh start, Commit to shared goals and Create focus and abundance."
                    },
                    {
                        "Question": {
                            "$ref": "2"
                        },
                        "RowVersion": "AAAAAAAAD7c=",
                        "QuestionId": 1,
                        "IsCorrect": false,
                        "ChoiceId": 3,
                        "Points": 0,
                        "$id": "5",
                        "Choice1": "True-up, Show and tell, Get direct feedback, Offer insights and Ask for help."
                    },
                    {
                        "Question": {
                            "$ref": "2"
                        },
                        "RowVersion": "AAAAAAAAD7Y=",
                        "QuestionId": 1,
                        "IsCorrect": false,
                        "ChoiceId": 5,
                        "Points": 0,
                        "$id": "6",
                        "Choice1": "Inspect and adapt. Look back at how, not what\r\nDo (even) better next time."
                    }
                ],
                "QuestionId": 1,
                "TimeAverage": "00:10:00",
                "ExamId": 1,
                "Question1": "You are a coach facilitating retrospective meeting. What is the main purpose of this meeting that facilitator need to ensure during the meeting?",
                "$id": "2"
            },
            {
                "Exam": {
                    "$ref": "1"
                },
                "RowVersion": "AAAAAAAAD6Y=",
                "Choices": [
                    {
                        "Question": {
                            "$ref": "7"
                        },
                        "RowVersion": "AAAAAAAAD7U=",
                        "QuestionId": 2,
                        "IsCorrect": false,
                        "ChoiceId": 6,
                        "Points": 0,
                        "$id": "8",
                        "Choice1": "Automated Acceptance Tests"
                    },
                    {
                        "Question": {
                            "$ref": "7"
                        },
                        "RowVersion": "AAAAAAAAD7Q=",
                        "QuestionId": 2,
                        "IsCorrect": true,
                        "ChoiceId": 7,
                        "Points": 15,
                        "$id": "9",
                        "Choice1": "Continuous Integration"
                    },
                    {
                        "Question": {
                            "$ref": "7"
                        },
                        "RowVersion": "AAAAAAAAD7k=",
                        "QuestionId": 2,
                        "IsCorrect": false,
                        "ChoiceId": 8,
                        "Points": 0,
                        "$id": "10",
                        "Choice1": "Unit Test"
                    },
                    {
                        "Question": {
                            "$ref": "7"
                        },
                        "RowVersion": "AAAAAAAAD7o=",
                        "QuestionId": 2,
                        "IsCorrect": false,
                        "ChoiceId": 9,
                        "Points": 0,
                        "$id": "11",
                        "Choice1": "Code coverage metrics"
                    }
                ],
                "QuestionId": 2,
                "TimeAverage": "00:10:00",
                "ExamId": 1,
                "Question1": "How does tools like FIT and Fitness compliment Agile?",
                "$id": "7"
            },
            {
                "Exam": {
                    "$ref": "1"
                },
                "RowVersion": "AAAAAAAAD6g=",
                "Choices": [
                    {
                        "Question": {
                            "$ref": "12"
                        },
                        "RowVersion": "AAAAAAAAD7s=",
                        "QuestionId": 3,
                        "IsCorrect": true,
                        "ChoiceId": 10,
                        "Points": 13,
                        "$id": "13",
                        "Choice1": "Fast"
                    },
                    {
                        "Question": {
                            "$ref": "12"
                        },
                        "RowVersion": "AAAAAAAAD7w=",
                        "QuestionId": 3,
                        "IsCorrect": false,
                        "ChoiceId": 11,
                        "Points": 0,
                        "$id": "14",
                        "Choice1": "Flexible"
                    },
                    {
                        "Question": {
                            "$ref": "12"
                        },
                        "RowVersion": "AAAAAAAAD70=",
                        "QuestionId": 3,
                        "IsCorrect": false,
                        "ChoiceId": 12,
                        "Points": 0,
                        "$id": "15",
                        "Choice1": "Frequent"
                    },
                    {
                        "Question": {
                            "$ref": "12"
                        },
                        "RowVersion": "AAAAAAAAD74=",
                        "QuestionId": 3,
                        "IsCorrect": false,
                        "ChoiceId": 13,
                        "Points": 0,
                        "$id": "16",
                        "Choice1": "Fixed"
                    }
                ],
                "QuestionId": 3,
                "TimeAverage": "00:05:00",
                "ExamId": 1,
                "Question1": "What does \"Timeboxed\" means in Agile terms?",
                "$id": "12"
            },
            {
                "Exam": {
                    "$ref": "1"
                },
                "RowVersion": "AAAAAAAAD6o=",
                "Choices": [
                    {
                        "Question": {
                            "$ref": "17"
                        },
                        "RowVersion": "AAAAAAAAD78=",
                        "QuestionId": 4,
                        "IsCorrect": true,
                        "ChoiceId": 14,
                        "Points": 22,
                        "$id": "18",
                        "Choice1": "They are used to prioritize projects."
                    },
                    {
                        "Question": {
                            "$ref": "17"
                        },
                        "RowVersion": "AAAAAAAAD8A=",
                        "QuestionId": 4,
                        "IsCorrect": false,
                        "ChoiceId": 15,
                        "Points": 0,
                        "$id": "19",
                        "Choice1": "They are used to monitor project performance"
                    },
                    {
                        "Question": {
                            "$ref": "17"
                        },
                        "RowVersion": "AAAAAAAAD8E=",
                        "QuestionId": 4,
                        "IsCorrect": false,
                        "ChoiceId": 16,
                        "Points": 0,
                        "$id": "20",
                        "Choice1": "They are used to analyze risk."
                    },
                    {
                        "Question": {
                            "$ref": "17"
                        },
                        "RowVersion": "AAAAAAAAD8I=",
                        "QuestionId": 4,
                        "IsCorrect": false,
                        "ChoiceId": 17,
                        "Points": 0,
                        "$id": "21",
                        "Choice1": "They are used to measure coach's performance."
                    }
                ],
                "QuestionId": 4,
                "TimeAverage": "00:15:00",
                "ExamId": 1,
                "Question1": "How are EVM metrics used in Agile?",
                "$id": "17"
            },
            {
                "Exam": {
                    "$ref": "1"
                },
                "RowVersion": "AAAAAAAAD6w=",
                "Choices": [
                    {
                        "Question": {
                            "$ref": "22"
                        },
                        "RowVersion": "AAAAAAAAD8Q=",
                        "QuestionId": 5,
                        "IsCorrect": true,
                        "ChoiceId": 19,
                        "Points": 11,
                        "$id": "23",
                        "Choice1": "10 Iterations"
                    },
                    {
                        "Question": {
                            "$ref": "22"
                        },
                        "RowVersion": "AAA 
```

我可以看到您的 json 格式不正确，并且您的数组未关闭，因此您收到错误`Unterminated array`

# php - .htaccess 重写不起作用

> ID：15272572
> 
> 赞同：0
> 
> 时间：2013-03-07T13:34:08.030
> 
> 标签：php, mod-rewrite, rewrite

这已经在互联网和stackoverflow上被问到了。但我无法让它工作。（第一次使用.htacces）我想做的是一些简单的事情：

1.  `www`从网址 中删除。
2.  `.php`从网址 中删除。
3.  `/index`如果链接回主页，则从主页中删除。

根据我的虚拟主机公司，这是他们使用的：
Apache 2.2+ 和 PHP 5.3+ - MySQL 5.1+

.htacces 文件位于带有 index.php 的根文件夹中，我尝试了很多东西，但这就是我现在得到的：

```
RewriteEngine On
#www to non www
RewriteCond %{HTTP_HOST} !^mysite.se$ [NC]
RewriteRule ^(.*)$ http://mysite.se/$1 [L,R=301]

#remove .php
RewriteCond %{HTTP_HOST} ^mysite\.se$ [NC]
RewriteCond %{QUERY_STRING} !internal=1 [NC]
RewriteRule ^(.*)\.php$ $1 [L,R=301]

#remove /index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

预先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:45:24.140

你用`.htaccess`错了方法。

您不能使用 htaccess 生成友好的 url，**您必须使用它来将友好的 url 转换为真实的**：

```
RewriteEngine On
RewriteBase /

#redirect www.mysite.se to mysite.se
RewriteCond %{HTTP_HOST} !^mysite.se$ [NC]
RewriteRule ^(.*)$ http://mysite.se/$1 [L,R=301]

#redirect mysite.se/page to mysite.se/page.php (transparent)
#as this rule is extremely permissive, we desactivate it when we're calling
#a real file, to avoid this kind of situation : mysite.se/img/mylogo.jpg.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L]

#redirect mysite.se/index to mysite.se/ (visible)
RewriteRule ^index$ / [L,R=301] 
```

在您的代码中，**使用友好的 urls**，并让 htaccess 重定向它。

如果您不使用这种方式，您将进入一种自毁模式，尝试重定向`page.php`到`page`（以获得漂亮的 url），然后重定向`page`到`page.php`（因为您的应用程序只知道`page.php`）。

# spring - 在数据库中创建测试数据以进行测试

> ID：15272574
> 
> 赞同：0
> 
> 时间：2013-03-07T13:34:14.150
> 
> 标签：spring, hibernate, junit

我想为我的项目（spring+hibernate）编写测试，而对于测试，我使用内存数据库（hsqldb）。我需要用一些数据填充我的数据库。至于我，最好的方法是使用@BeforeClass 方法。像这样的东西

```
@Transactional
@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:test-applicationContext.xml")
public class UsersControllerTest {

    @Autowired
    private static SessionFactory sessionFactory;

    @BeforeClass
    public static void setUpBeforeClass() {
            User u = new User();
            u.setLogin("test_login");
            u.setPassword("test_password");
            u.setName("test_name");

            Session session = sessionFactory.getCurrentSession();
            session.save(u);
    } 
```

但我不能这样做，因为在这种情况下 sessionFactory 将为空。如果我使用@Before 方法而不是@BeforeClass，它将起作用。但我认为这不是一个好的解决方案，因为这个方法会在每个 @Test 方法之前运行，我不需要它。所以我的问题很简单。当您需要在数据库中创建测试数据时，哪种解决方案最适合这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:39:01.350

简单地使用静态布尔标志来防止`@Before`方法中的代码被重复执行怎么样。像这样的东西：

```
public class UsersControllerTest {

    private static boolean isDataSetLoaded = false;

    @Autowired
    private SessionFactory sessionFactory;

    @Before
    public void setUp() throws Exception {
        if (!isDataSetLoaded) {
            loadDataset();
            isDataSetLoaded = true;
        }
    }

    private void loadDataset() throws Exception {
        // save various entities here
    }
} 
```

### 更新：

我想提请您注意上述解决方案的一个警告，该解决方案只是让我非常头痛：

`@Transactional`Spring 以一种非常违反直觉的方式实现了该支持。我希望在进入测试方法之前打开事务，但实际上它们已经在更早的阶段打开了：甚至在`@Before`执行带注释的方法之前。

这意味着任何数据操作都`loadDataset()`将在与第一个测试方法相同的事务中运行，这是一个*巨大*的问题，因为`@Transactional`测试方法的默认行为是在最后回滚。最终结果是，在第一个测试方法之后，所有初始化步骤`loadDataset()`都被撤消，因此如果后续测试方法依赖于准备好的数据，它们将失败。

当然，这只是一个问题，如果其中的操作`loadDataset()`愿意加入现有事务，可以通过应用适当的事务属性（例如使用`TransactionTemplate`with `Propagation.REQUIRES_NEW`）来防止这种情况。

# javascript - 如何将一些js应用于gxt元素？

> ID：15272587
> 
> 赞同：1
> 
> 时间：2013-03-07T13:34:37.673
> 
> 标签：javascript, gwt, radio-button, gxt

在几个浏览器中，我在单选按钮周围有正方形。我设法使用 javascript: 解决了它`onfocus="this.blur()"`，但是我的网络应用程序是用 gwt 和 gxt 构建的，我不知道如何将它应用到我的`Radio button;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:42:09.127

`focus`您可以通过传递`false`给`setFocus`方法来删除。

```
button.setFocus(false); 
```

看到[这个](https://stackoverflow.com/questions/4087730/gxt-focus-management)

# asp.net - HttpContext.Current.Cache 如何将对象保存在内存中？

> ID：15272588
> 
> 赞同：2
> 
> 时间：2013-03-07T13:34:41.773
> 
> 标签：asp.net, asp.net-caching, httpcontext.cache

我`HttpContext.Current.Cache`用来将对象保存到内存中。

我的代码看起来像这样：

```
public void Add(string key, object data, TimeSpan slidingExpirationTime)
{
    HttpContext.Current.Cache.Insert(key, data, null, System.Web.Caching.Cache.NoAbsoluteExpiration, slidingExpirationTime);
}

public T Get<T>(string key)
{
    T itemStored = (T)HttpContext.Current.Cache.Get(key);
    if (itemStored == null)
        itemStored = default(T);

    return itemStored;
} 
```

这工作非常快！

我很好奇它是如何将对象保存到内存中的。

它是保存指针值，还是对对象进行哈希处理，然后将其保存到内存中，当我请求它时，它会反序列化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:02.810

数据，是一种[`object`](http://msdn.microsoft.com/en-us/library/ms173110.aspx)从内部插入缓存键的函数，我们看到很简单，保持对`object`

```
internal CacheEntry(string key, object value, CacheDependency dependency, CacheItemRemovedCallback onRemovedHandler, DateTime utcAbsoluteExpiration, TimeSpan slidingExpiration, CacheItemPriority priority, bool isPublic) : base(key, isPublic)
{
    if (value == null)
    {
        throw new ArgumentNullException("value");
    }
    .... code ....
    this._value = value;
    .... code ....
} 
```

# jquery - jQuery 表单数据未提交

> ID：15272589
> 
> 赞同：1
> 
> 时间：2013-03-07T13:34:42.087
> 
> 标签：jquery, forms, upload

我正在尝试使用 jQuery 提交表单数据，但它显示出一些奇怪的行为。让我解释一下“奇怪”是什么意思。如果我使用下面的 HTML 代码：

```
<form id="upload" enctype="multipart/form-data">
    <input type="text" name="myfile" id="myfile" />
</form> 
```

和这个 jQuery 代码：

```
$("#myfile").bind("change",function() {
    var data = $('form#upload').serialize();
        alert(data);
}); 
```

它显示了预期的结果，但如果我将 HTML 代码更改为：

```
<form id="upload" enctype="multipart/form-data">
    <input type="file" name="myfile" id="myfile" />
</form> 
```

它根本没有显示任何东西。我也尝试过`FormData()`，`serialize()`但结果相同。我也尝试在服务器端读取数据，但它也显示相同。我使用 PHP 作为服务器端语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:38:40.697

文件元素与其他元素有点不同。要在 js 中提交文件，您必须使用不同的方式。您可以使用像这样的插件： [jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)

# java - 如何大写除重音字符之外的Java字符串

> ID：15272597
> 
> 赞同：2
> 
> 时间：2013-03-07T13:35:10.353
> 
> 标签：java, string, special-characters

我有一个 web 应用程序，它调用一个传递字符串参数（名称）的 web 服务，该字符串参数是大写格式，可以包含强调的大写字符。另一方面，服务器 webapp 不管理这种字符。

然后，客户端 web 应用程序必须仅小写重音字符（例如：CLÉMENT > CLéMENT）。

您是否知道一种快速（使用 utils ？）方法/方法组合来做到这一点，而无需将 String 转换为 Char 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:41:42.003

不，看起来您必须将字符串转换为 a`char[]`并从那里开始工作。尝试这样的事情：

```
public static String convert(String in) {

    // put in the string the accented characters to be converted
    final String accented = "ÁÉÍÓÚ";
    char[] outChars = in.toCharArray();

    for (int i = 0, n = outChars.length; i < n; i++)
        if (accented.indexOf(outChars[i]) != -1)
            outChars[i] = Character.toLowerCase(outChars[i]);

    return new String(outChars);

} 
```

像这样使用它：

```
String in = "CLÉMENT";    // input  string: CLÉMENT
String out = convert(in); // output string: CLéMENT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:43:34.660

似乎是一个奇怪的要求，但这里有一个解决方案：

```
 /** matches non-ASCII upper-case letters */
  private static final Pattern UPPER =
                        Pattern.compile("[\\p{javaUpperCase}&&[^\\p{Upper}]]+");

  private static String lowerNonAscii(String str, Locale locale) {
    StringBuilder buffer = new StringBuilder();
    Matcher matcher = UPPER.matcher(str);
    int start = 0;
    while (matcher.find()) {
      String nonMatch = str.substring(start, matcher.start());
      String match = str.substring(matcher.start(), matcher.end())
          .toLowerCase(locale);
      buffer.append(nonMatch)
          .append(match);
      start = matcher.end();
    }
    String tail = str.substring(start, str.length());
    return buffer.append(tail)
        .toString();
  }

  public static void main(String[] args) {
    String test = "CL\u00C9MENT";
    System.out.println(test + " > " + lowerNonAscii(test, Locale.ENGLISH));
  } 
```

注意：

*   没有语言环境，大小写毫无意义，因此您必须提供一个
*   分解的[变音符号](http://en.wikipedia.org/wiki/Diacritic)没有特殊处理——即当字母和重音分开时`char`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:40:43.187

请在此处阅读已接受的答案：[Using Locales with Java's toLowerCase() 和 toUpperCase()](https://stackoverflow.com/questions/11063102/using-java-string-tolowercaselocal-english)。

如果将 toUpperCase 与区域设置一起使用，则应尊重重音字符。

# javascript - 在输出之前更改我从 POST 获取的 HTML

> ID：15272599
> 
> 赞同：0
> 
> 时间：2013-03-07T13:35:13.863
> 
> 标签：javascript, jquery

我在 Javascript 中有一个 post 脚本，它返回的 HTML 有一个类名为“guru1”、“guru2”等的 div。

我想在那个 div 中找到一个 div 元素。（将永远隐藏）

并将它与一个数组匹配我必须检查我应该显示他的块的大师

例如：

```
$.post('/gurus/home/' ,
        function(data){
           for(var i=0; i<a.length; i++) {
                data.find('.guru'+a[i]).find('.element').css('display','block');
           }
          $('#content-bottom').html(data);
}); 
```

这ofcoruse不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:36:10.757

试试这个

```
$(data).find('.guru'+a[i]).find('.element').css('display','block'); 
```

# java - 删除停用词未正确标记

> ID：15272606
> 
> 赞同：0
> 
> 时间：2013-03-07T13:35:22.380
> 
> 标签：java, string

我使用 java 程序删除 word 文件中的停用词。但是我的停用词删除没有删除特殊字符。我想从文件中删除所有停用词和其他不必要的词、特殊字符和数字。

如何改进此代码

```
 {                                         
    String[] stopwords ={"a", "about", "above", "above", "across", "after", "afterwards", "again", "against", "all", "almost", 
            "alone", "along", "already", "also","although","always","am","among", "amongst", "amoungst", "amount",  "an", "and", 
            "another", "any","anyhow","anyone","anything","anyway", "anywhere", "are", "around", "as",  "at", "back","be","became", 
            "because","become","becomes", "becoming", "been", "before", "beforehand", "behind", "being", "below", "beside", "besides", 
            "between", "beyond", "bill", "both", "bottom","but", "by", "call", "can", "cannot", "cant", "co", "con", "could", "couldnt",
            "cry", "de", "describe", "detail", "do", "done", "down", "due", "during", "each", "eg", "eight", "either", "eleven","else",
            "elsewhere", "empty", "enough", "etc", "even", "ever", "every", "everyone", "everything", "everywhere", "except", "few", 
            "fifteen", "fify", "fill", "find", "fire", "first", "five", "for", "former", "formerly", "forty", "found", "four", "from", 
            "front", "full", "further", "get", "give", "go", "had", "has", "hasnt",
            "have", "he", "hence", "her", "here", "hereafter", "hereby", "herein", "hereupon", "hers", "herself", 
            "him", "himself", "his", "how", "however", "hundred", "ie", "if", "in", "inc", "indeed", "interest", "into", 
            "is", "it", "its", "itself", "keep", "last", "latter", "latterly", "least", "less", "ltd", "made", "many", 
            "may", "me", "meanwhile", "might", "mill", "mine", "more", "moreover", "most", "mostly", "move", "much", "must", 
            "my", "myself", "name", "namely", "neither", "never", "nevertheless", "next", "nine", "no", "nobody", "none", 
            "noone", "nor", "not", "nothing", "now", "nowhere", "of", "off", "often", "on", "once", "one", "only", "onto", 
            "or", "other", "others", "otherwise", "our", "ours", "ourselves", "out", "over", "own","part", "per", "perhaps",
            "please", "put", "rather", "re", "same", "see", "seem", "seemed", "seeming", "seems", "serious", "several", "she",
            "should", "show", "side", "since", "sincere", "six", "sixty", "so", "some", "somehow", "someone", "something", 
            "sometime", "sometimes", "somewhere", "still", "such", "system", "take", "ten", "than", "that", "the", "their", 
            "them", "themselves", "then", "thence", "there", "thereafter", "thereby", "therefore", "therein", "thereupon", 
            "these", "they", "thickv", "thin", "third", "this", "those", "though", "three", "through", "throughout", "thru", 
            "thus", "to", "together", "too", "top", "toward", "towards", "twelve", "twenty", "two", "un", "under", "until", 
            "up", "upon", "us", "very", "via", "was", "we", "well", "were", "what", "whatever", "when", "whence", "whenever",
            "where", "whereafter", "whereas", "whereby", "wherein", "whereupon", "wherever", "whether", "which", "while", 
            "whither", "who", "whoever", "whole", "whom", "whose", "why", "will", "with", "within", "without", "would", "yet",
            "you", "your", "yours", "yourself", "yourselves","1","2","3","4","5","6","7","8","9","10","1.","2.","3.","4.","5.","6.","11",
            "7.","8.","9.","12","13","14","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",
            "terms","CONDITIONS","conditions","values","interested.","care","sure",".","!","@","#","$","%","^","&","*","(",")","{","}","[","]",":",";",",","<",".",">","/","?","_","-","+","=",
            "a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",
            "contact","grounds","buyers","tried","said,","plan","value","principle.","forces","sent:","is,","was","like",
            "discussion","tmus","diffrent.","layout","area.","thanks","thankyou","hello","bye","rise","fell","fall","psqft.","http://","km","miles"};

    try
    {
        Scanner fip1=new Scanner(new File("c:/removewords.txt"));
        FileOutputStream out=new FileOutputStream("c:/StopWords.txt");

      while(fip1.hasNext())
      {
          int flag=1;
          String s1=fip1.next();
          s1=s1.toLowerCase();
          for(int i=0;i<stopwords.length;i++){
              if(s1.equals(stopwords[i]))
                  {
                  flag=0;
                  }
          }
          if(flag!=0)
          {
              System.out.println(s1);

              PrintStream p=new PrintStream(out);
              p.println(s1);   
          }

      }
      JOptionPane.showMessageDialog(null,"STOP WORD REMOVAL IS DONE");        
      }
      catch(Exception e){
          System.err.println("cannot read file");
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:44:47.793

也许您可以看看[Apache Lucene](http://lucene.apache.org/)及其[停止过滤器](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/StopFilter.html)：

```
// input string
String input = "Please remove my stop words!";

// tokenize the input string
TokenStream tokenStream = new ClassicTokenizer(Version.LUCENE_35, new StringReader(input));
// remove stop words
tokenStream = new StopFilter(Version.LUCENE_35, tokenStream, EnglishAnalyzer.getDefaultStopSet());

// retrieve the remaining tokens
Set<String> tokens = new HashSet<String>();
CharTermAttribute token = tokenStream.getAttribute(CharTermAttribute.class);
try {
    while (tokenStream.incrementToken()) {
        tokens.add(token.toString());
    }
} catch (IOException e) {
    // log
}

// tokens contains only non-stop words from now on 
```

# android - 单击页面上的任意位置后，Android中的进度条未显示

> ID：15272615
> 
> 赞同：0
> 
> 时间：2013-03-07T13:35:49.527
> 
> 标签：android, webview

我的 android 应用程序中有一个 webview 和一个按钮。我正在显示 ProgressDialog 并禁用 onPageStarted 函数上的按钮单击，例如：

```
public void onPageStarted(WebView view, String url, Bitmap favicon)
{

                    super.onPageStarted(view, url, favicon);
                    Dialog.show();
                    button1.setClickable(false);

} 
```

并禁用 onPageFinished 上的进度条并启用按钮

```
 public void  onPageFinished(WebView view, String url)
    {
                        if(Dialog.isShowing())
                                        {
                                                    Dialog.dismiss();
                                        }

                        button1.setClickable(true);

    } 
```

但我的问题是当我点击按钮时。即使它不可点击或点击页面上的任何地方，进度条也会被隐藏，它在显示功能上正确显示，并且在网页加载到 webview 之后。按钮变为可点击.如何显示继续进度条，直到加载url后调用onPageFinished

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:46:33.787

首先，你检查这个对话框指南：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

其次，那是因为您的对话框不是模态的。如果您想避免您的用户取消单击对话框之外的对话框或单击后退按钮，您必须执行以下操作：

[对话框.setCancelable（假）；](http://developer.android.com/reference/android/app/Dialog.html#setCancelable%28boolean%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:50:45.717

如果您想防止对话框从`dismiss/close`外部触摸，那么您应该执行以下操作..

```
 ProgressDialog Dialog = new ProgressDialog(Activity.this);
 Dialog.setCancelable(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:53:38.567

您可能想使用：

```
 dialog.setCanceledOnTouchOutside(false); 
```

一旦在它之外单击，它就不会关闭进度对话框。

# c++ - 为什么我们不能从类中访问全局非静态变量？

> ID：15272618
> 
> 赞同：0
> 
> 时间：2013-03-07T13:35:53.023
> 
> 标签：c++

我定义了以下结构，供多个类在应用程序中使用。

*ZHTypes.h*

```
#ifndef ZHTypes_h
#define ZHTypes_h

struct BeingHitParams
{
    bool isApplyKnockBack=true;
};
BeingHitParams *default_BeingHitParams_ptr = new BeingHitParams();

#endif 
```

我定义了以下变量

```
default_BeingHitParams_ptr 
```

对于这种情况，我将在多个地方使用它作为函数的默认参数，因为我不需要一直创建新结构。

无论如何，每当我在类内的代码中引用它时，上面定义的变量都会产生链接错误。但是如果我在前面添加**静态，那么它工作正常。**

```
static BeingHitParams *default_BeingHitParams_ptr = new BeingHitParams(); 
```

所以我的问题是为什么我们不能从一个类中访问全局但非静态的变量？我还想知道为什么 C++ 在访问变量时受到限制的额外解释，如上述情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:38:44.890

如果你把它放在`static`它前面，那么你给它内部链接，并且每个包含该标题的翻译单元都有自己的`default_BeingHitParams_ptr`. 您真正想要做的是`extern`在头文件中声明它（这不仅使其具有外部链接，而且使其成为声明而不是定义），然后在单个翻译单元中定义它：

```
// ZHTypes.h
// Now this is just a declaration:
extern BeingHitParams *default_BeingHitParams_ptr;

// ZHTypes.cpp
// Defined in a single translation unit:
BeingHitParams* default_BeingHitParams_ptr = new BeingHitParams(); 
```

然而，引入全局状态[通常是一件坏事](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。

# jquery - 在循环中添加暂停/恢复按钮

> ID：15272620
> 
> 赞同：0
> 
> 时间：2013-03-07T13:35:56.483
> 
> 标签：jquery, slideshow, cycle, resume

您好，我在 Jquery 循环中使用暂停/恢复按钮遇到了这个问题。

pauseOnPagerHover 有效，但如果我放一个暂停按钮则无效。

像这个：

> ```
> $("#pauseButton").click(function() {
> $("#slideshow").cycle("pause");
> });
> 
> $("#resumeButton").click(function() {
> $("#slideshow").cycle("resume");
> }); 
> ```

索引.html：

> ```
> <a id="pauseButton" href="#">Pause</a>
> <a id="resumeButton" href="#">Resume</a> 
> ```

*这是我的 slideshow.js 脚本：*

> ```
>  $slideshow = {  
>         context: false,  
>         tabs: false,  
>         timeout: 4000,      // time before next slide appears (in ms)  
>         slideSpeed: 2000,   // time it takes to slide in each slide (in ms)  
>         tabSpeed: 300,      // time it takes to slide in each slide (in ms) when clicking through tabs  
>         fx: 'fade',   // the slide effect to use  
>         init: function() {  
>             // set the context to help speed up selectors/improve performance  
>             this.context = $('#slideshow');  
>             // set tabs to current hard coded navigation items  
>             this.tabs = $('ul.slides-nav li', this.context);  
>             // remove hard coded navigation items from DOM  
>             // because they aren't hooked up to jQuery cycle  
>             this.tabs.remove();  
>             // prepare slideshow and jQuery cycle tabs  
>             this.prepareSlideshow();  
>         },  
>         prepareSlideshow: function() {  
>             // initialise the jquery cycle plugin -  
>             // for information on the options set below go to:  
>             // http://malsup.com/jquery/cycle/options.html  
>             $("div.slides > ul", $slideshow.context).cycle({  
>                 fx: $slideshow.fx,  
>                 timeout: $slideshow.timeout,  
>                 speed: $slideshow.slideSpeed,  
>                 fastOnEvent: $slideshow.tabSpeed,  
>                 pager: $("ul.slides-nav", $slideshow.context),  
>                 pagerAnchorBuilder: $slideshow.prepareTabs,  
>                 before: $slideshow.activateTab,  
>                 pauseOnPagerHover: true,  
>                 pause: true
> 
>             });  
>         },  
>         prepareTabs: function(i, slide) {  
>             // return markup from hardcoded tabs for use as jQuery cycle tabs  
>             // (attaches necessary jQuery cycle events to tabs)  
>             return $slideshow.tabs.eq(i);  
>         },  
>         activateTab: function(currentSlide, nextSlide) {  
>             // get the active tab  
>             var activeTab = $('a[href="#' + nextSlide.id + '"]', $slideshow.context); 
>             // if there is an active tab 
>             if(activeTab.length) { 
>                 // remove active styling from all other tabs 
>                 $slideshow.tabs.removeClass('on'); 
>                 // add active styling to active button 
>                 activeTab.parent().addClass('on');  
>             }  
>         }  
>     };  
>     $(function() {  
>         // initialise the slideshow when the DOM is ready  
>         $slideshow.init();  
>     }); 
> ```

要添加什么使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:20:52.867

尝试：

```
$("#pauseButton").click(function() {
    $("#slideshow div.slides > ul").cycle("pause");
});

$("#resumeButton").click(function() {
    $("#slideshow div.slides > ul").cycle("resume");
}); 
```

[在这里](http://jsfiddle.net/xWbUn/10/)提琴

# active-directory - Active Directory 轻型目录服务 (AD LDS) 是否支持 DirSync？

> ID：15272625
> 
> 赞同：1
> 
> 时间：2013-03-07T13:36:12.417
> 
> 标签：active-directory, adlds

我正在编写代码以使用[Active Directory DirSync](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms677626%28v=vs.85%29.aspx)跟踪 AD 实例中的更改。

我希望能够为此代码编写自动化测试。[与其设置一个完整的 AD 实例，而且伴随着所有的复杂性，对我来说，针对Active Directory 轻量级目录服务](http://technet.microsoft.com/en-gb/library/cc754361%28v=ws.10%29.aspx)运行我的测试似乎是个好主意。从该页面：

> 由于 AD LDS 使用相同的编程模型并提供与 AD DS 几乎相同的管理体验，因此它非常适合暂存和测试各种 Active Directory 集成应用程序的开发人员。

我已经针对我们的真实 AD 实例运行了我的代码，它确实可以跟踪更改。但是，当我针对我创建的 AD LDS 实例运行它时，DirSync 搜索总是返回 0 个结果。

我想知道，但到目前为止还没有从文档中找到，是 ADLDS 是否真的支持 DirSync。如果确实如此，那么值得我花时间弄清楚我做错了什么。但是，如果它根本不支持 DirSync，那将是浪费时间。

以任何一种方式引用您的答案的来源将不胜感激，但归根结底，我宁愿得到一个没有任何来源的答案，根本没有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:12:18.183

亚当做到了。我无法验证 AD LDS 是否存在。

如果您在 System.DirectoryServices 领域做了大量工作，我推荐[.NET Developer's Guide to Directory Services Programming](https://rads.stackoverflow.com/amzn/click/com/0321350170)。它物有所值，甚至可以在 Kindle 上找到。如果您查看[pp.172-173](http://books.google.co.uk/books?id=kGApqjobEfsC&pg=PA172&lpg=PA172&dq=adam%20change%20tracking%20dirsync&source=bl&ots=p5sqSiSQL7&sig=3WvJnsHek2b0vuIf8Xq9yuMl_YI&hl=en&sa=X&ei=iDQ_UdHwOYfD7Absw4DYDw&ved=0CF0Q6AEwBg#v=onepage&q=adam%20change%20tracking%20dirsync&f=false)，可能会出现一些问题，包括您使用的客户端和访问权限，他们指出“默认情况下 [..] 没有 ADAM 安全主体将拥有 DS-Replication-默认情况下，Get-Changes 控制访问权限。这必须使用 ADAM 的 dsacls.exe 等工具添加到组或用户。（注意，你应该对 AD 有同样的问题，但你只需要已使用 UI 授予访问权限。或者更有可能是您的域管理员为您做的？）。第 174 页上有示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:44:55.303

是的，ADAM 应该支持 DirSync 协议...除非最近发生了我不知道的更改，或者我的记忆刚刚关闭（这很奇怪，但不是第一次 :)）。

你得到什么样的错误？您是否确认您拥有 DirSync 的权限？网络嗅探可能会产生更多线索......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T13:54:01.937

似乎没有。AD LDS 有它自己的简单同步工具：

" [ADAMSync 提供了一个简单的开箱即用 DirSync 解决方案，用于将 AD 数据复制到 LDS。它不像 ILM/FIM 那样处理复杂的数据转换，也不同步模式。](https://sharepoint.washington.edu/windows/Lists/Posts/Post.aspx?ID=126) "

# google-analytics - 在 Google Analytics（分析）中，有没有办法查看哪一天的交易最多？

> ID：15272630
> 
> 赞同：1
> 
> 时间：2013-03-07T13:36:30.323
> 
> 标签：google-analytics, report

我被要求报告一周中哪几天的订单最多。我可以通过获取日期范围并将每一天的总数相加来简单地手动执行此操作。

我的问题是，是否有一种无需手动步骤即可在 Google Analytics 中生成此报告的方法。也许有某种分布或条形图？

例如：

```
Monday   : 200 transactions
Tuesday  : 180 transactions
Wednesday: 173 transactions

...etc... 
```

有这样的报道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:58:37.213

转到“自定义”-> 新建自定义报告-> 维度“星期几”（或日期）-> 指标“交易”->（可选：添加您喜欢的过滤器）-> 保存。

# python - PIL 已安装，但 Django ImageField 无法正常工作

> ID：15272637
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:36:59.323
> 
> 标签：python, django

```
(env)user@user:~/job/django/webr$ sudo pip install PIL
Requirement already satisfied (use --upgrade to upgrade): PIL in /usr/lib/python2.7/dist-packages/PIL
Cleaning up... 
```

但如果我运行 syncdb 我有：

> CommandError：一个或多个模型未验证：content.desing：“img”：要使用 ImageFields，您需要安装 Python Imaging Library。[从http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)获取。

我使用 django 1.5。怎么了？

```
class Design(models.Model):
    title = models.CharField(max_length=255)
    desc = models.TextField()
    img = models.ImageField(upload_to="project_images") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:55:34.690

听起来好像您还没有`PIL`为运行 django 的 python 安装 - 我可以看到您已经安装在`PIL`某个地方，但是使用`sudo`命令以及您在其中的事实在没有*所有*`virtualenv`事实的情况下会变得非常混乱。

 *首先检查您是否确实已`PIL`安装以及您正在运行哪个 python

```
 $ which python
 /path/to/env/python

 $ pip freeze   # note NO sudo 
```

应该列出`PIL`和

```
 $ python -c "import Image" 
```

不应返回任何错误。

然后确保调用的python`django`与上述步骤相同

```
 $ python manage.py shell
 >>> import Image 
```

如果这些步骤中的任何一个导致错误，那么您离追踪这个错误更近了一步。*

# github - 将源代码从 Assembla 连接到 GitHub

> ID：15272639
> 
> 赞同：0
> 
> 时间：2013-03-07T13:37:00.100
> 
> 标签：github, assembla

我正在为我的项目（包括源代码提交）使用 Assembla（使用 git）。项目所有者希望将生成的源代码保存在他的 github 帐户中。如何将我的 Assembla 提交连接到 github？我只能找到相反的帖子。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:21:26.543

我为 Assembla 工作——我们即将发布一个允许你运行服务器端钩子的功能（现在没有 ETA）——这可以被利用。

我们还有 SSH 工具，可以让您在服务器上运行任意代码，可以签出并推送到 github。

但是，如果您想手动执行此操作，您可以将远程添加到您的本地 github 存储库并推送到它：

```
 git clone git@git.assembla.com:REPO.git
git add remote github git@github.com:user/REPO.git
git push github master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T13:15:13.147

嗨@Michael 和@timjeep，我手动尝试了这个，但是没有用。经过几次尝试，我意识到

```
git clone git@git.assembla.com:REPO.git
git remote add github git@github.com:user/REPO.git
git push github master 
```

有效。只需更改“添加”和“远程”的顺序即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T12:44:27.923

@timjeep 我目前在 Assembla 工作。我们发布了一个连接器工具，用于将您的 github 存储库与一个汇编存储库同步。如果您有兴趣，这是一个链接[http://blog.assembla.com/why-you-need-application-connectors](http://blog.assembla.com/why-you-need-application-connectors)

# javascript - 关闭 Google 地图 v3 中所有当前打开的信息窗口？

> ID：15272640
> 
> 赞同：0
> 
> 时间：2013-03-07T13:37:02.243
> 
> 标签：javascript, google-maps, google-maps-api-3

在 Google Maps v3 中，如何关闭所有当前打开的信息窗口？

[正如一些人所建议](https://stackoverflow.com/questions/2223574/google-maps-auto-close-open-infowindows)的那样，我不能只跟踪变量中最后打开的信息窗口，因为在我的设置中，每个标记都有唯一的文本，所以我必须将信息窗口绑定到它创建的位置的标记。

```
_.each(new_companies, function(c) {
  var latLng = new google.maps.LatLng(c.com_d_coo_y_wgs84,
      c.com_d_coo_x_wgs84);
  var marker = new google.maps.Marker({'position': latLng});
  marker.info = new google.maps.InfoWindow({
    content: getTooltipText(c)
  });
  google.maps.event.addListener(marker, 'mouseover', function() {
      marker.info.open(map, marker);
      // How to close all currently open info windows?
  });
  google.maps.event.addListener(marker, 'click', function() {
    marker.info.open(map, marker);
  });
  newco_markers.push(marker);
}); 
```

我想我可以遍历所有标记`newco_markers`并关闭每个标记的信息窗口，但这感觉效率低下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:54:21.590

[您应该尝试使用一个信息窗口并通过API 方法](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)更新其内容和位置：setPosition() 和 setContent()

编辑：

我假设您一次只需要一个信息窗口。如果您需要多个，那么您可以尝试保留一个映射（对象）或数组，并引用打开的信息窗口。

# java - 在存储之前和从 KeyStore 检索之后，SecretKey 的 Base64 编码值不同

> ID：15272645
> 
> 赞同：2
> 
> 时间：2013-03-07T13:37:25.473
> 
> 标签：java, encryption, encoding, base64, keystore

我真的很困惑为什么编码值不同

这是完整的代码

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.security.Key;
import java.security.KeyStore;

import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;

import org.bouncycastle.util.encoders.Base64;

public class KeyStoreDemo {

    private static final String KEY_STORE_TYPE = "JCEKS";
    private static final String KEY_STORE_NAME = "sampleKeyStore.store";
    private static final String KEY_STORE_PASSWORD = "letmein";

    public static void main(String[] args) throws Exception {
        File storeFile = new File(KEY_STORE_NAME);
        storeFile.createNewFile();

        //Create a keystore
        createKeyStore(KEY_STORE_TYPE, storeFile,KEY_STORE_PASSWORD);

        //Generate a key and store it in keystore
        KeyStore keyStore = loadKeyStore(KEY_STORE_TYPE,storeFile,KEY_STORE_PASSWORD);      

        // Get the KeyGenerator     
        KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");keyGenerator.init(128); Key keytemp = keyGenerator.generateKey();       
        System.out.println("key- Base64 before:"+Base64.encode (keytemp.getEncoded()) );
        //createSecretKeyAndStore( keyStore, keytemp, "samplekey" ,"samplepwd");
        createSecretKeyAndStore(storeFile, keyStore, KEY_STORE_PASSWORD, keytemp, "samplekey" ,"samplepwd");

        Key key = getKeyFromStore(keyStore, "samplekey", "samplepwd");
        System.out.println("key- Base64  after :"+Base64.encode (key.getEncoded()) );

    }   

    private static KeyStore createKeyStore(String keyStoreType,File keyStoreFile,String keyStorePassword) throws Exception{     

        KeyStore keyStore = KeyStore.getInstance(keyStoreType);
        keyStore.load((InputStream) null, keyStorePassword.toCharArray());

        // Write KeyStore to disk
        final FileOutputStream fileOutputStream = new FileOutputStream(keyStoreFile);

        try {
            keyStore.store(fileOutputStream, keyStorePassword.toCharArray());
            fileOutputStream.flush();
        } finally {
            fileOutputStream.close();
        }       

        return keyStore;
    }

    private static KeyStore loadKeyStore(String keyStoreType,File keyStoreFile,String keyStorePassword) throws Exception{
        KeyStore keyStore = KeyStore.getInstance(keyStoreType);
        keyStore.load((InputStream) new FileInputStream(keyStoreFile), keyStorePassword.toCharArray());     
        return keyStore;
    }

    private static void createSecretKeyAndStore(File  keyStorefile ,KeyStore keyStore,String keyStorePwd, Key key, String keyAlias ,String keyAccessPassword) throws Exception{
        keyStore.setKeyEntry(keyAlias, key, keyAccessPassword.toCharArray(), null);

        // Write KeyStore to disk
        final FileOutputStream fileOutputStream = new FileOutputStream(keyStorefile);

        try {
            keyStore.store(fileOutputStream, keyStorePwd.toCharArray());
        } finally {
            fileOutputStream.close();
        }
    }

    private static Key getKeyFromStore(KeyStore keyStore, String keyAlias,String keyAccessPassword) throws Exception {
        Key  keyFromStore = null;
        keyFromStore =  keyStore.getKey(keyAlias, keyAccessPassword.toCharArray());
        return keyFromStore;
    }   

} 
```

**结果**

```
key- Base64 before:[B@c7e553
key- Base64  after :[B@1ac04e8 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:02:38.023

`Base64.encode`返回 a `char[]`- 你得到两个单独的数组这一事实并没有告诉你数组中的值是不同的，只是它们是两个单独的实例。

您需要做的是比较返回的实际数组以检查它们是否包含相同的编码值：

```
boolean areEqual = Arrays.equals(Base64.encode (keytemp.getEncoded()), 
                                 Base64.encode (key.getEncoded())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:41:13.793

那是因为，你的印刷品不是什么`the Encoded String`，它是一个`toString value of the char[] array`。

```
System.out.println("key-Base64 before:"+new String(Base64.encode(keytemp.getEncoded())));

System.out.println("key-Base64  after :"+new String(Base64.encode(key.getEncoded())) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:10:51.847

好吧，在我看来，您显示的结果输出不支持您得出的结论。

以下行不打印 key 的 base64 表示：

```
System.out.println(Base64.encode (key.getEncoded())); 
```

它打印的是对 Base64 转换返回的 byte[] 实例调用 toString() 的结果。在 byte[] 上调用 toString() 根本不会将 byte[] 转换为其字符串表示形式。

因此，您可以从结果中支持的唯一结论是这两个 byte[] 实例不是 JVM 内部的同一个对象实例，考虑到您正在做的事情，这似乎是合理的。

如果您想通过逐字节比较它们的内容来比较 byte[] 实例，您可以使用

```
Arrays.equals(tempKey.getEncoded(), key.getEncoded()) 
```

或者比较编码键的 Base64 ：

```
Arrays.equals(Base64.encode(tempKey.getEncoded()), Base64.encode(key.getEncoded())) 
```

如果要比较字符串表示，则需要将 byte[] 转换为字符串，这很容易看出 base64 仅使用 ASCII 安全值：

```
String tempKeyEncoded = new String(Base64.encode(tempKey.getEncoded), "US-ASCII");
String keyEncoded = new String(Base64.encode(key.getEncoded), "US-ASCII");
System.out.println(tempKeyEncoded.equals(keyEncoded)); 
```

希望这可以帮助。

# ios - NSAttributedString、TTTAttributedLabel：下划线不适用于 Autoshrink

> ID：15272646
> 
> 赞同：1
> 
> 时间：2013-03-07T13:37:27.230
> 
> 标签：ios, cocoa-touch, nsattributedstring

我正在尝试使用[`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel)以下代码为标签添加下划线：

```
[self.opponentUsername setText:self.opponentUsername.text afterInheritingLabelAttributesAndConfiguringWithBlock:^NSMutableAttributedString *(NSMutableAttributedString *mutableAttributedString) {
    [mutableAttributedString addAttribute:(NSString *)kCTUnderlineStyleAttributeName value:[NSNumber numberWithInt:1] range:(NSRange){0, [mutableAttributedString length]}];
    return mutableAttributedString;
}]; 
```

在 Interface Builder 中禁用 Autoshrink 时，它可以正常工作。但是，一旦我启用 Autoshrink，标签就会失去我在 IB 中应用的白色，并且下划线完全消失。

我在这里做错了什么？TIA

仅供参考，提供使用某些自定义库的解决方案的答案`TTTAttributedLabel`也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:16:28.573

你很好。

TTTAttributedLabel 存在一个问题，当它缩小字体大小时，它会删除应用的任何其他属性。

有一个修复程序可以在调整大小的同时保留其他属性。

这是我的修复：

[https://github.com/mattt/TTTAttributedLabel/pull/187](https://github.com/mattt/TTTAttributedLabel/pull/187)

# android - OpencCV+Android+eclipse Windows 7 安装

> ID：15272647
> 
> 赞同：-3
> 
> 时间：2013-03-07T13:37:29.483
> 
> 标签：android, opencv, installation

我想知道如何在 Windows 7 64 位的 Eclipse 中安装 OpenCV。我想使用 OpenCV 函数来编写我的 android 应用程序。我的计划是用java代码编程。我尝试了各种指令，但都没有奏效。有谁知道如何设置一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:45:41.440

它非常简单：

1.  下载 OPEN CV 的 android sdk
2.  将sdk解压到指定路径
3.  打开eclipse import现有的android项目到工作区选择位置\sdk\java\

就是这样，您可以使用现在存在于您的工作区中的 OpenCV android 库来开发

# jquery - JQuery if / else with show/hide

> ID：15272648
> 
> 赞同：1
> 
> 时间：2013-03-07T13:37:30.727
> 
> 标签：jquery, class, if-statement, show-hide

我有一些 div ( `title`)。当我按下时，可以说`div1`，字幕显示。当我按下另一个 div 时，可以说`div2`，然后`div1`隐藏并`div2`显示。

我想要的是，当我按下`div1`，然后`div1`再次按下时，它会隐藏起来。您可以在 if/else 语句中看到我尝试过的内容。

希望有人可以在这里帮助我。

```
$(document).ready(function()
{
    $(".title").click(function()
    {
        var $element = $(this);

        $(".open").removeClass("open");
        $('.subtitle').hide(500);

        $element.toggleClass('open');
        $element.children('.subtitle').toggle(500);

        if($(this).hasClass() == "open")
        {
            $element.children(".subtitle").hide(500);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:51:56.930

在这种情况下，切换是正确的方法。

您可能还想查看此 [可见性/隐藏信息。](https://stackoverflow.com/q/178325/2136123/ "可见性/隐藏信息")

它涵盖了如何检查 CSS 可见性、CSS 显示以及实际元素的可见性。从那些你可以根据所讨论的“隐藏”执行任何标准条件语句。在某些情况下，有些人可能比其他人工作得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:41:23.230

`$(this).hasClass() == "open"`应该`$(this).hasClass('open')`

在里面`if`你不应该显示字幕而不是隐藏它吗？

# javascript - 在 jQuery 移动应用程序中包含 three.js

> ID：15272651
> 
> 赞同：0
> 
> 时间：2013-03-07T13:37:50.927
> 
> 标签：javascript, jquery, mobile, three.js

您好，感谢您的回复。

首先，我必须告诉你，由于 XSL API，我正在将 XML 文件转换为 HTML 文件，这对我来说实际上不是问题。

我当前的代码：

```
[...]
<xsl:template match="/">
    <html>
        <head>              
            <meta name="viewport" content="width=device-width, initial-scale=1"/> 
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
            <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
            <script src="http://www.html5canvastutorials.com/libraries/Three.js"></script>
        </head> 
        <body>              
            <xsl:apply-templates select="STAGE"/>
        </body>         
    </html>     
</xsl:template>

<xsl:template match="STAGE">
    <xsl:apply-templates select="PAGE"/>        
</xsl:template>

<xsl:template match="PAGE">
    <xsl:variable name="T">
                <xsl:value-of select="TITLE"/>
    </xsl:variable>

    <!-- page -->
    <div data-role="page" id="{@id}" data-theme="b">
        <!-- header -->
        <div data-role="header">
            <h1>            
                <xsl:value-o select="$T"/>                                      
            </h1>   
        </div>
        <!-- /header -->

        <!-- content -->
        <div data-role="content">   
            <!--<xsl:apply-templates select="COMPONENT"/>-->
        </div>
        <!-- /content -->

                            <!-- HERE IS MY PROBLEM -->
            <script src="myJS.js"></script> 

    </div>
    <!-- /page -->      

</xsl:template>
    [...] 
```

我的 javaScript 代码就是我告诉你的教程的例子：

```
window.requestAnimFrame = (function(callback){
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback){
        window.setTimeout(callback, 1000 / 60);
    };
})();

function animate(lastTime, angularSpeed, three){
    // update
    var date = new Date();
    var time = date.getTime();
    var timeDiff = time - lastTime;
    var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
    three.cube.rotation.y += angleChange;
    lastTime = time;

    // render
    three.renderer.render(three.scene, three.camera);

    // request new frame
    requestAnimFrame(function(){
        animate(lastTime, angularSpeed, three);
    });
}

window.onload = function(){
    var angularSpeed = 0.2; // revolutions per second
    var lastTime = 0;

    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // camera
    var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.z = 700;

    // scene
    var scene = new THREE.Scene();

    // cube
    var colors = [0x0000ff, 0x00ff00, 0x00ffff, 0xff0000, 0xff00ff, 0xffff00];
    var materials = [];

    for (var n = 0; n < 6; n++) {
        materials.push([new THREE.MeshBasicMaterial({
            color: colors[n]
        })]);
    }

    var cube = new THREE.Mesh(new THREE.CubeGeometry(300, 300, 300, 1, 1, 1, materials), new THREE.MeshFaceMaterial());
    cube.overdraw = true;
    scene.add(cube);   

    // create wrapper object that contains three.js objects
    var three = {
        renderer: renderer,
        camera: camera,
        scene: scene,
        cube: cube
    };

    animate(lastTime, angularSpeed, three);
}; 
```

当我从“经典”html 代码（没有 jQuery 移动库）调用这个 .js 文件时，就可以了。但是当我包含 .js jQuery mobile 时，立方体不会出现......

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:51:45.163

尝试从 html 文档的正文而不是头部加载 three.js 库。

# c# - WPF UI 更新线程问题

> ID：15272652
> 
> 赞同：2
> 
> 时间：2013-03-07T13:37:51.947
> 
> 标签：c#, wpf, multithreading, asynchronous

**更新**

我已经解决了这个问题。我发现我没有正确同步对折线和图表对象的访问。我没有在处理程序期间锁定它们，而是仅在使用它们的那一刻锁定它们。我认为动态数据显示库中的某些东西正在使用延迟执行并在我没想到时尝试访问其中一个对象。

TL;DR：正确同步锁。

* * *

我目前正在开发一个使用 WPF 来可视化某个类库中的算法的 GUI。我在 GUI 中使用的所有控件要么是标准 WPF，要么来自 Microsoft [Dynamic Data Display](http://research.microsoft.com/en-us/projects/ddd/)库。

我遇到了非常常见**的“调用线程无法访问此对象，因为另一个线程拥有它”**错误。我已经进行了大量搜索，但我自己找不到解决方案。

现在，如果线程不拥有它，我对如何在图表中添加线条有点困惑。我已经尝试使用该站点上的许多其他答案所建议的调度程序，但它并没有解决这个问题。

* * *

摘要窗口旨在作为主窗口的子窗口，在模拟运行之前打开并实时显示数据。

模拟器发布了许多异步处理的事件（在内部，它使用 BeginInvoke 和 EndInvoke）。这会在这种情况下导致问题吗？

摘要视图模型注册了许多可视化，它们依次创建自己的控件并将它们添加到摘要窗口提供的画布中。

代码的一个非常简短的大纲如下

```
public class MainWindowModel
{
    //...
    public async void RunSimulation()
    {
        WindowService.OpenWindowFor<SimulationSummaryViewModel>(SimSummaryVM);
        await Simulator.Run();
    }
}

public class SimulatorSummaryViewModel
{
    //...
    public SimulatorSummaryViewModel()
    {
        Visualisations.Add(new RealTimeChart());
    }
    //...
}

public class RealTimeChart : IVisualisation
{
    // ...
    private ChartPlotter _Chart; //From Dynamic Data Display library

    //Handles adding information to the current line 
    private void OnSimulatorStepHandler(Args a)
    { 
      /* The exception occurs in here, when adding a data point, 
         whilst another handler is adding a line to the chart.
         I have tried adding a lock to the chart and line objects, but it had no effect
      */ 
    }

    //Handles adding the current line to the chart
    private void OnSimulatorRepetitionComplete(Args a)
    {
        //lineToAdd is an EnumerableDataSource<DataPoint>.
        //DataPoint is a simple class with two primitive properties.
        _Chart.Dispatcher.Invoke(new Action(()=>
        {
            _Chart.AddLineGraph(lineToAdd);
        }));
    }
}

public class SummaryWindow : Window
{
    // ...
    public SummaryWindow()
    {
        // ...
        foreach(IVisualisation Vis in ViewModel.Visualisations)
        {
            Vis.Draw(this.VisCanvas);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:08:15.637

我假设 OnSimulatorRepetitionComplete 是从另一个线程调用的，从而使对图表的调用发生在该线程中。

在 WPF 中，所有的 GUI 操作都需要在 Dispatcher Thread 中完成。在方法中的内容周围添加以下代码：

```
Dispatcher.BeginInvoke(new Action(() =>
{

})); 
```

所以它变成了这样：

```
private void OnSimulatorStepHandler(Args a)
{ 
    Dispatcher.BeginInvoke(new Action(() =>
    {
        // Add your code here
    }));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:19:48.493

我已经解决了这个问题，所以我将在这里发布我的解决方案。

* * *

由于模拟器发布的异步处理事件和可视化中隐含的同步处理（发生多个步骤，然后重复结束，然后重复），需要更好地同步访问图表和线条。以下是我的（真实）原始代码。

我正在使用的图表控件推迟使用`seriesToAdd`集合（引用行数据），直到添加图表。由于线数据（和图表）在处理程序的生命周期内没有被锁定，当线数据没有被锁定（由我）但在图表控件中使用时，就有机会访问线数据。

我不会发布生成的代码，因为它只是移动锁来封装完整的方法。

```
[STAThread]
private void OnRepetitionComplete(Evolve.Core.Simulation.RepetitionResult Result)
{
    //Convert the data series to something usable for the chart
    EnumerableDataSource<DataPoint> seriesToAdd = new EnumerableDataSource<DataPoint>(_obCurrentRepetitionDataSeries);

    //Translate the data point properties in to X&Y coords on the graph
    seriesToAdd.SetXYMapping(DP => new System.Windows.Point(DP.Step, DP.Number));

    //Get the line colour and add the line to the chart
    System.Windows.Media.Color lineColor = GetLineColor(Result.ReasonForCompletion);

    lock (chartLockObject)
    {
        lock (lineLockObject)
        {
            _obChart.Dispatcher.Invoke(new Action(() =>
            {
                _obChart.AddLineGraph(seriesToAdd, lineColor, 0.5d);
            }));

            //Renew the data series
            _obCurrentRepetitionDataSeries = new DataSeries();
        }
    }
}

private void OnStep(int StepNumber, int HealthyNodes, int MutantNodes)
{
    //Make sure there's a data series to add to
    if (_obCurrentRepetitionDataSeries == null)
    {
        _obCurrentRepetitionDataSeries = new DataSeries();
    }

    lock (lineLockObject)
    {
        //Add the step to the series
        _obCurrentRepetitionDataSeries.Add(new DataPoint() { Number = MutantNodes, Step = StepNumber });
    }
} 
```

# css - 媒体查询在设备上不起作用

> ID：15272653
> 
> 赞同：0
> 
> 时间：2013-03-07T13:37:52.727
> 
> 标签：css, android-layout, media-queries, mobile-website, blogger

我正在尝试将媒体查询应用于博客模板。

```
@media all and (max-width: 600px)
  { 
     //styling here
  } 
```

当我调整窗口大小时，这在桌面浏览器上运行良好。但是，当我在移动设备（android、iPhone）上测试它时，它不起作用并显示桌面版本。我看过[这篇](http://webdesignerwall.com/tutorials/css3-media-queries)文章，但没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:24:14.687

您是否`viewport`在`html`.You 中指定 。您将需要这个才能渲染样式。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

你可以在这里阅读：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:44:34.740

如果您使用的是原版以外的任何 iPhone，则宽度为 640 像素。如今，大多数 Android 手机都在附近，甚至更多。因此，您的`max-width: 600px`查询范围太窄，无法应用于任何这些手机。

您可以通过增加`max-width`参数来纠正此问题，以在包括手机的同时仍排除桌面。将 Twitter Bootstrap 的宽度用于移动设备，您应该尝试`max-width: 767px`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:41:09.063

似乎此时您提到的代码不存在，并且隐藏了 y 轴。如果确实存在，那么只有 1 个。您需要针对较小的宽度进行更多媒体查询。请参阅我的[blogspot 站点](http://www.ilovetrolls.org/)（它是一个自定义域，所以它没有 .blogspot），它有许多媒体查询，它们的宽度要小得多。

为媒体查询中的各种元素设置`max-width`和设置`max-height`更小的宽度，您肯定会看到它起作用。

提示：要进行测试，您无需**在**android/ios 中打开您的网站，只需调整您桌面上的窗口或您这个[网站](http://www.infobyip.com/testwebsiteresolution.php)的大小。

# javascript - 当我切换到我的网站的 SSL 加密时，我的 youtube 视频停止播放

> ID：15272657
> 
> 赞同：2
> 
> 时间：2013-03-07T13:38:22.470
> 
> 标签：javascript, youtube, youtube-api

我有一个在 iframe 中播放 youtube 视频的网站。它还使用 javascript 命令控制它们，使它们暂停、重新启动等。这个站点运行良好，但最近我购买了 SSL 证书以使其更安全。现在 youtube 视频将不再播放。我认为可能原因是使用加密页面需要加密视频，但即使这是真的，我用来制作 iframe 的代码也不允许任何 https 规范。代码类似于：

```
player = new YT.Player('player', {
                height: '592',
                width: '789',
                videoId: 'Hd8MFmUDbg4',
                wmode: 'transparent',
                playerVars: { 'controls': 1, 'fs': 0, 'autoplay': 1, 'autohide': 0, 'modestbranding': 1, 'rel': 0, 'showinfo': 0},
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            }); 
```

所以问题是 -**有没有办法在使用 SSL 的网站中播放 youtube 视频？** （我不能使用常规的 iframe 语法，因为将 iframe 与 asp.net 页面结合并保持网站安全存在一个错误。必须通过上述“新”语句来完成。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:24:29.473

当您通过 HTTP 引用 YT JS API 文件时，您可能会遇到问题。尝试引用 https 文件。

只需确保所有库都是从 HTTPS 加载的 :)

（请参阅我的评论[当我切换到我的网站的 SSL 加密时，我的 youtube 视频停止播放](https://stackoverflow.com/questions/15272657/my-youtube-videos-stopped-playing-when-i-switched-to-ssl-encryption-of-my-site##comment-21545533)）

现在请将此问题标记为已回答；）

# android - 事件侦听器在片段中不起作用

> ID：15272658
> 
> 赞同：0
> 
> 时间：2013-03-07T13:38:26.653
> 
> 标签：android, android-fragments, android-fragmentactivity

当我单击*button1* `Button`时，我看不到任何`Toast`. 我禁用了该`EditText`活动，即使那样我也看不到它。 **“View1”类是 pagerView 的一部分。**

```
public class View1 extends Fragment{

     ImageView album;
     Button b1;

    public View1(){}

   public void OnCreate(Bundle SavedInstanceState) {
         super.onCreate(SavedInstanceState);

                b1.findViewById(R.id.button1);

                b1.setOnClickListener(new OnClickListener(){
                        @Override
                        public void onClick(View v) {
                            Toast.makeText(getActivity().getApplicationContext(), "asdasd", Toast.LENGTH_SHORT).show();     
                        }
                    });
   }   

        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            return inflater.inflate(R.layout.view1, container, false);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:18:31.363

我建议您查看 Android 生命周期图表以获取`Fragment`.

您所谓`OnCreate`的方法没有被调用，因为它不是`onCreate`a 的回调`Fragment`。为了避免这种类型的错误，请使用`@Override`带有正确方法的注释，以确保您覆盖该方法，而不仅仅是创建一个新方法。

即使您的方法会被调用，您的代码也会抛出 a`NullPointerException`因为您没有初始化`Button`（甚至没有创建`onCreateView`回调，因为在 之后调用回调`onCreate`）。您的代码应如下所示：

```
public class View1 extends Fragment {

    ImageView album;
    Button b1;

    @Override  
    public void OnCreate(Bundle SavedInstanceState) {
         super.onCreate(SavedInstanceState);
    }   

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.view1, container, false);
        b1 = (Button) v.findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener(){
             @Override
             public void onClick(View v) {
                Toast.makeText(getActivity(), "asdasd", Toast.LENGTH_SHORT).show();     
             }
        });
    }
        return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:02:43.197

您可以将您的侦听器移动到 onCreateView 或 onActivityCreated，然后它应该可以工作

# asp.net - ASP.NET 文件上传控件 File.Exists 总是返回 false

> ID：15272660
> 
> 赞同：0
> 
> 时间：2013-03-07T13:38:29.793
> 
> 标签：asp.net, file, file-upload, upload

在我的应用程序中，我必须让用户将文件上传到系统中，并且我有以下代码：

```
 <asp:FileUpload ID="CSVFileUpload" runat="server" CssClass="TextInput" Width="250" />
   <asp:LinkButton ID="lbnUploadCSVFile" runat="server" CssClass="MainLinkWithSpaces" OnClick="lbnUploadCSVFile_Click">Upload CSV file</asp:LinkButton>
   <asp:RequiredFieldValidator ID="RequiredFieldValidator1" CssClass="warning" runat="server" ControlToValidate="CSVFileUpload" ErrorMessage="Please Upload a File!"></asp:RequiredFieldValidator>
   <asp:RegularExpressionValidator ID="RegularExpressionValidator1" CssClass="warning" runat="server" ControlToValidate="CSVFileUpload"
                ErrorMessage="Please make sure you upload a csv file!" ValidationExpression=".*\.csv$"></asp:RegularExpressionValidator>
        <asp:Label ID="lblUploadError" Runat="server" Visible="True" CssClass="warning" Text=""></asp:Label> 
```

在后面的代码中，我总是检查上传的文件是否存在，但我的问题是 File.Exists 总是返回 false，尽管文件存在于磁盘上的指定位置。

```
 protected void lbnUploadCSVFile_Click(object sender, EventArgs e)
  {
        lblUploadError.Text = "";
        if (CSVFileUpload.HasFile)
        {
            if (CSVFileUpload.FileName.ToString() != String.Empty)
            {
                // make sure the uploaded file exists     
                if(File.Exists(CSVFileUpload.FileName))
                {
                  // upload file
                }
             }
         }
  } 
```

这可能是什么原因？我完全被这个绊倒了。我还提到，当使用 localhost 我的文件存在并且它成功上传它。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T09:54:51.423

我也有同样的问题。但是我在其他页面中使用了相同的代码，它运行良好，但在此页面中它不起作用。有一点区别。在这里，我在一个 HTML 表格中使用我的上传控件，它们都在一个 aspx 面板中。我也添加了触发器，就像我以前的触发器一样。当我将上传控制放在表格之外（在面板中）时，它可以工作。

```
<asp:Panel ID="Topic_Pnl" runat="server">
    <table>
    <tr>
           <td colspan="2" height="20"> <asp:FileUpload ID="my_Uld" runat="server" TabIndex="15" />
<asp:CheckBox ID="myChB" runat="server" AutoPostBack="True" OnCheckedChanged="myChB_CheckedChanged" TabIndex="20" Text="ok" />
</td>
      </tr>
</table>
</panel>
```

当用户单击复选框时，事件运行，我检查上传的文件并保存它。但总是检查 if (my_Uld.HasFile) 的答案是否为 false

# wordpress - Wordpress 验证错误元素 dl 缺少子元素 dd 的必需实例

> ID：15272669
> 
> 赞同：0
> 
> 时间：2013-03-07T13:38:49.180
> 
> 标签：wordpress, gallery, shortcode

```
<dl class='gallery-item'>
<dt class='gallery-icon'>
                <a href='http://xxx.lt/wp-content/uploads/2013/02/snow-004.jpg' title='snow 004'><img width="200" height="81" src="http://xxx.lt/wp-content/uploads/2013/02/snow-004-200x81.jpg" class="attachment-thumbnail" alt="snow 004" /></a>
            </dt>
</dl> 
```

在 wordpress 中，我插入 shartcode `[gallery link="file" columns="3"]`，使用 W3C 验证站点时，出现错误`Element dl is missing a required instance of child element dd`。这是一个wordpress错误？如何解决这个错误？也许添加标签`gallery_shortcode()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T16:34:21.080

答案是 Wordpress 使用 dd 作为图像标题，请参见 media.php 中的代码。为图库中的每个图像添加标题，然后通过 CSS 中的“不显示”删除标题。

```
<div class="my_class">    
 <div class='gallery'>
  <dl class='gallery-item'>
   <dt class='gallery-icon landscape'> 
    <img width="190" height="190" src="XXXX" class="attachment-thumbnail" alt="X" />
   </dt>
   <dd class='wp-caption-text gallery-caption'>Some Caption</dd>
  </dl>
 </div>
</div> 
```

CSS：

```
.my_class .wp-caption-text.gallery-caption{
 display: none;
} 
```

以防万一其他人正在寻找这个。有点乱，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-27T20:37:42.053

我知道这个问题很老，但我刚才遇到了同样的问题，在搜索谷歌时，这是显示的第一页。

html 验证器给了我关于画廊的错误，我可以通过将以下代码添加到 functions.php 来修复它——

```
add_theme_support( 'html5', array( 'comment-list', 'comment-form', 'search-form', 'gallery', 'caption', 'style', 'script' ) ); 
```

# c# - 更新一对一关系不会保存在实体框架中

> ID：15272670
> 
> 赞同：1
> 
> 时间：2013-03-07T13:38:50.713
> 
> 标签：c#, entity-framework, asp.net-mvc-4

使用实体框架，我在 A 类和 B 类之间构建了一对一的关系（为简洁起见）。

```
class A
{
    // Some other stuff

    // Relationship to class B
    public B B { get; set; }
}

class B
{
    // Some other stuff

    // Relationship to class A
    [Required]
    public A A { get; set; }
} 
```

当我从我创建的上下文中调用 A 类的特定实体时，我想给它一个对 B 类新实例的引用：

```
// Again, simplified for brevity
A a = context.A.First()

B b = new B();

// In a roundabout way, they both get a reference to each other
a.B = b;
b.A = a;

context.Entry(a).State = EntityState.Modified;

context.SaveChanges(); 
```

我的问题是，一旦我这样做了，然后我回到执行此代码的函数，对象 A 没有对象 B 的引用，直到我触发断点并查看`context.B`'s 列表。`context.B`B 类的列表包含 A 应该指向的对象，但 A 在我断点并查看列表之前没有它的引用。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:17:25.040

您是否尝试过在类定义中创建`A`和`B`属性？`virtual`请反馈，我不太确定，但这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:57:46.523

您`A`从上下文中提取，但我认为您需要以上下文理解的方式告诉它与 B 的新关系，例如：

```
context.Bs.Add(b); //context now knows about the new b entity
a.B = b;
context.Entry(a).State = EntityState.Modified; //I think this is needed only of a's scalar properties have changed? but there is no harm in adding it anyway
context.SaveChanges(); 
```

当 b 确实需要设置为已添加时，设置`a.B=b;`并将a 的对象图中的任何未设置实体设置为已修改（如 B）。`context.Entry(a).State = EntityState.Modified;`使用`Add()`会做到这一点。

# algorithm - 密码算法

> ID：15272673
> 
> 赞同：-3
> 
> 时间：2013-03-07T13:38:56.903
> 
> 标签：algorithm, hash, passwords

谁能告诉我以下密码使用什么类型的算法/哈希函数？

密码：`scrambled text`

```
hhhhhhhhhhhhhhh : .!_-*/P_.!_-*/P
iiiiiiiiiiiiiii : / ^,+.Q^/ ^,+.Q
jjjjjjjjjjjjjjj : ,#]/(-R],#]/(-R
kkkkkkkkkkkkkkk : -"\.),S\-"\.),S
lllllllllllllll : *%[).+T[*%[).+T 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:45:03.173

它看起来像

```
char[i] = someMap[i%6, char[i%6]] 
```

子`someMap[i]`图顺序取自ascii。

您不必猜测复制它的确切公式：`c`索引处的 ascii 代码字符`i%6`总是给出相同的字符，因此，通过 127 个测试（如果您想处理更多字符，则可以更多），您可以构建自己的地图维度`127`x `6`。

请注意，您的小测试数据不可能确保没有累积函数，其中排列可能是先例字符的函数。

# c# - 从文件中读取整数的简单方法

> ID：15272675
> 
> 赞同：4
> 
> 时间：2013-03-07T13:38:59.183
> 
> 标签：c#, linq, casting

我正在尝试读取一个文件，该文件本质上是一个整数列表，由一行分隔。显然，文件输入永远不能被信任，所以我需要过滤掉非整数。

*   1
*   2
*   3
*   4

我知道`as`运算符通常会在可以转换的情况下进行转换，然后分配一个空值，但是因为`int`不可为空，所以情况并非如此。我想也许我可以投到`Nullable<int>`. 我从来没有真正深入研究过这个，我想也许我可以这样做：

```
var lines = File.ReadAllLines("");
var numbers = lines.Select(line => line as int?).Where(i => i != null); 
```

我知道我可以通过以下方式解决这个问题：

```
var numbers = lines.Select(line =>
                                  {
                                    int iReturn = 0;
                                    if (int.TryParse(line, out iReturn ))
                                      return iReturn;
                                    else
                                      return null;        
                                  }).Where(i => i != null); 
```

我也有可能将其作为扩展方法。

我只是在寻找一种简洁、简洁的方式来在语句中进行强制转换，并了解为什么我的代码无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:47:13.183

我一直在使用这种简单的扩展方法：

```
public static int? TryGetInt(this string item)
{
    int i;
    bool success = int.TryParse(item, out i);
    return success ? (int?)i : (int?)null;
} 
```

然后很简单：

```
 var numbers = lines.Select(line => line.TryGetInt())
                    .Where(i => i.HasValue)
                    .Select(i => i.Value); 
```

您也可以`int.TryParse`在没有扩展名的情况下使用，但这是未记录的，因此将来可能会停止工作：

```
int i = 0;
var numbers = lines.Where(line => int.TryParse(line, out i))
                   .Select(line => i); 
```

**编辑**

> “也了解为什么我的代码无效”

相关代码：

```
if (int.TryParse(line, out iReturn ))
  return iReturn;
else
  return null; 
```

如果您更换它会起作用

```
else
    return null; 
```

和

```
else
    return (int?)null; 
```

因为您要返回`int`，但`null`不能隐式转换为`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:43:45.750

没有一种简洁的方法可以做到这一点，因为在这里你不需要强制转换（你*不能*强制转换）——你需要从一种类型转换为另一种类型。类型当然是`int`and `string`（所以不完全是“任何”类型），但在一般情况下，不相关类型之间的任何转换都不能“像那样”完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:43:25.557

没有。C# 在将字符串更改为数字时刻意谨慎。

您可以使用 foreach 循环使代码更短（不再有空值）

```
var numbers = new List<int>();

foreach(string line in lines)
{
    int n;
    if (int.TryParse(line, out n))
        numbers.Add(n);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:47:34.387

您可以创建和扩展方法

```
public static int? ToInt(this string s, int default){  ... } 
```

并在 LINQ 中使用它：

```
var lines = File.ReadAllLines(path); 
var numbers = lines.Select(line => line.ToInt())
                   .Where(i => i != null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:52:11.680

如果我理解正确并且您只想过滤非整数行，也许正则表达式是一种选择？

```
var lines = File.ReadAllLines("");
var numbers = lines.Where(i => Regex.IsMatch(i, "[0-9]+")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T13:55:48.113

这是我想出的最好的：

使用此扩展方法：

```
public static class Int32Extensions
    {
        public static int? ParseOrDefault(this string text)
        {
            int iReturn = 0;
            if (int.TryParse(text, out iReturn))
            {
                return iReturn;
            }
            return null;
        }
    } 
```

像这样：

```
var query = lines.Select(x => x.ParseOrDefault()).Where(x => x.HasValue); 
```

# cocoa - 未在 PDFView 子类上调用 drawRect

> ID：15272681
> 
> 赞同：0
> 
> 时间：2013-03-07T13:39:03.537
> 
> 标签：cocoa, subclass, nsview, drawrect, pdfview

我有一个自定义`PDFView`子类并已覆盖`-mouseDown`等`-mouseDragged`以在视图上绘制一个矩形。这是我正在使用的代码：

```
@implementation MyPDFView {
    NSPoint clickLocation;
    NSRect selection;
}

- (void)mouseDown:(NSEvent *)theEvent {
    NSPoint clickLocationOnWindow = [self.window mouseLocationOutsideOfEventStream];
    clickLocation = [self convertPoint:clickLocationOnWindow fromView:nil];

    NSLog(@"%@", NSStringFromPoint(clickLocation));
}

- (void)mouseDragged:(NSEvent *)theEvent {
    NSPoint mouseLocationOnWindow = [self.window mouseLocationOutsideOfEventStream];
    NSPoint currentLocation = [self convertPoint:mouseLocationOnWindow fromView:nil];

    CGFloat lowerX = fmin(clickLocation.x, currentLocation.x);
    CGFloat lowerY = fmin(clickLocation.y, currentLocation.y);
    CGFloat upperX = fmax(clickLocation.x, currentLocation.x);
    CGFloat upperY = fmax(clickLocation.y, currentLocation.y);

    selection = NSMakeRect(lowerX, lowerY, upperX-lowerX, upperY-lowerY);

    [self setNeedsDisplay:YES];

    NSLog(@"%@", NSStringFromRect(selection));
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
    NSLog(@"drawRect");

    NSBezierPath *bp = [NSBezierPath bezierPathWithRect:selection];
    [[NSColor blueColor] set];
    [bp fill];
}

@end 
```

计算`NSRect`正确，但是当我调用时`[self setNeedsDisplay]`，`-drawRect`永远不会调用，并且永远不会绘制矩形。

有什么理由`-drawRect`永远不会在 PDFView 子类上调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T15:55:24.190

我有一个类似的用例。根据文档，改写 PDFView 的 drawPage 方法。继续在 PDFView 上调用 setNeedsDisplay。它有效，但它有点慢。现在改为覆盖视图。

# c++ - 创建动态二维数组

> ID：15272696
> 
> 赞同：1
> 
> 时间：2013-03-07T13:39:44.550
> 
> 标签：c++, arrays, dynamic-arrays, dynamic-allocation

我需要有一个二维数组。它的宽度约为 900。它的高度也是如此（相同的宽度值）。

处理两个循环（一个用于宽度，一个用于高度），我真的需要访问我将处理的 900X900 图像的所有像素。

数组的大小太大（指定原始数和列数时出错）。

我考虑过使用动态数组来建立它，以优化计算时间并在每次处理两个循环上的一个像素时释放内存。

但我真的找不到我想要声明二维动态数组的语法（malloc，设置数组元素值和释放内存）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:58:34.850

将其包装在一个类中：

```
class Matrix2D {
    typedef std::vector<double> Column;
    std::vector<Column> columns;
public:
    Matrix2D(unsigned int width, unsigned int height) :
    columns(width, Column(height)) {
    }

    double& at(unsigned int i, unsigned int j) {
        return columns[i][j];
    }
};

Matrix2D matrix(900, 900);

matrix.at(45, 65) = 1234.5678; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:43:45.443

> *我需要一个二维数组`double`*

由于您使用的是 C++，因此您应该使用 STL 类来为您处理丑陋的内存管理。所以你实际上是在寻找`std::vector< std::vector<double> >`，或者为了你的代码的可读性：

```
#include <vector>
typedef std::vector<double> DVector;      // row represented by vector of doubles
typedef std::vector<DVector> MyVector;    // 2D array as a vector of these rows 
```

然后尽可能避免使用动态分配。利用[RAII 成语](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)：

```
{
    MyVectorarr;  // vector object with automatic storage duration
} // <-- vector is automatically destructed when execution goes out of scope 
```

可能对您有帮助的问题：
[多维向量 向量向量](https://stackoverflow.com/q/823562/1168156)
[的初始化？](https://stackoverflow.com/q/3061247/1168156)
[向量的向量](https://stackoverflow.com/q/3438377/1168156)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:50:33.323

我将 malloc 与纯 C 相关联，而不是 C++（正如前面的答案指出的那样，您应该使用 std::vector）。但是，如果您真的想：

```
// allocate the memory in a block
double* block = (double *) malloc(sizeof(double) * xSize * ySize);
// allocate memory for the accessor array
double* accessor = (double*) malloc(sizeof(double*) * xSize);
// assign memory addresses
double* curPtr = block;
for (int i = 0; i < xSize; ++i) {
    accessor[i] = curPtr;
    curPtr += ySize;
}

// you can now access the array via accessor[x][y]

// now need to free malloced memory:
free(accessor);
free(block); 
```

如果你这样做，我强烈建议将它与 RAII 模式联系起来，否则你最终会出现内存泄漏。使用 STL 的容器是一种更好的方法。

# c# - 带有枚举源的 Razor 视图捕获 RadioButtonFor

> ID：15272697
> 
> 赞同：1
> 
> 时间：2013-03-07T13:39:45.517
> 
> 标签：c#, asp.net-mvc, razor

我正在使用 MVC3 和 Razor 视图，我的视图填充了正确的数据

**辅助模型**

```
public partial class Visibility
    {
        public enum VisibilityLevel { ShowThis, HideThis, HideAll }
        ...
    }
public partial class Address
    {
        public Visibility.VisibilityLevel Visibility{
            get {
                ... 
```

**看法**

```
 @Html.RadioButtonFor(m => m.HIDE_DATA, Models.Visibility.VisibilityLevel.ShowThis ) <span>Show @Model.TYPE_DESC address</span><br />
    @Html.RadioButtonFor(m => m.HIDE_DATA, Models.Visibility.VisibilityLevel.HideThis) <span>Don't show @Model.TYPE_DESC address </span><br />
    @Html.RadioButtonFor(m => m.HIDE_DATA, Models.Visibility.VisibilityLevel.HideAll) <span>Don't show ANY addresses</span><br /> 
```

**控制器**

```
 //
 // POST: /Address/Edit/5

 [HttpPost]
 public ActionResult Edit(Address addr,string submitButton)
 {
     ... 
```

这会根据数据和模型定义正确填充页面，但是回发不会获得新值。当我检查控制器时，提交时传递的地址模型具有 RadioButton 的原始值，而不是用户选择或更改的值。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:45:52.563

结果证明不是枚举的问题，我的自定义属性没有设置器。

改变了

**辅助模型**

```
 Visibility.VisibilityLevel _vizibility;

    public Visibility.VisibilityLevel Visibility{
        get {
            if (_vizibility != Models.Visibility.VisibilityLevel.ShowThis)  //the default
                return _hide_data;
            var ans =  new MacDirectEntities()
            ...
            return ans.Visibility;
        }
        set {
            _vizibility= value;
        }
    }
} 
```

# asp.net-mvc - 将现有 MVC 应用程序与新应用程序合并

> ID：15272700
> 
> 赞同：0
> 
> 时间：2013-03-07T13:39:50.680
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-3-areas

我正在开发一个 MVC4 面向公众的网站，它应该有一个博客，我不想从头开始开发一个，所以我从[codeplex](http://liteblog.codeplex.com)获得了一个不错的开源网站。

这就是问题所在：我必须将它集成到我正在构建的站点中，我不能有一个随机链接将用户发送到一个单独的博客站点，因为我必须在我的原始站点上显示博客的部分。

我考虑过使用发布后我会尝试的区域，但我很想知道是否有更好的方法来做到这一点或我需要注意的警告等。

感谢所有的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:32:24.747

所以我设法通过一些修补来做到这一点。

首先，我将源代码项目添加到我的解决方案中。然后我创建了一个名为 Blog 的区域并删除了除 BlogAreaRegistration.cs 之外的所有样板文件。然后我查看了 References 并引用了所有相应的库以及随附的类库项目。

我将除 App_Data、Content 和 Scripts 之外的所有文件夹复制到 Areas/Blog 中。将前面提到的文件夹复制到根网站中的相应位置。

然后我比较了 Global.asax 和 web.configs，将丢失的部分复制到我自己的文件中（不是没有 Examdiff 的帮助来配置）。

然后我不得不将默认的 ViewTemplates 从 Areas/Blog/Views 目录复制到根 Views 文件夹。

...按 F5，瞧！

当然，我让它听起来像迪斯尼童话，但要通过大量的反复试验（黄色的死屏）要困难得多。

好吧，那是我的 2 美分，以防其他人在未来遇到同样的混水

# jenkins - Jenkins：如何使上游作业触发下游作业的文件系统轮询

> ID：15272702
> 
> 赞同：0
> 
> 时间：2013-03-07T13:39:55.650
> 
> 标签：jenkins, jenkins-plugins

我正在使用 jenkins 构建两个工作（A 和 B）。我想在作业 A 更新某个文件 F 时触发作业 B。在作业 A 完成大约 10 分钟后更新 F（复制服务将文件复制到作业 B 所在的远程服务器需要 10 分钟将执行）

所以 B 是 A 的下游工作，但我不能在 A 完成后立即触发 B，因为到那时 F 不会在 B 执行的服务器上更新。我目前在 B 中使用 FS 触发器插件每分钟检查一次 F，这似乎运作良好。但这只是 24 小时一直检查 F 的开销。相反，我希望 B 在作业 A 完成后开始轮询文件 F 的文件系统，因此它将轮询大约 10 分钟，直到复制完成，然后开始构建。

有谁知道如何在詹金斯完成这样的事情？简单来说，如何让上游作业触发文件系统轮询下游作业？

问候，-萨菲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:23:49.890

谢谢你们的回答。我最终编写了自己的 bash 脚本并在作业 B 的第一行中调用它。该脚本可以轮询文件 F 的 M 分钟，然后如果该文件以 SUCCESS 退出状态退出（这会导致詹金斯继续构建）如果在 M 分钟内找不到文件（这会导致 jenkins 退出构建），则找到或退出并出现错误。所以像这样的东西在我的詹金斯工作B中： -

./myscript.sh -f file_to_poll -m minutes_to_poll_for

上面的行将返回成功或失败

./start_build

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:13:34.597

我建议您使用作业 B 中的[ScriptTrigger](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)来通过脚本监视文件 F。您可以每 5 分钟左右轮询一次。

编写一个 shell 或批处理脚本，将 F 与其先前的状态进行比较（将状态保留为副本或时间戳）并在发现更改时触发作业 B。

我希望这有帮助。

# php - OOP php中的1对多关系

> ID：15272704
> 
> 赞同：1
> 
> 时间：2013-03-07T13:40:07.700
> 
> 标签：php, oop, one-to-many

在我花几个小时重组并发现这不是做某事的好方法之前，我需要一些指导。我的计划是针对学区的一对一计划。我有一个包含所有作业、学生和计算机的数据库。我正在构建一个面向对象的设计，以使某些东西的编码更加统一（以及所有其他好处）。此应用程序将用于指导用户完成收纸和笔记本电脑检查过程。这是我的困境。

一个学生（对象）可以有一个或两个当前任务（一个是借来的，另一个是永久的）。我最初构建了一个学生对象、一个作业对象和一个设备对象。然后，当创建学生时，我们使用查找工厂来查找该学生的当前作业。然后我从 student 构造中遍历这些，并创建一个分配对象数组，每个对象都查找设备信息。

这很好用，可以获得我需要的所有信息，但我发现很难使用，因为有一组赋值对象，并且有一些逻辑上需要遵循的规则。

必须首先提交借用任务（原始计算机因问题被送走时给出）。而且，一般来说，很难确定这个数组中的哪个赋值对象具有我需要知道的属性。

所以，我的想法（这可能不是一个好主意）是将其分解为一对一的关系。学生到作业到作业到设备。

然后，如果我需要知道学生是否有借用作业，我可以在作业对象中创建一个函数并调用`student->assignments->hasLoanerAssignment()`

你怎么看互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:26:12.637

如果我理解正确，您是说借用任务与永久任务不同，这会导致复杂化。如果是这样，那么您可能想要使用继承。贷款和永久分配将是两种类型的分配，您可以给它们自己的属性和方法。

```
class Assignment 
{
    // instance of Device
    protected $device

    // instance of Student
    protected $student  
}

class LoanerAssignment extends Assignment 
{
    // various properties and methods relevant to loan
}
class PermanentAssignment extends Assignment 
{
    // various properties and methods relevant to permanent
} 
```

假设您将这些数据保存在数据库中，为 Loaner 和 Permanent 制作单独的表，然后很容易向 Student 添加一个方法来查看它是否有一个外借任务，例如：

```
// in Student class
function hasLoanerAssignment()
{
    return 1 === $yourChosenDBAdaptor->getCountOfLoanerAssignents($this->_studentId);
} 
```

# lucene - 前缀模糊查询（不使用 query_string）

> ID：15272707
> 
> 赞同：1
> 
> 时间：2013-03-07T13:40:14.080
> 
> 标签：lucene, elasticsearch

我想对单个词进行前缀模糊搜索。基本上，我想获得与已发送此搜索请求相同的结果：

```
{
  "from": 0,
  "size": 100,
  "query": {
    "query_string": {
      "query": "dala~*"
    }
  },
  "filter": {}
} 
```

但没有 query_string 语法解析。上面的搜索应该与达拉斯术语匹配。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T11:46:48.923

在 ElasticSearch 中，如果您设置`fuzzy_prefix_length`，您应该能够只指定模糊波浪号并获得前缀匹配：

```
{
  "from": 0,
  "size": 100,
  "query": {
    "query_string": {
      "query": "dala~",
      "fuzzy_prefix_length": 3
    }
  },
  "filter": {}
} 
```

[与这个问题](https://stackoverflow.com/questions/12444497/elastic-search-fuzziness-in-query-string)的精神相似

# c# - 如何通过 facebook api 获取公众形象？

> ID：15272720
> 
> 赞同：0
> 
> 时间：2013-03-07T13:40:48.603
> 
> 标签：c#, windows-phone-7, facebook-graph-api

我想在我的 wp8 应用程序中显示来自 facebook 的新闻源。我查询了 Graph API “me/home”，得到了一个新闻源。我需要每个提要作者的图像。例如，有一个新闻源看起来像

```
 "id": "107619212653885_433558870059916", 
  "from": {
    "category": "News/media website", 
    "name": "ФОКУС", 
    "id": "107619212653885"
  }, 
  "message": "Дарт Вейдер никак не угомонится. Завтра будет поздравлять прекрасных дам. http://focus.ua/kiev/263541/\r\n\r\n8 марта было в \"Звездных войнах\"?", 
```

在“来自”我有 id，如果我使用查询

```
107619212653885?fields=cover 
```

我可以获得封面的“来源”。这里是这个公众的[链接](http://www.facebook.com/focus.ua)。但是，在源 - 带有雪花莲的图片中，我需要一张带有红色“Ф”的图片，因为在新闻源中我看到了这张图片，而不是带有雪花莲的图片。那么，我怎样才能得到这张照片呢？

**回答** `107619212653885/picture`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:33:56.417

为此，您将需要用户 ID。使用 user_id，您可以通过 GET 调用获取用户的图像。

例子

字符串 uid
流响应
HTTP1.Get (' [http://graph.facebook.com/](http://graph.facebook.com/) ' + uid/picture?redirect=false, response)

# neo4j - Cypher Query 组合可以作为一个整体排序的结果

> ID：15272721
> 
> 赞同：0
> 
> 时间：2013-03-07T13:40:54.667
> 
> 标签：neo4j, cypher

我有一个 Cypher 查询，它结合了两个结果集，然后我想将它们作为组合结果排序。

我正在尝试做的一个例子是：http: [//console.neo4j.org/r/j2sotz](http://console.neo4j.org/r/j2sotz)

这给出了错误：

`Cached(nf of type Collection) expected to be of type Map but it is of type Collection - maybe aggregation removed it?`

有没有办法将多个结果收集到一个可以分页、排序等的结果中？

有很多关于组合结果的帖子，但我找不到任何可以将它们视为地图的帖子。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:02:49.760

您可以像这样收集到单个结果：

```
Start n=node(1)match n-[r]->m 
with m.name? as outf, n 
match n<-[r]-m 
with m.name? as inf, outf 
return collect(outf) + collect(inf) as f 
```

此处介绍了工会：[https](https://github.com/neo4j/neo4j/issues/125) ://github.com/neo4j/neo4j/issues/125 （目前不可用）。我还没有看到任何关于专门对集合进行排序的内容。

# django - django 优化合并查询集

> ID：15272722
> 
> 赞同：0
> 
> 时间：2013-03-07T13:41:02.313
> 
> 标签：django, django-queryset

例如，我有 2 个查询集：

```
q1=MyModel.objects.filter(visible=True)
q2=MyModel.objects.filter(published=True) 
```

而且我需要制作单个查询集或列表，其中包含来自 q1 和 q2 的所有对象。

我曾经这样做过：

```
q=list(chain(q1,q2))
#q= q1 | q2 #this gives me not all objects from q2 or q1,so i don't use bitwise or 
```

但有人说，这`list()`将对数据库产生额外的查询。这是真的吗？如果是，有人可以指定最优化的合并方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:27:06.790

```
q1=MyModel.objects.filter(visible=True)
q2=MyModel.objects.filter(published=True)
qs12 = QuerySetSequence(qs1, qs2) 
```

将上面的代码与这个片段结合起来：http: [//djangosnippets.org/snippets/1933/](http://djangosnippets.org/snippets/1933/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:10:16.943

您可以尝试这样做：

```
q1_pks = MyModel.objects.filter(visible=True).values_list('pk', flat=True)
q2_pks = MyModel.objects.filter(published=True).values_list('pk', flat=True)

final_query = MyModel.objects.filter(pk__in=list(q1_pks).extend(list(q2_pks))) 
```

这应该可以解决问题，尽管我不确定这些是否`list(qX_pks)`会产生性能问题。

# jsf - 怎么改变大小

> ID：15272723
> 
> 赞同：0
> 
> 时间：2013-03-07T13:41:11.117
> 
> 标签：jsf, primefaces

我正在使用`<p:fileUpload>`标签进行文件上传功能。但我需要更改我无法更改的文本框大小。

```
<h:outputLabel id="attachment_label" value="Add Attachment(s)" styleClass="atf-label" />        
<p:fileUpload value="" mode="simple" style="width:350px"/> 
```

我尝试在 CSS 中设置宽度，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:37:59.943

这是长期以来文件上传功能的一大局限。Primefaces FileUpload 也不例外。所以，没有办法改变`Width`输入文本框。如果您想了解更多信息和其他选项，请查看此答案：

> [我们可以改变 <input type="file"> 样式吗？](https://stackoverflow.com/questions/2825509/can-we-change-input-type-file-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T10:37:07.347

Primefaces`p:fileUpload`文本大小通过应用`inputField`styleClass 增加。

**样式.css**

```
.inputField {
   width: 350px !important;
} 
```

**文件上传.xhtml**

```
<p:fileUpload id="imageId" mode="simple" styleClass="inputField"></p:fileUpload> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:31:46.730

我做了一些测试，看看这是否可能。Primefaces 将简单的 fileUpload 翻译为：

```
<input type="file" id="fileUploadForm:j_idt90" name="fileUploadForm:j_idt90" style=""> 
```

这基本上是类型文件的标准浏览器输入字段，这意味着在 chrome、firefox 上，即……等它看起来都会有所不同。现在在我的语言环境中，这个框的标准尺寸是 238px，通过增加输入类型的宽度，我确实看到上传的框变大了，但遗憾的是文本框和按钮没有跟随。

如果您希望文件上传有所不同，我建议您查看文件上传的高级模式。您可以在 primefaces 展示中看到它：http: [//www.primefaces.org/showcase/ui/fileUploadSingle.jsf](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)

**编辑：**我忘了在 IE8 中测试它（这台电脑上只有 ie8）。在 chrome 中，文本是输出文本，在 Firefox 中，它位于不能变大的 inputtext 字段中，但在 IE8 上，如果我添加宽度：

```
<p:fileUpload value="#{fileUploadBean.file}" mode="simple" style="width:500px;"/> 
```

输入框确实变大了。

# php - 如何使用 DOMDocument 删除元素？

> ID：15272726
> 
> 赞同：46
> 
> 时间：2013-03-07T13:41:23.200
> 
> 标签：php, domdocument

`DOM`是否可以在不创建新元素的情况下从加载中删除元素？例如这样的：

```
$dom = new DOMDocument('1.0', 'utf-8');
$dom->loadHTML($html);

foreach($dom->getElementsByTagName('a') as $href)
    if($href->nodeValue == 'First')
        //delete 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-07T13:43:10.373

通过告诉父节点删除子节点来删除节点：

```
$href->parentNode->removeChild($href); 
```

请参阅[`DOMNode::$parentNode`^(*文档*)](http://www.php.net/class.domnode.php#domnode.props.parentnode)和[`DOMNode::removeChild()`^(*文档*)](http://php.net/DOMNode.removeChild)。

另见：

*   [如何使用 PHP DOMDocument 删除属性？](https://stackoverflow.com/questions/10619282/how-to-remove-attributes-using-php-domdocument)
*   [如何使用 DOMDocument 类删除 HTML 元素](https://stackoverflow.com/questions/1171597/how-to-remove-an-html-element-using-the-domdocument-class)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-12-02T07:43:06.050

这花了我一段时间才弄清楚，所以这里有一些澄清：

如果要从循环中删除元素（如 OP 的示例中所示），则**需要向后循环**

```
$elements = $completePage->getElementsByTagName('a');
for ($i = $elements->length; --$i >= 0; ) {
  $href = $elements->item($i);
  $href->parentNode->removeChild($href);
} 
```

> [DOMNodeList 文档](http://php.net/manual/en/class.domnodelist.php#83390)：如果向后迭代，您可以修改甚至删除 DOMNodeList 中的节点

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-07T13:43:18.473

容易地：

```
$href->parentNode->removeChild($href); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-20T15:43:11.990

我知道这已经得到了回答，但我想补充一下。

万一有人遇到我遇到的同样问题。

循环遍历 domnode 列表并直接删除项目可能会导致问题。

我刚刚阅读了这篇文章，并基于此在我自己的代码库中创建了一个有效的方法：[https ://www.php.net/manual/en/domnode.removechild.php](https://www.php.net/manual/en/domnode.removechild.php)

这是我要做的：

```
$links = $dom->getElementsByTagName('a');
$links_to_remove = [];

foreach($links as $link){
    $links_to_remove[] = $link;
}

foreach($links_to_remove as $link){
    $link->parentNode->removeChild($link);
}

$dom->saveHTML(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-12T06:15:20.773

用于删除标签或其他东西。

```
removeChild($element->id()); 
```

完整示例：

```
$dom = new Dom;
$dom->loadFromUrl('URL');
$html = $dom->find('main')[0];
$html2 = $html->find('p')[0];
$span = $html2->find('span')[0];

$html2->removeChild($span->id());

echo $html2; 
```

# java - 为什么垃圾收集器在 JDK 1.7 中继续运行？

> ID：15272730
> 
> 赞同：2
> 
> 时间：2013-03-07T13:41:46.183
> 
> 标签：java, garbage-collection

我将 Oracle 1.7.0_10 VM 用于我正在运行的高性能 Java 应用程序。我花了很多时间使用 HPROF 分析器查看内存分配，因为它正在执行大量 GC（通过 -verbose:gc 输出测量）。现在，我做的分配很少，但是 GC 仍然经常运行，做的工作很少，而且需要很长时间。例如，这是我没有使用特殊 GC 选项 ( `-verbose:gc -XX:+PrintGCDetails -Xmx4g`) 得到的一些输出：

```
[GC [PSYoungGen: 21197K->96K(1228224K)] 420220K->399118K(2045440K), 0.0081950 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]

[Full GC (System) [PSYoungGen: 96K->0K(1228224K)] [ParOldGen: 399022K->394779K(817216K)] 399118K->394779K(2045440K) [PSPermGen: 10758K->10758K(21248K)], 0.1503380 secs] [Times: user=0.89 sys=0.00, real=0.15 secs] 

[GC [PSYoungGen: 21195K->128K(1238592K)] 415974K->394907K(2055808K), 0.0061850 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 

[Full GC (System) [PSYoungGen: 128K->0K(1238592K)] [ParOldGen: 394779K->394779K(817216K)] 394907K->394779K(2055808K) [PSPermGen: 10758K->10758K(21248K)], 0.2534350 secs] [Times: user=1.71 sys=0.01, real=0.25 secs] 
```

这些一般消息在 2.5 秒的挂壁时间内重复 10 次 - 基于它们大约 250 毫秒的时间，这就是在那段时间里似乎正在做的所有过程（我知道它可能正在另一个线程上工作）。让我感到困惑的是，似乎没有太多工作要做。查看消息，所有代似乎都有足够的空间 - Young 选择 21Mb->0，但分配了 1.2G，而老代的大小几乎没有变化，并且远低于它们的阈值。

鉴于此，为什么 GC 会如此频繁地运行？无论如何，在核心 i7 上似乎不需要 250 毫秒，而没有其他任何东西运行来清理这么少的内存。

我尝试了其他 GC 参数，但似乎没有任何影响。不幸的是，由于我的应用程序使用 1.7 特定功能，因此我无法在任何其他 VM 中运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:46:47.243

> 鉴于此，为什么 GC 会如此频繁地运行？

“Full GC **(System)** ”通常表示您的应用程序已通过调用[`Runtime.getRuntime().gc()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#gc%28%29)或明确要求运行垃圾收集器[`System.gc()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc%28%29)。

因此，您可能需要仔细检查您的代码。

另外，请参阅[Java 垃圾收集日志条目“Full GC (System)”是否意味着某个名为 System.gc() 的类？](https://stackoverflow.com/questions/6626680/does-java-garbage-collection-log-entry-full-gc-system-mean-some-class-called)

# ios - 有 2 个 xib 时进行本地化

> ID：15272737
> 
> 赞同：0
> 
> 时间：2013-03-07T13:42:15.703
> 
> 标签：ios, ios5, ios6

我也为 iOS 5 调整了我的 iOS 6（带自动布局）应用程序。我必须创建 2 个 xib，并根据 iOS 版本加载每个 xib。就像它[在这里](https://stackoverflow.com/questions/12411980/enabling-auto-layout-in-ios-6-while-remaining-backwards-compatible-with-ios-5)解释的那样，

我还本地化了 iOS 6 xib，它完美地切换到了语言（西班牙语和英语），但 iOS 5 版本没有。iOS 5 xibs 我后来添加了它们，我创建了所有的 ViewControllers，所以它可能没有正确链接。我不确定 iOS 如何决定加载 xib 的版本（西班牙语或英语）。

我尝试用这个来初始化我的视图控制器，但是 XIB 中的图像没有加载，我也希望它像 iOS 6 一样自动，使用它我必须检查语言并设置 pathForResource

```
NSString* path= [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];

NSBundle* languageBundle = [NSBundle bundleWithPath:path];
self = [super initWithNibName:nibNameOrNil bundle:languageBundle]; 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:01:24.857

我弄清楚出了什么问题。iOS 5 的 XIB 文件与 iOS 6 文件位于不同的文件夹中，因此当我为该 XIB 加载捆绑包时，无法访问我需要的图像。所以我改变了XIB文件的位置并且它工作了！

# c# - 通过 SendKeys 保护 excel VBA 项目

> ID：15272740
> 
> 赞同：0
> 
> 时间：2013-03-07T13:42:17.823
> 
> 标签：c#, excel, vba

我在取消保护受保护的 excel 的 VBA 项目时遇到问题。

```
IntPtr hWnd = FindWindow(null, ES.oXL.VBE.MainWindow.Caption);//Find window
  if (hWnd != IntPtr.Zero)
  {
      bool ret = BringWindowToTop(hWnd); //Bring VBE to top.
  }

  SendKeys.SendWait("%{F11}%TE" + strPassword + "~~%{F11}");
  SendKeys.SendWait("{ENTER}");
  SendKeys.SendWait("xyz");
  SendKeys.SendWait("{ENTER}"); 
```

我写了这样的代码来解除对 VBA 项目的保护。它在调试应用程序时工作正常。

我们使用 com 对象模型。当我在 dll 配置单元中应用相同的 dll 时，调用我遇到错误的函数

```
System.ComponentModel.Win32Exception: Access is denied at System.Windows.Forms.SendKeys.SendInput(Byte[] oldKeyboardState, Queue previousEvents) 
```

对此有何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:47:11.847

你部署到什么样的环境中？

似乎程序集没有在完全信任的安全上下文中运行，这就是不允许某些 API 调用的原因

从[文档](http://msdn.microsoft.com/en-us/library/ms127847.aspx)中：

> > 对 Shell 函数的调用需要完全信任（SecurityException 类）。

**更新**

根据 OP 的评论，似乎确实没有授予在 COM+ 容器中托管的程序集 FullTrust。

为了解决这个问题，您可以考虑使用 FullTrust 将单独的程序集部署到目标计算机上的 GAC 中，并在此程序集上启用 AllowPartiallyTrustedCallers 选项。该程序集必须是在您的其他 COM+ 托管程序集上调用 SendKeys 的程序集。

但最后，正如其他人指出的那样，这可能不是正确的解决方案。一般来说，SendKeys 应该非常谨慎地使用，并且可能还有其他更好的方法来实现您的目标..

# python - 如何使用python连接来自不同列表的两个项目？

> ID：15272741
> 
> 赞同：2
> 
> 时间：2013-03-07T13:42:24.453
> 
> 标签：python, list, tuples

如果我有这样的列表，如何将来自不同列表的两个项目连接在一起：

```
data_list = [['Toys', 'Communications', 'Leather'], ['Teddy', 'Mobile', 'Hand'], ['bear', 'phone', 'bag']] 
```

我使用 zip 函数将它们转换成这样的元组：

```
data_tupled_list = zip(*data_list) 
```

结果如下：

```
[('Toys', 'Teddy', 'bear'),
 ('Communications', 'Mobile', 'phone'),
 ('Leather', 'Hand', 'bag')] 
```

我想要一个这样的列表：

```
[('Toys', 'Teddybear'),
 ('Communications', 'Mobilephone'),
 ('Leather', 'Handbag')] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:43:30.560

你大部分时间都在那里：

```
data_tupled_list = [(x[0],x[1]+x[2]) for x in zip(*data_list)] 
```

如果你解开元组，它可能会更漂亮一点：

```
data_tupled_list = [(a,b+c) for a,b,c in zip(*data_list)] 
```

如果你能给,和更有意义的名字，那*肯定会更漂亮。*`a``b``c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:46:16.157

在 Python3 中有一个很好的方法来写这个

```
>>> data_list = [['Toys', 'Communications', 'Leather'], ['Teddy', 'Mobile', 'Hand'], ['bear', 'phone', 'bag']]
>>> [(x, ''.join(args)) for x, *args in zip(*data_list)]
[('Toys', 'Teddybear'), ('Communications', 'Mobilephone'), ('Leather', 'Handbag')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:08:18.310

我将分两部分进行操作；你真的想做以下事情：

```
data_list = [['Toys', 'Communications', 'Leather'], ['Teddy', 'Mobile', 'Hand'], ['bear', 'phone', 'bag']]
groups = data_list[0]
predicates = data_list[1]
suffixes = data_list[2]

combined = [ ''.join((pred, suff)) for pred, suff in zip(predicates, suffixes)]
finalresult = zip(groups, combined) 
```

# java - 无法在应用程序事件查看器中记录事件 - WinRun4J

> ID：15272742
> 
> 赞同：3
> 
> 时间：2013-03-07T13:42:24.883
> 
> 标签：java, winrun4j

使用描述的命令

> EventLog.report("WinRun4J 测试服务", EventLog.INFORMATION, "Ping");

它不是写事件日志而是写这个

> 找不到来自源 WinRun4J 测试服务的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。

信息写入字节数据“Ping”

虽然将 WinRun4JTest 应用程序作为服务运行，但它成功地将事件日志写入“SystemEventLogs”

我在这里想念什么？

# .net - 使用 WCF 方法 - 中止/关闭

> ID：15272743
> 
> 赞同：3
> 
> 时间：2013-03-07T13:42:28.547
> 
> 标签：.net, wcf, asp.net-mvc-4

我在我的 ASP.NET MVC 应用程序中使用 WCF，并且我的每个方法都包含 try-catch-finally 块。我想知道我是否正确关闭/中止 WCF 调用。我知道“使用”语句不适合 WCF 调用。

这是示例方法

```
public int GetInvalidOrdersCount()
{
    OrderServiceClient svc = new OrderServiceClient();
    try
    {
        return svc.GetInvalidOrdersCount();
    }
    catch (Exception)
    {
        svc.Abort();
    throw;
    }
    finally
    {
        svc.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:45:57.167

在[msdn](http://msdn.microsoft.com/en-us/library/ms735103.aspx)上，它显示了一个“正确”调用方式的示例：

```
CalculatorClient wcfClient = new CalculatorClient();
try
{
    Console.WriteLine(wcfClient.Add(4, 6));
    wcfClient.Close();
}
catch (TimeoutException timeout)
{
    // Handle the timeout exception.
    wcfClient.Abort();
}
catch (CommunicationException commException)
{
    // Handle the communication exception.
    wcfClient.Abort();
} 
```

在实现客户端时，我通常遵循这种模式。除了，您可能还想`using`为客户处理：

```
using (CalculatorClient wcfClient = new CalculatorClient())
{
    try
    {
        return wcfClient.Add(4, 6);
    }
    catch (TimeoutException timeout)
    {
        // Handle the timeout exception.
        wcfClient.Abort();
    }
    catch (CommunicationException commException)
    {
        // Handle the communication exception.
        wcfClient.Abort();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:39:56.363

我使用类似`WcfUsingWrapper`下面的东西，然后包装我所有的代理实例

```
 void Foo(){

        var client = new WcfClientType();
        var result = ExecuteClient(client, x => x.WcfMethod());

      }

    public static ReturnType ExecuteClient<ReturnType>(ClientType client, Func<ClientType, ReturnType> webServiceMethodReference)
where ClientType : ICommunicationObject
    {
        bool success = false;
        try
        {
            ReturnType result = webServiceMethodReference(client);
            client.Close();
            success = true;
            return result;
        }
        finally
        {
            if (!success)
            {
                client.Abort();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:28:12.667

您要做的一件事是检查连接的“状态”。如果通道处于故障状态，则需要在关闭前调用 Abort() 方法，否则通道会在一段时间内保持故障状态。如果通道没有故障，只需调用 Close() 即可。然后将其设置为空。

像这样的东西：

```
 if (requestChannel != null) {
    if (requestChannel.State == System.ServiceModel.CommunicationState.Opened) {
        requestChannel.Close();
        requestChannel = null;
    }

    if (requestChannel.State == System.ServiceModel.CommunicationState.Faulted) {
        requestChannel.Abort();
        requestChannel.Close();
        requestChannel = null;
    }
 } 
```

# logging - 使用 logback 可能来自相同线程的分组、延迟日志语句

> ID：15272744
> 
> 赞同：0
> 
> 时间：2013-03-07T13:42:29.087
> 
> 标签：logging, logback

我已阅读有关映射诊断上下文的信息，虽然有用，但来自不同线程的日志语句仍然散布在输出中。

我想要的是在线程完成时连续输出线程中的所有日志语句（我知道“完成”是什么以及何时）

例如 ：

线程 A 在时间 T-Astart 开始，在各个点执行日志记录，并在 T-Adone 完成。

在 A 完成之前，在时间 T-Bstart (T-Adone < T-Bstart < T-Adone) 另一个线程 B 开始处理，执行相同类型的日志记录并在 T-Bdone 完成。

现在，我希望线程 A 的所有日志记录语句出现在线程 B 的日志记录语句之前，而不是像我看到的 MDC 示例那样穿插。这种延迟的、分组的日志记录可以用 logback 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:59:00.273

> 这种延迟的、分组的日志记录可以用 logback 吗？

这是不可能的，据我所知。

你有一种选择：

*   使用[SiftingAppender](http://logback.qos.ch/manual/appenders.html#SiftingAppender)和 MDC 创建多个日志文件，每个线程一个。

# php - 想要使用 php 验证图像原始数据

> ID：15272746
> 
> 赞同：0
> 
> 时间：2013-03-07T13:42:46.760
> 
> 标签：php, image

我想验证图像原始数据是否有效。

下面是我的代码：

```
private function __blobToImage($imagerawdata)
{       
    $imagedata = base64_decode($imagerawdata);
    // Set the content type header - in this case image/jpeg
    header('Content-Type: image/jpeg');

    $path = WWW_ROOT . "commapp_images".'/';
    $file = mktime().".png";
    $filepath = $path.$file;

    // Output the image     
    $image = imagecreatefromstring($imagedata); 
    ob_start(); 
    imagejpeg($image, $filepath, 80);
    ob_get_contents();
    ob_end_clean();
    return $file;
} 
```

使用我的代码时出现以下错误

```
"Notice (8): imagecreatefromstring() [function.imagecreatefromstring]: gd-jpeg, libjpeg: recoverable error: Premature end of JPEG file" 
```

任何人都请帮助我，因为我在这里没有任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:07:23.137

[`imagecreatefromstring`](http://php.net/manual/en/function.imagecreatefromstring.php)已经这样做了，它会`false`在失败时返回。所以你可以抑制它的消息并检查返回值：

```
$image = @imagecreatefromstring($imagedata);
if ($image !== false)
{
  ...
} 
```

**编辑：**`header`如果要保存到文件并且保存带有 png 扩展名的 jpeg，则不需要和输出缓冲。

# php - 无法删除 Solr4 中的所有文档

> ID：15272748
> 
> 赞同：2
> 
> 时间：2013-03-07T13:42:53.453
> 
> 标签：php, solr, lucene, solr4, solarium

我有一个 Solr 4 索引，我想删除它的所有文档。

**尝试#1：**

```
http://www.domain.com:8080/solr/collection1/update?stream.body=%3Cdelete%3E%3Cquery%3E*:*%3C/query%3E%3C/delete%3E

http://www.domain.com:8080/solr/collection1/update?stream.body=%3Ccommit/%3E 
```

**结果#1：**

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">0</int>
</lst>
</response> 
```

下`Solr Admin > collection 1`，我还是看出来了`Num Docs:829060`！我想这意味着删除查询不起作用。

去的时候我也看到了结果

```
http://www.domain.com:8080/solr/collection1/select?q=*%3A*&wt=xml 
```

* * *

**尝试 #2** *使用 Solarium PHP 库*

```
 // Create a client instance
    $config = array(
        'endpoint' => array(
            'localhost' => array(
                'host' => '127.0.0.1',
                'port' => 8080,
                'path' => '/solr/',
            )
        )
    );
    $client = new Solarium\Client($config);

    // get an update query instance
    $update = $client->createUpdate();

    // add the delete query and a commit command to the update query
    $update->addDeleteQuery('*:*');
    $update->addCommit();

    // this executes the query and returns the result
    $result = $client->update($update);

    echo '<b>Update query executed</b><br/>';
    echo 'Query status: ' . $result->getStatus(). '<br/>';
    echo 'Query time: ' . $result->getQueryTime(); 
```

**输出#2：**

```
Update query executed
Query status: 0
Query time: 3 
```

我还看`Num Docs:829060`！这也不起作用。

任何想法如何解决这个问题？

* * *

## 更新

我手动删除了索引文件夹`/collection1/data`，进行了 DIH 完全导入，但仍然无法删除新索引中的文档。有什么建议么？

**solrconfig.xml**

```
<requestHandler name="/update" class="solr.UpdateRequestHandler">
  <!-- See below for information on defining 
       updateRequestProcessorChains that can be used by name 
       on each Update Request
    -->
  <!--
     <lst name="defaults">
       <str name="update.chain">dedupe</str>
     </lst>
     -->
</requestHandler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:05:48.400

您可以尝试在命令行上查询 solr 吗？例如：

```
curl http://domain.com:8080/solr/collection1/update?commit=true -H "Content-Type: text/xml" --data-binary '<delete><query>*:*</query></delete>' 
```

运行此查询后，您应该会看到类似

```
INFO: [phisch-dev] webapp=/solr path=/update params={wt=javabin&version=2} {deleteByQuery=*:* (-1428803632004857856)} 0 126 
```

在 solr 日志中（例如 /var/log/tomcat7/catalina.2013-03-07.log）。

我在这里使用 POST，只是为了确保 GET/stream.body 不会以奇怪的方式对事物进行编码。我添加了 commit 属性，因此删除查询会自动提交。

另外，您是否对 RequestHandler 进行了任何更改？它会覆盖默认值或类似的东西吗？检查您的 solrconfig.xml 并搜索 /update。我的包含（这是 solr 附带的）：

```
<requestHandler name="/update" class="solr.UpdateRequestHandler">
</requestHandler> 
```

应该没有`<lst name="defaults">`,`<lst name="appends"`或`<lst name="invariants">`

顺便说一句，在打开新搜索之前，对索引的更改是不可见的。如果您从索引中删除并重新启动 solr，会发生什么情况。文件还在吗？

**编辑：** 它恰好是一个错误：[https](https://issues.apache.org/jira/browse/SOLR-3432) ://issues.apache.org/jira/browse/SOLR-3432 向模式中 添加一个`_version_`字段可以解决这个问题（感谢 Nyxynyx 的精确度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:46:35.217

在索引中删除第一种方法中的所有条目后，您仍然必须提交它：

```
http://www.domain.com:8080/solr/collection1/update?stream.body=%3Ccommit/%3E 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T06:19:56.963

只需在浏览器中触发以下命令。

`http://localhost:8983/solr/update?stream.body=:&commit=true`

# iphone - iOS6 中的 CorePlot 图错位

> ID：15272754
> 
> 赞同：1
> 
> 时间：2013-03-07T13:43:12.637
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-plot

在`CorePlot`我有一个看起来像这样的图表`iOS5`： ![在此处输入图像描述](../Images/5f171a95b0d76ee9d2f4ce3736027e51.png)

像这样`iOS6`： ![在此处输入图像描述](../Images/35511bfa6c1c395c9e21419116df99ce.png)

正如你所看到的，它被放错了很多地方。我用于定位它的代码保持不变：

```
graph.plotAreaFrame.paddingTop    = 20.0;
graph.plotAreaFrame.paddingRight  = 0.0;
graph.plotAreaFrame.paddingBottom = 0.0;
graph.plotAreaFrame.paddingLeft   = 0.0;

[plotSpace scaleToFitPlots:[NSArray arrayWithObjects:plot01, plot02, nil]];

CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.4f)];
plotSpace.xRange = xRange;
CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.6f)];
plotSpace.yRange = yRange;

x.gridLinesRange = yRange;
y.gridLinesRange = xRange; 
```

关于为什么会发生这种情况的任何想法？我真的被困在这里，尝试在这里和那里链接值，但结果保持不变。

我正在使用最新版本的 Core Plot`1.1`和`Xcode 4.6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:11:00.547

这是 Core Plot 1.1 的一个已知问题。它已在最新代码中修复，但从那时起就没有另一个完整版本。[您可以使用 Mercurial 从Google Code](http://code.google.com/p/core-plot/)中提取最新代码以进行修复。

# php - CakePHP 奇怪的缓存文件

> ID：15272755
> 
> 赞同：0
> 
> 时间：2013-03-07T13:43:18.077
> 
> 标签：php, file, cakephp, caching

这是问题：

CakePHP 在缓存/视图中生成奇怪的缓存文件

"2f400_shtml.php" "d_allow_url_include_3don_d_auto_prepend_file_3d_2f_2f_2f_2f_2f_2f_2f_2f_2f_2f_2f_2fetc_2fpasswd"

不太明白会发生什么，但是查看文件我在此文件的请求反序列化中看到了这一点：

```
"query";a:1:{s:10:"/400_shtml";s:0:"";} 
```

有人已经有这个问题了吗？

这发生在生产服务器中，但不在我的本地环境中。

这些未遂攻击可以吗？

谢谢，感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:55:21.503

是的，看起来有人在搞乱您的网站。看起来他们正在尝试访问该`/etc/passwd`文件。

有人点击了让 Cake 创建缓存文件的 URL。Cake 会对被命中的 url 进行 URLencode 并用下划线替换特殊字符

因此，该请求将在那里涉及很多 / 字符。

查看您的 apache access.log 文件，您将能够更清楚地看到人们提出的请求类型：

例如

```
cat <apache_logs_dir>/access.log | grep passwd 
```

将在那里显示与第二个类似的请求。

我会自己尝试以确保他们没有任何成功:)

是时候确保 Apache 只能访问您希望它访问的目录了。我认为您可以`<directory>`为此使用标签：

[http://httpd.apache.org/docs/2.2/mod/core.html#directory](http://httpd.apache.org/docs/2.2/mod/core.html#directory)

（我只是假设您使用的是 Apache，如果您使用的是 IIS，您可能需要研究类似的功能）

环顾谷歌，似乎有人试图利用此漏洞：

[http://blog.sucuri.net/2012/05/php-cgi-vulnerability-exploited-in-the-wild.html](http://blog.sucuri.net/2012/05/php-cgi-vulnerability-exploited-in-the-wild.html)

从该链接中提取：

```
The PHP guys are recommending the following .htaccess hack to block those attacks:

    RewriteEngine on
    RewriteCond %{QUERY_STRING} ^[^=]*$
    RewriteCond %{QUERY_STRING} %2d|\- [NC]
    RewriteRule .? – [F,L] 
```

# ios - KVO 不适用于类别

> ID：15272759
> 
> 赞同：3
> 
> 时间：2013-03-07T13:43:18.737
> 
> 标签：ios, objective-c, key-value-observing

我尝试使用类别将属性添加到类中。属性访问器看起来像：

```
- (NSArray *)thumbnails {
    return objc_getAssociatedObject(self, kThumbnails);
}

- (void)setThumbnails:(NSArray *)thumbnails {
    [self willChangeValueForKey:@keypath(self.thumbnails)];
    objc_setAssociatedObject(self, kThumbnails, thumbnails, OBJC_ASSOCIATION_RETAIN);
    [self didChangeValueForKey:@keypath(self.thumbnails)];
} 
```

不幸的是，没有触发通知。甚至可以将符合 KVO 的属性添加到类别中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:47:09.497

KVO 绝对可以使用类别中的访问器方法。

发布的代码与密钥的 KVO 兼容`@"thumbnails"`。您甚至不必发送`willChangeValueForKey:`and`didChangeValueForKey:`消息。

# javascript - 自时间戳以来经过的 Javascript 时间

> ID：15272761
> 
> 赞同：7
> 
> 时间：2013-03-07T13:43:22.277
> 
> 标签：javascript, if-statement, time

我试图通过将一些信息存储在变量中来“缓存”一些信息。
如果 2 分钟过去了，我想获得“实时”值（调用 url）。如果 2 分钟还没有过去，我想从变量中获取数据。

我基本上想要的是：

```
if(time passed is less than 2 minutes) {
    get from variable
} else {
    get from url
    set the time (for checking if 2 minutes have passed)
} 
```

我试过用类似的东西计算时间

```
if((currentime + 2) < futuretime) 
```

但这对我不起作用。任何人都知道如何正确检查自上次执行代码以来是否已经过去了 2 分钟？

TL;DR：想用 IF 语句检查 2 分钟是否已经过去。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T14:20:41.607

将您的算法转换为有效的 javascript，您可以执行以下操作：

```
var lastTime = 0;

if ( Math.floor((new Date() - lastTime)/60000) < 2 ) {
    // get from variable
} else {
    // get from url
    lastTime =  new Date();
} 
```

您可以将`if`块放在一个函数中，并在您想从变量或 url 获取信息时调用它：

```
var lastTime = 0;

function getInfo() {
    if ( Math.floor((new Date() - lastTime)/60000) < 2 ) {
            // get from variable
    } else {
        // get from url
        lastTime =  new Date();
    }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:49:36.087

如果你想在 JavaScript 中的计时器上做一些事情，你应该使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)or [`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。

让你的代码连续循环运行会导致你的[浏览器的虚拟机崩溃](https://stackoverflow.com/questions/14194540/do-infinite-loops-of-javascript-crash-the-browsers-these-days)。

使用`setTimeout`相当简单：

```
setTimeout(function(){
    // do everything you want to do
}, 1000*60*2); 
```

这将导致函数在[设置超时后至少两分钟内](http://ejohn.org/blog/how-javascript-timers-work/)运行（有关更多详细信息，请参阅 John Resig 的这篇博文）。第二个参数是毫秒数，所以我们乘以 60 得到分钟，然后乘以 2 得到 2 分钟。

`setInterval`, 遵循相同的语法将每 x 毫秒执行一些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:49:20.253

不使用 3rd 方库，只需使用 Date.getTime() 并将其存储为一些变量：

```
var lastRun = null;

function oneIn2Min() {
    if (lastRun == null || new Date().getTime() - lastRun > 2000) {
        console.log('executed');
    }
    lastRun = new Date().getTime();
}

oneIn2Min();  // prints 'executed'
oneIn2Min();  // does nothing
oneIn2Min();  // does nothing
setTimeout(oneIn2Min, 2500);  // prints 'executed' 
```

您还可以选择从中制作一些简单的对象（以使您的代码井井有条）。它可能看起来像这样：

```
var CachedCall = function (minTime, cbk) {
    this.cbk = cbk;
    this.minTime = minTime;
};

CachedCall.prototype = {
    lastRun: null,

    invoke: function () {
        if (this.lastRun == null || new Date().getTime() - this.lastRun > this.minTime) {
            this.cbk();
        }
        this.lastRun = new Date().getTime();
    }
};

// CachedCall which will invoke function if last invocation
// was at least 2000 msec ago 
var c = new CachedCall(2000, function () {
    console.log('executed');
});

c.invoke(); // prints 'executed'
c.invoke(); // prints nothing
c.invoke(); // prints nothing 
setTimeout(function () {c.invoke();}, 2300); // prints 'executed' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:48:01.053

如果您愿意包含第 3 方库，这在其他任务中也可能非常方便：http: [//momentjs.com/docs/#/manipulating/add/](http://momentjs.com/docs/#/manipulating/add/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T13:51:09.227

你可以做这样的事情

```
var myVal = {
  data: null,
  time: new Date()
}

function getMyVal () {
  if(myVal.time < new Date(new Date().getTime() - minutes*1000*60)) {
    myVal.data = valFromRequest;
    myVal=time=new Date();
  }
  return myVal.data;
} 
```

# ios - iPhone 应用程序的哪些 Xcode 构建设置使其也可以在 ipad 上运行？

> ID：15272763
> 
> 赞同：1
> 
> 时间：2013-03-07T13:43:26.743
> 
> 标签：ios, xcode, build-process

我写了一个适用于 iphone 的应用程序。显然，如果它在 iphone 模式下在 ipad 上使用是可以的，但它是一个 iphone 应用程序。

我的应用程序被 Apple 拒绝了，我收到了一封邮件，其中包含一个名为 Screen_shot_0.png 作为附件的屏幕截图，该邮件是空的，中间是“我在 iPad 上的通用应用程序”的文本（如果你在 Xcode 中打开文件 MainWindow_iPad.xib ）。

可能应用程序是使用通用设置上传的，不确定。

我确实为 iphone 和 ipad 添加了图标、启动图像等。

现在我对以下设置感到困惑（单击 Xcode 项目文件）：我将给出我的设置：

项目“应用程序名称”

iOS 部署目标：6.1（我应该采用旧的吗？）

目标设备系列：iPhone（应该是 iPhone/iPad 吗？）

目标“appname”

目标设备系列：iPhone（应该是 iPhone/iPad 吗？）

一切都适用于 iPhone4、iPod、iPad3。

唯一的问题是iPad的启动图像在右侧被切断了一点，这让我认为使用了一些iPhone启动画面。这对苹果来说会是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:14:04.127

如果您希望为 iPhone 编写的应用程序以**iPhone 模式**在 iPad 上运行，那么您实际上做得太多了。

只需将其编写为仅适用于 iPhone 的应用程序，iPad 就会自动在 iPhone 模式下支持它。iPad 上的 iPhone 模式为用户提供了将分辨率放大到 2 倍的机会，但一切都“好像”在 iPhone 上运行。 *确保不要上传为（或设置属性以声称它是）通用的。不提供多个版本的截图，只提供 iPhone 截图。将“iPhone 模式”想象成在 iPad 上运行的 iPhone 模拟器。*

如果您想将 iPhone 和 iPad 应用程序（通常带有单独的故事板并且肯定带有不同的屏幕截图）打包在一个可以在任一设备上运行的包中，请仅使用“通用”。仅作为 iPhone 上传，它将以 iPhone 模式在 iPad 上运行。祝你好运！

# arrays - DQL 返回实体数组而不是对象

> ID：15272765
> 
> 赞同：5
> 
> 时间：2013-03-07T13:43:39.837
> 
> 标签：arrays, object, symfony, doctrine-orm

通常，如果我运行如下 DQL 查询，它将返回实体对象列表：

```
$d = $this->getDoctrine()->getRepository('xxxWebsiteBundle:Locations')->createQueryBuilder('l');
            ->where('l.enabled = :enabled')
            ->setParameter('enabled', 1)
        $result= $d
            ->getQuery(); 
```

但是，如果我添加一个选择，那么它会返回一个数组：

```
$d = $this->getDoctrine()->getRepository('XXXWebsiteBundle:Locations')->createQueryBuilder('l');
        $d
            ->select('l')
            ->addSelect(
            '( 3959 * acos(cos(radians(' . $latitude . '))' .
                '* cos( radians( l.latitude ) )' .
                '* cos( radians( l.longitude )' .
                '- radians(' . $longitude . ') )' .
                '+ sin( radians(' . $latitude . ') )' .
                '* sin( radians( l.latitude ) ) ) ) as distance'
        )
            ->where('l.enabled = :enabled')
            ->setParameter('enabled', 1)
            ->having('distance < :distance')
            ->setParameter('distance', $requestedDistance)
            ->orderBy('distance', 'ASC');
        $closeresult= $d
            ->getQuery(); 
```

因此，使用第一个查询我可以执行以下操作：

```
foreach($result->getResult() as $location){
    echo $location->getName()
} 
```

但是，使用第二个查询我必须使用我认为不正确的以下内容：

```
foreach($result->getResult() as $location){
        echo $location[0]->getName()
    } 
```

有什么想法可以改进吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T13:54:46.057

从 Doctrine ORM 2.2 开始，您可以使用[`HIDDEN`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#select-expressions)关键字。

```
SELECT a, SOME_EXPR() AS HIDDEN sortCond FROM Entity a ORDER BY sortCond DESC 
```

在您的示例中，它将如下所示：

```
$d = $this
    ->getDoctrine()
    ->getRepository('XXXWebsiteBundle:Locations')
    ->createQueryBuilder('l');

$d
    ->select('l')
    ->addSelect(
        '( 3959 * acos(cos(radians(' . $latitude . '))' .
            '* cos( radians( l.latitude ) )' .
            '* cos( radians( l.longitude )' .
            '- radians(' . $longitude . ') )' .
            '+ sin( radians(' . $latitude . ') )' .
            '* sin( radians( l.latitude ) ) ) ) AS HIDDEN distance'
    )
    ->where('l.enabled = :enabled')
    ->setParameter('enabled', 1)
    ->having('distance < :distance')
    ->setParameter('distance', $requestedDistance)
    ->orderBy('distance', 'ASC');

    $closeresult = $d->getQuery(); 
```

# php - 对多对多关系执行搜索

> ID：15272769
> 
> 赞同：0
> 
> 时间：2013-03-07T13:43:49.187
> 
> 标签：php, mysql, many-to-many, relationship

我有一个数据库（出于此示例的目的），它有两个具有多对多关联的表（带有一个用于保存关联的中间表）。这里有结构：

表 A：

```
+-----+-------+-------+-------+
| aID | aCol1 | aCol2 | aCol3 |
+-----+-------+-------+-------+
|  1  |  foo  |  aoo  |  doo  |
+-----+-------+-------+-------+
|  2  |  bar  |  aar  |  dar  |
+-----+-------+-------+-------+
|  3  |  baz  |  aaz  |  daz  |
+-----+-------+-------+-------+ 
```

表 B：

```
+-----+-------+
| bID | bCol1 |
+-----+-------+
|  1  | alice |
+-----+-------+
|  2  |  bob  |
+-----+-------+ 
```

关联表：

```
+-----+-----+
| aID | bID |
+-----+-----+
|  1  |  1  |
+-----+-----+
|  2  |  2  |
+-----+-----+
|  3  |  1  |
+-----+-----+ 
```

如果我想通过 aCol2 LIKE 'aa%' 搜索信息并且该行与 bCol1 = 'bob' 有关联（即仅导致行 aID = 2），我如何组装一个可以执行类似操作的 MySQL 查询？

ps 抱歉，不清楚，我不太确定措辞，但简而言之，它是关于从一个记录中搜索数据，该记录（为此）通过连接表具有 1-* 关系多个记录，按存在于整个集合中的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:48:42.210

```
SELECT
    a.*
FROM
    table_b b
    INNER JOIN associations ab ON (b.b_id = ab.b_id)
    INNER JOIN table_a a ON (ab.a_id = a.a_id)
WHERE
    b.col_1 = 'bob'
    AND a.col_2 LIKE 'aa%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:47:23.210

已经有一段时间了，但我相信这应该有效：

```
SELECT
    *
FROM
    A,
    B,
    associations
WHERE
    A.aCol2 LIKE 'aa%' AND
    A.aID = associations.aID AND
    associations.bID = B.bID 
```

您必须执行 2 个内部连接才能组合 3 个表。

# c# - C#中的锁定线程

> ID：15272776
> 
> 赞同：3
> 
> 时间：2013-03-07T13:44:13.180
> 
> 标签：c#, multithreading, timer, thread-safety

在我的 C# 项目中，我使用 Timer.One(keyboard_timer) 用于观察用户是否按下 F8，另一个 Timer(clipboard_time) 用于观察剪贴板是否包含文本。在我的项目中，键盘始终启用当用户按下 F8 时，clipboard_timer 被启用。如果用户再次按下 F8，clipboard_timer 被禁用。我的项目做了什么当用户按下 F8 并复制一个单词时，我的项目会在窗口中显示复制的单词的含义。我的程序在后台运行并始终检查用户是否按 F8，如果他这样做了，那么我的程序一直检查剪贴板，如果它包含文本（单词），如果它每次都显示单词的含义。我的代码在这里：

在初始化

```
 keyboard_timer.Enabled = true;
        keyboard_timer.Tick += new EventHandler(keyboard_timer_Tick); 
```

然后

```
 public void keyboard_timer_Tick(object sender, EventArgs e)
    {
        // clipboard enable
        if ((a % 2) != 0)
        {
      //  F9 is for Easy mood to eanble

             if ((GetAsyncKeyState(Keys.F9) == -32767) && hot_key == "F9")
            {
                label2.Text = "Easy";
                online_clipboard_active = "";
                Clipboard.Clear();
                clipboard_timer.Enabled = true;
                clipboard_timer.Tick += new EventHandler(clipboard_timer_Tick);
               ++a;           
            }

    ///// // F8 is for online Mood
            else if ((GetAsyncKeyState(Keys.F8) == -32767) && online_hot_key == "F8")
            {
                label2.Text = "Online";
                online_clipboard_active = "on";
                clipboard_timer.Enabled = true;                    
                clipboard_timer.Tick += new EventHandler(clipboard_timer_Tick);

                ++a;

            }

        }// end of enable 

        //clipboard disable
        if ((a % 2) == 0) // 
        {
            // F9 is for Easy mood to disable here
            if ((GetAsyncKeyState(Keys.F9) == -32767) && hot_key == "F9")
            {
                   label2.Text = "Off";
                    clipboard_timer.Enabled = false;
                    ++a;
            }

            // F8 is for online Mood to disable here
             else  if ((GetAsyncKeyState(Keys.F8) == -32767) && online_hot_key == "F8")
            {
                label2.Text = "Off";
                online_clipboard_active = "";
                clipboard_timer.Enabled = false;
               ++a;                   
            }

        }//end of clipboard disable

    }// end of keyboard timer 
```

剪贴板计时器是

```
 public void clipboard_timer_Tick(object sender, EventArgs e)
    {

        if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Text))
        {
            string x = Clipboard.GetText();
            Clipboard.Clear();

            if ((a%2)==0 && online_clipboard_active == "on")
            {
                //cal online_mood form to translate the string from googletranslator
                online_mood o = new online_mood(x);
                o.Show();
            }

            else if((a%2)==0 && online_clipboard_active == "")
            {
                //cal show_meaning form to show the meaning into a window
                show_meaning s = new show_meaning(x);
                s.Show();
            }        
        }

    }// end of clipboard timer Tick 
```

我希望当剪贴板定时器启用时键盘定时器将被锁定，因为它们都使用变量。当剪贴板计时器运行时，键盘计时器将被锁定，然后当剪贴板计时器完成时它会工作，然后键盘计时器将被重新激活我该如何解决这个问题？有人帮帮我吗？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:01:34.187

查看[C# 锁](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)

你基本上这样做：

```
public Object lockObject = new Object(); //You want a separate object so that it's not changed when lock is active

...    
//Code that can be run by any number of thread at the same time
...

lock(lockObject)
{
     ...
     //Code that is accessable by only one thread at a time:
     ...
}

...    
//Code that can be run by any number of thread at the same time
... 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:04:28.143

简单的锁定可以用一个静态成员来完成。

```
private static readonly object Sync = new object(); 
```

然后在设置或获取信息之前使用

```
lock(Sync) 
```

锁定变量。

顺便说一句：我不明白你想要做什么。也许您应该使用表单的 Keypress 事件而不是计时器。

# android - HTTP post 400 错误请求

> ID：15272779
> 
> 赞同：0
> 
> 时间：2013-03-07T13:44:27.603
> 
> 标签：android, post, android-asynctask

当我尝试使用我的 restTemplate.postForEntity 时，我收到 404 bad request 我的错是什么？

代码：

服务器调用者：

```
public ServerError login(String username, String password) {
       User user = new User();
       user.setUsername(username);
       user.setPassword(password);

       try {
           String URL = "http://"+ipAddress+"/ProjectTeamF-1.0/service/login.json";
           Object[] params = new Object[]{URL,user};
           new login().execute(params);

       } catch (ResourceAccessException rae) {
           receivedUser = null;
           return ServerError.ServerNotFound;
       } catch (HttpServerErrorException hsee) {
           receivedUser = null;
           return ServerError.WrongData;
       } catch(RestClientException rce){
           receivedUser = null;
           return ServerError.WrongData;
       } catch (Exception e) {
           System.out.println("error " + e);
           receivedUser = null;
           return ServerError.OtherError;
       }
       return ServerError.NoError;
   } 
```

异步任务：

```
public class login extends AsyncTask<Object[], Void, Void> {
public ServerCaller sc = ServerCaller.getInstance();
public User body;

@Override
protected Void doInBackground(Object[]... params) {
    String message = "";
    try {
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setContentType(MediaType.APPLICATION_JSON);
        HttpEntity<User> _entity = new HttpEntity<User>((User)params[0][1], requestHeaders);
        RestTemplate templ = new RestTemplate();
        templ.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
        templ.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        ResponseEntity<User> _response = templ.postForEntity(params[0][0].toString(), _entity, User.class); //null here in order there wasn't http converter errors because response type String and [text/html] for JSON are not compatible;
        body = _response.getBody();
        return null;

    } catch (Exception e) {
        message = e.getMessage();
        return null;
    }
}

@Override
   protected void onPostExecute(Void aVoid) {
   super.onPostExecute(aVoid);
   sc.setReceivedUser(body);
}
} 
```

当我在 templ.postForEntity() 调试程序时崩溃。该错误告诉我这是一个 400 - 错误请求。

谢谢！

# c# - 使用 LINQ to SQL 和 sqlmetal System.InvalidCastException 的 C# 中的错误：指定的强制转换无效

> ID：15272783
> 
> 赞同：0
> 
> 时间：2013-03-07T13:44:34.963
> 
> 标签：c#, asp.net, sql, linq, sqlmetal

当运行我在我们的生产服务器或其他开发人员机器上编写的一些代码时，它会在这条线上崩溃。

```
Ac_CalcDetail xy = db.Ac_CalcDetails.Where(chld => chld.CalcIdent.Equals(CalcIdent)).First(); 
```

CalcIdent 只是一个字符串形式的 guid。

我已经在我的本地数据库上运行了 sqlmetal，其中 Ac_CalcDetail 是我们创建强类型代码和 Ac_CalcDetail 类的主表。问题是当我在生产服务器或其他开发人员的一台机器上运行代码时。我们已经使用 LINQ 一年多了，从来没有遇到任何问题，所以对此感到非常困惑。以前我得到的异常非常具体，说哪个字段丢失了，哪个字段很棒，但从我的研究来看，这个错误显然可能是某个字段具有错误的数据类型。噩梦，完全不可能通过这个错误进行调试。

我认为目前唯一的解决方案是在 SQL Server Management Studio 中备份我的数据库，然后让其他人使用它。由于我们是一家小公司，我们倾向于对我们自己的数据库做任何我们想做的事情，然后创建各种 SQL 脚本放在一个保管箱文件夹中以使我们的数据库同步（或者至少我们认为是同步的）。不确定这是否意味着我们要么必须停止使用 LINQ，要么开始使用一些更高级的 SQL 东西（SQL 存储库或 SQL 数据库比较工具等）。

这很奇怪，因为我知道我们的数据库多年来（如果有的话）并不完全一样，所以不知道为什么现在会发生这个错误以及为什么错误消息没有说明任何内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:30.323

改变

> Ac_CalcDetail xy

至

> 变量 xy

而不是尝试调试它。但显然看起来你有一些类型错误。

# python - selenium chrome 附加默认配置文件

> ID：15272785
> 
> 赞同：0
> 
> 时间：2013-03-07T13:44:43.830
> 
> 标签：python, selenium, pyqt

我正在使用 python ana selenium 来自动化某些过程，但无法将 selenium 附加到我尝试使用的默认 chrome 配置文件中，

```
capability = webdriver.DesiredCapabilities.CHROME
self.driver = webdriver.Remote('http://127.0.0.1:9515/wd/hib',capability) 
```

当然，我首先开始使用chromedriver，并且还尝试过，

```
import time
from selenium import webdriver
import selenium.webdriver.chrome.service as service
service = service.Service('./chromedriver')
service.start()
capabilities = {'chrome.binary': '/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome'}
driver = webdriver.Remote(service.service_url, capabilities)
driver.get('http://www.google.com/xhtml');
time.sleep(5) # Let the user actually see something!
driver.quit() 
```

这会导致 selenium.common.exceptions.WebDriverException: Message: u'Could not find Chrome binary at：

并尝试过，

```
self.driver = webdriver.Chrome("./chromedriver") 
```

这有效，但不是默认配置文件，并且还想知道如何用这个打开新窗口或新标签？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:24:16.473

不要直接从网站上复制/粘贴一些东西！自己看看那个文件夹，里面有什么吗？！我的猜测是否定的。这就是为什么当你离开那一点时，它工作得很好，因为它正在寻找应该存在的 Chrome！

无论如何，更多的是你错误地使用它！

如果你想给 Selenium 一个不同的配置文件用于 Chrome，那么你需要使用这个`options`类：

[https://code.google.com/p/selenium/source/browse/py/selenium/webdriver/chrome/options.py](https://code.google.com/p/selenium/source/browse/py/selenium/webdriver/chrome/options.py)

你想要这个`add_argument`功能。

为什么？

这是因为要让 Chrome 使用另一个配置文件，您需要使用特定的命令行（特别是`--user-data-dir`）启动 Chrome：

[http://www.chromium.org/user-experience/user-data-directory](http://www.chromium.org/user-experience/user-data-directory)

该`add_argument`函数公开了添加命令行开关的能力。

因此，如果您使用该`add_argument`功能，Selenium 将简单地将您提供的任何内容传递给 Chrome，作为其命令行开关的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T07:57:13.087

要找出您的 chrome 配置文件所在的位置，请启动 chrome 并键入

```
chrome://version 
```

在地址栏中。在“配置文件路径：”下，您将看到您当前使用的配置文件的位置。例如：

```
~:\Users\<username>\AppData\Local\Google\Chrome\User Data\Default 
```

# eclipse - 子剪辑不可访问的存储库位置

> ID：15272791
> 
> 赞同：0
> 
> 时间：2013-03-07T13:44:52.133
> 
> 标签：eclipse, svn, subclipse

我正在使用 subclipse 来管理我的源版本控制。在 SVN 存储库下的 Eclipse 中，我添加了一些位置，例如： [http://myServ.com/svn/Location1/](http://myServ.com/svn/Location1/) [http://myServ.com/svn/Location2/](http://myServ.com/svn/Location2/) 我正在使用从这些位置签出的一些项目（例如[http://myServ.com/svn/Location1/project1/](http://myServ.com/svn/Location1/project1/) , [http://myServ.com/svn/Location2/projectN/](http://myServ.com/svn/Location2/projectN/) )

我的 SVN 服务器配置为不直接授予访问权限：http: [//myServ.com/svn/](http://myServ.com/svn/) 我已将此位置错误地添加到我的工作区中...如果我尝试打开我 SubClipse 返回一个错误，无法访问的位置（当然）。

因此，如果我尝试删除它，subclipse/Eclipse 会告诉我无法删除，因为正在使用中，并且我没有找到强制删除的方法。

不幸的是我不能把它留在那里，因为当我尝试标记/破坏时，subclipse 有一些问题。

我可以再做一次我的工作区，但是有没有办法强制删除这个错误的位置条目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:42:45.510

我找到了最快的解决方案：你必须编辑

工作区/.metadata/.plugins/org.tigris.subversion.subclipse.core/.svnProviderState

该文件不是很清楚，但是通过最小的努力，您可以了解必须准确删除的内容。

# java - 检查单个捕获组

> ID：15272799
> 
> 赞同：0
> 
> 时间：2013-03-07T13:45:24.343
> 
> 标签：java, regex, http

我有一个单独的 HTTP 请求，我为其构建了一个表达式。到目前为止，表达式有效，我可以将请求拆分为字符串数组，但我想看看是否可以通过匹配单个捕获组来简化它。

所以：

```
private void process(final String message) {
     Pattern pattern = Pattern.compile("(GET|get){1}\\s(/.*)\\s(HTTP|http)(/1\\.0)");
     Matcher matcher = pattern.matcher(message);    
} 
```

请求是这样的：

```
GET / HTTP/1.0 
```

非常简单。那么，有什么方法可以让我通过每个捕获组来检查是否有匹配项？假设请求有 POST 而不是 GET，是否可以检查第一个捕获组，然后返回 501“未实现”响应？

我的第一个解决方案是简单地按空格拆分消息，然后检查每个单独的数组元素。但这似乎有点“糟糕”。

**编辑：**

问题是，matches() 匹配整个事情，如果一组失败，整个表达式就会失败，这是我不想要的。任何数量的组都应该有可能失败/成功，而不会抛出 IllegalStateException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:40.910

即使在某些组不需要时仍然匹配，它们需要是可选的。

然后使用该`Matcher#find()`方法以及`Matcher#group(x)`访问组（从 1 开始，因为 0 是整个匹配项）。

例子：

```
String msg = "GET HTTP 200 OK"; //resource and protocol version are left out by purpose

Pattern pattern = Pattern.compile("(GET|get)?\\s(/[^\\s]*)?\\s(HTTP|http)?(/1\\.0)?");
Matcher matcher = pattern.matcher( msg );

while ( matcher.find() )
{
  System.out.println(matcher.group( 1 ));  //prints GET
  System.out.println(matcher.group( 2 ));  //prints null since there's no resource
  System.out.println(matcher.group( 3 ));  //prints HTTP
  System.out.println(matcher.group( 4 ));  //prints null since there's no version string
} 
```

作为旁注，我需要稍微调整一下你的表情，因为第二组`(/.*)`会贪婪地匹配第一个斜线之后的任何内容。不过，它仍然远非完美。

第二种方法可能是应用多个表达式/模式并将它们一个接一个地应用于匹配器。

例子：

```
Pattern methodPattern = Pattern.compile("GET|get");
Matcher matcher = methodPattern.matcher( msg );

if ( matcher.find() )
{
  System.out.println("method: " + matcher.group());
}

if ( matcher.usePattern( Pattern.compile("\\s/([^\\s]*)") ).find() )
{
  System.out.println("resource: " + matcher.group(1));
}

if ( matcher.usePattern( Pattern.compile("HTTP|http") ).find() )
{
  System.out.println("protocol: " + matcher.group());
}

if ( matcher.usePattern( Pattern.compile("/(\\d\\.\\d)") ).find() )
{
  System.out.println("version: " + matcher.group(1));
} 
```

这使用了匹配器的读取位置设置为匹配后的位置的事实，并且任何后续调用`find()`都将从那里开始。如果模式不匹配，则位置保持不变。

因此，这些模式必须按顺序应用，但是是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:02:12.873

你知道做完之后`matches()`，`Matcher`还可以用`group()`方法提取特定组的匹配内容吗？但是，您需要调整模式以匹配 GET 和 POST（以及任何其他方法）。像这样检索相关字符串后，您可以再次在其上匹配（另一个）模式，或在各种条件构造之一中使用它......（现在也可以使用`switch`语句`String`（Java 7）。）

另一种策略是匹配分隔符，并允许*任何*字符串作为 HTTP 方法（甚至是垃圾）。然后检查实际的组值。

还有一种策略是为您要单独处理的每个错误条件设置一个单独的模式，然后查看哪个模式匹配（如果匹配，则适当地处理错误）。但是，经常会出现遗漏的情况，因此并非所有可能的错误都得到处理。你真的需要知道你在做什么......

但是，Java 确实提供了很多网络库代码，因此您不需要进行这种类型的正则表达式检查。例如，参考`javax.servlet.http.HttpServletRequest#getMethod()`...

# web-services - SugarCRM - 如何使用 Web 服务响应填充某些字段？

> ID：15272803
> 
> 赞同：0
> 
> 时间：2013-03-07T13:45:38.183
> 
> 标签：web-services, sugarcrm

我有我的`index.php`文件，它正在用糖调用 Web 服务，当我在本地 Apache 上运行它时它返回我作为响应，这个结果是可以的：

```
<soapenv:Envelope   <soapenv:Body> <ns:CommandResponseData> 
 <ns:Operation  name="BalanceAdjustment"> </ns:Operation>  
</ns:CommandResponseData> </soapenv:Body> </soapenv:Envelope> 
```

我在详细视图中创建了一个额外的按钮，我计划将其称为此 Web 服务，但我不知道如何绑定该按钮、我的 index.php 文件以及该 Web 服务的结果以打包到某个字段中。出于测试目的，我想将整个响应放在 Contact 模块的字段 Comment 中的示例中：以便字段 Comment 应包含在整个响应之上（稍后我将对其进行解析）。

我创建了新按钮（目前不执行任何操作）

我在 view.detail.php 中创建了按钮。

```
<?php
if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point'); 
require_once('include/json_config.php'); 
require_once('include/MVC/View/views/view.detail.php'); 
class ContactsViewDetail extends ViewDetail
{
    function ContactsViewDetail()
    {
        parent::ViewDetail();
    }
    function display()
    {
        $this->dv->defs['templateMeta']['form']['buttons'][101] = array (
            'customCode' => '<input title="Call" accesskey="{$APP.LBL_PRINT_PDF_BUTTON_KEY}" class="button" onClick="javascript:CustomFunctionHere();" name="tckpdf" value="Call" type="button">');
        parent::display();
    }
}
?> 
```

我会很感激这方面的帮助。所以概括一下：通过这个我的按钮，我想调用我的 index.php 文件，该文件将调用 Web 服务，我想在我的字段 Comment 中设置 Web 服务响应（我在 index.php 文件中得到响应为`htmlspecialchars($client->__getLastResponse()`）

这是我目前用来调用某些 Web 服务的整个 index.php 文件。

```
 <?php
        include_once 'CommandRequestData.php';
        include_once 'CommandResponseData.php';

        $client = new SoapClient("http://127.0.0.1:8181/TisService?WSDL", array(
              "trace"      => 1,        // enable trace to view what is happening
              "exceptions" => 1,        // disable exceptions
              "cache_wsdl" => 0)        // disable any caching on the wsdl, encase you alter the wsdl server
          );

        $req = new CommandRequestData();

        $req->Environment->Parameter[0]->name = "ApplicationDomain";
        $req->Environment->Parameter[0]->value = "CAO_LDM_00";
        $req->Environment->Parameter[1]->name = "DefaultOperationNamespace";
        $req->Environment->Parameter[1]->value = "CA";

        $req->Command->Operation->namespace = "CA";
        $req->Command->Operation->name = "BalanceAdjustment";
        $req->Command->Operation->ParameterList->StringParameter[0]->name = "CustomerId";
        $req->Command->Operation->ParameterList->StringParameter[0]->_ = "387671100009";
        $req->Command->Operation->ParameterList->IntParameter[0]->name = "AmountOfUnits";
        $req->Command->Operation->ParameterList->IntParameter[0]->_ = "1000";
        $req->Command->Operation->ParameterList->IntParameter[1]->name = "ChargeCode";
        $req->Command->Operation->ParameterList->IntParameter[1]->_ = "120400119";

        try {
            $result = $client->ExecuteCommand($req);
$result->CommandResult->OperationResult->Operation->name . "<br /><br />";          
        }
        catch(SoapFault $e){
            echo "<br /><br />SoapFault: " . $e . "<br /><br />";
        }
        catch(Exception $e){

        }

        echo "<p>Response:".htmlspecialchars($client->__getLastResponse())."</p>";
    ?> 
```

# arrays - 我无法将数组从 main 传递到特定函数

> ID：15272804
> 
> 赞同：0
> 
> 时间：2013-03-07T13:45:40.213
> 
> 标签：arrays

我在将值传递给`main()`函数时遇到问题`method()`。我有变量“selected”，它被填充到另一个名为`version()`;的函数中。`selected`是一个二维矩阵。然后我将这些值分配给一维矩阵，称为`check`：

```
check[1]=selected[1][1]
check[2]=selected[1][2]
.
.
.
check[190]=selected[19][10]. 
```

然后我需要在函数中使用向量“检查” `method()`，这就是我的问题......我无法正确传递它......

```
int main()
{
  double **selected;
  version(&selected);

  double *check;
  check=dvector(n*T);

  for(v=1;v<=n;v++) {
    for(t=1;t<=T;t++){
       check[v]=selected[v][t];
    }
  }

  method(check);

}

void version(selected)
double ***selected;
{
  *selected=dmatrix(n,T,1,1);
   .
   .
   .
  for(v=1;v<=n;v++) {
    for(t=1;t<=T;t++){
      (*selected)[v][t]=xd[v][point[v][t]];
    }
  }
}

void method(check)
double *check;
{

  for(v=1;v<=n;v++) {
    for(t=1;t<=T;t++){
      printf("check[%u]=%f\n",v,check[v]);
    }
  }
} 
```

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:55:23.757

当您将数组传递给函数时，无需给出`&`. 数组始终作为参考传递。 `marsversions(selected);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:44:44.523

```
 check=dvector(n*T);

  for(v=1;v<=n;v++) {
    for(t=1;t<=T;t++){
       check[v]=selected[v][t];
    }
  } 
```

这里 check 的长度为 n*T 但后来 v 是从 1 到 n 所以只有 check 的前 n 个元素得到一个值，所有其他元素都是未定义的。对于零偏移数组，v 将被正确替换为 v*T+t，但这里的偏移量为 1，它是 (v-1)*T+(t-1)+1:-

```
 check[v*T-T+t]=selected[v][t]; 
```

# jquery - webapi 和 jquery 给我问题

> ID：15272807
> 
> 赞同：0
> 
> 时间：2013-03-07T13:45:44.780
> 
> 标签：jquery

我对html不太了解。但是由于某种原因，我使用 $(...) 之类的项目并不总是可以通过 web api 工作。如果我将我的项目离线并从我的系统运行它，它们就可以工作。

例子：

使用这个**$('...').bind('dragstart'...)**来移动窗口可以离线工作，但在 webapi 上，事件不会被捕获。

使用 **$(document).ready(function () {**似乎会导致查找引用出现问题。删除函数并且代码会找到引用。

使用 jqwidgets 此行无法触发 **$("#jqxgrid").jqxGrid**

我在这里完全没有想法，有什么想法吗？

* * *

## 在此处添加我的代码，因为注释不会提供足够的空间：

.html 文件

```
<!DOCTYPE html5>
<html lang="en">
<head>
<title>---</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href=           "../../www/jQWidgets/jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../www/jQWidgets/scripts/jquery-1.9.1.min.js" ></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxdata.export.js"></script> 
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxgrid.edit.js"></script>  
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxgrid.columnsresize.js"></script> 
    <script type="text/javascript" src="../../www/jQWidgets/jqwidgets/jqxgrid.export.js"></script> 
    <script type="text/javascript" src="../../www/jQWidgets/scripts/gettheme.js"></script>
<script type='text/javascript' src='../../www/javascript/spreadSheet.js'></script>
<script type='text/javascript' src='../../www/javascript/dataLoader.js'></script>
<script type='text/javascript' src='../../www/javascript/windowMaker.js'></script>
<link href="../../www/window.css" rel="stylesheet" />
<style type="text/css" media="screen">
    canvas, img { display:block; margin:1em auto; border:1px solid black; }
    canvas { background:url(../../www/background.png) }
</style>
<script type="text/javascript">

    var loadedData = loadData();
    makeWindow();

    function init()//this is called after the data is loaded. So hult all other action untill its read. 
    {
        var data = loadedData[0].data.Name;
       // makeSpreadSheet()

    }

</script>
</head>
<body  class='default'>
    <div id="demo4_box" class="box message" data-minwidth="75" data-minheight="50">
        <div id="bar" class="handle bar"><h2> window1</h2></div>
        <div id="content" class="contents"><canvas id="canvas1" width="100" height="100"></canvas></div>
        <div id="slider" class="handle resize">//</div>
    </div> 
    <div id='jqxWidget'>
        <div id="jqxgrid"></div>
            <div style='margin-top: 20px;'>
            <div style='float: left;'>
                <input type="button" value="Export to Excel" id='excelExport' />
            </div>
        </div>
    </div>

</body>
</html> 
```

数据加载器js文件

```
function loadData()
{
    var loadedData = new Array();
    $document).ready(function () {
        // Send an AJAX request
        $.getJSON("api/DB/",
        function (data) {
            $.each(data, function (key, val) {
                loadedData.push(val);
            }); init();
        });
    });
    return loadedData
} 
```

窗口制造商js文件

```
function makeWindow( )
{
    $(window).load(function () {

        $('#demo4_box').bind('dragstart', function (event) {

            return $(event.target).is('.handle');
        }).bind('drag', function (event) {
            $(this).css({
                top: event.offsetY,
                left: event.offsetX
            });
        });

        $(".resize").bind('dragstart', function (event) {
            var $box = $(this).closest(".box");

            $box.data("width", $box.width());
            $box.data("height", $box.height());
            $box.data("x", event.offsetX);
            $box.data("y", event.offsetY);

        }).bind("drag", function (event) {
            var $box = $(this).closest(".box");

            $box.width(Math.max($box.data("width") - $box.data("x") + event.offsetX, $box.data("minwidth")));
            $box.height(Math.max($box.data("height") - $box.data("y") + event.offsetY, $box.data("minheight")));
        });
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T09:56:09.637

您用于包含脚本的相对 url 似乎可能是罪魁祸首......

`../../www/<Blah>`似乎它在 *nix 文件系统上有效，因此直接在浏览器中加载文件（绕过网络服务器）可能能够找到您的脚本，但是，当站点在 (say) 上作为服务器时`www.example.com/test.html`，没有虚拟目录级别“向上”。

诊断这是否是问题的最简单方法是使用 Firebug / Chrome 开发人员控制台并转到网络选项卡。将过滤器设置为 Javascript 并查看它是否真的在检索正确的 JS 文件。

这给我们带来了一个常用但仍然有点棘手的解决方法 - 基本 url 的概念。因为您希望您的页面能够正常工作，无论它是在

*   example.com/Test.html
*   example.com/MyApp/Test.html
*   example.com/MyApp/User/EditProfile.html

并且由于您不能总是知道它将被部署在哪里，或者明显的虚拟 URL 是否以任何方式与逻辑 url 相关（例如，出于 SEO 原因，有时`/Find.php?Term=Bob`会映射到`/Find/Bob`），您需要一种标准化的方式来引用源文件。

如果您*知道*您将在虚拟目录路径的根目录下运行，请使用相对于`/`eg的 url `/static/scripts/jquery.js`。另一方面，如果您可能部署在不同的位置，则通常使用服务器端脚本语言来填充`base url`变量。

假设 PHP 可能看起来像......

```
<script type="text/javascript" src="<?=$BaseUrl;?>static/scripts/jquery.js"> 
```

您将如何确定`$BaseUrl`取决于应用程序 - 有些通过巧妙地检查请求 url、使用逻辑文件系统和 url 重写规则的知识自动完成，有些则将其设置为配置选项。

顺便说一句，函数具有范围，与任何变量相同 - 因此在函数内部声明函数意味着只要父函数具有对它的引用或具有更大范围的变量指向它，它就会存在。例如...

```
$(document).ready(function() {

    func = function() {
        alert('ok1');
    }

    function func2() {
        alert('ok2');
    }

    func(); //Will work
    func2(); //Will work
});

func(); //Won't work for 2 reasons - one it's lost scope, 2 it will execute _before_ document is ready so before func has even been defined
func2(); //Won't work - same reasons 
```

但.....

```
var superfunc;

function func() {
    alert('ok1');
}

$(document).ready(function() {
    superfunc = function(){alert('super');}
    func(); //Will work, document will be ready    
}

func(); //Will work but document won't be ready
superfunc(); //Won't work until after document is ready 
```

有关更详细的说明，请参阅[此页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:48:44.953

试试`$.noConflict()`。可能是它的`$`标志与其他扩展名冲突。还要确保您`jquery.min.js`在头部指定了文件。

并请提及代码以供审查。

# google-app-engine - 试图理解在 Google App Engine 上搜索文档的想法

> ID：15272812
> 
> 赞同：0
> 
> 时间：2013-03-07T13:46:01.130
> 
> 标签：google-app-engine, full-text-search, documents

我正在尝试了解 Google App Engine 搜索 API 上的文档的概念。我遇到问题的概念是存储文档背后的想法。例如，假设在我的数据库中我有这个：

```
class Business(ndb.Model):
   name = ndb...
   description = ndb... 
```

对于每个企业，我都存储了一个文档，这样我就可以对名称和描述进行全文搜索。我的问题是：

1.  这是正确的吗？这是否意味着我们本质上将每个实体 TWICE 存储在两个不同的位置，只是为了使其可搜索？

2.  如果上面的答案是肯定的，有没有更好的方法呢？

3.  如果第 1 点的答案是肯定的，那么文件存储在哪里？到高级代表 DS？

我只是想确保我正确地考虑了这个概念。在文档中存储实体意味着我必须在两个不同的地方维护每个实体......看起来并不是很理想，只是为了让它可搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:10:46.687

你已经解决了。

[全文搜索概述](https://developers.google.com/appengine/docs/python/search/overview)

> Search API 允许您的应用程序对结构化数据执行类似 Google 的搜索。您可以搜索多种不同类型的数据（纯文本、HTML、原子、数字、日期和地理位置）。搜索返回匹配文本的排序列表。您可以自定义结果的排序和呈现方式。

由于您无法在数据存储中的模型内容“内部”进行搜索，因此搜索 API 提供了对文本和 html 执行此操作的能力。

因此，要将可搜索的文本文档（例如产品描述）链接到数据存储中的模型（例如该产品的价格），您必须“手动”在文档和它们相关的数据存储对象之间建立链接。您也可以完全独立地使用搜索 api 和数据存储，因此您必须将其内置。AFAIK 它们之间没有自动链接。

# ios - 如何在 ios Safari 的地址栏中实现刷新/停止按钮？

> ID：15272814
> 
> 赞同：0
> 
> 时间：2013-03-07T13:46:02.397
> 
> 标签：ios, objective-c, safari

就像地址栏上红色标记的刷新/停止按钮一样，我怎样才能创建一个这样的按钮？非常感谢！ ![iPhone上的野生动物园](../Images/e905e1ab6b4f20d1bb267a708e37ebfc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:55:22.170

`UITextField`有财产`rightView`。您可以分配`UIButton`给该属性。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:03:28.630

对，只需添加一个这样的按钮...

```
UIButton *theButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
theText.rightView = theButton;
theText.rightViewMode = UITextFieldViewModeAlways; 
```

但是您将需要刷新和停止图像作为按钮图像....

# glassfish - Jelastic 频繁出现 502 Application down

> ID：15272815
> 
> 赞同：0
> 
> 时间：2013-03-07T13:46:09.047
> 
> 标签：glassfish, jelastic

我最近尝试使用 Jelastic 试用版。我在上面创建了 3 或 4 个帐户。在我创建的每个环境中，我都使用了 Glassfish 服务器和 MongoDB 数据库。所有这些环境在一天之内都崩溃了，我得到 502 Application Down Error。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:42:02.407

作为一个潜在的原因，它可能是缺乏资源（小云）。GlassFish 是一个重型应用服务器，在 Jelastic 中它至少需要 6 个 cloudlet。您需要查看您的应用服务器的日志以了解详细的故障原因。1 如果没有帮助，请单击帮助 | 联系您的支持人员。联系支持。

# c++ - 分段错误，没有核心转储

> ID：15272817
> 
> 赞同：6
> 
> 时间：2013-03-07T13:46:12.200
> 
> 标签：c++, c, linux, segmentation-fault, coredump

我的程序中一直出现分段错误，但没有生成核心转储文件。ulimit 显示了一个无限的值， ulimit -c unlimited 只是为了确定，它似乎很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T14:47:11.577

如果您的程序以 root 身份（或具有 root 权限）运行，请检查：

`cat /proc/sys/fs/suid_dumpable`

或者如果程序是一个守护进程检查：

`getsebool allow_daemons_dump_core`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:54:04.470

可能有几个原因

*   对目录没有写权限
*   程序更改工作目录
    也在其他地方寻找核心
*   磁盘已满
*   ulimit 设置在一个 shell 中，程序在不同的 shell 或环境中启动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:05:54.640

要解决 shell 会话问题，前提是您不反对作为 root 进行测试：

```
#ifdef DEBUG
    // Enable core dumps
    struct rlimit corelim;

    corelim.rlim_cur = -1;
    corelim.rlim_max = -1;

    if (setrlimit (RLIMIT_CORE, &corelim) != 0)
    {
        log_error ("Couldn't set core limit");
    }
#endif 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-03-07T14:32:21.657

分段错误尤其发生在您访问内存中的错误地址时。资源很可能未正确初始化。例如，您可以使用 Valgrind 进行调试。

# c# - 将对象转换为列表

> ID：15272818
> 
> 赞同：1
> 
> 时间：2013-03-07T13:46:13.017
> 
> 标签：c#, .net, wpf

我从 WPF Attached Behavioral 中获取 ListBox 的选定项目列表，如下所示：

```
 private void ListBoxSelectionChanged(object param)
    {
        var selectedItems = param;
        SelectedMItems = selectedItems.ToString().Split(',').ToList<string>();
        //Console.WriteLine(selectedItems.ToString());

    } 
```

虽然它有效，但有没有其他更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:59:13.567

该`SelectedItems`属性是一个`IList`，所以我假设你的对象也是。

在这种情况下，最简单的方法是执行以下两项之一：

```
// If the list already contains strings
SelectedMItems = ((IList)selectedItems).Cast<string>().ToList();

// If the list contains other objects
SelectedMItems = ((IList)selectedItems).Cast<object>().Select(o => o.ToString()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:50:32.107

为了“更安全”，这样的事情可能会起作用：

```
var items = param as ObservableCollection<string>; 
```

甚至只是一个可枚举的：

```
var items = param as IEnumerable<string>; 
```

然后你有一个适当的项目集合。

# printing - Etross 短信打印机

> ID：15272819
> 
> 赞同：1
> 
> 时间：2013-03-07T13:46:13.690
> 
> 标签：printing, sms, gsm

总而言之，我从中国订购并收到了一台 Etroos SMS 打印机，现在我有了它，我看到用户手册简直就是个笑话！我按照用户手册向设备发送了一条短信并打印了一些东西，但我无法让它工作，这里有人使用过这些设备吗？手机能用，我可以发短信，好像确实收到了短信（我看到灯在变）但是没有打印，没有订单历史，甚至我都看不到历史中的短信！

任何想法？帮助表示赞赏。

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:47:34.680

如果您最终遇到同样的问题，最后通过使用制造商提供的最新实用程序升级固件和 prn 定义使其工作。

联系他们，他们回复很慢，使用贝宝付款，如果他们没有回答，他们会提出争议，他们会回复你！！！

阿米尔

# javascript - 匹配字符串并移除关联的 CSS

> ID：15272821
> 
> 赞同：0
> 
> 时间：2013-03-07T13:46:18.040
> 
> 标签：javascript, jquery, logic

所以我有一个 CSS 选择器的 Javascript 数组：

```
array is like the following: '.header', '#footer', '#nav', etc 
```

我还有一个 div 包含我的网站 CSS 作为文本（12,000 行长）：

```
<div id="all">
#nav
 {
   border: 1px solid;
   color: black;
 }
 #footer
 {
   display: block;
 }
 </div> 
```

我需要从数组中取出每个选择器并在 $('#all') 中匹配它，删除从选择器开始到结束括号的所有内容。

IE

```
// for each from the array
$('#all').find($(this));
// removes everything from selector to its end bracket 
```

任何人都可以建议吗？这是删除未使用的站点 CSS。我被困了一段时间。赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:58:47.697

> **更新：**添加了**调试模式**、**输入**和**输出**。

好吧，我猜你有一堆 CSS，你想删除一些规则。让我假设这些：

1.  每行只有一个选择器。
2.  每行都以该选择器开头。
3.  每一行都有一个完整的规则。IE，`selector {property: value;}`

如果第三个选项不成功，有很多[**CSS 压缩器**](https://www.google.co.in/search?q=css+compressor&aq=f&oq=css+compressor&aqs=chrome.0.57.3073&sourceid=chrome&ie=UTF-8#hl=en&sugexp=les%3B&gs_rn=5&gs_ri=psy-ab&pq=css%20compressor&cp=15&gs_id=4&xhr=t&q=css+compressor+online&es_nrs=true&pf=p&sclient=psy-ab&oq=css+compressor+&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.43287494,d.bmk&fp=1fc7e9b832ceaa6b&biw=1920&bih=979)，你可以使用它们来制作这个 CSS：

```
#footer
{
  display: block;
} 
```

进入：

```
#footer { display: block; } 
```

现在，一旦您将其保存在文本文件中，您就可以使用 PHP 或一些好的编程语言进行操作。我**不推荐**客户端之一。假设您有 PHP，并且这里有一组规则：

```
#nav { border: 1px solid; color: black; }
#footer { display: block; } 
```

你有你的数组：

```
$remove = array('.header', '#footer', '#nav'); 
```

你可以使用这样的东西：

```
<pre><?php
$debug = false;
$rules[] = ".header { border: 1px solid; color: black; }";
$rules[] = "#nav { border: 1px solid; color: black; }";
$rules[] = "#footer { display: block; }";
$rules[] = "#header { border: 1px solid; color: black; }";
$rules[] = ".nav { border: 1px solid; color: black; }";
$rules[] = ".footer { display: block; }";
$remove = array('.header', '#footer', '#nav');
$final = array();
foreach ($rules as $rule)
{
    if ($debug) echo "Debug: ", var_dump(strpos($rule, " ")) . "\n";
    if ($debug) echo "Debug: ", var_dump(substr($rule, 0, strpos($rule, " "))) . "\n";
    if ($debug) echo "Debug: ", var_dump(in_array(substr($rule, 0, strpos($rule, " ")), $remove)) . "\n";
    if ($debug) echo "---\n";
    if ( !in_array(substr($rule, 0, strpos($rule, " ")), $remove) )
        $final[] = $rule;
}
echo implode("\n", $final);
?></pre> 
```

上面的脚本包括一个调试。如果设置`$debug`为 true，您可以看到正在检查的不同内容。

对此的输入是：

```
.header { border: 1px solid; color: black; }
#nav { border: 1px solid; color: black; }
#footer { display: block; }
#header { border: 1px solid; color: black; }
.nav { border: 1px solid; color: black; }
.footer { display: block; } 
```

输出是：

```
#header { border: 1px solid; color: black; }
.nav { border: 1px solid; color: black; }
.footer { display: block; } 
```

### 小提琴： http: [//phpfiddle.org/main/code/ehd-z4j](http://phpfiddle.org/main/code/ehd-z4j)

# security - 其他 EC2 用户网络可以嗅探我的流量吗？

> ID：15272827
> 
> 赞同：2
> 
> 时间：2013-03-07T13:46:29.560
> 
> 标签：security, amazon-ec2

是否有其他 EC2 用户可以通过网络嗅探来自或流向我的一个 EC2 实例的流量，即使我们的两个虚拟实例都在同一物理主机上？而且因为这个对我来说是最敏感的，所以我会特别问，另一个使用的 EC2 是否可以找到一种方法来嗅探我的 EC2 实例和我的 RDS 数据库之间的流量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:51:01.380

我不是 EC2 方面的专家，但如果 Amazon 为单独的实例设置了 NAT'ed DomU（我相信他们会这样做），你应该是安全的。

使用 NAT，每个实例只接收发往该主机的数据包。所以不可能进行数据包嗅探（至少在理论上）。

我应该补充一点，有一些基于 L1 缓存嗅探的有趣的嗅探攻击（如“看看我们做了它并写了一篇关于它的论文”）。 [链接到论文，如果你有兴趣](http://www.cs.unc.edu/~reiter/papers/2012/CCS.pdf)。

# wpf - 文字无法在换行面板中正确显示

> ID：15272828
> 
> 赞同：1
> 
> 时间：2013-03-07T13:46:29.687
> 
> 标签：wpf, wpf-controls, datatemplate, stackpanel, wrappanel

```
<WrapPanel Margin="20,5,10,0" Orientation="Horizontal">

<ItemsControl ItemTemplate="{StaticResource EvenNotesItemsTemplate}" AlternationCount="2" ItemsSource="{Binding}"  />
<ItemsControl ItemTemplate="{StaticResource OddNotesItemsTemplate}" AlternationCount="2" ItemsSource="{Binding }"  />

</WrapPanel>

<DataTemplate x:Key="OddNotesItemsTemplate">
 <WrapPanel x:Name="OddNotesStackPanel"  Orientation="Horizontal" >
 <TextBlock Text="{Binding Superscript}" FontWeight="Bold" FontSize="8"/>
  <TextBlock Text=" "/>
 <TextBlock Text="{Binding}" TextWrapping="Wrap"   Foreground="Black" FontWeight="Normal"/>
</WrapPanel>
  <DataTemplate.Triggers>
    <Trigger Property="ItemsControl.AlternationIndex" Value="0">
    <Setter Property="Visibility" TargetName="OddNotesStackPanel" Value="Collapsed"/>
      </Trigger>
   </DataTemplate.Triggers>
 </DataTemplate>

<DataTemplate x:Key="EvenNotesItemsTemplate">
<WrapPanel x:Name="EvenNotesStackPanel"  Orientation="Horizontal" >
<TextBlock Text="{Binding Superscript}" FontWeight="Bold" FontSize="8"/>
<TextBlock Text=" "/>
<TextBlock Text="{Binding}" TextWrapping="Wrap" Foreground="Black" FontWeight="Normal"/>
</WrapPanel>
<DataTemplate.Triggers>
<Trigger Property="ItemsControl.AlternationIndex" Value="1">
 <Setter Property="Visibility" TargetName="EvenNotesStackPanel" Value="Collapsed"/>
 </Trigger>
 </DataTemplate.Triggers>
</DataTemplate> 
```

它显示数据

> 1 文件应该被添加而不是被删除。
> 2 文件不应该删除。这是非常安全的数据。这是非常安全的数据。这是非常安全的数据。这是非常安全的数据。

实际上它将第二个点包装到下一行。但是我想从第一行结束开始第二个点，如果它很长，则移动到下一行剩余的文本。

但我希望我的数据像......

> 1 文件应该添加而不是删除。2 文件不应该删除。这是非常安全的数据。这是非常安全的数据。这是非常安全的数据。这是非常安全的数据。

请帮助我怎么可能。

# mysql - MySQL：分组/有序/左连接查询非常慢

> ID：15272838
> 
> 赞同：10
> 
> 时间：2013-03-07T13:46:45.543
> 
> 标签：mysql, group-by, sql-order-by, left-join

我有一个查询时间太长的问题（对于这个简单的查询超过两秒钟）。

乍一看，这似乎是一个索引问题，所有连接字段都已编入索引，但我找不到我可能需要索引的其他内容以加快速度。一旦我将需要的字段添加到查询中，它就会变得更慢。

```
SELECT  `jobs`.`job_id` AS  `job_id` FROM tabledef_Jobs AS jobs
 LEFT JOIN tabledef_JobCatLink AS jobcats ON jobs.job_id = jobcats.job_id
 LEFT JOIN tabledef_Applications AS apps ON jobs.job_id = apps.job_id
 LEFT JOIN tabledef_Companies AS company ON jobs.company_id = company.company_id
GROUP BY  `jobs`.`job_id` 
ORDER BY  `jobs`.`date_posted` ASC
LIMIT 0 , 50 
```

表行数 (~)：tabledef_Jobs (108k)、tabledef_JobCatLink (109k)、tabledef_Companies (100)、tabledef_Applications (50k)

在这里你可以看到描述。“使用临时”似乎是降低查询速度的原因：

![在此处输入图像描述](../Images/1650a955023e55627c85b11677c54fee.png)

表索引截图：

![在此处输入图像描述](../Images/a700835c51ea1ddd6b919ad54a22cdc6.png)

![在此处输入图像描述](../Images/bfad7cb9de10df2521a2b60143d54c2f.png)

![在此处输入图像描述](../Images/66a91d0a0b19a9e56d78ee5358b2ead3.png)

![在此处输入图像描述](../Images/b3611e03896eee8b004a328c7914334e.png)

任何帮助将不胜感激

**编辑答案**

感谢@Steve（标记答案），最终改进了查询。最终，最终查询从 ~22s 减少到 ~0.3s：

```
SELECT `jobs`.`job_id` AS `job_id` FROM
(
 SELECT * FROM tabledef_Jobs as jobs ORDER BY `jobs`.`date_posted` ASC LIMIT 0 , 50
) AS jobs
 LEFT JOIN tabledef_JobCatLink AS jobcats ON jobs.job_id = jobcats.job_id
 LEFT JOIN tabledef_Applications AS apps ON jobs.job_id = apps.job_id
 LEFT JOIN tabledef_Companies AS company ON jobs.company_id = company.company_id
GROUP BY  `jobs`.`job_id` 
ORDER BY  `jobs`.`date_posted` ASC
LIMIT 0 , 50 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T14:29:26.333

好的，我会对此进行尝试。

查询优化器似乎无法使用索引来完成对 tabledef_Jobs 表的查询。

你有一个偏移量限制，这与你的 ORDER BY 的组合不能限制加入之前的数据量，因此它必须按 job_id 分组，这是一个 PK 和快速 - 然后对数据进行排序（临时表和一个文件排序），然后再限制和丢弃大部分数据，然后最终将其他所有数据加入其中。

我建议，为“job_id，date_posted”的工作添加一个复合索引</p>

所以首先优化基础查询：

```
SELECT * FROM tabledef_Jobs 
GROUP BY job_id
ORDER BY date_posted
LIMIT 0,50 
```

然后，您可以将连接和最终结构组合在一起以进行更有效的查询。

如果不建议您重新考虑您的限制偏移量，我就不能让它过去。这对于小的初始偏移量很好，但是当它开始变大时，这可能是性能问题的主要原因。例如，假设您将其用于分页，如果他们想要第 3,000 页会发生什么——您将使用

```
LIMIT 3000, 50 
```

然后这将收集 3050 行/操作数据，然后丢弃前 3000 行。

[**编辑1-**回应以下评论]

我将扩展一些可能为您指明正确方向的信息。不幸的是，没有一个简单的修复程序可以解决它，您必须了解为什么会发生这种情况才能解决它。简单地删除 LIMIT 或 ORDER BY 可能不起作用，毕竟你不想删除 then 作为查询的一部分，这意味着它必须是有目的的。

首先优化简单的基本查询，这通常比使用多连接数据集容易得多。

尽管它收到了所有的抨击，**但 filesort 没有任何问题**。有时这是执行查询的唯一方法。同意这可能是许多性能问题的原因（尤其是在较大的数据集上），但这通常不是文件排序的错误，而是底层查询/索引策略的错误。

在 MySQL 中，您不能混合索引或混合同一索引的顺序 - 执行此类任务将导致文件排序。

我建议如何在 date_posted 上创建一个索引，然后使用：

```
SELECT jobs.job_id, jobs.date_posted, jobcats .*, apps.*, company .* FROM
(
    SELECT DISTINCT job_id FROM tabledef_Jobs 
    ORDER BY date_posted
    LIMIT 0,50
) AS jobs
LEFT JOIN tabledef_JobCatLink AS jobcats ON jobs.job_id = jobcats.job_id
LEFT JOIN tabledef_Applications AS apps ON jobs.job_id = apps.job_id
LEFT JOIN tabledef_Companies AS company ON jobs.company_id = company.company_id 
```

# c# - 如何查找所有打开的word或excel文件

> ID：15272840
> 
> 赞同：0
> 
> 时间：2013-03-07T13:46:49.450
> 
> 标签：c#

如何找到不同应用程序（即 Word、pdf 阅读器或 Excel）的所有打开文件的完整路径？
我尝试了附加代码，但只找到了文件名而不是文件的完整路径。

```
 foreach (Process p in Process.GetProcessesByName("excel"))
            try
            {
                if (p.MainWindowTitle.Length > 0)
                {
                    Console.WriteLine("======================");
                    Console.WriteLine("Window Title:" + p.MainWindowTitle.ToString());
                    Console.WriteLine("Process Name:" + p.ProcessName.ToString());
                    Console.WriteLine("Window Handle:" +  p.MainWindowHandle.ToString());     
                }
            }
            catch { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:01:05.263

这对我有用：

```
Console.WriteLine("Full Path:" +  p.MainModule.FileName); 
```

# emacs - 如何从 run-with-idle-timer 中删除功能？

> ID：15272841
> 
> 赞同：8
> 
> 时间：2013-03-07T13:46:59.243
> 
> 标签：emacs, elisp

我添加了一个这样的`lambda()`功能`run-with-idle-timer`：

```
(run-with-idle-timer my-configurable-idle-time t
                 (lambda ()
                    ;;; do something
                  ) ) 
```

是否可以稍后从空闲计时器触发器中再次删除此功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T13:51:36.520

是的，[`run-with-idle-timer`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Idle-Timers.html)返回一个`timer`您可以传递给的对象[`cancel-timer`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Timers.html)。

如果您没有保留`timer`对象，您可以`timer-idle-list`手动修改。

另请参阅[获取正在运行的 Emacs 计时器的列表](https://stackoverflow.com/q/11670567/850781)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-08T00:26:42.720

我也遇到过类似的情况，我想杀死一个开始时的计时器：

```
(setq my-timer (run-with-timer 5 5 'my-func)) 
```

然而，

```
(cancel-timer my-timer) 
```

没有工作，因为它说我的计时器没有设置（不知道为什么会这样）。

除了第一张海报的方法外，还可以用：

```
(cancel-function-timers 'my-func) 
```

这将取消*所有*调用函数 'my-func.

为了通过改变我也测试过的计时器列表来杀死它，我做了以下事情：

```
(length timer-list)  ;; I had two timers..one good, one bad
(cdr timer-list)  ;; I verified the last was the one I wanted to keep
(setq timer-list (cdr timer-list)) ;; I reset timer-list 
```

显然，此列表结构会有所不同，因此您必须进行相应调整。如果您使用 (run-with-idle-timer) 启动计时器，请替换“timer-idle-list”

如果您使用 'gamegrid-start-timer 启动计时器并且 'gamegrid-kill-timer 不起作用，这也应该有效，因为 'gamegrid-start-timer 本质上只是 'run-with-timer 的包装器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T01:53:13.133

另一种解决方案：如果您运气不好并且实际上无法取消计时器，您可以随时使用

```
(defvar my-timer-enabler t)
(run-with-idle-timer my-configurable-idle-time t
                    (lambda ()
                      (when my-timer-enabler
                        ;;; do something
                        ))) 
```

`my-timer-enabler`因此，您可以通过设置为来禁用计时器`nil`。您稍后可以通过简单地将 var 设置回`t`.

# xcode - CoreData 和 NSComboBox

> ID：15272842
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:01.440
> 
> 标签：xcode, core-data, nscombobox

我有一个使用 CoreData 的 Mac 应用程序。我有 1 个具有 2 个属性的实体“员工”，`employeeName`并且`employeePin`. 我有一个抽屉窗口，也用于添加员工。我想`NSComboBox`用 CoreData 的属性填充一个，`employeeName`但我想不通。我已经让 CoreData 正常工作，但我不知道如何将其`NSComboBox`与该特定属性绑定。

我创建了一个数组控制器，并将参数“Managed Object Context”设置为带有模型键路径的 App Delegate，`managedObjectContext`但我没有在组合框中获取名称。我如何让名称在组合框中拉起。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:21:48.693

要完全设置阵列控制器，您还需要在阵列控制器`'Entity Name'`的身份检查器中将模式设置为，并将其指定为`'Employee'`

之后，您需要将组合框（在绑定检查器中）的“内容值”绑定到`employeeName`数组控制器。( `arrangedObjects`)。

即在绑定检查器中，

*   点击绑定：阵列控制器
*   控制器键：`arrangedObjects`
*   模型密钥路径：`employeeName`

# iphone - 如何使继承的类能够在Objective-C中看到父类的隐藏方法

> ID：15272843
> 
> 赞同：3
> 
> 时间：2013-03-07T13:47:08.687
> 
> 标签：iphone, ios, objective-c

我有两个类，Class1 和 Class2，第二个继承自第一个。我需要重写 Class1 的 -update 方法来实现我的目标。继承方法中-update方法的更改是在代码中间进行的，所以我不能使用[超级更新]。这就是为什么我需要将原始方法从父类复制粘贴到继承类。此方法使用父级的私有方法，因此当我尝试进行覆盖时，我收到有关缺少私有方法的警告，因为 Class2 仅导入 Class1.h。为了澄清，这里是代码：

类1.h：

```
@interface Class1 : NSObject
-(void) update;
@end 
```

类1.m：

```
@interface Class1 (Private)
-(void) private1;
-(void) private2;
@end

@implementation Class1

-(void) update
{
    [self private1];
    [self private2];
}

-(void) private1
{
    // some code
}

-(void) private2
{
    // another code
}

@end 
```

类2.h：

```
@interface Class2 : Class1
-(void) update;
@end 
```

类2.m：

```
@implementation Class2

-(void) update
{
    [self private1]; // warning here
    // do my own stuff between private methods, that is the reason of inheritance
    [self private2]; // warning too
}

@end 
```

此外，**Class1 不属于我的所有权**，它是来自开源库（准确地说是 Cocos3D）的一个，所以**我无法更改它**（这就是我进行继承的原因）。

问题是：如何删除警告？我能看到的唯一解决方案是将私有方法的签名复制到 Class2，但这似乎是一个肮脏的把戏。或者，如果有人指出的不是如何删除警告，而是如何更好地实现我改变方法的目标，那将是完美的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T16:18:12.043

无需 swizzling、performSelector: 或任何其他运行时漏洞。

只需移动或复制这个：

```
@interface Class1 (Private)
-(void) private1;
-(void) private2;
@end 
```

到子类的 .m 文件的开头。

通常，当尝试实现`@protected`方法范围之类的东西时，此类声明将在头文件中，`Class1_Private.h`并且该头文件将设置为`private`Xcode 中的角色。

正如其他人所指出的，通过这种机制公开私有方法有点危险。鉴于 Cocos2D 是开源的，这种危险在一定程度上得到了缓解，或者您总是可以直接对其进行修改。当然，这样做意味着您实际上拥有一个分支，维护成本很高。

如果这是其他开发人员可能会做的事情，我建议向 Cocos2D 提交一个错误，要求为子类化目的公开这些方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:08:56.200

Apple 这样做的方式是使任何可以在子类中被覆盖的方法都公开，但记录不应直接调用它们而只能被覆盖的事实。Apple 代码的文档（通常）是全面的，并且经常被引用，所以这是可行的。当然，典型的第三方代码没有很好的文档记录，文档也不太可能被阅读......

另一种解决方案：我经常创建一个名为“MyClass+SubclassMethods.h”的第二个头文件，并公开声明子类可覆盖，但在其中的一个类别中声明为私有方法。在基类和子类用户的源文件中，这不会被导入，因此这些方法（有效地）保持私有。在基类的子类中，我导入“MyClass+SubclassMethods.h”以允许我覆盖/调用这些方法。这不是一个完美的解决方案，但如果没有 Objective-C 中“受保护”方法的概念，我不确定是否有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:10:54.637

鉴于 Class1 无法修改，另一个响应中建议的类别是一个很好的解决方案。如果可以对源*进行*调整，则在单独的头文件中声明的类扩展和在 Class1 实现和 Class2 实现文件中的#imported 将是一种方式，因为这样您不仅可以共享私有方法，还可以共享实例变量以这种方式标记@public 或@protected。从这里了解更多关于类扩展的信息：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)

简而言之，类扩展有点像类别（有时称为私有类别），但它只能在实现其扩展的类的同一编译单元中声明，并且可以声明（和自动合成）属性和实例变量。Xcode 中包含一个用于创建类扩展的源代码模板（见下文。）

![Xcode 中的类扩展创建](../Images/3e118d0e97534d77754dc587579d0de3.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-07T13:56:56.420

您应该能够使用[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)来扩展您的原始类并尝试[方法调配](http://cocoadev.com/wiki/MethodSwizzling)以实现您想要的行为来解决这个问题。

# php - mysqli_use_result()

> ID：15272847
> 
> 赞同：1
> 
> 时间：2013-03-07T13:47:12.073
> 
> 标签：php, mysql, mysqli

我正在使用 php mysql 函数更新旧脚本以使用 mysqli 并且我已经发现了一个有趣的问题（[mysqli_use_result() 和 concurrency](https://stackoverflow.com/questions/591936/mysqli-use-result-and-concurrency)），但它并没有澄清一件事：

假设五个用户连接到一个网页，他们同时连接，并且 user1 是第一个从巨大的 MyIsam 数据库中选择数据（15000 条论坛帖子的记录，左连接到“用户”和“附件”表）。

当 php 脚本检索结果时，其他用户将无法获得结果，对吗？

同样使用上述相同的情况，当 user1 完全收到它的结果时，会发送一个 'UPDATE set view_count = INC(1)' 查询并且我想该表已被锁定，并且对于其他用户，这个相同的查询会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:49:37.973

关于你引用的那篇文章。这只是意味着，你不应该这样做：

```
mysqli_query($link, $query);
mysqli_use_result($link);

// lots of 'client processing'
// table is blocked for updates during this
sleep(10) 
mysqli_fetch_* ..... 
```

在这种情况下，建议您这样做：

```
mysqli_query($link, $query);
mysqli_store_result($link);

// lots of 'client processing' 
// table is NOT blocked for updates during this
sleep(10) 
mysqli_fetch_* ..... 
```

该文章进一步说，如果将发出第二个查询 - 在调用 mysql_use_result() 之后并且在从查询中获取结果之前它将失败。这意味着每个连接 - 每个脚本。所以在此期间其他用户的查询不会失败。

* * *

> 当 php 脚本检索结果时，其他用户将无法获得结果，对吗？

不，这是不对的。MySQL 支持与您在`my.ini` `max_connections`. 并发读取由 mysql 服务器处理。除非达到最大连接限制并且 mysqli_connect() 会失败，否则客户端代码不必担心这一点。如果您的应用程序达到了经常发生这种情况的程度，那么在大多数情况下，您首先会尝试调整您的 mysql 配置，以便 mysql 允许更多的并行连接。如果达到阈值，您将使用复制或 mysql 集群等尝试。

* * *

> 同样使用上述相同的情况，当 user1 完全收到它的结果时，会发送一个 'UPDATE set view_count = INC(1)' 查询并且我想该表已被锁定，并且对于其他用户，这个相同的查询会失败吗？

当有并发读写时，这当然是一个性能问题。但是 MySQL 服务器会为您处理这个，这意味着只要连接到 mysql 工作，客户端代码就不用担心它。如果您的负载非常高，您将主要使用主从复制或 MySQL 集群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:57:03.783

> 对于其他用户，同样的查询会失败吗？

数据库服务器通常比纯文本文件更智能。
因此，您的查询不会失败。他们会等待。

虽然我根本不会使用 mysqli_use_result() 。为什么不直接获取你的结果呢？

# android - Android没有服务通知

> ID：15272849
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:16.093
> 
> 标签：android, service, notifications

当我尝试运行通知时，没有任何弹出

```
private void pushNotification(String user)
{
    // TODO Auto-generated method stub
    Log.d("Service", "pushNotification");
    Notification notification = new Notification.Builder(this)
    .setContentTitle("Basic Notification ")
    .setContentText("Basic Notification, used earlier").build();
  notification.flags |= Notification.FLAG_AUTO_CANCEL;
  NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
  notificationManager.notify(0, notification);

} 
```

1.  是因为我没有它的图标吗？
2.  我需要添加任何东西来推送通知吗？
3.  另外，我想在单击通知时开始一项活动。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:59:53.330

尝试这样的事情：

```
 NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
    .setSmallIcon(R.drawable.ic_launcher)
    .setContentTitle("My notification")
    .setContentText("Hello World!");
    mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification noty = mBuilder.build();
    startForeground(mId, noty); 
```

关于单击[此文档中的通知时的活动](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:39:46.357

尝试这个 ：

```
 private void generateNotification(Context context, String message) {

    int icon = R.drawable.ic_launcher;
    String appname = context.getResources().getString(R.string.app_name);
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Notification notification;
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            new Intent(context, activity.class), 0);

        NotificationCompat.Builder builder = new NotificationCompat.Builder(
                context);
        notification = builder.setContentIntent(contentIntent)
                .setSmallIcon(icon).setTicker(appname).setWhen(0)
                .setAutoCancel(true).setContentTitle(appname)
                .setContentText(message).build();

        notificationManager.notify(0, notification);
} 
```

# function - fmincon 中的 MaxFunEval 选项

> ID：15272850
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:17.453
> 
> 标签：function, matlab, optimization, minimize

我正在尝试`fmincon`在 MATLAB 中实现该函数。我收到了一个关于算法更改的警告，以评估我的功能（警告显示在帖子末尾）。我想使用`fminsearch`，但我需要遵循 2 个约束。MATLAB 更改算法来评估我的函数是没有意义的，因为我的约束非常简单。我提供了约束和一段代码：

> 约束：
> theta(0) + theta(1) < 1

```
theta(0), theta(1), theta(2), theta(3) > 0

% Solve MLE using fmincon
ret_1000 = returns(1:1000);
A = [1 1 0 0];
b = [.99999];
lb = [0; 0; 0; 0];
ub = [1; 1; 1; 1];
Aeq = [];
beq = [];
noncoln = [];
init_guess = [.2;.5; long_term_sigma; initial_sigma];
%option = optimset('FunValCheck', 1000);
options = optimset('fmincon');
options = optimset(options, 'MaxFunEvals', 10000);
[x, maxim] = fmincon(@(theta)Log_likeli(theta, ret_1000), init_guess, A, b, Aeq, beq, lb, ub, noncoln, options); 
```

警告：

```
Warning: The default trust-region-reflective algorithm does not solve problems with the constraints you
have specified. FMINCON will use the active-set algorithm instead. For information on applicable
algorithms, see Choosing the Algorithm in the documentation. 
> In fmincon at 486
  In GARCH_loglikeli at 30 

Local minimum possible. Constraints satisfied.

fmincon stopped because the predicted change in the objective function
is less than the selected value of the function tolerance and constraints 
are satisfied to within the selected value of the constraint tolerance.

<stopping criteria details>

No active inequalities. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:57:50.410

所有 matlab 变量都是我默认值的两倍。您可以强制使用双重使用，`double(variableName),`您可以使用获取变量的类型，`class(variableName).` 我会`class`在所有变量上使用，以确保它们符合您的期望。我没有`fmincon`，但我尝试了你的代码的一个变体，`fminsearch`它就像一个魅力：

```
op = optimset('fminsearch');
op = optimset(op,'MaxFunEvals',1000,'MaxIter',1000);
a = sqrt(2);
banana = @(x)100*(x(2)-x(1)^2)^2+(a-x(1))^2;
[x,fval] = fminsearch(banana, [-1.2, 1],op) 
```

查看 matlab 文档，我认为您的输入变量不正确：

```
x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub,nonlcon,options) 
```

我认为你需要：

```
% Let's be ultra specific to solve this syntax issue

fun = @(theta) Log_likeli(theta, ret_1000);
x0 = init_guess;
% A is defined as A
% b is defined as b
Aeq = [];
beq = [];
% lb is defined as lb
% ub is not defined, not sure if that's going to be an issue
% with the solver having lower, but not upper bounds probably isn't
% but thought it was worth a mention
ub = [];
nonlcon = [];
% options is defined as options
x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub,nonlcon,options) 
```

# php - 计算 PHP 中数组值的平均增长

> ID：15272851
> 
> 赞同：1
> 
> 时间：2013-03-07T13:47:20.613
> 
> 标签：php, arrays, average

我需要计算数组值的平均增加，并且我制作了一个可以工作的小脚本，但我想知道是否：

1.  有一种更好、更有效的方法来做到这一点
2.  我的逻辑在计算平均增长时是正确的

可以说我有一个像这样的数组：

```
$array = array(5,10,15,10,0,15); 
```

让我们还假设每个数组项是 1 天，值是当天的某个计数器。我想计算计数器的平均增加/减少。

我所做的是循环遍历数组，并更改了值，以便当前项 = 当前项 - 前一项，我剩下的数组看起来像这样：

```
$array = array(5,5,-5,-10,15); 
```

然后我按照正常情况计算平均值，在这个例子中，我每天平均增加 2 倍。

代码在这里：

```
$array = array(5,10,15,10,0,15);
$count = count($array);

for($i=0;$i<$count;$i++) {
    if($i==0) {
        $value = $array[$i];
        unset($array[$i]);
    }
    else {
        $tmp = $array[$i];
        $array[$i] -= $value;
        $value = $tmp;
    }
}

echo array_sum($array) / count($array); 
```

这里的逻辑是否正确，是否有更有效的方法来做到这一点，也许没有循环？

提前致谢 ：）

编辑：更新代码以考虑排除第一个值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:26:50.097

这个怎么样：

```
function moving_average($array) {

for ($i = 1; $i < sizeof($array); $i++) {
    $result[] = $array[$i] - $array[$i-1];
}

return array_sum($result)/count($result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:16:18.890

试试这个 ：

```
$array       = array(5,10,15,10,0,15);
$array2      = $array;

array_pop($array2);
array_unshift($array2, $array[0]);
$subtracted  = array_map(function ($x, $y) { return $y-$x; } , $array2, $array);
array_shift($subtracted); /// Comment this if you want six values with 0 as first value

echo array_sum($subtracted) / count($subtracted); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:19:13.420

这里有一个时髦的单线给你：

```
$days = array(5, 10, 15, 10, 0, 15);

$deltas = array_slice(array_map(function($day1, $day2) {
    return $day2 - $day1;
}, $days, array_slice($days, 1)), 0, -1);

var_dump(array_sum($deltas) / count($deltas)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:51:46.833

```
$array = array(5,10,15,10,0,15);
list($prevVal) = array_slice($array, 1);

array_walk($array, function($value, $key, &$prevVal)  use(&$array){
    if ($key==0) { return; }
    $array[$key] = ($value - $prevVal);
    $prevVal = $value;
}, $prevVal);

echo array_sum($array) / count($array); 
```

以浮点数输出 1.6666666666667(3.0994415283203E-5)

# c# - 在列表中搜索特定对象

> ID：15272852
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:23.080
> 
> 标签：c#, list, contains

我有一个对象列表，我想查看某个特定对象是否在此列表中。但是，当我使用列表中的`Contains()`or`IndexOf()`方法时，我得到不正确的结果，因为这使用了`Equals()`我不需要的对象的方法。我想找到一个特定的实例，而不是一个似乎具有相同属性值的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:50:33.843

如果您希望匹配参考，您可以使用：

```
if (object.ReferenceEquals(item1, item2))
    ... 
```

强制它比较引用而不是使用`Equals()`

或者：

```
int index = list.FindIndex(item=>ReferenceEquals(item, target)); 
```

（有关详细信息，请参阅[List.FindIndex() 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/0k601hd9%28v=vs.100%29.aspx)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:48:48.080

你可以使用哈希码吗？

```
list.where(w => w.GetHashCode() == object.GetHashCode()) 
```

# java - Java泛型：根据输入返回列表

> ID：15272855
> 
> 赞同：1
> 
> 时间：2013-03-07T13:47:31.823
> 
> 标签：java, generics

例如，我有 A、B、C 类，它们都在一个中`List<Object>`（列表来自 XML-Parser，我对这部分没有影响）。通常我只需要一种类型。所以我写了以下课程：

```
public class FilterForObject{
public static List<A> extractA(Result r){
  return extractClass(r,A.class);
}
public static List<B> extractB(Result r){
  return  extractClass(r,B.class);
}
public static List<C> extractC(Result r){
  return  extractClass(r,C.class);
}

private static <T> List<T> exctracClass(final Result r,final Class<T> resultClass) {
    List<T> ret = new ArrayList<T>(40);
    for (Object o : r.getAorBorC()) {
        if( o instanceof T){
            ret.add((T)o); // For some reasons this doesn't work
        }
    }
    return ret;
}

} 
```

我遇到了以下警告：

> 无法对类型参数 T 执行 instanceof 检查。请改用其擦除对象，因为更多的泛型类型信息将在运行时被擦除

但我没有得到确切的问题，在编译时所有可能的返回类型都是已知的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:50:26.857

> 但我没有得到确切的问题，在运行时所有可能的返回类型都是已知的？

不，在运行时类型`T`是*未知*的，因为*类型擦除*。编译器不能对强制转换或`instanceof`运算符做任何有用的事情。

但是，由于您已经有了一个`Class<T> resultClass`可以使用的参数：

```
if (resultClass.isInstanceOf(o))) {
    ret.add(resultClass.cast(o));
} 
```

有关类型擦除（以及一般泛型）的更多信息，请参阅[Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Topic3)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:51:00.490

您已经为泛型类型参数传递了类型标记，您可以（并且必须）使用它而不是编译器生成的强制转换：

```
private static <T> List<T> exctracClass(final Result r,final Class<T> resultClass) {
    List<T> ret = new ArrayList<T>(40);
    for (Object o : r.getAorBorC()) {
        if(resultClass.isInstance(o)){
            ret.add(resultClass.cast(o));
        }
    }
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:55:33.260

由于您有预期结果的类，您可以执行以下操作：

```
private static <T> List<T> extractClass(final Result r, final Class<T> resultClass) {
    List<T> ret = new ArrayList<T>(40);
    for (Object o : r.getAorBorC()) {
        if (resultClass.isInstance(o)) {
            ret.add((T) o); // For some reasons this doesn't work
        }
    }
    return ret;
} 
```

您可以对某些特殊构造（instanceof、casting...）支持的类和实例执行的所有操作，也可以通过 Class 对象上的方法执行：isInstance、cast、asSubclass...

# asp.net - X-Frame-Options 拒绝加载：http://www.youtube.com/v/g5RM5StrMXY 不允许跨域框架

> ID：15272857
> 
> 赞同：47
> 
> 时间：2013-03-07T13:47:37.820
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iframe

我在 ASP.NET 中有一个网站。

页面加载后，我得到以下错误。

错误：X-Frame-Options 拒绝加载：[http](http://www.youtube.com/v/lgZBsWGaQY0&feature) ://www.youtube.com/v/lgZBsWGaQY0&feature不允许跨域框架。

![在此处输入图像描述](../Images/656b42c89a530989991248cc1430efd3.png)

由于此错误，YouTube 视频无法在 iframe 中打开。

```
<div style="display: none; position: relative;">
    <div id="divYouTubeClasses">
        <iframe id="Iframe1" style="background-color: White !important; border: 0;" width="835"
                    height="430" src="http://www.youtube.com/v/g5RM5StrMXY" scrolling="no"></iframe>
    </div>
</div> 
```

请为此错误提供一些解决方案。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-03-11T11:51:42.927

**查询中的原始 URL**

```
http://www.youtube.com/v/lgZBsWGaQY0&feature 
```

**预期网址**

```
http://www.youtube.com/embed/lgZBsWGaQY0?autoplay=1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-03T17:38:08.280

在将 YouTube 网址插入 iframe 之前，必须对其进行清理和规范化。这是我创建的用于清理和规范 YouTube url 的 Common js 兼容库。

```
var getVidId = function(url)
{
    var vidId;
    if(url.indexOf("youtube.com/watch?v=") !== -1)//https://m.youtube.com/watch?v=e3S9KINoH2M
    {
        vidId = url.substr(url.indexOf("youtube.com/watch?v=") + 20);
    }
    else if(url.indexOf("youtube.com/watch/?v=") !== -1)//https://m.youtube.com/watch/?v=e3S9KINoH2M
    {
        vidId = url.substr(url.indexOf("youtube.com/watch/?v=") + 21);
    }
    else if(url.indexOf("youtu.be") !== -1)
    {
        vidId = url.substr(url.indexOf("youtu.be") + 9);
    }
    else if(url.indexOf("www.youtube.com/embed/") !== -1)
    {
        vidId = url.substr(url.indexOf("www.youtube.com/embed/") + 22);
    }
    else if(url.indexOf("?v=") !== -1)// http://m.youtube.com/?v=tbBTNCfe1Bc
    {
        vidId = url.substr(url.indexOf("?v=")+3, 11);
    }
    else
    {
        console.warn("YouTubeUrlNormalize getVidId not a youTube Video: "+url);
        vidId = null;
    }

    if(vidId.indexOf("&") !== -1)
    {
        vidId = vidId.substr(0, vidId.indexOf("&") );
    }
    return vidId;
};

var YouTubeUrlNormalize = function(url)
{
    var rtn = url;
    if(url)
    {
        var vidId = getVidId(url);
        if(vidId)
        {
            rtn = "https://www.youtube.com/embed/"+vidId;
        }
        else
        {
            rtn = url;
        }
    }

    return rtn;
};

YouTubeUrlNormalize.getThumbnail = function(url, num)
{
    var rtn, vidId = getVidId(url);
    if(vidId)
    {
        if(!isNaN(num) && num <= 4 && num >= 0)
        {
            rtn = "http://img.youtube.com/vi/"+vidId+"/"+num+".jpg";
        }
        else
        {
            rtn = "http://img.youtube.com/vi/"+getVidId(url)+"/default.jpg";
        }
    }
    else
    {
        return null;
    }
    return rtn;
};

YouTubeUrlNormalize.getFullImage = function(url)
{
    var vidId = getVidId(url);
    if(vidId)
    {
        return "http://img.youtube.com/vi/"+vidId+"/0.jpg";
    }
    else
    {
        return null;
    }
};

if ( typeof exports !== "undefined" ) {
    module.exports = YouTubeUrlNormalize;
}
else if ( typeof define === "function" ) {
    define( function () {
        return YouTubeUrlNormalize;
    } );
}
else {
    window.YouTubeUrlNormalize = YouTubeUrlNormalize;
} 
```

已更新以适应 YouTube 移动网址。即：m.youtube.com 更新以获取图像，并防止 GET 变量在 url

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-25T09:25:37.103

这些步骤将使您了解它是如何完成的：

1.  使用 youtube 网站查找您想要的视频
2.  点击视频下方的“分享”按钮
3.  点击他们显示给您的链接旁边的“嵌入”按钮
4.  复制给出的 iframe 代码并将其粘贴到网页的 html 中。

[![在此处输入图像描述](../Images/7f02be5236d7e8e8b28634d33f859fb4.png)](https://i.stack.imgur.com/Cifbn.jpg)

您可以在这里很好地看到该 url 是由**/embed**生成的，它与第一个答案一起使用。

# css - 对 Internet Explorer 8 的 Foundation 4 网格支持

> ID：15272859
> 
> 赞同：8
> 
> 时间：2013-03-07T13:47:51.940
> 
> 标签：css, internet-explorer, zurb-foundation

我正在使用最新的 Zurb Foundation（撰写本文时为 4.0.4）。

我希望 Internet Explorer 可以使用它。这可能吗？

我尝试对 CSS 进行了相当多的更改，但似乎没有什么能让它的布局像 Firefox 中那样。

我尝试将列显示更改为内联，但它更加破坏了布局。

我想在 FF 中看起来像这样的主要 html 如下所示：

```
<div class="row">
  <div class="large-6 columns">
    <label for="amount">Amount:</label>
    <input id="amount" type="text">
  </div>
  <div class="large-6 columns">
    <label for="isbn">ISBN:</label>
    <input maxlength="13" id="isbn" type="text">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:21:03.153

Foundation 4 中对 IE 的部分支持可以在[Support Page](http://foundation.zurb.com/docs/support.html)上找到。他们还提到了一个要点，它允许在 ie8 上实现更好的网格。

也许这可以通过将 Zepto 换成 jQuery 来改善？此外，您始终可以使用具有更好即支持的基础 3.2.5。请参阅[F3 支持文档](http://foundation.zurb.com/old-docs/f3/support.php)。它说有 IE 8+ 支持开箱即用，没有修改，但没有提及 IE 7 或更低版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T10:25:01.677

IE7 也有一个很好的修复：

[https://github.com/Schepp/box-sizing-polyfill](https://github.com/Schepp/box-sizing-polyfill)

它可以使 Foundation 3 网格在 IE7 和 8 上工作，还没有在 4 上尝试过，但值得一试！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T21:12:53.493

这是对 IE8 有帮助的更新网格修复的链接。[https://gist.github.com/hatefulcrawdad/5068210#file-ie8-grid-foundation-4-css](https://gist.github.com/hatefulcrawdad/5068210#file-ie8-grid-foundation-4-css)

# workflow-foundation-4 - 将项目添加到集合不会刷新活动设计器

> ID：15272860
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:51.900
> 
> 标签：workflow-foundation-4, activitydesigner

我正在重新托管我的设计师并添加了一个工具箱项，其中包含一个 WorkflowItemsPresenter 来呈现多个子活动项。所以我的模型项目有一个集合：

```
 Sequence _innerSequence = new Sequence();
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    [Browsable(false)]
    [Description("")]
    public Collection<Activity> Activities { get { return _innerSequence.Activities; } } 
```

并且绑定是

```
 <sap:WorkflowItemsPresenter Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Items="{Binding Path=ModelItem.Activities}" VerticalAlignment="Center" HorizontalAlignment="Center" HintText="Drop activities here">
    <sap:WorkflowItemsPresenter.SpacerTemplate>
            <DataTemplate>
                <Label HorizontalAlignment="Center" Height="21"/>                    
            </DataTemplate>
        </sap:WorkflowItemsPresenter.SpacerTemplate>
    </sap:WorkflowItemsPresenter> 
```

加载设计器时，绑定工作得很好。现在，当设计器上的某些过滤器更新时，我想清除并将新项目添加到此集合中。因此，在此过滤器属性的 set 访问器中，我调用了一个执行以下操作的方法：

```
 private void RefreshApplication()
    {
        Activities.Clear();
        Activities.Add(new AddXYZApplication() { ApplicationName = "Test" });
    } 
```

尽管集合得到更新，但设计器不会刷新。我知道有一种方法可以通过编写一些设计器代码隐藏（即通过模型项树更新集合）来做到这一点，但我理想情况下希望没有代码隐藏并期望它像任何其他 WPF 应用程序一样工作。任何帮助将不胜感激，因为我从现在开始一直在尝试设计一种方法（使用多重绑定，使用事件等）。

切里奥，V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:45:17.313

只是在我的评论后回答。

**当您通过 WorkflowDesigner 进行编辑时，您`Activity`本身并没有。你所拥有的是一个 ModelItem**。

从您将活动加载到设计器的那一刻起，通过`WorkflowDesigner.Load(activity)`您不再有活动，您只需开始编辑`ModelItem`.

您可以通过（刷新后）访问 XAML`WorkflowDesigner.Text`并使用它做任何您想做的事情。例如将它加载到一个`ActivityBuilder`或`WorkflowService`但就是这样。

设计者不知道，也永远不会知道活动具有`Collection<Activities>`或`Collection<Variable>`任何其他属性。他们只知道`ModelItem`它的属性和属性。

在简历中：必须进行更改，`ModelItem`因为这是设计师所绑定的。

# qt - QPainter::drawConvexPolgon 有什么意义

> ID：15272861
> 
> 赞同：5
> 
> 时间：2013-03-07T13:47:52.427
> 
> 标签：qt, qpainter, convex-hull

从文档：

`QPainter`提供两种绘画方法`QPolygons`：[`drawPolygon`](https://qt-project.org/doc/qt-4.8/qpainter.html#drawPolygon)和[`drawConvexPolygon`](https://qt-project.org/doc/qt-4.8/qpainter.html#drawConvexPolygon)。

文档中没有明确说明它们之间的区别。此外，`drawConvexPolygon`文档状态

> 如果提供的多边形不是凸的，即它包含至少一个大于 180 度的角，则结果是不确定的。

那么……它是干什么用的？我希望该方法能以某种方式找到我的多边形的凸包并绘制它，但似乎并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:57:38.580

[`QPainter::drawConvexPolygon()`文档](https://qt-project.org/doc/qt-4.8/qpainter.html#drawConvexPolygon)说：

> 在某些平台（例如 X11）上，drawConvexPolygon() 函数可能比 drawPolygon() 函数更快。

所以，

*   `drawPolygon()`更**通用**，因为它还允许绘制非凸多边形（但绘制可能会更慢）
*   `drawConvexPolygon()`只能用于绘制凸多边形，但在特定平台上可能**更快**

例如，在进行 3D 渲染时，您可以使用仅由凸多边形组成的[多边形网格](http://en.wikipedia.org/wiki/Polygon_mesh)来简化渲染，在这种情况下，速度越快`drawConvexPolygon()`越好（因为您需要绘制大量凸多边形）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:55:27.450

确定多边形的哪一部分是外部和内部（用于填充目的）会根据多边形是否包含凸区域做出不同的选择。考虑如何确定星形的内部与矩形的内部。

# codeigniter - Xenforo 和 Codeigniter 的 Nginx 规则

> ID：15272862
> 
> 赞同：0
> 
> 时间：2013-03-07T13:47:53.520
> 
> 标签：codeigniter, nginx, rules

我在根文件夹上使用 xenforo 论坛我使用 Codeigniter 框架添加文件夹/ **somefolder** **/**我应该如何编辑我的 nginx coinfig？

 **```
server {
    listen       80;
    server_name  wwww.mysite.com mysite.com;
    access_log  /var/log/nginx/mysite_access.log;
error_log  /var/log/nginx/mysite_error.log;

location / {
        root   /usr/local/www/mysite;
        index  index.html index.htm index.php;
        try_files $uri $uri/ /index.php?$uri&$args;
        }    
    location /internal_data/ {
    internal;
    }
    location /library/ {
    internal;
    }           

    location ~ \.php$ {
    fastcgi_pass unix:/var/tmp/fpm/php-fpm.sock;
        fastcgi_index  index.php;
        fastcgi_split_path_info ^(.+\.php)(.*)$;
        fastcgi_param  SCRIPT_FILENAME  /usr/local/www/mysite$fastcgi_script_name;
        include        fastcgi_params;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:41:40.147

检查以下配置。假定`/usr/local/www/mysite/`为根文件夹。

```
server {
    listen 80;
    server_name wwww.mysite.com mysite.com;
    access_log /var/log/nginx/mysite_access.log;
    error_log /var/log/nginx/mysite_error.log;

    location /internal_data/ {
        internal;
    }
    location /library/ {
        internal;
    }

    location /somefolder {
        root /usr/local/www/mysite/somefolder;
        if (!-e $request_filename) {
            rewrite ^/(.*)$ /somefolder/index.php?/$1 last;
            break;
        }
    }

    location / {
        fastcgi_pass unix:/var/tmp/fpm/php-fpm.sock;
        fastcgi_index index.php;
        fastcgi_split_path_info ^(.+\.php)(.*)$;
        fastcgi_param SCRIPT_FILENAME  /usr/local/www/mysite$fastcgi_script_name;
        include fastcgi_params;
    }
} 
```

希望这可以帮助。**

# jira - 用于错误跟踪和客户支持的 Jira？

> ID：15272864
> 
> 赞同：8
> 
> 时间：2013-03-07T13:47:59.040
> 
> 标签：jira, jira-plugin, zendesk

我们正在考虑使用 Jira 进行错误跟踪，并将其与 Git 集成以将错误修复与版本处理联系起来。

您是否也推荐 Jira 用于客户支持，或者我们是否应该为此目的找到另一个系统，例如 Zendesk？我知道有可能以某种方式将 Hipchat 与 Jira 集成以启用与客户的聊天功能，但 Jira 是否过于复杂，客户服务无法处理？你的经验是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T19:03:37.247

我们使用 Jira 提供客户支持，但我们发现 Jira 缺少许多为此所需的必备功能。这就是我们做出许多改变的原因。

总而言之，我们对自己的选择感到非常满意，并且通过使用 Jira 而不是其他解决方案，我们成功地节省了很多钱。

这是我们所做的主要更改，这将向您展示缺少的内容，同时向您展示通过一点编程，Jira 可以做任何事情:)

注意：下面编写的脚本应附加到工作流转换。脚本是使用 编写的[`Jython`](http://www.jython.org/)，因此需要安装它才能使用它。

**通过电子邮件创建问题**

Jira 仅向 Jira 用户发送电子邮件。由于我们不想为每个解决支持问题的人创建一个用户，因此我们使用匿名用户，并使用脚本向他们发送电子邮件。

首先，将 Jira 设置为[从电子邮件创建问题](https://confluence.atlassian.com/display/JIRA/Creating+Issues+and+Comments+from+Email)。然后，使用[Script Runner 插件](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)将客户的电子邮件和姓名保存到自定义字段。. 代码：

```
from com.atlassian.jira import ComponentManager
import re
cfm = ComponentManager.getInstance().getCustomFieldManager()

# read issue description
description = issue.getDescription()
if (description is not None) and ('Created via e-mail received from' in description):
    # extract email and name:
    if ('<' in description) and ('>' in description):
        # pattern [Created via e-mail received from: name <email@company.com>]
        # split it to a list
        description_list = re.split('<|>|:',description)
        list_length = len(description_list)
        for index in range(list_length-1, -1, -1):
            if '@' in description_list[index]:
                customer_email = description_list[index]
                customer_name = description_list[index - 1]
                break
    else:
        # pattern [Created via e-mail received from: email@company.com]
        customer_name = "Sir or Madam"
        # split it to a list  
        description_list = re.split(': |]',description)
        list_length = len(description_list)
        for index in range(list_length-1, -1, -1):
            if '@' in description_list[index]:
                customer_email = description_list[index]
                break

    # if the name isn't in the right form, switch it's places:
    if (customer_name[0] == '"') and (customer_name[-1] == '"') and (',' in customer_name):
        customer_name = customer_name[1:-1]
        i =  customer_name.index(',')
        customer_name = customer_name[i+2:]+" "+customer_name[:i]

    # insert data to issue fields
    issue.setCustomFieldValue(cfm.getCustomFieldObject("customfield_10401"),customer_email)
    issue.setCustomFieldValue(cfm.getCustomFieldObject("customfield_10108"),customer_name) 
```

**发送客户`issue created`通知**

使用以下脚本发送邮件：

```
import smtplib,email
from smtplib import SMTP 
from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email import Encoders
import os
import re
from com.atlassian.jira import ComponentManager

customFieldManager = ComponentManager.getInstance().getCustomFieldManager()
cfm = ComponentManager.getInstance().getCustomFieldManager()

# read needed fields from the issue
key = issue.getKey()
#status = issue.getStatusObject().name
summary = issue.getSummary()
project = issue.getProjectObject().name

# read customer email address
toAddr = issue.getCustomFieldValue(cfm.getCustomFieldObject("customfield_10401"))
# send mail only if a valid email was entered
if (toAddr is not None) and (re.match('[A-Za-z0-9._%+-]+@(?:[A-Za-z0-9-]+\.)+[A-Za-z]{2,4}',toAddr)):
    # read customer name
    customerName = issue.getCustomFieldValue(cfm.getCustomFieldObject("customfield_10108"))
    # read template from the disk
    template_file = 'new_case.template'
    f = open(template_file, 'r')
    htmlBody = ""
    for line in f:
        line = line.replace('$$CUSTOMER_NAME',customerName)
        line = line.replace('$$KEY',key)
        line = line.replace('$$PROJECT',project)
        line = line.replace('$$SUMMARY',summary)
        htmlBody += line + '<BR>'

    smtpserver = 'smtpserver.com'
    to = [toAddr]
    fromAddr = 'jira@email.com'
    subject = "["+key+"] Thank You for Contacting Support team"
    mail_user = 'jira@email.com'
    mail_password = 'password'

    # create html email
    html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" '
    html +='"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">'
    html +='<body style="font-size:12px;font-family:Verdana">'
    html +='<p align="center"><img src="http://path/to/company_logo.jpg" alt="logo"></p> '
    html +='<p>'+htmlBody+'</p>'
    html +='</body></html>'

    emailMsg = email.MIMEMultipart.MIMEMultipart('alternative')
    emailMsg['Subject'] = subject
    emailMsg['From'] = fromAddr
    emailMsg['To'] = ', '.join(to)
    emailMsg.attach(email.mime.text.MIMEText(html,'html'))

    # Send the email
    s = SMTP(smtpserver) # ip or domain name of smtp server
    s.login(mail_user, mail_password)   
    s.sendmail(fromAddr, [to], emailMsg.as_string())
    s.quit()

    # add sent mail to comments
    cm = ComponentManager.getInstance().getCommentManager()
    email_body = htmlBody.replace('<BR>','\n')
    cm.create(issue,'anonymous','Email was sent to the customer ; Subject: '+subject+'\n'+email_body,False) 
```

内容`new_case.template`：

```
Dear $$CUSTOMER_NAME,

Thank you for contacting support team.

We will address your case as soon as possible and respond with a solution very quickly.

Issue key $$KEY has been created as a reference for future correspondence.

If you need urgent support please refer to our Frequently Asked Questions page at http://www.example.com/faq.

Thank you,

Support Team

Issue key: $$KEY
Issue subject: $$PROJECT
Issue summary: $$SUMMARY 
```

**问题提醒 - 开放 24/36/48 小时通知**

*   创建了一个名为“Open since”的自定义字段 - 一个“日期时间”字段来保存问题的打开时间。
*   创建了一个名为“通知”的自定义字段 - 一个只读文本字段。
*   使用[Script Runner pluging](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)，我创建了一个后期函数并将其放置在每个进入“打开”状态的转换中。这是为了保持问题的开放时间。

编码：

```
from com.atlassian.jira import ComponentManager
from datetime import datetime

opend_since_field = "customfield_10001"

# get opened since custom field:
cfm = ComponentManager.getInstance().getCustomFieldManager()
# get current time
currentTime = datetime.today()
# save current time
issue.setCustomFieldValue(cfm.getCustomFieldObject(opend_since_field),currentTime) 
```

*   我创建了一个新过滤器来获取超过 24 小时开放的问题列表：

JQL:

```
project = XXX AND status= Open ORDER BY updated ASC, key DESC 
```

*   最后——我使用了[Jira 远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference) —— [XML-RPC](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)方法来编写一个安排为每 5 分钟运行一次的 Python 脚本。脚本读取过滤器发出的所有邮件，拉出所有处于“打开”状态超过 24 小时/36 小时/48 小时的邮件，发送提醒电子邮件，并将它们标记为已通知，因此每种类型只会发送一个提醒.

蟒蛇代码：

```
#!/usr/bin/python

# Refer to the XML-RPC Javadoc to see what calls are available:
# http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/xmlrpc/XmlRpcService.html
# /home/issues_reminder.py

import xmlrpclib
import time
from time import mktime
from datetime import datetime
from datetime import timedelta
import smtplib,email
from smtplib import SMTP 
from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email import Encoders

# Jira connction info
server = 'https://your.jira.com/rpc/xmlrpc'
user = 'user'
password = 'password'
filter = '10302' # Filter ID
# Email definitions 
smtpserver = 'mail.server.com'
fromAddr = 'support@your.jira.com'
mail_user = 'jira_admin@your.domain.com'
mail_password = 'password'
toAddr = 'support@your.domain.com'
mysubject = "hrs Issue notification!!!"
opend_since_field = "customfield_10101"

COMMASPACE = ', '
def email_issue(issue,esc_time):
    # create html email
    subject = '['+issue+'] '+esc_time+mysubject
    html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" '
    html +='"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">'
    html +='<body style="font-size:12px;font-family:Verdana">'
    html +='<p align="center"><img src="your_logo.jpg" alt="logo" height="43" width="198"></p> '
    html +='<p> The issue ['+issue+'] is open for over '+esc_time+' hours.</p>'
    html +='<p> A link to view the issue: https://your.jira.com/browse/'+issue+'.</p>'
    html +='<BR><p> This is an automated email sent from Jira.</p>'
    html +='</body></html>'
    emailMsg = email.MIMEMultipart.MIMEMultipart('alternative')
    emailMsg['Subject'] = subject
    emailMsg['From'] = fromAddr
    emailMsg['To'] = toAddr
    emailMsg.attach(MIMEText(html, 'html'))
    # Send the email
    emailserver = SMTP(smtpserver) # ip or domain name of smtp server
    emailserver.login(mail_user, mail_password)
    emailserver.sendmail(fromAddr, [toAddr], emailMsg.as_string())
    emailserver.quit()
    return

s = xmlrpclib.ServerProxy(server)
auth = s.jira1.login(user, password)

esc12List = []
esc24List = []
esc48List = []

issues = s.jira1.getIssuesFromFilter(auth, filter)
print "Modifying issue..."
for issue in issues:
        creation = 0;
        # get open since time
        for customFields in issue['customFieldValues']:
                if customFields['customfieldId'] == opend_since_field :
                        print "found field!"+  customFields['values']
                        creation = customFields['values']
        if (creation == 0):
                creation = issue['created']
                print "field not found"
    creationTime = datetime.fromtimestamp(mktime(time.strptime(creation, '%d/%b/%y %I:%M %p')))
    currentTime = datetime.fromtimestamp(mktime(time.gmtime()))
    delta = currentTime - creationTime
    esc12 = timedelta(hours=12)
    esc24 = timedelta(hours=24)
    esc48 = timedelta(hours=48)
    print "\nchecking issue "+issue['key']
    if (delta < esc12):
        print "less than 12 hours"
        print "not updating"
        continue
    if (delta < esc24):
        print "less than 24 hours"
        for customFields in issue['customFieldValues']:
            if customFields['customfieldId'] == 'customfield_10412':
                if customFields['values'] == '12h':
                    print "not updating"
                    break
                else:
                    print "updating !!!"
                    s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["12h"]})
                    esc12List.append(issue['key'])
                    break
        continue
    if (delta < esc48):
        print "less than 48 hours"
        for customFields in issue['customFieldValues']:
            if customFields['customfieldId'] == 'customfield_10412':
                if customFields['values'] == '24h':
                    print "not updating"
                    break
                else:
                    print "updating !!!"
                    s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["24h"]})
                    esc24List.append(issue['key'])
                    break
        continue
    print "more than 48 hours"
    for customFields in issue['customFieldValues']:
        if customFields['customfieldId'] == 'customfield_10412':
            if customFields['values'] == '48h':
                print "not updating"
                break
            else:
                print "updating !!!"
                s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["48h"]})
                esc48List.append(issue['key'])
                break

for key in esc12List:
    email_issue(key,'12')
for key in esc24List:
    email_issue(key,'24')
for key in esc48List:
    email_issue(key,'48') 
```

这种方法的主要优点是它是高度可定制的，并且通过将数据保存到自定义字段，可以轻松创建过滤器和报告以显示已打开很长时间的问题。

**升级到开发团队**

创建一个新的过渡 - `Escalate`。这将为开发团队创建一个问题，并将新问题链接到支持问题。添加以下帖子功能：

```
from com.atlassian.jira.util import ImportUtils
from com.atlassian.jira import ManagerFactory
from com.atlassian.jira.issue import MutableIssue
from com.atlassian.jira import ComponentManager
from com.atlassian.jira.issue.link import DefaultIssueLinkManager
from org.ofbiz.core.entity import GenericValue;

# get issue objects
issueManager = ComponentManager.getInstance().getIssueManager()
issueFactory = ComponentManager.getInstance().getIssueFactory()
authenticationContext = ComponentManager.getInstance().getJiraAuthenticationContext()
issueLinkManager = ComponentManager.getInstance().getIssueLinkManager()
customFieldManager = ComponentManager.getInstance().getCustomFieldManager()
userUtil = ComponentManager.getInstance().getUserUtil()
projectMgr = ComponentManager.getInstance().getProjectManager()
customer_name = customFieldManager.getCustomFieldObjectByName("Customer Name")
customer_email = customFieldManager.getCustomFieldObjectByName("Customer Email")
escalate = customFieldManager.getCustomFieldObjectByName("Escalate to Development")

if issue.getCustomFieldValue(escalate) is not None:
    # define issue
    issueObject = issueFactory.getIssue()
    issueObject.setProject(projectMgr.getProject(10000))
    issueObject.setIssueTypeId("1") # bug
    # set subtask attributes
    issueObject.setSummary("[Escalated from support] "+issue.getSummary())
    issueObject.setAssignee(userUtil.getUserObject("nadav"))
    issueObject.setReporter(issue.getAssignee())
    issueObject.setDescription(issue.getDescription())
    issueObject.setCustomFieldValue(customer_name, issue.getCustomFieldValue(customer_name)+" "+issue.getCustomFieldValue(customer_email))
    issueObject.setComponents(issue.getComponents())
    # Create subtask 
    subTask = issueManager.createIssue(authenticationContext.getUser(), issueObject)
    # Link parent issue to subtask
    issueLinkManager.createIssueLink(issueObject.getId(),issue.getId(),10003,1,authenticationContext.getUser())
    # Update search indexes
    ImportUtils.setIndexIssues(True);
    ComponentManager.getInstance().getIndexManager().reIndex(subTask)
    ImportUtils.setIndexIssues(False) 
```

**转向销售**

创建一个新的过渡 - `Move to sales`。许多支持电话最终成为销售电话，这会将问题转移到销售团队。添加以下帖子功能：

```
from com.atlassian.jira.util import ImportUtils
from com.atlassian.jira.issue import MutableIssue
from com.atlassian.jira import ComponentManager

customFieldManager = ComponentManager.getInstance().getCustomFieldManager()
userUtil = ComponentManager.getInstance().getUserUtil()

issue.setStatusId("1");
issue.setAssignee(userUtil.getUserObject("John"))
issue.setSummary("[Moved from support] "+issue.getSummary())
issue.setProjectId(10201);
issue.setIssueTypeId("35");
ImportUtils.setIndexIssues(True);
ComponentManager.getInstance().getIndexManager().reIndex(issue)
ImportUtils.setIndexIssues(False)

# add to comments
from time import gmtime, strftime
time = strftime("%d-%m-%Y %H:%M:%S", gmtime())
cm = ComponentManager.getInstance().getCommentManager()
currentUser = ComponentManager.getInstance().getJiraAuthenticationContext().getUser().toString()
cm.create(issue,currentUser,'Email was moved to Sales at '+time,False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-09T21:15:31.283

> 您是否也推荐 Jira 用于客户支持，或者我们是否应该为此目的找到另一个系统，例如 Zendesk？

全面披露：我是 DoneDone 的创建者，但这个问题基本上是我们产品存在的原因。

DoneDone 是一个简单的错误跟踪器和客户支持/共享收件箱工具。我们将其用于一般客户支持（通过我们的支持电子邮件地址和我们网站上的联系表）。共享收件箱工具可让您对电子邮件进行私人讨论，并允许您对其进行分配、优先级、标记和创建/更改状态（例如“打开”、“进行中”等）

DoneDone 可让您[将客户对话（也称为传入支持电子邮件）连接到内部任务](https://www.donedone.com/blog/new-create-link-tasks-directly-from-your-mailbox-conversations)。因此，如果您的公司有独特的支持和面向客户的人员，同时也有内部开发人员，并且您希望将他们的工作分开，您可以从传入的对话中创建任意数量的子任务。

如果您正在寻找一种通过客户支持反馈组织内部工作的好方法，那么[注册免费试用](https://www.donedone.com/)可能是值得的。

# c# - Linq 反向 GroupBy

> ID：15272867
> 
> 赞同：2
> 
> 时间：2013-03-07T13:48:18.713
> 
> 标签：c#, linq, lambda, grouping

我有这个查询：

```
from e in Employee
join t in TimeTable
    on e.Id equals t.EmpId
group new {e,t} by e.Id into g
orderby g.Key
select new 
{
  Emp = g.Key, 
  Items = g.Select(c => c.t.OtherTable.Somevalue).Distinct()
} 
```

`Employees`它工作正常，但我需要反转分组，以便它将全部分组`OtherTable.Somevalue`

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:50:47.523

可能喜欢遵循这个它会起作用

```
from e in Employee
join t in TimeTable
    on e.Id equals t.EmpId
group new {e,t} by t.OtherTable.Somevalue into g
orderby g.Key
select new 
{
  SomeValue = g.Key, 
  Emplyees = g.Select(c => c.e.Id).Distinct()
} 
```

# ubuntu-12.04 - Sudo-apt 无法连接到 localhost:port

> ID：15272868
> 
> 赞同：0
> 
> 时间：2013-03-07T13:48:26.777
> 
> 标签：ubuntu-12.04, virtual-machine

出于测试目的，我在虚拟机（Oracle VM Virtualbox Manager）上安装了 ubuntu-12.04，现在我正在尝试在这台机器上安装 mysql。（我对此很陌生..）

登录后我使用这个命令

```
sudo apt-get update && sudo apt-get upgrade 
```

但我一遍又一遍地得到这个错误：

***无法获取[http://nl.archive.ubuntu.com/ubuntu/dists/precise-updates/Release.gpg](http://nl.archive.ubuntu.com/ubuntu/dists/precise-updates/Release.gpg)无法连接到 localhost:3000：***

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:29:25.017

在这里找到答案： [https ://askubuntu.com/questions/116243/apt-get-update-fails-due-to-unable-to-connect-to-localhost8250-error](https://askubuntu.com/questions/116243/apt-get-update-fails-due-to-unable-to-connect-to-localhost8250-error)

所以我不确定这篇文章是否仍然属于这里。

必须删除行 Acquire::http::proxy "localhost:8250/";; 来自 /etc/apt/apt.conf

# cakephp - cakePHP 保存条目以连接现有记录表

> ID：15272872
> 
> 赞同：0
> 
> 时间：2013-03-07T13:48:40.757
> 
> 标签：cakephp, model, has-and-belongs-to-many, jointable

首先是一个简短的描述。我必须模型：帐户和用户以及它的连接表accounts_users。这些模型在每个模型上都有一个 habtm 关联：

用户模型：

```
 'Account' => array(
        'className' => 'Account',
        'joinTable' => 'accounts_users',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'account_id',
        'unique' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ) 
```

账户模式：

```
 'User' => array(
        'className' => 'User',
        'joinTable' => 'accounts_users',
        'foreignKey' => 'account_id',
        'associationForeignKey' => 'user_id',
        'unique' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ) 
```

现在我试图手动将这两者之间的关系保存到连接表 acccounts_users 从所有现有条目中，这里是我的代码

```
 $account = base64_decode($this->params['pass']['0']);
    $token = $this->params['pass']['1'];

    if($user = $this->User->findByToken($token))
    {
        // ZUr test zwecken
       # $this->User->query(" INSERT INTO accounts_users (account_id ,user_id) VALUES (222, 223); ");
        $aId = $this->Account->findById($account);
        $this->data['User'][0]['user_id'] = $user['User']['id'];
        $this->data['Account'][0]['account_id'] = $aId['Account']['id'];

        $this->User->bindModel(array(
            'hasMany' => array('AccountsUser')
        ));
        $this->User->saveAll($this->data, array('validate' => false));

        print_r('gefunden'); die;
        $this->Redirect->flashSuccess('Account Invitation successfull. Log In!', array('controller' => 'users', 'action' => 'login'));
    }
    else
    {
        print_r('nicht gefunden'); die;
        // user nicht gefunden zum login umleiten
        $this->Redirect->flashWarning('Account Invitation error. Please try again!', array('controller' => 'users', 'action' => 'login'));

    } 
```

结果是accounts_users 表上的一个新条目，但user_id 为0。我不明白为什么缺少用户ID，因为它正确地传递了。即使我在数据数组中手动​​传递了一些 id，它只写了 account_id 而没有用户 id。

# 更新

我对模型进行了一些操作，并通过帐户模型将数据保存到 accounts_users 中，请参阅更新后的代码：

```
 $this->data['User']['id'] = $user['User']['id'];
        $this->data['Account']['id'] = 33; #$aId['Account']['id'];

        $this->Account->AccountsUser->create();

        $this->Account->saveAll($this->data, array('validate' => false)); 
```

所以现在脚本会插入两个 id，但是，如果有一个条目来自另一个具有相同帐户 id 的用户，则该用户会被覆盖。其他任何工作。关于如何为新用户创建具有轴心帐户 ID 的新条目的任何想法？

这是我得到的mysql查询：

更新`accounts`集`id`= 33 在哪里`accounts`。`id`= 33

选择`AccountsUser`。`user_id`从哪里来。`accounts_users`_ `AccountsUser` _ = 33`AccountsUser``account_id`

`AccountsUser`从`accounts_users`哪里删除。`AccountsUser` _ = 33 和`AccountsUser``account_id`

插入`accounts_users`( `account_id`, `user_id`) 值 (33,'32')

任何想法为什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:47:40.937

CakePHP 1.x 对待 HABTM 连接表相当“愚蠢”；它将删除所有现有记录并插入新记录以替换它们。如果您的连接表还包含其他数据，则这是一个主要的 PITA。（可以通过在 beforeSave() 回调中添加一些代码来防止这种情况发生）

CakePHP 2.1 有一个`keepExisting`用于HABTM 关系的选项。该选项防止 CakePHP 删除 JOIN 表中的记录。如果这是一个新项目，我真的建议使用 CakePHP 2.x，因为自 CakePHP 1.x 以来已经改进了*很多。*

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)

在连接表中保存数据的一些提示可以在这里找到；

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-hasmany-through-data](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-hasmany-through-data)

对于 CakePHP 1.3 (看下面'当 HABTM 变得复杂时)

[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#saving-related-model-data-habtm](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#saving-related-model-data-habtm)

# optimization - 在单个绘图调用中重新启动图元（directx9）

> ID：15272885
> 
> 赞同：0
> 
> 时间：2013-03-07T13:49:10.460
> 
> 标签：optimization, directx, vbo, directx-9

我正在移植 openGL 应用程序，它使用重新启动三角形条以优化绘图调用的能力。所以我们可以用两个缓冲区和一个绘图调用来渲染几十个单独的对象。在 openGL 索引缓冲区中必须只复制一些索引，openGL 将从那里重新启动原语。[正如这里](http://msdn.microsoft.com/ru-ru/library/windows/desktop/bb205124%28v=vs.85%29.aspx#Generating_Multiple_Strips)提到的，我们可以使用“-1”魔法索引重新启动三角形条。但它是 dx10 人。**我怎样才能在 dx9 中做同样的事情？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:56:17.560

根据 MSDN，DX9 中没有这样的等价物，请参阅此[页面](http://msdn.microsoft.com/ru-ru/library/windows/desktop/bb509660%28v=vs.85%29.aspx)

> 注意 仅在功能级别 10.0 或更高版本的设备上支持重新启动和 –1 'magic value' 的剪切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:04:36.920

Zdd 是对的 - 没有*特殊*标记（例如 -1）来重新启动原语。 **但**答案仍然存在，而且非常简单。我只是没有想到 OpenGL 是如何破坏原始的。现在我不认为，这两个双索引以任何特殊方式处理。这是简单的几何图形 - 索引 [1, 2, 3, 4, 4, 5, 5, 6, 6, 7, 8] 将呈现

*   4个可见三角形
*   4个不可见（退化）三角形
*   1条（正式，部分不可见）

因此，观察者将感知到 2 个条带。正是需要的。

# windows-xp - windows xp sp3 bsod - 括号中的数字是什么意思？

> ID：15272895
> 
> 赞同：0
> 
> 时间：2013-03-07T13:49:40.300
> 
> 标签：windows-xp, vmware, bsod

我的 Windows XP SP3 映像（在 Workstation 8 上运行）突然出现 BSOD。这是消息：

```
stop: 0x000000D1 (0x00000008, 0x00000002, 0x00000000, 0x8616A7c5) 
```

我试图调试 D1 错误 - 其他值代表什么？我希望他们能指出我的问题的解决方案。任何想法最后4个数字代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:13:09.743

确保计算机已[正确配置](http://support.microsoft.com/kb/130536)为保存故障转储文件。第一个参数 -`0x00000008`在任何 IRQL 的用户模式和内核模式下，内存都引用了错误地址。引用内存的第 4 个参数地址`0x8616A7c5`。在此地址加载的模块中的指令会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:12:20.193

从 Microsoft 下载 win-debugger，然后打开故障转储文件。您还可以看到调用堆栈并知道哪个进程导致了 BSOD。

# dapper - 扩展 MultiMap 支持的类型数量

> ID：15272898
> 
> 赞同：2
> 
> 时间：2013-03-07T13:49:49.807
> 
> 标签：dapper

我正在考虑扩展 Dapper 中的 MultiMap 方法以支持超过 5 种类型。只是好奇 5 是否有技术/性能原因，还是只是一个任意数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:53:52.457

这是*相当*随意的，部分原因是一些实现细节使得任意扩展非常尴尬 - 特别是因为它使用泛型。更改为不使用泛型的实现将允许更多基于类型数组的方法，但随后 lambdas 等（将数据缝合在一起）变得非常难看。IIRC，拉取请求队列中有一些与此相关的待处理事项，但我还没有太多可用时间来审查它们。

另外：可以说，如果您正在执行涉及多种类型的查询，那么您*可能*已经在做一些非常复杂的事情；很难为任意复杂的系统公开一个友好的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:37:07.097

只是想让您知道已经支持更多类型。（只是帮助你不要重新发明轮子）

[https://code.google.com/p/dapper-dot-net/issues/detail?id=50](https://code.google.com/p/dapper-dot-net/issues/detail?id=50)

在页面底部，您可以获得 git-hub 更改。

马特

# sed - 模式匹配和处理期望中的数据？

> ID：15272900
> 
> 赞同：-1
> 
> 时间：2013-03-07T13:49:57.130
> 
> 标签：sed, awk, expect, cisco

的内容`expect_out(buffer)`

```
GigabitEthernet1/0/9   unassigned      YES unset  up                    up
GigabitEthernet1/0/10  unassigned      YES unset  down                  down
GigabitEthernet1/0/11  unassigned      YES unset  down                  down
GigabitEthernet1/0/23  unassigned      YES unset  down                  down
GigabitEthernet1/0/24  unassigned      YES unset  down                  down
GigabitEthernet1/1/1   unassigned      YES unset  down                  down
GigabitEthernet1/1/2   unassigned      YES unset  down                  down
GigabitEthernet1/1/3   unassigned      YES unset  down                  down
GigabitEthernet1/1/4   unassigned      YES unset  down                  down
Te1/1/1                unassigned      YES unset  down                  down
Te1/1/2                unassigned      YES unset  down                  down
FastEthernet2/0/1      unassigned      YES unset  down                  down
FastEthernet2/0/2      unassigned      YES unset  down                  down
FastEthernet2/0/24     unassigned      YES unset  down                  down
GigabitEthernet2/0/1   unassigned      YES unset  up                    up
GigabitEthernet2/0/2   unassigned      YES unset  down                  down 
```

我有上面的以下数据，我需要计算每种类型的数据数量，以便我可以获得如下信息：

```
GigabitEthernet1 : 20
GigabitEthernet2 : 20
Tel             : 2
FastEthernet2    : 4
FastEthernet1    : 4 
```

总数：50

我该怎么做？任何帮助将不胜感激，因为我不知道该朝哪个方向前进，因为就 expect/tcl 而言，我是新手。

我尝试使用 split 函数通过使用换行符作为分隔符来解析它，以便我可以在 for 循环中使用正则表达式，但似乎因为 $expect_output(buffer) 是一个变量，它可能没有任何行。

此外，我可以在 expect 中使用 awk 或 sed，那么我猜它不会那么困难。但预期的解决方案将是标准的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:56:46.940

根据您当前的输入数据，这个单行：

```
 awk -F'/' '{a[$1]++}END{for(x in a){print x" : "a[x];t+=a[x];}print "total : "t}' file 
```

给出：

```
FastEthernet2 : 3
GigabitEthernet1 : 9
GigabitEthernet2 : 2
Te1 : 2
total : 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:11:08.763

由于 Expect 基于**Tcl/TK**，您应该熟悉该语言，因为它包含许多字符串处理选项。这里有一些代码，希望能让你走上正轨。

```
set str $expect_out(buffer)
# Strip everything after slash
regsub -all -line "/.*" $str "" str2

puts $str2    # just to see what you got so far

# Convert string into list
set li [split $str2 "\n"]

# Convert list into array
# This is actually the tricky part which converts the list into an
# associative array whose entries have first to be set to one
# and later have to be increased by one
for {set i 0} {$i < [llength $li]} {incr i} {
  if { [info exists arr([lindex $li $i]) ] } {
    incr arr([lindex $li $i])   } {
    set  arr([lindex $li $i]) 1 }
}

# Now get the statistics
array get arr

# will print this for your example
#  GigabitEthernet2 2 Te1 2 FastEthernet2 3 GigabitEthernet1 9 
```

你也应该用 Tcl 和 TK 标记这个问题。

# c# - 使用反射和动态参数计数实例化对象

> ID：15272902
> 
> 赞同：1
> 
> 时间：2013-03-07T13:50:07.590
> 
> 标签：c#, reflection

我有一些课。通过反射，我得到了它的构造函数和参数计数/类型。我也有任何类型的生成器。所以我需要做

```
var constructor;
var params = constructor.GetParameters();
object[] args;
foreach( var param in params ) {
    var type = param.Parametertype;
    args[] += (object)Build<type>();
}

Activator.CreateInstance(Type, args); 
```

问题是，我不能将参数类型作为泛型参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:54:01.797

不，您还需要使用反射来调用泛型方法：

```
var constructor = ...;
var parameters = constructor.GetParameters();
object[] args = new object[parameters.Length];
// Adjust this for private methods etc
var buildMethod = typeof(ClassContainingBuild).GetMethod("Build");
for (int i = 0; i < args.Length; i++)
{
    var genericBuild = buildMethod.MakeGenericMethod(parameters[i].ParameterType);
    // Adjust appropropriately for target etc
    args[i] = genericBuild.Invoke(this, null); 
} 
```

# .net - Windows 网络聊天应用程序

> ID：15272907
> 
> 赞同：0
> 
> 时间：2013-03-07T13:50:17.687
> 
> 标签：.net, windows, wcf, web, chat

我的任务是使用具有 2 个聊天接口的 .net 开发聊天应用程序。来自 Windows 的第一个聊天界面和来自 Web 应用程序的其他聊天界面。我对 wcf 服务感兴趣。并找到了许多制作 windows 聊天应用程序或 web 聊天应用程序的示例，但我不知道如何在一个应用程序中混合 2 个界面。如何从 2 平台连接聊天服务器 ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:04:34.660

显示聊天应用程序的 wcf 示例很棒，但据我了解，它们不适合现实生活场景。 [XMPP](http://en.wikipedia.org/wiki/XMPP)正是为此而设计的，值得研究。

# php - 将悬停时的边框颜色设置为数据库中的动态颜色

> ID：15272911
> 
> 赞同：0
> 
> 时间：2013-03-07T13:50:29.970
> 
> 标签：php, jquery, css

好的，所以我有 uls 这是类别。里面的每个 li 都有一个 1px 的白色边框，因为 li 在白色背景上，所以看不到边框，以便在 li 悬停时阻止它们移动。

悬停时，我想将边框颜色更改为用户从数据库中为该类别选择的颜色。

这是标记

```
<ul class="productRange">

    {foreach $productRange index range}

        <li style="border-top: 1px solid {$range.productsCategoryColour}">
            <span class="productRangeTitle"style="color{$range.productsCategoryColour}">{$range.itemTitle}</span>

            <ul class="productCategoryView">

             {foreach $range.products ind product}

             <li class="productCategoryNugget">

             <a href="{$product.productURL}">
             <img src="/assets/layout/no_image_image.png" />{$product.productTitle}
             </a>

            </li>

            {/foreach}

            </ul>

        </li>       

    {/foreach}

</ul> 
```

CSS...

```
 .productCategoryNugget:hover {
      border: 1px solid;
  } 
```

类别颜色存储在 $range.productsCategoryColour 中，它设置了包含 li 的边框顶部。这是 ul productCategoryView 中的 li，在悬停时出现边框，现在它们都是黑色的，很好，但我希望它与它们所在类别的颜色相匹配

这是输出 HTML

```
 <ul class="productRange">

        <li style="border-top: 1px solid #0d2d94">
            <span class="productRangeTitle"style="color:#0d2d94">CADAC Patio Range</span>

            <ul class="productCategoryView">

                    <li class="productCategoryNugget">
                        <a href="stratos">
                        <img src="/assets/layout/no_image_image.png" />Stratos 4 Burner
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="stratos-3-burner">
                        <img src="/assets/layout/no_image_image.png" />Stratos 3 Burner
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="braai-maxx">
                        <img src="/assets/layout/no_image_image.png" />BraaiMaxx
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-4-burner-side-table">
                        <img src="/assets/layout/no_image_image.png" />Meridian 4 Burner & Side Table
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-3-burner">
                        <img src="/assets/layout/no_image_image.png" />Titan 4 Burner
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="free-standing-meridian-4-burner">
                        <img src="/assets/layout/no_image_image.png" />Free-Standing Meridian 4 Burner
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian">
                        <img src="/assets/layout/no_image_image.png" />Meridian 3 Burner & Side Burner
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="free-standing-meridian-3-burner">
                        <img src="/assets/layout/no_image_image.png" />Free-Standing Meridian
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="titan">
                        <img src="/assets/layout/no_image_image.png" />Stratos
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-accessories">
                        <img src="/assets/layout/no_image_image.png" />Meridian Accessories
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-4-burner-side-burner">
                        <img src="/assets/layout/no_image_image.png" />Meridian
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-3-burner-side-table">
                        <img src="/assets/layout/no_image_image.png" />Meridian 3 Burner & Side Table
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="meridian-4-burner">
                        <img src="/assets/layout/no_image_image.png" />Titan
                        </a>
                    </li>

            </ul>

        </li>       

        <li style="border-top: 1px solid #ff0000">
            <span class="productRangeTitle"style="color:#ff0000">CADAC Charcoal Range</span>

            <ul class="productCategoryView">

                    <li class="productCategoryNugget">
                        <a href="charcoal-mate-50cm">
                        <img src="/assets/layout/no_image_image.png" />Charcoal Mate 50cm
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="some-bbq">
                        <img src="/assets/layout/no_image_image.png" />Charcoal Pro Deluxe 57cm
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="some-other-bbq">
                        <img src="/assets/layout/no_image_image.png" />Charcoal Pro 57cm
                        </a>
                    </li>

                    <li class="productCategoryNugget">
                        <a href="charcoal-mate-57cm">
                        <img src="/assets/layout/no_image_image.png" />Charcoal Mate 57cm
                        </a>
                    </li>

            </ul>

        </li>       

        <li style="border-top: 1px solid #ebe300">
            <span class="productRangeTitle"style="color:#ebe300">CADAC Chef Range</span>

            <ul class="productCategoryView">

            </ul>

        </li>       

        <li style="border-top: 1px solid #00a2ff">
            <span class="productRangeTitle"style="color:#00a2ff">CADAC Braai Range</span>

            <ul class="productCategoryView">

            </ul>

        </li>       

        <li style="border-top: 1px solid #0d8a02">
            <span class="productRangeTitle"style="color:#0d8a02">CADAC Accessories</span>

            <ul class="productCategoryView">

            </ul>

        </li>       
    </ul> 
```

富有的 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:02:50.130

正如 bipen 所说，添加数据属性甚至 rel 属性效果最好。另一种方法是遍历 lis 父母：

```
$(function() {
    $('li.productCategoryNugget').mouseenter(function() {
        $(this).css('border-top', $(this).parents('li').css('border-top'));
    }).mouseleave(function() {
        $(this).css('border-top', 'solid 1px white');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:59:17.407

还有很多其他方法可以做到这一点......遍历 DOM.. 找到`parent()`悬停元素并获取颜色.. 但更简单和更好的性能（据我所知）是通过将 HTML 5 数据属性添加到 li..

```
<li class="productCategoryNugget" data-color="{$range.productsCategoryColour}" > 
```

和jQuery

```
$('.productCategoryNugget').hover(function(){
    var proColor=$(this).data('color'); //get data color value
    $(this).css('border-top','1px solid '+proColor) ;
},function(){
     $(this).css('border-top','1px solid')
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:03:51.923

事实证明，我把情况复杂化了。我给了样式，在内联样式中设置了边框颜色，然后对于 li a 的边距为 1px，边框为 0px，然后在悬停时，将边框设置为 1px，边距设置为 0px，全部在 CSS 中，不需要 jQuery...

CSS ...

```
.productCategoryNugget a {
text-decoration: none;
display: block;
height: 150px;
overflow: hidden;
color: #55687A;
margin: 1px;
}

.productCategoryNugget a:hover {
border: 1px solid;
margin: 0;
} 
```

标记（注意我使用的是 DWOO 模板引擎）

```
{foreach $range.products ind product}

<li class="productCategoryNugget">
<a href="{$product.productURL}" style="border-color: {$range.productsCategoryColour}">
<img src="/assets/layout/no_image_image.png" />{$product.productTitle}
</a>
</li>
{/foreach} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:03:00.740

从持有它的跨度中获取颜色。就像是

```
$(".productCategoryNugget").hover(
    function(){
             var parentLi = $(this).parent().parent();
             $(this).css("border-top": parentLi.css("border-top") );
     },
    //unset the border-color
    function(){
        $(this).css("border-top": "1px solid" );
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T14:41:49.287

这就是我认为应该的样子。拿走`color`，`$(this).parent().parent().children('.productRangeTitle')`然后随心所欲地使用。

这是一个小提琴示例。[小提琴](http://jsfiddle.net/PTqwH/)

# r - How to wait for a keypress in R?

> ID：15272916
> 
> 赞同：160
> 
> 时间：2013-03-07T13:50:42.890
> 
> 标签：r, keypress, wait, readline, readkey

I want to pause my R script until the user presses a key.

How do I do this?

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-09-11T16:27:51.597

As someone already wrote in a comment, you don't have to use the cat before `readline()`. Simply write:

```
readline(prompt="Press [enter] to continue") 
```

If you don't want to assign it to a variable and don't want a return printed in the console, wrap the `readline()` in an `invisible()`:

```
invisible(readline(prompt="Press [enter] to continue")) 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-03-07T13:50:42.890

**Method 1**

Waits until you press [enter] in the console:

```
cat ("Press [enter] to continue")
line <- readline() 
```

Wrapping into a function:

```
readkey <- function()
{
    cat ("Press [enter] to continue")
    line <- readline()
} 
```

This function is the best equivalent of `Console.ReadKey()` in C#.

**Method 2**

Pause until you type the [enter] keystroke on the keyboard. The disadvantage of this method is that if you type something that is not a number, it will display an error.

```
print ("Press [enter] to continue")
number <- scan(n=1) 
```

Wrapping into a function:

```
readkey <- function()
{
    cat("[press [enter] to continue]")
    number <- scan(n=1)
} 
```

**Method 3**

Imagine you want to wait for a keypress before plotting another point on a graph. In this case, we can use getGraphicsEvent() to wait for a keypress within a graph.

This sample program illustrates the concept:

```
readkeygraph <- function(prompt)
{
    getGraphicsEvent(prompt = prompt, 
                 onMouseDown = NULL, onMouseMove = NULL,
                 onMouseUp = NULL, onKeybd = onKeybd,
                 consolePrompt = "[click on graph then follow top prompt to continue]")
    Sys.sleep(0.01)
    return(keyPressed)
}

onKeybd <- function(key)
{
    keyPressed <<- key
}

xaxis=c(1:10) # Set up the x-axis.
yaxis=runif(10,min=0,max=1) # Set up the y-axis.
plot(xaxis,yaxis)

for (i in xaxis)
{
    # On each keypress, color the points on the graph in red, one by one.
    points(i,yaxis[i],col="red", pch=19)
    keyPressed = readkeygraph("[press any key to continue]")
} 
```

Here you can see the graph, with half of its points colored, waiting for the next keystroke on the keyboard.

Compatibility: Tested under environments use either win.graph or [X11](http://en.wikipedia.org/wiki/X_Window_System). Works with Windows 7 x64 with Revolution R v6.1\. Does not work under RStudio (as it doesn't use win.graph).

![enter image description here](../Images/c3ca5f39f0bb7d63e5165ad13081b88d.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-07T22:32:54.213

Here is a little function (using the tcltk package) that will open a small window and wait until you either click on the continue button or press any key (while the small window still has the focus), then it will let your script continue.

```
library(tcltk)

mywait <- function() {
    tt <- tktoplevel()
    tkpack( tkbutton(tt, text='Continue', command=function()tkdestroy(tt)),
        side='bottom')
    tkbind(tt,'<Key>', function()tkdestroy(tt) )

    tkwait.window(tt)
} 
```

Just put `mywait()` in your script anywhere that you want the script to pause.

This works on any platform that supports tcltk (which I think is all the common ones), will respond to any key press (not just enter), and even works when the script is run in batch mode (but it still pauses in batch mode, so if you are not there to continue it it will wait forever). A timer could be added to make it continue after a set amount of time if not clicked or has a key pressed.

It does not return which key was pressed (but could be modified to do so).

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-04-08T09:33:11.553

R and Rscript both send `''` to readline and scan in non-interactive mode (see `? readline`). The solution is to force `stdin` using scan.

```
cat('Solution to everything? > ')
b <- scan("stdin", character(), n=1) 
```

Example:

```
$ Rscript t.R 
Solution to everything? > 42
Read 1 item 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-27T00:12:28.227

The function `keypress()` from the package [`keypress`](https://github.com/gaborcsardi/keypress) reads a single key stroke instantly, *without having to hit enter*.

However, it only works in the Unix/OSX terminal or Windows command line. It does not work in Rstudio, the Windows R GUI, an emacs shell buffer etc.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-26T09:57:52.567

This answer is similar to that of [Simon](https://stackoverflow.com/a/22933024)'s, but does not require extra input other than a newline.

```
cat("Press Enter to continue...")
invisible(scan("stdin", character(), nlines = 1, quiet = TRUE)) 
```

Using `nlines=1` instead of `n=1`, the user can simply press enter to continue the Rscript.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-22T16:10:10.513

A way of doing it (kinda, you have to press a button rather than a key, but close enough) is to use shiny:

```
library(shiny)

ui     <- fluidPage(actionButton("button", "Press the button"))
server <- function(input, output) {observeEvent(input$button, {stopApp()})}

runApp(shinyApp(ui = ui, server = server))

print("He waited for you to press the button in order to print this") 
```

To my experience, this has a unique characteristic: even if you ran a script that had code written following the `runApp` function, it will not run until you've pressed the button in the app (button that stops the apps from inside using `stopApp`).

# python - python 3.2中的大括号集和排序

> ID：15272918
> 
> 赞同：1
> 
> 时间：2013-03-07T13:50:44.417
> 
> 标签：python, sorting, brackets

您好我有两个问题：

1.  我正在尝试使用表单示例的 ie 构建两个组：`new = [{24,33},{12,13},{17,19},....]`. 基本上我有两个列表形式的数据，一个被称为`N = [24,12,17,....]`，另一个是`z = [33,13,19,....]`。我一直在尝试使用以下方法来实现这一目标：

    ```
    new=[]
    for i in range(len(z)):
        new.append({z[i]})
        new.extend({N[i]})
    print(new) 
    ```

    并且已经尝试了带有或不带有大括号的附加和扩展的许多变体。

2.  一旦 1) 实现，我想根据每组中第二个项目的大小重新排列新的，即按 z 的升序排列，所以我想得到：

    ```
    new=[{12,13},{17,19},{24,33}] 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:53:38.740

用于`zip()`配对两个列表：

```
new = [{a, b} for a, b in zip(N, z)] 
```

但是集合是*无序*的，所以没有“第二个值”。您可以对最小值进行排序：

```
new.sort(key=lambda s: min(s)) 
```

如果您需要根据 的值对其进行排序`z`，请在创建集合之前执行此操作：

```
from operator import itemgetter

new = [{a, b} for a, b in sorted(zip(N, z), key=itemgetter(1))] 
```

**但是**如果这些真的是 x, y 坐标，那么只需使用`zip()`and`sorted()`给你一个*元组*序列：

```
new = sorted(zip(N, z), key=itemgetter(1)) 
```

A`set()`仅包含唯一值：

```
>>> {1, 1}
set([1]) 
```

元组是一个有序的（不可变的）序列：

```
>>> (1, 1)
(1, 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:53:47.880

第一个很简单：

```
new = [set(x) for x in zip(N,z)] 
```

第二个实际上需要*在制作集合之前*完成，因为集合是无序的：

```
new = [set(x) for x in sorted(zip(N,z),key=lambda x:x[1])] 
```

或者

```
import operator
new = [set(x) for x in sorted(zip(N,z),key=operator.itemgetter(1))] 
```

对于不喜欢的人`lambda`

* * *

也不确定您是否真的想使用`sets`它。我认为 a`tuple`可能会更好——在这种情况下，只需使用该`sorted`步骤。

```
new = sorted(zip(N,z),key=lambda x:x[1]) 
```

集合不维护任何顺序并且不可索引，因此它们不能构成一个非常好的数据结构来保存`x-y`对，因为您无法知道哪个元素是`x`哪个元素是`y`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:57:37.520

您不想要[集合](http://en.wikipedia.org/wiki/Set_%28mathematics%29)（其中两个值必须不同，并且没有顺序），而是元组 - 只是两个项目一个接一个地出现。

使用[`zip`](http://docs.python.org/2/library/functions.html#zip)函数和[`sorted`](http://docs.python.org/2/library/functions.html#sorted)排序：

```
>>> z = [24, 12, 17]
>>> N = [33, 13, 19]
>>> sorted(zip(z, N), key=lambda tpl: tpl[1])
[(12, 13), (17, 19), (24, 33)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T13:55:30.500

```
>>> list(map(set, zip(N, z)))
[{24, 33}, {12, 13}, {17, 19}] 
```

> 然后我想根据第二个项目的大小重新排列新的

集合是无序的，因此不存在“第二项”之类的东西。

如果这两个项目的顺序很重要，您可能应该使用元组而不是集合。

根据第二个元素的大小对元组重新排序：

```
>>> sorted(zip(N, z) , key=lambda x:x[1])
[(12, 13), (17, 19), (24, 33)] 
```

# java - 在 Java 的 TextField 中只引入数字形成一个区间

> ID：15272921
> 
> 赞同：0
> 
> 时间：2013-03-07T13:50:47.520
> 
> 标签：java, swing, jformattedtextfield

如何在 Java 的 FormattedTextField 中仅添加 0 和 255 之间的数字？

我试过这样：

```
private JFormattedTextField text4;
//...
text4= new JFormattedTextField(paymentFormat);
    text4.getValue();
    text4.setColumns(3);
    try {
        MaskFormatter mask = new MaskFormatter("###");
        mask.install(text4);
    } catch (ParseException ex) {
       System.out.print("Valoarea nu e corecta");
    } 
```

它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:52.853

有两种方法

*   使用[JSpinner](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)而不是,[在 SpinnerNumberModel](https://stackoverflow.com/a/7570411/714968)`JFormattedTextField`中设置适当的范围

*   将[DocumentFilter 添加到 JFormattedTextField](https://stackoverflow.com/a/9430683/714968)，并确定 Integer、Double 值是否小于 0 且大于 255

*   [setMinimum / setMaximum 用于正确的 XxxFormatter](https://stackoverflow.com/a/14876889/714968)

*   添加[DocumentListener 以显示 JFormattedTextField 的重载](https://stackoverflow.com/a/8582656/714968)

# ms-access - 这个SQL应该怎么写？

> ID：15272930
> 
> 赞同：0
> 
> 时间：2013-03-07T13:51:26.230
> 
> 标签：ms-access

我试图编写一个简单的 SQL 语句来检索 2013 年 1 月 1 日之后的日期。这是写在 ms 访问中的查询中：

```
SELECT * 
FROM tblWebMeetingData 
WHERE [Event Date] > 01/01/2013; 
```

这确实运行但它没有得到我想要的东西 - 它实际上取回了所有记录，而不是只获取在此日期之后实际发生的记录。在表格中，它正在查看 [Event Date]，其格式为 mm/dd/yyyy 美国格式。

注意 - 如果我将它放在引号中，即“”或“”，那么它会引发错误并确定存在数据类型不匹配。那么这应该如何构建呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:53:15.377

将日期放在 ## 和月-日-年格式之间：

```
SELECT * 
FROM tblWebMeetingData 
WHERE [Event Date] > #01/01/2013#; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:54:27.863

你应该在日期周围使用#号，这样#1/09/2008#

# nosql - 使用 CouchDB 进行多标准搜索

> ID：15272933
> 
> 赞同：8
> 
> 时间：2013-03-07T13:51:31.380
> 
> 标签：nosql, couchdb

如何从 CouchDB 获取数据，过滤多个字段。

例如，如果我有一个包含姓名、州、国家等字段的人员数据库；和网页上的搜索表单，我如何从 CouchDB 获取数据，仅考虑非空条件。

在 SQL 中，我会将条件附加到 where 子句`WHERE Person.Name="John" AND Person.State in ("NY","CA")`，但是如何将此查询构建为 CouchDB 视图

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:10:43.263

在 CouchDB 中，您使用 map/reduce 视图。在 SQL 中，您必须明确说明将创建哪个字段索引。在 CouchDB 中，您编写自定义函数创建索引，因此它可以更具体地满足您的需求。如果您想要索引这样简单的事情，例如使用名称、州和国家字段进行搜索，则视图只是一个地图功能：

```
function (doc) {
  if (doc.name && doc.state && doc.country)
    emit([doc.name, doc.state, doc.country], doc);
} 
```

要使用此视图进行搜索，请搜索 key `["my_name", "my_state", "my_country"]`。您可以使用它来查询名称、州和国家/地区的子集，只要它们是发出数组的前缀（例如，使用 and 搜索`name`但不使用`state`and `country`），因为 map 的可搜索结果是按字典顺序排序的。

原则上，视图是具有某些查询功能的索引，但不如 SQL 查询灵活。它们执行一次并存储在磁盘上，并针对新的/修改的数据进行增量计算。请注意，在分布式系统中很难做效率低下的事情（为此设计了 CouchDB）：更复杂的连接，没有索引的搜索......尽管在许多情况下，在结构化时，关系模型中的表的人为划分不是必需的文档是可用的，并且某些连接是不需要的。

有关 CouchDB 与 SQL 的简要比较，请参阅[The Definitive Guide](http://guide.couchdb.org/draft/cookbook.html) book 的这一章和其他章节以及官方[wiki](http://wiki.apache.org/couchdb/)以获取有关视图的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:58:01.527

您需要创建一个视图，其中包含 [doc.name, doc state]。这在文档中有很好的描述。真正的问题是如何从两个随机状态中选择人。

这是一篇回答这个问题的好文章：[使用多个开始和结束键进行 CouchDB 视图](http://jamietalbot.com/2010/03/24/using-multiple-start-and-end-keys-for-couchdb-views/)

# c++ - 推导可变参数模板连接

> ID：15272935
> 
> 赞同：1
> 
> 时间：2013-03-07T13:51:33.830
> 
> 标签：c++, c++11, standards, variadic-templates, template-argument-deduction

所以问题很简单，编译器是否应该能够根据标准推断模板连接？

例子：

```
template<typename... RUN_TIME, typename T, typename... CONSTRUCTION_TIME> 
Runnable<T, RUN_TIME...>* makeRunnable(T (*FunctionType)(CONSTRUCTION_TIME..., RUN_TIME...), CONSTRUCTION_TIME... ct_args)
{
    ...
}

int print_function(char arg1, int arg2, const char* arg3);

makeRunnable<const char*>(print_function, 'C', -3); 
```

`print_function`给定参数和显式模板，编译器是否应该能够确定该函数可以通过？

看更多; [上一个问题](https://stackoverflow.com/questions/15270998/non-standard-code-or-g-error)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:45:37.707

除了标准说明编译器*应该*能够做什么的问题之外，这里有一些 TMP 可以使它在 gcc 上编译：

```
/** PackDiff: 
 *  Template Metafunction to deduce the difference of two parameter packs.
 *  To distinguish two packs we have to brace them in two tuples
 */
template <class Tup1, class Tup2> struct PackDiff;

/** Basic algorithm: (T, X1...) - (T, X2...) = (X1...) - (X2...) */
template <class T, class... Pack1, class... Pack2>
struct PackDiff<std::tuple<T, Pack1...>, std::tuple<T, Pack2...>>
  : PackDiff<std::tuple<Pack1...>, std::tuple<Pack2...>> {};

/** End of recursion: (X1...) - () = (X1...) */
template <class... Pack1>
struct PackDiff<std::tuple<Pack1...>, std::tuple<>>
{
  typedef std::tuple<Pack1...> type;
};

/** Mismatch: (T, X1...) - (U, X2...) is undefined */
template <class T1, class... Pack1, class T2, class... Pack2>
struct PackDiff<std::tuple<T1, Pack1...>, std::tuple<T2, Pack2...>>
{ typedef struct PACK_MISMATCH {} type; };

/** Rest: () - (X2...) is undefined */  
template <class... Pack2>
struct PackDiff<std::tuple<>, std::tuple<Pack2...>>
{ typedef struct LEFT_PACK_TOO_SHORT{} type; };

//make Runnable Type of T and a diff tuple:
template <class T, class Tup1> struct MakeRunnableType;

template <class T, class... Pack>
struct MakeRunnableType<T, std::tuple<Pack...>>
{ typedef Runnable<T, Pack...> type; };

template<typename... AllArgs, typename T, typename... SomeArgs> 
auto makeRunnable(T (*FunctionType)(AllArgs...), SomeArgs... ct_args)
  -> typename MakeRunnableType<T, 
          typename PackDiff<std::tuple<AllArgs...>, 
                std::tuple<SomeArgs...>
          >::type
     >::type*
{
  typedef typename PackDiff<std::tuple<AllArgs...>, 
                std::tuple<SomeArgs...>
          >::type PackDiff_t;
  typedef typename MakeRunnableType<T, PackDiff_t>::type ReturnType;
  return new ReturnType();
} 
```

我知道。看起来不是很漂亮。但[适用于 GCC。](http://ideone.com/ANq8kQ)

# php - 这是一个有效的 PHP 数组访问方法吗？

> ID：15272939
> 
> 赞同：1
> 
> 时间：2013-03-07T13:51:46.023
> 
> 标签：php, arrays

这只是一个好奇的问题......我想知道在这个方法中访问函数返回的数组是否有效。在此示例中，我使用的是 pathinfo() 结果数组。

```
pathinfo($file)['dirname']; 
```

或者，是否需要先将 pathinfo() 设置为变量，然后再访问它。（经典方法）：

```
$info = pathinfo($file);
$info['dirname']; 
```

我知道经典方法是有效的，但是我只是好奇第一种方法是否也有效。我已经使用最新版本的 WAMP 对其进行了测试，并且可以正常工作，但是 Dreamweaver CS5 将其称为语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:52:55.887

PHP 5.4+ 支持`pathinfo($file)['dirname'];`

它被称为数组解引用

参考：[http ://www.schlueters.de/blog/archives/138-Features-in-PHP-trunk-Array-dereferencing.html](http://www.schlueters.de/blog/archives/138-Features-in-PHP-trunk-Array-dereferencing.html)

参考： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

小于 5.4

```
$info = pathinfo($file);
$info['dirname']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:53:46.063

自 PHP 5.4 起，可以做到这一点：

[http://php.net/manual/en/language.types.array.php#example-88](http://php.net/manual/en/language.types.array.php#example-88)

# selenium - 使用 Watir-Webdriver 和 phantomjs 的帧问题

> ID：15272941
> 
> 赞同：3
> 
> 时间：2013-03-07T13:51:51.190
> 
> 标签：selenium, watir, watir-webdriver, phantomjs, ghostdriver

我正在使用 Watir-Webdriver 和 phantomjs 编写测试，我遇到了 iframe 的问题。我正在尝试使用以下代码获取元素：

```
browser.frame(:index => 0).div(:id, "wrapper").exists? 
```

当我使用 phantomjs 时，它会引发错误：

```
NameError: uninitialized constant Watir::FramedDriver::UnknownFrameException 
```

但是当我使用 chrome 驱动程序时，上面的代码可以正常工作并返回“true”值。

有什么想法可以解决吗？或者也许还有其他方法可以使用 phantomjs 获取此元素？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:45:39.143

我的猜测是 ghostdriver 不支持帧。我在它的错误跟踪器中找不到与框架相关的未解决问题：[https](https://github.com/detro/ghostdriver/issues) ://github.com/detro/ghostdriver/issues如果您认为这是 ghostdriver 中的错误，您应该在那里报告。

# php - 使用 sumbit 表单 php 更新表中的值

> ID：15272948
> 
> 赞同：0
> 
> 时间：2013-03-07T13:51:59.143
> 
> 标签：php, html, mysql

我的项目是：我的数据库中有一个值（整数），默认值为 0，我希望它更新（我的意思是不要更改，但要添加到它上面）每当用户单击我的提交表单时html页面。进一步解释：例如我的默认值为 0 ，然后第一个客人提交 value=20 并更改为 20，然后保存在数据库中。下一位客人提交 value=30，table value 变为 20+30=50。

到目前为止我的html：

```
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
<meta name="generator" content="3.2.2.183"/>
<title>Help The World</title>
<!-- CSS -->
<link rel="stylesheet" type="text/css" href="style.css"/>
<!-- Other scripts -->
<script src="java.js" type="text/javascript"></script>
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td> <input name="help_1" value="25" type="checkbox" id="help_1" onclick="UpdateCost();"> </td>
<td> ResponseOption_1 </td>
</tr>
<tr>
<td> <input name="help_2" value="15" type="checkbox" id="help_2" onclick="UpdateCost();"> </td>
<td> ResponseOption_2 </td>
</tr>
</table>
<form action="insert.php" method="post">
<input type="text" id="totalpoints" name="total" value="">
<input type="submit" value="Help World">
</form>

<script type="text/javascript">
function UpdateCost() {
  var sum = 0;
  var gn, elem;
  for (i=1; i<3; i++) {
    gn = 'help_'+i;
    elem = document.getElementById(gn);
    if (elem. checked == true) { sum += Number(elem. value); }
  }
  document.getElementById('totalpoints' ).value = sum;
}
</script>
</body>
</html> 
```

到目前为止我的php：

```
mysqli_query($con,"UPDATE total SET points= ?");
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:24:23.763

首先，您需要数据库连接详细信息。换句话说，主机名（通常是“localhost”）、数据库名称、数据库的用户名和密码。

然后，您需要在该数据库中设置一个表。鉴于您上面的 PHP，表名似乎是“total”。

在您的表“总计”中，您需要插入一行。您可以通过运行如下查询来做到这一点：

```
<?
// 1\. here you need to insert code that connects to the database.
//...
// 2\. now for the rest of the code...
mysqli_query($con,"INSERT INTO total (id, points) values (1, 0)");
?> 
```

您只会运行上述行一次。之后，您根本不再需要运行它，您可以删除运行它的文件。

在上面显示的 PHP 文件中，您需要执行以下操作：

```
<?
// 1\. here you need to insert code that connects to the database.
//...
// 2\. now for the rest of the code...
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysql_fetch($result_set);
$old_total = $row['total'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:26:54.930

我通过一些编辑解决了它，最终代码是：

```
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

非常感谢 Jodes ;)

# android - 运行 mapsforge 地图应用程序

> ID：15272949
> 
> 赞同：1
> 
> 时间：2013-03-07T13:52:02.173
> 
> 标签：android, maps, offline-caching

我正在尝试创建 mapsforge 离线地图应用程序。我遵循了指导方针，或者下面的网站是我的代码的快照 ![在此处输入图像描述](../Images/87729eb18e3f25f2452bac78090a9ecf.png)

但是当我运行这个应用程序时，应用程序崩溃了。logcat如下。 ![在此处输入图像描述](../Images/cfe7e30f0f0136eae33ac0d6f223632d.png)

![在此处输入图像描述](../Images/cfe7e30f0f0136eae33ac0d6f223632d.png)

但是，如果我注释掉 in mainfest。该应用程序运行良好。我无法弄清楚问题所在。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:59.117

堆栈跟踪表明您在写入 SD 卡时遇到问题。您的清单文件中是否具有以下权限？

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# android - 片段列表没有得到更新

> ID：15272955
> 
> 赞同：0
> 
> 时间：2013-03-07T13:52:11.953
> 
> 标签：android, listview, fragment

我有一个可以`FragmentActivity`在其中触发一个`AsyncTask`收集数据列表的方法。这个活动有一个`ListFragment`，我想在数据不断出现时更新列表视图。

我有另一个片段也应该获取数据，所以我实现了一些快速版本的观察者模式，以便在将元素添加到列表时它们都会收到通知：

```
private void addElement(MyListElement item) {
    myList.add(item);
        Collections.sort(myList, Collections.reverseOrder());   
        notifyObservers();
}
private void notifyObservers() {
    for(IListObserver dObserver: observers){
          dObserver.updateList(myList);
    }
} 
```

但是我的列表永远不会更新（或者其他片段，就此而言）。

这是 ListFragment 代码：

```
public class MyListFragment extends SherlockListFragment implements IListObserver{

    private TextView first;
    private Context mContext;
    private List<MyListElement> myList;
    private MyListAdapter myListAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        this.mContext = getActivity().getApplicationContext();

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.layout_listview, container, false);

            myList = new ArrayList<SizeDirectory>(0);
        myListAdapter = new MyListAdapter(getActivity(), myList);
        setListAdapter(myListAdapter);
        myListAdapter.notifyDataSetChanged();

        return view;
    }

    @Override
    public void updateList(List<MyListElement> myList) {
        this.myList = myList;
        this.myListAdapter.notifyDataSetChanged();
        getListView().requestLayout();
    }
} 
```

这是 AsyncTask：

```
class ListLoader extends AsyncTask<String, MyListElement, Boolean> {

    private String LOG_TAG = ListLoader .class.getSimpleName();

    /**
     * Maybe show loading indicator
     */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }

    protected Boolean doInBackground(String... args) {

                     MyListElement item = getListItem(...)
                     publishProgress(item );

        return true;
    }

    /**
     * After completing background task Dismiss the progress dialog
     **/
    protected void onPostExecute(Boolean result) {
        if (result) {
            //Everything was ok
        }
    }

    @Override
    protected void onProgressUpdate(MyListElement... values) {
        super.onProgressUpdate(values);
        addElement(values[0]);
    }

} 
```

有趣的是，如果我把它`AsyncTask`放在我的`ListFragment`, 并`updateList`从那里调用，那么我确实会随着 asynctask 的进展而更新列表。

我虽然这可能是由于活动生命周期在创建活动后调用了我的片段的 onCreateView（并因此重置列表），但我使用调试器进行了检查，但事实并非如此。我还假设这与无法从另一个线程更新 UI 无关，因为我是从 onProgressUpdate 执行的，而且我会得到一个异常（或者我不会？）。

编辑：layout_listview

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/firstTextView"
            android:layout_width="fill_parent"
            android:layout_height="129dp"
            android:scrollbars="vertical"
            android:text="@string/hello_world" />

        <Button
            android:id="@+itd/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Button" />

    </RelativeLayout>

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:11:29.000

在 updateList() 调用之后，您的列表适配器仍然持有对 myList 原始值的引用。简单地设置 MyListFragment.myList 不会更新适配器。您需要一种设置 MyListAdapter 的列表副本的方法。如果这是现有的 Android 适配器之一，您可能需要为新列表创建一个新适配器并将其设置在列表片段上。

# migration - 在 Laravel 迁移中使用 Bundle

> ID：15272956
> 
> 赞同：0
> 
> 时间：2013-03-07T13:52:14.117
> 
> 标签：migration, bundle, laravel

我想在我使用的迁移中使用 sentry 1.x 和 Laravel 3.x，但是当我尝试迁移时出现此错误：

```
PHP Fatal error: Class 'Sentry' not found in /var/www/laravel.dev/application/migrations/2013_03_06_183713_add_user_to_database.php on line 34 
```

这就是我在函数 up() 中尝试做的事情：

```
$user_id = Sentry::user()->create(array(
    'email' => 'admin@test.com',
    'password' => 'testpass',
    'metadata' => array(
    'first_name' => 'Test',
    'last_name' => 'Test'
    )
)); 
```

我错过了什么？

ps：我知道在PHP中输入密码是不安全的，这只是一个测试环境。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:59:28.293

您需要启动捆绑包。

```
Bundle::start( 'sentry' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:58:39.070

将“Cartalyst\Sentry\SentryServiceProvider”添加到 app/config/app.php 中的服务提供者列表中

# javascript - 多维关联javascript对象

> ID：15272959
> 
> 赞同：0
> 
> 时间：2013-03-07T13:52:26.620
> 
> 标签：javascript, arrays, html

我需要创建一个多维关联对象，并且它正在部分工作。

简化版：

```
var sources = {
    tales:  ['some content', 'some more content'],
    thehut: ['some content', 'some more content']
}; 
```

我想要的只是“一些内容”和“更多内容”有一个别名，但我无法让它正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:55:49.653

你是这个意思吗？

```
var sources = {
    tales:  {name1:'some content', name2:'some more content'},
    thehut: {name1:'some content', name2:'some more content'}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:57:59.357

我不明白你所说的“别名”是什么，这是你想要的吗？

```
var sources =  {
    tales : {some_content: 'content 1', some_more_content: 'content 2'},
    thehut: {some_content: 'content 3', some_more_content: 'content 4'}
}; 
```

你像这样使用它：

```
> sources.tales.some_content
  "content 1" 
```

# c# - 在字典中存储用户详细信息

> ID：15272960
> 
> 赞同：2
> 
> 时间：2013-03-07T13:52:30.610
> 
> 标签：c#, asp.net, linq

用户登录。用户可以属于许多不同的 ServiceAreas 我试图尝试将用户的详细信息存储在一个`Session`包含用户所有信息的文件夹中。当`foreach`它尝试添加相同的`key`. 这是我的第一个错误。

Q1。我将如何阻止这种情况发生。

Q2。我能否将用户详细信息存储在`Session`他们属于 4 个服务区域还是 1 个？

```
var user = (from u in db.tbl_UserServiceAreaDetails
        where u.tbl_User.UserName.Equals(txt_LoginName.Text)
        && u.tbl_User.Password.Equals(txt_Password.Text)
        select u).FirstOrDefault();

if (user != null)
{
var serviceAreaID = user.serviceAreaID;
var serviceArea = user.tbl_ServiceArea.ServiceArea;

UserClass userDetails = new UserClass();

userDetails.UserName = user.tbl_User.UserName;

foreach (var item in serviceArea)
{
    userDetails.ServiceArea.Add(serviceAreaID, serviceArea);                
}
Session["User"] = userDetails; 
```

`UserClass`

```
class UserClass
{
    public string UserName { get; set; }
    public Dictionary<int, string> ServiceArea = new Dictionary<int, string>();
} 
```

我需要`if item. Something`为 Q1 做一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:03:27.090

您需要独一无二的钥匙！

您不能使用服务区 ID 作为键，因为它不是唯一的

> “用户可以属于许多不同的服务区域”

如何`UserClass`创建以下内容：

```
class UserClass
{
    public string UserName { get; set; }
    public Dictionary<int, ServiceArea> ServiceAreaDictionary = new Dictionary<int, ServiceArea>();
} 
```

创建一个名为 ServiceArea 的新类来存储有关服务区域的信息。

```
class ServiceArea
{
    public int ServiceAreaID { get; set; }
    public string ServiceAreaName { get; set; }

    public ServiceArea(int id, string name) {
      ServiceAreaID = id;
      ServiceAreaName = name
    }
} 
```

然后...

```
var user = (from u in db.tbl_UserServiceAreaDetails
        where u.tbl_User.UserName.Equals(txt_LoginName.Text)
        && u.tbl_User.Password.Equals(txt_Password.Text)
        select u).FirstOrDefault();

      if (user != null)
        {
        var serviceAreaID = user.serviceAreaID;
        var serviceArea = user.tbl_ServiceArea.ServiceArea;

        UserClass userDetails = new UserClass();

        userDetails.UserName = user.tbl_User.UserName;

        foreach (var item in serviceArea)
        {
            userDetails.ServiceAreaDictionary.Add([SOME UNIQUE KEY HERE], new ServiceArea(serviceAreaID, serviceArea));                
        }
        Session["User"] = userDetails; 
```

我希望这能解决您的问题或让您知道下一步该去哪里。

此方法应允许您检查`ServiceAreaDictionary`以找出您想要的用户。（即他们是多少个区域的成员等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:16:49.663

我猜你的意思是它是产生错误的服务区？

如果是这种情况，它很容易修复，因为您只有 4 个服务区。

首先在枚举中定义您的服务区域

```
Public Enum ServiceAreasEnum As Integer
  AreaN = 1 ' north
  AreaE = 2 ' East
  AreaS = 4 ' South
  AreaW = 8 ' West
End Enum 
```

现在，当用户能够为多个区域提供服务时，您只需添加值，以便为 NORTH 和 EAST 提供服务的用户总计为 3 并使用该规则您可以填写其他缺失的 ENUM 值

```
Public Enum ServiceAreasEnum As Integer
  AreaN = 1   ' NORTH
  AreaE = 2   ' EAST
  AreaNE = 3  ' North East 
  AreaS = 4   ' SOUTH
  AreaNS = 5  ' North South
  AreaSE = 6  ' South East
  AreaNES = 7 ' North East South
  AreaW = 8   ' WEST
  AreaNW = 9  ' North West
  AreaEW = 10 ' East West
  AreaNEW = 11 ' North East West
  AreaW = 12  ' South West
  AreaNSW = 13  ' North South West
  AreaNSE = 14  ' North South East
  ALLAreas = 15  ' North South West East
End Enum 
```

# ksh - KSH：如何在新文件的末尾添加日期时间，例如 FileMMDDYYYYHHMM

> ID：15272961
> 
> 赞同：1
> 
> 时间：2013-03-07T13:52:37.587
> 
> 标签：ksh

我有一个要求，我希望输出为

```
FileMMDDYYYYHHMM 
```

我尝试了以下事情

我有一个名为 abc.ksh 的文件，其中我将变量声明为

```
MYDATETIME=${DATE}${TIME} 
```

我将参数传递为

```
cp $MY_DATA_DIR/My_Reports $MY_DATA_DIR/My_Reports$MYDATETIME 
```

在上面我得到的输出为 My_Reports 而没有 MYDATETIME

我还使用了 echo 命令来打印输出

```
echo "my datetime" $MYDATETIME 
```

我得到的输出为

```
my datetime 
```

它没有将预期的日期时间添加到 File `[My_Reports]`。我在这里做错了吗？任何人都可以建议或指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:56:20.997

就像其他人所说的那样，我没有看到您初始化 DATETIME 变量。如果我在你的鞋子里，我会做以下事情：

```
$MY_DATA_DIR=/this/is/my/derp
MYDATETIME=`date +%m%d%Y%H%M`
cp $MY_DATA_DIR/My_Reports $MY_DATA_DIR/My_Reports$MYDATETIME 
```

如果要拆分日期和时间，则：

```
$DATE=`date +%m%d%Y`
$TIME=`date +%H%M`
$MYDATETIME = ${DATE}${TIME} 
```

享受！

# flash - Flash as2 EXE 更改不同电脑中的文本大小

> ID：15272965
> 
> 赞同：0
> 
> 时间：2013-03-07T13:53:07.413
> 
> 标签：flash, text, fonts, actionscript-2, exe

我有一个用 AS2 制作的 Flash CS6 中生成的 EXE 文件动画。此动画具有动态生成的字幕文本。

在我的电脑上，我可以很好地看到文字，但在其他电脑上，我看到字体看起来更小。

字体为 Verdana，字体大小由 AS2 读取 configuration.xml 文件定义

如果在任何 PC 中都应该相等，为什么字体会改变大小？两者都具有相同的 win OS 和 Verdana 不是来自其他世界的字体。

# c++ - 使用 MinGW 和 libnoise 库的 Netbeans C++

> ID：15272971
> 
> 赞同：1
> 
> 时间：2013-03-07T13:53:25.987
> 
> 标签：c++, netbeans, mingw

使用 netbeans 7.2 和最新版本的 MinGW（使用安装程序）我不能使用 libnoise 库。我正确地包含了头文件，自动完成确认了这一点，但是该库根本无法正常工作。有一个.lib 文件和一个.dll。我已经尝试了在项目 > 属性 > 构建 > 链接器下添加它们的所有可能组合，以及将 .dll 放在基础项目目录中。尽管如此，每当我尝试运行代码时，我仍然会遇到未定义的参考错误。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:52:43.757

我知道可以将导入库文件 (*.lib) 与 MinGW 链接，但我仍然建议重新编译 libnoise。

使用当前的 Makefile，这不是[很容易](https://stackoverflow.com/questions/13280932/compiling-libnoise-on-windows-with-mingw)并且可能会中断。因此，我编写了一个 CMake 脚本，它不仅适用于 Windows，而且应该适用于所有 CMake 支持的平台。除此之外，我还清理了目录结构。代码本身没有被触及，当你构建一个库时，它应该与当前的基本相同。

[GitHub 上的 libnoise](https://github.com/eXpl0it3r/libnoise)

构建共享库后，您将拥有一个`libnoise.dll.a`和`libnoise.dll`文件。然后添加`libnoise.dll.a`到链接设置并将 DLL 本身放在二进制文件旁边或工作目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:10:38.807

您必须链接**lib**文件（= 将其添加到链接器库）并将**dll放入**

```
<project root>/dist/<...>/ 
```

（你的 exe 放在哪里）。也不需要将 dll 添加到链接器。

您能否发布您收到的错误消息？

# c - 使用 glib 时如何打印 guint64 值？

> ID：15272976
> 
> 赞同：7
> 
> 时间：2013-03-07T13:53:44.167
> 
> 标签：c, glib

**问题**

我正在使用 GLib 2.0 库，并声明了一个 gunit64 变量。我希望将其值打印到屏幕上，但它无法正常工作。

**代码**

以以下代码片段为例。我声明了一个 guint64 变量，并尝试打印它的值。

```
guint64 myValue = 24324823479324;
printf("My Value: %d\n", myValue); 
```

**警告**

我收到这个警告：

```
warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘guint64’ 
```

**输出**

我在屏幕上得到一个奇怪的负数：

> 我的价值：-1871285220

**进一步的评论**

我尝试搜索 API 的文档，并在 guint64 下找到以下内容：

> 在所有平台上保证为 64 位的无符号整数。此类型的值范围可以从 0 到 G_MAXUINT64 (= 18,446,744,073,709,551,615)。
> 
> 要打印或扫描此类型的值，请使用 G_GINT64_MODIFIER 和/或 G_GUINT64_FORMAT。

因此，我假设我必须使用修饰符或格式定义。但是，文档没有显示如何使用它们。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T13:56:23.470

您已经[为此找到了合适的宏](https://developer.gnome.org/glib/stable/glib-Basic-Types.html#G-GUINT64-FORMAT:CAPS)。以下是如何使用它：

```
printf("My value: %" G_GUINT64_FORMAT "\n", myValue); 
```

请注意，宏是一个带引号的字符串文字，因此上面是正确的语法。另请注意，`%`不是宏的一部分。

您的数字显示为负数，因为您正在使用`%d`，它需要一个`int`，并且当您的数字的位被视为较小的有符号`int`时，编码为负数。

# php - XAMPP 上的 php/mySQL：phpMyAdmin 和 mysql_connect 的密码不同？

> ID：15272979
> 
> 赞同：25
> 
> 时间：2013-03-07T13:53:47.033
> 
> 标签：php, mysql, sql, phpmyadmin, xampp

我在 XAMPP for Windows 上运行 phpMyAdmin 和 MySQL。

我以两种方式访问​​ MySQL 数据库。首先，通过`localhost/phpmyadmin`，其次，通过`connection.php`文件（`mysql_connect('localhost','user','password')`其他 php 文件使用该文件用于服务器上的网站。

对于 phpMyAdmin 登录和`mysql_connect`我使用的是 root 用户。我知道我不应该使用 root 并且这是一个安全问题。但是密码不一样！我已经通过 设置了 phpMyAdmin 访问的密码`localhost/security`，但我不知道如何更改`mysql_connect`.

我以为它会是一样的，但显然不是。如何通过 phpMyAdmin 更改 root 密码？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-07T13:56:50.167

如果您打开`localhost/phpmyadmin`，您会发现一个名为“用户帐户”的选项卡。在那里，您可以定义所有可以访问 mysql 数据库的用户，设置他们的权限，甚至限制他们可以连接的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:59:06.823

您需要直接在数据库中更改密码，因为在 mysql 中，用户及其配置文件保存在数据库中。

所以有几种方法。在 phpMyAdmin，您只需转到用户 admin，选择 root 并更改密码。

# ios - 在 iOS 中使用 NSJSONSerialization 时是否有数据限制？

> ID：15272981
> 
> 赞同：1
> 
> 时间：2013-03-07T13:53:51.483
> 
> 标签：ios, json, limit, nsjsonserialization

很抱歉打扰您，但我没有找到任何可以帮助我的可用主题。

我通过 NSURLConnection 使用 NSMutableRequest 来获取我的 JSON 数据。收到数据后，我使用`[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]`.

获取较小的 JSON 文件时它工作得很好，但当我收到更大的 JSON 文件时它不起作用。我写了日志`NSLog(@"--->: %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);`，输出不是一条，而是两条以 . 开头的日志记录`--->:`。第一个输出包含 JSON 的第一部分，而 JSON 的其余部分位于第二部分。

此错误不允许根据需要创建 NSDictionary。收到的每个“更大”的 JSON 都被拆分为 7500 - 8000 个字符。我的问题是： NSJSONSerialization 可以处理是否有限制？从我的角度来看，它似乎可以处理 8 KB 的数据，仅此而已。有没有办法绕过它？

感谢您的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:01:10.370

谢谢你们的回答。我终于找到了解决我的问题的方法。问题在于在 didReceiveData 方法中严重保存数据。应用后`[receivedData appendData:data];`一切开始运作良好。8 kB 的问题可能是一次发送的一大块数据。

# javascript - 骨干嵌套模型......它们是如何工作的？

> ID：15272984
> 
> 赞同：2
> 
> 时间：2013-03-07T13:53:53.933
> 
> 标签：javascript, backbone.js

因此，我将 Backbone 用于我的 Web 应用程序，但我无法弄清楚如何使用嵌套模型。我有一个基于 java 类的模型，它的 JSON 看起来像这样：

```
"AdminSettings":
{
    "defaults": {
        "deletable":true,
        "transferable":false;
        "issueLimit":1
    }
    "displaySettings": {
        "tabs":2,
        "amounts:[10,20]
    }
} 
```

目前，我为 AdminSettings 对象设置了一个端点和一个主干模型。我想知道是否有一种特定的方法可以为 AdminSettings 中的对象获得所有骨干优势。例如，目前我必须使用：

```
adminSettings.get("defaultValues").shareable 
```

但我想使用：

```
adminSettings.get("defaultValues").get("shareable") 
```

这不是我想要获得的唯一好处，只是一个例子。

所以，是的，什么是解决这个问题的好方法。我正在考虑为每个嵌套对象创建一个主干模型并为每个对象设置端点，但我并不完全确定。无论如何，感谢您的观看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:17:23.983

您可以编写自己的自定义主干解析器：

```
var DisplaySettingsModel = Backbone.Model.extend({});
var DefaultValuesModel = Backbone.Model.extend({});

var AdminSettingsModel = Backbone.Model.extend({

    model: {
        defaultValues: DefaultValuesModel
        displaySettings:  DisplaySettingsModel
    },

    parse: function(response){
        response["defaultValues"] = new DefaultValuesModel(response["defaultValues"], {parse:true});
        response["displaySettings"] = new DisplaySettingsModel(response["displaySettings"], {parse:true});
        return response;
    }
}); 
```

# html - 为什么这个表格单元格的行为是这样的？

> ID：15272991
> 
> 赞同：1
> 
> 时间：2013-03-07T13:54:05.337
> 
> 标签：html, css, css-tables

看看这个**[小提琴](http://jsfiddle.net/Qmqgm/)**。

这是基本的CSS `td`：

```
td {
    height: 30px;
    border: 1px solid grey;
    background-color: rgb(141, 176, 248);
} 
```

有一个带有 30 像素图像的单元格。但是，该单元格的宽度仍然是 600 像素。有谁明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:18:08.427

它与`td`有内容和`td`没有内容有关。

```
Whenever your td doesn't have any fixed width 
```

由于您的表格有`width:100%`，并且大多数 td 中没有内容，因此它们对齐到可忽略不计的宽度。但是，一旦您向任何 td 提供内容，整个列就会相应地扩展以适应表格的整个宽度。

为了测试它，只需在任何其他地方写一个单词`td`，整个列就会被扩展。

你应该做的是为你的 TD 提供一个宽度来限制这个默认扩展'

```
.ui-droppable
{
   width:50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:59:31.287

您将宽度/高度设置为 30px 和 1px 边框。图像也有 30px 宽度。不幸的是，边框宽度必须包含在宽度中。您必须将宽度设置为`30+2*1px`：[小提琴](http://jsfiddle.net/Qmqgm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:10:55.280

如果您没有为`<td>`元素设置任何宽度并且您`<table>`没有任何宽度（因此默认为 100%），`<td>`-s 将自动填充整个宽度。在您的情况下，它是`<td>`扩展的。

在你的css文件中设置宽度，问题应该得到解决。

```
td { width:30px; } 
```

显然，您应该将表格宽度设置为所有列的总和。或者您可以以 px/% 为单位设置表格的宽度，以 % 为单位设置列的宽度。或者您可以使用 javascript/jQuery 使列宽适应其中的图像宽度。