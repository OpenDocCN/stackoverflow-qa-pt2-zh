# StackOverflow 问答 12991000-12991999

# ruby-on-rails - Silence Deface 日志输出

> ID：12991000
> 
> 赞同：1
> 
> 时间：2012-10-20T17:38:41.970
> 
> 标签：ruby-on-rails, spree, deface

我从 Deface 那里得到了大量的日志噪音。我不是我当前项目的视图人，我真的很想从日志中删除那些废话。我还想象在现场制作应用程序中，您也想静音或抑制它。我已经有一个可以使资产输出静音的钩子……我最好的选择是将其作为附加逻辑放在那里，还是有一些配置用于 Deface 和/或 Spree 以使日志噪音静音？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:21:46.123

谢谢@RyanBigg。如此设置

```
config.log_level = :warn 
```

根据需要在 /config/environments/production.rb 或 /config/environments/development.rb 中。

似乎没有办法专门通过设置使 Deface 静音，但如果 Deface 有自己的记录器来包装对 Rails.logger 的调用，那可能是一个很好的功能。

# mysql - 用户登录系统数据库架构...请批评？

> ID：12991005
> 
> 赞同：2
> 
> 时间：2012-10-20T17:39:22.707
> 
> 标签：mysql, schema, database-schema

我正在为我的网站创建一个用户登录系统，我需要一些帮助来创建数据库。所以到目前为止，我有这 3 张桌子。你认为这是一个合适的数据库模式吗？如果不是，那你有什么建议？

```
---Users---
user_id
user_name
user_email
user_firstname
user_lastname
user_state
user_country
user_occupation
user_dob
user_accountcreationdate
user_sex
user_role
user_password

---Roles---
role_id
role_name
role_description

---Logins----
user_id
last_login
browser_type
ip_address 
```

编辑****这会是正确的吗？我在第 4 个表中添加了用户角色。如果我添加第 4 个表，这是否意味着我可以从 Users 表中删除 user_role？

```
---Users---
user_id
user_name
user_email
user_firstname
user_lastname
user_state
user_country
user_occupation
user_dob
user_accountcreationdate
user_sex
user_role
user_password

---Roles---
role_id
role_name
role_description

---Logins----
user_id
last_login
browser_type
ip_address

---User Roles---
user_id
role_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:10:43.760

您的架构显示每个用户将只有一个角色。您可能会很快发现您想要做的比这更细化。我建议有一个将 user_id 映射到 role_id 的 user_role 表（以及 date_granted、date_revoked、granted_by 等）。

如果你想真正规范化，*users.occupation*将是*职业*表的外键。 *state*和*country*也是。

要非常小心如何存储密码。

如果您正在记录成功的登录，为什么不也记录不成功的登录。这可能会让您知道有人需要帮助或帐户被黑客入侵。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T06:01:31.873

是的，它看起来不错.. 但是为什么不**激活**标志来激活/停用用户。并且仅在他们通过唯一链接或 OTP 验证其电子邮件身份后才允许他们登录。

# mysql - MySQL 语法错误

> ID：12991006
> 
> 赞同：1
> 
> 时间：2012-10-20T17:39:22.753
> 
> 标签：mysql, stored-procedures

我正在尝试在我的主机 mysqladmin 页面上执行以下代码。

```
CREATE PROCEDURE `follow`(IN in_follower INT(11), IN in_followee VARCHAR(45))
BEGIN
INSERT INTO follower (follower_id, followee_id) VALUES (in_follower, (SELECT user_id FROM user WHERE username = in_followee));
END 
```

我得到的错误是：

#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

为什么这里会发生这个错误？当我在 MySQL Workbench 中使用该代码时，它运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:42:57.030

试试这个，

```
DELIMITER $$
CREATE PROCEDURE `follow` 
(
    IN in_follower INT (11) ,
    IN in_followee VARCHAR(45)
)
BEGIN
        INSERT INTO follower ( follower_id , followee_id )
        SELECT in_follower AS follower_id, user_id
        FROM user
        WHERE username = in_followee;
END$$
DELIMITER ; 
```

# html - 如何从 Windows 剪贴板快速呈现 html/xhtml

> ID：12991007
> 
> 赞同：2
> 
> 时间：2012-10-20T17:39:23.953
> 
> 标签：html, firefox, google-chrome

我很想知道是否有一个 chrome/firefox 插件可以让我快速让浏览器呈现内容？实际上，任何其他程序也可以。我知道我可以将它复制到一个文件中，但我正在寻找最快的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:42:07.827

在 Firefox 中打开一个空白窗口，然后打开 Firebug。单击 HTML 选项卡上的“编辑”并将 HTML 代码粘贴到其中。

# javascript - Javascript：显示知道其编号的行的内容

> ID：12991009
> 
> 赞同：0
> 
> 时间：2012-10-20T17:39:35.893
> 
> 标签：javascript, error-handling, line

我正在开发一个 JavaScript 应用程序，我正在尝试修复一个错误，但我找不到它。这就是我所拥有的。

```
 function my_function (txt) {
    try {
        return eval('('+ txt + ')');
    }
    catch(e) {
      alert(e.lineNumber);
      return eval(txt);
    } 
```

我正在将文件的内容传递给函数，并且该文件中似乎存在问题。问题是这条线

```
 alert(e.lineNumber); 
```

即使我在文件开头添加行也总是返回相同的数字，所以我想确保我正在编辑正确的行。为此，我希望它显示包含错误的行的内容。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:25:51.840

捕获脚本的文本，如有必要，使用`console.log (txt)`并将输出复制粘贴到文件中。将 a`<script>`放在该文件的顶部和`</script>`底部。使文件名以`.html`. 现在双击该文件图标。这将启动您的浏览器，该浏览器将读取脚本并将任何语法错误输出到浏览器控制台，显示它们发生的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:58:46.513

您可以使用 e.stack 打印堆栈跟踪

```
....
catch(e) {
      alert(e.lineNumber);
      console.log(e.stack)
      return eval(txt);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:05:42.873

基本上有两种情况： - 如果是语法错误，则错误将报告为触发它的“eval”调用的位置（不是“源”文件中的位置）， - 如果它是语义错误（它已解析但在运行时失败），然后查看[http://eriwen.com/javascript/js-stack-trace/](http://eriwen.com/javascript/js-stack-trace/)以获得有关跨浏览器堆栈转储的一些想法。

要调试第一种情况，您可能必须捕获文件内容并尝试自行解析它（可能使用节点或 jsl）。

我不太清楚您要做什么，但我不得不说代码示例引发了一些问题（为什么 eval 不是 JSON.parse，为什么读取文件然后 eval 而不是包含它并调用函数，有什么用第二次评估）。

# c - C 中的函数式编程（柯里化）/类型问题

> ID：12991014
> 
> 赞同：13
> 
> 时间：2012-10-20T17:40:05.987
> 
> 标签：c, gcc, types, functional-programming, function-pointers

作为一个彻头彻尾的函数式程序员，我发现很难不尝试将我最喜欢的范式硬塞进我正在使用的任何语言中。在编写一些 CI 时发现我想 curry 我的一个函数，然后传递部分应用的函数。阅读后[有没有办法在 C 中进行柯里化？](https://stackoverflow.com/questions/1023261/is-there-a-way-to-do-currying-in-c)[并注意http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html#Nested-Functions](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html#Nested-Functions)我想出的警告：

```
#include <stdio.h>

typedef int (*function) (int);

function g (int a) {
    int f (int b) {
        return a+b;
    }
    return f;
}

int f1(function f){
    return f(1);}

int main () {
    printf ("(g(2))(1)=%d\n",f1(g(2)));
} 
```

按预期运行。但是，我的原始程序与`double`s 一起使用，所以我想我只需更改适当的类型就可以了：

```
#include <stdio.h>

typedef double (*function) (double);

function g (double a) {
    double f (double b) {
        return a+b;
    }
    return f;
}

double f1(function f){
    return f(1);}

int main () {
    printf ("(g(2))(1)=%e\n",f1(g(2)));
} 
```

这会产生如下内容：

```
bash-3.2$ ./a.out 
Segmentation fault: 11
bash-3.2$ ./a.out 
Illegal instruction: 4 
```

错误的选择似乎是随机的。此外，如果任一示例是使用`-O3`编译器本身编译的，则会抛出`Segmentation fault: 11`自身。我在任何时候都没有收到来自 gcc 的警告，而且我无法弄清楚发生了什么。有谁知道为什么第二个程序失败而第一个程序没有？或者更好的是如何修复第二个？

我的 gcc 是`i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)`，我的内核是`Darwin Kernel Version 12.1.0: Tue Aug 14 13:29:55 PDT 2012; root:xnu-2050.9.2~1/RELEASE_X86_64`.

**编辑：**要清楚，我知道我想做的是愚蠢的。这段代码不会在好奇号火星车或纽约证券交易所运行。我试图更多地了解（GNU）C 中的函数指针是如何工作的，并解释我发现的一些有趣的东西。我保证永远不会在现实世界中做这样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T22:18:09.650

一个有趣的问题，我查看了引用的答案中的论文（[在 C/C++/Objective-C 中具有 Curried 函数的更多功能可重用性](http://asg.unige.ch/site/papers/Dami91a.pdf)）。

因此，以下是您可能想去的建议路径。我不认为这真的是一个 Curried 函数，因为我不完全理解论文在说什么，而不是一个函数式程序员。然而，做一些工作，我发现这个概念的一些有趣的应用。另一方面，我不确定这是否是您想要的，这让我大吃一惊，您可以在 C 中做到这一点。

似乎有两个问题。

首先是能够处理带有任意参数列表的任意函数调用。我采用的方法是使用标准 C 库变量参数功能（带有 va_start()、va_arg() 和 va_end() 函数的 va_list），然后将函数指针与提供的参数一起存储到数据区域中，以便它们然后可以在以后执行。我借用并修改了`printf()`函数如何使用格式行来了解提供了多少参数及其类型。

接下来是函数及其参数列表的存储。我只是使用了一个任意大小的结构来尝试这个概念。这将需要更多的思考。

这个特定版本使用一个被视为堆栈的数组。有一个函数可以用来将某个任意函数及其参数推送到堆栈数组中，还有一个函数可以将最顶层的函数及其参数从堆栈数组中弹出并执行它。

但是，您实际上可以在某种集合中包含任意结构对象，例如哈希映射，这可能非常酷。

我只是从论文中借用了信号处理程序示例，以表明该概念适用于那种应用程序。

所以这里是源代码，我希望它可以帮助你想出一个解决方案。

您需要向开关添加其他情况，以便能够处理其他参数类型。我只是做了一些概念证明。

这也不会执行调用函数的函数，尽管从表面上看这似乎是一个相当简单的扩展。就像我说的，我不完全明白这个咖喱的东西。

```
#include <stdarg.h>
#include <string.h>

// a struct which describes the function and its argument list.
typedef struct {
    void (*f1)(...);
    // we have to have a struct here because when we call the function,
    // we will just pass the struct so that the argument list gets pushed
    // on the stack.
    struct {
        unsigned char myArgListArray[48];   // area for the argument list.  this is just an arbitray size.
    } myArgList;
} AnArgListEntry;

// these are used for simulating a stack.  when functions are processed
// we will just push them onto the stack and later on we will pop them
// off so as to run them.
static unsigned int  myFunctionStackIndex = 0;
static AnArgListEntry myFunctionStack[1000];

// this function pushes a function and its arguments onto the stack.
void pushFunction (void (*f1)(...), char *pcDescrip, ...)
{
    char *pStart = pcDescrip;
    AnArgListEntry MyArgList;
    unsigned char *pmyArgList;
    va_list argp;
    int     i;
    char    c;
    char   *s;
    void   *p;

    va_start(argp, pcDescrip);

    pmyArgList = (unsigned char *)&MyArgList.myArgList;
    MyArgList.f1 = f1;
    for ( ; *pStart; pStart++) {
        switch (*pStart) {
            case 'i':
                // integer argument
                i = va_arg(argp, int);
                memcpy (pmyArgList, &i, sizeof(int));
                pmyArgList += sizeof(int);
                break;
            case 'c':
                // character argument
                c = va_arg(argp, char);
                memcpy (pmyArgList, &c, sizeof(char));
                pmyArgList += sizeof(char);
                break;
            case 's':
                // string argument
                s = va_arg(argp, char *);
                memcpy (pmyArgList, &s, sizeof(char *));
                pmyArgList += sizeof(char *);
                break;
            case 'p':
                // void pointer (any arbitray pointer) argument
                p = va_arg(argp, void *);
                memcpy (pmyArgList, &p, sizeof(void *));
                pmyArgList += sizeof(void *);
                break;
            default:
                break;
        }
    }
    va_end(argp);
    myFunctionStack[myFunctionStackIndex] = MyArgList;
    myFunctionStackIndex++;
}

// this function will pop the function and its argument list off the top
// of the stack and execute it.
void doFuncAndPop () {
    if (myFunctionStackIndex > 0) {
        myFunctionStackIndex--;
        myFunctionStack[myFunctionStackIndex].f1 (myFunctionStack[myFunctionStackIndex].myArgList);
    }
}

// the following are just a couple of arbitray test functions.
// these can be used to test that the functionality works.
void myFunc (int i, char * p)
{
    printf (" i = %d, char = %s\n", i, p);
}

void otherFunc (int i, char * p, char *p2)
{
    printf (" i = %d, char = %s, char =%s\n", i, p, p2);
}

void mySignal (int sig, void (*f)(void))
{
    f();
}

int main(int argc, char * argv[])
{
    int i = 3;
    char *p = "string";
    char *p2 = "string 2";

    // push two different functions on to our stack to save them
    // for execution later.
    pushFunction ((void (*)(...))myFunc, "is", i, p);
    pushFunction ((void (*)(...))otherFunc, "iss", i, p, p2);

    // pop the function that is on the top of the stack and execute it.
    doFuncAndPop();

    // call a function that wants a function so that it will execute
    // the current function with its argument lists that is on top of the stack.
    mySignal (1, doFuncAndPop);

    return 0;
} 
```

您可以从中获得的另一个乐趣是`pushFunction()`在一个被调用的函数中使用该函数，`doFuncAndPop()`以使另一个函数可以与其参数一起放入堆栈。

例如，如果您将`otherFunc()`上面源代码中的函数修改为如下所示：

```
void otherFunc (int i, char * p, char *p2)
{
    printf (" i = %d, char = %s, char =%s\n", i, p, p2);
    pushFunction ((void (*)(...))myFunc, "is", i+2, p);
} 
```

如果您随后添加另一个调用，`doFuncAndPop()`您将看到 first`otherFunc()`被执行，然后执行`myFunc()`被插入`otherFunc()`的调用，然后最后`myFunc()`调用被推送的`main ()`调用。

**编辑 2：** 如果我们添加以下函数，这将执行所有已放入堆栈的函数。这将允许我们通过将函数和参数压入堆栈然后执行一系列函数调用来创建一个小程序。这个函数还允许我们推送一个没有任何参数的函数，然后推送一些参数。当从堆栈中弹出函数时，如果参数块没有有效的函数指针，那么我们所做的就是将该参数列表放在堆栈顶部的参数块上，然后执行它。也可以对上述函数进行类似的更改`doFuncAndPop()`。如果我们在执行的函数中使用 pushFunction() 操作，我们可以做一些有趣的事情。

实际上，这可能是[Threaded Interpreter](http://www.scribd.com/doc/19746809/Threaded-Interpretive-Languages-Their-Design-and-Implementation)的基础。

```
// execute all of the functions that have been pushed onto the stack.
void executeFuncStack () {
    if (myFunctionStackIndex > 0) {
        myFunctionStackIndex--;
        // if this item on the stack has a function pointer then execute it
        if (myFunctionStack[myFunctionStackIndex].f1) {
            myFunctionStack[myFunctionStackIndex].f1 (myFunctionStack[myFunctionStackIndex].myArgList);
        } else if (myFunctionStackIndex > 0) {
            // if there is not a function pointer then assume that this is an argument list
            // for a function that has been pushed on the stack so lets execute the previous
            // pushed function with this argument list.
            int myPrevIndex = myFunctionStackIndex - 1;
            myFunctionStack[myPrevIndex].myArgList = myFunctionStack[myFunctionStackIndex].myArgList;
        }
        executeFuncStack();
    }
} 
```

**编辑 3：** 然后我们使用以下附加开关进行更改`pushFunc()`以处理双精度：

```
case 'd':
  {
     double d;
     // double argument
     d = va_arg(argp, double);
     memcpy (pmyArgList, &d, sizeof(double));
     pmyArgList += sizeof(double);
   }
break; 
```

因此，使用这个新功能，我们可以执行以下操作。首先创建类似于原始问题的两个函数。我们将在一个函数中使用 pushFunction() 来推送参数，然后堆栈上的下一个函数使用这些参数。

```
double f1 (double myDouble)
{
    printf ("f1 myDouble = %f\n", myDouble);
    return 0.0;
}

double g2 (double myDouble) {
    printf ("g2 myDouble = %f\n", myDouble);
    myDouble += 10.0;
    pushFunction (0, "d", myDouble);
    return myDouble;
} 
```

新我们将我们的新功能与以下一系列语句一起使用：

```
double xDouble = 4.5;
pushFunction ((void (*)(...))f1, 0);
pushFunction ((void (*)(...))g2, "d", xDouble);
executeFuncStack(); 
```

这些语句将首先执行`g2()`值为 4.5 的函数，然后该函数`g2()`将其返回值推送到我们的堆栈中，以供`f1()`首先推送到我们堆栈中的函数使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:11:29.973

您试图依赖未定义的行为：一旦内部函数因为外部函数退出而超出范围，则通过某个指针调用该内部函数的行为是未定义的。任何事情都可能发生。事情意外地适用于整数情况的事实并不意味着您可以期望 double 相同，或者您甚至可以期望 int 在不同的编译器、不同的编译器版本、不同的编译器标志或不同的目标体系结构上相同。

所以不要依赖未定义的行为。不要声称自己“注意[ed] the warnings”，而实际上您是在违反这些警告的。警告明确指出：

> 如果您在包含函数退出后尝试通过其地址调用嵌套函数，那么一切都会崩溃。

C中没有[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，因此在这个意义上不能进行柯里化。如果您将一些数据传递给函数调用，您可以获得类似的效果，但这看起来与正常的函数调用完全不同，因此不会感觉像正常的柯里化。C++ 在那里具有更大的灵活性，因为它允许对象在语法上表现得像函数。在 C++ 世界中，柯里化通常称为函数参数的“<a href="http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html" rel="nofollow">绑定” .

如果您真的想知道为什么一段代码可以工作而另一段代码失败，您可以获取汇编代码（例如由 生成`gcc -S -fverbose-asm`）并在您的脑海中模拟执行，看看您的数据和内容会发生什么。或者您可以使用调试器查看失败的地方，或数据位置的变化。可能需要一些工作，我怀疑这是否值得花时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:21:02.010

请原谅我没有得到它，但你为什么不*wrap*而不是*curry*，因为你在编译时声明了函数呢？柯里化的优点是——或者至少在我看来——你可以在运行时定义一个部分应用的函数，但在这里你没有这样做。还是我错过了什么？

```
#include <stdio.h>

// Basic function summing its arguments
double g (double a, double b)
{
    return a+b;
}

double f1(double a)
{
    /* "1" can be replaced by a static initialized
       by another function, e.g.
       static double local_b = g(0, 1);
    */
    return g(a, 1);
}

int main () {
    printf ("(g(2))(1)=%f\n", f1(2));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T06:05:15.897

上述代码的固定版本

```
#include <stdio.h>

typedef double (*function) (double,double);

// Basic function summing its arguments
double g (double a, double b)
{
        return a+b;
}

double f1(function wrapfunc,double a)
{
 /* "1" can be replaced by a static initialized
     by another function, e.g.
     static double local_b = g(0, 1);
 */
 return wrapfunc(a, 1);  
}

int main () {
        printf ("(g(2))(1)=%f\n", f1(g,2));
} 
```

更多关于带有示例参数示例的不同操作功能的信息

```
#include<iostream>
#include<cstdio>

using namespace std;

#define N 4

#define LOOP(i) for(i=0; i<N; i++)

#define F(i) ( (int(*)(int,int))opt[i] )
#define FI F(i)
#define FJ F(j)
#define FK F(k)

int add(int a, int b) { return a + b; }

int sub(int a, int b) { return a - b; } 
```

u int mul(int a, int b) { return a * b; }

```
int div(int a, int b) {
    if (b == 0 || a % b)
        return 2401;
    return a / b;
}

char whichOpt(int index)
{
    if (index == 0) return '+';
    else if (index == 1) return '-';
    else if (index == 2) return '*';
    return '/';
}

void howObtain24(int num[], void *opt[])
{
    int i, j, k, a, b, c, d;
    int ans=0;
    LOOP(i) LOOP(j) LOOP(k)
         LOOP(a) LOOP(b) LOOP(c) LOOP(d)
    {
        if (a == b || a == c || a == d || b == c || b == d || c == d)
            continue;
        if (FI(FJ(FK(num[a], num[b]), num[c]), num[d]) == 24) {
            std::cout << "((" << num[a] << whichOpt(k) << num[b] << ')'
                 << whichOpt(j) << num[c] << ')' << whichOpt(i) << num[d] << endl;
            ans++;
            continue;
        }
        if (FI(FJ(num[a], num[b]), FK(num[c], num[d])) == 24) {
            std::cout << '(' << num[a] << whichOpt(j) << num[b] << ')'
                 << whichOpt(i) << '(' << num[c] << whichOpt(k) << num[d] << ')' << endl;
            ans++;
            continue;
        }
    }
    if(ans==0)
    std::cout << "Non-Answer" << std::endl;
    return;

}

//=======================================================================
int main() {

    int num[N];

    void *opt[N] = { (void *)add, (void *)sub, (void *)mul, (void *)div };

    std::cout << "Input 4 Numbers between 1 and 10\n"
    for (int i = 0; i < N; i++)
        cin >> num[i];

    for (int j = 0; j < N; j++)
        if (num[j] < 1 || num[j] > 10) {
            std::cout << "InCorrect Input\n"

            return 0;
        }
        howObtain24(num, opt);

        return 0;
} 
```

# android - android与.net webservice交谈

> ID：12991015
> 
> 赞同：0
> 
> 时间：2012-10-20T17:40:07.820
> 
> 标签：android, .net, rest, soap

android 设备与 .net 网络服务通信的最佳方式是什么？我看过 ksoap2 但我并没有完全卖掉它，因为它很旧而且似乎不再更新了。我知道谷歌更喜欢 REST 设计。所以我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:29:39.850

我只会使用 REST 和 JSON。我的 wcf 服务主要使用 GET 并返回 JSON。如果需要，您可以使用 JSON 内容进行 POST。对于 Android，您可以使用 HttpClient 或 HttpUrlConnection（Android 推荐使用 HttpUrlConnection）来完成大多数简单的 HTTP 操作。如果您需要做多部分实体，我建议使用 Apache HttpMime 库。

# css - 有没有办法欺骗浏览器的分辨率/返回视网膜图像？

> ID：12991018
> 
> 赞同：0
> 
> 时间：2012-10-20T17:40:24.620
> 
> 标签：css, browser, resolution, retina-display

我很好奇 CSS 如何确定媒体查询条件！[这篇很棒的 CSS-Tricks 帖子](http://css-tricks.com/snippets/css/retina-display-media-query/)展示了一些条件，例如设备像素比和最小分辨率。

有没有办法让浏览器欺骗/假装具有更高的分辨率？在不触及相关网站上的代码的情况下执行此操作是理想的（例如，可能会影响 iFrame 以测试在视网膜设备上查看 cnn.com 时会发生什么）。

在没有设备的情况下调试/测试会非常方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:15:10.327

我开始以不同的方式做这件事。这有点hacky，但我喜欢它！

```
@media 
(height: 999px),
(-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {
     .wrapper {background:url(img/image@2x.jpg);}
} 
```

我指定了触发媒体查询的特定高度。对于生产，我删除了媒体查询的一个条件。

# javascript - 对象具有无法访问的属性

> ID：12991026
> 
> 赞同：1
> 
> 时间：2012-10-20T17:41:30.447
> 
> 标签：javascript

我有一个名为`THREEx`. 它似乎有一个名为的属性`DragPanControls`，显然是一个函数。我知道`THREEx`存在，因为

```
console.log("THREEx? ", THREEx); 
```

返回此输出（参见第 3 行）：

![在此处输入图像描述](../Images/7ce578729ca16c8fb81895f51f853207.png)

我知道 DragPanControls 存在，因为单击上面第 3 行中的绿色文本会显示：

![在此处输入图像描述](../Images/60c7f329a67c71a33ec7ac132a159200.png)

但是，无法访问 DragPanControls。我知道这是因为

```
console.log("THREEx.DragPanControls? ", THREEx.DragPanControls); 
```

返回*未定义*（参见第一张图片中的第 4 行）并且因为尝试将其用作构造函数也失败了（参见第一张图片中的第 5 行）

我如何找出问题所在？运行代码可以在这里看到： [https ://dl.dropbox.com/u/2070405/stackoverflow1/index.html](https://dl.dropbox.com/u/2070405/stackoverflow1/index.html)

更新：感谢亚历山大的回答，问题现已解决。以供将来参考，这是生成 THREx 对象的代码：

```
/** @namespace */
define(["../libs/three.js/build/three"],
function () {

// Setup work:
var THREEx  = THREEx        || {};

THREEx.DragPanControls  = function(object, domElement)
{
    this._object    = object;
    this._domElement= domElement || document;

    // parameters that you can change after initialisation
    this.target = new THREE.Vector3(0, 0, 0);
    this.speedX = 0.03;
    this.speedY = 0.03;
    this.rangeX = -40;
    this.rangeY = +40;

    // private variables
    this._mouseX    = 0;
    this._mouseY    = 0;

    var _this   = this;
    this._$onMouseMove  = function(){ _this._onMouseMove.apply(_this, arguments); };
    this._$onTouchStart = function(){ _this._onTouchStart.apply(_this, arguments); };
    this._$onTouchMove  = function(){ _this._onTouchMove.apply(_this, arguments); };

    this._domElement.addEventListener( 'mousemove', this._$onMouseMove, false );
    this._domElement.addEventListener( 'touchstart', this._$onTouchStart,false );
    this._domElement.addEventListener( 'touchmove', this._$onTouchMove, false );
}

THREEx.DragPanControls.prototype.destroy    = function()
{
    this._domElement.removeEventListener( 'mousemove', this._$onMouseMove, false );
    this._domElement.removeEventListener( 'touchstart', this._$onTouchStart,false );
    this._domElement.removeEventListener( 'touchmove', this._$onTouchMove, false );
}

THREEx.DragPanControls.prototype.update = function(event)
{
    this._object.position.x += ( this._mouseX * this.rangeX - this._object.position.x ) * this.speedX;
    this._object.position.y += ( this._mouseY * this.rangeY - this._object.position.y ) * this.speedY;
    this._object.lookAt( this.target );
}

THREEx.DragPanControls.prototype._onMouseMove   = function(event)
{
    this._mouseX    = ( event.clientX / window.innerWidth ) - 0.5;
    this._mouseY    = ( event.clientY / window.innerHeight) - 0.5;
}

THREEx.DragPanControls.prototype._onTouchStart  = function(event)
{
    if( event.touches.length != 1 ) return;

    // no preventDefault to get click event on ios

    this._mouseX    = ( event.touches[ 0 ].pageX / window.innerWidth ) - 0.5;
    this._mouseY    = ( event.touches[ 0 ].pageY / window.innerHeight) - 0.5;
}

THREEx.DragPanControls.prototype._onTouchMove   = function(event)
{
    if( event.touches.length != 1 ) return;

    event.preventDefault();

    this._mouseX    = ( event.touches[ 0 ].pageX / window.innerWidth ) - 0.5;
    this._mouseY    = ( event.touches[ 0 ].pageY / window.innerHeight) - 0.5;
}

// Return module:
return {
    THREEx: THREEx
    //dragpancontrols: THREEx.DragPanControls
}

}); 
```

这是 main.js，其中 require.js 导入了上面的代码（上面的代码在文件 myLibs/dragPanControls.js 中）：

```
// CONFIGURE require.js BEFORE YOU START LOADING MODULES:

requirejs.config({
shim: {
    'libs/three.js/build/three': {
        deps: [],
        exports: 'three' //'three' will not be accessible, but any values that three.js writes to the global object will become available to me if I import 'three'.
        /*init: function () {
            // if I want 'three' to actually refer to something, I can do so by returning whatever I want it to refer to, in this init function
            console.log("init three. Is THREE available? ", THREE);
            return this;
        }*/
    }
}
});

// NOW START LOADING MODULES:

require(["myLibs/dragPanControls", "libs/three.js/build/three"], function(THREEx, three) {
console.log("Function call called after all modules are loaded and accessible");

// HELLO WORLD EXAMPLE:

var camera, scene, renderer;
var geometry, material, mesh;

init();
animate();

function init() {

    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
    camera.position.z = 1000;

    scene = new THREE.Scene();

    geometry = new THREE.CubeGeometry(200, 200, 200);
    material = new THREE.MeshBasicMaterial({
        color: 0xff0000,
        wireframe: true
    });

    mesh = new THREE.Mesh(geometry, material);
    scene.add(mesh);

    renderer = new THREE.CanvasRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    document.body.appendChild(renderer.domElement);

    console.log("THREEx? ", THREEx);
    //console.log("DragPanControls? ", DragPanControls);
    console.log("THREEx.DragPanControls? ", THREEx.DragPanControls);
    cameraControls  = new DragPanControls(camera);

};

function animate() {

    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame(animate);

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;

    renderer.render(scene, camera);

};

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:50:49.443

从您的第一个屏幕截图中，该`THREEx`对象实际上是一个包含另一个对象的`THREEx`对象。

您可以使用以下方法访问该功能`DragPanControls`：

```
THREEx.THREEx.DragPanControls 
```

# css - 如何让 div 超出指南针 susy 网格？

> ID：12991029
> 
> 赞同：0
> 
> 时间：2012-10-20T17:41:57.370
> 
> 标签：css, layout, compass-sass, susy-compass

我有很多元素，其中 div 的 CONTENT 应该与我的 960 网格对齐，但我希望容纳它们的 CONTAINER 延伸到网格两侧的排水沟中。

例如，请看下图。我想用灰色线作为我的网格来指定 div 的大小，但是将 5-10px 的白色延伸到外面。那可能吗？

![在此处输入图像描述](../Images/97ecd08553444204ce9d0a266e9312fe.png)

# dropbox - 创建保管箱文件夹

> ID：12991032
> 
> 赞同：0
> 
> 时间：2012-10-20T17:42:08.853
> 
> 标签：dropbox, desire2learn

Valence API 似乎没有创建保管箱文件夹的机制。我错过了什么吗？

我查看了 docs.valence.desire2learn.com 上的文档，但找不到电话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:32:13.587

您还可以使用 BCC（批量课程创建）实用程序创建保管箱，这是我的机构正在研究的。您需要使用包含具有保管箱参数的 XML 文件的 zip 文件，并在 BCC csv 文件中引用这些文件。您可以通过从 D2L 产品中导出来创建 zip 文件，或者查看创建这些文件的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:29:19.857

你是对的; 目前，Valence API 不为您提供创建保管箱文件夹的方法。目前，课程创建者/管理者必须通过 Web UI 创建保管箱文件夹。

# c - 我看不懂的C代码

> ID：12991033
> 
> 赞同：0
> 
> 时间：2012-10-20T17:42:15.077
> 
> 标签：c

在阅读[Enlightenment的](http://www.enlightenment.org/)代码时，我发现关于CI的一些东西不明白。我将粘贴这些线条并解释为什么我不清楚。

```
Eina_Bool (*hide)(void *data, Evas_Object *o);
void (*del)(void *data, Evas_Object *o); 
```

在这个上，括号之间的指针值在返回值之后意味着什么？另外，请注意，这两个函数的第一个参数都是`void *data`. 这是否意味着您可以将指向任何类型数据的指针传递给函数？

```
EAPI Ecore_X_Window elm_win_xwindow_get(const Evas_Object *obj); 
```

API 上的几乎所有函数都以`EAPI`. 这意味着什么？它是一种命名空间吗？我在哪里可以找到有关这方面的一些信息？

还要注意他们如何使用其中一个库：[Elementary](http://docs.enlightenment.org/auto/elementary/group__Start.html)。

```
EAPI_MAIN int elm_main(int argc, char **argv) {
    // CODE
}
ELM_MAIN() 
```

您无需使用 main 函数，而是将 elm_main 再次与那些大写标志一起使用：`EAPI_MAIN`。就在函数之后，`ELM_MAIN()`没有分号就很奇怪。

如果你们向我解释一下我第一次看到他们时看起来很奇怪的所有这些，我将不胜感激。

注意：我粘贴的所有示例都来自[elm_win.h](http://trac.enlightenment.org/e/browser/trunk/elementary/src/lib/elm_win.h)基本头文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:00:13.847

您在此处显示的行是函数指针变量的声明。

一行表格：

```
int (*foo)(int x) 
```

例如，声明一个名为 foo 的变量，它可以保存一个函数（地址），该函数接受一个整数参数 ( `x`) 并返回一个整数。如果你声明一个这样的函数：

```
int twice( int x )
{
    return x*2;
} 
```

您可以将该函数（的地址）分配给变量 foo。

```
foo = twice; 
```

然后你可以`twice`通过指针调用函数：

```
int result = foo( 3 ); 
```

（`result`现在将包含 6 个）

这样做的通常原因是你知道你想在代码中的某个点调用某个函数，但究竟哪个函数取决于其他代码。如果您调用了函数`process_A`，并且`process_B`可以将其中一个分配给函数变量：

```
int (*process)(int x);
process = using_b ? process_B : process_A;
... more code ...
result = process( some_value ); 
```

这里的结果设置为由`process_A`或计算的值`process_B`，具体取决于分配给哪个`process`

当然，您可以在调用点使用条件，但是选择函数并将其（或者更确切地说它的地址）存储在变量中会导致更高效和（更重要的是）更清晰的代码。

至于`EAPI`符号......我不知道启蒙，但我希望这只是标题中的一个宏#defined。它可能会根据构建选项更改调用约定或导出符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:50:37.133

Those first two statements are function pointer definitions. I.e. pointer variables that take the address of a function.

A type of `void *` can accept any valid pointer value or a null pointer. It's mandatory to somehow keep track of what's the actual type a `void *` pointer points to, to properly typecast the `void *` to the actual type bahind it. The common use for this is providing means to pass arbitrary user typed data to callback functions. And that's what the two function pointers are for.

This statement

```
Eina_Bool (*hide)(void *data, Evas_Object *o); 
```

means: *hide* is a pointer to a function that accepts as parameters a `void *`, a `Evas_Object *` and returns a `Eina_Bool`.

Note that this substantially different to the subtely different statement

```
Eina_Bool* reveal(void *data, Evas_Object *o); 
```

Which would be a function named `reveal` returning a `Eina_Bool*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:52:20.933

我发现[这个来源](http://docs.enlightenment.org/auto/efx/Efx_8h_source.html)定义`EAPI`：

```
#ifdef _WIN32
# ifdef EFL_EFX_BUILD
#  ifdef DLL_EXPORT
#   define EAPI __declspec(dllexport)
#  else /* ifdef DLL_EXPORT */
#   define EAPI
#  endif /* ! DLL_EXPORT */
# else /* ifdef EFL_BUILD */
#  define EAPI __declspec(dllimport)
# endif /* ! EFL_BUILD */
#else /* ifdef _WIN32 */
# ifdef __GNUC__
#  if __GNUC__ >= 4
#   define EAPI __attribute__ ((visibility("default")))
#  else /* if __GNUC__ >= 4 */
#   define EAPI
#  endif /* if __GNUC__ >= 4 */
# else /* ifdef __GNUC__ */
#  define EAPI
# endif /* ifdef __GNUC__ */
#endif /* ! _WIN32 */ 
```

这些都是编译器标志。

现在，关于您的`hide`问题`del`；这些不是函数，而是函数*指针*。也就是说，如果你取消引用`del`，你会得到这种类型的函数：

```
void del_impl(void *data, Evas_Object *o); 
```

这允许运行时根据在线数据选择调用哪个函数。

# c++ - 监控音频文件以检查它何时被另一个程序打开

> ID：12991034
> 
> 赞同：3
> 
> 时间：2012-10-20T17:42:23.387
> 
> 标签：c++, windows, file, monitor

如何在 Windows 上监视由 C++ 中的另一个程序打开/运行的音频文件？

我已经搜索过，唯一想到的是检查音频文件当前是否打开，但这不会太准确或高效，因为音频文件很短并且被多次打开。每次打开都想抓。

我在这里读过类似的问题。但是与我的问题类似的 2 个问题是针对 Linux 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:01:22.663

C++ 不是执行此操作的正确工具。如果你真的想详细检查文件，你需要编写一个文件过滤驱动程序（或微过滤器），这不是一件容易的事。

这是一个关于如何开始的小[概述，](https://stackoverflow.com/questions/11438859/are-filter-drivers-intended-to-extend-system-drivers/12708314#12708314)[这](http://www.codeproject.com/Articles/43586/File-System-Filter-Driver-Tutorial)是一个很好的教程，它提供了第一个视图。

另一种（但可能很脏）的方法是使用 api 钩子尝试它，但我不会这样做，因为它会影响整个系统并可能导致严重的麻烦。

# android - 获取父活动的名称-空异常

> ID：12991037
> 
> 赞同：1
> 
> 时间：2012-10-20T17:42:58.993
> 
> 标签：android

每当我尝试这个时，我都会收到 NullPointerException -

```
getCallingActivity().getClassName() 
```

我想`caller/parent`从`called/child`活动中获取活动的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:47:43.207

If you check the doc [`getCallingActivity`](http://developer.android.com/reference/android/app/Activity.html#getCallingActivity%28%29) returns the value only if the calling activity is expecting result i.e only if the activity is started with call to `startActivityForResult`

So for most cases this wont work. A better approach would be to pass the value through intent. Check this [post](https://stackoverflow.com/questions/8289824/why-is-getcallingactivity-always-returning-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T13:35:18.860

您的通话活动可能比您预期的要早完成。这发生在我身上并导致 getCallingActivity 返回 null，即使调用活动正在使用 startActivityForResult

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T07:20:42.943

调用者和被调用的活动必须在一个任务中。也就是说，您不能使用 Intent.FLAG_ACTIVITY_NEW_TASK 之类的任何标志启动被调用的活动

# python - Html 和汤的结果是不同的

> ID：12991038
> 
> 赞同：0
> 
> 时间：2012-10-20T17:43:03.730
> 
> 标签：python, web-scraping, beautifulsoup

我在使用 Beautifulsoup 时遇到了一些困难。

你可以在这里找到 html -> [http://pastebin.com/Nr1k0dcM](http://pastebin.com/Nr1k0dcM)

之后我只是运行一个`soup = BeautifulSoup(html) print soup.prettify()`

html的结果应该没有任何区别，但我只得到这个> [http://pastebin.com/Y6DmEj40](http://pastebin.com/Y6DmEj40)

我真的不明白这里发生了什么......

编辑：

这是我正在报废的网址之一，例如： http: [//fantasy.premierleague.com/entry/38861/event-history/8/](http://fantasy.premierleague.com/entry/38861/event-history/8/)

我只是将 html 从 to 报废，否则我会收到以下错误：

`HTMLParser.HTMLParseError: bad end tag: u"</scri'+'pt>", at line 89, column 222`

所以我现在正在做的是以下

```
response = requests.get(url, headers=headers)
html = response.text
tablestart = html.find('<!-- pitch view -->') + 19
tableend = html.find('<!-- end ismPitch -->')
html = html[tablestart:tableend]
soup = BeautifulSoup(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:09:09.057

我会以这种方式实现你上面的代码

```
import urllib2
from bs4 import BeautifulSoup
response = urllib2.urlopen("http://fantasy.premierleague.com/entry/38861/event-history/8/")
html = response.read()
tablestart = html.find('<!-- pitch view -->') + 19
print tablestart
tableend = html.find('<!-- end ismPitch -->')
print tableend
html = html[tablestart:tableend]
soup = BeautifulSoup(html) 
```

上述代码的输出是

```
55594
92366 
```

# c - 数组中地址差异的歧义

> ID：12991046
> 
> 赞同：1
> 
> 时间：2012-10-20T17:44:40.867
> 
> 标签：c, memory-address

```
#include <stdio.h>
main()
{
    int a[] ={ 1,2,3,4,5,6,7};
    char c[] = {' a','x','h','o','k'};
    printf("%d ", (&a[3]-&a[0]));
} 
```

程序的输出是 3。但是，下面获得的值的输出差异是 12。有人可以解释一下歧义。

```
#include <stdio.h>
main()
{
    int a[] ={ 1,2,3,4,5,6,7};
    char c[] = {' a','x','h','o','k'};
    printf("%d     %d ", &a[3],&a[0]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:47:28.757

这称为指针算术。结果是值除以`sizeof(int)`

如果字节差为 12，大小`int`为 4，则结果为`12/4=3`

顺便说一句，打印地址时使用格式说明符`%p`：

```
printf("%p     %p ", &a[3],&a[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:54:44.383

在第一种情况下，运算符`'-'`应用于指针，结果以元素数量而不是绝对地址来衡量。看看这个：[指针算术](https://stackoverflow.com/questions/394767/pointer-arithmetic)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:46:49.017

您正在打印地址

```
#include<stdio.h>
main()
{
 int a[] ={ 1,2,3,4,5,6,7};
char c[] = {' a','x','h','o','k'};
printf("%d     %d ", &a[3],&a[0]);

} 
```

结果

```
-1085768040     -1085768052 
```

[键盘](http://codepad.org/G4SckZtX)

对于第一个 Binyamin Sharet 答案是完美的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:12:21.737

首先，由编译器`a[i]`自动转换为（有关此的有趣结果，请参见[https://stackoverflow.com/a/1995156/226621](https://stackoverflow.com/a/1995156/226621)）。因此，与或相同。这意味着：`*(a+i)``&a[i]``&*(a+i)``a+i`

```
&a[3]-&a[0] 
```

是相同的

```
(a+3) - (a+0) 
```

这是`3`。这也意味着 for`p`和`q`，它们都是指向某种类型的指针`T`（即`*p`和`*q`的类型`T`），并且当有效时，它会为您提供和之间`p-q`类型的元素数。编译器将自动转换 和 的值的差异并将该差异除以给您正确的数字。`T``p``q``p``q``sizeof(T)`

因此，当您打印各个指针值，然后自己减去这些值（例如在您的头脑中）时，您将得到一个`sizeof(T)`“太大”的数字。

在你的机器上，`12 / sizeof(int) == 3`，这意味着它`sizeof(int)`是 4。

顺便说一句，要打印指针值，您应该使用`%p`说明符：

```
printf("%p %p\n", (void *)&a[3], (void *)&a[0]); 
```

# c - 我们可以在没有动态内存分配的情况下在 C 中使用双向链表吗？

> ID：12991054
> 
> 赞同：3
> 
> 时间：2012-10-20T17:45:51.960
> 
> 标签：c, memory-management, linked-list, malloc

我正在尝试使用双向链表数据结构在缓冲区管理器中实现替换策略。

但是我的C程序没有链表库，所以我只是自己定义了数据结构。

问题是：我可以避免做任何[*动态*？]内存分配来使用双向链表吗？

使用`palloc()`而不是有什么好处`malloc()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:48:20.443

您当然可以在完全不使用动态内存分配的情况下创建双向链表；这样做只是一种惯例。

```
#include <stdio.h>
#include <assert.h>
#include <inttypes.h>

enum { NODEBUG = 0, DEBUG = 1 };

static const int debug = NODEBUG;

typedef struct DList DList;
struct DList
{
    int    data;
    DList *next;
    DList *prev;
};

enum { MAX_DLIST = 100 };
struct DList dlist[MAX_DLIST];

static void add_node(DList *head, DList *node)
{
    assert(head != 0 && node != 0);
    if (head->next == 0)
    {
        assert(head->prev == 0);
        head->next = node;
        head->prev = node;
        node->next = head;
        node->prev = head;
    }
    else
    {
        assert(head->prev != 0);
        node->next = head->next;
        node->prev = head;
        head->next->prev = node;
        head->next = node;
    }
}

static void diagnode(DList *node)
{
    if (debug)
        printf(" (T = 0x%.12" PRIXPTR ", N = 0x%.12" PRIXPTR ", P = 0x%.12" PRIXPTR ")\n",
               (uintptr_t)node, (uintptr_t)node->next, (uintptr_t)node->prev);
}

static void print_list(DList *head)
{
    assert(head != 0);
    printf("List:");
    if (head->next != 0)
    {
        DList *node;
        int counter = 0;
        if (debug)
            printf("\nHEAD");
        diagnode(head);
        for (node = head->next; node != head; node = node->next)
        {
            printf(" %3d", node->data);
            diagnode(node);
            assert(counter++ < MAX_DLIST);
        }
    }
    printf(" <EOL>\n");
}

int main(void)
{
    DList head = { 0, 0, 0 };

    for (int i = 0; i < MAX_DLIST; i++)
    {
        dlist[i].data = (i * 13 + 7) % 100;
        add_node(&head, &dlist[i]);
        if (debug)
            print_list(&head);
    }
    print_list(&head);
} 
```

看不到内存分配！当您有类似缓冲区管理器的东西时，您可以使用此变体，其中有固定的数据缓冲区数组，但您需要 LRU（最近最少使用）替换策略。与本例中的将数据直接放在双向链表结构中不同的是，该`data`元素将指向缓冲池中的一个条目。然后，您可以在列表中添加和删除条目，而无需更改列表链接到的主数据结构中的任何内容。

* * *

If`palloc()`是一个池化内存分配器，使用它的优点`malloc()`是您可以通过单个函数调用释放分配给给定池的所有内存，而不必自己管理所有单独的释放。有时，池分配器会比使用`malloc()`;单独分配内存更有效。它可能会分配一个固定大小结构的大数组，然后根据请求分配条目，从而减少分配的数量，从而减少开销。

# jython - Jython - SyntaxError：不匹配的输入'，'需要冒号

> ID：12991057
> 
> 赞同：0
> 
> 时间：2012-10-20T17:46:20.497
> 
> 标签：jython

我有我用python编写的这段代码：

```
from Purchase import Transaction
from Purchase import MoneyStatement

if __name__ == '__main__':
    p= {Transaction('costco','me', 45, "AmEx"),Transaction('costco','me', 45, "AmEx")}
    ms= MoneyStatement('AmEx 10-19-2012', p)
    print(ms) 
```

它在 python 中工作，但是当我尝试在 jython 中运行它时，它给了我这个错误：

p= {Transaction('costco','me', 45, "AmEx"),Transaction('costco','me', 45, "AmEx")}

```
 ^ 
```

SyntaxError：不匹配的输入'，'需要冒号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:49:58.997

它适用于[Python 2.7 和 3](http://docs.python.org/whatsnew/2.7.html#python-3-1-features)。它在 2.7 之前的版本中不起作用，这是 Jython（至少是当前版本，我隐约记得正在处理的 2.7 兼容性）所支持的。这些版本中没有固定的文字语法。也使用您在 2.7 之前的 CPython 上使用的内容：`set([item1, item2, ...])`

# objective-c - 如何在 MainStoryboard 文件中创建 ViewController 的实例？

> ID：12991062
> 
> 赞同：2
> 
> 时间：2012-10-20T17:47:04.303
> 
> 标签：objective-c, xcode

我被要求在 MainStoryboard.storyboard 文件中创建 DateChooserViewController 的一个实例。我不确定这是在哪里或如何完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:57:55.527

取决于您想要完成的任务：

1.  如果要更改`type`默认视图控制器的 ，`storyboard`则需要在**`identity inspector`**. （我认为这就是你想要完成的）
2.  如果你想通过它的**`identifier`**定义来实例化一个视图控制器`stroryboard`，你可以在你的代码中这样进行：

`DateChooserViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"DateChooserViewController"];`

# c++ - 未解析的外部符号，困惑

> ID：12991064
> 
> 赞同：0
> 
> 时间：2012-10-20T17:47:11.060
> 
> 标签：c++

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有一个中值函数，它从数组元素中找到中值，如下所示

**中位数.h**

```
template <class N>
N median (N*,size_t); 
```

**中位数.cpp**

```
#include "median.h"
template <class N> 
 N median (N* numbers,size_t size){
    size_t mid = size/2;
    return size % 2 == 0? (numbers[mid] + numbers[mid-1])/2 : numbers[mid];
} 
```

**主要的**

```
#include <iostream>
#include "median.h"

using namespace std;

int main(){
    double Numbers [] = {1,2,3,4,5,6,7};

    size_t size = sizeof(Numbers)/sizeof(*Numbers);

    double med = median(Numbers,size);
    cout << med << endl;
    return 0;

} 
```

但我收到以下错误

```
main.obj : error LNK2019: unresolved external symbol "double __cdecl median<double>(double *,unsigned int)" (??$median@N@@YANPANI@Z) referenced in function _main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:02:43.113

模板应在使用前由编译器实例化。`median.h`你有`median`模板的声明，你有它的实现，但你没有在`media.cpp`那个文件中使用它，所以模板不会在那个文件中实例化。另一方面，`main.cpp`您尝试实例化模板，但没有实现，只是声明！所以编译器将无法实例化模板的实现，这就是你的错误的原因。只需使用以下方法将实现移动到`median.h`或实例化模板`median.cpp`：

```
template double median<double>(double*, size_t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:52:51.430

您可以将一个`#include "median.cpp"`放入您的主文件中，也可以将模板的实现移动到头文件中`median.h`

# ruby-on-rails - Filter records by virtual attribute rather than database field?

> ID：12991067
> 
> 赞同：0
> 
> 时间：2012-10-20T17:47:44.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

I am using this function in my `User` model to populate a select box in a form:

```
def outstanding_invoices
  invoices.to_a.select { |invoice| invoice.balance < 0 }
end 
```

The problem is that `balance` is not a database field but a method that calculates something.

So it takes an awful lot of SQL queries to generate the select box because the function above iterates over every single `invoice` that the `user` has.

Is there a faster way to generate the select box, ideally using one SQL query only?

A simple alternative would probably be storing the `balance` of each `invoice` in the database, but I am somehow reluctant to do that because I want to keep my database to a minimum.

Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:02:54.140

根据使用计算出的货币价值的经验，在很多情况下，将计算出的价值与用于计算该价值的参数一起存储是有意义的——这样您就可以对计算出的价值运行查询，但您也可以追溯至该值是如何计算的。

在您的发票示例中，我建议您在模型中实现`after_save`回调。`Payment`例如：

```
class Payment < ActiveRecord::Base
  belongs_to :invoice

  def after_save
    invoice.update_balance
  end
end

class Invoice
  has_many :payments

  def self.with_open_balance
    where("current_balance > 0")
  end

  def update_balance
    update_attributes(:current_balance => balance)
  end

  def balance
    invoiced_amount - payments.sum(:amount)
  end
end 
```

使用这种方法，您现在可以调用`customer.invoices.with_open_balance`以获取该客户的所有未结发票。每当保存付款时，付款所属的发票将重新计算其余额并将计算的值存储在同一数据库事务中，以确保一致性。

# php - Error with Internationalization extension while compiling php 5.4.8

> ID：12991070
> 
> 赞同：1
> 
> 时间：2012-10-20T17:47:54.123
> 
> 标签：php, installation, php-extension, intl

I downloaded latest php version from php.net i.e. PHP 5.4.8

I configured it with following command

```
./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql --enable-intl --with-libdir=lib64 --with-pear --with-mcrypt --with-mhash --enable-mbstring --with-iconv --with-icu-dir=/usr --with-gettext --with-curl --with-mysqli --with-freetype --with-gd --with-curlwrappers --with-jpeg-dir=/usr --with-png-dir=/usr 
```

After this I run 'make' which start building / compiling PHP. After some time

It throws me error

```
ext/intl/.libs/php_intl.o: In function `zm_startup_intl':
php-5.4.8/ext/intl/php_intl.c:651: undefined reference to `spoofchecker_register_Spoofchecker_class'
php-5.4.8/ext/intl/php_intl.c:654: undefined reference to `spoofchecker_register_constants'
collect2: ld returned 1 exit status
make: *** [sapi/cli/php] Error 1 
```

Spent lots of hours finding solutions. I can't come out of any. Does anyone know what this error exactly means? How to get rid of this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:43:02.140

在您的系统上安装 ICU 开发库：

```
yum install libicu-devel 
```

您需要[安装](http://www.php.net/manual/en/intl.requirements.php)[ICU](http://site.icu-project.org/)开发库，我认为该错误意味着您没有安装或找不到 lib 文件。

# oauth - Using access tokens

> ID：12991071
> 
> 赞同：2
> 
> 时间：2012-10-20T17:48:15.487
> 
> 标签：oauth, oauth-2.0

I am trying to figure out how an access token in OAuth 2.0 should be used. To be more precise, I am trying to use the Google Plus API from a web application.

I am now able to get a `code` and from it an `access token`. The problem is that this token is only about 3600 seconds valid.

Is there a way to get another token without making the user go again through this process: [https://developers.google.com/accounts/images/consent1.png](https://developers.google.com/accounts/images/consent1.png) because it seems a bit irritating. I know of the `offline access` and its `refresh token`, but it doesn't feel right to have permanent access to a user's account.

Do you have any ideas on how should I proceed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:54:30.003

我绝对不是权威，但我相信答案是“不”。该`offline`令牌允许您在没有后续用户批准的情况下访问，但仅限于用户在首次进行身份验证时已经同意的范围。此外，用户可以随时撤销您的应用程序的访问权限，这与他们之前的同意相结合意味着他们都 a.) 知道他们允许什么；b.) 可以随时停止它。从表面上看，如果用户使用您的应用程序足够多，以至于他们必须不断获得新令牌，他们已经相信它会在您设置的范围内代表他们行事，而`offline`令牌是您将关系提升到新水平的一种方式:)

我意识到这可能比你所寻找的更哲学，所以如果它与你的情况不相关，请道歉。

# android - How to determine if ListAdapter is called for a visible row

> ID：12991072
> 
> 赞同：0
> 
> 时间：2012-10-20T17:48:36.300
> 
> 标签：android, android-listview

I have a ListView which can show some AnimationDrawables that are quite memory intensive. It's unlikely more than 2 of these would be visible on screen, but there can easily be dozens in the items that make up the list.

My issues is that my ListAdapter seems to get called for every item in the list. I assume that this is so that the ListView can set it's scroll height. But it means that I'm loading all those AnimationDrawables (that use lots of memory) that I don't need.

Is there a way to determine if a call to ListAdapter is for a non visible row? This would allow me to skip loading these expensive objects that will likely never need to appear on screen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:16:57.603

ListViews 回收行，因此任何时候只有几个不可见的行。这就是适配器的 getView 方法所做的。它创建一个视图（如果需要），并为当前项目设置数据。因此，如果您的项目多于可见行，则传递给 getView 的视图将不会为空，并且应该只是更新而不是创建。

# java - java dom问题中的命名空间

> ID：12991074
> 
> 赞同：1
> 
> 时间：2012-10-20T17:48:45.970
> 
> 标签：java, xml, dom

我正在使用以下 API 来创建带有命名空间的 Dom 文档，我的问题是为什么我需要将第一个参数“http://www.w3.org/2000/xmlns/”放入某种常量？当我输入 null 我得到错误。我问它，因为它太通用了，所以我为什么要放它？

```
rootTreeNode.setAttributeNS("http://www.w3.org/2000/xmlns/" ,"xmlns:m", "http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:19:50.930

以下是如何处理命名空间：

```
public static void main( String[] args ) throws Throwable {
   DocumentBuilderFactory dbf  = DocumentBuilderFactory.newInstance();
   dbf.setNamespaceAware( true );

   DocumentBuilder db = dbf.newDocumentBuilder();
   Document doc = db.newDocument();

   Element root = doc.createElement( "root" );
   root.setAttribute( "xmlns:m" , "http://www.lfinance.fr/blog-rachat-credits" );
   root.setAttribute( "xmlns:rt", "http://www.lfinance.fr/forum-rachat-credits" );
   doc.appendChild( root );

   Element elt = doc.createElement( "simple" );
   elt.setAttribute( "m:FC_TargetPath"   , "false" );
   elt.setAttribute( "m:FC_KeepInContent", "false" );
   elt.setAttribute( "rt:filterable"     , "false" );

   root.appendChild( doc.createTextNode( "\n\t" ));
   root.appendChild( elt );
   root.appendChild( doc.createTextNode( "\n" ));
   TransformerFactory.newInstance().newTransformer().transform(
      new DOMSource( doc ),
      new StreamResult( System.out ));
} 
```

# uiscrollview - UIScrollview setContentOffset and animation

> ID：12991077
> 
> 赞同：2
> 
> 时间：2012-10-20T17:49:02.737
> 
> 标签：uiscrollview, core-animation

I want to `setContentOffset` with different animation transition.

Now I use:

```
[UIScrollView animateWithDuration:speed animations:^ {
    [scrollView setContentOffset:offset];
}]; 
```

Can you help me, How I achieve animation during set offset.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:39:33.767

我不太确定，我明白你在找什么。但是，如果您正在寻找一个使用非线性计时函数进行动画处理的`UIScrollView`类，您可能会喜欢我的[MOScrollView](https://github.com/plancalculus/MOScrollView)。我使用 a为. 不过，请注意它可能无法完美运行，因为我还没有在生产中使用这个类。`contentOffset``CADisplayLink``contentOffset`

# javascript - javascript popup firing only in chrome

> ID：12991078
> 
> 赞同：0
> 
> 时间：2012-10-20T17:49:05.450
> 
> 标签：javascript, html, hyperlink, window.open

This is some js in one of my views:

```
var $link = '<a href="javascript:window.open(\'../EForm/Info?formId=' + data.record.Form.Id + '\',&#34;EForm Details&#34;,&#34;height=550,width=345&#34;);">info</a>'; 
```

I want to pop open a new small window when someone clicks on the details of an item on my page. The code above renders this html on the page:

```
<a href="javascript:window.open('../EForm/Info?formId=1',"EForm Details","height=550,width=345");">info</a> 
```

which is only working in chrome (no popup blockers are enabled in IE9 or FF ) what am i doing wrong here?

**EDIT**

ok ive updated the markup same issue only works in chrome,

```
<a href="javascript:window.open('../EForm/Info?formId=1','EForm Details','height=550,width=345');">info</a> 
```

**EDIT #2**

Ok think ive got the markup kinda fixed FF and IE are now opening my popup but when they do the parnt window content is replaced with [object] in IE and [Window Object] in FF.... Now what the heck is going on?

```
 <a href="javascript:window.open('../EForm/Info?formId=1','EForm_Details','height=550,width=345');">info</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:00:37.627

好的，所以这篇文章指出了我的解决方案。 [弹出错误对象窗口](http://forums.asp.net/p/1448690/3716727.aspx)

这是我的新标记：

```
 var $link='<a href="javascript: var wind= window.open(\'../EForm/Info?formId='+data.record.Form.Id+'\',\'EForm_Details\',\'height=550,width=345\');">info</a>'; 
```

这是它的渲染方式：

```
<a href="javascript: var wind= window.open('../EForm/Info?formId=1','EForm_Details','height=550,width=345');">info</a> 
```

它在所有 3 种浏览器中都能完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:54:50.273

可能是因为您没有转义双引号。

修改的：

```
<a href="javascript:window.open('../EForm/Info?formId=1','EForm Details','height=550,width=345');">info</a> 
```

# c# - WPF ComboBox Binding works if previous record had no matching item in the ItemsSource collection and fails if it did

> ID：12991079
> 
> 赞同：2
> 
> 时间：2012-10-20T17:49:12.133
> 
> 标签：c#, wpf, xaml, combobox, null

I have the following WPF Combobox:

```
<Window.Resources>
    <CollectionViewSource x:Key="performanceItemsource" Source="{Binding Path=SelectedReport.Performances}"  >
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="Name"/>
        </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
</Window.Resources>
 ...
    <ComboBox Name="cbxPlanPerf" Grid.ColumnSpan="2"
      SelectedValuePath="MSDPortfolioID" DisplayMemberPath="Name" 
      SelectedValue="{Binding Path=PlanPerfID}"
      ItemsSource="{Binding Source={StaticResource performanceItemsource}}"/> 
```

The Source for the `CollectionViewSource` is:

```
public List<MSDExportProxy> Performances
{
  get
  {
    if (Portfolio != null)
    {
      return (from a in Portfolio.Accounts where a.MSDPortfolioID != null select new MSDExportProxy(a))
        .Concat<MSDExportProxy>(from g in Portfolio.Groups where g.MSDPortfolioID != null select new MSDExportProxy(g))
        .Concat<MSDExportProxy>(from p in new[] { Portfolio } where p.MSDPortfolioID != null select new MSDExportProxy(p))
        .ToList<MSDExportProxy>();
    }
    return new List<MSDExportProxy>();
  }
} 
```

The bound property `PlanPerfID` is a string.

I move between records using a ListBox control. The ComboBox works fine if the previous record had no items in its ComboBox.ItemsSource. If there were any items in the previous record's ComboBox.ItemsSource then the new record won't find its matching item in the `ItemsSource` collection. I've tried setting the `ItemsSource` in both XAML and the code-behind, but nothing changes this odd behavior. How can I get this darn thing to work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:35:59.920

我找到了一个快速而肮脏的解决方案来解决我的问题。我只是碰巧`NotifyPropertyChanged()`在我的报告实体上有一个公共方法，我发现如果我`SelectedReport.NotifyPropertyChanged("PlanPerfID")`在报告列表框的`SelectionChanged`事件中调用它就足以让`ComboBox`重新评估并在`ItemsSource`. 对，是克鲁格……

更新：我还需要在`SelectedReport.NotifyPropertyChanged("Performances")`某些情况下添加...

更新 2：好的，事实证明上面不是防弹的，我遇到了破坏它的情况，所以我不得不想出一个更好的解决方法：

1.  更改了`SelectedReport`Window 代码隐藏中的属性，添加了一个私有标志 ( `_settingCombos`) 以防止 Binding 搞砸绑定值，直到尘埃落定`ItemSource`：

    ```
    private bool _settingCombos = false;
    private Report _SelectedReport;
    public Report SelectedReport
    {
      get { return _SelectedReport; }
      set 
      {
        _settingCombos = true;
        _SelectedReport = value;
        NotifyPropertyChanged("SelectedReport");
      }
    } 
    ```

2.  `_settingCombos`在窗口代码隐藏中创建了一个要绑定的代理，如果标志是，它将拒绝更新属性的值`true`：

    ```
    public string PlanPerfID_Proxy
    {
      get { return SelectedReport.PlanPerfID; }
      set
      {
        if (!_settingCombos)
        {
          SelectedReport.PlanPerfID = value;
          NotifyPropertyChanged("PlanPerfID_Proxy");
        }
      }
    } 
    ```

3.  在报告列表框的事件中添加了一个额外的通知`SelectionChanged`以及将标志重置`_settingCombos`回的代码`false`：

    ```
    private void lbxReports_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
      //KLUGE: Couldn't get the ComboBoxes associated with these properties to work right
      //this forces them to re-evaluate after the Report has loaded
      if (SelectedReport != null)
      {
        NotifyPropertyChanged("PlanPerfID_Proxy");
        _settingCombos = false;
      }
    } 
    ```

4.  绑定`ComboBox`到`PlanPerfID_Proxy`属性（而不是直接绑定到`SelectedReport.PlanPerfID`属性。

哇，好麻烦！我认为这只是 .NET 的绑定逻辑被 .NET 的动态特性弄糊涂的一个例子`ComboBox.ItemSource`，但这似乎已经解决了这个问题。希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:09:17.840

在 Xaml 中处理列表/ObservableCollection 时尝试`ICollectionViews`与属性结合使用。`IsSynchronizedWithCurrentItem`视图模型中的 ICollectionView 可以处理所有需要的事情，例如排序、过滤、跟踪选择和状态。

xml:

```
<Window x:Class="ComboBoxBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <ListBox Grid.Column="0" 
                 ItemsSource="{Binding Reports}" 
                 DisplayMemberPath="Name" 
                 IsSynchronizedWithCurrentItem="True" />
        <ComboBox Grid.Column="1" 
                  ItemsSource="{Binding CurrentReport.Performances}" 
                  DisplayMemberPath="Name" 
                  IsSynchronizedWithCurrentItem="True" />
    </Grid>
</Window> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged 
    {
        private readonly IReportService _reportService;
        private ObservableCollection<ReportViewModel> _reports = new ObservableCollection<ReportViewModel>();
        private PerformanceViewModel _currentPerformance;
        private ReportViewModel _currentReport;

        public ObservableCollection<ReportViewModel> Reports
        {
            get { return _reports; }
            set { _reports = value; OnPropertyChanged("Reports");}
        }

        public ReportViewModel CurrentReport
        {
            get { return _currentReport; }
            set { _currentReport = value; OnPropertyChanged("CurrentReport");}
        }

        public PerformanceViewModel CurrentPerformance
        {
            get { return _currentPerformance; }
            set { _currentPerformance = value; OnPropertyChanged("CurrentPerformance");}
        }

        public ICollectionView ReportsView { get; private set; }
        public ICollectionView PerformancesView { get; private set; }        

        public ViewModel(IReportService reportService)
        {
            if (reportService == null) throw new ArgumentNullException("reportService");
            _reportService = reportService;

            var reports = _reportService.GetData();
            Reports = new ObservableCollection<ReportViewModel>(reports);

            ReportsView = CollectionViewSource.GetDefaultView(Reports);
            ReportsView.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending));
            ReportsView.CurrentChanged += OnReportsChanged;
            ReportsView.MoveCurrentToFirst();
        }

        private void OnReportsChanged(object sender, EventArgs e)
        {
            var selectedReport = ReportsView.CurrentItem as ReportViewModel;
            if (selectedReport == null) return;

            CurrentReport = selectedReport;

            if(PerformancesView != null)
            {
                PerformancesView.CurrentChanged -= OnPerformancesChanged;
            }

            PerformancesView = CollectionViewSource.GetDefaultView(CurrentReport.Performances);
            PerformancesView.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending));
            PerformancesView.CurrentChanged += OnPerformancesChanged;
            PerformancesView.MoveCurrentToFirst();
        }

        private void OnPerformancesChanged(object sender, EventArgs e)
        {
            var selectedperformance = PerformancesView.CurrentItem as PerformanceViewModel;
            if (selectedperformance == null) return;

            CurrentPerformance = selectedperformance;
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

# python - Password not getting encrypted when I update

> ID：12991080
> 
> 赞同：0
> 
> 时间：2012-10-20T17:49:22.290
> 
> 标签：python, sqlalchemy, pyramid

Being a newb to python I am not quite sure why I am getting inconsistent results. I register a user and the password in my table ends up being the hashed version. When the user updates his password, the password in the table ends up being the unhashed version. Obviously, I want the hashed version. What am I doing wrong? (I am using SQLAlchemy and mysql if that matters.)

I have the following:

```
def hash_password(password):
    blah, blah, blah # hash my password here
    return hashed_password

class User(Base):
    __tablename__ = 'mytable'
    email = Column('email')
    _password = Column('password')

    def _get_password(self):
        return self._password

    def _set_password(self, password):
        self._password = hash_password(password)
    password = property(_get_password, _set_password)
    password = synonym('_password', descriptor=password)

    def __init__(self, password="", email=""):
        self.email = email
        self.password = password
    @classmethod
    def register(cls, email, password):
        return DBSession.add(User(email=email,password=password)) # this correctly hashes the password

    @classmethod
    def update(cls, email, password):
        return DBSession.query(cls).filter(cls.email == email).update({'password': password}) #password ends up being the unhashed password 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T15:31:34.377

这里的问题是您通过您的`User.update`方法更新密码的方式。此方法完全跳过 ORM 并直接在数据库中更新行。很明显，当您执行此操作时，散列密码的代码将不会运行。您粘贴的`User`模型很好，与我使用的相似。不过，您需要使用它。这意味着要更新密码，您应该加载用户并设置他们的密码。

```
user = DBSession.query(User).filter_by(email=email).first()
if user:
    user.password = new_password 
```

稍后当事务提交时，事情将按照您的预期进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:01:39.450

您应该将密码哈希存储在数据库中，因此模型的字段必须包含哈希值，而不是原始密码。要设置密码，您应该使用进行散列并将散列设置为实例的方法。要检查密码是否正确，您应该对用户定义的密码进行哈希处理，并将结果与​​存储在您的实例中的哈希值进行比较。Yo 将无法从哈希中解码密码 - 这是不安全的。

```
class User(Base):
    __tablename__ = 'user'

    email = Column('email', String(80))
    password = Column('password', String(80))

    def set_password(raw_password):
        self.password = hash(raw_password)

    def check_password(raw_password):
        return self.password == hash(raw_password) 
```

# c++ - 如何确定表达式值的类型？

> ID：12991082
> 
> 赞同：0
> 
> 时间：2012-10-20T17:49:38.650
> 
> 标签：c++, types, expression, cout

1）当语句如

```
cout << 3.0 + 3 ; 
```

是，如何知道传递给 cout 的值是 int 还是 float？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:04:28.340

两者都不是。是双倍的。`3.0`具有 double 类型，并`3`被提升为 double 以进行加法；将双精度加到双精度的结果是双精度。这与对结果所做的事情无关。

ostream 有一堆重载的左移运算符，右侧有一个用于 double 类型的参数，所以这就是所谓的：

```
template <class Elem, class Traits>
basic_ostream<Elem, Traits>& basic_ostream<Elem, Traits>::operator<<(double d); 
```

对于它的价值，这是一个成员函数，而不是一个自由函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:55:38.680

它通过利用重载来做到这一点

```
ostream& operator<<(ostream& output, int i) {
  // It's an int
}

ostream& operator<<(ostream& output, float f) {
  // it's a float
} 
```

C++ 编译器将`<<`根据输入类型选择适当的运算符重载。如果您通过 a`float`它将选择具有 a`float`和相同的重载`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:59:03.983

运算结果`3.0 + 3`是 double 因此 cout 将对 double 类型应用 << 运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:17:26.493

您可以使用调试器的 Step into 功能来确定这一点。它将进入哪个 cout 方法是你的答案

# node.js - NodeJS 更少可见的回调和更多的结构

> ID：12991083
> 
> 赞同：3
> 
> 时间：2012-10-20T17:49:39.843
> 
> 标签：node.js, postgresql, asynchronous, express

NodeJS 的一个优点是它的异步和非阻塞 I/O，在我的情况下，它一方面很棒，但另一方面每天都在折断我的脖子。

我认为自己是 NodeJS / Async 新手，我经常会得到这样的代码：

```
function(req, res) {
            req.assert("name", "Lobbyname is required").notEmpty();
            req.assert("name", "Lobbyname length should be between 4 and 64 characters").len(4, 64);
            req.assert("game", "Game not found").isInt();

            req.sanitize("game").toInt();
            var userId = req.user.id;

            var errors = req.validationErrors();
            var pg_errors = [];
            var games = null;
            if (errors) {
                console.log(errors);
                client.query("SELECT * FROM games", function(err, result) {
                    if (!err) {
                        games = result.rows;
                        res.render("lobby/create", {
                            title: "Create a new lobby",
                            games: games,
                            errors: errors.toString()
                        });
                    }
                    else {
                        res.send("error");
                    }
                });
            }
            else {
                errors = null;
                client.query("SELECT COUNT(*) as in_lobbies FROM users u RIGHT JOIN lobby_userlist ul ON ul.user_id = u.id WHERE u.id = $1", [userId], function(err, result) {
                    if (!err) {
                        console.log(result.rows[0]);
                        if (result.rows[0].in_lobbies < 1) {
                            client.query("SELECT COUNT(*) as hosting_lobbies FROM lobbies WHERE owner = $1", [userId], function(err, result) {
                                if (!err) {
                                    if (result.rows[0].hosting_lobbies < 1) {
                                        client.query("INSERT INTO lobbies(name, game, owner) VALUES($1, $2, $3)", [req.param("name"), req.param("game"), userId], function(err, result) {
                                            if (!err) {
                                                res.redirect("/lobby");
                                            }
                                            else {
                                                pg_errors.push(err);
                                                console.log(err);
                                            }
                                        });
                                    }
                                    else {
                                        errors = "You can only host one lobby at a time";
                                    }
                                }
                                else {
                                    pg_errors.push(err);
                                    client.query("SELECT * FROM games", function(err, result) {
                                        if (!err) {
                                            games = result.rows;

                                            res.render("lobby/create", {
                                                title: "Create a new lobby",
                                                games: games,
                                                errors: errors
                                            });
                                        }
                                        else {
                                            pg_errors.push(err);
                                        }
                                    });
                                }
                            });
                        }
                        else {
                            pg_errors.push(err);
                        }
                    }
                });

                console.log("pg_errors");
                console.log(pg_errors);
                console.log("pg_errors _end");

                if (pg_errors.length < 1) {
                    console.log("no errors");
                }
                else {
                    console.log(pg_errors);
                    res.send("error service operation failed");
                }
            }
        } 
```

这是我使用以下 npm 包编写的示例：

*   pg（本机）
*   表示
*   express-validator（节点验证器的中间件）
*   护照（身份验证中间件）

检查用户给出的输入是否有效是最小的问题，我会检查我在哪里断言变量并将页面的渲染版本返回给用户打印出错误。

但是，如果我们首先通过验证错误，我们假设“大厅”已准备好插入数据库，然后我想确保用户没有其他大厅打开并且不是另一个大厅的成员。好吧，现在我最终将一个查询放入另一个查询中，理论上我必须将我的视图渲染函数（res.render（））放入每个查询回调中，如果查询遇到错误或返回指示用户不被允许的结果创建一个大厅。我不想那样做，而且似乎不太实用。

我尝试从查询回调中删除渲染逻辑和所有其他逻辑，而是让查询回调设置指示成功或失败的错误数组或变量，并在我的查询代码下方检查 if(errors) renderPageWithErrors。

由于 nodejs 的异步行为，这会导致奇怪的错误，在这种情况下 res.redirect() 是在 res.render() 之后调用的，诸如此类。我不得不将我的 res.render 移回查询回调中。

有没有正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:20:31.690

您可能想查看一个`async`库，例如`https://github.com/caolan/async`. 它有助于构建异步代码，使其不会变成这样的混乱。根据您的要求，有不同的方法，从简单`series`和`parallel`执行到`waterfall`依赖`auto`跟踪等。

```
async.auto({
    get_data: function(callback){
        // async code to get some data
    },
    make_folder: function(callback){
        // async code to create a directory to store a file in
        // this is run at the same time as getting the data
    },
    write_file: ['get_data', 'make_folder', function(callback){
        // once there is some data and the directory exists,
        // write the data to a file in the directory
        callback(null, filename);
    }],
    email_link: ['write_file', function(callback, results){
        // once the file is written let's email a link to it...
        // results.write_file contains the filename returned by write_file.
    }]
}, function(err) { 
    // everything is done or an error occurred 
}); 
```

它所做的另一件好事是将所有错误合并到一个回调中。这样，您只需在一个地方处理错误，而不是在整个代码中散布错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:45:27.900

您可能还想检查[https://github.com/0ctave/node-sync](https://github.com/0ctave/node-sync)库。它是 nodejs [Fibers](https://github.com/laverdet/node-fibers)的语法糖，一种在不破坏 nodejs 事件循环模型的情况下以传统方式编写异步代码的方法。关于使用 Fibers 的利弊有很多讨论，但我更喜欢代码可读性和易于开发，而不是潜在的小资源使用增加。

我不知道你所有的代码逻辑，但上面的函数看起来像这样：

```
function(req, res) {
    Sync(function() {
        req.assert("name", "Lobbyname is required").notEmpty();
        req.assert("name", "Lobbyname length should be between 4 and 64 characters").len(4, 64);
        req.assert("game", "Game not found").isInt();

        req.sanitize("game").toInt();
        var userId = req.user.id;

        var errors = req.validationErrors();
        var pg_errors = [];
        var games = null;
        if (errors) {
            console.log(errors);
            var games = client.query.sync(client, "SELECT * FROM games").rows;
            games = result;
            res.render("lobby/create", {
                title: "Create a new lobby",
                games: games,
                errors: errors.toString()
            });
        }
        else {
            errors = null;
            var result = client.query.sync(client, "SELECT COUNT(*) as in_lobbies FROM users u RIGHT JOIN lobby_userlist ul ON ul.user_id = u.id WHERE u.id = $1", [userId]);

            console.log(result.rows[0]);
            if (result.rows[0].in_lobbies < 1) {
                var result = client.query.sync(client, "SELECT COUNT(*) as hosting_lobbies FROM lobbies WHERE owner = $1", [userId]);

                if (result.rows[0].hosting_lobbies < 1) {
                    var res = client.query.sync(clien, "INSERT INTO lobbies(name, game, owner) VALUES($1, $2, $3)", [req.param("name"), req.param("game"), userId]);
                    res.redirect("/lobby");
                }
                else {
                    errors = "You can only host one lobby at a time";
                }
            }
            else {
                var games = client.query.sync(client, "SELECT * FROM games").rows;

                res.render("lobby/create", {
                    title: "Create a new lobby",
                    games: games,
                    errors: errors
                });
            };
        }
    }, function(err) {
        if(err) {
            // do your error handling here
        }
    });
} 
```

# php - 如何使用此查询与数组值进行比较

> ID：12991089
> 
> 赞同：-3
> 
> 时间：2012-10-20T17:50:31.193
> 
> 标签：php, mysql, codeigniter

`SELECT DISTINCT email FROM table 1, table2 WHERE email = array value AND table1.id = table2.id`

if ($query->row()->email == $emailv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:06:02.233

如何拆分逗号分隔列表，然后运行如下查询：

```
 WHERE my_column in (?,?,?,?) 
```

从分隔列表中传递（比如说）4个值作为参数？

# android - How to finish multiple activities on logout android

> ID：12991091
> 
> 赞同：3
> 
> 时间：2012-10-20T17:50:38.943
> 
> 标签：android, android-activity

In my app i am starting activities one after the another and not finishing any activity before calling another. But when user presses logout button then i want to finish all the activities from the stack and start login activity.

> Activity Login(finish & call) --> Activity B --> Activity C--> Activity D --> Logout -->Acitivity Login.

If user presses back key on login activity then he returns to Activity C in my case... but i want to avoid that.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T18:05:45.793

您应该做的是调用`Login`活动，并清除堆栈中它上面的所有活动。

```
Intent intent = new Intent(this, Login.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

这将标记它以创建一个新的登录活动，而不仅仅是恢复之前的登录活动。并清除它上面的所有活动。(B、C、D)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:09:40.817

我不知道它是否会有所帮助，但您可以尝试将以下标签添加到清单的声明活动（B、C、D）中：

`android:noHistory='true'`

> 当用户离开它并且它不再在屏幕上可见时，该活动应该从活动堆栈中删除并完成（调用它的完成（）方法）

看看[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)。

# spring - java.lang.IllegalArgumentException: Prefix '' is already bound to ''

> ID：12991093
> 
> 赞同：2
> 
> 时间：2012-10-20T17:50:46.813
> 
> 标签：spring, xml-namespaces, illegalargumentexception

**sun-jaxws.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints version="2.0" xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime">
  <endpoint implementation="ways.org.commerce.inventory.service.InventoryServiceImpl" name="InventoryServiceImpl" url-pattern="/services/InventoryServiceImpl"/>
</endpoints> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext-Main.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>InventoryServiceImpl</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>InventoryServiceImpl</servlet-name>
        <url-pattern>/services/InventoryServiceImpl</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

**InventoryServiceImpl.java**

```
@WebService(serviceName = "InventoryServiceImpl")
public class InventoryServiceImpl implements IFInventoryService {

    private IFInventoryDAO inventoryDAO;

    @WebMethod(exclude = true)
    public IFInventoryDAO getInventoryDAO() {
        return inventoryDAO;
    }

    @WebMethod(exclude = true)
    public void setInventoryDAO(IFInventoryDAO inventoryDAO) {
        this.inventoryDAO = inventoryDAO;
    }

    @WebMethod(operationName = "addProduct")
    public void addProduct(
            @WebParam(name = "product") ProductBean product) throws CommerceBaseException {
        if (inventoryDAO.productExists(product.getProductUniqueCode())) {
            throw new CommerceBaseException("Product Not Found", InventoryErrorCode.PRODUCT_NOT_FOUND_ERROR);
        }
        inventoryDAO.addProduct(product);
    }

    @WebMethod(operationName = "getProduct")
    public ProductBean getProduct(
            @WebParam(name = "productUniqueCode") String productUniqueCode) throws CommerceBaseException {
        if (inventoryDAO.productExists(productUniqueCode)) {
            throw new CommerceBaseException("Product Not Found", InventoryErrorCode.PRODUCT_NOT_FOUND_ERROR);
        }
        return inventoryDAO.getProduct(productUniqueCode);
    }

    @WebMethod(operationName = "productExists")
    public boolean productExists(
            @WebParam(name = "productUniqueCode") String productUniqueCode) {
        return inventoryDAO.productExists(productUniqueCode);
    }
} 
```

**I am getting following exception**

```
SEVERE: Exception sending context initialized event to listener instance of class com.sun.xml.ws.transport.http.servlet.WSServletContextListener
com.sun.xml.ws.transport.http.servlet.WSServletException: WSSERVLET11: failed to parse runtime descriptor: java.lang.IllegalArgumentException: Prefix '' is already bound to ''
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:139)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4681)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5184)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5179)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IllegalArgumentException: Prefix '' is already bound to ''
    at com.sun.xml.txw2.StartTag.addNamespaceDecl(StartTag.java:171)
    at com.sun.xml.txw2.ContainerElement._namespace(ContainerElement.java:313)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.xml.txw2.ContainerElement.invoke(ContainerElement.java:114)
    at $Proxy179._namespace(Unknown Source)
    at com.sun.xml.ws.wsdl.writer.WSDLGenerator.generateDocument(WSDLGenerator.java:339)
    at com.sun.xml.ws.wsdl.writer.WSDLGenerator.doGeneration(WSDLGenerator.java:272)
    at com.sun.xml.ws.server.EndpointFactory.generateWSDL(EndpointFactory.java:443)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:209)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:505)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
    ... 8 more
20 Oct, 2012 11:17:18 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

Please help me to figure out where i am doing mistake...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-24T12:49:47.050

您的 Web 服务库和 tomcat 的库之间存在冲突。

使用以下依赖：

```
<dependency>
    <groupId>com.sun.xml.ws</groupId>
    <artifactId>jaxws-rt</artifactId>
    <version>2.2.8</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T20:11:46.853

我有同样的问题。

我正在使用`webservice-rt-1.4`并`Maven's dependency`修复了`webservice-api`罐子也与`COMPILE`范围一起出现的人。然后在maven里改成`PROVIDE`scope，把webservice-rt-1.4放到tomcat里面。还要检查 XML 的应用程序库与 tomcat 之间的冲突。希望情况也是如此。拥抱！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T10:02:59.493

就我而言，是为 Web 服务生成的 war 文件中包含的 jaxws-rt.jar 导致了问题，但是一旦我清理并再次构建 war 并保持提供的依赖关系，它就可以正常工作

# java - HashMap group by (Java)

> ID：12991095
> 
> 赞同：3
> 
> 时间：2012-10-20T17:50:52.290
> 
> 标签：java, hashmap

Is there a way we can group by Key and add the value in a HashMap in Java

```
 HashMap<String, Integer> map = new HashMap<String, Integer>();

    map.put("A", 2);
    map.put("A", 3);
    map.put("B", 4);
    map.put("A", 5);
    map.put("B", 4); 
```

The result is

```
 A = 10
   B = 8 
```

Any help would be helpful !!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:56:52.283

像这样的东西应该工作：

```
public void incrementValue(HashMap<String, Integer> map, String key, int value) {
    Integer old = map.get(key);
    if (old == null) {
        map.put(key, value);
    } else {
        map.put(key, value + old);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T17:57:21.010

Write utility method that does this:

```
Map<String, Integer> map = new HashMap<>();
.........
public void putAndIncrement(String key, int value) {
    Integer prev = map.get(key);
    Integer newValue = value;
    if (prev != null) {
        newValue += prev.intValue();
    }
    map.put(newValue);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T17:55:12.880

你不应该使用哈希图。

```
map.put("A", 2);
map.put("A", 3); 
```

第二个 put 会覆盖第一个 put。使用列表。循环遍历它并自己进行添加。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T17:54:27.390

可以这样分组

```
HashMap<String, ArrayList<Integer>> 
```

每当您看到`A`继续将值添加到其 ArrayList

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T18:00:02.877

请参阅有关 Java 算法的答案[以跟踪部分聚合值](https://stackoverflow.com/a/7653041/926620)：

```
private static class MutableValue {
    double value;
    public MutableValue(double value) {
        this.value = value;
    }
    public void add(double value) {
        this.value += value;
    }
}

MutableValue value = sourceNameMap.get(ticketId);
if (oldValue == null) {
    sourceNameMap.put(new MutableValue(entryValue));
} else {
    value.add(entryValue);
} 
```

# scala - Scala 演员不一致地自杀

> ID：12991099
> 
> 赞同：0
> 
> 时间：2012-10-20T17:51:17.090
> 
> 标签：scala, actor, actor-model

我是 scala 的新手，我正在编写 scala 代码来实现糕点协议。协议本身并不重要。有节点，每个节点都有一个我要填充的路由表。这是代码的一部分：

```
def act () {
def getMatchingNode (initialMatch :String) : Int = {
val len = initialMatch.length
  for (i <- 0 to noOfNodes-1) {
    var flag : Int = 1
    for (j <- 0 to len-1) { 
      if (list(i).key.charAt(j) == initialMatch(j)) {
        continue
      } 
      else {
        flag = 0
      }
    }
    if (flag == 1) {
      return i
    }
  }
 return -1
}

// iterate over rows
for (ii <- 0 to rows - 1) {
  for (jj <- 0 to 15) {
    var initialMatch = ""
     for (k <- 0 to ii-1) {
       initialMatch = initialMatch + key.charAt(k)
     }
     initialMatch += jj
     println("initialMatch",initialMatch)
     if (getMatchingNode(initialMatch) != -1) {
       Routing(0)(jj) =  list(getMatchingNode(initialMatch)).key
     }
     else {
       Routing(0)(jj) =  "NULL"
     }
  }
 }

}// act 
```

问题是当对 getMatchingNode 的函数调用发生时，演员自己突然死亡。'list' 是所有节点的列表。（节点对象列表）此外，这种行为并不一致。每个参与者（对于 10 个节点）应该调用 getMatchingNode 15 次。但是在调试时，演员在一次调用后或有时在 3-4 次调用后会在 getMatchingNode 函数调用中杀死自己。被执行的 scala 库代码是这样的：

```
def run() {
try {
  beginExecution()
  try {
    if (fun eq null)
      handler(msg)
    else
      fun()
  } catch {
    case _: KillActorControl =>
      // do nothing

    case e: Exception if reactor.exceptionHandler.isDefinedAt(e) =>
      reactor.exceptionHandler(e)
  }
  reactor.kill()
} 
```

Eclipse 显示此代码已从 getMatchingNode 函数中的 for 循环调用

```
def getMatchingNode (initialMatch :String) : Int =  {
  val len = initialMatch.length
  for (i <- 0 to noOfNodes-1) 
```

奇怪的是，有时循环表现正常，有时它会进入杀死演员的scala代码。

任何输入代码有什么问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:32:31.483

来自书中：M.Odersky 的“Scala 2ed 编程”

> 您可能已经注意到没有提到中断或继续。Scala 省略了这些命令，因为它们不能很好地与函数字面量相结合，这一特性将在下一章中描述。很清楚 continue 在 while 循环中意味着什么，但在函数文字中意味着什么？虽然 Scala 同时支持命令式和函数式编程风格，但在这种情况下，它略微倾向于函数式编程以换取简化语言。不过不要担心。有很多方法可以在没有中断和继续的情况下进行编程，如果您利用函数文字，这些替代方法通常会比原始代码短。

如果您想学习scala，我真的建议您阅读这本书

您的代码基于大量嵌套*的 for 循环*，这些循环通常可以使用最合适的*Collection上可用的**高阶函数*重写。

 *你可以像下面这样重写你的函数[我试图让它对新手来说平易近人]：

```
//works if "list" contains "nodes" with an attribute "node.key: String"
def getMatchingNode (initialMatch :String) : Int = {

  //a new list with the corresponding keys
  val nodeKeys = list.map(node => node.key)

  //zips each key (creates a pair) with the corresponding index in the list and then find a possible match
  val matchOption: Option[(String, Int)] = (nodeKeys.zipWithIndex) find {case (key, index) => key == initialMatch}

  //we convert an eventual result contained in the Option, with the right projection of the pair (which contains the index)
  val idxOption = matchOption map {case (key, index) => index} //now we have an Option[Int] with a possible index

  //returns the content of option if it's full (Some) or a default value of "-1" if there was no match (None). See Option[T] for more details
  idxOption.getOrElse(-1)
} 
```

轻松转换或操作*Collection*元素的潜力是使*continue*和*for 循环*在一般情况下在 Scala 中较少使用的原因

您可以以类似的方式转换行迭代，但我建议如果您需要对集合的索引进行大量工作，您可以使用*IndexedSeq*或其实现之一，例如*ArrayBuffer*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:01:50.920

得到错误.. for 循环中的“继续”子句引起了麻烦。我认为我们可以像在 C++/Java 中一样在 Scala 中使用 continue ，但似乎并非如此。删除 continue 解决了这个问题。*

# rest - MVC4 WebApi 中的 DefaultCredentials 选项和 HTTPS？

> ID：12991100
> 
> 赞同：2
> 
> 时间：2012-10-20T17:51:18.890
> 
> 标签：rest, asp.net-mvc-4, https, asp.net-web-api

我对 DefaultCredentials 选项和 HTTPS 有疑问。如果我使用 HTTP 协议，一切正常 - ntlm 授权正常，但如果我在 Thread.CurrentPrincipal 的 web 服务端将 HTTP 更改为 HTTPS，我什么都没有（空字符串和 IsAuthenticate 为 false 值）。你有类似的问题吗？

**我的 Ntlm 配置：**

```
internal class NtlmSelfHostConfiguration : HttpSelfHostConfiguration
{
    public NtlmSelfHostConfiguration(string baseAddress) : base(baseAddress) { }

    public NtlmSelfHostConfiguration(Uri baseAddress) : base(baseAddress) { }

    protected override BindingParameterCollection OnConfigureBinding(HttpBinding httpBinding)
    {
        httpBinding.Security.Mode = HttpBindingSecurityMode.Transport;
        httpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;
        return base.OnConfigureBinding(httpBinding);
    }
} 
```

**HttpClient 创建**

```
var handler = new HttpClientHandler() { UseDefaultCredentials = true };
httpClient = new HttpClient(handler); 
```

用户密码基本身份验证工作正常，因此证书没有问题

# php - EasyPHP 无法连接到本地主机

> ID：12991102
> 
> 赞同：5
> 
> 时间：2012-10-20T17:51:45.887
> 
> 标签：php, localhost, easyphp

我的系统上运行了 EasyPHP，但必须重新安装干净的操作系统。刚刚再次下载并安装了 EasyPHP，Apache 正在运行。但是当我尝试通过网络浏览器访问管理页面 (127.0.0.1/home) 时，我收到“糟糕！Google Chrome 无法连接到 127.0.0.1”错误。

我检查了 Apache 的 httpd 文件，它说它正在监听 127.0.0.1:80，这正是我试图通过浏览器访问管理页面的方式。但是出于某种原因，我可以使用 127.0.0.1:8887 访问 www 文件夹。

我对 EasyPHP 不是很了解，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T08:48:59.463

我遇到了同样的问题，通过以管理员权限运行 EasyPHP 可执行文件解决了这个问题。

**更新：**我避免将 EasyPHP 安装到`Program Files`文件夹中，并且再也没有遇到过这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T01:55:12.833

我可以通过像您一样将侦听端口更改为 8887 来解决此问题，但不是保存它，而是执行“另存为”然后覆盖它。它会询问您是否要覆盖文件，然后按“是”。这使更改永久化。每当我通过按“保存”而不是“另存为”正常保存它时，它只会创建一个带有时间戳的新 httpd 文件，而不会覆盖原始文件，这不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-27T12:53:22.787

转到仪表板并将端口从 80 更改为 8080 然后反转为 80

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T19:01:25.663

你检查过 apache 错误日志吗？

在您的 easyphp 工具栏中，您可以查看 apache 是否正在运行（绿色图标）

顺便说一句，试试这个命令“netstat -b”并尝试找到监听端口 80 的“apache.exe”（或“httpd.exe”，取决于你的 easyphp 版本）。

但首先，检查你的 apache 错误日志，也许你的 apache 配置文件有问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-04T00:48:48.957

我今天遇到了同样的麻烦，当我尝试通过 EasyPHP 程序更改端口来解决这个问题时，这并没有解决。如果发生这种情况，请尝试转到文件夹`program/apache/conf`并手动更改`httpd.conf`. 此处的`httpd`程序文件夹指示`127.0.0.1:80`而`httpd`conf apache 文件夹显示`127.0.0.1:8887.`

我希望对你有所帮助。问候

# python - 我将如何完成以下检查清单中的第 2 项和/或完成该计划？

> ID：12991103
> 
> 赞同：1
> 
> 时间：2012-10-20T17:51:54.707
> 
> 标签：python, loops, data-structures, python-2.4, myro

这是我正在解决的问题：

> 假设 Myro 的开发人员正在开发一个名为 traveler(String str ) 的新黑盒函数，该函数将机器人在特定方向（即北、南、东或西）移动特定的英尺数（例如，1 =一英尺，2 = 两英尺，等等。） traveler() 函数的参数是一个字符串变量，它同时表示方向和距离。例如，旅行者（E2）将机器人向东移动两英尺，而旅行者（N6）将机器人向北移动六英尺。
> 
> 编写一小段代码，使用黑盒 traveler() 函数将机器人从 A 点移动到 B 点，如下图所示。
> 
> 1.  将参数（例如 N2 等）分配给数据结构。
> 2.  使用向 traveler() 函数提供参数的循环遍历数据结构。

![遵循的路径](../Images/51eba7df9939bd802829d607cadcaa17.png)

> traveler(String str) 函数实际上并不存在。把它当作它做的那样，只需编写一小段代码来完成沿着上面给出的模式移动机器人的任务。

这是我所拥有的：

```
 def main():
    go = [N2, W1, N3, E4, S1, W1, S1, E2]
    for g go:
        traveler(g)

main() 
```

我的问题是如何完成这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:00:03.100

python中的遍历列表通常是通过使用[`for`](http://docs.python.org/tutorial/controlflow.html#for-statements)循环来完成的

python文档中的示例：

```
>>> # Measure some strings:
... words = ['cat', 'window', 'defenestrate']
>>> for w in words:
...     print w, len(w)
...
cat 3
window 6
defenestrate 12 
```

在上面的例子`len`中是一个内置函数。他们正在传递`w`给`len`函数。这与您需要对`traveler`函数执行的操作非常相似。
循环遍历`go`列表中的每个项目。将该项目传递给`traveler`

# c++ - 如何中断 C++ 程序

> ID：12991104
> 
> 赞同：1
> 
> 时间：2012-10-20T17:52:04.843
> 
> 标签：c++

这是程序的要点：

```
while(true)
{
//bunch of codes that gets data from port ,
//if there is no data it waits here .

} 
```

我正在使用 linux ，是否有对 Ctrl+C 等按键的内置支持。我可以使用 `signal(SIGINT, signal_callback_handler);`但 Ctrl+C 有一些问题，因为它给出了错误。

我想在按键上摆脱这个循环，这可能吗？如果是，该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:56:25.173

```
while(!_kbhit()){
    // do stuff here.
} 
```

在 Windows 上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:02:20.133

您可以发出中断信号

```
 #include <csignal>

      raise(SIGINT); 
```

或者

```
 raise(SIGABRT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:17:42.123

可以终止您的程序的函数是[`exit()`](http://www.cplusplus.com/reference/clibrary/cstdlib/exit/).

要输入您的 cicle 的提前终止，您可以使用[`break`](http://www.cplusplus.com/doc/tutorial/control/#jump_statements).

如果您愿意使用一些面向 C 的解决方案，我建议您看看[这个问题](https://stackoverflow.com/questions/6731317/c-exit-from-infinite-loop-on-keypress)。

对于与 linux 严格相关的内容，您可能应该参考[ncurses 库和 exit 函数](http://www.google.com/#q=c+++exit%28%29+ncurses&oq=c+++exit%28%29+ncurses)。

也不要假设特定的键组合等于终止，许多终端不是真正的终端而是仿真器，并且许多仿真器是由操作系统创建者和用户定制的。

# scala - 在 List[A] 上使用 forall 而不是过滤器

> ID：12991105
> 
> 赞同：0
> 
> 时间：2012-10-20T17:52:10.773
> 
> 标签：scala, filter, pattern-matching, tuples, forall

我正在尝试确定是否在每周比赛结果报告中显示加时赛显示标志。

数据库比赛结果表有 3 列 (p4,p5,p6)，表示潜在的加时赛期间总得分（分别为加时赛、双加时赛和三倍加时赛）。这些列映射到应用层中的 Option[Int]。

目前我正在过滤游戏结果 teamA、teamB 对，但实际上我只想知道是否存在任何类型的 OT 游戏（而不是逐步浏览集合）。

```
def overtimeDisplay(a: GameResult, b: GameResult) = {
  val isOT = !(List(a,b).filter(_.p4.isDefined).filter(_.p5.isDefined).filter(_.p6.isDefined).isEmpty)
  if(isOT) {
    <b class="b red">
    {List( ((a.p4,a.p5,a.p6),(b.p4,b.p5,b.p6)) ).zipWithIndex.map{
      case( ((Some(_),None,None), (Some(_),None,None)), i)=> "OT"
      case( ((Some(_),Some(_),None), (Some(_),Some(_),None )), i)=> "Double OT"
      case( ((Some(_),Some(_),Some(_)), (Some(_),Some(_),Some(_) )), i)=> "Triple OT"
    }}
    </b>
  }
  else scala.xml.NodeSeq.Empty
} 
```

其次，确定显示哪种类型的加班，当前是繁忙的模式匹配（现在看，它似乎并未涵盖所有评分场景），可能可以以更实用/更简洁的方式完成。

如果您有更好的方法，请随意放下它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:07:24.160

不确定我是否正确理解了初始代码，但这是一个想法：

```
val results = List(a, b).map(r => Seq(r.p4, r.p5, r.p6).flatten)
val isOT = results.exists(_.nonEmpty)
val labels = IndexedSeq("", "Double ", "Triple ")
results.map(p => labels(p.size - 1) + "OT") 
```

在这里将分数列转换为第一行的平面列表至关重要。你有`GameResult(p4: Option[Int], p5: Option[Int], p6: Option[Int])`它可以映射到`Seq[Option[Int]]`: `r => Seq(r.p4, r.p5, r.p6)`，然后变平以转向`Some[Int]`并`Int`摆脱`None`. 这将`Some(42), None, None`变成`Seq(42)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T18:10:51.290

看着这个：

```
val isOT = !(List(a,b).filter(_.p4.isDefined).filter(_.p5.isDefined).filter(_.p6.isDefined).isEmpty) 
```

这可以使用`exists`而不是重写`filter`。我将其重写如下：

```
List(a, b).exists(x => x.p4.isDefined && x.p5.isDefined && x.p6.isDefined) 
```

除了 using 之外`exists`，我还将您传递给过滤器的三个条件组合成一个匿名函数。

另外，我不知道您为什么要使用`zipWithIndex`它，因为之后您似乎没有在`map`函数中使用索引。它可以完全删除。

# java - 扩展 ArcGIS

> ID：12991111
> 
> 赞同：0
> 
> 时间：2012-10-20T17:52:45.547
> 
> 标签：java, python, visual-studio-2010, arcgis, arcobjects

我的任务是完成一个论文项目，我必须扩展 ArcGis 的功能。我被要求创建一个用 Python 编写的模型，该模型可以用完 ArcGIS 10。这个模型将有一个简单的用户界面，用户可以在其中拖放各种 shapefile 并输入特定变量的值，以便有效运行的模型。模型完成运行后，将创建一个新的 shapefile，其中列出了风力涡轮机从 A 点到 B 点的最具成本效益的集电极电缆路线。

我想知道 ArcGIS 中是否已经存在这样的功能/扩展，所以我不必重新发明轮子。如果不是，那么学习扩展 ArcGIS 的最佳编程语言是什么（Python vs Visual basic vs Java）。我的背景是 Java、PHP、Jquery 和 Javascript。此外，任何指向正确方向的指针，即文档、资源等，都将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T16:13:06.530

我每天都在为天然气、水和电力等公用事业公司定制 ArcGIS 进行日常工作。我们为他们创建了类似的按钮 - 从房屋侧面的燃气表点到最近的燃气主管线上的最近点绘制一条服务燃气管道，在该点拆分主管道，插入一个“T”点特征，并将服务线从“T”连接到仪表。

我们主要使用 C# 和一些 VB.net。您可能需要考虑为 ArcGIS Explorer 之类的东西创建 Python 插件。或者 ArcMap 的插件。Explorer 和 ArcMap 允许您将 shapefile 作为图层添加到地图中。加载项让您可以轻松地向工具栏添加一个按钮，该按钮可以对地图上的要素执行操作，例如查询它们的属性并修改它们的属性和几何以在地图上移动它们，以及创建新要素和填写属性并用 X、Y 或 Lat/Long 将它们放在地图上。

因此，您的“计算最佳电缆路线”工具可能是您在工具栏 (ICommand) 上创建的一个按钮，它首先会： 1\. 让用户使用 Explorer/ArcMap 中的内置选择工具在地图上选择点 A 和点 B。2.让用户点击你自定义的ICommand按钮。3\. 然后，您的 ICommand.OnClick() 方法将执行所有代码以根据地图上其他特征（如街道边缘、建筑物轮廓、属性线等）的几何形状尝试不同的路线，然后计算总成本（如挖泥土），沥青，并获得许可/通行权，以应对其越过财产线的情况。

请参阅此处的 ArcGIS ArcObjects API 以开始使用：http: [//help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/ICommand_Interface/00430000001s000000/](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/ICommand_Interface/00430000001s000000/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:16:33.823

您必须完全了解它应该如何工作以及该工具应该将所有输入和输出数据集、它们的结构、属性表字段等放在哪里。只有一个人知道所有这些东西——那就是你。而且它不是“轮子”，而是一种定制工具。您可以在内置模型构建器中构建模型（很棒的东西），然后将模型导出到 Python 脚本中。

查看此视频[http://www.youtube.com/watch?v=mBSXBqEP-7Y](http://www.youtube.com/watch?v=mBSXBqEP-7Y)

然后再次。你必须知道：1）输入数据集和参数 2）你想得到什么作为输出 3）它应该如何工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T17:37:26.310

如果您只想进行一些地理处理并将该工具部署给大量用户，那么创建 Python 插件可能是最快和最简单的方法。

但只要您需要一个用户界面（不仅仅是选择 GIS 数据源），您就应该创建一个 .Net 插件（使用 C# 或 VB.net）。

多年来，我创建了许多插件，它们是对涉及大量复杂 COM 注册的旧 ArcGIS“插件”的巨大改进。插件易于构建和部署。便于用户安装和卸载。

.Net 具有出色、强大的功能，可通过您需要的拖放操作创建丰富的用户界面。并且有很棒的书籍、论坛和示例可供利用。

# android - 当应用程序返回上一个活动时如何停止警报

> ID：12991113
> 
> 赞同：0
> 
> 时间：2012-10-20T17:52:50.723
> 
> 标签：android, commonsware-cwac

在我的应用程序中，我正在使用 commonsware 库根据警报设置获取地理位置，一切正常，但是当我按下后退按钮时，那时我想停止该警报并且不想获取地理位置。

我怎样才能做到这一点。下面是我用来根据警报获取位置的代码。

```
 private PendingIntent pendingIntent =null;
    private AlarmManager alarmManager =null;
    private void initLocationTracker()
    {
        try{
            mgr=(AlarmManager)getSystemService(ALARM_SERVICE);

            Intent i=new Intent(this, LocationPoller.class);

            i.putExtra(LocationPoller.EXTRA_INTENT,
                    new Intent(this, LocationReceiver.class));
            i.putExtra(LocationPoller.EXTRA_PROVIDER,
                    LocationManager.GPS_PROVIDER);

            pi=PendingIntent.getBroadcast(this, 0, i, 0);
            mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                    SystemClock.elapsedRealtime(),
                    PERIOD,
                    pi);

            Toast
                    .makeText(this,
                            "Location polling every 30 minutes begun",
                            Toast.LENGTH_LONG)
                    .show();

        }
        catch (Exception e)
        {
            String s = e.getMessage();
        }
    } 
```

# android - 创建全屏自定义 Toast

> ID：12991114
> 
> 赞同：14
> 
> 时间：2012-10-20T17:52:54.660
> 
> 标签：android, fullscreen, toast

我最近按照教程尝试了自定义 Toast：

[http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)

有了这样的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/toast_layout_root"
              android:orientation="horizontal"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:padding="8dp"
              android:background="#DAAA"
              >
    <ImageView android:src="@drawable/droid"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginRight="8dp"
               />
    <TextView android:id="@+id/text"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textColor="#FFF"
              />
</LinearLayout> 
```

但似乎根布局中的fill_parent没有效果。

您知道如何解决此问题以获得全屏 Toast 吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-20T18:35:18.160

在显示 Toast 之前添加：

```
toast.setGravity(Gravity.FILL, 0, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T18:45:08.117

要完全填充水平和垂直大小的吐司容器，您需要使用

[如Yoah](http://developer.android.com/reference/android/view/Gravity.html#FILL)的回答中提到的 Gravity.FILL 。

我尝试了以下并且它起作用了。

```
Toast toast = new Toast(getApplicationContext());
toast.setGravity(Gravity.FILL, 0, 0);
toast.setView(view); //inflated view
toast.setDuration(Toast.LENGTH_LONG);
toast.show(); 
```

# android - Android Eclipse：毁了我的模拟器加上无法检测到新的阿尔卡特手机

> ID：12991115
> 
> 赞同：1
> 
> 时间：2012-10-20T17:53:12.397
> 
> 标签：android

在过去的 36 小时里，我已经成功地将我的 Eclipse 设置从能够运行我的应用程序，到现在甚至无法正确启动模拟器。

我认为它始于我修改了 AVD 的 SD 卡大小并添加了一个摄像头。从那以后，我删除了 AVD 并重新创建了它们。但是 eclipse 现在需要 20-30 分钟来启动模拟器，并且在尝试安装我的 apk 时失败。当模拟器最终运行时，我找不到我的应用程序，所以它不像安装，只是无法启动。

我还买了一部新的阿尔卡特 Onetouch 918n 手机。经过一些痛苦的步骤，我现在在设备管理器中看到“Alcatel Android ADB interface”。但我似乎无法让这款手机对 Eclipse/ddms/adb 可见。

我没有很多日志要粘贴在这里——不知道我应该包括什么。帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:12:11.470

您是否尝试过创建一个新的虚拟机？很多时候更改 sd 卡值等也会导致加载时间更长，您也可以导出到 .apk 并手动将其加载到手机上进行测试（繁琐）。

# java - Windows 关机时的 Java 退出

> ID：12991116
> 
> 赞同：1
> 
> 时间：2012-10-20T17:53:37.823
> 
> 标签：java, exit

我有这个代码。如果它检测到计算机正在关闭，我想退出我的 Java 应用程序。我有这个问题，如果在 Windows 上单击关机，我的 java 应用程序会断开与 android 应用程序的连接。我想显示 java 应用程序已断开连接，否则将退出。

```
//  Copyright 2012
//  Android Remote Desktop Server Ver. 1.0

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.util.Random;

public class ServerWindow implements ActionListener{

    private RemoteDataServer server;

    private Thread sThread; //server thread

    private static final int WINDOW_HEIGHT = 200;
    private static final int WINDOW_WIDTH = 350;

    private String ipAddress;

    private JFrame window = new JFrame("Remote Control for Android");

    private JLabel addressLabel = new JLabel("");
    private JLabel portLabel = new JLabel("Android Remote Control Port: ");
    private JTextArea[] buffers = new JTextArea[3];
    private JTextField portTxt = new JTextField(5);
    private JLabel serverMessages = new JLabel("Not Connected");

    private JButton connectButton = new JButton("Start Server");
    private JButton disconnectButton = new JButton("Stop Server");

    public boolean connected = false;

    //@SuppressWarnings("deprecation")
    public ServerWindow(){
        server = new RemoteDataServer();

        window.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        connectButton.addActionListener(this);
        disconnectButton.addActionListener(this);

        Container c = window.getContentPane();
        c.setLayout(new FlowLayout());

        try{
            InetAddress ip = InetAddress.getLocalHost();
            ipAddress = ip.getHostAddress();
            addressLabel.setText("Android Remote Control Server IP Address: "+ipAddress);
        }
        catch(Exception e){addressLabel.setText("IP Address Could Not be Resolved");}

        int x;
        for(x = 0; x < 3; x++){
            buffers[x] = new JTextArea("", 1, 30);
            buffers[x].setEditable(false);
            buffers[x].setBackground(window.getBackground());
        }

        portTxt.setEditable(false);
        Random portRandom = new Random();
        for (int i = 0; i < 10; i++) {

          int port = portRandom.nextInt(4998) + 1;
          int portNum = 5000+port;
          String portString = Integer.toString(portNum);
          portTxt.setText(portString);
          }

        c.add(addressLabel);
        c.add(buffers[0]);
        c.add(portLabel);
        //portTxt.setText("5444");
        c.add(portTxt);
        c.add(buffers[1]);
        c.add(connectButton);
        c.add(disconnectButton);
        c.add(buffers[2]);
        c.add(serverMessages);

        window.setLocationRelativeTo(null);
        window.setVisible(true);
        window.setResizable(false);

    }

    public void actionPerformed(ActionEvent e){
        Object src = e.getSource();

        if(src instanceof JButton){
            if((JButton)src == connectButton){
                int port = Integer.parseInt(portTxt.getText());
                runServer(port);
            }

            else if((JButton)src == disconnectButton){
                closeServer();
            }
        }
    }

    public void runServer(int port){
        if(port <= 9999){
            server.setPort(port);
            sThread = new Thread(server);
            sThread.start();
        }
        else{
            serverMessages.setText("The port Number must be less than 10000");
        }
    }

    public void closeServer(){
        serverMessages.setText("Disconnected");
        server.shutdown();
        connectButton.setEnabled(true);
    }

    public static void main(String[] args){
        new ServerWindow();
    }

    public class RemoteDataServer implements Runnable{
        int PORT;
        private DatagramSocket server;
        private byte[] buf;
        private DatagramPacket dgp;

        private String message;
        private AutoBot bot;

        public RemoteDataServer(int port){
            PORT = port;
            buf = new byte[1000];
            dgp = new DatagramPacket(buf, buf.length);
            bot = new AutoBot();
            serverMessages.setText("Not Connected");
        }

        public RemoteDataServer(){
            buf = new byte[1000];
            dgp = new DatagramPacket(buf, buf.length);
            bot = new AutoBot();
            serverMessages.setText("Not Connected");
        }

        public String getIpAddress(){
            String returnStr;
            try{
                    InetAddress ip = InetAddress.getLocalHost();
                    returnStr = ip.getCanonicalHostName();
            }
            catch(Exception e){ returnStr = new String("Could Not be Resolve Ip Address");}
            return returnStr;
        }

        public void setPort(int port){
            PORT = port;
        }

        public void shutdown(){
            try{server.close();
                serverMessages.setText("Disconnected");}
            catch(Exception e){}
        }
        public void run(){
            //boolean connected = false;
            try {InetAddress ip = InetAddress.getLocalHost(); 
                serverMessages.setText("Waiting for connection on " + ip.getCanonicalHostName());

                server = new DatagramSocket(PORT, ip);

                connected = true;
                connectButton.setEnabled(false);
            }
            catch(BindException e){ serverMessages.setText("Port "+PORT+" is already in use. Use a different Port"); }
            catch(Exception e){serverMessages.setText("Unable to connect");}

            while(connected){
                //Runtime.getRuntime().exit(0);
                // get message from sender
                try{ server.receive(dgp);

                    // translate and use the message to automate the desktop
                    message = new String(dgp.getData(), 0, dgp.getLength());
                    if (message.equals("Connectivity")){
                        //send response to confirm connectivity
                        serverMessages.setText("Trying to Connect");
                        server.send(dgp); //echo the message back
                    }else if(message.equals("Connected")){
                        server.send(dgp); //echo the message back
                    }else if(message.equals("Close")){
                        serverMessages.setText("Controller has Disconnected. Trying to reconnect."); //echo the message back
                    }else{
                        serverMessages.setText("Android Phone Connected to ARD Server");
                        bot.handleMessage(message);
                    }
                }catch(Exception e){
                    serverMessages.setText("Disconnected");
                    connected = false;}
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T18:12:02.670

假设您要问的问题是“如何检测 Windows 何时关闭”，您可以这样做：

您需要一个所谓的“系统关闭挂钩”，它本质上是一个线程，只要 Java 虚拟机关闭，就会执行其 run() 方法。当您的程序终止或由于系统范围的事件（例如用户注销或关闭）时，会发生这种情况。

您需要做的就是将这段代码放在程序启动过程中的某个位置：

```
Runtime.getRuntime().addShutdownHook(
    new Thread(new Runnable() {
        @Override
        public void run() {
            // this is executed on shut-down. put whatever.
        }
    })); 
```

我希望这回答了你的问题。

# c# - 实体数据继承

> ID：12991128
> 
> 赞同：0
> 
> 时间：2012-10-20T17:54:57.823
> 
> 标签：c#, .net, linq-to-entities

我目前参与了一个项目，我们将向访问者展示来自外部数据源的数据，但我们还将为实体提供元数据/重写一些原始数据。

外部数据源是一个 SQL Server 数据库，我从中创建了一个 .edmx 文件，并使用它自己的 .edmx 文件创建了一个附加的、可控的 SQL Server 数据库。但我不习惯使用两个实体来处理在我看来是一种类型的数据。

不知何故，我想将两个数据源合并为一个，并且只使用一个我可以查询的实体类。LINQ to Entities 中的继承将是完美的，但我不希望手动更改 .edmx 文件。

就像现在一样，我必须创建包装类并使用实体类手动填充它们，或者使用多个数据库查询来获取所需的数据，这在性能方面是一个很大的障碍。

对于我面临的这些问题，感觉必须存在某种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:59:20.367

您在这里有两个选择。

*   首先，您可以使用部分类来扩展实体框架类。它将帮助您避免更改生成的类。

*   其次，您可以先使用实体​​框架代码，我建议您这样做，因为您将对实体有更多控制权。

# java - 读取/写入文件不写入输出

> ID：12991136
> 
> 赞同：0
> 
> 时间：2012-10-20T17:55:39.817
> 
> 标签：java, file-io, outputstream, printwriter

我正在编写一个从一个文件读取输入的程序，然后该程序将格式化数据并将其写入另一个文件。

输入文件：

> Christopher kardaras,10 N Brainard,Naperville,IL,60566 George Washington,30 W Jackson,Chicago,IL,60060

输出文件：

> Christopher kardaras 10 N Brainard Naperville, IL 60566
> 
> 乔治华盛顿 30 W 杰克逊 芝加哥，IL 60060

当我运行代码时，输​​出文件中没有显示输出，以下是我的代码。

```
 //open input, output files
    FileReader freader = new FileReader("AddressData.txt");
    BufferedReader inFile = new BufferedReader(freader);

    FileWriter fwriter=new FileWriter("FormattedData.text");
    PrintWriter outFile= new PrintWriter (fwriter);

    //process data - get a line, separate into fields, then print
    //address label to the output file

    line= inFile.readLine();
    while (line != null)
    {
        //Create a new scanner, use comma as field separator
        Scanner s = new Scanner(line).useDelimiter(",");

        // SOME CODE OMITTED HERE FOR BREVITY
        out.printf(...);

        //get the next line. read failure (EOF) will exit the loop
        line = inFile.readLine();
    }

    //clean up
    inFile.close();
    outFile.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:56:38.180

在关闭它之前尝试[刷新](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintWriter.html#flush%28%29)outFile。

```
outFile.flush(); 
```

您还可以使用[替代的 PrintWriter 构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.OutputStream,%20boolean%29)来为您处理：

```
public PrintWriter(OutputStream out, boolean autoFlush) 
```

# opengl - D glGenVertexArrays 没有 GLEW

> ID：12991137
> 
> 赞同：1
> 
> 时间：2012-10-20T17:56:03.753
> 
> 标签：opengl, d, glew

我想在我的程序中完全使用 OpenGL 3.3，但是`glGenVertexArrays`没有一些特殊的初始化就会出现段错误。我查看了 GLEW 源代码，但找不到它的工作原理。

我尝试绑定到 GLEW，但 OPTLINK 要么说库无效（使用 VS2012 编译时），要么找不到符号（`uint glewInit()`在使用 implib 转换为 lib 的 MinGW dll 中）。

如果只需要几行就可以完成 GLEW 的工作（我想我不需要 1000 行函数获取）我想自己做，当它太多时，我会很感激在构建一个 D 实际上的库方面的帮助接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:08:14.997

这是一个好的开始：[http ://www.opengl.org/wiki/Load_OpenGL_Functions](http://www.opengl.org/wiki/Load_OpenGL_Functions)

按照链接到 OpenGL 注册表：[http ://www.opengl.org/registry/](http://www.opengl.org/registry/)

在这里，您可以找到适用于您平台的有用头文件。不过，我建议使用 GLEW 或类似的库。

# asp.net - 我是初学者，我正在用 ASP.NET 制作会议管理系统，所以我想在我的项目中使用 TimePicker

> ID：12991139
> 
> 赞同：-1
> 
> 时间：2012-10-20T17:56:11.897
> 
> 标签：asp.net

我是一名初学者，我正在用 ASP.NET 制作会议管理系统，所以我想使用 TimePicker 以及如何将`listbox1`项目传输到`listbox2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:00:43.910

逻辑是这样的：

```
 if (list1.SelectedItem != null)  
    {  
    ListItem li = listLeft.SelectedItem;  
    list1.Items.Remove(li);  //if u want remove from list1
    li.Selected = false;  
    list2t.Items.Add(li);  
} 
```

# networking - IPv4 标头帧

> ID：12991144
> 
> 赞同：-1
> 
> 时间：2012-10-20T17:56:48.590
> 
> 标签：networking, header, ethernet, ipv4

我需要整理一些关于 IPv4 标头的内容。例如，以下帧带有以太网-II 帧，IPv4 数据包从第十五字节开始。

0000: 08 00 20 7c 94 1c 00 00 - 39 51 90 37 08 00 45 00

0010: 00 3e 36 00 00 00 80 11 - da 4f 82 eb 12 7f 82 eb

0020: 12 0a 04 01 00 35 00 2a - ee 6a 00 01 01 00 00 01

0030：00 00 00 00 00 00 06 67 - 65 6d 69 6e 69 03 6c 64

0040: 63 02 6c 75 02 73 65 00 - 00 01 00 01

我需要整理一些东西：

1.  左边的 0000 & 0010 & 0020 & 0030 代表什么？
2.  我只是无法解决它是 1 对，例如第一个 08 两位还是？
3.  如果 IPv4 从第 15 个字节（1 个字节 = 8 位）开始，那么它从哪里开始，理解这一点会有问题，因为我没有得到 2 号。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:02:45.223

hexdump 的第一行中的“45”是 ip 标头的第一个字节（以太网帧的第 15 个字节）。每行是 16 个字节。

此外，在每行的开头都有一个偏移量，例如“0010：”（十六进制）表示从整个转储开始的起始偏移量。

您的第一行将是，（共 16 个字节），
dmac(6)+smac(6)+etype(2)+ first2byte_of_ip(2)

并且您的 ip 的第一个字节是十六进制“45”，您可以在 wikipedia 中查找详细的 ip 标头字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T18:47:50.797

如果您可以自己阅读[wireshark 用户指南](http://www.wireshark.org/docs/wsug_html_chunked/)，那就太好了。无论如何，回答你的问题，

1) 左边的 0000 & 0010 & 0020 & 0030 代表什么？

它代表 hexdump 偏移量。你可以参考[这个](http://www.wireshark.org/docs/wsug_html_chunked/ChUsePacketBytesPaneSection.html)页面。

2）我只是不能把它整理出来是 1 对，例如第一个 08 两位还是？

它是（部分）目标 MAC 地址。整个 MAC 地址应该是`08 00 20 7c 94 1c`.

3）由于现在回答了 Q2，这对您来说应该不是问题。

# c# - MVC4 中的部分模型验证

> ID：12991155
> 
> 赞同：3
> 
> 时间：2012-10-20T17:58:12.890
> 
> 标签：c#, asp.net-mvc, validation, asp.net-mvc-4

我有一个`PartialView`用于创建或修改用户并实现 ViewModel 的表单`DynamicActionUserModel`。引用此 partialView 的视图显示了一个表，`MembershipUsers`并提供了创建新用户`Membership.CreateUser()`或修改用户“Membership.UpdateUser()”的能力。partialView 中的表单向我的控制器发送 ajax 以提交数据。

我遇到的问题是，当创建用户时，他们的用户名、电子邮件、*密码*和角色被序列化回控制器`DynamicActionUserModel.RegisterModel`并进行验证，但是当用户被修改时，密码不是可用的属性（也不是我想让它可以在客户端修改）所以它没有设置`DynamicActionUserModel.RegisterModel`并且`ModelState.IsValid`总是错误的。

也许我的模型和视图的设计需要更改，或者有没有办法验证模型但在修改用户时忽略密码？不确定这个的最佳实践是什么。

我想另一种选择是创建另一个 ViewModel 和另一个 partialView 专门用于修改用户，但这似乎很草率。

**模型**

```
public class DynamicActionUserModel {
    public string Action { get; set; }
    public RegisterModel RegisterModel { get; set; }
}

public class RegisterModel {
    [Required]
    [Display(Name = "User Name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    public string[] SelectedRoles { get; set; }
    public MultiSelectList Roles { get; set; }

} 
```

**控制器**

```
[HttpGet]
public ActionResult CreateUser() {
    var model = new DynamicActionUserModel {
        Action = "CreateUser",
        RegisterModel = new RegisterModel {
            Roles = new MultiSelectList(System.Web.Security.Roles.GetAllRoles())
        }
    };

    return PartialView("_UserPartial", model);
}

[HttpGet]
public ActionResult ModifyUser() {
    var model = new DynamicActionUserModel {
        Action = "ModifyUser",
        RegisterModel = new RegisterModel {
            Roles = new MultiSelectList(System.Web.Security.Roles.GetAllRoles())
        }
    };

    return PartialView("_UserPartial", model);
}

[HttpPost]
public ActionResult ModifyUser(DynamicActionUserModel model) {
    bool isEqual = true;

    if(!ModelState.IsValid) { // this is always false because password is empty
        return PartialView("_UserPartial", model);
    }

    var user = Membership.GetUser(model.RegisterModel.UserName);
    // do stuff
    Membership.UpdateUser(user);

    return Json(new {success = false});
} 
```

**看法**

```
@using RobotDog.Models
@model IEnumerable<RobotDog.Models.UserModel>

<!-- table of users -->
<div class="modify-form">
    @Html.Action("ModifyUser")
</div>
<div class="create-user-form">
    @Html.Action("CreateUser")
</div> 
```

**部分视图**

```
@model RobotDog.Models.DynamicActionUserModel

@using(Html.BeginForm(Model.Action,"Admin", FormMethod.Post, new { @class = "ajax" })) {
    <!-- Email -->
    @Html.TextBoxFor(x => x.RegisterModel.Email, new { @class = inputSize, placeholder = "Email"})

    <!-- UserName -->
    @if(Model.Action == "ModifyUser") {
        @Html.HiddenFor(x => x.RegisterModel.UserName)
        <span class="input-xlarge uneditable-input">@Html.DisplayNameFor(x => x.RegisterModel.UserName)</span>
    } else {
        @Html.TextBoxFor(x => x.RegisterModel.UserName, new { @class = inputSize, placeholder = "User Name" })
    }

    <!-- Password -->
    @if(Model.Action == "Createuser") {
        @Html.PasswordFor(x => x.RegisterModel.Password, new { @class = inputSize, placeholder = "Password"})
    }

    <!-- Roles -->
    @Html.ListBoxFor(x => x.RegisterModel.SelectedRoles, Model.RegisterModel.Roles)

    <!-- Submit -->
    <input type="submit" value="Submit" class="btn"/>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:09:56.837

`ModelState.Remove("password")`在调用之前尝试使用`ModelState.IsValid`，但如[这里](https://stackoverflow.com/a/6843241/118447)建议的那样，如果并非总是需要某个属性，则不应将其标记为必需。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:18:26.793

你看过[`ModelState.IsValidField`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.isvalidfield%28v=vs.90%29.aspx)吗？

> 注意：即使从 MVC4 开始，文档也​​是倒退的，应该说：
> 
> 确定是否有任何与指定键关联或带有前缀的 ModelError 对象。

我为此做了一个小扩展方法助手：

```
public static class ModelStateHelpers
    {
        public static bool IsValidFor<TModel, TProperty>(this TModel model,
                                                         System.Linq.Expressions.Expression<Func<TModel, TProperty>> expression,
                                                         ModelStateDictionary modelState)
        {
            string name = ExpressionHelper.GetExpressionText(expression);

            return modelState.IsValidField(name);
        }
    } 
```

用法很简单：

```
 bool billingValid = model.IsValidFor(x => x.CheckoutModel.BillingAddress, ModelState); 
```

# html - 设置输入文本框字体大小等于输入文本框高度

> ID：12991156
> 
> 赞同：3
> 
> 时间：2012-10-20T17:58:16.197
> 
> 标签：html, css, font-size

好的，我基本上有一个`.search_bar_container`如下所示的课程：

```
#search_bar_container{
    width: 81%;
    overflow: hidden;
    z-index: 1;
    position: absolute;
    top: 45%;
    left: 13.3%;
    height: 10%;
} 
```

还有一个`.search_bar`类：

```
#search_bar{
    width: 80%;
    height: 99%;
    font-family: cursive;
    font-size: vh;
    box-shadow: 1px 1px 5px black;
} 
```

接下来我的 HTML 看起来像这样

```
<div id='search_bar_container'><input id='search_bar'/></div> 
```

**问题**
我的问题是如何将搜索栏的字体大小设置为等于搜索栏的高度？到目前为止我尝试过的事情：100％......嗯我不知道为什么这对于设置相对于文本框的字体大小不起作用。100vh ...将大小设置为主体的 100%...任何方式我都可以更改视口并将其设置为 search_bar 容器...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-08T15:54:34.093

我知道已经很晚了，但我想与您分享我的解决方案。我使用 JavaScript 在页面加载和调整页面大小时更改输入字体。设置`font-size`为`offsetHeight`输入。然后字体大小将等于输入高度。我认为文本不适合，这就是为什么我使用 70% 的高度，如下所示：

```
//when window changes its size, make text fit again
window.onresize = function(event) {
    document.getElementById("username").style.fontSize = (document.getElementById("username").offsetHeight*0.7) + "px";
    document.getElementById("password").style.fontSize = (document.getElementById("password").offsetHeight*0.7) + "px";
};

//when page loads make text fit text box
function myFunction(){
document.getElementById("username").style.fontSize = (document.getElementById("username").offsetHeight*0.7) + "px";
document.getElementById("password").style.fontSize = (document.getElementById("password").offsetHeight*0.7) + "px";
}
```

```
#username{
width:85%;
height:100px;
font-size:25px;
padding-left:20px;
padding-right:20px;
}

#password{
width:85%;
height:50px;
font-size:25px;
padding-left:20px;
padding-right:20px;
}

body{
text-align:center;
}
```

```
<html>
<body onload="myFunction()">
<p><input type="text" id="username" placeholder="Username"/></p>
<p><input type="password" id="password" placeholder="Password"/></p>
</body>
</html>
```

如果要将字体大小设置为大于或小于输入高度的 70%，请将 0.7 更改为所需的数字。

# html - Haml to Html，如何为父标签分配正确的值？

> ID：12991159
> 
> 赞同：0
> 
> 时间：2012-10-20T17:58:21.220
> 
> 标签：html, ruby-on-rails, haml

我是网络开发新手。下面我有一个haml代码

```
%th
    %a#title_header
        %a{:th => ("hilite" if @sort == "title")}= link_to 'Movie Title', :sort => "title" 
```

这给了我以下 HTML

```
<th>
   <a id='title_header'>
       <a th='hilite'><a href="/movies?sort=title">Movie Title</a></a>
   </a>
</th> 
```

虽然我想要得到的是

```
<th class='hilite'>
    <a id='title_header'><a href="/movies?sort=title">Movie Title</a></a>
</th> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:57:50.733

这与我的回答非常相似：[Add dynamic attributes to HAML tag using helper method in rails](https://stackoverflow.com/questions/10902377/adding-dynamic-attributes-to-haml-tag-using-helper-method-in-rails/10908734#10908734)

在你的情况下，它应该是这样的：

```
%th{:class => if @sort == 'title' then 'hilite' end}
    %a#title_header
        %a= link_to 'Movie Title', :sort => "title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:31:07.193

```
%th.hilite
  %a#title_header
    %a{:href => "/movies?sort=title"} Movie Title 
```

顺便说一下，有一个名为[http://html2haml.heroku.com/](http://html2haml.heroku.com/)的项目，看看吧！

# ampersand - 和号的含义

> ID：12991162
> 
> 赞同：0
> 
> 时间：2012-10-20T17:58:38.233
> 
> 标签：ampersand

在这一行：

```
var dataString = 'name='+ name + '&email=' + email + '&subject=' + subject + '&msg=' + msg; 
```

和号( `&`) 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:03:23.913

我认为＆符号是为了**查询字符串**彼此分离

```
var dataString = 'name='+ name + '&email=' + email + '&subject=' + subject + '&msg=' + msg; 
```

变成

```
var dataString = 'name=John Doe&email=johndoe@gmail.com&subject=some email subject&msg=hey activate your account'; 
```

然后可以将其附加到您的网址

```
var finalUrl = "http://mysite.com?" + dataString; 
```

# css - 在 CSS3 动画结束时保持最终状态

> ID：12991164
> 
> 赞同：417
> 
> 时间：2012-10-20T17:58:48.467
> 
> 标签：css, css-animations

我`opacity: 0;`在 CSS 中设置的某些元素上运行动画。动画类在单击时应用，并且使用关键帧将不透明度从 更改`0`为`1`（除其他外）。

不幸的是，当动画结束时，元素会返回`opacity: 0`（在 Firefox 和 Chrome 中）。我的自然想法是动画元素保持最终状态，覆盖它们的原始属性。这不是真的吗？如果没有，我怎样才能让元素这样做？

代码（不包括前缀版本）：

```
@keyframes bubble {
    0%   { transform:scale(0.5); opacity:0.0; }
    50%  { transform:scale(1.2); opacity:0.5; }
    100% { transform:scale(1.0); opacity:1.0; }
} 
```

* * *

## 回答 #1

> 赞同：713
> 
> 时间：2012-10-20T18:02:03.970

尝试添加`animation-fill-mode: forwards;`. 例如像这样：

```
-webkit-animation: bubble 1.0s forwards; /* for less modern browsers */
        animation: bubble 1.0s forwards; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-01-14T00:28:01.623

如果您使用更多动画属性，则简写为：

```
animation: bubble 2s linear 0.5s 1 normal forwards; 
```

这给出了：

*   `bubble`动画名称
*   `2s`期间
*   `linear`计时功能
*   `0.5s`延迟
*   `1`迭代计数（可以是 ' `infinite`'）
*   `normal`方向
*   `forwards`填充模式（如果您想具有兼容性以使用结束位置作为最终状态，请设置“向后”[这是为了支持关闭动画的浏览器]{并且只回答标题，而不是您的具体情况}）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-09-11T22:03:16.863

**如果不使用短手版本：**确保`animation-fill-mode: forwards`在动画声明**之后**，否则它将不起作用...

```
animation-fill-mode: forwards;
animation-name: appear;
animation-duration: 1s;
animation-delay: 1s; 
```

对比

```
animation-name: appear;
animation-duration: 1s;
animation-fill-mode: forwards;
animation-delay: 1s; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-09-20T16:22:06.817

使用 **动画填充模式：转发；**

```
animation-fill-mode: forwards; 
```

该元素将保留最后一个关键帧设置的样式值（取决于动画方向和动画迭代计数）。

注意：Internet Explorer 9 和更早版本不支持 @keyframes 规则。

**工作示例**

```
div {
  width: 100px;
  height: 100px;
  background: red;
  position :relative;
  -webkit-animation: mymove 3ss forwards; /* Safari 4.0 - 8.0 */
  animation: bubble 3s forwards;
  /* animation-name: bubble; 
  animation-duration: 3s;
  animation-fill-mode: forwards; */
}

/* Safari */
@-webkit-keyframes bubble  {
  0%   { transform:scale(0.5); opacity:0.0; left:0}
    50%  { transform:scale(1.2); opacity:0.5; left:100px}
    100% { transform:scale(1.0); opacity:1.0; left:200px}
}

/* Standard syntax */
@keyframes bubble  {
   0%   { transform:scale(0.5); opacity:0.0; left:0}
    50%  { transform:scale(1.2); opacity:0.5; left:100px}
    100% { transform:scale(1.0); opacity:1.0; left:200px}
}
```

```
<h1>The keyframes </h1>
<div></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-10T09:54:23.533

我在使用`forwards`: 时遇到了一个问题，至少在 Chrome 中，即使在动画结束后，渲染器仍在消耗图形资源，从而使应用程序的响应速度降低。

一种不会导致此问题的方法是使用`EventListener`.

CSS 动画会发出事件，因此您可以使用[animationend](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/animationend_event)事件在动画结束时进行干预。

**CSS**

```
.fade_in {
  animation: fadeIn 2s;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
} 
```

**JavaScript**

```
const element = document.getElementById("element-to-be-animated");

element.addEventListener("animationend", () => {
    // Set your final state here. For example:
    element.style["opacity"] = 1;
}, { once: true }); 
```

该选项`once: true`告诉引擎在执行后删除事件侦听器，使您的应用程序保持新鲜和干净。

我创建了一个[JSFiddle](https://jsfiddle.net/bazso19h/)来展示它是如何工作的。

# android - 在 .NET 中使用 Gson json 字符串

> ID：12991165
> 
> 赞同：1
> 
> 时间：2012-10-20T17:58:49.213
> 
> 标签：android, .net, json, gson, jayrock

我有一个 android 手机应用程序，它必须与 asp.net web api 服务交换数据。我选择使用 JSON。在手机应用程序中，我将对象序列化为 GSON JSON 字符串。现在在服务器上，我需要将 gson json 字符串转换回对象。

我应该在服务器端使用什么？我看过较早的帖子说 Jayrock 是要走的路。是吗？

我将在双方进行序列化和反序列化。我也听说有一些关于日期的问题。谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:09:22.457

我使用 JSON.net 库。它工作得很好。这是链接：http: [//james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# facebook - 如何控制 Facebook Feed 对话框中的用户提示

> ID：12991169
> 
> 赞同：1
> 
> 时间：2012-10-20T17:59:09.680
> 
> 标签：facebook, facebook-javascript-sdk, facebook-ui

[有没有一种方法可以使用 Javascript SDK 在 facebook 提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)中控制用户提示（默认为“Say some about this...”）？

我不想为用户预填充内容，我只想给他们一个更好的方向（“让你的朋友知道 lorem ipsum dolor sit amet...”）。

似乎有一个属性`user_message_prompt`，但它似乎不起作用。我认为它已被弃用。

很抱歉在这里发布这样一个一般性问题 - 我发现 FB 的 API 文档并不总是有帮助（这里的 FB 人员没有冒犯，他们非常有帮助！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:19:04.270

恐怕这是**不可能的**。为什么不在启动对话框和号召性用语按钮之前传达您的信息？

# c - 哈希表排序和执行时间

> ID：12991170
> 
> 赞同：0
> 
> 时间：2012-10-20T17:59:11.257
> 
> 标签：c

我编写了一个程序来使用哈希表计算频率字数，但我不知道如何对其进行排序。

我使用 struct 来存储值和计数。

我的哈希码生成函数正在使用模块，而我的哈希表正在使用链表。

1.我的问题是如何按频率对它们进行排序？

2.我想知道为什么我打印的执行时间总是为零，但我检查了很多次。错在哪里？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>
#include <ctype.h>

#define  HASHSIZE 29989 
#define  FACTOR 31
#define  VOCABULARYSIZE 30
typedef struct HashNode HashNode;
struct HashNode{
    char* voc;//vocabulary
    int freq;//frequency
    struct HashNode *next;//pointed to the same hashcode 
                          //but actually are different numbers
};

HashNode *HashTable[HASHSIZE] = {NULL,0,NULL};//an array of pointers

unsigned int HashCode(const char *pVoc){//generate hashcode
    unsigned int index = 0;
    int n = strlen(pVoc);
    int i = 0;
    for(; i < n; i ++)
        index = FACTOR*index + pVoc[i];
    return index % HASHSIZE;
}

void InsertVocabulary(const char *pVoc){//insert vocabulary to hash table
    HashNode *ptr;
    unsigned int index = HashCode(pVoc);
    for(ptr = HashTable[index]; ptr != NULL; ptr = ptr -> next){//search if already exist
        if(!strcmp (pVoc, ptr -> voc)){
            (ptr->freq)++;
            return;          
        }        
    }
    ptr = (HashNode*)malloc(sizeof(HashNode));//if doesn't exist, create it
    ptr -> freq = 1; 
    ptr -> voc = (char*)malloc(strlen(pVoc)+1);
    strcpy(ptr -> voc, pVoc);
    ptr -> next = HashTable[index];
    HashTable[index] = ptr;
}

void ReadVocabularyTOHashTable(const char *path){
    FILE *pFile;
    char buffer[VOCABULARYSIZE];
    pFile = fopen(path, "r");//open file for read
    if(pFile == NULL)
        perror("Fail to Read!\n");//error message
    char ch;
    int i =0;
    do{
        ch = fgetc(pFile);
        if(isalpha(ch))
            buffer[i++] = tolower(ch);//all convert to lowercase                
        else{
            buffer[i] = '\0';//c-style string
            i = 0;
            if(!isalpha(buffer[0]))
                continue;//blank line
            else //printf("%s\n",buffer);
                InsertVocabulary(buffer);
        }
    }while(ch != EOF);
    fclose(pFile);
}

void WriteVocabularyTOHashTable(const char *path){
    FILE *pFile;
    pFile = fopen(path, "w");
    if(pFile == NULL)
        perror("Fail to Write\n");
    int i = 0;
    for(; i < HASHSIZE; i++){
        HashNode *ptr = HashTable[i];
        for(; ptr != NULL; ptr = ptr -> next){
            fprintf(pFile, "Vocabulary:%s,Count:%d\n", ptr -> voc, ptr -> freq);
            if(ptr -> next == NULL)
                fprintf(pFile,"\n");
        }
    }
    fclose(pFile);
}

int main(void){
    time_t start, end;
    time(&start);
    ReadVocabularyTOHashTable("test.txt");
    WriteVocabularyTOHashTable("result.txt");
    time(&end);
    double diff = difftime(end,start);
    printf("%.21f seconds.\n", diff); 
    system("pause");
    return 0;     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:43:56.523

这是您的第一个问题的答案，按频率排序。表中的每个哈希节点都是一个不同的词汇条目。一些哈希到相同的代码（因此您的冲突链），但最终每个*唯一*条目都有一个 HashNode。要在对现有代码的干扰最小的情况下按频率对它们进行排序，您可以相对轻松地将 qsort() 与指针列表（或您选择的任何其他类型）一起使用。

注意：最*有效*的方法是在 vocab-insert 期间维护一个排序的链表，您可能需要考虑这一点。此代码假设您已经填充了一个哈希表，并且需要按照从高到低的排序顺序获取频率。

首先，记录所有独特的插入。很简单，只需在分配小节中添加一个计数器：

```
gVocabCount++; // increment with each unique entry.
ptr = (HashNode*)malloc(sizeof(HashNode));//if doesn't exist, create it
ptr -> freq = 1; 
ptr -> voc = (char*)malloc(strlen(pVoc)+1);
strcpy(ptr -> voc, pVoc);
ptr -> next = HashTable[index];
HashTable[index] = ptr; 
```

接下来分配一个指向 HashNodes 的指针列表，该列表与您的唯一词汇总数一样大。然后遍历整个哈希表，包括碰撞链，并将每个节点放入此列表中的一个槽中。该列表*最好*与您的总节点数相同，否则您做错了什么：

```
HashNode **nodeList = malloc(gVocabCount * sizeof(HashNode*));

int i;
int idx = 0;
for (i=0;i<HASHSIZE;++i)
{
   HashNode* p = HashTable[i];
   while (p)
   {
       nodeList[idx++] = p;
       p = p->next;
   }
} 
```

所以现在我们有了一个所有唯一节点指针的列表。我们需要一个比较函数来发送到 qsort()。我们希望具有*最大*数字的项目位于列表的首位。

```
int compare_nodeptr(void* left, void* right)
{
    return (*(HashNode**)right)->freq - (*(HashNode**)left)->freq;
} 
```

最后，触发 qsort() 对指针列表进行排序。

```
qsort(nodeList, gVocabCount, sizeof(HashNode*), compare_nodeptr); 
```

HashNode 指针的 nodeList 数组将使所有节点按降序排列：

```
for (i=0; i<gVocabCount; ++i)
   printf("Vocabulary:%s,Count:%d\n", nodeList[i]->voc, nodeList[i]->freq); 
```

最后，不要忘记释放列表：

```
free(nodeList); 
```

正如我在开头所说的，最有效的方法是使用一个排序的链表，该链表提取一个递增的值（根据定义，所有新条目都可以到末尾）并运行插入排序以将其滑回正确的地方。最后，该列表看起来与上面的代码将创建的几乎相同（无法承受类似计数顺序；即 a->freq = 5 和 b->freq = 5，ab 或 ba 都可能发生）。

希望这可以帮助。

**编辑**：更新以向 OP 展示输出排序数据的 Write 函数可能是什么样子的想法：

```
static int compare_nodeptr(const void* left, const void* right)
{
    return (*(const HashNode**)right)->freq - (*(const HashNode**)left)->freq;
}

void WriteVocabularyTOHashTable(const char *path)
{
    HashNode **nodeList = NULL;
    size_t i=0;
    size_t idx = 0;

    FILE* pFile = fopen(path, "w");
    if(pFile == NULL)
    {
        perror("Fail to Write\n");
        return;
    }

    nodeList = malloc(gVocabCount * sizeof(HashNode*));
    for (i=0,idx=0;i<HASHSIZE;++i)
    {
        HashNode* p = HashTable[i];
        while (p)
        {
            nodeList[idx++] = p;
            p = p->next;
        }
    }

    // send to qsort()
    qsort(nodeList, idx, sizeof(HashNode*), compare_nodeptr);

    for(i=0; i < idx; i++)
        fprintf(pFile, "Vocabulary:%s,Count:%d\n", nodeList[i]->voc, nodeList[i]->freq);

    fflush(pFile);
    fclose(pFile);
    free(nodeList);
} 
```

反正就是这样。从 OP 的测试文件中，这些是输出的前几行：

```
Vocabulary:the, Count:912
Vocabulary:of, Count:414
Vocabulary:to, Count:396
Vocabulary:a, Count:388
Vocabulary:that, Count:260
Vocabulary:in, Count:258
Vocabulary:and, Count:221
Vocabulary:is, Count:220
Vocabulary:it, Count:215
Vocabulary:unix, Count:176
Vocabulary:for, Count:142
Vocabulary:as, Count:121
Vocabulary:on, Count:111
Vocabulary:you, Count:107
Vocabulary:user, Count:102
Vocabulary:s, Count:102 
```

# android - OSMDroid：onTap 示例

> ID：12991175
> 
> 赞同：3
> 
> 时间：2012-10-20T17:59:31.160
> 
> 标签：android, onclick, osmdroid

几周前我开始学习 Android，现在我需要你的帮助。我的任务是创建离线地图（使用 OSMDroid 和 Mobile Atlas Creator），上面有两个标记，它们之间的路径以及单击此标记后的一些活动。我已经完成了地图、标记和路径。这是代码（Android 2.3.3）：

公共类 MainActivity 扩展 Activity {

```
private MapView mapView;
LocationManager locationManager;
ArrayList<OverlayItem> overlayItemArray;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = new MapView(this, 256);
    mapView.setClickable(true);
    mapView.setBuiltInZoomControls(true);
    mapView.getController().setZoom(15); 
    mapView.getController().setCenter(new GeoPoint(54.332, 48.389));  
    mapView.setUseDataConnection(false);

    overlayItemArray = new ArrayList<OverlayItem>();        
    OverlayItem olItem = new OverlayItem("Here", "SampleDescription", new GeoPoint(54.332, 48.389));       
    overlayItemArray.add(olItem);
    overlayItemArray.add(new OverlayItem("Hi", "You're here", new GeoPoint(54.327, 48.389)));

    PathOverlay myPath = new PathOverlay(Color.RED, this);
    myPath.addPoint(new GeoPoint(54.327, 48.389));
    myPath.addPoint(new GeoPoint(54.332, 48.389));
    mapView.getOverlays().add(myPath);

DefaultResourceProxyImpl defaultResourceProxyImpl = new DefaultResourceProxyImpl(this);
ItemizedIconOverlay<OverlayItem> myItemizedIconOverlay  = new ItemizedIconOverlay<OverlayItem>(overlayItemArray, null, defaultResourceProxyImpl);
    mapView.getOverlays().add(myItemizedIconOverlay);

    setContentView(mapView); //displaying the MapView
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

问题：如何实现这个标记的onClick方法？还有一个关于 profy 的问题：如何正确地做（我的意思是如何按类划分这个程序）？非常感谢！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:00:18.367

您需要创建新类，如下所示：

```
 public class MyOwnItemizedOverlay extends ItemizedIconOverlay<OverlayItem> {
    protected Context mContext;

    public MyOwnItemizedOverlay(final Context context, final List<OverlayItem> aList) {
         super(context, aList, new OnItemGestureListener<OverlayItem>() {
                @Override public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                        return false;
                }
                @Override public boolean onItemLongPress(final int index, final OverlayItem item) {
                        return false;
                }
              } );
        // TODO Auto-generated constructor stub
         mContext = context;
    }

    @Override 
    protected boolean onSingleTapUpHelper(final int index, final OverlayItem item, final MapView mapView) {
        //Toast.makeText(mContext, "Item " + index + " has been tapped!", Toast.LENGTH_SHORT).show();
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }
} 
```

以下是如何在第一个（主）类中使用它：

```
MapView mapView = new MapView(this, 256); //constructor
//some code from te question

ArrayList<OverlayItem> overlayItemArray = new ArrayList<OverlayItem>();                
OverlayItem olItem = new OverlayItem("Here", "SampleDescription", new GeoPoint(54.332, 48.389));//marker

MyOwnItemizedOverlay overlay = new MyOwnItemizedOverlay(this, overlayItemArray);
mapView.getOverlays().add(overlay);        
setContentView(mapView); //displaying the MapView 
```

就这样。祝你好运！链接： [http ://code.google.com/p/osmdroid/issues/detail?id=245#makechanges](http://code.google.com/p/osmdroid/issues/detail?id=245#makechanges)

# cmake - cmake：分层项目设置

> ID：12991180
> 
> 赞同：11
> 
> 时间：2012-10-20T17:59:58.123
> 
> 标签：cmake

我有一个具有以下结构的项目：

```
proj:
-CMakeLists.txt    
-subdir0   
  -CMakeLists.txt    
  -app0.cpp
  -app1.cpp
-subdir1
  -CMakeLists.txt    
  -app2.cpp 
```

在构建之后，我喜欢拥有：

```
proj:    
-CMakeLists.txt    
-subdir0   
  -CMakeLists.txt    
  -app0.cpp
  -app1.cpp
-subdir1
  -CMakeLists.txt    
  -app2.cpp
-build
  -subdir0   
    -app0.exec
    -app1.exec
  -subdir1
    -app2.exec 
```

CMake 文档很难阅读，我需要的只是一个示例（例如现有项目）如何设置它......

多谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T18:55:40.457

您需要以下内容：

项目/CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(MyTest)
add_subdirectory(subdir0)
add_subdirectory(subdir1) 
```

proj/subdir0/CMakeLists.txt：

```
add_executable(app0 app0.cpp)
add_executable(app1 app1.cpp) 
```

proj/subdir1/CMakeLists.txt：

```
add_executable(app2 app2.cpp) 
```

然后在命令提示符下简单地执行：

```
mkdir <root of proj>/build
cd <root of proj>/build
cmake .. 
```

# ruby-on-rails - 如何在 Rails 3.2 中使用 accept_header 禁用内容协商

> ID：12991183
> 
> 赞同：1
> 
> 时间：2012-10-20T18:00:03.110
> 
> 标签：ruby-on-rails

我有一个应用程序链接到一个控制器，比如`/something/orders.xml`使用 RABL 构造 XML 文档。有效，但似乎由于浏览器的请求标头，这在某些浏览器中以 text/html 的形式返回，例如 Chrome：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

我希望得到回应，`Content-type: text/xml`因为它就是这样！所以，根据许多howtos和Rails Guides，你可以做

```
config.action_controller.use_accept_header = false 
```

在`application.rb`. 但这目前导致`undefined method use_accept_header=`：

```
/home/sbeam/.rvm/gems/ruby-1.9.3-p194@global/gems/actionpack-3.2.6/lib/action_controller/railtie.rb:41:in `block (3 levels) in <class:Railtie>': undefined method `use_accept_header=' for ActionController::Base:Class (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:18:36.643

您应该能够通过设置覆盖控制器操作中的内容类型`response.headers`：

```
respond_to do |format|
  format.html
  format.json { render :json => @orders }
  format.xml do
    response.headers['content-type'] = 'text/xml'
    render :xml => @orders
  end
end 
```

**编辑**

`use_accept_header`在 Rails 3.0 之后不推荐使用设置选项。

如果您无法在您的操作中覆盖格式，您可以尝试直接修改您的 mime 类型。您可以将以下内容放入 Rails 中的初始化程序中：

```
Mime.send(:remove_const, :xml)
Mime::Type.register "text/xml", :xml 
```

此外，如果您使用 JQuery 并通过 ajax 检索 XML，则可以显式设置所需的内容类型。看到这个问题：[Cannot proper set the Accept HTTP header with jQuery](https://stackoverflow.com/questions/1145588/cannot-properly-set-the-accept-http-header-with-jquery)

**编辑 2**

如果一切都失败了，您可以使用：

```
ActionDispatch::Request.ignore_accept_header = true 
```

在您的配置中完全关闭内容协商。正如我上面提到的，您可能想要控制您希望通过 ajax 请求接收的数据格式。如果是这样，那么您可以在[https://github.com/econsultancy/rack-strip_http_accept_headers](https://github.com/econsultancy/rack-strip_http_accept_headers)实现机架中间件更改。

# apache - 如何让 Apache 遵循符号链接而不是下载它？

> ID：12991186
> 
> 赞同：0
> 
> 时间：2012-10-20T18:00:25.077
> 
> 标签：apache

我只是使用标准的 apache 配置文件，它提到它遵循符号链接，但是当我点击 url 时`http://localhost/test`，它会下载符号链接文件而不是跟随它。我需要更改什么配置才能让 apache 遵循符号链接而不是下载它？

这是目录上的 ls ：

```
$ ls -al
total 10
drwx------+ 1 SYSTEM  SYSTEM  0 Oct 20 10:55 .
drwx------+ 1 SYSTEM  SYSTEM  0 Aug 26 12:27 ..
-rw-r--r--+ 1 me None   47 Oct 20 10:14 index.html
lrwxrwxrwx  1 me None   29 Oct 19 17:10 test -> /home/me/projects/test 
```

这是在我的 apache 配置文件中：

```
<Directory "D:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:48:15.647

我解决了这个问题。我使用的符号链接是使用 cygwin 制作的，它跨越了驱动器/卷。我发现这在 Windows 中是不允许的，所以我不得不将文件移动到与 apache 相同的驱动器，并且链接现在可以正常工作。

# java - Java 货币面额问题

> ID：12991189
> 
> 赞同：4
> 
> 时间：2012-10-20T18:01:02.597
> 
> 标签：java

我正在尝试自学 Java，并且在我得到的书中的两章中遇到了一些小问题：P 这是其中一个练习中的一个：

“编写一个类，计算并显示输入的美元数到货币面额的转换——20s、10s、5s 和 1s。”

到目前为止，我将从 0 的编码知识开始阅读四个小时，所以希望这听起来不是一个太简单的问题来回答。我确信有一种更有效的方式来编写整个事情，但我的问题是，如果用户回答“是”，我如何终止整个事情，或者如果他们回答“否”，则继续使用修订版？

也非常感谢你们在学习 Java 方面给我的任何建议或指导！感谢您抽时间阅读

```
import javax.swing.JOptionPane;
public class Dollars
{
    public static void main(String[] args)
    {
        String totalDollarsString;
        int totalDollars;
        totalDollarsString = JOptionPane.showInputDialog(null, "Enter amount to be     converted", "Denomination Conversion", JOptionPane.INFORMATION_MESSAGE);
    totalDollars = Integer.parseInt(totalDollarsString);
    int twenties = totalDollars / 20;
    int remainderTwenty = (totalDollars % 20);
    int tens = remainderTwenty / 10;
    int remainderTen = (totalDollars % 10);
    int fives = remainderTen / 5;
    int remainderFive = (totalDollars % 5);
    int ones = remainderFive / 1;
    JOptionPane.showMessageDialog(null, "Total Entered is $" + totalDollarsString + "\n" + "\nTwenty Dollar Bills: " + twenties + "\nTen Dollar Bills: " + tens + "\nFive Dollar Bills: " + fives + "\nOne Dollar Bills: " + ones);
    int selection;
    boolean isYes, isNo;
    selection = JOptionPane.showConfirmDialog(null,
        "Is this how you wanted the total broken down?", "Select an Option", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
    isYes = (selection == JOptionPane.YES_OPTION);
        JOptionPane.showMessageDialog(null, "You responded " + isYes + "\nThanks for your response!");
        isNo = (selection == JOptionPane.NO_OPTION);
        int twenties2 = totalDollars / 20;
        int tens2 = totalDollars / 10;
        int fives2 = totalDollars / 5;
        int ones2 = totalDollars / 1;
        JOptionPane.showMessageDialog(null, "Total Entered is $" + totalDollarsString + "\n" + "\nTwenty Dollar Bills: " + twenties2 + "\nTen Dollar Bills: " + tens2 + "\nFive Dollar Bills: " + fives2 + "\nOne Dollar Bills: " + ones2);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:23:10.530

首先，您似乎并不真的需要 isYes 和 isNo 的两个布尔值。基本上你问用户他是否想要一个不同的解决方案，即一个真/假值（或者更确切地说：isNo 与 !isYes 相同，因为选项窗格只会返回值 YES_OPTION 和 NO_OPTION 之一）。

*如果*用户指出第一个输出不是他想要的，你接下来要做的是转到你的“精炼”版本：

```
int selection = JOptionPane.showConfirmDialog(null,
        "Is this how you wanted the total broken down?", "Select an Option", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
if (selection == JOptionPane.NO_OPTION) {            
  int twenties2 = totalDollars / 20;
  int tens2 = totalDollars / 10;
  int fives2 = totalDollars / 5;
  int ones2 = totalDollars / 1;
  JOptionPane.showMessageDialog(null, "Total Entered is $" + totalDollarsString + "\n" + "\nTwenty Dollar Bills: " + twenties2 + "\nTen Dollar Bills: " + tens2 + "\nFive Dollar Bills: " + fives2 + "\nOne Dollar Bills: " + ones2);
} 
```

如果用户选择“是”，则无论如何您的主要方法都已完成，因此在这种情况下无需执行任何操作。

# android - Android-消耗性列表视图复选框

> ID：12991190
> 
> 赞同：1
> 
> 时间：2012-10-20T18:01:10.227
> 
> 标签：android, listview, checkbox

我在消耗性列表视图中的组和子项中都有复选框。现在，我想做的是，当我单击组复选框时，该组的所有子复选框将自动立即选择。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:47:31.287

这是一个较老的问题，所以也许不再需要答案，但我相信这里已经回答了同样的问题：[How to get all childs view in group with ExpandableListView](https://stackoverflow.com/questions/6924977/how-to-get-all-childs-view-in-group-with-expandablelistview)

# joomla - jFile:move 在移动文件失败时不会导致任何错误

> ID：12991192
> 
> 赞同：3
> 
> 时间：2012-10-20T18:01:14.453
> 
> 标签：joomla, joomla2.5

实际上，我设法为我制作的插件制作了一个安装 zip，并且在安装脚本文件中，我将此代码包含在 install 函数中，以便将某些文件复制到另一个目录中 joomla 内的文件夹中。

```
class plgVmCustomPayeddownloadsInstallerScript {

   function install($parent) {

        $src = "plugins/vmcustom/payeddownloads/payeddownloads.php";
        $destination = "components/com_virtuemart/controllers";     
        if(!JFile::move($src, $destination,JPATH_ROOT)){
            echo "tried to move from ".$src." to ".$destination;
            return false;
    }
} 
```

安装后，我在 joomla 中不断收到错误，“无法重命名文件”，并且应该由安装功能命令移动的文件没有，尽管事实上 install.xml 中的文件确实被复制了并正确安装。

同样在安装脚本中在安装功能中，我包含了一些正常执行的sql，没有任何问题。

而且我还尝试了 postflight 功能，但没有成功。我也没有从 php_error.log 中得到任何特定的错误

我还尝试在我的 joomla 安装的根应用程序中使用上面的 tester.php 文件创建这个奇怪的测试。

```
<?php
/**
 * @package     Joomla.Site
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

// Set flag that this is a parent file.
define('_JEXEC', 1);
define('DS', DIRECTORY_SEPARATOR);

if (file_exists(dirname(__FILE__) . '/defines.php')) {
    include_once dirname(__FILE__) . '/defines.php';
}

if (!defined('_JDEFINES')) {
    define('JPATH_BASE', dirname(__FILE__));
    require_once JPATH_BASE.'/includes/defines.php';
}

require_once JPATH_BASE.'/includes/framework.php';

// Mark afterLoad in the profiler.
JDEBUG ? $_PROFILER->mark('afterLoad') : null;

// Instantiate the application.
$app = JFactory::getApplication('site');

// Initialise the application.
$app->initialise();

// Mark afterIntialise in the profiler.
JDEBUG ? $_PROFILER->mark('afterInitialise') : null;

// Route the application.
$app->route();

// Mark afterRoute in the profiler.
JDEBUG ? $_PROFILER->mark('afterRoute') : null;

// Dispatch the application.
$app->dispatch();

// Mark afterDispatch in the profiler.
JDEBUG ? $_PROFILER->mark('afterDispatch') : null;

// Render the application.
$app->render();

// Mark afterRender in the profiler.
JDEBUG ? $_PROFILER->mark('afterRender') : null;

    //plugins/vmcustom/payeddownloads/payeddownloads.php to 
    //components/com_virtuemart/controllers
    jimport('joomla.filesystem.file');
    $src = JPATH_ROOT."/plugins/vmcustom/payeddownloads/payeddownloads.php";
    $destination = JPATH_ROOT."/components/com_virtuemart/controllers/";        
    echo $src."<br>";
    echo $destination."<br>";
    JFile::move($src,$destination);

?> 
```

该文件不会从 payeddownloads 移动到控制器文件夹，也不会导致任何错误。

另外我需要提到 php.ini 有 error_reporting = E_ALL 和 display_errors = On。php_error.log 也捕获错误。如果我输入例如 echo "lala"oo 它将记录错误并显示它。所以我怀疑 JFile::move 有一个错误，即使文件没有被复制，它也不会抛出任何错误。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:18:02.253

尝试改用以下内容。对您的代码进行了一些调整：

```
function install($parent) {

    $src = JPATH_SITE . "/plugins/vmcustom/payeddownloads/payeddownloads.php";
    $destination = JPATH_SITE . "/components/com_virtuemart/controllers";

    if(JFile::exists($src)){
       echo "File Exists!";
    }
    else{
       echo "File Doesn't Exist!";
    }
    if(JFolder::exists($destination)){
       echo "Destination Folder Exists!";
    }
    else{
       echo "Destination Folder Doesn't Exist!";
    }

    JFile::move($src, $destination); // Move file

    if(JFile::move($src, $destination)){
       echo "File Successfully Moved!";
    }
    else{
       echo "failed to move from ".$src." to ".$destination;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T04:50:17.757

即使认为线程很旧，我发现它也有同样的问题，也许该解决方案对其他人有用。

JFile::move 需要一个源文件路径和目标文件路径。在上面的代码中，路径应该如下所示。

```
$src = JPATH_SITE . "/plugins/vmcustom/payeddownloads/payeddownloads.php";
$destination = JPATH_SITE . "/components/com_virtuemart/controllers/payeddownloads.php"; 
```

# c# - 通过字符串比较检查动态对象类型

> ID：12991193
> 
> 赞同：3
> 
> 时间：2012-10-20T18:01:16.423
> 
> 标签：c#, c#-4.0, dynamic

检查基础对象的最佳方法是什么，如果是某种类型，myObject 可以在“n”级别具有层次结构，我想与字符串进行比较，因为 myObject 是动态的并且我没有对车辆的装配访问权限

a) 汽车：车辆
b) 自行车：TwoWheeler：车辆
c) 卡车：拖车：FourWheeler：车辆

```
dynamic myObject = someObject;
if(myObject is Vehicle)  // Works
if(myObject is "Vehicle") //How to ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:14:23.340

你可以使用 IsAssginableFrom

```
System.Type.GetType(typeNameAsString).IsAssignableFrom(myObject.GetType()) 
```

测试是否可以将 myObject 分配给由 typeNameAsString 中保存的名称（字符串）标识的类型的存储位置。

这仅适用于实际加载的类型，您应该使用完全限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:23:23.090

写了一点递归的方法来解决它：

```
 private bool IsVehicle(Type type)
        {
            if (type.BaseType != null)
                if (type.BaseType.FullName == "Vehicle")
                    return true;
                else
                    return IsVehicle(type.BaseType);
            return false;
        } 
```

# java - 创建需要从Java中的方法返回的对象

> ID：12991202
> 
> 赞同：0
> 
> 时间：2012-10-20T18:01:55.793
> 
> 标签：java, object, methods, instantiation

如果您对如何修改问题标题以使其更具描述性有任何建议，请随时提出。

假设您有一个返回对象的类方法，是否有最佳实践或标准方法在该方法中创建对象的位置？为了澄清，请参见下文：

```
public MyCustomObject myMethod(String arg1, String arg2){
    try{
        if (something){
            ...
        } else {
            ...
        }
    } catch ( SomeException e ){
        ...
    } catch ( SomeOtherException e ){
        ...
    }

    return myCustomObject;
} 
```

MyCustomObject 有一个空构造函数，一个具有 5 个字段和 getter/setter 的构造函数。在上述（简化）流程的每种情况下，我都需要返回一个有效的 MyCustomObject 。请不要专注于控制流本身。

我认为我可以： a) 在方法的开头使用 null 初始化 MyCustomObject 类型的变量。为控制流中的每个不同情况分配一个新的 MyCustomObject。最后归还。b) 在开始时使用空构造函数实例化一个 MyCustomObject。使用流中每个案例的设置器修改对象。

你能想出为什么上述一种或不同的方式更可取的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:21:18.260

我更喜欢您没有提到的选项 3：为控制流中的每个不同情况创建一个新的 MyCustomObject，并立即返回它。不需要变量，通常：

```
if (foo) {
    return new MyCustomObject("foo");
}
if (bar) {
    return new MyCustomObject("x", "y");
}
// etc 
```

这通常以更少的嵌套结束，并且更容易阅读，因为只要你点击`return`语句，你就完成了。

有些人坚持只有一个出口点的教条，但我认为这些天这有点毫无意义——这在你需要在返回之前进行清理的语言中是有意义的，但需要垃圾收集和`finally`其他资源的块清理，没必要。

如果您尽快返回，您通常可以在代码中减少嵌套 - 这大大提高了可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:15:21.763

所以要么：

```
MyCustomObject result = null;
if (something) {
    result = new MyCustomObject(a, b, c, d, e);
} else {
    result = new MyCustomObject(a, b, x, y, z);
} 
```

或者

```
MyCustomObject result = new MyCustomObject();
if (something) {
    result.Name = arg1;
} else {
    result.Phone = arg2;
}

return result; 
```

?

我真的不明白为什么我应该选择一个而不是另一个！我可能会使用 B 来确保我没有忘记初始化结果……但这并不是一个很好的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:15:47.193

在我的工作中，我个人更喜欢第一种方法（即，声明返回变量，将其分配给`null`，然后允许程序的实际逻辑根据需要实例化适当的对象）。

我发现这更有用的原因是因为无论您从哪里调用该方法，都可能想知道创建对象时是否出现问题，或者是否创建了有用的对象。执行空检查比尝试确定实例化对象是否是虚拟对象要容易得多。您会发现空值检查通常是复杂程序控制流的重要组成部分。如果我*总是*返回一个对象，无论发生什么，我的检查器都必须更复杂。

例如，假设我有一个`readItem()`返回自定义`Item`对象的方法。在这种情况`readItem()`下，它会从表中获取一些数据并`Item`用它填充。现在，假设处理过程中没有出现任何问题`readItem()`，保证抛出异常，但`Item`我们想要读取的标准根本不在表中（例如，也许我们提供了一个不存在项目的项目 ID 或其他东西）。然后，如果我返回一个实例化`Item`而不是`null`，这将更难弄清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:15:58.263

**选项1：**

```
MyCustomObject myCustomObj = null;

for( index > list of cases ){

    myCustomObj = myMethod(param1, param2);

} 
```

**完美：**您声明了一次变量并修改了值。

**选项 2：**

```
for( index > list of cases ){

    MyCustomObject myCustomObj = myMethod(param1, param2);

} 
```

**好：**您一次又一次地重新声明变量并修改值。

**选项 3：**

```
MyCustomObject myCustomObj = new MyCustomObject();

for( index > list of cases ){

    myCustomObj = myMethod(param1, param2);

} 
```

**坏：**你在第一行浪费内存，因为引用没有被使用。但仍然没有造成伤害

# c# - OutOfMemoryException 读取响应流

> ID：12991206
> 
> 赞同：1
> 
> 时间：2012-10-20T18:02:12.720
> 
> 标签：c#, memory-management, file-io, out-of-memory

什么可能导致下面代码中的内存不足异常？我的程序运行了几个小时然后死了。该代码每次只发送/接收非常少量的数据，因此没有大文件或字符串通过线路或返回。代码每 3 秒左右从服务器发送和接收。

```
private void Read()
{
    string postData = "Name=John"
    using (HttpWebResponse response = SendRequest(new Uri(@"someWebSitehere"), postData))
    {
         Stream stream = response.GetResponseStream();
         StreamReader reader = new StreamReader(stream);
         responseFromServer = reader.ReadToEnd();　　IT THROWS OUT OF MEMORY HERE
     　   stream.Close();
    ｝
}

private HttpWebResponse SendRequest(Uri uri, string postData)
{
    lock (SendRequestLock)
    {
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);

        req.Method = "POST";
        req.CookieContainer = new CookieContainer();
        req.Proxy = null;
        UTF8Encoding encoding = new UTF8Encoding();
        byte[] byte1 = encoding.GetBytes(postData);

        // Set the content type of the data being posted.
        req.ContentType = "application/x-www-form-urlencoded";

        // Set the content length of the string being posted.
        req.ContentLength = byte1.Length;

        req.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.0.3705;)";
        req.Method = "POST";
        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        req.Headers.Add("Accept-Language: en-us,en;q=0.5");
        req.Headers.Add("Accept-Encoding: gzip,deflate");
        req.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        req.KeepAlive = true;
        req.Headers.Add("Keep-Alive: 300");
        using (Stream stream = req.GetRequestStream())
        {
            stream.Write(byte1, 0, byte1.Length);
        }
        return (HttpWebResponse)req.GetResponse();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:04:35.310

您需要处理 IDisposable 类`Stream`和`StreamReader`：

```
using (Stream stream = response.GetResponseStream())
{
    using (StreamReader reader = new StreamReader(stream)) 
    {
        responseFromServer = reader.ReadToEnd();　　//IT THROWS OUT OF MEMORY HERE
    }
} 
```

实现的类`IDisposable`通常具有外部资源，除非您调用它们`Dispose()`（或者，同样的事情，将它放在一个`using`块中），否则它们会挂在这些外部资源上。每次您的代码块运行时，这些类很可能会泄漏内存，因此一段时间后会出现“内存不足”异常。

值得阅读[MSDN 关于 IDisposable 的注释](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:21:21.137

您是否检查了响应的内容长度。也许它非常巨大。在这种情况下，您应该逐部分阅读响应流

# java - 有效替换字符串中所有不受支持的字符

> ID：12991207
> 
> 赞同：1
> 
> 时间：2012-10-20T18:02:14.037
> 
> 标签：java, android, string, replace

> **可能重复：**
> [将符号、重音字母转换为英文字母](https://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet)

我需要替换所有重音字符，例如

```
"à", "é", "ì", "ò", "ù" 
```

和

```
"a'", "e'", "i'", "o'", "u'"... 
```

因为在保存后重新加载带有重音字符的嵌套字符串时出现问题。

有没有办法在不对所有字符使用不同的字符串替换的情况下做到这一点？

例如，我宁愿避免做

```
text  = text.replace("a", "a'");
text2 = text.replace("è", "e'");
text3 = text2.replace("ì", "i'");
text4 = text3.replace("ò", "o'");
text5 = text4.replace("ù", "u'"); 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:32:55.653

我从这篇[文章](https://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet)中尝试了这个，它似乎有效。

```
String str= Normalizer.normalize(str, Normalizer.Form.NFD);
str= str.replaceAll("\\p{InCombiningDiacriticalMarks}+", "'"); 
```

编辑：但是替换组合变音符号有一个副作用，您无法区分**À Á Â**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T18:15:28.590

如果您不介意添加 commons-lang 作为依赖项，请尝试[StringUtils.replaceEach](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html#replaceEach%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String%5b%5d%29) 我相信以下执行相同的任务：

```
import org.apache.commons.lang.StringUtils;

public class ReplaceEachTest
{
   public static void main(String [] args)
   {
      String text = "àéìòùàéìòù";
      String [] searchList = {"à", "é", "ì", "ò", "ù"};
      String [] replaceList = {"a'", "e'", "i'", "o'", "u'"};
      String newtext = StringUtils.replaceEach(text, searchList, replaceList);
      System.out.println(newtext);
   }
} 
```

此示例打印`a'e'i'o'u'a'e'i'o'u'` 但是总的来说，我同意，由于您正在创建自定义字符翻译，因此您将需要一个解决方案，其中明确指定每个感兴趣的字符的替换。

我之前使用 replaceChars 的回答不好，因为它只处理一对一的字符替换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T18:33:56.240

在阅读了主要方法中的评论后，我认为更好的选择是解决问题——这与编码有关吗？- 不要试图掩盖症状。

此外，这仍然需要手动显式映射，这可能使其不如 nandeesh 使用正则表达式 unicode 字符类的答案理想。

* * *

这是执行映射的代码框架。它比 char-char 稍微复杂一些。

此代码试图避免额外的字符串。它可能会或不会“更有效”。尝试使用真实的数据/使用情况。YMMV。

```
String mapAccentChar (char ch) {
    switch (ch) {
        case 'à': return "a'";
        // etc
    }
    return null;
}

String mapAccents (String input) {
  StringBuilder sb = new StringBuilder();
  int l = input.length();
  for (int i = 0; i < l; i++) {
    char ch = input.charAt(i);
    String mapped = mapAccentChar(ch);
    if (mapped != null) {
      sb.append(mapped);
    } else {
      sb.append(ch);
  }
  return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T18:06:40.323

由于 char 的 ASCII 值与其重音版本之间没有严格的相关性，因此在我看来，您的替换是最直接的方法。

# php - 将 Javascript 中动态生成的图像作为 PHP 中的图像标头发送

> ID：12991220
> 
> 赞同：2
> 
> 时间：2012-10-20T18:04:14.690
> 
> 标签：php, javascript, image, http-headers, mime

> **我在做什么**

**根据查询字符串中指定的一些变量，**通过 javascript 生成动态图像。**我**在 PHP 网站中**使用它。**

 **> **我需要的**

这里的重点是**我想在 javascript 中发送这个动态生成的图像，以****作为 Image Header**显示在页面上。

> **我正在使用什么**

PHP 与 APACHE 服务器**(wamp)**

> **我需要的类似示例**

[http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World](http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World)

这是一个 Google Chart API，**在点击上述 URL 时，它会**根据查询字符串中指定的参数返回一个 PNG 图像。

*我已经尝试了很多，但仍然无法达到成功点。*

只是，为了向您展示我在这里所做的是代码

> **我的代码部分**

```
/*
   Logic to generate a canvas based on some parameters goes here
*/

// Canvas to Image
var img = canvas.toDataURL("image/png");

/*
   My goal is to set this image to header of the page,
   so that when the page is hit, an image is returned,
   just like the Google Chart API thing mentioned above
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:38:11.797

像这样创建一个 javascript 变量：

```
 var monthly ="value to pass";
    var recent  ="value to pass";
    var imgURL="http://YOURSITEURL/FOLDER/app1?monthly="+monthly+"&recent="+recent+"&likes="+likes; 
```

或者：

```
 var image = document.createElement("img");
    image.src ="http://117.204.247.139:8084/myapps/app?monthly="+monthly+"&recent="+recent+"&likes="+likes; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T18:12:45.633

我不完全确定如果我明白你想要什么。但在 PHP 端，您可以使用 GD 或 Imagemagick 等库生成 PNG 或 JPEG 文件。

(http://php.net/manual/en/book.image.php)

然后，您可以通过为 PNG 设置正确的标头将数据发送回客户端：

```
<?php
header("Content-Type: image/png");
ob_start();
echo $pngdata; // the binary data
ob_end_flush(); 
```**

# visual-studio-2008 - C++ 拆分 System.String 并在 String.Format 中使用

> ID：12991223
> 
> 赞同：1
> 
> 时间：2012-10-20T18:04:26.657
> 
> 标签：visual-studio-2008, c++-cli

本质上，我有一个字符串，其中包含要传递给 String::Format() 的占位符，如下所示：

```
"The {0} brown {1} jumped over the {2} {3}." 
```

我还有另一个逗号分隔的字符串，其中包含我希望填写到格式占位符的字符串，例如：

```
"quick,fox,lazy,dog" 
```

因此，填充格式字符串似乎很自然，我将`Split(',')`使用第二个字符串，并将其作为第二个参数传递给`Format(first_str, second_split_array)`;

但是拆分第二个数组会产生一个 System::Array^ Format() 将其视为一个对象，因此很生气并告诉我我的索引必须小于或等于传递的参数数。

最后我听说，`String.Format()`可以使用数组作为第二个参数，所以......我必须做什么才能以 Format() 将看到所有参数的方式拆分字符串？

**编辑：**

这里的想法是每次索引元素的数量都不相同。我试图实现的目标是获取从服务器发送的数据并将其填充到模板中。服务器发回一个逗号分隔的列表和一个模板名称。因此，对于快速狐狸示例，它会发送我上面的内容，但其他时候它会发送错误，它使用：

`"An error has occurred: {0} (Details: {1})"`

和服务器参数`"Error Name,Error text description and such."`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:25:18.407

不确定问题的真正含义，您确实可以将字符串数组传递给 String::Format()。String::Split() 方法可以很容易地生成一个：

```
int main(array<System::String ^> ^args)
{
    String^ text = "quick,fox,lazy,dog";
    array<String^>^ words = text->Split(',');
    String^ result = String::Format("The {0} brown {1} jumped over the {2} {3}.", words);
    Console::WriteLine(result);
    return 0;
} 
```

输出：

> 敏捷的棕色狐狸跳过了懒惰的狗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:13:54.870

这可能是因为您将 a`array<String^>^`作为第二个参数传递给`String::Format`. 如果您希望它的重载`String::Format`将数组作为第二个参数（并使用数组中的每个元素作为格式化项），则需要传递一个**`array<Object^>^`**（其中每个`Object^`都是 a `String^`）。

# php - 新窗口未接收会话/cookies

> ID：12991225
> 
> 赞同：1
> 
> 时间：2012-10-20T18:04:31.740
> 
> 标签：php, javascript, window

我正在链接到在窗口中打开的另一个页面。

链接在这里：

```
<a href='#' onclick=\"window.open('linkadress.php here."','targetWindow','toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=200,height=200')\" /> 
```

现在，当我打开文件时，我希望它显示给登录的人，这就是我遇到问题的地方。我将我的文件包含在登录脚本中，并同时使用 session_start(); 和 ob_start(); 在窗口中打开的页面上，但它不会在那里使用我的cookies..

有谁知道为什么会这样？

*   编辑：没有人知道该怎么做？:O

# windows - 如何让 memcached 在 Windows 7 上为 xampp 工作？

> ID：12991228
> 
> 赞同：1
> 
> 时间：2012-10-20T18:04:37.017
> 
> 标签：windows, windows-7, memcached, xampp

我试图让 memcached 工作，但我失败了。我已经阅读了很多教程，但无济于事。这是我尝试通过安装时得到的`c:/xampp/memcached/memcached.exe`

```
failed to install service or service already installed 
```

我很确定这没有安装。我检查了进程，它不在列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T05:32:07.177

您必须以管理员身份运行命令提示符。

要在 Windows 中执行此操作，您可以右键单击开始菜单，然后单击命令提示符（管理员）

# c# - WPF 窗口上的高对比度触发器

> ID：12991229
> 
> 赞同：0
> 
> 时间：2012-10-20T18:04:49.933
> 
> 标签：c#, wpf, binding, styles, high-contrast

我正在尝试将触发器应用于我制作的基本 WPF 窗口。我可以成功地对其应用样式，但触发器似乎不起作用。

本质上，我所做的是在运行时将当前资源字典转储到应用程序中并加载到另一组资源字典中以解决高对比度问题。它似乎正在工作，但我正在尝试制定一个需要在高对比度模式下处理的图像的解决方案。在这种特殊情况下，窗口的背景设置为 ImageBrush。在高对比度模式下，我正在尝试使用触发器将背景设置为系统颜色。

我尝试[了这个解决方案](http://social.msdn.microsoft.com/Forums/en/wpf/thread/ba9a379b-4f02-408c-954b-6057e6d0a1b5)，但似乎都不起作用：

```
<Style TargetType="{x:Type local:Mywindow}">
  <Setter Property="Tag"
          Value="{DynamicResource {x:Static SystemParameters.HighContrastKey}}" />
  <Style.Triggers>
    <Trigger
        Property="Tag"
        Value="True">
      <Setter Property="Background" Value="{DynamicResource MyColor}"/>
    </Trigger>
  </Style.Triggers>
</Style> 
```

并且

```
<Style TargetType="{x:Type local:Mywindow}">
    <Style.Triggers>
        <DataTrigger
            Binding="{Binding Source={x:Static SystemParameters.HighContrast}}"
            Value="True">
            <Setter Property="Style" Value="{DynamicResource highContrastStyle}"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:36:25.573

弄清楚了。必须绑定到RelativeSource.Self.. 添加两个触发器为真和假。忽略转换器。我需要一个用于我正在使用的图像。

```
<Style x:Key="MyWindowKey" TargetType="{x:Type test:MyWindow}">
        <Setter Property="Tag" Value="{DynamicResource {x:Static SystemParameters.HighContrastKey}}" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource= {x:Static RelativeSource.Self}, Path=Tag}" Value="True">
                <Setter Property="Background" Value="{DynamicResource MyWindowBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding RelativeSource= {x:Static RelativeSource.Self},  Path=Tag}" Value="False">
                <Setter Property="Background">
                    <Setter.Value>
                        <ImageBrush ImageSource="{Binding Source={x:Static test:Images.MyImage},Converter={StaticResource ResourceKey=ImageConverter}}" Stretch="UniformToFill">
                        </ImageBrush>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
        </Style.Triggers>
    </Style>< 
```

# iphone - 如何将不同的数据发送到同一个 UITableView 中的自定义单元格？

> ID：12991232
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:05:20.153
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

这是一个博客应用程序，我遇到的问题是帖子的布局及其评论。

理想情况下，布局应该是这样的（版本 1）：

![在此处输入图像描述](../Images/e7a55ecc17e55aa45265fed3e40cf2b7.png)

父级是 UIScrollView，您看到的所有其他元素都在其中。底部的 UITabelView 接收评论线程。

这可行，但问题在于评论 UITableView。我想我可以关闭它的滚动，让它根据评论的数量垂直“增长”。但是在几行之后，内容被剪裁了。这是因为剩余的行没有在 UIScrollView 的垂直大小内呈现。

我已经阅读了 SO 以取消 UIScrollView - 而是在 UITableView 中构建整个东西。在顶部创建一个自定义单元格以容纳 UIImageView，在下方创建另一个自定义单元格用于发布文本等。

**版本 2**

![在此处输入图像描述](../Images/e0dbd9405076dea8994b432add04eafd.png)

我的问题是：如何发送 JSON 提要的特定部分来填充自定义单元格，然后遍历填充下部单元格的注释？

例如，下面的代码将评论发送/迭代到版本 1 中的评论 UITableView。

但是我如何将发布图像或发布文本发送到版本 2 中的自定义单元格？

有更好的方法吗？非常感谢任何形式的建议。

**DetailViewController.h**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"commentCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *post           = self.detailItem;
    NSArray      *commentThread  = [post objectForKey:@"comment"];
    NSDictionary *comment        = [commentThread objectAtIndex:indexPath.row];

    NSString     *commentText       = [comment objectForKey:@"comment_text"];
    NSString     *commentAuthorName = [comment objectForKey:@"comment_author_name"];

    cell.textLabel.text       = commentText;
    cell.detailTextLabel.text = commentAuthorName;

    return cell;
} 
```

**JSON**

```
...
{
    "post_id": "1463",
    "post_title": null,
    "post_text": "dffsdjdflkjklk dlfkjsdlfkj",
    "comment": [
        {
            "comment_author_name": "2162",
            "comment_text": "yuiyuiiopiop",
        },
        {
            "comment_author_name": "2163",
            "comment_text": "tyutyutyutyuu",
        },
        {
            "comment_author_name": "2164",
            "comment_text": "sdfsertertr",
        },
    ]
},
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:00:28.200

是的，这是正确的，要么您只需在表视图中使用标题视图，我将示例取一个视图说 headerView 并在响应后将 imageView 放入其中，只需将图像放在 imageview 对象中，然后像这样加载表视图

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
   return self.headerView;

} 

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
  return 210;

} 
```

然后使用上面使用的 cellForRowAtIndexPath 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:47:27.710

您可以将帖子文本和图像放入 tableViewHeader。

或将帖子文本和图像放在 tableView 部分 0

将评论放在第 1 部分

# 编辑

```
{
    [super viewDidLoad];

    UIImageView *imageView = [[UIImageView alloc] init];
    //config the image view

    UILabel *postContentLabel = [[UILabel alloc] init];//or other UI component
    //Config the postContentLabel

    UIView *tableHeaderView = [[UIView alloc] init];
    [tableHeaderView addSubview:imageView];
    [tableHeaderView addSubview:postContentLabel];
    //set the tableHeaderView frame

    self.tableView.tableHeaderView = tableHeaderView;
} 
```

# javascript - 带有基本标记的Javascript onclick，即带有子文件夹

> ID：12991234
> 
> 赞同：0
> 
> 时间：2012-10-20T18:05:35.947
> 
> 标签：javascript, internet-explorer, onclick, base

试试这个：在您的网站中创建一个文件夹`test`，然后将这个 html 文件 ( `test.html`) 放入其中：

```
<html><head>
<base href="http://www.site.com/" />
</head><body>
<span onclick="window.location.href='test/test.html?done!';return false;">click me</span>
</body></html> 
```

单击您喜欢的浏览器中的链接。网址是什么？

单击 IE 中的链接。网址是什么？

编辑：IE 带你到：[http](http://www.site.com/test/test/test.html?done) ://www.site.com/test/test/test.html?done ！

有什么方法可以解决这个问题，不是（1）删除基本标签，（2）更改 onclick 以使用附加正确基数的函数？有没有办法覆盖 IE 中的 window.location.href 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T01:56:40.617

这显然仍然是 IE11 中的一个问题。我刚才碰到了。我所做的是这样的：

```
onclick="window.location=document.getElementsByTagName('base')[0].href+'your_url_destination';" 
```

它需要修改 onclick 行，但不需要单独的函数。它应该适用于所有浏览器，并且到目前为止对我来说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:28:15.937

将我移动`test.htm`到名为`test`（最终相对路径：）的子目录后`test/test.htm`，我能够确认该错误（我最初误解了您的要求）。[谷歌搜索它还确认它是一个错误](https://www.google.com/search?q=Internet%20Explorer%20ignores%20base%20tag)，或者至少是`<base>`标签的非标准实现（这可能只是微软没有按照规范遵循实现的*另一种情况）。*

IE 将尊重`<base>`任何已定义锚点的标记。

```
<a href="test/test.html">Click me</span> 
```

将转到`http://www.site.com/test/test.html`（前提是`<base>`标签不是关闭的，或者对于旧版本的 IE 不是自关闭的），但 IE（所有版本）只会尊重锚点的基本标记，而不是 JavaScript。

IE 将附加内容添加`test/`到您的 URL 的原因实际上是符合标准的行为。由于 IE 忽略了该`<base>`标记，您的链接`test/test.html`表明存在一个子目录，该子目录使用相对于当前目录 ( )`test`的文件调用，并且 IE 正确导航到“test/test/test.html”。`test.html``test`

至于怎么修...

1.  删除`<base>`标签将无济于事。
2.  将 更改为`onclick`返回正确基本 URL 的函数会起作用，但您已声明这是不可接受的。
3.  `window.location.href`是一个字符串，而不是一个函数，所以“覆盖”它是一个非首发。
4.  更改`onclick`为使用绝对 URL 也可以。
5.  从长远来看，删除所有嵌入的属性并通过 JavaScript (或)`onclick`分配它们会更有效（内容/行为的分离），并允许您轻松附加正确的基本 URL（以及我可能会选择的方法，虽然我不'不知道你的具体情况）。`attachEvent``addEventListener`
6.  您可以使用 DOM 操作库，如 jQuery/Dojo/Prototype 来循环遍历任何`onclick`属性并将 URL 更新为绝对 URL。

# ms-access-2007 - 在表格中查找一个值，然后将其与表单字段 X 中的值相乘 = 表单字段 Y 中的值

> ID：12991241
> 
> 赞同：1
> 
> 时间：2012-10-20T18:06:15.810
> 
> 标签：ms-access-2007

您好，我正在使用 MS Access 2007

我有一个名为 Extraction Line 的表，它类似于订单行表，在这个表中是关注的两个字段：

字段：吨位：数字数据类型

字段：值：货币数据类型

我想要发生的是

一旦用户输入吨位值

在吨位字段的更新后事件中，Dlookup 将查看资源表并找到价格字段（货币数据类型），然后将资源表价格值乘以吨位金额字段（例如）$50 x 5 等，$250 值然后添加到值字段。

到目前为止，我什至无法成功使用 dlookup 从资源表中获取值

我的代码在吨位字段的 afterupdate 事件中的提取行表单中：

```
Private Sub Tonnage_AfterUpdate()

Dim X As Currency

X = DLookup("[Price]", "[Resource]", "Atomic Number" = "076")  

'X= Nz(DLookup("[Price]", "[Resource]", "Atomic Number" = "076"), 0)

'X = DLookup("[Price]", "[Resource]", "[Atomic number] = Form![Atomic number]") * [Worth] 
```

在执行乘法和其余要求之前，我想先测试获取值的简单部分，但不断出现 Null 值错误。

我认为由于此解释 [Null 值是由于...而导致出现 Null 值错误](http://www.vbforums.com/showthread.php?401834-Database-Why-do-I-get-the-error-quot-Invalid-use-of-Null-quot-when-using-field-values)

但是当然不会有任何价值或没有任何价值，因为我希望 dlookup 先获取价值然后进行数学运算。

在此之前，我在提取线表单中尝试了各种验证规则，但收到 ?Name 错误。

实现上述目标的最佳方法是什么。如果我能得到帮助，为我指明正确的方向，我可以离开并尝试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:49:56.630

怎么样：

```
Private Sub Tonnage_AfterUpdate()
''It is probably best not to use Currency when you do not know what will
''be returned
Dim varX As Variant

varX = Nz(DLookup("[Price]", "[Resource]", "[Atomic Number] = 076"),0) * [Worth] 
```

如果要将查找称为字段或控件，并且 [Atomic Number] 是数字字段：

```
varX = Nz(DLookup("[Price]", "[Resource]", "[Atomic Number] = " _
          & MyNumber),0) * [Worth] 
```

部分：

```
varX = DLookup("[Price]", "[Resource]", "[Atomic Number] = " & MyNumber)

If varX > 0 then
    MyAnswer = VarX * Me.Worth
End If 
```

# java - 为什么“dist/”目录下没有 manifest.mf，为什么 jar 文件不起作用？

> ID：12991242
> 
> 赞同：3
> 
> 时间：2012-10-20T18:06:31.550
> 
> 标签：java, netbeans, jar, manifest, executable-jar

我是 NetBeans 的新手，当我在 IDE 中单击“清理并构建”时，我找不到[此链接](http://netbeans.org/kb/articles/javase-deploy.html)告诉我应该有的 MANIFEST.MF。

但是，我只看到一个 .jar 文件和一个 README.TXT。有人对此有任何想法吗？

我对 NetBeans 完全陌生，因此非常感谢简单的术语！

此外，当我在 IDE 中运行我的项目时，它会创建并显示一个 jFrame，但是当我双击 jar 文件时，什么也没有显示。我已经完成了 setVisible() 并设置了默认关闭操作，所以这不是问题。当我在寻找答案时，我发现这可能是因为我没有在清单中指定我的主类。所以这可能与最重要的问题有关，这就是我将这两个问题结合起来的原因。

提前谢谢各位！

我正在使用 NetBeans 7.2 Beta

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:27:21.413

我意识到manifest.mf文件不在“dist/”目录下，而是在项目的根目录下。我现在可以找到它。但是，我仍然无法弄清楚为什么罐子不起作用。它现在正在工作。也许我的机器正在运行，或者我使用了太多的 RAM，所以我的电脑不想运行另一个程序？无论如何，现在一切都解决了。谢谢大家的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:23:34.550

使用 WinRar提取`.jar`文件，然后在 META-INF 文件夹中检查 MANIFEST.MF。

# ios - iOS 检查注解的坐标是否为 {0,0}

> ID：12991243
> 
> 赞同：0
> 
> 时间：2012-10-20T18:06:37.667
> 
> 标签：ios, for-loop, annotations, mkmapview, coordinates

我有一个循环语句，它在数组中的 mapView 上显示我的注释。如何检查数组中的任何坐标是否为 0,0，如果是，删除/不绘制它们？

谢谢。

代码：

```
 CLLocationCoordinate2D maxCoord = {45.60250f,-122.39181f};
        CLLocationCoordinate2D minCoord = {45.35697f,-123.12789f};

        NSArray *callsArray = [xmlParser calls];

        for (JointCAD *call in callsArray) {
            NSString *callnumber = [call.callnumber stringByAppendingFormat:@". "];
            NSString *callandnumber = [callnumber stringByAppendingString:call.currentCallType];
            CLLocationCoordinate2D newCoord = { [call.latitude doubleValue], [call.longitude doubleValue]};

            if ([call.longitude doubleValue] > maxCoord.longitude)
            {
                maxCoord.longitude = [call.longitude doubleValue];
            }
            if ([call.latitude doubleValue] > maxCoord.latitude)
            {
                maxCoord.latitude = [call.latitude doubleValue];
            }
            if ([call.longitude doubleValue] < minCoord.longitude)
            {
                minCoord.longitude = [call.longitude doubleValue];
            }
            if ([call.latitude doubleValue] < minCoord.latitude)
            {
                minCoord.latitude = [call.latitude doubleValue];
            }

            Annotation *ann = [[Annotation alloc] init];
            ann.title = callandnumber;
            ann.subtitle = [call location];
            ann.coordinate = newCoord;
            [mapView addAnnotation:ann];
        }

        MKCoordinateRegion region = {{0.0f, 0.0f}, {0.0f, 0.0f}};

        region.center.longitude = (minCoord.longitude + maxCoord.longitude) / 2.0;
        region.center.latitude = (minCoord.latitude + maxCoord.latitude) / 2.0;

        region.span.longitudeDelta = (maxCoord.longitude - minCoord.longitude) * 1.1;
        region.span.latitudeDelta = (maxCoord.latitude - minCoord.latitude) * 1.1;

        [mapView regionThatFits:region];
        [self.mapView setRegion:region animated:YES];

        [self setRefreshState:@"Finished"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:15:14.300

嗯，当坐标等于 0 时，为什么不在循环中添加一个`continue`？`for`

在创建`Annotation`对象之前，只需添加一个简单的

```
if(newCoord.latitude == 0 && newCoord.longitude == 0) continue; 
```

`continue`只是跳到循环的下一次迭代。

# actionscript-3 - FLVPlayback 剪辑加载延迟

> ID：12991248
> 
> 赞同：1
> 
> 时间：2012-10-20T18:06:59.327
> 
> 标签：actionscript-3, flash, video, loading, flvplayback

我正在 Flash/AS3 中构建一个叙述性点击信息亭应用程序。目前，有几个 (10+) 本地加载的 .flv 文件，我正在将它们加载到时间轴上的 FLVPlayback 组件中。我遇到了加载延迟，想知道这种情况下的最佳实践/最佳案例方案是什么。这些都使用“加载带有播放组件的外部视频”选项进行视频导入。

到目前为止，我已经尝试以两种方式实现它：

1.  在名为“video_player”的舞台上播放一帧，一帧FLVPlayback，并在点击/用户操作切换视频时，我执行以下操作：

    ```
    var new_flv:String = "next_flv.flv";

    video_player.stop();

    video_player.source("_flvs/"+new_flv);

    video_player.seek(0);

    video_player.play(); 
    ```

    这导致延迟从几秒到 10 秒不等。

2.  这对我来说是非常规的，但我在时间线上使用了多个帧。每个帧在舞台上都有一个 FLVPlayback 实例，每个实例在组件参数的“源”属性中都有不同的相对路径（参见[http://www.ashleylovespizza.org/stuff/flv_example.png](http://www.ashleylovespizza.org/stuff/flv_example.png)）。代码基于帧标签在帧之间切换，然后点击播放（在组件参数中也关闭了自动播放）。

    ```
    var new_flv_frame_name:String = "next_frame";

    this.gotoAndStop(new_flv_frame_name);

    this.video_player.play(); 
    ```

问题再次是加载需要很长时间。什么可以阻止这种行为？我在播放头上寻找（）不同时刻的一个长 flv？我可以在单独的 FLVPlayback 实例中预加载，类似于双缓冲吗？

任何提示或最佳实践表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:15:31.853

尽管您没有告诉我从哪里（本地或远程）加载 flv 文件，并且正如您所说您正在构建一个信息亭风格的应用程序，但我将在这里冒险并说您几乎可以肯定将 Adob​​e AIR 用于信息亭应用程序。

没有理由创建多个`FLVPlayback`实例，它能够使用 播放多个视频`getVideoPlayer(index)`，您可以通过调用`close()`它们来管理流。

如果您要远程加载文件，那么使用 Adob​​e AIR，您可以使用`FileStream`该类将每个视频下载到本地文件夹。这将加快播放这些文件的过程。

# c# - 如何加载带有可编辑网格视图的页面及其数据？

> ID：12991255
> 
> 赞同：1
> 
> 时间：2012-10-20T18:08:06.263
> 
> 标签：c#, asp.net, gridview, runtime

真的，我认为这很复杂，我希望这不是我的目标，而是这个 Windows 应用程序

[图片](http://s17.postimage.org/rqg42ht8v/dpng.png)

我有一个按钮来浏览我想要用户选择图像文件夹时的图像文件夹我的页面加载并以可编辑模式显示 agridview 并显示我从文件夹加载的图像数据用户可以更改每一行（每张图像）数据并单击保存按钮以保存所有图像在数据库中，我不知道我该怎么做，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:34:31.570

如果我对您的理解正确，我认为您不需要让 GV 处于编辑模式，您只需要在每一行中包含并上传控件即可。这样，用户可以为每一行选择一个文件，然后单击按钮，您可以遍历 GV 并上传文件（如果选择）。至于 GV 设置，只需像往常一样使用`if (!Page.IsPostBack)`.

```
foreach (GridViewRow g in myGV.Rows)
{
    FileUpload f = g.FindControl("myFileUpload") as FileUpload
    if (f.HasFile)
    {
        // upload file
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:41:35.460

我使用了一个很棒的 jquery API，叫做[Uploadify](http://www.uploadify.com/)

# c# - 获取xml文档中元素数量的快速方法

> ID：12991256
> 
> 赞同：6
> 
> 时间：2012-10-20T18:08:13.767
> 
> 标签：c#, xml-parsing, xmltextreader

是否存在从 XML 文档中获取元素数量以用于进度报告的最佳实践？我有一个 2 GB 的 XML 文件，其中包含我需要处理的航班，我的想法是首先获取文件中所有元素的数量，然后使用计数器显示 x 个航班中的 x 个已导入我们的数据库。

对于文件处理，我们使用 .NET (C#) 中的 XmlTextReader 来获取数据，而无需将整个文档读入内存（类似于 sax 解析）。

所以问题是，我怎样才能很快得到这些元素的数量......是否有最佳实践，或者我应该先浏览整个文档并执行 i++ 之类的操作；?

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T18:13:56.780

您当然*可以*只阅读文档两次 - 一次来简单地计算元素（[`XmlReader.ReadToFollowing`](http://msdn.microsoft.com/en-us/library/ms162536.aspx)例如，继续使用（或可能`ReadToNextSibling`）增加一个计数器：

```
int count = 0;
while (reader.ReadToFollowing(name))
{
    count++;
} 
```

但是，这确实意味着两次读取文件......

另一种方法是查找文件的*长度*，并在您通读*一次*文件时，根据底层流的位置报告到目前为止处理的文件的百分比。这将不太准确，但效率更高。您需要`XmlReader`直接从 a创建，`Stream`以便您可以继续检查位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:10:47.447

```
int count = 0;
using (XmlReader xmlReader = new XmlTextReader(new StringReader(text)))
{
    while (xmlReader.Read())
    {
        if (xmlReader.NodeType == XmlNodeType.Element &&
            xmlReader.Name.Equals("Flight"))
            count++;
    }
} 
```

# clojure - Clojure - 正确显示一些输出

> ID：12991260
> 
> 赞同：1
> 
> 时间：2012-10-20T18:08:38.980
> 
> 标签：clojure

我对clojure很陌生，所以仍在努力学习……还有很多东西。现在我坚持试图让一些输出正确显示。这是我的功能：

```
;function 7 - display the board
(defn display [small medium large]
(let [board (loop [i 0 boardVector [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]]
          ;(prn (bit-test small i)(bit-test medium i)(bit-test large i))
          (if (< i 16)
           (cond
             ;nothing exists
             (and (not(bit-test small i))(not(bit-test medium i))(not(bit-test large i)))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 0)))
             ;only small bit exists
             (and (bit-test small i)(not(bit-test medium i))(not(bit-test large i)))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 1)))
             ;small and medium exists on square
             (and (bit-test small i)(bit-test medium i)(not(bit-test large i)))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 3)))
             ;only medium exists on square
             (and (not(bit-test small i))(bit-test medium i)(not(bit-test large i)))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 2)))
             ;medium and large exists on square
             (and (not(bit-test small i))(bit-test medium i)(bit-test large i))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 6)))
             ;only large exists on square
             (and (not(bit-test small i))(not(bit-test medium i))(bit-test large i))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 4)))
             ;all three exists on square
             (and (bit-test small i)(bit-test medium i)(bit-test large i))
               (recur (+ i 1) (assoc boardVector i (+ (nth boardVector i) 7)))
               )
           boardVector)
         )
    ]
(prn  board)
)
) 
```

这是我用来作为参数传递的内容：

```
(display 2r1001000100 2r101001000 2r111000000) 
```

此函数采用位变量（长度不超过 16...），并根据设置的位计算最终向量。a small 值 1，medium 值 2，large 值 4。这就是为什么我有那个条件语句来概述每种不同的可能性，不包括同时设置 small 和 large 且没​​有 medium set 的可能性。

无论如何，如果这些都没有意义，那么这是实际的问题：如何获得显示为的当前输出：

```
[0 0 1 2 0 0 7 4 6 1 0 0 0 0 0 0]
nil 
```

让它这样显示？

```
0 0 1 2
0 0 7 4
6 1 0 0
0 0 0 0 
```

我尝试过使用诸如 apply、map、str、interpose 之类的函数……但我永远无法弄清楚我对它们做错了什么。目前我将输出显示为副作用（我认为这是正确的名称......），但它总是从 prn 函数的输出返回 nil 。也不知道如何摆脱它。将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:50:09.113

partition it into groups of 4, then print each group:

```
(dorun (map #(apply println %) (partition-all 4 r)))
0 0 1 2
0 0 7 4
6 1 0 0
0 0 0 0 
```

or using a `for` expression:

```
(dorun (for [line (partition-all 4 r)] (apply println line)))
0 0 1 2
0 0 7 4
6 1 0 0
0 0 0 0 
```

or using a `doseq`:

```
(doseq [line (partition-all 4 r)] (apply println line))
0 0 1 2
0 0 7 4
6 1 0 0
0 0 0 0 
```

`dorun` (or `doall`) is required for the `for` and `map` examples because these are lazy and would otherwise not actually print anything unless the sequence they return was consumed. Calling `apply` with `println` and the sequence causes println to get the contents of the sequence as arguments instead of the sequence it's self, which keeps it from printing extra parens.

# haskell - 数据构造函数中的多态回调

> ID：12991261
> 
> 赞同：3
> 
> 时间：2012-10-20T18:08:52.817
> 
> 标签：haskell

我刚开始学习haskell。我有自定义课程

```
class MyClass a where
  doSomething :: a -> () 
```

我可以在构造函数中编写带有多态回调的数据吗？

```
data MyData = MyConstructor {
  callback :: (MyClass m) => m -> () -- error
} 
```

我想对函数参数进行约束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:14:30.493

简而言之，是的，您可以使用`Rank2Types`or `RankNTypes`pragma。

因为您的数据类型是存在量化的。它实际上是

```
data MyData = MyConstructor (forall m. MyClass m => m -> ()) 
```

您需要更高级别的扩展。

# c# - Pacman Game Organization (XNA) - 我应该在哪里/如何检查与鬼/食物的碰撞？

> ID：12991265
> 
> 赞同：3
> 
> 时间：2012-10-20T18:09:16.823
> 
> 标签：c#, xna, game-engine, pacman

我的 Pacman 游戏正在运行，并且我正在尝试通过它来更好地“组织”我的代码。之前，我有这个“TopObject”，它引用了 game1.cs 中的对象，它基本上引用了我游戏中的每个对象（pacman、ghosts、地图等）。我让它可以从任何地方全局访问，这样我就可以从我的幽灵对象访问我的 Pacman 对象，或者从我的幽灵对象访问我的地图/平铺对象，甚至从任何地方访问我的 ContentMananger 来加载内容。

我知道这是不好的做法，所以我试图消除它。例如，我在所有采用“ContentManager”类型的对象上创建了 LoadContent() 方法，这消除了我使用我的 TopObject 调用 ContentManager 的需要。

继续前进，如果没有对我所有对象的全局引用，我将很难做事。例如： - 从我的 Pacman Update()..

*   我需要知道我是否会撞墙。我需要参考我的地图/瓷砖。

*   我需要知道我是否与幽灵相撞，所以我需要引用我的幽灵对象。

*   我需要知道我是否与一些食物发生碰撞然后更新记分牌，所以我需要参考我的记分牌对象。

所以本质上，感觉就像我将把这么多对象引用传递给我所有的对象一样搞得一团糟，感觉做一个“全局”顶级对象要干净得多。

有谁知道如何更好地组织这个，所以我做得很干净？我是否应该检查我的 Pacman Update() 内部的冲突，还是应该创建单独的“PacmanObject.CheckCollisionWith()”并从我的 Game1 Update() 中调用它？碰撞逻辑是否也应该被分离到一个新的类中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:23:36.247

拥有一个包含对您的对象的引用的中心点本身并不是一件坏事。但是，一个好的设计会将与每个对象最相关的操作放在正确的类中。例如，您的播放器不需要参考瓷砖和墙壁。在执行 Move 方法时，玩家可以调用 Map 类中的静态方法，如果下一步移动有效，则返回 true/false。这样，玩家就不会对地图本身有任何参考。

```
public class Player
{
    public void Update()
    {
        //stuff to find nextTile position

        //Call static function toward a class that contains the map data.
        if (Map.TileIsWalkable(nextTile))
            Move();
    }
}

public class Map
{
    public static Map loadedMap; // Handling it as singleton, normally you only load one map at a time.

    public static bool TileIsWalkable(Vector2 position)
    {
        if (loadedMap == null) // Throw assert, shouldn't happen.

        return //whatever test needed in loadedMap structure
    }
} 
```

您还可以有一个 Ghost 管理器来保持对 Ghost 的引用。玩家只需要调用该管理器中的一个方法，该方法将遍历所有幽灵以查看他是否发生碰撞。更好的是，该方法可以采取立场而不是参考。这样，它可以被重复使用，以查看幽灵是否相互碰撞。（随机想法）

有很多方法可以做某事。任何代码设计中最难的是将内容放在更有意义的地方，并使其以后最容易更新和修改。

# php - 谷歌云消息 GCM - 未发送推送通知（服务器端）

> ID：12991267
> 
> 赞同：2
> 
> 时间：2012-10-20T18:09:27.400
> 
> 标签：php, android, google-cloud-messaging

我能够获取设备 ID 并将其保存到我的数据库中，当发生某些事情时，我尝试发送推送通知，但它没有发送到手机。这是我在我的 PHP 中所做的：

```
$url = 'https://android.googleapis.com/gcm/send';

$device_ids = array( $device_id );

$headers = array('Authorization: key=' . 'my_api_key',
'Content-Type: application/json');

$t_data = array();
$t_data['message'] = 'Someone commented on your business.';

$t_json = array( 'registration_ids' => $device_ids , 'data' => $t_data );

$ch = curl_init();

curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Authorization: key=my_id', 'Content-Type: application/json' ) );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $t_json ) );

curl_setopt($ch, CURLOPT_URL, $url);

$result = curl_exec($ch);
if ($result === FALSE)
{
     die('Curl failed: ' . curl_error($ch));
}

curl_close($ch); 
```

这是我从 curl_exec 调用中得到的结果：

```
{"multicast_id":8714083978034301091,"success":1,"failure":0,"canonical_ids":0,"r‌​esults":[{"message_id":"0:1350807053347963%9aab4bd8f9fd7ecd"}]} 
```

我想知道的一件事是我是否必须在应用程序中做一些额外的事情，比如编写我自己的 Reciever 类？谢谢！

编辑：

这是我的 GCMIntentService 类：

```
package com.problemio;

import static com.google.android.gcm.GCMConstants.ERROR_SERVICE_NOT_AVAILABLE;
import static com.google.android.gcm.GCMConstants.EXTRA_ERROR;
import static com.google.android.gcm.GCMConstants.EXTRA_REGISTRATION_ID;
import static com.google.android.gcm.GCMConstants.EXTRA_SPECIAL_MESSAGE;
import static com.google.android.gcm.GCMConstants.EXTRA_TOTAL_DELETED;
import static com.google.android.gcm.GCMConstants.EXTRA_UNREGISTERED;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_LIBRARY_RETRY;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_MESSAGE;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_REGISTRATION_CALLBACK;
import static com.google.android.gcm.GCMConstants.VALUE_DELETED_MESSAGES;

import java.util.Random;
import java.util.concurrent.TimeUnit;

import com.google.android.gcm.GCMBaseIntentService;

import android.app.AlarmManager;
import android.app.IntentService;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.SystemClock;
import android.util.Log;
import android.widget.Toast;

import utils.GCMConstants;

public class GCMIntentService extends GCMBaseIntentService 
{
    public GCMIntentService() 
    {
            super(ProblemioActivity.SENDER_ID);
    }

    @Override
      protected void onRegistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onRegistered: " + regId);
        Toast.makeText(this, regId, Toast.LENGTH_LONG).show();
      }

      @Override
      protected void onUnregistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onUnregistered: " + regId);
      }

      @Override
      protected void onMessage(Context ctxt, Intent message) {
        Bundle extras=message.getExtras();

        for (String key : extras.keySet()) {
          Log.d(getClass().getSimpleName(),
                String.format("onMessage: %s=%s", key,
                              extras.getString(key)));
        }
      }

      @Override
      protected void onError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onError: " + errorMsg);
      }

      @Override
      protected boolean onRecoverableError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onRecoverableError: " + errorMsg);

        return(true);
      } 
} 
```

更新：

查看 LogCat，结果发现消息正在发送到设备。但由于某种原因，设备没有显示推送通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:37:27.610

从响应看来，消息已传递。在 Android 上，您应该有一个扩展 GCMBaseIntentService 的 GCMIntentService 类，以便在设备上接收消息。您应该检查 SDK 示例中的 gcm-demo-client 以获得有关如何在应用程序上实现此功能的好方法。您只需在 CommonUtilities 类中设置 SENDER_ID（您的 google proyect 编号）即可从您的服务器接收消息。

更多信息[在这里](http://developer.android.com/intl/es/guide/google/gcm/demo.html)。

要在 GCMIntentService 上生成通知，您可以使用：

```
 //Issues a notification to inform the user that server has sent a message.

private static void generateNotification(Context context, String message, String title,) {

        int icon = R.drawable.logo;

        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        Intent notificationIntent = new Intent(context, AnActivity.class);

        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);        
        Uri defaultSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);            

         Notification notification = new NotificationCompat.Builder(context)
         .setContentTitle(title)
         .setContentText(message)
         .setContentIntent(intent)
         .setSmallIcon(icon)
         .setLights(Color.YELLOW, 1, 2)
         .setAutoCancel(true)
         .setSound(defaultSound)
         .build();

        notificationManager.notify(0, notification);
} 
```

您是否还在清单上注册了接收方？在应用程序标签下？

```
 <!--
      BroadcastReceiver that will receive intents from GCM
      services and handle them to the custom IntentService.

      The com.google.android.c2dm.permission.SEND permission is necessary
      so only GCM services can send data messages for the app.
    -->
    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.google.android.gcm.demo.app" />
        </intent-filter>
    </receiver>

    <!--
      Application-specific subclass of GCMBaseIntentService that will
      handle received messages.

      By default, it must be named .GCMIntentService, unless the
      application uses a custom BroadcastReceiver that redefines its name.
    -->
    <service android:name=".GCMIntentService" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:14:22.767

如果您打算让您的消息覆盖该类型的先前消息，则只需要一个 collapseKey。因此，如果您要发送应用程序需要同步的消息，您可以给它一个折叠键，这样它只会发送 1 条同步消息。官方[文档](http://developer.android.com/guide/google/gcm/gcm.html#send-msg)描述了如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T05:43:17.657

从 GCM 服务器发送通知时，要使用哪个 url？ [https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)或 [https://gcm-http.googleapis.com/gcm/send](https://gcm-http.googleapis.com/gcm/send)

# ruby - Ruby 移动目录错误：

> ID：12991269
> 
> 赞同：2
> 
> 时间：2012-10-20T18:09:41.207
> 
> 标签：ruby, ruby-1.9

我有一个包含许多子目录的目录，每个子目录都包含要测试的不同版本的程序。

```
all_dirs.each do |dir|
  FileUtils.mv(test_spec, target_dir, :verbose => true)
  system("rspec #{test_folder_name}")
  puts "moving back: '#{spec_dir}' to '#{current_dir}'"
  FileUtils.mv(spec_dir, current_dir, :verbose => true)
end 
```

在大多数情况下，代码是成功的，但有时它拒绝将目录移动到父目录，因为它已经存在。

```
mv ~/test/version-1/01-spec ~/test
~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:509:in `block in mv': File exists - ~/test (Errno::EEXIST)
        from ~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1423:in `block in fu_each_src_dest'
        from ~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1437:in `fu_each_src_dest0'
        from ~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1421:in `fu_each_src_dest'
        from ~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:504:in `mv' 
```

unix`mv`命令是有效的，可以在抛出该异常后执行。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:28:52.143

正如错误告诉您的那样，它失败是因为`~/test`已经存在，并且[FileUtils](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html)默认不会破坏它。`force`如果您不关心覆盖，则可以传递参数：

```
FileUtils.mv(test_spec, target_dir, :verbose => true, :force => true) 
```

# c# - 如何使用 java 或 C# 解析包含 utf-8 字符的 pdf 文件

> ID：12991270
> 
> 赞同：6
> 
> 时间：2012-10-20T18:09:42.817
> 
> 标签：c#, java, parsing, pdf

我有一个包含 utf-8 字符（İ、ğ、ı 和阿拉伯字母等）的 pdf 文件。如何解析这个文件？
我使用 itext 和 pdfBox，但我看到的是“çekti¤i kå¤›da”而不是“çektiği kağıda”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:26:38.480

由于尚未提供样本，我自己创建了阿拉伯语测试数据（实际上，我从 itext-questions 邮件列表中的一些帖子中借用了用于创建测试数据的代码）和一个解析这些数据的测试：

```
package itext.parsing;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Font;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.pdf.BaseFont;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.pdf.parser.PdfTextExtractor;

import junit.framework.TestCase;

public class TextExtractingArabic extends TestCase
{
    public void testExtractArabicChars() throws DocumentException, IOException
    {
        createTestFile(TEST_FILE);

        PdfReader reader = new PdfReader(TEST_FILE.toString());
        String text = PdfTextExtractor.getTextFromPage(reader, 1);
        for (char c: text.toCharArray())
        {
            int i = c<0 ? Integer.MAX_VALUE + c : c;
            System.out.print("\\u");
            System.out.print(Integer.toHexString(i));
        }
    }

    void createTestFile(File file) throws DocumentException, IOException
    {
        Document document = new Document();
        OutputStream os = new FileOutputStream(file);
        PdfWriter.getInstance(document, os);
        document.open();

        BaseFont bfArialUni = BaseFont.createFont("C:\\Windows\\Fonts" + "\\ARIALUNI.TTF",
                                            BaseFont.IDENTITY_H, BaseFont.EMBEDDED);            
        Font fontArialUni = new Font(bfArialUni, 12f);
        Phrase myPhrase = new Phrase(LAWRENCE_OF_ARABIA, fontArialUni);

        PdfPTable table = new PdfPTable(1);
        PdfPCell cell = new PdfPCell(new Paragraph(myPhrase));
        cell.setColspan(3);
        cell.setPaddingRight(15f);
        cell.setBorder(PdfPCell.NO_BORDER);
        cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);
        table.addCell(cell);

        document.add(table);
        document.close();
        os.close();
    }

    final static File TEST_FILE = new File("arabic-test.pdf");
    final static String LAWRENCE_OF_ARABIA =
        "\u0644\u0648\u0631\u0627\u0646\u0633\u0627\u0644\u0639\u0631\u0628";
} 
```

字符串 LAWRENCE_OF_ARABIA 在语音上有点接近阿拉伯的劳伦斯。

文本的输出是：

```
\ufe8f\ufeae\ufecc\ufedf\ufe8e\ufeb4\ufee7\ufe8d\ufead\ufeee\ufedf 
```

虽然这与输入不同，但快速查看 unicode 表会发现输入来自 Unicode Range“Arabic”，输出来自 Unicode Range“Arabic Presentation Forms-B”。此外，输出是从左到右的，而输入是从右到左的。

我自己不懂阿拉伯语，因此不能说输出有多准确，但解析的字符肯定来自适当的 Unicode 范围。

据可以知道，在没有访问原始海报的情况下可以使用原始海报，因此，问题似乎不在于解析，而在于正确使用解析器的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:41:26.590

正如 Bobrovsky 提到的，它可能看起来不错，而底层编码并不完全正确。在 PDF 查看器中看起来像 X 的字形可能不会在内部编码为字符 X。您可以通过将文本从 Adob​​e PDF Reader 复制粘贴到支持该字符集的文本编辑器来轻松测试这一点。如果复制粘贴OK，则可以提取，否则不能提取（无需采取手动措施，例如自定义映射）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:45:58.243

有时 PDF 是使用在实际字体字节和描述字体的 PDF 结构中指定的不同编码生成的。

在这种情况下，文本显示得很好，但可能无法正确提取。我经常在西欧语言中看到这种情况。

为了克服这个问题，[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)会自动检测是否更喜欢字体文件编码。

这是显示[不同 PDF 文本提取选项](https://bitmiracle.com/blog/extract-text-from-pdf-in-net)的文章。

免责声明：我为图书馆的供应商工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:51:43.590

为每个字符调用下面的函数 escape(String char)。它将返回 UTF-8 字符。此功能也来自 PDFBox。

```
 private String escape(String chars)
{
    StringBuilder builder = new StringBuilder(chars.length());
    for (int i = 0; i < chars.length(); i++)
    {
        char c = chars.charAt(i);
        // write non-ASCII as named entities
        if ((c < 32) || (c > 126))
        {
            int charAsInt = c;
            builder.append("&#").append(charAsInt).append(";");
        }
        else
        {
            switch (c)
            {
            case 34:
                builder.append("&quot;");
                break;
            case 38:
                builder.append("&amp;");
                break;
            case 60:
                builder.append("&lt;");
                break;
            case 62:
                builder.append("&gt;");
                break;
            default:
                builder.append(String.valueOf(c));
            }
        }
    }
    return builder.toString();
} 
```

这是一个[类似的问题](https://stackoverflow.com/questions/12577092/how-to-get-unicode-of-the-characters-from-pdf-using-java-and-pdfbox)。请看一看。

# linux - cuda-gdb 在 Linux 上的 nsight 中不起作用

> ID：12991271
> 
> 赞同：1
> 
> 时间：2012-10-20T18:09:47.133
> 
> 标签：linux, cuda, nsight, cuda-gdb, optimus

我在我的 Ubuntu 12.10 中安装了 cuda 5，它运行良好，我也可以在终端中通过 cuda-gdb 编译和调试。我正在尝试使用 nsight，它可以毫无问题地编译和执行我的代码，但是当我尝试调试时出现以下错误

```
Error in final launch sequence
Failed to execute MI command:
-gdb-set cuda api_failures ignore
Error message from debugger back end:
Undefined set cuda command: "api_failures ignore".  Try "help set cuda".
Undefined set cuda command: "api_failures ignore".  Try "help set cuda". 
```

我正在使用 ubuntu 12.10 64 位并使用 optirun (bumblebee) 启动 cuda 可执行文件和 nsight，因为我有 GTX 675M (optimus)。我通过 apt-get 安装了 cuda-gdb，我得到了 4.2 版：

```
frederico@zeus:~/Dropbox/coisas/projetos/delta_cuda$ cuda-gdb --version
NVIDIA (R) CUDA Debugger
4.2 release
Portions Copyright (C) 2007-2012 NVIDIA Corporation
GNU gdb (GDB) 7.2 
```

我认为这不是问题，因为我可以单独使用它（无需 nsight）。我也将 nsight 更改为使用 optirun 启动 cuda-gdb，但仍然收到相同的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:16:33.723

问题是 cuda-gdb 的版本，我必须使用 cuda-gdb 版本 5。它带有工具包版本 5，只是对 /usr/bin 进行了象征性的舔，它就可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T08:08:13.600

可以使用***nsight*和 bumblebee 调试 CUDA 程序**。（nsight v.5.0.0，大黄蜂 3.2.1，Debian sid）

您只需在以下位置替换调试器命令行（*CUDA GDB Executable*）： *项目资源管理器->右键单击您的项目->选择“调试为”->单击“调试配置...”->选择“调试器”选项卡*

CUDA GDB 可执行文件：（`optirun --no-xorg cuda-gdb` 另一种可能性是制作一个小的 shell 脚本，如下所示`/usr/bin/opti-cuda-gdb`：）

```
#!/bin/bash
optirun --no-xorg /usr/bin/cuda-gdb $* 
```

这样 optirun 不会为 gdb 启动虚拟屏幕，GPU 不接受图形并且可以进行调试。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:58:40.260

无需创建此链接。

您可以在*Run/Debug Configurations...*菜单中选择`cuda-gdb`nsight 使用的可执行文件。在此菜单中，单击*C/C++ Application*下的应用程序，然后选择*Debugger*选项卡，您可以在其中浏览文件系统并设置 cuda-gdb-5.0 可执行文件的路径。

# python - 在python中将二进制字符串解释为整数

> ID：12991273
> 
> 赞同：0
> 
> 时间：2012-10-20T18:10:16.853
> 
> 标签：python

我正在使用二进制模式在 python 中读取文件（磁盘映像和 /dev/sda 等）。我正在读取第一个扇区（512 字节）并尝试打印磁盘信息（参考：[维基百科文章](http://en.wikipedia.org/wiki/Master_boot_record)）。

为了解释分区中第一个绝对扇区的 32 位 LBA 之类的东西，我正在做类似的事情 -

```
def int32(bytes):
    return int(bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0])

def int16(bytes):
    return int(bytes[1]<<8|bytes[0]) 
```

`print('LBA:',int32(partitionEntry[8:12]))`

在 python 中是否有本地 wat 来执行此操作？`intVar=(int*)someBasePointer`作为C 中的类型转换

* * *

在标记为已回答后添加：

有没有办法为奇数位结构做到这一点？就像[CHS](http://en.wikipedia.org/wiki/Master_boot_record#Partition_table_entries)一样。C（柱面）是 10 位，一个字节 8 位，另一个字节 2 位。我目前的方法是

```
def getCHS(bytes):
    c=bytes[1]&3<<8|bytes[2]
    h=bytes[0]
    s=bytes[1]&63
    return {'c':c,'s':s,'h':h} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:16:06.770

你想要这个[`struct.unpack()`](http://docs.python.org/library/struct.html#struct.unpack)功能。

```
import struct

def int32(some_bytes):
    return struct.unpack("i", some_bytes)[0]

def int16(some_bytes):
    return struct.unpack("h", some_bytes)[0] 
```

如果您从使用与当前系统不同的字节序值的系统读取，您可能还需要在格式字符串中指定字节序。

( `i`and`h`是有符号的 int 版本；如果你想要无符号的，使用`I`and `H`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T18:16:36.193

对于简单的 1、2 或 4 字节字段，最好的选择可能是[`struct.unpack`](http://docs.python.org/library/struct.html#struct.unpack). 尝试类似：

```
def int32(bytes):
    return struct.unpack("i", bytes[:4])[0] 
```

您可能需要使用`"<i"`或`">i"`作为格式字符串指定字节序。

然而，更不寻常的字段宽度需要屏蔽和/或位移。你的方法效果很好；或者，您可以解压缩足够大小的无符号类型，但它不会节省太多工作：

```
def getCHS(bytes):
    h, r = struct.unpack("BH", bytes[:3])
    c = r & 0x3F
    s = r >> 10
    return {'c':c,'s':s,'h':h} 
```

# android - 如何修改 Android 蓝牙聊天以连接 A2DP 设备？

> ID：12991274
> 
> 赞同：2
> 
> 时间：2012-10-20T18:10:19.753
> 
> 标签：android, bluetooth, a2dp

我正在尝试修改蓝牙聊天程序以通过 A2DP 配置文件与设备连接。我的平板电脑已经配对并连接到设备，但是当我启动程序时它说它无法连接。这是我更改的唯一代码：

```
public BluetoothChatService(Context context, Handler handler) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;

    mAdapter.getProfileProxy(context, mProfileListener, BluetoothProfile.A2DP);
}
    private BluetoothProfile.ServiceListener mProfileListener = new BluetoothProfile.ServiceListener() {
        public void onServiceConnected(int profile, BluetoothProfile proxy) {
            if (profile == BluetoothProfile.A2DP) {
                mBluetoothA2DP = (BluetoothA2dp) proxy;
            }
        }
        public void onServiceDisconnected(int profile) {
            if (profile == BluetoothProfile.A2DP) {
                mBluetoothA2DP = null;
            }
        }

    }; 
```

这在 BluetoothChatService.java 文件中。在此代码上方，我定义了私有 BluetoothA2dp mBluetoothA2DP；

# c# - 如何在 ASP.NET C# 中使用 Session 更改替换对象的变量

> ID：12991275
> 
> 赞同：2
> 
> 时间：2012-10-20T18:10:24.700
> 
> 标签：c#, asp.net, session

我试图弄清楚如何通过网络浏览器更改客户的订单。客户将订购带有产品 ID（键）、产品名称、产品价格和他想要的数量的项目。**我想知道如何更改他的订单，方法是用旧数量的旧物品替换具有不同数量的相同物品，所以**基本上点击选择物品并放置他希望购买的 2 个不同数量的物品。购物车包含购买的物品，所以我想知道如何从购物车中销毁 OrderItem 然后重新创建它。

当我的代码找到已经在购物车中的密钥时，它需要被销毁并使用新的 Quantity（来自网络应用程序的文本框）重新创建。

```
 protected void btnOrder_Click(object sender, EventArgs e)
{
    //Check for Shoppingcart object
    // Create first if not there
    if (Session["cart"] == null)
        Session["cart"] = new ShoppingCart();
    int quantity = 0;

    // make sure there is text
    if (txtQuantity.Text.Trim().Length != 0)
    {
        quantity = int.Parse(txtQuantity.Text);

        if (((ShoppingCart)Session["cart"]).
            keyExists(int.Parse(productID.Text)))
        {
        //Here I should Destroy the current item that exists and replace with new one

        }
        else  // This is a new item
        {
            // Make the item
            OrderItem item = new OrderItem(
                int.Parse(productID.Text), productName.Text,
                double.Parse(productPrice.Text),
                int.Parse(txtQuantity.Text));
            // add to cart  
            ((ShoppingCart)Session["cart"]).addToCart(item);

        }
        // How does this work? Who is sender?
        this.btnReturn_Click(sender, e);
    }
    else
    {
        Response.Write("Nothing Ordered<br>You must order some of the product or return to the Catalog");
    } 
```

这是 OrderItem 对象

```
public class OrderItem
{
private int productID;
private string prodName;
private double unitPrice;
private int quantityOrdered;

private string exceptionStr;

public OrderItem(int id, string name, double price, int quantity)
{
    prodName = name;
    exceptionStr = "Numeric data must not be negative";
    if ( id < 0 || price < 0 || quantity < 0)
    {
        throw new System.ArgumentException(exceptionStr);
    }
    else
    {
        productID = id;
        unitPrice = price;
        quantityOrdered = quantity;
    }
}

#region Public Properties
public int ProductID
{
    get
    {
        return productID;
    }
}

public string ProductName
{
    get 
    {
        return prodName;
    }
}

public double UnitPrice
{
    get
    {
        return unitPrice;
    }
}

public int QuantityOrdered
{
    get
    {
        return quantityOrdered;
    }
    set
    {
        if( value < 0 )
        {
            throw new ArgumentException(exceptionStr);
        }
        else
        {
            quantityOrdered = value;
        }
    }
}

#endregion
} 
```

这是购物车供您查看：

```
 public class ShoppingCart : IEnumerable
 {
private SortedList theCart;

public ShoppingCart() {
    theCart = new SortedList();
} // end of Constructor

public bool HasItems {
    get{
        bool hasItems = false;
        if( theCart.Count > 0 )
            hasItems = true;
        return hasItems;
    }
    set {
        // ignore this is read only
    }
} // end of HasItems

public void addToCart(OrderItem item) {
    theCart.Add(item.ProductID, item);
}// AddToCaArt

/// <summary>
/// deletes item that is passed
/// </summary>
/// <param name="item"></param>
public void deleteFromCart(OrderItem item)
{
    theCart.Remove(item.ProductID);
} // end deleteFromCart

/// <summary>
/// deletes the item with this id key
/// </summary>
/// <param name="id"></param>
public void deleteFromCart(int id)
{
    theCart.Remove(id);
} // end deleteFromCart
public OrderItem[] getCartContents()
{

// need to create stuff
    OrderItem[] stuff = null;
    theCart.Values.CopyTo(stuff, 0);

    return (stuff);
} // end getCartContents

public bool keyExists(int ID) {

    return theCart.ContainsKey(ID);
}// end keyExists

public ICollection Values
{
    get
    {
        return theCart.Values;
    }
}

#region IEnumerable Members

public IEnumerator GetEnumerator()
{
    return theCart.GetEnumerator();
}

#endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:50:07.287

I would highly recommend thinking about from a class or model level how a shopping cart would look. I think a set of classes like the following would help a great deal (not the best but an ok design from scratch):

```
[Serializable]
public class ShoppingCartItem
{
  public ShoppingCartItem(guid key, decimal price, int quantity)
  {
    this.Key = key;
    this.Price = price;
    this.Quantity = quantity;
  }

  public Guid Key { get; private set; }
  public Decimal Price { get; private set; }
  public int Quantity { get; set; }
}

[Serializable]
public class ShoppingCart
{
  public ShoppingCart()
  {
    this.Clear();
  }

  public ICollection<ShoppingCartItem> Items { get; private set; }

  public int ItemCount 
  {
    get { return this.Items.Sum(i => i.Quantity); }
  }

  public decimal Subtotal
  {
    get { return this.Items.Sum(i => i.Quantity * i.Price); }
  }

  public void Clear()
  {
    this.Items = new List<ShoppingCartItem>();
  }
} 
```

Now the ShoppingCart is serializable for the ability to be stored in ASP.Net session (or making a wish list :))

Now I'm not a fan of the loosely typed ASP.Net session so I borrowed, from some where I can't remember, this fantastic class to make strongly typed Session objects:

```
using System;
using System.Web;

namespace Company.Product.Web.UI.Domain
{
    public abstract class SessionBase<T> where T : class, new()
    {
        private static readonly Object _padlock = new Object();

        private static string Key
        {
            get { return typeof(SessionBase<T>).FullName; }
        }

        public static T Current
        {
            get
            {
                var instance = HttpContext.Current.Session[Key] as T;

                if (instance == null)
                {
                    lock (SessionBase<T>._padlock)
                    {
                        if (instance == null)
                        {
                            HttpContext.Current.Session[Key] = 
                              instance = new T();
                        }
                    }
                }

                return instance;
            }
        }

        public static void Clear()
        {
            var instance = HttpContext.Current.Session[Key] as T;
            if (instance != null)
            {
                lock (SessionBase<T>._padlock)
                {
                    HttpContext.Current.Session[Key] = null;
                }
            }
        }

    }
} 
```

To use it for this example I would then create:

```
public class ShoppingCartSession : SessionBase<ShoppingCart> { } 
```

Then I can use it anywhere in my code:

```
var item = ShoppingCartSession.Current.Items.FirstOrDefault(i => i.Key= key);

if (item == null)
{
  ShoppingCartSession.Current.Items.Add(
    new ShoppingCartItem(Key, price, quantity));
}
else
{
  item.Quantity = item.Quantity + quantity;
} 
```

Strongly typed session shopping cart object that is extensible and allows you to do what you'd want and more. It can also be accessed by other parts of your application to show the number of items in the cart and a subtotal for an area, say at the top of your application to show a small preview of the shopping cart status.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:45:44.277

在您的`ShoppingCart`课程中，您可以添加一个名为`IncreaseQuantity(int productID)`（和一个`DecreaseQuantity`方法）的方法。

```
public void IncreaseQuantity(int productID)
{
   int indexOfProduct = theCart.IndexOfKey(productID);

   if(indexOfProduct != -1)
   {
       this.theCart[indexOfProduct].quantityOrdered++;
   }
} 
```

然后从您的会话中调用该方法

```
ShoppingCart cart = (ShoppingCart)Session["cart"];

if (cart.keyExists(int.Parse(productID.Text)))
{
    //can store the parsed int in a variable instead to prevent...
    //having to parse twice.
    cart.IncreaseQuantity(int.Parse(productID.Text));    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:31:54.407

一种方法是将数量保持为每个 OrderItem 的一部分，然后通过枚举每个单独的 OrderItem 数量来获取购物车的总数。但是每个 OrderItem ID 必须只出现一次 ShoppingCart。

例如，在 ShoppingCart 中添加一个方法，例如

```
 public OrderItem Retrieve(int id)
    {
        return theCart[id] as OrderItem;
    } 
```

然后如果购物车已经包含相同的产品 ID

```
 OrderItem orderItem = cart.Retrieve(1);
    item.QuantityOrdered += 1; 
```

最后将更新后的购物车对象分配给 Session 变量。

另一种实现方法是在 ShoppingCart 中添加另一个 OrderItem 并维护按 OrderItem Id 分组的计数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:38:21.037

我认为没有办法。

是什么让您需要重新创建对象？
是性能，还是保持代码干净？

**如果是性能问题：**
考虑在 Session 上为每个项目保存一个单独的对象，如下所示 -

```
int itemID = int.Parse(productID.Text);
int productQuantity = Session["item_number_" + itemID]; 
```

**如果这是保持代码清洁的问题：**
考虑将所有`Session`逻辑放在一个属性中：

```
public ShoppingCart SessionCart
{
    get
    {
        if (Session["cart"] == null)
            return new ShoppingCart();
        else
            return (ShoppingCart)Session["cart"];
    }
    set
    {
        Session["cart"] = value;
    }
} 
```

# php - 使用日期时间插入日期 GMT

> ID：12991278
> 
> 赞同：1
> 
> 时间：2012-10-20T18:10:38.293
> 
> 标签：php

如何更改此设置，以便时间为 GMT 日期正确但时间错误。

任何帮助将不胜感激，谢谢

```
function format_mysql_datetime($raw) {
    $format = '%Y-%m-%d %H:%M:%S';
    $stringtime =  strtotime($raw);
    return strftime($format, $stringtime);  
}

$raw = date('c');

mysql_query("INSERT INTO `Cars` VALUES ('', 'Pending', '$price', '{$fetchAccount['email']}', '$raw', '$content', '$description', '$area', '$town', '$UK', '$target', '0')") ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:13:14.533

问题在于时区

用这个

```
date_default_timezone_set('GMT'); 
```

# javascript - 基于 url 路由 mvc 3 的脚本标签的条件更改

> ID：12991283
> 
> 赞同：2
> 
> 时间：2012-10-20T18:11:03.340
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-routing, requirejs

我将 requireJS 用于我的混合应用程序。现在我需要使用 url 上的条件更改位于我的布局页面中的脚本标记。脚本标签看起来像这样

```
<script data-main="@Url.Content("~/Scripts/main")" src="@Url.Content("~/Scripts/Libs/Requirejs/require.min.js")" type="text/javascript"></script> 
```

现在，当页面加载时，**`/Home/Login`**上面的脚本标记应更改为

```
<script data-main="@Url.Content("~/Scripts/login")" src="@Url.Content("~/Scripts/Libs/Requirejs/require.min.js")" type="text/javascript"></script> 
```

当我再次加载页面时**`/Mail/Index`**，上面的脚本标记应更改为

```
<script data-main="@Url.Content("~/Scripts/mail")" src="@Url.Content("~/Scripts/Libs/Requirejs/require.min.js")" type="text/javascript"></script> 
```

现在请注意，所有三个页面都使用相同的`**_Layout.cshtml**`页面。并且上面的脚本标签仅位于`**_Layout.cshtml**`页面中。现在我如何跟踪这个脚本来更改上面提到的 Url 路由更改时的脚本标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:20:55.090

我只是为此使用一个部分。在布局页面中：

```
@RenderSection("RequireScripts") 
```

并将脚本放在每个页面中：

```
@section RequireScripts {
    <script data-main="@Url.Content("~/Scripts/main")" src="@Url.Content("~/Scripts/Libs/Requirejs/require.min.js")" type="text/javascript"></script>
} 
```

* * *

如果您想避免重写整个内容（只需要相对路径），那么我想您可以使用动态`Page`变量：

```
@if (Page.RequireScript != null)
{
    <script src='~/Scripts/@Page.RequireScript'></script>
} 
```

然后脚本块将输出到定义`RequireScript`.

```
@{
    Page.RequireScript = "Libs/Requirejs/require.min.js";
} 
```

# jakarta-ee - EJB 未注入导致 NullPointerException

> ID：12991286
> 
> 赞同：4
> 
> 时间：2012-10-20T18:11:15.603
> 
> 标签：jakarta-ee, nullpointerexception, ejb

我是 Java EE 的新手，并且已经尝试解决这个问题将近一周。这是我的会话 bean 中的代码，我在其中获得了`NullPointerException`. 发现实体管理器没有被注入。

来自会话 bean 的代码：

```
package session;

import entity.User;
import java.util.Iterator;
import java.util.ArrayList;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

@Stateless
public class UserFacade extends AbstractFacade<User> {
    @PersistenceContext (unitName = "EXAMPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
    return em;
    }

    public UserFacade() {
    super(User.class);
    }

    public String validateUser(String username, String password) {
    System.out.println("in facade");    
    boolean pwdMatch = false;

    System.out.println("in UserInfoFacade validate " + em);
    try {
        System.out.println("username " + username);
        System.out.println("password " + password);

        if(em == null) {
        System.out.println("em is null");
        }
        else {
        System.out.println("em is not null");
        }

        List results = em.createNamedQuery("User.findByUserName").setParameter("userName", username).getResultList();

        if(results == null) {
        System.out.println("results is null");
        }
        else {
        System.out.println("results is not null");
        }
        System.out.println("Entity manger is open " + em.isOpen());

        if (!results.isEmpty())
        {

            Iterator userList = results.iterator();
            while (userList.hasNext())
            {
            User user = (User) userList.next();
            if (user != null)
            {
                if (user.getPassword().equals(password))
                {
                pwdMatch = true;
                }
                else {
                pwdMatch = false;
                }
            }
            else {
                return "NULL";
            }
            }
            if (pwdMatch) {
            return "MATCH";
            }
            else {
            return "NO_MATCH";
            }
        }
        else {
        return "NOT_FOUND";
        }
    } catch (Exception ex) {
        //ex.printStackTrace();
        System.out.println("Caught exception in UserFacade " + ex.toString());
    }
    return "NULL";
    }

} 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="EXAMPU" transaction-type="JTA">
      <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
      <jta-data-source>EXAM</jta-data-source>

    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

托管 bean 的代码：userBean

```
package managed;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import session.UserFacade;
import javax.ejb.EJB;

@ManagedBean
@SessionScoped
public class userBean {

    private String username, password;
    private String response="" ;
    private UserFacade userFacade;

    public userBean() {
        this.userFacade = new UserFacade();
    }

    public String getUsername() {
        return username;
    }

    public String getPassword() {
        return password;
    }

    public String getResponse() {
        return response;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public void setResponse(String response) {
        this.response = response;
    }

    public String validate() {
        System.out.println("in validate going to user facade" + username + password);
        response = userFacade.validateUser(username,password);
        System.out.println("validUser value  " + response);
        if (response.equals("MATCH")){           
            return "welcome.xhtml";
         }
        else
            return "index.xhtml";
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:40:40.753

调用`new UserFacade()`只会做它在 Java 中总是做的事情：调用类的无参数构造函数`UserFacade`。

要获得对 EJB 的引用，您需要将其注入托管 bean，或者使用 JNDI 检索对 EJB 的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:43:31.560

在managedBean中使用DI注入ejb，不要在mb的构造函数中创建实例：

```
@ManagedBean @SessionScoped 
public class userBean {
    @EJB
    UserFacade  userFacade;
} 
```

# jquery - 旧浏览器支持的 jQuery 备份

> ID：12991287
> 
> 赞同：1
> 
> 时间：2012-10-20T18:11:23.067
> 
> 标签：jquery, internet-explorer

[https://stackoverflow.com/a/12059220/1421561](https://stackoverflow.com/a/12059220/1421561)

我喜欢 Davids 代码，但想知道在 < IE7 中支持它的最佳方式。我的第一个想法是使用“如果有孩子添加班级”的声明。然后该类将链接到以类似方式定位的背景图像。

你的解决方案是什么？

这是戴维斯小提琴：http: [//jsfiddle.net/w9xnv/2/](http://jsfiddle.net/w9xnv/2/)

编辑：在 < IE7 中对此的支持：

```
.menu li > a:after { margin-left: 5px; content: '\25BA'; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:11:13.023

不幸的是，我不知道在 IE7 或更早版本中支持`:before`and选择器的任何方法。`:after`它根本不受支持。

对于很多 CSS 的东西，有一些技巧可以迫使旧的 IE 工作——像[Selectivizr](http://selectivizr.com/)或[CSS3Pie](http://css3pie.com/)这样的工具。

但是我知道没有这样的黑客`:after`。对于那个很抱歉。

你可以自己研究一下：

*   [http://caniuse.com/#search=after](http://caniuse.com/#search=after)确认浏览器支持。该站点还列出了相关资源，其中通常包括指向相关黑客的链接。（虽然没有列出这个）

*   [https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills) - 在旧浏览器中实现现代浏览器功能的非常全面的黑客列表。同样，这里没有支持的迹象`:after`。

我真诚的建议是在您的网站上放弃对 IE7 的支持。除非您有特定的支持需求，否则几乎没有人会注意到——如今，IE7 用户很少；它的使用量比 IE6 下降得快得多，如今它们都占全球浏览器使用量的 1% 以下。自己判断是否值得为那一半的用户（他们可能已经习惯于看到无论如何都不能正常工作的网站）出汗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:13:54.603

似乎没有人读到我想要一个 jQuery 备份。我已经明白，IE7 的 CSS 不支持这一点。

无论如何，这是我的解决方案，如果有人会寻找同样的东西。

JS（jQuery）：

```
<!--[if IE 7]>
    <script type="text/javascript"> 
         $(function () {
             $("#mainnavi li:has(ul)").addClass("ie7_dropdown_arrow");
         });    
    </script>   
<![endif]--> 
```

CSS：

```
#mainnavi .ie7_dropdown_arrow {
    *background: url(../images/dropdown_arrow.png) no-repeat right 0px;
    *padding-right: 20px;
}

#mainnavi .ie7_dropdown_arrow:hover {
    *background: url(../images/dropdown_arrow.png) no-repeat right -15px;   
} 
```

# c - SQLite：sqlite3_prepare_v2 的错误调用-> SIGSEGV

> ID：12991288
> 
> 赞同：2
> 
> 时间：2012-10-20T18:11:32.953
> 
> 标签：c, sqlite, segmentation-fault

我一直坚持使用 SQLite 完成作业。我使用 2 列；第一个用于产品，第二个用于计数。用户添加新产品，这会更新计数。我们必须控制用户不会再次添加相同的产品，或者阻止他选择比可用单位更多的单位。我们必须经常使用它，所以我创建了函数：

```
int exists(char *param, sqlite3** ppDb) //0 if product exists
{
    int error = 0;
    char *a = NULL;
    sqlite3_stmt **ppStmt = NULL;
    const char **pzTail = NULL;
    char *zSQL = sqlite3_mprintf("SELECT 'products' FROM 'table' WHERE 'products' LIKE '%q'", param);
//HERE IT FALS
    error = sqlite3_prepare_v2(
      *ppDb,                /* Database handle */
      zSQL,                 /* SQL statement, UTF-8 encoded */
      (sizeof(zSQL)+1),         /* Maximum length of zSql in bytes. */
      ppStmt,               /* OUT: Statement handle */
      pzTail                /* OUT: Pointer to unused portion of zSql */
    );
    sqlite3_free(zSQL);
    a = (char*) sqlite3_column_text(*ppStmt, 0);
    return strcmp(a, param); //0 if same -> product is in db yet
}
//similar one for count 
```

称呼

```
int main(int argc, const char *argv[])
{
    sqlite3 *pDb;
    int error = 0;
//parsing input
    error = sqlite3_open(argv[1], &pDb);
    if (error == 0)
    {
        sqlite3_exec(
          pDb,      /* An open database */
          "CREATE TABLE 'table' ('products', 'quantity')",  /* SQL */
          0,        /* Callback function */
          NULL,     /* 1st argument to callback */
          NULL      /* Error msg written here */
        );

        if (exists(param[1], &pDb) == 0) 
        {
            fprintf (stderr, "ERROR: Product exists yet\n");
        }
        else
        {
            char *zSQL = sqlite3_mprintf("INSERT INTO 'table' VALUES ('%q', '0')", param[1]);
            error = sqlite3_exec(
              pDb,      /* An open database */
              zSQL,     /* SQL to be evaluated */
              0,        /* Callback function */
              NULL,     /* 1st argument to callback */
              NULL      /* Error msg written here */
            );
            sqlite3_free(zSQL);
            if (error == 0) printf("Added\n");
            else printf("%i", error);
        }
    }
    else return 1;
    return 0;
} 
```

它失败了`sqlite3_prepare_v2`。我预计 on 上的指针有问题`pDb`，但我无法修复它（我不喜欢指针 - 对于初学者来说工具太强大了）。当它失败时，调试器堆积在 sqlite3.c 的第 93396 行（* ppStmt = 0; - 它写在它不应该写的地方）。

在linux x64上编译：

`gcc -std=c99 -Wall -pedantic -Wextra -Werror -DSQLITE_THREADSAFE=0 -ldl -o sqlite main.c sqlite3.c`

没有错（如果我复制了错误的括号，请忽略它 - 这不是问题），SQLite 3.7.14.1

对不起我的英语，我来自捷克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:01:50.717

`sqlite3_prepare_v2`想要将语句指针写入您的输出变量，但您没有给它一个指向该指针变量的指针，而是给它一个`NULL`指针。利用：

```
sqlite3_stmt *pStmt;
sqlite3_prepare_v2(..., &pStmt, ...); 
```

* * *

还要注意，标识符应该用`"double quotes"`or`[brackets]`或 or引用

```
`backticks` 
```

但不是 with `'single quotes'`，它用于文字字符串。

# delphi - Delphi 想要包名作为 exe 扩展名

> ID：12991290
> 
> 赞同：0
> 
> 时间：2012-10-20T18:11:58.700
> 
> 标签：delphi, package

我的项目动态链接到 PackageCommon.bpl。分布式我的 project.exe 在运行时需要 PackageCommon.EXE，但是当我将 .bpl 重命名为 .exe 时它工作正常。是什么原因？

[![图片](../Images/7ef926224940ac5967ed4213190b7840.png)](https://i.stack.imgur.com/liTG3.png)

我在 Windows 7 上运行 Delphi XE3。

# apache - 将多个域重定向到子目录

> ID：12991298
> 
> 赞同：0
> 
> 时间：2012-10-20T18:13:02.410
> 
> 标签：apache, .htaccess

我有多个域指向我的 VPS（虚拟专用服务器）。我想要的是，例如，如果我写：`www.domain1.com`，重定向到`www.domain.com:8080/app1`，因为我有 Tomcat 的应用程序。与`www.domain2.com`, to`www.domain2.com:8080/app2`等相同。

我可以用 htaccess 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:27:44.817

我解决了我的问题：

```
RewriteCond  %{HTTP_HOST}      ^www.domain1\.com$

RewriteRule  ^(.*)             http://www.domain1.com:8080/app1$1      [R=301,L] 
```

在.htaccess 中，与其他相同。

# php - 无法从下拉列表中选择结果

> ID：12991309
> 
> 赞同：3
> 
> 时间：2012-10-20T18:14:22.917
> 
> 标签：php, mysql, drop-down-menu

我是新手，我正在尝试编写一个脚本，它将查询数据库并在下拉列表中返回所有用户名，然后复制所选名称，然后当您向他们注册 Dog 时，它将复制名称进入数据库，所以所有者可以有很多狗，但狗只能有 1 个所有者......我可以输入名称和品种，但不能输入下拉列表中的结果，我确实尝试让 java 脚本将所选项目拉入下拉到 $ownername 在“插入...”脚本中的位置

如果你能帮助我，你能给我发消息吗？我会链接你下载的文件

```
mysql_query("INSERT INTO `dog`(`id`, `dogname`, `breed`, `owner`)
 VALUES  ('', '$reg_dogname', '$breed', '$row');") or die (mysql_error());
     $userid = mysql_insert_id();

}}

$sql = mysql_query('SELECT `username` FROM  `users`');
$ownername = array();
while ($row = mysql_fetch_array($sql)){ 
    $ownername[] = $row; 
```

* * *

```
 <select id="dropdown" name="dropdown" onchange="selectDropdown()">
  <?php
  foreach ($ownername as $ownername1) {
  ?> 
  <option value="<?php echo $ownername1['username']?>">
    <?php echo $ownername1['username']?>
    </option>
  <?php
  }
  ?>
  </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:48:21.693

在您发布代码之前，很难给您一个特定于问题的答案，但我认为这对您来说效果很好：

- 为所有者、品种和狗创建关系表：

```
Table: owners
Fields:
id_key: integer, auto number, primary key - table index
owner: varchar, 16 character, unique index - account records (unique prevents duplicate account records)
password: varchar, 32 character (assuming you are using md5 encryption, you will always get a 32 character result. Additional security concerns are beyond the scope of this question)
any other account related fields (but not dogs, give them their own table)

Table: breeds
Fields:
id_key: integer, auto number, primary key - table index
breed: varchar, 16 character, unique - available dog breeds

Table: dogs
Fields:
id_key: integer, auto number, primary key - table index
dog: varchar, 16 character, index - dog owned by account
breed: varchar, 32 character, index, foreign key= breeds.breed on delete=restrict on update=cascade (prevents duplicate breed entries during data entry)
owner: varchar, 16 character, index, foreign key= owners.owner on delete=cascade on update=cascade (this constricts the dog owner to existing accounts) 
```

然后制作一个像这样的表格：

```
<?php
$formdata=array(
    owners => array(),
    breeds => array()
);
require_once 'dbconnection.php';
echo '<form id="dog_input" name="dog_input" method="post">';
$result=mysql_query("SELECT `owner` FROM owners;");
while ($row = mysql_fetch_row($result)) {
    array_push($formdata[owners], $row[0]);
}
$result=mysql_query("SELECT `breed` FROM breeds;");
while ($row = mysql_fetch_row($result)) {
    array_push($formdata[breeds], $row[0]);
}
?>
<FORM name="dog_input" method="post" action="dog_data.php">
    <ul>
        <li>
            <label for="owner">Dog Owner</label>
            <SELECT name="owner" id="owner">
            <?php
                foreach ($formdata[owners] as $i) {
                    echo '<OPTION>'.$i.'</OPTION>';
                >
            ?>
            </SELECT>
        </li>
        <li>
            <label for="breed">Dog Breed</label>
            <SELECT name="breed" id="breed">
            <?php
                foreach ($formdata[breeds] as $i) {
                    echo '<OPTION>'.$i.'</OPTION>';
                >
            ?>
            </SELECT>
        </li>
        <li>
            <label for="dog">Dog Name</label>
            <INPUT type="text" name="dog" />
        </li>
        <li><INPUT type="submit" value="Submit /></li>
    </ul>
</FORM> 
```

然后您需要创建验证脚本来检查您的结果并将安全数据输入数据库：

```
<?php
    /*
    * dog_data.php - checks data and inserts it into the database.
    */
    require_once 'dbconnection.php';
    $owner = $_POST['owner'];
    $breed = $_POST['breed'];
    $dog = mysql_real_escape_string($_POST['owner']);
    //perform any additional data validation here, use an if statement to check validation before insert query if you do so
    mysql_query("INSERT INTO `dogs` (`id_key`, `owner`, `breed`, `dog`)
                 VALUES(DEFAULT, '".$owner."', '".$breed."', '".$dog."');");
    mysql_close($con);
    header(" Location: http://www.example-redirection-page.com");
?> 
```

# java - 如何遍历 2 个单向 Ebean rels @ManyToOne 和 @OneToOne

> ID：12991310
> 
> 赞同：1
> 
> 时间：2012-10-20T18:14:23.360
> 
> 标签：java, playframework-2.0, ebean

在这里没有找到答案。我有 3 个对象（仅显示相关部分）：

```
@Entity 
class Module {
} 

@Entity
class FeaturedModule {
    @OneToOne(optional = false)
    public Module playModule;

    public static final Finder<Long, FeaturedModule> FIND = new Finder<Long, FeaturedModule>(Long.class, FeaturedModule.class);
}

@Entity
class ModuleVersion {
    @ManyToOne
    public Module playModule

    public static final Finder<Long, ModuleVersion> FIND = new Finder<Long, ModuleVersion>(Long.class, ModuleVersion.class);
} 
```

rels 是单向的，即 Module 没有引用其他 2 个实体。

问题：

1.  如何使用 FeaturedModules 查找（来自 ModuleVersion）不在 rel 中的模块
2.  如何（从 FeaturedModules）找到一系列具有给定 ModuleVersion 的 FeaturedModules

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:17:59.370

一般来说：向`Module`模型添加一个布尔标志是个好主意，多亏了这一点，您不需要编写复杂的查询来查找包含关系的模块，您只需检查该标志：

```
public static List<Module> findAllFeatured() {
    return find.select("id,name").where().eq("isFeatured", true).findList();
}

public static List<Module> findAllNotFeatured() {
    // give here list of field to select WITHOUT featured, otherwise it will 
    // create a JOIN to featured which will result that you will be not able
    // to get records without associations
    return find.select("id, name").where().eq("isFeatured", false).findList();
} 
```

使用该`isFeatured`标志，您也可以`ModuleVersion`轻松过滤 s：

```
public static List<ModuleVersion> findAll(String version) {
    return find.fetch("module").where().like("version", version).findList();
}

public static List<ModuleVersion> findFeatured(String version) {
    return find.fetch("module")
            .where().like("version", version).eq("module.isFeatured", true).findList();
}

public static List<ModuleVersion> findNotFeatured(String version) {
    return find.fetch("module")
            .where().like("version", version).eq("module.isFeatured", false).findList();
} 
```

当然，对于“自动”设置标志，您应该覆盖模型中的方法`save()`和`update(Object o)`方法，`Module`如果您需要此示例，请告诉我。

# excel - 检查一个单元格中的多个值以在另一个单元格中输出多个文本

> ID：12991311
> 
> 赞同：-3
> 
> 时间：2012-10-20T18:14:27.527
> 
> 标签：excel, vba

单元格`A1`=`10,21,34,23,45,67`

需要在单元格`A2`中执行以下操作的公式：

检查是否`A1`包含 10，如果是，则 "Coca Cola"
还要检查是否`A1`包含 21，如果是，则*附加*"Pepsi"
还要检查是否`A1`包含 34，如果是，则*附加*"7Up"
还要检查是否`A1`包含 23，如果是，然后*追加*“Sprite”
还要检查是否`A1`包含45，如果是，则*追加*“Fanta”
还要检查是否`A1`包含67，如果是，则*追加*“Gatorade”
还要检查是否`A1`包含99，如果是，则*追加*“Red Bull”
..
等等 。

因此，`A2`上面示例值的单元格输出将类似于：

`Coca Cola , Pepsi , 7Up , Sprite , Fanta , Gatorade`

请注意，输出值由`" , "`(ie `<space> comma <space>`)分隔，
这可能作为 1 个单元格中的公式吗？大约有 20 个值需要检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:46:07.473

我认为唯一实用的方法是使用用户定义函数（`UDF`）

要进行设置，请将值列表、字符串对放在工作簿中的某个位置（对于本示例，我将使用`G1:H7`）、第一列中的值、第二列中的字符串。

将此代码放入模块中

```
Function ListRange(rValues As Range, rLookup As Range) As String
    Dim ListOfValues() As String
    Dim OutputList() As String
    Dim i As Long, j As Long
    Dim v As Variant

    ListOfValues = Split(rValues.Value, ",")
    ReDim OutputList(LBound(ListOfValues) To UBound(ListOfValues))
    j = LBound(ListOfValues)
    For i = LBound(ListOfValues) To UBound(ListOfValues)
        v = Application.VLookup(Val(ListOfValues(i)), rLookup, 2, 0)
        If Not IsError(v) Then
            OutputList(j) = v
            j = j + 1
        End If
    Next
    If j = 0 Then
        ListRange = ""
    Else
        ReDim Preserve OutputList(LBound(OutputList) To j - 1)
        ListRange = Join(OutputList, " , ")
    End If
End Function 
```

像这样称呼它

```
=ListRange(A1,$G$1:$H$7) 
```

# xcode - 我可以仅使用 Interface Builder 和 Core Data 将 NSManagedObject 添加到选定的父对象吗？

> ID：12991313
> 
> 赞同：2
> 
> 时间：2012-10-20T18:14:48.660
> 
> 标签：xcode, core-data, interface-builder, nsmanagedobject

我正在学习 Core Data，目前只使用 Interface Builder 和 XCode 数据模型（遵循 Aaron Hillegass Cocoa 书籍示例）。

我有一个 MVC 应用程序和核心数据设置并在界面生成器中工作（还没有手写代码）。我已经设置了各种数组控制器、视图和按钮来添加和删除对象以及编辑数据并确定对象之间的关系。

但是，我的对象模型是严格分层的父子（和孙子），并且每个关系都是一对多的。因此，当我添加一个子对象（或孙子对象）时，我想自动将主 tableView 中当前选择的父对象分配为新子对象的父对象。

这在界面构建器中是否可行，或者这是我必须开始编写自己的方法的地方？

关于下一步我应该采取的任何指示或如何弄清楚自己非常感谢。我只是有点卡住，找不到相关的教程或参考。

如果我描述我的文档窗口可能会有所帮助。它有两个带有添加/删除按钮的 tableViews。右侧的 tableView 显示了左侧 tableView 中选择的父对象的子对象的 NSSet。我希望右侧的添加按钮添加一个新对象并自动使其成为所选父对象的子对象，以便它出现在右侧的 tableView 中。

目前，我可以在子对象的 arrayController 上看到的唯一方法是 add: 和 remove: 但当然它们不会将新对象连接到当前选择的父对象。我是否需要将自己的 (IBAction) 方法添加到父对象，即 addChildObject:？或者是否有一种内置方法可以根据父子关系在 CoreData 中自动添加子项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:38:19.783

问题解决了。我找到了一个教程（虽然有点过时），准确地描述了我正在尝试做的事情：

[https://developer.apple.com/cocoa/coredatatutorial/index.html](https://developer.apple.com/cocoa/coredatatutorial/index.html)

在认真仔细地遵循每一步之后，我意识到我做的一切都是正确的，我只是错过了一个绑定：我只设置了子数组控制器的内容集，而不是它的托管对象上下文（给文件的所有者）。这是我的添加按钮没有添加新子对象的唯一原因！微不足道的错误，但是当您不确定时，您会质疑自己的整个方法，而不是寻找简单的错误。对于必须阅读此内容的任何人感到抱歉，但也许该教程的链接会对某人有所帮助。

# objective-c - 用于启动带有参数的应用程序的 Cocoa 代码

> ID：12991323
> 
> 赞同：5
> 
> 时间：2012-10-20T18:15:57.223
> 
> 标签：objective-c, macos, cocoa

我想要一个命令行工具的 Cocoa 等价物`open(1)`，特别是对于这种形式的用法：

```
open -a <SomeApplication> <SomeFile> --args <Arg1> <Arg2> ... 
```

以 QuickTime 为例。以下命令行将使用 QuickTime 打开文件，参数可以控制 QuickTime 是否在启动时播放文件。

```
open -a "QuickTime Player" a.mp4 --args -MGPlayMovieOnOpen 0 # or 1 
```

我已阅读[Launching an Mac App with Objective-C/Cocoa](https://stackoverflow.com/questions/5048677/launching-an-mac-app-with-objective-c-cocoa)。[prosseek 的答案](https://stackoverflow.com/a/5048968/711135)，我认为相当于`open -a <App> <File>`，当我不指定任何参数时效果很好。[ughoavgfhw 的答案](https://stackoverflow.com/a/5048975/711135)，我认为相当于`open -a <App> --args <Arg1> <Arg2> ...`，当我不指定要打开的任何文件时效果很好。但两者都不能同时指定文件名和参数。

我还尝试将文件名附加到参数列表中，这是 unix 程序常用的方式。似乎有些应用程序可以接受它，但有些不能。QuickTime 提示一个错误，说它无法打开文件。我正在使用以下代码。

```
NSWorkspace *workspace = [NSWorkspace sharedWorkspace];
NSURL *url = [NSURL fileURLWithPath:[workspace fullPathForApplication:@"QuickTime Player"]];
NSArray *arguments = [NSArray arrayWithObjects:@"-MGPlayMovieOnOpen", @"0", @"a.mp4", nil];
[workspace launchApplicationAtURL:url options:0 configuration:[NSDictionary dictionaryWithObject:arguments forKey:NSWorkspaceLaunchConfigurationArguments] error:nil];
// open -a "QuickTime Player" --args -MGPlayMovieOnOpen 0 a.mp4 
```

似乎打开文件的机制与通常的论点不同。任何人都可以解释的内部结构`open(1)`，或者只是给我一个解决方案？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T22:45:40.303

您可能希望通过管道传输任务的输出，以便了解结果。“a.mp4”需要是文件的完整路径。

```
NSArray *args = [NSArray arrayWithObjects:@"-a", @"QuickTime Player", @"--args", @"a.mp4", nil];
NSTask *task = [NSTask new];
[task setLaunchPath:@"/usr/bin/open"];
[task setArguments:args];

[task launch]; 
```

# android - Android / ZXing 不再工作

> ID：12991324
> 
> 赞同：4
> 
> 时间：2012-10-20T18:16:00.300
> 
> 标签：android, zxing

我的应用使用 ZXing 辅助类 IntentIntegrator 和 IntentResult 来使用 ZXing 条码扫描器。

现在发现ZXing提交的扫描结果已经没有了，相关的返回值为空/null。

因此我更新到最新的帮助类[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)和[http:// /code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java)

现在我的 onActivityResult 方法在 ZXing 启动后立即被调用——当然结果又是空的。

我的代码很简单，扫描是这样开始的：

```
 if (v==scanButton)
  {
     com.google.zxing.integration.android.IntentIntegrator integrator = new IntentIntegrator(this);
     integrator.initiateScan();
  } 
```

并以这种方式获取结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) 
{
  com.google.zxing.integration.android.IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) 
  {
     String format;

     format=scanResult.getFormatName();
     if ((format!=null) && (format.length()>0))
     {
         if ((format.equals("EAN_8")) || (format.equals("EAN_13")) ||(format.equals("UPC_A")) ||(format.equals("UPC_E")))
          getEANData(scanResult.getContents());
     }   
 }
} 
```

在我的 android 上安装了最新的 ZXing 代码。任何想法为什么它不再起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:24:20.147

从我同时发现的情况来看：这似乎是一个依赖于安装的问题。在我的 Android 设备上，我可以看到该问题，但无法重现，我的应用程序的其他用户不会遇到此问题。ZXing 代码本身在很长一段时间内都没有更改，并且用户确认它也可以工作 - 所以这似乎是一个非常丑陋的错误。

在这里，它发生在从 Playstore 安装的 ZXing 代码中，尚未使用包含在我的应用程序中的 ZXing 对其进行测试...

# vb.net - VB如何从函数返回和接收3维数组

> ID：12991326
> 
> 赞同：1
> 
> 时间：2012-10-20T18:16:07.377
> 
> 标签：vb.net, multidimensional-array

我遇到了如何使用多维数组的问题。我有一个功能：

```
Public Function findCheckDigit(ByVal text As String) As String(,,)
    Dim msgLen As Integer = text.Length
    Dim value(msgLen + 2, 1, 1) As String
    ...
    ...
    ...
    Return value
End Function 
```

下面我尝试调用这个函数：

```
Private Sub bGenerate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bGenerate.Click
        Dim value(tbText.Text.Length + 2, 1, 1) As Array

        value(tbText.Text.Length + 2, 1, 1) = findCheckDigit(tbText.Text)  <--- Here is a problem

        MsgBox(value(0, 1, 0))  ' Return empty in any position
    End Sub 
```

我确定这个地方的问题但是如何实现我对另一个具有相同大小的 3 维数组的函数调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:34:56.123

您正在创建一个空数组并且没有将任何数据放入其中。您不需要在接收数组上创建边界，执行类似的操作并确保数组类型与 Luke94 前面提到的相同。

```
Public Function findCheckDigit(ByVal text As String) As String(,,)
    Dim msgLen As Integer = text.Length
    Dim value(msgLen + 2, 1, 1) As String
    value(0, 0, 0) = "Hello"

    Return value
End Function

Private Sub bGenerate_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim value(,,) As String

    value = findCheckDigit(tbText.Text) 

    MsgBox(value(0, 0, 0))  

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:29:06.730

当你这样做

```
Dim value(msgLen + 2, 1, 1) As String 
```

您正在尝试访问不存在的数组元素。假设数组有 5 个元素（每个元素包含 2d 数组）。msgLen 将是 5。现在，您要访问“值”中的八个元素，因为您说的是 msgLen + 2。因为只有 5 个元素，所以这是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:23:00.620

我不确定我是否正确理解了您的问题。所以这是我的建议

在 findCheckDigit 函数中，您将 Array 声明为 String

> 暗值（msgLen + 2, 1, 1）作为字符串

但是在 Click Listener 中，您创建了一个数组

> 暗值（tbText.Text.Length + 2, 1, 1）作为数组

# c - Dirent 结构的成员

> ID：12991334
> 
> 赞同：27
> 
> 时间：2012-10-20T18:17:28.757
> 
> 标签：c, linux, dir, readdir, dirent.h

我已经开始使用 dirent.h 库，并且在我的书中遇到了一个非常有用的“struct dirent”结构体成员，它 struct dirent *p->d_name。但不幸的是，它没有说明这个结构的任何其他成员。

我想知道这个结构的其他成员是什么，它们的用途是什么？

问候

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-20T18:31:28.073

结构，`struct dirent`指的是目录条目。

[http://www.gnu.org/software/libc/manual/html_node/Directory-Entries.html](http://www.gnu.org/software/libc/manual/html_node/Directory-Entries.html)

在linux中定义为：

```
struct dirent {
    ino_t          d_ino;       /* inode number */
    off_t          d_off;       /* offset to the next dirent */
    unsigned short d_reclen;    /* length of this record */
    unsigned char  d_type;      /* type of file; not supported
                                   by all file system types */
    char           d_name[256]; /* filename */
}; 
```

参考：`man readdir`

或者只是在包含目录中查找“dirent.h”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T18:20:52.797

只有两个成员（来自[维基百科](http://en.wikipedia.org/wiki/Dirent.h)）：

*   `ino_t d_ino`- 文件序列号
*   `char d_name[]`- 条目名称（不会超过 NAME_MAX 的大小）

还请查看[unix 规范](http://pubs.opengroup.org/onlinepubs/007908799/xsh/dirent.h.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T18:22:02.947

除了@Binyamin Sharet 的上述回答：

```
 off_t d_off - file offset
    unsigned short int d_reclen - length of the dirent record
    unsigned short int d_namlen - length of name
    unsigned int d_type - type of file 
```

# ios - 使用 iCarousel ios 重用视图

> ID：12991335
> 
> 赞同：1
> 
> 时间：2012-10-20T18:17:40.803
> 
> 标签：ios, optimization, carousel, icarousel

我正在用 ICarousel 构建一个应用程序。轮播中将有大约 30 个项目。每个项目都是一个带有 UIImageView 显示动画的视图。

现在我只是提前创建所有 30 个视图，将它们添加到数组中，并在需要时提供给轮播。

```
 SBTViewController* iv1 = [[SBTViewController alloc] initWithNibName:@"SBTViewController" bundle:nil];
    SBTViewController* iv2 = [[SBTViewController alloc] initWithNibName:@"SBTViewController" bundle:nil];
 .....
 .....
    SBTViewController* iv30 = [[SBTViewController alloc] initWithNibName:@"SBTViewController_iPhone" bundle:nil];

viewsarray = [NSArray arrayWithObjects: iv1,iv2...  iv30] 
```

当轮播需要更多视图时-我只提供数组中的视图

但是，我开始收到 MemoryWarnings。试图使用“reuseView”选项，但它根本不起作用，或者我误解了一些东西。每次调用以下内容：

```
 - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

} 
```

我只是试图将“视图”更改为我的屏幕外视图之一。但这似乎不起作用。轮播显示空白屏幕。

怎么了 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:04:51.930

ReusingView 旨在通过回收视图来减少分配/释放视图的需要。但是因为您将所有视图存储在一个数组中，所以它对您没有帮助，因为它们都是一次创建的，并且无论如何都不会发布。

从根本上说，问题在于您试图一次将太多图像加载到内存中（视图数 x 每个视图的动画帧数）。

您需要找到一种动态加载帧的方法。试试我的 GLView 库 (https://github.com/nicklockwood/GLView)，其中包含使用可以实时加载的 PVR 图像播放动画的说明。GLView 库包含一个 GLImageView 类，它的工作方式与 UIImageView 类似，但您可以指定要播放的图像文件名数组，而不必提前加载所有图像。

# makefile - Windows上的Makefile错误

> ID：12991339
> 
> 赞同：8
> 
> 时间：2012-10-20T18:18:01.327
> 
> 标签：makefile, gnu-make

我正在尝试在 windows7 上运行 makefile。我在 Windows 路径变量中添加了 make.exe，我正在尝试运行“make -f makefile.txt”，但它显示错误

```
"cc -o edit main.o kbd.o command.o display.o insert.o search.o files.o utils.o
process_begin: CreateProcess(NULL, cc -o edit main.o kbd.o command.o display.o i
nsert.o search.o files.o utils.o, ...) failed.
make (e=2): The system cannot find the file specified.
make: *** [edit] Error" 
```

请帮助我，因为我是新来的概念。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T20:05:43.783

`make.exe`仅添加到路径是不够的。您的问题是`cc`在尝试调用目标时找不到`edit`。尝试从 MinGW/MSYS 或 CygWin shell 运行相同的命令，具体取决于您的安装方式。这很可能会为您提供使用`make`此 makefile 的适当环境。

此问题类似于[在运行时使用 makefile 复制文件](https://stackoverflow.com/q/11750983/1380680)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-01T16:15:45.740

要使其正常工作，请安装[MinGW](http://www.mingw.org/) (mingw-get-setup.exe)，它将安装 mingw-get.exe 实用程序，该实用程序可用于安装所有需要的构建工具。

在控制台的 $PATH 类型中使用 C:\Mingw\bin （或安装期间选择的任何路径）：

```
$ mingw-get.exe gcc g++ msys-base 
```

完成后，MSYS env 将提供所有必要的工具（执行 C:\MinGW\msys\1.0\msys.bat 以打开它）

现在您可以在 unix 环境中使用*make* like。

```
Mike@Mike-PC ~
$ make
make: *** No targets specified and no makefile found.  Stop. 
```

* * *

如果还不够，请安装*mingw32-make*以及*mingw-get*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-24T01:18:28.347

对于 Windows 上的某些内容，您需要安装 coreutils。我遇到了这个问题，是关于 make 的北欧 nrf 微问题，但这是同样的错误

[http://gnuwin32.sourceforge.net/packages/coreutils.htm](http://gnuwin32.sourceforge.net/packages/coreutils.htm)

登陆这里就重装了windows挠头。这是修复，因为它向窗口添加了一堆有用的命令。就像为什么“ls”在我的旧驱动器上工作而不是在新驱动器上工作......回答core-utils。为什么它无处不在而不是在这里——core-utils。希望这可以在另一个 8 年内帮助某人。

# typescript - 如何在 TypeScript 中将参数的默认值设置为空数组？

> ID：12991343
> 
> 赞同：9
> 
> 时间：2012-10-20T18:18:41.240
> 
> 标签：typescript

关于以下代码，我有两个问题：

1.  当我编译它时，我收到警告/错误“无法将 'any[]' 转换为 'Array'”。那是因为`public songPaths: Array = []`不合法，我应该去`public songPaths: any = []`吗？

2.  是否`Object`有合适的默认值`public song:Object = new Audio()`？

例子：

```
'use strict';

class Boombox{
      constructor(public track: number, public codec: string, public song:Object = new Audio(), public currentTime: number = 0, public playing:bool = false, public titles: any = [], public songPaths: Array = []){
      }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T18:24:57.053

要声明无类型数组，请使用`any[]`而不是`Array`：

```
public songPaths: any[] = [] 
```

如果可能，您应该指定类型，例如：

```
public songPaths: string[] = [] 
```

* * *

您没有使用`Object`默认值。`Object`是类型并且`new Audio()`是默认值。如果可能，该类型应该是您要使用的实际类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:25:08.240

如果“音频”实际上是您想要使用其成员的类型，则不要将其声明为“对象”类型，因为您只能使用对象的成员。将其声明为“any”类型，或者更好的是，为要用于进行类型检查的成员添加接口声明。例如：

```
interface Audio { 
    listen: () => void;
};

function foo(x: Object, y: any, z: Audio) {
    x.listen(); // <-- Error: "The property 'listen' does not exist on type 'Object'"
    y.listen(); // <-- OK
    z.lisen();  // <-- Detects typo due to interface declaration and gives error "The property 'lisen' does not exist on type 'Audio'"
    z.listen(); // <-- Works fine (and gives you intellisense based on declaration).
} 
```

# sql - 数据仓库中物化视图的刷新策略

> ID：12991346
> 
> 赞同：5
> 
> 时间：2012-10-20T18:19:24.210
> 
> 标签：sql, performance, oracle, plsql, data-warehouse

我有一个具有物化视图的系统，其中包含大约 10 亿个项目，在一致的两小时内，我需要更新大约 2 亿个（占记录的 20%）。我的问题是我的物化视图的刷新策略应该是什么？截至目前，它是间隔刷新的。我很好奇在间隔刷新和从不刷新和用新的物化视图重命名/替换旧物化视图之间的性能影响。根本问题是甲骨文使用的索引会产生大量的重做。任何建议表示赞赏。

**更新**
由于有些人似乎认为这是题外话，我目前的观点是执行以下操作：

创建一个调用一系列 PL/SQL（我保证是编程语言）函数的 Oracle 调度链，以伪并行方式刷新物化视图。然而，就好像我落入了某种 DBA 的位置一样，我希望通过算法和/或一些代码来解决数据问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:26:18.017

好的，这是我想出的解决方案，您的里程可能会有所不同，事后感谢您的任何反馈。总体策略是执行以下操作：

1）利用Oracle调度器，利用链（作业）的并行执行
2）利用视图（常规类型）作为从应用程序到数据库的接口
3）依靠物化视图按以下方式构建

```
 create materialized view foo  
    parallel  
    nologging  
    never refresh  
    as  
    select statement 
```

根据需要使用以下内容：

```
 create index baz on foo(bar) nologging 
```

这样做的好处是我们可以在删除之前在后台构建物化视图，然后按照步骤 2 中的描述重新创建视图。现在的好处是创建动态命名的物化视图，同时保持视图具有相同的名称。关键是在新的物化视图完成之前不要吹走原来的物化视图。这也允许快速下降，因为需要最少的重做。这可以在 5 分钟内创建约 10 亿条记录的物化视图，这满足了我们每 30 分钟“刷新”一次的要求。此外，这可以在单个数据库节点上处理，因此即使硬件受限，也是可能的。

这是一个将为您创建它的 PL/SQL 函数：

```
CREATE OR REPLACE procedure foo_bar as
foo_view varchar2(500) := 'foo_'|| to_char(sysdate,'dd_MON_yyyy_hh_mi_ss');
BEGIN
 execute immediate
 'Create materialized view '||  foo_view || '
  parallel
  nologging
  never refresh
  as
  select * from cats';
END foo_bar; 
```

# css - CSS强制图像调整大小并保持纵横比

> ID：12991351
> 
> 赞同：760
> 
> 时间：2012-10-20T18:20:13.890
> 
> 标签：css, image, aspect-ratio

我正在处理图像，但遇到了纵横比问题。

```
<img src="big_image.jpg" width="900" height="600" alt="" /> 
```

如您所见，`height`并且`width`已经指定。我为图像添加了 CSS 规则：

```
img {
  max-width: 500px;
} 
```

但是对于`big_image.jpg`，我收到`width=500`和`height=600`。如何设置要调整大小的图像，同时保持它们的纵横比。

* * *

## 回答 #1

> 赞同：956
> 
> 时间：2013-06-19T06:08:31.683

```
img {
  display: block;
  max-width:230px;
  max-height:95px;
  width: auto;
  height: auto;
}
```

```
<p>This image is originally 400x400 pixels, but should get resized by the CSS:</p>
<img width="400" height="400" src="http://i.stack.imgur.com/aEEkn.png">
```

如果图像对于指定区域太大，这将使图像缩小（缺点，它不会放大图像）。

* * *

## 回答 #2

> 赞同：542
> 
> 时间：2016-08-19T12:35:16.347

我一直在努力解决这个问题，最终得出了这个简单的解决方案：

```
object-fit: cover;
width: 100%;
height: 250px; 
```

您可以根据需要调整宽度和高度，并且 object-fit 属性将为您进行裁剪。

有关该`object-fit`属性的可能值和兼容性表的更多信息，请参见此处：[https ://developer.mozilla.org/en-US/docs/Web/CSS/object-fit](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)

干杯。

* * *

## 回答 #3

> 赞同：275
> 
> 时间：2014-05-15T10:04:22.613

**下面的解决方案将允许放大和缩小图像**，具体取决于父框的宽度。

所有图像都有一个固定宽度的父容器，*仅用于演示目的*。在生产中，这将是父框的宽度。

# 最佳实践（2018 年）：

此解决方案告诉浏览器以最大可用宽度呈现图像，并将高度调整为该宽度的百分比。

```
.parent {
  width: 100px;
}

img {
  display: block;
  width: 100%;
  height: auto;
}
```

```
<p>This image is originally 400x400 pixels, but should get resized by the CSS:</p>
<div class="parent">
  <img width="400" height="400" src="https://placehold.it/400x400">
</div>
```

# 更高级的解决方案：

使用更高级的解决方案，您将能够裁剪图像而不管其大小，并添加背景颜色以补偿裁剪。

```
.parent {
  width: 100px;
}

.container {
  display: block;
  width: 100%;
  height: auto;
  position: relative;
  overflow: hidden;
  padding: 34.37% 0 0 0; /* 34.37% = 100 / (w / h) = 100 / (640 / 220) */
}

.container img {
  display: block;
  max-width: 100%;
  max-height: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
```

```
<p>This image is originally 640x220, but should get resized by the CSS:</p>
<div class="parent">
  <div class="container">
    <img width="640" height="220" src="https://placehold.it/640x220">
  </div>
</div>
```

对于指定填充的行，需要计算图像的纵横比，例如：

```
640px (w) = 100%
220px (h) = ?

640/220 = 2.909
100/2.909 = 34.37% 
```

因此，顶部填充 = 34.37%。

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2013-05-30T13:47:50.147

background-size 属性是 ie>=9 唯一的，但如果这对你没问题，你可以使用 div`background-image`和 set `background-size: contain`：

```
div.image{
    background-image: url("your/url/here");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
} 
```

现在您可以将您的 div 大小设置为您想要的任何大小，并且图像不仅会保持其纵横比，而且还会在 div 中垂直和水平集中。只是不要忘记在 css 上设置大小，因为 div 在标签本身上没有宽度/高度属性。

这种方法与 setecs 答案不同，使用它，图像区域将是恒定的并由您定义（根据 div 大小和图像纵横比在水平或垂直方向留下空白），而 setecs 答案将为您提供一个完全符合缩放图像的大小（没有空格）。

编辑：根据[MDN background-size 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size)，您可以使用专有过滤器声明模拟 IE8 中的 background-size 属性：

> 尽管 Internet Explorer 8 不支持 background-size 属性，但可以使用非标准的 -ms-filter 函数来模拟它的一些功能：

```
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path_relative_to_the_HTML_file', sizingMethod='scale')"; 
```

* * *

## 回答 #5

> 赞同：67
> 
> 时间：2017-08-29T18:14:48.907

与此处的一些答案非常相似，但在我的情况下，我的图像有时更高，有时更大。

这种风格就像一种魅力，可以确保所有图像都使用所有可用空间，保持比例而不是削减：

```
.img {
   object-fit: contain;
   max-width: 100%;
   max-height: 100%;
   width: auto;
   height: auto;
} 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2012-10-20T18:30:53.543

删除“高度”属性。

```
<img src="big_image.jpg" width="900" alt=""/> 
```

通过指定两者，您正在更改图像的纵横比。只需设置一个即可调整大小但保留纵横比。

（可选）限制尺寸过大：

```
<img src="big_image.jpg" width="900" alt="" style="max-width:500px; height:auto; max-height:600px;"/> 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2012-10-20T18:37:36.117

[Firefox 71+](https://developer.mozilla.org/ru/docs/Mozilla/Firefox/Releases/71) (2019-12-03) 和[Chrome 79+](https://www.chromestatus.com/feature/5695266130755584) (2019-12-10) 支持将元素的和HTML 属性内部[映射](https://developer.mozilla.org/en-US/docs/Web/Media/images/aspect_ratio_mapping)到新的CSS 属性（该属性本身还不能直接使用）。`width``height``IMG`[`aspect-ratio`](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio)

计算出的纵横比用于为图片预留空间，直到加载完毕，只要计算出的纵横比与图片的实际纵横比相等，就可以防止图片加载后页面“跳转”。

为此，必须通过 CSS 将两个图像尺寸之一覆盖为以下 `auto`值：

```
IMG {max-width: 100%; height: auto; } 
```

```
<img src="example.png" width="1280" height="720" alt="Example" /> 
```

在示例中，即使图像尚未加载且有效图像宽度由于`max-width: 100%`.

另请参阅相关的 Firefox[错误 392261](https://bugzilla.mozilla.org/show_bug.cgi?id=392261)。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2020-02-08T19:53:20.893

这是一个解决方案：

```
img {
   width: 100%;
   height: auto;
   object-fit: cover;
} 
```

这将确保图像始终覆盖整个父级（缩小和放大）并保持相同的纵横比。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2015-04-15T10:11:21.330

只需将其添加到您的 css 中，它会在保持原始比例的情况下自动收缩和扩展。

```
img {
    display: block;
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
} 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-03-22T12:39:30.940

要保持响应式图像，同时仍强制图像具有一定的纵横比，您可以执行以下操作：

HTML：

```
<div class="ratio2-1">
   <img src="../image.png" alt="image">
</div> 
```

和 SCSS：

```
.ratio2-1 {
  overflow: hidden;
  position: relative;

  &:before {
    content: '';
    display: block;
    padding-top: 50%; // ratio 2:1
  }

  img {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
  }
} 
```

无论作者上传的图像大小如何，这都可用于强制执行特定的纵横比。

感谢@Kseso 在 [http://codepen.io/Kseso/pen/bfdhg](http://codepen.io/Kseso/pen/bfdhg)。检查此 URL 以获取更多比率和工作示例。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2020-07-29T21:54:44.017

这是精神上的。使用 scale-down 属性 - 它可以自我解释。

内联样式：

```
<img src='/nic-cage.png' style={{ maxWidth: '50%', objectFit: 'scale-down' }} /> 
```

这将阻止 flex 拉伸它。在这种情况下，图像将变为其父容器宽度的 50%，并且高度将按比例缩小以匹配。

把事情简单化。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-08-19T20:37:25.907

将图像容器标签的 CSS 类设置为`image-class`：

```
<div class="image-full"></div> 
```

并将其添加到您的 CSS 样式表中。

```
.image-full {
    background: url(...some image...) no-repeat;
    background-size: cover;
    background-position: center center;
} 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2020-01-17T20:25:26.243

我建议采用响应式方法，最佳实践是使用[Viewport units](https://www.w3schools.com/cssref/css_units.asp)和 min/max 属性，如下所示：

```
img{
  display: block;
  width: 12vw;
  height:12vw;
  max-width:100%;
  min-width:100px;
  min-height:100px;
  object-fit:contain;
} 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2016-10-24T11:32:32.770

要强制适合精确尺寸的图像，您不需要编写太多代码。就是这么简单

```
img{
    width: 200px;
    height: auto;
    object-fit: contain; /* Fit logo in the image size */
        -o-object-fit: contain; /* Fit logo fro opera browser */
    object-position: top; /* Set logo position */
        -o-object-position: top; /* Logo position for opera browser */
    }
```

```
<img src="http://cdn.sstatic.net/Sites/stackoverflow/company/img/logos/so/so-logo.png" alt="Logo">
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-02-06T15:46:48.953

[https://jsfiddle.net/sot2qgj6/3/](https://jsfiddle.net/sot2qgj6/3/)

如果您想放置具有**固定宽度百分比**但**不具有固定宽度像素的**图像，这就是答案。

这在处理**不同尺寸的屏幕**时会很有用。

诀窍是

1.  用于`padding-top`设置宽度的高度。
2.  用于将`position: absolute`图像放在填充空间中。
3.  用于`max-height and max-width`确保图像不会超过父元素。
4.  用于`display:block and margin: auto`使图像居中。

我还评论了小提琴中的大部分技巧。

* * *

我还找到了其他一些方法来实现这一点。html 中不会有真实的图像，所以当我需要 html 中的“img”元素时，我个人更喜欢最佳答案。

*使用背景的简单 css* ***[http://jsfiddle.net/4660s79h/2/](http://jsfiddle.net/4660s79h/2/)***

*背景图像顶部有字* ***[http://jsfiddle.net/4660s79h/1/](http://jsfiddle.net/4660s79h/1/)***

使用绝对位置的概念来自这里 [http://www.w3schools.com/howto/howto_css_aspect_ratio.asp](http://www.w3schools.com/howto/howto_css_aspect_ratio.asp)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2021-10-19T03:45:03.413

## 只需将`height`属性替换为`aspect-ratio`属性即可。

```
img {
  max-width: 500px;
  aspect-ratio: 900 / 600;
}
```

```
<img src="big_image.png" width="900"/>
```

该`aspect-ratio`属性不是必需的，但可以防止图像布局偏移。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-03-26T00:43:22.430

你可以使用这个：

```
img { 
    width: 500px; 
    height: 600px; 
    object-fit: contain; 
    position: relative; 
    top: 50%; 
    transform: translateY(-50%); 
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-01-24T19:40:24.937

您可以像这样创建一个 div：

```
<div class="image" style="background-image:url('/to/your/image')"></div> 
```

并使用这个 css 来设置它的样式：

```
height: 100%;
width: 100%;
background-position: center center;
background-repeat: no-repeat;
background-size: contain; // this can also be cover 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-08-28T16:39:48.820

您可以将容器设置为`display: flex`and `align-items: center`（其他`align-items`值也可以）。代替`align-items`你也可以设置`align-self`图像本身。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-11-15T15:59:20.443

如果图像对于指定区域太大，这将使图像缩小（缺点，它不会放大图像）。

setec 的解决方案适用于自动模式下的“Shrink to Fit”。但是，为了优化 EXPAND 以适应“自动”模式，您需要首先将接收到的图像放入临时 id，检查它是否可以在高度或宽度上扩展（取决于其纵横比与纵横比你的显示块），

```
$(".temp_image").attr("src","str.jpg" ).load(function() { 
    // callback to get actual size of received image 

    // define to expand image in Height 
    if(($(".temp_image").height() / $(".temp_image").width()) > display_aspect_ratio ) {
        $(".image").css('height', max_height_of_box);
        $(".image").css('width',' auto');
    } else { 
        // define to expand image in Width
        $(".image").css('width' ,max_width_of_box);
        $(".image").css('height','auto');
    }
    //Finally put the image to Completely Fill the display area while maintaining aspect ratio.
    $(".image").attr("src","str.jpg");
}); 
```

当接收到的图像小于显示框时，这种方法很有用。您必须将它们以原始小尺寸而不是它们的扩展版本保存在您的服务器上，以填充您的更大显示框以节省大小和带宽。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-03-02T14:42:20.750

```
img {
  max-width: 80px; /* Also works with percentage value like 100% */
  height: auto;
}
```

```
<p>This image is originally 400x400 pixels, but should get resized by the CSS:</p>
<img width="400" height="400" src="https://i.stack.imgur.com/aEEkn.png">

<p>Let's say the author of the HTML deliberately wants
  the height to be half the value of the width,
  this CSS will ignore the HTML author's wishes, which may or may not be what you want:
</p>
<img width="400" height="200" src="https://i.stack.imgur.com/aEEkn.png">
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-08-02T19:15:31.900

使用伪元素进行垂直对齐怎么样？这个更少的代码适用于轮播，但我想它适用于每个固定大小的容器。它将保持纵横比并在顶部/底部或左侧/写入上插入@gray-dark 条以获得最短尺寸。同时，图像由 text-align 水平居中，由伪元素垂直居中。

```
 > li {
      float: left;
      overflow: hidden;
      background-color: @gray-dark;
      text-align: center;

      > a img,
      > img {
        display: inline-block;
        max-height: 100%;
        max-width: 100%;
        width: auto;
        height: auto;
        margin: auto;
        text-align: center;
      }

      // Add pseudo element for vertical alignment of inline (img)
      &:before {
        content: "";
        height: 100%;
        display: inline-block;
        vertical-align: middle;
      }
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-08-17T19:14:24.027

全屏演示：

```
img[data-attribute] {height: 100vh;} 
```

请记住，如果视口高度大于图像，则图像会相对于差异自然降级。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-12-01T12:10:32.203

如果应用程序可以具有任何宽高比或分辨率的图像，那么您可以管理此链接中的高度和宽度。

这使用 Javascript 和 HTML

[https://stackoverflow.com/a/65090175/13338731](https://stackoverflow.com/a/65090175/13338731)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-08-06T05:53:46.013

# 您可以使用：-

```
transform: scaleX(1.2); 
```

改变宽度而不改变高度。

**和**

```
transform: scaleY(1.2); 
```

改变高度而不改变宽度

*您可以在 html 和 css 中的图像和视频标签上使用它。这也不会改变纵横比。*

# windows - 如何在 Windows 商店应用程序中处理/捕获长按

> ID：12991355
> 
> 赞同：1
> 
> 时间：2012-10-20T18:20:40.997
> 
> 标签：windows, windows-phone-7, windows-8, gesture, long-press

谁能告诉我如何在 C# 中为 Windows 商店应用程序捕获长按？我可以使用“轻敲”手势没问题，但是当我用它替换 `TappedRoutedEventArgs`时，`HoldingRoutedEvent`它并没有注册一个握持手势。我正在用我的笔记本电脑对此进行测试，所以它可能无法识别鼠标按住事件吗？

我假设 windows phone 7 有类似的功能，但它们主要用于不用于 Windows 8 的 Silverlight。任何链接/示例都会有很大帮助！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:32:37.993

使用举行事件：

XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" Holding="Grid_Holding_1">
</Grid> 
```

CS：

```
private void Grid_Holding_1(object sender, HoldingRoutedEventArgs e)
{
    Debug.WriteLine("You held at" + DateTime.Now.ToString());
} 
```

您对鼠标没有触发保持事件是正确的。在模拟器中运行它，然后您可以使用“基本触摸模式”来模拟保持。

# html - CSS 将元素填充到网格中（并将它们居中）

> ID：12991359
> 
> 赞同：0
> 
> 时间：2012-10-20T18:21:01.877
> 
> 标签：html, css

我想要一个具有固定大小的元素的数据网格（表格布局）。元素应尽可能插入同一行，然后它们应出现在下一行。

我可以用 inline-blocks 做到这一点，但我不知道如何控制外部 div 使它们居中。

这是我的问题：

[问题 http://images.devs-on.net/Image/QUPPczp4bO6pkKNR-Bereich.png](http://images.devs-on.net/Image/QUPPczp4bO6pkKNR-Bereich.png)

你有什么想法如何只使用 CSS 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:43:22.643

如果您的块设置为内联块显示，您只需将容器的文本居中：http: [//jsfiddle.net/Qv6xY/20/](http://jsfiddle.net/Qv6xY/20/)（调整结果面板的大小）

html：

```
<section>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
    <article>a</article>
</section>​ 
```

CSS：

```
section{margin:50px; padding:25px; background:#333; text-align:center;}
article{width:50px; height:50px; background:#c00; margin: 10px; display:inline-block} 
```

（或者您还想做一些我没有得到的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:38:15.967

您正在寻找的是一种对空间内的框进行“完全对齐”的方法。目前还没有办法使用纯 CSS 来实现这一点。您将需要在已有的内容（以右侧的空格结尾）或@fabien 提供的内容（使最后一行居中）之间进行选择。

另一种方法是使用一些javascript。

（PS只要你只想要那些框中的字母“a”，可能还有另一种解决方案，但我假设这是更复杂元素的占位符。对吗？）

# php - 是否有内置方法来获取值对象或数据传输对象并使用 php 将其转换为 json？

> ID：12991360
> 
> 赞同：0
> 
> 时间：2012-10-20T18:21:03.073
> 
> 标签：php, json

我想取一个像

```
class Vo {

    private $blah;
    private $de;

    public function setBlah($blah) {
        $this->blah = $blah;
    }

    public function getBlah() {
        return $this->blah;
    }

    public function setDe($de) {
        $this->de = $de;
    }

    public function getDe() {
        return $this->de;
    }

} 
```

在不构建它的情况下调用一个方法，该方法要么将其转换为数组，要么更好地将 JSON 构建为`[{"blah" : "something set", "de" : "something set"}]`. 我只是从 Java/Jboss 返回到 PHP，在那里我可以调用对象上的方法并将其转换为 json。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:30:18.513

您不能使用`json_encode()`，因为它不适用于私有变量。您需要在对象上定义另一个函数：

```
function getJSON() {
    return  '[{"blah" : "'.$this->blah.'", "de" : "'.$this->de.'"}]';
} 
```

[键盘](http://codepad.org/vcwgsNDk)

*编辑：*由于 PHP 5.4 PHP 很容易提供这个：

```
class Vo implements JsonSerializable  {
    ...

    public function jsonSerialize() {
        return get_object_vars($this);
    }

    ...
}

...

var_dump(json_encode($object)); 
```

给你：

```
string(29) "{"blah":"hammer","de":"time"}" 
```

见[`The JsonSerializable interface`](http://php.net/class.jsonserializable)。即使您低于 PHP 5.4 也可以实现该函数，然后手动调用它：

```
json_encode($object->jsonSerialize()); 
```

所以你有一个共同的模式来处理它。

[演示 PHP 5.4](http://codepad.viper-7.com/X44hmn)；[演示 PHP 5.2](http://codepad.org/IEnJQj8e)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:23:43.007

您可以尝试使用`json_encode($object)`, 和`json_decode($jsonObject)`。现在，唯一的问题是，我不确定 json_decode 是否会返回正确的对象，或者只是`StdClass`具有给定属性的对象。

我只是尝试`json_decode()`在一个简单的 json 对象上做一个，它将它变成对象的一个`stdClass`​​对象，所以你不会`Vo`从 json 中取回你的对象。正如所`dfsq`指出的，json 不适用于私有属性。

如果你这样做`serialize($object)`，`unserialize($string)`那么你可以取回类型，但这是特定于 PHP 的，不像 json 那样可移植。

也看看这个（php 5.4+）： [http ://www.php.net/manual/en/class.jsonserializable.php](http://www.php.net/manual/en/class.jsonserializable.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:40:35.467

如果您是从头开始编写自己的代码，@SomeKittens 建议的答案和@hakre 编辑是可行的方法，但有时您不希望/不能修改类代码。您可以轻松地`json_encode`拥有所有属性的任何对象，但您需要将其转换为数组并清理私有/受保护属性名称的键：

```
/**
 * Encode object to JSON with protected/private variables with nested objects support.
 * @param mixed $object object to be jsonized
 * @param int $jsonEncodeOptions see JSON_* constants
 * @param bool $returnArray for recursive calls
 * @return string|array JSON string, associative array for recursive calls
 */
function json_encode_object($object, $jsonEncodeOptions = 0, $returnArray = FALSE){
    $ret = array();

    foreach((array)$object as $key => $value){

        if(is_resource($value)){
            //$rVal = NULL;
            continue;
        }elseif(is_object($value)){
            $rVal = json_encode_object($value, $jsonEncodeOptions, TRUE);
        }else{
            $rVal = $value;
        }

        $rKey = str_replace(
            array(
                chr(0)."*".chr(0), //protected
                chr(0).get_class($object).chr(0) //private
            )
            ,'',
            $key        
        );

        $ret[$rKey] = $rVal;
    }

    return $returnArray?$ret:json_encode($ret, $jsonEncodeOptions);
} 
```

# c - 使用 posix 线程的可测试 C 应用程序

> ID：12991361
> 
> 赞同：0
> 
> 时间：2012-10-20T18:21:07.290
> 
> 标签：c, unit-testing, tdd, pthreads, testability

我必须编写看起来像这样的代码（当然要复杂得多）：

```
int stop;
int isStopped;

void workerFunction(){
    while(!stop){
        //...
    }
    isStopeed = 1;
}

startThread(){
    int newThreadPid = pthread_create(..., NULL, workerFunction, NULL);
}

stopThread(){
    stop = 1;
} 
```

我的问题是：是否有任何技术可以使此类代码可测试？我不认为编写测试像：

```
startThread();
stopThread();
sleep(1);
ASSERT(isStopped); 
```

是最好的主意。如何在不调用系统函数的情况下测试 stopThread() 函数？有什么方法可以模拟 pthread_create 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T06:57:25.567

我只知道在 C 中模拟函数的一种方法：拥有指向可模拟函数的函数指针，并且只能通过该指针调用它们。对于您的测试，您可以调整指针以指向您的模拟函数。但我不知道你是否真的想走那条路......

# c - Linux 线程中的文件段/节/记录锁

> ID：12991363
> 
> 赞同：0
> 
> 时间：2012-10-20T18:21:18.703
> 
> 标签：c, linux, multithreading, concurrency, locking

> **可能重复：**
> [Linux 线程中的文件段/节/记录锁](https://stackoverflow.com/questions/12993120/file-segment-section-record-locks-in-linux-threads)

我有一个多线程进程，其中一个文件由多个线程共享（读取和写入）。有什么方法可以让一个线程锁定一个文件段，使其他线程无法访问它？我试过`fcntl(fd, F_SETLKW, &flock)`了，但是这个锁只适用于进程，而不是线程（进程中的所有线程共享一个锁）。

# java - 如何相交两组不适合内存的long？

> ID：12991365
> 
> 赞同：7
> 
> 时间：2012-10-20T18:21:34.047
> 
> 标签：java, algorithm, memory, set, intersection

我有一个有趣的问题。我想在 Java 中相交两组 Longs，每组有 1B 个成员 - 这是每组 4GB。这不适合我需要运行它的服务器上的内存。

我想知道有什么有趣的方法可以解决这个问题。

到目前为止，我想出的是从磁盘中读取每个原始集的子集，这些子集足够小以适合内存，然后与每个子集相交，并将它们临时写入磁盘。最后，我可以遍历并与这些子集相交。我有一种感觉，这可能会变成地图缩减工作。

也许你会有一些更好的想法:) 我怀疑我是第一个提出这个问题的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T18:31:21.270

1.  对两组进行排序`A`并`B`分别排序。

2.  从集合 A 中取出第一个元素，从集合 B 中取出第一个元素

3.  如果它们相等，则添加到结果集中。

4.  如果一组中的项目更大，则从第二组中取出下一个项目。

5.  只要你没有达到任何一组的结尾，就转到 2。

这种方法的优点是您永远不会在内存中保留超过 2 个 long（排序除外）。可以在磁盘上有效地进行排序（合并排序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T18:30:04.957

对两组进行基于磁盘的合并排序。

完成后，您可以简单地按顺序浏览排序的文件并将交叉点记录在一个新文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T18:36:06.430

这是我认为可以做到的。显然放在磁盘上。你必须对它们进行排序。

1.  [使用外部排序](http://en.wikipedia.org/wiki/External_sorting)对它们进行排序
2.  比较，

    ```
    if a. length < 1 or b.length < 1
      exit
    else if a[0] == b[0]
      addToIntersectionSet(a[0])
      remove a[0] from a
      remove b[0] from b
    else if a[0] < b[0]
       remove a[0]
    else 
      remove b[0] 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T18:50:10.113

将内存或磁盘中的 2 个大位图初始化为零（bitmap1 和 bitmap2）。对于 set1 中的每个值，将第 value-th bitmap1 位置设置为 1。对于 set2 中的每个值，读取 bitmap1 位中的第 value-th 位置，如果为 1，则将第 value-th 位置的 bitmap2 设置为 1。对于中的每个设置位值bitmap2，该位置的输出值。

编辑：下面的 Jessop 在回复中指出了这个缺陷：它是 Java 64 位（8 字节）长整数，而不是 32 位架构 C 编译器 4 字节长整数。这个解决方案对于 64 位长是不切实际的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-20T21:55:07.770

一种可能比排序更有效的方法是使用散列，并将数据分成几个箱 - 并在每个箱上做一个交集。**这个想法是将问题拆分为适合内存的子问题**- 然后您可以在 RAM 上有效地进行交集。

假设您想找到 R,S 的交集：

```
for each element in R:
   write element in bucket_R[hash(element) % NUM_BUCKETS]
for each element in S:
   write element in bucket_S[hash(element) % NUM_BUCKETS]

//assuming each bucket from bucket_S or bucket_R now fits memory - proceed.
//if it doesn't, you can repeat the previous step with a new hash function.
for each i from 0 to NUM_BUCKETS:
  find bucket_S INTERSECTION bucket_R 
```

**重要提示：**
bucket_S、bucket_R 或在磁盘上而不是在 RAM 中。

**磁盘访问次数：**

使用这种方法的磁盘读取总数为`3 * (|R|+|S|)`

1.  在迭代前两个循环时读取 R 和 S 中的每个元素
2.  将每个元素写入哈希表
3.  阅读所有的桶

虽然任何基于排序的算法最有可能需要超过 1 次读取 + 1 次写入（以及对数据的额外遍历） - 这将产生更多`3 * (|R|+|S|)`

* * *

PS我目前正在准备文件系统考试（将在星期一举行），并且讲义说这是大多数数据库系统中的首选解决方案，假设您有一个磁盘。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-20T18:28:47.750

这确实感觉像是一个 map reduce 工作，但你必须非常小心你选择的子集。如果您希望您的交集起作用，则必须在相同点切割原始集合的子集。例如，假设您有集合

```
A = {1 3 7 9}
B = {2 7 8 9} 
```

然后你把它们分成两个子集：

```
A1 = {1 3} A2 = {7 9}
B1 = {2 7} B2 = {8 9} 
```

然后你相​​交：

```
C1 = A1 inter B1 = {}
C2 = A2 inter B2 = {9} 
```

然后你假设：

```
C = A inter B = C1 union C2 = {9} 
```

这显然是错误的。为了让你的 map reduce 工作，你必须使用一些常数值来切割集合，例如 A1 和 B1 将包含值 <5 和 A2 和 B2 值 >=5。

您还可以从磁盘中获取集合 A 和 B 的常规部分，然后以智能方式将它们相交，这意味着逐步查看已排序的元素，并在到达两个子集之一的末尾时停止。在那一刻，您获取了一个额外的子集部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-20T18:28:58.167

一件显而易见的事情是从磁盘上的排序集开始。然后您可以同时从两个文件中读取，找到匹配项并将它们写出。假设您从一个文件中读取 204，您会从另一个文件中读取，直到第一个数字 >= 204。此时您知道该特定数字是否属于交集。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-20T18:31:11.913

您的第一步可能是对每组进行排序；对较小的块进行排序和合并排序以构建已排序的文件。

排序后，您可以遍历两组。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-20T18:43:31.827

您可以轻松地保持 512 个文件处于打开状态，因此您可以将这两个文件预浏览成磁盘上的 256 个块，最多 16M 个项目，每个大小为 64 MB。您可以根据每个 Long 的最高有效字节执行此操作，从 set.A.00 到 set.B.ff

然后你可以加载每对对应的块（`set.A.42`包含以 0x42 开头的 Long 对应`set.B.42`）并使用它们来初始化一个 16M 字节数组 - 你将它初始化为全 0，当你`i`从第一个块中读取值时，你增加索引 i -th)。然后你读入第二个块，但这次增加了 2。

完成后，您对阵列进行扫描；0 表示该值不存在于任一块中，1 表示它仅存在于第一组中，2 仅存在于第二组中，3 表示两者都存在。并将结果写入结果文件。

即使对结果文件进行排序，您也不需要排序（因为您将按顺序检查块，并按顺序进行最终扫描）。

这一切都在 O(n) 中运行（所有步骤都以线性时间运行）并且最多需要 16M 的 RAM。

如果 512 个打开的文件太多，您可以使用前 7 个最高有效位并使用 256 个打开的文件和 32M 的 RAM。或者 128 个打开的文件和 64M 的 RAM，等等。

`Longs`也可以保留一系列 256 个“桶”（每个 16384大小（所以它又是 16M））（如果文件系统缓存不太好，也许效率更高）。当一个bucket接近满时，你打开磁盘上对应的chunk文件，dump目前`Long`找到的16384个，然后关闭文件。然后对集合 B 执行相同操作。您最终会得到 512 个文件，其中包含从 0（不太可能）到 1600 万`Long`s 的文件，并且一次打开的文件永远不会超过两个。

# assembly - 环境变量 - 启动文件夹

> ID：12991367
> 
> 赞同：0
> 
> 时间：2012-10-20T18:21:44.653
> 
> 标签：assembly, environment-variables, startup, fasm, startup-folder

启动文件夹是否有环境变量。

在 XP 上它位于 C:\Documents and Settings(user)\Start Menu\Programs\Startup 下，而在 vista 7 下它位于 Appdata\Microsoft\Windows\Start Menu\Programs\Startup\

所以我想知道这个文件夹是否有 EnVar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:33:41.247

既然您创建了二进制文件，为什么不将 CSIDL_STARTMENU 与 SHGetFolderPathA 一起使用？

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)

# batch-file - 使用正则表达式批量搜索文件内容

> ID：12991371
> 
> 赞同：2
> 
> 时间：2012-10-20T18:22:29.353
> 
> 标签：batch-file

我想在特定文件夹中具有特定文件扩展名的所有文件中搜索如下所示的字符串：“tt1234567”

这适用于 Linux：

```
find /media/ -name "*.txt" -exec grep -oa "tt[0-9]\{7\}" {} \; 
```

我怎样才能将其重写为批处理？也许是这样的？

```
cd C:\media\
dir /S /B *.txt >> [A little code that matches (tt[0-9]{7})] >> c:\blabla.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:06:16.657

**编辑：**删除了可能有问题的引号。
**编辑：**固定代码。

`FINDSTR.EXE`没有正确实现 REGEX 标准，因此通过指定的次数匹配 [0-9] 0 将无法正常工作。

```
cd C:\media\
for /f %%x in ('dir /S /B *.txt') do (
  echo %%x| findstr /r "^tt[0-9][0-9][0-9][0-9][0-9][0-9][0-9]\.[tT][xX][tT]$" >> c:\blabla.txt
) 
```

`%%x`和之间不要加空格`|`，否则会不匹配。

没有必要将`FOR`命令分成三行，我这样做只是为了便于阅读。
您可以删除`(`并将`)`其全部放在一行上。

* * *

或者，您可以下载并使用`SED`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T14:37:20.903

`cmd.exe`有管道运算符，所以你可以使用

```
dir /S /B *.txt | findstr "tt[0-9][0-9][0-9][0-9][0.9][0-9][0-9]\.txt$" >> c:\blabla.txt 
```

*   `findstr`默认情况下打开了正则表达式和不区分大小写的选项。
*   支持的（非常有限的）正则表达式语法`findstr`记录在[TechNet Library](http://technet.microsoft.com/en-us/library/bb490907.aspx)中。

# java - 看不懂isFinishing

> ID：12991376
> 
> 赞同：6
> 
> 时间：2012-10-20T18:23:33.280
> 
> 标签：java, android

我一直在研究[Google IO 2012 代码](http://code.google.com/p/iosched/)
在其中一项活动（HomeActivity.java）中，他们正在执行以下操作：

```
void onCreate(Bundle savedInstance)
{
   if(someCondition) {
      // start some other activity here
      finish(); // finish this activity
   }

   if(isFinishing()) return;

   // More code here
} 
```

我想知道为什么他们不`return`马上放`finish()`，而是检查`isFinishing()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:04:16.193

一个活动可以通过多种方式完成。

[`finishActivity`](http://developer.android.com/reference/android/app/Activity.html#finishActivity%28int%29)来自调用 startActivityForResult 的活动

`finishAffinity`和`finishFromChild`

所以`isfinishing`用来说明这种情况。

# browser - 使用 jquery/javascript 清除浏览器历史记录

> ID：12991377
> 
> 赞同：0
> 
> 时间：2012-10-20T18:23:34.027
> 
> 标签：browser, browser-history

我有一个应用程序，其中会有很多 ajax 调用和 jquery 加载函数等。我发现由于浏览器历史记录，每次打开页面时动态内容都没有正确加载，如果我删除历史记录并刷新页面它的工作很好。现在

1.  有什么方法可以清理浏览器的历史记录吗？（这个方法正确吗？）
2.  我可以防止页面被缓存吗？？？？使用任何 jquery 代码。这样我的应用程序就不会存储在浏览器历史记录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:29:10.753

您需要在 jquery ajax 设置中将***缓存***设置为***false***

看[这里](http://api.jquery.com/jQuery.ajax/)

# module - 打字稿模块

> ID：12991382
> 
> 赞同：12
> 
> 时间：2012-10-20T18:23:43.530
> 
> 标签：module, typescript

我想知道是否有可能以某种方式将两个或多个文件中的两个或多个类添加到 TypeScript 的同一模块中。像这样的东西：

```
//src/gui/uielement.ts
module mylib {
    module gui {
        export interface UIElement {
            public draw() : void;
        }
    }
}

//src/gui/button.ts
///<reference path='uielement.ts'/>
module mylib {
    module gui {
        export class Button implements UIElement {
            constructor(public str : string) { }
            draw() : void { }
        }
    }
} 
```

可能会有几十个 GUI 类，因此不可能将它们全部放在同一个文件中。我所有的课程都将在“mylib”模块中。但是我该怎么做呢？

如果将`module mylib {...}`其转换为函数，则所有`mylib`文件中所有块的所有内容都应包含在同一函数中。

这是可能吗？

当我编译我得到这个：

```
$ tsc src/gui/button.ts 
src/gui/button.ts(4,39): The name 'UIElement' does not exist in the current scope 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-20T19:31:31.830

这正是它的工作原理！如果您查看生成的 javascript 代码，它会添加为接受对象的匿名函数，即“模块对象”：

```
var mylib;
(function (mylib) {
    var Button = (function () {
        function Button(x) {
            this.x = x;
        }
        return Button;
    })();
    mylib.Button = Button;    
})(mylib || (mylib = {})); 
```

如果您查看最后一行 ( )，您会发现它仅在现有变量为假（或评估为假的东西，如 null）`})(mylib || (mylib = {}));`时实例化一个新的 ojbect ( )。`mylib = {}`这样，所有命名相同的“模块”都将合并到同一个对象中。

因此，内部模块相互扩展。我必须注意，我还没有完全弄清楚嵌套模块会发生什么。

更新：如果我不使用嵌套模块语法，您的代码对我有用，但将其更改为点语法。例如：

```
module mylib.gui {
} 
```

代替

```
module mylib {
    module gui {
    }
} 
```

我将尝试调查为什么会发生这种情况，据我阅读规范，两种方式应该是平等的。

更新：如果嵌套引用的模块被标记为导出，它的工作原理：

```
module mylib {
    export module gui {
    }
} 
```

# postgresql - How do I create a table containing a column type of money that is by default set to zero?

> ID：12991383
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:23:46.487
> 
> 标签：postgresql

What I tried:

```
create table name
(id bigserial not null primary key, cash money not null default 0.0); 
```

Why does this code refuse to work? how to correct?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:29:01.910

Reading the documentation generally helps: [Monetary types](http://www.postgresql.org/docs/8.4/static/datatype-money.html)

> Input is accepted in a variety of formats, including integer and floating-point literals, as well as typical currency formatting, such as '$1,000.00'. Output is generally in the latter form but depends on the locale. ***Non-quoted numeric values can be converted to money by casting the numeric value to text and then money***, for example:
> 
> ```
> SELECT 1234::text::money; 
> ```

# java - 在 Arquillian 的测试中使用不同的 persistence.xml 文件

> ID：12991384
> 
> 赞同：3
> 
> 时间：2012-10-20T18:23:53.270
> 
> 标签：java, unit-testing, jakarta-ee, jboss-arquillian

我正在使用一个标准的 Maven 项目，我在 java 资源文件夹中有一个 persistence.xml，在测试文件夹中有另一个 persistence.xml。如何在 arquillian 测试中使用 test 文件夹中的 persistence.xml？或者这不是正常的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:59:14.723

> 如何在 arquillian 测试中使用 test 文件夹中的 persistence.xml？

您可以为您的测试构建一个 ShrinkWrap 部署，将您的测试资源的 persistence.xml 文件打包，而不是主资源。您可以在 @Deployment 方法中这样引用它：

`addAsManifestResource("persistence.xml", new File("src/test/resources/persistence.xml"))`

> 或者这不是正常的事情吗？

这是可以接受的事情。但是，使用 Arquillian Persistence Extension，您应该能够使用主资源的 persistence.xml 文件，因为持久性单元将由容器管理，并且 JPA 提供者可以在运行时使用底层数据源。

对于需要事务类型为 RESOURCE_LOCAL 而不是 JTA 的持久性单元的实例，通常使用仅测试持久性.xml，以启用对容器外部的持久性单元的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-16T11:05:55.360

也应该可以像这样添加它：

```
.addAsResource("test-persistence.xml", "META-INF/persistence.xml") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T18:28:57.053

您的代码中有一行定义您正在使用的持久性文件。找到它（在大多数平台上使用 Cf）并更改它。

# javascript - require.js 应该放在页面顶部还是底部？

> ID：12991395
> 
> 赞同：2
> 
> 时间：2012-10-20T18:25:48.820
> 
> 标签：javascript, requirejs

我知道将脚本放在页面底部是一种典型的最佳实践，这样它们就不会阻止其他内容的加载。Require.js 会异步加载其他脚本标签，所以我想知道将它放在页面的开头或结尾。如果你把它放在开头，你显然必须等待下载，但之后其他一切都应该是异步的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:30:44.827

Rob，可以将 Require 放在`<head>`. 首先，不，它不会等到页面加载后才开始加载脚本——它会立即开始加载它们。其次，这取决于你的应用程序，但是一些需要加载的脚本可能需要立即加载，而不是在加载 HTML 时。

但是，您可能会遇到的问题是同一域浏览器将支持多少个同时连接。如果您有很多依赖项，您可能想研究使用[Require.js Optimizer构建捆绑包](http://requirejs.org/docs/optimization.html)

# java - 在图像上放置 JavaFX 文本

> ID：12991397
> 
> 赞同：4
> 
> 时间：2012-10-20T18:26:09.120
> 
> 标签：java, javafx

我目前正在使用 javafx.scene.text.Text 添加笔触并更改文本颜色，但我需要将文本放在指定 X、Y 位置的图像上。有什么办法可以用我目前使用的 javafx 文本来做到这一点？或者我还能用什么来复制我所做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:09:53.307

将您的 ImageView 放在 Stackpane 中，并在视图顶部放置一个包含您的文本的组，并设置相应的 X/Y 坐标。

# c++ - 如何在 Linux Mint 上安装 GCC 4.7.2？

> ID：12991401
> 
> 赞同：7
> 
> 时间：2012-10-20T18:27:01.707
> 
> 标签：c++, linux, gcc, g++, linux-mint

我需要在 Linux Mint 13 上安装最新版本的 GCC。我发现了一些适用于 Ubuntu 12.04 的有用终端命令，但互联网上似乎没有类似的 Mint ......

编辑：我解决了这个问题，所以，为了帮助其他人，写下这些命令：

`sudo add-apt-repository ppa:ubuntu-toolchain-r/test`

`sudo apt-get update`

`sudo apt-get install g++-4.7 c++-4.7`

一切正常。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T18:48:06.677

我在不久前这样做时从源代码构建它。

我按照[此处](https://askubuntu.com/questions/168947/how-to-upgrade-g-to-4-7-1)的说明进行操作，但我首先下载并提取了 gcc 4.7.2 而不是最后一个，并将步骤 3 到 5 替换为运行随附的脚本（它会为您执行这些步骤）：

`gcc-4.7.2/contribs/download_prerequisites`

您可以从镜像站点之一下载 gcc 源：http: [//gcc.gnu.org/mirrors.html](http://gcc.gnu.org/mirrors.html)

* * *

**编辑：**在帖子中添加了说明

1.  下载解压g++-4.7.2

2.  $sudo apt-get install gcc-multilib m4

3.  为了弥补路径信息不足，在.bashrc中添加了这个

    导出 LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH

    导出 LIBRARY_PATH=/usr/lib/i386-linux-gnu 导出

    导出 C_INCLUDE_PATH=/usr/include/i386-linux-gnu 导出

    导出 CPLUS_INCLUDE_PATH=/usr/include/i386-linux-gnu

4.  出于同样的原因添加这些符号链接：

    $sudo ln -s /usr/include/i386-linux-gnu/gnu/stubs-32.h /usr/include/gnu

    $sudo ln -s /usr/lib/i386-linux-gnu/crti.o /usr/lib/crti.o

    $sudo ln -s /usr/lib/i386-linux-gnu/crt1.o /usr/lib/crt1.o

    $sudo ln -s /usr/lib/i386-linux-gnu/crtn.o /usr/lib/crtn.o

    $sudo ln -s /usr/local/lib/libmpc.so.3 /usr/lib/libmpc.so.3

5.  运行 gcc-4.7.2/contribs/download_prerequisites

6.  配置、制作、安装

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T18:46:44.700

查找特定的包裹类型

```
apt-cache search "package" 
```

在你的情况下“gcc”。我的展示了至少 40 个不同的 gnu 编译器包可供选择。听起来你想要的是 gcc-4.7-base。`apt-get`您也可以在搜索之前更新。

```
sudo apt-get update 
```

# c++ - 如何创建指向托管字符串的共享指针？

> ID：12991402
> 
> 赞同：0
> 
> 时间：2012-10-20T18:27:02.643
> 
> 标签：c++, stl, visual-studio-2012

我想对托管字符串使用共享指针，但我无法弄清楚语法。要创建共享指针，我需要一个分配器来调用`Marshal::StringToHGlobalAnsi(managedString)`. 要释放指针，自定义删除器应调用`Marshal::FreeHGlobal`. 我正在寻找类似的东西：

```
std::shared_ptr<IntPtr> managedFilename(Marshal::StringToHGlobalAnsi(videoFilename), 
    Marshal::FreeHGlobal);  // does not compile 
```

编译器正在阻塞`videoFilename`参数和`IntPtr`-to-void 转换。

我有这个在传统的 C 中工作；但是，我想使用 STL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:35:09.080

你想达到什么结果？

如果你想在非托管代码中使用字符串，你必须写这样的东西

```
void MarshalString ( String ^ s, std::string& os ) {
    using namespace Runtime::InteropServices;
    const char* chars = 
    (const char*)(Marshal::StringToHGlobalAnsi(s)).ToPointer();
    os = chars;
    Marshal::FreeHGlobal(IntPtr((void*)chars));
} 
```

如果您正在编写托管代码，请直接使用 String^ 类型。

shared_ptr 不适用于托管类型

**UPD** 你可以这样做，但为什么呢？

```
static void MyFreeHGlobal(void * ptr)
{
    using namespace Runtime::InteropServices;
    Marshal::FreeHGlobal(System::IntPtr(ptr));
}

// ...
System::String ^ s = L"test";
using namespace Runtime::InteropServices;
boost::shared_ptr<void> managedFilename(Marshal::StringToHGlobalAnsi(s).ToPointer(), 
    &MyFreeHGlobal); 
```

# android - 在 android 中切换 ViewFlipper 视图的一部分

> ID：12991406
> 
> 赞同：1
> 
> 时间：2012-10-20T18:27:19.590
> 
> 标签：android, viewflipper

我正在使用 ViewFlipper 在视图之间切换。我想获得与 Facebook 或 Youtube 的设置视图相同的效果，即保留最后一个视图显示在右侧。见下图。我怎样才能做到这一点？

![](../Images/af413914e7a45fb2f0a10f76c09487bd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:39:15.400

尝试使用 ViewPager，而不是使用 ViewFlipper。我认为，如果您想拥有不同的页面并让用户控制他们看到的页面，那么 ViewPager 是最好的。它默认使用分页动画，您可以指定页面宽度，以便用户可以看到它旁边的页面部分。

# gtk3 - 调用了 gdk_window_set_composited 但不支持合成

> ID：12991408
> 
> 赞同：0
> 
> 时间：2012-10-20T18:27:24.390
> 
> 标签：gtk3

在 gtk+-3.2.3 的“tests”文件夹中，有一个名为“testgtk”的脚本。当您运行脚本时，您将获得一个带有 56 个按钮的 UI，用于启动其他演示。演示“alpha windows”有效，但“composited window”仅在红色窗口上提供一个带有警告的按钮：

> Gdk-WARNING **: 调用了 gdk_window_set_composited 但不支持合成

我在 Ubuntu Natty 上，gtk+-3.2.3

# android - notifyDataSetChanged 不更新 ListView

> ID：12991411
> 
> 赞同：0
> 
> 时间：2012-10-20T18:27:53.450
> 
> 标签：android, android-listview, android-arrayadapter

我已阅读有关此问题的所有帖子，但仍然无法更新我的 ListView。我正在扩展 ListActivity。这是我的 ArrayAdapter：

```
 public List<String> songs = new ArrayList<String>();    
 public ArrayAdapter<String> allsongs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    allsongs = new ArrayAdapter<String>(this,
            R.layout.song_items, songs);

 BindAllSongs();        
 ListView listView=getListView();
    registerForContextMenu(listView);
 } 
```

现在，当我删除一个文件时，我希望 ListView 更新：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
        case R.id.delete_file:
            File file = new File(Environment.getExternalStorageDirectory().getPath() + "/AudioStreamRecorder/" + getListView().getAdapter().getItem(info.position).toString());
            file.delete();

            runOnUiThread(new Runnable() {
                public void run() {
                    allsongs.notifyDataSetChanged();    
                }
            });

            return true;
        case R.id.cancel:

            return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```

在我的 BindAllSongs(); 方法：

```
public void BindAllSongs() {
 ...
 ...
setListAdapter(allsongs);
    } 
```

这很好用（文件正在从 sd 卡中删除），但列表永远不会更新。当我离开，然后返回到 ListView 时，该项目消失了。（返回 ListView 调用 BindAllSongs(); 再次。）感谢您的帮助，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:35:38.770

ArrayAdapter 中的值实际上并不与文件系统相关联。您需要对被删除的项目调用 remove ，然后您可以调用 notifyDataSetChanged （尽管您可能不需要）。

# web-applications - 404错误处理

> ID：12991413
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:28:26.647
> 
> 标签：web-applications, coldfusion, application.cfc

我正在尝试将 application.cfc 配置为包含错误处理。我有这个：

```
/**
 * @hint ColdFusion received a request for a non-existent page.
 */
public boolean function onMissingTemplate(String targetPage) {
    return true;
} 
```

这不起作用，我尝试使用

```
include 404.cfm; 
```

但没有这样的运气。有人可以帮助使用新的脚本样式 Application.cfc 进行错误处理，谢谢！约翰尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:56:15.437

这本身并不是真正的“答案”......

“不起作用”是什么意思？你期待它做什么？它做了什么？永远不要问关于某事的问题，通过说“没用”来解释你为什么要问。这什么也没告诉我们。我们甚至不知道您的期望是否正确，更不用说事情是否正常工作，或者它以何种方式“不工作”。

您的代码中有语法错误：

```
include 404.cfm; 
```

应该：

```
include "404.cfm"; 
```

您是否阅读过文档并尝试过其中的示例：http: [//help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d2a.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d2a.html)？

> 有人可以帮助使用新的脚本样式 Application.cfc 进行错误处理吗

当然。你有什么问题吗？如果您微调您的问题以解释您具体遇到的问题，我们可以提供帮助。

由于您的问题含糊不清，我会否决您的问题，但会密切关注它，以防您对其进行修改，以便正确解释您的情况，并且您可以期望人们能够帮助您。但也要阅读文档。

# javascript - 骨干酸痛击中收藏中的所有物品

> ID：12991414
> 
> 赞同：0
> 
> 时间：2012-10-20T18:28:47.150
> 
> 标签：javascript, backbone.js, underscore.js

是的，我是骨干和下划线的新手。首先让我说我已经阅读了所有在线示例，但我仍然缺少一些东西。

发生的事情是我正在加载我的对象列表，但是当我单击删除时，它会遍历所有对象。我知道这是因为我没有正确分配各个项目，但我看不出是什么原因造成的。

我很想得到一些帮助。

这是基本的html代码

```
<div id="itemid" class="view">            
      <span class="text">{{-text}}</span>
      <a id="dele" data-role="button" data-inline="true" data-icon='delete' >Delete</a>
</div> 
```

这是我的项目列表代码

```
bb.view.List = Backbone.View.extend(_.extend({    
  tagName: "ul",

  initialize: function( items ) {
          var self = this
      _.bindAll(self)

      self.setElement('#itemid')

      self.elem = {
         text: self.$el.find('#text')
      }
      self.items = items

  },

      render: function(items) {
      var self = this

      self.$el.empty()

      self.items.each(function(item){
          var itemview = new bb.view.Item({
              model: item
          })
          itemview.render()
      })
  }

},scrollContent)) 
```

现在最后是单个项目的项目视图，请注意下面的模板代码。

```
bb.view.Item = Backbone.View.extend(_.extend({  
  tagName: "li",
  events: {
      'tap #dele': function(){ 
        var self = this
       self.removed()      
        return false;
      }  
  },  

    render: function(){
        var self = this
        _.bindAll(this)
        self.setElement('#itemid')

        self.elem = {
        dele: self.$el.find('#dele')
        }       

        var html = self.tm.item( self.model.toJSON() )
        $(this.el).append( html )  

    },

    removed: function()
    {
        var self = this
        this.model.removed();
    }
},{
    tm: {
      item: _.template( $('#itemid').html() )
    }
})) 
```

希望有人可以帮助

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:26:12.767

我知道这与您的问题没有直接关系，但我有几个建议。你的代码：

你似乎`var self = this; self.method()`到处都在使用。`this`除非您需要进入闭包，否则不要这样做。但是，是的，当你进入`each`迭代器时你需要它。

您不需要调用`_.bindAll(self)`所有方法。同样，您最好显式绑定`this`到方法，例如：

```
this.collection.bind('reset', this.render, this);
this.el.on('click', 'a', this.handleClick.bind(this)); 
```

此时您可能没有意识到甚至可能根本不关心您的客户端资源，而是将您的环境绑定到`this`创建许多您永远不会使用的闭包（分配内存）。

现在有了您的问题，我将重构您的代码，如下所示：

```
var itemTmp = $('#itemid').html();

bb.view.Item = Backbone.View.extend({  
    tagName: "li",

    events: {
        'tap #dele': "deleteItem"
    },

    render: function(){
        this.el = _.template(itemTmp)(this.model.toJSON());
    },

    deleteItem: function() {
        this.model.destroy(); // deletes model
        this.remove(); // deletes view
    }
});

bb.view.List = Backbone.View.extend({    
    tagName: "ul",

    initialize: function(items) {
        this.setElement('#itemid');
        this.collection = items;
        this.render();
    },

    render: function() {
        var self = this; // yes, you will need it in the iterator

        this.$el.empty();

        this.collection.each(function(model){
            var itemview = new bb.view.Item({
                model: model
            });

            itemview.render();
            self.$el.append(itemview.el);
        });
    }

});

_.extend(bb.view.List.prototype, scrollContent); 
```

请注意，`Item`视图不会将其 HTML 插入 DOM（或父视图元素）。基本上，当子视图或依赖项不访问父元素时，这是一种更好的做法。因此，您可以`render()`返回 HTML，也可以`el`从实例化它的模块访问 View 的实例属性。

最后的观察——当你有一个有很多视图的应用程序时，你不想为每个列表项创建新的视图实例。您最好插入具有唯一 ID 的 DOM 节点，然后在 DOM 事件上读取这些 ID 并解析项目 ID，并通过`this.collection.get(id)`. 但同样，这是出于纯粹的性能考虑。

# php - 学习 PHP 我需要一些关于 concat、组合运算符和增量运算符的说明

> ID：12991416
> 
> 赞同：0
> 
> 时间：2012-10-20T18:28:53.393
> 
> 标签：php, concatenation

无论如何，我几乎觉得问这种基本问题很愚蠢。

我刚开始通过阅读一些书籍自学 php，在此之前我曾经从一个在线教程徘徊到另一个，我应该从非常基础的开始，但我首先深入研究 if else、foreach、while、数组等。

尽管抓住了这些概念，但我现在意识到很少有事情让我感到困惑。

所以我做了这个简单的练习，使用 ++ 打印出从 1 到 5 的数字，*= 乘以 2 的幂。

```
$i = 1;
echo $i.'-'.++$i.'-'.++$i.'-'.++$i.'-'.++$i; 
```

看起来一切都很好，我的问题是为什么如果我现在回显 $i 它会返回 5？如果我想稍后重用它，是否必须将 1 重新分配给 $i ？

我尝试使用相同的模式来呼应 2 的幂，但我得到的只是第一个和最后一个乘法。

```
$p = 1;
echo $p .'-'.$p*= 2 .'-'.$p*= 2 .'-'.$p*= 2 .'-'.$p*= 2 .'-'.$p*= 2 .'-'; 
```

这是否意味着如果我使用组合运算符并且我必须回显每一行，我就不能使用连接？

请记住，我仅限于使用前两章中解释的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:37:34.187

看起来你想要一个[`for`](http://php.net/manual/en/control-structures.for.php)循环。

```
$stringVar = "";
for($i=1;$i<6;$i++) {
    $stringVar .= "$i -";
}
echo $stringVar; 
```

我会把第二个留给你作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:38:56.437

一个简单的变量（比如你的 $i）存储一个数字

因此，如果您执行**++$i**，则执行与**$i = $i +1**相同的操作 ，这意味着您更改了变量的内容

> $i = 1;
> $i_originalValue = $i;
> echo $i.'-'.++$i.'-'.++$i.'-'.++$i.'-'.++$i;
> 回声 $i; //打印 5
> echo $i_originalValue; //打印 1

# c++ - 编译器循环引用

> ID：12991431
> 
> 赞同：0
> 
> 时间：2012-10-20T18:29:49.807
> 
> 标签：c++, c, compiler-construction, struct

我在我的代码中定义了两种类型。

```
typedef struct Project Project;

typedef struct Worker{
  Project projects[10];
}Worker;

struct Project{
 Worker member[30];
} 
```

编译过程抛出以下错误：

> 数组类型具有不完整的元素类型

我认为是由于循环引用，当编译器尝试为数组分配空间时，它不知道类型 Project，如果我更改类型的定义顺序，也会发生同样的事情。我对这个问题是否正确？最重要的是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:40:04.663

正如评论中提到的，两种结构类型都应该保存*指向*另一种类型的指针。就目前而言，`Project`和`Worker`结构都必须无限大，因为每个`Worker`都包含 10 个`Project`s，其中包含 30 个`Worker`s，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T18:46:32.963

你是对的。您的 Worker 结构按值包含 Project 类型的成员。为了让编译器正确地构造 Worker 对象，它需要知道它的大小。这意味着它需要具有 Project 类型的完整定义 - 在您的代码中，它仅在几行之后定义。您可以通过在 Worker 结构中使用对项目成员的引用/指针并使用前向声明来宣布它来解决此问题，以便编译器知道它是已知类型（由于指针的大小与类型无关，因此避免了上述问题它指向因此编译器不需要完整的类型定义）。

像这样的东西：

```
struct Project;  //forward declaration of Project type
typedef struct Worker{
  Project *projects[10];
} Worker;

struct Project{
  Worker member[30];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T18:42:07.117

当你声明一个类型的数组时`Project`，编译器需要知道定义以便定义`Worker`. 使用您的前向声明`Project`，您只是通知编译器存在`Project`，但它需要知道完整的定义。您可以改为声明一个指针并执行`malloc`.

```
typedef struct Project Project;

typedef struct Worker{
  Project *projects;
}Worker;

struct Project{
 Worker *member;
}; 
```

旁注：结构定义中缺少分号：

```
struct Project{
 Worker member[30];
}; 
```

# jquery - 将标签添加到遵循特定格式的文本

> ID：12991433
> 
> 赞同：2
> 
> 时间：2012-10-20T18:30:09.767
> 
> 标签：jquery, jquery-selectors

我需要添加一个跨度来更改文本颜色，但前提是文本遵循某种格式。例如：

```
<div>
    Random text. 
    <br>
    x. I want to add a span to this line
    <br>
    Not this one.
    <br>
    x. Yes to this.
    <br>
    x. And this!
</div> 
```

在此示例中，我想将 a 添加`span`到以 . 开头的行中`x.`。我无法更改格式并且文本不在“p”内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:36:03.843

[jsfiddle](http://jsfiddle.net/FSAJS/)

```
$("div").html($("div").html().replace(/x\.(.*)/g, function(a){return "<span> " +a +"</span>"}));​ 
```

# java - Switchstatement 在空白处停止读取

> ID：12991438
> 
> 赞同：2
> 
> 时间：2012-10-20T18:30:26.657
> 
> 标签：java, switch-statement, whitespace

所以我在为我的 java 类做作业时遇到问题。目的是创建一个程序，该程序使用 switch 语句将字母从字符串转换为其语音。即，A 或 a 变为 Alpha。

我遇到的问题是 switch 语句在字符串中的第一个空格处停止读取。我如何让它继续读取字符串而不在空格处停止（即“”）？

基本上用户输入一个字符串“Hi Hi”，输出应该是“Hotel Indiana Hotel Indiana”

我遇到的问题是它只会让“印第安纳酒店”停在我认为的第一个空白处。

这是我到目前为止的代码：（我删掉了大部分字母/数字以节省空间，并保留了我认为对回答问题最重要的内容。）

```
 import java.util.*;
    public class SwitchStatement {

/**
 * @param args
 */
public static void main(String[] args) {

    Scanner keyboard = new Scanner(System.in);
    System.out.println ("Enter a message: ");
    String message = keyboard.next(); 
    for(int i = 0 ; i < message.length(); i++) 
      switch(message.charAt(i)) { 
    case 'a':
    case 'A':  
        System.out.print("Alpha"); 
        break; 
    case 'b':
    case 'B':  
        System.out.print("Bravo"); 
        break;
    case ' ':  
                System.out.print(" "); 
                break;
    default:  
                System.out.print(message.charAt(i)); 
                break;
}

}
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:34:25.397

`String message = keyboard.next();` 调用时读取一个单词，以空格 (" ") 分隔。

用于`String message = keyboard.nextLine();` 读取包括空格在内的整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:34:14.733

你应该使用`nextLine`. 如果你使用`next()`分隔符进入图片，这是空格字符。所以最终你最终只能读取一个标记而不是完整的字符串。

```
String message = keyboard.nextLine(); 
```

例如对于以下字符串

```
A a  B b
keyboard.next()---> will return you A if you again call then B and so on
keyboard.nextLine()-->will return you whole line ie. A a  B b which you want 
```

# jquery - 如何验证两个或多个模态？

> ID：12991440
> 
> 赞同：1
> 
> 时间：2012-10-20T18:30:34.720
> 
> 标签：jquery, validation, twitter-bootstrap, modal-dialog

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/) 并集成了[jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我只能验证一个模态：

```
$(document).ready(function(){

// Validate
// http://bassistance.de/jquery-plugins/jquery-plugin-validation/
// http://docs.jquery.com/Plugins/Validation/
// http://docs.jquery.com/Plugins/Validation/validate#toptions

    $('.form-horizontal').validate({
    rules: {
      name: {
        minlength: 2,
        required: true
      },
      email: {
        required: true,
        email: true
      },
      subject: {
        minlength: 2,
        required: true
      },
      message: {
        minlength: 2,
        required: true
      }
    },
    highlight: function(label) {
        $(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
        label
            .text('OK!').addClass('valid')
            .closest('.control-group').addClass('success');
    }
  });

}); // end document.ready 
```

# c++ - 在 main.cpp 中调用 copyQueue

> ID：12991441
> 
> 赞同：0
> 
> 时间：2012-10-20T18:30:36.617
> 
> 标签：c++

我对我的导师要求我做什么感到非常困惑。他提供的我们程序的示例输出说：“发送 q1 作为参数来测试复制构造函数”

所以我不确定他在问什么。

我在这里创建了一个 copyQueue 函数：

```
template <class Type>
void queueType<Type>::copyQueue(/*const*/ queueType<Type>& otherQueue)
//I omitted the const qualifier as I kept getting error messages when it was included
{
    if(otherQueue.queueFront=NULL) {
        initializeQueue();
    } else {
        count = otherQueue.count;
        maxQueueSize= otherQueue.maxQueueSize;
        queueFront = otherQueue.queueFront;
        queueRear = otherQueue.queueRear;
        list= new Type[maxQueueSize];
        assert(list!=NULL);

        for(int i = queueFront; i<queueRear; i++)
            list[i]= otherQueue.list[i];
    }//end else
}//end function 
```

还有一个将打印队列内容的函数：

```
template <class Type>
void queueType<Type>::debugArray() {
    for(int current =queueFront; current<count; current++) {
        cout<<"[" << current<<"] ,"<< list[current]<<" ";
    }
    cout<<"\n"<<endl;
} //end debugQueue 
```

我假设我应该在 main.cpp 中像这样调用 copyQueue：

```
#include <iostream>
#include "queueAsArray.h"

using namespace std;

int main() {
    queueType<int> q1;
    queueType<int> q2;

    for(int i= 0; i<10; i++)
    q1.addQueue(i);
    q1.debugQueue();

    q1.copyQueue(q1);
    q1.debugQueue();

    return 0;
} 
```

当我这样做时，我第二次调用时没有任何反应`debugQueue`。我有示例输出，我假设我需要将 q1 作为参数发送给`copyQueue`函数，然后`debugQueue`再次调用以显示队列中仍有组件。

我有点迷茫和困惑，为什么它不会第二次打印。有什么想法吗？这只是我工作的一个片段，所以如果您需要整个实现文件或完整的 main.cpp 文件，请告诉我。或者，如果您需要示例输出示例，我也可以提供。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:35:25.713

我认为您的讲师希望您做的是测试复制构造函数。在你的主要你应该有：

```
int main() {
    queueType<int> q1;
    queueType<int> q2;

    for(int i= 0; i<10; i++)
        q1.addQueue(i);
    q1.debugQueue();

    q2.copyQueue(q1); // q2 here
    q2.debugQueue();  // q2 here

    return 0;
} 
```

然后这两个`debugQueue`调用应该打印相同的数组，这证明 queue`q1`被正确复制到 queue`q2`中。

您的代码在`copyQueue`函数内部也有错误：

```
if(otherQueue.queueFront = NULL) 
```

应该

```
if(otherQueue.queueFront == NULL) 
```

带有双重等号。一个简单的`=`只是擦除`otherQueue`（这可​​能是你的编译器抱怨的原因`const`）。平等的双重`==`测试。如果你更正了这个，你可以添加`const`后面（拥有一个带有非常量参数的复制构造函数是一个非常糟糕的主意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:58:18.493

复制构造函数是一个非常具体的构造，而不仅仅是另一个答案似乎暗示的“复制对象”。阅读[这篇文章](http://www.fredosaurus.com/notes-cpp/oop-condestructors/copyconstructors.html)以快速了解它，只需谷歌“复制构造函数”了解更多信息。

您可能还想阅读[这个片段](http://www.parashift.com/c++-faq/lint-guidelines.html)，了解为什么如果您有一个复制构造函数，您可能需要一个赋值运算符和一个虚拟析构函数。

您还应该阅读有关 const 正确性的[整个部分，以诊断您的 const 错误。](http://www.parashift.com/c++-faq/const-correctness.html)

# c# - 如何将文本框中包含的数据传输到 datagridview？

> ID：12991448
> 
> 赞同：4
> 
> 时间：2012-10-20T18:31:16.203
> 
> 标签：c#, winforms, datagridview, textbox

我在 Windows 窗体应用程序中有 4 个文本框和一个名为“添加”的网格视图和按钮。我想要的是，当我单击“添加”按钮时，在 4 个文本框中输入的数据应该转到同一行中的 datagridview 的四个不同列。如果我清除文本框，再次填充它们并再次单击“添加”按钮，则数据应转到 gridview 的第二行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:04:31.170

在您的应用程序的某处创建如下所示的类

```
public class MyClass
{
    public string field1 { get; set; }
    public string field2 { get; set; }
    public string field3 { get; set; }
    public string field4 { get; set; }
} 
```

在你的 form.cs 里面写这个，

```
public static List<MyClass> lst = new List<MyClass>(); 
```

在添加按钮的单击事件中执行此操作

```
private void btnAdd_Click(object sender, EventArgs e)
        {
            MyClass obj = new MyClass();
            obj.field1 = txt1.Text.Trim();
            obj.field2 = txt2.Text.Trim();
            obj.field3 = txt3.Text.Trim();
            obj.field4 = txt4.Text.Trim();

            lst.Add(obj);
            dataGridView1.DataSource = lst;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:37:30.677

要遵循的步骤：

1) 绑定 DataGrid 视图后，将 DataSource 保存在 Viewstate 变量中

2）为添加按钮定义点击事件在点击事件中，调用具有数据源的Viewstate变量，将其转换为DataTable。创建该数据表的新行，为新行的单元格分配值。将此新行添加到 Datatable，再次将 dataTable 保存在 ViewSate 中，将数据源绑定到 DataGrid

就这些了~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:19:57.060

首先感谢SHAKIR SHABBIR先生，但我认为Windows窗体应用程序中没有视图状态......

我建议使用静态集合类型...

您可以为您的输入表单定义一个类并为每个文本框定义一个变量，当您单击添加按钮时创建该类的对象，使用您的文本框设置其所有值，在网格中插入行，并保存所有行数据（每个类的对象gridview 行）在列表中

您还可以使用静态数据表...您必须为每个文本字段创建列..向数据表添加行..选择网格的数据源...

如果您需要进一步的帮助，我会随时为您提供帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:02:00.973

使用此代码：

```
 namespace WindowsFormsApplication1
 {
     public partial class Form1 : Form
    {
        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=Dataset;Integrated Security=True");
        SqlDataAdapter ds1 = new SqlDataAdapter();

        BindingSource bd = new BindingSource();

        public Form1()
        {
            InitializeComponent();
        }

       private void btnAdd_Click(object sender, EventArgs e)
      {
        ds1.InsertCommand = new SqlCommand("INSERT INTO Employee VALUES(@FirstName,@LastName)", con);
        ds1.InsertCommand.Parameters.Add("@FirstName", SqlDbType.VarChar).Value = txtFirstName.Text;
        ds1.InsertCommand.Parameters.Add("@LastName", SqlDbType.VarChar).Value = txtLastName.Text;

        con.Open();
        ds1.InsertCommand.ExecuteNonQuery();
        con.Close();
    }

    private void btndisplay_Click(object sender, EventArgs e)
    {
        ds1.SelectCommand = new SqlCommand("Select * from Employee", con);
        ds.Clear();
        ds1.Fill(ds);

        dataGridView1.DataSource = ds.Tables[0];

        bd.DataSource = ds.Tables[0];

        //txtFirstName.DataBindings.Add("Text", bd, "FirstName");
        //txtLastName.DataBindings.Add("Text", bd, "LastName");

    }

    private void btnPervious_Click(object sender, EventArgs e)
    {
        bd.MovePrevious();
        update();
        records();
    }

    private void btnNext_Click(object sender, EventArgs e)
    {
        bd.MoveNext();
        update();
        records();
    }

    private void btnFirst_Click(object sender, EventArgs e)
    {
        bd.MoveFirst();
        update();
        records();
    }

    private void btnLast_Click(object sender, EventArgs e)
    {
        bd.MoveLast();
        update();
        records();
    }

    private void update()
    {
        dataGridView1.ClearSelection();
        dataGridView1.Rows[bd.Position].Selected = true;
        records();
    }
    private void records()
    {
        label1.Text = "records" + bd.Position + " of " + (bd.Count - 1);

    } 
```

不要忘记标记这个答案

# database-design - 关于引用多个表和保持完整性的建议

> ID：12991454
> 
> 赞同：0
> 
> 时间：2012-10-20T18:31:59.930
> 
> 标签：database-design, relational-database, foreign-key-relationship

我需要有关此设计的帮助，诊断可以基于证据或测试结果或两者兼而有之。我有单独的证据表（例如：咳嗽，无需任何其他测试即可开药）和测试表（例如：验血）。我希望诊断表能够解决所有场景（仅基于证据，仅基于测试结果，基于证据和测试结果。我的表结构是 Diagnosis_id，patient_id，evid_id，test_id，Dignosis_name。我想将 evid_id 和 test_id 称为外键，但有这意味着我必须始终提供两个值，但事实并非如此。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:38:25.967

外键可以为空。

您可能需要像这样的查询

```
select patients.name, diagnoses.id, evidence.text, tests.text
from patients inner join diagnoses on diagnoses.patient_id = patients.id
left join evidence on diagnoses.evid_id = evidence.id
left join tests on diagnoses.test_id = tests.id
where .... 
```

使用左连接意味着您将始终获得结果集，无论诊断是否链接到证据表或测试表（或两者都不链接）。

# string - 如何从 ArrayList 创建完整的字符串

> ID：12991455
> 
> 赞同：1
> 
> 时间：2012-10-20T18:32:09.770
> 
> 标签：string, loops, for-loop, arraylist

我想`String`从`ArrayList`. 目前，我只能从`ArrayList`. 我的代码：

```
eachstep = new ArrayList<String>();
for (int i = 0; i < parsedsteps.size(); i++) {
eachstep.add(parsedsteps.get(i).replaceAll("<[^>]*>", ""));
}                   
for (int i = 0; i < eachstep.size(); i++) {
    String directions = i + "."+" "+eachstep.get(i)+"\n"+;
} 
```

给我：

```
3\.  This is step 3. 
```

代替：

```
1\. This is step 1\.          
2\. This is step 2.
3\. This is step 3. 
```

如何使我的 for 循环`String`使用来自的所有值创建一个`ArrayList`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:36:14.543

您需要在循环之外声明您的字符串，我建议也使用[StringBuilder](http://developer.android.com/reference/java/lang/StringBuilder.html)，这样构建字符串更有效。

```
StringBuilder directions = new StringBuilder();
for( int i = 0; i < eachstep.size(); i++ )
{
    directions.append( i + "." + " " + eachstep.get( i ) + "\n" );
} 
```

然后，当您想从 StringBuilder 中取出字符串时，只需调用`directions.toString()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:35:33.813

```
String directions = "";
for (int i = 0; i < eachstep.size(); i++) {
    directions += i + "."+" "+eachstep.get(i)+"\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:40:56.353

试试这个

```
 eachstep = new ArrayList<String>();
   for (int i = 0; i < parsedsteps.size(); i++) {
       eachstep.add(parsedsteps.get(i).replaceAll("<[^>]*>", ""));
   }
   String directions="";
   for (int i = 0; i < eachstep.size(); i++) {
       directions += i + "."+" "+eachstep.get(i)+"\n"+;
   } 
```

如果您有大尺寸的字符串数组，您可能需要考虑使用 StringBuilder，例如

```
 StringBuilder builder = new StringBuilder();
  for(String str: eachstep ){
       builder.append(i).append(".").append(str).append("\n");
  }
  String direction = builder.toString(); 
```

# android - Android：阿尔卡特手机未出现在 Eclipse/ADB 中

> ID：12991456
> 
> 赞同：3
> 
> 时间：2012-10-20T18:32:11.350
> 
> 标签：android

我买了一部新的 Alcatel Onetouch 918n 手机进行应用测试。但是，我无法让它在 Eclipse 中被识别以进行测试。

经过一些痛苦的步骤，我现在在设备管理器中看到“Alcatel Android ADB interface”。但我似乎无法让这款手机对 Eclipse/ddms/adb 可见。

由于我以某种方式（我认为在 PC 上安装了 Alcatel Android mgr 之后）安装了 OEM Usb 驱动程序，我认为我不需要 google usb 驱动程序，对吗？

是的，手机上的 USB 调试已打开。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:33:15.340

看看[http://blog.fh-kaernten.at/wehr/?p=1182](http://blog.fh-kaernten.at/wehr/?p=1182)，作者在其中描述了他的设备在设备管理器中但没有出现在 ADB 中的问题。另请查看[Adb Devices can't find my phone](https://stackoverflow.com/questions/6469646/adb-devices-cant-find-my-phone)。其他一些可以尝试的事情：

*   查看在 Eclipse 之外运行 ADB 时会得到什么（命令行中的“adb 设备”）。有时 Eclipse 很挑剔，所以最好在它之外解决这个问题。有时，当 Eclipse 看不到您的设备时，需要退出并重新启动它，或者拔下并重新插入您的设备。
*   当您进行任何更改时，请使用“adb kill-server”和“adb start-server”停止并重新启动 adb 服务器，然后再次尝试查看您的设备。
*   如果可能，请尝试使用不同的设备，看看它是否显示在 adb 中（尽管您可能必须先为其安装驱动程序）。这可能会告诉您问题出在您的阿尔卡特手机还是计算机上的软件（缺少 SDK 组件、错误的 USB 驱动程序等）

# c# - 只调试服务器端代码而不调试脚本？

> ID：12991457
> 
> 赞同：1
> 
> 时间：2012-10-20T18:32:13.877
> 
> 标签：c#, asp.net, visual-studio-2010, debugging

在调试 asp .net 应用程序时，是否有一种简单的方法可以仅将调试器附加到服务器端代码？我现在想忽略所有 JS 错误和未处理的异常。IDE 是 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:44:37.450

你可以在你的 javasript 上声明这个

```
function errorHandler(msg,url,lno){ 
   return (true);
} 

window.onerror = errorHandler; 
```

这样一来，所有的 javascript 错误都不会显示出来。

# html - CSS 在 IE 上不起作用

> ID：12991469
> 
> 赞同：-6
> 
> 时间：2012-10-20T18:34:16.600
> 
> 标签：html, css

我正在尝试制作一个谷歌搜索框，并且为此设计了一个代码。但是我有一个问题导致css在firefox chrome和IE以外的其他浏览器上运行......那我该怎么办？

这是代码：

> Abulkas 平板电脑

```
 #outerContainer{
         width: 350px;
         height: 60px;
         border-radius: 10px;
         box-shadow: 0 0 5px 1px #888;
         display: block;
       }
       .buttonwithimg
             {
             background: url(google-g-logo-2012.png) no-repeat;
             cursor:pointer;
                         border: none;
             }

       .googleButton{
         position: relative;
         left: 5px;

         width: 40px;
         height:50px;
       }

       #srchBox{
         border-radius: 3px;
         margin-left: 8px;
         height: 50px;
         width:200px;
         margin-top: 5px;
       }
       .otherButton{
         width:43px;
         height: 50px;
         .background { width:150px; height:150px; padding:3px; background-image:
 url(andro-view-tools/Transform-galaxy-s2-to-galaxy-s3.jpg); border:
 1px solid black; /* Safari and Chrome */
 -webkit-background-size: 190% 160%;

 /* Firefox */
 -moz-background-size: 190% 160%;

 /* Internet Explorer */
 -ms-background-size: 190% 160%;

 /* Opera */
 -o-background-size: 190% 160%;

 /* CSS3 */ background-size: 190% 160%; }
      }

     </style>
     <div class="background">
        &nbsp;<div id="outerContainer" style="width: 342px; height: 63px">
         &nbsp;&nbsp;<button class="buttonwithimg" style="width: 59px; height: 57px">;
 </button><input id="srchBox" type="search">    
 <button>class="otherButton" style="width: 59px; height: 52px">Search</button>
     </div>
        </div>   </body> </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:47:49.450

可以在[这里找到 IE 的 box-shadow “hack”](http://fetchak.com/ie-css3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:19:15.847

IE 不支持`box-shadow`。

为了解决这个问题，我建议使用[css3Pie](http://css3pie.com/)。

另外，我不认为 IE9 需要前缀 for `background-size`，所以我不相信你需要`-ms-background-size`. IE8 根本不支持`background-size`，不管任何前缀。如果你想在 IE8 中支持它，试试这个 jquery hack：[https ://github.com/louisremi/jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)

[顺便说一句： CanIUse.com](http://caniuse.com/)是帮助确定任何特定浏览器支持哪些功能的好网站。

希望有帮助。

# ios - iOS 消息发送到解除分配的实例

> ID：12991472
> 
> 赞同：0
> 
> 时间：2012-10-20T18:34:33.717
> 
> 标签：ios, uigesturerecognizer, modalviewcontroller, viewdidappear

我在这里有点难过。如果用户选择表单之外的任何位置，我有一个`UIModalPresentationFormSheet`并且我添加了一个手势识别器来处理关闭表单。我在表单顶部的导航栏中也有一个取消按钮。当用户选择表单外的任何位置以使用手势识别器关闭表单时，一切正常。但是当他们使用取消按钮时，忽略手势识别器，一旦表单关闭，我就会收到以下错误。我相信它从识别器被发送到 handleTapBehind 方法。我不明白为什么，因为当视图被关闭时，`viewWillAppear`不应该调用将识别器分配给已释放方法（`handleTapBehind`）的方法。

错误：

> [CallWebViewViewController handleTapBehind:]：消息发送到释放的实例 0x21ee5db0

代码：

```
- (void)viewDidAppear:(BOOL)animated {

[super viewDidAppear:animated];

if(UIUserInterfaceIdiomPad == UI_USER_INTERFACE_IDIOM())
{
    if(![self.view.window.gestureRecognizers containsObject:recognizer])
    {
        recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapBehind:)];

        [recognizer setNumberOfTapsRequired:1];
        recognizer.cancelsTouchesInView = NO;
        [self.view.window addGestureRecognizer:recognizer];
    }
}
}

- (void)handleTapBehind:(UITapGestureRecognizer *)sender {

if (sender.state == UIGestureRecognizerStateEnded)
{
    CGPoint location = [sender locationInView:nil];

    if (![self.view pointInside:[self.view convertPoint:location fromView:self.view.window] withEvent:nil])
    {
        [self dismissViewControllerAnimated:YES completion:nil];
        [self.view.window removeGestureRecognizer:recognizer];
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:42:55.527

将以下内容添加到 viewController 的 viewWillDisappear 中：

```
recognizer.delegate=nil; 
```

希望这可以帮助。

PS：我不明白你的最后一句话：

> 我不明白为什么，因为当视图被关闭时，不应调用 viewWillAppear，它将识别器分配给一个已释放的方法（handleTapBehind）。

特别是“正在将识别器分配给解除分配的方法”？

# java - 使用 JUnit 测试 SQLiteOpenHelper 子类

> ID：12991477
> 
> 赞同：1
> 
> 时间：2012-10-20T18:35:12.840
> 
> 标签：java, android, testing, junit, instrumentation

我正在为我的 Android 应用程序编写 JUnit 测试。我已经阅读了 Android 开发人员资源（测试基础知识、Spinner 示例测试等）。现在我想独立于使用它的活动来测试我的 SQLiteOpenHelper 子类。我的想法是扩展`ActivityInstrumentationTestCase2<Activity>`. 可以简单地`Activity`用作泛型参数还是我需要一个子类？另外，我是否朝着正确的方向前进，还是有更好的方法来测试我的 SQLiteOpenHelper 子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T12:44:04.760

我正在寻找这个问题的答案，并在这里找到了这个链接以及另一个有趣的相关问题：

*   [SQLiteOpenHelper 的 Android JUnit 测试](https://stackoverflow.com/questions/8499554/android-junit-test-for-sqliteopenhelper)

@Pietro[接受的答案](https://stackoverflow.com/a/13556184/383414)显示了一些简单的代码，使用 basic `AndroidTestCase`，这将有助于直接回答问题。

```
public class DatabaseTest extends AndroidTestCase {
    private MyDatabase db;

    public void setUp(){
        RenamingDelegatingContext context 
        = new RenamingDelegatingContext(getContext(), "test_");
        db = new MyDatabase(context);
    }

    public void testAddEntry(){
        // Here I have my new database which is not connected to the standard database of the App
    }

    public void tearDown() throws Exception{
        db.close(); 
        super.tearDown();
    }
} 
```

我很高兴它看起来多么简单。就我而言，我是 Android 测试的新手，所以目前即使是简单的东西似乎也很困难。

* * *

但**有趣的部分**是关键，是使用[`RenamingDelegatingContext`](http://developer.android.com/reference/android/test/RenamingDelegatingContext.html)类作为你的“上下文”，而不是仅仅使用普通的上下文。这似乎建立在@Jens 的评论之上。

此类包装给定上下文并将大多数操作委托给该上下文。有用的部分是它`performs database and file operations with a renamed database/file name`（[参见在线文档](http://developer.android.com/reference/android/test/RenamingDelegatingContext.html)）。

这允许您的 TEST 代码使用与您的 PRODUCTION 代码不同的数据库实例 - 至少在我的情况下这将是有用的。

* * *

这是另一个相关的帖子，其中接受的答案说的几乎相同：

*   [Android 上的测试数据库：ProviderTestCase2 还是 RenamingDelegatingContext？](https://stackoverflow.com/questions/3096378/testing-database-on-android-providertestcase2-or-renamingdelegatingcontext)

那里有一些关于使用的有用提示`ContentProvider`（但这是另一天的不同问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:59:31.697

以下链接讨论了在 android 中的测试：

[http://developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)

可能你已经看过它只是发布它，以防你错过了它。它是一个很好的资源来了解 android 中的 junit ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T15:24:58.983

对于使用 Android Studio 进行测试，

您应该使用`MockContext`而不是`RenamingDelegatingContext`.

如果你使用`RenamingDelegatingContext`，你会得到上下文为空。对于 AndroidTestCase，`getContext()`将返回 null。对于 InstrumentationTestCase，`getInstrumentation().getContext()`将返回 null。

有关详细信息，请参阅此答案。[https://stackoverflow.com/a/29063736/1020456](https://stackoverflow.com/a/29063736/1020456)

# iphone - 无法阻止 AVAudioPlayer 播放

> ID：12991480
> 
> 赞同：0
> 
> 时间：2012-10-20T18:35:32.373
> 
> 标签：iphone, ios, ipad

这是我的代码

AppDelegate.m 我使用这段代码来启动 AVAudioPlayer。它工作正常。

```
#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/Helloween.mp3"];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    //Initialize our player pointing to the path to our resource
    backgroundMusic = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        backgroundMusic.delegate = self;
        [backgroundMusic play];
        backgroundMusic.numberOfLoops = -1;
        backgroundMusic.currentTime = 0;
       backgroundMusic.volume = 1.0;
    }
    // Override point for customization after application launch.
    return YES;
} 
```

在 AppDelegate.h 我添加框架和 AVAudioPlayer

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    AVAudioPlayer *backgroundMusic;
}

@property(nonatomic,retain) AVAudioPlayer *backgroundMusic;
@property (strong, nonatomic) UIWindow *window;

@end 
```

在 ViewController.mi 中还添加框架 AVFoundation 并导入 AppDelegate.h

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
#import <CoreData/CoreData.h>
#define fName @"data.plist"
#define kNames @"data.plist"
#import <AVFoundation/AVFoundation.h>
#import "AppDelegate.h"

@interface ViewController ()

@end
@implementation ViewController

@synthesize backgroundMusic;
-(IBAction)stopMusic:(id)sender {
   AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
      [appDelegate.backgroundMusic stop];

}

- (void)viewDidLoad
{
      [super viewDidLoad];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    //set the position of the button
    button.frame = CGRectMake(100, 100, 20, 20);
    button.backgroundColor = [UIColor whiteColor];
    [button addTarget:self action:@selector(stopMusic:) forControlEvents:UIControlEventTouchUpInside];

    //add the button to the view
    [self.view addSubview:button]; 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import <CoreData/CoreData.h>
#define kNames @"data.plist"
#import <AVFoundation/AVFoundation.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate>  {
 AVAudioPlayer *backgroundMusic;
} 
```

我需要用按钮停止 AudioPlayer。

* * *

这是我的代码

AppDelegate.m 我使用这段代码来启动 AVAudioPlayer。

```
#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/Helloween.mp3"];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    //Initialize our player pointing to the path to our resource
    backgroundMusic = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        backgroundMusic.delegate = self;
        [backgroundMusic play];
        backgroundMusic.numberOfLoops = -1;
        backgroundMusic.currentTime = 0;
       backgroundMusic.volume = 1.0;
    }
    // Override point for customization after application launch.
    return YES;
} 
```

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    AVAudioPlayer *backgroundMusic;
}
-(IBAction)stopMus:(id)sender;
@property(nonatomic,retain) AVAudioPlayer *backgroundMusic;
@property (strong, nonatomic) UIWindow *window;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
#import <CoreData/CoreData.h>
#define fName @"data.plist"
#define kNames @"data.plist"
#import <AVFoundation/AVFoundation.h>
#import "AppDelegate.h"

@interface ViewController ()

@end
@implementation ViewController

@synthesize backgroundMusic;
-(IBAction)stopMusic:(id)sender {
   AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
      [appDelegate.backgroundMusic stop];

}

- (void)viewDidLoad
{
      [super viewDidLoad];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    //set the position of the button
    button.frame = CGRectMake(100, 100, 20, 20);
    button.backgroundColor = [UIColor whiteColor];
    [button addTarget:self action:@selector(stopMusic:) forControlEvents:UIControlEventTouchUpInside];

    //add the button to the view
    [self.view addSubview:button]; 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import <CoreData/CoreData.h>
#define kNames @"data.plist"
#import <AVFoundation/AVFoundation.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate>  {
 AVAudioPlayer *backgroundMusic;
} 
```

我需要用按钮停止 AudioPlayer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:22:51.790

首先，添加`UIButton`如下`UIView`内容：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

//set the position of the button
button.frame = CGRectMake(0, 0, 0, 0);

[button addTarget:self action:@selector(yourMethod:) forControlEvents:UIControlEventTouchUpInside];

//add the button to the view
[self.view addSubview:button]; 
```

然后，

```
-(IBAction)yourMethod:(id)sender {
 [backgroundMusic stop];

} 
```

完成按钮后，您可以通过`[button removeFromSuperView];` 我认为类似的方法将其删除：) 请询问您是否对我的回答有疑问。

# ruby - mac下rvm和octopress无法生成gists和图片

> ID：12991489
> 
> 赞同：0
> 
> 时间：2012-10-20T18:36:19.217
> 
> 标签：ruby, rvm, osx-mountain-lion, octopress

由于我安装了[octopress](http://octopress.org) ，因此我无法运行`rake generate`包含图片、代码或其他媒体的帖子。我得到各种各样的错误。

我`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.0.0]`在 Mountain Lion 下使用 rvm。作为包管理器，我使用[MacPorts](http://www.macports.org)。有什么我需要安装的或者我可以做些什么来解决这个问题吗？它变得非常烦人...... :-(

在此先感谢您，[您可以在下面看到日志](http://d.pr/n/Z0Rw)。我无法在stackoverflow上发布它。

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:20:37.687

看起来您用于`clang`编译 ruby​​，这不完全受支持。Fibers 至少存在一个已知错误，根据`clang`版本可能会出现其他问题。

Ruby 应该使用 GNU GCC 编译 - 您可以通过阅读以下输出找到如何获取它的说明：

```
rvm requirements 
```

这也有可能与 OpenSSL 相关，请确保您只安装和使用了它的一个版本，有时使用 RVM 重新安装它可能会有所帮助：

```
rvm pkg install openssl
rvm reinstall 1.9.3 
```

# sorting - 使用 CUDPP/Thrust 进行分段排序

> ID：12991490
> 
> 赞同：1
> 
> 时间：2012-10-20T18:36:19.400
> 
> 标签：sorting, cuda, thrust, cudpp

是否可以在 CUDA 中使用 CUDPP 进行分段排序？通过分段排序，我的意思是对受以下标志保护的数组元素进行排序。

```
A[10,9,8,7,6,5,4,3,2,1]

Flag array[1,0,1,0,0,1,0,0,0,0] 
```

对 A 中连续 1 之间的元素进行排序。
预期输出

```
[9,10,6,7,8,1,2,3,4,5] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T17:33:26.610

您可以在单个排序过程中执行此操作：想法是调整数组中的元素，以便排序仅在“段”内重新定位元素

对于您的示例：

```
A[10,9,8,7,6,5,4,3,2,1]
flag[0,0,1,0,0,1,0,0,0,0] 
```

（我删除了第一个 1，因为它不需要）

首先扫描标志数组：

```
scanned_flag[0,0,1,1,1,2,2,2,2,2] 
```

那么你有很多选项取决于数字类型，例如对于无符号整数，你可以设置最高位来区分“段”。最简单的方法就是将最大元素乘以scanned_flags：

```
A + scanned_flag*10 = [10,9,18,17,16,25,24,23,22,21] 
```

剩下的很简单：对数组进行排序并反转转换。这是两个版本：使用 Arrayfire 和推力。检查您更喜欢哪个。

阵列火：

```
void af_test() {
 int A[] = {10,9,8,7,6,5,4,3,2,1};  
 int S[] = {0, 0,1,0,0,1,0,0,0,0};  
 int n = sizeof(A) / sizeof(int);

 af::array devA(n, A, af::afHost);
 af::array devS(n, S, af::afHost);
 // obtain the max element
 int maxi = af::max< int >(devS);

 // scan the keys
 // keys = 0,0,1,1,1,2,2,2,2,2
 af::array keys = af::accum(devS);

 // compute: A = A + keys * maxi
 // A = 10,9,18,17,16,25,24,23,22,21
 devA = devA + keys * maxi;

 // sort the array
 // A = 9,10,16,17,18,21,22,23,24,25
 devA = af::sort(devA);

 // compute: A = A - keys * maxi
 // A = 9,10,6,7,8,1,2,3,4,5
 devA = devA - keys * maxi;
 // print the results
 print(devA);
} 
```

推力：

```
template<typename T>
struct add_mul : public binary_function<T,T,T>
{
add_mul(const T& _factor) : factor(_factor) {
}
   __host__ __device__ T operator()(const T& a, const T& b) const 
{
    return (a + b * factor);
}
const T factor;
}; 

void thrust_test()
{
  int A[] = {10,9,8,7,6,5,4,3,2,1};  
  int S[] = {0, 0,1,0,0,1,0,0,0,0};  
  int n = sizeof(A) / sizeof(int);
  thrust::host_vector< int > hA(A, A + n), hS(S, S + n);

  thrust::device_vector< int > devA = hA, devS = hS, keys(n);
  // scan the keys 
  thrust::inclusive_scan(devS.begin(), devS.end(), keys.begin());
  // obtain the maximal element
  int maxi = *(thrust::max_element(devA.begin(), devA.end()));
  // compute: A = A + keys * maxi
  thrust::transform(devA.begin(), devA.end(), keys.begin(), devA.begin(), add_mul< int >(maxi)); 
  // sort the array
  thrust::sort(devA.begin(), devA.end());
  // compute: A = A - keys * maxi
  thrust::transform(devA.begin(), devA.end(), keys.begin(), devA.begin(), add_mul< int >(-maxi)); 
  // copy back to the host 
  hA = devA;
  std::cout << "\nSorted array\n";
  thrust::copy(hA.begin(), hA.end(), std::ostream_iterator<int>(std::cout, "\n"));
} 
```

# css - h2中的背景图像不显示

> ID：12991492
> 
> 赞同：1
> 
> 时间：2012-10-20T18:37:11.780
> 
> 标签：css, image, wordpress, background-image

我会将自己归类为初学者，并通过反复试验找到答案。但是我无法解决这个问题。我希望在我的主页上的 h2 文本后面有一张图片。我试过把它放在这里的任何地方，但没有任何东西让它出现。

这是我的网站：[http ://bitsybride.com](http://bitsybride.com)

这是我想要的：http: [//bitsybride.com/Image8.png](http://bitsybride.com/Image8.png)

这是相关的CSS：

```
.smallpost {
overflow:hidden;
width:730px;
padding-bottom:0;}

ul.smallpost li {
width:290px;
height:130px;
margin:0 40px 60px 0;
padding:0px 0px 0px 0px;
position:relative;
float:left;
background: url(images/pink ribbon.png);}

ul.smallpost h2 {
font-size: 12pt;
line-height: 0pt;
margin: 0 0 0px 0;
padding:5px 0px 100px 15px;
letter-spacing: -1px;} 

ul.smallpost li img {
margin:-20px 0 15px -20px;
width:280px;
height:150px;
overflow:hidden; 
    padding: 4px;
margin: 1px 1px 4px 1px;
overflow: hidden;
-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /*-moz-border-radius: 5px;-khtml-    border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;*/
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-o-linear-gradient(#2F2727, #1a82f7);
background:
-moz-linear-gradient(center top , #FFFFFF, #EFEFEF) repeat scroll 0 0 transparent
;
background: -webkit-gradient(linear, left top, left bottom,
from(#fff),
color-stop(0.5, #fff),
to(#EFEFEF)
);
filter: progid: DXImageTransform.Microsoft.Gradient(StartColorStr='#ffffffff', EndColorStr='#EFEFEFEF');
-ms-filter: \"progid: DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff, endColorstr=#EFEFEFEF)";
-o-linear-gradient(top, #dcdcdc, #c6c6c6);
border: 1px solid #FFFFFF;
z-index: 5;} 
```

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:51:17.287

如果您希望您的 h2 有背景图片，请在您的`ul.smallpost h2`

```
background-image: url('/wp-content/uploads/2012/05/bitsy2.png'); 
```

或您的图像在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:08:58.157

在你的 h2 标签中使用 display:inline-block

```
ul.smallpost li {
width:290px;
height:130px;
margin:0 40px 60px 0;
padding:0px 0px 0px 0px;
position:relative;
float:left;
}

ul.smallpost h2 {
font-size: 12pt;
line-height: 0pt;
margin: 0 0 0px 0;
padding:5px 0px 100px 15px;
letter-spacing: -1px;
background: url(images/pink ribbon.png);
display:inline-block;
} 
```

# c# - Visual Studio 2012 和 IVsSingleFileGenerator

> ID：12991497
> 
> 赞同：0
> 
> 时间：2012-10-20T18:37:42.300
> 
> 标签：c#, visual-studio-2012, visual-studio-sdk

我正在将我为 VS2010 SDK 编写的现有扩展移植到 VS2012 SDK，并且似乎有一些涉及 IVsSingleFileGenerator 的更改。

基本上，我正在创建一个 .VSIX：

1.  项目模板
2.  项目模板
3.  一个**自定义工具**（实现 IVsSingleFileGenerator）

**有人为VS2012**做了类似的事情并得到了一些代码示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:54:12.017

找出与 VSSDK 10.0 不同的地方：

*   如果您在单个代码生成器上遵循 VSSDK10 示例，则必须在所有层次结构中标记 ComVisible(true)（参见：[为什么找不到我的 Visual Studio 2010 自定义工具？](https://stackoverflow.com/questions/10098681/why-is-my-visual-studio-2010-custom-tool-not-being-found)）。
*   CodeGeneratorRegistrationAttribute 现在是 Shell 11 的一部分。

# c# - WP 7 多线程，无效的跨线程访问

> ID：12991502
> 
> 赞同：7
> 
> 时间：2012-10-20T18:38:24.540
> 
> 标签：c#, multithreading, silverlight, windows-phone-7

我想警告我的页面传输数据已完成。我创建对象，添加事件处理程序并调用新线程以将异步传输的数据传输到服务器。当数据传输并从服务器应答接收时，我回调我的事件，但抛出异常“无效的跨线程访问”。为什么不运行我的事件处理程序？

```
// My page (PhoneApplicationPage)
public partial class PageStart
{
     private void btn_Send_Click(object sender, RoutedEventArgs e)
     {
          TransmitHolder holder = new TransmitHolder();
          holder.onCompleted += new TransmitHolder.CompleteHandler(onCompleted);
          // transmit async
          new Thread(delegate() { Transmitter(holder).Start(); }).Start();
     }

     private void onCompleted(object sender, byte[] answer)
     {
          //some code
     }
}

public class TransmitHolder
{
     public delegate void CompleteHandler(object sender, byte[] answer);
     public event CompleteHandler onCompleted;

     public void Complete(byte[] answer)
     {
         if (onCompleted != null)
         {
             onCompleted(null, answer); // here throw exception `invalid cross-thread access`
         }
     }
}

public class Transmitter
{
    private TransmitHolder holder;

    public Transmitter(TransmitHolder holder)
    {
         this.holder = holder;
    }

    // send data from server
    public void Start()
    {
         // send data using soket
         NetworkManager nm = new NetworkManager();
         // method Send execute Connect, Send and Recive data from server
         byte[] answer = nm.Send(Encoding.UTF8.GetBytes("hello_word"));
         holder.Complette(answer); // notify, send data completed
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T18:48:58.567

在 Windows Phone 7 平台上，所有的 UI 逻辑都应该在 UI 线程上完成。如果您尝试更改可视化树，或在与专用 UI​​ 线程不同的线程上设置/获取 DependencyObject 的属性（所有 UI 元素都是 DependencyObject(s)），您将收到 Invalid Cross thread 异常。

要在正确的线程上执行 UI 逻辑，请使用适当的调度程序。

```
Deployment.Current.Dispatcher.BeginInvoke(() => { <Put your UI logic here> }); 
```

# java - 带有没有$ .ajax的servlet的jquery进度条

> ID：12991505
> 
> 赞同：1
> 
> 时间：2012-10-20T18:39:22.063
> 
> 标签：java, jquery, servlets, progress-bar, return-value

**html**

```
<body>
    <div id="progressbar"></div>
</body> 
```

**jQuery**

```
$(document).ready(function() {
           $( "#progressbar" ).progressbar({ value: 5 });
        }); 
```

和

**在 NewServlet 中**

```
int percentage=5;
//Code Snippet; 
percentage=25; //at line# 200
//Code Snippet; 
percentage=50; //at line# 1004
//Code Snippet; 
percentage=75; //at line# 5006
//Code Snippet; 
percentage=100; //at line# 7000
//Code Snippet; 
```

当执行特定的代码行并突然更新进度条的值时，如何将这些值（百分比）从 servlet 更新为 jauery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:31:27.243

您可能可以尝试手动清除百分比值并更新 jQuery 进度条插件中的值。

我不确定您使用进度条的确切意图是什么。通常，在用户需要上传文件、执行定时任务等情况下，进度条是很好的。

你可能想看看[这篇文章](https://stackoverflow.com/a/5883497/786796)，我认为这很有见地。

# c++ - 非标准基数的算术

> ID：12991507
> 
> 赞同：0
> 
> 时间：2012-10-20T18:39:39.080
> 
> 标签：c++, c++11, integer-arithmetic

我试图将我的[任意精度整数](http://calccrypto.wikidot.com/programming%3ainteger)类转换为能够使用不只是每个数字 8 位的数字。我偶然发现了一个奇怪的问题：我可以使用`uint16_t` 我的基本数字类型，但不能使用`uint32_t`. 我的代码将返回错误的结果。我用来找出问题所在的示例是`0x1111111111111111 * 0x1111111111111111`，应该是`0x123456789abcdf00fedcba987654321`。但是，我得到了`0x123456789abcdf0fedcba987654321`。

我认为我已经更改了所有硬编码类型，因此更改基本数字类型无关紧要，但显然不是。

以下是相关代码：

```
typedef uint32_t                          digit;            // original code uses uint8_t; uint16_t works too
typedef uint64_t                          double_digit;     // int type to hold overflow values

typedef std::deque <digit>                base;

const digit NEG1 = -1;                    // uint8_t -> 255, uint32_t -> 4294967295
const digit BITS = sizeof(digit) << 3;    // sizeof gives the number of bytes, so multiply that by 8 to get the number of bits
const digit HIGH_BIT = 1 << (BITS - 1);   // uint8_t -> 128

        // left bit shift. sign is maintained
        integer operator<<(uint64_t shift){
            if (!*this || !shift)
                return *this;
            base out = digits;
            for(uint64_t i = 0; i < (shift / BITS); i++)
                out.push_back(0);
            shift %= BITS;
            if (shift){
                out.push_back(0);
                return integer(out, _sign) >> (BITS - shift);
            }
            return integer(out, _sign);
        }

        // right bit shift. sign is maintained
        integer operator>>(uint64_t shift){
            if (shift >= bits())
                return integer(0);
            base out = digits;
            for(uint64_t i = 0; i < (shift / BITS); i++)
                out.pop_back();
            shift %= BITS;
            if (shift){
                base v;
                for(d_size i = out.size() - 1; i != 0; i--)
                    v.push_front(((out[i] >> shift) | (out[i - 1] << (BITS - shift))) & NEG1);
                v.push_front(out[0] >> shift);
                out = v;
            }
            return integer(out, _sign);
        }

        // operator+ calls this
        integer add(integer & lhs, integer & rhs){
            base out;
            base::reverse_iterator i = lhs.digits.rbegin(), j = rhs.digits.rbegin();
            bool carry = false;
            double_digit sum;
            for(; ((i != lhs.digits.rend()) && (j != rhs.digits.rend())); i++, j++){
                sum = *i + *j + carry;
                out.push_front(sum);
                carry = (sum > NEG1);
            }
            for(; i != lhs.digits.rend(); i++){
                sum = *i + carry;
                out.push_front(sum);
                carry = (sum > NEG1);
            }
            for(; j != rhs.digits.rend(); j++){
                sum = *j + carry;
                out.push_front(sum);
                carry = (sum > NEG1);
            }
            if (carry)
                out.push_front(1);
            return integer(out);
        }

        // operator* calls this
        // Long multiplication
        integer long_mult(integer & lhs, integer & rhs){
            unsigned int zeros = 0;
            integer row, out = 0;
            for(base::reverse_iterator i = lhs.digits.rbegin(); i != lhs.digits.rend(); i++){
                row.digits = base(zeros++, 0); // zeros on the right hand side
                digit carry = 0;
                for(base::reverse_iterator j = rhs.digits.rbegin(); j != rhs.digits.rend(); j++){
                    double_digit prod = (double_digit(*i) * double_digit(*j)) + carry;// multiply through
                    row.digits.push_front(prod & NEG1);
                    carry = prod >> BITS;
                }
                if (carry)
                    row.digits.push_front(carry);
                out = add(out, row);
            }
            return out;
        } 
```

是否有一些明显的我错过了可能导致错误计算的东西？我一口气盯着这段代码看了太久。

完整的修改代码在[这里](http://calccrypto.wikidot.com/local--files/home/integer.h)。

**编辑**：我已经在[ideone](http://ideone.com/nbY6VB)上测试了代码，它返回了这个计算的正确值，但我的电脑仍然没有。对此有什么好的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:12:02.993

该问题似乎是由于意外的过度右移所致。你提到你的ideone帖子没有重现这个问题。在测试时，我注意到在您的 ideone 帖子中，数字的类型实际上仍设置为 16 位。当我将其更改为 32 位（以反映 SO 代码片段）并尝试在 gcc 下编译时，我收到了一堆关于过度右移的警告。运行程序会导致无限循环，再加上右移警告以及您在平台上获得不同行为的事实，强烈表明正在发生未定义的行为。

更具体地说，在某些地方，int 类型之间的位大小不匹配（即，您仍有几块代码需要更新）。

麻烦制造者似乎是 setFromZ。这里有 Z 指定的整数类型，以及 base::value_type 指定的整数类型。不能保证两者具有相同的位数，因此当发生位不匹配时，该函数中的位移位和位掩码代码无法正常工作。当 uint32_t 是数字类型时（至少在我的环境中），在您的 ideone 代码中出现的该模板的几个实例会发生不匹配。

编辑：确认根据标准未定义过度右移：参考：[SO Post](https://stackoverflow.com/questions/3394259/weird-behavior-of-right-shift-operator)，请参阅接受的答案，其中引用了标准。

> (C++98 §5.8/1) 声明：如果右操作数为负数，或者*大于或等于* 提升的左操作数的位长度，则行为未定义。

# c++ - 如果子进程崩溃，是否会发出 QProcess::finished？

> ID：12991509
> 
> 赞同：2
> 
> 时间：2012-10-20T18:39:52.697
> 
> 标签：c++, qt, qprocess, qt-signals

文档说，`error()`如果子进程崩溃，将发出信号，但也会`finished()`发出信号，还是仅在成功退出时发出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T18:49:08.677

Yes. And it returns you status, as [docs](http://doc.qt.digia.com/qt/qprocess.html#ExitStatus-enum) state:

```
void QProcess::finished ( int exitCode, QProcess::ExitStatus exitStatus ) [signal]

QProcess::NormalExit    0   The process exited normally.
QProcess::CrashExit 1   The process crashed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:44:24.560

你可以通过测试来发现。编写一个执行 NULL 指针取消引用的小程序（这将保证崩溃）：

```
struct Foo {
    int a;
};

int main()
{
    Foo* foo = 0;
    int d = foo->a;
} 
```

确保您在没有优化的情况下构建，以便取消引用不会被优化。然后在 QProcess 中运行它并检查是否`finished()`正在发出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-03T23:14:34.627

正如其他人所指出的那样，这个问题的答案是“是的”。

这对我来说是个问题，因为如果没有对发出信号的对象的引用，您必须执行以下操作：

```
void on_finished( int exitCode, QProcess::ExitStatus exitStatus )
{
    if ( existStatus == QProcess::CrashExit )
    {
        // We'll handle in on_errorOccured()
        return;
    }

    // ...
}

void on_errorOccured( QProcess::ProcessError error )
{
    // ...
} 
```

作为接受的替代方法，我编写了一个瘦包装类，它连接（仅！）到`QProcess::stateChanged(QProcess::ProcessState newState)`并计算出使用`newState`和调用`QProcess`对象发生的事情：

```
void ProcessWrapper::on_stateChanged(QProcess::ProcessState newState)
{
    switch (newState)
    {
    case QProcess::Starting:
        // No action needed
        break;
    case QProcess::Running:
        emit( started( this ) );
        break;
    case QProcess::NotRunning:
        if ( m_process.exitStatus() != QProcess::NormalExit )
            emit( crashed( this, m_process.error() ) );
        else
            emit( finished( this, m_process.exitCode() ) );
        break;
    }
} 
```

包装器发出的信号有两个属性：

*   进程结束时只发出一个信号，哪个信号告诉您它是如何结束的（正常或异常）。
*   每个信号都包括事情如何进行的代码和指向对象的指针，以便用户可以进一步查询。

# javascript - 如何在不同位置显示验证错误消息？

> ID：12991515
> 
> 赞同：19
> 
> 时间：2012-10-20T18:40:55.577
> 
> 标签：javascript, jquery, validation, knockout.js

我正在使用`knockout.js & knockout.validation`插件。我正在添加示例小提琴

[http://jsfiddle.net/hsnCW/1/](http://jsfiddle.net/hsnCW/1/)

在这个例子中，数组有一个自定义验证来检查重复条目。但我的问题是验证消息。默认情况下，在应用验证的元素之后插入错误消息。但我想在其他地方显示消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-20T18:53:54.337

您可以使用`validationMessagebinding`来显示您的任何属性错误消息：

```
<p data-bind="validationMessage: newItem"></p> 
```

`validationOptions`您可以使用绑定禁用自动插入的验证消息：

```
<span data-bind="validationOptions: { insertMessages: false}">New Item: 
    <input data-bind="value:newItem" /> 
    <button data-bind="click: addItem">Add</button>
</span> 
```

有关更多信息，请参阅文档[验证绑定部分](https://github.com/ericmbarnard/Knockout-Validation/wiki/Validation-Bindings)。

演示[JSFiddle。](http://jsfiddle.net/J2KXP/)

# ios - 在 ios 的不同视图上管理相同的 CollectionView

> ID：12991516
> 
> 赞同：0
> 
> 时间：2012-10-20T18:40:56.590
> 
> 标签：ios, cocoa-touch, viewcontroller, reusability

我在其中一个屏幕上有一个 CollectionView。选择其中一个单元格将转换到另一个视图。在这个新视图的底部，我希望展示相同的集合。

所以我在主屏幕上有一个 ItemsCollectionController - 在 ItemsCollectionController.m

我有一个用于第二个屏幕的 WorkAreaController。在 WorkArea.xib 中，我在屏幕底部添加了一个 CollectionView。我想让 ItemsCollectionController 来管理它。

当 WorkArea viewDidLoad 时，尝试使用 WorkArea.xib 手动实例化 ItemsCollectionController - 什么都没有。

不仅如此，我希望同一个类来处理这两个集合。我什至希望有相同的 ItemsCollectionController 实例来做到这一点。我可以只更改正在运行的实例的视图出口吗？

我看到了这个[看似相似的问题](https://stackoverflow.com/questions/4408701/how-to-reuse-the-same-table-view-in-different-views)，但这不是我想要的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:43:25.167

我找到了方法。假设我有一个控制器 C1 管理一个 CollectionView。现在我想更改为由控制器 C2 管理的不同视图，在该视图上，我仍想显示由 C1 管理的 CollectionView 的内容。

我发现这样做的方法是：

1.  在切换到 C2.view 之前：

    ```
     [C1.myCollectionView removeFromSuperView] 
    ```

这将确保可以重用视图。

2.现在让我们切换到新的控制器及其视图

```
[UIView transitionFromView:C1.view
           toView:C2.view
            ....
             ... 
```

1.  并且要将 C1.myCollectionView 添加到 C2.view 我们需要修改C2的**viewDidLoad** `[self.view addSubView:C1.collectionView]`

2.  现在只需让 collectionView 重新加载

`[C1.collectionView reloadData];`

希望这对某人有帮助

# android - java.io.IOException Android

> ID：12991517
> 
> 赞同：1
> 
> 时间：2012-10-20T18:41:10.840
> 
> 标签：android, inputstream

尝试在 HTC 资源管理器上下载 Android 2.3.5 上的大文件。此时我不断收到异常 java.io.IOException ：

而 ((oneChar = is.read()) != -1)

仅供参考 - InputStream。它抛出 java.io.IOException ：流的意外结束。

它不会一直发生，但足够频繁地发生。我尝试搜索此内容，发现 Android 2.3.3 中显然存在与此相关的错误，但我的问题是，如果存在此类错误，其他人如何能够在 Android 2.3.3 上下载内容？我见过的解决方案是首先将所有数据写入缓冲区，然后将整个内容写入文件，但我也不能这样做，因为文件大小会很大，并且会超过 Android 中的最大堆大小大约 16MB。我也尝试过使用固定缓冲区大小下载相同的文件，甚至该版本也会引发异常。有什么解决办法吗？我真的被困住了。事实上，在谷歌网站上提出了一种解决方法，但即使在我尝试时也失败了。来源：[http ://code.google.com/p/android/issues/detail?id=14562](http://code.google.com/p/android/issues/detail?id=14562)

# iphone - 在 UITabBarController 中设置 UINavigationController 的 UITabBarItem

> ID：12991520
> 
> 赞同：0
> 
> 时间：2012-10-20T18:41:17.713
> 
> 标签：iphone, objective-c, ios

我正在开发一个 iphone 应用程序，该应用程序在每个选项卡中都有一个主视图控制器（UITabBarController）和 UINavigationControllers。问题是我无法更改 TabBarItem 的数据（标题和图像）。

这就是我加载视图控制器的方式：

```
AroundViewController *aroundViewController = [[AroundViewController alloc] init];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:aroundViewController];
[[navController navigationBar] setTintColor:[UIColor grayColor]];

UITabBarController *tabBarController = [[UITabBarController alloc] init];

NSArray *viewControllers = [NSArray arrayWithObjects:navController, nil];
[tabBarController setViewControllers:viewControllers];

[self presentViewController:tabBarController animated:YES completion:nil]; 
```

我正在尝试在 aroundviewcontroller 的初始化中设置 tabbaritem，但我没有成功。我正在阅读，一个解决方案是，在 init 中，

```
[self setTitle:@"whatever"]; 
```

这有效，但我无法更改图像。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:49:08.363

使用视图控制器的 tabBarItem 实例直接访问标签栏项目！

```
[self.tabBarItem ....]

[self.tabBarItem setImage: ...]
[self.tabBarItem setTitle: ...] 
```

编辑：

嗯，然后在您的 init 或 viewWillAppear 方法中尝试以下操作：

```
 UITabBarItem* tabBarItem =  [[UITabBarItem alloc] initWithTitle:@"YourTitle" image:[UIImage imageNamed:@"YourImage.png"] tag:9];
    self.tabBarItem = tabBarItem;
    [tabBarItem release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:16:09.640

在为 UITabBarController 设置 UIViewControllers 之前，您可以这样做：

```
[navController.tabBarItem setImage:[UIImage imageNamed:@"MY-IMAGE"]];
[navController setTitle:@"MY-TITLE"];

NSArray *viewControllers = [NSArray arrayWithObjects:navController, nil];
[tabBarController setViewControllers:viewControllers]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:55:44.420

我找到了解决方案。在 viewWillAppear 我放：

```
[[[self navigationController] tabBarItem] setTitle:@"HELLO"]; 
```

这样可行。

# ruby-on-rails-3 - 在自定义验证之前验证存在

> ID：12991522
> 
> 赞同：4
> 
> 时间：2012-10-20T18:41:25.887
> 
> 标签：ruby-on-rails-3, validation, activerecord, activemodel

```
validates :place_id, :title, :level, :start_at, :end_at, :presence => true
validate :event_takes_place_in_one_day, :event_is_not_in_past

def event_takes_place_in_one_day
    binding.pry
    self.start_at.day == self.end_at
end 
```

砰！错误，当 start_at 或 end_at 为 nil 时。

```
undefined method `to_datetime' for nil:NilClass
-
app/models/meeting.rb:22:in `cover?'
app/models/meeting.rb:22:in `event_is_not_in_past'
app/controllers/meetings_controller.rb:18:in `create' 
```

Afaik 也可以使用自定义验证器来实现这一点，但我认为情况并非如此，因为每个类只有一个验证器，所以我应该为 3 个检查做三个类，不是吗？

附言

应用程序有一个会议模型，具有 start_at 和 end_at DateTime 类型属性，分别表示会议的开始和结束。我需要实现下一个逻辑 start_at < end_at （它在结束之后开始） start_at.day == end_at.day （会议在一天内结束）并且会议只能在当月创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:48:49.667

零支票对您有用吗？

```
def event_takes_place_in_one_day
  #only execute if start_at & end_at is not nil
  unless self.start_at.nil? || self.end_at.nil?
    binding.pry
    self.start_at.day == self.end_at 
  end
end 
```

# java - 用于高性能服务器的 Java NIO 或 Java IO

> ID：12991525
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:41:54.873
> 
> 标签：java, sockets, io, nio

对于我正在开发的服务器，我一直在努力在 java NIO 或旧的 java i/o 阻塞套接字之间进行选择。

我在想 java NIO 会更好，因为它会有非常多的客户端，并且客户端将保持连接，以便服务器可以在可用时推送数据。

所以这让我认为 java 阻塞 i/o 将是矫枉过正的，因为线程的数量会很高。

对于这种情况，您有什么看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:45:43.563

如果预计将单个消息推送到客户端需要很长时间，您只会遇到阻塞 I/O 的问题。仅仅让客户端连接并不需要每个客户端一个线程。事实上，我现在正在编写这样一个软件。您只需要与在特定时间点进行的并发消息推送一样多的线程。这通常不会很高。考虑推送消息所需的时间与消息到达的等待时间之比。将并发客户端的数量乘以这个数字，你就得到了平均活动线程数。

您将维护一组所有打开的输出流，每个客户端一个。他们将只是坐在内存中，直到需要推送给客户端的消息到达。那时，您将需要一个线程来处理该消息。如果在推送消息时，您想要处理另一个事件并将消息推送到另一个客户端，您将需要第二个线程，但是一旦第一次推送完成，该线程就会返回到可用池中线程。

我还可以建议一个演员模型实现来协调您的消息推送。演员模型是这个问题的完全匹配。

# mercurial - Mercurial 服务器文件与客户端文件不同

> ID：12991526
> 
> 赞同：0
> 
> 时间：2012-10-12T03:43:00.330
> 
> 标签：mercurial

首先，总的来说，我对 Mercurial 和版本控制还是很陌生。

我们在这里设置了 2 个开发人员和一个服务器。我们今天注意到我昨天推送到服务器的一些更改的问题，其他开发人员在拉取它时没有这些更改。最终，我决定在服务器上检查相关文件的状态，令人惊讶的是，该文件甚至不存在于服务器的存储库中。奇怪的是，其他开发人员在某个时候创建​​了这个文件并将其推送到服务器，我通过拉取它接收了它，那么它肯定一定是在某个时候在服务器上吗？在我们机器的两台机器上的 tortoise hg 文件旁边都有一个勾号，因此它是存储库的一部分并已提交。

似乎文件不在服务器上可能是我对文件所做的更改没有到达其他开发人员的原因。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:48:22.610

TortoiseHg 中的勾号**并不**表示文件已提交。当您查看*工作目录*时，会为文件显示一个复选框，复选框中的勾号表示当您单击“提交”按钮时，文件将包含在提交中。

默认情况下，存储库中已经存在的文件（或已通过`hg add`、`hg mv`、`hg cp`等暂存）将被勾选，但尚未添加到存储库的文件将不会被勾选。如果你勾选了一个尚未添加的文件，那么 TortoiseHg 将在提交之前添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:29:01.167

如果没有日志，我只会说“如果您的推送没有错误地执行，那是不可能的”。

如果您推送错误并稍后**才**拉出- 您必须在您的存储库中有匿名分支和额外的头才能进行分歧的更改

# ruby-on-rails - 杂种导轨的调度程序错误

> ID：12991530
> 
> 赞同：1
> 
> 时间：2012-10-20T18:42:11.313
> 
> 标签：ruby-on-rails

我正在使用 Ruby 1.9.3、Rails 3.2.3 和 mongrel。我做了脚手架来创建项目模型。然后我打开项目的索引页，它显示空白页。当我看到日志时，会出现一些调度程序错误，如下所示：

```
** Signals ready.  TERM => stop.  USR2 => restart.  INT => stop (no restart).
** Rails signals registered.  HUP => reload (without restart).  It might not work well.
** Mongrel 1.2.0.pre2 available at 0.0.0.0:3000
** Use CTRL-C to stop.
2012-10-20 23:57:52 +0530: Error calling Dispatcher.dispatch #<NameError: uninitialized constant ActionController::CgiRequest>
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:76:in `block in process'
<internal:prelude>:10:in `synchronize'
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:74:in `process'
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:165:in `block in process_client'
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164:in `process_client'
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:291:in `block (2 levels) in run'
2012-10-20 23:58:10 +0530: Error calling Dispatcher.dispatch #<NameError: uninitialized constant ActionController::CgiRequest>
/home/username/.rvm/gems/ruby-1.9.3-p286/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:76:in `block in process' 
```

# android - IntelliJ - Android - 参考外部目录

> ID：12991533
> 
> 赞同：1
> 
> 时间：2012-10-20T18:42:42.960
> 
> 标签：android, intellij-idea, directory

我在 IntelliJ 中有几个 Android 项目，它们都需要引用同一个目录。我不知道如何添加该引用。

例如：

```
Project A
   |
   ---> Folder A
           |
           ---> Shared Folder
   ---> Folder X

Project B
   |
   ---> Folder B
           |
           ---> Shared Folder
   ---> Folder Y 
```

我不知道如何添加对“共享文件夹”的引用。它不是源文件夹......只是一个包含图像的文件夹。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T14:48:49.677

将 libgdx 与 Idea 一起使用时，我遇到了同样的问题。我想在其他非 android 项目之间共享 android 项目中 assets 文件夹的内容。

唯一对我有用的是在项目 B 中创建指向项目 A 的子文件夹的符号链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:16:16.710

在 IntelliJ IDEA 中，每个模块只能将一个文件夹配置为**assets**文件夹。

一种解决方法可能是使用多个模块，其中其他模块将具有其他资产文件夹并将配置为**Is Library Project**。您的主模块[可以依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)于具有自己资产的其他模块。

# android - 在全屏模式下，平板电脑上的状态栏 (SYSTEM_UI_FLAG_LOW_PROFILE) 反复变暗？

> ID：12991535
> 
> 赞同：6
> 
> 时间：2012-10-20T18:42:59.833
> 
> 标签：android, user-interface, tablet, statusbar

我知道如何在 Android 平板电脑上调暗状态栏。我使用该代码执行此操作：

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

它工作正常，但只有一次。当我触摸状态栏时，它会激活，然后当我回到应用程序的活动中时，状态栏仍然被激活（使用图标而不是点）。我试图登录 onResume 调用，但它没有被调用，所以我再次搜索并找到了另一个解决方案 - 使用处理程序更改状态栏的可见性：

```
getWindow().getDecorView().setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {
    @Override
    public void onSystemUiVisibilityChange(int visibility) {
        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
    }
}); 
```

它有时会起作用，但经过几次尝试后它就会崩溃。

我需要这个用于游戏 - 理论上我可以尝试在每次触摸后或每次在主循环中调用它，但这似乎是个坏主意（另外它必须从特定线程调用 -*只有创建视图层次结构的原始线程才能触摸它的观点。*）。

**我的问题是：实现状态栏自动变暗的最佳方法是什么？**或者，在我的情况下，任何方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:54:28.550

一个解决方案是在你的根视图上有一个 View.OnSystemUiVisibilityChangeListener 。

当事件触发时，您必须等待一段时间才能再次使它们变暗。计时器将是合适的。

```
private class MySystemUiVisibilityChangeListener implements View.OnSystemUiVisibilityChangeListener {

    @Override
    public void onSystemUiVisibilityChange(int visibility) {
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                MyActivity.this.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        mRootView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);                           
                    }
                });
            }
        }, 1000);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:24:16.493

我也遇到了这个问题（但对于隐藏导航标志），似乎谷歌本身就禁用了不断隐藏/调暗系统栏的能力。我同意你的观点，不断调用该方法可能会在线程上失败或导致性能问题，尤其是考虑到移动设备上发生了如此多的 ontouch 事件这一事实。

最终，我认为没有解决方案，除非用户将他们的设备植根以永久删除系统栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T15:33:10.907

我稍微改变了 Karanlos 的回答：

```
Timer timer = new Timer();
TimerTask task = new TimerTask() {
@Override
public void run() {
    AudioRecordTest.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            if (ivIndicator.getVisibility() == View.VISIBLE)
                ivIndicator.setVisibility(View.INVISIBLE);
            else if (ivIndicator.getVisibility() == View.INVISIBLE)
                ivIndicator.setVisibility(View.VISIBLE);
            }
        });
    }
};

timer.scheduleAtFixedRate(task, 0, 500); 
```

你不需要创建一个新类或实现任何东西。只需`TimerTask`按照他的答案制作一个并安排它使用`scheduleAtFixedRate(task, delay, period)`，此方法将以毫秒为单位运行`TimerTask`一次`period`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T09:04:54.453

不确定这是否在 2012 年可用，但您现在可以使用活动的`onWindowFocusChanged()`回调：

```
override fun onWindowFocusChanged(hasFocus: Boolean) {
    super.onWindowFocusChanged(hasFocus)
    if (hasFocus) window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LOW_PROFILE
} 
```

# c# - 在 WPF C# 应用程序中使用 EmguCV 从 Kinect 处理帧时 UI 冻结

> ID：12991537
> 
> 赞同：1
> 
> 时间：2012-10-20T18:43:13.297
> 
> 标签：c#, wpf, kinect, emgucv, kinect-sdk

我正在从事一个项目，该项目涉及从 Kinect 相机的颜色和深度帧中提取特征。我面临的问题是，每当我尝试显示 2 个图像时，UI 都会挂起。当我尝试调试时，depthFrame 和 colorFrame 为空。如果只启用颜色流，那么 colorImage 和 featureImage1 都会正确显示，如果我只启用深度流，它应该可以正常工作。但是当我同时启用它们时，用户界面就会挂起。我不知道是什么导致了这个问题。我的 Kinect 应用程序有以下代码。这个问题的原因是什么，我该如何解决？配置：Windows 8 Pro 64bit，2Ghz Core2Duo，VisualStudio 2012 Ultimate，EmguCV 2.4.0。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using Emgu.CV;
using Emgu.CV.WPF;
using Emgu.CV.Structure;
using Emgu.Util;
namespace features
{
public partial class MainWindow : Window
{  
    public MainWindow()
    {
        InitializeComponent();
    }
    private Image<Bgra, Byte> cvColorImage;
    private Image<Gray, Int16> cvDepthImage;
    private int colorWidth = 640;
    private int colorHeight = 480;
    private int depthWidth = 640;
    private int depthHeight = 480;
    private static readonly int Bgr32BytesPerPixel = (PixelFormats.Bgr32.BitsPerPixel + 7) / 8;
    private byte[] colorPixels;
    private byte[] depthPixels;
    private short[] rawDepthData;
    private bool first = true;
    private bool firstDepth = true;
    Image<Bgra, byte> image2;
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        kinectSensorChooser.KinectSensorChanged += new DependencyPropertyChangedEventHandler(kinectSensorChooser_KinectSensorChanged);
    }
    void kinectSensorChooser_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        KinectSensor oldSensor = (KinectSensor)e.OldValue;
        KinectStop(oldSensor);
        KinectSensor _sensor = (KinectSensor)e.NewValue;
        _sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
        _sensor.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);
        _sensor.DepthFrameReady += new EventHandler<DepthImageFrameReadyEventArgs>(_sensor_DepthFrameReady);
        _sensor.ColorFrameReady += new EventHandler<ColorImageFrameReadyEventArgs>(_sensor_ColorFrameReady);
        _sensor.DepthStream.FrameHeight);
        try
        {
            _sensor.Start();
        }
        catch
        {
            kinectSensorChooser.AppConflictOccurred();
        }
    }
    void KinectStop(KinectSensor sensor)
    {
        if (sensor != null)
        {
            sensor.Stop();
        }
    }

    private void Window_Closed(object sender, EventArgs e)
    {
        KinectStop(kinectSensorChooser.Kinect);
    }

    void _sensor_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame == null) return;
            if (first)
            {
                this.colorPixels = new Byte[colorFrame.PixelDataLength];
                first = false;
            }
            colorFrame.CopyPixelDataTo(this.colorPixels); //raw data in bgrx format
            processColor();
        }
    }
    void _sensor_DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
    {
        using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
        {
            if (depthFrame == null) return;
            if (firstDepth)
            {
                this.rawDepthData = new short[depthFrame.PixelDataLength];
                firstDepth = false;
            }
            depthFrame.CopyPixelDataTo(rawDepthData);
            processDepth();
        }
    }
    private void processColor(){...}
    private void processDepth(){...}
}
} 
```

processDepth 函数如下。我只是从 RAW 深度数据制作图像。

```
private void processDepth() {
    GCHandle pinnedArray = GCHandle.Alloc(this.rawDepthData, GCHandleType.Pinned);
    IntPtr pointer = pinnedArray.AddrOfPinnedObject();
    cvDepthImage = new Image<Gray, Int16>(depthWidth, depthHeight, depthWidth << 1, pointer);
    pinnedArray.Free();
    depthImage.Source = BitmapSourceConvert.ToBitmapSource(cvDepthImage.Not().Bitmap);
} 
```

processColor 函数如下。这里只是为了它，我试图显示克隆的图像而不是提取特征，只是为了检查滞后。当两个流都启用（颜色和深度）时，以下函数会正确显示 colorImage，但是一旦我取消注释注释行，UI 就会挂起。

```
private void processColor() {
    GCHandle handle = GCHandle.Alloc(this.colorPixels, GCHandleType.Pinned);
    Bitmap image = new Bitmap(colorWidth, colorHeight, colorWidth<<2, System.Drawing.Imaging.PixelFormat.Format32bppRgb, handle.AddrOfPinnedObject());
    handle.Free();
    cvColorImage = new Image<Bgra, byte>(image);
    image.Dispose();
    BitmapSource src = BitmapSourceConvert.ToBitmapSource(cvColorImage.Bitmap);
    colorImage.Source = src;
    //image2 = new Image<Bgra, byte>(cvColorImage.ToBitmap()); //uncomment and it hangs
    //featureImage1.Source = BitmapSourceConvert.ToBitmapSource(image2.Bitmap); //uncomment and it hangs
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:06:57.197

我看到代码在事件处理程序中做了很多工作。我几乎可以肯定在 GUI 线程中调用了处理程序。我建议您将代码提取到后台线程例程中。
不要忘记更新表单的控件（`depthImage`和`controlImage`）应该使用`BeginInvoke`父表单的方法来完成，

# php - 从评估的 php 代码返回字符串/int？

> ID：12991542
> 
> 赞同：0
> 
> 时间：2012-10-20T18:43:32.177
> 
> 标签：php, vbulletin

这让我很烦。理论上它应该很容易，但我并不生活在理论上。

基本上，我可以选择设置自定义算法来制作字符串或 int 的“代码”。

这是用户生成的，然后我称之为。

我尝试使用以下代码执行它：

```
$code = eval('return($custalg);'); 
```

但这会返回输入的实际算法，而不是它会产生的值。

所以我的问题是，我将如何设法将 $custalg 中的字符串作为 php 执行，然后将结果保存到变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:46:06.667

`'`看起来您不知道 PHP 中单引号和双引号`"`字符串之间的区别。你应该使用：

```
$code = eval("return($custalg);"); 
```

如果你想`$custalog`扩大：

> 双引号字符串最重要的特性是变量名将被扩展。有关详细信息，请参阅字符串解析。

[在 docs 中查看更多信息](http://www.php.net/manual/en/language.types.string.php)。

因此，基本上正确的语法取决于`$custalg`分配的内容和位置。在你的情况下，我猜你`$custalg`是在主代码中分配的，所以你不想替换。然后使用这样的代码：

```
$code = eval("return \$custalg;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:47:07.260

您可以使用[PHP 输出控制函数](http://www.php.net/manual/en/ref.outcontrol.php)获得回显输出：

```
ob_start();
eval("echo $custalg;");
$tmp = ob_get_contents();
ob_end_clean();
$evalOutput = $tmp; 
```

或者您只需将返回值分配给全局变量。

# c++ - 如何在 C++ 中清除输入缓冲区

> ID：12991545
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:44:05.070
> 
> 标签：c++, buffer

我需要从输入中获取一些行。这些行可能包含空格。我写了代码：

```
string s;
    for (i = 0; i < n; ++i){
    getline(cin, s); //after this i have '\n' in buffer, and it refers to TRASH AND SODOM((
} 
```

这不起作用；如何清除缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:57:34.060

`std::cin.ignore(INT_MAX)`和`std::cin::clear()`。我认为简单得多？

# tinymce - 如何使 TinyMCE 响应式

> ID：12991548
> 
> 赞同：20
> 
> 时间：2012-10-20T18:44:29.643
> 
> 标签：tinymce, responsive-design

我正在使用基础框架制作一个响应式站点，并且 TinyMCE 在缩小页面时会破坏格式（它不是响应式的）。如何让 TinyMCE 响应？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T16:10:23.830

TinyMCE 编辑器可以通过使用 css 媒体查询做出响应。`table.mceLayout`只需添加设置宽度属性和 tinyMCE 文本区域的 css 规则。您将需要使用这些 css 规则来强制执行`!important`，否则它们会被覆盖。

例如，我使用与此类似的 css：

```
/* on mobile browsers, I set a width of 100% */
table.mceLayout, textarea.tinyMCE {
    width: 100% !important;
}

/* on large screens, I use a different layout, so 600px are sufficient */
@media only screen and (min-width: 600px) {
    table.mceLayout, textarea.richEditor {
       width: 600px !important;
    }
} 
```

看到这个jsfiddle：http: [//jsfiddle.net/johannesjh/384uf/](http://jsfiddle.net/johannesjh/384uf/)

注意：您可能希望使用不同的媒体查询或 css 类来使用“基础框架”的响应式网格。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-23T14:41:04.487

有一种方法可以让工具栏包裹在较小的屏幕上。

```
/* make the toolbar wrap */
.mceToolbar td {
    display:table-row;
    float: left;
}
.mceToolbar td:nth-of-type(11){
    clear: left;
} 
```

我制作了 Johannes 发布的 fiddle 的一个分支，其中包括上述规则：

[http://jsfiddle.net/joshfeck/gMVSE/](http://jsfiddle.net/joshfeck/gMVSE/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-25T05:32:06.587

使工具栏响应最新版本的 TinyMCE：

```
.tox-toolbar {
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
}
.tox-toolbar__group {
    flex-wrap: nowrap !important;
} 
```

这将水平滚动条添加到移动设备上的工具栏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-07T09:05:53.267

TinyMCE 5.1 发布时采用了新的移动响应式设计。

为确保它按预期运行，您需要将以下代码添加到使用 TinyMCE 的页面的头部。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

更多信息在这里：[https ://www.tiny.cloud/blog/the-future-of-work-is-mobile-and-tiny-is-ready-for-it](https://www.tiny.cloud/blog/the-future-of-work-is-mobile-and-tiny-is-ready-for-it)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-31T04:16:06.033

我使用的是 TinyMCE 版本 4，有一个名为 autoresize 的插件。它使编辑器响应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-27T11:21:03.173

这是我在网站上用来使编辑器调整大小和工具栏随页面大小移动的东西：

```
.mceEditor table {
max-width:none; /* Bug in computation of fullscreen */
}

.mceEditor table.mceLayout {
width:100% !important;
height:auto !important;
} 

table.mceToolbar { float:left; }
body .mceToolbar div {
white-space:normal;
} 
```

使用小工具栏，它们会随着编辑器宽度的变化而正确布局。“theme_advanced_resizing”应设置为“false”。此外，还需要做更多工作才能使其适用于全屏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-19T14:37:54.870

从 TINYMCE_DEFAULT_CONFIG 中删除宽度和高度。然后正常应用您的样式。

# php - 在 CodeIgniter 中避免使用 _model 后缀

> ID：12991550
> 
> 赞同：0
> 
> 时间：2012-10-20T18:44:41.063
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-url

如果你和我一样，你认为 CodeIgniter 很不错。您可能也讨厌每次从模型加载或调用方法或属性时都键入 _model，因为它既丑陋又耗时。

几个小时以来，我一直在寻找解决方案，但没有运气 - 所以我整理了一个快速解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:15:51.623

查看[加载器类文档](http://codeigniter.com/user_guide/libraries/loader.html)。

假设您有一个名为 page_model 的类，您通常会像这样加载和使用它：

```
$this->load->model('page_model'); 
$this->page_model->function();` 
```

如果你想避免每次都输入 _model ，你可以这样做：

```
$this->load->model('page_model', 'page');    
$this->page->function(); 
```

当我第一次开始使用 CodeIgniter 时，我总是这样做。现在在使用 CI 几年和一些网站之后，我对这个决定感到后悔。

查看代码时更难判断发生了什么。将 _model 作为调用模型函数的代码的一部分可以消除任何歧义。例如，在上面的函数调用中，页面是库还是模型？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:44:41.063

这是因为 CodeIgniter 不支持命名空间。尽管CI[中命名空间支持的讨论](http://codeigniter.com/forums/viewthread/180034/)已经有一段时间了，但在股票代码库中的支持仍然即将到来。

解决方案？而是为您的控制器添加前缀！在典型用法中，您不太可能需要在每个文件中多次键入控制器的名称。

**首先编辑 application/config/routes 并在所有其他路由之后**添加以下行：

 **```
$route['(:any)'] = "c_$1"; 
```

使用此规则，您可以将 URI 的第一段路由到带有您的前缀的匹配控制器。以便：

```
http://www.domain.com/fishsticks 
```

映射到以下控制器：

```
c_fishsticks 
```

接下来，使用此前缀重命名控制器文件，并更改内部的类名以匹配。

而已！现在您可以相对自由地命名您的模型。您可以在闲暇时重命名模型，但不要忘记您需要更改每个模型的**文件名**、每个模型的**类名**以及对每个模型的所有**引用**。这很容易成为最耗时的步骤，但从好的方面来说，您不必一次完成所有操作。**

# twitter - Twitter RSS API 的替代品？

> ID：12991567
> 
> 赞同：6
> 
> 时间：2012-10-20T18:47:13.577
> 
> 标签：twitter, google-apps-script

我目前正在使用 Twitter 的 RSS API（[示例](http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=twitter)）来检索人们的应用程序推文。但是，一旦他们的 API 1.1 版发布，我将无法再这样做了。我可以为此使用什么简单的替代品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T15:48:16.733

不幸的是，答案是：“没有。”

Twitter 继续锁定他们的平台，就像他们在切换到 OAuth 后所做的那样。如果您想向 Twitter 添加内容*，*您可以轻松地做到这一点。如果您想*从*Twitter 中获取内容，那么您必须符合 Twitter 的要求。

*RSS 是一种从*Twitter中获取内容的简单方法，因此他们将其扼杀了。他们会告诉你它并没有真正使用过，但这是一大堆公牛，他们知道，但听起来不错，大多数人会简单地接受它。

在 2013 年 3 月之前，您可以使用一种解决方法：

[https://api.twitter.com/1/statuses/user_timeline/UserName.rss](https://api.twitter.com/1/statuses/user_timeline/UserName.rss)

将“用户名”替换为您想要的实际 Twitter 用户名。

但是在 2013 年 3 月/4 月的某个时间之后，这将停止工作，您将不得不使用 OAuth 和 json 来解析 Twitter 提要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-22T21:14:18.850

使用[Twitter RSS - 来自 github 的 Google Apps 脚本](https://github.com/MitchellMcKenna/twitter-rss-google-apps-script)将 Twitter API 1.1 转换为 RSS。使用此选项，您可以获得搜索结果、用户的时间线、用户的收藏夹甚至 Twitter 列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-20T12:01:10.240

我已经将两个 mit 许可的 php 脚本和指令放在一起，以便您可以获取和缓存 Twitter 用户时间线作为 RSS..

最重要的是缓存推文，因为您每 15 分钟只能调用 API 15 次。

看看 twitterrss.net

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-26T20:09:32.703

我一直在寻找这个问题的答案，基本上是因为我想为 IFTTT 中的 Twitter 触发器提供一个替代品。当 IFTTT 删除它们时，我们可以使用 Twitter 的 RSS 源。但是现在，随着他们的 API v1 退役，您必须对任何请求进行身份验证，并且它们不再关闭 RSS 提要。很遗憾，因为它为许多新手开发者关闭了大门。

我绝对建议在上面的答案中查看 twitter-rss.com，但您可能想查看我提出的解决方案。它被称为Tools，它几乎准备好了。

Twools 最初是作为从 Twitter 获取 RSS 提要的一种方式。Twitter 于 2013 年 6 月停用了其 API 的第 1 版以及停用的 RSS 提要。除了无法访问 RSS 提要之外，[您还需要经过身份验证才能使用 API](https://dev.twitter.com/blog/changes-coming-to-twitter-api)，这提高了 Twitter 用户和开发人员的门槛。我的目的是让您尽可能轻松地安装它，但是您确实需要在自己的网站上安装它（需要 PHP）。这只是编辑文件中的几行（使用您的 Twitter 应用程序详细信息）并上传到您的网站的情况。Twools 提供了许多来自 Twitter API 的 RSS 提要：

*   您的家庭时间表
*   用户时间线（您的或其他用户的）
*   你的提及
*   你的最爱
*   列出时间线（来自您拥有的列表）
*   收到的直接消息（默认禁用）
*   已发送私信（默认禁用）
*   推特搜索
*   新的关注者
*   新朋友

![在此处输入图像描述](../Images/cbe0e1f8e15d9f2cd7e8b00781170d6c.png)

您可以通过仅输出包含某些关键字、主题标签或屏幕名称的推文，甚至通过用于发送推文的应用程序来过滤来自 Twitter API 的结果。以及您可以根据用户（当前他们的位置和语言）进行过滤。最后，您可以通过删除 URL、屏幕名称、主题标签等来修改 RSS 提要中输出的数据，或与其他文件夹共享您的食谱。除了 RSS 提要生成器，Twools 还具有基本的直接消息垃圾邮件过滤器（实验性使用风险自负！）和简单的社交媒体管理工具（基本上是 RSS 过滤器的 HTML 版本）。您还可以在状态页面上关注您的 API 使用情况。

使用 Twools 和您的应用程序，您可以

*   当您提及特定主题标签时您的推文
*   你的推特最爱：
*   从某个国家或地区获得新的关注者
*   当有人在英国的推文中负面提及星巴克时获取推文
*   当有人向您网站上的文章发推文时获取推文

有关详细信息，请参阅[http://tools.it/](http://twools.it/)

# java - O（1）中values.contains（object）的高效java映射？

> ID：12991569
> 
> 赞同：1
> 
> 时间：2012-10-20T18:47:22.993
> 
> 标签：java, performance, map

我最近开始编写一个用于建模图的工具（节点和边，都由对象表示，而不是邻接矩阵或简单的数字），以便在研究生院旁边的软件开发中获得一些实践。我希望一个节点知道它的邻居和它所发生的边缘。一个明显的方法是使用 HashSet 和 HashSet。然而，我想做的是有一个方法

```
Node_A.getEdge(Node B) 
```

在 O(1) 中返回节点 A 和 B 之间的边。我正在考虑通过使用一个 HashMap 替换上面提到的两个 HashSet 来做到这一点，该 HashMap 将邻居映射到连接节点与其邻居的边。例如，调用

```
Node_A.hashmap.get(B) 
```

应该返回连接 A 和 B 的边缘。我的问题是是否有办法

```
HashMap.keySet().contains(Node A);
HashMap.values().contains(Edge e); 
```

两者都在 O(1) 中工作？如果标准库不是这种情况，是否有实现会给我恒定的时间来添加、删除、包含、keySet() 和 values() 的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:59:20.073

尽量不要过度思考这一点。例如，您说您在 A 和 B 之间获得优势`Node_A.getEdge(Node B)`。但通常它是**A->B**信息被认为**是**边缘。（所以你需要你应该检索的信息。）

你说你想要 O(1)，可以理解，显然存储邻接矩阵只会给你 O(n)，所以你不能使用它；*但是，在每个节点对象中存储相邻节点列表*的第二个最明显的选择已经为您提供了您想要的。（注意：这与拥有一个会给你 O(n) 的全局邻接列表不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:00:02.370

正如 AmitD 所说，HashSet 和 HashMap 对于 contains、get 和 put 已经有了固定的时间。如果您`HashMap.valueSet().contains(Edge e)`可以尝试查看 Google Guava 库中的[HashBiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html)。

# linq - Linq 对 DB 上下文的怀疑

> ID：12991571
> 
> 赞同：1
> 
> 时间：2012-10-20T18:47:29.847
> 
> 标签：linq, entity-framework, entity-framework-4.1, entity-relationship

嗨，我有一个问题困扰了我好几天。我有我的 SQL 服务器数据库和我的 C# 应用程序。在数据库中，我有不同的表，让我向您展示一个简单的前表：人际关系城市

业务规则：这个人来自一个城市，所以这个人有IdCity 一个人与其他人有关系，关于这种关系，您需要保存开始日期。

在其他项目中，我已经做过类似的事情，但在这个项目中，这对我不起作用。

当我用 LinQ 检索到这个人的信息时，城市没有来，当我尝试“person.city.description”时出现错误，例如。我尝试在 linq 查询中使用 Include("City") ，但它不起作用。除此之外，我不知道如何管理对人与人关系的循环引用。

一件重要的事情，我认为这可能是问题所在，我重命名了 DataModel 中的所有表，例如，数据库中的表称为 Prd_City，所以我在 c# 项目中更改了 City 的名称和实体集名称. 所以在包含我必须使用真实的表名，在其他情况下查询失败，但如果我使用真实的名称没有任何反应。

```
using (var context = new MyContext())
{
   List<Person> oPeople = (from p in context.Person.Include("Prd_City")
                           select p).ToList();
   return oPeople ;
} 
```

欢迎任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:02:59.870

“它没有用”从来都不是你问题的一个很好的描述。但是从你的问题的其余部分我可以推断出它`Person`有一个名为“Prd_City”的导航属性，而你期望它是“City”。问题是：您重命名了实体，但没有重命名实体中的导航属性。

我的建议（对于它的价值）：您的工作似乎是数据库优先。如果可以，请更改为代码优先并手动将 POCO 类映射到它们的表名，并将属性映射到它们的数据库列。这可能是大量的工作（取决于您的数据模型的大小），但之后您将永远不会冒 EF “取消重命名”您的实体的风险。此外，`DbContext`API 比`ObjectContext`. 目前，它是首选的 EF API。

# java - 如何在销售人员计划中以最大销售额返回人员 - JAVA [PT。2]

> ID：12991574
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:47:50.237
> 
> 标签：java

对不起，如果我打扰了。但我被困在我的硬件问题的另一部分。我现在的任务不是让销售人员 0，而是从 1 开始销售人员。我试图通过将字符串 i 解析为整数并加 1 来解决这个问题。似乎它会起作用。但是，由于某种原因，min 的计算不正确。它保持在 0。我尝试单步执行代码并查看原因，但我看不到它。

```
import java.util.Scanner;
public class Cray {
public static void main(String[] args){

    final int SALESPEOPLE = 5;
    int[] sales = new int[SALESPEOPLE];
    int sum, randomValue, numGreater = 0;
    int max = sales[0];
    int min = sales[0];
    int maxperson = 0;
    int minperson = 0;

    Scanner scan = new Scanner(System.in);
    for (int i=0; i<sales.length; i++)
        {
        //To attempt print out the information of salesperson 0 and salesperson 1, I returned the integer value of i and added one.
        System.out.print("Enter sales for salesperson " + Integer.valueOf(i+1) + ": ");
        sales[i] = scan.nextInt();

        //max if statemnent works fine and is correct
        if(sales[i] > max){
            max= sales[i];
            maxperson = i;
        }
        //For some reason max is calculating but not min. 
        if(sales[i] < min){
            min = sales [i];
            minperson= i;
        }

        }

    System.out.println("\nSalesperson   Sales");
    System.out.println("--------------------");
    sum = 0;
    for (int i=0; i<sales.length; i++)
        {
        System.out.println("     " + Integer.valueOf(i+1) + "         " + sales[i]);
        sum += sales[i];
        }

    System.out.println("\nTotal sales: " + sum);
    System.out.println("Average sales: " + sum/5);
    System.out.println();
    System.out.println("Salesperson " + Integer.valueOf(maxperson+1) + " had the most sales with " + max );
    System.out.println("Salesperson " + Integer.valueOf(minperson+1) + " had the least sales with " + min);
    System.out.println();
    System.out.println("Enter any value to compare to the sales team: ");
    randomValue = scan.nextInt();
    System.out.println();
    for(int r=0; r < sales.length; r++){
        if(sales[r] > randomValue){
            numGreater++;
            System.out.println("Salesperson " + Integer.valueOf(r+1) + " exceeded that amount with " + sales[r]);
        }

    }
    System.out.println();
    System.out.println("In total, " + numGreater + " people exceeded that value");

      }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:53:57.563

The problem is that the `min` is never set as all positive sales will be > 0

You should initialise `min` as a large value so that a positive sales figure *can* be less then the minimum value specified in your `if` statement:

```
if (sales[i] < min) { 
```

You could use:

```
int min = Integer.MAX_VALUE; 
```

# c++ - 在静态库和 DLL 中使用静态成员 - 成员值正在重置

> ID：12991581
> 
> 赞同：4
> 
> 时间：2012-10-20T18:48:49.190
> 
> 标签：c++, dll, static-libraries, static-members, dllexport

我有一个包含 3 个项目的解决方案：

*   Lib1（一个静态库）
*   Dll1（一个动态库）
*   App1（一个空白的 Windows Store 应用程序，可以是任何应用程序类型）

## Lib1 包含以下内容：

**导出.h**

```
#pragma once

#ifdef DLL_EXPORT
    #define EXPORT __declspec(dllexport)
#else
    #define EXPORT __declspec(dllimport)
#endif 
```

**库1.h**

```
#pragma once
#include "Export.h"

class Member { };

class EXPORT Base {
public:
    static Member* GetStaticMember();
    virtual void SetMember(Member* member) = 0;

protected:
    static Member* m_member;
};

class Worker {
public:
    void DoSomething();
}; 
```

**库1.cpp**

```
#include "pch.h"
#include "Lib1.h"

Member* Base::m_member;

Member* Base::GetStaticMember() {
    return m_member;
}

void Worker::DoSomething() {
    Member* test = Base::GetStaticMember(); // RETURNS 0
} 
```

## dll1包含以下内容

**DLL1.h**

```
#pragma once
#include "Lib1.h"
#include "Export.h"

class EXPORT ChildA : public Base {
public:
    virtual void SetMember(Member* member) override;
}; 
```

**dll1.cpp**

```
#include "pch.h"
#include "Dll1.h"

void ChildA::SetMember(Member* member) {
    Base::m_member = member;

    Member* test = Base::GetStaticMember(); // RETURNS CORRECT ADDRESS
} 
```

## App1 包含以下内容

```
Member* member = new Member();
ChildA* childa = new ChildA();
childa->SetMember(member); // Base::GetStaticMember() inside this RETURNS CORRECT ADDRESS

Worker* worker = new Worker();
worker->DoSomething(); // Base::GetStaticMember() inside this RETURNS 0 
```

# 问题

在调试器中单步执行时，Base::GetStaticMember() 在设置成员后将正确的地址返回给成员（但仍在 childa->SetMember() 内部。一旦 OUTSIDE childa，Base::GetStaticMember() 改为返回 0。当在 worker->DoSomething() 内部时，Base::GetStaticMember() 也返回 0。谁能向我解释这是什么原因以及如何解决它，以便在外部或内部方法访问 Base::GetStaticMember() Dll 或 Lib 会返回正确的地址而不是 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:09:46.980

如果您使用链接到多个 DLL 和/或您的 EXE 的静态库，则每个都将获得*自己的*静态成员变量。想想每一个的 *link 阶段如何发生的机制，你就会明白为什么。

您*可以*将静态变量转换为引用由内存映射文件支持的共享内存的指针，但我警告您管理起来会很棘手。我通过使用类的名称+成员+pid作为映射名称来维护一个临时内存映射文件来完成它（注意：pid是为了允许多个进程运行而不会相互踩踏共享内存）。它的效果出奇的好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:13:59.550

您应该`lib1`只链接`Dll1`或`App1`，而不是两者。

现在你已经在你的和中`Base::_member`定义*了*。`Dll1``App1`

当您定义`Base`类`__dllexport`/`__dllimport`时，它使用`Dll1`静态成员，但您没有声明`Worker`任何属性，并且它使用*本地*静态成员。

我假设，您应该指定属性并且`Worker`不链接`App1``Lib1`

# iphone - What can happen between viewWillAppear and viewDidAppear?

> ID：12991582
> 
> 赞同：13
> 
> 时间：2012-10-20T18:48:50.160
> 
> 标签：iphone, ios, performance, cocoa-touch, uiviewcontroller

I am optimizing a transition that seems to be slow on my device. I am pushing one `UIViewController` from another when a `UITableView`'s row is selected. There is a noticeable pause after row selection and before the new view is pushed.

Some logging indicates that all of my code is reasonably quick, from row selection until the pushed controller's `viewWillAppear`. But then the time between `viewWillAppear` and `viewDidAppear` is logged at around 0.7 seconds.

The transition itself (I believe) should only take 0.3 seconds. What could be accounting for the remainder?

I am testing on an iPhone 4, so I'm not expecting the snappiest performance. But I should be able to match the same performance of other similar apps on the same device, no?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-17T21:04:45.490

几周前我有一个类似的问题，我写了一篇关于我发现的博客文章：

[http://bradbambara.wordpress.com/2014/07/31/object-life-cycle-uiviewcontroller/](http://bradbambara.wordpress.com/2014/07/31/object-life-cycle-uiviewcontroller/)

TL;DR 版本是 iOS 将：

*   执行新场景的布局
*   执行到新场景的过渡（如果是动画过渡）

...所以我的猜测是延迟可能是由特别长的过渡引起的，或者如果您在布局代码中执行任何性能密集型工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:59:30.997

> 转换本身（我相信）应该只需要 0.3 秒。剩下的可能是什么？

资源通常通过以下方式消耗：`drawRect:`, `layoutSubviews`, `viewDidLoad`, `viewWillAppear:`. 此外，从 NIB 加载可能需要相当长的时间。

之后`viewWillAppear:`，iOS 将对新的（可能是当前的）视图进行快照，以在两个屏幕之间执行流畅的动画。因此，请确保两个控制器视图的绘图和布局代码足够快。

# c++ - C++ 求解四次根（四阶多项式）

> ID：12991584
> 
> 赞同：2
> 
> 时间：2012-10-20T18:49:00.470
> 
> 标签：c++, math, polynomial-math, equation-solving

作为我项目的一部分，我需要在 C++中以**封闭形式求解四次多项式。**

> A*x ⁴ + B*x ³ + C*x ² + D*x + E = 0

我为此找到了几个链接。其中之一在[这里](http://www.gamedev.net/topic/451048-best-way-of-solving-a-polynomial-of-the-fourth-degree/)。但它计算所有根，而我只想要真正的根。算法主要使用Ferrari的方法来降低阶数。

```
bool solveQuartic(double a, double b, double c, double d, double e, double &root)
{
// I switched to this method, and it seems to be more numerically stable.
// http://www.gamedev.n...topic_id=451048 

// When a or (a and b) are magnitudes of order smaller than C,D,E
// just ignore them entirely. This seems to happen because of numerical
// inaccuracies of the line-circle algorithm. I wanted a robust solver,
// so I put the fix here instead of there.
if(a == 0.0 || abs(a/b) < 1.0e-5 || abs(a/c) < 1.0e-5 || abs(a/d) < 1.0e-5)
    return solveCubic(b, c, d, e, root);

double B = b/a, C = c/a, D = d/a, E = e/a;
double BB = B*B;
double I = -3.0*BB*0.125 + C;
double J = BB*B*0.125 - B*C*0.5 + D;
double K = -3*BB*BB/256.0 + C*BB/16.0 - B*D*0.25 + E;

double z;
bool foundRoot2 = false, foundRoot3 = false, foundRoot4 = false, foundRoot5 = false;
if(solveCubic(1.0, I+I, I*I - 4*K, -(J*J), z))
{
    double value = z*z*z + z*z*(I+I) + z*(I*I - 4*K) - J*J;

    double p = sqrt(z);
    double r = -p;
    double q = (I + z - J/p)*0.5;
    double s = (I + z + J/p)*0.5;

    bool foundRoot = false, foundARoot;
    double aRoot;
    foundRoot = solveQuadratic(1.0, p, q, root);
    root -= B/4.0;

    foundARoot = solveQuadratic(1.0, r, s, aRoot);
    aRoot -= B/4.0;
    if((foundRoot && foundARoot && ((aRoot < root && aRoot >= 0.0) 
        || root < 0.0)) || (!foundRoot && foundARoot)) 
    {
        root = aRoot;
        foundRoot = true;
    }

    foundARoot = solveQuadraticOther(1.0, p, q, aRoot);
    aRoot -= B/4.0;
    if((foundRoot && foundARoot && ((aRoot < root && aRoot >= 0.0) 
        || root < 0.0)) || (!foundRoot && foundARoot)) 
    {
        root = aRoot;
        foundRoot = true;
    }

    foundARoot = solveQuadraticOther(1.0, r, s, aRoot);
    aRoot -= B/4.0;
    if((foundRoot && foundARoot && ((aRoot < root && aRoot >= 0.0) 
        || root < 0.0)) || (!foundRoot && foundARoot)) 
    {
        root = aRoot;
        foundRoot = true;
    }
    return foundRoot;
}
return false;
} 
```

这使用了solveCubic()，它给出了实解和虚解：

```
bool solveCubic(double &a, double &b, double &c, double &d, double &root)
{
if(a == 0.0 || abs(a/b) < 1.0e-6)
    return solveQuadratic(b, c, d, root);

double B = b/a, C = c/a, D = d/a;

double Q = (B*B - C*3.0)/9.0, QQQ = Q*Q*Q;
double R = (2.0*B*B*B - 9.0*B*C + 27.0*D)/54.0, RR = R*R;

// 3 real roots
if(RR<QQQ)
{
    /* This sqrt and division is safe, since RR >= 0, so QQQ > RR,    */
    /* so QQQ > 0\.  The acos is also safe, since RR/QQQ < 1, and      */
    /* thus R/sqrt(QQQ) < 1\.                                     */
    double theta = acos(R/sqrt(QQQ));
    /* This sqrt is safe, since QQQ >= 0, and thus Q >= 0             */
    double r1, r2, r3;
    r1 = r2 = r3 = -2.0*sqrt(Q);
    r1 *= cos(theta/3.0);
    r2 *= cos((theta+2*PI)/3.0);
    r3 *= cos((theta-2*PI)/3.0);

    r1 -= B/3.0;
    r2 -= B/3.0;
    r3 -= B/3.0; 

    root = 1000000.0;

    if(r1 >= 0.0) root = r1;
    if(r2 >= 0.0 && r2 < root) root = r2;
    if(r3 >= 0.0 && r3 < root) root = r3;

    return true;
}
// 1 real root
else
{
    double A2 = -pow(fabs®+sqrt(RR-QQQ),1.0/3.0);
    if (A2!=0.0) {
        if (R<0.0) A2 = -A2; 
        root = A2 + Q/A2; 
    }
    root -= B/3.0;
    return true;
}
} 
```

以下是一些解释代码的链接。[solveCubic](http://www.1728.org/cubic2.htm)和[solveQuartic](http://www.1728.org/quartic2.htm)

有没有人可以修改代码来求解实根的四次多项式？

我想尽可能有效地实现它。顺便说一句，如果有人为此目的引入了一个有用的库，例如 LAPACK，我将不胜感激（它似乎无法直接计算四次多项式的根）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:15:56.037

对于实根以封闭形式求解该方程的最有效方法可能是对所有根以封闭形式求解它，然后丢弃虚构的根。

您可能认为您可以使用 try/catch 对来确定是否出现虚数，但这不是一个很好的策略，因为您在计算实根时生成的一些中间值可能是虚数。

因此，您可以尝试使用 C++ 复数库（参见[此处](http://en.cppreference.com/w/cpp/numeric/complex)或[此处](http://www.java2s.com/Tutorial/Cpp/0040__Data-Types/0460__complex-number.htm)）进行计算。

然后，检查数字的虚部是否非零，如果是则丢弃它。但请记住，浮点数学是不精确的，因此“零”包括一系列非常接近于零的数字。

# java - Jtree navigator

> ID：12991585
> 
> 赞同：0
> 
> 时间：2012-10-20T18:49:02.467
> 
> 标签：java, swing, jpanel, listener, jtree

I would like to know how can I implement a navigator tree for my application in swing. I got a long sequence of panel, and I would like to have on left side of the screen a kind of "navigator". It seems easy as concept, but I really do not know where to start. To get you a picture is something like this:

![enter image description here](../Images/7377360db160fa9032fe4f0698bb9397.png)

I would like to realize the "red zone" :)

Actually I'm able to construct the tree iterating through the arraylist provided by the controller, in this way:

```
Iterator<SectionPanel> sectionIterator = sectionPanelList.iterator();
    while (sectionIterator.hasNext()) {
         root.add(new DefaultMutableTreeNode(sectionIterator.next()));
    } 
```

The question is: if I want to remove a particular object, how can I find it within the tree? Moreover, how can I connect an action with the relative JPanel ? I mean "when I click on Panelx, I would like the scroll to move and let me see that particular panel ".

Thanks for your attention. Simone

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:34:29.417

为了展示一个单曲`JPanel`，你可以

*   使用[JTree](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)`String value`并从[TreeSelectionListener](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#select)返回

*   将[JPanels](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)[放入](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)CardLayout

*   selection acme from`JTree`返回`String value`作为[CardLayout#show(Container parent, String name) 的参数](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)

*   对于乘法，逻辑可能是相同的，但会有 x_times 个组合

# ruby-on-rails - 如何在 ruby on rails 中为表单字段使用 span 标签？

> ID：12991586
> 
> 赞同：6
> 
> 时间：2012-10-20T18:49:05.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

在我的表单中，我使用了 span 标签，如下所示：

```
<%= content_tag :span, f.object.User, class: 'username' %> 
```

在我选择值后，它在 HTML 中如下所示：

```
<span class="user" style="">Antony</span> 
```

问题是当我们创建表单时 id 没有将值传递给数据库。我不知道确切的问题是什么。我想使用这个内容标签而不是 text_field 来获取值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:56:09.203

当您提交 HTML 表单时，唯一被 POST 的值是输入字段中的值，例如文本字段、选择、复选框、按钮等。页面上的内容（无论是否在跨度中）都会不会被发回服务器。这不是 Rails 问题，它只是 HTML 的工作方式。

我不确定您要在这里做什么，但是当您想要显示一个值（不在输入框中）并将该值与表单一起发布时，一种常见的方法是同时呈现该值页面（在一个跨度或任何你想要的），并添加一个隐藏的输入字段（`hidden_field_tag`），其中也有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:02:47.603

是的，雅各布是正确的。更好地创建隐藏字段

```
<%= f.hidden_field :user, class: 'user' %>
<%= content_tag :span, f.object.User, class: 'username' %> 
```

第一行获取其中的值。我希望，雅各布的回答会对你有所帮助。:)

# asp.net - Setting values when a user updates a record using Entity Framework 4 and VB.NET in ASP.NET application

> ID：12991587
> 
> 赞同：4
> 
> 时间：2012-10-20T18:49:06.060
> 
> 标签：asp.net, vb.net, entity-framework, .net-4.0

this is my first post, hopefully I'm following the rules!

After a few weeks of banging my head against brick walls and endless hours of internet searches, I have decided I need to make my own post and hopefully find the answers and guidance from all you experts.

I am building an ASP.NET application (in Visual Studio 2010) which uses an SQL 2008 database and Entity Framework 4 to join the two parts together. I designed the database as a database project first, then built the Entity Model as a class project which is then referenced in the main ASP.NET project. I believe this is called Database First in Entity Framwork terms?

I'm fairly new to Web Apps (I mainly develop WinForms apps) and this is my first attempt at using Entity Framwork.

I can just about understand C# so any code samples or snippets you might supply would be preferred in VB if possible.

To give some background on where I am so far. I built a regsitration page called register.aspx and created a wizard style form using ASP:Wizard with ASP:TextBox, ASP:DropdownList and ASP:CheckBoxList it's all laid out inside a HTML table and uses CSS for some of the formatting. Once the user gets the the last page in the wizard and presses "Finish" I execute some code in the VB code behind file as follows:

```
Protected Sub wizardRegister_FinishButtonClick(sender As Object, e As System.Web.UI.WebControls.WizardNavigationEventArgs) Handles wizardRegister.FinishButtonClick
    Dim context As New CPMModel.CPMEntities
    Dim person As New CPMModel.Person
    Dim employee As New CPMModel.Employee

    Dim newID As Guid = Guid.NewGuid

    With person
        .ID = newID
        .UserID = txbx_UserName.Text
        .Title = ddl_Title.SelectedValue
        .FirstName = txbx_FirstName.Text
        .MiddleInitial = txbx_MiddleInitial.Text
        .FamilyName = txbx_FamilyName.Text
        .Gender = ddl_Gender.SelectedValue
        .DOB = txbx_DOB.Text
        .RegistrationDate = Date.Now
        .RegistrationMethod = "W"
        .ContactMethodID = New Guid(ddl_ContactMethodList.SelectedValue)
        .UserName = txbx_UserName.Text
        If Not (My.Settings.AuthenticationUsingAD) Then
            .Password = txbx_Password.Text ' [todo] write call to salted password hash function
        End If
        .IsRedundant = False
        .IsLocked = False
    End With

    context.AddToPeople(person)

    With employee
        .ID = newID
        .PayrollNumber = txbx_PayrollNumber.Text
        .JobTitle = txbx_JobTitle.Text
        .DepartmentID = ddl_DepartmentList.SelectedValue
        .OfficeNumber = txbx_OfficeNumber.Text
        .HomeNumber = txbx_HomeNumber.Text
        .MobileNumber = txbx_MobileNumber.Text
        .BleepNumber = txbx_BleepNumber.Text
        .OfficeEmail = txbx_OfficeEmail.Text
        .HomeEmail = txbx_HomeEmail.Text
        .IsRedundant = False
        .RedundantDate = Nothing

         '--------------------------
        .FiledBy = Threading.Thread.CurrentPrincipal.Identity.Name
        .FiledLocation = My.Computer.Name
        .FiledDateTimeStamp = Date.Now
        '----------------------------
    End With

    context.AddToEmployees(employee)
    context.SaveChanges()
End Sub 
```

The above works fine, seemed to be a sensible way of doing it (remember I'm new to Entity Framework) and gave me the results I extpected.

I have another page called manage.aspx on this page is a tab control, each tab page contains a asp:DetailsView which is bound to an asp:EntityDataSource, I have enabled Update on all the Entity Data Sources and on some I have also enabled Insert, none of the have delete enabled.

If I build and run the app at this stage everything works fine, you can press the "edit" link make changes and then press "update" and sure enough those updates are displayed on the screen instantly and the database does have the correct values in.

Here's the problem, I need to intercept the update in the above code (the bold bit) notice there is a column in my database called FiledBy, FiledLocation, and FiledDateTimeStamp. I don't want to show these columns to the user viewing the ASP.NET page but I want to update them when the user presses update (if there were any changes made). I have tried converting the ASP:DetailsView into a template and then coding the HTML side with things like;

```
<@# Eval(User.Name) #> 
```

I did manage to get it to put the correct values in the textboxes when in edit mode but I had the following problems;

1.  It didn't save to the database
2.  I have to show the textboxes which I don't want to do

I have read on several other posts on here and other websites that you can override the SaveChanges part of the Entity Framwork model one example of this is in the code below;

```
public override int SaveChanges() 
{
var entities = ChangeTracker.Entries<YourEntityType>() 
                            .Where(e => e.State == EntityState.Added) 
                            .Select(e => e.Entity); 
var currentDate = DateTime.Now; 
foreach(var entity in entities) 
{ 
    entity.Date = currentDate; 
} 

return base.SaveChanges(); 
} 
```

The problem is, that whilst I understand the idea, and can just about transalate it to VB I have no idea how to implement this. Where do I put the code? How do I call the code? etc.

I would ideally like to find a solution that meets the following requirements:

*   Doesn't get overwritten if I was to regenerate / update the Entity Model
*   Doesn't need to be copy and pasted for every table in my model (most but not all have the audit columns in)
*   Can be used for other columns, for example, if a user make a selection in a check list I may want to write some value into another (not exposed to the user) column.

Am I taking the right approach to displaying data in may webpages I certainly find the DataView and GridView limiting, I did think about creating a form like the registration form in table tags but have no Idea how to populate the textboxes etc with values from the database nor how to implement paging as many of the tables have one to many relationships, although saving changes would be easy if I did populate textboxes on a table.

Thank you all in advance to anyone who offers there support.

Kevin.

Ok so I have now got closer, but still not got it working correctly. I've used the following code to edit the value in the DetailsView on the Databound event. If writes the correct timestamp into the read only textbox but does not right this value back to the database when you press the Update button on the DetailsView control.

```
Protected Sub dv_Employee_DataBound(sender As Object, e As EventArgs) Handles dv_Employee.DataBound
    If dv_Employee.CurrentMode = DetailsViewMode.Edit Then
        For Each row In dv_Employee.Rows
            If row.Cells(0).Text = "FiledDateTimeStamp" Then
                row.Cells(1).Text = Date.Now()
            End If
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:59:13.170

我喜欢覆盖保存更改方法的想法。您的上下文应该是一个部分类，因此您只需要在同一命名空间中定义另一个标记为具有相同名称的部分类并将覆盖添加到它。

```
Namespace CPMModel
  Partial Public Class CPMEntities
   ...Your override here
End Class 
```

由于这是对默认 SaveChanges 方法的覆盖，因此您无需对其调用方式进行任何更改。您将需要找到一种访问实体级别属性的方法。

由于这是为所有实体提交更改的方法，因此您将无法像在示例中那样访问属性，因为实体类没有定义您的具体属性。因此，您需要为您的实体创建部分类，并让它们都实现一个接口，该接口定义了您想要与之交互的属性。

创建接口：

```
Interface IDate
   Property Date() as DateTime
End Interface 
```

为实现 IDate 接口的每个实体创建部分类。（相同的规则适用于这些部分类，它们必须标记为部分，与它们扩展的类具有相同的名称并位于同一命名空间中）然后在您的 SaveChanges 覆盖

```
public override int SaveChanges() 
{
         var entities = ChangeTracker.Entries<Entity>() 
                        .Where(e => e.State == EntityState.Added) 
                        .Select(e => e.Entity); 
        var currentDate = DateTime.Now; 
        foreach(var entity in entities) 
        { 
                ***Now cast entity to type of IDate and set your value ***
                entity.Date = currentDate; 
        } 

        return base.SaveChanges(); 
} 
```

我不是用 Vb 写的，所以我把语法留在了 C# 中。

那应该满足您的所有要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:49:12.330

好的，所以这并不是我想象的那样，但它实际上满足了我的需求。有点儿！

我所做的是在 aspx 文件的代码隐藏文件中编写一个受保护的子。

```
Protected Sub CustomEntityUpdate_Employee(sender As Object, e As  
EntityDataSourceChangingEventArgs)
    Dim emp As CPMModel.Employee = e.Entity
    ' Check if the entity state is modified and update auditing columns
    If emp.EntityState = EntityState.Modified Then
        emp.FiledDateTimeStamp = Date.Now()
        emp.FiledBy = Threading.Thread.CurrentPrincipal.Identity.Name
        emp.FiledLocation = My.Computer.Name
    End If
End Sub 
```

然后在aspx页面中我编辑了Entity数据源代码来调用上面的子例程

```
#nUpdating="CustomEntityUpdate_Employee"

<asp:EntityDataSource 
    ID="eds_Employee" 
    runat="server" 
    ConnectionString="name=CPMEntities" 
    DefaultContainerName="CPMEntities" 
    EnableFlattening="False" 
    EnableUpdate="True" 
    EntitySetName="Employees" 
    AutoGenerateWhereClause="True" 
    Where="" 
    EntityTypeFilter="Employee" 
    **OnUpdating="CustomEntityUpdate_Employee">**
    <WhereParameters>
        <asp:SessionParameter 
            Name="ID" 
            SessionField="UserID" />
    </WhereParameters>
</asp:EntityDataSource> 
```

受保护的子，检查实体是否已被修改，以及它是否使用我想要的值更新了实体审计列。

它可以工作，但肯定会产生更多代码，理想情况下，我希望有一种方法可以将它打包到一个类中，然后通过 OnUpdating 事件从各种 aspx 页面调用 sub 并让类找出哪个实体是拨打电话并处理那里的所有逻辑。

# php - 卡在我的主目录中的 htaccess 文件，不知道如何使用它或摆脱它

> ID：12991590
> 
> 赞同：0
> 
> 时间：2012-10-20T18:49:19.740
> 
> 标签：php, .htaccess, dns, subdomain, concrete

显然，我的根目录中有一个 .htaccess 文件，它弄乱了我在该目录中的所有其他站点。

我目前使用 GoDaddy 作为我的主机。
这是我面临的情况：

*   我有一个直接托管在根文件夹中的主域
    （例如，索引文件可以在 /root/index.php 中找到）*   我在子目录内的文件夹中托管了一些其他域
    （例如 root/domain2/index.php）*   其他网站正常工作。*   主域是用concrete 5构建的，其余的由基本的php和html构建，使用notepad++*   其他域的子域不起作用，因为它们在 .htAccess 文件中没有访问权限

现在我的问题是，
由于我无法删除 .htAccess 文件，我该如何管理创建子域？
.htaccess 文件仅用于具体网站，但由于某种原因控制着一切，有什么办法可以解决吗？

谢谢！

PS我不是建立具体网站的人，我正在建立其余的域，所以我不清楚如何使用它。我所知道的是，一旦我删除了 .htaccess，子域就可以工作，根目录中的主域只允许访问它的索引页面。

为了清楚起见，有一个主站点，我们称之为站点 1，它托管在主目录中，还有其他站点，例如。site2-site5，我想为其创建子域，除非我删除 .htaccess 文件，否则它不起作用。

我希望问题足够清楚，如果没有，需要更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:07:04.510

.htaccess 文件在设计上会影响它们所在的目录，它们下面的所有目录都可以看到[http://httpd.apache.org/docs/2.2/howto/htaccess.html#what](http://httpd.apache.org/docs/2.2/howto/htaccess.html#what)。

使用您当前的设置，您可以在 htdocs 文件夹中为每个子域创建一个新的 .htaccess，它会覆盖更高的那个。

更好的是为来自不同父目录的主域和子域提供服务。例如，假设您当前的站点是 www.example.com，而您的子域是 site1.example.com 和 site2.example.com。

我建议您的目录设置是这样的：

```
/var/www/example.com/www/htdocs 
/var/www/example.com/site1/htdocs
/var/www/example.com/site2/htdocs 
```

这样，用于 www.example.com 的内容对 site1.example.com 没有影响。

这也可以防止您在主域 htdocs 文件夹中包含子域时可能遇到的重复内容问题。

例如，如果您当前的设置是这样的：

```
/var/www/example.com/www  <-- main doman
/var/www/example.com/www/site1 <-- site1.example.com 
```

然后访问 www.example.com/site1 会显示与访问 site1.example.com 相同的内容，这对谷歌来说是一个负面的 SEO 信号。

# c# - Canvas to support a scrollable stock graph

> ID：12991591
> 
> 赞同：0
> 
> 时间：2012-10-20T18:49:31.967
> 
> 标签：c#, wpf, xaml, canvas, scroll

I would like to draw a graph of a stock on a canvas.
The canvas has an initil size lets say 300 (height) x 1000 (Width).

The stock has been trading for more days that can fit into the visual part of the Canvas
I would like to drag (scroll) the visual part of the canvas around and see the non visual parts that are hidden "behind". i.e see trading days that are not initially displyed.

Would appreciate any ideas or pointers to get me on the right path.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:33:42.270

您可以使用两个画布 - 画布内的画布。外层画布的大小是固定的 (1000 x 300)，但内层画布的大小将与您想要的一样大。将`ClipToBounds`外部画布的属性设置为`True`.

C＃：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace Stock
{
    /// <summary>
    /// Interaction logic for ListBox.xaml
    /// </summary>
    public partial class Chart : Window
    {
        private Point _capturePoint;
        private double _captureLeft;
        private double _captureTop;

        public Chart()
        {
            InitializeComponent();

        }

        protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
        {
            base.OnMouseLeftButtonDown(e);

            _capturePoint = e.GetPosition(chart);
            _captureLeft = Canvas.GetLeft(chart);
            _captureTop = Canvas.GetTop(chart);

            if (_capturePoint.X > 0 && _capturePoint.X < chart.RenderSize.Width &&
                _capturePoint.Y > 0 && _capturePoint.Y < chart.RenderSize.Height) 
            {
                CaptureMouse();
            }

        }

        protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
        {
            base.OnMouseLeftButtonUp(e);
            ReleaseMouseCapture();
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            base.OnMouseMove(e);

            if (Mouse.Captured == this)
            {
                var currentPoint = e.GetPosition(chart);
                var diff = Point.Subtract(currentPoint, _capturePoint);

                Canvas.SetTop(chart, _captureTop + diff.Y);
                Canvas.SetLeft(chart, _captureLeft + diff.X);
            }
        }
    }
} 
```

XAML：

```
<Window x:Class="Stock.Chart"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ListBox" Height="300" Width="300">
        <Canvas Height="300" Width="1000" x:Name="viewport" ClipToBounds="True">
            <Canvas x:Name="chart" Background="Green" Width="2000" Height="1000" Canvas.Top="20" Canvas.Left="10" >

            </Canvas>
        </Canvas>
</Window> 
```

# ios - How to properly use Django (Web and Mobile Deployment)

> ID：12991593
> 
> 赞同：0
> 
> 时间：2012-10-20T18:49:44.560
> 
> 标签：ios, django, web-services, rest, tastypie

This is a very general and open-topic question. So yesterday we decided we would like to create an iOS app based off our website that is currently being built with Django. Now, Django, like RoR, is suppose to be transparent to the UI; it shouldn't care what UI the user is using. (Proper MVC).

If I look at some of our code for example, here is how we add an equipment into our system:

```
 @login_required
 def add(request):
     r_user = request.user.userprofile
     form = EquipmentFormAdd(request.POST or None, c_id=r_user.company_id, error_class=DivErrorList)
     if form.is_valid():
        equipment = form.save(commit=False)
        equipment.company_id = r_user.company_id
        equipment.added_by_id = request.user.id
        default_file_path = EquipmentPicture.get_default_file_path()
        url_bucket = r_user.company.s3_bucket.name + default_file_path        
        cell = form.cleaned_data['cell']
        equipment.cell_order = cell.equipment_set.count() + 1
        equipment_picture = EquipmentPicture.objects.create(
            file=EquipmentPicture.get_default_file_path(),
            slug=EquipmentPicture.get_default_slug(), 
            bucket_name=r_user.company.s3_bucket.name,
            bucket=r_user.company.s3_bucket, added_by=request.user,
            company=r_user.company, url_with_bucket=url_bucket)                
        equipment.picture = equipment_picture
        equipment.save()
        return redirect('equipment_index')
   return render(request, 'equipment/add.html', {'equipment_form': form, 'company_id': r_user.company_id}) 
```

If I look at this, I see that we are rendering straight-away a template and passing it data. This would't work in iOS.

Few questions:

1.  I see a lot of people creating REST APIs. I don't really see the point of doing that if we can just create HTTPResponses with Django. If we were to use something like TastyPie, we wouldn't be able to just create an equipment (like we do right now) with a POST Statement as if you look at our current **add function** a lot of stuff is done within that function and TastyPie wouldn't be able to call that.

2.  My main question is **should we have a REST API running as well as the normal Django server for both the Web and iOS platform, or just have the same functions, with different entry points and renderings according to it?**

3.  When do you create a REST API? A lot of our functions when creating and getting data wouldn't work right now with just standard POST and GET calls. Is that bad?

I am kind of confused... sorry for the long question and thanks again!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:00:55.680

REST API 与 GET 和 POST 没有什么不同。它只是将它们用于数据而不是演示。您输出 JSON 或 XML 而不是标记代码。API 使用者然后为数据构建所需的用户界面。

REST API 的真正意义在于利用 HTTP 已经提供的所有工具，而不是发明另一层封装（如 SOAP）

例如，要指示某些操作的结果（成功与否），请使用状态码。要指示要执行的操作，通常使用动词（get、post、put、delete、head、options）。其他请求或响应元数据将进入适当的 http 标头。

这种方式数据更简单，缓存更容易，集成也很容易。

此外，借助良好的 REST API，您甚至可以构建一个网站，该网站使用一些 JavaScript 框架（例如，backbonejs）从 API 消耗的数据构建 UI。

**更新**

所以，考虑到 Django 中 REST 事物的当前状态，并且有一些生产和使用 API 的经验，我会告诉你构建：

1.  一个 RESTful API 与您的 Web 一起使用，如果可能的话，使用您用于网站的相同控制器。同一个 Web 实际上是 RESTful，唯一的区别是它不是 API。我曾尝试在一些项目中使用多个库来构建 API，但最终总是为它生成我自己的代码。有时这样会更容易。所有客户端应用程序（iOS、android 等）都将使用您的 API，因此您可以将其完全解耦。

    如果您对自己构建所有 API 感到不自在，那么[活塞](https://bitbucket.org/jespern/django-piston/wiki/Home)可能是美味派的有效替代品。

2.  **只有**一个 RESTful API，并使用客户端技术重建您的站点。当您的（许多）客户/用户的浏览器可以完成相同的工作而您不支付电费时，为什么要让您的（少数）服务器忙于生成 HTML？

在任何情况下，RESTful API 都将帮助您组织好应用程序的数据结构。

# asp.net - SignalR 长轮询传输

> ID：12991597
> 
> 赞同：2
> 
> 时间：2012-10-20T18:50:06.693
> 
> 标签：asp.net, signalr, long-polling, signalr-hub

我正在使用带有集线器的 SignalR 0.5.3，并且我明确地将传输设置为长轮询，如下所示：

```
$.connection.hub.start({ transport: 'longPolling' }, function () {
    console.log('connected');
}); 
```

使用这样的配置（在 global.asax.cs Application_Start 方法中）：

```
GlobalHost.DependencyResolver.UseRedis(server, port, password, pubsubDB, "FooBar");
GlobalHost.Configuration.DisconnectTimeout = TimeSpan.FromSeconds(2);
GlobalHost.Configuration.KeepAlive = TimeSpan.FromSeconds(15); 
```

然而，长轮询似乎既不适用于开发（IIS express）也不适用于生产（IIS 7.5）环境。连接似乎正确，但是长轮询请求总是超时（大约 2 分钟后），然后重新连接。来自 IIS 的日志在[这里](http://pastebin.com/n9RMjZdj)。第一次超时请求的响应：

```
{"MessageId":"3636","Messages":[],"Disconnect":false,"TimedOut":true,"TransportData":{"Groups":["NotificationHub.56DDB6692001Ex"],"LongPollDelay":0}} 
```

超时重新连接响应如下所示：

```
{"MessageId":"3641","Messages":[],"Disconnect":false,"TimedOut":true,"TransportData":{"Groups":["NotificationHub.56DDB6692001Ex"],"LongPollDelay":0}} 
```

我将不胜感激有关此问题的任何帮助。谢谢。

**编辑**

如果重新连接意味着新的长轮询周期的开始，为什么当 global.asax.cs 中的 KeepAlive 设置设置为 15 秒时，它会在大约 2 分钟后启动？问题是我在 IIS 前面有一个反向代理，它在 25 秒后超时保持活动请求，因此当达到此反向代理超时时我得到 504 响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T21:53:48.010

看看这篇文章：[Signalr 如何在内部工作](https://stackoverflow.com/questions/7807066/how-signalr-works-internally)。长拉的工作方式是在设定的时间后连接将超时或收到响应并拉回（重新连接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-25T09:21:36.000

长时间轮询禁用保持活动功能。似乎使用 ConnectionTimeout 代替。

> 此设置表示在关闭传输连接并打开新连接之前保持传输连接打开并等待响应的时间量。默认值为 110 秒。

[https://docs.microsoft.com/en-us/aspnet/signalr/overview/guide-to-the-api/handling-connection-lifetime-events#timeoutkeepalive](https://docs.microsoft.com/en-us/aspnet/signalr/overview/guide-to-the-api/handling-connection-lifetime-events#timeoutkeepalive)

如果请求超时并且服务器没有发送任何数据，但您希望它发送，则可能是服务器端的一些问题，您还没有看到。

# parsing - 如何从没有分隔符的文件中获取数字 0-255

> ID：12991606
> 
> 赞同：1
> 
> 时间：2012-10-20T18:51:49.530
> 
> 标签：parsing, file-processing, fileparsing

我有一个纯文本文件，其中**只有数字**（没有空格、逗号、换行符等），其中包含*n 个*数字，范围从 0 到 255。我想把它放进去并将这些值存储在一个数组中。

## 例子

* * *

假设我们在文件中有这个序列：

```
581060100962552569 
```

我想像这样接受它，`in.read`文件输入流在哪里，`tempArray`是一个最多包含 3 个变量的本地数组，每次存储内容时都会擦除它`endArray`，这是我希望最终值去的地方：

```
in.read     tempArray     endArray
5           [5][ ][ ]     [] //It reads in "5", sees single-digit number X guarantees that "5X" is less than or equal to 255, and continues
8           [5][8][ ]     [58] //It reads in "8", realizes that there's no number X that could make "58X" smaller than or equal to "255", so it stores "58" in endArray
1           [1][ ][ ]     [58] //It wipes tempArray and reads the next value into it, repeating the logic of the first step
0           [1][0][ ]     [58] //It realizes that all single-digit numbers X guarantee that "10X" is less than or equal to "255", so it continues
6           [1][0][6]     [58][106] //It reads "6" and adds "106" to the endArray
0           [0][ ][ ]     [58][106] //It wipes tempArray and stores the next value in it
1           [0][1][ ]     [58][106]
0           [0][1][0]     [58][106][10] //Even though all single-digit numbers X guarantee that "010X" is less than or equal to "255", tempArray is full, so it stores its contents in endArray as "10".
0           [0][ ][ ]     [58][106][10]
9           [0][9][ ]     [58][106][10]
6           [0][9][6]     [58][106][10][96] //Not only can "96" not have another number appended to it, but tempArray is full
2           [2][ ][ ]     [58][106][10][96]
5           [2][5][ ]     [58][106][10][96] //There are numbers that can be appended to "25" to make a number less than or equal to "255", so continue
5           [2][5][5]     [58][106][10][96][255] //"5" can be appended to "25" and still be less than or equal to "255", so it stores it in tempArray, finds tempArray is full, so it stores tempArray's values in endArray as "255"
2           [2][ ][ ]     [58][106][10][96][255][37]
5           [2][5][ ]     [58][106][10][96][255][37] //There are numbers that can be appended to "25" to make a number less than or equal to "255", so continue
6           [6][ ][ ]     [58][106][10][96][255][37][25] //It sees that adding "6" to "25" would make a number that's larger than 255, so it stores "25" in the endArray and remembers "6" in the tempArray
9           [6][9][ ]     [58][106][10][96][255][37][25][69] //It sees that there is no number X such that "69X" is less than "255", so it stores "69" in endArray 
```

**有谁知道我怎样才能完成这种行为？**请尽量将您的答案保留在伪代码中，以便可以将其翻译成多种编程语言

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:03:58.173

我不会使用临时数组来保存中间数字 - 因为 CPU 数字以二进制格式存储，而您正在读取十进制数字。

这样的事情可以解决你的问题：

```
array = []
accumulator = 0
count = 0
while not EOF:
    n = readDigit()
    if accumulator*10 + n > 256 or count == 2:
         array.push(accumulator)
         accumulator = n
         count = 0
    else:
         accumulator = accumulator*10 + n
         count = count + 1 
```

结果将附加到名为 的数组中`array`。

**编辑：**感谢 DeanOC 注意到丢失的计数器。但 DeanOC 的解决方案将第一次迭代的计数器初始化为 0 而不是 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T19:30:14.770

安提古鲁的反应快到了。

主要问题是它没有考虑到数字只能有3位数字。此修改应该适合您。

```
array = []
accumulator = 0
digitCounter = 0

while not EOF
    n = readDigit()

    if accumulator*10 + n > 255 or digitcounter = 3:
         array.push(accumulator)
         accumulator = n
         digitCounter = 1
    else:
         accumulator = accumulator*10 + n
         digitCounter = DigitCounter + 1 
```

# android - Android 标签栏控制器（片段或操作栏或 TabHost）

> ID：12991609
> 
> 赞同：2
> 
> 时间：2012-10-20T18:52:20.890
> 
> 标签：android, tabs, android-fragments

我一直在慢慢地将我的 iOS 应用程序移植到 Android 上，所以我可以花时间确保它正常运行，现在我需要创建一个类似于 TabBarController 的环境。我已经搜索了好几天，遇到了很多例子，但是每个例子都有一个问题。

首先，大多数示例是指使用 TabActivity，当我刚刚检查时，它已被弃用并且无法使用。不使用 TabActivity 的要么使用 Fragments（有时带有操作栏）或 Tab Host。看起来片段是要走的路，但是如何支持旧设备（来自 Android 网站，超过 50% 的用户仍在使用 API 10）。

基本上我需要设置的是一个选项卡式环境，它可以让每个选项卡加载一个新的活动，然后每个活动都有自己的基于导航的层次结构，所以我试图看看什么是最好的选择如果有人看到一些可以提供帮助的例子。

到目前为止，我已经找到了 4 个教程，其中每个选项卡都有片段和不同的活动，所以我现在将研究这些教程，但只是想看看是否有任何其他开发人员已经遇到过这样的问题并与之合作与旧设备的兼容性问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:54:58.763

[您可以通过Support Library](http://developer.android.com/tools/extras/support-library.html)使用 Fragments 一直到 API 4 。我会在 ActionBar 选项卡中使用带有多个 Fragment 的单个 Activity，尽管您可能需要使用 TabHost 来支持较低的 API。

# spring-mvc - Exception thrown on formSingleSelect macro freemarker.

> ID：12991613
> 
> 赞同：1
> 
> 时间：2012-10-20T18:53:27.270
> 
> 标签：spring-mvc, freemarker

I have this spring macro

```
[@spring.formSingleSelect path="discoveryProjectDetailsBean.discoveryProjectBean.dataSource" options="dataSources" /] 
```

it throws exception `freemarker.template.TemplateException: Expected collection or sequence. options evaluated instead to freemarker.template.SimpleScalar on line 227, column 20 in spring.ftl. at freemarker.core.TemplateObject.invalidTypeException(TemplateObject.java:135)`

this happens because it cannot interpret the dataSource list as sequence.

any help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:20:58.657

现在我从来没有发现更难的问题，上面的这个异常是因为`dataSource`我试图设置为选项列表的列表不是纯字符串列表。所有要传递给的选项列表`@spring.formSingleSelect`我还在[这里](https://stackoverflow.com/questions/11433510/dropdown-box-from-spring-mvc-model-context-to-form-using-freemarker)找到了另一个参考 ，就像我现在使用的工作标签的代码片段一样，如下所示。

```
[@spring.bind "dataSources"/]     
[@spring.formSingleSelect "discoveryProjectDetailsBean.discoveryProjectBean.dataSource" dataSources "disabled='disabled' multiple='multiple' class='singleList' onchange='checkValidations()'" /] 
```

我希望这会对某人有所帮助

# javascript - If the user pauses a video, I need to know the exact point where it was paused and to store it. How?

> ID：12991617
> 
> 赞同：0
> 
> 时间：2012-10-20T18:53:53.243
> 
> 标签：javascript, youtube

If I am running a youtube video with javascript, I can have an event fire every time the user pauses the video. But how do I capture the point in the video where he hit PAUSE? I need a number that reflects how far he was into the video before he paused. Thanks,

# vb.net - VB中“公共共享”子/函数的含义

> ID：12991620
> 
> 赞同：9
> 
> 时间：2012-10-20T18:54:06.020
> 
> 标签：vb.net, vb6-migration

任何人都可以在 VB 中向我解释我需要使用 Public Shared Sub，以便可以从其他表单访问它。

但是这个“公共”和“共享”是什么意思呢？

*   谁是**公开**的？
*   与谁**共享**？

如果它是**公开共享**的，这是否意味着其他一些软件或“一些黑客应用程序”可以更容易地访问这个子及其价值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:05:02.707

在 VB.NET 中，`Shared`相当于`static`在 C# 中 - 意味着成员属于类，而不是它的实例。您可能认为该成员在所有实例中是“共享的”，但这在技术上并不正确，即使 VB.NET 将`Shared`通过实例调用来解析成员。

```
public class1
    public shared something as string
    public somethingelse as string
end class 
```

以下代码说明了 VB.Net 如何允许您访问这些：

```
...
class1.something = "something" 'belongs to the class, no instance needed

dim x as new class1() with {.somethingelse = "something else"}

Console.WriteLine(x.somethingelse) 'prints "something else"

Console.Writeline(class1.something) 'prints "something" <- this is the correct way to access it

Console.Writeline(x.something) 'prints "something" but this is not recommended!
... 
```

`Public`表示任何链接程序集都可以看到和使用该成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:05:51.943

访问器`Public`关键字仅仅意味着方法、属性等在定义它的 DLL 或程序集之外是可见和可调用的。

`Shared`关键字表示方法等不是“实例化”的。也就是说，它只是**类**定义的一部分，而*不是*从该类定义创建（“实例化”）的对象的一部分。这有两个主要影响：

1.  可以随时调用 Shared 方法，而实际上没有该类的对象/实例。和，
2.  共享方法不能访问类定义的任何非共享部分（除非将对象实例传递给它）。他们只能直接访问 Class 定义的其他 Shared 部分。

# windows-phone-7 - XNA 游戏中的 XAP 文件很大，我如何编译资源而没有这么大的图像？

> ID：12991623
> 
> 赞同：0
> 
> 时间：2012-10-20T18:54:32.360
> 
> 标签：windows-phone-7, xna-4.0

我通常一直在为 windows phone 7 编写 xna 游戏并将我的所有内容设置为编译的构建操作，这是默认的；我注意到的是，在完成一个新项目后，我的 XAP 文件现在很大，它似乎已经拍摄了 15MB 的图像并将它们放大到 200MB 大小。无论如何在保持图像编译的同时让构建更小？根据我的阅读，它将图像编译为基本上完整的位图。我可以采取什么方法来解决这个问题，因为强制用户下载 200MB 的应用程序似乎不公平，而它最多只占用 15-20MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:39:15.303

XNA 内容管道基本上存储将在 GPU 上使用的图像。那可以是未压缩的位图，也可以是 DXT 压缩的（压缩程度不大）。

因此，如果您的原始文件是`jpeg`格式（或者，在较小程度上，`png`），您会发现您的原始文件比构建的 XNB 文件小得多*。*

所以答案是分发您的原始文件`jpeg`和`png`文件，并使用`Texture2D.FromStream`. 请注意，这使用更多的 CPU 能力在运行时将它们转换为正确的格式（尽管我听说在某些情况下加载*速度更快*，因为传输的数据更少）。此外，您必须自己手动进行预乘 alpha（以及内容管道为您处理的任何其他内容）。

您可能想要研究的另一件事是为您的声音效果打开压缩。默认情况下，它们是未压缩的。[有关详细信息，请参阅此答案](https://stackoverflow.com/a/7025544/165500)。

有关更多信息，[这篇文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh855082(v=vs.92).aspx)看起来很有帮助。

# visual-c++ - 当我按 Enter 键时，选项卡控件的选项卡页会关闭

> ID：12991624
> 
> 赞同：0
> 
> 时间：2012-10-20T18:54:34.857
> 
> 标签：visual-c++, mfc

我有一个选项卡控件，其中一些对话框作为选项卡页，每个对话框中都有一个创建下一个选项卡的按钮，这些按钮被设置为默认按钮，所以当我按下回车键时，它会转到下一个选项卡。但是，在您按下这些按钮后，它们会被禁用，并且当您返回该选项卡时，它不允许客户端再次单击下一个按钮，问题是当我按下回车时，按钮被禁用并且没有不再使用默认按钮，标签页将关闭！似乎输入关闭了对话框！但是当我更改选项卡并再次返回该选项卡时，再次显示对话框！所以这意味着输入不会破坏或关闭该对话框！

启用按钮时的对话框。按 Enter 就像单击按钮： ![在此处输入图像描述](../Images/feffeb63670724882f6f37bf4e76b54e.png) 创建下一个选项卡后的相同对话框： ![在此处输入图像描述](../Images/8bab763b1563b5f1ef1c7d34865b9902.png) 禁用下一步按钮时按 Enter！ ![在此处输入图像描述](../Images/9e030577498e8588ef7ccd918fcd4ff7.png) 更改选项卡并再次返回该选项卡后的对话框！ ![在此处输入图像描述](../Images/8bab763b1563b5f1ef1c7d34865b9902.png)

我不明白它的行为！请注意，我没有为输入按钮写任何东西，我只是将这些按钮设置为默认按钮，即使这些按钮不是默认按钮，它也会发生！我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:30:57.313

对话框的默认操作（即当您按下回车键时调用的操作，如果焦点不在另一个按钮或捕获回车键的控件中）是调用 OnOk，默认情况下，OnOk 关闭对话框。
所以你必须覆盖对话框的 OnOK 函数并给它们一个空的主体：

```
void CMyTabDlg::OnOk()
{
    // Nothing, so it does not close the dialog
} 
```

此外，您可以将默认按钮设置为其他按钮，但为了安全起见，无论如何我都会做覆盖 OnOk 的事情。

# php - How to make sure POST data is sent from my website's form, aside from HTTP_REFERRER and using a nonce?

> ID：12991627
> 
> 赞同：0
> 
> 时间：2012-10-20T18:55:08.507
> 
> 标签：php, forms, session, post, security

I need to make sure a request comes from a user submitting a form on the website rather than an automated POST request.

I could use

*   HTTP_REFERRER - but this is not reliable
*   hidden input field with random value from session - but what's to stop a spammer from going to my form, getting the value from the hidden field, and pasting it into his "program" as part of his automated request?

Any other options?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:10:33.447

恐怕没有办法：如果你检查你的选项#2

> *来自会话的具有随机值的隐藏输入字段 - 但是如何阻止垃圾邮件发送者进入我的表单，从隐藏字段中获取值，并将其粘贴到他的“程序”中作为他的自动请求的一部分？*

您所描述的**正是浏览器所做的**。它会“转到您的表单”、“从隐藏字段中获取值”，然后将其提交到您的服务器。

而且您无法区分两个相同的*操作方式*。

您可以通过多种方式使垃圾邮件发送者的生活变得困难。

例如，隐藏字段可能由 Javascript 片段填充；所有非 JS 浏览器（以及所有禁用 JS 的客户）都将被退回。

您可能需要对初学者进行会话身份验证；这样，您以后就可以通过拉取他的帐户来阻止垃圾邮件发送者。

只是为了搞笑（**我不建议这样做**——笨重、有风险、容易出错，你会树敌），你可以采用心理策略：在成功的情况下你的系统应该给出什么响应（例如垃圾邮件变得可见） )，您也可以在失败的情况下提供，*但只能针对引起响应的同一 IP 地址，并且只能持续五分钟*。大多数自动垃圾邮件工具甚至都不会检查；大多数人类“垃圾邮件调谐器”一旦看到他们的垃圾邮件出现就会感到满意，并继续对他们的下一个受害者轻笑。如果他们稍后检查，他们的机器人*似乎*仍然可以工作。如果运气好的话，他们会相信有一个人类网站管理员在精神上寻找并取消他们的垃圾邮件，然后他们会再次继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:02:08.943

您可以使用 HMAC 方法，使用散列算法对 POST 有效负载的前几位进行散列，该散列算法由仅在您的 php 库和后端之间已知的密钥保护。将计算的哈希存储在 http 标头中，而不是作为表单有效负载的一部分。然后，您需要做的就是通过使用密钥计算哈希值来验证服务器端提交的数据，如果哈希值未检出，您就知道这是一个虚假提交。有关详细信息，请参阅[此](https://stackoverflow.com/a/12792698/1530938)。

此外，基本的 cookie 安全参数，例如`HttpOnly`指示浏览器不允许通过传输中的脚本（VBScript、JavaScript 等）访问您设置的 cookie，因此您的令牌在传输中可能会更安全一些。

# batch-file - 编写批处理脚本以在不同的日子以不同的方式执行？

> ID：12991635
> 
> 赞同：1
> 
> 时间：2012-10-20T18:56:03.810
> 
> 标签：batch-file

如果脚本在工作日运行，我正在设置批处理脚本以执行指定的操作，如果在周末运行，则执行备用操作。

我几乎完全不熟悉编写批处理脚本，但我知道如何编写我的整个脚本，除了我上面描述的逻辑。如果可能的话，有人可以回答这两个问题，如果它至少是一个如何实现它的框架。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:53:58.450

在 Windows 中，您可以这样做：

```
if %date:~,3%==Sat goto :WeekEnd
if %date:~,3%==Sun goto :WeekEnd

:WeekDay
Dowhatever
goto :eof

:WeekEnd
DoSomethingDifferent
goto :eof 
```

这个例子是你能写的最短的。此外，如果不是在周末，执行就会落到`:WeekDay`.

如果您愿意，也可以使用该`if xxx ( xxx ) else if xxx ( xxx ) else ( xxx )`符号。

```
if %date:~,3%==Sat (
  goto :WeekEnd
) else if %date:~,3%==Sun (
  goto :WeekEnd
) else (
  goto :WeekEnd
)
echo Error^!
goto :eof

:WeekDay
Dowhatever
goto :eof

:WeekEnd
DoSomethingDifferent
goto :eof 
```

它不应该落入`echo Error^!`声明中。

# javascript - 返回 False 和 Javascript 表单

> ID：12991641
> 
> 赞同：2
> 
> 时间：2012-10-20T18:57:01.850
> 
> 标签：javascript

我查看了许多与我的查询类似的帖子，但总的来说，它们对我没有帮助。我认为我的部分问题是我对 JavaScript 太陌生，以至于以前的很多帖子对我来说都太复杂了。我有下面的简单代码，但它似乎不起作用。我没有收到警报，即使函数应该返回“true”，我也不认为表单正在提交。我检查了错误控制台，没有错误。有人可以帮忙吗？

**JavaScript：**

```
function submit()
{

var age = document.Message.Age.value;

if (age > 39)
{
    alert("You're old.");
    return false;
}

else
{
    alert("You're young!");
    return true;
}

} 
```

**HTML：**

```
<FORM id = "Message" name = "Message" method = "post" action = "http://cnn.com" onsubmit = "return submit();">

First Name: <INPUT type = "text" name = "Fname"/><br>
Age: <INPUT type = "text" name = "Age"/><br>
<INPUT type="button" name = "Submit" value = "Submit">

</FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:11:06.660

将您的 HTML 更改为

```
<FORM id = "Message" name = "Message" method = "post" action = "http://cnn.com" onsubmit = "return submit();">

First Name: <INPUT type = "text" name = "Fname"/><br>
Age: <INPUT type = "text" name = "Age"/><br>
<INPUT type="submit" name = "Submit" value = "Submit">

</FORM> 
```

请注意，输入类型已更改为“提交”，以便实际进行提交。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T19:15:10.493

**我怀疑您的javascript函数本身是否被调用。**如果没有，我认为您需要将您从标签`onsubmit`移至标签。作为`<body>``<form>`

```
 <body onsubmit"return submit();"> 
```

也可以将您的按钮更改为任一类型`submit`或在下面添加一个`onClick()`事件：

```
 <INPUT type="submit" name = "Submit" value = "Submit"/> 
```

或者

```
 <INPUT type="button" name = "Submit" value = "Submit" onClick="submit()"/> 
```

以下是完整的工作代码（在 chrome 和 IE8 中）示例：

```
<Html>
 <head>
   <script language="javascript">
   function submit(){
     var age = document.Message.Age.value;
     if (age > 39){
        alert("You're old.");
        return false;
     }else{
        alert("You're young!");
        return true;
     }
   } 
   </script>
  </head>
  <body>
  <FORM id = "Message" name = "Message" method = "post" 
               action = "http://cnn.com" onSubmit = "javascript:return submit();">
    First Name: <INPUT type = "text" name = "Fname"/><br>
    Age: <INPUT type = "text" name = "Age"/><br>
    <INPUT type="submit" name = "Submit" value = "Submit"/>
   </FORM>
  </body>
</html> 
```

# wicket - 如何连接检票口中的 2 个文本框？

> ID：12991644
> 
> 赞同：0
> 
> 时间：2012-10-20T18:57:12.353
> 
> 标签：wicket

所以我得到了这两个文本框，我试图将它们连接在一起并在标签中显示结果。我找到了一个示例，并按照示例进行了操作，但是出了点问题。所以也许有人可以看到我做错了什么，因为我刚刚开始并且不明白如何正确地做到这一点。

```
public class HomePage extends WebPage {

    private String fNumber="Big";
    private String sNumber=" text!";
    private String sResult=fNumber+sNumber;

    public HomePage() {

        PropertyModel<String> firstNumber = new PropertyModel<String>(this, "fNumber");
        PropertyModel<String> secondNumber = new PropertyModel<String>(this, "sNumber");

        add(new Label("message", "HelloWorld!"));

        add(new Label("result", sResult));

        Form<?> form = new Form("form");
        form.add(new TextField<String>("firstNumber", firstNumber));
        form.add(new TextField<String>("secondNumber", secondNumber));
        add(form);
    }
} 
```

所以我做了这个

` add(new Label("message", "HelloWorld!"));

```
 add(new Label("result", new Model(numb.getsResult())));

    Form<?> form = new Form("form") ;

    form.add(new TextField<String>("firstNumber", new Model(numb.setfNumber())));
    form.add(new TextField<String>("secondNumber",new Model(numb.setsNumber())));
    add(form);` 
```

我有一个类，它有 3 个字符串字段、getter 和 setter 以及 sii，我已经理解了最后一条评论解释了一些事情，也许有人知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:14:42.473

您需要“重新计算”您的结果。Wicket 方法是为您的标签定义一个模型来进行连接。

```
add(new Label("result", new IModel<String>(){

@Override
public void detach() {
    // do nothing
}

@Override
public String getObject() {
    return fNumber + sNumber;
}

@Override
public void setObject(String object) {
    // do nothing
}
})); 
```

此外，您**必须**使用示例中的 PropertyModel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:31:41.973

要连接两个字符串，我通常使用 StringBuilder：

```
 PropertyModel firstNumber = new PropertyModel(this,"fNumber");
        PropertyModel secondNumber = new PropertyModel(this,"sNumber");
        PropertyModel resultNumber = new PropertyModel(this,"sResult");
        StringBuilder sResult = new StringBuilder((String) firstNumber.getObject());
        sResult.append((String) secondNumber.getObject());
        resultNumber.setObject(sResult.toString()); 
```

另外，请阅读 biziclop 的链接，因为它应该对您有很大帮助。

# ios - Cocos2d：创建 CCRenderTexture 的实例使我的应用程序崩溃，但无法弄清楚如何调试它

> ID：12991649
> 
> 赞同：0
> 
> 时间：2012-10-20T18:57:50.570
> 
> 标签：ios, cocos2d-iphone, textures

编辑（附加测试后的较短版本）： **我只添加了：**

```
 CGSize winSize = [[CCDirector sharedDirector] winSize];
        CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:winSize.width height:winSize.height]; 
```

到我的**游戏项目中的****BulletCache**（有一个 GameScene，其中添加了 BulletCache 的实例），现在应用程序在尝试加载游戏场景实例时确实崩溃了（在此之前我没有遇到此崩溃的问题）。

 **注意：我在 CCRenderTexture 的 init 方法中添加了一个断点，它似乎运行顺利，它必须是 init 之后的东西。

相反，我在 GameScene 的 init 方法中尝试了相同的方法，它不会使应用程序崩溃。同样，如果我将它添加到一个空的 cocos2d-ios helloworld 模板项目中。

因此，在 cocos2d-ios helloworld 模板中，我做了一个额外的测试思考，看看有一个 batchnode 和一个 CCRenderTexture 实例是否存在冲突，并在 helloworldlayer.m init 方法的末尾添加了以下内容：

```
 CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
    [frameCache addSpriteFramesWithFile:@"art1-hd.plist"];
    CCSpriteBatchNode*  spriteBatch = [CCSpriteBatchNode batchNodeWithFile:@"art1-hd.png"];
    [self addChild:spriteBatch];

    CGSize winSize = [[CCDirector sharedDirector] winSize];        
    CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:winSize.width height:winSize.height];
    [self addChild:rt]; 
```

没有崩溃。

关于如何解决这个问题，我没有多少胶水。

编辑：删除了我提到的一个像素完美碰撞项目的原始问题，在那里我找到了 CCRenderTexture

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:28:10.710

也许问题只是原始代码假设每个精灵都使用自己的纹理。现在，如果您有纹理图集，则每个精灵仅从该纹理的较小区域（矩形）进行渲染。您必须使用精灵帧的纹理部分相应地初始化碰撞测试。

总而言之，可以使用精灵帧和纹理图集进行像素完美碰撞检测，但根据碰撞测试的实际实现会更加复杂。**

# php - 从数据库中的字符串重新创建 json 对象

> ID：12991650
> 
> 赞同：0
> 
> 时间：2012-10-20T18:57:54.197
> 
> 标签：php, json

我正在创建一个数据数组，然后在其上使用 json_encode，然后将其存储在我的数据库中。现在，我要做的是从数据库中返回它们并在 foreach 循环中使用它们，但我无法开始工作。

这是它在数据库中的样子：

```
["483","482"] 
```

我希望能够做这样的事情：

```
$json = ["483","482"]; //(note, this would be the value directly from the database)

foreach($json as $photoID)
{
    echo $photoID;
} 
```

我再次尝试使用 json_encode，显然它没有用。它刚刚返回："["483","482"]"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:59:43.797

您应该使用 json_decode 将其返回到 PHP 数组。[json_decode](http://php.net/manual/en/function.json-decode.php)

因此，当您有 php 变量并想要 json 时，请使用 php_encode，如果您想要相反的方式，请使用 json_decode。

编辑：

试试这个例子：

```
// PHP Array
$array = array(483, 482);

var_export($array);
echo "<br />";

// Goes into JSON
$json = json_encode($array);

var_export($json);
echo "<br />";

// And back to PHP array
$backToArray = json_decode($json);

var_export($backToArray);
echo "<br />"; 
```

这将输出：

```
array ( 0 => 483, 1 => 482, )
'[483,482]'
array ( 0 => 483, 1 => 482, ) 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:59:25.340

您是否尝试过[json_decode](http://php.net/manual/en/function.json-decode.php)，它解码一个 json 字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:59:36.947

使用`json_decode($data,TRUE)`，这会给你数组

请参阅工作代码：[http ://codepad.org/HVNOuGmY](http://codepad.org/HVNOuGmY)

```
$c = '["483","482"]';

echo "<pre>";
print_r (json_decode($c,TRUE)); 
```

# android - 从 BroadcastReceiver 启动一个活动的多个实例

> ID：12991652
> 
> 赞同：0
> 
> 时间：2012-10-20T18:58:02.760
> 
> 标签：android, broadcastreceiver, android-activity

我想从中创建一个活动的多个实例`BroadcastReceiver`，该活动包含一个`AlertDialog`，目前我为此目的使用以下代码：

```
 Intent intent = new Intent(this, MultipleInstanceActivity.calss);
 intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 context.startActivity(intent); 
```

在清单文件中，`android:launchMode="standard"`我认为这 `FLAG_ACTIVITY_NEW_TASK`会导致`android:launchMode="standard"`更改为`android:launchMode="singleInstance"`或某些东西。我无法创建此活动的多个实例。我也试过用`FLAG_ACTIVITY_MULTIPLE_TASK`，但没用。

我创建了一个`PreferenceActivity`，真正让我困惑的是，当它`PreferenceActivity`打开时，我的应用程序会创建多个对话框，即多个实例，上面有不同的数据。但是当它没有打开时，我的应用程序不会创建多个实例只是为了明确，它不会打开另一个对话框。Logcat 没有给出任何警告或错误。

### 我的问题：

1.  如何创建一个活动的多个实例 `BroadcastReceiver`？

2.  有人可以解释一下在第二种情况下发生了什么，即`PreferenceActivity`为什么要创建多个实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:51:07.303

我遇到了和你在这里一样的问题，我通过使用 FLAG_ACTIVITY_NEW_TASK 和 FLAG_ACTIVITY_MULTIPLE_TASK 解决了这个问题。

```
Intent intent = new Intent(context, YourActivityClass.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK).addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
context.startActivity(intent); 
```

希望这对你也有效。

# c# - 刷新 Windows 窗体应用程序

> ID：12991653
> 
> 赞同：2
> 
> 时间：2012-10-20T18:58:12.837
> 
> 标签：c#, winforms

我有两个窗体应用程序。在第一个应用程序中，我有一个名为“请求”的按钮。如果我按下“请求”按钮，同一应用程序中的 datagriview 中的数据应该进入数据库并在另一个应用程序中显示通知.我已经成功了。我需要的是保持第二个窗体应用程序每 5 分钟刷新一次。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T14:08:17.157

您可以执行这些工作以每 5 分钟设置一次自动刷新，但我不明白您的问题！

1.  添加计时器
2.  将间隔更改为 300000
3.  双击表格并写入：

`timer1.Start(); //Replace your timer name instead of "timer1"`

4.  双击 Timer 并写入：

    `this.Refresh();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:08:48.883

我不清楚你的问题是什么，但如果我做得对（你想在你的第二个应用程序中引用一个表单，它会通知你数据更新）然后在你的表单的某个地方放置一个计时器控件（你想要引用的表单) 并将其持续时间设置为 5 秒后，您可以在表单的刻度事件中编写刷新逻辑。

# c++ - time_t 的 C++ Builder 错误“预期类型名称”

> ID：12991658
> 
> 赞同：0
> 
> 时间：2012-10-20T18:58:39.630
> 
> 标签：c++, api, c++builder, c++builder-2010

我有一行源代码：

```
time_t l1_QuoteTime; 
```

我收到以下错误：

```
[BCC32 Error] QuoteDefs.h(18): E2303 Type name expected
  Full parser context
    Unit1.cpp(7): #include api\dasapi.h
    dasapi.h(13): #include api\QuoteDefs.h
    QuoteDefs.h(9): class st_L1Quotes 
```

我已经包括`<time.h>`. 我在这里想念什么？

* * *

代码：

```
class st_L1Quotes
{
public:
    char secsym[10];
    char PrimExch;
    int mstatus;
    double l1_BidPrice;
    int l1_BidSize;
    double l1_AskPrice;
    int l1_AskSize;
    time_t l1_QuoteTime;
    double l1_lastPrice;
    double l1_todayhigh;
    double l1_todaylow;
    double l1_todayclose;
    int l1_volume;
    double l1_yclose;
    double l1_todayopen;
    double l1_LastBidPrice;
    // this is used for show up/down arrow for NASDAQ NMS stocks;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:43:56.640

标题在哪里`<time.h>`（应该`<ctime>`）包含在哪里？`"api/dasapi.h"`

实际上，`QuoteDefs.h`标头可能应该是`#include`其中之一`<time.h>`或`<ctime>`本身，因为除非存在该包含，否则不能使用它。我可以看到我`time_t`格式化的代码片段中的第 11 行如何在您的代码格式中的第 9 行，但是没有空间用于标题保护防护或必要的`#include`.

一般提示：

*   标头应该是自包含的和幂等的。

自包含意味着您应该能够编写：

```
#include "header.h" 
```

在文件的顶部，代码应该可以干净地编译。

幂等意味着标题是否包含两次都无关紧要。通常，这不会直接完成。而是源将直接包含标题，而其他一些标题也将间接包含标题（或其他两个标题将间接包含它）。想想如果你只能包含`<stdio.h>`或`<iostream>`一次，那将是多么令人讨厌！

您可以通过编写以下代码来测试幂等性：

```
#include "header.h"
#include "header.h" 
```

在文件的顶部，代码应该可以干净地编译。

我什至有一个脚本调用`chkhdr`来自动化测试：

```
#!/bin/ksh
#
# @(#)$Id: chkhdr.sh,v 1.3 2011/07/25 07:09:49 jleffler Exp $
#
# Check whether a header can be compiled standalone

tmp=chkhdr-$$
trap 'rm -f $tmp.?; exit 1' 0 1 2 3 13 15

cat >$tmp.c <<EOF
#include HEADER /* Check self-containment */
#include HEADER /* Check idempotency */
int main(void){return 0;}
EOF

options=
for file in "$@"
do
    case "$file" in
    (-*)    options="$options $file";;
    (*)     echo "$file:"
            ${CC:-gcc} $options -DHEADER="\"$file\"" -c $tmp.c
            ;;
    esac
done

rm -f $tmp.?
trap 0 
```

# asp.net-mvc - 找不到请求的 .Net Framework 数据提供程序。带有实体框架的 MVC 4

> ID：12991660
> 
> 赞同：-1
> 
> 时间：2012-10-20T18:59:09.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, sql-server-2008, entity-framework-4

我在安装了 VS2010 SP1 的机器上使用 MVC 4。我收到以下错误

找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

我的 WebConfig 看起来像这样

```
 <connectionStrings>
    <add name="BuildEntities" connectionString="metadata=res://*/Entity.Build.csdl|res://*/Entity.Build.ssdl|res://*/Entity.Build.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=www.xxxx.com,8754;Initial Catalog=xxxx;Persist Security Info=True;User ID=xxx;Password=xxxx;MultipleActiveResultSets=True&quot;"
         providerName="System.Data.EntityClient" />
 </connectionStrings> 
```

我的腿上安装了 SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:17:51.373

确保您已在解决方案中安装了对 Entity Framework dll 的引用。

# firefox - 同位素 cssHooks 覆盖 jQuery.transit cssHooks

> ID：12991661
> 
> 赞同：4
> 
> 时间：2012-10-20T18:59:10.463
> 
> 标签：firefox, jquery-plugins, css-transitions, jquery-isotope

我有一个奇怪的问题，我找不到任何简单的解决方案。在同一个文档中使用`isotope`Plugin 和`jQuery.transit`Plugin，会使一些`jQuery.transit`插件支持的 css3 过渡变得不可用（仅在 FF16 中）。

看起来`$.cssHooks`同位素中的功能破坏了`cssHooks`其他插件的功能。

如果我在 isotope.js 中禁用第 216 行

```
setIsoTransform( elem, 'scale', value ); 
```

在这个函数中：

```
$.cssHooks.scale = {
  set: function( elem, value ) {
    // uncomment this bit if you want to properly parse strings
    // if ( typeof value === 'string' ) {
    //   value = parseFloat( value );
    // }
   // alert(elem+"  "+value)
    setIsoTransform( elem, 'scale', value );
  },
  get: function( elem, computed ) {
    var transform = $.data( elem, 'isoTransform' );
    return transform && transform.scale ? transform.scale : 1;
  }
}; 
```

比`cssHooks`jQuery transit 中的函数效果更好。（在这种情况下，Isotope 的缩放功能不再起作用。）

我不明白为什么同位素会以`cssHooks`这种方式扩展，以及为什么这会影响页面上的任何其他对象，而不仅仅是应该通过同位素管理的元素。

我希望你能给我一个好的方向，或者一些更新。

干杯，

主题打卡

# ruby-on-rails - 无法使用代理选项安装 gem

> ID：12991665
> 
> 赞同：1
> 
> 时间：2012-10-20T18:59:27.507
> 
> 标签：ruby-on-rails, ruby, gem, installation, ubuntu-12.04

试图解决这个[问题](https://askubuntu.com/questions/203632/could-not-find-a-valid-gem-rails-0-in-any-repository)我有一个解决方案告诉安装 gem 时使用[代理选项会有所帮助。](http://webcache.googleusercontent.com/search?q=cache:oAIJRRSLzooJ:docs.rubygems.org/read/chapter/13%20&cd=1&hl=bg&ct=clnk&gl=bg)

我正在执行以下行：

```
sudo gem install rails --http-proxy=http://rubygems.org/ 
```

但它给了我同样的错误：

```
ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
ERROR:  Possible alternatives: rails 
```

谁能告诉我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:03:38.110

HTTP代理不是rubygems ...如果您使用代理，那么...您必须放置自己的代理...如果您没有代理...所以不要放置http-proxy ... =）

首先做 REALLY_GEM_UPDATE_SYSTEM=1 sudo gem update --system

须藤宝石安装导轨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:28:43.647

在这两个问题中 - 也是来自的问题 - Ruby 是由 Synaptic、Aptitude 等包管理器安装的。类似 Debian 的操作系统在不使用包管理器的情况下严格安装 gems。您可以使用 REALLY_GEM_UPDATE_SYSTEM 安装 gem，但不推荐：

```
gem install rails REALLY_GEM_UPDATE_SYSTEM=true 
```

相反，您应该更喜欢使用[RVM](http://rvm.io)或[rbenv](https://github.com/sstephenson/rbenv)来摆脱基于包管理器的安装

# android - 将 avahi 编译到 Android NDK 项目中的问题

> ID：12991668
> 
> 赞同：2
> 
> 时间：2012-10-20T18:59:40.717
> 
> 标签：android, android-ndk, zeroconf, avahi

在过去的几天里，我一直在尝试将 avahi 构建到静态或共享库中以与现有的 Android NDK 项目一起使用。

我们在 App and Play 商店中有一些游戏，我的任务是让多人游戏在 Android 版本中运行。具体来说，该任务涉及替换 Bonjour 组件，以便这些游戏可以通过 zeroconf 相互连接。

研究似乎表明 avahi 是我们正在寻找的库，但在这一点上，我对任何可行的方法都持开放态度！

我希望这里的某个人可以帮助我进行 avahi 编译或建议另一个更合适（且更易于安装）的库。

项目使用 android-ndk-r8b 并使用命令行（不是 eclipse）在 OSX 10.7.4 上构建

从这里获得最新的 Avahi 源： [http ://www.linuxfromscratch.org/blfs/view/svn/basicnet/avahi.html](http://www.linuxfromscratch.org/blfs/view/svn/basicnet/avahi.html)

自制了所有必要的库，以使 ./configure 无错误地运行。

```
./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --disable-static --disable-mono --disable-monodoc  --disable-gdbm --disable-libdaemon --disable-nls --disable-gtk --disable-gtk3 --disable-python --disable-qt3 --disable-qt4 --enable-core-docs --with-distro=none 
```

./configure 运行时没有明显的危险信号。

make 导致此编译错误：

```
socket.c: In function 'ipv6_pktinfo':
socket.c:271: warning: unused variable 'yes' [-Wunused-variable]
socket.c:270: warning: unused parameter 'fd' [-Wunused-parameter]
socket.c: In function 'avahi_send_dns_packet_ipv6':
socket.c:609: error: 'IPV6_PKTINFO' undeclared (first use in this function)
socket.c:609: error: (Each undeclared identifier is reported only once
socket.c:609: error: for each function it appears in.)
socket.c: In function 'avahi_recv_dns_packet_ipv6':
socket.c:869: error: 'IPV6_HOPLIMIT' undeclared (first use in this function)
socket.c:878: error: 'IPV6_PKTINFO' undeclared (first use in this function)
make[2]: *** [libavahi_core_la-socket.lo] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

认为它不是针对 android-ndk-r8b 库或查找 ipv6.h 或其他东西构建的。

检查了我的 .bash_profile.sh 文件：

```
export PATH=/Users/Muy01/Projects/Development/Android/android-sdks/tools/:$PATH
export PATH=/Users/Muy01/Projects/Development/Android/android-sdks/platform-tools/:$PATH
export PATH=/Users/Muy01/Projects/Development/Android/android-ndk-r8b/:$PATH 
```

将 --host=arm-linux-androideabi 添加到 ./configure 参数列表中，导致此错误：

```
checking host system type... Invalid configuration `arm-linux-androideabi': system `androideabi' not recognized 
```

无法弄清楚如何获取可用主机系统类型的列表，因此改变了方向，并决定尝试通过 Android.mk 文件构建静态库。

发现这篇关于创建适当的 Android.mk 文件的帖子： [can't compile avahi on android](https://stackoverflow.com/questions/12618829/cant-compile-avahi-on-android)

意识到我在所有子目录中都没有 Android.mk 文件。

研究、下载、构建了 Androgenizer 以尝试将所有 Makefile.am 文件转换为 Android.mk 文件。 [http://cgit.collabora.com/git/user/derek/androgenizer.git/](http://cgit.collabora.com/git/user/derek/androgenizer.git/)

无法弄清楚或找到有关如何做到这一点的信息=/

决定尝试创建我自己的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
ROOT_LOCAL_PATH :=$(call my-dir)

#Build avahi into a static lib
include $(CLEAR_VARS)
AVAHI_TOP := $(ROOT_LOCAL_PATH)/../avahi-0.6.31

MY_SOURCES := $(wildcard $(AVAHI_TOP)/avahi-core/*.c*)
MY_SOURCES += $(wildcard $(AVAHI_TOP)/avahi-common/*.c*)
LOCAL_C_INCLUDES := $(AVAHI_TOP)
LOCAL_SRC_FILES := $(MY_SOURCES:$(LOCAL_PATH)%=%)

LOCAL_MODULE    := avahi

include $(BUILD_STATIC_LIBRARY) 
```

导致 avahi-core/iface-linux.c:33:0 的编译时错误：

```
/avahi-0.6.31/avahi-core/iface-linux.h:27:8: Redefinition of 'struct AvahiInterfaceMonitorOSDep'
/avahi-0.6.31/avahi-core/iface.h:46:16: Originally defined here
/avahi-0.6.31/avahi-core/iface-linux.h:33:9: Redeclaration of enumerator 'LIST_IFACE'
/avahi-0.6.31/avahi-core/iface.h:52:9: Previous definition of 'LIST_IFACE' was here
/avahi-0.6.31/avahi-core/iface-linux.h:34:9: Redeclaration of enumerator 'LIST_ADDR'
/avahi-0.6.31/avahi-core/iface.h:53:9: Previous definition of 'LIST_ADDR' was here
/avahi-0.6.31/avahi-core/iface-linux.h:35:9: Redeclaration of enumerator 'LIST_DONE'
/avahi-0.6.31/avahi-core/iface.h:54:9: Previous definition of 'LIST_DONE' was here
/jni//../avahi-0.6.31/avahi-core/iface-linux.c: In function 'netlink_callback': 
```

现在我几乎被困住了。

我尝试#if 0'ing iface-linux.c 和 h 文件导致一系列其他错误，所以可能是个坏主意。

认为这可能是我使用 ./configure 命令做错了什么？也许我的 Android.mk 文件有问题？

我认为这一定是很多开发人员正在处理的事情，所以我可能遗漏了一些东西，因为我似乎无法通过谷歌找到任何好的信息。

任何帮助将非常感激！我也已将其发送到 avhi 邮件列表，如果我在那里得到回复，我将在此处发布以供后代使用。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:52:04.067

我将在这里跟进对我有用的解决方案。

我的解决方案是使用 JMDNS 而不是 Avahi。

Avahi 邮件列表上的流量不多。

JMDNS 有可用的工作示例。JMDNS 花了我大约 4 个小时在我的 NDK 环境中进行设置，并花了大约一天的时间来解决一些“问题”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:08:43.347

1.  `tar avahi-0.6.31`
2.  `patch -p1 < 0001-Add-Android-support.patch patch -p1 < 0002-Add-uninstalled.pc.in-files.patch`
3.  `cd avahi-0.6.31 ./configure --sysconfdir=/etc --localstatedir=/var make`
4.  cd 子目录：`make Android.mk`

然后，您将`Android.mk`在所有子目录中看到。

```
ndk-build V=1 NDK_LOG=2 APP_ABI="armeabi armeabi-v7a" 
```

# coronasdk - 让角色跳跃

> ID：12991670
> 
> 赞同：0
> 
> 时间：2012-10-20T18:59:57.907
> 
> 标签：coronasdk

我已经使用纹理打包器创建了一个精灵表（青蛙跳跃），当我点击精灵时，我试图让角色向前跳跃。我创建了一个事件侦听器，当我单击精灵时，play() 方法会为精灵设置动画。但是我不能让精灵使用 applyForce 或 setLinearVelocity 方法向前跳转？这是我的代码：

```
require("physics")
local sprite = require "sprite"
local sheetData = require "myFrogs"  -- name of file created using texturepacker

physics.start()
physics.setGravity(0,1)
local _w = display.contentWidth/2
local _h = display.contentHeight/2

local spriteData = sheetData.getSpriteSheetData()
local spriteSheet = sprite.newSpriteSheetFromData("images/myFrogs.png", spriteData)
local spriteSet = sprite.newSpriteSet(spriteSheet, 1, 7) number of images in spritesheet
local frogSprite = sprite.newSprite(spriteSet)
frogSprite.x = _w
frogSprite.y = _h

physics.addBody(frogSprite, "static", {friction=1.0,density=1.0,bounce=0.3, radius=35})
frogSprite.isFixedRotation = true

local function frogJump(event)
if(event.phase == "ended") then  
    --frogSprite:applyForce() -- should I use this method
    --frogSprite:setLinearVelocity() -- or this method
     frogSprite:play() 

end    
end
frogSprite:addEventListener("touch", frogJump) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:15:56.513

您将青蛙的身体设置为静态 - 切换到动态，它会使用其中任何一种方法跳跃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T09:37:38.457

通过使青蛙身体静止，它不会受到冲动或力的影响，因此它应该是 Dynamics

Body:applyForce( xForce, yForce, bodyX, bodyY ) <- 将力应用于您的质心，即您设置的参考点。
Body:setLinearVelocity(xVelocity, yVelocity) <- 它将以每秒像素的形式提供数据速度。

# python - Python：方法中对象类型的注释

> ID：12991671
> 
> 赞同：0
> 
> 时间：2012-10-20T19:00:00.047
> 
> 标签：python, python-2.7

> **可能重复：**
> [如何检查函数的参数？](https://stackoverflow.com/questions/3247833/how-to-check-arguments-of-the-function)

可能这是重复的问题..对不起..

让我们看下面的例子：

```
class ClassA(object):
     pass
class ClassB(object):
     pass

def foo(a, b):
    if not isinstance(a, ClassA):
         raise ValueError("1st agrument should be instance of ClassA")
    if not isinstance(b, ClassB):
         raise ValueError("2nd agrument should be instance of ClassB")
    print(a)
    print(b) 
```

2.7 python 中是否有任何注释或`__future__`模块中的任何东西来注释方法以检查输入变量？

写这些`if not isinstance`让我很生气：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:11:13.700

没有内置的方法来定义函数的参数类型——这部分是设计使然——而不是在传递 classB 时出现“预期的 classA”错误，而是在查找属性时出现错误。然后，您可以在 classB 上定义此属性，并且该函数将使用它最初不是为它设计的类型。

有这样的大小，[这里有一个如何编写你所追求的装饰器的例子](http://code.activestate.com/recipes/454322-type-checking-decorator/)。

# parsing - 使用 OCaml 构建一个简单的编译器

> ID：12991674
> 
> 赞同：1
> 
> 时间：2012-10-20T19:00:12.890
> 
> 标签：parsing, compiler-construction, ocaml

我花了一天时间尝试一个简单的编译器程序，但仍然难以理解这个函数。

```
let rec expression tokens = 
  let (trm, tokens') = term tokens in 
```

这里 so (trm, tokens') 是一个元组， term 是一个函数还是一个变量？元组如何=两个变量或一个函数

```
 expTail trm tokens'

and
  expTail trm tokens = 
  match tokens with
    Tokenizer.PlusTok::tokens' ->
      let (trm', tokens'') = term tokens' in expTail (Plus(trm, trm')) tokens''

  | Tokenizer.MinusTok::tokens' ->
      let (trm', tokens'') = term tokens' in expTail (Minus(trm, trm')) tokens''

  |  _ -> (trm, tokens) 
```

这条线是什么意思？它似乎没有调用任何东西。为什么现在是 (trm, tokens) 而不是 (trm', tokens'')

```
and
  term tokens = let (trm, tokens') = factor tokens in termTail trm tokens' 
```

也不确定这条线是什么意思。

```
and
  termTail trm tokens =
  match tokens with
    Tokenizer.TimesTok::tokens' -> 
      let (trm', tokens'') = factor tokens' in termTail (Times(trm, trm')) tokens''

  | Tokenizer.DivTok::tokens' -> 
      let (trm', tokens'') = factor tokens' in termTail (Div(trm, trm')) tokens''

  | Tokenizer.ModTok::tokens' -> 
      let (trm', tokens'') = factor tokens' in termTail (Mod(trm, trm')) tokens''

  | _ -> (trm, tokens)

and
  factor tokens =
  match tokens with
  Tokenizer.LParenTok::tokens' -> 
  let (expr, tokens'') = expression tokens' in
      (match tokens'' with
      Tokenizer.RParenTok::tokens''' -> (expr, tokens''')
  | _ -> raise (Syntax "Bad factor, failed to find )\n")) 

  | (Tokenizer.IntTok i)::tokens' -> (Bits i,  tokens')

  | _ -> raise (Syntax ("Bad factor.")) 
```

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:21:48.267

这些都是非常基本的问题。从 OCaml 教程开始可能会很好（也许请参阅之前的 SO 问题[OCaml 资源？](https://stackoverflow.com/questions/2073436/ocaml-resources)）。

一些答案：

```
let (trm, tokens') = term tokens 
```

这将调用一个名为`term`传递的函数`tokens`作为参数。结果是一对。您将通过 name 引用对的第一个元素，通过 name 引用第二个`trm`元素`tokens'`。

```
and
   term tokens = let (trm, tokens') = factor tokens in termTail trm tokens' 
```

这些是定义`term`上面调用的函数的行。

```
 |  _ -> (trm, tokens) 
```

这是模式匹配的默认情况。如果其他两种模式都不匹配，则此替代方案给出该值。这基本上是一个值，而不是函数调用。然而，从某种意义上说，其中涉及到一个函数——你*正在构建*一对。逗号 ( `,`) 用作构造对的好语法。（括号实际上是可选的，尽管在风格上我喜欢看到它们。）

名称`tokens`和`tokens'`只是不同的名称。它们之间没有内在的联系。在这种默认情况下，没有定义命名`tokens'`的值。所以这里不可能引用这样的值。按照惯例，在名称末尾添加“撇号”用于表示新值是从旧值派生而来的。

# objective-c - ios、UI 行为、按钮

> ID：12991675
> 
> 赞同：0
> 
> 时间：2012-10-20T19:00:13.170
> 
> 标签：objective-c, ios

我是 ios 新手，来自 C# 中繁重的 UI 工作。我有一个应用程序，我想根据我的代码中的一些逻辑来控制哪些按钮被禁用。为此，我创建了一个小方法来处理按钮的状态，如下所示：

```
-(void)activateUI:(BOOL *)activate {

    [ validateDataBtn setEnabled: *activate ] ;
    [ modifyCompDataBtn setEnabled: *activate ] ;
    [ saveCompDataBtn setEnabled: *activate ] ;
} 
```

所有这些 IBOutlets 都绑定到 UI 按钮，如下所示：

```
__weak IBOutlet UIButton *saveCompDataBtn;
__weak IBOutlet UIButton *modifyCompDataBtn;
__weak IBOutlet UIButton *validateDataBtn; 
```

当我运行应用程序时，我的方法的第一行出现异常：

```
[ validateDataBtn setEnabled: *activate ] ; 
```

错误是 EXC_BAD_ACCESS（代码 = 2，地址 = 0X0）我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:32:20.550

为什么不

```
- (void)activateUI:(BOOL)activate {
    [validateDataButton setEnabled:activate];
    // etc...
} 
```

我不确定为什么需要使用指向`BOOL`激活的指针...

编辑：

作为标量与指针访问的说明：

```
#import <Foundation/Foundation.h>
#import <AppKit/AppKit.h>

@interface Foo:NSObject
@property (nonatomic, retain) NSTextField *field;
- (void)activateUI:(BOOL *)activate;
- (void)activateUIScalar:(BOOL)activate;
@end

@implementation Foo
@synthesize field;

- (void)activateUI:(BOOL *)activate {
    NSLog(@"%s - setting to: %d",__FUNCTION__,*activate);
    [[self field] setEnabled:*activate];
}

- (void)activateUIScalar:(BOOL)activate {
    NSLog(@"%s - setting to %d (scalar)",__FUNCTION__, activate);
    [[self field] setEnabled:activate];
}

@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    BOOL flag = NO;
    Foo *myFoo = [Foo new];
    [myFoo activateUI:&flag];

    flag = YES;
    [myFoo activateUI:&flag];

    //  now using scalar (99.999% of the time the right way)
    [myFoo activateUIScalar:YES];
    [myFoo activateUIScalar:NO];

    [myFoo release];
    [p release];
} 
```

将以下内容打印到控制台：

```
2012-10-20 14:49:14.228 Untitled 4[27444:707] -[Foo activateUI:] - setting to: 0
2012-10-20 14:49:14.230 Untitled 4[27444:707] -[Foo activateUI:] - setting to: 1
2012-10-20 14:49:14.230 Untitled 4[27444:707] -[Foo activateUIScalar:] - setting to 1 (scalar)
2012-10-20 14:49:14.231 Untitled 4[27444:707] -[Foo activateUIScalar:] - setting to 0 (scalar) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:34:45.380

编辑：我的，我的。我才意识到我把这个搞砸了。

不正确：~~首先，您不应该使用`BOOL *`，如果您曾经使用过，`BOOL *`您会将其引用为`&activate`，而不是`*activate`。C/Objective-C 中的`*`表示变量是指针；它包含一个内存块的地址。`&`取消引用指针以访问另一侧的值。~~

正确： An`*`表示参数是一个指针，也用于引用一个指针。变量前面的an`&`表示要使用该变量在内存中的地址。我把它们混在一起了。这意味着您的原始代码是正确的；问题是您可能使用 调用它`[self activateUI:someBOOL]`，它传递一个 BOOL，然后由于`*`.

您可能会感到困惑，因为传递对象是`<object type> *`因为用于处理对象实例的所有变量都是指针。然而，BOOL 被`typedef`编辑为`int`，这是原始的，因此`*`不需要 。你的方法应该是：

```
- (void) activateUI:(BOOL)activate {
    [validateDataBtn setEnabled: activate];
    [modifyCompDataBtn setEnabled: activate];
    [saveCompDataBtn setEnabled: activate];
}

//called like this: [self activateUI: someBOOL]; 
```

如果您真的打算将指向 a 的指针`BOOL`作为参数传递，请使用您最初编写的内容，但您需要像这样调用它：

```
[self activateUI: &someBOOL]; 
```

如果您声明该方法获取指向`BOOL`( `BOOL *`) 的指针，并在方法主体 ( `*someBOOL`) 内取消引用它，则需要将地址传递给`BOOL`( `&someBOOL`)，而不是`BOOL`本身。如果将方法声明为取`BOOL`自身（just `BOOL`），并直接在方法体（`someBOOL`）中使用，则需要传递`BOOL`自身（`someBOOL`）。

# google-chrome - 谷歌浏览器简单代码注入

> ID：12991678
> 
> 赞同：0
> 
> 时间：2012-10-20T19:00:43.373
> 
> 标签：google-chrome

在 chrome 扩展上，我试图在所有网站上添加一个 iframe，

目前我的manifesjt.json

```
 {
  "name": "Testinjection",
  "version": "1.0.0",
  "manifest_version": 2,
  "description": "Testinjection",
  "icons": {
    "48" : "sample-48.png",
    "128" : "sample-128.png"
  },
  "content_scripts": [
    {
      "matches": [ "http://*/*", "https://*/*" ],
      "js" : ["contentscript.js"]
    }
  ]
} 
```

和 contentscript.js：

```
document.write("<iframe src=\"http:\/\/www.ask.com\" width=\"100%\" height=\"40px\"><\/iframe>"); 
```

问题是这段代码正在替换当前访问的页面，而不是将此代码添加到顶部，

我可以通过什么方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:05:56.993

在页面加载后使用`document.write`将覆盖页面。您应该改为构造一个元素：

```
var iframe = document.createElement('iframe');
iframe.src = 'http://www.ask.com/';
iframe.width = '100%';
iframe.height = '40px';
iframe.style.position = 'absolute';  // Add this

document.body.insertBefore(iframe, document.body.firstChild); 
```

**演示：http: [//jsfiddle.net/XrqvG/](http://jsfiddle.net/XrqvG/)**

# asp.net - 设置 Visual Studio 内置 SQL 文件到 ASP.Net 的连接字符串？

> ID：12991684
> 
> 赞同：0
> 
> 时间：2012-10-20T19:01:46.167
> 
> 标签：asp.net, sql, visual-studio-2010

我将数据库文件添加到 Visual Studio 的内置 sql 服务器中，并且我也有它的连接字符串，但我很困惑如何将此连接字符串添加到 web.config 这是我尝试将连接字符串添加到下面的代码：

```
<connectionStrings>
   <add name="myFirstConnectionString" connectionString="Data Source= .\SQLEXPRESS;AttachDbFilename="C:\Users\Ahdus\Desktop\First Task\First Task\MyFirstTask.mdf"; Integrated Security=True;Connect Timeout=30;User Instance=TrueproviderName="System.Data.SqlClient" />
  </connectionStrings> 
```

我很困惑如何将我的 Visual Studio 内置数据库文件的连接字符串添加到 web.config。请帮助我，因为我是 asp.net 的新手，请忽略我的提问方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:13:25.207

为了使您的连接字符串与您给出的路径一起工作，它应该看起来像这样：

视觉工作室 2012 (SQL Server 2012):

```
<connectionStrings>
  <add name="myFirstConnectionString" 
       connectionString="Data Source=(LocalDB)\v11.0;Integrated Security=True;AttachDBFilename=&quot;C:\Users\Ahdus\Desktop\First Task\First Task\MyFirstTask.mdf&quot;;Integrated Security=True" 
       providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

视觉工作室 2010 (SQL Server 2010)：

```
<connectionStrings>
  <add name="myFirstConnectionString"
       connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=&quot;C:\Users\Ahdus\Desktop\First Task\First Task\MyFirstTask.mdf&quot;;User Instance=true"
       providerName="System.Data.SqlClient" />
</connectionStrings> 
```

但是您应该考虑将数据库文件移动到项目中的 App_Data 文件夹中，然后`AttachDBFilename=|DataDirectory|MyFirstTask.mdf`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:09:35.587

您应该将 .mdf 放在 App_Data 文件夹中，然后您可以使用它

```
<connectionStrings>

       <add name="myFirstConnectionString" 
              connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|MyFirstTask.mdf;
              User Instance=true" providerName="System.Data.SqlClient" />

</connectionStrings> 
```

使用`C:\Users\Ahdus\Desktop\First Task\First Task\MyFirstTask.mdf`，如果您将应用程序移动到另一台机器，则该路径可能不存在

`|DataDirectory|`映射到您的应用程序`App_Data`文件夹

# ios - Air For iOS App Store 发布问题

> ID：12991685
> 
> 赞同：0
> 
> 时间：2012-10-20T19:02:21.103
> 
> 标签：ios, actionscript-3

我在从 Flash CS6、Air For iOS 发布到 App Store 时遇到问题。每次我点击发布、部署 Apple App Store 和所有这些好东西时，我从来没有得到一个 Payload 文件夹，这意味着没有 .app，意味着没有 CodeSignature，等有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:46:19.950

Flash CS6 生成一个[.ipa 文件](http://en.wikipedia.org/wiki/.ipa_%28file_extension%29)。ipa 文件实际上只是一个 zip 文件，其中包含应用程序的 Payload 文件夹。您可以将扩展名重命名为 .zip 并解压缩以自己查看。

可以使用“Application Loader”将 ipa 文件提交到 App Store，这是 Mac 上 Xcode 附带的实用程序。

# php - 为什么 PHP $_SERVER 变量中没有 HTTP 响应代码？

> ID：12991686
> 
> 赞同：2
> 
> 时间：2012-10-20T19:02:20.723
> 
> 标签：php, http-headers

为什么 PHP [$_SERVER](http://php.net/manual/en/reserved.variables.server.php)变量数组中没有 HTTP 响应代码（或 HTTP 响应标头的第一行）？

它是对服务器技术工作方式的限制吗？PHP 的限制？使用 HTTP 协议？或者，也许我完全不想要 HTTP 响应代码？;)

就我而言，我正在使用 Apache2。

只是好奇。

**编辑 1：**在发送服务器响应**之前**，我正在询问[Apache 的 LogFormat 指令](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#logformat)使用的`%>s`（[LAST 请求的状态）等价物。](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats)

 ****编辑 2：**答案很有意义，但问题仍然存在，为什么我不能获得服务器的内部*工作*响应代码？如果我设置`ErrorDocument 403 /index.php`，我可以使用 访问响应代码`$_SERVER['REDIRECT_STATUS']`。没有更简单的方法吗？我猜不是。但是，我仍然从您的回答中学到了很多东西。这说得通。

还有[apache_response_headers()](http://www.php.net/manual/en/function.apache-response-headers.php)，但仍然不喜欢工作响应代码/第一行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:04:36.213

因为 HTTP 响应是发送到客户端的东西，您可以使用该`header`函数在 PHP 中更改它。它不是在您的 PHP 中自动发生的，而是在将其交给 PHP 之前由服务器（即 apache）处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:07:47.303

$_SERVER 包含 http 请求的所有数据、标头以及其他信息，例如当前文件的路径。但不是响应，您的脚本旨在创建响应，而不是访问它。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:37:12.493

如果您不使用 header 函数设置它，状态码将始终`200`用于成功响应，如果发生致命错误，php 可能会将其更改为`500`(Internal Server Error)。

几乎所有其他状态都由网络服务器处理，而无需将您的请求传递给您的脚本。**

# android - 将鼠标悬停在android中的按钮上

> ID：12991689
> 
> 赞同：1
> 
> 时间：2012-10-20T19:02:37.927
> 
> 标签：android

当用户单击按钮时，是否可以更改按钮的外观？例如更改颜色或使其变暗？就像在 ASP.net 中使用 CSS 将鼠标悬停在单词或链接上一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:55:19.203

尝试这个。将此保存为可绘制的 xml 资源并将其设置为按钮的背景。请探索 Selector 类的其他选项。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="false"><shape>
        <gradient android:angle="270" android:endColor="#BB908C8B" android:startColor="#BB908C8B" />
        <corners android:bottomLeftRadius="9dp" android:topRightRadius="9dp" />
    </shape></item>
    <item android:state_pressed="true"><shape>
        <gradient android:angle="270" android:endColor="#BB54504F" android:startColor="#BB54504F" />
        <corners android:bottomLeftRadius="9dp" android:topRightRadius="9dp" />
    </shape></item>
</selector> 
```

查看链接[http://android.onyou.ch/2011/01/25/simple-custom-button-using-a-selector-xml-layout/](http://android.onyou.ch/2011/01/25/simple-custom-button-using-a-selector-xml-layout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:04:28.610

我相信[State List](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)是您正在寻找的。

# c# - 为什么带有终结器的对象即使没有根也不会被收集？

> ID：12991692
> 
> 赞同：6
> 
> 时间：2012-10-20T19:03:17.223
> 
> 标签：c#, .net, garbage-collection

我遇到了一个可终结对象的问题，`GC`如果`Dispose()`没有显式调用，这些对象不会被收集。我知道`Dispose()`如果一个对象实现了我应该显式调用`IDisposable`，但我一直认为依赖框架是安全的，当一个对象变得未引用时，它可以被收集。

但是在对 windbg/sos/sosex 进行了一些实验后，我发现如果没有为可终结的对象调用**GC.SuppressFinalize()**，即使它变得无根，它也不会被收集。因此，如果您广泛使用可终结对象（DbConnection、FileStream 等）而不明确地处理它们，您可能会遇到内存消耗过高甚至`OutOfMemoryException`.

这是一个示例应用程序：

```
public class MemoryTest
{
    private HundredMegabyte hundred;

    public void Run()
    {
        Console.WriteLine("ready to attach");
        for (var i = 0; i < 100; i++)
        {
            Console.WriteLine("iteration #{0}", i + 1);
            hundred = new HundredMegabyte();
            Console.WriteLine("{0} object was initialized", hundred);
            Console.ReadKey();
            //hundred.Dispose();
            hundred = null;
        }
    }

    static void Main()
    {
        var test = new MemoryTest();
        test.Run();
    }
}

public class HundredMegabyte : IDisposable
{
    private readonly Megabyte[] megabytes = new Megabyte[100];

    public HundredMegabyte()
    {
        for (var i = 0; i < megabytes.Length; i++)
        {
            megabytes[i] = new Megabyte();
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~HundredMegabyte()
    {
        Dispose(false);
    }

    private void Dispose(bool disposing)
    {
    }

    public override string ToString()
    {
        return String.Format("{0}MB", megabytes.Length);
    }
}

public class Megabyte
{
    private readonly Kilobyte[] kilobytes = new Kilobyte[1024];

    public Megabyte()
    {
        for (var i = 0; i < kilobytes.Length; i++)
        {
            kilobytes[i] = new Kilobyte();
        }
    }
}

public class Kilobyte
{
    private byte[] bytes = new byte[1024];
} 
```

即使经过 10 次迭代，您也会发现内存消耗太高（从 700MB 到 1GB），并且随着更多迭代而变得更高。使用 WinDBG 附加到进程后，您会发现所有大对象都是无根的，但没有收集。

如果您`SuppressFinalize()`显式调用，情况会发生变化：即使在高压下，内存消耗也稳定在 300-400MB 左右，并且 WinDBG 显示没有无根对象，内存是空闲的。

所以问题是：它是框架中的错误吗？有什么合乎逻辑的解释吗？

更多细节：

每次迭代后，windbg 显示：

*   终结队列为空
*   freachable 队列为空
*   第 2 代包含来自先前迭代的对象（数百个）
*   来自先前迭代的对象是无根的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T19:17:18.033

具有终结器的对象的行为方式与缺少终结器的对象不同。

当发生 GC 并且没有调用 SuppressFinalize 时，GC 将无法收集实例，因为它必须执行 Finalizer。因此，终结器被执行，并且对象实例被提升到第 1 代（在第一次 GC 中幸存的对象），即使它已经没有任何活动引用。

第 1 代（和第 2 代）对象被认为是长期存在的，只有在第 1 代 GC 不足以释放足够的内存时才会考虑进行垃圾回收。我认为在你的测试过程中，Gen1 GC 总是足够的。

这种行为对 GC 性能有影响，因为它否定了由多个 générations 带来的优化（您在 gen1 中有短持续时间的对象）。

本质上，拥有一个终结器并且未能阻止 GC 调用它总是会将已经死亡的对象提升到长寿命堆，这不是一件好事。

因此，您应该正确处理您的 IDisposable 对象，并在不需要时避免使用终结器（如有必要，实施 IDisposable 并调用 GC.SuppressFinalize。）

**编辑：** 我没有很好地阅读代码示例：您的数据看起来像是要驻留在大对象堆 (LOH) 中，但实际上并非如此：您有很多包含在树的末尾小字节数组。

将短持续时间对象放在 LOH 中更糟糕，因为它们不会被压缩......因此，如果 CLR 无法找到足够长的空内存段以包含一大块数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:16:54.997

我认为这背后的想法是，当您实现 IDisposable 时，这是因为您正在处理非托管资源，并且需要手动处置您的资源。

如果 GC 要调用 Dispose 或试图摆脱它，它也会刷新非托管的东西，这很可能在其他地方使用，GC 无法知道这一点。

如果 GC 要删除无根对象，您将失去对非托管资源的引用，这将导致内存泄漏。

所以......你被管理了，或者你没有。GC 根本没有好方法来处理未处理的 IDisposables。

# unit-testing - 测试一个功能：还应该测试什么？

> ID：12991702
> 
> 赞同：0
> 
> 时间：2012-10-20T19:05:09.067
> 
> 标签：unit-testing, testing

我正在编写一个接受三个整数输入的函数，并根据三者之间的关系返回一个值或错误。为了测试这一点，我编写了一些测试用例，其中包括测试非法值、整数边界条件（包括溢出）和一些正面测试。我想知道这个简单的功能还应该测试什么？

作为这样一个小功能的测试用例，在不同平台上进行测试是否有意义？此外，测试执行时间是我想作为测试用例添加的另一件事。做静态和动态分析可以成为测试用例的一部分吗？还有什么需要测试的吗？

```
int foo(int a, int b, int c) {
   return a value based on a, b, and c. 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:13:34.873

您提出问题的方式似乎是在进行黑盒测试，即您只知道输入和输出之间的关系，而不知道实现。在这种情况下，您的测试用例应该取决于您对关系的了解，并且我认为您已经测试了这些东西（您没有向我们提供有关关系的详细信息）。

由此看来，您似乎不需要测试平台独立性，但如果您有一个自动化测试套件，那么在不同平台上测试它肯定不是一个坏主意。

现在，如果您有可用的代码，您可以进行白盒测试。通常，您会首先查看您的代码结构，即您可以尝试获得 100% 的分支覆盖率，即代码中的每个分支在测试期间至少运行一次。这样，静态和动态分析可以帮助您找到不同的覆盖度量。

如果您的函数中没有平台相关代码，我不会进行平台独立性测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:09:38.320

sizeof(int) 必须针对特定的编译器进行测试。尽管这看起来微不足道，并且 C 标准指定了 int 的大小，但最好知道所使用的编译器是否是 16 位标准非兼容编译器。只是另一个测试用例。

# c# - 将字符串数组传递给 webservice 方法

> ID：12991703
> 
> 赞同：2
> 
> 时间：2012-10-20T19:05:15.727
> 
> 标签：c#, asp.net, visual-studio-2010, web-services, asmx

我有一个使用这种方法的网络服务：

```
[WebMethod]
public int[] stringTest(string[] tString)
{

    int numberOfStrings = tString.Length;
    int[] returnS = new int[numberOfStrings];
    for (int i = 0; i <= numberOfStrings; i++)
    { 
        returnS[i] = 1;

    }
    return returnS;
} 
```

然后我试图从客户端程序向它传递一个字符串数组，如下所示：

```
var client = new WebServiceSample.WebService1SoapClient();
string[] parameterNames = { "Windsensor","Temperature sensor"};
test = client.stringTest(parameterNames); 
```

但我收到这些错误：

> *'SoapWebServiceClient.WebServiceSample.WebService1SoapClient.stringTest(SoapWebServiceClient.WebServiceSample.ArrayOfString)' 的最佳重载方法匹配有一些无效参数*

和

> *参数 1：无法从 'string[]' 转换为 'SoapWebServiceClient.WebServiceSample.ArrayOfString'*

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:31:44.867

试试这个

```
SoapWebServiceClient.WebServiceSample.ArrayOfString arrString = SoapWebServiceClient.WebServiceSample.ArrayOfString();

arrString.AddRange(parameterNames); 
```

或者

```
arrString.Add(....); //if that exists 
```

检查这些链接

*   [http://forums.silverlight.net/t/105441.aspx/1](http://forums.silverlight.net/t/105441.aspx/1)
*   [我可以停止我的 WCF 生成 ArrayOfString 而不是 string[] 或 List<string>](https://stackoverflow.com/questions/505943/can-i-stop-my-wcf-generating-arrayofstring-instead-of-string-or-liststring)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T14:59:32.073

一个简单的方法是：

在 JavaScript 中构建一个新数组：

```
var myArray = new Array();
myArray.push([value1, value2,...]); 
```

在 C# 中，只需创建一个`ICollection`参数即可获取您的矩阵：

```
[WebMethod(EnableSession = true)]
public MyMethod[] GetMatrixFromJavascript(System.Collections.ICollection myArray)
{ 
   ... 
} 
```

# c# - 如何从 MS Access 在 gridview 中显示数据？

> ID：12991704
> 
> 赞同：0
> 
> 时间：2012-10-20T19:05:17.350
> 
> 标签：c#, asp.net, database, ms-access

我想显示存储在 MS Access 数据库中的用户信息。用户输入他的用户 ID，并在单击按钮时调用以下函数。但没有显示任何数据。我究竟做错了什么 ？

```
System.Data.OleDb.OleDbConnection con;
System.Data.OleDb.OleDbDataAdapter da;

protected void Button1_Click(object sender, EventArgs e)
{        
    con = new System.Data.OleDb.OleDbConnection();
    con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" 
       + "Data Source=C:\\Users\\sam\\Desktop\\mydb.mdb";
    con.Open();
    string sql = "SELECT * From Leave where userid="+Textbox1.Text;
    da = new System.Data.OleDb.OleDbDataAdapter(sql, con);
    DataTable t = new DataTable();
    da.Fill(t);
    GridView1.DataSource = t;
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:42:07.900

你需要打电话`GridView1.DataBind()`

```
 GridView1.DataSource = t;
 GridView1.DataBind(); 
```

只是一个旁注，这是一个很好的做法来包装你的连接`using`

```
using(con = new System.Data.OleDb.OleDbConnection())
{
   con = new System.Data.OleDb.OleDbConnection();
   con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" 
   + "Data Source=C:\\Users\\sam\\Desktop\\mydb.mdb";
   con.Open();
   ...
   ...
} 
```

这可确保您的[连接在使用后得到妥善处理](https://stackoverflow.com/questions/1769358/use-of-using-keyword-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:12:29.297

您应该使用绑定功能：

```
 protected void Button1_Click(object sender, EventArgs e)
    {        
       con = new System.Data.OleDb.OleDbConnection();
       con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" 
       + "Data Source=C:\\Users\\sam\\Desktop\\mydb.mdb";
       con.Open();
       string sql = "SELECT * From Leave where userid="+Textbox1.Text;
       da = new System.Data.OleDb.OleDbDataAdapter(sql, con);
       DataTable t = new DataTable();
       da.Fill(t);
       GridView1.DataSource = t;
       GridView1.DataBind();
       con.Close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:51:51.470

首先，请不要在 SQL 中连接 WHERE 参数。使用参数。其次，在模块顶部添加“使用 System.Data.OleDb”语句，这样您就不必键入以下内容：

```
System.Data.OleDb.OleDbDataAdapter 
```

一遍又一遍地。

试试下面的代码。就个人而言，当我必须使用数据表等时，我更愿意避免所有的 DataAdapter 废话，并使其尽可能简单。

请注意以下代码：

1.  “使用”块。这些将在其中创建的变量放置在它们自己的范围内，并为您处理处置等。

2.  我使用了 OleDb 参数而不是连接标准。这是一种更安全的做事方式，也可以创建更清晰、更易读的代码，尤其是在 WHERE 子句中有多个条件的情况下。

3.  我假设您的 UserID 输入是一个字符串，因为您正在从文本框中获取值。如果它实际上是一个 int 值（例如 MS Access 中的自动递增 id），您将需要使用 int 数据类型。你可能不得不稍微弄乱它。当您仍在弄清楚这些东西时，可能会有些痛苦。但是，使用参数可以提高安全性和可维护性。

一旦您从 MyUsers 方法获得了一个数据表作为返回，您应该能够简单地设置您的 Gridview 的数据源。如果您仍然遇到困难，请按照 Steve 的建议执行并检查设计器中的 Autogenerate columns 属性，或在代码中设置它。

1.  并不是说我已将连接字符串移至项目属性/设置。您应该在解决方案设计器中找到它。将您的连接字符串放在一个位置，您可以从代码中的任何位置获取它。如果您稍后更改连接字符串（例如将您的 Db 移动到另一台计算机、服务器共享等），您只需在一个地方更改它。

示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;  // put this here, and stop writing long namespaces inline

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Where possible, move code out of specific event handlers
            // into methods which can be re-used from other client code. 

            // Here, I pulled the actual data access out into separate methods, 
            // and simply call it from the event handler:
            this.LoadGridView(textBox1.Text);
        }

        private void LoadGridView(string UserID)
        {
            // Now we can load the gridview from other places in our
            // code if needed:
            this.dataGridView1.DataSource = this.MyUsers(UserID);
        }

        private DataTable MyUsers(string UserID)
        {
            var dt = new DataTable();

            // Use a SQL Paramenter instead of concatenating criteria:
            string SQL = "SELECT * FROM Leave WHERE userid = @UserID";

            // The "using" statement limits the scope of the connection and command variables, and handles disposal
            // of resources. Also note, the connection string is obtained from the project properties file:
            using(OleDbConnection cn = new OleDbConnection(Properties.Settings.Default.MyConnectionString))
            {
                using (var cmd = new OleDbCommand(SQL, cn))
                {
                    // For simpler things, you can use the "AddWithValue" method to initialize a new parameter, 
                    // add it to the Parameters collection of the OleDBCommand object, and set the value:
                    cmd.Parameters.AddWithValue("@UserID", UserID);

                    // Get in, get out, get done:
                    cn.Open();
                    dt.Load(cmd.ExecuteReader());
                    cn.Close();
                }
            }

            return dt;
        }
    }
} 
```

希望有帮助。不是每个人都可以这样做，但我发现它提供了最大的灵活性，当您必须使用 MS Access 时。

# javascript - 设置对象属性而不创建额外的嵌套级别

> ID：12991711
> 
> 赞同：0
> 
> 时间：2012-10-20T19:06:19.990
> 
> 标签：javascript

我有一个对象：

```
var o = { dates: { dateFrom: "01DEC2012", dateTo: "02DEC2012" }, selection: "A" }; 
```

和一个功能：

```
var getSelection = function () {
   return { selection: "A,B" };
}; 
```

调用：

```
o.selection = getSelection(); 
```

得到我：

```
{ dates: { dateFrom: "01DEC2012", dateTo: "02DEC2012" }, selection: { selection: "A,B"} }; 
```

虽然我需要：

```
{ dates: { dateFrom: "01DEC2012", dateTo: "02DEC2012" }, selection: "A,B" }; 
```

我知道我可以将`getSelection()`结果提取到一个变量中，然后`o`手动更新，但是我的对象要复杂得多，我需要一次性设置整个对象。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:10:45.760

您本质上是合并`getSelection()`到`o`中，因此您可以执行以下操作：

```
var result = getSelection();

for (var key in result) {
    o[key] = result[key];
} 
```

如果您使用的是 jQuery，则可以使用[`jQuery.extend()`](http://docs.jquery.com/Utilities/jQuery.extend)：

```
var result = jQuery.extend(getSelection(), result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:11:03.133

更改您的 getSelection 方法：

```
var getSelection = function () {
   return "A,B";
}; 
```

编辑：这个怎么样：

```
o.selection = getSelection().selection; 
```

# java - Java：使用 DOM 和 unescapeHtml4() 生成 XML

> ID：12991713
> 
> 赞同：0
> 
> 时间：2012-10-20T19:06:39.210
> 
> 标签：java, xml, dom

我有一个包含一堆正则表达式的源文本文件。我正在阅读文本文件，将正则表达式匹配分配给数组索引，并使用 DOM 创建 XML。

但是，我需要将一些样板信息添加到生成的 XML 文档中。我不想创建数百个新的、复杂的嵌套 DOM 元素，而只想使用 element.setTextContent(someBoilerPlateXML) 将 XML 样板信息放入 XML DOM 元素之一。

我正在尝试 org.apache.commons.lang3.StringEscapeUtils.unescapeHtml4 来做到这一点。它似乎适用于我的 System.out.println(someBoilerPlateXML) 测试，但不适用于 element.setTextContent(someBoilerPlateXML) 实现。

例如：

输入： `String test = org.apache.commons.lang3.StringEscapeUtils.unescapeHtml4("<Hello id=\"id\"/>"); System.out.println(test);`

输出： `<Hello id="id"/>`

输入： `Element element= doc.createElement("element");
element.setTextContent(org.apache.commons.lang3.StringEscapeUtils.unescapeHtml4("<Hello id=\"id\">"));`

在生成的 XML 文件中输出： `&lt;Hello id="id"/&gt`

为什么会这样做，我怎样才能做到这一点？我需要使用另一个免费包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:08:12.157

`element.setTextContent`正如您所发现的，它将转义您提供的文本，而不是将其识别为 xml 并将其处理。

如果您想要将 xml 的文本表示形式添加为 xml，则需要将其作为 xml 处理，这意味着将其解析为 DOM `Node`，然后以该形式附加它。

如果您的文本不是完整的 xml，这将不起作用。在您的示例中，您只有一个开始标记，无法将其解析为`Node`.

但是，如果它是完整的并且您发现生成文本更容易，您可以执行以下操作：

```
 DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

    Document doc = documentBuilder.newDocument();
    Element element= doc.createElement("element");
    doc.appendChild(element);

    Document newDoc = documentBuilder.parse(new InputSource(new StringReader("<Hello id=\"id\"/>")));

    Element newElement = newDoc.getDocumentElement();
    Node node = doc.importNode(newElement, true);

    element.appendChild(node); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:42:39.023

这就是 xml 文本内容被转义的方式，当您读回原始文本时，您将取回原始文本

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
Element element= doc.createElement("element");
element.setTextContent("<Hello id=\"id\">");
doc.appendChild(element);

Transformer trf = TransformerFactory.newInstance().newTransformer();
trf.transform(new DOMSource(doc), new StreamResult(System.out));
System.out.println();
System.out.println(element.getTextContent()); 
```

打印出来

```
<?xml version="1.0" encoding="UTF-8"?><element>&lt;Hello id="id"&gt;</element>
<Hello id="id"> 
```

# python - 可以在创建后更改 Canvas 对象的属性吗？

> ID：12991717
> 
> 赞同：14
> 
> 时间：2012-10-20T19:07:19.373
> 
> 标签：python, tkinter, tkinter-canvas

我正在尝试模拟一个美国交通信号灯，矩形上有 3 个圆圈，全部绘制在一组画布上。模拟应该通过按以下顺序每 2 秒更改一次显示的光来反映“动画”：绿色 > 黄色 > 红色 > 绿色，以此类推。

我能想到的唯一方法是使用 canvas.move()、canvas.after()、canvas.update() 模式来移动填充的椭圆对象以一次叠加一个未填充的圆圈。我已经得到了逻辑，以适当的速度和正确的顺序移动一个圆圈。问题是，我只是实例化了一个充满“绿色”的圆圈，但我无法使用这种方法将其更改为“黄色”或“红色”。必须每 2 秒使用 canvas.delete("filled") 并在一个新的地方用不同的填充重新绘制它似乎很愚蠢，因为对于这样一个简单的程序来说，这需要做很多事情。

问题 1：有没有一种方法可以随意更改`fill`填充的 Canvas 对象的选项，使用某种方法或其他方式？

问题 2：我是否错误地处理了这种情况？有没有更好的方法来模拟这个？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-20T19:10:22.420

是的，您应该能够使用 更改画布的设置[`config()`](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.config-method)。

同样，用于[`itemconfig()`](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method)更改画布上的项目。这确实需要您保存项目的句柄或标记它们。

基于 tkinterbook 的示例：

```
item = canvas.create_line(xy, fill="red")

canvas.coords(item, new_xy) # change coordinates
canvas.itemconfig(item, fill="blue") # change color 
```

# android - EditText 字段越过屏幕边缘

> ID：12991718
> 
> 赞同：0
> 
> 时间：2012-10-20T19:07:20.550
> 
> 标签：android, android-layout, android-edittext, autocompletetextview

我的表格布局和 TextView 组件有问题。我不知道为什么我不能限制 EditText 和 AutoCompleteTextView 的大小，而且这两个组件都弄乱了我的布局。正如您在下面的附加图像中看到的那样，这些组件越过屏幕边缘（在右侧）。因为那个微调域也太大了。

我认为`android:layout_width="match_parent"`（或`fill_parent`）应该有所帮助，但这次不行。

布局代码如下图。

我将不胜感激任何提示/帮助。我正在使用带有 Android 2.3.5 的 HTC Wildfire S。

![asd](../Images/dbc83116e277d7d0b5819deb0820e047.png)

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ScrollView1"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:isScrollContainer="true"
            android:overScrollMode="always"
            android:scrollbarAlwaysDrawVerticalTrack="true"
            android:scrollbarStyle="outsideInset"
            android:scrollbars="vertical">

    <TableLayout
        android:id="@+id/assiociatecode_tableleyout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:baselineAligned="true"
        android:measureWithLargestChild="false" >

        <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/associatecode_lbl_code"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/associate_code_activity"
                    android:textAppearance="?android:attr/textAppearanceMedium"/>

            <EditText
                android:id="@+id/associatecode_edit_code"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="text" />

        </TableRow>

        <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/associatecode_lbl_product"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/associate_code_activity_product"
                    android:textAppearance="?android:attr/textAppearanceMedium"/>

            <AutoCompleteTextView
                    android:id="@+id/associatecode_edit_product"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="@android:color/primary_text_light"
                    android:ems="10">
                <requestFocus/>
            </AutoCompleteTextView>
        </TableRow>

        <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/associatecode_lbl_productgroup"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/associate_code_activity_productgroup"
                    android:textAppearance="?android:attr/textAppearanceMedium"/>

            <Spinner
                    android:id="@+id/associatecode_edit_productgroup"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"/>
        </TableRow>
    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:40:04.130

问题是您`android:ems="10"`正在强制这些元素绘制大于可用屏幕。尝试将其更改为其他值，或将其全部删除。

# opengl - 在背景图像上方绘制多边形

> ID：12991722
> 
> 赞同：0
> 
> 时间：2012-10-20T19:07:46.950
> 
> 标签：opengl, draw, layer

我的问题是在背景图像上方或上方绘制多边形或其他一些 OpenGL 基元。总结就像在不同的图层中绘制，但在 OpenGL 中我认为没有图层。

现在我正在做一些测试，试图在背景图像上绘制一个三角形和一条线。

为了绘制背景，我使用一个具有 OpenGL 窗口大小的正方形，然后在这个正方形中应用 png 图像作为纹理。

之后，我尝试用不同的颜色绘制三角形和线条，但除了背景图像之外我什么也没看到。

我玩阿尔法通道，但我什么也没看到。

代码：

```
void init() 
{
    // glClearColor(0.0, 0.0, 0.0, 0.0);
    glEnable(GL_DEPTH_TEST);

    // The following two lines enable semi transparent
    glEnable(GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    int width, height;
    bool hasAlpha;
    char filename[] = "prueba-luz.png";
    bool success = loadPngImage(filename, width, height, hasAlpha, &textureImage);

    if (!success) 
    {
        cout << "Unable to load png file" << endl;
        return;
    }

    cout << "Image loaded " << width << " " << height << " alpha " << hasAlpha << endl;

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glTexImage2D(GL_TEXTURE_2D, 0, hasAlpha ? 4 : 3, width,
                height, 0, hasAlpha ? GL_RGBA : GL_RGB, GL_UNSIGNED_BYTE,
                textureImage);

    // glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
    // glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
    // glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
}

void display(void) 
{
    glEnable(GL_TEXTURE_2D);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE); // Igual que GL_REPLACE pero se le puede aplicar transparencias a la textura
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glPushMatrix();

    glColor4f(1, 1, 1, 1);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glBegin(GL_QUADS);
        glTexCoord2i(0,0); glVertex2i(10, -10);
        glTexCoord2i(1,0); glVertex2i(-10, -10);
        glTexCoord2i(1,1); glVertex2i(-10, 10);
        glTexCoord2i(0,1); glVertex2i(10, 10);
    glEnd();

    glPopMatrix();

    glDisable(GL_TEXTURE_2D);

    glBegin(GL_POLYGON);
        glColor4f(1.0, 1.0, 1.0, 0.8);
        glVertex3f(-1.0f, -3.0f, 0.0f);    // A
        glVertex3f( 1.0f, -3.5f, 0.0f);    // B
        glVertex3f( 0.0f,  0.5f, 0.0f);    // C
    glEnd();

    glBegin(GL_LINES);
        glColor4f( 1.0, 0.0, 0.0, 0.8 );
        glVertex2f(-8.0,  6.0);
        glVertex2f (5.0, -3.0);
    glEnd();

    glutSwapBuffers();
} 
```

如何在背景图像上绘制一张图像？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:56:50.663

发现了一些东西：

*   尝试禁用深度测试。您在 Z=0 处绘制所有内容，并且您的应用程序肯定正在写入深度缓冲区。我不确定为什么要在此处启用深度测试，因为您绘制的所有内容都在 Z=0 上。
*   默认情况下，当启用深度测试时，所有写入相同或更高 Z 值的片段都将被丢弃。这可以通过`glDepthFunc`（默认值`GL_LESS`）进行更改。这可能就是在这个例子中你的几何图形被丢弃的原因。
*   绘制 2D 几何图形并不意味着深度缓冲区不会受到影响。OpenGL 将使用 Z=0 绘制此几何图形并将其写入您的深度缓冲区。

目前，除非您在不同的 z 位置绘制几何图形，否则您的应用程序没有理由使用深度测试。您可以在 2D 绘图中使用深度测试通过为每个对象分配不同的 z 值来制作“层”。

使用 z 剔除进行 2D 绘图的一个好的做法是先绘制关闭层，然后再将层绘制得更远。这样可以确保您编写的片段更少。

例如 ：

*   Z = 0 ：绘制不透明的叠加层
*   Z = -1 ：绘制隐藏在叠加层后面的东西
*   Z = -2 : 绘制背景

但是，透明物体需要特殊的规则。

您需要控制您的深度缓冲区。有选项：

*   `glEnable/Disable(GL_DEPTH_TEST)`: 启用或禁用 z 剔除
*   `glDepthMask(GL_TRUE/GL_FALSE)`：启用或禁用写入深度缓冲区
*   （`glDepthFunc`可用于定义如何丢弃片段）

请注意，前两个函数为您提供的选项比您想象的要多

*   绘制对象时的深度剔除和深度写入
*   深度剔除，但您的对象不影响深度缓冲区
*   没有深度剔除，但您的对象将写入深度缓冲区
*   没有深度剔除和没有深度写入

如果您想在最后一遍中绘制所有透明对象，例如，您可以启用深度测试，这样对象就不会绘制在您的叠加层之上，但是您禁用深度写入，因为您希望能够在其中绘制多个重叠对象层。

发挥您的创造力并学会爱上深度缓冲区：D

# django - django 控制器默认调用一个函数

> ID：12991723
> 
> 赞同：0
> 
> 时间：2012-10-20T19:07:52.537
> 
> 标签：django, controller

我对此进行了相当长的研究。我有一个用例，必须在控制器的所有功能中执行相同的任务，有没有办法在控制器中默认调用该功能？除了创建一个方法并在每个函数中调用它。

目前这就是我正在做的事情，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:01:27.473

您需要编写[中间件](https://docs.djangoproject.com/en/1.4/topics/http/middleware/)类，实现`process_request(self, request)`在调用视图方法之前必须执行的功能。不要忘记在设置文件中将类名添加到 MIDDLEWARE_CLASSES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:14:43.233

我认为您正在寻找的是自定义装饰器。这个链接会有所帮助： http: [//www.djangofoo.com/253/writing-django-decorators](http://www.djangofoo.com/253/writing-django-decorators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:17:39.733

只需 wrap `dispatch`，因为它会在所有其他操作方法周围静默调用

# css - translate3d(0,0,200px) -> 宽度是多少？

> ID：12991724
> 
> 赞同：1
> 
> 时间：2012-10-20T19:08:02.267
> 
> 标签：css, translate3d

考虑以下示例：http: [//jsfiddle.net/jeanluca/s4Ppf/](http://jsfiddle.net/jeanluca/s4Ppf/)

#child 的初始宽度为 100px。现在，将其 200px 转换为 z 方向后，是否可以计算出宽度是多少？而不是做类似的事情

```
$('#child').width() ; 
```

谢谢！

# java - 如何在 Arquillian 中测试 JPA

> ID：12991725
> 
> 赞同：1
> 
> 时间：2012-10-20T19:08:13.047
> 
> 标签：java, jakarta-ee, junit, jboss-arquillian

我正在尝试使用 Arquillian 来测试我的 JPA 存储库类。但是我只得到空指针异常告诉我它没有找到persistence.xml。如何在标准 Maven 项目中配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:16:04.980

看起来您的 ShrinkWrap 部署在正确的路径中不包含 persistence.xml。persistence.xml 文件应该位于 JAR 的 META-INF 目录中，或者位于 WAR 的 WEB-INF/META-INF 目录中。您可以通过两种方式验证这一点：

1.  通过`Archive.toString(...)`方法的详细标志：

    在您的`@Deployment`方法中，您可以使用该方法打印出存档的内容`toString`，例如

    ```
    @Deployment
    public static Archive<?> createDeployment() {
           WebArchive war = ShrinkWrap.create(WebArchive.class).addClasses(Foo.class);
           System.out.println(war.toString(true));
           return war;
    } 
    ```

2.  配置 Arquillian 以将生成的部署写入磁盘：

    您可以`engine`使用属性将配置元素添加到您的 arquillian.xml `deploymentdeploymentExportPath`，例如

    ```
    <engine>
        <property name="deploymentExportPath">target/deployment</property>
    </engine> 
    ```

    这将指示 Arquillian 将其生成的部署写入 Maven 生成的目标目录下的子目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:00:17.967

[在 github 上](https://github.com/arquillian/arquillian-showcase)的展示项目中也有大量示例，包括 JPA 测试（也使用 Arquillian Persistence Extension）。

希望这会引导您走上正确的道路:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:41:55.367

你看过@这里的官方文档[吗](http://arquillian.org/guides/testing_java_persistence/)。[项目结构](http://arquillian.org/guides/testing_java_persistence/#project_structure)表明它是使用 Maven 构建的。

如果您仍然遇到问题，请发布异常消息。

祝你好运！

# java - JCheckBox 数组

> ID：12991726
> 
> 赞同：1
> 
> 时间：2012-10-20T19:08:31.767
> 
> 标签：java, arrays, swing, jcheckbox, itemlistener

我在 JFrame 中添加了大约 10 个复选框，这些复选框被添加到 for 循环中，并在 Array 上进行迭代，代码如下所示

```
 JFrame f=new JFrame("hello ");
    FlowLayout fl= new FlowLayout();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setSize(300,300);
    f.setVisible(true);
    f.setLayout(fl);

    for (int i=0 ; i<10; i++)
    {

        b[i]=new JCheckBox();
        b[i].setVisible(true);
        b[i].addItemListener(this);
        f.add(b[i]);

    }  /// and so on . 
```

我的问题是，当我实现 ItemListener 时，我是否必须像这样访问每个 CheckBox
if(b[1].isSelected()) ， if(b[2].isSelected()) 或者可以使用任何其他技术，例如一个循环或类似的东西..提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:12:38.707

将`ItemListener`使用 的实例调用`ItemEvent`。此事件有一个源 ( `EventObject#getSource()`)，它将是触发事件的组件，例如您的`JCheckBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:28:36.567

> 所以这意味着如果我使用 100 个 jcheckBoxes Jbuttons 等，将会有 100 个 if、else 或 switch 条件，这将是太重的代码，我已经做到了，我想要像迭代循环或一些类似的解决方案来获得选择项目本身而不是去 b [1](https://stackoverflow.com/a/10385302/714968)， b [2](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setName%28java.lang.String%29)等

你可以

*   [putClientProperty（关于 JButton 的示例，JCheckBox 和 ItemListener 相同）](https://stackoverflow.com/a/10385302/714968)

*   [设置名称（字符串）；](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setName%28java.lang.String%29)

*   [setActionCommand(字符串)](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setActionCommand%28java.lang.String%29)

*   [保持参考（关于JButton的例子，JCheckBox和ItemListener相同）](https://stackoverflow.com/a/9007348/714968)

# asp.net - 它是在会话中存储值的正确方法吗

> ID：12991732
> 
> 赞同：0
> 
> 时间：2012-10-20T19:09:31.433
> 
> 标签：asp.net, session

**在会话对象中存储值是否正确**？

我试过了，但没有正常工作。我的意思是，存储在会话中的值无法正确访问或存储。谁能帮我解决这个问题？谢谢你。

```
 protected void Page_Load(object sender, EventArgs e)
        {       
            if (!IsPostBack)
            {            
                if (Session["cart_table"] == null)
                {
                    DataTable dt = new Spcart().GetCart();
                    Session["cart_table"] = dt;                 
                }

                if (Session["ptax"] == null)
                {
                    Session["ptax"] = 0;
                }
                if (Session["subtotal"] == null)
                {
                    Session["subtotal"] = 0;
                }

                  BindCartListView();
              }
         }

 public void BindCartListView()
    {
        -----------------------              //some code 

        int tax=100;
        int total=300;
        int[] totals;
        totals = bindtotal(tax, total); 

        -----------------------------------     //some code 
    }

 public int[] bindtotal(int tax, int total)
    {

        int ptax = (int)Session["ptax"];
        ptax += tax;
        Session["ptax"] = ptax;

        int subtotal = (int)Session["subtotal"];
        subtotal += total;
        Session["ptax"] = subtotal;

        int granttotal = ptax + subtotal;
        Session["granttotal"] = granttotal;

        int[] totals = { subtotal, granttotal };
        return totals;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:33:54.833

是的，它似乎是正确的，但如果它给出任何错误，那么请发布那个错误..否则它看起来没问题

# angularjs - angular.module() 函数定义在哪个 JavaScript 文件中？

> ID：12991739
> 
> 赞同：3
> 
> 时间：2012-10-20T19:09:52.437
> 
> 标签：angularjs

我想知道是否有人知道`angular.module()`函数是在哪个文件中定义的。我问是因为当我输入“angular”时。我的 IDE 的自动完成功能没有在角度对象上显示模块方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:41:11.277

关于`.module()`定义的文件：

*   在构建版本中，它是主要的 angular.js 文件（对应于`ngModule`）：[http://code.angularjs.org/1.0.2/angular.js](http://code.angularjs.org/1.0.2/angular.js)，检查第 1052 行
*   在源代码中它在这里：[https ://github.com/angular/angular.js/blob/master/src/loader.js#L67](https://github.com/angular/angular.js/blob/master/src/loader.js#L67)

您可能想要搜索`function module(name, requires, configFn)`字符串以在您的 AngularJS 版本中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:13:02.353

根据 AngularJS 文档，它位于[ng 模块](http://docs.angularjs.org/api/angular.module)中。

# mysql - 为什么我的查询慢于选择小于、大于与索引的组合？

> ID：12991748
> 
> 赞同：3
> 
> 时间：2012-10-20T19:11:06.787
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT * FROM table_1 
WHERE longitude > 5.71873540775 
  AND longitude < 6.30763059225 
  AND latitude > 52.1688986788 
  AND latitude < 52.5286273212 
LIMIT 0, 50 
```

此查询运行非常缓慢。我在经度和纬度上尝试了组合索引和单独索引。该表包含许多行（200.000）和 10 列。上述查询的结果数为 20。

我怎样才能使这个特定的查询运行得更快？

更新 1

这是执行计划：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  table_1     range   longitude,latitude  longitude   6   NULL    1401    Using where 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:57:47.163

正如 ypercube 所说，2 个范围查询效果不佳。但也许无论出于何种原因，您都无法将引擎切换到 myISAM。我们可以通过将工作细分为两个分别进行范围查找的查询来做到这一点。

您应该需要单独的索引，一个在纬度字段上，一个在经度上。

```
SELECT * FROM

(
SELECT * FROM table_1
WHERE longitude > 5.71873540775 
  AND longitude < 6.30763059225 
) a,
(
SELECT * FROM table_1
WHERE latitude > 52.1688986788 
  AND latitude < 52.5286273212 
) b

WHERE a.id = b.id 
```

仍然不会像使用空间索引那样快，但可能比您当前的方法快一点。

# php - 电子邮件未在 magento 中发送时事通讯

> ID：12991750
> 
> 赞同：1
> 
> 时间：2012-10-20T19:11:17.947
> 
> 标签：php, magento, magento-1.7

我想在时事通讯电子邮件模板中添加一些图像。我把图像保存在`skin/frontend/default/blank/images/`

在我给出的电子邮件模板中：

```
<img src="{{skin url="images/image01.png" _area='frontend'}}" width="550" height="8" alt=""> 
```

当我在电子邮件模板中添加图像（上述代码）时，电子邮件未发送。我做错了什么？任何建议高度赞赏。

# c++ - 在 C++ 中创建 n 个项目的所有可能的 k 个组合

> ID：12991758
> 
> 赞同：60
> 
> 时间：2012-10-20T19:12:04.727
> 
> 标签：c++, algorithm, math, combinations, combinatorics

`1`从到有 n 个人`n`。我必须编写一个代码来生成和打印`k`这些人的所有不同组合`n`。请解释用于此的算法。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-20T20:45:35.967

我假设您在组合意义上询问组合（即元素的顺序无关紧要，因此`[1 2 3]`与 相同`[2 1 3]`）。那么这个想法很简单，如果你理解归纳/递归：要获得所有`K`元素组合，你首先从现有的一组人中选择一个组合的初始元素，然后你将这个初始元素与所有可能的组合“连接”`K-1`人从继承初始元素的元素中产生。

例如，假设我们要从 5 个人中提取 3 个人的所有组合。那么 3 人的所有可能组合都可以用 2 人的所有可能组合来表示：

```
comb({ 1 2 3 4 5 }, 3) =
{ 1, comb({ 2 3 4 5 }, 2) } and
{ 2, comb({ 3 4 5 }, 2) } and
{ 3, comb({ 4 5 }, 2) } 
```

下面是实现这个想法的 C++ 代码：

```
#include <iostream>
#include <vector>

using namespace std;

vector<int> people;
vector<int> combination;

void pretty_print(const vector<int>& v) {
  static int count = 0;
  cout << "combination no " << (++count) << ": [ ";
  for (int i = 0; i < v.size(); ++i) { cout << v[i] << " "; }
  cout << "] " << endl;
}

void go(int offset, int k) {
  if (k == 0) {
    pretty_print(combination);
    return;
  }
  for (int i = offset; i <= people.size() - k; ++i) {
    combination.push_back(people[i]);
    go(i+1, k-1);
    combination.pop_back();
  }
}

int main() {
  int n = 5, k = 3;

  for (int i = 0; i < n; ++i) { people.push_back(i+1); }
  go(0, k);

  return 0;
} 
```

这是输出`N = 5, K = 3`：

```
combination no 1:  [ 1 2 3 ] 
combination no 2:  [ 1 2 4 ] 
combination no 3:  [ 1 2 5 ] 
combination no 4:  [ 1 3 4 ] 
combination no 5:  [ 1 3 5 ] 
combination no 6:  [ 1 4 5 ] 
combination no 7:  [ 2 3 4 ] 
combination no 8:  [ 2 3 5 ] 
combination no 9:  [ 2 4 5 ] 
combination no 10: [ 3 4 5 ] 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2015-02-24T14:41:13.417

从[罗塞塔代码](http://rosettacode.org/wiki/Combinations#C.2B.2B)

```
#include <algorithm>
#include <iostream>
#include <string>

void comb(int N, int K)
{
    std::string bitmask(K, 1); // K leading 1's
    bitmask.resize(N, 0); // N-K trailing 0's

    // print integers and permute bitmask
    do {
        for (int i = 0; i < N; ++i) // [0..N-1] integers
        {
            if (bitmask[i]) std::cout << " " << i;
        }
        std::cout << std::endl;
    } while (std::prev_permutation(bitmask.begin(), bitmask.end()));
}

int main()
{
    comb(5, 3);
} 
```

**输出**

```
 0 1 2
 0 1 3
 0 1 4
 0 2 3
 0 2 4
 0 3 4
 1 2 3
 1 2 4
 1 3 4
 2 3 4 
```

**分析与思路**

重点是玩数字的二进制表示，例如二进制中的数字**7**是**0111**

所以这个二进制表示也可以看作是一个*赋值列表*：

对于每个位*i*如果该位被设置（即为**1**）意味着第**i**个项目被分配，否则不被分配。

然后通过简单地计算一个连续二进制数的列表并利用二进制表示（可以非常快）给出一种算法来计算**N**超过**k**的所有组合。

**不需要**（某些实现的）末尾的**排序**。这只是一种确定性归一化结果的方法，即对于相同的数字（N，K）和相同的算法，返回相同的组合*顺序*

 ***要进一步了解数字表示及其与组合、排列、幂集（和其他有趣的东西）的关系，请查看[组合数系统](http://en.wikipedia.org/wiki/Combinatorial_number_system)、[阶乘数系统](http://en.wikipedia.org/wiki/Factorial_number_system)

**PS：**您可能想查看[我的组合框架 Abacus](https://foo123.github.io/examples/abacus/#action=produce&object=combination&type=default&order=&N=5&K=3&alphabet=&Text=)，它可以有效地计算多种类型的组合对象，并且它的例程（最初在 JavaScript 中）可以很容易地适应许多其他语言。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-03-28T17:12:57.700

如果集合的数量在 32、64 或机器原生原始大小范围内，那么您可以通过简单的位操作来完成。

```
template<typename T>
void combo(const T& c, int k)
{
    int n = c.size();
    int combo = (1 << k) - 1;       // k bit sets
    while (combo < 1<<n) {

        pretty_print(c, combo);

        int x = combo & -combo;
        int y = combo + x;
        int z = (combo & ~y);
        combo = z / x;
        combo >>= 1;
        combo |= y;
    }
} 
```

此示例按字典顺序调用 pretty_print() 函数。

例如。您想要 6C3 并假设当前的“组合”是 010110。显然下一个组合必须是 011001。011001 是：010000 | 001000 | 000001

010000 : LSB 侧连续删除 1s。001000 : LSB 侧连续 1s 的下一个置 1。000001 : LSB 连续右移 1s 并移除 LSB 位。

```
int x = combo & -combo; 
```

这获得了最低的1。

```
int y = combo + x; 
```

这会连续消除 LSB 侧的 1，并在其下一个设置 1（在上述情况下，010000 | 001000）

```
int z = (combo & ~y) 
```

这为您提供了 LSB 端 (000110) 的连续 1。

```
combo = z / x;
combo >> =1; 
```

这是用于“将 LSB 连续向右移动 1 并删除 LSB 位”。

所以最后的工作是 OR y 到上面。

```
combo |= y; 
```

一些简单的具体例子：

```
#include <bits/stdc++.h>

using namespace std;

template<typename T>
void pretty_print(const T& c, int combo)
{
    int n = c.size();
    for (int i = 0; i < n; ++i) {
        if ((combo >> i) & 1)
            cout << c[i] << ' ';
    }
    cout << endl;
}

template<typename T>
void combo(const T& c, int k)
{
    int n = c.size();
    int combo = (1 << k) - 1;       // k bit sets
    while (combo < 1<<n) {

        pretty_print(c, combo);

        int x = combo & -combo;
        int y = combo + x;
        int z = (combo & ~y);
        combo = z / x;
        combo >>= 1;
        combo |= y;
    }
}

int main()
{
    vector<char> c0 = {'1', '2', '3', '4', '5'};
    combo(c0, 3);

    vector<char> c1 = {'a', 'b', 'c', 'd', 'e', 'f', 'g'};
    combo(c1, 4);
    return 0;
} 
```

结果 ：

```
1 2 3 
1 2 4 
1 3 4 
2 3 4 
1 2 5 
1 3 5 
2 3 5 
1 4 5 
2 4 5 
3 4 5 
a b c d 
a b c e 
a b d e 
a c d e 
b c d e 
a b c f 
a b d f 
a c d f 
b c d f 
a b e f 
a c e f 
b c e f 
a d e f 
b d e f 
c d e f 
a b c g 
a b d g 
a c d g 
b c d g 
a b e g 
a c e g 
b c e g 
a d e g 
b d e g 
c d e g 
a b f g 
a c f g 
b c f g 
a d f g 
b d f g 
c d f g 
a e f g 
b e f g 
c e f g 
d e f g 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-14T19:22:24.310

在 Python 中，这被实现为 itertools.combinations

[https://docs.python.org/2/library/itertools.html#itertools.combinations](https://docs.python.org/2/library/itertools.html#itertools.combinations)

在C++中，这种组合函数可以基于置换函数来实现。

其基本思想是使用一个大小为n的向量，并在里面只设置k项为1，那么nchoosek的所有组合可以通过收集每个排列中的k项得到。虽然它可能不是最有效的方式，但需要大空间，因为组合通常是一个非常大的数字。最好作为生成器实现或将工作代码放入do_sth()。

代码示例：

```
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>

using namespace std;

int main(void) {

  int n=5, k=3;

  // vector<vector<int> > combinations;
 vector<int> selected;
 vector<int> selector(n);
 fill(selector.begin(), selector.begin() + k, 1);
 do {
     for (int i = 0; i < n; i++) {
      if (selector[i]) {
            selected.push_back(i);
      }
     }
     //     combinations.push_back(selected);
         do_sth(selected);
     copy(selected.begin(), selected.end(), ostream_iterator<int>(cout, " "));
     cout << endl;
     selected.clear();
 }
 while (prev_permutation(selector.begin(), selector.end()));

  return 0;
} 
```

输出是

```
0 1 2 
0 1 3 
0 1 4 
0 2 3 
0 2 4 
0 3 4 
1 2 3 
1 2 4 
1 3 4 
2 3 4 
```

这个解决方案实际上是与 [在 C++ 中生成组合的副本](https://stackoverflow.com/questions/9430568/generating-combinations-in-c)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-03T20:02:21.000

这是我想出的解决这个问题的算法。您应该能够修改它以使用您的代码。

```
void r_nCr(const unsigned int &startNum, const unsigned int &bitVal, const unsigned int &testNum) // Should be called with arguments (2^r)-1, 2^(r-1), 2^(n-1)
{
    unsigned int n = (startNum - bitVal) << 1;
    n += bitVal ? 1 : 0;

    for (unsigned int i = log2(testNum) + 1; i > 0; i--) // Prints combination as a series of 1s and 0s
        cout << (n >> (i - 1) & 1);
    cout << endl;

    if (!(n & testNum) && n != startNum)
        r_nCr(n, bitVal, testNum);

    if (bitVal && bitVal < testNum)
        r_nCr(startNum, bitVal >> 1, testNum);
} 
```

[您可以在此处](https://stackoverflow.com/questions/27308438/how-to-cheaply-calculate-all-possible-length-r-combinations-of-n-possible-elem/27308439#27308439)查看其工作原理的说明。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-20T19:44:29.927

我在 C# 中编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它也比其他解决方案更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将类移植到 C++ 应该非常简单。

您的问题的解决方案涉及为每个 N 选择 K 案例生成 K 索引。例如：

```
int NumPeople = 10;
int N = TotalColumns;
// Loop thru all the possible groups of combinations.
for (int K = N - 1; K < N; K++)
{
   // Create the bin coeff object required to get all
   // the combos for this N choose K combination.
   BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
   int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
   int[] KIndexes = new int[K];
   BC.OutputKIndexes(FileName, DispChars, "", " ", 60, false);
   // Loop thru all the combinations for this N choose K case.
   for (int Combo = 0; Combo < NumCombos; Combo++)
   {
      // Get the k-indexes for this combination, which in this case
      // are the indexes to each person in the problem set.
      BC.GetKIndexes(Loop, KIndexes);
      // Do whatever processing that needs to be done with the indicies in KIndexes.
      ...
   }
} 
```

OutputKIndexes 方法也可用于将 K-indexes 输出到文件，但它会为每个 N 选择 K 的情况使用不同的文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-02-02T13:15:41.050

[您可以使用 Howard Hinnant 的组合库](https://github.com/HowardHinnant/combinations/blob/master/combinations.h)中的“count_each_combination”和“for_each_combination”函数来生成从 n 中取 k 的所有组合。

```
#include <vector>
#include "combinations.h"

std::vector<std::vector<u_int8_t> >
combinationsNoRepetitionAndOrderDoesNotMatter (long int subsetSize, std::vector<uint8_t> setOfNumbers)
{
  std::vector<std::vector<u_int8_t> > subsets{};
  subsets.reserve (count_each_combination (setOfNumbers.begin (), setOfNumbers.begin () + subsetSize, setOfNumbers.end ()));
  for_each_combination (setOfNumbers.begin (), setOfNumbers.begin () + subsetSize, setOfNumbers.end (), [&subsets] (auto first, auto last) {
    subsets.push_back (std::vector<uint8_t>{ first, last });
    return false;
  });
  return subsets;
}

int main(){
    combinationsNoRepetitionAndOrderDoesNotMatter (6, { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36 });
} 
```

Intel(R) Core(TM) i5-8600K CPU @ 3.60GHz 的基准测试：
g++

```
benchmark name                       samples       iterations    estimated
                                     mean          low mean      high mean
                                     std dev       low std dev   high std dev
-------------------------------------------------------------------------------
combinations no repetition and                                                 
order does not matter 6 from 36                100             1     10.2829 s 
                                        92.5451 ms    92.3971 ms    92.9411 ms 
                                        1.15617 ms    532.604 us    2.48342 ms 
```

铿锵++

```
benchmark name                       samples       iterations    estimated
                                     mean          low mean      high mean
                                     std dev       low std dev   high std dev
-------------------------------------------------------------------------------
combinations no repetition and                                                 
order does not matter 6 from 36                100             1     11.0786 s 
                                        88.1275 ms    87.8212 ms    89.3204 ms 
                                        2.82107 ms    400.665 us    6.67526 ms 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-04T10:27:24.920

Behind the link below is a generic C# answer to this problem: How to format all combinations out of a list of objects. You can limit the results only to the length of k pretty easily.

[https://stackoverflow.com/a/40417765/2613458](https://stackoverflow.com/a/40417765/2613458)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-11T11:11:54.773

这个模板化函数使用任何类型的向量作为输入。
组合作为向量的向量返回。

```
/*
* Function return all possible combinations of k elements from N-size inputVector.
* The result is returned as a vector of k-long vectors containing all combinations.
*/
template<typename T> std::vector<std::vector<T>> getAllCombinations(const std::vector<T>& inputVector, int k)
{
    std::vector<std::vector<T>> combinations;
    std::vector<int> selector(inputVector.size());
    std::fill(selector.begin(), selector.begin() + k, 1);

    do {
        std::vector<int> selectedIds;
        std::vector<T> selectedVectorElements;
        for (int i = 0; i < inputVector.size(); i++) {
            if (selector[i]) {
                selectedIds.push_back(i);
            }
        }
        for (auto& id : selectedIds) {
            selectedVectorElements.push_back(inputVector[id]);
        }
        combinations.push_back(selectedVectorElements);
    } while (std::prev_permutation(selector.begin(), selector.end()));

    return combinations;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-17T12:21:28.823

为了使其更完整，以下答案涵盖了数据集包含重复值的情况。该函数的编写方式接近于 std::next_permutation() 的风格，因此易于跟进。

```
template< class RandomIt >
bool next_combination(RandomIt first, RandomIt n_first, RandomIt last)
{
  if (first == last || n_first == first || n_first == last)
  {
    return false;
  }

  RandomIt it_left = n_first;
  --it_left;
  RandomIt it_right = n_first;

  bool reset = false;
  while (true)
  {
    auto it = std::upper_bound(it_right, last, *it_left);

    if (it != last)
    {
      std::iter_swap(it_left, it);
      if (reset)
      {
        ++it_left;
        it_right = it;
        ++it_right;
        std::size_t left_len = std::distance(it_left, n_first);
        std::size_t right_len = std::distance(it_right, last);
        if (left_len < right_len)
        {
          std::swap_ranges(it_left, n_first, it_right);
          std::rotate(it_right, it_right+left_len, last);
        }
        else
        {
          std::swap_ranges(it_right, last, it_left);
          std::rotate(it_left, it_left+right_len, n_first);
        }
      }
      return true;
    }
    else
    {
      reset = true;
      if (it_left == first)
      {
        break;
      }
      --it_left;
      it_right = n_first;
    }
  }
  return false;
} 
```

完整的数据集在 [first, last) 范围内表示。当前组合表示在范围 [first, n_first) 中，范围 [n_first, last) 包含当前组合的补集。

由于组合与其顺序无关，因此 [first, n_first) 和 [n_first, last) 保持升序以避免重复。

该算法通过与右侧大于 A 的第一个值 B 交换来增加左侧的最后一个值 A。交换后，双方仍然是有序的。如果右侧不存在这样的值B，那么我们开始考虑增加左侧倒数第二个，直到左侧的所有值不小于右侧。

通过以下代码从集合中绘制 2 个元素的示例：

```
 std::vector<int> seq = {1, 1, 2, 2, 3, 4, 5};
  do
  {
    for (int x : seq)
    {
      std::cout << x << " ";
    }
    std::cout << "\n";
  } while (next_combination(seq.begin(), seq.begin()+2, seq.end())); 
```

给出：

```
1 1 2 2 3 4 5 
1 2 1 2 3 4 5 
1 3 1 2 2 4 5 
1 4 1 2 2 3 5 
1 5 1 2 2 3 4 
2 2 1 1 3 4 5 
2 3 1 1 2 4 5 
2 4 1 1 2 3 5 
2 5 1 1 2 3 4 
3 4 1 1 2 2 5 
3 5 1 1 2 2 4 
4 5 1 1 2 2 3 
```

如果需要，检索前两个元素作为组合结果是很简单的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-11T08:20:11.810

它也可以通过维护访问数组使用回溯来完成。

```
void foo(vector<vector<int> > &s,vector<int> &data,int go,int k,vector<int> &vis,int tot)
{

    vis[go]=1;
    data.push_back(go);
    if(data.size()==k)
    {
        s.push_back(data);
        vis[go]=0;
    data.pop_back();
        return;
    }

    for(int i=go+1;i<=tot;++i)
    {
       if(!vis[i])
       {
           foo(s,data,i,k,vis,tot);
       }
    }
    vis[go]=0;
    data.pop_back();
}

vector<vector<int> > Solution::combine(int n, int k) {
   vector<int> data;
   vector<int> vis(n+1,0);
   vector<vector<int> > sol;
   for(int i=1;i<=n;++i)
   {
       for(int i=1;i<=n;++i) vis[i]=0;
   foo(sol,data,i,k,vis,n);
   }
   return sol;

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-04T21:00:09.667

*我认为我简单的“所有可能的组合生成器”可能会对某人有所帮助，我认为它是构建更大更好的东西的一个很好的例子*

您可以通过**从字符串数组中删除/添加将****N** *（字符）*更改为您喜欢的任何字符*（您也可以将其更改为 int）。***当前字符数为 36**

 *****您还可以通过**添加更多循环来****更改 K** *（生成组合的大小）*，对于每个元素，必须有一个额外的循环。**当前大小为 4**

 ****```
#include<iostream>

using namespace std;

int main() {
string num[] = {"0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z" };

for (int i1 = 0; i1 < sizeof(num)/sizeof(string); i1++) {
    for (int i2 = 0; i2 < sizeof(num)/sizeof(string); i2++) {
        for (int i3 = 0; i3 < sizeof(num)/sizeof(string); i3++) {
            for (int i4 = 0; i4 < sizeof(num)/sizeof(string); i4++) {
                cout << num[i1] << num[i2] << num[i3] << num[i4] << endl;
            }
        }
    }
}} 
```

**结果**

```
0: A A A
1: B A A
2: C A A
3: A B A
4: B B A
5: C B A
6: A C A
7: B C A
8: C C A
9: A A B
... 
```

**请记住，组合的数量可能会被嘲笑。**

- 更新 -

生成所有可能组合的更好方法是使用此代码，可以在代码的“变量”部分轻松调整和配置。

```
#include<iostream>
#include<math.h>

int main() {
    //VARIABLES
    char chars[] = { 'A', 'B', 'C' };
    int password[4]{0};

    //SIZES OF VERIABLES
    int chars_length = sizeof(chars) / sizeof(char);
    int password_length = sizeof(password) / sizeof(int);

    //CYCKLE TROUGH ALL OF THE COMBINATIONS
    for (int i = 0; i < pow(chars_length, password_length); i++){

        //CYCKLE TROUGH ALL OF THE VERIABLES IN ARRAY
        for (int i2 = 0; i2 < password_length; i2++) {
            //IF VERIABLE IN "PASSWORD" ARRAY IS THE LAST VERIABLE IN CHAR "CHARS" ARRRAY
            if (password[i2] == chars_length) {
                //THEN INCREMENT THE NEXT VERIABLE IN "PASSWORD" ARRAY
                password[i2 + 1]++;
                //AND RESET THE VERIABLE BACK TO ZERO
                password[i2] = 0;
            }}

        //PRINT OUT FIRST COMBINATION
        std::cout << i << ": ";
        for (int i2 = 0; i2 < password_length; i2++) {
            std::cout << chars[password[i2]] << " ";
        }
        std::cout << "\n";

        //INCREMENT THE FIRST VERIABLE IN ARRAY
        password[0]++;
    }} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-20T20:43:59.737

该解决方案的基本思想是模仿您在高中时手动枚举所有组合而不重复的方式。设 com 为长度为 k 的 List[int]，而 nums 为给定 n 项的 List[int]，其中 n >= k。思路如下：

```
for x[0] in nums[0,...,n-1] 
    for x[1] in nums[idx_of_x[0] + 1,..,n-1]
        for x[2] in nums [idx_of_x[1] + 1,...,n-1]
        ..........
            for x[k-1] in nums [idx_of_x[k-2]+1, ..,n-1] 
```

显然，k 和 n 是可变参数，这使得无法编写显式的多个嵌套 for 循环。这就是递归解决问题的地方。语句`len(com) + len(nums[i:]) >= k`检查剩余的未访问前向列表是否可以提供 k iitems。向前，我的意思是你不应该向后走，以避免重复组合，它由相同的一组项目组成，但顺序不同。换句话说，在这些不同的顺序中，我们可以通过向前扫描列表来选择这些项目出现在列表中的顺序。更重要的是，此测试子句在内部修剪递归树，使其仅包含`n choose k`递归调用。因此，运行时间为 O(· `n choose k`)。

```
from typing import List

class Solution:
    def combine(self, n: int, k: int) -> List[List[int]]:
        assert 1 <= n <= 20
        assert 1 <= k <= n
        com_sets = []
        self._combine_recurse(k, list(range(1, n+1)), [], com_sets)
        return com_sets

    def _combine_recurse(self, k: int, nums: List[int], com: List[int], com_set: List[List[int]]):
        """
        O(C_n^k)
        """
        if len(com) < k:
            for i in range(len(nums)):
            # Once again, don't com.append() since com should not be global!
                if len(com) + len(nums[i:]) >= k:
                    self._combine_recurse(k, nums[i+1:], com + [nums[i]], com_set)
        else:
            if len(com) == k:
                com_set.append(com)
                print(com) 
```

```
sol = Solution()
sol.combine(5, 3)

[1, 2, 3]
[1, 2, 4]
[1, 2, 5]
[1, 3, 4]
[1, 3, 5]
[1, 4, 5]
[2, 3, 4]
[2, 3, 5]
[2, 4, 5]
[3, 4, 5] 
```************

# vb6 - 在 VB 和 MS Access 中使用 ADODC 搜索记录

> ID：12991759
> 
> 赞同：0
> 
> 时间：2012-10-20T19:12:11.733
> 
> 标签：vb6, ms-access-2010

我有一个包含三个字段 Fields(0,1,2) 的表，我想在 Visual Basic 中使用 ADODC 控件执行搜索。问题是我可以按顺序搜索或当我的记录集指针位于该记录上时。我只想以随机方式搜索记录。我使用 MS Access(*.mdb) 作为我的数据库并使用 ADODC 进行连接。`Text7 contains search key.`这是搜索命令按钮的 Click 事件：

```
Private Sub Search_Click()
Dim flag As Integer
flag = 0
Do

    If (Val(Text7.Text) = Adodc1.Recordset.Fields(0)) Then
        flag = 1
        Exit Do
    ElseIf (Val(Text7.Text) <> Adodc1.Recordset.Fields(0) & Adodc1.Recordset.EOF = True) Then
        flag = 0
        Adodc1.Recordset.MoveFirst
        Exit Do
    End If
    Adodc1.Recordset.MoveNext
Loop While Adodc1.Recordset.EOF = False

If (flag = 1) Then
    Label1.Caption = Adodc1.Recordset.Fields(0) 'executed when record found
    Label2.Caption = Adodc1.Recordset.Fields(1)
    Label3.Caption = Adodc1.Recordset.Fields(2)
Else
    x = MsgBox("Not Found")
End If
End Sub 
```

# c# - Application is working or not

> ID：12991762
> 
> 赞同：0
> 
> 时间：2012-10-20T19:12:29.833
> 
> 标签：c#, .net, wpf, winforms

How should I know if an application is working or processing something? Lets say that I'm trying to write a huge data into a file, on that time the application is not responding. I want to know the application current status.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:13:53.427

Use [BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx) componenet to process huge data in background thread. Notify user about progress via [ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx) event.

Sample:

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        backgroundWorker1.WorkerReportsProgress = true;
    }

    private void WriteDataButton_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
         for (int i = 1; i <= numberOfIterations; i++)
         {
             // write part of data
             backgroundWorker1.ReportProgress(i * 100 / numberOfIterations);
         }    
    }

    // This event handler updates the progress. 
    private void backgroundWorker1_ProgressChanged(
                object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }

    // This event handler deals with the results of the background operation. 
    private void backgroundWorker1_RunWorkerCompleted(
                object sender, RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("Huge data was written");
    }
} 
```

# html - 链接悬停css不起作用

> ID：12991772
> 
> 赞同：0
> 
> 时间：2012-10-20T19:13:58.470
> 
> 标签：html, css

HTML

```
<a class="topofpage" href="#top">TOP OF PAGE</a> 
```

CSS

```
.topofpage{
    color: #C00;    
    text-decoration: none;
}

.topofpage a:hover{
    color: #FCO;
    text-decoration: none;
} 
```

鼠标悬停颜色未更改为#FCO

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:15:57.457

在悬停事件中删除 CSS 中的锚元素。

```
.topofpage:hover{
    color: #FC0;
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T19:26:52.337

您的 CSS 以 class 元素内部的链接为目标`topofpage`。将选择器放在一起以定位具有类的链接：

```
a.topofpage:hover {
  color: #FC0;
  text-decoration: none;
} 
```

此外，正如 Pavlo 所发现的，您使用`#FCO`的不是`#FC0`颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:30:08.157

您的问题只是零和字母“O”之间的混淆。

您的颜色指定为`#FCO`。应该是`#FC0`。

字母“O”不是 CSS 颜色中的有效数字。这就是为什么你的风格不起作用的原因。它与是否悬停无关；这是一个简单的错字。

希望能为您解决。:-)

# asp.net - ASP.NET 页面未在 IIS8 上加载（Windows Server 2012）

> ID：12991776
> 
> 赞同：4
> 
> 时间：2012-10-20T19:14:28.880
> 
> 标签：asp.net, iis-8, windows-server-2012

我正在尝试设置我的 Windows Server 2012 来运行 ASP.NET 网站。该网站可以提供 html 页面和 .svc 页面，但每当我访问 .aspx 页面时，它就会超时。

> 错误 118 (net::ERR_CONNECTION_TIMED_OUT)

如果我至少会得到某种错误描述，我可以从那里开始，但我只会收到一条超时消息，就好像服务器完全不可用一样，所以我遇到了这个问题。

似乎根本没有加载 aspx 页面，因为我已经尝试过激烈的措施，例如在 Page_Load 的第一行中放置“抛出异常”。

如果我创建一个新站点并在其中放置一个 aspx 页面，它执行得很好。

事件日志没有显示与此相关的任何内容。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:54:41.720

在 IIS8 中创建一个新网站并指向同一个文件夹使其工作。现在该站点运行正常并且正常运行代码。

我的猜测是，如果我在安装所有需要的功能之前创建了网站，那么它们就不是该网站的一部分。现在，在安装了一个新站点后，它包含了所有当前的功能。

不过，这并没有太大意义，因为服务器从安装时就有了 ASP.NET 4.5（它是 Windows Server 2012）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T19:15:56.813

打开 Web 平台安装程序。

现在寻找`IIS: ASP.NET 4.5` 并安装它。

我和其他人有同样的问题，在我这样做之前没有任何效果。

在您的计算机/服务器上安装 dotNET 和为 IIS 安装 dotNET 是有区别的。

# android - 在 android ant 构建脚本的类路径中包含一个目录

> ID：12991777
> 
> 赞同：0
> 
> 时间：2012-10-20T19:14:37.660
> 
> 标签：android, ant

我是蚂蚁东西的新手

我有一个 android 项目，它有一组依赖 jar 文件，像这样

*   C:\soundlibs\lib-sound1.jar
*   C:\soundlibs\lib-sound2.jar
*   C:\graphicslibs\lib-graphics.jar

使用 ant 构建 android 项目时，我必须将所有 jar 复制到 android 项目的 libs 文件夹中，否则将无法构建

有没有办法将目录 C:\soundlibs 和 C:\graphicslibs 包含在类路径中，这样当 android 脚本运行 javac 目标时，它应该会自动找到相关的 jar，这样我就不必复制它们了？

谢谢 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:46:23.457

如果脚本需要依赖项才能启动，那么您应该将它们添加到系统类路径或使用命令行`-lib`开关。但通常情况并非如此。

**通常 jars 被赋予构建文件中的特定目标**`java`：主要是`javac`目标。有关详细信息，请参阅[javac 任务文档](http://ant.apache.org/manual/Tasks/javac.html)。

如果您自己编写脚本，只需在`classpath`属性中指定所有 jar。如果您使用现成的脚本，则必须查看它并检查 jar 的放置位置或如何提供本地路径。有时它很复杂，因为您必须学习将类路径传递给任务的复杂方法。

# javascript - 创建通用 Javascript/Jquery ajax 函数

> ID：12991779
> 
> 赞同：2
> 
> 时间：2012-10-20T19:14:43.480
> 
> 标签：javascript, jquery, ajax

我是 javascript、jquery 和 ajax 的新手，需要帮助来提高我的代码效率。我有以下 javascript/jquery 函数可以正常工作：

```
 <script type="text/javascript">
    $(document).ready(function()
    {
        $("#promo1").change(function() //select menu id that triggers script on change
        {
           //data here

            $.ajax
            ({
               //ajax stuff here
                {
                    //individual values from json array

                    //set each value textbook value
                    $("#discprice1").val(disc);
                    $("#itemprice1").val(total);
                    $("#tax").val(tax);
                    $("#grandtotal").val(grand);
                }
            });

        });

    });
    </script> 
```

在提出建议后，我将原始功能更改为此：

```
 <script type="text/javascript">
    $(document).ready(function()
    {
        var setupCalculation = function(index) {

            $("#promo" + index).on("change", function() //select menu id that triggers script on change
            {
 //rest of the function is here.... 
```

并将我的选择更改为：

```
 <select name="promo<?php echo $i; ?>" id="promo<?php echo $i; ?>" 
onchange="setupCalculation('<?php echo $i; ?>');"> 
```

但是，它不起作用。我错过了什么？

但是，对于 10 行不同的计算，我需要做 10 次相同的事情。我怎样才能做到这一点，以便我可以通用地使用这个函数，只需将选择框的“id”传递给函数，而不是为每个选择器重复此代码 10 次，例如#promo1、#promo2、#promo3 等……

我假设我需要添加 onchange="javascript function here();" 到 html 代码，但我无法让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:21:45.413

这是您应该编写一个小插件的情况。看看它的样子（我没有得到你需要的东西，但你会掌握这个想法）：

```
$.fn.myFirstPlugin = functin() {
    return this.each(function() {
        // This is currect select box  
        var $select = $(this);

        // Change event
        $select.change(function() {
            // Do something for this select box; $(this) will point to current select element
            $.ajax({ ... })
        });
    })
}; 
```

然后你会像这样使用它：

```
$('#promo1, #promo2, #promo3').myFirstPlugin(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:20:34.913

我不会使用内联的“onchange”属性，而是使用您当前的方法来连接事件处理程序。这样你就可以定义一个函数`setupCalculation`来连接给定选择列表的逻辑。

```
$(document).ready(function() {

    var setupCalculation = function(id) {
        $("#" + id).on("change", function() {
            // ajax/calculation logic
        });
    }

    setupCalculation("promo1");
    setupCalculation("promo2");
    // ...etc
}); 
```

如果结果元素不同（例如 discprice2、discprice3 等），那么最好将索引传递给函数，并对 id 的名称部分进行硬编码：

```
var setupCalculation = function(index) {
    $("#promo" + index).on("change", function() {

        // ajax stuff 
        $("#discprice" + index).val(disc);
        // etc
    });
} 
```

* * *

**编辑**使用表单`onchange=setupCalculation()`，函数应该如下所示（无需连接更改事件）：

```
$(document).ready(function()
{
    window.setupCalculation = function(index) {
       //rest of the function is here.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:22:22.910

您可以设置一个 jQuery 函数并从所选对象中调用它：

```
$.fn.changePromo = function() {
    /* return this jQuery object to allow chaining and execute in an 'each()' to allow multiple elements */
    return this.each( function() {
        $( this ).change( function() {
            /* your ajax call here */
        } );
    } );
}

/* call examples */
$( '#promo1' ).changePromo();
$( '#promo1,#promo2' ).changePromo(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:20:43.920

听起来你的选择框看起来像

```
<select id="promo1">...</select>
<select id="promo2">...</select> 
```

为每个添加一个类

```
<select id="promo1" class="promo">...</select>
<select id="promo2" class="promo">...</select> 
```

这样您就可以使用一个简单的选择器为`change`事件函数选择所有框：

```
$(".promo").change(function() {
    ...
}); 
```

# c# - 后台工作人员没有停止

> ID：12991794
> 
> 赞同：1
> 
> 时间：2012-10-20T19:16:50.110
> 
> 标签：c#, .net, wpf, multithreading, backgroundworker

我有一个后台工作人员的应用程序。在 doWork 方法中，我执行了一个 html Web 请求。如果此请求失败（例如错误 404），我想在线程完成之前退出该线程。所以在我的捕获中，我添加了这段代码

```
 worker.CancelAsync();
    if (worker.CancellationPending)
    {
     e.Cancel = true;
    } 
```

问题是线程并没有停止，而是创建了一个新的 html web 请求。

一些代码：

```
try
{
var request = (HttpWebRequest)WebRequest.Create(url1);
request.Timeout = 5000;
request.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5";
var document = new HtmlAgilityPack.HtmlDocument();
try
{
using (var responseStream = request.GetResponse().GetResponseStream())
{
document.Load(responseStream, Encoding.UTF8);
//some lines of code to parse html
}
catch (WebException we){
worker.CancelAsync();
if (worker.CancellationPending)
{
e.Cancel = true;
return;
}
}
catch (Exception) { } 
```

这是我的工作方法...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T19:23:34.770

您需要设置`worker.WorkerSupportsCancellation`为`true`. 默认值为`false`。在运行之前将属性设置为 true -

```
BackgroundWorker worker = new BackgroundWorker();
worker.WorkerSupportsCancellation = true;
worker.RunWorkerAsync(); 
```

**编辑**

设置`cancel`属性并`return`从 DoWork 方法 -

```
if (worker.CancellationPending)
{
   e.Cancel = true;
   return;
} 
```

# r - Topicmodels 转置术语文档矩阵

> ID：12991795
> 
> 赞同：4
> 
> 时间：2012-10-20T19:16:52.763
> 
> 标签：r

我正在尝试使用 R 中的 topicmodels 包运行 LDA。手册中给出的示例使用美联社数据并且运行良好。但是，当我在自己的数据上尝试它时，我会得到术语是文档名称的主题。我已经将问题追溯到我的术语文档矩阵是应该的方式的转置（行->列）。

示例 TDM：

```
str(AssociatedPress)
List of 6
$ i       : int [1:302031] 1 1 1 1 1 1 1 1 1 1 ...

$ j       : int [1:302031] 116 153 218 272 299 302 447 455 548 597 ...
$ v       : int [1:302031] 1 2 1 1 1 1 2 1 1 1 ...
$ nrow    : int 2246
$ ncol    : int 10473
$ dimnames:List of 2
..$ Docs : NULL
..$ Terms: chr [1:10473] "aaron" "abandon" "abandoned" "abandoning" ...
- attr(*, "Weighting")= chr [1:2] "term frequency" "tf"
- attr(*, "class")= chr [1:2] "DocumentTermMatrix" "simple_triplet_matrix" 
```

鉴于，我的 TDM 将术语作为行，将文档作为列：

```
List of 6
$ i       : int [1:10489] 1 3 4 13 20 24 25 26 27 28 ...
$ j       : int [1:10489] 1 1 1 1 1 1 1 1 1 1 ...
$ v       : num [1:10489] 1 1 1 1 2 1 67 1 44 3 ...
$ nrow    : int 5903
$ ncol    : int 9
$ dimnames:List of 2
..$ Terms: chr [1:5903] "\u2439aa" "aars" "\u2439ab" "\u242dab" ...
..$ Docs : chr [1:9] "art111130.txt" "art111131.txt" "art111132.txt" "art111133.txt" ...
- attr(*, "class")= chr [1:2] "TermDocumentMatrix" "simple_triplet_matrix"
- attr(*, "Weighting")= chr [1:2] "term frequency" "tf" 
```

这导致`LDA(art_tdm,3)`基于文档名称而不是文档中的术语构建主题。这是 tm 包的代码库的变化吗？我无法想象我会做什么来在我的代码中导致这种转置：

```
art_cor<-Corpus(DirSource(directory = "tmptxts"))
art_tdm<-TermDocumentMatrix(art_cor) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:15:07.043

一方面你有一个“TermDocumentMatrix”类的对象，另一方面你有一个“DocumentTermMatrix”。

你可能只需要这样做：

```
art_tdm<-DocumentTermMatrix(art_cor) 
```

# ruby-on-rails - Ruby 中的反向查找（最好使用 Dnsruby）

> ID：12991797
> 
> 赞同：0
> 
> 时间：2012-10-20T19:16:56.587
> 
> 标签：ruby-on-rails, ruby

使用 Dnsruby，这很棒，但是如何反向查找与 IP 地址关联的主机名？或者如果不是 dnsruby，其他建议的路线？

到目前为止，这是我正在使用的内容，我认为我的查询也将具有解析的名称，但对我来说并不明显。

```
resolver = Resolver.new
query = resolver.query("example.com")
ip =  query.answer.first.address.to_s 
```

至于更多背景，我基本上在监控应用程序中使用它，以及在 Amazon EC2 上的应用程序，我想看看我们分配的 IP 解析到什么。我希望我可以用它来进一步评估它的潜在位置等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:47:22.087

[`Socket class`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Socket.html)可用于根据地址查找主机名。

有关示例，请参[见此答案。](http://www.ruby-forum.com/topic/171218#750910)

# php - 填写div的内容

> ID：12991800
> 
> 赞同：-3
> 
> 时间：2012-10-20T19:17:24.713
> 
> 标签：php, jquery, ajax

我在 some.php 页面上有这个表单，当我单击提交按钮时，我希望从表单中查询此数据并将其显示在 index.php 中`<div id="content">`。我尝试用 jquery 做一些事情，但我不擅长，所以如果有人可以帮助我？:) 编辑：我尝试过这样的事情，但它在 index.php 中不起作用。是否可以将表单数据发送到 blah.php 并在 blah.php 上执行查询，然后将其加载到 index.php 中`<div id="content">`？

```
<?php if(isset($_POST['search']))
{
$my_html  = "<script type='text/javascript'>"  ;
$my_html .= "$('#content').fadeIn(1500);" ;
$my_html .= " $('#content').load('blah.php');";

$my_html .= "</script>";
echo $my_html ;
}
?> 
```

一些.php

```
<form id="search" name="search" method="post" action="index.php">
     Price from:
    <input type="text" name="from" id="from" width="50px" />
     Price to: 
     <input type="text" name="to" id="to" width="50px" />
<input type="submit" class="btn_advancedsearch" name="search" id="search" value="Search" />
     </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:20:16.147

你可以这样做：

```
<script type="text/javascript>
   loadContent()
   {
           $('#content').load('blah.php')
   }
</script>
<form id="search" name="search" method="post" action="index.php">
     Price from:
    <input type="text" name="from" id="from" width="50px" />
     Price to: 
     <input type="text" name="to" id="to" width="50px" />
<input type="button" onclick="loadContent()" class="btn_advancedsearch" name="search" id="search" value="Search" />
     </form> 
```

显然，您必须确保 blah.php 在您的 div 中返回您想要的任何内容 - 您可以将名字和姓氏放在查询字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:20:26.067

你的意思是这个？

```
if ($_POST['from'])
{
// form is sent
} 
```

# php - Firefox 弹出窗口不会收到 cookie

> ID：12991806
> 
> 赞同：1
> 
> 时间：2012-10-20T19:17:43.497
> 
> 标签：php, javascript, html, firefox, popup

我正在链接到在窗口中打开的另一个页面。

链接在这里：

```
<a href='#' onclick=\"window.open('linkadress.php here."','targetWindow','toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=200,height=200')\" /> 
```

现在，当我打开文件时，我希望它显示给登录的人，这就是我遇到问题的地方。我将我的文件包含在登录脚本中，并同时使用 session_start(); 和 ob_start(); 在窗口中打开的页面上，但它不会在那里使用我的cookies..

有谁知道为什么会这样？

*更新：* 我这样设置我的 cookie：

```
setcookie("cookiename", $value, time()+600); 
```

大师是 test.com/test/index.php 弹出是 test.com/test/pages/popup.php

***更新*****我发现它在 IE 中完美运行，但在 Firefox 中却不行。有谁知道我能做些什么来解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:41:41.137

看起来您正在某个子目录中设置 cookie，而不是域的根目录，这应该可以解决您的问题：

```
setcookie("cookiename", $value, time()+600, "/"); 
```

# c++ - 停止从 QGraphicsItem 到 QGraphicsScene QT 的事件传播

> ID：12991807
> 
> 赞同：0
> 
> 时间：2012-10-20T19:17:51.700
> 
> 标签：c++, qt, events

我有一个 Qgraphicsscene 实现为一个类，然后我使用 QGraphicsScene::mousePressEvent 添加一个 QGraphicsRectItem，这个项目也有一个 QGraphicsRectItem::mousePressEvent 的实现，问题是矩形项目中的事件被传播到场景以及何时我点击它添加了一个新的矩形项目，但我想要的是该项目内的事件不会传播到场景，我尝试事件->接受但事件被传播，我怎么不能这样做？谢谢你的帮助。

这是我的 qgraphicsscene 代码：

```
#include "imageview.h"

ImageView::ImageView(QWidget *parent){
    scene = new ImageScene(this);
    setScene(scene);
    //this->setMouseTracking(true);
    this->setInteractive(true);
}

ImageScene::ImageScene(QWidget *parent){
    current = NULL;
    selection = new QRubberBand(QRubberBand::Rectangle,parent);
    selection->setGeometry(QRect(10,10,20,20));
    setSceneRect(0,0,500,500);
}

void ImageScene::mousePressEvent(QGraphicsSceneMouseEvent *event){
    QGraphicsScene::mousePressEvent(event);
    /*IGNORING THIS EVENT FROM QGRAPHICSRECTITEM*/
    cout<<"image view"<<endl;
    if(this->selectedItems().length() == 0){ /*WORKS BUT IN SOME IMPLEMENTATION IS A PROBLEM (WHEN I DELETE THE ITEM WITH A DELETE BUTTON THE EVENT IS FIRED AND ADD A NEW ITEM .)*/
        origin = event->scenePos();
        selection->show();
    }
}
void ImageScene::mouseReleaseEvent(QGraphicsSceneMouseEvent *event){
    if(selection->isVisible() && selection->rect().width() >= 20 && selection->rect().height() >= 20){
        QGraphicsScene::mouseReleaseEvent(event);

        ResizableRect * rselection = new ResizableRect();
            //selection->origin = event->scenePos();
            //selection->grabMouse();
        cout<<"add"<<endl;
        this->addItem(rselection);
        rselection->setPos(selection->pos());
        rselection->setRect(0,0,selection->rect().width(),selection->rect().height());
    }
    selection->hide();

}
void ImageScene::mouseMoveEvent(QGraphicsSceneMouseEvent *event){
    QGraphicsScene::mouseMoveEvent(event);
    if(selection->isVisible()){
        QPoint rorigin(origin.x(),origin.y());
        int xdes = event->scenePos().x();
        int ydes = event->scenePos().y();
        xdes = xdes > 0? xdes:0;
        ydes = ydes > 0? ydes:0;
        xdes = xdes < this->width()?xdes:this->width();
        ydes = ydes < this->height()?ydes:this->height();

        QPoint rdest(xdes,ydes);
        selection->setGeometry(QRect(rorigin,rdest).normalized());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:05:24.583

与 QWidgets 相对，QGraphicsScene 在子项之前捕获事件。它在 Qt 文档中有所描述。

为了正确使用它，请使用 QGraphicsView 的重新实现而不是 QGraphcisScene。在那里重新实现 mousePressEvent。

此时您可以确定鼠标指针下的项目。它就在那里 - 你可以调用 QGraphicsView::mousePressEvent(); 它不是 - 使用您的实现来添加新项目。

它还允许您分离不同视图的行为。

# ios - 在 Xcode 中显示第一个故事板场景的独特问题

> ID：12991810
> 
> 赞同：1
> 
> 时间：2012-10-20T19:18:18.633
> 
> 标签：ios, xcode, storyboard

我已经尝试了 2 天来让我的故事板显示以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
   UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *LoginViewController = [storyboard instantiateInitialViewController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = LoginViewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

但是，我的主目录中不断出现此错误和 sigbart：'NSInvalidArgumentException'，原因：'在捆绑包 NSBundle（已加载）中找不到名为'MainStoryboard' 的故事板'

谷歌似乎没有出现关于这些错误的信息？有谁知道如何解决它？

**更新：当我将其更改为：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    UIViewController *LoginViewController = [storyboard instantiateInitialViewController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = LoginViewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

它给了我错误：[3208:c07] 如果要使用主情节提要文件，应用程序委托必须实现窗口属性。

{AppDelegate setWindow:]：无法识别的选择器发送到实例 0x962bf30

[3208:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AppDelegate setWindow:]：无法识别的选择器发送到实例 0x962bf30”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:47:55.757

终于找到了！！！！！！原来我忘了把这行代码放在应用程序委托头文件中：

```
@property (strong, nonatomic) UIWindow *window; 
```

# php - 带有 Web 浏览器的空白页面（错误 500），可以使用 php 命令

> ID：12991815
> 
> 赞同：1
> 
> 时间：2012-10-20T19:19:01.043
> 
> 标签：php, apache, ubuntu

代码：

```
<?php
error_reporting(E_ALL);
$im = imagecreatefrompng("/var/www/banner.png");
header('Content-Type: image/png');
imagepng($im);
imagedestroy($im);
?> 
```

有效的命令：

```
sudo -u www-data php banner.php > test.png
php banner.php > test.png (as root) 
```

这些会生成一个可以通过 Web 浏览器查看的文件。有任何想法吗？

/var/log/apache2/error.log 中没有任何内容

设置 display_errors = On 解决了这个问题。将其重新设置为关闭并重新启动也可以解决问题现在似乎已修复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:55:24.140

你有一个权限问题，因为文件或目录是用 root 创建的 apache 将没有正确的权限

如果权限是问题，您可以执行以下操作：

```
chown nobody:nogroup -R /var/www/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:47:44.550

在打开 display_errors、重新启动 apache、再次将其关闭然后再次重新启动后，该问题得到了排序。

# django - 在重组中重命名石斑鱼

> ID：12991823
> 
> 赞同：0
> 
> 时间：2012-10-20T19:19:51.483
> 
> 标签：django, templates

我已阅读[此](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)内容，但我还有一个问题：如何在模板中重命名 country.grouper？我“分组”工作日 - week_days.grouper，它就像 1、2、3 等。但我想在模板中更改它 - 星期日、星期一等。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:13:36.787

自[定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)应该可以帮助您。它必须放入一个文件中，例如`my_custom_filters.py`在您的应用程序中名为 templatetags 的文件夹中：

```
from django import template
register = template.Library()

def get_weekday(value):
    """returns the weekday for the given number - 0 indexed"""
    wd_list = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
    return wd_list[int(value)] 
```

这个自定义过滤器将像这样使用：

```
{% load my_custom_filters %}

{% regroup day by weekdays as weekday_list %}

<ul>
{% for day in weekday_list %}
    <li>{{ day.grouper|get_weekday }}
    <ul>
        {% for item in day.list %}
          <li>{{ item.name }}: {{ item.population }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

如果您使用的是日期对象，则可以使用内置[日期](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)模板标签将日期转换为相应的工作日：

```
{% regroup day by weekdays as weekday_list %}

<ul>
{% for day in weekday_list %}
    <li>{{ day.grouper|date:"w" }}
    <ul>
        {% for item in day.list %}
          <li>{{ item.name }}: {{ item.population }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

# c# - 选择文件后如何自动上传文件

> ID：12991824
> 
> 赞同：5
> 
> 时间：2012-10-20T19:19:59.767
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

我有以下代码用于在我的网站中上传文件：

```
@using (Html.BeginForm("UploadProfileImage", "Member", FormMethod.Post, new { @encType = "multipart/form-data" }))
   {

     @Microsoft.Web.Helpers.FileUpload.GetHtml(initialNumberOfFiles: 1, includeFormTag: false, uploadText: "Upload File",allowMoreFilesToBeAdded:false)
    <span class="success">@ViewData["SuccessMessage"]</span>
     <input class="button" type="submit" name="submit" value="Upload" />         

} 
```

我希望它能够在用户从“浏览”按钮中选择文件后自动发布。目前，每次用户选择要上传的文件时，用户都必须点击上传，无论如何要使这个过程自动化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:38:42.413

文件上传控件支持`onchange`事件。希望可以用来触发上传

```
<form name="upload" action="uploadfile.aspx" method="POST">
    <input name="myfile" type="file" onchange="UploadFile()" />
</form>

<script>
   function UploadFile()
   {
      //do validation here
      document.forms['upload'].submit();
   }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:34:13.493

ASP：

```
<input type="file" onchange="this.form.submit();" name="fUpload"/> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        System.Web.HttpPostedFile file = Request.Files["fUpload"];
        if (file != null && file.ContentLength > 0)
        {
            file.SaveAs(@"C:\dir\"+System.IO.Path.GetFileName(file.FileName));
        }
    }

} 
```

**asp:FileUpload 而不是输入：**

ASP：

```
<asp:FileUpload runat="server" onchange="this.form.submit();" ID="fuFile"/> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        if (fuFile.PostedFile.FileName != string.Empty  && fuFile.PostedFile.ContentLength > 0)
        {
            fuFile.PostedFile.SaveAs(@"C:\dir\" + fuFile.FileName);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:28:43.400

[**FileUpload**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx) **不支持**任何类型的自动将所选文件上传到服务器。您将不得不提供某种机制 - 请参阅*MSDN*

> *保存上传的文件*
> 
> FileUpload 控件**不会**在用户选择要上传的文件后自动将文件保存到服务器。**您必须明确提供一种控制或机制以允许用户提交指定的文件。**例如，您可以提供用户单击以上传文件的按钮。为保存指定文件而编写的代码应调用 SaveAs 方法，该方法将文件的内容保存到服务器上的指定路径。通常，SaveAs 方法在事件处理方法中调用，该方法会引发回发到服务器的事件。...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:58:33.770

我没有使用 Microsoft.web 库，但如果你可以在文件上传后自动调用 java 脚本函数，那么你也可以实现这一点。

如果您可以在此行中调用 javascript 函数：

```
@Microsoft.Web.Helpers.FileUpload.GetHtml(initialNumberOfFiles: 1, includeFormTag: false, uploadText: "Upload File",allowMoreFilesToBeAdded:false) 
```

# java - 最终关键字的优化

> ID：12991841
> 
> 赞同：5
> 
> 时间：2012-10-20T19:22:15.070
> 
> 标签：java, memory, keyword, final, allocation

在 Java 中，final 关键字似乎将构造与初始化分开，这表明意图以类似于数组的方式阻止对象的内存使用。

如果我有一个非递归对象层次结构，并且所有字段都是最终的，那么该内存只需要分配一次，并且还不如为缓存连续分配。JVM真的会这样做吗？如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:55:23.907

简短的回答是：

> Hotspot 中没有基于类或方法是否为最终的类/方法优化。

[您可以在本文](http://www.javamex.com/tutorials/java_final_performance.shtml)中阅读更多内容。

# zk - zkoss 没有绑定值

> ID：12991843
> 
> 赞同：0
> 
> 时间：2012-10-20T19:22:26.810
> 
> 标签：zk

我的 zkoss 代码没有绑定 java 方法的值。

```
<window border="normal" id="home"
    apply="com.test.HomeController">
    <caption label="@{home.name}"></caption>
            <button label="text"></button>
</window>

public class HomeController extends GenericForwardComposer{

    public  String getName() {
        return "MY ZKOSS";
    }

} 
```

窗口标题未显示 MY ZKOSS 。谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:30:06.663

ZK 可以使用 MVVM 模式。

```
<window id="win" apply="org.zkoss.bind.BindComposer" viewModel="@id('vm') @init('myController')">
     <caption label="@load(vm.myText)"></caption>
</window>

public class myController {
private String name = "MY ZKOSS";

    public  String getName() {
        return name;
    }

public  void setName(String name) {
        this.name =  name;
    }
} 
```

[ZK 开发者参考 - MVVM](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:42:33.257

通过 getter 对从 GenericForwardComposer 扩展的控制器进行值绑定将与 EL 表达式一起使用，例如`label="${$composer.name}"`

如果控制器从组件基类扩展，例如`HomeController`从扩展`Window`而不是`GenericForwardComposer`. 为此，请更改`apply`为`use`如下所示

```
<?init class="org.zkoss.zkplus.databind.AnnotateDataBinderInit" ?>
<window border="normal" id="home" use="com.test.HomeController">
    <caption label="@{home.name}"></caption>
    <button label="text"></button>
</window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T22:30:10.420

这可能会对您有所帮助。

控制器：

```
package foo;
import org.zkoss.zk.ui.select.SelectorComposer;
import org.zkoss.zk.ui.select.annotation.Wire;
import org.zkoss.zk.ui.select.annotation.Listen;
import org.zkoss.zul.*;

public class MyComposer extends SelectorComposer<Window> {

    @Wire
    Textbox input;
    @Wire
    Label output;

    @Listen("onClick=#ok")
    public void submit() {
        output.setValue(input.getValue());
    }
    @Listen("onClick=#cancel")
    public void cancel() {
        output.setValue("");
    }

} 
```

在你的 zul 中：

```
<window apply="foo.MyComposer">
    <div>
        Input: <textbox id="input" />
    </div>
    <div>
        Output: <label id="output" />
    </div>
    <button id="ok" label="Submit" />
    <button id="cancel" label="Clear" />
</window> 
```

成员字段 input、output 自动分配有标识符分别为“input”和“output”的组件。当用户点击相应的按钮时，将调用 submit() 和 cancel() 方法。

[http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Controller/Composer#Custom_Controller](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Controller/Composer#Custom_Controller)

# php - AJAX 密码更改

> ID：12991849
> 
> 赞同：0
> 
> 时间：2012-10-20T19:23:18.860
> 
> 标签：php, jquery, html, sql, pdo

所以我试图在我的网站上实现密码更改功能，我想在**不**刷新页面的情况下提交密码表单。所以我正在尝试使用ajax。这是我的html：

```
<form id="change_Pass" action="" method="post">
    Current Password<input type="password" id="change_password" name="change_password"><br>
    New Password<input type="password" id="new_password" name="new_password"><br>
    Verify Password<input type="password" id="verify_password" name="verify_password"><br>
    <input type="submit" value="Submit">
</form> 
```

然后是jQuery：

```
$('#change_Pass').submit(function(e){
    $.ajax({
        data: $(this).serialize(), // get the form data
        type: $(this).attr('POST'), // GET or POST
        url: $(this).attr('Private/change_password.php'), // the file to call
        success: function(response) { // on success..
            $('#success_div).html(response); // update the DIV
        },
        error: function(e, x, r) { // on error..
            $('#error_div).html(e); // update the DIV
        }
    });
    e.preventDefault();
}); 
```

然后是php：

```
<?php
$usr = $_SESSION["username"];
$old_pwd = $_POST["change_password"];
$new_pwd = $_POST["new_password"];

$link = new PDO('mysql:host=*;dbname=*;charset=UTF-8','*','*');
$query = "SELECT *
        FROM Conference
        WHERE Username = :un";

$stmt = $link->prepare($query);

$stmt->bindParam(':un', $usr);
$stmt->execute();
$row = $stmt->fetchAll();

$hash = $row[0]["Password"];
$is_correct = Bcrypt::check($old_pwd, $hash);
if($is_correct) {
    $query = "UPDATE Conference
            SET `Password`=:new_pwd 
            WHERE Username = :usr";

    $stmt = $link->prepare($query);
    $stmt->bindParam(':new_pwd', $new_pwd);
    $stmt->bindParam(':usr', $usr);
    $stmt->execute();
} 
```

但我被困在一些事情上。
1）如何将数据发布到 change_password.php 而不是序列化它以便我可以使用`$_POST`？
2) change_password 看起来是否正确？它基本上是检查`current password`用户使用数据库中现有密码输入的内容。如果它们匹配，那么它会更改密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:24:48.927

你的 JS 有点不对劲。看我的评论：

```
$('#change_Pass').submit(function(e) {
    var $this = $(this);                    // It's a good to cache stuff

    $.ajax({
        data: $this.serialize(),
        type: $this.attr('method'),         // You want `method` here
        url: 'Private/change_password.php', // Dunno why you used `attr`
        success: function(response) {
            $('#success_div').html(response);
        },
        error: function(e, x, r) {
            $('#error_div').html(e);
        }
    });

    e.preventDefault();
}); 
```

此外，您的密码更改逻辑对我来说看起来不正确。您正在使用 Bcrypt，因此无需（*也不*应该需要）以明文形式存储用户的密码。

存储密码的 Bcrypt 哈希而不是密码。这就是密码散列的全部意义所在。

# ruby - 我可以在编写正在调用的命令的模式下运行 Ruby (1.9.1) 吗？

> ID：12991853
> 
> 赞同：2
> 
> 时间：2012-10-20T19:23:50.217
> 
> 标签：ruby, debugging

我正在尝试了解一个中型库，并且我想运行一个测试脚本，以便我可以看到正在处理的命令。

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:18:12.353

您可以使用[Kernel#set_trace_func](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-set_trace_func)来跟踪所有`call`事件：

```
class Foo
  def bar
  end
end

set_trace_func proc { |event, file, line, id, binding, classname|
  if event == "call"
    printf "%8s %s:%-2d %10s %8s\n", event, file, line, id, classname
  end
}

Foo.new.bar

# =>    call foo.rb:2         bar      Foo 
```

# ios - 将问题迁移到 iphone 5 分辨率

> ID：12991855
> 
> 赞同：0
> 
> 时间：2012-10-20T19:24:01.877
> 
> 标签：ios, ios6, iphone-5

我正在使用 XCode 4.5.1 和 iOS 模拟器（视网膜 4 英寸）

我有一年前做的项目。所以现在我想将我的项目迁移到新的分辨率。

我的问题是下一个：

我将代码集成到我的项目中以检测我拥有的分辨率。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds]; 
```

但是在我将 screenBounds 的值输出到 NSLog 之后，我得到了宽度 = 320 和高度 = 480，但我预计会看到 1136 × 640。

你有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:22:52.790

您确定您使用的是 4 英寸模拟器吗？`[[UIScreen mainScreen] bounds]`将以点为单位返回屏幕边界，而不是像素。所以在 4 英寸 iPhone 中`CGRect`返回的应该是**320x568**。

所以如果你打电话`[[UIScreen mainScreen] bounds]`：

*   <= iPhone 3GS：320x480
*   iPhone 4 和 iPhone 4S：320x480
*   iPhone 5：320x568

**注意：**如果您没有添加`Default-568h@2x.png`文件，并且应用程序以*信箱*方式运行，则您使用的方法将返回 iPhone 4 和 4S 值。

**提示：**要确定您使用的是 iPhone 5 还是其他设备，此代码可能会派上用场：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )

if( IS_IPHONE_5 )
{
    // iPhone 5
}
else
{
   // Other
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:22:58.683

要使您的应用程序适应新的更高屏幕，您要做的第一件事是将启动图像更改为：Default-568h@2x.png。它的大小应为 1136x640 (HxW)。是的，在新的屏幕尺寸中使用默认图像是让您的应用程序占据整个新 iPhone 5 屏幕的关键。

此外，您还必须采取更多步骤：

确保您的 Xibs/Views 使用自动布局来调整自己的大小。使用弹簧和支柱来调整视图大小。如果这对您的应用程序来说还不够好，请为一种特定的屏幕尺寸设计您的 xib/storyboard，并以编程方式为另一种屏幕尺寸重新定位。

# xslt - 使用 XSL 创建相对路径 - baselink:SitemapBaseLink --- cocoon, xslt

> ID：12991856
> 
> 赞同：0
> 
> 时间：2012-10-20T19:24:15.503
> 
> 标签：xslt, apache-cocoon

问题是我有一个通用的“XHTML 模板”但相对位置不同，然后一些页面没有 css 文件。

我试图在站点地图（茧）上这样做

```
<map:match pattern="index.html">
    <map:generate src="data/courses-small.xml" type="file"/>
    <map:transform src="xsl/department_listing.xsl" type="xslt2" >
      <map:parameter name="relative_path" value="{baselink:SitemapBaseLink}"/>
    </map:transform>
    <map:serialize type="xhtml" />
  </map:match> 
```

然后在常见的 xsl 顶部我有这个

```
<xsl:param name="relative_path"/> 
```

后来我使用这样的参数：

```
<xsl:template match="/">
        <html>
            <head>
                <title><xsl:value-of select="$displaytitle"/></title>
                 <link rel="stylesheet" type="text/css" href="http://localhost:8080/cocoon/assignment2/css/style.css" /> 
                <link rel="stylesheet" type="{$relative_path}css/style.css" />
            </head> 
```

问题是 $relative_path 没有产生任何值，变量是空的，我不知道如何修复它。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:19:37.020

# $relative_path 不产生任何值在这里是正常的

`$relative_path` **如果您“匹配”*位于 cocoon 应用程序根目录的 URL*，“按文件夹”，**逻辑上会产生一个空字符串，就像您在上下文中所做的那样**`<map:match pattern="index.html">…&lt;/map:match>`**

 **然而，

*   `$relative_path`如果您“匹配”一个模仿相对于根目录的单文件夹结构的 URL，将解析为`../`字符串，例如在类似于`<map:match pattern="subfolder/index.html">…&lt;/map:match>`或的上下文中`<map:match pattern="*/index.html">…&lt;/map:match>`
*   它将`../`根据伪文件夹结构输出尽可能多的内容（如`../../../..`在上下文中`<map:match pattern="foo/*/bar/*/index.html">…&lt;/map:match>`）

这应该是它。

* * *

我没有，那么您的设置中可能还有其他怪癖：

*   确保你的 CSS 有匹配器：如果你把它的 URL 放在浏览器的地址栏中，它是否被 Cocoon 成功地提供了服务？

*   不要打错字：也许它只是在 SO 而不是在您的代码中，但您应该在 XSL 中修复 HTML：

    ```
    <link rel="stylesheet" type="{$relative_path}css/style.css" />
    <!-- should read: -->
    <link rel="stylesheet" type="text/css" href="{$relative_path}css/style.css" /> 
    ```

*   [正如Dimitre Novatchev](https://stackoverflow.com/users/36305/dimitre-novatchev)所指出的，确保您`<xsl:param name="relative_path"/>`在 XSL 中的位置正确，例如：

    ```
    <xsl:stylesheet version="1.0" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:param name="relative_path" />
      <xsl:template match="/">
        …
      </xsl:template>
    </xsl:stylesheet> 
    ```

.**

# python - Python - 引用对象属性

> ID：12991858
> 
> 赞同：0
> 
> 时间：2012-10-20T19:24:24.400
> 
> 标签：python, oop

我正在做一个试图代表电子电路的项目。这个问题不涉及电路理论，只涉及对象之间的连接。

问题是我需要以两种不同的方式在两个对象之间建立连接。

我有一个组件和一个节点。一个组件有两个端子（正极和负极），每个端子都连接到一个节点。一个节点可以有许多不同的终端连接到它。

所以，我可以拥有

`component1.positive = node1`

但如果我也想做

`node1.add_terminal( component1.positive )`

那只会给 node1 一个对自身的引用。

我希望能够让节点包含哪些组件的哪些终端连接到它或引用它的集合，而无需编写

`node1.add_terminal( component1, "positive")`

或类似的东西。

那么，有没有办法存储“component1.positive”，以便可以将其返回到组件和该组件的特定终端？还是有另一种方式来表示这种多对一和一对多的关系？

编辑：

重要的是 Node 对象可以告诉它连接到的组件的两个终端中的哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:31:15.123

您可以使用属性。考虑一下（更新）：

```
class Terminal(object)
    def __init__(self, component, node = None):
        self.component = component
        self.node = node

    def connect(self, node):
        node.add_terminal(self)
        self.node = node

    def disconnect(self):
        self.node.remove_terminal(self)
        self.node = None       

class Component(object):
    def __init__(self):
       self._positive = Terminal(self)

    @property
    def positive(self):
        return self._positive

    @positive.setter
    def positive(self, node):
        self._positive.connect(node)

    @positive.deleter
    def positive(self):
        self._positive.disconnect() 
```

用法：

```
c = Component()
n = Node()

c.positive = n # at this point c.positive.connect(n) thus
               # n.add_terminal(c.positive) is called 
del c.positive # at this point positive is "disconnected" 
               # from the node and vise-versa.
# or disconnect explicitly
c.positive.disconnect() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:35:55.040

简而言之，你不能。没有对对象属性的引用，只有对对象的引用。您确实必须将对象存储为一个标识符，该标识符表示该对象中的存储位置（不必是作为属性名称的字符串，可以是作为成员的字典的键或索引进入列表）。

但是，您不一定需要这些信息。对这些关系进行不同的建模可能更有意义，和/或不给对象本身知识，而是将它们视为一个图并在该图上执行遍历。这使您了解每个引用的端点，而无需明确记录它。

# vb.net - VB.NET UTF-8 转字符串

> ID：12991861
> 
> 赞同：0
> 
> 时间：2012-10-20T19:25:18.633
> 
> 标签：vb.net, visual-studio-2010

我在我的 VB.NET datgridview1 中从 MySql 获取数据库。通过单击任意记录号，详细信息显示在richtextbox1 中。

我的数据库是 UTF-8 格式，通过单击任何记录详细信息都是这样的

```
&#1593;&#1605;&#1585;&#1575;&#1606; &#1582;&#1575;&#1606; &#1575;&#1608;&#1585; &#1575;&#1606;&#1608;&#1588;&#1705;&#1575; &#1588;&#1585;&#1605;&#1575; &#1705;&#1740; &#1606;&#1574;&#1740; &#1601;&#1604;&#1605; &#1705;&#1575; &#1662;&#1729;&#1604;&#1575; &#1657;&#1585;&#1740;&#1604;&#1585; &#1580;&#1575;&#1585;&#1740; 

&#1657;&#1585;&#1740;&#1604;&#1585; &#1580;&#1575;&#1585;&#1740; 
```

在显示任何记录之前，我需要解码这些值以在我的 Richtextbox1 中显示正确的字符，应该是字符而不是 UTF-8 格式。

这是 URDU-ARABIC 数据库，每条记录都不同，所以应该单独渲染所有记录。

# javascript - 每次都显示所需的验证规则消息

> ID：12991865
> 
> 赞同：-1
> 
> 时间：2012-10-20T19:25:42.040
> 
> 标签：javascript, jquery, validation, knockout.js

我有一个使用knockout.js 的小提琴。我创建了一个自定义验证来检查数组中的重复条目并使用本机验证`("required")`。自定义验证正常工作，但本机验证不正常。请听听这个小提琴：

[http://jsfiddle.net/hsnCW/3/](http://jsfiddle.net/hsnCW/3/)

**编辑**

您可以通过首先添加空条目然后添加新条目来重新生成问题。然后您会看到，在添加空条目时您不会看到验证错误消息，当您添加有效条目时会看到该消息。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:26:04.760

这是因为“字段重置”而发生的

```
self.newItem(null); 
```

之后添加`self.newItem.isModified(false);`以重置字段的修改状态。

更新小提琴：http: [//jsfiddle.net/hsnCW/4/](http://jsfiddle.net/hsnCW/4/)

# c++ - 为派生类生成唯一 ID

> ID：12991866
> 
> 赞同：2
> 
> 时间：2012-10-20T19:25:53.023
> 
> 标签：c++, inheritance, derived-class

我正在尝试编写一个基类和一组 N 个派生类，其中每个派生类都有自己的唯一标识符，这是一个简单的“手动”实现：

```
struct Base {
    static int id_ = 0;
};

struct Derived1 : public Base {
    static int id_ = 1;
};

struct Derived2 : public Base {
    static int id_ = 2;
}; 
```

问题是，如果我想继续添加派生类，我必须计算已经存在的派生类的数量。

事情也变得更加复杂，因为我想使用一个 bitset 来表示唯一 ID。如果每个派生类的唯一 ID 基本上只是设置为 1 的不同位（公共长度位集），那么对派生类组执行二进制 AND/OR/XOR/etc 操作变得非常容易。

以下是我想要的不完整且不正确的实现

```
//Let DCOUNT be the number of derived classes, Ideally I shouldnt have to ever
//know/think about what it evaluates too, it should be automatic.
//But that is second priority, I would be willing to #define this to 
//some 'large' value, and not worry about it.
struct Base {
    static std::bitset<DCOUNT> id_ = generateUniqueID(); // "00000"
};

struct Derived1 {
    static std::bitset<DCOUNT> id_ = generateUniqueID(); // "00001"
};

struct Derived2 {
    static std::bitset<DCOUNT> id_ = generateUniqueID(); // "00010"
}; 
```

实现这一点的最佳方法是什么？（或类似的东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:57:21.743

像一系列函数（模板）这样为每种类型生成并保留一个 id 的简单的东西呢，如下所示：

```
 template<typename T>
 static std::bitset<DCOUNT> getId()
 {
     static std::bitset<DCOUNT> bitset;
     static bool bitsetCreated = false;
     if ( false == bitsetCreated )
     {
        bitset = generateUniqueID();
        bitsetCreated = true;
     }
     return bitset;
 } 
```

之后您可以像这样获取 ID： getId < YourType > (); 它们是在运行时生成的，所以 generateUniqueID(); 没有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:40:48.983

这是[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)。

您不能使用外部函数初始化静态成员，您将收到编译器错误，例如

```
'generateUniqueID()' cannot appear in a constant-expression 
```

或者

```
ISO C++ forbids in-class initialization of non-const static member ‘id_’ 
```

我认为您所能做的就是`id_`手动初始化这些值。

您还可以选择了解类的类型：使用`typeid`函数，如

```
if (typeid(myInstance) == typeid(Derived1))
    do_something(); 
```

# java - Getter Setter Java，传递私有变量

> ID：12991867
> 
> 赞同：1
> 
> 时间：2012-10-20T19:26:06.017
> 
> 标签：java, getter-setter

我有以下班级城市

```
public class City {

    public static boolean walls[][];
    public static int width, height;
    public static Human people[];
    public static ArrayList<Zombie> zombies = new ArrayList<Zombie>(); 
```

创建了一张随机地图（墙壁用于定义建筑物，城市中居住着人，并且在城市中创建了一个僵尸）。还有类人类和类僵尸

```
public class Human {
int x;
int y;
int d;

public Human(int x, int y, int d)
{
    this.x = x;
    this.y = y;
    this.d = d;
} 
```

Zombie 和 Human 都包含决定他们在地图上移动的逻辑。因此，他们需要访问城市中的墙壁、人和僵尸来导航。该程序运行良好，它们是静态的，但是每当我创建一个新城市（以重置程序）时，它都会冻结，我认为这是因为静态变量。我尝试将它们设为私有，并在 City 中创建 getter 和 setter 方法并从 Human 和 Zombie 调用它们，但它总是说我不能以静态方式调用非静态方法。示例是：

```
public int peopleLength(){ //in City
    return people.length;
}

City.peopleLength() //in Human 
```

可以让我知道我做错了什么或让我朝着正确的方向前进吗？提前致谢。

编辑：

```
if(StdDraw.isKeyPressed(32)){
world = new City(MAX_X,MAX_Y,80, 400);
} 
```

因此，当按下空格键时，地图会被清除并重新绘制。有时它会工作 2 或 3 次，但大多数时候它只是进入黑屏并且不显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:30:02.633

任何一个：

*   使变量非静态和私有，然后为它们添加 getter 和 setter 方法，或者
*   在 City 上添加一个名为 reset() 的静态方法，将变量重置为其初始状态

我会走第一条路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:32:04.960

使用 new 关键字创建 City 的实例。

```
City gotham = new City(); 
```

然后您将能够`gotham`在非静态上下文中引用该对象。

# authentication - 在 Azure 中使用 Facebook 对移动服务进行身份验证

> ID：12991869
> 
> 赞同：3
> 
> 时间：2012-10-20T19:26:21.353
> 
> 标签：authentication, facebook-c#-sdk, azure-mobile-services

我在 Azure 中对移动服务进行 Facebook 身份验证时遇到问题。

更具体地说，我已经有一个使用[Facebook C# SDK](http://csharpsdk.org/)的应用程序，它运行良好。我可以登录，获取我的朋友列表等等。我想继续使用这个 SDK，但我也想对 Azure 移动服务进行身份验证。因此，我的计划是，使用 Facebook C# SDK 登录（就像我今天所做的那样），获取身份验证令牌，并将其传递给[MobileServiceClient.LoginAsync()](http://msdn.microsoft.com/en-us/library/jj553650.aspx) - 函数。这样，我仍然可以拥有 Facebook C# SDK 中的所有不错的功能，并且还可以使用 Azure 移动服务中的内置身份验证系统。

```
var client = new FacebookClient();

dynamic parameters = new ExpandoObject();
parameters.client_id = App.FacebookAppId;
parameters.redirect_uri = "https://www.facebook.com/connect/login_success.html";
parameters.response_type = "token";
parameters.display = "popup";

var loginUrl = client.GetLoginUrl(parameters);
WebView.Navigate(loginUrl); 
```

加载完成后，执行以下操作：

```
FacebookOAuthResult oauthResult;
if (client.TryParseOAuthCallbackUrl(e.Uri, out oauthResult) && oauthResult.IsSuccess)
{
    var accessToken = oauthResult.AccessToken;
    var json = JsonObject.Parse("{\"authenticationToken\" : \"" + accessToken + "\"}");
    var user = await App.MobileService.LoginAsync(MobileServiceAuthenticationProvider.Facebook, json);
} 
```

但是，当我调用上面的最后一行代码时，我得到了这个异常：MobileServiceInvalidOperationException，“错误：POST Facebook 登录请求必须在请求正文中指定访问令牌。”

我找不到有关如何格式化 accesstoken 的任何信息，我尝试了很多不同的密钥（而不是您在我的示例中看到的“authenticationToken”）。我也尝试过传递 accesstoken 字符串，但似乎没有任何效果。此外，如果我使用 MobileServiceClient.LoginAsync() 进行全新的登录，它工作得很好，但强迫用户登录两次似乎很愚蠢。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:38:09.713

对象的预期格式是 {" **access_token** ", "the-actual-access-token"}。使用 Facebook SDK 完成登录后，令牌会以该名称在片段中返回，这就是 Azure 移动服务所期望的。

顺便说一句，这是我根据您的代码段编写的代码，它有效。不过，它应该可以更好地处理失败的情况，但是对于令牌格式，这应该足够了

```
private void btnLoginFacebookToken_Click_1(object sender, RoutedEventArgs e)
{
    var client = new Facebook.FacebookClient();
    dynamic parameters = new ExpandoObject();
    parameters.client_id = "MY_APPLICATION_CLIENT_ID";
    parameters.redirect_uri = "https://www.facebook.com/connect/login_success.html";
    parameters.response_type = "token";
    parameters.display = "popup";
    var uri = client.GetLoginUrl(parameters);
    this.webView.LoadCompleted += webView_LoadCompleted;
    this.webView.Visibility = Windows.UI.Xaml.Visibility.Visible;
    this.webView.Navigate(uri);
}
async void webView_LoadCompleted(object sender, NavigationEventArgs e)
{
    AddToDebug("NavigationMode: {0}", e.NavigationMode);
    AddToDebug("Uri: {0}", e.Uri);
    string redirect_uri = "https://www.facebook.com/connect/login_success.html";
    bool close = (e.Uri.ToString().StartsWith(redirect_uri));
    if (close)
    {
        this.webView.LoadCompleted -= webView_LoadCompleted;
        this.webView.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        string fragment = e.Uri.Fragment;
        string accessToken = fragment.Substring("#access_token=".Length);
        accessToken = accessToken.Substring(0, accessToken.IndexOf('&'));
        JsonObject token = new JsonObject();
        token.Add("access_token", JsonValue.CreateStringValue(accessToken));
        try
        {
            var user = await MobileService.LoginAsync(MobileServiceAuthenticationProvider.Facebook, token);
            AddToDebug("Logged in: {0}", user.UserId);
        }
        catch (Exception ex)
        {
            AddToDebug("Error: {0}", ex);
        }
    }
} 
```

# javascript - 获取有关“对象对象”的更多信息

> ID：12991870
> 
> 赞同：0
> 
> 时间：2012-10-20T19:26:24.473
> 
> 标签：javascript, backbone.js

下面代码中的两个 console.log 显示如下。数据对象为 json 格式，带有“标题”、“位置”和“内容”。但是，我不确定如何在 console.log 中查看数据。例如，我试图`console.log("data " + data[0].title)`获取第一个数据对象的标题，但它返回 undefined。至于'this'对象，我实际上并不知道它是什么。这是主干应用程序的路由器视图中的初始化函数，我正在尝试对其进行解构，但在这种情况下我无法弄清楚“this”是什么。

```
**this** [object Object]

**data** [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object] 
```

**代码**

```
 initialize: function (options)
        {

            var _this = this;
            console.log("this " + this);
            $.ajax({
                url: "json/Backboneapp_data.json",
                dataType: 'json',
                data: {},
                async: false,
                success: function (data)
                {
                    console.log("data " + data)
                    _this._data = data;
                    _this._items = new ItemCollection(data);
                    _this._view = new MenuView({ model: _this._items });
                    _this._view.render();
                    Backbone.history.loadUrl();
                }

            });

            return this;
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:32:22.480

当您添加到字符串时，对象会转换为字符串。如果你 console.log 只是对象，许多环境（例如 web kit 检查器）会让你在控制台中检查对象。

```
console.log(this) 
```

# javascript - 删除通用 Tapestry JavaScript 和 CSS

> ID：12991875
> 
> 赞同：3
> 
> 时间：2012-10-20T19:27:00.047
> 
> 标签：javascript, tapestry

我使用 Maven 创建了一个新的 Tapestry 5.3 项目。我注意到 Tapestry 向所有页面添加了大量不同的 JS 和 CSS 文件：

```
<link type="text/css" rel="stylesheet" href="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/default.css"/>
<link type="text/css" rel="stylesheet" href="/tutorial1/assets/1.0-SNAPSHOT-DEV/ctx/layout/layout.css"/>
<link type="text/css" rel="stylesheet" href="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/tapestry-console.css"/>
<link type="text/css" rel="stylesheet" href="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/t5-alerts.css"/>
<link type="text/css" rel="stylesheet" href="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/tree.css"/>
<script src="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/underscore_1_3_3.js" type="text/javascript"></script>
<script src="/tutorial1/assets/1.0-SNAPSHOT-DEV/tapestry/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script> 
```

还有很多很多...

这些是我的网站正常工作所必需的吗？如果没有，我该如何删除它们？我自己写 JS 很舒服，我不需要 Tapestry 为我添加任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T20:38:33.320

有趣的是：Tapestry 提供了非常丰富的功能来覆盖默认服务行为，但在这种情况下却没有。罪魁祸首 JavaScriptSupport 是动态创建的，无法修饰。

```
MarkupRendererFilter javaScriptSupport = new MarkupRendererFilter() {
        public void renderMarkup(MarkupWriter writer, MarkupRenderer renderer) {
            DocumentLinker linker = environment.peekRequired(DocumentLinker.class);
            //Surprise!;) 
            JavaScriptSupportImpl support = new JavaScriptSupportImpl(linker, javascriptStackSource, javascriptStackPathConstructor);
            environment.push(JavaScriptSupport.class, support);
            renderer.renderMarkup(writer);
            environment.pop(JavaScriptSupport.class);
            support.commit();
        }
    }; 
```

因此，唯一的方法是修补源（就像我们多次所做的那样），或者尝试覆盖作为 JavaScriptSupportImpl 的参数的 javascriptStackSource：

**你的 AppModule.java**

```
@Decorate(serviceInterface = JavaScriptStackSource.class)
public JavaScriptStackSource decorateJavaScriptStackSource(JavaScriptStackSource original) {
    return new MyJavaScriptStackSource(original);
} 
```

**MyJavaScriptStackSource.java**

```
public class MyJavaScriptStackSource implements JavaScriptStackSource {
// This bunch of stacks comes from got5
private Set<String> SKIP = new HashSet<String>(Arrays.asList("Slider", "AjaxUploadStack", "DataTableStack", "FormFragmentSupportStack", "FormSupportStack",
        "SuperfishStack", "JQueryDateFieldStack", "GalleryStack"));

private class JavaScriptStackWraper implements JavaScriptStack {
    private final JavaScriptStack original;

    JavaScriptStackWraper(JavaScriptStack original) {
        if (original != null) {
            System.out.println("Wrap " + original.getClass().getName());
        }
        this.original = original;
    }

    @Override
    public List<String> getStacks() {
        return original != null ? original.getStacks() : Collections.<String>emptyList();
    }

    @Override
    public List<Asset> getJavaScriptLibraries() {
        return original != null ? original.getJavaScriptLibraries() : Collections.<Asset>emptyList();
    }

    // Always return empty list
    @Override
    public List<StylesheetLink> getStylesheets() {
        return Collections.<StylesheetLink>emptyList();
    }

    @Override
    public String getInitialization() {
        return original != null ? original.getInitialization() : null;
    }
}

private final JavaScriptStackSource original;

public MyJavaScriptStackSource(JavaScriptStackSource original) {
    this.original = original;
}

@Override
public JavaScriptStack getStack(String name) {
    JavaScriptStack stack = original.getStack(name);
    if (!SKIP.contains(stack.getClass().getSimpleName())) {
        return new JavaScriptStackWraper(stack);
    }
    return new JavaScriptStackWraper(null);
}

@Override
public List<String> getStackNames() {
    return original.getStackNames();
} 
```

}

这是一大段糟糕的代码，但它可以工作。我希望更好地控制我在 Tapestry 中的页面中显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:01:18.390

Tapestry 的部分优势在于提供开箱即用的 DHTML 和 Ajax 行为的组件数量，无需编写任何 JavaScript，而只需配置组件。

可以禁用此功能，但这意味着您可能喜欢使用的许多组件（例如 Zone）将被破坏。同样，所有客户端输入验证都将消失。我确实有客户这样做过，但这不是一件小事。

基本上，您可以覆盖 Tapestry 的“核心”JavaScriptStack。对此没有常见问题解答，因为它不经常被问到。它也不适合绝对的初学者，更多的是熟练的东西（在 Tapestry 中覆盖东西相对容易，因为它的控制容器反转，但知道要覆盖的内容更棘手）。

无论如何，Tapestry 5.4 正在顺利进行，并且正在将 Tapestry 的 JavaScript 更改为更轻量级和更模块化，并让您在 Prototype（主要是为了与现有 Tapestry 项目的兼容性）或 jQuery 之间进行选择。然而，即便如此，框架中也会内置一些 JavaScript。

# c# - Sql更新数据

> ID：12991880
> 
> 赞同：1
> 
> 时间：2012-10-20T19:27:53.313
> 
> 标签：c#, sql, web-services

**我有以下代码来设置页面加载时的文本框值。**

```
protected void Page_Load(object sender, EventArgs e)
        {
            localhost.UserRegistration m = new localhost.UserRegistration();
            int user = m.ID(Session["Username"].ToString());
            DataSet ds = m.GetUserInfo(user);
            if (ds.Tables.Count > 0)
            {
                TextBox1.Text = ds.Tables[0].Rows[0]["emailAddress"].ToString();
                TextBox2.Text = ds.Tables[0].Rows[0]["password"].ToString();
            }

        } 
```

因此，当第一个用户打开页面时，用户将在文本框中看到他们的电子邮件地址和密码。当他们进行更改并单击更新时，页面加载时的相同值将被发送到数据库，而不是被更改的新值。

**我有以下 Web 服务方法来更新用户详细信息**

```
[WebMethod(Description = "Updates a single user")]
        public string UpdateUser(int user, string emailAddress, string password)
        {
            // Create connection object
            int ix = 0;
            string rTurn = "";
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "UPDATE [User] SET [emailAddress]=@emailAddress, [password]=@password" + " WHERE [ID]=@user";
                OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                oleComm.Parameters.Add("@user", OleDbType.Integer).Value = user;
                oleComm.Parameters.Add("@emailAddress", OleDbType.Char).Value = emailAddress;
                oleComm.Parameters.Add("@password", OleDbType.Char).Value = password;

                ix = oleComm.ExecuteNonQuery();
                if (ix > 0)
                    rTurn = "User Updated";
                else
                    rTurn = "Update Failed";
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
                rTurn = ex.ToString();
            }
            finally
            {
                oleConn.Close();
            }
            return rTurn;
        } 
```

**这是表在数据库中的外观**

![在此处输入图像描述](../Images/f41fdd500902a6ab578f45325edcf182.png)

**客户端代码**

```
protected void Button1_Click(object sender, EventArgs e)
        {

            string email = TextBox1.Text;
            string pass = TextBox2.Text;
            localhost.UserRegistration m = new localhost.UserRegistration();
            int usr = m.ID(Session["Username"].ToString());
            m.UpdateUser(usr, email, pass);

        } 
```

谁能告诉我为什么....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:56:59.733

我认为您正在混淆 SqlParameters 和 OleDbParameters。OleDbParameters**不支持命名参数**！！

请参阅**MSDN** [OleDbCommand.Parameters](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)

> 当 CommandType 设置为 Text 时，OLE DB .NET 提供程序不支持将参数传递给 SQL 语句或由 OleDbCommand 调用的存储过程的命名参数。在这种情况下，必须使用问号 (?) 占位符。例如：
> 
> SELECT * FROM Customers WHERE CustomerID = ?
> 
> 因此，OleDbParameter**对象**添加**到**OleDbParameterCollection 的顺序必须**直接****对应**于命令文本中参数的问号**占位符**的**位置。**

 ******我认为你应该调整你的代码

```
...
oleConn.Open();
string sql = "UPDATE [User] SET [emailAddress]=?, [password]=? WHERE [ID]=?";
OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

oleComm.Parameters.Add("@emailAddress", OleDbType.Char).Value = emailAddress;
oleComm.Parameters.Add("@password", OleDbType.Char).Value = password;
oleComm.Parameters.Add("@user", OleDbType.Integer).Value = user;
... 
```

**编辑**

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
  {
      localhost.UserRegistration m = new localhost.UserRegistration();
      int user = m.ID(Session["Username"].ToString());
      DataSet ds = m.GetUserInfo(user);
      if (ds.Tables.Count > 0)
      {
          TextBox1.Text = ds.Tables[0].Rows[0]["emailAddress"].ToString();
          TextBox2.Text = ds.Tables[0].Rows[0]["password"].ToString();
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:49:09.810

好的，让它工作。更改了 sql 查询，如下所示。

```
string sql = "UPDATE [User] SET [emailAddress]=@emailAddress, [password]=@password" + " WHERE [ID]= "+ user; 
```

但它更新了错误的字段。emailAddress 更新为用户 ID，密码更新为电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:07:18.153

替换以下行：

```
string sql = "UPDATE [User] SET [emailAddress]=@emailAddress, [password]=@password" + " WHERE [ID]=@user";

To 

string sql = "UPDATE [User] SET [emailAddress]=@emailAddress, [password]=@password where [ID]=@user"; 
```

并检查数据库中 Id 的数据类型是否为 int******

# android - 无法从儿童活动中获得结果

> ID：12991886
> 
> 赞同：0
> 
> 时间：2012-10-20T19:28:51.793
> 
> 标签：android

我有一个父活动正在向子活动发送数据，但子活动没有返回结果。我在下面完全发布了这两个活动的部分代码 - 有一些代码我没有发布不必要的代码。

```
 public class TdeeActivity extends Activity {

    public static final int CALLED_ACTIVITY = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tdee);
        Button ok=(Button)findViewById(R.id.btnOk);
        ok.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Intent bmr= new Intent(TdeeActivity.this,BMRActivity.class);
                startActivityForResult(bmr,CALLED_ACTIVITY);
            }
        });
        }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch(requestCode) {
        case CALLED_ACTIVITY:
            if (resultCode == RESULT_OK) {

                Toast.makeText(this, "THE RESULT-"+data.getExtras().getString("result"),
                        Toast.LENGTH_SHORT).show();
            }
        }

    }
}  // end class

public class BMRActivity extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_bmr);
       Button btnOk=(Button)findViewById(R.id.btnOk);
       btnOk.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
                showResult();
            }
        });

        public void showResult() {

            Intent data= new Intent();
            data.putExtra("result",result);
            setResult(RESULT_OK, data);
            finish();

    }   

}

}// end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:28:12.053

我在一个虚拟项目中测试了你的代码，最后它运行良好。以下是这两个活动的代码：

```
public class ParentActivity extends Activity {

    private static final int CALLED_ACTIVITY = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent bmr = new Intent(ParentActivity.this, ChildActivity.class);
        startActivityForResult(bmr, CALLED_ACTIVITY);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch(requestCode) {
        case CALLED_ACTIVITY:
            if (resultCode == RESULT_OK) {

                Toast.makeText(this, "THE RESULT-"+data.getExtras().getString("result"),
                        Toast.LENGTH_SHORT).show();
            }
        }

    }
}

public class ChildActivity extends Activity {

    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Returning result from child activity
        Intent data = new Intent();
        data.putExtra("result", "from child"
                + this.getCallingActivity().getClassName());
        setResult(RESULT_OK, data);
        finish();
    }
} 
```

所以请发布更多代码，以便找到问题..

# php - PHP mcrypt_get_iv_size() 用于生成盐大小

> ID：12991893
> 
> 赞同：1
> 
> 时间：2012-10-20T19:29:18.057
> 
> 标签：php, salt, crypt

我正在编写一个 PHP 脚本来验证用户身份。我想使用 SHA512 作为哈希值并使用盐来添加密码。要生成盐，我想使用 mcrypt_create_iv。但首先，我必须弄清楚初始化向量的大小。为此，我看到 php 有：mcrypt_get_iv_size。但我有一个问题，请：

对于 mcrypt_get_iv_size() 密码字符串和模式字符串我使用什么？请记住，我使用的是 SHA512，因此只要 sha512 哈希值，盐就需要至少。为了进行实验，我尝试了“ mcrypt_get_iv_size(CRYPT_SHA512, MCRYPT_MODE_CFB) ”，但 php 抱怨了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:51:00.970

实际上`mcrypt_create_iv()`是为了生成一个随机的二进制字符串，可以用来**加密**的。你想要做的是散列而不是加密，所以`mcrypt_get_iv_size()`在这里没有意义。

从 PHP 5.3 开始，它可以安全地用于`mcrypt_create_iv()`生成随机字符串，但请记住，您会得到一个**二进制**输出，它不适合散列函数的字母表。

你可以看看这个[例子](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)，它展示了如何使用`mcrypt_create_iv()`生成盐。不过，要散列密码，您不应该使用 sha512，而是使用像**BCrypt**这样的密钥派生函数，这很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:47:34.920

盐的长度与任何密码的 IV 大小无关。相反，您需要弄清楚您的特定哈希算法需要多少字节的随机数据，同时考虑到盐格式。例如，bcrypt 需要 16 个字节，并采用 base64-esque 编码。

无论如何，您需要问这个问题的事实意味着您不知道自己在做什么，这对于密码哈希来说是一个非常糟糕的迹象。请为此目的使用现有库之一。

# javascript - 如何增加div的命中区域？

> ID：12991894
> 
> 赞同：0
> 
> 时间：2012-10-20T19:29:21.263
> 
> 标签：javascript, css, dom, visibility

我需要在屏幕上创建一个交互式区域，点击区域大于交互式元素。但是，我不希望命中区域影响 DOM 布局。

[这个 jsfiddle](http://jsfiddle.net/5vzJb/13/)演示了我所追求的。一个 DOM 检查器显示`#hitArea`扩展了 above 和 below `#content`，但它不是交互式的，因为它被它的父元素 ,`#container`和. 裁剪`overflow:hidden`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:29:21.263

在我写这个问题的时候想出来了，所以我在这里记录下来。

`overflow:hidden`剪辑交互区域（又名“命中区域”）以及可见区域，所以它违背了这里的目的。注释掉`overflow:hidden`并设置`background-color: none`为`#hitArea`允许命中区域超出元素的可见边界 ( `#content`)。

[http://jsfiddle.net/5vzJb/14/](http://jsfiddle.net/5vzJb/14/)

在我的情况下，我需要剪辑内容，所以我可以改为申请`overflow:hidden`，`#content`并将我的内容作为 div 附加到`#content`.

# java - 在 Java 中从 char 显式转换为 int 的原因？

> ID：12991896
> 
> 赞同：0
> 
> 时间：2012-10-20T19:29:26.127
> 
> 标签：java, casting

我在很多地方的 Java 代码中看到，人们倾向于在原语 int 和 char 之间进行转换。

这是必要的吗？他们不是隐式转换的。
例如，我尝试了这个并且完全得到了我应该得到的。那为什么人们会明确地投射？我错过了什么吗？

```
char a = 'a';
int index = (int) a;
index = 98;
a = 98;
System.out.println(index);
System.out.println(a); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:32:17.377

有时人们会为了清楚起见，有时会出于超载的原因，有时会出于无知的原因。

例如：

```
System.out.println((int) a); 
```

将以不同的方式工作

```
System.out.println(a); 
```

由于重载决议。但是在您给出的确切代码中，它绝对不是必需的。如果您想确切了解特定开发人员选择编写冗余代码的原因，您需要询问他们...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:32:10.513

在这种情况下进行强制转换消除了歧义，并使代码更易于阅读。

# git - git子模块最佳实践

> ID：12991897
> 
> 赞同：3
> 
> 时间：2012-10-20T19:29:34.897
> 
> 标签：git, github

我在 Github 上有一个使用引导程序的 PHP 项目……我们想对其进行子模块化。但是 bootstrap 在该项目中还有其他我们不需要的东西。我应该如何包含引导程序，以便我们获得正确的文件，但项目中没有所有这些额外的东西（并且可以从安装该项目的任何人的网站公开访问）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:41:06.207

子模块的好处是它不会向您的项目添加大量额外代码，这些代码您必须维护，我认为这对您有两方面的好处：

1.  您的开发人员不必担心那两个或三个奇怪的文件在其中做什么，为什么它们似乎与项目的其余部分不匹配，或者它来自哪里；相反，有一个漂亮整洁的文件夹，它基本上就像一个符号链接，并解释了所有这些
2.  您将能够在更新引导程序时更新 ref，这使得保持最新状态变得容易，但仅在您想要时

请记住提醒将克隆您的项目的人他们需要运行：

```
git submodule update --init 
```

在大多数其他事情之前。

# soap - 在 Spring WS 中，如何处理 SaajSoapEnvelopeException 并在异常发生后获取 SOAP 的副本？

> ID：12991901
> 
> 赞同：0
> 
> 时间：2012-10-20T19:29:53.680
> 
> 标签：soap, spring-ws, fault

那是“之后且仅在之后”一个异常，因为我被告知要预先设置它是我们不想要的性能损失，因为这将是针对每个调用而不仅仅是针对异常。当然是有道理的，但我肯定不知道在异常之后如何做到这一点。

用例是这样的：有些人，也许是坏人，向我们发送了一些坏 SOAP，而调度程序抛出了 SaajSoapEnvelopeException。我该如何优雅地处理这个问题？

到目前为止，我拥有的是 MessageDispatcherServlet 的扩展，它覆盖了 doService() 方法。web.xml 文件已更新以显示此 Dispatcher for Spring 的配置。在此覆盖中，使用 try/catch 包围对 super 方法的调用，您会捕获异常，但这里的问题是 HttpServletRequest 的流已经关闭，因此您无法从此处获取 SOAP，AFIK。

另一个问题是我无法让编组器在这里接线。我有我想使用的 WSDL 生成的 Java 错误，但我认为在非端点类中连接编组器存在问题。也许关于命名空间？我可能需要了解这些是如何工作的。

底线：是否有可能在异常*之后*获取 SOAP，或者是否可以预测会有异常，以便我可以提前抓住它？另外，我怎样才能在这个 Dispatcher 中加入故障编组器，或者我必须对故障的文本版本进行 BS 处理？

我对 Web 服务相当陌生，到目前为止我所知道的主要是 CXF。到目前为止，我对 Spring WS 印象并不深刻。恕我直言，他们还有很长的路要走。由于与 WSDL 中的 XSD 引用有关的已知错误未正确重命名以匹配 bean，因此我无法从服务中获取 WSDL，这一事实尤其令人讨厌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:29:28.837

您是否尝试过[EndpointExceptionResolver](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/EndpointExceptionResolver.html)？例如，我用一个来捕获和翻译身份验证异常。

您可能还需要一个[EndpointInterceptor](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/EndpointInterceptor.html)来包装异常解析器。

# android - onPreviewFrame 返回错误的字节 [] 长度

> ID：12991906
> 
> 赞同：6
> 
> 时间：2012-10-20T19:30:25.253
> 
> 标签：android

我试图获取字节数组并从那里复制到另一个数组中的一些图片预览行`onPreviewFrame()`。所以我准备了相机和新的字节数组

```
 try {
        if (cam != null) {

            Camera.Parameters parameters = cam.getParameters();
            parameters.setPreviewFrameRate(25);
            parameters.setPictureFormat(ImageFormat.JPEG);
            cam.setParameters(parameters);
            cam.setPreviewDisplay(holder);
            cam.startPreview();

            arr = new byte[(parameters.getPreviewSize().height)
                    * (parameters.getPreviewSize().width)];

            Log.i("" + parameters.getPictureSize().height, "   "
                    + parameters.getPictureSize().width);

        }
    } catch (IOException e) {
        Log.d("CAMERA", e.getMessage());
    } 
```

日志告诉我：

`480 640`

所以`arr.length = 307200`

但：

```
public void onPreviewFrame(byte[] data, Camera camera) {    
    Log.i(arr.length+" ",data.length+"");
} 
```

`arr.length = 307200` （这当然意味着帧大小 = 640*480）

但是 `data.length = 460800` （这意味着帧大小= 800 * 576）

当我尝试将数据复制到 Arr`System.arraycopy(data, 0, arr, 0, arr.length);`并导出图片时：

```
FileOutputStream outStream = null;
    try {
        outStream = new FileOutputStream("/sdcard/new.jpg");

        Camera.Parameters parameters = cam.getParameters();
        Size size = parameters.getPreviewSize();

        YuvImage image = new YuvImage(arr, parameters.getPreviewFormat(),
                size.width, size.height, null);
        image.compressToJpeg(
                new Rect(0, 0, image.getWidth(), image.getHeight()), 90,
                outStream);

        outStream.flush();
        outStream.close();
    } catch (FileNotFoundException e) {
        Log.d("CAMERA", e.getMessage());
    } catch (IOException e) {
        Log.d("CAMERA", e.getMessage());
    } 
```

图片变绿：

![在此处输入图像描述](../Images/692d89096e0239ef00e635d30e9bebe0.png)

那么我需要做什么才能使数据数组变为 640*480？或者，也许您知道另一种从（例如）位图中获取单行并将其添加到另一个位图中的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T21:01:26.620

正确的数组大小是 `new byte[previewSize.height * previewSize.width * (ImageFormat.getBitsPerPixel(parameters.getPreviewFormat())) / 8];`（不同的格式具有不同的每像素位数，使用[ImageFormat.getBitsPerPixel](http://developer.android.com/reference/android/graphics/ImageFormat.html#getBitsPerPixel%28int%29)获取）

# clojure - assoc in clojure：内部解释

> ID：12991911
> 
> 赞同：3
> 
> 时间：2012-10-20T19:30:51.357
> 
> 标签：clojure, immutability

这是代码`assoc`：

```
(def assoc
 (fn assoc
   ([map key val] (. clojure.lang.RT (assoc map key val))))) 
```

1.  是什么意思`clojure.lang.RT`？

2.  调用`assoc`矢量/地图的复杂性是什么？

3.  访问已创建的结构的复杂性是什么`assoc`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:39:24.023

1.  `clojure.lang.RT`是主要的 Clojure RunTime 类。它拥有构成语言核心的大部分方法。

2.  `assoc`对于包括向量和映射在内的所有关联数据结构，是 O(1)。`array-map`从前几个项目开始是线性的，然后将自己提升为 a`hash-map`所以它也是 O(1) 。如果需要，您当然可以使用不是 O(1) 的东西来实现关联接口。

3.  从技术上讲，通过调用另一个地图创建的地图或矢量中的项目的访问时间`assoc`是 O(log32 N)。因为这些数据结构的大小上限约为 2^32 个项目，所以最大树深度为 6，这**实际上是恒定的时间**

Clojure 的关联数据结构在空间中都是 O(nLog n)（因为它们是树）。

# java - 如何从传递的对象中检索值返回值？

> ID：12991914
> 
> 赞同：0
> 
> 时间：2012-10-20T19:31:14.660
> 
> 标签：java, generics, object

我正在尝试将不同的数据类型插入到链表中。问题是在我插入数据后，当我显示我的数据时，我不知道如何读回值。

那么如何以这种顺序检索值：

```
List (first-->last): {brand1, 11,111}, {brand2, 22,222}
List (last-->first): {brand2, 22,222}, {brand1, 11,111} 
```

我得到的输出代表对象的名称，然后是对象的地址：

```
List (first-->last): Milk@1f5205c Milk@1fb069 
List (last-->first): Milk@1fb069 Milk@1f5205c 
```

这是我的对象类：

```
class Milk <T>
{
    String brand;
    double size;
    double price;

    Milk(String a, double b, double c)
    {
        brand = a;
        size = b;
        price = c;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:35:21.573

您需要覆盖 Milk 类的`toString`方法，以便它使用自定义版本而不是依赖于`Object`的实现。

在你的情况下，这可能就像把它扔到你的`Milk`班级一样容易。

```
@Override
public String toString() {

    return brand;
} 
```

# sql-server - 调用另一个存储过程的存储过程挂了很长时间

> ID：12991917
> 
> 赞同：2
> 
> 时间：2012-10-20T19:31:47.047
> 
> 标签：sql-server, loops, stored-procedures

我有一个存储过程，可以为特定客户得到我想要的东西。它返回 20 行...

我需要做的是为一个或多个 20 个客户调用这个存储过程，然后返回整个结果集。我有以下内容，但它只是挂起并说正在执行..我想知道我有什么问题...

```
ALTER PROCEDURE [dbo].[getAllTotals] -- This stored procedure is new
@pDt1 datetime, @pDt2 datetime, @pStore int
AS 
BEGIN
   DECLARE @AccountTbl table (AccountID int );
   DECLARE @TotalTbl table (AccountID int, col1 varchar(100), col2  varchar(100) );

   DECLARE @accountID  int

   --cache all accountid INTO cursor AccountID_cursor
   DECLARE AccountID_cursor CURSOR FOR
       SELECT Storeid   
       FROM tblStore  
       WHERE StoreID = 111 OR storeid = 933

   OPEN AccountID_cursor;

   FETCH NEXT FROM AccountID_cursor INTO @accountID;

   WHILE @@FETCH_STATUS = 0
   BEGIN     
      --insert total amount info to tmp table @TotalTbl
      insert @TotalTbl
         EXEC [dbo].[rptTransactions06192012_royal]
              @pDt1 = @pDt1, @pDt2 = @pDt2, @pStore = @accountID
   END

   --Send temp table results to front end as.
   SELECT * FROM @TotalTbl
END 
```

那有意义吗？

预先感谢！！

安娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:33:42.600

您永远不会指示光标抓取下一行。

```
FETCH NEXT FROM AccountID_cursor INTO @accountID;
WHILE @@FETCH_STATUS = 0

BEGIN

    --insert total amount info to tmp table @TotalTbl

insert @TotalTbl

  EXEC [dbo].[rptTransactions06192012_royal]
    @pDt1 = @pDt1,
    @pDt2 =@pDt2,
    @pStore   = @accountID

FETCH NEXT FROM AccountID_cursor INTO @accountID;

END 
```

另外，请记住，光标速度非常慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:09:12.480

与任何循环周期一样，您需要在每个循环结束时移至下一个项目，否则将是无限循环。

对于移动到下一项的游标指令是“FETCH NEXT”，您只需将初始加载行复制到游标循环的末尾，这样它就会在完成后抓取下一行。

# .net - Uri ToStrings 中断 %26 (&)

> ID：12991918
> 
> 赞同：1
> 
> 时间：2012-10-20T19:31:54.927
> 
> 标签：.net, uri

当我发现 Uri tostring 打破了 uris 时，这让我大吃一惊。这是一个例子

如果你在立即模式下运行它，你会得到

```
new Uri("http://site.com?a=1&b=c%26d").AbsoluteUri 
```

水库

```
"http://site.com/?a=1&b=c%26d" 
```

但

```
new Uri("http://site.com?a=1&b=c%26d").ToString() //string.format i believe doesn't need .ToString() 
```

得到我

```
"http://site.com/?a=1&b=c&d" 
```

b值完全坏了。我感到震惊。我永远不会使用`ToString()`吗？这似乎是一个错误。但是写这个问题给了我答案（`.AbsoluteUri`）。但也许这会对某人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:42:11.853

`Uri.ToString`除了以人类友好的方式显示 URI 之外，该方法对其他任何事情都没有用。

从[Uri.ToString 文档](http://msdn.microsoft.com/en-us/library/system.uri.tostring.aspx)的代码示例中：

```
// The following outputs "http://www.contoso.com/thick and thin.htm".
Console.WriteLine(uriAddress.ToString());

// The following outputs "HTTP://www.Contoso.com:80/thick%20and%20thin.htm".
Console.WriteLine(uriAddress.OriginalString); 
```

该示例显示该`ToString`方法返回一个带空格的字符串，该字符串不是 URI 中有效的字符。Uri 的字符串表示显然不打算用作实际的 URI。这个事实也许应该在文档中更清楚地说明。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T20:02:52.897

**编辑**

*我最初忽略了这样一个事实，即在@acidzombie24 的示例中，没有转义将有助于使用“&”符号。如果可以的话，我会否决我的答案；-P。由于我不能，我已相应地对其进行了编辑*

* * *

请注意，这[`Uri.EscapeUriString Method`](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx)对@acidzombie24 的情况无济于事，尽管 MSDN 中有这句话：

> 使用 EscapeUriString 方法准备一个未转义的 URI 字符串作为 Uri 构造函数的参数。

该文档实际上暗示了方法的局限性：

> [Uri.EscapeUriString(stringToEscape)] method assumes that stringToEscape has no escape sequences in it.

* * *

**EDIT 2** I tried to duplicate @acidzombie24's example in VS2012 WinForms app targeting 4.5, but `new Uri("http://site.com?a=1&b=c%26d").ToString()` returned the escaped version: ![enter image description here](../Images/3aed1a817501c90897cec58f2cc766f8.png)

# ios - 在 iOS 中是否提供纤程（又名用户模式线程、协作多任务）？

> ID：12991923
> 
> 赞同：1
> 
> 时间：2012-10-20T19:32:13.973
> 
> 标签：ios, multithreading

在 iOS 中是否提供纤程（又名用户模式线程、协作多任务）？

我对关于它们是否是一个好主意的辩论不太感兴趣（IMO 用户模式线程通常是状态机或类似 nodejs 的回调模型的一个很好的替代品）。我只是想弄清楚这是否是我的工具箱中可用的东西。

见[http://en.wikipedia.org/wiki/Fiber_%28computer_science%29](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)

（澄清问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:35:17.383

是的。`pthreads`库和 Foundation 的`NSThread`对象都提供此功能。

（一般来说，iOS 中的限制不会影响 POSIX 合规性 - POSIX C 标准库中的所有函数都可用，libpthreads 也不例外。）

编辑：[setcontext 函数族](http://pubs.opengroup.org/onlinepubs/009696799/functions/setcontext.html)。

# c - 如何像在窗口顶部使用 X 底部一样关闭窗口？必须调用相关的“销毁”

> ID：12991927
> 
> 赞同：1
> 
> 时间：2012-10-20T19:32:31.610
> 
> 标签：c, gtk, gtk3

我有两个`GtkWindow`s，当单击按钮时， window1 必须释放其中的所有对象并关闭，但使用`destroy`事件调用关联函数。`gtk_main_quit()`不能使用，它不会使用`destroy`事件调用关联函数。我已经尝试过`gtk_widget_destroy()`，但我从 gtk 收到错误消息（在运行时）：

> Gtk-CRITICAL **：gtk_widget_destroy：断言“GTK_IS_WIDGET（小部件）”失败

我发现谷歌搜索`gtk_signal_emit_by_name()`看起来确实是我需要的，但在我正在使用的 GTK3+ 上不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:09:15.707

尝试`g_signal_emit_by_name(G_OBJECT(window),"destroy");`

有用？

# java - 存储双精度以在整个 if 语句中使用

> ID：12991931
> 
> 赞同：2
> 
> 时间：2012-10-20T19:33:32.017
> 
> 标签：java, loops

我是一名初学者程序员，现在已经玩了几天了......我似乎找不到一种方法来存储一个 double 通过一系列 if 语句运行它，然后在`System.out.println("...")`.

我尝试过使用数组、开关等。我需要通过更多的东西来运行这个 BaseRate，这取决于我需要修改 BaseRate 并让它存储之前的修改的用户输入。

我想出的最接近的方法是通过几个 if 语句存储 BaseRate，但最终结果仍然是原始数字 (4000.00)。我真的不太懂这门语言，当你不太了解这门语言及其可能性时，编程会很困难。提前感谢您的帮助。

```
import java.util.Scanner;
public class example 
{
public static double BaseRate = 4000.00; //really not familiar with this
public static void main(String[] args) 
{
    Scanner keyboardInput = new Scanner( System.in);
    double BaseRate2 = BaseRate; //probably not necessary
//Name
            System.out.println("\rPlease enter your name:");
            String UserName = keyboardInput.nextLine();
//Gender
            System.out.println("Are you male or female? Answer m or f:");
            String input;
            char UserSex;
            input = keyboardInput.nextLine();
            //If the applicant is female, apply a 5 % discount to the base rate.
            UserSex = input.charAt(0);
            if (UserSex == 'f')
                {
                    System.out.println("Discount 5%");
                    double BaseRate = BaseRate2 * 0.95;
                    System.out.println(BaseRate);
                }
            else 
                {
                    System.out.println("Rate is now " + BaseRate);
                }
//Experience Driving
            System.out.println("How many years have you been driving?");
            int UserExperience = keyboardInput.nextInt();
            //------------------------------------------------------------------
            //If driving more than one year and less than 5, 
            //then apply a 5% discount for each year of driving.
            //----------------------------------------------------------------
            if ( UserExperience == 0 )
            {
                System.out.println("No Discount");
            }
            else if ( UserExperience < 5 )
                {
                    System.out.println("Discount 5% per year");
                    double BaseRate = BaseRate2 -  ((UserExperience * 0.05)* BaseRate2);
                    System.out.println(BaseRate);
                }
//Quote
                System.out.println(UserName + " , your rate is a follows:");
                System.out.println(BaseRate); //here is the issue

}

} 
```

问题是最后的 //quote BaseRate 未修改并保持在 4000.0 我真的不想为每种可能性输入一个新的变量名（因为不仅仅是“m or f”以及“experience”驾驶”。我需要一种方法来根据用户输入在整个 if 语句中进行变量更改，以保持该数字（也不要像这个人想要的那样返回）。这些东西应该很简单......我真的沮丧的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:40:51.893

> 我想出的最接近的方法是通过几个 if 语句存储 BaseRate

问题在于，在这些`if`语句中，您将重新声明`BaseRate`为局部变量：

```
if (UserSex == 'f')
{
    System.out.println("Discount 5%");
    double BaseRate = BaseRate2 * 0.95;
    System.out.println(BaseRate);
} 
```

这根本不会改变*静态*变量的值......当变量在块末尾超出范围时，局部变量的值实际上是无用的。

只需更改这样的代码即可为现有变量分配新值：

```
if (UserSex == 'f')
{
    System.out.println("Discount 5%");
    BaseRate = BaseRate2 * 0.95;
    System.out.println(BaseRate);
} 
```

或者，完全删除静态变量，并在所有`if`块之前在方法中声明一个局部变量 - 目前尚不清楚为什么在这里需要静态变量。

此外，我建议您使用更传统的支撑样式并使用 camelCase 作为变量名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T19:40:07.210

您需要删除本地声明`BaseRate`以在类级别设置变量：

```
double BaseRate = BaseRate2 * 0.95; 
```

改成：

```
BaseRate = BaseRate2 * 0.95; 
```

同样在这里：

```
BaseRate = BaseRate2 - ((UserExperience * 0.05) * BaseRate2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T19:40:16.800

您正在`BaseRate`多个位置、不同范围内定义变量。例如：

```
double baserate = 4000.00D;

{ // inner scope
     double baserate = 1.0D
     System.out.println(baserate);
}

System.out.println(baserate); 
```

将打印出 1.0，然后是 4000.0，因为在`{}`您临时重新定义的块内`baserate`。这个“本地”声明`baserate`完全独立于外部声明。当您退出内部范围时，内部声明被“遗忘”，您再次只能看到外部声明。

以这种方式“遮蔽”现有变量会变得非常混乱，最好避免。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T19:40:43.767

您每次都在创建一个新变量。只需使用

```
BaseRate = blah blah 
```

代替

```
double BaseRate = blah blah 
```

# ios - 如何以编程方式获取 iOS 状态栏高度

> ID：12991935
> 
> 赞同：286
> 
> 时间：2012-10-20T19:33:44.023
> 
> 标签：ios, uikit, retina-display

我知道目前 iPhone/iPad 顶部的状态栏（包括时间、电池和网络连接）对于非视网膜屏幕是 20 像素，对于视网膜屏幕是 40 像素，但为了将来证明我的应用程序我想要能够在没有硬编码值的情况下确定这一点。是否可以通过编程方式计算状态栏的高度？

* * *

## 回答 #1

> 赞同：517
> 
> 时间：2012-10-20T19:36:22.257

`[UIApplication sharedApplication].statusBarFrame.size.height`. 但由于所有尺寸都以磅为单位，而不是以像素为单位，因此状态栏高度始终等于 20。

**更新。**看到这个答案被认为有帮助，我应该详细说明。

状态栏高度确实等于 20.0f 点，*但*以下情况除外：

*   状态栏已被`setStatusBarHidden:withAnimation:`方法隐藏，其高度等于 0.0f 个点；
*   正如@Anton 在这里指出的那样，在电话应用程序之外的来电期间或在录音会话期间状态栏高度等于 40.0f 点。

还有一种情况是状态栏会影响视图的高度。通常，视图的高度等于给定方向的屏幕尺寸减去状态栏高度。但是，如果您在显示视图后为状态栏设置动画（显示或隐藏），状态栏将更改其框架，但视图*不会*，您必须在状态栏动画之后（或在动画期间手动调整视图的大小）状态栏高度在动画开始时设置为最终值）。

**更新 2。**还有一个用户界面方向的案例。状态栏不尊重方向值，因此*纵向*模式的状态栏高度值是`[UIApplication sharedApplication].statusBarFrame.size.height`（是的，默认方向始终是纵向，无论您的应用程序 info.plist 说什么），*横向*- `[UIApplication sharedApplication].statusBarFrame.size.width`。`UIViewController`要确定 UI 在外部且不`self.interfaceOrientation`可用时的当前方向，请使用`[UIApplication sharedApplication].statusBarOrientation`.

**iOS7 更新。**即使状态栏的视觉样式发生了变化，它仍然存在，它的框架仍然表现相同。我得到的关于状态栏的唯一有趣的发现——我分享：你`UINavigationBar`的*平铺*背景也将平铺到状态栏，这样你就可以实现一些有趣的设计效果或者只是为你的状态栏着色。这也不会以任何方式影响状态栏的高度。

![导航栏平铺背景也平铺到状态栏](../Images/9b932c0dc7b3bae6e810458bb0898ac4.png)

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-05-16T22:11:33.287

接受[Martin 对问题的建议：Get iPhone Status Bar Height](https://stackoverflow.com/a/6195846/242933)。

```
CGFloat AACStatusBarHeight()
{
    CGSize statusBarSize = [[UIApplication sharedApplication] statusBarFrame].size;
    return MIN(statusBarSize.width, statusBarSize.height);
} 
```

在斯威夫特

```
func statusBarHeight() -> CGFloat {
    let statusBarSize = UIApplication.shared.statusBarFrame.size
    return Swift.min(statusBarSize.width, statusBarSize.height)
} 
```

这似乎是一个 hack，但它实际上非常可靠。无论如何，这是唯一可行的解​​决方案。

### 旧答案

以下代码将放入您的自定义子类中`UIViewController`，几乎可以支持景观。但是，我注意到一个角落案例（当从右侧旋转> 不支持倒置> 左侧时）它不起作用（切换高度和宽度）。

```
BOOL isPortrait = self.interfaceOrientation == UIInterfaceOrientationPortrait;
CGSize statusBarSize = [UIApplication sharedApplication].statusBarFrame.size;
CGFloat statusBarHeight = (isPortrait ? statusBarSize.height : statusBarSize.width); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-20T19:36:42.230

试试这个：

```
CGFloat statusBarHeight = [[UIApplication sharedApplication] statusBarFrame].size.height; 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-10-19T20:59:03.720

**斯威夫特 3 或斯威夫特 4：**

```
UIApplication.shared.statusBarFrame.height 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-28T18:59:20.323

虽然状态栏通常是 20pt 高，但在某些情况下它可能是这个数量的两倍：

*   当您正在打电话时（这是一种很常见的情况）；
*   当录音机、Skype 或类似应用程序在后台使用麦克风时；
*   当个人热点被激活时；

试试吧，你会亲眼看到的。将高度硬编码为 20pt 通常会起作用，直到它不起作用。

所以我第二次H2CO3的回答：

```
statusBarHeight = [[UIApplication sharedApplication] statusBarFrame].size.height; 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-12-09T02:26:06.577

**编辑** iOS 11 确定视图内容顶部放置位置的方法是 UIView 的`safeAreaLayoutGuide`See [UIView Documentation](https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide)。

**不推荐使用的答案** 如果您的目标是 iOS 7+，UIViewController 的文档建议 viewController 的`topLayoutGuide`属性为您提供状态栏的底部，或者导航栏的底部，如果它也是可见的。这可能是有用的，并且肯定比许多以前的解决方案更少黑客攻击。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-09-26T08:44:31.063

对于 iOS 13，您可以使用：

```
UIApplication.shared.keyWindow?.windowScene?.statusBarManager?.statusBarFrame.height 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-02-04T17:45:06.740

不要忘记状态栏的框架将在屏幕的坐标空间中！如果您以横向模式启动，您可能会发现宽度和高度被交换了。如果您支持横向，我强烈建议您使用此版本的代码：

```
CGRect statusBarFrame = [self.window convertRect:[UIApplication sharedApplication].statusBarFrame toView:view]; 
```

然后您可以直接读取 statusBarFrame 的 height 属性。在这种情况下，“视图”应该是您希望在其中使用测量值的视图，很可能是应用程序窗口的根视图控制器。

顺便说一句，状态栏不仅在通话过程中可能会更高，如果状态栏被故意隐藏，它也可能为零。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-11-11T07:59:09.113

```
 var statusHeight: CGFloat!
    if #available(iOS 13.0, *) {
         statusHeight = UIApplication.shared.keyWindow?.windowScene?.statusBarManager?.statusBarFrame.height
    } else {
        // Fallback on earlier versions
        statusHeight = UIApplication.shared.statusBarFrame.height
    } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-24T05:03:08.900

这是获取屏幕状态栏高度的 Swift 方法：

```
var screenStatusBarHeight: CGFloat {
    return UIApplication.sharedApplication().statusBarFrame.height
} 
```

这些作为标准功能包含在我的项目中：[https ://github.com/goktugyil/EZSwiftExtensions](https://github.com/goktugyil/EZSwiftExtensions)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-28T09:19:15.170

### `UIApplication.shared.statusBarFrame.height`在**iOS 13中已弃用**

> 'statusBarFrame' 在 iOS 13.0 中已弃用：改用窗口场景的 statusBarManager 属性。

您可以在 iOS 13 中检索状态栏高度，如下所示：

```
let statusBarHeight = view.window?.windowScene?.statusBarManager?.statusBarFrame.height 
```

注意！它是可选的，因此请确保您有正确的后备。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-03T07:49:40.413

默认情况下，iOS 中的状态栏高度为`20 pt`.

更多信息：[http ://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-20T20:55:02.933

我刚刚找到了一种方法，允许您不直接访问状态栏高度，而是计算它。

**导航栏高度 - topLayoutGuide 长度 = 状态栏高度**

迅速：

```
let statusBarHeight = self.topLayoutGuide.length-self.navigationController?.navigationBar.frame.height 
```

`self.topLayoutGuide.length`是半透明条覆盖的顶部区域，`self.navigationController?.navigationBar.frame.height`是不包括状态栏的半透明条，通常为44pt。因此，通过使用这种方法，您可以轻松计算状态栏高度，而无需担心由于电话而导致状态栏高度变化。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-17T03:47:46.643

**斯威夫特 5**

UIApplication.shared.statusBarFrame.height

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2014-02-11T08:13:57.813

使用以下单行代码，您可以获得任何方向的状态栏高度，以及它是否可见

```
#define STATUS_BAR_HIGHT (
    [UIApplicationsharedApplication].statusBarHidden ? 0 : (
        [UIApplicationsharedApplication].statusBarFrame.size.height > 100 ?
            [UIApplicationsharedApplication].statusBarFrame.size.width :
            [UIApplicationsharedApplication].statusBarFrame.size.height
    )
) 
```

它只是一个简单但非常有用的宏，只需尝试一下即可，您无需编写任何额外的代码

# php - 将参数发布到 jquery 对话框

> ID：12991937
> 
> 赞同：0
> 
> 时间：2012-10-20T19:34:01.450
> 
> 标签：php, jquery

我有一个小问题，我正在使用一个 jquery 对话框，我想在这个对话框中发布一个参数

这就是我使用它的方式：

```
$(document).ready(function() {
        $("#dialogShare").dialog({
                    resizable: true,
                    width:400,
                    modal: true,
                    autoOpen: false 
        });
});

$("#share").click(function(){
    $.post( 
            "/accueil.php",
            { name: $("#idPubToPreview").val() }
    );
    $("#dialogShare").dialog('open');
}); 
```

在显示对话框“#dialogShare”内容的div中，我做了一个$_POST的var_dump，但它似乎是空的！

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:37:40.707

将您的点击事件放在文档就绪调用中：

```
$(document).ready(function() {
    $("#dialogShare").dialog({
        resizable: true,
        width: 400,
        modal: true,
        autoOpen: false
    });
    $("#share").click(function() {
        $.post("/accueil.php", {
            name: $("#idPubToPreview").val()
        });
        $("#dialogShare").dialog('open');
    });
});​ 
```

# ruby-on-rails - Rails 自动增量列

> ID：12991941
> 
> 赞同：1
> 
> 时间：2012-10-20T19:34:39.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, auto-increment

大约一周前我问了同样的问题，但我可能不清楚我想要什么。我已经创建了一个由几个不同的选择框排序/过滤的表。我需要增加表中的第一列，例如：

1 |

2 |

3 |

等等

我知道这是一个简单的问题，有一个简单的解释，但我无法弄清楚。我希望它能够像本网站中的团队一样发挥作用：http: [//espn.go.com/college-football/rankings](http://espn.go.com/college-football/rankings)

任何帮助是极大的赞赏

谢谢，

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:42:31.880

如果您只想要一个始终连续运行的表中的数字（1,2,3），那么只需执行以下操作：

```
<% count = 1 %>
<table>
  <% collection.each do |c| %>
    <tr>
      <td><%= count %></td>
      <td>other info...</td>
    </tr>
    <% count += 1 %>
  <% end %>
</table> 
```

或者，甚至更短（正如“@mu 太短”的评论中所建议的那样）

```
<table>
  <% collection.each_with_index do |item, index| %>
    <tr>
      <td><%= index %></td>
      <td><%= item </td>
    </tr>
  <% end %>
</table> 
```

# css - 没有排水沟的指南针 susy 列？

> ID：12991944
> 
> 赞同：2
> 
> 时间：2012-10-20T19:34:58.287
> 
> 标签：css, compass-sass, susy-compass

我有一个完美运行的网格，除了我希望导航中的列相互对接。这是桌面上的 24 列魔法网格，每个导航项都是 4/24。如果我尝试负边距，它们不再跨越导航栏的整个宽度，它们滑到左边并留下一个洞（最后一项是欧米茄）。这可以通过列来完成，还是我只需要在没有导航栏的情况下完成？在此屏幕截图中，我将它们全部涂成灰色以使其明显：

![在此处输入图像描述](../Images/921f0ec5022da665fbcc6e692d5caf1d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:34:33.410

如果您不需要排水沟，则不需要 Susy 的帮助 - 数学很简单：

```
.nav-item {
  float: left;
  width: percentage(4/24);
} 
```

就是这样，但正如您所注意到的，由于亚像素舍入，某些浏览器中会留下额外的空间。亚像素舍入没有简单的解决方案，除了学习围绕它进行设计。Susy 将最后一列向右浮动，因为在内部隐藏空间比在边缘更容易。

你的[另一个选择](http://palantir.net/blog/responsive-design-s-dirty-little-secret)有点老套，让你更接近（但不是全部）。通过将所有列向左拉齐，您可以将它们推回原位，而不会让舍入误差累加。这样你就永远不会有超过 1px 的差距：

```
.nav-item {
  float: left;
  width: percentage(4/24);

  // pull things flush left
  margin-right: -100%;

  // push things back into place
  @for $i from 1 through 6 {
    &:nth-child(#{$i}) { margin-left: percentage(($i - 1)*4/24); }
  }
} 
```

当然，如果您支持旧版浏览器，您可以使用类来代替 :nth-child。如果你正在做任何类型的响应式设计，这是你能做的最好的。响应式设计无法完全避免亚像素舍入。我强烈建议学习围绕它进行设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:19:37.370

Eric Meyer 太棒了，他现在包含了一些可以帮助你解决这个问题的东西 Steve - 看看最新版本的 Susy 中的[流血](http://oddbird.net/2013/03/20/isolation-susy)。

我相信这会帮助你解决你的问题。它允许您执行以下操作：

```
.nav-item {
  ...
  @include bleed(1 of 4);
} 
```

彻底阅读[更新以使用隔离和流血](http://oddbird.net/2013/03/20/isolation-susy/)

希望有帮助！感谢 Eric 在 Susy 上做得如此出色:)

# python - 打开为不读取文件的最后一块

> ID：12991948
> 
> 赞同：1
> 
> 时间：2012-10-20T19:35:08.717
> 
> 标签：python, file-io, buffer

我正在尝试逐个读取文件：

```
def buf_read2(filename, buffer_size):

    with open(filename, 'rb') as f:
        buffer = f.read(buffer_size)

        print buffer  # and do other stuff with it 
```

这不会读取文件的最后一块。例如，如果一个文件是 129 字节，而我设置`buffer_size`为 128，则不会读取最后一个字节。

这种老派的方法虽然有效：

```
def buf_read1(filename, buffer_size):

    f = open(filename, 'rb')
    while True:
        buffer = f.read(buffer_size)
        if not buffer:
            break

        print buffer  # and do other stuff with it

    f.close() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:37:11.193

`with`不是一个循环，所以在你的第一个例子中，`read()`只被调用一次。

您仍然需要包含一个循环：

```
with open(filename, 'rb') as f:
    while True:
        buffer = f.read(buffer_size)
        if not buffer:
            break
        print buffer  # and do other stuff with it 
```

# lisp - 从另一个文件剪辑导出函数

> ID：12991958
> 
> 赞同：0
> 
> 时间：2012-10-20T19:36:52.167
> 
> 标签：lisp, clisp

我正在使用编程语言剪辑。我在 .lisp 文件中有一些函数 X、Y、Z，比如说 A。现在我正在 .lisp 文件 B 中编写一个不同的程序，我需要使用 X、Y、Z。

如何在 Clisp 中导入函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:44:35.793

clisp 实现了常见的 lisp 函数，因此：

```
(load 'myfile) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:18:56.233

`CLISP`不是真正的编程语言。它是具有许多扩展的编程语言*Common Lisp的实现。*

您可以使用函数[LOAD](http://www.lispworks.com/documentation/HyperSpec/Body/f_load.htm)加载文件。

# web-services - django heroku web 应用程序需要小存储空间

> ID：12991961
> 
> 赞同：2
> 
> 时间：2012-10-20T19:37:17.513
> 
> 标签：web-services, web-applications, heroku

我有一个网络应用程序，它从网络上获取一些图像并将其存储在服务器上。在我的本地服务器上，我可以使用非常方便的 ImageField.upload_to 将文件系统用于图像。但由于 heroku 不允许上传图片，我无法使用相同的机制。图像数量约为 400，我不需要超过 15 MB 的存储空间。我的问题是我为我的 django heroku 网络应用上传大约 15 MB 数据的可能方法是什么：

1.  S3 - 没有 15 MB 太少而无法进入 S3。另外，我没有信用卡，AWS 也不接受借记卡。
2.  Dropbox - 我可以以某种方式使用 Dropbox 作为存储服务吗？
3.  还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:38:13.457

好的，因为没有人回答：我最终用 S3 做。使用 Django 应用程序`storages`将 S3 插件作为默认文件存储后端。然后 ImageField.upload_to 会将图像保存在 S3 存储桶而不是本地文件系统上。可以使用我在 AWS 上的借记卡创建帐户，它提供免费套餐，所以 S3 是。Dropbox 可能也可以使用，但不会像 S3 那样无缝集成。

# python - 在 Python 中拉伸列表

> ID：12991962
> 
> 赞同：2
> 
> 时间：2012-10-20T19:37:36.550
> 
> 标签：python, algorithm, list

一个例子：我有一个列表`[1,2,3,4,5,6,7,8]`，我需要将它“拉伸”到 20，现有值尽可能均匀分布，“缺失”值替换为`None`，结果列表必须以 1 开头并以 8 结尾。

原始列表中的值和要分配的 20-8 个 None 值之间有 8-1 个空格，因此我们可以在每个“空格”中放置一个 None。

```
[1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8] 
```

现在我们还有 12-7`None`个值要分配，我们可以将其中的 4 个分配到其他空间：

```
[1, None, None, 2, None, 3, None, None, 4, None, 5, None,None 6, None, 7, None,
    None, 8] 
```

现在我们剩下一个可以随机分配：

```
[1, None, None, 2, None, 3, None, None, 4, None, 5, None, None, 6, None, None 7, 
    None, None, 8] 
```

有没有一种算法可以让你完成这样的任务？也许是一个实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T19:44:14.467

基本思想：只是从旧位置线性插入新位置。为简单起见，我们使用地板除法，但您可以更聪明地使用四舍五入除法以获得更均匀的分布。

```
def stretch_to(l, n):
    out = [None] * n
    m = len(l)
    for i, x in enumerate(l):
        out[i*(n-1)//(m-1)] = x

    return out 
```

样本：

```
>>> stretch_to(range(8), 20)
[0, None, 1, None, None, 2, None, None, 3, None, 4, None, None, 5, None, None, 6, None, None, 7] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:42:54.220

如果您的第一个列表中有 n 次，第二个列表中有 m 个项目。像这样的东西会起作用。

```
l2 = [None for I in range(m)]
for i, x in emumerate(l1):
    index = i * m / n
    l2[index] = l1[i] 
```

您需要决定边缘情况的行为，如果`m<n`，该怎么办等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T00:07:08.920

这是我认为有趣的简洁替代方案：

```
def stretch(seq, n):
    seq = [seq[i * (len(seq) - 1) // (n - 1)] for i in range(n)]
    return [seq[0]] + [x if x != y else None for x, y in zip(seq[1:], seq)] 
```

基于此，一个基于 itertools 的版本不会复制列表，返回一个迭代器，您可以选择将其转换为列表：

```
from itertools import tee, chain, izip
def stretch(seq, n):
    s1, s2 = tee(seq[i * (len(seq) - 1) // (n - 1)] for i in range(n))
    return chain((next(s1),), (x if x != y else None for x, y in izip(s1, s2))) 
```

# web-scraping - 使用 Behat/Mink 时加载 GoutteClient 时出错

> ID：12991964
> 
> 赞同：0
> 
> 时间：2012-10-20T19:37:49.493
> 
> 标签：web-scraping, scraper, mink, goutte

我正在尝试使用 Behat/Mink 来加载网站。

我使用 Composer 进行安装，这是我的 composer.json：

```
{
    "require": {
        "behat/mink": "*",

        "behat/mink-goutte-driver": "*",
        "behat/mink-selenium-driver": "*",
        "behat/mink-selenium2-driver": "*",
        "behat/mink-sahi-driver": "*",
        "behat/mink-zombie-driver": "*"
    }
} 
```

为了进行安装，我运行了以下命令：

```
$ curl http://getcomposer.org/installer | php
$ php composer.phar install 
```

一切安装顺利，没有任何错误消息。

这是我的 index.php 文件：

```
require 'vendor/autoload.php';

use Behat\Mink\Mink,
    Behat\Mink\Session,
    Behat\Mink\Driver\GoutteDriver,
    Behat\Mink\Driver\Goutte\Client as GoutteClient,
    Behat\Mink\Driver\SahiDriver;

$startUrl = 'www.example.com';

// init Mink and register sessions
$mink = new Mink(array(
    'goutte1'    => new Session(new GoutteDriver(GoutteClient($startUrl))),
    'goutte2'    => new Session(new GoutteDriver(GoutteClient($startUrl))),
    'javascript' => new Session(new SahiDriver('firefox')),
    'custom'     => new Session(new MyCustomDriver($startUrl))
)); 
```

我尝试使用以下命令运行它：

```
$ php index.php 
```

但是我收到以下错误消息：

> PHP 致命错误：在第 14 行的 index.php 中调用未定义函数 GotteClient()

指的是这一行：

```
'goutte1'    => new Session(new GoutteDriver(GoutteClient($startUrl))), 
```

安装是使用以下文档完成的：

[http://mink.behat.org/](http://mink.behat.org/)

该示例是按照文档完成的：

[https://github.com/Behat/Mink](https://github.com/Behat/Mink)

关于我可能做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:15:43.413

您忘记了*GoutClient*之前的“new”关键字。你应该写：

```
 $mink = new Mink(array(
    'goutte1'    => new Session(new GoutteDriver(new GoutteClient($startUrl))),
    'goutte2'    => new Session(new GoutteDriver(new GoutteClient($startUrl))),
    'javascript' => new Session(new SahiDriver('firefox')),
    'custom'     => new Session(new MyCustomDriver($startUrl))
)); 
```

顺便说一句：您根本不必初始化*GouteClient*，*GuteDriver*应该可以正常工作。

这是 Mink 独立的工作示例：[https ://github.com/jakzal/web-scraper-demo](https://github.com/jakzal/web-scraper-demo)

# cakephp - 无法在 CakePHP 中设置 POST 方法路由

> ID：12991968
> 
> 赞同：1
> 
> 时间：2012-10-20T19:38:16.907
> 
> 标签：cakephp, rest, http-headers, cakephp-1.2

我在 CakePHP 1.2 中设置了以下路线：

```
Router::connect(
    "/inbound/:hash",
    array('controller' => 'profiles', 'action' => 'inbound', '[method]' => 'POST'),
    array('hash' => '[0-9a-zA-Z]+'),
    array('pass' => array('hash'))
); 
```

这是我的请求标头（通过 drupal_http_request()）：

```
POST /inbound HTTP/1.0
Host: mysite.dev
User-Agent: Drupal (+http://drupal.org/)
Content-Length: 45

hash=test 
```

但是，当我发布时，我收到了 404 响应。如果我从路由定义中删除参数“:hash”，我会得到 200。但在这两种情况下，我的控制器中的操作都没有得到传递的参数（哈希）。

我不确定我做错了什么，因为我似乎在做[doc 中的内容](http://book.cakephp.org/1.2/en/view/478/Custom-REST-Routing)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:40:58.627

参数的目的`pass`是定义哪些路由参数被传递给动作。所以你在那里做的是创建一个连接到这样的 URL 的路由：

```
/inbound/foo 
```

where`foo`将作为参数传递给控制器`inbound`​​操作。

但是，您的请求仅指向`/inbound`，因此这与您的路线不匹配，因为缺少参数，因此您收到 404。

您的 POST 请求正文中的数据作为常规 POST 数据传递，即可以通过控制器`params`属性获得：

```
$this->params['form']['hash'] 
```

因此，要么删除`hash`路由中的参数并通过 访问数据`$this->params['form']`，要么在定义参数的 URL 中传递数据`hash`：

```
/inbound/test 
```

然后您可以像这样在控制器操作中访问它：

```
function inbound($hash)
{
    echo $hash;
} 
```

# javascript - 带引号或不带引号的 JS 对象键？

> ID：12991969
> 
> 赞同：9
> 
> 时间：2012-10-20T19:38:35.190
> 
> 标签：javascript, jquery, object

> **可能重复：**
> [带引号和不带引号的对象键有什么区别？](https://stackoverflow.com/questions/4348478/what-is-the-difference-between-object-keys-with-quotes-and-without-quotes)

兴趣，什么是正确的方法，用引号写对象键？那是

```
var obj = {
    "name": "Jhon"
} 
```

或者

```
var obj = {
    name: "Jhon"
} 
```

例如，来自 php 代码`echo json_encode(array("a"=>"aaa","b"=>"bbb"));`的结果是具有带引号的键的对象。但是例如看 jquery animate，在文档中是不带引号的键，（这也是 JS 对象格式，对吗？）

```
 $("#someElement").animate({
                    marginLeft: "200px"
                },
                {
                    duration: 1000
                }); 
```

那么，更正确的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T19:42:36.310

不要混淆 JSON 对象和 Javascript 对象字面量。JSON 对象基本上只是一个字符串，它的语法需要有正确的引号。但是，对于 javascript 对象，不需要在其属性周围加上引号。但在某些情况下，您必须使用它们，例如：

```
var test = {
    "with spaces": 12
} 
```

# asp.net - 防止多次登录

> ID：12991973
> 
> 赞同：1
> 
> 时间：2012-10-20T19:39:02.223
> 
> 标签：asp.net

我正在创建一个用户**无法尝试多次登录的应用程序。**如果特定**用户登录**，我的**数据库**标志**值**将设置为**1**，这意味着没有其他具有相同用户名和密码的成员可以登录。

如果用户**注销**我的**数据库标志值设置为 0。**一切正常，但现在我有一个不同的**问题**，即当**用户突然关闭浏览器而没有注销页面**或**会话超时时**，应自动设置数据库标志值为 0。

我正在搜索一些文章说它可以使用 global.asax 文件发生。我试过了，但到目前为止什么也没发生。请问你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:44:04.953

检测用户关闭浏览器窗口的唯一安全方法是通过*检测信号*。也就是说，浏览器不断向服务器发送请求，让它知道它还活着。由于 ASP.net 会跟踪会话，因此它将在检测到不活动后调用您的会话结束处理程序。

因此，如果您将会话超时设置为一分钟，并且每 45 秒发送一次请求，您的会话结束处理程序将被调用，最多延迟一分钟

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:13:36.990

> **注意：关闭浏览器不会自动触发 Session_End 事件**。Session_End 事件将在会话过期一定时间后触发 - 此超时值在 IIS 中设置 - 默认设置为 20 分钟。将用户设置为非活动状态的唯一方法是依靠 JavaScript 向结束会话的 Web 方法发出 ajax 请求。

1.  在 Web 应用程序的根目录中创建一个新的全局应用程序类 (global.ascx) 文件。为此，请在 Visual Studio 的解决方案资源管理器中右键单击您的网站项目节点，然后选择“添加 - > 新项目”

您将看到以下对话框（在 Visual Studio 2010 中 - 其他版本类似）
![在此处输入图像描述](../Images/ec506ff002df52a74391e8142beefbff.png)

2.  单击添加并查看新的 global.asax 文件的代码隐藏。
3.  您现在应该看到一个包含一些事件的文件，其中之一是`Session_End`. 将结束用户会话的任何代码放在这里：

    ```
    protected void Session_End(object sender, EventArgs e)
    {
        // put your code that logs a user out here
    } 
    ```

4.  为了确保会话在用户关闭浏览器时结束，您需要依赖 JavaScript**注意如果用户关闭了 JavaScript，这将不起作用。** 在网站的每个页面上，您都需要添加如下内容：

    ```
    window.onbeforeunload = function () {

        // write an ajax call to a Web Method on your site that ends the session

    } 
    ```

# php - 带撇号的 URL 变量

> ID：12991978
> 
> 赞同：0
> 
> 时间：2012-10-20T19:39:46.437
> 
> 标签：php, url, escaping

> **可能重复：**
> [PHP 5.3 自动从表单字符串中转义 $_GET/$_POST？](https://stackoverflow.com/questions/6642901/php-5-3-automatically-escapes-get-post-from-form-strings)

我有一个无法解决的问题。我的网站上有传递变量的搜索功能。一些 url 变量中可能有撇号。例如：

```
http://xyz.php?var=that's 
```

我的问题是，当变量通过时，它会添加一个 \ 来转义撇号。然后，当我单击分页按钮时，它将逃避转义添加 \. 有没有办法阻止 url 的转义。它可以很好地返回撇号或只转义一次。

```
http://xyz.php?var=that's or http://xyz.php?var=that\'s 
```

但是当我分页时它逃脱了逃脱并且

```
> http://xyz.php?var=that\\\'s 
```

当它逃脱转义添加多个斜杠时，它会破坏我的搜索或不返回任何结果。

有谁知道 php 函数来阻止它转义转义或根本不转义 url。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:45:35.673

[使用 parse_str 时可能会阻止自动添加](https://stackoverflow.com/a/3117830/926620)斜杠？

```
// Turn off magic_quotes_runtime
if (get_magic_quotes_runtime())
    set_magic_quotes_runtime(0);

// Strip slashes from GET/POST/COOKIE (if magic_quotes_gpc is enabled)
if (get_magic_quotes_gpc())
{
    function stripslashes_array($array)
    {
        return is_array($array) ? array_map('stripslashes_array', $array) : stripslashes($array);
    }

    $_GET = stripslashes_array($_GET);
    $_POST = stripslashes_array($_POST);
    $_COOKIE = stripslashes_array($_COOKIE);
} 
```

如果您对禁用 magic_quotes 不满意，请参阅[stripslashes 。](http://www.php.net/manual/en/function.stripslashes.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:34:48.447

要转义 URL 参数，请使用`urlencode()`（或 urldecore，解码 url）

当您将变量值放入查询中时，您可以使用 `mysql_real_escape_string()`

```
<a href="search.php?var=<? echo urlencode("something isn't right");?>">search</a> 
```

和

```
mysql_query("SELECT .. WHERE x = '" . mysql_real_escape_string($_GET['var']) . "'"); 
```

你应该没事。

禁用魔术引号，如果它们在服务器配置中启用！

# xslt - XSLT：如何从 xml 字符串中排除某些 html 标签？

> ID：12991979
> 
> 赞同：4
> 
> 时间：2012-10-20T19:39:46.923
> 
> 标签：xslt, tridion

我正在尝试使用 XSLT 1.0 从 xml 字符串中排除某些 html 标记

在这里，目前我正在排除`<a>`和`<img>`标记。对于`<a>`标签，我只想显示文本。

## 尝试过 XSLT 模板：

```
<xsl:template match="*" mode="ExcludeHTMLTags">
  <xsl:choose>
    <xsl:when test="local-name() = 'a' or local-name() = 'img'">
      <xsl:value-of select="text()"/>
    </xsl:when>
    <xsl:otherwise>
  <xsl:apply-templates select="node()|@*"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

## 以以下方式调用上述模板：

```
<xsl:variable name="guideContent">
  <root>
    <xsl:apply-templates 
 select="document(@guideID)/tcm:Component/tcm:Data/tcm:Content/em:GeneralContent/em:Body/node()" 
 mode="expandXHTML"/>
  </root>
</xsl:variable>
<xsl:apply-templates select="msxsl:node-set($guideContent)/node()" mode="ExcludeHTMLTags"/> 
```

## 输入 XML 字符串：

```
<root>
This is a test message.
<p>Message within p tag</p> click <a href="www.test.com">here</a>.
<img src="/test.jpg" /> Message after image.
<strong>Message within strong</strong>
<link:component id="XXX" ... >My Link</link:component>
<p>Message after link component</p>
</root> 
```

## 输出：

```
<root>
This is a test message.
<p>Message within p tag</p> click here.
Message after image.
<strong>Message within strong</strong>
<link:component id="XXX" ... >My Link</link:component>
<p>Message after link component</p>
</root> 
```

请提出我做错了什么并告诉最好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:39:10.067

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="a"><xsl:apply-templates/></xsl:template>
 <xsl:template match="img"/>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（OP 未提供 !!!）：

```
<html>
 <body>
  <a>Anchor text</a>
  <img source="http://someUrl"/>
 </body>
</html> 
```

**产生想要的正确结果：**

```
<html>
   <body>Anchor text</body>
</html> 
```

# java - 不同输入数组中的百分比

> ID：12991981
> 
> 赞同：2
> 
> 时间：2012-10-20T19:40:01.723
> 
> 标签：java, arrays

我正在为我的计算机课程做作业，我们的任务是编写一个方法来分析数组“数字”并返回一个表示每个数字的数组，它作为前导数字出现的次数...

即 { 100, 200.1, 9.3, 10} 然后 1 作为前导数字出现 50% 的时间，2 出现在 25% 的时间，9 出现在 25% 的时间，所以您生成的数组应该包含：{0, .5, .25, 0, 0, 0, 0, 0, 0, .25}

我在开始时遇到问题，建议我们编写一个名为 countLeadingDigits 的辅助方法，它返回每个数字的计数数组，然后才计算百分比。我不知道如何编写从用户那里获取未知数量的输入双精度然后存储每个数字作为前导数字出现的次数的方法。我已经编写了计算的代码部分领先的数字。请问有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:57:49.763

简短而密集的代码的解决方案：

```
public static void main(String[] args)
{
    double[] inputs = { 100, 200.1, 9.3, 10 , -100 }; // your inputs
    double sum = inputs.length;

    int[] leadingDigitCounters = new int[10]; // counters for 0...9

    // Here is how you increment respective leading-digit counters
    for (double d : inputs) 
    {
        int j = Integer.parseInt((d + "").replace("-", "").charAt(0) + "");
        leadingDigitCounters[j]++;
    }   

    // Printing out respective percentages
    for (int i : leadingDigitCounters)
        System.out.print((i / sum) + " ");
} 
```

**输出：**

> 0.0 0.6 0.2 0.0 0.0 0.0 0.0 0.0 0.0 0.2

# visual-studio - 在 Atmel Studio 6 中启用代码完成

> ID：12991983
> 
> 赞同：2
> 
> 时间：2012-10-20T19:40:07.220
> 
> 标签：visual-studio, ide, intellisense, code-completion, atmel

我正在寻找Atmel的IDE Atmel Studio 6中的自动完成功能。由于它是基于Visual Studio的，所以应该有IntelliSense，但是我只能在“编辑”下找到菜单项“Intellisense”，根本没有效果。我正在用 C 编程。

有没有办法像在 NetBeans 中一样提供自动完成功能（例如，键入时自动弹出的框）？

**编辑：**我的意思不是自动完成“wh”->“while”，而是完成变量、函数名等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:10:10.920

Atmel Studio 6 默认附带 Visual Assist (VA)，它全面地为 C/C++ 语言提供智能感知支持。您可以从“扩展管理器”（工具 -> 扩展管理器 -> 已安装的扩展“菜单”）检查 VA 是否与 Atmel Studio 一起正确安装。如果它不可用，您可以从扩展管理中的“可用扩展”选项卡下载它

# jquery - 删除 jquery 验证类

> ID：12991984
> 
> 赞同：1
> 
> 时间：2012-10-20T19:40:14.857
> 
> 标签：jquery, validation

从下面的示例中，如何使用 jquery 删除第二类？

由此：

```
<input type="text" class="span {validate:{required:true, messages:{required:'Please enter name'}}}" id="lname" name="lname"> 
```

对此：

```
<input type="text" class="span" id="lname" name="lname"> 
```

笔记：

1.  元素可以有几个类
2.  `{validate: ...}`是动态创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:42:31.380

如果您只想保留“跨度”类，您可以执行以下操作：

```
$('.span').attr('class', 'span') 
```

如果要删除第二个类，无论其名称是什么，都可以执行以下操作：

```
$('.span').each(function() {
    $(this).attr('class', $(this).attr('class').replace(/^(.+?) [^ ]+/, '$1'))
}); 
```

请注意，类名中不能有空格，因此第二个类应该是第一个空格之后的类，并在下一个空格或属性值的末尾结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:42:19.460

```
$('.span').removeClass('{validate:{required:true, messages:{required:'Please enter name'}}}'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:42:24.960

好吧，通常你会这样做..

```
$("#element").removeClass("nameOfClass"); 
```

但这是一些奇怪的课程，你已经到了那里..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T20:43:23.830

使用删除类

```
$('input, select, textarea', '#form_id').removeClass('errorClass'); 
```

# java - 使用 KeyListener 控制 Pong

> ID：12991986
> 
> 赞同：2
> 
> 时间：2012-10-20T19:40:20.100
> 
> 标签：java, swing, keylistener, key-bindings, pong

我在让我的乒乓球游戏正常工作时遇到了一些麻烦，这个项目一开始只是让一个球具有物理特性，但后来我决定做更多的工作

我有那个球来回弹跳，除了键 W 和 S 之外的所有键都无法控制玩家 1 并且向上和向下箭头键无法控制玩家 2

```
public void keyPressed(KeyEvent e){  
            if(e.getKeyCode() == e.VK_UP){  
                p2Y -= 3; 
                System.out.println("UP");
            }   
            if(e.getKeyCode() == e.VK_DOWN){  
                p2Y += 3;  
                System.out.println("Down");
            }  
            if(e.getKeyCode() == e.VK_W){  
                p1Y -= 3; 
                System.out.println("Up");
            }   
            if(e.getKeyCode() == e.VK_S){  
                p1Y += 3;  
                System.out.println("down");
            }
            repaint();
        } 
```

它甚至不会显示系统打印消息

我不知道它只是代码的这一部分是问题还是其他地方

如果它在其他地方，这里是该文件其余部分的链接 [http://pastebin.com/TJbLBxL7](http://pastebin.com/TJbLBxL7)

整个代码：

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class Pong extends JPanel
{
    Circle circle1;
    javax.swing.Timer timer;
    ArrayList<Point> points = new ArrayList<Point>();
    int p1X=10, p1Y=320;
    int p2X=760, p2Y = 320;
    int y, y1;

    int p1Score, p2Score;

    boolean playing = true;

    public Pong(Color backcolor, int Width, int Height)
    {
        setBackground(backcolor);
        setPreferredSize(new Dimension(Width, Height));

        //first circle

        circle1 = new Circle(Width / 2, 360, 15, Color.white);
        circle1.setVelocity(4);
        circle1.setDirection(180);

        timer =  new javax.swing.Timer(5, new MoveListener());
        addKeyListener(new KeyWatcher());
        timer.start();
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        //first circle
        circle1.draw(g);
        circle1.fill(g);

        // Draw Players
        g.setColor(Color.red);
        g.fillRect(p1X, p1Y, 10, 75);
        g.setColor(Color.blue);
        g.fillRect(p2X, p2Y, 10, 75);

        //Draw Scores
        g.setColor(Color.white);
        g.drawString("Player 1's Score: " + p1Score, 10, 10);
        g.drawString("Player 2's Score: " + p2Score, getWidth() - 120, 10);
        repaint();

        if(!playing)
        {
            g.setColor(Color.red);
            g.drawString("GAMEOVER!!!", (getWidth() / 2) - 15, 10);
        }
        else
        {
        }
    }

    private class MoveListener extends MouseAdapter implements ActionListener
    {
        public void actionPerformed(ActionEvent arg0)
        {

            int x1 = circle1.getX();
            int y1 = circle1.getY();
            int width = getWidth();
            int height = getHeight();
            int radius1 = circle1.getRadius();

            //first circle

            if(x1 - radius1 <= 0)
            {
                p2Score++;
                circle1.setX(getWidth()/2);
                circle1.setY(getHeight()/2);
            }
            if(x1 + radius1 >= width)
            {
                p1Score++;

                circle1.setX(getWidth()/2);
                circle1.setY(getHeight()/2);
            }
            if(y1 - radius1 <= 0 || y1 + radius1 >= height )
            {
                circle1.turnY();

            }

            if((x1 - radius1 == p1X) || (x1 + radius1 == p2X))
            {
                circle1.turnX();
            }

            circle1.move();
            repaint();
        }

        public void GameOver()
        {
            playing = false;
        }

    }
    private class KeyWatcher implements KeyListener
    {

        @Override
        public void keyPressed(KeyEvent e){  
            if(e.getKeyCode() == e.VK_UP){  
                p2Y -= 3; 
                System.out.println("UP");
            }   
            if(e.getKeyCode() == e.VK_DOWN){  
                p2Y += 3;  
                System.out.println("Down");
            }  
            if(e.getKeyCode() == e.VK_W){  
                p1Y -= 3; 
                System.out.println("Up");
            }   
            if(e.getKeyCode() == e.VK_S){  
                p1Y += 3;  
                System.out.println("down");
            }
            repaint();
        }  

        @Override
        public void keyReleased(KeyEvent e){  
             //if(e.getKeyCode() == e.VK_UP){  
            //        y1 = p2Y;  
             //       repaint();
             //   }   
             //   if(e.getKeyCode() == e.VK_DOWN){  
             //       y1 = p2Y;  
            //        repaint();
            //    } 
             //if(e.getKeyCode() == e.VK_W){  
             //       y = p1Y;  
            //        repaint();
            //    }   
            //    if(e.getKeyCode() == e.VK_S){  
            //        y = p1Y;  
            //        repaint();
             //   } 
        }  

        @Override
        public void keyTyped(KeyEvent arg0) {
            // TODO Auto-generated method stub

        }

    }
} 
```

我的新代码 这个问题是一次只能控制一个玩家

它也有我愚蠢的尝试通过制作 2 MyKeyAction 来修复它，但它根本没有改变它

```
package Bouncy;

import javax.swing.*;

import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class Pong extends JPanel
{
    Circle circle1;
    javax.swing.Timer timer;
    ArrayList<Point> points = new ArrayList<Point>();
    int p1X=10, p1Y=320;
    int p2X=760, p2Y = 320;
    int y, y1;

    int p1Score, p2Score;

    boolean playing = true;

    public Pong(Color backcolor, int Width, int Height)
    {
        setBackground(backcolor);
        setPreferredSize(new Dimension(Width, Height));

        //first circle

        circle1 = new Circle(Width / 2, 360, 15, Color.white);
        circle1.setVelocity(4);
        circle1.setDirection(180);

        timer =  new javax.swing.Timer(5, new MoveListener());
        setupKeyBinding();
        setupKeyBinding2();
        timer.start();
    }
    private void setupKeyBinding() {
          int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
          InputMap inMap = getInputMap(condition);
          ActionMap actMap = getActionMap();

          // this uses an enum of Direction that holds ints for the arrow keys
          for (DirectionP1 direction : DirectionP1.values()) {
             int key = direction.getKey();
             String name = direction.name();

             // add the key bindings for arrow key and shift-arrow key
             inMap.put(KeyStroke.getKeyStroke(key, 0), name);
             inMap.put(KeyStroke.getKeyStroke(key, InputEvent.SHIFT_DOWN_MASK), name);
             actMap.put(name, new MyKeyAction(direction));
          }
       }
    private void setupKeyBinding2() {
          int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
          InputMap inMap = getInputMap(condition);
          ActionMap actMap = getActionMap();

          // this uses an enum of Direction that holds ints for the arrow keys
          for (DirectionP2 direction : DirectionP2.values()) {
             int key = direction.getKey();
             String name = direction.name();

             // add the key bindings for arrow key and shift-arrow key
             inMap.put(KeyStroke.getKeyStroke(key, 0), name);
             inMap.put(KeyStroke.getKeyStroke(key, InputEvent.SHIFT_DOWN_MASK), name);
             actMap.put(name, new MyKeyAction2(direction));
          }
       }
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        //first circle
        circle1.draw(g);
        circle1.fill(g);

        // Draw Players
        g.setColor(Color.red);
        g.fillRect(p1X, p1Y, 10, 75);
        g.setColor(Color.blue);
        g.fillRect(p2X, p2Y, 10, 75);

        //Draw Scores
        g.setColor(Color.white);
        g.drawString("Player 1's Score: " + p1Score, 10, 10);
        g.drawString("Player 2's Score: " + p2Score, getWidth() - 120, 10);
        repaint();

        if(!playing)
        {
            g.setColor(Color.red);
            g.drawString("GAMEOVER!!!", (getWidth() / 2) - 15, 10);
        }
        else
        {
        }
    }

    private class MoveListener extends MouseAdapter implements ActionListener
    {
        public void actionPerformed(ActionEvent arg0)
        {

            int x1 = circle1.getX();
            int y1 = circle1.getY();
            int width = getWidth();
            int height = getHeight();
            int radius1 = circle1.getRadius();

            //first circle

            if(x1 - radius1 <= 0)
            {
                p2Score++;
                circle1.setX(getWidth()/2);
                circle1.setY(getHeight()/2);
            }
            if(x1 + radius1 >= width)
            {
                p1Score++;

                circle1.setX(getWidth()/2);
                circle1.setY(getHeight()/2);
            }
            if(y1 - radius1 <= 0 || y1 + radius1 >= height )
            {
                circle1.turnY();

            }

            if((x1 - radius1 <= p1X) || (x1 + radius1 >= p2X))
            {
                circle1.turnX();
            }

            circle1.move();
            repaint();
        }

        public void GameOver()
        {
            playing = false;
        }

    }

    enum DirectionP1 {
           W(KeyEvent.VK_W), S(KeyEvent.VK_S);

           private int key;

           private DirectionP1(int key) {
              this.key = key;
           }

           public int getKey() {
              return key;
           }
        }
    enum DirectionP2 {
           UP(KeyEvent.VK_UP), DOWN(KeyEvent.VK_DOWN);

           private int key;

           private DirectionP2(int key) {
              this.key = key;
           }

           public int getKey() {
              return key;
           }
        }

    class MyKeyAction extends AbstractAction {
           private DirectionP1 direction;

           public MyKeyAction(DirectionP1 direction) {

              this.direction = direction;
           }

           @Override
           public void actionPerformed(ActionEvent e) {
               switch (direction) {
                  case W:
                        p1Y -= 6; 
                     break;
                  case S:
                        p1Y += 6; 
                     break;

                  default:
                     break;
                  }
           }
        }
    class MyKeyAction2 extends AbstractAction {
           private DirectionP2 direction2;

           public MyKeyAction2(DirectionP2 direction2) {

              this.direction2 = direction2;
           }

           @Override
           public void actionPerformed(ActionEvent e) {

               switch (direction2) {
                  case UP:
                        p2Y -= 6; 
                     break;
                  case DOWN:
                        p2Y += 6; 
                     break;

                  default:
                     break;
                  }
           }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:45:58.630

你有一个焦点问题。您正在将 KeyListener 添加到 JPanel：但 JPanel 从来没有焦点，因此 KeyListener 将不起作用：

```
public class Pong extends JPanel
{
    //...

    public Pong(Color backcolor, int Width, int Height)
    {
        // ...

        timer =  new javax.swing.Timer(5, new MoveListener());
        addKeyListener(new KeyWatcher()); 
```

但是 JPanel 永远不会获得焦点，并且 KeyListeners 仅在被侦听的组件具有焦点时才起作用。

更好的解决方案不是在 KeyListeners 上进行中继，而是使用 Swing Timer 和 Key Bindings。请参阅[此链接](https://stackoverflow.com/a/6887354/522444)以获取此示例。

**编辑**： 或者更好的链接 - [Java KeyListener 不注册箭头键](https://stackoverflow.com/a/8961998/522444)。

**编辑 2**
也许更好的解决方案是使用键绑定，但使用它们在按键或按键释放时设置类的字段，然后使用 Swing Timer 作为游戏循环来轮询这些字段。

例如，这不会显示动画（由您决定），但表明此技术将允许响应同时按键：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.util.EnumMap;

import javax.swing.*;

public class NewArrowTest extends JPanel {
   private static final String PRESSED = "pressed";
   private static final String RELEASED = "released";
   private static final int TIMER_DELAY = 20;
   private EnumMap<Key, Boolean> keyMap = new EnumMap<NewArrowTest.Key, Boolean>(Key.class);

   public NewArrowTest() {
      keyMap.put(Key.W, false);
      keyMap.put(Key.S, false);
      keyMap.put(Key.UP, false);
      keyMap.put(Key.DOWN, false);

      // set up key binding
      ActionMap actionMap = getActionMap();
      int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);

      for (Key key : Key.values()) {
         KeyStroke pressedKeyStroke = KeyStroke.getKeyStroke(key.getKeyCode(), 0, false);
         KeyStroke releasedKeyStroke = KeyStroke.getKeyStroke(key.getKeyCode(), 0, true);

         inputMap.put(pressedKeyStroke, key.getText() + PRESSED);
         inputMap.put(releasedKeyStroke, key.getText() + RELEASED);
         actionMap.put(key.getText() + PRESSED, new MyArrowBinding(key, false));
         actionMap.put(key.getText() + RELEASED, new MyArrowBinding(key, true));
      }

      // start polling timer or game loop
      new Timer(TIMER_DELAY, new TimerListener()).start();
   }

   private static void createAndShowGui() {
      NewArrowTest mainPanel = new NewArrowTest();

      JFrame frame = new JFrame("NewArrowTest");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

   private class TimerListener implements ActionListener {
      public void actionPerformed(java.awt.event.ActionEvent e) {
         for (Key key : keyMap.keySet()) {
            System.out.printf("%6s %b%n", key, keyMap.get(key));
            // here we'd move things based on which key is true
         }
         System.out.println();

      };
   }

   private class MyArrowBinding extends AbstractAction {
      private Key key;
      private boolean released;

      public MyArrowBinding(Key key, boolean released) {
         this.key = key;
         this.released = released;
      }

      @Override
      public void actionPerformed(ActionEvent aEvt) {
         keyMap.put(key, !released);
      }
   }

   enum Direction {
      UP("Up"), DOWN("Down"), NEUTRAL("Neutral");
      private String text;

      private Direction(String text) {
         this.text = text;
      }
      public String getText() {
         return text;
      }
   }

   enum Key {
      W("W", Direction.UP, KeyEvent.VK_W), S("S", Direction.DOWN, KeyEvent.VK_S), 
      UP("Up", Direction.UP, KeyEvent.VK_UP), DOWN("Down", Direction.DOWN, KeyEvent.VK_DOWN);

      private String text;
      private Direction direction;
      private int keyCode;

      private Key(String text, Direction direction, int keyCode) {
         this.text = text;
         this.direction = direction;
         this.keyCode = keyCode;
      }

      public String getText() {
         return text;
      }

      public Direction getDirection() {
         return direction;
      }

      public int getKeyCode() {
         return keyCode;
      }

   }
} 
```

# c++ - boost::phoenix::function 的问题

> ID：12991991
> 
> 赞同：3
> 
> 时间：2012-10-20T19:40:43.813
> 
> 标签：c++, boost, lazy-evaluation, boost-phoenix

使用[boost::phoenix::function](http://www.boost.org/doc/libs/1_57_0/libs/phoenix/doc/html/phoenix/modules/function/adapting_functions.html)我遇到了一些问题。据我所知，这个惰性函数需要仿函数作为它的模板参数。我必须定义一个仿函数类/结构，然后将其作为模板参数传递以进行实例化。但它太长而且多余。我可以使用其他一些可调用类型进行`phoenix::function`创建（函数引用/指针等）吗？我试过`lambdas`：

```
 const auto foo = [] { cout <<"Test"; }
 const boost::phoenix::function<decltype(foo)> lazy; 
```

但调用`lazy()`没有编译。那么问题是有没有替代函子类来快速创建单行`phoenix::function`代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:52:51.200

由于类型`foo`不是默认可构造的，因此`lazy`需要一个初始化程序：

```
boost::phoenix::function<decltype(foo)> lazy { foo }; 
```

# java - 什么是可视化内存中变量的好方法？（可视化调试器）

> ID：12991994
> 
> 赞同：0
> 
> 时间：2012-10-20T19:40:55.373
> 
> 标签：java, debugging, stack, visualization

[我为我的学生（ http://www.kapparate.com/kj/](http://www.kapparate.com/kj/)）编写了一个浏览器内的 java-esque 调试器。在启用了 javascript 的浏览器中单击编译按钮），我试图弄清楚会是什么可视化当前范围内的变量的最佳方法。现在，我将它们打印为 JSON：

```
6 KJDB> 7 STACK {"x":"hello","y":"hello","a":4,"z":5,"xx":-5.6400000000000015,"c":true,"intArray":[5,90,35,45,150,3]} 
```

所以它代表 x、y、a、z、xx、c 和一个 intArray。相应的值也在那里。

但是，我的一些学生正在上中学，这种符号有时会令人困惑。我应该使用表格（每一行都是不同的变量吗？）。或者也许是带有代表变量的矩形的图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:46:43.723

包含名称和值的两列表。当您谈论方法调用和可能的递归时，您可能希望使用不同的边框来标记不同的堆栈帧。或者，您可以使用包含方法名称的单个列标题来标记堆栈帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:16:11.533

我的教授在我的 CS 入门课程中所做的是绘制一个非常宽的矩形来表示计算机的内存，然后将其分成几列（所以一行是任意长的，然后是多列，也是任意宽度）。

每当您创建变量时，他都会使用一个小块来表示变量或表示对该变量的引用。例如，一个`int`变量只会占用一小列或“块”内存。但是对于一个`int[]`变量（或任何其他类型的通过引用而不是值传递的变量），他会画一个块来表示引用，然后在行的下方画另一个块来表示实际值。他会简单地画箭头来表明较小的块引用了较大的块。

# asp.net-mvc - 在 MVC 自定义成员中获取 PersistentCookie 的值

> ID：12991996
> 
> 赞同：2
> 
> 时间：2012-10-20T19:41:07.790
> 
> 标签：asp.net-mvc, asp.net-membership

我使用 MVC 4，我的登录操作是这样的：

```
 [HttpPost]
    public ActionResult LogOn(Account loginInfo, string returnUrl)
    {
        if (this.ModelState.IsValid)
        {
            if (loginInfo.Username == "Ali" && loginInfo.Password == "110")
            {
                FormsAuthentication.SetAuthCookie(loginInfo.Username, loginInfo.RememberMe);
                FormsAuthentication.RedirectFromLoginPage(loginInfo.Username, loginInfo.RememberMe);
            }
        }
        this.ModelState.AddModelError("", "The user name or password provided is incorrect.");
        ViewBag.Error = "Login faild! Make sure you have entered the right user name and password!";
        return View(loginInfo);
    } 
```

现在我的问题是：我如何在任何时候检查用户是否选中了 RememberMe 复选框，换句话说，获取 PersistentCookie 的值？

**两种解决方案**：

**我的解决方案**：

```
 var isPersistent = false;
        var authCookie = HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            var ticket = FormsAuthentication.Decrypt(authCookie.Value);
            isPersistent = ticket.IsPersistent;
        } 
```

**春好汤溶液（稍加改动）**：

```
var isPersistent  = ((System.Web.Security.FormsIdentity) User.Identity).Ticket.IsPersistent; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:07:59.443

您可以使用 [Authorize] 过滤器来检查

```
[Authorize]
public ActionResult Contact()
{
    return View();
} 
```

或者，您可以使用 Request.IsAuthenticated 来检查用户是否选中了 rememberMe 复选框。

# knockout.js - knockoutjs：在视图模型中添加功能

> ID：12991999
> 
> 赞同：1
> 
> 时间：2012-10-20T19:41:20.010
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

以下是我在 viewModel 中添加函数 ClickAction 的方式

```
$.getJSON("api/BrowseCategory/Get", function (data) {
    categoryViewModel = ko.mapping.fromJS(data);
    categoryViewModel.clickAction = function () {
            alert('hi');
        }
    ko.applyBindings(categoryViewModel, $('.categories-gallery .frame').get(0));
}); 
```

但是当我尝试调用此函数时。我收到错误消息“错误：无法解析绑定。消息：ReferenceError：clickAction 未定义；”

这是我调用该函数的方式。

```
<section class="categories-gallery">
                        <div class="holder">
                            <div class="frame">
                                <article class="category-spacer"></article>
                                <!-- ko foreach: $data -->
                                <!-- ko foreach: ProductVariants -->
                                <article class="category" data-bind="click: clickAction,attr: { 'data-uuishlist-product-variant': JSON.stringify(ko.mapping.toJS($data)) }, css: { active: (($parentContext.$index() * $parent.ProductVariants().length) + $index()) == 1 }">
     </article>
                                <!-- /ko -->
                                <!-- /ko -->
                            </div>
                        </div>
</section> 
```

我正在使用 knoutjs 映射插件从 json 对象制作视图模型。那么如何在点击时调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:43:39.310

在`foreach`循环内部，您正在绑定当前数组项的属性。但是，您可以使用特殊变量`$parent`、`$parents`和`$root`来绑定更高级别的对象。

在您的情况下，您应该能够绑定`$root.clickAction`以跳转到根视图模型。

关于特殊上下文变量的进一步参考：http: [//knockoutjs.com/documentation/binding-context.html](http://knockoutjs.com/documentation/binding-context.html)