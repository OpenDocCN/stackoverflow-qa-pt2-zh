# StackOverflow 问答 15546000-15546999

# sql-server - 在 JBoss 上为 XA 连接设置集成安全性

> ID：15546004
> 
> 赞同：2
> 
> 时间：2013-03-21T11:18:02.457
> 
> 标签：sql-server, jboss, jndi, windows-authentication, xa

将 JBoss 上 XA 数据源中的 IntegratedSecurity 设置为 true 时，Microsoft 的 JDBC 驱动程序不会将“true”设置解析为布尔值，但会引发错误：

```
java.lang.NoSuchMethodException:
com.microsoft.sqlserver.jdbc.SQLServerXADataSource.setIntegratedSecurity(java.lang.String) 
```

这只是使用 XA 数据源时的问题，非 XA 数据源在集成安全性的情况下正常工作。

是否有其他方法可以为 JBoss 上的 XA 连接设置集成安全性，或者在设置 xa-datasource-property 时告诉它发送布尔值？

* * *

要重现此行为：

a) 在 JBoss AS configuration\standalone\standalone.xml 中添加一个新的 xa-datasource 到 JNDI：

```
<xa-datasource jta="true" jndi-name="java:jboss/datasources/jndiName" pool-name="poolName" enabled="true" use-java-context="true" use-ccm="true">
    <xa-datasource-property name="ServerName">
        localhost
    </xa-datasource-property>
    <xa-datasource-property name="DatabaseName">
        MyDbName
    </xa-datasource-property>
    <xa-datasource-property name="SelectMethod">
        cursor
    </xa-datasource-property>
    <!-- this should work but doesn't -->
    <xa-datasource-property name="IntegratedSecurity">
        true
    </xa-datasource-property>
    <xa-datasource-class>com.microsoft.sqlserver.jdbc.SQLServerXADataSource</xa-datasource-class>
    <driver>sqljdbc</driver>
    <xa-pool>
        <is-same-rm-override>false</is-same-rm-override>
    </xa-pool>
    <validation>
        <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"/>
    </validation>
</xa-datasource> 
```

b) 重启 JBoss AS

c) 尝试使用配置的 JNDI 连接执行查询：

```
InitialContext ic = new InitialContext();
DataSource ds = (DataSource) ic.lookup("java:jboss/datasources/jndiName");
Connection conn = null;
try {
    conn = ds.getConnection();

    // try to execute something
    CallableStatement stmt = conn.prepareCall("{? = call some_stored_procedure()}");
    stmt.execute();
} finally {
    if (conn != null)
        conn.close();
} 
```

执行此代码将导致异常说明：

```
java.lang.NoSuchMethodException: 
com.microsoft.sqlserver.jdbc.SQLServerXADataSource.setIntegratedSecurity(java.lang.String) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:07:13.187

我也遇到过这个问题，但是如果我使用 URL xa-datasource-property，我就能让它工作。

例子：

```
<xa-datasource-property name="URL">jdbc:sqlserver://<host>:<port>;database=<db>;integratedSecurity=true</xa-datasource-property> 
```

这些片段需要被删除：

```
<xa-datasource-property name="ServerName">
    localhost
</xa-datasource-property>
<xa-datasource-property name="DatabaseName">
    MyDbName
</xa-datasource-property>
<xa-datasource-property name="SelectMethod">
    cursor
</xa-datasource-property>
<!-- this should work but doesn't -->
<xa-datasource-property name="IntegratedSecurity">
    true
</xa-datasource-property> 
```

# macos - 将 linux 命令合并为一个输出

> ID：15546008
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:13.370
> 
> 标签：macos, bash, ubuntu, cat

我将一些文件放入 Markdown 解析器，并希望预先/附加一个头/脚。目前，我用几个命令来做，但想用一个衬里来做。这是我要添加的命令...

```
cat  `find .. -name "*.md" -type f` | marked 
```

这产生了我的文档的中间部分，所以我想做类似...

```
cat head.template (cat `find ... ` | marked) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:21:11.863

尝试像这样对“源”命令进行分组：

```
{ cat header_part ; cat `find ...` ; cat footer_part } | marked 
```

如果您只想解析中间部分：

```
{ cat header_part ; cat `find ...` | marked ; cat footer_part } > output_file 
```

感谢[Ansgar Wiechers](https://stackoverflow.com/users/1630171/ansgar-wiechers)，更喜欢`$()`反引号：

```
{ cat header_part ; cat $(find ...) | marked ; cat footer_part ) > output_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:02:15.053

This works for me, a combination of `$( ... commands ... )` and back ticks.

```
echo `cat head.html.snippet`  `cat $(find .. -name "*.md" -type f) | marked` `cat foot.html.snippet` > all.htm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:29:35.933

如果名称包含空格，这将使用较少的子进程并且有效：

`shopt -s globstar; { cat head.html.snippet; cat ../**/*.md | marked; cat foot.html.snippet; } > all.htm`

您还可以使用进程替换：

`cat head.html.snippet <(find .. -name '*.md' -exec cat {} \+ | marked) foot.html.snippet > all.htm`

# java - 字符串到 imageJ 中的 int

> ID：15546010
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:19.790
> 
> 标签：java, imagej

以下是我的代码的一部分：

```
String xdim = fake.substring(0,index);
IJ.showMessage("xdim "+xdim);
String ydim = fake.substring((index+1));
int xwidth = Integer.parseInt(xdim); 
```

它可以编译，MessageDialog 框会生成语句“xdim 400.0”。然后程序在该行产生错误

```
int xwidth = Integer.parseInt(xdim); 
```

我在这个网站上看到回答的问题说这是使用的方法。看来我的字符串没有被解析为 Int。

有任何想法吗？

我尝试将 String 转换为 double 并从 double 转换为 int 但出现编译错误，指出“无法取消引用 double”

谢谢你的时间

贝特曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:23:07.177

代替

```
int xwidth = Integer.parseInt(xdim); 
```

你应该试试

```
double xwidth = Double.parseDouble(xdim); 
```

或者

```
float xwidth = Float.parseFloat(xdim); 
```

由于您显然有一个小数部分（`.0`），因此在尝试将其解析为 int 时给出 NumberFormatException ...

如果你想使用 xwidth 作为 int，你也应该使用[Math.round](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)。

请注意，如果你`double`作为参数传递，你会得到一个`long`返回，但如果你传递 a `float`，返回将是`int`...

```
int xwidth = Math.round(Float.parsefloat(xdim)); 
```

# android - 读取 XML 标签中的所有子节点

> ID：15546015
> 
> 赞同：1
> 
> 时间：2013-03-21T11:18:25.847
> 
> 标签：android, xml-parsing

我有 XML 文件，例如：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<Fields>
    <Field name="rampam" />
    <Field name="rampampam" />
</Fields>

<NotFields>
    <Field name="testName1" />
    <Field name="testName2" />
</NotFields> 
```

我想读取所有 在“字段”下`Field`的属性值。`name`我试过这段代码：

```
static public void getInputFields(
        XmlResourceParser parseXML) throws XmlPullParserException,
        IOException {
    int eventType = -1;

    while (eventType != XmlResourceParser.END_DOCUMENT) {
        if (eventType == XmlResourceParser.START_TAG) {
            if (parseXML.getName().equals("Fields")) {
                parseXML.next();
                while (parseXML.getName().equals("Field")) {

                    String fieldName = parseXML.getAttributeValue(null,
                            "name");

                    parseXML.next();
                }
            }
        }
        eventType = parseXML.next();
    }
} 
```

它首先读取`Field`，但在它从 中获取空值之后`getAttributeValue()`，我错过了什么？

ps我是解析xmls的新手。

# c# - 如何使用 ASP.net C# 将 SQL 选择存储到 gridview？

> ID：15546017
> 
> 赞同：5
> 
> 时间：2013-03-21T11:18:28.147
> 
> 标签：c#, sql, asp.net, .net, sql-server

```
 SqlCommand cmd = new SqlCommand("SELECT * FROM [order] WHERE date>=@begin AND date<=@end", con);
 cmd.Parameters.AddWithValue("@begin",dt1);
 cmd.Parameters.AddWithValue("@end", dt2); 
```

这是我的选择声明。我想把结果放到数据gridview。如何在asp.net C#中使用数据集存储在gridview中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:21:28.117

使用[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)。

```
SqlCommand cmd = new SqlCommand("SELECT * FROM [order] WHERE date>=@begin AND date<=@end", con);
cmd.Parameters.AddWithValue("@begin",dt1);
cmd.Parameters.AddWithValue("@end", dt2);
SqlDataAdapter sda = new SqlDataAdapater(cmd);
DataTable dt = new DataTable();
sda.Fill(dt);
yourGridView.DataSource = dt;
yourGridView.DataBind(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:21:43.060

您需要一个`SqlDataReader`对象来执行您的命令并将`DataTable`结果加载到 GridView 中：

```
 SqlDataReader dr = cmd.ExecuteReader();
   DataTable dt = new DataTable();
   dt.Load(dr);

   gv.DataSource = dt;
   gv.DataBind(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T11:25:35.027

你可以`SQLDataAdapter`用来做这个..

```
SqlDataAdapter adp=new SqlDataAdapter(cmd);
Datatable dt=new Datatable();
adp.fill(dt);
gridview.Datasource=dt;
gridview.Databind(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T11:21:59.273

像这样

```
 cmd = new OleDbCommand(query, con);

        con.Open();
        DataSet ds = new DataSet();
        OleDbDataAdapter oda = new OleDbDataAdapter(cmd);
        oda.Fill(ds); 
```

这里将数据源分配给gridview

```
 GridView1.DataSource = ds.Tables[0]; 
```

并且不要忘记编写这段代码

```
 GridView1.DataBind();
        con.Close(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T11:23:10.020

你可以使用[`SqlDataAdaper`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)

> 表示用于填充 DataSet 和更新 SQL Server 数据库的一组数据命令和一个数据库连接。

和[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)

> 表示一个内存数据表。

用[`Gridview.DataBind()`](http://msdn.microsoft.com/en-us/library/fkx0cy6d%28v=vs.90%29.aspx)方法

> 将数据源绑定到 GridView 控件。

作为

```
SqlDataAdapter da = new SqlDataAdapater(cmd, conn);
DataTable dt = new DataTable();
da.Fill(dt);
Gridview1.DataSource = dt;
Gridview1.DataBind(); 
```

# android - Android 应用内计费版本 2 多重还原

> ID：15546018
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:31.587
> 
> 标签：android, in-app-billing, restore

我正在 android 中实现应用内计费版本 2，我想恢复多个产品，但我不确定如何获取已购买的所有产品的列表， **供您参考，我使用托管类型并且不能使用版本 3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:10.917

我建议您先使用示例应用程序对其进行测试。这是您可以测试它的方法。正确查看以下示例应用程序后，这将解决您的恢复问题

**步骤 1.**安装示例应用程序 - [TrivialDrive](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)

**第 2 步。**现在使用静态响应进行测试：Mainactivity 上有 4 个按钮，将按钮项目代码替换为这些保留的产品 ID。

*   android.test.purchased
*   android.test.取消
*   android.test.refunded
*   android.test.item_unavailable

要使用这些保留的产品 ID，您不必在开发人员控制台应用程序中添加项目这是用于测试您的应用程序的[链接](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-static)

使用上述方法进行测试后，您就可以使用自己的产品进行测试了，这是 [使用您自己的产品 ID 测试应用内购买的详细教程链接](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)

还可以尝试示例应用程序 - [DungeonsRedux](https://github.com/robotmedia/AndroidBillingLibrary/tree/master/DungeonsRedux)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:28:06.883

你必须调用这个方法

```
BillingService mBillingService = new BillingService();
mBillingService.setContext(this);
mBillingService.restoreTransactions(); 
```

而且这个方法会一一调用很多不同的方法，**在文件 ResponseHandler.java 中有一个方法叫做 purchaseResponse()**

```
public static void purchaseResponse(final Context context,
            final PurchaseState purchaseState, final String productId,
            final String orderId, final long purchaseTime,
            final String developerPayload, final String purchaseToken) { 
```

在此方法中，您将获得所有产品详细信息。

# php - 如何在php中使用html2pdf手动更改pdf的高度和宽度

> ID：15546019
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:34.270
> 
> 标签：php, pdf, height, width, html2pdf

我正在使用 html2pdf 将 html 转换为 pdf ......实际上我有一个大尺寸的 html 容器，如 12x12in（英寸）。我第一次使用 A4 尺寸，然后我的 html 内容没有完全显示，直到按照尺寸（12x12 英寸）然后我查看了您的网站，我在这里找到了所有纸张尺寸.. 感谢您提供的重要信息...但是现在，当我使用 A3 尺寸时，我发现 pdf 文件中的所有 html 内容....但是 pdf 中我的内容底部有很多空间...所以我想知道...是否有任何方法可以从 pdf 中减少此空间，或者以任何其他方式将 html 转换为具有手动定义的页面高度和宽度的 pdf...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:42:27.643

*HTML2PDF*类的构造函数说，该参数与*tcpdf*`$format`类中的参数相同。*tcpdf*类的构造函数说明了参数：**`$format`**

 **> **@param mixed`$format`**用于页面的格式。它可以是以下值之一（不区分大小写），也可以是包含宽度和高度的二元素数组形式的自定义格式（以 unit 给出的单位表示）...

稍加计算，就可以将页面大小设置为 12'' x 12''。默认单位是毫米。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-22T22:01:49.860

这是此问题的解决方案：

$html2pdf = new HTML2PDF('P', array($w​​idth_in_mm,$height_in_mm), 'en', true, 'UTF-8', array(0, 0, 0, 0));

宽度和高度应以 MM 为单位。如果您使用英寸将其转换为 MM。

公式：$width_in_mm = $width_in_inches * 25.4；$height_in_mm = $height_in_inches * 25.4;

不要四舍五入。使用精确的转换，即使它有小数点。

希望这个答案能解决你的问题。**

# php - mysqldump没有将输出文件保存在不同的目录中

> ID：15546021
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:41.257
> 
> 标签：php, mysqldump

mysqldump 在我们的服务器上运行良好；我们正在通过系统命令执行它。例如 -

> exec('mysqldump -h 主机名 -u 用户名 -ppassword database_name > dump.sql');

但是当我想让转储文件保存在不同的目录中时，比如——

> exec('mysqldump -h 主机名 -u 用户名 -ppassword database_name > /backup/dump.sql');

我也尝试过使用完整路径，但命令无法执行。我应该如何解决这个问题？

编辑：这是一个权限问题，我通过将权限更改为 700 解决了它。感谢@DBK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:40:33.390

尝试创建转储的手动路径-使用以下命令转到`cd/var/lib/mysql`

搜索您想要转储的数据库。

`ls -l | grep database_name`

`mysqldump database_name > database.sql`

//如果要恢复备份

`cd /var/lib/mysql`

检查要在其中恢复 mysqldump 的数据库名称 `ls -l | grep database_name`

`mysql database_name < database.sql`

# vba - 如何使用 VBA 设置项目优先级

> ID：15546024
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:47.300
> 
> 标签：vba, ms-project

我正在为 Project 2010 编写一个宏（在 VBA 中），我想要完成的一件事是设置项目优先级。

我环顾了 MSDN，但似乎找不到任何关于此的信息 - 没有允许我这样做的属性、方法或对象。我是否忽略了某些东西，或者真的没有办法编辑项目优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:42:48.963

Project priority 字段由于某种原因没有显示在对象浏览器或 Intellisense 中，但是如果您在调试时查看 Project 对象，您会看到它，您可以使用以下代码进行设置：

```
Dim proj As Project
Set proj = Application.ActiveProject
proj.Priority = 100 
```

在 Project 2010 64 位中测试，更新后的优先级出现在 UI 中的 Project -> Project Information -> Priority 字段中。

# erlang - Erlang 将双引号附加到字符串

> ID：15546025
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:18:49.200
> 
> 标签：erlang

在用字符串附加双引号时，我遇到了 erlang 附加 /" not " 的问题？

```
Id = "1223",
    Flag = "1", 

lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag])). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:21:41.537

您的问题不是很清楚，但我尝试了您作为示例提供的代码，我猜您很生气，因为结果字符串显示为**\"**序列而不是单个字符**"**。

```
1> Id = "1223".
"1223"
2> Flag = "1".
"1"
3> lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag])).
"{xmlelement, \"deliverystatus\", [{\"messageid\", \"1223\"}, {\"status\", \"1\"}], []}" 
```

事实上，您必须记住，您在控制台中获得的是上次评估结果的图像。在您的情况下，它是一个列表，仅包含可打印字符，因此 shell 选择将其显示为字符串。但它尽量不隐藏任何信息，所以你有周围的 " 字符告诉你它是一个字符串，并且在任何特殊字符之前的 \ 告诉你，在这种情况下，以下 " 是字符串的一部分而不是此字符串的分隔符。但内部只存储字符“。您可以通过检查字符串的长度来验证它：

```
5> length(lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag]))).   
76
6> 
```

或者为了更简单的测试:o)

```
6> length("test\"").
5
7> lists:flatten("test\"").
"test\""
8> 
```

如果要显示没有这些 \ 的字符串，请使用 io:format 函数在控制台中显示字符串：

```
4> io:format(lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag]))).
{xmlelement, "deliverystatus", [{"messageid", "1223"}, {"status", "1"}], []}ok 
```

最后为了获得更好的结果，为了将字符串与 io:format 的返回值 ok 分开，并显示在控制台中，让我们添加一个回车：

```
8> io:format(lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag])) ++ "~n").
{xmlelement, "deliverystatus", [{"messageid", "1223"}, {"status", "1"}], []}
ok
9> 
```

编辑： io:format 的返回值总是可以的，它只是在控制台上打印并返回 ok。我说的是，使用 io:format 或 length 您可以验证由

```
lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag])), 
```

不包含任何“\”。如果您想记录此值以供以后使用或操作它，只需将其分配给一个变量：

```
My_string = lists:flatten(io_lib:format("{xmlelement, \"deliverystatus\", [{\"messageid\", \"~s\"}, {\"status\", \"~s\"}], []}", [Id, Flag])), 
```

# inno-setup - Inno 安装程序 - 卸载

> ID：15546028
> 
> 赞同：0
> 
> 时间：2013-03-21T11:18:58.160
> 
> 标签：inno-setup

有谁知道如何在卸载完成后向 URL 发送 HTTP 帖子？我想在我的数据库中跟踪卸载总数。

# c# - WPF 功能区组合框

> ID：15546030
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:19:01.910
> 
> 标签：c#, wpf, vb.net

我正在使用一个小的 RibbonComboBox 并且我正在努力哪个事件指示所选项目的更改。

例如，我有一个包含元素 A、BC 的列表，用户单击“B”，然后单击“C”-触发哪个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:50:00.067

如果你这样做

```
<ribbon:RibbonComboBox>
    <ribbon:RibbonGallery SelectedItem="{Binding Path=PropertyToBindTo}">
        <ribbon:RibbonGalleryCategory ItemsSource="{Binding Source={StaticResource    CollectionOfPossibleChoices}}" />
    </ribbon:RibbonGallery>
</ribbon:RibbonComboBox> 
```

然后，功能区库有一个可以附加到的 selectionchange 事件。

# c# - .net c# 混淆堆栈跟踪显示为原点

> ID：15546033
> 
> 赞同：1
> 
> 时间：2013-03-21T11:19:03.250
> 
> 标签：c#, .net, obfuscation

我需要混淆 4 个程序集。我尝试了几个程序。混淆至少根据程序的日志消息起作用。但为了确保它有效，在我的程序内部，我人为地抛出了异常并将堆栈跟踪记录到日志文件中。

但即使在对堆栈跟踪进行混淆之后，也会显示类和方法的原始名称，我确信该类包含在混淆中。

用重命名的名称混淆写入后不应该是堆栈跟踪吗？如果是这样，问题可能出在哪里？

# unit-testing - UnitilsException：找不到文件

> ID：15546043
> 
> 赞同：1
> 
> 时间：2013-03-21T11:19:36.223
> 
> 标签：unit-testing, testing, unitils

什么可能导致此错误

```
 org.unitils.core.UnitilsException: Error inserting test data from DbUnit dataset for method public void fi.utu.nettiopsu.selenium.student.function.ExamRegistrationTest.examRegistrationTest()
at org.unitils.dbunit.DbUnitModule.insertDataSet(DbUnitModule.java:156)
at org.unitils.dbunit.DbUnitModule$DbUnitListener.beforeTestSetUp(DbUnitModule.java:557)
at org.unitils.core.Unitils$UnitilsTestListener.beforeTestSetUp(Unitils.java:273)
at org.unitils.UnitilsJUnit4TestClassRunner$TestListenerInvokingMethodRoadie.runBeforesThenTestThenAfters(UnitilsJUnit4TestClassRunner.java:151)
at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
at org.unitils.UnitilsJUnit4TestClassRunner.invokeTestMethod(UnitilsJUnit4TestClassRunner.java:95)
at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
at org.unitils.UnitilsJUnit4TestClassRunner.access$000(UnitilsJUnit4TestClassRunner.java:44)
at org.unitils.UnitilsJUnit4TestClassRunner$1.run(UnitilsJUnit4TestClassRunner.java:62)
at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
at org.unitils.UnitilsJUnit4TestClassRunner.run(UnitilsJUnit4TestClassRunner.java:68)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
    Caused by: org.unitils.core.UnitilsException: File with name com/company/app/selenium/role/function/RegTest.xml cannot be found.
at org.unitils.core.util.FileResolver.resolveFileName(FileResolver.java:118)
at  org.unitils.dbunit.datasetfactory.impl.DefaultDataSetResolver.resolve(DefaultDataSetResolver.java:88)
at org.unitils.dbunit.DbUnitModule.getDataSet(DbUnitModule.java:368)
at org.unitils.dbunit.DbUnitModule.getDataSet(DbUnitModule.java:320)
at org.unitils.dbunit.DbUnitModule.insertDataSet(DbUnitModule.java:147) 
```

我在与我的测试类相同的包中有“丢失”的 xml 文件。

测试类是

```
 @DataSet({"RegTest.xml"})
      public class RegTest extends TestBase { 
```

即使我没有在注释上定义文件名，我也会得到同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:08:06.063

将 RegTest.xml 文件重新定位到测试/资源。您还需要在文件中使用 unitils.properties 属性：dbUnit.datasetresolver.prefixWithPackageName=false - 此属性表示 unitils 不要在文件之前使用搜索包名称。在所有这些更改之后，unitils 将开始在文件夹 test/resources 中查找 RegTest.xml。

我希望它会有所帮助。

# java - Spring - 在加载测试或主要配置之间切换

> ID：15546044
> 
> 赞同：2
> 
> 时间：2013-03-21T11:19:36.217
> 
> 标签：java, spring

我正在尝试交换应用程序上下文文件，以便我可以在我的 IDE 中使用真实文件进行测试，或者在我的 IDE 中使用带有测试文件的 JUnit 进行测试。

一个简单的例子是：

mainConfig.xml

```
<context:component-scan base-package="myPackage" />
<bean id="myBean" class="my.class"/> 
```

测试配置.xml

```
<context:component-scan base-package="myPackage" />
<bean id="myBean" class="my.test.class"/> 
```

我处理应用程序上下文的java代码类似于下面（但实际上是一个单例）

```
public final class MyLoader {

    private ApplicationContext context;

    public MyLoader(){
        context = new ClassPathXmlApplicationContext(
            "classpath:/hardcoded/path/to/mainConfig.xml");
    }

    public <T> T getComponent(final Class<T> type) {
        return (T) context.getBean(type);
    }
} 
```

由于应用程序有许多不同的入口点，因此从代码中的多个点调用 MyLoader。

我的 JUnit 测试代码

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:/hardcoded/path/to/testConfig.xml")
public final class Foo{} 
```

当我运行 JUnit 测试时，它会加载 testConfig.xml（由于 JUnit 文件中的 @ContextConfiguration），但它也会加载 mainConfig.xml（由于 ClassPathXmlApplication）。这将导致冲突，因为这两个文件不同。

在不会发生这种不匹配的情况下，将所有这些连接起来的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:51:35.223

考虑到您加载 spring 上下文和访问 bean 的方式，您似乎有一个特定的场景。

## 针对您的特定问题的解决方案：

*   **类路径优先级**。将`main.xml`和`test.xml`文件放在不同的目录中，但使用相同的名称（例如`main/config.xml`和`test/config.xml`）。然后配置您的 IDE，以便在运行时`jUnit`测试目录优先于类路径中的主目录。

    这实际上是您默认使用`maven`. 在这种情况下，您可能不得不通过使用您的 IDE 自己做饭。

*   **环境**变量。另一种选择，一个环境变量来配置 的位置`config.xml`，然后在 中使用该值`MyLoader`，可能默认为`main.xml`以避免在正常执行中进行额外配置。

    ```
    public MyLoader(){
      context = new ClassPathXmlApplicationContext(
          System.getProperty("config.location", "classpath:path/to/mainConfig.xml")); 
    ```

    然后，您可以配置您的 IDE 以在运行 jUnit 时设置该环境变量，或者从相应地设置变量的基类扩展您的测试：

    ```
    System.setProperty("config.location", "classpath:/path/to/testConfig.xml") 
    ```

    您在这里并不真正需要 SpringJUnit4ClassRunner，因为通过使用 MyLoader 您无论如何都会延迟加载上下文。

这些都不是很好的解决方案。

## 一个更好的解决方案，以牺牲一些重构为代价：

**删除`MyLoader`**，不要使用单例来保留 spring 上下文和/或检索 bean。

在您的应用程序的入口点初始化`ClassPathXmlApplicationContext`，然后在获得第一个 bean/s 之后，您不再需要`ApplicationContext`了。

对组件之间的依赖关系使用适当的**自动装配/注入**。而不是从`MyLoader`.

假设它是一个非 Web 应用程序，因为 Web 应用程序用于`ContextLoaderListener`加载配置 xml。

遵循这种方法后，您应该不会在加载不同的 config.xml 时遇到任何问题，`SpringJUnit4ClassRunner`因为在运行测试时您没有从入口点运行应用程序。

而且您不会在`MyLoader`每次需要弹簧组件时都尝试延迟加载主上下文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:10:03.480

你真的应该考虑使用 Maven 和 JavaConfig。使用 XML 文件是 2000 年的风格，你需要更新你的风格以适应时代。看看 JavaConfig 和 Maven，这很容易做到。

# php - 如何仅使用一个脚本将 while 循环分成页面？

> ID：15546047
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:19:39.527
> 
> 标签：php, mysql

我目前正在设计一个调查类型的系统，其中系统使用 while 循环显示要投票的人数。不幸的是，我不知道如何创建页面，相反，我只能将整个 while 循环迭代到一个整页脚本中。

这是我的代码：

```
while($fetch=mysql_fetch_array($query1)){

    //Code here

        while($fetch=mysql_fetch_array($query2)){

            //VERIFY ANSWERS
            if(isset($_POST['voted'])){
                if(in_array($_POST['score('.$fetch['questionID'].')'], $radioValue)){
                }
                else{
                    $missed++;
                }

                $checker = true;
            }
        }

            //CHECKER IF A RADIO BUTTON IS MISSED 
            if($checker==true){
                if($missed==$rows || $missed < $rows && $missed != 0 ){
                    echo "<center><font color=red>All items are required</font><br>";
                }
                else{
                    //Some code here
                }
            }

        $query=mysql_query("SELECT * FROM questions");
        while($fetch=mysql_fetch_array($query)){
            //DISPLAYS QUESTIONS WITH QUESTION NUMBER
                            //Some code here

            //DISPLAYS RADIO BUTTONS FROM 1 to 5    
                            //Some code here
            }
        }

    echo "</table>
    <br><center>
    <input type='submit' name='voted' value='Submit'>
} 
```

所以基本上，我的代码只是一个while循环中的一个while循环

编辑：为了清楚起见，我在问如何仅使用一个脚本将 while 循环迭代分成“页面”。

所以基本上，我想要发生的是：

被提名人 1 展示问题（1 到 9）

下一步按钮

被提名人 2 再次显示问题（1 到 9）

此外，它只会根据 fetch_array 命令收集的项目数重新迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:28:08.100

您应该`LIMIT`在 SQL 查询中使用，并仅获取该页面问题列表。
类似于：`SELECT * FROM questions LIMIT 0, 10`将获取前 10 个问题。

我建议阅读 MySQL 文档：[http](http://dev.mysql.com/doc/refman/5.0/en/select.html) ://dev.mysql.com/doc/refman/5.0/en/select.html并且**不要**使用*mysql_* * php 函数，它们已被弃用，使用`PDO`或`mysqli_*`函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:51:13.077

所以基本上你想要： -

```
Page 1\.  
 PROCESS POST FROM PREVIOUS PAGE (ie none until page 2)  
 Get nominees that need questions answered LIMIT 1\.  
 IF NO RESULTS:
    SAY "thank you - all finished"  
 OTHERWISE:
    display nominee details  
    loop through questions 1-9  
    post form to this script -> this will be page 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:33:57.930

如果我有你的问题，那么我认为你可以这样做：

```
<?php
   while(...) {
 #your while loop code
?>
your HTML code for showing data 
<?php
 } # terminate while loop 
?> 
```

PHP 代码将位于 PHP 标记之下，而 HTML 将位于 PHP 标记之外。

# android - android MediaStore.Audio.Media.RECORD_SOUND_ACTION：没有找到处理意图的活动

> ID：15546051
> 
> 赞同：4
> 
> 时间：2013-03-21T11:19:45.380
> 
> 标签：android, android-intent, event-handling, record, audio

我尝试录制声音。我使用 Intent 来录制声音。但在一台设备上 MediaStore.Audio.Media.RECORD_SOUND_ACTION 返回错误：

这是我的代码：

```
Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
startActivityForResult(intent, RQS_RECORDING); 
```

这是我的错误：

`No activity found to handle Intent { act=android.provider.MediaStore.RECORD_SOUND (has extras) }`

可能是什么原因？这是否意味着某些设备上无法访问该功能？如何检查设备上是否存在 RECORD_SOUND_ACTION？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:24:55.497

也许该设备没有任何允许您录制音频的应用程序。首先检查它是否有默认录音机。

根据另一篇帖子（[Samsung Charge RECORD_SOUND_ACTION Intent not return when started for result](https://stackoverflow.com/questions/10306617/samsung-charge-record-sound-action-intent-not-returning-when-started-for-result)），它也可能发生在其他设备上，并且可能是一个错误。

即使您的设备具有默认录音机，如果该应用程序不包含**RECORD_SOUND_ACTION**意图的接收器，也没有在其清单中声明将处理指定意图的任何活动，这也可能是可能的。

您可以通过实现自己的录音机来处理此意图，并以这种方式在清单中声明它（以防万一）：

```
<activity
    android:name="com.test.AudioRecorder"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.provider.MediaStore.RECORD_SOUND" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

编辑：添加一个关于如何验证活动是否可以接收您的意图的示例

来自[Android 文档](https://developer.android.com/guide/components/intents-filters#ExampleSend)

```
if (sendIntent.resolveActivity(packageManager) != null) {
    startActivity(sendIntent)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-23T07:28:03.040

从文件中尝试此代码，这可能会帮助您解决

```
try 
{
     Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW);
     File file = new File(image.getAbsolutePath());
     String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(file).toString());
     String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);

     myIntent.setDataAndType(Uri.fromFile(file), mimetype);
     mContext.startActivity(myIntent);
} 
catch (Exception e) 
{
     // TODO: handle exception
     String data = e.getMessage();
} 
```

# facebook - Facebook API 使用 Javascript 将照片上传到当前登录用户的相册

> ID：15546054
> 
> 赞同：1
> 
> 时间：2013-03-21T11:19:51.317
> 
> 标签：facebook

我们如何将照片上传到当前登录用户的相册。我的意思是用户有权访问该应用程序以上传照片和流媒体。

所有的东西都必须使用 javascript 来完成。任何类型的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:15:39.053

我希望这会有用。通过仅在 javascript 的帮助下将照片上传到 FB，您可以使用以下方法。这里需要的东西是imageData（这是base64格式的图像）和mime类型。

```
try{
        blob = dataURItoBlob(imageData,mimeType);
}catch(e){console.log(e);}
var fd = new FormData();
fd.append("access_token",accessToken);
fd.append("source", blob);fd.append("message","Kiss");
try{
   $.ajax({
        url:"https://graph.facebook.com/" + <<userID received on getting user details>> + "/photos?access_token=" + <<user accessToken>>,
        type:"POST"
        data:fd,
        processData:false,
        contentType:false,
        cache:false,
        success:function(data){
            console.log("success " + data);
        },
        error:function(shr,status,data){
            console.log("error " + data + " Status " + shr.status);
        },
        complete:function(){
            console.log("Ajax Complete");
        }
    });

}catch(e){console.log(e);}

function dataURItoBlob(dataURI,mime) {
    // convert base64 to raw binary data held in a string
    // doesn't handle URLEncoded DataURIs

    var byteString = window.atob(dataURI);

    // separate out the mime component

    // write the bytes of the string to an ArrayBuffer
    //var ab = new ArrayBuffer(byteString.length);
    var ia = new Uint8Array(byteString.length);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }

    // write the ArrayBuffer to a blob, and you're done
    var blob = new Blob([ia], { type: mime });

    return blob;
} 
```

# jquery - Kendo 网格 detailInit 访问父网格

> ID：15546056
> 
> 赞同：1
> 
> 时间：2013-03-21T11:20:00.130
> 
> 标签：jquery, user-interface, grid, kendo-ui, hierarchy

我有主网格，其中包含包含另一个子网格的子网格。我在第三个孩子中有自定义命令，当我点击时，我想从主网格中提取一些单元格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:23:23.627

那么这里来了jQuery的力量。您需要进行一些遍历才能找到 masterRow，从而获得 masterGrid 的[dataItem](http://docs.kendoui.com/api/web/grid#methods-dataItem)。

像这样（我命名每个元素以使其更清晰）：

```
var thirdLevelGrid = $(yourCommandButtonHtmlElement).closest('.k-grid');
var secondLevelGrid = thirdLevelGrid.parents('.k-grid');
var topDetailRow = secondLevelGrid.closest('tr');
var topMasterRow = topDetailRow.prev();
var masterGrid = $('#nameOfTHeMasterGrid').data().kendoGrid;
var andFinallyTheModelWeWereWaitingFor = masterGrid.dataItem(topMasterRow); 
```

当然，您可以将其链接起来以使其看起来更花哨或以某种方式进行优化。

我希望这可以帮助您了解这个想法。

# iphone - 将变量传递给使用 presentViewController 加载的视图控制器

> ID：15546058
> 
> 赞同：2
> 
> 时间：2013-03-21T11:20:03.917
> 
> 标签：iphone, ios, objective-c, ios5

我在接收 geoPoint 对象的块中有这段代码：

```
UIViewController *mapViewController1 =
                [[BSTGMapViewController alloc] initWithNibName:@"BSTGMapViewController_iPhone"
                                                           bundle:nil];
PFGeoPoint *currentLocation = geoPoint;
[self presentViewController:mapViewController1 animated:1 completion:nil]; 
```

如何将 geoPoint 变量传递给 mapViewController1，以便在

viewDidLoad 函数？我使用 XCode 4.6 定位 iOS 5。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:29:49.680

在 BSTGMapViewController 内重载 initWithNibName 以传递参数

在 BSTGMapViewController 里面。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withGeoPoint:(CLLocation*)userLocation; 
```

并在 BSTGMapViewController.m 中实现

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withGeoPoint:(CLLocation*)userLocation
{
//usual code of init with nib name
locationhere=userlocation;

} 
```

//你的代码

```
PFGeoPoint *currentLocation = geoPoint;
BSTGMapViewController *mapViewController1 =
                [[BSTGMapViewController alloc] initWithNibName:@"BSTGMapViewController_iPhone"
                                                           bundle:nil withGeoPoint:currentLocation];

[self presentViewController:mapViewController1 animated:1 completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:28:44.287

您可以像下面的代码一样覆盖 init 方法并将值发送到新的视图控制器

新视图界面中的声明

```
- (id)initWithTeamCount:(int)teamCount 
```

新视图界面中的定义

```
- (id)initWithTeamCount:(int)teamCount {
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        // Custom initialization
        self.teamCountLabel.text = [NSString stringWithFormat:@"%d",teamCount];
    }
    return self;
} 
```

从第一个视图传递值

```
SetTeamsViewController *vc = [[SetTeamsViewController alloc] initWithTeamCount:self.teamCount]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:25:02.857

在将要呈现的 viewController 中定义一个属性。属性的类型将是您要传递的类型。

定义属性后，您可以使用您在将要呈现它的类中创建的对象来访问它。

```
BSTGMapViewController *mapViewController1 =
                [[BSTGMapViewController alloc] initWithNibName:@"BSTGMapViewController_iPhone"
                                                           bundle:nil];
mapViewController1.propertyName = valueToBePassed;

[self presentViewController:mapViewController1 animated:1 completion:nil]; 
```

就是这样。您可以在 viewDidLoad 中访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:27:32.613

为 BSTGMapViewController 编写自定义初始化程序，如下所示

```
-(id)initWithGeoPoint:(PFGeoPoint *)point
{
   self = [super initWithNibName:@"BSTGMapViewController_iPhone"
                                                           bundle:nil];
   if(self)
   {
       //here geopoint is class member
       geopoint = point;
   }
} 
```

并使用

```
PFGeoPoint *currentLocation = geoPoint;
UIViewController *mapViewController1 =
                [[BSTGMapViewController alloc] initWithGeoPoint:currentLocation]; 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:28:47.800

将您的初始化方法更改`-(id)initWithNubName:(NSString*)nibName bundle:(NSBundle*)nibBundle;`为：`-(id)initWithNubName:(NSString*)nibName bundle:(NSBundle*)nibBundle location:(PFGeoPoint*)geoLocation;`

定义in`currentLocation`类型的属性。在初始化方法中，将属性设置为参数中的值。`PFGeoPoint*``BSTGMapViewController`

在`viewDidLoad`使用`PFGeoPoint*`对象的属性值。

# makefile - 试图覆盖 `/var/backups/infodir.bak'，它也在包 x 中

> ID：15546064
> 
> 赞同：2
> 
> 时间：2013-03-21T11:20:15.057
> 
> 标签：makefile, debian, configure, checkinstall

在编译软件时，我总是用`. ./configure`&& `make`&&`checkinstall -D make install`来构建软件。

现在我在使用 checkinstall 时遇到了这个问题，我得到了错误

> “试图覆盖 `/var/backups/infodir.bak'，它也在包 libtasn1-3.2 中”。

我还使用&& &&创建了**libtasn1-3.2**。`./configure``make``checkinstall -D make install`

我试图删除文件**/var/backups/infodir.bak**，但我仍然得到错误。有谁知道我该如何解决这个问题？

```
Building Debian package...OK 
Installing Debian package... FAILED! 
Failed to install the package

Do you want to see the log file?  [y]: y (Reading database ... dpkg:
serious warning: files list file for package `squeezecenter-readynas'
missing, assuming package has no files currently installed. 30739
files and directories currently installed.) Unpacking libgcrypt-1.5.1
(from .../libgcrypt-1.5.1_1.5.1-1_sparc.deb) ... dpkg: error
processing
/c/backup/zarafa/libgcrypt-1.5.1/libgcrypt-1.5.1_1.5.1-1_sparc.deb
(--install):  trying to overwrite `/var/backups/infodir.bak', which is
also in package libtasn1-3.2 dpkg-deb: subprocess paste killed by
signal (Broken pipe) Errors were encountered while processing: 
/c/backup/zarafa/libgcrypt-1.5.1/libgcrypt-1.5.1_1.5.1-1_sparc.deb 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:13:42.283

在 debian 中，*禁止*两个软件包安装同一个文件。

因此，每当您尝试安装一个包含文件“/path/to/foo”的包并且已经安装了另一个包含文件“/path/to/foo”的包时，您会遇到冲突并因此出现错误。

维护者的部分工作是确保此类事情不会发生，

*   通过设置两个包之间的显式冲突（因此您甚至不能同时标记两个包以进行安装）

*   或通过重命名一个包（或两者）中的文件并相应地调整软件

*   或通过阻止一个（或两个）软件包安装此类文件（例如，在确实不需要安装的文件的情况下）

维护 debian 软件包通常需要大量工作。

现在该工具`checkinstall`是一个“穷人”的包维护工具，因为它使得从“make install”创建包变得非常容易。由于它是一种自动化工具，它根本无法取代维护者的工作和复杂性。（否则我们将不再需要任何 debian 维护人员；只需将源包上传到某个构建服务器并在它们上运行“checkinstall”）

所以你遇到问题的原因是因为你正在安装维护不善（或者更确切地说：自动创建，因此根本没有维护）包。删除有问题的文件不起作用的原因是包管理不仅仅是下载档案并提取它们。除其他事项外，它维护数据库中已安装文件的列表，该列表表明您已经`/var/backups/infodir.bak`安装（无论该文件是否实际在硬盘上）......导致您看到的冲突。

所以解决您的问题的方法是，在维护上投入更多时间。

无论如何，您应该调查为什么这两个“包”都需要`/var/backups/infodir.bak`（以及它们是否需要它）。

`checkinstall`您可以从via中省略某些文件

```
 checkinstall --exclude /var/backups/infodir.bak -D make install 
```

whether this will break any of your packages, i cannot say.

# c# - MVC3中如何拦截外部超链接

> ID：15546065
> 
> 赞同：0
> 
> 时间：2013-03-21T11:20:17.823
> 
> 标签：c#, asp.net-mvc-3, hyperlink, external

我有这样的情况，两个网站使用相同的数据（主版本和移动版本）。因此，在主版本的某些页面中，我有像 www.domain.com/link1 这样的内部链接......但是当移动版本使用相同的超链接时，它将用户上下文引导到主站点，但我需要拦截该请求并处理它在移动版本的情况下将用户重定向到我需要的地方。

假设在 www.domain.com/about/strategy.aspx （webforms）页面的主要版本网站中，我有一个指向 www.domain.com/services/item.aspx?Id=1256 的绝对网址，没关系。但是当我在 mobile.domain.com/about/strategy (mvc) 上获得相同页面时，我想将链接 www.domain.com/services/item.aspx?Id=1256 更改为 mobile.domain.com/services/1256 . 问题是我有超过 10000 个带有绝对 URL 的页面，内容管理器会发疯地管理这个问题。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:27:11.397

如果您正在寻找 Web 表单中用户友好的 URL，那么答案可能是 URL 重写。

您可以为此功能找到一些第三方/开源 dll。

如果我对您的要求有误，请告诉我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:16:25.073

我已经使用 SQL 替换方法手动替换了数据库中的绝对 URL，例如 www.domain.com/services/service.aspx?Id=1000 变为 /services/service.aspx?Id=1000 。然后使用 Dictionary 实现 RewritingModule。

```
public class RewritingModule : IHttpModule
    {
        /// <summary>
        /// Инициализация
        /// </summary>
        /// <param name="application"></param>
        public void Init(HttpApplication application)
        {
            application.BeginRequest += ApplicationBeginRequest;
        }

        private static void ApplicationBeginRequest(object sender, EventArgs e)
        {
            var _httpContext = HttpContext.Current;

            foreach (KeyValuePair<string, string> item in DictionaryRewrites)
            {
                var currentUrl = _httpContext.Request.RawUrl;
                string itemKey = item.Key;

                if (currentUrl.Equals(itemKey, StringComparison.OrdinalIgnoreCase))
                {
                    Process301Redirect(_httpContext, item.Value);
                    break;
                }
            }

        }

        private static Dictionary<string, string> DictionaryRewrites = new Dictionary<string, string>() 
        { 
            { "/Services/Pavilions/Item.aspx?ItemID=5", "/exhibitions/pavillions/3/hall4" },
            { "/Services/ConferenceHalls/Item.aspx?ItemID=10127", "/conferences/conferencehalls/1/conferencehall1" }

        };

        /// <summary>
        /// 301 Redirect
        /// </summary>
        /// <param name="context"></param>
        /// <param name="toRedirect"></param>
        private static void Process301Redirect(HttpContext context, string toRedirect)
        {
            var _localizationSettings = EngineContext.Current.Resolve<LocalizationSettings>();
            var _workContext = EngineContext.Current.Resolve<IWorkContext>();
            var _httpContext = HttpContext.Current;
            var _webHelper = EngineContext.Current.Resolve<IWebHelper>();
            string applicationPath = _httpContext.Request.ApplicationPath;

            if (_localizationSettings.SeoFriendlyUrlsForLanguagesEnabled)
            {
                toRedirect = toRedirect.AddLanguageSeoCodeToRawUrl(applicationPath, _workContext.WorkingLanguage);
            }

            string str = _webHelper.GetApplicationLocation() + toRedirect;
            context.Response.AddHeader("Location", str);
            context.Response.Status = "301 Moved Permanently";
        }

        public void Dispose()
        {
            //clean-up code here.
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:30:41.813

我可以考虑 2 种可能的解决方案，它们都需要 javasctipt：

1.  您有 js 功能，它将覆盖您页面上的网址
2.  您有 js 处理程序，它将捕获点击并将用户转发到您的服务器操作，您将在其中将他重定向到您想要的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:28:11.547

你可以看看这篇文章：

[http://www.iis.net/learn/extensions/url-rewrite-module/developing-a-custom-rewrite-provider-for-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/developing-a-custom-rewrite-provider-for-url-rewrite-module)

# iphone - 我的 Mac 是 10.7.5 和 Xcode 4.6.1 但我无法使用 xcode 安装 cordova 2.5.0

> ID：15546067
> 
> 赞同：0
> 
> 时间：2013-03-21T11:20:20.297
> 
> 标签：iphone, ios, cordova, xcode4.5, phonegap-plugins

我的 Mac 是 10.7.5，我的 Xcode 是 4.6.1。以前我的系统中安装了cordova 2.2.0。

但是当我将我的 Xcode 从较低版本升级到 4.6.1 并下载最新的科尔多瓦时，我

无法集成ios和cordova。terminal.app 说“没有这样的文件或目录”。

注意：我已经解压了phonegap包并将ios bin文件夹拖放到

终端。当我拖动 bin terminal.app 时说：是一个目录。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:42.913

我打开了一个**终端**窗口，在`bin`文件夹内导航并`./create`使用请求的参数执行命令。

我什至没有试图让它拖动它。

告诉我们它是否以这种方式工作。

****更新****

> 确定您将在系统上的哪个位置找到应用程序的 Xcode 项目文件。对于本教程，我在 Documents 文件夹下创建了一个 CordovaXY 目录：~/Documents/CordovaXY 其中 X 和 Y 指的是 Cordova 版本

我创建了文件夹`cordova25`，然后...

```
cd ~/Downloads/phonegap-2.5.0/lib/ios/bin
./create ~/Documents/cordova25/myappname com.mydomain.myappname myappname 
```

`myappname`这将在`cordova25`文件夹中创建您的项目。只需执行`.xcodeproj`，**XCode**就会启动并挂载它。

在这里，您可以获得有关创建此类项目的常见已知问题的更多信息。这并不意味着它会发生在你身上，但以防万一，你有它。

> [http://docs.phonegap.com/en/2.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# android - 在 Eclipse 的窗口中清理 android 项目显示错误。

> ID：15546071
> 
> 赞同：0
> 
> 时间：2013-03-21T11:20:29.573
> 
> 标签：android, eclipse

当第一次eclipse**启动时，所有错误都应该出现在问题窗口**中，手动**删除这个错误**然后我的android项目运行成功。

并清理项目然后发生同样的错误。

我在 Eclipse 窗口之外放了一个屏幕。 ![在此处输入图像描述](../Images/1192723963dc22e4988f35d1a8fc5858.png)

请帮我 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:56:29.810

检查 Android 清单中的错误。这是不重新生成 R.java 文件的常见原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:29:08.633

1.  确保您没有导入`android.r.java`
2.  确保`R.java`生成
3.  通过查看屏幕，我可以说如果您的文件夹`r.java`中不存在，`gen`那么这是您的布局有问题。请参阅布局 xml 文件并从那里删除错误。

# git - 在 Openshift 上使用带有 ssh 身份验证的 git 子模块

> ID：15546073
> 
> 赞同：2
> 
> 时间：2013-03-21T11:20:42.840
> 
> 标签：git, bitbucket, git-submodules, ssh-keys, openshift

我在我的 openshift 存储库上创建了一个子模块（一个 bitbucket 存储库）。

我目前的`.gitmodules`配置：

```
[submodule "php"]
    path = php
    url = git@bitbucket.org:sgtcarneiro/repo.git 
```

问题是，在我将此代码推送到我的 Openshift 应用程序后，我收到以下错误：

```
remote: Host key verification failed.
remote: fatal: The remote end hung up unexpectedly
remote: Clone of 'git@bitbucket.org:sgtcarneiro/repo.git' into submodule path 'php' failed 
```

这是意料之中的，因为我没有在 bitbucket 的任何地方提到来自 Openshift 服务器的 pub 密钥。我已经尝试检查我`.ssh/`以查找/编辑公钥，但我没有任何访问权限。

PS：作为一种解决方法，我在子模块上使用带有用户名和密码的 HTTPS 身份验证，并且工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:12:47.533

您将没有用户主目录的权限，但您可以将所有密钥和脚本存储在 $OPENSHIFT_DATA_DIR 下（例如，~/app-root/data/）您可以通过 ssh 访问您的设备/应用程序来验证（rhc ssh AppName）并四处寻找。

有几个 OpenShift 论坛主题对如何从 gear/app 运行 git/ssh 命令提出了一些建议：
[https ://www.openshift.com/forums/openshift/private-git-repo-clone-on-部署](https://www.openshift.com/forums/openshift/private-git-repo-clone-on-deploy)
[https://www.openshift.com/forums/openshift/gitssh-in-bashprofile-not-working-for-git-push-and-causes-error-cloning-submodules](https://www.openshift.com/forums/openshift/gitssh-in-bashprofile-not-working-for-git-push-and-causes-error-cloning-submodules)

希望有帮助。请随时在 OpenShift 论坛上发帖。

# oracle - Oracle PL/SQL 触发器以限制每个客户的订单

> ID：15546074
> 
> 赞同：1
> 
> 时间：2013-03-21T11:20:42.687
> 
> 标签：oracle, plsql, triggers

只是在创建一个小触发器。我想要这个触发器做的是确保一个客户在当前时间只能在下订单表中有 10 个订单。不要问我的客户为什么想要这个，这对我来说似乎很愚蠢哈。

但基本上触发器是在下订单表上，我目前在 customer_ID 上选择 DISTINCT COUNT 并将其放入 v_count VARIABLE。

```
IF v_count < 10 INSERT INTO placed_order
ELSE
DBMS_OUTPUT.PUT_LINE ('you have 10 or more orders processing please wait')
END if
END 
```

这是代码的基本要点，但它不会运行如果有人愿意，我可以显示完整的代码吗？

这是代码 - 抱歉，我现在不知道如何使用 SQLFiddle。

```
 CREATE OR REPLACE TRIGGER trg_order_limit
     BEFORE INSERT
     ON placed_order
     FOR EACH ROW
     DECLARE
     v_count number;
     BEGIN
     SELECT COUNT(DISTINCT FK1_customer_id) FROM placed_order into v_count;
     if v_count < 10 then
     INSERT INTO placed_order
     (order_id,  order_date, delivery_date, FK1_customer_id, FK2_employee_id,        FK3_Order_type_id)
     VALUES
     (:NEW.order_id, :NEW.order_date, :NEW.delivery_date, :NEW.FK1_customer_id,     :NEW.FK2employee_id, :NEW.FK3_order_type_id);
     ELSE
     v_count > 10 then
     DBMS_OUTPUT.PUT_LINE('You currently have 10 or more orders processing.');
     end if;
     end; 
```

当我在 oracle 中运行脚本时，在第 4 行出现错误：PL/SQL: ORA-00933: SQL 命令未正确结束

非常感谢理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:52:09.433

即使您的触发器没有语法错误，它也不会起作用：它只会输出“不能超过 10 个订单”消息，并且插入仍然会继续；此外，如果它通过了测试，您将被放入插入循环中。如果记录太多，您需要让它抛出异常，并且您的应用程序需要捕获它，如果它通过测试则什么也不做。

至于错误，我认为问题出在这一行：

```
SELECT COUNT(DISTINCT FK1_customer_id) FROM placed_order into v_count; 
```

它应该是：

```
SELECT COUNT(DISTINCT FK1_customer_id) into v_count FROM placed_order; 
```

但是，这个查询无论如何都是错误的：它将返回已下订单的唯一客户的数量。您正在寻找的是：

```
select count(order_id) into v_count from placed_order where fk1_customer_id = :new.fk1_customer_id 
```

假设`order_id`具有唯一性约束；这似乎很可能！无论如何，因此，您的触发代码应该类似于：

```
create or replace trigger trg_order_limit
before insert on placed_order for each row
declare
  v_count number;
begin
  -- Get current order count
  select count(order_id)
  into   v_count
  from   placed_order
  where  fk1_customer_id = :new.fk1_customer_id;

  -- Raise exception if there are too many
  if v_count >= 10 then
    raise_application_error(-20000, 'You currently have 10 or more orders processing.');
  end if;
end; 
```

但是，根据[@DazzaL 的评论](https://stackoverflow.com/questions/15546074/oracle-pl-sql-trigger-to-limit-orders-per-customer#comment22027392_15546074)，这种方法可能不是一个好主意。

* * *

**编辑**突然意识到您计算每个客户的订单数量的查询是完全错误的。更新了我的答案。

# java - 在 Windows 8 上取消设置 JAVA_HOME

> ID：15546087
> 
> 赞同：3
> 
> 时间：2013-03-21T11:21:17.790
> 
> 标签：java, windows-8, jruby

我正在使用 oracle Java 7 和 JRuby（来自 TorqueBox 2.2.0）在 Windows 8 上工作。在终端中 JAVA_HOME 环境变量有一些奇怪的行为......

如果我输入“set”，我会得到我所期望的：

```
JAVA_HOME=C:\Program Files (x86)\Java\jre7 
```

例如，我可以运行 bundle exec rspec 它会工作然后我运行

```
set COVERAGE=true 
```

并再次运行相同的命令，我会得到

```
Cannot locate Java installation, specified by JAVA_HOME: 
```

我可以多次输入这个，总是相同的结果。但神秘的是我有时可以做类似的事情

```
jruby -S bundle exec spec 
```

它有时会起作用......有时不会......

这完全是随机的和不可预测的……这真的很痛苦！有人知道吗？从我的角度来看，它看起来就像一个旧的 Windows 错误，因为在 Windows 7 上一切都很好

已经测试过：

*   安装 x64 Java 而不是 x86
*   在路径的末尾有一个尾随 /

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:49:49.630

它可能与路径内的空白有关。您已正确定义它，但某些脚本可能会像这样使用它：

```
%JAVA_HOME%\bin\java ... 
```

这将失败。在这种情况下，必须始终记住引号：

```
"%JAVA_HOME%\bin\java" ... 
```

除了你说行为是随机的......无论如何，尝试将安装移动到名称中没有空格的文件夹，看看它做了什么。

# javascript - Bootmetro 瓷砖边框颜色

> ID：15546088
> 
> 赞同：0
> 
> 时间：2013-03-21T11:21:20.483
> 
> 标签：javascript, css, html, microsoft-metro

所以我一直在使用 Bootmetro 模板，但我遇到了问题。[您可以在此处](http://aozora.github.com/bootmetro/hub.html)查看演示，或在[此处](http://aozora.github.com/bootmetro/)下载源代码。

问题是，当您将鼠标悬停在任何瓷砖上时，您会注意到出现了边框，就像蓝色一样。

![在此处输入图像描述](../Images/ed6fcaeedb3af1a8dab94bd253d3f2a9.png)

好吧，我花了最后一个小时试图找到具有此设置的 javascript 或 css 文件，但我似乎找不到它。

我希望有人可能对 Bootmetro/css/javascript 有一些经验，并能指出我正确的方向。我要做的就是更改边框突出显示的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:26:15.097

bootmetro-tiles.css 第 101 行：

```
.metro .tile:hover {
    outline: 3px solid #225A68;
} 
```

（萤火虫是你的朋友。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:28:48.823

```
.metro .tile:hover {
      outline: 3px #225a68 solid;
   } 
```

第 101 行文件 Bootmetro-tiles.css

右键单击并检查元素

# html - div 中的 div 使用 100% 并有填充

> ID：15546089
> 
> 赞同：0
> 
> 时间：2013-03-21T11:21:24.013
> 
> 标签：html, css, css-float

我想把一个 div 放在另一个里面，并且在那个 div 中有一个 10px 的填充，这是 div 宽度到 100%。但要做到这一点，div 会超出父 div。

jsFiddle 中的示例：

[http://jsfiddle.net/kCypn/5/](http://jsfiddle.net/kCypn/5/)

```
.caixa
{   
    float : left;
    width:100%;    
    background-color:white;
    padding:25px;
} 
```

我遇到的另一个问题是，我有一个 div 左对齐，宽度为 150px，另一个 div 占据所有剩余空间和填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:25:59.373

默认情况下，CSS 盒子模型将元素的最终宽度计算为其和`width`之`border`和`padding`。`box-sizing`您可以通过使用属性来克服这种令人困惑的行为：

```
.caixa
{   
    float : left;
    width:100%;    
    background-color:white;
    padding:25px;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

[http://jsfiddle.net/kCypn/7/](http://jsfiddle.net/kCypn/7/)

阅读：[http](http://css-tricks.com/box-sizing/)
://css-tricks.com/box-sizing/ 浏览器支持：[http ://caniuse.com/#feat=css3-boxsizing](http://caniuse.com/#feat=css3-boxsizing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:26:06.810

`width + padding = Total value`所以它导致滚动条。删除`float`和`width`从`.caixa`

```
.caixa
{     
    background-color:white;
    padding:25px;
} 
```

**[演示](http://jsfiddle.net/kCypn/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:28:59.007

现在**删除** `float`或`width 100%`在您的`.caixa` **班级**中，因为**div 已经**准备就绪`width 100%;`，现在可以`padding`根据需要定义

```
.caixa{   
    float : left; // remove this line
    width:100%; // remove this line

} 
```

**[演示全屏](http://jsfiddle.net/kCypn/8/embedded/result/)**

**[窗口中的演示](http://jsfiddle.net/kCypn/8/)**

我检查您的代码**，它们不是必需** `float left`的或`width 100%`在您的**班级中** `.caixa`

# java - 写入 ClassPath 上的数据文件不会反映在 Project 中吗？

> ID：15546095
> 
> 赞同：1
> 
> 时间：2013-03-21T11:21:33.857
> 
> 标签：java, classpath

我的项目结构有点如下： /src/main/java Main.java /src/main/resources data.txt

现在，在 Main.java 中，我有类似的内容：

```
ClassLoader classLoader = new TestMain().getClass().getClassLoader();
String url = classLoader.getResource("data.txt").toString();
File file =new File(url.split(":")[1]);

//check if file exists, and reads current content:
System.out.println("File exists: " + file.exists());
System.out.println(IOUtils.toString(new FileInputStream(file)));

//Now write some more data to this file:
FileWriter fileWritter = new FileWriter(file,true);
BufferedWriter bufferWritter = new BufferedWriter(fileWritter);
bufferWritter.write("some more text");
bufferWritter.close(); 
```

现在上面的运行正常......并且，在每次迭代中，当我们读取文件时，我们可以看到实际上，额外的文本被附加到文件中。

但是：当我查看 /src/main/resource 中的文件时，我看**不到**任何更改。更重要的是，如果我更改/更新这个文件，那么所有以前的修改都会被删除。

因此，我的问题是：如果我有一个想要存储在类路径中的文件，例如 data.txt，并且我想要对文件进行持续更改，我该如何组织我的代码库来执行此操作，和/或我需要在我的代码中进行哪些更改才能完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:24:28.813

我怀疑您会发现数据实际上是在`bin`目录中更改的（或者您将输出设置为的任何位置）。

我希望构建过程能够编译您的源代码并将资源*复制*到其他目录，然后从那里运行它。而不是仅仅打印出文件是否存在，而是打印出文件本身，我怀疑你会看到它不在`src`.

请注意，您当前的方法很脆弱，因为如果资源位于 jar 文件中（例如），*它将不可*写。通常类路径上的资源最好被认为是只读的。

# asp.net-mvc-3 - TFS WorkItems 始终返回 null

> ID：15546097
> 
> 赞同：0
> 
> 时间：2013-03-21T11:21:37.623
> 
> 标签：asp.net-mvc-3, c#-4.0, tfs

这里 workItemStore 总是返回 null .....我希望将日志问题 tp TFS 作为一个小问题。但由于空异常无法这样做..帮助非常感谢...谢谢....

```
var networkCredential = new NetworkCredential(userName, password, domainName);

var credential = (ICredentials)networkCredential;

//Connect to TFS Project Collection, provide server URL in format http:// ServerName:Port/Collection

var tfs = new TfsTeamProjectCollection(
TfsTeamProjectCollection.GetFullyQualifiedUriForName(TfsConnectionUri), credential);

//Check whether valid TFS user or not

tfs.EnsureAuthenticated();

var workItemStore = (WorkItemStore)tfs.GetService(typeof(WorkItemStore));

//Iterate Through Projects
    foreach (Project tfs_project in workItemStore .Projects)
    {
       Console.WriteLine(tfs_project.Name);

       //Perform WIQL Query 
       WorkItemCollection wic = wis.Query(
          " SELECT [System.Id], [System.WorkItemType],"+
          " [System.State], [System.AssignedTo], [System.Title] "+
          " FROM WorkItems " + 
          " WHERE [System.TeamProject] = '" + tfs_project.Name + 
          "' ORDER BY [System.WorkItemType], [System.Id]");
       foreach (WorkItem wi in wic)
       {
         Console.WriteLine(wi.Title + "["+wi.Type.Name+"]"+wi.Description);
       }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:31:30.523

尝试以这种方式创建 WorkItemStore

```
TfsTeamProjectCollection tfs = new TfsTeamProjectCollection(new Uri(TfsServerURI), nc); 
var _wis = new WorkItemStore(tfs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T13:40:42.277

不要将dll复制并粘贴到bin，您必须直接从路径添加引用：

```
C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Client.dll
C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.WorkItemTracking.Client.dll 
```

它对我来说很有效。

# box-api - box-api 仍在使用 v1

> ID：15546110
> 
> 赞同：1
> 
> 时间：2013-03-21T11:22:11.983
> 
> 标签：box-api

任何人都知道 box-api 什么时候会升级它仍然使用相同的旧 v1。

```
there is no implementation for the latest api's 
```

有人使用最新的box-api吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:23:07.440

您可能应该查看他们刚刚发布的 attachements.me ruby​​ sdk

[https://github.com/attachmentsme/ruby-box](https://github.com/attachmentsme/ruby-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:17:56.420

该特定 gem 由我们开发人员社区的成员维护，我们没有积极维护它。您最好的选择是与维护它的开发人员合作，为 API 更新它。

# html - bootstrap modal bad positionned

> ID：15546116
> 
> 赞同：0
> 
> 时间：2013-03-21T11:22:21.503
> 
> 标签：html, css, twitter-bootstrap, modal-dialog

i'm using a bootstrap modal , when i put it within a div which align attribute is centrer , the modal is not well positionned

example

```
<div class="content" id="content" align="center">
 <div id="div" class="modal hide fade" tabindex="-1" role="dialog"
                aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 id="divTitle">
                </h3>

                </div>
                <div id="divBody" class="modal-body">
                </div>
                <div  class="modal-footer">
                <input type="button" class="btn" class="close" data-dismiss="modal" value="fermer">
                </div>
                </div>  

</div> 
```

what is the solution ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T15:46:42.963

You can do it with a fixed width positioned in center and with negative margins with half of the width and half of the height. So for a div with id your_div that is 200x200 in size, you'd do:

```
#your_div {
    width: 200px;
    height: 200px;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-left: -100px;
    margin-top: -100px;
} 
```

# android - 在 AVD 中创建日历

> ID：15546120
> 
> 赞同：2
> 
> 时间：2013-03-21T11:22:33.090
> 
> 标签：android, calendar, avd

我正在编写一个小型 android 应用程序来对日历进行一些更新。我正在使用 AVD 对其进行测试。但在 AVD 日历应用程序中，我看不到任何现有的日历帐户（没有它我无法插入任何事件）。当我尝试单击“添加帐户”时，什么也没有发生，我在 log cat 中看到以下日志。有人可以帮我创建一个日历帐户吗？

```
com.android.settings.accounts.ChooseAccountActivity; instances=2; limit=1
03-21 11:20:12.982: E/StrictMode(506): android.os.StrictMode$InstanceCountViolation: class com.android.settings.accounts.ChooseAccountActivity; instances=2; limit=1
03-21 11:20:12.982: E/StrictMode(506):  at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1) 
```

# java - 如何使用 SimpleDateFormat 将字符串“06\24\1989”解析为 Date 06/24/1989 格式

> ID：15546128
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:22:47.870
> 
> 标签：java, parsing, datetime, simpledateformat

如何使用 SimpleDateFormat 将字符串“06\24\1989”（如果用户这样输入）解析为日期格式（MM/DD/YYYY）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:31:20.050

只需使用 a`SimpleDateFormat`将其解析`String`为 a`Date`并使用另一个将其转换回`String`您想要的格式的 a 。请记住在字符串文字中使用双反斜杠（`\`是转义字符）

```
SimpleDateFormat sdfParse = new SimpleDateFormat("MM\\dd\\yyyy");
SimpleDateFormat sdfFormat = new SimpleDateFormat("MM/dd/yyyy");
try{
    Date date = sdfParse.parse("09\\24\\1989");
    System.out.println(sdfFormat.format(date)); // Prints 09/24/1989
}
catch (ParseException e){
    System.out.println("Invalid date");
} 
```

当然，您可以将所有反斜杠替换为正斜杠，`new SimpleDateFormat("MM/dd/yyyy");`如果您想验证它是有效日期，请尝试用 a 解析它。

```
String input = "09\\24\\1989".replace("\\", "/");
SimpleDateFormat sdfParse = new SimpleDateFormat("MM\\dd\\yyyy");    
try{
    sdfFormat.parse(input))
}
catch (ParseException e){
    System.out.println("Invalid date");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:38:23.623

```
try {
    String dateString = "09\\24\\1989";
    SimpleDateFormat format = new SimpleDateFormat("MM\\DD\\YYYY");
    Date myDate = format.parse(dateString);
} catch (ParseException e) {
    //what you want
} 
```

# java - 从 Java 小程序访问 Java 缓存

> ID：15546130
> 
> 赞同：1
> 
> 时间：2013-03-21T11:22:50.850
> 
> 标签：java, jakarta-ee, applet, jvm, japplet

我想知道是否可以直接从小程序以动态方式从 java 访问缓存，换句话说，小程序必须在多个操作系统中工作。

所有这一切都是因为我想在 java 缓存中加载一个文件，以便不必在每次加载小程序时都下载该文件。

这就是我现在所拥有的：

```
 try {
        URL url = new URL( "http://www.dcc.fc.up.pt/~aaugusto/libpcsclite.so");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.connect();
        File file = new File("libpcsclite.so");
        System.out.println(file.length()+" "+file.exists());
        FileOutputStream fileOutput = new FileOutputStream(file);
        InputStream inputStream = urlConnection.getInputStream();
        //int totalSize = urlConnection.getContentLength();
        @SuppressWarnings("unused")
        int downloadedSize = 0;
        byte[] buffer = new byte[1024];
        int bufferLength = 0; //used to store a temporary size of the buffer
        while ((bufferLength = inputStream.read(buffer)) > 0 ) {
            fileOutput.write(buffer, 0, bufferLength);
            downloadedSize += bufferLength;
        }
        fileOutput.close();
        System.out.println(file.length()+" DAMN "+file.getPath());
        System.out.print(file.getAbsolutePath());
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

ps：我不能使用JNLP。我有证书可以签署小程序

此致，

# html - 无法在css中设计复选框

> ID：15546134
> 
> 赞同：0
> 
> 时间：2013-03-21T11:22:57.967
> 
> 标签：html, css

我有一些复选框列表，我试图自定义设计。但是我的编码不起作用。这是我的示例代码：

我的 CSS 是：

```
input[type="checkbox"]{
display:none;
}
input[type="checkbox"] + span{
width:15px;
height:15px;
background:url(../img/uncheck_box.png) no-repeat;
display:inline-block;
}
input[type="checkbox"]:checked + span{
background:url(../img/check_box.png) no-repeat;
} 
```

我的 HTML 是：

```
<input type="checkbox" id="1" /><span></span><label for="1">AAAA</label><br />
<input type="checkbox" id="2" /><span></span><label for="2">BBBB</label><br />
<input type="checkbox" id="3" /><span></span><label for="3">CCCC</label><br />
<input type="checkbox" id="4" /><span></span><label for="4">DDDD</label><br />
<input type="checkbox" id="5" /><span></span><label for="5">EEEE</label><br />
<input type="checkbox" id="6" /><span></span><label for="6">FFFF</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:44:51.927

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Button - Checkboxes</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#check" ).button();
$( "#format" ).buttonset();
});
</script>
<style>
#format { margin-top: 2em; }
</style>
</head>
<body>
<input type="checkbox" id="check" /><label for="check">Toggle</label>
<div id="format">
<input type="checkbox" id="check1" /><label for="check1">B</label>
<input type="checkbox" id="check2" /><label for="check2">I</label>
<input type="checkbox" id="check3" /><label for="check3">U</label>
</div>
</body>
</html> 
```

我认为你需要这个：这是最好的练习。

# netbeans - Netbeans 项目中没有默认的 META-INF 文件夹——将文件添加到哪里？

> ID：15546135
> 
> 赞同：2
> 
> 时间：2013-03-21T11:23:00.097
> 
> 标签：netbeans, jar, manifest, manifest.mf, meta-inf

如何让 Netbeans 添加`javamail.providers`到 META-INF 文件夹（我手动添加）而不进入 ant 构建文件中的杂草？

这有点奇怪，因为 manifest.mf 最终出现在生成的 jar 中的 META-INF 文件夹中（正确），但位于 META-INF 文件夹（我手动添加）之外：

```
thufir@dur:~/NetBeansProjects/gnumail-providers$ 
thufir@dur:~/NetBeansProjects/gnumail-providers$ ll META-INF/
total 12
drwxrwxr-x 2 thufir thufir 4096 Mar 21 04:02 ./
drwxr-xr-x 8 thufir thufir 4096 Mar 21 04:15 ../
-rw-rw-r-- 1 thufir thufir  868 Mar 21 04:02 javamail.providers
thufir@dur:~/NetBeansProjects/gnumail-providers$ 
thufir@dur:~/NetBeansProjects/gnumail-providers$ ll manifest.mf 
-rw-rw-r-- 1 thufir thufir 82 Mar 21 03:18 manifest.mf
thufir@dur:~/NetBeansProjects/gnumail-providers$ 
```

这是项目：

```
thufir@dur:~/NetBeansProjects/gnumail-providers$ 
thufir@dur:~/NetBeansProjects/gnumail-providers$ tree -L 2
.
├── build
│   ├── built-jar.properties
│   ├── classes
│   ├── empty
│   └── generated-sources
├── build.xml
├── dist
│   ├── gnu
│   ├── gnumail-providers.jar
│   ├── META-INF
│   ├── net
│   ├── providers
│   ├── treeutil
│   └── usenet.properties
├── javamail.providers
├── manifest.mf
├── META-INF
│   └── javamail.providers
├── nbproject
│   ├── build-impl.xml
│   ├── genfiles.properties
│   ├── private
│   ├── project.properties
│   └── project.xml
└── src
    ├── gnu
    ├── net
    ├── providers
    ├── treeutil
    └── usenet.properties

18 directories, 12 files
thufir@dur:~/NetBeansProjects/gnumail-providers$ 
```

这是 Netbeans 构建的结果 JAR：

```
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ 
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ ll
total 228
drwxrwxr-x 3 thufir thufir   4096 Mar 21 04:15 ./
drwxr-xr-x 8 thufir thufir   4096 Mar 21 04:15 ../
-rw-rw-r-- 1 thufir thufir 213021 Mar 21 04:15 gnumail-providers.jar
drwxrwxr-x 2 thufir thufir   4096 Mar 21 04:15 lib/
-rw-rw-r-- 1 thufir thufir   1332 Mar 21 04:15 README.TXT
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ 
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ jar -xf gnumail-providers.jar 
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ 
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ ll
total 252
drwxrwxr-x 8 thufir thufir   4096 Mar 21 04:15 ./
drwxr-xr-x 8 thufir thufir   4096 Mar 21 04:15 ../
drwxrwxr-x 3 thufir thufir   4096 Mar 21 04:15 gnu/
-rw-rw-r-- 1 thufir thufir 213021 Mar 21 04:15 gnumail-providers.jar
drwxrwxr-x 2 thufir thufir   4096 Mar 21 04:15 lib/
drwxrwxr-x 2 thufir thufir   4096 Mar 21 04:15 META-INF/
drwxrwxr-x 3 thufir thufir   4096 Mar 21 04:15 net/
drwxrwxr-x 9 thufir thufir   4096 Mar 21 04:15 providers/
-rw-rw-r-- 1 thufir thufir   1332 Mar 21 04:15 README.TXT
drwxrwxr-x 2 thufir thufir   4096 Mar 21 04:15 treeutil/
-rw-rw-r-- 1 thufir thufir     70 Mar 21 04:15 usenet.properties
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ 
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ ll META-INF/
total 12
drwxrwxr-x 2 thufir thufir 4096 Mar 21 04:15 ./
drwxrwxr-x 8 thufir thufir 4096 Mar 21 04:15 ../
-rw-rw-r-- 1 thufir thufir  339 Mar 21 04:15 MANIFEST.MF
thufir@dur:~/NetBeansProjects/gnumail-providers/dist$ 
```

这是对[GNU 打包建议](http://article.gmane.org/gmane.comp.java.classpath.extensions.javamail/682)的回应。

也可以看看：

[http://article.gmane.org/gmane.comp.java.netbeans.user/176994](http://article.gmane.org/gmane.comp.java.netbeans.user/176994)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-01T12:33:15.933

右键单击项目/选择属性。在源节点中：单击添加文件夹。在构建节点，web节点，选择META-INF ==>点击ok

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T12:34:18.977

如果项目是 MAVEN WebApplication，只需在 Web Pages (/src) -> main 中创建结构 resources/META-INF

[![在此处输入图像描述](../Images/208d2a265a69083e178b2073d6878d83.png)](https://i.stack.imgur.com/pBH2o.jpg)

您将自动在项目中看到文件夹 Other Sources。

[![在此处输入图像描述](../Images/b81353ea5fbda8dfb23115307a5f45e0.png)](https://i.stack.imgur.com/qaODC.jpg)

您也可以将其应用于其他类型的项目。

希望这有帮助

# c++ - 如何在 boost::shared_ptr 后面深拷贝完整对象 进入指向新位置的shared_ptr？

> ID：15546137
> 
> 赞同：5
> 
> 时间：2013-03-21T11:23:04.300
> 
> 标签：c++, boost, shared-ptr

如何复制后面的完整对象`boost::shared_ptr<T>`：是否有 memcopy 选项（只创建内存克隆），或者我们将创建复制构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:26:24.377

您需要一个复制构造函数或一个`operator=`将执行深层复制的构造函数。

`boost::shared_ptr`无法知道您的对象的结构来为您执行此操作。“内存克隆”操作也不能。

当然，这仅适用于需要明确定义的复制构造函数的对象 /`operator=`并且“琐碎”的对象会进行浅拷贝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:29:27.930

如果您知道对象的确切类型，那么您应该使用复制构造函数或复制赋值运算符。

如果对象是继承层次结构中的类的实例，并且您不知道对象的确切类型，那么您应该使用虚拟克隆函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:25:55.237

您应该创建一个复制构造函数并编写如下内容：

```
ptr.reset(new T);
*ptr  = *(otherObject.ptr); 
```

为了深拷贝指针。

# iphone - 仅缩放叠加图像

> ID：15546147
> 
> 赞同：1
> 
> 时间：2013-03-21T11:23:25.837
> 
> 标签：iphone, ios, objective-c, uiimageview, zooming

我的cameraoverlay中有一个overlayimage。当用户双击我的叠加图像时，我需要放大/缩小。

叠加图像的代码：

```
UIImageView *overlayImageView = [[UIImageView alloc] 
initWithImage:[UIImage imageNamed:@"overlay.png"]];
[overlayImageView setFrame:CGRectMake(30, 100, 260, 200)];
[[self view] addSubview:overlayImageView];
[overlayImageView release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:38:24.313

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired = 2;
    [overlayImageView addGestureRecognizer:tapGesture]; // add tapGesture to your ImageView
    [tapGesture release];

  self.isTouch == YES; // it is BOOL type.
}

 - (void)handleTapGesture:(UITapGestureRecognizer *)sender 
{
        if(self.isTouch)
        {
              // put relavent size of Zoom ImageView
            self.isTouch == NO;
        }
        else
        {
              // put code for normal ImageView
              self.isTouch == YES;
        }
} 
```

# android - 如何手动设置闹钟

> ID：15546148
> 
> 赞同：0
> 
> 时间：2013-03-21T11:23:26.130
> 
> 标签：android, android-alarms

我在我的应用程序中使用余数。我必须从数据库中获取事件并将详细信息设置到日历中，以便使用推送消息设置警报。我已经尝试了一些代码。

但我无法设置日历手册。获取空指针异常。我的代码在这里：

```
scheduleClient = new ScheduleClient(this);
    scheduleClient.doBindService();
    Calendar c = Calendar.getInstance();
    String month = String.valueOf(c.get(Calendar.MONTH) + 1);
    String year = String.valueOf(c.get(Calendar.YEAR));
    String months = null;
    if (month.startsWith("0") || month.startsWith("1")) {
        months = year + "-" + month;
    } else {
        months = year + "-" + "0" + month;
    }

    if (isSetToTrue == true) {
        LoadCalender(months);

        // here set your checkBox to true
        Toast.makeText(this, "Check box enabled", Toast.LENGTH_SHORT)
                .show();
    } else {
        Toast.makeText(this, "Check box disabled", Toast.LENGTH_SHORT)
                .show();
    }

public void LoadCalender(String month) {

    try {

        Cursor cursor = null;
        Database db = new Database(getApplicationContext());

        cursor = db.getSelectedEventDetails(month);
        if (cursor.getCount() != 0) {
            if (cursor.moveToFirst()) {
                do {
                    text = cursor.getString(cursor.getColumnIndex("event"));
                    title = "News/Events";
                    String dates = cursor.getString(cursor
                            .getColumnIndex("date"));

                    try {

                        DateFormat formatter;
                        Date date = new Date();
                        formatter = new SimpleDateFormat("yyyy-MM-dd");
                        date = (Date) formatter.parse(dates);
                        SimpleDateFormat fmt = new SimpleDateFormat(
                                "yyyy-MM-dd");
                        String todayStr = fmt.format(date);
                        java.sql.Date dt = java.sql.Date
                                .valueOf(new String(todayStr));
                        System.out.println("Today is " + dt);
                        String yr = String.valueOf(dt.getYear());
                        int year = Integer.parseInt("20"+yr.substring(1));
                        int months = dt.getMonth();
                        int day = dt.getDay();

                        Calendar c1 = Calendar.getInstance();
                        c1.set(year, months+1, day);
                        c1.set(Calendar.HOUR_OF_DAY, 0);
                        c1.set(Calendar.MINUTE, 0);
                        c1.set(Calendar.SECOND, 0);
                        // Ask our service to set an alarm for that date,
                        // this
                        // activity talks to the client that talks to the
                        // service
                        scheduleClient.setAlarmForNotification(c1);

                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                } while (cursor.moveToNext());
            }

        }
        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // looping through All Contacts

} 
```

Logcat 错误；

```
 03-19 12:23:23.395: W/System.err(2984): java.lang.NullPointerException
03-19 12:23:23.405: W/System.err(2984):     at com.rathnasoft.reminder.ScheduleClient.setAlarmForNotification(ScheduleClient.java:54)
03-19 12:23:23.426: W/System.err(2984):     at com.rathnasoft.vikasa.HomeActivity.LoadCalender(HomeActivity.java:228)
03-19 12:23:23.446: W/System.err(2984):     at com.rathnasoft.vikasa.HomeActivity.onCreate(HomeActivity.java:87)
03-19 12:23:23.466: W/System.err(2984):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-19 12:23:23.475: W/System.err(2984):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-19 12:23:23.506: W/System.err(2984):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-19 12:23:23.518: W/System.err(2984):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-19 12:23:23.525: W/System.err(2984):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-19 12:23:23.556: W/System.err(2984):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 12:23:23.577: W/System.err(2984):     at android.os.Looper.loop(Looper.java:130)
03-19 12:23:23.586: W/System.err(2984):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-19 12:23:23.615: W/System.err(2984):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 12:23:23.635: W/System.err(2984):     at java.lang.reflect.Method.invoke(Method.java:507)
03-19 12:23:23.645: W/System.err(2984):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-19 12:23:23.666: W/System.err(2984):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-19 12:23:23.676: W/System.err(2984):     at dalvik.system.NativeStart.main(Native Method) 
```

# python - 简单的二次和线性方程计算器

> ID：15546149
> 
> 赞同：0
> 
> 时间：2013-03-21T11:23:27.630
> 
> 标签：python, logic

我在使用简单的线性和二次方程计算器时遇到了困难。二次方有效，但线性无效。它给了我浮点数的答案，但由于某种原因，它总是一些数字，然后是 0。例如：如果我想解决**2x + 13 = 0**，答案将是**-7.0**，尽管它应该是**-6.5**。我想它出于某种原因将其四舍五入（天花板）。我很确定我在某处有一些语法错误，但我找不到它。有关如何解决此问题的任何建议？谢谢你的帮助。

```
import math

a,b,c = input("Enter the coefficients of a, b and c separated by commas: ")

d = b**2-4*a*c # discriminant

if a == 0:
    x = -c/b # liner equation
    x = float(x)
    b = float(b)
    c = float(c)
    print "This linear equation has one solution:", x

elif d < 0:
    print "This quadratic equation has no real solution"

elif d == 0:
    x = (-b+math.sqrt(d))/(2*a)
    print "This quadratic equation has one solutions:", x

else:
    x1 = (-b+math.sqrt(d))/(2*a)
    x2 = (-b-math.sqrt(d))/(2*a)
    print "This quadratic equation has two solutions:", x1, "and", x2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:27:00.917

您应该在用户输入后立即将`a`,`b`和转换`c`为浮点数。

另一种方法是使用[Python 3.x division](http://en.wikibooks.org/wiki/Python_Programming/Operators#Division_and_Type_Conversion)，它可以按您的预期工作，与

```
from __future__ import division 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:28:23.487

`x = -c/b`- 如果 c 和 b 都是整数，则结果也将四舍五入为整数。

做类似的事情`x = -c/float(b)`

# pagination - ZF2 - PaginationControl $this->route 不工作

> ID：15546150
> 
> 赞同：1
> 
> 时间：2013-03-21T11:23:28.147
> 
> 标签：pagination, zend-framework2

我认为：

```
<?php echo $this->paginationcontrol($paginator,'Jumping','pagination')?> 
```

它可以工作，但在 pagination.phtml 中，paginatorcontrol 调用：

```
<a href="<?php echo $this->url($this->route, array('page' => $this->first)); ?>">
First 
```

$this->route 不工作，为什么是空的？

我应该在 paginationcontrol() 内部传递吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:53:03.853

> 我应该在 paginationcontrol() 内部传递吗？

是的，paginationcontrol 的第四个参数接受一个数组，该数组作为数据传递给它呈现的部分，你应该包括在那里使用的路线

```
<?php echo $this->paginationcontrol($paginator, 'Jumping', 'pagination', array('route' => 'some/app/route'))?> 
```

# identifier - 如何从计算机中检索唯一标识？

> ID：15546151
> 
> 赞同：0
> 
> 时间：2013-03-21T11:23:28.740
> 
> 标签：identifier, computer-architecture

我可以从计算机中提取什么来识别它。

MAC地址，硬盘序列号，然后呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:33:23.883

我现在没有代码可以给你看，但我做过类似的事情，通过 cominning`CPU Id`和硬盘序列号，这就是你获得唯一编号的方式；
试试这个;
[http://www.vcskicks.com/hardware_id.php](http://www.vcskicks.com/hardware_id.php)

# primefaces - 使用 primefaces 和 jqplot 的折线图中的日期轴

> ID：15546153
> 
> 赞同：0
> 
> 时间：2013-03-21T11:23:29.160
> 
> 标签：primefaces, jqplot

我试图展示一个带有 primefaces 和 jqplot 的折线图。但我不明白。我的 bean 中有这段代码：

```
CartesianChartModel graphic = new CartesianChartModel(); 
LineChartSeries series = new LineChartSeries();
DateFormat dateFormat = new SimpleDateFormat("mm/dd/yy"); 
String date1 = "01/10/13";
String date2= "01/15/13";
String date3= "02/20/13";

p=dateFormat.parse(date1);
series.set(p.getTime(), 10);
p=dateFormat.parse(date2);
series.set(p.getTime(), 20);
p=dateFormat.parse(date3);
series.set(p.getTime(), 15);

graphic.addSeries(series); 
```

我的扩展器函数中有这段代码：

```
function extender(){
this.cfg.axes = {
   xaxis :{
      renderer:$.jqplot.DateAxisRenderer, 
      rendererOptions : {
             tickRenderer:$.jqplot.CanvasAxisTickRenderer
      },
      tickOptions : { 
           fontSize:'10pt',
           fontFamily:'Tahoma', 
           angle:-40,
           formatString:'%D'
       }

    };

    this.cfg.axes.xaxis.ticks = this.cfg.categories;
} 
```

问题

它不能正常工作，因为我在其他人之前得到 date3 并且日期未显示在 x 轴中。

我刚刚尝试过像[PrimeFaces 一样 - 自定义 Date Chart](https://stackoverflow.com/questions/14262536/primefaces-customise-date-chart)。我更改了时间格式并添加了`tickInterval`元素。通过这些更改，我得到一个空图形。如果我删除`tickInterval`元素，我会在 x 轴上得到类似的每个刻度`111011000001110111000000000-%y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T11:57:32.363

好的..我不确定你是否仍然需要这个，但我遇到了类似的问题，这就是我解决它的方法。我还需要放大日期。

首先，primefaces 不包含**DateAxisRenderer**。您需要下载它并将其单独添加到您的代码中。你可以在这里得到它 -

[DateAxisRenderer.js](http://svnplot.googlecode.com/svn-history/r524/trunk/src/svnplot/javascript/jqplot/plugins/jqplot.dateAxisRenderer.min.js)

然后像这样将它添加到您的代码中 -

```
<h:outputScript library="js/plugins" name="jqplot.dateAxisRenderer.min.js" target="head" /> 
```

将文件放在**webapp/js/plugins**下..这当然可能因项目而异...

然后从支持 bean 发送日期，并从您的 javascript 中删除以下行**-**

```
this.cfg.axes.xaxis.ticks = this.cfg.categories; 
```

那么它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:30:50.163

我已经解决了我的问题，创建了一个这样的新项目并且它有效。我不知道是什么问题。但我有一个新问题。我刚刚尝试绘制 2013 年 1 月 1 日到 2013 年 1 月 3 日之间的一系列数据，但我只在 1 月份获得数据。这意味着，我得到了一个图表，其中 1 月和 2 月的数据在 1 月的同一日期打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T20:33:05.237

您必须使用 epoch millis 设置 X 轴值。我必须弄清楚。

# jquery - 如何在“.ul li”中的“a”标签上调用“event.preventDefault”？

> ID：15546160
> 
> 赞同：1
> 
> 时间：2013-03-21T11:23:47.130
> 
> 标签：jquery

在下面的代码块中，我想调用`event.preventDefault`中的`a`标记`.ul li`，以便在单击任何列表元素时，`a`标记不应重定向到其`href`属性中的页面。我尝试这样做`$this.find("a").preventDefault();`，但这会导致错误。我该怎么做呢？

```
$(document).ready(function () {
    $(".ul li").on("click", function () {
        var $this = $(this);
        $this.find("a").preventDefault();

        // switch all lists off 
        $(".selectedList, .checkedList").removeClass("selectedList, checkedList");
        // switch this list on  
        $this.addClass("selectedList, checkedList");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:25:29.527

您可以在事件对象而不是元素上使用[**event.preventDefault 。**](http://api.jquery.com/event.preventDefault/)`DOM`您可以通过将事件单击事件添加到 a 并调用`preventDefault`

```
$(".ul li a").click(function(event){    
     event.preventDefault();    
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:26:32.800

```
$(".ul li a").on("click", function(e)
{
    var $this = $(this);
    e.preventDefault();

    $(".selectedList, .checkedList").removeClass("selectedList, checkedList");
    // switch this list on  
    $this.parent().addClass("selectedList, checkedList");//or parents('li')
}); 
```

并最终使用`.parent`if`a`是直接子级`li`或用于`.parents('li')`添加`class`到`parent li`.

**或者**

`closest('li')`会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:25:15.173

您需要在[事件对象中调用](http://api.jquery.com/category/event-object/)[preventDefault()](http://api.jquery.com/event.preventDefault/)。

我认为 addClass 用法也是错误的，`,`如果要添加/删除多个类，类名之间不应该有任何

```
$(document).ready(function() {
        $(".ul li a").on("click", function(e) {
            var $this = $(this);
            e.preventDefault();

            // switch all lists off 
            $(".selectedList, .checkedList").removeClass("selectedList checkedList");
            // switch this list on  
            $this.addClass("selectedList checkedList");
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:25:45.313

你需要传递事件对象`. preventDefault()`是事件。

```
$(document).ready(function() {
        $(".ul li").on("click", function(evt) {
            var $this = $(this);
            evt.preventDefault(); // this should be like this. 

            // switch all lists off 
            $(".selectedList, .checkedList").removeClass("selectedList, checkedList");
            // switch this list on  
            $this.addClass("selectedList, checkedList");
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:26:06.987

您应该只将 a 元素用于单击事件

```
$(document).ready(function() {
    $(".ul li a").on("click", function( e ) {
        var $this = $(this);
        e.preventDefault();

        // switch all lists off 
        $(".selectedList, .checkedList").removeClass("selectedList, checkedList");
        // switch this list on  
        $this.parent( 'li' ).addClass("selectedList, checkedList");
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T11:26:36.087

该`.preventDefault()`函数属于`event`作为第一个参数传递给事件处理函数的 jQuery 规范化对象。只需在匿名函数上为参数指定名称并使用它：

```
$(document).ready(function() {
    $(".ul li").on("click", function(event) {
        var $this = $(this);
        event.preventDefault();

        // switch all lists off 
        $(".selectedList, .checkedList").removeClass("selectedList checkedList");
        // switch this list on  
        $this.addClass("selectedList checkedList");
    });
}); 
```

由于事件冒泡`click`，在元素上触发的任何事件`<a>`也应由此事件处理程序处理。另请注意，使用`.addClass()`and`.removeClass()`函数时，类名列表是空格，而不是逗号，分隔 - 它不应该是`"selectedList checkedList"`，`"selectedList, checkedList"`除非您的类是`selectedList,`.

# mysql - 如何在 MySQL 中按块对数据进行编号？

> ID：15546167
> 
> 赞同：0
> 
> 时间：2013-03-21T11:24:11.687
> 
> 标签：mysql

我想连续对文件集块进行编号，例如从 1 到 3。

假设我有以下内容：

```
ID | random_nr | ordering
.. | .. | ..
19 | 12 | 2
19 | 21 | 3
20 | 13 | 1*
20 | 14 | 2*
20 | 22 | 3*
21 | 15 | 1
21 | 17 | 2
.. | .. | 
```

到目前为止，我的代码仅通过以下方式设置所有数字：

```
SET @c = 0; 
SELECT
`ID`,
`random`,
(@c := @c + 1) AS "ordering"
FROM `tabelle` WHERE ... 
```

我怎么能改变它，所以我得到上面提到的结果？太感谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:49:15.510

这是一种方法...

```
 SELECT x.*
      , COUNT(*) ordering 
   FROM tabelle x 
   JOIN tabelle y 
     ON y.id = x.id 
    AND y.random_nr <= x.random_nr 
  GROUP 
     BY x.id
      , x.random_nr; 
```

另一种方法是将@curr 和@prev 标记添加到现有查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:07:33.760

```
SET @i = null;
SELECT
`ID`,
`random`,
(@c := IF(ID = @i, @c + 1, 1) + (@i:=ID)-ID AS "ordering"
FROM `tabelle` WHERE ...
ORDER BY ID 
```

所以每次 ID*不*等于 @i 的当前值时，@c 从 1 开始。

# sql-server-2008 - SQL Server 2008 中的检查约束

> ID：15546169
> 
> 赞同：3
> 
> 时间：2013-03-21T11:24:16.773
> 
> 标签：sql-server-2008, check-constraints

拜托，我刚开始学习 SQL 并卡住了。我正在尝试为我的测试项目构建一个数据库，我已经创建了一些表，做了关系，定义了主键和外键.....所有这些都在 SQL Server 2008 中通过可视界面（表设计/编辑） ，没有语句编码（还没有到那里，但我会的:)）。

我`Tax`在一个名为的表中有一个列，`Orders`我做了功课，发现最好使用带有约束的`decimal`数据类型（我使用十进制（5, 2）） 。`CHECK`

所以我右键单击列 - >约束并在表达式中输入

```
([TAX] >= (0.00) AND [TAX] <= (100.00)) 
```

我的值超出了检查约束，我可以输入 123456.0999，然后在表中得到 1234560999，如果我输入 2.5，我得到 25 ..... 所以**CHECK CONSTRAINT**不能正常工作？？？

请帮忙

* * *

**编辑：这是我桌子上的创建脚本**

```
 USE [MyCompany]
GO

/****** Object:  Table [dbo].[Orders]    Script Date: 03/22/2013 11:33:24 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Orders](
    [OrderID] [int] IDENTITY(1,1) NOT NULL,
    [OrderDateTime] [smalldatetime] NOT NULL,
    [CustomerID] [int] NOT NULL,
    [Tax] [decimal](5, 2) NULL,
    [Shipping] [decimal](7, 3) NOT NULL,
 CONSTRAINT [PK_Orders] PRIMARY KEY CLUSTERED 
(
    [OrderID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [FK_Orders_Customers] FOREIGN KEY([CustomerID])
REFERENCES [dbo].[Customers] ([CustomerID])
GO

ALTER TABLE [dbo].[Orders] CHECK CONSTRAINT [FK_Orders_Customers]
GO

ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [CK_Orders_Tax] CHECK  (([Tax]>=(0.0) AND [Tax]<=(100.0)))
GO

ALTER TABLE [dbo].[Orders] CHECK CONSTRAINT [CK_Orders_Tax]
GO 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:46:11.427

检查约束是否有效 - 试试这个：

```
CREATE TABLE Orders (OrderID INT IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED,
                     TotalAmount DECIMAL(18,2),
                     Tax DECIMAL(5,2) CHECK (Tax >= 0.0 AND Tax <= 100.0)
                    ) 
```

现在，当您尝试插入数据时：

```
INSERT INTO dbo.Orders(TotalAmount, Tax)
VALUES (100.0, 2.75)     --> works just fine

INSERT INTO dbo.Orders(TotalAmount, Tax)
VALUES (200.0, 15.75)   --> works just fine

INSERT INTO dbo.Orders(TotalAmount, Tax)
VALUES (300.0, -2.0) 
```

> *消息 547，级别 16，状态 0，第 1 行
> INSERT 语句与 CHECK 约束“CK__Orders__Tax__164452B1”冲突。冲突发生在数据库“test”、表“dbo.Orders”、“Tax”列中。*

```
INSERT INTO dbo.Orders(TotalAmount, Tax)
VALUES (400.0, 200.75) 
```

> *消息 547，级别 16，状态 0，第 1 行
> INSERT 语句与 CHECK 约束“CK__Orders__Tax__164452B1”冲突。冲突发生在数据库“test”、表“dbo.Orders”、“Tax”列中。*

所以我会说 - 检查约束**工作**得很好......

**更新：**

如果您坚持以艰难的方式执行此操作 - 使用（相当糟糕的）视觉设​​计器 - 那么您需要在此处定义检查约束：

![在此处输入图像描述](../Images/3c3bc327e603960d9315bb586f927488.png)

一旦我这样做了，然后我进入`Edit top 200 rows`SQL Server Management Studio 输入数据，我输入了违反检查约束的内容，我得到：

![在此处输入图像描述](../Images/517e4048538e7bda1e614414ca2fd26e.png)

如果这对您的客户端应用程序不起作用 - 那么您很可能遇到**了客户端应用程序**的问题- 而不是`CHECK`SQL Server 中的约束！

# php - $.ajax 成功函数返回 null

> ID：15546177
> 
> 赞同：5
> 
> 时间：2013-03-21T11:24:36.400
> 
> 标签：php, ajax, jquery

我设置了一个基本的登录表单，我使用 ajax 请求将两个变量（登录名+密码）发送到另一个页面，该页面相应地检查并返回状态。我的ajax代码

```
$('form.login_form').on('submit', function(){
    var that = $(this),
    url = "textlogin.php",
    type = that.attr('method'),
    data = {};

    that.find('[name]').each(function(index, value){
        var that = $(this),
        name = that.attr('name'),
        value = that.val();
        data[name] = value;
    });

    $.ajax({
        url: url,
        type: type,
        data: data,

        success: function(response){
            if(response==""){
                $('#login_err').html("its null");
            }else{
                $('#login_err').html(response);
            }
        }
    });
    return false;
}); 
```

不起作用，`success`函数始终返回 null。在我不使用`ajax`和`jquery dialog`登录之前，代码工作正常。我尝试过的事情：1.设置`Content-type` 2.设置`dataType` 3.使用 $.post 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:06:38.127

您需要指定数据类型。我希望这会帮助你

```
function a()
{
  var ip=new Object(); 
ip.name=value;
var data=JSON.stringify(ip);

    $.ajax({
            url: "http://127.0.0.1/file.php",
            data:data,
            dataType:"json",
           success: function(data)
            {
            }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:53:06.593

这是 Ajax 的示例代码。

```
$.ajax({
        url: "login.php?",
        data:"username="+username+"&password="+password,
        success: function(data)
        {
        }
}); 
```

请试试这个。

如果您使用的是 Mozilla Firefox，请安装 firebug add on 。安装firebug后打开它。现在您可以找到控制台选项卡。使其启用。现在，当您运行 ajax 时，您可以在这里看到。

假设你直接传递数组，那么更好的方法是在 php 中使用 implode 函数，所以使用这个函数。

如果有效，请给我回复。

# port - SIP INVITE 请求端口搞砸了

> ID：15546181
> 
> 赞同：2
> 
> 时间：2013-03-21T11:24:45.353
> 
> 标签：port, sip, nat, sdp, nat-traversal

[使用resiprocate](http://www.resiprocate.org)开发 NAT 遍历解决方案，它工作正常，但通常 SIP INVITE 获取失败，特别是在 cisco 路由器上

**1\. 1024端口发出SIP REGISTER**

来源：107.108.188.26

目的地：107.108.188.52

用户数据报协议，Src 端口：1024 (1024)，Dst 端口：sip (5060)

![在此处输入图像描述](../Images/fe9b47c73f780d4a1f9d1ecf22e49df3.png)

**2\. SIP 状态 200 OK**

来源：107.108.188.52

目的地：107.108.188.26

用户数据报协议，Src 端口：sip (5060)，Dst 端口：1024 (1024)

**3\. SIP/SDP 邀请**

Source: 107.108.188.52 Destination:107.108.188.26 User Datagram Protocol, Src Port: sip (5060), Dst Port: sip (5060)

![在此处输入图像描述](../Images/8a929bf949b994bd8f073b2bb58a376c.png)

理想情况下，第 1 步和第 3 步中的发送端口应该是 1024。请指出我背后的任何可能原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:38:19.367

REGISTER 请求中的**To**和**Contact**字段都指定端口 5060：*sip:192.168.5.2@107.108.188.26:5060*。

这表示您希望在此端口上接收呼叫（即 INVITE）。 [见 rfc](https://www.rfc-editor.org/rfc/rfc3261#section-10.2)。

如果您希望在端口 1024 上接收邀请，请将 uri 的主机部分更改为*107.108.188.26:1024 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:57:45.637

讨论相同，得出以下结论

```
If RFC5626 (Outbound) is not used on the client side, then resip will route INVITEs to the user based on the information in their Path or Contact headers of the registration request.  You want to try out a repro setting that forces RFC5626 behaviour in the proxy even if the clients to no support it:
# Enable use of flow-tokens in non-outbound cases
# WARNING: Before enabling this, ensure you have a RecordRouteUri setup, or are using
# the alternate transport specification mechanism and defining a RecordRouteUri per
# transport: TransportXRecordRouteUri
EnableFlowTokens = true 
```

# php - Codeigniter 自定义路由隐藏控制器/页面

> ID：15546182
> 
> 赞同：0
> 
> 时间：2013-03-21T11:24:49.260
> 
> 标签：php, codeigniter, routes

我有一个需要重新开发的网站，它是使用 codeigniter 编写的。页面的 URL 类似于 www.mysite.com/page/index/mypage，我想将其更改为 www.mysite.com/mypage。我试图在 routes.php 中设置自定义路由，但它不起作用。这是我的 routes.php：

```
 $route['default_controller'] = "page";
    $route['404_override'] = 'page';

    $route['(.*)/page/index/(.*)']  = 'page/index/$1';
    $route['(.*)'] = 'page/index/$1'; 
```

有人可以帮忙，如何配置它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:27:29.103

从 /page/index/mypage 到 mypage

```
$route['default_controller'] = "page";
$route['404_override'] = 'page';

$route['/page/(:any)']  = 'page/index/$1'; 
```

你也可以试试：

```
 $route['/(:any)']  = 'page/index/$1'; 
```

您可能无法访问任何其他网址。

# java - 在生产代码中使用 Spring Assert.notnull

> ID：15546184
> 
> 赞同：4
> 
> 时间：2013-03-21T11:24:52.283
> 
> 标签：java, spring, assert, autowired

我继承了一个使用 Spring Autowiring 的应用程序，并且每个自动装配的构造函数都充满了 Assert.notNull() 以在继续之前检查每个参数。

我看不出构造函数自动装配如何让这些参数为空，因此这些断言似乎是多余的，并使代码看起来很混乱。

我很欣赏它对于手动注入 args 的单元测试可能很有用，但我认为测试中的 NPE 足以表明测试未正确初始化。

在我去“整理”代码之前，我想我只想问我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:07:25.687

我认为这只是额外的预防 - 自动装配是容器的一项功能，与您的代码分开，可以随时禁用。通过这种方式，您可以显式定义构造函数的合同。

假设有人禁用了该特定类的自动装配并将其替换为：

```
 <bean id="myBean" class="com.my.company.BeanImpl">
    <constructor-arg name="someService">
        <null />
    </constructor-arg>
  </bean> 
```

我认为这是您缺少的重点:)

# android - 无法在布局中对齐 TextView 和 Checkbox

> ID：15546186
> 
> 赞同：5
> 
> 时间：2013-03-21T11:24:58.643
> 
> 标签：android, android-layout, android-linearlayout, android-styles, android-checkbox

我有一个包含文本视图和复选框的线性布局。

```
 <LinearLayout style="@style/linearLayoutStyleNoBgColor" >
     <TextView
         android:id="@+id/useFollowupDate"
         style="@style/textFieldStyleType1WithCheckbox" />

     <CheckBox
         android:id="@+id/checkFollowDate"
         style="@style/checkboxStyleType1"/>
 </LinearLayout> 
```

样式是：

```
<style name="linearLayoutStyleNoBgColor">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:layout_margin">5dp</item>
    <item name="android:weightSum">1.0</item>
</style>

<style name="textFieldStyleType1WithCheckbox" parent="@style/textFieldStyleType1">
    <item name="android:layout_height">match_parent</item>
    <item name="android:layout_weight">0.30</item>
    <item name="android:gravity">center_vertical</item>
</style>

<style name="checkboxStyleType1">
    <item name="android:layout_width">0dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">0.70</item>
    <item name="android:gravity">right|end</item>
</style> 
```

我想要实现的是

```
TextView                |     checkbox
(30%percent screen)     |     (to the right) 
```

但我现在得到的是

```
TextView            | checkbox
(30%percent screen) | (left aligned) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:35:08.407

在适当的地方使用`gravity`和性能；`layout_gravity`

这可能有用：**[http ://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/](http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:30:37.447

如果你想适当地对齐它们，那么你可以使用相对布局。在文本视图右侧制作复选框

```
<CheckBox
         android:id="@+id/checkFollowDate"
         style="@style/checkboxStyleType1"
android:layout_toRightOf="@id/useFollowupDate"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:33:08.460

我认为你应该`android:gravity`改为`android:layout_gravity`for`checkboxStyleType1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:40:22.933

样式.xml

```
<style name="linearLayoutStyleNoBgColor">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:layout_margin">5dp</item>
    <item name="android:weightSum">1.0</item>
</style>

<style name="textFieldStyleType1WithCheckbox">
    <item name="android:layout_width">0dip</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">1</item>
    <item name="android:gravity">center_vertical</item>
</style>

<style name="checkboxStyleType1">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:gravity">right|end</item>
</style> 
```

activity_main.xml

```
<LinearLayout
    style="@style/linearLayoutStyleNoBgColor"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/useFollowupDate"
        style="@style/textFieldStyleType1WithCheckbox"
        android:text="test"
        android:layout_width="wrap_content" />

    <CheckBox
        android:id="@+id/checkFollowDate"
        style="@style/checkboxStyleType1"
        android:gravity="center_vertical"
        android:text="checkbox" />

</LinearLayout> 
```

# html - 我想从一个div的底部中心到另一个div的顶部中心画一条线？

> ID：15546188
> 
> 赞同：0
> 
> 时间：2013-03-21T11:25:01.050
> 
> 标签：html, canvas

好的，我知道！

这听起来有点奇怪（可能是因为我的英语不完美，但我希望你们能理解我到目前为止）但我想从一个 div 到另一个 div 画一条线（使用 HTML5）。但我想从 div 中找出顶部的中点或从 div 中找出底部的中点。

很确定我有很大的思维障碍......请帮助我克服这个障碍！

我怎样才能知道？

谢谢到目前为止努布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:33:55.567

因此，要为您分解它，您首先需要确定 div1-bottom-center 和 div2-top-center 的坐标。如果您使用 jQuery，那么使用[`$(divX).offset()`](http://api.jquery.com/offset/),[`$(divX).width()`](http://api.jquery.com/width/)和[`$(divX).height()`](http://api.jquery.com/height/). 然后你可以用它来正确地画线。

根据您想要完成的任务，另一种方法是为此使用现有的库，例如[jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)。

# windows - 检查输出是否正常

> ID：15546190
> 
> 赞同：0
> 
> 时间：2013-03-21T11:25:02.620
> 
> 标签：windows, for-loop, batch-file, cmd, directory

我正在通过像这样的批处理文件从 CMD 运行命令。

```
echo Step 3\. Check TNSPING
tnsping vtdbs 2>NUL
    if not errorlevel 1 set error=PASSED
    if errorlevel 1 set error=FAILED
echo Result: %error% 
```

但这只会告诉我它是否真的能够运行命令。运行此命令时，它会给出如下输出。

```
blah blah blah
blah blah blah
blah blah
blah blah
blah blah
blah blah
blah blah
OK (80 msec) 
```

所以第 8 行应该说“OK”，只要是这样，那么.. `echo RESULT: Passed` else`echo RESULT: Failed`

但不确定如何检查第 8 行是否为 ..“OK”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:56:53.670

试试这个：

```
@echo off &setlocal
set "result="
for /f %%i in ('tnsping vtdbs 2^>NUL^|more +7') do if not defined result set "result=%%i"
if "%result%" equ "OK" (set "error=PASSED") else set "error=FAILED"
echo Result: %error%
endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:38:29.240

`tnsping vtdbs`这是一个更有效的解决方案，如果输出为 <> 8 行，也可以容忍。

```
echo Step 3\. Check TNSPING
set "error=FAILED"
for /f %%I in ('tnsping vtdbs 2^>NUL') do (
    if "%%I"=="OK" (set "error=PASSED" & goto next)
)
:next
echo Result: %error% 
```

您不必检查是否`%%I`匹配的原因`OK (??ms)`是`for /f`默认为`"tokens=1"`-- 或者，换句话说，分配`%%I`给每行的第一个单词。

# javascript - Bing Maps v7 不显示导航栏

> ID：15546192
> 
> 赞同：1
> 
> 时间：2013-03-21T11:25:05.840
> 
> 标签：javascript, bing-maps

我正在使用 Bing Maps v7 Ajax 控件，但即使在设置`showDashboard:true`. 似乎只有在还设置了以下设置时才会出现这种情况：`showMapTypeSelector: false`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:25:05.840

这是因为`showMapTypeSelector`应用了一个名为`hidden`导航栏的类`div`。不幸的是，我也使用 Twitter Bootstrap，它还有一个名为的类`hidden`，当然隐藏了`div`!

用一些肮脏的 css hack 修复它，如下所示：

```
#SDKmap .hidden {
    display: block;
    visibility: visible;
} 
```

`SDKmap`地图元素 ID在哪里。

# wcf - TravelPort WCF 调用问题

> ID：15546199
> 
> 赞同：0
> 
> 时间：2013-03-21T11:25:24.480
> 
> 标签：wcf, binding, travelport-api

试图对 travelport 服务进行 wcf 调用。已添加了他们的 wsdl 文件。

问题是端点地址是“https”，当调用它时，它说 URi 模式需要 http .. 试图将绑定从 basicHttpBinding 更改为 wsHttpBinding 但它引发了另一个无法识别绑定类型的预期。

已尝试使用 http 方案使用相同的 Url，但该请求超时。

如果可以提供 TravelPort wcf 调用的任何特定教程，那将是一个很大的帮助。

示例代码如下（如果它可以提供任何帮助:)）

```
PingReq req = new PingReq();

        req.Payload = "Payload";
        req.TraceId = "abcd";
        SystemPingPortTypeClient port = new SystemPingPortTypeClient();

        PingRsp rsp = port.service(req); 
```

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:03:28.417

```
 LowFareSearchReq req = new LowFareSearchReq();
    req.TargetBranch = "{EnterBranchCode}";
    req.AuthorizedBy = "test";

    BillingPointOfSaleInfo biPOS = new BillingPointOfSaleInfo();
    biPOS.OriginApplication = "uAPI";
    req.BillingPointOfSaleInfo = biPOS;

    //from LHR to BOM
    SearchAirLeg airLeg = new SearchAirLeg();            
    Airport fromAirPort = new Airport() { Code = "LHR" };
    typeSearchLocation fromTypLoc = new typeSearchLocation(){Item=fromAirPort};
    airLeg.SearchOrigin = new typeSearchLocation[1] { fromTypLoc };
    Airport toAirPort = new Airport() { Code = "BOM" };
    typeSearchLocation toTypLoc = new typeSearchLocation() { Item = toAirPort };
    airLeg.SearchDestination = new typeSearchLocation[1] { toTypLoc };
    typeTimeSpec origDep = new typeTimeSpec() { PreferredTime = "2013-05-24" };
    airLeg.Items = new typeTimeSpec[1] { origDep };

    //from BOM to LHR
    SearchAirLeg returnAirLeg = new SearchAirLeg();
    Airport fromAirPort1 = new Airport() { Code = "BOM" };
    typeSearchLocation fromTypLoc1 = new typeSearchLocation() { Item = fromAirPort1 };
    returnAirLeg.SearchOrigin = new typeSearchLocation[1] { fromTypLoc1 };
    Airport toAirPort1 = new Airport() { Code = "LHR" };
    typeSearchLocation toTypLoc1 = new typeSearchLocation() { Item = toAirPort1 };
    returnAirLeg.SearchDestination = new typeSearchLocation[1] { toTypLoc1 };
    typeTimeSpec destDep = new typeTimeSpec() { PreferredTime = "2013-05-27" };
    returnAirLeg.Items = new typeTimeSpec[1] { destDep };

    req.Items = new object[] { airLeg, returnAirLeg };

    //modifiers
    AirSearchModifiers airSearchMod = new AirSearchModifiers()
    {
      DistanceType = typeDistance.MI,
      IncludeFlightDetails = true,
      PreferNonStop = true,
      MaxSolutions = "300",
      PreferredProviders = new Provider[1] {new Provider(){ Code = "1G" }}              
    };
    AirPricingModifiers airPriceMod = new AirPricingModifiers()
    {
      FiledCurrency = "GBP"
    };
    req.AirSearchModifiers = airSearchMod;
    req.AirPricingModifiers = airPriceMod;
    //passenger details
    SearchPassenger pass1 = new SearchPassenger() { Code = "ADT" };
    SearchPassenger pass2 = new SearchPassenger() { Code = "ADT" };

    req.SearchPassenger = new SearchPassenger[] { pass1, pass2 };

    //reponse
    LowFareSearchRsp res= new LowFareSearchRsp();

    AirLowFareSearchPortTypeClient cli = new AirLowFareSearchPortTypeClient("AirLowFareSearchPort");
    cli.ClientCredentials.UserName.UserName = "Enter User Name";
    cli.ClientCredentials.UserName.Password = "Enter Password";

    res = cli.service(req); 
```

上面的示例代码对我有用。当您捕获异常时，您可能会得到一些代码，然后您可以向 TravelPort 人员询问发生这种情况的原因。这可能很简单，例如您的凭据被锁定。

# .net - 用于轮询应用程序的 Windows 服务的替代方案

> ID：15546200
> 
> 赞同：2
> 
> 时间：2013-03-21T11:25:26.793
> 
> 标签：.net, windows-services

我有一个 C# 程序需要查询数据库表并在轮询间隔上调用 web 服务。

我知道我可以将其包装为 Windows 服务。但是我想知道是否有任何其他工具和技术可以让我按计划调用我的 exe 而无需创建服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:25.140

*   您可以使用计划任务 ( `taskschd.msc`) 来安排程序运行，这基本上是 Windows 版本的`cron`.

*   您还可以让您的程序在启动时运行并坐在托盘中，等待自己的计时器到期时睡觉。

# hibernate - Eclipse 中的 Maven 插件找不到超过 3.6.0 的休眠版本

> ID：15546207
> 
> 赞同：0
> 
> 时间：2013-03-21T11:25:44.757
> 
> 标签：hibernate, maven

当我尝试使用 eclipse pom 编辑器查找休眠 4.1.0 时，我只能找到 3.6.0 版本，我正在寻找 >4.0.0。

Hire 是我的 pom.xml 文件：

```
<modelVersion>4.0.0</modelVersion>
<groupId>dk.janth.simpel-maven-spring</groupId>
<artifactId>Simpel-maven-spring-projekt</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<name>Simpel maven spring projekt</name>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:28:51.347

将此添加为依赖项，您应该一切顺利。

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.7.Final</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:54:26.687

在查找工件的最新版本时，Eclipse 并不总是可靠的，但我认为，在您的情况下，您会查找错误的 artifactId。

大多数工件都可以在 maven Central 上找到，我们可以在其中搜索并获取 xml 片段以添加依赖项。

For hibernate: visit [search.maven.org](http://search.maven.org/), enter "hibernate-core" (not: hibernate) and do a search. At the moment I'm writing that answer, the top result is [hibernate-core, Version 4.2.0.Final](http://search.maven.org/#artifactdetails%7Corg.hibernate%7Chibernate-core%7C4.2.0.Final%7Cjar). Click on that version number (or the link here in this answer, which is the same) and you'll find a page with all dependency information ready to be copied and pasted into your pom.

# bash - Bash如何重命名保存到变量中的文件？

> ID：15546208
> 
> 赞同：1
> 
> 时间：2013-03-21T11:25:44.997
> 
> 标签：bash, copy, file-rename

我怎样才能做到这一点：

我有一个文件，`eval.txt`保存到一个变量中，我想重命名`timestamp_eval.txt`

```
filetosend=/home/cft/eval.txt
filename=$(echo $filetosend | cut -d '/' -f4) //to get only the name
DATE=$(date +%Y%m%d)
filename=${DATE}_${filename} //add timestamp to name 
```

我该如何重命名`$filetosend`？

我找到了这个解决方案：

```
DATE=(date +%Y%m%d)
mydir=$(echo $(dirname $a))
myfile=$(echo $(basename $a))
myfile=${DATE}_${myfile}
filetosend=$mydir/$myfile
cp $a $filetosend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:29:54.300

*如果您真的需要一个**变量***，请尝试这样做：

```
filetosend=/home/cft/eval.txt
cd "${filetosend%/*}"
filename="${filetosend##*/}"
DATE=$(date "+%Y%m%d")
filename="${DATE}_$filename"
mv "$filetosend" "$filename" 
```

如果*您真的不需要***使用***变量***`rename`：**

 **```
rename "s|[^/]+$|$(date +%Y%m%d)_$&|" /home/cft/eval.txt 
```

或分解为多行：

```
cd /home/cft/
rename "s/.*/$(date "+%Y%m%d")_$&/" eval.txt
rename "s|[^/]+$|$(date "+%Y%m%d")_$&|" 
```

## 笔记

阅读[这篇文章](https://stackoverflow.com/a/15468123/465183)，了解您的系统是否具备优势`rename`+ 额外说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:41:06.033

最简单的方法是：

```
mv /home/cft/eval.txt /home/cft/$(date "+%Y%m%d")_eval.txt 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-21T11:29:55.857

使用 mv 命令。“mv”是“move”的缩写。

```
mv $filetosend $filename 
```**

# sql-server - 了解 SQL Server 排序规则中的 Unicode 和代码页

> ID：15546213
> 
> 赞同：4
> 
> 时间：2013-03-21T11:25:51.293
> 
> 标签：sql-server, sql-server-2008-r2, collation

为什么所有 SQL Server 2008 R2 排序规则都与代码页相关联。所有排序规则都是 unicode 吗？

当我们的数据库被多种语言使用不同的代码页时，如何选择排序规则？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:23:07.447

CHAR 与 NCHAR（即非 Unicode 与 Unicode）定义了字符存储编码。排序规则定义...排序规则（即排序顺序和比较规则）。它们是不同的概念，尽管经常混淆。

混淆源于客户端工具使用非 Unicode 数据的整理作为*提示*来选择数据的代码页这一事实。请参阅[代码页架构](http://msdn.microsoft.com/en-us/library/ms186356(v=sql.105).aspx)。这意味着像 ADO.Net SqlClient 这样的客户端可以正确将从服务器接收到的*单字节*CHAR 数据编码为*多字节* `string`.Net 对象。列元数据将包含使用的排序规则，因此客户端将知道如何根据特定代码页解释单字节数据。

对于 Unicode (NCHAR) 列，客户端不需要根据代码页解释数据，数据本身已经是多字节的，客户端将根据 UCS-2 编码（实际使用的 Unicode SQL 服务器）。

但是，不要将此与排序规则的实际含义混淆：*比较*字符的规则。如[使用排序规则](http://msdn.microsoft.com/en-us/library/ms187582(v=sql.105).aspx)中所述：

> 说英语的人会期望字符串“Chiapas”按升序排列在“Colima”之前。但是，在墨西哥讲西班牙语的人可能希望以“Ch”开头的单词出现在以“C”开头的单词列表的末尾。排序规则规定了这些排序和比较规则。在 ORDER BY ASC 子句中，Latin_1 通用排序规则将“恰帕斯”排序在“科利马”之前，而传统_西班牙排序规则将“恰帕斯”排序在“科利马”之后。

此排序规则适用于任何数据类型（CHAR 非 Unicode 或 NCHAR Unicode）。

# haskell - 使用 mapM/sequence 是否被认为是好的做法？

> ID：15546216
> 
> 赞同：16
> 
> 时间：2013-03-21T11:25:56.587
> 
> 标签：haskell

考虑以下示例：

```
safeMapM f xs = safeMapM' xs []
    where safeMapM' []     acc = return $ reverse acc
          safeMapM' (x:xs) acc = do y <- f x
                                    safeMapM' xs (y:acc)

mapM return largelist      -- Causes stack space overflow on large lists
safeMapM return largelist  -- Seems to work fine 
```

在大型列表上使用`mapM`会导致堆栈空间溢出，而`safeMapM`似乎工作正常（使用 GHC 7.6.1 和`-O2`）。但是我无法`safeMapM`在 Haskell 标准库中找到类似的函数。

`mapM`它仍然被认为是使用（或`sequence`就此而言）的好习惯吗？
如果是这样，为什么尽管存在堆栈空间溢出的危险，但仍将其视为良好做法？
如果不是，您建议使用哪种替代方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T17:09:11.823

正如 Niklas B. 一样， 的语义`mapM`是有效右折叠的语义，并且它在比翻转版本更多的情况下成功终止。一般来说，`mapM`这更有意义，因为我们很少会想要在庞大的数据列表上制作结果生成图。更常见的是，我们想要评估这样一个*效果*列表，在这种情况下`mapM_`，和`sequence_`会丢弃结果，通常是推荐的。

编辑：换句话说，尽管问题中提出了问题，**是**的，`mapM`并且`sequence`是常用的并且通常被认为是良好的做法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T18:00:28.663

> 如果是这样，为什么尽管存在堆栈空间溢出的危险，但仍将其视为良好做法？如果不是，您建议使用哪种替代方案？

如果要在生成列表元素时对其进行处理，请使用`pipes`或`conduit`。两者都不会建立中间列表。

我会指路`pipes`，因为那是我的图书馆。我将首先`IO`从用户输入在 monad 中生成的无限数字列表开始：

```
import Control.Proxy

infiniteInts :: (Proxy p) => () -> Producer p Int IO r
infiniteInts () = runIdentityP $ forever $ do
    n <- lift readLn
    respond n 
```

现在，我想在它们生成时打印它们。这需要定义一个下游处理程序：

```
printer :: (Proxy p) => () -> Consumer p Int IO r
printer () = runIdentityP $ forever $ do
    n <- request ()
    lift $ print n 
```

现在我可以连接`Producer`和`Consumer`使用`(>->)`，并使用运行结果`runProxy`：

```
>>> runProxy $ infiniteInts >-> printer
4<Enter>
4
7<Enter>
7
... 
```

然后它将从用户那里读取`Int`s 并将它们回显到控制台，因为它们在生成时不会在内存中保存多个元素。

所以通常如果你想要一个有效的计算来生成一个元素流并立即使用它们，你不想要`mapM`. 使用适当的流媒体库。

如果你想了解更多`pipes`，那么我推荐[阅读教程](http://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-14T20:55:46.010

如果你想留在懒惰的阵营，[lazyio](http://hackage.haskell.org/package/lazyio)包可以让你懒惰地处理输入列表。代替

```
mapM f 
```

你写

```
import qualified System.IO.Lazy as LazyIO

LazyIO.run . mapM (LazyIO.interleave . f) 
```

没有堆栈溢出了。

# javascript - 自定义滚动条 - 鼠标滚轮太慢

> ID：15546217
> 
> 赞同：9
> 
> 时间：2013-03-21T11:25:57.320
> 
> 标签：javascript, jquery, scrollbar

我正在一个包含带有自定义滚动条的 div 的网站上工作。我的问题是鼠标滚轮不能正常工作，太慢了。

该站点是[http://alaaelseifi.net/](http://alaaelseifi.net/)，自定义滚动库来自[http://manos.malihu.gr/](http://manos.malihu.gr/)

脚本应该是这样的：

```
$(window).load(function() {
    $(".scroll-pane").mCustomScrollbar();
    //code that make scrolling with mouse faster
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T11:34:41.230

您可以在此处的 scoll 库文档中描述的选项中设置滚动速度：http: [//manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

我认为您正在寻找的是这样的：

```
$(".scroll-pane").mCustomScrollbar({
  mouseWheelPixels: 50 //change this to a value, that fits your needs
}) 
```

只需使用该值，直到 scolling 达到您需要的速度。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-29T14:09:16.203

我还注意到，我网站上的“缓慢”感觉是由于默认情况下滚动惯性是打开的，如果您使用以下内容，它将关闭它并导致栏不滞后尝试：

```
$(".scroll-pane").mCustomScrollbar({
    scrollInertia: 0
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T23:30:01.013

正如 Melinda 所提到的，scrollInertia 可以解决问题，但如果完全关闭，您可以调整它以使其更快，但仍然平滑。完全关闭它会使滚动变得不合我的喜好，并使它跳过了许多选项。这使得无法获得一些选择。

我发现 60ms 是一个理想的设置：

```
$(".mCustomScrollbar").mCustomScrollbar({
  scrollInertia: 60,
}); 
```

正如文档所说：

> 将滚动动量设置为动画持续时间（以毫秒为单位）。更高的值等于更大的滚动动量，这意味着更平滑/更渐进的动画。设置为 0 以禁用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-11T09:28:19.560

这对我有用。

```
scrollInertia: 0
mouseWheelPixels: 170,
autoDraggerLength:false, 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-24T05:59:19.700

这对我有用。

```
$("#scroll").mCustomScrollbar({
   mouseWheelPixels: 170,
   autoDraggerLength:false 
}); 
```

# windows - 整数原子的使用

> ID：15546220
> 
> 赞同：3
> 
> 时间：2013-03-21T11:26:06.430
> 
> 标签：windows, winapi, dde

[字符串原子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649053%28v=vs.85%29.aspx#_win32_String_Atoms)在 DDE（动态数据交换）中很有用。[整数原子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649053%28v=vs.85%29.aspx#_win32_Integer_Atoms)有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:17:59.273

使用整数和字符串原子类似，但整数原子没有引用计数，因此它们实际上从未存储在原子表中，而是直接映射到原子值。

***字符串原子**示例：Windows 类名（但它们也可能使用整数原子，请参阅 Hans Passant 的回答）*

***整数原子**示例：标准剪贴板格式*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:37:36.463

我知道的唯一用途是内置对话框类名称的原子数。MessageBox 等使用#32770。这就是你用来找到窗口的东西。还有一些其他的，我很高兴忘记了它们的编号和用法。这可以追溯到 1980 年代，即 16 位 Windows 和*极端*资源限制的时代。

[您可以在此答案](https://stackoverflow.com/a/2576220/17034)中看到使用此原子数的示例代码。

```
 // Checks if <hWnd> is a dialog
    StringBuilder sb = new StringBuilder(260);
    GetClassName(hWnd, sb, sb.Capacity);
    if (sb.ToString() != "#32770") return true; 
```

**[编辑]**
添加了一些整数原子类：

```
#ifndef POPUPMENU_CLASS_NAME
#define POPUPMENU_CLASS_NAME "#32768"  /* PopupMenu */
#endif
#ifndef DESKTOP_CLASS_NAME
#define DESKTOP_CLASS_NAME   "#32769"  /* Desktop */
#endif
#ifndef DIALOG_CLASS_NAME
#define DIALOG_CLASS_NAME    "#32770"  /* Dialog */
#endif
#ifndef WINSWITCH_CLASS_NAME
#define WINSWITCH_CLASS_NAME "#32771"  /* WinSwitch */
#endif
#ifndef ICONTITLE_CLASS_NAME
#define ICONTITLE_CLASS_NAME "#32772"  /* IconTitle */
#endif 
```

# android - 接收活动结束时发送的短信的等待意图

> ID：15546230
> 
> 赞同：0
> 
> 时间：2013-03-21T11:26:30.823
> 
> 标签：android, android-intent, broadcastreceiver

问题：

我注册了一个 BroadcastReceiver 以查看消息是否已送达。但是当用户发送消息时，我必须关闭当前活动，因此未收到传递的报告。

有人建议做一个服务？

有没有人成功完成它，或者有参考说明如何做到这一点的帖子？

# magento - Ebizmarts/MageMonkey/Block/Lists.php 在哪里使用？

> ID：15546236
> 
> 赞同：1
> 
> 时间：2013-03-21T11:26:57.403
> 
> 标签：magento, mailchimp

magento magemonkey 插件中有一个文件，在这里：

```
app/code/community/Ebizmarts/MageMonkey/Block/Lists.php 
```

它是干什么用的？它在哪里使用？

我找不到任何证据表明它被包含在任何地方，但它调用了一些我需要修改的函数，所以我需要知道如何访问它进行测试。

那么，它在任何地方都可以使用吗？我如何触发它？

**或者**

我可以安全地删除这个文件而不影响任何东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:12:28.520

如果您知道 MVC 框架的 3 个组件，模型、视图和控制器，那么上面是一个块文件，当与 .phtml 模板文件组合时，它等同于 MVC 的视图部分。

在 Magento 中，视图是通过每个模块中的布局 XML 文件实例化的，这些文件定义了块和模板，这些可以通过布局句柄特定于页面。为了确定上述块是否正在使用中，您需要查找任何布局文件中是否有对该块的任何引用，我猜该模块定义的任何布局文件中都会有引用。

我要补充一点，我**绝不**建议只删除任何模块中的文件，除非它是您创建的模块并且您知道删除它时在做什么。这样做的原因是 Magento 是一个基于配置的框架，因此每个资源都在某个地方定义。出于这个原因，如果您开始删除文件而没有首先将该资源定义为配置中不再需要，那么您*将破坏某些内容。*

按照你上面所说的，听起来你需要更多地了解 Magento 系统作为一个整体，特别是在继续之前重写。不幸的是，这里没有足够的空间来解释从基础到能够在这里构建和更改您自己的模块的所有方式——我们真的会整天都在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:41:42.820

该块用于从 MailChimp 填充不同的列表，您可以在模块文件中看到它，例如**class Ebizmarts_MageMonkey_Block_Customer_Account_Lists extends Ebizmarts_MageMonkey_Block_Lists**

请问你为什么要删除它？它会导致任何问题吗？

谢谢！

# c++ - 逃避包括头文件到 .h 文件

> ID：15546244
> 
> 赞同：1
> 
> 时间：2013-03-21T11:27:32.763
> 
> 标签：c++, prototype, header-files

我被告知不要在 .header 中包含太多类，如果我可以避免的话，而是将它们包含在 .cpp 中。为此，他们告诉我创建原型类，例如：

```
class abc; 
```

代替：

```
include "abc.h" 
```

但这只是为了以防 abc 类没有被用作属性或返回值。如果是参数，我可以使用原型……这是为什么呢？

另外，为什么在 .h 文件中包含如此多的标头如此糟糕？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:29:48.323

当您前向声明一个类时：

```
class abc; 
```

is 变成了[不完整的类型](http://msdn.microsoft.com/en-us/library/200xfxh6.aspx)，你只能用不完整的类型做某些事情。例如，任何需要知道类成员的知识，甚至需要知道它的大小的东西，都需要一个完整的声明。

至于包含来自其他标头的标头，我可以想到两个反对的论点：

1.  改进的构建时间。
2.  更少的依赖。

第一个可能相关，也可能不相关，具体取决于项目的大小、编译器、硬件等。第二个也有问题，因为它并没有真正减少类之间的依赖关系。

*必须*使用前向声明的一种情况是，在不同标头中定义的两个类之间存在循环依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:31:22.360

> 如果是参数，我可以使用原型……这是为什么呢？

只要您不需要访问已声明类的内部结构，就可以使用前向声明，例如，当您声明指针、引用或将其作为参数传递时。你不能使用前向声明来继承一个类，调用它的任何成员函数或访问它的成员，或者声明非指针/引用类型的成员：这是因为编译器必须知道类的内部结构才能执行上述任何操作。

> 为什么在 .h 文件中包含如此多的标头如此糟糕？

这本身并不是普遍“坏”的，但是对于许多编译器，它可能会减慢编译过程，因此通常会尽量减少包含内容。现代编译器具有有用的功能（例如预编译的头文件）来最大限度地减少影响，因此在您可以使用前向声明的地方变得更像是一种审美选择而不是实际问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:30:13.243

```
class abc; 
```

当您转发声明一个类型时，编译器会将其视为**Incomeplete 类型**，并且它没有任何关于该类型的内存布局/组成的信息。所以你不能要求编译器执行任何需要它知道这些信息的操作。

使用不完整类型，您不能：

*   用它来声明一个成员。
*   使用此类型定义函数或方法。

但是使用不完整类型，您可以：

*   将成员声明为指向不完整类型的指针。
*   声明接受/返回不完整类型的函数或方法。
*   定义接受/返回指向不完整类型的指针的函数或方法（但不使用其成员）。

> **为什么在 .h 文件中包含如此多的标头如此糟糕？**

这很糟糕，因为：

*   包含标题只是将标题的内容复制粘贴到当前翻译单元。这会增加编译时间并构建依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:31:05.310

包含许多标题是不好的，因为如果您更改其中一个，您还必须编译您的文件，这听起来可能不是问题，但对于大型程序，编译+链接可能需要很多时间（有时是几个小时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:41:01.430

编译器需要知道的只是名称——而不是组合——直到它需要生成代码。

所以前向声明是要走的路——因为它不需要加载和解析。

顺便说一句 - makefile 不必开始重新编译东西会有所帮助。

# java - Java Swing：渲染组件，包括。LaF 转换为 BufferedImage

> ID：15546248
> 
> 赞同：4
> 
> 时间：2013-03-21T11:27:50.167
> 
> 标签：java, swing

我正在尝试`BufferedImage`使用以下代码将表格标题单元格呈现为：

```
Component component = table.getTableHeader().getDefaultRenderer().
        getTableCellRendererComponent( table, value, selected, focused, 0, 0 );

component.setBounds( 0, 0, 
                    table.getColumnModel().getColumn( 0 ).getWidth(), 
                    table.getRowHeight() );

BufferedImage img = new BufferedImage( component.getWidth(), 
                                       component.getHeight(),
                                       BufferedImage.TYPE_INT_ARGB );
Graphics g = img.getGraphics();
g.setColor( component.getForeground() );
g.setFont( component.getFont() );
component.paint( g ); 
```

此代码在`TableCellRenderer#getTableCellRendererComponent`方法内运行。
该组件被渲染到 BufferedImage 中，但之前未应用 Look-and-Feel。LaF 已在应用程序启动时设置为系统默认值。

为了渲染组件的应用 LaF，我需要做什么？

**编辑：**
*@Guillaume Polet：*
我运行你的代码，我得到了相同的结果，但是一旦我渲染了整个表格，我会看到以下内容：
在 Linux 上：
![在此处输入图像描述](../Images/042a7c8d2bef811168d214faec039d05.png)
在 Windows 上：
![在此处输入图像描述](../Images/549d9bb557219329b21a52ee30def118.png)
在 Linux 上，代码似乎可以工作，而在 Windows 中它省略了 LaF。
在 Windows 上，我期望类似：
![在此处输入图像描述](../Images/a5755b0091dde072b38466b1ca12aeab.png)

我的代码：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.util.Vector;

import javax.swing.CellRendererPane;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

class TestPrint {

public static void main( String[] args ) throws ClassNotFoundException, InstantiationException,
        IllegalAccessException, UnsupportedLookAndFeelException {
    UIManager.setLookAndFeel( UIManager.getSystemLookAndFeelClassName() );
    SwingUtilities.invokeLater( new Runnable() {
        @Override
        public void run() {
            new TestPrint().run();
        }
    } );
}

protected void run() {
    JTable table = new JTable( createData() );
    int column = 1;

    TableCellRenderer renderer = table.getTableHeader().getDefaultRenderer();

    Component component = renderer.getTableCellRendererComponent( table, table.getColumnName( column ), false,
            false, -1, column );

    component.setBounds( 0, 0, table.getColumnModel().getColumn( 0 ).getWidth(), table.getRowHeight() );

    BufferedImage img = new BufferedImage( component.getWidth(), component.getHeight(), BufferedImage.TYPE_INT_ARGB );
    Graphics g = img.getGraphics();
    g.setClip( 0, 0, component.getWidth(), component.getHeight() );
    g.setColor( component.getForeground() );
    g.setFont( component.getFont() );

    CellRendererPane cellRendererPane = new CellRendererPane();
    cellRendererPane.paintComponent( g, component, table, 0, 0, component.getWidth(), component.getHeight() );

    // SwingUtilities.paintComponent( g, component, table,
    // new Rectangle( 0, 0, component.getWidth(), component.getHeight() ) );

    // component.paint( g );

    showTable( table );
    showImage( img );
}

private void showImage( BufferedImage img ) {
    JOptionPane.showMessageDialog( null, new JLabel( new ImageIcon( img ) ), "Test",
            JOptionPane.INFORMATION_MESSAGE, null );
}

private void showTable( JTable table ) {
    JScrollPane scrollPane = new JScrollPane();
    scrollPane.setViewportView( table );

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    frame.setLayout( new BorderLayout() );
    frame.add( scrollPane, BorderLayout.CENTER );
    frame.setSize( 400, 300 );
    frame.setVisible( true );
}

private DefaultTableModel createData() {
    DefaultTableModel data = new DefaultTableModel( 0, 6 );

    for ( int i = 0; i < 30; i++ ) {
        Vector v = new Vector();

        for ( int k = 0; k < 6; k++ ) {
            v.add( new Float( k / (float) i ) );
        }

        data.addRow( v );
    }
    return data;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:45:09.480

这对我来说似乎很好用（尽管系统 L&F 和默认系统之间的区别并不明显）

示例（上面是原生 L&F，下面是 Metal）：

![在此处输入图像描述](../Images/383bca927eabf4d69593ce5b63082f61.png)

以及创建这些的代码（只需注释 main 的第一行即可查看默认的 L&F）

```
import java.awt.Component;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.util.Arrays;
import java.util.Vector;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

class TestPrint {

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestPrint().run();
            }
        });
    }

    protected void run() {
        JTable table = new JTable(new Vector<Vector<Object>>(), new Vector<String>(Arrays.asList("Hello", "World")));
        int column = 1;
        Component component = table.getTableHeader().getDefaultRenderer()
                .getTableCellRendererComponent(table, table.getColumnName(column), false, false, -1, column);
        component.setBounds(0, 0, table.getColumnModel().getColumn(0).getWidth(), table.getRowHeight());
        BufferedImage img = new BufferedImage(component.getWidth(), component.getHeight(), BufferedImage.TYPE_INT_ARGB);
        Graphics g = img.getGraphics();
        g.setColor(component.getForeground());
        g.setFont(component.getFont());
        component.paint(g);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(img)), "Test", JOptionPane.INFORMATION_MESSAGE, null);
        System.exit(0);
    }
} 
```

编辑：确实 Windows“皮肤”没有正确绘制。我不确定为什么它不直接绘制（可能是因为渲染器不是“实时”组件）。然而，一个简单的技巧也是打印它，是打印整个表头，但使用一个 Graphics ，它被转换为我们想要的列标题并裁剪为列标题的大小：

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import java.util.Arrays;
import java.util.Vector;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

class TestPrint {

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestPrint().run();
            }
        });
    }

    protected void run() {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTable table = new JTable(new Vector<Vector<Object>>(), new Vector<String>(Arrays.asList("Hello", "World")));
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setVisible(true);
        int column = 1;
        Rectangle headerRect = table.getTableHeader().getHeaderRect(column);
        BufferedImage img = new BufferedImage(headerRect.width, headerRect.height, BufferedImage.TYPE_INT_ARGB);
        Graphics g = img.getGraphics();
        g.translate(-headerRect.width, 0);
        table.getTableHeader().print(g);
        frame.add(new JLabel(new ImageIcon(img)), BorderLayout.SOUTH);
        frame.pack();
    }
} 
```

# php - 在 PHP 中使用冒号属性解析 XML

> ID：15546261
> 
> 赞同：3
> 
> 时间：2013-03-21T11:28:25.290
> 
> 标签：php, xml, parsing, simplexml

我将具有以下 XML 结构：

```
<entry>
    <id im:id="595831580">blabla</id>
</entry> 
```

现在我想解析 id 595831580。

我试过了：

```
$idAtt = $xml->entry->id;
$id = $idAtt->attributes();
$id2 = $id['im:id']; 
```

但这不起作用:(

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:48:03.463

好吧。

您不能在 的方法中使用命名空间`offsetGet`，[`SimpleXMLElement`](http://www.php.net/manual/en/class.simplexmlelement.php)但可以在[`attributes`](http://www.php.net/manual/en/simplexmlelement.attributes.php)方法中使用：

```
echo $xml->entry->id->attributes("im",TRUE)->id; 
```

查看[此评论](http://www.php.net/manual/en/simplexmlelement.attributes.php#108029)以获取更多演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:34:40.363

不确定，但可能是这样的

```
$attr = $xml->id[0]->attributes();
echo $attr['im:id']; 
```

# vb.net - 在文本框中输入序列号，如果该编号已被使用，则显示一个 msgbox

> ID：15546263
> 
> 赞同：0
> 
> 时间：2013-03-21T11:28:36.837
> 
> 标签：vb.net, visual-studio-2010

我有一个文本框，用户必须在其中输入序列号如果用户输入的数字已经存在于名为“客户”的 MySql 表中，我希望系统显示一个消息框，告诉“数字已存在”。我如何在 vb 2010 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:33:24.123

从您的代码中调用该过程并将输出放入`DataTable`. 然后，您可以遍历要与用户输入进行比较的值，如果输入的值与`DataTable`. `IF`然后，您可能希望在使用匹配标志作为语句的语句中返回相关消息。

现在您已经掌握了基本步骤，我很确定您可以在 Google 上找到如何完成上述所有操作。恐怕有人敲门并张贴作为答案太多了。

# c++ - 如何在 QT Creator 中传递对插槽的引用

> ID：15546265
> 
> 赞同：0
> 
> 时间：2013-03-21T11:28:42.120
> 
> 标签：c++, qt

我在项目中有两种形式：*mainwindow.ui*和*mydialog.ui*。
每个都有 .hpp 和 cpp 文件。
*mainwindow.cpp*文件有`QList`对象。
我按下主窗口窗体上的按钮，*出现*模态*mydialog*窗体。 然后我按下*mydialog*表单上的按钮并运行。 **`on_btnCreate_clicked()`**

 **是否可以访问插槽中的`QList`对象？`on_btnCreate_clicked()`

如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:44:34.133

```
 void MainWindow::on_btnCreate_clicked() {
     MyDialog dialog;
     dialog.setList(m_qList); // add member setList to your MyDialog class
     dialog.exec();
 } 
```**

# email - Joomla 邮件进入垃圾邮件文件夹：发送 HTML 电子邮件时如何添加文本/纯文本？

> ID：15546270
> 
> 赞同：2
> 
> 时间：2013-03-21T11:28:51.697
> 
> 标签：email, joomla, registration, spam, spam-prevention

运行 Joomla 2.5.8 网站，所有服务器生成的电子邮件都被标记为垃圾邮件（尽管只有 gmail！）。

我在伟大的资源[http://www.mail-tester.com](http://www.mail-tester.com)上进行了测试，我得到的唯一负面分数是（spamassassin 测试）：

```
-1.105      MIME_HTML_ONLY      Message only has text/html MIME parts
You should also include a text version of your message (text/plain) 
```

我深入研究了代码，发现 library/joomla/mail/mail.php 没有为 Text 设置等效的 AltBody；我试过：

```
public function setBody($content)
{
    [...]
    if (empty($this->AltBody))
        $this->AltBody =JMailHelper::cleanText( strip_tags( $content)); 
```

它有效！（邮件测试仪上的 10/10）。但它肯定是丑陋的。

我的问题是：

*   我们应该认为这是一个 Joomla！错误并归档？
*   有没有更干净的解决方案，而不需要侵入核心文件，也许是一些配置？

否则，我将编写一个插件来执行覆盖：这非常重要，因为我们正在失去 20% 的客户，他们似乎无法在 gmail 中找到垃圾邮件文件夹！！！，而且我真的不喜欢核心黑客30 个站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:27:34.213

绝对是一个可以通过 CMS 提交的错误。系统应该为您处理它。以下是如何开始提交错误：[https ://github.com/joomla/joomla-cms/blob/master/CONTRIBUTING.md](https://github.com/joomla/joomla-cms/blob/master/CONTRIBUTING.md)

此外，您可以编写一个插件来为您处理他的覆盖，而不是像您所说的那样破解核心文件。我整理了一个基础插件，允许您在此处根据需要覆盖核心类：[https ://gist.github.com/dongilbert/323​​7387](https://gist.github.com/dongilbert/3237387)

如您所见，那里没有什么太复杂的事情。我们首先确保我们在 Joomla 中，否则退出。然后按照 Joomla 命名约定定义类，并将我们的配置文件包含在类结构中。配置文件是类注册到自动加载器的地方。

在配置文件中，我们定义了 OVERRIDES 路径，然后开始向 JLoader 注册类。我喜欢让事情井井有条，所以我的覆盖目录反映了 joomla 根目录的结构，只包含我想要覆盖的类的路径。这意味着如果我想覆盖 JFormField，我会有这样的结构（包括覆盖目录）：

```
覆盖/库/joomla/form/field.php
```

然后在 config.php 我会添加：

```
JLoader::register('JFormField', OVERRIDES.'/libraries/joomla/form/field.php', true);
```

您还可以使用它来覆盖核心组件类。我用它来覆盖 com_media 中的视图类，如下所示：

```
覆盖/component/com_media/view/imageslist/view.html.php
```

然后当然将其添加到配置中：

```
JLoader::register('MediaViewImagesList', OVERRIDES.'/components/com_media/view/imageslist/view.html.php', true);
```

您可以从上面的 gist 链接下载插件。它已准备好安装到您的 Joomla 站点中。先上传，然后在插件目录下添加overrides目录。如果要先添加所有文件再上传，请务必将以下内容添加到 overrides.xml 文件中。

```
<folder>覆盖</folder>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-17T19:19:45.567

谢谢你！我在 Joomla 3 中注意到了同样的问题。

无论如何，我用一个简单的方法解决了它

```
$mailer = JFactory::getMailer();
(...)
$mailer->setBody($messagebody);
$mailer->AltBody =JMailHelper::cleanText( strip_tags( $messagebody)); 
```

无需编辑源代码，我也不认为这应该被报告为错误（应该能够设置 AltBody，因为它更适合） - 但如果能正确记录它会很好，或者可能有一个 setAltBody() 方法.

# math - SVG 矩阵到旋转度数

> ID：15546273
> 
> 赞同：2
> 
> 时间：2013-03-21T11:28:55.917
> 
> 标签：math, matrix, svg, lua, coronasdk

我正在从具有以下格式的矩阵的 SVG 文件中读取矩形的位置和旋转：

```
<rect transform="matrix(1.02414 -0.133308 0.122628 0.942091 190.767 780.999)" width="122" height="20"/> 
```

现在我正在尝试将这些值解析为 Lua 以[使用 Corona 和这样的物理绘图](http://forums.coronalabs.com/topic/32894-looking-for-editor-or-script-to-place-rotate-sprites-on-screen-then-export-data/?p=170554)，但它们部分出现错误，并且在我目前的半猜测方法中也经常是 NAN。**我需要做什么才能将上述矩阵转换为适当的 Lua 旋转度数？**

到目前为止我所拥有的如下（值数组是按 SVG 顺序排列的矩阵值）。谢谢！

```
local x = values[5]; local y = values[6]
local rotation = math.acos(values[1])
if values[2] < 0 then rotation = -rotation end
rotation = math.floor( math.deg(rotation) )
rotation = rotation % 360

app.spritesHandler:createBar( math.floor(x), math.floor(y), rotation ) 
```

![在此处输入图像描述](../Images/04354936789aca63e1c3ab9e828631c4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:01:38.373

首先，我认为您需要索引从 0 到 5，而不是从 1 到 6。

根据[规范](http://www.w3.org/TR/SVG/coords.html#InterfaceSVGMatrix)，旋转矩阵为：

```
a  c  e
b  d  f
0  0  1 
```

其中 af 是矩阵列表中的 6 个数字。

我们还发现 a `rotate(angle,cx,cy)`around`cx,cy`等价于

1.  翻译(cx,cy)
2.  旋转（角度）
3.  翻译(-cx,-cy)

这将是：

```
|1 0 cx|  |cos(t) -sin(t) 0|  |1 0 -cx|
|0 1 cy|  |sin(t)  cos(t) 0|  |0 1 -cy|
|0 0 1 |  |  0       0    1|  |0 0  1 |

  |cos(t)   -sin(t)  cx|  |1 0 -cx|
= |sin(t)    cos(t)  cy|  |0 1 -cy|
  |   0        0      1|  |0 0  1 |

  |cos(t)   -sin(t)  (-cx cos(t) + cy sin(t) + cx) |
= |sin(t)    cos(t)  (-cx sin(t) - cy cos(t) + cy) |
  |  0         0              1                    | 
```

所以这表明角度信息在系数 a、b、c 和 d 中完全独立可用。如果唯一应用的是这个矩阵，那么 a 和 d 应该匹配，并且 b 和 c 应该只是相反的符号。

但是，查看您的数字列表，它们不是，所以我想知道是否还应用了其他一些转换？正如评论者指出的那样，数字高于 1，因此不是对角度进行简单三角操作的结果。

一种可能性是也有缩放。该矩阵是：

```
| sx 0  0|
|  0 sy 0| 
|  0  0 1| 
```

所以如果先应用，然后旋转，我们会得到：

```
| sx 0  0| |cos(t)   -sin(t)  (-cx cos(t) + cy sin(t) + cx) |
|  0 sy 0| |sin(t)    cos(t)  (-cx sin(t) - cy cos(t) + cy) |
|  0  0 1| |  0         0              1                    |

  |sx cos(t)   -sx sin(t)   sx (-cx cos(t) + cy sin(t) + cx) |
= |sy sin(t)    sy cos(t)   sy (-cx sin(t) - cy cos(t) + cy) |
  |  0               0                  1                    | 
```

从那个矩阵：

```
a/c = sx cos(t) / (-sx sin(t))
    = - cos(t) / sin(t)
    = 1/tan(t)
tan(t) = c/a

tan(t) = 0.122628/1.02414
       = 0.119738
    t  = 6.82794 degrees. 
```

从图像上看，我认为这看起来是正确的。

因此，既然我们知道`t`，我们可以计算出 sx 和 sy：

```
a = sx cos(t) 
sx = a/cos(t) = 1.0315 
```

和西：

```
d = sy cos(t)
sy = d/cos(t) = 0.94882 
```

然后，使用我们已经获得的值，获取`cx`并找到旋转中心只是进一步代入上述 e 和 f 的方程。`cy`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:33:29.867

它似乎是拉伸与旋转相结合，如`v[4]/v[1] == -v[3]/v[2]`.
所以，旋转可以这样计算：

```
local str = '<rect transform="matrix(1.02414 -0.133308 0.122628 0.942091 190.767 780.999)" width="122" height="20"/>'
local v = {}
str:match'matrix(%b())':gsub('[%d.-]+', function(d) v[#v+1] = tonumber(d) end)
local x, y = unpack(v, 5)
local rotation = math.floor(math.deg(math.atan2(v[3], v[4]))) % 360 
```

# css - GWT：我可以创建一个依赖于注入到 Widget 中的图像的样式吗？

> ID：15546285
> 
> 赞同：0
> 
> 时间：2013-03-21T11:29:26.420
> 
> 标签：css, gwt

我创建了一个 GWT 小部件，它是按钮。按钮有两种状态：向上和向下。我想根据按钮的状态更改按钮顶部的图像（图标）。

我认为最好的方法是为两种按钮状态创建单独的样式：

```
.buttonStateDown {
   color: red;
   background: ... here should be icon ImageResource. how to specify it? ...
}

.buttonStateUp {
   color: black;
   background: ... here should be icon ImageResource. how to specify it? ...
} 
```

但我不知道我应该如何指定这些类的背景，它们是我的按钮的图标？

我的按钮可以有几个实例，带有不同的图标。因此，我无法将图像资源硬编码为这两种样式。我应该在创建按钮时注入它们。实际上，我可以通过构造函数或设置器注入 ImageResources。但问题是：我怎样才能将这些资源传递给我上面提到的样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:41:54.443

请纠正我的天气我写的或错误的，如果你看起来像在 Button Mousedown 处理程序上，你将其状态设置为向下，而 MouseUp 处理程序你将其状态设置为向上，那么我建议你在 gwt 中有 PushButton，你可以使用前：

```
PushButton pushBtn = new PushButton();
pushBtn.getUpFace().setImage(new Image(GWT.getModuleBaseURL() + "/images/1.png"));
pushBtn.getDownFace().setImage(new Image(GWT.getModuleBaseURL() + "/images/2.png")); 
```

现在，当您按下按钮时，它会显示 2.png。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:41:54.350

我怀疑您需要 GWT [PushButton](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PushButton.html)。

不要创建任何自定义按钮并创建。并`PushButton`使用构造函数

```
PushButton(Image upImage, Image downImage, ClickHandler handler); 
```

# ios - Google Analytics：关于部署的几个问题

> ID：15546286
> 
> 赞同：2
> 
> 时间：2013-03-21T11:29:27.200
> 
> 标签：ios, google-analytics

我有几个关于部署 GA 的问题。

1.  我应该在哪里添加`[tracker sendView:@"View Name"]`？（我的假设`-(void)loadView`：）
2.  我如何记录会话？（仅通过发送自定义事件？）
3.  我应该使用无处不在的继承`GAIViewController`吗？（这还不够好，看起来很丑）
4.  如果我使用`[tracker sendView:@"View Name"]`，会发生什么？（我需要重新发送视图吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T02:11:20.637

1.  我建议添加`[tracker sendView:@"View Name"]`到`-viewWillAppear`. 当应用程序即将向用户显示视图时，您将收到事件，而不仅仅是加载时间。
2.  会话由 GAI 自动记录。如果默认情况下在不到 30 分钟内收到两次点击，则称它们属于一个会话。此外，正如您所提到的，您可以手动创建会话。
3.  是的，要么继承自`GAIViewController`，要么`-sendView`放入每个控制器类的代码中。另一种方法是使用[姿势](https://stackoverflow.com/questions/211616/hidden-features-of-objective-c)（参见第二个答案），并将`GAIViewController`姿势设置为`UIViewController`. 我不太确定它是否有效，但似乎适合您的问题。
4.  “我需要重新发送视图吗？”是什么意思？每次您希望 GAI 记录该用户已进入某个视图的事实时，您调用`-sendView`. Tracker 会将该信息发送给 Google，您将获得诸如按会话转换到该视图的平均次数或当前正在观看该视图的用户数等信息。

此外，我发现 Flurry 比 GAI 更加用户友好。请考虑创建自己的 Tracker 类，它将发送 GAI 和 Flury 信息。

# operating-system - 谁决定页表和页面大小？操作系统还是 MMU？

> ID：15546287
> 
> 赞同：1
> 
> 时间：2013-03-21T11:29:27.810
> 
> 标签：operating-system, mmu

随着物理内存容量的变化页表的大小也在变化，随着进程数的变化页表大小的变化。究竟是谁决定的？操作系统还是 MMU？如果是操作系统，LINUX 和 Windows 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:41:03.570

页表大小对于 CPU 操作模式是固定的。操作系统无法修改它。一些处理器允许多个页面大小，操作系统可以决定使用哪一个。

# javascript - 使用javascript从日期时间中提取时间

> ID：15546292
> 
> 赞同：32
> 
> 时间：2013-03-21T11:29:36.217
> 
> 标签：javascript

如何从日期时间格式中提取时间。

我的日期时间格式如下。

```
var datetime =2000-01-01 01:00:00 UTC; 
```

我只想得到`01.00`时间`01`

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-03-05T16:05:55.083

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)

> Date.prototype.toLocaleTimeString() 根据系统设置返回一个字符串，该字符串具有该日期时间部分的位置敏感表示。

```
var time = datetime.toLocaleTimeString(); 
```

更新：

> 新的语言环境和选项参数让应用程序指定应该使用其格式约定的语言并自定义函数的行为。在忽略语言环境和选项参数的旧实现中，使用的语言环境和返回的字符串形式完全取决于实现。

```
// Depending on timezone, your results will vary
var event = new Date('August 19, 1975 23:15:30 GMT+00:00');

console.log(event.toLocaleTimeString('en-US'));
// expected output: 1:15:30 AM

console.log(event.toLocaleTimeString('it-IT'));
// expected output: 01:15:30 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-21T11:36:41.643

这些方法怎么样

[新日期().getHours()](http://www.w3schools.com/jsref/jsref_gethours.asp)

[新日期().getMinutes()](http://www.w3schools.com/jsref/jsref_getminutes.asp)

例如：

```
 var d = new Date();
 var n = d.getHours(); 
```

***已编辑***

根据世界时返回小时：

[新日期().getUTCHours()](http://www.w3schools.com/jsref/jsref_getutchours.asp)

例子：

```
var d = new Date();
var n = d.getUTCHours(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-21T11:40:23.503

作为替代方案，如果您想从字符串中获取时间 -

```
var datetime ="2000-01-01 01:00:00 UTC";
var myTime = datetime.substr(11, 2);
alert(myTime) //01 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-11T17:28:36.170

with the [moment.j](http://momentjs.com)s library it works in this way:

```
var result = moment().format('hh');
alert(result);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-21T11:41:53.280

```
var datetime = ("2000-01-01 01:00:00 UTC");
var d1 = new Date(datetime);
var minute = d1.getUTCMinutes();
var hour = d1.getUTCHours();
if(minute > 0)  
     alert(hour+"."+minute);
else
     alert(hour); 
```

[演示](http://jsfiddle.net/4ZL8t/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-02T18:20:20.910

```
var date1 = new Date(1945,10,20, 17,30)
var date2 = new Date(1970,1,8, 12,00)

console.log(date1.getHours() - 8 + (date1.getMinutes()/60))

console.log(date2.getHours() - 8 + (date2.getMinutes()/60)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-21T11:34:31.953

使用以下代码：

```
var datetime = "2000-01-01 01:00:00 UTC";

var dt = new Date(datetime);
var hr = dt.getUTCHours();
if(hr > 12) {
   hr -= 12;
}
alert(hr); 
```

[也参考这个链接。](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-21T11:40:54.420

假设你有一个[`Date`像](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

```
var datetime = new Date("2000-01-01 01:00:00 UTC"); // might not parse correctly in every engine
// or
var datetime = new Date(Date.UTC(2000, 0, 1, 1, 0, 0)); 
```

然后使用[`getUTCHours`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCHours)：

```
datetime.getUTCHours(); // 1 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-26T14:27:48.370

我已经做了！它看起来像这样：

```
console.log(new Date().toLocaleTimeString() + " " + new Date().getSeconds() + " seconds"); 
```

# android - 如何在android中的画廊onitemclick中设置突出显示项目

> ID：15546295
> 
> 赞同：1
> 
> 时间：2013-03-21T11:29:45.733
> 
> 标签：android

我想在 itemclick 时突出显示画廊中的选定项目。

我的画廊 getview 模块

```
@Override
        public View getView(int position, View convertView, ViewGroup arg2) {
            // TODO Auto-generated method stub

            if(convertView==null){

                holder=new ViewHolder();
                convertView=inflate.inflate(R.layout.customfiltergallery, null);
                holder.image=(ImageView) convertView.findViewById(R.id.glview);
                holder.text=(TextView) convertView.findViewById(R.id.gltext);

                //holder.image.setLayoutParams(new Gallery.LayoutParams(100, 100));  
                holder.image.setScaleType(ImageView.ScaleType.FIT_CENTER);

                holder.image.setPadding(1,1,1,1);
                //holder.text.setPadding(10, 10, 10, 10);
                //holder.image.setBackgroundColor(Color.BLACK);

                convertView.setTag(holder);
            }

            else
            {
                holder=(ViewHolder) convertView.getTag();
            }

            holder.image.setImageResource(mImageIds[position]);

            return convertView;

        } 
```

我想突出显示选定的画廊项目。当我将点击监听器`imageview`放在里面时`Getview()`，应用程序变慢了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:42:14.593

如果您使用的是[android.widget.Gallery](http://developer.android.com/reference/android/widget/Gallery.html)（在 api 16 中已弃用），您只需要将 setOnItemClickListener 设置为您的画廊对象。

```
android.widget.Gallery gallery = (android.widget.Gallery) findViewById(R.id.your_gallery);

    gallery.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        // Here you should hightlight v object as you want
        // And save item id to dehightlight previous selected item
        // Dehighlight previous selected item if it is not null
    }
}); 
```

我会那样做

# iphone - 如果 NSMutableArray 用其他 NSMutableArray 初始化，如何更新它

> ID：15546305
> 
> 赞同：0
> 
> 时间：2013-03-21T11:30:07.157
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsmutablearray

我们的应用程序中有地址簿功能，联系人存储在 NSMutableArray 中。一世

有一个单独的类，它从外部访问联系人，所以我已经初始化为

在新班级下面...

```
self.newListdata = [address_book_window listData]; 
```

现在我的新班级能够使用 newListdata 访问所有联系人，联系人数量也

匹配。在一种情况下，如果在运行时从通讯簿中删除了任何联系人，则新建

类 newListdata 也需要更新，但它并没有像我想的那样更新。计数是

也不更新。我做错什么了吗，我需要手动删除联系人吗？

newListdata 也是。为什么它与我所指的地址簿联系人不同步

通讯录列表数据。我一直在学习目标C，所以如果有人可以提供帮助，那就是

有用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:41:10.970

如果您有 2 个 NSMutableArray，它们对相同的对象有强引用，但它们是 2 个唯一对象（它们是 2 个 MutableArray），例如，当您创建一个`NSMutableArray arrayWithArray:`

如果您有 1 个数组，并且当您删除或添加对象时有 2 个对它的引用，它是一个对象，因此您使用哪个引用来访问它并不重要，正如您提到的那样，它将处于“同步”状态（在同步不正确，因为实际上它们是 1 个单个对象）

在您的情况下， listData 可能会返回一个包含对相同对象的引用的新数组，在这种情况下，当您从一个数组中删除一个对象时，第二个数组仍将保留它（该对象将不会被释放）并且 2 个数组将与众不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:42:16.903

比较 newListdata 和`[address_book_window listData]`是否是同一个指针（同一个对象）。

```
printf("compare %f and %f", newlistdata, [address_book_window listData]) 
```

它们应该是相同的地址存储。

注意：由于我不知道您是如何实现代码的，由于 listData 被封装，因此 address_book_window 不保证 listData 将始终位于相同的地址存储中（如果您使用新的列表数据为例）。所以 newListData 可能会指向一个悬空指针。

跟踪此类对象的最佳方法是通过观察者模式，或者如果可以的话，使用 KVO。因为他们很长解释，谷歌它;）

# java - 将 Java 与 Ruby 一起使用时出现 java.lang.NullPointerException

> ID：15546310
> 
> 赞同：2
> 
> 时间：2013-03-21T11:30:19.803
> 
> 标签：java, ruby, nullpointerexception, jruby

我正在尝试在 java 中调用 ruby​​ 函数。但是我`NullPointerException`在运行程序时得到了一个。
这是我的java代码

```
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Reader;
import javax.script.Invocable;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import java.io.InputStream;

public class MyProgram
{

public static void main(String[] args) throws IOException, NoSuchMethodException 
    {
        try
        {
            ScriptEngineManager mgr = new ScriptEngineManager();
            ScriptEngine rbEngine = mgr.getEngineByExtension("rb");

            InputStream is = ClassLoader.getSystemResourceAsStream("src/myruby.rb");
            Reader reader = new InputStreamReader(is);
            rbEngine.eval(reader);
            Invocable invocableEngine = (Invocable)rbEngine;

            if (invocableEngine != null)
            {
                int set = (Integer) invocableEngine.invokeFunction("myfunc",6,6);
            }

        }
        catch (ScriptException e)
        {
            System.out.println("\nScriptException = "+e);
        }
    }
} 
```

myruby.rb 文件包含

```
def myfunc(a,b)
  f=a+b
  return f
end 
```

我得到的错误是，

```
Exception in thread "main" java.lang.NullPointerException
    at java.io.Reader.<init>(Unknown Source)
    at java.io.InputStreamReader.<init>(Unknown Source)
    at MyProgram.main(MyProgram.java:22) 
```

请帮我找出问题所在。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:32:30.833

```
InputStream is = ClassLoader.getSystemResourceAsStream("src/myruby.rb"); 
```

在这里，`is`为空。

尝试使用绝对路径打开文件。

如果找到您的文件，则`ClassLoader.getSystemResourceAsStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:52:06.193

正如 LaGrandMere 在他的回答中所说，`is`这里是空的。

它为空，因为`ClassLoader.getSystemResourceAsStream`无法找到指定的资源。
`ClassLoader`查找`classpath`指定的资源。
要获得此资源，请添加`myruby.rb`您的类路径。

希望这可以帮助 ！！

# matlab - 如何在 MATLAB 的子图中显示文本/字符串行？

> ID：15546312
> 
> 赞同：4
> 
> 时间：2013-03-21T11:30:31.983
> 
> 标签：matlab, matlab-figure

我有一套`subplots`in a `figure`in `MATLAB`。我生成了一组测试，这些测试与这些子图中的图形相关联。我想有一个单独的子图来呈现这些字符串。我不想注释图表或生成在其上打印文本的图表。我想在子图上打印大约 5 行文本。

我尝试手动将字符串放置在坐标处，但它变得混乱。有直接的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T11:45:54.230

使用 text() 函数，将“父”属性设置为子图的句柄，即

```
figure;
h1 = subplot(2, 1, 1);
% Do some plotting on h1

h2 = subplot(2, 1, 2);
text(0, 0, sprintf('%s\n%s\n%s ... etc', line1Str, line2Str, line3Str), 'Parent', h2); 
```

请注意，这里我传递了 sprintf 的返回值，以便在字符串中包含换行符（文本接受换行符并毫无问题地显示它们）。

您可能还希望将文本在轴中居中，您可以将前两个参数替换为 xPos、yPos，其中它们是：

```
xl = xlim(h2); 
xPos = xl(1) + diff(xl) / 2; 
yl = ylim(h2); 
yPos = yl(1) + diff(yl) / 2; 
t = text(xPos, yPos, sprintf('%s\n%s\n%s ... etc', line1Str, line2Str, line3Str), 'Parent', h2);
set(t, 'HorizontalAlignment', 'center'); 
```

最后一行也将对齐设置为居中。

# prestashop - 如何复制 Prestashop 联系表格页面？

> ID：15546316
> 
> 赞同：0
> 
> 时间：2013-03-21T11:30:45.547
> 
> 标签：prestashop

我正在使用 Prestashop 1.5 并想克隆联系表单页面。

我自己尝试过，但没有成功。我复制了具有不同名称的 ContactController.php、contact-form.php、contact-form.tpl，而不是新页面出现在后台 /seo 和 urls / 创建了所需的 url，但是如果我尝试使用选择的 url 访问页面，我得到的页面不是成立。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T09:33:34.257

您还需要更改类名和 $php_self 属性以使其正常工作。如果找不到该类，请删除 /cache/class_index.php 文件。

# c# - 匿名类型 LinQ - 检查空值 - 异常

> ID：15546318
> 
> 赞同：1
> 
> 时间：2013-03-21T11:30:51.217
> 
> 标签：c#, linq, null, anonymous

我已经用谷歌搜索了一段时间，并尝试了各种类型的组合来解决我的问题。

我想用我的匿名类型的结果填充我的 Gridview。“循环”中的第一次运行很顺利，因为所有变量都有一些实际值。

但第二次填充第 2 行时抛出：**对象引用未设置为对象的实例。**

这是因为我可能将一个匿名对象分配给 null 并且 gridview 无法处理它。我试图找出一些解决方案，但还没有解决。

是否有正确理解 LinQ 的秘密通道？

这是我现在的代码：

```
var filteredlist = from info in list // List from external
                   select new
                   {
                       Question = info.QuestionText ?? "Test",
                       CorrectAnswer = info.CorrectAnswer.OptionText ?? "Test",
                       WrongAnswer1 = info.WrongAnswer1.OptionText ?? "Test",
                       WrongAnswer2 = info.WrongAnswer2.OptionText ?? "Test", //Throws Error
                       WrongAnswer3 = info.WrongAnswer3.OptionText ?? "Test" //Throws Error
                   };

GridView1.DataSource = filteredlist;
GridView1.DataBind(); 
```

这是我试图让它发挥作用。

```
var filteredlist = from info in list // list from external
                   select new
                   {
                       Question = info.QuestionText == null ? "Test" : info.QuestionText,
                       CorrectAnswer = info.CorrectAnswer.OptionText == null ? "Test" : info.CorrectAnswer.OptionText,
                       WrongAnswer1 = info.WrongAnswer1.OptionText == null ? "Test" : info.WrongAnswer1.OptionText,
                       WrongAnswer2 = info.WrongAnswer2.OptionText == null ?  "Test" : info.WrongAnswer2.OptionText, //Throws Error
                       WrongAnswer3 = info.WrongAnswer3.OptionText == null ? "Test" : info.WrongAnswer3.OptionText, //Throws Error
                   };

GridView1.DataSource = filteredlist;
GridView1.DataBind(); 
```

第二次尝试

```
var filteredlist = from info in list // list from external
                   select new
                   {
                       Question = info.QuestionText != null ? "Test" : info.QuestionText,
                       CorrectAnswer = info.CorrectAnswer.OptionText != null ? "Test" : info.CorrectAnswer.OptionText,
                       WrongAnswer1 = info.WrongAnswer1.OptionText != null ? "Test" : info.WrongAnswer1.OptionText,
                       WrongAnswer2 = info.WrongAnswer2.OptionText != null ? "Test" : info.WrongAnswer2.OptionText, //Throws Error
                       WrongAnswer3 = info.WrongAnswer3.OptionText != null ? "Test" : info.WrongAnswer3.OptionText, //Throws Error
                   };

GridView1.DataSource = filteredlist;
GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:33:17.850

尝试检查`WrongAnswer`s 是否不为空，如下所示：

```
from info in list
where info != null
select new
{
    Question = info.QuestionText ?? "Test",
    CorrectAnswer = info.CorrectAnswer.OptionText ?? "Test",
    WrongAnswer1  = info.WrongAnswer1 !=null ? info.WrongAnswer1.OptionText : "Test",
    WrongAnswer2  = info.WrongAnswer2 !=null ? info.WrongAnswer2.OptionText : "Test", 
    WrongAnswer3  = info.WrongAnswer3 !=null ? info.WrongAnswer3.OptionText : "Test"
}; 
```

我喜欢使用通用方法来提高可读性，如下所示：

```
public string DefaultIfNull<TValue>(TValue value, Func<TValue, string> selector) where TValue : class
{
    if(value != null)
        return selector(value);
    return "Test"; //you can make resut generic too
} 
```

现在你可以：

```
Func<Answer,string> optionTextSelector = answer => answer.OptionText;

from info in list
where info != null
select new
{
    Question = info.QuestionText ?? "Test",
    CorrectAnswer = DefaultIfNull( info.CorrectAnswer, optionTextSelector ),
    WrongAnswer1  = DefaultIfNull( info.WrongAnswer1,  optionTextSelector ),
    WrongAnswer2  = DefaultIfNull( info.WrongAnswer2,  optionTextSelector ),
    WrongAnswer3  = DefaultIfNull( info.WrongAnswer3,  optionTextSelector ),
}; 
```

主要思想是不要混淆，不要使用功能方法使您的解决方案**过于**复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:32:41.967

`info.WrongAnswer2`很有可能`null`。尝试：

```
WrongAnswer2 = info.WrongAnswer2 == null ? "Nothing To See Here" : 
    info.WrongAnswer2.OptionText ?? "Test" 
```

同样与`info.WrongAnswer3`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:33:11.847

您可能正在检查错误的属性，请在检查之前尝试检查`info.WrongAnswer2`and`info.WrongAnswer3`为 null `OptionText`。

# java - 我们如何使用 AutoCAD 使用 Java 以编程方式从 DWG/DNG 文件创建 PDF？

> ID：15546322
> 
> 赞同：1
> 
> 时间：2013-03-21T11:31:08.737
> 
> 标签：java, pdf, pdf-generation, autocad

我也可以使用任何命令行实用程序。基本上我想使用 AutoCAD 将 AutoCAD 文件转换为 PDF。我知道即使没有安装 AutoCAD 也有几个 PDF 虚拟打印机驱动程序可以执行此操作，但我正在寻找高质量的 PDF 生成。

谢谢，尼特什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:59:22.243

您只需要 Adob​​e Acrobat。看：

[http://help.adobe.com/en_US/acrobat/X/pro/using/WS58a04a822e3e50102bd615109794195ff-7f35.w.html](http://help.adobe.com/en_US/acrobat/X/pro/using/WS58a04a822e3e50102bd615109794195ff-7f35.w.html)

# sublimetext2 - sublime text 2 项目侧边栏停止对新文件做出反应

> ID：15546324
> 
> 赞同：6
> 
> 时间：2013-03-21T11:31:09.313
> 
> 标签：sublimetext2, sublimetext

所以我正在使用带有几个插件的 Sublime Text 2（但不是太多：BracketHiglighter、CSS 片段、FileDiffs、Gist 和 Package Control）。

带有项目文件列表的侧边栏突然停止对文件更改做出反应。当我新建一个并保存到文件夹时，它并没有立即出现在侧边栏中，而是在 Sublime 重新启动后才出现，这是不可接受的。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T07:22:30.723

那个项目，它看起来已经完成了，而且还没有出现在新的项目上。假设它可能是由一些低机器性能引起的 - 对于大型项目。

**更新**

排除系统/框架核心文件夹也有帮助。

```
"folder_exclude_patterns": ["node_modules", ".svn", ".git", ".hg", "CVS"], 
```

可以在全局和项目**文件夹**设置中完成。

# encoding - 文件编码和变形字符串

> ID：15546325
> 
> 赞同：0
> 
> 时间：2013-03-21T11:31:10.347
> 
> 标签：encoding, malformed

我只是在处理一个文本文件，其中包含许多变形的字符串，例如：

```
VyplÅ<88>te prosÃ­m pole "jmÃ©no 
```

我的编辑说文件编码是 latin1。该字符串应该是一个包含一些变音符号的捷克语句子，所以难怪它显示错误。我试图在我的编辑器中强制使用 utf8 和 latin2 编码，但这没有帮助。我也尝试使用 iconv 将文件从 latin1 转换为 utf8 或 latin2 ，但都没有帮助。我经常遇到这样的问题，除了手动重写字符串之外，我不知道任何其他解决方案。有没有更好的方法来解决这个问题？

**编辑：**

以下是原文：

```
Vyplňte prosím pole "jméno" 
```

这是出现格式错误的字符串的部分的十六进制转储：

```
0002640: 6a6d 656e 6f22 5d20 3d20 2744 453a 2056  jmeno"] = 'DE: V
0002650: 7970 6cc5 8874 6520 7072 6f73 c3ad 6d20  ypl..te pros..m 
0002660: 706f 6c65 2022 6a6d c3a9 6e6f 222e 273b  pole "jm..no".'; 
```

**编辑2：**

正如 deceze 所说，上面的句子确实是正确的 utf8。但我刚刚发现了一些奇怪的事情。如果我尝试将文件从 utf8 转码为 utf8（使用 iconv），我会收到一个单词错误：`Postgebühr`at character `ü`。如果我查看十六进制转储，这个字符表示为`\xfc`（十进制的 252），这是有效的 latin1 字节编码，`ü`但完全无效的 utf8 字节编码。似乎文件的一部分在 latin1 中，另一部分在 utf8 中。这是 latin1 中的文件的一部分（可能）：

```
0000250: 506f 7374 6765 62fc 6872 273b 0a09 0963  Postgeb.hr';...c
0000260: 6f6e 665b 2277 6166 6572 7322 5d20 3d20  onf["wafers"] = 
0000270: 2744 453a 206f 706c c3a1 746b 20c3 273b  'DE: opl..tk .'; 
```

当我对此进行更多研究时，这甚至似乎不是有效的 latin1 原因，即使在 latin1 中它也是乱码（`DE: oplÃ¡tk Ã`而不是可能`DE: oplatky za`）。这部分文件似乎包含一些损坏的文本。

I can't understand how encoding in this file could have got mixed up like that. Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:36:11.607

If the file is *supposed to contain Latin2 encoded text*, then trying to convert it *from Latin1* or similar is of course messing things up.

The problem is simply that your text editor does not automagically recognize the encoding, since the single-byte Latin* encodings all look identically interchangeable on a byte level. If your editor "tells" you the encoding is Latin1, what it means is that it is currently *interpreting* the file as Latin1\. Obviously it has that wrong.

You either need to tell your editor to treat the file as Latin2 (Open As... Latin2, or however your editor gives you this choice) or to convert the file from Latin2 into an encoding your editor handles correctly.

To understand encodings better, I recommend you read [What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text](http://kunststube.net/encoding/).

* * *

In response to your posted hex dump: That file *is* UTF-8 encoded.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:38:12.480

Iconv is the way to go, but you must know the correct enconding. Latin2 (iso8859-2) is only one of the possibilities, since there were many ascii extensions in Europe. What language is this supposed to be in?

# google-drive-api - Google Drive SDK 提取导致未处理的异常

> ID：15546334
> 
> 赞同：0
> 
> 时间：2013-03-21T11:31:30.420
> 
> 标签：google-drive-api, unhandled-exception, google-api-dotnet-client

我在使用 Google Drive SDK 时尝试处理网络故障异常，但遇到以下问题。我正在断开网络并运行此代码

```
try
{
    FilesResource.InsertRequest r = service_.Files.Insert(body);
    r.Fetch();
} catch
{
    Console.WriteLine("Error");
} 
```

但是由于未处理的异常而终止了应用程序，而不是打印“错误”。调试器显示以下堆栈跟踪

```
Unable to connect to the remote server
   at System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult, TransportContext& context)
   at System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult)
   at Google.Apis.Requests.Request.EndAttachBody(IAsyncResult asyncResult) in c:\code.google.com\google-api-dotnet-client\default_release\Tools\BuildRelease\bin\Debug\output\default\Src\GoogleApis\Apis\Requests\Request.cs:line 714
   at System.Net.LazyAsyncResult.Complete(IntPtr userToken)
   at System.Net.ContextAwareResult.CompleteCallback(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Net.ContextAwareResult.Complete(IntPtr userToken)
   at System.Net.LazyAsyncResult.ProtectedInvokeCallback(Object result, IntPtr userToken)
   at System.Net.HttpWebRequest.SetResponse(Exception E)
   at System.Net.HttpWebRequest.SetAndOrProcessResponse(Object responseOrException)
   at System.Net.ConnectionReturnResult.SetResponses(ConnectionReturnResult returnResult) 
```

看起来`Fetch()`里面做了一些异步操作并且没有处理异常。所以我找不到处理这个异常的方法。它总是终止我的应用程序。我该如何解决？

**更新**

我找到了这行代码

```
Stream bodyStream = request.EndGetRequestStream(asyncResult); 
```

在`Src\GoogleApis.Tests\Apis\Requests\RequestTest.cs:731`

**EndGetRequestStream**引发了一个线程未处理的异常，因此看起来这是客户端 API 中的一个错误。我对吗？任何解决方法？

**更新**

Any answers? That's very important. My application crashes every time I disconnect the network and this cannot be solved without touching Google API source codes. I changed `BeginGetResponse()` to `GetResponse()` and recompiled the code, so currently it works for me and `Fetch()` throws an exception as expected, but synchronous and asynchronous operations are sharing a common code (synchronous operation executes asynchronous and waits) so currently I can't do async fetch. Will you guys fix this?

**update**

Google says `We support the Google Drive SDK on Stack Overflow`. Guys, do you really provide kind of support for your SDK? I'm waiting for ANY answer almost 5 days. Is there anybody?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:49:42.170

Sorry for the delay. It looks like a bug and I just opened a new issue in our issue tracker - you can add more details to it [here](https://code.google.com/p/google-api-dotnet-client/issues/detail?id=305&thanks=305&ts=1364208375). We will try to fix it in the next release.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T01:21:36.363

In the next couple of weeks we are going to publish version 1.4.0-beta which has a fix for this problem. Just to let you know, the new version of Google.Apis core library will be [PCL](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx). It requires upgrading the .NET framework to 4.0, and there is a great usage of TPL.

# c# - JSON 日期到模型 C# DateTime

> ID：15546336
> 
> 赞同：0
> 
> 时间：2013-03-21T11:31:31.800
> 
> 标签：c#, json, api

我有一个 ASP.NET MVC API 站点，其中我的一个模型需要 DateTime，但无论我做什么，它都不会接受我作为有效模型发送的数据！

我试过了

```
{"Owner":"s083151","Permissions":"public","Name":"SomeRandomMeeting","Begin":"2013-03-28T13:00:00.2124557+01:00","End":"2013-03-28T17:00:00.2124557+01:00","Url":"MyRandomUrl"} 
```

和

```
{"Owner":"s083151","Permissions":"public","Name":"SomeRandomMeeting","Begin":Date(1364234400),"End":Date(1364248800),"Url":"MyRandomUrl"} 
```

和

```
{"Owner":"s083151","Permissions":"public","Name":"SomeRandomMeeting","Begin":1364234400,"End":1364248800,"Url":"MyRandomUrl"} 
```

和

```
{"Owner":"s083151","Permissions":"public","Name":"SomeRandomMeeting","Begin":"1364234400","End":"1364248800","Url":"MyRandomUrl"} 
```

但没有一个被接受为 Model.IsValid，我做错了什么？

我使用提琴手来测试这里的请求是我的请求标头

```
User-Agent: Fiddler
Content-Type: application/json 
```

数据模型

```
[DataContract]
public class MeetingModel
{
    [Required]
    [StringLength(500)]
    public string Owner { get; set; }

    [Required]
    public string Permissions { get; set; }

    [Required]
    [StringLength(500)]
    public string Name { get; set; }

    [Required]
    public DateTime Begin { get; set; }

    [Required]
    public DateTime End { get; set; }

    [Required]
    [StringLength(75)]
    public string Url { get; set; }

    public string MeetingId { get; set; }

    public TimeSpan Duration { get; set; }

    public List<UserModel> Hosts { get; set; }

    public List<UserModel> Participants { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:02:13.003

像这样在斜线之间放置日期字段对我有用：

```
{"Owner":"s083151",
 "Permissions":"public",
 "Name":"SomeRandomMeeting",
 "Begin":"/Date(1364234400)/",
 "End":"/Date(1364248800)/",
 "Url":"MyRandomUrl"} 
```

如果您使用 C# 代码生成 JSON，请小心添加 scape 反斜杠：

```
"\/Date(1364234400)\/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:38:55.307

似乎不是因为日期，而是因为错字：您`Permissions`的班级中有（复数）属性，但`Permission`在 JSON 中有（单数）。

至于日期格式，Scott Hanselman 有一篇关于此的[帖子](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)，从中看起来默认 JSON 模型绑定器将理解的格式看起来像“2013-03-21T00:00:00”（并且似乎是[ISO的一部分8601 标准](http://en.wikipedia.org/wiki/ISO_8601)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:55:17.417

根据[http://james.newtonking.com/projects/json/help/index.html?topic=html/DatesInJSON.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/DatesInJSON.htm)，JSON 标准是“2012-03-19T07:22Z”。你能试试吗？

编辑：刚刚在我的一些代码上尝试了 GET，我得到了“OrderTime”：“2013-03-21T12:58:15.053”。

# c# - WP7 C# - 如何更改 Pivot 标头的样式

> ID：15546339
> 
> 赞同：3
> 
> 时间：2013-03-21T11:31:37.730
> 
> 标签：c#, windows-phone-7, xaml, windows-phone

我需要更改 Pivot 标题背景和填充（Pivot 控件的顶部菜单在哪里是数据透视项的标题）。

我试试这个：

```
 <controls:Pivot Grid.Row="1" Margin="0" Padding="0">
        <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                <StackPanel Background="#666666" Margin="0" />
            </DataTemplate>
        </controls:Pivot.HeaderTemplate>

        <controls:PivotItem Background="#65006a">
            <controls:PivotItem.Header>
                <TextBlock FontSize="60" Margin="0">tasks</TextBlock>
            </controls:PivotItem.Header>
        </controls:PivotItem>

    </controls:Pivot> 
```

但它并没有解决它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:47:44.887

正确的方法是使用以下代码：

```
<controls:Pivot.HeaderTemplate>
    <DataTemplate>
        <StackPanel Background="#666666" Margin="0">
            <TextBlock FontSize="60" Margin="0" Text="{Binding}"/>
        </StackPanel>
    </DataTemplate>
</controls:Pivot.HeaderTemplate>

<controls:PivotItem Background="#65006a" Header="tasks">
</controls:PivotItem> 
```

每个 PivotItem 都有标题文本，然后将其传递给 HeaderTemplate 中包含的数据模板。你可以看到我已经在 StackPanel 中移动了 TextBlock 并通过绑定设置了它的文本。你做错的是标题模板*只*包含StackPanel 而里面什么都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-19T10:38:26.827

在这里，我修改了枢轴控件的标题。我用不同的颜色定义了不同的控件，这样你就可以很容易地识别出我做了什么。根据需要修改此源以更改数据透视表头。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
          <phone:Pivot>
            <phone:Pivot.HeaderTemplate>
                <DataTemplate>
                    <StackPanel Background="Blue"
                                Margin="15,-10,0,0">
                        <TextBlock Text="{Binding}"
                                   FontSize="20"
                                   />
                    </StackPanel>
                </DataTemplate>
            </phone:Pivot.HeaderTemplate>
            <phone:PivotItem Header="item1">
                <Grid Background="Red"></Grid>
            </phone:PivotItem>
            <phone:PivotItem Header="item2">
                <Grid Background="Green"></Grid>
            </phone:PivotItem>
        </phone:Pivot> 

    </Grid> 
```

# android - Android Paint PorterDuff.Mode.CLEAR 在我的视图上绘制黑色

> ID：15546342
> 
> 赞同：2
> 
> 时间：2013-03-21T11:31:54.343
> 
> 标签：android, image, paint

我想为我的绘画应用程序实现橡皮擦。我可以使用以下代码擦除

```
 paint.setColor(0x00000000);
 paint.setAlpha(0x00); 
```

但是当你再次开始绘画时擦除后它不能正确绘画所以请提出任何擦除油漆的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-14T13:30:49.947

我有同样的问题。

需要设置视图的**setLayerType**。

```
yourView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

您可以在构造函数或视图对象中设置它。

完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:37:50.790

试试下面的代码。

```
 paint.setAlpha(0xFF);//transperent color
      paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));//clear the draw 
```

还可以查看文件夹 graphics 下 api demos 中的示例 FingerPaint.java。

```
 setAlpha(int a) 
```

setColor() 的助手，它只分配颜色的 alpha 值，保持其 r、g、b 值不变。

[http://developer.android.com/reference/android/graphics/Paint.html](http://developer.android.com/reference/android/graphics/Paint.html)。看看文档。

编辑：

还要检查这个

[https://code.google.com/p/android/issues/detail?id=54105#c1](https://code.google.com/p/android/issues/detail?id=54105#c1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-11T19:28:14.887

这应该可以解决这个问题

```
private void touch_move(float x, float y){
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);

        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        mPath.moveTo(mX, mY);

        mX = x;
        mY = y;
    }
} 
```

在 touch_up() 中将其更改为：

```
private void touch_up() {

     mPath.reset();
} 
```

# c++ - 充满垃圾记录的地图

> ID：15546344
> 
> 赞同：1
> 
> 时间：2013-03-21T11:31:59.923
> 
> 标签：c++, stl

我正在使用这样的地图：

```
map<int,CUser*> m_mUsers; 
```

...

```
for ( i = m_mUsers.begin(); i != m_mUsers.end(); i++ )
{
    if( (*i).second->GetUserID() == pUser->GetUserID() )
        (*i).second->OnDeviceLogout( pUser );
} 
```

...

添加到地图：

```
m_mUsers[ sd ] = pUser; 
```

从地图中删除：

```
i = m_mUsers.find( sd );
m_mUsers.erase( i ); 
```

当我运行它时，大多数情况下它都按我的预期工作。但是很少会在地图中留下垃圾记录，因此当我尝试遍历预期为空的地图时，我遇到了垃圾记录，并在 i->second->GetUserID() 上崩溃...什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:11:27.890

您没有检查`i != m_mUsers.end()`. 这是不正确的，除非保证`sd`在您的情况下存在。

```
i = m_mUsers.find( sd );

//You should do the check before erasing
if (i != m_mUsers.end()) {
    m_mUsers.erase( i );
} 
```

That should make the code work correctly. By the way, I recommend you use `std::shared_ptr` or `std::unique_ptr` for the `mapped_type` of the map. If you don't have c++11 available, you can try [technical report](http://en.wikipedia.org/wiki/C%2B%2B_Technical_Report_1) or [boost libraries](http://www.boost.org), which include smart pointers. If you just want to have a reference and don't care about managing `CUser`s in the `std::map`, you can also do this, which implies you are not managing memory for `CUser`s (in c++11 only):

```
//No room for the question: Who is managing CUser memory in this map?
std::map<int, std::reference_wrapper<CUser>> m_mUsers; 
```

And if you don't modify users, you can do even this:

```
//Note I added const to CUser
std::map<int, std::reference_wrapper<CUser const>> m_mUsers; 
```

# c# - 在 C# 中拖动而不放下

> ID：15546349
> 
> 赞同：0
> 
> 时间：2013-03-21T11:32:09.523
> 
> 标签：c#, winforms

我正在为我的游戏制作地图编辑器。当用户单击地图时，我已经设法将对象添加到地图中。在用户单击鼠标并拖动的路径中添加对象对我来说会很方便（如 mspaint 中的铅笔）。我需要注册哪些事件才能产生这种效果？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:39:48.647

这是主要思想：

使用**MouseUp() MouseDown()**和**MouseMove()**。

将一些布尔值设置为 0 - 告诉您是否正在拖动。

当 (mouse Down) 和 (flag==0) 然后 START_DRAGGING。然后鼠标移动知道您是否正在拖动标志==1。

当 (mouse UP) 和 (flag == 1) 你知道你刚刚停止拖动时，所以再次将 flag 设置为 0。

# node.js - 分析应用程序的 Appengine 与 Nodejs 成本

> ID：15546358
> 
> 赞同：4
> 
> 时间：2013-03-21T11:32:33.743
> 
> 标签：node.js, google-app-engine

目前，我已经使用 nodejs 和 mongodb 构建了我们当前的应用程序。这样做是假设 appengine 的日期写入成本将变得比托管 nodejs 和 mongodb 太昂贵。

我需要帮助来确定应用程序的成本差异，该应用程序将增长到大约 50 个请求/秒。每个请求都记录在数据库中。实体非常简单（id、datetime、email_address）。数据不会被回收/删除。

1.  使用像 nodejitsu 这样的 nodejs 托管服务提供商（不确定我需要多少架无人机来处理这样的流量）。Mongohq 用于数据库托管。或者任何你喜欢降低成本的人。

2.  将 appengine 用于具有内置数据存储的相同模型

3.  将 appengine 与 Google Cloud SQL 结合使用

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:45:17.347

您可以将它放在 AppFog 上并免费获得高达 512 mb 的内存。

关于 Nodejitsu - 1 架无人机每秒 50 个请求应该没问题。

即使是 128mb 内存的非常小的 VPS 也可以处理这种负载。

# css - 如何让 CSS 更改 li hover 上的嵌入阴影，而不是重置它？

> ID：15546359
> 
> 赞同：2
> 
> 时间：2013-03-21T11:32:36.567
> 
> 标签：css, menu, shadow, nav, css-selectors

我的列表项在悬停时遇到了一个小问题。

菜单栏底部有一个小的嵌入阴影，定义在 li 项上。在 li:hover 底部的小插图更改为所有 4 个侧面的插图阴影。

我对菜单的反应非常满意，除了 li:lastchild。在悬停时，它首先删除底部和右侧的嵌入阴影，然后打印新的 4 面嵌入阴影。所有其他 li 项目只是将阴影从一个底部更改为所有 4 个侧面，而不重置阴影。

我知道 css 阴影部分写得不是很干净。但是因为悬停必须更改阴影而不是替换，所以我不能简单地在多个选择器上提交语句。（如果你们知道如何做到这一点，请随时发表评论！）

所以我的问题是，我如何在 li:lastchild 上获得不同的嵌入阴影，它会在悬停时改变而不是被替换？

[cedepen](http://codepen.io/anon/pen/BFznK)上的代码

```
 <ul class="hoofd-menu menu">
      <li class="menu-item"><a href="#">Menu Item I</a></li>
      <li class="menu-item"><a href="#">Menu Item II</a></li>
      <li class="menu-item"><a href="#">Menu Item III</a></li>
      <li class="menu-item"><a href="#">Menu Item IV</a></li>
      <li class="menu-item"><a href="#">Menu Item V</a></li>
      <li class="menu-item"><a href="#">Menu Item VI</a></li>
    </ul>

    <style> 
        .menu li {
            margin: 0 0 0 -4px;
            padding: 15px 15px;

        }

        /* Menu Item Hover effect */

        .menu li {
            box-shadow:     0 -9px 5px -5px rgba(0,0,0, 1) inset,     /* dark shadow      */
                            2px -2px 3px 0px rgba(255,255,255, 0.2),      /* white - top      */
                            2px 2px 3px 0px rgba(255,255,255, 0.2);       /* white - bottom   */
        }

        li:last-child.menu-item {
            box-shadow:     -9px 0px 5px -5px rgba(0,0,0, 1) inset,   /*dark shadow right */
                            0px -9px 5px -5px rgba(0,0,0, 1) inset,   /*dark shadow       */
                            2px -2px 3px 0px rgba(255,255,255, 0.2),      /* white - top      */
                            2px 2px 3px 0px rgba(255,255,255, 0.2);       /* white - bottom   */
        }

        li:first-child.menu-item {
            box-shadow:      0px -9px 5px -5px rgba(0,0,0, 1) inset,  /* dark shadow      */
                            -2px -2px 3px 0px rgba(255,255,255, 0.2),     /* white - left     */
                             2px -2px 3px 0px rgba(255,255,255, 0.2),     /* white - top      */
                             2px 2px 3px  0px rgba(255,255,255, 0.2);     /* white - bottom   */
        }

        .menu li:hover {
            cursor:         pointer;
            box-shadow:     -1px -1px 10px 4px rgba(0,0,0, 1) inset, /* dark shadow      */
                            2px -2px 3px 0px rgba(255,255,255, 0.2),      /* white - top      */
                            2px 2px 3px 0px rgba(255,255,255, 0.2);       /* white - bottom   */
        }

        .menu li:hover>a {
            text-shadow:    -1px -1px 3px rgba(0,0,0, 0.2);             /* text shadow      */
        }

        li:hover:last-child.menu-item {
            box-shadow:     -1px -1px 10px 4px rgba(0,0,0, 1) inset, /* dark shadow      */
                            2px -2px 3px 0px rgba(255,255,255, 0.2),      /* white - top      */
                            2px 2px 3px 0px rgba(255,255,255, 0.2);       /* white - bottom   */
        }

        li:hover:first-child.menu-item {
            box-shadow:      -1px -1px 10px 4px rgba(0,0,0, 1) inset,  /* dark shadow    */
                             -2px -2px 3px 0px rgba(255,255,255, 0.2),     /* white - top     */
                             2px -2px 3px 0px rgba(255,255,255, 0.2),      /* white - top     */
                             2px 2px 3px  0px rgba(255,255,255, 0.2);      /* white - bottom  */
        }

        /******************************************************************************************/
        /* Round corners                                                                          */
        /******************************************************************************************/
        li:first-child.menu-item {
            -moz-border-radius-bottomleft:  5px;
            border-bottom-left-radius:      5px;
            -moz-border-radius-topleft:     5px;
            border-top-left-radius:         5px;
        }

        li:last-child.menu-item {
            -moz-border-radius-bottomright: 5px;
            border-bottom-right-radius:     5px;
            -moz-border-radius-topright:    5px;
            border-top-right-radius:        5px;
        }

        /******************************************************************************************/
        /* Color palette                                                                          */
        /******************************************************************************************/

        a                       {color: #0861a5;}
        a:hover                 {color: #d98500;}
        .menu li:hover>a,
        .menu a                 {color: #dddddd;}

        body                    {background-color: #b8d3e2;}
        .menu li                {background-color: #87a0af;}

        .menu                   {font-family:       Arial, Helvetica, sans-serif}
        a                       {text-decoration:   none;}

a, .menu li>a {
    transition:         1.5s ease 0.2s;
    -moz-transition:    1.5s ease 0.2s;
    -webkit-transition: 1.5s ease 0.2s;
    -o-transition:      1.5s ease 0.2s;
}

a:hover, .menu li, .menu li:hover>a {
    transition:         0.4s ease 0.6s;
    -moz-transition:    0.4s ease 0.6s;
    -webkit-transition: 0.4s ease 0.6s;
    -o-transition:      0.4s ease 0.6s;
}

ul, li, ol {
margin: 0;
padding: 0;
border: 0;
vertical-align: baseline;
}

ul {
  margin: 100px 50px;
}

/* algemeen menu*/
.menu ul {
    list-style-type: none;
}

.menu li {
    display: inline;
}
    </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T07:58:37.933

如果要使用 box-shadow 进行转换，则 box-shadow 的元素必须成“对”并且必须匹配阴影的“类”。像素和颜色可以转换，关键字不能。

你的基本元素是

```
.menu li {
    box-shadow:     0 -9px 5px -5px rgba(0,0,0, 1) inset,   
                  2px -2px 3px 0px rgba(255,255,255, 0.2),      
                  2px 2px 3px 0px rgba(255,255,255, 0.2);   
} 
```

你可以正确过渡到这个：

```
 .menu li:hover {
        box-shadow:     -1px -1px 10px 4px rgba(0,0,0, 1) inset,
                        2px -2px 3px 0px rgba(255,255,255, 0.2), 
                        2px 2px 3px 0px rgba(255,255,255, 0.2);   
    } 
```

因为第一个元素是 inset 和两种情况，而其他 2 不是在这两种情况下。

最后一个孩子是

```
li:last-child.menu-item {
    box-shadow: -9px 0px 5px -5px rgba(0,0,0, 1) inset,  
                 0px -9px 5px -5px rgba(0,0,0, 1) inset,   /* PROBLEM HERE     */
                 2px -2px 3px 0px rgba(255,255,255, 0.2),     
                 2px 2px 3px 0px rgba(255,255,255, 0.2);     
    } 
```

并且第二个元素是插入的，并且与未插入的悬停中的第二个元素不匹配。这是失败的部分。

一旦了解问题出在哪里，就有几种解决方案。可能更容易的是只设置 1 个同时具有 x 和 y 偏移的插图：

```
li:last-child.menu-item {
    box-shadow: -9px -9px 5px -5px rgba(0,0,0, 1) inset,   /* combined shadows */
                 2px -2px 3px 0px rgba(255,255,255, 0.2),     
                 2px 2px 3px 0px rgba(255,255,255, 0.2);     
    } 
```

结果可能不完全是前一个，但这是可以转换的

# javascript - 循环通过 XML 解析函数并在 HTML 中显示

> ID：15546367
> 
> 赞同：0
> 
> 时间：2013-03-21T11:33:00.660
> 
> 标签：javascript, html, xml, cordova, xml-parsing

我现在有一个函数可以在 iPhone 应用程序中显示硬编码的 XML 数据；

```
 function viewXMLFiles() {
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", "TestInfo.xml", false);
        xmlhttp.send();

        xmlDoc = xmlhttp.responseXML;

        document.getElementById("docname").innerHTML = xmlDoc.getElementsByTagName("document_name")[0].childNodes[0].nodeValue;
        document.getElementById("filetype").innerHTML = xmlDoc.getElementsByTagName("file_type")[0].childNodes[0].nodeValue;
        document.getElementById("fileloc").innerHTML = pathToRoot + "/" + document.getElementById("docname").innerHTML;

        document.getElementById("docname1").innerHTML = xmlDoc.getElementsByTagName("document_name")[1].childNodes[0].nodeValue;
        document.getElementById("filetype1").innerHTML = xmlDoc.getElementsByTagName("file_type")[1].childNodes[0].nodeValue;
        document.getElementById("fileloc1").innerHTML = pathToRoot + "/" + document.getElementById("docname1").innerHTML;
    } 
```

我想把它放到一个循环中，所以当我添加上传文件的选项时，文件将自动循环并在单击按钮时显示数据，而不必更改代码。按钮是这样编码的；

```
<button onclick = "viewXMLFiles(); document.getElementById('showDocumentLink').style.display = 'block';">View Document Info</button><br> 
```

并且页面被设置为将 XML 加载到其中；

```
 <div id = "doclist">
        <h2>Document 1;</h2>
        <label>Document Name;</label><br><span id = "docname"></span><br>
        <label>File Type</label><br><span id = "filetype"></span><br>
        <label>File Location</label><br><span id = "fileloc"></span><br>
    </div>

    <div id = "doclist">
        <h2>Document 2;</h2>
        <label>Document Name;</label><br><span id = "docname1"></span><br>
        <label>File Type</label><br><span id = "filetype1"></span><br>
        <label>File Location</label><br><span id = "fileloc1"></span><br>
    </div> 
```

我对 XML 文件以及如何使用 JavaScript 解析它们真的很陌生，所以向我展示如何正确地将它们放入`for`循环中的任何帮助都会很棒。我真的不知道该怎么做，所以任何帮助都将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:55:11.930

尝试这个....

```
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$title = $xml.find( "document_name" );
$("#docname").append($title.text()); 
```

# jenkins - Findbugs java 结果：137 静态分析插件

> ID：15546372
> 
> 赞同：3
> 
> 时间：2013-03-21T11:33:11.567
> 
> 标签：jenkins, static-analysis, findbugs

每次提交后，我们都会在 jenkins 上运行 findbug 作业，其结果由静态分析插件发布。这通常完全按预期工作，但是有时（大约每 100 个构建一次）findbugs 以退出代码 137 退出。当它这样做时，也会生成一个完全空的 findbugs.xml 文件

空的 xml 文件导致静态分析插件认为这个构建非常棒（没有错误）并将其用作新的参考构建，这反过来又使之后的每个构建都失败/不稳定。

关于此退出代码的含义或如何防止它，我真的找不到任何有用的信息。我正在寻找一种方法来防止出现此退出代码 137 或让静态分析插件将此构建视为失败（而不是新的参考构建）

我也想知道这段代码的实际含义。

退出代码为 137 的作业的控制台输出（作业：#1957，未报告错误）

```
--- snip -- more applying of bugpatterns--
[findbugs] Applying edu.umd.cs.findbugs.detect.MultithreadedInstanceAccess to nl/base/rela/entities/relagroups/RelationGroup$1
 [findbugs] Applying edu.umd.cs.findbugs.detect.BadUseOfReturnValue to nl/base/rela/entities/relagroups/RelationGroup$1
 [findbugs] Applying edu.umd.cs.findbugs.detect.MethodReturnCheck to nl/base/rela/entities/relagroups/RelationGroup$1
 [findbugs] Applying edu.umd.cs.findbugs.detect.IDivResultCastToDouble to nl/base/rela/entities/relagroups/RelationGroup$1
 [findbugs] Applying edu.umd.cs.findbugs.detect.FindBadCast2 to nl/base/rela/entities/relagroups/RelationGroup$1
 [findbugs] Java Result: 137
 [findbugs] Output saved to findbugs.xml

BUILD SUCCESSFUL
Total time: 9 minutes 0 seconds
[FINDBUGS] Collecting findbugs analysis files...
[FINDBUGS] Finding all files that match the pattern trunk/findbugs.xml
[FINDBUGS] Parsing 1 files in /data/hudson/workspace/crm-findbugs
[FINDBUGS] Skipping file  of module /data/hudson/workspace/crm-findbugs/trunk/findbugs.xml because it's empty.
[FINDBUGS] Computing warning deltas based on reference build #1956
[ANALYSIS-COLLECTOR] Computing warning deltas based on reference build #1956
Archiving artifacts 
```

上一个作业的控制台输出（作业：#1956，报告存在的错误）：

```
 ---snip---
 [findbugs] Applying edu.umd.cs.findbugs.detect.AtomicityProblem to nl/base/rela/entities/Project$1
 [findbugs] Applying edu.umd.cs.findbugs.detect.DefaultEncodingDetector to nl/base/rela/entities/Project$1
 [findbugs]       32 usecs/byte      29 msec     898 bytes  1 pass nl/base/rela/entities/Project$1
 [findbugs] Analysis completed
 [findbugs] Warnings generated: 770
 [findbugs] Calculating exit code...
 [findbugs] Setting 'bugs found' flag (1)
 [findbugs] Exit code set to: 1
 [findbugs] Java Result: 1
 [findbugs] Output saved to findbugs.xml

BUILD SUCCESSFUL
Total time: 9 minutes 30 seconds
[FINDBUGS] Collecting findbugs analysis files...
[FINDBUGS] Finding all files that match the pattern trunk/findbugs.xml
[FINDBUGS] Parsing 1 files in /data/hudson/workspace/crm-findbugs
[FINDBUGS] Successfully parsed file /data/hudson/workspace/crm-findbugs/trunk/findbugs.xml of module  with 770 warnings.
[FINDBUGS] Computing warning deltas based on reference build #1955
[ANALYSIS-COLLECTOR] Computing warning deltas based on reference build #1955
Archiving artifacts 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:24:09.397

1.  作为解决方法，添加运行脚本的 buld 步骤，该脚本检查 findbugs.xml 文件是否为空，如果是，则返回非零退出代码，使构建失败

2.  [在https://issues.jenkins-ci.org](https://issues.jenkins-ci.org)提交关于 Jenkins 插件的错误报告

3.  可选：检查插件，自行修复，提交补丁

# c# - 将对象添加到 IList 抛出 ArrayTypeMismatchException

> ID：15546375
> 
> 赞同：3
> 
> 时间：2013-03-21T11:33:19.410
> 
> 标签：c#, exception

我有一个`IList<IHtmlString>`我想添加一些元素的。由于短时间内它会抛出一个`ArrayTypeMismatchException`，但我不知道为什么。从 HttpSessionStateBase 添加或访问元素时也会发生这种情况。

```
public class HtmlList 
{
  private IList<IHtmlString> _listItems = new List<IHtmlString>();

  public void Add(IHtmlString listItem)
  {
    if (listItem != null)
    {
      _listItems.Add(listItem); // here ArrayTypeMismatchException is thrown
    }
  }
} 
```

有人可以向我解释一下吗？为什么过去三年没有发生这种情况？从 .NET 4.0 更改为 4.5 后，我第一次遇到异常。

堆栈跟踪：

> 在 System.Collections.Generic.List`1.Add(T item)
> 在 MyCompany.Web.Mvc.UI.HtmlList.Add(IHtmlString element)
> 在 MyCompany.Web.Mvc.Models.CaptchaExtensions.CaptchaImageElement.ToString()
> 在 MyCompany .Web.Mvc.Models.CaptchaExtensions.CaptchaImageElement.Render(Int32 width, Int32 height)
> at ASP.views_teilnahme_index_aspx.__RenderContent3(HtmlTextWriter __w, Control parameterContainer)
> at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
> at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
> 在 System.Web.UI.Control.Render(HtmlTextWriter writer)
> 在 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter 适配器)
> 在 System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
> 在 System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
> 在 System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
> 在 System .Web.UI.Control.RenderChildren(HtmlTextWriter writer)
> 在
> System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)在 System.Web.UI.Control.Render(HtmlTextWriter writer)
> 在 System.Web.UI。 Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
> at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
> at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
> 在 System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
> 在 System.Web.UI.Page.Render(HtmlTextWriter writer)
> 在 System.Web.Mvc.ViewPage.Render(HtmlTextWriter writer)
> 在 System.Web.UI.Control .RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
> at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
> at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
> at System.Web.UI.Page.ProcessRequestMain （布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:03:41.723

i am assuming that IHtmlString is defined in the System.Web namespace.

this should not happen until you have `IHtmlString` interface defined somewhere else in your code and you are implementing a class with your `IHtmlString` interface and adding it to list

Please check this ,

# powershell - 来自powershell的ant命令 - 点用作参数的分隔符？

> ID：15546380
> 
> 赞同：4
> 
> 时间：2013-03-21T11:33:25.370
> 
> 标签：powershell, ant

我正在尝试运行从 powershell 脚本调用的 ant 任务：

```
Invoke-Expression "ant -f $antFilePath -Dtestsuite=$testsuite clean compile run" 
```

$testsuite 变量是一个包含点字符的字符串，例如“systemTest.All”，所以：

```
Invoke-Expression "ant -f $antFilePath -Dtestsuite=systemTest.All clean compile run" 
```

我的问题是点似乎被解释为分隔符（通过 powershell？从 cmd 调用工作得很好），因此“全部”部分被视为 ant 目标（在干净的编译运行中）。

（在测试套件名称中使用点不是我的行为之一，因此我无法影响部分）

我是否需要引用 ant 论点，以某种方式逃避点？

兄弟，皮特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T13:07:52.847

试试这个（但我无法测试它），直接运行这个没有调用表达式：

```
ant -f $antFilePath "-Dtestsuite=$testsuite" clean compile run 
```

# java - 输入流读取器-读取方法返回错误值

> ID：15546382
> 
> 赞同：4
> 
> 时间：2013-03-21T11:33:30.440
> 
> 标签：java, inputstream, bufferedreader

这听起来很简单，或者是一个古老的愚蠢问题，但对我来说却完全不同。我写了一个半下降金字塔模式的程序，就像这样。

1

1 2

1 2 3

1 2 3 4

1 2 3 4 5

我知道这很容易，诀窍是我不想通过使用`Scanner`and来做到这一点`Integer.parseInt()`。我正在尝试使用`BufferedReader`and来做到这一点`InputStreamReader`。因此，当我使用 num 中的 5 输入执行我的 main 方法的以下代码时。当我打印它时，它读为 53。我不知道为什么会这样。但是当我使用 'Integer.parseInt(br.readLine())' 方法时，它会给出准确的输出。当 read 方法应该读取 int 值时，它应该如何发生。请清除它。

```
 int num1;   
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter hte value of num1");
    //num1=Integer.parseInt(br.readLine());
    num1=br.read();
    System.out.println(num1);
    for(int i=0;i<num1;i++)
    {
        for(int j=0;j<=i;j++)
        {
            System.out.print(j+"\t");

        }
        System.out.println();
    } 
```

这是我的第一个问题，所以请忽略那些愚蠢的错误，我已尽我所能写出来。谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:35:13.523

> 当我打印它时，它读为 53。

是的，它会的。因为您正在调用`read()`which 返回单个字符，或者 -1 表示数据结束。

字符“5”的 Unicode 值为 53，这就是您所看到的。`int`（毕竟，您的变量是 a 。）如果您`num1`转换为 a `char`，您将看到 '5' 。

当您想将整数的*文本表示形式*转换为*整数值*时，通常会使用诸如`Integer.parseInt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:39:43.943

Bufferreader 将读取您需要使用以下方法将其转换为 int 的 unicode 值：

Integer.parseInt(num1) 或 Character.getNumericValue(num1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:40:43.410

53 是 '5' 的 ASCII，转换 ASCII 以打印出正确的字符串。

# python - 在 Python 数组中查找最低的相邻索引

> ID：15546384
> 
> 赞同：2
> 
> 时间：2013-03-21T11:33:37.473
> 
> 标签：python, numpy

我有一个问题，我们应该编写一个函数，当给定二维数组的输入时，它将返回每个索引的最低值相邻索引的行和列中的偏移量；一个数组表示每个索引的偏移量（以行为单位），一个数组表示每个索引的偏移量（以列为单位）。例如，如果索引的最低相邻单元格在下一行右一列，则偏移量为 1,1；如果最低相邻单元格在左侧，则偏移量为 0，-1；如果它是其相邻单元格中的最低单元格，则偏移量为 0,0。

因为我找不到更快和正确的方法来执行此操作，所以我编写了一个 while 循环，该循环将遍历每个索引并查看点 [i,j] 的哪些周围索引低于所有其他周围索引使用 a.all()：

```
def findLowNhbr( terrain ):
    """Creates two 2D-arrays the shape of terrain consisting
    of the offsets (row and column) to the neighbor with the minimum eleveation"""
    rowOffset = np.zeros_like(terrain)
    colOffset = np.zeros_like(terrain)

for i in range(len(terrain)):
    if i == 0:
        rowOffset[i] = 0
        colOffset[i] = 0
    elif i == (len(terrain)-1):
        rowOffset[i] = 0
        colOffset[i] = 0
    else:
        for j in range(len(terrain[i])):
            if j == 0 or j == len(terrain[i])-1:
                rowOffset[:,j] = 0
                colOffset[:,j] = 0
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i-1,j-1]).all():
                rowOffset[i,j] = -1
                colOffset[i,j] = -1
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i,j-1]).all():
                rowOffset[i,j] = 0
                colOffset[i,j] = -1
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i+1,j-1]).all():
                rowOffset[i,j] = 1
                colOffset[i,j] = -1
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i-1,j]).all():
                rowOffset[i,j] = -1
                colOffset[i,j] = 0
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i+1,j]).all():
                rowOffset[i,j] = 1
                colOffset[i,j] = 0
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i-1,j+1]).all():
                rowOffset[i,j] = -1
                colOffset[i,j] = 1
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i,j]).all():
                rowOffset[i,j] = 0
                colOffset[i,j] = 1
            elif (terrain[i-1:i+2,j-1:j+2]>=terrain[i+1,j+1]).all():
                rowOffset[i,j] = 1
                colOffset[i,j] = 1
            else:
                rowOffset[i,j] = 0
                colOffset[i,j] = 0
return rowOffset, colOffset 
```

运行需要很长时间，但它确实运行。我无法想象我实际上是在以最有效的方式做到这一点。任何输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:20:29.977

这应该或多或少以矢量化方式进行，暂时忽略边界处的一些问题，您可以通过在边缘周围使用重复值填充输入数组并修剪输出来避免这些问题

```
import numpy as np

np.random.seed(0)
terrain = np.random.rand(10,10)

offsets = [(i,j) for i in range(-1,2) for j in range(-1,2)]

stacked = np.dstack( np.roll(np.roll(terrain,i,axis=0),j,axis=1) for i, j in offsets)

offset_index = np.argmin(stacked,axis=2)
output = np.array(offsets)[offset_index] 
```

**解释**

*   将所有偏移量堆叠到 NxMx9 数组中
*   找到沿最后一个轴的最小元素 (argmin) 的索引`axis=2`
*   我们通过使用结果来索引最后一行中的偏移量，将此索引转换为偏移向量数组

获取所有初始偏移量的另一种可能更简洁的方法是：

```
from itertools import product
offsets = list(product((-1, 0, 1), (-1, 0, 1))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:51:17.973

我喜欢 E 先生将所有周围值堆叠在一个维度中的基本想法，但我认为有更好的方法来创建堆叠数组并将返回的值转换`np.argmin`为索引对：

```
from numpy.lib.stride_tricks import as_strided

rows, cols = 100, 100
win_rows, win_cols = 3, 3 # these two should be odd numbers
terrain = np.random.rand(rows, cols)

# This takes a windowed view of the original array, no data copied
win_terrain = as_strided(terrain, shape=(rows-win_rows+1, cols-win_cols+1,
                                         win_rows, win_cols),
                         strides=terrain.strides*2)
# This makes a copy of the stacked array that will take up x9 times more memory
# than the original one
win_terrain = win_terrain.reshape(win_terrain.shape[:2] + (-1,))

indices = np.argmax(win_terrain, axis=-1)
offset_rows, offset_cols = np.unravel_index(indices,
                                            dims=(win_rows, win_cols))
# For some odd reason these arrays are non-writeable, so -= won't work
offset_rows = offset_rows - win_rows//2
offset_cols = offset_cols - win_cols//2 
```

结果数组只有`(98, 98)`，即缺少第一列和最后一列和行，因为它们周围没有完全定义的窗口。

# java - 如何使用 Java 监视来自/到 servlet 的 HTTP 请求和响应

> ID：15546389
> 
> 赞同：3
> 
> 时间：2013-03-21T11:33:49.843
> 
> 标签：java, multithreading, jakarta-ee, servlets, executor

我正在使用 servlet（版本 7）测试用 Java EE 编写的 Web 应用程序。我正在向我的 servlet 发送大量 HTTP 请求，我想知道所有请求何时完成。

要发送请求，我正在使用执行程序。另外我不知道这是否是最有效的方法。

```
 for (int i=0; i < numRequests; i++) {
     ExecutorService executor = Executors.newFixedThreadPool(1); 
     Future<util.Response> responseFromServlet = null;
        responseFromServlet = executor.submit(new util.Request(new URL(url)));
     if ( i !=  numRequests -1 ) {
        executor.shutdown();
     } else {
        responseFromServlet.get().getBody(); // suspensive call for last invocation
        executor.shutdown();
     }
  } 
```

实际上，执行器等待最后一个调用的 HTTP 请求的结束，但它通常不是最后一个完成的。

我认为创建一个等待每个 HTTP servlet 响应的新线程是疯狂的。我无法生成 100-200-300 个线程，每个请求一个！

那么有没有办法了解所有 servlet 何时结束执行？如果需要，我可以修改我的 servlet。

=== 编辑 ===

更准确地说，这里是 Request 类的实现：

```
public class Request implements Callable<Response> {
  private URL url;

  public Request(URL url) {
      this.url = url;
  }

  @Override
  public Response call() throws Exception {
      return new Response(url.openStream());
  }
} 
```

这就是 Response 类：

```
public class Response {
  private InputStream body;

  public Response(InputStream body) {
      this.body = body;
  }

  public InputStream getBody() {
      return body;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:04:49.433

使用执行器很好，您可能希望增加 ThreadPool 的大小，尽管让更多并发线程执行您的请求。

使用初始化的[CoutnDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)`numRequests`等待所有线程完成。

`util.Request`必须调用`latch.countDown()`它的`run`方法

代码看起来像这样（手写 - 未经测试）

```
ExecutorService executor = Executors.newFixedThreadPool(n);
final CountDownLatch latch = new CountDownLatch(numRequests); 
for (int i=0; i < numRequests; i++) {

     executor.submit(new util.Request(new URL(url), latch));
}
latch.await(someValue, TimeUnit.SECONDS) 
```

` **编辑**

重新实现`util.Request`做类似的事情

```
 public class Request implements Callable<Response> {
  final private URL url;
  final private CountDownLatch latch;

  public Request(URL url, CountDownLatch latch) {
      this.url = url;
      this.latch = latch;
  }

  @Override
  public Response call() throws Exception {

       try {
          return new Response(url.openStream());
       } 
       catch (Exception e) {

          //do something useful
       }
       finally {
          latch.countDown();
       }
  }
} 
```

您可能希望在对闩锁进行倒计时之前使用您的响应流，以验证您是否从服务器获得了您期望的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:32:24.060

如果您正在使用此程序执行负载测试，或者甚至其他情况，我强烈建议您改用[Jmeter](http://jmeter.apache.org/)。Jmeter 已经完成了您正在尝试做的事情，并且有许多插件可以让您安排负载/线程数/时间段等。您还可以通过各种图表监控所有 HTTP 请求。

为您的 servlet 编写测试将[花费您不到 5 分钟](http://jmeter.apache.org/usermanual/build-web-test-plan.html)的时间。图表也很容易生成。

![jmeter图](../Images/b2da05b6e3aa825b9addc1afd89a9021.png)

[如果您仍想使用您的自定义程序来联系 servlet，您始终可以限制请求的数量并通过线程池执行程序使用阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#ThreadPoolExecutor%28int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue%29)备份它们。

最后，不要修改 servlet。您应该能够将其作为黑匣子进行监控。

# iphone - 如何根据 webview 高度修复 tableviewcell 的高度？（我在每个 tableviewcell 中加载 webview）

> ID：15546391
> 
> 赞同：3
> 
> 时间：2013-03-21T11:33:52.580
> 
> 标签：iphone, objective-c, uitableview

//`I am loading **HTML file** in **UIWebview** which is located on **tableviewcell**.`

我想根据 HTML 文件高度修复单元格的高度。

**注意：**每个单元格的加载 HTML 文件都会不同。（每个 HTML 文件的高度不是恒定的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:55:54.853

`UIWebView`要获取对象的高度，**首先需要加载它们**。然后在您的委托方法中，`UIWebView`您可以根据下面给出的 html 内容获取高度。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"%f",myWebView.scrollView.contentSize.height);
} 
```

`UIWebView`你也可以像这样通过JS插入获得高度

```
[myWebView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"]; 
```

在`webViewDidFinishLoad`方法中，您必须**根据 webview object tag 存储高度**。

之后加载您的表格并在下面的方法中**相应地给出高度**。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:05:49.380

如果我理解正确..

在这里，您为 cell.textLabel 设置 cell.textLabel.lineBreakMode 和行数。（0 - 无穷大）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";

   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
       cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                   reuseIdentifier:CellIdentifier] autorelease];

       cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
       cell.textLabel.numberOfLines = 0;
   }

   cell.textLabel.text = [news objectAtIndex:indexPath.row];

   return cell; 
```

}

在这里您需要计算单元格的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{    
    NSString *cellText = [news objectAtIndex:indexPath.row];
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica-Bold" size:20.0f];
    CGSize constraintSize = CGSizeMake(320.0f, MAXFLOAT);

    CGSize labelSize = [cellText sizeWithFont:cellFont 
                            constrainedToSize:constraintSize 
                                lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 20.0f;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:17:51.510

实现 UITableViewDelegate 方法 **- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath**

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *text = [self getItemForKey:kSummary];
    CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
    //You will need to define kDefaultCellFont
    CGSize labelSize = [text sizeWithFont:kDefaultCellFont 
                    constrainedToSize:constraintSize 
                        lineBreakMode:UILineBreakModeWordWrap];
    return labelSize.height + ANY_OTHER_HEIGHT;
} 
```

如果你想要更多检查[链接](http://sugartin.info/2012/11/19/add-dynamically-height-of-the-uitableview-for-the-comment-section/)

# jquery - 插入 html 段落 - jquery 做的比预期的要多

> ID：15546396
> 
> 赞同：0
> 
> 时间：2013-03-21T11:34:07.393
> 
> 标签：jquery, html

我从 MySQL 中提取一些文本并对其进行处理，然后通过 Ajax 调用将其发送回 jquery。

perl 中处理的一部分是用段落标签替换所有换行符。所以我想了一个简单的：

```
s#\n#</p><p>#g; 
```

....然后将整个字符串包装在：

```
<p> ... </p> 
```

...应该做的伎俩。它起作用了，但我发现了一个错字——我从正则表达式中省略了结束的 para 标记——所以它显示为：

```
s#\n#<p>#g; 
```

...但是当它到达浏览器时，每个段落仍然正确地包装在 P 标签中。因此，无论我在正则表达式中是否有结束 P 标记，jQuery 都会做正确的事情。

我的问题是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:35:01.220

实际上，这不是 jQuery 做的，而是浏览器。

当您插入 DOM 时，浏览器将尝试理解您的标签并关闭任何松散的末端。有些浏览器比其他浏览器做得更好。

# mysql - Symfony 2 控制台命令用于创建自定义数据库

> ID：15546397
> 
> 赞同：6
> 
> 时间：2013-03-21T11:34:07.483
> 
> 标签：mysql, symfony, console, doctrine, dbal

我正在开发一个 Symfony 2 项目，每个用户都有自己的数据库。在我的 config.yml 文件中，我为客户端设置了一个学说：dbal:orm，但没有连接属性，因为它们是在运行时设置并被所有用户引用。即我只有一个默认的 dbal 连接和两个 orm 连接，并且用户数量是无限的。

这工作正常，但我需要在用户注册时创建数据库和模式（FOS UserBundle）。在扩展的 userbundle 控制器中，我可以放置自己的逻辑。问题是我无法运行 'php app/console dictionary:database:create'，因为没有为新用户设置参数。

有没有办法为控制台命令指定自定义数据库参数？我可能可以通过一些非常丑陋的 mysql 命令来解决这个问题，但我宁愿不这样做。提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:22:50.563

您可以使用以下代码作为大纲创建自己的命令：

```
namespace Doctrine\Bundle\DoctrineBundle\Command;

use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Doctrine\DBAL\DriverManager;

class CreateDatabaseDoctrineCommandDynamically extends DoctrineCommand
{

    protected function configure()
    {
        $this
            ->setName('doctrine:database:createdynamic')
            ->setDescription('Creates the configured databases');
    }

    /**
     * {@inheritDoc}
     */
    protected function execute(InputInterface $input, OutputInterface $output)
    {
    /***
        **   Edit this part below to get the database configuration however you want
        **/
        $connectionFactory = $this->container->get('doctrine.dbal.connection_factory');
        $connection = $connectionFactory->createConnection(array(
        'driver' => 'pdo_mysql',
         'user' => 'root',
         'password' => '',
         'host' => 'localhost',
         'dbname' => 'foo_database',
        ));

        $params = $connection->getParams();
        $name = isset($params['path']) ? $params['path'] : $params['dbname'];

        unset($params['dbname']);

        $tmpConnection = DriverManager::getConnection($params);

        // Only quote if we don't have a path
        if (!isset($params['path'])) {
            $name = $tmpConnection->getDatabasePlatform()->quoteSingleIdentifier($name);
        }

        $error = false;
        try {
            $tmpConnection->getSchemaManager()->createDatabase($name);
            $output->writeln(sprintf('<info>Created database for connection named <comment>%s</comment></info>', $name));
        } catch (\Exception $e) {
            $output->writeln(sprintf('<error>Could not create database for connection named <comment>%s</comment></error>', $name));
            $output->writeln(sprintf('<error>%s</error>', $e->getMessage()));
            $error = true;
        }

        $tmpConnection->close();

        return $error ? 1 : 0;
    }
} 
```

# asp.net - 如何根据日期从文件夹中删除文件

> ID：15546399
> 
> 赞同：0
> 
> 时间：2013-03-21T11:34:23.433
> 
> 标签：asp.net, file

```
private void DeleteFiles()
{
    DirectoryInfo di = new DirectoryInfo("E:\\test");
    var files = di.GetFiles();
    var maxFile = files.Max(r => r.Length);

    foreach (FileInfo file in files.Where(r => r.Length < maxFile))
    {
        file.Delete();
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    this.DeleteFiles();
} 
```

在这段代码中，我现在根据大小删除文件我想要的是我想根据日期删除文件，例如：假设我昨天创建了 5 个文件，今天创建了 5 个文件，现在我想删除所有文件，除了谁的大小最大这两天我该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:42:59.640

您可以根据[`FileInfo.CreationTime`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.creationtime.aspx)属性选择文件，然后选择这些文件，例如：

```
private void DeleteFiles()
{
    DirectoryInfo di = new DirectoryInfo("E:\\test");
    var files = di.GetFiles();
    var maxFile = files.Max(r => r.Length);

    DateTime startDate = DateTime.Now.Date.AddDays(-1);
    DateTime endDate = DateTime.Now.Date;

    var filesToBeDeleted = files.Where(r=> (r.Length < maxFile)  
                                         && (r.CreationTime >= startDate &&
                                             r.CreationTime <= endDate));

    foreach (FileInfo file in filesToBeDeleted)
    {
        file.Delete();
    }
} 
```

您可以使用 FileInfo 等其他 DateTime 属性进行选择，例如[LastWriteTime](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)，您也可以为您的条件指定自己的开始和结束日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:36:33.287

你可以得到这样的时间

```
DateTime creationTime = File.GetCreationTime(@"c:\file.txt");
DateTime lastWriteTime = File.GetLastWriteTime(@"c:\file.txt");
DateTime lastAccessTime = File.GetLastAccessTime(@"c:\file.txt"); 
```

[http://www.csharp-examples.net/file-creation-modification-time/](http://www.csharp-examples.net/file-creation-modification-time/)

还比较使用时间`DateTime.Compare`

[http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)

# user-defined-functions - ERROR 1066：无法在 pig 中打开别名的迭代器

> ID：15546402
> 
> 赞同：3
> 
> 时间：2013-03-21T11:34:30.113
> 
> 标签：user-defined-functions, apache-pig

我正在运行一个猪脚本，如下所示

```
REGISTER '/home/vishal/FirstUdf.jar';
DEFINE UPPER com.first.UPPER();
A = LOAD '/home/vishal/exampleforPIG1' AS (exchange: chararray, symbol: chararray, date: int,value:float);
B= FOREACH A GENERATE com.first.UPPER(exchange);
DUMP B;

Following is my UDF in java

package com.first;

import java.io.IOException;

import org.apache.pig.EvalFunc;
import org.apache.pig.data.Tuple;
import org.apache.pig.impl.util.WrappedIOException;

@SuppressWarnings("deprecation")
public class UPPER extends EvalFunc<String> {
    public String exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0)
            return null;
        try {
            String str = (String) input.get(0);
            return str.toLowerCase();
        } catch (Exception e) {
            throw WrappedIOException.wrap(
                    "Caught exception processing input row ", e);
        }
    }
} 
```

现在当我尝试运行它时，它给了我以下错误

```
Pig Stack Trace

ERROR 1066: Unable to open iterator for alias B

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias B
    at org.apache.pig.PigServer.openIterator(PigServer.java:866)
    at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:683)
    at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:190)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:166)
    at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
    at org.apache.pig.Main.run(Main.java:430)
    at org.apache.pig.Main.main(Main.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) Caused by: java.io.IOException: Job terminated with anomalous status FAILED
    at org.apache.pig.PigServer.openIterator(PigServer.java:858)
    ... 12 more 
```

为什么是在 pig 脚本中它无法为 B ie 打开迭代器（它无法为以下行分配迭代器）

B = FOREACH A GENERATE com.first.UPPER(exchange);

“exampleforPIG1”文件具有以下数据

```
NYSE    CPO 2009-12-30  0.14
NYSE    CPO 2009-09-28  0.14
NYSE    CPO 2009-06-26  0.14
NYSE    CPO 2009-03-27  0.14
NYSE    CPO 2009-01-06  0.14
NYSE    CCS 2009-10-28  0.414
NYSE    CCS 2009-07-29  0.414
..
..
etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:45:38.353

那么两件事，

1.  如果您只想将类型转换为大写/小写，为什么不使用内置函数 UPPER/LOWER。您可以在参考手册中找到用法。

2.  如果要继续用同样的方法，应该是
    B = FOREACH A GENERATE UPPER(exchange);
    您已经将其定义为 DEFINE UPPER com.first.UPPER();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T14:11:58.213

我遇到了这个问题，在打破我的脑袋后，我发现这个缺陷存在于输入数据中，即使我是通过替换 null 来清理的。我有一条记录，其中包含“（null）”之类的字段，这导致一切都失败了。如果您有这样的不良记录，只需检查一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T07:48:54.263

它是对我造成此错误的 avro 版本。我使用的是 avro-1.7.6.jar。将其更改为 avro-1.4.0.jar 解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T18:54:05.873

您是否正在针对 hadoop 2.2 运行 pig 0.12.0 或更早版本的 jar，如果是这种情况，那么我设法通过从 src 重新编译 pig jar 来解决此错误，这里是 debian 类型框所涉及步骤的摘要

1.  下载 pig-0.12.0.tar.gz
2.  解压jar并设置权限
3.  然后在解压后的目录中使用 'ant clean jar -Dhadoopversion=23' 编译 src 然后你需要在 maven 中的类路径中获取 jar，例如，在同一目录中

> mvn install:install-file -Dfile=pig.jar -DgroupId={set a groupId}- DartifactId={set a artifactId} -Dversion=1.0 -Dpackaging=jar

或者如果在 Eclipse 中，则将 jar 添加为外部库/依赖项

我得到了你试图在 hadoop 2.2.0 中运行 pig 12 的确切跟踪，并且上述步骤对我有用

更新我在猪吉拉上发布了我的问题，他们做出了回应。他们已经为 hadoop2 pig-h2.jar 编译了一个猪 jar，这里[http://search.maven.org/#artifactdetails|org.apache.pig|pig|0.12.0|jar](http://search.maven.org/#artifactdetails%7Corg.apache.pig%7Cpig%7C0.12.0%7Cjar) 这个 jar 的 maven 标签是

> org.apache.pig pig h2 0.12.0 提供

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-23T07:09:14.287

安全模式也是此异常的原因运行以下命令

hadoop dfsadmin -safemode 离开

# sql - 无法对表中的可为空列定义 PRIMARY KEY 约束

> ID：15546405
> 
> 赞同：2
> 
> 时间：2013-03-21T11:34:39.160
> 
> 标签：sql, sql-server, sql-server-2008

我最终创建了一个表`employee`，其中包含一个`empid`计算列，该列也是主键。

它是一个自引用表，列`managerid`引用回自身。

但是现在当我在添加更多列后保存表时，出现错误

> *“注册”表
> 无法创建索引“PK_Registration”。
> 无法在表“注册”中的可为空列上定义主键约束。
> 无法创建约束。请参阅以前的错误。*

但我的桌子工作得很好....

我想以图形方式在表格中工作，而不是每次进行更改时都进行编码

我无法以图形方式执行此错误的原因有 100 个表我不喜欢这样做编码它非常烦人

我想在 SQL Server 2008 Management Studio 中以图形方式进行，这可能吗？

这是我的桌子

```
CREATE TABLE [dbo].[Registration](
    [empid]  AS ('Sale_'+CONVERT([varchar](50),[id],(0))) PERSISTED NOT NULL,
    [id] [int] IDENTITY(900000,1) NOT NULL,
    [First_Name] [varchar](40) NULL,
    [Last_Name] [varchar](40) NULL,
    [Address] [varchar](40) NULL,
    [E_Mail] [varchar](40) NULL,
    [Country] [varchar](40) NULL,
    [Mobile_No] [varchar](40) NULL,
    [Designation] [varchar](40) NULL,
    [managerID] [varchar](55) NULL,
 CONSTRAINT [PK_Registration] PRIMARY KEY CLUSTERED 
(
    [empid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Registration]  WITH CHECK ADD  CONSTRAINT [FK_Registration_Registration] FOREIGN KEY([managerID])
REFERENCES [dbo].[Registration] ([empid])
GO

ALTER TABLE [dbo].[Registration] CHECK CONSTRAINT [FK_Registration_Registration]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:58:04.350

您不能使用 empid 作为主键。
使用 id 作为主键。
无论如何，使用“[int] IDENTITY”作为表的主键是最常用的主键方式。主键和聚集索引将控制存储。
我看不出使用 empid 作为主键有什么好处。
只需将 empid 设为计算列。对于查询，SQL Server 将看到它是计算列并且它只使用主键。然后 SQL 服务器将在其查询中仅使用主键。

# javascript - 使用 JS 'if' 语句检测图像是否被拖到 HTML5 画布上的正确位置

> ID：15546410
> 
> 赞同：0
> 
> 时间：2013-03-21T11:34:59.910
> 
> 标签：javascript, if-statement, html5-canvas

我在 HTML5 画布上有许多“可拖动”图像。画布上还显示了许多“描述框”图像，用户需要将每个可拖动的图像拖到其对应的描述框中。

画布上当前显示了四个描述框，我有一个函数用于检测图像是否已被拖动到其中一个框。每次将图像拖到一个框时，我都会检查它是否被拖到了正确的框 - 如果有，则图像被隐藏，但如果没有，它仍然可见。

所有可拖动图像都存储在一个数组中，我检查它们是否被拖动到正确框的方法是使用它们在数组中的位置，即如果它们在数组中的位置 0-9 之间，它们属于方框1；如果它们在位置 10-19，它们属于框 2，依此类推。

我一次为每个盒子添加一个“if”语句，它目前正在按前两个盒子的预期工作。我现在正在尝试为第三个框添加代码，但由于某种原因，当我添加它时，代码中断并且我在控制台中得到一个 ReferenceError。

这是函数当前的样子：

```
function isHit(mouseX, mouseY, obj){
  console.log("isHit has been called from within if statement in mousemove function");
  console.log("draggingImage variable value = " +draggingImage);
  if(draggingImage == true){
    console.log("if dragging image == true statment is being called");
    console.log("Value of selectedImage = " + selectedImage);
    console.log("Value of selectedImageArrayLocation = " + selectedImageArrayLocation);
    if(mouseY > 250){
        //console.log("Value of obj.shape.index = " +obj.shape.index);
        if((mouseX > 80) && (mouseX < 200) && (selectedImageArrayLocation >= 0) && (selectedImageArrayLocation <= numImagesAssets)){
            console.log("Correct");
            document.getElementById('tipsParagraph').innerHTML = "Correct! This is an asset because it is an item that can be bought or sold for cash.";
            selectedImage.hide();
            console.log("selectedImage has been removed: " + selectedImage);
        }else if((mouseX > 80) && (mouseX < 200) && (selectedImageArrayLocation > numImagesAssets)){
            console.log("Incorrect");
            console.log("Selected image array location: " + selectedImageArrayLocation);
            document.getElementById('tipsParagraph').innerHTML = "Incorrect! This icon is not an asset. It is not a physical item that would be bought or sold for cash. ";

        }else if((mouseX > 310) && (mouseX < 430) && (selectedImageArrayLocation > numImagesAssets) && (selectedImageArrayLocation <= numImagesAssets + numImagesLiabilities)){
            document.getElementById('tipsParagraph').innerHTML = "Correct! This is a liability because it is an item or service that the company is required to make regular payments for. ";
            selectedImage.hide();
            console.log("selectedImage has been removed: " + selectedImage);
        }else if((mouseX > 310) && (mouseX < 430) && ((selectedImageArrayLocation <= numImagesAssets) || (selectedImageArrayLocation > numImagesAssets + numImagesLiabilities))){
            console.log("Incorrect. This icon is not a liability.");
            console.log("Selected image array location: " + selectedImageArrayLocation);
            document.getElementById('tipsParagraph').innerHTML = "Incorrect! This icon is not a liability. It is not an item or service that the company is required to make regular payments for. ";

        }else if((mouseX > 540) && (mouseX < 660) && ((selectedImageArrayLocation > numImagesAssets + numImagesLiabilities) && (selectedImageArrayLocation <= numImagesAssets + numImagesLiabilities + numImagesIncome))){
            document.getElementById('tipsParagraph').innerHTML = "Correct! This is a source of income because it is a product or service which the company sells to its customers for cash. ";
            selectedImage.hide();
            console.log("Selected image has been removed: " + selectedImage);
        }/*else if((mouseX > 540) && (mouseX < 660) && ((selectedImageArrayLocation <= numImagesAssets + numImagesLiabilities) && (selectedImageArrayLocation > numImagesAssets + numImagesLiabilities + numImagesIncome))){
            console.log("Incorrect. This icon is not a source of income.");
            console.log("Selected image array location: " + selectedImageArrayLocation);
            document.getElementById('tipsParagraph').innerHTML = "Incorrect! This icon is not a source of income.");
        } */
    }
  }
} 
```

'if' 语句是成对的，所以前两个属于第一个描述框，后两个属于第二个，等等。

目前，我只有第一个“if”语句适用于第三个描述框......我已经为它编写了第二个“if”语句，其方式与前两个描述框完全相同，但对于某些原因，当我取消注释“else if”子句时，在浏览器中查看我的页面，并将图像拖到不属于它的描述框中，我收到一个控制台错误，上面写着：

```
ReferenceError: isHit is not defined 
```

该错误正在抱怨该行：

```
var isItHit = isHit(mouseX, mouseY, obj); 
```

这是在我的`mousemove`函数中，它也被所有其他“if”语句调用，所以我不明白为什么这次调用它时决定中断......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:35:38.120

啊，好的，我发现了问题所在...在`document.getElementById`最后一个 else if 子句的行中，我有`)`太多了。通过将该行更改为：

```
document.getElementById('tipsParagraph').innerHTML = "Incorrect! This icon is not a source of income."; 
```

即删除`)`行尾的。

# android - 如何获取默认家庭应用程序？

> ID：15546414
> 
> 赞同：0
> 
> 时间：2013-03-21T11:35:09.223
> 
> 标签：android, default, android-launcher

我想获得默认的家庭应用程序名称。为此我使用

```
Intent intent = new Intent("android.intent.action.MAIN");
        intent.addCategory("android.intent.category.HOME");
        intent.addCategory("android.intent.category.DEFAULT");
        ResolveInfo resolveinfo =getApplicationContext().getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY); 
defaultHomeName = resolveinfo.activityInfo.name; 
```

这将返回**com.android.internal.app.ResolverActivity** 并且当我尝试关注

```
 List<RunningTaskInfo> runningTasks =((ActivityManager) getApplicationContext().getSystemService("activity")).getRunningTasks(1);
    if (runningTasks != null && !runningTasks.isEmpty()) {
        for (int i = 0; i < runningTasks.size(); i++) {
            RunningTaskInfo runningtaskinfo = (RunningTaskInfo) runningTasks.get(i);

        }
    } 
```

在主屏幕上时，在此内部获得主名称为**com.sec.android.app.twlauncher.Launcher 。**

为什么同一个应用程序显示不同的名称？如何为所有设备的默认家庭应用程序获取唯一名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:55:49.493

> 为什么同一个应用程序显示不同的名称？

因为它们不是同一个应用程序。

具体来说，`com.android.internal.app.ResolverActivity`是解析器活动，我们倾向于将其称为活动选择器，或者简称为“选择器”。这是`resolveActivity()`因为有两个或多个活动可以处理您选择的`Intent`.

> 如何为所有设备的默认家庭应用程序获取唯一名称？

通过使用`queryIntentActivities()`on`PackageManager`而不是`resolveActivity()`，您将获得所有已安装主屏幕的列表。如果此列表上有多个条目，则在过滤掉您自己的主屏幕（如果您正在编写一个）之后，您没有必要的可靠方法来确定其中哪个是“默认主应用程序”。

# android - 如何根据内容动态收缩 WebView 大小？

> ID：15546416
> 
> 赞同：27
> 
> 时间：2013-03-21T11:35:22.423
> 
> 标签：android, performance, android-layout, webview, android-widget

[可以从这个问题](https://stackoverflow.com/questions/3509158/scroll-view-doest-resize-when-the-content-of-child-view-changes)中理解问题的详细解释，因为用户添加了图像以更好地解释它。

我在我的 WebView 中加载 Html 内容。我的布局有很多视图，WebView 放置在 ScrollView 内（根据布局要求）。请不要回答为 - `"Don't put WebView inside ScrollView"`。我知道将 WebView 放在 ScrollView 中并不是一件好事，但根据要求我需要这样做。

所以，我有左片段（显示列表项）和右片段（显示从左片段选择列表项时反映的数据）。现在，首先，当我在 WebV 中加载 Html 内容时，它显示正确。之后，当我用新的 Html 内容刷新 WebView 时，就会出现问题。

假设，我的第一个 Html 内容有 100 行，它正确显示，然后我用新的 40 行 Html 内容重新加载 WebView，然后 WebView 没有缩小并适合 40 行的内容，它仍然保持只要 100在底部显示白色/空白区域的线条。

因此，似乎 WebView 能够从先前加载的较​​少内容重新调整自身大小，但当内容小于先前加载的内容时无法重新调整自身大小。

我试过很多方法，

*   添加`android:hardwareAccelerated="true"`清单
*   [这个博客](http://vision-apps.blogspot.in/2012/08/android-webview-tips-tricks.html)
*   还有许多其他方式和博客
*   此外，我曾尝试使用`mWebView.clearView();`哪些原因来重新调整 WebView 的大小，但有时 WebView 开始闪烁，这很烦人。类似于[这个视频](http://www.youtube.com/watch?v=yL7tQpRSFe0)

但是，找不到任何合适的解决方案。如果你们中的任何人之前有同样的问题，请告诉我我可以应用的最佳解决方案。

**更新 -**

在进一步谷歌搜索之后，这似乎是 Honeycomb 中的一个众所周知的问题。[这个问题](https://stackoverflow.com/questions/7467548/android-webview-is-making-problem-in-honeycomb)也表明了类似的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T05:01:41.307

似乎没有办法在加载后动态调整 WebView（减小）其大小。所以，唯一可以解决我的问题的是重新加载完整的 WebView。

因此，我没有在 XML 中定义 Fragment，而是通过每次动态添加 Fragment 来改变我的东西。通过它我能够解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:06:25.373

这是一个已知问题，`WebView`并且某些可用的解决方案不适用于所有设备。

我尝试了 SO 答案中给出的许多解决方案，并在互联网上进行了搜索，但没有一个对我有用。

我最终*删除了 WebView 并在 Layout 中的相同位置再次添加了 WebView*

这是演示代码，

```
 final RelativeLayout rl = new RelativeLayout(this);
        myWebView = new WebView(this);
        myWebView.setBackgroundColor(Color.GRAY);
        myWebView.loadUrl("file:///android_asset/1.htm");
        rl.addView(myWebView);  // ******* Added At Index 0
        Button btn = new Button(this);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (!flg) {
                    rl.removeViewAt(0);
                    myWebView = new WebView(MainActivity.this);
                    myWebView.setBackgroundColor(Color.GRAY);
                    myWebView.loadUrl("file:///android_asset/3.htm");
                    rl.addView(myWebView, 0, new RelativeLayout.LayoutParams(
                            new LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT)));
                    flg = true;
                } else {
                    rl.removeViewAt(0);
                    myWebView = new WebView(MainActivity.this);
                    myWebView.setBackgroundColor(Color.GRAY);
                    myWebView.loadUrl("file:///android_asset/1.htm");
                    rl.addView(myWebView, 0, new RelativeLayout.LayoutParams(
                            new LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT)));
                    flg = false;
                }
            }
        });
        rl.addView(btn); // ******* Added At Index 1
        setContentView(rl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T07:38:12.293

伙计们，我似乎找到了本地内容的解决方案。您应该在加载新内容之前调用 webView.reload() - 它以某种方式调整大小而不会闪烁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T12:41:32.220

在这里，我根据软键盘显示更改了 webview 的高度

```
 activityRootView = (RelativeLayout) findViewById(R.id.webview1);
            mWebView = (WebViewEx) WebViewActivity.this.findViewById(R.id.webview);

            activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new    OnGlobalLayoutListener() {
                public void onGlobalLayout() {
                    Rect r = new Rect();
                    //r will be populated with the coordinates of your view that area  still visible.
                    activityRootView.getWindowVisibleDisplayFrame(r);

                    int heightDiff = activityRootView.getRootView().getHeight() - (r.bottom - r.top);
                    if(heightDiff != lastValue) {
                        if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
                            Log.i("Screen Size Changed","KeyBoard Displaying"+ r.bottom);

                            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
                             params.height=r.bottom;
                             mWebView.setLayoutParams(params);
                            //appView.sendJavascript("onKeyBoardShow(" + r.bottom + ");");
                        } else {
                           /// appView.sendJavascript("onKeyBoardHide();");
                            Log.i("Screen Size Changed","KeyBoard not displaying" +r.bottom);
                            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
                             params.height=r.bottom;
                             mWebView.setLayoutParams(params);
                        }
                        lastValue = heightDiff;
                    }
                 }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:28:23.297

我还没有尝试过，但你为什么不在你加载新内容之前通过再次设置 weblayout 参数来尝试一下。即设置高度和宽度来包装内容。如果发现成功请回复。如果找不到成功，最好选择 javascipt

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-10T18:43:27.473

我将 WebView 的可见性设置为 Gone，并在 WebView 消失时将内容加载到 WebView 中。然后我在让 DOM 和 JS 加载后将可见性设置为可见，它似乎正确地绘制了长度。由于没有像 onPageFinished 这样的回调来确定 JS 何时完成执行，所以在将可见性设置为 true 之前，我给 WebView 延迟了一秒。此解决方法足以满足我的目的，因此希望它可以满足你们中的一些人的需求！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-10T07:37:47.560

每次创建 webview 的对象并为其提供参数都是一种痛苦，相反，您可以执行以下步骤，它会起作用

*   将一个空白的 html 文件放入`assets`文件夹并为其命名 `empty.html`

*   称呼`webview.loadUrl("file:///android_asset/empty.html");`

*   现在加载您的内容。

Webview 会缩小它的高度。

确保您**没有放入**任何内容`empty.html`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-25T07:41:19.313

[**这**](https://stackoverflow.com/a/10930562/541620)会变魔术！它说

> Android 属性：android:layout_weight = "布局中的 1 应该可以工作...

在我的例子中，WebView 在RelativeLayout 中。所以这样做 android:layout_height="wrap_content" 就像一个魅力:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-25T15:02:06.917

正如@Ankit 指出的那样，转到一个空白页面可能会有所帮助。不过，“about:blank”更好。

# click - jquery点击事件只运行一次

> ID：15546417
> 
> 赞同：2
> 
> 时间：2013-03-21T11:35:25.530
> 
> 标签：click, jquery

我的点击事件有问题。它运行一个 1 次。例子：

我有 3 页（1 2 3）。当我单击 2 时，它起作用了。然后在第 3 页，它再次工作。但我再次点击 2 不起作用。事件未触发。

```
$("div .top.pagination a").click(function(){  

 PagNrClick = $(this).text();
            PagNrOld = $(".top.pagination .current").text();    
            RegMin = (NrReg-1)*(PagNrClick-1);

            //altera a pagina activa para por selecionar
            $(".top.pagination .current").replaceWith('<a title="'+PagNrOld+'" href="#'+PagNrOld+'" rel="history">'+PagNrOld+'</a>');
            //altera a pagina que clicou para activa
            $(this).replaceWith('<span class="current">'+PagNrClick+'</span>');             

            if(RegMin%2 || RegMin%0){
                RegMinValue = RegMin;
            }else{
                RegMinValue = RegMin+1;
            }
            //:gt(0) - greater then 0 não mostra a 1º posição(BUG DO JQUERY??????)
            if(PagNrClick==1){
                $("#thumbs li:eq(0)").show();
            }
            //esconde todos os registos e mostra os 12 proximos registos
            $(".thumbs li:visible").hide();
            $(".thumbs li:gt("+RegMinValue+"):lt("+NrReg+")").show();
}); 
```

我已将代码插入 jsfiddle

[http://jsfiddle.net/B2Usk/1/](http://jsfiddle.net/B2Usk/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:40:07.173

这与`replaceWith`替换 DOM 中的 Html 并有效地取消绑定事件的调用有关。如果您使用 jQuery `prop`、`attr`和`text`函数来更新链接属性，这应该可以解决问题。

或者，将事件处理程序存储在变量中并在处理程序中重新绑定也可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:45:27.490

```
$("div .top.pagination").on('click', 'a', function(){
    /* ... Youre event code ... */
}); 
```

您也可以在以前的版本中使用 .live() 。但它已被弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:43:06.873

替换`click`为`on`

**[演示](http://jsfiddle.net/pintu31/B2Usk/2/)**

```
$("div .top.pagination").on('click', 'a',function(){
            PagNrClick = $(this).text();
            PagNrOld = $(".top.pagination .current").text();    
            RegMin = (NrReg-1)*(PagNrClick-1);

            //altera a pagina activa para por selecionar
            $(".top.pagination .current").replaceWith('<a title="'+PagNrOld+'" href="#'+PagNrOld+'" rel="history">'+PagNrOld+'</a>');
            //altera a pagina que clicou para activa
            $(this).replaceWith('<span class="current">'+PagNrClick+'</span>');             

            if(RegMin%2 || RegMin%0){
                RegMinValue = RegMin;
            }else{
                RegMinValue = RegMin+1;
            }
            //:gt(0) - greater then 0 não mostra a 1º posição(BUG DO JQUERY??????)
            if(PagNrClick==1){
                $("#thumbs li:eq(0)").show();
            }
            //esconde todos os registos e mostra os 12 proximos registos
            $(".thumbs li:visible").hide();
            $(".thumbs li:gt("+RegMinValue+"):lt("+NrReg+")").show();
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:40:28.660

发生这种情况是因为您正在删除`<a>`-Tag，因此单击处理程序分离。

考虑使用`.on()`而不是点击。它的行为和语法在这里描述：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

基本上代替`$("div .top.pagination a").click(function(){ /* ... */ });`

您调用以下命令：

```
$("div .top.pagination").on('click', 'a', function(){
    /* ... Youre event code ... */
}); 
```

# python - Python：构建嵌套字典并迭代 - 完成此任务的最佳方法？

> ID：15546419
> 
> 赞同：1
> 
> 时间：2013-03-21T11:35:28.990
> 
> 标签：python, csv, dictionary, loops

我正在使用 csv 文件来提取数据并将它们放入字典中以进行分析。CSV 文件位于一个目录中，并且每个目录中都有多个 csv 文件：

```
Example:
Dir: X has several csv files, file name can be X-ax-somefile.csv, X-bx-somefile2.csv
csv files have the header: level,user-id 
```

我建立了一个字典来存储数据并进行一些计算。最后，我将得到以下数据结构：

```
{'de': {'en': {'level1': 0, 'level2': 0, 'level3': 10}}, 'en': {'si': {'level2': 1, 'level3': 5, 'level5': 5, 'levelN': 5}, 'en': {'level1': 0}, 'ta': {'level1': 1, 'level2': 1, 'level3': 1, 'level4': 5}}} 
```

我编写了以下代码来迭代这个数据结构，但是，这是最好的迭代方式吗？在这个问题中我已经展示了如何构建数据结构，这是构建数据结构的最佳方式。

这是我的代码：

```
for lang1, lang2_dict in template_count.iteritems():
    if type(lang2_dict):
        for lang2, values in lang2_dict.iteritems():
            print lang2, values 
```

这就是我构建字典的方式：

```
def templateUserCountStats(template_file, csv_file):
    template_count_dict = dict()
    for lang in getLanguageCodes(csv_file):
        template_count_dict[lang] = dict()
        lang_dir = os.path.join(template_file, lang)
        try:
            for filename in os.listdir(lang_dir):
                path = os.path.join(lang_dir, filename)
                if re.search(r'-.+-template-users-data.csv$',filename):
                    lang2 = filename.split("-")[1]
                    with open(path, 'rb') as template_user_data_file:
                        try:
                            reader = csv.reader(template_user_data_file)
                            reader.next()
                            template_count_dict[lang][lang2] = dict()
                            template_count_dict[lang][lang2]['level1'] = 0
                            template_count_dict[lang][lang2]['level2'] = 0
                            template_count_dict[lang][lang2]['level3'] = 0
                            template_count_dict[lang][lang2]['level4'] = 0
                            template_count_dict[lang][lang2]['level5'] = 0
                            template_count_dict[lang][lang2]['levelN'] = 0
                            print filename
                            for row in reader:
                                if int(row[0]) == 1:
                                    template_count_dict[lang][lang2]['level1'] = template_count_dict[lang][lang2]['level1'] + 1
                                if int(row[0]) == 2:
                                    template_count_dict[lang][lang2]['level2'] = template_count_dict[lang][lang2]['level2'] + 1
                                if int(row[0]) == 3:
                                    template_count_dict[lang][lang2]['level3'] = template_count_dict[lang][lang2]['level3'] + 1
                                if int(row[0]) == 4:
                                    template_count_dict[lang][lang2]['level4'] = template_count_dict[lang][lang2]['level4'] + 1
                                if int(row[0]) == 5:
                                    template_count_dict[lang][lang2]['level5'] = template_count_dict[lang][lang2]['level5'] + 1
                                if row[0] == 'N':
                                    template_count_dict[lang][lang2]['levelN'] = template_count_dict[lang][lang2]['levelN'] + 1
                        except csv.ERROR as e:
                                logging.error(e)
                else:
                    continue
        except Exception, e:
            logging.exception(e)
    return template_count_dict 
```

除了我愿意接受有关构建此数据结构的建议之外，这是一种更加 Python 的方式，如果您需要以下示例：

```
level,user-id
1,25
1,74
1,105
3,708
3,530
3,2568
3,2730
3,2730
2,376
2,371
2,2317
2,2095
N,560
N,110
N,119
N,1059
N,1625 
```

# oracle - 对可能出现新价值的所有不同值进行分区

> ID：15546423
> 
> 赞同：1
> 
> 时间：2013-03-21T11:35:36.210
> 
> 标签：oracle, unique, database-partitioning

我有一个用例，我需要根据城市对 Oracle 表进行分区。现在我事先不知道这座城市。所以在这种情况下我将如何创建分区。（顺便说一句，我已经完成了哈希分区（它不能确保两个城市的数据在同一个分区中）但我想让不同城市的数据在不同的分区中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:33:46.123

最明智的方法是使用存储过程进行插入/更新，以确保分区存在（如 Egor Skriptunoff 所建议的那样）。

如果您不想使用这种方法，您可以使用带有预定义城市列表的列表分区和将存储“未知”城市的所有值的默认分区。然后，您可以设置定期清理作业，拆分“未知”分区并为新城市创建分区：

设置三个已知城市的分区表

```
create table shops (
  pk number not null primary key, 
  name varchar2(30) not null, 
  city varchar2(30) not null)
partition by list(city)
(partition shops_paris values ('Paris'),
 partition shops_berlin values ('Berlin'),
 partition shops_london values ('London'),
 partition shops_unknown values (default)
 ); 
```

添加一些数据（请注意，我们有一个“未知”城市，慕尼黑）

```
insert into shops(pk, name, city) values (1, 'Manufactum', 'Munich');
insert into shops(pk, name, city) values (2, 'KaDeWe', 'Berlin');
insert into shops(pk, name, city) values (3, 'Harrods', 'London');
insert into shops(pk, name, city) values (4, 'Galeries Lafayette', 'Paris'); 
```

检查我们未知的分区 -> 我们有一个新城市，“慕尼黑”

```
select * from shops partition (shops_unknown); 
```

创建新分区

```
alter table shops split partition shops_unknown 
  values ('Munich') into (partition shops_munich, partition shops_unknown); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:13:15.760

应显式创建新分区。
将所有关联的逻辑包含在一个过程中：

*   检查分区是否存在
*   如果需要，创建一个新的
*   将值插入表中

# zend-framework2 - Zend Framework 2 用户指南中的ServiceManager 对象在哪里初始化？

> ID：15546425
> 
> 赞同：1
> 
> 时间：2013-03-21T11:35:41.427
> 
> 标签：zend-framework2, zend-framework-modules, servicemanager

在 Zend Framework 2 用户指南的专辑示例中，模型配置如下：

```
<?php
namespace Album;

// Add these import statements:
use Album\Model\Album;
use Album\Model\AlbumTable;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\TableGateway;

class Module
{
    // getAutoloaderConfig() and getConfig() methods here

    // Add this method:
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'Album\Model\AlbumTable' =>  function($sm) {
                    $tableGateway = $sm->get('AlbumTableGateway');
                    $table = new AlbumTable($tableGateway);
                    return $table;
                },
                'AlbumTableGateway' => function ($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $resultSetPrototype = new ResultSet();
                    $resultSetPrototype->setArrayObjectPrototype(new Album());
                    return new TableGateway('album', $dbAdapter, null, $resultSetPrototype);
                },
            ),
        );
    }
} 
```

变量`$sm`是一个`Zend\ServiceManager\ServiceManager`对象。但是它是如何/何时/在哪里创建/初始化的？

编辑：

我想知道的是：如何/在哪里`$sm` 获得它的价值（并成为一个 ServiceManager 对象）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:50:34.850

当您从服务管理器检索服务时，如果它是工厂，它会将自身的实例作为第一个参数传递给负责创建服务的任何可调用对象，这通常是闭包（如您的示例中所示），或者工厂类的 createService 方法。

对于工厂，这是通过此处的代码[https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L859完成的](https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L859)

基本上，在您的模块中，您告诉 ServiceManager 这些服务是通过调用您提供的闭包来创建的。当您第一次向 ServiceManager 询问`get()`其中一个时，它会确定它是一个工厂（它是在 config 中的 factory 键中提供的），然后确定它是闭包还是 FactoryInterface 的实例（工厂类），最后适当地调用它来实例化您的服务。

# sql - ntext 到 xml 数据类型中的 XML 数据

> ID：15546427
> 
> 赞同：2
> 
> 时间：2013-03-21T11:35:55.043
> 
> 标签：sql, sql-server, xml

我是 XML 数据的新手。

我目前有一个将 xml 数据存储在`ntext`列中的数据库，并且该数据库似乎占用了太多空间。我正在尝试改进数据的存储方式，以减少数据库的整体大小。

在我看来，我有两个选择：

*   `nvarchar(max)`
*   `xml`

我需要通过将一些数据导入这些列来测试上面的两个选项。

我遇到的问题是，ntext 列中的 XML 数据当前存储为 utf-8。为了让我将它导入 XML 数据类型列，我需要将数据转换/转换为 UTF-16？

这是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:53:51.250

将数据存储为数据类型`XML`有**两个主要好处**：

1.  因为它是作为原生 XML 存储的，所以您可以在它之上执行 XQuery 之类的操作
2.  因为它`XML`以优化（*标记化*）方式存储，所以占用的空间比等效`nvarchar(max)`列占用的空间少。

要转换您现有的`NTEXT`列：只需`CAST`对其进行操作。

你会得到什么结果：

```
SELECT 
   id, ntextColumn, CAST(ntextColumn AS XML)
FROM 
   dbo.YourTable 
```

我几乎可以肯定这会奏效——就像那样。SQL Server 不支持 UTF-8 - 所以即使在`ntext`列中的数据也很可能不会*真正*存储为 UTF-8（它已经转换为 SQL Server 的 Unicode - UCS-2/UTF-16）所以我不看到将其转换为 datatype 的任何问题`XML`，真的。

# c# - 首先将多个主键列实体框架代码一对一映射

> ID：15546429
> 
> 赞同：1
> 
> 时间：2013-03-21T11:36:05.743
> 
> 标签：c#, linq, entity-framework, code-first

我有 2 个具有 2 个主键列的表。它们的结构是：

```
public class X
{
    public int Id {get;set;}
    public int line {get;set;}
}

public class Y
{
    public int Id {get;set;}
    public int line {get;set;}
} 
```

它们与一对一的关系相关。

如何首先映射实体框架代码中的 2 个表以反映它们的关系。

表 Y 是可选的，但表 X 是必需的。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:13:34.313

如果我理解正确，也许这就是你要找的：

```
public class X
{
    [Key, ForeignKey("Y"), Column(Order=0)]
    public int ID { get; set; }
    [Key, ForeignKey("Y"), Column(Order=1)]
    public int line { get; set; }

    public virtual Y Y { get; set; }
}

public class Y
{
    [Key, Column(Order=0)]
    public int ID { get; set; }
    [Key, Column(Order=1)]
    public int line { get; set; }

    public virtual X X { get; set; }
} 
```

使用`Key`属性你说 EF 那些属性将是你的表的键。添加`ForeignKey`属性，向 EF 提供信息，告诉它哪个导航属性表示它是外键的关系。最后，该`Column`属性告诉 EF 的哪个属性`X`应该匹配 上的哪个属性`Y`。如果我误解了您的问题，请告诉我，以便我更改答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:40:24.567

```
public class X
{
    [Key]
    public int ID { get; set; }
    public int line {get; set;}

    public virtual Y Y { get; set; }
}

public class Y
{
    [Key]
    public int ID { get; set; }
    public int line {get; set;}

    public virtual X X { get; set; }
} 
```

并添加配置，

```
modelBuilder.Entity<X>()
            .HasOptional<Y>(u => u.ID)
            .WithOptionalDependent(c => c.ID)
            .Map(p => p.MapKey("ID")); 
```

# algorithm - f(n) 不是 O(g(n)) 且 g(n) 不是 O(f(n)) 的函数

> ID：15546430
> 
> 赞同：2
> 
> 时间：2013-03-21T11:36:05.680
> 
> 标签：algorithm

是否有诸如 f(n) 和 g(n) 之类的函数？

```
f(n) != O(g(n)) and
g(n) != O(f(n)). 
```

是否有满足上述要求的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:40:52.350

```
 f(n)=n and g(n)=n^(1 + sin(x)). 
```

f(n) 不是 O(g(n))，g(n) 不是 O(f(n))。

参考[http://c2.com/cgi/wiki?BigOh](http://c2.com/cgi/wiki?BigOh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:50:09.577

考虑：

```
f(n) = 0 if n is odd, else n*n
g(n) = n 
```

那么对于奇数值`g(n)`来说是大于大于的常数因子`f(n)`（所以`g(n)`不是`O(f(n))`，而对于偶数值`f(n)`来说是大于一个常数因子大于`g(n)`（所以`f(n)`不是`O(g(n))`）。

请注意，`f(n)`随着接近无穷大，它在无穷大处没有限制`n`，所以在某种意义上，这是一个廉价的例子。但是您可以通过替换`0, n, n*n`为`n, n*n, n*n*n`.

我认为，如果两个非负函数具有在接近无穷大时`f(n)/g(n)`具有（可能是无限）极限的属性`n`，那么其中一个是大 O 另一个。如果极限是 0 那么`f(n)`是`O(g(n))`，如果极限是有限的那么每个都是 big-O 另一个，如果极限是无限的那么`g(n)`是`O(f(n))`。但是我懒得写证明来确认。

# oracle - 如何根据从 oracle 到 EF 的参数获取数据

> ID：15546431
> 
> 赞同：0
> 
> 时间：2013-03-21T11:36:06.050
> 
> 标签：oracle, entity-framework, stored-procedures, odac

我必须根据必须从 oracle 检索的数据制作多达 100 个报告，为过程/函数提供一些参数。现在我正在使用 ODAC 和 VS2010 连接到 oracle，但是从过程（使用 sys_refcursor 参数）或返回表的函数创建 FUNCTION IMPORT 时遇到问题。

您以最简单的方式执行此操作的方法是什么？

我不想回到 ADO 和无类型数据或数据集。可能的解决方案可以是使用从函数/过程中检索数据的其他模式或以不同方式设置 EF 升级到较新版本的 odac/vs。

# r - 1 %% 0.1 = 0.1 和 1 %% 0.2 = 0.2？

> ID：15546439
> 
> 赞同：2
> 
> 时间：2013-03-21T11:36:38.513
> 
> 标签：r, floating-point, floating-accuracy

我错过了基本包中的东西或错误吗？

我在**R-2.15.2 上运行，在 Win 7-32**

> x %% y 模数 (x mod y) 5 %% 2 为 1
> 
> 来自： http: [//www.statmethods.net/management/operators.html](http://www.statmethods.net/management/operators.html)

* * *

```
>  1 %% 0.1
[1] 0.1

>  1 %% 0.2
[1] 0.2 
```

两者都必须为 0。

以下示例按预期工作。例如：

> 1 %% 0.15

必须为 0.1 ( 1.0 = 6 x 0.15 + **0.1** )

* * *

```
>  1 %% 0.11  # expected result 
[1] 0.01

>  1 %% 0.15
[1] 0.1

>  1 %% 0.3
[1] 0.1

>  1 %% 0.4
[1] 0.2

> 1 %% 0.5
[1] 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:39:44.307

首先，我无法使用在 x86_64 上运行的 R 版本 2.15.1 重现此问题。

如果这是在您的环境中发生的情况，这几乎肯定与以下事实有关，即两者都`0.1`不能`0.2`使用二进制浮点算术精确表示：

```
> sprintf("%.20f", 0.1)
[1] "0.10000000000000000555"
> sprintf("%.20f", 0.2)
[1] "0.20000000000000001110" 
```

的文档`%%`有以下内容：

> `%%`并且`x %/% y`可以用于非整数`y`，例如`1 %/% 0.2`，但结果会受到表示错误的影响，因此可能取决于平台。因为 IEC 60059 的表示`0.2`是一个略大于的二进制分数`0.2`，所以答案`1 %/% 0.2`应该是`4`但大多数平台给出`5`的。

还有许多其他类似的陷阱与浮点运算的属性有关（不仅仅是在 R 中）。关于该主题的经典论文是[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# c# - 在 ClassCleanup 中访问 CurrentTestOutcome？

> ID：15546440
> 
> 赞同：3
> 
> 时间：2013-03-21T11:36:40.230
> 
> 标签：c#, unit-testing

使用 C# 4.0。我有一个单元测试，我需要在其中创建一个临时数据库。这是在类初始化期间完成的：

```
[ClassInitialize()]
public static void MyClassInitialize(TestContext testContext)
{
    // Create database!
}

[ClassCleanup()]
public static void MyClassCleanup()
{
    // Remove database IF CurrentTestOutcome == UnitTestOutcome.Passed
} 
```

**问：**如何`CurrentTestOutcome`从我的方法中读取值`ClassCleanup`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T15:21:52.780

我建议您创建一个静态标志，`MyClassCleanup`当您遇到错误时，您可以从您的访问并在测试清理期间设置它。在你的课上是这样的：

```
[TestClass]
public class MyTests {
    static bool _testFailed;

    [ClassInitialize()]
    public static void MyClassInitialize(TestContext testContext)
    {
        // Create database!
        _testFailed = false;
    }

    [ClassCleanup()]
    public static void MyClassCleanup()
    {
        if(_testFailed == false) {
        // Remove database IF CurrentTestOutcome == UnitTestOutcome.Passed
        }
    }

    [TestCleanup()]
    public void MyTestCleanup() {
        if (TestContext.CurrentTestOutcome != UnitTestOutcome.Passed) {
            _testFailed = true;
        }
    }

    public TestContext TestContext { get; set; }

} 
```

我建议采用上述方法，因为我的理解是，在你的课堂清理中，`CurrentTestOutcome`从那时起，引用并不会真正产生多大影响。它只包含要运行的最后一个测试的状态，而不是类中所有测试的组合结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T16:11:20.973

我正在考虑以下解决方案。不确定这是否被认为是好的做法。

```
private static IList<TestContext> testResults;

public TestContext TestContext
{
    get
    {
        return testContext;
    }
    set
    {
        testContext = value;

        testResults.Add(testContext);
    }
}

[ClassInitialize()]
public static void MyClassInitialize(TestContext testContext)
{
    testResults = new List<TestContext>();
}

[ClassCleanup()]
public static void MyClassCleanup()
{
    if (testResults.All(t => t.CurrentTestOutcome == UnitTestOutcome.Passed ||
        t.CurrentTestOutcome == UnitTestOutcome.Inconclusive))
    {
        // Perform conditional cleanup!
    }
} 
```

# java - 在同一台服务器上活动的同一 Weblogic 共享库的多个版本

> ID：15546443
> 
> 赞同：1
> 
> 时间：2013-03-21T11:36:44.183
> 
> 标签：java, ejb, shared-libraries, weblogic11g

我在尝试在同一 weblogic 服务器上部署同一共享库的两个不同版本时遇到问题。

**这是我的目标：**

*   我有多个引用共享库的应用程序；
*   这些应用程序应该能够使用这个共享库的不同实现版本（在一个非常好的世界里）；
*   所以我想部署这个共享库的多个版本（例如：AppB 使用 1.0.0 版本，AppA 使用 1.0.1）。

我认为（知道吗？）这是可能的（我在 weblogic 考试中看到可以同时部署和激活同一个共享库的多个版本）但直到现在我失败了......

Weblogic 对两个共享库具有相同名称这一事实不满意......但是我的应用程序需要这个“同名”才能使用这些共享库......

**我的 META-INF 文件是：**

```
Extension-Name: app-local-services-ejb
Implementation-Version: 2.0.2-SNAPSHOT
Specification-Version: 2.0 
```

和

```
Extension-Name: app-local-services-ejb
Implementation-Version: 2.0.1-SNAPSHOT
Specification-Version: 2.0 
```

我的应用程序的 weblogic-application 文件我只使用 web-inf 的扩展名和规范版本...

我尝试对两个不同版本的 JSF 做同样的事情，但我遇到了同样的问题。Oracle 关于共享库的文档不是很清楚，我没有在 goole/bing 上找到有用的东西。

我不知道是否必须将这些共享库上传到特定文件夹（例如：weblogic/commom/deployable-libraries），或者是否必须在 WEB-INF/weblogic-application.xml 文件中指定某些内容？

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:13:53.287

您能否将应用程序分成两个 .ear/.war 文件，每个文件都有自己需要使用的库版本？到目前为止，这似乎是解决此问题的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T06:57:50.393

您只能在 WLS 中同时拥有一个具有相同规范版本的库版本。

要建立新的实施版本，您必须使用新 jar*更新*现有部署，而不是部署新版本。如果 WLS 可以解决，这将删除编号较低的实施版本。

这就是为什么将规范版本和实现版本设置为浮点数是一个非常好的主意，因为如果可以将其转换为浮点数，WLS 可以更轻松地确定哪个版本高于另一个版本。

但是，如果您有一个具有不同规格编号的库，您可以愉快地与其他规格编号同时上传它。同样，如果 WLS 可以计算出版本号，它可以自动将应用程序转换到新版本，前提是它们没有在 weblogic-application.xml 中设置确切的版本。

# stack-overflow - 协程堆栈是否在 Lua、Python、Ruby 或任何其他语言中增长？

> ID：15546445
> 
> 赞同：1
> 
> 时间：2013-03-21T11:36:47.490
> 
> 标签：stack-overflow, coroutine, stackless

有一些语言支持确定性轻量级并发——协程。

1.  Lua - 协程
2.  无堆栈 Python - tasklet
3.  红宝石 - 纤维
4.  应该更多......但目前我没有太多想法。

无论如何，据我所知，它需要许多分离的堆栈，所以我想知道这些语言如何处理堆栈增长。这是因为我读到[一些关于 4KB 的 Ruby Fiber](http://www.ruby-doc.org/core-2.0/Fiber.html)的提及——显然开销很大——并且他们将其宣传为防止堆栈溢出的功能。但我不明白为什么他们只是说堆栈会自动增长。虚拟机（不限于 C 堆栈）无法处理堆栈增长是没有意义的，但我无法确认这一点，因为我不太了解内部结构。

他们如何处理这类微线程上的堆栈增长？是否有任何显式/隐式限制？或者只是会被清楚地自动处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T11:49:23.697

对于红宝石：

根据这个[google tech talk](http://www.youtube.com/watch?v=ghLCtCwAKqQ "google tech talk - 构建一个高效的 ruby​​ 解释器")，ruby vm 使用了一个有点 hacky 的系统，包括为每个线程拥有一个 C 堆栈的副本，​​然后每次在光纤之间切换时将该堆栈复制到主堆栈。这意味着 Ruby 仍然限制每个纤程的堆栈大小不能超过 4KB，但是如果您在深度嵌套的纤程之间切换，解释器不会溢出。

对于蟒蛇：

task-let 仅在无堆栈变体中可用。每个线程都有自己的基于堆的堆栈，因为无堆栈 python vm 使用基于堆的堆栈。这种混乱它们本质上只限于堆栈增长中的堆大小。这意味着对于 32 位系统，仍然存在 1-4 GB 的有效限制。

对于 Lua：

Lua 使用基于堆的堆栈，因此在堆栈增长中本质上仅限于堆的大小。每个协程在内存中都有自己的堆栈。这意味着对于 32 位系统，仍然存在 1-4 GB 的有效限制。

要在您的列表中添加更多内容，C# 和 VB.Net 现在都支持 async/await。这是一个允许程序执行耗时操作并让该功能的其余部分在之后继续的系统。这是通过创建一个对象来表示具有单个方法的方法来实现的，该方法被调用以前进到方法中的下一步，当您尝试获取结果和各种其他内部位置时调用该方法。原始方法被替换为创建对象的方法。这意味着递归深度不会受到影响，因为该方法永远不会比您预期的堆栈更进一步。

# ruby - 我有 10 个相同的元素，如何单击第三个？

> ID：15546453
> 
> 赞同：1
> 
> 时间：2013-03-21T11:37:10.643
> 
> 标签：ruby, watir-webdriver

尝试选择在页面上出现多次的图像时，我无法通过测试，而我正在尝试选择第三或第四张图像。我可以很容易地测试选择第一张图片。

链接：[单击此链接](https://www.fundingcircle.com/lend/loan-requests/)（然后尝试单击表中的第三张图片）

环境：Mac OSX 10.7.5、Firefox 19.0.2、Ruby 1.9.3p194、watir-webdriver 0.6.2

这是我尝试使用的代码和收到的错误：

```
@browser.image(:alt, 'Avatar')[2].click 
Error:  undefined method `[]' for # Watir::Image:0x007f829b89e8b8> (NoMethodError)

@browser.image(:alt, 'Avatar', :index => 3).click
Error:  expected Hash or (:how, 'what'), got [:alt, "Avatar", {:index=>3}] (ArgumentError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:54:20.200

对于每个人，这是答案（感谢贾斯汀在第二个示例中发现了错字）：

第一个例子：

```
@browser.images(:alt, 'Avatar')[2].click 
```

第二个例子：

```
@browser.image(:alt => 'Avatar', index => 3).click 
```

# sql - Grails 没有在表中显示 SQL 结果，我错过了什么？

> ID：15546454
> 
> 赞同：0
> 
> 时间：2013-03-21T11:37:12.760
> 
> 标签：sql, grails

我显然在这里遗漏了一些明显的东西，但是我一生都无法弄清楚什么，我已经设置了一个视图来显示自定义 SQL 查询，但是屏幕什么也没显示，这就是我所拥有的

控制器

```
def queueBreakdown(){
    String SQLQuery = "select state, count(test_exec_queue_id) as 'myCount' from dbo.test_exec_queue group by state"
    def dataSource
    def list = {
        def db = new Sql(dataSource) 
        def results = db.rows(SQLQuery)
        [results:results]
    }
} 
```

如果我手动运行它，我会像这样得到一组结果

```
state   myCount
1       1
test    2
test2   1 
```

queueBreakdown.gsp 具有以下内容...

```
<body>
    <a href="#list-testExecQueue" class="skip" tabindex="-1"><g:message code="default.link.skip.label" default="Skip to content&hellip;"/></a>
    <div class="nav" role="navigation">
        <ul>
            <li><a class="home" href="${createLink(uri: '/')}"><g:message code="default.home.label"/></a></li>
        </ul>
    </div>

    <div id="queueBreakdown-testExecQueue" class="content scaffold-list" role="main">
        <h1><g:message code="Execution Queue Breakdown"  /></h1>
        <table>
            <thead>
                <tr>

                    <g:sortableColumn property="Run State" title="Run State"/>
                    <g:sortableColumn property="Count" title="Count" />
                </tr>
            </thead>

            <tbody>
                <g:each in="${results}" status="i" var="it">
                    <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">
                        <td>${it.state}</td>
                        <td>${it.myCount}</td>
                    </tr>
                </g:each>
            </tbody>
        </table>
    </div>
</body> 
```

但是当我查看页面时，我什么也没有得到... 表格已经建好，但里面没有线条，我在这里厚什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:55:06.860

您的控制器代码真的很混乱，这里的操作是什么？queueBreakdown() 还是 list() ？似乎您将 2 个动作混合在一起，并且 queueBreakdown() 没有返回任何模型......

```
class SomeController {

    def dataSource

    def queueBreakdown() {
        String SQLQuery = "select state, count(test_exec_queue_id) as 'myCount' from         dbo.test_exec_queue group by state"
        def db = new Sql(dataSource) 
        def results = db.rows(SQLQuery)
        [results:results]
    }
} 
```

# xslt - XSL 生成 CSV

> ID：15546456
> 
> 赞同：1
> 
> 时间：2013-03-21T11:37:20.047
> 
> 标签：xslt, csv

试图转换这个：

```
<list>
  <entry>
          <parentFeed>
                    <feedUrl>http://rss.nzherald.co.nz/rss/xml/nzhrsscid_000000001.xml</feedUrl>
                      <id>68</id>
                      </parentFeed>
                          <content>Schools will have to put up with problematic pay administered through Novopay for another eight weeks after the Government announced it would persist with the unstable system.Minister responsible for Novopay, Steven Joyce, delayed...</content>
                          <link>http://www.nzherald.co.nz/nz/news/article.cfm?c_id=1&amp;objectid=10872300&amp;ref=rss</link>
                              <title>Novopay: Govt sticks with unstable system</title>
                              <id>55776</id>
                                  <published class="sql-timestamp">2013-03-19 03:38:55.0</published>
                                  <timestamp>2013-03-19 07:31:16.358 UTC</timestamp>
                                    </entry>
                            </list> 
```

对此，使用 XSLT：

```
Title, Link, Date
Novopay: Govt sticks with unstable system, http://www.nzherald.co.nz/nz/news/article.cfm?c_id=1&objectid=10872300&ref=rss, 2013-03-19 03:38:55.0 
```

但是尽我所能，我无法摆脱文档开头的空白行。我的样式表如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:csv="csv:csv"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text" encoding="UTF-8"/> 
<xsl:template match="/list"> <xsl:for-each select="entry">
Title, Link, Date
<xsl:value-of select="title"/>, <xsl:value-of select="link"/>, <xsl:value-of select="published"/>
</xsl:for-each></xsl:template>
</xsl:stylesheet> 
```

我已经尝试按照[此处](https://stackoverflow.com/questions/5315372/how-to-remove-empty-lines-in-xslt-to-csv-output)`<xsl:text>&#xD;</xsl:text>`的建议进行输入，它删除了最后一个换行符，所以我将它移到了文件的顶部，此时它变成了无操作。[这里](http://www.stylusstudio.com/xmldev/200404/post60210.html)的解决方案实际上**添加了**一个空行（这是有道理的，因为十六进制代码是换行符，根据[ascii 手册页](http://www.freebsd.org/cgi/man.cgi?query=ascii&apropos=0&sektion=0&manpath=FreeBSD+9.1-RELEASE&arch=default&format=html)）。

 **作为一种解决方法，我一直在使用 Java 来生成 CSV 输出。

但是，我确实觉得 XSLT 会快很多，因为它旨在将 XML 转换为各种其他格式。类似的 XSLT 可以完美地生成 HTML、RSS 和 ATOM 提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:09:08.503

你做得很完美，你的逻辑是正确的。但是您需要记住的是，当您输出文本时，XSLT 中的所有缩进都会影响输出，因此您的 XSLT 应该如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:csv="csv:csv"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text" encoding="UTF-8"/>
<xsl:template match="/list"> <xsl:for-each select="entry">Title, Link, Date
<xsl:value-of select="title"/>, <xsl:value-of select="link"/>, <xsl:value-of select="published"/>
<xsl:text>
</xsl:text>
</xsl:for-each></xsl:template>
</xsl:stylesheet> 
```

运行上面的 XSLT，它将完美运行。**

# css - 仅 CSS 和 HTML 选项卡未正确响应

> ID：15546457
> 
> 赞同：1
> 
> 时间：2013-03-21T11:37:22.057
> 
> 标签：css, menu, tabs

这个真的让我很困惑。这可能是我错过了一些简单的东西，但我肯定找不到它......

我创建了一个[小提琴](http://jsfiddle.net/j9Ftx/)来向您展示我在说什么。

您最初看到这有 4 个部分，这些部分可以正常滚动，并且所有链接都可以正常工作。此后，客户又添加了 1 个部分，现在由于某种原因，当我添加另一个无线电链接时，幻灯片放映的整个控制权就落空了。[看看我在这里的意思。](http://jsfiddle.net/j9Ftx/)

我添加的只是一个额外的链接和内容区域。有谁知道我做错了什么？如果您从 jsfiddle 中删除以下内容，您会看到它可以正常工作，但是使用选项卡 5 的标签，它会放弃。我不知所措......任何帮助都非常感谢！

```
<input id="tab-5" type="radio" name="radio-set" class="tab-selector-5" /> <label for="tab-5" class="tab-label-5">POS</label>

<div class="content-5"> <h2>Fullfilment</h2> <p>Whatever your project involves Expressive Print are experienced in delivering it for you. From daily pick and pack requirements to contract packing and bulk despatches we have the ideal space to work in - clean, modern and secure premises with packing teams who are all fully CRB checked, robust stock control systems, comprehensive insurance cover and expertise. This ensures the right things are packed in the right order and sent the right people – simple but critical. Selecting a fulfilment partner who has strong systems with full accountability and customer service resource is vital to ensure your product’s success.</p> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:23.950

演示你的**[Jsfiddle](http://jsfiddle.net/j9Ftx/5/)**

**现在您只需在您的 css 文件中添加一行 css**

```
.tabs input.tab-selector-1:checked ~ .content .content-1,
.tabs input.tab-selector-2:checked ~ .content .content-2,
.tabs input.tab-selector-3:checked ~ .content .content-3,
.tabs input.tab-selector-4:checked ~ .content .content-4, 
.tabs input.tab-selector-5:checked ~ .content .content-5  // add this line in your css file 
{
    -webkit-transform: translateY(0px);
    -moz-transform: translateY(0px);
    -o-transform: translateY(0px);
    -ms-transform: translateY(0px);
    transform: translateY(0px);
    z-index: 100;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    -webkit-transition: all ease-out 0.3s 0.3s;
    -moz-transition: all ease-out 0.3s 0.3s;
    -o-transition: all ease-out 0.3s 0.3s;
    -ms-transition: all ease-out 0.3s 0.3s;
    transition: all ease-out 0.3s 0.3s;
} 
```

**[演示](http://jsfiddle.net/j9Ftx/3/)**

# java - 如何异步运行一个类的两个实例

> ID：15546459
> 
> 赞同：0
> 
> 时间：2013-03-21T11:37:26.683
> 
> 标签：java, multithreading, rabbitmq

我正在使用rabbitMQ，并希望异步运行两个消费者实例以提高接收消息的速度。我在消费者类中实现了 Runnable。并执行以下操作：

```
public class ConsumerRun {
    public ConsumerRun(){

        Runnable consumerOne = new App();
        Runnable consumerTwo = new App();

        Thread threadOne = new Thread(consumerOne);
        Thread threadTwo = new Thread(consumerTwo);

        threadOne.start();
        threadTwo.start();
    }
} 
```

从主类调用这个类，看到只有一个线程在工作。

当我创建一个与我的消费者类相同的新类并将其作为新线程运行时，我接收消息的速度提高了两倍。

# c - 这些 C“MAX”宏中哪一个最好？

> ID：15546460
> 
> 赞同：0
> 
> 时间：2013-03-21T09:34:31.623
> 
> 标签：c, performance, optimization, definition

我在 C 中看到了 MAX 宏的两种可能实现。其中哪一种最好？

1.  `define MAX(X,Y) ((X) < (Y) ? : (Y) : (X))`
2.  `define MAX(X,Y) 0.5*(X+Y+ABS(X-Y))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:18:58.490

第二个很难阅读，实际上已经坏了。真是个坏主意。

1.  第二个总是使用双打。你会得到四舍五入的错误。我当然不会期望得到不等于任何一方的结果。
2.  当应用于整数时，它返回一个双精度值，这非常令人惊讶。花车也被提升为双倍。
3.  如果您通过将 *0.5 替换为 /2 来“修复”它，它会在其他类型上“工作”，但您会在大整数上遇到意外溢出。

我还推荐函数，而不是宏，因此不会对参数进行两次评估。

在某些情况下，这种棘手的版本是合适的。例如在*常数时间内*计算两个整数的最大值。但它们很少见，当然不应该用作`MAX`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:09:06.097

第一个版本更通用、更高效且更易于理解。

第二个版本使用浮点常量，这使得它特定于双精度数。它可能会返回错误的答案，因为浮点计算可能会四舍五入。（由于二进制值无法准确表示每个可能的十进制值，例如 0.1）还涉及更多计算。与 0.5 的乘法没有括在括号中，这可能会导致意外结果。

还有编译器优化的问题，但我不打算讨论。

# java - Hibernate 在 HQL 中期望错误的参数类型

> ID：15546463
> 
> 赞同：1
> 
> 时间：2013-03-21T11:37:45.400
> 
> 标签：java, database, hibernate, hql

我们有一个实体的层次结构，例如抽象篮子和两个具体的实体，它们又可以包含一些其他项目的列表，例如，具有完全相同的层次结构（SaleBasketItem，ReturnBasketItem）。

```
@Entity
@XStreamAlias("basket")
@DiscriminatorColumn(name = "basket_type")
@DiscriminatorOptions(force = true)
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public abstract class Basket<T extends BasketItem> 

@Entity
@DiscriminatorValue(value = "SALE")
public class SaleBasket extends Basket<SaleBasketItem> 

@Entity
@DiscriminatorValue(value = "RETURN")
public class ReturnBasket extends Basket<ReturnBasketItem> 

@Entity
@Table(name = "basket_item")
@XStreamAlias("basket_str")
@DiscriminatorColumn(name = "basket_item_type")
@DiscriminatorOptions(force = true)
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public abstract class BasketItem<U extends BasketItem, V extends Basket>

@Entity
@DiscriminatorValue(value = "RETURN")
public class ReturnBasketItem extends BasketItem<ReturnBasketItem, ReturnBasket>

@Entity
@DiscriminatorValue(value = "SALE")
public class SaleBasketItem extends BasketItem<SaleBasketItem, SaleBasket> 
```

因此，当我尝试执行 hql 查询时出现问题

```
"SELECT bi FROM " + basketType + "BasketItem bi JOIN bi.basket b JOIN b.saleSession JOIN bi.ware w WHERE b.state = :state" 
```

where`basketType`是动态的“销售”或“退货”。然后我用我需要`TypedQuery`的类型输入该查询`BasketItem`并尝试`setParameter("state", state)`，其中`state`一些枚举表示具体篮子的状态（在每个具体类中不同，根本不存在于抽象类中），这会抛出

> IllegalArgumentException（java.lang.IllegalArgumentException：参数值 ... 与类型不匹配）

其中 type 是`ReturnBasketState`实际是`SaleBasket`状态时，反之亦然。

所以问题是 - 如何强制 Hibernate 期望该参数的正确类型？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T14:05:30.063

我想它期望一个字符串作为参数，而不是一个枚举。尝试传递一个字符串。

# r - 在 R 中绘制分组数据

> ID：15546468
> 
> 赞同：3
> 
> 时间：2013-03-21T11:38:06.747
> 
> 标签：r, graph, plot

我有一个分组数据如下：

```
group   x   y
group1  0   5
group4  0   5
group1  7   5
group4  0   5
group5  7   5
group1  7   5
group1  0   6
group2  0   6
group4  0   5
group2  0   5
group3  7   5 
```

x 和 y 都是介于 0 和 7 之间的离散值。我想根据各自的 x 和 y 值将每个组数据放置在 xy 平面上。例如，我可以有多个 group1 点，所有这些点应该共享相同的颜色。如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:47:55.773

数据：

```
dat <- read.table(text = "group   x   y
group1  0   5
group4  0   5
group1  7   5
group4  0   5
group5  7   5
group1  7   5
group1  0   6
group2  0   6
group4  0   5
group2  0   5
group3  7   5", header = TRUE) 
```

您可以使用优秀的`ggplot2`包来轻松绘图：

```
library(ggplot2)
ggplot(dat, aes(x = x, y = y, colour = group)) +
  geom_point() +
  facet_wrap( ~ group) 
```

在这里，我曾经`facet_wrap`为每个组创建构面。原则上这不是必需的，因为可以通过颜色来区分组的点。但在这种情况下，图中只有三个不同的位置。因此，如果将数据绘制在单个散点图中，则并非所有点都可见。

![在此处输入图像描述](../Images/7ee1bab1c69858f6bdbdaa8d7d51e7dc.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T11:55:44.433

使用 Sven 的回答中的数据，您还可以查看 lattice 包，它应该已经与您的 R 安装一起安装：

```
library(lattice)
# Each group in a separate mini plot
xyplot(y ~ x | group, data = dat)
# All groups in one plot, different colors for each group
#   Not at all interesting with the example data you've provided
xyplot(y ~ x, groups=dat$group, data = dat) 
```

以下是每个示例，其中包含更多数据：

```
set.seed(1)
mydf <- data.frame(
  group = sample(letters[1:4], 50, replace = TRUE),
  x = runif(50, 0, 7),
  y = runif(50, 0, 7)
)
xyplot(y ~ x, groups=mydf$group, data = mydf, 
       auto.key = list(corner = c(0, .98)), cex = 1.5) 
```

![在此处输入图像描述](../Images/2c5ffa535aaff02d75e662fa0067ae36.png)

```
xyplot(y ~ x | group, data = mydf, 
       auto.key = list(corner = c(0, .98)), cex = 1.5) 
```

![在此处输入图像描述](../Images/65e06b173e5ad14d803da53b1fff14c8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:36:31.817

```
dd<- read.table("put the path to the txt file containing the data here", header=TRUE)
g <- ggplot(dd, aes(as.factor(group)))
g <- g + geom_point(aes(y=x), colour="red")
g <- g + geom_point(aes(y=y), colour="green")
g 
```

这将在单个图中为您提供 x 和 y 作为组的函数，如下所示。![将变量绘制为组的函数](../Images/a9ba22a5ff8fc99b32ca22644142e66b.png)

# playframework - play-framework 2.0，是否可以通过反向路由器添加 GET 变量？

> ID：15546471
> 
> 赞同：0
> 
> 时间：2013-03-21T11:38:13.170
> 
> 标签：playframework, playframework-2.0

在我的控制器的一种方法中`PageController`，我有

```
return redirect(routes.PageController.page_view("main", "home")); 
```

这去`/main/home`。如何向其中添加 GET 变量，以便它应该例如转到类似的东西`/main/home?redirect=0`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:03:01.333

如果我理解你的问题，我也做了同样的事情：

```
public static Result GO_TO_OVERVIEW = redirect(routes.Bookmarks.index(0, "description", "asc", "")); 
```

我的路线声明如下：

```
GET     /bookmarks  controllers.Bookmarks.index(p:Int ?= 0, s ?= "description", o ?= "asc", f ?= "") 
```

我的索引函数：

```
public static Result index(int page, String sortBy, String order, String filter) {
    if (sortBy.isEmpty() || sortBy == null) {
        page = 0;
        sortBy = "description";
        order = "asc";
    }
    User user = User.getLoggedInUser(session("user"));
    Page<models.Bookmark> orderList = models.Bookmark.page(page, 20, sortBy, order, filter, user);
    return ok(views.html.bookmarks.list.render(orderList, sortBy, order, filter));
} 
```

对你起作用吗？

# c# - ASP.NET MVC 在创建对象时读取属性

> ID：15546472
> 
> 赞同：9
> 
> 时间：2013-03-21T11:38:14.157
> 
> 标签：c#, asp.net-mvc, entity-framework

我注意到以下行为，我想知道是否有人可以解释它为什么会发生以及如何防止它。

在我的部分类中，我添加了数据库中不存在的各种只读属性。创建对象时，在我们访问控制器的 Create 方法之前会访问这些属性。但是，使用 just 声明的属性`get; set;`不会被访问。

如果我具有以下属性，请使用非常简单的示例进行详细说明：

```
public bool getBoolProperty {
    get {
        return true;
    }
}
public bool getSetBoolProperty {
    get; set; 
} 
```

如果我然后在属性上放置断点，则在创建对象时会针对第一个属性而不是第二个属性命中断点。但是，如果我有一个方法：

```
public bool getBoolProperty() {
    return true;
} 
```

那么这不会被访问。

我尝试了各种变体和注释

```
// empty set
public bool getBoolProperty {
    get {
        return true;
    }
    set {}
}

// not mapped attribute
[NotMapped]
public bool getBoolProperty {
    get {
        return true;
    }
}

// getting private variable
private bool _boolProperty = true;
public bool getPrivateBoolProperty {
    get {
        return _boolProperty;
    }
} 
```

我尝试过声明 properties `virtual`，但除了`get; set;`品种之外的所有变体都在创建对象时被访问。整数属性也会出现此行为

```
public virtual int getIntProperty {
    get {
        return 1;
    }
} 
```

和日期/时间属性，

```
public virtual DateTime getDateProperty {
    get {
        return DateTime.Now;
    }
} 
```

但不适用于字符串属性

```
public string getStringProperty {
    get {
        return "Hello String";
    }
} 
```

或其他实体属性

```
public Item getItem {
    get {
        return new Item();
    }
} 
```

我遇到的问题是，其中一些属性可能涉及一些可能需要数据库访问的逻辑，例如

```
public bool HasChildren {
    get {
        return this.Children !== null && this.Children.Count > 0;
    }
} 
```

在创建时，实体将没有。

显然，我可以通过将所有内容都设为方法来解决这个问题，但我很想知道为什么 ASP.NET MVC 在创建对象时访问这些属性（可能是某种内部验证），并且我很想知道是否有任何防止这种情况的方法，可能是通过我没有遇到的注释。

我的项目是数据库优先，C#，EF 4.1，MVC

**编辑**

我还应该指出我正在使用 POCO 实体并通过存储过程/函数导入来访问数据库。

我想到的一个想法是，这些属性正在作为[此处](http://msdn.microsoft.com/en-gb/library/vstudio/dd456848%28v=vs.100%29.aspx)讨论的更改跟踪系统的一部分进行访问。似乎正在发生的可能是正在为新创建的项目拍摄快照。我尝试关闭代理创建

```
dbContext.ContextOptions.ProxyCreationEnabled = false; 
```

但是在创建时仍然可以访问这些属性。

**编辑 20130322**

按照@ladislavmrnka 的探索堆栈跟踪的建议，我得到了这个：

```
at System.ComponentModel.ReflectPropertyDescriptor.GetValue(Object component)
at System.Web.Mvc.AssociatedMetadataProvider.<>c__DisplayClassb.<GetPropertyValueAccessor>b__a()
at System.Web.Mvc.ModelMetadata.get_Model()
at System.Web.Mvc.DataAnnotationsModelValidator.<Validate>d__1.MoveNext()
at System.Web.Mvc.ModelValidator.CompositeModelValidator.<Validate>d__5.MoveNext()
at System.Web.Mvc.DefaultModelBinder.OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
at System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model)
at System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
at System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
at System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
at System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

在其中，您会注意到对一两个验证器的调用。作为测试，我将 bool 属性更改为可为空的 bool 属性：

```
public bool? getBoolProperty {
    get {
        return true;
    }
} 
```

这次在创建对象时没有访问该属性。这是我想要的行为，但是，我不想将我的所有自定义属性都更改为可以为空，所以我的问题现在变成了......

**有没有办法告诉框架不要验证属性？** 也许通过一个属性。 [这个答案](https://stackoverflow.com/a/7056192/1021958)几乎回答了这个问题，但由于我首先使用数据库，我似乎没有`ValidateOnSaveEnabled`要关闭的属性。也许我需要重新审视我的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:46:56.660

与 EF 的大多数问题一样，答案在于视图模型。

因为大多数被访问的属性在模型被创建并持久化到数据库之前是不相关的，所以我创建了一个视图模型，特别是创建视图，它只包含创建模型所需的绝对最少数量的属性。我修改了控制器的 Create 方法以接受我的新视图模型，瞧，在创建这个新模型时，无法访问主模型上的任何不相关属性。

因此，我最初的问题的答案似乎是实体框架在创建对象时对所有不可为空的标量属性执行验证，避免这种情况的一种方法如上所述。

# c++ - 如何将 HEX 转换为 ASCII 字符串？

> ID：15546478
> 
> 赞同：0
> 
> 时间：2013-03-21T11:38:28.870
> 
> 标签：c++, c

我有一个 HEX 字符串，并希望将其转换为 C/C++ 中的 ASCII 字符串。我怎样才能做到这一点？

未使用的位置用#F 填充。示例：应将数字字符串 1234567 写入具有 16 个保留位置（8 个字节）的字段中

```
 Byte 0 Byte 1 Byte 2 Byte 3 Byte 4 Byte 5 Byte 6 Byte 7 
```

十六进制 1 2 3 4 5 6 7 FFFFFFFFF

输入：0x12 0x34 0x56 0x7f 0xff 0xff 0xff 0xff

输出：1234567

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:22:56.563

您在示例中显示的编码似乎是**BCD**。也就是说，一个字节可以存储2位数字。每个数字由 4 位表示。如果 4 位大于 1001 二进制（十进制 9），那么您想将其解释为*无效数字*，我猜 FF 十六进制将被解释为空格。您可以使用按位运算符来访问字节中的每个半字节：

```
//Let's say a byte of your input is stored as 'a'
    char a = 0x15; //This is 15 BCD

    //separate lower and upper nibble
    char lower_nibble=a&0x0F;
    char upper_nibble=(a&0xF0)>>4;

    //convert to ASCII
    if(lower_nibble > 9) lower_nibble =' '; //space
    else lower_nibble = '0' + lower_nibble; //convert to ASCII
    if(upper_nibble > 9) upper_nibble =' '; //space
    else upper_nibble = '0' + upper_nibble; //convert to ASCII

    std::cout<<"\n A is: "<<upper_nibble<<" "<<lower_nibble; 
```

# android - Android 上应用程序生命周期的上下文可用性

> ID：15546480
> 
> 赞同：1
> 
> 时间：2013-03-21T11:38:38.477
> 
> 标签：android, android-context

如果我从 Application 类扩展并创建一个存储我的数据上下文的单例类（带有发票的用户、带有文章的发票、带有价格的文章……）。当应用程序处于活动状态时，这个“上下文”变量是否可用？此存储的内存大小是否有最大限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:49:16.643

是的，它将可用，您将能够通过以下方式获得它：

```
YourObject obj = getApplication ().someMethod ();
YourObject obj2 = getApplication ().publicObject; 
```

# c# - MVC4 - Ajax.ActionLink() GET 返回 500 内部服务器错误

> ID：15546482
> 
> 赞同：6
> 
> 时间：2013-03-21T11:38:43.237
> 
> 标签：c#, jquery, asp.net-mvc-4

当我单击`Ajax.ActionLink`. 我有一个由许多部分组成的个人资料页面。每个部分都对服务器进行 Ajax 调用，以允许编辑与该特定部分相关的用户信息。

我已经实现了 3 个部分功能，这些功能可以正常工作。我现在正在处理的最初应该显示已上传图像的列表 - 如果用户尚未上传任何图像，`Ajax.ActionLink`则会显示前面提到的任何图像，单击时会将用户带到便于图像上传的部分。

这是我点击链接时在 Chrome 中看到的内容：

![在此处输入图像描述](../Images/0fb319616398646d496e551700c30165.png)

这是 GET 和 POST `ActionResults`：

```
 //
    // GET: /Tenants/TenantUploadReference

    [HttpGet]
    public ActionResult TenantUploadReference()
    {
        try
        {
            var currentTenant = tenantRepository.GetLoggedInTenant();
            if (currentTenant.ReferencePhotos == null)
            {
                currentTenant.ReferencePhotos = currentTenant.ReferencePhotos ?? new List<ReferencePhoto>();
            }
            return PartialView("_TenantUploadReferencePartial", currentTenant.ReferencePhotos.ToList());
        }
        catch (Exception e)
        {
            ModelState.AddModelError("", e);
            return View();
        }
    }

    //
    // POST: /Tenants/TenantUploadReference

    [HttpPost]
    public ActionResult TenantUploadReference(HttpPostedFileBase file, Tenant tenant)
    {
        try
        {
            if (file != null)
            {
                if (file.ContentLength > 10240)
                {
                    ModelState.AddModelError("file", "The size of the file should not exceed 10 KB");
                    return View();
                }

                var supportedTypes = new[] { "jpg", "jpeg", "png", "JPG", "JPEG", "PNG" };
                var fileExt = System.IO.Path.GetExtension(file.FileName).Substring(1);

                if (!supportedTypes.Contains(fileExt))
                {
                    ModelState.AddModelError("photo", "Invalid type. Only the following types (jpg, jpeg, png) are supported.");
                    return View();
                }

                using (var db = new LetLordContext())
                {
                    var reference = db.Image.Create<ReferencePhoto>();

                    // Convert HttpPostedFileBase to byte array
                    MemoryStream target = new MemoryStream();
                    file.InputStream.CopyTo(target);
                    byte[] photo = target.ToArray();

                    reference.File = photo;
                    reference.Format = fileExt;
                    reference.DateUploaded = DateTime.Now.Date;
                    reference.Description = "";
                    reference.Name = "";

                    db.Image.Add(reference);
                    db.SaveChanges();

                    return PartialView("_TenantReferencePhotosPartial", file);
                }

            }
            else
            {
                return View();
            }
        }
        catch (Exception e)
        {
            ModelState.AddModelError("", e);
            return View();
        }
    } 
```

当我在 GET 上使用断点单步调试调试器时，`ActionResult`它会命中`return PartialView`并且不会引发异常。

在`_TenantUploadReferencePartial`我使用

`@using (Ajax.BeginForm("TenantUploadReference", "Tenants", FormMethod.Post, new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", UpdateTargetId = "tenant-reference-photos" }))`

在`_TenantReferencePhotosPartial`（`ActionLink`抛出 500 错误的地方）我用这个

```
@if (Model.ReferencePhotos == null)
{
    <h3>You haven't uploaded any references! 
        @Ajax.ActionLink("Upload now?",
            "TenantUploadReference",
            new AjaxOptions
            {
                UpdateTargetId = "tenant-reference-photos",
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "GET",
                LoadingElementId = "ajax-loader"
            })</h3> 
```

知道页面上的其他部分按预期工作也可能很有用，所以我认为这不是缺少脚本的问题。我不知道为什么会发生这种情况 - 一个解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T15:52:35.737

我已经解决了这个问题。我回来时`currentTenant.ReferencePhotos.ToList()`扔了一个`ArgumentNullException`. 现在我回来了`currentTenant`，并且 GET 正在按预期工作。

# xml - 将文本从 XML 加载到 Flash AS3 中？

> ID：15546493
> 
> 赞同：0
> 
> 时间：2013-03-21T11:39:10.753
> 
> 标签：xml, actionscript-3, flash

我有这个 XML 显示来自 mysql 数据库的一些数据。

我需要从 xml 中提取其中一些数据（即名称、价格等）并在 Flash 应用程序中显示它们。

现在，我可以拉出图像并将它们显示在闪存中，但是我无法将 xml 中的文本显示到闪存中。

这是我的xml的结构：

```
<Data>
<ID>127</ID>
<Name>Example 1</Name>
<Price>12!!</Price>
<Image>inventory_images/127.jpg</Image>
<Date>Mar 08, 2013</Date>
</Data> 
```

这是将在闪存中显示产品图像的代码（Flash AS3）。

```
stop();
import flash.display.Loader;
import flash.events.Event;
import flash.net.URLRequest;

var xmlLoader:URLLoader;
var xml:XML;
var xmlList:XMLList;

var uRequest = new URLRequest("PATH-TO-MY-XML-FILE");
xmlLoader = new URLLoader(uRequest);
xmlLoader.addEventListener(Event.COMPLETE, onXMLLoad);
var imgLoader:Loader;

function onXMLLoad(e:Event) {
    xml = new XML(e.target.data);
    imgLoader = new Loader();
    imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded);
    imgLoader.load(new URLRequest(xml.Data.Image.text()[0]));
}

function onImgLoaded(e:Event) {
    addChild(imgLoader);
    imgLoader.height = 300;
    imgLoader.width = 300;
} 
```

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:41:23.130

因此，如果我正确理解您的问题，图像加载和显示部分将起作用。如果你想显示你的文本，你可以像这样简单地使用 TextFields：

```
function onXMLLoad(e:Event) {
    xml = new XML(e.target.data);
    var tf:TextField = new TextField();
    tf.text = xml.Name.text()[0];//or whatever part you want to display
    addChild(tf);//you'll want to style and move tf, maybe.
} 
```

弹性标签也可以...

编辑：我也看到你在时间线上，所以你可以简单地使用一个名为“myTextField”的动态文本字段，然后你的代码：

```
var myString:String = 'loading';
function onXMLLoad(e:Event) {
    xml = new XML(e.target.data);
    myTextField.text =  "" + xml.Name.text()[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:53:00.393

尝试 imgLoader.load(new URLRequest(xml.Image.toString())); 您可能需要在 xml 中使用完整的 url，例如[http://yoursite.com/inventory_images/127.jpg](http://yoursite.com/inventory_images/127.jpg)，而不是 inventory_images/127.jpg，或者将[http://yoursite.com/](http://yoursite.com/)添加到 url 字符串中。

# java - 在 Java 中获取日期格式

> ID：15546494
> 
> 赞同：0
> 
> 时间：2013-03-21T11:39:20.503
> 
> 标签：java, date, simpledateformat

我`String`从一个`Date`对象得到这个：`Mon Mar 25 00:00:00 IST 2013`

`String`日期格式的表示是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:42:06.853

下面的代码应该可以正常工作。

```
public static void main(String[] args) throws Exception {
    String target = "Mon Mar 25 00:00:00 IST 2013";
    DateFormat df = new SimpleDateFormat("EEE MMM dd kk:mm:ss z yyyy", Locale.ENGLISH);
    Date result =  df.parse(target);  
    System.out.println(result);
} 
```

阅读[javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)以了解有效模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:46:54.370

```
String yourDate= "Mon Mar 25 00:00:00 IST 2013" ;
DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy");
Date jDate = new Date(df.parse(yourDate).getTime());
System.out.println(jDate); 
```

# perl - 如何将子标签移动到子标签

> ID：15546495
> 
> 赞同：0
> 
> 时间：2013-03-21T11:39:26.663
> 
> 标签：perl

我是新手[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)。

我需要将子标签移动到子标签。

我怎样才能做到这一点？

当我`notes`将父标签与子标签匹配到之前的部分时。

我的 XML 如下所示：

```
<book>
  <sec>
    <p>The indicated something</p>
    <p>The something</p>
  </sec>
  <sec>
    <notes>note</notes>
    <p>text</p>
  </sec>

  <sec>
    <p>The indicated</p>
    <p>The something</p>
  </sec>
  <sec>
    <notes>note</notes>
    <p>text1</p>
  </sec>

</book> 
```

我试过：

```
use XML::Twig;

open(my $output, ">output.xml") || die "can't open the output.xml$!\n";

my $story_file = XML::Twig->new(
    keep_encoding => 1,
    twig_handlers => { 'book' => \&book, },
    pretty_print  => 'indented',
);
$story_file->parse("sample.xml");
$story_file->print($output);
$story_file->purge;

sub book {
    my ($stroy_file, $book) = @_;
    my @sub_elmt = $book->children;
    Get_children(\@sub_elmt) if ($#sub_elmt >= 0);
}

sub Get_children {
    my ($ref) = @_;
    foreach my $tagg (@$ref) {
        my @children = $tagg->children;
        my $tagName  = $tagg->name;
        if ($tagName =~ /^sec$/) {
            my $f = $tagg->first_child;
            if ($f->name =~ /^notes$/) {
                $tagg->move('last_child', $tagg);
            }
        }
        Get_children(\@children) if ($#children >= 0);
    }
} 
```

它不能工作，我该怎么做？

我需要这样的输出：

```
<book>
  <sec>
    <p>The indicated something</p>
    <p>The something</p>
    <sec>
      <notes>note</notes>
      <p>text</p>
    </sec>
  </sec>
  <sec>
    <p>The indicated</p>
    <p>The something</p>
    <sec>
      <notes>note</notes>
      <p>text1</p>
    </sec>
  </sec>
</book> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:01:38.983

`XML::Twig`使用 逐个处理非常大的 XML 文档可能非常有用`twig_handlers`，但您不必*像*那样使用它。它将构建一个完整的 XML 文档树，并让您像大多数其他 XML 模块一样操作该树并将其打印出来。

该程序从 读取整个文档`sample.xml`，然后搜索`notes`元素内的所有`sec`元素。使用 找到包含`sec`元素，使用 找到`parent`前一个`sec`元素（要插入的元素）`prev_sibling`。然后`move`用于将`sec`元素重新定位为前一个的最后一个子元素`sec`。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new;
$twig->parsefile('sample.xml');

for my $notes ( $twig->findnodes('//sec/notes') ) {
  my $sec = $notes->parent;
  my $prev_sec = $sec->prev_sibling('sec');
  $sec->move(last_child => $prev_sec);
}

$twig->print_to_file('output.xml', pretty_print => 'indented'); 
```

**输出**

```
<book>
  <sec>
    <p>The indicated something</p>
    <p>The something</p>
    <sec>
      <notes>note</notes>
      <p>text</p>
    </sec>
  </sec>
  <sec>
    <p>The indicated</p>
    <p>The something</p>
    <sec>
      <notes>note</notes>
      <p>text1</p>
    </sec>
  </sec>
</book> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:26:26.693

您的 XML 和 Perl 脚本中都有一些拼写错误。注意。我已经修改并整理了您的 XML 示例（请参阅*注释*标签）。

你的主要问题是`$tagg->move`移动到`$tagg`（即它本身！）所以这不起作用:(

下面是我的简化版本，它可以满足您的要求（即，当它看到`book/sec`带有第一个孩子的标签时，`notes`它会将其移动`sec`到 previous 的末尾`sec`）并演示如何`->move`工作。

```
use strict;
use warnings;
use XML::Twig; 

my $book_sec = do {
    my $last_sec;
    sub {
        my ($twig, $sec) = @_;

        # if <sec> has first child <notes> then this needs
        # to be moved to end of previous <sec>

        $sec->move( 'last_child', $last_sec ) 
            if $sec->first_child('notes') && $last_sec;

        $last_sec = $sec;   # cache that last <sec>
    };
};

XML::Twig->new(
    twig_handlers => { 'book/sec' => $book_sec },
    pretty_print  => 'indented',
)->parsefile( 'sample.xml' )->print_to_file( 'output.xml' ); 
```

# wcf - 允许从 wcf Web 服务返回哪些数据类型

> ID：15546496
> 
> 赞同：0
> 
> 时间：2013-03-21T11:39:28.503
> 
> 标签：wcf, wcf-data-services

我是 wcf web 服务的新手......我想知道允许从 wcf web 服务返回哪些数据类型。例如，我可以从方法返回一个对象.....

# sql - 计算第一个和最后一个元组之间的分钟数并按用户名分组

> ID：15546498
> 
> 赞同：1
> 
> 时间：2013-03-21T11:39:31.297
> 
> 标签：sql, oracle, oracle11g, oracle-sqldeveloper

我有一个表来存储有关访问系统的用户的数据。当用户浏览系统时，我将他们的位置、用户名、日期和时间存储在 Oracle 11g 数据库中。我的表如下所示：

```
 username   date           time          location

    user1      YYYY-MM-DD    HH24:MI:SS     kitchen
    user2      YYYY-MM-DD    HH24:MI:SS     bathroom 
```

我需要一个查询来计算每个特定用户名每天的第一个日志和最后一个日志之间的分钟数。一个人会怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:46:28.317

按用户名分组，按日期最大+最小？（您可能需要将它与[密集等级相结合](http://www.techonthenet.com/oracle/functions/dense_rank.php)

类似的东西（伪代码）

```
SELECT  . . .
FROM
(SELECT
select *, 
-- dates
    DENSE_RANK() OVER (PARTITION BY TRUNC(date) ORDER BY date DESC) AS rank 
                 FROM
                    your_table
)
) t1
WHERE RANK = 1      
group by 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:04:58.180

假设`date`and`time`是 varchar2，
试试：

```
with t as
(
   select username, "date", to_date("date"||time, 'YYYY-MM-DDHH24:MI:SS') dt
   from your_table 
)
select username, "date",  (max(dt)- min(dt)) * 1440
from t
group by username, "date" 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/346fd/4)

# icons - 多个图标的图标叠加处理程序

> ID：15546507
> 
> 赞同：0
> 
> 时间：2013-03-21T11:40:01.390
> 
> 标签：icons, shell-extensions

如何实现可以处理自定义文件的自定义图标的图标叠加处理程序。

例如：

```
foo.bar - d:\myicon1.ico
bar.bar - d:\myicon2.ico 
```

我试过用过`IShellIconOverlayIdentifier`，但它的用途是`one handler for one icon`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:45:11.887

使用[图标处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144122%28v=vs.85%29.aspx)而不是图标覆盖处理程序。请参阅不错的[Michael Dunn 教程](http://www.codeproject.com/Articles/797/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)。

# javascript - Internet explorer 10 自动编码 xmlhttprequest 中的 url

> ID：15546509
> 
> 赞同：4
> 
> 时间：2013-03-21T11:40:07.960
> 
> 标签：javascript, ajax, internet-explorer-10

在发送 ajax 请求之前，是否有阻止 IE10 自动编码 url 的解决方法？

这是一个例子：

```
var req = new XMLHttpRequest();
req.open('GET', '/index.html#fragment', false);
req.send(null);
如果（req.status == 200）
    console.log("req.responseText:" + req.responseText);

```

IE10 F12开发者工具的网络面板显示发送的请求是

> /index.html%23fragment

我的服务器收到了相同的编码网址。

其他浏览器不会发生这种情况，并且规范明确规定浏览器必须在执行请求之前从 url 中删除片段 → [http://www.w3.org/TR/XMLHttpRequest/#the-open()-method](http://www.w3.org/TR/XMLHttpRequest/#the-open()-method)

谢谢。

# ios - 仅旋转视图而不旋转其子视图

> ID：15546510
> 
> 赞同：4
> 
> 时间：2013-03-21T11:40:13.180
> 
> 标签：ios, objective-c, mkmapview, mkannotation

有没有什么方法可以将旋转视图的变换传递给它的子视图？我有一个自定义的 MKAnnotationView，我正在根据用户的标题值进行旋转。在自定义注释视图类的以下方法中，我将子视图添加到注释视图。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    if(selected)
{
  [self addSubview:self.myCallOutView];
  return;
}
  [self.myCallOutView removeFromSuperview];

} 
```

但问题是当我的注释视图旋转然后我选择任何注释时，myCallOutView 也会出现我不想要的旋转。我正在使用下面的行旋转自定义注释视图

```
 [self setTransform:CGAffineTransformMakeRotation(angle * M_PI / -180.0)]; 
```

我怎样才能避免这种情况？在将其添加为子视图之前，我是否需要在 myCallOutView 上应用一些转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:43:05.937

一个非常简单的解决方案是在子视图上执行反向旋转：

```
[self setTransform:CGAffineTransformMakeRotation(angle * M_PI / -180.0)];
// NOTE: we're using the negative of the angle here
[self.myCallOutView setTransform:CGAffineTransformMakeRotation(- angle * M_PI / -180.0)]]; 
```

这将抵消旋转对超级视图的影响。

**替代方法：**构造您的视图略有不同：视图 A 和视图 B 不是视图 B 中的视图 A，而是视图 A 和 B 作为容器视图 C 的子视图。然后只需将您的旋转应用于视图 A，B 不会受到影响。要在显示器上移动整个整体，请重新定位容器视图 C。

# android - 设置视图某些部分的边框颜色

> ID：15546516
> 
> 赞同：0
> 
> 时间：2013-03-21T11:40:26.183
> 
> 标签：android, border

我想绘制片段视图边框的左侧但不是整个边框。我想将左侧按钮用作选项卡。单击其中一个时，我想绘制按钮的整个边框，但要绘制视图的左角，但单击的按钮右侧除外。有没有办法做到这一点？

![在此处输入图像描述](../Images/df30a53afe50ce32203c71081e5e7b1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:51:32.353

您可以创建一个只有左边框的九个补丁图像并将其应用为片段的背景。

可以在此处找到有关如何创建九个补丁图像的更多信息：

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

和这里：

[http://android9patch.blogspot.co.il/](http://android9patch.blogspot.co.il/)

# android - 适用于 Android 的 Google Cloud Messaging 可以从服务器到客户端，反之亦然（从客户端到服务器）？

> ID：15546520
> 
> 赞同：0
> 
> 时间：2013-03-21T11:40:30.350
> 
> 标签：android, cloud, google-cloud-messaging

堆栈溢出研究员，

由于我是云计算方面的新手，所以我想问你一个问题：Android 版 Google Cloud Messaging 可以从服务器到客户端，反之亦然（从客户端到服务器）？

我问你这个，因为我目前正在开发一个 Android 应用程序。结构，一般来说，它类似于：我想将我的笔记本电脑用作服务器 - 并在此处执行所有计算。然后，从我的服务器（笔记本电脑）发送云中的所有内容，然后从云中直接发送到我的 Android 运行设备。我想在我的本地服务器上执行计算和数据库存储（因为，因为我是一名学生，我没有足够的钱来实际支付谷歌的服务器（比如说），所以我专注于免费和适合我的需求），只需使用适用于 Android 的 Google Cloud Messaging 与我的 Android 设备进行通信。（我希望我的应用程序独立于我的移动设备的硬件，而且，我想编写将在我的服务器上用 Java 执行计算的程序）。

我知道我可以将消息从服​​务器发送到我的设备（通过云），但问题是：我也可以将消息从我的设备发送到服务器吗？我问这个，因为计算将在我从我的设备提交一些东西之后进行（基本上，我的 Android 应用程序将是一个接口，我可以从那里将数据发送到我的服务器（通过云）然后接收（也通过云）我的设备上的计算结果）

根据我目前正在阅读的内容（[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)），我似乎只能将消息从服​​务器发送到我的设备，但我决定问一下，因为到目前为止，它是我发现的唯一一个免费的消息传递框架（使用云）。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-18T10:25:29.570

您可以使用 GCM 云连接服务器将消息从设备发送到服务器。

此页面的段落：http: [//developer.android.com/google/gcm/ccs.html](http://developer.android.com/google/gcm/ccs.html)

> GCM 云连接服务器 (CCS) 允许第三方服务器通过使用 XMPP 协议与 Google 服务器建立持久 TCP 连接来与 Android 设备进行通信。这种通信是异步和**双向**的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:49:43.187

> 适用于 Android 的 Google Cloud Messaging 可以从服务器到客户端，反之亦然（从客户端到服务器）？

抱歉，GCM（Google Cloud Messaging）仅用于从服务器向设备发送推送通知。不适合反之亦然。

> 我知道我可以将消息从服​​务器发送到我的设备（通过云），但问题是：我也可以将消息从我的设备发送到服务器吗？

将消息或任何东西（例如：照片、文件..）发送到服务器为什么不使用 Web 服务。我认为它将适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T09:58:46.830

KashifB 写的是正确的：

> 您可以使用 GCM 云连接服务器将消息从设备发送到服务器。

但请记住，**带有有效负载的消息**的**大小限制为**每条消息 4kb。

# commit - 使用 Apache Cayenne 进行批量输入

> ID：15546522
> 
> 赞同：1
> 
> 时间：2013-03-21T11:40:39.997
> 
> 标签：commit

我尝试通过将这些数据输入到 Cayenne 环境下的 Oracle 数据库来处理任何数据包。测试基于在一个循环中插入的数千行。

每行都有其唯一的 ID，在本例中使用 Oracle 序列来生成 ID。

我注意到，检查了 Cayenne 日志，框架使用了正确的序列，但在提交阶段，如果唯一 ID 不一致，则会引发异常。

当我在这个表上关闭 PK 约束时，提交阶段没有任何例外地完成，但之后在表中我可以找到一些重复的 ID，即使从序列中获取它也很好。

有人知道吗？

提前感谢克里斯。

# php - 如何在 PHP 中清理哈希转换器的输入？

> ID：15546528
> 
> 赞同：-3
> 
> 时间：2013-03-21T11:41:03.083
> 
> 标签：php, md5, sha1, sanitize, rainbowtable

我制作了一个网站，可以从用户输入纯文本生成哈希，用户可以输入单词/短语并从 MD5 或 SHA1（或两者）中进行选择。然后，该站点获取此输入并将其转换为 MD5 和 SHA1 并将其存储在数据库中，然后将其返回给用户。用户还可以在搜索栏中输入哈希，如果数据库有哈希，它将返回原始单词，目的是生成众包哈希表，同时为用户提供好处。我已经让主要功能正常工作，但我对应该清理什么感到两难，我希望用户能够输入特殊字符，因为这将提高搜索功能返回结果的机会，任何建议都将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:45:42.450

如果只是要进行散列处理，则不必对其进行清理，因为散列函数通常不易受到注入攻击。

当然，您应该清理所有数据库输入（用于插入和搜索）。但是，除非您使用不支持参数化查询（例如`mysql_*`函数；避免这些）的过时数据库 API，否则这将自动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:49:20.603

我认为您的应用程序没有理由清理*任何内容*。您对用户输入所做的所有事情都是将其提供给加密哈希函数，这些函数将很乐意接受任何字节序列。

当然，如果您在结果页面上显示输入字符串，您应该在将其嵌入 HTML 代码之前使用[htmlspecialchars()对其进行转义。](http://php.net/htmlspecialchars)同样，如果您将其作为参数包含在 URL 中，则应使用[urlencode()](http://php.net/urlencode)对其进行转义，如果将其存储在 SQL 数据库中，则应使用数据库驱动程序的适当转义函数对其进行转义（例如[mysqli::escape_string()](http://www.php.net/manual/en/mysqli.real-escape-string.php)），或者只使用[带有占位符的准备好的 SQL 语句](http://www.php.net/manual/en/pdo.prepared-statements.php)。

另请注意，加密哈希函数对字节字符串进行操作，而不是对字符串进行操作。这意味着，特别是对于包含非 ASCII 字符的文本，哈希值将取决于用于将其编码为字节的[字符编码。](http://www.php.net/manual/en/mbstring.supported-encodings.php)对于 Unicode 文本，它还可能取决于使用的[规范化形式](http://php.net/manual/en/class.normalizer.php)。UTF-8（具有规范化形式 C 或 D，或者只是用户的浏览器发送的任何内容）可能是当今相当普遍的选择，但如果您想提供帮助，您可能希望为您的用户提供不同编码的选择。

# c - lroundf()、floor() 和 nearintf() 有什么区别？

> ID：15546531
> 
> 赞同：2
> 
> 时间：2013-03-21T11:41:09.353
> 
> 标签：c

我知道上面提到的用于四舍五入浮点值和双精度值。但是有人可以解释一下每个值是如何四舍五入的吗？我找不到任何文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:46:43.513

请参阅手册页（当 WHATEVER 是库函数时，向 Google 学习“man WHATEVER”）：

*   [`lroundf()`](http://linux.die.net/man/3/lroundf)- 四舍五入到最接近的整数，远离零
*   [`floor()`](http://linux.die.net/man/3/floor)- 最大整数值不大于参数
*   [`nearbyintf()`](http://www.manpagez.com/man/3/nearbyintf/)- 以浮点格式四舍五入到整数值

# c# - 值对象是 DI 设计模式的有效依赖项吗？

> ID：15546535
> 
> 赞同：8
> 
> 时间：2013-03-21T11:41:30.517
> 
> 标签：c#, java, design-patterns, dependency-injection

对于我见过的所有 DI 示例，我总是将依赖项视为其他类，例如服务。但实际上，一个对象可能在很大程度上和/或至关重要地依赖于配置值，例如字符串和资源包装器（文件/路径/URI/URL，而不是整个大值字符串/文档或阅读器）。

请注意，这是关于 Java 或 C# 语法中的 DI 设计模式，而不是任何特定的 DI 框架如何处理这个问题。

例如，假设我有一个返回 String 的类（相对路径，基于一些模糊的实现逻辑）。它（而不是它的各种实现者）对“projectLocation”具有配置/初始化依赖性，因为用户可以在他们的机器上拥有各种项目，并且这个类将在调用时基于给定项目执行一些逻辑。

```
public abstract class PathResolver {

    protected File projectFilesLocation;

    public RoutinePathResolver(File projectFilesLocation) {
        this.projectFilesLocation = projectFilesLocation;
    }

    public abstract String getPath(String someValue);
} 
```

我不只是将 DI 用于单元测试（*喘气*，我什至没有单元测试，现有项目）。我只想将我的依赖/创建关注点和逻辑关注点分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:14:33.180

如果您要注入的东西（例如文件位置）是类可以直接使用的东西，那么注入它是完全有效的。

在`Object`a`File`或 a这样的情况下，`String`这与称为服务的东西没有什么不同。它是您的类的**依赖**项，因此适用 DI。

# c# - 如何在 windows phone 8 中制作画廊锁应用程序？

> ID：15546536
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:41:31.393
> 
> 标签：c#, windows-phone-8

我想在 windows phone 中创建一个应用程序，它获取画廊的内容，并希望在该文件上添加安全性，除非我的应用程序允许，否则任何人都无法使用蓝牙共享该文件。应用程序将在 windows phone 8 中进行？

请指导我如何将画廊放入我的应用程序的教程，暂时用密码锁定应用程序意味着有密码的用户可以访问应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:01:02.030

如果您想开始为 Windows Phone 开发，我建议您访问：

[http://dev.windowsphone.com/en-us/develop](http://dev.windowsphone.com/en-us/develop)

但是使用 photolock 可能会出现问题，因为应用程序在 Windows Phone 中无法以这种方式工作。您可以通过任何应用程序锁定相册。您只能创建自己的应用程序，您可以在其中存储照片`Isolated Storage`，然后通过某些代码等限制对此的访问。

有关独立存储的更多信息，您可以在此处找到和访问文件等：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402541(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402541(v=vs.105).aspx)

# mysql - 如何从两个组中的多对多表中选择一个用户？

> ID：15546539
> 
> 赞同：1
> 
> 时间：2013-03-21T11:41:51.343
> 
> 标签：mysql

我实际上并不需要以下查询，但我醒来时遇到了这个我无法弄清楚的“理论问题”。假设我有三个表：用户表、组表和 users_groups 表，它是多对多的。因此，如果一个用户属于组 1 和组 2，则每个用户将有两个不同的行。

现在，假设有很多组，例如，我如何专门选择同时属于组 2 和组 3 的用户？

我尝试了一些类似的东西，但它显示为空：

```
SELECT * FROM `users_groups` GROUP BY user_id HAVING group_id = 2 AND group_id = 3 
```

我想这假设两个组都在同一行，这显然是行不通的。我该怎么做？

编辑：两种变体怎么样：用户必须只在这两个组中，并且用户必须至少在这两个组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:43:32.887

```
SELECT *
FROM users_groups
GROUP BY user_id
WHERE group_id IN (2,3)
HAVING COUNT(1) = 2 
```

这当然假设 { `user_id`, `group_id`} 是唯一的（并且没有其他列可以将其他行添加到计数中）。否则，您可以明确地确保这一点：

```
SELECT *
FROM users_groups
GROUP BY user_id
WHERE group_id IN (2,3)
HAVING COUNT(DISTINCT group_id) = 2 
```

* * *

*只有*在这两组中稍微复杂一些。你可以这样做：

```
SELECT *
FROM users_groups g1
GROUP BY user_id
WHERE group_id IN (2,3)
AND NOT EXISTS
(
    SELECT 1
    FROM users_groups AS g2
    WHERE g2.user_id = g1.user_id
    AND group_id NOT IN (2,3)
)
HAVING COUNT(1) = 2 
```

或者，

```
SELECT *
FROM users_groups g1
GROUP BY user_id
HAVING COUNT(1) = 2
AND SUM(CASE WHEN group_id IN (2,3) THEN 1 ELSE 0 END) = 2 
```

* * *

在第 2 组和第 3 组中，总共超过 2 组：

```
SELECT *
FROM users_groups g1
GROUP BY user_id
HAVING SUM(CASE WHEN group_id IN (2,3) THEN 1 ELSE 0 END) = 2
AND COUNT(1) > 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:45:31.490

问题被称为`Relational Division`。

```
SELECT  a.ID, a.Name
FROM    users a
        INNER JOIN users_groups b
            ON a.ID = b.UserID
        INNER JOIN groups c
            ON b.group_ID = c.ID
WHERE   c.Name IN ('grp2', 'grp3')
GROUP   BY a.ID, a.Name
HAVING  COUNT(DISTINCT c.Name) = 2 
```

`DISTINCT`如果没有对每个用户强制执行唯一约束，则在以下查询中`Name`使用，否则`HAVING COUNT(*) = 2`就足够了。

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:43:39.643

```
 SELECT *, COUNT(*) FROM `users_groups` 
  WHERE group_id IN (2,3) 
  GROUP BY user_id HAVING COUNT(*) > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:50:57.787

用户必须只属于 grp 2 和 grp 3：

```
SELECT *, group_concat(group_id ASC) gui
FROM users_groups
GROUP BY user_id
HAVING gui="2,3" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:07:18.533

SELECT user_id FROM (select * from users_groups where group_id = 2) grp 1, (select * from users_groups where group_id = 3) grp2 where grp1.user_id = grp2.user_id

# android - 键盘重叠 EditText

> ID：15546543
> 
> 赞同：0
> 
> 时间：2013-03-21T11:42:03.060
> 
> 标签：android, android-edittext

当我单击 Edittext 时，我在此 XML 文件中使用以下 XML 文件，键盘与编辑文本重叠

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:layout_weight="1"
    android:background="@drawable/blue_bg"

    >

    <!-- Menu Panel -->
    <RelativeLayout
           android:id="@+id/menuPanel"
           android:layout_height="match_parent"
           android:layout_width="wrap_content"
           android:gravity="right"
           android:background="#52555a"
           android:orientation="vertical" >

            <TextView
                android:id="@+id/menu_title_1"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="0dp" 
                android:paddingLeft="15dp"             
                android:gravity="center_vertical"
                android:background="#353535"
                android:textColor="@android:color/white"
                android:text="@string/menu_title">     
            </TextView>

            <View
                android:id="@+id/menu_item_divider_1"
                android:layout_width="fill_parent"
                android:layout_height="0.5dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_below="@+id/menu_title_1"
                android:background="#b5b5b5"/>

             <ListView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/menu_item_divider_1"
                android:dividerHeight="1dp"
               android:id="@+id/list"
                ></ListView>
            </RelativeLayout>

       <!-- Sliding Panel -->     

        <LinearLayout
            android:id="@+id/slidingPanel"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/background"
            android:gravity="left"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/header"
                android:layout_width="match_parent"
                android:layout_height="30dp"
                android:background="@drawable/file" >

                <View
                    android:id="@+id/header_vertical_divider_1"
                    android:layout_width="2dp"
                    android:layout_height="fill_parent"
                    android:layout_alignParentTop="true"
                    android:layout_marginLeft="15dp"
                    android:layout_toRightOf="@+id/menuViewButton"
                    android:background="@drawable/engraved_bg" />

                <ImageView
                    android:id="@+id/menuViewButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="15dp"
                    android:clickable="true"
                    android:contentDescription="@string/description"
                    android:onClick="slidewindow"
                    android:src="@drawable/icon_menu"
                    android:visibility="visible" />

                <ImageView
                             android:id="@+id/logo"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_centerHorizontal="true"
                             android:layout_centerVertical="true"
                             android:src="@drawable/sislogo"
                             />

            </RelativeLayout>

            <View
                android:id="@+id/dividerHeaderBottom"
                android:layout_width="fill_parent"
                android:layout_height="1dp"
                android:background="#414141" />

            <ImageView
                android:id="@+id/clientlogo"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                 android:scaleType="fitXY" />

              <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:background="@drawable/rounded_edittext"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginBottom="5dp"
         android:paddingBottom="15dp"
         android:layout_marginTop="15dp"
         android:layout_weight="25"
        >

        <EditText
            android:id="@+id/newuser"
            style="@style/edittxt1"
            android:layout_below="@+id/olduser"
            android:layout_centerHorizontal="true"
            android:visibility="invisible"
                >
              <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/confirmuser"
           style="@style/edittxt1"
            android:layout_below="@+id/newuser"
            android:layout_centerHorizontal="true" 
            android:visibility="invisible"
                   >
              <requestFocus />
        </EditText>

        <Button
            android:id="@+id/changedetails"
            style="@style/btnstyle"
            android:layout_below="@+id/confirmuser"
            android:layout_centerHorizontal="true"
            android:background="@drawable/button_sytle"
            android:onClick="usernamepassword"
            android:text="Enter" 
            android:visibility="visible"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:layout_marginTop="20dp"
            />

        <Spinner
            android:id="@+id/manageaccounts"
             style="@style/spinnerstyle"
              android:layout_below="@+id/imageView1"

            />

        <EditText
            android:id="@+id/olduser"
            style="@style/edittxt1"
            android:layout_below="@+id/manageaccounts"
            android:layout_centerHorizontal="true"
            android:visibility="invisible"
                  >
              <requestFocus />
        </EditText>

   <ListView
            android:id="@+id/linkedparents"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/manageaccounts"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="15dp" 

            android:visibility="invisible"
            >
        </ListView> 

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
             android:background="@drawable/containerheader"></ImageView>

        <TextView
            android:id="@+id/textView1"
              style="@style/mainlbl"
            android:layout_alignBottom="@+id/imageView1"
            android:layout_alignLeft="@+id/manageaccounts"
            android:text="Manage Account(s)" 
            android:layout_marginBottom="5dp"

            />

   </RelativeLayout>
    <LinearLayout
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:orientation="vertical" 
          android:layout_weight="1"
          android:gravity="bottom">

          <RelativeLayout
          android:layout_width="match_parent"
          android:layout_height="30dp" 
          android:gravity="bottom"
          android:background="@drawable/bottom_bar">

          <ImageView
           android:id="@+id/imageView3"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
           android:layout_marginBottom="3dp"
           android:layout_marginLeft="10dp"
           android:src="@drawable/hom" 
           android:onClick="HOME"
           />

          <ImageView
           android:id="@+id/imageView4"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentRight="true"
           android:layout_alignTop="@+id/imageView3"
           android:layout_marginRight="5dp"
           android:layout_marginBottom="3dp"
           android:src="@drawable/logout" 
            android:onClick="Logout"
           />
             </RelativeLayout>
        </LinearLayout>
        </LinearLayout>

</FrameLayout> 
```

我正在为每个edittext使用requesfocous，当我单击edittext框时我希望edittext向上移动我该如何实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:53:39.277

为清单中的活动设置此属性

```
android:windowSoftInputMode="stateVisible|adjustPan" 
```

如果有效请分享

# c# - 没有约束的外键？

> ID：15546550
> 
> 赞同：0
> 
> 时间：2013-03-21T11:42:16.213
> 
> 标签：c#, .net, ado.net

我`DataRelations`在 Ado.Net 学习并遇到了这个构造函数

```
public DataRelation(
    string relationName,
    DataColumn parentColumn,
    DataColumn childColumn,
    bool createConstraints
) 
```

这里，最后一个参数是`createConstraints`，MSDN 解释为

> 创建约束
> 
> 类型：System.Boolean
> 
> 指示是否创建约束的值。如果创建了约束，则为 true。否则为假。

如果我将其设置为`false`然后会发生什么？它如何创建没有约束的外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:45:26.673

是的，将在不添加约束的情况下创建关系`ConstraintCollection`

更多关于约束：

> 关系还可以将各种更改从父 DataRow 级联到其子行。要控制子行中值的更改方式，请将 ForeignKeyConstraint 添加到 DataTable 对象的 ConstraintCollection。ConstraintCollection 确定删除或更新父表中的值时要执行的操作。

[http://msdn.microsoft.com/en-us/library/dz0az7c7.aspx](http://msdn.microsoft.com/en-us/library/dz0az7c7.aspx)

# excel - VBA程序运行时的Excel单元格值编辑

> ID：15546552
> 
> 赞同：0
> 
> 时间：2013-03-21T11:42:26.950
> 
> 标签：excel, vba

Excel VBA宏执行时，我们可以在哪个程序运行的excel中更改单元格的值吗？我想在脚本/程序运行时启用的编辑选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:44:22.180

当您的 VBA 包含大量循环时，您仍然可以通过添加以下内容在 excel 中执行操作：

```
DoEvents 
```

将此添加到循环中，这将允许在程序运行时发生其他事件（例如用户更改内容）。

请记住其他人已经给您的警告，您可能会严重破坏您的 VBA 脚本，因为用户实际上可能会弄乱您可能在脚本中与之交互的所有 excel 电子表格内容。

一个“有趣”的例子：

```
Option Explicit

Sub example_DoEvents()
    Dim timer1 As Date

    timer1 = Now()

    Do While Now() < timer1 + 10 / 60 / 60 / 24 'only let it last for 10 seconds
        DoEvents
        ActiveSheet.Range("A1").Value2 = Selection.Address
    Loop

    MsgBox "END"

End Sub 
```

# c++ - 处理器多久检查一次while循环条件？

> ID：15546554
> 
> 赞同：-3
> 
> 时间：2013-03-21T11:42:40.820
> 
> 标签：c++, c, assembly, processor

我知道如果while循环有这个主体：

```
while(a<b){
  do_some_calculations
 } 
```

它会进行计算，然后再次检查while循环。但是如果我有一个空`while`循环：

```
while(a<b) { } 
```

它多久检查一次条件？我知道while循环编译为`cmp`指令`jmp`（需要一到两个周期）。所以它会每1-2个周期检查一次while循环？或者不是，有些事情我不知道？详细的解释将非常有帮助。

PS问题是关于低级细节。请仔细阅读。我想知道共同的原则，而不是“它依赖于编译器等等”。

PPS 假设我们有一些有效的条件和编译器为其生成的代码。它多久会检查一次？这就是问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:48:37.237

因为标准允许在生成的程序集中有许多解决方案，所以您的问题实际上归结为“编译器做什么？” 因此只能通过示例来回答。

我使用 GCC 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）执行了以下测试：

主.cpp：

```
int main() {
    while (true) { }
} 
```

我使用以下命令行编译它：

```
g++ -S main.cpp 
```

输出的精简版本 main.S 如下所示：

```
LBB1_1:
    jmp  LBB1_1 
```

因此，如果*没有*优化，编译器会识别出没有要检查的条件，所以它只会生成一个紧密循环。

我怀疑其他编译器会做同样的事情，至少如果启用了任何优化。唯一可以确定的方法是检查:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T11:57:53.797

你似乎没有问正确的问题。如果问题涉及生成汇编代码的语言，您的答案将是，它取决于编译器、优化级别和某些其他因素，但最重要的是，它取决于***条件***。每个循环将进行一次测试。如果该测试包括访问数据库并在那里检查某些内容，那么执行循环的频率将远低于检查本地时间与某个到期时间（例如）的情况。在没有进一步了解***病情的情况下***, 没有可能的一般答案。当然，根据条件，编译器有时能够优化测试，但前提是代码的可见行为不依赖于它。所以从概念上讲，仍然在每次迭代时检查条件。当然，直到条件产生 false 并且循环结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T12:22:40.660

您的代码将创建一个紧密的循环，但如果它是空的，它将只是一个无限循环，例如 for `(;;)`- 没有终止条件的循环，如果它是多核的，它将吃掉所有处理器资源或 100% / number_of_cores。在旧操作中系统这样的代码能够使整个系统“冻结”，但现在所有操作系统的调度程序都是抢占式的，因此它只会执行一个时间片（从 1 到 200 毫秒，具体取决于操作系统），并且在这个时间片内它会在每个时间段内执行而不会中断如果主体为空并且编译器由于优化而没有删除您的条件，则为 2-5 个周期。所以我认为，正如我看到的许多人认为你的问题是模糊和不正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T11:52:34.587

它将生成的代码表现得**好像**每次迭代都检查了条件。

如果编译器可以证明每次迭代都检查条件是不必要的，那么它可能会删除检查。但这取决于各个编译器，并且取决于您提供给它的精确代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T12:28:15.803

在`while`循环中，条件会在进入循环之前被检查，所以它会比你通过循环的次数多检查一次。

至少在抽象机器中。允许编译器进行优化。因此，在您的示例中，如果编译器可以知道`a`and的值`b`（因为例如它们之前被分配了常量），那么它可能不会生成任何代码来进行检查。如果循环明显不包含任何可以改变条件的东西，它可能会在第一次检查后不生成检查，因为结果不会改变。对编译器的唯一真正限制是可观察输出与进行比较时相同。（我认为编译器也可以假设循环在某个时候终止，并将代码移动到循环下方，等等。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T11:56:24.307

> 假设我们有一些有效的条件和编译器为它生成的代码。它多久会检查一次？这就是问题所在。

如果没有优化，则在每个循环中，如果有优化并且编译器知道您的条件不会改变，则永远不会。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T11:57:31.657

编译器如何翻译这与 C 或 C++ 无关，只要它有效。如果编译器可以看到您的循环根本不需要运行，它可以将其删除。它可能会展开循环并完全删除除第一个检查之外的所有检查。这完全取决于编译器和代码，没有单一的答案。

如果编译器根本不进行优化，它将按照标准要求进行 - 在每次迭代开始时进行一次检查。

# callback - GtkWidget 回调（切换按钮）不传递数据

> ID：15546558
> 
> 赞同：0
> 
> 时间：2013-03-21T11:42:55.953
> 
> 标签：callback, widget, gtk

我有以下代码：

```
int DT=45;
g_print("--Set: %d\n",DT);
g_signal_connect(G_OBJECT(button), "toggled", G_CALLBACK(cave_dive_toggle_cb), (gpointer) &DT); 
```

和回调函数：

```
void cave_dive_toggle_cb(GtkWidget *widget, gpointer data)
{
    int *ID=(int *)data;
    int DT= *ID;
    if (gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(widget)))
     g_print("clicked %d\n",DT);
    else
     g_print("unclicked %d\n",DT);
} 
```

打开对话框并单击按钮时，我总是看到：

```
--Set: 45 
clicked 0 
unclicked 0 
clicked 0 
unclicked 0 
clicked 0 
unclicked 0 
```

难道我做错了什么？据我了解 Gtk 文档，我不是。我也尝试了交换版本并使用第一个参数以确保我编写了正确的 CB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:48:18.427

问题是这`DT`是一个局部变量，所以一旦函数退出它就不再存在了。您需要做的是使用 GINT_TO_POINTER 和 GPOINTER_TO_INT 宏，如下所示：

```
g_signal_connect (G_OBJECT (button), "toggled", G_CALLBACK (cave_dive_toggle_cb), GINT_TO_POINTER (DT)); 
```

和

```
void cave_dive_toggle_cb (GtkWidget *widget, gpointer data)
{
    int DT = GPOINTER_TO_INT (data);

    ... 
```

# php - 在对象中打印动态设置的属性

> ID：15546567
> 
> 赞同：0
> 
> 时间：2013-03-21T11:43:17.043
> 
> 标签：php

如何在波纹管类中打印动态添加属性？

```
class Car {

    function __construct() {
    }

    function setInfo($car_arr) {
            foreach ($car_arr as $key => $value) {
                $this->{$key} = $value;
            }
    }

   } 
```

像下面这样设置类对象

```
$car1 = new Car();
$car1->setInfo(array('make' => 'Toyota', 'model' => 'scp10'));

$car2 = new Car();
$car2->setInfo(array('anme1' => 'value1', 'anme2' => 'value2')); 
```

现在我想在下面打印汽车对象

```
make = Toyota
model = scp10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:45:20.863

尝试 ：

```
$car1 = new Car();
$car1->setInfo(array('make' => 'Toyota', 'model' => 'scp10'));

echo $car1->make;
echo $car1->model; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:03:33.693

[请考虑像我在此答案](https://stackoverflow.com/a/15545569/785663)中指出的那样明确存储属性：

```
<?php
class Car {
  private $data = array();

  function setInfo(array $carInfo) {
    foreach ($carInfo as $k => $v) {
      $this->data[$k] = $v;
    }
    return $this;
  }

  function __set($key, $val) {
    $this->data[$key] = $val;
  }
  function __get($key) {
    return $this->data[$key];
  }
}

$car = new Car();
$car->setInfo(array('make' => 'Toyota', 'warranty' => '5 years')); 
```

我认为它更“干净”，但这可能值得商榷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:46:46.240

```
<?php
    class Car {

        function __construct() {
        }

        function setInfo($car_arr) {
                foreach ($car_arr as $key => $value) {
                    $this->{$key} = $value;
                }
        }

       }
    $car1 = new Car();
    $car1->setInfo(array('make' => 'Toyota', 'model' => 'scp10'));

    echo "Make value is : " . $car1->make. ", Model value is : ". $car1->model;
?> 
```

以上代码输出`Make value is : Toyota, Model value is : scp10`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:50:35.463

我认为您正在寻找类似[PHP 魔术方法的东西](http://php.net/manual/en/language.oop5.magic.php)

比如这个：

```
<?php

class A
{
    public $var1;
    public $var2;

    public static function __set_state($an_array) // As of PHP 5.1.0
    {
        $obj = new A;
        $obj->var1 = $an_array['var1'];
        $obj->var2 = $an_array['var2'];
        return $obj;
    }
}

$a = new A;
$a->var1 = 5;
$a->var2 = 'foo';

eval('$b = ' . var_export($a, true) . ';'); // $b = A::__set_state(array(
                                            //    'var1' => 5,
                                            //    'var2' => 'foo',
                                            // ));
var_dump($b);

?> 
```

[这](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)也会很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:54:30.293

您可以使用 get_object_vars() 获取所有属性：

```
$vars = get_object_vars($car1);
foreach ($vars as $key => $value) {
  echo $key . ' = ' . $value . '<br />';
} 
```

# amazon-web-services - 用于管理 AWS 上的演示实例的代理服务器

> ID：15546569
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:43:18.400
> 
> 标签：amazon-web-services, proxy

我管理着一组集成项目，我们为许多集成项目提供了一个带有我们产品的 Amazon 实例，用于开发和/或演示目的。为了节省 IT 预算，我想知道是否有代理软件可以测量到这些服务器的流量并在第一个请求时启动实例，如果在设定的时间（即 60 分钟）内没有请求则将其关闭.)

理想情况下，第一个请求会触发一个页面，通知用户延迟并保持自动加载，直到实例启动。我还希望查看按 IP 划分的使用统计数据，这样我就可以衡量用户的分布情况、不同 IP 的数量以及他们保持实例的时间。但那是次要的。

有没有这样的软件/服务？最好在 FOSS 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:49:05.330

如果您使用[Auto Scaling](http://aws.amazon.com/documentation/autoscaling/)和[自定义 CloudWatch 指标](http://www.thatsgeeky.com/2012/01/autoscaling-with-custom-metrics/)，您可能会使用您想要决定如何进行 Auto Scale 的任何数据。如果您有其他日志源或应用程序级代码，则不需要代理，只需解释该数据，将其传递给您的 CloudWatch 指标，然后将根据需要进行自动缩放。

利用 t1.micro，您可以让一个实例处理请求并通过您的自动缩放组从那里向外扩展。1 年或 3 年预留实例的定价[成本极低](http://aws.amazon.com/ec2/pricing/#reserved)。您需要一些东西来了解传入的音量，因此无论如何都需要一个实例。使用 t1.micro，您的运营成本很低，并且可以非常精细地扩展。

# glassfish-3 - ADF Glassfish 自动部署错误

> ID：15546578
> 
> 赞同：1
> 
> 时间：2013-03-21T11:43:54.773
> 
> 标签：glassfish-3, oracle-adf, jdeveloper, autodeploy

我可以直接从 jDeveloper 将 adf 应用程序部署到 glassfish 服务器（并且应用程序也运行良好），但是当我部署 EAR 文件然后将其放入 glassfish 域的 autodeploy 文件夹时，我在日志中看到以下错误（仅供参考：在将 ear 文件加载到 autodeploy 目录之前，我已经取消部署并重新启动了 glassfish）

```
[#|2013-03-21T06:27:17.104-0400|SEVERE|glassfish3.1.2|org.apache.catalina.core.ContainerBase|_ThreadID=28;_ThreadName=Thread-2;|ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: oracle.adf.share.glassfish.listener.ADFGlassFishAppLifeCycleListener
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T08:36:34.443

根据错误消息，您的 glassfish 域或此服务器实例上都没有安装 ADF 库。

如果您需要将完整版的 ADF 安装到 weblogic 服务器，请查看[oracle 文档。](http://docs.oracle.com/cd/E35521_01/admin.111230/e16179/ap_glassfish.htm#ADFAG20931)
或者，如果您打算使用免费版本的 ADF - ADF Essentials，请尝试关注这篇[文章](https://blogs.oracle.com/shay/entry/deploying_oracle_adf_applications_to)。

# nginx - nginx 中的自动版本控制 CSS/JS

> ID：15546579
> 
> 赞同：5
> 
> 时间：2013-03-21T11:43:55.037
> 
> 标签：nginx, versioning, auto-versioning

我有一个设置，其中 nginx 提供所有静态内容（CSS/JS）。我们的问题是，当我们更新静态内容时，浏览器不一定会立即更新它们，这会在我们推送新版本时引起问题。

我想要一个 nginx 插件，它基本上替换了对 CSS/JS 的所有调用并广告版本号，如下所示：

前：

```
<link rel="stylesheet" type="text/css" href="/media/css/style.css" /> 
```

后：

```
<link rel="stylesheet" type="text/css" href="/media/css/style.css?3428432" /> 
```

并根据 style.css 文件本身的最新更改日期自动执行此操作。所以我不必更新 HTML。有这个插件吗？我知道 Google 的 mod_pagespeed 在他们的 apache2 模块中做了类似的事情。但我找不到任何 nginx 的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:36:33.900

通常，这是在应用程序本身中完成的，而不是在网络服务器级别。网络服务器通常只知道要提供什么以及从哪里提供服务。PHP 和 Rails 都可以执行您在上面描述的操作，但同样，这是在应用程序本身内。

据我所知，[这篇文章](http://blog.bripkens.de/2012/03/nginx-cache-busting/ "使用 nginx 进行缓存清除")是一个很好的逐步演练，与您所要求的非常相似，但同样，这涉及应用程序更改。如果您在 Google 上搜索“nginx css 版本控制”，您会发现其他讨论 nginx 配置的文章，但我所查看的所有内容也涉及应用程序更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T12:26:38.677

将以下内容添加到 nginx 应该只使用文件名并忽略版本信息来提供文件。

```
location ~ ^/(assets/js|assets/css) {
 root path/to/the/static/files;
 access_log off;
 expires max;
 try_files $uri $1;
} 
```

# sitecore - Sitecore 6 根据配置文件过滤项目

> ID：15546581
> 
> 赞同：2
> 
> 时间：2013-03-21T11:44:04.860
> 
> 标签：sitecore, sitecore6, sitecore-dms

我正在寻找一种基于用户当前配置文件过滤一系列站点核心项目的通用方法，我发现了一个有希望的示例：

[如何在 Sitecore DMS 中触发配置文件？](https://stackoverflow.com/questions/11881011/how-do-i-trigger-a-profile-in-sitecore-dms)

但是，缺少一些关键参考，这很可惜，因为它看起来是一个合适的通用函数

`Resources.Settings.AnalyticsUserProfileEnableSwitch`我假设只是一个布尔开关

凶手是`ApplyUserProfile(filter)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T23:28:56.670

请记住，用户配置文件与 DMS 中的配置文件不同。在 DMS 中，这是指与特定用户无关的分析配置文件，但在访问配置文件中......即营销角色。

如果您想根据用户配置文件过滤项目，您只需获取 Sitecore.Context.User.Profile 并获取属性是什么，然后根据您想要过滤的方式实现您的逻辑。

如果您想根据 DMS 配置文件过滤项目，那么这将很难做到，因为角色不是实时输入到 Analytics 数据库中的。这些真的不是你在运行时甚至会意识到的事情，因此在运行时对角色进行分类将会很困难。但是，您可以使用规则系统根据其他标准（例如使用参与计划或其他东西）进行一些过滤......但如果没有更多信息，那就只能说这么多了。

# javascript - 可拖动 div 中的位置错误

> ID：15546582
> 
> 赞同：1
> 
> 时间：2013-03-21T11:44:05.000
> 
> 标签：javascript, css

我有 div 的行为有点奇怪，当我第一次移动它时它工作得很好，但是第二次位置开始出现错误我有 position: absolute 在主 div 中，但仅此而已。

知道如何清除窃听器吗？ [http://jsfiddle.net/dymond/tQdFZ/14/](http://jsfiddle.net/dymond/tQdFZ/14/) <-- jsfiddle

javascript。

```
var draggable = document.getElementsByClassName('hand'),
        draggableCount = draggable.length,
        i, currZ = 1;

    function startDrag(evt) {

        var diffX = evt.clientX - this.offsetLeft,
            diffY = evt.clientY - this.offsetTop,
            that = this;
        this.style.opacity = "0.5";
        this.style.zIndex = currZ++;

      function moveAlong(evt) {
    that.parentNode.style.left = (evt.clientX - diffX) + 'px';
    that.parentNode.style.top = (evt.clientY - diffY) + 'px';
}
        function stopDrag() {
            document.removeEventListener('mousemove', moveAlong);
            document.removeEventListener('mouseup', stopDrag);
            changeClass()
        }
        function changeClass() {
            var diceClass = document.getElementsByClassName("hand");
            for (var i = 0; i < diceClass.length; i++) {
                diceClass[i].style.opacity = "1";
            }
        }

        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('mousemove', moveAlong);
    }

    for (i = 0; i < draggableCount; i += 1) {
        draggable[i].addEventListener('mousedown', startDrag);
    } 
```

CSS

```
**.draggable {
 position: absolute; 
    width: 100px;
    height: 100px;
    background: red;
}

.hand{   
 cursor             : move;
 width: 98px;
min-height: 16px;
background: yellow;
border:1px solid black;

}
textarea{
   padding-top:20px;
    resize              : none;
    overflow            : hidden;
    background          : transparent;
    width:95px;
    border:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:55:10.947

`offsetLeft`and `offsetTop`of`this`始终为 0，因为`this`指的是`.hand`不是`.dragabble`这样的：

```
 var diffX = evt.clientX - this.offsetLeft,
        diffY = evt.clientY - this.offsetTop, 
```

应该是这样的：

```
 var diffX = evt.clientX - this.parentNode.offsetLeft,
        diffY = evt.clientY - this.parentNode.offsetTop, 
```

更新小提琴：http: [//jsfiddle.net/knoxzin1/tQdFZ/15/](http://jsfiddle.net/knoxzin1/tQdFZ/15/)

# mysql - UPDATE 失败 - SELECT 被拒绝

> ID：15546583
> 
> 赞同：1
> 
> 时间：2013-03-21T11:44:05.643
> 
> 标签：mysql

我有一个无法解决的 mysql 授权问题。

```
mysql>  UPDATE frontier_remote.trident_update SET completed=NOW() WHERE mac_address="00:1b:24:a0:da:e9" AND completed IS NULL;
ERROR 1143 (42000): SELECT command denied to user 'trident_client'@'host-78-147-8-82.as13285.net' for column 'mac_address' in table 'trident_update'
mysql> SELECT mac_address from trident_update WHERE mac_address="00:1b:24:a0:da:e9" and completed is NULL;
+-------------------+
| mac_address       |
+-------------------+
| 00:0:de:ad:be:ef |
+-------------------+
1 row in set (0.04 sec) 
```

所以更新声称在选择中失败，但命令的选择部分似乎是独立工作的。

授权表中的相关条目如下所示：

```
GRANT USAGE ON *.* TO 'trident_client'@'%' IDENTIFIED BY PASSWORD 'shadow_password'
GRANT INSERT, UPDATE ON `frontier_remote`.* TO 'trident_client'@'%'
GRANT SELECT ON `frontier_test`.`trident_update` TO 'trident_client'@'%' 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:59:47.727

执行以下命令：

```
FLUSH PRIVILEGES 
```

> 从 mysql 数据库中的授权表重新加载权限。在 Unix 上，如果服务器接收到 SIGHUP 信号，也会发生这种情况。
> 
> 作为 GRANT、CREATE USER、CREATE SERVER 和 INSTALL PLUGIN 语句的结果，服务器将信息缓存在内存中。这块内存不会被相应的 REVOKE、DROP USER、DROP SERVER 和 UNINSTALL PLUGIN 语句释放，因此对于执行许多导致缓存的语句实例的服务器来说，内存使用量会增加。可以使用 FLUSH PRIVILEGES 释放此缓存内存。

文档：[冲洗](http://dev.mysql.com/doc/refman/5.5/en/flush.html)

# wso2 - 从使用 wso2 应用程序服务器创建的数据服务中调用存储过程的查询

> ID：15546585
> 
> 赞同：0
> 
> 时间：2013-03-21T11:44:17.383
> 
> 标签：wso2

如何使用在 wso2 应用程序中创建的数据服务编写查询以调用具有 in 和 out 参数的存储过程。

我正在使用这个查询：`call wso2proc(:e_id,:e_name,?)`

和存储过程如下..

```
create or replace PROCEDURE WSO2PROC ( e_id IN emp20.id% TYPE , e_name IN emp20.name% TYPE , e_address OUT emp20.address% TYPE ) IS 
    BEGIN
        select address INTO e_address from emp20 e where e.id=e_id and e.name=e_name;
    END WSO2PROC; 
```

请建议在 wso2 应用程序服务器中创建数据服务时如何编写查询，以便返回 out 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:32:42.207

谢谢，雪兰。得到了答案。现在我使用了这个查询.....> call wso2proc(?,?,?) 并给出了存储过程参数中存在的所有输入和输出参数名称的输入映射。AS 例如：创建或替换过程 wso2prc(name in varchar,address out varchar)

因此，在输入映射中给定名称和地址，其名称与上述过程中的名称相同。除此之外，我对地址进行了映射，这将是程序的结果。和它的工作。

# couchdb - couchdb 会话和 IE8

> ID：15546588
> 
> 赞同：1
> 
> 时间：2013-03-21T11:44:21.237
> 
> 标签：couchdb, couchapp

我正在编写一个 couchapp，它使用 couch.jquery.js 库。

当我使用 ie8 登录该站点时，我成功登录（它返回 ok，和一个登录 ID），但是当我查询会话时，我得到一个 null 的 userCtx.name（就像登录没有发生一样）。

似乎资源管理器不会保留登录时的 cookie。有人有这方面的信息吗？我已经尝试过 J Chris 的 couchLogin.js 库并编写了我自己的登录脚本，但也遇到了同样的问题。

会话代码是：

```
$.couch.session({
    success: function(data) {
        console.log(JSON.stringify(data));
    }
}); 
```

来自 IE 的回应：

```
{"ok":true,"userCtx":{"name":null,"roles":[]},"info":{"authentication_db":"_users","authentication_handlers":["oauth","cookie","default"]}} 
```

来自 Firefox / Chrome 的响应：

```
{"ok":true,"userCtx":{"name":"user1","roles":[]},"info":{"authentication_db":"_users","authentication_handlers":["oauth","cookie","default"],"authenticated":"cookie"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:21:59.703

我已经通过编辑 jquery.couch.js 并在会话函数中将 cache:false 添加到 ajax 调用解决了这个问题。

```
session: function(options) {
  options = options || {};
  $.ajax({
    cache: false,  //disable caching for IE
    type: "GET", url: this.urlPrefix + "/_session",
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Accept', 'application/json');
    },
    complete: function(req) {
      var resp = $.parseJSON(req.responseText);
      if (req.status == 200) {
        if (options.success) options.success(resp);
      } else if (options.error) {
        options.error(req.status, resp.error, resp.reason);
      } else {
        throw "An error occurred getting session info: " + resp.reason;
      }
    }
  });
} 
```

# java - 是什么导致 HttpHostConnectException？

> ID：15546589
> 
> 赞同：19
> 
> 时间：2013-03-21T11:44:21.377
> 
> 标签：java, exception, http-host

我在搜索我的网站上有一个自动完成/提前输入功能。我看到有时他们是与之相关的例外。我们正在使用代理服务器。

```
org.apache.http.conn.HttpHostConnectException: Connection to http://proxy.xyz.com:60 refused    

at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:159)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
at com.xxx.dd.sone.integration.SearchDAO.getJSONData(SearchDAO.java:60)
at com.xxx.dd.sone.integration.SearchDAO.searchAutoCompleteResults(SearchDAO.java:560)
at com.xxx.dd.sone.presentation.util.SearchAutoCompleteUtil.doGet(SearchAutoCompleteUtil.java:26)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:731)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:845)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:242)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:352)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:236)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3254)
at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2163)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1512)
at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:255)
at weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:22)
at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:147)
at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:119) 
```

引起：java.net.ConnectException：连接被拒绝

这是我的编码方式

```
public HashMap<String, Object> getJSONData(String url)throws Exception {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpParams params = httpClient.getParams();
    try {
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
    } catch (Exception e) {
        e.printStackTrace();
        throw e;
    }
    HttpHost proxy = new HttpHost(proxy.xyz.com, 60);
    ConnRouteParams.setDefaultProxy(params, proxy);
    URI uri;
    InputStream data = null;
        uri = new URI(url);
        HttpGet method = new HttpGet(uri);
        HttpResponse response=null;
        try {
        response = httpClient.execute(method);
        }catch(Exception e) {
            e.printStackTrace();
            throw e;
        }
        data = response.getEntity().getContent();
    Reader r = new InputStreamReader(data);
    HashMap<String, Object> jsonObj = (HashMap<String, Object>) GenericJSONUtil.fromJson(r);
    return jsonObj;
} 
```

谁能告诉我为什么我只在一段时间内得到这个例外？这是否可能是由于我们的网站不支持从 Android 应用程序发出搜索请求而导致从 Android 应用程序发出搜索请求时引起的

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-21T11:55:16.913

当您尝试打开与当前没有任何东西在侦听连接的 IP 地址/端口的 TCP 连接时，会发生“连接被拒绝”错误。如果没有任何东西在监听，服务器端的操作系统会“拒绝”连接。

如果这种情况间歇性发生，那么最可能的解释是（IMO）：

*   您正在与之交谈的服务器（“proxy.xyz.com”/端口 60）正在上升和下降，或者
*   在您的客户端和代理之间有一些东西^(1间歇性地向无法运行的主机发送请求或其他东西。)

> 这是否可能是由于我们的网站不支持从 Android 应用程序发出的请求而从 Android 应用程序发出搜索请求时导致此异常。

似乎不太可能。您说“连接被拒绝”异常消息说它是拒绝连接的代理，而不是您的服务器。此外，如果服务器不处理某些类型的请求，它仍然必须接受 TCP 连接以找出请求是什么……然后才能拒绝它。

* * *

^(1 - 例如，它可能是一个将 DNS 名称循环解析为不同 IP 地址的 DNS。或者它可能是一个基于 IP 的负载均衡器。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T21:33:22.067

就我而言，问题是 HTTP URL 中缺少“s”。错误是：“HttpHostConnectException：连接到 someendpoint.com:80 [someendpoint.com/127.0.0.1] 失败：连接被拒绝”端点和 IP 显然已更改以保护网络。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-05T15:19:38.680

有时你必须为 gradle 设置代理服务器，你可以尝试在 .gradle 文件下的 gradle.properties 中更改代理服务器的 ip 地址

# asp.net - Date.Parse / ParseExact 不改变日期的奇怪问题（ASP.Net）

> ID：15546591
> 
> 赞同：1
> 
> 时间：2013-03-21T11:44:22.147
> 
> 标签：asp.net, sql, vb.net, parsing, date

我对 VB 中的 Date.Parse /ParseExact 功能有点头疼。推测一下，我有一个 ASP.Net 4.0 应用程序，在其中一个页面上有一个日历控件，用户可以选择日期和时间，这些控件被输入一个字符串 (strReqDeadline)，该字符串采用以下欧洲/英国日期时间格式: dd/MM/yyyy HH:mm:ss.fff

因此，例如 strReqDeadline 的内容将是：29/03/2013 16:30:00.000

然后我需要将它插入到 SQL 日期时间列中，因此显然它需要从英国转换为美国/日期时间格式。我一直试图用 Date.Parse 和 Date.ParseExact 来做这件事，但没有成功。根据我所做的研究，以下内容*应该有效：*

```
strReqDeadline = "29/03/2013 16:30:00.000"
Dim usDate = As Date = Date.ParseExact(strReqDeadline, "dd/MM/yyyy HH:mm:ss.fff",  System.Globalization.CultureInfo.InvariantCulture) 
```

但是，在运行时实际发生的事情很奇怪，Date.ParseExact 函数从时间开始修剪分形秒数（据我所知，它**不**应该这样做，因为过滤器指定了 .fff），否则会留下整个字符串完全不变。所以，如果输出usDate的值，会出现如下：**29/03/2013 16:30:00**

它*应该*包含的是日期时间：**3/29/2013 4:30PM**

真正奇怪的是，如果我在 usDate 上监视并启动应用程序，在开发环境中，它的值显示为**#3/29/2013 4:30PM#**，无论是在监视列表中还是在源窗口中悬停时，但任何形式的输出都会显示原始字符串，只是减去秒的小数部分，并且不会转换为日期时间。

从我读到的'InvariantCulture'规范应该否定任何特定于语言环境的输出问题，但以防万一这是问题，我还尝试使用 System.Globalization.CultureInfo.CreateSpecificCulture("en-GB") 指定明确的本地文化（也尝试过 fr-FR），但这没有区别。如果有任何相关性，客户端和服务器上的 Windows 区域设置都设置为 UK。

也许我遗漏了一些非常明显的东西，但我不明白为什么我会得到这个输出，Date.ParseExact 不会抛出任何异常或抱怨字符串未被识别，但我很难理解为什么会这样只是删除小数秒而不做其他任何事情，特别是因为输入弹簧与指定的掩码完全匹配。

我很想知道是否有其他人遇到过这样的奇怪问题以及您对此做了什么！

谢谢 ：）

编辑：带有 SQL 部分的完整代码如下：

```
strReqDeadline = "29/03/2013 16:30:00.000"    
Dim usDate As Date = Date.ParseExact(strReqDeadline, "dd/MM/yyyy HH:mm:ss.fff", System.Globalization.CultureInfo.InvariantCulture)

'SQL
Dim con As New Data.SqlClient.SqlConnection("data source=XXXXX;initial catalog=YYYYY;Integrated Security=True")
Dim cmd As New Data.SqlClient.SqlCommand()

cmd.Connection = con

cmd.CommandText = "INSERT INTO Requests (ReqOwnerID, ReqDeadline, ReqStatus)" _
& "VALUES ('" & UserID & "', '" & usDate & "', '1')"

con.Open()
Dim NewReqID = cmd.ExecuteScalar()

con.Close() 
```

'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:57:27.073

为什么你瘦了它不起作用？这些都是**相同**的基础日期/时间：

```
29/03/2013 16:30:00.000

29/03/2013 16:30:00

3/29/2013 4:00PM 
```

您不能依靠悬停在非字符串变量上显示的内容来确定其内部值。你所看到的只是对 的评价`ToString()`。如果您希望字符串显示小数秒，则需要调用`ToString()`并指定格式“dd/MM/yyyy HH:mm:ss.fff”。默认情况下，如果在转换为`String`.

* * *

如果您不使用参数（并且您应该使用），那么您在注入 DateTime 后的最终 SQL 语句将是这样的：

```
INSERT INTO MyTableWithDate
   (column1
   ,column2
   ,MyDateCol)
VALUES 
   ('a'
   ,'b'
   ,'20130329 16:30:00.557') 
```

* * *

正如我之前提到的，`Date`数据类型不是字符串。它是一个对象（或者说是一个 DateTime 结构，我离题了）。你**必须**调用正确的`ToString()`meth0d。

尝试将其与您的 SQL 字符串一起使用：

```
& "VALUES ('" & UserID & "', '" & usDate.ToString("yyyyMMdd HH:mm:ss.fff") & "', '1')" 
```

当然，将字符串转换为 Date 对象以立即将其再次转换回字符串几乎没有意义，但是这段代码应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:00:08.567

usDate 是 DateTime 类型的对象，它似乎存储了正确的值。当您检查它时，您会看到该日期时间值的字符串表示形式。它不包含 29/03/2013 16:30:00 或 3/29/2013 4:30PM，这只是它所包含内容的两个有效表示。

你说

> 任何形式的输出都会显示原始字符串

这不是真的。事实上，当您调用 ToString() 时，您可以控制它的输出方式，其中可以指定格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:04:00.490

您所做的看起来是正确的，即使用 Date.ParseExact 将英国格式的日期转换为 Date 类型。您遇到的问题是，当它显示为字符串时，它会以您的本地文化显示（调试器似乎总是希望以美国格式显示），但您设置的日期是正确的。

# highcharts - 更改 Highstock 上 yAxis 的比例以绘制绘图线

> ID：15546593
> 
> 赞同：0
> 
> 时间：2013-03-21T11:44:31.917
> 
> 标签：highcharts, highstock

我有一个数据，比如 200，应该绘制为 yAxis 线。默认最小值和最大值分别设置为 300 和 500。如何动态绘制 yAxis 绘图线以及如何动态更改 yAxis 的比例？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:23:06.477

1) 添加 plotLine 使用`chart.yAxis[0].addPlotLine(object)`. 查看[文档](http://api.highcharts.com/highstock#Axis.addPlotLine%28%29)

2）改变极端使用`chart.yAxis[0].setExtremes(min, max)`。查看[文档](http://api.highcharts.com/highstock#Axis.setExtremes%28%29)

# asp.net - 使用更新面板后，Web 用户控件中的 Gridview 在设计视图中不可见

> ID：15546595
> 
> 赞同：0
> 
> 时间：2013-03-21T11:44:37.293
> 
> 标签：asp.net, visual-studio-2010, updatepanel, webusercontrol

我创建了一个 Web 用户控件并在更新面板中放置了一个 gridview。我将此控件添加到我的网络表单中，但在设计视图中看不到网格。我只看到更新面板之外的控件。当我在浏览器中查看它或从用户控件中删除更新面板时，一切正常。

**有什么办法可以显示我的网格吗？在设计视图中看到空白而不是网格控件会令人困惑。**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl.aspx.cs" Inherits="TestWebsite.WebUserControl" %>

<%@ Register src="Controls/Products.ascx" tagname="Products" tagprefix="uc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <uc1:Products ID="Products1" runat="server" />

    </div>
    </form>
</body>
</html> 
```

产品.ascx

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Products.ascx.cs" Inherits="TestWebsite.Controls.Products" %>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="upnlProducts" runat="server" UpdateMode="Conditional" >
<ContentTemplate>
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="ProductID" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:BoundField DataField="ProductID" HeaderText="ProductID" 
                InsertVisible="False" ReadOnly="True" SortExpression="ProductID" />
            <asp:BoundField DataField="ProductName" HeaderText="ProductName" 
                SortExpression="ProductName" />
            <asp:BoundField DataField="SupplierID" HeaderText="SupplierID" 
                SortExpression="SupplierID" />
            <asp:BoundField DataField="CategoryID" HeaderText="CategoryID" 
                SortExpression="CategoryID" />
            <asp:BoundField DataField="QuantityPerUnit" HeaderText="QuantityPerUnit" 
                SortExpression="QuantityPerUnit" />
            <asp:BoundField DataField="UnitPrice" HeaderText="UnitPrice" 
                SortExpression="UnitPrice" />
            <asp:BoundField DataField="UnitsInStock" HeaderText="UnitsInStock" 
                SortExpression="UnitsInStock" />
            <asp:BoundField DataField="UnitsOnOrder" HeaderText="UnitsOnOrder" 
                SortExpression="UnitsOnOrder" />
            <asp:BoundField DataField="ReorderLevel" HeaderText="ReorderLevel" 
                SortExpression="ReorderLevel" />
            <asp:CheckBoxField DataField="Discontinued" HeaderText="Discontinued" 
                SortExpression="Discontinued" />
            <asp:BoundField DataField="CategoryName" HeaderText="CategoryName" 
                SortExpression="CategoryName" />
        </Columns>
    </asp:GridView>
    </ContentTemplate>
    </asp:UpdatePanel>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
        SelectCommand="SELECT * FROM [Alphabetical list of products]">
    </asp:SqlDataSource>
    <br /> 
```

![在此处输入图像描述](../Images/31680b3bb81d485df657594d2544be2b.png)

# visual-studio-2012 - 如何创建类似于 Visual Studio、Office 2013、GitHub for Windows 等中使用的程序界面（样式）？

> ID：15546599
> 
> 赞同：18
> 
> 时间：2013-03-21T11:44:40.077
> 
> 标签：visual-studio-2012

我想知道如何创建一个程序界面，如 Visual Studio、Office 2013、GitHub for Windows 等中使用的界面。

**看起来 WPF 的 Cosmopolitan Theme 与那些软件上使用的主题不同。**

为了向您展示这些程序界面和其他常见程序界面之间的区别，请查看这些打印屏幕：

## 我想知道如何构建的接口：

### 视觉工作室：

![在此处输入图像描述](../Images/fe5def5e159e0fe404cc5b16b1dffeb7.png)

### 办公室 2013 (Excel):

![在此处输入图像描述](../Images/c12d95bfdfd5e8583859a561bcc8e611.png)

### 适用于 Windows 的 GitHub：

![在此处输入图像描述](../Images/713dee05cdfed3f6f25eeeacdf239de6.png)

## 通用接口：

![在此处输入图像描述](../Images/c5c3d85de309a9f7d56b988a9e55bd89.png)

这些程序之间的区别在于其接口。我已经下载了适用于 Windows 8 的 Visual Studio Express、适用于 Windows 桌面的 Visual Studio Express，并且还查看了 Visual Studio Ultimate，但是当您创建“新项目...... ”。

我是否需要在我的 VS 上安装一个新模板才能构建这样的界面？我认为这是 WPF 的某种主题。我希望证明这些应用程序使用您在答案中引用的这种 UI 样式。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-24T08:44:40.253

请注意，应用程序的外观默认基于操作系统主题。

您的*界面*是按照[Metro UI 风格](http://en.wikipedia.org/wiki/Metro_%28design_language%29)设计的。Metro UI 应用程序仅适用于 Windows 8，因为它们需要 WinRT。

您只能使用 WPF 在 Windows 7（和 vista）中*模拟*Metro 风格：您必须使用第三方控件（或开发自己的控件），例如这些示例：

*   [WPF 的现代 UI](http://mui.codeplex.com/)
*   [MahApps.Metro](http://mahapps.com/MahApps.Metro/)

Cosmopolitan 只是普通控件的主题。例如，没有枢轴或全景控制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T22:12:28.590

Visual Studio 2012 和 GitHub for Windows 是 WPF 应用程序。Office 对“Metro”外观使用自定义控件。

WPF 和 Silverlight 提供了一种为整个应用程序设置主题的简单方法。GitHub 基于 Silverlight 主题“Cosmopolitan”。

以下是一些链接以获取更多信息。

[WPF 的国际化主题](http://cosmopolitanwpf.codeplex.com/)

[使您的 WPF 应用程序看起来像 Zune 客户端](http://coolthingoftheday.blogspot.com/2010/06/making-your-wpf-app-look-like-zune.html)

[Silverlight 4 应用程序主题](http://www.microsoft.com/en-us/download/details.aspx?id=14590)

[Mishra Reader](http://mishrareader.codeplex.com/)（具有类似主题的活跃开源 WPF 客户端）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T14:02:28.713

Office 2013 使用 Metro 风格和功能区。为此，您可以使用[Fluent Control Suite](https://fluent.codeplex.com/)。该项目还具有 Metro 风格，您可以轻松地将其制作为 Office 2013。请注意，您可能需要最近的 dll 而不是例如 nuget 包。

如果你想要一些像 Office 2013 这样的图标，我在这里找到了一个接近 Office 图标的图标包：[Axialis Pure Flat 2013](http://www.axialis.com/stock-icons/pure-flat-2013-toolbar.html)（有成本）。

对于没有 Ribbons 的其他人，您可以使用Cyber​​maxs 建议的[MahApps Metro](http://mahapps.com/)，对于码头，您可以使用WPF Toolkit 中的[AvalonDock](https://avalondock.codeplex.com/)。AvalonDock 也有 Metro Style。以及 Visual Studio 2010 风格。你可以像在 Visual Studio 中一样停靠你的 Windows，非常有用；）

# java - 将参数从一个 PreparedStatement 复制到另一个

> ID：15546600
> 
> 赞同：3
> 
> 时间：2013-03-21T11:44:46.973
> 
> 标签：java, jdbc, copy, prepared-statement

我像这样创建一个新的 PreparedStatement：

```
PreparedStatement newPs = origPrepStatement.getConnection().prepareStatement("EXPLAIN " + sql); 
```

origPrepStatement 也是 Preparedstatement 并且它包含参数。我想将 origPrepStatement 的参数复制到 newPs 中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:48:52.773

似乎没有简单的解决方案；在下面找到我笨拙的解决方案

```
class PreparedStatementParameters implements InvocationHandler {
    Map<Integer, Object> map = new HashMap<>();
    PreparedStatement ps;

    PreparedStatementParameters(PreparedStatement ps) {
        this.ps = ps;
    }

    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        if (method.getName().startsWith("set")) {

        }
        return method.invoke(proxy, args);
    }

    public void copyParameters(PreparedStatement ps) throws SQLException {
        for (Map.Entry<Integer, Object> e : map.entrySet()) {
            ps.setObject(e.getKey(), e.getValue());
        }
    }
}

public class T2 {
    public static void main(String[] args) throws Exception {
        PreparedStatement ps1 = ...
    PreparedStatementParameters ps1params = new PreparedStatementParameters(ps1);
        PreparedStatement ps1Proxy = (PreparedStatement) Proxy.newProxyInstance(null,
                new Class[] { PreparedStatement.class }, new PreparedStatementParameters(ps1));
        ps1Proxy.setString(1, "test");
        ...
        PreparedStatement ps2 = ...
        ps1params.copyParameters(ps2);
    }
} 
```

# java - 在 java 中使用 ScriptEngine，如何提取函数列表？

> ID：15546601
> 
> 赞同：1
> 
> 时间：2013-03-21T11:44:50.233
> 
> 标签：java, javascript, scriptengine

使用 Jsoup，我在 html 文件中提取 JavaScript 部分。并将其存储为 java String 对象。

我想使用**javax.script.ScriptEngine提取 js 函数中的函数列表、变量列表**

JavaScript 部分有几个函数部分。

**前任）**

```
function a() {
var a_1;
var a_2
...
}

function b() {
    var b_1;
    var b_2;
...
}

function c() {
    var c_1;
    var c_2;
...
} 
```

我的目标就在下面。

## 列表函数列表

a b c

## 列表 varListA

a_1 a_2 ...

## 列表 varListB

b_1 b_2 ...

## 列表 varListC

c_1 c_2 ...

如何提取函数列表和变量列表（或者可能是值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:05:24.077

我认为您可以在引擎中加载 javascript 后使用 javascript 内省来做到这一点 - 例如对于函数：

```
ScriptEngine engine;
// create the engine and have it load your javascript
Bindings bind = engine.getBindings(ScriptContext.ENGINE_SCOPE);
Set<String> allAttributes = bind.keySet();
Set<String> allFunctions = new HashSet<String>();
for ( String attr : allAttributes ) {
    if ( "function".equals( engine.eval("typeof " + attr) ) ) {
        allFunctions.add(attr);
    }
}
System.out.println(allFunctions); 
```

我还没有找到一种方法来提取函数内部的变量（局部变量）而不深入研究 javascript 脚本引擎的内部机制（因此使用不安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:00:17.307

这很棘手。`ScriptEngine`API 似乎不适合检查代码。所以，我有这种非常丑陋的解决方案`instance of`和`cast`运营商。

```
 Bindings bindings = engine.getBindings(ScriptContext.ENGINE_SCOPE);
       for (Map.Entry<String, Object> scopeEntry : bindings.entrySet()) {
           Object value = scopeEntry.getValue();
           String name = scopeEntry.getKey();
           if (value instanceof NativeFunction) {
               log.info("Function -> " + name);
               NativeFunction function = NativeFunction.class.cast(value);
               DebuggableScript debuggableFunction = function.getDebuggableView();
               for (int i = 0; i < debuggableFunction.getParamAndVarCount(); i++) {
                   log.info("First level arg: " + debuggableFunction.getParamOrVarName(i));
               }
           } else if (value instanceof Undefined
                   || value instanceof String
                   || value instanceof Number) {
               log.info("Global arg -> " + name);
           }
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T11:03:12.987

我有类似的问题。也许这对其他人会有所帮助。我使用凹槽作为脚本语言。我的任务是从脚本中检索所有可调用的函数。然后按一些标准过滤这个函数。

不幸的是，这种方法仅对 groovy 有用...

**获取脚本引擎：**

```
public ScriptEngine getEngine() throws Exception {
    if (engine == null)
        engine = new ScriptEngineManager().getEngineByName(scriptType);
    if (engine == null) 
        throw new Exception("Could not find implementation of " + scriptType);
    return engine;
} 
```

**编译和评估脚本：**

```
public void evaluateScript(String script) throws Exception {
    Bindings bindings = getEngine().getBindings(ScriptContext.ENGINE_SCOPE);
    bindings.putAll(binding);
    try {
        if (engine instanceof Compilable)
            compiledScript = ((Compilable)getEngine()).compile(script);
        getEngine().eval(script);
    } catch (Throwable e) {
        e.printStackTrace();
    } 
} 
```

**从脚本中获取函数。**除了反射之外，我没有找到其他方法如何从脚本中获取所有可调用方法。是的，我知道这种方法取决于 ScriptEngine 实现，但它是唯一的 :)

```
public List getInvokableList() throws ScriptException {                
    List list = new ArrayList();
    try {
        Class compiledClass = compiledScript.getClass();
        Field clasz = compiledClass.getDeclaredField("clasz");       
        clasz.setAccessible(true);
        Class scrClass = (Class)clasz.get(compiledScript);
        Method[] methods = scrClass.getDeclaredMethods();            
        clasz.setAccessible(false);
        for (int i = 0, j = methods.length; i < j; i++) {
            Annotation[] annotations = methods[i].getDeclaredAnnotations();
            boolean ok = false;
            for (int k = 0, m = annotations.length; k < m; k++) {
                ok = annotations[k] instanceof CalculatedField;
                if (ok) break;
            }
            if (ok) 
                list.add(methods[i].getName());
        }
    } catch (NoSuchFieldException e) {
        e.printStackTrace(); 
    } catch (IllegalAccessException e) {

    }
    return list;
} 
```

在我的任务中，我不需要所有功能，为此我创建自定义注释并在脚本中使用它：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CalculatedField {    
} 
```

**`Script example:`**

```
import com.vssk.CalculatedField;

def utilFunc(s) {     
    s
}

@CalculatedField
def func3() {     
    utilFunc('Testing func from groovy')
} 
```

**通过名称调用脚本函数的方法：**

```
public Object executeFunc(String name) throws Exception {
    return ((Invocable)getEngine()).invokeFunction(name);  
} 
```

# php - 按日期选择露营地可用性

> ID：15546608
> 
> 赞同：1
> 
> 时间：2013-03-21T11:45:13.397
> 
> 标签：php, sql

我正在开发一个露营地管理系统，并一直试图找出日期选择查询。

$sdate 是预订的开始日期 $edate 是预订的结束日期

我只是想找到日期之间当前未保留的站点。现在它工作得很好，除非有人想在某人离开的同一天预订，这被认为是因为有人“在”那个地方，但那天会离开，所以它不应该出现.

日期格式为 mm/dd/yyyy

数据库中的格式*不*设置为date，设置为varchar，格式相同。

```
$searchSite= $wpdb->get_results("SELECT *
        FROM wp_campground_sites
        WHERE wp_campground_sites.id
        NOT IN
        (
            SELECT wp_campground_sites.id
            FROM wp_campground_sites
            JOIN wp_campground_reservations
            ON wp_campground_sites.id = wp_campground_reservations.site_id
            WHERE
            (
             '$edate' between reservations.sdate and reservations.edate
             OR
            '$sdate' between reservations.sdate and reservations.edate
            OR
            reservations.sdate between '$sdate' and '$edate'
            )
       "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:54:16.127

您必须将 varchar 字符串更改为日期格式并进行比较

```
select date_format(str_to_date('12/31/2011', '%m/%d/%Y'), '%Y%m'); 
```

因为您要将字符串与日期进行比较，在您使用 date_formate 函数将 varchar 数据类型转换为实际日期格式之前，结果不会显示。

# python - mongoengine 日期时间字段和 python 日期时间

> ID：15546622
> 
> 赞同：0
> 
> 时间：2013-03-21T11:45:32.403
> 
> 标签：python, datetime, tornado, mongoengine

我面临以下我在其他应用程序中没有遇到的问题。

我的 Sprint 数据模型：

```
import mongoengine as me

class Sprint(me.Document):
    start_date = me.DateTimeField(),
    end_date = me.DateTimeField(),
    sequence = me.IntField(required=True, default=0) 
```

在外壳中，我尝试了以下操作：

```
sprint = Sprint.objects.get(sequence=1)
sprint
<Sprint: Sprint object>

sprint.start_date - datetime.utcnow()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  TypeError: unsupported operand type(s) for -: 'tuple' and 'datetime.datetime' 
```

然后我打印了 sprint.start_date 它返回了一个元组而不是 datetime 对象，如下所示：

```
sprint.start_date
(<mongoengine.fields.DateTimeField object at 0x22b7dd0>,) 
```

所以我做了

```
sprint.start_date[0] - datetime.utcnow()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  TypeError: unsupported operand type(s) for -: 'DateTimeField' and 'datetime.datetime' 
```

我之前的任何项目都没有遇到这个问题。我当前的 mongoengine 版本是 0.6.20。我没有为我当前的项目升级它，并且一直在我的所有项目中使用它。我正在使用 tornado 作为网络服务器

如何将 mongoengine 日期时间字段转换为与 python 日期时间实例兼容。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:23:32.677

错误在于数据模型定义本身。一种类型导致了这一切。:(

start_date 和 end_date 最后有一个“，”，这会产生噪音。

取下它后，它会滚动。:)

# mysql - 根据时间对表中的数据进行排序，并在日期时间中具有一定的准确性

> ID：15546625
> 
> 赞同：1
> 
> 时间：2013-03-21T11:45:39.977
> 
> 标签：mysql

我有两个包含 datetime 和 double 的表。

看起来像这样：

```
mysql> select * from ONE;            |  mysql> select * from TWO;
+---------------------+----------+   |  +---------------------+----------+
| date                | value    |   |  | date                | value    |
+---------------------+----------+   |  +---------------------+----------+
| 2002-03-18 10:30:02 | -181.241 |   |  | 2002-03-18 10:30:00 | -188.192 |
| 2002-03-18 10:30:06 | -180.673 |   |  | 2002-03-18 10:30:04 | -187.619 |
| 2002-03-18 10:30:10 | -180.055 |   |  | 2002-03-18 10:30:08 | -187.032 |
| 2002-03-18 10:30:14 | -179.459 |   |  | 2002-03-18 10:30:12 | -186.418 |
| 2002-03-18 10:30:18 | -178.801 |   |  | 2002-03-18 10:30:16 | -185.807 | 
```

我正在尝试使用公共日期列（使用 ONE.date 作为参考）对每个表中的值执行查询。但是，在某些情况下，测量值没有对称日期。上面是这样一个时期的一个例子（这是最坏的情况），这里表二中的值对应于两秒后表一中的值。

为了根据时间对两个表的值进行排序，我想允许“排序精度”，设置为一个“事件”的测量值之间的最大时间差。在这种情况下，该精度为 2 秒。

我不希望它看起来如何：如果 ONE.data 和 TWO.date 之间的时间差小于 +- 2 秒；将二合一的值加入：

```
mysql> select * from ONE;          
+---------------------+----------+-----------+
| date                | valueONE |  valueTWO |
+---------------------+----------+ ----------+
| 2002-03-18 10:30:02 | -181.241 |  -188.192 |
| 2002-03-18 10:30:06 | -180.673 |  -187.619 |
| 2002-03-18 10:30:10 | -180.055 |  -187.032 |
| 2002-03-18 10:30:14 | -179.459 |  -186.418 |
| 2002-03-18 10:30:18 | -178.801 |  -185.807 | 
```

如果差异超过 +- 2 秒，则放弃测量。这是我尝试过的，但是下面的查询只是超时。

```
SELECT ONE.date, ONE.value, TWO.date, TWO.value
FROM ONE 
    join TWO on ONE.date = TWO.date+INTERVAL 1 SECOND or ONE.date = TWO.date 
```

是否可以在 join 语句中有一个 IF 语句，这样如果

```
 if SELECT TIMESTAMPDIFF(SECOND,'2002-03-18 10:30:02','2002-03-18 10:30:00') <= 2, then join 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:49:39.330

您可以使用 BETWEEN：

```
SELECT ONE.date, ONE.value value_ONE, TWO.value value_TWO
FROM
  ONE join TWO
  on ONE.date BETWEEN TWO.date AND TWO.date + INTERVAL 2 SECOND
ORDER BY ONE.date 
```

请[在此处](http://sqlfiddle.com/#!2/7f6bb/3)查看小提琴。

# ios - GCD 和线程等待

> ID：15546632
> 
> 赞同：0
> 
> 时间：2013-03-21T11:46:06.500
> 
> 标签：ios, multithreading, grand-central-dispatch, nsrunloop

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        while(!weakSelf.isAnotherThreadCompleted && [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]])
            ;
         [weakSelf doSomething];

    }); 
```

以这种方式让异步线程等待另一个线程是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:07:03.910

您将停止对应的全局队列`DISPATCH_QUEUE_PRIORITY_DEFAULT`。如果您将其他内容发送到此队列，则在您完成等待之前它不会执行。

另外，我认为该调度队列对应的线程中不会存在运行循环，因此您将通过调用创建一个运行循环`- currentRunLoop`，由于不会附加任何源，它会立即返回值`NO`(或者，会有一个随机的运行循环，并且行为将完全不可预测）。

为什么不在工作线程的末尾调用一个块？或者只使用一种机制（GCD、NSOperation、线程、运行循环）和与之相伴的同步，而不是混合它们？

# java - 如何在列表框zk中添加条件复选框

> ID：15546633
> 
> 赞同：0
> 
> 时间：2013-03-21T11:46:08.153
> 
> 标签：java, javascript, frameworks, primefaces, zk

如何在列表框中添加条件复选框，此功能也适用于选择所有功能，我们在复选框中显示 25 个项目，某些项目不应显示，当我们选择主复选框时，应选中所有复选框。

例如，我必须在列表框中列出图像图标，如 PDF、jpg、gif、msword 和 excel 等的图像图标，并且复选框应仅与 PDF 图像图标和 msword 图像图标一起出现，复选框不应与其他图像图标一起出现. 还有一个复选框应该在列表框的标题中，标题复选框的功能如下： - 当我们选择标题复选框时，所有复选框都应该被选中，这些复选框与 PDF 图像图标一起出现。

![在此处输入图像描述](../Images/2fc46171344a781b03e7009abd907ecd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:52:38.163

见[ZK 论坛讨论条件复选框](http://forum.zkoss.org/question/80946/listbox-how-to-control-selectall-checkbox/)

根据这个讨论，在这种情况下你必须实现你自己的复选框，而不是使用列表框的默认复选框。这将轻松解决您的问题。

# java - 将 CheckBox 控件绑定到 XPages 中的 Bean

> ID：15546635
> 
> 赞同：0
> 
> 时间：2013-03-21T11:46:17.587
> 
> 标签：java, xpages

在 XPage 中，我有一个 CheckBox 控件绑定到 bean（称为产品）的属性。如果我将该属性设为像这样的布尔值..

```
private boolean selected = true;
public boolean isSelected() {
    return selected;
};
public void setSelected(boolean selected) {
    this.selected = selected;
}; 
```

并使用 EL 绑定复选框，`#{product.selected)`然后页面最初可以正常打开，但在部分刷新时挂起，但是我在日志中看不到任何错误。

如果我在 bean 中添加另一个包装器 getter/setter 以返回如下文本版本：

```
public String getSelectedTxt() {
    return String.valueOf(selected);
}
public void setSelectedTxt(String selectedTxt) {
    selected = Boolean.parseBoolean(selectedTxt);
} 
```

然后将复选框绑定到`#{product.selectedTxt}`并制作`uncheckedValue="false"`and `checkedValue="true"`。有用！

在版本 9 中，它直接针对布尔版本工作，无需转换为文本。

所以问题是这听起来像 8.5.3 中的一个错误，将复选框控件映射到布尔值（以前有没有人这样做过？），还是我以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:38:08.470

复选框是用于显示“关键字”类型的注释字段内容的一系列选项之一。关键字是具有一组有限值的文本字段。虽然您可能将 Checkbox 视为不是其最初目的或意图的布尔控件。因此，我不会将 8.5.3 实现视为错误。如果 9.0 的行为已更改为支持布尔值，那么这是个好消息。

# jython - 用于收集 IBA WAS 8 配置详细信息的 Jython 脚本

> ID：15546640
> 
> 赞同：0
> 
> 时间：2013-03-21T11:46:40.203
> 
> 标签：jython, websphere-8, wsadmin

我是 Jython 脚本语言和 IBM WAS 的新手。我正在尝试编写一小段脚本，它将为我提供配置详细信息，例如已安装应用程序列表和 IBM WAS 8 已用端口列表。我一直在尝试执行脚本并在 .txt 文件中收集详细信息，但是输出为空白。

我的代码是：-

```
#----------------------Code Starts---------------------
import sys
import string
import random

def ex2(serverName, nodeName):

   #--------------------------------------------------------------
   # set up globals
   #--------------------------------------------------------------
   global AdminConfig
   global AdminTask
   global AdminApp

   #--------------------------------------------------------------
   # do some sanity checking 
   #     -- do we have a node by this name? 
   #--------------------------------------------------------------
   node = AdminConfig.getid("/Node:" + nodeName + "/")
   print "ex1: checking for existence of node " + nodeName
   if len(node) == 0:
      print "ex2: Error -- node not found for name " + nodeName
      return

   #--------------------------------------------------------------
   #     -- is a server by this name already running on the node? 
   #--------------------------------------------------------------
   print "ex2: checking to see if server " + serverName + " is running on node " +     nodeName
   runningServer = AdminControl.completeObjectName("type=Server,node=" + nodeName +     ",process=" + serverName + ",*")
   if len(runningServer) == 0:
      print "ex2: Error -- Server " + serverName + " not running on node " + nodeName
      return 

   #--------------------------------------------------------------
   # List the installed application - WAS_12
   #--------------------------------------------------------------
   print "List the installed application"
   App_List = AdminApp.list()
   my_file = open('App_List.txt','w')
   my_file.write(App_List)
   my_file.close()

   #--------------------------------------------------------------
   # Find the configuration object 
   #--------------------------------------------------------------
   server = AdminConfig.getid("/Node:" + nodeName + "/Server:" + serverName + "/");

   #--------------------------------------------------------------
   # List the ports present - WAS_14
   #--------------------------------------------------------------
   print "List the ports"
   PORT_List = AdminConfig.list("NamedEndPoint",server)
   my_file = open('Port_list.txt','w')
   my_file.write(PORT_List)
   my_file.close()

#-----------------------------------------------------------------
# Main
#-----------------------------------------------------------------

if len(sys.argv) != 2:
   print "ex2: this script requires 2 parameters: server name, node name"
   print "e.g.:     ex2  server2 mynode" 
else:
   ex2(sys.argv[0], sys.argv[1])

#-----------------Code Ends----------------------------------------- 
```

我已将此代码保存在 sample_script.py 文件中，并通过转到 app_server_root/bin bin>wsadmin -lang jython -f path/to/your/jython/sample_script.py 来执行脚本

这将打印 - WASX7209I：使用 SOAP 连接器连接到节点 dbserverNode01 上的进程“server1”；进程的类型是：UnManagedProcess

但是没有返回预期的输出。高度赞赏响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:34:50.120

我认为问题出在以下声明中：

```
ex2(sys.argv[0], sys.argv[1]) 
```

`sys.argv[0]`保存执行脚本的名称，而不是第一个命令行参数。如果您正在调用脚本并将服务器和节点名称作为参数传递，请将上面的行更改为：

```
ex2(sys.argv[1], sys.argv[2]) 
```

# java - 用于在 JTable 中添加/删除行的侦听器

> ID：15546651
> 
> 赞同：3
> 
> 时间：2013-03-21T11:47:01.170
> 
> 标签：java, swing, jtable

从 JTable 添加/删除行后，是否有任何可用的事件会被触发？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T12:32:35.547

在表本身上，不，但`TableModel`负责在模型更改时触发适当的事件。

您可以`TableModelListener`在`TableModel`

```
JTable table = new JTable();
table.getModel().addTableModelListener(new TableModelListener() {

        @Override
        public void tableChanged(TableModelEvent e) {
            if (e.getType()==TableModelEvent.INSERT||e.getType()==TableModelEvent.DELETE) {
                // Do something
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:39:40.837

是的，只要添加或删除行，就会触发[TableModelEvent 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/TableModelEvent.html)

您需要创建一个[TableModelListener](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/TableModelListener.html)，然后使用[addTableModelListener](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/AbstractTableModel.html#addTableModelListener%28javax.swing.event.TableModelListener%29)将其添加到您的 TableModel 中。

如果您实现了自己的 TableModel，请确保在添加或删除行之后调用`fireTableRowsDeleted(int firstRow, int lastRow)`或。`fireTableRowsInserted(int firstRow, int lastRow)`

例如：

```
theTable.getModel().addTableModelListner(yourTableListener); 
```

where`yourTableListener`是实现 TableModelListener 接口的类的实例。

# windows-8 - windows 8 联系人选择器问题

> ID：15546652
> 
> 赞同：1
> 
> 时间：2013-03-21T11:47:05.703
> 
> 标签：windows-8

我已经通过 PickMultipleContactsAsync 方法查询了 windows phone 中的 People 应用程序联系人。它检索选定的联系信息。但因为我无法获取公司名称、职位、传真、网站等大部分字段。只有姓名、电子邮件、电话号码、地址字段可用。

# javascript - 如何禁用双击 Jquery 模态对话框按钮？

> ID：15546653
> 
> 赞同：2
> 
> 时间：2013-03-21T11:47:09.870
> 
> 标签：javascript, jquery

我正在使用 Jquery Modal Dialog 将一些数据提交到服务器端，然后保存到数据库中；这里我的模态对话框代码是：

```
 function loadUserDialog(tag, event, target, id) {
            event.preventDefault();

$.validator.unobtrusive.parse('#frmModalPopup');

            var $loading = $('<img src="@Url.Content("~/Content/images/ajaxLoading.gif")" alt="loading" class="ui-loading-icon" style="margin: 150px 150px;">');
            var $url = $(tag).attr('href');
            var $title = $(tag).attr('title');
            var $dialog = $('<div></div>');
            $dialog.empty();
            $dialog
            .append($loading)
            .load($url)
              .dialog({
                  autoOpen: false
               , title: $title
               , width: 500
               , modal: true
               , minHeight: 400
               , show: 'fade'
               , hide: 'fade'
              });
            $dialog.dialog("option", "buttons", {
                "Submit": function () {
                    var dlg = $(this);
                    if (IsValidUserName() && $('#frmModalPopup').validate().form()) {
                        $.ajax({
                            url: $url,
                            type: 'POST',
                            data: $(target).serialize(),
                            success: function (response) {
                                var cid = $(response).attr('id');
                                if (cid != null && cid != undefined) {
                                    $(response).fadeIn('slow').appendTo(id);
                                    $(window).scrollTop($('#' + cid).offset().top);
                                }

                                dlg.dialog('close');
                                dlg.empty();
                            },
                            error: function (xhr) {
                                alertMessage("EmailId is already in use!");
                                $.validator.unobtrusive.parse('#frmModalPopup');
                            }
                        });
                    }
                },
                "Cancel": function () {
                    $(this).dialog('close');
                    $(this).empty();
                }
            });

            $dialog.dialog('open');
        }; 
```

但是当我一次多次点击提交按钮时（不止一次），表单被提交了不止一次，我得到了重复的数据提交信息。那么您能否告诉我如何禁用双击或多次单击按钮提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:52:50.117

在第一次提交时禁用对话框，在继续之前检查它是否被禁用，如果已经禁用则返回。

```
"Submit": function () {
  if ($(this).hasClass("disabled"))
    return;

  $(this).addClass("disabled");

  // continue;
} 
```

编辑：您可以使用此方法添加一些额外的用户界面响应能力，方法是在禁用它时添加“正在工作...”或其他消息

```
$(this).addClass("disabled");
$dialog.append("Working..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T09:13:26.797

jquery ui 有一个不错的函数，名为 isOpen()。如果对话框已关闭但我们可以看到它以防止下次单击，我们可以使用函数 isOpen()：

```
"Submit": function () {
    if( $(this).dialog("isOpen") ){
        YOUR CODE           
    } else {
        return false;
    }
    $(this).dialog("close");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T09:36:41.207

我需要禁用该按钮以避免双击，但我需要在提交异步表单后重新启用该按钮。

为此，我使用了一个窗口变量，它并不优雅但很实用：

```
function openDialog() {
    window.clickOk = false;
    $("#divAnagrafica").dialog({
      ......
        buttons: [
                {
                    text: "Ok",
                    click: function () {
                        if (window.clickOk === true) {
                            return; 
                        }
                        window.clickOk = true;
                        $("#myForm").submit();
                    }
                }, 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-10T13:14:54.590

您可以在第一次单击发生后立即禁用按钮上的指针事件：

> CSS 属性设置特定图形元素在`pointer-events`什么情况下（如果有）可以成为指针事件的目标

**指针事件：无**意味着：

> 元素永远不是指针事件的目标；但是，如果这些后代将指针事件设置为其他值，则指针事件可能会针对其后代元素。在这些情况下，指针事件将在事件捕获/冒泡阶段期间适当地触发该父元素上的事件侦听器。

```
click: function (e) {
   //your code to open dialogue etc..
   `$`(e.target).css('pointer-events', 'none');
   //your code} 
```

# opengl - 如何绘制带有平面阴影的 3d 圆柱体

> ID：15546655
> 
> 赞同：0
> 
> 时间：2013-03-21T11:47:14.137
> 
> 标签：opengl, 3d, glut, flat

我想知道如何绘制带有平面阴影的圆柱体。

这是我到目前为止所做的。

```
void drawCylinder(int numMajor, int numMinor, float height, float radius)
{
   double majorStep = height / numMajor;
   double minorStep = 2.0 * M_PI / numMinor;
   int i, j;

   for (i = 0; i < numMajor; ++i) {
   float z0 = 0.5 * height - i * majorStep;
   float z1 = z0 - majorStep;

   glBegin(GL_TRIANGLE_STRIP);
   for (j = 0; j <= numMinor; ++j) {
   double a = j * minorStep;
   float x = radius * cos(a);
   float y = radius * sin(a);
   glNormal3f(x / radius, y / radius, 0.0);
   glTexCoord2f(j / numMinor, i / numMajor);
   glVertex3f(x, y, z0);

   glTexCoord2f(j / numMinor, (i + 1) / numMajor);
   glVertex3f(x, y, z1);
   }
   glEnd();
   }
} 
```

我知道我知道定义一个法线，但是这个法线给了我平滑的阴影而不是平坦的。我可以知道如何在 OpenGL 和 GLUT 中使它变平吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:49:39.917

如果你想要平面阴影，你只需要指定它。

```
glShadeModel(GL_FLAT); 
```

# css - 可变内容宽度固定侧边栏宽度布局

> ID：15546656
> 
> 赞同：0
> 
> 时间：2013-03-21T11:47:28.533
> 
> 标签：css, layout, width

我搜索了论坛，但无法得到问题的确切答案。我想在[http://techtites.com/](http://techtites.com/)上调整我的博客布局，以使内容区域的宽度灵活，当浏览器改变宽度时调整宽度而不将侧边栏推到底部。

它目前是一个固定宽度的布局。

我玩过的主要风格是：

```
#wrapper {
width:960px;
margin:0 auto;
}

#content {
padding:25px 0;
}

section {
float:left;
width:660px;
margin-right:20px;
}

aside {
float:left;
width:280px;
} 
```

我想让*截面*宽度是动态的，同时保留*一边*坐在窗口的右侧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:19:38.493

使用定位。将您的#wrapper div 设置为此将相对于*它*而不是浏览器窗口`position: relative;`定位该div 的所有子元素。

 *现在将你放在#wrapper div的左上角

```
aside {
    width: 280px;
    position: absolute;
    right: 0;
    top: 0;
} 
```

最后，为部分 div 提供足够的填充，以便它仍然可以扩展和收缩，但它为旁边留下了足够的空间。您希望填充等于侧面的宽度（在本例中为 280 像素）。

```
section {
    padding-right: 280px;
} 
```

我在 jsFiddle 上举了一个例子：[jsfiddle.net/2e9HM/6/](http://jsfiddle.net/2e9HM/6/)

奖励：如果你真的想变得花哨，你可以设置`max-width`你的#wrapper div，这样页面在那个大小内是灵活的。如果您这样做，请确保您也设置了 a `min-width`（等于您的侧边的大小），以便在窗口一直缩小时侧边不会落在 #wrapper 之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-19T19:01:49.580

Morphius 解决方案是迄今为止最好的 - 例如，请参阅 [http://codepen.io/anon/pen/wBBdgg](http://codepen.io/anon/pen/wBBdgg)

```
.blbx { 
background:blue;
 width: calc(100% - 100px);
  height:50px;
  display:inline-block;
  vertical-align:top;
  text-align:center;

}

.rdbx { 
background:red;
 display:inline-block;
   height:50px;
   width: 100px;
  vertical-align:top;

}

.surround {

  width: 100%;
   height:50px;

}

.myimg { max-width:100%;
  max-height:100%;
}
```

```
<div class='surround'>
  <div class="blbx" ><img class='myimg' src="http://assets.cdpn.io/assets/logos/codepen-logo.svg">
  </div><div class="rdbx"></div></div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:52:30.487

将您的样式更改为此

```
section {
    float:left;
    width:100%;
    margin-right: -280px;
}

aside {
    float:left;
    width:280px;
} 
```

[活生生的例子](http://jsfiddle.net/2e9HM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T08:58:40.083

也许这会做：

```
section {
    float:left;
    width:100%;
    padding-right:250px;
    height:100px;
}

aside {
    float: left;
    width: 250px;
    min-height: 100%;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-21T12:13:35.100

```
section {
    float:left;
    width:660px;
    margin-right:20px;
    height:100px;
}

aside {
    height:100px;
    margin-left: 670px;
} 
```

[现场演示](http://jsfiddle.net/nandhakumarsri9/2e9HM/4/)*

# python - 如何使用临时变量引用在循环内创建的对象？

> ID：15546659
> 
> 赞同：1
> 
> 时间：2013-03-21T11:47:33.717
> 
> 标签：python, gtk, pygtk

我有以下代码：

```
for file_name in file_list:
    menu_item = gtk.MenuItem(file_name)
    menu_item.show()
    menu.append(menu_item) 
```

我如何参考任何特定`menu_item`内容以便我可以调用`hide()`以将其隐藏在我的菜单中？使用`print menu.get_children()`显示对象类型及其在内存中的地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:08:42.810

可能最好的方法是创建一个包含各种菜单项的字典。由于您为每个文件创建一个菜单项，因此将`file_name`用作各自的键`menu_item`可能是明智的。

```
menu_items = {}
for file_name in file_list:
    menu_item = gtk.MenuItem(file_name)
    menu_item.show()
    menu.append(menu_item)
    menu_items[file_name] = menu_item 
```

现在，您可以使用`menu_items[file_name].hide()`访问为某个文件创建的菜单项并将其隐藏，或使用`menu_items.values()`获取所有菜单项。

或者，如果您不想为此创建单独的数据结构，您应该能够使用`menu.get_children()`来获取添加到菜单中的所有菜单项的列表。该列表包含实际的菜单项。它打印“对象类型及其在内存中的地址”正是菜单项的`repr`方法（即，它表示为可打印字符串）的实现方式。

# wso2 - WSO2 - 使用小工具生成工具中不可见的分析脚本创建的表

> ID：15546660
> 
> 赞同：1
> 
> 时间：2013-03-21T11:47:39.183
> 
> 标签：wso2, wso2bam

我的用例：将 ESB 中配置的流中的数据推送到 BAM 并使用“小工具生成工具”创建报告</p>

将代理添加到代理服务后，将流从 ESB 发布到 BAM 工作正常。

从流中，我使用 Analytics->Add 屏幕创建了一个表，并且该表似乎仍然存在，因为我能够进行选择并从同一屏幕查看结果。

现在我正在尝试使用小工具生成工具生成仪表板，但该表不可用，虽然 jdbc 连接工作正常，但该表无处可去：

从 Analytics->Add 屏幕运行分析表脚本

```
CREATE EXTERNAL TABLE IF NOT EXISTS CREDITTABLE(creditkey STRING, creditFlag STRING, version STRING)
  STORED BY 'org.apache.hadoop.hive.cassandra.CassandraStorageHandler'
  WITH SERDEPROPERTIES ( "cassandra.host" = "127.0.0.1" , 
    cassandra.port" = "9163" , "cassandra.ks.name" = "EVENT_KS" ,
    "cassandra.ks.username" = "admin" ,
    "cassandra.ks.password" = "admin" ,
    "cassandra.cf.name" = "firstStream" ,
    "cassandra.columns.mapping" = ":key,payload_k1-constant, Version" ); 
```

尝试在以下数据库中查找表：

```
jdbc:h2:repository/database/WSO2CARBON_DB;AUTO_SERVER=TRUE
jdbc:h2:repository/database/metastore_db;AUTO_SERVER=TRUE
jdbc:h2:repository/database/samples/BAM_STATS_DB;AUTO_SERVER=TRUE 
```

尚未进行任何自定义数据库配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:02:55.403

你试过了`jdbc:h2:repository/database/samples/WSO2CARBON_DB;AUTO_SERVER=TRUE`吗？此外，您粘贴的是 Cassandra 存储定义，可能用于获取输入，而不是持久化输出。如果您提供完整的配置单元查询，这将有助于更多地找出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:15:36.593

**为什么我没有看到小工具生成工具中的表格？**

**我使用 Hive 脚本创建**的表是 Casandra 分布式数据库表，**我在查找表时在小工具生成工具中提供的参考来自 h2 RDBMS**数据库表。

以下是对 WSO2 开箱即用的 h2 RDBMS 数据库的引用

```
jdbc:h2:repository/database/WSO2CARBON_DB;AUTO_SERVER=TRUE
jdbc:h2:repository/database/metastore_db;AUTO_SERVER=TRUE
jdbc:h2:repository/database/samples/BAM_STATS_DB;AUTO_SERVER=TRUE 
```

**解决**方法 -----**如何获取小工具生成工具中列出的表？**

To get the tables listed in the Gadget Generation tool you have to extensively use the Hive Script to **complete the following 3 steps**:

1.  **Create a Hive table reference for the Casandra data stream to which data is pushed from ESB in my case.**

    CREATE EXTERNAL TABLE IF NOT EXISTS CREDITTABLE( payload_creditkey STRING, payload_creditFlag STRING, payload_version STRING) STORED BY 'org.apache.hadoop.hive.cassandra.CassandraStorageHandler' WITH SERDEPROPERTIES ( "cassandra.host" = "127.0.0.1" , "cassandra.port" = "9163" , "cassandra.ks.name" = "EVENT_KS" , "cassandra.ks.username" = "admin" , "cassandra.ks.password" = "admin" , "cassandra.cf.name" = "firstStream" , "cassandra.columns.mapping" = ":key,payload_k1-constant, Version" );

2.  **Using Hive script create a H2 RDBMS script and reference to which I would be copying my data from the Casandra stream.**

    CREATE EXTERNAL TABLE IF NOT EXISTS CREDITTABLEh2summary( creditFlg STRING, verSion STRING ) STORED BY 'org.wso2.carbon.hadoop.hive.jdbc.storage.JDBCStorageHandler' TBLPROPERTIES ( 'mapred.jdbc.driver.class' = 'org.h2.Driver' , 'mapred.jdbc.url' = 'jdbc:h2:C:/wso2bam-2.2.0/repository/samples/database/BAM_STATS_DB' , 'mapred.jdbc.username' = 'wso2carbon' , 'mapred.jdbc.password' = 'wso2carbon' , 'hive.jdbc.update.on.duplicate' = 'true' , 'hive.jdbc.primary.key.fields' = 'creditFlg' , 'hive.jdbc.table.create.query' = 'CREATE TABLE CREDITTABLE_newh2(creditFlg VARCHAR(100), version VARCHAR(100))' );

3.  **Write a Hive query using which data would be copied from Casandra to H2[RDBMS]**

    insert overwrite table CREDITTABLEh2summary select a.payload_creditFlag,a.payload_version from CREDITTABLE a;

**On doing this I was able to see the table in the Gadget Generation tool however I also had to chage the referenc to the H2 Database to absolute in the JDBC URL value that I passed**.

**Observation:**

Was wondering if the Gadget generation tool can directly point to the Casandra Stream without having to copy the tables to a RDBMS database.

# apache-flex - Flex 4 中的网络安全字体

> ID：15546661
> 
> 赞同：0
> 
> 时间：2013-03-21T11:47:41.857
> 
> 标签：apache-flex, web-safe-fonts

我需要使 flex 应用程序的样式适应给定的 HTML/JS/CSS Web 应用程序的样式。我面临的一个问题是字体“Verdana, Geneva, sans-serif”。如何在 Flex 中设置如此稀有的字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:57:27.403

在编译的代码中嵌入字体。这样您就不必依赖它们出现在客户端计算机上。

更多信息：

*   [弹性 3.x](http://livedocs.adobe.com/flex/3/html/help.html?content=fonts_04.html)
*   [弹性 4.x](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f5f.html)

# c# - 在 C# 中为自定义脚本语言创建语法检查器

> ID：15546662
> 
> 赞同：2
> 
> 时间：2013-03-21T11:47:42.277
> 
> 标签：c#, syntax, scripting

我的公司使用一种脚本语言，我无法找到它的起源。它似乎是一切的一部分。

无论如何，我厌倦了在我的代码中犯愚蠢的错误，并且直到运行时才被拾起。或者更复杂的问题，例如意外重用全局和局部变量而没有注意到这可能会导致难以追踪的意外结果。

我想写一个语法检查器，我正在寻找关于如何去做的建议。我是 C# 开发人员，所以这将是我选择的语言。

任何人都知道我愿意修改或至少给我一些关于如何去做的想法的开源类似开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:52:11.463

通常，如果你想要一个语法检查器，你会去 Lex/Yacc，我想。

另一个解决方案可能是[Irony](http://irony.codeplex.com/)，尽管我自己没有使用它。

最后一个解决方案是自己做。

# php - Codeigniter - 上传目标文件夹似乎不可写

> ID：15546664
> 
> 赞同：-2
> 
> 时间：2013-03-21T11:47:43.037
> 
> 标签：php, mysql, codeigniter, file-upload

当我在本地主机上运行时，它很好。上传到 server.one 后抛出错误 - 即上传目标文件夹似乎不可写。这是我的控制器-

```
function do_upload()
    {
        $path = './uploads/';
        chmod($path,0777);
        $config['upload_path'] = $path; 
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '1000';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
        $config['encrypt_name']  = TRUE;
        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('upload_form', $error);
        }
        else
        {
            $this->load->library('form_validation');
            $data = array('upload_data' => $this->upload->data());
            $pic_path= 'uploads/'.$data['upload_data']['file_name'];
            $this->form_validation->set_rules('txt_title','Title','trim|required|xss_clean');
            $this->form_validation->set_rules('category', 'Select Category', 'callback_select_validate');
            $this->form_validation->set_rules('description','Description','trim|required|xss_clean');
            if($this->form_validation->run() == FALSE)
            {
                redirect('upload');
            }
            else{
            $title =mysql_real_escape_string(htmlentities($this->input->post('txt_title')));
            $category = $this->input->post('category');
            $description = mysql_real_escape_string(htmlentities($this->input->post('description')));
            $this->load->model('user');
            $suc_mesg=$this->user->insertPic($pic_path,$category,$title,$description);
            $this->load->view('upload_success', $suc_mesg);
            }
        }
    } 
```

这是我的视图页面-

```
 <?php 
        echo $error;
            echo form_fieldset('Upload Category Pics');

            echo form_open_multipart('upload/do_upload');
            echo '</br>';
            echo form_label('Title','title');
            echo '<input type="text" size="30" name="txt_title" placeholder="Enter title to pic"/>';
            echo '</br></br>';
            echo form_label('Choose Category Pics', 'category');
            $options = array(
                      'null' => '--Please Select--',
                      1  => 'Technology',
                      3    => 'Entertainment',
                      2 => 'Politics',
                      4   => 'Sports'
                    );

        echo form_dropdown('category', $options, 'category');
        echo "<br></br>";
        echo form_label('Description','description');
            $data = array(
                'name'        => 'description',
                'id'          => 'description',
                'placeholder'       => 'Enter description',
                'rows'        => '5',
                'cols'        => '40',
            );
        echo form_textarea($data);
        echo '</br></br>';
        echo form_label('Browse Pics','pics');
        echo '<input type="file" name="userfile" size="20" />';
        echo "<br></br>";
        echo '<input type="submit" value="upload" />';
        echo '</form>';
        echo form_fieldset_close(); 
        ?> 
```

我找不到我的错误，到底哪里错了。有人准备好帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-09T05:22:35.867

如果该文件夹用于由用户加载文件，则需要权限 777。

由您来验证通过上传脚本加载了哪些文件。您还可以使用 .htaccess 来允许或不允许从该目录执行某些文件。

在 codeigniter 中上传的文档非常简单直观。您还可以在这里查看一些方法来验证上传的文件类型[http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T15:53:41.477

我将网络服务器上的上传文件夹更改为可写，所以现在它似乎工作了。

# windows-8 - 在 Windows 商店应用程序中加载 rtf 文件

> ID：15546665
> 
> 赞同：0
> 
> 时间：2013-03-21T11:47:43.353
> 
> 标签：windows-8, microsoft-metro, windows-store-apps, rtf

我正在尝试在 Windows 商店应用程序中加载 rtf 文件，但是该文件带有样式，有时会应用该样式，而有时则不会。这种行为是**完全**随机的（如果我一遍又一遍地重新运行应用程序，有时我使用的容器会使用该样式，而其他的则不会）。

我`RichEditBox`只使用 a 是因为[RichTextBlock 不支持 rtf 文件](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/72e7cd23-715f-4985-ac1d-3e69ac5c25d3)。

我`RichEditBox`在 MainPage.xaml 中有一个

```
<Grid>
    <RichEditBox 
        x:Name="InfoContentView"
        VerticalAlignment="Stretch"
        BorderThickness="0"
        Background="{x:Null}"
        Foreground="#FFFFFF"/>
</Grid> 
```

然后我像这样注入 rtf 文件：

```
 this.InfoContentView.IsReadOnly = false;
 this.InfoContentView.Document.SetText(Windows.UI.Text.TextSetOptions.FormatRtf, 
                                       textContent);
 this.InfoContentView.IsReadOnly = true; 
```

`Textcontent`从应用程序包中加载。我认为这是可行的，因为我可以完美地看到文本，甚至链接也可以正常工作。

我试图在每次执行之前将文档文本清空。另外，我添加了一个按钮来刷新行为，它在第一次执行时不起作用，但是在我按下按钮几次之后，它是一致的。

我只希望行为是一致的。我不在乎是否必须在文件或应用程序中格式化文件。

rtf 文件非常简单，您可以在[此处](http://dl.dropbox.com/u/11200725/test.rtf)下载 rtf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:51:33.157

嗯，这是不言而喻的。我不知道这是一个错误还是我不应该这样做。

该网格位于另一个具有`Visibility = Collapsed`. 事实证明，如果我将 Visiblity 设置为已折叠，然后将其更改为可见，它将具有这种随机行为。我已经使用不透明度隐藏了它，然后它就可以工作了。虽然使用这个解决方案我不得不做一些 hacky 的东西，所以当不透明度设置为 0 时我可以在那个区域进行触摸。

我对我的回答不满意，但它可能会节省其他人的时间。我会接受任何解释这种行为的答案。

# php - 一安Memcache

> ID：15546668
> 
> 赞同：0
> 
> 时间：2013-03-21T11:47:59.100
> 
> 标签：php, caching, yii, memcached

我们使用 Yii 框架和 Memcached 进行缓存。

我们有以下问题：

1.  我们进行数据库查询 q
2.  如果 q 已经被缓存，我们从 memcache 中获取数据
3.  否则yii查询Mysql
4.  设置缓存值
5.  我们从 memcache 中取回结果

如果我们在设置 memcache 键之前（在步骤 4 之前）再次请求相同的查询 q，那么因为没有设置 memcache 键，我们再次查询 db。

我们想将此行为更改为：

1.  我们进行数据库查询 q
2.  如果 q 的键存在于内存缓存中并且值不为空，则返回值
3.  否则，如果设置了 key 并且 value 为 null 设置 memcache key => null
4.  设置缓存值
5.  我们从 memcache 中取回结果

这是发生了什么以及我们想要什么的伪代码：

```
get(q):
    if q not in memcache:
        value = query_db(q)
        memcache[q] = value
        return memcache[q]
    else:
        return memcache[q]

getNew(q):
    if q not in memcache:
        memcache[q] = null
        value = query_db(q)
        memcache[q] = value
        return memcache[q]
    elif q in memcache and memcache[q] != null:
        return memcache[q]
    else:
        while True:
            if memcached[q] != null:
                return memcached[q]
            else:
               sleep(3) 
```

换句话说，我们希望在结果为 null 之前设置 memcache 键，并且相同查询的其他请求检查该值是否为 null 并等到该值不为 null （这意味着查询已经在处理）。

你知道yii frameworkd的哪一部分应该修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:20:54.327

Mysql 具有这些系统范围的锁定功能，可以提供帮助：[`get_lock`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock)并且[`release_lock`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_release-lock) 这些锁定名称字符串。

这个想法是定期检查你已经拥有的内存缓存，然后检查这个确切的查询本身是否已经使用锁名称进行处理。为此，每个查询都需要一个唯一的锁名称。锁定名称可以使用十六进制`crc32($sql)`（php 中最快的非加密哈希算法）生成，这将为每个查询生成一个 4 字符的唯一十六进制字符串。

`TIMEOUT`可能是一个很大的数字

```
getNew(q):
    if q not in memcache:
        hash = crc32hex(q)
        if mysql-is_free(hash) == 0 # means query is processing
            # now attach youself to the other thread's synchronous exit
            if(mysql-get_lock(hash,TIMEOUT)==1) #waiting...
                release_lock(hash)
                # call self since by now, memcache has your value
                return getNew(q)                     
            endif
        endif
        if(mysql-get_lock(hash,TIMEOUT)==1)  
            value = query_db(q)  
            memcache[q] = value
            mysql-release_lock(hash)
        endif
        return memcache[q]
    else:
        return memcache[q] 
```

# javascript - 如何使用 jquery 在选择菜单 onChange 中获取选项的值？

> ID：15546670
> 
> 赞同：4
> 
> 时间：2013-03-21T11:48:04.530
> 
> 标签：javascript, jquery, select, xhtml, option

我正在尝试使用以下插件实现克隆选择菜单：

[https://github.com/afEkenholm/ScrollectBox](https://github.com/afEkenholm/ScrollectBox)

[https://github.com/afEkenholm/ScrollectBox/blob/master/index.html](https://github.com/afEkenholm/ScrollectBox/blob/master/index.html)

[https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js](https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js)

但我无法获得选择菜单的选项值。它改为返回选项文本。

如何`onChange`使用 jquery 调用函数在以下选择菜单中获取选项的值（但不是文本）？

```
<script type="text/javascript">
jQuery(document).ready(function($){ 
   $(".selection").scrollectBox({
    preset: 'dropdown',
    numVisibleOptions: 4,
    scrollInterval: 150, 
    scrollOn: 'hover'
    });
}); 
```

```
 <select onchange="function(this);" id="selector" class="selection" >
    <option value="" selected="Select Topic">Select Topic</option> 
    <option value="Food">Food</option>
    <option value="Drink">Drink</option>
    </select> 
```

谢谢，

* * *

**重新编辑：**

***不工作***

```
<script type="text/javascript">
jQuery(document).ready(function($){ 
   var selectEvent = function($el){
someFunction($(this).val());
return false;
};
   $(".selection").scrollectBox({
    preset: 'dropdown',
    numVisibleOptions: 4,
    onSelectEvent: selectEvent,
    scrollInterval: 150, 
    scrollOn: 'hover'
    });
});
</script> 
```

它返回`[object Object]`

***不工作***

```
 <script type="text/javascript">
jQuery(document).ready(function($){ 
    $(".selection").scrollectBox({
        preset: 'dropdown',
        numVisibleOptions: 4,
        scrollInterval: 150, 
        scrollOn: 'hover',
        onSelectEvent: function (item, event) {
           alert(item).val();
        }
    });
});
</script> 
```

它返回`[object Object]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:52:07.027

根据[ScrollectBox](https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js)的源代码，您必须使用该`onSelectEvent`属性，如下所示：

```
jQuery(document).ready(function($){ 
    $(".selection").scrollectBox({
        preset: 'dropdown',
        numVisibleOptions: 4,
        scrollInterval: 150, 
        scrollOn: 'hover',
        onSelectEvent: function (item, event) {
           alert(item.val());
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:52:20.013

您可以通过以下方式参考所选选项：`$("#selector option:selected")`

```
$("#selector").change(function() {
   var selectedValue = $("#selector option:selected").val();
   alert('Selected value ' + selectedValue);
}); 
```

**JS 小提琴：http:** [//jsfiddle.net/Y7byM/1/](http://jsfiddle.net/Y7byM/1/)

**编辑**：

从您的评论中，您可以更改`#selector`为`.selector`：

```
$(".selection").change(function() {
   var selectedValue = $(".selector option:selected").val();
   alert('Selected value ' + selectedValue);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T11:53:17.067

试过这个？

```
$('#selector').change(function() {
           // assign the value to a variable, so you can test to see if it is working.
            var selectVal = $('#selector :selected').val();
            alert(selectVal);
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T23:03:22.793

我的“选择”是通过 AJAX 调用提供的，我无法让调用程序使用 .change 方法。

该表（在进行 AJAX 调用之前未声明）是

```
<select id="provincePick">
<option value="0" >Choose a province:</option>
<option value="AB">Alberta</option>
<option value="BC">British Columbia</option>
<option value="MB">Manitoba</option>
<option value="NB">New Brunswick</option>
<option value="NL">Newfoundland and Labrador</option>
<option value="NS">Nova Scotia</option>
<option value="ON">Ontario</option>
<option value="PE">Prince Edward Island</option>
<option value="QC">Quebec</option>
<option value="SK">Saskatchewan</option>
<option value="NT">Northwest Territories</option>
<option value="NU">Nunavut</option>
<option value="YT">Yukon</option> 
```

我在调用程序中需要的 jQuery 代码是

```
 $("body").on("change", "#provincePick", function(e)
    {
        alert( this.value );
    }); 
```

现在警报有效。

# php - PHP - 数组致命错误

> ID：15546675
> 
> 赞同：0
> 
> 时间：2013-03-21T11:48:14.913
> 
> 标签：php, arrays

我的 PHP 代码中有一个关于动态数组的奇怪错误。

输出的错误是：

```
Fatal error: Cannot use string offset as an array ... on line 89 
```

这是我的代码的一部分，它在一个 foreach 循环中，该循环遍历数据库中的设置：

```
foreach($query->fetchAll() as $row)
{
    if($site!=CURRENT_SITE_TEMPLATE)
    {
        $property = 'foreignSettings';
        $propertyType = 'foreignSettingsTypes';
    } else {
        $property = 'settings';
        $propertyType = 'settingTypes';
    }

    $this->$property[$row['variable_section']][$row['variable_name']] = $row['variable_value'];
    settype($this->$property[$row['variable_section']][$row['variable_name']],$row['variable_type']);

    $this->$propertyType[$row['variable_section']][$row['variable_name']] = $row['variable_type'];
} 
```

为了示例代码，`$site`是'admin'并且`CURRENT_SITE_TEMPLATE`是'admin'。另外，`$foreignSettings, $foreignSettingsTypes, $settings, and $settingTypes`都定义为类范围内的数组

错误在第 89 行，即：

```
$this->$property[$row['variable_section']][$row['variable_name']] = $row['variable_value']; 
```

我最初认为这是因为 $property 变量访问了数组，但是，这看起来像是 PHP 文档中的有效合法代码（[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php) in `example #1`）

对此错误的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:05:07.547

在您给定的示例`$property`中是一个字符串。然后，您尝试将其用作数组。字符串只有数字索引（如果您需要用作数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:08:26.973

问题如下：`$this->$property[0]`意味着您访问 $property 的第 0 个位置，在您的情况下，这将是字符串 $property 的第一个字母。因此你最终会得到 $this->f 或 $this->s。

与`$this->$property[0][0]`您一起尝试访问 $property 字符串的第 0 位的第 0 位会导致错误，因为您尝试访问 char 的第 0 位这是不可能的，因为 char 不能被引用为大批。

您想要的是`$this->{$propperty}[0][0]`什么意味着您尝试访问名称为 $propperty 的变量的第 0 位的第 0 位。

# java - Logback 基于日期的文件滚动似乎不起作用

> ID：15546676
> 
> 赞同：2
> 
> 时间：2013-03-21T11:48:16.083
> 
> 标签：java, logging, logback

我使用 Logback 1.0.10 并试图让日志文件滚动工作，但无论我做什么，每当新的一天到来时，它只会截断日志文件。

有任何想法吗？我使用 Java 6，这是针对在 Windows 2008 服务器上的 Tomcat 6 中运行的 webapp。

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration scan="true" scanPeriod="10 seconds">

    <!--Daily rolling file appender -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">

        <file>${log.dir}/${log.name}.log</file>

        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>${log.name}.%d{yyyy-MM-dd}.log</FileNamePattern>
        </rollingPolicy>

        <encoder>
            <pattern>%d %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <root>
        <level value="${log.level}" />
        <appender-ref ref="FILE" />
    </root>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:44:25.613

我现在意识到我忘记`${log.dir}`了`FileNamePattern`，ta-da，旧的日志文件在父目录中。

# sql - 使用查询结果更新表

> ID：15546679
> 
> 赞同：1
> 
> 时间：2013-03-21T11:48:40.547
> 
> 标签：sql, oracle, sql-update

我正在尝试将查询结果添加到现有表的列中。到目前为止，下面的查询计算`CAR_PRICE`并显示该值。但是，我想将此值添加到`CAR_PAYMENT_TBL`car_price 列中。

下面的创建表命令显示了相关表以及它们之间的关系。是否可以更新 中的`CAR_PRICE`值`CAR_PAYMENT_TBL`？

```
SELECT C.TICKET_NO, 
            C.REG_ID,
            C.BOOKING_ID,
            (R.END_DATE-R.START_DATE) AS DAYS_STAYED,
            (R.END_DATE-R.START_DATE)*5 AS CAR_PRICE
            FROM CAR_TBL C
            LEFT JOIN
            ROOM_TBL R
            ON C.BOOKING_ID = R.BOOKING_ID; 
```

表模式：

```
CREATE TABLE CAR_PAYMENT_TBL
(
    TICKET_NO INT NOT NULL PRIMARY KEY,
    CAR_PRICE NUMERIC(5,2) 
);

CREATE TABLE CAR_TBL
(
    REG_ID VARCHAR2(7) NOT NULL PRIMARY KEY,
    TICKET_NO INT NOT NULL references CAR_PAYMENT_TBL(TICKET_NO),
    BOOKING_ID INT NOT NULL references BOOKING_TBL(BOOKING_ID)
);

CREATE TABLE ROOM_TBL
(  
    STAY_NO INT NOT NULL PRIMARY KEY,
    ROOM_NO VARCHAR2(4) NOT NULL references ROOM_DETAILS_TBL(ROOM_NO),
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    BOOKING_ID INT NOT NULL references BOOKING_TBL(BOOKING_ID)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:54:32.133

您不能在 Oracle 的 UPDATE 语句中引用其他表 - 使用子查询或 MERGE 语句：

```
 UPDATE CAR_PAYMENT_TBL
  SET CAR_PRICE =
  (select (ROOM_TBL.END_DATE - ROOM_TBL.START_DATE)*5 from room_tbl where ... )
  WHERE CAR_PAYMENT_TBL.TICKET_NO = &TICKET_NO; 
```

您还必须为子查询提供一个合理的 WHERE 子句（假设 &TICKET_NO 实际上是一个绑定变量，而不是两个表的连接条件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:03:34.303

If you want to update all the records of `CAR_PAYMENT_TBL` based on the values of `ROOM_TBL` then

```
UPDATE CAR_PAYMENT_TBL
SET CAR_PRICE = (select (ROOM_TBL.END_DATE – ROOM_TBL.START_DATE)*5
FROM ROOM_TBL WHERE CAR_PAYMENT_TBL.TICKET_NO = ROOM_TBL.TICKET_NO) 
```

If you want to update only specific record of `CAR_PAYMENT_TBL` then

```
UPDATE CAR_PAYMENT_TBL
SET CAR_PRICE = (select (ROOM_TBL.END_DATE – ROOM_TBL.START_DATE)*5
FROM ROOM_TBL WHERE CAR_PAYMENT_TBL.TICKET_NO = ROOM_TBL.TICKET_NO)
where CAR_PAYMENT_TBL = &ticket_num; 
```

# cmake - cmake -D ： = ： 什么可以 是？

> ID：15546681
> 
> 赞同：11
> 
> 时间：2013-03-21T11:48:49.550
> 
> 标签：cmake

`-D <var>:<type>=<value>`: 创建一个 cmake 缓存条目。

好的，但可以`<type>`是什么？我见过 BOOL、STRING、PATH、FILEPATH。这种类型还能是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:56:00.293

在 CMake 手册页的“缓存条目的属性”下：

```
TYPE   Widget type for entry in GUIs.

    Cache entry values are always strings, but CMake GUIs present widgets to help users set values.  The GUIs use this property as a hint to determine the widget type.  Valid TYPE values are:

            BOOL          = Boolean ON/OFF value.
            PATH          = Path to a directory.
            FILEPATH      = Path to a file.
            STRING        = Generic string value.
            INTERNAL      = Do not present in GUI at all.
            STATIC        = Value managed by CMake, do not change.
            UNINITIALIZED = Type not yet specified.

          Generally the TYPE of a cache entry should be set by the command which creates it (set, option, find_library, etc.). 
```

# css - 无法将 minWidth 和 minHeight 设置为主 div

> ID：15546684
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:49:01.087
> 
> 标签：css, html

我有一个`div`下体，其`width:100%`和`height:100%`，

现在当我尝试设置`min-width`和`min-height`我的`mainDiv`时，它不适用于`div`标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:51:23.650

```
.mainDiv{
width:100%;
min-width:100%;
height:100%;
min-height:100%;
position:relative;
top:0px;
right:0px;
bottom:0px;
left:0px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:50:48.193

现在习惯了

```
body, html{
height:100%;
} 
```

**比给你的**

```
div{
min-height:100%;
} 
```

**[现场演示](http://jsfiddle.net/Vn6X2/1/)**

# spring - 如何从 Spring 中对 Websphere 应用服务器中定义的 MQ 连接工厂进行 jndi 查找

> ID：15546685
> 
> 赞同：6
> 
> 时间：2013-03-21T11:49:07.217
> 
> 标签：spring, jndi, ibm-mq, lookup

我正在尝试连接到 Websphere app Server 7.0 中定义的 MQ 连接工厂。

但是我找不到在 Spring 中定义 MQ 的正确 connectionfactory 接口。

但是，当我尝试在 spring 配置文件中硬编码连接详细信息时，我能够连接到队列管理器。

在 Spring bean 中使用什么正确的接口/格式来加载 Websphere appl 服务器中定义的 MQ 连接工厂？

**工作代码**

```
<bean id="mqConnectionFactory" class="com.ibm.mq.jms.MQQueueConnectionFactory">
    <property name="hostName">
        <value>127.0.0.1</value>
    </property>
    <property name="port">
        <value>1414</value>
    </property>
    <property name="queueManager">
        <value>MYQM</value>
    </property>
    <property name="transportType">
        <value>1</value>
    </property>
</bean> 
```

**不工作的代码**

```
<bean id="mqConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jms/WASQM"/>
    <property name="lookupOnStartup" value="false"/>
    <property name="cache" value="true" />
    <property name="proxyInterface"  value="com.ibm.mq.jms.MQQueueConnectionFactoryFactory" />
</bean> 
```

其中 WASQM 是 Websphere 中定义的 MQ 连接工厂

**非工作代码错误**

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mqConnectionFactory' defined in ServletContext resource [/WEB-INF/config/config-mq.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: [com.ibm.mq.jms.MQQueueConnectionFactoryFactory] is not an interface
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
Caused by: java.lang.IllegalArgumentException: [com.ibm.mq.jms.MQQueueConnectionFactoryFactory] is not an interface 
```

我需要帮助来用正确的代码替换不工作的代码。Spring - 3.0.5 IBM MQ 和 Web 应用服务器 - 7.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:41:41.190

Right way to do is

1.  Create the resource in Queue Connection Factory in Websphere App Server (not in Connection Factory)
2.  Use javax.jms.QueueConnectionFactory as the connection factory in spring config

    ```
    <bean id="mqConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
       <property name="jndiName" value="WASQM"/>
       <property name="lookupOnStartup" value="false"/>
       <property name="cache" value="true" />
       <property name="proxyInterface"  value="javax.jms.QueueConnectionFactory" />
    </bean> 
    ```

This [page](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14126948) gave me the hint.

# javascript - 如何在 KineticJS 中复制和粘贴形状

> ID：15546691
> 
> 赞同：2
> 
> 时间：2013-03-21T11:49:38.480
> 
> 标签：javascript, canvas, kineticjs

我有一个这样的button1。

```
var Button1 = new Kinetic.Polygon({
            points: [0, 0, 0, 30, 15, 15],
            fill: 'rgb(0, 255, 0)'
        }); 
```

现在我想复制它（复制它）。我该怎么做？

我试过这个 -

```
 var Button2 = new Kinetic.Polygon();
    Button2 = Button1; 
```

这不起作用，因为在画布上只绘制了一个副本。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:53:11.047

在 KineticJS 中复制对象的最简单方法是使用 clone 方法：

```
 var Button1 = new Kinetic.Polygon({
        points: [0, 0, 0, 30, 15, 15],
        fill: 'rgb(0, 255, 0)'
 });

 var Button2 = Button1.clone(); 
```

Button2 现在是 Button1 的精确副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:57:47.703

那这个呢：

```
var buttonData = {
            points: [0, 0, 0, 30, 15, 15],
            fill: 'rgb(0, 255, 0)'
        }

var Button1 = new Kinect.Polygon(buttonData);
var Button2 = new Kinect.Polygon(buttonData); 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:04:38.657

Button1 和 Button2 现在指向同一个 Kinetic 对象。

您可以尝试使用 jQuery 扩展方法

```
var Button2 = $.extend({}, Button1); 
```

这将制作对象的副本。

# abap - 获取客户大师

> ID：15546694
> 
> 赞同：0
> 
> 时间：2013-03-21T11:49:41.087
> 
> 标签：abap, sap-erp

如何从报表中检索客户主数据并打印？

**我有客户编号**，但我不知道检索其他详细信息的最佳方法是什么，例如：

*   姓名
*   街道地址
*   沟通
*   （未来还有联系人）

**在我的研究中，我发现了以下选项：**

*   查询 KNA1 和其他客户主数据表

*   BAPI_CUSTOMER_GETLIST

*   BAPI_CUSTOMER_GETDETAIL2

我需要一段可以在报告中打印客户主数据的代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:50:57.827

你可以试试功能模块`BAPI_CUSTOMER_GETDETAIL2`，它会返回`CUSTOMERADDRESS`。

更重要的是，我在不到一分钟的时间内发现了这个

*   开始交易`BAPI`
*   单击“按字母顺序”选项卡
*   寻找客户（我的猜测不错，但不是太难猜测）
*   盯着方法，发现只有 GETDETAIL、GETDETAIL1 和 GETDETAIL2 可能
*   双击GETDETAIL2（末尾的数字表示版本）
*   请注意右侧详细信息窗格中功能模块的名称。

我的肩冲浪伙伴编码器告诉我，您也可以简单地查询`BAPI_CUSTOMER_*`，因为您发现 BAPI 明显遵循一种模式。

至于片段，您至少应该尝试让我们知道您失败的地方。

```
DATA : wa_address TYPE bapicustomer_04.

PARAMETERS p_kunnr TYPE kunnr.

CALL FUNCTION 'BAPI_CUSTOMER_GETDETAIL2'
  EXPORTING
    customerno      = p_kunnr
  IMPORTING
    customeraddress = wa_address.

WRITE: wa_address-name , wa_address-name_2 , wa_address-city , wa_address-country. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:52:51.547

我会使用查询，试试这个：

```
report  ZKNA1.

tables: kna1.

type-pools slis.

data gt_fieldcat type slis_t_fieldcat_alv with header line.

data: gs_layout type slis_layout_alv,
g_repid type sy-repid.

types: begin of st_output,
    kunnr type kna1-kunnr,
    name1 type kna1-name1,
    city1 type adrc-city1,
    city2 type adrc-city2,
    street type adrc-street,
    tel_number type adrc-tel_number, " If you need more fields add them here and in the field catalog
end of st_output,
gt_tbl_data type standard table of st_output.

data gt_output type standard table of st_output.

data g_count type i.

data  t_heading type slis_t_listheader.

selection-screen: begin of block b2 with frame title text-t01.

select-options s_kunnr for kna1-kunnr.

select-options s_name1 for kna1-name1.

selection-screen: end of block b2.

initialization.
  g_repid = sy-repid.

start-of-selection.

  perform get_data.

  perform build_alv.

form init_layout.
  gs_layout-zebra = 'X'.
  gs_layout-detail_popup = 'X'.
endform.                    "init_layout

form get_data.
  field-symbols <wa_gt_output> type st_output.
  data zlen type i.

  select
    kna1~kunnr
    kna1~name1
    adrc~city1
    adrc~city2
    adrc~street
    adrc~tel_number
    from kna1
    left join adrc on adrc~addrnumber = kna1~adrnr
    into corresponding fields of table gt_output
    where
    kna1~kunnr in s_kunnr and
    kna1~name1 in s_name1
    order by
     kna1~kunnr
    .

  g_count = sy-dbcnt.

endform. " GET DATA

form build_alv.

* ALV required data objects.
  data: w_title   type lvc_title,
        w_comm    type slis_formname,
        w_status  type slis_formname,
        x_layout  type slis_layout_alv,
        t_event    type slis_t_event,
        t_fieldcat type slis_t_fieldcat_alv,
        t_sort     type slis_t_sortinfo_alv.

  refresh t_fieldcat.
  refresh t_event.
  refresh t_sort.
  clear x_layout.
  clear w_title.

* Layout
  perform init_layout.

* Field Catalog
  perform set_fieldcat using:
 1 'KUNNR' 'KUNNR' 'KNA1'           25 space  space  space space  space space space space space space space t_fieldcat,
 2 'NAME1' 'NAME1' 'KNA1'           25 space  space  space space  space space space space space space space t_fieldcat,
 3 'CITY1' 'CITY1' 'ADRC'           25 space  space  space space  space space space space space space space t_fieldcat,
 4 'CITY2' 'CITY2' 'ADRC'           25 space  space  space space  space space space space space space space t_fieldcat,
 5 'STREET' 'STREET' 'ADRC'         25 space  space  space space  space space space space space space space t_fieldcat,
 6 'TEL_NUMBER' 'TEL_NUMBER' 'ADRC' 25 space  space  space space  space space space space space space space t_fieldcat.

* Top of page heading
  perform set_top_page_heading using t_heading[] t_event.

* Events
  perform set_events using t_event.

* GUI Status
  w_status = ''.
  g_repid = sy-repid.

* User commands
  w_comm   = 'USER_COMMAND'.

* Order
* Example
*  PERFORM set_order USING '<field>' 'IT_DATA' 'X' space space t_sort.

  call function 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
      i_callback_program       = g_repid
      is_layout                = gs_layout
      it_fieldcat              = t_fieldcat
      it_sort                  = t_sort
      i_callback_pf_status_set = w_status
      i_callback_user_command  = w_comm
      i_save                   = 'X'
      it_events                = t_event
      i_grid_title             = w_title
    TABLES
      t_outtab                 = gt_output
    EXCEPTIONS
      program_error            = 1
      others                   = 2.
  if sy-subrc <> 0.
    message id sy-msgid type sy-msgty number sy-msgno with sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
  endif.

endform. " build_alv

form set_top_page_heading using t_heading type slis_t_listheader
                                t_events  type slis_t_event.

  data: x_heading type slis_listheader,
        x_event   type line of slis_t_event.

  clear x_heading.
  x_heading-typ = 'S'.
  x_heading-key = 'Count: '.
  x_heading-info = g_count.
  append x_heading to t_heading.

* Top of page event
  x_event-name = slis_ev_top_of_page.
  x_event-form = 'TOP_OF_PAGE'.
  append x_event to t_events.

endform.                    "set_top_page_heading

form set_events using t_events type slis_t_event.

  data: x_event   type line of slis_t_event.

**
* Example
* -------
*  clear x_event.
*  x_event-name = .
*  x_event-form = .
*  append x_event to t_event.
**

endform.                    "set_events

form set_order using p_fieldname p_tabname p_up p_down p_subtot
                     t_sort type slis_t_sortinfo_alv.

  data: x_sort type slis_sortinfo_alv.

  clear x_sort.
  x_sort-fieldname = p_fieldname.
  x_sort-tabname   = p_tabname.
  x_sort-up = p_up.
  x_sort-down = p_down.
  x_sort-subtot = p_subtot.
  append x_sort to t_sort.

endform.                    "set_order

form set_fieldcat using
      p_colpos          "Column position.
      p_fieldname       "Field of internal table
      p_ref_fieldname   "(Optional) Table field / data element
      p_ref_tabname     "(Optional) Table which holds the field referenced
      p_outputlen       "(Optional) Column width
      p_noout           "(Optional) If set to 'X', states that the field is not showed initially
      p_seltext_m       "(Optional) Medium label
      p_seltext_l       "(Optional) Long label
      p_seltext_s       "(Optional) Small label
      p_reptext_ddic    "(Optional) Extra small (heading) label
      p_ddictxt         "(Optional) Set to 'L', 'M', 'S' or 'R'
      p_hotspot         "(Optional) If set to 'X', this field will be used as a hotspot area for cursor
      p_showasicon      "(Optional) If set to 'X', this field will be shown as an icon
      p_checkbox        "(Optional) If set to 'X', this field will be shown as a checkbox
      p_edit            "(Optional) If set to 'X', this field will be editable.
      p_dosum           "(Optional) If set to 'X', this field will be summed (aggregation function)
      t_fieldcat type slis_t_fieldcat_alv. "Table which contains the whole fieldcat.

  data: wa_fieldcat type slis_fieldcat_alv.

  clear wa_fieldcat.

* General settings
  wa_fieldcat-fieldname = p_fieldname.
  wa_fieldcat-col_pos = p_colpos.
  wa_fieldcat-no_out = p_noout.
  wa_fieldcat-hotspot = p_hotspot.
  wa_fieldcat-checkbox = p_checkbox.
  wa_fieldcat-icon = p_showasicon.
  wa_fieldcat-do_sum = p_dosum.

  if p_ref_tabname is initial.
    wa_fieldcat-rollname =   p_ref_fieldname.
  else.
    wa_fieldcat-ref_tabname = p_ref_tabname.
    if p_ref_fieldname eq space.
      wa_fieldcat-ref_fieldname =   wa_fieldcat-fieldname.
    else.
      wa_fieldcat-ref_fieldname =   p_ref_fieldname.
    endif.
  endif.

* Set output length.
  if not p_outputlen is initial.
    wa_fieldcat-outputlen = p_outputlen.
  endif.

* Set text headers.
  if not p_seltext_m is initial.
    wa_fieldcat-seltext_m = p_seltext_m.
  endif.

  if not p_seltext_l is initial.
    wa_fieldcat-seltext_l = p_seltext_l.
  endif.

  if not p_seltext_s is initial.
    wa_fieldcat-seltext_s = p_seltext_s.
  endif.

  if not p_reptext_ddic is initial.
    wa_fieldcat-reptext_ddic = p_reptext_ddic.
  endif.

  if not p_ddictxt is initial.
    wa_fieldcat-ddictxt = p_ddictxt.
  endif.

* Set as editable or not.
  if not p_edit is initial.
    wa_fieldcat-input     = 'X'.
    wa_fieldcat-edit     = 'X'.
  endif.

  append wa_fieldcat to t_fieldcat.

endform.                   "set_fieldcat2

form top_of_page.
  call function 'REUSE_ALV_COMMENTARY_WRITE'
    exporting
*     i_logo             = <<If you want to set a logo, please,
*                          uncomment and edit this line>>
      it_list_commentary = t_heading.
endform.                    " alv_top_of_page

form user_command using r_ucomm     like sy-ucomm
                        rs_selfield type slis_selfield.

* Executes a command considering the sy-ucomm.
  case r_ucomm.
    when '&IC1'.

      if rs_selfield-fieldname eq 'KUNNR'.

        set parameter id 'KUN' field rs_selfield-value.
        call transaction 'XD03' and skip first screen. " Call transaction

      else.
        message 'Wrong column' type 'I'.
      endif.

  endcase.
endform.                    "user_command 
```

检查您是否可以双击客户端代码并且程序会向您发送事务“XD03”。

# codeigniter - 在 CodeIgniter 中使用 SOAP 服务时出错

> ID：15546698
> 
> 赞同：0
> 
> 时间：2013-03-21T11:49:56.653
> 
> 标签：codeigniter, soap

当我使用纯 PHP 代码使用 SOAP 服务时，它可以工作，但是当我在 CodeIgniter 视图文件中嵌入相同的 PHP 代码时，显示错误：

致命错误：在第 49 行的 /home/content/r/a/m/ramlinux/html/Projects/LeadControlSystem/LCS_application_7/views/adminpanel/lead_email_scrub.php 中的非对象上调用成员函数 __soapCall()

第 49 行代码：

```
$result = $client->__soapCall("VerifyEmail", array($params), null, null, $output_header); 
```

这行代码有什么问题？

# java - 更新JDK后仍指向旧版本的版本

> ID：15546703
> 
> 赞同：0
> 
> 时间：2013-03-21T11:50:05.197
> 
> 标签：java, jdk1.6

我将我的 JDK 从 1.3 更新到 1.6，并在将**JAVA_HOME**的环境变量条目更新为 1.6 后，在命令提示符中使用命令**java -version**检查了版本，并且我还包含了**PATH**变量的 jre-bin 路径，不幸的是**java -version**仍然指向1.3。谁能让我知道我在这里想念什么？

 ******我正在使用 Windows XP 32 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:53:20.667

检查“路径”变量。对 java 1.3 的引用仍然存在于某处。

或者也许你没有关闭/打开 cmd，它仍然使用旧的 JAVA_HOME 值？******

# html - 超链接的无序列表 - 将项目符号颜色与链接文本颜色匹配

> ID：15546705
> 
> 赞同：1
> 
> 时间：2013-03-21T11:50:10.260
> 
> 标签：html, css

我创建了一个所有列表项作为超链接。
我在这里想要的是项目符号颜色应该与超链接的颜色匹配，具体取决于其状态（已访问或未访问）。
我只想使用 CSS。这可能吗？如果我还可以在将光标悬停在链接上时匹配颜色，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:02:48.987

Try this

```
li {
    color:red
}
a {
    color:red;
    display:block
}
li:hover, a:hover{
    color:green
} 
```

**[DEMO](http://jsfiddle.net/dnQaM/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:21:34.187

You can remove the standard bullet :

```
ul {
    list-style: none;
} 
```

and re-create it in the a

```
a::before {
    content: "\2022";
} 
```

now the style of the a includes the bullet

```
a:visited {
    color: red;
} 
```

non desired effect: the bullet is underlined as it is now part of the a.

I think that could be overdone with more work, anyway.

[demo in jsfiddle](http://jsfiddle.net/vals/YpJXn/)

# node.js - EJS 和 DUST - 并排

> ID：15546706
> 
> 赞同：0
> 
> 时间：2013-03-21T11:50:18.240
> 
> 标签：node.js, ejs, dust.js

我将 node.js 与 express 和 ejs 一起使用。

我应该将我的网站从 ejs 移动到另一个模板引擎 -dust.js。我希望能够将模板从一个模板引擎一个接一个地移动到另一个模板引擎。我看到的问题是两者都覆盖了 res.render 方法。

我能想到的解决方案是在`var render_ejs = res.render;`需要ejs之后但需要dust.js之前存储res.render。然后在所需的dust.js 之后 - 以不同的名称存储新`res.render_dust = res.render`的渲染，并再次使用 ejs 覆盖渲染`res.render = dust.render`。

让他们并肩生活的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:26:31.193

谢谢@robertklep。

最后`consolidate`（node.js 模板引擎整合库）解决了我的问题。

这是一个工作示例：

```
var http = require("http");
var express = require("express");
var app = express();
var express = require("express");
var app = express.createServer();
var dust = require('dustjs-linkedin'),
    cons = require('consolidate');
app.engine('dust', cons.dust);
app.get("/dust", function(req, res) {
    res.render('dust_template.dust', {header: 'DUST - TEST OK'});
});
app.get("/ejs", function(req, res) {
    res.render('ejs_template.ejs', {header: 'EJS - TEST OK'});
});
app.listen(80); 
```

`ejs_template.ejs`和`dust_template.dust`文件在文件`views`夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:41:45.997

这是一个关于如何并排使用两个引擎的简单示例（我使用 Jade 是因为 Dust 让我有些悲伤`require.paths`）：

```
var express = require('express');
var app     = express();

app.engine('ejs', require('ejs').__express);
app.engine('jade', require('jade').__express);
app.set('views', __dirname);

app.get('/', function(req, res) {
  // Render with Jade: res.render('index.jade');
  // Render with EJS: res.render('index.ejs');
});

app.listen(3012); 
```

所以诀窍是使用 中的文件扩展名`render()`，结合起来`app.engine`将使 Express 使用适当的模板引擎。

# android - 不幸的是，应用程序在检查网络时停止

> ID：15546712
> 
> 赞同：19
> 
> 时间：2013-03-21T11:50:35.980
> 
> 标签：android, broadcastreceiver, connectivity

我正在使用以下代码通过我的应用程序检查**互联网连接。**

```
public class ConnectionChangeReceiver extends BroadcastReceiver
{
  @Override
  public void onReceive( Context context, Intent intent )
  {
    ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService( Context.CONNECTIVITY_SERVICE );
    NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();
    NetworkInfo mobNetInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE );

    if (activeNetInfo != null)
    {
        Toast.makeText( context, "Active Network Type : " + 
                       activeNetInfo.getTypeName(), Toast.LENGTH_SHORT ).show();
    }
    if(mobNetInfo != null)
    {
        Toast.makeText( context, "Mobile Network Type : " + 
                          mobNetInfo.getTypeName(), Toast.LENGTH_SHORT ).show();
    }
  }
} 
```

我已经在清单文件中定义了所需的权限。

每当我尝试使用 F8 键**断开/连接网络时，我都会收到*****“不幸的是应用程序已停止”***，并且我没有得到任何打印`logcat`。

我能知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-21T11:58:01.197

**注意：如果您的目标是 android N Preview。上述接收器将无法按照 Google 的限制工作。**

链接：[https ://developer.android.com/preview/features/background-optimization.html#connectivity-action](https://developer.android.com/preview/features/background-optimization.html#connectivity-action)

**使用：同样的 WorkManager 或 JobScheduler**。

* * *

你把这个加进去了`AndroidManifest.xml`吗？

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

如果您已在上面添加，请检查此代码：

```
<receiver android:name=".UpdateReceiver" >
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
</receiver> 
```

和

```
public class UpdateReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

          ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE );
          NetworkInfo activeNetInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
          boolean isConnected = activeNetInfo != null && activeNetInfo.isConnectedOrConnecting();   
          if (isConnected)       
              Log.i("NET", "Connected" + isConnected);   
          else 
              Log.i("NET", "Not Connected" + isConnected);
    }
} 
```

* * *

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-06T07:07:37.660

上面的代码不适用于 wi-fi 连接。这是修改后的

# 简单的一个

. androidmanifest.xml

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

androidmanifest.xml 的应用程序标签内

```
<receiver android:name="android.YOUR-JAVA-CLASS-PATH.BackgroundSync" android:enabled="true">
      <intent-filter>
          <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
      </intent-filter>
</receiver> 
```

BackgroundSync.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager; 
import android.util.Log;
import android.widget.Toast;

public class BackgroundSync extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) { 
        ConnectivityManager cm =(ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (cm.getActiveNetworkInfo()!=null){
            Toast.makeText(context, "Connected to Internet", Toast.LENGTH_LONG).show();
        }
        else Log.i("INTERNET","---------------------> Internet Disconnected. ");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-05T04:04:56.567

面向 Android 7.0（API 级别 24）及更高版本的应用如果在其清单中声明广播接收器，则不会收到此广播。如果应用程序使用 Context.registerReceiver() 注册其 BroadcastReceiver 并且该上下文仍然有效，它们仍将接收广播。

[https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION](https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION)

# jquery - 尝试将外部网站页面从我的 ASP.NET MVC3 应用程序加载到弹出窗口中

> ID：15546713
> 
> 赞同：1
> 
> 时间：2013-03-21T11:50:36.110
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, cross-domain

我有一个 ASP.NET MVC 3 网站，需要在弹出窗口中显示卡验证页面。卡验证页面实际上在外部网站上，我无法更改它。要求之一是我必须向该外部页面发出 POST 请求并传递自定义标题，以便将卡号预填充到其文本框中。我尝试起诉 javascript .ajax 调用，但返回

```
XMLHttpRequest cannot load ... 
```

因为他们没有启用跨域访问。如果我使用自定义 Action 并在其中使用 webclient 发布帖子，然后下载响应字符串，然后将其传递回视图，则它实际上不起作用，因为我从他们的页面获取纯 html 源并且它丢失了他们的所有相关引用必须脚本和 css 文件，因为它们现在指向我的网站。有什么办法吗？理想情况下，我想将带有 POST 请求的页面加载到某个 iframe 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:12:08.490

您可以做的是打开弹出窗口并从您的网站加载弹出窗口的初始内容。此内容包含一个隐藏表单，其中包含需要输入到`POST`卡验证服务的所有数据。页面加载后（即文档准备就绪），您使用 javascript 自动提交隐藏表单。如果 javascript 不可用（`<noscript>...</noscript>`），您可以显示一个简单的提交按钮，用户需要单击该按钮来提交隐藏的表单。

# asp.net - 在 asp.net 的 gridview 中传递多个命令参数

> ID：15546716
> 
> 赞同：2
> 
> 时间：2013-03-21T11:50:40.260
> 
> 标签：asp.net, gridview, commandargument

我在 gridview 中有一个 TemplateField 列，里面有一个图像按钮。我需要在单个图像按钮中使用两个命令参数。这是我的代码

```
<asp:TemplateField ItemStyle-Width="30px">
     <ItemTemplate>
         <asp:ImageButton ID="btnAvaililabitly" runat="server" 
                          ImageUrl="~/CMS/images/available_icon.png"
                          Width="12px" Height="12px" CommandName="availability" 
                          ToolTip="Rooms Availability"
                          CommandArgument='<%#Eval("HotelID")%>'/>
     </ItemTemplate>
</asp:TemplateField> 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:51:53.043

您可以发送逗号分隔的字符串并在服务器端收集值

```
CommandArgument= '<%# String.Format("{0} , {1}", Eval("Name1"), Eval("Name2")) %>' 
```

# java - noSuchMethod 错误来了

> ID：15546718
> 
> 赞同：0
> 
> 时间：2013-03-21T11:50:45.563
> 
> 标签：java, android, twilio

我正在使用四个库

命名为 1) twilio-sdk 3.10 2) twilioclient-android 3) android jar 4) libtwilio-native.so

当我使用`TwilioRestClient client = new TwilioRestClient("id","toknid")`

然后我得到错误

```
 java.lang.NoSuchMethodError:   
      org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager. 
      03-21 13:19:11.223: E/AndroidRuntime(296): at com.twilio.sdk.TwilioRestClient.
     (TwilioRestClient.java:137) 03-21 13:19:11.223: E/AndroidRuntime(296): 
  at   com.twilio.sdk.TwilioRestClient.(TwilioRestClient.java:108) 
```

我在这部分做了很多研发，肯定有HTTP请求问题，谁能告诉我如何解决这个问题

请参阅上面的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:53:24.727

我怀疑你有一些库（.jar）不匹配。该方法表明正在找到一个类，但没有找到引用的方法*。*我怀疑一个库已针对另一个库的特定版本进行编译，并且您提供的版本中不存在该方法。

# windows-8 - 将 SQLite 与 SQL Server 2012 Windows 8 应用程序同步

> ID：15546724
> 
> 赞同：2
> 
> 时间：2013-03-21T11:50:56.790
> 
> 标签：windows-8, microsoft-sync-framework

我正在使用 SQLite 数据库处理一个 Windows 8 应用程序。现在我想将 SQLite 与 SQL Server 2012 同步，有很多可用的东西，但不适用于 Windows 8 应用程序。谁能帮我吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T23:46:48.510

看看这个链接。 [http://forums.xamarin.com/discussion/5719/sync-sqlite-with-sql-server-merge-replication](http://forums.xamarin.com/discussion/5719/sync-sqlite-with-sql-server-merge-replication)

它应该适用于 Windows 8，因为 SQLite 是跨平台的。Windows 8 App 有一个 Sqlite 实现。[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

# php - 访问 localserver 上的 centeral xampp phpmyadmin 数据库

> ID：15546731
> 
> 赞同：0
> 
> 时间：2013-03-21T11:51:22.617
> 
> 标签：php, apache, phpmyadmin, xampp, mysql-workbench

我已经在本地服务器 pc 上安装了 xampp。

我正在尝试通过 mysqlworkbench 从 1 pc 访问数据库到其他 PC（服务器）。

但它给出了以下错误

```
Connecting to MySQL server 192.168.0.102...

Host 'KILL3RCODER-LAP' is not allowed to connect to this MySQL server 
```

我试图在网上搜索它并对`httpd-xampp.conf`文件进行了更改。下面是我的conf文件，但我仍然遇到同样的问题:(

```
#
# XAMPP settings
#

<IfModule env_module>
    SetEnv MIBDIRS "/xampp/php/extras/mibs"
    SetEnv MYSQL_HOME "\\xampp\\mysql\\bin"
    SetEnv OPENSSL_CONF "/xampp/apache/bin/openssl.cnf"
    SetEnv PHP_PEAR_SYSCONF_DIR "\\xampp\\php"
    SetEnv PHPRC "\\xampp\\php"
    SetEnv TMP "\\xampp\\tmp"
    UnsetEnv PERL5LIB
</IfModule>

#
# PHP-Module setup
#
LoadFile "/xampp/php/php5ts.dll"
LoadModule php5_module modules/php5apache2_2.dll

<IfModule php5_module>
    <FilesMatch "\.php$">
        SetHandler application/x-httpd-php
    </FilesMatch>
    <FilesMatch "\.phps$">
        SetHandler application/x-httpd-php-source
    </FilesMatch>

    PHPINIDir "/xampp/php"
</IfModule>

#
# PHP-CGI setup
#
<IfModule !php5_module>
    <FilesMatch "\.php$">
        SetHandler application/x-httpd-php-cgi
    </FilesMatch>
    <IfModule actions_module>
        Action application/x-httpd-php-cgi "/php-cgi/php-cgi.exe"
    </IfModule>
</IfModule>

<IfModule mime_module>
    AddType text/html .php .phps
</IfModule>

ScriptAlias /php-cgi/ "/xampp/php/"
<Directory "/xampp/php">
    AllowOverride None
    Options None
    Order deny,allow
    Allow from all
    <Files "php-cgi.exe">
        Allow from all
    </Files>
</Directory>

<Directory "/xampp/cgi-bin">
    <FilesMatch "\.php$">
        SetHandler cgi-script
    </FilesMatch>
    <FilesMatch "\.phps$">
        SetHandler None
    </FilesMatch>
</Directory>

<Directory "/xampp/htdocs/xampp">
    <IfModule php5_module>
        <Files "status.php">
            php_admin_flag safe_mode off
        </Files>
    </IfModule>
    AllowOverride AuthConfig
</Directory>

<IfModule alias_module>
    Alias /security "/xampp/security/htdocs/"
    <Directory "/xampp/security/htdocs">
        <IfModule php5_module>
            <Files "xamppsecurity.php">
                php_admin_flag safe_mode off
            </Files>
        </IfModule>
        AllowOverride AuthConfig
   </Directory>

    Alias /licenses "/xampp/licenses/"
    <Directory "/xampp/licenses">
        Options +Indexes
        <IfModule autoindex_color_module>
            DirectoryIndexTextColor  "#000000"
            DirectoryIndexBGColor "#f8e8a0"
            DirectoryIndexLinkColor "#bb3902"
            DirectoryIndexVLinkColor "#bb3902"
            DirectoryIndexALinkColor "#bb3902"
        </IfModule>
   </Directory>

    Alias /phpmyadmin "/xampp/phpMyAdmin/"
    <Directory "/xampp/phpMyAdmin">
        AllowOverride AuthConfig
    </Directory>

    Alias /webalizer "/xampp/webalizer/"
    <Directory "/xampp/webalizer">
        <IfModule php5_module>
            <Files "webalizer.php">
                php_admin_flag safe_mode off
            </Files>
        </IfModule>
        AllowOverride AuthConfig
    </Directory>
</IfModule>

#
# New XAMPP security concept
#
    <LocationMatch "^/(?i:(?:xampp|security|phpmyadmin|licenses|webalizer|server-status|server-info))">
    Order deny,allow
    #Deny from all
    Allow from all
    #Allow from ::1 127.0.0.0/8 \
    #fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
    #fe80::/10 169.254.0.0/16
    Require all granted

    ErrorDocument 403 /error/HTTP_XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

编辑上述文件后我仍然没有被授权..我想为我的本地网络设置中心数据库..怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:50:33.207

MySQL 允许为每个用户**和**每个主机指定访问权限。默认情况下，肯定没有用户可以从您的特定 IP 地址进行连接。可能root的anyhost访问权限也被禁用，因此您要做的是授予特定用户的访问权限以及它连接的主机地址（或anyhost：％）。

您可以通过在可以登录的服务器计算机上运行 Workbench 来执行此操作。转到管理部分并创建一个具有 % 作为主机部分的新用户或添加一个具有 % 访问权限的 root 用户。如果您只想限制对本机的访问，请指定实际的机器地址。

# c# - 如何将 Visual Studio 中的所有源代码导出到文本文件中？

> ID：15546733
> 
> 赞同：7
> 
> 时间：2013-03-21T11:51:30.420
> 
> 标签：c#, visual-studio-2010, export, resharper

我有一个相对较大的 Visual Studio 解决方案。

**我需要将所有源代码导出到文本文件中。我还想在某处包含一个文件名。我该怎么做？**

例如，如果我有一个类型

```
namespace MyProject.Core
{
    /// <summary>
    ///   Enumerates possible record status
    /// </summary>
    public enum RecordType
    {
        NonWearTime = 0,
        WearTime = 1,
        NotClassified = 2
    }
} 
```

我希望它转到`output.txt`文件（或任何其他文本格式）并看起来像这样

```
//***********************************
//Filename: RecordType.cs
//***********************************
namespace MyProject.Core
{
    /// <summary>
    ///   Enumerates possible record status
    /// </summary>
    public enum RecordType
    {
        NonWearTime = 0,
        WearTime = 1,
        NotClassified = 2
    }
} 
```

所有其他类型应仅附加到文件末尾。我试过 Resharper，但它的头文件选项只能包含静态文本（我试过`Filename: $FILENAME$`），并且模板选项只适用于新创建的类。

伙计们，这是一个学习项目，我必须提供源代码和论文。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T11:56:48.520

这应该可以解决问题

```
string rootPath = @"path you your root folder";
var header = "***********************************" + Environment.NewLine;

var files = Directory.GetFiles(rootPath, "*.cs", SearchOption.AllDirectories);

var result = files.Select(path => new { Name = Path.GetFileName(path), Contents = File.ReadAllText(path)})
                  .Select(info =>   
                      header
                    + "Filename: " + info.Name + Environment.NewLine
                    + header
                    + info.Contents);

var singleStr = string.Join(Environment.NewLine, result);
Console.WriteLine ( singleStr );
File.WriteAllText(@"C:\output.txt", singleStr, Encoding.UTF8); 
```

备注：如果您遇到性能或内存效率低下，请尝试`StringBuilder`改用并将其容量设置为所有文件内容的总和。这将消除在最后一个`Select`方法中创建的大量冗余字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:56:02.340

我会选择自制的解决方案。

这可以帮助您将每个文件的内容放入字符串中。

```
using System.IO;
...
foreach (string file in Directory.EnumerateFiles(folderPath, "*.cs"))
{
    string contents = File.ReadAllText(file);
} 
```

你有文件名，所以你可以在开头附加它。

您仍然需要做的就是解析所有目录。

```
 public void DirSearch(string root)
   {

           foreach (string file in Directory.EnumerateFiles(root, "*.cs"))
           {
                    string contents = File.ReadAllText(file);
                    // Write to your outputfile once you've happened what you want in your header.
           }

           foreach (string d in Directory.GetDirectories(root))
           {
               DirSearch(d);
           }
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T12:02:27.953

作为无代码解决方案，如何尝试使用**Windows 命令行将**所有文件合并为一个。

例如复制 /b *.cs newfile.txt

[https://superuser.com/questions/111825/any-command-line-or-batch-cmd-to-concatenate-multiple-files](https://superuser.com/questions/111825/any-command-line-or-batch-cmd-to-concatenate-multiple-files)

诚然，它又快又脏，但它可能会通过一些剪裁来产生你所需要的东西

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T11:55:13.363

我会编写一个简单的控制台应用程序来做到这一点。它会搜索所有带有 *.cs 扩展名的文件，进行必要的修改，然后将文件保存到所需的位置。您可以使用`Directory.EnumerateDirectories()`.

# html - 硒点击不起作用，但鼠标起作用

> ID：15546734
> 
> 赞同：5
> 
> 时间：2013-03-21T11:51:30.573
> 
> 标签：html, selenium, automated-tests, selenium-ide

任何人都可以解释为什么/如何在 Selenium IDE 中，对于我想要单击的项目，`click`它不起作用，但是在同一个*Target*`mouseOver`上使用、`mouseDown`和确实有效。我什至尝试使用上述多个，例如：`mouseUp``mouseOut`

 *```
waitForElementPresent
mouseDown
mouseOver
mouseDown
click
mouseOut 
```

当使用不起作用时，这设法在其他方面为我`click`工作。我似乎也没有收到任何错误，也不知道该怎么做。任何帮助表示赞赏。

**更新：**
我点击了 Selenium IDE 中的*Find*按钮，它突出显示了元素，上面有所有 6 个命令，但是当我运行任何命令或案例时，它从未真正点击它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T12:19:16.273

有各种各样的点击实现，一些使用 Javascript 来监听鼠标按下事件，一些使用鼠标向上或单击或鼠标悬停在 div 或 td 他们实现为可点击元素，然后 JS 开始工作，你获得预期的点击动作，

因此，您不应该启动一个正确的事件，而是全部测试或全部执行，

我使用以下命令，它适用于大多数无法使用简单的“单击”命令的元素：

```
 <tr>
    <td>focus</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td></td>
</tr>
<tr>
    <td>mouseOver</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td></td>
</tr>
<tr>
    <td>mouseMoveAt</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td></td>
</tr>
<tr>
    <td>mouseDown</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td></td>
</tr>
<tr>
    <td>mouseDownAt</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td></td>
</tr>
<tr>
    <td>clickAt</td>
    <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
    <td>0,0</td>
</tr> 
```

您可以尝试更多事件，直到它起作用，如果您仍然遇到问题，请确保您的元素路径正确（使用 selenium firefox IDE 并在 FireBug 打开时按“查找”按钮，它将为元素着色，它是 Html 代码带有黄色发光颜色，因此您可以确保元素路径正确），

另一个技巧是右键单击该元素并单击“等待文本...”并将该命令的路径复制到我之前所说的单击和其他命令

如果您要单击的元素被隐藏（例如浮动层 html），那么您可以在萤火虫（临时）中将其属性 display:none 更改为 display:block，这样您就可以使用右键单击技巧来提取确切的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T20:44:11.523

如果您在具有 iFrame 的页面上记录“ [Selenium Builder](http://sebuilder.github.io/se-builder/) ”脚本，我不相信记录器会记录 switchTo 事件，即使鼠标访问它没有问题。因此，在重放时，如果没有 Selenium switchTo，除非您手动添加 switchTo 帧调用，否则 selenium 甚至无法单击元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:27:23.043

尝试访问 location_once_scrolled_into_view 成员变量（例如，如下代码所示）。

```
ScrolledPosition = element.location_once_scrolled_into_view
element.click() 
```

出于某种原因，即使您的代码实际上并未明确使用存储在那里的位置，这通常也允许单击工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:53:46.240

我能够让 Selenium IDE 单击该项目，即使它似乎不是这样做的正确方法。下面是 Selenium IDE 的 HTML。

```
<tr>
     <td>mouseDown</td>
     <td>css=div.dhtmlx_wins_btns_button.dhtmlx_button_close_default</td>
     <td></td>
</tr>
<tr>
     <td>clickAt</td>  
     <td>//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_over_pressed']</td>
     <td>0,0</td>
</tr> 
```

或者您可以使用`//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_default']`CSS 定位器来代替。
***如果有人有比这更好的点击方式，我仍然会很感激，因为这似乎仍然是错误的方式。***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:42:33.947

点击 element 也有同样的问题`<td>`。我使用了方法`selenium.clickAt(locator, coordString)` fe：

```
selenium.clickAt("element id - easily localized by firebug / firepath [firefox addon]","1.1"); 
```*

# java - 在同一活动上的 android 默认媒体播放器中打开 mp3 文件

> ID：15546737
> 
> 赞同：3
> 
> 时间：2013-03-21T11:51:37.190
> 
> 标签：java, android, android-widget, android-mediaplayer

我正在开发一个 Android 应用程序，其中显示了`ListView`来自 sd 卡的 mp3 文件。

现在我想要的是，当用户单击任何 mp3 文件时，它应该开始在那里播放`Activity`。我目前使用的代码不适用于播放音频文件。

我的代码：

```
Uri uri = Uri.parse("/sdcard/music/sample.mp3");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

**但这是我想要的。这是一个屏幕截图形式的 android 姜饼**

![在此处输入图像描述](../Images/4c8457a288faf29ef5ad02019dbf3e5b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:57:36.870

在此处查看此链接是获取所有音乐文件并在列表中显示并在您单击任何项​​目时播放的一个很好的示例...

1.  [显示 MusicList 并在 itemClick 上播放](http://androidsamples.blogspot.in/2009/06/displaying-list-of-music-files-stored.html)

2.  [另一个链接](http://z4android.blogspot.in/2011/06/displaying-list-of-music-files-stored.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:55:33.273

如果您希望在同一活动中播放音频，我想您应该使用另一种方法。我最好`MediaPlayer`在这个活动中初始化对象或作为`background service`.

如有任何问题，请随时提问。

**更新 1**

在一般情况下，正如我所说，您要么需要`MediaPlayer`Activity 中的对象，要么需要`Music Service`.

现在让我们谈谈控件。

您可以简单地将带有控件的块放入布局中，并在需要时显示/隐藏它。MediaPlayer 提供了几个方便的回调，因此您将能够更新进度条。

所以，总结一下：

1.  将控件包含到布局中。
2.  将 MediaPlayer 包含到活动中或使其作为服务工作。
3.  将控件绑定到玩家。
4.  ？？？
5.  利润

# javascript - 在表结构中设置 javascript 输出

> ID：15546738
> 
> 赞同：2
> 
> 时间：2013-03-21T11:51:39.047
> 
> 标签：javascript, html

这是我的代码：-

```
var xml = "<results><result><Country_Code>IN</Country_Code><Country_Name>India</Country_Name><Region_Name>Gujarat</Region_Name><City>Rajkot</City><lat>13.060422</lat><lng>80.24958300000003</lng></result><result><Country_Code>KE</Country_Code><Country_Name>Kenya</Country_Name><Region_Name>Vihiga</Region_Name><City>Kakamega</City><lat>0.1182473</lat><lng>34.7334515999997</lng></result></results>";

xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );
function get_list(ls){
   $lat = $("#select").val();
   $lng = $("#value").val();
   $title = $xml.find( "lat:contains('"+$lat+"')" ).closest('result');    
   $t = $title.find("lng:contains('"+$lng+"')").closest('result');    
   $str = $t.contents().map(function(){
       return $(this).contents().eq(0).text();
   }).get().join(' ');

   $("#result").text($str);
} 
```

我想在表结构中设置我的输出，例如：-

```
<table>
<td>Country_Code: </td><td>IN</td><td><tr>
<td>Country_Name: </td><td>India</td><td><tr>
<td>Region_Name: </td><td>Gujarat</td><td><tr>
<td>City: </td><td>Rajkot</td><td><tr>
<td>lat: </td><td>13.060422</td><td><tr>
<td>lng: </td><td>80.24958300000003</td><td><tr>
</table> 
```

如上所述，我想将我的输出设置为表格请帮助我如何做到这一点......
谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:11:45.693

在函数的一侧，您创建表并存储在一个变量中，并将变量附加到您想要的位置。这只是示例..

```
var table = '<table><tr><td>'+$title>+'</td><td>'+$t+'</td></tr></table>'; 
```

并将表格附加到一个 div 中

```
$("#divid").append(table); 
```

# jquery - 添加类“选定”

> ID：15546739
> 
> 赞同：3
> 
> 时间：2013-03-21T11:51:42.633
> 
> 标签：jquery, html, css

大家好，我有以下脚本：

```
$(document).ready(function () {
        $('.shoppers-images ul li').click(function () {
            $('.shoppers-images ul li').removeClass('selected');
            $(this).addClass('selected');
        });
    }); 
```

这如我所愿......但我确信css是错误的，因为它覆盖了一些声明的值......并且.selected类永远不会显示

```
#foot-transport{
    background: url(../img/css/register-runner.png) no-repeat;
    background-position: center center;
    margin-right: 20px;
}
#bicycle-transport{
    background: url(../img/css/register-bycicle.png) no-repeat;
    background-position: center center;
}
#van-transport{
    background: url(../img/css/register-van.png) no-repeat;
    background-position: center center;
    margin-left: 20px;
}
 .selected{
   background: url(../img/css/checked-image.png) no-repeat;
   background-position: center center;
} 
```

这是我的html：

```
<div class="span7 shoppers-images">
                <ul>
                    <a href="#"><li id="foot-transport"><span>Individual</span></li></a>
                    <a href="#"><li id="bicycle-transport"><span>Pro Driver/Courier</span></li></a>
                    <a href="#"><li id="van-transport"><span>A Delivery </span></li></a>
                </ul>
            </div> 
```

问题是：如何在 css 中声明我的“选定”类以使其更强大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:53:48.677

CSS ID 选择器优先于类名选择器。您可以使用以下`!important`规则：

```
.selected{
   background: url(../img/css/checked-image.png) no-repeat !important;
   background-position: center center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:56:42.857

试试这个

```
.shoppers-images ul:nth-child(1){   //#foot-transport
background: url(../img/css/register-runner.png) no-repeat;
    background-position: center center;
    margin-right: 20px;

} 
```

## 并且对所有人都一样，因此特异性可以起作用 id 比类具有更高的优先级

```
 .shoppers-images ul li.selected{
       background: url(../img/css/checked-image.png) no-repeat;
       background-position: center center;
    } 
```

`!important`不推荐

特异性是完美的

这里的特异性是22，在你的情况下是10

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:59:18.663

你应该检查一下。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

id 元素的特定性高于您在 css 选择器中选择的类。这就是为什么您的元素被其他样式覆盖的原因。

试试这个例如

```
 #foot-transport{
    background: url(../img/css/register-runner.png) no-repeat;
    background-position: center center;
    margin-right: 20px;
}
    #bicycle-transport{
    background: url(../img/css/register-bycicle.png) no-repeat;
    background-position: center center;
}
    #van-transport{
    background: url(../img/css/register-van.png) no-repeat;
    background-position: center center;
    margin-left: 20px;
}
 #foot-transport.selected,#bicycle-transport.selected, #van-transport.selected,{
   background: url(../img/css/checked-image.png) no-repeat;
   background-position: center center;
} 
```

使用 id 和 class 将使它更重要和显示。您也可以使用 !important 但不推荐，仅在特定情况下且仅在您负担不起更好的情况下使用。

```
.selected {
    background: url(../img/css/checked-image.png) no-repeat !important;
    background-position: center center !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:53:28.367

这是因为 ID 选择器优先于类。您需要使选择器更具体。

**CSS**

```
#transport-links .selected {
    background: url(../img/css/checked-image.png) no-repeat;
    background-position: center center;
} 
```

**HTML**

```
<div id="transport-links" class="span7 shoppers-images">
    <ul>
        <a href="#"><li id="foot-transport"><span>Individual</span></li></a>
        <a href="#"><li id="bicycle-transport"><span>Pro Driver/Courier</span></li></a>
        <a href="#"><li id="van-transport"><span>A Delivery </span></li></a>
    </ul>
</div> 
```

或者，您可以使用`!important`它，尽管它被认为是不好的做法。

**进一步阅读**

*   [Smashing Magazine - CSS 特性：你应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# opencv - 用VS 2012构建Opencv 2.4.9，安装生成不正确的头文件

> ID：15546745
> 
> 赞同：3
> 
> 时间：2013-03-21T11:52:09.860
> 
> 标签：opencv, build, visual-studio-2012

我正在尝试从 git 存储库构建 openCV 版本 2.4.9。我已按照说明运行 cmake-gui 来构建 Visual Studio 解决方案。然后我在发布和调试模式下构建了 VS studio 解决方案，然后运行安装构建。

安装构建将所有已编译的库与包含文件夹一起放入安装文件夹。

问题是包含文件夹完全错误并且缺少许多文件。当我将包含文件夹路径添加到 HelloWorld 项目时，它找不到任何 opencv 方法类等。

就好像 cmake 构建过程已以某种方式损坏，并且没有正确准备包含所需头文件的包含文件夹。

我已经对 VS 2010 和 VS 2012 cmake 配置进行了尝试，并得到了相同的结果。一切都编译得很好，但是安装目录中的头文件不正确。

从预构建的 Windows 安装类工作中复制头文件，我很困惑为什么构建过程不会导致头文件的类似文件夹结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:07:16.240

**这确实是一个错误**，已经[报告](http://code.opencv.org/issues/2897) [了两次](http://code.opencv.org/issues/2894)。第一个链接的描述提供了修复：

> 此行的正则表达式不再正确： [https ://github.com/Itseez/opencv/blob/master/cmake/OpenCVModule.cmake#L520](https://github.com/Itseez/opencv/blob/master/cmake/OpenCVModule.cmake#L520)
> 
> 它应该被替换为：/ [/]+.h( **..)?$**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T18:47:43.610

我将更新这篇文章以使其与最新的 git 版本的 opencv 保持同步。

在当前版本中，该错误仍然存​​在，现在位于 cmake/OpenCVModule.cmake 的第 538 行。建议的解决方案是替换实际的 538 行：

```
if(hdr2 MATCHES "^(opencv2/.*)[^/]+.h(..)?$" AND NOT hdr2 MATCHES "opencv2/${the_module}/private.*") 
```

经过

```
if(NOT hdr2 MATCHES "opencv2/${the_module}/private.*" AND hdr2 MATCHES "^(opencv2/?.*)/[^/]+.h(..)?$" ) 
```

非常感谢这个补丁的[作者](https://github.com/vhdirk)，让我免了头晕……

# svn - 使用分支的 SVN 策略，并将更改从主干合并到分支

> ID：15546751
> 
> 赞同：19
> 
> 时间：2013-03-21T11:52:27.170
> 
> 标签：svn, branch, branching-and-merging, svn-merge, svn-update

SVN 的长期用户，但在分支/标记方面相当缺乏经验，当我有时，我怀疑我并没有真正正确地使用它或充分发挥其潜力。

我有我的主干，我致力于添加新功能等。这个代码库用于多个网站，我们在每个项目的基础上从主干创建一个分支。

每个分支通常都有特定于该项目的修改，并且我们认为可以重用的任何内容都添加到主干中，并且可以在各个项目上打开和关闭该功能。

目前，当我们对主干进行更改并希望将这些修改放在提前的分支中时，我必须通过手动将某些修订合并到分支中并重新提交它们。不理想，而且容易错过东西。

**所以，我的问题......**有没有办法用主干的所有更改来更新我的分支，并像处理标准主干更新一样处理它们？

我已经看到将分支重新集成到主干，但是由于我在这种情况下使用分支的方式，这并不是我真正想做的事情。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-23T14:51:52.903

是的，有可能。基本上，您需要`svn merge`从分支的干净工作副本（没有本地修改的副本）运行：

```
$ pwd
/home/user/mybranch
$ svn status # Does not display anything
$ svn update # Make sure your local copy is up to date.
Updating '.':
At revision X.
$ svn merge url/to/repository/trunk
Updates, additions, deletions and conflicts.
$ #handle conflicts.
$ svn commit -m "Merging changes from the trunk". 
```

请参阅SVN 书中的[保持分支同步](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.stayinsync)。

第一次合并可能会引入很多冲突，特别是如果分支很久以前分叉，但后面的合并会顺利进行，特别是如果你经常合并。

# android - 使用 httpurlconnection 和 android 上传图像字节数组

> ID：15546753
> 
> 赞同：3
> 
> 时间：2013-03-21T11:52:32.400
> 
> 标签：android, mime-types, content-type, httpurlconnection

我正在开发小型 android 应用程序，我想在其中将图像从我的 android 设备上传到我的服务器。我正在使用`HttpURLConnection`它。

我正在通过以下方式执行此操作：

```
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.arrow_down_float);

ByteArrayOutputStream bos = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.JPEG, 100, bos);

byte[] data = bos.toByteArray();

connection = (HttpURLConnection) url.openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "image/jpeg");
connection.setRequestMethod(method.toString());

ByteArrayOutputStream bout = new ByteArrayOutputStream(); 
bout.write(data); 
bout.close(); 
```

我正在使用`ByteArrayOutputStream`，但我不知道如何使用我的 httpurlconnection 传递该数据。这是传递原始图像数据的正确方法吗？我只是想发送包含图像数据的字节数组。没有转换或没有多部分发送。我的代码工作正常，没有任何错误，但我的服务器给了我回复 `{"error":"Mimetype not supported: inode\/x-empty"}`

我使用 httpclient 做到了这一点，`setEntity`并且它可以正常工作。但我想使用 urlconnection。

难道我做错了什么？这个怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T01:21:49.637

You must open the output stream connection and write the data in it. You could try this:

```
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.arrow_down_float);

connection = (HttpURLConnection) url.openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "image/jpeg");
connection.setRequestMethod(method.toString());
OutputStream outputStream = connection.getOutputStream();

ByteArrayOutputStream bos = new ByteArrayOutputStream(outputStream);
bitmap.compress(CompressFormat.JPEG, 100, bos);

bout.close();
outputStream.close(); 
```

With this statement:

```
bitmap.compress(CompressFormat.JPEG, 100, bos); 
```

You are doing two things: compress the bitmap and send the resulted data (the bytes that build the jpg) to bos stream, that send the resulted data to the output stream connection.

Also you can write the data in the output stream of the connection directly, replacing this:

```
ByteArrayOutputStream bos = new ByteArrayOutputStream(outputStream);
bitmap.compress(CompressFormat.JPEG, 100, bos); 
```

With this:

```
bitmap.compress(CompressFormat.JPEG, 100, outputStream); 
```

I hope this helps you understand how HttpUrlConnection works.

Also, you should not load the whole bitmap entirely for avoid the "out of memory" exceptions, opening the bitmap with streams, for example.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:55:20.243

```
private void doFileUpload(){

          HttpURLConnection conn = null;
          DataOutputStream dos = null;
          DataInputStream inStream = null; 

          String exsistingFileName = "/sdcard/six.3gp";
          // Is this the place are you doing something wrong.

          String lineEnd = "\r\n";
          String twoHyphens = "--";
          String boundary =  "*****";

          int bytesRead, bytesAvailable, bufferSize;

          byte[] buffer;

          int maxBufferSize = 1*1024*1024;

          String urlString = "http://192.168.1.5/upload.php";

          try
          {

          Log.e("MediaPlayer","Inside second Method");

          FileInputStream fileInputStream = new FileInputStream(new File(exsistingFileName) );

           URL url = new URL(urlString);

           conn = (HttpURLConnection) url.openConnection();

           conn.setDoInput(true);

           // Allow Outputs
           conn.setDoOutput(true);

           // Don't use a cached copy.
           conn.setUseCaches(false);

           // Use a post method.
           conn.setRequestMethod("POST");

           conn.setRequestProperty("Connection", "Keep-Alive");

           conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

           dos = new DataOutputStream( conn.getOutputStream() );

           dos.writeBytes(twoHyphens + boundary + lineEnd);
           dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + exsistingFileName +"\"" + lineEnd);
           dos.writeBytes(lineEnd);

           Log.e("MediaPlayer","Headers are written");

           bytesAvailable = fileInputStream.available();
           bufferSize = Math.min(bytesAvailable, maxBufferSize);
           buffer = new byte[bufferSize];

           bytesRead = fileInputStream.read(buffer, 0, bufferSize);

           while (bytesRead > 0)
           {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
           }

           dos.writeBytes(lineEnd);

           dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

           BufferedReader in = new BufferedReader(
                           new InputStreamReader(
                           conn.getInputStream()));
                String inputLine;

                while ((inputLine = in.readLine()) != null) 
                    tv.append(inputLine);

           // close streams
           Log.e("MediaPlayer","File is written");
           fileInputStream.close();
           dos.flush();
           dos.close();

          }
          catch (MalformedURLException ex)
          {
               Log.e("MediaPlayer", "error: " + ex.getMessage(), ex);
          }

          catch (IOException ioe)
          {
               Log.e("MediaPlayer", "error: " + ioe.getMessage(), ioe);
          }

          //------------------ read the SERVER RESPONSE

          try {
                inStream = new DataInputStream ( conn.getInputStream() );
                String str;

                while (( str = inStream.readLine()) != null)
                {
                     Log.e("MediaPlayer","Server Response"+str);
                }
                /*while((str = inStream.readLine()) !=null ){

                }*/
                inStream.close();

          }
          catch (IOException ioex){
               Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex);
          }

        } 
```

[完整演示](http://niravranpara.blogspot.in/2012/11/upload-video-in-server.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T13:13:28.150

```
 HttpParams httpParameters = new BasicHttpParams();
                HttpProtocolParams.setContentCharset(httpParameters, HTTP.UTF_8);
                HttpProtocolParams.setHttpElementCharset(httpParameters, HTTP.UTF_8);
                HttpClient httpclient = new DefaultHttpClient(httpParameters);
                HttpPost httppost = new HttpPost(ServerConstants.urll);
                httppost.setHeader("Content-type","application/octet-stream");//application/octet-stream    

            // the below is the important one, notice no multipart here just the raw image data 
            httppost.setEntity(new ByteArrayEntity(imagebytess));               

            try {
                HttpResponse res = httpclient.execute(httppost);                

                BufferedReader reader = new BufferedReader(new InputStreamReader(
                        res.getEntity().getContent(), "UTF-8"));
                String sResponse;
                StringBuilder s = new StringBuilder();
                System.out.println("Response: " + res.getStatusLine().getStatusCode());
                while ((sResponse = reader.readLine()) != null) {
                    s = s.append(sResponse);
                    System.out.println("Response: " + res.getStatusLine().getStatusCode());
                }`enter code here`
                System.out.println("Response: " + s.toString());
            } catch `enter code here`(ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

# python - Python 条件不适用（if/elif）

> ID：15546755
> 
> 赞同：0
> 
> 时间：2013-03-21T11:52:35.143
> 
> 标签：python, runtime-error, conditional-statements

我的 python 代码中的条件有问题。这是一个数学应用程序，下面是不能正常运行的代码部分：

```
def askNumber():
    """Asks the number to test"""
    a=raw_input("Select the number to test (type 'exit' for leaving):")
    if len(a)!=0 and a.lower!="exit":
        try:
            b= int(a)
            processing(b)
        except ValueError:
            print "Your input is not valid. Please enter a 'number'!"
            time.sleep(1)
            askNumber()
    elif len(a)!=0 and a.lower=="exit":
        answer()
    else:
        print "Your input can't be 'empty'"
        time.sleep(1)
        askNumber() 
```

因此，当我在“a”的 raw_input 中键入“exit”时，假定的应用条件是**elif**条件，但最终应用**if 条件**，最终打印“您的输入无效。请输入“数字”！ " 抱歉，如果很明显，我是初学者，尽管我多次尝试找出错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:53:05.213

您需要*调用*该`.lower()`函数。

```
if len(a) != 0 and a.lower() != "exit":
    # ...
elif len(a) != 0 and a.lower() == "exit": 
```

没有真正需要测试`len(a)!=0`，只需测试`a`自己：

```
if a and a.lower() != "exit":
    # ...
elif a and a.lower() == "exit": 
```

空字符串`False`在布尔上下文中求值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:58:57.017

您的程序流程有点内向，我可以建议一些改进吗？

```
def askNumber():
    """Asks the number to test"""

    while True:
        a = raw_input("Select the number to test (type 'exit' for leaving):")

        if not a:
            print "Your input can't be 'empty'"
            continue

        if a.lower() == "exit":
            answer()
            break

        try:
            b = int(a)
        except ValueError:
            print "Your input is not valid. Please enter a 'number'!"
            continue

        processing(b) 
```

实际上，`not a`也可以消除分支（空输入将在 中处理`except`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:51:42.183

您可以更改以下条件：

```
 if a and a.lower() !="exit":
  # .....
   elif a and a.lower() == "exit":
      answer()
   elif a and not a.isdigit(): print "invalid input"
   else:
   #............. 
```

请注意，你不需要`len(a) != 0`，只需使用`a`将评估它是否为空。

# asp.net-mvc - Win server 2003 中 IIS 6 中的 MVC 部署

> ID：15546757
> 
> 赞同：0
> 
> 时间：2013-03-21T11:52:35.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-6, web-deployment

请帮助我如何在 IIS 6 中部署 mvc3 应用程序。我不知道如何设置第一页（mvc 中的起始页）应用程序。我想先设置哪个页面，然后设置 hpw，我将完整的应用程序从本地计算机复制到远程服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:29:16.987

看这里：http: [//blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/)。您并没有真正在 MVC 中设置“默认页面”，因为所有内容都被路由到控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:29:23.567

尝试访问您的任何操作方法/页面，看看 MVC 路由是否适合您。

要使无扩展名 url 在 IIS6 中工作，您需要启用通配符映射。确保取消选中“验证文件存在”选项。通配符映射虽然带来了一些性能问题。查看 Phil 解释的[博客文章](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)。

# javascript - 多个 ajax 调用之间的延迟

> ID：15546763
> 
> 赞同：2
> 
> 时间：2013-03-21T11:53:02.477
> 
> 标签：javascript, jquery

我有 5 个看起来像这样的 ajax 调用（没有发布所有五个）：

```
tabTest = {
BASE_URL : 'http://localhost/project/',
getPics : function(){

    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image1.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_one;
                $('#pic1 img').attr("src", pic);
        }   
    });
    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image2.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_two;           
                $('#pic2 img').attr("src", pic);
        }   
    });
   }
}; 
```

ajax 调用确实有效，但它们都立即触发；相反，我需要在每个人之间设置一个延迟，这样他们就不会一次全部触发，而是只按一次（点击时，这发生在不同的函数中），每次调用之间有 5 秒。

我试过使用'setTimeout'，但它还没有奏效。我真的不知道如何继续这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:58:10.657

如果您将 AJAX 调用放在自己`setTimeout()`的位置，那么它没有理由不工作：

```
setTimeout(function(){
    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image1.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_one;
            $('#pic1 img').attr("src", pic);
        }   
    });
}, 5000); 
```

然后将每次通话的持续时间增加 5000。所以第二个看起来像：

```
setTimeout(function(){
    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image2.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_one;
            $('#pic2 img').attr("src", pic);
        }   
    });
}, 10000); 
```

You could also put the functions inside the previous request's callback although a request fail would mean that all subsequent AJAX requests wouldn't get called.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:56:52.457

尝试在上一个成功回调函数上添加下一个 ajax 调用。

```
$.ajax({
type : 'GET',
url : this.BASE_URL +'js/image1.js',
dataType : "json",
async: false,
success: function(data){
    var pic = data.images.image[0].image_one;
        $('#pic1 img').attr("src", pic);
   $.ajax({
      type : 'GET',
      url : this.BASE_URL +'js/image2.js',
      dataType : "json",
      async: false,
      success: function(data){
          var pic = data.images.image[0].image_two;           
              $('#pic2 img').attr("src", pic);
      }   
  });
} 
```

});

或者

```
$.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image1.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_one;
                $('#pic1 img').attr("src", pic);
            call2();
        }   
    });

function call2(){
    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image2.js',
        dataType : "json",
        async: false,
        success: function(data){
            var pic = data.images.image[0].image_two;           
                $('#pic2 img').attr("src", pic);
        }   
    });
} 
```

所以现在当第一个 ajax 完成时，下一个调用将触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:00:52.883

You can use `setInterval()` for this. When using `setInterval()` it can cal the wat u mention the time for function...u check it out the seconds ...

```
setInterval("functionname()",50000); 
```

# java - 为什么这个shutdownhook 不起作用？

> ID：15546775
> 
> 赞同：5
> 
> 时间：2013-03-21T11:53:29.247
> 
> 标签：java, swing, events, shutdown-hook

这是我的主要方法，它包含一个shutdownhook：

```
public static void main(String args[]) {
    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
            JOptionPane.showMessageDialog(null, "Shutdown hook");
        }
        });

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(
            new Runnable() {
                @Override
                public void run() {
                    Thread.setDefaultUncaughtExceptionHandler(new MyUncaughtExceptionHandler());
                    MyFrame frame = new MyFrame();
                    frame.setVisible(true);
                }
            });
} 
```

问题是`JOptionPane`根本没有出现。相反，框架关闭，但应用程序本身仍在运行。PS。我无法使用该`WindowClosing`事件，因为它不会在*Mac OS X*`Cmd`上的+`Q`命令上触发。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:03:30.220

调度线程已经关闭，或者很可能在您提交到队列之前被关闭。

你需要找到另一种捕获退出事件的方法，关闭钩子在那里你可以在VM退出时进行整理，所以你真的不想在调用它时在UI中占用更多资源。*

# wpf - wpf源和目标绑定在两个不同的路径

> ID：15546777
> 
> 赞同：1
> 
> 时间：2013-03-21T11:53:36.927
> 
> 标签：wpf, data-binding

如何为`TextBox`从源读取的文本绑定文本属性，但它将其值存储到不同的目标？假设我有一个文本框，它与`CollectionViewSource`

```
<Window>
   <Window.Resources>
      <CollectionViewSource Source="{Binding Source={StaticResource ProgramView}, Path='FK_LevelList_ProgramList'}" x:Key="LevelLookupView" />
   </Window.Resources>

   <TextBox Name="FeePerTermTextbox" Text="{Binding Source={StaticResource LevelLookupView}, Path='FeePerTerm', Mode=OneWay, StringFormat=c2}"/>   
</Window> 
```

执行保存时， 的值`TextBox`将存储到另一个不同于`CollectionViewSource`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:14:22.857

我认为这是有缺陷的。如果源得到更新会发生什么？是否应该覆盖文本框？这种设计的原因是恕我直言，UI 应该将元素集的“特征”反映为 DataContext，因此我希望它包含我在模型或 ui 中给出的值。现在，当从文本框接收设置值时，当然没有什么可以阻止您不将视图模型中的值写入模型。

```
public class Redirecter
{
    public string FileName
    {
        get{return mModel.FileName;}
        set{mProxy.FileName = value;}
    }
} 
```

但这当然不能与 INotifyPropertyChanged 一起很好地工作。我会使用不同的方法。使用更能反映您的用户界面的模型。如果您打开视图，请使用模型 A 中的设置填充此 ui 模型。如果您现在保存它，请将每个属性保存到模型 B 中。

# c++ - 在 C++ 中编辑现有文件

> ID：15546779
> 
> 赞同：1
> 
> 时间：2013-03-21T11:53:40.450
> 
> 标签：c++, file

我在 Qt 中有我的应用程序的首选项文件。每当我启动应用程序时，它都会加载文件并根据内容相应地创建小部件。我为用户提供了一些自定义选项。现在，当我的应用程序关闭时，我正在检查首选项是否已更改。如果是，那么我将再次打开首选项文件，然后再次在其中添加所有内容。我不是在创建临时文件，而是直接编辑文件。这种方法有效吗？还是我做错了？因为我发现了这些线程： 1.[编辑现有平面文件中间的最佳方法是什么？](https://stackoverflow.com/questions/732469/what-is-the-best-way-to-edit-the-middle-of-an-existing-flat-file)

2.  [http://qt-project.org/forums/viewthread/25924/](http://qt-project.org/forums/viewthread/25924/)

应该使用我的二进制文件吗？目前我正在使用 ASCII 文件。谢谢。

更新：在上面的stackoverflow链接中，正确答案有

> 如果您无法使用 flat，那么您将无法使用老式的更新方式

我的意思是问我使用的方法是否是老式的，现在有没有更好的方法？& 平面文件是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:02:38.863

1.  不要尝试编辑文件。重写整个事情
2.  使用临时文件重写。即将首选项的当前状态写入临时文件。然后在确保临时文件已成功写入后，将文件移动/重命名为您的实际首选项文件。这有助于在您重写文件时发生崩溃。如果你直接重写它，你将既没有旧的，也没有好的新的。如果您通过临时文件执行此操作，那么以这种方式执行此操作可确保在发生崩溃时，您至少有一个良好的首选项文件（尽管它包含旧的首选项）。
3.  文本/二进制文件没有太大区别，除非它是一个非常大的文件。如果需要，文本将有助于手动编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:02:19.830

这是一个非常好的方法。由于您似乎已经将所有首选项加载到内存中并且在那里进行了编辑，因此您无需为临时文件而烦恼（除非您想确保程序在写入期间失败时的安全性）。只需将所有首选项写回原始文件即可。

选择二进制文件还是文本文件取决于您。首选项往往是文本文件，因为它们具有仅使用文本编辑器而不是一些用于查看它们的专用软件的人类可读的额外好处。但是，由于解码更简单，二进制文件的性能可能稍好一些。

# javascript - 指定新事件时如何避免和返回jquery中的事件？

> ID：15546780
> 
> 赞同：0
> 
> 时间：2013-03-21T11:53:43.073
> 
> 标签：javascript, jquery, events, event-handling

我需要覆盖事件，但是应用程序可以选择将原始事件返回到文档的每个元素。有任何想法吗？

例如：

```
 <div class="mydiv">
    </div>

    $(document).delegate( '.mydiv', click', function () { 
        alert('This is the original event my event!');
    });

    $(document).delegate( '.mydiv', 'click', function() {
       alert('Do this and ignore de previous...');
       // For example: How to return the original event when mouseleave event will executed?
    });

    $(document).delegate( '.mydiv', 'mouseleave', function() {
//       return the original event of mydiv 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:56:57.733

`undelegate function`在创建`new click`函数之前使用

文档[http://api.jquery.com/undelegate/](http://api.jquery.com/undelegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:10:22.077

尝试检查函数中的点击事件

$(document).delegate('.mydiv', click', function () {

```
 if(clicked){
          return;
      }
   alert('This is the original event my event!');

});

$(document).delegate( '.mydiv', 'click', function() {
       if(!clicked){
          return;
      }
   alert('Do this and ignore de previous...');

}); 
```

# php - Twitter 不记名访问令牌请求在两台服务器上的行为不同

> ID：15546781
> 
> 赞同：1
> 
> 时间：2013-03-21T11:53:47.217
> 
> 标签：php, twitter, oauth-2.0, file-get-contents, php-stream-wrappers

我必须为 twitter 提要实现 oAuth2 不记名访问令牌方法。我正确遵循了 twitter 开发者网站上的详细信息，但我不断收到“无法验证您的凭据 twitter”...

如果我将凭据复制到我的开发服务器（5.3.10 机器），我实际上可以登录、获取令牌、检索推文，但在另一个客户端的服务器（5.2.17 机器）上，我无法让它与完全相同的代码。

下面的代码中有什么让您印象深刻的关于 PHP 差异的地方吗？我相信它一定与 file_get_content https 流包装器选项有关，但我在文档中找不到任何关于它的内容。（Openssl 支持安装在客户端服务器上）

```
$twitter_bearer_access_token = get_option('twitter_bearer_access_token', null);
if($twitter_bearer_access_token == null)
{

    //Request a bearer access token
    $encodedAccessToken = base64_encode(TWITTER_CONSUMER_KEY.':'.TWITTER_CONSUMER_SECRET);

    //Setup the stream context options and create the stream to POST to twitter
    $options = array(
        'http' => array(
            'method' => 'POST',
            'header' => 'Authorization: Basic '.$encodedAccessToken,
            'content' => 'grant_type=client_credentials',
        ),
    );
    $context  = stream_context_create($options);
    $result = json_decode(@file_get_contents('https://api.twitter.com/oauth2/token', false, $context));
    if(isset($result->token_type) && $result->token_type == 'bearer')
    {
        $twitter_bearer_access_token = $result->access_token;
        update_option('twitter_bearer_access_token', $twitter_bearer_access_token);
    }
    else
    {
        $twitter_bearer_access_token = false;
    }

} 
```

**编辑#1**

我事先确认两台服务器上的所有变量都是相同的，我已经输出并比较了它们。只有 file_get_contents 返回不同的结果。

另外，我尝试将在 5.3 服务器上获得的不记名访问令牌复制到 5.2 服务器，并且值仍然匹配，但我不断收到有关无效身份验证的错误...

**编辑#2**

更多信息，它似乎与我发送的标头没有任何关系，我几乎添加了所有标头，除了那些与我不相关的标头，例如代理标头。它与 PHP 是 5.2 或 5.3 没有任何关系，在我们的登台服务器主机上测试并切换到 5.2 并且仍然可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:47:05.673

似乎使用 cURL 工作正常。考虑到我们想限制我们的依赖关系，我们只需要使用两个版本的代码（或者最终使用可交换组件来检索远程数据）

```
//Init curl
$request = curl_init();
curl_setopt($request, CURLOPT_SSLVERSION, 3);
curl_setopt($request, CURLOPT_URL, 'https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name='.TWITTER_ACCOUNT.'&count=100');
curl_setopt($request, CURLOPT_HTTPHEADER, array('Authorization: Bearer '.$twitter_bearer_access_token));
curl_setopt($request, CURLOPT_RETURNTRANSFER, true);

$result = json_decode($content = curl_exec($request));
curl_close($request); 
```

就是这样，伙计们

PS：这仍然没有任何失败的理由，这只是一个后备！

# ios - 您还没有注册任何设备令牌 - Urban Airship

> ID：15546786
> 
> 赞同：2
> 
> 时间：2013-03-21T11:53:52.053
> 
> 标签：ios, objective-c, ios6, push-notification

我使用 Urban Airship 进行推送通知。下面是状态。

```
2013-03-21 14:39:16.231 SAMA[18048:907] [D] -[UAPush applicationDidBecomeActive] [Line 555] Checking registration status after foreground notification
2013-03-21 14:39:16.232 SAMA[18048:907] [D] -[UAPush applicationDidBecomeActive] [Line 561] Checking registration on app foreground disabled on app initialization
2013-03-21 14:39:16.399 SAMA[18048:907] [D] -[UAUser listenForDeviceTokenReg] [Line 931] ListenForDeviceTokenReg
2013-03-21 14:39:17.530 SAMA[18048:907] [D] -[UAUser retrieveRequestSucceeded:] [Line 873] User retrieved: 200:{
  "user_id" : "z3hUpYOpRKeLOAfKyjIvRQ",
  "user_url" : "https://device-api.urbanairship.com/api/user/xxxxxxxxxxxxxxxxxx/",
  "tags" : [ ],
  "device_tokens" : [ ],
  "device_pins" : [ ],
  "apids" : [ ],
  "has_active_subscription" : false,
  "subscriptions" : [ ],
  "ua_device_ids" : [ "xx-DFxxAB-xx-xxx-xxx" ],
  "badge" : 0,
  "server_time" : "2013-03-21 11:39:18"
}
2013-03-21 14:39:17.550 SAMA[18048:907] [D] -[UAUser updateDefaultDeviceToken] [Line 978] Updating device token.
2013-03-21 14:39:17.552 SAMA[18048:907] [D] -[UAUser updateDefaultDeviceToken] [Line 981] Skipping device token update: no token, already up to date, or user is being updated.
2013-03-21 14:39:31.123 SAMA[18048:907] [D] +[UAKeychainUtils getDeviceID] [Line 275] Retrieved device id info from keychain.
2013-03-21 14:39:31.124 SAMA[18048:907] [D] +[UAKeychainUtils getDeviceID] [Line 279] Device ID result is not nil.
2013-03-21 14:39:31.125 SAMA[18048:907] [D] +[UAKeychainUtils getDeviceID] [Line 288] Loaded Device ID: xxxxxxx-xxxxx-xxxx-xxxx-xxxxxxxxxxxx
2013-03-21 14:39:31.126 SAMA[18048:907] [D] +[UAKeychainUtils getDeviceID] [Line 289] Loaded Model Name: iPhone4,1
2013-03-21 14:39:32.399 SAMA[18048:907] [D] -[UAAnalytics requestDidSucceed:response:responseData:] [Line 461] Analytics data sent successfully. Status: 200 
```

仍在我的帐户中，我看到了**`You don't have any device tokens registered yet.`**

即使我运行应用程序，它也没有要求确认推送通知。

我按照[他们的文档](https://docs.urbanairship.com/display/DOCS/Getting+Started%3a+iOS%3a+Push)做了一切。但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:03:31.337

城市飞艇的完美解决方案是

1.  创建应用 ID
2.  启用 APNS
3.  然后创建配置文件

（注意：删除您在计算机上和管理器窗口中的所有配置文件）。不要在 xcode 中保留该项目的配置文件。之前删除并再次执行上述步骤。问题将得到解决。

# iphone - 将 URL 图像添加到按钮单击

> ID：15546789
> 
> 赞同：3
> 
> 时间：2013-03-21T11:53:58.763
> 
> 标签：iphone, objective-c, image, url, uibutton

我搜索了一些教程以将 UIImage 添加到单击事件的按钮。如何添加 URL 路径

图像到按钮..例如代码：

```
UIButton *imageView=[[UIButton alloc]initWithFrame:CGRectMake((320*index)+countFlag*80+ 2, 5, 75, 75)];
                imageView.tag=i+1;
                [imageView addTarget:self action:@selector(imageViewClicked:) forControlEvents:UIControlEventTouchUpInside];
                [imageView.layer setBorderColor:[UIColor lightGrayColor].CGColor];
                [imageView.layer setBorderWidth:1.0f];
                switch ((i+1)%5) {
                    case 0:
                        [imageView setImage:[UIImage imageNamed:@"img1.png"] forState:UIControlStateNormal];               

                        break;

                    case 1:
                        [imageView setImage:[UIImage imageNamed:@"img2.png"]  forState:UIControlStateNormal];

                        break;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:20:08.553

最好使用[SDWebImage](https://github.com/rs/SDWebImage)`UIButton+WebCache.h`这一类，它支持为你的按钮异步加载图片。您可以使用以下任何一种方法。

```
- (void)setImageWithURL:(NSURL *)url forState:(UIControlState)state;
- (void)setImageWithURL:(NSURL *)url forState:(UIControlState)state placeholderImage:(UIImage *)placeholder; 
```

它还提供背景图片异步加载`UIButton`

```
- (void)setBackgroundImageWithURL:(NSURL *)url forState:(UIControlState)state;
- (void)setBackgroundImageWithURL:(NSURL *)url forState:(UIControlState)state placeholderImage:(UIImage *)placeholder; 
```

不要忘记包含`SDWebImage`到您的项目中并`UIButton+WebCache.h`归档到您的实施文件中。

参考：[https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:56:21.553

试试这个你的按钮（imageView）

```
[imageView setImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"imageurl"]]]forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T12:07:56.577

对于正常状态，

```
[imageView setImage:[UIImage imageNamed:@"img1.png"] forState:UIControlStateNormal]; 
```

对于 Clicked (Selected) 状态，

```
[imageView setImage:[UIImage imageNamed:@"img2.png"] forState:UIControlStateSelected]; 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:06:19.043

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"url"];
[imageView setImage:[UIImage imageWithData:data]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:08:01.147

试试这个：

```
 EGOImageButton* btnUserImage = [[EGOImageButton alloc] initWithPlaceholderImage:[UIImage imageNamed:@"ProfilePictureDefault.png"]];
    btnUserImage.frame = CGRectMake(10,5,25,25);
    btnUserImage.highlighted = NO;
    [self addSubview:btnUserImage];

    btnUserImage.imageURL = [NSURL URLWithString:Url]; 
```

# android - 带有 %p 的 TranslateAnimation 在三星 S3 中不起作用

> ID：15546791
> 
> 赞同：1
> 
> 时间：2013-03-21T11:54:08.107
> 
> 标签：android, android-layout, android-animation

大家好，我正在做翻译动画，我需要向上移动我的视图（它位于屏幕的中心，但不完全），以便它可以适合从顶部放置 9dp 的容器。我已经想通了，如果我将视图从 0%p 转换为 52%p，它将完全适合 XHDPI 设备的容器布局。它在谷歌银河 nexus 设备（720 X 1280）上完美运行，但同样的事情不适用于三星 s3。在 S3 i只需将视图移动 50%p。请告诉我如何解决此设备相关问题？为什么会发生这种情况？

![在此处输入图像描述](../Images/58e38eedeb5850e04ebc114b2fede19e.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:23:40.747

您可以为不同的屏幕使用不同的动画值。例如，您可以将相同的动画xml文件放在values-xhdpi中并切换一些值。这样所有xhdpi设备都将加载此动画，所有其他设备将加载默认动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:51:41.307

这个问题已经解决了。我不知道这些问题是否可能是特定版本的问题，但我只是尝试了以实用方式启动动画而不是使用动画 xml 文件的代码。我以这种方式使用动画，它就像一个魅力。

```
 slide_up = new TranslateAnimation(Animation.ABSOLUTE, Animation.ABSOLUTE, Animation.RELATIVE_TO_SELF, -610); 
```

# dns - nginx管理本地服务器取决于收入域名

> ID：15546792
> 
> 赞同：2
> 
> 时间：2013-03-21T11:54:08.200
> 
> 标签：dns, nginx

我有一些在不同端口本地运行的应用程序，如何配置 NGINX 服务器以将请求从端口 80 转发到我的应用程序取决于收入域名。例如，端口 8181 上名为“app1”的 2 个本地应用程序，如果请求来自`http://app1.com`- nginx 转发到`http://localhost:8181`

我查看了 nginx 文档，如果有人这样做，我会询问您的示例。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:30:05.013

假设您要创建[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)，我的方法是首先在一个名为的新文件中配置以下反向代理设置`/etc/nginx/reverse-proxy.conf`：

```
# Serve / from local http server.
# Just add the following to individual vhost configs:
# proxy_pass http://localhost:3001/;

proxy_pass_header Server;
proxy_set_header Host $http_host;
proxy_redirect off;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Scheme $scheme;
proxy_connect_timeout 10;
proxy_read_timeout 10; 
```

然后，对于我正在配置的每个反向代理，我添加了一个适当命名的配置文件，`/etc/nginx/sites-enabled`其中包含以下内容：

```
server {
    server_name app1.com;
    server_name www.app1.com;
    location / {
        include /etc/nginx/reverse-proxy.conf;
        proxy_pass http://localhost:8181/;
    }
} 
```

您可以创建任意数量的`server`块并将它们指向不同的本地（甚至远程）应用程序服务器。您还可以添加`location`块以静态地为同一域内的不同 URL 提供服务，或者来自不同的本地应用程序服务器。

（您也可以将所有配置滚动到`/etc/nginx/nginx.conf`中，但我发现将配置分成多个文件更容易。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T10:36:17.543

[通过遵循本教程](https://allaboutghost.com/how-to-proxy-port-80-to-2368-for-ghost-with-nginx/)，我设法轻松地做到了这一点。

`/etc/nginx/conf.d/`在调用中创建一个新文件`your-domain.com.conf`并将其放入其中：

```
server {
    listen 80;
    server_name your-domain.conf.com;
    location / {
        proxy_set_header   X-Real-IP $remote_addr;
        proxy_set_header   Host      $http_host;
        proxy_pass         http://127.0.0.1:2368;
    }
} 
```

然后重启nginx

`sudo service nginx restart`

# javascript - 如何用函数包装 JS 库并将其放入命名空间？

> ID：15546796
> 
> 赞同：1
> 
> 时间：2013-03-21T11:54:21.400
> 
> 标签：javascript, oop, namespaces, global-variables, encapsulation

我在**JavaScript中有一个****支付网关 API 包装器**。

 **但它设计得很糟糕。

它使用**163 个全局（窗口）对象**。

我想做的是

**获取 API 包装器生成的所有全局对象**

并将**它们全部放在一个名为“PG”的对象中。**

所以我可以使用它的方法

```
PG.methodName() 
```

并通过

```
PG.variableName 
```

### 我怎样才能用 JavaScript 做到这一点？

### 还是有其他方法可以使用命名空间加载脚本？

* * *

这是有问题的 JS 库：[请参阅 Gist](https://gist.github.com/inspiredjw/1b1c79f84608861f5266)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:02:59.587

You can create a dummy javascript object and add functions and variables to it like this:

```
var PG = PG || {};
PG.methodName = apiMethodName;
PG.variable = variableName; 
```

This approach will create their dublicates within `PG` scope while leaving original functions in `window` scope. In order to move them from global scope you will have to modify api scripts themselves, which may be not a good idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:13:27.743

您正在寻找[关闭](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

使用“[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)”（也称为“自执行匿名函数”）来包装和执行您的代码；

```
(function( window, document, NS, undefined ){

  NS.variableName = "string value";
  NS.methodName = function() {};

  function myFunction() { alert('within closure'); };

}( window, window.document, (window.NS = window.NS || {}) )); 
```

然后，您可以`NS`从闭包外部访问，但不能`myFunction`访问仅限于闭包范围的函数。

是的，您可以重`NS`命名`PG`甚至`PayGate`：）**

# ruby - Ruby 中的单例方法有任何例外吗？

> ID：15546797
> 
> 赞同：4
> 
> 时间：2013-03-21T11:54:21.773
> 
> 标签：ruby, singleton-methods

在 Ruby 中，一切都是对象。但是，当我尝试对数字使用单例方法时，会出现类型错误。一切都是对象的概念有什么例外吗？

```
a_str = "Ruby"
a_num = 100

def a_str.bark
  puts "miaow"
end

a_str.bark #=> miaow (Good Cat!)

def a_num.bark
  puts "miaow"
end

a_num.bark #=> TypeError: can't define singleton method "bark" for Fixnum 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:02:47.800

Numbers are kind of special as they actually don't exist as real objects in memory. This would be unfeasible as there are infinite many of them.

Instead, Ruby emulates them being objects using certain conventions. i.e. you will notice that the `object_id` of a `Fixnum` is always `2 * i + 1` (with `i` being the number). Using this convention, Ruby can emulate the numbers that are represented as actual plain numbers on the CPU for performance and space constraints to look like objects to your Ruby program.

As `Fixnum`s don't actually exist as discrete objects in memory, you can't change them individually. Instead, numbers are considered immutables. They can mostly be used as objects, but you can't change them as they are not actual discrete objects. There are a few other immutable objects in Ruby, e.g. `false`, `true`, `nil`.

In comparison, the string will be handled as a discrete ruby object that can be changed and is not immutable. It thus behaves like the majority of all the other Ruby objects you will encounter.

# linux - Linux Mint 中的“RUN”不起作用

> ID：15546800
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:54:32.223
> 
> 标签：linux, bash, terminal, linux-mint, zenity

当我双击一个可执行文件时，单击运行后它不会运行。我用几个.sh文件和一些下载的软件试过了，有人知道为什么吗？

我需要运行的特定 .sh 文件是 zenity 菜单。当我在终端尝试时，它只是说

```
sh: Can't open TaskC.sh 
```

那是在我使用之后

```
sh TaskC.sh 
```

在文件中，我使用属性使其可执行并使用

```
chmod 755 TaskC.sh 
```

1.  有谁知道我如何在没有终端的情况下运行它？
2.  任何人都知道我怎样才能让 .sh 在终端中运行？

我的代码只是以防万一这就是问题所在

```
#!/bin/bash
#GUI for TaskB menu
chmod 755 TaskC.sh
    temp='mktemp -t temp.XXXXXX'
    temp2='mktemp -t temp2.XXXXX'

function software {
sudo get-apt install gparted gnome-desk-utility
zenity --text-info --title "Install Software" --filename=$temp
--width 750 --height 10}

function create {
touch > Desktop/CET103Demo.txt
zenity --text-info --Title "Create CET103Demo.txt" --filename=$temp
--width 300 --height 500}

function delete {
rm Desktop/CET103Demo.txt
zenity --text-info --title "Remove CET103Demo.txt" --filename=$temp
--width 300 --height 500}

function search {
grep -H -r "BASH" /home/mintuser/.profile
zenity --text-info --Title "Search BASH" --filename=$temp
--width 300 --height 500}

while [ 1 ]
do

zenity --list --radiolist --title "TaskC Menu" --column "Select" --column "Menu     Selection"
FALSE "Install Software" FALSE "Create file" FALSE "Remove File" FALSE "Search BASH"   False  "Exit"   > $temp2
if [ $? -eq 1 ]
then
break fi
    selection ='cat $temp2'
    case $selection in
    "Install Software")
        software;;
    "Create File")
        create;;
    "Remove File")
        delete;;
    "Search BASH")
        search;;
    Exit)
break ;; *)
zenity --info "Sorry, invalid selection" esac
done $ 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:59:27.803

尝试`./TaskC.sh`

当然，您必须与脚本位于同一目录中。如果您想从任何地方执行它，您需要将它添加到您的 PATH 中（请参阅 KevinDTimm 的答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:56:04.700

要解决终端窗口中的问题：

问题是您的 PATH 不正确，您必须包含当前目录

第一个修复是运行`sh ./TaskC.sh`- 每次在当前目录中运行某些东西时都必须这样做

第二个是设置你的PATH `export PATH=$PATH:.`- 这将为你的shell的当前调用修复它。将该行添加到 .bashrc 以便在您每次登录时进行设置

# macos - 将 NSTextView 滚动到底部

> ID：15546808
> 
> 赞同：14
> 
> 时间：2013-03-21T11:55:01.843
> 
> 标签：macos, cocoa, nstextview

我正在为 OS X 制作一个小服务器应用程序，并且正在使用 NSTextView 来记录有关已连接客户端的一些信息。

每当我需要记录某些内容时，我都会以这种方式将新消息附加到 NSTextView 的文本中：

```
- (void)logMessage:(NSString *)message
{
    if (message) {
        self.textView.string = [self.textView.string stringByAppendingFormat:@"%@\n",message];
    }
} 
```

在此之后，我希望 NSTextField （或者我应该说包含它的 NSClipView ）向下滚动以显示其文本的最后一行（显然它应该仅在最后一行不可见时滚动，事实上如果那时新行是我记录的第一行，它已经在屏幕上，因此无需向下滚动）。

我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T12:40:37.380

找到解决方案：

```
- (void)logMessage:(NSString *)message
{
    if (message) {
        [self appendMessage:message];
    }
}

- (void)appendMessage:(NSString *)message
{
    NSString *messageWithNewLine = [message stringByAppendingString:@"\n"];

    // Smart Scrolling
    BOOL scroll = (NSMaxY(self.textView.visibleRect) == NSMaxY(self.textView.bounds));

    // Append string to textview
    [self.textView.textStorage appendAttributedString:[[NSAttributedString alloc]initWithString:messageWithNewLine]];

    if (scroll) // Scroll to end of the textview contents
        [self.textView scrollRangeToVisible: NSMakeRange(self.textView.string.length, 0)];
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-12T15:39:01.097

从 OS 10.6 开始，它就像`nsTextView.scrollToEndOfDocument(self)`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-24T13:37:30.907

**迅捷 4 + 5**

```
let smartScroll = self.textView.visibleRect.maxY == self.textView.bounds.maxY

self.textView.textStorage?.append("new text")

if smartScroll{
    self.textView.scrollToEndOfDocument(self)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-24T23:34:06.273

我已经搞砸了一段时间，因为我无法让它可靠地工作。我终于让我的代码工作了，所以我想把它作为回复发布。

我的解决方案允许您手动滚动，同时将输出添加到视图中。一旦你滚动到 NSTextView 的绝对底部，自动滚动就会恢复（如果启用的话）。

首先是一个类别，仅在需要时才#import 这个...

FSScrollToBottomExtensions.h：

```
@interface NSView (FSScrollToBottomExtensions)
- (float)distanceToBottom;
- (BOOL)isAtBottom;
- (void)scrollToBottom;
@end 
```

FSScrollToBottomExtensions.m：

```
@implementation NSView (FSScrollToBottomExtensions)
- (float)distanceToBottom
{
    NSRect  visRect;
    NSRect  boundsRect;

    visRect = [self visibleRect];
    boundsRect = [self bounds];
    return(NSMaxY(visRect) - NSMaxY(boundsRect));
}

// Apple's suggestion did not work for me.
- (BOOL)isAtBottom
{
    return([self distanceToBottom] == 0.0);
}

// The scrollToBottom method provided by Apple seems unreliable, so I wrote this one
- (void)scrollToBottom
{
    NSPoint     pt;
    id          scrollView;
    id          clipView;

    pt.x = 0;
    pt.y = 100000000000.0;

    scrollView = [self enclosingScrollView];
    clipView = [scrollView contentView];

    pt = [clipView constrainScrollPoint:pt];
    [clipView scrollToPoint:pt];
    [scrollView reflectScrolledClipView:clipView];
}
@end 
```

...为自己创建一个“OutputView”，它是 NSTextView 的子类：

FSOutputView.h：

```
@interface FSOutputView : NSTextView
{
    BOOL                scrollToBottomPending;
} 
```

FSOutputView.m：

```
@implementation FSOutputView

- (id)setup
{
    ...
    return(self);
}

- (id)initWithCoder:(NSCoder *)aCoder
{
    return([[super initWithCoder:aCoder] setup]);
}

- (id)initWithFrame:(NSRect)aFrame textContainer:(NSTextContainer *)aTextContainer
{
    return([[super initWithFrame:aFrame textContainer:aTextContainer] setup]);
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (void)awakeFromNib
{
    NSNotificationCenter    *notificationCenter;
    NSView                  *view;

    // viewBoundsDidChange catches scrolling that happens when the caret
    // moves, and scrolling caused by pressing the scrollbar arrows.
    view = [self superview];
    [notificationCenter addObserver:self
    selector:@selector(viewBoundsDidChangeNotification:)
        name:NSViewBoundsDidChangeNotification object:view];
    [view setPostsBoundsChangedNotifications:YES];

    // viewFrameDidChange catches scrolling that happens because text
    // is inserted or deleted.
    // it also catches situations, where window resizing causes changes.
    [notificationCenter addObserver:self
        selector:@selector(viewFrameDidChangeNotification:)
        name:NSViewFrameDidChangeNotification object:self];
    [self setPostsFrameChangedNotifications:YES];

}

- (void)handleScrollToBottom
{
    if(scrollToBottomPending)
    {
        scrollToBottomPending = NO;
        [self scrollToBottom];
    }
}

- (void)viewBoundsDidChangeNotification:(NSNotification *)aNotification
{
    [self handleScrollToBottom];
}

- (void)viewFrameDidChangeNotification:(NSNotification *)aNotification
{
    [self handleScrollToBottom];
}

- (void)outputAttributedString:(NSAttributedString *)aAttributedString
    flags:(int)aFlags
{
    NSRange                     range;
    BOOL                        wasAtBottom;

    if(aAttributedString)
    {
        wasAtBottom = [self isAtBottom];

        range = [self selectedRange];
        if(aFlags & FSAppendString)
        {
            range = NSMakeRange([[self textStorage] length], 0);
        }
        if([self shouldChangeTextInRange:range
            replacementString:[aAttributedString string]])
        {
            [[self textStorage] beginEditing];
            [[self textStorage] replaceCharactersInRange:range
                withAttributedString:aAttributedString];
            [[self textStorage] endEditing];
        }

        range.location += [aAttributedString length];
        range.length = 0;
        if(!(aFlags & FSAppendString))
        {
            [self setSelectedRange:range];
        }

        if(wasAtBottom || (aFlags & FSForceScroll))
        {
            scrollToBottomPending = YES;
        }
    }
}
@end 
```

...您可以向此类添加更多便捷方法（我已将其剥离），以便您可以输出格式化的字符串。

```
- (void)outputString:(NSString *)aFormatString arguments:(va_list)aArguments attributeKey:(NSString *)aKey flags:(int)aFlags
{
    NSMutableAttributedString   *str;

    str = [... generate attributed string from parameters ...];
    [self outputAttributedString:str flags:aFlags];
}

- (void)outputLineWithFormat:(NSString *)aFormatString, ...
{
    va_list         args;
    va_start(args, aFormatString);
    [self outputString:aFormatString arguments:args attributeKey:NULL flags:FSAddNewLine];
    va_end(args);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-22T21:19:54.353

我有一些自定义的 NSTextView 和自定义输入法，所以我的选择是使用：

```
self.scrollView.contentView.scroll(NSPoint(x: 1, y: self.textView.frame.size.height)) 
```

# excel - 具有多个条件的 Vlookup

> ID：15546812
> 
> 赞同：0
> 
> 时间：2013-03-21T11:55:07.610
> 
> 标签：excel, excel-formula

我已经检查了以前关于如何使用多个条件进行 vlookup 的帖子，但是当我将它应用到我的工作簿时，我得到一个*"#N/A"*。对于我做错的任何反馈，我将不胜感激。

问题（简单示例）：

`A1`=`Vlookup(B1&C1,D:E,2,False)`

*   `B1`= 123
*   `C1`= 45
*   `D1`= 12345
*   `E1`=“好”

我希望公式返回“好”的值 - 但是我目前得到“#N/A”。

感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:01:07.387

连接是一个字符串。D1 中的值是数字。“12345”<> 12345。那是你的问题。

如果您只处理正在连接的数值，这将通过将连接的字符串转换为数值来修复它，该数值应返回匹配项。

`=VLOOKUP((B1&C1)*1,D:E,2,False)`

如果您在 B&C 列中处理字符串和/或数字类型值的混合，这可能需要一些额外的微调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:02:51.980

If you concatenate two cells with `&`, Excel converts numbers to text. And internally, the text `12345` is not the same as the value `12345`.

Thus you can solve your problem with one of these options:

1.  Convert the text back to a number - either using `=VLOOKUP(VALUE(B1&C1),...` or `=VLOOKUP((B1&C1)*1,...`
2.  Convert column D to text (using the `TEXT` function
3.  Use arithmetic instead of concatenation: `=VLOOKUP(B1*100+C1,...`

# python - 使用python将文本转换为字典

> ID：15546815
> 
> 赞同：0
> 
> 时间：2013-03-21T11:55:11.420
> 
> 标签：python, parsing, converter

我有一个文本（sercmd 命令的输出）

```
{
    SET_NO: 9
    SET: {
            SET_ID: 7
            DEST: {
                    URI: sip:host2:5060
                    FLAGS: IP
                    PRIORITY: 0
                    ATTRS:
            }
            DEST: {
                    URI: sip:host1:5060
                    FLAGS: AP
                    PRIORITY: 0
                    ATTRS:
            }
... 
```

将这样的输出转换为字典的最佳方法是什么？这是使用正则表达式和添加引号的唯一方法吗？我找了一会儿，没有找到解决方案，所以希望它不是重复的

实际上我需要为每个目标生成字符串

```
<FLAGS> <SET_ID> <URI> 
```

喜欢

```
ap 7 sip:host1:5060 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:55:01.227

从`sercmd`我不认为这是一种特定的特定格式的来源来看`json`，您可以使用专用的解析器进行解析，因此您必须自己制作。

但是，由于[帮助](https://github.com/flowroute/kamailio/blob/master/utils/sercmd/EXAMPLES)表明您可以生成更易于解析（但不太美观）的输出，例如[CSV](http://docs.python.org/2/library/csv.html)，您应该研究一下，如果您可以运行`sercmd`并且不会被一些现有的输出文件卡住。

# c++ - 循环交换的性能冲突

> ID：15546818
> 
> 赞同：0
> 
> 时间：2013-03-21T11:55:13.850
> 
> 标签：c++, performance, caching, loops

```
#include <windows.h>

double PCFreq = 0.0;
__int64 CounterStart = 0;

void StartCounter()
{
    LARGE_INTEGER li;
    if(!QueryPerformanceFrequency(&li))
    cout << "QueryPerformanceFrequency failed!\n";

    PCFreq = double(li.QuadPart)/1000.0;

    QueryPerformanceCounter(&li);
    CounterStart = li.QuadPart;
}
double GetCounter()
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return double(li.QuadPart-CounterStart)/PCFreq;
}

int main()
{
    StartCounter();
int i,j;
    static int x[4000][4000];
#if 1 //Version 1
    for (i = 0; i < 4000; i++) 
    {
        for (j = 0; j < 4000; j++) 
        {
            x[j][i] = i + j; 
        }
    }
#else //Version 2
    for (j = 0; j < 4000; j++) 
    {
        for (i = 0; i < 4000; i++) 
        {
            x[j][i] = i + j; 
        }
    }
#endif    
    cout << GetCounter() <<"\n";
    return 0;
} 
```

我已经在 Win7-32​​bit 机器上的 VS2012 中尝试过上面的代码。

版本 1 的执行时间为 0.200 秒，版本 2 的执行时间为 0.071 秒。

数组只是内存的连续区域，C++ 以 Row 主要方式存储数组。当您请求数组中的元素时，您的操作系统可能会将内存页面引入包含该元素的缓存中。但是，由于接下来的几个元素也在该页面上（因为它们是连续的），因此下一个访问将已经在**Version-1**的缓存中！

所以，Version-1 必须要快。

但结果显示版本 2 速度很快。

请解释结果冲突的原因。

# list - Scala错误：值排序不是List的成员

> ID：15546828
> 
> 赞同：8
> 
> 时间：2013-03-21T11:55:31.507
> 
> 标签：list, scala, sorting

按照[http://www.simplyscala.com/](http://www.simplyscala.com/)上的一个简单示例，我得到：

```
scala> val lst=List(1,7,2,8,5,6,3,9,14,12,4,10)
lst: List[Int] = List(1, 7, 2, 8, 5, 6, 3, 9, 14, 12, 4, 10)

scala> lst.sort(_>_)
<console>:9: error: value sort is not a member of List[Int]
      lst.sort(_>_) 
```

怎么了？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T11:59:17.853

SimplyScala 很长一段时间都没有更新：[.sort](http://lampsvn.epfl.ch/trac/scala/browser/scala/tags/R_2_8_0_final/src//library/scala/collection/immutable/List.scala#L310)在 2.8.0 中被弃用，并在以后的版本中被删除。相反，您必须使用`sortWith`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:58:31.057

`sort`实际上没有在类中定义[`List`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)。你应该`sortWith`在你的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T10:43:44.220

如果您正在运行新版本，例如 scala 2.11.8，您应该在此处查看文档[scala 2.11.8 lib API](http://www.scala-lang.org/api/2.11.8/#package)。

# jquery - 带有多个过滤器的 jQuery 结果列表

> ID：15546832
> 
> 赞同：1
> 
> 时间：2013-03-21T11:55:36.783
> 
> 标签：jquery, filtering

我正在尝试在列表中组合一个过滤器（从数据库生成），但我感觉我正在走一条复杂的道路。或者更确切地说，我被困住了，不知道如何从这里出发。到目前为止我所拥有的如下所示。

**过滤器部分：**

```
<div id="searchfilter">
  <form id="filterform" name="form1" method="post" action="">
    <p>Search Filters</p>
    <p>By Area of Expertise</p>
      <ul id="funtion">
        <li>
          <label>
            <span>All areas of expertise</span>
            <input class="resetfilter" type="checkbox" name="cbxFunction" id="cbxFunction_0" value="all" checked="checked" disabled="disabled" />
          </label>
        </li>
        <li>
          <label>
            <span>Administration</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_1" value="administration" />
          </label>
        </li>
        <li>
          <label>
            <span>Animal Health</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_2" value="animal-health" />
          </label>
        </li>
        <li>
          <label>
            <span>Creative</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_3" value="creative" />
          </label>
        </li>
        <li>
          <label>
            <span>Marketing</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_3" value="marketing" />
          </label>
        </li>
        <li>
          <label>
            <span>Information Technology</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_3" value="information-technology" />
          </label>
        </li>
        <li>
          <label>
            <span>Research &amp; Development</span>
            <input class="filter" type="checkbox" name="cbxFunction" id="cbxFunction_3" value="research-and-development" />
          </label>
        </li>
      </ul>

      <p>By Location</p>

      <ul id="country">
        <li>
          <label>
            <span>All countries</span>
            <input class="resetfilter" type="checkbox" name="cbxLocation" id="cbxLocation_0" value="all" checked="checked" disabled="disabled" />
          </label>
        </li>
        <li>
          <label>
            <span>Malaysia</span>
            <input class="filter" type="checkbox" name="cbxLocation" id="cbxLocation_1" value="malaysia" />
          </label>
        </li>
        <li>
          <label>
            <span>The Netherlands</span>
            <input class="filter" type="checkbox" name="cbxLocation" id="cbxLocation_1" value="the-netherlands" />
          </label>
        </li>
        <li>
          <label>
            <span>United Kingdom</span>
            <input class="filter" type="checkbox" name="cbxLocation" id="cbxLocation_2" value="united-kingdom" />
          </label>
        </li>
      </ul>
    </form>
  </div> 
```

**结果部分：**

```
 <div>
    <h3>Current Vacancies</h3>
    <ul class="pagelink">
      <li class="job-listing function country administration the-netherlands">
        Assistant Regulatory Affairs Manager<br />
        Administration, The Netherlands
      </li>
      <li class="job-listing function country animal-health united-kingdom">
        Clinical Research Associate<br />
        Animal Health, United Kingdom
      </li>
      <li class="job-listing function country creative malaysia">
        Copywriter<br />
        Creative, Malaysia
      </li>
      <li class="job-listing function country administration malaysia">
        Corporate Communications Manager<br />
        Administration, Malaysia
      </li>
      <li class="job-listing function country marketing the-netherlands">
        Customer Service Associate<br />
        Marketing, The Netherlands
      </li>
      <li class="job-listing function country research-and-development the-netherlands">
        Emerging Technology Specialist<br />
        Research &amp; Development, The Netherlands
      </li>
      <li class="job-listing function country information-technology united-kingdom">
        Legal Counsel - Intellectual Property (IP)<br />
        Information Technology, United Kingdom
      </li>
      <li class="job-listing function country information-technology the-netherlands">
        Legal Counsel – Drafting Intelectual Property (IP) Related Agreements<br />
        Information Technology, The Netherlands
      </li>
    </ul>
  </div> 
```

**Javascript：**

```
$('.filter').change(function() {
    $filter = $(this).val();
    $filtertype = $(this).parents('ul').attr('id');
    $(this).parents('ul').find('input.resetfilter:checkbox').attr('checked', false);
    $(this).parents('ul').find('input.resetfilter:checkbox').removeAttr("disabled");

    if ($(this).is(':checked')) {
            $('.pagelink').find('li.'+$filter).show();
    }
    else
    {
            $('.pagelink').find('li.'+$filter).hide();
    }
});

$('.resetfilter').change(function() {
    $filtertype = $(this).parents('ul').attr('id');
    if ($(this).is(':checked')) {
            $('.pagelink').find('li.'+$filtertype).show();
            $(this).parents('ul').find('input.filter:checkbox').attr('checked', false);
            $(this).parents('ul').find('input.resetfilter:checkbox').attr('disabled', true);
    }
}); 
```

我想在这里完成的是能够从两个过滤器列表中的任何一个中选择任何值并相应地显示结果。我特别卡住的部分是，如果我选择两个过滤器列表之一的“全部”值，我不确定如何在保持“另一个列表”的活动过滤器的同时获得正确的结果显示考虑到。

我猜我可能不得不查看数组，但我不知道在这种情况下如何去做。

非常感谢任何正确方向的指针！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:48:27.283

```
$('.filter').change(function() {

  // Get all checked filters...
  var $allCheckedFilters = $('input.filter:checked');
  var checkedValues = [];

  // Iterate and build array containing all checked values...
  $allCheckedFilters.each(function(index, element){
    checkedValues.push($(this).val());
  })

  // Build string to use as selector...
  var classNameStr = checkedValues.join('.');    

  // Hide all listings...
  $('.job-listing').hide();

  // Get items with all classnames and show them...
  $('li.' + classNameStr).show();

});

$('.resetfilter').change(function() {
    // Get the parent UL...
    var $parentUl = $(this).parents('ul');

    // Get the checkboxes from the section the checkbox we just checked was in...
    var $thisSectionCheckboxes = $parentUl.find('input.filter');
    if($(this).is(':checked')) {
      // Check all checkboxes in the current section...
      $thisSectionCheckboxes.attr('checked', 'checked');
    }else{
      // User unchecked the All checkbox. So uncheck all checkboxes in this section
      $thisSectionCheckboxes.removeAttr('checked');
    }

    // Let the change handler we added above handle the show and hide of the relevant sections...
    $thisSectionCheckboxes.first().trigger('change');
}); 
```

# ruby-on-rails-3 - rails3_acts_as_paranoid 和carrierwave：保持图像软删除

> ID：15546834
> 
> 赞同：1
> 
> 时间：2013-03-21T11:55:48.057
> 
> 标签：ruby-on-rails-3, file-upload, carrierwave, acts-as-paranoid

我正在使用两个 gem [rails3_acts_as_paranoid](https://github.com/goncalossilva/rails3_acts_as_paranoid)和[carrierwave](https://github.com/jnicklas/carrierwave)。偏执狂的软删除、硬删除和恢复功能工作正常。但是，当我软删除一个项目时，存储的图像会被载波删除。

如何配置carrierwave或acts_as_paranoid，以便仅在硬删除时删除图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:08:43.203

在模型中，在 mount_uploader 之后添加以下行：

```
mount_uploader :image, ImageUploader
skip_callback :commit, :after, :remove_image! 
```

注意：它不会影响其他提交回调。例如：`after_commit :do_smth`仍然可以工作。

`@model_instance.remove_image!`如果您想在硬删除时删除图像，您可以调用

# wordpress - 如何在 WordPress 中创建类别菜单？

> ID：15546837
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:55:50.197
> 
> 标签：wordpress, content-management-system, blogs

我是 WordPress 世界的新手（之前我一直使用 Joomla 和其他一些旧的 CMS）

现在我正在测试 WordPress，我对如何在我的 WP 站点中创建导航菜单有一些疑问。

这是我的测试站点（此时没有内容，只有一个模板）：[http ://www.scorejava.com/WPTest/](http://www.scorejava.com/WPTest/)

我计划创建按类别组织的文章，我会有一个水平的顶部菜单，比如这个 WP 博客：http: [//viralpatel.net/blogs/](http://viralpatel.net/blogs/)

正如您在第二个 WP 站点中看到的那样，有一个水平顶部菜单，其中包含一些声音，例如**“Java”**，单击此声音会出现一个显示所有 Java 帖子预览的页面。

如您所见，此菜单也可与子菜单一起使用，例如，在 Java 上移动鼠标光标会出现“Java EE”子语音。

我该怎么做才能在我的 Word Press 中有这样的东西？

如果我想在我的右侧边栏中有一个类似的垂直菜单？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:11:43.887

只需使用仪表板中的“菜单”屏幕（当您在那里时，单击“屏幕选项”并启用您想要使用的所有可能的项目来源）。创建菜单后，将其分配给主题为顶部菜单指定的任何区域。

如果要将其添加到侧边栏，只需使用“小部件”屏幕并选择“自定义菜单”项。

我认为如果您阅读 Codex 中的一些介绍性文档会有所帮助。

# php - 通过 CloudFlare 下载 gzip 文件

> ID：15546838
> 
> 赞同：1
> 
> 时间：2013-03-21T11:55:52.510
> 
> 标签：php, http-headers, gzip, cloudflare

我有一个 PHP 文件保护脚本：

.htaccess

```
RewriteEngine on
RewriteRule ^(.*).(zip|tgz)$ ../wp-file-protector.php?file=$1.$2 [QSA] 
```

wp-file-protector.php

```
<?php

global $wpdb;
/** Make sure that the WordPress bootstrap has run before continuing. */
require( dirname(__FILE__) . '/wp-load.php' );

$current_user = wp_get_current_user();
if ($current_user->ID > 0){

  $order = $_GET['order'];
  $items = new_get_order_by_id_and_user($order, $current_user->ID);
  if($items != false){
    $file_enabled = true;
//Some authentication
    $filepath = dirname(__FILE__).'/../downloads/'.$_GET['file'];
    if($file_enabled && file_exists($filepath)){
      $filename = basename($filepath);
      $extension = end(explode('.', $filename));
      ob_clean();
      // http headers for zip downloads
      header("Pragma: public");
      header("Expires: 0");
      header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
      header("Cache-Control: public");
      header("Content-Description: File Transfer");
      if($extension == 'tgz'){
        header("Content-Type: application/gzip");
      }else{
        header("Content-type: application/octet-stream");
      }
      header("Content-Disposition: attachment; filename=\"".$filename."\"");
      header("Content-Transfer-Encoding: binary");
      header("Content-Length: ".filesize($filepath));
      ob_end_flush();
      @readfile($filepath);
    }
  }
} 
```

我可以很好地处理压缩文件和其他文件。gzip压缩文件出现问题。我得到了意想不到的结果（Firefox 下载和打开操作的结果也不同）。

我想我需要一些好的 gzip 文件头。我应该使用什么？

也很高兴知道请求是通过 Cloudflare 服务运行的，所以也许我应该发送一些标头，告诉 cloudflare 服务器不要压缩它。

我被困住了:(

## 更新#1

```
header("Content-type: application/x-gzip"); 
```

这也行不通。当我在 Firefox 中选择保存时，它会在打开时显示已损坏。当我选择打开时，我得到了一个没有扩展名的文件，但似乎是 tar，因为我可以更深入地进入目录。

# haskell - 为代数数据类型定义 TH Lift 实例

> ID：15546850
> 
> 赞同：7
> 
> 时间：2013-03-21T11:56:35.453
> 
> 标签：haskell, template-haskell

假设我有一个具有多个构造函数的代数数据类型，例如

```
data Animal a = Mouse a | Beaver a | Rabbit a 
```

我将如何有效地创建`Lift`实例？最简单的方法是

```
instance (Lift a) => Lift (Animal a) where
      lift (Mouse  x) = [| Mouse  x |]
      lift (Beaver x) = [| Beaver x |]
      lift (Rabbit x) = [| Rabbit x |] 
```

虽然这是非常多余的。当然，我不能直接将不同的动物抽象出来`lift x = [| x |]`，尽管从概念上讲这与我想要实现的目标相似。有没有办法在 TH 中这样做，这样我就不必为每个数据构造函数再次编写同一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:04:48.140

这是 th-lift 包的目的，它提供了这个功能：[http ://hackage.haskell.org/package/th-lift](http://hackage.haskell.org/package/th-lift)

# google-apps-script - CalendarApp.getAllCalendars() 返回空数组

> ID：15546854
> 
> 赞同：0
> 
> 时间：2013-03-21T11:56:41.770
> 
> 标签：google-apps-script

我通过客户端上的调用在服务器上调用 CalendarApp.getAllCalendars()

```
/*- server  code-*/
function getCalendars(){
 return CalendarApp.getAllCalendars();
}
/*-*/

/*-client code-*/
 google.script.run.withSuccessHandler(getCalendarsHandler).getCalendars();

getCalendarsHandler=function(cals){
 console.log(JSON.stringify(cals));
};
/*-*/ 
```

控制台显示... [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]

getCalendarsHandler 接收到正确长度的数组（即我也可以访问的日历数）但是该数组中的每个元素都是空的，有人能告诉我我做错了什么吗？

谢谢

那天晚些时候.....

在进一步调查中，看起来我必须在将结构传递给客户端之前在服务器上构建结构。我期待类似于 gapi.client.calendar.calendarList.list(); 但看起来我必须建立自己的 - 比如......

```
function getCalendars()
{
 var cal,i,resp;
 resp=[];
 cal=CalendarApp.getAllCalendars();
 for(i=0;i<cal.length;i++)
 {
  resp[i]={
   "name":cal[i].getName(),
   "id":cal[i].getId()
    ...
  }
 }
 return resp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:34:05.857

那天晚些时候.....

在进一步调查中，看起来我必须在将结构传递给客户端之前在服务器上构建结构。我期待类似于 gapi.client.calendar.calendarList.list(); 但看起来我必须建立自己的 - 比如......

```
function getCalendars()
{
 var cal,i,resp;
 resp=[];
 cal=CalendarApp.getAllCalendars();
 for(i=0;i<cal.length;i++)
 {
  resp[i]={
   "name":cal[i].getName(),
   "id":cal[i].getId()
    ...
  }
 }
 return resp;
} 
```

# spring-mvc - 使用 Spring MVC 编码

> ID：15546870
> 
> 赞同：1
> 
> 时间：2013-03-21T11:57:18.407
> 
> 标签：spring-mvc, encoding

我正在使用 Spring MVC 来处理我的请求，我需要发送一个字符串来进行搜索。例如，我正在发送 ，`Caçapava`但它正在转换为 this`CaÃ§apva`的某个地方，我在寻找我的编码的任何地方都设置为`UTF-8`。我`Jackson`用来处理我的 JSON 并`ExtJs`构建我的视图。我的要求没问题，所以问题不在于我的`ExtJs`要求。

请求参数：

`Query String Parameters`

`_dc:1363866108143`

`nomeCidade:Caçapava`

`page:1`

`start:0`

`limit:50`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:56:09.573

基本上我使用[CharacterEncodingFilter](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/filter/CharacterEncodingFilter.html)来强制 Spring 使用 UTF-8（`web.xml`）：

```
<filter>
    <filter-name>characterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>characterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

但是，它也可能取决于您的服务器。[这](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)是关于tomcat的讨论。参数见[这里](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)。`URIEncoding`

# sql - SQL子查询来自同一个表的所有数据

> ID：15546879
> 
> 赞同：2
> 
> 时间：2013-03-21T11:57:36.867
> 
> 标签：sql

我有一个表，我希望始终显示一个字段（帐户），然后子查询计数或总和与标准。

例子：

```
select  ndhist_acct_nbr,    
    (select count(ndhist_acct_nbr) from dbo.nd_history where ndhist_type = '30' 
      and ndhist_rsn = '0' and ndhist_trcd = 'NF*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013') as NSF_TOTAL,
    (select sum(ndhist_amt) from dbo.nd_history where ndhist_type = '30' 
      and ndhist_rsn = '98' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013') as SIG_SPEND,
    (select count(ndhist_acct_nbr) from dbo.nd_history where ndhist_type = '30' 
      and ndhist_rsn = '23' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013') as PIN_TRANS,
    (select count(ndhist_acct_nbr) from dbo.nd_history where ndhist_type = '30' 
      and ndhist_rsn = '21' and ndhist_trcd = 'SC*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013') as FOREIGN_AMT_FEE
from    dbo.nd_history
group by ndhist_acct_nbr 
```

问题是结果——所有的帐号都显示了，但计数/总和字段都重复了数据。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:08:35.583

尝试：

```
select  ndhist_acct_nbr,    
        count(case when ndhist_type = '30' and ndhist_rsn = '0' and ndhist_trcd = 'NF*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013'
                   then ndhist_acct_nbr end) as NSF_TOTAL,
        sum(case when ndhist_type = '30' and ndhist_rsn = '98' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013'
                 then ndhist_amt end) as SIG_SPEND,
        count(case when ndhist_type = '30' and ndhist_rsn = '23' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013'
                   then ndhist_acct_nbr end) as PIN_TRANS,
        count(case when ndhist_type = '30' and ndhist_rsn = '21' and ndhist_trcd = 'SC*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013'
                   then ndhist_acct_nbr end) as FOREIGN_AMT_FEE
from    dbo.nd_history
group by ndhist_acct_nbr 
```

您可以通过将整个查询放入内联查询中然后从中选择来使用结果中的派生列 - 如下所示：

```
select sq.*, 
       NSF_TOTAL*5 + SIG_SPEND*0.10 + PIN_TRANS*0.05 + FOREIGN_ATM_FEE as TOTAL_INCOME
from
(select  ndhist_acct_nbr,    
         count(case when ndhist_type = '30' and ndhist_rsn = '0' and ndhist_trcd = 'NF*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013'
                    then ndhist_acct_nbr end) as NSF_TOTAL,
         sum(case when ndhist_type = '30' and ndhist_rsn = '98' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013'
                  then ndhist_amt end) as SIG_SPEND,
         count(case when ndhist_type = '30' and ndhist_rsn = '23' and ndhist_trcd = 'TW0' and ndhist_ref_type = '11' and ndhist_dt >= '03/01/2013'
                    then ndhist_acct_nbr end) as PIN_TRANS,
         count(case when ndhist_type = '30' and ndhist_rsn = '21' and ndhist_trcd = 'SC*' and ndhist_ref_type = '0' and ndhist_dt >= '03/01/2013'
                    then ndhist_acct_nbr end) as FOREIGN_AMT_FEE
 from    dbo.nd_history
 group by ndhist_acct_nbr) sq 
```

如果您使用支持 CTE 的 RDBMS（例如 Oracle、PostgreSQL 或 SQLServer），这可以通过 CTE 更优雅地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:08:57.633

您的子查询是独立的 - 它们不`ndhist_acct_nbr`以任何方式依赖于字段，因此结果始终相同。

此外，这种技术（对每一行输出使用这么多子查询）是一个坏主意。您应该简化查询，而不是`count distinct`和子查询，制作`sum(case when ...`子句。

# algorithm - 秩相关算法

> ID：15546882
> 
> 赞同：1
> 
> 时间：2013-03-21T11:57:39.710
> 
> 标签：algorithm, math, ranking, correlation

我有一个朋友排行榜。然后，我得到更多相同朋友但排名不同的列表。是否有算法来检查哪个列表最接近原始排名？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:53:08.593

这可能取决于您对两个排名之间“距离”的衡量标准。

例如，如果我们定义

`dist(R1, R2) = Sum abs(position of i in R1 - position of i in R2), over all i`

然后您可以将每个`i`排名中的第一个位置存储在一个数组中

IE

`pos[Peter] = 3`

表示`Peter`在您的排名中显示为第三个朋友。

通过使用 计算上面的总和，可以在线性时间内找到最接近的排名`pos`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:55:08.907

我认为您应该比较它们之间的等级距离，但使用权重。因为例如排名第1的用户在第10位，这是一个很大的差异，但是如果排名第101位的用户在第110位，则变化不大。因此，您应该对排名较高的用户的差异设置更高的系数。

# javascript - 无法读取 null (googlemaps) 的属性 - 即使我确保页面已加载

> ID：15546884
> 
> 赞同：1
> 
> 时间：2013-03-21T11:57:43.330
> 
> 标签：javascript, google-maps

我有一个用于谷歌地图的脚本，它为我呈现预定坐标的地图，使用搜索中的标记数组中的信息来呈现带有当前用户信息等的信息框，但我有一个奇怪的问题。该地图大部分时间都可以正常工作，但过于频繁（尤其是最近两天）。我收到错误消息：“无法读取 null 的属性”。据我从阅读其他线程中了解到，问题可能是在尝试添加地图（或 getelementbyId）之前尚未创建包含地图的 div，这就是我添加 domlistener 以确保页面已加载的原因。知道问题可能出在哪里吗？因为我现在很茫然:(

```
<script type="text/javascript">
function initialize() {
    var markers = <?php echo json_encode($markers); ?>;

    var myLatLng = new google.maps.LatLng( <?= $search->area_coords; ?> );

    var mapOptions = {
        center:myLatLng,
        zoom:12,
        maxZoom:14,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

    // Custom MarkerImage - To be designed
    // var markerImage = 'images/markerImage.png';

    var iconBase = 'http://www.googlemapsmarkers.com/v1/H/0099FF/';

    var infowindow = new google.maps.InfoWindow({
        maxWidth:150
    });

    for (i = 0; i < markers.length; i++) {

        // Array to contain all the markers for clickevents etc.
        var markersArray = [];
        var position = new google.maps.LatLng(markers[i]['lat'], markers[i]['long']);
        var contentString = '<div class="marker_info"><div class="float_left"><img height="40" width="40" src="' + markers[i]['picture'] + '"></div>' +
                '<div><a href="profile.php?userid=' + markers[i]['id'] + '">' + markers[i]['title'] +
                '</a></div><br><em>' + markers[i]['price'] + ' pounds</em></div>';

        var marker = new google.maps.Marker({
            position:position,
            map:map,
            icon:iconBase,
            htmlCode:contentString
        });

        google.maps.event.addListener(marker, 'click', function () {
            infowindow.setContent(this.htmlCode);
            infowindow.open(map, this);
        });
        markersArray.push(marker);
    }
}

google.maps.event.addDomListener(window, "load", initialize); 
```

错误消息给了我第 246 行，如果它检查正确应该是指：

```
 var myLatLng = new google.maps.LatLng( <?= $search->area_coords; ?> ); 
```

*   但我不是 100% 的，因为浏览器可能会以不同的方式读取文档，还是我错了？

map_canvas div 是在第 100 行周围创建的，尽可能是标准的（我无法在此处显示 HTML，但它只是任何普通的 div）：

```
 <div class="map" id="map_canvas">
    <!-- DIV that contains the Map of users -->
 </div> 
```

# google-chrome - 从 chrome 调试 Ember.js

> ID：15546890
> 
> 赞同：5
> 
> 时间：2013-03-21T11:57:49.250
> 
> 标签：google-chrome, ember.js, google-chrome-devtools

当我尝试从 chrome 浏览器调试 Ember.js 时，它的 application.js 断点只存在，其余部分在页面刷新时通过按 f5 删除。

我在控制台选项卡中启用了“记录 XMLHTTP 请求”和“在导航时保留日志”。问题仍然存在..

有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T19:27:54.297

作为替代方案，您可以在代码中设置断点。javascript:

```
debugger; 
```

车把：

```
{{debugger}} 
```

# javascript - JQM页面更改后jQuery验证插件不起作用

> ID：15546894
> 
> 赞同：2
> 
> 时间：2013-03-21T11:57:54.767
> 
> 标签：javascript, html, web-applications, jquery-mobile, jquery-validate

我目前正在开发一个移动 html5 项目。我正在使用[这个](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)jQuery 验证插件来验证带有表单的登录屏幕。我还在使用带有单页模板的 jQuery Mobile（我在单独的 html 文件中有页面，但是在更改页面时，JQM 会读取文件并将新页面内容注入 DOM）。我强制 JQM 在应用程序中的每个页面更改中再次重新加载页面：

```
$.mobile.changePage("pageurl", {reloadPage: true}); 
```

第一页是登录屏幕，其中包含一个简单的用户名和密码表单。第一次一切都很顺利：如果提交按钮被按下并且某些字段为空，验证插件会抱怨。如果所有字段都正常并按下提交，我对 WS 进行了几次 ajax 调用，将数据保存在数据库中，然后显示下一页。

这是登录屏幕的代码：

```
 $(document).on("pageinit", "#login_screen", function() {  
        //This event fires every time we show this JQM "page".

        $("#id_index_form").validate({
            submitHandler : function(form) {
                user = form.user.value;
                password = form.psw.value;
                login(); 
            }
        });
    });

    function login(){
        //Calls the login WS  (ommited)

        //if login went ok, inject next page in DOM using ajax
        $.mobile.changePage("nextpage.html", {reloadPage: true});
    } 
```

一件重要的事情是我不能使用内置机制的表单，所以`login`改为调用自定义函数。

在下一个屏幕中，如果用户返回登录，我会再次更改页面：

```
$.mobile.changePage("login.html", {reloadPage: true}); 
```

现在验证插件不再起作用了。它不验证，当按下提交时，表单被清除并且没有任何反应。然而，正如预期的那样，mobileinit 事件再次被触发。控制台中没有错误。

有什么我想念的吗？我怎么能“重启”插件？也许它仍然认为之前的通话没有结束？

提前致谢。

* * *

更新：
我正在调试非缩小插件 js 文件，看起来问题在于它在`validate`调用中所做的初始化。在成功完成的第一次调用中，插件创建了一个绑定到表单的验证器，并缓存了验证器。在第二次调用中，我需要它将新验证器绑定到新表单，而不是返回旧验证器（绑定到旧表单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:50:18.527

解决了：

发生了什么：我不知道。我所知道的是这个插件在`validate`被调用时绑定到一个表单，并且只要表单在 DOM 中就一直绑定到它。它还缓存验证器，因此`validate`对同一表单的后续调用返回完全相同的验证器。

我做了什么：在切换到下一页之前，我从 DOM 中删除了表单。

# javascript - 在函数中调用输入类型

> ID：15546902
> 
> 赞同：1
> 
> 时间：2013-03-21T11:58:24.047
> 
> 标签：javascript, html, function

目的是当页面加载时，将对一个函数进行 onload 调用，并且在该函数内部将是一个输入类型，它将访问设备相机。

如何在 JavaScript 函数中调用输入类型？

```
 <!DOCTYPE HTML>
<html>
<head>
<title>Take Picture</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<script type="text/javascript">

    function getPic()
    {
        <input type="file" id="takePic" style="display: none;" accept="image/*;capture=camera">
    }
</script>  

</head>

<body onload="getPic()"> 
```

**编辑：**下面的代码行允许访问设备的相机，它工作正常。

```
<input type="file" id="takePic" accept="image/*;capture=camera"> 
```

基本上我想要的是，当页面加载时，它会自动从上面的代码中单击选择文件按钮。我认为最好的方法是通过 JS。我可能错了。

我对 JS 知之甚少，所以我在网上找到了一些东西后才来这里寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:00:57.950

如果你想在正文中添加输入`document.write`

```
function getPic()
{
    document.write('<input type="file" id="takePic" style="display: none;" accept="image/*;capture=camera">');
} 
```

如果您想访问该输入，请使用`getElementById()`.

```
document.getElementById('takePic') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:43:41.633

如果您的目标是从网络摄像头拍摄快照，则最好使用 navigator.getUserMedia() API。

有关详细信息，请参阅此页面：http: [//www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

它在 IE 和 Safari 中不受支持，但适用于当前版本的 Firefox、Chrome 和 Opera：[http ://caniuse.com/#feat=stream](http://caniuse.com/#feat=stream)

# asp.net-mvc-3 - 在控制器类中重用代码

> ID：15546905
> 
> 赞同：1
> 
> 时间：2013-03-21T11:58:30.443
> 
> 标签：asp.net-mvc-3

以下代码取自教程：[http](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view) ://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examineing-the-edit-methods-and-edit-view显示如何使用 ASP.net MVC 3 来管理电影数据库。

在教程中，将一个列表对象添加到包含数据库中存在的每种电影类型的控制器类中。然后将该列表传递到视图中的下拉列表，使数据库能够按流派搜索。

**控制器：（**与电影类型相关的代码以粗体显示）

```
public ActionResult SearchIndex(string movieGenre, string searchString)
{
var GenreLst = new List<string>();

var GenreQry = from d in db.Movies
               orderby d.Genre
               select d.Genre;
GenreLst.AddRange(GenreQry.Distinct());
ViewBag.movieGenre = new SelectList(GenreLst);

var movies = from m in db.Movies
             select m;

if (!String.IsNullOrEmpty(searchString))
{
    movies = movies.Where(s => s.Title.Contains(searchString));
}

if (string.IsNullOrEmpty(movieGenre))
    return View(movies);
else
{
    return View(movies.Where(x => x.Genre == movieGenre));
}

} 
```

我想做的是进一步增强这一点，以便可以按价格和类型搜索电影。我知道我可以重复使用大部分相同的代码来做到这一点。我想我需要创建一个新类，控制器类可以传递类型或价格。这个对吗？如果是这样，我会很感激一个例子。谢谢。

**更新/澄清：**

我想避免重复以下类型和价格的代码：

```
public ActionResult SearchIndex(string movieGenre, string searchString,float moviePrice)
{
var GenreLst = new List<string>();

var GenreQry = from d in db.Movies
               orderby d.Genre
               select d.Genre;
GenreLst.AddRange(GenreQry.Distinct());
ViewBag.movieGenre = new SelectList(GenreLst);

var PriceLst = new List<string>();

var PriceQry = from d in db.Movies
               orderby d.Genre
               select d.Genre;
PriceLst.AddRange(GenreQry.Distinct());
ViewBag.moviePrice = new SelectList(PriceLst);

var movies = from m in db.Movies
             select m;

if (!String.IsNullOrEmpty(searchString))
{
    movies = movies.Where(s => s.Title.Contains(searchString));
}

if (string.IsNullOrEmpty(movieGenre))
    return View(movies);
else
{
    return View(movies.Where(x => x.Genre == movieGenre));
}

if (string.IsNullOrEmpty(moviePrice))
    return View(movies);
else
{
    return View(movies.Where(x => x.Genre == moviePrice));
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:25:25.330

您只需在视图中插入一个文本框即可获取价格值。然后在操作中接收此值并修改查询以获得所需的结果。

像这样：

```
 @Html.ActionLink("Create New", "Create")
    @using (Html.BeginForm()){   
         <p>Genre: @Html.DropDownList("movieGenre", "All")  
           Title: @Html.TextBox("SearchString")  
          Price: @Html.TextBox("Price")
         <input type="submit" value="Filter" /></p>
        } 
```

在 action 方法中，您使用下面的代码用流派值填充下拉列表。您不必为价格价值做同样的事情。

```
var GenreLst = new List<string>();

var GenreQry = from d in db.Movies
               orderby d.Genre
               select d.Genre;
GenreLst.AddRange(GenreQry.Distinct());
ViewBag.movieGenre = new SelectList(GenreLst); 
```

在您的操作方法中，您只需要使用价格的值来过滤数据

```
 public ActionResult SearchIndex(string movieGenre, string searchString,float price)
{
var GenreLst = new List<string>();

var GenreQry = from d in db.Movies
               orderby d.Genre
               select d.Genre;
GenreLst.AddRange(GenreQry.Distinct());
ViewBag.movieGenre = new SelectList(GenreLst);

var movies = from m in db.Movies
             select m;

if (!String.IsNullOrEmpty(searchString))
{
    movies = movies.Where(s => s.Title.Contains(searchString));
}

if (string.IsNullOrEmpty(movieGenre))
    return View(movies);
else
{
    return View(movies.Where((x => x.Genre == movieGenre) &&(x => x.Price== price)));
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:08:02.647

你可以用很多不同的方式来做这件事，虽然都是正确的，但这取决于你项目的复杂性。基本上你不想过度设计一个简单的程序。但总的来说，您应该将所有逻辑移动到一个单独的类中，并使用您的操作来创建和调用正确的逻辑类：

```
public class GetMoviesRequest
{
    public string Name { get; set; }
    public float? Price { get; set; } 
}

public class MoviesLogic
{
    private List<Movie> Movies;
    public IEnumerable<Movie> Get(GetMoviesRequest request)
    {
        IEnumerable<Movie> filtered = Movies.AsQueryable();
        if (!string.IsNullOrEmpty(request.Name))
        {
            //Filter by name
            filtered = filtered.Where(m => m.Name == request.Name);
        }
        if (request.Price.HasValue)
        {
            //Filter by value
            filtered = filtered.Where(m => m.Price == request.Price);
        }
        return filtered;
    }
}

public class MyController
{
    public ActionResult SearchIndex(string movieGenre, string searchString)
    {
        var logic = new MoviesLogic();
        var movies = logic.Get(new GetMoviesRequest() { Name = searchString } )
            ///do stuff with movies
    }
} 
```

# extjs - ext js 4.2.0.633 - 网格列标题不显示过滤器选项

> ID：15546907
> 
> 赞同：1
> 
> 时间：2013-03-21T11:58:32.317
> 
> 标签：extjs, grid, extjs4.2

网格列标题中的过滤器选项不适用于 ext js 4.2.0.633，但适用于 extjs-4.1.1

![在此处输入图像描述](../Images/aa944ea118af826334f79b22bffcdd9d.png)

这是我正在使用的代码

```
Ext.define('Qreda.view.response.DndGrid', 
 extend : 'Qreda.view.BaseRemoteGrid',
 store : 'OptInOutConfigs',
 alias : 'widget.dndgrid',
 frame : true,

initComponent : function() {
this.columns = [{
    header : 'Keyword',
    dataIndex : 'keyword',
    renderer : function(value, metaData, record) {
        return value ? value.name : null;
    },
    filterable : true
    }, {
        header : 'trigger Keyword',
        dataIndex : 'triggerKeyword',
        filterable : true
    }, {
    header : 'Category',
    dataIndex : 'categoryId',
    filter : {
        type : 'list',
        store : Ext.getStore('CgCategories'),
        labelField : 'categoryName'
    }
    }];

    this.callParent();
    this.setTitle('MENU_DND_MANAGEMENT');
    this.on('beforerender', function(component, options) {
        Ext.getStore('CgCategories').load();
    }, this);
} 
```

});

有人请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:21:42.020

请使用与 ext js 4.2.0.633 一起提供的网格过滤器的 js 文件。它们可以在示例/ux/grid/filter 和示例/ux/grid/menu 和 ux/grid 文件夹中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T08:08:29.530

柱状网格过滤器插件工作到 Ext JS 4.1 版本。

它不适用于 ExtJS 4.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T18:59:26.020

需要 examples/ux/grid/filter 并将其定义为一个特性：

```
// ...
features: [{
    ftype: 'filters'
}]
// ... 
```

# java - 尝试在 azure 模拟器上运行 Java/Eclipse 应用程序时出现路径太长错误

> ID：15546911
> 
> 赞同：1
> 
> 时间：2013-03-21T11:58:36.537
> 
> 标签：java, eclipse, azure

我有一个 Java Web 应用程序，我尝试使用 Eclipse 以及 Azure SDK 和 Eclipse 插件在 Azure 上部署它。现在，当我尝试在 Azure 模拟器中运行应用程序时。我收到以下可怕的错误：

```
[windowsazurepackage] cspack.exe: Error : The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters. 
```

我正在使用 Glassfish 3 和 Java 1.7 JDK。我已经尝试替换文件夹，所以它尽可能短。但似乎没有任何帮助。看起来 Glassfish 或 Java SDK 导致文件夹太深。我很惊讶在 2013 年 MS 仍然没有解决这个问题！

下面的问题似乎是一样的。但是给定的答案没有帮助，我不知道如何重新关注原始问题。

[Azure Eclipse：cspack.exe：错误：指定的路径、文件名或两者都太长](https://stackoverflow.com/questions/13933705/azure-eclipse-cspack-exe-error-the-specified-path-file-name-or-both-are-t)

作为对 Martin Sawicki 评论的回应，这是日志。正如你所看到的，我使用的路径非常短。我什至尝试替换，并为项目使用另一个驱动器，但随后插件因空指针异常而爆炸。

```
Buildfile: C:\A\azr\package.xml

checkResetScript:

resetEmulator:

createwapackage:
    [move] Warning: Could not find file C:\A\azr\dy to copy.
    [mkdir] Created dir: C:\A\azr\dy
[windowsazurepackage] Verified attributes.
[windowsazurepackage] Role "wrol1": Verifying the approot "C:\A\azr\wrol1\approot"
[windowsazurepackage] Role "wrol1": Importing components...
[windowsazurepackage]   Imported as 'jdk1.7.0_17' from "C:\Program             Files\Java\jdk1.7.0_17"
[windowsazurepackage]   Imported as 'glassfishv3' from "C:\Glassfish3\glassfishv3"
[windowsazurepackage]   Imported as 'OW-MobileClient-QNH.war' from "C:\A\azr\..\OW-MobileClient-QNH"
[windowsazurepackage] Role "wrol1": Finished importing components
[windowsazurepackage] Role "wrol1": Generating component deployment script...
[windowsazurepackage] Role "wrol1": Created internal startup script
[windowsazurepackage] Starting package generation...
[windowsazurepackage] Executing '"C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\bin\cspack.exe" "C:\A\azr\ServiceDefinition.csdef" /role:wrol1;"C:\A\azr\wrol1\approot" /out:"C:\A\azr\dy\WindowsAzurePackage.cspkg"'...
[windowsazurepackage] Process started
[windowsazurepackage] Windows(R) Azure(TM) Packaging Tool version 1.8.0.0
[windowsazurepackage] for Microsoft(R) .NET Framework 3.5
[windowsazurepackage] Copyright (c) Microsoft Corporation. All rights reserved.
[windowsazurepackage] C:\A\azr\ServiceDefinition.csdef: Warning  CloudServices040 : The 'schemaVersion' attribute is unspecified. Please set the attribute to avoid this warning.
[windowsazurepackage] cspack.exe: Error   : The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.
[windowsazurepackage] Waiting for process to exit.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T19:51:15.177

由于您已经部署的应用程序，它可能是 glassfish\domains\domain(X)... 中文件夹结构的深度。

我正在运行 Glassfish Server Open Source Edition 3.0.1 并遇到了同样的问题。我最初认为这是一个版本控制问题，但在下载了同一版本的香草副本后，我能够重新打包并部署到 Azure 模拟器，没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:18:39.013

不幸的是，正如您所怀疑的那样，您在 Windows 中遇到了那个古老的路径长度限制。

有趣的是，如果你要将它部署到云中，它实际上可能工作正常，尽管它不能在模拟器中工作。那是因为它是云，您的 approot 目录（默认情况下放置有效负载的位置）只是 e:\approot。但是在您的本地计算机上，您的 Eclipse 项目可能位于多个目录中，然后是 Azure SDK 为您的模拟器部署创建的多个目录，然后 Glassfish 文件夹结构和文件名也很深，因此很容易命中其中的一个文件，其有效路径太长（> 260 个字符）。

话虽如此，有一些方法可以让 Glassfish 从 Eclipse 插件在 Windows Azure 模拟器中工作 - 这是我们一直在测试的东西，并且已经在后台实施了许多变通方法，以最大限度地减少用户遇到它的可能性。

因此，如果您仍然看到这个问题，我想知道您的 Glassfish 项目与我的有什么不同，我没有遇到这个问题。这就是我正在做的事情：

a) 我的 Eclipse 工作区中有一个 Windows Azure 部署项目，我的项目的有效路径是：c:\abcde\fghi\MyAzureProject（长度很重要）

b) 当我创建这个项目时，在项目向导中的服务器选项卡上，我选择了解压的 glassfish 安装，它位于：C:\abcde\fghijklmopqr\glassfish3。（通过这种方式，我依赖于 Eclipse 插件关于如何安装 glassfish 的知识）

c）然后我只需在模拟器中单击运行，一切正常。

如果您的操作完全相同，但 Eclipse 的项目路径比我的长（c:\abcde\fghi\MyAzureProject --- 27 个字符），那么看看是否将 Eclipse 项目保存在较短的总路径长度下是否有帮助。

# asp.net - 带有 iframe 的 modalpopup 扩展器不起作用

> ID：15546912
> 
> 赞同：0
> 
> 时间：2013-03-21T11:58:44.547
> 
> 标签：asp.net, iframe, modalpopupextender

我正在使用模态弹出窗口在弹出窗口中显示不同的页面，并且父页面不可编辑

这是我的代码

```
<asp:Button ID="btnModalPopup" runat="server" Text="" Visible="false" />
<asp:ModalPopupExtender ID="btnModalPopup_ModalPopupExtender" BehaviorID="btnModalPopup_ModalPopupExtender" runat="server" PopupControlID="ModalPopup" 
   BackgroundCssClass="ModalPopupBG" DynamicServicePath="" Enabled="True" TargetControlID="btnModalPopup"> </asp:ModalPopupExtender>
 <div id="ModalPopup" runat="server">
 <iframe id="iframePopup" runat="server" width="700" scrolling="yes" height="500"></iframe>
</div> 
```

和后面的代码

```
iframePopup.Attributes.Add("src", "default.aspx");
btnModalPopup_ModalPopupExtender.Show(); 
```

但是 iframe 显示在主页上而不是弹出窗口请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:05:03.137

设置按钮`Visible="true"`和使用`style="display:none;"`：

```
<asp:Button ID="btnModalPopup" runat="server" style="display:none;" 
Text="" Visible="true" /> 
```

Visible="true" 确保呈现控件。

并且，通过设置`style="display:none;"`您可以隐藏控件。

# c# - c#.net 使用 asp:CompareValidator 和日期

> ID：15546922
> 
> 赞同：0
> 
> 时间：2013-03-21T11:59:20.127
> 
> 标签：c#, .net, date, validation

我有由 dd/mm/yyyy 格式的 Javascript 增强文本框生成的日期，当使用 asp:comparevalidator 验证时无法正确验证。

以下是相关代码：

```
<asp:CompareValidator ID="CompareValidator4" runat="server" 
                      ControlToValidate="txtEndDate" ValueToCompare="txtStartDate" 
                      Display="None" 
                      ErrorMessage="End Date should be greater than or equal to Start Date." 
                      Type="Date" Operator="GreaterThanEqual" SetFocusOnError="True">    
</asp:CompareValidator>

<strong>Start Date</strong><asp:TextBox ID="txtStartDate" runat="server" Width="215px" CssClass="textfield" Style="width: 176px; margin-left:5px;"></asp:TextBox>&nbsp;&nbsp;

<strong>End Date</strong><asp:TextBox ID="txtEndDate" runat="server" Width="215px" CssClass="textfield" Style="width: 176px;  margin-left:5px;"></asp:TextBox>&nbsp;&nbsp; 
```

如果不清楚，我希望 txtStartDate 中的日期早于`txtEndDate`.

验证后，当验证失败时，我得到没有明显模式的乱码结果。任何人都可以看到有什么问题吗？

顺便说一句，我知道 html 有多糟糕 - 我正在编辑别人的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:12:02.017

您可以将页面的文化更改为`en-GB`吗？

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" 
Inherits="_Default" Culture = "en-GB" %> 
```

[在这里](http://geekswithblogs.net/ptahiliani/archive/2009/07/04/how-to-use-compare-validator-with-ddmmyyyy-format-of-date.aspx)找到。

**更新**您的验证器标记中有一个错误。如果您想将两个文本框日期相互比较，您必须提供`ControlToValidate`和`ControlToCompare`（而不是`ValueToCompare`）

```
 <asp:CompareValidator ID="CompareValidator4" runat="server" 
    ControlToValidate="txtEndDate" 
    ControlToCompare="txtStartDate" 
    Type="Date" Operator="GreaterThanEqual"
    Display="None" ErrorMessage="End Date should be greater than or equal to Start Date." SetFocusOnError="True">
</asp:CompareValidator> 
```

# python - Django FormPreview 与以前 POST 的数据

> ID：15546923
> 
> 赞同：1
> 
> 时间：2013-03-21T11:59:20.033
> 
> 标签：python, django, forms, django-forms

我想要一个在提交表单后预先确认并尝试使用 Django 内置 FormPreview 的场景。问题是它强制在 FormPreview 页面上呈现 Form 的场景，然后在提交后预览（可以编辑），然后实际发送。

我想要这样的东西：

1.  表单是从包含许多其他数据的某个页面提交的（不仅是此表单，还可能还有其他表单）
2.  用户可以看到他们的表单的预览（现在不能编辑它，只需确认或取消，我们可以假设表单在这部分是有效的）。根据用户输入（即某些项目的总和），表单上可能还有更多信息
3.  现在用户可以提交此表单并将其保存到数据库

这可以通过 FormPreview 完成，还是我需要手动编写预览页面？如果是这样，在预览后传递数据的最佳方式是什么，使用以前 POST 中的所有数据创建隐藏表单？

# ruby - PayPal::SDK::AdaptivePayments::DataTypes::Receiver 的未定义方法 `accountId='

> ID：15546930
> 
> 赞同：0
> 
> 时间：2013-03-21T11:59:33.940
> 
> 标签：ruby, paypal, paypal-sandbox

使用 paypal-sdk-adaptivepayments 1.96.3 gem。

```
get_t = api.build_payment_details({:pay_key => payKey})
get_transaction_details_response = api.payment_details(get_t) 
```

在沙盒模式下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:00:56.717

我在 github 上创建了一个 issue 来跟踪这个 bug 的进展。

[https://github.com/paypal/adaptivepayments-sdk-ruby/issues/2](https://github.com/paypal/adaptivepayments-sdk-ruby/issues/2)

感谢您的报告。

# jsf - tabview p：tab中的gmap不起作用primefaces jsf

> ID：15546938
> 
> 赞同：0
> 
> 时间：2013-03-21T11:59:50.673
> 
> 标签：jsf, primefaces, facelets

我有一个对话框，其中包含带有多个选项卡的选项卡视图。在我的一个选项卡中，我必须显示一个 gmap 组件。无论我尝试过什么都没有奏效。这是我的片段：

```
<p:dialog header="Proje Detayı" widgetVar="carDialog" resizable="false" id="display"  modal="true" style="font-size: 10px;font-weight: bold;" width="800" appendToBody="true" minHeight="1000">                          
                <p:commandButton value="Harita Lokasyonu" onclick="carDialog.hide();" oncomplete="mapperDijaloga.show()"/>
                <p:tabView id="tabView" cache="true" orientation="top" style="font-size: 10px;font-weight: bold;"> 
                    <p:tab id="tab1" title="Proje Bilgileri">
                        <h:panelGrid columns="2" cellpadding="2"> 
                            <h:outputText value="Proje Adı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.projectname}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="Proje Detayı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.projectexp}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="Proje Koordinatları: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.projectcoordlat}, #{projectsController.selectedP.projectcoordlon}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="İlçe: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.district}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="Sektör: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.sector}" style="font-weight: bold; font-size: 13px;"/>       

                            <h:outputText value="İş Durumu: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.workstatus}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.assistant}" style="font-weight: bold; font-size: 13px;"/>      

                            <h:outputText value="İhale Adı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.bidname}" style="font-weight: bold; font-size: 13px;"/>      

                            <h:outputText value="Firma: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.company}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="İhale Bedeli: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.biddcost}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="Ödenen Hak Ediş Tutarı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.costpaid}" style="font-weight: bold; font-size: 13px;"/>   

                            <h:outputText value="SÜRE BİLGİSİ" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                            <h:outputText value="Başlangıç Tarihi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.startdate}" style="font-weight: bold; font-size: 13px;"/>  

                            <h:outputText value="İşin Süresi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.processtime}" style="font-weight: bold; font-size: 13px;"/>     

                            <h:outputText value="Bitiş Tarihi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.enddate}" style="font-weight: bold; font-size: 13px;"/> 

                        </h:panelGrid>
                    </p:tab>  

                    <p:tab id="tab2" title="Teknik Bilgiler">  

                        <h:panelGrid columns="2" cellpadding="3"> 

                            <h:outputText value="Ada/Parsel: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.parcel}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Plan Durumu: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.planstatus}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Yolun Genişliği: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.roadwidth}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Yolun Uzunluğu: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.roadlength}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Toplam Alan: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.totalarea}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="İlave Bilgi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.extrainfo}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Teklif Birim Fiyat: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.unitoffer}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Yapım Yaklaşık Maliyeti: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.approxcost}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Proje Maliyeti: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.projectcost}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Dosya Kodu: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.filenu}" style="font-weight: bold; font-size: 13px;"/> 

                        </h:panelGrid>
                    </p:tab>  

                    <p:tab id="tab3" title="Proje Teşkilatı">  

                        <h:panelGrid columns="2" cellpadding="3">

                            <h:outputText value="Şef: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.chef}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.arch}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.streng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.landarch}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.eleceng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Jeoloji Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.geoeng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Makine Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.macheng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Harita Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.mapeng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Şehir Plancısı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.planeng}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="İHALE ÖNCESİ TAKİP" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                            <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.assistantbefore}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Sorumlu Müh./Mimar: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.engarch}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="UYGULAMACI KONTROL TEŞKİLATI" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                            <h:outputText value="Müdür Yard.: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.mdyard}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.mim}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.ins}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.peyz}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.elek}" style="font-weight: bold; font-size: 13px;"/> 

                        </h:panelGrid>

                    </p:tab>  

                    <p:tab id="tab4" title="Firma Bilgisi">  
                        <h:panelGrid columns="2" cellpadding="3">

                            <h:outputText value="Yetkili Kişi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.compres}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Görevi: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.compresjob}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Telefon: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.comptel}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="Adres: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.compaddress}" style="font-weight: bold; font-size: 13px;"/> 

                            <h:outputText value="E-Posta: " style="font-size: 13px;"/>  
                            <h:outputText value="#{projectsController.selectedP.compmail}" style="font-weight: bold; font-size: 13px;"/>     
                        </h:panelGrid>
                    </p:tab>  
                    <p:tab id="map" title="Lokasyon">                            
                        <br />
                        <h:form>
                            <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" />
                            <p:gmap center="41.381542, 2.122893" zoom="15" type="HYBRID" style="width:600px;height:400px" widgetVar="mymap"/>  
                        </h:form>      
                    </p:tab>
                </p:tabView>
            </p:dialog> 
```

在最后一个选项卡中出现问题：

```
 <p:tab id="map" title="Lokasyon">                            
                        <br />
                        <h:form>
                            <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" />
                            <p:gmap center="41.381542, 2.122893" zoom="15" type="HYBRID" style="width:600px;height:400px" widgetVar="mymap"/>  
                        </h:form>      
                    </p:tab> 
```

我尝试过更改 z-index，但它也不起作用。如何克服这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:11:20.240

一旦加载，这个解决方案会产生一些令人不快的闪烁，我认为这是由于地图的一些双重渲染造成的。一个更好的解决方案（至少乍一看）似乎是在 tabView 容器上使用 attribyte dynamic="true" ，所以你会得到类似的东西

```
<p:tabView dynamic="true">
  <p:tab id="xxx" title="xxx">
      .
  </p:tab>
  <p:tab id="yyy" title="yyy">
      <p:gmap ............ />
  </p:tab>
</p:tabView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:18:21.613

我认为您需要在选择其选项卡时重新绘制 MAP 小部件。

以下对我有用：

*   命名您的地图表单，使其可寻址（例如“myMapForm”）
*   捕获 ajax tabChange 事件以重新绘制地图。

尝试`<p:ajax event="tabChange" update=":myMapForm:map:myMap"/>`

干杯。

# wordpress - W3C 验证器不加载实际源

> ID：15546944
> 
> 赞同：1
> 
> 时间：2013-03-21T12:00:17.797
> 
> 标签：wordpress, caching, w3c, w3c-validation, mod-expires

我想使用 W3C 验证器来优化我的 Wordpress 博客。在主页上，它声称有 28 个错误。例如，其中之一如下：

> 第 28 行，第 53 列：省略了“元”的结束标记，但指定了 OMITTAG NO
> 
> ```
>  <meta name="DC.Creator" content="Raffael Herrmann"> 
> ```

所以我修复了它并点击了重新验证。尽管如此，验证者说，这个错误仍然存​​在。但是，如果我从我的网络浏览器查看浏览器源代码窗口，我可以看到可能更改已成功交付。如果我在 W3C 验证器选项中选中“显示源代码”并重新加载我的站点，我可以看到验证器使用的来自我站点的源代码已过时/没有更改。

那么有人能解释一下为什么 W3C 验证器无法识别我的更改吗？如果你不想自己看 - [http://code-bude.net/](http://code-bude.net/)是我博客的 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-26T19:13:23.027

我知道这有点老了，但我现在遇到了完全相同的问题，我找到了这个线程，然后我找到了一个简单的解决方法。

**问题：**

我修复了验证器告诉我的一些事情，单击了重新验证按钮，它显示的错误和源代码与我进行更改之前相同。

某些缓存肯定发生在某处。我也在使用 WordPress 以及 W3TC 插件，但我启用的唯一浏览器缓存设置是 Set Last-Modified 标头。

**解决方案：**

我之前在使用其他服务时遇到过类似的问题，这是一个简单的解决方法......

将“?x=1”添加到 url 的末尾，每次要重新验证时增加值。这使它跳过缓存，因为它是不同的 url。（如果 url 中已经有问号，请使用“&x=1”。如果 url 中已经有“x=”，请使用其他任何内容，例如“y=”。）

**例如...**

如果您想在以下位置验证主页：

`http://mydomain.com/`

...您可以在以下位置重新验证它：

`http://mydomain.com/?x=1`

...并在以下位置再次重新验证：

`http://mydomain.com/?x=2`

...等等。

如果您想在以下位置验证动态页面：

`http://mydomain.com/mypage.php?x=123`

...您可以在以下位置重新验证该页面：

`http://mydomain_com/mypage.php?x=123&y=1`

...并在以下位置再次验证：

`http://mydomain_com/mypage.php?x=123?y=2`

...等等。

# php - 发送内部电子邮件

> ID：15546945
> 
> 赞同：3
> 
> 时间：2013-03-21T12:00:30.843
> 
> 标签：php, sendmail, swiftmailer

**代码：**

```
$from = $_GET['from'];
$to = $_GET['to'];
$headers = "From:" . $from;
mail($to, 'PHP mail() function', 'Coming from PHP mail() function', $headers);
echo 'Check your inbox for PHP mail() function'; 
```

上面的代码用于发送本地电子邮件，但现在不再适用。仅适用于发送外部电子邮件。此外， swift_emailer() 也不起作用。

**更多细节：**

**位于：**

```
/usr/sbin/sendmail 
```

**phpinfo() 输出：**

```
sendmail_path   /usr/sbin/sendmail -t -i    /usr/sbin/sendmail -t -i 
```

**邮件日志：**

```
Mar 21 12:18:27 database sendmail[15156]: r2LCEFfB015154: to=<myaddress@whateveritis.com>, ctladdr=<apache@localhost.localdomain> (48/48), delay=00:04:12, xdelay=00:04:12, mailer=esmtp, pri=120357, relay=mx00.1and1.co.uk. [212.227.15.134], dsn=5.0.0, stat=Service unavailable
Mar 21 12:18:27 database sendmail[15156]: r2LCEFfB015154: r2LCIRfB015156: DSN: Service unavailable
Mar 21 12:18:27 database sendmail[15156]: r2LCIRfB015156: to=root, delay=00:00:00, xdelay=00:00:00, mailer=local, pri=31619, dsn=2.0.0, stat=Sent
Mar 21 12:18:32 database sendmail[15162]: r2LCENGr015160: to=<myaddress@whateveritis.com>, ctladdr=<apache@localhost.localdomain> (48/48), delay=00:04:09, xdelay=00:04:08, mailer=esmtp, pri=120356, relay=mx01.1and1.co.uk. [212.227.17.175], dsn=5.0.0, stat=Service unavailable
Mar 21 12:18:32 database sendmail[15162]: r2LCENGr015160: r2LCIWGr015162: DSN: Service unavailable
Mar 21 12:18:32 database sendmail[15162]: r2LCIWGr015162: to=root, delay=00:00:00, xdelay=00:00:00, mailer=local, pri=31618, dsn=2.0.0, stat=Sent
Mar 21 12:18:50 database sendmail[15166]: r2LCEk12015164: to=<myaddress@whateveritis.com>, ctladdr=<apache@localhost.localdomain> (48/48), delay=00:04:04, xdelay=00:04:04, mailer=esmtp, pri=120357, relay=mx01.1and1.co.uk. [212.227.15.134], dsn=5.0.0, stat=Service unavailable
Mar 21 12:18:50 database sendmail[15166]: r2LCEk12015164: r2LCIo12015166: DSN: Service unavailable
Mar 21 12:18:50 database sendmail[15166]: r2LCIo12015166: to=root, delay=00:00:00, xdelay=00:00:00, mailer=local, pri=31619, dsn=2.0.0, stat=Sent
Mar 21 12:19:39 database sendmail[15229]: r2LCJcKD015229: from=apache, size=123, class=0, nrcpts=1, msgid=<201303211219.r2LCJcKD015229@localhost.localdomain>, relay=apache@localhost
Mar 21 12:19:39 database sendmail[15230]: r2LCJdfM015230: from=<apache@localhost.localdomain>, size=357, class=0, nrcpts=1, msgid=<201303211219.r2LCJcKD015229@localhost.localdomain>, proto=ESMTP, daemon=MTA, relay=localhost.localdomain [127.0.0.1]
Mar 21 12:19:39 database sendmail[15229]: r2LCJcKD015229: to=myaddress@whateveritis.com, ctladdr=apache (48/48), delay=00:00:01, xdelay=00:00:00, mailer=relay, pri=30123, relay=[127.0.0.1] [127.0.0.1], dsn=2.0.0, stat=Sent (r2LCJdfM015230 Message accepted for delivery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:04:23.717

您是否与您的托管公司核实过他们是否在服务器上实施了内部邮件系统？会捕获邮件并将其发送到本地而不让它离开服务器的东西吗？如果您检查您的目录，它通常是像 //Mail 或类似的文件夹。

# sql-server-2008 - sp_refreshview 引发意外错误

> ID：15546947
> 
> 赞同：1
> 
> 时间：2013-03-21T12:00:35.680
> 
> 标签：sql-server-2008, tsql, view

我目前正在编写一个 TSQL 脚本，其中部分脚本会刷新数据库中的所有视图。在网上找到[这个](http://yellowduckguy.wordpress.com/2008/08/10/refresh-all-views-in-database-with-t-sql/)示例后，我正在遍历集合，但在刷新其中一个视图（不是第一个视图）时遇到了一个奇怪的问题。

在运行以下查询时，我从 sysobjects 表中得到结果

```
SELECT * FROM sysobjects WHERE type = 'V' AND name = 'vwEnginesFinishBuiltToday' 
```

![在此处输入图像描述](../Images/c9127ffdbb1f0b1dcbd32302e8596743.png)

然后运行刷新我得到一个异常

```
exec sp_refreshview N'dbo.vwEnginesFinishBuiltToday' 
```

![在此处输入图像描述](../Images/ab70cb88e24891f2092ea62e863c61ef.png)

现在奇怪的是错误告诉我找不到具有不同名称的视图。确实它不存在于数据库中，因此认为`dbo.vwEnginesFinishBuiltToday`在内部使用另一个视图，我查看了该视图的 TSQL。

```
SELECT     COUNT(dbo.tblBatches.IdBatch) AS TotalEnginesFinishedToday
FROM         dbo.tblBatches INNER JOIN
                      dbo.tblEngines ON dbo.tblBatches.IdBatch = dbo.tblEngines.idBatch
WHERE     (YEAR(dbo.tblEngines.DateFinished) = YEAR(GETDATE())) AND (MONTH(dbo.tblEngines.DateFinished) = MONTH(GETDATE())) AND (DAY(dbo.tblEngines.DateFinished) 
                      = DAY(GETDATE())) 
```

嗯，没有提到`dbo.vwEnginesFinishedToday`那里的景色。不，我正在努力寻找问题。

SQL Server中的方法有问题`sp_refreshsqlmodule_internal`还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:10:48.350

听起来您在过去的某个时候已经重命名了视图，使用[`sp_rename`](http://msdn.microsoft.com/en-us/library/ms188351.aspx)或 SSMS 对象资源管理器。当您尝试刷新视图时，`sp_refreshview`正在尝试使用不再存在的原始视图名称来更改视图。

尝试使用`Script View as -> ALTER To -> New Query Editor Window`选项生成`ALTER VIEW`脚本，执行脚本，然后`sp_refreshview`重试。

# c# - 将 XML 转换为字符串并在列表框中显示特定元素

> ID：15546949
> 
> 赞同：0
> 
> 时间：2013-03-21T12:00:39.393
> 
> 标签：c#, xml-parsing, linq-to-xml

我正在开发一个程序，我在其中执行 HTTPWebrequest，作为响应，我得到以下 XML 数据。（此时我将响应放入消息框中）

```
<OperatorRef>STB</OperatorRef>
<MonitoredCall>
  <AimedDepartureTime>2013-03-21T11:41:00.000Z</AimedDepartureTime>
  <ExpectedDepartureTime>2013-03-21T11:44:27.000Z</ExpectedDepartureTime>
</MonitoredCall>
</MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T11:47:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T11:47:03.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>53</PublishedLineName>
    <DirectionName>Wootton</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T11:49:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T11:49:44.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>42</PublishedLineName>
    <DirectionName>Flitwick</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T11:49:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T11:50:26.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>1</PublishedLineName>
    <DirectionName>Kempston</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T11:53:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T11:52:45.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T11:59:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T11:59:03.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>1</PublishedLineName>
    <DirectionName>Kempston</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:05:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T12:04:45.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>42</PublishedLineName>
    <DirectionName>The Green</DirectionName>
    <OperatorRef>GP</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:09:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:11:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T12:11:03.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>1</PublishedLineName>
    <DirectionName>Kempston</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:17:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T12:16:45.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>53</PublishedLineName>
    <DirectionName>Wootton</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:19:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T12:19:44.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:23:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>1</PublishedLineName>
    <DirectionName>Kempston</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:29:00.000Z</AimedDepartureTime>
      <ExpectedDepartureTime>2013-03-21T12:28:45.000Z</ExpectedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>52</PublishedLineName>
    <DirectionName>Wharley End, Cranfield University main gate</DirectionName>
    <OperatorRef>bed-5100</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:33:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>44</PublishedLineName>
    <DirectionName>Ampthill, Alameda Walk</DirectionName>
    <OperatorRef>bed-153</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:33:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>STB</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:35:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>1</PublishedLineName>
    <DirectionName>Kempston</DirectionName>
    <OperatorRef>bed-5100</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:41:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>2</PublishedLineName>
    <DirectionName>Elstow P+R</DirectionName>
    <OperatorRef>bed-5100</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:46:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>42</PublishedLineName>
    <DirectionName>Flitwick, Woodlands Middle School</DirectionName>
    <OperatorRef>bed-5100</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:48:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
<MonitoredStopVisit>
  <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
  <MonitoringRef>020035811</MonitoringRef>
  <MonitoredVehicleJourney>
    <FramedVehicleJourneyRef>
      <DataFrameRef>-</DataFrameRef>
      <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
    </FramedVehicleJourneyRef>
    <VehicleMode>bus</VehicleMode>
    <PublishedLineName>53</PublishedLineName>
    <DirectionName>Wootton</DirectionName>
    <OperatorRef>bed-5100</OperatorRef>
    <MonitoredCall>
      <AimedDepartureTime>2013-03-21T12:49:00.000Z</AimedDepartureTime>
    </MonitoredCall>
  </MonitoredVehicleJourney>
</MonitoredStopVisit>
</StopMonitoringDelivery>
</ServiceDelivery>
</Siri> 
```

我喜欢在列表框中只显示 ExpectedDeperatureTime。

我尝试使用以下代码执行此操作：

```
string xmlFormat = responseFromServer;

            XDocument doc = XDocument.Parse(xmlFormat);

            var list = doc.Root.Elements("ExpectedDepartureTime")
                          .Select(element => element.Value);

            foreach (string i in list)
            {
                lstHours.Items.Add(i);
            } 
```

我在另一个线程上找到了这段代码：[如何将 XML 转换为 List<string> 或 String[]？](https://stackoverflow.com/questions/956749/how-can-i-transform-xml-into-a-liststring-or-string)

当我在线程上使用带有“id”的示例时，它可以工作，但不适用于我的 xmldata，我不知道为什么......

有这么大吗？我忘记了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:24:56.960

这将获得出发时间列表：

```
XNamespace ns = "http://www.siri.org.uk/";

List<DateTime> departureTimes = doc.Descendants(ns + "ServiceDelivery")
   .Elements(ns + "StopMonitoringDelivery")
   .Elements(ns + "MonitoredStopVisit")
   .Elements(ns + "MonitoredVehicleJourney")
   .Elements(ns + "MonitoredCall")
   .Elements(ns + "ExpectedDepartureTime")
   .Select(x => (DateTime)x)
   .ToList(); 
```

或作为字符串

```
List<string> departureTimes2 = 
    departureTimes.Select( dt => dt.ToString() ).ToList(); 
```

# c#-3.0 - 将日期转换为“dd-MMM-yyyy”格式c#

> ID：15546953
> 
> 赞同：16
> 
> 时间：2013-03-21T12:00:57.070
> 
> 标签：c#-3.0

伙计们，我无法将日期时间转换为“dd-MMM-yyyy”格式。我的代码如下：

```
TreeNode tn = new TreeNode(dr["pBillDate"].ToString());       // Here i am getting both date and time. 
```

我需要将其转换为“2013 年 3 月 20 日”。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-23T13:01:26.320

试试这个代码：

```
string formattedDate = YourDate.ToString("dd MMM yyyy"); 
```

它将格式化为：

```
12 Nov 2012 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T12:15:40.220

以下几个示例应该有效：

```
DateTime dt = Convert.ToDateTime(dr["pBillDate"]);

TreeNode tn = new TreeNode(String.Format("{0:dd-MMM-yyyy}", dt)); 
```

或者

```
DateTime dt = Convert.ToDateTime(dr["pBillDate"]);

TreeNode tn = new TreeNode(dt.ToString("dd-MMM-yyyy")); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-02T11:52:52.833

```
DateTime StartDate = Convert.ToDateTime(datepicker.Text);
string Date = StartDate.ToString("dd-MMM-yyyy"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-22T09:15:35.870

找到下面的代码：

`DateTime todayDay = DateTime.Today.ToString();`

它将为您提供`dd-MMM-yyyy`格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T12:39:27.677

尝试关注

```
 TreeNode tn = new TreeNode(dr["pBillDate"].ToShortDateString()); 
```

它可以将 DateTime 转换为 Date

谢谢，

# php - Wordpress - 错误：标头已发送

> ID：15546957
> 
> 赞同：2
> 
> 时间：2013-03-21T12:01:13.823
> 
> 标签：php, wordpress

我的网站上有一个表格，我已将其包含在页面的侧边栏中。基本上它所做的是收集一些数据，如果这些数据已正确填写，它会将其传递到另一个页面上的更大表单。

问题是，我在提交时不断收到“标头已发送”错误。奇怪的是，表单在我的开发服务器上运行良好。

基本上我的代码是这样的；

```
 <?php
    if($_SERVER['REQUEST_METHOD'] == 'POST'){

        // Checks for errors are here (omitted for brevity)

        if(!$errors){
            header('Location:'.bloginfo('url').'?page_id=xxx');
        }
    }
    ?> 
```

记住我必须检查错误，是否有另一种方法可以在不使用 header() 的情况下重定向到网站上的另一个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:39:17.330

没问题，您可以使用来自的键/值`$_POST`来生成重定向：

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST'){

    // Checks for errors are here (omitted for brevity)

    if(!$errors){
        $xxx = 'valueofxxxhere';
        echo '<script>document.location="'.bloginfo('url').'?page_id='.$xxx.'";</script>';
        die();
    }
}
?> 
```

不是我选择的设计（总是更好地从标题重定向），但有时很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:16:04.533

任何发送或修改 HTTP 标头的函数都必须在任何输出之前调用，否则如您所见，它将失败。

在下面的链接中有一个很好的帖子/解释。 [如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

# jquery - 使用 SVG 渲染的图表小部件

> ID：15546959
> 
> 赞同：0
> 
> 时间：2013-03-21T12:01:20.853
> 
> 标签：jquery, javascript, jquery-svg

我正在寻找一个使用 SVG 渲染的 javascript 图表生成小部件。我找到了类似 www.jqwidgets.com 的东西，但许可版本不是免费的。我找到了另一个叫做 yui 图表的 BSD 许可证，我可以在商业上使用它，但这个使用的是闪存。

有谁知道任何使用 SVG 渲染并且可以免费用于商业用途的图表小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:21:30.977

我相信出色的[gRaphaël](http://g.raphaeljs.com/)库（Raphaël 的一个子项目）可以满足您的需求。

它是 MIT 许可的，使用 javascript 和 SVG，父库不仅适用于图形，而且适用于任何带有矢量图形的东西 - 其优势在于它接收 DOM 事件的画布方法。

它不依赖/与 jQuery 集成，但在实践中实际上并不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:36:13.603

d3.js 不完全是一个小部件，而是一个丰富的数据可视化库，可以选择输出到 SVG。您究竟想要生成什么样的“图表”？

# asp.net - 将 aspx 变量从一页传递到另一页

> ID：15546961
> 
> 赞同：0
> 
> 时间：2013-03-21T12:01:22.953
> 
> 标签：asp.net, tsql

我正在做一个实现用户和组的项目。我在一页上的网格视图中显示组。这个 gridview 有一个按钮域，当我点击这个按钮域时，另一个页面会打开一个用户列表。原因是我想选择将哪些用户添加到该组中。唯一缺少的是我如何从一个页面（显示组列表的位置）获取 groupid（gruppenid）到另一个页面（显示用户列表的位置）？

这是我的代码：

组页标记

```
<asp:Panel ID="pnlGruppe" ScrollBars="Both" runat="server">
    <asp:Button ID="btnNeueGruppe" Text="Neue Gruppe" runat="server" OnClick="btnNeueGruppe_Click" />
    <asp:GridView DataKeyNames="GruppenID" OnRowCommand="grdGruppe_RowCommand" ID="grdGruppe" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:BoundField DataField="Bezeichnung" HeaderText="Bezeichnung" SortExpression="Bezeichnung" />
            <asp:TemplateField HeaderText="Mitglieder anzeigen">
                <ItemTemplate>
                    <asp:Button ID="btnMitgliederAnzeigen" runat="server" Text="Mitglieder anzeigen" CommandName="MitgliederAnzeigen"
                        CommandArgument='<%# Eval("GruppenID") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:CommandField HeaderText="Archivieren" ButtonType="Button" ShowDeleteButton="true" DeleteText="Archivieren" />
            <asp:TemplateField HeaderText="Mitglieder anzeigen">
                <ItemTemplate>
                    <asp:Button ID="btnMitgliederHinzufuegen" runat="server" Text="Mitglieder hinzufügen" CommandName="MitgliederHinzufuegen"
                        CommandArgument='<%# Eval("GruppenID") %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [Bezeichnung], [GruppenID] FROM [Gruppe] WHERE [Archiviert] != 1"
        DeleteCommand="UPDATE Gruppe SET [Archiviert] = 1 WHERE [GruppenID] = @GruppenID; DELETE FROM BenutzerGruppe WHERE [GruppenID] = @GruppenID">            
    </asp:SqlDataSource>
    <asp:Button ID="btnZurueck" Text="Zurück" runat="server" OnClick="btnZurueck_Click" />
</asp:Panel> 
```

组页面的相关代码隐藏

```
protected void grdGruppe_RowCommand(object sender, GridViewCommandEventArgs e)
        {
             if (e.CommandName == "MitgliederHinzufuegen")
        {
            Response.Redirect("MitgliederHinzufuegen.aspx?GruppenID=" + e.CommandArgument);
        }
        } 
```

将用户添加到组的年龄标记

```
 <asp:Content ID="content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">           
        <asp:GridView OnRowCommand="grdBenutzer_RowCommand" DataKeyNames="BenutzerID" ID="grdBenutzer" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
            <Columns>
                <asp:BoundField ReadOnly="true" DataField="BenutzerID" HeaderText="ID" />                   
                <asp:TemplateField HeaderText="Bezeichnung">
                    <ItemTemplate>
                        <%# Eval("Bezeichnung")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBezeichnung" Text='<%# Bind("Bezeichnung")%>'>
                            <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                            <asp:ListItem Text="Praktikant" Value="Praktikant"></asp:ListItem>
                            <asp:ListItem Text="Azubi" Value="Azubi"></asp:ListItem>
                            <asp:ListItem Text="Umschüler" Value="Umschüler"></asp:ListItem>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Vorname">
                    <ItemTemplate>
                        <%# Eval("Vorname")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtVorname" Text='<%# Bind("Vorname")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Nachname">
                    <ItemTemplate>
                        <%# Eval("Nachname")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtNachname" Text='<%# Bind("Nachname")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:BoundField ReadOnly="true" HeaderText="Geburtsdatum" DataField="Geburtsdatum" />                    
                <asp:TemplateField HeaderText="Benutzerart">
                    <ItemTemplate>
                        <%# Eval("Benutzerart")%>
                    </ItemTemplate>                        
                </asp:TemplateField>
                <asp:ButtonField ButtonType="Button" HeaderText="Mitglied hinzufügen" Text="Mitglied hinzufügen" CommandName="MitgliedHinzufuegen" />
            </Columns>              
        </asp:GridView>
     <asp:SqlDataSource OnInserted="SqlDataSource1_Inserted" ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [BenutzerID], [Bezeichnung], [Vorname], [Geburtsdatum], [Nachname], [Benutzerart] FROM [Benutzer] WHERE [Archiviert] != 1">            
     </asp:SqlDataSource> 
```

添加用户的页面的相关代码隐藏

```
 protected void grdBenutzer_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "MitgliedHinzufuegen")
        {
            string gruppenid = Request.QueryString["GruppenID"];
            SqlDataSource1.InsertParameters.Add("GruppenID", gruppenid);
            SqlDataSource1.InsertCommand="INSERT INTO BenutzerGruppe (BenutzerID, GruppenID) VALUES (@BenutzerID, @GruppenID)";
            SqlDataSource1.Insert();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:03:05.957

[您可以使用QueryString](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)传递 gruppenid

```
protected void grdGruppe_RowCommand(object sender, GridViewCommandEventArgs e)
{
     if (e.CommandName == "MitgliederHinzufuegen")
     {
        Response.Redirect("MitgliederHinzufuegen.aspx?gruppenid" + GroupID);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:11:31.377

您可以使用 传递变量`QueryString`。

```
protected void grdGruppe_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "MitgliederHinzufuegen")
    {
        Response.Redirect("MitgliederHinzufuegen.aspx?gruppenid=" + Convert.ToInt32(e.CommandArgument));
    }
} 
```

并使用以下命令在其他页面上检索它：

```
Request.QueryString["gruppenid"] 
```

# ios - UILabel 正在显示最后一个值，但不是我输入的所有值

> ID：15546963
> 
> 赞同：0
> 
> 时间：2013-03-21T12:01:27.777
> 
> 标签：ios, uilabel

我`UILabel`的不是每次都刷新，而是仅刷新最后一个值。我想打印`UILabel`.

```
for (int i=0; i<4; i++) {
    lblText.text=[NSString stringWithFormat:@"%i",i];
sleep(1.2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:05:25.707

您正在覆盖这些值。您需要创建一个新数组，每次迭代都附加新值。

而且，不要在主线程中使用睡眠。这就是 UI 阻塞

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:08:33.640

如果你想改变标签文本间隔一段时间，为什么不使用`NSTimer`

```
 _timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(changeText) userInfo:nil repeats:YES];
    _loopTime = 0;

- (void)changeText
{
    lblText.text=[NSString stringWithFormat:@"%i",_loopTime++];
    if(_loopTime >= 3)
    {
        [_timer invalidate];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:04:15.240

不要`sleep()`在主线程中使用。因为它会冻结 UI。使用`performSelector: afterDelay:`which 将调用函数（您自己的）来更新标签中的文本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:13:32.323

阿米特..我不确定，但据我所知，iOS 会在两种方法执行之间重绘屏幕。并且只重绘最新的值。实现计数器。您需要正确的方法并启动计时器，如下所示。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.2
                                                            target:self
                                                          selector:@selector(counter:)
                                                          userInfo:[NSNumber numberWithInt:i]
                                                           repeats:YES]; 
```

这是一种反方法。

```
-(void) counter:(NSNumber)count
{

    if(count == 4)
    {
      [timer invalidate]; timer = nil;
    }
    lblText.text=[NSString stringWithFormat:@"%i",count];
    //increment the counter
    i++;
} 
```

希望这可以帮助。

# sql-server-2008 - 在单个查询中组合三个不同的条件

> ID：15546964
> 
> 赞同：3
> 
> 时间：2013-03-21T12:01:29.363
> 
> 标签：sql-server-2008

我有 3 张桌子。查询条件：

```
Need to get number of Source_Id   with status_id=1

Need to get number of Source_Id with status_id=3 except status_id=1

Need to get number of Source_Id with status_id=2 except status_id=1 and 3 
```

表 1：状态

```
 **Satus_Id    Status**
    1          Matching
    2          Not Matching
    3          Manual Matching 
```

表 2：来源详情

```
 **Source_Id     Name   Date**
    1           Name1   21-01-2013
    2           Name2   22-01-2013
    3           Name3   22-01-2013
    4           Name4   23-02-2013 
```

表 3：来源

```
 **Id   Source_Id   Satus_Id**
    1        1            1
    2        1            2
    3        1            3
    4        2            2
    5        2            3
    6        3            3
    7        4            2 
```

预期输出为

```
 **Status               Count**
   Matching                 1
   Manual Matching          2
   Not Matching         1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:13:48.277

```
SELECT ALLCOLUMNSYOUWANTTOUSE
FROM TABLE YOU WANT
WHERE FIRST
UNION
SELECT SAMECOLMNS
FROM TABLE
WHERE SECOND
UNION
SELECT SAMECOLUMNS
FROM TABLE
WHERE THIRD 
```

关键是在每个中使用相同的列。

如果这不起作用，请显示查询和表格，我们可能会为您进行连接

# ruby - 使用 watir/Ruby 在上述文件夹中打开 excel 文件

> ID：15546966
> 
> 赞同：0
> 
> 时间：2013-03-21T12:01:37.797
> 
> 标签：ruby

目前我正在打开一个这样的 Excel 文件

```
excel = WIN32OLE::new("excel.Application")
workbook = excel.Workbooks.Open('T:\\PointOfSale\\Projects\\Automated Testing\\MasterFile.xls')
worksheet = workbook.WorkSheets(1) # Get first workbook
site = worksheet.Range('A2').Value # Get the value at cell in worksheet. 
```

它很好，但是当我将脚本移动到服务器时，我收到一条错误消息，提示找不到路径/文件。所以我决定使用一种通用的方式，比如当我打开一个文本文件时

```
excel = WIN32OLE::new("excel.Application")
workbook = excel.Workbooks.Open('../../../../Automated Testing/MasterFile.xls')
worksheet = workbook.WorkSheets(1) # Get first workbook
site = worksheet.Range('A2').Value # Get the value at cell in worksheet. 
```

但我收到一条错误消息：

> T:/PointOfSale/Projects/Automated Testing/CSA/Branch_Test/Res Processing/CancelRes/Canc_BE.rb:23:in `method_missing': (in OLE method`Open':) (WIN32OLERuntimeError) OLE 错误代码：Microsoft Excel 中的 800A03EC '../../.. /../Automated Testing/MasterFile.xls' 找不到。检查文件名的拼写，并验证文件位置是否正确。
> 
> 如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。HRESULT 错误代码：0x80020009 发生异常。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:30:32.567

您需要脚本文件本身的相对位置，例如

```
path = "#{File.dirname(__FILE__)}/../../Automated Testing/MasterFile.xls"
workbook = excel.Workbooks.Open(path) 
```

我无法确定您的脚本文件位于何处，因此您需要调整 /../ 引用的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T07:16:41.250

你也可以试试，

```
path = "#{Dir.pwd}/Automated Testing/MasterFile.xls"
workbook = excel.WorkBooks.Open(path) 
```

`Dir.pwd`将输出你当前项目目录的绝对路径。

```
Dir.pwd
#> "/home/rails/projects/earthE/Blog" 
```

# jquery - Jquery滚动到然后用锚突出显示div

> ID：15546968
> 
> 赞同：1
> 
> 时间：2013-03-21T12:01:41.843
> 
> 标签：jquery, scroll, anchor

我有一个菜单，它使用 Jquery 平滑滚动到我设置的锚点，效果很好。

示例：http: [//jsfiddle.net/23VeR/](http://jsfiddle.net/23VeR/)

```
$(document).ready(function(){
$('a[href^="#"]').bind('click.smoothscroll',function (e) {
    e.preventDefault();

    var target = this.hash,
    $target = $(target);

    $('html, body').stop().animate({
        'scrollTop': $target.offset().top
    }, 500, 'swing', function () {
        window.location.hash = target;
    });
});
}); 
```

希望这将帮助其他人寻找解决方案。

我一直在寻找一种在滚动完成后突出显示（然后慢慢淡出）div的方法，但是由于我是一个完整的jquery noob，所以找不到简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:28:30.473

仅使用您目前拥有的东西，我设法通过在背景中放置一个临时元素来“闪烁” - 然后将其删除。

```
$('<div />')
    .css({
        'width':'100%',
        'height':'100%',
        'position':'absolute',
        'display':'none',
        'background':'red',
        'top':'0',
        'left':'0'
    })
    .prependTo($target)
    .fadeIn('fast', function(){
        $(this).fadeOut('fast', function(){
            $(this).remove();
        });
    }); 
```

[http://jsfiddle.net/23VeR/1/](http://jsfiddle.net/23VeR/1/)

不幸的是它显示在文本前面，所以我`<div>`在 HTML 中添加了一些 s 并设置了一些`position`CSS 属性。所以看看这个：

[http://jsfiddle.net/23VeR/2/](http://jsfiddle.net/23VeR/2/)

仍然可能值得在评论中查看我的链接 - 或者还有一些其他插件可以让您为 css`background-color`属性设置动画。

此外，如果您不关心向后兼容性，那么您可以使用 CSS3 过渡。有关更多信息，请参阅此问题：[背景颜色的过渡](https://stackoverflow.com/questions/4411306/css3-transition-of-background-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T14:46:06.393

我制作了一个插件来解决这个确切的问题。

[https://github.com/cloudratha/active-scroll-js](https://github.com/cloudratha/active-scroll-js)

它使用自定义数据属性链接到目标 ID。单击锚点将平滑滚动到目标元素。它确定哪个锚点最接近当前滚动位置，并使用自定义类突出显示锚点。

# c# - Clearing GridView without causing EmptyDataText to show

> ID：15546970
> 
> 赞同：1
> 
> 时间：2013-03-21T12:01:49.580
> 
> 标签：c#, asp.net, gridview

I have a gridview with an assigned "EmptyDataText" value.

Its holding search results so I do want it to display the EmptyDataText when there aren't any search results.

However when I clear the search results (by setting DataSource to null and causing a databind), I don't want the EmptyDataText text to show. Any way of doing this without changing the visibility?

# jquery - 针对子元素jquery

> ID：15546972
> 
> 赞同：0
> 
> 时间：2013-03-21T12:01:54.883
> 
> 标签：jquery, selector, addclass

此代码应针对 .refer 类的子元素并分配给它 .ref-hover，但它仅将其分配给 .refer

简单的html：

```
<div class="refer left">

    <div class="desc box">

    <h3>Anticorro</h3>

    <p>Soundtrack</p>
    </div>

    <div class="video box">
        <iframe>soundcloud iframe</iframe>
     </div>
</div> 
```

js在这里：

```
$(document).ready(function() {

$('.refer').hover(
    function () {
    $(this).children('.video').addClass('.ref-hover');
    }, function () {
    $(this).children('.video').removeClass('.ref-hover');
});

}); 
```

示例： http: [//www.needles.cz](http://www.needles.cz)（带有 soundcloud 播放器的那些块）

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:38.207

试试这个

```
$(document).ready(function() {

$('.refer').hover(
    function () {

    $(this).children('.video').addClass('ref-hover');
    }, function () {
    $(this).children('.video').removeClass('ref-hover');
});

}); 
```

# javascript - Passing a Javascript variable as model for a PartiaView in ASP.NET MVC

> ID：15546973
> 
> 赞同：0
> 
> 时间：2013-03-21T12:02:04.867
> 
> 标签：javascript, asp.net-mvc-4

I have a PartialView that should receive a model like:

`@model MiniSIGEweb.Models.StudentViewModel`

And I have this model as a javascript variable `viewModel.selectedStudent`:

```
<script>
        var viewModel = kendo.observable({
            dataSource: dataSource,
            selectedStudent: {},
            /*...*/
        });
    /*...*/
    </script> 
```

How can I pass this variable to the PartialView?

```
@Html.Partial("_Edit.Mobile", /*Here I should pass the variable*/) 
```

I'm not sure if this is important but I'm appending the StudentViewModelClass:

```
public class StudentViewModel
    {
        public long Id { get; set; }
        [Required]
        public string Name { get; set; }
        [Required]
        [Range(1, 100)]
        public Nullable<int> Age { get; set; }
        [Required]
        public string Course { get; set; }
        [Required]
        [Display(Name = "School")]
        public string SchoolName { get; set; }
        [Required]
        public string City { get; set; }
        [Required]
        public string Country { get; set; }
        public Nullable<System.DateTime> BuildDate { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:22:27.867

您不能混合使用服务器和客户端代码。我可以给你两种方法来实现它：

*   使用客户端模板，例如[jsrender](http://borismoore.github.com/jsrender/demos/demos.html)
*   使用 Ajax 从服务器加载数据（Action 将返回 `PartialViewResult`）

从您的问题来看，尚不清楚哪个更好。

# wordpress - mod_expire 可能与 Wordpress 更新冲突吗？

> ID：15546974
> 
> 赞同：2
> 
> 时间：2013-03-21T12:02:06.707
> 
> 标签：wordpress, apache, .htaccess, caching, mod-expires

我想使用 mod_expire 在用户浏览器中缓存我的 Wordpress 博客的内容，从而提高我在 YSlow 和 Google Pagespeed 的排名。所以我想使用如下配置。

```
Header unset ETag
FileETag None

<IfModule mod_expires.c>
ExpiresActive On
ExpiresDefault A0
<FilesMatch ".(ico|jpg|png|gif|css|js|gz)$">
ExpiresDefault A2592000
Header append Cache-Control "private"
</FilesMatch>
</IfModule> 
```

但是，我现在提出了以下问题。如果插件代码中断并且插件开发人员发布更新怎么办？我将下载并将其安装到我的博客，但插件中损坏的 .js 文件已被用户的浏览器缓存。
在缓存时间到期之前，用户会无法查看我的页面，还是会自动从插件更新中获得新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:19:43.587

您的担忧成立：浏览器确实会继续使用其缓存（可能已过时）的副本，直到根据您的配置过期。

以下是关于 Expires 与 Last-Modified/ETag[的有用总结](https://developers.google.com/speed/docs/best-practices/caching#LeverageBrowserCaching)，包括一些建议的最佳实践。

一般来说，在您的情况下（因为您似乎担心插件更新）我会选择 ETag/Last-Modified 而不是 Expires。

另一个想法：您不需要将 js 文件与所有其他类型捆绑在一起。只是一个启发式，但它可能会有所帮助：

```
# can be safely cached
<FilesMatch ".(ico|jpg|png|gif|css|gz)$">
    ExpiresDefault now plus 30 days
    FileETag None
    Header unset ETag
</FilesMatch>

# don't cache or only cache briefly
<FilesMatch ".js$">
    FileETag MTime Size
    # or: ExpiresDefault now plus 6 hours
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:45:26.573

此脚本仅缓存 ico、jpg、png、gif、css、js、gz 文件而不是 html。WordPress 会好的。

如果您遇到客户端 js 崩溃，请不要缓存 js。或者再次重新运行，并将 js 设置为短时间缓存，例如 14400 秒。

# zk - Declaration of widget class in ZK

> ID：15546977
> 
> 赞同：0
> 
> 时间：2013-03-21T12:02:14.843
> 
> 标签：zk

I am getting cls undefined in register() function.

```
var cls = zk.$import(clsnm);
cls.prototype.className = clsnm; 
```

The documentation says

> Notice that the **class must be declared before calling this method.** In other words, zk.$import(clsnm) must return the class of the specified class name.

Where do I need to delcare class class name ?

Link of register function : [Link](http://www.zkoss.org/javadoc/6.5.1/jsdoc/zk/Widget.html#register%28_global_.String,%20boolean%29)

# algorithm - Running time of counting sort

> ID：15546979
> 
> 赞同：4
> 
> 时间：2013-03-21T12:02:17.160
> 
> 标签：algorithm, big-o, asymptotic-complexity

I am trying to understand the running time of counting sort. In my notes, it says, assuming the size of the array A is n, and k is the number of times each number occurs,

```
 Counting-Sort(A,k) {
   for (i=1; i <= k; i++) // initialize number counters to 0
       times[i] = 0;

   for (j=1; j <= length[A]; j++) // decide how many times each
       times[A[j]]++;                  // number appears in the input

  // form the sorted array
  m=1;
    for ( i=1; i <= k; i++)    // consider each number in the range
         for ( j=1; j <= times[ i ]; j++) { // generate that number in 
            A[m]=i;                   // the output as many times as
            m++;                      // it occurs in the input
         }
  } 
```

> Let t[i] denote the number of times the inner loop iterates for each i. When we look at the nested for loops at the bottom of the code, note that, every time the inner loop is iterated, we are placing a new number into its correct place in the output array. Hence: sum t[i] (from i=1 to k) = n.

I don't understand why this sum is equal to n. The outer loop iterates k times, and inner loop may iterate at most n times, so it must be O(nk). Can somebody explain? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:15:48.223

**算法**

计数排序，也称为直方图排序

```
n = length of input Array

k = number of unique symbols that appear in the input Array 
```

*   初始化需要`k`时间

*   数数需要`n`时间

*   枚举需要`Sum { Count(i) } = n`时间

**复杂**

```
Time = k + n + n = 2n+k

Time ~ O(2n+k) = O(n+k)

Space = n + k ~ O(n+k) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:21:46.377

注释并不完全正确。`k`是您的数组中显示的最大数字（即它的数字从 1 到 k）。所以，让我们逐步完成算法：

1.  初始化`k`“垃圾箱”：`O(k)`
2.  计算每个数字出现的频率：`O(n)`
    *   所有 bin 中的值的总和正好是`n`，因为这就是我们在数组中总共有多少条目
3.  遍历箱：`O(k)`
    *   在结果数组中设置与 bin 所代表的一样多的元素：看似`O(n)`

这里重要的是我们*知道*，即使我们迭代`k`bin 并且*通常*可以达到`n`每个 bin 表示的值，我们设置 bin 以便在外部循环的所有迭代中，内部循环循环仍然运行总`n`次数。因此，这一步的总复杂度实际上是`O(n)`。

如果我们忽略了我们对垃圾箱内容的额外了解，那么您绝对是对的。

现在有一个最后的转折：如果`k > n`，它实际上是 in`O(k)`而不是`O(n)`！因为现在外循环是“更频繁地运行”的东西。

我希望这有点道理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:51:19.127

正如你所看到的循环

```
m=1;
for ( i=1; i <= k; i++)    // consider each number in the range
     for ( j=1; j <= times[ i ]; j++) { // generate that number in 
        A[m]=i;                   // the output as many times as
        m++;                      // it occurs in the input
     } 
```

它的复杂性将等于内部循环主体执行的次数。当`i = 1`, 执行`times[1]`次数, when `i = 2`=>`times[2]`次, 如此, when `i = k`,`times[k]`次。因此，内部主体总共执行了`times[1] + times[2] + ... + times[k]`几次，并且该总和等于`n`，因为每个元素都被计算一次。

# iphone - Click event of UIButton is not getting fired

> ID：15546980
> 
> 赞同：4
> 
> 时间：2013-03-21T12:02:17.103
> 
> 标签：iphone, ios, ipad, uibutton, xib

I made a simple app in which i am loading different `.xib` on each orientation,

I have two xib's `Portxib` and `Landxib`, in both xibs, i dragged a button and assigned a

tag value to it as `1` in both xib's.

and i wrote this code in my `viewDidLoad`

```
UIButton *btn=(UIButton *)[self.view viewWithTag:1];
    [btn addTarget:self action:@selector(BtnClick:) forControlEvents:UIControlEventTouchUpInside]; 
```

here is the selector method,

```
-(void)BtnClick:(id)sender
    {
        NSLog(@"BtnClick");
    } 
```

Click event of UIButton is not getting fired...

OR

Is there any other way to call the same method of button from both the orientation ??

**EDIT :**

`.h file`

![](../Images/eafa9299f132935491ef3b68e1f3813b.png) `.m file` ![](../Images/f0ed4b796836dfb8d7e2e8de5052fb60.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:14:25.307

确保...

1.  按钮放置在根视图中，`xib`就像您在中找到它一样，`self.view`或者确保将其放置在正确的视图中并使用该视图`viewWithTag`
2.  您已分配标签**1**，因此只需确保同一视图中没有其他控件具有标签 1 否则标签将无法识别按钮。如果这将是您的情况，那么只需将按钮的标签更改为该视图的非常不寻常的数字，例如 999 或其他任何东西并进行测试。

**编辑**

我觉得你的观点`viewDidLoad`在你设置代码的地方没有得到认可。因此，只需在加载 nib 后注释掉该代码`viewDidLoad`并转换您的**changeOrientation方法。**

```
-(void)changeOrientation
{
    UIInterfaceOrientation orientation =  [[UIApplication sharedApplication] statusBarOrientation];

    if(orientation==UIInterfaceOrientationPortrait || orientation==UIInterfaceOrientationPortraitUpsideDown)
    {
        [[NSBundle mainBundle] loadNibNamed:@"PortraitXib" owner:self options:nil];
    }
    else 
    {
        [[NSBundle mainBundle] loadNibNamed:@"LandscapeXib" owner:self options:nil];
    }

    //Adding this code here makes sense that nib is loaded and after that we are recognizing button from loaded view of nib.
    UIButton *btn = (UIButton*)[self.view viewWithTag:1];
    [btn addTarget:self action:@selector(BtnClick:) forControlEvents:UIControlEventTouchUpInside];    
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T12:08:28.800

在头文件中添加

```
IBOutlet UIButton *btn; 
```

从您的 xib 文件中引用此 btn。

在您的情况下，您使用的 btn 未从 xib 文件中引用，因此该方法未触发

```
-(IBAction)BtnClick:(id)sender
{
    NSLog(@"BtnClick");
} 
```

将该函数设为 IBAction 并从 nib btn 中引用它。在这种情况下，您无需显式添加目标。

如果您没有在笔尖中添加按钮，那么不要忘记初始化并将子视图添加到视图

你可以看到这个教程[http://www.idev101.com/learn/interface_builder_connections.html](http://www.idev101.com/learn/interface_builder_connections.html)

**编辑** 检查什么是打印？

```
 for (UIButton *but in [self.view subviews])
     {
            NSLog("but.tag %d",but.tag);
            if(but.tag==1)// compare for same row elements
            {
            NSLog("Button Added");

              [btn addTarget:self action:@selector(BtnClick:) forControlEvents:UIControlEventTouchUpInside];
            }
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:12:10.713

你可以像这样添加一个按钮。将此添加到您的 didLoad 方法

```
 UIButton* aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
  [aButton setTag:1];
  [aButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
  [aView addSubview:aButton];
}

// then ...

- (void)buttonClicked:(UIButton*)button
{
  NSLog(@"Button %d clicked.", [button tag]);
} 
```

# c# - A kinect cursor in unity

> ID：15546986
> 
> 赞同：0
> 
> 时间：2013-03-21T12:02:31.330
> 
> 标签：c#, cursor, unity3d, kinect

I wish to be able to get a curser working in unity using Kinect. its essential that i do this by using the kinect sdk as a plugin into unity and not to use openni , ive managed to get it half working however its not really perfected. At the moment ive got it working along the x axis but it doesnt cover the whole screen. It would be more ideal to have the cursor start at the center of the screen the move accordingly. At the moment when moving more towards the right side of the screen it only goes halfway. I rather not hard code in a float number, but to rather calculate according to screen. In unity there was a function where you could scale to world

```
void Update () {

    if (sw.pollSkeleton())
    {
        distance.x=sw.bonePos[0,2].x - sw.bonePos[0,7].x;//bonpos 0,2 is the spine 0,7 is the left hand

        //spine position will usually be around (0.1,1.2,0.3)
        /*
        Debug.Log("the distance is"+distance.x);

        */
        /*
         * (-0.2,1.4,0.7) hand over head on left side// essentially by this trime
         * (-0.3,1.0,0.6) hand near shoulders resonably high (-0.4,1.0,0.7) shoulders meaning anything 1.0 region
         * (-0.2,0.6,0.7) hand lower torso level curser should then be alive
         * (-)
         * (-0.1,0.7,0.3)hand at the side shouldnt record curser (-0.1,0.5,0.3) 0.0 -0.1
         * 
         */

        /*
         * (0.3,1.3,0.8)left hand over head on right side
         * (0.2,1.0,0.8) hand higher up on the other side right shoulder (0.4,1.0,0.7) further right
         * (0.3,0.9,0.7) hand lower then shoullder but pointing towards the right
         * (0.3,0.7,0.6) hand lower right below waist
         * (0.2,0.7,0.5) hand close to groin and spine
         */

        //if the left hands x axis is less than that of the spine
        //
        if(sw.bonePos[0,7].x<sw.bonePos[0,2].x)
        {
            //distance being 0.2053766 * -0.5f
             difference = -0.5f*distance.x;
            //difference being -0.1026883
            Debug.Log("hand is over by the left");

        }
        if(sw.bonePos[0,7].x>=sw.bonePos[0,2].x)
        {
             difference = -0.8f*distance.x;
            Debug.Log("hand is over by the right");

        }

        Debug.Log("Dist: " + distance.x + ", Diff: " + difference);

        Debug.Log("The spine is positioned at :" +sw.bonePos[0,2]+"The left hand is at :" +sw.bonePos[0,7]+" the position of the cursor"+transform.position);
    }

}

void OnGUI() {
    //left top width height
    Rect r = new Rect(Screen.width * (difference + 0.3f),0.5f*Screen.height,100,100);
    /*screen.width 480 * 0.1973117,0.5f*1280,100,100
     * 
     * 
     */
    GUI.Label(r,cursor);
    //GUI.DrawTexture();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:08:54.270

万一有人遇到这个问题，我找到了一个可以玩的工作，我在这个网站上找到 [了将一系列值映射到另一个](https://stackoverflow.com/questions/1969240/mapping-a-range-of-values-to-another)

```
float translate(float value, float leftMin, float leftMax, float rightMin,float rightMax)
{
    float leftSpan = leftMax - leftMin;
    float rightSpan= rightMax - rightMin;

    float valueScaled = (float)(value-leftMin)/(float)(leftSpan);
    return rightMin+(valueScaled * rightSpan);
} 
```

在我的更新方法中，我会这样做

```
differnetx=translate(distance.x,.6f,0,0,1);
differencey=translate(distance.y,.5f,0,0,1); 
```

这将创建一个从手的最远伸展到脊椎的矩形，并将其映射到屏幕。当手穿过身体时，kinect 有时会感到困惑，所以我认为最好不要做所有的导航而不是穿过脊柱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:34:35.410

我没有处理过 Unity，所以很遗憾我不能直接谈论 Unity 的代码——但我之前已经发布过 Kinect SDK 的代码。在我对这个问题的回答中，我包含了在播放器周围创建一个边界框以表示屏幕的源代码：

[如何使用骨骼关节作为光标使用边界（无手势）](https://stackoverflow.com/questions/12569706/how-to-use-skeletal-joint-to-act-as-cursor-using-bounds-no-gestures/12610931#12610931)

上面帖子中的代码创建了一个框，该框由玩家身体周围的以下点包围：

*   肩部 = 屏幕顶部
*   臀部 = 屏幕底部
*   左肩 = 屏幕上最左边

为了获得最右边的屏幕位置，我将左右肩之间的距离添加到右肩位置。

这提供了一个舒适的区域，允许玩家在屏幕上移动光标。它还可以轻松扩展到不同大小的不同玩家，并且无论玩家站在 Kinect 的 FOV 中的哪个位置都可以正常工作。

这个概念应该适用于 Unity 代码。

# android-camera - 在android中单击按钮后捕获5张图像

> ID：15546999
> 
> 赞同：0
> 
> 时间：2013-03-21T12:03:12.000
> 
> 标签：android-camera

我正在开发安卓应用程序。目的是在单击捕获按钮后捕获 5 张图像。我可以使用以下代码捕获单个图像。但是如何在单击一个按钮后拍摄 5 张图像。请问有人可以帮我这样做吗？

代码片段：

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

import com.camera.facedetectionexample.R;

public class FaceDetectionExample extends Activity {
    private static final int TAKE_PICTURE_CODE = 100;

    private Bitmap cameraBitmap = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button)findViewById(R.id.take_picture)).setOnClickListener(btnClick);
}

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if(TAKE_PICTURE_CODE == requestCode){
                    processCameraImage(data);
            }
    }

private void openCamera(){
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

    startActivityForResult(intent, TAKE_PICTURE_CODE);
}

private void processCameraImage(Intent intent){
    setContentView(R.layout.detectlayout);

    ((Button)findViewById(R.id.detect_face)).setOnClickListener(btnClick);

    ImageView imageView = (ImageView)findViewById(R.id.image_view);

    cameraBitmap = (Bitmap)intent.getExtras().get("data");

    imageView.setImageBitmap(cameraBitmap);
}

private View.OnClickListener btnClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
                switch(v.getId()){
                        case R.id.take_picture:         
                            openCamera();   
                            break;
                }
        }
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:01:01.040

你会想要使用突发模式，看看

[如何使相机可以使用连拍模式](https://stackoverflow.com/questions/6889271/how-to-make-burst-mode-available-to-camera)

应该说得很清楚。