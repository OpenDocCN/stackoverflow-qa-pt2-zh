# StackOverflow 问答 14445000-14445999

# vb.net - 通过 Visual Basic 应用程序在 Unix 服务器上执行命令

> ID：14445004
> 
> 赞同：2
> 
> 时间：2013-01-21T18:31:37.823
> 
> 标签：vb.net, bash, shell, unix

我需要有关使用 Visual Basic 应用程序在 Unix 服务器上执行命令的帮助。我正在使用 Visual Basic Express 2010。

PS我可以使用连接到服务器`systems.net.sockets`但不能发送命令来执行。

我愿意尝试任何不同的方法，我只需要知道如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:46:05.937

我可以想到两种方法来实现这一点：

1.  在系统上安装一个像 Putty 这样的程序，并使用 Putty 对服务器（应用程序外部）进行 SSH 调用，并以这种方式发送您的命令。这将需要对您的应用程序进行一些提升的权限，因为它必须直接访问系统。在我看来，这是做到这一点的“丑陋”方式。

2.  找到一个 VB SSH 库。我找到[了这个](http://sshnet.codeplex.com/)，但必须有更多。这将允许您创建到 Unix 机器的 SSH 连接并传递您要运行的命令。这将是“最好的”方式。

编辑：

它是 CSHARP 并不重要。您可以下载 Visual C# 2010 Express 并打开 Renci.SshNet 并构建它。构建完成后，您将获得一个 dll，然后您可以将其添加为对 VB 项目的引用。有点痛苦，但使用 Express 版本需要付出很小的代价。:)

这是在 Visual C# 2010 Express 中打开并运行构建的 ssh 库的屏幕截图。您可以在左下角看到“构建成功”： ![构建截图](../Images/1ccf605ba64f1d297ed09a841b799788.png)

一旦您将其作为参考，您就可以使用该库与服务器建立 ssh 连接并运行您的命令。这是一些示例代码。我创建了一个 VB Web 应用程序，将 dll 添加为引用，并将单击事件添加到将结果吐出到标签控件的按钮中：

```
Protected Sub btnSSHTest_Click(sender As Object, e As EventArgs) Handles btnSSHTest.Click

    'Create the objects needed to make the connection'
    Dim connInfo As New Renci.SshNet.PasswordConnectionInfo("hostname", "username", "password")
    Dim sshClient As New Renci.SshNet.SshClient(connInfo)

    'Need to hold the command'
    Dim cmd As Renci.SshNet.SshCommand

    Using sshClient
        'connect to the server'
        sshClient.Connect()

        'Run the command and put the results into the cmd object. In this case'
        'I am just running a directory list'
        cmd = sshClient.RunCommand("ls -lthr")

        'my web page had a label control on it. I placed the results of the cmd into'
        'the label'
        lblResult.Text = cmd.Result

        'Close the connection.'
        sshClient.Disconnect()
    End Using

End Sub 
```

编辑：

只是为了确保它在非 Web 应用程序中工作，我在使用 Vb 2010 express 创建的 Windows 窗体应用程序中做了示例。我在表单中添加了一个按钮和一个标签，并将上面的代码添加到按钮单击事件中。然后我添加了对从 C# 2010 Express 创建的 DLL（库）的引用。

这是添加引用的屏幕截图： ![如何添加参考](../Images/103354e0a574b88fe0ed90057579a083.png)

这是项目属性的屏幕截图，显示已添加参考： ![显示项目中引用的屏幕截图](../Images/91a865e246efa7f7cf156689424d214c.png)

接下来，我运行项目并单击按钮。与 unix 框的连接已建立，命令的结果（在本例中为“ls -lthr”）被放置在标签中。我以 root 身份登录（不推荐）并从 /root/ 目录运行命令。这就是为什么那里没有多少。 ![应用程序运行](../Images/fdb22041528681ce861277506e38acd1.png)

# linux - Linux：在所有文件中搜索特定单词

> ID：14445005
> 
> 赞同：5
> 
> 时间：2013-01-21T18:31:54.017
> 
> 标签：linux, grep

我正在使用 Ubuntu 12 。我正在尝试在我的 Ubuntu 机器主目录中搜索单词“SymbolSetThree”。

为此我使用

```
 grep "SymbolSetThree" /home 
```

**它只是显示为 grep: /home: 是一个目录**

**请让我知道如何在 Linux 的所有文件中搜索特定单词？？**

这是我试过的

```
sai@sai-Aspire-4720Z:/$  grep "SymbolSetThree" /home
grep: /home: Is a directory 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:56:00.403

你很接近，你只需要`-r`开关让你的命令正常工作。

```
 grep -r "SymbolSetThree" /home 
```

会成功的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:33:07.617

使用`查找：

```
find /home -type f | xargs grep SymbolSetThree 
```

`-exec`通过使用参数 to `find`（而不是）可以实现相同的结果`xargs`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T18:58:27.753

对于这类任务，我真的很喜欢 ack-grep，它是面向程序员的（只有源文件，.py .rb .c .sh），但是使用 -a 它会查找所有类型的文件。

```
ack-grep -a "SymbolSetThree" 
```

# php - 通过正则表达式从字符串中删除重复匹配

> ID：14445009
> 
> 赞同：0
> 
> 时间：2013-01-21T18:32:08.273
> 
> 标签：php, regex, arrays, preg-match-all, array-unique

```
<?php

function get_video() {

$stripper = "Content...[video=1], content...content...[video=2],
             content...content...content...[video=1], no more...";

preg_match_all("/\[video=(.+?)\]/smi", $stripper, $search);  

$unique = array_unique($search[0]);

$total = count($unique);     
for($i=0; $i < $total; $i++) 
{    
  $vid = $search[1][$i]; 
  if ($vid > 0) 
  {      
    $random_numbers = rand(1, 1000);
    $video_id = $vid."_".$random_numbers;
    $stripper = str_replace($search[0][$i], $video_id, $stripper); 
  } 
} 
return $stripper;
}  

echo get_video();   
?> 
```

我想删除 $stripper 中的重复 [video=1]，这是我需要的结果：

```
Content...1_195, content...content...2_963, 
content...content...content..., no more... 
```

我正在使用 array_unique() 函数来删除重复的数组。从我上面的代码中，如果我 print_r($unique)，重复的数组已被删除：

```
Array ( [0] => [video=1] [1] => [video=2] ) 
```

但如果我回显 get_video()，重复的 [video=1] 仍然存在：

```
Content...1_195, content...content...2_963, 
content...content...content...1_195([video=1]), no more... 
```

我想不通为什么！！！:(

演示：[http ://eval.in/7178](http://eval.in/7178)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:47:48.793

要删除重复项，请执行 a`preg_replace_callback`并将重复项替换为“”。`preg_match_all`在您致电之前使用以下代码，

```
$hash = array();
$stripper = preg_replace_callback("/\[video=(.+?)\]/smi",function($m){
    global $hash;
    if(isset($hash[$m[0]]))
        return "";
    else{
        $hash[$m[0]]=1;
        return $m[0];
    }
}, $stripper); 
```

见[http://eval.in/7185](http://eval.in/7185)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:18:48.810

你可以试试这个；

```
$stripper = "Content...[video=1], content...content...[video=2],
                content...content...content...[video=1], no more...";
preg_match_all("/\[video=([^\]]*)/i", $stripper, $matches);
$result = array();
foreach ($matches[1] as $k => $v) {
    if (!isset($result[$v])) {
        $result[$v] = $v;
    }
}
print_r($result); 
```

输出；

```
Array
(
    [1] => 1
    [2] => 2
) 
```

# c - Ping6没有响应时间？

> ID：14445015
> 
> 赞同：0
> 
> 时间：2013-01-21T18:32:22.033
> 
> 标签：c, networking, network-programming, ipv6

我正在尝试 ping6 一个地址。如果有回应就好了。如果没有响应，ping 需要 100-300 毫秒才能返回。有没有办法设置无响应时间？默认无响应时间是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:40:36.800

如果没有响应，ping6 将超时，即它将等待响应持续时间 t，然后报告“destination unreachable”。

要更改默认持续时间，请使用 -W 选项： -W timeout

[http://man.he.net/man8/ping6](http://man.he.net/man8/ping6)

# jquery-mobile - 在加载页面期间加载对话框

> ID：14445016
> 
> 赞同：0
> 
> 时间：2013-01-21T18:32:25.973
> 
> 标签：jquery-mobile

我正在使用 jQuery Mobile 开发一个简单的工作流程。

我正在从 Page0（或 Page1）切换到 Page2。我想让 Page2 在显示自己之前将 Page3 （基于条件）显示为对话框。如果我在对话框（Page3）中单击“取消”，我想返回到 Page0（或 Page1）。

我可以显示对话框，但它在显示 Page2 之后显示（如闪烁）。取消（使用 data-rel:back）总是返回到 Page2 并最终进入无限循环。

谁能帮我这个？

我尽力解释这一点。让我知道这是否不完全清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:51:48.157

像这样的东西：http: [//jsfiddle.net/Gajotres/7RQaM/](http://jsfiddle.net/Gajotres/7RQaM/)

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="page0">
        <div data-theme="a" data-role="header">
            <h3>
                Page 0
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <a href="#page3" data-role="button" data-rel="dialog">Open dialog</a> 
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>

    <div data-role="dialog" id="page3">

        <div data-role="header" data-theme="d">
            <h1>Dialog</h1>

        </div>

        <div data-role="content" data-theme="c">
            <h1>What do you want to do?</h1>
            <p>This is a regular page, styled as a dialog. To create a dialog, just link to a normal page and include a transition and <code>data-rel="dialog"</code> attribute.</p>
            <a href="#page2" data-role="button" data-theme="b">Go to page 2</a>       
            <a href="#page0" data-role="button" data-theme="c">Go back to page 0</a>    
        </div>
    </div>    

    <div data-role="page" id="page2">
        <div data-theme="a" data-role="header">
            <a href="#page0" class="ui-btn-left">Back</a>            
            <h3>
                Page 2
            </h3>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>
</body>
</html> 
```

您不能同时显示 2 个页面。所以最好的办法是显示对话框并让用户选择要做什么。

这是主要问题。您可以将页面更改为 page2，然后使用一些页面事件（如**pagebeforeshow**）立即切换到 page2。由于 jQM 的工作原理，page2 将暂时显示。但即使你能解决这个问题。当您关闭对话框并返回到 page2 时，它将再次显示一个对话框，因为它的**pagebefpreshow**仍在尝试将页面**更改**为对话框。

**编辑 ：**

我错了，可以这样做：

```
$('#page3').live('pagebeforeshow',function(e,data){    
    $('[title="Close"]').off();
    $('[title="Close"]').attr('href','#page2');
}); 
```

基本上你想要做的是显示对话框而不显示 page2。并覆盖其关闭按钮以更改您想要的页面。**$('[title="关闭"]').off();** 在这里删除先前的事件。

我还从顶部更改了一个示例。

# javascript - 有人可以让我知道从字符串中删除特定内联 CSS 样式的最佳方法吗？

> ID：14445023
> 
> 赞同：1
> 
> 时间：2013-01-21T18:33:02.203
> 
> 标签：javascript, css, regex

我有一个包含 html / CSS 的字符串（该字符串是使用富文本编辑器创建的）。数据被多个应用程序使用，一些应用程序按原样使用格式，一些应用程序尝试将新格式应用于数据。我们对 html 没有任何问题，因为它很容易删除这些数据。

我不确定从字符串中删除特定 CSS 的最佳方法是什么。仅供参考……某些字符串可能不包含 CSS……我正在考虑使用正则表达式……但不太确定这是否是万无一失的方法……

我知道我们可以使用以下方式删除

```
document.getElementById("whatever").className = "";
$('whatever').remmoveClass(); 
```

但这会删除所有 CSS 样式。

例如：我需要从下面的文本中删除下面的内联 CSS

```
<style type="text/css"> p { text-indent: 0pt;padding: 0px 0px 0px 0px;margin-top: 0px;margin-right: 0px;margin-bottom: 12px;margin-left: 0px;text-align: left;font-family: 'Verdana';font-style: Normal;font-weight: normal;font-size: 16px;color: #000000; } .defaultDocumentStyle { telerik-style-type: default;telerik-style-name: defaultDocumentStyle;font-family: 'Verdana';font-style: Normal;font-weight: bold;font-size: 10.6700000762939px;margin-bottom: 12px; } </style><p><span>ddfggfg</span></p> 
```

我只需要 ddfggfg

编辑：字符串可能不一定是 html 字符串，因为他们也可以使用简单的文本编辑器，因此我不能假设字符串将包含 HTML。

我主要在将数据导出为 CSV / PDF 时遇到此问题。内联 CSS 类与数据一起导出。

谢谢，
巴拉尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:34:01.980

您需要解析 HTML 并删除`style=""`和可能的`class=""`属性。

使用 jQuery：

```
var dom = $('<div>' + source + '</div>');
dom.find('*').removeAttr('style');
var cleaned = dom.html(); 
```

您可能还想`.find('style')`和`.remove()`他们在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:50:14.070

如何设置特定样式以覆盖编辑器可能设置的任何内容？如果您有放置内容的特定类或 ID，则可以在 CSS 中执行以下操作：

```
#whatever p{
    margin-bottom: 0px !important;
} 
```

这只是一个简短的示例，但是如果您希望它具有特定的外观，则可以设置一些覆盖以确保样式一致。缺点是您必须覆盖与您期望的外观相冲突的每个 CSS 属性。

# jsp - 如何验证/无效会话 jsp/servlet？

> ID：14445024
> 
> 赞同：14
> 
> 时间：2013-01-21T18:33:04.367
> 
> 标签：jsp, session, servlets, invalidation

当用户成功登录时，我在我的 servlet 中打开了会话：

```
HttpSession session = request.getSession(true);
session.setAttribute("name", name); 
```

然后我在 logout.jsp 中写了终止会话：

```
<%session.invalidate();%> 
```

要检查会话是否有效，我正在这样做：

```
HttpSession session = request.getSession();
String name = (String) session.getAttribute("name"); 
```

但它不起作用，即使在 session.invalidate 之后，我也让会话有效。有谁知道我在哪里做错了？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-21T18:41:39.307

您应该调用 session.getSession(false) - 如果没有当前会话，则返回 null。

根据[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

> `HttpSession#getSession(boolean create)`- create - 如果需要，为该请求创建一个新会话；如果没有当前会话，则返回 null。

所以会话值检查的正确方法是 -

```
HttpSession session = request.getSession(false);
if(session!=null)
  session.setAttribute("name", name); 
```

一旦您使会话无效-

```
HttpSession session = request.getSession(false);
if(session!=null)
session.invalidate(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-02T12:47:16.173

验证会话

```
HttpSession session = request.getSession(true);
session.setAttribute("name", name); 
```

要使其无效，您需要做

```
session.removeAttribute("name");
session.invalidate(); 
```

但是您需要记住一件事，该对象可能会变得无效，但这并不意味着它将立即清除，即使在其所有属性消失后使其无效后，会话对象也可能会被重用，我得到了相同的用户 ID和创作时间。

# android - Nested Layouts not showing properly in Eclipse

> ID：14445033
> 
> 赞同：0
> 
> 时间：2013-01-21T18:33:26.187
> 
> 标签：android, eclipse, android-layout

I have 3 Linear Layouts inside a Relative Layout. It seems to be working in emulator and on physical device, however in Eclipse it's completely off.

I am not sure whether there is some mistake in my code or this some normal behavior of Eclipse.

**The code is:**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >    

<LinearLayout
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#E89745"
    android:layout_alignParentTop="true"
    android:layout_above="@+id/logins"
    >

    <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="header"
       android:gravity="center"
    />

</LinearLayout>

<LinearLayout
 android:id="@+id/logins"
 android:orientation="vertical"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:layout_centerInParent="true"
 android:background="#F7E7AB">

    <EditText
        android:id="@+id/EditText01" 
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        />

    <EditText
        android:id="@+id/EditText02" 
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        />

    <Button
        android:id="@+id/Button01"
        android:text="Button"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        />

</LinearLayout>

<LinearLayout
    android:id="@+id/footer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_below="@+id/logins"
    android:layout_alignParentBottom="true"
    android:background="#61A179"
    android:gravity="center"
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="footer" />

</LinearLayout>
</RelativeLayout> 
```

**What it looks like in Eclipse:**
![What it looks like in Eclipse:](../Images/c8ecbc76b7a1e4ac67b37973f922cdf3.png)
**And in emulator and on device:**
![And in emulator and on device:](../Images/05ecb8dbfa4509100d64de5e59922bb5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:10:25.093

Simply by copy-pasting the provided XML, here's what I'm getting in the Eclipse UI Editor.

![My rendition of the provided XML](../Images/d4f0b0f1102c3fa03b90d26a344be004.png)

I'm currently using Eclipse v4.2.1 and ADT v21.0.1.

I'm thinking perhaps you're running an older version of the ADT Eclipse plugin and it's causing you some issues. Try updating it via the Eclipse Help menu.

# voip - 设计与自动电话服务具有单向交互的自动拨号器

> ID：14445036
> 
> 赞同：1
> 
> 时间：2013-01-21T18:33:36.867
> 
> 标签：voip, phone-call, modem, dtmf

我尝试搜索旧大学的档案，但找不到任何真正回答我问题的东西，所以就到这里了。

我正在尝试设计一个简单的自动拨号器。也许已经有商业和免费软件程序可以满足我的需要，但我还没有找到它们，或者它们没有宣传我需要的功能。一句话，我需要自动拨号器向电话服务报告信息。有关更多详细信息，我的自动拨号程序需要执行以下操作：

1.  **读取输入文件**- 此输入文件将由另一个程序生成。输入文件一天会改变很多次，但是是定期的，所以在输入文件更新后拨号程序需要自动运行。
2.  **它只需要拨打一个号码，永远。**
3.  **它呼叫的号码是一个自动号码**。即“输入您的身份证号”、“输入您的密码”、“嗨哈尔，空气温度是多少？”、“水位是多少？”、“海浪有多大？”
4.  **该程序需要与电话服务交互，但只发送 info**。它是一种单向交互，它不需要接收信息。这可能是一个非常“愚蠢”的交互（即呼叫号码，等待/睡眠 10 秒，输入 ID 号，等待 5 秒，输入密码，等待 4 秒，输入温度......）。
5.  **它发送到电话服务的交互/信息将来自输入文件。** 电话服务有一个导航树，程序需要根据输入文件中的信息来处理它。我想我需要向电话服务发送 DTMF 音。 [Android：您可以通过电话发送/接收数据吗？](https://stackoverflow.com/questions/5989591/android-can-you-send-receive-data-along-a-phonecall)
6.  **我无法更改电话服务**。我希望电话服务能够读取我的输入文件并切断中间人，但我做不到。已经试过了。

我不是一个伟大的程序员，但我可以用几种语言编程。我对 Python 最满意，但我四处探索发现了一些人们用 C#、C 和 C++ 编写脚本的示例，所以也许我需要复习这些。Stackoverflow 上的一篇较早的帖子建议使用 Skype4py，但我不确定 Skype 是否支持。

我不太确定如何拨打电话。我应该通过 VoIP 执行此操作吗？我应该使用老式调制解调器吗？他们不再卖调制解调器了吗？Matthew Broderick 还有他的 War Games 吗？我可以借用一下吗？哪种语言擅长初始化调制解调器和拨打电话？我正在寻找简单，不需要闪光灯。我发现的大多数自动拨号器都是为了快速拨打许多不同的电话号码而构建的，我假设是为电话推销员或呼叫中心服务的，但在拨打电话后我找不到真正能做任何事情的自动拨号器。

如果您能给我任何指导，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T04:08:19.107

您可以简单地使用 ICTBroadcast 提供的自定义令牌，该令牌将完全满足您的要求，并将您的自定义和个性化信息自动播放到联系人列表中，请访问以下g了解更多详细信息

[http://www.ictbroadcast.com/creating-personalized-messages-using-custom-tokens-in-email-campaign](http://www.ictbroadcast.com/creating-personalized-messages-using-custom-tokens-in-email-campaign)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:40:27.200

您可以结合使用两个 WC3 开放标准来实现这些要求；[呼叫控制 XML (CCXML)](http://www.w3.org/TR/ccxml/)和[VoiceXML](http://www.w3.org/TR/voicexml20/)。您使用 CCXML 向电话服务发出出站呼叫并确定电话何时被应答。一旦 CCXML 确定它得到应答，它就可以将控制权传递给 VoiceXML 应用程序。VoiceXML 应用程序可以与数据库或文件集成，以确定与电话服务交互所需的步骤。

要将 DTMF 数字发送到电话服务，您只需将它们作为提示进行播放。大多数 VoiceXML 平台使用 WAV 音频文件进行播放。您可以[在此处获取预先录制的 DTMF 信号作为 WAV 文件](http://evolution.voxeo.com/library/audio/prompts/dtmf/index.jsp)。

[Voxeo Prophecy](http://evolution.voxeo.com/)是一个出色的 CCXML/VoiceXML 平台来测试这一点。您可以免费下载两端口系统或在他们的云服务上免费开发。他们的支持非常好，他们将在您的开发/测试阶段为您提供帮助。他们有[关于如何使用 CCXML 进行外拨的很好的文档](http://docs.voxeo.com/ccxml/1.0-final/)。请参阅 F部分*外拨*。

CCXML 和 VoiceXML 基于 Web 标准，因此您可以使用自己喜欢的 Web 开发语言和工具，例如 ASP.NET 和 C#。有一个很好的[开源项目叫做 VoiceModel](http://voicemodel.codeplex.com/)，它将 VoiceXML 抽象到更高的层次，使 ASP.NET MVC 开发人员更容易创建 VoiceXML 应用程序。您可能希望查看此项目以使用 C# 开发 VoiceXML。有很多例子。查看[动态菜单示例](http://kevin-junghans.blogspot.com/2012/12/dynamic-menus-with-voicemodel.html)，了解如何读取一些元数据（例如文件）并动态创建语音应用程序调用流程。

您正在与之交互的电话服务是[IVR 系统](http://en.wikipedia.org/wiki/Interactive_voice_response). 基本上，您正在构建一个 IVR 系统以与另一个 IVR 系统进行交互，许多 IVR 开发人员会这样做来负载测试他们的 IVR 应用程序。所以我知道这是可行的。您需要了解的是，电话服务上的 IVR 应用程序是否被开发为使用强插。强插是一种允许呼叫者中断 IVR 正在播放的录音以输入某些输入（DTMF 或语音）的功能。如果启用了强插，那么您不必担心 IVR 应用程序中的时间问题，您几乎可以立即播放 DTMF。如果插入已关闭，那么您将必须计算出录制提示的长度并在您的应用程序中设置暂停，以便在正确的时间播放 DTMF。请注意，整个应用程序的插入可能不一致，某些区域可能会使用它，而其他区域可能不会。

您可以通过播放录制的静音来暂停您的应用程序。我从来没有使用过这个软件，但是[这里有一个可以生成](http://www.softpedia.com/get/Multimedia/Audio/Other-AUDIO-Tools/Silence.shtml)不同长度的静音 WAV 文件。您还可以使用 WAV 编辑器来创建这些音频文件。

# javascript - Jquery inArray() 方法在 Jquery 对象中查找类

> ID：14445038
> 
> 赞同：1
> 
> 时间：2013-01-21T18:34:05.790
> 
> 标签：javascript, jquery, arrays

假设我有一个 Jquery Object `$('.class0 .class1 .class2...')`。我想检查一个类`.classX`是否在这个对象中。我怎样才能做到这一点？我不认为`inArray()`不适应

同时，为了让我更清楚，如果我有一个 Jquery 对象`$('.class0, .class1, .class2, ...')`，如果我想检查一个类`.classX`是否在这个对象中，我应该使用`inArray()`方法，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:35:16.917

如果 jQuery 对象中有一组元素，您可以使用[`filter()`](http://api.jquery.com/filter/)：

```
var isInside = $(".class0, .class1, .class2, ...").filter(".classX").length > 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:35:23.633

使用[`.hasClass()`](http://api.jquery.com/hasClass/).

```
var hasClass = $obj.hasClass("classX"); 
```

注意没有点 ( `.`) 字符前缀`classX`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T18:38:26.553

```
$('.class0, .class1, .class2').is('.class2'); 
```

[**小提琴**](http://jsfiddle.net/adeneo/DSvYH/1/)

# python - 如何从根集合（文件夹）中删除资源（Google Docs 文档）

> ID：14445040
> 
> 赞同：1
> 
> 时间：2013-01-21T18:34:20.313
> 
> 标签：python, gdata, google-docs-api, gdata-api

我正在使用 python gdata 库复制和移动特定文件夹中的 google Docs 文件。我正在使用 DocsClient 中的 MoveResource 方法，该文件出现在所需的文件夹中，但也保留在根文件夹中。

我不知道如何从根文件夹中删除它？！

```
import gdata.docs.service
import gdata.docs.client
import gdata.docs.data

doc_service = gdata.docs.client.DocsClient() 
doc_service.ClientLogin('myId', 'myPassword', 'myAppName')

# this is my source document
doc = doc_service.GetResourceById('ABC123')

# extracting the folder of my source document to move the copy in the same folder
for parent in doc.InCollections(): 
    if parent.title == 'myFilter':
        destination_folder_id = parent.href.split('%3A')[1]
        destination_folder = doc_service.GetResourceById(destination_folder_id)

# making a copy of my source
newdoc = doc_service.CopyResource(doc, 'Test Python')

# moving my copy to the same folder as my source
# but the copy also stays in the root folder!
moveddoc = doc_service.MoveResource( newdoc, destination_folder ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T19:36:55.050

您可以使用以下代码从根集合中删除 Google Docs 文件：

```
doc_service.Delete('https://docs.google.com/feeds/default/private/full/folder%3Aroot/contents/' + doc.resource_id.text, force=True) 
```

# objective-c - Objective-C 编程中的通信委托

> ID：14445042
> 
> 赞同：1
> 
> 时间：2013-01-21T18:34:31.270
> 
> 标签：objective-c, delegates, tableview

我已经开始用 Objective-C 编码好几天了，我对委派感到很困惑。有人可以帮忙吗？

在 MyClassA.h 中

```
@protocol MyClassADelegate <NSObject>

- (void)haveANewMessage:(NSString*)message;

@end

@interface myClassA : NSObject <NSStreamDelegate> {
    __unsafe_unretained id<MyDelegate> _delegate;
}
@property (nonatomic, assign) id<MyClassADelegate> delegate;

@end 
```

在 myClassB.h

```
@interface myClassB : NSViewController <MyTableViewDelegate,MyClassADelegate>

@property (nonatomic, strong) myClassA* instance;

@property (nonatomic, strong) IBOutlet NSTableView* tableView;

@property (nonatomic, strong) NSMutableArray* messages;

@end 
```

在 myClassA.m

我有

```
[self.delegate haveANewMessage:@"Messages"]; 
```

在 myClassB.m 中

我有

```
- (void) haveANewMessage:(NSString *)message{
    NSLog(@"Get here!");
    [self.messages addObject:message ];
    [self.tableView reloadData];
} 
```

问题是我的表格视图中没有显示任何内容。有什么帮助吗？？（实现的Table-View相关方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:56:01.183

有几件事要调查，按这个顺序。

1.  是否`Get here!`出现在您的日志中以表示您的委托方法被正确触发？
2.  你设置了吗`self.delegate = myClassBInstance`
3.  您的 TableView 委托/数据源设置是否正确？
4.  已经`self.messages`初始化了吗？

附带说明一下，在 Objective-C 中，您的类名以小写字母开头是不受欢迎的。类名应为以大写字母开头的 CamelCase，变量应为以小写字母开头的 CamelCase。

# php - 论坛报价php

> ID：14445046
> 
> 赞同：0
> 
> 时间：2013-01-21T18:34:46.377
> 
> 标签：php, regex, forum, bbcode

我想知道在一般情况下如何在论坛中进行引用。我希望用户能够在他们自己的帖子中引用其他帖子。并且引用应该包含引用和引用的作者。我想知道这应该怎么做。我应该简单地把用户名和引用放在新帖子中，还是应该只把用户 ID 和正则表达式出来，每次都从数据库中获取用户名。如果我让用户将来更改他们的用户名，效率不会很高，但“更好”。

我正在使用bbcode，所以它会是这样的：

```
[quote=username]The quote[/quote] 
```

或者如果我使用用户 ID

```
[quote=user_id]The quote[/quote] 
```

然后使用正则表达式，我将不得不捕获用户 ID 并从数据库中获取相应的用户名。

我不是要代码。我更想知道其他论坛是如何做到这一点的，以及将用户名与引号而不是用户 ID 放在一起是否“可以”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:44:24.983

通常引号只是帖子中的静态文本。用户名不是用户ID，它不是动态的，所以如果用户改变他们的用户名也不会改变。

使报价中的用户名动态化并没有太多好处，尤其是在大多数论坛中，用户名在注册后无法更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:45:18.817

一种方法（如果您的用户经常更改用户名）是在您的应用程序前端使用用户名，同时使用 ID 进行操作。所以每次用户编辑帖子时，他都可以看到：

```
[quote=foobar]baz[/quote] 
```

在数据库中是：

```
[quote=1234]baz[/quote] 
```

每次将其输出给用户时，将 ID 更改为名称，每次用户提交表单时，将用户名替换为 ID。不要忘记考虑用户名不存在的情况。

这样，用户将能够手动输入要引用的人的姓名。

然而，大多数论坛只使用用户名，这是相当普遍的做法。

# c# - 排序 DataGridView 对我不起作用

> ID：14445051
> 
> 赞同：0
> 
> 时间：2013-01-21T18:35:17.277
> 
> 标签：c#, winforms, datagridview

我有我在 DataGridView 上填写的数据库。

我尝试按这样的 Heder 对我的 DataGridView 进行排序：

```
private void dataGridView1_ColumnHeaderMouseClick(object sender,DataGridViewCellMouseEventArgs e)
{
     SortOrder ss = dataGridView1.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection;
     string strColumnName = dataGridView1.Columns[e.ColumnIndex].Name;
     label8.Text = "Column: " + strColumnName + " - " + "sort order: " + ss.ToString();

     if (strColumnName == "Column9")
     {
        if (ss == SortOrder.Ascending)
        {
            A_table = "Tmp_Kabat_SfiraTbl";
            SQL = "SELECT Color,Line,Makat,Des,sQty,sNewQty,CountBy_Name,UserName,TermNum,NewQty,Qty from " + A_table + " order by NewQty asc";
        }
        else if (ss == SortOrder.Descending)
        {
            A_table = "Tmp_Kabat_SfiraTbl";
            SQL = "SELECT Color,Line,Makat,Des,sQty,sNewQty,CountBy_Name,UserName,TermNum,NewQty,Qty from " + A_table + " order by NewQty desc";
        }
            dsView = new DataSet();
            adp = new OleDbDataAdapter(SQL, Main.Conn);
            adp.Fill(dsView, A_table);
            adp.Dispose();
            dataGridView1.DataSource = dsView.Tables[A_table].DefaultView;
            this.dataGridView1.ClearSelection();
      }
} 
```

它只工作一次，它不会从 asc 更改为 desc 排序

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:48:51.520

您需要更改 HeaderCell 的 SortGlyphDirection，最好的方法是在最后一行代码中进行`dataGridView1_ColumnHeaderMouseClick`。

这是一些不错的排序示例 [DataGridViewColumnHeaderCell.SortGlyphDirection 属性][1]

现在将如何在您的示例中使用它：

```
 private void dataGridView1_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        SortOrder ss = dataGridView1.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection;
        string strColumnName = dataGridView1.Columns[e.ColumnIndex].Name;

        PopulateDataGridView(ss, strColumnName);

        //change sorting...
        switch (ss)
        {
            case SortOrder.Ascending:
                ss = SortOrder.Descending;
                break;
            case SortOrder.Descending:
                ss = SortOrder.Ascending;
                break;
        }
        dataGridView1.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection = ss;
        //change column sort mode...
        dataGridView1.Columns[e.ColumnIndex].SortMode = DataGridViewColumnSortMode.Programmatic;
    }

    void PopulateDataGridView(SortOrder ss, string strColumnName)
    {
        label8.Text = "Column: " + strColumnName + " - " + "sort order: " + ss.ToString();
        if (ss == SortOrder.Ascending)
        {
            A_table = "Tmp_Kabat_SfiraTbl";
            SQL = "SELECT Color,Line,Makat,Des,sQty,sNewQty,CountBy_Name,UserName,TermNum,NewQty,Qty from " + A_table + " order by " + strColumnName + " asc";
        }
        else if (ss == SortOrder.Descending)
        {
            A_table = "Tmp_Kabat_SfiraTbl";
            SQL = "SELECT Color,Line,Makat,Des,sQty,sNewQty,CountBy_Name,UserName,TermNum,NewQty,Qty from " + A_table + " order by " + strColumnName + " desc";
        }
        dsView = new DataSet();
        adp = new OleDbDataAdapter(SQL, Conn);
        adp.Fill(dsView, A_table);
        adp.Dispose();
        dataGridView1.DataSource = dsView.Tables[A_table].DefaultView;
        this.dataGridView1.ClearSelection();
    } 
```

对于默认人口，您可以使用以下内容：

```
PopulateDataGridView(SortOrder.Ascending, "Color"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:41:17.983

我想如果你设置：

```
dataGridView1.DataSource = null 
```

然后分配：

```
dataGridView1.DataSource = dsView.Tables[A_table].DefaultView; 
```

它应该可以工作（我前段时间遇到过类似的问题..），您可以通过任何方式使用 DataView 订单属性（无需执行 sql 语句）

# c - C 格式化字符串 - 如何将前导零添加到 float 和 int 值？

> ID：14445055
> 
> 赞同：3
> 
> 时间：2013-01-21T18:35:46.077
> 
> 标签：c, formatting, placeholder, output, printf

> **可能重复：**
> [使用 printf 打印浮点数时有额外的前导零？](https://stackoverflow.com/questions/2486410/extra-leading-zeros-when-printing-float-using-printf)

我试图让这个 C 程序的输出具有占位符零，因为这个程序的输出将用作另一个程序的输入。现在，我正在使用以下打印行。

```
fprintf(fp1, "06 BR%d%d   %3.4f%3.4f%3.4f\n",i,d,X,Y,Z);

i = index for the loop
d = index for a second loop
X = double for a Cartesian system
Y = double for a Cartesian system
Z = double for a Cartesian system 
```

现在输出如下所示：

```
06 BR12   1.00001.00001.0000 
```

我希望它如下所示：

```
06 BR0102   001.0000001.0000001.000 
```

我知道我可以手动添加占位符零（如果 i<10，添加占位符等），但是有没有比简单地在 if 语句中添加占位符更有效的方法来输出占位符零？

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T18:36:59.077

例如，您可以使用 零填充`%08.4f`。请注意，第一个数字是*整个*字段宽度，而不仅仅是小数点前所需的位数。在您的示例中，`3`in`%3.4`无效。如果你希望你的最后一个数字只有三位小数，你会想要`%07.3f`那个。

`%d`格式更容易 - 在你的情况下，应该`%02d`这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:55:44.573

以下格式将对您有所帮助。

```
float a = 1;
int x = 1, y = 2;
printf("06 BR%02d%02d   %08.4f %08.4f %08.4f\n", x, y, a, a, a); 
```

对我来说输出是

```
06 BR0102   001.0000 001.0000 001.0000 
```

# javascript - 带有 jQ uery 的按钮侦听器不起作用

> ID：14445058
> 
> 赞同：0
> 
> 时间：2013-01-21T18:35:52.530
> 
> 标签：javascript, jquery, button, input, click

所以我的问题是，我想在单击按钮时运行一些 jQuery 代码。

```
<input type="button" name="appointments_view" value="Alle Termine anzeigen" /> 
```

这是我的 jQuery 类（为了测试，监听器应该在控制台上打印出一些东西。）

```
"use strict";

$.Class("View", {
init : function() {

    $("[name='appointments_view']").click(function() {
        console.log("appointments_view");
    });

}
}); 
```

如果我在浏览器中运行它，Firebug 不会给我任何错误。当我单击按钮时，没有任何反应。

将监听器放入 $(document).ready() 函数没有帮助。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:45:17.963

你为什么不把你的功能放在上面`document.ready`？

```
$(function () {
    $("[name='appointments_view']").click(function() {
        console.log("appointments_view");
    });
}); 
```

见[小提琴](http://jsfiddle.net/nescalante/qFZH5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:57:27.857

我不确定 $.Class(..) 是什么？您是否正在尝试编写插件或其他东西。尝试在 Visual Studio 中运行您的代码并给我错误对象不支持此属性。在 jsFiddle 上应用它会产生另一个错误。但将您的代码保持为常规脚本有效。也许你可以解释得更多。下面是 jsFiddle 链接

```
$("[name='appointments_view']").click(function(){
//your code goes here.
}); 
```

[http://jsfiddle.net/ruchin/RsT6D/1/](http://jsfiddle.net/ruchin/RsT6D/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:48:23.600

我的问题是，HTML 是用 AJAX 加载的（ .load() 函数）。尽管 .load() 是在 (!) 侦听器之前编写的，但按钮没有响应。

解决方案是，在 .load() 函数的回调函数中编写侦听器。

看这里：

[在 jQuery 中动态地将侦听器添加到 ajax 创建的内容](https://stackoverflow.com/questions/2552745/dynamically-add-listener-to-ajax-created-content-in-jquery)

# android - Android：如何在 MapView 叠加层中使用\调用自定义 AlertDialog？

> ID：14445060
> 
> 赞同：0
> 
> 时间：2013-01-21T18:36:09.420
> 
> 标签：android, android-layout, android-mapview, android-overlay

您好，感谢您的帮助。

我正在使用以下代码在我的 MapView Overlay 上生成通用 AlertDialog（一切正常）....我想知道如何或更改什么来调用名为 custom.xml 的自定义 AlertDialog

```
 @Override
    protected boolean onTap(int i) 
    {

        //final Dialog dialoggg = new Dialog(mContext);
//      dialoggg.setContentView(R.layout.custom);
//        LayoutInflater inflater = LayoutInflater.from(mContext);
//        View dialogview = inflater.inflate(R.layout.custom, null);

        //when you tap on the marker this will show the informations provided by you when you create in the
        //main class the OverlayItem
        OverlayItem item = mOverlays.get(i);
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setMessage(item.getSnippet())
               .setTitle(item.getTitle())
               .setCancelable(true)
               .setPositiveButton("View Details", new DialogInterface.OnClickListener() {

                   public void onClick(DialogInterface dialog, int id) {
                       Intent intent = new Intent(new Intent("com.GoGoGo.Play.LINEUP"));
                       mContext.startActivity(intent);
                   }
               })
               .setNegativeButton("Close window", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       dialog.dismiss();
                   }
               });
        AlertDialog alert = builder.create();
        alert.show();
        return true;
    } 
```

没什么太花哨的，我只想将 AlertDialog 的背景颜色更改为黑色......（从标准灰色）。

非常感谢您的时间和帮助。-谢谢

# php - 仅使用 HTML 读取和显示服务器端文件的内容

> ID：14445069
> 
> 赞同：2
> 
> 时间：2013-01-21T18:36:46.573
> 
> 标签：php, html, web

正如标题所暗示的，我需要一种不使用 PHP 在网站上显示文件的方法。该文件不能直接访问，它只是显示一个空白页。所以它需要以明文形式阅读和打印。我试图读取的文件是一个 PHP 文件。HTML 将与要读取的文件位于同一服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:39:59.863

要使用 PHP 显示任何文件的内容，您可以这样做：

```
 echo htmlspecialchars(file_get_contents($filename)); 
```

该变量`$filename`是本地文件系统路径（不是 URL），因此文件是否可以通过 Web 访问并不重要。唯一的限制是 PHP 进程需要对文件具有读取权限。

请注意，`htmlspecialchars`应该告诉您页面的文档类型和编码使用它的第二个和第三个参数。例如：

```
 header('Content-Type: text/html; charset=utf-8'); // UTF-8
 echo '<!DOCTYPE html>'; // HTML 5
 echo htmlspecialchars(file_get_contents($filename), ENT_HTML5, 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:42:43.940

~~如果您希望它的格式很好，请参阅[`highlight_file()`](http://php.net/manual/en/function.highlight-file.php)：~~

 ~~```
print highlight_file('path/to/your/file.php'); 
```~~ 

（我还写了一个更好的[函数）](https://github.com/digitalnature/php-highlight)

 ~~要在纯 html 中执行此操作，您需要使用 javascript 并触发 ajax 请求来获取该文件。但是您仍然需要将脚本重命名为`.phps`，`.txt`或者 PHP 不会尝试解析的名称。

使用 jQuery 的示例：

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
  jQuery(document).ready(function($){
    $.ajax({
        url : "file.phps",
        dataType: "text",
        success : function (data) {
           $('<pre />').text(data).appendTo('body');
        }
    });
  });
</script> 
</head>    
<body>       
</body> 
```

（`file.phps`必须存在于您的服务器上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:30:26.093

您显然不了解 HTML 的用途——它不是一种编程语言，它是一种标记语言，用于布局。

HTML 也没有“服务器端”。一切都是客户端。没有处理您的代码，只是呈现您的页面（通过您的客户端的浏览器）。

也就是说，您无法使用 HTML 读取文件。不过，您可以使用 iframe 呈现另一个文件的内容。

```
<iframe src="myOtherFile.txt"></iframe> 
```

您不能单独使用 HTML 来“读取”和处理该文件。即使使用 javascript（这是一种编程语言，但无法访问其他文件），您也无法做到这一点。

您可以按照此处其他答案的建议，使用 javascript 来调度 ajax 调用，让您的文件在服务器上读取（例如，通过 PHP 脚本），并将值返回到您的客户端（并使用 javascript 处理结果）。~~

# java - LoaderManager中initLoader和restartLoader的区别

> ID：14445070
> 
> 赞同：128
> 
> 时间：2013-01-21T18:36:48.993
> 
> 标签：java, android, android-loadermanager

我完全迷失了`initLoader`和 的`restartLoader`功能之间的差异`LoaderManager`：

*   他们都有相同的签名。
*   `restartLoader`如果加载器不存在，还会创建一个加载器（“在此管理器中启动一个新的或重新启动一个现有的加载器”）。

这两种方法之间有什么关系吗？打电话`restartLoader`总是打电话`initLoader`吗？我可以`restartLoader`不打电话就打电话`initLoader`吗？调用`initLoader`两次刷新数据是否安全？我什么时候应该使用两者之一，**为什么**？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2014-01-04T03:33:31.073

要回答这个问题，您需要深入研究`LoaderManager`代码。虽然 LoaderManager 本身的文档不够清晰（或者不会有这个问题），但抽象 LoaderManager 的子类 LoaderManagerImpl 的文档更具启发性。

**初始化加载器**

> 调用以使用 Loader 初始化特定 ID。如果这个 ID 已经有一个与之关联的 Loader，它保持不变，并且任何以前的回调都替换为新提供的回调。如果当前没有该 ID 的 Loader，则会创建并启动一个新的 Loader。
> 
> 这个函数一般应该在组件初始化时使用，以确保创建它所依赖的 Loader。这允许它重新使用现有加载器的数据（如果已经存在），因此例如在配置更改后重新创建 Activity 时，它不需要重新创建其加载器。

**重启加载器**

> 调用以重新创建与特定 ID 关联的加载程序。如果当前有与此 ID 关联的 Loader，它将酌情取消/停止/销毁。将创建一个具有给定参数的新加载器，并且一旦可用，它的数据就会交付给您。
> 
> [...] 调用此函数后，任何与此 ID 关联的先前加载程序都将被视为无效，您将不会收到来自它们的进一步数据更新。

基本上有两种情况：

1.  id 的加载器不存在：两种方法都会创建一个新的加载器，所以没有区别
2.  id 的加载器已经存在：`initLoader`只会替换作为参数传递的回调，但不会取消或停止加载器。对于`CursorLoader`这意味着光标保持打开和活动状态（如果在调用之前是这种情况`initLoader`）。另一方面，`restartLoader 将取消、停止和销毁加载器（并像游标一样关闭底层数据源）并创建一个新的加载器（如果加载器是，它也会创建一个新的游标并重新运行查询游标加载器）。

以下是这两种方法的简化代码：

**初始化加载器**

```
LoaderInfo info = mLoaders.get(id);
if (info == null) {
    // Loader doesn't already exist -> create new one
    info = createAndInstallLoader(id, args, LoaderManager.LoaderCallbacks<Object>)callback);
} else {
   // Loader exists -> only replace callbacks   
   info.mCallbacks = (LoaderManager.LoaderCallbacks<Object>)callback;
} 
```

**重启加载器**

```
LoaderInfo info = mLoaders.get(id);
if (info != null) {
    LoaderInfo inactive = mInactiveLoaders.get(id);
    if (inactive != null) {
        // does a lot of stuff to deal with already inactive loaders
    } else {
        // Keep track of the previous instance of this loader so we can destroy
        // it when the new one completes.
        info.mLoader.abandon();
        mInactiveLoaders.put(id, info);
    }
}
info = createAndInstallLoader(id, args,  (LoaderManager.LoaderCallbacks<Object>)callback); 
```

正如我们所看到的，如果加载器不存在（info == null），两种方法都会创建一个新的加载器（info = createAndInstallLoader(...)）。如果加载器已经存在，`initLoader`则只替换回调（info.mCallbacks = ...），同时`restartLoader`停用旧加载器（当新加载器完成其工作时它将被销毁），然后创建一个新加载器。

因此，现在很清楚何时使用`initLoader`和何时使用`restartLoader`以及为什么使用这两种方法是有意义的。 `initLoader`用于确保有一个初始化的加载器。如果不存在，则创建一个新的，如果已经存在，则重新使用它。我们总是使用这种方法，除非我们需要一个新的加载器，因为要运行的查询已经改变（不是底层数据，而是像 CursorLoader 的 SQL 语句中的实际查询），在这种情况下我们将调用`restartLoader`.

*Activity/Fragment 生命周期*与使用一种或另一种方法的决定无关（并且没有必要像 Simon 建议的那样使用一次性标志来跟踪调用）！该决定完全基于对新装载机的“需求”。如果我们想运行我们使用的相同查询`initLoader`，如果我们想运行我们使用的不同查询`restartLoader`。

我们总是可以使用`restartLoader`，但这将是低效的。在屏幕旋转之后，或者如果用户离开应用程序并稍后返回到同一个 Activity，我们通常希望显示相同的查询结果，因此`restartLoader`会不必要地重新创建加载程序并关闭底层（可能很昂贵）的查询结果。

了解加载的数据与加载该数据的“查询”之间的区别非常重要。假设我们使用 CursorLoader 查询订单表。`restartLoader`如果向该表添加新订单，CursorLoader 使用 onContentChanged() 通知 UI 更新并显示新订单（在这种情况下无需使用）。如果我们只想显示未结订单，我们需要一个新查询，我们将使用`restartLoader`它返回一个反映新查询的新 CursorLoader。

* * *

> 这两种方法之间有什么关系吗？

他们共享代码来创建一个新的加载器，但是当加载器已经存在时，他们会做不同的事情。

> 打电话`restartLoader`总是打电话`initLoader`吗？

不，它永远不会。

> 我可以`restartLoader`不打电话就打电话`initLoader`吗？

是的。

> 调用`initLoader`两次刷新数据是否安全？

调用`initLoader`两次是安全的，但不会刷新数据。

> 我什么时候应该使用两者之一，**为什么**？

* * *

在我上面的解释之后，这应该（希望）很清楚。

**配置更改**

LoaderManager 在配置更改（包括方向更改）时保持其状态，因此您会认为我们无事可做。再想想...

首先，LoaderManager 不保留回调，因此如果您什么都不做，您将不会收到对您的回调方法`onLoadFinished()`之类的调用，这很可能会破坏您的应用程序。

因此，我们至少必须调用`initLoader`来恢复回调方法（`restartLoader`当然，a 也是可能的）。该[文档](http://developer.android.com/reference/android/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29)指出：

> 如果在调用点调用者处于启动状态，并且请求的加载器已经存在并且已经生成了它的数据，那么回调`onLoadFinished(Loader, D)`将立即被调用（在这个函数内部）[...]。

这意味着如果我们`initLoader`在方向更改后调用，我们将立即收到`onLoadFinished`调用，因为数据已经加载（假设是更改之前的情况）。虽然这听起来很简单，但它可能很棘手（我们不都喜欢 Android...）。

我们必须区分两种情况：

1.  处理配置本身的变化：对于使用 setRetainInstance(true) 的 Fragment 或`android:configChanges`清单中具有相应标签的 Activity 就是这种情况。这些组件在屏幕旋转后不会收到 onCreate 调用，因此请记住调用 `initLoader/restartLoader`另一个回调方法（例如 in `onActivityCreated(Bundle)`）。为了能够初始化加载器，加载器ID需要被存储（例如在一个列表中）。因为组件在配置更改中保留，所以我们可以遍历现有的加载器 id 并调用`initLoader(loaderid, ...)`.
2.  本身不处理配置更改：在这种情况下，可以在 onCreate 中初始化加载器，但我们需要手动保留加载器 ID，否则我们将无法进行所需的 initLoader/restartLoader 调用。如果 id 存储在 ArrayList 中，我们将
    `outState.putIntegerArrayList(loaderIdsKey, loaderIdsArray)`在 onSaveInstanceState 中执行并在 onCreate: 中恢复 id： `loaderIdsArray = savedInstanceState.getIntegerArrayList(loaderIdsKey)`在我们进行 initLoader 调用之前。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-05-23T04:47:27.803

`initLoader`在 Loader 已经创建时调用（例如，这通常发生在配置更改之后）告诉 LoaderManager 立即传递 Loader 的最新数据`onLoadFinished`。如果尚未创建 Loader（例如，当 Activity/Fragment 首次启动时），则调用`initLoader`告诉 LoaderManager 调用`onCreateLoader`以创建新的 Loader。

调用`restartLoader`会破坏已经存在的 Loader（以及与之关联的任何现有数据）并告诉 LoaderManager 调用`onCreateLoader`以创建新的 Loader 并启动新的加载。

* * *

文档对此也很清楚：

*   `initLoader`确保加载器已初始化并处于活动状态。如果加载器尚不存在，则创建一个并（如果活动/片段当前已启动）启动加载器。否则，最后创建的加载器将被重新使用。

*   `restartLoader`在这个管理器中启动一个新的或重新启动一个现有的加载器，向它注册回调，并且（如果活动/片段当前已启动）开始加载它。如果之前已经启动了具有相同 id 的加载器，它将在新加载器完成其工作时自动销毁。回调将在旧加载器被销毁之前传递。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-22T23:51:33.150

我最近遇到了多个加载器管理器和屏​​幕方向更改的问题，我想说，经过大量的反复试验，以下模式在活动和片段中都适用于我：

```
onCreate: call initLoader(s)
          set a one-shot flag
onResume: call restartLoader (or later, as applicable) if the one-shot is not set.
          unset the one-shot in either case. 
```

（换句话说，设置一些标志，以便*initLoader*始终运行一次，并且 restartLoader 在**第二次运行，****随后**通过*onResume*）

此外，请记住为 Activity 中的每个加载程序分配不同的 id（如果您不小心编号，这可能会导致该 Activity 中的片段出现问题）

* * *

我尝试只使用*initLoader* .... 似乎没有有效地工作。

在*onCreate*上尝试使用 null args 的*initLoader （文档说这没问题）和**onResume中的**restartLoader*（带有有效 args）......docs 是错误的，*并且 initLoader*抛出了一个空指针异常。

 ***仅尝试了*restartLoader* ...工作了一段时间，但在第5个或第6个屏幕重新定向时会爆炸。

在*onResume*中尝试了*initLoader*；再次工作一段时间然后吹。（特别是“未启动时调用doRetain：”......错误）

 *尝试了以下方法：（摘自将加载程序 id 传递给构造函数的封面类）

```
/**
 * start or restart the loader (why bother with 2 separate functions ?) (now I know why)
 * 
 * @param manager
 * @param args
 * @deprecated use {@link #restart(LoaderManager, Bundle)} in onResume (as appropriate) and {@link #initialise(LoaderManager, Bundle)} in onCreate 
 */
@Deprecated 
public void start(LoaderManager manager, Bundle args) {
    if (manager.getLoader(this.id) == null) {
        manager.initLoader(this.id, args, this);
    } else {
        manager.restartLoader(this.id, args, this);
    }
} 
```

（我在 Stack-Overflow 某处发现）

同样，这工作了一段时间，但仍然偶尔会出现故障。

* * *

## 从我在调试时可以得出的结论来看，我认为与保存/恢复实例状态有关，这需要*initLoader* (/s) 在生命周期的*onCreate*部分运行，如果它们要在循环中存活下来. （我可能错了。）

对于在结果从另一个管理器或任务返回之前无法启动的管理器（即无法在*onCreate*中初始化），我只使用*initLoader*。（我可能不正确，但它似乎有效。这些辅助加载器不是直接实例状态的一部分，因此在这种情况下使用*initLoader*实际上可能是正确的）

![生命周期](../Images/e0c2e9ecb710eb262d8190815ee12ed8.png)

* * *

查看图表和文档，我会认为 initLoader 应该在 onCreate & restartLoader 在 onRestart for Activities 中使用，但这会使 Fragments 使用一些不同的模式，我没有时间调查这是否真的稳定。其他人可以评论他们是否在这种活动模式上取得了成功？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T14:21:13.910

`initLoader`如果加载器已经存在，将重用相同的参数。如果旧数据已经加载，它会立即返回，即使您使用新参数调用它也是如此。加载器应该理想地自动通知新数据的活动。如果屏幕旋转，`initLoader`将再次调用并立即显示旧数据。

`restartLoader`当您想要强制重新加载并更改参数时。如果您要使用加载程序制作登录屏幕，您只需`restartLoader`在每次单击按钮时调用。（由于凭据不正确等原因，可能会多次单击该按钮）。如果在登录过程中屏幕旋转，您只会`initLoader`在恢复活动的已保存实例状态时调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T14:21:53.567

第一次启动时的初始化加载器使用 loadInBackground() 方法，在第二次启动时它将被省略。所以，我认为，更好的解决方案是：

```
Loader<?> loa; 
try {
    loa = getLoaderManager().getLoader(0);
} catch (Exception e) {
    loa = null;
}
if (loa == null) {
    getLoaderManager().initLoader(0, null, this);
} else {
    loa.forceLoad();
} 
```

///////////////////////////////////////// ///////////////////////

```
protected SimpleCursorAdapter mAdapter;

private abstract class SimpleCursorAdapterLoader 
    extends AsyncTaskLoader <Cursor> {

    public SimpleCursorAdapterLoader(Context context) {
        super(context);
    }

    @Override
    protected void onStartLoading() {
        if (takeContentChanged() || mAdapter.isEmpty()) {
            forceLoad();
        }
    }

    @Override
    protected void onStopLoading() {
        cancelLoad();
    }

    @Override
    protected void onReset() {
        super.onReset();
        onStopLoading();
    }
} 
```

我花了很多时间来找到这个解决方案——restartLoader(...) 在我的情况下无法正常工作。唯一的 forceLoad() 允许在没有回调的情况下完成先前的加载线程（因此您将正确完成所有数据库事务）并再次启动新线程。是的，它需要一些额外的时间，但更稳定。只有最后启动的线程才会进行回调。因此，如果您想通过中断数据库事务进行测试——欢迎您，尝试重新启动Loader(...)，否则 forceLoad()。restartLoader(...) 唯一方便的是传递新的初始数据，我的意思是参数。在这种情况下，请不要忘记在合适的 Fragment 的 onDetach() 方法中销毁 loader。还要记住，有时候，当你有活动时，让他们说，2 个带有 Loader 的 Fragment，每个包含一个 Activity——你只会到达 2 个 Loader Manager，因此 Activity 与 Fragment 共享它的 LoaderManager，在加载过程中首先显示在屏幕上。试试 LoaderManager.enableDebugLogging(true); 查看每个特定案例的详细信息。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-21T18:43:55.553

如果加载器已经存在，restartLoader 将停止/取消/销毁旧加载器，而 initLoader 将使用给定的回调初始化它。我不知道旧回调在这些情况下做了什么，但我想它们会被放弃。

我扫描了[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/app/LoaderManager.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/app/LoaderManager.java)但我无法找出确切的不同的是，除了方法做不同的事情。所以我会说，第一次使用 initLoader 并在接下来的时间重新启动，尽管我不能肯定地说他们每个人会做什么。****

# jsf - 在整个应用程序中使用用户名

> ID：14445075
> 
> 赞同：0
> 
> 时间：2013-01-21T18:37:25.050
> 
> 标签：jsf

我已经开始了一个新线程，因为旧线程偏离了原来的问题，

我有一个登录页面，针对我们的 LDAP 服务器进行验证，并且和以前一样，我会让用户输入用户名以确定代码存储数据的位置：

```
@Override
    public String getName() {
        return getId();
    } 
```

但我想用用户已经从登录页面输入的用户名替换 getName() 位，到目前为止我对这些选项感到困惑，有没有一种简单的方法可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:51:45.890

无论如何，对我来说，这些答案似乎很清楚。有两个主要选项可以检索经过*身份验证*的用户名（用户必须先前已由您的应用服务器针对某些数据库或 LDAP 进行身份验证，或者这些方法返回 null）

1.  `getRemoteUser()`

2.  `getUserPrincipal()`

默认情况下，这两种方法在`HttpServletRequest`与您的上下文关联的对象上都可用。你想如何获得对象现在是另一回事了。

在 JSF Web 应用程序中

1.  [这个问题的第一行](https://stackoverflow.com/q/5994258/1530938)提供了一种在支持 bean 中检索请求对象的方法。

2.您上一个问题的答案提供了`#{request.userName}`EL 直接从 HttpServletRequest 检索用户名到您的 JSF 视图中。

# php - 删除 URL 中的 .php 扩展名

> ID：14445077
> 
> 赞同：1
> 
> 时间：2013-01-21T18:37:35.570
> 
> 标签：php, .htaccess

我之前更改了我的`.htaccess`文件，以便我的“子目录”（13/）可以成为我用于主域的“目录”，方法是添加：

```
RewriteCond %{HTTP_HOST} ^(www.)?mydomain.com$
RewriteRule ^(/)?$ 13/index.php [L] 
```

现在我想删除`.php`扩展名和扩展`index.php?eventid=3`名`index/something`

**EDIT#1** [存储在数据库中`something`的名称在哪里]`id`

我该怎么做？以前，我确实在一些 PHP 框架中工作，但它们已经有一个专用`url`文件。所以我从来没有想太多。但是这一次，我没有使用任何框架，所以我需要修改`.htaccess`.

我环顾四周，但找不到任何可靠的博客/来源。

**编辑#2**

我的子目录是`public_html/13/`.

即，`www.mydomain.com`重定向到`www.mydomain.com/13/` 现在我想访问`www.mydomain.com/13/events.php?eventid=1`为`www.mydomain.com/events/44`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:49:05.803

```
RewriteRule ^([A-Za-z0-9\-]+)/([A-Za-z0-9\-]+)/([0-9]+)/?$ $1.php?$2=$3 
```

上面的代码会将[http://www.mydomain.com/index/eventid/3/](http://www.mydomain.com/index/eventid/3/)重定向到[http://www.mydomain.com/index.php?eventid=3](http://www.mydomain.com/index.php?eventid=3)

htaccess 非常灵活，一旦你理解了语法，创建上述的变体就很容易了。您将需要阅读可以使用的正则表达式，以及 Rewrite 模块必须提供的无数选项。我的大多数重定向看起来都像上面那样，非常简单。

编辑：您正在寻找的一个例子是 Wordpress，它使用 slugs 根据比 ID 号更具语义的东西来识别页面。您必须对数据库中的项目名称进行 url 编码，并将其作为 slug 存储在数据库中，或者找到其他方法使其在检索页面内容的数据库查询中可用。然后你的 htaccess 看起来像这样：

```
RewriteRule ^([A-Za-z0-9\-]+)/([A-Za-z0-9\-]+)/?$ $1.php?slug=$2 
```

在您的 PHP 中，您将需要创建 slug 并将它们存储在数据库中，以便它们可以用作查询中的 ID。

EDIT2：尝试将整个 htaccess 文件更改为：

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.yourdomain\.com$ [NC]
RewriteRule ^(.*)$ http://yourdomain.com/$1 [R=301,L]

RewriteRule ^([A-Za-z0-9\-]+)/([A-Za-z0-9\-]+)/([0-9]+)/?$ $1.php?$2=$3

</IfModule> 
```

我已经对其进行了测试，并且可以正常工作。你的 htaccess 中的其他东西把它搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:52:31.867

只需使用以下规则：

```
 RewriteRule ^index/([0-9]+)/?$ /index.php?eventid=$1 [QSA,L] 
```

# python - python MySQLdb不会插入数据库

> ID：14445090
> 
> 赞同：2
> 
> 时间：2013-01-21T18:38:14.067
> 
> 标签：python, mysql, mysql-python

嗨，我在将信息插入数据库时​​遇到问题。它不会发出错误。代码在这里。

```
import MySQLdb as m

def Room(room):
   db = m.connect("localhost","root","password","rooms")
   cur = db.cursor()
   cur.execute('INSERT INTO rooms (name) VALUES("%s");'% (room))
def getRoomDb():
   db = m.connect("localhost","root","password","rooms")
   cur = db.cursor()
   cur.execute("SELECT * FROM rooms;")
   result = cur.fetchall()
   return result

print getRoomDb() 
```

在我运行`Room("roomname")`它应该输出但实际上没有任何东西进入数据库之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:50:42.573

您没有调用`commit()`执行 INSERT 的事务。

在 Python 中，默认操作是回滚工作，除非您明确提交。

也可以看看：

*   [Python MySQL - SELECT 有效但 DELETE 无效？](https://stackoverflow.com/questions/1451782/python-mysql-selects-work-but-not-deletes/)
*   [Python MySQLdb 更新查询失败](https://stackoverflow.com/questions/1028671/python-mysqldb-update-query-fails)
*   [http://mysql-python.sourceforge.net/FAQ.html#my-data-disappeared-or-won-t-go-away](http://mysql-python.sourceforge.net/FAQ.html#my-data-disappeared-or-won-t-go-away)

# android - 如何在 Android 模拟器上显示 Google Map V2？

> ID：14445093
> 
> 赞同：3
> 
> 时间：2013-01-21T18:38:29.647
> 
> 标签：android

我尝试了很多从谷歌搜索中获得的步骤，以在 Android 模拟器上实现谷歌地图 v2（版本 2）。但我无法在模拟器上获得输出。谷歌地图 v1 工作正常。但我需要谷歌地图 v2 ..任何人都可以帮我？

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:58:38.033

Google Maps V2 不适用于模拟器，因为它与 Google Play 服务捆绑在一起。

如果您仍然想知道如何使其在模拟器上运行，您可能想给出这篇[博](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)文并[回答](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar/13734937#13734937)一读。正如 CommonsWare 所指出的，这些文章中列出的调整归结为盗版软件。如果您真的考虑在 Android 上进行开发，您可能需要考虑购买设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T06:09:05.343

我有类似的问题，所以我准备了一步一步的教程来展示如何在模拟器（android 4.2.2）上使用谷歌地图 android v2 看看我的博客：[http ://umut.tekguc.info/en/content /google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T07:38:01.447

我只是在我的模拟器上运行谷歌地图 v2。它运作良好。我使用带有tget Android 4.1.2-API Level 16 的模拟器。我安装了Google play、google play services、google services framework。

你可以试试。

这是我的项目。 [https://github.com/kydinh/AndroidMapV2](https://github.com/kydinh/AndroidMapV2)

# jquery - jQuery FlexBox 值更改后运行脚本

> ID：14445097
> 
> 赞同：1
> 
> 时间：2013-01-21T18:39:17.847
> 
> 标签：jquery, onchange, flexbox, jquery-flexbox

这是一个 jQuery/js 专业人士：

我还没有完成这个项目，只是因为我的部分代码行为不一致……。在我写完之后，我听到你们中的一个人说：“代码中没有不一致的行为，只有不想要的行为。”

关于设置的注意事项：

*   在 Web 应用程序中编辑记录
*   使用 .change() 启动我的脚本。
*   字段中的初始值通过 js 与所做的更改进行比较。
*   比较检查新值是否，1) 与原始值相同，2) 列表中的现有值，3) 列表中不包含的新值。
*   使用 jQuery FlexBox 在输入字段上创建类似 google 建议的行为（可能的匹配项会在您键入时显示在框中，但不会强加给您）。

期望的行为：

*   用户可以通过以下方式添加一个新值：1) 键入完整值并离开该字段，2) 键入部分值，然后按 Tab 键以选择建议的值，或 3) 键入部分值，然后单击框中的建议值。
*   逻辑在这些事件之一之后运行。

问题：

*   如果用户单击框中的建议值（上面的数字 3），则逻辑会在该值添加到输入之前运行。这是因为浏览器检测到他们离开了输入字段，从而触发了.change()。这会导致代码将空字符串或部分拼写的单词与现有值列表进行比较。然后逻辑确定他们的选择始终是一个全新的值。

我该如何克服这个问题？

# c# - iOS 和 .NET 密码加密

> ID：14445098
> 
> 赞同：2
> 
> 时间：2013-01-21T18:39:26.013
> 
> 标签：c#, ios, objective-c, encryption, active-directory

我一直致力于构建一个 iOS 应用程序，以便在我工作的公司内部使用。用户登录应用程序的方式是使用 Active Directory (AD)。我通过 AD 检查凭据的代码如下：

```
private bool ADAuthentication(string username, string password)
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "Domain Name"))
        {
            return pc.ValidateCredentials(username, password);
        }
    } 
```

我遇到的问题是这种方法需要一个明文密码，我不打算通过手机网络或未知的 wifi 连接发送那种密码。

我正在寻找的是一种加密/解密算法，我可以在 iOS 设备上加密密码，将其发送到我们的服务器，解密，然后将其传递给上述方法以验证 AD 凭据。

到目前为止，我已经研究了 MD5（我们已经在另一个应用程序中使用）和几个开源 BlowFish 算法（这里是如何在 iOS 中执行 BlowFish的[链接](http://www.schneier.com/blowfish-download.html)和[链接）。](https://stackoverflow.com/questions/13507384/how-to-implement-blowfish-algorithm-in-ios?answertab=active#tab-top)我还通过谷歌进行了研究以寻找解决方案，但没有找到与我需要的东西相关的内容（但我可能错过了一些东西）

Objective-c 或 C# 中的任何代码、链接或建议将不胜感激，因为我已经在此工作了 2 天，几乎没有取得任何进展。在这一点上，我几乎对任何事情都持开放态度。

# git - 在 git 中的两个项目之间共享代码

> ID：14445101
> 
> 赞同：12
> 
> 时间：2013-01-21T18:39:36.103
> 
> 标签：git, sharing, code-sharing

我有两个紧密相关的项目（A 和 B），它们共享一些源代码（S）。两者将同时发布，发布版本应始终使用相同版本的共享代码。共享代码 S 将合理地经常更改。

所以，它有时看起来像这样：

*   A 版本 1 使用 S 版本 1
*   B 版本 1 使用 S 版本 1
*   A 版本 2 使用 S 版本 2
*   B 版本 2 使用 S 版本 2

用 git（和/或一些使用 git 的工具）处理这个问题的最佳方法是什么？

以下是我的担忧：

*   项目 A 和项目 B 应该在不同的存储库中（它们是相关的，但我不希望它们之间有自由的代码流）
*   如果在一个项目中更新了共享代码，它应该在另一个项目中自动更新（我不希望出现开发人员忘记做某事并最终拥有过时版本的共享代码的情况）。

据我了解，规范的答案之一是“使用[git submodule](http://git-scm.com/book/en/Git-Tools-Submodules) ”。但是，我读到了一些关于这种方法的[批评。](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)我觉得它更像是为很少更改的共享库而设计的。

我读到的另一种方法是使用[git subtree](http://psionides.eu/2010/02/04/sharing-code-between-projects-with-git-subtree/)

还有一些不太流行的方法：[Repo](http://code.google.com/p/git-repo/)，[GitSlave](http://gitslave.sourceforge.net/)

处理这种类型的代码共享的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T07:08:14.790

一个非常简单的解决方案是使用三个存储库：A、B 和 S。项目存储库 A 和 B 将检查其 Makefile 以验证开发人员正在使用推送到存储库的最新代码，例如

```
check:
      git fetch /path/to/S master:tip
      git branch --contains tip | grep -q master 
```

如果开发人员拥有旧版本的共享存储库，则第二行将具有非零返回值。这将中止编译并出现错误。然后，开发人员可以手动拉动存储库以继续。

除了检查 S 的主分支之外，您还可以检查定义为始终是开发人员应该使用的某个其他分支。

# matplotlib - 在 matplotlib 中反转（而不是反转）颜色图？

> ID：14445102
> 
> 赞同：4
> 
> 时间：2013-01-21T18:39:37.217
> 
> 标签：matplotlib

有什么好的方法可以*反转*（不是反转，这很简单，请参阅[Invert colormap in matplotlib](https://stackoverflow.com/questions/3279560/invert-colormap-in-matplotlib)）matplotlib 中的颜色图？

即，我想要一个 png 图像，它具有表单的颜色元组，`(1,1,0,1)`并使用 matplotlib 颜色映射来获取整数或浮点数。

我想我可以拼凑一些东西来做到这一点，但我不能成为第一个想要这个功能的人——它是否存在于我找不到的某个地方，或者它是否内置于 matplotlib？

# php - 更改信用卡表格上的年份

> ID：14445103
> 
> 赞同：2
> 
> 时间：2013-01-21T18:39:39.787
> 
> 标签：php

我正在尝试更改这张信用卡表格上的年份。现在它只显示 2014-2022。我正在尝试将年份公式更改为从 2013 年开始。

```
 <?php $year = date ("Y"); $i = 1;?>
            <option value="" selected="selected">Please Select a Year</option>
            <?php while($i < 10) { $year += 1; $i++;?>
            <option value="<?=$year?>">
            <?=$year?>
            </option>
            <?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:41:37.030

`$i`需要从 0 开始，因此第一年是 2013 + 0，而不是 2013 + 1。

```
<?php $year = date ("Y");  $i = 0;?> 
```

更好的是，使用`for`循环：

```
<? for ($year = date("Y"); $year < date("Y") + 10; ++$year) { ?>
  <option value="<?= $year ?>"><?= $year ?></option>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:41:01.580

将您的计数器移动到循环的末尾：

```
<?php $year = date ("Y"); $i = 1;?>
<option value="" selected="selected">Please Select a Year</option>
<?php while($i < 10) { ?>
<option value="<?=$year?>">
<?=$year?>
</option>
<?php $year += 1; $i++; } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:58:38.723

另一种方法；

```
$years = range(date('Y'), date('Y') + 10);
while ($year = array_shift($years)) {
    printf("<option value=\"%d\">%d</option>\n", $year, $year);
}
// or 
$years = range(date('Y'), date('Y') + 10); $i = 0;
while ($year =@ $years[$i++]) {
    printf("<option value=\"%d\">%d</option>\n", $year, $year);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:43:31.303

它只是使用以年份为计数器的 for 循环。

```
<option value="" selected="selected">Please Select a Year</option>
<?php for($year = (int)date("Y"); $year < ((int)date("Y"))+10; $year++): ?>
   <option value="<?=$year?>"><?=$year?></option>
<?php endfor; ?>
</option> 
```

# excel - Excel中的字符串分隔

> ID：14445108
> 
> 赞同：1
> 
> 时间：2013-01-21T18:39:55.033
> 
> 标签：excel

```
mozilla-nss-3.11.4-0.7

gdb-10.12-1.5.2

glibc-dcc-atv-1.0.3-10.6 
```

我也想在下一个 BCD 单元格中将其分开

```
mozilla-nss      3.11.4       0.7

gdb              10.12        1.5.2

glibc-dcc-atv    1.0.3        10.6 
```

现在我可以使用 left , right 和 find 功能来做到这一点，但效果不太好

我用

```
LEFT(B33,FIND(".",B33)-2) =B cell

RIGHT(B33,FIND(".",B33))   =C Cell

RIGHT(D33,FIND("-",D33)-1)  = D Cell 
```

答案不对任何人都可以帮我纠正我的功能谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:09:16.500

这是一个不太完美的解决方案：

1.  进行搜索和替换以删除任何不是分隔符的破折号。例如，将“mozilla-nss”替换为“mozillanss”
2.  将您的值放入从 A1 开始的 A 列
3.  在 B1 中，输入`=LEFT(A1,FIND("-",A1)-1)`
4.  在 C1 中，输入`=SUBSTITUTE(A1,B1,"")`
5.  在 D1 中，输入`=SUBSTITUTE(LEFT(C1,FIND("-",C1,2)),"-","")`
6.  在 E1 中，输入`=SUBSTITUTE(SUBSTITUTE(C1,D1,""),"-","")`
7.  填写A列中所有值的方程式。
    **编辑：添加下一行：**
8.  用 mozilla-nss 替换“mozillanss”。

您的答案在 B、D 和 E 列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T07:59:55.710

这里的关键点使任务变得困难 - 我们需要将字符串中的最后两个连字符用作分隔符，并保持所有其余部分不变。对于这种情况，**ARRAY 公式**是最好的选择。我的解决方案如下：

1.  命名以 A1 开头的 6 列：字符串 | 最大"-" | 第二个最大值“-” | Str1 | STR2 | STR3
2.  将您的值放在从 开始的 A 列中`A2`。
3.  B2 ( **MAX "-"** ): 键入公式`=MAX(IFERROR(SEARCH("-",$A2,ROW(INDIRECT("1:"&LEN($A2)))),0))`，但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动键入它们！）。
4.  C2 ( **2nd MAX "-"** ): 输入公式`=MAX(IFERROR(SEARCH("-",$A2,ROW(INDIRECT("1:"&LEN($A2)))),0)*IF(IFERROR(SEARCH("-",$A2,ROW(INDIRECT("1:"&LEN($A2)))),0)=MAX(IFERROR(SEARCH("-",$A2,ROW(INDIRECT("1:"&LEN($A2)))),0)),0,1))`并再次按`CTRL`+ `SHIFT`+ `ENTER`。

因此，我们将获得字符串中最后两个连字符的位置。剩下的很简单——普通的 LEFT / MID / RIGHT 东西：

1.  D2: `=LEFT($A2,$C2-1)`, `ENTER`.
2.  E2: `=MID($A2,$C2+1,$B2-$C2-1)`, `ENTER`.
3.  F2: `=RIGHT($A2,LEN($A2)-$B2)`, `ENTER`.
4.  自动填充`B:F`。

如果不需要临时列 B:C - 您应该在 D:F 中为 B:C 内容替换对它们的引用（即用 A2 实际公式替换`$A2`）`=LEFT($A2,`，但这将导致太复杂的 ARRAY 公式，仍然在做他们的工作 - 但是即使对于创作者来说，第二天也很难理解）

至于上述解决方案 - 也许它可能会被改进或简化，但我对这种`ROW...INDIRECT`结构非常熟悉，因为我不得不分析兆字节的统计数据，所以对我来说，它就像创建 LEFT / RIGHT 一样容易。无论如何，它似乎工作。

为了您的方便，我共享了我的示例文件：[https ://www.dropbox.com/s/p49x32t3a0igtby/StringHyphensSeparate.xlsx](https://www.dropbox.com/s/p49x32t3a0igtby/StringHyphensSeparate.xlsx)

希望对您有所帮助）

**添加 - 2个更简化的解决方案来查找最后两个连字符**（其余步骤与上述相同）：

*   更简单的 ARRAY 公式：

    *   B2 ( **MAX "-"** ): 键入公式`=MAX(IF(MID($A2,ROW(INDIRECT("1:"&LEN($A2))),1)="-",ROW(INDIRECT("1:"&LEN($A2))),0))`，但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动键入它们！）。
    *   C2 ( **2nd MAX "-"** ): 输入公式`=LARGE(IF(MID($A2,ROW(INDIRECT("1:"&LEN($A2))),1)="-",ROW(INDIRECT("1:"&LEN($A2))),0),2)`并再次按`CTRL`+ `SHIFT`+ `ENTER`。
*   `SUBSTITUTE`使用函数的正则公式：

    *   B2（**MAX“-”**）：输入公式`=SEARCH("@",SUBSTITUTE($A2,"-","@",LEN($A2)-LEN(SUBSTITUTE($A2,"-",""))))`，`ENTER`。
    *   C2 ( **2nd MAX "-"** ): 输入公式`=SEARCH("@",SUBSTITUTE($A2,"-","@",LEN($A2)-LEN(SUBSTITUTE($A2,"-",""))-1))`, `ENTER`.

解决方案的关键`SUBSTITUTE`是它可能仅替换**某些匹配实例**，即仅替换第 2 或第 3 个连字符。连字符的总数再次通过`SUBSTITUTE`公式确定：原始字符串的长度减去所有连字符替换为空字符串的字符串长度：`LEN($A2)-LEN(SUBSTITUTE($A2,"-","")`. 这里还有一个技巧 - 虽然我们应该保持原始字符串完好无损，但我们仍然可以对它做任何事情以获得**中间解决方案**！因此，我们将连字符替换为`@`，然后`@`在临时字符串中搜索。

以上所有解决方案都有效，请选择您喜欢/更好理解的解决方案。希望这也有助于理解数组公式，因为对于相同的任务有两种不同的方法。

我更新了示例文件以包含最后 2 个示例 + 生成的大型公式，没有中间步骤，链接相同且位于上方。祝你好运！

# java - java程序文件在临时IO异常时重新处理

> ID：14445110
> 
> 赞同：0
> 
> 时间：2013-01-21T18:40:02.110
> 
> 标签：java, file-processing

我正在处理大量文件，比如使用 java 程序处理 1000 个文件。处理每个文件需要大量时间。问题是：当我处理文件时，由于一些未知问题（可能是防病毒或任何其他问题）输入文件无法被 java 程序访问，所以我得到“访问被拒绝”并最终得到“java.io .FileNotFoundException”。

一种可能的解决方案是，每当我遇到异常时，我都会再次调用该函数来处理文件，但是使用文件名调用该函数很困难，因为该函数是递归函数，它递归地处理目录和文件。请建议我替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:10:29.277

保留处理失败的文件列表，并在遇到异常时将文件添加到列表中。

一旦递归调用结束，检查列表是否有任何数据，如果有，处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:02:48.230

将 catch() 移动到递归方法的主体内。

```
void readFilesRecursively(File dirOrFile){

    boolean successfullRead=false;
    for(; !successfullRead ;){
        try{
            ..........Read....
            successfullRead=true;
        }catch(java.io.FileNotFoundException ex){}
    }

} 
```

# ruby-on-rails - Ruby on Rails，未初始化的常量 Test::Unit::TestCase::Assertions (NameError)

> ID：14445111
> 
> 赞同：0
> 
> 时间：2013-01-21T18:40:02.383
> 
> 标签：ruby-on-rails, rspec, testunit

就像标题所说的那样，当我尝试运行我的 rspec 测试时，我遇到了上述错误。确切的错误是（为便于阅读而换行）：

```
/.rvm/gems/ruby-1.9.3-p374/gems/test-unit-2.4.8/lib/test/unit/testcase.rb:93:in
 `<class:TestCase>': uninitialized constant 
   Test::Unit::TestCase::Assertions (NameError) 
```

互联网上这个问题的主要解决方法似乎是删除“转”宝石，但是我没有加载转宝石。这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'devise'
gem 'therubyracer'
gem 'mysql2'
gem 'cucumber'
gem 'email_spec'
gem 'cancan'
gem 'rolify'
gem 'libv8'
gem 'simple_form'

group :test, :development do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
  gem 'test-unit'
end

group :test do
  gem 'cucumber-rails', :require => false
  gem 'capybara'
  gem 'database_cleaner'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

测试似乎令人窒息的代码部分是当我的 rspec_helper.rb 文件中的 require 'rspec/rails' 中有这一行时。

这个项目曾经完美地运行 rspecs。只有当我重新安装我的操作系统时，它才开始表现不佳。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:08:24.380

由于您没有生成新应用程序，请删除该行

> 宝石'测试单元'

从您的 Gemfile 中删除 gems turn 和 minitest，然后进行捆绑更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T20:49:17.693

**回答**：如果您查看我的 Gemfile，您会在我的组中看到一个需求：测试，：开发 gem 'test-unit'。我评论了这一点，它就像一个魅力。我不知道为什么以及如何工作，如果有人介意解释，请继续。

# ios - 删除前导逗号

> ID：14445113
> 
> 赞同：1
> 
> 时间：2013-01-21T18:40:08.117
> 
> 标签：ios, objective-c

我正在从 sqlite 数据库读取信息到 .csv 文件。我能够构建文件，但每个新行都以“，”开头。我做了一些android编程，但没有太多ios。我认为问题是 componentsJoinedByString:@"," 因为它将所有内容连接在一起，但我不知道如何在每个新行的开头使用它来摆脱 ","。是否有另一种方法可以加入他们写入 csv 文件或摆脱第一个逗号的方法？

```
NSMutableArray *exportBike = [[NSMutableArray alloc] init];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *docsPath = [paths objectAtIndex:0];

NSString *path = [docsPath stringByAppendingPathComponent:@"MemberDB.sql"];

FMDatabase *database = [FMDatabase databaseWithPath:path];

[database open];

FMResultSet *resultsBike = [database executeQuery:@"SELECT * FROM bike"];

while([resultsBike next]) {

    NSString *name = [resultsBike stringForColumn:@"name"];
    NSInteger stage1HR  = [resultsBike intForColumn:@"stage1HR"];
    NSInteger stage1BP = [resultsBike intForColumn:@"stage1BP"];
    NSInteger stage2HR = [resultsBike intForColumn:@"stage2HR"];
    NSInteger stage2BP = [resultsBike intForColumn:@"stage2BP"];
    NSInteger stage3HR  = [resultsBike intForColumn:@"stage3HR"];
    NSInteger stage3BP = [resultsBike intForColumn:@"stage3BP"];
    NSInteger stage4HR  = [resultsBike intForColumn:@"stage4HR"];
    NSInteger stage4BP = [resultsBike intForColumn:@"stage4BP"];
    NSInteger stage5HR  = [resultsBike intForColumn:@"stage5HR"];
    NSInteger stage5BP = [resultsBike intForColumn:@"stage5BP"];
    NSInteger stage6HR  = [resultsBike intForColumn:@"stage6HR"];
    NSInteger stage6BP = [resultsBike intForColumn:@"stage6BP"];
    NSInteger stage7HR  = [resultsBike intForColumn:@"stage7HR"];
    NSInteger stage7BP = [resultsBike intForColumn:@"stage7BP"];
    NSInteger recoveryHR = [resultsBike intForColumn:@"recoveryHR"];

    NSLog(@"%@,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d",name, stage1HR, stage1BP, stage2HR, stage2BP, stage3HR, stage3BP, stage4HR, stage4BP, stage5HR, stage5BP, stage6HR, stage6BP, stage7HR, stage7BP, recoveryHR);

    [exportBike addObject:[NSString stringWithFormat:@"%@,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d""\n",name, stage1HR, stage1BP, stage2HR, stage2BP, stage3HR, stage3BP, stage4HR, stage4BP, stage5HR, stage5BP, stage6HR, stage6BP, stage7HR, stage7BP, recoveryHR]];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *savePath = [paths objectAtIndex:0];

    savePath = [savePath stringByAppendingPathComponent:@"bike.csv"];

    [[exportBike componentsJoinedByString:@","] writeToFile:savePath atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:07:44.813

改变

```
[exportBike addObject:[NSString stringWithFormat:@"%@,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d""\n",name, stage1HR, stage1BP, stage2HR, stage2BP, stage3HR, stage3BP, stage4HR, stage4BP, stage5HR, stage5BP, stage6HR, stage6BP, stage7HR, stage7BP, recoveryHR]];

[[exportBike componentsJoinedByString:@","] writeToFile:savePath atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

到

```
[exportBike addObject:[NSString stringWithFormat:@"%@,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d",name, stage1HR, stage1BP, stage2HR, stage2BP, stage3HR, stage3BP, stage4HR, stage4BP, stage5HR, stage5BP, stage6HR, stage6BP, stage7HR, stage7BP, recoveryHR]];

[[exportBike componentsJoinedByString:@"\n"] writeToFile:savePath atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

而不是在方法中`","`使用并在行中删除末尾的。`"\n"``componentsJoinedByString``addObject``"\n"`

正如 Martin 在下面提到的，另一种选择是将换行符保留在`addObject`line 中并使用`[exportBike componentsJoinedByString:@""]`. 这将在文件末尾添加一个换行符。

# jquery - Jquery 拟合文本框的

> ID：14445116
> 
> 赞同：0
> 
> 时间：2013-01-21T18:40:15.167
> 
> 标签：jquery, html

我试图让用户在一个框中输入的任何内容在第二个框中回显，但第二个框需要锁定到文本大小。有人通过使代码在 JSFiddle 中工作来帮助我，但我需要它在小提琴之外工作。这是我的代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<style media="screen" type="text/css">
#out{
  width:0;
}
</style>

<script type="text/javascript">
$("#in").keyup(function(){
  var tmp = $("<span>")
            .text(this.value)
            .css("font", $("#out").css("font"))
            .appendTo("body"),
      wid = tmp.width();
  tmp.remove();

  $("#out").val(this.value).width(wid);
});
</script>

<input type="text" id="in"/>
<input type="text" id="out"/> 
```

这是 JSFiddle 链接以及它真正需要做的事情：http: [//jsfiddle.net/ener3/](http://jsfiddle.net/ener3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:43:33.170

这 ：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
$("#in").keyup(function(){
  var tmp = $("<span>")
            .text(this.value)
            .css("font", $("#out").css("font"))
            .appendTo("body"),
      wid = tmp.width();
  tmp.remove();

  $("#out").val(this.value).width(wid);
});
</script> 
```

应该：

```
 <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script type="text/javascript">
$(function () {
    $("#in").keyup(function(){
      var tmp = $("<span>")
                .text(this.value)
                .css("font", $("#out").css("font"))
                .appendTo("body"),
          wid = tmp.width();
      tmp.remove();

      $("#out").val(this.value).width(wid);
    });
 });
    </script> 
```

# ruby - 根据标准对数组/列表值求和

> ID：14445120
> 
> 赞同：1
> 
> 时间：2013-01-21T18:40:37.027
> 
> 标签：ruby

给定数组 [X,Y] 的数组：

```
a=[[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]] 
```

将所有 Y 数字求和的最有效方法是`2<=X<4`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:14:47.373

我会处理这个：

```
a.select{ |x,y| (2...4) === x }.inject(0){ |m, (x,y)| m + y }
=> 4 
```

不过我不太喜欢使用`...`，因为它的工作原理会让人们感到困惑。以下是一些等效的测试方法：

```
a.select{ |x,y| (2..3) === x }.inject(0){ |m, (x,y)| m + y }
ary.select{ |x,y| (2 <= x) && (x < 4) }.inject(0){ |m, (x,y)| m + y } } } 
```

这是一些基准代码：

```
require 'benchmark'

a = [ [1,2], [2,2], [3,2], [4,2], [5,2], [6,2] ]
n = 1_000_000

Benchmark.bm(12) do |b|
  b.report('The Tin Man')  { n.times { a.select{ |x,y| (2...4) === x }.inject(0){ |m, (x,y)| m + y } } }
  b.report('The Tin Man2') { n.times { a.select{ |x,y| (2 <= x) && (x < 4) }.inject(0){ |m, (x,y)| m + y } } }
  b.report('Mik_Die')      { n.times { a.select{ |i| (2...4).include? i[0] }.map(&:last).reduce(:+) } }
  b.report('Justin Ko')    { n.times { a.inject(0){ |sum, coord| (coord[0] >= 2  and coord[0] < 4) ? sum + coord[1] : sum } } }
  b.report('Justin Ko2')   { n.times { a.inject(0){ |sum, (x,y)| (x >= 2  and x < 4) ? sum + y : sum } } }
  b.report('Leo Correa')   { n.times { sum = 0; a.each { |x, y| sum += y if x >= 2 and x < 4 } } }
  b.report('tokland')      { n.times { a.map { |x, y| y if x >= 2 && x < 4 }.compact.inject(0, :+) } }
end 
```

及其输出：

```
                   用户系统总真实
铁皮人 4.020000 0.000000 4.020000 ( 4.020154)
铁皮人2 2.420000 0.000000 2.420000 ( 2.424424)
Mik_Die 3.830000 0.000000 3.830000 (3.836531)
贾斯汀高 2.070000 0.000000 2.070000 (2.072446)
贾斯汀 Ko2 2.000000 0.000000 2.000000 (2.035079)
利奥·科雷亚 1.260000 0.000000 1.260000 (1.259672)
托克兰 2.650000 0.010000 2.660000 ( 2.645466)
```

这里吸取的教训`inject`是代价高昂的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:49:49.773

我会使用[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)：

```
a = [[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]]
sum = a.inject(0){ |sum, (x,y)| (x >= 2  and x < 4) ? sum + y : sum }
puts sum
#=> 4 
```

rdoc 很好地描述了该`inject`方法：

> 注入（初始）{| 备忘录，obj | 块 } → 对象
> 
> 通过应用二元运算组合枚举的所有元素，该二元运算由命名方法或运算符的块或符号指定。
> 
> 如果您指定一个块，那么对于枚举中的每个元素，该块都会传递一个累加器值（备忘录）和元素。如果你指定了一个符号，那么集合中的每个元素都将被传递给 memo 的命名方法。无论哪种情况，结果都会成为 memo 的新值。在迭代结束时，memo 的最终值就是方法的返回值。
> 
> 如果没有显式指定 memo 的初始值，则使用 collection 的第一个元素作为 memo 的初始值。

**更新 - 基准数组与拆包：**

@tokland 建议拆开这些对，这肯定会提高可读性。运行以下基准以查看它是否比使用数组更快（即我的原始解决方案）。

```
require 'benchmark'

a = [ [1,2], [2,2], [3,2], [4,2], [5,2], [6,2] ]
n = 2_000_000

Benchmark.bm(12) do |b|
  b.report('array'){n.times{a.inject(0){ |sum, coord| (coord[0] >= 2  and coord[0] < 4) ? sum + coord[1] : sum }}}
  b.report('unpacked'){n.times{a.inject(0){ |sum, (x,y)| (x >= 2  and x < 4) ? sum + y : sum }}}
end 
```

哪个给出了结果

```
 user     system      total        real
array          3.916000   0.000000   3.916000 (  3.925393)
unpacked       3.619000   0.000000   3.619000 (  3.616361) 
```

所以，至少在这种情况下，解包对更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:59:45.440

我喜欢@JustinKo 给出的注入答案，但如果您是 Ruby 新手，这里有另一个解决方案可能更容易理解。

```
a=[[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]]
sum = 0
a.each { |x, y| sum += y if x >= 2 and x < 4 }
puts sum
#=> 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T19:15:54.370

在 ruby​​ 中使用更简单的方法链更清楚。所以：

```
a=[[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]]
a.select{ |i| (2...4).include? i[0] }.map(&:last).reduce(:+)
# => 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T19:42:50.177

从概念上讲，您想要使用的是列表理解。唉，Ruby 没有内置的 LC 语法，但是 compact+map 可以很好地完成这项工作：

```
a.map { |x, y| y if x >= 2 && x < 4 }.compact.inject(0, :+)
#=> 4 
```

如果您正在编写一个中型/大型脚本，您可能会拥有（并且应该拥有）一个扩展模块。添加所需的方法，以便您可以编写声明性和简洁的代码：

```
a.map_select { |x, y| y if x >= 2 && x < 4 }.sum 
```

甚至：

```
a.sum { |x, y| y if x >= 2 && x < 4 } 
```

# java - 将图像从 servlet 获取到 JSP

> ID：14445122
> 
> 赞同：0
> 
> 时间：2013-01-21T18:40:48.430
> 
> 标签：java, jsp, jakarta-ee, servlets

我想在我的 jsp 页面中获取一张照片。我以这种方式实现了 servlet（在 doGet 方法中）：

```
{...

byte[] imageData = u.getFoto();

response.setContentType("image/jpg");

response.getOutputStream().write(imageData);

..} 
```

哪里`u`是`User`类型。

我的问题是：如何在我的 jsp 页面中设置 src 路径以从 Servlet 检索图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:53:18.300

您可以在 中指定挂载点，`web.xml`如下所示：

```
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/img/myservlet</url-pattern>
</servlet-mapping> 
```

这将获取命名的 servlet 并将`MyServlet`其挂载到`/img/myservlet`. 然后，在您的 jsp 中，您只需使用`img`指向`url-pattern`上面指定的标记。

```
<img src="/img/myservlet" /> 
```

注意：如果您的 webapp 没有挂载到 /，您还需要在路径中指定应用程序的 contextPath。

# java - 在java中删除数组中的空元素

> ID：14445123
> 
> 赞同：0
> 
> 时间：2013-01-21T18:40:50.427
> 
> 标签：java

我有一种从学生数组中删除学生的方法。这是我到目前为止所拥有的，但似乎不起作用。

```
public Student[] removeStudent(Student s) throws Exception{
    boolean found =  false;
    for(int i = 0; i < nrStudents(this); i++){
        if(students[i].equals(s)){
            students[i] = null;
            found = true;
            break;
        }

    }
    if (found == true){
        return compact(students);
    }
    else
        throw new Exception("Student Not Found.");
}

private Student[] compact(Student[] arr){
    ArrayList<Student> list = new ArrayList<Student>();
    for (Student s : arr){
        if (!s.equals(null))
            list.add(s);
    }
    arr = list.toArray(new Student[list.size()]);
    return arr;
} 
```

当我在数组中有 2 个或更多学生时，我得到一个 NullPointerException。如何从该数组中删除学生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:45:57.903

不要使用 .equals() 来检查 null - 修复您的代码将`if(!s.equals(null))`行更改为`if (s != null)`.

为什么？

[Java null 检查为什么使用 == 而不是 .equals()](https://stackoverflow.com/questions/4501061/java-null-check-why-use-instead-of-equals)

对于这个问题，使用 ArrayList 更有意义。我建议查一下——有几个很好的用法示例和来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:46:21.500

我很确定您必须将除空数据之外的所有数据复制到一个全新的数组中。鉴于这是一项昂贵的操作，我推荐 ArrayLists [http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

使用数组列表，您可以获得能够按索引引用的好处，但您也可以使用以下方法简单地删除元素：

```
if(node.data==null) {
     remove(node);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:47:19.023

以下：

```
 if (!s.equals(null)) 
```

应该读

```
 if (s != null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:58:33.243

这就是我所做的修复它

```
private Student[] compact(Student[] arr){
    Student[] stud = new Student[arr.length];
    int count = 0;
    for(int i = 0; i < arr.length; i++){
        if(arr[i] != null){
            stud[count] = arr[i];
            count++;
        }
    }
    students = stud;
    return students;
} 
```

我首先将 student 设置为 null，然后我使用 compact 辅助方法来压缩数组，因此它没有 null 元素。

# java - BoneCP 中 partitionCount 的更好解释

> ID：14445129
> 
> 赞同：13
> 
> 时间：2013-01-21T18:41:16.540
> 
> 标签：java, database, bonecp

来自官方 BoneCP 文档：http://jolbox.com/index.html?page=http: [//jolbox.com/configuration.html](http://jolbox.com/index.html?page=http://jolbox.com/configuration.html)

> **partitionCount**为了减少锁竞争从而提高性能，每个传入的连接请求都会从具有线程关联性的池中挑选一个连接，即 pool[threadId % partition_count]。这个数字越高，当您有大量短期线程时，您的性能就越好。超过某个阈值，这些池的维护将开始对性能产生负面影响（并且仅适用于分区上的连接开始耗尽的情况）。
> 
> 默认值：2，最小值：1，推荐：3-4（但非常特定于应用程序）

但这不是很清楚，也没有一个很好的例子。我正在运行一个普通的 Web 服务，同时有 0-500 个线程。哪个是一个很好的价值，为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T19:08:25.447

所以在内部 BoneCP 有连接池的分区计数。每次线程尝试使用连接时，它都会`thread.getId() % partitionCount`从该池中获取并使用连接。您总共将拥有`maxConnectionsPerPartition * partitionCount`连接数。

为什么这会对性能产生积极影响？好吧，如果没有两个线程同时在同一个连接上使用（显然这会很糟糕），BoneCP 必须使用锁来释放或获取连接。但与此同时，所有其他想要做同样事情的线程都必须等待那个锁。因此，从某种意义上说，您可以并行释放或获取`partitionCount`多个连接。

将其设置为什么数字？我认为核心数是一个好的开始，因为无论如何你不会有更多的并行工作。但除此之外，还要尝试预测有多少线程会竞相连接、测量和重复。

顺便说一句，世界上大部分地区已经依赖 c3po 十多年了，并且基本上将分区计数设置为 1。所以你不会出错。

# c# - 如何设置 float2 类型的 HLSL 参数？

> ID：14445133
> 
> 赞同：1
> 
> 时间：2013-01-21T18:41:34.410
> 
> 标签：c#, c#-4.0, xna, hlsl

我想知道如何使用 C#在 HLSL 着色器效果中设置`p`类型参数？`float2``e`

```
e.Parameters["p.x"].SetValue(1); 
e.Parameters["p.y"].SetValue(2); 
```

似乎行不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:03:48.820

```
e.Parameters["p"].SetValue(new Vector2(1, 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:14:43.373

在使用暴露结构类型的属性时，如果想要更新某些部分而不更新其他部分，则经常需要使用如下模式：

```
var temp = thing.SomeProperty;
temp.X = 1;
thing.SomeProperty = temp; 
```

在您的特定情况下，您似乎想要重写相关结构的所有组件；如果是这种情况，您可以简单地构造一个新的结构实例并存储它；没有理由先读出旧的。虽然有些人可能更喜欢这种格式

```
var temp = thing.SomeProperty;
temp.X = new Vector2(1, temp.Y);
thing.SomeProperty = temp; 
```

我不太喜欢它，因为它使判断哪些字段被修改或未被修改变得更加困难，特别是如果存在任何不需要指定所有字段值的构造函数重载。

# java - 滚动到 ListPreference 中的选定项目

> ID：14445138
> 
> 赞同：1
> 
> 时间：2013-01-21T18:41:54.103
> 
> 标签：java, android, android-preferences

我有以下问题。我创建了一个自定义列表首选项，用于显示带有附加图像的文本视图。除了以下问题外，几乎一切正常：

原始列表首选项滚动到当前选择的位置，但我的自定义列表首选项未显示此行为。如果我用 android 版本（或者在我的情况下是 holoeverywhere 版本）替换自定义列表首选项，一切正常。因此，我认为该错误必须在我当前的自定义列表首选项的实现中。

```
public class CustomListPreference extends ListPreference {
private CustomListPreferenceAdapter customListPreferenceAdapter = null;
private Context mContext;
private LayoutInflater mInflater;
private CharSequence[] entries;
private CharSequence[] entryValues;
private Map<String, Boolean> rButtonMapping = null;
private SharedPreferences prefs;
private SharedPreferences.Editor editor;

public CustomListPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
    mContext = context;
    mInflater = LayoutInflater.from(context);
    rButtonMapping = new HashMap<String, Boolean>();
    prefs = PreferenceManager.getDefaultSharedPreferences(mContext);

    // init the button mapping with the default values
    for (int i = 0; i < Data.getData().length; i++) {
        rButtonMapping.put(Data.getData()[i], false);
    }

    // Set the current selected value to true
    String currentSelectedValue = prefs.getString(
            SettingsActivity.CUST_PREF_KEY, "TEST1");
    rButtonMapping.put(currentSelectedValue, true);

    editor = prefs.edit();
}

@Override
protected void onPrepareDialogBuilder(Builder builder) {
    entries = getEntries();
    entryValues = getEntryValues();

    if (entries == null || entryValues == null
            || entries.length != entryValues.length) {
        throw new IllegalStateException(
                "ListPreference requires an entries array and an entryValues array which are both the same length");
    }

    customListPreferenceAdapter = new CustomListPreferenceAdapter();

    builder.setAdapter(customListPreferenceAdapter,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {

                }
            });
}

private class CustomListPreferenceAdapter extends BaseAdapter {

    public int getCount() {
        return entries.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            row = mInflater.inflate(R.layout.custom_list_preference_row,
                    parent, false);
        }

        TextView text = (TextView) row
                .findViewById(R.id.settings_tv_test);
        text.setText(entries[position]);

        try {
            InputStream ims = mContext.getAssets().open(
                    "pics/" + entryValues[position] + ".png");
            BitmapDrawable d = new BitmapDrawable(mContext.getResources(),
                    ims);
            d.setTargetDensity(mContext.getResources().getDisplayMetrics().densityDpi);

            text.setCompoundDrawablesWithIntrinsicBounds(d, null, null,
                    null);
        } catch (IOException e) {
            text.setCompoundDrawablesWithIntrinsicBounds(null, null, null,
                    null);
        }

        RadioButton rButton = (RadioButton) row
                .findViewById(R.id.settings_rb);
        // If the current position is checked we also check the current
        // value
        rButton.setChecked(rButtonMapping.get(entryValues[position]));
        row.setClickable(true);
        row.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                for (String currentString : rButtonMapping.keySet()) {
                    rButtonMapping.put(currentString, false);
                }
                // Set the current selected value to true
                rButtonMapping.put((String) entryValues[position], true);

                // Also send the selected value to the editor
                editor.putString(SettingsActivity.CUST_PREF_KEY,
                        (String) entryValues[position]);
                editor.commit();

                getDialog().dismiss();
            }
        });

        rButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                for (String currentString : rButtonMapping.keySet()) {
                    rButtonMapping.put(currentString, false);
                }
                // Set the current selected value to true
                rButtonMapping.put((String) entryValues[position], true);

                // Also send the selected value to the editor
                editor.putString(SettingsActivity.CUST_PREF_KEY,
                        (String) entryValues[position]);
                editor.commit();

                getDialog().dismiss();
            }
        });

        return row;
    }
} 
```

}

我也在这里对 Stackoverflow 和 Google 进行了研究，但似乎没有人遇到这个问题。

有谁看到问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:12:17.483

我建议用对构建器的 setSingleChoiceItems 方法的调用替换对 setAdapter 的调用：

```
builder.setSingleChoiceItems(adapter, adapter.getSelectedItem(), 
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

            }
        }); 
```

adapter.getSelectedItem() 将是一个返回当前选定行的索引的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T19:44:22.677

要滚动到 a 中的选定项目`ListPreference`，只需在自定义类的`setSelection`方法中使用 Android`ListView`的方法。例如：`onCreateDialogView()``ListPreference`

```
public class CustomListPreference extends ListPreference {
    @Override
    protected View onCreateDialogView() {            
        ListView mListView = (ListView) view.findViewById(android.R.id.list);
        // Scroll to selected item in ListView.
        mListView.setSelection(findIndexOfValue(getValue()));
    }
} 
```

# ember.js - 浏览器后退单击后 DOM 中的重复模板

> ID：14445147
> 
> 赞同：0
> 
> 时间：2013-01-21T18:42:22.733
> 
> 标签：ember.js, handlebars.js

当涉及到浏览器后退按钮和 emberjs 时，我观察到了不受欢迎的行为。如果用户点击后退按钮，页面会显示两倍渲染的车把模板。

如果历史足够长，甚至可以“工作”几次，页面变得越来越长。有人已经看到了这个问题（甚至解决了它）？

我的应用程序目前与 Trek 在[http://trek.github.com/](http://trek.github.com/)上展示的完全一样，只是我移到了 pre4 的新路由器 API。

版本

*   emberjs 1.0 pre4
*   车把 1.0 rc1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:14:50.187

跟进我自己的问题。我的代码中有两个问题。其中一个我追踪并在这里分享解决方案，以防有人遇到类似问题。

我有一个模型定义，例如

```
App.Member.reopenClass({
  allMembers: [],
  findAll: function(){
    $.ajax({
      url: 'https://api.company.com/members',
      dataType: 'json',
      context: this,
      success: function(response){
        response.data.forEach(function(member){
          this.allMembers.addObject(App.Member.create(member))
        }, this)
      }
    })
    return this.allMembers;
  }
}); 
```

`allMembers: []`是保留所有成员的参考。来回时，成员从后端重新加载并再次存储在`allMembers`.

要解决这个问题，只需`allMembers`定义`findAll`：

```
App.Member.reopenClass({
  findAll: function(){
    var allMembers = [];
    $.ajax({
      url: 'https://api.company.com/members',
      dataType: 'json',
      context: allMembers,
      success: function(response){
        response.data.forEach(function(member){
          this.addObject(App.Member.create(member))
        }, this)
      }
    })
    return allMembers;
  }
}); 
```

* * *

第二个问题很可能也与我组合路线的方式有关。一旦我有解决方案，我会在上面发布。

**更新，2013-01-22**

好的，第二个问题也找到了，emberJS + 后退按钮现在可以正常工作了。同样，我想快速总结一下问题所在，以防有人也被它绊倒。

路由定义如下所示：

```
App.Router.map(function() { 
  this.resource("areas", { path: "/areas" });   
  this.resource("area",  { path: "/areas/:refId" }, function() {
    this.route("new",    { path: "/areas/new" });   
}); 
```

此外，“new”和“area”使用了相同的视图和控制器。因此，问题出在父路由“区域”及其子路由“新”之间。不建议尝试将所有内容组合在一起，并在控制器内做一些魔术来区分它是哪种情况……

所以，解决方案是：

*   使用 mixins 来避免代码重复（'new' 和 'area' 都使用一些 Google Geocoder 的东西）
*   创建一个漂亮而简单的路由，如下所示。

代码是

```
App.Router.map(function() { 
  this.route("areas",   { path: "/areas" });
  this.route("area",    { path: "/areas/:refId" });
  this.route("newarea", { path: "/area/new"});
}); 
```

就是这样。欣赏或评论。总是很高兴得到专家的意见

# javascript - 为什么要提交我的 HTML 表单？

> ID：14445156
> 
> 赞同：0
> 
> 时间：2013-01-21T18:43:06.777
> 
> 标签：javascript, html

我有这个带有 1 个字段的表格。我希望当用户`clicks`或点击`enter`它时应该调用一个 JavaScript 函数，该函数将进行验证并显示错误消息或提交表单。

但是，当点击`enter`它时，无论如何都会提交表单。（到目前为止，在我的 JavaScript 验证功能中，我只有`alert ("Hello World")`）

```
<form  action="add-another-number-to-dnc.cshtml" method="post" id="addDNCform">
    <h4>Enter 10-digit phone number without dashes, dots or parenthesis</h4> 
    <input type="text" name="pn" required placeholder="phone number" 
        title="Phone Number to Add to Do-Not-Call List" 
        onkeypress="if (event.keyCode == 13) document.getElementById('btnVldt').click()"/> <!-- all this is to treat [Enter] as a click -->
    <input id="btnVldt" type="button" value="Add Number to Do Not Call list" onclick="submitDNC()"/>
</form> 
```

[我在jsFiddle](http://jsfiddle.net/LTckU/2/)中添加了所有页面代码，您可以在其中测试和验证：

*   单击按钮时，它没有正确提交表单
*   当点击`enter`它会给你一个错误 404，这一定意味着它正在尝试加载页面。

**添加了这个：**

实际上，如果我使用`submit`而不是`button`，单击时它也不起作用。但是，`jsFiddle`它似乎有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:58:27.723

在这里扩展 Praveen 的答案，我将“不显眼地”编写 JavaScript 以进一步分离功能、表示和内容：

## HTML

```
<form action="add-another-number-to-dnc.cshtml" method="post" id="addDNCform">
    <h4>Enter 10-digit phone number without dashes, dots or parenthesis</h4> 
    <input type="text" name="pn" required placeholder="phone number"  title="Phone Number to Add to Do-Not-Call List" />
    <button type='submit'>Add Number to Do Not Call list"</button>
</form> 
```

## (X)HTML5

假设您想要一个 10 位数的数字（仅限数字字符），我们还可以使用 HTML5 中元素的`pattern`属性`<input>`作为对较新浏览器（Firefox、Chrome、IE10、Opera）的验证形式：

```
<form action="add-another-number-to-dnc.cshtml" method="post" id="addDNCform">
    <h4>Enter 10-digit phone number without dashes, dots or parenthesis</h4> 
    <input type="text" name="pn" required placeholder="phone number" title="Phone Number to Add to Do-Not-Call List" pattern="[0-9]{10}" />
    <button type='submit'>Add Number to Do Not Call list"</button>
</form> 
```

## JavaScript（放置在`<script>`页面某处的标签内）

```
function submitDNC(event) {
    var valid = false;

    alert('Hello world');
    // your validation logic goes here, sets valid to TRUE if it's valid

    if(!valid) {
        event.preventDefault();
    }
}

document.getElementById('addDNCform').addEventListener( 'submit', submitDNC, false ); 
```

如果您要做的只是在提交表单时进行验证，则无需单击任何合成按钮。很快，使用 HTML5，我们甚至可能不需要 JavaScript，这取决于您的验证逻辑是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:46:28.923

在你的`submitDNC()`函数中，给出一个`return false;`.

```
function submitDNC()
{
    alert("Hello World!");
    return false;
} 
```

另一件事是，将您的`input`类型从更改`button`为`submit`。利用：

```
<input id="btnVldt" type="submit"
       value="Add Number to Do Not Call list" onclick="return submitDNC();" /> 
```

### 解释

事件处理程序的返回值决定了默认浏览器行为是否也应该发生。在点击链接的情况下，这将是跟随链接，但差异在表单提交处理程序中最为明显，如果用户输入信息错误，您可以取消表单提交。

* * *

### 另外的选择

正如[Rink](https://stackoverflow.com/users/404623/rink-attendant-6)所说，`return false;`对于可以而且应该由`preventDefault()`. 因此，您可以通过使用不显眼的 JavaScript 来做到这一点。

```
function submitDNC()
{
    alert("Hello World!");
    var e = window.event;
    e.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:52:07.237

要防止在按 ENTER 时提交，请使用以下代码：

```
function checkEnter(e){
    e = e || event;
    var txtArea = /textarea/i.test((e.target || e.srcElement).tagName);
    return txtArea || (e.keyCode || e.which || e.charCode || 0) !== 13;
} 
```

然后，将处理程序添加到`form`：

```
document.querySelector('form').onkeypress = checkEnter; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:53:21.557

我会将其更改为提交，尽管这并不是让您遇到麻烦的原因。出于某种奇怪的原因，浏览器程序员认为编写代码是一个好主意，以便浏览器假定表单中的按钮提交它们。您需要更改 onkeypress 以调用函数。在该函数中执行以下操作：

```
function keyPressPhone() {
  if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
    document.getElementById("addDNCform").submit();
    return true;
  }
  else {
    return false; // somehow prevents the form from being submitted
  }
} 
```

# javascript - rails3-jquery-autocomplete：Javascript 类型错误

> ID：14445157
> 
> 赞同：1
> 
> 时间：2013-01-21T18:43:13.520
> 
> 标签：javascript, ruby-on-rails-3, jquery-autocomplete

导轨 3.2.11

我遵循了这个 gem 的说明：[https](https://github.com/crowdint/rails3-jquery-autocomplete) ://github.com/crowdint/rails3-jquery-autocomplete 。当我加载我想要自动完成字段的页面时，Jquery、jquery-ui、autocomplete-rails.js 等都被加载了。但是，在加载页面时，我在错误控制台中得到了这个：

> TypeError：“未定义”不是函数（评估“this.live”）

我解压了 js 文件，这是被引用的函数：

```
(function(jQuery)
{
  var self = null;
  jQuery.fn.railsAutocomplete = function() {
    return this.live('focus',function() {
      if (!this.railsAutoCompleter) {
        this.railsAutoCompleter = new jQuery.railsAutocomplete(this);
      }
    });
  }; 
```

有人知道发生了什么吗？由于我没有在任何地方使用 '$'，所以 noConflict 选项似乎并不重要，并且任何一种方式都不能解决问题。我没有对 autocomplete-rails.js 进行任何更改

奇怪的是，我发誓这在某个时候有效，但我一生都无法弄清楚是什么改变了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:32:30.367

是的，原来我有一个错误的 javascript_include_tag 加载了另一个 jquery 副本。那是问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:58:19.200

我相信原始海报自己的答案也是我解决方案的一部分。使用 rails 3.2.13、jquery 1.9.0 和 jquery-ui 1.9.2。更完整的我也：

*   将 rails3-jquery-autocomplete 升级到最新版本（从 1.0.9 到 1.0.11，当我[在 github 的 rails3-jquery-autocomplete的 Changelog 中看到：“尽可能使用 jQuery .on() 而不是 .live()”时](https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/CHANGELOG.md)
*   删除了可能冗余或冲突的 jquery 包括
*   重新排序的包括，特别是在 autocomplete-rails 之后放置 underscore.js
*   完全停止和清除缓存和编译资产

在前 3 个步骤之后，损坏的行为仍然存在（在每个步骤之后，我只重新启动了服务器）。最后一步是出于懒惰，但值得庆幸的是，上述方法的结合奏效了。

# javascript - 以数字为值的 HTML Connected 下拉列表（多个）

> ID：14445160
> 
> 赞同：0
> 
> 时间：2013-01-21T18:43:28.600
> 
> 标签：javascript, html-select

基本上，我想创建超过 1 个下拉列表，其中包含数字作为值，例如。

```
<select id="dp1">
<option value='op1'>1</option>
<option value='op2'>2</option>
<option value='op3'>3</option>
</select>

<select id="dp2">
<option value='op1'>1</option>
<option value='op2'>2</option>
<option value='op3'>3</option>
</select>

<select id="dp3">
<option value='op1'>1</option>
<option value='op2'>2</option>
<option value='op3'>3</option>
</select> 
```

这只是一个下拉菜单。假设我有 3 个具有相同数字和不同默认值的下拉列表，例如。dp1 -> 1, dp2 -> 2, dp3 -> 3 。因此，现在如果用户更改`dp3 to 1`其他下拉列表的值的值，应该按照顺序自动更改，例如`dp1 -> 2`和`dp2 -> 3`。

如果我用其他示例解释它，如果用户更改值`dp3 to 2`的值`dp1 should not change`和值`dp2 -> 3`应该更改。

怎么可能使用 Javascript / jquery。（我正在使用 php 从数据库中填充下拉列表）

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:35:42.740

如果您使用的数据真的只是数字，那么这样的事情就可以了。[单击此处](http://jsfiddle.net/6p7E7/2/)查看 jsfiddle 示例，该示例演示了我认为您正在寻找的行为。

```
<select id="dp1" class="dropdown"></select>
<select id="dp2" class="dropdown"></select>
<select id="dp3" class="dropdown"></select>

<script type="text/javascript">                     
var values = [1, 2, 3];

$(function() {
  initDropdowns();

  $('select.dropdown').change(function() {
    setDropdownValues($(this).attr('id'));                  
  });
}); 

function initDropdowns() {
  var optionsHtml = '';

  for(var i = 0; i < values.length; i++) {              
    var value = values[i];
    optionsHtml += '<option value="' + value + '">' + value + '</option>';
  }

  $('select.dropdown').append(optionsHtml);
    setDropdownValues();                
}

function setDropdownValues(excludeListId) {
  var valuesClone = values.slice();
  var $dropdowns = $('select.dropdown');

  if(excludeListId) {
    valuesClone.splice(Number($('#' + excludeListId).val()) - 1, 1);
  }             

  $('select.dropdown').each(function() {
    if($(this).attr('id') !== excludeListId) {
      $(this).val(valuesClone[0]);
      valuesClone.splice(0, 1);
    }                   
  });   
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:39:03.270

如果您只想更改以前的下拉列表，请购买更改当前下拉列表，也许此示例代码可以帮助您：

```
$("select").change(function(){
    var selectValue = $(this).val();
    var toRemove = 'op';
    var value  = selectValue.replace(toRemove,'');
    var selectId = $(this).attr('id');
    var toRemove = 'dp';
    var id = selectId.replace(toRemove,'');
    id = id-1;
    for(var i = id; i>=1; i--){
         value = value -1;
         var newValue = "op"+value;
         $("#dp"+i).val(newValue);
      }
    }); 
```

# java - 如何在 ArrayList 中添加客户详细信息？

> ID：14445166
> 
> 赞同：-2
> 
> 时间：2013-01-21T18:43:54.357
> 
> 标签：java, list, arraylist

我正在尝试创建客户。我正在尝试将每个用户输入添加到 arrayList 中，并使其在最后输出。但是，我的输出给了我一些内存位置。有人可以对此有所了解吗？

```
public static void main(String[] args) {

    Scanner input = new Scanner(System.in);
    System.out.println("Enter First Name: ");
    String firstName = input.nextLine();
    System.out.println("Enter Last Name: ");
    String lastName = input.nextLine();
    System.out.println("Enter Home Address: ");
    String homeAddress = input.nextLine();

    Customer cus = new Customer(firstName, lastName, homeAddress);

    System.out.println("\nWelcome: ");
    System.out.print(cus.getFirstName() + cus.getLastName());
    System.out.println("\n Your Shipping Address: ");
    System.out.print(cus.getHomeShippingAddress());

    List<Customer> customer = new ArrayList<Customer>();

    customer.add(cus);

    // Output the list contents
    printList(customer);

}

public static void printList(List<Customer> list) {

    System.out.println("Customers: ");

    for (Customer customer : list) {
        System.out.printf("%s", customer);
    }
    System.out.println();
} 
```

}

![在此处输入图像描述](../Images/1a4369d5dd6f6cd0b5fcac9f931f1f1b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:45:36.623

覆盖对象`toString`的方法`Customer`。

当前一个是默认实现。

以防您想知道@5c694a18 的含义：它是`Customer`对象哈希码的无符号十六进制表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:46:04.843

您正在尝试打印一个对象，所以它会转到它的`toString()`方法。`toString()`您可能希望通过覆盖从[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)继承的方法来实现自己的方法。

就像是：

```
@Override 
public String toString() {
    StringBuilder result = new StringBuilder();
    //build your string here. 
    //Perhaps by appending the customer's first and last name?
    return result.toString();
} 
```

您目前看到的继承自[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)的是：

> getClass().getName() + '@' + Integer.toHexString(hashCode())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:46:00.663

由于您没有在 Customer 类中**覆盖 toString**，因此会调用**Objects 的 toString ，这将返回**`NameOfTheClass +"@" +SomeHexNumber.`

```
 return getClass().getName() + "@" + Integer.toHexString(hashCode()); 
```

覆盖`toString() method`，`Customer class`使其打印适当的数据。如下所示：

```
public String toString() {
return this.firstName+" " + this.lastName ;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:46:05.390

`Customer`是一个对象，您需要重写 toString() 方法以输出您想要的关于该对象的值。

# python - 为什么 Pip 会忽略冲突的依赖关系？

> ID：14445169
> 
> 赞同：6
> 
> 时间：2013-01-21T18:44:04.650
> 
> 标签：python, python-2.7, pip, python-2.x

如果我创建一个虚拟包——这里是 /tmp/example_package/setup.py （注意要求）：

```
from distutils.core import setup

setup(name='my_project',
      description="Just a test project",
      version="1.0",
      py_modules=['sample'],
      install_requires=['requests > 0.12']) 
```

这是/tmp/example_package/sample.py：

```
import requests

def get_example():
    return requests.get("http://www.example.com") 
```

现在，我创建了一个 virtualenv：

```
$ virtualenv /tmp/foobar --distribute -p python2.7
Running virtualenv with interpreter /usr/bin/python2.7
New python executable in /tmp/foobar/bin/python2.7
Also creating executable in /tmp/foobar/bin/python
Installing distribute.................................................................................................................................................................................................done.
Installing pip................done.
$ source /tmp/foobar/bin/activate 
```

我创建了一个需求**冲突的 requirements.pip**：

```
# this requires requests > 0.12:
file:///tmp/example_package

# but this conflicts:
requests==0.9.0 
```

Pip 愉快地安装了这个：

```
$ pip install -r requirements.pip                                                                                                                                                                       [18:40:10]
Unpacking ./example_package
  Running setup.py egg_info for package from file:///tmp/example_package

Downloading/unpacking requests==0.9.0 (from -r requirements.pip (line 3))
  Downloading requests-0.9.0.tar.gz (55Kb): 55Kb downloaded
  Running setup.py egg_info for package requests

Downloading/unpacking certifi>=0.0.4 (from requests==0.9.0->-r requirements.pip (line 3))
  Downloading certifi-0.0.8.tar.gz (118Kb): 118Kb downloaded
  Running setup.py egg_info for package certifi

Installing collected packages: requests, my-project, certifi
  Running setup.py install for requests

  Running setup.py install for my-project

  Running setup.py install for certifi

Successfully installed requests my-project certifi
Cleaning up... 
```

为什么 Pip 允许这样做？我的`example_package`不会工作，因为它的要求没有得到满足。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:27:12.493

这是 Pip 的限制。需求文件胜过包的需求。见[https://github.com/pypa/pip/issues/775#issuecomment-12748095](https://github.com/pypa/pip/issues/775#issuecomment-12748095)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:47:58.910

查看 pip 源，它似乎应该递归地将所有要求添加到一个大`RequirementSet`...然后以“重复要求”异常崩溃...

嗯..你确定你的 setup.py 是正确的吗？

Distutils 有一个`requires`关键字但没有`install_requires`： [http ://docs.python.org/2/distutils/setupscript.html#relationships-between-distributions-and-packages](http://docs.python.org/2/distutils/setupscript.html#relationships-between-distributions-and-packages)

所以答案引用了这个：
[https ://stackoverflow.com/a/10686196/202168](https://stackoverflow.com/a/10686196/202168)
[https://stackoverflow.com/a/13468644/202168](https://stackoverflow.com/a/13468644/202168)

# objective-c - 启用 App Sandboxing 时，Flash 播放器在 Webview 中不起作用

> ID：14445176
> 
> 赞同：4
> 
> 时间：2013-01-21T18:44:33.710
> 
> 标签：objective-c, webview, flash, entitlements, appstore-sandbox

我正在为桌面开发一个 Mac 应用程序，该应用程序使用**Webview**来加载某些 url。一切正常，但是当我启用**“启用应用程序沙盒”**选项和应用程序的正确权利时，Flash Player 插件不会加载到 Web 视图中。

我尝试了这个问题的答案：[Flash videos in WebView not working in sandboxed app](https://stackoverflow.com/questions/8281666/flash-videos-in-webview-not-working-in-sandboxed-app)。但 Flash 插件仍然无法正常工作。我也尝试使用**清洁**产品选项（cmd + shift + alt + k），但仍然无法正常工作。

需要做什么来实现它？，我需要在启用 App Sandboxing 时在 Webview 中显示 Flash Player 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:55:54.780

基于该错误，尝试为 Apple 事件添加例外。[http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html#//apple_ref/doc/uid/TP40011195-CH5-SW1](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html#//apple_ref/doc/uid/TP40011195-CH5-SW1)

我不知道您是否尝试过，但是您引用的 StackOverflow 答案似乎与您遇到的问题无关。

# java - 在 jar 中读取 txt 文件

> ID：14445180
> 
> 赞同：2
> 
> 时间：2013-01-21T18:45:13.073
> 
> 标签：java, file, resources, embedded-resource

我已经查看了许多与我类似的其他问题，但不幸的是，到目前为止，他们的答案都没有奏效。

我有一个看起来像这样的 Java 项目：

```
我的项目/
    源/
        ABC/
            MyClass.java
        xyz/
            文件1.txt
            文件2.txt
            ...       

```

本质上，我正在尝试读取上面的所有 txt 文件`MyClass.java`。这就是我目前正在做的事情：

```
File dir = new File("src/xyz/");
for (File child : dir.listFiles()) {
    ...
} 
```

这工作正常，直到我将所有内容都放入 JAR 格式，此时`dir.listFiles()`返回`null`并且上述内容不再有效。无论如何，即使将它们打包到 JAR 中，我仍然可以阅读这些 txt 文件吗？另外，如果有任何区别，我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T18:46:31.037

您可以通过类加载器访问类路径上的文件。

```
getClass().getResourceAsStream("/xyz/file1.txt"); 
```

然后你会`InputStream`像往常一样使用。请注意，我使用绝对路径，但相对于当前包也可以。

从 Java 6 开始，还可以很容易地列出包下的所有资源：

```
 Enumeration urls = getClass().getClassLoader().getResources("xyz");
 urls.nextElement().openStream(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:49:07.867

> 无论如何，即使将它们打包到 JAR 中，我仍然可以阅读这些 txt 文件吗？

鉴于您的意思是“事先不知道他们的名字”，不。

OTOH，您可以在 Jar 中的已知位置包含资源，并在其中列出可能的文本。来自根路径或类路径的路径，每行一个就可以了。使用以下内容获取资源的 URL：

```
URL url = this.getClass().getResource("/path/to/the.resource"); 
```

# sql-server - DBCC CHECKIDENT RESEED -- 是否需要新值？

> ID：14445185
> 
> 赞同：7
> 
> 时间：2013-01-21T18:45:37.223
> 
> 标签：sql-server, sql-server-2008, auto-increment

我阅读的所有关于重新播种的文档都暗示了以下内容：

1.  `SET @maxIdentityValue = (SELECT MAX(id) FROM tablename)`
2.  跑`DBCC CHECKIDENT('tablename', RESEED, @maxIdentityValue)`

然而在我看来，只需要一个简单*的*`DBCC CHECKIDENT('tablename', RESEED)`，它会自动从表中确定正确的标识值，而不提供最大值。

`MAX`是否有理由（性能或其他）首选使用首先提取值？

捎带问题：我需要重新设定种子的原因是因为我正在使用复制，并且每次数据库复制运行时身份都会设置为 Null。我究竟做错了什么？如何为每个表维护正确的身份种子？

## 更新（当前解决方案）

现在我没有使用最大值。这是我正在使用的存储过程（我使用查询生成它`sys.columns`，然后将每个内容剪切并粘贴到一个新的查询窗口中。Messier，速度较慢，不太优雅，但我对存储过程不太熟悉，不要不想使用动态 SQL 查询）：

```
declare @seedval integer
declare @maxval integer
declare @newval integer
set @seedval = (select ident_current('mytable'));
set @maxval = (select MAX(id) from mytable);
if @maxval > @seedval or @seedval is NULL
BEGIN
    print 'Need to reseed: max is '  + cast(@maxval as varchar) + ' and seed is ' + cast(@seedval as varchar) 
    dbcc checkident('mytable', RESEED);
    set @newval = (select ident_current('mytable'));
    print 'Max is ' + cast(@maxval as varchar) + ' and seed is ' + cast(@newval as varchar) 
END 
ELSE
    print 'No need to reseed'; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T19:01:49.453

正如[MSDN](http://msdn.microsoft.com/en-gb/library/ms176057.aspx)中所述，仅使用以下内容就足够了：

```
 DBCC CHECKIDENT('tablename', RESEED) 
```

大多数时候，但是有以下两种情况它不起作用：

*   当前标识值大于表中的最大值。
*   从表中删除所有行。

您必须按照您提到的方式进行操作（选择 max(id) 和其余部分），那么为什么要首先打扰呢？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:51:46.443

在某些情况下，您可能需要确定最大值，以便重新播种并留出间隙（例如 max + 100）。一种情况可能是当您有一个表的多个副本并且您要从它们分发独立但互斥的身份范围时。

但是，我仍然不确定没有参数的 RESEED 在所有情况下都能正常工作。

您将表重新设置为最大值是否很常见？为什么？编码不佳的应用程序会在循环中生成一堆行，最终会回滚？

在任何情况下，您都希望将 MAX 和 RESEED 包装在事务中，以防止用户在您获取最大值之后但在您发出重新种子之前插入新行的机会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T04:55:34.527

[（我正在从另一个 SO 页面重新发布我的答案）](https://stackoverflow.com/questions/2923855/how-to-automatically-reseed-after-using-identity-insert)

也许最简单的方法（就像这听起来很疯狂，而且看起来很臭）就是`DBCC CHECKIDENT`像这样运行两次：

```
-- sets all the seeds to 1
exec sp_MSforeachtable @command1 = 'DBCC CHECKIDENT (''?'', RESEED, 1)'

-- run it again to get MSSQL to figure out the MAX/NEXT seed automatically
exec sp_MSforeachtable @command1 = 'DBCC CHECKIDENT (''?'')' 
```

完毕。

如果需要，您可以再次运行它以查看所有种子的设置：

```
-- run it again to display what the seeds are now set to
exec sp_MSforeachtable @command1 = 'DBCC CHECKIDENT (''?'')' 
```

这只是利用文档中的评论的一种创造性方式：

> 如果表的当前标识值小于标识列中存储的最大标识值，则使用标识列中的最大值对其进行重置。

# c# - 如何将 www.example.com 重定向到 example.com？

> ID：14445186
> 
> 赞同：0
> 
> 时间：2013-01-21T18:45:38.817
> 
> 标签：c#, azure, asp.net-mvc-4, url-routing

我的 MVC4 应用程序托管在 Azure（共享网站）上，并且在 exaple.com 上运行良好。
我想将 www.example.com 重定向到 example.com，但是如果在 www.example.com 访问它会报告 404 错误。

我应该添加什么，这是解决这个问题的正确方法吗？
我不认为这是 DNS 问题，因为我在[serverfault](https://serverfault.com/questions/470888/azure-hosted-website-gives-404-error-when-domain-name-is-preceded-by-www)上问过它。

我试图通过 Web.config 重定向：

```
<system.webServer>
<rewrite>
  <rules>
    <clear />
    <rule name="WWW Rewrite" stopProcessing="true" enabled="true">
      <match url=".*" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^www[.](.+)" />
      </conditions>
      <action type="Redirect" url="http://{C:1}/{R:0}" redirectType="Permanent" />
    </rule>
  </rules>
</rewrite>
</system.webServer> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:20:13.880

您必须具有以下两者的 DNS 记录：www.mysite.com 和 mysite.com，A 或 CNAME。然后，在 Web 服务器上，您应该设置一个“301”重定向，将所有请求从 www.mysite.com 重定向到 mysite.com。

如果您不介意人们同时使用两者，那么只需 DNS 区域中的 CNAME 记录就可以解决问题：

```
www IN CNAME mysite.com 
```

我认为有一种方法可以向 Google 注册并告诉它始终使用其中一个来索引您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:46:29.703

除了 Web.config 中的重写部分之外，还必须在 Azure 中将*两个*域名（example.com 和 www.example.com）配置为自定义域。
然后一切都按预期工作。

# c++ - 在 C++ 项目中构建事件

> ID：14445187
> 
> 赞同：3
> 
> 时间：2013-01-21T18:45:41.967
> 
> 标签：c++, visual-studio-2010, post-build-event

我的 C++ Visual Studio 2010 项目中有一个构建后事件，它使用 command `xcopy`，但是当这个 xcopy 返回错误代码（> 0）时，所有构建也失败并消息“构建不成功”，我怎样才能在构建事件？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:50:31.047

您可以使用`Exec`任务的`IgnoreExitCode`：

```
<Target Name="MyAwesomePostBuildTarget" AfterTargets="Build">
  <Exec IgnoreExitCode="true" Command="xcopy etc. etc." />
</Target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:16:34.377

`|| exit /b 0`您可以通过附加到命令末尾来覆盖（几乎）任何批处理 CMD 的失败结果。例子：

`del somefile.txt || exit /b 0`

这样，批处理文件的工作方式有点像 C。您可以使用 && 来在前一个命令成功时有条件地运行命令，而 || 在前一个命令失败时运行命令。

`exit /b 0`告诉 CMD 处理器退出脚本并将错误级别设置为零 (0)。永远不要忘记包含 /b 开关！没有它，CMD 将退出调用脚本以及当前脚本，这很少（如果有的话）是所需的行为。

我使用 Visual Studio IDE 中的这个技巧，因此无需进行低级项目黑客攻击。它适合一行，这在 IDE 中也很方便。

顺便说一句，另一个有用的技巧是使命令静音：

`xcopy srcfile destfile 1>nul 2>nul || exit /b 0`

`1`是标准输出，`2`是标准错误。众所周知，Windows 的 shell 程序套件在它们可能使用的输出方面不一致，所以我通常只管两者或都不管。

# java - Android View.getDrawingCache() 抛出 CalledFromWrongThreadException

> ID：14445199
> 
> 赞同：1
> 
> 时间：2013-01-21T18:46:22.613
> 
> 标签：java, android, android-asynctask, screen, capture

所以我在尝试在 Android 中捕获我的应用程序屏幕时遇到了问题。情况如下：

我想使用 View.getDrawingCache() 方法连续捕获应用程序屏幕并检测屏幕的哪个部分发生了变化。我的应用程序基于一个包含 5 个活动的 TabHost，我想捕获 tabhost 中发生的所有事情。我还希望屏幕捕获代码在后台运行，为此我创建了一个 AsyncTask 实例来捕获图像并检查是否发生了变化。问题是 getDrawingCache() 方法有时会导致应用程序崩溃并引发 CalledFromWrongThreadException。

我已经做了一些测试，这就是我发现的。首先，我什至没有在 tabhost 中的活动之间进行更改，所以只有第一个是可见的。第一个活动有一个 ScrollView，一旦我使用“android:scrollbars='none'”禁用滚动条，捕获就会起作用，但如果我重新启用它们，它会崩溃并出现相同的异常。我认为问题在于我正在 doInBackground 方法中进行屏幕捕获，而 Android 出于某种原因不喜欢这样（好吧，我知道原因 - 它试图在主线程以外的线程中绘制缓存.. .)。

所以我的问题是有人知道我如何在后台实现录制吗？

这是代码的主要部分，以使事情变得清晰......

```
public class TRCTargetMainActivity extends TabActivity {
private static final Logger tracelog = Logger.getLogger( TRCTargetMainActivity.class.getName() );

private boolean isVisible;
private int selectedIndex;
private Bitmap latestScreen, currentScreen;
private boolean stop = false;
private ScreenCaptureThread scThread;

private TabHost mTabHost;
private MyNotificationReceiver receiver;
private BadgeView chatBadge, transfersBadge;

public void onCreate( Bundle savedInstanceState ) {
    super.onCreate(savedInstanceState);

    requestWindowFeature( Window.FEATURE_NO_TITLE );
    setContentView( R.layout.activity_main );

    mTabHost = getTabHost();

    buildTab( "deviceSpec", getString( R.string.activity_trctargetmain_title_info ), R.drawable.ic_tab_device_info, DeviceInfoActivity.class );
    buildTab( "fileExplorerSpec", getString( R.string.activity_trctargetmain_title_transferfolder ), R.drawable.ic_tab_transfer, FileExplorerActivity.class );
    buildTab( "chatSpec", getString( R.string.activity_trctargetmain_title_chat ), R.drawable.ic_tab_chat, ChatActivity.class );
    buildTab( "transfersSpec", getString( R.string.activity_trctargetmain_title_transfers ), R.drawable.ic_tab_transfers, TransfersActivity.class );
    buildTab( "settingsSpec", getString( R.string.activity_trctargetmain_title_settings ), R.drawable.ic_tab_settings, SettingsActivity.class );

    Bundle extras = getIntent().getExtras();
    if ( extras != null ) {
        selectedIndex = extras.getInt( Settings.EXTRA_SELECTED_TAB );

        mTabHost.setCurrentTab( selectedIndex );
    }

    mTabHost.setOnTabChangedListener( new OnTabChangeListener() {
        public void onTabChanged( String arg0 ) {         
            selectedIndex = mTabHost.getCurrentTab();
        }       
    } );  

    chatBadge = new BadgeView( this, mTabHost.getTabWidget(), 2 );
    transfersBadge = new BadgeView( this, mTabHost.getTabWidget(), 3 );

    initializeBroadcastReceiver();
    configureTabHostBackground();
    checkDirectoryExistence();
    checkTargetServiceState();

    doStartScreenCapture();
}

...

public void doStartScreenCapture() {
    stop = false;

    if ( scThread == null ) {
        scThread = new ScreenCaptureThread();
        scThread.execute();
    }
}
...

private Bitmap getScreenBitmap() {
    RelativeLayout r = (RelativeLayout) this.findViewById( R.id.rootLayout );
    View v = r.getRootView();
    v.setDrawingCacheEnabled( true );

    Bitmap bm = v.getDrawingCache();
    if ( bm == null )
        return bm;

    int[] pixels = new int[ bm.getWidth() * bm.getHeight() ];
    bm.getPixels( pixels, 0, bm.getWidth(), 0, 0, bm.getWidth(), bm.getHeight() );

    return Bitmap.createBitmap( pixels, bm.getWidth(), bm.getHeight(), Bitmap.Config.ARGB_8888 );
}
...

private class ScreenCaptureThread extends AsyncTask<String,Integer,Boolean> {

    private void sendScreenUpdate( int[] data, int row, int col ) {
        ByteBuffer byteBuffer = ByteBuffer.allocate( data.length * 4 );        
        IntBuffer intBuffer = byteBuffer.asIntBuffer();
        intBuffer.put( data );

        byte[] array = byteBuffer.array();

        // send the screen update
    }

    private boolean checkForScreenChanges() {
        int[] pixels1 = new int[ Settings.SCREEN_BLOCK_SIZE * Settings.SCREEN_BLOCK_SIZE ];
        int[] pixels2 = new int[ Settings.SCREEN_BLOCK_SIZE * Settings.SCREEN_BLOCK_SIZE ];

        int numCols = currentScreen.getWidth() / Settings.SCREEN_BLOCK_SIZE;
        int numRows = currentScreen.getHeight() / Settings.SCREEN_BLOCK_SIZE;
        int x = 0;
        int y = 0;

        boolean differenceFound = false;
        for ( int i = 0; i < numRows; i++ ) {
            for ( int j = 0; j < numCols; j++ ) {
                latestScreen.getPixels( pixels1, 0, Settings.SCREEN_BLOCK_SIZE, x, y, Settings.SCREEN_BLOCK_SIZE, Settings.SCREEN_BLOCK_SIZE );
                currentScreen.getPixels( pixels2, 0, Settings.SCREEN_BLOCK_SIZE, x, y, Settings.SCREEN_BLOCK_SIZE, Settings.SCREEN_BLOCK_SIZE );

                if ( !Arrays.equals( pixels1, pixels2 ) ) {
                    sendScreenUpdate( pixels2, i, j );

                    differenceFound = true;
                }

                Arrays.fill( pixels1, 0 );
                Arrays.fill( pixels2, 0 );

                x += Settings.SCREEN_BLOCK_SIZE;
            }

            x = 0;
            y += Settings.SCREEN_BLOCK_SIZE;
        }

        return differenceFound;
    }

    @Override
    protected Boolean doInBackground( String... arg0 ) {
        System.out.println( "SCREEN CAPTURE THREAD STARED" );

        currentScreen = getScreenBitmap();
        latestScreen = getScreenBitmap();

        while ( !stop ) {
            try {
                Thread.sleep( 3000 );
            } catch ( Exception e ) {}
            if ( latestScreen != null && currentScreen != null ) {
                if ( checkForScreenChanges() ) {
                    latestScreen = getScreenBitmap();
                    System.out.println( "SCREEN UPDATED" );
                }
            }
            if ( currentScreen != null && !currentScreen.isRecycled() )
                currentScreen.recycle();

            currentScreen = getScreenBitmap();
        }

        return true;
    }

    @Override
    protected void onPostExecute( Boolean result ) {
        System.out.println( "SCREEN CAPTURE THREAD STOPPED" );
    }
    }
} 
```

这是活动的 xml 文件...

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/rootLayout"
        >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs">

            <RelativeLayout android:id="@+id/emptylayout1" android:orientation="vertical"
                 android:layout_width="fill_parent" android:layout_height="fill_parent"/>
            <RelativeLayout android:id="@+id/emptylayout2" android:orientation="vertical"
                 android:layout_width="fill_parent" android:layout_height="fill_parent"/>
            <RelativeLayout android:id="@+id/emptylayout3" android:orientation="vertical"
                 android:layout_width="fill_parent" android:layout_height="fill_parent"/>
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="-4dip" />
    </RelativeLayout>
</TabHost> 
```

最后，这是抛出的异常......

```
01-21 18:11:40.070: E/AndroidRuntime(11279): FATAL EXCEPTION: AsyncTask #1
01-21 18:11:40.070: E/AndroidRuntime(11279): java.lang.RuntimeException: An error occured while executing doInBackground()
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.lang.Thread.run(Thread.java:1019)
01-21 18:11:40.070: E/AndroidRuntime(11279): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewRoot.checkThread(ViewRoot.java:3055)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewRoot.invalidateChild(ViewRoot.java:657)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:683)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2514)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.invalidate(View.java:5479)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.awakenScrollBars(View.java:5372)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.awakenScrollBars(View.java:5264)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.ScrollView.onOverScrolled(ScrollView.java:820)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.overScrollBy(View.java:9100)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.ScrollView.computeScrollBounce(ScrollView.java:1325)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.ScrollView.computeScroll(ScrollView.java:1366)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1562)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.draw(View.java:7083)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.draw(View.java:7083)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.draw(View.java:7083)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.draw(View.java:7083)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2119)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.buildDrawingCache(View.java:6842)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.getDrawingCache(View.java:6628)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.view.View.getDrawingCache(View.java:6593)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at com.ibm.trctarget.TRCTargetMainActivity.getScreenBitmap(TRCTargetMainActivity.java:158)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at com.ibm.trctarget.TRCTargetMainActivity.access$6(TRCTargetMainActivity.java:153)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at com.ibm.trctarget.TRCTargetMainActivity$ScreenCaptureThread.doInBackground(TRCTargetMainActivity.java:391)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at com.ibm.trctarget.TRCTargetMainActivity$ScreenCaptureThread.doInBackground(TRCTargetMainActivity.java:1)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-21 18:11:40.070: E/AndroidRuntime(11279):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-21 18:11:40.070: E/AndroidRuntime(11279):    ... 4 more 
```

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:55:26.777

愚蠢而简单的方法是将需要在主线程上运行的东西包装在`runOnUiThread(...)`

# google-apps-script - Google Apps Script GUI Builder UI 的版本控制

> ID：14445200
> 
> 赞同：1
> 
> 时间：2013-01-21T18:46:23.330
> 
> 标签：google-apps-script

我已将 Google Apps 脚本发布为网络应用程序（假设它是“管理版本”中的版本 1），我现在正在编写新版本的代码。我遇到的问题是，对新版本的 GUI Builder UI 所做的任何更改都会立即应用于已发布的 Web 应用程序版本，这自然会给当前的活跃用户带来很多问题，因为他们将版本 1 代码（好）与尚未混合 -即将发布的 GUI Builder 组件（不好）。如何让 GUI Builder 与 Google Apps 脚本版本控制保持一致？谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:45:20.027

嗯，我认为 gas 版本管理中缺少关于使用 gui-builder 构建的东西的东西，也许你应该为此提出问题（[google-apps-script-issues](http://code.google.com/p/google-apps-script-issues/issues/entry)），似乎还没有报告。

作为解决方法 1（因为似乎无法在 gui-builder 中复制 gui），您可以在准备发布新版本时制作项目副本并将副本发布给用户（缺点：关键更改，因此您必须使用应用程序的新链接更新您的用户）

解决方法 2 可能是将您的 gui 复制到一个单独的库中，并将一个函数作为代码

```
function getComponent (app, guiName) {
  return app.loadComponent(guiName);
} 
```

然后你从你的项目中使用它来加载 gui。这意味着每次你想创建一个新版本时，你复制你的项目，用上面的函数替换这个副本中的所有源代码，并将该副本作为你的项目中的库引用。然后，该库也必须将原始项目作为库引用，并且您必须更新 gui 构建器中的事件处理程序以指向项目中的原始处理程序。做了一个简短的测试，它似乎工作，但真是一团糟......

# python - Python中字典操作的别名

> ID：14445206
> 
> 赞同：8
> 
> 时间：2013-01-21T18:46:40.220
> 
> 标签：python

我想做这样的事情：

```
f[frozenset((1,3,4))] = 5
f[frozenset((1,))] = 3 
```

但是一直输入这些只是很痛苦，无论如何有别名吗？我知道在 C++ 中可以有一个返回引用的辅助函数，这样你就可以输入：

```
F(1,3,4) = 5
F(1) = 3 
```

以 F 作为辅助函数。非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T18:50:07.740

我认为这实际上只能通过子类来实现：

```
class FrozenSetDict(dict):
    def __setitem__(self,idx,value):
        try:
            dict.__setitem__(self,frozenset(idx),value)
        except TypeError:
            dict.__setitem__(self,frozenset((idx,)),value)

d = FrozenSetDict()
d[1,2,3] = 4
d[1] = 5
print d 
```

产量：

```
{frozenset([1, 2, 3]): 4, frozenset([1]): 5} 
```

`__getitem__`这引入了和之间的不对称，可以通过以相同方式`__setitem__`重新定义轻松修复。`__getitem__`

这可能看起来有点混乱——确实如此。为什么需要子类？这只会使将非`frozenset`对象作为键放入字典中变得更加困难。不过，您可以轻松地使用此配方创建一个代理对象，该对象将使用您的 dict 执行此操作：

```
#I don't like the name of this class -- I'm open to suggestions :)
class FrozenSetProxy(object):
    def __init__(self,obj):
        self.obj = obj

    def __setitem__(self,idx,value):
        try:
            self.obj[frozenset(idx)] = value
        except TypeError:
            self.obj[frozenset((idx,))] = value

    def __getitem__(self,idx):
        try:
            return self.obj[frozenset(idx)]
        except TypeError:
            return self.obj[frozenset((idx,))]

d = dict()
F = FrozenSetProxy(d)
F[1,2,3] = 4
F[1] = 5
print d
print F[1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:51:39.693

在 Python 中没有像 C++ 引用那样的东西，而且您使用的语法在引导时是非法的（用解析器的话来说：）`can't assign to function call`。您*可以*使用对象或子类来模拟它`dict`以自定义其`__getitem__`. 但是有一种更简单且侵入性较小的方法：也将值传递给助手，并让它处理分配：

```
def blah(f):
    def F(*args, value):
        f[frozenset(args)] = value
    F(1, 3, 4, value=5)
    F(1, value=3) 
```

请注意，这使用 Python 3 功能，仅关键字参数。如果您需要它与 Python 2 一起使用，您可以通过接受来模拟调用语法`**kwdargs`：

```
def F(*args, **kwds):
    # optional: check that no other keyword arguments were passed
    f[frozenset(args)] = kwds['value'] 
```

# python - Python 使用 webbrowser、urllib 和 CookieJar 验证和启动私有页面

> ID：14445208
> 
> 赞同：2
> 
> 时间：2013-01-21T18:47:11.250
> 
> 标签：python, browser, mechanize, urllib, cookiejar

我想使用 cookiejar 登录，并且启动的不是登录页面，而是一个只有在经过身份验证后才能看到的页面。我知道 mechanize 可以做到这一点，但除了现在不为我工作之外，我宁愿在没有它的情况下这样做。我现在有，

```
import urllib, urllib2, cookielib, webbrowser
from cookielib import CookieJar

username = 'my_username'
password = 'my_password'
url = 'my_login_page'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'my_username' : username, 'my_password' : password})
opener.open(url, login_data)
page_to_launch = 'my_authenticated_url'
webbrowser.open(page_to_launch, new=1, autoraise=1) 
```

我可以登录并将经过身份验证的页面转储到标准输出，或者在不识别 cookie 的情况下启动登录页面，但我无法在登录后启动我想要的页面。感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T05:50:32.730

您可以使用 selenium 模块来执行此操作。它启动一个浏览器（chrome、Firefox、IE 等），其中加载了一个扩展程序，允许您控制浏览器。

以下是您将 cookie 加载到其中的方式：

```
from selenium import webdriver
driver = webdriver.Firefox() # open the browser

# Go to the correct domain
driver.get("http://www.example.com")

# Now set the cookie. Here's one for the entire domain
# the cookie name here is 'key' and it's value is 'value'
driver.add_cookie({'name':'key', 'value':'value', 'path':'/'})
# additional keys that can be passed in are:
# 'domain' -> String,
# 'secure' -> Boolean,
# 'expiry' -> Milliseconds since the Epoch it should expire.

# finally we visit the hidden page
driver.get('http://www.example.com/secret_page.html') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:09:37.540

您的 cookie 没有进入浏览器。

[`webbrowser`](http://docs.python.org/2/library/webbrowser.html)没有接受存储在您的[`CookieJar`](http://docs.python.org/2/library/cookielib.html#cookiejar-and-filecookiejar-objects)实例中的 cookie 的设施。它只是一个使用 URL 启动浏览器的通用接口。您要么必须实现一个`CookieJar`可以在浏览器中存储 cookie（这几乎可以肯定是一项不小的任务），要么使用一个替代库来为您解决这个问题。

# android - 空 ViewPager 与 PagerTabStrip 崩溃

> ID：14445211
> 
> 赞同：5
> 
> 时间：2013-01-21T18:47:20.130
> 
> 标签：android, android-widget

使用`ViewPager`with 时`PagerTabStrip`：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<android.support.v4.view.PagerTabStrip
    android:id="@+id/pager_tab_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:paddingTop="4dp"
    android:paddingBottom="4dp"
    />

</android.support.v4.view.ViewPager> 
```

寻呼机有一个空适配器：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ViewPager pager = (ViewPager) findViewById(R.id.pager);

    FragmentPagerAdapter adapter = new FragmentPagerAdapter(getFragmentManager()) {

        @Override
        public CharSequence getPageTitle(int position) {
            return "test";
        }

        @Override
        public Fragment getItem(int i) {
            return null;
        }

        @Override
        public int getCount() {
            return 0;
        }
    };
    pager.setAdapter(adapter);

} 
```

触摸/滚动标签条时应用程序崩溃：

```
java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
        at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
        at java.util.ArrayList.get(ArrayList.java:304)
        at android.support.v4.view.ViewPager.performDrag(ViewPager.java:1990) 
```

我*认为* [这条线`ViewPager.performDrag()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/support/v4/view/ViewPager.java#1824)可能是原因。

我的视图设置是错误还是有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:29:15.630

在[`ViewPager`代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/support/v4/view/ViewPager.java)中，数组项无需任何检查即可访问（当没有 page 时）：

```
final ItemInfo firstItem = mItems.get(0);
final ItemInfo lastItem = mItems.get(mItems.size() - 1); 
```

这会导致它崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T12:17:24.930

这个错误仍然没有修复，因为我遇到了同样的问题。问题是 android ViewPager 类中的这两行，在 performDrag(float x) 方法中：

```
final ItemInfo firstItem = mItems.get(0);
final ItemInfo lastItem = mItems.get(mItems.size() - 1); 
```

如果 mItems Arraylist 为空，则根本没有检查。对于 Android 团队来说，这应该不难解决......

但是我想出了一个快速而肮脏的解决方案，我不建议使用。只需让您自己的类扩展 ViewPager 并覆盖该方法，该方法会产生崩溃并用 try,catch 块包围它：

```
public class CustomViewPager extends ViewPager {

    public CustomViewPager(Context context) {
        super(context);
    }

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        boolean event = false;
        try {
            event = super.onInterceptTouchEvent(ev);
        } catch (Exception e) {
            Log.e(MainActivity.TAG, "ERROR: ViewPagerAdapter was empty");
        }
        return event;
    }
} 
```

对程序逻辑使用 try、catch 块是**不好的做法**，但在 android 团队修复此错误之前，这是唯一对我有用的解决方案。

编辑：

不要忘记在 XML 中引用您的自定义 ViewPager：

```
<com.package.CustomViewPager
    android:id="@+id/viewPager_fragment_container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <android.support.v4.view.PagerTabStrip
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</com.package.CustomViewPager> 
```

# c# - 获取 Windows 窗体应用程序 WebBrowser 中单击的超链接的 url

> ID：14445212
> 
> 赞同：0
> 
> 时间：2013-01-21T18:47:25.547
> 
> 标签：c#, winforms, tabs, hyperlink, browser

如果有人单击 WebBrowser 控件内的超链接，我可以使用什么方法来获取该超链接的 url 并检查它是否具有告诉浏览器在新选项卡/窗口中打开链接的属性。Windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:08:28.703

`Document.ActiveElement`您可以使用该属性获取当前具有用户输入焦点的元素。

```
private void webBrowser1_NewWindow(object sender, CancelEventArgs e)
{
    e.Cancel = true;

    if (webBrowser1.Document != null)
    {
        HtmlElement currentElement = webBrowser1.Document.ActiveElement;
        if (currentElement != null)
        {
            string targetPath = currentElement.GetAttribute("href");

            //You can perform some logic here to determine if the targetPath conformsto your specification and if so...
            MainForm newWindow = new MainForm();
            newWindow.webBrowser1.Navigate(targetPath);
            newWindow.Show(); 

           //Otherwise
           //webBrowser1.Navigate(targetPath);

        }
    }
} 
```

# namespaces - 要使用 bpel 中分配操作的哪个命名空间 - selectionFailure，没有表达式结果

> ID：14445214
> 
> 赞同：2
> 
> 时间：2013-01-21T18:47:44.260
> 
> 标签：namespaces, wso2, bpel

情况是我有一个调用服务的相当简单的 BPEL 流程。我想访问响应消息元素，然后将其分配给另一个服务（或者甚至分配给 BPEL 流程本身的结果以返回给客户端）。我遇到的问题是，要调用的服务的导入 wsdl 在其中有一个命名空间声明，例如 ldap，并且该 wsdl 的所有导入 xsd 元素也声明了相同的 ldap 命名空间。

```
<definitions
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ldap="http://webservices.hrldaplookup.ecis.police.uk/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/"
    targetNamespace="http://webservices.hrldaplookup.ecis.police.uk/" name="LDAPLookupServiceImpl"> 
```

然后将其导入我的 BPEL 流程，再次使用 ldap 命名空间。

```
 <bpel:process name="HRLDAPProces"
         targetNamespace="http://ldap.ecis.police.uk/Person/process"
         suppressJoinFailure="yes"
         xmlns:tns="http://ldap.ecis.police.uk/Person/process"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ldap="http://webservices.hrldaplookup.ecis.police.uk/"  xmlns:ns1="http://www.w3.org/2001/XMLSchema" xmlns:ns0="http://uk.police.ecis.police.uk/athena/services/ConstrainedValueService" xmlns:ns="http://webservices.cvmanagement.athena.ecis.police.uk/">

    <!-- Import the client WSDL -->
    <bpel:import namespace="http://webservices.cvmanagement.athena.ecis.police.uk/" location="ConstrainedValueService.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://uk.police.ecis.police.uk/athena/services/ConstrainedValueService" location="ConstrainedValueService_1.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://webservices.hrldaplookup.ecis.police.uk/" location="LDAPLookupServiceImpl.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import location="HRLDAPProcesArtifacts.wsdl" namespace="http://ldap.ecis.police.uk/Person/process" 
            importType="http://schemas.xmlsoap.org/wsdl/" /> 
```

当服务被调用时，响应消息有自己的任意命名空间分配给元素。

```
<getPersonnelResponse xmlns="http://webservices.hrldaplookup.ecis.police.uk/" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns2="http://webservices.hrldaplookup.ecis.police.uk/" xmlns:ns3="http://ldap.ecis.police.uk/Person" xmlns:ns4="http://ecis.police.uk/ldaplookupservice"><personnelData xmlns="http://ecis.police.uk/ldaplookupservice"><detail xmlns="http://ldap.ecis.police.uk/Person"> 
```

当我想将可变参数部分分配给其他东西时，我不知道要使用哪个命名空间。

```
$LDAPLookupResponse.parameters/ldap:personnelData/ldap:detail/item[1] 
```

或者

```
$LDAPLookupResponse.parameters/ns2:personnelData/ns4:detail/ns4:item[1] 
```

两者似乎都不起作用。

我确定我只是缺少一些简单的东西，我只需要指出正确的方向。

谢谢

我正在使用 WSO2 业务流程服务器。

根据 Thilini Ishaka 的要求，完整的 bpel 流程在[这里](http://pastebin.com/Gy9REF1t)- 谢谢！

并且错误的日志文件是

```
TID: [0] [BPS] [2013-01-21 16:22:47,750] DEBUG {org.wso2.carbon.bpel.messagetrace} -  Service invocation completed: MEXId: hqejbhcnphr7xlanvn6p6t :: {http://webservices.hrldaplookup.ecis.police.uk/}LDAPLookupServiceImpl.getPersonnel {org.wso2.carbon.bpel.messagetrace}
TID: [0] [BPS] [2013-01-21 16:22:47,750] TRACE {org.wso2.carbon.bpel.messagetrace} -  Response message: MEXId: hqejbhcnphr7xlanvn6p6t :: <?xml version='1.0' encoding='utf-8'?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body><ns2:getPersonnelResponse xmlns:ns2="http://webservices.hrldaplookup.ecis.police.uk/" xmlns:ns4="http://ecis.police.uk/ldaplookupservice" xmlns:ns3="http://ldap.ecis.police.uk/Person"><ns4:personnelData><ns3:detail><ns3:item title="Managers Name">Bob NELSON PSE 56619</ns3:item><ns3:item title="Fullname">Conrad CRAMPTON PSE 52704</ns3:item><ns3:item title="Rank">PSE</ns3:item><ns3:item title="Collar Number">46052704</ns3:item><ns3:item title="Location">Headquarters</ns3:item><ns3:item title="Email address">conrad.crampton@kent.pnn.police.uk</ns3:item><ns3:item title="Last Name">Crampton</ns3:item><ns3:item title="Force Number">52704</ns3:item><ns3:item title="Managers Force Number">56619</ns3:item><ns3:item title="First Name">Conrad</ns3:item></ns3:detail></ns4:personnelData></ns2:getPersonnelResponse></S:Body></S:Envelope> {org.wso2.carbon.bpel.messagetrace}
TID: [0] [BPS] [2013-01-21 16:22:47,750]  INFO {org.apache.ode.bpel.runtime.ASSIGN} -  Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure,lineNo=322,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: R-Value expression "{OXPath10Expression $LDAPLookupResponse.parameters//ldap:item[@title = 'Rank']}" did not select any nodes. {org.apache.ode.bpel.runtime.ASSIGN}
TID: [0] [BPS] [2013-01-21 16:22:47,750]  INFO {org.apache.ode.bpel.runtime.ASSIGN} -  Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure,lineNo=322,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: R-Value expression "{OXPath10Expression $LDAPLookupResponse.parameters//ldap:item[@title = 'Rank']}" did not select any nodes. {org.apache.ode.bpel.runtime.ASSIGN}
TID: [0] [BPS] [2013-01-21 16:22:47,765]  WARN {org.apache.ode.bpel.engine.BpelProcess} -  Instance 3652 of {http://ldap.ecis.police.uk/Person/process}HRLDAPProces-31 has completed with fault: FaultData: [faultName={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure, faulType=null ({http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: R-Value expression "{OXPath10Expression $LDAPLookupResponse.parameters//ldap:item[@title = 'Rank']}" did not select any nodes.)] @322 {org.apache.ode.bpel.engine.BpelProcess}
TID: [0] [BPS] [2013-01-21 16:22:47,765]  WARN {org.apache.ode.bpel.engine.BpelProcess} -  Instance 3652 of {http://ldap.ecis.police.uk/Person/process}HRLDAPProces-31 has completed with fault: FaultData: [faultName={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure, faulType=null ({http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: R-Value expression "{OXPath10Expression $LDAPLookupResponse.parameters//ldap:item[@title = 'Rank']}" did not select any nodes.)] @322 {org.apache.ode.bpel.engine.BpelProcess}
TID: [0] [BPS] [2013-01-21 16:22:47,859] DEBUG {org.wso2.carbon.bpel.messagetrace} -  Reply Sent: HRLDAPProces.{http://ldap.ecis.police.uk/Person/process}process {org.wso2.carbon.bpel.messagetrace}
TID: [0] [BPS] [2013-01-21 16:22:47,859] TRACE {org.wso2.carbon.bpel.messagetrace} -  Response message: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:Action>http://ldap.ecis.police.uk/Person/process/HRLDAPProces/processResponse</wsa:Action><wsa:RelatesTo>http://identifiers.wso2.com/messageid/1358785364081/1999227541</wsa:RelatesTo></soapenv:Header><soapenv:Body><soapenv:Fault><faultcode>soapenv:Server</faultcode><faultstring xmlns:axis2ns2="http://docs.oasis-open.org/wsbpel/2.0/process/executable">axis2ns2:selectionFailure</faultstring><detail/></soapenv:Fault></soapenv:Body></soapenv:Envelope> {org.wso2.carbon.bpel.messagetrace}
TID: [0] [BPS] [2013-01-21 16:23:17,875]  INFO {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} -  'admin@carbon.super [-1234]' logged in at [2013-01-21 16:23:17,875+0000] {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:07:24.433

问题可能是您的进程文件中的命名空间冲突。理想情况下，它应该与；

$LDAPLookupResponse.parameters/ldap:personnelData/ldap:detail/item[1]

您能否发布完整的 bpel 配置和完整的错误日志以检查配置中是否有任何命名空间冲突。

# python - 在 django 平面页面中包含视频

> ID：14445218
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:48:04.423
> 
> 标签：python, django, django-flatpages

我从来没有在 Django（或者根本就没有 Django）上使用过平面页面，但我需要创建一个新的平面页面并将视频对象位复制到新的平面页面上。视频是 MP4 格式，如果有区别的话。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:05:13.323

视频需要播放器和托管视频的位置。所以只要将播放器嵌入到页面的html中，并且可以在网上的某个地方找到视频，你应该没有问题。我以这种方式在 django 中使用了[Flow Player和 Youtube。](http://flowplayer.org/)

# java - 使用资源 Android 运行意图

> ID：14445220
> 
> 赞同：0
> 
> 时间：2013-01-21T18:48:14.947
> 
> 标签：java, android, uri, android-resources

有必要从图像资源开始意图。

```
Uri path = Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.ic_launcher);
            Intent intent = new Intent(Intent.ACTION_VIEW, null); 
            intent.setData(path);
            intent.setType("image/png"); 
            startActivity(intent); 
```

出现错误：“画廊已关闭”

我的问题在哪里？

# android - 调用 finish() 不会清除对 Activity 的内存引用

> ID：14445224
> 
> 赞同：1
> 
> 时间：2013-01-21T18:48:46.960
> 
> 标签：android, memory-leaks, back-stack, android-memory, mat

在我的应用程序的简化版本中，我有两个活动，A 和 B。活动 A 启动 B，在完成一些工作后 B 调用完成（）。在大多数设备上使用内存分析器工具（运行 4.2 的 Galaxy Nexus、运行 4.0.4 的 Droid 4 和运行 2.3.4 的 Droid 2）显示没有活动 B 的痕迹，这正是我的预期。

但是在运行 4.1.1 的三星 S3 上，MAT 显示活动 B 对象仍然存在，这是由于到以下 GC 根的路径（不包括弱/软引用）：

```
Class Name                                                        | Shallow Heap | Retained Heap
-------------------------------------------------------------------------------------------------
com.myCo.myApp.ActivityB  @ 0x42720818                            |          264 |         3,280
|- <Java Local> java.lang.Thread @ 0x4271cf60  Thread-21941 Thread|           80 |        52,264
|- mOuterContext android.app.ContextImpl @ 0x426adf68             |          104 |           784
    |  '- mContext android.media.AudioManager @ 0x428e49a0        |           48 |           152
------------------------------------------------------------------------------------------------- 
```

每次我启动和停止活动 B 时，MAT 都会显示活动 B 的内存占用的另一个实例。我打开/关闭活动 B 的次数越多，logcat 中报告的内存占用就越大。通过 MAT 强制 GC 不会删除对活动 B 内存的引用。

我有三个问题。

1.  为什么不同设备的内存/GC行为不同？

2.  在 S3 上，操作系统最终会回来并 GC 搁浅的活动 B 对象（换句话说，我应该不用担心它，因为 Android 会在崩溃前清理它）？

3.  如果不是，那么 Thread 和 AudioManager 引用来自哪里，我将如何清除它们？

感谢任何有经验的“泄密者”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:23:37.830

更新：为了查看活动 B 留下的“搁浅”内存是否真的有问题，我在活动 A 和 B 之间创建了一个循环：

```
--- A calls startActivityForResult() on B
--- B calls finish()
--- onActivityResult() in A calls B again, etc... 
```

我让它飞行了大约 15k 次迭代，程序没有崩溃。因此，即使此手机和操作系统版本（Samsung S3，4.1.1）上的 JVM 在内存中保留了对 B 类的引用，即使在活动 B 调用了 finish() 之后，似乎也会进行某种稍后的清理，因为在测试期间，对 B 类的引用数量并没有单调增加。

事实上，我在测试期间生成了几个堆转储，并且从未看到超过 100 个 B 类的实例——与我希望看到的 15k 不同，如果没有其他清理。logcat 中的 GC 语句也显示了内存使用量的上升和下降，尽管活动 B 的调用数量很大。

我的结论是，我不应该担心在完成（）调用之后堆转储中存在 B 类引用，因为在此手机/Android 版本上使用的 JVM 似乎进行了某种延迟清理。

注意：这是我基于我运行的测试的推断，所以如果有人知道不同，请分享。谢谢！

# eclipse - JAX-WS Web 服务和环境实体

> ID：14445228
> 
> 赞同：0
> 
> 时间：2013-01-21T18:48:51.030
> 
> 标签：eclipse, web-services, jax-ws

拳头，我对这些东西不熟悉，如果我没有正确描述我的问题，很抱歉。我使用 Eclipse Juno 向导（动态 Web 项目 --> 添加类 --> 新 Web 服务 --> 创建 WAR）和 AXIS 2 为 Tomcat 6 构建了一个简单的 Jax-WS Web 服务。一切正常，但是现在我想在 web.xml 文件中存储一些环境实体并让它们可以从服务中访问。

如果我使用的是 servlet，我会调用 ServletConfigurator.getinitparam("name")，但是如何使用 Web 服务来实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:18:00.800

you might want to take a look at [this](http://www.9lessons.info/2012/09/restful-web-services-api-using-java-and.html) website for RESTful Web Services API using Java and MySQL.It's pretty informative.

# ios - 如何使用 CAKeyframeAnimation 用于弹跳效果 IOS

> ID：14445229
> 
> 赞同：5
> 
> 时间：2013-01-21T18:48:58.697
> 
> 标签：ios, calayer

我制作了这段代码来创建 CAKeyframeAnimation 但结果根本没有反弹

```
-(CAKeyframeAnimation *)keyframeBounceAnimationFrom:(NSValue *)from
                                                    to:(NSValue *)to
                                         forKeypath:(NSString *)keyPath
                                       withDuration:(CFTimeInterval)duration
{

    CAKeyframeAnimation * animation = [CAKeyframeAnimation animationWithKeyPath:keyPath];

    NSMutableArray * valuesArray = [NSMutableArray array];
    NSMutableArray * timeKeyArray = [NSMutableArray array];

    [self createBounceFrom:from to:to Values:valuesArray keyTimes:timeKeyArray];

    [animation setValues:valuesArray];
    [animation setKeyTimes:timeKeyArray];

    animation.duration = duration;
    return animation;
}

-(void)createBounceFrom:(NSValue *)from to:(NSValue *)to Values:(NSMutableArray *)values keyTimes:(NSMutableArray *)keyTimes
{

    CGPoint toPoint= [to CGPointValue];
    CGFloat offset = 60;
    CGFloat duration = 1.0f;
    NSUInteger numberOfOscillations= 4;

    [values addObject:from];
    [keyTimes addObject:[NSNumber numberWithFloat:0.0f]];
    //============
    //ideally bouncing will depend from starting position to end poisiton as simulating real Dumping Oscillations
    //============

    for (NSUInteger index= 0; index <numberOfOscillations ; index++)
    {

        CGPoint viaPoint = CGPointMake(toPoint.x,  toPoint.y + offset);
        NSValue * via = [NSValue valueWithCGPoint:viaPoint];
        [values addObject:via];
        //add time consumed for each oscillation
        [keyTimes addObject:[NSNumber numberWithFloat:duration]];
       // duration = duration - 0.1;

        offset = - offset ;
    }

    [values addObject:to];
    [keyTimes addObject:[NSNumber numberWithFloat:0.6]];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:07:57.830

这是一个很好的链接，其中包含一些如何使用它的示例：

（经过一番查看后，我发现了这个： http: [//www.cocoanetics.com/2012/06/lets-bounce/](http://www.cocoanetics.com/2012/06/lets-bounce/)，我认为它的反弹效果更好，但更先进。所以不会把代码放在这里）

[http://www.touchwonders.com/some-techniques-for-bouncing-animations-in-ios/](http://www.touchwonders.com/some-techniques-for-bouncing-animations-in-ios/)

CAKeyframeAnimation 的示例是：（取自链接）

```
-(void)animateGreenBall
{
    NSValue *from = @(greenBall.layer.position.y);
    CGFloat bounceDistance = 20.0;
    CGFloat direction = (greenUp? 1 : -1);

    NSValue *via = @((greenUp ? HEIGHT_DOWN : HEIGHT_UP) + direction*bounceDistance);
    NSValue *to = greenUp ? @(HEIGHT_DOWN) : @(HEIGHT_UP);
    NSString *keyPath = @"position.y";
    CAKeyframeAnimation *animation = [self keyframeBounceAnimationFrom:from
                                                                   via:via
                                                                    to:to
                                                            forKeyPath:keyPath
                                                          withDuration:.6];

    [greenBall.layer addAnimation:animation forKey:@"bounce"];
    [greenBall.layer setValue:to forKeyPath:keypath];
    greenUp = !greenUp;
}

-(CAKeyframeAnimation *)keyframeBounceAnimationFrom:(NSValue *)from 
                                                via:(NSValue *)via 
                                                 to:(NSValue *)to 
                                         forKeyPath:(NSString *)keyPath 
                                       withDuration:(CFTimeInterval)duration
{
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:keyPath];
    [animation setValues:@[from, via, to, nil]];
    [animation setKeyTimes:@[@(0), @(.7), @(1), nil]];

    animation.duration = duration;
    return animation;
} 
```

# jquery-plugins - 调试 jQuery 插件以在两个相等的列中显示动态列表

> ID：14445231
> 
> 赞同：5
> 
> 时间：2013-01-21T18:49:04.407
> 
> 标签：jquery-plugins, jquery-selectors, typeerror, joomla3.0

我正在尝试实现一个 jQuery 插件。该代码可在 jsFiddle 上找到。[http://jsfiddle.net/MKL4g/1/](http://jsfiddle.net/MKL4g/1/)但我也在下面复制了我的修改。

```
var postsArr = new Array(),
    $postsList = $('div.cat-children ul');

//Create array of all posts in lists
$postsList.find('li').each(function(){
    postsArr.push($(this).html());
})

//Split the array at this point. The original array is altered.
var firstList = postsArr.splice(0, Math.round(postsArr.length / 2)),
    secondList = postsArr,
    ListHTML = '';

function createHTML(list){
    ListHTML = '';
    for (var i = 0; i < list.length; i++) {
        ListHTML += '<li>' + list[i] + '</li>'
    };
}

//Generate HTML for first list
createHTML(firstList);
$postsList.html(ListHTML);

//Generate HTML for second list
createHTML(secondList);
//Create new list after original one
$postsList.after('<ul class="cat-list"></ul>').next().html(ListHTML); 
```

我正在使用 Gantry 4.1.5 框架在 Joomla 3.0.2 站点上实现此功能。

样式化生成的 UL LI 数组的 CSS 如下（LESS 格式）：

```
body {
  &.menu-face-à-la-crise,
  &.menu-divorce-séparation,
  &.menu-études-de-cas,
  &.menu-effets-de-la-vie-séparée,
  &.menu-effets-du-divorce,
  &.menu-effets-communs,
  &.menu-situations-particulières,
  &.menu-formulaires-modèles,
  &.menu-suppléments-addendas,
  &.menu-à-propos-de-nous {
    div#rt-mainbody-surround {
      margin-top: -1px;
      background: @whitebrown;
    }
    div.component-content {
      .blog {
        li {
          text-align: center;
          font-family: @headingFontFamily;
          font-weight: 700;
          font-size: 2.0em;
          line-height: 1.5em;
          text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
        }
        div.cat-children {
            ul {
              float: left;
              padding: 10px;
            }
        }
      }
    }
  }
} 
```

我在控制台中收到以下错误：

**TypeError：'null' 不是对象（评估 '$postsList.find'）**

你可以在这里看到实现：

http://gobet.ergonomiq.net/études-de-cas/effets-du-divorce

如您所见，它似乎没有将列表项分成两列。

结果显示应该将列表分成两列，并让列表项在视觉上以列为中心。

有人可以建议如何调试和解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:25:51.023

您已启用 MooTools 并在脚本的开头。翻转它，以便您使用 jQuery 选择器。

```
var postsArr = [],
    $postsList = jQuery('.cat-children ul');

//Create array of all posts in lists
$postsList.find('li').each(function(){
    postsArr.push(jQuery(this).html());
})

//Split the array at this point. The original array is altered.
var firstList = postsArr.splice(0, Math.round(postsArr.length / 2)),
    secondList = postsArr,
    ListHTML = '';

function createHTML(list){
    ListHTML = '';
    for (var i = 0; i < list.length; i++) {
        ListHTML += '<li>' + list[i] + '</li>'
    };
}

//Generate HTML for first list
createHTML(firstList);
$postsList.html(ListHTML);

//Generate HTML for second list
createHTML(secondList);
//Create new list after original one
$postsList.after('<ul class="cat-list"></ul>').next().html(ListHTML); 
```

* * *

编辑新请求

```
(function updateColumns($){
    var postsArr = [],
        $postsList = $('.cat-children ul'),
        $parent = $postsList.parent();

    //Create array of all posts in lists
    $postsList.find('li').each(function(){
        postsArr.push(jQuery(this).html());
    })

    //Split the array at this point. The original array is altered.
    var firstList = postsArr.splice(0, Math.round(postsArr.length / 2)),
        secondList = postsArr,
        // ListHTML = '', <-- not needed
        $insertWrapper = $('<div>').addClass('cat-children');

    function createHTML(list){
        var $ul = $('<ul>').addClass('cat-list');
        for (var i = 0; i < list.length; i++) {
            $ul.append( $('<li>').html( $(list[i]).html() ) );
        };
        var $wrappedDiv = $('<div>').addClass('gantry-width-50 cat-columns').append( $ul )
        return $wrappedDiv;
    }

    //Generate HTML for first list
    $insertWrapper.append( createHTML(firstList) );
    $insertWrapper.append( createHTML(secondList) );

    $postsList.replaceWith( $insertWrapper );
})(window.jQuery); 
```

# java - 如何在现有的 java 项目中使用 MUpdf

> ID：14445234
> 
> 赞同：1
> 
> 时间：2013-01-21T18:49:12.193
> 
> 标签：java, pdf, mupdf

Mupdf 文档向我展示了如何将库用作应用程序并进行部署。但是，我想将它吸收到现有的 java 项目中并在它之上构建我的应用程序。这可以做到吗？如果是这样，我如何将所需的部分带入我的项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:26:05.647

看看[jMuPdf](http://jmupdf.sourceforge.net/joomla/)。我从来没有使用过它，但它似乎是活跃的。

否则，您将需要创建 Java 本机绑定（JNA 或 JNI）。

# ios - 如何在信箱模式下运行的 iPhone 5 上截取 UIImage 屏幕截图？

> ID：14445235
> 
> 赞同：0
> 
> 时间：2013-01-21T18:49:13.587
> 
> 标签：ios, objective-c, cocos2d-iphone

**编辑：**我给出了错误的代码。我很抱歉！在那里，我改变了它。

我的应用程序在 iPhone 5 中以信箱模式运行，因为我还没有给它一个大小合适的默认图像。

我想暂时保留它的信箱。

我使用此代码生成`UIImage`我的游戏的屏幕截图：

```
/*
 * AWSuite: http://forzefield.com
 *
 * Copyright (c) 2010 ForzeField Studios S.L.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

#import "AWScreenshot.h"
#import "CCDirector.h"

#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
#import "CCDirectorIOS.h"
#import "ccMacros.h"
#define AWIMAGE UIImage*
#else
#import "CCDirectorMac.h"
#define AWIMAGE CGImageRef
#endif

@implementation AWScreenshot

#pragma mark -
#pragma mark Take screenshot as data

+ (CGImageRef) takeAsCGImage
{
    CCDirector *director = [CCDirector sharedDirector];
    CGSize displaySize  = [director displaySizeInPixels];
    CGSize winSize  = [director winSizeInPixels];

    // Create buffer for pixels
    GLuint bufferLength = displaySize.width * displaySize.height * 4;
    GLubyte* buffer = (GLubyte*)malloc(bufferLength);

    // Read Pixels from OpenGL
    glReadPixels(0, 0, displaySize.width, displaySize.height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // Make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);

    // Configure image
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGImageRef iref = CGImageCreate(displaySize.width, displaySize.height, 8, 32, displaySize.width * 4, colorSpaceRef, kCGBitmapByteOrderDefault, provider, NULL, NO, kCGRenderingIntentDefault);

    // Create buffer for output image
    uint32_t* pixels = (uint32_t*)malloc(winSize.width * winSize.height * 4);
    CGContextRef context = CGBitmapContextCreate(pixels, winSize.width, winSize.height, 8, winSize.width * 4, colorSpaceRef, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    // Transform
#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
    CGContextTranslateCTM(context, 0, displaySize.height);
    CGContextScaleCTM(context, 1, -1);

    switch ([director deviceOrientation])
    {
        case kCCDeviceOrientationPortrait: break;
        case kCCDeviceOrientationPortraitUpsideDown:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(180));
            CGContextTranslateCTM(context, -displaySize.width, -displaySize.height);
            break;
        case kCCDeviceOrientationLandscapeLeft:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(-90));
            CGContextTranslateCTM(context, -displaySize.height, 0);
            break;
        case kCCDeviceOrientationLandscapeRight:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(90));
            CGContextTranslateCTM(context, displaySize.height-displaySize.width, -displaySize.height);
            break;
    }

    // Render
    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, displaySize.width, displaySize.height), iref);

#else
    CGContextTranslateCTM(context, 0, winSize.height);
    CGContextScaleCTM(context, 1, -1);

    // Render
    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, winSize.width, winSize.height), iref);
#endif

    // Create image
    CGImageRef imageRef = CGBitmapContextCreateImage(context);

    // Dealloc
    CGDataProviderRelease(provider);
    CGImageRelease(iref);
    CGColorSpaceRelease(colorSpaceRef);
    CGContextRelease(context);
    free(buffer);
    free(pixels);

    return imageRef;
}

#pragma mark -
#pragma mark Take screenshot as image

#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED

+ (UIImage*) takeAsImage
{
    CGImageRef imageRef = [self takeAsCGImage];
    UIImage *outputImage = [[[UIImage alloc] initWithCGImage:imageRef] autorelease];

    CGImageRelease(imageRef);
    return outputImage;
}

#else

+ (CGImageRef) takeAsImage
{
    return [self takeAsCGImage];
}

#endif

#pragma mark -
#pragma mark Take screenshot as texture

+ (CCTexture2D*) takeAsTexture
{
    AWIMAGE imageRef = [self takeAsImage];
    CCTexture2D *outputTexture = [[[CCTexture2D alloc] initWithImage:imageRef] autorelease];

#ifndef __IPHONE_OS_VERSION_MAX_ALLOWED
    CGImageRelease(imageRef);
#endif
    return outputTexture;
}

@end 
```

这在 iPhone 4 上运行良好。但是，在 iPhone 5 上测试时，图像要么是黑色的，要么是空白的。

cocos2d-iphone 1.0.1

我使用该`takeAsTexture`功能。

# java - Mouselistener 不适用于面板

> ID：14445240
> 
> 赞同：0
> 
> 时间：2013-01-21T18:49:42.183
> 
> 标签：java, swing, jpanel, mouselistener, setfocus

所以我创建了一个实现 MouseListener 的处理类（这个有效）。当程序运行时，正在加载一些资源并创建用于 MouseListener 等的面板......然后当一切都完成后，假设进入（）面板并添加 MouseListener。在下面输入（）：

```
@Override
public void enter() {

    gh = new Game_handler(gr); //gh works fine and implements mouselistener
    this.addMouseListener(gh); //gr is nothing but a chunk of data

    this.requestFocus();
} 
```

现在由于某种原因 MouseListener 不听！我做了一些系统打印，我知道面板是创建的，然后是 MouseListener 类，然后它被添加到面板中。但由于某种原因，它不会做任何事情！

# c# - 用于在构建时运行 T4 的 VIsual Studio 插件

> ID：14445244
> 
> 赞同：1
> 
> 时间：2013-01-21T18:50:02.923
> 
> 标签：c#, visual-studio-2010, visual-studio, t4, envdte

如何通过插件在项目中运行 T4 文件？任何提示/线索？我发现 EnvDte 文档特别稀缺。

我得到了这个解决方案，因为我需要在构建事件上运行我的 T4 模板。我不想在每次发生变化时手动运行自定义工具。我不能从命令行运行它，因为 T4 脚本引用了 DTE 对象，而当从 cmd 行运行时，它只会输出。

我也考虑过使用宏，但宏在 VS2012 上不可用，而且我的本地机器上存在一个错误，阻止我启动宏 IDE。所以这不是一个好的短期/长期解决方案。

最好的解决方案似乎是编写自己的插件来在构建时运行 T4 文件。据我所知：

```
public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
{
    _applicationObject = (DTE2)application;
    _addInInstance = (AddIn)addInInst;
    _applicationObject.Events.BuildEvents.OnBuildBegin += customBuildHander;

}

void customBuildHander(vsBuildScope Scope, vsBuildAction Action)
        {
            if (Scope == vsBuildScope.vsBuildScopeProject)
            {
                //Need to run steps 1 thru 3 here!
            }
        } 
```

我需要以某种方式在上面的代码中适应以下例程：

1.  查找项目中的所有 T4 文件
2.  在 TT 文件上运行 T4，同时传递 DTE 对象，以便可以从 T4 文件访问它们
3.  还要声明环境变量，例如 $(ProjectDir)，以便可以在 T4 脚本中读取它们<--我不知道这是 DTE 附带的还是单独的过程。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:58:17.497

您可能应该使用 DTE 基础结构调用 IDE 命令 TransformAllTemplates 来运行命令，而不是自己进行遍历，如果您只是要运行它们。

# jquery - 使用 jQuery 使用 JSON 填充表

> ID：14445245
> 
> 赞同：0
> 
> 时间：2013-01-21T18:50:05.400
> 
> 标签：jquery, ajax, html-table

我已经阅读了 Stack Overflow 上所有与该主题相关的帖子——我提炼了我认为我需要的东西……而我所拥有的仍然不起作用。

我想将数据加载到表中 - 使用 jQuery（除非 js 有这样做的本机方式）这是我的代码。

[附带问题 - 有没有办法将响应对象转储到屏幕上？所以我可以看到所有的元素有用吗？]

主页

```
<html>
<head><script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script></head>
<body>
<table>
    <tbody id="testBody">
    </tbody>
</table>

<script>
$( document ).ready( function() {
$( '#testBody' ).html( 'Here We Go...<br/>' );

$.ajax({
type: "POST",
url: "ajax_list_json.htm",
dataType: "json",
success: function ( response ) {
    if( response.success ) {
        //...do something...
        $('#testBody').html('<p>We were successful!</p>');
    } else {
        //...tell user there was a problem...
        $('#testBody').html('<p>There was a problem on the server... Dang.</p>');
        //$('#testBody').append( response ); // was trying to dump the response
    }
}

})

});
</script>
</body>
</html> 
```

这是我要发回的 JSON... 目前以这种格式硬编码 - 但只要我的过程正确，我就会将它动态烘焙。

```
{
"people": [
    { "firstName":"John" , "lastName":"Doe" },
    { "firstName":"Jane" , "lastName":"Smith" },
    { "firstName":"Rusty" , "lastName":"Morals" },
    { "firstName":"oo'ja" , "lastName":"d'Addy" },
    { "firstName":"Wink" , "lastName":"Martindale" },
    { "firstName":"Woody" , "lastName":"Knowl" },
    { "firstName":"Tom" , "lastName":"Thumb" },
    { "firstName":"Peter" , "lastName":"Pan" }
]
} 
```

Firebug 中的响应正确返回 - 或者至少是我所期望的。Firebug 中的 JSON 选项卡显示了正确的数组 - 所以我相信我的格式正确。

有什么帮助吗？我想我无法继续将数据放入表中，直到我通过“对响应的错误检查... :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:53:08.780

如果请求有问题，您的`success`回调将不会触发。

JSON 被`success`直接传递到您的回调中：

```
$.ajax({
    type: "POST",
    url: "ajax_list_json.htm",
    dataType: "json",
    success: function ( JSONdata ) {
        // all's good, loop through your JSONdata
    },
    error: function () {
        // there's an error
    }
}); 
```

# r - 如何从绘图数据中获取平均值？从缩小图到数据

> ID：14445247
> 
> 赞同：0
> 
> 时间：2013-01-21T18:50:09.443
> 
> 标签：r, ggplot2, data-analysis

我通过缩小 ggplot2 中的菱形数据集得到了这个图。我通过对斧头限制、切割等进行排序来做到这一点。

```
library(ggplot2)
qplot(price,carat,data=diamonds,cut="Ideal",color=clarity) + xlim(2500,3000) + ylim(1,1.6) 
```

![1克拉以上钻石和理想切工的价格、克拉、净度比较](../Images/d2820425a4cc729e84339bc144a5d1fd.png)

我如何提取这些数据？这是否代表它自己的大型数据集子集？这样我就可以做一些事情，比如获得平均价格、最大克拉值等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:58:20.900

您可以只获得该图中出现的点：

```
subset(diamonds, price >= 2500 & price <= 3000 & carat >= 1 & carat <= 1.6) 
```

# jstl - 在 JSTL 中，有没有办法为整个项目设置 omit-xml-declaration？

> ID：14445249
> 
> 赞同：1
> 
> 时间：2013-01-21T18:50:15.477
> 
> 标签：jstl

我正在从事一个项目，该项目在`<?xml ... ?>`声明潜入 HTML 输出时遇到了困难。确保每个新的和现有的 jspx 文件都包含`<jsp:output omit-xml-declaration="yes" />`已成为一种痛苦。

有没有办法在项目范围内设置这个选项？

# iis - HTTP 错误 500.24 - 内部服务器错误检测到 Asp.NET 设置不适用于集成托管管道模式

> ID：14445252
> 
> 赞同：25
> 
> 时间：2013-01-21T18:50:42.580
> 
> 标签：iis

我有一个带有gridview的网页，其中一列将有一个图像。单击图像时，它将打开保存在网络服务器上的 PDF。它工作正常，但我得到以下错误

“HTTP 错误 55.24 - 内部服务器错误检测到一个 Asp.NET 设置不适用于集成托管管道模式。”

我用谷歌搜索并按照[HTTP 错误 500.22 - 内部服务器错误（已检测到不适用于集成托管管道模式的 ASP.NET 设置。）中的](https://stackoverflow.com/questions/7370513/http-error-500-22-internal-server-error-an-asp-net-setting-has-been-detect)建议进行操作。确保应用程序池是经典的并且 webconfig 是正确的，但我仍然明白单击必须打开保存的 PDF 的图像时出错...请帮助...

![在此处输入图像描述](../Images/8dda418386c37e06d739d65d0ea06320.png)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-05-02T12:21:02.827

您的错误专门与“客户模拟”有关。我在一台机器上遇到了同样的错误，但在另一台机器上却没有。通过比较设置，我找出了差异。

启动 IIS 管理器。在左窗格中选择服务器，然后双击中央窗格中 IIS 组下的“身份验证”。选择 ASP.NET Impersonation 并选择右窗格顶部的“禁用”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-08T13:01:19.557

请添加 web.config

```
 <configuration>
 <system.webServer>
 <validation validateIntegratedModeConfiguration="false"/> 
</system.webServer> 
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-13T05:49:37.270

我在运行该站点的应用程序池中进行了更改。 **“托管管道模式”**从集成到经典。

右键单击您的应用程序*池 -> 基本设置*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-16T11:18:07.657

当访问错误的路径（例如，在`url`Ajax 调用的参数上）时，即使所有其他答案建议都已处理，也可能会出现此错误。

有关（相对）路径的正确用法，请参阅[此答案](https://stackoverflow.com/a/4765962/3002584)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-05-16T13:17:08.990

您的错误专门与“客户模拟”有关。我在一台机器上遇到了同样的错误，但在另一台机器上却没有。通过比较设置，我找出了差异。

启动 IIS 管理器。在左窗格中选择服务器，然后双击中央窗格中 IIS 组下的“身份验证”。选择 ASP.NET Impersonation 并选择右窗格顶部的“禁用”。

然后，选择虚拟目录并选择“身份验证”。匿名身份验证将被“启用”

# c# - Entity Framework 5 中的代码首枚举未添加到数据库中

> ID：14445254
> 
> 赞同：3
> 
> 时间：2013-01-21T18:51:04.943
> 
> 标签：c#, asp.net-mvc, entity-framework

我在使用实体框架将枚举映射到数据库时遇到问题。我设置了一个超级基础类来测试我的问题：

```
public class Person
{
    public int PersonId { get; set; }
    public Genders Gender { get; set; }

    public enum Genders
    {
        Female, Male
    }
} 
```

在以下情况下：

```
public DbSet<Person> Person { get; set; } 
```

我正在使用 MVC 4 创建映射，我创建了一个新控制器，其中 Person 作为模型，我的上下文作为上下文。MVC 脚手架创建了控制器、视图和数据库，但是**当我查看数据库时，有一个名为 Person 的表，其中只有一列 - PersonId - 但没有 Gender 列**。

额外信息：使用面向 .Net 4.5 的 MVC 4 并使用 Entity Framework 5.0（甚至仔细检查了 dll 版本）并连接到 (LocalDb)\V11.0。

我尝试将 Genders 更改为：

```
public enum Genders : Byte
{
    Female = 0, 
    Male = 1
} 
```

[正如一个答案](https://stackoverflow.com/questions/14112436/using-entity-framework-5-enums-and-code-first-migrations)所建议的那样，我什至尝试将 Genders 转移到一个单独的班级。

我找到了一篇[MSDN 文章](http://msdn.microsoft.com/en-us/data/hh859576.aspx)，它以与我拥有和工作的方式相同的方式设置类，唯一的区别是他们使用的是控制台应用程序而不是 MVC。

我错过了什么吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T19:19:04.070

您必须*在任何*类之外定义枚举。不要将它嵌入到类中。

# java - SearchTree 实现中的编译时错误

> ID：14445255
> 
> 赞同：0
> 
> 时间：2013-01-21T18:51:06.417
> 
> 标签：java

MyProg.java:44：错误：类型不匹配：*无法从 void 转换为 SearchTree*

```
SearchTree nTree = nTree.insert(value);
                   ^^^^^^^^^^^^^^^^^^^ 
```

SearchTree.java:18：错误：类型不匹配：无法从 void 转换为 int[] value = Arrays.sort(value);

```
package ab12;
public class MyProg {
public static void main(String[] args) {
    QueueScheduler q = new QueueScheduler();
    int c = 0;
    for (int i = 0; i < 10; i++) {
        q.dynQueue[c].put(i);
        if (c == 2) {
            c = -1;
        }
        c++;
    }   
    Out.println("1\. Random");
    Out.println(q.getRandom());
    Out.println(q.getRandom());
    Out.println(q.getRandom());
    Out.println("2\. Priority");
    Out.println(q.getPriority());
    Out.println(q.getPriority());
    Out.println("3\. RoundRobin");
    Out.println(q.getRoundRobin());
    Set set = new Set();
    Set other = new Set();
    String e = "Hallo";
    String e2 = "H.";
    String e3 = "red";
    String e4 = "blue";
    String e5 = "light";
    set.add(e);
    set.add(e2);
    set.add(e3);
    set.remove(e);
    other.add(e2);
    other.add(e3);
    other.add(e4);
    other.add(e5);
    set.union(other);
    set.difference(other);
    set.isSubsetOf(other);
    int value [] = new int[]{1, 3, 5, 7, 9, 13, 18, 19, 21};
    SearchTree nTree = nTree.insert(value);
    int s = nTree.sum();
    int num = nTree.numberOfLeafs();

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:03:14.007

该错误为您提供了所需的所有信息 - 您正在尝试将返回**void**的方法调用的结果分配给`SearchTree`. 该`insert`方法不会返回调用它的树。

我不确定你的意图到底是什么。如果您是`SearchTree`第一次声明，那么您将无法在同一语句中调用它的方法。

# ios - 如何在使用属性时修复此泄漏？

> ID：14445266
> 
> 赞同：1
> 
> 时间：2013-01-21T18:51:49.990
> 
> 标签：ios, properties, memory-leaks

因为我通常使用 ARC，所以我是一个具有属性以及如何手动释放东西的菜鸟，但在这种情况下我不是，所以我需要一些帮助来解决下面的泄漏问题。现在既然它是一个属性，我是否只是在最后贴上自动释放。我不确定！:)

无论如何，如果有人能告诉我如何正确摆脱这种泄漏，那就太好了！

```
- (id)init
{
    self = [super init];

    if (self)
    {
        self.purchasableObjects = [[NSMutableArray alloc] init];

        self.storeObserver = [[ZTStoreObserver alloc] init];
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self.storeObserver];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:00:22.710

这修复了两个报告的泄漏：

```
- (id)init
{
    self = [super init];

    if (self)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        self.purchasableObjects = array;
        [array release];

        ZTStoreObserver *observer = [[ZTStoreObserver alloc] init];
        self.storeObserver = observer;
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self.storeObserver];
        [observer release];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:55:03.107

如果你不想松开它们，你应该使用strong。

```
@property(strong) NSMutableArray *purchasableObjects;
@property(strong) ZTStoreObserver *storeObserver; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:02:57.367

我假设 self.purchasableObjects 必须是强引用（如果是弱引用，则不会保留内存，除非存在另一个强引用来保持该对象存活），那么您不会泄漏内存，但您可能会发现总内存占用增加，这称为分配。为了保持较低的内存占用，您可以将该变量设置为 nil 并在完成该变量后避免保留周期。您可能会忘记此变量，直到收到内存警告，此时您可以nil 这个对象来回收内存

# ivy - 这个 Ivy changedPattern / SNAPSHOT 配置有什么问题？

> ID：14445268
> 
> 赞同：4
> 
> 时间：2013-01-21T18:51:56.613
> 
> 标签：ivy, artifactory

更新快照依赖项时，我无法让 Ivy 更新缓存。解析器（具有以下设置：

```
<url name="xxx" m2compatible="false" 
     checkmodified="true" changingMatcher="regexp" 
     changingPattern=".*-SNAPSHOT.*"> 
```

一个示例工件文件名（在 Artifactory 中）是：

```
my-jar-1.999-SNAPSHOT.jar 
```

详细的 Ant 解析日志包括：

```
[NOT REQUIRED] com.myorg#my-module;1.999-SNAPSHOT!my-jar.jar 
```

工件上没有 POM。

解析器位于链式解析器下方；他们都有所有相关的属性集。我已阅读[https://issues.apache.org/jira/browse/IVY-938](https://issues.apache.org/jira/browse/IVY-938)和[https://issues.apache.org/jira/browse/IVY-1221](https://issues.apache.org/jira/browse/IVY-1221)，包括所有评论和 AFAICT（可能不正确！ ) 没有任何变通办法是相关的。

我应该放弃快照而只使用具有“integration.latest”动态版本依赖的显式版本吗？我担心当我们为多个主要版本进行集成构建时，这可能最终会失败。那时，我们需要将主要版本拆分到单独的存储库中，或者将主要版本号放在工件名称中，或者同样笨拙的东西，只是为了使“integration.latest”工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:20:59.870

在与 Maven 存储库管理器交谈时，我不喜欢使用 url 解析器。问题是 Maven 对快照修订有特殊且相当独特的处理...... url 解析器更适合用于 ivy 存储库。

我使用 Nexus，但以下内容也应该适用于 Artifactory。以下设置文件设置 Maven Central 和我的两个托管存储库（Maven 存储库有两种风格，发布或快照）：

```
<ivysettings>
    <settings defaultResolver="repos" />
    <resolvers>
        <chain name="repos">
            <ibiblio name="central" m2compatible="true"/>   
            <ibiblio name="my-releases" m2compatible="true" root="https://myhost/releases"/>   
            <ibiblio name="my-snapshots" m2compatible="true" root="https://myhost/snapshots"/>   
        </chain>
    </resolvers>
</ivysettings> 
```

您会注意到我正在使用具有内部逻辑的[ibilio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器来破译 Maven 的特殊快照处理。

当我需要快照修订时，我认为明确声明如下：

```
<ivy-module version="2.0">
    <info organisation="myOrg" module="Demo"/>
    <dependencies>
        <dependency org="myOrg" name="myModule" rev="2.7-SNAPSHOT"/>
        ..
    </dependencies>
</ivy-module> 
```

在后台， [ibilio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器正在读取 Maven 存储库元数据文件，以确定应该从快照存储库中获取哪个带时间戳的工件。

# 更新

我建议阅读以下演示文稿：

*   [使用 Maven 持续交付](http://www.slideshare.net/wakaleo/continuous-deliverywithmaven)

它很好地概述了将发布与开发构建（或快照）分开的 Maven 哲学。它还解释了 Maven 非常笨拙的方面之一......发布工件的两种不同方式......

我怀疑您正在尝试做的是按照作者的思路，即设置 CD 管道。在这种情况下，每个构建都是一个潜在的版本，应该这样对待（没有快照允许的动态依赖关系）。

我建议将快照限制为仅限开发人员构建。仅部署候选版本。这种方法的问题在于管理大量的发布。一些存储库管理器（Nexus、Artifactory、Archiva）提供“暂存”功能，可以验证或丢弃未通过质量关卡的版本。

# 更新 2

如果您使用 ivy 将快照发布到 Maven 存储库中，那么有几个问题：

*   [Ivy 不支持发布带有时间戳的快照](https://support.sonatype.com/entries/21612333-how-do-i-configure-my-ivy-build-to-publish-artifacts-to-nexus)
*   [Ivy 不更新 Maven 模块的 metadata.xml 文件](http://ssinghvi.wordpress.com/2012/01/26/unable-to-retrieve-latest-artifact-from-sonatype-nexus-using-apache-ivy/)

在我看来，时间戳文件首先是使用快照的杀手级功能之一。使用 ivy 只能提供最新的文件（覆盖以前的最新文件）。

有一些变通方法可以解决这些问题：

1.  正如第二个链接中所建议的，您可以完全忽略元数据（将“useMavenMetadata”属性设置为false）并默认返回到常春藤比较文件名的旧机制。这只解决了常春藤客户的问题。
2.  存储库管理器应该能够重新生成元数据文件（Nexus 至少有一个任务来执行此操作）。
3.  使用 Maven ANT 任务。

最后一个建议并不像看起来那么疯狂。首先，这是我知道的唯一支持时间戳快照的方法，其次，Maven 客户端似乎做了很多额外的处理（更新模块元数据），这些处理基本上没有记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:32:49.657

经过几天的挣扎...

问题是对于

```
checkmodified="true" changingMatcher="regexp" 
```

要在 <resolver> 上工作，它必须在层次结构行中的*每个解析器*上 - 所有父 <chain> 解析器和底部的 <url>、<local> 或 <ibiblio> 解析器。

# android - 使用 android 模拟器和网络摄像头捕获视频

> ID：14445269
> 
> 赞同：0
> 
> 时间：2013-01-21T18:51:58.470
> 
> 标签：android

我正在使用网络摄像头在 android 模拟器中捕获视频，网络摄像头是否足以使用 android 模拟器捕获视频？

# php - 如何在这个 AWK 单行中去掉双引号，并删除第一条记录？

> ID：14445271
> 
> 赞同：4
> 
> 时间：2013-01-21T18:52:10.033
> 
> 标签：php, awk, text-processing

试图在我的 AWK 代码中找到所有唯一制造商的列表。我使用以下命令成功地将它们从 CSV 中提取出来，并输出到换行符分隔的文本文件，以便将来将 php 导入到 Magento：

```
awk 'BEGIN {FS=";";ORS="\n";}a[$33]++==0 {print $33}' ./rsrimport/IMPORT.csv >OUTPUT.txt 
```

输出这个：

```
"manufacturer"
"5.11 Tactical"
"Advantage Arms"
"Advanced Armament Corp"
"Ultra Dot"
"American Classic"
"AccuSharp"
"Adams Arms"
"American Defense Mfg."
"Advanced Technology"
"A&G"
"Aimpoint"
""
"Arsenal, Inc."
"Allen"
"AmeriGlo"
"Apex Tactical Specialties"
"Armscor"
"Armalite"
"A.R.M.S., Inc."
"ASP" 
```

我想做的是三方面的：

1.  去掉双引号
2.  删除第一行（这是文件的标题）
3.  消除任何空白（带“”的行）

一直在为此苦苦挣扎，并阅读了无数论坛。感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:59:08.880

用于`gsub`替代`"`和使用`if`条件。

```
{x=$33; gsub("\"","", x);  if(x && FNR!=1){print x;}} 
```

[http://ideone.com/36IwCx](http://ideone.com/36IwCx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:41:44.167

试试这个

```
sed -re '1d;s/"//g; /^( \t)*$/ d' temp.txt 
```

# ios - ABNewPersonViewController parentGroup 问题

> ID：14445275
> 
> 赞同：0
> 
> 时间：2013-01-21T18:52:19.357
> 
> 标签：ios, abaddressbook

我正在尝试将联系人添加到自定义创建的组，但每次都将联系人添加到默认联系人列表中。

这就是我展示控制器的方式

```
 -(void) showNewPersonContact
    {
ABRecordRef groupId=
    ABAddressBookGetGroupWithRecordID(ABAddressBookCreate(), recordId);
    ABNewPersonViewController *picker = [[ABNewPersonViewController alloc] init];
        picker.newPersonViewDelegate = self;
    picker.parentGroup=groupId;
        UINavigationController *navigation = [[UINavigationController alloc]      initWithRootViewController:picker];
        [self presentModalViewController:navigation animated:YES];
    } 
```

recordId 字段我从另一种返回正确recordId 的方法中获得。如何使用ABNewPersonViewController 在自定义组中创建联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:25:45.030

解决了！

```
ABRecordRef groupId=
    ABAddressBookGetGroupWithRecordID(ABAddressBookCreate(), recordId); 
```

而不是`ABAddressBookCreate()`应该`picker.addressBook`

# html - 放大时，在 iframe 中的输入类型文本上在 chrome for android 的固定位置上提升键盘

> ID：14445276
> 
> 赞同：3
> 
> 时间：2013-01-21T18:52:19.247
> 
> 标签：html, iframe, textinput, chrome-for-android

在适用于 Android 的 Chrome 上，当文档缩放超过 100% 时，触摸位于 iframe 内固定位置的 html 文本输入元素不会始终抬起键盘。

[http://theyrule.net/test/iframetest/](http://theyrule.net/test/iframetest/)

例如：在 Chrome for Android 上访问此页面并选择输入，它将调出键盘。现在关闭键盘并缩放页面（我在页面上放置了一些内容，以便可以识别缩放）。如果页面被放大 - 触摸 iframe 中的 html 文本输入元素不会总是显示输入。可以通过返回 100% 缩放级别再次调出。

索引.html

```
<!DOCTYPE html>
<html>
  <style>
    body {background-color:#FFCC00; font:80px sans-serif; color:#FFF; width:1000px; height:2000px;}
    div { width:300px; height:1000px; float:left; padding:0.1em;}
  </style>
  <head>
  </head>
  <body>
  <div style="background-color:#CC3333;">A</div>
  <div style="background-color:#FF9900;">B</div>
  <div style="background-color:#FFCC00;">C</div>
  <iframe src="contents.html" style="width:300px; height:100px; position:fixed; bottom:0; right:0;">
  </body>
</html> 
```

内容.html

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<input type="text" />
</body>
</html> 
```

我希望键盘以任何缩放级别升高。
这似乎是一个 Chrome 错误，有解决方法吗？

这是焦点问题吗？我可以在 iframe 中检测到触摸事件，例如，如果我设置了一个侦听器，我可以让它清除输入中的占位符文本，但它不会调出键盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:14:38.380

向 touchstart 添加一个侦听器，然后将焦点放在输入字段上并阻止默认操作似乎是一种解决方法。输入元素被模糊了——也许焦点转到了嵌入页面。

```
<!DOCTYPE html>
<html>
<body>
<input type="text" id="tt"/>
<script>
document.getElementById("tt").addEventListener('touchend',function(e){e.target.focus(); e.preventDefault();}, false);
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T17:55:08.803

Korimako 的解决方案对我有用，但他的示例使用 touchend，而他的解释是 touchstart。touchend 事件对我不起作用，但 touchstart 可以。

# sugarcrm - 将csv导入sugarCRM

> ID：14445281
> 
> 赞同：0
> 
> 时间：2013-01-21T18:52:49.917
> 
> 标签：sugarcrm

我正在尝试将 csv 文件导入到 SugarCRM，但在第 2 步中，我的数据如下所示： ;cqà,ý¼nÉBÏÛï÷£ýd$ÕÆóWHkÂQËrÅTyÀÁ

我只是不知道该怎么做。我已经尝试研究如何导入，但我没有看到任何可以帮助我解决问题的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:54:26.223

尝试将输入文件格式设置为 UTF-8，看看是否能解决问题。听起来像是文件编码的问题...

# java - 一台服务器中的 Java TCP 和 UDP 回显

> ID：14445282
> 
> 赞同：1
> 
> 时间：2013-01-21T18:52:50.423
> 
> 标签：java, sockets, tcp, udp, client-server

我正在尝试构建一个可以回显来自 TCP 或 UDP 客户端的输入的服务器。

到目前为止，我能想到的最好的是：

```
import java.net.*;
import java.io.*;

public class EchoServerMultiProtocol {
    public static void main(String[] args) throws IOException {

        String clientSentence;
        String capitalizedSentence;

        while (true) {
            /*******************************************************************
             * * Handle TCP * *
             *******************************************************************/
            ServerSocket TCP_Socket = new ServerSocket(6789);

            Socket connectionSocket = TCP_Socket.accept();

            BufferedReader inFromClient = new BufferedReader(
                    new InputStreamReader(connectionSocket.getInputStream()));

            DataOutputStream outToClient = new DataOutputStream(
                    connectionSocket.getOutputStream());

            clientSentence = inFromClient.readLine();

            capitalizedSentence = clientSentence.toUpperCase() + '\n';

            outToClient.writeBytes(capitalizedSentence);

            /*******************************************************************
             * * Handle UDP * *
             *******************************************************************/
            DatagramSocket UDP_Socket = new DatagramSocket(9876);

            byte[] receiveData = new byte[1024];
            byte[] sendData = new byte[1024];

            DatagramPacket receivePacket = new DatagramPacket(receiveData,
                    receiveData.length);

            UDP_Socket.receive(receivePacket);

            clientSentence = new String(receivePacket.getData());

            InetAddress IPAddress = receivePacket.getAddress();

            int port = receivePacket.getPort();

            capitalizedSentence = clientSentence.toUpperCase();

            sendData = capitalizedSentence.getBytes();

            DatagramPacket sendPacket = new DatagramPacket(sendData,
                    sendData.length, IPAddress, port);

            UDP_Socket.send(sendPacket);

        }
    }
} 
```

发生的情况是，如果我从 TCP 客户端发送消息，程序按预期工作，但从 UDP 客户端没有任何反应。我不是很精通客户端/服务器通信，所以任何帮助将不胜感激。

客户端代码如下，但我怀疑它们是问题的根源。

**TCP 客户端**

```
import java.io.*;
import java.net.*;

class EchoClientTCP {

    public static void main(String argv[]) throws Exception {
        String sentence;
        String modifiedSentence;

        BufferedReader inFromUser = new BufferedReader(new InputStreamReader(
                System.in));

        Socket clientSocket = new Socket("127.0.0.1", 6789);

        DataOutputStream outToServer = new DataOutputStream(
                clientSocket.getOutputStream());

        BufferedReader inFromServer = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));

        sentence = inFromUser.readLine();

        outToServer.writeBytes(sentence + '\n');

        modifiedSentence = inFromServer.readLine();

        System.out.println("FROM SERVER: " + modifiedSentence);

        clientSocket.close();

    }
} 
```

**UDP客户端**

```
import java.io.*;
import java.net.*;

class EchoClientUDP {
    public static void main(String args[]) throws Exception {

        BufferedReader inFromUser = new BufferedReader(new InputStreamReader(
                System.in));

        DatagramSocket clientSocket = new DatagramSocket();

        InetAddress IPAddress = InetAddress.getByName("127.0.0.1");

        byte[] sendData = new byte[1024];
        byte[] receiveData = new byte[1024];

        String sentence = inFromUser.readLine();

        sendData = sentence.getBytes();

        DatagramPacket sendPacket = new DatagramPacket(sendData,
                sendData.length, IPAddress, 9876);

        clientSocket.send(sendPacket);

        DatagramPacket receivePacket = new DatagramPacket(receiveData,
                receiveData.length);

        clientSocket.receive(receivePacket);

        String modifiedSentence = new String(receivePacket.getData());

        System.out.println("FROM SERVER:" + modifiedSentence);

        clientSocket.close();

    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:56:28.483

您的程序阻塞等待 TCP 消息，因此它永远不会看到任何 UDP。

您至少需要两个线程，每个线程一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T18:56:56.597

接受是一个阻塞调用。它永远不会到达带有 UDP 套接字的代码部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:58:50.317

Please just make your life easy and use [Netty](https://netty.io/). In a couple of lines of code you have an efficient thread model, support for most common protocols and a great framework to handle messages.

# android - 如何从 JSON 文件中获取 lng 和 lat

> ID：14445286
> 
> 赞同：0
> 
> 时间：2013-01-21T18:53:03.410
> 
> 标签：android, json, google-maps

我想从我的 JSON 文件中获取“lat”和“lng”并添加到一个保留 GeoPoint 的数组中。我试图这样做，但它对我不起作用：

```
protected List<GeoPoint> JsonArray(){
        List<GeoPoint> endp = new ArrayList<GeoPoint>();

        try{
        JSONObject obj = new JSONObject(json);
        JSONArray steps = obj.getJSONArray("routes");
        for(int i=0;i<steps.length();i++){
            JSONObject temp = steps.getJSONObject(i);
            JSONObject ele = temp.optJSONObject("steps").optJSONObject("end_location");
            ele.getJSONObject("lat");
            ele.getJSONObject("lng");

            double lat = Double.parseDouble(ele.getJSONObject("lat").toString());
            double lng = Double.parseDouble(ele.getJSONObject("lng").toString());
            endp.add(new GeoPoint((int)(lat *1E6),(int)(lng * 1E6)));

        }

        }catch (JSONException e) {
            // TODO: handle exception
        }
        return endp;
    } 
```

这是我的 JSON 文件外观的一部分：

```
{
       "routes" : [
          {
             "bounds" : {
                "northeast" : {
                   "lat" : 41.87999000000001,
                   "lng" : -87.615020
                },
                "southwest" : {
                   "lat" : 29.74674000000001,
                   "lng" : -95.361220
                }
             },
             "copyrights" : "Dane do Mapy ©2013 Google",
             "legs" : [
                {
                   "distance" : {
                      "text" : "1 085 mil",
                      "value" : 1746457
                   },
                   "duration" : {
                      "text" : "16 godz. 39 min",
                      "value" : 59955
                   },
                   "end_address" : "1362 Chenevert Street, Houston, Teksas 77003, Stany Zjednoczone",
                   "end_location" : {
                      "lat" : 29.750110,
                      "lng" : -95.36016000000001
                   },
                   "start_address" : "138-230 South Columbus Drive, Chicago, Illinois 60601, Stany Zjednoczone",
                   "start_location" : {
                      "lat" : 41.87999000000001,
                      "lng" : -87.62075000000002
                   },
                   "steps" : [
                      {
                         "distance" : {
                            "text" : "338 stóp",
                            "value" : 103
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 9
                         },
                         "end_location" : {
                            "lat" : 41.88090,
                            "lng" : -87.62069000000001
                         },
                         "html_instructions" : "Kieruj się \u003cb\u003eS Columbus Dr\u003c/b\u003e na \u003cb\u003epółnoc\u003c/b\u003e w stronę \u003cb\u003eE Monroe St\u003c/b\u003e",
                         "polyline" : {
                            "points" : "}tr~FtlxuOuA@w@@QMUA"
                         },
                         "start_location" : {
                            "lat" : 41.87999000000001,
                            "lng" : -87.62075000000002
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0,2 mil",
                            "value" : 266
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 33
                         },
                         "end_location" : {
                            "lat" : 41.88086000000001,
                            "lng" : -87.61750000000001
                         },
                         "html_instructions" : "Skręć \u003cb\u003ew prawo\u003c/b\u003e w \u003cb\u003eE Monroe St\u003c/b\u003e",
                         "polyline" : {
                            "points" : "szr~FhlxuO?SAyA?_B@yA?iBAaB?WBE@C@A?C?A@A?C?y@?_@"
                         },
                         "start_location" : {
                            "lat" : 41.88090,
                            "lng" : -87.62069000000001
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "2,0 mil",
                            "value" : 3186
                         },
                         "duration" : {
                            "text" : "3 min",
                            "value" : 180
                         },
                         "end_location" : {
                            "lat" : 41.85320,
                            "lng" : -87.61470000000001
                         },
                         "html_instructions" : "Skręć \u003cb\u003ew prawo\u003c/b\u003e w \u003cb\u003eU.S. 41 S\u003c/b\u003e",
                         "polyline" : {
                            "points" : "kzr~FjxwuOpMOZ@`PO|ACvDC@?lDCZAfMGjAA`@Av@?^?P?N@P@j@LRFNDRJRHZRb@\\b@^nAjA@@JJXXb@b@z@v@RRp@`@RLr@Xn@Np@J`A@bBOp@Kv@K@?@?@A@?@?@?@?PEvBWxB]fDq@xA]jF_BTIj@QpGuBd@OBAf@SrDyAPGNG@AVKbA_@~@]|@]z@Y`F{AtCy@fHyB"
                         },
                         "start_location" : {
                            "lat" : 41.88086000000001,
                            "lng" : -87.61750000000001
                         },
                         "travel_mode" : "DRIVING"
                      },
                      {
                         "distance" : {
                            "text" : "0,4 mil",
                            "value" : 581
                         },
                         "duration" : {
                            "text" : "1 min",
                            "value" : 30
                         },
                         "end_location" : {
                            "lat" : 41.848390,
                            "lng" : -87.614670
                         },
                         "html_instructions" : "Zjedź \u003cb\u003eInterstate 55 S\u003c/b\u003e w kierunku \u003cb\u003eSaint Louis\u003c/b\u003e",
                         "polyline" : {
                            "points" : "omm~FzfwuOVDPAN?VGlBk@b@M@?JEDAVI`A[dBi@`A[z@UPGZGf@E\\Ab@@VDJBHBTFTHRJPNRNLL\\f@NXLTP\\BF"
                         },
                         "start_location" : {
                            "lat" : 41.85320,
                            "lng" : -87.61470000000001
                         },
                         "travel_mode" : "DRIVING"
                      }, 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:12:43.000

您的变量`JSONArray steps = obj.getJSONArray("routes");`不代表 JSON 对象的“步骤”部分，而是代表“路线”部分。

此外，您还跳过了 JSON 层次结构中的一些级别。使用给定的 JSON，您将需要以下步骤来遍历 JSON（我省略了对不同数组的循环，除了 routes 数组）

```
JSONArray routes = obj.getJSONArray("routes");
for(int i=0; i < routes.length(); i++){
    // Grab the first route
    JSONObject route = routesArray.getJSONObject(i);
    // Take all legs from the route
    JSONArray legs = route.getJSONArray("legs");
    // Grab first leg
    JSONObject leg = legs.getJSONObject(0);
    // Take all steps from the leg
    JSONArray steps = leg.getJSONArray("steps");
    // Grab first step
    JSONObject step = steps.getJSONObject(0);

    JSONObject endLocation = step.getJSONObject("end_location");
    String lat = endLocation.getString("lat");
    String lng = endLocation.getString("lng"); 
```

参考：[Android App中Google Maps API的JSON解析](https://stackoverflow.com/questions/7237290/json-parsing-of-google-maps-api-in-android-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:27:08.510

解析当前 json 字符串以获得 lat 和 lng ：

```
JSONObject obj = new JSONObject(json);
        JSONArray steps = obj.getJSONArray("routes");
        for(int i=0;i<steps.length();i++){
            JSONObject temp = steps.getJSONObject(i);

             // get bounds JSONObject 
            JSONObject boundsjsonobj = temp.getJSONObject("bounds");
             // get northeast JSONObject
            JSONObject jsonboj_bounds_northeast= boundsjsonobj.getJSONObject("northeast");
            // get northeast lng and lat 
             String str_northeast_lat=jsonboj_bounds_northeast.getString("lat");
             String str_northeast_lng=jsonboj_bounds_northeast.getString("lng");
             // get southwest JSONObject
             JSONObject jsonboj_bounds_southwest= boundsjsonobj.getJSONObject("southwest");
            // get northeast lng and lat 
             String str_southwest_lat=jsonboj_bounds_southwest.getString("lat");
             String str_southwest_lng=jsonboj_bounds_southwest.getString("lng");

             //get legs JsonArray from routes
             JSONArray jsonarray_legs = temp.getJSONArray("legs");
             for(int j=0;j<jsonarray_legs.length();j++){
                JSONObject jobjlegs = jsonarray_legs.getJSONObject(j);
                 // get end_location json object

                 JSONObject jobjlegs_end_location = jobjlegs.getJSONObject("end_location");
                  String str_end_location_lat==jobjlegs_end_location.getString("lat");
                  String str_end_location_lng==jobjlegs_end_location.getString("lng");

                  // get start_address object

                 JSONObject jobjlegs_start_address = jobjlegs.getJSONObject("start_address");
                  String str_start_address_lat==jobjlegs_start_address.getString("lat");
                  String str_start_address_lng==jobjlegs_start_address.getString("lng");

                  // get steps jsonArray
                  JSONArray jsonarray_steps = jobjlegs.getJSONArray("steps");
                  for(int k=0;k<jsonarray_steps.length();k++){
                JSONObject jobjsteps = jsonarray_steps.getJSONObject(k);

                    // get end_location jsonobject
                     JSONObject jobjsteps_end_location = jobjsteps.getJSONObject("end_location");
                       double latend = Double.parseDouble(jobjsteps_end_location.getString("lat"));
                       double lngend = Double.parseDouble(jobjsteps_end_location.getString("lng"));
                       endp.add(new GeoPoint((int)(latend *1E6),(int)(lngend * 1E6)));

                     // get start_location jsonobject
                     JSONObject jobjsteps_start_location = jobjsteps.getJSONObject("start_location");
                       double latstart = Double.parseDouble(jobjsteps_start_location.getString("lat"));
                       double lngstart = Double.parseDouble(jobjsteps_start_location.getString("lng"));
                  }

             }

        } 
```

# objective-c - 目标 C：比较字典内容

> ID：14445289
> 
> 赞同：1
> 
> 时间：2013-01-21T18:53:16.880
> 
> 标签：objective-c, nsstring, nsdictionary

我有一本声明的字典，像这样，

```
NSString *responseString = [request responseString];
            responseDict = [responseString JSONValue];
            for (id key in responseDict){
                NSLog(@"%@ : %@", key, [responseDict objectForKey:key]);
            } 
```

结果 ：

```
013-01-22 00:14:02.323 PromoTest[2352:c07] A : 0
2013-01-22 00:14:02.325 PromoTest[2352:c07] B : 1
2013-01-22 00:14:02.325 PromoTest[2352:c07] C : 0 
```

现在，我想比较该值并对其进行一些操作。我假设键的值是 NSString 类型，并将其与我的常量 NSString 进行比较，如下所示，

```
NSString *myString1 = @"0";     
NSString *myString2 = [responseDict objectForKey:@"A"];

NSLog(@"%d", (myString1 == myString2)); //1
NSLog(@"%d", [myString1 isEqualToString:myString2]); //1 
```

结果：

```
2013-01-22 00:19:12.966 PromoTest[2423:c07] 0
2013-01-22 00:19:12.966 PromoTest[2423:c07] 0 
```

我哪里错了？？我的比较有错吗？如何正确比较内容？
数据作为响应数据从 Web 服务接收。我只是将数据转换成字典以便于使用它。Web 服务返回一个 JSON 对象，

```
{"A":0,"B":1,"C":0} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-17T15:24:22.697

`NSDictionary`方法`isEqualToDictionary`可用于比较两个字典

> 返回一个布尔值，指示接收字典的内容是否等于另一个给定字典的内容。

例如：

```
[myDictionary isEqualToDictionary:expectedDictionary] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T18:59:00.747

唯一合理的解释是`[responseDict objectForKey:@"A"]`不返回`NSString`.

您可能会得到`NSNumber`回报，因此比较失败。

如果是这种情况，您需要先从 中获取 a `NSString`，`NSNumber`然后再将其与常量进行比较。你可以这样做

```
NSString * myString2 = [[responseDict objectForKey:@"A"] stringValue]; 
```

也永远不要`==`用来比较`NSString`s 实例。坚持下去`isEqualToString`，你会很好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T19:08:58.303

除了比较字符串，您还可以比较数字对象。这里包括检查，如果返回的对象是 NSNumber，如果不是，请尝试作为字符串：

```
if([responseDict[@"A"] isKindOfClass:[NSNumber class]]){
    NSNumber *myNumber1 = @0;     
    NSNumber *myNumber2 = [responseDict objectForKey:@"A"];
    NSLog("Same number: %@",[myNumber1 isEqualToNumber:myNumber2] ? @"YES" : @"NO");

} else if([responseDict[@"A"] isKindOfClass:[NSString class]]){
    NSString *myString1 = @"0";     
    NSString *myString2 = [responseDict objectForKey:@"A"];
    NSLog("Same string: %@",[myString1 isEqualToString:myString2] ? @"YES" : @"NO");
} 
```

# java - Android nullPointerException 错误

> ID：14445293
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:53:38.917
> 
> 标签：java, android, eclipse, nullpointerexception, onkeydown

Eclipse 在我的代码中没有发现任何错误，但是当我尝试在模拟器上运行该应用程序时，它会打开然后立即崩溃。Logcat 给了我一个模糊的 nullPointerException 错误。我可以注释掉 onKeyDown 方法，然后它运行得很好。但是当然，我不能使用返回键返回，它只会关闭应用程序。

我的代码如下：

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class MainActivity extends Activity {
static String[] items = {"Campaign", "Multiplayer", "Zombies"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView listView = (ListView) findViewById(R.id.listview);
        final ViewFlipper viewflipper = (ViewFlipper)   findViewById(R.id.viewflipper1);
        listView.setAdapter(new BaseAdapter(){
            public int getCount() {
            return items.length;
            }
            public Object getItem(int position) {
            return items[position];
            }
            public long getItemId(int position) {
            return position;
            }
            public View getView(int position, View convertView, ViewGroup parent) {
                LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
                View view = inflater.inflate(R.layout.list_row, null);
                TextView textView = (TextView) view.findViewById(R.id.TextView01);
                textView.setText(items[position]);
                textView.setTextColor(Color.rgb(255,106,0));
                textView.setTextSize(24);
                TextView textView1 = (TextView) findViewById(R.id.textView1);
                textView1.setTextColor(Color.rgb(255,106,0));
            return view;
            }});

            listView.setOnItemClickListener(new OnItemClickListener(){
              public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                 if (position == 0) {
                     viewflipper.showNext();
                 }if (position == 1) {
                     viewflipper.showNext();
                     viewflipper.showNext();
                 }if (position == 2) {
                     viewflipper.showNext();
                     viewflipper.showNext();
                     viewflipper.showNext();
                 }}   

        });    

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;  
    }

    ViewFlipper viewflipper = (ViewFlipper) findViewById(R.id.viewflipper1);

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
             if(viewflipper.getDisplayedChild() == 0){
                 viewflipper.showPrevious();
              }if(viewflipper.getDisplayedChild() == 1){
                 viewflipper.showPrevious();
                 viewflipper.showPrevious();
              }if(viewflipper.getDisplayedChild() == 2){
                 viewflipper.showPrevious();
                 viewflipper.showPrevious();
                 viewflipper.showPrevious();
              }
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

}; 
```

我的Logcat如下：

```
01-21 11:38:46.151: E/AndroidRuntime(760): FATAL EXCEPTION: main

01-21 11:38:46.151: E/AndroidRuntime(760): java.lang.RuntimeException: Unable to instantiate activity 
ComponentInfo{com.example.blackopsiiexperience/com.example.blackopsiiexperience.MainActivity}: java.lang.NullPointerException

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread.access$600(ActivityThread.java:141)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.os.Handler.dispatchMessage(Handler.java:99)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.os.Looper.loop(Looper.java:137)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread.main(ActivityThread.java:5039)

01-21 11:38:46.151: E/AndroidRuntime(760):  at java.lang.reflect.Method.invokeNative(Native Method)

01-21 11:38:46.151: E/AndroidRuntime(760):  at java.lang.reflect.Method.invoke(Method.java:511)

01-21 11:38:46.151: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

01-21 11:38:46.151: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)

01-21 11:38:46.151: E/AndroidRuntime(760):  at dalvik.system.NativeStart.main(Native Method)

01-21 11:38:46.151: E/AndroidRuntime(760): Caused by: java.lang.NullPointerException

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.Activity.findViewById(Activity.java:1839)

01-21 11:38:46.151: E/AndroidRuntime(760):  at com.example.blackopsiiexperience.MainActivity.<init>(MainActivity.java:73)

01-21 11:38:46.151: E/AndroidRuntime(760):  at java.lang.Class.newInstanceImpl(Native Method)

01-21 11:38:46.151: E/AndroidRuntime(760):  at java.lang.Class.newInstance(Class.java:1319)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)

01-21 11:38:46.151: E/AndroidRuntime(760):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)

01-21 11:38:46.151: E/AndroidRuntime(760):  ... 11 more

Any suggestions? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:55:17.213

移动

```
ViewFlipper viewflipper = (ViewFlipper) findViewById(R.id.viewflipper1); 
```

为 Activity 设置布局后，在 Activity 的 onCreate 内

**编辑 ：**

将 Viewflipper 声明为类级别字段以通过类而不是方法级别访问它：

```
public class MainActivity extends Activity {
static String[] items = {"Campaign", "Multiplayer", "Zombies"};
 ListView listView;
 ViewFlipper viewflipper;  //<<<< declare here
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listView = (ListView) findViewById(R.id.listview);
        viewflipper = (ViewFlipper)   findViewById(R.id.viewflipper1);
        //your code here..... 
```

# c# - 在 Linq 查询中使用 if else 语句

> ID：14445295
> 
> 赞同：0
> 
> 时间：2013-01-21T18:53:42.990
> 
> 标签：c#, linq, linq-to-xml

我正在使用以下 linq 查询来处理 XML 文件。

```
XElement rootElement = XElement.Load(@"test.xml"); 
int StyCode; 
var lv1s = from lv1 in rootElement.Descendants("Class") 
where lv1.Attribute("Code").Value.Equals("002") 
select new 
{ 
Children = from ltd in lv1.Descendants("Subject") 
where ltd.Attribute("Course").Value.Equals("Math") 
select new 
{ 

****//In This below section need result on condition based... ****
if(StyCode=0)  
{
Children1 = ltd.Attribute("AllTeachers").Value.Equals("Y") ? true : false
}
else
{
Children2 = ltd.Attribute("SpeciaGuest").Value.Equals("Y") ? true : ltd.Elements("Topic").Attributes("Code").Where(x => x.Value.Equals("1")).FirstOrDefault() != null ? true : false 
}
} 
}; 
```

下面是我的 XML 结构..

```
<?xml version="1.0" encoding="utf-8" ?>
<Document>
  <Class Code="001">
    <Subject Course="Math" AllTeachers='N' SpeciaGuest='N'></Subject>
    <Subject Course="Engish" AllTeachers='Y' SpeciaGuest='Y'></Subject>
    <Subject Course="History" AllTeachers='Y' SpeciaGuest='Y'></Subject>
  </Class>
  <Class Code="002">
    <Subject Course="Math" AllTeachers='Y' SpeciaGuest='N'>
      <Topic Code="1">LAW1</Topic>
      <Topic Code="2">
        LAW2
      </Topic>
      <Topic Code="3">
        LAW3</Topic>
      </Subject>
    <Subject Course="Engish" AllTeachers='Y' SpeciaGuest='Y'></Subject>
    <Subject Course="History" AllTeachers='Y' SpeciaGuest='Y'></Subject>
  </Class>
</Document> 
```

请告诉我，我如何使用条件来选择多选结果。也让我知道在这个 linq 查询中使用 resharper 会很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:00:59.640

您不能创建具有不同属性的匿名对象。那么序列类型是什么？您可以为同一属性分配不同的值（通过三元运算符`?:`）

```
XDocument xdoc = XDocument.Load(@"test.xml");

var lv1s = from c in xdoc.Descendants("Class")
           where (string)c.Attribute("Code") == "002"
           select new {
               Children = (StyCode == 0) ? 
                          ((string)c.Attribute("AllTeachers") == "Y") :
                          ((string)c.Attribute("SpeciaGuest") == "Y") ||
                            c.Elements("Topic")                                 .
                             .Any(t => (string)t.Attribute("Code") == "1"))
           }; 
```

顺便说一句，您返回的是具有布尔`Children`属性的对象列表。我相信你需要更多的结果数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:09:13.017

```
bool flag = boolexpression ? true : false; 
```

是相同的

```
bool flag = boolexpression; 
```

因此，请停止使用三元来不必要地使您的代码复杂化。

* * *

您可以将您的选择子句编写为：

```
select new 
{ 
  Children1 = (StyCode==0) ? ltd.Attribute("AllTeachers").Value.Equals("Y") : false,
  Children2 = (StyCode==0) ? false :
     ltd.Attribute("SpeciaGuest").Value.Equals("Y")
     || ltd.Elements("Topic").Attributes("Code").Where(x => x.Value.Equals("1")).FirstOrDefault() != null
} 
```

* * *

有人可能会说重复这种情况是不好的形式。如果你在那个营地，我建议你改用这个：

```
select (StyCode == 0) ? objectContructor1(ltd) : objectConstructor2(ltd) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:09:37.567

您需要使用条件运算符：

```
Children1 = StyCode == 0 ? 
    ltd.Attribute("AllTeachers").Value == "Y"
:
   (ltd.Attribute("SpeciaGuest").Value == "Y"
 || ltd.Elements("Topic").Attributes("Code").Select(a => a.Value).Contains("1")
    ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T19:13:23.387

因为`if(StyCode=0)`不是基于序列中的当前项，所以可以拉出`if`查询外：

另请注意，由于两个`Select`子句都选择单个项目，因此您不需要匿名类型，只需选择该项目。结果是：

```
XElement rootElement = XElement.Load(@"test.xml");
int StyCode = 0;
IEnumerable<IEnumerable<bool>> lv1s;
if (StyCode == 0)
{
    lv1s = from lv1 in rootElement.Descendants("Class")
            where lv1.Attribute("Code").Value.Equals("002")
            select (from ltd in lv1.Descendants("Subject")
                    where ltd.Attribute("Course").Value.Equals("Math")
                    select ltd.Attribute("AllTeachers").Value.Equals("Y") ? true : false);
}
else
{
    lv1s = from lv1 in rootElement.Descendants("Class")
            where lv1.Attribute("Code").Value.Equals("002")
            select (from ltd in lv1.Descendants("Subject")
                    where ltd.Attribute("Course").Value.Equals("Math")
                    select ltd.Attribute("SpeciaGuest").Value.Equals("Y") ? true : ltd.Elements("Topic").Attributes("Code").Where(x => x.Value.Equals("1")).FirstOrDefault() != null ? true : false);
} 
```

所以这很简单，很好，但是有很多代码重复，这不是很好。另一种方法是创建一个方法，该方法接受一个`XElement`表示`ltd`整数的方法，`StyCode`并返回一个指示适当值的布尔值。这是一个足够简单的方法来编写：

```
private static bool GetChildFromSubject(int styCode, XElement subject)
{
    if (styCode == 0)
        return subject.Attribute("AllTeachers").Value.Equals("Y");
    else
    {
        return subject.Attribute("SpeciaGuest").Value.Equals("Y") ||
                subject.Elements("Topic").Attributes("Code")
                .Any(x => x.Value.Equals("1"));
    }
} 
```

现在我们只需要一个查询：

```
XElement rootElement = XElement.Load(@"test.xml");
int StyCode = 0;
var lv1s = from lv1 in rootElement.Descendants("Class")
            where lv1.Attribute("Code").Value.Equals("002")
            select (from ltd in lv1.Descendants("Subject")
                    where ltd.Attribute("Course").Value.Equals("Math")
                    select GetChildFromSubject(StyCode, ltd)); 
```

好多了。

# c# - 在 Asp.net 中使用中继器将项目组添加到列表控件

> ID：14445305
> 
> 赞同：0
> 
> 时间：2013-01-21T18:54:57.017
> 
> 标签：c#, asp.net, list, listbox, grouping

所以我有一个通过中继器运行的列表控件。他们想添加标题或分隔列表中组的行，但我需要创建组。他们希望通过 SURVEY_TYPE 将组分开。有谁知道我如何添加带有控件和中继器的组？

```
<table>
    <asp:Repeater id="dlSurveyList" runat="server"  OnItemCommand="dlSurveyList_ItemCommand" OnItemDataBound="dlSurveyList_ItemDataBound">
        <HeaderTemplate>
            <TR id="SurveyListHeader" class="header">
                <td></td>
                <TD nowrap valign=bottom>
                    <asp:Label id="lblNameHdg" runat="server" Text="Courses"></asp:Label></TD>
                <TD nowrap align=center>
                    <asp:Label id="lblSurveyTypeHdg" runat="server" Text="Type"></asp:Label></TD>
                <TD nowrap align=center>
                    <asp:Label id="lblScoreHdg" runat="server" Text="Score (%)"></asp:Label></TD>
                <TD  nowrap align=center>
                    <asp:Label id="lblDateCompletedHdg" runat="server" Text="Date Passed"></asp:Label></TD>
            </TR>
        </HeaderTemplate>
        <ItemTemplate>              
                <td></td>
                <TD id="SurveyListField_Name" nowrap>
                    <asp:Label id="lblName" runat="server" Text='<%# Convert.ToString(DataBinder.Eval(Container.DataItem,"SURVEY_NAME")) %>'/></TD>
                <TD id="SurveyListField_Type" align=center>
                    <asp:Label id="lblSurveyType" runat="server" Text='<%# Convert.ToString(DataBinder.Eval(Container.DataItem,"SURVEY_TYPE"))%>'/></TD>
                <TD id="SurveyListField_Score" align=center>
                    <asp:Label id="lblScore" runat="server" Text='<%# Convert.ToString(DataBinder.Eval(Container.DataItem,"SCORE"))%>'/></TD>
                <TD id="SurveyListField_Date" align=center>
                    <asp:Label id="lblDateCompleted" runat="server" Text='<%# Convert.ToString(DataBinder.Eval(Container.DataItem,"DATE_COMPLETED"))%>'/></TD> 
            </TR>
        </ItemTemplate> 
```

代码背后

```
 private string replaceFields(string msg)
        {
            msg = msg.Replace("[FIRST_NAME]", PortalSession.Current.LoggedInTravelAgent.FirstName);
            msg = msg.Replace("[LAST_NAME]", PortalSession.Current.LoggedInTravelAgent.LastName);
            msg = msg.Replace("[EMAIL_ADDRESS]", PortalSession.Current.LoggedInTravelAgent.EmailAddress.ToString());
            msg = msg.Replace("[SURVEY_NAME]", oSurvey.SurveyName);
            msg = msg.Replace("[SURVEY_TYPE]", oSurvey.SurveyType);
            msg = msg.Replace("[PASS_SCORE]", oSurvey.PassScore.ToString());
}

protected void dlSurveyList_ItemCommand(object source, System.Web.UI.WebControls.RepeaterCommandEventArgs e)
{
    if (e.CommandName == "select" )
    {
        redirectDetail(int.Parse(e.CommandArgument.ToString()));
    }
}

private void redirectDetail(int surveyId)
        {

            Survey oSurvey = Survey.GetById(surveyId);
            if (oSurvey == null)
                throw new ArgumentException("SurveyList", "Requested Survey Not Found. Survey Id:" + surveyId.ToString());

            Hashtable queueProfile = new Hashtable();
            queueProfile.Add(TravelUniversityUserControl.SURVEY_HASHKEY_ID, profileSurveyId);

            if (oSurvey.SurveyType == Survey.SurveyTypes.TravelUniversity.ToString() && surveyId != profileSurveyId)
            {

                if (PortalSession.Current.LoggedInTravelAgent.GetItuPassDate().IsNull())
                    TravelUniversitySession.Current.SurveyQueue.Enqueue(queueProfile);
            }

            Hashtable queueExam = new Hashtable();
            queueExam.Add(TravelUniversityUserControl.SURVEY_HASHKEY_ID, surveyId);

            if (this.Page.Request["score"] != null)
                queueExam.Add(TravelUniversityUserControl.SURVEY_HASHKEY_SCORE, this.Page.Request["score"]);

            TravelUniversitySession.Current.SurveyQueue.Enqueue(queueExam);

            if (!PortalSession.Current.LoggedInTravelAgent.GetItuPassDate().IsNull() || oSurvey.SurveyType == Survey.SurveyTypes.SpecialistCertification.ToString())
                TravelUniversitySession.Current.SurveyQueue.Enqueue(queueProfile);

            // redirect to detauil entry
            Response.Redirect(SurveyDetailEntryUrl);
        } 
```

# c++ - 如何在 WHM/cPanel 上为 cgi-bin 上传和编译 cpp？

> ID：14445308
> 
> 赞同：2
> 
> 时间：2013-01-21T18:55:19.013
> 
> 标签：c++, compilation, sftp, whm, cgi-bin

我是 C++ 的新手。我在 cgi-bin 中创建 AJAX 文件以获得与 PHP 相比的最大速度。

我的主人没有帮助，我找不到这方面的文档，搜索什么也没有返回（可能是因为我在这个主题上的词汇量有限）。

我想将 cpp 文件上传到我的 WHM/cPanel VPS 以编译 cgi-bin。我不知道将这些用于编译的目录或确切的执行方式。

如何将 cpp 文件上传到 WHM/cPanel VPS、编译它们并将它们移动到 cgi-bin？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:30:47.267

您应该将已*编译*的二进制文件（您的 C++ 代码必须实现 CGI 接口）放在您的 Web 服务器视为活动的文件夹（即 CGI）中。如果有一个使用 CGI 接口运行 PHP 文件的文件夹，那么将 C++ 二进制文件放在同一个文件夹中应该可以工作（除非服务器设置了特殊的过滤器以出于安全目的阻止运行的二进制文件）。

是的。这不是一个很常见的问题。虽然当我这样做时，它非常简单（我只是将二进制文件放入并关闭它）。

# iphone - 将数据写入plist for tablelview

> ID：14445309
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:55:25.930
> 
> 标签：iphone, objective-c, cocoa-touch

我得到了以下plist：

![在此处输入图像描述](../Images/aa029865bfdd9b3363fe17f02918c396.png)

这个 plist 存储了一个数组，该数组将加载到 UITableview 中，如您在右侧所见。

我使用以下代码检索此内容：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"array" ofType:@"plist"];
vakken = [[NSDictionary alloc] initWithContentsOfFile:path];

naamvakken = [vakken objectForKey:@"Vakken"];

self.array = [naamvakken mutableCopy]; 
```

现在我将这个 UIAlertview 与这个 Textfield 内置功能一起使用，让用户创建一个新行：

[http://f.cl.ly/items/030Z373X2p1c3m0O0u2K/Schermafbeelding%202013-01-21%20om%2019.48.06.png](http://f.cl.ly/items/030Z373X2p1c3m0O0u2K/Schermafbeelding%202013-01-21%20om%2019.48.06.png) 使用此代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"array" ofType:@"plist"];

NSString *list = [[alertView textFieldAtIndex:0]text];

naamvakken = [vakken objectForKey:@"Vakken"];

[array addObject:list];

[array writeToFile:path atomically:YES];

[self.tableView reloadData]; 
```

但是出于某种原因，上面的代码将文本存储在 TableView 中，而不是 plist 中。我的代码有问题吗？`[array writeToFile:path atomically:YES];`应该做的伎俩？

另一个问题是如果用户在 tableviewcell 上向右滑动，如何从 plist 中删除字符串。

我的.h

```
@interface ViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> {

    IBOutlet UIView *root;

}

@property (nonatomic, retain) NSMutableArray *array;

@property (nonatomic, retain) NSDictionary *vakken;
@property (nonatomic, retain) NSMutableArray *naamvakken;

@property (strong, nonatomic) NSIndexPath *indexPathToBeDeleted;

@end 
```

对于： H2CO3：

```
-(NSString *)docsDir {

    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];

} 
```

并在 viewdidload 中：

```
listPath = [[self docsDir]stringByAppendingPathComponent:@"array.plist"]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:02:22.807

StackOverflow 上每天都会出现一个关于同样问题的问题。问题在这里：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"array" ofType:@"plist"]; 
```

您不能写入应用程序包（出于非常明显的安全原因）。如果要更新 plist，请将其写入可写路径，例如 Documents 目录。

# java - 在 Java 中，如果我的程序在没有 -ea 的情况下运行，我怎么会失败？

> ID：14445312
> 
> 赞同：4
> 
> 时间：2013-01-21T18:55:29.403
> 
> 标签：java, assertions

有没有办法检查程序是否启动，`-ea`如果不是，我可以退出/失败？如果断言失败，我想知道它。因此，我认为没有这个就启动是一个严重的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:57:00.400

做出保证失败的断言。

如果该断言之后的代码运行，则未启用断言。

```
boolean asserted = false;

try {
   assert false;
} catch (AssertionError e) {
   asserted = true;
}

if (!asserted) {
    System.err.println("Missing '-ea' flag; exiting.");
    System.exit(1);
    // ... or throw a RuntimeException, depending on your environment.
} 
```

* * *

也就是说，我不是 100% 相信强制断言是一个好主意。IMO 断言更多地用于开发而不是正常的错误检查/处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:58:24.557

```
public static void main(String[] args) {

    boolean ok = true;
    try {
        assert false;
        ok = false;
    } catch (AssertionError ex) {
    }
    if (!ok) {
        System.err.println("FATAL: assertions are not enabled.\n");
        System.exit(1);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:52:58.917

当你真的想要一个带有副作用的断言时，这是一种罕见的情况，这通常是一个很大的禁忌。

```
public class MustAssert {
    public static void main(String[] args) {
        boolean exit = true;
        assert (exit = false) == false;
        if (exit) {
            System.out.println("You forgot to turn assertions on with -ea.");
            System.exit(0);
        }
        process(args);
    }

    public static void process(String[] args) {
        // The rest of your program, whatever it may be, goes here.
        for (String s : args) System.out.println(s);
    }
} 
```

布尔标志最初为真，表示我们应该退出。该断言，如果它被评估，它是一个重言式。变量设置为 false，该子表达式的值为 false，然后将其与 false 进行比较，并且由于`false == false`计算结果为 true，因此断言通过并且`AssertionError`抛出 no。该标志设置为 false 作为评估断言的副作用。

如果关闭断言，则永远不会评估表达式，并且标志保留其初始值 true。然后，我们发出警告，断言已关闭。

我认为使用带有副作用的断言，虽然通常不赞成，但在尝试检测断言是否打开时比抛出和捕获 AssertionError 更好、更清晰。

# user-interface - 抽象的 GUI 设计模型

> ID：14445313
> 
> 赞同：1
> 
> 时间：2013-01-21T18:55:33.110
> 
> 标签：user-interface, graphics, coding-style

我正在开发一个前端 GUI，人们用它来与我们制造和销售的设备进行通信。我们的设备（黑匣子）通过以太网与我们的 GUI 对话：报告状态、为用户提供控制以在黑匣子内配置参数、查询诊断数据等。

GUI 需要在我们的黑匣子开发中用于工程调试目的，在生产中用于根据客户要求测试设备，并由客户用于与黑匣子进行高级接口。挑战在于工程诊断 GUI 元素使在生产中使用 GUI 的人们感到困惑，而客户想要一个对工程或生产没有太大帮助的非常流线型、简单的 GUI。

我不想设计三个独立的 GUI，因为这些程序在较低级别之间有太多重叠，此外，还会造成软件配置控制的噩梦。是否有为多个应用程序或多个最终用户设计 GUI 的模型或策略？有什么建议或最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:29:35.693

以用户为中心的设计有几种解决此类问题的策略。完整的选项是使用角色来确定调试人员、测试人员和用户的需求有多相似，以及您真正拥有多少用户组。人物角色基于对用户的研究。您可以通过收听支持电话或观察您的工程师的工作来收集信息。也许您有三个具有明显不同目标、背景、技术知识和需求的用户组，但也许您只有两个不同的组，测试人员和调试人员会满足于相同的 UI，但最终用户会觉得它太技术性和太混乱了。

了解您对内部用户如何工作的了解后，您或许可以证明使用 UI 设计模式“Extras On Demand”是合理的。该策略是在默认情况下呈现一个流线型且简单的 UI，该 UI 相对基本，只需单击一下即可获得全部功能。想想简单搜索和高级搜索之间的区别。默认情况下通常显示简单搜索，只需单击一下即可进行高级搜索。

确定哪些任务是适合最终用户的自助服务任务，并设计一个界面，以便轻松完成这些自助服务任务。使用最终用户在支持电话中使用的术语。对他们的输入施加约束，因此他们只能输入有效值。通过加载默认值让他们远离麻烦。

您可能会发现您的专家用户觉得单击“显示更多”链接很烦人，或者您可能会发现他们并不介意，因为他们使用简单的 UI 来完成快速任务，并且并不总是完整地使用 -每个任务的特色用户界面。

# java - Java sql填充表并在最后得到'.0'

> ID：14445314
> 
> 赞同：0
> 
> 时间：2013-01-21T18:55:36.830
> 
> 标签：java, sql

我使用此代码用数据库中的数据填充我的 jtable：

```
 String sql = "SELECT "
            + "a.pranesimo_pav AS 'Pavadinimas', a.sukurimo_data AS 'Sukurtas' , b.gavimo_data AS 'Gavimo data'"
            + "FROM Pranesimas a "
            + "INNER JOIN " 
            + "( "
            + "SELECT pranesimo_id, gavimo_data "
            + "FROM Pranesimo_siuntimas_vienam_zmogui "
            + "WHERE vardas_pavarde = '" +vardas_pavarde+ "' "
            + "UNION ALL "
            + "SELECT pranesimo_id, gavimo_data "
            + "FROM Pranesimo_siuntimas_grupei "
            + "WHERE grupes_pav = '" +grupes_pav+ "'" 
            + ")b ON a.pranesimo_id = b.pranesimo_id ";
 pst = conn.prepareStatement(sql);
 rs = pst.executeQuery(sql);
 antraspanelesamipranesimaiTable.setModel(DbUtils.resultSetToTableModel(rs));
} 
```

它完成了这项工作，但在我的“日期时间”值的末尾，它在它的末尾添加了“.0”，例如：

数据库中的值 - '2013-01-20 02:50:00' 我在表中得到的值 - '2013-01-20 02:50:00.0'

我怎样才能解决这个问题？

# eclipse-plugin - OpenJML 更新站点的问题

> ID：14445315
> 
> 赞同：0
> 
> 时间：2013-01-21T18:55:37.220
> 
> 标签：eclipse-plugin, jml

当我尝试从[http://jmlspecs.sourceforge.net/openjml-updatesite](http://jmlspecs.sourceforge.net/openjml-updatesite)的更新站点安装 openJML 插件时，出现以下错误：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Artifact not found: ... (with about 4 or 5 jars) 
```

我尝试安装以前版本的插件，但都导致类似的“找不到工件”错误。任何人都知道为什么这不起作用？或者有一个我可以用来让 Eclipse 插件工作的解决方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:52:39.427

已经打开了一个错误报告，但似乎没有人关心（还）：http: [//sourceforge.net/p/jmlspecs/bugs/397/](http://sourceforge.net/p/jmlspecs/bugs/397/)

似乎你必须编译你自己的版本。

# ios - 第一次单击分组 UITableView 中的 UITableViewCell 时不出现键盘

> ID：14445322
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:07.227
> 
> 标签：ios, uitableview, uitextfield

我正在 iOS6 中开发一个应用程序，我正在使用 XCode 4.5.2。

我有一个**UITableView**样式是`grouped`. 每个单元格都有一个**UITextField**，其大小与**UITableViewCell**大小完全相同。要创建**UITextField**，我正在使用这段代码。

```
 UITextField *txtField = [[UITextField alloc]initWithFrame:CGRectMake(20, 10, 320, 44)];
  txtField.autocorrectionType = UITextAutocorrectionTypeNo ;
  txtField.opaque = 1.0;
  txtField.contentMode = UIViewContentModeCenter;
  if(indexPath.row == 0)
      txtField.placeholder = @"Name";
  else if(indexPath.row == 1)
      txtField.placeholder = @"Email";
   if(indexPath.section == 2)
       txtField.placeholder = @"Write here...";
   [cell addSubview:txtField ]; 
```

我正在将此**UITextField**添加为`cell`子视图。问题是有时，当我点击单元格时，键盘应该会出现。但是，这是我单击任何单元格时的屏幕截图。![单击单元格时的屏幕截图](../Images/792761ca6113615a0fb58d591ae3b85e.png)

这意味着当我将**UITextField**添加到 a`cell`时，它没有效果。**因为，这是UITableView**的正常行为。奇怪的问题是，当我再点击一次时，键盘出现了，它正在正常工作。但是，每个单元格上仍然有蓝色，我无法将其破坏。这是第二个屏幕截图。 ![第二次截图](../Images/008d74a9679e55a9af0b17914c708632.png)

而且，它并不总是发生，所以我无法检测出导致这种意外行为的原因。

你们知道我该如何解决这个问题以及导致它的原因吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:09:59.957

我认为您只需将 tableView.allowsSelection 设置为 FALSE。

# android - 如何定义主题以正确全局更改文本颜色？

> ID：14445324
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:26.377
> 
> 标签：android, styles, textview, themes

我正在尝试在我的应用程序中全局更改文本颜色，因此按照[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)的说明，我在 xml 文件中定义了两个主题并将其设置在清单中文件。但结果是：一些文本改变而专业没有改变，我尝试了很多东西，做了很多研究，但我没有成功找到方法来做到这一点。我观察到更改颜色的文本通常位于布局第一级的 TextView 中。我不确定，但我认为第二级，因此，列表视图中的那些并没有改变。谁能给我一个线索？提前致谢。

我的主题文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Dark" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:textColor">@color/green</item>
    </style>
    <style name="Light" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:textColor">@color/yellow</item>
    </style>
</resources> 
```

清单文件条目：

```
<application
    android:name=".TestApplication"
    android:icon="@drawable/test"
    android:label="@string/app_name"
    android:theme="@style/Dark"> 
```

# java - 重新加载弹簧属性

> ID：14445329
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:30.317
> 
> 标签：java, xml, spring, properties, javabeans

这是一个大学项目：我正在使用 Spring PropertyPlaceholderConfigurer 从属性文件中获取值。我正在通过以下代码从 GUI 更新属性文件：

```
Properties prop = new Properties();
FileOutputStream out = null;
out = new FileOutputStream("pro.properties");
prop.setProperty("durationpro", "wk");
prop.store(out, null);
out.flush();
out.close(); 
```

我尝试使用两种方法来使更新的文件正常工作： [http](http://www.wuenschenswert.net/wunschdenken/archives/127) ://www.wuenschenswert.net/wunschdenken/archives/127 我尝试在文件更新后直接刷新上下文应用程序

```
ApplicationContext f = new FileSystemXmlApplicationContext("Bean1.xml");
((ConfigurableApplicationContext)f).refresh(); 
```

我的代码

```
ApplicationContext context = new ClassPathXmlApplicationContext("Bean1.xml");
BeanFactory factory = (BeanFactory) context;
TestGUI t = (TestGUI) factory.getBean("testbean"); 
```

在应用程序运行时（我不必关闭应用程序），我必须手动打开和关闭属性文件，然后才能识别更改。这两种方法都会发生

我用于弹簧刷新方法的 xml 文件是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

<bean id="propertyPlaceholderConfigurer"   
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">  
  <property name="locations">  
    <list>  
      <value>classpath:pro.properties</value>  
    </list>  
  </property>  
</bean>   

<bean id="com" class="Domestic" /> 

<bean id="wk" class="Week" />

<bean id="mth" class="Month" />

<bean id="testbean" class="TestGUI"> 

  <property name="customerType" ref="com" /> 
  <property name="duration" ref="${durationpro}"/> 

</bean>

</beans> 
```

我完全为其他 Wunschdenken 方法复制了 xml 文件

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:39:27.817

没关系 - 我在源文件夹中有属性文件，将其移出并实现 [http://commons.apache.org/configuration/](http://commons.apache.org/configuration/)并且一切正常

# android - 保存在资产文件夹中的数据库的本地化？

> ID：14445330
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:31.547
> 
> 标签：android, localization, android-emulator, android-sqlite

我有一个问题。我使用 sqlite 数据库浏览器开发了我的数据库。我将它保存在资产文件夹中，我正在访问该数据库。一切都很好，但问题是我想要本地化。我希望这些数据来自马拉地语的 db， gujrati，英语基于模拟器/手机的语言环境设置...

任何解决方案请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:00:06.770

将语言环境添加到表的主键。

# javascript - Python / IE7 - 如何绕过警告框

> ID：14445332
> 
> 赞同：3
> 
> 时间：2013-01-21T18:56:40.050
> 
> 标签：javascript, python, automation, internet-explorer-7

我有用 Python 为 IE7 编写的自动化脚本。它完美地工作，除了触发警报框的情况。警告框在正文的 onload 中触发，这意味着它在我的脚本到达它之前被执行。

我有以下作为我的等待功能，它会一直挂起，直到单击警报框：

```
def _waitReady(self):
    """ Waits until IE finishes loading. """
    while self.oIE.Busy: time.sleep(0.1)
    while self.oIE.Document.readyState != "complete": time.sleep(0.1) 
```

我想简单地禁用所有警报框，但似乎 IE 无法这样做。或者，我希望检测到警报框正在打开，然后简单地执行一个操作作为响应（例如简单地点击它）。关于如何实现这一点有什么建议吗？

编辑：我知道我可以循环浏览 IE 的子窗口，并且我知道如果我能找到它我可以关闭警报框。

```
win32gui.EnumChildWindows(hwnd, function, None) # cycles through child windows
win32api.PostMessage(hwnd, win32con.WM_CLOSE, 0, 0) # closes window 
```

现在我只需要某种方式将窗口识别为警报框。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:39:17.990

解决了我的问题。最后我只是简单地遍历系统中的每个窗口，检查类名，如果它是一个警报类，则关闭窗口（#32770）。

我试图采取更有针对性的方法，但我似乎无法在 IE 应用程序下找到警报窗口。

```
def _waitReady(self):
while self.oIE.Busy:
    time.sleep(0.1)
    waitCount += 0.1

    if waitCount > 5:
        print("killing alert boxes")
        _killAllAlertBoxes()
       waitCount = 0

def _killAllAlertBoxes():
# iterates through all active windows
win32gui.EnumChildWindows(0, _closeWindow, None)

def _closeWindow(hwnd, lparam):
# if window is an alert box (class = '#32770')
if win32gui.GetClassName(hwnd) == '#32770':
    print("Closing Alert Box")
    win32api.PostMessage(hwnd, win32con.WM_CLOSE, 0, 0) # closes window 
```

感谢回复的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:26:35.750

此代码适用于 Firefox 中的警报窗口，但您可能需要为 IE 修改它。

```
 import time

   time.sleep(2)
   driver.switch_to_alert().accept(); time.sleep(2); time.sleep(2); time.sleep(2);time.sleep(2)
   driver.switch_to_window(browser.window_handles[1]) 
```

# java - trie 实现中的空间差异

> ID：14445333
> 
> 赞同：2
> 
> 时间：2013-01-21T18:56:41.133
> 
> 标签：java, string, algorithm, data-structures, trie

由于某种原因，我对尝试的了解越多，我就越感到困惑。
现在让我感到困惑的是：
我已经阅读了大约 2 种类型的实现。

1.  使用数组来表示字符（不存储字符本身），并且在每个节点中还存储实际单词的索引（如果我们找到一个单词）。
2.  使用一个`Collection`存储字符的节点，并在每个节点的末尾使用一个布尔值来确定我们是否在这条路径上找到了一个单词

在第一种情况下，它没有被提及，但似乎我们实际上必须保留所有字典单词（因为我们间接引用它们）。所以我们有`array_size*numberOfNodes*lengthOfword + size of dictionary processed`

在后一种情况下，我们不需要字典，因为字符直接存储在树中。所以在我看来，第二种实现更节省空间。但我不确定多少。
我对实现的理解是否正确，是否有特定的理由来选择另一种？另外，我们如何计算第二种情况的空间需求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:10:03.847

尝试不会将原始单词存储在任何地方，而是隐式存储它们。trie 的基本结构如下： trie 中的每个节点存储

*   确定到达节点的路径是否形成一个单词的单个位，以及
*   指向由字符标记的子节点的指针集合。

要确定一个单词是否在 trie 中，请从根开始，然后按照适当标记的指针一次一个。如果您到达标记为单词的节点，则该单词存在于 trie 中。如果你到达一个没有标记的节点或者你从树上掉下来，这个词就不存在了。

您上面列出的两个结构之间的区别在于子指针的存储方式。在第一个版本中，子指针存储为字母表中每个符号一个指针的数组，这使得跟随子指针非常快，但空间效率极低。在第二个版本中，您显式存储某种类型的集合，其中仅包含您需要的标记指针。这速度较慢，但​​对于稀疏尝试而言更节省空间。

trie 的空间使用取决于节点的数量（称为 n）、字母表的大小（称为 k）以及子指针的表示方式。如果存储一个固定大小的指针数组，那么空间使用量约为 kn 个指针（n 个节点，每个节点有 k 个指针），加上每个节点处的标记的 n 位。例如，如果您有一个按排序顺序存储的动态指针数组，则开销将是 n 个子指针总数，加上 n 位，再加上存储单个集合所需空间量的 n 倍。

第一种方法的优点是速度和简单，在密集尝试上具有非常好的性能。对于稀疏尝试，第二个速度较慢但内存效率更高。

这些不是唯一可能的空间优化。Patricia 尝试将只有一个子节点的节点压缩在一起，并且非常节省空间。DAWG 尝试将尽可能多的节点合并在一起，但不支持高效插入。

希望这可以帮助！

# ios - 卷积 UIImage 与 GPUImage 框架

> ID：14445335
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:43.537
> 
> 标签：ios, image-processing, convolution, gpuimage

我正在尝试使用 GPUImage 框架的 GPUImage3x3ConvolutionFilter 但无法正常工作。

这是我的代码，我只得到一个白色的图像。

```
- (UIImage *)convolution:(UIImage *)inputImage{

    GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];

    GPUImage3x3ConvolutionFilter *filter = [[GPUImage3x3ConvolutionFilter alloc] init];
    [filter setConvolutionKernel:(GPUMatrix3x3){
        {-1.0f,  0.0f, 1.0f},
        {-2.0f,  0.0f, 2.0f},
        {-1.0f,  0.0f, 1.0f}
    }];

    [stillImageSource addTarget:filter];
    [stillImageSource processImage];

    return stillImageSource.imageFromCurrentlyProcessedOutput;

} 
```

我也在尝试改变：

```
return stillImageSource.imageFromCurrentlyProcessedOutput; 
```

为了：

```
return filter.imageFromCurrentlyProcessedOutput; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T21:16:50.003

这是由于框架中的错误造成的。卷积也被应用于图像的 alpha 通道，在这种情况下导致 0 alpha 通道值`[filter imageFromCurrentlyProcessedOutput]`。我刚刚提交了代码来解决这个问题。

请注意，`[stillImageSource imageFromCurrentlyProcessedOutput]`它什么也不做，因为您无法直接从相机输入中获取未处理的图像。另外，我不会在这里使用点符号，因为`-imageFromCurrentlyProcessedOutput`它不是 GPUImageOutput 的属性。

# html - webapp在iPad中将带有表单内容的网页保存为pdf

> ID：14445336
> 
> 赞同：0
> 
> 时间：2013-01-21T18:56:47.980
> 
> 标签：html, ios, ipad, pdf, touch

我有一个带有一些框的表格，可以在 ipad 中使用手写和签名，它是 [http://asbec.mx/form](http://asbec.mx/form)

我想要一个按钮保存为 pdf，另一个按钮通过 airprint 打印。

它适用于网络应用程序。

如您所见，我已经尝试了一个按钮来保存为 pdf，问题是它创建了一个空白表单。

谢谢你的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:01:48.153

这似乎是应该在服务器端处理的事情。您可以尝试 Zend PDF 框架（扩展的 PHP 库）之类的东西。

[http://framework.zend.com/manual/1.12/en/zend.pdf.html](http://framework.zend.com/manual/1.12/en/zend.pdf.html)

# java - 正则表达式匹配词

> ID：14445341
> 
> 赞同：1
> 
> 时间：2013-01-21T18:57:00.750
> 
> 标签：java, regex, words

如何使用 Java 正则表达式匹配被禁止的单词，例如，如果我想禁止单词 stackoverflow，它将匹配 stackoverflow、stackoverflow 和 stackoverflow。

这样做的目的是阻止人们在聊天中说禁止的话。正则表达式也必须工作，以便它们可以是任何一方的任何东西。例如“转到 stackoverflow，它是一个很好的网站”会检测到 stackoverflow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:06:13.383

你可以做的是去掉[这里](https://stackoverflow.com/questions/1805518/replacing-all-non-alphanumeric-characters-with-empty-strings)所有的非字母数字字符，然后匹配你的禁用词。但这并不能完全消除向听众传达脏话的机会。例如人们可以使用人类认知系统无论如何都能理解的leet，例如“Long”这个词可以写成“| *0ng”，为了保持简洁，我不会使用真实的例子。例如“亚历山大”可以是“/\ |* 3 >< /\ |\| c| 3 r”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:09:27.537

尽管您要求的是基于正则表达式的特定答案，但正则表达式并不总是可以扩展到所需的内容：尤其是在处理不稳定的人工输入时。

有一些字符串相似性算法，当与 Fairmutex 的答案这样的简单初步阶段结合使用时，可以提供更全面的禁止过滤器。

一种流行的算法是[Levenshtein Distance](http://www.catalysoft.com/articles/StrikeAMatch.html)。虽然它很快，但它很大程度上基于单词的顺序，因此在“溢出堆栈”的输入中搜索“堆栈溢出”会给你一个否定的结果。

对于我以前的项目，我使用[了这种](http://www.catalysoft.com/articles/StrikeAMatch.html)巧妙的算法，它考虑了后一种困境。虽然它有点重，但它比正则表达式和 Levenshtein Distance 做得更好。

另一个想法是通过我之前链接的 Strike-a-Match 算法运行输入，如果输入低于特定的相似度阈值（例如，50%+ 匹配），则运行特定的通用 leet 过滤器。这将在替换常用的 leet speak 的基础上起作用。例如“|\|” 无论间距如何，都会被“n”替换。

# cuda - 创建 cuda 上下文管理器失败

> ID：14445343
> 
> 赞同：1
> 
> 时间：2013-01-21T18:57:15.493
> 
> 标签：cuda, gpu, physx, cuda-context

我正在使用 PhysiX 实现流体模拟器。不幸的是，cuda 上下文管理器有问题，我无法识别它是什么。我有一个如下所示的 init 方法：

```
void InitializePhysX() {
    bool recordMemoryAllocations = true;
    const bool useCustomTrackingAllocator = true;

    PxAllocatorCallback* allocator = &gDefaultAllocatorCallback;
    PxErrorCallback* error = &gDefaultErrorCallback;
    PxFoundation* mFoundation = PxCreateFoundation(PX_PHYSICS_VERSION, *allocator, *error);
    if(!mFoundation)
            printf("PxCreateFoundation failed!\n");
    PxProfileZoneManager* mProfileZoneManager = &PxProfileZoneManager::createProfileZoneManager(mFoundation);
    if(!mProfileZoneManager)
            printf("PxProfileZoneManager::createProfileZoneManager failed!\n");
#ifdef PX_WINDOWS
    pxtask::CudaContextManagerDesc cudaContextManagerDesc;
    pxtask::CudaContextManager* mCudaContextManager = pxtask::createCudaContextManager(*mFoundation, cudaContextManagerDesc, mProfileZoneManager);
    if( mCudaContextManager ){
            if( !mCudaContextManager->contextIsValid() ){
                    mCudaContextManager->release();
                    mCudaContextManager = NULL;
                    printf("invalid context\n");
            }
    } else {
            printf("create cuda context manager failed\n");
    }
#endif
    mPhysX = PxCreatePhysics(PX_PHYSICS_VERSION, *mFoundation, PxTolerancesScale(), recordMemoryAllocations, mProfileZoneManager);
    if(!mPhysX)
            printf("PxCreatePhysics failed!\n");
    ...
} 
```

当我尝试运行我的应用程序时，*mCudaContextManger*从未正确创建。“创建 cuda 上下文管理器失败”正在控制台上写入，并且：

“....\LowLevel\software\src\PxsContext.cpp (1122) : 警告：GPU 操作失败。没有可用的 px::CudaContextManager. ....\SimulationController\src\particles\ScParticleSystemSim.cpp (73)：警告：GPU 粒子系统创建失败。回退到 CPU 实现。”

我有带有最新驱动程序的 GeForce560Ti（我朋友笔记本电脑上的 GeForce460 上也出现错误）。Physix 设置为在 NVidia 控制面板中使用 GPU。

有人知道我们做错了什么以及如何让 GPU 工作吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:12:37.873

文件 PhysX3Gpu_x86.dll 丢失。我添加了它，现在一切都很好。

# jquery - jquery 如何获取 div 的 css 属性

> ID：14445345
> 
> 赞同：0
> 
> 时间：2013-01-21T18:57:16.940
> 
> 标签：jquery, css, styles

这是问题所在，我需要获取 div 的 css 属性。该 css 位于`<style></<style>`.

发生的情况是返回了一些 css 属性，而没有返回一些。

以下是代码，这是我修改的示例。

如果您运行该示例；您会看到边框宽度、边框颜色和边框样式不返回值。我究竟做错了什么？

```
<!DOCTYPE html>
<html>
<head>
<style>
div { height: 50px; margin: 5px; padding: 5px; float: left}
#box1 { width: 50px; color: yellow; background-color: blue;  border-width:2px; border-color:#0C6; border-style:solid}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<p id="result">&nbsp;</p>
<div id="box1">1</div>
<script>
$("div").click(function () {
var html = ["The clicked div has the following styles:"];
var styleProps = $(this).css( ["border-width","border-color","border-style","width", "height", "color", "background-color"] );
$.each( styleProps, function( prop, value ) {
html.push( prop + ": " + value );
});
$( "#result" ).html( html.join( "<br>" ) );
});
</script>
</body>
</html> 
```

感谢您的任何想法或建议。我应该提一下，这段代码适用于 Chrome。我用 FF18 测试过，前三个 css 值没有返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:24:21.337

我发现我的代码有问题。显然在 FF 18 中，您必须指定完整的 css 值，而不是快捷方式。

这是我的解决方案，我指定了完整的 css 属性，如下所示。

```
border-bottom-color:green;
border-bottom-style:solid;
border-bottom-width:2px; 
```

然后我的 jquery 检索值如下：

var styleProps = $(this).css( ["border-bottom-width","border-bottom-color","border-bottom-style","width", "height", "color", "background-颜色”] ）;

这应该适用于所有具有快捷方式的 css 属性。

感谢所有帮助解决这个问题的人。

谢谢

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:00:27.257

### 只需使用`.css()`！

```
$(element).css(); 
```

### 或使用 HTML

```
<html>
    <head>
        <title>Computed Style Example</title>
        <style type="text/css">
            div.special {
                background-color: red;
            }
        </style>
        <script type="text/javascript">
            function getBackgroundColor() {
                var oDiv = document.getElementById("div1");
                alert(document.defaultView.getComputedStyle(oDiv, null).backgroundColor);
            }
        </script>

    </head>
    <body>
        <div id="div1" class="special"></div>
        <input type="button" value="Get Background Color" onclick="getBackgroundColor()" />

    </body>
</html> 
```

# java - Eclipse 避免 jmockit 的换行

> ID：14445349
> 
> 赞同：4
> 
> 时间：2013-01-21T18:57:27.380
> 
> 标签：java, eclipse, code-formatting, jmockit

在 Eclipse 中，是否可以在不关闭代码格式化程序的情况下避免换行以获得更好的 jmockit 可读性？

通缉：

```
@Test
public void testRegisterNodeModelFactory() {
  new Expectations() {{
    RepositoryManager.getInstance(); times = CALLED;
  }};

  invoke(_measureModuleInstall, "registerNodeModeFactory");
} 
```

目前：

```
@Test
public void testRegisterNodeModelFactory() {
  new Expectations() {{
    RepositoryManager.getInstance();
    times = CALLED;
  }};

  invoke(_measureModuleInstall, "registerNodeModeFactory");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T09:44:55.423

禁用部分代码的代码格式化程序：

```
// @formatter:off
RepositoryManager.getInstance(); times = CALLED;
// @formatter:on 
```

# database - 同步数据库

> ID：14445351
> 
> 赞同：0
> 
> 时间：2013-01-21T18:57:38.130
> 
> 标签：database, synchronization

我正在开发一个Web应用程序，我需要在本地服务器本身中维护网站，并在计算机本身中使用数据库，本地数据库将定期更改。有一个中央数据库，我必须通过它访问所有数据剩余的 DB 的 .

问题是即使禁用互联网连接，本地服务器也会更新本地数据库，但是当它重新连接互联网时，它必须使用本地修改的数据更新中央数据库。

所有数据库中的表（我的意思是数据库模式、表名、属性全部）都是相同的。如果添加任何新数据，则应附加数据，如果删除则应删除数据，如果有则应修改数据。

我使用 MySQL 服务器作为数据库，Apache Tomcat 作为服务器，并使用 JSP、Servlet 作为业务逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:45:19.887

请访问[http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html)

Mysql 复制可能会完成这项工作，但您必须考虑一些事项，例如：

*   必须同步的数据量
*   主服务器和从服务器上使用的操作系统
*   由于互联网连接问题 - 为什么禁用互联网连接？一个选项可能是计划作业（crontab）

# php - 贝宝 IPN php 脚本 - mysql 不工作？

> ID：14445354
> 
> 赞同：0
> 
> 时间：2013-01-21T18:57:48.157
> 
> 标签：php, mysql, error-handling, paypal, paypal-ipn

我从 paypal 中获取了标准的 IPN.php 示例，在 php 脚本中添加了错误处理和 mysqlconnection/mysqlquery。我相信它们可能是变量进入 ipn 脚本然后存储在 mysql db 中的问题。Mysql 数据库连接工作正常。我真的认为它的代码带有mysql查询，但我不知道如何更改它。任何帮助都是极好的！

通过 ipn_errors.log 出错

```
[21-Jan-2013 13:45:57 UTC] PHP Notice:  Undefined variable: item_number in /var/www/ipn.php on line 78
[21-Jan-2013 13:45:57 UTC] PHP Notice:  Undefined variable: payment_status in /var/www/ipn.php on line 78
[21-Jan-2013 13:45:57 UTC] PHP Notice:  Undefined variable: payment_amount in /var/www/ipn.php on line 78
[21-Jan-2013 13:45:57 UTC] PHP Notice:  Undefined variable: payer_email in /var/www/ipn.php on line 78 
```

ipn.php- 正在创建这些错误。

```
// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
mysql_connect("localhost", "#####", "#####") or die(mysql_error());  
mysql_select_db("#####") or die(mysql_error()); 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
$keyval = explode ('=', $keyval);
if (count($keyval) == 2)
 $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
    $value = urlencode(stripslashes($value)); 
} else {
    $value = urlencode($value);
}
$req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
// error_log("Got " . curl_error($ch) . " when processing IPN data");
curl_close($ch);
exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
// check whether the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment

// assign posted variables to local variables
$payer_email = $_POST['payer_email'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
} else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation
 ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');
}
 mysql_query("INSERT INTO paypalpayments (itemnum, paystatus, payamount, email) VALUES ('', '$item_number', 

'$payment_status', '$payment_amount',  '$payer_email')");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:10:21.543

变量在这一行中设置：

```
$myPost[$keyval[0]] = urldecode($keyval[1]); 
```

...后来在它`$_POST`用来复制变量的脚本中，如下所示：

```
$payer_email = $_POST['payer_email']; 
```

建议：使用`$myPost`代替`$_POST`来定位这些变量。并且不要忘记 INSERT 查询之前的 mysql_real_escape_string() 。

如果`ob_start()`在顶部和`$msg = ob_get_clean()`末尾使用，则可以在调试此异步脚本方面取得一些进展。然后你有一个变量字符串，你可以通过电子邮件发送给自己。这将使您能够使用`var_dump()`等来发出诊断消息。

# backbone.js - 没有调用主干验证功能

> ID：14445358
> 
> 赞同：11
> 
> 时间：2013-01-21T18:58:03.230
> 
> 标签：backbone.js

我的验证函数没有在下面的代码中被调用：-

```
var Vehicle = Backbone.Model.extend({
    color: 'green',
    validate: function (attrs) {
        var validColors = ['white', 'red', 'blue', 'yellow'];
        var colorIsValid = function (attrs) {
            if (!attrs.color) return true;
            return _.contains(validColors, attrs.color);
        }
        if(!colorIsValid(attrs)) {
            return "color must be one of: " +validColors.join(",");
        }
    }
});

var car = new Vehicle();

car.on('error', function (model, error) {
    console.log(error);
});

console.log(car.get('color'));
car.set('color', 'muave'); 
```

请参阅小提琴 [http://jsfiddle.net/vineet85/Fa8jr/5/](http://jsfiddle.net/vineet85/Fa8jr/5/)

有人能告诉我为什么没有调用验证函数吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T19:10:40.710

在 Backbone.js`validate`中自动调用 on`save`但不是 on `set`。

如果您希望在设置值时运行验证，则需要使用该`validate`选项。例如

```
car.set('color', 'muave', {validate: true}); 
```

请参阅[http://backbonejs.org/#Model-validate](http://backbonejs.org/#Model-validate)

`error`尝试保存对象时，通常在服务器上发生错误时触发该事件。请参阅[http://backbonejs.org/#Events-catalog](http://backbonejs.org/#Events-catalog)

如果您想捕获验证失败，请尝试处理该`invalid`事件：

```
car.on('invalid', function (model, error) {
    console.log(error);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T13:16:00.070

似乎需要编写一些额外的代码来运行验证。如下所示：

```
car.set('color', 'muave', {validate:true}); 
```

# iphone - 根据文本内容动态调整字体

> ID：14445367
> 
> 赞同：0
> 
> 时间：2013-01-21T18:58:35.587
> 
> 标签：iphone, objective-c, uilabel, uitextview

假设我有一个帧 320*460 的 UILabel 或 UITextView 如果用户键入任何字母 A ...它应该与大 A 一起进入中间。

并且只要用户继续书写，标签字体就会自动调整。显然应该有一些最小和最大范围让我们说最小为 8 像素。

是的，没有滚动功能。

请提供帮助，以便我可以使用 100% 动态内容启动我的算法，而不管硬编码的帧大小如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:49:23.367

根据您拥有的控件实现 UITextFieldDelegate 和/或 UITextInputDelegate。输入文本后，找到整个文本并测量使用该方法的框架可能使用的最大字体

*   (CGSize)sizeWithFont:(UIFont *)font minFontSize:(CGFloat)minFontSize actualFontSize:(CGFloat *)actualFontSize forWidth:(CGFloat)width lineBreakMode:(NSLineBreakMode)lineBreakMode;

这个方法在 NSString

# javascript - 添加 IpRange 值以动态输入

> ID：14445371
> 
> 赞同：1
> 
> 时间：2013-01-21T18:58:40.123
> 
> 标签：javascript, html

我想添加一个输入字段，用户可以输入/修改格式为 198.162.0.0/45 的 IP 地址，表示范围为 198.162.0.0 - 198.162.0.45

我几乎可以使用，但它不允许完整的正确格式。如果我输入以下任何内容，它就可以正常工作。198/45、198.168 或 198.168.0.45

但是一旦我尝试添加 198.168.0/24 或 198.168.0.0/24

我希望能够添加 198.168.0.0/24 而不必分解字段，但如果必须的话，我可以。

当我的动态元素附加到包含输入字段的 div 标记时，它会出现脚本错误。

基本上我的设置是这样的，空的 div 标签我将附加以下内容。newIpRange 以字符串形式出现，例如 198.168.0.0/24 EDIT 带有产生问题的测试 html

```
<html>
<head>
<title>Test IP</title>

<script type="text/javascript">

function onload(range){

var e = document.getElementById("_main");
e.innerHTML = getTag(range);

}

function getTag(range){
return "<div class='input-append'  ><input  type='text' value='" + range + "' ></input><div>";
}

</script>
</head>
<body onload="onload(198.168.1.0/24);">
<div id="_main" >

</div>
</body>
</html> 
```

什么会导致这个？我真正感兴趣的是为什么它在某些情况下会给出错误，而不是在其他情况下

这是我在附加此行时从脚本中得到的错误： SCRIPT1006: Expected ')'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:35:31.097

在我制作的示例上花了一点时间后，我终于意识到，javascript 是如何解析值的。

在 10.12/24 的情况下，只要我在其中添加额外的句点，它就将它评估为一个带有除法的数字，它不能再将它评估为一个数字，以解决将它放在字符串文字中清理所有内容的问题！

为了解决这个问题，我将 ipcallback 放入一对单引号中，以告诉 javascript 它是一个字符串

```
<script>
</head>
<body onload="onload('198.168.1.0/24');">
<div id="_main" > 
```

# javascript - 加载不同的 .js 库后发生低于 10 的 MSIE 的特征检测重定向

> ID：14445372
> 
> 赞同：1
> 
> 时间：2013-01-21T18:58:45.170
> 
> 标签：javascript, html, internet-explorer, web

在[此页面](http://www.shlomifish.org/fc-solve-temp/js-fc-solve/text/)（临时位置）上，我试图检测浏览器是否支持 Float64Array，如果不支持则重定向[到此页面，这会告诉用户使用不同的浏览器](http://www.shlomifish.org/fc-solve-temp/js-fc-solve/incompatible-browser.html)。但是，重定向似乎不适用于 Windows XP 32 位上的 MSIE 8，因为错误首先发生在 libfreecell-solver.min.js 中，然后才加载。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:10:20.627

IE 浏览器有自己的内置浏览器检测方案，没有其他人采用。我认为，您可以将其用于任何低于 10 的 IE 版本。它看起来像这样：

```
<!--[if gte IE 8]>
<p>You're using a recent version of Internet Explorer.</p>
<![endif]-->

<!--[if lt IE 7]>
<p>Hm. You should upgrade your copy of Internet Explorer.</p>
<![endif]-->

<![if !IE]>
<p>You're not using Internet Explorer.</p>
<![endif]> 
```

您基本上会添加一个`<!--[if lte IE 9]-->`带有`<script>`标签的标签，以`window.location`调用您想要发送垃圾浏览器的任何地方。可能没有你想要的那么优雅，但至少它是可靠的。

取自此页面： http: [//msdn.microsoft.com/en-us/library/ms537509 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx)

**更新：** 查看您的实际脚本，我立即看到解析/语法错误。

```
(function() {
    try {
        var a = new Float64Array(1);
        return; //no need
    } catch(e) {
        window.location.replace("../../js-fc-solve/incompatible-browser.html");
    } // Closing the catch block, but not closing the function block
)(); 
```

添加大括号：

```
(function() {
    try {
        var a = new Float64Array(1);
        return; //no need
    } catch(e) {
        window.location.replace("../../js-fc-solve/incompatible-browser.html");
    } // Closing the catch block
})(); // Close the function block before trying to call the anonymous function 
```

这可能会或可能不会导致用户在尝试包含其他错误的库之前被重定向。此外，它可能会或可能不会检测到运行库所需检测的所有功能。我会说这取决于浏览器（没有讽刺意味）。

如果这不起作用，您可以创建一个中间页面来决定是将用户发送到求解器页面还是显示不兼容的浏览器消息。

# grails - 使用 grails 标准 api 定义 OR 条件

> ID：14445374
> 
> 赞同：7
> 
> 时间：2013-01-21T18:58:53.917
> 
> 标签：grails, grails-orm, hibernate-criteria

我有以下域对象：

```
class User {
    String name
    Transaction transaction

    static constraints = {
        transaction nullable: true
    }
}

class Transaction {        
    boolean successful
    User user        
    static belongsTo = User
} 
```

我想选择所有`users`没有成功交易的人。这意味着我想要没有任何交易的用户 ( `transaction == null`) 和具有成功价值`false`( `transaction.successful == false`) 的交易的用户。我想用 Criteria API 来做到这一点（因为这可以与基于用户输入的其他条件相结合）。

我试过这个：

```
def c = User.createCriteria()
def results = c {
    or {
        isNull 'transaction'
        transaction {
            eq 'successful', false
        }
    }
} 
```

但是，这只给了我有交易的用户（具有成功的价值`false`）。但我没有得到交易所在的用户`null`

以下代码显示了我如何创建一些示例数据：

```
def createUserAndTransaction(String name, Boolean successful = null) {
    User u = new User(name: name)
    if (successful != null) {
        Transaction t = new Transaction(user: u, successful: successful)
        u.setTransaction(t)
    }
    u.save()
}

def init = { servletContext ->
    createUserAndTransaction 'john', true
    createUserAndTransaction 'mike', false
    createUserAndTransaction 'pablo'
} 
```

我的条件查询仅`mike`在这种情况下返回。但我想要`mike`和`pablo`。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T23:21:48.623

所以问题在于它默认为内部连接。您必须为表创建别名并定义其连接类型：

```
createAlias("transaction", "t", CriteriaSpecification.LEFT_JOIN)

or {
    isNull("t")
    eq("t.successful", false)
} 
```

# jquery - 触发点击并按住事件

> ID：14445375
> 
> 赞同：6
> 
> 时间：2013-01-21T18:58:59.967
> 
> 标签：jquery, html, jquery-ui, jquery-ui-draggable

### 问题：

使用 jQuery，如何模拟单击并按住事件？

* * *

我目前正在用头撞墙，似乎不知道该怎么做！

我也试过在谷歌和论坛上搜索，但无济于事。

在我当前的示例中，我使用的是 jQuery UI 的[`.draggable()`](http://jqueryui.com/draggable/).

理想情况下，我想做以下事情：

*   在`div`.
*   模仿单击并按住事件并能够自由移动元素。
*   在下一次单击/鼠标按下时，结束单击并按住事件。

当我尝试以下功能时：

```
$("#drag").draggable().mousedown(function(e){
    e.preventDefault();
    return $(this).mousedown();
}); 
```

然后它会导致无限循环，最终导致浏览器崩溃。但是，我不确定如何启动一个持续`.mousedown()`事件。

这是我目前拥有的演示：http: [//jsfiddle.net/vPruR/16/](http://jsfiddle.net/vPruR/16/)。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:19:27.923

我认为没有一些选项可以模拟单击并按住。此外，它可能会创建过多的浏览器依赖性。

因此，您可以尝试以下方法。

```
var click = false,
top = null,
left = null;

$(document).bind('mousemove', function (e) {
   if (click == true) {
      $('#drag').css({
         left: e.pageX - left,
         top: e.pageY - top
       });
    }
});

$('#drag').draggable().click(function(e) {
    top = e.pageY - $('#drag').position().top; 
    left = e.pageX - $('#drag').position().left;
    click = !click;
    return false;
});

$('html').click(function() {
    click = false;
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/qbcQn/](http://jsfiddle.net/dirtyd77/qbcQn/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-02T04:13:36.110

Wolf 和 Dom 的解决方案效果很好，是我的解决方案的基础，但您提到您使用的是 jquery ui's `draggable`，所以这里有一个可能的解决方案，将 jquery ui 的`draggable`对象与`droppable`. 我试图让可拖放的事件在可拖动的事件拖过它们并放在它们上时触发，因此我利用了继承和覆盖的`ui.mouse`对象的内置/私有函数。`draggable`

```
$(document).ready(function(){
      var click = false

    $(document).bind('mousemove', function (e) {
        if (click == true) {
           $('#drag').data('uiDraggable')._mouseDrag(e);
        }
    });

    $('#drag').draggable().click(function(e) {
        if(!click){
            $(this).data('uiDraggable')._mouseCapture(e, true)
            $(this).data('uiDraggable')._mouseStart(e, true, true);
        }else{
            $(this).data('uiDraggable')._mouseUp(e);
            $(this).data('uiDraggable')._mouseStop(e);
        }
        click = !click;
        return false;
    });

    $('html').click(function() {
        click = false;
    });
}); 
```

这是一个[小提琴](http://jsfiddle.net/toddbluhm/TFb8M/1/)。要查看可放置的内容，只需取消注释 js 中可放置的内容即可。

*注意：此解决方案适用于当前的 jquery ui 版本（1.9.2），但可能会在未来版本中更改，因为它确实使用私人调用。*

# sublimetext2 - Sublime Text 2：查看侧边栏时让窗口变宽

> ID：14445378
> 
> 赞同：1
> 
> 时间：2013-01-21T18:59:05.673
> 
> 标签：sublimetext2

当您在 Sublime Text 2 中查看/调用侧栏时，窗口的宽度保持不变——*侧栏*出现在左侧，*代码*在中间，*小地图*在右侧。这通常会“挤压”代码视图……

当您调用侧栏视图时，有没有办法将*代码*和*小地图*锁定到特定宽度并强制窗口**变宽？**（类似于项目抽屉在 TextMate 中的工作方式。）

谢谢！

# c# - 我可以用 C# 编写 Windows 8 RT 游戏吗

> ID：14445379
> 
> 赞同：7
> 
> 时间：2013-01-21T18:59:06.367
> 
> 标签：c#, xna, windows-runtime, monogame, sharpdx

是否可以使用 C# 编写 Windows 8 RT 和/或 Windows 8 Phone 游戏？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T18:59:06.367

*我已经对“C# 中的游戏”这件事进行了大量研究，所以我想我会把它发布给其他人：*

XNA 是制作 C# 游戏的简单方法。您可以在 Windows Store 上发布新的 XNA 游戏，它会正常运行。

但是，您不能使用 XNA 制作 Windows Phone 8 或 Windows 8 游戏。（您只能针对 Windows Phone 7.1 版。）XNA 不支持这些操作系统的新 API。

但是，Windows Phone 8 和 Windows 8 都将运行 XNA 应用程序。这些应用程序不能针对特定于 Windows 8 或 Windows 8 Phone 的任何功能。

所以总结一下。当前版本的 XNA (4.0) 支持旧 API 与 Windows 和 Windows Phone 通信。它们仍然可以在 Windows 8 上运行，但你不能使用更新的东西。

Microsoft 没有提供用 C# 为新的 Windows 8 和 Windows Phone 8 API 制作游戏的产品。

但是，如果您不介意使用开源项目，您可以使用 C# 编写可以使用更新的 Windows 8 和 Windows Phone 8 API 的游戏：

**独角兽**

如果您想使用 XNA 的 api 为新的 Windows 8 API 制作游戏，您可以使用 MonoGame（这是我使用的）。它是一个实现 XNA API 的开源 api，但具有适用于 IOS、Android 和 Windows 8 的插件。这是一个非常好的跨平台选项。MonoGame（即[无限飞行](http://www.monogame.net/showcase/infinite-flight)、[武装](http://www.monogame.net/showcase/armed)）最近支持 3D 图形。（注意：我与 MonoGame 没有任何关系。）

**夏普 DX (DirectX)**

如果您想要 Microsoft 支持的方式来制作针对 Windows 8 API 的游戏，您最好的选择是 DirectX。但是 Direct X 是一个 C++ API。这也真的很难。

如果您想制作 2D 游戏（例如《植物大战僵尸》或《愤怒的小鸟》），那么 Direct X 就太过分了。你最好走 MonoGame 路线。我花了几天时间研究教程并努力理解 Direct X。在那段时间结束时，我获得了在屏幕上绘制单个三角形的能力。（同样的时间让我的游戏循环和精灵在 MonoGame 中四处移动。）

所以我再说一遍，如果您还不了解 DirectX，并且您正在制作 2D 应用程序，请不要走 DirectX/SharpDX 之路。

不支持 Direct2D 的 Windows Phone 8 进一步阻碍了 DirectX 2D 路线。DirectX 有一个称为 Direct2D 的子集，用于 2D 渲染。但是，Windows Phone 8 不支持此子集。“替代”（目前）是 Direct X 工具包。

如果您仍然在 Direct X 道路上，那么您可以使用 SharpDX 在 C# 中编写它。它是 DirectX 的 C# 包装器，效果很好（虽然我不知道它是否支持 Direct X 工具包）。

* * *

**概括**

简而言之（对我来说）是微软没有更新他们的 C# 游戏开发 API 以支持 Windows 8 和 Windows Phone 8 中的新内容。但 MonoGame 允许您使用 XNA API 来做到这一点。它还允许您编写跨平台游戏，所以无论如何它更好。（您可以“免费”移植到 IOS 和 Android。）

我的游戏在 MonoGame 中进展顺利，到目前为止没有任何问题！

# ios - 苹果二进制文件被拒绝

> ID：14445382
> 
> 赞同：2
> 
> 时间：2013-01-21T18:59:16.927
> 
> 标签：ios, appstore-approval

我最近发布了一个应用程序供 Apple 审核，但我第二次被拒绝并收到此消息：

“二进制被拒绝

```
2.10: iPhone apps must also run on iPad without modification, at iPhone resolution, and at 2X iPhone 3GS resolution 
```

2.10

我们发现您的应用程序不符合 App Store Review Guidelines 的要求在 iPad 上运行的要求。

在 iPad 上查看时，您的应用程序没有以 iPhone 分辨率运行。”

我不明白，我在互联网上发现我必须在我的应用程序摘要中只放“Iphone”，而不是“通用”，但它已经设置在 Iphone 上。我应该怎么办 ？

非常感谢

![在此处输入图像描述](../Images/f99bf70f2de126e43b9066c31b3ca8f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:04:46.507

您首先必须弄清楚为什么该应用程序无法在 iPad 上运行。尝试在模拟器中运行应用程序（适用于 iPad），或者更好地尝试在 iPad 本身上下载它。

检查你的 info.plist 文件，看看里面有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:08:33.033

您的应用程序与 iPad 不兼容

根据 Apple 指南，每个 iPhone 应用程序也必须与 iPad 兼容，以 2x 运行。

在 iPad 模拟器上的 xcode 中运行您的应用程序，甚至在您的 iPad 设备上进行更好的测试。

希望这些信息对你有帮助..

# jquery - 预加载网站

> ID：14445383
> 
> 赞同：-2
> 
> 时间：2013-01-21T18:59:21.600
> 
> 标签：jquery, html, css

我是网络开发的新手。我目前在一个有很多产品图片的网站上工作，因此网站的整个页面不会一次加载，给人留下不好的印象，请指导我如何预加载网站的所有图片。无论方法是使用 jquery 还是任何插件。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:39:44.557

您可以在 jQuery 中使用 .load() 事件

```
var imagecount = 10;

$('img').load(function() {
   // Image load complete
   if(imagecount == 0)
      // Loading of all images are over
      LoadingComplete();
   else {
      imagecount--;
      // Here you can update the progress bar.
   }
}); 
```

要显示进度条，您可以使用[jQuery 进度](http://jqueryui.com/progressbar/#animated)条插件

```
 $( "#progressbar" ).progressbar({
    value: 1
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:47:52.823

`http://www.krio.me/scripttest/imgLoader/`

我使用了上述网站提供的插件。之所以特别是因为：

1) 图像只有在完全下载后才会显示

2) 即使下载速度低至 30kbps，它也能快速预加载图像

3) 你不需要做太多，它的主要目的是帮助 web 开发者和设计者改进他们的用户界面。

# xslt - 空白记录后的节点总和，直到使用 xslt 1.0 的下一个空白记录

> ID：14445385
> 
> 赞同：0
> 
> 时间：2013-01-21T18:59:23.013
> 
> 标签：xslt, xslt-1.0

我正在一个项目中工作，我需要计算从空白时间到下一个空白时间的小时总和，并将它们显示在输出中。

这是输入：

```
 <Nodes>
       <Node>
         <EmpId>1<EmpId>      
         <InTime></InTime>
         <Hours></Hours>
        </Node>
      <Node>
        <EmpId>1<EmpId>          
        <InTime>10/12/2010</InTime>
         <Hours>5</Hours>
      </Node>
      <Node>
        <EmpId>1<EmpId>
         <InTime>10/13/2010</InTime>
         <Hours>5</Hours>
      </Node>
      <Node>
        <EmpId>1<EmpId>
        <InTime></InTime>
         <Hours></Hours>
      </Node>
      <Node>
        <EmpId>1</EmpId>
        <InTime></InTime>
        <Hours></Hours>
      </Node>
      <Node>
         <EmpId>1</EmpId>
         <InTime>10/14/2010</InTime>
          <Hours>2</Hours>
      </Node>
      <Node>
        <EmpId>1</EmpId>
        <InTime>10/14/2010</InTime>
        <Hours>3</Hours>
      </Node>
   </Nodes> 
```

输出应该是这样的：

```
<Nodes>
      <Detail>
         <EmpId>1</EmpId>
          <InTime>10/12/2010</InTime>
           <Hours>10</Hours>
      </Detail>
      <Detail>
        <EmpId>1</EmpId>
        <InTime>10/14/2010</InTime>
         <Hours>5</Hours>
      </Detail>
   </Nodes> 
```

感谢是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:25:29.213

您的输入 XML 格式不正确（`<EmpId>`您应该有几个标签`</EmpId>`），但是一旦修复，我相信这就是您所描述的：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/Nodes">
    <Nodes>
       <xsl:apply-templates select="Node[Hours != '' and not(normalize-space(preceding-sibling::Node[1]/Hours))]" />
    </Nodes>
  </xsl:template>

  <xsl:template match="Node">
    <Detail>
      <xsl:copy-of select="EmpId | InTime"/>
      <Hours>
        <xsl:apply-templates select="." mode="SumHours" />
      </Hours>
    </Detail>
  </xsl:template>

  <xsl:template match="Node[normalize-space(following-sibling::Node[1]/Hours)]" mode="SumHours">
    <xsl:param name="total" select="0" />
    <xsl:apply-templates select="following-sibling::Node[1]" mode="SumHours">
      <xsl:with-param name="total" select="$total + Hours" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="Node" mode="SumHours">
    <xsl:param name="total" select="0" />
    <xsl:value-of select="$total + Hours"/>
  </xsl:template>

</xsl:stylesheet> 
```

# java - 如何从字符串的开头删除括号中的文本

> ID：14445386
> 
> 赞同：3
> 
> 时间：2013-01-21T18:59:31.320
> 
> 标签：java, android, regex, string

我正在从 RSS 提要中读取一些数据以显示在 android 设备上。

字符串开头的括号中可能有也可能没有标识符，例如

```
This is a title of something...

[Brochures] This is a brochure title

[Thought Leadership] This is something else 
```

如果它有一个标识符，我想从字符串中删除它，然后再将其显示在屏幕上。我认为正则表达式是最好的方法，但在理解语法时遇到了一些麻烦。

非常感谢任何建议或解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T19:05:44.013

```
string.replaceAll("\\[.*?\\]",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:09:36.707

我的回答，作为 RegExp 方法的替代方法:)

```
public static String stripTag(String value) {
    if (value == null || !value.startsWith("[")) {
        return value;
    }
    int closeBracket = value.indexOf(']');
    if (closeBracket < 0) {
        // No closing bracket.
        return value;
    }
    return value.substring(closeBracket + 1).trim();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T06:44:43.417

尝试这个：

```
String.replaceAll("[.*]",""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T19:11:37.863

正则表达式是一种方式......但更快的方式是（如果方括号仅在标识符存在时出现在字符串中，并且标识符中没有方括号出现。）

```
String string = "[Thought Leadership] This is something else";
if(string.charAt(0) == '[')
    string = string.substring(string.indexOf("]") + 1).trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T19:05:27.380

为什么

```
replaceAll("[", "").replaceAll("]", "") 
```

还不够好？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T19:06:09.890

尝试这个

```
s=your string
int close=s.lastindexOf(']')
result=s.substring(close+1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T19:06:29.707

像这样的东西应该工作：

```
String s = "[Thought Leadership] This is something else";
String newString = s.replaceFirst( "\\[[^\\]]+\\]", "").trim();
System.out.println( newString); // Prints: This is something else 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-21T19:06:39.837

`myString.replaceFirst("regex", "replacement")`是您需要的方法。

正则表达式将类似于`"^\\[.*\\]"`您的替换字符串 eill 是空字符串`""`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-21T19:06:52.297

您可以尝试以下正则表达式（一旦转义为 Java 可接受的格式）：

```
\[.+\]\s? 
```

# c# - 如何在 C# 中处理接受 IComparable 的通用方法的 double.NaN

> ID：14445391
> 
> 赞同：4
> 
> 时间：2013-01-21T18:59:59.503
> 
> 标签：c#, generics, nan, icomparable

我有一个通用的`GetMinimum`方法。它接受 IComparable 类型的数组（所以它可能是`string[]`or `double[]`）。在`double[]`我如何实现此方法以忽略`double.NaN`值的情况下？（我正在寻找好的做法）

当我通过这个数组

```
double[] inputArray = { double.NaN, double.NegativeInfinity, -2.3, 3 }; 
```

它返回 double.NaN！

```
public T GetMinimum<T>(T[] array) where T : IComparable<T>
{
    T result = array[0];
    foreach (T item in array)
    {
        if (result.CompareTo(item) > 0)
        {
            result = item;
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:07:44.073

由于两者`NaN < x`和都将始终为假，因此根本没有定义要求*可以*包含`NaN > x`的集合的最小值。这就像除以零：没有有效的答案。*`NaN`*

 *因此，合乎逻辑的方法是预先过滤这些值。这不会是通用的，但应该没问题。

```
 var results = inputArray.EliminateNaN().GetMinimum(); 
```

关注点分离：过滤不应该是`GetMinimum()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:04:49.523

你不能从方法内部。原因是您不知道`T`方法内部可以包含什么。也许你可以通过一些小演员，但理想情况下这应该是你的方法：

```
public T GetMinimum<T>(T[] array, params T[] ignorables) where T : IComparable<T>
{
    T result = array[0]; //some issue with the logic here.. what if array is empty
    foreach (T item in array)
    {
        if (ignorables.Contains(item)
            continue;

        if (result.CompareTo(item) > 0)
        {
            result = item;
        }
    }
    return result;
} 
```

现在这样称呼：

```
double[] inputArray = { double.NaN, double.NegativeInfinity, -2.3, 3 };
GetMinimum(inputArray, double.NaN); 
```

如果您确定只有项目被忽略，那么您可以将`T`其作为第二个参数（也许作为可选参数）。

或者以更短的方式，只是：

```
inputArray.Where(x => !x.Equals(double.NaN)).Min(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T19:06:34.413

根据这个问答，这很复杂：[对其中包含 NaN 的 Doubles 数组进行排序](https://stackoverflow.com/questions/5123659/sorting-an-array-of-doubles-with-nan-in-it)

幸运的是，您可以绕过它：

```
if( item is Single || item is Double ) {
    Double fitem = (Double)item;
    if( fitem == Double.NaN ) continue;
} 
```*

# build - Nullsoft Scriptable Install System (NSIS) 安装程序 - 静默模式

> ID：14445395
> 
> 赞同：3
> 
> 时间：2013-01-21T19:00:21.950
> 
> 标签：build, installation, nsis, silent, silent-installer

如何使 Nullsoft Scriptable Install System (NSIS) 安装程序静默？

来自维基百科：

> “Nullsoft Scriptable Install System (NSIS), est un logiciel libre contrôlable par script, qui permet la création d'installateurs pour Windows. Il a été initialement développé par Nullsoft, la société créatrice de Winamp. NSIS est une alternative aux produits commerciaux, comme安装盾牌。
> 
> NSIS 编译器程序 makensis 将类似以下示例的脚本编译成可执行的安装程序。脚本中的每一行都包含一个命令。”

```
# Example script

Name "Example1"
OutFile "example1.exe"
InstallDir "$PROGRAMFILES\Example1"
Page Directory
Page InstFiles
Section
  SetOutPath $INSTDIR
  File ..\makensis.exe
SectionEnd 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T19:00:21.950

**命令行使用**

*一、MakeNSIS使用*

编译 NSIS (.nsi) 脚本以生成安装程序

```
makensis [option | script.nsi | - [...]] 
```

例子

```
makensis.exe myscript.nsi 
```

*2.安装程序使用*

一些选项

*   /S 静默运行安装程序或卸载程序
*   /D 设置默认安装目录 ($INSTDIR)，覆盖 InstallDir 和 InstallerDirRegKey。它必须是命令行中使用的最后一个参数，并且不能包含任何引号，即使路径包含空格也是如此。仅支持绝对路径。

例子

```
installer.exe /S

installer.exe /S /D=C:\Program Files\NSIS 
```

**静默安装程序/卸载程序**

*   要检查安装程序是否静默，请使用`IfSilent`

*   要在静默模式下跳过一些指令（用户交互、创建窗口），请使用跳转指令

例子

```
IfSilent +2 0 
    MessageBox MB_OK|MB_ICONINFORMATION 'This is a "non silent" installer' 
```

在此示例中，如果安装程序处于静默状态，则会显示消息框。`+2`表示如果 IfSilent 为真，则跳过 nex 指令。`0`表示如果 IfSilent 为假，帽子编译器应该转到下一条指令。

*   要将安装程序设置为静默模式（暂时），请使用`SetSilent`in`.onInit`方法。选项适用`silent`于静音模式和`normal`非静音模式。

*   设置安装程序 | 卸载程序静默，您也可以使用

    `SilentInstall silent`

    `SilentUnInstall silent`

*   在静默模式下，安装程序本身的所有屏幕都不会显示。但是，可能会显示消息框和所有其他未标记为 SF_SELECTED 的屏幕。要使安装程序完全静默，请使用指令跳转（通常）或标记 /SD IDOK | IDCANCEL（用于 OK|CANCEL 消息框）。

    `MessageBox MB_OK|MB_ICONINFORMATION "This is not a silent installer" /SD IDOK`

此处，如果静音模式打开，则不会显示消息框，其行为与用户 OK 相同。注意那里的选项顺序

```
MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "Application is running. Please close it first." /SD IDCANCEL  IDOK OK IDCANCEL CANCEL 
```

*   如果应该在静默模式下从用户那里收集一些信息，可以使用 GetOptions 将更多选项传递给函数 .onInit，

像这儿：

```
!include FileFunc.nsh
!insertmacro GetParameters
!insertmacro GetOptions

Function .onInit
  ${GetParameters} $R0
  ClearErrors
  ${GetOptions} $R0 /USERNAME= $0
FunctionEnd 
```

**参考**

[NSIS 静默安装 1](http://nsis.sourceforge.net/Examples/silent.nsi)

[NSIS 静默安装 2](http://nsis.sourceforge.net/Docs/Chapter4.html#4.12)

[NSIS 静默安装 3](http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.36)

# php - PHP更改mysql数据库结果的X轴和Y轴

> ID：14445397
> 
> 赞同：1
> 
> 时间：2013-01-21T19:00:24.970
> 
> 标签：php, mysql

我正在寻找一些帮助，以获得从尽可能少的数据库查询中获得结果以显示我想要的方式的最佳方式。

我想将我的一个查询结果列用作另一个表的新唯一列并合并类似数据。

例如

我运行这个查询..

```
SELECT pd.production_date,pd.production_time,pd.production_net,
      p.part_number, w.worker_name
      FROM production as pd
      INNER JOIN parts as p
      ON pd.product_id = p.part_id
      INNER JOIN locations as l
      ON pd.location_id = l.location_id
      INNER JOIN workers as w
      ON pd.worker_id = w.worker_id
      WHERE pd.production_date BETWEEN '$from' AND '$to'
      AND p.part_number='$part_number'
      ORDER BY pd.production_date 
```

我会得到这样的结果：

```
production_date--production_time--production_net--worker_name
2013-01-10--390--96--MMahe
2013-01-10--400--101--RMaloney
2013-01-11--460--96--JBurris
2013-01-11--210--43--MMahe
2013-01-14--285--48--LTaylor
2013-01-16--60--8--MRocquemore
2013-01-16--460--90--TUsher
2013-01-17--450--85--MRocquemore
2013-01-17--460--84--TUsher
2013-01-18--450--73--MRocquemore
2013-01-18--460--93--TUsher
2013-01-18--240--24--JBurris 
```

然后我想在这样的网页上显示这些结果：

```
Operators|01-10-2013|01-11-2013|01-14-2013|01-16-2013|01-17-2013|01-18-2013

MMahe|96|43|x|x|x|x

RMaloney|101|x|x|x|x|x

JBurris|x|96|x|x|x|24

LTaylor|x|x|48|x|x|x

MRocquemore|x|x|x|8|85|73

TUsher|x|x|x|90|84|93 
```

我的想法是首先我需要将我的日子过滤为唯一值，然后将它们作为列吐出，我已经用这个完成了

```
 $query=mysql_query($sql);
  $days = array();
  $results.='<div><table border="0"><th>Operator</th>';
  while($row=mysql_fetch_array($query)) {
      array_push($days,$row['production_date']);
  }
      $days=array_unique($days);
      $column_count=count($days);
      $n=0;
      //create the columns (days) by looping through unique days
      foreach($days as $value) {
          $results.='<th>'.$value.'</th>';
      }//end foreach 
```

但是现在我看不到在适当的单元格中列出值的方法。您是否有进行此类数据操作的经验，或者可以指出一个很好的例子？

# apache - 无法使用 apache 代理设置加载 socket.io.js

> ID：14445404
> 
> 赞同：2
> 
> 时间：2013-01-21T19:00:43.397
> 
> 标签：apache, node.js, socket.io, reverse-proxy

我觉得这个问题可能是重复的，但是从我检查过的所有类似线程中仍然无法找到答案。

我有虚拟主机设置代理 /node/ 请求到 NodeJS/Socket.IO 服务器。

```
ProxyRequests On
ProxyPass /node http://192.168.2.151:1337/
ProxyPassReverse /node http://192.168.2.151:1337/ 
```

此设置成功地服务于 Apache 的所有内容，期望请求：[http](http://domain.com/node/) : //domain.com/node/ 在 NodeJS 方面一切正常。

我只是无法得到这条线：

```
<script src="/node/socket.io/socket.io.js"></script> 
```

加载 socket.io.js，它总是吐出 NodeJS 服务器要说的内容。

设置：

index.html 由 Apache 提供。[http://domain.com/index.html](http://domain.com/index.html) index.html 是带有脚本标签的简单 HTML，用于加载 socket.io.js（就像我在上面写的那样）。当我请求[http://domain.com/index.html](http://domain.com/index.html)脚本 src 被加载但内容是 NodeJS 服务器响应而不是 socket.io.js。

我在运行 NodeJS 服务器的目录中有“npm install socket.io”。

无论如何，我也尝试使用 NodeJS 提供 index.html - socket.io.js 内容仍然是 NodeJS 响应。

有人遇到过这个问题吗？或者可以将我链接到答案？:)

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T03:10:22.540

查看这个问题以及 serverfault 中的所有答案：[Configuring Apache2 to proxy WebSocket?](https://serverfault.com/questions/290121/configuring-apache2-to-proxy-websocket%5D) .

问题是它`mod_proxy`不支持 WebSockets，只是使它成为一个 HTTP 请求。您可以使用不同的端口并避免代理、切换到 Nginx、尝试 haproxy 或**使用各​​种其他 Apache 模块替代方案。**例如，`mod_proxy_wstunnel`基本上是`mod_proxy`有 WebSockets 支持的。有关所有解决方案的详细信息，请参阅上面的 serverfault 链接。

# three.js - webgl中的3d模型动画

> ID：14445405
> 
> 赞同：0
> 
> 时间：2013-01-21T19:00:46.390
> 
> 标签：three.js, webgl

我是 webgl 的新手，正在尝试为对象设置动画，**不仅仅是旋转/移动**它们，而是复杂的动作。例如，我们如何在人体模型中做出手/腿的动作（就像人在走路一样）？现在我正在使用**Three.js**导入 OBJ 模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T11:45:33.700

我成功使用 Blender 2.64 和 Three.js 导出器在场景中加载动画模型。这是一个很好的教程，它解释了从 Blender 中的动画到导出到 Three.js 的所有内容（尽管它使用旧版本的导出器，所以你制作的东西在他们的测试应用程序中不起作用）。

[http://www.kadrmasconcepts.com/blog/2012/01/24/from-blender-to-threefab-exporting-three-js-morph-animations/](http://www.kadrmasconcepts.com/blog/2012/01/24/from-blender-to-threefab-exporting-three-js-morph-animations/)

# java - PHP 和 Java Unix 时间戳之间的区别

> ID：14445407
> 
> 赞同：0
> 
> 时间：2013-01-21T19:01:09.323
> 
> 标签：java, php, unix-timestamp

我在 Java 中做到了这一点：

```
Calendar lCDateTime = Calendar.getInstance();
date = lCDateTime.getTimeInMillis(); 
```

我在 PHP 中做到了这一点：

```
 $date = date(U); 
```

在 Java 中，它正在工作。在 PHP 中它没有。

在 Java 中我得到：`1358789604926`
在 PHP 中我得到：（`1358790190` 一个较小的数字）

谁能解释这两个结果之间的区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:02:39.683

Java 生成的时间戳以毫秒为单位，而 PHP 生成的时间戳以秒为单位。因此，为了比较两者，您只需将 Java 时间戳的最后三位除以 1000 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:07:06.867

java 结果是自 1970 年 1 月 1 日 unix 纪元开始以来的毫秒数，秒是秒。

# jms - 在 WebSphere MQ 队列中看不到 JMS 消息

> ID：14445409
> 
> 赞同：3
> 
> 时间：2013-01-21T19:01:36.983
> 
> 标签：jms, ibm-mq

我正在尝试将 JMS 代码中的一些消息放入本地队列管理器中定义的本地队列。我`LQ`在 WebSphere MQ 中定义了一个本地队列，并使用 JMS 代码来放置消息。我在这里做得对吗？我没有看到 WebSphere 队列中的消息。

这是代码：

```
try {
    MQQueueConnectionFactory cf = new MQQueueConnectionFactory();
    //set up the Connection Configuration values

    // Set the properties
      cf.setStringProperty(WMQConstants.WMQ_HOST_NAME, "HostName");
      cf.setIntProperty(WMQConstants.WMQ_PORT, 1414);
      cf.setStringProperty(WMQConstants.WMQ_CHANNEL, "SYSTEM.DEF.SVRCONN");
      cf.setIntProperty(WMQConstants.WMQ_CONNECTION_MODE, WMQConstants.WMQ_CM_CLIENT);
      cf.setStringProperty(WMQConstants.WMQ_QUEUE_MANAGER, "TEST.JMS");

    //JNDI is Not used Here
    MQQueueConnection connection = (MQQueueConnection) cf.createQueueConnection();

    MQQueueSession session = (MQQueueSession) connection.createQueueSession(true, Session.CLIENT_ACKNOWLEDGE);
    MQQueue queue = (MQQueue) session.createQueue("queue:///LQ");
    MQQueueSender sender = (MQQueueSender) session.createSender(queue);
    MQQueueReceiver receiver = (MQQueueReceiver) session.createReceiver(queue);

    long uniqueNumber = System.currentTimeMillis() % 1000;

    JMSTextMessage message = (JMSTextMessage) session.createTextMessage("MQJMSTest "+ uniqueNumber);  
    //MQMessage message =  (MQMessage) session.createTextMessage("MQJMSTest "+ uniqueNumber);

    // Start the connection
    connection.start();

    sender.send(message);
    System.out.println("Sent message:\\n" + message);

    //JMSMessage receivedMessage = (JMSMessage) receiver.receive(10000);
    // System.out.println("\\nReceived message:\\n" + receivedMessage);

    sender.close();
    receiver.close();
    session.close();
    connection.stop();
    connection.close();

    System.out.println("\\nSUCCESS\\n");

} catch (JMSException e) {
    // TODO Auto-generated catch block
    //e.printStackTrace();
    System.out.println(e);
    System.out.println("\\nFAILURE\\n");
}
  catch (Exception e){
      System.out.println(e);
      System.out.println("\\nFAILURE\\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:26:19.583

据此，您已经创建了一个事务处理会话：

```
 connection.createQueueSession(true, Session.CLIENT_ACKNOWLEDGE); 
```

根据[文档](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm41210_.htm)，

> 当应用程序关闭事务会话时，会发生隐式回滚。当应用程序关闭一个连接时，该连接的所有事务会话都会发生隐式回滚。

回滚将删除队列上的任何消息，然后它们在 PUT 应用程序之外变得可见。所以我想你可能想提交交易，是吗？

```
 sender.send(message);

    // ADD THIS HERE ===========================
    session.commit();
    // ADD THIS HERE ===========================

    System.out.println("Sent message:\\n" + message);

    // THE COMMIT MUST HAVE OCCURRED BEFORE YOU CAN GET THE MESSAGE
    // BACK OUT OF THE QUEUE IN THE NEXT LINES

    //JMSMessage receivedMessage = (JMSMessage) receiver.receive(10000);
    // System.out.println("\\nReceived message:\\n" + receivedMessage);

    // ===================================================
    // DON'T FORGET TO COMMIT THE MESSAGE ON THE WAY BACK OUT OR IT WILL
    // JUST GE TPUT BACK ON THE QUEUE AGAIN.
    // session.commit();
    // ===================================================

    sender.close();
    receiver.close();
    session.close(); 
```

PS: Please see the section on [JMS Exception handling](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm35210_.htm). The JMS Exception is a multi-tiered structure in which it is expected that vendor-specific diagnostics are placed in the lower-level elements. Only by printing those lower-level elements is it possible to know what the transport layer thinks is wrong.

# c# - 如何使用 c# 从数据库中获取单列数据（一列）以及如何将其添加到列表中

> ID：14445412
> 
> 赞同：0
> 
> 时间：2013-01-21T19:01:48.027
> 
> 标签：c#, asp.net, sql-server-2008

我在 SQL Server 2008 中使用 c#。我正在创建一个项目，我想在其中从数据库中读取多个日期。这些日期一一存储在单个列中。并且检索到的数据应该被添加到一个列表中。

我的代码是这样的：

```
public List<DateTime> getholidays()
{
    DataTable table = new DataTable("holidays");

    SqlCommand command = new SqlCommand();
    command.Connection = conn;
    command.CommandType = System.Data.CommandType.Text;
    command.CommandText = "select holiday from holidays";

    //conn.Open();
    SqlDataAdapter adapter = new SqlDataAdapter(command);
    adapter.Fill(table);

    List<DateTime> list=new List<DateTime>();

    foreach (DataRow row in table.Rows)
    {
        DateTime dt = new DateTime();
        dt = Convert.ToDateTime(row["holiday"]);
        list.Add(dt);
    }

    conn.Close();
    return list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:24:27.557

为了关闭和传播良好实践，您不需要在填充 DataTable 之前清除它，因为它是一个新对象。事实上，如果您使用 DataReader，您甚至根本不需要 DataTable。以下是我将如何实现您的代码：

```
List<DateTime> dates = new List<DateTime>();

using(SqlCommand cmd = new SqlCommand("SELECT holiday FROM holidays1", conn))
using(SqlDataReader rdr = cmd.ExecuteReader()) {

    while( rdr.Read() ) {

        dates.Add( rdr.GetDateTime(0) );
    }
}

return dates; 
```

更短、更简单、更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:48:20.943

我为我的问题找到了解决方案。谢谢大家。这是我的新代码

```
DataTable dt = new DataTable();
        List<DateTime> list = new List<DateTime>();

        SqlCommand cmd = new SqlCommand("select holiday from holidays1", conn);
        SqlDataAdapter da;
        da = new SqlDataAdapter(cmd);
        dt.Clear();
        da.Fill(dt);
        for (int i = 0; i < dt.Rows.Count - 1; i++)
        {
            list.Add(Convert.ToDateTime(dt.Rows[i][0]));
        }
        return list; 
```

# php - 奇怪的查询行为

> ID：14445414
> 
> 赞同：1
> 
> 时间：2013-01-21T19:01:53.550
> 
> 标签：php, mysql

我有下表：

```
+-------------+------------------+------+-----+-------------------+----------------+
| Field       | Type             | Null | Key | Default           | Extra          |
+-------------+------------------+------+-----+-------------------+----------------+
| category_id | int(11) unsigned | NO   | PRI | NULL              | auto_increment |
| title       | varchar(64)      | NO   |     | NULL              |                |
| description | text             | NO   |     | NULL              |                |
| created_on  | timestamp        | NO   |     | CURRENT_TIMESTAMP |                |
| updated_on  | timestamp        | YES  |     | NULL              |                |
+-------------+------------------+------+-----+-------------------+----------------+ 
```

我需要根据创建日期删除一些记录并执行一组查询：

```
mysql> select created_on from categories limit 10;
+---------------------+
| created_on          |
+---------------------+
| 2013-01-14 09:26:21 |
| 2012-08-15 11:18:38 |
| 2012-09-06 06:44:46 |
| 2012-09-06 23:27:14 | 
```

然后

```
mysql> select date('2013-01-14 09:26:21');
+-----------------------------+
| date('2013-01-14 09:26:21') |
+-----------------------------+
| 2013-01-14                  |
+-----------------------------+ 
```

最后我得到了：

```
mysql> select DATE('created_on') from categories limit 10;
+--------------------+
| DATE('created_on') |
+--------------------+
| NULL               |
| NULL               |
| NULL               |
| NULL               | 
```

如您所见，日期未正确转换。在大约 10 分钟内工作正常：

```
mysql> select date(created_on) from categories limit 10;
+------------------+
| date(created_on) |
+------------------+
| 2013-01-14       |
| 2012-08-15       |
| 2012-09-06       |
| 2012-09-06       | 
```

我确信在运行查询时数据是完整的。

所以我的问题：
谁能解释为什么日期函数在相同的输入上显示不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:04:02.940

你必须使用::

```
select DATE(created_on) from categories limit 10; 
```

通过使用引号，您要求数据库将`'created_on'`其视为参数，并且由于它无法转换为日期类型，因此您将获得 null

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T19:05:06.090

```
select DATE('created_on') from categories limit 10; 
```

字符串与列：

```
select DATE(created_on) from categories limit 10; 
```

# .net - 在没有事件存储的服务总线上重放事件

> ID：14445416
> 
> 赞同：3
> 
> 时间：2013-01-21T19:01:57.720
> 
> 标签：.net, cqrs, servicebus, event-sourcing

我正在尝试设计一项新服务并尝试遵循 CQRS。我将 ORM (NHibernate) 用于读写模型。除此之外，写入模型不是事件来源的。我的目标是首先让技术保持熟悉，然后在读取端迁移到 NoSQL，在写入端迁移到事件源。

我希望使用服务总线，我可以通过重放旧事件来生成新的读取模型；但是我现在卡住了。我有几个问题：

1.  我想要完成的事情有什么意义吗？如果是这样，我可以使用*“Windows Server 服务总线”来执行此操作吗？*我找不到一种方法来创建一个新的订阅并让**光标**从一个主题的开头开始。当所有现有订阅者都使用它们时，是否会清除事件？

2.  如果有意义但*“Windows Server*的服务总线”不能胜任这项工作，您是否建议寻找替代服务总线或在写入端实现事件源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:46:04.610

您不一定需要服务总线或事件源来重放事件。您可以简单地将事件序列化到磁盘（或任何其他存储方式）并根据需要重新加载它们。

看看[**Beingtheworst**](http://beingtheworst.com)的简单示例实现。这些示例可以在[GitHub 上找到](https://github.com/beingtheworst/btw-samples)。特别是**E002**和**E003**使用没有服务总线或事件源的明确概念的序列化事件。

# android - 'sqrtl' 未在此范围内声明

> ID：14445417
> 
> 赞同：0
> 
> 时间：2013-01-21T19:02:10.893
> 
> 标签：android, android-ndk

我正在尝试使用 ndk-build 编译 C++ 代码，但出现下一个错误：

*   'sqrtl' 未在此范围内声明

我在源代码中包含 cmath 并将 application.mk 配置如下：

```
 APP_CPPFLAGS := -frtti -fexceptions
    APP_STL      := gnustl_static
    APP_ABI      := armeabi-v7a
    APP_PLATFORM := android-10 
```

搜索 ndk 源，我发现 sqrtl 是在 cmath 中定义的，以及其他 xxxl 函数（cosl、sinl 等）。

我不知道是否缺少定义或类似的东西。

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:50:02.930

所以你可以在 math.h 中找到函数，但是根据

[https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/0jVfs3wCeGs](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/0jVfs3wCeGs)

android 不支持 long double 所以不确定你是否会使用标准标题获得任何成功......你可以使用普通的 double 版本吗？

# ios - 嵌入式 UIWebView YouTube 卷

> ID：14445418
> 
> 赞同：1
> 
> 时间：2013-01-21T19:02:17.373
> 
> 标签：ios, cocoa-touch, uiwebview

我正在开发一个可以在 UIWebView 中显示 YouTube 视频的 iOS 应用程序。一切都很好，除了...

第一次播放视频时，它会以约 10% 的音量播放。设备音量设置为 100%，播放器音量在 UI 中显示为 100%。退出网络视图并使用我们的本地流媒体播放器在应用程序中播放歌曲，然后返回以正确音量播放的视频。

没用的东西...

* * *

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[MPMusicPlayerController applicationMusicPlayer] setVolume:1.0];
} 
```

* * *

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[MPMusicPlayerController iPodMusicPlayer] setVolume:1.0];
} 
```

这两个调用都只是在屏幕上闪烁改变了音量的 UI，并且对 WebView 音量不做任何事情。

如果您有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:35:57.657

经过更多研究后，我只需要从内置音频播放器中设置播放类型。

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
BOOL ok;
NSError *setCategoryError = nil;
ok = [audioSession setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError]; 
```

类似的东西。

# ruby-on-rails - pdfkit 命令失败：“/usr/bin/wkhtmltopdf” “--page-size” “Letter” “.... “--quiet” “-” “-”

> ID：14445419
> 
> 赞同：8
> 
> 时间：2013-01-21T19:02:20.570
> 
> 标签：ruby-on-rails, ruby, wkhtmltopdf, pdfkit

当我生成 pdf 时，我正在使用 pdfkit 生成 pdf，它给了我以下错误。

```
command failed: "/usr/bin/wkhtmltopdf" "--page-size" "Letter" 
"--margin-top" "0.75in" "--margin-right" "0.75in" "--margin-bottom" 
"0.75in" "--margin-left" "0.75in" "--encoding" "UTF-8" "--print-media-type" 
"--quiet" "-" "-" 
```

有什么帮助吗？

*   阿泰克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:11:24.093

大家好，我在谷歌上搜索并在博客上找到答案。谢谢大家。

```
Solution is here.
(1)# first, installing dependencies
 $sudo aptitude install openssl build-essential xorg libssl-dev

(2)# for 64bits OS Run one by one following commands.

$sudo wget http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-amd64.tar.bz2
$sudo tar xvjf wkhtmltopdf-0.9.9-static-amd64.tar.bz2
$sudo mv wkhtmltopdf-amd64 /usr/local/bin/wkhtmltopdf 
$sudo chmod +x /usr/local/bin/wkhtmltopdf 
```

最后转到您的 rails app/config/initializer 文件夹并创建新文件 pdfkit.rb 并将以下代码粘贴到其中。

```
PDFKit.configure do |config|
   config.wkhtmltopdf = '/usr/local/bin/wkhtmltopdf' if Rails.env.production?
end 
```

就是这样。现在您的 pdf 文件将被下载。还请访问以获取更多信息 [http://www.stormconsultancy.co.uk/blog/development/generating-pdfs-in-rails-with-pdfkit-and-deploying-to-a-server/](http://www.stormconsultancy.co.uk/blog/development/generating-pdfs-in-rails-with-pdfkit-and-deploying-to-a-server/)

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:26:08.343

伙计们，如果您想获得您在网页中的 PDF 视图，请将以下代码复制到您的 config/initializer/pdfkit.rb 中（在初始化程序文件夹中创建此文件）

```
PDFKit.configure do |config| 
config.wkhtmltopdf ='/usr/local/bin/wkhtmltopdf'
config.default_options = {
   :encoding=>"UTF-8",
   :page_size=>"Ledger",
   :zoom => '1.3',
   :disable_smart_shrinking=>false
}
end 
```

请检查此链接以获取更多“：page_size”属性

```
http://stackoverflow.com/questions/6394905/wkhtmltopdf-what-paper-sizes-are-valid 
```

并通过访问此链接发现新选项

```
http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html 
```

希望这一切都会对你有所帮助。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T22:50:14.153

`bit`根据您的操作系统，确保您拥有正确的二进制版本。当我在 64 位 ubuntu 上使用 32 位二进制文​​件时，我遇到了错误的版本问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T12:48:46.060

你需要升级到 wkhtmltopdf ( 0.12.2.1 为我醒来)

[http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)

[ubuntu 14.04 用户在安装https://askubuntu.com/a/625225/106182](https://askubuntu.com/a/625225/106182)时可能会遇到依赖问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-07T18:08:04.883

如果您通过 rails 控制器调用，请确保将 layout 设置为 false。

# indexing - 在 Cassandra 上创建自定义索引时为什么要使用第三列族？

> ID：14445420
> 
> 赞同：0
> 
> 时间：2013-01-21T19:02:21.433
> 
> 标签：indexing, cassandra

正如我常说的，对不起我的英语。我正在为 Cassandra 中的某些列族创建一些手动索引。我已经阅读了有关此的所有内容，但我发现了一些我无法正确理解的内容。

在本演示文稿[中，在 Cassandra 中编制索引，第 36 至 45 页](http://www.slideshare.net/edanuff/indexing-in-cassandra)，由 Ed Anuff 完成，我看到了他为用户列族创建索引的简单示例。他使用 2 个明显的 CF 和另一个来处理并发。这第三个 CF 是“我的问题”。如果我没记错的话，Cassandra 将始终存储每列的最新值。如果这个值被索引了，我必须在索引 CF 中更新它（删除旧索引并创建新索引），但为什么需要第三个 CF？当我考虑到这一点和并发性时，我的理解是：好的，很多人更新了一个被索引的值。这将意味着更新索引的大量工作，但最后一个值将在用户 CF 和索引 CF 中，这就是为什么每列都有一个时间戳，那么并发有什么问题呢？更，

我知道我对 Cassandra 事务非常无知，但我不明白第三个 CF 背后的原因。Ed Anuff 解释说，使用第三列族，您可以将索引恢复到[此处](http://www.anuff.com/2010/07/secondary-indexes-in-cassandra.html)的一致状态，但是，为什么它们会陷入不一致状态？而且，如果发生这种情况，用户 CF 可能足以恢复索引，还是我错了？

拜托，有人可以解释一下吗？什么是/是我的错误/s？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:01:03.100

由于我认为其他人可能与我有同样的疑问，我将用我发现的东西来回答我自己的问题：

正如我认为的主要问题是并发性。如果我们假设许多用户可以同时更改相同的索引值，因为您必须在更新之前读取索引，那么在您读取值和更新索引中的值之间，另一个用户可能已经更改又是那个值。此外，从值更新到更新索引的那一刻，系统可能会崩溃。然后，在一些并发更改之后，索引可能具有指向没有该值的行的旧值。

通过添加第三个色谱柱系列，此过程更安全，但不是 100% 安全。

最后一件事：据我了解，如果更新值时没有并发，那么肯定没有问题。假设您正在索引一些用户数据。如果只允许数据的所有者修改数据，那么根本就没有并发。唯一的风险是在您完成将索引与值对齐的过程之前系统崩溃，但此操作是幂等的，因此您可以重复它直到成功。

希望这能解释我所理解的并帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T12:41:37.280

实际上，我认为这更多是关于幂等性而不是并发性。如果您有两个或三个列族，并发用户可能会产生误报结果，即索引列族中的键指向不再具有该值的行...但是如果您重复任何列族设计，则使用两个列族设计更新过程的一部分，您最终可能会丢失索引列族的正确行中的行的键...但是通过三列族设计，您可以确定每行的键在索引列族中的正确**位置**...过滤结果将解决误报问题，但是如果您没有正确位置的键，则无法简单地获取行，整个索引机制将是徒劳的...

考虑一个两列族设计的示例：用户 1 更新位置，Cassandra 返回错误但写入成功。用户 2 更新位置，读取用户 1 的结果写入并将其位置写入列族 用户 1 重试并将其位置写入列族并更新索引列族 用户 2 更新索引列族并删除用户 1 位置并插入他自己

最后用户拥有用户 1 的位置，但行键仅存在于用户 2 输入索引行中

我现在做这个例子，它可能有一些问题，或者你可以通过改变更新过程来解决在正确的地方丢失密钥的问题，但是你应该理解背后的概念。你可以想一个更好的例子。

但是我不确定这一点，但这个解释对我来说很有意义，希望我能向你解释......

# r - 在数据框中排序，保持一列固定

> ID：14445422
> 
> 赞同：1
> 
> 时间：2013-01-21T19:02:23.097
> 
> 标签：r, sorting, dataframe

我有一个这样的数据框：

```
 a v
1 g 9
2 g 2
3 z 2
4 z 3
5 a 5
6 a 4 
```

我想保持'a'列完整[未排序]并在'a'列中对'v'列进行排序。结果输出应该是这样的：

```
 a v
1 g 2
2 g 9
3 z 2
4 z 3
5 a 4
6 a 5 
```

我尝试使用 order 命令，但随后我必须按两列排序。有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T19:33:44.797

这是一种使用该`ave`功能的方法：

```
> dat$v <- ave(dat$v, dat$a, FUN=sort)
> dat
  a v
1 g 2
2 g 9
3 z 2
4 z 3
5 a 4
6 a 5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T19:07:08.627

该`data.table`软件包使这很容易：

```
library(data.table)

dat <- structure(list(a = c("g", "g", "z", "z", "a", "a"), v = c(9L, 
2L, 2L, 3L, 5L, 4L)), .Names = c("a", "v"), row.names = c(NA, 
-6L), class = c("data.table", "data.frame"), .internal.selfref = <pointer: 0x1b2cba8>)

dat[, list(v=sort(v)), by=a]

#    a  v
# 1: g  2
# 2: g  9
# 3: z  2
# 4: z  3
# 5: a  4
# 6: a  5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T20:32:20.693

将@GregSnow 扩展到超过两列的情况（正如我所看到的那样实际使用它）。

`v`根据 中的组排序`a`，保持`x`：

```
d <- read.table(header=TRUE, text="  a v x
1 g 9 10
2 g 2 20
3 z 2 30
4 z 3 40
5 a 5 60
6 a 4 70")

ord <- ave(seq_along(d$a)-1, d$a, FUN=min) + ave(d$v, d$a, FUN=order)

d[ord,]
##   a v  x
## 2 g 2 20
## 1 g 9 10
## 3 z 2 30
## 4 z 3 40
## 6 a 4 70
## 5 a 5 60 
```

# linux - awk 将值与输入进行比较

> ID：14445424
> 
> 赞同：2
> 
> 时间：2013-01-21T19:02:34.483
> 
> 标签：linux, bash, awk

用户输入变量（$userinput）可以与一个值进行比较吗？

```
awk -F:  '$1 < $userinput { printf .... }' 
```

这个比较表达式对我来说似乎没问题，但它给出了一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:04:14.207

尝试这样做：

```
awk -vuserinput="$userinput" -F: '$1 < userinput {}' 
```

一个真实的例子：

```
read -p "Give me an integer >>> " int
awk -v input=$int '$1 < input {print $1, "is less than", input}' <<< 1 
```

# hibernate - 具有休眠条件的多个连接级别

> ID：14445426
> 
> 赞同：1
> 
> 时间：2013-01-21T19:02:42.100
> 
> 标签：hibernate, join, criteria, fetch

我是 Hibernate 的新手，我想知道如何使用 Criteria 进行此类操作：

我有三个 A、B 和 C 类。A 类与 B 类具有 @OneToMany 关联。B 类与 C 类具有 @ManyToOne 关联。

我想要一个使用 Criteria 的请求，当我想要 A 类的对象时检索所有信息，以便我可以遍历 A.Bs 然后访问 bc

目前我有一个只检索 B 的查询：

```
session.createCriteria(A.class)
.add(Restrictions.idEq(aId))
.setFetchMode("B", FetchMode.JOIN)
.uniqueResult(); 
```

谢谢您的帮助

编辑：我试过了：

```
session.createCriteria(A.class)
.add(Restrictions.idEq(aId))
.createCriteria("Bs")
.createCriteria("C")
.uniqueResult(); 
```

但这是否以这个错误结束：

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:35:00.793

找到解决方案：

```
session.createCriteria(A.class)
.add(Restrictions.idEq(aId))
.setFetchMode("Bs", FetchMode.JOIN)
.setFetchMode("Bs.c", FetchMode.JOIN)
.uniqueResult(); 
```

其中“Bs”是包含@OneToMany 关联的A 的属性，而“c”是B 容器的@ManyToOne 关联的属性。

# emacs - 在作为包安装时配置自动完成

> ID：14445427
> 
> 赞同：1
> 
> 时间：2013-01-21T19:02:45.837
> 
> 标签：emacs, autocomplete

我曾经有以下行`auto-complete`：

```
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/auto-complete/dict")
(ac-config-default) 
```

但是现在我安装`auto-complete`为 Emacs 包，我的`auto-complete folder`目录中`.emacs.d`不再有一个，所以上面的第二行不起作用。

这让我想到了两个问题：

*   更一般地说，软件包安装在哪里？
*   `add-to-list`既然我已经将自动完成功能安装为一个包，我应该如何调整我的生产线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:06:30.207

默认情况下（在较新版本中`auto-complete`），使用的目录将是 emacs 安装包的 site-lisp 文件夹中的目录，因此不需要该行。简单地放置

```
 (setq-default ac-sources
               '(ac-source-abbrev ac-source-dictionary
                                  ac-source-words-in-same-mode-buffers)) 
```

在您的`.emacs`遗嘱中，您将`auto-complete`知道您想要完成的来源，并且字典文件将被适当地放置。

如果你想要一个自定义字典（至少我做了什么）是

```
(add-to-list 'ac-dictionary-directiories "~/.dict") 
```

只需确保您放置的目录存在即可。

编辑：忘了提到这只是当你想添加自定义字典来自动完成（Java对象高亮或自定义关键字等）。默认情况下启用语言。

# git - git push origin master 失败并给出错误：src refspec HEAD does not match any

> ID：14445431
> 
> 赞同：9
> 
> 时间：2013-01-21T19:02:51.827
> 
> 标签：git

任何帮助都会很棒。提前致谢！

我已经安装了 git，并且设置了 ssh 密钥，但是我遇到了这个奇怪的错误。

```
admin@Administrators-MacBook-Pro:~/Desktop$ cd exercise/
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ git init
Initialized empty Git repository in /Users/admin/Desktop/exercise/.git/
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ git remote add origin git@github.com:pavankat/exercise.git
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ git push origin master
error: src refspec master does not match any.
error: failed to push some refs to 'git@github.com:pavankat/exercise.git'
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ git push git@github.com:pavankat/exercise.git HEAD:test
fatal: remote part of refspec is not a valid name in /
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ git push git@github.com:pavankat/exercise.git HEAD:test
error: src refspec HEAD does not match any.
error: failed to push some refs to 'git@github.com:pavankat/exercise.git'
admin@Administrators-MacBook-Pro:~/Desktop/exercise$ 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T19:21:12.770

所以我没有做

```
git add .

git commit -am 'initial commit' 
```

在我推之前。

：/

# php - 在Jquery中添加多个输入框的值

> ID：14445434
> 
> 赞同：0
> 
> 时间：2013-01-21T19:03:01.100
> 
> 标签：php, javascript, forms, codeigniter, jquery

我正在使用代码点火器。我有一个表格，其中连续包含三个输入框。..我把它们放在一个小于五个的for循环中..所以现在我的表单有五行，一行三个输入框..现在我在做什么写现在我正在添加两个输入框的值并显示在第三个输入框中..现在我要做的是当每个“总计”（第三个输入框）都被填充时..然后我将添加所有总计，然后在我显示在底部的最后一个框中显示所有总计..

这是我的看法

```
 <td><input type="text" id = "price_<?php echo $i ?>"
                      onkeyup='addition(<?php echo "$i"?>)'>

     </td>

<td> <input type="text" id = "quantity_<?php echo $i ?>" onkeyup='addition(<?php echo "$i"?>)'>
</td>

<td><input type="text"  id = "total_<?php echo $i ?>">
    </td> 
```

```
 <?php echo form_input($subtotal)?></td> // here i want to display sum of all the totals 
```

这是我的javascript..这个函数将价格和数量相乘..我的意思是第一个和第二个输入框，然后显示在第三个框中..

```
 function addition (obj)
     {
var subtotal = 0;
var num1=parseInt($('#price_'+obj).val());
    var num2=parseInt($('#quantity_'+obj).val());
    var num4=parseInt($('#total_'+obj).val());

if ($('#price_'+obj).val() !='' && $('#quantity_'+obj).val() !='')
{
    var num3=num1*num2;
    $('#total_'+obj).val(num3);

} 

else
{
    $('#total_'+obj).val('');
 }

 } 
```

我也上传了图片。。

![在此处输入图像描述](../Images/469c953c8a5c7fa99eb52207b718794a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:47:03.323

我看到您使用 jQuery，我对您的代码进行了一些修改以更好地使用 jQuery。你可以在[JsBIN看到演示](http://jsbin.com/emoziw/1/edit)

当您通过计算结果更新一个“总”单元格时，这个想法是锁定所有“总”单元格。将所有“总计”单元格与“总计”单元格相加。我听“keyup”事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:32:48.387

这是 jsFiddle 示例：http: [//jsfiddle.net/Ner7M/2/](http://jsfiddle.net/Ner7M/2/)

感兴趣的代码：

```
var table = $('table');

// nth-child is 1-based, not 0
function totalColumn(table, idx) {
    var total = 0;
    var tds = $('table')
        .find('tr td:nth-child(' + idx + ') input')
        .each(function() {
        total += parseInt($(this).val());
    });
    return total;
}

totalColumn(table, 3); 
```

# gnu-screen - 取消绑定 gnu-screen 命令

> ID：14445435
> 
> 赞同：1
> 
> 时间：2013-01-21T19:03:03.443
> 
> 标签：gnu-screen

在复制模式下，我不希望 Cf 被绑定到“page-down”。我可以在我的 .screenrc 中包含什么来取消绑定键？

我试过 `bind f` 了 `bind ^f`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:10:52.770

尝试

```
bind [-c class] key [command [args]] 
```

# c# - 在实体框架中向部分类添加接口不起作用

> ID：14445437
> 
> 赞同：1
> 
> 时间：2013-01-21T19:03:12.733
> 
> 标签：c#, asp.net, entity-framework, partial-classes

我在我的实体框架 (v5) 对象上使用部分类 (.NET 4.5)。我为这个分部类添加了一个接口，但是针对这个接口测试EF对象是错误的，但是应该可以识别为该接口是在分部类上定义的。这是我正在尝试的：

```
public interface Product : ILastModified
{
  public DateTime LastModified { get; set; }
} 
```

然后在我的数据层我正在尝试这个：

```
 public virtual int Update<T>(T TObject) where T : class
    {
        //WHY ALWAYS FALSE?
        if (TObject is ILastModified)
        {
          (TObject as ILastModified).LastModified = DateTime.Now;
        }

        var entry = dbContext.Entry(TObject);
        dbContext.Set<T>().Attach(TObject);
        entry.State = EntityState.Modified;
        return dbContext.SaveChanges();
    } 
```

问题是“如果（TObject 是 ILastModified）”总是错误的，即使我将它设置在部分类上。我做错了什么还是有办法实现这样的目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:06:11.060

您已将您的定义`Product`为接口而不是类。

应该：

```
interface ILastModified {
{
    DateTime LastModified { get; set; }
}

public partial class Product : ILastModified
{
    /* this prop is declared in the Ef generated class   */
    //public DateTime LastModified { get; set; }
} 
```

**编辑：**

您不必对`Is`方法进行此更改：

```
public virtual int Update<T>(T TObject) where T : class, ILastModified
{
    TObject.LastModified = DateTime.Now

    var entry = dbContext.Entry(TObject);
    dbContext.Set<T>().Attach(TObject);
    entry.State = EntityState.Modified;
    return dbContext.SaveChanges();
} 
```

这样，如果您传递的类型未实现接口，您将获得编译时错误。

# mysql - 使用 MySQL 查找链接表中没有任何条目的项目

> ID：14445439
> 
> 赞同：1
> 
> 时间：2013-01-21T19:03:21.893
> 
> 标签：mysql, kohana-3, kohana-orm

我有一个`items`表和一个`tags`通过表链接的`user_tags`表。我有一个查询，可以找到所有带有特定标签的项目：

```
self::factory('item')
    ->join('user_tags', 'INNER')->on('items.id', '=', 'user_tags.item_id')
    ->join('tags', 'INNER')->on('user_tags.tag_id', '=', 'tags.id')
    ->where('tags.title', 'IN', $array_of_tags); 
```

或没有 kohana orm：

```
SELECT items.*
FROM items
INNER JOIN user_tags ON items.id = user_tags.item_id
INNER JOIN tags ON user_tags.tag_id = tags.id
WHERE tags.title IN ($array_of_tags); 
```

我想找到所有没有与之关联的标签的项目。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:06:26.660

只需添加另一个 where 条件

```
SELECT 
    items.*
FROM items
LEFT JOIN user_tags ON items.id = user_tags.item_id
LEFT JOIN tags ON user_tags.tag_id = tags.id
WHERE tags.title IN ($array_of_tags)
AND user_tags.tag_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:08:35.397

将内连接切换为左连接

```
SELECT items.*
FROM items
LEFT JOIN user_tags ON items.id = user_tags.item_id
LEFT JOIN tags ON user_tags.tag_id = tags.id
WHERE (tags.title IN ($array_of_tags) or tags.title is null)
and user_tags.item_Id is null. 
```

请记住，SQL 不仅仅是设置逻辑。

这是帮助解释不同类型连接的链接。

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:07:28.667

试试这个：：

```
SELECT items.*
FROM items
LEFT JOIN user_tags ON items.id = user_tags.item_id
LEFT JOIN tags ON user_tags.tag_id = tags.id
WHERE 
user_tags.tag_id is null 
AND tags.title IN ($array_of_tags) 
```

# c# - 带有 Windows Rt 和 C# 的 FileIO

> ID：14445447
> 
> 赞同：0
> 
> 时间：2013-01-21T19:03:59.723
> 
> 标签：c#, windows-runtime, windows-rt

哇，这种方式是否比它需要的更复杂。有人可以向我解释为什么以下代码有效：

```
 string stringToWrite = "SomeStuff";
        Windows.ApplicationModel.Package package = Windows.ApplicationModel.Package.Current;
        Windows.Storage.StorageFolder installedLocation = package.InstalledLocation;
        var files = await installedLocation.GetFilesAsync();
        foreach (Windows.Storage.StorageFile sf in files)
        {
            if (sf.Name.Equals("log.txt"))
            {
                await FileIO.AppendTextAsync(sf, stringToWrite);

            }
        } 
```

然而，以下因 AccessDenied 而失败：

```
 Windows.ApplicationModel.Package package = Windows.ApplicationModel.Package.Current;
      Windows.Storage.StorageFolder installedLocation = package.InstalledLocation;
      var log = await installedLocation.GetFileAsync("log.txt");
      await FileIO.AppendTextAsync(log, stringToWrite); 
```

唯一的区别是循环通过 GetFilesAsync 方法返回的文件与按名称获取文件。顺便说一句，按名称获取文件是有效的，因为如果我在 GetFileAsync 中拼错 log.txt，我会得到一个异常。

很混乱....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:15:35.290

您**不**应该使用您安装的位置来写入任何文件。根据MSDN ，它应该是*只读的*[：Windows Store Apps 中的文件访问/权限](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)：

> 应用程序的安装目录是只读位置。您无法通过文件选择器访问安装目录。

您应该使用`Local`、`Roaming`或`Temporary`存储位置。

请参阅此链接：[MSDN：快速入门本地应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361.aspx)

# iphone - 当 iOS 应用程序/游戏发布到 Facebook 或 Twitter 时使用的链接

> ID：14445448
> 
> 赞同：1
> 
> 时间：2013-01-21T19:04:00.957
> 
> 标签：iphone, ios, facebook, twitter, app-store

我刚刚使用 COCOS2D 在 iOS 中开发了一款新游戏（名为 Ktalu：Planet of Terror）。游戏本身已经完成，但我必须完成几件事，其中之一是以下。该游戏允许用户在 Facebook 和/或 Twitter 上发布他们的高分，现在一切正常。Facebook 帖子按预期显示，其中一些文本链接到我选择的 URL。我的问题是我应该在这里使用什么链接？我可以链接到游戏的网站 (ktalu.com)，但最好直接链接到 App Store 中的游戏。这样，任何在 iPhone 上阅读时在 Facebook 上看到帖子的人都可以单击链接并直接进入 App Store。但我对如何做到这一点感到困惑。我现在唯一的链接是 iTunes Connect 中的游戏链接。请记住，此游戏尚未发布。如果该游戏尚未在 App Store 中，我如何获取该游戏的 App Store 链接以放入 Facebook 帖子和推文？这个链接到底是什么样的？是 http、https 还是其他？如果有人在笔记本电脑或台式机上阅读帖子并点击该链接会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:12:04.357

“在 App Store 中查看”链接（管理应用程序）正是您想要的。该 URL 将在应用程序上线后起作用，即使在启动前复制，因为它不会更改。在非 iOS 计算机上关注时，此链接将转到在线商店。在 iOS 上关注时，此链接会转到 App Store。

*   Protip：使用 URL 方案“itms://”而不是“http://”直接链接到桌面/笔记本电脑上 iTunes 中的应用程序。两者都直接进入 iOS 上的 App Store。

如果您想自己构建 URL，请按照我之前的说明进行操作：

在 iTunes Connect 中，您需要找到您的应用程序的“Apple ID”（这是在 Ktalu 管理应用程序中找到的 9 位数字）。然后只需找到指向任何其他应用程序的链接并将 ID 替换为您的 ID。

例如，谷歌地图的 Apple ID 是 585027354，其在线 URL 是[https://itunes.apple.com/us/app/id585027354](https://itunes.apple.com/us/app/id585027354)。

# javascript - 让 LMCbutton 正常工作

> ID：14445450
> 
> 赞同：2
> 
> 时间：2013-01-21T19:04:02.020
> 
> 标签：javascript

有没有人尝试过[LMC 按钮](http://www.lettersmarket.com/uploads/lettersmarket/lmcbutton/demo_lmcbutton.html)？我最初想使用 ZeroClipboard，因为它是用于复制到剪贴板功能的最流行的脚本，但由于某种原因它在我的 wordpress 中不起作用。LMC 按钮除了一个小缺陷外完美运行 - 它只能复制页面加载时显示的代码。

这对我来说没有意义，因为我需要将动态生成的消息复制到剪贴板。转到上面的链接查看他的演示，你会发现同样的事情。更改输入并单击“复制”，它不会复制您输入的内容。

进一步说明，我不能使用 ctrl-c，因为我需要在复制之前将一些代码添加到文本中。请不要提出这个建议。

# java - PKCS11 derivedKey() 和 encrypt() 为 3DES 返回不同的结果

> ID：14445460
> 
> 赞同：4
> 
> 时间：2013-01-21T19:04:47.863
> 
> 标签：java, 3des, pkcs#11, hsm

我正在使用 HSM 和 PKCS11 解决密钥派生问题，目前我不明白为什么我会看到完全不同的结果，具体取决于我使用的是 derivedKey() 方法而不是使用 encrypt() 方法。在这两种情况下，我都尝试对结果使用 DESede/ECB/NoPadding 算法，但根据我用来生成结果的方法（deriveKey 与加密），我会看到不同的结果。

稍等片刻，进行高级概述... 我正在使用 Global Platform 使用的特定密钥派生方法来多样化用于智能卡的主密钥。该方法以一个主密钥和用于派生新密钥的 8 字节数据（多样化数据）开始。div 数据字节实际上只是使用 DESede/ECB/NoPadding 使用主密钥加密，结果用作新派生的 3DES 密钥的一部分。（实际上，执行了多次加密，并将结果连接在一起形成新密钥，但这不是这里的问题。）

我已经验证了两种情况下的主密钥，验证了两种情况下的多样化数据是相同的，验证了我使用的是具有相同填充的相同算法。我还尝试将派生密钥模板更改为 DES、2DES、3DES。所有产生的结果相似，只是长度不同。

目前我已经使用 IAIK 包装器（用 Java 编写的 pkcs11 包装器）实现了我的测试用例，我将在此处发布。密钥只是一个测试密钥，div数据是样本div数据，所以这里没有敏感信息。我首先在 HSM 中创建一个基本密钥，然后尝试通过使用多样化数据调用 session.deriveKey() 来派生一个新密钥。派生的密钥字节以十六进制打印（密钥值不正确，基于我当前工作的实现，该实现在内存中而不是在 HSM 中派生密钥）。接下来，我简单地初始化会话以使用主密钥执行加密，然后加密多样化数据。这会产生预期值（再次检查工作实现）。

我正在寻找的是，当我使用相同的基本密钥、相同的 div 数据和相同的加密算法时，为什么这些操作会产生不同的结果。我不明白deriveKey() 在表面下做了什么，我找不到任何文档或源代码来阐明这一点。我必须能够使用派生密钥（）方法，因为派生密钥在 HSM 之外不可用。

任何见解表示赞赏。

```
Mechanism keyGenerationMechanism = Mechanism.get(PKCS11Constants.CKM_DES3_KEY_GEN);

List supportedMechanisms = Arrays.asList(token.getMechanismList());
if (!supportedMechanisms.contains(Mechanism.get(PKCS11Constants.CKM_DES3_KEY_GEN))) {
    output_.println("Mechanism not supported: DES3_KEY_GEN");
    return;
}

// This is the master key that I want to diversify
DES3SecretKey baseKeyTemplate = new DES3SecretKey();
baseKeyTemplate.getValue().setByteArrayValue(new byte[] {0x3d, 0x20, 0x5b, 0x29, (byte) 0xfd, 0x04, (byte) 0xd9, (byte) 0x89, (byte) 0xd0, (byte) 0xfd, (byte) 0x85, (byte) 0xd5, (byte) 0xf7, (byte) 0xb3, 0x31, (byte) 0xd3,
        0x3d, 0x20, 0x5b, 0x29, (byte) 0xfd, 0x04, (byte) 0xd9, (byte) 0x89});
baseKeyTemplate.getDerive().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getToken().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getPrivate().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getSensitive().setBooleanValue(Boolean.FALSE);
baseKeyTemplate.getExtractable().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getLabel().setCharArrayValue("GP-3des-aba".toCharArray());
baseKeyTemplate.getObjectClass().setLongValue(PKCS11Constants.CKO_SECRET_KEY);
baseKeyTemplate.getKeyType().setLongValue(PKCS11Constants.CKK_DES3);
baseKeyTemplate.getEncrypt().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getDecrypt().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getWrap().setBooleanValue(Boolean.TRUE);
baseKeyTemplate.getUnwrap().setBooleanValue(Boolean.TRUE);

output_.println("baseKeyTemplate: " + baseKeyTemplate.toString());

SecretKey baseKey = (SecretKey) session.createObject(baseKeyTemplate);

System.out.println("Base key: ");
System.out.println(baseKey.toString());

output_
        .println("################################################################################");
output_.println("derive key");

//DES3 Key Template
DESSecretKey derived3DESKeyTemplate = new DESSecretKey();
SecretKey derivedKeyTemplate = derived3DESKeyTemplate;

derivedKeyTemplate.getSensitive().setBooleanValue(Boolean.FALSE);
derivedKeyTemplate.getToken().setBooleanValue(Boolean.TRUE);
derivedKeyTemplate.getExtractable().setBooleanValue(Boolean.TRUE);
derivedKeyTemplate.getPrivate().setBooleanValue(Boolean.FALSE);
derivedKeyTemplate.getKeyType().setLongValue(PKCS11Constants.CKK_DES);

// This represents the diversification data (.ie div bytes from some smart card)
byte[] data = new byte[] {0x00, (byte) 0x84, 0x30, (byte) 0x95, 0x35, 0x05,(byte)  0xf0, 0x01};

KeyDerivationStringDataParameters param = new KeyDerivationStringDataParameters(data);
Mechanism mechanism = Mechanism.get(PKCS11Constants.CKM_DES3_ECB);

if (!supportedMechanisms.contains(Mechanism
        .get(PKCS11Constants.CKM_DES3_ECB))) {
    output_.println("Mechanism not supported: CKM_DES3_ECB");
    return;
}

mechanism.setParameters(param);

System.out.println("Derivation Mechanism: ");
output_.println(mechanism.toString());
output_
        .println("--------------------------------------------------------------------------------");

Key derivedKey = session.deriveKey(mechanism, baseKey, derivedKeyTemplate);

if (derivedKey == null) {
    output_.println("Found NO key that can be used for encryption.");
    output_.flush();
    System.exit(0);
}
System.out.println("Derived key: ");
output_.println(derivedKey.toString());

output_
        .println("################################################################################");
output_.println("finished");

// initialize for encryption
Mechanism encryptionMechanism = Mechanism.get(PKCS11Constants.CKM_DES3_ECB);
session.encryptInit(encryptionMechanism, baseKey);
byte[] encryptedData = session.encrypt(data);

System.out.println("Encrypted data: " + new String(Hex.encodeHex(encryptedData)));

// This is the second part of the derived key, let's not worry about this yet since the first part isn't
// working.
//        data = new byte[] {0x00, (byte) 0x84, 0x30, (byte) 0x95, 0x35, 0x05,(byte)  0x0f, 0x01,
//                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
//
//        session.encryptInit(encryptionMechanism, baseKey);
//        encryptedData = session.encrypt(data);
//        System.out.println("Encrypted data: " + new String(Hex.encodeHex(encryptedData)));

session.closeSession();
pkcs11Module.finalize(null); 
```

这是我运行上述代码时的相关输出：

```
Base key:  
  Object Class: Secret Key  
  Token: true  
  Private: true  
  Modifiable: true  
  Label: GP-3des-aba  
  Key Type: DES3  
  ID: <NULL_PTR>  
  Start Date: 00.00.0000 (DD.MM.YYYY)  
  End Date: 00.00.0000 (DD.MM.YYYY)  
  Derive: true  
  Local: false  
  Key Generation Mechanism: <Information unavailable>  
  Allowed Mechanisms: <NULL_PTR>  
  Sensitive: false  
  Encrypt: true  
  Decrypt: true  
  Sign: false  
  Verify: false  
  Wrap: true  
  Unwrap: true  
  Extractable: true  
  Always Sensitive: false  
  Never Extractable: false  
  Check Value: <Attribute not present>  
  Wrap With Trusted: <Attribute not present>  
  Trusted: <Attribute not present>  
  Wrap Template: <Attribute not present>  
  Unwrap Template: <Attribute not present>  
  Value (hex): 3d205b29fd04d989d0fd85d5f7b331d33d205b29fd04d989  
################################################################################
derive key  
Derivation Mechanism:   
  Mechanism: CKM_DES3_ECB  
  Parameters:   
  String data (hex): 008430953505f001  
--------------------------------------------------------------------------------  
01/18/13 14:12:10   CALL: entering (in Java_iaik_pkcs_pkcs11_wrapper_PKCS11Implementation_C_1DeriveKey)  

[snip]  

Derived key:   
  Object Class: Secret Key  
  Token: true  
  Private: false  
  Modifiable: true  
  Label: <NULL_PTR>  
  Key Type: DES  
  ID: <NULL_PTR>  
  Start Date: 00.00.0000 (DD.MM.YYYY)  
  End Date: 00.00.0000 (DD.MM.YYYY)  
  Derive: false  
  Local: false  
  Key Generation Mechanism: CKM_DES3_ECB  
  Allowed Mechanisms: <NULL_PTR>  
  Sensitive: false  
  Encrypt: false  
  Decrypt: false  
  Sign: false  
  Verify: false  
  Wrap: false  
  Unwrap: false  
  Extractable: true  
  Always Sensitive: false  
  Never Extractable: false  
  Check Value: <Attribute not present>  
  Wrap With Trusted: <Attribute not present>  
  Trusted: <Attribute not present>  
  Wrap Template: <Attribute not present>  
  Unwrap Template: <Attribute not present>  
  Value (hex): 3efe0eab6d3db397      <--- call to deriveKey() value incorrect  
################################################################################  
finished  
01/18/13 14:12:12   CALL: entering (in Java_iaik_pkcs_pkcs11_wrapper_PKCS11Implementation_C_1EncryptInit)  
01/18/13 14:12:12   CALL: exiting  (in Java_iaik_pkcs_pkcs11_wrapper_PKCS11Implementation_C_1EncryptInit)  
01/18/13 14:12:12   CALL: entering (in Java_iaik_pkcs_pkcs11_wrapper_PKCS11Implementation_C_1Encrypt)  
01/18/13 14:12:12   CALL: exiting  (in Java_iaik_pkcs_pkcs11_wrapper_PKCS11Implementation_C_1Encrypt)  
Encrypted data: 3fff0faa6c3cb297    <--- call to encrypt() returns the expected value 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T23:29:33.243

事实证明，如果考虑 DES 奇偶校验的工作原理，则使用 DeriveKey 在 HSM 中生成的密钥和我使用 session.encrypt() 生成的密钥字节本质上是相同的。

DES 密钥中每个字节的最低有效位是奇偶校验位，它在许多实现中被忽略并且不用作密钥的一部分，因此如果我在我的加密结果上正确设置奇偶校验位，那么两个结果都匹配。

0x3efe0eab6d3db397 <--- 具有正确奇校验的 HSM 生成值
00111110 11111110 00001110 10101011 01101101 00111101 10110011 10010111

0x3fff0faa6c3cb297 <--- 没有正确设置奇偶校验位的加密结果
00111111 11111111 00001111 10101010 01101100 00111100 10110010 10010111

# c# - 当页面长时间打开时，JQuery ajax 调用中断

> ID：14445463
> 
> 赞同：4
> 
> 时间：2013-01-21T19:04:59.350
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

首先，我是 javascript 和 JQuery 的新手，所以我希望这不是一个新手问题。

我正在处理的项目是一个 MVC3 应用程序。我正在按如下方式进行 AJAX 调用，一切正常。

```
$.ajax({
  url: 'blah',
  data: {data1: '', data2: ''},
  dataType: 'json',
  success: function(val){

  },
  error: function(message){
    alert("Error!");
  } 
```

我的问题是，如果屏幕长时间处于打开状态，没有用户交互，我的 ajax 调用不会被触发并且我得到一个错误。我在控制器函数上的 C# 代码中设置了一个断点，该函数在长时间不活动后被调用并且永远不会被击中。

再次重申，它可以正常工作，但只有在长时间不活动（30 分钟以上）后才会中断。这是一个边缘案例，但仍然是一个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:02:48.743

如果您离开会话超过 30 分钟，您的会话很可能超时。你可以做两件事（我想还有很多事情要做！）

1.  您可以在 web.config 文件中修改会话超时：

    > < sessionState .... timeout="分钟"................../>

**注意：**如果您在此配置中花费太多时间，并且访问次数过多，则您的 Web 服务器可能存在内存问题。

1.  您可以使用此属性在控制器中装饰您的操作：

    > [允许匿名]

**注意：** AllowAnonymousAttribute 适用于 MVC 4 或更高版本。如果你想在以前的版本中实现。最后，这可能会给您的应用程序带来安全问题。

我希望这能有所帮助！

# javascript - 找不到变量

> ID：14445466
> 
> 赞同：2
> 
> 时间：2013-01-21T19:05:06.683
> 
> 标签：javascript, safari-extension, safari6

所以当你要学习的时候，我不知道 javascript，但这似乎应该可以工作：

```
var whitelistURLPartials = ["ae\=Folder","ae\=Item\&t\=IPM\.Note"];

var current = window.location.href;

for (var whitelist in whitelistURLPartials)
{
    if(current.match(whitelist))
    {
        window.setTimeout(function(){document.location.reload(true)},1000*60);
        break;
    }   
} 
```

但我明白了`6: ReferenceError: Can't find variable: whitelistURLPartials`

如果重要的话，这是一个野生动物园扩展。

**编辑：**
Safari 似乎保留了 .js 文件的每个版本，来自加载的每个更改版本的扩展。我不得不重新启动 Safari 以清除它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:51:18.147

Safari 将旧脚本保存在内存中，并在每次我的扩展程序访问它设置工作的域时运行它们。我不得不重新启动 Safari 进程。

感谢所有帮助我指出正确方向的人。

# java - 将C++ *.idl结构类型转换为生成的java文件时实现equals()和hascode

> ID：14445472
> 
> 赞同：0
> 
> 时间：2013-01-21T19:05:45.603
> 
> 标签：java, idl

我正在使用 C++ *.idl 文件中的结构数据类型并将其转换为生成的 java 类。它正在生成 java 分类但它没有实现等于和哈希方法..所以我无法使用它们进行比较。

例如：我想在一个集合（不应该支持重复）中使用它们作为不等于和 hashCode 所以它允许重复条目。

谁可以帮我这个事。使用equals和hasecode生成（如何支持生成）java类的任何方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:23:42.963

您可以通过生成使用[EqualsBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/EqualsBuilder.html)和[HashCodeBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html)的代码来简化代码生成。除此之外......这是一项繁琐的编码工作。

# java - 从 Intent 传递 ID 的问题

> ID：14445474
> 
> 赞同：0
> 
> 时间：2013-01-21T19:05:59.173
> 
> 标签：java, android

我目前在通过意图传递 ID 时遇到空指针异常错误。我已经在似乎发生错误的代码上做了标记。

希望有人能看到我哪里出错了。

这是我将所选 ID（来自列表视图）添加到意图的代码：

```
 public void onListItemClick(ListView list, View v, int list_posistion, long item_id)
{
    long idToPass = item_id;

    Intent setName = new Intent("com.example.flybase2.addAppointment");
    setName.putExtra("passedID", idToPass);
    startActivity(setName);  
} 
```

下面是意图打开的类，显示包含传递的 ID 的包：

```
//ERROR: Error occuring on this bundle when setting the ID variable.
Bundle passedID = getIntent().getExtras(); 
    if (passedID != null) {
     ID = passedID.getLong("passedID"); 

    DBHandlerApp NameAppointPass = new DBHandlerApp(this, null, null);

    NameAppointPass.open();
    String nameReturned = NameAppointPass.getName(ID);

    setName.setText(nameReturned);
} 
```

日志猫：

```
01-21 19:14:16.808: E/AndroidRuntime(274): FATAL EXCEPTION: main
01-21 19:14:16.808: E/AndroidRuntime(274): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flybase2/com.example.flybase2.addAppointment}: java.lang.NullPointerException
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.os.Looper.loop(Looper.java:123)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-21 19:14:16.808: E/AndroidRuntime(274):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 19:14:16.808: E/AndroidRuntime(274):  at java.lang.reflect.Method.invoke(Method.java:521)
01-21 19:14:16.808: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-21 19:14:16.808: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-21 19:14:16.808: E/AndroidRuntime(274):  at dalvik.system.NativeStart.main(Native  Method)
01-21 19:14:16.808: E/AndroidRuntime(274): Caused by: java.lang.NullPointerException
01-21 19:14:16.808: E/AndroidRuntime(274):  at com.example.flybase2.addAppointment.onCreate(addAppointment.java:57)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-21 19:14:16.808: E/AndroidRuntime(274):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

# javascript - THREE.js - 无法读取未定义的属性 'lib' (THREE.ShaderUtils.lib["normal"])

> ID：14445475
> 
> 赞同：2
> 
> 时间：2013-01-21T19:06:06.823
> 
> 标签：javascript, three.js, webgl

我正在完成 Oreilly 的 WebGL 入门书中的练习。

以下行导致运行时错误。我用谷歌搜索并没有看到其他人有问题，所以我做错了什么？

```
var specularMap= THREE.ImageUtils.loadTexture("WebGLBook/images/earth_specular_2048.jpg");

var shader   = THREE.ShaderUtils.lib[ "normal" ]; <-- fails
var uniforms = THREE.UniformsUtils.clone(shader.uniforms);

uniforms['tNormal'].texture   = normalMap; 
uniforms['tDiffuse'].texture  = surfaceMap; 
```

指出的行失败并出现以下错误：

```
Uncaught TypeError: Cannot read property 'lib' of undefined solar-system-spec-map.html:60
Earth.createGlobe solar-system-spec-map.html:60
Earth.init solar-system-spec-map.html:51
EarthApp.init solar-system-spec-map.html:33
(anonymous function) solar-system-spec-map.html:93
deferred.resolveWith jquery-1.6.4.js:1016
jQuery.extend.ready jquery-1.6.4.js:437
DOMContentLoaded 
```

这也奇怪的是，“ShaderUtils”没有列在 THREE.js 文档中...... [http://mrdoob.github.com/three.js/docs/55/](http://mrdoob.github.com/three.js/docs/55/)

这是怎么回事？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T19:22:19.203

命名约定已更改，现在应该可以使用

```
var shader = THREE.ShaderLib[ "normalmap" ]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T05:02:32.287

来自 github 存储库：

“如果您使用 libs 文件夹中较旧的 Three.js，则本书的代码有效。从 r50 开始，它要简单得多，只需将地图设置为 MeshPhongMaterial 的属性，如下所示：

```
var material = new THREE.MeshPhongMaterial({
    map: earthSurfaceMap,
    normalMap: earthNormalMap,
    specularMap: earthSpecularMap}); 
```

就是这样，不需要制服或 computeTangents()。”

这行得通！

# cocoa-touch - 比较两个 NSString 的相似度

> ID：14445476
> 
> 赞同：1
> 
> 时间：2013-01-21T19:06:07.620
> 
> 标签：cocoa-touch, nsstring, compare

我想比较两个`NSString`s。如果用户输入“巨石阵”，应该得到一个“答案边界”=“几乎等于”，因为正确的答案是：“巨石阵”。

我想要一个字符串等于另一个字符串的百分比。如果“巨石阵”是 9 个字母，并且输入的文本包含来自“巨石阵”的 8 个字母，但它不等于“巨石阵”，例如：“巨石阵”不等于“巨石阵”，但它接近 - 我会想知道字符串有多接近匹配。

我只知道`isEqual:`。如果您输入“巨石阵”，您将匹配并获得正确的符号。如果文本字段的文本不相等，则不会得到匹配并得到错误的符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:07:46.893

**编辑** 你想要的是计算[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。

你可能想看看这个问题[Calculate number of Differences between two NSStrings](https://stackoverflow.com/questions/2397348/calculate-number-of-differences-between-two-nsstrings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T23:12:51.347

我喜欢这个库，StringScore [https://github.com/thetron/StringScore](https://github.com/thetron/StringScore)

它为您提供了这些有用的方法：

```
- (CGFloat) scoreAgainst:(NSString *)otherString;

- (CGFloat) scoreAgainst:(NSString *)otherString fuzziness:(NSNumber *)fuzziness;

- (CGFloat) scoreAgainst:(NSString *)otherString fuzziness:(NSNumber *)fuzziness options:(NSStringScoreOption)options; 
```

# java - Tapestry 5.3 通过自定义组件在正文末尾附加 html

> ID：14445483
> 
> 赞同：0
> 
> 时间：2013-01-21T19:06:18.913
> 
> 标签：java, tapestry

我看过很多关于通过 MarkupWriter 以编程方式添加 html 的教程，但它会在使用组件的地方添加 html。

有没有办法告诉作者在结束正文标记之前添加它？

另外，我怎样才能得到组件的主体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:59:25.333

我认为不需要那么复杂

```
@Environmental
private Heartbeat heartbeat;

@SetupRender
void setupRender(MarkupWriter writer) {
    writer.element("div");
}

// let the body render as normal

@AfterRender
void afterRender(final MarkupWriter writer) {
    Element wrapper = writer.element();
    writer.end();
    final String bodyMarkup = wrapper.getChildMarkup();

    // remove the body 
    wrapper.remove();

    heartbeat.defer(new Runnable() {
        public void run() {
            Element pageBody = writer.getDocument().find("html/body");
            pageBody.raw(bodyMarkup);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:19:12.617

要获取组件的主体，您应该 @Inject ComponentResources 并调用 getBody()。

在身体的末端添加一些东西需要更多的思考。我可以看到两种方式。

使用@HeartbeatDeferred 注解，您可以在所有其他组件呈现后访问 DOM。像这样的东西：

```
public class MyComponent {
    private Element body;

    void setupRender(MarkupWriter writer) {
        body = writer.getDocument().find("html/body");
    }

    @HeartbeatDeferred
    void addToBody() {
        body.text("Some text here");
    }
} 
```

另一种方法是直接在 body 标记下定义一个组件，该组件嵌套所有其他组件。该组件在其 @SetupRender 方法中将模型对象推送到环境中。然后，定义为顶级组件的子组件的组件可以使用 @Environmental 注释来查找模型对象并为其做出贡献。然后顶级组件呈现模型。

例如：

```
<html>
   <body>
       <t:toplevelcomponent>
          <t:childcomponent />
          <div>...</div>
          <div>...</div>
       </t:toplevelcomponent>
   </body>
</html>

public class TopLevelModel {
    private List<String> contributions;

    // getters and setters
}

public class TopLevelComponent {
      @Inject
      Environment environment;

      public void setupRender() {
          environment.push(TopLevelModel.class, new TopLevelModel());
      }

      public void afterRender(MarkupWriter writer) {
          TopLevelModel model = environment.pop(TopLevelModel.class);
          for (String contribution : model.getContributions()) {
              // add text to the body tag
              writer.getElement().text(contribution); 
          }
      }
}

public class ChildComponent {
      @Environmental
      private TopLevelModel topLevelModel;

      public void setupRender() {
           topLevelModel.getContributions().add("Foo");
           topLevelModel.getContributions().add("Bar");
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:21:21.047

解决方案：

```
 private Element pageBody;
    private String componentBodyMarkup;
    private Element wrapper;

    @Environmental
    private Heartbeat heartbeat;

    @SetupRender
    private RenderCommand setupRender() {
        return new RenderCommand() {
            public void render(MarkupWriter writer, RenderQueue queue) {
                wrapper = writer.element("div");

                RenderCommand renderBody = new RenderCommand() {
                    public void render(MarkupWriter writer, RenderQueue queue2) {
                        RenderCommand bodyRenderCommand = typeCoercer.coerce(componentResources.getBody(), RenderCommand.class);
                        queue2.push(bodyRenderCommand);
                    }
                };
                queue.push(renderBody);
            }
        };
    }

    @BeforeRenderBody
    private boolean beforeRenderBody(MarkupWriter writer) {
        return false;
    }

    @AfterRender
    private void afterRender(MarkupWriter writer) {
        pageBody = writer.getDocument().find("html/body");

        writer.end();

        componentBodyMarkup = wrapper.getChildMarkup();
        wrapper.remove();

        Runnable appendToBody = new Runnable() {
            public void run() {
                pageBody.raw(componentBodyMarkup);
            }
        };
        heartbeat.defer(appendToBody);
    } 
```

# web-services - 具有“无此类操作：HTTP GET PATH_INFO”的 Web 服务

> ID：14445484
> 
> 赞同：3
> 
> 时间：2013-01-21T19:06:21.173
> 
> 标签：web-services, apache-camel, endpoint

我目前有一个 SOAP Web 服务，我正在尝试访问它的端点，但我不断收到此错误：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <soap:Fault>
      <faultcode>soap:Server</faultcode>
        <faultstring>
 No such operation: (HTTP GET PATH_INFO: /camel-example-reportincident/webservices/incident)
        </faultstring>
       </soap:Fault>
    </soap:Body>
 </soap:Envelope> 
```

* * *

## 单元测试

```
package org.apache.camel.example.reportincident;

import junit.framework.TestCase;

import org.apache.camel.CamelContext;
import org.apache.camel.impl.DefaultCamelContext;
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
import org.jvnet.mock_javamail.Mailbox;

/**
 * Unit test of our routes
 */
public class ReportIncidentRoutesTest extends TestCase {

private CamelContext camel;

// should be the same address as we have in our route
private static String ADDRESS = "cxf://http://localhost:8080/camel-example-reportincident/webservices/incident"
            + "?serviceClass=org.apache.camel.example.reportincident.ReportIncidentEndpoint"
            + "&wsdlURL=report_incident.wsdl";

protected void startCamel() throws Exception {
    camel = new DefaultCamelContext();
    camel.addRoutes(new ReportIncidentRoutes());
    camel.start();
}

protected static ReportIncidentEndpoint createCXFClient() {
    // we use CXF to create a client for us as its easier than JAXWS and works
    JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
    factory.setServiceClass(ReportIncidentEndpoint.class);
    factory.setAddress(ADDRESS);
    return (ReportIncidentEndpoint) factory.create();
}

public void testRendportIncident() throws Exception {
    // start camel
    startCamel();

    // assert mailbox is empty before starting
    Mailbox inbox = Mailbox.get("incident@mycompany.com");
    assertEquals("Should not have mails", 0, inbox.size());

    // create input parameter
    InputReportIncident input = new InputReportIncident();
    input.setIncidentId("123");
    input.setIncidentDate("2008-08-18");
    input.setGivenName("Claus");
    input.setFamilyName("Ibsen");
    input.setSummary("Bla");
    input.setDetails("Bla bla");
    input.setEmail("davsclaus@apache.org");
    input.setPhone("0045 2962 7576");

    // create the webservice client and send the request
    ReportIncidentEndpoint client = createCXFClient();
    OutputReportIncident out = client.reportIncident(input);

    // assert we got a OK back
    assertEquals("0", out.getCode());

    // let some time pass to allow Camel to pickup the file and send it as an email
    Thread.sleep(3000);
    // assert mail box
    assertEquals("Should have got 1 mail", 1, inbox.size());

    // stop camel
    camel.stop();
} 
```

}

我正在尝试将 CFX 端点与我的骆驼路由一起使用，当我将端点地址放入路由中然后对其进行单元测试时，我得到一个“找不到端点：//path/to/endpoint”。

我假设我在尝试访问端点 url 时遇到错误是问题所在，但我什至不知道从哪里开始弄清楚如何修复它。

当我在 SOAP UI 上点击我的网络服务时，它也运行良好。任何帮助将不胜感激，我可以提供任何需要的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T22:31:28.370

通常，SOAP 服务使用 POST 操作通过 HTTP 公开。您似乎正在尝试使用 GET 操作访问该服务。

我不确定您如何尝试在单元测试中调用该服务，但您需要确保它是 HTTP/POST 调用。如果您使用的是纯 HTTP，那么您可以在调用 HTTP 组件之前设置一个标头。

```
 .setHeader(Exchange.HTTP_METHOD, constant("POST")) 
```

显示您的单元测试以获得更详细的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T05:43:08.373

@grep 我认为这篇文章有点老了，但如果有类似问题的其他人能够回答，我仍然会尝试回答。好吧，我有同样的问题，想知道这些背后的原因是什么。这是我尝试并解决问题的两个步骤。确保您能够在浏览器中访问 wsdl。

1.  关闭 SOAPUI，删除 C:/users 下的 user 文件夹中创建的 soapui_workspace.xml。
2.  重新启动 Soap_ui 并打开首选项>代理设置。
3.  从自动更改为无。
4.  创建新项目。这确实解决了我的问题并从 SOAPUI 中的 web 服务获得了响应。

# reporting-services - 在 SSRS 2008 柱形图中左对齐具有固定宽度的列

> ID：14445490
> 
> 赞同：2
> 
> 时间：2013-01-21T19:06:35.477
> 
> 标签：reporting-services, charts, ssrs-2008, bar-chart

我希望这是一个简单的问题，但我已经把头撞在墙上好几个小时了。我想在 SSRS 2008 中创建一个柱形图，其列的宽度始终相同，并且列之间的空间宽度始终相同。问题是图表并不总是具有相同数量的列。

这是我在场景 1 中的 12 列：

![在此处输入图像描述](../Images/d5ee814ff901ab6bc0509629692273ac.png)

这是我在场景 2 中的 4 列：

![在此处输入图像描述](../Images/97f23c3403c01b0b7789a7b90518ed86.png)

我希望看到更像场景 3 的东西：

![在此处输入图像描述](../Images/f2acd2b828fec79a4decf7515a75baed.png)

到目前为止，这是一个非常简单的柱形图。我所做的唯一真正需要提及的修改是我在 Chart Series -> Custom Attributes 部分中将 PixelPointWidth 值设置为 20。这可确保所有列都保持相同的大小。我注意到同一部分中的 PointWidth 值用于控制列之间的间距，但它是通过使列更大/更小来适应的。当 PixelPointWidth 值大于零时，PointWidth 值无效。

请帮助我找到保持列宽度相同并保持列之间宽度相同的方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:24:13.500

操作您的数据集，使其始终为值 01 到值 12 提供行，并为度量提供空值。然后在图表的类别组属性中，使用标签属性的 Iif 函数将其设置为空字符串“”，如果度量为空（或使用另一列作为标志）。

# android - 是硬砖吗？

> ID：14445492
> 
> 赞同：-6
> 
> 时间：2013-01-21T19:06:40.740
> 
> 标签：android, bootloader, locked

我想我已经把我的设备变砖了（华为 G330，U8225-1）。当我收到“推送失败：设备上没有剩余空间”时，我正在 adb 推送。手机在恢复中启动，我已经 root，但引导加载程序被锁定。

如果我尝试将更新推送到 SDCARD/dload，它会显示“没有这样的文件或目录”，如果我尝试使用 adb shell，它会显示“exec '/system/bin/sh' failed: Permission denied (13) -”

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:10:08.040

可能不是。任何时候你在 root 手机上获得权限被拒绝时，你通常可以强制它使用“su”命令，但请确保在运行超级用户命令时格外小心！我会说你应该去 XDA 那里你可以获得特定于设备的帮助。

[http://forum.xda-developers.com/](http://forum.xda-developers.com/)

# maps - BB 10 级联地图

> ID：14445496
> 
> 赞同：2
> 
> 时间：2013-01-21T19:07:00.707
> 
> 标签：maps, blackberry-10

我一直在查看 BB10 地图的样本，但我并没有真正理解它。有没有人有链接或基本教程我如何获得默认地图以显示在设备上。没什么花哨的，只是一个简单的地图或“bb 10 maps”的链接，用于假人或其他东西。

我想调用一个简单的地图使用。所以我找到了一个看起来可以工作的简单地图视图。但是，在玩过之后，我认为我的 ide 不喜欢地图的导入线。如果我从页面上取下所有内容并只放置一个标签并注释掉导入行，则页面仅显示一个标签，一旦我添加了导入行，它就不起作用了。页面不会显示。

例如。在我的 maps.qml 页面中，如果我将 mapview 和 mapview 容器导出注释，则该页面将显示。如果我取消注释它们，它不会显示。

```
import bb.cascades 1.0
//    import bb.cascades.mapview 1.0

Page {
id: root
Container {
    layout: DockLayout {
    }
    ActivityIndicator {
        verticalAlignment: VerticalAlignment.Fill
        horizontalAlignment: HorizontalAlignment.Fill
    }
    Label {
        text: qsTr("This is where the lable is")
        textStyle.base: SystemDefaults.TextStyles.BigText
        verticalAlignment: VerticalAlignment.Center
        horizontalAlignment: HorizontalAlignment.Center
    }
    /*
    MapView {
        id: myMap
        longitude: -79.4042
        latitude: 43.6481
        altitude: 1800.0
        horizontalAlignment: HorizontalAlignment.Fill
        onCreationCompleted: {
            myMap.setRenderEngine("RenderEngine3D")
        }
    }*/
}
} 
```

有趣的是，在我的 map.qml 文件中，当我进入设计视图时，它说：
“问题领先 qml 文件：2:1 模块“bb.cascades.mapview”未安装”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T11:28:04.240

1.  使用 WebView { }
2.  从以下链接中引用示例

[https://github.com/blackberry/Cascades-Samples/tree/master/webmapview](https://github.com/blackberry/Cascades-Samples/tree/master/webmapview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T19:48:38.717

尝试： [级联样本 - Mapview](https://github.com/blackberry/Cascades-Samples/tree/master/mapview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T20:51:57.773

您必须将库从“import bb.cascades.mapview 1.0”1.0 改为“import bb.cascades.maps”

# php - 如何在php中循环之前选择json数据

> ID：14445507
> 
> 赞同：0
> 
> 时间：2013-01-21T19:07:30.157
> 
> 标签：php, jquery, ajax, codeigniter

我像这样在 PHP 中回显 JSON 数据。

```
echo json_encode($row,JSON_PRETTY_PRINT); 
```

然后我在 jquery 中使用 ajax 并执行 for 循环来循环 json 数据。

```
for(var i=0; i<data.length; i++) {
        var img = data[i].url;
} 
```

好的，现在我的问题来了。我有一个 get_thumb(parem1, param2) php 函数，我想用这个函数来获取缩略图。如何在 php 中选择 json url？像这样

已编辑

```
get_thumb($row[i]['url'], param2); 
```

# java - JSONMappingException - 无法反序列化 Java 对象

> ID：14445515
> 
> 赞同：4
> 
> 时间：2013-01-21T19:07:53.883
> 
> 标签：java, json, jackson

使用`ObjectMapper`反序列化对象时出现以下错误：

> JSONMappingException 无法构造 org.springframework.data.Page 的实例，问题：抽象类型只能通过附加类型信息进行实例化。

我正在尝试将 JSON 字符串序列化为`org.springframework.data.Page`代表页面类型的 Spring 数据对象`T`。

该类`User`是一个简单的 POJO，带有`first`和`last`名称。我反序列化的 JSON 字符串是：

```
{
    "content": [
        {
            "firstname": "John",
            "lastname": "Doe"
        },
        {
            "firstname": "Jane",
            "lastname": "Doe"
        }
    ],
    "size": 2,
    "number": 0,
    "sort": [
        {
            "direction": "DESC",
            "property": "timestamp",
            "ascending": false
        }
    ],
    "totalPages": 150,
    "numberOfElements": 100,
    "totalElements": 15000,
    "firstPage": true,
    "lastPage": false
} 
```

这会导致异常：

```
Page<User> userPage = (Page<User>) new ObjectMapper().mapToJavaObject(json, new TypeReference<Page<User>>(){}; 
```

由于`Page`是 Spring 对象，我无法修改它，我认为这与我在其他地方看到的这个问题的方式有点不同。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-17T10:15:39.963

我最终使用了类似的东西，按照@Perception 的建议创建了一个bean：

```
import java.util.ArrayList;
import java.util.List;

import org.springframework.data.domain.PageImpl;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Sort;

public class PageImplBean<T> extends PageImpl<T> {

    private static final long serialVersionUID = 1L;
    private int number;
    private int size;
    private int totalPages;
    private int numberOfElements;
    private long totalElements;
    private boolean previousPage;
    private boolean firstPage;
    private boolean nextPage;
    private boolean lastPage;
    private List<T> content;
    private Sort sort;

    public PageImplBean() {
        super(new ArrayList<T>());
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public int getSize() {
        return size;
    }

    public void setSize(int size) {
        this.size = size;
    }

    public int getTotalPages() {
        return totalPages;
    }

    public void setTotalPages(int totalPages) {
        this.totalPages = totalPages;
    }

    public int getNumberOfElements() {
        return numberOfElements;
    }

    public void setNumberOfElements(int numberOfElements) {
        this.numberOfElements = numberOfElements;
    }

    public long getTotalElements() {
        return totalElements;
    }

    public void setTotalElements(long totalElements) {
        this.totalElements = totalElements;
    }

    public boolean isPreviousPage() {
        return previousPage;
    }

    public void setPreviousPage(boolean previousPage) {
        this.previousPage = previousPage;
    }

    public boolean isFirstPage() {
        return firstPage;
    }

    public void setFirstPage(boolean firstPage) {
        this.firstPage = firstPage;
    }

    public boolean isNextPage() {
        return nextPage;
    }

    public void setNextPage(boolean nextPage) {
        this.nextPage = nextPage;
    }

    public boolean isLastPage() {
        return lastPage;
    }

    public void setLastPage(boolean lastPage) {
        this.lastPage = lastPage;
    }

    public List<T> getContent() {
        return content;
    }

    public void setContent(List<T> content) {
        this.content = content;
    }

    public Sort getSort() {
        return sort;
    }

    public void setSort(Sort sort) {
        this.sort = sort;
    }

    public PageImpl<T> pageImpl() {
        return new PageImpl<T>(getContent(), new PageRequest(getNumber(),
                getSize(), getSort()), getTotalElements());
    }
} 
```

然后修改您的代码以使用具体类并获取 PageImpl：

```
@SuppressWarnings("unchecked")
Page<User> userPage = ((PageImplBean<User>)new ObjectMapper().readValue(json, new TypeReference<PageImplBean<User>>() {})).pageImpl(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-20T18:56:02.927

你可以这样做：

```
public class YourClass {

    static class CustomPage extends PageImpl<User> {

        @JsonCreator(mode = Mode.PROPERTIES)
        public CustomPage(@JsonProperty("content") List<User> content, @JsonProperty("number") int page, @JsonProperty("size") int size, @JsonProperty("totalElements") long total) {
            super(content, new PageRequest(page, size), total);
        }

    }

    public Page<User> makeRequest(String json) {

        Page<User> pg = new ObjectMapper().readValue(json, CustomPage.class);
        return pg;

    }

} 
```

# css - @font-face 在 Firefox 中不起作用

> ID：14445516
> 
> 赞同：1
> 
> 时间：2013-01-21T19:08:01.177
> 
> 标签：css, firefox, font-face

在 Firefox 中使用**@font-face**有点麻烦。

```
@font-face{
font-family:'PopularScript';
src:url('http://static.dubrovka.dn.ua/eot/PopularScript.eot');
src:url('http://static.dubrovka.dn.ua/eot/PopularScript.eot?#iefix') format('embedded-opentype'),
    url('http://static.dubrovka.dn.ua/wof/PopularScript.woff') format('woff'),
    url('http://static.dubrovka.dn.ua/ttf/PopularScript.ttf') format('truetype'),
    url('http://static.dubrovka.dn.ua/otf/PopularScript.otf') format('opentype'),
    url('http://static.dubrovka.dn.ua/svg/PopularScript.svg#PopularScript') format('svg');
font-weight:normal;
font-style:normal;
} 
```

它适用于除 Firefox 之外的任何浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:10:39.367

为了安全起见，Firefox 不允许跨域字体加载。以下是一些解决方案：[http ://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default](http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default)

# asp.net - asp.net 动态控件值

> ID：14445518
> 
> 赞同：0
> 
> 时间：2013-01-21T19:08:16.017
> 
> 标签：asp.net, dynamic, textbox

我正在尝试创建一个投票系统，该系统将询问用户他们想从下拉列表中添加的选项数量。

然后，当用户选择一个数字时，我想为这些数字添加文本框，最后使用 asp.net 遍历文本框并将它们的值添加到数据库中。

例子：

> 1.  用户选择添加 5 个选项。
> 2.  我使用 Jquery 将 5 个输入附加到表单中。
> 3.  用户添加他们的值。
> 4.  我遍历文本框并根据这些值执行 void。

我能够完成前 3 步，但我被困在第 4 步。为了解决它，我尝试使用循环：

```
foreach (TextBox tb in form1.Controls) 
{
   Response.Write(tb.Text);
} 
```

但这会引发错误：

> 无法将“System.Web.UI.LiteralControl”类型的对象转换为“System.Web.UI.WebControls.TextBox”类型。

我如何迭代抛出文本框？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:30:12.837

任何静态内容都由 LiteralControl 表示，这就是您体验它的原因。一个真正简单的方法是使用 LINQ：

```
var ctls = form1.Controls.OfType<TextBox>();
foreach (var ctl in ctls) { .. ) 
```

或者在循环遍历控件时检查类型以确保它首先是文本框：

```
foreach (Control tb in form1.Controls) 
{
   if (tb is TextBox)
      Response.Write(((TextBox)tb).Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:37:12.933

布赖恩的回答似乎很可靠。第一眼想到的另一个选择是：

*   声明一个函数...
*   在js中声明一个简单的数组甚至是一个字符串
*   从客户端迭代您的输入
*   对于每次迭代，您应该将值保存在该数组中或连接该值。

然后可以将数组保存为某个 asp 隐藏字段中的字符串，以便执行服务器端操作。

最好的祝福。

# jquery - 根据选择更改背景图像

> ID：14445524
> 
> 赞同：0
> 
> 时间：2013-01-21T19:08:35.050
> 
> 标签：jquery, html, css

我尝试在下拉（选择）选项更改时动态更改 div 的背景。我正在使用 data-bg 属性来指定应该使用的背景。但是我不知道如何从当前选择的选项中获取属性。

当前状态：http: [//jsfiddle.net/7xYv3/](http://jsfiddle.net/7xYv3/)

我的JavaScript：

```
 $('#game-list').change(function () {
         var selectValue = $("#game-list").val();
         var gameBackground = $(selectValue).attr("data-bg");
         changeBg(gameBackground);
     });

     //change the background color based on the data-bg attribute
     function changeBg(bg) {
         $(".welcome").css('background-image', 'url("' + bg + '")');
     } 
```

另外，在一个完全不相关的注释上......关于我在哪里可以找到让图像只选择下拉菜单的信息的任何提示？我很想使用图标下拉列表而不是文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:11:46.880

```
$('#game-list').change(function () {
    changeBg( $('option:selected', this).data('bg') );
}); 
```

这是你的小提琴：http: [//jsfiddle.net/7xYv3/1/](http://jsfiddle.net/7xYv3/1/)

# jquery - 如何仅删除正确的文本输入？

> ID：14445528
> 
> 赞同：1
> 
> 时间：2013-01-21T19:08:51.710
> 
> 标签：jquery, html

当上传完成时，我在下面有一个 jquery 函数，它将文件名存储在字符串中，并将其 id 存储在文本输入中。现在在函数的底部，如果用户单击`deletevideofile`按钮，则假设删除文件名和属于该删除按钮的文本输入。但问题是，即使它只删除了正确的文件名，它也会删除所有文本输入，而不仅仅是删除正确的文本输入。

我的问题是如何仅在单击删除按钮时才删除正确的文本输入？

下面是代码：

```
function stopVideoUpload(success, videoID, videofilename){

      var result = '';
      videocounter++;

      if (success == 1){
         result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
          $('.listVideo').eq(window.lastUploadVideoIndex).append('<input type="text" name="vidid" value="' + videoID + '" />');
          $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename) + '<button type="button" class="deletefilevideo" video_file_name="' + videofilename + '">Remove</button><br/><hr/></div>');      }

  var _videocounter = videocounter;

$('.listVideo').eq(window.lastUploadVideoIndex).find(".deletefilevideo").on("click", function(event) {
    var video_file_name = $(this).attr('video_file_name');

    jQuery.ajax("deletevideo.php?videofilename=" + video_file_name)
        .done(function(data) {

        $(".videomsg" + _videocounter).html(data);
    });

       $(this).parent().siblings('input[name="vidid"]').andSelf().remove();
});

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:13:43.567

除了生成名称为“vidid”的输入框外，还为每个视频添加一个具有唯一 ID`id`的元素的属性。`<input>`

然后在您的行中更改`.siblings()`函数中的选择器`.remove()`以匹配正在生成`id`的选择器。`<input>`

这是一些示例 JavaScript。修改它以满足您的需求：

```
function stopVideoUpload(success, videoID, videofilename) {

    var result = '', _videocounter;
    videocounter++;

    if (success == 1) {
        result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
        $('.listVideo').eq(window.lastUploadVideoIndex).append('<input type="text" name="vidid" id="'+videoID+'" value="' + videoID + '" />');
        $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename) + '<button type="button" class="deletefilevideo" data-videoID="'+videoID+'"  data-video_file_name="' + videofilename + '">Remove</button><br/><hr/></div>');
    }

    _videocounter = videocounter;

    $('.listVideo').eq(window.lastUploadVideoIndex).find(".deletefilevideo").on("click", function(event) {
        jQuery.ajax("deletevideo.php?videofilename=" + $(this).attr('data-video_file_name')).done(function(data) {
            $(".videomsg" + _videocounter).html(data);
        });

        $(this).parent().siblings('#'+ $(this).attr('data-videoID')).andSelf().remove();
    });

    return true;   
} 
```

# ruby - 迭代日期范围内给定日期的项目

> ID：14445530
> 
> 赞同：2
> 
> 时间：2013-01-21T19:08:58.980
> 
> 标签：ruby, ruby-on-rails-3

我有点感觉以前有人问过这个问题，但我一直在寻找，但无法明确描述。

我有一个 Rails 应用程序，它保存在特定日期（如生日）发生的项目。现在我想创建一个视图来创建一个表（或其他东西，div 也可以），它声明一个指定的日期，然后逐个迭代相关项目。

项目有一个日期字段，当然，与单独表格中的日期或其他内容无关。

我当然可以查询数据库约 30 次（因为我想要代表一个月的项目），但我认为它看起来很难看，并且会大量重复。我希望结果看起来像这样（暂时考虑它是一个有两列的表）：

```
Jan/1 | jan1.item1.desc
      | jan1.item2.desc
      | jan1.item3.desc
Jan/2 | jan2.item1.desc
      | etc. 
```

所以我想我需要知道两件事：如何构造一个正确的查询（但可能这很简单，`Item.where("date > ? < ?", lower_bound, upper_bound))`以及如何将其转换为视图。

我还考虑过一个哈希，其中每个日期都有一个键和一个值数组，但我必须像上面那样构建（重复），我认为这不是很优雅。

与其他查询相比，使用`GROUP BY`似乎没有让我有任何不同（当然，除了项目的分组）。只是一组对象，但我可能做错了。

对不起，如果这是一个基本问题。我对该领域（和一般编程）相对较新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:15:31.470

如果您正在制作日历，您可能想要`GROUP BY`约会：

```
SELECT COUNT(*) AS instances, DATE(`date`) AS on_date FROM items GROUP BY DATE(`date`) 
```

这是假设您的列的字面意思是`date`，将其视为 SQL 保留字可能是一个坏主意。如果是这种情况，您需要在使用时将其转义，在 MySQL 表示法中使用 ```。Postgres 和其他人使用不同的方法。

对于范围内的实例，您想要的可能是`BETWEEN`运算符：

```
@items = Item.where("`date` BETWEEN ? AND ?", lower_bound, upper_bound) 
```

# html - 图像框水平对齐

> ID：14445534
> 
> 赞同：0
> 
> 时间：2013-01-21T19:09:17.340
> 
> 标签：html, css, twitter-bootstrap

如何使红色框水平对齐我为 imageBox 类提供了显示内联属性，但它不起作用

在下面提供我的代码

```
<div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div>
            <div class="imageBox"></div> 
```

[http://jsfiddle.net/VXXPC/7/](http://jsfiddle.net/VXXPC/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:43:30.440

我相信 display:inline; 功能仅适用于列表项。

让它们显示在一行中的最佳解决方案是将它们包装在一个 div 中，然后给每个盒子 div 一个 float:left;

HTML：

```
<div id="ImageBox_wrapper> 
   <div class="ImageBox></div>
   <div class="ImageBox></div>
   <div class="ImageBox></div>
   <div class="ImageBox></div>
   <div class="ImageBox></div>
   <div class="ImageBox></div>
</div> 
```

CSS：

```
.ImageBox {
border:1px solid red;
width: 30px;
height: 30px;
float: left; 
```

如果这不起作用，您可以尝试添加一个 position:relative; 到你的 .ImageBox css

```
position:relative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:13:43.323

```
.imageBox {display: inline-block;} 
```

[http://jsfiddle.net/VXXPC/13/](http://jsfiddle.net/VXXPC/13/)

# internet-explorer - 网站的一个页面仅在某些机器上拒绝在 IE9 中加载。

> ID：14445536
> 
> 赞同：3
> 
> 时间：2013-01-21T19:09:25.327
> 
> 标签：internet-explorer, internet-explorer-9

这个问题上周才开始发生，对于我的生活，我无法弄清楚为什么或是什么导致了它。只有在某些使用 Internet Explorer 9 的机器上，人们无法进入注册页面。

该网站是[http://www.sweepstakes.com](http://www.sweepstakes.com)然后尝试按 Enter 或 Enter now 按钮，它会带您进入注册表单。它适用于所有浏览器，而且很多时候在 IE9 上运行，但由于某种原因，有些机器无法使用它。他们已清除缓存/网络历史记录/启用的 cookie 等。

页面加载到的唯一错误是“Internet Explorer 无法显示网页”错误，仅此而已。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:55:39.650

当我第一次单击*Enter Now*按钮时，加载页面需要很长时间。我会尝试检查性能以防止请求超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:54:07.147

在 IE9 中按 F12 显示开发者工具并启用调试。它可能会为您指出问题所在的正确方向。未能检查您的 Web 服务器日志以查看是否显示任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:58:42.790

尝试删除此行。我在所有 IE 版本中都遇到了 DOM 元素做时髦的事情的问题。删除这条线有帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

这不应该影响网站的其他部分；我没有很好的建议为什么这样做。必须有解释；但我没有时间做研究。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T04:06:30.430

这听起来像是 IE9 配置或特定于机器的问题 - 除非在受影响的机器上单击 IE9 中的按钮*有时会*按预期生成页面（在这种情况下，我认为由于间歇性服务器性能不佳而导致的“适时”超时是可能的）。（在受影响的机器上单击非 IE9 浏览器中的按钮应该可以了解与服务器相关的超时的可能性。）

由于 IE9 中的附加组件，我遇到了类似的问题：通过禁用所有附加组件然后一个接一个地重新启用它们，我能够找到违规者并永久禁用它。

TechNet 论坛中提到的其他可能性（例如在[此线程](http://social.technet.microsoft.com/Forums/en-US/ieitprocurrentver/thread/0ebfd15a-3c18-41cb-ba0e-9c8997cdf922)中）似乎也值得一试，包括但不限于：

*   在 IE9 的删除浏览历史记录中检查“保留收藏夹网站数据”
*   在 IE9 的“管理加载项”下启用了跟踪保护
*   （“适时”）DNS（缓存）问题

# javascript - 使用 Javascript 在 vi meo.com 上与 Vimeo 播放器交互

> ID：14445537
> 
> 赞同：1
> 
> 时间：2013-01-21T19:09:27.663
> 
> 标签：javascript, video, google-chrome-extension, vimeo, froogaloop

我已经成功地使用[Froogaloop](https://github.com/vimeo/player-api/tree/master/javascript)库来监控各个站点上的嵌入式 Vimeo 视频播放器（对于[我的 Chrome 扩展程序](http://www.sidewise.info/)的一个功能）。

我想在 vimeo.com 本身上做同样的事情，但是 vimeo.com 页面上的视频播放器没有嵌入 iframe 中，所以 Froogaloop 无法与它们交互。

谁能告诉我如何获取当前播放时间并为 vimeo.com 上的（非[iframed](http://vimeo.com) ）视频连接播放/暂停事件侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:23:21.967

经过一些[进一步的研究](http://jaimonmathew.wordpress.com/2010/02/02/managing-vimeo-video-player-via-javascript/)，我想出了以下基本解决方案：

```
// Once the vimeo.com player <object> is ready:

// find vimeo player(s)
var vimeoPagePlayers = document.querySelectorAll('object[type*=flash][data*=moogaloop]');
if (vimeoPagePlayers.length == 0) {
    return;
}

// attach event listeners to player(s)
for (var i = 0; i < vimeoPagePlayers.length; i++) {
    var player = vimeoPagePlayers[i];
    // sometimes .api_addEventListener is not available immediately after
    // the <object> element is created; we do not account for this here
    player.api_addEventListener('onProgress', 'onVimeoPageProgress');
    player.api_addEventListener('onPause', 'onVimeoPagePause');
}

function onVimeoPagePause() {
    // video has been paused or has completed
}

function onVimeoPageProgress(data) {
    // video is playing
    var seconds;
    if (typeof(data) == 'number') {
        // on vimeo.com homepage, data is a number (float)
        // equal to current video position in seconds
        seconds = data;
    }
    else {
        // on vimeo.com/* pages, data is a hash
        // of values { seconds, percent, duration }
        seconds = data.seconds;
    }

    // do something with seconds value
} 
```

这可能不适用于 vimeo.com 上的 HTML5 模式视频（未经测试）。

当 vimeo.com 页面通过 DOM 操作将现有播放器替换为另一个播放器时，它也不起作用。我相信这些情况可以通过[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)之类的东西来处理。

# post - 对 Luracast Restler API 的跨域 AJAX 调用：“PUT”和“DELETE”发送“OPTIONS” - 为什么？

> ID：14445538
> 
> 赞同：0
> 
> 时间：2013-01-21T19:09:33.963
> 
> 标签：post, cross-domain, cors, put, restler

我已经安装了 Luracast 的 Restler API 框架，并且在这一切上都取得了惊人的成功，除了*跨域*发送 PUT 或 DELETE 时。以下在同一台服务器上工作正常，但是当我跨域时，Firebug 将 PUT 或 GET 显示为 OPTIONS，并且在服务器上找不到它。我很困惑如何停止发送“选项”而不是 PUT 或 DELETE。

```
$.ajax({
    url: url,
    type: 'PUT',
    data: "thename="+ $('#TheName').val(),
    success: function(xhr, status) {
        console.info(xhr);
    },
    error: function(xhr, status) {
        console.info(xhr.responseText);
    },
    complete: function(xhr, status) {
        $('#showResponse').val(xhr.responseText);
    }
}); 
```

对于某个地方的另一个线程，我已将以下内容添加到 Restler 输出中：

```
 header('Access-Control-Allow-Origin: *');
    header('Access-Control-Allow-Methods: GET, POST, DELETE, PUT, OPTIONS'); 
```

![PUT/GET/POST/DELETE 在本地主机和跨域上](../Images/9ee90c059f9111b3a4c19e5c1cc8f06d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:19:40.870

您有正确的响应标头，但您必须让服务器也使用这些标头响应 OPTIONS 请求。

这是一个跨域请求，并且受制于所谓的预检。在发出 PUT 或 DELETE 请求之前，浏览器会询问目标 Web 服务器是否可以安全地从另一个域的网页执行此操作。它要求使用 OPTIONS 方法。除非目标服务器说没问题，否则 Web 浏览器永远不会发出 PUT 或 DELETE 请求。它必须对请求进行预检，因为一旦发出 PUT 或 DELETE，就为时已晚，无法响应响应；敏感信息可能已泄露。

GET 和 POST 有点复杂，因为有时浏览器会在不先询问的情况下确定它们是安全的，而其他时候浏览器也会进行预检检查。这取决于请求中是否使用了某些标头。

[CORS 规范](http://www.w3.org/TR/cors/)有血淋淋的细节。最重要的是，除非目标 Web 服务器支持 OPTIONS 方法，否则您网页上的代码将不允许发出这些请求，并且对 OPTIONS 方法的响应包括表明允许此类请求的标头。

# java - 使用 Java 的 ArrayList lastIndexOf()

> ID：14445543
> 
> 赞同：1
> 
> 时间：2013-01-21T19:09:51.887
> 
> 标签：java, arraylist, indexof, lastindexof

为了简单起见，我有一个名为“items”的 ArrayList（它存储用户输入的字符串）和这段代码：

```
int index = items.lastIndexOf("i am");
if (index >= 0)
System.out.println("yay"); 
```

当我测试它时，如果我在开头输入“我是”，它会像应该的那样输出“耶”。但是，如果我输入“是的，我是”之类的内容，它不会输出任何内容。如果我输入“是的，我是”之类的内容，或者我是否仅限于在开始时使用它，有没有一种方法可以让我显示“耶”？

以下是我设置 ArrayList 的方法：

```
List<String> items = Arrays.asList(user.split("\\s*,\\s*")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:15:52.070

在我看来，您正在用逗号分割输入字符串（也以一种尴尬的方式）。由于`yes I am`不包含逗号，因此您的数组将只有一个元素：`["yes I am"]`. 这意味着这`lastIndexOf("i am")`将不匹配。因此，您没有看到`yay`被打印出来。

现在，关于如何使这项工作。

1.  输入`yes, i am`
2.  正如评论中建议的那样，将原始输入字符串与 `user.indexof("i am")`.

基本上，很难推荐一个解决方案，因为我不知道你的最终目标是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:14:54.697

问题是您的正则表达式没有拆分您指示的输入。例如，`i am`and`yes i am`将是列表中的单个元素。这就是为什么在第一种情况下你得到`yay`而在第二种情况下 - 不是。

如果您将用户输入更改为`yes, i am`，您将获得`yay`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:17:25.727

ArrayList的[Java Docs](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#lastIndexOf(java.lang.Object))说它测试字符串是否相等，所以“是的，我是”不起作用。

# kohana - 检测到 CloudControl Kohana 框架并推送失败。

> ID：14445546
> 
> 赞同：2
> 
> 时间：2013-01-21T19:10:02.230
> 
> 标签：kohana, buildpack, cloudcontrol

将我的应用程序部署到 CloudControl 时，我在推送代码时突然遇到意外错误。

```
remote: [1G-----> Kohana Framework detected        
remote: mkdir: cannot create directory `application/cache': No such file or directory        
remote: [1G !     cloudControl push rejected, failed to compile php app 
```

我不使用 Kohana 的典型文件夹结构。我将系统和模块文件夹放在我的应用程序文件夹之外。这使我可以保持应用程序的清洁并在 Kohana 中正常工作。

例如：

```
-doc_root
-- modules (all modules)
-- system (kohana framework only)
-- app1 (some single application)
--- application
---- classes... (and so on)
--- webroot
---- index.php 
```

因为我知道 LoadBalances 文档根系统，所以我的 doc_root 中没有任何 tmp 或缓存文件夹。这个错误似乎是新的，让我现在有点不可能推送和部署对我的应用程序的任何更改。

我真的需要更改我的文件夹布局吗？Buildpack ( [https://github.com/cloudControl/buildpack-php](https://github.com/cloudControl/buildpack-php) ) 能以某种方式检测到我的结构吗？我可以告诉 Buildpack 我的结构是什么样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:03:22.443

buildpack 目前不支持此布局。不过，您可以[手动设置文档根目录](https://github.com/cloudControl/buildpack-php/blob/master/README.md#manually-setting-the-documentroot)（在此示例中，AFAICT 的 webroot 为`/app/www/app1/webroot`）。

# visual-studio - 新构建服务器的问题

> ID：14445548
> 
> 赞同：11
> 
> 时间：2013-01-21T19:10:07.543
> 
> 标签：visual-studio, 64-bit, configuration-files, msbuild-4.0

移动我的构建服务器后，我收到以下错误：

`C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets (1682): Could not run the "GenerateResource" task because MSBuild could not create or connect to a task host with runtime "CLR2" and architecture "x64". Please ensure that (1) the requested runtime and/or architecture are available on the machine, and (2) that the required executable "MSBuildTaskHost.exe" exists and can be run.`

我的配置是这样说的：

```
<ConfigurationToBuild Include="Release|Any CPU">
    <FlavorToBuild>Release</FlavorToBuild>
    <PlatformToBuild>Any CPU</PlatformToBuild>
 </ConfigurationToBuild> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-30T07:15:03.627

要解决此问题，请转到您的`.csproj file`并使用记事本打开。

在默认属性组下添加以下行：

```
<PropertyGroup>
      <DisableOutOfProcTaskHost>true</DisableOutOfProcTaskHost>
</PropertyGroup> 
```

项目现在应该编译。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-20T21:19:07.163

就我而言，我在尝试在 32 位 Windows 7 机器上构建解决方案时收到了该错误消息。为我解决错误的方法是右键单击 VS 中的项目，选择属性，然后转到构建选项卡。在这里，我将“平台目标”从“任何 CPU”更改为“x86”。高温高压

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-20T07:29:33.393

另一种方法是执行以下操作

点击开始->>右键计算机->>属性->>高级系统设置->>点击环境变量按钮打开对话框，

然后在 System variables 部分下，单击 New... 按钮，键入 Variable name = DISABLEOUTOFPROCTASKHOST，然后键入 Variable value = 1，

然后单击确定。

这应该抑制这个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T00:01:15.113

您需要为您正在使用的 .NET 版本安装 .NET SDK。这是 .NET 3.5 的链接 [.net 3.5 SDK 在哪里？](https://stackoverflow.com/questions/844725/where-is-the-net-3-5-sdk) 这是 4.0 的链接 [http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

安装 Visual Studio 也会安装正确的 SDK，但对您来说可能不是一个好的选择。

我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-20T10:05:38.383

核心问题是 64 位可执行文件无法加载 32 位 dll，反之亦然。

“自动”的意思是。NET 程序集将在运行时在平台之间切换，具体取决于当前运行的机器上的平台。

**因此，使用“自动”编译的 .NET 程序集加载 32 位 dll 是一个等待发生的问题，这就是这个错误的全部内容。**

要更正它，*如果您不使用任何本机 dll*，请转到每个托管项目的项目属性，并将“目标 CPU”设置为与所有可用平台当前选择的“平台”相同。

如果您使用的是本机 dll，则必须定义 2 个构建配置，一个用于 32 位，一个用于 64 位，链接（参考）正确版本的 dll 并根据目标计算机平台进行安装。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-24T15:50:30.373

我通过以管理员身份打开 VS2010 解决了这个问题。

# c# - 如何解决 OleDb 错误“FROM 子句中的语法错误”？

> ID：14445561
> 
> 赞同：1
> 
> 时间：2013-01-21T19:10:50.127
> 
> 标签：c#, sql, oledb

目前我正在尝试使用此功能导入 CSV 文件：

```
 public DataSet ImportCommaSeparatedValueFileToDataSet(string SourceFile)
    {
        var dsImportCSVtoDataSetReturn = new DataSet();

        using (var objAdapter1 = new OleDbDataAdapter())
        {
            String sConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + SourceFile.Substring(0, SourceFile.LastIndexOf(@"\")) + ";Extended Properties='text;HDR=Yes;FMT=Delimited'";
            var objConnection = new OleDbConnection(sConnectionString);
            objConnection.Open();
            var objCmdSelect = new OleDbCommand("SELECT * FROM " + SourceFile, objConnection);

            objAdapter1.SelectCommand = objCmdSelect;
            objAdapter1.Fill(dsImportCSVtoDataSetReturn);
            objConnection.Close();
        }

        return dsImportCSVtoDataSetReturn;
    } 
```

当我尝试导入文件名中没有空格的文件时，它工作正常。当我尝试导入以下文件时：

```
D:\Workspace\WoldCard export.csv 
```

然后我收到以下异常：

```
excException = {"Syntax error in FROM clause."}

Source = "Microsoft JET Database Engine"

StackTrace  "   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)\r\n   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)\r\n   at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)\r\n   at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)\r\n   at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)\r\n   at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)\r\n   at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)\r\n   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)\r\n   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)\r\n   at CommonObjects4.clsUtilityOffice.ImportCommaSeparatedValueFileToDataSet(String SourceFile) in D:\\DevProjects\\CommonObjects4\\classes\\clsUtilityOffice.cs:line 262" string 
```

因此，问题似乎很明显，问题在于 SQL 子句中的文件名中有空格；但是，当我尝试使用单引号来解决问题时：

```
var objCmdSelect = new OleDbCommand("SELECT * FROM '" + SourceFile + "'", objConnection); 
```

然后我收到这个异常：

```
excException = {"''D:\Workspace\WoldCard export.csv'' is not a valid name.  Make sure that it does not include invalid characters or punctuation and that it is not too long."} 
```

另外，当我尝试使用参数时：

```
var objCmdSelect = new OleDbCommand("SELECT * FROM @SourceFile", objConnection);
objCmdSelect.Parameters.Add("@SourceFile", SqlDbType.NVarChar).Value = SourceFile; 
```

然后我收到这个异常：

```
excException = {"Syntax error in query.  Incomplete query clause."} 
```

另外，我后来从[http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/1c399bf7-a6b3-47bb-8897-d4247b4938f0](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/1c399bf7-a6b3-47bb-8897-d4247b4938f0)了解到表名不能是参数。有没有人有什么建议？TIA。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T20:27:45.933

Thank you for the feedback, DJ KRAZE, it helped me to get thinking about the problem in different ways. It turns out that I simply had to add square brackets around the table name if it has spaces in the name, though it had to be only the file name and not the full path:

```
var objCmdSelect = new OleDbCommand("SELECT * FROM [" + SourceFile.Substring(SourceFile.LastIndexOf(@"\") + 1, SourceFile.Length - SourceFile.LastIndexOf(@"\") - 1) + "]", objConnection); 
```

See [[] brackets in sql statements](https://stackoverflow.com/questions/153861/brackets-in-sql-statements) for more details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:19:13.233

Roger try changing your connection string to look something like this

```
string fileName = SourceFile;   
string sConnectionString = string.Format(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source={0}; " + "Extended Properties=\"text;HDR=YES;FMT=TabDelimited;\"", fileName); 
```

for the file path and name D:\Workspace\WoldCard export.csv

you can do one of 2 things add an UnderScore in the file name

`D:\Workspace\WoldCard_export.csv` or add double quotes around the file name

`@"D:\Workspace\" + "WoldCard export.csv";` look also at the `Path.Combine Method` too

when you are trying to add Parameters look at using

`Parameters.AddWithValues(@paramname, paramvalue)` method as well

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T08:19:12.143

You have to use [] brackets. File names or table names with spaces, dashes (-), reserved words, etc... are not ok, to use them in square brackets.

More info: See: [https://msdn.microsoft.com/en-us/library/ms175874.aspx](https://msdn.microsoft.com/en-us/library/ms175874.aspx)

# grails - 将选定的 jqGrid 行传递给带有操作的按钮

> ID：14445563
> 
> 赞同：0
> 
> 时间：2013-01-21T19:10:54.300
> 
> 标签：grails, jqgrid, controller

我对此有一个grails视图

```
<script type="text/javascript">
    /* when the page has finished loading.. execute the follow */
    $(document).ready(function () {
        jQuery("#customer_list").jqGrid({
          url:'jq_customer_list',
          datatype: "json",
          colNames:['customer','location','id'],
          colModel:[
            {name:'customer'},
            {name:'location',stype:'select', searchoptions:{value:':All;USA:USA;Canada:Canada;Carribean:Carribean;USPacific:USPacific;'}},
            {name:'id', hidden:true}
          ],
          rowNum:2,
          rowList:[1,2,3,4],
          pager: jQuery('#customer_list_pager'),
          viewrecords: true,
          gridview: true,
          multiselect: true
        });
        $("#customer_list").jqGrid('filterToolbar',{autosearch:true});
    });
    </script>
<g:link controller="MyController" action="downloadFile">Download</g:link><br>
  </div>
<br/><br/> 
```

现在我想将所选行中的数据传递给此操作。但是，我在任何地方都找不到这个。

我的控制器上的方法目前是空白的。我只想将所选值的所有 ID 打印到控制台。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:15:29.917

这应该这样做。

```
onSelectRow: function(rowid, iRow, iCol, e){
    console.log('Id of Selected Row: ' + $(this).jqGrid('getCell', rowid, 'id'));
} 
```

# jsp - 从 https 到 http 的 Java 响应重定向

> ID：14445566
> 
> 赞同：0
> 
> 时间：2013-01-21T19:11:10.610
> 
> 标签：jsp, redirect

嗨，我有一个小问题。

我有一个网站，其中我正在使用一些支付网关。

付款后，支付网关以 URL 保持不变的方式将我返回到我的网站。所以我看到了我网站的内容，但我看到了支付网关的 url。[这是如何实现的？]

其次，当我在这个jsp中看到我的网站（这是我的jsp）的内容时，我正在做一个重定向，它将我重定向到目标页面，但是即使我写了完整的url http，地址栏中的url也没有更新://

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:39:17.690

支付网关必须使用框架或 iframe，并将唯一可见框架的 URL 设置为您的网站 URL。所以主页是支付网关的页面，这个页面只包含一个框架或 iframe 来加载你的网站。

# mysql - MySQL 和 Matlab - 替换一整列数据

> ID：14445568
> 
> 赞同：2
> 
> 时间：2013-01-21T19:11:16.443
> 
> 标签：mysql, database, matlab

我正在开发一个程序，它从 MySQL 的数据库中获取一些数据，更改一些数字，然后用新的东西覆盖 MySQL 上的旧数据。（具体来说，我输入的数据是天气预报模型的输出）。我正在努力的是能够用编辑后的数据替换数据库中的旧数据。

在我的程序中，新数据（太阳辐射值）是矩阵 WxData 第 3 列中的一列数字（因此可以使用 WxData(:,3) 访问它）。

在 MySQL 数据库中，我要更改的值位于表“wrf”中标题为“radiation”的列下。“dbConn”是数据库连接的名称。

我尝试了类似的东西

```
 update(dbConn, 'wrf', {'radiation'}, WxData(:,3), 'WHERE radiation > -1') 
```

Matlab 中数据库工具箱中的更新功能需要输入 where 子句，所以我只输入了始终正确的内容。但是这种方法似乎不起作用......它最终将数据库表中的每个辐射值都更改为相同的数字（可能是 WxData(1,3) 处的值）。

我尝试了其他几种方法，但没有任何效果。如何用新列替换数据库中的整列辐射值？看起来应该很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:08:03.250

SQL 不考虑列或向量。因此，您的方法根本无法工作，这不是语法问题。

如果你想这样做，你可以为 SQL 中的行分配 ID，将它们也导入 matlab，然后将 ID 放在 where 子句中并为每一行运行它。

# c - ansi-c - 在结构中分配数组值

> ID：14445570
> 
> 赞同：-4
> 
> 时间：2013-01-21T19:11:21.963
> 
> 标签：c, arrays, structure

我需要帮助将值分配给结构中的数组。非常感谢您的帮助：

```
typedef struct _temp_t {
     int16_t _values[4];
} TEMP_T;

void func() {
    TEMP_T *temps;
    int x = 5;

    temps._values[0] = x;
} 
```

我收到一个错误：

```
 ...src/rodm/ucdCom.c:512: error: request for member '_values' in something not a structure or union 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:12:57.020

> ```
> TEMP_T *temps; 
> ```

`*`从该行删除。那么它将是一个真正的`TEMP_T`对象而不是一个指针。

或者，`malloc`对 temps 进行一些记忆，然后使用：

```
temps->_values[0] = x; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T19:13:13.777

```
TEMP_T *temps; 
```

`temps`是一个指针，所以它没有成员，只有`struct`s 和`union`s 有成员。

为 分配内存后`temps`，您可以设置

```
temps->_values[0] = x; 
```

或者您可以声明`temps`为`TEMP_T`,

```
TEMP_T temps; 
```

并保持其余代码不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T20:13:44.537

OP 在任何地方都没有任何分配的迹象`struct TEMPT_T`。

他有一个指针，但没有什么可以指向的。然后，他的代码尝试使用成员访问语法 () 进行赋值`temps._values[0];`，而不是指针访问语法 ( `temps->_values[0];`)。

他的代码稍微好一点的版本可能如下所示：

```
typedef struct _temp_t {
    int16_t _values[4];
} TEMP_T;

void func(struct TEMPT_T in) {
    TEMP_T *temps = &in;
    int x = 5;

    temps->_values[0] = x;
} 
```

函数的新定义意味着 a`struct TEMP_T`必须存在才能使用它，因此对结构的指针访问变得合法。

# python - 在 Python 中创建和执行 tcsh 脚本

> ID：14445577
> 
> 赞同：1
> 
> 时间：2013-01-21T19:11:47.570
> 
> 标签：python, shell, scripting, vi, csh

我正在尝试从 python 构造和执行一个 csh 脚本。

我生成的代码看起来像一个正确的脚本，并返回“0”，但*除非*我使用 vim 手动进入并重新保存，否则`os.system("my_script.csh")`脚本不会在其中执行任务（手动更改脚本中的任何内容 -我什至没有进入“插入”模式）。在我的代码中没有在 vim 中重新保存是什么，有可能做到吗？

 *这是我的代码的相关部分：

```
grabmeName = '%sgrabme%s.csh'%(dirNames['grabmes'],uniqID)
if not os.path.exists(grabmeName):
    open(grabmeName,'w').close()
    os.chmod(grabmeName,0777)
    with open(grabmeName,'a') as f:
        f.write("#!/bin/csh -f\n")
        f.write("echo 'hello'")
    os.system(grabmeName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:01:37.177

主要问题是 shell 中的每一行都需要以 a 结尾`\n`才能执行，即使是最后一行。您可以添加`\n`到`"echo 'hello'"`字符串的末尾。这可以说是 中的一个错误`csh`，因为`bash`和朋友没有这个问题，但如果你想使用`csh`，你必须适应它。

当您在 vim 中保存文本文件时，如果文件没有开头，它会在文件中添加一个尾随换行符。您可以通过预先保存文件的副本并运行`diff`以查看 vim 的更改来验证这一点：

```
$ cat blah-grabme-12.csh 
#!/bin/csh -f
echo 'hello'$ cp blah-grabme-12.csh blah-grabme-12.csh.orig
$ vim blah-grabme-12.csh
┌────────────────────────────────────────────────────────────────────────────────┐
│#!/bin/csh -f                                                                   │
│echo 'hello'                                                                    │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│~                                                                               │
│:wq❚                                                                            │
└────────────────────────────────────────────────────────────────────────────────┘
$ diff -u blah-grabme-12.csh.orig blah-grabme-12.csh.orig
--- blah-grabme-12.csh.orig
+++ blah-grabme-12.csh
@@ -1,2 +1,2 @@
 #!/bin/csh -f
-echo 'hello'
\ No newline at end of file
+echo 'hello' 
```

`~/.vimrc`如果你愿意，你可以在你的 vim 中关闭这种行为。请参阅[`:help 'eol'`](http://vimdoc.sourceforge.net/htmldoc/options.html#'eol')vim 帮助。

另一个潜在的问题是，只有在 是非裸路径（即其中有一个）或者如果是在系统中时，它`system(filename)`才会起作用。`filename``/``.``$PATH`

此外，通过使用[`os.open()`](http://docs.python.org/2/library/os.html#os.open)而不是`open()`，您可以在文件创建时设置文件权限。在这里它可能没有太大区别，但在许多情况下，创建文件然后更改其权限会导致[安全漏洞](http://seclists.org/bugtraq/2005/Apr/134)。[这个stackoverflow问题](https://stackoverflow.com/questions/5624359/write-file-with-specific-permissions-in-python)展示了如何做到这一点。

* * *

把它们放在一起，你会得到这样的东西：

```
import os
import os.path

grabmeName = 'blah-grabme-12.csh'

with os.fdopen(os.open(grabmeName, os.O_WRONLY | os.O_CREAT, 0700), 'w') as f:
    f.write("#!/bin/csh -f\n")
    f.write("echo 'hello'\n")
os.system(os.path.abspath(grabmeName)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:18:50.957

您应该结帐[子流程](http://docs.python.org/2/library/subprocess.html#replacing-bin-sh-shell-backquote)，它显示了许多示例。

```
output=`mycmd myarg`
# becomes
output = check_output(["mycmd", "myarg"]) 
```

因为您想捕获命令的输出而不仅仅是返回状态。*

# android - Android - 解析 Html 代码的文本并且不解析属性中的引号

> ID：14445578
> 
> 赞同：0
> 
> 时间：2013-01-21T19:11:51.630
> 
> 标签：android, html, webview, html-parsing, image

我想将以下代码解析为 html 代码并显示在`WebView`. 这工作正常，但是...

要解析的代码：

```
<img src="http://...jpeg" alt="„Indoor Maps“ von Google" align="left" style="padding-right:5px">\n\n\nEinfachere Navigation in Gebäuden verspricht Indoor Maps von Google. Der Praxis-Test von COMPUTER BILD im Hamburger „Alsterhaus“ verlief aber kurios.<br>Foto: ComputerBILD<br> 
```

尝试 1) `Html.toHtml(Code)`- 文本的变音符号和引号被解析得很好并且 img-tag 仍然有效（引号）。但是删除了一些 img 属性，例如`alt`和`align`。结果：

```
<p><img src="http://...jpeg"> Einfachere Navigation in Geb&#228;uden verspricht Indoor Maps von Google. Der Praxis-Test von COMPUTER BILD im Hamburger &#8222;Alsterhaus&#8220; verlief aber kurios.<br>\nFoto: ComputerBILD<br>\n</p>\n 
```

尝试 2) `external library: org.apache.commons.lang3.StringEscapeUtils.escapeHtml4(Code)`- 解析的所有变音符号和引号。img-tag 因解析引号而损坏。现在我无法在`WebView`. 未删除的 img-tags。结果：

```
&lt;img src=&quot;http://...jpeg&quot; alt=&quot;&bdquo;Indoor Maps&ldquo; von Google&quot; align=&quot;left&quot; style=&quot;padding-right:5px&quot;&gt;\n\n\nEinfachere Navigation in Geb&auml;uden verspricht Indoor Maps von Google. Der Praxis-Test von COMPUTER BILD im Hamburger &bdquo;Alsterhaus&ldquo; verlief aber kurios.&lt;br&gt;Foto: ComputerBILD&lt;br&gt; 
```

我知道这个类别的帖子很多，但是我找不到解析html代码的帮助，也不要“触摸”属性的引号。我卡住了。

**编辑**

这是完整的 HTML 代码

```
 StringBuilder html = new StringBuilder();
    html.append("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">");
    html.append("<html>");
    html.append("<head>");
    html.append("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">");
    html.append("<title></title>");
    html.append("</head>");
    html.append("<body bgcolor=\"white\" leftmargin=\"0\" topmargin=\"0\">");       
    html.append(CODE AT THE TOP);
    html.append("</body>");
    html.append("</html>"); 
```

当我使用 UTF-8 时，我得到了相同的结果......

```
webView.loadData(html.toString(), "text/html", "iso-8859-1"); 
```

@Christiaan：这是当前结果，当我将未解析的代码设置为`WebView`

![](../Images/41812e8c408ce7d474b670109b8fbce5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:30:49.767

啊，现在它看起来像一个编码问题。尝试在您的源代码、html 和要插入的此代码段中使用 UTF-8。

如：

```
html.append("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">"); 
```

和

```
webView.loadData(html.toString(), "text/html", "UTF-8"); 
```

确保“顶部代码”也是 UTF-8 格式。

确保您的源代码也是 UTF-8（在您的 ide 中搜索 Encoding）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:19:26.787

您确定要使用 toHtml 吗？看起来你已经有了 html，你应该使用 Html.fromHtml() 甚至什么都不用。只是保持字符串原样并将其显示在 WebView 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:03:29.093

我找到了这篇文章，现在它可以工作了:) [Android。WebView 和 loadData](https://stackoverflow.com/questions/3961589/android-webview-and-loaddata)

* * *

```
myWebView.loadData(myHtmlString, "text/html; charset=UTF-8", null); 
```

这可以完美运行，尤其是在 Android 4.0 上，它显然忽略了 HTML 中的字符编码。在 2.3 和 4.0.3 上测试。

# java - 可滚动复合 - 自动调整大小 - swt

> ID：14445580
> 
> 赞同：5
> 
> 时间：2013-01-21T19:12:19.893
> 
> 标签：java, swt, eclipse-rcp, jface

我有一个使用可滚动组合的应用程序窗口。

在可滚动组合内，我们可以有 N 个组合（相应的数据库数据）。

我如何检测儿童复合材料的尺寸以设置正确的高度？

```
/**
 * Create contents of the application window.
 * @param parent
 */
@Override
protected Control createContents(Composite parent) {

    final ScrolledComposite sc = new ScrolledComposite(parent, SWT.V_SCROLL | SWT.BORDER);
    final Composite containerEditarAtendimento = new Composite(sc, SWT.BORDER);
    containerEditarAtendimento.setSize(800, 630);
    sc.setContent(containerEditarAtendimento);
    sc.setExpandHorizontal(true);
    sc.setExpandVertical(true);
    sc.setMinSize(containerEditarAtendimento.computeSize(820, 480));
    GridLayout gridLayout = new GridLayout(1, false);
    gridLayout.marginTop = 5;
    gridLayout.marginRight = 5;
    gridLayout.marginBottom = 5;
    gridLayout.marginLeft = 5;  
    containerEditarAtendimento.setLayout(gridLayout);
    { // Composite com as informações de atendimento.
        EditarAtendimentoComposite editarAtendimentoComposite = new EditarAtendimentoComposite(containerEditarAtendimento, SWT.BORDER);
        GridData gd_editarAtendimentoComposite = new GridData(GridData.FILL, GridData.FILL, true, false);
        gd_editarAtendimentoComposite.heightHint = 249;
        editarAtendimentoComposite.setLayoutData(gd_editarAtendimentoComposite);
    }
    {
        Composite compoExterno = formToolkit.createComposite(containerEditarAtendimento, SWT.BORDER);
        compoExterno.setLayout(new GridLayout(3, false));
        GridData gd_compoExterno = new GridData(SWT.FILL, SWT.TOP, true, false, 1, 1);
        gd_compoExterno.heightHint = 153;
        compoExterno.setLayoutData(gd_compoExterno);

        formToolkit.paintBordersFor(compoExterno);
        {
            Label lblAnexos = formToolkit.createLabel(compoExterno, getLabel("label.anexos"), SWT.NONE);
        }
        new Label(compoExterno, SWT.NONE);
        {
            Button btnAddAnexo = formToolkit.createButton(compoExterno, getLabel("label.incluiranexo"), SWT.NONE);
            btnAddAnexo.setLayoutData(new GridData(SWT.RIGHT, SWT.CENTER, false, false, 1, 1));
        }
        { // Composite com os anexos
            AnexosComposite anexosComposite = new AnexosComposite(compoExterno,SWT.BORDER);
            GridData gd_anexosComposite = new GridData(SWT.FILL, SWT.TOP, true, false, 3, 1);
            gd_anexosComposite.heightHint = 107;
            anexosComposite.setLayoutData(gd_anexosComposite);

        }

    }
    {   // Composite onde ficará o expandable do diagnostico
        PlanoAcaoExternoComposite planoAcaoComposite = new PlanoAcaoExternoComposite(containerEditarAtendimento, SWT.BORDER);
        GridData gd_planoAcaoComposite = new GridData(GridData.FILL, GridData.FILL, true, false);
        planoAcaoComposite.setLayoutData(gd_planoAcaoComposite);
        formToolkit.adapt(planoAcaoComposite);
        formToolkit.paintBordersFor(planoAcaoComposite);
        planoAcaoComposite.layout(true, true);
        log.info("Height: {}",planoAcaoComposite.getClientArea().height);
        log.info("getSize().x: {}",planoAcaoComposite.getSize().x);
        log.info("getSize().y: {}",planoAcaoComposite.getSize().y);
        sc.setMinSize(containerEditarAtendimento.computeSize(800, 2000)); // HOW TO DYNAMICALLY SET HEIGHT?
    }
    sc.layout(true,true);
    return containerEditarAtendimento;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T19:28:07.967

以下代码将根据内容进行`ScrolledComposite`设置，`minSize`并在减小大小时显示滚动条`Shell`：

```
ScrolledComposite sc = new ScrolledComposite(content, SWT.H_SCROLL | SWT.V_SCROLL | SWT.BORDER);

Composite composite = new Composite(sc, SWT.NONE);
composite.setLayout(new FillLayout(SWT.VERTICAL));

new Label(composite, SWT.NONE).setText("1111");
new Label(composite, SWT.NONE).setText("2222");
new Label(composite, SWT.NONE).setText("3333");
new Label(composite, SWT.NONE).setText("4444");
new Label(composite, SWT.NONE).setText("5555");
new Label(composite, SWT.NONE).setText("6666");
new Label(composite, SWT.NONE).setText("7777");

sc.setContent(composite);
sc.setExpandHorizontal(true);
sc.setExpandVertical(true);
sc.setMinSize(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T20:48:27.137

滚动窗口的内容需要存在，并将grabExxcessHorizo​​ntalspace 和vertical 设置为“true”。

```
 public class SWT_Composite_scroll_test {

    private static Display display;
    private Font font;
    public static FontData[] fontdata, tmp;
    public static FontData fd;
    public String name;
    public static String fontname;
    public String DIALOG;
    public String DIALOGINPUT;
    public String MONOSPACED;
    public String SERIF;
    public String SANS_SERIF;
    public String LUCIDIA;
    public int size, data, style, Plain=0, Bold=1, Italic=2;
    Object[] font_objects;
    String[] font_names, styletype = {"Normal","Bold","Italic"};
    SWT_Composite_scroll_test(){}

    public static void main(String args[]){
            display = new Display();
            tmp = new FontData[Display.getDefault().getFontList(null, false).length];
            for(int j=0;j<tmp.length;j++){ tmp[j] = Display.getDefault().getFontList(null, false)[j];}
            System.out.println("System fonts loaded.");
            SWT_Composite_scroll_test  c = new SWT_Composite_scroll_test ();
            c.getFonts();

    }

private void getFonts(){

        final Shell fontdialog = new Shell(display,SWT.BORDER|SWT.PRIMARY_MODAL|SWT.RESIZE|SWT.CLOSE);
                            fontdialog.setText(Parent.getResourceString("Set fonts for system. "));
                            /* Create 3 unevenly columns in dialog*/
                            fontdialog.setLayout(new GridLayout(3,false));
                    Label label = new Label(fontdialog,SWT.FILL);
                            /* set label 3 columns wide, grab all horizontal space, but vertical just one row.*/
                            label.setLayoutData(new GridData(SWT.FILL,SWT.FILL,true,false,3,1));
                            label.setText("Dit is een text.");

            final Composite tablecontainer = new Composite(fontdialog,SWT.BORDER|SWT.V_SCROLL|SWT.H_SCROLL);
                    /* Design tablecontainer layout, no spacing to prevent white spots when content is scrolled.*/
                    GridLayout gl = new GridLayout();
                    gl.marginLeft = 0;
                    gl.marginHeight = 0;
                    gl.marginBottom = 0;
                    gl.marginRight = 0;
                    gl.verticalSpacing = 0;
                    gl.horizontalSpacing = 0;
                    tablecontainer.setLayout(gl);
                    /* Completely fill and grab all vertical space for content, one column and one row.*/
                    final GridData tblgd = new GridData(SWT.FILL,SWT.FILL,true,true,1,1);
                    tablecontainer.setLayoutData(tblgd);

                    final Composite tableheader = new Composite(tablecontainer,SWT.FILL|SWT.INHERIT_DEFAULT);
                            tableheader.setFont(Configuration.default_font);
                            RowLayout rlb = new RowLayout();
                            rlb.pack = false;//<-------------(all elements are the same size).
                            rlb.justify = true;// <------- (elements are spread across the available space).
                            tableheader.setLayout(rlb);
                            tableheader.setLayoutData(new GridData(SWT.FILL,SWT.FILL,false,false));
                        final Label subjectcolumn = new Label(tableheader,SWT.FILL|SWT.LEFT|SWT.INHERIT_DEFAULT);
                                    subjectcolumn.setText(Parent.getResourceString("Subject name"));
                        final Label namecolumn = new Label(tableheader,SWT.FILL|SWT.CENTER|SWT.INHERIT_DEFAULT);
                                    namecolumn.setText(Parent.getResourceString("Font name"));  
                        final Label stylecolumn = new Label(tableheader,SWT.FILL|SWT.CENTER|SWT.INHERIT_DEFAULT);
                                    stylecolumn.setText(Parent.getResourceString("Font style"));
                        final Label sizecolumn = new Label(tableheader,SWT.FILL|SWT.CENTER|SWT.INHERIT_DEFAULT);
                                    sizecolumn.setText(Parent.getResourceString("Font size"));

                    final Composite table = new Composite(tablecontainer,SWT.INHERIT_DEFAULT);
                                    RowLayout tbfl = new RowLayout();
                                    tbfl.type = SWT.VERTICAL;
                                    table.setLayout(tbfl);  
                                    table.setFont(Configuration.default_font);  
                                    final GridData tbge = new GridData(SWT.FILL,SWT.FILL,false,false);
                                    table.setLayoutData(tbge);

                                    Group testgroup = new Group(table, SWT.FILL);
                                    testgroup.setLayout(new GridLayout());
                                    new Label(testgroup,SWT.INHERIT_DEFAULT).setText("This is a test label in side the scrolled content.");
                                    new Label(testgroup,SWT.INHERIT_DEFAULT).setText("This is a test label in side the scrolled content.");
                                    Button resize = new Button(testgroup, SWT.PUSH);
                                    resize.setText("Rezise bigger");
                                    resize.addSelectionListener(new SelectionAdapter() {
                                                @Override
                                                public void widgetSelected(SelectionEvent e) {                  
                                                        tablecontainer.setSize(tablecontainer.getSize().x<<1,tablecontainer.getSize().y<<1); /* resize scrolled composite setting data height x 2;*/
                                                        tablecontainer.layout();
                                                      }
                                                    }); 
                                    Button resizeS = new Button(testgroup, SWT.PUSH);
                                    resizeS.setText("Rezise smaller");
                                    resizeS.addSelectionListener(new SelectionAdapter() {
                                                @Override
                                                public void widgetSelected(SelectionEvent e) {                  
                                                        tablecontainer.setSize(tablecontainer.getSize().x>>1,tablecontainer.getSize().y>>1); /* resize scrolled composite setting data height x 2;*/
                                                        tablecontainer.layout();
                                                      }
                                                    }); 
                        for(int i=0;i<tmp.length;i++){  
                            Composite tablerow = new Composite(table,SWT.FILL);                         
                                            RowLayout rlc = new RowLayout();
                                            rlc.center = true;
                                            rlc.fill = true;
                                            rlc.pack = false;//<-------------(all elements are the same size).
                                            rlc.wrap = false;// <------- (clips if not enough space). [ This one makes content invisible when out of sight. ]
                                            rlc.marginLeft = 1;
                                            rlc.marginHeight = 1;
                                            rlc.marginBottom = 1;
                                            rlc.marginRight = 1;
                                            rlc.marginWidth = 1;
                                            rlc.spacing = 1;
                                            tablerow.setLayout(rlc);
                                            new Label(tablerow, SWT.INHERIT_DEFAULT).setText(tmp[i].getName());
                    System.out.println(tableheader.getBounds().width+"2: vPage:"+table.getSize().y+" vSelection:"+tablecontainer.getClientArea().y);
                                            final Combo fontcombo = new Combo(tablerow, SWT.RIGHT);                         
                                                fontcombo.setForeground(display.getSystemColor(SWT.COLOR_WHITE));
                                                fontcombo.setBackground(display.getSystemColor(SWT.COLOR_RED));
                    for(int j=0;j<tmp.length;j++){fontcombo.add(""+tmp[j].getName());}
                                                fontcombo.addSelectionListener(new SelectionListener() {
                                                    public void widgetSelected(SelectionEvent e) {
                                                        fd = Display.getDefault().getFontList(null, true)[fontcombo.getSelectionIndex()];       
                                                        }
                                                    @Override
                                                    public void widgetDefaultSelected(SelectionEvent e) {}
                                                    });
                                            final Combo stylecombo = new Combo (tablerow, SWT.INHERIT_DEFAULT);
                                                for(int j=0;j<styletype.length;j++){stylecombo.add(styletype[j]);}
                                                stylecombo.addSelectionListener(new SelectionListener() {
                                                    public void widgetSelected(SelectionEvent e) {
                                                        style = stylecombo.getSelectionIndex();       
                                                        }
                                                    @Override
                                                    public void widgetDefaultSelected(SelectionEvent e) {}
                                                    }); 
                                            final Combo sizecombo = new Combo(tablerow,SWT.RIGHT|SWT.INHERIT_DEFAULT);
                                                for(int j=0;j<28;j++){sizecombo.add(""+j);}
                                                sizecombo.addSelectionListener(new SelectionListener() {
                                                    public void widgetSelected(SelectionEvent e) {
                                                        size = sizecombo.getSelectionIndex();       
                                                        }
                                                    @Override
                                                    public void widgetDefaultSelected(SelectionEvent e) {}
                                                    }); 
                                            }
                final ScrollBar vBar = tablecontainer.getVerticalBar();
                final ScrollBar hBar = tablecontainer.getHorizontalBar();
                        vBar.addListener(SWT.Selection, new Listener() {
                            @Override
                            public void handleEvent(Event e) {
                                int contentY = table.getSize().y - tableheader.getSize().y;     // total height of the page. [ table ]
                                int windowY = tablecontainer.getSize().y - tableheader.getSize().y;// total height of the window [ tablecontainer ]. 
                                int locationY = vBar.getSelection() - tableheader.getSize().y;  // point where table is in window. 0 = top.
                                int vPageEnd = contentY - windowY;
                                if(locationY >= vPageEnd){ locationY = vPageEnd ;}
                                table.setLocation(5, - locationY);                              // 5 is left margin. 
                                }
                            });
                        hBar.addListener(SWT.Selection, new Listener() {
                            @Override
                            public void handleEvent(Event e) {      
                                /* Horizontal scrolbar.*/
                                int contentX = table.getSize().x - vBar.getSize().x;                                // total height of the page. [ table ]
                                int windowX = tablecontainer.getSize().x - vBar.getSize().x;                        // total height of the window [ tablecontainer ]. 
                                int locationX = hBar.getSelection();                            // point where table is in window. 0 = top.
                                int hPageEnd = contentX - windowX;
                                if(locationX >= hPageEnd){ locationX = hPageEnd ;}
                                table.setLocation(-locationX+5, tableheader.getSize().y);                               // 5 is left margin. 
                                }
                            });
                        tablecontainer.addListener(SWT.Resize, new Listener() {
                            @Override
                            public void handleEvent(Event e) {  
                                int contentY = table.getSize().y - tableheader.getSize().y-9;                                       // total height of the page. [ table ]
                                int contentX = table.getSize().x - vBar.getSize().x;
                                int windowY = tablecontainer.getSize().y - tableheader.getSize().y-9;   // total height of the window [ tablecontainer ]. 
                                int windowX = tablecontainer.getSize().x - vBar.getSize().x;
                                int locationY = vBar.getSelection() - tableheader.getSize().y;              // point where table is in window. 0 = top.
                                int locationX = hBar.getSelection();
                                int vPageEnd = contentY - windowY;
                                int hPageEnd = contentX - windowX;
                                vBar.setMaximum(contentY);
                                hBar.setMaximum(contentX);
                                if(vPageEnd>contentY){vBar.setThumb(vPageEnd - windowY);}else{vBar.setThumb(windowY);}
                                if(hPageEnd>contentX){hBar.setThumb(hPageEnd - windowX);}else{hBar.setThumb(windowX);}
                                if(locationY >= vPageEnd) {locationY = vPageEnd;}   
                                if(locationX >= hPageEnd) {locationX = hPageEnd;}
                                if(e.widget.equals(vBar)){table.setLocation(5,-locationY);}
                                else {table.setLocation(-locationX,tableheader.getSize().y);}
                                }
                            });
                        fontdialog.addListener(SWT.Resize, new Listener() {
                            @Override
                            public void handleEvent(Event e) {  

                                }
                            });     
                Button save = new Button(fontdialog, SWT.PUSH);
                save.setText(Parent.getResourceString("Save new settings"));
                save.addSelectionListener(new SelectionAdapter() {
                        public void widgetSelected(SelectionEvent e) {
                            }
                        });             
                new Label(fontdialog, SWT.SHADOW_OUT); /* Filler */
                Button ok = new Button(fontdialog, SWT.PUSH);
                ok.setText(Parent.getResourceString("Done"));
                fontdialog.setDefaultButton(ok);
                ok.addSelectionListener(new SelectionAdapter() {
                            @Override
                            public void widgetSelected(SelectionEvent e) {                  
                                    fontdialog.dispose();
                                  }
                                }); 
            fontdialog.pack();  
            fontdialog.setSize(display.getClientArea().width>>1,display.getClientArea().height>>1); 
            fontdialog.open();
            for(;!fontdialog.isDisposed();) {
                         if (!fontdialog.getDisplay().readAndDispatch())
                            fontdialog.getDisplay().sleep();
                        }   
        }
    } 
```

# php - 将 IPv4 更改为 IPv6 字符串

> ID：14445582
> 
> 赞同：6
> 
> 时间：2013-01-21T19:12:46.477
> 
> 标签：php, string, transform, ipv6

[Sander Steffann](https://stackoverflow.com/users/813192/sander-steffann)在[我之前的问题中](https://stackoverflow.com/questions/14427621/best-way-to-store-an-ipv6-in-unknown-db/14437992)提到：

> 像 0000:0000:0000:0000:0000:0000:192.168.0.1 这样的地址写成 0000:0000:0000:0000:0000:0000:c0a8:0001 ，这是完全相同的地址，但使用十六进制表示法。

我如何在 PHP 中检测地址是否写成例如：`::0000:192.168.0.1`或`0000::0000:192.168.0.1`等`0000:0000:0000:0000:0000:0000:192.168.0.1`？检查基于 IP 的字符串是否有 '.' 是否足够？和 '：' ？

以及如何将其更改为完整字符串`0000:0000:0000:0000:0000:0000:c0a8:0001`？

我是否正确，将其更改为 IPv4 将类似于：

```
<?php 
$strIP = '0000:0000:0000:0000:0000:0000:192.168.0.1';

$strResult = substr($strIP, strrpos($strIP, ':'));

echo $strResult; //192.168.0.1 ?
?> 
```

...还是正确的 IP 字符串表示比这个片段可以做的更复杂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:23:10.267

我不敢相信我一口气写完了这一切，而且第一次就奏效了。

```
$strIP = '0000:0000:0000:0000:0000:0000:192.168.0.1';
$arrIP = explode(':', $strIP);

if( preg_match('/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/', $arrIP[count($arrIP)-1]) ) {
  $ip4parts = explode('.', $arrIP[count($arrIP)-1]);
  $ip6trans = sprintf("%02x%02x:%02x%02x", $ip4parts[0], $ip4parts[1], $ip4parts[2], $ip4parts[3]);
  $arrIP[count($arrIP)-1] = $ip6trans;

  $strIP = implode(':', $arrIP);
}
echo $strIP; //output: 0000:0000:0000:0000:0000:0000:c0a8:0001 
```

基本上：

1.  爆炸字符串`:`
2.  检查最后一个四边形的格式是否像 IP4 地址
3.  爆炸最后一个四边形`.`
4.  将 IP4 八位字节重新打印成两个十六进制四边形
5.  用新的替换 IP4 quad
6.  在 上内爆数组`:`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T19:37:05.963

您最好的选择是不要手动执行此操作，而是调用[`inet_pton`](http://php.net/manual/en/function.inet-pton.php)以获取二进制表示，然后将其转换为您希望拥有的格式。

```
$foo = inet_pton("::1");
for ($i = 0 ; $i < 8 ; $i++)
    $arr[$i] = sprintf("%02x%02x", ord($foo[$i * 2]), ord($foo[$i * 2 + 1]));
$addr = implode(":", $arr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T21:27:08.727

首先：你为什么要关心地址是怎么写的？inet_pton() 将为您解析所有变体并为您提供一致的结果，然后您可以将其转换为二进制、十六进制或任何您想要的。

所有用于转换之类的代码`::192.168.0.1`实际上`0000:0000:0000:0000:0000:0000:c0a8:0001`都在我的帖子中。这正是我的示例函数所做的。

如果您`0000:0000:0000:0000:0000:0000:192.168.0.1`先输入 inet_pton()，然后再输入 inet_ntop()，您将获得规范的 IPv6 表示法，`::192.168.0.1`在这种情况下就是这样。如果该字符串以开头`::`并且其余包含 no`:`和三个点，那么您可以确定它是 IPv4 地址；-)

要将上一个问题的答案与此问题相结合：

```
function expand_ip_address($addr_str) {
  /* First convert to binary, which also does syntax checking */
  $addr_bin = @inet_pton($addr_str);
  if ($addr_bin === FALSE) {
    return FALSE;
  }

  $addr_hex = bin2hex($addr_bin);

  /* See if this is an IPv4-Compatible IPv6 address (deprecated) or an
     IPv4-Mapped IPv6 Address (used when IPv4 connections are mapped to
     an IPv6 sockets and convert it to a normal IPv4 address */
  if (strlen($addr_bin) == 16
  &&  substr($addr_hex, 0, 20) == str_repeat('0', 20)) {
    /* First 80 bits are zero: now see if bits 81-96 are either all 0 or all 1 */
    if (substr($addr_hex, 20, 4) == '0000')
    ||  substr($addr_hex, 20, 4) == 'ffff')) {
      /* Remove leading bits so only the IPv4 bits remain */
      $addr_bin = substr($addr_hex, 12);
    }
  }

  /* Then differentiate between IPv4 and IPv6 */
  if (strlen($addr_bin) == 4) {
    /* IPv4: print each byte as 3 digits and add dots between them */
    $ipv4_bytes = str_split($addr_bin);
    $ipv4_ints = array_map('ord', $ipv4_bytes);
    return vsprintf('%03d.%03d.%03d.%03d', $ipv4_ints);
  } else {
    /* IPv6: print as hex and add colons between each group of 4 hex digits */
    return implode(':', str_split($addr_hex, 4));
  }
} 
```

# java - Hibernate 从数据库读取数据时出错

> ID：14445586
> 
> 赞同：0
> 
> 时间：2013-01-21T19:13:03.243
> 
> 标签：java, eclipse, spring, hibernate, extjs4

我使用 Spring MVC 3、Hibernate 和 Ext Js 4 创建了一个应用程序。问题是当我启动应用程序时，没有从数据库中读取数据。

BookController.java：

```
@Controller
public class BookController  {

private BookService bookService;

@RequestMapping(value="/books/view.action")
public @ResponseBody Map<String,? extends Object> view(@RequestParam int start, @RequestParam int limit) throws Exception {

    try{

        List<Book> books = bookService.getBookList(start,limit);

        int total = bookService.getTotalBooks();

        return ExtJSReturn.mapOK(books, total);

    } catch (Exception e) {

        return ExtJSReturn.mapError("Error retrieving books from database.");
    }
} 
```

图书服务.java：

```
@Service
public class BookService {

private BookDAO bookDAO;

/**
 * Get all books
 * @return
 */
@Transactional(readOnly=true)
public List<Book> getBookList(int start, int limit){

    return bookDAO.getBooks(start, limit);
}

    public int getTotalBooks(){

    return bookDAO.getTotalBooks();
} 
```

BookDAO.java：

```
 @SuppressWarnings("unchecked")
public List<Book> getBooks(int start, int limit) {

    DetachedCriteria criteria = DetachedCriteria.forClass(Book.class);

    return hibernateTemplate.findByCriteria(criteria, start, limit);
}

    public int getTotalBooks(){
    return DataAccessUtils.intResult(hibernateTemplate.find("SELECT COUNT(*) FROM books"));
} 
```

书.java：

```
@JsonAutoDetect
@Entity
@Table(name="books")
public class Book {

@Id
@GeneratedValue
@Column(name="id")
private int id;

@Column(name="title", nullable=false)
private String title;

@Column(name="author", nullable=false)
private String author;

@Column(name="publisher", nullable=false)
private String publisher;

@Column(name="isbn", nullable=false)
private String isbn;

@Column(name="pages", nullable=false)
private int pages;

@Column(name="category", nullable=false)
private String category;

@Column(name="qty", nullable=false)
private int qty;

/**
 * @return the title
 */
public String getTitle() {
    return title;
}

/**
 * @param title the title to set
 */
public void setTitle(String title) {
    this.title = title;
}

/**
 * @return the author
 */
public String getAuthor() {
    return author;
}

/**
 * @param author the author to set
 */
public void setAuthor(String author) {
    this.author = author;
}

/**
 * @return the publisher
 */
public String getPublisher() {
    return publisher;
}

/**
 * @param publisher the publisher to set
 */
public void setPublisher(String publisher) {
    this.publisher = publisher;
}

/**
 * @return the isbn
 */
public String getIsbn() {
    return isbn;
}

/**
 * @param isbn the isbn to set
 */
public void setIsbn(String isbn) {
    this.isbn = isbn;
}

/**
 * @return the pages
 */
public int getPages() {
    return pages;
}

/**
 * @param pages the pages to set
 */
public void setPages(int pages) {
    this.pages = pages;
}

/**
 * @return the category
 */
public String getCategory() {
    return category;
}

/**
 * @param category the category to set
 */
public void setCategory(String category) {
    this.category = category;
}

/**
 * @return the qty
 */
public int getQty() {
    return qty;
}

/**
 * @param qty the qty to set
 */
public void setQty(int qty) {
    this.qty = qty;
}

/**
 * @return the id
 */
public int getId() {
    return id;
}

/**
 * @param id the id to set
 */
public void setId(int id) {
    this.id = id;
}

} 
```

ExtJsReturn.java：

```
@Component
public class ExtJSReturn {

/**
 * Generates modelMap to return in the modelAndView
 * @param books
 * @return
 */
public static Map<String,Object> mapOK(List<Book> books){

    Map<String,Object> modelMap = new HashMap<String,Object>(3);
    modelMap.put("total", books.size());
    modelMap.put("data", books);
    modelMap.put("success", true);

    return modelMap;
}

/**
 * Generates modelMap to return in the modelAndView
 * @param books
 * @return
 */
public static Map<String,Object> mapOK(List<Book> books, int total){

    Map<String,Object> modelMap = new HashMap<String,Object>(3);
    modelMap.put("total", total);
    modelMap.put("data", books);
    modelMap.put("success", true);

    return modelMap;
}

/**
 * Generates modelMap to return in the modelAndView in case
 * of exception
 * @param msg message
 * @return
 */
public static Map<String,Object> mapError(String msg){

    Map<String,Object> modelMap = new HashMap<String,Object>(2);
    modelMap.put("message", msg);
    modelMap.put("success", false);

    return modelMap;
} 
} 
```

控制器引发错误：从数据库中检索书籍时出错。你知道可能是什么问题吗？请参阅此处的控制台输出： http: [//pastebin.com/jMQKS31P](http://pastebin.com/jMQKS31P)

**固定的！！！**

[https://stackoverflow.com/a/14447201/1564840](https://stackoverflow.com/a/14447201/1564840)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:34:09.620

您正在使用表和列名将 SQL 请求传递给需要 HQL 请求的方法，使用实体、映射字段和关联。SQL 和 HQL 是两种不同的查询语言。

HQL 查询应该是

```
select count(book.id) from Book book 
```

If you don't know about HQL, then you really need to read [the documentation](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql). Using Hibernate without knowing HQL is like using JDBC without knowing SQL.

# java - 防止 AlertDialog 关闭

> ID：14445590
> 
> 赞同：0
> 
> 时间：2013-01-21T19:13:16.167
> 
> 标签：java, android

我有一个带有一堆复选框的自定义 AlertDialog。如果没有选中任何复选框，我想阻止 AlertDialog 关闭。这可能吗？

我知道我可以暂时关闭并重新打开它，但我不想这样做，因为我在 setPositiveButton 中有一些我不想重复的代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:18:47.643

我假设您使用的是自定义视图，因此请禁用底部的确定/取消按钮。接下来，您需要禁用后退按钮：

```
@Override
public void onBackPressed() {} 
```

唯一剩下的就是确保您的对话框填满屏幕。如果用户单击父视图上的框旁边，对话框将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:25:24.973

```
I want to prevent the AlertDialog from closing 
```

**已在 SO 上发布[答案](https://stackoverflow.com/a/7636468/1278196)**

或者

创建`Custom Dialog`解决问题。

# model - Wicket：如何将模型更改传递给父组件？onModelChanged() 不起作用

> ID：14445591
> 
> 赞同：2
> 
> 时间：2013-01-21T19:13:22.547
> 
> 标签：model, wicket, onchange, event-bubbling

我有一个组件，其中包含一个带有许多 TextField 的表单。它应该工作的方式是，当更改时，应该立即保留该值（没有保存按钮，全部通过 AJAX）。

AJAX 调用工作正常，值到达模型。

保存模型（和包含的实体）的代码在父组件中。我以为我会覆盖 onModelChanged() 以将更改从组件传播到父级。但是 onModelChanged() 没有被调用。

Parent 有自己的模型作为类成员字段。子组件使用这个：

```
ReleaseTraitRowPanel( String id, IModel<IHasTraits> relModel, ... ) {
    ...
    PropertyModel<String> traitModel = new PropertyModel( relModel.getObject().getTraits(), prop);

    EditableLink4 link = new EditableLink4("link", traitModel){
        // Pass the change notification to upper level. TODO: Does Wicket do this automatically?
        @Override protected void onModelChanged() {
            ReleaseTraitRowPanel.this.onModelChanged();
        }
    };
    ...

} 
```

应该怎么做？我应该通过 onModelChanged() 吗？或者检票口是否有某种方式来通知其他模型的变化？

相关 - CompoundPropertyModel 仅适用于表单，还是我可以将它与任何组件一起使用？我可以在这里使用它 -`prop`与 id 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:07:16.537

你使用了错误的方法，你应该使用modelChanged()，如果你看他的源代码是这样的

```
/**
 * Called to indicate that the model content for this component has been changed
 */
public final void modelChanged()
{
    // Call user code
    internalOnModelChanged();
    onModelChanged();
} 
```

另一方面 onModelChanged() 是

```
/**
 * Called anytime a model is changed after the change has occurred
 */
protected void onModelChanged()
{
} 
```

如您所见，onModelChanged() 是对 modelChanged() 的调用。

CompoundPropertyModel 可以在任何 WebMarkUpContainer 中使用；换句话说，几乎在每个容器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:18:17.577

解决了。问题是我有一个总是失败的验证器，并且`onModelChanged()`在验证通过后被调用。并且验证错误消息没有到达 FeedbackPanel，因为它没有被添加到`AjaxRequestTarget`...

完成这一切之后，osdamv 的回答也适用。我为此写了一篇博文。 [https://community.jboss.org/people/ozizka/blog/2013/01/21/wicket-creating-ajax-enabled-entity-based-pages](https://community.jboss.org/people/ozizka/blog/2013/01/21/wicket-creating-ajax-enabled-entity-based-pages)

# java - 从 findWithinHorizo n 返回的 Java 大字符串转换为 InputStream

> ID：14445599
> 
> 赞同：1
> 
> 时间：2013-01-21T19:13:46.727
> 
> 标签：java, memory-management, inputstream, java.util.scanner

我写了一个应用程序，它在它的一个模块中解析巨大的文件并将这个文件逐块保存到数据库中。

首先，以下代码有效，我的主要问题是减少内存使用和总体性能提高。

下面的代码片段只是大图的一小部分，但是在进行了一些 YourKit 分析之后问题最大，由*/*Here*/*标记的行分配了大量的内存。

```
....
Scanner fileScanner = new Scanner(file,"UTF-8");
String scannedFarm;
try{

    Pattern p = Pattern.compile("(?:^.++$(?:\\r?+\\n)?+){2,100000}+",Pattern.MULTILINE);
    String [] tableName = null;

/*HERE*/while((scannedFarm = fileScanner.findWithinHorizon(p, 0)) != null){
         boolean continuePrevStream = false;
         Scanner scanner = new Scanner(scannedFarm);

         String[] tmpTableName  = scanner.nextLine().split(getSeparator());
         if (tmpTableName.length==2){
             tableName = tmpTableName;
         }else{
             if (tableName==null){
                 continue;
             }
             continuePrevStream = true;
         }
         scanner.close();

/*HERE*/ InputStream is = new ByteArrayInputStream(scannedFarm.getBytes("UTF-8"));
.... 
```

分配大量内存是可以接受的，因为字符串很大（我也需要这么大的块），我的主要问题是由于getBytes，相同的分配发生了两次，

1.  所以我的问题是他们将*findWithinHorizo​​n* Result 直接传输到*InputStream*而不分配内存两次的方法？

2.  他们是实现相同功能的更有效方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:18:39.870

不完全相同的方法，但`findWithinHorizon`您可以尝试阅读每一行并在行上下文中搜索模式。这肯定会减少内存压力，因为您没有像 API 所述那样缓冲整个文件：

> 如果horizo​​n 为0，则horizo​​n 被忽略，并且此方法继续搜索输入以寻找指定的模式而不受限制。**在这种情况下，它可能会缓冲所有搜索模式的输入**。

就像是：

```
while(String line = fileScanner.nextLine() != null) { 
   if(grep for pattern in line) { 

   }
} 
```

# sql - HH:MM:SS 格式的 DATEDIFF

> ID：14445600
> 
> 赞同：17
> 
> 时间：2013-01-21T19:13:51.090
> 
> 标签：sql, sql-server, sql-server-2008, date, datetime

给定一些包含开始时间和结束时间的数据，我需要根据小时、分钟、秒和平均长度来计算总长度。

例如，结果必须类似于`45:15:10`45 小时 15 分 10 秒或`30:07`30 分 07 秒。

我们正在使用`SQL Server 2008 R2`，当时间超过`24:59:59`. 知道我该怎么做吗？

有关信息，表中的列是`Id`、`StartDateTime`、`EndDateTime`等。我需要制作一份月度报告，其中包含当月的记录数、这些记录的总长度和平均长度。我想知道是否有一种简单的方法可以执行所有这些操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T19:25:15.457

您不应该转换为`time`- 它旨在将时间点存储在单个 24 小时时钟上，而不是持续时间或间隔（即使是其自身限制为 < 24 小时的时间点，显然您的数据不是）。相反，您可以以所需的最小间隔（在您的情况下为秒）获取 datediff，然后执行一些数学和字符串操作以您需要的输出格式显示它（最好将秒返回给应用程序或报告工具并让它完成这项工作）。

```
DECLARE @d TABLE
(
  id INT IDENTITY(1,1), 
  StartDateTime DATETIME, 
  EndDateTime DATETIME
);

INSERT @d(StartDateTime, EndDateTime) VALUES 
(DATEADD(DAY, -2, GETDATE()), DATEADD(MINUTE, 15, GETDATE())),
(GETDATE()                  , DATEADD(MINUTE, 22, GETDATE())),
(DATEADD(DAY, -1, GETDATE()), DATEADD(MINUTE,  5, GETDATE())),
(DATEADD(DAY, -4, GETDATE()), DATEADD(SECOND, 14, GETDATE()));

;WITH x AS (SELECT id, StartDateTime, EndDateTime, 
  d = DATEDIFF(SECOND, StartDateTime, EndDateTime),
  a = AVG(DATEDIFF(SECOND, StartDateTime, EndDateTime)) OVER()
  FROM @d
)
SELECT id, StartDateTime, EndDateTime,
  [delta_HH:MM:SS] = CONVERT(VARCHAR(5), d/60/60)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), d/60%60), 2)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), d % 60), 2),
  [avg_HH:MM:SS] = CONVERT(VARCHAR(5), a/60/60)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), a/60%60), 2)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), a % 60), 2)
FROM x; 
```

结果：

```
id  StartDateTime        EndDateTime          delta_HH:MM:SS  avg_HH:MM:SS
--  -------------------  -------------------  --------------  ------------
1   2013-01-19 14:24:46  2013-01-21 14:39:46  48:15:00        42:10:33
2   2013-01-21 14:24:46  2013-01-21 14:46:46   0:22:00        42:10:33
3   2013-01-20 14:24:46  2013-01-21 14:29:46  24:05:00        42:10:33
4   2013-01-17 14:24:46  2013-01-21 14:25:00  96:00:14        42:10:33 
```

这不正是您所要求的，因为它不会只显示 MM:SS 的增量 < 1 小时。你可以用一个简单的`CASE`表达式来调整它：

```
;WITH x AS (SELECT id, StartDateTime, EndDateTime, 
  d = DATEDIFF(SECOND, StartDateTime, EndDateTime),
  a = AVG(DATEDIFF(SECOND, StartDateTime, EndDateTime)) OVER()
  FROM @d
)
SELECT id, StartDateTime, EndDateTime,
  [delta_HH:MM:SS] = CASE WHEN d >= 3600 THEN 
    CONVERT(VARCHAR(5), d/60/60) + ':' ELSE '' END
  + RIGHT('0' + CONVERT(VARCHAR(2), d/60%60), 2)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), d % 60), 2),
  [avg_HH:MM:SS] = CASE WHEN a >= 3600 THEN 
    CONVERT(VARCHAR(5), a/60/60) + ':' ELSE '' END
  + RIGHT('0' + CONVERT(VARCHAR(2), a/60%60), 2)
  + ':' + RIGHT('0' + CONVERT(VARCHAR(2), a % 60), 2)
FROM x; 
```

此查询将上述结果中第二行的 delta 列从`0:22:00`更改为`22:00`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-18T06:46:19.217

我稍微修改了 Avinash 的答案，因为如果差异太大，它可能会以错误结束。如果您只需要 HH:mm:ss 就足以像这样在秒级区分：

```
SELECT CONVERT(time, 
  DATEADD(s, 
    DATEDIFF(s, 
      '2018-01-07 09:53:00', 
      '2018-01-07 11:53:01'), 
     CAST('1900-01-01 00:00:00.0000000' as datetime2)
   )
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-30T03:07:26.460

```
SELECT CONVERT(time, 
               DATEADD(mcs, 
                       DATEDIFF(mcs, 
                                '2007-05-07 09:53:00.0273335', 
                                '2007-05-07 09:53:01.0376635'), 
                       CAST('1900-01-01 00:00:00.0000000' as datetime2)
                      )
              ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T19:26:21.947

如果你想做平均值，那么最好的方法是转换为秒或一天的分数。日分数在 SQL Server 中很方便，因为您可以执行以下操作：

```
select avg(cast(endtime - starttime) as float)
from t 
```

您可以使用反向转换将其转换回 a `datetime`：

```
select cast(avg(cast(endtime - starttime as float) as datetime)
from t 
```

以您想要的格式获取时间的算术。. . 那是一种痛苦。您可以考虑在最终格式中包含天数，并使用：

```
select right(convert(varchar(255), <val>, 120), 10) 
```

要使小时数超过 24，这是另一种方法：

```
select cast(floor(cast(<val> as float)*24) as varchar(255))+right(convert(varchar(255), <val>, 120), 6) 
```

它`convert`用于分钟和秒，应该在左边用 0 填充。然后将小时数附加为单独的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-27T04:13:49.723

从 SQL SERVER 2012 开始，您不需要使用 DATEDIFF 函数。您可以使用 FORMAT 函数来实现您想要的：

```
SELECT
    FORMAT(CONVERT(TIME, [appoitment].[Start] - [appointment].[End]), N'hh\:mm') AS 'Duration'
FROM
    [tblAppointment] (NOLOCK) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-11T18:08:19.857

一种避免溢出的方法，可以在输出中包含天并一直到毫秒：

```
DECLARE @startDate AS DATETIME = '2018-06-01 14:20:02.100'
DECLARE @endDate AS DATETIME = '2018-06-02 15:23:09.000'
SELECT CAST(DATEDIFF(day,'1900-01-01', @endDate - @startDate) AS VARCHAR) +  'd ' + CONVERT(varchar(22), @endDate - @startDate, 114) 
```

以上将返回

> 第一天 01:03:06:900

而且，当然，您可以使用您选择的格式

SQL 支持日期时间减法，它输出相对于 MIN 日期的新日期时间（例如 1900-01-01，您可能可以从某个系统变量中获取此值）这比 DATEDIFF 效果更好，因为 DATEDIFF 将为每个“日期部分边界”计数一个crossed”，即使经过的时间小于整个数据部分。这种方法的另一个好处是它允许您使用日期格式转换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-14T16:23:54.263

如果`days`是（正）天数，例如`0.5`12 小时，请使用此表达式将其格式化为适当的持续时间：

```
CONVERT(varchar(9), FLOOR(days * 24)) + RIGHT(CONVERT(char(19), CAST(days AS datetime), 120), 6) 
```

Excel 将理解`9999:59:59`粘贴时的值。应用自定义格式：`[h]:mm:ss`英文版（`[u]:mm:ss`荷兰语）。

# jquery - 从多个选项卡菜单中删除哈希标签以及其他位置

> ID：14445601
> 
> 赞同：0
> 
> 时间：2013-01-21T19:13:57.363
> 
> 标签：jquery, html, jquery-ui-tabs

我正在尝试从选项卡菜单中删除标签。查看其他解决方案，我意识到我需要包含 return false; 在我的代码中，但是我不确定我需要在哪里包含它。下面是代码，如果有人能指出我应该如何摆脱哈希标签，那就太好了。

```
(function (a) {
    a.fn.extend({
        tabify: function (e) {
            function c(b) {
                hash = a(b).find("a").attr("href");
                return hash = hash.substring(0, hash.length - 4)
            }
            function f(b) {
                a(b).addClass("active");
                a(c(b)).show();
                a(b).siblings("li").each(function () {
                    a(this).removeClass("active");
                    a(c(this)).hide()
                })
            }
            return this.each(function () {
                function b() {
                    location.hash && a(d).find("a[href=" + location.hash + "]").length > 0 && f(a(d).find("a[href=" + location.hash + "]").parent())
                }
                var d = this,
                    g = {
                        ul: a(d)
                    };
                a(this).find("li a").each(function () {
                    a(this).attr("href", a(this).attr("href") + "-tab")
                });
                location.hash && b();
                setInterval(b, 100);
                a(this).find("li").each(function () {
                    a(this).hasClass("active") ? a(c(this)).show() : a(c(this)).hide()
                });
                e && e(g)
            })
        }
    })
})(jQuery); 
```

上面的html代码

```
<ul id="menu">
<li href="#tab-1">Tab 1</li>
<li href="#tab-2">Tab 2</li>
<li href="#tab-3">Tab 3</li>
</ul>

<div id="tab-1" class="content"></div>
<div id="tab-2" class="content"></div>
<div id="tab-3" class="content"></div> 
```

# php - 如何将 jquery 中的 .change() 事件绑定到动态生成的 html 元素

> ID：14445605
> 
> 赞同：0
> 
> 时间：2013-01-21T19:14:34.963
> 
> 标签：php, html, jquery-ui, jquery

```
$("#mySelect").val(subgroup_id).change() 
```

这`mySelect`是一个动态生成的下拉列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:16:02.217

您可以通过使用 的委托版本来做到这一点`on()`，并将事件委托给最近的非动态父级（使用下面示例中的文档）：

```
$(document).on('change', '#mySelect', function() {
    this.value = subgroup_id; //sets the value on change ????
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:16:49.463

使用 on() 方法 - [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$('body').on('change', '#mySelect', function() {
    // do stuff here
}) 
```

# android - 将矩阵图像定位在 imageview 的中心

> ID：14445606
> 
> 赞同：8
> 
> 时间：2013-01-21T19:14:35.073
> 
> 标签：android, matrix, imageview, zooming

我创建了一个图片库，一切正常。需要放大和移动图像

```
ImgView.setScaleType (ImageView.ScaleType.MATRIX) 
```

当我这样做时，我得到的图像很小，所以我调用了该方法

```
scaleFactor = view.getWidth()/(float)view.getDrawable().getIntrinsicWidth();
 matrix.setScale(scaleFactor, scaleFactor); 
```

所以不要错过图像大小，但正如您所见，图像高于一切，需要保持在屏幕中央。

我试过这个

```
matrix.postTranslate((screen_width-image_width)/2, (screen_height-image_height)/2); 
```

但不工作。

任何的想法？很抱歉没有插入图片，但我不能因为我的声誉。非常感谢您提前

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T11:29:30.367

好的，我已经纠正了错误，只需要输入以下代码行：

```
RectF drawableRect = new RectF(0, 0, image_width, image_height);
RectF viewRect = new RectF(0, 0, screen_width, screen_height);
matrix.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER); 
```

希望有人帮助，非常感谢您的回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-08T10:38:59.623

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {

    super.onWindowFocusChanged(hasFocus);

    screenWidth = layout.getWidth();
    screenHeight = layout.getHeight();

    Log.e("", "Image Width : " + imageWidth + " > " + imageHeight);
    Log.e("", "screen Width : " + screenWidth + " > " + screenHeight);

    RectF drawableRect = new RectF(0, 0, imageWidth, imageHeight);
    RectF viewRect = new RectF(0, 0, screenWidth, screenHeight);
    matrix.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER);
    img.setImageMatrix(matrix);
} 
```

# regex - 正则表达式未按预期工作

> ID：14445613
> 
> 赞同：0
> 
> 时间：2013-01-21T19:15:11.517
> 
> 标签：regex, replace

我有一个正则表达式

```
(@Xml[A-Za-z0-9]+(\([^)]+\))?|import javax\.xml\.bind\.annotation\.[A-Za-z0-9.]+;)[ \t]*(\r?\n) 
```

我用来剥离 xml 绑定注释和
导入 javax.xml.bind.annotation.*

它可以成功替换，除了以下类型的东西
有人可以用正则表达式帮助我了解我做错了什么吗？

我也尝试使用[http://regexpal.com/](http://regexpal.com/)进行调试，但未能成功 :-( 您可以在网站[http://regexpal.com/](http://regexpal.com/)上粘贴正则表达式和下面的 java 代码，您可以准确地看到我的内容我无法实现。
非常感谢有关此的任何帮助。

```
@XmlElements({
    @XmlElement(name = "GLSurfaceView", type = GLSurfaceView.class),
    @XmlElement(name = "AdapterView", type = AdapterView.class),
    @XmlElement(name = "ZoomButton", type = ZoomButton.class)
 }) 
```

整个java文件如下所示

```
import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElements;
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

/**
 * <p>Java class for ViewGroup complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="ViewGroup">
 *   &lt;complexContent>
 *     &lt;extension base="{}View">
 *       &lt;group ref="{}any-view" maxOccurs="unbounded" minOccurs="0"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}addStatesFromChildren"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}alwaysDrawnWithCache"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}animateLayoutChanges"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}animationCache"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}clipChildren"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}clipToPadding"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}descendantFocusability"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}layoutAnimation"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}persistentDrawingCache"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}splitMotionEvents"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}orientation"/>
 *       &lt;attribute ref="{http://schemas.android.com/apk/res/android}divider"/>
 *     &lt;/extension>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ViewGroup", propOrder = {
    "anyView"
})
@XmlSeeAlso({
    GridLayout.class,
    FragmentBreadCrumbs.class,
    AbsoluteLayout.class,
    SlidingDrawer.class,
    RelativeLayout.class,
    LinearLayout.class,
    AdapterView.class,
    FrameLayout.class
})
public class ViewGroup
    extends View
{

    @XmlElements({
        @XmlElement(name = "GLSurfaceView", type = GLSurfaceView.class),
        @XmlElement(name = "AdapterView", type = AdapterView.class),
        @XmlElement(name = "AdapterViewAnimator", type = AdapterViewAnimator.class),
        @XmlElement(name = "AutoCompleteTextView", type = AutoCompleteTextView.class),
        @XmlElement(name = "MediaController", type = MediaController.class),
        @XmlElement(name = "TextView", type = TextView.class),
        @XmlElement(name = "FragmentBreadCrumbs", type = FragmentBreadCrumbs.class),
        @XmlElement(name = "AppWidgetHostView", type = AppWidgetHostView.class),
        @XmlElement(name = "GestureOverlayView", type = GestureOverlayView.class),
        @XmlElement(name = "ExtractEditText", type = ExtractEditText.class),
        @XmlElement(name = "KeyboardView", type = KeyboardView.class),
        @XmlElement(name = "RSSurfaceView", type = RSSurfaceView.class),
        @XmlElement(name = "RSTextureView", type = RSTextureView.class),
        @XmlElement(name = "SurfaceView", type = SurfaceView.class),
        @XmlElement(name = "TextureView", type = TextureView.class),
        @XmlElement(name = "ViewGroup", type = ViewGroup.class),
        @XmlElement(name = "ViewStub", type = ViewStub.class),
        @XmlElement(name = "WebView", type = WebView.class),
        @XmlElement(name = "AbsListView", type = AbsListView.class),
        @XmlElement(name = "AbsSeekBar", type = AbsSeekBar.class),
        @XmlElement(name = "AbsSpinner", type = AbsSpinner.class),
        @XmlElement(name = "AbsoluteLayout", type = AbsoluteLayout.class),
        @XmlElement(name = "AdapterViewFlipper", type = AdapterViewFlipper.class),
        @XmlElement(name = "AnalogClock", type = AnalogClock.class),
        @XmlElement(name = "Button", type = Button.class),
        @XmlElement(name = "CalendarView", type = CalendarView.class),
        @XmlElement(name = "CheckBox", type = CheckBox.class),
        @XmlElement(name = "CheckedTextView", type = CheckedTextView.class),
        @XmlElement(name = "Chronometer", type = Chronometer.class),
        @XmlElement(name = "CompoundButton", type = CompoundButton.class),
        @XmlElement(name = "DatePicker", type = DatePicker.class),
        @XmlElement(name = "DialerFilter", type = DialerFilter.class),
        @XmlElement(name = "DigitalClock", type = DigitalClock.class),
        @XmlElement(name = "EditText", type = EditText.class),
        @XmlElement(name = "ExpandableListView", type = ExpandableListView.class),
        @XmlElement(name = "FrameLayout", type = FrameLayout.class),
        @XmlElement(name = "Gallery", type = Gallery.class),
        @XmlElement(name = "GridLayout", type = GridLayout.class),
        @XmlElement(name = "GridView", type = GridView.class),
        @XmlElement(name = "HorizontalScrollView", type = HorizontalScrollView.class),
        @XmlElement(name = "ImageButton", type = ImageButton.class),
        @XmlElement(name = "ImageSwitcher", type = ImageSwitcher.class),
        @XmlElement(name = "ImageView", type = ImageView.class),
        @XmlElement(name = "LinearLayout", type = LinearLayout.class),
        @XmlElement(name = "ListView", type = ListView.class),
        @XmlElement(name = "MultiAutoCompleteTextView", type = MultiAutoCompleteTextView.class),
        @XmlElement(name = "NumberPicker", type = NumberPicker.class),
        @XmlElement(name = "ProgressBar", type = ProgressBar.class),
        @XmlElement(name = "QuickContactBadge", type = QuickContactBadge.class),
        @XmlElement(name = "RadioButton", type = RadioButton.class),
        @XmlElement(name = "RadioGroup", type = RadioGroup.class),
        @XmlElement(name = "RatingBar", type = RatingBar.class),
        @XmlElement(name = "RelativeLayout", type = RelativeLayout.class),
        @XmlElement(name = "ScrollView", type = ScrollView.class),
        @XmlElement(name = "SearchView", type = SearchView.class),
        @XmlElement(name = "SeekBar", type = SeekBar.class),
        @XmlElement(name = "SlidingDrawer", type = SlidingDrawer.class),
        @XmlElement(name = "Space", type = Space.class),
        @XmlElement(name = "Spinner", type = Spinner.class),
        @XmlElement(name = "StackView", type = StackView.class),
        @XmlElement(name = "Switch", type = Switch.class),
        @XmlElement(name = "TabHost", type = TabHost.class),
        @XmlElement(name = "TabWidget", type = TabWidget.class),
        @XmlElement(name = "TableLayout", type = TableLayout.class),
        @XmlElement(name = "TableRow", type = TableRow.class),
        @XmlElement(name = "TextSwitcher", type = TextSwitcher.class),
        @XmlElement(name = "TimePicker", type = TimePicker.class),
        @XmlElement(name = "ToggleButton", type = ToggleButton.class),
        @XmlElement(name = "TwoLineListItem", type = TwoLineListItem.class),
        @XmlElement(name = "VideoView", type = VideoView.class),
        @XmlElement(name = "ViewAnimator", type = ViewAnimator.class),
        @XmlElement(name = "ViewFlipper", type = ViewFlipper.class),
        @XmlElement(name = "ViewSwitcher", type = ViewSwitcher.class),
        @XmlElement(name = "ZoomButton", type = ZoomButton.class),
        @XmlElement(name = "ZoomControls", type = ZoomControls.class)
    })
    protected List<View> anyView;
    @XmlAttribute(name = "addStatesFromChildren", namespace = "http://schemas.android.com/apk/res/android")
    protected String addStatesFromChildren;
    @XmlAttribute(name = "alwaysDrawnWithCache", namespace = "http://schemas.android.com/apk/res/android")
    protected String alwaysDrawnWithCache;
    @XmlAttribute(name = "animateLayoutChanges", namespace = "http://schemas.android.com/apk/res/android")
    protected String animateLayoutChanges;
    @XmlAttribute(name = "animationCache", namespace = "http://schemas.android.com/apk/res/android")
    protected String animationCache;
    @XmlAttribute(name = "clipChildren", namespace = "http://schemas.android.com/apk/res/android")
    protected String clipChildren;
    @XmlAttribute(name = "clipToPadding", namespace = "http://schemas.android.com/apk/res/android")
    protected String clipToPadding;
    @XmlAttribute(name = "descendantFocusability", namespace = "http://schemas.android.com/apk/res/android")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    protected String descendantFocusability;
    @XmlAttribute(name = "layoutAnimation", namespace = "http://schemas.android.com/apk/res/android")
    protected String layoutAnimation;
    @XmlAttribute(name = "persistentDrawingCache", namespace = "http://schemas.android.com/apk/res/android")
    protected String persistentDrawingCache;
    @XmlAttribute(name = "splitMotionEvents", namespace = "http://schemas.android.com/apk/res/android")
    protected String splitMotionEvents;
    @XmlAttribute(name = "orientation", namespace = "http://schemas.android.com/apk/res/android")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    protected String orientation;
    @XmlAttribute(name = "divider", namespace = "http://schemas.android.com/apk/res/android")
    protected String divider;

    /**
     * Gets the value of the anyView property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the anyView property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getAnyView().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link GLSurfaceView }
     * {@link AdapterView }
     * {@link AdapterViewAnimator }
     * {@link AutoCompleteTextView }
     * {@link MediaController }
     * {@link TextView }
     * {@link FragmentBreadCrumbs }
     * {@link AppWidgetHostView }
     * {@link GestureOverlayView }
     * {@link ExtractEditText }
     * {@link KeyboardView }
     * {@link RSSurfaceView }
     * {@link RSTextureView }
     * {@link SurfaceView }
     * {@link TextureView }
     * {@link ViewGroup }
     * {@link ViewStub }
     * {@link WebView }
     * {@link AbsListView }
     * {@link AbsSeekBar }
     * {@link AbsSpinner }
     * {@link AbsoluteLayout }
     * {@link AdapterViewFlipper }
     * {@link AnalogClock }
     * {@link Button }
     * {@link CalendarView }
     * {@link CheckBox }
     * {@link CheckedTextView }
     * {@link Chronometer }
     * {@link CompoundButton }
     * {@link DatePicker }
     * {@link DialerFilter }
     * {@link DigitalClock }
     * {@link EditText }
     * {@link ExpandableListView }
     * {@link FrameLayout }
     * {@link Gallery }
     * {@link GridLayout }
     * {@link GridView }
     * {@link HorizontalScrollView }
     * {@link ImageButton }
     * {@link ImageSwitcher }
     * {@link ImageView }
     * {@link LinearLayout }
     * {@link ListView }
     * {@link MultiAutoCompleteTextView }
     * {@link NumberPicker }
     * {@link ProgressBar }
     * {@link QuickContactBadge }
     * {@link RadioButton }
     * {@link RadioGroup }
     * {@link RatingBar }
     * {@link RelativeLayout }
     * {@link ScrollView }
     * {@link SearchView }
     * {@link SeekBar }
     * {@link SlidingDrawer }
     * {@link Space }
     * {@link Spinner }
     * {@link StackView }
     * {@link Switch }
     * {@link TabHost }
     * {@link TabWidget }
     * {@link TableLayout }
     * {@link TableRow }
     * {@link TextSwitcher }
     * {@link TimePicker }
     * {@link ToggleButton }
     * {@link TwoLineListItem }
     * {@link VideoView }
     * {@link ViewAnimator }
     * {@link ViewFlipper }
     * {@link ViewSwitcher }
     * {@link ZoomButton }
     * {@link ZoomControls }
     * 
     * 
     */
    public List<View> getAnyView() {
        if (anyView == null) {
            anyView = new ArrayList<View>();
        }
        return this.anyView;
    }

    /**
     * Gets the value of the addStatesFromChildren property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getAddStatesFromChildren() {
        return addStatesFromChildren;
    }

    /**
     * Sets the value of the addStatesFromChildren property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setAddStatesFromChildren(String value) {
        this.addStatesFromChildren = value;
    }

    /**
     * Gets the value of the alwaysDrawnWithCache property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getAlwaysDrawnWithCache() {
        return alwaysDrawnWithCache;
    }

    /**
     * Sets the value of the alwaysDrawnWithCache property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setAlwaysDrawnWithCache(String value) {
        this.alwaysDrawnWithCache = value;
    }

    /**
     * Gets the value of the animateLayoutChanges property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getAnimateLayoutChanges() {
        return animateLayoutChanges;
    }

    /**
     * Sets the value of the animateLayoutChanges property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setAnimateLayoutChanges(String value) {
        this.animateLayoutChanges = value;
    }

    /**
     * Gets the value of the animationCache property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getAnimationCache() {
        return animationCache;
    }

    /**
     * Sets the value of the animationCache property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setAnimationCache(String value) {
        this.animationCache = value;
    }

    /**
     * Gets the value of the clipChildren property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getClipChildren() {
        return clipChildren;
    }

    /**
     * Sets the value of the clipChildren property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setClipChildren(String value) {
        this.clipChildren = value;
    }

    /**
     * Gets the value of the clipToPadding property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getClipToPadding() {
        return clipToPadding;
    }

    /**
     * Sets the value of the clipToPadding property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setClipToPadding(String value) {
        this.clipToPadding = value;
    }

    /**
     * Gets the value of the descendantFocusability property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getDescendantFocusability() {
        return descendantFocusability;
    }

    /**
     * Sets the value of the descendantFocusability property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setDescendantFocusability(String value) {
        this.descendantFocusability = value;
    }

    /**
     * Gets the value of the layoutAnimation property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getLayoutAnimation() {
        return layoutAnimation;
    }

    /**
     * Sets the value of the layoutAnimation property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setLayoutAnimation(String value) {
        this.layoutAnimation = value;
    }

    /**
     * Gets the value of the persistentDrawingCache property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getPersistentDrawingCache() {
        return persistentDrawingCache;
    }

    /**
     * Sets the value of the persistentDrawingCache property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setPersistentDrawingCache(String value) {
        this.persistentDrawingCache = value;
    }

    /**
     * Gets the value of the splitMotionEvents property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getSplitMotionEvents() {
        return splitMotionEvents;
    }

    /**
     * Sets the value of the splitMotionEvents property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setSplitMotionEvents(String value) {
        this.splitMotionEvents = value;
    }

    /**
     * Gets the value of the orientation property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getOrientation() {
        return orientation;
    }

    /**
     * Sets the value of the orientation property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setOrientation(String value) {
        this.orientation = value;
    }

    /**
     * Gets the value of the divider property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getDivider() {
        return divider;
    }

    /**
     * Sets the value of the divider property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setDivider(String value) {
        this.divider = value;
    }

} 
```

成功replae后，以下是我正在查看的内容

它应该删除（或注释掉）下面的代码片段

```
@XmlElements({
    @XmlElement(name = "GLSurfaceView", type = GLSurfaceView.class),
    @XmlElement(name = "AdapterView", type = AdapterView.class),
    @XmlElement(name = "AdapterViewAnimator", type = AdapterViewAnimator.class),
    @XmlElement(name = "AutoCompleteTextView", type = AutoCompleteTextView.class),
    @XmlElement(name = "MediaController", type = MediaController.class),
    @XmlElement(name = "TextView", type = TextView.class),
    @XmlElement(name = "FragmentBreadCrumbs", type = FragmentBreadCrumbs.class),
    @XmlElement(name = "AppWidgetHostView", type = AppWidgetHostView.class),
    @XmlElement(name = "GestureOverlayView", type = GestureOverlayView.class),
    @XmlElement(name = "ExtractEditText", type = ExtractEditText.class),
    @XmlElement(name = "KeyboardView", type = KeyboardView.class),
    @XmlElement(name = "RSSurfaceView", type = RSSurfaceView.class),
    @XmlElement(name = "RSTextureView", type = RSTextureView.class),
    @XmlElement(name = "SurfaceView", type = SurfaceView.class),
    @XmlElement(name = "TextureView", type = TextureView.class),
    @XmlElement(name = "ViewGroup", type = ViewGroup.class),
    @XmlElement(name = "ViewStub", type = ViewStub.class),
    @XmlElement(name = "WebView", type = WebView.class),
    @XmlElement(name = "AbsListView", type = AbsListView.class),
    @XmlElement(name = "AbsSeekBar", type = AbsSeekBar.class),
    @XmlElement(name = "AbsSpinner", type = AbsSpinner.class),
    @XmlElement(name = "AbsoluteLayout", type = AbsoluteLayout.class),
    @XmlElement(name = "AdapterViewFlipper", type = AdapterViewFlipper.class),
    @XmlElement(name = "AnalogClock", type = AnalogClock.class),
    @XmlElement(name = "Button", type = Button.class),
    @XmlElement(name = "CalendarView", type = CalendarView.class),
    @XmlElement(name = "CheckBox", type = CheckBox.class),
    @XmlElement(name = "CheckedTextView", type = CheckedTextView.class),
    @XmlElement(name = "Chronometer", type = Chronometer.class),
    @XmlElement(name = "CompoundButton", type = CompoundButton.class),
    @XmlElement(name = "DatePicker", type = DatePicker.class),
    @XmlElement(name = "DialerFilter", type = DialerFilter.class),
    @XmlElement(name = "DigitalClock", type = DigitalClock.class),
    @XmlElement(name = "EditText", type = EditText.class),
    @XmlElement(name = "ExpandableListView", type = ExpandableListView.class),
    @XmlElement(name = "FrameLayout", type = FrameLayout.class),
    @XmlElement(name = "Gallery", type = Gallery.class),
    @XmlElement(name = "GridLayout", type = GridLayout.class),
    @XmlElement(name = "GridView", type = GridView.class),
    @XmlElement(name = "HorizontalScrollView", type = HorizontalScrollView.class),
    @XmlElement(name = "ImageButton", type = ImageButton.class),
    @XmlElement(name = "ImageSwitcher", type = ImageSwitcher.class),
    @XmlElement(name = "ImageView", type = ImageView.class),
    @XmlElement(name = "LinearLayout", type = LinearLayout.class),
    @XmlElement(name = "ListView", type = ListView.class),
    @XmlElement(name = "MultiAutoCompleteTextView", type = MultiAutoCompleteTextView.class),
    @XmlElement(name = "NumberPicker", type = NumberPicker.class),
    @XmlElement(name = "ProgressBar", type = ProgressBar.class),
    @XmlElement(name = "QuickContactBadge", type = QuickContactBadge.class),
    @XmlElement(name = "RadioButton", type = RadioButton.class),
    @XmlElement(name = "RadioGroup", type = RadioGroup.class),
    @XmlElement(name = "RatingBar", type = RatingBar.class),
    @XmlElement(name = "RelativeLayout", type = RelativeLayout.class),
    @XmlElement(name = "ScrollView", type = ScrollView.class),
    @XmlElement(name = "SearchView", type = SearchView.class),
    @XmlElement(name = "SeekBar", type = SeekBar.class),
    @XmlElement(name = "SlidingDrawer", type = SlidingDrawer.class),
    @XmlElement(name = "Space", type = Space.class),
    @XmlElement(name = "Spinner", type = Spinner.class),
    @XmlElement(name = "StackView", type = StackView.class),
    @XmlElement(name = "Switch", type = Switch.class),
    @XmlElement(name = "TabHost", type = TabHost.class),
    @XmlElement(name = "TabWidget", type = TabWidget.class),
    @XmlElement(name = "TableLayout", type = TableLayout.class),
    @XmlElement(name = "TableRow", type = TableRow.class),
    @XmlElement(name = "TextSwitcher", type = TextSwitcher.class),
    @XmlElement(name = "TimePicker", type = TimePicker.class),
    @XmlElement(name = "ToggleButton", type = ToggleButton.class),
    @XmlElement(name = "TwoLineListItem", type = TwoLineListItem.class),
    @XmlElement(name = "VideoView", type = VideoView.class),
    @XmlElement(name = "ViewAnimator", type = ViewAnimator.class),
    @XmlElement(name = "ViewFlipper", type = ViewFlipper.class),
    @XmlElement(name = "ViewSwitcher", type = ViewSwitcher.class),
    @XmlElement(name = "ZoomButton", type = ZoomButton.class),
    @XmlElement(name = "ZoomControls", type = ZoomControls.class)
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:50:38.037

看起来你只是忘记了一个逗号，并抓住了右括号：

`(@Xml[A-Za-z0-9]+(\([^)]+\))?|import javax\.xml\.bind\.annotation\.[A-Za-z0-9.]+;)[, \t]*(\r?\n)(\s*}\))?`

# jquery-selectors - 在选择器结果中处理多个元素

> ID：14445614
> 
> 赞同：0
> 
> 时间：2013-01-21T19:15:13.460
> 
> 标签：jquery-selectors

为什么某些 jquery 操作适用于选择器结果中的所有元素，而其他操作仅适用于匹配中的第一个元素？

例如`$(".selector").click`，函数将事件分配给选择器结果中的所有元素，但`$('.selector]').offset().top`仅返回结果集中第一个元素的值。

我如何知道每个操作的行为是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:25:55.717

一些 jquery 函数可以接受多个 dom 元素，而其他函数只能使用单个元素。`$(".selector")`是一个对象，当您为其调用某个函数时，该对象中的所有元素或只有第一个元素将传递给该函数。

`offset()`功能说明：

> 获取**第一个元素**的当前坐标，或设置匹配元素集中**每个元素**相对于文档的坐标。

因此，如果您`offset()`不带参数调用，它将返回第一个元素的位置；`offset({ top: y, left: x })`将为 jquery 对象的所有元素设置相同的`top`和`left`属性。

要了解函数的工作原理，请阅读其文档。

# c# - 通过代码扩展 Visual Studio Locals/Autos 窗口

> ID：14445615
> 
> 赞同：1
> 
> 时间：2013-01-21T19:15:22.273
> 
> 标签：c#, visual-studio-2010, visual-studio-debugging, visual-studio-extensions

是否可以通过代码扩展 VS Locals/Autos 窗口中显示的内容？就像通过 Visual Studio 扩展一样？我想遍历显示的变量并操纵它们的组织和显示方式。

我已经阅读了使用 AutoExp.dat 和 .NatVis 等技术，但想编写通过 C# 代码主动重新排列显示项目结构的代码。我们所有的类型都有类似的结构，我希望比通过大量的特定于类型的文件更灵活。

我试图让人们更容易阅读我们生成的代码结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:31:56.797

如果您正在谈论鼠标悬停/添加手表时显示的内容，则有以下`DebuggerDisplay`属性：

[使用 DebuggerDisplay 属性](http://msdn.microsoft.com/en-us/library/x810d419.aspx)

[使用调试器显示属性增强调试](http://msdn.microsoft.com/en-us/library/ms228992.aspx)

哦，差点忘了：对于更复杂的调试器扩展，您始终可以创建自己的 Visualizer - 这类似于在调试期间使用小放大镜/下拉变量时获得的结果：

[展示台](http://msdn.microsoft.com/en-us/library/zayyhzts.aspx)

[CodeProject - 用 10 行代码创建可视化工具](http://www.codeproject.com/Articles/13127/Create-a-Debugger-Visualizer-in-10-Lines-of-Code)

# java - 错误是什么意思？警告：[静态] 静态方法应由类型名称 AnchorPane 限定，而不是由表达式限定

> ID：14445623
> 
> 赞同：5
> 
> 时间：2013-01-21T19:15:41.793
> 
> 标签：java, javafx, pane

我收到此警告：**警告：[静态] 静态方法应由类型名称 AnchorPane 限定，而不是由表达式限定**

这是我的代码：

```
public Chart(Vector<String[]> v, final Pane p, final AnchorPane ap){
    super();
    this.v = v;
    p.heightProperty().addListener(new ChangeListener<Number>() {
        public void changed(ObservableValue<? extends Number> ov,
        Number old_val, Number new_val) {
            draw();

            System.out.println(heightProperty().doubleValue()+" "+ap.getBottomAnchor(p));

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T19:18:07.467

[`AnchorPane.getBottomAnchor()`](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/AnchorPane.html#getBottomAnchor%28javafx.scene.Node%29)是一种静态方法。静态方法与类相关联，而不是与实例相关联，因此应该通过它们的类名而不是通过引用来调用。原因是为了避免混淆最终调用哪个方法，因为静态方法不能被覆盖。另请参阅[https://stackoverflow.com/a/2629846/1611055](https://stackoverflow.com/a/2629846/1611055)以获得一些很好的附加信息。

尝试

```
System.out.println(heightProperty().doubleValue()+" "+AnchorPane.getBottomAnchor(p)); 
```

# java - TreeSets 集合内的集合

> ID：14445627
> 
> 赞同：1
> 
> 时间：2013-01-21T19:16:00.873
> 
> 标签：java, arraylist, treeset

我已经开始实施`TreeSet`in `java`。我想知道，是否可以在集合中创建集合。

例如，我需要创建一个提供输出的集合

```
{{1,2,3,4,5,6,7,8},(1,{1,2,3,4,5,6,7,8})} 
```

问题是我无法添加到我的集合中以提供所需的输出。我什至尝试将我`treeset`的放在一个`arraylist`.

```
ArrayList<TreeSet<Integer>> SET = new ArrayList<TreeSet<Integer>>(); 
```

这仍然没有给我想要的结果，并使我的代码非常复杂。

如您所见，输出有 2 个集合，它们基本上是一个更大集合的元素。

请问有人可以帮忙吗？

我不要求仅提供代码建议！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:18:23.533

`TreeSet<T>`需要一个比较器`T`才能排列其中的元素。您可以`TreeSet`使用“了解”如何比较`TreeSet`s 的自定义比较器来创建 a。这将使外部树集决定您放入其中的树集的顺序：

```
TreeSet<TreeSet<Integer>> outer = new TreeSet<TreeSet<Integer>>(
    new Comparator<TreeSet<Integer>>() {
        public int compare(TreeSet<Integer> lhs, TreeSet<Integer> rhs) {
            Iterator<Integer> li = lhs.Iterator();
            Iterator<Integer> ri = rhs.Iterator();
            while (li.hasNext() && ri.hasNext()) {
                int res = li.next().compareTo(ri.next());
                if (res != 0) return res;
            }
            if (li.hasNext()) return 1;
            if (ri.hasNext()) return -1;
            return 0;
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:19:36.993

您对泛型的使用让您感到困惑。

这个： `ArrayList<TreeSet<Integer>> SET = new ArrayList<TreeSet<Integer>>();`

不将列表放入列表中。

为此，您需要这样做：

```
TreeSet s = new TreeSet();
TreeSet subset = new TreeSet();
s.add(subset); 
```

# jquery - Fancybox2 在下一个/上一个画廊图像过渡期间略微透明

> ID：14445629
> 
> 赞同：0
> 
> 时间：2013-01-21T19:16:04.507
> 
> 标签：jquery, fancybox, transparency, opacity, fancybox-2

我对 Fancybox2 有疑问，在从一个画廊图像过渡到另一个画廊图像的过程中，透明度非常低。您可以在他们的网站上看到一个粗略的示例（图片库示例，第二行）： http: [//fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples) 当图像转换到下一个时，您可以在非常短时间。

现在，否则这不会是一个大问题，但在我的一个网站上，有 2 张非常相似的图像，它们有一个缓慢的“淡入淡出”过渡效果，所以看起来它们有点变回和向前。这里的问题非常明显，因为当转换发生时，您可以看到图像后面的所有网站文本。我已经尝试在fancybox .css 和 .js 中更改各种东西，但似乎都没有帮助。

我还尝试使用较旧的 Fancybox 1.x ，它没有问题，但它也没有交叉淡入淡出，因此图像在下一张图像开始淡入之前完全淡出。所以我不能使用那要么。

如果有人能弄清楚是什么导致了那一点点的透明性，那将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:04:01.957

好吧，我终于想通了，所以我把它放在这里以防其他人想知道。您只需在 fancybox .js 文件的以下部分中将不透明度从 0.1 更改为 1.0：

```
changeOut: function () {
        var previous  = F.previous,
            effect    = previous.prevEffect,
            endPos    = { opacity : 1.0 },
            ... 
```

这样，当旧的画廊图像开始淡出时，下一个画廊图像将已经可见。显然这应该只用于具有“淡入淡出”过渡的相同大小的图像，因此应该将更改复制到 .js 文件的副本中，以便在需要时加载它。

编辑：“changeIn”函数的“startPos.opacity”也可以从 0.1 更改为 0.0，以使过渡开始更加顺畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:44:51.817

在您在fancybox网站上引用的示例中，fancybox`overlay`具有透明度，因此您始终可以看到背景，但是，您始终可以将fancybox的叠加层背景设置为纯色，而（主体）背景将不可见。

**方法 1** (rgba)

```
$(".fancybox").fancybox({
    helpers: {
        overlay: {
            css: {
                'background': 'rgba(64, 64, 64, 1)'
            }
        }
    }
}); 
```

... 最后一个数字设置叠加层的透明度，因此**1 = 全实心**（没有可见主体的背景），无论是否有缓慢的淡入淡出过渡。

见**[JSFIDDLE](http://jsfiddle.net/KZRax/)**

**方法 2**（十六进制）

```
$(".fancybox").fancybox({
    helpers: {
        overlay: {
            css: {
                'background': '#4a4a4a'
            }
        }
    }
}); 
```

...设置一个十六进制颜色值，fancybox 的覆盖将是全实心的（没有可见的身体背景）。

见**[JSFIDDLE](http://jsfiddle.net/X5s5e/)**

# c++ - SSE：将 double** 转换为 _m128d**

> ID：14445630
> 
> 赞同：1
> 
> 时间：2013-01-21T19:16:25.257
> 
> 标签：c++, sse, sse2

将普通的 double* 转换为 _m128d* 非常简单易懂。假设你有一个这样的数组：

```
double arr[8] = {1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0}; 
```

然后`_m128d`演示文稿看起来像这样：

```
_m128d m_arr[8] = { [1.0,2.0] , [3.0,4.0] , [5.0,6.0] , [7.0,8.0] }; 
```

因为总是存储 2 个值，如果你可以这么说（这就是我的想象）。但是，如果我改用 3x3 矩阵，这些值将如何拆分？？？例如：

```
double mat[3][3] = { {1.0, 2.0, 3.0}, {1.0, 2.0, 3.0}, {1.0, 2.0, 3.0} }; 
```

我试图总结矩阵中的所有值，但并没有真正了解如何使用 SSE 有效地做到这一点，因此我需要了解如何处理矩阵`_m128d**`。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:26:11.460

问题是多维数组存储在一个连续的内存块中（C 标准保证这一点）。所以你可以使用一个简单的指针来引用它们：

```
double mat[3][3] = { {1.0, 2.0, 3.0}, {1.0, 2.0, 3.0}, {1.0, 2.0, 3.0} };
double *ptr = (double *)mat; 
```

然后，您可以使用此指针迭代 9 个数字并取消引用它以获得一个双精度数，然后可以将其转换/转换为另一种类型。

# javascript - Javascript Ajax 调用使用带有特殊字符的密码

> ID：14445631
> 
> 赞同：1
> 
> 时间：2013-01-21T19:16:26.953
> 
> 标签：javascript, jquery, ajax, authentication, passwords

我有一个 JavaScript 页面，它可以像下面的代码一样进行 Ajax 调用。PHP 页面位于公司 Intranet 中，需要在域中进行身份验证（不允许使用基本身份验证）。我使用 jQuery 从输入字段中收集用户名 (u) 和密码 (p)。

```
var u = $('#user').val();
var p = $('#pass').val();

$.ajax({
    url: "http://mydomain/mypage.php",
    username: u,
    password: p,
    error: function () {
    }
}).done(function(html) {
        //Do Stuff
}); 
```

该解决方案效果很好……除非用户的密码中有特殊字符。到目前为止，我们似乎受到以下因素的影响：@$+。

在我看来，收集密码与在 JavaScript 中也充当语法运算符的符号存在一些冲突……但是如何正确地将它们转义为密码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:18:21.040

您必须对参数进行 URL 编码。对于 JavaScript，请查看[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。后端框架会理解它，所以不用担心。

# xcode - 错误消息：枚举值“GameMoveNineEnum”未在开关中处理？

> ID：14445632
> 
> 赞同：2
> 
> 时间：2013-01-21T19:16:30.417
> 
> 标签：xcode, enums, switch-statement, semantics

我发现问题很接近，但没有任何帮助，谁能明白我为什么会收到这个错误？代码的“（移动）”第 6 行存在问题。谢谢

```
// move the spirit left/right/up/down
-(BOOL)moveSpiritWidthOrientation:(GameSpirit*)spirit moveEnum:(GameMoveEnum)move setTransform:(BOOL)trans{
    CGPoint gridPoint = [self getGridPointWithPoint:spirit.endPoint];
    CGAffineTransform transform = CGAffineTransformIdentity;
    switch (move) {
        case GameMoveTopEnum:
            gridPoint.y -= 1;
            transform = CGAffineTransformMakeRotation(-M_PI/2);
            break;
        case GameMoveBottomEnum:
            gridPoint.y += 1;
            transform = CGAffineTransformMakeRotation(M_PI/2);
            break;
        case GameMoveLeftEnum:
            gridPoint.x -= 1;
            transform = CGAffineTransformMakeScale(-1, 1);
            break;
        case GameMoveRightEnum:
            gridPoint.x += 1;
            break;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T21:41:02.200

使用`default`. 甚至`default: break;`会做。

# windows - 根据字符串匹配批量提取字符串（删除匹配的字符串）

> ID：14445635
> 
> 赞同：2
> 
> 时间：2013-01-21T19:16:42.863
> 
> 标签：windows, batch-file

我有一个字符串

```
Approximate round trip times in milli-seconds:
    Minimum = 133ms, Maximum = 150ms, Average = 142ms 
```

还有一个 for 循环

```
for /l %%x in (1, 1, 10) do (
    for /f "tokens=7,9" %%a in ('ping -n 10 !ipaddr!') do (
        if "x%%a"=="xAverage" ( 
```

如果第 7 个标记 ( `%a`) 是“平均”，那么我想检查`if /I %%b GTR 300`. 但为此我需要去掉`ms`in `142ms`( `%b`)。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:20:06.443

使用延迟扩展

```
setlocal enabledelayedexpansion 
```

并分配给循环内的临时变量：

```
set avg=%%b
set avg=!avg:ms=! 
```

然后使用`!avg!`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:22:01.827

您无需执行任何操作（只需消除 IF 命令中的 /I 开关）。因为数字也是字符串，所以可以直接做想要的比较，得到正确的结果：

```
if 142ms GTR 300 echo This not appear: 142ms is less than 300
if 350ms GTR 300 echo This appear: 350ms is greater than 300 
```

唯一的问题发生在 Average 正好是 300 毫秒时，但是这种情况可以很容易地解决，将值更改为 301：

```
if 300ms gtr 300 echo This appear but is wrong: 300ms is equal 300, not greater 
if %%b gtr 301 echo OK: This appear when the value is greater 300 in all cases 
```

安东尼奥

# drupal - 如何批量更改实体语言？

> ID：14445636
> 
> 赞同：4
> 
> 时间：2013-01-21T19:16:44.863
> 
> 标签：drupal, drupal-7

我在 drupal 中有一个站点，默认情况下是西班牙语。现在我想添加英文翻译。它有很多带有未定义（'und'）语言的实体“producto”。我想将“es”语言批量分配给他们。在发布这个问题之前，我已经检查了另一个问题[如何批量更改节点语言？](https://stackoverflow.com/questions/1757450/how-to-change-node-languages-in-batches)但我无法完成我想要的。让我解释：

a) 我尝试过 Language Assignement，但它最后一次提交是 1 年前，它有一个可能导致数据丢失的严重错误（我也重现了错误）我也尝试了用户 barami 的补丁，但数据丢失仍然存在。

b）查看批量操作：我试过了，但它只更新数据库表“节点”中的字段。不是其他的。

c）所以我检查了drupal数据库的工作原理并创建了一个sql脚本，这也会导致数据丢失：

```
-- Step 1 Node lang
update node set language='es' where type='producto';

-- Step 2 body field
update field_data_body set language='es' where bundle='producto';

-- Step 3 Field comment vody
update field_data_comment_body set language='es' where bundle='comment_node_producto';

-- Step 4 For each field of producto, update language
update field_data_field_precio set language='es' where bundle='producto';
update field_revision_field_precio set language='es' where bundle='producto';

(...) 
```

我激活了以下翻译模块：国际化、块语言、字段翻译、菜单翻译、多语言内容、多语言选择、​​同步翻译、分类翻译、翻译重定向、翻译集

我的 sql 脚本做错了什么？是否有其他插件可以完成我想做的事情？任何建议将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T22:24:33.250

以下是我在我的网站上批量设置语言的方法：

1.  使用 Views Bulk Optimization，选择您要更改的所有节点，使用“更改值”选项，然后将值更改为您想要的语言。

2.  完成此操作后，编辑节点时字段值将不会出现，因此您需要运行脚本，例如`UPDATE database.field_data_body SET language='en' WHERE bundle='page'`（根据需要使用您的数据库名称、字段名称和捆绑包）。

重要提示：如果您有任何自定义 url 别名，由于 pathauto 的问题，它们将被此方法覆盖，但有一个解决方法：首先转到 /admin/config/search/path/settings，然后更改 '将操作”选项更新为“什么都不做。保持旧别名不变。'，然后在运行“视图批量操作”操作后更改回此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T07:08:19.377

假设您可以创建一个列出实体的视图，您可以使用 Views Bulk Operations 模块来执行此操作。 [前几天我刚刚解释了如何为 Drupal Answers 上的节点执行此操作。](https://drupal.stackexchange.com/a/55296/5147)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:00:54.283

另一个解决方案是只执行第一个 SQL，因为我发现字段语言必须保持“und”。

```
update node set language='es' where type='producto'; 
```

# html - 重新缩放 iFrame 内容适用于 Chrome - 而不是其他浏览器 - 任何解决方案？

> ID：14445637
> 
> 赞同：0
> 
> 时间：2013-01-21T19:16:45.493
> 
> 标签：html, css, iframe

重新缩放 iFrame 内容适用于 Chrome，但不适用于其他浏览器。有什么解决办法吗？我想要一个跨浏览器解决方案，用于重新缩放 iframe 以放置表单。

它不会在 IE8 和 Firefox 15.0.1 中重新缩放。它在这些浏览器中显示为 100%，但在 Chrome 中减少了。有什么想法吗？

```
<iframe src="http://www.apple.com/"
frameborder="0" noresize="noresize" scrolling="no"
width="66%" margin: 0 auto; align= "left "seamless="seamless"style="
-webkit-transform:scale(0.5);-moz-transform-scale(0.5);
width: 400px; height: 400px;"></iframe> 
```

[http://jsfiddle.net/DisEngaged/t9yhm/](http://jsfiddle.net/DisEngaged/t9yhm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:13:27.527

您犯了一个小错字/对 Firefox 使用了错误的语法。您使用了 a`-`而不是 a `:`。

现场示例：http: [//jsfiddle.net/t9yhm/3/](http://jsfiddle.net/t9yhm/3/)

**代替：**

```
-moz-transform-scale(0.5); 
```

**它应该是：**

```
-moz-transform:scale(0.5); 
```

另外，值得注意的是，最新版本的 Firefox 支持无前缀版本：

```
transform:scale(0.5); 
```

**编辑 ：**

抱歉，我刚刚注意到您想要一个“跨浏览器”解决方案。下面的 CSS3 将支持最新版本的 Firefox、Chrome 和 IE9+：

```
iframe{
    width: 400px;
    height: 400px;
    margin: 0 auto;
    -webkit-transform: scale(0.5);
    -moz-transform: scale(0.5);
    -ms-transform: scale(0.5);
    transform: scale(0.5);
} 
```

对于 IE8 及以下版本，您可以使用一个过滤器，但它的语法很复杂：

```
/* IE8+ - must be on one line*/ 
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.5, M12=0, M21=0, M22=0.5, SizingMethod='auto expand')";

/* IE6 and 7 */ 
filter: progid:DXImageTransform.Microsoft.Matrix(
        M11=0.5,
        M12=0,
        M21=0,
        M22=0.5,
        SizingMethod='auto expand'); 
```

为了帮助您计算矩阵值，您可以使用此站点：[http ://www.useragentman.com/IETransformsTranslator/](http://www.useragentman.com/IETransformsTranslator/)

# android - android中的websockets和同步适配器

> ID：14445640
> 
> 赞同：1
> 
> 时间：2013-01-21T19:17:02.317
> 
> 标签：android, websocket, android-syncadapter, application-design

我正在设计一个应用程序，用于从 Web 服务（如 REST API）获取一些数据并将其显示给用户：

我正在考虑将 Sync Adapter 与 Content Provider API 一起使用：

1.  Sync Adapter 处理本地 DB 和远程 DB 之间的数据流。
2.  内容提供者 API 将数据加载到 UI 中。

我的问题是，如果远程应用程序具有服务器推送支持（使用 Socket.IO 左右），我应该如何设计应用程序来利用此功能？因为据我了解，SyncAdapter 何时运行由 SyncManager 确定。所以我不能确保只有在服务器推送时才完成同步。我想知道这是否可能，即使没有在前台或后台运行应用程序。即，仅在同步适配器运行的情况下。

提前感谢您的任何回复。

PS：我刚刚开始设计android应用程序，如果我错了，请原谅我/纠正我。

跟进：

1.  我对云消息传递 API（如 GCM）不感兴趣。如果用户愿意，我想将数据保密。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:28:53.163

如果您的应用程序将运行一段时间，您真的不想保持与服务器的持续连接，因为这会消耗大量电池。

听起来你正在寻找这个：http: [//developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

使用 gcm 您的应用程序可以在您的服务器上有更新时收到通知。

# jquery - 交换 div 内容时无法使用 jQuery Mobile 保留 CSS 主题

> ID：14445650
> 
> 赞同：0
> 
> 时间：2013-01-21T19:17:46.843
> 
> 标签：jquery, html, css, dynamic

我认为标题是不言自明的，但我们开始吧：我是 jQuery 和移动开发的新手。在使用 jQuery Mobile 标准 .css 文件（我实际上在这里找到的解释：http: [//www.adobe.com/devnet/dreamweaver/articles/theme-control-jquery-mobile.html](http://www.adobe.com/devnet/dreamweaver/articles/theme-control-jquery-mobile.html)）时，我正在尝试动态交换一个 div 内容通过 JS 函数传递给另一个，但 css 主题不会延续。这是我的代码的简化版本：

```
<!DOCTYPE html> 
<html> 
  <head> 
    <title>My Page</title> 
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
      <script src="jquery-1.8.2.min.js"></script>
      <script src="jquery.mobile-1.2.0.min.js"></script>
      <script type="text/javascript">
        function callNext () {
        $('#div_auth').html($('#div_functions').html());
      }
      </script> 
  </head> 
  <body> 

    <div data-role="page" id="div_main">

      <div data-role="header">
        <h1>Phonegap Test</h1>
      </div>

      <div data-role="content" id="div_auth">   
        <form name="fields" action="">
          Name: <input type="text" id="login" name="login"/><br> 
          <button type="button" onclick="callNext();">Send</button>
        </form> 
      </div>

    </div>

    <div data-role="content" id="div_functions">
      <form name="functions" action="">
        <button type="button">Client List</button> <br>
        <button type="button">Price List</button>
      </form>
    </div>

  </body>
</html> 
```

因此，当加载 div_auth 内容时，它默认加载 data-theme="a" （我想这在 div_main 而不是 div_auth 中隐含，但无论如何）。但是，当我单击按钮时，即使我为 div_functions 指定了数据主题，按钮也会呈现为标准的“无 css”html 按钮。

在任何人开始怀疑之前，请注意，我需要通过 JS 函数调用 div 交换，因为这只是我开始开发的 Phonegap/Cordova 应用程序的简化，并且该调用模拟了它的实际工作方式。但是，我测试了上面的代码，它（错误）的行为是一样的

**编辑：**

为了让斯科特的回答更有意义，我尝试了一些东西：

```
<div data-role="content" id="div_auth" data-theme="b">  
  <form name="fields" action="">
    Name: <input type="text" id="login" name="login"/><br> 
    <button data-theme="a" type="button" onclick="callNext();">Send</button>
  </form>   
</div> 
```

如您所见，我将 data-theme="b" 显式添加到 div_auth 并将 data-theme="a" 添加到包装按钮。令我惊讶的是，它确实有效，其中 div_auth 采用蓝色主题，而按钮以黑色呈现。但是，在第二个 div (div_functions) 中使用相同的方法，即使使用相同的主题也会导致按钮没有附加 css 样式：

```
<button data-theme="a" type="button">Price List</button> 
```

仍然呈现一个“陈旧的按钮”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:28:25.317

匹配的 css 样式也`#div_functions`必须匹配`#div_auth`。您的 javascript 行不复制任何样式，只复制内容。当该内容附加到 时`#div_auth`，它将采用与该元素匹配的任何 CSS 样式，在这种情况下，这似乎什么都不是。最简单的做法是为 创建 CSS 样式`button`，这将匹配您的按钮标签，无论它们在 DOM 中的什么位置。

# php - 用户在 javascript 中提供的数组名称

> ID：14445654
> 
> 赞同：0
> 
> 时间：2013-01-21T19:18:19.570
> 
> 标签：php, javascript, jquery, ajax, json

所以我使用 AJAX 从我的数据库中获取行，然后将它们转换为具有变量标识符的数组 这是 PHP 代码：

```
 $query_val = $_GET["val"];
  $result = mysql_query("SELECT * FROM eventos_main WHERE nome_evento LIKE '%$query_val%' OR local_evento LIKE '%$query_val%' OR descricao_evento LIKE '%$query_val%'");
  for($i=0;$i<mysql_num_rows($result);$i++){
    $array = array();
    $array[$query_val] = mysql_fetch_row($result);       //fetch result 
    echo json_encode($array);
  } 
```

这是javascript：

```
$('#s_query').keyup(function(){
        var nome = document.getElementById('s_query').value;
        $.ajax({                                      
            url: 'search.php',        
            data: '&val='+nome,
            dataType: 'json',     
            success: function(data)
        {
            console.log(nome);
            var image_loc = data.nome[7];
            console.log(image_loc); 
```

如果我将线路更改`var image_loc = data.nome[7];`为`var image_loc = data.nidst[7];`它可以完美运行。Nidst 是我搜索的术语。此代码返回错误：“未捕获的类型错误：无法读取未定义的属性 '7'”。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:28:29.923

`data.nome[7];`正在尝试访问不存在的`data`named属性。`nome`由于您声明了一个`nome`包含所需属性名称的变量，因此您需要将该**值**引用为属性名称，例如`data[nome][7]`.

示例：如果`var nome = 'foo'`, then`data[nome][7]`将评估`data['foo'][7]`为与 相同的`data.foo[7]`。

您所做的`data.nome[7]`是与 相同的`data['nome'][7]`，唯一可行的方法是 if `var nome = 'nome'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:21:59.017

利用：

```
var image_loc = data[nome][7]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:28:08.213

另一个问题是服务器不响应有效的 json 数据。尝试修改代码：

```
$array = array();
for ($i = 0; $i < mysql_num_rows($result); $i++) {
    $array[$query_val] = mysql_fetch_row($result);
}
die(json_encode($array)); 
```

# entity-framework - 一对零对一关系的“添加外键属性”

> ID：14445657
> 
> 赞同：1
> 
> 时间：2013-01-21T19:18:22.743
> 
> 标签：entity-framework

我有一个实体模型，它定义了两个实体之间的一对零关联。IE

```
A  [0..1]..[1]  B
A has one reference to B. B can have a reference to A. 
```

在定义此关联时，我希望在“A”中拥有“B”的 ID。例如 B_ID 属性。由于某种原因，这样做的选项 - '将外键属性添加到'A'实体' - 被禁用。我不知道为什么会这样，而且我无法弄清楚如何手动操作。

如果有人可以提供帮助，或者给我一个理由，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:24:44.337

我认为以下文章描述了您正在尝试做的事情以及如何做：

[http://www.develop-one.net/blog/2011/06/29/EntityFrameworkModelFirstOnetoOneRelationship.aspx](http://www.develop-one.net/blog/2011/06/29/EntityFrameworkModelFirstOnetoOneRelationship.aspx)

您似乎缺少的一点（从您的描述中）是修改现有的 1-* 关系而不是创建一个新关系。我假设您正在使用设计器。

# python - ValueError: int() 以 10 为底的无效文字：'3"\r'

> ID：14445659
> 
> 赞同：0
> 
> 时间：2013-01-21T19:18:29.890
> 
> 标签：python

我的 csv 文件 (test.csv) 内容示例如下： 注意：我的 test.csv 文件大约 60MB。

```
"Position","Value"
"2545600","19"
"2545601","19"
"2545602","19"
"2545603","19"
"2545604","20"
"2545605","20"
"2545606","21"
"2545607","22"
"2545608","21"
"2545609","20"
"2545610","21"
"2545611","18"
"2545612","19"
"2545613","21"
"2545614","21"
"2545615","21"
"2545616","21"
"2545617","22"
"2545618","25"
"2545619","25" 
```

我的python代码（test.py）如下：

```
#!/usr/bin/python
import sys

txt = open(sys.argv[1], 'r')
out = open(sys.argv[2], 'w')
mil = float(sys.argv[3])

out.write('chr\tstart\tend\tfeature\t'+sys.argv[2]+'\n')

for line in txt:
    if 'Position' not in line:
        line = line.strip('",\n')
        line = line.split('","')

        line[1] = str(int(line[1])/mil)

        out.write('gi|255767013|ref|NC_000964.3|\t'+line[0]+'\t'+line[0]+'\t\t'+line[1]+'\n')

txt.close()
out.close() 
```

我的命令行：

```
python test.py test.csv test.igv 5 
```

运行命令后出现错误：

```
Traceback (most recent call last):
  File "test.py", line 15, in <module>
    line[1] = str(int(line[1])/mil)
ValueError: invalid literal for int() with base 10: '3"\r' 
```

但是，如果我创建一个新的空 csv 文件，即 small.csv 并从我的 test.csv 文件中仅复制/粘贴几行（如上面的示例）。然后它成功运行该命令。

```
python test.py small.csv small.igv 5 
```

输入 small.csv：

```
"Position","Value"
"2545600","19"
"2545601","19"
"2545602","19"
"2545603","19"
"2545604","20"
"2545605","20"
"2545606","21"
"2545607","22"
"2545608","21"
"2545609","20" 
```

输出small.igv：

```
chr start   end feature small.igv
gi|255767013|ref|NC_000964.3|   2545600 2545600     3.8
gi|255767013|ref|NC_000964.3|   2545601 2545601     3.8
gi|255767013|ref|NC_000964.3|   2545602 2545602     3.8
gi|255767013|ref|NC_000964.3|   2545603 2545603     3.8
gi|255767013|ref|NC_000964.3|   2545604 2545604     4.0
gi|255767013|ref|NC_000964.3|   2545605 2545605     4.0
gi|255767013|ref|NC_000964.3|   2545606 2545606     4.2
gi|255767013|ref|NC_000964.3|   2545607 2545607     4.4
gi|255767013|ref|NC_000964.3|   2545608 2545608     4.2
gi|255767013|ref|NC_000964.3|   2545609 2545609     4.0 
```

这就是我想要的。那么问题来了，为什么我不能在更大的 csv 文件上做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:22:37.797

尝试

```
for line in ..... :
     line = line.strip() 
```

这将从行字符串中删除行尾。

更好的解决方案：使用 Python 的 csv 模块为您处理这些方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:48:25.453

在这种情况下，使用[csv](http://docs.python.org/2/library/csv.html#)模块要好得多。从 csv 文件读取的每一行都作为字符串列表返回。不会出现剥离空格的问题，你可以在函数的参数中指定分隔符（这里不需要）`csv.reader`。

```
import csv
import sys

out = open(sys.argv[2], 'w')
mil = float(sys.argv[3])

out.write('chr\tstart\tend\tfeature\t'+sys.argv[2]+'\n')
with open(sys.argv[1], 'rb') as f:
    reader = csv.reader(f, delimiter=',')
    headers = reader.next()    # Consider headers separately
    for line in reader:
        line[1] = str(int(line[1])/mil)
        out.write('gi|255767013|ref|NC_000964.3|\t'+line[0]+'\t'+line[0]+'\t\t'+line[1]+'\n')
out.close() 
```

`python test.py test.csv test.igv 5 && cat test.igv`应该显示预期的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:31:35.330

正如所建议的那样，[csv](http://docs.python.org/2/library/csv.html)模块更有帮助。

例如：

```
import csv
f = open("ex.csv")
for line in csv.reader(f):
    print line 
```

和数据

```
"Position","Value"
"2545600","19"
"2545601","19"
"2545602","19"
"2545603","19" 
```

给出的输出

```
['Position', 'Value']
['2545600', '19']
['2545601', '19']
['2545602', '19']
['2545603', '19'] 
```

这更易于管理。

[csv](http://docs.python.org/2/library/csv.html)模块也可以编写 csv 文件。

# wpf - 如果用户握住滑块的拇指，则滑块值更改时滑块拇指不会更改

> ID：14445660
> 
> 赞同：1
> 
> 时间：2013-01-21T19:18:31.603
> 
> 标签：wpf, slider, mouse

我有一个名为 ImageTemplate 的自定义用户控件。该控件包含一个图像，并具有允许用户对图像显示进行操作的功能。当特定事件触发时，图像将切换并且 ImageTemplate 的设置（显示新图像）将重置为默认值。

ImageTemplate 的一项功能是允许用户放大和缩小，当图像更改时，必须将缩放级别设置回默认值 (100%)。

用户可以通过三种方式进行缩放：

1.  按住控制按钮并使用鼠标滚轮放大和缩小

2.  使用组合框选择 20% 到 200% 之间的缩放级别

3.  使用滑块控件选择缩放级别

我在使用滑块控件时遇到问题。

对于 ImageTemplate，我已经实现了一个名为 Zoom 的依赖属性，并且我处理了这个属性的 DependencyPropertyChangedEvent，以便我可以调用执行缩放缩放的逻辑。

滑块控件的值绑定到 Zoom 属性，如下所示：

```
<Slider x:Name="sldZoom"
        Minimum="{Binding MinZoom, Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" 
        Maximum="2" 
        TickFrequency="0.2"
        IsSnapToTickEnabled="True"
        SmallChange=".2" VerticalAlignment="Center" Width="200">
        <Slider.Value>
            <Binding Mode="TwoWay" Path="Zoom"
                      RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}"
                      UpdateSourceTrigger="PropertyChanged"
                      ValidatesOnDataErrors="True"
                      ValidatesOnExceptions="True">
        </Binding>
    </Slider.Value>
</Slider> 
```

现在，当用户拖动滑块时，控件会缩放到适当的级别。此外，当用户使用鼠标滚动按钮或 ComboBox 进行缩放时，滑块会更改到正确的位置。

当我拖动滑块控件的拇指并且图像发生变化时，会出现问题。

我希望拇指移回“100%”位置，因为它是图像的默认缩放；但是它不会移动到那个位置。

我该如何解决这个问题？

谢谢，

-弗林尼

# magento - Magento - 一次打印多个装箱单

> ID：14445664
> 
> 赞同：-1
> 
> 时间：2013-01-21T19:18:48.093
> 
> 标签：magento, magento-1.7

我目前正在尝试在 Magento 的管理部分的销售 -> 订单视图中打印所有已检查订单的装箱单。

每次我从“操作”下拉列表中选择“打印装箱单”并单击提交时，它只会返回一个包含单个页面的 pdf...

是否可以一次打印多个装箱单？

非常感谢任何输入，谢谢！

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:26:04.850

在管理面板中，选择销售 > 发货。勾选所有必需的包装复选框，然后按打印。它们必须首先按订单创建，但出于批量打印的目的，从发货中打印是可行的方法。

# python - python字典中循环（for循环）的顺序是什么

> ID：14445667
> 
> 赞同：9
> 
> 时间：2013-01-21T19:18:55.990
> 
> 标签：python, dictionary, for-loop

> **可能重复：**
> [为什么 python 像这样订购我的字典？](https://stackoverflow.com/questions/526125/why-is-python-ordering-my-dictionary-like-so)

我对从以下得到的输出有点困惑。我不明白执行循环的顺序。

```
domains = { "de": "Germany", "sk": "Slovakia", "hu": "Hungary",
    "us": "United States", "no": "Norway"  }

for key in domains:
    print key 
```

这里的输出是

```
sk
de
no
us
hu 
```

但不是

```
de
sk
hu
us
no 
```

同样，这里

```
num = {1:"one",4:"two",23:"three",10:"four"}
for key in num:
    print key
output is
1
10
4
23 
```

但不是

```
1
4
23
10 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:19:53.087

Python 字典[不保留排序](http://docs.python.org/2/library/stdtypes.html#dict.items)：

> 键和值以非随机的任意顺序列出，因 Python 实现而异，并且取决于字典的插入和删除历史

CPython 中的字典被实现为[哈希表](http://en.wikipedia.org/wiki/Hash_table)，以实现快速查找和成员资格测试，并且枚举键或值按照项目在该表中列出的顺序进行；它们插入的位置取决于键的哈希值，以及之前是否有任何东西被哈希到同一个插槽。

您必须在每次显示时对键进行排序，或者使用不同类型的数据结构来保留排序。Python 2.7 或更高版本有一个[`collections.OrderedDict()`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)类型，或者您可以使用一个二值元组列表（此时单个键值对的查找会很慢）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T19:20:57.707

Python 字典没有顺序。但是，您可以使用该`sorted(domains)`函数指定订单。默认情况下，它使用键进行排序。

```
for key in sorted(domains):
    print key 
```

会产生

```
de
hu
no
sk
us 
```

如果要根据值进行排序，可以使用类似`sorted(domains.items(), key = lambda(k, v): (v, k))`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-21T19:20:30.593

顺序未指定。但是，它保证在没有修改字典的情况下保持不变。

您可以在迭代时对键进行排序：

```
for key in sorted(domains):
    print key 
```

最后，需要注意的是，较新版本的 Python 具有[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)保留*插入顺序*的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T19:22:02.200

如果你想要一个 Python 中的有序字典，你必须使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T19:22:12.797

根据定义，字典没有顺序。这将其置于危险的“未定义行为”区域 - 在您编程的任何内容中依赖它都不是一个好主意，因为它可能会在实现/实例之间突然发生变化。即使它现在正好按你想要的方式工作......它以后会为你埋下地雷。

# rest - Java 网络架构

> ID：14445668
> 
> 赞同：0
> 
> 时间：2013-01-21T19:18:56.517
> 
> 标签：rest, web-applications, servlets

我有兴趣建立一个 URL 拍卖研究网站。它将被构造为标准的[Presentation Layer <-->Business Layer <--->Data Layer]。该站点将有一个 index.html 允许用户输入他们感兴趣的 url。该 index.html 然后将通过 servlet 调用 doPost 方法，该方法反过来会输出一个结果页面，说明该 URL 是否出售像这样：

索引.html

```
<html>
<head>
<title>URL Auction Search Page</title>
</head>
<body>
<CENTER>
 <FORM ACTION="/ResultServlet/Results" METHOD=GET>
   <INPUT TYPE=TEXT NAME="st">
   <INPUT TYPE=SUBMIT VALUE=Submit>
  </FORM>
</CENTER>
</body>
</html> 
```

小服务程序：

```
@WebServlet("/Results")
public class Results extends HttpServlet {
    private static final long serialVersionUID = 1L;
       public static String str="";

    private String businessLogic(String q){
        try {
            str = new compute.URL.GetAvailURI( "https://www.registerdomains.com/auctionAPI/Key:a05u3***1F2r6Z&urlSearch="+q);
            /*more boring number crunching */
            return str;
            }
/*
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
    }
*/
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Results r = new Results();
        String st = request.getParameter("st");
        response.sendRedirect("results/resultActionURL.html?st="+r.businessLogic(st)");

    }

} 
```

但是，我需要处理来自结果页面的其他 2 个链接。即，一个名为 WhoOwnsThis.html 的链接获取 whois 数据并将此信息地理映射到 Google 地图上。此外，AppraiseResult.html 可以对相关 URL 进行实时评估。好的 - 这 2 个页面需要时间（非常松散地说，我们会说 2 秒。EA。）所以我向用户展示结果页面，然后我在后台继续并为每个其他页面创建数据两个结果页面。

**问题** - 我如何处理这三个结果页面的*状态性？*我的第一个想法是每次创建两个附加结果页面（WhoOwnsThis 和 AppraiseResult）时创建一个唯一目录。然后我可以将唯一的目录名称作为参数嵌入到结果页面 url 中，这样当他们单击指向其他 2 个结果页面的链接时，目录名称将从结果页面 url 中作为 .js var 提取并插入到获取正确的页面。但是，我也在阅读 REST 并想知道这是否是处理此事务状态的更好方法。在这种情况下，行业标准会推荐什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:24:05.367

您真的想使用像 Servlet 这样的低级 API 吗？如果您心胸开阔，请查看 Play Framework 2.0 并获得与其他平台上的每个人一样的体验。如果没有，Spring MVC 是一个不错的选择。如果您更喜欢只有 JavaScript 前端，那么 JAX-RS 是一个不错的选择。

请注意，Play Framework 2.0 包含它自己的类重载机制，但您也可以在其他框架中使用 JRebel 获得相同的体验。

一般来说，状态最好保存在数据库中，因此很容易扩展。Java EE 6 Web Profile 还为您提供有状态会话 bean。Spring MVC 具有会话范围的 bean。他们每个人都以自己的方式进行操作，但是由于这是一个基本概念，因此他们的网站上有很多文档，我不打算将其粘贴在这里。

玩得开心，欢迎来到简单的 Java 时代 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:23:53.833

我认为更现代的分层是四层：

```
View->Controller->Service->Persistence. 
```

您可以选择要求 Java EE 应用程序服务器通过会话在 Web 层中为您维护状态，或者作为服务层中的有状态服务。

# shell - 如何判断是否处理 Powershell cmdlet 中的最后一行输入？

> ID：14445673
> 
> 赞同：0
> 
> 时间：2013-01-21T19:19:17.827
> 
> 标签：shell, powershell

我想知道如何测试我当前是否正在处理 Powershell 中命令行输入的最后一行（这可能不是正确的术语）。

我在日志文件中有一系列 SQL 语句，我想构建它们的联合。目前我有（在一行上，但为了便于阅读，我将它们分开显示）

```
echo "SELECT * FROM ( " > union.log
cat sql.log | %{$_ + "`n UNION `n"} >> union.log
echo " ) AS qwerty " >> union.log 
```

但是，这会导致输出多余`UNION`。`%{...}`因此，如果当前行是最后一行，然后不附加字符串“UNION” ，我想在 cmdlet 中进行测试（我认为这就是所谓的）。

这甚至可能吗？

* * *

**PS-**这是一个简化的例子，在我的真实情况下，我必须做一些 grepping 和 substring 来提取查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:23:06.563

`-join`如果您想获取一系列字符串并将它们与它们之间的某些内容合并在一起，则最好使用运算符。

例如。

```
@('a', 'b', 'c') -join ':' 
```

结果`a:b:c`。

# ios - 如何在 UITabBarController 内的 UINavigationController 内导航？

> ID：14445697
> 
> 赞同：0
> 
> 时间：2013-01-21T19:21:19.157
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller

我有一个项目是标签栏控制器。每个选项卡通常都有一个 UINavigationController。我遇到的问题是：我需要一个带有很多导航的新标签（大约 30 个导航项分为 4-8 组。问题：我的导航栏已经满了（不能使用导航控制器（或栏）。什么我需要的是导航栏下方的导航（它有一个全局搜索栏和其他全局图标填充它）。我怎样才能最好地实现这个？

我现在拥有的：我在导航栏下方创建了一个 UIScrollView 作为我的“手动”导航栏。这是一个滚动视图，因为我不知道（未来）我将拥有多少个导航项“分组”（目前只有 4 个）。Each of these groups is represented by a UIButton, some of which should immediately present a view, and others which present a popover with further navigation items, which when selected will present a view.

问题：我想要在上面提到的导航视图下有一个“内容视图”，我可以在其中根据用户的导航选择呈现内容。我必须支持 iOS 5.0，所以我不能使用故事板容器视图（很遗憾）。我将展示 3 种类型（以后可能会更多）的内容视图，我想将它们创建为单独的视图控制器，然后在我提到的导航中选择合适的视图控制器。我可以使用第 3 方导航控制器吗？我必须“自己动手”吗？任何建议将不胜感激。

这是我需要实现的“拼凑”图片： ![在此处输入图像描述](../Images/649428e721c3b743c942a9ce1f13e733.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:59:11.547

我会将您所称的内容视图作为主视图的子视图，并将其用作您将添加 childViewController 视图的视图。如果您还没有阅读自定义容器控制器，您应该这样做，但使用它们的基本方法是这样的。

您在问题中显示其视图的控制器将是自定义容器控制器。您可以在 viewDidLoad 方法中加载初始控制器，然后在子视图中切换控制器（我称之为 self.containerView）以响应用户从滚动条中选择的内容：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    UIViewController *initial = [self.storyboard instantiateViewControllerWithIdentifier:@"InitialVC"];
    [self addChildViewController:initial];
    [initial.view.frame = self.containerView.bounds];
    [self.containerView addSubview:initial.view];
    self.currentController = initial;
}

-(void)switchToNewViewController:(UIViewController *) cont {
    [self addChildViewController:cont];
    cont.view.frame = self.containerView.bounds;
    [self moveToNewController:cont ];
}

-(void)moveToNewController:(UIViewController *) newController {
    [self.currentController willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentController toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{}
         completion:^(BOOL finished) {
             [self.currentController removeFromParentViewController];
             [newController didMoveToParentViewController:self];
             self.currentController = newController;
         }];
} 
```

这应该给你基本的想法。我从我的一个测试项目中得到了这个，所以它可能需要一些调整。

# css - 多个边框（带边框的 div 上的 Div）

> ID：14445699
> 
> 赞同：0
> 
> 时间：2013-01-21T19:21:24.493
> 
> 标签：css, border

我想做的是：http: [//gyazo.com/e1bd6baee9730b61655c43bf05a071f7.png](http://gyazo.com/e1bd6baee9730b61655c43bf05a071f7.png)

问题：

黑色边框在右侧不起作用。

图片：

[http://gyazo.com/34b53980f862700b7444f433382b8b2c](http://gyazo.com/34b53980f862700b7444f433382b8b2c)

```
<body class="container">
    <div class="contentbody">
        <div class="content">
        </div>
    </div>
</body>

.contentbody {
margin-top: 10;
border: solid 1px #000;

}

.content {
background: #232224;
width: 940px;
height: 500px;
border: solid 1px #373638;
} 
```

我做错了什么？考虑到如果您在边框上使用边框，它应该作为两个边框工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:24:59.277

使用 css3...

[例子](http://jsfiddle.net/zBqUU/3/)

```
<div id="box-shadow"></div>

#box-shadow {
    width: 200px; 
    height: 75px;
    background-color: orange;
    border: blue solid 1px;
    box-shadow: 1px 0px 10px 5px rgba(0,0,255,0.5);
    -webkit-box-shadow: 1px 0px 10px 5px rgba(0,0,255,0.5);
} 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:25:15.157

[http://jsfiddle.net/Lucak/](http://jsfiddle.net/Lucak/)

```
.contentbody {
    display: inline-block;
    margin-top: 10;
    border: solid 1px #000;
}
.content {
    background: #232224;
    border: solid 1px #373638;
    width: 940px;
    height: 500px;
} 
```

# wpf - WPF 绑定到类中的属性

> ID：14445702
> 
> 赞同：0
> 
> 时间：2013-01-21T19:21:34.053
> 
> 标签：wpf, windows-phone-7, xaml

我正在尝试将文本框绑定到属性。

我想绑定到文本框的属性在一个单独的类中：

```
public void errorText {get;set;} 
```

在我的主页中，我已将数据上下文设置为 errorText 属性所在的类的实例，以便现在我的主页知道我的类具有该属性：

```
this.Datacontext = instance; 
```

现在在我的 xaml 中，我将属性绑定到文本框：

```
 <TextBlock Height="121" HorizontalAlignment="Left" Margin="100,613,0,0" Name="TextBlockForErrorsMainPage" Text="{Binding errorText}" VerticalAlignment="Top" Width="285" Foreground="#FFEF1212" TextWrapping="Wrap" /> 
```

但是，当我运行该应用程序时，我并不高兴……对此有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:26:21.847

你返回无效

```
public string errorText {get;set;} 
```

并且可能还需要实现 iNotifyPropertyChanged。

如果您在 Initialize() 之前设置该值，那么 UI 将看到该值。

# c# - c#我需要帮助将文本插入为gridview中的链接按钮生成的代码中

> ID：14445703
> 
> 赞同：0
> 
> 时间：2013-01-21T19:21:37.593
> 
> 标签：c#, gridview, linkbutton

这是 .aspx 代码：

```
<asp:GridView ID="gvLeads" runat="server" DataSourceID="sdsAdminLeads" AllowSorting="True" 
    EnableModelValidation="True" DataKeyNames="leadKey" AutoGenerateColumns="False"
    OnSelectedIndexChanged="gvLeads_selected" OnRowCommand="gvLeads_RowCommand" OnDataBound="gvLeads_DataBound">
    <Columns>
        <asp:CommandField ShowSelectButton="true" SelectText="Edit" ButtonType="Link" />
        <asp:ButtonField CommandName="Details" Text="Details" /> 
    ...(other BoundFields)
    </Columns>
</asp:GridView> 
```

这会在页面呈现时生成以下内容：

```
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$0')">Edit</a></td>
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$0')">Details</a></td>
...
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$1')">Edit</a></td>
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$1')">Details</a></td>
... 
```

页面设计者希望我在 td 和锚标记之间放置一个 div 标记，以便生成的结果 html 将是：

```
<td><div class=editPanel id=edit0></div><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$0')">Edit</a></td>
<td><div class=detailPanel id=detail0></div><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$0')">Details</a></td>
...
<td><div class=editPanel id=edit1></div><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$1')">Edit</a></td>
<td><div class=detailPanel id=detail1></div><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$1')">Details</a></td>
... 
```

我试过把这段代码放在 gvLeads_DataBound 函数中：

```
for (int i = 0; i < gvLeads.Rows.Count; i++)
{
    ((LinkButton)gvLeads.Rows[i].Cells[0].Controls[0]).Text = "<div class=editPanel id=edit" + i + "></div>" + ((LinkButton)gvLeads.Rows[i].Cells[0].Controls[0]).Text;
    ((LinkButton)gvLeads.Rows[i].Cells[1].Controls[0]).Text = "<div class=detailPanel id=detail" + i + "></div>" + ((LinkButton)gvLeads.Rows[i].Cells[1].Controls[0]).Text;
} 
```

但这会导致标签被放置在锚标签中，如下所示：

```
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$0')"><div class=editPanel id=edit0></div>Edit</a></td>
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$0')"><div class=detailPanel id=detail0></div>Details</a></td>
...
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Select$1')"><div class=editPanel id=edit1></div>Edit</a></td>
<td><a href="javascript:__doPostBack('ucLeads$gvLeads','Details$1')"><div class=detailPanel id=detail1></div>Details</a></td> 
```

所以 LinkBut​​ton 控件的 .Text 属性不是我需要的，但我不知道单元格中什么控件的什么属性用于将 div 文本放在我想要的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:34:52.953

在您的数据绑定中

```
e.Row.Cells[0].Controls.AddAt(0, new LiteralControl("<div class=editPanel id=edit" + e.Row.RowIndex.ToString() + "><div>"));
e.Row.Cells[1].Controls.AddAt(0, new LiteralControl("<div class=detailPanel id=detail" + e.Row.RowIndex.ToString() + "><div>")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:27:02.693

在您的列标签中，您可以使用 ItemTemplate 标签将多个项目组合成一列。我认为这应该做你需要的。

我相信它会要求您使用 runat 属性标记 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:33:23.533

`LiteralControl`在单元格控件集合的开头添加一个div 应该可以做到这一点。

```
gvLeads.Rows[i].Cells[0].Controls.AddAt(0, 
      new LiteralControl("<div class=editPanel id=edit" + i + "></div>")); 
```

# c - 将字符串文字作为定义为指针的函数参数传递

> ID：14445705
> 
> 赞同：13
> 
> 时间：2013-01-21T19:21:59.577
> 
> 标签：c, pointers

我正在阅读 Kernighan 和 Richie 的*The C Programming Language*中关于数组和指针的章节。

他们举了一个例子：

```
/* strlen:  return length of string s */
int strlen(char *s)
{
    int n;

    for (n = 0; *s != '\0'; s++)
        n++;
    return n;
} 
```

然后说：

“既然`s`是指针，递增它是完全合法的；`s++`对调用的函数中的字符串没有影响`strlen`，而只是增加 strlen 的指针的私有副本。这意味着像

```
strlen("hello, world");  /* string constant */
strlen(array);           /* char array[100]; */
strlen(ptr);             /* char *ptr; */ 
```

一切正常。”</p>

除了第一个调用示例之外，我觉得我理解了所有这些：为什么或如何将字符串文字`"hello, world"`视为`char *s`? 这是一个怎样的指针？该函数是否将此字符串文字分配为其局部变量的值`*s`，然后`s`用作数组名称/指针？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T19:38:37.127

要理解像“Hello World”这样的字符串是如何转换为指针的，重要的是要理解，字符串实际上是十六进制数据，从一个地址开始移动直到找到一个`NULL`

这意味着，每个字符串常量（例如“Hello World”）都存储在内存中的*某个位置*

可能是：

```
0x10203040 : 0x48 [H]
0x10203041 : 0x65 [e]
0x10203042 : 0x6C [l]
0x10203043 : 0x6C [l]
0x10203044 : 0x6F [o]
0x10203045 : 0x20 [' ']
0x10203046 : 0x57 [W]
0x10203047 : 0x6F [o]
0x10203048 : 0x72 [r]
0x10203049 : 0x6C [l]
0x1020304A : 0x64 [d]
0x1020304B : 0x00 [\0] 
```

因此，当使用内存中的上述值调用此函数时，[左侧是地址后跟'：'，右侧是字符的ascii值]

```
int strlen(const char *s)
{
    int n;

    for (n = 0; *s != ′\0′; s++)
        n++;
    return n;
}

strlen("Hello World"); 
```

那时，传递给的是字符数组第一个元素的地址的`strlen`值。`0x10203040`

请注意，地址是按值传递的。因此，`strlen`它拥有自己的“Hello World”地址副本。从 开始，直到我在内存中`n = 0`找到，我递增以及地址（然后递增到）等等，直到它找到地址并返回字符串长度。`\0``n``s``0x10203041``\0``0x1020304B`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T19:24:40.107

`"hello, world"`

`char`是(type is `char[13]`)的数组。表达式中的数组的值`char`是指向 的指针`char`。指针指向数组的第一个元素（即 is 的值`"hello, world"`）`&"hello, world"[0]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:25:59.960

注意：

*   指针（基本上）是指向内存地址的值。
*   像这样的静态字符串`"hello, word"`存储在内存中的某处

因此，指针可以像指向存储在内存中的任何其他（动态）结构（如字符数组）一样简单地指向静态字符串。与其他提供的示例确实没有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T19:27:37.477

> 该函数是否将此字符串文字分配为其局部变量 *s 的值，然后使用 s 作为数组名称/指针？

是的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-03T23:25:31.683

正如它在同一页的第一段（第 99 页，K&R2）中所说：

> “根据定义，数组类型的变量或表达式的值是数组元素零的地址。”

“hello, world”的值将是“h”的地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-21T08:41:29.977

```
char str[] = "Hello, world";
strlen(str); 
```

C 中的字符串是字符数组，以 NULL 结尾（'\0'），这意味着它应该在内存中的某个位置。

那么如上所述发送存储的字符串和如下直接发送有什么区别

```
strlen("Hello, World"); 
```

答案都是一样的，但是字符串的存储位置和处理方式，这里是编译器和堆栈。

编译器在编译时将字符串压入堆栈并发送堆栈中的起始地址（char*），调用函数看到指针并访问字符串。

编译器还在函数存在后添加代码以将堆栈恢复到正确的位置，从而删除创建的临时字符串 [![在此处输入图像描述](../Images/4011876e4baa8e82aa3b947dbbfb28c0.png)](https://i.stack.imgur.com/nzl9o.jpg) 注意：以上是依赖于编译器的实现，但大多数编译器都是这样工作的

# php - facebook 应用程序仅在 facebook 画布上

> ID：14445707
> 
> 赞同：0
> 
> 时间：2013-01-21T19:22:03.603
> 
> 标签：php, facebook

我希望我的 facebook 应用程序只能在 facebook 画布上访问，但不能在我的网站上访问。现在，如果我访问[http://mywebdomain.com/facebook/](http://mywebdomain.com/facebook/)会显示应用程序，但我想将用户重定向到[https://apps.facebook/myApp/](https://apps.facebook/myApp/)

我的 facebook 对象是“简单的”，如下所示：

```
$facebook = new Facebook(array(
'appId'  => 'xxx',
'secret' => 'yyy',
'cookie' => true
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:29:59.810

查看 $_SERVER["HTTP_HOST"] 以查看用于访问您的页面的地址，如有必要，请执行 301 重定向到[https://apps.facebook/myApp/](https://apps.facebook/myApp/)

```
if ($_SERVER["HTTP_HOST"] == "Your domain") {
header("HTTP/1.1 301 Moved Permanently"); 
header("Location: https://apps.facebook/myApp/"); 
}
else
{
... your app goes here. 
}
?> 
```

不过，在您实施重定向之前，我将创建一个显示 $_SERVER["HTTP_HOST"] 值的测试页面，然后从 facebook 中直接从您的站点访问代码。如果它们不同，那么你很好。

我会自己测试一下，只是为了安全起见。

编辑

实际上，我刚刚做了一些测试，您需要检查是否存在 $_SERVER["HTTP_ORIGIN"] 。

如果您从 facebook 调用，它将存在，并包含 facebook 链接。如果您来自该网站本身，它就不会存在。

为了更好地了解正在发生的事情，请将此作为您的第一个程序：

```
<?php
echo "<pre>";
print_r($_SERVER);
echo "</pre>"; 
```

这就是我发现 HTTP_ORIGIN 的方式。

那么你应该将上面的内容替换为：

```
<?php

if (isset($_SERVER['HTTP_ORIGIN']) && $_SERVER['HTTP_ORGIN'] === "https://apps.facebook.com"){
... your app.
}
else
{
header("HTTP/1.1 301 Moved Permanently"); 
header("Location: https://apps.facebook/myApp/");
} 
```

作为 HTTP_ORIGIN 的替代方案，您可以使用 HTTP_REFERER，它应该包含完整的 url 而不仅仅是 facebook 组件。否则，其他人可以设置一个 facebook 应用程序并链接到您的内容。

# google-drive-api - 如何使用 google drive api 获取用户的个人资料信息

> ID：14445708
> 
> 赞同：1
> 
> 时间：2013-01-21T19:22:06.707
> 
> 标签：google-drive-api

我正在尝试从 Documents List API 迁移到 Drive API。

我的应用程序使用“[为用户获取个人资料信息](https://developers.google.com/google-apps/documents-list/?hl=it-IT#getting_profile_information_for_users)”功能，但 Google Drive API 没有该功能。

所以，我在从 Documents List API 迁移时遇到了问题。

请让我知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:11:22.850

看：

[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

获取有关检索用户配置文件信息的更新信息。

# ios - 为什么比较 NSString 时会出错？(-[__NSCFNumber isEqualToString:]: 无法识别的选择器发送到实例)

> ID：14445714
> 
> 赞同：9
> 
> 时间：2013-01-21T19:22:26.897
> 
> 标签：ios, objective-c

我有一个`NSMutableArray (_theListOfAllQuestions)`我正在填充文件中的数字。然后我将该数组中的对象与我进行了比较`qNr (NSString)`，我得到了错误。我什至将数组转换为另一个`NSString`，`_checkQuestions`只是为了确保我在比较`NSStrings`。我也测试了使用 item 进行比较。

```
-(void)read_A_Question:(NSString *)qNr {
NSLog(@"read_A_Question: %@", qNr);
int counter = 0;
for (NSString *item in _theListOfAllQuestions) {
    NSLog(@"item: %@", item);
    _checkQuestions = _theListOfAllQuestions[counter]; //_checkQuestion = NSString
    NSLog(@"_checkQuestions: %@", _checkQuestions);
    if ([_checkQuestions isEqualToString:qNr]) {
        NSLog(@">>HIT<<");
        exit(0);   //Just for the testing
    }
    counter++;
 } 
```

运行此代码时，我得到以下信息`NSLog`：

```
read_A_Question: 421
item: 1193
_checkQuestions: 1193 
```

...和错误：

> -[__NSCFNumber isEqualToString:]：无法识别的选择器发送到实例 0x9246d80 *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFNumber isEqualToString:]：无法识别的选择器发送到实例 0x9246d80”

我确实相信我仍在`NSString`与一些人进行比较，但对我来说，我似乎是在比较`NSString`与`NSString`？

我真的需要一些帮助来1）理解问题，2）解决问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T19:31:07.763

替换此行

```
if ([_checkQuestions isEqualToString:qNr]) 
```

和

```
 if ([[NSString stringWithFormat:@"%@",_checkQuestions] isEqualToString:[NSString stringWithFormat:@"%@",qNr]]) 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:28:59.997

您的`_theListOfAllQuestions`数组有`NSNumber`对象而不是`NSString`对象。所以不能`isEqualToString`直接使用。

试试这个，

```
for (NSString *item in _theListOfAllQuestions) {
    NSLog(@"item: %@", item);
    _checkQuestions = _theListOfAllQuestions[counter]; //_checkQuestion = NSString
    NSLog(@"_checkQuestions: %@", _checkQuestions);
    if ([[_checkQuestions stringValue] isEqualToString:qNr]) {
        NSLog(@">>HIT<<");
        exit(0);   //Just for the testing
    }
    counter++;
 } 
```

# java - 在python中将字符串转换为短字符串

> ID：14445718
> 
> 赞同：3
> 
> 时间：2013-01-21T19:22:50.247
> 
> 标签：java, python-2.7

一般来说，Java 和 Python 在如何将字符串转换为数字方面存在相似之处

```
int x = Integer.parseInt(a, 2); //java
x = int(a,2) # python 
```

但这似乎不适用于`short`

```
short x = Short.parseShort(a, 2); //java
x = short(a,2) # does not work in python 
```

有谁知道如何缩短工作时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:25:37.510

[Python中没有`short`数据类型。](http://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex)只需使用`int`.

# .htaccess - 如果文件名等于某个值，则 htaccess 重定向

> ID：14445724
> 
> 赞同：1
> 
> 时间：2013-01-21T19:23:10.980
> 
> 标签：.htaccess, mod-rewrite

我想设置一个重定向（最好使用 RewriteCond），这样如果请求的文件是 index.php 而不管目录，它将被重定向到另一个站点。

因此访问 /index.php 或 /files/index.php 或 /stuff/index.php （等）都会将您重定向到另一个域。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T21:21:04.863

这是一种通用的方法。此规则集应放在根目录的 .htaccess 文件中：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  index\.php/?       [NC]
RewriteRule .*  http://otherdomain.com/      [R=301,L] 
```

永久重定向`index.php`任何位置的任何 URL，例如

`http://mydomain.com/index.php`或者

`http://mydomain.com/any/folder/quantity/index.php`或者

`http://mydomain.com/any/folder/quantity/index.php/any/folder/quantity/`

到

`http://otherdomain.com/`

就是这样。正如您在问题中所说，您没有进行太多解释，因此没有任何内容传递给其他域：

### ...重定向到另一个站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T21:27:53.210

这些规则应该这样做（当放置在`/.htaccess`文件中时）：

```
RewriteEngine On
RewriteRule (?:^|/)index\.php$  http://otherdomain.com/ [R=301,L] 
```

# java - 休眠中的多对多对象模型

> ID：14445727
> 
> 赞同：0
> 
> 时间：2013-01-21T19:23:20.243
> 
> 标签：java, hibernate

在*学生*和*组*关系中，学生可以创建一个“组”，其他学生可以成为其中的成员，这是多对多的关系。

现在，我需要跟踪哪个学生是该组的所有者/创建者。

所以，如果我不使用 Hibernate ORM，我肯定会创建关系为![学生组多对多关系](../Images/1f5ebc753269830415a96db5c6c101fc.png)

我想知道是否有更好的方法来避免在hibernate orm中创建*映射表作为对象？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:31:14.180

在`mapping`建立多对多关系时，表绝对是要走的路。如果您不想将 存储`isOwner`在`mapping`表中，则可以将 an 存储`ownerId`在`Group`表中并将其指向特定的`Student`id。

如果您查看[本教程](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-many-to-many-1.html)，它们不会为多对多关系生成休眠对象，但表仍然存在。您将需要某种连接表来正确表示多对多关系。通过将 移动`isOwner`到组中，您将不需要休眠对象来访问拥有的学生，因为您可以从`Owner`对象访问它。

# html - 计算字段的警报框

> ID：14445728
> 
> 赞同：-1
> 
> 时间：2013-01-21T19:23:32.840
> 
> 标签：html, alert

`Answer_2`如果字段中的数字大于 10 或小于 -10，如何弹出警告框？

[这是我的例子](http://jsfiddle.net/qvDFY/15/)

Javascript：

```
 function CalculateIMSUB(Atext, Btext, form, val)
    {
    var A = eval(Atext);
    var B = eval(Btext);
    if (isNaN(A)) A = 0;
    if (isNaN(B)) B = 0;
    var answer = A - B;
    form.Answer.value = answer;    

    var diff = answer - val;
    if (diff == 0)
    form.Answer_2.value = 'ok';
    else if (diff < 0)
    form.Answer_2.value = diff;
    else
    form.Answer_2.value = '+' + diff;
    }

    function calculateAll() {
    var forms = document.getElementsByTagName("form");
    for(var i = 0; i < forms.length; i++ ) {
    CalculateIMSUB(forms[i].input_A.value, forms[i].input_B.value,forms[i], 96)                
    }
    } 
```

HTML：

```
 <FORM NAME="Calculator" METHOD="GET">
    <P><INPUT TYPE=TEXT NAME="input_A" SIZE=10><INPUT TYPE=TEXT NAME="input_B" SIZE=10>  
    <INPUT TYPE="button" VALUE="+" name="subtractbutton" onclick="CalculateIMSUB
    (this.form.input_A.value, this.form.input_B.value, this.form, 96)">
    <INPUT TYPE=TEXT NAME="Answer" SIZE=12><tt>96</tt><INPUT TYPE=TEXT NAME="Answer_2"   
    SIZE=4></P></form>
    <input type="button" onclick="calculateAll()" value="Master calculation" /> 
```

首先十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:46:22.720

据我了解，您唯一需要做的就是在您计算的地方`var diff`

```
if(diff < -10 || diff > 10)
    alert("diff is more Tham 10"); 
```

# jenkins - 如何删除名为“..”的视图

> ID：14445729
> 
> 赞同：15
> 
> 时间：2013-01-21T19:23:37.473
> 
> 标签：jenkins, hudson, cloudbees

我在 Cloudbees 中创建了一个新视图，并在配置它时希望它不会被我的团队其他成员注意到。我将视图重命名为“..”，只是因为这是我想到的第一件事。

现在我无法删除组，因为使用“..”被解释为目录遍历。

*   我无法通过单击选项卡导航到视图，因为“https://{account}.ci.cloudbees.com/view/../”是“https://{account}.ci.cloudbees.com/ ”。
    *   我*可以*导航到此视图，但只能通过将其设置为“管理 Jenkins”中的默认视图。
*   由于相同的 URL 模式问题，我也无法编写适合删除此视图的 URL。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-09-20T19:45:39.800

请指定 Jenkins 服务器、端口和视图名称以删除自定义视图：

```
http://<jenkins-server>:<port>/view/<view name>/delete 
```

Jenkins 在这个特定功能上存在问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-21T19:23:37.473

就在我做完这个问题的时候，我有了另一个成功的想法。我偶然发现“https://{account}.ci.cloudbees.com/view/../delete”会删除默认视图。另一项测试证实“https://{account}.ci.cloudbees.com/delete”删除了默认视图。

1.  在“管理 Jenkins”中，将“..”设置为默认视图。
2.  在 URL 栏中输入“https://{account}.ci.cloudbees.com/delete”。
3.  返回“管理 Jenkins”以设置新的默认视图。

# c# - 如何使用 Trello.Net 创建 IAttachmentID？

> ID：14445732
> 
> 赞同：1
> 
> 时间：2013-01-21T19:23:44.210
> 
> 标签：c#, api, attachment, trello, trello.net

我正在使用 dillenmeister 的 Trello.Net API 包装器，我看到几个月前添加了从卡中删除附件的功能，但我正在使用 ( `Trello.Cards.RemoveAttachment()`) 的调用需要 a`CardId`和 an `IAttachmentId`。我已经想出了如何创建`CardId`( `new CardID(Card.ID)`)，但我没有看到如何创建`IAttachmentID`它正在寻找的。

我有附件对象，可以`ID`从那里得到，但那是字符串类型的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:01:58.177

类`Attachment`本身实现`IAttachmentId`.

```
// Example: Remove all attachments with the name "DevSupport" from a card 
var card = trello.Cards.WithId("a card id");
foreach (var attachment in card.Attachments.Where(a => a.Name == "DevSupport"))
    trello.Cards.RemoveAttachment(card, attachment); 
```

许多其他对象也是如此，例如`Card`类 implements `ICardId`。`CardId`如果您有一个`Card`. 只需使用实际的`Card`.

```
// Example: Fetch all members assigned to a card
var card = trello.Cards.WithId("a card id");
var members = trello.Members.ForCard(card); 
```

`AttachmentId`无论如何，可能需要一堂课。你的用例是什么？

# vb.net - 了解分配/比较 vb.net

> ID：14445733
> 
> 赞同：4
> 
> 时间：2013-01-21T19:23:46.673
> 
> 标签：vb.net, comparison-operators

这是我第一次在 Stack Overflow 上，我试图理解 '=' 在这段代码的最后一行中的含义：

```
Dim label As Label = Me.labels.Item(String.Concat(New Object() { movimiento.Sector1.ID, "-", movimiento.X1, "-", movimiento.Y1 }))
Dim dictionary As Dictionary(Of Label, Integer)
Dim label3 As Label
dictionary = Me.demandas2.Item(label3 = label) = (dictionary.Item(label3) - 1) 
```

欢迎任何形式的帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T19:55:44.980

等号 ( `=`) 用于 VB.NET 中两个完全不同的运算符。它用作赋值运算符以及相等测试运算符。字符求值的运算符取决于上下文。因此，例如，在此示例中：

```
Dim x As Integer = 1
Dim y As Integer = 2
Dim z As Integer = x = y 
```

您可能会认为，与在其他语言（例如 C#）中一样，在执行该代码之后`x`，`y`、 和`z`都等于`2`。但是，VB 将第二个等号视为相等测试运算符。因此，实际上，它正在这样做：

```
If x = y Then
    z = True
Else
    z = False
End If 
```

但是，您会注意到，我们正在尝试将布尔值分配给整数变量。如果你有`Option Strict On`（你应该），它不会允许你这样做。如果这确实是您想要做的，它会迫使您将其强制转换为整数，这使其更加明显：

```
z = CInt(x = y) 
```

然而，它仍然令人困惑，所以通常情况下，这种事情在 VB.NET 中是不鼓励的。因此，我怀疑您发布的代码即使`Option Strict`打开也无法编译。但是，这就是它实际上想要做的：

```
Dim temp1 As Boolean = (label3 = label) ' Evaluates to False
Dim temp2 As Boolean = (Me.demandas2.Item(temp1) = (dictionary.Item(label3) - 1)) ' Likely evaluates to False
dictionary = temp2 ' Couldn't possibly be a valid assignment 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:48:00.033

我们来看看这行代码：

```
dictionary = Me.demandas2.Item(label3 = label) = (dictionary.Item(label3) - 1) 
```

第一个`=`是任务。所以我们将正确的部分分配给字典。现在是正确的部分：

```
Me.demandas2.Item(label3 = label) = (dictionary.Item(label3) - 1) 
```

两个`=`表达式之间是一个比较，所以它返回一个布尔值。因此，假定的“字典”被分配了一个布尔值。如果我们检查该表达式的左侧：

```
Me.demandas2.Item(label3 = label) 
```

再一次，`=`这里的符号是在做一个比较，所以如果`label3`与 相同`label`，那么代码将等效于`Me.semandas2.Item(True)`。这似乎很奇怪。

总的来说，这段代码没有多大意义，如果它编译我会感到惊讶，考虑到它试图为字典分配一个布尔值。它肯定不会与`Option Strict On`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:38:03.810

非常感谢大家。该片段是反编译 dll 的结果。我试图帮助一个伙伴。

.Net反射器基于VB.Net代码反编译，这是一个错误。最后我们看到首先它应该使用 C# 代码进行反编译，这给代码赋予了完全不同的含义：

```
if (movimiento.Contenedor.Demanda2)
    {
        Dictionary<Label, int> dictionary;
        Label label3;
        (dictionary = this.demandas2)[label3 = label] = dictionary[label3] - 1;
        if (this.demandas2[label] == 0)
        {
            label.ForeColor = Color.Black;
        }
        (dictionary = this.demandas2)[label3 = label2] = dictionary[label3] + 1;
        label2.ForeColor = Color.DarkOrange;
    } 
```

# android-fragments - 在 android 片段中选择 EditText 时未显示键盘（不响应）

> ID：14445737
> 
> 赞同：1
> 
> 时间：2013-01-21T19:23:58.843
> 
> 标签：android-fragments

这是我的片段类：

```
public class PrayerTimes extends Fragment {
     EditText Lat;
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment

    InflaterView = inflater.inflate(R.layout.activity_prayer_times, container, false);

    Lat = (EditText) InflaterView.findViewById(R.id.LatitudeEdit); 

    Lat.addTextChangedListener(new TextWatcher()
    {

public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub
    }

public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) { 
        // TODO Auto-generated method stub  
        }

public void afterTextChanged(Editable arg0) {   
        // TODO Auto-generated method stub
        }
    });

    return InflaterView;
} 
```

当 Fragment 加载，并且选择了 EDitText (Lat) (Get Focused) 时，不显示 KeyBoard。如何显示键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:15:57.583

添加这一行：

```
Lat.clearFocus(); 
```

紧接在该行之后：

```
Lat = (EditText) InflaterView.findViewById(R.id.LatitudeEdit); 
```

# javascript - 获取几何面上点的颜色

> ID：14445738
> 
> 赞同：1
> 
> 时间：2013-01-21T19:24:03.130
> 
> 标签：javascript, three.js

我正在使用 THREE.js 来渲染我的场景，但我遇到了一个棘手的问题 - 如何获得几何面上特定点的颜色？

颜色，我不是指面或材质颜色，我指的是特定点的实际输出颜色，基于：材质、面颜色和特定位置的纹理颜色。例如，如果给定点面上的纹理是红色的，并且材质颜色是半可见的（alpha = 0.5），我期望得到的是：（r=1.0, g=0.0, b=0.0, a= 0.5)。

注意：性能很重要。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:32:07.773

一种简单直接的方法是使用`<canvas>`.

```
var canvas = document.createElement( 'canvas' );
canvas.width = renderer.domElement.width;
canvas.height = renderer.domElement.height;

var context = canvas.getContext( '2d' );
context.drawImage( renderer.domElement, 0, 0 );

var imagedata = context.getImageData( 0, 0, canvas.width, canvas.height );
var data = imagedata.data;

var index = ( mousex + ( mousey * canvas.width ) ) * 4;

var red = data[ index ];
var green = data[ index + 1 ];
var blue = data[ index + 2 ];

var hex = red << 16 | green << 8 | blue << 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:16:26.130

启用 其实你期望得到的不是真的。你没有考虑灯光。没有灯光，您的对象将是黑色的。使用灯光并根据灯光的位置，您将获得不同的结果。即使您使用平面阴影，脸部的颜色也将取决于其正常情况。

# windows - Findstr 批处理文件在服务器中查找侦听器

> ID：14445740
> 
> 赞同：0
> 
> 时间：2013-01-21T19:24:06.920
> 
> 标签：windows, batch-file

您好我正在尝试创建一个批处理文件以从记事本文件中的服务器列表中过滤掉具有 RDP/ICA 侦听器的服务器，我使用以下语法创建了这个脚本，但由于某些原因它不能作为预计，有人可以帮我解决这个问题吗？

我在 computer.txt 文件中有一个服务器列表，我正在尝试查找已关闭的服务器，如果 errorlevel 为 0，表示找到了字符串 down，我希望将服务器名称打印在 listenerdown.txt 中，但由于某些原因，如果我执行批处理文件，computer.txt 中的所有服务器都会写入 listenerdown.txt 文件

下面是批处理文件

```
for /f %%i in (computer.txt) do(
qwinsta /server:%%i | findstr/i down >nul 2>&1
if %errorlevel% neq 1
echo %%i >>Listenerdown.txt
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:23:54.627

将`echo`移到与语句相同的行，`if`否则使用括号建立范围，%ErrorLevel% 将始终为 0，因为变量不会在没有延迟扩展的情况下在循环中设置。

```
setlocal EnableDelayedExpansion
for /f %%i in (computer.txt) do(
    qwinsta /server:%%i | findstr /i down >nul 2>&1
    if !errorlevel! neq 1 echo %%i>>Listenerdown.txt
)
endlocal 
```

或者

```
setlocal EnableDelayedExpansion
for /f %%i in (computer.txt) do(
    qwinsta /server:%%i | findstr /i down >nul 2>&1
    if !errorlevel! neq 1 (
        echo %%i>>Listenerdown.txt
    )
)
endlocal 
```

Cmd.exe 逐行解析批处理文件，除非您告诉它该命令的范围继续到下一行，否则它会认为该命令已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:26:45.480

您应该使用`setlocal EnableDelayedExpansion`, 而`!errorlevel!`不是`%errorlevel%`：

```
@echo off
setlocal EnableDelayedExpansion

for /f %%i in (computer.txt) do (
qwinsta /server:%%i | findstr/i down >nul 2>&1
if !errorlevel! neq 1 echo %%i >>Listenerdown.txt
) 
```

否则 errorlevel 的值在进入循环之前只会被扩展一次，并且不会有正确的值。您还必须确保它`echo`与`if`.

# excel - 对于excel宏vba中的每个循环跳跃交替行

> ID：14445743
> 
> 赞同：0
> 
> 时间：2013-01-21T19:24:32.230
> 
> 标签：excel, visual-studio-macros, vba

我在vba中有以下代码。sheet5 中从 a5 到 a20 列的行是：

a5=瑞典

a6=西班牙

a7=俄罗斯

a8=意大利

a9=德国

a10=芬兰

a11=挪威

a12=瑞士

a13=法国

a14=比利时

```
Set fillcolumnrange = Sheet5.Range("A5:A20")
i = 1
For Each Row In fillcolumnrange.Rows
 If Not Sheet5.Range("A" & i + 4) = "" Then
    MsgBox Row(i)
 End If
 i = i + 1
Next Row 
```

但是此代码仅提示替代值，即。

瑞典

俄罗斯

德国

挪威

法国

谁能帮我找出代码中的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:33:48.993

您正在遍历范围内的行，并在`i`循环中推进变量。您可以引用正在循环的每个变量。

试试这个

```
Set fillcolumnrange = Sheet1.Range("A5:A20")
For Each cell In fillcolumnrange.Cells
 If Not cell = "" Then
    MsgBox cell
 End If
Next cell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T21:18:22.257

您混合了不同类型的循环。

要么照里克说的做。

或使用`i`：

```
Set fillcolumnrange = Sheet5.Range("A5:A20")
For i = 1 To fillcolumnrange.Rows.Count
    If Not Sheet5.Range("A" & i + 4) = "" Then
       MsgBox Sheet5.Cells(i + 4, 1)
    End If
Next i 
```

或者也许一个`do-Loop`

```
Set fillcolumnrange = Sheet5.Range("A5:A20")
i = 1
do until i = fillcolumnrange.Rows.Count + 4
 If Not Sheet5.Range("A" & i + 4) = "" Then
    MsgBox Sheet5.Cells(i + 4, 1)
 End If
 i=i+1
Loop 
```

（**编辑**现在经过测试，似乎运行正常）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:20:06.373

基于 Rick 的回答，这里是`For Each`循环的简短版本：

```
对于 fillcolumnrange.Cells 中的每个单元格
    If len(cell) <> 0 Then MsgBox cell
下一个

```

# java - 5秒后Android关闭对话框？

> ID：14445745
> 
> 赞同：39
> 
> 时间：2013-01-21T19:24:37.340
> 
> 标签：java, android, dialog, schedule

我正在开发一个无障碍应用程序。当用户想要离开应用程序时，我会显示一个对话框，他必须在其中确认他想要离开，如果他在 5 秒后没有确认，对话框应该会自动关闭（因为用户可能不小心打开了它）。这类似于您更改屏幕分辨率时在 Windows 上发生的情况（会出现警告，如果您不确认，它会恢复到以前的配置）。

这就是我显示对话框的方式：

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this).setTitle("Leaving launcher").setMessage("Are you sure you want to leave the launcher?");
            dialog.setPositiveButton("Confirm", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int whichButton) {
                    exitLauncher();
                }
            });
            dialog.create().show(); 
```

如何在显示 5 秒后关闭对话框？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-21T19:38:59.357

```
final AlertDialog.Builder dialog = new AlertDialog.Builder(this).setTitle("Leaving launcher").setMessage("Are you sure you want to leave the launcher?");
dialog.setPositiveButton("Confirm", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int whichButton) {
        exitLauncher();
    }
});     
final AlertDialog alert = dialog.create();
alert.show();

// Hide after some seconds
final Handler handler  = new Handler();
final Runnable runnable = new Runnable() {
    @Override
    public void run() {
        if (alert.isShowing()) {
            alert.dismiss();
        }
    }
};

alert.setOnDismissListener(new DialogInterface.OnDismissListener() {
    @Override
    public void onDismiss(DialogInterface dialog) {
        handler.removeCallbacks(runnable);
    }
});

handler.postDelayed(runnable, 10000); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-21T19:38:04.130

使用`CountDownTimer`来实现。

```
 final AlertDialog.Builder dialog = new AlertDialog.Builder(this)
            .setTitle("Leaving launcher").setMessage(
                    "Are you sure you want to leave the launcher?");
       dialog.setPositiveButton("Confirm",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int whichButton) {
                     exitLauncher();

                }
            });
    final AlertDialog alert = dialog.create();
    alert.show();

    new CountDownTimer(5000, 1000) {

        @Override
        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub

            alert.dismiss();
        }
    }.start(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-01T17:07:29.993

迟了，但我认为这可能对任何在他们的应用程序中使用 RxJava 的人有用。

RxJava 带有一个称为操作符的操作符`.timer()`，它将创建一个 Observable，它`onNext()`只会在给定的持续时间后触发一次，然后调用`onComplete()`. 这非常有用，并且避免了必须创建 Handler 或 Runnable。

更多关于这个操作符的信息可以在[ReactiveX 文档中找到](http://reactivex.io/documentation/operators/timer.html)

```
// Wait afterDelay milliseconds before triggering call
Subscription subscription = Observable
        .timer(5000, TimeUnit.MILLISECONDS) // 5000ms = 5s
        .observeOn(AndroidSchedulers.mainThread())
        .subscribe(new Action1<Long>() {
            @Override
            public void call(Long aLong) {
                // Remove your AlertDialog here
            }
        }); 
```

您可以通过在单击按钮时取消订阅 observable 来取消计时器触发的行为。因此，如果用户手动关闭警报，调用`subscription.unsubscribe()`它具有取消计时器的效果。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-28T15:16:17.597

这是代码，请参阅此[链接](http://programondaspot.blogspot.com/2015/06/auto-close-alert-dialog-after-specific.html)：

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // get button
        Button btnShow = (Button)findViewById(R.id.showdialog);
        btnShow.setOnClickListener(new View.OnClickListener() {
            //on click listener
            @Override
            public void onClick(View v) {
                AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());
                builder.setTitle("How to close alertdialog programmatically");
                builder.setMessage("5 second dialog will close automatically");
                builder.setCancelable(true);

                final AlertDialog closedialog= builder.create();

                closedialog.show();

                final Timer timer2 = new Timer();
                timer2.schedule(new TimerTask() {
                    public void run() {
                        closedialog.dismiss(); 
                        timer2.cancel(); //this will cancel the timer of the system
                    }
                }, 5000); // the timer will count 5 seconds....

            }
        });
    }
} 
```

快乐编码！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-19T20:28:53.867

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.game_message);
        game_message = builder.create();
        game_message.show();

        final Timer t = new Timer();
        t.schedule(new TimerTask() {
            public void run() {
                game_message.dismiss(); // when the task active then close the dialog
                t.cancel(); // also just top the timer thread, otherwise, you may receive a crash report
            }
        }, 5000); 
```

参考：[https ://xjaphx.wordpress.com/2011/07/13/auto-close-dialog-after-a-specific-time/](https://xjaphx.wordpress.com/2011/07/13/auto-close-dialog-after-a-specific-time/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-23T06:17:53.270

对于受 Tahirhan 回答启发的 Kotlin。这对我当前的项目有效。希望它会在不久的将来对其他人有所帮助。我在片段中调用此函数。快乐编码！

```
 fun showAlert(message: String) {
        val builder = AlertDialog.Builder(activity)
        builder.setMessage(message)

        val alert = builder.create()
        alert.show()

        val timer = Timer()
        timer.schedule(object : TimerTask() {
            override fun run() {
                alert.dismiss()
                timer.cancel()
            }
        }, 5000)
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-03T17:32:57.197

我在`AlertDialog`.

```
AlertDialog dialog = new AlertDialog.Builder(getContext())
        .setTitle(R.string.display_locked_title)
        .setMessage(R.string.display_locked_message)
        .setPositiveButton(R.string.button_dismiss, null)
        .create();

dialog.setOnShowListener(new DialogInterface.OnShowListener() {
    @Override
    public void onShow(DialogInterface dialog) {
        final Button positiveButton = ((AlertDialog) dialog).getButton(AlertDialog.BUTTON_POSITIVE);
        final CharSequence positiveButtonText = positiveButton.getText();
        new CountDownTimer(AUTO_DISMISS_MILLIS, 100) {
            @Override
            public void onTick(long millisUntilFinished) {
                positiveButton.setText(String.format(Locale.getDefault(), "%s (%d)",
                        positiveButtonText,
                        TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) + 1));
            }

            @Override
            public void onFinish() {
                dismiss();
            }
        }.start();

    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-22T11:45:10.523

```
showDialog(
    context: context,
    builder: (BuildContext context) {
        return AlertDialog(
            content: Text("Sucess"),
        );

    });
    Timer(Duration(seconds: 2),()=>Navigator.pop(context)); 
```

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2015-10-15T09:40:46.757

```
AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); 
```

然后调用dismiss meth它工作

```
alertDialog .dismiss(); 
```

# ruby-on-rails - Ruby csv import 使代码更小但相等

> ID：14445746
> 
> 赞同：0
> 
> 时间：2013-01-21T19:24:38.233
> 
> 标签：ruby-on-rails, ruby, fastercsv

我是 Rails 和 ruby​​ 的新手......我如何重构这样的代码，从 csv 文件数据中导入？现在我有这样的代码

```
 if row[qnt].to_s != ""
    eqnt = /(\d+)/.match(row[qnt])[0].to_s
  else
    eqnt = 0
  end 
```

我尝试类似

```
if row[qnt].present?
        eqnt = /(\d+)/.match(row[qnt])[0].to_s
      else
        eqnt = 0
      end 
```

但它是否相等，我还能做些什么来让代码更小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:39:29.200

这个怎么样？

```
row[qnt].present? ? eqnt = /(\d+)/.match(row[qnt])[0].to_s : eqnt = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:00:52.090

```
eqnt = (/(\d+)/.match(row[qnt]) || [0])[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:47:10.363

我不相信通过尝试进一步压缩代码来获得可读性。

```
eqnt = row[qnt].present? ? /(\d+)/.match(row[qnt])[0].to_s : 0 
```

或者

```
eqnt = 0
eqnt = /(\d+)/.match(row[qnt])[0].to_s if row[qnt].present? 
```

或者

```
theRow = row[qnt]
eqnt = theRow.present? ? /(\d+)/.match(theRow).first.to_s : 0 
```

或者更好的是，将其提取到一个方法中，保持主线代码干净，并隔离逻辑。

不过，除非这是设计使然，否则我不会对`eqnt`最终得到不同的类型感到兴奋。

# ember-data - 保存修改记录的正确方法是什么（EMBER 1.0.0-PRE.4）

> ID：14445747
> 
> 赞同：2
> 
> 时间：2013-01-21T19:24:38.527
> 
> 标签：ember-data

我开发了一个小型测试应用程序。加载人员记录按预期工作。我可以修改名字和姓氏。在 personedit 模板中，我有一个触发 App.PersonController 的保存方法的操作。

保存修改记录的最佳方法是什么（保存方法的实现）？

JavaScript：

```
window.App = Ember.Application.create();

DS.RESTAdapter.configure("plurals",{"person" : "people"})

App.Store = DS.Store.extend({
revision: 11,
adapter: DS.RESTAdapter.create({namespace: 'restservice'})
});

var attr = DS.attr;

App.Person = DS.Model.extend({
firstName: attr('string'),
lastName: attr('string'),
birthDay: attr('string')
});

 App.Router.map(function(){

    this.resource('people',function(){
        this.resource('person',{path: 'people/:person_id'});
        this.route('edit');
    });

 });

 App.PersonRoute = Ember.Route.extend({

model: function(params){
    console.log('PersonRoute: set Model ==> perform App.Person.find(params.person_id)')
    var p = App.Person.find(params.person_id);
    return p;
},
    renderTemplate: function(){
    this.render('person');
    this.render('personedit',{outlet: 'personedit'});
   }

  });

 App.PersonController = Ember.Controller.extend({
  save: function(){
    console.log('save:  Person:',this.content);

 }
});

App.PeopleEditRoute = Ember.Route.extend({

  model: function(params){
    console.log('EditpersonRoute: set Model ==> perform App.Person.find(params.person_id)')
    var p = App.Person.find(params.person_id);
    return p;
 }

}); 
```

模板：

```
 <script type="text/x-handlebars" data-template-name="application">
    <nav>
        <div class="navbar">
            <div class="navbar-inner">

                <ul class="nav">
                    <li>{{#linkTo "people"}}Personen anzeigen{{/linkTo}}</li>
                    <li>{{#linkTo "page1"}}Page 1 anzeige{{/linkTo}}</li>
                    <li>{{#linkTo "page2"}}Page 2 anzeige{{/linkTo}}</li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="main-content">
        {{outlet}}
    </div>

</script>

<script type="text/x-handlebars" data-template-name="people">
    <div id="people">
        <H3>Personen Liste</H3>
        <ul>
            {{#each  person in controller}}
                <li>
                    {{#linkTo "person" person}} {{person.firstName}} {{person.lastName}}      {{/linkTo}}

                </li>
            {{/each}}

        </ul>

    </div>
    <div class="row-fluid">
        <div class="span6">
            {{outlet}}
        </div>
        <div class="span6">
            {{outlet personedit}}
        </div>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="person">
    <div id="person" class="inline">
        <H3>Person View</H3>

        <dl>
            <dt>Vorname</dt>
            <dd>{{content.firstName}}</dd>
            <dt>Nachname</dt>
            <dd>{{content.lastName}}</dd>
        </dl>
        </div>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="personedit">
    <H3>EDITOR</H3>
    <fieldset>
        <legend>Person</legend>
        <label>Vorname</label>
       {{view Ember.TextField valueBinding="content.firstName"}}
        <span class="help-block">Example block-level help text here.</span>
        <label>Nachname</label>
        {{view Ember.TextField valueBinding="content.lastName"}}
        <button {{action "save" }} class="btn">Save</button>
    </fieldset>

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:47:13.340

我在另一个答案中找到了正确的保存方法。我的 save 方法的实现只需要额外的一行：

```
App.PersonController = Ember.Controller.extend({
  save: function(){
      console.log('save:  Person:',this.content);
      this.content.get('transaction').commit();
} 
```

# android - 使用 putExtra() 向 Activity 传输大量数据；

> ID：14445749
> 
> 赞同：2
> 
> 时间：2013-01-21T19:24:42.990
> 
> 标签：android, json, android-intent

应用程序通过其中有对象传递大量对象（解析`JSON`格式后大约 150 个对象）。而打开一个新活动的过程大约需要2秒……有没有办法加快这个过程？`intent.putExtra();``serialized`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:58:16.053

如果您只想将数据从一个活动传递到另一个活动，则可以使用两个活动都可以访问的静态变量。这消除了对所有对象进行序列化和反序列化的需要。例子：

```
public class Globals {
    public static List<MyObject> myObjects;
} 
```

在一项活动中，您可以设置要传入的数据`Globals.myObjects`，接收活动可以从那里获取数据。

请注意，这种机制确实有一些缺点（例如当 Android 杀死您的进程并稍后重新启动它时）。但是，这可能是简单地将大量对象从一个活动传递到另一个活动的最不麻烦的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:36:26.970

一个建议可能是：

*在使用可序列化的地方使用[parceable](http://developer.android.com/reference/android/os/Parcelable.html)*

另一个建议可能是：

*使用其他东西来保存/恢复数据。例如数据库*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T06:25:31.023

我认为使用**Singleton**类在活动之间共享大量临时数据是一个很好的方法。保持它非常快速和简单。

虽然它可以通过 Android **Parcelable**完成，但它有存储限制，可能导致此错误**“!!! FAILED BINDER TRANSACTION !!!”**

# android - Android应用程序的内存泄漏？

> ID：14445751
> 
> 赞同：1
> 
> 时间：2013-01-21T19:24:55.047
> 
> 标签：android, json, memory-leaks

我有一个简单的 Android 应用程序，它从本地服务器上的 php 文件中读取一些 JSON 数据。它非常简单，直到大约一个小时前它工作正常。然而，在稍作休息后（我什至没有关闭我的电脑），它突然开始与似乎是内存泄漏的问题作斗争，尽管我不是这方面的专家。

我不确定为什么会突然发生这种情况，因为我没有更改任何代码。但是当我运行该应用程序时，我的 logcat 慢慢开始充满这样的消息：

“GC_CONCURRENT 已释放，910K，53% 可用 3167K/6727K ......”

该应用程序最终会运行，但需要等待大约 1-2 分钟。无论如何，我想知道是否有人可以检查我的代码或告诉我可能导致这种情况发生的原因。

```
public static JSONArray getJSONfromURL(String url) {

    // initialize
    InputStream is = null;
    JSONArray jArray = null;
    String result = "";

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "utf-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jArray = new JSONArray(result);         
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    return jArray;
} 
```

JSON数据根本不是很大。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:14:49.257

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
            is, "utf-8"), 8); 
```

您分配了 8 个字节的缓冲区大小。那是非常小的。除非您真的知道自己在做什么，否则只需将默认大小与替代的单参数构造函数一起使用：

```
public BufferedReader(Reader in) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:09:53.770

好吧，我将“While”循环更改为此，性能显着提高：

```
int len;
char[] chars = new char[4*1024];
while((len = reader.read(chars))>=0) {
sb.append(chars, 0, len);
} 
```

它仍然比我想要的慢，但至少我正朝着正确的方向前进。我会再努力一些。感谢大家。

# c# - Razor 无法检测到部分的结尾

> ID：14445759
> 
> 赞同：3
> 
> 时间：2013-01-21T19:25:40.443
> 
> 标签：c#, html, c#-4.0, razor, razor-2

我在剃须刀部分遇到了一些麻烦。

```
@section tools {
<div class="btn-group"">
    <button class="btn dropdown-toggle" data-toggle="dropdown">
        Update every <span id="update_time_label" class="label label-info">10 s.</span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#" onclick="return SelfAction.setUpdateTime(1)">1 s.</a></li>
        <li><a href="#" onclick="return SelfAction.setUpdateTime(5)">5 s.</a></li>
        <li><a href="#" onclick="return SelfAction.setUpdateTime(10)">10 s.</a></li>
        <li><a href="#" onclick="return SelfAction.setUpdateTime(30)">30 s.</a></li>
        <li><a href="#" onclick="return SelfAction.setUpdateTime(60)">60 s.</a></li>
        <li><a href="#" onclick="return SelfAction.setUpdateTime(120)">120 s.</a></li>
    </ul>
</div>
<button class="btn" onclick="return SelfAction.loadNewItemsNow()">Update now</button>
} <-- Can't detect 
```

正如您在代码中看到的，它没有检测到右括号。我现在正在学习 C# 和 MVC4，但找不到任何解决方案。我不想为这个大的 HTML 块使用 viewbag。也许大 HTML 块有一些特定的结束标记？像`@sectionStart`和`@sectionEnd`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:28:57.753

删除末尾的第二个 "`<div class="btn-group"">`看看是否有帮助。Razor 引擎非常挑剔，像这样愚蠢的事情可能会导致它继续寻找字符串，并且由于其他所有内容都匹配，因此关闭`}`将在 a细绳。

# c# - double.NaN 和 double.NegativeInfinity 的 CompareTo 行为

> ID：14445765
> 
> 赞同：5
> 
> 时间：2013-01-21T19:26:02.100
> 
> 标签：c#, double, nan, infinity, icomparable

我在 C# (.Net 4) 中进行了一些统计操作，`double[]`然后我发现`CompareTo`方法和`double.NaN`. 当我尝试这段代码时：

```
double.NaN.CompareTo(double.NegativeInfinity) //returns -1 
```

这意味着`double.NaN`比`double.NegativeInfinity`! 谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T19:43:27.007

CompareTo 不会告诉您一件事比另一件事小。它告诉您在订购实例时一个实例在 (-) 之前、在 (+) 之后或可与 (0) 另一个实例互换。

这里的*原因*实际上取决于 CLR 中原语的设计行为。

[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)的目的是对一个类型的实例进行排序。因此，对于 NaN，一个有效的 double 值，决定在该类型的任何其他实例*之前对其进行排序。*

请注意，CompareTo 在含义或预期用途上不一定与数字大于/小于运算相同。CompareTo 旨在为 double 可以采用的一组值提供排序。例如，

```
double.NaN.CompareTo(double.NaN) 
```

将返回 0。但是

```
double.NaN == double.NaN 
```

是假的。同样地，

```
double.NaN.CompareTo(double.NegativeInfinity) 
```

返回 -1，但是

```
double.NaN < double.NegativeInfinity 
```

返回假。因此，CompareTo 方法并不是说在数学上 double.NaN 小于 double.NegativeInfinity。小于运算符实际上说这不是真的。但它是说，在排序值时， double.NaN 排在第一位。

这里也是 Double 类型的[LessThan Operator](http://msdn.microsoft.com/en-us/library/system.double.op_lessthan.aspx)文档的链接。并排阅读它以及[IComparable.CompareTo的含义应该有助于阐明这两种方法试图表达的差异。](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T19:31:49.980

[`double.NaN`](http://msdn.microsoft.com/en-us/library/system.double.nan.aspx)小于负无穷大。

从他们解释的元数据信息来看；

```
public const double NegativeInfinity = -1.0 / 0.0

public const double NaN = 0.0 / 0.0; 
```

从[`Double.CompareTo()`](http://msdn.microsoft.com/en-us/library/fyxd1d26.aspx)方法；

> 将此实例与指定的双精度浮点数进行比较，并返回一个整数，指示此实例的值是小于、等于还是大于指定的双精度浮点数的值。

如果*此实例不是数字 (NaN) 且值是数字*

[`Double.CompareTo()`](http://msdn.microsoft.com/en-us/library/fyxd1d26.aspx)方法返回*一个负整数*

让我们看一下这个示例（这里是一个*[`DEMO`](http://ideone.com/YuwYbQ)*）；

```
void Main()
{
    double a = double.NaN;
    double b = double.NegativeInfinity;
    Console.WriteLine(a.CompareTo(b));
} 
```

即使当我们查看 IL 代码时，`double.NaN`用 表示`00 00 00 00 00 00 F8 FF`和`double.NegativeInfinity`用`00 00 00 00 00 00 F0 FF`;表示也是如此。

```
IL_0000:  ldc.r8      00 00 00 00 00 00 F8 FF 
IL_0009:  stloc.0     
IL_000A:  ldc.r8      00 00 00 00 00 00 F0 FF 
IL_0013:  stloc.1     
IL_0014:  ldloca.s    00 
IL_0016:  ldloc.1     
IL_0017:  call        System.Double.CompareTo
IL_001C:  call        System.Console.WriteLine 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T19:15:37.477

归根结底，将 double.nan 在数字上与任何东西进行比较是没有意义的。但是，如果你有一个 double 列表并想用它做点什么，你会希望它们都在列表的末尾，这样你就可以先做所有有意义的工作，这样当你看到第一个时你就可以停下来。这就像一个列表，其中一些项目为空，它们被推到最后。

出现 double.nan 的几种情况：

```
Dim d1 as double = 0/0
Dim d2 as double = Double.PositiveInfinity / Double.PositiveInfinity
Dim d3 as double = Double.PositiveInfinity / Double.NegativeInfinity
Dim d4 as double = Double.PositiveInfinity / Double.PositiveInfinity
Dim d5 as double = Double.PositiveInfinity / Double.NegativeInfinity 
```

# php - Iframe 中的 PHP 在 IE 中不起作用

> ID：14445770
> 
> 赞同：1
> 
> 时间：2013-01-21T19:26:14.810
> 
> 标签：php, html, internet-explorer, iframe

我有一个程序，它从 PHP 文件中搜索数据库，并链接回带有输出的某个文件。它在所有浏览器中都能完美运行，不包括 IE。我不知道为什么。这是我的代码：

```
<?php
if( isset( $_POST['schoolname'] ) && strlen( trim( $_POST['schoolname'] ) ) > 0  )
{
        $school = filter_input(INPUT_POST, 'find', FILTER_SANITIZE_STRING);
        $school = $_POST['schoolname'];
        #connecting to the database
        $conn = mysql_connect("localhost", "root");
        mysql_select_db("finalproject");

        $sql = "select * from presentations where school like '%$school%'";

        $result = mysql_query($sql, $conn) or die(mysql_error());
        #this is the array that stores and displays the results of the search
        if ( mysql_num_rows($result) >0)
        {
            while ($newArray = mysql_fetch_array($result))
            {
                $school  = $newArray['school'];
                $date = $newArray['date'];
                $place  = $newArray['place'];
                $time = $newArray['time'];

                echo $school . ", " . $place . ", " . $date . ", " . $time . "<br />" . "<br />";
            }
        }
        else
        {
            echo "Record not found" . "<br />" . "<br />";
        }

        mysql_close($conn);
}

?>
<!-- The form in which the search happens -->
<form action=" " method="post">
School's name: <input type="text" name="schoolname">
<input type="submit" name="button" value="Search">
</form> 
```

这只是我在 IFrame 中的代码。

# java - 如何在Android上基于字符串绘制函数

> ID：14445776
> 
> 赞同：0
> 
> 时间：2013-01-21T19:26:44.733
> 
> 标签：java, android, function, dynamic, graph

自从我一次又一次地开始编程以来，这是我一直问自己的一个问题。

我的目标：

1.  根据“sin(x-1)*2.5” FAST 之类的字符串绘制函数图。
2.  快意味着快到足够有趣
3.  它必须在 Android 上运行

我尝试了什么：

1.  使用我自己的非常简单的解析器（缓慢而原始）
2.  使用 JavaScript 解析器（缓慢但灵活）
3.  使用[Janino](http://docs.codehaus.org/display/JANINO/Home)运行时编译器（快速灵活，完美，但仅适用于普通 Java）

我已经广泛搜索（如“android 函数图如何”之类的查询），但没有找到解决方案，尽管有许多应用程序设法做到这一点。

我不会接受“编写你自己的解析器/编译器”:)

所以：我该怎么做？

非常感谢您，

蒂尔·霍普纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:48:38.577

感谢 harism 和 John Boker 的帮助，我很轻松地实现了我的目标。

* * *

我的结论：

*   **不要**将**.CLASS**库放在你的 Android 项目中，因为它们有**.DEX**文件

*   在这些库上使用[**dx**](http://www.jetbrains.com/idea/webhelp/compiler-android-dx-compiler.html)工具，或使用它们的**源代码**

*   [**expr**](https://github.com/darius/expr/tree/master/expr)在我的应用程序中运行速度最快

* * *

谢谢你，harism 和约翰·博克

编辑：这是胡说八道，我不知道为什么我这么认为......

# sharepoint-2010 - SharePoint 2010：断开人物搜索与我的网站的连接

> ID：14445779
> 
> 赞同：0
> 
> 时间：2013-01-21T19:26:57.143
> 
> 标签：sharepoint-2010

我基本上禁用了“我的网站”功能，因此用户无法从他们名字下的菜单中访问这些内容。问题是我们需要一个公司目录，我使用企业搜索中心创建了一个员工目录，默认结果中的所有内容都链接到“/my”内置网站集中的某个页面或另一个页面。如何完全断开人物搜索与“我的网站”系统的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:15:27.070

您可以将具有搜索范围的所有搜索限制为您的网站集。这将从结果中剔除 Personal 。然后在搜索框上设置范围或编写自定义结果页面。

# c# - 如何解码文本？

> ID：14445781
> 
> 赞同：1
> 
> 时间：2013-01-21T19:27:04.583
> 
> 标签：c#, json, decode

大家好，我收到来自服务器的 json 响应，其中包含以下文本：

```
<div class=\"profile-info\">\u0413\u043e\u0440\u043e\u0434: \u041a\u043e\u0432\u0440\u043e\u0432<\/div> 
```

如何解码`\u0413\u043e\u0440\u043e\u0434: \u041a\u043e\u0432\u0440\u043e\u0432`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:03:22.770

```
Regex regex = new Regex(@"\\u([a-f0-9]{4})", RegexOptions.IgnoreCase);
String result = regex.Replace(result, match => ((Char)Int32.Parse(match.Value.Substring(2), NumberStyles.HexNumber)).ToString()); 
```

# javascript - 从 JSON 存储的子集创建存储

> ID：14445783
> 
> 赞同：3
> 
> 时间：2013-01-21T19:27:27.503
> 
> 标签：javascript, json, extjs4

我有一个 JSON 存储定义如下

```
var subAccountStore = new Ext.data.JsonStore({
  autoLoad: true,
  proxy: {
    type:'ajax',
    url : '/opUI/json/subaccount.action?name="ABC"'
  },
  fields: ['accountName', 'quantity','accountNumbers'],
  listeners: {
    load: function(store, records, success) {
      // ???????
    },
    single: true
  }
}); 
```

样本数据是

```
[{"accountName":"'ABC'","quantity":100,"accountNumbers":['12345A','12345B','12345C']},{"accountName":"'XYZ'","quantity":100,"accountNumbers":['99999A','99999B','99999C']}] 
```

**如何动态创建商店`accountNumbers`并分配给网格内的组合框？**

谢谢塔拉汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-03T09:59:54.153

对于帐号，您必须单独声明商店。例如，在面板项目中

```
items: [{
xtype: 'combobox',
id: 'addObjectComboCopy',
fieldLabel: '<h style= "color:red;">*</h> accountNumbers',
store: addFormStore,
displayField: 'select',
valueField: 'name',
editable: false,
allowBlank: false 
```

}]

这里Store必须声明如下

```
var addFormStore = Ext.create('Ext.data.Store', {
fields: ['name', 'select'],
data: [
    {"name": "01", "select": "12345A"},
    {"name": "02", "select": "12345B"},
    {"name": "03", "select": "12345C"}
] 
```

});

# android - Listview在设备上的背景不同

> ID：14445784
> 
> 赞同：0
> 
> 时间：2013-01-21T19:27:29.170
> 
> 标签：android, listadapter

我有一个 TextView，我通过 android 功能填充了一个适配器。这是文本视图

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FFFFFF" /> 
```

这是要填充的代码：

```
mList = (ListView) findViewById(android.R.id.list);

        if (mLocNames != null) {
            if (mLocNames.size() != 0) {
                mAdapter = new ArrayAdapter<String>(this, R.layout.custom_widget_list_item, mLocNames);
                mList.setAdapter(mAdapter);
            }
        } 
```

背景在大多数设备上采用父视图的颜色，但在 Wildfire HTC 上却没有。

这是三星银河：

![在此处输入图像描述](../Images/075661a705f2a3f995b3741236ff9dd1.png)

这是野火 HTC：

![在此处输入图像描述](../Images/8c6adee299c3643db4244593d75a40c8.png)

编辑：将 TextView 背景设置为蓝色的 Wildfire HTC： ![在此处输入图像描述](../Images/c0ed53615df4fb5838a5781901329684.png)

当我按下列表项时，我可以看到由于突出显示的位置。我希望整个屏幕都是蓝色的，就像在三星 Galaxy 和许多其他设备上一样。知道发生了什么吗？

编辑：包括 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/dark_blue" >

    <ImageView
        android:id="@+id/background_lines"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/background_lines_20_tiled"
        android:scaleType="fitXY" />

    <LinearLayout
        android:id="@+id/my_location_ll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:orientation="vertical" >

        <com.accuweather.android.views.SimpleSearchView
            android:id="@+id/search_view"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:layout_marginTop="4dp"
            android:paddingLeft="10dip" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="10dp"
            android:layout_marginTop="20dp"
            android:text="@string/or_use"
            android:textColor="@android:color/white"
            android:textSize="14dp" />

        <Button
            android:id="@+id/use_gps"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:background="@drawable/first_launch_location_selector"
            android:padding="8dp"
            android:text="@string/my_current_location"
            android:textColor="@android:color/white"
            android:textSize="20dp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="10dp"
            android:text="@string/descrip_enable_location"
            android:textColor="@android:color/white"
            android:textSize="14dp" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/my_location_ll" />

    <RelativeLayout
        android:id="@+id/progress_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <View
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#88808080" />

        <ProgressBar
            android:id="@+id/progress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />
    </RelativeLayout>

</RelativeLayout> 
```

# jquery-ui - 指定 jQuery UI 工具提示 CSS 样式

> ID：14445785
> 
> 赞同：4
> 
> 时间：2013-01-21T19:27:29.897
> 
> 标签：jquery-ui, jquery-ui-tooltip

我在基于 ajax 的网站中使用 jquery ui 1.9。

我有以下代码：

```
This is a <span title="Some warning" class="warning">warning</span> message<br />
This is a <span title="Some info" class="info">info</span> message 
```

即使对于动态内容，使用 jquery ui 工具提示也可以：

```
$(function() {
    $( document ).tooltip();
}); 
```

但我希望每种消息类型都有不同的工具提示样式。例如红色表示警告，蓝色表示信息，它也适用于动态内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T19:10:52.277

您需要使用[toolTipClass](http://api.jqueryui.com/tooltip/#option-tooltipClass)属性来指定 css 类

```
$(document).ready(function() {
    $( ".warning" ).tooltip({
        tooltipClass: "warning-tooltip"
    });
    $( ".info" ).tooltip({
        tooltipClass: "info-tooltip"
    });  
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-24T19:54:00.657

首先，这是有效的代码：

```
$(function() {
    $('#warning-binder-element').tooltip({
        items: '.warning',
        tooltipClass: 'warning-tooltip',
        content: function () {
            return $(this).prev('.warning-toast').html();
        },
        position: {
            my: "right bottom",
            at: "right top-10"
        }
    });

    $('#info-binder-element').tooltip({
        items: '.info',
        tooltipClass: 'info-tooltip',
        content: function () {
            return $(this).closest('.doo-hicky').next('.info-toast').html();
        },
        position: {
            my: "left bottom",
            at: "left+10 top-10"
        }
    });  
}); 
```

关于上面的几点说明：

*   选择器`.tooltip()`不是您想要弹出工具提示的项目，它是工具提示对象及其关联事件绑定到的页面上的一个元素。
*   如果您尝试将两个工具提示绑定到同一个对象，则只有最后一个将持续存在，因此将两者绑定到`$(document)`将不起作用（这就是为什么我将两个不同的工具提示对象绑定到页面上的两个不同元素的原因）。
*   您可以将工具提示对象绑定到将获得工具提示的项目，但如果您使用类选择器，这可能会导致不良影响。

# c++ - I/O 完成端口与 QueueUserApc？

> ID：14445787
> 
> 赞同：6
> 
> 时间：2013-01-21T19:27:33.887
> 
> 标签：c++, c, windows, performance, threadpool

在 Windows 下，为了避免创建过多线程，有两种方法可以插入工作项：

手段1：使用IOCP；

方法2：使用QueueUserApc。

然而，手段 1 比手段 2 复杂得多。

所以我的问题是：相对于手段 2，手段 1 的优势是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:36:19.503

当您调用 时`QueueUserApc`，您必须针对特定线程。

IOCP 有一个内置的线程分派机制，`QueueUserApc`该机制允许您从线程池中定位最高效的线程。线程分派机制自动防止过多的线程同时运行（这会导致额外的上下文切换和额外的争用）或同时运行的线程过少（这会导致性能不佳）。

Windows 实际上会跟踪运行 IOCP 作业的线程数。它最初设置允许运行的线程数等于机器上的虚拟内核数。但是，如果一个线程因 I/O 或同步而阻塞，则在 IOCP 端口上阻塞的另一个线程会自动释放，从而避免线程饥饿。

此外，IOCP 可以轻松连接到 I/O，以便 I/O 事件触发 IOCP 端口上阻塞的线程的调度。这是在 Windows 上对大量目标执行 I/O 的最有效方式。

# javascript - 检查 jquery ui 手风琴是否存在？

> ID：14445793
> 
> 赞同：6
> 
> 时间：2013-01-21T19:27:50.300
> 
> 标签：javascript, jquery, jquery-ui

有没有一种简单的方法来判断页面上是否存在 jquery 手风琴...我正在尝试根据通过 $ajax 运行的选择动态构建手风琴，从 xml 读取值，并根据所选的 xml 文件构建字符串 make拉起手风琴，最后附加它。

我认为如果页面上已经存在手风琴，并且用户选择了另一个文件，我无法销毁手风琴，清除 html，附加新字符串，然后创建一个新的手风琴......

像

```
$("#accordion").accordion('destory').html('').append(string).accordion(); 
```

似乎如果还没有手风琴，这个想法就打破了....想也许我可以检查一下？感谢您对初学者的任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T19:33:42.503

我怀疑您可以尝试检查`.data()`.

```
var isAccordion = !!$("#accordion").data("ui-accordion"); 
```

或者，通过检查在初始化时添加的`ui-accordion`类名。`.hasClass()`

```
var isAccordion = $("#accordion").hasClass("ui-accordion"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T19:41:43.090

你可以试试 .length

[使用 .length 计算元素](http://jsfiddle.net/slfede/EJJZt/)

或类似的东西

```
if($('#accordion').length > 0) {
    // do something
} 
```

# linux - 删除 Ghost 换行符的 VIM 脚本

> ID：14445795
> 
> 赞同：1
> 
> 时间：2013-01-21T19:28:05.493
> 
> 标签：linux, vim

有没有办法使用 Vim 脚本或搜索/替换来删除幽灵换行符？我曾经遇到过我必须编辑其他使用糟糕软件的开发人员在附图中留下双换行符的文件。

我很想在 Vim 中找到一种方法来删除所有那些愚蠢的双间距垃圾，所以它实际上看起来应该是这样。

![在此处输入图像描述](../Images/54f546317f1771b2c530451eb98b7199.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:31:26.807

运行搜索和替换

```
%s/\n\n/\r/g 
```

将用一个换行符替换每对两个换行符。但是，这将不可避免地搞砸那些还没有双倍行距的文件，所以不要盲目使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T21:14:33.650

更短的解决方案：

```
:v:.:d 
```

这些行真的是空的。如果可能有空格：

```
:v:^\S*$:d 
```

# opengl-es - 渲染具有多个纹理的矩形

> ID：14445796
> 
> 赞同：0
> 
> 时间：2013-01-21T19:28:06.293
> 
> 标签：opengl-es, opengl-es-2.0

我有一个 100x100 大小的 6 个顶点矩形，我用 100x100 背景图像覆盖。现在我想在它上面渲染两个“子纹理”。

假设我有两个大小为 20x20 的子纹理，其中一个我喜欢定位在 x:10 y:10 和另一个 x:50 和 y:50

（这些实际上是用作背景图像上的蒙版。）

我该怎么办？我的第一个想法是发送一个统一的 vec2，其中包含两个子纹理的位置信息片段着色器，但我真的不知道如何将它们转换为 texture2d（subtexture，*坐标*），因为 texture2d 采用 0-1 值。我不能真正解决这个问题，我希望能得到一些关于我应该往哪个方向前进的指示。

（这将在 OpenGL ES 2.0 上使用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:57:12.340

然后我认为您真正要寻找的是如何更新纹理。在您的情况下，最简单的方法可能是使用[`glTexSubImage2D`](http://www.opengl.org/sdk/docs/man/xhtml/glTexSubImage2D.xml). 以下将执行您在原始帖子中提出的要求

```
glTexSubImage2D( GL_TEXTURE_2D, 0, 10, 10, 20, 20, <format>, <type>, <subimage1> );
glTexSubImage2D( GL_TEXTURE_2D, 0, 50, 50, 20, 20, <format>, <type>, <subimage2> ); 
```

其中`<format>`, 并`<type>`描述存储在 的子纹理中的像素`<subimage*>`。其他问题还有很多额外的答案；只需搜索 glTexSubImage2D。

一种更复杂的方法（当事情不像您的问题那么简单时）是使用帧缓冲区对象渲染到纹理（如果需要，也可以搜索那个）。

# frameworks - EF : 相关实体被设置为 INSERT 而不是仅仅被添加的实体引用

> ID：14445799
> 
> 赞同：0
> 
> 时间：2013-01-21T19:28:09.173
> 
> 标签：frameworks, entity, relationships

我试图通过我得到的相关问题找到答案，但我没有看到与现在相同的情况。我是这个框架的初学者。问题是，在数据库中，TopicFeedbackType 总是被引用，但如果我附加实体，TopicNavigatedUrl 和 Product 总是插入事件。我究竟做错了什么？我将找到的实体附加到正确的实体集名称。实体被附加。我注意到在 p_TopicQuickFb 的一个属性被附加实体更新之前，它的 EntityKey 为空，但是当设置 currentNavUrl（例如）时，p_TopicQuickFb 的 EntityKey 不再为空。它的值为“EntitySet=TopicQuickFeedbacks”，但没有 id。我真的迷路了。

```
 public void AddTopicQuickFeedback(TopicQuickFeedback p_TopicQuickFb, string p_SessionID)
    {
            TopicFeedbackType currentType = this.GetTopicFeedbackType(p_TopicQuickFb.TopicFeedbackType.FeedbackType);
            bool currentTypeAttached = false;

            TopicNavigatedUrl currentNavUrl = this.GetTopicNavigatedUrl(p_TopicQuickFb.TopicNavigatedUrl.Url);
            bool currentNavUrlAttached = false;

            Product currentProduct = this.GetProduct(p_TopicQuickFb.Product.Name, p_TopicQuickFb.Product.MajorVersion, p_TopicQuickFb.Product.MinorVersion);
            bool currentProductAttached = false;

            using (COHFeedbackEntities context = GetObjectContext())
            {
                TopicFeedback tf = GetTopicFeedback(p_SessionID, context);
                if (tf != null)
                {

                    if (currentType != null)
                    {
                        p_TopicQuickFb.TopicFeedbackType = null;
                        context.AttachToOrGet<TopicFeedbackType>("TopicFeedbackTypes", ref currentType);                   
                        currentTypeAttached = true;                            
                        p_TopicQuickFb.TopicFeedbackType = currentType;
                    }

                    if (currentNavUrl != null)
                    {
                        p_TopicQuickFb.TopicNavigatedUrl = null;
                        context.AttachToOrGet<TopicNavigatedUrl>("TopicNavigatedUrls", ref currentNavUrl);                         
                        currentNavUrlAttached = true;  
                        p_TopicQuickFb.TopicNavigatedUrl = currentNavUrl;
                    }

                    if (currentProduct != null)
                    {
                        p_TopicQuickFb.Product = null;
                        context.AttachToOrGet<Product>("Products", ref currentProduct);                  
                        currentProductAttached = true;  
                        p_TopicQuickFb.Product = currentProduct;
                    }

                    tf.TopicQuickFeedbacks.Add(p_TopicQuickFb);
                    context.SaveChanges();
                    context.Detach(tf);

                    if (currentNavUrlAttached)
                    {
                        context.TopicNavigatedUrls.Detach(currentNavUrl);
                    }
                    if (currentProductAttached)
                    {
                        context.Products.Detach(currentProduct);
                    }
                    if (currentTypeAttached)
                    {
                        context.TopicFeedbackTypes.Detach(currentType);
                    }
                }
            }
      } 
```

我在这篇文章中找到了方法：[Is is possible to check if an object is already attach to a data context in Entity Framework?](https://stackoverflow.com/questions/1715501/is-is-possible-to-check-if-an-object-is-already-attached-to-a-data-context-in-en/1716109#1716109)

```
 public static void AttachToOrGet<T>(this System.Data.Objects.ObjectContext context, string entitySetName, ref T entity)
        where T : IEntityWithKey
    {
          System.Data.Objects.ObjectStateEntry entry;
          // Track whether we need to perform an attach
          bool attach = false;
          if (
                context.ObjectStateManager.TryGetObjectStateEntry
                      (
                        context.CreateEntityKey(entitySetName, entity),
                        out entry
                      )
            )
          {
                // Re-attach if necessary
                attach = entry.State == EntityState.Detached;
                // Get the discovered entity to the ref
                entity = (T)entry.Entity;
          }
          else
          {
                // Attach for the first time
                attach = true;
          }
        if (attach)
        {
            context.AttachTo(entitySetName, entity);
        }
    } 
```

测试方法：

```
 User user = new User(true, false, false);
        string commentStr = "This is my comment";

        Product product = new Product("ProductName", 7, 0);

        TopicFeedbackComment commFeedback = new TopicFeedbackComment(commentStr, new TopicNavigatedUrl("http://testurl.com/test0"), product);

        TopicFeedback feedback = new TopicFeedback(sessionID, user, FeedbackState.New);

        provider.AddTopicFeedback(feedback);

        TopicFeedback addedFeedback = provider.RetrieveTopicFeedback(sessionID);

        provider.AddTopicFeedbackComment(commFeedback, sessionID); 
```

一次又一次地运行它，只需插入到

无法发布图像，因此我可以在必要时提供架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:43:03.277

我的答案在我的最后一条评论中。我自己找到的。

如果有人想评论为什么它会以这种方式工作，那就太好了！:)

# scala - 如何打印 Slick 生成的 DDL？

> ID：14445801
> 
> 赞同：5
> 
> 时间：2013-01-21T19:28:22.627
> 
> 标签：scala, slick

**鉴于来自 GitHub 的[提升/FirstExample.scala](https://github.com/slick/slick-examples/blob/master/src/main/scala/com/typesafe/slick/examples/lifted/FirstExample.scala)，我将如何引入一个`println`可以打印生成的 SQL 的？**

我试图添加一行`println(Suppliers.ddl ++ Coffees.ddl)`，但这给我的只是以下内容：scala.slick.lifted.DDL$$anon$1@acccef1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T20:06:31.750

最终我自己找到了答案。

```
 (Suppliers.ddl ++ Coffees.ddl).createStatements.foreach(println) 
```

更多信息可以在 ScalaDoc 中找到：[http ://slick.typesafe.com/doc/1.0.0-RC1/api/#scala.slick.lifted.DDL](http://slick.typesafe.com/doc/1.0.0-RC1/api/#scala.slick.lifted.DDL)

# javascript - 另一个 div 内的固定 div

> ID：14445802
> 
> 赞同：1
> 
> 时间：2013-01-21T19:28:24.340
> 
> 标签：javascript, css, html

我已经为这个问题苦苦挣扎了两个多小时，有没有办法在一个更大的 div 中修复一个 div。当我滚动时，我想让右侧部分不滚动。

![滚动图像](../Images/b2907017399deb75118fe8c6b4e0e609.png)

所以我的问题是，有没有办法在没有 jquery 的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T19:29:46.440

您必须定位内部 div `absolute`：

```
.outerDiv {
    position: relative;
    /* give it some height */
}
.contentDiv {
    height: 100%;
    overflow: auto;
}
.innerDiv {
    position: absolute;
    right: 0;
    left: 50%;
    top: 0; bottom: 0;
} 
```

这是小提琴：http: [//jsfiddle.net/wSxss/](http://jsfiddle.net/wSxss/)

* * *

根据您的需要调整定位值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:43:50.480

[这个小提琴演示了以下解决方案](http://jsfiddle.net/HgUgE/4/)：

**HTML**

```
<div class="wrapper">
    <div class="scroller></div>
    <div class="fixed"></div>
</div> 
```

**CSS（关键部分示例）**

```
.wrapper {
    position: relative;
    height: 40px;
    overflow: hidden;
}

.scroller {
    padding-right: 200px;
    height: 100%;
    overflow: auto;
}

.fixed {
    position: absolute;
    top: 0;
    right: 15px;
    bottom: 0;
    width: 160px; /* .scroller padding minus the right offset to accomodate scroll bar and minus any real separation between it and the scroller */
} 
```

# c# - ASP.NET 应用程序中的 URL 重写

> ID：14445806
> 
> 赞同：0
> 
> 时间：2013-01-21T19:28:44.167
> 
> 标签：c#, asp.net, url, rewrite

如何在 c# .net 或 asp.net 4.0 中基于注册客户端重定向 url。例如，如果客户注册为“client1”并且我们的网站是 www.mycompany.com，客户收益的每个页面都应该是 www.client1.mycompany.com。

更详细的例子：

例如，创建的另一个客户端是 Client2。我通常创建的页面就像

```
 "www.mycompany.com/product.aspx" 
 "www.mycompany.com/categories.aspx" should be shown as
 "www.client2.mycompany.com/product.aspx" and
 "www.client2.mycompany.com/categories.aspx" respectively 
```

我在网上搜索并找到静态页面或在应用程序启动期间使用 Gloabal.asax，但在用户登录后没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:56:19.567

我之前在一些网站上做过类似的事情，您可以使用几种方法。假设您有一个 url 设置，以便所有子域 (*.url.com) 将任何用户发送到您的服务器，并且您有 IIS 设置来处理它们（即不需要主机标头，只需 IP）在同一个站点中，您可以使用以下方法之一：

1.  登录后，只需将用户发送到该 url。由于 .Net 不会关心服务器知道如何呈现它的 url，所以它应该就这么简单。这假设您的所有导航都使用相对路径，并且您必须为该域启用 cookie 共享。如果用于登录的 cookie 是在 1.url.com 上提供的，并且您将它们发送到 2.url.com，则这是必需的。您可以在同一个域中共享 cookie，需要一些工作，但可以完成。
2.  创建一个通用登录页面，该页面向服务器发送 Web 服务请求，以查看用户是否可以登录。如果他或她可以让它返回给浏览器一个命令，连同正确的 url，告诉客户端浏览器直接发布到该站点的登录页面（发送用户名、密码）。这将使他们登录到他们的站点并从一个简单的登录页面正确分配 cookie。您甚至可以创建一个仅为此目的而存在的外部登录页面。最后，所有通用页面所做的就是查看他们是否可以登录并将其凭据发送到进行登录的正确页面。出于安全原因，我建议在使用 ssl 的帖子中完成此操作。

我希望从那以后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:40:20.407

我使用了一个名为 UrlRewritingNet 的项目 - 它很旧，但源代码可用，因此您可以为 4.0 重新编译它。

链接在[http://urlrewriting.net/149/en/home.html](http://urlrewriting.net/149/en/home.html)

# php - 在单个 PHP 应用程序中设置自定义品牌登录页面

> ID：14445807
> 
> 赞同：0
> 
> 时间：2013-01-21T19:28:48.180
> 
> 标签：php, apache

我有一个多租户 SaaS 平台，客户想要自定义登录页面和仪表板页面的外观。通过将 CSS 文件的名称存储在我的数据库的 ACCOUNTS 表中，我能够成功地自定义仪表板页面。这是有效的，因为我知道他们登录后从数据库中获取哪个帐户。但是，我没有登录页面的此功能。

是否可以根据 DNS 自定义使用哪个 CSS 文件或登录页面？例如，customerabc.server.com 获取通用登录页面。customerxyz.server.com 获取他们的自定义登录页面。

我正在使用 Apache 和 PHP。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:34:57.253

是的，只需将 apache 子域配置为相同的 docroot 并在您的应用程序中对不同域做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:09:29.407

我能够使用 apache vhosts 做到这一点。ServerName 属性需要匹配根 URL/URI 并确保正确设置所有包含，您必须在根目录中拥有 php.ini 文件的副本，以便您可以在此处更改 include_path 而不是影响其他地方的其他安装实例。

# ruby-on-rails - 如何在 Rails 3 中取消关联记录的范围

> ID：14445812
> 
> 赞同：7
> 
> 时间：2013-01-21T19:29:08.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在确定范围以在 Rails 中正常工作时遇到了一些麻烦。

我的模型：

```
class User < ActiveRecord::Base
  default_scope :conditions => 'users.deleted_at IS NULL'

class Feed < ActiveRecord::Base
  belongs_to :user, :foreign_key => :author_id 
```

当我调用以下内容时：

```
feeds = Feed.includes(:user) 
```

我想跳过用户的 default_scope。所以我尝试了：

```
feeds = Feed.unscoped.includes(:user) 
```

但这并没有消除用户的范围。关于如何让它发挥作用的任何建议？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T20:04:16.180

您可以通过使用`.unscoped`块形式来完成此操作，如此[处所述](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/unscoped)：

```
User.unscoped do
  @feeds = Feed.includes(:user).all
end 
```

请注意，是否应用默认范围取决于*实际执行查询时*您是否在块内。这就是为什么上面使用`.all`，强制执行查询。

因此，虽然上述方法有效，但这不会 - 查询在`.unscoped`块外执行，并且将应用默认范围：

```
User.unscoped do
  @feeds = Feed.includes(:user)
end
@feeds #included Users will have default scope 
```

# c++ - UVa Online Judge Runtime Error C++ (341 - Non-Stop Travel)

> ID：14445816
> 
> 赞同：1
> 
> 时间：2013-01-21T19:29:28.237
> 
> 标签：c++, graph, dijkstra, adjacency-list

我一直在尝试在 UVa Judge Online 上做[341 Non-Stop Travel Problem](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=5&page=show_problem&problem=277)，但是当我提交我的代码时，法官说有一个运行时错误（RE），我无法检测到它。我使用 Dijkstra 算法和邻接列表图解决了这个问题。当我测试了输入示例时，我的程序运行良好，但我不知道该怎么做才能跳过这个运行时错误！我的代码如下

```
#include <iostream>
#include <vector>
#include <list>

#define INFINITY 9999999
#define NIL -1

using namespace std;

class Dijkstra;
class Arc;
class Vertex;
class Graph;

class Arc
{
public:
    int src;
    int dst;
    int weight;

    Arc (int _src, int _dst, int _weight)
    {
        src = _src;
        dst = _dst;
        weight = _weight;
    }

    ~Arc ()
    {

    }
};

class Vertex
{
public:
    vector<Arc*> arcs;
    Vertex ()
    {
        arcs = vector<Arc*>();
    }

    ~Vertex ()
    {
        for (int i = 0; i < (int) arcs.size(); i++)
        {
            delete arcs[i];
        }
    }
};

class Graph
{
public:
    vector<Vertex*> vertices;
    Graph()
    {
        vertices = vector<Vertex*>();
    }

    void addVertex ()
    {
        Vertex* v = new Vertex();
        vertices.push_back(v);
    }

    void addArc(int _src, int _dst, int _weight)
    {
        Arc* a = new Arc(_src,_dst, _weight);
        vertices[_src]->arcs.push_back(a);
    }

    int w(int u, int v)
    {
        for (int i = 0; i < (int) vertices[u]->arcs.size(); i++)
        {
            if (vertices[u]->arcs[i]->dst == v)
            {
                return vertices[u]->arcs[i]->weight;
            }
        }
        return INFINITY;
    }

    void printGraph()
    {
        for (int i = 0; i < (int) vertices.size(); i++)
        {
            for (int j = 0; j < (int) vertices[i]->arcs.size(); j++)
            {
                cout << i+1 << " " << vertices[i]->arcs[j]->dst+1 << " " << vertices[i]->arcs[j]->weight << "\t";
            }
            cout << endl;
        }
    }

    ~Graph ()
    {
        for (int i = 0; i < (int) vertices.size(); i++)
        {
            vertices[i]->~Vertex();
            delete vertices[i];
        }
    }

};

class Dijkstra
{
public:
    int* d;
    int* pi;
    list<int> Q;

    Dijkstra()
    {

    }

    void shortest_paths(Graph* G, int s)
    {
        initialize(G,s);
        Q = addVertices(G);
        while (Q.size() != 0)
        {
            int u = extractCheapest(Q);
            Q.remove(u);
            if (d[u] == INFINITY)
            {
                break;
            }
            for (int i = 0; i < (int) G->vertices[u]->arcs.size(); i++)
            {
                int v = G->vertices[u]->arcs[i]->dst;
                relax(G,u,v);
            }
        }
    }

    void initialize(Graph* G, int s)
    {
        int size = G->vertices.size();
        d = new int[size];
        pi = new int[size];
        for (int i = 0; i < size; i++)
        {
            d[i] = INFINITY;
            pi[i] = NIL;
        }
        d[s] = 0;
    }

    void relax(Graph* G, int u, int v)
    {
        int w = (d[u] + G->w(u,v));
        if (d[v] > w)
        {
            d[v] = w;
            pi[v] = u;
        }
    }

    list<int> addVertices(Graph* G)
    {
        list<int> q;
        for (int i = 0; i < (int) G->vertices.size(); i++)
        {
            q.push_back(i);
        }
        return q;
    }

    int extractCheapest(list<int> Q)
    {
        int minorDist = INFINITY;
        int minorVertex = NIL;
        list<int>::iterator it;
        for (it = Q.begin(); it != Q.end(); it++)
        {
            int dist = d[(*it)];
            if ( dist < minorDist )
            {
                minorDist = dist;
                minorVertex = (*it);
            }
        }
        return minorVertex;
    }

    void printOutput (int cnt, int _d)
    {
        cout << "Case " << cnt << ": Path = ";
        printRecursive(_d);
        cout << "; ";
        cout << d[_d] <<" second delay" << endl;
    }

    void printRecursive(int _d)
    {
        if(pi[_d] == NIL)
        {
            cout << " " << _d + 1;
        }
        else
        {
            printRecursive(pi[_d]);
            cout << " "<< _d + 1;
        }
    }

    ~Dijkstra()
    {
        delete[] d;
        delete[] pi;
    }

};

int main ()
{
    int NI;         
    int NE;          
    int weight;    
    int v;         
    int s;         
    int d;          
    int cnt = 0;

    while (cin >> NI)
    {
        cnt++;
        if (NI !=0 )
        {
            Graph* G = new Graph();
            for (int u = 0; u < NI; u++)
            {
                G->addVertex();
                cin >> NE;
                for (int j = 0; j < NE; j++)
                {
                    cin >> v;
                    cin >> weight;
                    G->addArc(u,v-1,weight);
                }
            }
            cin >> s;
            cin >> d;
            Dijkstra* dijkstra = new Dijkstra();
            dijkstra->shortest_paths(G,s-1);
            dijkstra->printOutput(cnt,d-1);
            G->~Graph();
            dijkstra->~Dijkstra();
        }
    }
    return 0;
} 
```

- - - - - - - - - - - - - - - -编辑 - - - - - - - - - ------------
我在代码中做了一些事情以避免运行时错误。首先，我纠正了我的内存泄漏错误（感谢 us2012 和 NPE！），然后我处理了断开连接图的情况。[这是法官接受的代码版本。](http://pastebin.com/zZrYHivM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:04:29.107

问题在这里：

```
 vertices[i]->~Vertex();
        delete vertices[i]; 
```

当你调用析构函数时，`delete`它会自动调用，所以本质上你调用了它两次。这是您在不知道时发现的方法：（相关行标记为`"HERE:"`）

```
$ valgrind --tool=memcheck ./program341
==3954== Memcheck, a memory error detector
==3954== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==3954== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==3954== Command: ./program341
==3954== 
5
2  3 3   4 6
3  1 2   3 7   5 6
1  4 5
0
1  4 7
2 4
Case 1: Path =  2 1 4; 8 second delay
==3954== Invalid read of size 4
==3954==    at 0x8048F00: Vertex::~Vertex() (341.cc:48)
HERE: ==3954==    by 0x8049155: Graph::~Graph() (341.cc:103)
==3954==    by 0x8048D7C: main (341.cc:254)
==3954==  Address 0x4336198 is 0 bytes inside a block of size 8 free'd
==3954==    at 0x402AC1D: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==3954==    by 0x804B1BA: __gnu_cxx::new_allocator<Arc*>::deallocate(Arc**, unsigned int) (new_allocator.h:100)
==3954==    by 0x804A3DA: std::_Vector_base<Arc*, std::allocator<Arc*> >::_M_deallocate(Arc**, unsigned int) (stl_vector.h:175)
==3954==    by 0x804A276: std::_Vector_base<Arc*, std::allocator<Arc*> >::~_Vector_base() (stl_vector.h:161)
==3954==    by 0x8049779: std::vector<Arc*, std::allocator<Arc*> >::~vector() (stl_vector.h:404)
==3954==    by 0x8048F3B: Vertex::~Vertex() (341.cc:45)
HERE:  ==3954==    by 0x8049135: Graph::~Graph() (341.cc:102)
==3954==    by 0x8048D7C: main (341.cc:254)
...
... 
```

# jquery - 页面加载后突出显示jquery

> ID：14445819
> 
> 赞同：0
> 
> 时间：2013-01-21T19:29:49.987
> 
> 标签：jquery, jquery-ui

如果发生单击事件，此代码可以正常工作。

```
$(document).ready(function() {
   $(".last").click(function () {
    $(this).effect("highlight", {}, 3000);
   });
  }); 
```

当单击部分时，Stackoverflow 具有类似的效果`StackExchange`，您可以看到用户做出的响应。

**`$(".last").effect("highlight", {}, 3000);`页面加载后是否可能触发？像stackoverflow效果？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:37:20.423

```
$(document).ready(function() {
   $(".last").effect("highlight", {}, 3000);
}); 
```

或者

```
$(window).load(function() {
   $(".last").effect("highlight", {}, 3000);
}); 
```

# javascript - 如何测试滚动条的响应能力？

> ID：14445822
> 
> 赞同：0
> 
> 时间：2013-01-21T19:29:59.123
> 
> 标签：javascript, html, internet-explorer, safari

据观察，某些 JavaScript 会导致滚动列表在 IE 和 Safari 中移动缓慢。我被要求提高性能。

（JavaScript 是对滚动列表中的项目进行悬停的功能。当使用鼠标滚动滚动时，移动时断断续续且缓慢。）

有什么方法可以定量测量滚动条的移动速度或我从给定的滚动量中得到多少移动？

我认为进行硬测量是可取的，这样我就可以确定我的优化是否有效。

# android - Android 地图方向

> ID：14445827
> 
> 赞同：2
> 
> 时间：2013-01-21T19:30:28.160
> 
> 标签：android, google-maps-android-api-2, map-directions

我希望整合纬度、经度和用户当前位置之间的方向。我希望单击按钮将用户定向到已安装的谷歌地图/其他应用程序并显示方向。

我搜索了 SO 和 Google，但找不到好的来源，因此发布了这个问题。

[Tour Bangalore](https://play.google.com/store/apps/details?id=appinventor.ai_vasista2k.Tour_Bangalore)似乎可以做到。找不到有关如何实现此目的的文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:34:07.777

`Intent`抱歉，没有记录和支持的结构。您可以[在某个点上显示地图](http://developer.android.com/guide/appendix/g-app-intents.html)，但不能强制地图获取方向。

另外，请记住：

*   并非所有设备都有 Google 地图
*   用户可能不想使用谷歌地图，即使它已安装（例如，他们购买了一些他们希望使用的第三方地图应用程序）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:08:33.837

[这里](http://developer.android.com/guide/appendix/g-app-intents.html)给出了唯一记录的官方意图。它们不包括方向。

已经注意到以下意图结构适用于 Google 地图。当前的谷歌地图似乎吸收了谷歌地图的 http 请求。这可能是您见过的应用程序使用的方法。但是，它可能只适用于谷歌地图，并且由于它似乎没有记录，因此不能保证它会继续适用于未来版本的谷歌地图。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?daddr=33.881894,-92.199623&saddr=My+Location")); 
```

where`daddr`是目标位置，`saddr`是源位置。它们可以是 lat/lng 或搜索词。“My+Location”是上例中的一个搜索词，因此它不太可能在英语以外的语言环境中工作。

# android - 在 asynctask 中完成任务后显示进度对话框

> ID：14445828
> 
> 赞同：2
> 
> 时间：2013-01-21T19:30:31.447
> 
> 标签：android, android-asynctask, progressdialog, telnet

嗨，我想显示`progressdialog`直到通过`telnet`. 所以我`asynctask`用于这个目的。

```
private class AsyncAction extends AsyncTask<String, Void, String> 
{

    @Override
    protected String doInBackground(String... arg0) 
    {
        // TODO Auto-generated method stub

        return null;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        try
          {

              telnet.connect("XXX.XXX.XXX.XXX", 23);

                // Get input and output stream references
                in = telnet.getInputStream();
                out = new PrintStream(telnet.getOutputStream());

                // Log the user on
                readUntil("login:");
                write("jk");
                readUntil("password:");
                write("kk");

                // Advance to a prompt
                readUntil(prompt + "");
                write("ping -t localhost\n");
                readUntil(">");
                write("cdkk");

                AlertDialog.Builder alertbox = new AlertDialog.Builder(TelSampActivity.this);
                String msg="work finished!";
                alertbox.setMessage(msg);
                alertbox.show();

        } 
          catch (Exception e) 
          {
            // TODO: handle exception
        }
        finally
        {
            pd.dismiss();
        }

//          pd.dismiss();
    }

    @Override
    protected void onPreExecute() 
    {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(TelSampActivity.this);
        pd.setMessage("loading...");
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show();
    }

} 
```

我`asynctask`像`oncreate()`下面这样打电话

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try{   

         new AsyncAction().execute();

        }catch (Exception e) {
            e.printStackTrace();
        }

} 
```

`progressdialog`问题是在命令执行之前我看不到。请帮我解决问题。提前致谢。

**编辑**

发送和读取命令的代码

```
public String readUntil(String pattern) {
    try {
    char lastChar = pattern.charAt(pattern.length()-1);
    StringBuffer sb = new StringBuffer();
    boolean found = false;
    char ch = (char) in.read();
    while (true) {
    System.out.print(ch);
    sb.append(ch);
if (ch == lastChar) 
{
if (sb.toString().endsWith(pattern)) 
{
    if (sb.toString().contains("cdkk"))
    {
        disconnect();
        break;

    }
    else
    {
        return sb.toString();
    }

}
else
{
    disconnect();
    break;
}
}
else if(sb.toString().contains("Failed"))
{
    AlertDialog.Builder alertbox = new AlertDialog.Builder(TelSampActivity.this);
        String error="Invalid username or password!";
        alertbox.setMessage(error);
        alertbox.setTitle("Error");
        alertbox.show();
    System.out.println("bad user name");
    disconnect();
    break;
}

ch = (char) in.read();
}
}
catch (Exception e) {
e.printStackTrace();
}
return null;
}

public void write(String value) {
try {
out.println(value);
out.flush();
System.out.println(value);
}
catch (Exception e) {
e.printStackTrace();
}
}

public String sendCommand(String command) {
try {
write(command);
return readUntil(prompt + " ");
}
catch (Exception e) {
e.printStackTrace();
}
return null;
}

public void disconnect() {
try {
telnet.disconnect();
}
catch (Exception e) {
e.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:36:52.357

目前您正在尝试从 onPostExecute 执行网络操作，因为此方法是从 UI Thread 调用的。更改您的代码以便以正确的方式工作

```
private class AsyncAction extends AsyncTask<String, Void, String> 
{
     public static boolean status=false;
    @Override
    protected String doInBackground(String... arg0) 
    {
        // TODO Auto-generated method stub
        try
          {

              telnet.connect("XXX.XXX.XXX.XXX", 23);

                // Get input and output stream references
                in = telnet.getInputStream();
                out = new PrintStream(telnet.getOutputStream());

                // Log the user on
                readUntil("login:");
                write("jk");
                readUntil("password:");
                write("kk");

                // Advance to a prompt
                readUntil(prompt + "");
                write("ping -t localhost\n");
                readUntil(">");
                write("cdkk");
               // make status true or false if command successfully executed 
              status=true;

        } 
          catch (Exception e) 
          {
            // TODO: handle exception
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) 
    {

       pd.dismiss();
         // check status if true then show AlertDialog
      if(status==true){
       AlertDialog.Builder alertbox = 
                        new AlertDialog.Builder(TelSampActivity.this);
       String msg="work finished!";
       alertbox.setMessage(msg);
       alertbox.show();
     }
    else{
           // your code here
       }

    }

    @Override
    protected void onPreExecute() 
    {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(TelSampActivity.this);
        pd.setMessage("loading...");
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:34:27.743

您需要在 onPreExecute() 中显示进度条在 doInBackground() 中完成工作，然后在 onPostExecute() 中隐藏进度条。onPreExecute() 和 onPostExecute() 都在主线程上执行，而 doInBackground 在后台执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T12:10:25.873

您正在**onPostExecute()**方法上进行工作，该方法应该在**doInBackground()**内 显示您的进度对话框**onPreExecute()**并在**onPostExecute()**内关闭。

# python - 如何在一组排序数组中找到最大的连续重叠区域

> ID：14445830
> 
> 赞同：2
> 
> 时间：2013-01-21T19:30:48.087
> 
> 标签：python, arrays, numpy

给定一个有序一维数组的元组`(arr1, arr2, arr3, )`，这将是获得最小/最大索引元组以`((min1, max1), (min2, max2), (min3, max3), )`使数组跨越最大公共范围的最佳方法？

我的意思是

```
min(arr[min1], arr2[min2], arr3[min3]) > max(arr1[min1-1], arr2[min2-1], arr3[min3-1]) 
```

和

```
max(arr[min1], arr2[min2], arr3[min3]) < min(arr1[min1+1], arr2[min2+1], arr3[min3+1]) 
```

上限也一样？

一个例子：

给定`arange(12)`和`arange(3, 8)`，我想得到`((3,8), (0,6))`，以那个为目标`arange(12)[3:8] == arange(3,8)[0:6]`。

**编辑**请注意，数组可以是浮点数或整数。

抱歉，如果这令人困惑；我现在找不到更容易的词。任何帮助是极大的赞赏！

**EDIT2 / answer**我只是意识到我在提出问题时很糟糕。我最终解决了我想要的问题：

```
 mins = [np.min(t) for t in arrays]
 maxs = [np.max(t) for t in arrays]
 lower_bound = np.max(mins)
 upper_bound = np.min(maxs)
 lower_row = [np.searchsorted(arr, lower_bound, side='left') for arr in arrays]
 upper_row = [np.searchsorted(arr, upper_bound, side='right') for arr in arrays]
 result = zip(lower_row, upper_row) 
```

但是，这两个答案似乎都对我提出的问题有效，所以我不确定只选择其中一个作为“正确” - 我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:30:58.290

我确信有不同的方法可以做到这一点，我会使用[合并](http://en.wikipedia.org/wiki/Merge_algorithm)算法遍历两个数组，跟踪重叠区域。如果您不熟悉这个想法，请看一下[merge-sort](http://en.wikipedia.org/wiki/Merge_sort)，希望在它和代码之间很清楚它是如何工作的。

```
def find_overlap(a, b):
    i = 0
    j = 0
    len_a = len(a)
    len_b = len(b)
    in_overlap = False
    best_count = 0
    best_start = (-1, -1)
    best_end = (-1, -1)

    while i < len_a and j < len_b:

        if a[i] == b[j]:
            if in_overlap:
                # Keep track of the length of the overlapping region
                count += 1
            else:
                # This is a new overlapping region, set count to 1 record start
                in_overlap = True
                count = 1
                start = (i, j)
            # Step indicies
            i += 1
            j += 1
            end = (i, j)
            if count > best_count:
                # Is this the longest overlapping region so far?
                best_count = count
                best_start = start
                best_end = end
        # If not in a an overlapping region, only step one index
        elif a[i] < b[j]:
            in_overlap = False
            i += 1
        elif b[j] < a[i]:
            in_overlap = False
            j += 1
        else:
            # This should never happen
            raise
    # End of loop

    return best_start, best_end 
```

请注意，此处的 end 在 python 约定中返回，因此 if`a=[0, 1, 2]`和`b=[0, 1, 4]`,`start=(0, 0)`和`end=(2, 2)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:31:15.137

我认为您正在寻找[最长公共子串问题](http://en.wikipedia.org/wiki/Longest_common_substring_problem)的特殊情况的解决方案。虽然该问题可以使用后缀树或动态编程来解决，但排序“字符串”的特殊情况更容易解决。

这是我认为可以为您提供所需值的代码。它的单个参数是排序序列的序列。它的返回值是包含每个内部序列的 2 元组的列表。元组值是序列之间最长公共子串的切片索引。请注意，如果没有公共子字符串，则元组都将是`(0,0)`，这将导致空切片（我认为这是正确的，因为空切片将彼此相等！）。

编码：

```
def longest_common_substring_sorted(sequences):
    l = len(sequences)
    current_indexes = [0]*l
    current_substring_length = 0
    current_substring_starts = [0]*l
    longest_substring_length = 0
    longest_substring_starts = current_substring_starts

    while all(index < len(sequence) for index, sequence
              in zip(current_indexes, sequences)):
        m = min(sequence[index] for index, sequence
                in zip(current_indexes, sequences))
        common = True
        for i in range(l):
            if sequences[i][current_indexes[i]] == m:
                current_indexes[i] += 1
            else:
                common = False

        if common:
            current_substring_length += 1
        else:
            if current_substring_length > longest_substring_length:
                longest_substring_length = current_substring_length
                longest_substring_starts = current_substring_starts
            current_substring_length = 0
            current_substring_starts = list(current_indexes)

    if current_substring_length > longest_substring_length:
        longest_substring_length = current_substring_length
        longest_substring_starts = current_substring_starts

    return [(i, i+longest_substring_length)
            for i in longest_substring_starts] 
```

测试输出：

```
>>> a=[1,2,3,4,5,6]
>>> b=[1,2,3,5,6,7]
>>> c=[3,4,5,6,7,8]
>>> longest_common_substring_sorted((a,b,c))
[(4, 6), (3, 5), (2, 4)] 
```

我很抱歉没有很好地注释代码。该算法有点类似于合并排序的合并步骤。基本上，它跟踪每个序列的索引。当它迭代时，它会递增与等于最小值的值相对应的所有索引。如果所有列表中的当前值相等（等于最小值，因此彼此相等），则它知道它在所有列表中的公共子字符串中。当一个子串结束时，它会根据目前发现的最长子串进行检查。

# ios - 如何解决“应用程序协同签名验证失败”

> ID：14445831
> 
> 赞同：0
> 
> 时间：2013-01-21T19:30:58.670
> 
> 标签：ios, app-store

我是一名承包商，正在构建一个将由另一家公司发布的应用程序。我一直在使用开发配置文件在我的设备上进行测试，并使用临时分发配置文件通过 TestFlight 与一组测试人员共享应用程序。这一切都很好。

我在将应用程序提交给 Apple 时遇到问题。我尝试创建一个使用他们的 App Store 配置文件签名的 IPA，但他们无法使用 Application Loader 提交它（这是他们通常的工作流程）。他们与我分享了他们的 iTunes Connect 管理员登录信息，因此我可以尝试从 Xcode 提交。

两种方法都给出相同的错误：`Application failed codesign verification. The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate.`

我在这里有什么选择？我已尝试删除并重新制作 App Store 配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:40:18.100

我在 Apple 的帮助下解决了这个问题。我只需要撤销我的证书，发出新的证书签名请求，然后重新创建我的所有配置文件。我最近更改了 Apple ID 的电子邮件地址，所以可能与此有关。

有关在此处重新开始的更多详细信息[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG6](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG6)

# c# - 简单的会员管理帐户

> ID：14445832
> 
> 赞同：0
> 
> 时间：2013-01-21T19:31:06.320
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我正在开发我的第一个 ASP.Net MVC 4 应用程序，现在坚持使用一个简单的用例。

我需要对一个用户（管理员）进行身份验证，以便他/她可以登录到管理区域来执行某些任务。虽然 ASP.Net 互联网项目模板具有使用简单成员资格的帐户控制器，但这似乎比我实际需要的要多得多。例如，我真的不需要用户注册功能和用户角色。我的要求相当简单，只需在数据库中存储一个用户，让他可以选择更新他的信息，如密码、电子邮件等，并授予他访问管理区域（管理控制器和操作）的权限。我想不通的是

1.  简单会员或其他 asp.net 会员提供商是我对这个简单场景的唯一选择。
2.  如果不是，我还有什么其他选项可以`[Authorize]`用来保护管理员操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:44:05.413

您可以构建一个自定义方法来获取用户及其存储的角色，然后在控制器中对其进行评估。因此，例如：

```
public ActionResult GetAdminPage()
{
    var loggedInUserName = HttpContext.User.Identity.Name;
    var user = somesortofproviderlookupmethod(loggedInUserName);

    // Assume user is a bool and is true
    if (user)
    {
        return view("AdminPage");
    }
} 
```

我唯一不确定的是 HttpContext.User 是否需要会员资格。也许有人可以提供一些启示。如果是这样，也许您可​​以从视图中发送用户名，但是您当然信任客户端。因此，您如何进行用户身份验证会在一定程度上改变这个答案。

就个人而言，我喜欢会员制。它干净、简单、快速，如果您最终有其他要求，可以很好地扩展。使用会员资格做这样的事情会更容易，因为那时你实际上可以使用 Roles.GetRolesForUser(); 并且仅在它们包含您要查找的角色时才返回管理视图。

# javascript - Javascript“新”关键字

> ID：14445835
> 
> 赞同：0
> 
> 时间：2013-01-21T19:31:10.203
> 
> 标签：javascript

`'Javascript: The Good Parts'`提供了有关“构造函数调用模式”的示例（第 29-30 页）。

```
var Quo = function (string) { 
    this.status = string;
};

Quo.prototype.get_status = function() { 
    return this.status;
};

var myQuo = new Quo("confused");

document.writeln(myQuo.get_status()); // returns confused 
```

该部分以，`"Use of this style of constructor functions is not recommended. We will see better alternatives in the next chapter."`

这个例子的意义何在？强烈建议不要使用这种模式？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:35:34.587

本节结束于：

> 不推荐使用这种风格的构造函数。**我们将在下一章看到更好的选择。**

粗体字表示您应该阅读下一章以找到更好的替代方案。

所以，继续做吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:36:23.870

不要*太*认真地对待克罗克福德。他习惯于将自己的风格敏感性投射为客观事实。

事实上，有很多方法可以创建类似于 Javascript 中的传统类的结构。你引用的模式被*广泛*使用，效果很好。

我的建议是学习所有方法来做到这一点，并使用最好的结构来完成这项工作。*在您也知道原因*之前，不要太沉迷于 Crockford 的建议。

# android - 我无法通过 Eclipse 运行 Android SDK 管理器，我在控制台窗口中遇到错误

> ID：14445837
> 
> 赞同：0
> 
> 时间：2013-01-21T19:31:14.697
> 
> 标签：android, eclipse

这是我得到的错误/s：

```
[2013-01-21 21:24:14 - SDK Manager] [SDK Manager] 'lib\find_java.bat' is not recognized as an internal or external command,
[2013-01-21 21:24:14 - SDK Manager] [SDK Manager] operable program or batch file. 
```

现在我尝试更新计算机设置中的 Path 变量，使其看起来像：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Users\bout0_000\android-sdks\platform-tools;C:\Program Files\Java\jdk1.7.0_11\bin 
```

我现在又安装了`JDK`

尽管 Eclipse 我收到此错误，但仍然在单击 Android SDK Manager 的图标时。

这是`find_java.bat`文件的内容：

```
@echo off
rem Copyright (C) 2007 The Android Open Source Project
rem
rem Licensed under the Apache License, Version 2.0 (the "License");
rem you may not use this file except in compliance with the License.
rem You may obtain a copy of the License at
rem
rem      http://www.apache.org/licenses/LICENSE-2.0
rem
rem Unless required by applicable law or agreed to in writing, software
rem distributed under the License is distributed on an "AS IS" BASIS,
rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
rem See the License for the specific language governing permissions and
rem limitations under the License.

rem This script is called by the other batch files to find a suitable `Java.exe`
rem to use. The script changes the "`java_exe`" env variable. The variable
rem is left unset if Java.exe was not found.

rem Useful links:
rem Command-line reference:
rem   http://technet.microsoft.com/en-us/library/bb490890.aspx

rem Check we have a valid Java.exe in the path. The return code will
rem be 0 if the command worked or 1 if the exec failed (program not found).
for /f %%a in ('%~dps0\find_java.exe -s') do set java_exe=%%a
if not defined java_exe goto :CheckFailed

:SearchJavaW
rem Check if we can find a javaw.exe at the same location than java.exe.
rem If that doesn't work, just fall back on the java.exe we just found.
for /f %%a in ('%~dps0\find_java.exe -s -w') do set javaw_exe=%%a
if not exist %javaw_exe% set javaw_exe=%java_exe%
goto :EOF

:CheckFailed
echo.
echo ERROR: No suitable Java found. In order to properly use the Android Developer
echo Tools, you need a suitable version of Java JDK installed on your system.
echo We recommend that you install the JDK version of JavaSE, available here:
echo   http://www.oracle.com/technetwork/java/javase/downloads
echo.
echo You can find the complete Android SDK requirements here:
echo   http://developer.android.com/sdk/requirements.html
echo.
goto :EOF 
```

此 find_java.bat 文件位于：

```
C:\Users\my user name\android-sdks\tools\lib 
```

我还应该做什么？我认为这个问题是从使用 Eclipse 时开始的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:43:48.443

您是否通过以下方式告诉 Eclipse Android SDK 在哪里：-

Eclipse -> 首选项。

单击左侧的 Android 部分，然后设置 SDK 位置。它应该是：-

C:\Users\我的用户名\android-sdks

谢谢，

瑞安

# java - Hibernate 启动很慢

> ID：14445838
> 
> 赞同：26
> 
> 时间：2013-01-21T19:31:16.437
> 
> 标签：java, hibernate, postgresql, jdbc, postgresql-9.1

出于某种原因，我的休眠应用程序的启动速度非常慢。（最多 2 分钟）我一直认为 c3p0 配置完全错误（[相关问题](https://stackoverflow.com/questions/14417692/initializing-c3p0-connection-pool-takes-2-min "相关问题")），但研究日志显示，在建立与服务器的连接后没有任何活动。此外，使用 Hibernate 的内置轮询功能显示相同的结果。

这是日志中的一个片段：

```
20:06:51,248 DEBUG BasicResourcePool:422 - decremented pending_acquires: 0
20:06:51,248 DEBUG BasicResourcePool:1644 - trace com.mchange.v2.resourcepool.BasicResourcePool@1acaf0ed [managed: 3, unused: 2, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@5f873eb2)
20:06:51,248 DEBUG BasicResourcePool:1644 - trace com.mchange.v2.resourcepool.BasicResourcePool@1acaf0ed [managed: 3, unused: 2, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@5f873eb2)
20:06:51,273 DEBUG JdbcServicesImpl:121 - Database ->
       name : PostgreSQL
    version : 9.1.6
      major : 9
      minor : 1
20:06:51,274 DEBUG JdbcServicesImpl:127 - Driver ->
       name : PostgreSQL Native Driver
    version : PostgreSQL 9.2 JDBC4 (build 1002)
      major : 9
      minor : 2
20:06:51,274 DEBUG JdbcServicesImpl:133 - JDBC version : 4.0 ##### HANGS FOR 2 MINUTES  ON THIS LINE #####
20:08:14,727  INFO Dialect:123 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
20:08:14,736  INFO LobCreatorBuilder:120 - HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
20:08:14,736 DEBUG GooGooStatementCache:297 - checkinAll(): com.mchange.v2.c3p0.stmt.GlobalMaxOnlyStatementCache stats -- total size: 0; checked out: 0; num connections: 0; num keys: 0
20:08:14,736 DEBUG GooGooStatementCache:297 - checkinAll(): com.mchange.v2.c3p0.stmt.GlobalMaxOnlyStatementCache stats -- total size: 0; checked out: 0; num connections: 0; num keys: 0
20:08:14,883 DEBUG BasicResourcePool:1644 - trace com.mchange.v2.resourcepool.BasicResourcePool@1acaf0ed [managed: 3, unused: 2, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@5f873eb2)
20:08:14,883 DEBUG BasicResourcePool:1644 - trace com.mchange.v2.resourcepool.BasicResourcePool@1acaf0ed [managed: 3, unused: 2, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@5f873eb2)
20:08:14,883 DEBUG GooGooStatementCache:297 - checkinAll(): com.mchange.v2.c3p0.stmt.GlobalMaxOnlyStatementCache stats -- total size: 0; checked out: 0; num connections: 0; num keys: 0 
```

（请注意#comment#。）

我还尝试了一个较旧的 Postgres JDBC 驱动程序，但没有任何运气。

连接到本地数据库工作得很好。立即建立连接，我可以查询数据库。这个远程数据库是一个 Heroku 开发实例。我也用另一个遥控器试了一下。同样的结果。

我不知道我现在可以检查什么来摆脱这种烦恼。任何帮助将非常感激。

也许我的 hibernate.cfg.xml 有帮助：

http://www.hibernate.org/dtd/hibernate-

```
configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.url"/>
        <property name="connection.default_schema"/>
        <property name="connection.username"/>
        <property name="connection.password"/> 

        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
            <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>
        <property name="current_session_context_class">thread</property>            
        <property name="hibernate.c3p0.acquire_increment">3</property>
        <property name="hibernate.c3p0.min_size">3</property>
        <property name="hibernate.c3p0.max_size">10</property>
        <property name="hibernate.c3p0.timeout">300</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.idle_test_period">3000</property>
        <property name="hibernate.c3p0.acquireRetryDelay">500</property>

        <property name="show_sql">true</property>
        <property name="format_sql">false</property>

        <property name="hbm2ddl.auto">validate</property>

        <mapping class="core.entities.Exam" />
        <mapping class="core.entities.Examination" />
        ...
    </session-factory>
</hibernate-configuration> 
```

编辑：我试图通过日志和分析找到延迟的原因，但一直没有成功。（虽然我在这方面并不那么先进。）最后，我确实尝试并失败了，并为远程 MySQL 实例更改了我的数据库，以检查是否发生任何差异。事实证明，连接几乎是立即建立的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-09-18T01:01:17.197

请参阅[Hibernate Slow to Acquire Postgres Connection](https://stackoverflow.com/questions/10075081/hibernate-slow-to-acquire-postgres-connection)

`hibernate.temp.use_jdbc_metadata_defaults=false`

避免在 SessionFactory 创建期间重新加载元数据。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-11-29T11:49:14.527

对于 Postgres，添加应用程序配置：

```
spring.jpa.database-platform = org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false 
```

如果没有确定方言，第一行是必要的

**结果**

*前：*

```
09:10:19.637 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {4.0.5.Final}
09:14:17.159 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL9Dialect 
```

~4 分钟

*后：*

```
09:40:10.930 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {4.0.5.Final}
09:40:11.043 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect 
```

~1 分钟

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-07T12:23:22.443

当我将数据库从 10g 更新到 11 时，我遇到了这个问题。我在代码中发现了以下设置：

```
 hibernateProperties.setProperty("hibernate.dialect","org.hibernate.dialect.Oracle10gDialect"); 
```

并且不得不改变方言如下：

```
 hibernateProperties.setProperty("hibernate.dialect", "org.hibernate.dialect.Oracle11gDialect"); 
```

* * *

在某一时刻，这不再对我有用，我不得不更改以下内容，以免卡在“HHH000400：使用方言：org.hibernate.dialect.Oracle10gDialect”：

```
hibernateProperties.setProperty("hibernate.temp.use_jdbc_metadata_defaults", "false"); 
```

此外，我必须注释掉以下内容，以免卡在“HV000001：Hibernate Validator 6.1.5.Final”：

```
 // hibernateProperties.setProperty("hibernate.hbm2ddl.auto", "validate"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-15T03:29:22.613

此配置可能导致启动缓慢：

```
<property name="hbm2ddl.auto">update</property> 
```

这个配置意味着当hibernate启动时，检查实体是否与ddl匹配，并执行'create'，'update'等操作。这将花费太多时间。

所以解决方案是评论这个配置。然后休眠将在没有验证的情况下启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T19:37:55.510

如果它异常缓慢，那么您的应用程序可能有锁，或者一些资源块。在任何情况下，下载 VisualVM（JDK 包括 jconsole，它的简化版本）并检查您的线程在做什么，它们在哪里卡住（threaddump），如果没有给出任何快速答案，请打开分析器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T21:48:11.943

你用的是什么容器？c3p0 应该安装在容器中，例如 Tomcat。如果您正在运行单元测试，请不要使用连接池。如果将其放入 tomcat，则使用 Resource 标记执行此操作，然后使用 JNDI 连接到它。最好的方法。

# jquery - 我的 Cordova 项目没有响应 jquery

> ID：14445839
> 
> 赞同：-1
> 
> 时间：2013-01-21T19:31:17.353
> 
> 标签：jquery, iphone, xcode, html, cordova

这两天我一直在寻找，我似乎无法找到解决方案。

我正在努力让一个小应用程序在可搜索的列表视图中列出我们公司的所有员工。尽管我设法让代码在模拟器和我的 iphone 中都能正常工作，但关于创建可搜索列表视图的 jquery 的部分没有显示出来。我想我通过 js 和 css 链接检查了两次和三次，但我仍然一无所知。任何帮助将非常感激。

顺便说一句，我使用的是 Xcode 4.5.2、Jquery-mobile-1.2.0 和 cordova-2.3。

这是 index.html：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.js"></script>  
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/styles.css" /> 
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.min.css" />

</head>
<body>

    <div data-role="page">

        <div data-role="header" id="header" class="header">
            <h1>MIT Employees</h1>
        </div><!-- /header -->

        <div data-role="content" id="header2">
            <h2>Select Employee</h2>
        </div><!-- /content -->
    <div id="wrapper">
        <ul data-role="listview" data-inset="true" data-filter="true"><div data-role="content" id="employeeList"></div></ul>
    </div>

    <div id="busy"/>Loading...</div>

    <script src="js/phonegap.js"></script>
    <script src="js/iscroll.js"></script>
    <script src="js/getEmpList.js"></script>
    <script src="js/employ.js"></script>
    </div>
</body>

</html> 
```

这里是Javascript：

```
var db;
var dbCreated = false;

var scroll = new iScroll('wrapper', { vScrollbar: true, hScrollbar:false, hScroll: false });

//add listener when device ready
document.addEventListener("deviceready", onDeviceReady, false);

//function will be called when device ready
function onDeviceReady() {
db = window.openDatabase("EmployeeDirectoryDB", "1.0", "MIT Employee Database", 200000);
if (dbCreated)
    db.transaction(getEmployees, transaction_error);
else
    db.transaction(populateDB, transaction_error, populateDB_success);
}
function transaction_error(tx, error) {
$('#busy').hide();
alert("Database Error: " + error);
}

function populateDB_success() {
dbCreated = true;
db.transaction(getEmployees, transaction_error);
}

function getEmployees(tx) {
var sql = "select * from employees order by lname, fname";
tx.executeSql(sql, [], getEmployees_success);
}

function getEmployees_success(tx, results) {
$('#busy').hide();
var len = results.rows.length;
for (var i=0; i<len; i++) {
    var employee = results.rows.item(i);
    $('#employeeList').append('<li data-icon="arrow-r"><a href="employeedetails.html?id=' + employee.id + '">' +
                              '<p class="line2">' + employee.empid + ' ' + employee.lname + ', ' + employee.fname + '</a></li>');
}
setTimeout(function(){
           scroll.refresh();
           },100);
db = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:25:26.727

我找到了解决方案。我链接的 jquery 脚本的顺序是错误的。

现在出现过滤选项。虽然，键盘没有激活。我会继续寻找这个。

# date - Joomla按数据排序，顺序错误

> ID：14445846
> 
> 赞同：2
> 
> 时间：2013-01-21T19:31:40.493
> 
> 标签：date, sorting, joomla

我有一个包含一个类别文章的主页，我在菜单，文章和类别中设置了按日期排序，但它们在我的主页上仍然没有正确排序，但是在管理员面板中，鉴于文章它们被排序适当地。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-02T10:46:39.417

事实上，我的模板要求我为列号设置“1”。所以，Joomla 实际上是正确排序的，它的模板显示不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T02:39:08.487

如果一个类别被调整为在多列中显示（fe 2），但只有 1 列适合模板，那么排序可能会被破坏。

# objective-c - 如何在objective-c中启用在垃圾箱上丢弃的东西？

> ID：14445849
> 
> 赞同：4
> 
> 时间：2013-01-21T19:31:51.680
> 
> 标签：objective-c, cocoa, drag-and-drop, recycle-bin

我已经实现了从 Finder 拖放到我的应用程序到 NSTableView，并创建`link`了文档等。

但是，我想通过将项目从 NSTableView 拖放到垃圾图标上来进行删除操作。我怎样才能正确地做到这一点？如何启用丢弃到垃圾箱？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T22:34:18.977

（我已经很长时间没有这样做了，我是从记忆中做的，然后看一下文档。如果这不起作用，请告诉我，我会仔细检查代码。）

在`draggingSession:sourceOperationMaskForDraggingContext:`你应该包括`NSDragOperationDelete`作为合法操作之一。然后，您将收到`NSDragOperationDelete`回信，`draggingSession:endedAtPoint:operation:`表明该项目已被丢弃在垃圾箱中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-11T12:45:35.567

使用 dropSessionDidEnd 委托方法。在那里您可以获得放置点的位置，并且不需要另一个 UICollectionView/UITableView ：

```
func collectionView(_ collectionView: UICollectionView, dropSessionDidEnd session: UIDropSession) {

  guard let item = session.items.first?.localObject as? YourObject else {
    return
  }
  let dropLocation = session.location(in: self.view)
  let itemDropedInTrash = TrashImageView.frame.contains(dropLocation)
  if itemDropedInTrash {
    //here update your datasource and reload your collectioView/tableView
    //deleteItemFromDataSource(item: item)
    //collectionView.reloadData()

  }
} 
```

# android - 我想在 Android 中获取最后插入的记录 id

> ID：14445851
> 
> 赞同：1
> 
> 时间：2013-01-21T19:31:57.123
> 
> 标签：android, android-sqlite, android-cursor

我是安卓新手。我只是在使用 sqlite 数据库。现在我想知道如何**在数据库中最后插入的记录之后立即获取 ID？**

我在这里搜索这个主题，但我找不到完美的答案，这就是我再次问这个问题的原因。

感谢 Akmal Rasool

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:40:33.863

实际上，**SQLiteDatabase**类有它自己的 insert 方法，它返回新创建行的 id。我认为这是获得新 ID 的最佳方式。[您可以在此处](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)查看其文档。

我希望这有帮助。

# video - ffmpeg 平滑视频升级

> ID：14445852
> 
> 赞同：2
> 
> 时间：2013-01-21T19:32:00.370
> 
> 标签：video, ffmpeg

我有一些 320x240 的旧视频，我想升级到 640x480

免责声明：*我知道升级总是会破坏质量。*

我的问题是，与观看视频时在任何媒体播放器中手动调整大小相比，ffmpeg（-s 或缩放过滤器）中的“常规”放大选项总是给出更糟糕的结果（例如，在 Ubuntu 的电影播放器​​中调整大小为 2:1 选项）。因此，很明显存在*更好*的算法，播放器使用这些算法来升级视频。我只是不知道如何让 ffmpeg 使用它们，我是新手视频转换器 :-) 我需要你的帮助来转换 ffmpeg 的选项以尽可能平滑地升级。提前致谢！

# prolog - gprolog差异列表与重复

> ID：14445853
> 
> 赞同：0
> 
> 时间：2013-01-21T19:32:06.043
> 
> 标签：prolog

我必须得到两个整数列表（两个纵坐标）之间的列表差异。我把这个白了：

```
difference(L,[],L) :- !.
difference([],_,[]) :- !.
difference([],[],W). 
difference([H|T1],[D|T2],T3) :- difference(T1,[D|T2],[H|T3]).
difference([H|T1],[H|T2],T3) :- difference(T1,T2,T3). 
```

但为什么我不能得到我的清单差异？如果我写这个：

```
difference([],[],W):- write(X). 
```

这个例子：

```
| ?- difference([1,4,4],[1,4],R).    
[4|_27] 
```

它是正确的！注意，如果我有重复的号码，我必须出示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:40:54.367

我觉得你的代码很奇怪。例如，您的第三个子句：what's `W`for？好像你的意思是：

```
difference([],[],_). 
```

第二个问题：在第四个子句中，没有什么可以阻止 H 和 D 成为具有相同绑定的自变量。我怀疑你的意思是这样的：

```
difference([H|T1],[D|T2],T3) :- H \= D, difference(T1,[D|T2],[H|T3]). 
```

修复这些东西似乎可以修复谓词以给出一个合理的答案：

```
| ?- difference([1,4,4], [1,4], R).
R = [4] 
```

我认为您的前几个条款试图处理不同类型的基本情况，对吗？例如：

```
difference(L, [], L)   % handles the case where the second list is exhausted
difference([], _, [])  % handles the case where the first list is exhausted
difference([], [], W)  % handles the case where the lists are exhausted at the same time 
```

这样做的一个问题是 L = [] 是一个合法的绑定，所以第一个和第三个子句的意思是一样的。您可能可以安全地删除第三个，因为它会在第一个上匹配并产生相同的答案。第二个子句更有趣，因为它似乎在说不管我们到目前为止做了什么工作，如果第一个列表为空，则结果为空。我觉得这种可能性有点不和谐——你真的可能想要这两种基本情况吗？：

```
difference([], L, L).
difference(L, [], L). 
```

我仍然不相信，但是在我更好地了解您要完成的工作之前，我可能无法提供更多帮助。例如，应该发生`difference([1, 4], [1, 4, 4], R)`什么？我假设你可能想要`R = [4]`，但你的代码会产生`R = []`。

另外，我觉得不太可能

```
difference([],[],W):- write(X). 
```

这将是一个有用的调试策略，因为 Prolog 将为 X 生成一个新的变量绑定，因为它没有任何东西可以引用。

我所有更改的最终版本如下所示：

```
difference(L, [], L) :- !.
difference([], L, L) :- !.
difference([H|T1], [D|T2], T3) :- D \= H, difference(T1, [D|T2], [H|T3]).
difference([H|T1], [H|T2], T3) :- difference(T1, T2, T3). 
```

**编辑**：这是否满足您的要求？

```
not_in1(X, Left, Right) :- member(X, Left), \+ member(X, Right).

not_in(X, Left, Right) :- not_in1(X, Left, Right).
not_in(X, Left, Right) :- not_in1(X, Right, Left).

differences(Left, Right, Differences) :-
    findall(X, not_in(X, Left, Right), Differences).

?- differences([1,2,3,4], [1,3,5], X).
X = [2,4,5] 
```

如果是这样，我会尝试让您的原始代码生成匹配的答案。

**编辑2**：好的，所以上面解决方案的问题是它是O（N ^ 2）。在最坏的情况下（两个完全不同的列表），它将不得不将列表 1 中的每个项目与列表 2 中的每个项目进行比较。它没有利用两个列表都是有序的这一事实（我相信这就是你所说的“纵坐标”）。

结果看起来更像您的原始代码，但您的原始代码没有利用项目已订购这一事实。这就是为什么第四和第五种情况看起来令人困惑的原因：您应该根据哪个数字更大来递归列表中的一个或另一个。更正后的代码如下所示：

```
differences([], Result, Result).
differences(Result, [], Result).
differences([H|Ls], [H|Rs], Result) :- differences(Ls, Rs, Result).
differences([L|Ls], [R|Rs], [L|Result]) :-
    L < R,
    differences(Ls, [R|Rs], Result).
differences([L|Ls], [R|Rs], [R|Result]) :-
    L > R,
    differences([L|Ls], Rs, Result). 
```

您可以看到这产生与 O(N^2) 方法相同的结果：

```
?- differences([1,2,3,4], [1,3,5], X).
X = [2,4,5] 
```

你是对的，你确实需要两种基本情况。这样任何一个列表的其余部分都将成为结果的一部分。大概这些将是最大值（`[5]`在示例中）。

现在我有三个归纳案例：一个 for `<`，一个 for`>`和一个 for `=`。相等的情况很直观：在两个列表上重复，丢弃两个列表的头部。下一种情况基本上是说如果左头小于右头，则将其添加到结果中并在左尾重复出现。在这种情况下，权利不变。另一个案例是这个案例的镜子。

希望这可以帮助！

# user-interface - 为 Google Apps 脚本中的图表设置“刷新间隔”

> ID：14445857
> 
> 赞同：0
> 
> 时间：2013-01-21T19:32:15.283
> 
> 标签：user-interface, web-applications, charts, google-apps-script

我是数学老师，不是程序员，所以你必须原谅我在这里的无知......

我一直在寻找一种方法来在一个用**Google Apps 脚本**编写的网络应用程序中设置图表选项，`doGet()`而无需应用程序用户的任何操作。我找到了可视化语言的文档，但没有找到图表。这是我认为应该起作用的（但不是）。

```
var Correct = Charts.newPieChart().setOption("refreshInterval", 1)
    .setDataTable(dataTable3)
    .setTitle("% Correct").setDimensions(400, 300).set3D()
    .build(); 
```

我的应用程序可以很好地返回图表，但是当我更新引用的电子表格上的数据时，它只会在我手动刷新图表所在的页面时更新图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:19:19.327

您可以在计时器上重建整个图表...

```
function doGet() {
  // Build chart
  // Add timer
  app.addTimer(app.createServerHandler("refresh") , 3000);  // 3 secs
}

function refresh(e) {
  // Clear panel that contains chart
  panel.clear();
  // Re-build chart
  // Add timer again 
  app.addTimer(app.createServerHandler("refresh") , 3000);
} 
```

[它与我一直在寻找的工作](https://stackoverflow.com/questions/13995827/chart-and-dashboard-data-refresh-in-ui-apps)表内的图表刷新方式不完全相同，但是没有手动页面刷新。

# php - 从 PHP 获取时间戳

> ID：14445858
> 
> 赞同：2
> 
> 时间：2013-01-21T19:32:20.897
> 
> 标签：php

我正在尝试获取 php 中的时间戳。使用以下代码

```
$date = new DateTime();
        echo $date->getTimestamp(); 
```

`getTimestamp() is undefined`然而根据这个 错误来了

> [http://php.net/manual/en/datetime.gettimestamp.php](http://php.net/manual/en/datetime.gettimestamp.php)

我需要像 123456789 这样的格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:34:38.773

注意`PHP 5 >= 5.3.0`文档页面上的。我只能假设您使用的是 5.3 之前的版本，因此：

```
echo time(); //output: 1358796864 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:34:03.687

确保您运行的是 PHP 5.3 或更新版本。它不适用于 PHP 5.2 或更早版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:35:05.183

也许这会有所帮助： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# html - 一个div的高度因未知原因移动另一个div？

> ID：14445861
> 
> 赞同：3
> 
> 时间：2013-01-21T19:32:31.320
> 
> 标签：html, css, css-float

我似乎无法弄清楚这一点。我在[http://www.codeisdna.com](http://www.codeisdna.com)设置了我的 Web 开发组合。该网站已完成 70%。我有一个问题。如果您单击其中一个项目，则会展开一个 div 以显示完整的内容（左侧是描述，右侧是 Macbook 屏幕形式的预览）。Macbook 在其他一些选项卡上移动。当描述框与文本有一定高度时，就会发生这种情况。谁能帮助我找到解决方案？我似乎已经尝试了一切。我知道代码有些草率，很快就会清理干净。html代码：

```
<div id="project_2" class="project_full psc">
    <div class="wrapper">
        <div class="proj_title">
            <h3>
                Striking Code
                <a class="proj_link" href="#">Visit Site</a>
            </h3>
        </div>
        <div class="proj_details">
            <div class="requirements">
                <p>I felt that it was time to take my old portfolio (and internet identity) and reinvent it into something more clean -- something that more accurately represented my views on development today.</p>
            </div>
            <div class="overview">
                <p>I cleaned up the design (or, well, built a new one), created a new identity, and launched what's now known as code is dna.</p>
            </div>
            <div class="services">
                <ul>
                    <li>UI / UX Design</li>
                    <li>Web Development</li>
                </ul>
            </div>
        </div>
        <div class="proj_preview pull_left">
            <a class="proj_enlarge" id="single_1" href="img.jpg">Click to See More</a>
        </div>
    </div>
</div> 
```

CSS（.proj_preview 是 Mac，.proj_details 是描述）：

```
.project_full {display: none; margin-top: 20px; width: 100%; max-height: 450px; padding: 20px 0px; text-align: center; background: url(../img/code.jpg) top center no-repeat fixed #293134; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); color: #fff; overflow: hidden;}
.project_full .proj_title {width: 390px;}
.project_full .proj_title h3 {font: 32px/40px 'Open Sans', Helvetica, Arial, Verdana, clean, sans-serif; font-weight: bold; margin-top: 20px; margin-bottom: 20px; display: inline-block; padding: 5px 10px; background: url(../img/project_expanded_content_bg.png) repeat;}
.project_full .proj_title a.proj_link {display: inline-block; width: 27px; line-height: 40px; text-indent: -9999px; margin-left: 10px; background: url(../img/project_link.png) 2px 10px no-repeat;}
.project_full .proj_details {width: 370px; padding: 10px; min-height: 250px; background: url(../img/project_expanded_content_bg.png) repeat; margin-bottom: 20px;}
.project_full .proj_details .requirements {font: 16px/22px 'Open Sans', Helvetica, Arial, Verdana, clean, sans-serif; font-weight: bold; margin-top: 15px;}
.project_full .proj_details .overview {margin-top: 20px; font: 14px/22px 'Open Sans', Helvetica, Arial, Verdana, clean, sans-serif;}
.project_full .proj_details .services {margin-top: 25px; font: 12px/18px 'Open Sans', Helvetica, Arial, Verdana, clean, sans-serif;}
.project_full .proj_details .services ul li {list-style-type: none; display: inline-block; letter-spacing: 0px; margin-right: 10px; background: #181818; padding: 3px 10px; border-radius: 100px; cursor: pointer;}
.project_full .proj_details .services ul li:hover {background: #499dcf;}
.project_full .proj_preview {width: 773px; height: 500px; position: relative; right: -420px; bottom: 370px;}
.project_full .proj_preview a.proj_enlarge {display: block; width: 100%; height: 100%; text-indent: -9999px; background: url(../img/project_enlarge.png) 45% 40% no-repeat;}
.project_full .proj_preview a.proj_enlarge:hover {background: url(../img/project_enlarge_hover.png) 45% 40% no-repeat;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:27:18.210

按如下方式更改您的 CSS（删除注释掉的内容，然后添加其余部分）：

```
.project_full .wrapper {
    position: relative;
}
.project_full .prof_preview {
    /* position: relative; */
    /* right: -420px; */
    /* bottom: 370px; */
    position: absolute;
    left: 420px;
    top: 0; /* adjust to your liking */
} 
```

有关 CSS 盒模型的重要参考，请参阅[这篇经典的 BrainJar 文章](http://www.brainjar.com/css/positioning/default.asp)。在 CSS 中与定位和浮动搏斗可能很糟糕（我有生动而可怕的回忆），但一旦你*明白*了，它就是小菜一碟。

# jquery - 计算绝对 div 的高度 (JQuery)

> ID：14445864
> 
> 赞同：3
> 
> 时间：2013-01-21T19:32:41.537
> 
> 标签：jquery, height

我正在使用这个脚本[http://benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/](http://benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/)来尝试为网站建立一个画廊。

我在另一个 div 中渲染“块”div，它的位置是相对的（我们称之为“块持有者”）。问题是我不能让“块持有者”环绕这些“块”，因为它们的位置设置为绝对。我唯一的选择是用 JS 计算最高列的高度并将其传输到 CSS 类。

你知道怎么做吗？

# regex - 如何使用正则表达式 cs6 在 img 标签后添加

> ID：14445865
> 
> 赞同：0
> 
> 时间：2013-01-21T19:32:46.227
> 
> 标签：regex, dreamweaver

我有很多页面文件，其中包含图像。我需要`</center>`在每个`IMG`标签之后添加一个。我正在使用dreamweaver cs6，到目前为止我得到了这个正则表达式。

查找`<img [^>]+>`和替换`$&</center>`

但它不起作用。它可以找到并替换`<img>`标签，但没有添加`</center>`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:36:17.173

我不知道这是如何在 Dreamweaver 中完成的，但要保持“找到”值，您应该添加 \1 - 第一个正则表达式，\2 第二个等等

> `\1</center>`

或尝试在 htaccess 中使用 $1，但 \1 是您最好的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:44:53.573

试试这个作为你的正则表达式：

`(<img [^>]+>)`

这作为您的替换字符串：

`$1</center>`

您需要添加圆括号来创建一个捕获组，然后您可以使用`$1`.

**注意：**确保您已将`Search`字段更改为`Source Code`，取消选中`Ignore whitespace`和`Match whole word`复选框并选中对话框`Use regular expression`中的复选框`Find and Replace`。

# ios - 从 iOS 6 工具栏上的按钮关闭地图

> ID：14445881
> 
> 赞同：0
> 
> 时间：2013-01-21T19:34:11.097
> 
> 标签：ios, objective-c, xcode, button, maps

我有一个应用程序，如果我按下一个按钮，我将转到地图，我能够做到这一点，在我的地图视图中，我有一个工具栏，它有一个“返回”按钮，它应该让我回到上一个视图，但是我在执行此操作时遇到了困难，因为我似乎找不到合适的功能来执行此操作，或者我错过了，这是我第一次为 iOS 应用程序使用地图和多个视图。有人可以帮我怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:35:06.680

您只想关闭视图控制器。

如果您以模态方式呈现地图，请让后退按钮调用执行以下操作的方法：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# sql - 将 dd/mm/yy 字符串转换为 yyyy-mm-dd

> ID：14445882
> 
> 赞同：1
> 
> 时间：2013-01-21T19:34:13.223
> 
> 标签：sql, sql-server

我在将`dd/mm/yy hh:mi:ss`格式字符串转换为`yyyy-mm-dd hh:mi:ss`格式时遇到问题。

我尝试使用`CONVERT()`如下：

```
select CONVERT(VARCHAR, '11/10/11 10:56:58', 120) 
```

但这没有任何变化：

```
11/10/11 10:56:58 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:42:44.053

您需要先转换为日期时间以更改字符串以反映某种区域格式。确保您也正确解释了日期时间值；在某些系统上是 10 月 11 日，在其他系统上是 11 月 10 日。

```
SELECT CONVERT(CHAR(19), CONVERT(DATETIME, '11/10/11 10:56:58', 3), 120); 
```

`char`最后，在您的or`varchar`声明中使用正确数量的字符。不指定长度是懒惰的，可能会导致问题。看：

*   [要踢的坏习惯：在没有（长度）的情况下声明 VARCHAR](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T19:42:36.433

这将起作用：

```
SELECT CONVERT(VARCHAR(19),CONVERT(DATETIME,'11/10/11 10:56:58',3),120) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:40:26.640

问题：您正在将 VARCHAR 转换为 VARCHAR。

如果您使用 DATETIME，则您的查询很好。

```
SELECT CONVERT(VARCHAR(19), CAST('11/10/11 10:56:58' AS DATETIME), 120); 
```

见[小提琴](http://sqlfiddle.com/#!3/6f5e6/3)。

# sql-server - 什么是回写？

> ID：14445886
> 
> 赞同：2
> 
> 时间：2013-01-21T19:34:40.770
> 
> 标签：sql-server, ssas, olap, xmla

当我在 SSMS 中处理多维数据集并将脚本写入 XMLA 时，我注意到以下元素：

```
<WriteBackTableCreation>UseExisting</WriteBackTableCreation> 
```

什么是写回表创建功能，这对 SSAS 意味着什么`UseExisting`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:22:51.867

[写回表创建元素 (XMLA)](http://msdn.microsoft.com/en-us/library/ms187172.aspx)：

> 确定是否在 Process 操作期间创建回写表...
> 
> **UseExisting**使用现有的写回表（如果已经存在）。如果不存在，则会发生错误。

同样关于[指定处理选项](http://msdn.microsoft.com/en-us/library/ms175594.aspx)：

> **写回表选项** 如果在 Analysis Services 项目中启用了写回，则此设置定义如何处理写回...。

有关更多详细信息，请参阅[使用 Analysis Services 写回启用和保护数据输入](http://msdn.microsoft.com/en-us/library/gg567303.aspx)：

> 为什么要将数据写回 Analysis Services 而不是提供原始数据的关系数据库？一个原因是延迟。当您将数据写回关系数据库时，用户必须等到处理完多维数据集后，才能在他们的报告中获得最新数据。但是，当您启用写回时，用户可以在当前会话中将数据直接提交到多维数据集，从而使其对 Analysis Services 数据库的其他用户立即可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:21:12.060

查看这篇博文，描述回写以及它创建表（或使用现有表）的原因：

[http://bimatters1403.wordpress.com/2008/02/05/ssas-2008-molap-writeback/](http://bimatters1403.wordpress.com/2008/02/05/ssas-2008-molap-writeback/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-06T13:27:47.103

也看看这篇博文。这是一个很好的教程（一步一步）来理解写回立方体过程： http: [//www.bibabos.com/microsoft-bi/microsoft-writeback-cube-simple-approving-concept/](http://www.bibabos.com/microsoft-bi/microsoft-writeback-cube-simple-approving-concept/)

# javascript - 在 IE10 中将占位符保持在焦点上

> ID：14445891
> 
> 赞同：66
> 
> 时间：2013-01-21T19:34:58.413
> 
> 标签：javascript, jquery, internet-explorer-10, placeholder

在 WebKit 和 Firefox 下， ' 中的文本会`input`一直存在——它不会消失，直到它里面确实有东西。`placeholder``focus``input.val`

有没有强制IE10做同样事情的好方法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-22T02:20:00.337

[来自Internet Explorer 开发人员中心](http://msdn.microsoft.com/en-us/ie/)的[:-ms-input-placeholder 伪类](https://developer.mozilla.org/en-US/docs/Web/CSS/:-ms-input-placeholder)文档似乎暗示这是按设计工作的。

> 占位符文本以指定的样式显示，直到该字段具有焦点，这意味着可以键入该字段。当该字段具有焦点时，它会恢复为输入字段的正常样式，并且占位符文本会消失。

**编辑：**如果我不得不模仿这种行为，我会查看适用于旧版本 IE 的占位符 polyfill 库（设置默认值、在输入框上浮动灰色文本等）。它们必须进行修改，因为它们可能具有检测占位符功能并遵从浏览器的功能。此外，这会产生“浏览器检测”代码气味。

**更新：**在 2014 年 6 月 19 日的 Twitter [#AskIE](https://twitter.com/hashtag/AskIE)问题会议期间提出 了[“IE 占位符文本消失”问题，](https://twitter.com/hakanson/status/479697588908613632) [@IEDevChat](https://twitter.com/IEDevChat)[回复](https://twitter.com/IEDevChat/status/479699046215319552)“我们对此行为有一个活跃的错误。下一个版本将提供修复”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-20T04:10:13.647

IE 开发人员在Twitter [IEDevChat上的](https://twitter.com/IEDevChat)[AskIE](https://twitter.com/hashtag/AskIE?src=hash)会话期间回应说，这是 IE BugList 中的一个[已知错误](https://twitter.com/deltakosh/status/479698349906333696)，他们将在未来的版本中修复。

更新：- 不幸的是，IE11 中的占位符行为仍然相同，但似乎在 Edge/Spartan 版本中有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-07T16:36:38.080

在 IE 10+ 中没有让占位符保持字段焦点的好方法，但是如果您尝试用占位符替换标签，那么您应该看看这个。

[http://mozmonkey.com/2014/02/css-only-placeholders-field-labels-ie-float-labels/](http://mozmonkey.com/2014/02/css-only-placeholders-field-labels-i-e-float-labels/)

这是结合占位符和标签来改善用户体验的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-18T19:00:40.420

我想我会分享我用来解决这个问题的解决方法，因为 IE11 似乎仍然没有修复。

在我的示例中 - IE11 已将我的占位符值添加为文本区域中的实际值。

这是我在模板视图中的内容：

```
<textarea placeholder="Type your message">
</textarea> 
```

以下是 IE11 前端呈现的内容：

```
<textarea placeholder="Type your message">
    Type your message
</textarea> 
```

因此，当用户专注于该字段时 - 他们的光标位于“..message here”字符串的末尾 - 奇怪！

我的解决方法是在加载时向元素添加一个初始类。然后是一个基本的“焦点”绑定事件，以检查该类是否存在——如果存在，它会删除 val 然后也删除该类。因此，只要用户关注该字段 - 该值就会重置为空字符串。

这是绑定事件（这个特定示例是在动态加载的模式上 - 您可以简化它）：

```
$(document).on( "focus", '.textarea', function () {
    if ($(this).hasClass('placeholder-val-present')) {
        $(this).val("").removeClass('placeholder-val-present');
    }
}); 
```

这很好用，因为当用户跳出字段时 - 重新添加占位符并且它可以正常工作，正如您在 IE11 和所有其他浏览器中所期望的那样。

我敢肯定这是一个非常小众的例子——但它可能对其他人有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-21T15:01:39.603

诀窍是在输入元素上同时调用 focus() 和 select() 。

```
$("#elementId" ).focus();
$("#elementId" ).select(); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-08-09T11:31:30.633

最好的解决方案！在所有浏览器中工作

[http://jsfiddle.net/q05ngura/3/](http://jsfiddle.net/q05ngura/3/)

```
document.onkeydown =  function(e) {
	if(!e)e=event;
	var checkVal = Number(this.value.length);
	if((e.keyCode < 112 || e.keyCode > 123) &&  // F1 - F12
	   e.keyCode != 9 &&  // Tab
	   e.keyCode != 20 && // Caps lock
	   e.keyCode != 16 && // Shift
	   e.keyCode != 17 && // Ctrl
	   e.keyCode != 18 && // alt
	   e.keyCode != 91 && // Left window key
	   e.keyCode != 92 && // Right window key
	   e.keyCode != 27 && // Esc
	   e.keyCode != 37 && // Left arrow
	   e.keyCode != 38 && // Up arrow
	   e.keyCode != 39 && // Right arrow
	   e.keyCode != 40 && // Down arrow
	   e.keyCode != 13 && // Enter
	   e.keyCode != 45){ // Insert

	   checkVal = Number(this.value.length) + 1;
	   }

	if(e.keyCode == '8'||e.keyCode == '46'){// backspace || delete
	checkVal = Number(this.value.length) - 1;
	}
	if(checkVal > 0){
		this.parentNode.getElementsByTagName('label')[0].style.zIndex = '-1';
	}else{
		this.parentNode.getElementsByTagName('label')[0].style.zIndex = '0';
	}
});
```

```
body{
    padding:0;
	margin:0;
    background-color:#ccc;
}
}
::-ms-reveal {
    display: none;
}
input::-ms-clear {
    display: none;
}
label{
	position: absolute;
    right: 60px;
	margin-top: 10px;
    font-size: 13px;
    font-family: sans-serif;
    color: #A9A9A9;
    z-index:0;
	pointer-events: none;
}
@media screen and (-webkit-min-device-pixel-ratio:0) { 
label{
	margin-top: -25px;
	right: 57px;
}
}
@-moz-document url-prefix() {
    label{
	right: 69px;
}
}

#login-box{
	position:relative;
	margin:0 auto;
	top:100px;
	background-color:#fff;
	width:270px;
	height:270px;
	border-radius:40px;
}

#login{
	position:relative;
	margin:0 auto;
	text-align:center;
	top:70px;
}
#login input[type="text"],#login input[type="password"]{
	border:none;
	border-bottom:1px solid #CCC;
	padding:9px;
	direction:rtl;
}

*:focus{
	outline:none;
}
```

```
<div id="login-box">
            <div id="login">
                    <table align="center" cellpadding="0">
                        <tr>
                            <td>
                                <input type="text" autocomplete="off" name="username" />
                                <label for="username">שם משתמש</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="password" name="password" />
                                <label for="password">סיסמא</label>
                            </td>
                        </tr>
                    </table>
            </div><!-- end login -->
        </div><!-- end login box -->
```

* * *

## 回答 #7

> 赞同：-13
> 
> 时间：2013-01-21T20:25:27.453

我用 Google 搜索了一下，发现有一些 CSS 伪元素和伪类可用于设置占位符的样式。

```
input:-ms-input-placeholder:focus{
    color: #999;
} 
```

有关更多信息，请参阅此答案：[https ://stackoverflow.com/a/2610741](https://stackoverflow.com/a/2610741)

# objective-c - 我们可以在objective-c中使用变量类名来声明变量吗？

> ID：14445895
> 
> 赞同：1
> 
> 时间：2013-01-21T19:35:04.763
> 
> 标签：objective-c, xcode4.5

就像是

```
Class tableViewCellClass = BGUIBusinessCellForDisplay.class;
tableViewCellClass * cell = (tableViewCellClass *)tableView.visibleCells[0]; 
```

这会导致编译错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:43:50.010

你不能使用类变量来输入它——因为它是一个对象，而不是一个类型。但是，您可以键入它`id`。例如

```
Class myClassVar = self.class;
id newInstance = [[myClassVar alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:44:19.580

Typedef 尽可能接近：

```
typedef BGUIBusinessCellForDisplay tableViewCellClass; 
```

这在某种程度上可以让您做您想做的事，但我的总体问题是您要完成什么？

# javascript - 在 Javascript 中的循环上创建嵌套数组

> ID：14445898
> 
> 赞同：0
> 
> 时间：2013-01-21T19:35:25.417
> 
> 标签：javascript, arrays, for-loop

当我处理数据时，我通常需要创建 `Arrays`或`Objects`循环，比方说“即时”。

例如，我想通过数组键之一重新排列对元素进行分组的数组：我使用的方法之一是循环遍历`for in`. 但问题是当我动态定义多个索引时。

```
for(key in array){
   newArray[array[key]['gouping_key']] = array[key];
} 
```

这个例子工作得很好。但是，如果您有多个具有相同 的元素，则`grouping_key`此代码将覆盖您之前的元素。

所以，我试试这个：

```
var i = 0;
for(key in array){
   newArray[array[key]['gouping_key']][i] = array[key];
   i++
} 
```

但是当我添加第二个索引时，解释器抱怨说`newArray[array[key]['gouping_key']]`is `undefined`。在前面的示例中似乎没有问题。

这是为什么？

我已经用一个例子做了[这个小提琴](http://jsfiddle.net/CmU2h/)，以防前面的片段解释不充分和不清楚。在小提琴中，您有三个片段（两个已注释掉）。

第一个是我在尝试类似我之前提到的内容时遇到的错误。第二个是我使用的解决方案。第三个例子是动态创建一个只有一个索引的数组。

总结一下，我想知道为什么，当你添加第二个索引时，你会得到那个错误。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:40:09.837

```
var i = 0;
for(key in array){

   // If nested object doesn't exist, make an empty one.
   newArray[array[key]['gouping_key']][i] =
     newArray[array[key]['gouping_key']][i] || [];

   newArray[array[key]['gouping_key']][i] = array[key];
   i++
} 
```

您需要创建一个要推送的数组，它不是为您创建的。您可以使用`||`运算符仅创建一个空数组，如果它是`undefined`.

此外，还有很多嵌套要遵循......如果我可以......

```
var x, y;
y = 0;
for(key in array){
   x = array[key].gouping_key;
   newArray[x][y] = newArray[x][y] || []
   newArray[x][y] = array[key];
   y++
} 
```

看看这有多少可读性？它也更快！您不必一遍又一遍地深入遍历复杂的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:43:15.767

首先将 for in 用于数组不是一个好主意，我认为它不是您所期望的。见：[https](https://stackoverflow.com/a/4261096/1924298) ://stackoverflow.com/a/4261096/1924298 。使用简单的 for 循环（或 while）应该可以解决您的问题。

# migration - Joomla Migration 1.5 => 2.5：项目分隔符

> ID：14445899
> 
> 赞同：0
> 
> 时间：2013-01-21T19:35:30.333
> 
> 标签：migration, joomla2.5

我刚刚将一个 joomla 1.5 站点迁移到 2.5 我遇到的最后一个问题与 item-separator 相关：它是一个显示类别博客的菜单项

在 V1.5 中，我得到： ![在此处输入图像描述](../Images/16f77eda3c3c4590f8b6dde1de0ee0da.png)

现在在 2.5 我得到： ![在此处输入图像描述](../Images/c9fed8b1e922956e0bb889af30649320.png)

项目分隔符应该分隔项目 - 而不是他直接在项目的标题下。

有没有 CSS 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T11:53:44.073

我遇到了同样的问题，通过在我的样式表中使用它来解决它：

```
.item-separator {display:block; clear:both; height:20px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:50:03.850

我使用 CSS 代码来分隔模板中的文章。可能需要使用一些浮动标签让它在图片周围浮动。

```
div.item-separator {
  border-bottom: 1px solid #b10042;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-24T23:29:24.817

终于正确回答了。我正在使用 jommla 2.5，这个错误就在那里！！解决了覆盖模板中我的 .css 文件中的核心 joomla 的问题。

# javascript - 在AngularJS中更改范围时如何重新应用指令

> ID：14445901
> 
> 赞同：4
> 
> 时间：2013-01-21T19:35:35.927
> 
> 标签：javascript, angularjs, directive

假设你有这样的事情：

```
<div mydirective>
  {{boundtoscope}}
</div> 
```

并且您希望 mydirective 应用于 $scope.boundtoscope 的更改。你如何指导 Angular 重新应用指令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T20:28:35.137

在指令的链接函数 $watch 中，范围属性：

```
myApp.directive('mydirective', function () {
  return {
    link: function (scope, element, attrs) {
      scope.$watch('boundtoscope', function(newValue) {
          alert('boundtoscope changed');
          // do something here
      });
    }
  }
}); 
```

如果`boundtoscope`是数组或对象映射，并且您想查找数组/对象中项目的更改，请将[objectEquality 参数](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)设置`true`为执行“浅”监视（即，比较数组/对象的相等性而不是参考):

```
 scope.$watch('boundtoscope', function(newValue) {
      alert('boundtoscope changed')
  }, true);    // "shallow" compare 
```

Angular 1.2 为此添加了一个新方法[$watchCollection](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watchCollection)：

```
 scope.$watchCollection('boundtoscope', function(newValue) {
      alert('boundtoscope changed')
  });  // also does a "shallow" compare 
```

# wordpress-theming - 同时添加自定义图像字段和其他字段

> ID：14445904
> 
> 赞同：5
> 
> 时间：2013-01-21T19:35:53.877
> 
> 标签：wordpress-theming, wordpress

我基本上想要一个自定义的 CMS 页面，其中包含成对的图像和标签，这些图像在其中定义。我打算使用这些项目对在我的新 WordPress 主题的自定义页面上填充内容。

我已经设法在 CMS 中创建了一个新的设置页面，并在其中填充了任意数量的文本框，这要归功于[**处理 WordPress 2.8 中的插件选项和`register_setting()`**](https://web.archive.org/web/20130919144317/http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/).

我现在需要为每个文本框添加字段，让用户打开媒体浏览器，然后选择上传到 WordPress 的现有图像或上传新图像以供选择。

我无法在网上找到任何简单的干净示例。即使是我发现的 Stack Overflow 上与此相关的问题似乎也没有一个明确的优雅示例。

仅作记录；我最初计划使用我已经安装的插件（[开发人员自定义字段](https://wordpress.org/plugins/developers-custom-fields/)）来执行此操作，我认为使用此插件添加自定义图像字段会非常容易，因为使用它添加文本框非常简单。但是我似乎错了，没有明确的例子来指定这种字段。

如果您知道任何说明添加自定义图像字段（与同时添加其他字段无关）的示例，可以使用本机 WordPress API 代码或与开发人员自定义字段插件集成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T05:58:54.250

您没有完全提及它，但似乎您正在处理**Repeatable Fields**。

两个感兴趣的插件：[高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)和[自定义内容类型管理器](http://wordpress.org/extend/plugins/custom-content-type-manager/)。

今天，我[在 G+ 的一个 WordPress 社区中](https://plus.google.com/u/0/communities/101504763068635549461)看到了这篇文章：
[*在插件中使用 WordPress 3.5 媒体上传器*](http://mikejolley.com/2012/12/using-the-new-wordpress-3-5-media-uploader-in-plugins/)。

该解决方案最初发布在此处的 SO Question 中，此后已被删除。它被重写、修改和测试：

```
<?php
/**
 * Plugin Name: (SO) Repeatable fields demo
 * Plugin URI:  http://stackoverflow.com/a/14452453/1287812
 * Description: How to make repeatable fields in a meta box
 * Author:      brasofilo
 * License:     GPLv3
 */

add_action( 'admin_init', 'add_post_gallery_so_14445904' );
add_action( 'admin_head-post.php', 'print_scripts_so_14445904' );
add_action( 'admin_head-post-new.php', 'print_scripts_so_14445904' );
add_action( 'save_post', 'update_post_gallery_so_14445904', 10, 2 );

/**
 * Add custom Meta Box to Posts post type
 */
function add_post_gallery_so_14445904() 
{
    add_meta_box(
        'post_gallery',
        'Custom Uploader',
        'post_gallery_options_so_14445904',
        'post',
        'normal',
        'core'
    );
}

/**
 * Print the Meta Box content
 */
function post_gallery_options_so_14445904() 
{
    global $post;
    $gallery_data = get_post_meta( $post->ID, 'gallery_data', true );

    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'noncename_so_14445904' );
?>

<div id="dynamic_form">

    <div id="field_wrap">
    <?php 
    if ( isset( $gallery_data['image_url'] ) ) 
    {
        for( $i = 0; $i < count( $gallery_data['image_url'] ); $i++ ) 
        {
        ?>

        <div class="field_row">

          <div class="field_left">
            <div class="form_field">
              <label>Image URL</label>
              <input type="text"
                     class="meta_image_url"
                     name="gallery[image_url][]"
                     value="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>"
              />
            </div>
            <div class="form_field">
              <label>Description</label>
              <input type="text"
                     class="meta_image_desc"
                     name="gallery[image_desc][]"
                     value="<?php esc_html_e( $gallery_data['image_desc'][$i] ); ?>"
              />
            </div>
          </div>

          <div class="field_right image_wrap">
            <img src="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>" height="48" width="48" />
          </div>

          <div class="field_right">
            <input class="button" type="button" value="Choose File" onclick="add_image(this)" /><br />
            <input class="button" type="button" value="Remove" onclick="remove_field(this)" />
          </div>

          <div class="clear" /></div> 
        </div>
        <?php
        } // endif
    } // endforeach
    ?>
    </div>

    <div style="display:none" id="master-row">
    <div class="field_row">
        <div class="field_left">
            <div class="form_field">
                <label>Image URL</label>
                <input class="meta_image_url" value="" type="text" name="gallery[image_url][]" />
            </div>
            <div class="form_field">
                <label>Image Link</label>
                <input class="meta_image_desc" value="" type="text" name="gallery[image_desc][]" />
            </div>
        </div>
        <div class="field_right image_wrap">
        </div> 
        <div class="field_right"> 
            <input type="button" class="button" value="Choose File" onclick="add_image(this)" />
            <br />
            <input class="button" type="button" value="Remove" onclick="remove_field(this)" /> 
        </div>
        <div class="clear"></div>
    </div>
    </div>

    <div id="add_field_row">
      <input class="button" type="button" value="Add Field" onclick="add_field_row();" />
    </div>

</div>

  <?php
}

/**
 * Print styles and scripts
 */
function print_scripts_so_14445904()
{
    // Check for correct post_type
    global $post;
    if( 'post' != $post->post_type )
        return;
    ?>  
    <style type="text/css">
      .field_left {
        float:left;
      }

      .field_right {
        float:left;
        margin-left:10px;
      }

      .clear {
        clear:both;
      }

      #dynamic_form {
        width:580px;
      }

      #dynamic_form input[type=text] {
        width:300px;
      }

      #dynamic_form .field_row {
        border:1px solid #999;
        margin-bottom:10px;
        padding:10px;
      }

      #dynamic_form label {
        padding:0 6px;
      }
    </style>

    <script type="text/javascript">
        function add_image(obj) {
            var parent=jQuery(obj).parent().parent('div.field_row');
            var inputField = jQuery(parent).find("input.meta_image_url");

            tb_show('', 'media-upload.php?TB_iframe=true');

            window.send_to_editor = function(html) {
                var url = jQuery(html).find('img').attr('src');
                inputField.val(url);
                jQuery(parent)
                .find("div.image_wrap")
                .html('<img src="'+url+'" height="48" width="48" />');

                // inputField.closest('p').prev('.awdMetaImage').html('<img height=120 width=120 src="'+url+'"/><p>URL: '+ url + '</p>'); 

                tb_remove();
            };

            return false;  
        }

        function remove_field(obj) {
            var parent=jQuery(obj).parent().parent();
            //console.log(parent)
            parent.remove();
        }

        function add_field_row() {
            var row = jQuery('#master-row').html();
            jQuery(row).appendTo('#field_wrap');
        }
    </script>
    <?php
}

/**
 * Save post action, process fields
 */
function update_post_gallery_so_14445904( $post_id, $post_object ) 
{
    // Doing revision, exit earlier **can be removed**
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )  
        return;

    // Doing revision, exit earlier
    if ( 'revision' == $post_object->post_type )
        return;

    // Verify authenticity
    if ( !wp_verify_nonce( $_POST['noncename_so_14445904'], plugin_basename( __FILE__ ) ) )
        return;

    // Correct post type
    if ( 'post' != $_POST['post_type'] ) 
        return;

    if ( $_POST['gallery'] ) 
    {
        // Build array for saving post meta
        $gallery_data = array();
        for ($i = 0; $i < count( $_POST['gallery']['image_url'] ); $i++ ) 
        {
            if ( '' != $_POST['gallery']['image_url'][ $i ] ) 
            {
                $gallery_data['image_url'][]  = $_POST['gallery']['image_url'][ $i ];
                $gallery_data['image_desc'][] = $_POST['gallery']['image_desc'][ $i ];
            }
        }

        if ( $gallery_data ) 
            update_post_meta( $post_id, 'gallery_data', $gallery_data );
        else 
            delete_post_meta( $post_id, 'gallery_data' );
    } 
    // Nothing received, all fields are empty, delete option
    else 
    {
        delete_post_meta( $post_id, 'gallery_data' );
    }
} 
```

**结果**：
![可重复上传者](../Images/f549e67326eff34e76e4913ba094eacf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:47:51.903

对于 Wordpress 3.5，新媒体上传器将使用此脚本打开旧的更改脚本。

```
<script type="text/javascript">
    function add_image(obj) {

        var parent=jQuery(obj).parent().parent('div.field_row');
        var inputField = jQuery(parent).find("input.meta_image_url");
        var fileFrame = wp.media.frames.file_frame = wp.media({
            multiple: false
        });
        fileFrame.on('select', function() {
            var url = fileFrame.state().get('selection').first().toJSON();
            inputField.val(url.url);
            jQuery(parent)
            .find("div.image_wrap")
            .html('<img src="'+url.url+'" height="48" width="48" />');
        });
        fileFrame.open();
    //});
    };

    function reomove_field(obj) {
        var parent=jQuery(obj).parent().parent();
        //console.log(parent)
        parent.remove();
    }

    function add_field_row() {
        var row = jQuery('#master-row').html();
        jQuery(row).appendTo('#field_wrap');
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T16:27:17.633

我在上面使用了@ [brasofilo](https://stackoverflow.com/a/14452453/1287812)的答案，但是我真的很怀念保存图像ID，所以我可以使用`wp_get_attachment_image`例如。

所以这是我修改后的代码，它还保存了图像 ID。我还使用两个数组来定义元框出现在哪些页面模板上以及分别在哪些帖子类型上。这是代码：

```
<?php
/**
 * Plugin Name: Repeatable image fields
 * Plugin URI:  https://stackoverflow.com/a/36456957/4800442
 * Description: Repeatable image fields in a meta box.
 * Author:      brasofilo
 * License:     GPLv3
 */

add_action( 'admin_init', 'add_post_gallery_so_14445904' );
add_action( 'add_meta_boxes_page', 'add_page_gallery_so_14445904' );
add_action( 'admin_head-post.php', 'print_scripts_so_14445904' );
add_action( 'admin_head-post-new.php', 'print_scripts_so_14445904' );
add_action( 'save_post', 'update_post_gallery_so_14445904', 10, 2 );

// Make it work only in selected templates
$rep_fields_templates = array('page-aboutus.php');
$rep_fields_posts     = array('service',
                              'style',
                              'brand');

/**
 * Add custom Meta Box
 */

// Add meta box to custom posts 
function add_post_gallery_so_14445904() 
{
    global $rep_fields_posts;       
    add_meta_box(
        'post_gallery',
        'Slideshow Gallery',
        'post_gallery_options_so_14445904',
        $rep_fields_posts,
        'normal',
        'core'
    );
}

// Add meta box to custom page templates
function add_page_gallery_so_14445904() 
{       
    global $post, $rep_fields_templates;
    if ( in_array( get_post_meta( $post->ID, '_wp_page_template', true ), $rep_fields_templates ) ) {
        add_meta_box(
            'post_gallery',
            'Slideshow Gallery',
            'post_gallery_options_so_14445904',
            'page',
            'normal',
            'core'
        );
    }
}

/**
 * Print the Meta Box content
 */
function post_gallery_options_so_14445904() 
{
    global $post;
    $gallery_data = get_post_meta( $post->ID, 'gallery_data', true );

    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'noncename_so_14445904' );
    ?>

    <div id="dynamic_form">

        <div id="field_wrap">
        <?php 
        if ( isset( $gallery_data['image_url'] ) ) 
        {
            for( $i = 0; $i < count( $gallery_data['image_url'] ); $i++ ) 
            {
            ?>

            <div class="field_row">

              <div class="field_left">
                <div class="form_field">
                  <!--<label>Image URL</label>-->
                  <input type="hidden"
                         class="meta_image_url"
                         name="gallery[image_url][]"
                         value="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>"
                  />
                  <input type="hidden"
                         class="meta_image_id"
                         name="gallery[image_id][]"
                         value="<?php esc_html_e( $gallery_data['image_id'][$i] ); ?>"
                  />
                </div>
                <div class="form_field" style="margin-bottom: 20px">
                  <label>Description</label>
                  <textarea
                         class="meta_image_desc"
                         name="gallery[image_desc][]"
                         rows="3"
                         style="width: 100%"><?php esc_html_e( $gallery_data['image_desc'][$i] ); ?></textarea>
                </div>
                <input class="button" type="button" value="Choose File" onclick="add_image(this)" />&nbsp;&nbsp;&nbsp;
                <input class="button" type="button" value="Remove" onclick="remove_field(this)" />
              </div>

              <div class="field_right image_wrap">
                <img src="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>" />
              </div>
              <div class="clear" /></div> 
            </div>
            <?php
            } // endif
        } // endforeach
        ?>
        </div>

        <div style="display:none" id="master-row">
        <div class="field_row">
            <div class="field_left">
                <div class="form_field">
                    <!--<label>Image URL</label>-->
                    <input class="meta_image_url" value=""  name="gallery[image_url][]" />
                    <input class="meta_image_id" value=""  name="gallery[image_id][]" />
                </div>
                <div class="form_field" style="margin-bottom: 20px">
                    <label>Description</label>
                    <textarea class="meta_image_desc" name="gallery[image_desc][]" rows="3" style="width: 100%"></textarea>
                </div>
                <input type="button" class="button" value="Choose Image" onclick="add_image(this)" />&nbsp;&nbsp;&nbsp;
                <input class="button" type="button" value="Remove" onclick="remove_field(this)" />
            </div>
            <div class="field_right image_wrap">
            </div>
            <div class="clear"></div>
        </div>
        </div>

        <div id="add_field_row">
          <input class="button" type="button" value="Add Image" onclick="add_field_row();" />
        </div>
        <?php if ( 'trend' == get_post_type( $post->ID ) ) { ?>
        <p style="color: #a00;">Make sure the number if images you add is a <b>multiple of 5</b>.</p>
        <?php } ?>
    </div>
    <?php
}

/**
 * Print styles and scripts
 */
function print_scripts_so_14445904()
{
    // Check for correct post_type
    global $post, $rep_fields_templates, $rep_fields_posts;
    if ( !in_array( get_post_meta( $post->ID, '_wp_page_template', true ), $rep_fields_templates ) && 
         !in_array( get_post_type( $post->ID)                           , $rep_fields_posts ) )
        return;
    ?>  
    <style type="text/css">
      .field_left {
        float:left;
        width: 75%;
        padding-right: 20px;
        box-sizing:border-box;  
      }
      .field_right {
        float:left;
        width: 25%;
      }
      .image_wrap img {
          max-width: 100%;
      }
      #dynamic_form input[type=text] {
        width:100%;
      }
      #dynamic_form .field_row {
        border:1px solid #cecece;
        margin-bottom:10px;
        padding:10px;
      }
      #dynamic_form label {
        display: block;
        margin-bottom: 5px;
      }
    </style>

    <script type="text/javascript">
        function add_image(obj) {

            var parent=jQuery(obj).parent().parent('div.field_row');
            var inputField = jQuery(parent).find("input.meta_image_url");
            var inputFieldID = jQuery(parent).find("input.meta_image_id");
            var fileFrame = wp.media.frames.file_frame = wp.media({
                multiple: false
            });
            fileFrame.on('select', function() {
                var selection = fileFrame.state().get('selection').first().toJSON();
                inputField.val(selection.url);
                inputFieldID.val(selection.id);
                jQuery(parent)
                .find("div.image_wrap")
                .html('<img src="'+selection.url+'" />');
            });
            fileFrame.open();
        //});
        };

        function remove_field(obj) {
            var parent=jQuery(obj).parent().parent();
            parent.remove();
        }

        function add_field_row() {
            var row = jQuery('#master-row').html();
            jQuery(row).appendTo('#field_wrap');
        }
    </script>
    <?php
}

/**
 * Save post action, process fields
 */
function update_post_gallery_so_14445904( $post_id, $post_object ) 
{
    // Doing revision, exit earlier **can be removed**
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )  
        return;

    // Doing revision, exit earlier
    if ( 'revision' == $post_object->post_type )
        return;

    // Verify authenticity
    if ( !wp_verify_nonce( $_POST['noncename_so_14445904'], plugin_basename( __FILE__ ) ) )
        return;

    global $rep_fields_templates, $rep_fields_posts;
    if ( !in_array( get_post_meta( $post_id, '_wp_page_template', true ), $rep_fields_templates ) && 
         !in_array( get_post_type( $post_id)                            , $rep_fields_posts ) ) 
        return;

    if ( $_POST['gallery'] ) 
    {
        // Build array for saving post meta
        $gallery_data = array();
        for ($i = 0; $i < count( $_POST['gallery']['image_url'] ); $i++ ) 
        {
            if ( '' != $_POST['gallery']['image_url'][ $i ] ) 
            {
                $gallery_data['image_url'][]  = $_POST['gallery']['image_url'][ $i ];
                $gallery_data['image_id'][]  = $_POST['gallery']['image_id'][ $i ];
                $gallery_data['image_desc'][] = $_POST['gallery']['image_desc'][ $i ];
            }
        }

        if ( $gallery_data ) 
            update_post_meta( $post_id, 'gallery_data', $gallery_data );
        else 
            delete_post_meta( $post_id, 'gallery_data' );
    } 
    // Nothing received, all fields are empty, delete option
    else 
    {
        delete_post_meta( $post_id, 'gallery_data' );
    }
} 
```

这是一个如何将数据输出到主题的示例。

```
<?php 
if ( '' != get_post_meta( get_the_ID(), 'gallery_data', true ) ) { $gallery = get_post_meta( get_the_ID(), 'gallery_data', true ); }

if ( isset( $gallery['image_id'] ) ) :

    for( $i = 0; $i < count( $gallery['image_id'] ); $i++ ) { 
        if ( '' != $gallery['image_id'][$i] ) {
            echo wp_get_attachment_image( $gallery['image_id'][$i], 'gallery_large' );
            if ( isset($gallery['image_desc'][$i]) ) echo $gallery['image_desc'][$i];
        }   
    }

endif; 
?> 
```

# .htaccess - .htaccess 每次都重定向到单个页面，但出于应用程序原因保留相同的 url

> ID：14445905
> 
> 赞同：0
> 
> 时间：2013-01-21T19:35:54.413
> 
> 标签：.htaccess

我查看了其他堆栈溢出问题，但找不到与我完全相同的问题。

我已经尝试编写几个不同的 .htaccess 重写规则，但我似乎无法让它工作。

我需要执行以下操作：

原始网址：testexample.com/tool/1

需要重定向到：textexample.com/tool/display.php

但是浏览器中的 URL 需要保留：testexample.com/tool/1

任何人都可以为我指出这个重写规则的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:41:52.907

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !display\.php/?  [NC]
RewriteCond %{REQUEST_URI}  ^/([^/]+)/?.*/?  [NC]
RewriteRule .*  %1/display.php     [L] 
```

静默地图

`http://testexample.com/anything/folder`（一直显示在浏览器中）

至

`http://textexample.com/anything/display.php`

# xcode - 复杂的静态库链接

> ID：14445909
> 
> 赞同：3
> 
> 时间：2013-01-21T19:36:23.593
> 
> 标签：xcode, linker, static-libraries

因此，我过去曾多次嵌套静态库，但从来没有像这样嵌套过，这引起了一些问题。

现在让我们假设我有 3 个静态库，A、B 和 C。以及一个使用它们的项目，如下所示。

A 是由常用的自定义视图、数据结构和类别组成的基础库。B 是与 A 链接的库，其中包含在多个项目之间共享的视图控制器。C 是另一个与 A 链接的库，其中包含在多个项目之间共享的视图控制器。

这个特定的项目使用 B 和 C 的代码。所以结构如下所示：

```
 A
  / \
 B   C
  \ /
Project 
```

而且由于 Xcode 链接静态库的方式基本上是合并它们，B 和 C 都具有 A 的所有符号。所以我得到了重复的符号链接器错误。我该如何处理这个问题？我需要弱链接吗？还是我缺少一个特定的标志？我是否需要设置某种类型的依赖关系其他感谢链接二进制文件？

我用谷歌搜索并在这里搜索，发现了很多很好的信息，但没有任何我能够扭曲到这种特殊情况。

**更新的想法**

所以让我问这个问题，因为它似乎是一个可能的解决方案，因为在阅读了能够合并的静态库之后确实不应该这样做。

我应该将它们全部放在一个项目中并且仅具有多个静态库目标，而不是拥有 3 个独立的静态库吗？甚至不使用目标依赖关系，只使用 A、AB 和 AC，以及包含目标文件和标题的 ABC 目标？毫无疑问，这对于构建设置来说会相当复杂，并且可能会使源代码分发变得有点复杂，但它会解决我当前的问题，并且可能是更好的处理方式。怎么想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:33:30.710

看起来您没有正确创建静态库`B`，`C`因为您正在包含来自静态库的目标文件`A`。这是不正确的。取而代之的是 make `A`，`B`并且`C`只包含它们自己的类的目标文件，并将它们全部放在`Project`二进制文件的最终链接中。

*   您必须允许`B`查看`A`的头文件才能正确编译。

*   您必须允许`C`查看`A`的头文件才能正确编译。

*   您必须允许`Project`查看`A`'s、`B`'s 和`C`' 头文件才能正确编译，以及`A`'s、`B`'s 和`C`' 库 ( `.a`) 文件才能正确链接。

我*认为*一旦您正确设置了项目依赖项，Xcode Workspace 将为您处理所有标题/库搜索路径设置，但我可能错了，您可能必须自己设置这些路径。

# django - 上传 Django 应用并正确设置数据库

> ID：14445912
> 
> 赞同：0
> 
> 时间：2013-01-21T19:36:27.160
> 
> 标签：django, git, postgresql, openshift, django-settings

嗨，我想用 git 将我的 django 应用程序上传到 openshift rhc。推送并刷新后显示主页，但是需要用户实例的所有内容都不起作用。

我的错误是：

```
'Ident authentication failed for user "admin"'

...py2.6.egg/django/db/backends/postgresql_psycopg2/base.py in _cursor, line 177 
```

我认为数据库连接不正确：

在我的 settings.py

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'NAME': 'MY_APP_NAME',
    'USER': 'admin',
    'PASSWORD': 'MY_PASSWORD',
    'HOST': '',
    'PORT': '',
} 
```

我没有做manage.py syncdb，我不知道怎么做。也许这就是问题所在，因为没有创建超级用户？

db的路径呢？在我的电脑上，settings.py 看起来有点不同：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': '//home//pachucx//Project//db//sqlite3.db',
    'USER': '',
    'PASSWORD': '',
    'HOST': '',
    'PORT': '',
} 
```

在电脑上一切正常。

不同之处在于，在 NAME 中我使用的是 DB 文件的路径，而在服务器端我只使用它的名称。我应该添加扩展名 .db，还是需要添加我不知道的路径。或者问题可能只通过 manage.py syncdb 就可以解决？如果是这样，请告诉我如何正确执行，例如使用 git

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:49:42.307

这是由于您尝试访问未创建的数据库或您的设置文件中的用户名和密码凭据无效而发生的错误。

1.  确保正确配置所有设置。- 检查您的`host`, db`username`以及- 它可能与您本地的盒子不同`password`。`port`

2.  为了同步数据库，您需要在 SSH 中导航到项目根目录并找到该`manage.py`文件。完成后，运行以下命令：

    python manage.py syncdb

这将：

1.  创建所有表，
2.  给您一个令人讨厌的错误，说您的数据库设置不正确，这是一个很大的错误，因为您知道您需要再次查看设置并纠正问题。

要测试您的服务器是否可以启动，请再次在 SSH 中运行以下命令

```
python manage.py runserver 
```

1.  如果成功，这将为您提供一个本地测试环境，并且应该吐出一个 url 进行测试。应该是`localhost:8000`或类似的东西。
2.  如果失败，这将让您知道您的模型是否配置不正确，主要是您的设置或 url 文件，它会给出错误，因此您可以仔细检查一切是否正常。

至于在网络外的机器上使用机器上的数据库，我建议不要这样做。去你的盒子上创建数据库，记下主机、用户名、密码、数据库名称等，然后回到这个答案的开头。

一切顺利，

# ios - 使用 CoreMotion/Accelerometer 以编程方式检测 iPhone 是否掉落

> ID：14445914
> 
> 赞同：5
> 
> 时间：2013-01-21T19:36:35.233
> 
> 标签：ios, accelerometer, physics

所以我正在编写一段代码，我必须在上面的 iOS 4.3 中使用加速度计和陀螺仪检测不同的运动手势。

**Q1：**是否有任何现有的开源代码可以实现任何运动/手势检测？

如果不

**Q2：现在我想检测 iPhone 是否掉落。**

**到目前为止我所取得的成就：** CoreMotion API 提供**userAcceleration**，它（afaik）是*用户给予设备的加速度或设备在某个方向（x、y 或 z）的加速度，而不考虑重力*所以我可以做的是：存储，比方说，之前的5-6个加速度参数值，并可以检查它们中的任何一个达到大的负值，这基本上代表突然减速。

但是这个解决方案不是很理想，我想我也需要先以某种方式检测设备的自由落体/向下运动。知道如何解决这个问题吗？

**更新：** 感谢 Misch 分享您的方法。我根本没有考虑完全加速。我完全按照你说的做了：

> “但是，您必须测试自己，在您的情况下，“总加速度大约对应于地球加速度”和“一段时间”是什么意思。”

加速度值实际上是以 G 为单位的，所以我测试了范围为 0.9 - 1.1 的“总加速度”值。我检查了一段时间，最初我在 updateInterval 设置为 1/20.0 时检查了四个连续的值。现在我稍微放宽了连续性的条件。

这是一个示例输出：

加速= 0.090868
加速= 0.074473
加速= 0.159797
加速= 1.157513
加速= 1.224588
**加速= 1.036272**
**加速= 0.914698**
**加速= 0.904093**
**加速= 0.941516**
加速= 0.046362
加速= 0.045109
加速= 0.060045

我认为，我仍然需要继续测试和调整价值观。如果您有任何优化的想法，请分享，我知道为了帮助您，您需要查看许多自由落体加速度值的样本。现在我想：

1.  将加速度值四舍五入到小数点后 3 位，并使用我正在使用的加速度范围。
2.  可以检查在满足自由落体条件后，总加速度值是否突然下降。
3.  你认为我引用的加速度值有点吵吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-21T19:46:07.110

至**Q2**：

检查较大的负值并不能告诉您手机是否正在掉落。

*   首先，用户可以通过快速手势移动手机，这也会导致较大的（可能是负数）值。
*   其次，手机可能会朝你想象的另一个方向坠落，因此，加速度可能是正的，尽管手机正在向地面移动。

您可以只计算总加速度 ( `a = sqrt(ax^2 + ay^2 + az^2)`) 并检查该总加速度是否大致对应于地球加速度 ( `9.81`)。如果加速度对应于地球加速度一段时间，则手机正在下降。

但是，您必须测试自己，在您的情况下，“总加速度**大约**对应于地球加速度”和“**一段时间**”是什么意思。

* * *

**这背后的物理学：**

假设您以某种方式放下手机，手机的 y 轴向上显示。那么 x 和 z 加速度将为 0，y 加速度将如下所示：

![y轴加速度](../Images/aa49b454c6317db0f661710d9b478607.png)

加速度一开始是0，然后在你松开手机的那一刻达到-9.81。然后它会撞到地面，你在小加速度峰值中看到，然后加速度再次为零。

但是，您不能只使用 y 方向的加速度，因为您的手机可能会以不同的角度掉落。

所以你必须观察手机的总加速度：

![总加速度](../Images/4a170e3f464cb4910ee20339cbe2aa1d.png)

在这里，您不再看到负加速度。但是，在这里，您的手机面向哪个方向不再重要，因为自由落体的特征总是以 9.81 的加速度为特征。

**对您的编辑：**
1\. 为什么要将加速度值四舍五入到小数点后 3 位？如果您测试，则is或`0.9 < x < 1.1`无关紧要。 2\. 如果有人把手机掉了然后又接住了怎么办，所以总加速度不一定要再次下降。此外，手机落地的那一刻应该有很大的加速度值（突然减速）。也许人们在您的值中没有看到这一点的原因是它太短了，以至于它介于两次连续测量之间。然而，这是可以测量的，所以不要假设在自由落体之后，加速度应该再次减小。`x``0.914698``0.915`

# ios - SECURITY_ERR：使用打开本地数据库的 WebView 升级应用程序时，iOS 5.1 上的 DOM 异常 18

> ID：14445917
> 
> 赞同：0
> 
> 时间：2013-01-21T19:37:00.957
> 
> 标签：ios, ios5, webview, titanium, titanium-mobile

如果您构建一个简单的 Titanium 移动应用程序，其中包含一个 WebView，其中包含打开本地数据库的 javascript，第一次将其安装到 iOS 5.1 设备时，它将正确打开数据库。但是，如果您随后在设备上升级应用程序（它仍然可以是完全相同的版本/构建），则在打开本地数据库时会出错：

SECURITY_ERR：DOM 异常 18

重现步骤：

1.  将下面的 app.js 和 database.html 文件添加到 Resources 的根目录。
2.  将应用程序安装到 iOS 5.1 设备（在 Ti Studio 中运行 > iOS 设备）。
3.  打开应用程序，它会说“db opens”。
4.  在 iOS 5.1 设备上升级应用程序（Ti Studio 中的运行 > iOS 设备）。
5.  打开应用程序，它会说“db opening failed: Error: SECURITY_ERR: DOM Exception 18”。

这是重现的代码：

应用程序.js：

```
var win = Ti.UI.createWindow({});
var webView = Ti.UI.createWebView({
    top : 0, right : 0, bottom : 0, left : 0, url: 'database.html'
});
win.add(webView);
win.open(); 
```

数据库.html：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>db test</title>
        <script>
            window.onload = function () {
                var dbConn;
                try {
                    dbConn = openDatabase('test', '0.1', 'test database', 5 * 1024 * 1024);
                    alert('db opened');
                } catch (e) {
                    alert('db opening failed: ' + e.toString());
                }
            };
        </script> 
    </head>
    <body>
        db test
    </body>
</html> 
```

这个问题似乎与 Apache Cordova 拥有并修复的问题相同。

[https://issues.apache.org/jira/browse/CB-347](https://issues.apache.org/jira/browse/CB-347)

有没有其他人遇到过这个问题？任何解决方法的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:30:51.020

我们最终为 iOS 创建了一个自定义 webview 模块来自己解决这个问题，因为谁知道 Titanium 需要多长时间才能做到这一点：

[Webview 模块源码](https://bitbucket.org/justintoth/titanium_modules/src/3fa1d1c3f8befbf077145eb8657c87a8b274a7a4/webview/iphone/Classes/TiWebviewModule.m?at=master)

# sml - SML 中嵌套“if else”的语法

> ID：14445927
> 
> 赞同：3
> 
> 时间：2013-01-21T19:37:24.133
> 
> 标签：sml, smlnj

我正在努力在 SML 中实现嵌套的 if else 表达式。任何人都可以突出它的语法。假设有 C1、C2、C3 三个条件，我需要在 C 代码中等效于以下条件。

```
if (C1) { 
    return true;
}
else {
    if(C2) {
        return true;
    }
    else {
         if (C3) {
             return true;
         }
         else {
             return false;
         }
    }
} 
```

我尝试了以下方法，但将其视为“如果、否则如果和其他”情况

```
if C1 then true
else if C2 then true
else if C3 then true
else false 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T19:41:54.113

*你是对的。两个代码片段是等价的。*

稍加缩进，您的 SML 示例看起来更像是使用 nested `if/else`：

```
if C1 then true
else
    if C2 then true
    else
        if C3 then true
        else false 
```

您也可以使用括号，以便 SML 示例看起来与 C 示例几乎相同，但不是必需的。

当然，在 SML 中最惯用的方式是写

```
C1 orelse C2 orelse C3 
```

您可以对 C 代码使用相同的技巧。请记住，`true/false`在`if/else`块中返回是代码异味。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T11:13:33.793

我同意 using`orelse`是正确的方法，但作为您想要对更复杂组合采取行动的情况的替代方案，模式匹配将能够为您提供帮助。

```
fun funtrue (false,false,false) = false
  | funtrue _                   = true 
```

或作为案例陈述

```
case (C1,C2,C3) of
     (false,false,false) => false
  |  _                   => true 
```

# jquery - 使用循环通过一行代码获取输入

> ID：14445928
> 
> 赞同：0
> 
> 时间：2013-01-21T19:37:26.047
> 
> 标签：jquery, html

我正在学习 jQuery。我不是忍者。在 W3Schools阅读了[以下](http://www.w3schools.com/jquery/jquery_dom_get.asp)教程后，我想尝试一些困难的东西。所以我稍微修改了他们的样本，写了这个：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
     for(i=1;i<7;i++)              // Getting the values from the input boxes
        {
           var a[i] = $("#test"+i).val();
         }  

   for(i=1;i<7;i++)              //printing the values in the document
        {
           document.write("<p>"+a[i]+"</p>");
         }  
  });
});
</script>
</head>

<body>

<p>Name: <input type="text" id="test1" value="Mickey Mouse"></p><br>
<p>Name: <input type="text" id="test2" value="Mickey "></p><br>
<p>Name: <input type="text" id="test3" value="Mouse"></p><br>
<p>Name: <input type="text" id="test4" value="Micse"></p><br>
<p>Name: <input type="text" id="test5" value="Mice"></p><br>
<p>Name: <input type="text" id="test6" value="use"></p><br>

<button>Show Value</button>
</body>
</html> 
```

在这里`var a[i] = $("#test"+i).val();`，这可能吗。我的意思是使用“ `+`”符号来识别身份。?

代码不起作用。它应该显示在 html 页面上的字段中所做的所有输入。但它没有显示任何回应。我犯了 jQuery 不支持的任何错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:39:33.367

你可以写

```
 var a = [];
  $("button").click(function(){
       $("[id^=test]").each(function(){a[+this.id.slice(-1)]=this.value});
  }); 
```

请注意，您必须在填充之前创建数组。在您的代码中，`i`使用`var i=...`.

在不循环的情况下获取数组中所有值的另一种解决方案是：

```
 $("button").click(function(){
    var a = $("[id^=test]").map(function(){return this.value}).get();
  }); 
```

当您想向文档添加一些元素时，请使用 append ：

```
 $('<p>'+a[i]+'</p>').appendTo(document.body); 
```

如果您想一口气完成所有操作，可以这样写：

```
$($("[id^=test]").map(function(i){
      return '<p>value ' + i + '= '+this.value+'</p>'
}).get().join('')).appendTo(document.body); 
```

[示范](http://jsfiddle.net/dystroy/pvyYw/)

但是通常有很多方法可以用 jQuery 做一件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:59:23.553

首先，您需要`a`在 for 循环之外声明为数组。这将允许您的代码按原样工作，但是您将丢失所有 html。

```
$(document).ready(function () {
    $("button").click(function () {
        var a = [];
        for (i = 1; i < 7; i++) // Getting the values from the input boxes
        {
            a[i] = $("#test" + i).val();
        }

        for (i = 1; i < 7; i++) //printing the values in the document
        {
            document.write("<p>" + a[i] + "</p>");
        }
    });
}); 
```

为避免丢失所有 html，请在 html 中添加一个包含输出的 div，例如，

```
 <div id="output"></div>
</body> 
```

然后将您的 document.write 替换为`$("#output").append("<p>" + a[i] + "</p>");`

```
$(document).ready(function () {
    $("button").click(function () {
        var a = [];
        for (i = 1; i < 7; i++) // Getting the values from the input boxes
        {
            a[i] = $("#test" + i).val();
        }
        $("#output").empty();
        for (i = 1; i < 7; i++) //printing the values in the document
        {
            $("#output").append("<p>" + a[i] + "</p>");
        }
    });
}); 
```

但是，您仍然有两个 for 循环，您可以将其减少为一个，如下所示：

```
$(document).ready(function () {
    $("button").click(function () {
        $("#output").empty();
        for (i = 1; i < 7; i++) // Getting the values from the input boxes
        {
            $("#output").append("<p>" + $("#test" + i).val() + "</p>");
        }
    });
}); 
```

这很好，但我们还没有完成。$("#output") 是一个相对昂贵的方法调用，我们可以通过将它缓存在一个变量中并重用它来减少只调用一次而不是七次：

```
$(document).ready(function () {
    $("button").click(function () {
        var outputDiv = $("#output").empty();
        for (i = 1; i < 7; i++) // Getting the values from the input boxes
        {
            outputDiv.append("<p>" + $("#test" + i).val() + "</p>");
        }
    });
}); 
```

现在代码运行快速高效，但是如果我们添加了另一个输入，我们将不得不将幻数 ( `7`) 增加 1。为什么不直接遍历输入呢？

```
$(document).ready(function () {
    $("button").click(function () {
        var outputDiv = $("#output").empty();
        // $("input[id^=test]") selects all inputs that have an id that starts with "test"
        $("input[id^=test]").each(function(){
            outputDiv.append("<p>" + this.value + "</p>");
        });
    });
}); 
```

您可以通过将 .append 移到每个循环之外来做更多的事情，但是在这种情况下，与它所需的附加代码相比，这不会产生显着差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:45:57.517

要将包含每个输入值的段落附加到页面，您可以这样做 - [http://jsfiddle.net/6PQgq/](http://jsfiddle.net/6PQgq/)

```
$("button").click(function(){
    $('input').each(function(){
        $('body').append('<p>'+$(this).val()+'</p>');
    });
}); 
```

# java - 带参数获取版本的方法

> ID：14445930
> 
> 赞同：-6
> 
> 时间：2013-01-21T19:37:33.320
> 
> 标签：java

我正在寻找一种通过使用“--version”参数调用主类并让它转储项目版本并退出来获取我的项目版本的方法。有点像在命令行中键入 java -version 。

我知道我需要类似的东西，但不了解该方法的实现。

`private final static String VERSION="0.1.0"`

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:23:22.570

这是我试图做的修复。

```
 private final static String VERSION="version: 01.00.0000";
    if (args.length > 0 && args[0].equals(versionArg)){
                System.out.println(VERSION);
                System.exit(0);
            } 
```

# django - 如何在 Django 中获取抽象基类的唯一成员？

> ID：14445931
> 
> 赞同：0
> 
> 时间：2013-01-21T19:37:35.363
> 
> 标签：django, django-models

我的 Django 模型组织如下。

```
class Animal(models.Model):

  first_name = models.CharField(max_length=128, unique=True)

  class Meta:
    abstract = True

class Cat(Animal):

  def meow(self):
    return "mreooooow"

class Dog(Animal):

  def bark(self):
    return "AARF!"

class EvilMonkey(Animal):

  def plot_world_takeover(self):
    return "muahahaha ..." 
```

如您所见，每个“动物”在其自己的物种中都有一个独特的名字。如何过滤名称为“Ned”的动物？`Animal.objects.filter(first_name="Ned")`显然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:48:08.630

您可能想走[multi-table-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)的路线。这将允许您对基本模型进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T20:20:41.153

从文档：

*当您想将一些公共信息放入许多其他模型中时，抽象基类很有用。您编写基类并将 abstract=True 放在 Meta 类中。**该模型将不会用于创建任何数据库表。**相反，当它用作其他模型的基类时，它的字段将添加到子类的字段中。*

纳撒尼尔已经提到了解决方案。

# html - 从 blob 存储下载到 webrole 的 html 文件出现 403 和 404 错误

> ID：14445933
> 
> 赞同：1
> 
> 时间：2013-01-21T19:37:42.380
> 
> 标签：html, asp.net-mvc-3, iis, azure, http-status-code-404

我正在尝试将静态 .html 页面用于遇到大量流量峰值的网站。该网站是一个`MVC3`应用程序。静态 .html 页面的目录结构如下：

```
approot
|---content
        index.html
    |---staticpages
            page1.html
            page2.html
            page3.html 
```

我已将 defaultDocument 设置`web.config`为`"content/index.html"`. 如果我只是在项目中包含 .html 文件并部署应用程序，它运行良好。

我们要做的是将所有的 html 文件作为 blob 放入存储容器中。后台任务（在 WebRole 中运行）会定期检查任何更新的文件。后台任务还会在服务器启动时检查 .html 文件是否存在或是否需要更新。理想情况下，我们宁愿不必在项目中包含 .html 文件，而是在服务器启动时从存储中获取它们。

后台任务拉下文件并将它们放在正确的目录中就好了。但是，当尝试访问 www.mysite.com 上的网站时，IIS 会返回`403`错误。如果我们尝试访问任何其他 .html 页面，我们会收到`404`错误消息。`MVC`在本地开发环境中测试应用程序时不会发生这种情况。

当我在 中打开目录浏览时`IIS`，在获取站点目录时不会出现任何文件或目录。再次使用像 www.mysite.com 这样的域。

如果我确实在`webrole`项目中包含了 .html 文件，然后尝试在存储中更新一个文件，`blob`则会从存储中提取`IIS`该文件，但会提供旧页面。我已删除浏览器缓存以确保这不是问题。新文件正在服务器上正确更新。我已经将它复制到我的本地机器并查看了它，它确实是更新版本。

因此，从我目前可以推断的情况来看，似乎`Azure caches`整个网站都已部署并且似乎不允许更改内容。

有没有办法强制`Azure`识别更改，或者每当静态 .html 页面发生更改时我们将被迫重新部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:17:20.637

当您部署 webrole 以在 Azure 上运行时，它实际上打包了您的 Web 角色的*两个*副本。一个在 AppRoot 下结束，一个在 SitesRoot 下结束。

您的 WebRole.OnStart 进程在 AppRoot 中运行，但您的网站实际上是从 SitesRoot 中的副本提供的。因此，问题在于您的代码正在愉快地运行并从 blob 存储中复制文件，但它们位于 AppRoot 下，因此对您的站点不可见。

您需要在 global.asax 中启动一个线程来进行复制或修改您的代码以询问 IIS 以获得您网站的实际路径并修改它以将文件复制到那里。后者可能是更安全的方法。

当您在本地模拟器中运行时，一切都从您的主构建目录运行，因此行为有所不同。

# c# - 类型或命名空间定义，或预期的文件结尾；“}” 预期错误

> ID：14445934
> 
> 赞同：0
> 
> 时间：2013-01-21T19:37:42.243
> 
> 标签：c#, visual-studio-2012, calculator

```
namespace Calculator
{
    class Program
    {
        static void Main(string[] args)
        {
            Program calc = new Program();
            Program validate = new Program();
        bool valid = true;

        while (valid == true)
        {
            Console.WriteLine("Supported functions are *, /, +, -, ^, %.");
            Console.WriteLine("If you would like to find the greater number separate the numbers with a '?'");
            String userInput = Console.ReadLine();
            valid = validate.ValEntry(userInput);

            Console.WriteLine(calc.Calculate(userInput));
        }/////////////////////////////////////////////////////////////////////////

       private string Calculate(string input)
        {
        int opstringloc = findoperator(input);
        int firstval = int.Parse(input.Substring(0, opstringloc));
        int secondval = int.Parse(input.Substring(0, opstringloc));
        char operation = Convert.ToChar(input.Substring(opstringloc));

            switch (operation)
            {
                case '+':
                    return Convert.ToString(firstval+secondval);
                    break;
                case '-':
                    return Convert.ToString(firstval-secondval);
                    break;
                case '/':
                    return Convert.ToString(firstval/secondval);
                    break;
                case '*':
                    return Convert.ToString(firstval*secondval);
                    break;
                case '%':
                    return Convert.ToString(firstval%secondval);
                    break;
                case '^':
                    return Convert.ToString(firstval^secondval);
                    break;
                case '?':
                    if (firstval<secondval)
                    {
                        return ("[0] < [1]"); Convert.ToString(firstval); Convert.ToString(secondval);
                    }
                    else if (firstval>secondval)
                    {
                        return("[0] > [1]"); Convert.ToString(firstval); Convert.ToString(secondval);
                    }
                    else if (firstval==secondval)
                    {
                        return ("[0] = [1]"); Convert.ToString(firstval); Convert.ToString(secondval);
                    }
                    break;
               default:
                        return ("Invalid Entry, please try again.");
                    break;
            }
           return ("Invalid Entry, please try again.");
        }

    private bool ValEntry(string entry)
    {
        for (int p = 0; p < entry.Length; p++)

           if (char.IsDigit(entry[p]))
           {
               return true;
           }
            else if ((entry[p] == '+') || (entry[p] == '-') || (entry[p] == '*') || (entry[p] == '/') || (entry [p] == '%') || (entry [p] == '^') || (entry[p] == '?'))
           {
                return true;
           }
           else
           {
                return false;
           }
       return false;
    }

        private int findoperator (string oploc)
        {

            for (int loc = 0; loc < oploc.Length; loc++)
            {
              if (!char.IsDigit(oploc[loc])) return loc;
            }
            return -1; 
        }

    }
}
} // Moving this to where it belongs shows the error in the location of the }. 
```

我正在尝试创建一个验证用户输入的计算器，然后使用用户输入运行计算。该程序一直告诉我它需要一种命名空间定义或预期的文件结尾，并且我需要一个花括号。我看了看，每个花括号都有一个伙伴，据我所知，我的所有实例都位于类中。我只有两周的编程课程，所以如果我听起来像初学者，请原谅我。我已经为此工作了两天，但我无法弄清楚我做错了什么。如果你知道我做错了什么，请解释一下。我在计算机告诉我需要另一个花括号的位置旁边放了一堆“/”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:41:22.910

您的 Main 方法在移至`private string Calculate()`. 结束后应该有另一个} `while`。然后，您只需删除`}`文档末尾的其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:44:38.607

在您的 while 循环结束后，您缺少一个右括号 }。

尝试这个：

```
namespace Calculator
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            Program calc = new Program();
            Program validate = new Program();
            bool valid = true;

            while (valid == true)
            {
                Console.WriteLine("Supported functions are *, /, +, -, ^, %.");
                Console.WriteLine("If you would like to find the greater number separate the numbers with a '?'");
                String userInput = Console.ReadLine();
                valid = validate.ValEntry(userInput);

                Console.WriteLine(calc.Calculate(userInput));
            } /////////////////////////////////////////////////////////////////////////
        }

        private string Calculate(string input)
        {
            int opstringloc = findoperator(input);
            int firstval = int.Parse(input.Substring(0, opstringloc));
            int secondval = int.Parse(input.Substring(0, opstringloc));
            char operation = Convert.ToChar(input.Substring(opstringloc));

            switch (operation)
            {
                case '+':
                    return Convert.ToString(firstval + secondval);
                    break;
                case '-':
                    return Convert.ToString(firstval - secondval);
                    break;
                case '/':
                    return Convert.ToString(firstval/secondval);
                    break;
                case '*':
                    return Convert.ToString(firstval*secondval);
                    break;
                case '%':
                    return Convert.ToString(firstval%secondval);
                    break;
                case '^':
                    return Convert.ToString(firstval ^ secondval);
                    break;
                case '?':
                    if (firstval < secondval)
                    {
                        return ("[0] < [1]");
                        Convert.ToString(firstval);
                        Convert.ToString(secondval);
                    }
                    else if (firstval > secondval)
                    {
                        return ("[0] > [1]");
                        Convert.ToString(firstval);
                        Convert.ToString(secondval);
                    }
                    else if (firstval == secondval)
                    {
                        return ("[0] = [1]");
                        Convert.ToString(firstval);
                        Convert.ToString(secondval);
                    }
                    break;
                default:
                    return ("Invalid Entry, please try again.");
                    break;
            }
            return ("Invalid Entry, please try again.");
        }

        private bool ValEntry(string entry)
        {
            for (int p = 0; p < entry.Length; p++)

                if (char.IsDigit(entry[p]))
                {
                    return true;
                }
                else if ((entry[p] == '+') || (entry[p] == '-') || (entry[p] == '*') || (entry[p] == '/') ||
                         (entry[p] == '%') || (entry[p] == '^') || (entry[p] == '?'))
                {
                    return true;
                }
                else
                {
                    return false;
                }
            return false;
        }

        private int findoperator(string oploc)
        {

            for (int loc = 0; loc < oploc.Length; loc++)
            {
                if (!char.IsDigit(oploc[loc])) return loc;
            }
            return -1;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:41:57.233

你没有数错。一后

```
Console.WriteLine(calc.Calculate(userInput)); 
```

并在最后删除一个。

然后我只需将字符串更改为字符串。更有可能...

# c# - 使用统一的构造函数注入实现 DI

> ID：14445937
> 
> 赞同：0
> 
> 时间：2013-01-21T19:37:48.813
> 
> 标签：c#, dependency-injection, unity-container

我是 DI 模式的新手……现在刚刚学习。我得到了一个使用统一的构造函数注入代码。这是代码。

```
public class CustomerService
{
  public CustomerService(LoggingService myServiceInstance)
  { 
    // work with the dependent instance
    myServiceInstance.WriteToLog("SomeValue");
  }
} 

IUnityContainer uContainer = new UnityContainer();
CustomerService myInstance = uContainer.Resolve<CustomerService>(); 
```

在这里，我们可以看到 CustomerService ctor 正在寻找 LoggingService 实例，但是在这里，当我们通过解析创建 CustomerService 实例时，我们没有传递 LoggingService 实例。所以告诉我怎么会起作用。任何人都用小的完整示例代码来解释它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:46:49.767

代码看起来像这样：

```
public interface ILoggingService
{
    void WriteToLog(string logMsg);
}

public class LoggingService : ILoggingService
{
    public void WriteToLog(string logMsg)
    {
        ... WriteToLog implementation ...
    }
}

public interface ICustomerService
{
    ... Methods and properties here ...
}

public class CustomerService : ICustomerService
{

    // injected property
    public ISomeProperty SomeProperty { get; set; }

    public CustomerService(ILoggingService myServiceInstance)
    { 
        // work with the dependent instance
        myServiceInstance.WriteToLog("SomeValue");
    }
} 

...
...

// Bootstrap the container. This is typically part of your application startup.
IUnityContainer container = new UnityContainer();
container.RegisterType<ILoggingService, LoggingService>();

// Register ICustomerService along with injected property
container.RegisterType<ICustomerService, Customerservice>(
                            new InjectionProperty("SomeProperty", 
                                new ResolvedParameter<ISomeInterface>()));
...
...

ICustomerService myInstance = container.Resolve<ICustomerService>(); 
```

因此，当您解析 ICustomerService 接口时，unity 将返回一个新的 CustomerService 实例。当它实例化 CustomerService 对象时，它将看到它需要一个 ILoggingService 实现，并将确定 LoggingService 是它要实例化的类。

还有更多，但这是基础。

**更新**- 添加参数注入

# c# - 如何从基于 Windows 8 商店应用程序的 C# 递归读取文件和文件夹？

> ID：14445940
> 
> 赞同：1
> 
> 时间：2013-01-21T19:38:02.697
> 
> 标签：c#, windows-8, windows-store-apps

此示例仅返回文件夹中的顶级文件：

```
var myFiles = await tempFolder.GetFilesAsync(); 
```

但是如何以递归方式获取文件或文件夹？这是使用 QueryOptions 的 javascript 答案，但这不是 C# 中的选项

[这个问题的Javascript版本](https://stackoverflow.com/questions/13998595/how-can-i-recursively-read-files-and-folders-using-javascript/14000488#14000488)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:38:02.697

恕我直言，GetFilesAsync 采用 CommonFileQuery 枚举并不是那么直观和令人困惑，但它们的值根本没有暗示它们的真正含义。

MSDN 记录了它，但如果您不开始阅读 MSDN 的每种方法，它仍然会令人困惑。 [CommonFileQuery 枚举](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.search.commonfilequery.aspx)

这些将仅返回顶级文件：

```
var myFiles = await tempFolder.GetFilesAsync();
var myFiles = await tempFolder.GetFilesAsync(CommonFileQuery.DefaultQuery); 
```

虽然这些其他枚举值将执行递归文件列表，并对列表进行排序，但它确实做了两件事。

```
var myFilesRecursive = await tempFolder.GetFilesAsync(CommonFileQuery.OrderByName);
var myFilesRecursive = await tempFolder.GetFilesAsync(CommonFileQuery.OrderByDate); 
```

如果您进行递归（深度）查询，似乎您只能对列表进行排序。

对我来说，以这种方式实现它没有多大意义，因此把它放在这里作为其他人的问答。

像这样的东西可能更有用和直观：

```
var myPreferredFileList = await tempFolder.GetFilesAsync(CommonFileQuerySort.OderByName, CommonFileQueryView.Deep); 
```

# jquery - 为什么 jQuery 对大多数浏览器都一样？

> ID：14445946
> 
> 赞同：-4
> 
> 时间：2013-01-21T19:38:20.980
> 
> 标签：jquery, cross-browser

我读过 jQuery 的优点之一是它大部分时间都可以在最流行的浏览器中运行。我只是想知道，这是为什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:39:27.310

因为 jQuery 充满了特殊情况的代码来解决不同浏览器中的不一致问题。

# java - Java 模块化算术

> ID：14445952
> 
> 赞同：1
> 
> 时间：2013-01-21T19:38:56.873
> 
> 标签：java

> **可能重复：**
> [Java 中的 Mod 产生负数](https://stackoverflow.com/questions/5385024/mod-in-java-produces-negative-numbers)

当我尝试打印 -16 mod 57 时，我应该得到 41。但是，我一直得到 -16 作为我的答案。是什么赋予了？

这是我的代码：

```
public class TestMod {

public static void main(String[] args) {
    int number = -16;
    int mod = 57;
    int answer = number%mod;
    System.out.println(answer);

}

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T19:41:32.707

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)：

> **在二进制数值提升（第 5.6.2 节）之后，整数操作数的余数运算产生一个结果值，使得 (a/b)*b+(a%b) 等于 a。**

替换您示例中的数字，您会看到这`-16`是语言规范的要求。

> 即使在被除数是其类型的最大可能量级的负整数并且除数是-1（余数是0）的特殊情况下，这个恒等式也成立。
> 
> **由这个规则得出，余数运算的结果只有当被除数为负时才能为负，只有当被除数为正时才能为正。此外，结果的大小总是小于除数的大小。**

以下是获得预期结果的方法：

```
public static void main(String[] args) {
    int number = -16;
    int mod = 57;
    int answer = ((number % mod) + mod) % mod;
    System.out.println(answer);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T19:41:04.363

当第一个操作数为负数时，余数运算符`%`返回负数结果。这是许多语言中的常见行为。

# jquery - 获取函数外部变量jquery

> ID：14445962
> 
> 赞同：-3
> 
> 时间：2013-01-21T19:39:34.877
> 
> 标签：jquery, variables

> **可能重复：**
> [在 ajax/jquery 调用的成功函数之外使用变量](https://stackoverflow.com/questions/5935968/use-variable-outside-the-success-function-from-an-ajax-jquery-call)

我试图在 JSON 查询之外获取一个变量但没有成功：

```
$(document).ready(function(){
    $.getJSON("https://gdata.youtube.com/feeds/api/users/diasporaduo/uploads?v=2&alt=jsonc",function(json){

    videoid = json.data.items[0].id;
    });

    alert(videoid)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:47:30.923

您可以使用异步标志：

> 异步（默认值：true）
> 
> 类型：Boolean 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用成功/错误/完成回调选项而不是 jqXHR 对象的相应方法，例如 jqXHR.done() 或已弃用的 jqXHR.success()。

您的代码示例是：

```
var videoid;
    $.ajax({
        url: 'https://gdata.youtube.com/feeds/api/users/diasporaduo/uploads?v=2&alt=jsonc',
        type: 'GET',
        async: false,
        success: function (json) {
            videoid = json.data.items[0].id;
        }
    });
    alert(videoid); 
```

提琴手：http: [//jsfiddle.net/5hE7n/](http://jsfiddle.net/5hE7n/)

# android - 为 ant 用户将 maven 依赖项导出到 github 页面

> ID：14445964
> 
> 赞同：0
> 
> 时间：2013-01-21T19:39:37.733
> 
> 标签：android, maven, ant, github, github-pages

我们[在 GitHub 上有一个 Android 项目](https://github.com/octo-online/robospice)：

*   包含许多子模块
*   完全 mavenized 并且与 maven 配合得很好
*   生产 jar 类型的人工制品

我们找到了一种简单的方法来向新用户解释如何设置他们的 maven 项目，但我们还需要向使用 ant 的人解释它（在 Android 上，ant 是最常见的构建工具）。ant 用户所要做的就是将 jars（我们的人工制品和依赖项）放在他们 android 项目的特定文件夹中。

但是我们怎样才能为他们提供罐子呢？

我们如何导出：

*   我们所有的依赖项 jar artifacts
*   我们所有的传递依赖
*   将它们全部导出到我们的 gh 页面

基本上，每个子模块都应该在 github 页面上有自己的文件夹，里面装满了 jars。

任何实现这一目标的建议将不胜感激。提前致谢。

PS：我们已经使用 site-github maven 插件将[maven 站点部署到 github 页面。](http://octo-online.github.com/robospice/site/latest/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:00:53.423

[Maven ANT Tasks](http://maven.apache.org/ant-tasks/index.html)是一种简单的方法。虽然也许不是ANT的精神。

# git - zsh prompt中的git信息会不会拖慢使用体验？

> ID：14445965
> 
> 赞同：1
> 
> 时间：2013-01-21T19:39:38.373
> 
> 标签：git, zsh, prompt

我正在尝试在`RPROMPT`我的 zsh 配置中设置 git 信息。

```
# precmd hook
function precmd {
  vcs_info 'prompt'

  if [ -z "$vcs_info_msg_0_" ]; then
    RPROMPT=''
  else
    RPROMPT=$POWERLINE_COLOR_FG_WHITE$'\u2b82'"%f$POWERLINE_COLOR_BG_WHITE $POWERLINE_COLOR_FG_GRAY"$'$(git_prompt_info)'""$'$(git_prompt_ahead)'" $POWERLINE_COLOR_FG_GRAY"$'\u2b82'"%f%k$POWERLINE_COLOR_BG_GRAY$POWERLINE_COLOR_FG_WHITE "$'$(git_prompt_short_sha) '"%f%k"
  fi;
} 
```

这对我来说效果很好，但是每当我在 git 存储库中时，提示变得非常滞后且不负责任。当我看到网上很多人在他们的 zsh 配置中使用 git 提示时，不清楚为什么会出现这种情况。难道我做错了什么？

[这](https://gist.github.com/4588599)是整个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:09:52.873

`precmd`您的提示很慢，因为您检查了钩子中的 git 存储库状态。

`chpwd`您可以通过仅在 git 信息发生更改时（即更改目录（挂钩）或运行`git`命令时）更新提示信息来加快提示速度。

虽然这不是一件容易的事，但有一个 zsh 插件[zsh-git-prompt](https://github.com/olivierverdier/zsh-git-prompt)可以很好地工作。请注意，它需要 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:09:56.637

根据 git 存储库的大小以及插件运行多少不同的命令`vcs_info`来生成提示数据，获取要在提示中显示的信息可能会非常慢。我不使用`oh-my-zsh`或`vcs_info`我的 shell 提示符和获取 git 信息中的插件使用大约一秒钟来获取当前分支、分阶段更改和脏更改。

# jquery - jquery ui在取消模式上恢复拖放可拖动

> ID：14445969
> 
> 赞同：0
> 
> 时间：2013-01-21T19:39:44.873
> 
> 标签：jquery, jquery-ui, jquery-droppable, jquery-draggable

我有这段代码，当我在另一个文件上释放文件时，激活管理系统文件中的 jquery 可拖动当我单击取消时弹出一个确认对话框，可拖动应该自动恢复，有人可以帮我吗？

```
$(function() {
    $('.files-icons li').live('mouseenter',function() {
        var $this = $(this);
        if(!$this.is(':data(draggable)')) {
            $this.draggable({
                revert: 'invalid',
                helper: "original",
                opacity: 0.35,
                snapMode: 'inner',
                snap:true,
                snapTolerance: 35,
                distance: 8,
                revertDuration: 200,
                start: function(){

                }
            });
        }
    });
    $('.ic').live('mouseenter',function() {
        var $this = $(this);
        if(!$this.is(':data(droppable)')) {
            $this.droppable({
                tolerance: 'intersect',
                over: function() {
                },
                out: function() {
                },
                drop: function(event, ui) {
                    dest = $(this).attr('rel');
                    $.modal.confirm('Are u sure?', function()
                    {
                        $.ajax({
                            url:'<?= $this->request->webroot; ?>files/move/source:' + ui.helper.attr('rel')  + '/dest:' + dest ,
                        }).done(function(data) {
                            $(ui.draggable).remove();
                        });
                    }, function() {
                        return false;
                    });

                }
            });
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:51:27.010

如果您使用`clone`可拖动`helper`，您应该能够`droppable`在确认后追加，或者在未确认时不执行任何操作。

使用本机浏览器的演示：http `confirm`: [//jsfiddle.net/WbHAr/1/](http://jsfiddle.net/WbHAr/1/)

发布您正在使用的模态插件的链接，并将从中创建演示。

# php - (php) 使用带有参数名称的参数的 soapclient 调用 wsdl 方法

> ID：14445970
> 
> 赞同：1
> 
> 时间：2013-01-21T19:39:47.953
> 
> 标签：php, soap, wsdl, soap-client, named-parameters

嗨，我正在使用 PHP 的soapclient 函数来调用soap webservices（使用wdsl）。

我知道如何将参数传递给方法，但我正在使用的 web 服务需要参数名称中的参数（不知道如何调用它）。

这是 web 服务在使用参数时所期望的：

```
<searchCriteria>
    <Name MatchType=”MatchBeginning”&gt;Exmaple Company</Name>
    <Address>
        <Street>Example Street</Street>
    </Address>
</searchCriteria> 
```

就是关于Name参数中的这一部分：MatchType=”MatchBeginning”</p>

这就是我调用网络服务的方式：

```
<?php
    $client = @new \SoapClient($url,array(
            'exceptions' => 1,
            'login' => '****',
            'password' => '****',
            'trace' => 1,
    ));

    $parameter = array(
        "countries" => array(
            "CountryCode" => "NL",
        ),
        "searchCriteria" => array(
            "Name" => "value"
        ),
    ); 
```

有人可以告诉我如何使用上述方法添加参数吗？非常感激。

顺便说一句，我正在尝试使用 Creditsafe 的网络服务。也许有人会通过添加此信息来找到这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:45:09.400

我想出了如何做到这一点：

```
 $parameter = array(
        "countries" => array(
            "CountryCode" => "DE",
        ),
        "searchCriteria" => array(
            "Name" => array( "_" => "value",
             "MatchType" => "MatchBeginning"
            ),
        )
    ); 
```

# python - Python JSON没有打破循环

> ID：14445973
> 
> 赞同：1
> 
> 时间：2013-01-21T19:39:58.433
> 
> 标签：python, json, musicbrainz

我正在尝试通过 python 使用 MusicBrainz API，并且在试图弄清楚为什么在满足特定条件后我的循环不会中断的时候，我感到很痛苦。我通过获取 JSON 的 URL 传递歌曲的持续时间和声学 ID。我不确定 JSON 是否无效，但可以使用格式化的输出。我被卡住的部分是尽管我告诉代码在歌曲的持续时间与返回的 JSON 的持续时间匹配时中断，但它仍然继续显示与持续时间匹配的其余数据。此外，我得到一个主要数据元素的 KeyError，这对我来说看起来不错！请帮忙！

正在使用的 Python 代码：

```
import urllib2
import urllib
import simplejson
import json
import pprint

duration = 266
output = 'AQABz0q6JJFknHgOHH0q9DyQw8lxIzmaLzl6HHyE7yO6G4dP9Mc3JDry4FJR5RfIvccWH0d_PD-O63gi9KTQPjme4-uDxl04hMqcQf0RfXgmKWDSDD8aF9dYTDl5hEPy46gnHY-iPEWZEWfw42

-

SIHZiQQ9xLR90ckzRw_mNez_aHZeeQnlIIdfxyHieBLl0HC_Y_Ajpo3lxnMf7DJUleJKGhk_Bw7mCvAqS53j1CE30BFdmYqeOL3pQ8vgeNAqzfKjMx_jRJ0dTMT_yZziuIE6ko1kSzcG7BMZzCU13JTglGZ9x

pcVJKgjlHAlfnFGONw8uHo-xd8Pn46DGDMmeI-fx5Vid6LjwXCLKh2h-5IPy8LiP3iUsaoGU9PixE3_wZEcyqw0O_MPhiugffMcfxNSJJMcbfMqagtMDH9eP5-AfJF-OMMtRUTl4JWiebA-

MnsazIzmDHP9QHU2DL-CTTMGHIfihXwqe6PjR_ugPnTlyXDmehGmCW5KDUHkO8Qg7HDPBJ8dP_MGlBHp-HD8uRuBewnoxvtCTwkvUCaeOH01MWA9ON0hupItyNJNSPELzZ-hFxAp1DXJ8nEolQu-

PtGLwED_gmMfzG3fw9Hhx3mhe1Do-o5KmVIG1M8MTIdmP8D_MMagTUsaP9sd_WKg-H6eRejm-J4TOHHPyEFVPkN9Ri-HA_A6aHlcu4Tn6KHiM99iRujGe42iO48eP-0WTRoOToxb-

o9nR99jR1EF_hImzrEEyJXyGiRnTwx8qo9E4H1VzPMKDvoMd-gjlLIS2C442UmhzDc-O-

kVDIdePZ0dvorlwZbrw5McTP5i8Hc1jXEH0vDiEP9ilK7iUQ6qkY3qQPsNFNJoY462JL_gZoTlC10geTc5xqRPxDMWOivIOMj_e402RPEGu4R2ancKfww9YJfB3CdP34D6eHiG1FXPESRxcHf6hPfh6nJskZH

Ke4DTW4w8-4wkf4sqHnkd6JCcuGl6SPCgZnMeYJiPuhbh1RGIeJMSN_3imwi4HeImeo5SOS7ij5HiMK7oQnhf0C-l0_KjUrPhx7_hxXDpC2IGmPMV_FT-

Rq8aTAukX_BfU_EXOxXCTLMQlC89yPPnRZEGeC82kRGSgMzx6Isx0Ia4uPJEY9PLR9Hg04w90mEN-CfuONvrhH4ezDQ8TjEeYc9CeHmGqHD8qZ4dVnEc_41R0NAqPaj2aNQ-eIm1zI-dxZzme-

HjQkuiLH36RM0j4oD8-EueDLjE8EvUyfBc-hhF-

C8n4IH1QncELRoFTgjADFCCKdIOIBYQZ0UABgDAnsAGCQuGEAgwhwACGDBFgMIIAAQKsMIQY4QARQFAAiJGeEQOoBEgpEZxQAAEipDAOEYCEAU4AZAEBQAoYDGFAMGKIwIIRgIg4jiDFlIAAIEIEBMwwBJQkX

hiohHEGIKAkcsIp4RAigAHBgPKSAKIIAoAxgJBjlhhkCIDAIAQkIgYAKSyQCDpCARIESWUAMYQ4YQGzGhhkADBAEOIEMAAhZRlQRgGkBBECMeAIQYAghxBAChAigANEIWKQcEbB5ZxlChGKACCAEKWEsIIyiw

RiTAABgBNKAAIIQMQhJCCoTAgliAIAICYwAIRZowRgxCllDBOAAEGABQIRoQ0ABIFgHCEECSEUMhQBAhkDwABCBANIACSABMxoAYGEBFRCASBEGAMBEMAIxBQQABkkLALAAIaIYIwggoACShgEjLEKAQ0AQsY

goBwAAImMFBBIQQUUQcgQARQI'
data = {}
data['client'] = '8XaBELgH'
data['format'] = 'json'
data['meta'] = '2'
data['duration'] = str(duration)
data['fingerprint'] = output
resp = urllib2.urlopen('http://api.acoustid.org/v2/lookup', urllib.urlencode(data))
str_to_load = resp.read()
json = simplejson.loads(str_to_load)
#pprint.pprint(json)
for result in json['results']:
    for recording in result['recordings']:
        for track in recording['tracks']:
            track_artist = ''
            for artist in track['artists']:
                try:
                    track_artist += repr(artist['name']) + ' '
                except:
                    track_artist = ''
            #print str(track['duration']) + '-' + track['medium']['release']['title'] + '-' + track['title'] + '-' + track_artist
            if str(track['duration']) == str(duration):
                print 'Matched:' + str(track['duration']) + '-' + track['medium']['release']['title'] + '-' + track['title'] + '-' + track_artist
                break 
```

返回的 JSON：

```
{
    "status": "ok",
    "results": [{
        "recordings": [{
            "duration": 264,
            "tracks": [{
                "duration": 264,
                "position": 7,
                "medium": {
                    "release": {
                        "id": "036ce98e-0397-4ddb-97ff-e6784fdd21a4",
                        "title": "Live in Paris"
                    },
                    "position": 1,
                    "track_count": 10,
                    "format": "CD"
                },
                "artists": [{
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Sail On"
            }],
            "id": "0083c88e-1ca2-484e-b1ff-d384358942bb"
        }, {
            "duration": 268,
            "tracks": [{
                "duration": 268,
                "position": 12,
                "medium": {
                    "release": {
                        "id": "9c0a98e8-da23-49cf-a6ae-df27340deebb",
                        "title": "Love Songs"
                    },
                    "position": 1,
                    "track_count": 16,
                    "format": "CD"
                },
                "artists": [{
                    "id": "60d41417-feda-4734-bbbf-7dcc30e08a83",
                    "name": "Diana Ross"
                }, {
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Endless Love"
            }],
            "id": "07be8b05-a1cb-4e88-8217-2ef5e0dafcb3"
        }, {
            "duration": 267,
            "tracks": [{
                "duration": 267,
                "position": 2,
                "medium": {
                    "release": {
                        "id": "a4c1dce4-0e16-483e-95de-aabff4378711",
                        "title": "Top 40 Hitdossier 1981-1982"
                    },
                    "position": 1,
                    "track_count": 20
                },
                "artists": [{
                    "id": "60d41417-feda-4734-bbbf-7dcc30e08a83",
                    "name": "Diana Ross"
                }, {
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Endless Love"
            }],
            "id": "1fb13442-b0e7-4891-97de-255ba7e8730f"
        }, {
            "duration": 263,
            "tracks": [{
                "duration": 263,
                "position": 16,
                "medium": {
                    "release": {
                        "id": "add4c09f-b9f3-4e3f-b36b-22f30309ce2b",
                        "title": "Steve Wright's Sunday Love Songs, Volume 2"
                    },
                    "position": 1,
                    "track_count": 22,
                    "format": "CD"
                },
                "artists": [{
                    "id": "60d41417-feda-4734-bbbf-7dcc30e08a83",
                    "name": "Diana Ross"
                }, {
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Endless Love"
            }],
            "id": "20df4da3-005e-4bde-9337-46925e709110"
        }, {
            "duration": 264,
            "tracks": [{
                "duration": 264,
                "position": 2,
                "medium": {
                    "release": {
                        "id": "d23d377b-b69a-424b-856c-b78dfde11feb",
                        "title": "Always And Forever (disc 1)"
                    },
                    "position": 1,
                    "track_count": 20,
                    "format": "CD"
                },
                "artists": [{
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Endless Love"
            }],
            "id": "2cf76055-5a41-4a39-82ba-611b7142ab91"
        }, {
            "duration": 265,
            "tracks": [{
                "duration": 265,
                "position": 9,
                "medium": {
                    "release": {
                        "id": "3bc3d08b-7e50-47d0-951d-de95a10e1ee8",
                        "title": "The Love Album II"
                    },
                    "position": 1,
                    "track_count": 20,
                    "format": "CD"
                },
                "artists": [{
                    "id": "60d41417-feda-4734-bbbf-7dcc30e08a83",
                    "name": "Diana Ross"
                }, {
                    "id": "3cb25fb2-5547-4b05-adec-1a5e37830d46",
                    "name": "Lionel Richie"
                }],
                "title": "Endless Love"
            }],
            "id": "33f02920-5832-490d-bf5f-3cce793925bf"
        }....too big to display here.. 
```

请不要介意我在这里粘贴输出..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:49:29.927

从[python的文档](http://docs.python.org/2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)中，

> 与 C 中一样，break 语句打破了最小的封闭 for 或 while 循环。

在你的情况下

```
for track in recording['tracks']: 
```

尝试将代码放入函数中并使用 return：

```
def find_it(json, duration):
  for result in json['results']:
      for recording in result['recordings']:
          for track in recording['tracks']:
              track_artist = ''
              for artist in track['artists']:
                  try:
                      track_artist += repr(artist['name']) + ' '
                  except:
                      track_artist = ''
              #print str(track['duration']) + '-' + track['medium']['release']['title'] + '-' + track['title'] + '-' + track_artist
              if str(track['duration']) == str(duration):
                return track, track_artist
  return None, None

track, track_artist = find_it(json, duration)
print 'Matched:' + str(track['duration']) + '-' + track['medium']['release']['title'] + '-' + track['title'] + '-' + track_artist 
```

# android - 从自定义适配器获取非视图数据

> ID：14445978
> 
> 赞同：1
> 
> 时间：2013-01-21T19:40:05.987
> 
> 标签：android, listview, android-cursoradapter

我有一个用于填充 ListView 的自定义适配器。我`onItemClick()`在 ListView 项目上有一个集合，它将显示的片段更改为其他内容。

我想将数据从 ListView 项传递给新片段，但如果我能提供帮助，我不想从可见视图中获取任何数据。自定义适配器解析 JSONObject 以获取数据以填充 ListView。那么有没有一种方法可以访问适配器类之外的底层数据？

更具体地说，我试图将必要的底层 ListView 数据放入一个 Bundle 并将该 Bundle 从 ListView 项传递给活动，然后传递到新的片段中。

我还想从`getView()`方法中获取它，因此我不必在适配器内的另一个自定义公共方法中复制代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:55:48.957

如果您的自定义适配器覆盖该`getItem(int position)`方法，并且您应该在适配器数据集中的给定位置返回对象，则可以这样做。`onItemSelected(AdapterView<?> parent, View view, int position, long id)`之后，您可以通过`ListView`调用以下命令获取点击的数据：

`parent.getAdapter().getItem(position)` -> 这是与您点击的项目相对应的数据。您只需要将返回的对象强制转换为您的班级并做您想做的事。祝您好运，我希望它有所帮助！

# nhibernate - Nhibernate Where Exists queryOver

> ID：14445979
> 
> 赞同：1
> 
> 时间：2013-01-21T19:40:07.900
> 
> 标签：nhibernate, queryover

我有以下对象

```
public class Document
{
    public Guid Id { get; set; }
    public ISet<Tag> Tags { get; set;}
    ...
}

public class Tag 
{
    public Guid Id { get; set;} 
} 
```

这是多对多关系，但我没有中间 DocumentTag 对象。我正在尝试使用 QueryOver 语法来返回具有所有一组标签的所有文档。这是我到目前为止所拥有的。

```
Guid[] tagsThatMustMatch = ...;
var result = Session.QueryOver<Document>()
               .WithSubquery
               .WhereExists(QueryOver.Of<Tag>().Where(t => tagsThatMustMatch.Contains(t.Id))
               .List() 
```

我无法表达要求。我知道我必须动态构建一个查询，该查询将为每个必须匹配的标签提供一个 WhereExists。这些 WhereExists 需要进行与运算。我遇到的另一个问题是 WhereExists 方法需要接受 DetachedQuery。但是我没有办法限制它只查看这个文档没有所有标签的标签。

有没有什么例子可以让我看到如何做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:10:07.557

使用**IN** - 无需调整实体定义

让我们首先以这种方式声明您的子查询：

```
Guid[] tagsThatMustMatch = ...;

var subQuery = QueryOver.Of<Tag>()
 .WhereRestrictionOn(t => t.Id).IsIn(tagsThatMustMatch)
  .Select(t => t.Id); // tag ID projection 
```

有了分离的条件，我们可以在 QueryOver 语法中使用它们，如下所示：

```
var query = session.QueryOver<Document>()
  .JoinQueryOver<Tag>(d => d.Tags)
  .Where(Subqueries.PropertyIn("Id", subQuery.DetachedCriteria)) // Tag.Id
  // .TransformUsing(Transformers.DistinctRootEntity) // distinct
  ; 
```

延长：

使用**EXISTS** - 需要在我们的实体域模型中进行调整

正如[Diego Jancic](https://stackoverflow.com/users/72350/diego-jancic)在他的评论中指出的那样，EXISTS 可能更有效......但前提是有来自`Tag`to的参考`Document`

它可以是参考

```
public class Tag 
{
    public Guid Id { get; set;} 
    public Document Document { get; set; }
} 
```

或者至少是代表文档 id 的 Guid

```
public class Tag 
{
    public Guid Id { get; set;} 
    public Guid DocumentId { get; set; }
} 
```

让我们假设第一个，然后我们可以像这样使用子查询

```
Guid[] tagsThatMustMatch = ...;

// Essential alias of the parent Document
Document document = null;

var subQuery = QueryOver.Of<Tag>()
 .Where(t => t.Document.Id == document.Id) // or t.DocumentId = document.Id
 .WhereRestrictionOn(t => t.Id).IsIn(tagsThatMustMatch)
 .Select(t => t.Id); // tag ID projection 
```

这是唯一的方法，子查询如何仅在与文档相关的标签上正确返回 true。存在的查询看起来像这样

```
var query = session
    .QueryOver<Document>(() => document) // alias used in subquery
    .WithSubquery                        // needed to filter by parent id
        .WhereExists(subQuery)
    ... 
```

# counter - verilog 计数器实现意外行为

> ID：14445980
> 
> 赞同：1
> 
> 时间：2013-01-21T19:40:08.503
> 
> 标签：counter, verilog, hdl

我在verilog中做了一个计数器，并在硬件中实现了它。但我无法解释行为代码是：

```
module clock_test(clk_in,led,rst);
input wire clk_in;
input wire rst;
output wire [7:0] led;

reg [23:0] counter = 24'b0;

assign led = counter[23:16];

always @(posedge clk_int)  begin
    if(rst) begin
     counter <= 0;
  end
else begin
     counter <= counter +1;
   end
 end
 endmodule // clock_test 
```

在硬件中，当我点击 时`rst`，LED 会在计数时冻结。它并没有完全为零。Assert `rst`，你可以看到一些非零的随机模式，除非我 release ，否则它们不会改变`rst`。

我的问题是：当`if(rst) begin`块执行时，`counter`设置为 0。由于 LED 被分配为组合逻辑`counter`，它不应该立即反映吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:16:16.277

由于您进行了同步复位，因此复位值在复位断言后的下一个时钟沿之前不会生效。

当您断言重置时，这是否也会停止时钟？这似乎是最可能的原因，否则您的代码看起来是正确的（Greg 指出的语法错误除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:23:55.237

看起来 clk 是拼写错误，它是同步重置，而不是异步。

试试这个 ：

```
module clock_test(
  input        clk_in,
  input        rst,
  output [7:0] led
);

reg [23:0] counter;

assign led = counter[23:16];

always @(posedge clk_in or posedge rst)  begin
  if(rst) begin
    counter <= 0;
  end
  else begin
    counter <= counter +1;
  end
 end
 endmodule // clock_test 
```

注意：您正在使用高电平有效复位（1 表示复位）。如果您实际使用低电平有效（0 应用复位），则需要更改以下内容：

```
always @(posedge clk_in or negedge rst)  begin
  if(~rst) begin
    counter <= 0; 
```

# php - form_dropdown 中的 CodeIgniter 选择值

> ID：14445982
> 
> 赞同：3
> 
> 时间：2013-01-21T19:40:13.303
> 
> 标签：php, codeigniter, drop-down-menu

我的表单中有一个下拉字段，当我点击提交时，表单会通过验证，如果发生错误，则返回所有值。这项工作期待我的下拉菜单，我在下拉菜单中有 set_value 但它不起作用:(

这是我的代码

```
<?php echo form_dropdown('gender', $gender, set_value('gender')); ?> 
```

我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:12:14.630

这样做效果很好：

```
<?php
$selected = ($this->input->post('gender')) ? $this->input->post('gender') : 'M';  
$gender = array("M" => "Male", "F" => "Female");
echo form_dropdown('gender', $gender, $selected);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-14T22:57:11.480

如果要对特定字段使用 set_value，则需要为该字段设置验证规则。没有验证规则使 set_value 返回 NULL（或我没有检查的空字符串）

在我的控制器中，我添加了

```
$this->form_validation->set_rules('gender','Gender','required'); 
```

在我的 form_validation->run 行之前。然后我可以使用你的语法：

```
<?php echo form_dropdown('gender', $gender, set_value('gender')); ?> 
```

我发现 set_value() 有效，而不是 set_select()。请记住，您可以向 set_value 添加第二个参数，以在表单尚未验证时使用默认的男性或女性。我从后端数据库中提取现有值，然后将其传递进来：

```
<?php echo form_dropdown('gender', $gender, set_value('gender',$persons_gender_from_db)); ?> 
```

另请注意，设置值返回选项数组的索引（“M”或“F”），而不是显示的值（“男性”或“女性”）。对于包含两个性别的更多选项的列表，我使用包含选项的数据库表的主键，以确保唯一性。

虽然我想知道什么时候我会第一次被要求将“其他”添加到性别选择列表中......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T20:06:39.347

去除`set_value('gender')`

如：

```
<?php echo form_dropdown('gender', $gender, 'male'); ?> 
```

正如 Trung 所提到的，您可以将数组作为第三个参数传递给多个选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T19:51:43.210

使用`form_dropdown`，您必须使用`set_select`而不是`set_value`

[CodeIgniter 文档](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)

如果要在 上设置默认值，请将`form_dropdown`包含默认值的数组作为第三个参数传递给`form_dropdown`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-22T17:59:57.210

可能您没有验证表单。

用这个：

```
$this-> form_validation-> set_rules ('gender', 'Label', 'xss_clean'); 
```

要使用：

```
<? php echo form_dropdown ('gender', $ gender, set_value ('gender'));?> 
```

如果不是，请使用表单验证，请执行以下操作：

```
<? php echo form_dropdown ('gender', $ gender, $ this-> input-> post ('gender'));?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-10T20:42:36.990

CodeIgniter 具有`set_checkbox()`并且`set_radio()`您需要使用它来代替`set_value()`

但是`set_checkbox`有`set_radio`一些问题，并且似乎无法处理旨在处理创建和更新表单的表单。

这是修复。您可以将此代码放在帮助程序中或扩展 form_validation 类。

```
<?php echo form_dropdown('gender', $gender, set_it('gender','M',$person)); ?>

<?php
/*   $field is the field you're setting
 *   $value is the "selected" value from the previous form post
 *   $defaults is an object containing defaults in case the form is being used to create a new record. It could be filled with null values, or actual default values if you need that. 
 */
function set_it($field, $value, $defaults = null)
{
    // first, check to see if the form element was POSTed
    if (isset($_POST[$field]))
    {
        // does it match the value we provided?
        if ($_POST[$field] == $value)
        {
            // yes, so set the checkbox
            echo "checked='checked'"; // valid for both checkboxes and radio buttons
        }
    }
    // There was no POST, so check to see if the provided defaults contains our field
    elseif ( ! is_null($defaults) && isset($defaults->$field))
    {
        // does it match the value we provided?
        if ($defaults->$field == $value)
        {
            // yes, so set the checkbox
            echo "checked='checked'"; // valid for both checkboxes and radio buttons
        }
    }
}
?> 
```

# c# - 获取属性值

> ID：14445984
> 
> 赞同：0
> 
> 时间：2013-01-21T19:40:18.797
> 
> 标签：c#, xml, linq, linq-to-xml

基本上我有xml文件格式，喜欢：

```
<?xml version="1.0" encoding="utf-8" ?>
<retentions>
   <client id="1544">
      <facility id="5436">
         <retention period="23" />
      </facility>
   </client>
   <client id="7353">
      <facility id="3450">
        <retention period="3" />
     </facility>
   </client>
</retentions> 
```

我想获取所有属性的所有值，例如“1554”、“5436”、“23”等。

请使用 XDocument 而不是 XMLDocument。我的代码是错误的：

```
XDocument XDoc = XDocument.Load("my.xml");
   IEnumerable<XElement> results = (from el in XDoc.Root.Elements("retentions")
                                         select el); 
```

**更新：（**使用字典）

```
var g = from element in XDoc.Descendants("client")
                from ID in element.Attributes("id")
                from Facility in element.Attributes("facility")
                from Period in element.Attributes("period")
                select new { Key = ID.Value, Value = Period.Value }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T21:20:55.830

从 xml 文档中获取所有属性的一行：

```
var attributes = ((IEnumerable)xdoc.XPathEvaluate("//@*"))
                      .Cast<XAttribute>().Select(a => (string)a); 
```

UPDATE（所有节点属性的字典）

```
var attributes = xdoc.Descendants()
                    .GroupBy(e => e.Name)
                    .ToDictionary(g => g.Key.LocalName,
                                  g => g.SelectMany(x => x.Attributes())
                                        .Select(a => (string)a)
                                        .ToList());

List<string> attributesOfClient = attributes["client"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T21:11:18.067

要获取元素的属性：

```
XElement xElement;
IEnumerable attributes = xElement.Attributes(); 
```

获取文档的所有元素：

```
XDocument xDocument;
IEnumerable<XElement> elements = xDocument.Descendants(); 
```

然后，使用 LINQ：所有值都是：

```
from element in xDocument.Descendants()
from attribute in element.Attributes()
select attribute.Value; 
```

这是你想要的吗？

### 更新

```
var dictionary = xDocument.Descendants("client").ToDictionary(element => element, element =>
    (from descendant in element.Descendants()  // Gets descendant elements of element
    from attribute in descendant.Attributes()  // Gets all the attributes of the descendant
    select attribute.Value).ToList()); 
```

### 更新 2

```
var g = XDoc.Descendants("client")
        .ToDictionary(element => element.Attribute("id").Value,
                      element => new 
                                 {                                 
                                     element.Descendants("facility").First().Attribute("id").Value, 
                                     element.Descendants("retention").First().Attribute("period").Value 
                                  }); 
```

# c# - 数据未在 datagridview C# 上刷新

> ID：14445985
> 
> 赞同：0
> 
> 时间：2013-01-21T19:40:24.657
> 
> 标签：c#, datagridview

我会使用 LINQ 在 C# 中制作 DataGridView。然后，当用户双击它上面的数据时，它会弹出编辑数据的表格。我想要的是，在我关闭弹出窗口后，DataGridView 中的数据会自动刷新。

```
private void cooperationsDataGridView_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
        {
            frmKoperasi frm = new frmKoperasi (cooperationsDataGridView.CurrentRow.Cells["id"].Value.ToString());
            frm.FormClosed += delegate { refresh(sender,e); };
            frm.Show();                                            
        }

private void refresh(object sender, EventArgs e)
   {
       this.listKoperasi_Load(sender, e);           
   }

private void listKoperasi_Load(object sender, EventArgs e)
    {
        page = page - 1;
        var query = (from c in db_cooperations.cooperations
                     orderby c.id
                     select c).Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage);

        cooperationsBindingSource.DataSource = query;           
    } 
```

但是在我关闭编辑表单后，数据并没有刷新。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:50:03.873

最后，我只是从头开始重写所有内容，并且一切顺利。不知道为什么会这样：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:43:11.470

只需添加`.ToList()`

```
cooperationsBindingSource.DataSource = query.ToList(); 
```

# c - Linux内核模块编程Makefile错误

> ID：14445988
> 
> 赞同：0
> 
> 时间：2013-01-21T19:40:28.730
> 
> 标签：c, linux, module, compiler-errors, kernel

我正在尝试`linux kernel module`在`Fedora 14`. 我的内核版本是“ `2.6.35.14-97.fc14.i686`”，我指`/lib/modules/$(shell uname -r)/build M=$(PWD)`的是 make 文件中的模块来编译我的`hello.o`程序。

此“构建”文件将其显示为特殊文件并链接到`/lib/module/2.6....i686/`文件夹中的源。

当我编译我的代码得到以下错误。

```
make -C /lib/modules/2.6.35.14-97.fc14.i686/build M=/root/kernel modules
make: *** /lib/modules/2.6.35.14-97.fc14.i686/build: No such file or directory.  Stop. 
```

我的`Makefile`：

```
obj-m +=hello.o

all:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules 
```

请给我解决方案来运行这个模块程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:33:13.413

你应该只需要'kernel-devel'，你可以使用 yum 安装它。我使用 ubuntu，我只需要下载包 3.5.0-22-generic 就可以使用它，但是在谷歌上快速搜索“Fedora 内核开发模块”让我[在这里](http://docs.fedoraproject.org/en-US/Fedora_Core/6/html/Release_Notes/ar01s07s07.html) 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T13:55:19.113

编译你的内核并安装模块 INSTALL_MOD_PATH=/path/ 同时编译你的 hello world .link 模块路径，比如 MAKE -C KDIR=INSTALL_MOD_PATH M='$PWD' modules

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T14:33:46.070

按照其他人的建议，请安装“kernel-devel”。这对我来说非常有效。

您可以通过以下方式安装它：

```
yum install kernel-devel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-21T15:50:52.973

您需要安装正确版本的 kernel-devel，您应该将内核版本 ( **uname -r** ) 附加到 kernel-devel。

例如：我执行了“ **yum install kernel-devel-4.8.6-300.fc25.x86_64** ”并且成功了。

# css - CSS - 如果内容溢出到新行，则应用另一种样式

> ID：14445989
> 
> 赞同：9
> 
> 时间：2013-01-21T19:40:30.817
> 
> 标签：css

我有一个包含图像和文本的 div。如果文本只占一行，我希望文本垂直对齐到图像的中心。如果文本占用多于一行文本，我希望文本的顶部与图像的顶部对齐。

CSS 是否有办法检测文本何时换行到下一行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T19:45:08.010

不，CSS 无法检测到这样的事情。它只是一种样式语言，没有做决定的潜力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:48:39.790

不，这是不可能的。但是，可以防止单词“换行”或转到下一行。尽管并非所有浏览器都完全支持此功能。这称为[自动换行](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)。

# django - 使用 datetime 方法计算工作日

> ID：14445991
> 
> 赞同：1
> 
> 时间：2013-01-21T19:40:46.330
> 
> 标签：django, django-models, django-views

这与我之前提出的一个问题有关.. 好的，所以我有一个带有自定义保存方法的模型，该方法从另一个日期中减去一个日期并返回“total_days”：

```
class LeaveRequest(models.Model):
employee = models.ForeignKey(UserProfile)
supervisor = models.ForeignKey(UserProfile, related_name='+', blank=False, null=False)
submit_date = models.DateField(("Date"), default=datetime.date.today)
leave_type = models.CharField(max_length=64, choices=TYPE_CHOICES)
start_date = models.DateField(("Date"))
return_date = models.DateField(("Date"))
total_days = models.IntegerField()
notes = models.TextField(max_length=1000)

def __unicode__ (self):
    return u'%s %s' % (self.employee, self.submit_date)

def save(self, *args, **kwargs):
    self.total_days = (self.return_date - self.start_date).days
    super(LeaveRequest, self).save(*args, **kwargs)

    class Admin: 
            pass

    class Meta:
            ordering = ['-submit_date'] 
```

这很好用，只是它不考虑周末。我将如何调整逻辑（在模型中或视图中）以获得“total_days”减去周末天数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:02:43.250

您可以为此使用 Python 日期时间库。

有关 python 实现，请参阅[这篇文章](https://stackoverflow.com/a/3615984/1355555)。

```
from datetime import date, timedelta

...    

def save(self, *args, **kwargs):
    daygenerator = (self.start_date + timedelta(x+1) for x in xrange((
                    self.return_date - self.start_date).days))
    self.total_days = sum(1 for day in daygenerator if day.weekday() < 5)
    super(LeaveRequest, self).save(*args, **kwargs) 
```

# c# - 将两条短裤放入字节数组

> ID：14445992
> 
> 赞同：1
> 
> 时间：2013-01-21T19:40:46.593
> 
> 标签：c#, java

我需要一个包含 2 个短裤的 4 个字节的字节数组。我现在有这个：

```
MemoryStream str = new MemoryStream();
using (BinaryWriter writer = new BinaryWriter(stream)) {
     writer.Write((short) printscreen.Width);
     writer.Write((short) printscreen.Height);
}
byte[] bytes = str.ToArray(); 
```

在java中我使用了字节缓冲区。但是我应该为 c# 使用什么？

我通过套接字将此字节发送到 java 服务器。Java代码：

```
byte[] data = new byte[in.available()];
in.read(data);
ByteBuffer buffer = ByteBuffer.wrap(data);
System.out.println(buffer.getShort()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:57:04.180

来自 Java 的 [ByteBuffer 类](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)的文档：

> 原始值根据缓冲区的当前字节顺序转换为（或从）字节序列，可以通过 order 方法检索和修改。特定的字节顺序由 ByteOrder 类的实例表示。**字节缓冲区的初始顺序始终为 BIG_ENDIAN。**

从 .NET 的 [BinaryWriter.Write(short) 方法](http://msdn.microsoft.com/en-us/library/091b1s67.aspx)的文档中：

> BinaryWriter**以小端格式存储此数据类型。**

由于不能更改 BinaryWriter，因此需要更改 ByteBuffer 使用的字节顺序：

```
buffer.order(ByteOrder.LITTLE_ENDIAN); 
```

# ios - iOS：UIAlertView 关闭当前弹出框

> ID：14445994
> 
> 赞同：0
> 
> 时间：2013-01-21T19:40:58.777
> 
> 标签：ios

我目前在主场景上方的弹出窗口中有一个视图。当用户按下按钮时，新场景会在弹出窗口中弹出，他们可以按下不同的按钮。当按下某个按钮时，我会调用`UIAlertView`. 当`UIAlertView`被调用时，它会返回到 main`UIViewController`并关闭弹出框。

我怎样才能防止这种情况发生？所需的行为是`UIAlertView`让 消失并将弹出框留在视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:03:20.940

我弄清楚为什么它会这样。我通过 Storyboard 在按钮上设置了一个 segue。我还`UIAlertView`从同一个按钮以编程方式弹出了窗口。当用户按下按钮时，segue 会将弹出框关闭回主框，然后弹出`UIViewController`框`UIAlertView`。我删除了segue，一切似乎都很好。