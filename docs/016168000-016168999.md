# StackOverflow 问答 16168000-16168999

# ruby - 基于选择另一个下拉列表的下拉列表

> ID：16168011
> 
> 赞同：3
> 
> 时间：2013-04-23T11:19:17.987
> 
> 标签：ruby, ruby-on-rails-3

我是 ruby​​ on rails 的新手。**我想从模型**中填充下拉列表

 **```
 <%= collection_select(nil, :entity_id,  @entity,  :id, :name,
 {:prompt   => "Select an Entity"}, {:id => 'entity_select'}) %> 
```

基于另一个下拉列表

```
<%= collection_select(nil, :project_id,  @projects,  :id, :name,
 {:prompt   => "Select a Project"} %> 
```

在选择项目时，需要在下拉列表中显示相应的实体，但我会显示实体表中的所有实体。我不知道 Ajax 。还有其他简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:32:47.017

`grouped_collection_select`在这种特殊情况下使用它很好。更多细节在[Rails API Doc](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/grouped_collection_select)

还可以考虑观看Ryan Bates 的详细[Railscast](http://railscasts.com/episodes/88-dynamic-select-menus-revised)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:28:01.870

尝试这个：

```
collection_select(nil, :entity_id, Entity.all, :id, :name, :prompt => "Select an Entity") 
```**

# maven - 使用 maven-assembly-plugin 从指定的依赖项构建 .jar

> ID：16168017
> 
> 赞同：1
> 
> 时间：2013-04-23T11:19:38.557
> 
> 标签：maven, maven-assembly-plugin

我已经让 maven-assembly-plugin 工作了，构建了一个包含我的依赖项的大胖 .jar。有没有办法构建一个只包含我的项目代码和几个指定依赖项的 .jar，而不是全部？

冒着被告知“你做错了”的风险，我的意图是仅从我管理的那些项目中打包代码，并分别分发托管的依赖项，以由 Hadoop 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:27:00.260

关于[包含和排除工件](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/including-and-excluding-artifacts.html)，它提到了排除如下： -

```
<dependencySets>
  <dependencySet>
    ....
    <excludes>
      <exclude>commons-lang:commons-lang</exclude>
      <exclude>log4j:log4j</exclude>
    </excludes>
  </dependencySet>
  ....
</dependencySets> 
```

我希望这可能会有所帮助。

# python - 如果文件存在则删除文件；Python

> ID：16168018
> 
> 赞同：16
> 
> 时间：2013-04-23T11:19:38.963
> 
> 标签：python, file-io, try-catch

我想创建一个文件；如果它已经存在，我想删除它并重新创建它。我试过这样做，但它会引发 Win32 错误。我究竟做错了什么？

```
try:
    with open(os.path.expanduser('~') + '\Desktop\input.txt'):
        os.remove(os.path.expanduser('~') + '\Desktop\input.txt')
        f1 = open(os.path.expanduser('~') + '\Desktop\input.txt', 'a')
except IOError:
    f1 = open(os.path.expanduser('~') + '\Desktop\input.txt', 'a') 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-23T11:25:44.953

您正在尝试删除打开的文件，以及[`os.remove()`](http://docs.python.org/2/library/os.html#os.remove)状态文档...

> 在 Windows 上，尝试删除正在使用的文件会引发异常

您可以将代码更改为...

```
filename = os.path.expanduser('~') + '\Desktop\input.txt'
try:
    os.remove(filename)
except OSError:
    pass
f1 = open(filename, 'a') 
```

...或者您可以将所有内容替换为...

```
f1 = open(os.path.expanduser('~') + '\Desktop\input.txt', 'w') 
```

...这将在打开之前将文件截断为零长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:24:37.517

您试图在文件打开时删除它，您甚至不需要在`with`那里删除它：

```
path = os.path.join(os.path.expanduser('~'), 'Desktop/input.txt')
with open(path, 'w'): as f:
    # do stuff 
```

如果存在则删除

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:22:56.013

您可以将 open 与 mode 参数 = 'w' 一起使用。如果省略 mode，则默认为 'r'。

```
with open(os.path.expanduser('~') + '\Desktop\input.txt', 'w') 
```

> **w** 将文件截断为零长度或创建文本文件以进行写入。流位于文件的开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:22:26.527

Windows 不会让您删除打开的文件（除非它是使用不寻常的共享选项打开的）。您需要在删除它之前关闭它：

```
try:
    with open(os.path.expanduser('~') + '\Desktop\input.txt') as existing_file:
        existing_file.close()
        os.remove(os.path.expanduser('~') + '\Desktop\input.txt') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T11:26:32.860

尝试这个：

```
 from os import path, 
    PATH = os.path.expanduser('~') + '\Desktop\input.txt'
    if path.isfile(PATH):
       try:
          os.remove(os.path.expanduser('~') + '\Desktop\input.txt')
       except OSError:
          pass 
```

编辑：

```
from os import path, 
        PATH = os.path.expanduser('~') + '\Desktop\input.txt'
        try:
            os.remove(os.path.expanduser('~') + '\Desktop\input.txt')
        except OSError:
            pass 
```

# php - 用 php 上的数据库填充的菜单

> ID：16168021
> 
> 赞同：1
> 
> 时间：2013-04-23T11:19:55.423
> 
> 标签：php

所以我正在为一个站点构建一个菜单，该菜单将由数据库填充，当我查询数据库时，我得到类似这个数组的东西：

大批：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [nome] => Home
            [parent_id] => 0
        )

    [1] => Array
        (
            [id] => 2
            [nome] => Tutorials
            [parent_id] => 0
        )

    [2] => Array
        (
            [id] => 3
            [nome] => Photoshop
            [parent_id] => 2
        )

    [3] => Array
        (
            [id] => 4
            [nome] => Illustrato
            [parent_id] => 2
        )

    [4] => Array
        (
            [id] => 5
            [nome] => Web Design
            [parent_id] => 2
        )

    [5] => Array
        (
            [id] => 6
            [nome] => HTML
            [parent_id] => 5
        )

    [6] => Array
        (
            [id] => 7
            [nome] => CSS
            [parent_id] => 5
        )

) 
```

我想搜索它并只获取子项，例如：

```
function getChild($needle){
    ...
    return $array
} 
```

其中 $array, 是孩子的信息：

```
print_r(getChild(2)); 
```

会输出如下内容：

```
Array ( [0] => 3 [1] => 4 [2] => 5 ) 
```

在此示例中，它返回 id，但它可以返回一个数组，其中包含每个项目的完整信息...

我可以再次查询数据库并获得相同的结果，但恐怕这不是一个好习惯。例如，如果我有一个巨大的菜单，脚本会查询太多的数据库，这会大大减慢页面的渲染速度。

我正在寻找一种方法来做到这一点，我已经头晕目眩，筋疲力尽......

我意识到在这个例子中我没有链接，但最后添加它们很容易，这就是我现在不使用它们的原因：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:11:06.210

您需要将数组传递给函数 getChild()：

```
getChild($data, 1, 2) 
```

像这样的东西：

```
function getChild(){
    $results = [];
    $args = func_get_args();
    $arrays = array_shift($args);

    foreach ($arrays as $subarr) {
        $curr_results = [];
        $keys = array_keys($subarr);

        foreach ($args as $index) {
            $curr_results[] = $subarr[$keys[$index]];
        }
        $results[] = $curr_results;
    }

    return $results;
}

$data = [

["id" => 1, "nome" => "Home", "parent id" => 0],
["id" => 2, "nome" => "Tutorials", "parent id" => 0],
["id" => 3, "nome" => "Photoshop", "parent id" => 0],
["id" => 4, "nome" => "Illustrato", "parent id" => 2],

];

print_r(getChild($data, 1, 2));

--output:--

Array
(
    [0] => Array
        (
            [0] => Home
            [1] => 0
        )

    [1] => Array
        (
            [0] => Tutorials
            [1] => 0
        )

    [2] => Array
        (
            [0] => Photoshop
            [1] => 0
        )

    [3] => Array
        (
            [0] => Illustrato
            [1] => 2
        )

) 
```

我不得不说，这似乎是一种混淆代码的愚蠢方式。写起来会更清楚：

```
getChildData($data, "nome", "parent_id"); 
```

相反，您正在尝试访问具有数字索引的关联数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:38:57.457

它可能看起来像这样（假设我正确理解了您的问题）：

```
function getChild( $needle, $sourceArray )
{ 
    $ret = array();
    for( $i = $needle; $i < $sourceArray.count(); $i++ )
    { 
         array_push( $ret, $sourceArray[ $i ][ 'id ' ]) ;
    }

    return $ret;
} 
```

**已编辑：**函数不是*length()* - 它是*count()*

# excel - 如何在 Excel 中使用宏发送邮件时抑制 Outlook 警告

> ID：16168027
> 
> 赞同：7
> 
> 时间：2013-04-23T11:20:10.577
> 
> 标签：vba, excel, vba, outlook

我正在尝试使用 excel 中的宏发送电子邮件。

但是，当我运行此代码时，我的邮件客户端（即 MS Outlook）会显示类似于以下内容的弹出警告
`Someone is tying to send mail on behalf of you. select yes or no`

有没有办法使用[vba](/questions/tagged/vba "显示标记为“vba”的问题")来抑制该警告，以便发送电子邮件没有任何问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-16T00:53:57.100

我知道的最好的方法是创建一个 Outlook 应用程序项目，创建消息，显示消息并使用 sendkeys 发送消息（相当于键入 alt s）。

缺点是 sendkeys 方法可能有点错误。为了使它更健壮，我得到了邮件项目的检查器，即它所在的窗口，并在调用 sendkeys 之前立即激活它。代码如下所示：

```
Dim olApp As outlook.Application
Dim objNS As Outlook.Namespace
Dim objMail As Outlook.MailItem
Dim objSentItems As Outlook.MAPIFolder
Dim myInspector As Outlook.Inspector

'Check whether outlook is open, if it is use get object, if not use create object
On Error Resume Next
Set olApp = GetObject(, "Outlook.Application")
On Error GoTo 0
If olApp Is Nothing Then
    Set olApp = CreateObject("Outlook.Application")
End If

Set objNS = olApp.GetNamespace("MAPI")
objNS.Logon

'Prepare the mail object    
Set objMail = olApp.CreateItem(olMailItem)

With objMail
.To = <insert recipients name as string>
.Subject = <insert subject as string>
.Body = <insert message as string>
.Display   
End With

'Give outlook some time to display the message    
Application.Wait (Now + TimeValue("0:00:05"))

'Get a reference the inspector obj (the window the mail item is displayed in)
Set myInspector = objMail.GetInspector

'Activate the window that the mail item is in and use sendkeys to send the message
myInspector.Activate
SendKeys "%s", True 
```

然后我通常有代码检查已发送文件夹中的项目数量是否增加，如果没有，我让应用程序再次等待并重复最后两行代码并重新检查已发送文件夹中的消息数量是否增加。该代码最多执行 5 次。第 5 次后会出现一个消息框，警告消息可能尚未发送。

虽然我曾经在我们的系统特别慢时看到警告消息，但我从未发现这种方法无法从 excel 发送消息，但经过调查发现消息已发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:37:11.057

您需要使用 Redemption DLL 来禁用此警告...

下载 [http://www.dimastr.com/redemption](http://www.dimastr.com/redemption)

我创建了一种在机器上自动安装此 DLL 的方法，您可以尝试...

[http://www.officevb.com/2011/02/copiando-e-registrando-componentes-na.html](http://www.officevb.com/2011/02/copiando-e-registrando-componentes-na.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-09T05:02:22.413

添加到 Julia Grant 的回答和回答 dsauce

直接使用 Julia 代码时出现错误`RegisterWindowMessage` 这应该通过 在声明部分替换`Private Declare Function`为`Declare PtrSafe Function`

```
Option Compare Database
' Declare Windows' API functions
Declare PtrSafe Function RegisterWindowMessage _
        Lib "user32" Alias "RegisterWindowMessageA" _
        (ByVal lpString As String) As Long

 Declare PtrSafe Function FindWindow Lib "user32" _
            Alias "FindWindowA" (ByVal lpClassName As Any, _
            ByVal lpWindowName As Any) As Long

Declare PtrSafe Function SendMessage Lib "user32" _
        Alias "SendMessageA" (ByVal hwnd As Long, _
        ByVal wMsg As Long, ByVal wParam As Long, _
        lParam As Any) As Long

Function TurnAutoYesOn()
Dim wnd As Long
Dim uClickYes As Long
Dim Res As Long
uClickYes = RegisterWindowMessage("CLICKYES_SUSPEND_RESUME")
wnd = FindWindow("EXCLICKYES_WND", 0&)
Res = SendMessage(wnd, uClickYes, 1, 0)

End Function

Function TurnOffAutoYes()
Dim wnd As Long
Dim uClickYes As Long
Dim Res As Long
uClickYes = RegisterWindowMessage("CLICKYES_SUSPEND_RESUME")
wnd = FindWindow("EXCLICKYES_WND", 0&)
Res = SendMessage(wnd, uClickYes, 0, 0)
End Function

Function fEmailTest()

TurnAutoYesOn  '*** Add this before your email has been sent

Set appOutLook = CreateObject("Outlook.Application")
Set MailOutLook = appOutLook.CreateItem(olMailItem)
With MailOutLook
    .To = " <Receipient1@domain.com>;  <Receipient2@domain.com"
    .Subject = "Your Subject Here"
    .HTMLBody = "Your message body here"
    .Send
End With

TurnOffAutoYes '*** Add this after your email has been sent

End Function 
```

我知道线程很旧，但它可能会帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T13:57:08.683

几年前，我在互联网上的某个地方找到了下面的代码。它会自动为您回答“是”。

```
Option Compare Database
' Declare Windows' API functions
Private Declare Function RegisterWindowMessage _
        Lib "user32" Alias "RegisterWindowMessageA" _
        (ByVal lpString As String) As Long

 Private Declare Function FindWindow Lib "user32" _
            Alias "FindWindowA" (ByVal lpClassName As Any, _
            ByVal lpWindowName As Any) As Long

Private Declare Function SendMessage Lib "user32" _
        Alias "SendMessageA" (ByVal hwnd As Long, _
        ByVal wMsg As Long, ByVal wParam As Long, _
        lParam As Any) As Long

Function TurnAutoYesOn()
Dim wnd As Long
Dim uClickYes As Long
Dim Res As Long
uClickYes = RegisterWindowMessage("CLICKYES_SUSPEND_RESUME")
wnd = FindWindow("EXCLICKYES_WND", 0&)
Res = SendMessage(wnd, uClickYes, 1, 0)

End Function

Function TurnOffAutoYes()
Dim wnd As Long
Dim uClickYes As Long
Dim Res As Long
uClickYes = RegisterWindowMessage("CLICKYES_SUSPEND_RESUME")
wnd = FindWindow("EXCLICKYES_WND", 0&)
Res = SendMessage(wnd, uClickYes, 0, 0)
End Function

Function fEmailTest()

TurnAutoYesOn  '*** Add this before your email has been sent

Set appOutLook = CreateObject("Outlook.Application")
Set MailOutLook = appOutLook.CreateItem(olMailItem)
With MailOutLook
    .To = " <Receipient1@domain.com>;  <Receipient2@domain.com"
    .Subject = "Your Subject Here"
    .HTMLBody = "Your message body here"
    .Send
End With

TurnOffAutoYes '*** Add this after your email has been sent

End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-27T20:12:08.513

我检查了很多方法，但这是最好的。

您只需要创建 Excel 的最小化窗口代码，然后将其最大化以便工作，并在脚本点击“发送”后添加一点延迟。

只要确保在运行时不要触摸任何鼠标或键盘。我每天可以自动发送 25 多封没有错误的电子邮件。

```
'Excel Minimized
     ActiveWindow.WindowState = xlMinimized

'Outlook Email Shown
     .Display
     Application.Wait (Now + TimeValue("0:00:02"))
     Application.SendKeys "%s"
     Application.Wait (Now + TimeValue("0:00:01"))

'Excel Maximized
     ActiveWindow.WindowState = xlMaximized 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-08T12:57:53.180

此 Outlook VBA 将加载一个带有存储为记录的电子邮件的 excel 文件并发送所有这些文件。

```
Option Explicit

 Private Const xlUp As Long = -4162

Sub SendEmailsFromExcel()

    Dim xlApp As Object

    Dim isEmailTo As String    ' Col A
    Dim isSubject As String    ' Col B
    Dim isMessage As String    ' Col C

    Dim i As Integer
    Dim objMsg As MailItem
    Set objMsg = Application.CreateItem(olMailItem)

    Dim emailsMatrix As Variant

    Dim objWB As Object
    Dim objWs As Object
    Dim FileStr As String

    FileStr = "C:\Users\...\Documents\EmailsInExcel.xlsx"

    Set xlApp = CreateObject("excel.application")

    With xlApp
        .EnableEvents = False
        .DisplayAlerts = False
    End With

    Set objWB = xlApp.Workbooks.Open(FileStr)
    Set objWs = objWB.Sheets(1)

    ' Matrix load:  A - Email Address, B - Subject, C - Body
    emailsMatrix = objWs.Range("A1:C" & xlApp.Cells(objWs.Rows.Count, "A").End(xlUp).Row)

    objWB.Close

    Set objWB = Nothing
    xlApp.Quit
    Set xlApp = Nothing

'   Done getting Excel emails file.

    For i = 1 To UBound(emailsMatrix)
        isEmailTo = emailsMatrix(i, 1)
        isSubject = emailsMatrix(i, 2)
        isMessage = emailsMatrix(i, 3)

        objMsg.Recipients.Add isEmailTo
        objMsg.Subject = isSubject
        objMsg.Body = isMessage
        objMsg.Send
    Next i

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-09T20:41:47.510

由于宏未由受信任的发布者签名，该窗口开始弹出。此列表在您的 Outlook 设置中。您必须对宏进行签名并将签名者输入到您信任的发布者列表中。或者全局允许未签名的宏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-25T18:21:33.957

几个选项：

1.  使用最新的防病毒软件（此时 Outlook 不会显示提示）
2.  扩展 MAPI（仅限 C++ 或 Delphi，不适用于 VB 脚本或 .Net 语言）。但是，您可以使用像[Redemption](http://www.dimastr.com/redemption)这样的包装器，它使用扩展 MAPI，但可以从包括 VBS 在内的任何语言访问。
3.  [ClickYes 之](http://www.contextmagic.com/express-clickyes/)类的产品。

有关讨论和可用选项列表，请参见[http://www.outlookcode.com/article.aspx?id=52 。](http://www.outlookcode.com/article.aspx?id=52)

# objective-c - 目标 C：解析子 json 对象

> ID：16168028
> 
> 赞同：0
> 
> 时间：2013-04-23T11:20:10.957
> 
> 标签：objective-c, json

我有这个（很长的）json 文件需要解析

```
{
  "_status": "success",
  "_data": {
    "clients": [{
        "id": 1,
        "name": "Audi Bank",
        "contacts": [{
            "id": 1,
            "first_name": "Raymond",
            "last_name": "Audi",
            "templates": [{
                "id": 1,
                "name": "SecurityQuestionnaire",
                "title": "Security Questionnaire",
                "creation_date": "2012-08-12",
                "sections": [{
                    "id": 2,
                    "title": "Personal questions",
                    "header": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "footer": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "questions": [{
                        "id": 1,
                        "type": "MCQ_question",
                        "value": "What type of firewall would you like to install?",
                        "answers": [{
                            "id": 1,
                            "answer": "Network layer or packet filters"
                          }, {
                            "id": 2,
                            "answer": "Application-layer"
                          }, {
                            "id": 3,
                            "answer": "Proxies"
                          }, {
                            "id": 4,
                            "answer": "Network address translation"
                          }
                        ]
                      }, {
                        "id": 3,
                        "type": "numerical_question",
                        "value": "How many posts do you have approximatively in your company?"
                      }, {
                        "id": 4,
                        "type": "short_answer_question",
                        "value": "What is the name of your IT manage?"
                      }
                    ]
                  }, {
                    "id": 5,
                    "title": "Professional experience",
                    "questions": [{
                        "id": 6,
                        "type": "long_answer_question",
                        "value": "Tell us about your business needs"
                      }, {
                        "id": 8,
                        "type": "association",
                        "value": "Link the department with its number of switches",
                        "answers": {
                          "left": [{
                              "id": 6,
                              "answer": "Financial Department"
                            }, {
                              "id": 7,
                              "answer": "Marketing Department"
                            }, {
                              "id": 8,
                              "answer": "HR Department"
                            }
                          ],
                          "right": [{
                              "id": 9,
                              "answer": "over 100"
                            }, {
                              "id": 10,
                              "answer": "under 100"
                            }
                          ]
                        }
                      }, {
                        "id": 7,
                        "type": "text",
                        "title": "Remarks",
                        "value": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                      }
                    ]
                  }
                ]
              }, {
                "id": 2,
                "name": "bbbb",
                "title": "bbb",
                "creation_date": "2000-09-11",
                "sections": [{
                    "id": 2,
                    "title": "Personal questions",
                    "header": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "footer": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "questions": [{
                        "id": 1,
                        "type": "MCQ_question",
                        "value": "What type of firewall would you like to install?",
                        "answers": [{
                            "id": 1,
                            "answer": "Network layer or packet filters"
                          }, {
                            "id": 2,
                            "answer": "Application-layer"
                          }, {
                            "id": 3,
                            "answer": "Proxies"
                          }, {
                            "id": 4,
                            "answer": "Network address translation"
                          }
                        ]
                      }, {
                        "id": 3,
                        "type": "numerical_question",
                        "value": "How many posts do you have approximatively in your company?"
                      }, {
                        "id": 4,
                        "type": "short_answer_question",
                        "value": "What is the name of your IT manage?"
                      }
                    ]
                  }, {
                    "id": 5,
                    "title": "Professional experience",
                    "questions": [{
                        "id": 6,
                        "type": "long_answer_question",
                        "value": "Tell us about your business needs"
                      }, {
                        "id": 8,
                        "type": "association",
                        "value": "Link the department with its number of switches",
                        "answers": {
                          "left": [{
                              "id": 6,
                              "answer": "Financial Department"
                            }, {
                              "id": 7,
                              "answer": "Marketing Department"
                            }, {
                              "id": 8,
                              "answer": "HR Department"
                            }
                          ],
                          "right": [{
                              "id": 9,
                              "answer": "over 100"
                            }, {
                              "id": 10,
                              "answer": "under 100"
                            }
                          ]
                        }
                      }, {
                        "id": 7,
                        "type": "text",
                        "title": "Remarks",
                        "value": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }, {
        "id": 2,
        "name": "Byblos Bank",
        "contacts": [{
            "id": 2,
            "first_name": "Antoine",
            "last_name": "Atallah",
            "templates": [{
                "id": 1,
                "name": "SecurityQuestionnaire",
                "title": "Security Questionnaire",
                "creation_date": "2012-08-12",
                "sections": [{
                    "id": 2,
                    "title": "Personal questions",
                    "header": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "footer": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "questions": [{
                        "id": 1,
                        "type": "MCQ_question",
                        "value": "What type of firewall would you like to install?",
                        "answers": [{
                            "id": 1,
                            "answer": "Network layer or packet filters"
                          }, {
                            "id": 2,
                            "answer": "Application-layer"
                          }, {
                            "id": 3,
                            "answer": "Proxies"
                          }, {
                            "id": 4,
                            "answer": "Network address translation"
                          }
                        ]
                      }, {
                        "id": 3,
                        "type": "numerical_question",
                        "value": "How many posts do you have approximatively in your company?"
                      }, {
                        "id": 4,
                        "type": "short_answer_question",
                        "value": "What is the name of your IT manage?"
                      }
                    ]
                  }, {
                    "id": 5,
                    "title": "Professional experience",
                    "questions": [{
                        "id": 6,
                        "type": "long_answer_question",
                        "value": "Tell us about your business needs"
                      }, {
                        "id": 8,
                        "type": "association",
                        "value": "Link the department with its number of switches",
                        "answers": {
                          "left": [{
                              "id": 6,
                              "answer": "Financial Department"
                            }, {
                              "id": 7,
                              "answer": "Marketing Department"
                            }, {
                              "id": 8,
                              "answer": "HR Department"
                            }
                          ],
                          "right": [{
                              "id": 9,
                              "answer": "over 100"
                            }, {
                              "id": 10,
                              "answer": "under 100"
                            }
                          ]
                        }
                      }, {
                        "id": 7,
                        "type": "text",
                        "title": "Remarks",
                        "value": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
} 
```

我面临的问题是我有很多子 json 对象我写了这个函数来解析这个文件

```
-(void)readJson
{
    //Emplacement du json file
    NSString *filePath = [[NSBundle mainBundle]pathForResource:@"allClients?userId=2" ofType:@"json"];
    //Contenu du fichier
    NSString *jsonString = [NSString stringWithContentsOfFile:filePath];
    NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding] options:kNilOptions error:&error];

    id wordParam = [[json objectForKey:@"words"] objectForKey:@"word"];

    if ([wordParam isKindOfClass:[NSArray class]]) {
        NSDictionary *word = [(NSArray *)wordParam objectAtIndex:0];
    } else if ([wordParam isKindOfClass:[NSDictionary class]]) {
        NSDictionary *word = (NSDictionary *)wordParam;
    } else {
        NSLog(@"error. %@ is not an array or dictionary", wordParam);
    }

    //_data
    NSDictionary *items = [json objectForKey:@"_data"];
    for (NSDictionary *item in items)
    {
        NSDictionary *clients = [items objectForKey:@"clients"];
        for(NSDictionary *client in clients)
        {
        NSString * clientId=[client objectForKey:@"id"];
        NSString * name=[client objectForKey:@"name"];
        @try{
        NSDictionary *contacts=[clients objectForKey:@"contacts"];
            }
            @catch (NSException *ex) {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"%@",ex]
                                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                [alert show];
            }

        }
    }
} 
```

这个函数在这里给了我一个例外：

```
NSDictionary *contacts=[clients objectForKey:@"contacts"]; 
```

我是新手 感谢您的帮助和耐心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:14:10.240

> NSDictionary *contacts=[clients objectForKey:@"contacts"];

应该是这样`[client objectForKey:@"contacts"]`的。注意`client`单数，而不是复数。

# c# - Windows 8 应用商店应用关闭时保存数据

> ID：16168030
> 
> 赞同：5
> 
> 时间：2013-04-23T11:20:18.470
> 
> 标签：c#, windows-8, windows-store-apps, winrt-xaml

我编写了一个 Windows 8 商店应用程序 (XAML/C#)，我在 Microsoft Surface 上运行它。该应用程序基本上是一个没有任何保存按钮的数据输入应用程序。在页面之间跳转或应用程序暂停时会自动执行保存。

但是，我似乎无法捕捉到的一种情况是用户关闭应用程序时（当用户从​​屏幕的顶部滑动到底部时）。

所以目前我订阅了 App.Current.Suspending 并在这里调用 save ：

```
App.Current.Suspending += Current_Suspending;                  

void Current_Suspending(object sender, Windows.ApplicationModel.SuspendingEventArgs e)
{
    Save();
} 
```

我还覆盖了 SaveState 方法并在此处调用 Save：

```
protected override void SaveState(Dictionary<string, object> pageState)
{
    Save();
    base.SaveState(pageState);
} 
```

但是当应用程序关闭时，这些方法都不会被调用。

有人知道应用程序关闭时触发的事件吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:35:41.333

[http://msdn.microsoft.com/en-US/library/windows/apps/xaml/hh465115.aspx](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/hh465115.aspx)

在底部，它包含以下注释：

*关于使用 Visual Studio 进行调试的说明：Visual Studio 阻止 Windows 挂起附加到调试器的应用。这是为了允许用户在应用程序运行时查看 Visual Studio 调试 UI。调试应用时，可以使用 Visual Studio 向其发送挂起事件。确保显示调试位置工具栏，然后单击挂起图标。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:33:13.367

我讨厌简单地指出有关 Windows 应用商店应用程序生命周期的文档，但文档非常清楚。当通过按 ALT-F4 关闭应用程序时，没有处理任何特殊事件 Windows Store 应用程序假定只是暂停或根本不运行。这意味着您应该经常处理保存用户数据和/或提供保存此类数据的方法。

> 没有特殊事件表明用户已关闭应用程序。用户关闭应用程序后，它会暂停并终止，在大约 10 秒内进入 NotRunning 状态。如果一个应用已经为 Suspending | 注册了一个事件处理程序。挂起事件，当应用程序挂起时调用。您可以使用此事件处理程序将相关的应用程序和用户数据保存到持久存储中。
> 
> 您应该决定您的应用在被用户关闭后激活时的行为方式。应用程序是由 Windows 还是由用户终止可能对您没有任何影响。如果您的应用在用户关闭时与 Windows 关闭时需要执行不同的操作，则激活事件处理程序可以确定应用是由用户终止还是由 Windows 终止。请参阅 ApplicationExecutionState 枚举的文档中对 ClosedByUser 和 Terminated 状态的描述。
> 
> 除非绝对必要，否则应用程序不应以编程方式自行关闭。例如，如果一个应用程序检测到内存泄漏，它可以自行关闭以确保用户个人数据的安全。当您以编程方式关闭应用程序时，Windows 会将其视为应用程序崩溃。

[资源](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)

# android - 即使没有更改文本，android editText onTextChanged也会被调用数十次

> ID：16168033
> 
> 赞同：1
> 
> 时间：2013-04-23T11:20:22.827
> 
> 标签：android, android-edittext

我正在我的应用程序中实现一个购物车。在我的购物车视图中，我有一个带有 editText 的产品列表，因此用户可以更改其数量。我需要监听“数量变化”事件，以便相应地更新我的购物车对象。

我正在尝试使用 onTextChanged 事件，但它没有按预期工作。就在我打开购物车视图时，该事件被触发了数十次，并完全破坏了我的产品数量值。

我怎样才能确保值真的改变了？

这是我的代码：

**我的 CartItemsListAdapter（负责渲染购物车的每一行）。**

```
public class CartItemsListAdapter extends ArrayAdapter<CartItem> implements OnClickListener{

    private ArrayList<CartItem> cartItems;

    /**
     * view holder for caching the view elements
     */
    static class CartItemViewHolder {   
           TextView tvProductName;
           TextView tvShopName;
           TextView tvSubTotal;
           EditText edQuantity;
           Button btnRemoveFromCart;    
           ImageView ivProduct;
    }

    /**
     * default constructor
     * @param context
     * @param textViewResourceId
     * @param cartItems
     */
    public CartItemsListAdapter(Context context, int textViewResourceId,
            ArrayList<CartItem> cartItems) {

        super(context, textViewResourceId, cartItems);
        this.cartItems = cartItems;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        CartItemViewHolder viewHolder;
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);

            v = vi.inflate(R.layout.cart_item, null);
            viewHolder = new CartItemViewHolder();
            viewHolder.tvProductName = (TextView) v.findViewById(R.id.cart_item_product_name);
            viewHolder.tvShopName = (TextView)v.findViewById(R.id.cart_item_shop_name);
            viewHolder.tvSubTotal= (TextView)v.findViewById(R.id.cart_item_subtotal);
            viewHolder.edQuantity = (EditText)v.findViewById(R.id.cart_item_product_quantity);
            //viewHolder.btnRemoveFromCart = (Button)v.findViewById(R.id.cart_item_remove_item);
            viewHolder.ivProduct = (ImageView)v.findViewById(R.id.cart_item_product_image);

            v.setTag(viewHolder);

        }else{
            viewHolder = (CartItemViewHolder) v.getTag();
        }

        CartItem item = cartItems.get(position);
        if(item != null){
            viewHolder.tvProductName.setText(item.getProduct().getName());
            viewHolder.edQuantity.setText(Integer.toString(item.getQuantity()));
            viewHolder.tvSubTotal.setText(Double.toString(item.getSubTotal()));
            viewHolder.tvShopName.setText(item.getProduct().getShop().getName());

            UrlImageViewHelper.setUrlDrawable(viewHolder.ivProduct, item.getProduct().getImage());

            viewHolder.edQuantity.addTextChangedListener(new CartItemQuantityChangeListener(cartItems,item));

        }

        return v;
    }

    @Override
    public int getCount() {
        return cartItems.size();
    }

    @Override
    public CartItem getItem(int position) {
        return cartItems.get(position);
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }

} 
```

**我的 TextChanged 监听器类**

```
public class CartItemQuantityChangeListener implements TextWatcher {

    private ArrayList<CartItem> cartItems;
    private CartItem item;

    public CartItemQuantityChangeListener(ArrayList<CartItem> cartItems,
            CartItem item) {
        this.cartItems = cartItems;
        this.item = item;
    }

    public void afterTextChanged(Editable s) {

        try {

            int quantity = Integer.parseInt(s.toString());
            Log.d(Constants.LOG_TAG, "quantity changed" + quantity);

            int index = this.cartItems.indexOf(item);
            Log.d(Constants.LOG_TAG, "INDEX" + index);
            // this.cartItems.get(index).setQuantity(quantity);

            /*
             * for(CartItem i : this.cartItems){
             * Log.d(Constants.LOG_TAG,item.getProduct().getName() + " : " +
             * i.getQuantity()); }
             */

        } catch (NumberFormatException ex) {

        }
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:28:10.180

将编辑文本中写入的最后一个值保存在字符串中，每次调用 onTextChanged 时，您都会将新值与旧值进行比较。如果新值不同，那就做点什么。如果它的价值相同，你什么都不做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T07:27:23.797

> 您应该从代码中的 get view 方法中删除这一行。

```
 viewHolder.edQuantity.addTextChangedListener(new 
CartItemQuantityChangeListener(cartItems,item)); 
```

> 那么它不会为每个视图添加多个文本观察器..在适配器构造函数中添加上面的行然后它会正常工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:03:18.043

我想每次你构建一个新视图时，你都会`TextWatcher`在`TextView`. 所以最后，该`afterTextChanged`方法被调用的次数等于列表中的项目数。

# django - django-cms 中的 TinyMCE

> ID：16168034
> 
> 赞同：0
> 
> 时间：2013-04-23T11:20:24.630
> 
> 标签：django, tinymce, django-cms

我试图让 django-cms 使用 TinyMCE 作为文本编辑器，而不是默认的 Wymedit。[根据文档](https://django-cms.readthedocs.org/en/2.4.0.rc1/getting_started/plugin_reference.html#text)，这应该是一件容易的工作，但如果我跟着他们，我只会得到一个空的 div 而不是编辑器。我还添加`<script type="text/javascript" src="{{ MEDIA_URL }}js/tiny_mce/tiny_mce.js"></script>`到`admin/base.html`模板中，并且包含了 js 文件，但它不起作用。

任何想法让它工作的简单方法？

* * *

细节：

版本：

*   姜戈：1.4.5
*   django-cms：2.3.1
*   django-tinymce：1.4

我做了什么（我遵循了[django-cms 文档](https://django-cms.readthedocs.org/en/2.3.1/getting_started/plugin_reference.html#text)）：

*   添加到`settings.py`：

`TINYMCE_JS_URL = 'http://mysite.com/media/js/tiny_mce/tiny_mce_src.js'`

`TINYMCE_JS_ROOT = 'http://mysite.com/media/js/tiny_mce/'`

`CMS_USE_TINYMCE = True`

*   添加`tinymce`到`INSTALLED_APPS`_`settings.py`

*   添加`(r'^tinymce/', include('tinymce.urls'))`到`urlpatterns`_`urls.py`

*   添加到`templates/admin.base.html`：

`<script type="text/javascript" src="{{ MEDIA_URL }}js/tiny_mce/tiny_mce.js"></script>`

（此步骤不在文档中，这是我`tiny_mce.js`在浏览器中加载的唯一方法）

*   将tinymce文件复制到`MEDIA_ROOT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T13:04:34.550

所以我也再次尝试自己安装 django tinymce。

我包含在我安装的应用程序中的这段代码

```
INSTALLED_APPS = (
    'tinymce',
    'cms.plugins.text',
) 
```

这段代码到我的网址模式

```
(r'^tinymce/', include('tinymce.urls')), 
```

并且正在我的开发环境中工作。其他配置点可选

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T02:58:49.643

我很惊讶你没有收到 404 错误。AFAIK django-cms 和 django-tinymce 查看静态文件位置，而不是媒体。因此，要安装 tinymce，我需要运行

```
python manage.py collectstatic 
```

也许这有帮助。如果没有，它可能会帮助其他人查看这个问题

# crystal-reports - 水晶报表子报表重叠

> ID：16168036
> 
> 赞同：3
> 
> 时间：2013-04-23T11:20:27.090
> 
> 标签：crystal-reports, report, crystal-reports-8.5

我开发了带有 4 个子报告的水晶报告。子报表的数据量取决于报表的需求。当我将这些子报告放入详细信息块中时，它会根据它们的数据量相互重叠。当我通过添加更多节将它们放入单独的页眉时，它在每个页面中重复，因为报告有多个页面。如何克服这个问题？版本水晶报表8.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T03:25:17.700

Yaa .Thanks Poweruser 和 EvilBob22 我得到了答案。可以通过在详细信息部分单击鼠标右键 -> 格式部分 -> 详细信息块 -> 插入部分来拆分它。然后将子报告拖入每个部分。欲了解更多信息 [http://flylib.com/books/en/4.229.1.66/1/](http://flylib.com/books/en/4.229.1.66/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:29:26.783

可以通过在Section Expert上单击鼠标右键-> Deatils->在Deatils中添加New Section来拆分...所以有两个部分，即Datil a和Detail b。在详细信息 a 中放置您的主要报告，在详细信息 b 中放置您的子报告......

我希望这个解决方案对你有帮助......

# java - 将getter值保存在变量中而不是多次调用get更好吗？

> ID：16168037
> 
> 赞同：1
> 
> 时间：2013-04-23T11:20:29.723
> 
> 标签：java, variables, optimization, getter

我有项目项目；其中有 getName() 吸气剂。我需要在某个循环中访问 item.getName() 。每次在循环中调用 item.getName() 更好，还是将其保存在附加变量中并使用该变量，有区别吗？

例如：项目项目；

```
String itemName=item.getName();

for(int i=0;  i< itemArray.size();i++){

    itemArray.get(i).setName(itemName);
} 
```

或者

```
for(int i=0; i< itemArray.size();i++){

    itemArray.get(i).setName(item.getName());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:22:31.343

如果您要`item`在循环中一遍又一遍地重新分配，那么您需要使用`item.getName()`，否则您可以将值存储在局部变量中，然后在循环中使用它。如果你不打算改变它的价值，那么你也可以做到`final`。

**例如：**

```
final String name = item.getName();
while(comdition){ // some loop
    // something involving name. But not modifying it.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:24:39.370

当您使用 item.getName() 时，您将始终获得当前的新值。在迭代它时将其保存到一个附加变量中可能不会看到变化。如果这是您的意图，则可以将其声明为最终的，因为它将是线程安全的。否则我不认为这将是一个很大的性能问题。继续使用吸气剂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:26:43.860

你更喜欢哪一个？

```
String itemName;

for(int i=0;i<itemArray.size();i++){
   itemName=itemArray.get(i).getName();
   System.out.println(itemName);
} 
```

或者

```
for(int i=0;i<itemArray.size();i++){
   System.out.println(itemArray.get(i).getName);
} 
```

# ios - 如何比较 cookie 域和 NSURL？

> ID：16168041
> 
> 赞同：0
> 
> 时间：2013-04-23T11:20:39.310
> 
> 标签：ios, objective-c

我只想从 cookie 中获取访问令牌，在 if 条件下我想比较 cookie domain 和 given `URL`。我正在尝试使用以下代码：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    NSURL *url = [[NSURL alloc] initWithString:websiteUrl];

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestObj];  
}

- (NSString*)getTokenFromCookie {

    NSHTTPCookie *cookie;

    NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];

    for (cookie in [cookieJar cookies]) {

        NSLog(@"%@",cookie);

        //Here to compare cookie domain and above given URL

        if ([[cookie domain] isEqualToString:domain]) {

            if ([[cookie name] isEqualToString:@"oauth_token"]) {

                return [cookie value];
            }
        }
    }
    return nil;
} 
```

# java - ForkJoinPool 中的守护线程

> ID：16168042
> 
> 赞同：0
> 
> 时间：2013-04-23T11:20:39.727
> 
> 标签：java, multithreading, daemon, java.util.concurrent, fork-join

根据 Java Doc 7：

> 因为 ForkJoinPool 在守护模式下使用线程，所以通常不需要在程序退出时显式关闭这样的池

没有其他优势吗？守护线程是否仅与“直到系统处于活动状态”中的正常线程不同？这只意味着我不必关心关闭 ForkJoinPool 吗？

有人可以清理我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:51:12.093

守护进程在 Java 中影响很小。如果您不关闭池，那么您将无法恢复它使用的所有内存。这包括线程。

# php - 在 $ajax 中从链接检索值失败

> ID：16168044
> 
> 赞同：3
> 
> 时间：2013-04-23T11:20:50.020
> 
> 标签：php, javascript, ajax

我正在尝试将产品 ID 分配给链接的值并传递给 $ajax，以便 $ajax 可以使用此变量并将其传递给另一个 php 以更新购物车信息。但是，不幸的是，我没有这样做。如果我简单地在 $ajax 中设置 var 值，它就可以工作。下面是将值传递给 $ajax 的链接。

```
<a id ="'.$row["id"].'" value ="100" href="javascript:void(0)" onclick="myCall();"> 
```

在我使用的 Ajax 中：

```
script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
function myCall() {
//var value = 50;
var value = $(this).attr('value');
    var request = $.ajax({
        url: "ajax.php",
        type: "GET",
        data: ({id: value}),
        //dataType: "html"
    });

    request.done(function(msg) {
        $(".bottomcorners").html(msg);          
    });

    request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
    });
} 
```

它失败。

有人可以帮我吗？而且，顺便说一句，我尝试使用`.load()`. 它有效，但问题是它只是向我展示了我添加的产品。似乎对服务器没有影响。无论如何，我的第二个问题是`$ajax`能让我更新服务器中的购物车吗？我使用的是旧版本的 WAMP(1.6.4)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:24:48.943

您应该在锚点中传递 this 的值：

```
<a id ="'.$row["id"].'" value ="100" href="javascript:void(0)" onclick="myCall(this);"> 
```

在调用函数时应该是这样的：

```
function myCall(that) {
//var value = 50;
var value = $(that).attr('value');
    var request = $.ajax({
        url: "ajax.php",
        type: "GET",
        data: ({id: value}),
        //dataType: "html"
    });
// and so on code 
```

**编辑**

如果你想要 id 和 value 都使用下面的代码：

```
var value = $(that).attr('value');
var id = $(that).attr('id'); 
```

并将其传递给数据，如下所示：

```
data: ({id: id, value: value}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:27:11.330

```
var value = $(this).attr('value'); 
```

您正在检索值 (value="100") 而不是 id，它应该是：

```
var id = $(this).attr('id'); 
```

如果你想同时通过：

```
var request = $.ajax({
    url: "ajax.php",
    type: "GET",
    data: {id: id, value: value }
    //dataType: "html"
}); 
```

你也可以这样做：

```
$.get("ajax.php", {id: id, value: value}); 
```

关于你的第二个问题：

***AJAX 将在服务器***中执行“ajax.php” ，因此如果您在“ajax.php”中编辑您的购物车，它将正常工作。

# opengl - mipmaps 对比例转换有反应吗？

> ID：16168045
> 
> 赞同：2
> 
> 时间：2013-04-23T11:20:50.163
> 
> 标签：opengl

在使用 mimap 时，OpenGL 是根据最终转换后的表面大小来选择 mipmap，还是仅根据表面在局部空间中的大小？

换句话说，如果我将多边形缩放得更大，当多边形的所有其他方面保持不变时，这可能/应该影响选择哪个 mipmap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:50:31.390

它基于最终转换后的大小。或者更准确地说，它基于正在处理的片段的屏幕空间坐标。所以是的，如果您的变换使您的多边形非常小，它将选择一个较小的图像进行纹理处理，而如果变换使您的多边形变大，它将选择一个更详细的 mip 级别。

它甚至可以正确处理多边形覆盖从观察者附近到远处的范围的情况。（例如，如果您围绕 x 或 y 轴旋转多边形，因此一端非常靠近观察者，而另一端非常远。）附近的像素将使用更详细的 mip 级别，而远处的像素将使用更详细的 mip 级别。相同的多边形将使用不太详细的级别。

# c# - 如何使用 linq 将数据绑定到 xamGrid

> ID：16168046
> 
> 赞同：0
> 
> 时间：2013-04-23T11:20:51.123
> 
> 标签：c#, silverlight, data-binding, infragistics

我有一个基础架构的 xamGrid，但我不知道使用 linq 绑定数据。该项目是一个 Silverlight 应用程序。我连接到基于 VatTu.edmx（ADO.NET 实体数据模型）的 WCF 数据服务在 xamGrid 中，我在 MainPage.xaml.cs 中创建了带有 headertext:ID 和 Name 的 2 列：

```
namespace SilverlightApplication12
{
public partial class MainPage : UserControl
{
    private VattuEntities db;
    private DataServiceCollection<VatTu> vts;
    public MainPage()
    {
        db = new VattuEntities(new Uri("http://localhost:43664/VatTuService.svc"));
        InitializeComponent();
    }

    private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        var q= from vt in db.VatTus select vt;
        vts.LoadAsync(q);
        grid.itemsource=vts;  
    }       
}} 
```

“vt”有 2 个属性：ID 和名称。但是页面总是加载 100% 并且从不显示我设计的页面。请帮我。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:05:12.200

你将不得不做

```
var queryObj = (DataServiceQuery<List<VaTu>>) q;

queryObj .BeginExecute(result=>
{
grid.itemsource=
queryObj .EndExecute(result).ToList();
},
null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T08:49:56.163

你可以看看这个博客：

[http://www.infragistics.com/community/blogs/mihail_mateev/archive/2010/06/07/using-the-infragistics-xamgrid-with-ria-services.aspx](http://www.infragistics.com/community/blogs/mihail_mateev/archive/2010/06/07/using-the-infragistics-xamgrid-with-ria-services.aspx)

它逐步解释了如何将 Infragistics XamGrid 与 WCF 一起使用。

# ruby-on-rails - 如何将html文本区域中的文本保存为像gmail这样的草稿

> ID：16168047
> 
> 赞同：0
> 
> 时间：2013-04-23T11:21:03.173
> 
> 标签：ruby-on-rails, autosave

我想使用 ruby​​ on rails 保存 html 文本区域中的文本。所以请帮助我在 gmail 中设置它，当我们回复任何电子邮件时，它会在我们发送之前保存为草稿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:24:06.723

如果您想保存表单元素的草稿，对于一个简单的解决方案，您可以使用“草稿”数据库表或类似的，并将草稿与登录用户和他们正在填写的字段相关联。

像这样的东西会起作用：

```
user_id    form_element_id    draft_content
1          1                  Half way through typi... 
```

然后，当登录用户加载表单时，您将需要加载草稿。

除非他们是登录用户，否则您无法正确执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:33:01.020

您可能想查看此 gem [https://github.com/rubiety/has_draft](https://github.com/rubiety/has_draft)，这可能比手动操作要容易一些。此外，正如其他人所说，如果您想要真正的 Gmail 样式，则需要集成轮询和 ajax 以检查更改并在必要时提交。

这个 SO question 可能有助于轮询/ajax 部分[jQuery AJAX 轮询 JSON 响应、基于 AJAX 结果或 JSON 内容的处理](https://stackoverflow.com/questions/1406580/jquery-ajax-polling-for-json-response-handling-based-on-ajax-result-or-json-con)

# html - 相对于父级右上角和自己的左下角定位可缩放元素

> ID：16168048
> 
> 赞同：0
> 
> 时间：2013-04-23T11:21:08.343
> 
> 标签：html, css, position

我想在元素的右上角制作一个可选数据，以在元素的右上角显示类似工具提示。但是我在定位它时遇到了问题，因为元素（容器）和工具提示（偏移子项）都可能包含可变数量的数据，并且如果数据过多，则可以动态缩放。

下图显示了我想要实现的目标：

![职位](https://i.stack.imgur.com/65j66.png)

我对“可变”维度没有影响 - 浏览器将它们流动以自动包含数据。我希望能够指定“设置”距离并使其保持不变，无论由于内容可变，框如何自动缩放。

我可以用纯 CSS 实现这一点吗？如果是这样，怎么做？（'top', 'bottom', 'left' 和 'right' 都定位在 offset child 的左上角。如何让左下角成为“handle”？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:55:06.353

这是一种方法：

考虑这个 HTML 结构：

```
<div class="wrapper">
    <div class="parent">Lorem ipsum dolor sit amet...
        <div class="child">Aliquam convallis rhoncus lacus...</div>
    </div>
</div> 
```

这个CSS样式：

```
.wrapper {
    outline: 2px dotted blue;
    width: 500px;
    height: 400px;
    padding-top: 200px;
}
.parent {
    position: relative;
    background-color: green;
}
.child {
    position: absolute;
    bottom: 100%;
    left: 100%;
    margin: 0 0 20px 20px;
    background-color: yellow;
} 
```

这`.wrapper`只是为了演示目的提供布局上下文。

对于父元素，使用`position: relative`. 对于孩子，使用`position: absolute`并将左/下角放置在 100%，这对应于父框的右上角（无论其大小）。

要控制偏移量，请调整子元素的边距。

这都是非常标准的 CSS 2.1，因此它应该适用于所有浏览器。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/6LTh4/](http://jsfiddle.net/audetwebdesign/6LTh4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:26:44.367

你想要这样的东西：http: [//jsfiddle.net/cyjJq/](http://jsfiddle.net/cyjJq/)

## HTML

```
<div class="parent">
    <div class="child"></div>
</div> 
```

## CSS

```
.parent{
    position: absolute;
    width: 20%;
    height: 20%;
    top: 100px;
    left: 75px;
    background-color: green;
}
.child{
    position: absolute;
    width: 60%;
    height: 40%;
    top: -40%;/*same as height*/
    left: 100%;/*entire width of containing div*/
    background-color: yellow;
} 
```

如果你想让孩子离得更远，只需减少`top`/增加`left`

# java - 禁用自动提交对数据库连接有什么影响？

> ID：16168055
> 
> 赞同：7
> 
> 时间：2013-04-23T11:21:32.683
> 
> 标签：java, sql

如果我将连接设置为手动提交，这是否意味着我的进程将锁定数据库？如果我必须执行可能需要 4-5 小时才能执行的多个 SQL 查询，这是否意味着在此期间没有其他用户可以访问我的数据库？

我正在采用 Web 应用程序的场景，其中有成千上万的用户访问同一个数据库。

```
connection.setAutoCommit(false);
//multiple sql query that will probably take 4-5 hours to be executed

connection.commit(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T11:28:54.507

将 autocommit 设置为 false 通常不会对读取产生影响，因此，如果这是您正在运行的查询类型，则应该不是问题。

autocommit=false 保证您将在事务中执行查询（插入、删除、更新），这意味着它们要么全部成功（最后提交），要么失败并被滚动背部。

当您插入、更新或执行 a`select ... for update`时，某些行将被锁定，这很难预测，因为它取决于您的引擎、Mysql 版本、隔离级别等。

例如，如果 autocommit=false 并且两个用户需要同时更新相同的行，那么一个用户**将**被锁定，等待第一个用户完成，无论是提交还是回滚。

假设**USER1**触发了针对 10 行的数据库更新。

您开始交易，进行更新，进行更多查询......

在提交/回滚之前，**USER2**触发相同的更新，或者将针对**USER1**正在更新的一个或多个相同行的更新。

**USER2**将被锁定，等待**USER1**提交或回滚，然后才能执行更新。

一种测试方法是打开两个不同的数据库连接，例如，通过命令行或其他客户端，并模拟这种行为。将自动提交设置为 false，在一个客户端上进行更新，在第二个客户端上执行相同操作，然后看到它挂在那里，直到您在第一个客户端上提交或回滚。

这种技术可以非常方便地帮助您了解幕后发生的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T11:26:48.017

connection.setAutoCommit(false); 表示您正在此连接上开始交易。您将在此连接中对数据库表所做的所有更改将在提交时保存或在回滚时恢复（或断开连接而不提交）。这并不意味着您锁定了整个数据库。其他用户是否会在尝试访问您的事务使用的表时被锁定，这取决于您的事务正在执行的操作和事务隔离级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:48:37.877

这取决于隔离级别和您在做什么：

如果您正在阅读：

*   脏读/已提交读：不会影响其他任务
*   可重复阅读：其他阅读任务不受影响。其他写作任务可能会受到影响。（实施依赖）
*   序列化：其他阅读任务不受影响，写作任务会受影响。

如果您正在进行更新，其他任务将受到影响。一般来说，您不应该在长时间运行的事务中进行更新。

# visual-studio-2010 - x64 Windows Server 2003 上的远程调试

> ID：16168057
> 
> 赞同：8
> 
> 时间：2013-04-23T11:21:44.603
> 
> 标签：visual-studio-2010, remote-debugging

我在 32 位 Windows Server 2003 机器上安装了一个 Web 服务。通过在我的机器上共享 x86 调试器 exe，我能够使用 VS 2010 从我的 Windows 7 64 位机器远程调试它。一切正常，直到周末他们决定将服务器机器升级到 64 位。

现在，当我尝试使用 x86 调试器进行远程调试时，它给了我错误：

![远程调试器](https://i.stack.imgur.com/cU8p2.png)

当我使用 x64 调试器时，它不会引发错误，但不会加载项目的符号，因此我无论如何都无法调试它。

关于为什么会这样的任何想法？我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T20:14:47.687

不确定这是否适合您，但您可以

*   设置 VS 以生成 x86 可执行文件（构建选项，平台目标 x86）
*   或者如果您的 Web 服务在 IIS 中运行，请创建一个作为 x86 进程运行的应用程序池

> 转到 IIS 管理控制台中的应用程序池，右键单击您的应用程序池并选择“设置应用程序池默认值...”。在属性对话框中，将“启用 32 位应用程序”设置为“真”。

这样，您应该能够使用 x86 调试器（因为以前可以使用）。

* * *

显然，您可以将 IIS 6 设置为在 x86 模式下运行：

```
%SystemDrive%\inetpub\AdminScripts\adsutil.vbs set w3svc/AppPools/Enable32bitAppOnWin64 1 
```

之后也跑

```
%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis -i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:18:38.620

请确保您正在执行以下操作

*   -确保你有最新的符号，你可以在服务器上执行

*   - 运行 64 位版本的 msvsmon.exe

*   - 在视觉工作室中的客户端上，调试 - 附加到进程 - 传输（远程）限定符（您的服务器）

*   - 选择进程并点击附加

您必须在服务器和客户端上具有相同版本的可执行文件和符号

# java - Android 设备到 PC，通过 Socket 连接传输文件

> ID：16168060
> 
> 赞同：0
> 
> 时间：2013-04-23T11:21:48.693
> 
> 标签：java, android, sockets, ip-address, serversocket

我正在通过 Java 应用程序将文件从 Android 模拟器传输到 PC 服务器。我的客户端应用程序上的代码是...

```
File file = new File("/mnt/sdcard/sample.mp4"); //create file instance
client = new Socket("10.0.2.2", 4444);
byte[] mybytearray = new byte[(int) file.length()]; //create a byte array to file

fileInputStream = new FileInputStream(file);
bufferedInputStream = new BufferedInputStream(fileInputStream); 

bufferedInputStream.read(mybytearray, 0, mybytearray.length); //read the file

outputStream = client.getOutputStream();

outputStream.write(mybytearray, 0, mybytearray.length); //write file to the output stream byte by byte
outputStream.flush();
bufferedInputStream.close();
outputStream.close();
client.close(); 
```

但是，当我在 Android 设备本身上运行它时，该应用程序将无法运行。我想我应该用其他值（即：我的 PC 服务器的 IP 地址）替换“10.0.2.2”。我应该把什么价值放在那里？

# javascript - 获取数据表特定列下拉列表中的选定值

> ID：16168061
> 
> 赞同：0
> 
> 时间：2013-04-23T11:21:48.837
> 
> 标签：javascript, jquery, datatables

我正在尝试在数据表列的下拉列表中获取所选元素的值。以下是我的代码：

```
function getstate(item) {
    var rows = $("#content_objects_table").dataTable().fnGetNodes();

    for(var i=0;i<rows.length;i++)
    {
         // Get HTML of 3rd column (for example)
        console.log("item:"+item+" id:"+$(rows[i]).find("td:eq(1)").html());
        if($(rows[i]).find("td:eq(1)").html()==item){
            console.log($(rows[i]).find("td:eq(4)").div.select.data-state);
            return ($(rows[i]).find("td:eq(4)").html());
        }   
    }
}; 
```

到目前为止，我能够获得具有下拉列表的列的值。所以我得到一个如下的div：

```
<div class="selectorContainer assemblyCompleted" style="padding-left: 15px;">
    <select class="states" style="width: 150px;" data-objectid="Scorm123" data-state="ready-for-publishing">
        <option value="ready-for-publishing">Ready for Publishing</option>
        <option value="published">Published</option>
        <option value="rework">Rework</option>
    </select>
</div> 
```

如何获取所选选项的值，即数据状态的值，即这里的数据状态是“准备发布”，对应的值是准备发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:39:44.593

尝试这个

```
/* cache row so don't keep creating new object*/
var $row=$(rows[i]);

if($row.find("td:eq(1)").html()==item){
       var state=$row.find("td:eq(4) select.states").data('state');
       var optionText=$row.find('option[value="'+state+'"]').text();

} 
```

# android - 如何正确处理 android:configChanges="orientation|screenSize"

> ID：16168065
> 
> 赞同：0
> 
> 时间：2013-04-23T11:21:57.747
> 
> 标签：android, video-streaming, screen-orientation

在我的应用程序中，我必须提供添加、移动、调整大小和删除某些视图的功能，就像启动器一样。到目前为止它工作得很好，但现在我希望其中一些视图显示实时流式传输的视频（如网络摄像头）。

我希望我的视频在更改屏幕方向时不要重新缓冲，所以我尝试使用 android:configChanges="orientation|screenSize" 属性。

它在大多数情况下都有效，但是...问题是我必须在屏幕方向更改时或在 onResume 函数中获取新尺寸。这有点棘手，而且它并不总是有效（例如，如果我处于横向模式，并且我接到电话，Android 会自动切换到纵向模式，当我回到我的应用程序时，它会保持纵向但是给我横向屏幕尺寸……）。

我尝试同时使用 addOnLayoutChangeListener 和 getViewTreeObserver().addOnGlobalLayoutListener，都失败了。

我想它在其他几种情况下可能有问题，所以我认为完美的行为是具有正常行为（例如，如果方向改变，则在 onResume 中销毁并重新创建我的活动），并且仅在以下情况下手动调整我的视图大小方向改变。

所以我的问题是：

*   你认为尝试得到这种行为是个好主意吗？

*   销毁和重新创建活动的最佳方法是什么？如果方向改变，只需在 onResume 中调用 onDestroy/onCreate 吗？或者手动将我所有的指针设置为空，并且要非常小心内存泄漏......</p>

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:13:39.490

好吧，我通过创建自己的布局类并在其 onDraw 函数中获取大小来解决它。有点矫枉过正，但这是我找到的唯一解决方案。

感谢@Sharad Mhaske 和@Class Stacker 抽出宝贵时间！

编辑：我刚刚意识到我没有提到我通过设置它们的 X 和 Y 位置以及它们的宽度和高度来手动将我的视图放置在他们的容器中。这就是为什么它们不会自动调整大小而容器会自动调整大小的原因。

编辑：这是我现在使用的一段代码：

```
public class TilesContainer extends FrameLayout {

    // ------------------------------------------------------------------------------------------
    // Public interface for on size change event :
    public static interface OnSizeChangedListener { void onSizeChanged(int width, int height); }
    // ------------------------------------------------------------------------------------------

    // ------------------------------------------------------------------------------------------
    // Private attributes :
    private int _width = -1;
    private int _height = -1;
    private OnSizeChangedListener _listener = null;
    // ------------------------------------------------------------------------------------------

    // ------------------------------------------------------------------------------------------
    // Constructors :
    public TilesContainer(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs, defStyle);
        this.setWillNotDraw(false);
    }

    public TilesContainer(Context context, AttributeSet attrs) {

        super(context, attrs);
        this.setWillNotDraw(false);
    }

    public TilesContainer(Context context) {

        super(context);
        this.setWillNotDraw(false);
    }
    // ------------------------------------------------------------------------------------------

    // ------------------------------------------------------------------------------------------
    // Setters :
    public void setOnSizeChangedListener(OnSizeChangedListener listener) { _listener = listener; }
    // ------------------------------------------------------------------------------------------

    // ------------------------------------------------------------------------------------------
    // onDraw overload :
    @Override
    protected void onDraw(Canvas canvas) {

        // Call super :
        super.onDraw(canvas);

        // If there is a listener and if the size changed :
        if(_listener != null && (_width != this.getWidth() || _height != this.getHeight()) ) {

            _width = this.getWidth();
            _height = this.getHeight();
            _listener.onSizeChanged(this.getWidth(), this.getHeight());
        }
    }
    // ------------------------------------------------------------------------------------------
} 
```

现在在活动中，只需实现 OnSizeChangedListener，使用 setter 并添加函数：

```
@Override
public void onSizeChanged(int width, int height) {

    // Do your stuff with the GOOD size !
} 
```

# wix - 如何在 Wix WebVirtualDir 中指定一个空别名

> ID：16168066
> 
> 赞同：1
> 
> 时间：2013-04-23T11:21:57.837
> 
> 标签：wix, wix3.6

我对 WiX 世界还很陌生，所以如果以下问题看起来微不足道，请多多包涵。

我无法让我的 WebVirtualDir 别名为空。即，我想允许用户指定虚拟目录，如果他不指定，则 Web 应用程序安装在 DefaultWebSite 中。

我已经制作了一个项目，除了用户必须在安装时清除虚拟目录才能安装在 DefaultWebSite 中之外，它可以正确完成所有操作。所以我剩下要做的就是让“默认”虚拟目录显示为空。

我的 WiX 片段如下所示：

```
<Fragment>
<DirectoryRef Id="WEBINSTALLFOLDER" />

<ComponentGroup Id="IIS.Setup">
  <Component 
      Id="$(var.WebSiteName)" 
      KeyPath="yes" 
      Guid="$(var.WebsiteCode)" 
      Directory="WEBINSTALLFOLDER">
    <iis:WebSite 
        Id="WEBSITE_NAME" 
        Description="[WEBSITE_NAME]" 
        Directory="WEBINSTALLFOLDER" 
        ConfigureIfExists="no" 
        AutoStart="yes" 
        StartOnInstall="yes">
      <iis:WebAddress Id="AllUnassigned" IP="*" Port="80"/>
    </iis:WebSite>

    <iis:WebAppPool 
        Id="AppPool" 
        Name="[APP_POOL_NAME]" 
        ManagedRuntimeVersion="v4.0" 
        IdleTimeout="0" 
        RecycleMinutes="0"                
        ManagedPipelineMode="$(var.IIS_ManagedPipelineMode)" />

    <iis:WebVirtualDir 
        Id="vDir" 
        Alias="[WEB_APP_NAME]" 
        Directory="WEBINSTALLFOLDER" 
        WebSite="WEBSITE_NAME">
      <iis:WebApplication 
          Id="$(var.WebApplicationName)" 
          Name="$(var.WebSiteName)"
          WebAppPool="AppPool" />
    </iis:WebVirtualDir>
  </Component>
</ComponentGroup>

<Feature Id="IISSetup">
  <ComponentGroupRef Id="IIS.Setup" />
</Feature> 
```

我尝试了多种方法来做到这一点，包括：

*   从 WebVirtualDir 中删除 alias 属性：我知道这是一个 nogo，因为 alias 是必需的属性
*   明确设置 alias="" ：也是不行的，但至少我在编译时得到了错误
*   将 [WEB_APP_NAME] 设置为空：但我再次收到编译时错误，即特定值可能不为空。

那么我应该怎么做才能做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:08:15.227

如果您希望虚拟目录指向网站的根目录，请将`Alias`属性设置为`'/'`.

# .net - 查找运行时窗口的源代码（实现）

> ID：16168072
> 
> 赞同：0
> 
> 时间：2013-04-23T11:22:10.763
> 
> 标签：.net, winforms, form-control

我们在使用 web 应用程序时，可以通过查看视图源来查看当前页面的详细信息。就我而言，我需要识别运行 Windows 应用程序时显示的当前表单。有没有办法找到这个。我的来源有很多表格，有些表格是动态生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:04:51.967

`Form`如果您正在.NET 应用程序中寻找当前活动的实例，请使用`Form.ActiveForm`静态属性。

要获取表单名称，请使用`Form.ActiveForm.Text`. 要获取表单类型，请使用`Form.ActiveForm.GetType()`.

为了有合适的地方来评估上述内容，您可以将以下代码放在应用程序开头的某处（`Main`）：

```
new System.Threading.Timer(
    delegate
    {
        Type activeFormType =
            (Form.ActiveForm != null) ? Form.ActiveForm.GetType() : null;
        Type breakpointHere = activeFormType;
    },
    null, 0, 10000); 
```

然后运行您的应用程序，打开您要检查的表单。切换到 VS 并在 line 上放置断点`string breakpointHere ...`。切换回您的应用程序并等待计时器触发并且调试器在断点处停止。然后检查 的值`activeFormType`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:55:38.497

使用**[鹰眼](http://hawkeye.codeplex.com/)**

Hawkeye 是一个免费的实用程序。
它就像一个动态属性网格，可以挂接到任何 windowsform 应用程序。一旦连接到应用程序，它将显示属性、字段、类型、方法......

当你把它挂在一个表单上时，你会看到表单名称（对象类型）

# opencart - Opencart：从客户表中获取解密密码

> ID：16168074
> 
> 赞同：-2
> 
> 时间：2013-04-23T11:22:17.230
> 
> 标签：opencart

当客户注册新帐户时，我们必须向他们发送一封确认电子邮件，我的问题是我需要发送每个客户确认电子邮件，并附上他们之前创建的登录电子邮件地址和密码......所以我怎样才能获得他们的密码从我`customer`的现场表`password`..?? 我只想`password`在我想要的地方回显这个客户验证电子邮件页面....

```
<?php echo $password; ?> 
```

任何想法。？谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T11:54:06.990

老实说，**我讨厌我注册的每个网站都会向我发送一封包含我密码的确认电子邮件！！！**很快我就后悔我什至注册了......

所以对您来说最好的答案和选择：**不要将密码发回给用户**- 他知道他在注册期间输入了什么密码，即使他丢失了密码，他仍然可以将其更改为另一个密码，无论是使用他的帐户管理还是“丢失密码”链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T00:25:23.657

如果您想保存密码明文副本，您需要：

1）在您的数据库中创建一个新表（对于此示例表称为 temp，包含 varchar 字段 mail 和 pass）
2）定位注册文件：/catalog/model/account/customer.php
3）定位以开头的行：

```
$this->db->query("INSERT INTO " . DB_PREFIX . "customer SET store_id = '" . 
```

应该在第 14 行左右
添加一个新行，如下所示：

```
$this->db->query("INSERT INTO " . DB_PREFIX . "temp SET mail = '" . $this->db->escape($data['email']) . "', pass = '" . $this->db->escape($data['password']) . "'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:44:31.653

简短的回答 - 你不能。阅读 SHA1、MD5、盐和散列。谷歌是你的朋友。

[请参阅相关问题](https://stackoverflow.com/questions/6128746/custom-sha1salt-pass-decode)

您唯一的选择是一起删除加密并将其存储为未加密，这不是很安全。

再想一想，如果您在注册期间发送此确认电子邮件，则在提交表单之前将未加密的密码字符串存储在某个变量中，然后在您的邮件脚本中使用它。数据库中的密码仍将被加密

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T07:56:33.680

默认情况下，Open Cart 在单向加密中使用 SHA1 对密码进行哈希处理。简而言之，这意味着密码不打算被去散列。当用户登录时，系统再次对用户输入进行哈希处理并比较哈希值。这被称为单向加密并且相当安全。

解密它的唯一常用方法（例如黑客）将使用存储所有原始和散列结果的冲突表。为了让黑客的生活更加艰难，OpenCart 还使用了 Salt（为每个 Salt 密钥创建新的不同冲突表），因此解密密码的可能性很小（尽管由于目前已知的 volunarabilities，许多开发人员已经不推荐使用 SHA-1并且使用 SHA-256 可能更好）。

话虽如此，我推荐2个选项：

1.  将加密更改为 2 向加密，例如 php 内置的 `mcrypt_encrypt()/mcrypt_decrypt()`. OpenCart 实际上可以帮助您，请查看 System/Libaray/encryption.php。您将需要更改 catalog/model/account/customer.php 模型。您还需要更改控制器，使其实际上包含 $this->data['password'] = $customer_info['password']; 这将确保您可以访问 .tpl 文件中的 $password。
2.  由于我也反对通过电子邮件发送密码，我建议发送一个指向 index.php?route=account/forgotten 的链接，以防忘记密码。

# c# - 根据视图模型中的字符串更新内容

> ID：16168077
> 
> 赞同：2
> 
> 时间：2013-04-23T11:22:18.527
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-viewmodel

我正在运行一个 MVC 应用程序，它的视图模型如下：

```
public class UserListViewModel
{
    public UserListViewModel()
    {
        Users = new List<UserViewModel>();
        QueriedUsers = new List<UserViewModel>();
    }

    public List<UserViewModel> Users { get; private set; }
    public string SearchQuery { get; set; }
    public List<UserViewModel> QueriedUsers { get; private set; }
} 
```

*   **用户**：原始用户
*   **SearchQuery**：视图返回的查询
*   **QueriedUsers** :用户排序后的用户

在我看来，我有以下代码：

```
@using (Html.BeginForm("Search", "EditUser"))
{ 
    @Html.EditorFor(model => Model.SearchQuery);
}

@if (Model.QueriedUsers != null && Model.QueriedUsers.Any())
{
    foreach (var u in Model.QueriedUsers)
    {
        // do stuff
    }
}
else
{ 
    foreach (var u in Model.Users)
    {
        // do stuff
    }
} 
```

这是控制器中的 HttpPost 代码：

```
[HttpPost]
public ActionResult Search(UserListViewModel input)
{
    return View("EditUser",NewUserListModel(input));
} 
```

在我在搜索字段中单击输入之前，我有一个这样的 URL：

```
http://localhost:61162/Admin/Users 
```

点击进入后，我得到：

```
http://localhost:61162/Admin/Users/Search 
```

从我的断点我可以知道控制器代码正在运行。

我在新 URL 中遇到的错误是：

> 无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

```
Requested URL: /Admin/EditUser/Search 
```

这当然是由 url 改变引起的。

任何提示如何解决我的问题？:-) 我只想在我的用户上有一个 where 子句，这样我就可以根据搜索输入显示相关数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:22:18.963

From @LarsHoldgaard's last comment:

> Thanks a lot for your help, I got really confused with the project. However, the solution was changing the Search HttpPost to:
> 
> ```
>  return View("Index", NewUserListModel(input)); 
> ```

# c# - C# OnTriggerEnter NullReferenceException

> ID：16168088
> 
> 赞同：1
> 
> 时间：2013-04-23T11:22:44.420
> 
> 标签：c#, unity3d, collision

我在学习中使用 Zigfu 的 ZDK 进行游戏项目。我拿了标准的化身并在手上附加了两个对撞机（带刚体的球体对撞机）。一个用于左手，一个用于右手。我在化身周围构建了一些 (24) 盒式对撞机，以跟踪手是否正在进入新区域。每个盒子都有一个从 0 到 23 的“id”以及以下脚本：

```
using UnityEngine;
using System.Collections;

public class handsTracking : MonoBehaviour 
{
    public int id;

    void OnTriggerEnter (Collider other) {
        if(other.tag == "handsLeftTracking"){
            print("leftHand entered: " + id);
            playerCommunication.activity += 0.1f;
            playerCommunication.handsLeft[id] = true; //here ist the exception
        }
        else if (other.tag == "handsRightTracking"){
            print("rightHand entered: " + id);
            playerCommunication.activity += 0.1f;
            playerCommunication.handsRight[id] = true; //here ist the exception
        }
    }
    void OnTriggerExit (Collider other) {
        if(other.tag == "handsLeftTracking"){
            print("leftHand exited: " + id);
            playerCommunication.activity += 0.01f;
            playerCommunication.handsLeft[id] = false; //here ist the exception
        }
        else if (other.tag == "handsRightTracking"){
            print("rightHand exited: " + id);
            playerCommunication.activity += 0.01f;
            playerCommunication.handsRight[id] = false; //here ist the exception
        }
    }
} 
```

在播放器的另一个脚本中，我想使用这些碰撞。handsTracking.cs 应该只编辑 playerCommunication.cs 脚本中的值：

```
using UnityEngine;
using System.Collections;

public class playerCommunication : MonoBehaviour {

    public static bool[] handsRight;
    public static bool[] handsLeft;
    public static float activity;
    public float fallback;

    // Use this for initialization
    void Awake () {
        activity = 0.0f;
    }

    // Update is called once per frame
    void Update () {
        if((activity - fallback * Time.deltaTime) >= 0.0f){
            activity -= fallback * Time.deltaTime;
        }
    }

    void OnGUI () {
        GUI.Box (new Rect (10,200,150,20), "Activity: " + activity);    
    }
} 
```

到目前为止，这工作正常。但我得到以下例外：

```
NullReferenceException: Object reference not set to an instance of an object
handsTracking.OnTriggerEnter (UnityEngine.Collider other) (at Assets/SeriousGame/Scripts/handsTracking.cs:19) 
```

如果我推荐我尝试编辑数组的行，错误就消失了。我试图在 playerCommunication 脚本中调用一个函数，或处理 handsTracking.cs 中的数组，但没有任何效果。我不明白碰撞和数组之间的联系？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:55:29.820

您的数组从未被初始化过。你得到了一个`NullReferenceException`，因为你的数组是对 null 的引用，因为它没有被分配到任何地方。

例如你可以在里面初始化它们`Awake`：

```
int[] array1 = new int[5];

public static bool[] handsLeft;

// Use this for initialization
void Awake () {
    activity = 0.0f;
    handsLeft = new bool[ARRAY_SIZE];
} 
```

也许您已尝试从检查器初始化这些数组字段，但它们被声明为静态，因此当您从编辑器切换到播放模式时`Unity3D` **不会序列化它们。**

请注意，静态字段将由`playerCommunication`类的所有实例共享。所以，如果你想让几个 GameObject 使用这个脚本，在你的数组中有不同的值，你不应该将它们声明为静态的。

如果您想有效地将​​它们声明为静态，因为您不知道类的创建顺序，最好在类静态构造函数中初始化它们：

```
static playerCommunication ()
{
     handsLeft = new bool[ARRAY_SIZE];
     handsRight = new bool[ARRAY_SIZE];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:33:20.790

您得到 nullpointerexception 的原因是因为您尝试在数组中添加一个尚未初始化的对象。

您有以下声明：

```
public int id; 
```

之后，您将拥有以下代码行：

```
print("leftHand entered: " + id); 
```

将其更改为，例如：

```
Debug.Log("ID value is now: " + id); 
```

您可能会看到以下内容：

```
ID value is now: null 
```

你还没有给出`id`一个值。当您调用时`playerCommunication.handsLeft[id] = true;`，您实际上是在尝试将数组的 null'est 值设置为`true`。确保将`id`-value 设置为某个值。你说每个盒子都有一个从 0 到 23 的 id 值。你在 Unity 属性视图中设置正确了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:04:09.983

我猜测您收到异常的原因是因为您没有访问播放器上的 playerCommunication 脚本，而是尝试使用脚本文件夹中的那个（我想）没有任何设置在公众手中等。

您需要做的是替换这样的行：

```
playerCommunication.handsLeft[id] = true; 
```

有了这个：

```
GameObject.Find("Avatar").GetComponent<playerCommunication>().handsLeft[id] = true; 
```

其中“Avatar”将是化身/玩家游戏对象的名称，而 playerCommunication 是该对象中具有 handsLeft 公共布尔值的脚本。

# grails - Grails 权限被拒绝错误

> ID：16168089
> 
> 赞同：1
> 
> 时间：2013-04-23T11:22:48.703
> 
> 标签：grails

我正在尝试运行 Grails 应用程序，我从 SVN 存储库中检查了它，但出现以下错误！

```
Server access Error: Permission denied: connect url=http://grails.org/plugins/grails-mysql-connector-java/tags/RELEASE_5_1_20/mysql-connector-java-5.1.20.pom

Server access Error: Permission denied: connect url=http://grails.org/plugins/grails-mysql-connector-java/tags/RELEASE_5_1_20/grails-mysql-connector-java-5.1.20.jar

Server access Error: Permission denied: connect url=http://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.pom

Server access Error: Permission denied: connect url=http://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.jar

Server access Error: Permission denied: connect url=http://grails.org/plugins/grails-spring-security-core/tags/RELEASE_1_2_7_3/spring-security-core-1.2.7.3.pom

Server access Error: Permission denied: connect url=http://grails.org/plugins/grails-spring-security-core/tags/RELEASE_1_2_7_3/grails-spring-security-core-1.2.7.3.jar

Server access Error: Permission denied: connect url=http://repo1.maven.org/maven2/org/grails/plugins/spring-security-core/1.2.7.3/spring-security-core-1.2.7.3.pom

Server access Error: Permission denied: connect url=http://repo1.maven.org/maven2/org/grails/plugins/spring-security-core/1.2.7.3/spring-security-core-1.2.7.3.jar

| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- mysql:mysql-connector-java:5.1.20
- org.grails.plugins:spring-security-core:1.2.7.3 
```

当我尝试导航到该链接时，它给了我一个 404 错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:59:10.333

Grails 试图通过自动下载它们来解决应用程序的依赖关系，但由于某种原因无法访问这些站点。您需要使这些依赖项可访问（最简单的方法是手动安装它们）。请参阅[此答案](https://stackoverflow.com/a/12060424/575982)以了解如何处理它。该答案仅处理 Spring Security Core 依赖项，但该解决方案将适用于您的所有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T16:42:15.173

听起来您无法连接到存储库。这可能是由于试图从防火墙后面访问它们。配置代理将有助于解决其中的许多问题。

```
Example:
grails add-proxy client --host=proxy-server --port=4300 --username=guest --password=guest
grails set-proxy client 
```

[在此处](http://grails.org/doc/2.2.x/ref/Command%20Line/set-proxy.html)阅读文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:08:16.143

当我收到错误时，我连接了 VPN，我从 VPN 断开连接，一切正常！

# livecode - 如何在不改变对象位置的情况下更改组的矩形？

> ID：16168091
> 
> 赞同：1
> 
> 时间：2013-04-23T11:22:52.420
> 
> 标签：livecode

我有一种情况，我有一个**组**，`lockLocation true`我需要递归地*调整*它的大小以及其中的所有对象。

我有问题 A. 或问题 B。

**A.**如果我将组的矩形设置在它的孩子之前，那么孩子会移动，所以我不能再使用他们的矩形作为他们计算出的新矩形的基础。

**乙**。如果我先设置孩子的矩形，然后设置父组的矩形会将孩子移动到错误的位置。

**可能** 的解决方案我唯一能想到的就是计算从子对象的矩形中减去的偏移量，并将其传递给递归处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:20:10.777

这是我正在谈论的偏移方法。这行得通。正如我所说，这是一个递归命令，因此它被分配到具有所有者组偏移量的控件。我正在查看其他答案，看看我是否可以对此进行更多优化，或者您的想法是否更好。

```
command mAppScaleObject pScale,pGroupOffset
   local tRect,tScaledPoints,tPoints,tMargins,tControlIDs,tTabStops,tResizeGroup
   -- here groups complicate things because relocating them changes the rects of
   -- their child objects. Let groups resize around objects if they are unlocked.
   put the rect of the target into tRect
   repeat with X=1 to 4
      if X mod 2 = 0 then
         put round((pGroupOffset["Y"]+item X of tRect)*pScale) into item X of tRect
      else
         put round((pGroupOffset["X"]+item X of tRect)*pScale) into item X of tRect
      end if
   end repeat
   put word 1 of the target is "group" and the lockLocation of the target into tResizeGroup
   if tResizeGroup then
      add the left of the target-item 1 of tRect to pGroupOffset["X"]
      add the top of the target-item 2 of tRect to pGroupOffset["Y"]
   end if
   if word 1 of the target is not "group" or tResizeGroup then
      set the rect of the target to tRect
   end if 
```

* * *

**编辑**

我已经解决了这个问题，并提高了在引擎级别为组内对象设置大量属性的性能，现在使用新的组属性 lockUpdates。当 lockUpdates 为真时任何子控件调整大小或移动时，它会阻止组自动更新。

[https://github.com/runrev/livecode/commit/28a93bbf93e96b19662c77ae09fd57f611073bc5](https://github.com/runrev/livecode/commit/28a93bbf93e96b19662c77ae09fd57f611073bc5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:55:00.767

您可以尝试在调整子对象大小之前将组的 boundingRect 设置为 true，然后在禁用 boundingRect 之前将组的矩形设置为其完整范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:53:36.487

当我制作一个小的 iOS 屏幕切换调色板时，我所做的是首先缩放组中的所有对象，然后缓冲组中控件的所有位置：

```
 repeat with i = 1 to the number of controls of pObject
    put the loc of control i of pObject into tArr[i]
 end repeat 
```

然后缩放组，最后重置所有控件：

```
if tArr is an array then
  repeat with i = 1 to the number of elements in tArr
     set the loc of control i of pObject to tArr[i]
  end repeat
end if 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:35:25.910

如果您使用对象的原始位置和矩形来确定新的位置和对象，则会产生舍入错误，最终一切都会出错。这是几何管理器完全不可靠的原因之一。因此，我强烈建议您反对您的解决方案，蒙特。

相反，我将所有对象的矩形设置为相对于组的矩形，例如始终具有 16 像素的边距。可能，此解决方案不允许使用通用方法，这就是为什么我总是编写自己的脚本，这些脚本直接与控件对话：

```
put the rect of grp 1 into myRect
add 16 to item 1 of myRect
add 16 to item 2 of myRect
subtract 16 from item 3 of myRect
subtract 16 from item 4 of myRecy
set the rect of fld 1 to myRect
-- etc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T16:31:23.513

在尝试调整组矩形大小之前锁定消息 - 这将防止组中的对象从您下方移出。

# facebook-graph-api - 用户绘制的绘图是否被视为用户生成的内容？

> ID：16168095
> 
> 赞同：1
> 
> 时间：2013-04-23T11:22:58.640
> 
> 标签：facebook-graph-api, user-generated-content

我正在开发一个应用程序，该应用程序允许用户绘制图纸并分享到他们的 Facebook 提要，我想知道是否允许将图像上传到暂存资源并使用它？因为网站声明只有相机创建的照片才被认为是用户生成的内容，尽管这是由用户绘制的，而不是应用程序生成的。

另外，如果可以使用它，我可以以某种方式将其用于提要发布而不是对象/动作发布吗？

我已将这些链接用作参考： [使用对象 API](https://developers.facebook.com/docs/opengraph/using-object-api/#creatingapp)， [发布到提要](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

提前感谢您的帮助，

篡改

# php - 允许 url htaccess 中的点？

> ID：16168099
> 
> 赞同：0
> 
> 时间：2013-04-23T11:23:10.420
> 
> 标签：php, .htaccess

目前我在使用“。”时得到“未找到”。在 URL 中，例如：

```
 track/amxvb3BqbG9pbQ==/bg==/&order_amount=900.12 
```

我怎样才能允许它使用“。”？

我的代码是：

```
 RewriteRule ^([^/\.]+)/?$ index.php?page=$1
 RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&page2=$2
 RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.\.]+)/?$ index.php?page=$1&page2=$2&page3=$3
 RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&page2=$2&page3=$3&page4=$4
 RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&page2=$2&page3=$3&page4=$4&page5=$5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:39:27.287

你的规则在这里似乎有问题。用以下代码替换所有规则：

```
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /index.php?page=$1&page2=$2&page3=$3&page4=$4&page5=$5 [L,QSA,NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /index.php?page=$1&page2=$2&page3=$3&page4=$4 [L,QSA,NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /index.php?page=$1&page2=$2&page3=$3 [L,QSA,NC]
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?page=$1&page2=$2 [L,QSA,NC]
RewriteRule ^([^/]+)/?$ /index.php?page=$1 [L,QSA,NC] 
```

请记住，始终**按照从最具体到最通用的顺序**保留这些规则。

# spring - SPRING + JTA 事务意外回滚

> ID：16168107
> 
> 赞同：2
> 
> 时间：2013-04-23T11:23:33.657
> 
> 标签：spring, transactions, jta

我在使用 spring+JTA 时遇到了麻烦！我有一个注释的`@Transactional(propagation=Propagation.REQUIRES_NEW)`函数，当我存储大量数据时，这个函数运行良好。但是当我尝试在quartzJob 提供的周期中迭代和修改它们时遇到了一个异常。

```
JTA transaction unexpectedly rolled back (maybe due to a timeout); nested exception is javax.transaction.RollbackException: The transaction was set to rollback only 
```

# php - 在 PHP 代码中隐藏 div 标签

> ID：16168121
> 
> 赞同：2
> 
> 时间：2013-04-23T11:24:10.143
> 
> 标签：php

我想在 php 代码中隐藏一个 div 标签，我在 init 中使用 HTML 代码，如果一个条件为假，则不应显示该特定 div。这是我的代码，在这段代码中，我想隐藏`div` `id="work_exp"`

```
<?php
$fname=$_POST['fname'];
$obj=$_POST['obj'];
$xdate=$_POST['xdate'];
$xmonth=$_POST['xmonth'];
$xyear=$_POST['xyear'];
$addr=$_POST['addr'];
$city=$_POST['city'];
$pin=$_POST['pin'];
$country=$_POST['country'];
$mob=$_POST['mob'];
$email=$_POST['email'];
$gender=$_POST['gender'];
$ms=$_POST['ms'];
$institute1=$_POST['institute1'];
$qual1=$_POST['qual1'];
$grade1=$_POST['grade1'];
$year1=$_POST['year1'];

$institute2=$_POST['institute2'];
$qual2=$_POST['qual2'];
$grade2=$_POST['grade2'];
$year2=$_POST['year2'];

$institute3=$_POST['institute3'];
$qual3=$_POST['qual3'];
$grade3=$_POST['grade3'];
$year3=$_POST['year3'];

$institute4=$_POST['institute4'];
$qual4=$_POST['qual4'];
$grade4=$_POST['grade4'];
$year4=$_POST['year4'];

$title=$_POST['title'];
$tech=$_POST['tech'];
$domain=$_POST['domain'];
$desc=$_POST['desc'];

$cert=$_POST['cert'];
$intern=$_POST['intern'];

$otrp=$_POST['otrp'];
$csk=$_POST['csk'];
$rwork=$_POST['rwork'];
$salary=$_POST['salary'];

$refname=$_POST['refname'];
$refjob=$_POST['refjob'];
$refadd=$_POST['refadd'];
$refphone=$_POST['refphone'];
$refemail=$_POST['refemail'];
$reflen=$_POST['reflen'];

session_start();

$_SESSION['ename1']=$_POST['ename1'];

$_SESSION['industry1']=$_POST['industry1'];
$_SESSION['position1']=$_POST['position1'];
$_SESSION['responsibility1']=$_POST['responsibility1'];
$_SESSION['from1']=$_POST['from1'];
$_SESSION['to1']=$_POST['to1'];
$_SESSION['ex1']=$_POST['ex1'];

$_SESSION['ename2']=$_POST['ename2'];
$_SESSION['industry2']=$_POST['industry2'];
$_SESSION['position2']=$_POST['position2'];
$_SESSION['responsibility2']=$_POST['responsibility2'];
$_SESSION['from2']=$_POST['from2'];
$_SESSION['to2']=$_POST['to2'];
$_SESSION['ex2']=$_POST['ex2'];

echo "<html>";
echo "<head>";

echo "<title>RESUME</title>";
echo "<link rel='stylesheet' type='text/css' href='res.css'>";
echo "</head>";
echo "<script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'>
</script>";
echo "<body>";
echo "<center><font size='+3' color='#000000' face='Arial, Helvetica, sans-serif'>RESUME</font></center><br /><br />";
echo "<div id='container'>";
echo "<div id='pers_detail'>";
echo "<h3>".$fname."</h3>";
echo "<h4>ADDRESS</h4>";
echo "<p>".$addr."<br />";
echo $city." - ".$pin."<br />";
echo $country."<br />";
echo "</p>";
echo "</div>";
echo "<br />";
echo "<br />";
echo "<div id='con'>";
echo "<h4>CONTACT</h4>";
echo "<p>";
echo "Mobile:".$mob."<br />";
echo "E-Mail:".$email."<br />";
echo "</p>";
echo "</div>";
echo "<div id='obj'>";
echo "<table width='56%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBJECTIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
echo "<tr>";
echo "<td><p align='justify'>".$obj."</p></td>";
echo "</tr>";
echo "</table></div>";
echo "<div id='academy'>";
echo "<table width='100%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ACADEMIC DETAILS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
echo "<tr>";
echo "<td><p align='center'><b>INSTITUTION</b></p></td>";
echo "<td><p align='center'><b>QUALIFICATION</b></p></td>";
echo "<td><p align='center'><b>CGPA/GRADE</b></p></td>";
echo "<td><p align='center'><b>YEAR</b></p></td>";
echo "</tr>";
if(!$institute1=="" || $institute1!=="NIL")
{
echo "<tr>";
echo "<td><p align='center'>".$institute1."</p></td>";
echo "<td><p align='center'>".$qual1."</p></td>";
echo "<td><p align='center'>".$grade1."</p></td>";
echo  "<td><p align='center'>".$year1."</p></td>";
echo "</tr>";
echo "<tr>";
}
if(!$institute2==""|| $institute2!=="NIL")
{
echo "<td><p align='center'>".$institute2."</p></td>";
echo "<td><p align='center'>".$qual2."</p></td>";
echo "<td><p align='center'>".$grade2."</p></td>";
echo  "<td><p align='center'>".$year2."</p></td>";
echo "</tr>";
}
if(!$institute3==""|| $institute3!=="NIL")
{
echo "<td><p align='center'>".$institute3."</p></td>";
echo "<td><p align='center'>".$qual3."</p></td>";
echo "<td><p align='center'>".$grade3."</p></td>";
echo  "<td><p align='center'>".$year3."</p></td>";
echo "</tr>";
}
if(!$institute4==""|| $institute4!=="NIL")
{
echo "<td><p align='center'>".$institute4."</p></td>";
echo "<td><p align='center'>".$qual4."</p></td>";
echo "<td><p align='center'>".$grade4."</p></td>";
echo  "<td><p align='center'>".$year4."</p></td>";
echo "</tr>";
}
echo "</table>";
echo "</div>";
echo "<div id='aca_det'>";
echo "<table width='100%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  ACADEMIC PROJECT DETAILS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
echo "<tr>";
echo "<td width><b>TITLE</b></td><td>".$title."</td>";
echo "</tr>";
echo "<tr>";
echo "<td width><b>TECHNOLOGY USED</b></td><td>".$tech."</td>";
echo "</tr>";
echo "<tr>";
echo "<td width=30%><b>DOMAIN</b></td><td>".$domain."</td>";
echo "</tr>";
echo "<tr>";
echo "<td width><b>DESCRIPTION</b></td><td><p align='justify'>".$desc."</p></td>";
echo "</tr>";
echo "</table>";
echo "</div>";
if($cert !="NIL" || $intern !="NIL")
{
echo "<div id='otherinfo'>";
echo "<table width='100%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHER INFORMATIONS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
if($cert !="NIL")
{
echo "<tr>";
echo "<td width><b>CERTIFICATION</b></td><td>".$cert."</td></tr>";
echo "<tr>";
}
if($intern !="NIL")
{
echo "<td width=30%><b>INTERNSHIP</b></td>";
echo "<td><p align='justify'>".$intern."</p></td>";
echo "</tr>";
}
echo "</table>";
echo "</div>";
}
if($_SESSION['ename1']!="" && $_SESSION['ename2']!="")
{
$new='<script> 
$(document).ready(function(){

    $("#work_exp").slideDown("slow");

});
</script>
 <div id="work_exp">

 <table width="100%" border="0" cellspacing="1" cellpadding="2" align="center">

 <tr>
 <td colspan="4"align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WORK EXPERIANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
 </tr>
 </table>

 <table width="99%" border="0" cellspacing="1" cellpadding="2" align="center">
 <tr>
 <td colspan="4" align="left"><font size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;EMPLOYER ONE DETAILS</font></td>
 </tr>
  <tr>
 <td width="210"><b>Employer</b></td> <td width="327"></td>
 </tr>

 <tr>
 <td><b>Industry</b></td><td></td>
 </tr>
 <tr>
 <td><b>Position</b></td><td></td>
 </tr>

 <tr>
 <td><b>Responsibilities</b></td><td></td>
 </tr>

 <tr>
 <td><b>From</b></td><td></td>

 <td width="18"><b>To</b></td><td width="249"></td>
 </tr>

 <tr>
 <td><b>Salary</b></td><td></td>
 </tr>
 </table>

 <table width="99%" border="0" cellspacing="1" cellpadding="2" align="center">
 <tr>
 <td colspan="4" align="left"><font size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;EMPLOYER TWO DETAILS</font></td>
 </tr>
 <tr>
 <td width="210"><b>Employer</b></td> <td width="327"></td>
 </tr>
 <tr>
 <td><b>Industry</b></td><td></td>
 </tr>
 <tr>
 <td><b>Position</b></td><td></td>
 </tr>
 <tr>
 <td><b>Responsibilities</b></td><td></td>
 </tr>  
 <tr>
 <td><b>From</b></td><td></td>
 <td width="28"><b>To</b></td><td width="249"></td>
 </tr>
 <tr>
 <td><b>Salary</b></td><td></td>
 </tr>
 </table>
 </div>';
}
echo $new;
echo "<div id='misc'>";
echo "<table width='99%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MISCELLANEOUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
echo "<tr>";
echo "<td width='25%'><b>FULL NAME</b></td>";
echo "<td>".$fname."</td>";
echo "</tr>";
echo "<tr>";
echo "<td width='25%'><b>DATE OF BIRTH</b></td>";
echo "<td>".$xdate."/".$xmonth."/".$xyear."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>GENDER</b></td><td>".$gender."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>MARITAL STATUS</b></td><td width='75%'>".$ms."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>OWN TRANSPORT:</b></td>";
echo "<td>".$otrp."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>COMMUNICATION SKILLS:</b></td>";
echo "<td>".$csk."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>EXPECTED SALARY:</b></td>";
echo "<td>".$salary."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>READY TO WORK:</b></td>";
echo "<td>".$rwork."</td>";
echo "</tr>";
echo "</table>";
echo "</div>";
echo "<div id='ref'>";
echo "<table width='99%' border='0' cellspacing='1' cellpadding='2' align='center'>";

echo "<tr>";
echo "<td colspan='4' align='left'><font style='background-color:#F3F5EF' size='+1' color='#000000' face='Arial, Helvetica, sans-serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;REFERENCES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>NAME</b></td>";
echo "<td>".$refname."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>OCCUPATION</b></td>";
echo "<td>".$refjob."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>ADDRESS</b></td>";
echo "<td><p align='justify'>".$refadd."</p></td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>CONTACT NUMBER</b></td>";
echo "<td>".$refphone."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>E-MAIL</b></td>";
echo "<td>".$refemail."</td>";
echo "</tr>";
echo "<tr>";
echo "<td><b>RELATIONSHIP</b></td>";
echo "<td>".$reflen."</td>";
echo "</tr>";
echo "</table>";
echo "</div>";
echo "</div>";
echo "</body>";
echo "</html>";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:28:07.760

首先你不应该使用 PHP 回显这么多的 HTML，它应该是这样的

```
<?php
   //Write your PHP here
?>
HTML HERE
<?php
   //PHP here again
?> 
```

关于条件，你可以简单地写成这样

```
<?php
  if(condition) {
?>
   Content to be shown
<?php
  }
?> 
```

另一方面，`else`如果条件不满足，您也可以使用语句来显示内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:26:17.097

只需在显示 div 的 echo 之前使用“if”：

```
if(...Your_condition...)
{
  echo "<div id='work_exp'> ... </div>";
} 
```

PS，您不应该使用那么多回声来构建您的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:49:10.837

这是我的新代码朋友，

```
 <?php
$fname=$_POST['fname'];
$obj=$_POST['obj'];
$xdate=$_POST['xdate'];
$xmonth=$_POST['xmonth'];
$xyear=$_POST['xyear'];
$addr=$_POST['addr'];
$city=$_POST['city'];
$pin=$_POST['pin'];
$country=$_POST['country'];
$mob=$_POST['mob'];
$email=$_POST['email'];
$gender=$_POST['gender'];
$ms=$_POST['ms'];

$institute1=$_POST['institute1'];
$qual1=$_POST['qual1'];
$grade1=$_POST['grade1'];
$year1=$_POST['year1'];

$institute2=$_POST['institute2'];
$qual2=$_POST['qual2'];
$grade2=$_POST['grade2'];
$year2=$_POST['year2'];

$institute3=$_POST['institute3'];
$qual3=$_POST['qual3'];
$grade3=$_POST['grade3'];
$year3=$_POST['year3'];

$institute4=$_POST['institute4'];
$qual4=$_POST['qual4'];
$grade4=$_POST['grade4'];
$year4=$_POST['year4'];

$title=$_POST['title'];
$tech=$_POST['tech'];
$domain=$_POST['domain'];
$desc=$_POST['desc'];

$cert=$_POST['cert'];
$intern=$_POST['intern'];

$otrp=$_POST['otrp'];
$csk=$_POST['csk'];
$rwork=$_POST['rwork'];
$salary=$_POST['salary'];

$refname=$_POST['refname'];
$refjob=$_POST['refjob'];
$refadd=$_POST['refadd'];
$refphone=$_POST['refphone'];
$refemail=$_POST['refemail'];
$reflen=$_POST['reflen'];

$ename1=$_POST['ename1'];
$industry1=$_POST['industry1'];
$position1=$_POST['position1'];
$responsibility1=$_POST['responsibility1'];
$from1=$_POST['from1'];
$to1=$_POST['to1'];
$ex1=$_POST['ex1'];

$ename2=$_POST['ename2'];
$industry2=$_POST['industry2'];
$position2=$_POST['position2'];
$responsibility2=$_POST['responsibility2'];
$from2=$_POST['from2'];
$to2=$_POST['to2'];
$ex2=$_POST['ex2'];
?>
<html>
<head>

<title>RESUME</title>
<link rel="stylesheet" type="text/css" href="res.css">
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>";
<body>
<center><font size="+3" color="#000000" face="Arial, Helvetica, sans-serif">RESUME</font></center><br /><br />
<div id="container">
<div id="pers_detail">
<h3><?php echo $fname; ?></h3>
<h4>ADDRESS</h4>
<p><?php echo $addr; ?><br />
<?php echo $city;?> - <?php echo $pin;?><br />
<?php echo $country;?><br />
</p>
</div>
<br />
<br />
<div id="con">
<h4>CONTACT</h4>
<p>
Mobile:<?php echo $mob; ?><br />
E-Mail:<?php echo $email; ?><br />
</p>
</div>
<div id="obj">
<table width="56%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OBJECTIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<tr>
<td><p align="justify"><?php echo $obj; ?></p></td>
</tr>
</table></div>
<div id="academy">
<table width="100%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ACADEMIC DETAILS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<tr>
<td><p align="center"><b>INSTITUTION</b></p></td>
<td><p align="center"><b>QUALIFICATION</b></p></td>
<td><p align="center"><b>CGPA/GRADE</b></p></td>
<td><p align="center"><b>YEAR</b></p></td>
</tr>
<?php 
if(!$institute1!="" || $institute1!="NIL")
{
?>
<tr>
<td><p align="center"><?php echo $institute1; ?></p></td>
<td><p align="center"><?php echo $qual1; ?></p></td>
<td><p align="center"><?php echo $grade1; ?></p></td>
<td><p align="center"><?php echo $year1; ?></p></td>
</tr>
<tr>
<?php
}
if(!$institute2!="" || $institute2!="NIL")
{?>
<tr>
<td><p align="center"><?php echo $institute2; ?></p></td>
<td><p align="center"><?php echo $qual2; ?></p></td>
<td><p align="center"><?php echo $grade2; ?></p></td>
<td><p align="center"><?php echo $year2; ?></p></td>
</tr>
<tr>
<?php 
}
if(!$institute3!="" || $institute3!="NIL")
{?>
<tr>
<td><p align="center"><?php echo $institute3; ?></p></td>
<td><p align="center"><?php echo $qual3; ?></p></td>
<td><p align="center"><?php echo $grade3; ?></p></td>
<td><p align="center"><?php echo $year3; ?></p></td>
</tr>
<tr>
<?php 
}
if(!$institute4!="" || $institute4!="NIL")
{?>
<tr>
<td><p align="center"><?php echo $institute4; ?></p></td>
<td><p align="center"><?php echo $qual4; ?></p></td>
<td><p align="center"><?php echo $grade4; ?></p></td>
<td><p align="center"><?php echo $year4; ?></p></td>
</tr>
<tr>
<?php 
}?>
</table>
</div>
<div id="aca_det">
<table width="100%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  ACADEMIC PROJECT DETAILS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<tr>
<td width><b>TITLE</b></td><td><?php echo $title; ?></td>
</tr>
<tr>
<td width><b>TECHNOLOGY USED</b></td><td><?php echo $tech; ?></td>
</tr>
<tr>
<td width=30%><b>DOMAIN</b></td><td><?php echo $domain; ?></td>
</tr>
<tr>
<td width><b>DESCRIPTION</b></td><td><p align="justify"><?php echo $desc; ?></p></td>
</tr>
</table>
</div>
<?php 
if($cert !="NIL" || $intern !="NIL")
{?>
<div id="otherinfo">
<table width="100%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHER INFORMATIONS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<?php 
if($cert !="NIL")
{?>
<tr>
<td width><b>CERTIFICATION</b></td><td><?php echo $cert; ?></td></tr>
<tr>
<?php 
}
if($intern !="NIL")
{?>
<td width=30%><b>INTERNSHIP</b></td>
<td><p align="justify"><?php echo $intern; ?></p></td>
</tr>
<?php 
}?>
</table>
</div>
<?php 
}
if($ename1!=""||$ename2!="")
{
?>
<div id="work_exp" style="height:483px">

<table width="100%" border="0" cellspacing="1" cellpadding="2" align="center">
<tr>
<td colspan="4"align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WORK EXPERIANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
 </tr>
</table>
<table width="99%" height="228" border="0" align="center" cellpadding="2" cellspacing="1">
<tr>
<td colspan="4" align="left"><font size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;PROFESSIONAL EXPERIANCE DETAILS</font></td>
</tr>
<?php   
if(!$ename1=="")
{?>
<tr>
<td width="210"><b>Employer</b></td> <td width="327"><?php echo $ename1; ?></td>
</tr>

<tr>
<td><b>Industry</b></td><td><?php echo $industry1; ?></td>
</tr>
<tr>
<td><b>Position</b></td><td><?php echo $position1; ?></td>
</tr>

<tr>
<td><b>Responsibilities</b></td><td><?php echo $responsibility1; ?></td>
</tr>

<tr>
<td><b>From</b></td><td><?php echo $from1; ?></td>
<td width="18"><b>To</b></td><td width="249"><?php echo $to1; ?></td>
</tr>

<tr>
<td height="41"><b>Salary</b></td>
<td><?php echo $ex1; ?></td>
</tr>
</table><?php 
}?><BR />

<?php 
if(!$ename2=="")
{?>
<table width="99%" height="179" border="0" align="center" cellpadding="2" cellspacing="1">
<tr>
<td width="210"><b>Employer</b></td> <td width="327"><?php echo $ename2; ?></td>
</tr>

<tr>
<td><b>Industry</b></td><td><?php echo $industry2; ?></td>
</tr>
<tr>
<td><b>Position</b></td><td><?php echo $position2; ?></td>
</tr>

<tr>
<td><b>Responsibilities</b></td><td><?php echo $responsibility2; ?></td>
</tr>

<tr>
<td><b>From</b></td><td><?php echo $from2; ?></td>
<td width="18"><b>To</b></td><td width="249"><?php echo $to2; ?></td>
</tr>

<tr>
<td height="23"><b>Salary</b></td>
<td><?php echo $ex2; ?></td>
</tr>

</table><?php
}?>
 </div>
<?php
}?>
<div id="misc" style="height:auto">
<table width="99%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MISCELLANEOUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<tr>
<td width="25%"><b>FULL NAME</b></td>
<td><?php echo $fname; ?></td>
</tr>
<tr>
<td width="25%"><b>DATE OF BIRTH</b></td>
<td><?php echo $xdate; ?>/<?php echo $xmonth; ?>/<?php echo $xyear; ?></td>
</tr>
<tr>
<td><b>GENDER</b></td><td><?php echo $gender; ?></td>
</tr>
<tr>
<td><b>MARITAL STATUS</b></td><td width="75%"><?php echo $ms; ?></td>
</tr>
<tr>
<td><b>OWN TRANSPORT:</b></td>
<td><?php echo $otrp; ?></td>
</tr>
<tr>
<td><b>COMMUNICATION SKILLS:</b></td>
<td><?php echo $csk; ?></td>
</tr>
<tr>
<td><b>EXPECTED SALARY:</b></td>
<td><?php echo $salary; ?></td>
</tr>
<tr>
<td><b>READY TO WORK:</b></td>
<td><?php echo $rwork; ?></td>
</tr>
</table>
</div>
<div id="ref">
<table width="99%" border="0" cellspacing="1" cellpadding="2" align="center">

<tr>
<td colspan="4" align="left"><font style="background-color:#F3F5EF" size="+1" color="#000000" face="Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;REFERENCES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></td>
</tr>
<tr>
<td><b>NAME</b></td>
<td><?php echo $refname; ?></td>
</tr>
<tr>
<td><b>OCCUPATION</b></td>
<td><?php echo $refjob; ?></td>
</tr>
<tr>
<td><b>ADDRESS</b></td>
<td><p align="justify"><?php echo $refadd; ?></p></td>
</tr>
<tr>
<td><b>CONTACT NUMBER</b></td>
<td><?php echo $refphone; ?></td>
</tr>
<tr>
<td><b>E-MAIL</b></td>
<td><?php echo $refemail; ?></td>
</tr>
<tr>
<td><b>RELATIONSHIP</b></td>
<td><?php echo $reflen; ?></td>
</tr>
</table>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:28:21.837

如果你想在服务器端隐藏它，你可以这样做：

```
<?php
    // ...
    if ($showThisDiv)
    {
        ?>
        <div>This is a div</div>
        <?php
    }
    // ...
?> 
```

这样可以避免回声，因此不需要将大量 HTML 放在引号中。

# java - 如何打印 SOAP 请求消息？

> ID：16168123
> 
> 赞同：0
> 
> 时间：2013-04-23T11:24:13.133
> 
> 标签：java, web-services, soap, cxf, soap-client

如何打印发送到 Web 服务 (CXF2) 的 SOAP 请求消息？我正在使用 Eclipse。

我想看看它包含哪些字段并按照这个结构构建一个 SOAP 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:38:33.110

您只需添加一个 LoggingInterceptor ：请参阅[cxf 文档](http://cxf.apache.org/docs/debugging-and-logging.html)

```
Object implementor = new GreeterImpl();
EndpointImpl ep = (EndpointImpl) Endpoint.publish("http://localhost/service", implementor);

ep.getServer().getEndpoint().getInInterceptors().add(new LoggingInInterceptor());
ep.getServer().getEndpoint().getOutInterceptors().add(new LoggingOutInterceptor()) 
```

或者如果你使用[Springframework](http://www.springsource.org/)

```
<bean id="quickFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
    <property name="serviceClass" value="com.misc.PortType"/>
    <property name="address" value="${service.url}"/>
    <property name="inInterceptors">
        <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
    </property>
    <property name="outInterceptors">
        <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
    </property>
</bean> 
```

# javascript - 在每 2 位后输入 mac 地址时自动插入冒号

> ID：16168125
> 
> 赞同：3
> 
> 时间：2013-04-23T11:24:17.763
> 
> 标签：javascript, jquery

我想使用 Java Script 或 jquery 在 html 输入框中的每 2 位数字后自动插入冒号。

我按下了

00 然后像 00 一样自动插入冒号：

继续继续最多5次

00:00:00:00:00:00

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T12:02:49.107

尝试这个

```
<div id="dialog-message" title="Enter MAC address">
    <input id="macAddress" type="text" maxlength="17"></input>
</div>

var macAddress = $("#macAddress");

$(function () {
    $("#dialog-message").dialog({
        modal: true,
        buttons: {
            Ok: function () {
                $(this).dialog("close");
                alert("MAc address entered: " + macAddress.val());
            }
        }
    });
});

function formatMAC(e) {
    var r = /([a-f0-9]{2})([a-f0-9]{2})/i,
        str = e.target.value.replace(/[^a-f0-9]/ig, "");

    while (r.test(str)) {
        str = str.replace(r, '$1' + ':' + '$2');
    }

    e.target.value = str.slice(0, 17);
};

macAddress.on("keyup", formatMAC); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/f2y64/)

在没有 jquery 的花里胡哨的纯 javascript 中，这里是同样的事情。

```
<input id="macAddress" type="text" maxlength="17"></input>

var macAddress = document.getElementById("macAddress");

function formatMAC(e) {
    var r = /([a-f0-9]{2})([a-f0-9]{2})/i,
        str = e.target.value.replace(/[^a-f0-9]/ig, "");

    while (r.test(str)) {
        str = str.replace(r, '$1' + ':' + '$2');
    }

    e.target.value = str.slice(0, 17);
};

macAddress.addEventListener("keyup", formatMAC, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/VRWZs/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:03:02.740

您可以使用模数来做到这一点

你可以试试这样的

例如：

尝试这个：

```
var length = 1;
$("#input").focusin(function (evt) {

    $(this).keypress(function () {
        var content = $(this).val();
        var content1 = content.replace(/\:/g, '');
        length = content1.length;
        if(((length % 2) == 0) && length < 10 && length > 1){
            $('#input').val($('#input').val() + ':');
        }    
    });    
}); 
```

[http://jsfiddle.net/3NLDL/1/](http://jsfiddle.net/3NLDL/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-21T16:11:57.050

这是我的版本：

```
$('#MACADDRESS').keyup(function (e) {
  var r = /([a-f0-9]{2})/i;
  var str = e.target.value.replace(/[^a-f0-9:]/ig, "");
  if (e.keyCode != 8 && r.test(str.slice(-2))) {
    str = str.concat(':')
  }
  e.target.value = str.slice(0, 17);
}); 
```

它还每两个字符添加“：”。

国际文凭

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-15T12:08:58.950

**改进了这个[答案](https://stackoverflow.com/a/16168566/9657976)。** 答案有很多缺陷。

1.  没有意义的变量名
2.  乱码
3.  过时的方法

这是一个[演示。](https://jsfiddle.net/Sanguinary/sd6u8o52/1/)

```
$("#mac").on("keyup", function(event) {

  var limitField = $(this).val().trim().length;
  var limit = "17";

  if (event.keyCode != 8) {
      var mac_value = $(this).val().trim().concat(':');
      switch(limitField) {
          case 2:
          case 5:
          case 8:
          case 11:
          case 14:
              $("#mac").val(mac_value);
          break;
      }
   }
   if (limitField > limit) {
       $("#mac").val($(this).val().trim().substring(0, limit));
   }
}); 
```

这会将最大字符限制为 17 个并删除每个超出限制的字符。它还会`:`在每个第二个字符后添加一个冒号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T20:54:00.420

如果有人在这里找到方法，我发现上面的答案有很多问题，所以我在这里添加我自己的。我的标准如下：

*   能够发送垃圾邮件（快速输入）字母和数字，并且仍然在正确的位置插入冒号
*   没有幻影字符（字母会显示一些答案，然后在拼接时消失）
*   能够在任何位置退格（一些答案，退格会破坏格式）
*   降低复杂性
*   没有正则表达式
*   不超过 17 个字符

最初我是用 Vue 编写的，但我会在这里提供一个 jquery 版本。

```
$("#mac-input").on("keydown", function(event) {
  const BACKSPACE_KEY = 8
  const COLON_KEY = 186
  const _colonPositions = [2, 5, 8, 11, 14]
  const _newValue = $(this).val().trim()
  const _currentPosition = _newValue.length
  if (event.keyCode === COLON_KEY) {
    event.preventDefault()
  }
  if (event.keyCode !== BACKSPACE_KEY) {
    if (_colonPositions.some(position => position === _currentPosition)) {
      $("#mac-input").val(_newValue.concat(':'))
    }
  }
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="text" id="mac-input" maxlength="17" />
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-22T08:02:54.637

我正在使用它并为我工作：

```
<input type="text" id="macaddress" onkeyup="doInsert(this)" maxlength="17"/>

<script type="text/javascript">
function doInsert(ctl)
{
    vInit = ctl.value;
    ctl.value = ctl.value.replace(/[^a-f0-9:]/ig, "");
    //ctl.value = ctl.value.replace(/:\s*$/, "");
    vCurrent = ctl.value;
    if(vInit != vCurrent)
        return false;   

    var v = ctl.value;
    var l = v.length;
    var lMax = 17;

    if(l >= lMax)
    {
        return false;
    }

    if(l >= 2 && l < lMax)
    {
        var v1 = v;     
        /* Removing all ':' to calculate get actaul text */
        while(!(v1.indexOf(":") < 0)) { // Better use RegEx
            v1 = v1.replace(":", "");           console.log('v1:'+v1);
        }

        /* Insert ':' after ever 2 chars */     
        var arrv1 = v1.match(/.{1,2}/g); // ["ab", "dc","a"]        
        ctl.value = arrv1.join(":");
    }
}
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-23T11:47:48.180

Mayur 请参考我的例子

[http://jsfiddle.net/X5r8r/1167/](http://jsfiddle.net/X5r8r/1167/)

```
<input type="text" id="ip_address"/>

$("#ip_address").live("keyup", function(event) {
    var limitField = $(this).val().trim().length;
    var limit = "14"    
    if (event.keyCode != 8) {
      if (limitField == 2) {
          var fax_value = $(this).val().trim().concat(':');
        $("#ip_address").val(fax_value);
      } else if (limitField == 5) {
          var fax_value = $(this).val().trim().concat(':');
        $("#ip_address").val(fax_value);
      }else if (limitField == 8) {
          var fax_value = $(this).val().trim().concat(':');
        $("#ip_address").val(fax_value);
      }else if (limitField == 11) {
          var fax_value = $(this).val().trim().concat(':');
        $("#ip_address").val(fax_value);
      }
    }
    if (limitField > limit) {
        $("#ip_address").val($(this).val().trim().substring(0, limit));
    }
}); 
```

# javascript - 在 iFrame 中将文本插入表单，然后单击提交

> ID：16168128
> 
> 赞同：0
> 
> 时间：2013-04-23T11:24:33.397
> 
> 标签：javascript, jquery, html, iframe

好吧。我基本上想在我的网站上创建一个 iframe，它可以通向我的其他网站。

在我的 iFramed 网站上，我有一个带有文本字段和提交按钮的表单。我想在文本字段中插入一些文本，然后在单击站点 A 上的按钮（包含 iframe 的那个）时单击提交按钮。

以某种方式可能吗？

我已经尝试了以下方法，但它似乎不起作用：

```
<script type="text/javascript">
    function insertTxt() {
        var textstring = "test successful";
        window.frames["iframeAB"].document.documentElement.getElementsByTagName("textarea")[0].value = textstring;
    }
</script>

<iframe name="iframeAB" src ="index.html" id="qab" width="100%" height="210" style="border:1px solid #009ee0">
    Your browser doesn't handle iframes
</iframe>
<input type="button" value="Go" onclick="top.frames['iframeAB'].window.document.body.getElementById('text_field').value='test successful';"/>
<a href="#" onclick="insertTxt();">test</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T17:51:48.137

你可以试试这个解决方案：

它使用 JQuery

**你的 HTML**

```
<iframe name="iframeAB" src ="index.html" id="qab" width="100%" height="210" style="border:1px solid #009ee0">
    Your browser doesn't handle iframes
</iframe>
<input type="button" value="Go" onclick="top.frames['iframeAB'].window.document.body.getElementById('text_field').value='test successful';"/>
<a href="#" onclick="insertTxt();">test</a> 
```

**JS 文件中的 insertTxt() 方法**

```
$("#qab").ready(function() {
    $("#qab").contents().find("body").find('textarea').val('Test Successful');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:33:33.527

**使用jQuery**试试这个：

```
// Include the jQuery file inside the head tag
// Download the latest version, this is in the jQuery website
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

<script>
// Then call the code inside ready method like this
$(document).ready(function () {
    // Get the iFrame jQuery Object
    var $MyFrame = $("iframe[name='iframeAB']");

    // You need to wait for the iFrame content to load first
    // So, that the click events work properly
    $MyFrame.load(function () {
        var frameBody = $MyFrame.contents().find('body');

        // Find the textarea by id
        var textarea = frameBody.find('#text_field');

        // Set the value here...
        textarea.val(textstring);
    });
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:32:17.020

尝试使用`window.frames["iframeAB"].documentContent`而不是`window.frames["iframeAB"].document`

# c++ - 截断 C++ 或通用示例中留下的整数

> ID：16168129
> 
> 赞同：1
> 
> 时间：2013-04-23T11:24:34.647
> 
> 标签：c++, c, algorithm

有没有一种优雅的方法来截断左方向小数或与基数无关的整数？

例如我有：

```
unsigned int val1 = 17301; 
```

该算法必须通过一次调用从左侧截断 1（十进制）数字，因此对于 val1，4 次调用的结果将是：

```
truncate_left(17301) returns 7301
truncate_left(7301) returns 301
truncate_left(301) returns 1
truncate_left(1) returns 0 
```

返回值也是整数。c/c++ 解决方案最适合我。任何外部（和/或）数学库都不受欢迎，我对通用方式感兴趣

@ATaylor 我丑陋的解决方案是：

```
unsigned int truncate_left(unsigned int val) {
  unsigned int divider = 1000000000, dec;
  for(unsigned int pow10 = 10; pow10 > 0; pow10--) {
    if(val % divider != val) {
      dec = val / divider;
      printf("dec = %d\n", divider);
      break;
    }
    divider /= 10;
  }
  return val - dec * divider;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:38:07.343

我不确定为什么@MM 删除了他几乎就在那里的答案，但这是它的更正版本：

```
int truncate_left(int x)
{
    int c = (int)log10(x);
    while (x > pow(10,c)) x -= pow(10,c);
    return x;
} 
```

如果使用 math.h 和 -lm 有问题，请将 log10 和 pow 替换为：

```
int mylog10(int val)
{
   if (val > 9) return 1 + mylog10(val/10);
   return 1;
}

int mypow(int val, int pwr)
{
    if (pwr > 0) return val * mypow(val, pwr-1);
    return val;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:34:23.063

这是一种解决方法，但它应该做你想做的（虽然我看不出你为什么想要它）

无论如何，首先，您需要确定哪个数字是最左边的数字。

为此，您需要知道底数（您确实知道，对吗？）一旦您知道最左边的数字，您需要用它的位置乘以底数减去这个确切的数字......你就完成了。

这是有关如何完成此操作的代码片段。虽然未经测试。

```
int truncate_left(int val, int base) {    
    int Multiplier = 1, LeftDigit = val;
    while(LeftDigit > base) {
        LeftDigit /= base;
        Multiplier *= base;
    }
    return val - (LeftDigit * Multiplier);
} 
```

为了处理负数，我们需要添加一些额外的东西。

```
int truncate_left(int val, int base) {
    bool isNegative = (val < 0);
    int Multiplier = 1, LeftDigit = val;
    if(isNegative) LeftDigit *= -1;
    while(LeftDigit > base) {
        LeftDigit /= base;
        Multiplier *= base;
    }
    if(isNegative) LeftDigit *= -1;
    return val - (LeftDigit * Multiplier);
} 
```

标志会记住，如果数字一`isNegative`开始是负数并且为了我们的方便而存在（我们也可以检查`val < 0`两次）。它变为`LeftDigit`正数（它是“绝对值”，确定乘数，然后将其变为负数。

由于`val`是负数，我们从中减去另一个负值（-LeftDigit * Multiplier），它等于`+`，导致正确的结果并保留符号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T11:38:42.050

如果字符串没有作弊：

```
int truncate_left(int i) {
    return std::stoi(std::to_string(i).substr(1));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T11:30:58.853

我刚刚写了：

```
int truncate_left(int x)
{
  int c = (int)log10(x);   // c: digits - 1
  int p = pow(10,c);       // p: 10 ^ c
  int k = x / p;           // k: leftmost non-zero digit
  return x - k * p;
} 
```

*注：`x`应大于零。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-23T11:35:18.347

没有捷径可走。您必须将 17301 写为 10000 + 7301。很明显 truncate_left 返回 7301 部分。剩下的就是找出 10000 部分，您可以从“打印数字”代码示例中删除它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T12:02:54.933

也检查一下这个，

```
unsigned int tru(unsigned int a)
{
unsigned int b = a,c=0;

while(b!=0)
{
 c++;
 b /=10;
}

cout<<"length: "<<c<<endl;

int mul= 1;
c--;

while(c)
{
 mul *= 10;
 c--;
}

cout<<"mul is "<<mul<<endl;

return a%mul;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T12:08:50.600

```
unsigned truncate_left_aux(unsigned n, unsigned sum, unsigned base){
    unsigned nn;
    return (0==(nn=n/10))? sum : truncate_left_aux(nn, sum + (n % 10) * base, 10*base);
}

unsigned truncate_left(unsigned n){
    truncate_left_aux(n, 0, 1);
} 
```

# internet-explorer - HTTPS 安全性受损错误。怎么修？

> ID：16168132
> 
> 赞同：13
> 
> 时间：2013-04-23T11:24:39.530
> 
> 标签：internet-explorer, iframe, embed, security

[点击href](http://northsideupc.com/media/) - 在这个页面上我已经嵌入了iframe。它的 iframe 内容链接。如果我转到播放列表选项卡并尝试单击 IE9 控制台中的图片，我会看到：

> SEC7111：HTTPS 安全性受到威胁

有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T15:07:52.493

错误消息是 IE 警告混合内容（安全页面上的 HTTP 和 HTTPS 资源）的新方式。

法比奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T09:57:17.333

当遇到混合内容（或它认为可能是混合内容）时，这是 Internet Explorer 错误。通常错误消息还指定哪个文件有问题，如

`SEC7111: HTTPS security is compromised by [https://example.com/example.html](https://example.com/example.html)`

如果您从 https 站点链接到任何图像、JavaScript 或 CSS 文件，则需要使用 https。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T16:54:02.870

在我的情况下，导致错误的原因是 javascript 调用

```
document.write("something"); 
```

删除此脚本块后，不再抛出异常。

# mfc - 从 Windows 资源管理器中隐藏文件夹

> ID：16168136
> 
> 赞同：0
> 
> 时间：2013-04-23T11:24:53.443
> 
> 标签：mfc, windows-shell

我希望从资源管理器中隐藏文件夹。*当有人取消选中在文件夹中显示隐藏文件*选项时，它不应该是可见的。

是否有任何 Shell API 来实现这一点，或者我如何在 MFC 或 win api 或 C++ 等中实现？有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:53:19.563

不，不可能使用已记录或未记录的 Shell API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:30:24.047

使用带有标志的[SetFileAttributes](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365535%28v=vs.85%29.aspx)`FILE_ATTRIBUTE_HIDDEN`。为确保您不会意外清除其他属性，您需要先使用[GetFileAttributes](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364944%28v=vs.85%29.aspx)读取目录属性。

例如：

```
void hidePath( const std::wstring& path )
{
    const DWORD attributes = GetFileAttributes( path.c_str() );
    SetFileAttributes( path.c_str(), attributes | FILE_ATTRIBUTE_HIDDEN );
} 
```

另请参阅：[如何隐藏/取消隐藏文件而不删除 Windows 上 C++ 中的其他属性](https://stackoverflow.com/questions/10387145/how-to-hide-un-hide-a-file-without-erasing-other-attributes-in-c-on-windows)

# jenkins - 在本地安装詹金斯

> ID：16168143
> 
> 赞同：0
> 
> 时间：2013-04-23T11:25:20.867
> 
> 标签：jenkins

我需要在我的本地主机（CentOS）中安装 Jenkins，并尝试在以下链接中发布程序：

[https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+RedHat+distributions](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+RedHat+distributions)

但它给出了一个错误说，

解析 pkg.jenkins-ci.org... 63.246.20.93 连接到 pkg.jenkins-ci.org|63.246.20.93|:80... 失败：连接被拒绝。

虽然， wget [http://pkg.jenkins-ci.org](http://pkg.jenkins-ci.org)工作正常。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:58:07.283

我建议你先下载战争，然后运行**`java -jar jenkins.war`**看看它是否正常工作。它将从默认值开始。

如果一切正常，也许只需用脚本包装它并将其配置为作为服务运行。

我希望这有帮助。

**编辑**：这是旧的，但值得一提的是，Jenkins 有一个正式的 Docker 映像，您可以使用它来快速启动本地实例以进行测试。您还可以将本地目录挂载到容器中以进行持久存储，这使其成为 CI 开发的绝佳选择。

快速测试

```
docker run -p 8080:8080 jenkins 
```

更好的使用（使用持久性存储）

```
docker run -d --name jenkins -p 8080:8080 -p 50000:50000 -v /local/dir:/var/jenkins_home jenkins 
```

将浏览器指向[http://localhost:8080](http://localhost:8080)

见[官方 Github 页面](https://github.com/jenkinsci/docker)

# java - 通过字符串< 1.7在java中切换大小写

> ID：16168145
> 
> 赞同：2
> 
> 时间：2013-04-23T11:25:22.277
> 
> 标签：java, javascript, switch-statement

```
function checkValue(value) {
    if (value === null || value === undefined || value === '') {
        return '-';
    } else {
        switch (value) {
        case true:
            return 'Yes';
            break;
        case false:
            return 'No';
            break;
        default:
            return value;
            break;
        }
    }
} 
```

我知道按字符串切换大小写仅适用于 > 1.7。无论如何我可以在不使用传统的 java 中转换这段代码`if/else`。这段代码是用`JavaScript`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:28:29.730

改用枚举，因为不支持 <1.7 的字符串开关

```
 private enum MyEnum {
        a, b, c, d;
    }

    String val; // input
    MyEnum mye = MyEnum.valueOf(val);

    switch (mye) {
        case a:
            return something;
        case carrot:
            return something;
        ..
    } 
```

PS：伪代码。IDE 不在手上。对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:43:49.617

您可以像这样使用 Enum：

```
enum MyEnum {

    A1, A2, A3;

}

String val = "myVal"; // your input

MyEnum enumVal;
try {
    enumVal = MyEnum(val);
} catch (IllegalArgumentException iae) {
    enumVal = null;
}

switch (enumVal) {

    case A1: 
        doSomething();
        break;

    case A2: 
        doOtherStuff();
        break;

    default: 
        doDefault();
        break;

} 
```

如果你认为 try 块太难看，你可以使用apache [commons lang的](http://commons.apache.org/proper/commons-lang/)[EnumUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/EnumUtils.html)，它会为你做这些事情，你只需要改变这个：

```
MyEnum enumVal;
try {
    enumVal = MyEnum(val);
} catch (IllegalArgumentException iae) {
    enumVal = null;
} 
```

有了这个：

```
MyEnum enumVal = EnumUtils.getEnum(MyEnum.class, val); 
```

**编辑**

对于您只想过滤不是字符串的布尔值的情况，您可以执行以下操作：

```
Object input = "MyString";

if (input == Boolean.TRUE) {
    return "Yes";
} else if (input == Boolean.FALSE) {
    return "No";
} else {
    return input;
} 
```

如果它们是字符串，则需要比较字符串本身，例如：

```
if ("true".equals(input)) {
    return "Yes";
} else if ("false".equals(input)) {
    return "No";
} else {
    return input;
} 
```

# c# - 如何在 .config 文件中指定相对于文件的路径？

> ID：16168154
> 
> 赞同：12
> 
> 时间：2013-04-23T11:25:57.717
> 
> 标签：c#, .net, app-config

我使用的应用程序解释 .NET`.config`文件。我添加了一行指定所需证书的路径

```
<add key="Certificate" value="..\certificate.abc"/> 
```

但是，我发现该应用程序仅在从其所在的确切文件夹运行时才`.exe`有效`.config`。如果从另一个文件夹运行，它会失败，因为它会在*相对于工作目录*`../`扩展的位置查找证书。

 *我应该在配置文件中写什么，以确保路径*相对于配置文件*而不是工作目录进行`..\certificate.abc`扩展？

 *我无法更改应用程序（它不是我的），我只能更改配置文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T11:29:45.167

通过使用波浪号

```
value="~/certificate.abc" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-20T09:01:40.300

在 Visual Studio 2015 中，“~”关键字不再起作用。您现在可以使用：

```
value="folder\subfoler" 
```

“文件夹”与.exe文件同级

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:20:53.420

您不能仅通过更改配置文件来更改此设置。除非你使用绝对路径。

如果您可以更改应用程序...

如果这是一个 asp.net 应用程序，则使用`Server.MapPath`. 如果是 Windows 应用程序，您需要获取执行应用程序的目录并将其与配置文件中的相对路径结合起来。

`System.Reflection.Assembly.GetExecutingAssembly().Location`将为您提供 .EXE 文件的路径。然后，您可以调用[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)将您的相对路径与应用程序的路径组合起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-24T11:33:51.690

`..\`上升一个文件夹级别。根据需要重复多次，例如`..\..\`进入您的 bin 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:31:13.520

我认为在你的情况下你需要设置文件名。您知道的所有文件所在的文件夹（如果可以更改文件夹 - 设置没有 ../ 的文件夹）

以及您需要使用路径的地方 - 结合应用程序的当前位置（可以在运行时获取）和设置中的密钥

或使用

```
System.Web.HttpContext.Current.Server.MapPath("~/[PARTH_TO_FILE]") ' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T14:35:36.253

您的配置文件可能位于执行文件之外的其他位置。当您指定执行路径时，我知道这是基于桌面的应用程序，因此您可以这样做。

在配置中。

```
 <setting name="FilePath" serializeAs="String">
        <value>AppPath\MyFile.abc</value>
    </setting> 
```

并恢复这一点。

```
 var path = System.Configuration.ConfigurationManager.AppSettings["FilePath"];

            if  (path !=null && path.Contains("AppPath"))
            {

                var filepath = System.IO.Path.Combine(
                    System.Reflection.Assembly.GetExecutingAssembly().Location,
                    path.Replace("AppPath", string.Empty).ToString());

                Console.WriteLine(filepath);
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-19T09:47:23.153

在要放置日志的文件路径之前使用“../”

如果您使用以下代码 ErrorLog 文件夹将在您的 bin\Debug\net5.0 中创建**

# vb.net - System.Drawing.Image 类型的值无法转换为 System.Drawing.Image 的一维数组

> ID：16168164
> 
> 赞同：0
> 
> 时间：2013-04-23T11:26:31.750
> 
> 标签：vb.net, image, tabcontrol

那是我的代码：

```
Dim mimage = Image.FromStream(stream)
Me.TabControl2.ImageList.Images.AddRange(mimage) -> Here
Me.TabControl2.SelectedTab.ImageIndex = 0
Me.TabControl2.ImageList.Images.RemoveAt(0) 
```

它给了我那个错误（标题）。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:29:24.233

AddRange 需要一个数组

```
Me.TabControl2.ImageList.Images.Add(mimage)
Me.TabControl2.ImageList.Images.AddRange({mimage}) 
```

# ruby-on-rails-4 - 使用多个清单文件进行 Rails 4 资产预编译

> ID：16168166
> 
> 赞同：15
> 
> 时间：2013-04-23T11:26:33.110
> 
> 标签：ruby-on-rails-4

我有一个 Rails 4 应用程序。

我有 3 组清单文件，以便为我的应用程序分离逻辑。

这些文件是

```
application.js
backoffice.js
pos.js

application.css
backoffice.css
pos.css 
```

在我的布局文件中，我使用关联的 javascript_link_tags 引用这些资产

我已将以下内容添加到我的 production.rb 文件中（为了将这些文件包含在资产的预编译中）：

```
config.assets.precompile += %w( backoffice.js pos.js pos.css backoffice.css ) 
```

然后我运行 rake assets:precompile，但它没有拾取附加文件。它只编译 application.js 和 application.css 清单。

在 production.rb 中，我也有：

```
config.serve_static_assets = true
config.assets.compile = false 
```

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-23T11:41:31.873

如果你复制这一行

```
config.assets.precompile += %w( backoffice.js pos.js pos.css backoffice.css ) 
```

到`config/application.rb`（Rails 4.0）（而不是`config/environments/production.rb`）它将起作用。

我从这里得到一个提示：[Rails 4 assets.precompile](https://stackoverflow.com/questions/14882337/rails-4-assets-precompile)

正如评论中所建议的那样，在**Rails 4.2**中，您应该在上面的行中写`config/initializers/assets.rb`

# ios - 自动滚动滚动视图？

> ID：16168180
> 
> 赞同：-2
> 
> 时间：2013-04-23T11:27:03.147
> 
> 标签：ios, objective-c, uiscrollview, uiimage

我的 view2 中有一个滚动视图，当我打开该视图 2 时，我想在 x 轴上滚动滚动视图内容，我尝试了这个，但对我不起作用..请帮助

```
 self.scrollView.scrollEnabled = NO;

CGFloat scrollHeight = 100;
[UIView animateWithDuration:10
                      delay:0
                    options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     self.scrollView.contentOffset = CGPointMake(0, scrollHeight);
                 }
                 completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T11:19:36.213

在您的 viewDidload 中使用此代码

```
 [Scrollview setContentOffset:CGPointMake(-0.5,Scrollview.contentOffset.y)
                                animated:YES]; 
```

就是这样..现在在视图控制器的加载时，滚动视图在负 x 坐标中移动到 0.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:32:01.373

当您修改滚动视图的内容大小时，它将滚动..

尝试这个..

```
[scrollView setContentSize:modifiedSize]; 
```

**注意：**当宽度超过 320 或高度超过视图的高度时，它会滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:56:27.603

您可以轻松使用：

```
[myScroll scrollRectToVisible: (CGRect)  animated: (BOOL)]; 
```

例子：

```
[myScroll scrollRectToVisible:CGRectMake(myScroll.frame.origin.x,myScroll.frame.origin.y,500,0)  animated: NO]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T12:03:31.810

我之前写的解决方案不起作用。

但这将：

但是我用 performSelector:withDelay 代替了它，并将 setContentOffset 与有效的 CGPoint 一起使用。

您应该创建一个始终调用自身的方法，并始终增加 x 或 y contentOffset。

最简单的方法是创建一个 ivar，并在将一直调用的方法中始终更新此值。

# mysql - pentaho中的mysql程序

> ID：16168185
> 
> 赞同：0
> 
> 时间：2013-04-23T11:27:19.863
> 
> 标签：mysql, pentaho, dashboard

我在 CDE 仪表板查询中使用我们的 put 参数编写程序 mysql，这样是 corect 吗？

```
if ${colum}=1
select ordernumber,productcode from orderfact
else
select ordernumber,productcode,priceeach,totalprice from orderfact 
```

${colum} 是我的参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T15:02:44.673

不。CDA 中的查询只是一个 SQL 查询，可以参数化。

相反，您可以这样做：

```
select ordernumber, productcode, case when colum=1 then null else priceeach end 
```

ETC..

尽管如此，这是一件很奇怪的事情。你能解释一下你的用例吗？

# javascript - 传单：geojson 图层上的标记图标大小

> ID：16168188
> 
> 赞同：2
> 
> 时间：2013-04-23T11:27:30.287
> 
> 标签：javascript, leaflet

我正在使用 Leaflet 显示 Geojson 图层。我想更改默认标记图标大小。

这是我想出的代码：

```
 $.ajax({
        type: "GET",
        url: "data.json",
        dataType: 'json',
        success: function (response) {
            geojsonLayer = L.geoJson(response, {
                pointToLayer: function(featuer, latlng) {
                    var smallIcon = L.Icon.extend({
                        options: {
                            'iconSize': [10, 10]
                        }
                    });
                    var myIcon = new smallIcon();
                    return L.marker(latlng, {icon: smallIcon});
                },
                onEachFeature: onEachFeature
            }).addTo(map);
        }
    }); 
```

但是，我在加载页面时遇到了 javascript 错误：

```
Uncaught TypeError: Cannot read property 'popupAnchor' of undefined 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:03:50.207

我认为当你扩展 L.Icon 类时，你必须指定 IconUrl，它是用于图标的图像文件的链接。请参阅文档： http: [//leafletjs.com/reference.html#icon](http://leafletjs.com/reference.html#icon)

由于 smallIcon 构造函数不满足所有必需的选项，因此 myIcon 将是未定义的。

试试这个：

```
var myIcon = L.icon({
    iconUrl: 'leaflet/images/marker-icon.png',
    iconSize: [10,10],
    iconAnchor: [22, 94],
    popupAnchor: [-3, -76],
    shadowUrl: 'leaflet/images/marker-shadow.png',
    shadowSize: [68, 95],
    shadowAnchor: [22, 94]
});

L.marker(latlng, {icon: myIcon}).addTo(map); 
```

# php - 如何在文本中查找 URL 并创建链接？

> ID：16168189
> 
> 赞同：0
> 
> 时间：2013-04-23T11:27:31.727
> 
> 标签：php

我正在使用此代码在文本中查找 URL 并创建链接：

```
$reg_exUrl = "/((((http|https|ftp|ftps)\:\/\/)|www\.)[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,4}(\/\S*)?)/";
$text = preg_replace( $reg_exUrl, "<a href=\"$1\" target='_blank'>$1</a>", $text); 
```

但是如果网站没有http，https，ftp，ftps或www，它就不会建立链接，例如，google.com不会成为链接。此外，如果网站只有 www，例如 www.google.com，则链接为 mywebsite.com/www.google.com。你能帮我解决这些问题吗，如果文本中有 somewebsite.com 和 www.somewebsite.com ，它将成为正常链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:04:56.917

假设您的原始正则表达式是正确的，您需要做的就是：

```
$reg_exUrl = "/((((http|https|ftp|ftps)\:\/\/)|www\.)?[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,4}(\/\S*)?)/";
                                                     ^ -- Optional! 
```

您必须在这里解决一个主要问题。假设文本包含“google.com”，您的正则表达式会吐出`<a href="google.com">google.com</a>`会给您一个 404（因为这会引导您到 yourDomain.com/google.com）！您需要预先添加`http://`（或其他协议）。查看捕获。您需要做的就是查找它是否存在，或者添加一个默认值。

# angularjs - angularjs向ng-keydown添加逻辑

> ID：16168193
> 
> 赞同：3
> 
> 时间：2013-04-23T11:27:40.553
> 
> 标签：angularjs

当在输入框中输入文本时，我使用 ng-keydown 指令调用搜索函数。如果搜索字符串长度小于 3，我想阻止调用搜索函数。

我是这样做的：

```
 <input type="text" ng-keydown="filter()" ng-model="query"> 
```

在控制器中：

```
$scope.query;
$scope.filter = function () {
  if ($scope.query.length > 3)
    $scope.search()
} 
```

好的，这可行，但是是否可以直接在属性 ng-keydown 中检查搜索长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:22:30.240

简短的回答：没有。

长答案：该`ngKeydown`指令需要一个[Angular Expression](http://docs.angularjs.org/guide/expression)，而不是 JavaScript。Angular 表达式不支持条件：

> **没有控制流语句**
> 
> 您不能在表达式中编写控制流语句。这背后的原因是 Angular 哲学的核心，即应用程序逻辑应该在控制器中，而不是在视图中。如果您需要条件、循环或从视图表达式中抛出，请改为委托给 JavaScript 方法。

# php - 如何获得邮件服务器的错误响应？

> ID：16168196
> 
> 赞同：0
> 
> 时间：2013-04-23T11:27:48.477
> 
> 标签：php, email, ubuntu

我正在使用 phps 邮件功能向我的用户发送电子邮件。然而，有些用户根本没有收到它们（甚至没有被垃圾邮件过滤器接收）。在我寻找错误的过程中，我被问到（我的用户邮件提供商的好人）我从他们的服务器得到什么响应。

但是，我不知道如何获得它。它应该保存在我的服务器上的某个地方吗？在那种情况下在哪里？还是由php返回？或者保存在某处的错误日志中？或者有没有办法得到它？

我正在运行 Ubuntu 服务器并将 postfix 用于邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:34:37.533

错误至少会出现在您的邮件服务器日志中。您邮件上的发件人地址/信封发件人是什么？任何退回邮件*都应*发送至该地址。如果该地址无法投递，则退回邮件也可能被退回。因此，您需要首先检查并确保您可以访问在标题中指定的电子邮件帐户，`From:`或者在`Return-path:`标题中指定的电子邮件帐户（如果存在）。如果它们不存在，您将需要查看邮件服务器日志，postfix 通常会记录 /var/log/mail.log 但这可以更改，因此您的配置可能会有所不同。

处理退回邮件的另一种好方法是使用类似 VERP（[http://en.wikipedia.org/wiki/Variable_envelope_return_path](http://en.wikipedia.org/wiki/Variable_envelope_return_path)）的可变信封返回路径。这样，您可以通过查看退回邮件的地址来自动处理退回邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:34:01.423

来自php网：

> 如果 mail() 遇到错误，它只会返回 false。要找出原因，我们需要发现 sendmail 命令的错误所在。在 Linux 上，这通常是 /var/log/messages。
> 
> 邮件错误不会出现在 /var/log/httpd/errors 中（因为 apache 不知道 /usr/sbin/sendmail 返回 false 是错误），也不会出现在 /var/log/mail/ 中（因为电子邮件从来没有达到后缀，也没有发生 SMTP/传递错误。）

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

但是您可以轻松地将电子邮件的结果存储到一个变量中，如前所述，它只会是`true`or `false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:34:54.453

您可以检查是否已发送邮件，如下所示：

```
<?php
 $to = "recipient@example.com";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";
 if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
  } else {
   echo("<p>Message delivery failed...</p>");
  }
 ?> 
```

您也可以单独存储消息发送或失败的日志。

# algorithm - 电网发现（可视化）

> ID：16168199
> 
> 赞同：0
> 
> 时间：2013-04-23T11:27:53.747
> 
> 标签：algorithm, graph, visualization

我正在寻找一种方法来发现电网中的互连，从源（多个）到地面。我有一些来源，最后是交换机和接收器层。我的工作是发现哪个接收器从哪个来源消耗功率。我认为解决方案是图论，但我找不到直接的解决方案。有什么建议么？我脑子里有一些术语：流网络、图形着色、路径着色，但是我怎样才能将它们一起使用呢？

# regex - 正则表达式太贪心

> ID：16168203
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:04.867
> 
> 标签：regex, c#-4.0

我正在尝试编写一个正则表达式，但它太贪婪了。输入字符串可以是以下任一格式：

```
STUFF_12_1234 or STUFF_1234 
```

我想要做的是创建一个正则表达式来抓取最后一个`_`. 所以在上面的例子中，这将是数字“1234”。最后一个之后的字符数`_`会有所不同，它们可能是字母和数字的组合。我尝试了以下表达式：

```
_(.*?)\Z 
```

这适用于“STUFF_1234”，返回“1234”，但是当我对“STUFF_12_1234”使用它时，它返回“12_1234”</p>

任何人都建议如何更改表达式以解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:34:55.093

至少有 3 种方法可以获取出现在最后一个下划线之后的文本`_`：

*   保留当前的正则表达式，但指定. 由于正则表达式是从右到左搜索的，因此惰性量词将匹配尽可能少的字符，直到字符串中最后一个字符之后。[`RightToLeft`](http://msdn.microsoft.com/en-sg/library/yd1hzczs.aspx) `RegexOptions``_`

*   `_`修改正则表达式以在要匹配的文本中禁止下划线：

    ```
    _([^_]*)\Z 
    ```

*   拆分输入字符串`_`并选择最后一项。因为这就[`String.Split`](http://msdn.microsoft.com/en-sg/library/system.string.split.aspx)足够了，不需要[`Regex.Split`](http://msdn.microsoft.com/en-sg/library/system.text.regularexpressions.regex.split.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:31:03.757

`_`从有效字符列表中排除：

```
_([^_]*)\Z 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:35:21.247

使用正则表达式

```
_([^_]*)\Z 
```

正则表达式从左到右搜索，所以贪心控制它们是早停还是晚停。但它不会改变匹配左端的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:38:13.080

两种选择。

1.  使用正则表达式：

    ```
    _([^_]*?) 
    ```

    您只需要选择`_`字符或

    ```
    _(\d*?) 
    ```

    如果您知道字符是数字 ( `\d`)

2.  带子字符串：

    ```
    yourString.Substring(yourString.LastIndexOf('_')+1) 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:00:26.213

试试这个：

```
String s_YourString="STUFF_12_34";
String s_OP = Regex.Match(s_YourString, "_[^_.]+$").Value.Trim('_');//Output:34            
s_YourString="STUFF_1234";
s_OP = Regex.Match(s_YourString, "_[^_.]+$").Value.Trim('_');   //Output:1234 
```

# javascript - 让 Greasemonkey 对元素的 ajax 更改做出反应

> ID：16168204
> 
> 赞同：2
> 
> 时间：2013-04-23T11:28:07.367
> 
> 标签：javascript, greasemonkey

有一个页面加载了一个像这样的空跨度：`<span id="bla"></span>`然后用一些文本填充该跨度。

我需要我的脚本来获取该文本，但 Greasemonkey 在填充文本之前运行，甚至`waitForKeyElements`我尝试使用的函数也无济于事，因为页面加载时元素已经存在。

也许我需要另一种方式？目前我正在做：

```
waitForKeyElements ("#bla", get_span_content) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:20:56.200

由于您已经在使用[waitForKeyElements](https://gist.github.com/BrockA/2625891)，因此请使用操作函数的返回值来微调结果。如果跨度**只填充/更改一次，**代码将如下所示：

```
 waitForKeyElements ("#bla", get_span_content);

 function get_span_content (jNode) {
     var spanText   = $.trim (jNode.text () );

     if (spanText == "") {
        //-- Still blank; tell waitForKeyElements to keep looking.
        return true;
     }
     else {
        //  DO WHATEVER WITH spanText HERE.
     }
} 
```

* * *

如果**多次更改***同一个*跨度，代码将如下所示：

 **```
 waitForKeyElements ("#bla", get_span_content);

 function get_span_content (jNode) {
     var spanText   = $.trim (jNode.text () );
     var lastText   = jNode.data ("lastText")  ||  "";

     if (spanText != lastText) {
         //  DO WHATEVER WITH spanText HERE.

         jNode.data ("lastText", spanText);
     }

     return true;
} 
```**

# spring - 使用 Ant 和 Tomcat 7 的 Spring MVC 分步教程 - FileNotFoundException

> ID：16168208
> 
> 赞同：1
> 
> 时间：2013-04-23T11:28:11.427
> 
> 标签：spring, ant, tomcat7

我正在尝试在 Springsource.org ( [http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html) ) 中运行该示例，因为我正在尝试熟悉 Ant . 问题是，它有点过时了，它使用 Spring 2 和 Tomcat 6，而我使用的是 Spring 3 和 Tomcat 7。我知道这个网站上的其他人已经问过这个例子，但我已经尝试了一切，仍然得到上面的错误，在 1.4。

我设置了tomcat_home java_home 和ant_home 变量。

如果有人可以提供帮助，我将不胜感激。

她是我的代码：

build.properties

```
# Ant properties for building the springapp

appserver.home=C:/apache-tomcat-7.0.39-windows-x64/apache-tomcat-7.0.39
# for Tomcat 5 use $appserver.home}/server/lib
# for Tomcat 6 use $appserver.home}/lib
appserver.lib=${appserver.home}/lib

deploy.path=${appserver.home}/webapps

tomcat.manager.url=http://localhost:8080/manager/text
tomcat.manager.username=tomcat
tomcat.manager.password=s3cret 
```

构建.xml

```
<?xml version="1.0"?>

<project name="springapp" basedir="." default="usage">
    <property file="build.properties"/>

    <property name="src.dir" value="src"/>
    <property name="web.dir" value="war"/>
    <property name="build.dir" value="${web.dir}/WEB-INF/classes"/>
    <property name="name" value="springapp"/>

    <path id="master-classpath">
        <fileset dir="${web.dir}/WEB-INF/lib">
            <include name="*.jar"/>
        </fileset>
        <!-- We need the servlet API classes: -->
        <!--  * for Tomcat 5/6 use servlet-api.jar -->
        <!--  * for other app servers - check the docs -->
        <fileset dir="${appserver.lib}">
            <include name="servlet*.jar"/>
        </fileset>
        <pathelement path="${build.dir}"/>
    </path>

    <target name="usage">
        <echo message=""/>
        <echo message="${name} build file"/>
        <echo message="-----------------------------------"/>
        <echo message=""/>
        <echo message="Available targets are:"/>
        <echo message=""/>
        <echo message="build     --> Build the application"/>
        <echo message="deploy    --> Deploy application as directory"/>
        <echo message="deploywar --> Deploy application as a WAR file"/>
        <echo message="install   --> Install application in Tomcat"/>
        <echo message="reload    --> Reload application in Tomcat"/>
        <echo message="start     --> Start Tomcat application"/>
        <echo message="stop      --> Stop Tomcat application"/>
        <echo message="list      --> List Tomcat applications"/>
        <echo message=""/>
    </target>

    <target name="build" description="Compile main source tree java files">
        <mkdir dir="${build.dir}"/>
        <javac destdir="${build.dir}" source="1.5" target="1.5" debug="true"
               deprecation="false" optimize="false" failonerror="true">
            <src path="${src.dir}"/>
            <classpath refid="master-classpath"/>
        </javac>
    </target>

    <target name="deploy" depends="build" description="Deploy application">
        <copy todir="${deploy.path}/${name}" preservelastmodified="true">
            <fileset dir="${web.dir}">
                <include name="**/*.*"/>
            </fileset>
        </copy>
    </target>

    <target name="deploywar" depends="build" description="Deploy application as a WAR file">
        <war destfile="${name}.war"
             webxml="${web.dir}/WEB-INF/web.xml">
            <fileset dir="${web.dir}">
                <include name="**/*.*"/>
            </fileset>
        </war>
        <copy todir="${deploy.path}" preservelastmodified="true">
            <fileset dir=".">
                <include name="*.war"/>
            </fileset>
        </copy>
    </target>

<!-- ============================================================== -->
<!-- Tomcat tasks - remove these if you don't have Tomcat installed -->
<!-- ============================================================== -->

    <path id="catalina-ant-classpath">
        <!-- We need the Catalina jars for Tomcat -->
        <!--  * for other app servers - check the docs -->
        <fileset dir="${appserver.lib}">
            <include name="catalina-ant.jar"/>
            <include name="tomcat-coyote.jar"/>
            <include name="tomcat-util.jar"/>
            <include name="tomcat-juli.jar"/>           
        </fileset>
    </path>

    <taskdef name="install" classname="org.apache.catalina.ant.DeployTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="list" classname="org.apache.catalina.ant.ListTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="start" classname="org.apache.catalina.ant.StartTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="stop" classname="org.apache.catalina.ant.StopTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>

    <target name="install" description="Install application in Tomcat">
        <install url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"
                 path="/${name}"
                 war="${name}"/>
    </target>

    <target name="reload" description="Reload application in Tomcat">
        <reload url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"
                 path="/${name}"/>
    </target>

    <target name="start" description="Start Tomcat application">
        <start url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"
                 path="/${name}"/>
    </target>

    <target name="stop" description="Stop Tomcat application">
        <stop url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"
                 path="/${name}"/>
    </target>

    <target name="list" description="List Tomcat applications">
        <list url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"/>
    </target>

<!-- End Tomcat tasks -->

</project> 
```

index.jsp：

```
<html>
  <head><title>Example :: Spring Application</title></head>
  <body>
    <h1>Example - Spring Application</h1>
    <p>This is my test.</p>
  </body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

  <welcome-file-list>
    <welcome-file>
      index.jsp
    </welcome-file>
  </welcome-file-list> 
```

```
BUILD FAILED
C:\Users\JohnH\workspace\springapp\build.xml:138: java.io.FileNotFoundException: http://localhost:8080/manager/text/list
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1613)
    at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:230)
    at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:150)
    at org.apache.catalina.ant.ListTask.execute(ListTask.java:51)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:435)
    at org.apache.tools.ant.Target.performTasks(Target.java:456)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
    at org.apache.tools.ant.Main.runBuild(Main.java:851)
    at org.apache.tools.ant.Main.startAnt(Main.java:235)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T10:10:43.887

在我看来，指定位置不存在 Tomcat 管理器。

尝试`http://localhost:8080/manager/text`在浏览器中访问，如果返回 HTTP 404，则说明您的环境中尚未部署 Tomcat 管理器（安装 tomcat6 很常见，但在 Ubuntu 等中忘记了 tomcat6-admin）。

# jquery - 删除项目的最高索引

> ID：16168216
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:32.473
> 
> 标签：jquery, jquery-ui

我有一个可丢弃的板。

为了使它可丢弃，我使用。

```
$("#board").droppable
({  
    greedy: true,
    tolerance:"pointer",
    drop: function (event, ui) 
    {
        .resizable
        ({containment:'#bord',aspectRatio: true})
        .css({position: 'absolute'})
        var index_highest = 0;
        $('.sleep').each(function()
        {
         var index_current = parseInt($(this).css("z-index"), 10);
         if(index_current > index_highest) 
         {
          index_highest = index_current;
         } 
        }) 
          .css('z-index',index_highest);            
    }
}); 
```

我的问题是，如果我丢弃某些东西，我丢弃的所有东西都会获得最高索引，所以不仅仅是最后一个丢弃的项目。

我也试过

```
 $(this).css('z-index',index_highest); 
```

但它不起作用，我得到了最高的 z-index，所以这不是问题。

掉落的物品使用类 sleep。

如何仅将 z-index 设置为最后删除的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T08:06:17.543

我已经在对我有用的 drop 事件上创建了这个。

```
drop: function (event, ui) 
    {
        var index_highest = 0;
        $('.sleep').each(function()
        {
          var index_current = parseInt($(this).css("z-index"), 10);
          if(index_current > index_highest) 
          {
            index_highest = index_current;
          }

        }) 
            .css('z-index',index_highest);

    } 
```

# sql - 无法在查询结果中获取单个日期

> ID：16168218
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:38.307
> 
> 标签：sql, sql-server-2005, join

**我的查询是：**

```
SELECT   sauda_date,Scrip_Code,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) AS BuyQty, 
SUM(CASE WHEN Buy_sell = 1 THEN Market_Rate ELSE 0 END) AS BuyRate, 
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) 
AS BuyAmount,
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty, 
SUM(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS SellRate,
(CASE WHEN SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)
>SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) 
THEN 'BF' ELSE 'BT' END ) as TradeType, 
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) AS SellAmount, 
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) as NETQTY,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)as NetAmt,
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) as PNLAmt 
FROM tradeFile where Inst_Type='FUTIDX' OR Inst_Type='FUTSTK' 
  and Sauda_Date between convert(datetime,'1 Mar 2013') 
  and convert(datetime,'4 Mar 2013') group by Scrip_Code,ExpiryDate,sauda_date 
```

**通过此查询，我得到的结果为：**

![在此处输入图像描述](https://i.stack.imgur.com/A0vKj.jpg)

正如我们在 2013-03-11 看到的，有多个记录。我想要他们的 BuyQty、SellQty 等列的总和。即按日期求和记录为

```
sauda_date  scrip_code  BuyQty
2013-03-11   BANKNIFTY   150 [sum for this date] 
```

**我努力了：**

```
SELECT Scrip_Code,sauda_date,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) AS BuyQty,
SUM(CASE WHEN Buy_sell = 1 THEN Market_Rate ELSE 0 END) AS BuyRate,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END)
AS BuyAmount,
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty,
SUM(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS SellRate,
(CASE WHEN SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)>
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) THEN 'BF' ELSE 'BT' END ) 
as TradeType,
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) AS SellAmount,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) as NETQTY,
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)as NetAmt,
SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)-
SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) as PNLAmt 
FROM tradeFile where Inst_Type='FUTIDX' OR Inst_Type='FUTSTK' 
   and Sauda_Date between convert(datetime,'1 Mar 2013') 
   and convert(datetime,'10 Mar 2013') 
   group by Scrip_Code,convert(datetime,sauda_date) 
   order by convert(varchar(11),sauda_date) 
```

**但我得到的结果是：**

![在此处输入图像描述](https://i.stack.imgur.com/mM04n.jpg)

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:32:32.760

更改`convert(datetime,sauda_date)`为`datediff(d,0,sauda_date)`同一列并按同一列分组

IE

```
SELECT   datediff(d,0,sauda_date) sauda_date,Scrip_Code,...
group by Scrip_Code,ExpiryDate,datediff(d,0,sauda_date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:33:53.810

请试试：

```
SELECT DISTINCT
    *, 
    SUM(BuyQty) OVER (PARTITION BY CONVERT(NVARCHAR(20), sauda_date, 106)sauda_date),
    SUM(SellQty) OVER (PARTITION BY CONVERT(NVARCHAR(20), sauda_date, 106)),
    .....
FROM YourTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:46:07.893

类似于@richardTheKewi，但我使用转换从日期时间字段中释放时间元素

```
select convert(varchar(10),sauda_date,102) sauda_date,Scrip_Code, .....
group by Scrip_Code,ExpiryDate,convert(varchar(10),sauda_date,102) 
```

# php - 为 AJAX 应用程序 (PHP) 加载一次核心

> ID：16168219
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:40.270
> 
> 标签：php, jquery, ajax

我正在通过 PHP 构建一个使用 AJAX (jquery) 功能齐全的画廊网站。

我已经从我建立的其他网站准备了一个 CORE。

我的问题是：我只想加载网站核心（db、urlmanager、define&constants 等）一次，而不是在我使用 ajax 加载的每个页面上加载。

IE：我有这个页面：gallery.php、init.php、albums.php

但是当我在 AJAX 上调用每个（$.ajax......album.php）时，我需要执行“require_once ... core.php”

并在每次通话时打开另一个数据库连接。

有解决办法吗？如果没有，那么在 ajax 应用程序中安装 php 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:43:14.370

PHP 是一种脚本语言，所以是的，您确实需要在每次页面加载时包含（或要求）所有相关文件。有一些解决方案可以让您更轻松，但它们不会改变基本事实。

可能的解决方案：

*   **将您的核心文件保存到单个`.phar`（PHP 存档）文件中。**PHAR 是一种将整个库组合成单个文件的方法，以便于加载。你仍然需要在你的程序中包含 phar 文件，但是一旦你完成了它中的所有类都应该可用，而无需进一步包含。更多信息在这里： http: [//phpmaster.com/packaging-your-apps-with-phar/](http://phpmaster.com/packaging-your-apps-with-phar/)

*   **使用自动加载器机制。**PHP 有一个自动加载系统，允许它在引用类时自动加载它们。这可以使您不必手动包含所需的文件。你仍然需要编写一个自动加载器函数，它确实包含它找到的文件，并构建你的代码以便自动加载器可以找到文件，但是你的主代码库应该没有太多的包含。在此处阅读更多信息：http: [//phpmaster.com/autoloading-and-the-psr-0-standard/](http://phpmaster.com/autoloading-and-the-psr-0-standard/)

*   **使用操作码缓存，例如 APC 或操作码。**这些工具是 PHP 扩展（虽然在 PHP 5.5 发布时将内置 Opcode 扩展），它们在 PHP 代码通过 PHP 解释器运行后将其保留在内存中。这意味着下次您加载相同的代码时，它将运行得更快，因为它不需要再次处理。这不会影响代码中包含/要求的数量，但确实意味着 PHP 解释器不必重复处理它们。这是 Opcode 上的链接：[https ://blogs.oracle.com/opal/entry/using_php_5_5_s](https://blogs.oracle.com/opal/entry/using_php_5_5_s)

*   **使用 PHP 编译器，例如 HipHop。**这是最极端的——只需将整个代码库编译成可执行文件。PHP 将不再需要包含任何内容。您可能需要重组您的代码库以使其可行。在此处阅读有关 HipHop 的信息：[http ://www.hiphop-php.com/wp/](http://www.hiphop-php.com/wp/)

上述大多数选项都可以组合，例如，您可以编写一个供自动加载器使用的 phar 库，并同时使用操作码缓存来加速它。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:38:49.977

如果您需要在 ajax 加载页面中执行 db 请求，则无法解决，您仍然需要您的 db php 文件，因为它是一个全新的请求。

如果您不需要执行 db 请求，只需不要加载 db 文件。

# c# - 自动修剪表单输入中的空白

> ID：16168220
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:40.730
> 
> 标签：c#, asp.net-2.0

我有一个包含许多输入的表格，每个输入都需要`Trim`在处理之前进行处理。在每次使用值时修剪这些值会很费力 - 而且不是很健壮，因为每个值都在表单代码隐藏中的许多地方使用。

我正在考虑为我的每个属性做这样的事情：

```
private string _surname
public string Surname
{
    get
    {
        return _surname.Trim();
    }
    set
    {
        _surname = value;
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    Surname = txtSurname.Text;
} 
```

不过，即使这看起来也很冗长。特别是对于具有大量输入的表单。也许很简单：

```
private string _txtSurname;

protected void Page_Load(object sender, EventArgs e)
{
    _txtSurname = txtSurname.Text.Trim();
} 
```

但这与第一个示例没有相同的鲁棒性，如果我在其他地方分配相同的属性，我可能会忘记我需要先修剪。我觉得应该有一种更简洁的方式来处理这个问题。在那儿？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:58:55.097

**更新**：扩展方法方法，虽然从可读性的角度来看功能不是很好。直观地说，调用`foo.NullSafeTrim();`where`foo = null`会抛出一个`NullReferenceException`. 但是，由于它的实现方式，它没有。嗯。

我同意添加`.Trim()`到每个 getter 和 setter 会很费力。尤其是当您必须处理所有 null 检查以避免`NullReferenceException`s. 另一种使代码更紧凑的选择是使用[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。例如：

```
public static class MyExtensions
{
     public static string NullSafeTrim(this string value)
     {
         if (value != null)
         {
             value = value.Trim();
         }

         return value;
     }
} 
```

然后你可以使用以下模式：

```
private string _surname;
public string Surname
{
    get { return _surname.NullSafeTrim(); }
    set { _surname = value.NullSafeTrim(); }
} 
```

使用扩展方法有一些注意事项，您应该能够通过搜索 SO 找到这些方法。

或者，您可以在处理值的任何类中执行所有修剪和空值检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:12:48.493

如果它是一个新项目或者允许修改代码，我将创建一个`Control`派生自的新项目`TextBox`，覆盖该`Text`属性以修剪基值，然后使用它而不是标准的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:31:32.493

空的 get 不起作用，您的设置实际上没有设置到支持字段！

```
private string _txtSurname
{
   get;  // problematic!
   set { return value.Trim();}
} 
```

试试下面：

```
public string TxtSurname
{
   get { return _txtSurname;}
   set { _txtSurname=value.Trim();}
} 
```

在页面加载中，不要在私有成员中工作，而是使用属性

```
protected void Page_Load(object sender, EventArgs e)
{
    TxtSurname = SomeText.Trim();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:48:09.373

为什么不创建私有变量并完整填写表单的属性。然后，您可以在属性的 get 和 set 上提供 trim() 功能，并使用该属性来读取和分配您的表单值，而不是直接使用该字段。

```
private string _txtSurname;

public string TxtSurname
{
    get
    {
        return string.IsNullOrWhiteSpace(_txtSurname) ? string.Empty : _txtSurname.Trim();
    }
    set
    {
        _txtSurname = value.Trim();
    }
} 
```

这样，如果您设置或获取该值而无需担心它会在其他任何地方被修剪

```
protected void Page_Load(object sender, EventArgs e)
{
    this.TxtSurname = txtSurname.Text();
} 
```

如果您将表单属性移动到它们自己的类中并将字段值设为私有并且将属性设为公开（例如当您开发使用视图模型的位置时），那么您将无法直接分配给字段值并且不会冒险任何未修剪的值。当然，如果你这样做，那么你只需要设置来进行修剪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:43:45.140

我将为表单输入提供两个属性。

```
public class FormInput
{
    public string Surname { get; set; }
    public string ValidatedSurname
    {
        get
        {
            return string.IsNullOrWhiteSpace(Surname)
                   ? string.Empty
                   : Surname.Trim();
        }
    }
} 
```

# asp.net - 错误“对象引用未设置为对象的实例。”

> ID：16168221
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:40.870
> 
> 标签：asp.net, sqldatasource

```
protected void Page_Load(object sender, EventArgs e)
    {
        string query = "SELECT Posts.*, Import_Export.* FROM Import_Export INNER JOIN Posts ON Import_Export.CatID = Posts.CatID where Import_Export.Parent=@Parent ";
        if (Request.QueryString["CID"] != null)
        {
            query += " and Import_Export.CatID=@CatID";
            SqlDataSource2.SelectCommand = query;
            SqlDataSource2.SelectParameters["Parent"].DefaultValue = Request.QueryString["Type"].ToString();
            SqlDataSource2.SelectParameters["CatID"].DefaultValue = Request.QueryString["CID"].ToString();
        }
        else
        {
            SqlDataSource2.SelectCommand = query;
            SqlDataSource2.SelectParameters["Parent"].DefaultValue = Request.QueryString["Type"].ToString();
        }
    } 
```

嗨
，我写了这段代码，当我运行这段代码时，发生了以下错误：
对象引用未设置为对象的实例。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:02:35.477

总结一下它应该是什么样子

```
SqlDataSource2.SelectCommand.Parameters.Add("Parent", System.Data.SqlDbType.NVarChar);
SqlDataSource2.SelectCommand.Parameters["Parent"].Value =   Request.QueryString["Type"].ToString(); 
```

或者

```
 SqlDataSource2.SelectCommand.Parameters.AddWithValue("Parent",Request.QueryString["Type"].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:03:45.723

尝试这个

```
protected void Page_Load(object sender, EventArgs e)
    {
        string query = "SELECT Posts.*, Import_Export.* FROM Import_Export INNER JOIN Posts ON Import_Export.CatID = Posts.CatID where Import_Export.Parent=@Parent ";
        if (Request.QueryString != null)
        {
            Parameter par = new Parameter("@Parent", DbType.String, Request.QueryString["Type"].ToString());
            SqlDataSource2.SelectParameters.Add(par);

            if (Request.QueryString["CID"] != null)
            {
                query += " and Import_Export.CatID=@CatID";
                SqlDataSource2.SelectCommand = query;
                Parameter par2 = new Parameter("@CatID", DbType.String, Request.QueryString["CID"].ToString());
                SqlDataSource2.SelectParameters.Add(par2);
            }
            else
            {
                SqlDataSource2.SelectCommand = query;
            }
        }
    } 
```

# php - 将数字除以 Wordpress 小部件

> ID：16168223
> 
> 赞同：0
> 
> 时间：2013-04-23T11:28:47.383
> 
> 标签：php, wordpress

我正在使用以下脚本将**16**除以特定侧边栏中的动态小部件数量：

```
$widgets = wp_get_sidebars_widgets();
$extra = 16/count($widgets['section-one-widgets']); 
```

问题是，虽然这正是我所追求的，但我收到以下错误消息：

```
PHP Warning:  Division by zero in /wp-content/themes/mythemename/test.php on line 2 
```

有没有办法重写上面的脚本，这样我就不会收到错误？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:30:53.977

您需要先检查`count($widgets['section-one-widgets']);`是否大于零

```
$extra = (count($widgets['section-one-widgets']) == 0) ? 0 : 16/count($widgets['section-one-widgets']); 
```

您应该始终针对导致失败的确切情况进行测试，在这种情况下它并不重要，因为计数将始终为零或更高，但在另一种情况下，您要除以一个小于零的数字，您还想允许处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:30:44.567

```
$extra = (count($widgets['section-one-widgets']) > 0) ? 16/count($widgets['section-one-widgets']) : 0; 
```

# asp.net - 需要带有 aspx 扩展名的 umbraco 站点的 URL

> ID：16168224
> 
> 赞同：2
> 
> 时间：2013-04-23T11:28:54.447
> 
> 标签：asp.net, umbraco, umbraco5, umbraco-blog

我是 Umbraco 的新手，所以如果问题很简单，请原谅我。

我的网站有**[http://www.abc.com](http://www.abc.com)**和**[http://www.abc.com/employee](http://www.abc.com/employee)**等网址，如何获取根 aspx 文件。我的意思是如何使用 .aspx 扩展名调用这些 URL。

如果主页模板负责[http://www.abc.com](http://www.abc.com)我需要类似[http://www.abc.com/HomePage.aspx](http://www.abc.com/HomePage.aspx)的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:05:36.497

站点是使用 .aspx 扩展名还是文件夹类型扩展名在 web.config 中设置。

您可能拥有以下集合的密钥：

添加键=“umbracoUseDirectoryUrls”值=“真”

您需要将其更改为“假”

# sharepoint - 从 Team Foundation Build 调用的 Powershell 脚本的远程执行

> ID：16168231
> 
> 赞同：3
> 
> 时间：2013-04-23T11:29:12.087
> 
> 标签：sharepoint, powershell, tfs

我正在尝试使用共享点脚本部署共享点解决方案，方法如下：

首先我测试环境，使用 windows powershell 控制台

```
New-PSSession -ComputerName developmentserver01
Enter-PSSession -computername developmentserver01
d:
cd d:\deploymentscripts
.\deploysharepoint.ps1 
```

然后我开始自动化：

1.- TFS 运行构建，在构建服务器中本地调用最后调用“deploy.ps1”。---> 这是有效的。

2.- desploy1.ps1 将放置文件复制到开发环境 developmentserver01 共享文件夹。

3.- 复制文件后，使用 powershell 的远程连接命令 deploy1.ps1 与开发环境机器 developmentserver01 连接 --> 这是有效的。

4.-此步骤失败，在此步骤中，我尝试执行已在步骤 2 中复制到开发环境机器中的部署脚本 deploySharepoint.ps1。首先使用脚本中的命令，如在 powershell 控制台中，但我看到命令在 TFS 构建机器中运行，而不是在我通过远程连接连接的机器中

```
d:
cd d:\deploymentscripts
.\deploysharepoint.ps1 
```

稍后使用不同的选项（invoke-command，...）只有这个 optionk 有效：

```
Invoke-Command -computername developmentserver01 -scriptblock{d:\DeploymentScripts\deploysharepoint.ps1 -solutionNames @("parameter1")} 
```

问题是我认为调用命令不像使用 powershell 控制台的命令那样工作，因为脚本显示用户没有访问共享点农场的权限的错误。

如果我在 Power Shell 控制台中使用远程会话运行脚本，如文章开头所示，一切正常。

如何使用脚本 desploy.ps1 的远程会话运行远程脚本 deploysharepoint.ps1，例如使用 powershell 控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:15:44.503

`invoke-command`是正确的答案。但：

> 该脚本显示用户没有访问共享点农场的权限的错误。

如果 TFS Build 的用户帐户正在（本地或远程）调用 3 脚本，则该帐户用于确定权限。

因此，要么将用于运行构建的帐户更改为具有正确 SharePoint 权限的帐户，要么为 TFS 构建帐户提供必要的权限。

# c++ - 尝试在 Ubuntu 上使用 pthread 时出错

> ID：16168233
> 
> 赞同：2
> 
> 时间：2013-04-23T11:29:15.633
> 
> 标签：c++, gcc, g++, pthreads

我正在阅读有关 C++ 线程的教程并测试了以下代码：

```
#include <iostream>
#include <pthread.h>
#include <cstdlib>

using namespace std;

#define NUM_THREADS     5

void *PrintHello(void *threadid)
{
   long tid;
   tid = (long)threadid;
   cout << "Hello World! Thread ID, " << tid << endl;
   pthread_exit(NULL);
}

int main ()
{
   pthread_t threads[NUM_THREADS];
   int rc;
   int i;
   for( i=0; i < NUM_THREADS; i++ ){
      cout << "main() : creating thread, " << i << endl;
      rc = pthread_create(&threads[i], NULL, 
                      PrintHello, &threads[i]);
      if (rc){
         cout << "Error:unable to create thread," << rc << endl;
         exit(-1);
      }
   }
   pthread_exit(NULL);
} 
```

我尝试使用 gcc 和 g++ 编译此代码，但我总是遇到编译错误。

使用 gcc -pthread thread_test.c：

> /tmp/ccmpQLyp.o: 在函数`PrintHello(void*)': thread_test.cpp:(.text+0x1a): undefined reference to`std::cout' thread_test.cpp:(.text+0x1f): 未定义引用`std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)' thread_test.cpp:(.text+0x2e): undefined reference to`std::ostream::operator<<(long)' thread_test.cpp:(.text+0x33 ): 未定义对`std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)' thread_test.cpp:(.text+0x3b): undefined reference to`std::ostream::operator<<(std::ostream& (*)(std::ostream&))' /tmp/ccmpQLyp.o: 在函数`main': thread_test.cpp:(.text+0x63): undefined reference to`std::cout' thread_test.cpp:(。 text+0x68): 未定义引用`std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)' thread_test.cpp:(.text+0x75): undefined reference to`std::ostream::operator<<(int)' thread_test.cpp:(.text+0x7a): 未定义引用`std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)' thread_test.cpp:(.text+0x82): undefined reference to`std::ostream::operator<<(std::ostream& ( *)(std::ostream&))' thread_test.cpp:(.text+0xcc): 未定义引用`std::cout' thread_test.cpp:(.text+0xd1): undefined reference to`std::basic_ostream >& std::operator<< >(std::basic_ostream >&, char const*)' thread_test.cpp:(.text+0xde): 未定义的引用`std::ostream::operator<<(int)' thread_test.cpp:(.text+0xe3): undefined reference to`std::basic_ostream >& std::endl >(std::basic_ostream >&)' thread_test.cpp:(.text+0xeb): 未定义引用`std::ostream::operator<<(std::ostream& (*)(std::ostream&))' /tmp/ccmpQLyp.o: In function`__static_initialization_and_destruction_0(int, int)': thread_test.cpp:(.text+ 0x141): 对`std::ios_base::Init::Init()' thread_test.cpp:(.text+0x150): undefined reference to`std::ios_base::Init::~Init()' 的未定义引用

你能帮我吗？我必须做些什么才能让这段代码在 Linux 和 Windows 上运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:30:13.753

使用`g++`代替`gcc`，或`-lstdc++`手动链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-04T18:19:45.033

对于任何在 2020 年阅读本文的人：

在 GCC 中，当链接到 pthread 时，不要使用“-lpthread”，而只使用“-pthread”CLI 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T16:03:52.093

了解 C++ 编译器如何链接库文件很重要。

如果我们不明确告诉编译器在哪里查找库头文件，那么它会自动查找内部`/usr/local/include`. 但是如果编译器正在寻找的头文件不存在，那么它会产生一个错误，就像你所面临的那样（即 pthread 库不存在于`/usr/local/lib`中`/usr/local/include`）。因此，您需要告诉编译器它需要查看内部`/usr/local/lib`：

像：`g++ thread.cc -lpthread -o thread`

只需在库名称前加上`-l`

# python - pep8 并使用构造函数作为验证器

> ID：16168237
> 
> 赞同：1
> 
> 时间：2013-04-23T11:29:31.243
> 
> 标签：python, pep8

这是非常微不足道的，但它困扰着我，我想我会把它扔在那里。

python netaddr 库很棒。我将它用于很多事情，包括 IP 地址验证。为此，我使用类似的东西

```
try: 
    ddd = IPRange(split[0], split[1])
except:
    return False 
```

这很好用，但 PEP8 讨厌我正在创建 'ddd' 但从不使用它。是否有另一种更好、更清洁的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:52:01.753

如果您不需要“ddd”变量，则不要声明/分配它。如果它是一个可以从其他模块中使用的模块变量，你就无法真正避免它。我建议您添加注释来解释为什么这个变量在模块中是单独的。

此外，裸露被认为是不好的做法`except:`，您至少应该使用`except Exception:`

它也在[PEP8](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)中：

> 捕获异常时，尽可能提及特定的异常，而不是使用裸的 except: 子句。

# javascript - Javascript - 聊天机器人

> ID：16168238
> 
> 赞同：1
> 
> 时间：2013-04-23T11:29:33.363
> 
> 标签：javascript, chatbot

多年来，我一直在模式匹配聊天机器人中使用以下内容。一个人在输入框中输入内容，聊天机器人在输出框中做出响应。

这只是一系列“if 语句”，而这只是其中的一小部分。

如果有人输入“是”，机器人会回复以下内容，但我提出问题的消息 4 除外。一旦提出这个问题，它将不再触发我想要的。

我不想一遍又一遍地问这个问题。这一切直到最近才奏效。我不知道为什么它不再起作用。

```
var yes_q4_asked="false";

if (input.search("yes")!= -1) {  
message[0] = "ok, yes it is."; 
message[1] = "yes, I suppose so."; 
message[2] = "ok, I understand."; 
message[3] = "ok, I guess so."; 
message[4] = "yeah, I reckon so. Say what color are your eyes?"; 
message[5] = "yes, I thought as much."; 
num = [Math.floor(Math.random()*6)]
if ((num==4) && (yes_q4_asked=="false"))
{ 
yes_q4_asked=="true";
document.result.result.value = message[num];
return true;
}
while (num==4)
{
num = [Math.floor(Math.random()*6)]
}
document.result.result.value = message[num]; 
return true;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:04:07.040

有人发现了我的问题。上面代码中的这一行：

```
yes_q4_asked=="true"; 
```

应该：

```
yes_q4_asked="true"; 
```

`one =`不是`two ==`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:33:55.443

*   `document.result.result.`你确定这是正确的吗？
*   `var yes_q4_asked="false";`为什么不使用布尔值？

# android - 如何从Android应用程序将铃声音量从低到高

> ID：16168242
> 
> 赞同：1
> 
> 时间：2013-04-23T11:29:51.713
> 
> 标签：android, ringtone, android-audiomanager

有谁知道是否有办法从Android应用程序以编程方式设置来电铃声音量从低到高？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:33:44.883

你需要使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)
试试这个：

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamVolume (AudioManager.STREAM_MUSIC,audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC),0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:38:23.723

您可以调用 getStreamMaxVolume(RingTone) 来获取铃声的最大音量。

```
 int streamMaxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
    Toast.makeText(this, Integer.toString(streamMaxVolume), Toast.LENGTH_LONG).show(); 
```

现在你有了最大音量。

然后你可以做一些改变音量的方法（使用计时器、循环、随机......）

```
 audioManager.setStreamVolume(AudioManager.STREAM_RING,**YOURVOLUMEHERE**,
 AudioManager.FLAG_ALLOW_RINGER_MODES|AudioManager.FLAG_PLAY_SOUND); 
```

# c++ - 在另一个之上加载一个 UI

> ID：16168244
> 
> 赞同：0
> 
> 时间：2013-04-23T11:29:59.177
> 
> 标签：c++, event-handling, qml, blackberry-10

我正在开发一个 BB10 应用程序。

我有一个包含登录按钮的 QML 文件。

当用户单击登录按钮时，应加载另一个包含用户名和密码文本框以及两个按钮提交和取消的 QML 文件。

单击取消按钮时，用户应返回包含登录按钮的初始 QML。

如何使用 C++ 完成这样的场景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:55:54.703

您可以在单击登录按钮时编写一个函数来加载下一个 qml 文件。

```
ApplicationUI::ApplicationUI(bb::cascades::Application *app) :
    QObject(app) {
QmlDocument *loginQml = QmlDocument::create("asset:///Login.qml").parent(
        this);
loginQml->setContextProperty("myApp", this);
rootLogin = loginQml->createRootObject<AbstractPane>();
rootLogin->setParent(this);

QmlDocument *secondPage = QmlDocument::create("asset:///SecondPage.qml").parent(
        this);
secondPage->setContextProperty("myApp", this);
rootSecond = secondPage->createRootObject<AbstractPane>();
rootSecond->setParent(this);

callFirstQml();
}
void ApplicationUI::callFirstQml() {
Application::instance()->setScene(0);
Application::instance()->setScene(rootLogin);
}

void ApplicationUI::callSecondQml() {
Application::instance()->setScene(0);
Application::instance()->setScene(rootSecond);
} 
```

猜猜这对你有用。确保在头文件中将函数名称写为 QINVOKABLE。rootLogin 和 rootSecond 也应该写在头文件中，因为，

```
private:
bb::cascades::TabbedPane *rootLogin;
bb::cascades::TabbedPane *rootSecond; 
```

# python - 提取一个数字和它后面的字符串

> ID：16168246
> 
> 赞同：0
> 
> 时间：2013-04-23T11:30:12.850
> 
> 标签：python, regex, scripting

我有一个解析日志文件的脚本，在编程的一部分中，我必须知道是否传输了消息，通过阅读这些行，我可以获得消息 ID 并知道消息是否被传输。

```
01:09:25.258 mta   Messages       I Doc O:NVS:SMTP/alarm@yyy.xx R:NVS:SMS/+654811 mid:6261
01:09:41.965 mta   Messages       I Rep 6261 OK, Message received(ID: 26)
08:14:14.469 mta   Messages       I Doc O:NVS:SMTP/alarm@xxxx.en R:NVS:SMS/+654646 mid:6262
08:14:30.630 mta   Messages       I Rep O:NVS:SMTP/alarm@azea.er R:NVS:SMS/+304859 mid:6262
08:14:30.630 mta   Messages       I Rep 6262 Error while transmitting (ID: 28) 
```

* * *

我感兴趣的行是第二行和最后一行，我想提取 6261 和它之后的 ok 和最后一行相同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:35:04.320

你不需要正则表达式。只需在空白处拆分行。

```
>>> line.split(None, 5)
['10:56:45.255', 'Message', 'I', 'Rep', '2559', 'OK, Message received'] 
```

由于您只需要 ID 和消息：

```
>>> [line.split(None, 5)[-2:] for line in file.readlines()]
[['2548', 'OK'], ['2559', 'OK, Message received'], ['2560', 'Error'], ['2561', 'Transmission... ']] 
```

请注意，消息中的空格不是问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T11:33:32.087

`/[0-9]{4} (.*)/`符合目的，但我不知道这对你来说是否足够通用。根据行 ID（2548 等）是否也可以更短，正则表达式必须稍微调整，但从显示的 4 行来看，这将起作用。

在编写正则表达式时，最重要的是不要仅从“样本”开始工作，还要从关于您尝试匹配的字符串的“可用假设”开始工作。我不能可靠地说这个解决方案完美地解决了你的问题，因为我不知道整个问题，因此无法提供完美的模式。

# java - 如何检查是否或等待消息处理完成？

> ID：16168250
> 
> 赞同：2
> 
> 时间：2013-04-23T11:30:22.050
> 
> 标签：java, spring-integration, jmockit

我想使用 Spring-Integration 框架对应用程序执行 JUnit 测试。我要测试的是：

*   如果连接到我发送的通道的服务激活器正确处理了消息
*   如果在出现任何错误的情况下调用了适当的消息错误处理过程

我正在使用 JMocikt 来验证是否调用了预期的方法。我通过调用`send`消息通道开始测试。

问题是：*我如何等待消息处理结束？*Spring 集成产生了几个线程，并在消息通道上发送立即返回。我已经尝试过的是：

*   使用`IntegrationMBeanExporter.stopActiveComponents(false, 0)`- 由于线程中断而失败
*   尝试链接服务激活器（第一：实际调用，第二：完成通知） - 它失败，因为在这种情况下，被测服务激活器返回`null`，它不能被链接。另外，我不喜欢它，因为我必须更改被测的 SI 配置。

有什么线索吗？

请不要评论不执行真实单元，而是集成测试等。我知道我在做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:08:37.263

测试用例中最常用的技术是将最终通道替换为 a `QueueChannel`，将其注入测试用例并执行`assertNotNull(finalChannel.receive(5000)`. 您甚至可以测试收到的消息以验证它是否包含预期的数据。

`null`当您使用异步处理并且最终服务不返回结果（或）时，这有点棘手。在这种情况下，您可以制作最终频道 a `<publish-subscribe-channel/>`，并在您的测试用例中，添加第二个订阅者（具有更高的`order`属性），例如 a`<bridge/>`到 a `QueueChannel`，然后`receive()`结果如上。

# sql - 满足条件时从另一个表更新一个表上的值

> ID：16168253
> 
> 赞同：0
> 
> 时间：2013-04-23T11:30:38.377
> 
> 标签：sql, oracle

我想根据另一个表中的值更新我的数据库中的一个表。2张桌子是：

```
 QUOTES(
   QUOTE_ID,
   APPROVAL
 )

PRODUCTS(
  QUOTE_ID_FK,
  LINE_APPROVAL
) 
```

我需要全部更新`PRODUCTS.LINE_APPROVAL`到`'Y'``QUOTES.APPROVAL = 'Y'`

我尝试过这样的事情，但失败了，因为我的语法不太正确，但希望你能看到我想要实现的目标：

```
UPDATE 
    PRODUCTS
SET 
    LINE_APPROVAL = 'Y'
FROM
    QUOTES,
    PRODUCTS            
WHERE
    PRODUCTS.QUOTE_ID = QUOTES.QUOTE_ID_FK
AND
    QUOTES.APPROVAL = 'Y' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:53:20.787

`WHERE ... IN`如果您调整 ID 列名称，@joelharkes 的答案将起作用。您还可以使用[MERGE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016.htm)：

```
MERGE INTO Products
USING (
  SELECT Quote_ID FROM Quotes
  WHERE Approval = 'Y') QtApp
ON (Products.Quote_ID_FK = QtApp.Quote_ID)
WHEN MATCHED THEN
  UPDATE SET Line_Approval = 'Y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:34:54.973

此查询将更新所有具有`PQUOTE_ID`出现在报价表列中的值的产品`Quote_ID_FK`（并且批准为 Y）。

```
UPDATE 
    PRODUCTS
SET 
    LINE_APPROVAL = 'Y'
WHERE 
    PQUOTE_ID IN 
       (SELECT
           QUOTE_ID_FK 
        FROM
           QUOTES
        WHERE
           APPROVAL = 'Y') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:43:40.700

您将列名放在错误的位置。您的查询应该是：

```
UPDATE  PRODUCTS
SET     LINE_APPROVAL = 'Y'
FROM    QUOTES, PRODUCTS            
WHERE   PRODUCTS.QUOTE_ID_FK = QUOTES.QUOTE_ID
AND     QUOTES.APPROVAL = 'Y' 
```

或者`INNER JOIN`：

```
UPDATE  PRODUCTS
SET     LINE_APPROVAL = 'Y'
FROM    PRODUCTS
        INNER JOIN QUOTES ON PRODUCTS.QUOTE_ID_FK = QUOTES.QUOTE_ID
WHERE   QUOTES.APPROVAL = 'Y' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:45:39.633

尝试这个

```
 UPDATE PRODUCTS
    SET  LINE_APPROVAL = 'Y'
    FROM PRODUCTS
    INNER JOIN QUOTES ON PQUOTE_ID = QUOTE_ID_FK
    WHERE  APPROVAL = 'Y' 
```

雅

```
UPDATE  PRODUCTS 
SET LINE_APPROVAL = 'Y'
WHERE PQUOTE_ID IN 
(SELECT QUOTE_ID_FK  FROM
QUOTES WHERE APPROVAL = 'Y') 
```

# ruby-on-rails - 在服务器启动时启动 ruby rake 任务

> ID：16168257
> 
> 赞同：3
> 
> 时间：2013-04-23T11:30:58.833
> 
> 标签：ruby-on-rails, rake, fedora, systemd

我有几个 Rails rake 任务需要在服务器启动时启动。我一直在寻找使用 systemd 让它们作为传统服务运行。服务文件是在下面创建的，`/etc/system/systemd`但不幸的是，systemd 似乎没有找到该文件：

```
#systemctl start screens.service
Failed to issue method call: Unit screens.service failed to load: No such file or directory. See system logs and 'systemctl status screens.service' for details.

#systemctl status screens.service
screens.service
      Loaded: error
      Active: inactive (dead) 
```

我目前正在使用 Fedora 15

如何使我的 systemd 服务正常工作？有没有另一种方法可以让我的 rake 任务在系统启动时运行。

**更新：** screens.service 文件内容

```
[Unit]
Description=Send Reminders

[Service]
Type=simple
User=myuser
WorkingDirectory=/path/to/rails/app
ExecStart=/usr/local/rvm/gems/ruby-1.9.3-p194/bin/rake reminders:send 
```

我知道当我需要它在启动时工作时我需要设置依赖项，但目前我正在尝试使用 systemctl 命令启动我的 rake 并稍后担心它的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T04:12:50.273

为了让 systemd 注意到新添加的服务，我必须插入以下命令：

```
systemctl daemon-reload 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:33:14.787

首先，我不会直接调用 rake，而是调用 /path/to/ruby/bin/bundle exec rake my:raketask。

其次，我认为您真的应该看看 foreman gem，因为它旨在处理这种情况，尽管您可能必须使其与 systemd 一起使用。

一种方法是从 systemd 初始化文件调用工头，并传递选项以指定应用程序目录中的 Procfile（工头配置文件）。

Foreman 已经可以将其配置导出为多种格式，但我认为您的不在其中。但是，您可以创建一个自定义导出器，将工头配置导出为 systemd 格式。有关更多信息，请参阅[https://github.com/ddollar/foreman/wiki/Custom-exporters](https://github.com/ddollar/foreman/wiki/Custom-exporters)。如果您走这条路，请考虑将您的出口商贡献回工头项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:44:59.577

通常，如果您需要在应用程序初始化程序中启动某些内容，您可以将`.rb`文件放到

`config/initializers/`文件夹

您能否详细说明您的要求，因为可能还有其他方法可以做到这一点？:)

# angularjs - 在“视图”中使用 ng-init 的替代方法？

> ID：16168259
> 
> 赞同：7
> 
> 时间：2013-04-23T11:31:00.240
> 
> 标签：angularjs

我正在尝试为我的应用程序创建一个“喜欢”功能。我希望能够将动态生成的数字的值设置为“喜欢计数”。问题在于使用“ng-init”，因为文档说这是一种不好的方法！

您如何在“控制器”而不是“视图”中设置值？

这是我到目前为止所拥有的：

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <script>document.write('<base href="' + document.location + '" />');</script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
  <article ng-repeat="feed in feeds">
    <h3>{{feed.createdby}}</h3>
    <p>{{feed.content}}</p>
    <button ng-click="likeClicked($index)">{{isLiked[$index]|liked}}</button>
    <span ng-init="likeCount=feed.likes.length">{{likeCount}}</span>
  </article>
</body>
</html> 
```

谢谢，

J.P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:54:03.707

只是改变

```
`<span ng-init="likeCount=feed.likes.length">{{likeCount}}</span>` 
```

每

```
`<span>{{feed.likes.length}}</span>`. 
```

如果由于其他原因（我看不到）您仍然需要控制器中的计数，请创建一个控制器，让我们假设`FeedCtrl`，并将其添加到您的`article`：

```
<article ng-repeat="feed in feeds" ng-controller="FeedCtrl">
  ...
  <span>{{likeCount}}</span>
</article> 
```

你的 FeedCtrl 将是：

```
function FeedCtrl($scope) {
  $scope.$watch('feed.likes.length', function(newValue) {
    $scope.likeCount = newValue;
  });
} 
```

另一种方法是创建一个函数来解析你的值：

```
<article ng-repeat="feed in feeds" ng-controller="FeedCtrl">
  ...
  <span>{{likeCount()}}</span>
</article> 
```

```
function FeedCtrl($scope) {
  $scope.likeCount = function() {
    return $feed && $feed.likes ? $feed.likes.length : undefined;
  };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T11:40:56.900

如果您的**提要**对象/数组很长，出于性能原因，最好使用**ng-bind 。**

```
<span ng-bind="likeCount"></span> 
```

而不是

```
{{likeCount}} 
```

# ios - 允许 Facebook 个人资料权限

> ID：16168261
> 
> 赞同：3
> 
> 时间：2013-04-23T11:31:05.070
> 
> 标签：ios, objective-c, facebook

我想实现与朋友粉碎游戏中相同的[Facebook 身份验证](http://developers.facebook.com/docs/tutorials/ios-sdk-games/authenticate/)概念。

在此，如果用户通过 iOS facebook 应用程序登录 facebook，则它只要求用户访问基本个人资料信息。从上面的链接有一些步骤可以在朋友粉碎游戏中实现这个概念。我想在我的本机应用程序中添加它。但无法知道如何做到这一点。如果有人对此有所了解，请帮助我。我会非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T14:48:01.320

When logging in, using:

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"email",
                                nil];

// Attempt to open the session. If the session is not open, show the user the Facebook login UX
[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:true completionHandler:^(FBSession *session,
                                                 FBSessionState status, 
                                                 NSError *error) 
```

If your "permissions" array is nil, it only requests the Basic access to the user profile. If you need other permissions, just add the wanted ones on the permissions array. The valid values can be found here: [https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/), like "email", "user_birthday", "user_location", "user_about_me" etc.

Note that when logging in / requesting Read Permissions you CANNOT requests for publishing permissions. That must be performed later, after logging in. You can check if the user already has the requested permission (as the Publish one) and, if he/she has it, publish the content; if not, request it:

```
if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
    // If the user doesn't have the publishing permission, tries to request it befor sharing

    [FBSession.activeSession
     requestNewPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
     defaultAudience:FBSessionDefaultAudienceFriends
     completionHandler:^(FBSession *session, NSError *error) {
         if (!error) {
             // Tries to share the content again, assuming we now have the permission
             (...)
         } else {
             // Couldn't get the required Permissions
         }
     }];

} else {
    // If the user already have the permissions, tries to publish the content
    (...)
} 
```

More info about publishing content, look up "requestNewPublishPermissions" here: [https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/)

# matrix - 如何在不同数据集中的表达式中引用一个数据集的特定组总计

> ID：16168266
> 
> 赞同：0
> 
> 时间：2013-04-23T11:31:21.390
> 
> 标签：matrix, grouping, ssrs-2008

我有一个包含多个数据集的报告。在其中一个中，我需要从另一个数据集中引用组总数。它看起来像这样：

Tablix1：

```
Region1   Total    Age1    Age2
   a       7        5      2
   b       12       6      6
   c       20       12     8
Total      39       23     16 
```

Tablix2：

```
Region2   Value      %
   a       4      57.14%
   b       6      50.00%
   c       5      25.00% 
```

Tablix2 的“%”列中的值来自公式：%a = Tablix2 Value a / Tablix1 Total a。

我当前在 Tablix2 的 % 列中的表达式如下所示：

```
=CountDistinct(Fields!ID.Value, "Region2")/CountDistinct(Fields!CONSTITUENT_ID.Value, "Tablix1") 
```

但我得到的是 Tablix1 总行的百分比，而不是 Tablix1 的每个区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:17:54.887

查找功能将为此工作。它类似于 Excel 中的 vlookup。它看起来像这样：

```
=Lookup(Fields!Region1.Value, Fields!Region2.Value, Fields!ID.Value, "Region2") 
```

这会将区域 2 中的相应值拉到 Tablix 1 中。如果您希望在另一个表中使用它，您可以直接切换它。

# c# - DirectoryEntries.Find：“指定了无效的 dn 语法”

> ID：16168267
> 
> 赞同：5
> 
> 时间：2013-04-23T11:31:21.923
> 
> 标签：c#, active-directory, ldap

我正在尝试在当前域中查找用户。代码是这样的：

```
DirectoryEntry domain = new DirectoryEntry("LDAP://CN-Users, DC=" + Environment.UserDomainName);
            DirectoryEntries entries = domain.Children;
            try
            {
                // The following line causes the exception
                DirectoryEntry user = entries.Find("(&(objectCategory=user)(cn=" + userName + "))", ActiveDirectoryEntryType.User.TypeName);
                user.DeleteTree();
                user.CommitChanges();
            }
            catch
            {} 
```

我收到一个错误：

```
An invalid dn syntax has been specified. 
```

我也尝试了以下代码并得到了同样的错误：

```
DirectoryEntry user = entries.Find(userName, ActiveDirectoryEntryType.User.TypeName); 
```

我在帮助文件中找不到有关正确语法的信息。有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:52:12.313

您在此声明中有一个错误：

```
DirectoryEntry domain = new DirectoryEntry("LDAP://CN-Users, DC=" + Environment.UserDomainName); 
```

我几乎可以肯定它应该是：`LDAP://CN=Users,`代替`LDAP://CN-Users,`

第二件事`DC=" + Environment.UserDomainName`可能是错误的，因为通常是这样的：（`LDAP://OU=Finance,dc=fabrikam,dc=com`有多个 DC）

您可以使用 powershell 找到所有 DC。运行以下命令：

```
New-Object DirectoryServices.DirectoryEntry 
```

# android - android中的二次公式计算？

> ID：16168268
> 
> 赞同：0
> 
> 时间：2013-04-23T11:31:28.233
> 
> 标签：android, quadratic

大家好，我是 android 新手，想在这里显示二次公式计算是我在 android 中执行的代码，此代码中没有显示错误，但仍然在模拟器上它不显示结果:-(

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button b1 = (Button) findViewById(R.id.btnSubmit);
    final EditText et1 = (EditText) findViewById(R.id.etVA);//whats wrong
    final EditText et2 = (EditText) findViewById(R.id.etVC);//whats wrong
    final EditText et3 = (EditText) findViewById(R.id.etVC);//whats wrong
    final TextView answer = (TextView) findViewById(R.id.txtResult);//whats wrong
    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            String a1 = et1.getText().toString();//whats wrong
            double a = Double.parseDouble(a1);//whats wrong

            String b1 = et2.getText().toString();//whats wrong
            double b = Double.parseDouble(b1);//whats wrong

            String c1 = et3.getText().toString();//whats wrong
            double c = Double.parseDouble(c1);//whats wrong

            double x1 = (-b+Math.sqrt(b*b-4*a*c))/(2*a);//whats wrong

            System.out.println("x1 = "+ x1);

            String R = x1+ "";  //whats wrong
            answer.setText("Your Answer is " + R); //whats wrong
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:40:03.357

试试这样

```
 String a1 = et1.getText().toString();
        double a =  Double.valueof(a1);

        String b1 = et2.getText().toString();
        double b =  Double.valueof(b1);

        String c1 = et3.getText().toString();
        double c = Double.valueof(c1);

        double x1 = (-b+Math.sqrt(b*b-4*a*c))/(2*a);

        System.out.println("x1 = "+ x1);

        String R = String.valueof(x1);
        answer.setText("Your Answer is " + R); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T07:00:47.213

我找到了解决方案。代码很好，但我只是犯了一个简单的逻辑错误

```
final EditText et1 = (EditText) findViewById(R.id.etVA); 
final EditText et2 = (EditText) findViewById(R.id.etVC);//that is the mistake it should be like (R.id.etVB).... 
final EditText et3 = (EditText) findViewById(R.id.etVC); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:11:48.727

您的程序没有任何错误，您必须提供有效的输入。否则，您将得到输出**Your Answer is NAN**即 Not a Number。

从某种意义上说，有效输入，提供的 a、b 和 c 的值必须满足方程**ax ² + bx + c = 0**。这样就可以用二次公式求根了。

**示例有效输入：**

```
a = 1.0
b = 3.0
c = 2.0 
```

**上述输入的输出：**

```
Your Answer is -1.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:47:41.050

通过 View 调用 onclicklistner()

```
 b1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

# python - 如果给定缓冲区长度，python os.sys.stdin.buffer.read 失败

> ID：16168271
> 
> 赞同：1
> 
> 时间：2013-04-23T11:31:36.830
> 
> 标签：python, windows, python-3.3

```
import os
s = os.sys.stdin.buffer.read(1024*32) 
```

失败了

```
D:\Projects\pytools>python t1.py
Traceback (most recent call last):
  File "t1.py", line 2, in <module>
    s = os.sys.stdin.buffer.read(1024*32)
OSError: [Errno 12] Not enough space 
```

buf 如果给定 buflen = 1024*32-1 则正确

```
import os
s = os.sys.stdin.buffer.read(1024*32-1) 
```

如果您运行 python t1.py，那么进程会阻塞并按预期等待输入。为什么 python3.3 有 1024*32-1 的缓冲区长度限制？是系统不同，还是所有系统都一样？我们怎样才能消除这个限制？

顺便说一句：我使用 Windows 7 python 32 位版本 3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:07:03.887

我们首先在[这里查看](http://hg.python.org/cpython/file/d9893d13c628/Lib/os.py)`os`模块的源代码，其中第 26 行显示 这告诉我们这只是对标准模块的引用。 然后我们转到模块的[源代码](http://hg.python.org/cpython/file/d9893d13c628/Python/sysmodule.c)，在第 1593 行我们找到以下注释（谢天谢地有人把它放在那里......）： 然后 我们转到[文件](http://hg.python.org/cpython/file/d9893d13c628/Python/pythonrun.c)，我们在第 1086 行遇到以下代码：在第 1091 行： 然后我们在第 910 行查找函数的定义。我们在第 999 行查找该函数的返回值，如下所示： 现在我们必须找出它是什么。这是函数的返回值
`import sys, errno`
`os.sys``sys`
`sys`
`/* stdin/stdout/stderr are now set by pythonrun.c */`
`pythonrun.c`
`std = create_stdio(iomod, fd, 0, "<stdin>", encoding, errors);`

`PySys_SetObject("stdin", std);`
`create_stdio()`
`return stream;`
`stream``_PyObject_CallMethodId()`在第 984 行调用。

我希望你能看到流程——试着从这里开始。

# magento - Magento - 覆盖另一个模块的其他路线

> ID：16168272
> 
> 赞同：1
> 
> 时间：2013-04-23T11:31:45.033
> 
> 标签：magento, module, routes

我正在使用聪明的 cms 模块来管理一些基本的 cms 页面。现在我想为聪明的 cms 正在使用的路线之一添加一些自定义行为。一个例子：

```
example.com/cms/page // <- a normale cms page
example.com/cms/category // <- another module should do it's stuff here 
```

当我制作一个新模块时，我只能覆盖整个 cms 路由，而不能将自己插入`cms/category`唯一的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:52:47.210

如果您正在创建一个新控制器，这很容易；只需利用本机功能将多个控制器目录映射到一个前端名称。在您的模块配置中：

```
<frontend>
    <routers>
        <cms>
            <args>
                <modules>
                    <your_module after="Mage_Cms">Your_Module</your_module>
                </modules>
            </args>
        </cms>
    </routers> 
```

这将允许请求映射到*Your/Module/controllers/CategoryController.php*。

# c# - 将 EF 4.3.1 移植到 EF 5.0 时出现 EF 迁移问题的 DynamicData.EFCodeFirstProvider

> ID：16168278
> 
> 赞同：0
> 
> 时间：2013-04-23T11:32:02.823
> 
> 标签：c#, .net, entity-framework, code-first

我一开始使用的是`DynamicData.EFCodeFirst`版本`0.5.1.0`，我使用的是 EF 版本 4.3，并在其中使用了 Enable-Migrations `Package manager console`，一切都很好。但是在我决定迁移到 EF 5.0 之后。我已经删除了 EF 4.3 的所有包并添加了 EF 5.0 修复了所有依赖项，删除了迁移文件夹并重建了项目，在我尝试再次运行“Enable-Migrations”命令后，我得到了错误：

```
Could not load file or assembly '***\packages\EntityFramework.4.3.1\lib\net40\EntityFramework.dll' or one of its dependencies. The system cannot find the file specified. 
```

如果我已经引用了 EF 5.0，他为什么要尝试解析 EF 框架 4.3.1？我什至浏览了所有解决方案，以确保没有对 EF 4.3.1 的引用。有什么方法可以告诉 Migrations 他需要使用 EF 5.0？

谢谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:41:44.867

你检查过你的 packages.config 文件吗？它通常不是项目结构的一部分。确保它说：

```
<package id="EntityFramework" version="5.0.0" targetFramework="net40" /> 
```

此外，尝试在 Nugest 包管理器控制台中使用“update-package EntityFramework”。希望它能解决问题。

# android - Android & phonegap 将参数传递给 html 页面

> ID：16168280
> 
> 赞同：0
> 
> 时间：2013-04-23T11:32:07.817
> 
> 标签：android, json, cordova

如何使用PhoneGap将json变量传递给Android中的html页面？

我的代码：

```
public class Activity extends DroidGap {
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    String json = readFile();

    // I would pass json to menu.html
    super.loadUrl("file:///android_asset/www/menu.html");
}
}; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:32:03.680

也许您可以使用 localStorage 来传递您的 json。

```
window.localstorage.setItem("Json", json); 
```

当你想得到这个 json

```
string json = window.localstorage.getItem("Json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:56:40.093

只有在编写 Cordova (PhoneGap) 插件时才应该这样做。如果是这种情况，您应该扩展 CordovaPlugin，而不是 DroidGap。然后，您将能够通过 PluginResult 对象或便捷方法将数据返回给 JavaScript。`callbackContext.success(json)`请查看[插件开发指南](http://cordova.apache.org/docs/en/2.6.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)，特别是 Android 开发页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:38:19.493

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    super.init();

    myclass = new MyClass(this, appView);
    appView.addJavascriptInterface(this, "MyTeam");       

    super.loadUrl("file:///android_asset/www/menu.html");
} 
```

和

```
 public class MyClass {

    private WebView mAppView;
    private DroidGap mGap;

    public MyClass(DroidGap gap, WebView view){

        mAppView = view;
        mGap = gap;
    }
 } 
```

# solr - 在 solr 中导入 2.6 GByte xml 时内容长度无效

> ID：16168281
> 
> 赞同：0
> 
> 时间：2013-04-23T11:32:14.700
> 
> 标签：solr

我收到 java.lang.IllegalArgumentException: invalid content length error while importing 2.6 GByte xml in solr 。我使用的命令是 java -Durl= [http://solrserver.local:8080/solr/solr1/update](http://solrserver.local:8080/solr/solr1/update) -jar post.jar dssolrprice.xml 。Tomcat server.xml 中的 maxHttpHeaderSize 为 10485760。可能是什么原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:42:41.997

通过 HTTP 发布内容时有一些限制。即，我认为 Tomcat 的 HTTP 发布的默认大小是 2 MB。

1）所以也许你可以考虑 DataImportHandler 用于这种目的。

2）另一方面，您可以使用 SolrJ 客户端并将数据拆分为块（如果可以）并将它们发送到索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:04:12.697

请改用[DataImportHandler](https://wiki.apache.org/solr/DataImportHandler)，它以流方式工作。您不应该通过 Internet 连接发送那么大的文件。

# flash - Actionscript 3 中的双拖功能

> ID：16168283
> 
> 赞同：0
> 
> 时间：2013-04-23T11:32:22.913
> 
> 标签：flash, actionscript, double, drag, slide

我有两个影片剪辑，一个影片剪辑垂直拖动，另一个拖动水平。如果我滑动水平动画剪辑，我希望垂直动画剪辑也垂直拖动（如菜单）。我已经通过将两个拖动功能放在一个拖动功能中来尝试过这个，但它没有用。谁能帮帮我？

```
menu0.bar1.thumbnail1.addEventListener(MouseEvent.MOUSE_DOWN, startdrag1)
stage.addEventListener(MouseEvent.MOUSE_UP, stopdrag1)

function startdrag1 (e:MouseEvent)
{
    menu0.addEventListener(MouseEvent.MOUSE_DOWN, startdrag)
    menu0.removeEventListener(MouseEvent.MOUSE_DOWN, startdrag)

    //Horizontal dragging menu
    menu0.bar1.thumbnail1.startDrag(false, new Rectangle(0,125,-1380,0));

    //Vertical dragging menu
    menu0.startDrag(false,new Rectangle(0,93,0,-1125));

}
function stopdrag1 (e:MouseEvent)
{
    menu0.bar1.thumbnail1.stopDrag();
    menu0.addEventListener(MouseEvent.MOUSE_DOWN, startdrag)
    menu0.bar1.stopDrag();
} 
```

它只会水平拖动，但菜单不会拖动。（缩略图在菜单中，脚本在它之外）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:04:32.680

你应该重写一个拖动功能，它并不是很痛苦。我不太明白你的符号，所以假设我们有两个剪辑：

```
var verticalClip:Sprite = new Sprite();
var horizontalClip:Sprite = new Sprite(); 
```

当第二个水平拖动时，您希望第一个垂直移动。

```
horizontalClip.addEventListener(MouseEvent.MOUSE_DOWN, hMouseDown);

private function hMouseDown(e:MouseEvent):void
{
    stage.addEventListener(MouseEvent.MOUSE_MOVE, hMouseMove);
    stage.addEventListener(MouseEvent.MOUSE_UP, stageMouseUp);
}

private function hMouseMove(e:MouseEvent):void
{
    horizontalClip.x = stage.mouseX;
    verticalClip.y = stage.mouseX; //you may want to add some limits and offsets here
}

private function stageMouseUp(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, hMouseMove);
} 
```

如果您希望verticalClip 也可以拖动，您仍然可以使用startdrag。或者如果你需要一些更复杂的行为（比如在拖动verticalClip时移动horizo​​ntalClip），只需模仿前面的代码即可。

# eclipse - 如何在 Eclipse 中部署包含所有必需 JAR 文件的 JAR 文件

> ID：16168284
> 
> 赞同：0
> 
> 时间：2013-04-23T11:32:25.270
> 
> 标签：eclipse, jar

有人可以解释一下我如何将应用程序编译为包含其他几个库的 JAR 文件吗？

我已经包含了三个需要与应用程序一起编译的 JAR 文件。

![在此处输入图像描述](https://i.stack.imgur.com/pGbhC.png)

我已尝试按照建议使用“导出/可运行 JAR 文件导出”，但“启动配置”下拉列表为空白。

![在此处输入图像描述](https://i.stack.imgur.com/rEkhD.png)

我尝试运行程序，它运行良好，如果我检查“运行配置”一切似乎都很好。

![在此处输入图像描述](https://i.stack.imgur.com/QiHt2.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:08:22.333

我已经下载了 MAVEN 插件，将项目转换为 MAVEN 项目。然后我包含了 POM.XML，其中包含了所有依赖项和 JAR 签名。

然后使用 MAVEN install 命令将该项目导出为 JAR 文件。

# iphone - 当我返回到 iOS 中查看时，导航栏被隐藏

> ID：16168285
> 
> 赞同：3
> 
> 时间：2013-04-23T11:32:27.953
> 
> 标签：iphone, ios, uinavigationcontroller

我是 iPhone 开发的新手。我使用**storyboard**创建了一个使用**导航栏**的应用程序。我的问题是我在按钮单击时以编程方式从 viewA打开**viewB并且它成功。**现在回到**viewA** ，我使用了取消按钮。当我单击取消按钮（上一个）时，（**viewA**）打开但导航栏未显示。和 viewA 有导航栏控件，但**viewB**没有。

 ******提前致谢

查看 A

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    EditViewController *viewController = (EditViewController *)[storyboard instantiateViewControllerWithIdentifier:@"EditViewController"];

    [self presentViewController:viewController animated:NO completion:NULL]; 
```

视图 B：

```
- (IBAction)cancelButtonPressed:(id)sender {
    if ( lables != NULL) {

        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        ScannerViewController *viewController = (ScannerViewController *)[storyboard instantiateViewControllerWithIdentifier:@"ScannerViewController"];

        [self presentViewController:viewController animated:NO completion:NULL];

    }
    else{

        [self.navigationController popViewControllerAnimated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:41:01.780

您正在呈现 viewB 并使用它弹出它`self.navigationController`，您应该使用一种方式，或者使用 presentviewcontroller 和dismissviewcontroller。

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

对于您的场景，最好使用`UINavigationController`

例如

**推动：**

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

**结束**

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T10:35:24.837

我也面临同样的问题。解决方案是永远不要在单击后退按钮时选择模态，因为模态覆盖了您的整个视图，这就是为什么在后屏幕上没有显示导航控制器的原因。所以不要连接返回按钮，只需编写返回按钮的代码。

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:54:52.603

如果您使用情节提要，则无需以编程方式呈现 viewController。按住 ctrl，从`viewCA`to拖动`viewCB`并从弹出菜单中选择模型。

对于解雇`viewController`

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

如果您想向 viewCB 发送任何数据，请提供 segue 标识符（例如“segid”）

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segid"])
    {
        //write your code here.
    }
} 
```

此方法将`delegate`在呈现（推送）时自动调用（）`viewController`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:35:47.490

您必须使用导航控制器，在 StoryBoard 中选择视图 A，编辑器菜单 > 嵌入 > 导航控制器。

[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T11:49:02.017

当您需要时（例如 viewDidAppear 方法）使用，

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```******

# c++ - 如何为使用 LDAP 的用户进行密码验证？

> ID：16168293
> 
> 赞同：11
> 
> 时间：2013-04-23T11:32:54.360
> 
> 标签：c++, linux, ldap, openldap

我正在编写一个客户端应用程序（使用[OpenLDAP](http://openldap.org)库），用户通过 LDAP 服务器对其进行身份验证。

这是无法比较用户的 userPassword 的示例硬编码程序。

```
#include <stdio.h>
#include <ldap.h>
#define LDAP_SERVER "ldap://192.168.1.95:389"

int main( int argc, char **argv ){
    LDAP        *ld;
    int         rc;
    char        bind_dn[100];
    LDAPMessage *result, *e;
    char *dn;
    int has_value;

    sprintf( bind_dn, "cn=%s,dc=ashwin,dc=com", "manager" );
    printf( "Connecting as %s...\n", bind_dn );

    if( ldap_initialize( &ld, LDAP_SERVER ) )
    {
        perror( "ldap_initialize" );
        return( 1 );
    }

    rc = ldap_simple_bind_s( ld, bind_dn, "ashwin" );
    if( rc != LDAP_SUCCESS )
    {
        fprintf(stderr, "ldap_simple_bind_s: %s\n", ldap_err2string(rc) );
        return( 1 );
    }

    printf( "Successful authentication\n" );

    rc = ldap_search_ext_s(ld, "dc=ashwin,dc=com", LDAP_SCOPE_SUBTREE, "sn=ashwin kumar", NULL, 0, NULL, NULL, NULL, 0, &result);
    if ( rc != LDAP_SUCCESS ) {
        fprintf(stderr, "ldap_search_ext_s: %s\n", ldap_err2string(rc));
    }

    for ( e = ldap_first_entry( ld, result ); e != NULL; e = ldap_next_entry( ld, e ) ) {
        if ( (dn = ldap_get_dn( ld, e )) != NULL ) {
            printf( "dn: %s\n", dn );
            has_value = ldap_compare_s( ld, dn, "userPassword", "secret" ); 
            switch ( has_value ) { 
                case LDAP_COMPARE_TRUE: 
                    printf( "Works.\n"); 
                    break; 
                case LDAP_COMPARE_FALSE: 
                    printf( "Failed.\n"); 
                    break; 
                default: 
                    ldap_perror( ld, "ldap_compare_s" ); 
                    return( 1 ); 
            } 
            ldap_memfree( dn );
        }
    }

    ldap_msgfree( result );
    ldap_unbind( ld );
    return( 0 );
} 
```

**userPassword**如果它在 LDAP 服务器中是普通的，它可以工作。如果是 MD5 加密的相同密码，则[ldap_compare_s](http://linux.die.net/man/3/ldap)失败。那是因为我传递明文密码进行比较。

如何让这个示例程序工作？

我这样做对吗？`ldap_compare_s`通过 LDAP 对用户进行身份验证是否正确？

PS：这是我第一次在 LDAP 上工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T11:47:37.297

这并不是在 LDAP 上执行密码检查的正确方法，您应该尝试使用`dn`从第一次搜索中获得的密码和提供的密码进行绑定。

即您执行第二次绑定以验证密码。如果绑定失败，则密码不正确。

类似于：

```
 if ( (dn = ldap_get_dn( ld, e )) != NULL ) {
        printf( "dn: %s\n", dn );
        /* rebind */
        ldap_initialize(&ld2, LDAP_SERVER);
        rc = ldap_simple_bind_s(ld2, dn, "secret");
        printf("%d\n", rc);
        if (rc != 0) {
            printf("Failed.\n");
        } else {
            printf("Works.\n");
            ldap_unbind(ld2);
        }
        ldap_memfree( dn );
    } 
```

出于安全原因，表明用户名不正确（即搜索用户帐户失败）通常被认为是过度披露，应避免。

# java - IceFaces 1.8 中的 SelectInputText ValueChangeListener 问题

> ID：16168294
> 
> 赞同：1
> 
> 时间：2013-04-23T11:32:55.913
> 
> 标签：java, jsf, user-interface, icefaces, icefaces-1.8

我正在为我的应用程序使用 ICEFaces 1.8。我在这样的网格中有几个 SelectInputText：

```
<ice:panelGrid columns="4">             
            <ice:selectInputText id="txtId"                             
                         valueChangeListener="#{employeeBean.searchIdListener}" partialSubmit="true"></ice:selectInputText>
            <ice:selectInputText id="txtFirstName"
                         valueChangeListener="#{employeeBean.searchFirstNameListener}" partialSubmit="true"></ice:selectInputText>
            <ice:selectInputText id="txtLastName"
                         valueChangeListener="#{employeeBean.searchLastNameListener}" partialSubmit="true"></ice:selectInputText>
            <ice:selectInputText id="txtPhoneNumber"
                         valueChangeListener="#{employeeBean.searchPhnNbrListener}" partialSubmit="true"></ice:selectInputText>
        </ice:panelGrid> 
```

当我更改上述任何一个 SelectInputText 的值时，我可以看到上述所有四个 ValueChangeListener 方法都在执行 - 为什么？

不应该只是 SelectInputText 有一些值变化的方法被执行吗？

请让我知道这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:10:30.523

这可能是因为`<ice:selectInputText>`初始值为**NULL**并且第一次部分或完整提交将导致从页面提交**EMPTY 字符串。**

使用空字符串初始化您的 selectInputText 以避免这种情况，或者您可以在 JSF 2.x 中添加以下内容，

```
<context-param>
    <param-name>
         javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL
    </param-name>
    <param-value>true</param-value>
</context-param> 
```

还要添加到 Icefaces，它的部分提交有点令人困惑。*它更像是带有部分 Ajax/DOM 渲染的完整 Ajax 提交。在某些情况下，icefaces 1.8 会在页面上执行多个组件，但它会避免在数据表列、面板系列等中执行此操作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:19:26.970

我认为这源于对`partialSubmit`属性的用途的误解以及对`valueChangeListener`.

假设通过单击提交按钮提交表单时，表单中的所有组件都绑定到托管属性值或分配了托管 bean 方法，`valueChangeListener`它们的请求值由服务器提交、处理和验证。假设验证阶段成功，那些提交的值将传递到`UPDATE_MODEL`将调用每个 valueChangeListener 方法的阶段。

基本上，此方法不像**Click**或 Change 事件那样被视为应用程序事件。

然而，使用 Ajax 提交，我们可以控制将提交 JSF 表单中的哪些组件，以及在客户端收到响应后重新呈现哪些控件以显示它们的新值。然而，该属性`partialSubmit`只是与 Ajax 请求结合使用，以最小化 ViewState 的大小和出于性能原因的请求。从功能`partialSubmit`上讲，仅此属性没有任何实际效果。

# javascript - 带有 jquery ui-tab 的多个 ckeditor

> ID：16168296
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:00.873
> 
> 标签：javascript, jquery, ckeditor

我正在尝试将 ckeditor 4.1 与 jquery ui 选项卡结合使用。

论坛提到隐藏选项卡内容，由于“contenteditable”属性通常变为“false”，因此虽然加载了ckeditor的皮肤，但编辑器内容通常会冻结在tab2，tab3中......我已经解决了这个单击选项卡时触发此属性为“真”的问题。

不幸的是，虽然内容现在是可编辑的，但近 95% 的工具栏项目都被禁用了！

如何初始化自定义工具栏？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:35:42.923

尝试重新初始化 ckeditors，例如

```
ckeditor.init({
   'theme':'simple'
}); 
```

或者只是你可以在每个标签上点击这样

```
CKEDITOR.instances['ckeditor'].setData('Enter Description'); 
```

在这里，您正在为“ckeditor”创建实例

# paypal - 是否可以通过 Paypal 自适应支付 API 取消订阅用户？

> ID：16168297
> 
> 赞同：1
> 
> 时间：2013-04-23T11:33:03.830
> 
> 标签：paypal, paypal-adaptive-payments, paypal-subscriptions

我的用户使用贝宝按钮“订阅”订阅我的项目，然后我通过 IPN 管理每月付款，但如果用户删除他的帐户，我想自动取消订阅，而不要求他去贝宝取消他的订阅。

是否可以使用 Paypal Adaptive Payment API 告诉 Paypal 取消订阅该用户？

额外问题：是否可以使用 Paypal Adaptive Payment API 来了解订阅状态，并最终修改它（例如降低金额）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:02:38.177

您不会使用 Adaptive Payments API 取消订阅用户的订阅。如果买家注册了订阅，您可以[通过 ManageRecurringPaymentsProfileStatus](https://www.x.com/developers/paypal/documentation-tools/api/managerecurringpaymentsprofilestatus-api-operation-nvp) API 取消配置文件。至于状态，您将无法使用“GetRecurringPaymentsProfileDetails”API 调用来获取订阅状态。这仅支持定期付款，而不是订阅。但是，您可以使用 IPN，它会在创建配置文件、处理新事务等时向您发送详细信息。然后您可以查询自己的数据库以获取详细信息。

# perl - IO::Compress::Zip 从文件句柄读取到缓冲区

> ID：16168300
> 
> 赞同：1
> 
> 时间：2013-04-23T11:33:16.437
> 
> 标签：perl, io, compression, zip, cpan

我正在尝试即时构建一个压缩的 xml 文件并将其发送到浏览器。我正在使用[`IO::Compress::Zip`](https://metacpan.org/module/IO%3a%3aCompress%3a%3aZip)with [`IO::String`](https://metacpan.org/module/IO%3a%3aString)，但它不像文档中所期望的那样工作。

首先我的代码：

```
my $zipped_file;
foreach (@{$par{directory}}) {
    my $input = IO::String->new($_->[0]);
    zip $input => \$zipped_file, Append => 1, BinModeIn => 1|0; # Tried both for BinModeIn
}
return $zipped_file; 
```

`$par{directory}`是一个具有以下结构的arrayref：

```
[
    ['DATA', 'FILENAME'], ['DATA', 'FILENAME'], ...
] 
```

中的数据`$par{directory}`是这样的字符串：

```
<?xml version="1.0" encoding="UTF-8"?>
<derivatives>
     <derivative ag="111520420" vhash="d6712f201155a9afb64dc5a5ba369c99">
        //Some data
    </derivative>
</derivatives> 
```

当我尝试将文件下载为带有一个空文件的 .zip 存档时，我得到的只是。关于我在这里做错了什么的任何提示？

提前致谢。

编辑：这很奇怪。我现在已经尝试过了：

```
use strict;
use warnings;
use IO::Compress::Zip 'zip';

my $xml1 = <<END_XML;
    <?xml version="1.0" encoding="UTF-8"?>
    <derivatives>
        <derivative ag="111520420" vhash="d6712f201155a9afb64dc5a5ba369c99">
            //Some data
        </derivative>
    </derivatives>
END_XML  

my $xml2 = <<END_XML;
    <?xml version="1.0" encoding="UTF-8"?>
    <derivatives2>
         <derivative2 ag="111520420" vhash="d6712f201155a9afb64dc5a5ba369c99">
             //Some data
         </derivative2>
     </derivatives2>
END_XML  

my $files = [[$xml1, 'xml1'], [$xml2, 'xml2']];
my $zipped_file;

foreach (@$files) {
    open my $input, '<', \$_->[0];
    zip $input => \$zipped_file, Append => 1, BinModeIn => 1;
}

open my $fh, '>:raw', 'zip.zip';
print $fh $zipped_file;
close $fh; 
```

存档仍然是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:08:34.507

zip的***Append***选项没有达到您的预期。它不会更新现有的 zip 文件。它创建一个新的并将其附加到您提供的文件/缓冲区中。在您的情况下，您最终会得到一系列背靠背的 zip 容器。

这是一种使用 Archive::Zip::SimpleZip 实现您想要的方法 - 这只是 IO::Compress::Zip 的包装器，用于处理这种类型的用例。

```
use Archive::Zip::SimpleZip ;

my $zipped_file;
my $zip = new Archive::Zip::SimpleZip \$zipped_file ;
foreach (@{$par{directory}}) {
  $zip->addString($_->[0], Name => $_->[1]);
}
$zip->close();
return $zipped_file; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:28:13.217

我认为问题更可能出`$zipped_file`在您创建它之后所做的事情。

下面的程序对我有用。我已将压缩字符串写入二进制文件，并使用单独的实用程序将其解压缩以提供原始 XML。

我宁愿放弃`IO::String`并使用内置的`open my $input, '<', \$_->[0]`，但它似乎可以工作。

```
use strict;
use warnings;

use IO::Compress::Zip 'zip';
use IO::String;

my $xml = <<END_XML;
<?xml version="1.0" encoding="UTF-8"?>
<derivatives>
     <derivative ag="111520420" vhash="d6712f201155a9afb64dc5a5ba369c99">
        //Some data
    </derivative>
</derivatives>
END_XML

my $zipped_file;

my $input = IO::String->new($xml);

zip $input => \$zipped_file, Append => 0, BinModeIn => 1;

open my $fh, '>:raw', 'zip.zip';
print $fh $zipped_file;
close $fh; 
```

**更新**

顺便说一句，似乎根本不需要打开输入数据的 IO 流：您只需传递对包含数据的标量的引用即可。所以上面就变成了

```
my $zipped_file;

zip \$xml => \$zipped_file, Append => 0, BinModeIn => 1;

open my $fh, '>:raw', 'zip.zip';
print $fh $zipped_file;
close $fh; 
```

# php - 使用codeigniter图像水印库时像素消失

> ID：16168302
> 
> 赞同：3
> 
> 时间：2013-04-23T11:33:20.123
> 
> 标签：php, codeigniter

我的任务是将照片叠加到报纸式图像上，其中照片是一个人，并且它们应该是报纸正面的照片。

我使用 codeigniter 图像库为带有照片的模板添加水印。它工作正常，但是当它被覆盖时它会扭曲或删除照片中的一些像素

你可以在照片的左上角看到它——

![在此处输入图像描述](https://i.stack.imgur.com/JCyMQ.png)

我还将图像的大小调整为 500 像素，模板中图像的空间约为 1400 像素

这是我用来覆盖图像的代码

```
private function overlay($template, $source_image)
    {
        echo $template;
        // $config = array();
        $config['source_image'] = $template;
        $config['image_library'] = 'gd2';
        $config['wm_type'] = 'overlay';
        $config['wm_overlay_path'] = $source_image;
        $config['wm_vrt_alignment'] = 'top';
        $config['wm_hor_alignment'] = 'left';
        $config['wm_hor_offset'] = '18px';
        $config['wm_vrt_offset'] = '843px';
        $config['quality'] = '100%';
        $this->image_lib->initialize($config);
        $result = $this->image_lib->watermark();

        if($result){
            return $result;
        }
        else
        {
            echo $this->image_lib->display_errors();
            return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:10:15.820

由于没有答案，我最终使用了有效的原生 php 函数。

如果您希望将文件保存到服务器，imgpng 有第二个参数。由于它们是通过单击按钮打印的，因此我只是提示浏览器下载

```
private function overlay2($template, $source_image)
{

    $src  = imagecreatefromjpeg($source_image);
    $dest = imagecreatefrompng($template);

    imagecopymerge($dest,$src, 90, 910, 0, 0, 1511, 1075, 100); //have to play with these numbers for it to work for you, etc.

    header('Content-Disposition: Attachment;filename=newspaper.png'); 
    header('Content-type: image/png'); 

    imagepng($dest);

    imagedestroy($dest);
    imagedestroy($src);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:01:42.090

我有同样的问题。

问题在于 PNG 24 位图像。尝试使用**PNG 16 位**来避免该问题。

也许 Gif 图像也可以工作（未经测试）。Codeigniter 图像库是一个不错的类。

# java - 如何在多线程应用程序关闭时摆脱关于“无附加程序”的 log4j 消息警告？

> ID：16168304
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:21.937
> 
> 标签：java, multithreading, log4j, application-shutdown

我有一个多线程程序，它基本上有两个无限循环线程加上一些 GUI（Swing）。我的两个无限循环线程有自己的 log4j 记录器，如下所示：

```
 static final Category LOG = Category.getInstance(RReceiver.class); 
```

在 GUI 中我检测到退出键时，我只执行 System.exit(0)：

```
public boolean dispatchKeyEvent(KeyEvent e) {
    if (e.getKeyCode()!=27 && e.getKeyCode()!=KeyEvent.VK_BACK_SPACE) return false; 
    System.exit(0);
    return true;
} 
```

控制台中的效果是这样的：

> 调试 13:07:00,940 [接收器] (RReceiver.java:93) - 得到响应 len:38
> 调试 13:07:01,044 [接收器] (RReceiver.java:93) - 得到响应 len:38
> 调试 13:07:01,045 [接收器] (RReceiver.java:93) - 新状态开发 4
> log4j:WARN 找不到记录器 (com.normantech.ibcol.radiobox.RReceiver) 的附加程序。
> log4j:WARN 请正确初始化 log4j 系统。

警告并不总是出现。我怀疑有错误的取消初始化顺序，但无法弄清楚。为什么会这样？我试过使用 LogManager.shutdown(); 但这没有帮助。我试图很好地完成我的无限循环，但这不是最好的解决方案，因为 II 需要添加一些额外的 Thread.sleep(x)，尝试不同的 x，实际上并不确定这是否有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:27:31.213

核心问题是你通过调用 System.exit() 来杀死你的线程，而不是让它们干净地关闭。这意味着它们可能会在其他所有东西都关闭之后但在 JVM 实际结束进程之前保持非常短暂的运行，并且如果它们在此期间使用任何共享状态（例如日志记录系统），它可能会处于不一致或损坏的状态，因为它可能已关闭。这不是好的做法（请参阅[http://www.javapractices.com/topic/TopicAction.do?Id=86](http://www.javapractices.com/topic/TopicAction.do?Id=86)）。

解决这个问题的方法是在关闭共享资源（日志系统）之前正确关闭你的线程。不仅仅是调用 system.exit()，而是告诉每个线程该停止了，并等待它们这样做。最干净的方法是让他们`running`在每个循环上检查一个布尔值，并在您希望循环停止时在外部将该布尔值设置为 false。然后，您可以等待线程注意到这个布尔值并通过在给定线程实例上调用 Thread.join() 来终止，或者在`finished`完成时让线程设置一些布尔值（最好将这两个布尔值都标记为 volatile）。

如果您的循环的每次迭代都需要一些时间，或者包含`wait()`或`sleep()`调用，您应该查看在循环期间更频繁地检查正在运行的布尔值，或者使用`Thread.interrupt()`.

一旦完成并且您确定所有其他线程都已停止，您就可以调用`LogManager.shutdown()`并实际终止您的进程。

# multithreading - 如何阻止 gdb 显示“新线程”和“线程退出”？

> ID：16168305
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:23.160
> 
> 标签：multithreading, gdb

有没有办法告诉 gdb 不要显示表单的消息

```
[New Thread 0x7fffc8ff9700 (LWP 32104)]
[Thread 0x7fffc8ff9700 (LWP 32104) exited] 
```

我必须用数百万条这样的消息来调试应用程序，这会减慢一切 - 我似乎无法找到有问题的代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:16:55.910

```
(gdb) set print thread-events off 
```

文档[在这里](http://sourceware.org/gdb/onlinedocs/gdb/Threads.html)。

# java - openldap 和活动目录 rootbinddn 之间的不同行为

> ID：16168306
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:27.150
> 
> 标签：java, active-directory, ldap, openldap, ldapconnection

我们有一个基于 Java 的应用程序，它通信/依赖 PAM 来满足其身份验证需求。用户可以来自本地（影子）或外部（目录服务器）。Java 应用程序以非 root 用户身份运行（例如 juser）

在 LDAP 配置中，绑定密码以纯文本形式存储在 /etc/ldap.conf 中。为了克服这个安全漏洞，我用 rootbinddn 替换了 binddn，并将 bindpassword 移动到 ldap.secret。以下是 LDAP 配置文件的权限和所有权：

> 640 根 jusergroup /etc/ldap.conf
> 
> 600 根根 /etc/ldap.secret

用户可以通过SSH无缝访问系统（在我将binddn修改为rootbinddn之后），而对应用程序的身份验证失败。

有趣的是，当我将应用程序配置为 openldap 服务器时，所有用户都可以成功通过 SSH 和 Java 应用程序进行身份验证。但是当配置为 MS 活动目录服务器时，SSH 身份验证成功，而对 Java 应用程序的身份验证失败（因为进程所有者是 juser）。现在我以 root 用户身份重新启动 java 应用程序，并且所有身份验证（SSH 和 Java 应用程序）都成功。

以下是来自 Active Directory 服务器的异常事件日志：

> 内部事件：LDAP 服务器返回错误。
> 
> 附加数据错误值：00000000：LdapErr：DSID-0C090627，注释：为了执行此操作，必须在连接上完成成功 > 绑定。，数据 0，vece
> 
> [有关详细信息，请参阅 > http://go.microsoft.com/fwlink/events.asp](http://go.microsoft.com/fwlink/events.asp)上的帮助和支持中心。

1.  为什么 openldap 和 MS Active Directory 之间会有不同的绑定行为？
2.  在 LDAP 绑定期间，发出请求的用户是否传递到目录服务器？
3.  是否有一种机制可以告诉 PAM 在身份验证验证期间使用 root 凭据，以便我仍然可以将 java 应用程序作为 juser 运行？

谢谢

# php - 持久连接和 max_user_connections

> ID：16168310
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:31.983
> 
> 标签：php, mysql, pdo

我需要一些信息尽快帮助我解决问题。我在 PHP 中设计了一个应用程序，它查询 mysql 数据库并以 json 形式返回响应。我已经在 pylot 和 apache jmeter 中对 json 响应进行了负载测试，这很好。我正在使用 PHP 的 PDO 使用持久连接。但是，即使连接是持​​久的，我仍然被拒绝连接到数据库并出现以下错误。

```
[23-Apr-2013 12:11:53] SQLSTATE[42000] [1203] User user already has more than 'max_user_connections' active connections 
```

我曾认为持久连接会减轻这种情况，但看起来它们被忽略了。任何建议将不胜感激。

```
$DBH = null;

$host = "localhost";
$db_name = "my_db";
$user_name = "user";
$pass_word = "password";

try {
  # MySQL with PDO_MYSQL
  $DBH = new PDO("mysql:host=$host;dbname=$db_name;charset=utf8", $user_name, $pass_word, array(PDO::ATTR_PERSISTENT => true, PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'"));
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
}
catch(PDOException $e) {
    error_log( $e->getMessage(), 0 );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:44:21.767

根据我多年来的个人经验，PHP 脚本中的持久连接并不能减轻 *max_user_connection* 错误消息。相反，它们往往是*原因*。

不管是什么原因，连接池都没有像宣传的那样工作。即使有空闲连接，PHP 也倾向于打开新连接。结果，流量相对较低的应用程序最终会耗尽最大值（并且 90% 的连接什么都不做）。

如果该功能存在，则必须存在其正常工作的场景。也许问题在于它只能在某些平台或 SAPI 上正常工作。无论如何，我建议您*禁用*持久连接并监控您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:37:54.510

如果您的意图是减少连接数，则使用 pconnect 将是错误的想法，因为它实际上会增加连接数。

因此，要解决问题，您必须增加 mysql 服务器配置中的 max_user_connections 数量以匹配 apache 线程/nginx 工作人员的数量。

如果你不能增加 max_user_connections 的数量，那么你不应该使用持久连接。

就这样。

# javascript - 使用 Canviz 在 HTML 页面中绘制图形

> ID：16168312
> 
> 赞同：1
> 
> 时间：2013-04-23T11:33:33.090
> 
> 标签：javascript, html, graph, diagram

我想使用 Canviz 绘制复杂的图表，并将它们放入 HTML 页面。

我下载了 Canviz 包，其中包含一个示例。运行示例时，我在我的 HTML 页面中绘制了一个图表。

当我尝试进行自己的测试时，图表不会被淹没。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:41:58.593

关于如何使用 html 5 画布绘制图形的教程有很多，例如：

*   [http://www.worldwidewhat.net/2011/06/draw-a-line-graph-using-html5-canvas/](http://www.worldwidewhat.net/2011/06/draw-a-line-graph-using-html5-canvas/)
*   [http://www.javascripter.net/faq/plotafunctiongraph.htm](http://www.javascripter.net/faq/plotafunctiongraph.htm)
*   [http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/](http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/)
*   [http://www.html5laboratory.com/creating-a-bar-chart-with-canvas.php](http://www.html5laboratory.com/creating-a-bar-chart-with-canvas.php)

另见：

*   [http://www.w3schools.com/html/html5_canvas.asp](http://www.w3schools.com/html/html5_canvas.asp)

# amazon-ec2 - 登录 SFTP，需要帮助 chmoding pem 文件

> ID：16168316
> 
> 赞同：1
> 
> 时间：2013-04-23T11:33:36.907
> 
> 标签：amazon-ec2, amazon, sftp, file-permissions, chmod

我对 Amazon EC2、SFTP 非常非常陌生——到目前为止，我只使用过 FTP 客户端。我正在尝试登录到一个 Amazon EC2 实例并拥有我需要的一切，除了我现在拥有的带有密钥对的 pem 文件。但是我被告知 chmod 并将其权限重置为 400 以便正确登录。问题是我不知道该怎么做。有人说只是通过命令行输入 chmod 400 keyfile.pem，但那是我桌面上的 Windows 命令行吗？我怎样才能做到这一点？任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:27:39.950

使用 SSH 客户端（如[PuTTY](https://www.chiark.greenend.org.uk/%7Esgtatham/putty/)）登录。
使用它，您可以在命令行上执行您提到的命令 ( `chmod 400 keyfile.pem`)。
另请参阅[在 Windows 中使用 PuTTY SSH 到 Amazon EC2 实例](https://stackoverflow.com/q/10287337/850848)。

或者您可以使用 GUI SFTP 客户端（如[WinSCP](https://winscp.net/)）来设置权限。
请参阅[https://winscp.net/eng/docs/ui_properties](https://winscp.net/eng/docs/ui_properties)
确保仅勾选*所有者行中的**R*复选框（这相当于八进制格式的权限）。*`400`*

 **（我是WinSCP的作者）**

# windows-phone-7 - 从 WP7 中的 webBrowser 获取网站标题

> ID：16168319
> 
> 赞同：0
> 
> 时间：2013-04-23T11:33:41.543
> 
> 标签：windows-phone-7, windows-phone-8, webbrowser-control

我正在为 windows phone 平台创建一个应用程序，并且需要在用户浏览网络时获取网站标题。
我尝试了很多方法，但它似乎不起作用。有任何想法吗 ？

这就是我所拥有的：

```
String title = (string)browser.InvokeScript("eval","document.title.toString()"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T10:15:06.847

I don't know why the above answer was accepted as the right one:

The following line should work:

string webTitle = (string)Browser.InvokeScript("eval", "document.title.toString()");

if you call this in the **navigated** event it may not work, you MUST call this in **Browser_LoadCompleted** event, because only here all background processes finished and the invokeScript would work

# iphone - wait_fences：接收回复失败：单击 MFmessgecompose 模型 iOS 的按钮（发送、取消）时发生 10004003 错误

> ID：16168322
> 
> 赞同：2
> 
> 时间：2013-04-23T11:33:44.177
> 
> 标签：iphone, objective-c, ios6

我想从另一个在后台执行的类方法中 弹出`MFMessageCompose`模型（topviewcontroller） 。`NSObject`

`MFMessageCompose`我使用此代码弹出模型：

```
MFMessageComposeViewController * controller = [[MFMessageComposeViewController alloc] init];
if([MFMessageComposeViewController canSendText])
{
    controller.body = @"Check out FundooSpace for mobile.Download it now from app.fundoospace.net/FundooSpace/d";
    controller.recipients = (NSArray *)passa;
    passa = nil;
    AppDelegate * appDelegateObject1 = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    controller.messageComposeDelegate = self;
    [appDelegateObject1.navigationCntr.topViewController presentModalViewController:controller animated:NO];
} 
```

它工作正常。但是当我点击发送或取消按钮时，应用程序崩溃并给出错误是

```
wait_fences: failed to receive reply: 10004003 
```

请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:02:40.597

我完全检查了您在问题中包含的代码，对我来说它在设备上运行良好。

1）确保在您的 .h 中有委托

```
@interface ViewController : UIViewController <MFMessageComposeViewControllerDelegate> 
```

2）您还必须在您的.m中实现委托方法：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
    NSLog(@"didFinishWithResult");

    // you have to deal with the result var

    switch (result) {
        case MessageComposeResultCancelled:
            NSLog(@"Cancelled");
            break;
        case MessageComposeResultFailed:
            UIAlertView *alert = [[UIAlertView alloc] 
                          initWithTitle:@"MyApp" 
                                message:@"Unknown Error"
                               delegate:self 
                      cancelButtonTitle:@”OK” 
                      otherButtonTitles:nil];
            [alert show];
            [alert release];
            break;
        case MessageComposeResultSent:

            break;
        default:
            break;
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

3) 如果您在 >iOS6.0 上，“旧” *presentModalViewController:animated*已被弃用，因此更改为*presentViewController:animated:completion:*因为 Xcode 也表明了这一点。

# android - Android相机无法预览，可以拍照

> ID：16168328
> 
> 赞同：1
> 
> 时间：2013-04-23T11:34:06.967
> 
> 标签：android, camera, preview

我正在使用表面视图向用户显示相机预览。这是我的启动方法：

```
private void pickCam(){
    if (Camera.getNumberOfCameras() < 1)
        return;

    if (Camera.getNumberOfCameras() == 1)
    {
        CameraInfo cInfo=new CameraInfo();
                Camera.getCameraInfo(0, cInfo);
    camera = Camera.open(0);

    }
    else
        camera = Camera.open(currentCamera);

    Camera.Parameters parameters = camera.getParameters();
    parameters = camera.getParameters();
    parameters.setRotation(90);
    try {

        Camera.Size mCameraSize = null;

        for (Camera.Size size : parameters.getSupportedPreviewSizes()) {

            if (size.width <= surfaceWidth && size.height <= surfaceHeight) {

                if (mCameraSize == null)
                    mCameraSize = size;
                else {

                    int currentArea = mCameraSize.width
                            * mCameraSize.height;
                    int newArea = size.width * size.height;

                    if (newArea > currentArea) {

                        mCameraSize = size;
                    }
                }
            }

        }
        parameters.setPreviewSize(mCameraSize.width, mCameraSize.height);

        camera.setParameters(parameters);

        camera.setDisplayOrientation(90);

        camera.setPreviewDisplay(surfaceHolder);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    camera.startPreview();
} 
```

当用户单击按钮时：

```
if (camera != null)
camera.takePicture(null, null,this); 
```

此代码在 Sony Xperia（2 个摄像头）上运行良好，但在 HTC Wildfire 和三星 Galaxy S+（均为 1 个摄像头）上预览失败。没有异常被抛出，它什么也不显示。我可以在所有这些设备上拍照。

对于两个设备，pickCamMethod 的 LogCat 输出都是空的：

```
04-23 14:25:22.987: I/System.out(5871): PickCamBegin 
04-23 14:25:23.428: I/System.out(5871): PickCamEnd 
```

我怎样才能让它在所有情况下都能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:41:20.600

在清单文件中添加权限

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

develoepr 站点有关于该主题的优秀文档。

[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)

我使用了开发者网站上的代码并制作了一个示例。根据您的需要修改以下内容。

在你的活动中

```
public class MainActivity extends Activity {

private static final int REQUEST_CODE = 1; 
ImageView imageView;
Button b;
private Camera mCamera;
private CameraPreview mPreview;
private Bitmap bitmap;
private PictureCallback mPicture;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    boolean check =checkCameraHardware(MainActivity.this);
    if(check)
    {
         mCamera = getCameraInstance();

        // mCamera.setDisplayOrientation(90);
         setCameraDisplayOrientation(this,
                 1,  mCamera);//requires min sdk 9
    }
    // Create an instance of Camera
    mPicture = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
            if(!imagesFolder.exists())
            imagesFolder.mkdirs();   
            File pictureFile = new File(imagesFolder, "image.jpg");

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);

                System.out.println("hello");
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                Log.d("No File", "File not found: " + e.getMessage());
            } catch (IOException e) {
                //Log.d(TAG, "Error accessing file: " + e.getMessage());
            }
        }
    };

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);
     b = (Button) findViewById(R.id.button_capture);
     b.setOnClickListener(new OnClickListener()
      {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                 mCamera.takePicture(null, null, mPicture);
                 Toast.makeText(MainActivity.this, "Called",1000).show();

        }

      });
  }
 public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 }
private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
         Toast.makeText(this, "Phone has camera", Toast.LENGTH_LONG).show();
        return true;
    } else {
        // no camera on this device
         Toast.makeText(this, "Phone has no camera", Toast.LENGTH_LONG).show();
        return false;
    }
}
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    mCamera.release();
}
 } 
```

用于预览的 CameraPreview 类

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
private SurfaceHolder mHolder;
private Camera mCamera;

public CameraPreview(Context context, Camera camera) {
    super(context);
    mCamera = camera;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    // deprecated setting, but required on Android versions prior to 3.0
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // empty. Take care of releasing the Camera preview in your activity.
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.

    if (mHolder.getSurface() == null){
      // preview surface does not exist
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here

    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
}
} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<FrameLayout
android:id="@+id/camera_preview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
/>

<Button
android:id="@+id/button_capture"
android:text="Capture"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:34:17.787

您提到的那些设备 HTC Wildfire 和三星 Galaxy S+ 可能在不支持的较低版本的 Android 上运行`Camera.getNumberOfCameras()`。

[HTC Wildfire](http://www.gsmarena.com/htc_wildfire-3337.php)于 2010 年发布，最高支持 Android 2.2 (API Lv.8)

[三星 Galaxy S+](http://www.gsmarena.com/samsung_i9001_galaxy_s_plus-3908.php) , 最高支持 Android 2.3 (API Lv.9/Lv.10)

API 级别指南可在此处找到：[Android 开发人员：什么是 API 级别？](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)

因此，您使用的方法`Camera.getNumberOfCameras()`已添加到 API 9 中（请参阅[文档](http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras%28%29)）

您可能需要使用`Build.VERSION`单独处理它们，所以您可以尝试`pickCam()`像这样更改您的第一行：

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
// Means the device is using API Lv.9+
// Use the method that can work for Lv.9+
    if (Camera.getNumberOfCameras() < 1)
        return;

    if (Camera.getNumberOfCameras() == 1)
    {
        CameraInfo cInfo=new CameraInfo();
        Camera.getCameraInfo(0, cInfo);
        camera = Camera.open(0);

    }
    else
        camera = Camera.open(currentCamera);
} else {
// Use alternative method that support lower API levels
    camera = Camera.open();
} 
```

`Camera.open()`是适用于 2.2 的方法，适用于`Camera.open(int)`2.3+（请参阅[文档](http://developer.android.com/reference/android/hardware/Camera.html#open%28%29)）

请让我知道这是否适合您。

# vb.net - 使用 ContextMenuStip 调用 DataGridView 用户删除行

> ID：16168329
> 
> 赞同：0
> 
> 时间：2013-04-23T11:34:11.973
> 
> 标签：vb.net, datagridview, contextmenustrip

我在`[dgv_clients_UserDeletingRow]`使用`[ContextMenuStrip]`.

它给了我这个错误：

```
Unable to cast object of type 'System.EventArgs' to type 'System.Windows.Forms.DataGridViewRowCanelEventArgs' 
```

这是我的代码：

```
 Private Sub dgv_clients_UserDeletingRow(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewRowCancelEventArgs) Handles dgv_clients.UserDeletingRow
    deleteLine(e)
End Sub

  Private Sub toolStripItem1_Click(ByVal sender As Object, ByVal args As EventArgs) Handles toolStripItem1.Click

    If mouseLocation.RowIndex > 0 Then
        dgv_clients.Rows(mouseLocation.RowIndex).Selected = True
        dgv_clients.Rows(mouseLocation.RowIndex).DefaultCellStyle.SelectionBackColor = Color.Gray
        DeleteToolStripMenuItem_Click(sender, args)
    End If

End Sub
Public Sub DeleteToolStripMenuItem_Click(ByVal Sender As Object, ByVal e As EventArgs)
    Call deleteLine(e)
End Sub 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:49:36.570

问题是你的`deleteLine`方法。

你用两种不同的类型来调用它。在`Sub dgv_clients_UserDeletingRow`你通过`e as DataGridViewRowCancelEventArg`s 和在`Sub DeleteToolStripMenuItem_Click`你通过`e as EventArgs`。如果你没有`deleteLine`为这两种类型重载你的方法，编译器会尝试自动解析错误的类型并且它会失败。

# mysql - MySQL优化计数查询

> ID：16168330
> 
> 赞同：1
> 
> 时间：2013-04-23T11:34:13.930
> 
> 标签：mysql, optimization, join, count

我有一个关于 MySQL 性能的问题。这些是我的表：

（大约 140.000 条记录）

```
CREATE TABLE IF NOT EXISTS `article` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `label` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `title` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `intro` text COLLATE utf8_unicode_ci NOT NULL,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `date` int(11) NOT NULL,
  `active` int(1) NOT NULL,
  `language_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL,
  `indexed` int(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=132911 ; 
```

（大约 400.000 条记录）

```
CREATE TABLE IF NOT EXISTS `article_category` (
  `article_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

运行此计数查询：

```
SELECT SQL_NO_CACHE COUNT(id) as total 
FROM (`article`) 
LEFT JOIN `article_category` ON `article_category`.`article_id` = `article`.`id` 
WHERE `article`.`language_id` = 1 
AND `article_category`.`category_id` = '<catid>' 
```

这个查询需要很多资源，所以我想知道如何优化这个查询。执行后它被缓存了，所以在第一次运行后我很好。

运行解释函数：

![在此处输入图像描述](https://i.stack.imgur.com/5cnN8.png)

创建索引后：

```
ALTER TABLE `article_category` ADD INDEX ( `article_id` , `category_id` ) ; 
```

![在此处输入图像描述](https://i.stack.imgur.com/DkR44.png)

添加索引并将 LEFT JOIN 更改为 JOIN 后，查询运行得更快！感谢这些快速回复:)

我现在使用的查询（我删除了 language_id，因为它不是必需的）：

```
SELECT COUNT(id) as total 
FROM (`article`) 
JOIN `article_category` ON `article_category`.`article_id` = `article`.`id` 
AND `article_category`.`category_id` = '<catid>' 
```

我读过一些关于强制索引的内容，但我认为这不再是必要的了，因为这些表已经被索引了，对吧？

非常感谢！

马汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:56:07.727

您尚未在表上创建必要的索引

表`article_category`- 创建一个复合索引`(article_id, category_id)`

表`article`- 创建一个复合索引`(id, language_id)`

如果这无助于发布解释声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:55:01.927

JOIN 条件中使用的列应该有一个索引，所以你需要索引`article_id`。

# android - 在android中拖放具有多种布局的自动滚动

> ID：16168337
> 
> 赞同：3
> 
> 时间：2013-04-23T11:34:39.253
> 
> 标签：android, drag-and-drop, android-scrollview

“当我拖放具有多个布局的图像时，自动滚动效果不佳”

我到处搜索，但找不到解决方案。我从这个链接得到了一个解决方案：

[在 Android 中通过拖放创建一个 scrollView 自动滚动](https://stackoverflow.com/questions/7352236/make-a-scrollview-autoscroll-with-drag-and-drop-in-android/7366321#7366321)

@thehayro 感谢您提供了这样一个很好的例子。

但它仅适用于一种布局，并且自动滚动也适用。但我在一个线性布局中有超过 4-5 个子布局，这个布局在滚动视图中，我的布局文件如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<com.example.dragvdropdemo.MyScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/scroll_view">
<LinearLayout 
 android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/lldrag">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dip" 
    android:id="@+id/ll1"
    android:layout_marginTop="10dip"
     android:background="@android:color/darker_gray">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/dr_logo" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/fb" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dip" 
    android:id="@+id/ll2"
    android:layout_marginTop="10dip"
    android:background="@android:color/darker_gray">

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/twitter" />

    <ImageView
        android:id="@+id/ImageView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/ImageView03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />
</LinearLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dip" 
    android:id="@+id/ll3"
    android:layout_marginTop="10dip"
     android:background="@android:color/darker_gray">

    <ImageView
        android:id="@+id/ImageView1_l3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/twitter" />

    <ImageView
        android:id="@+id/ImageView2_l3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/ImageView3_l3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />
</LinearLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dip" 
    android:id="@+id/ll4"
    android:layout_marginTop="10dip"
     android:background="@android:color/darker_gray">

    <ImageView
        android:id="@+id/ImageView1_l4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/twitter" />

    <ImageView
        android:id="@+id/ImageView2_l4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/ImageView3_l4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />
</LinearLayout>
</LinearLayout>
 </com.example.dragvdropdemo.MyScrollView> 
```

我想将图像从一个布局拖放到另一个布局。我不知道如何解决它。我试过了，但我能做到。我不太了解，我的代码是：

```
public class MyActivity extends Activity {

ImageView   img1,img2,img3,img01;
ImageView img02,img03,img1_l3,img2_l3,img3_l3,img1_l4,img2_l4,img3_l4;
LinearLayout ll1,ll2,ll3,ll4,lldrag;

MyScrollView myScrollView;
int mScrollDistance;

private static int oldvalue;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylist);

    //SCROLLVIEW
       myScrollView = (MyScrollView) findViewById(R.id.scroll_view);
         myScrollView.setOnScrollViewListener(new         MyScrollView.OnScrollViewListener() {

            @Override
            public void onScrollChanged1(OnScrollViewListener listener) {
                // TODO Auto-generated method stub
                mScrollDistance = myScrollView.getScrollY();
            }
        });

    img1 = (ImageView)findViewById(R.id.imageView1);
    img2 = (ImageView)findViewById(R.id.imageView2);
    img3 = (ImageView)findViewById(R.id.imageView3);
    img01 = (ImageView)findViewById(R.id.ImageView01);
    img02 = (ImageView)findViewById(R.id.ImageView02);
    img03 = (ImageView)findViewById(R.id.ImageView03);
    img1_l3 = (ImageView)findViewById(R.id.ImageView1_l3);
    img2_l3 = (ImageView)findViewById(R.id.ImageView2_l3);
    img3_l3 = (ImageView)findViewById(R.id.ImageView3_l3);
    img1_l4 = (ImageView)findViewById(R.id.ImageView1_l4);
    img2_l4 = (ImageView)findViewById(R.id.ImageView2_l4);
    img3_l4 = (ImageView)findViewById(R.id.ImageView3_l4);
    ll1 = (LinearLayout)findViewById(R.id.ll1);
    ll2 = (LinearLayout)findViewById(R.id.ll2);
    ll3 = (LinearLayout)findViewById(R.id.ll3);
    ll4 = (LinearLayout)findViewById(R.id.ll4);
    lldrag = (LinearLayout)findViewById(R.id.lldrag);

    img1.setOnTouchListener(new ChoiceTouchListener());
    img2.setOnTouchListener(new ChoiceTouchListener());
    img3.setOnTouchListener(new ChoiceTouchListener());
    img01.setOnTouchListener(new ChoiceTouchListener());
    img02.setOnTouchListener(new ChoiceTouchListener());
    img03.setOnTouchListener(new ChoiceTouchListener());
    img1_l3.setOnTouchListener(new ChoiceTouchListener());
    img2_l3.setOnTouchListener(new ChoiceTouchListener());
    img3_l3.setOnTouchListener(new ChoiceTouchListener());
    img1_l4.setOnTouchListener(new ChoiceTouchListener());
    img2_l4.setOnTouchListener(new ChoiceTouchListener());
    img3_l4.setOnTouchListener(new ChoiceTouchListener());

    ll1.setOnDragListener(new ChoiceDragListener());
    ll2.setOnDragListener(new ChoiceDragListener());
    ll3.setOnDragListener(new ChoiceDragListener());
    ll4.setOnDragListener(new ChoiceDragListener());
    lldrag.setOnDragListener(new ChoiceDragListener());

}

private final class ChoiceTouchListener implements OnTouchListener {

    @Override
    public boolean onTouch(View view, MotionEvent event) {
        // TODO Auto-generated method stub

        ClipData data=ClipData.newPlainText("", "");
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        //start dragging the item touched''
        view.startDrag(data, shadowBuilder, view, 0);
        return true;
    } 
} 

/**
 * DragListener will handle dragged views being dropped on the drop area
 * - only the drop action will have processing added to it as we are not
 * - amending the default behavior for other parts of the drag process
 *
 */
class ChoiceDragListener implements OnDragListener {

    @Override
    public boolean onDrag(View v, DragEvent event) {
        switch (event.getAction()) {
        case DragEvent.ACTION_DRAG_STARTED:
            //no action necessary
            Log.i("", "DRAGSTARTED");
            break;
        case DragEvent.ACTION_DRAG_ENTERED:
            //no action necessary
            Log.i("","DRAGENTERED");
            break;
        case DragEvent.ACTION_DRAG_EXITED:        
            //no action necessary
            Log.i("","DRAGEXITED");
            break;
        case DragEvent.ACTION_DROP:
            //handle the dragged view being dropped over a drop view
            Log.i("","DROP");
            View view = (View) event.getLocalState();

            LinearLayout ll=(LinearLayout) view.getParent();
            ll.removeView(view);
            LinearLayout dropTarget = (LinearLayout) v;
            ImageView dropped = (ImageView) view;

            dropTarget.addView(dropped,0);

            Object tag = dropTarget.getTag();

            if(tag!=null)
            {

                int existingID = (Integer)tag;

                findViewById(existingID).setVisibility(View.VISIBLE);
            }
            //set the tag in the target view being dropped on - to the ID of the view being dropped
            dropTarget.setTag(dropped.getId());
            break;

        case DragEvent.ACTION_DRAG_LOCATION:
            //no action necessary
            int y = Math.round(event.getY());
              int translatedY = y - mScrollDistance;
              Log.i("translated",""+translatedY+" "+ mScrollDistance+" "+y);
              int threshold =50 ;
              // make a scrolling up due the y has passed the threshold
              if (translatedY < threshold) {
                 // make a scroll up by 30 px
                 myScrollView.scrollBy(0, -30);
              }
              // make a autoscrolling down due y has passed the 500 px border
              if (translatedY + threshold > 200) {
                 // make a scroll down by 30 px
                 myScrollView.scrollBy(0, 30);
              }
            break;

        case DragEvent.ACTION_DRAG_ENDED:
            //no action necessary
            break;
        default:
            break;
        }
        return true;
    }

} 
} 
```

我的滚动视图

```
public class MyScrollView  extends ScrollView {

public OnScrollViewListener mListener;

public MyScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    // TODO Auto-generated method stub
    super.onScrollChanged(l, t, oldl, oldt);
    if (mListener != null) {
         mListener.onScrollChanged1(mListener);
     }
}

public void setOnScrollViewListener(OnScrollViewListener listener) {
    mListener = listener;
}
public static interface OnScrollViewListener {
       public void onScrollChanged1(OnScrollViewListener listener);
    }
} 
```

我是android初学者所以不太了解它所以告诉我如何解决它。对不起我糟糕的英语和语法错误。提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:02:23.327

我自己解决了这个问题。这是解决方案：

```
 DragEvent.ACTION_DRAG_LOCATION:
  //no action necessary
  int y = Math.round(v.getY())+Math.round(event.getY());
      int translatedY = y - mScrollDistance;
      Log.i("translated",""+translatedY+" "+ mScrollDistance+" "+y);
      int threshold =50 ;
      // make a scrolling up due the y has passed the threshold
      if (translatedY < 200) {
         // make a scroll up by 30 px
         myScrollView.smoothScrollBy(0, -15);
      }
      // make a autoscrolling down due y has passed the 500 px border
      if (translatedY + threshold > 500) {
         // make a scroll down by 30 px
         myScrollView.smoothScrollBy(0, 15);
      }

    break; 
```

# c++ - GLFW 设置回调函数

> ID：16168342
> 
> 赞同：1
> 
> 时间：2013-04-23T11:35:01.730
> 
> 标签：c++, types, callback, glfw

`data type`在设置回调函数时使用什么`GLFW`？

我尝试设置一个函数来输入`void`，但给了我一个`compile error`. 将其更改为`void __stdcall`给我一个`RT error`，但我如何使用诸如`typedef`之类的？我认为这是正确的做法。我真的需要一个示例源代码。`GLFW``GLFW*fun`

顺便说一句，我将 GLFW 定义为**`GLFW_DLL`**

**更新**

我的代码如下所示：

（我做了三种方式）

**1**

原型。因为`these*`低于`main` 这个给我一个编译错误（无效转换）

```
void MouseClick(int, int);
void Keyboard(int, int);
//... 
```

**2**

```
//appending `__stdcall` get compiled but gives me `RT error`

void __stdcall MouseClick(int, int);
void __stdcall Keyboard(int, int); 
```

**3**

在我的另一个项目中，我使用`GLFW_BUILD_DLL`并编译`MSVS`了强制转换。 `glfwSetKeyCallback((GLFWkeyfun)Keyboard);` 但现在，我不能`MinGW`用`GLFW_DLL`

```
void MouseClick(int x, int y) {

} 
```

在`main`...

```
int main() {

//glfw intialization...

glfwSetKeyCallback(Keyboard);
//other setters

} 
```

但是，我该怎么做呢？

```
GLFWmouseposfun MousePos {

}

//... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:09:26.230

根据GLFW v2.x[的文档](http://www.glfw.org/GLFWReference27.pdf)，您传递给`glfwSetKeyCallback`（等）的原型是

```
void GLFWCALL functionname( int key, int action ); 
```

这是一个完整的 C 程序，它将打印出关键事件：

```
#include <stdio.h>
#include <GL/glfw.h>

void GLFWCALL keyfun(int key, int action) {
  printf("%d %d\n", key, action);
}

int main() {
    glfwInit();
    glfwOpenWindow(640, 480, 0, 0, 0, 0, 0, 0, GLFW_WINDOW);
    glfwSetKeyCallback(keyfun);
    while(1) {
      glfwSwapBuffers();
    }
} 
```

如果此代码不起作用，您可能错误地链接到 GLFW。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:44:14.230

啊，对不起我的错。我只是没有注意到我有这个我没有包含在我的帖子中`Vec2f To_OGL_Coords(int x, int y)`。`void MousePos(int x, int y)`正如我所说，正是 Vec2f 我遗漏了 3rd(z) 坐标`NULL`导致运行时错误。`Method number 2`应该在这里工作，就像雅各布帕克的回答一样。如果使用不当，我真的不太了解这些指针的影响。

（PS。我正在研究 2D，这就是为什么我忽略了 z 坐标。我的错）

# web-services - GRAILS SOAP 客户端 WSLITE 参数

> ID：16168344
> 
> 赞同：2
> 
> 时间：2013-04-23T11:35:05.870
> 
> 标签：web-services, grails, grails-plugin

我有一个带有 Wslite 插件的 SOAP 客户端，可以正常工作，但参数不是以最佳方式发送的。

```
def calcClient(Integer n1, Integer n2) throws Exception {
    def response
    try {
        soapClient.serviceURL = "http://localhost:8080/SISAP/services/sendMail?wsdl"

        response = soapClient.send() {
            soapNamespacePrefix "soap"
            envelopeAttributes "xmlns:util":"http://util.unime.edu.br/"
            body {
                calc{
                    //is not the best way           
                    mkp.yieldUnescaped "<util:number1>$n1</util:number1>"
                    mkp.yieldUnescaped "<util:number2>$n2</util:number2>"
                }
            }
        }
    } catch (Exception exception) {
        log.error(exception.message)
        throw exception
    }

    println response.body.calculaResponse.return
    return
} 
```

它工作正常，但是当我尝试时：

```
calc{
   number1(n1)
   number2(n2)
} 
```

或者

```
calc{
   "util:number1($n1)"
   "util:number2($n2)"
} 
```

或者

```
calc{
   "{util}number1($n1)"
   "{util}number2($n2)"
} 
```

Web 服务在未发送任何参数的情况下引发异常。

我究竟做错了什么？:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T12:03:05.773

我认为你需要输入

```
 mkp.yieldUnescaped.number1('xmlns':'util',n1)
 mkp.yieldUnescaped.number2('xmlns':'util',n2) 
```

使这项工作。

# android - 我怎样才能停止我的 AsyncTask 线程。或停止聊天管理器

> ID：16168345
> 
> 赞同：1
> 
> 时间：2013-04-23T11:35:12.983
> 
> 标签：android, xmpp, smack, asmack

我通过 smack 客户端使用 xmpp 开发了聊天应用程序。我使用后台线程来接收消息**通知**并且工作正常。但是现在当我在**聊天视图**中时，我不想收到传入消息的通知。所以我删除了chatmangerlistener。但它不工作。

我使用了第二种方法，当我进入聊天视图时，我的后台线程将关闭。但我看到后台线程没有关闭或停止。isCancelling 方法给了我**false**。

这是代码：-

```
 public class incomingmsg extends AsyncTask<String, Void, String>
    {
      String msg;
        protected  String doInBackground(String... urls) {

            connection =  XMPPLogic.getInstance().getConnection();

            // register listeners
              ChatManager chatmanager = connection.getChatManager();
              chatmangerlistnr = new ChatManagerListener()
              {

                @Override
                public void chatCreated(final Chat chat, final boolean createdLocally) {
                    chat.addMessageListener(new MessageListener()
                      {
                        @Override
                        public void processMessage(Chat chat, Message message) {
                            msg = message.getBody();
                            System.out.println("Received message: " 
                                        + (message != null ? message.getBody() : "NULL"));
                            GeneratNotification(msg);
                        }
                      });
                }
              };

              connection.getChatManager().addChatListener(chatmangerlistnr);

              // idle for 20 seconds
            /* final long start = System.nanoTime();
              while ((System.nanoTime() - start) / 1000000 < 20000) // do for 20 seconds
              {
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
              }
              */
              System.out.println("is cancellable "+this.isCancelled());
            return msg;
        } 

          protected void onPostExecute(String r) {
             // GeneratNotification(r);

           }
    } 
```

我很困惑，如果`isCancellable()`方法是`false`那么我该如何阻止它？或者我怎样才能删除我的聊天监听器？

请专家帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:37:29.800

取消任务 可以随时通过调用 cancel(boolean) 取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

检查[文档](http://developer.android.com/reference/android/os/AsyncTask.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:39:02.507

开始你的异步：

```
incomingmsg aTask = new incomingmsg();     
aTask.execute(...); 
```

阻止你异步

```
aTask.cancel(true); 
```

*按照惯例使用以大写字母开头的类名*

```
public class incomingmsg extends AsyncTask<String, Void, String>... 
```

改成：

```
public class Incomingmsg extends AsyncTask<String, Void, String>... 
```

但这只是一个好习惯

完整示例：

```
AsyncTask<Void, Void, Void> myTask = new AsyncTask<Void, Void, Void>() {
                    @Override
                    protected Void doInBackground(Void... params) {                   
                        //do this test ever step of you async task.                        
                        if(!isCancelled()){     
                         //do something here
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        myTask = null;
                    }

                };

  //here u start u task:
  myTask.execute(null, null, null);
  if(myTask != null){
   //here u stop u task:
   myTask.cancel(true);
  } 
```

# reporting-services - Reporting Services 中的图表百分比差异

> ID：16168351
> 
> 赞同：1
> 
> 时间：2013-04-23T11:35:24.730
> 
> 标签：reporting-services, charts, ssrs-2008

如何在报告服务图表中绘制年度百分比变化图表？

从我的源数据（这是一个 SharePoint 2010 列表）中，我可以使用表格中的“上一个”函数来计算以年为单位的百分比变化。我有行组（如下所示的年份）和列组（A、B 和 C）。

```
 A | B | C
-----------------
2010  
2011  3%  4% 5%
2012  2%  3% 1% 
```

表中的公式是（第 2 年利率 - 第 1 年利率）/第 1 年利率。第一行是空白的，因为我有一个 iff 函数检查是否有前一行，如果是这样，则不显示任何内容。否则它会进行计算。

我无法在图表中使用之前的函数。我该如何绘制这个？如果这是一个普通的数据库，我会考虑在该级别做一些事情并将其呈现给报告服务，但是对于 SharePoint 列表，我不能而且必须在报告服务 (2008 R2) 本身中进行分组和其他工作。

有任何想法吗？如果这可以有效地提供一些关于数据如何在图表中随时间变化的视图，我愿意以另一种方式呈现数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:01:23.227

提取另一年的一组使用`lookupset`函数和`sum`函数，例如

```
=sum(fields!number.value) - sum(lookupset(fields!year.value - 1, fields!year.value, fields!number.value, "dataset") 
```

进一步阅读[http://msdn.microsoft.com/en-us/library/ee240819.aspx](http://msdn.microsoft.com/en-us/library/ee240819.aspx)

该`lookupset`函数还返回所有匹配的值，并且该`lookup`函数仅返回第一个。

# c++ - 绕行的函数在 printf 上崩溃

> ID：16168353
> 
> 赞同：1
> 
> 时间：2013-04-23T11:35:29.550
> 
> 标签：c++, dll, detours

我在应用程序中做了一个 DLL 挂钩。
像这样绕过一个函数：

```
typedef void (WINAPI *pUCPackets)(int a1, int a2, char* a3, int a4, int a5);
void WINAPI MyUCPackets(int a1, int a2, char* a3, int a4, int a5);
pUCPackets MyUC2Packets = (pUCPackets)(0x408050);

(...) some irrelevant code (...)

DetourTransactionBegin();
DetourUpdateThread(GetCurrentThread());
DetourAttach(&(PVOID&)MyUC2Packets, MyUCPackets);
if(DetourTransactionCommit() == NO_ERROR)
    cout << "[" << MyUCPackets << "] successfully detoured." << endl; 
```

因此，我尝试通过以下方式显示绕行函数的参数内的值：

```
 void WINAPI MyUCPackets(int a1, int a2, char* a3, int a4, int a5)
 {
     printf( "%d ", a5 );
     printf("%d\n", a2);
     return MyUC2Packets(a1, a2, a3, a4, a5);
 } 
```

但是，当函数被调用并且我显示参数时，应用程序就会崩溃。
但如果我只是离开这样的功能：

```
 void WINAPI MyUCPackets(int a1, int a2, char* a3, int a4, int a5)
 {
     //no prints whatsoever
     return MyUC2Packets(a1, a2, a3, a4, a5);
 } 
```

它运行正常。为什么会这样？

OLLY 编码器：

```
Gate_00408050:                               ;<= Procedure Start

        MOV EDX,DWORD PTR SS:[ESP+0xC]
        PUSH EBP
        PUSH EDI
        MOV EDI,ECX
        XOR EBP,EBP
        MOV CL,BYTE PTR DS:[EDI+0x21C]
        TEST EDX,EDX
        JBE Gate_004080F0
        MOV EAX,DWORD PTR DS:[EDI+0x218]
        PUSH EBX
        PUSH ESI
        MOV DWORD PTR SS:[ESP+0x1C],EDX

Gate_00408074:

        MOV EDX,DWORD PTR SS:[ESP+0x14]
        DEC EAX
        TEST EAX,EAX
        MOV DL,BYTE PTR DS:[EDX]
        JLE Gate_004080A5
        LEA ESI,DWORD PTR DS:[EDI+EBP+0xEC7D]

Gate_00408086:

        MOV BL,BYTE PTR DS:[ESI+EAX]
        CMP BL,DL
        JA Gate_00408091
        SUB DL,BL
        JMP Gate_00408097

Gate_00408091:

        NOT BL
        INC BL
        ADD DL,BL

Gate_00408097:

        MOV BL,BYTE PTR DS:[ESI+EAX+0xFFFF8AD0]
        XOR DL,BL
        DEC EAX
        TEST EAX,EAX
        JG Gate_00408086

Gate_004080A5:

        MOV AL,BYTE PTR DS:[EDI+EBP+0xEC7D]
        CMP AL,DL
        JA Gate_004080B4
        SUB DL,AL
        JMP Gate_004080BA

Gate_004080B4:

        NOT AL
        INC AL
        ADD DL,AL

Gate_004080BA:

        MOV AL,BYTE PTR DS:[EDI+EBP+0x774D]
        MOV EBX,DWORD PTR SS:[ESP+0x14]
        XOR AL,DL
        MOV EDX,DWORD PTR SS:[ESP+0x18]
        XOR AL,CL
        MOV BYTE PTR DS:[EDX],AL
        XOR CL,AL
        MOV EAX,DWORD PTR DS:[EDI+0x218]
        ADD EBP,EAX
        INC EBX
        INC EDX
        MOV DWORD PTR SS:[ESP+0x14],EBX
        MOV DWORD PTR SS:[ESP+0x18],EDX
        MOV EDX,DWORD PTR SS:[ESP+0x1C]
        DEC EDX
        MOV DWORD PTR SS:[ESP+0x1C],EDX
        JNZ Gate_00408074
        POP ESI
        POP EBX

Gate_004080F0:

        POP EDI
        POP EBP
        RETN 0xC                             ;<= Procedure End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:34:24.967

的签名`MyUC2Packets`可能不正确。由于函数使用 stdcall 调用约定，因此需要在返回之前清理堆栈。如果您使用错误数量的参数调用这些函数之一，则堆栈指针在返回时将不正确。

删除打印语句时不会发生这种情况的原因是编译器可能会将转发调用优化为单个`jmp`指令。当包含打印语句时，detour 函数实际上有工作要做，并在返回之前将堆栈调整为不正确的值。如果`MyUC2Packets`需要 6 个参数但函数签名只需要 5 个参数，这将在任何时候无法优化 detour 函数时导致问题。

下面的代码通过模拟示例中的迂回设置来演示这一点。被挂钩的函数需要 4 个参数，但 detour 只需要 3 个参数。它模拟来自客户端的调用，该调用需要一个需要 4 个参数的函数。

```
#include <stdio.h>
#include <ios>
#pragma inline_depth(0)

typedef void (WINAPI *Function3)(int, int, int);
typedef void (WINAPI *Function4)(int, int, int, int);

void WINAPI FinalFunction(int x, int y, int z, int q);
void WINAPI DetourFunction(int x, int y, int z);
void WINAPI DetourFunctionPrint(int x, int y, int z);

Function3 callFinalFunction = reinterpret_cast<Function3>(FinalFunction);
Function4 callDetourFunction = reinterpret_cast<Function4>(DetourFunction);
Function4 callDetourFunctionPrint = reinterpret_cast<Function4>(DetourFunctionPrint);

void WINAPI FinalFunction(int x, int y, int z, int q)
{
    std::cout << x << " " << y << " " << z << " " << q << std::endl;
}

void WINAPI DetourFunction(int x, int y, int z)
{
    callFinalFunction(x, y, z); // Optimzed to a single jmp instruction.
}

void WINAPI DetourFunctionPrint(int x, int y, int z)
{
    printf("%d", x);
    printf("%d\n", y);
    callFinalFunction(x, y, z);
}

int main()
{
    // This works
    callDetourFunction(0, 1, 2, -1);

    // This does not
    callDetourFunctionPrint(0, 1, 2, -1);

    return 0;
} 
```

# json - AngularJS - 服务器端验证和客户端表单

> ID：16168355
> 
> 赞同：57
> 
> 时间：2013-04-23T11:35:42.637
> 
> 标签：json, angularjs

我试图了解如何做以下事情：

声明表格的公认方式是什么。我的理解是您只需在 HTML 中声明表单，然后添加 ng-model 指令，如下所示：

```
ng-model="item.name" 
```

向服务器发送什么。我可以将项目对象作为 JSON 发送到服务器，并对其进行解释。然后我可以对对象执行验证。如果失败，我会抛出一个 JSON 错误，并返回究竟是什么？有没有一种公认的方式来做到这一点？如何以一种很好的方式将验证错误从服务器推送到客户端？

我真的需要一个例子，但是 Angulars 文档很难理解。

编辑：看来我的问题表述得很糟糕。

我知道如何验证客户端，以及如何将错误/成功作为承诺回调来处理。我想知道的是，将服务器端错误消息捆绑到客户端的公认方式。假设我有一个用户名和密码注册表单。我不想轮询服务器以获取用户名，然后使用 Angular 来确定是否存在重复。我想将用户名发送到服务器，验证不存在同名的其他帐户，然后提交表单。如果发生错误，我该如何发回？

如何将数据按原样（键和值）推送到服务器，并附加一个错误字段，如下所示：

```
{
  ...data...

  "errors": [
    {
      "context": null,
      "message": "A detailed error message.",
      "exceptionName": null
    }
  ]
} 
```

然后绑定到 DOM。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-05-10T08:30:08.863

我最近也一直在玩这种东西，我敲了[这个演示](http://jsfiddle.net/Eukat/)。我认为它可以满足您的需求。

使用您要使用的任何特定客户端验证正常设置您的表单：

```
<div ng-controller="MyCtrl">
    <form name="myForm" onsubmit="return false;">
        <div>
            <input type="text" placeholder="First name" name="firstName" ng-model="firstName" required="true" />
            <span ng-show="myForm.firstName.$dirty && myForm.firstName.$error.required">You must enter a value here</span>
            <span ng-show="myForm.firstName.$error.serverMessage">{{myForm.firstName.$error.serverMessage}}</span>
        </div>
        <div>
            <input type="text" placeholder="Last name" name="lastName" ng-model="lastName"/>
            <span ng-show="myForm.lastName.$error.serverMessage">{{myForm.lastName.$error.serverMessage}}</span>
        </div>
        <button ng-click="submit()">Submit</button>
    </form>
</div> 
```

另请注意，我`serverMessage`为每个字段添加了一个：

```
<span ng-show="myForm.firstName.$error.serverMessage">{{myForm.firstName.$error.serverMessage}}</span> 
```

这是一条从服务器返回的可自定义消息，它的工作方式与任何其他错误消息相同（据我所知）。

这是控制器：

```
function MyCtrl($scope, $parse) {
      var pretendThisIsOnTheServerAndCalledViaAjax = function(){
          var fieldState = {firstName: 'VALID', lastName: 'VALID'};
          var allowedNames = ['Bob', 'Jill', 'Murray', 'Sally'];

          if (allowedNames.indexOf($scope.firstName) == -1) fieldState.firstName = 'Allowed values are: ' + allowedNames.join(',');
          if ($scope.lastName == $scope.firstName) fieldState.lastName = 'Your last name must be different from your first name';

          return fieldState;
      };
      $scope.submit = function(){
          var serverResponse = pretendThisIsOnTheServerAndCalledViaAjax();

          for (var fieldName in serverResponse) {
              var message = serverResponse[fieldName];
              var serverMessage = $parse('myForm.'+fieldName+'.$error.serverMessage');

              if (message == 'VALID') {
                  $scope.myForm.$setValidity(fieldName, true, $scope.myForm);
                  serverMessage.assign($scope, undefined);
              }
              else {
                  $scope.myForm.$setValidity(fieldName, false, $scope.myForm);
                  serverMessage.assign($scope, serverResponse[fieldName]);
              }
          }
      };
} 
```

我假装调用服务器，`pretendThisIsOnTheServerAndCalledViaAjax`你可以用 ajax 调用替换它，关键是它只返回每个字段的验证状态。在这个简单的例子中，我使用该值`VALID`来指示该字段是有效的，任何其他值都被视为错误消息。您可能想要更复杂的东西！

从服务器获得验证状态后，您只需更新表单中的状态。

您可以从范围访问表单，在这种情况下，表单被调用`myForm`，因此 $scope.myForm 为您获取表单。（如果您想了解表单控制器的工作原理，请在[此处查看表单控制器的](https://github.com/angular/angular.js/blob/master/src/ng/directive/form.js)源代码）。

然后，您想告诉表单该字段是否有效/无效：

```
$scope.myForm.$setValidity(fieldName, true, $scope.myForm); 
```

或者

```
$scope.myForm.$setValidity(fieldName, false, $scope.myForm); 
```

我们还需要设置错误信息。首先使用 $parse 获取字段的访问器。然后从服务器分配值。

```
var serverMessage = $parse('myForm.'+fieldName+'.$error.serverMessage');
serverMessage.assign($scope, serverResponse[fieldName]); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-30T11:50:03.060

我有与 Derek 类似的解决方案，在[codetunes 博客](http://codetunes.com/2013/server-form-validation-with-angular/)上有所描述。TL;博士：

*   以与 Derek 的解决方案类似的方式显示错误：

    ```
    <span ng-show="myForm.fieldName.$error.server">{{errors.fieldName}}</span> 
    ```

*   添加指令，当用户更改输入时将清除错误：

    ```
    <input type="text" name="fieldName" ng-model="model.fieldName" server-error />

    angular.module('app').directive 'serverError', ->
      {
        restrict: 'A'
        require: '?ngModel'
        link: (scope, element, attrs, ctrl) ->
          element.on 'change', ->
            scope.$apply ->
              ctrl.$setValidity('server', true)
      } 
    ```

*   通过将错误消息传递给范围并告诉该表单有错误来处理错误：

    ```
    errorCallback = (result) ->
      # server will return something like:
      # { errors: { name: ["Must be unique"] } }
      angular.forEach result.data.errors, (errors, field) ->
        # tell the form that field is invalid
        $scope.form[field].$setValidity('server', false)
        # keep the error messages from the server
        $scope.errors[field] = errors.join(', ') 
    ```

希望它会有用:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-27T22:21:47.683

好吧，Derek Ekins 给出的答案非常好用。但是：如果您使用`ng-disabled="myForm.$invalid"`- 禁用提交按钮，则该按钮不会自动返回启用状态，因为基于服务器的错误状态似乎没有改变。即使您再次编辑表单中的所有字段以符合有效输入（基于客户端验证），也不会。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T12:26:18.690

默认情况下，表单是正常提交​​的。如果您没有为表单中的每个字段提供名称属性，那么它将不会提交正确的数据。您可以做的是在提交表单之前捕获表单，然后自己通过 ajax 提交该数据。

```
<form ng-submit="onSubmit(); return false"> 
```

然后在你的`$scope.onSubmit()`函数中：

```
$scope.onSubmit = function() {
  var data = {
    'name' : $scope.item.name
  };
  $http.post(url, data)
    .success(function() {
    })
    .failure(function() {

    });
}; 
```

您还可以通过设置必需的属性来验证数据。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-23T14:40:41.183

如果你选择 ngResource，它看起来像这样

```
var Item = $resource('/items/');
$scope.item = new Item();
$scope.submit = function(){
  $scope.item.$save(
    function(data) {
        //Yahooooo :)
    }, function(response) {
        //oh noooo :(
        //I'm not sure, but your custom json Response should be stick in response.data, just inspect the response object 
    }
  );
}; 
```

最重要的是，您的 HTTP-Response 代码必须是 4xx 才能进入失败回调。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-02T05:25:38.000

截至 2014 年 7 月，AngularJS 1.3 添加了新的表单验证功能。这包括 ngMessages 和 asyncValidators，因此您现在可以在提交表单之前触发每个字段的服务器端验证。

**Angular 1.3 表单验证教程**：

*   [在 Angular 1.3 中驯服表单](http://www.yearofmoo.com/2014/09/taming-forms-in-angularjs-1-3.html)
*   [视频](https://youtu.be/AgdGhZvzUxg)| [回购](https://github.com/yearofmoo-articles/AngularJS-Forms-Article)| [演示](http://yearofmoo-angularjs-forms.herokuapp.com/)

**参考：**

*   [ngMessages 指令](https://docs.angularjs.org/api/ngMessages/directive/ngMessages)
*   [ngModel.NgModelController](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-24T23:11:33.733

我在一些项目中需要这个，所以我创建了一个指令。最后花了一点时间把它放在 GitHub 上，供任何想要一个插入式解决方案的人使用。

[https://github.com/webadvanced/ng-remote-validate](https://github.com/webadvanced/ng-remote-validate)

**特征：**

*   用于 Ajax 验证任何文本或密码输入的解决方案

*   与 Angulars 内置验证一起使用，并且可以通过 formName.inputName.$error.ngRemoteValidate 访问 cab

*   限制服务器请求（默认 400 毫秒）并且可以设置为`ng-remote-throttle="550"`

*   允许 HTTP 方法定义（默认 POST）与`ng-remote-method="GET"` 示例用法用于要求用户输入其当前密码以及新密码的更改密码表单。：

    ### 更改密码

    当前 必需 当前密码不正确。请输入您当前的帐户密码。

    ```
    <label for="newPassword">New</label>
    <input type="password"
           name="newPassword"
           placeholder="New password"
           ng-model="password.new"
           required>

    <label for="confirmPassword">Confirm</label>
    <input ng-disabled=""
           type="password"
           name="confirmPassword"
           placeholder="Confirm password"
           ng-model="password.confirm"
           ng-match="password.new"
           required>
    <span ng-show="changePasswordForm.confirmPassword.$error.match">
        New and confirm do not match
    </span>

    <div>
        <button type="submit" 
                ng-disabled="changePasswordForm.$invalid" 
                ng-click="changePassword(password.new, changePasswordForm);reset();">
            Change password
        </button>
    </div> 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-18T10:59:08.110

作为变体

```
// ES6 form controller class

class FormCtrl {
 constructor($scope, SomeApiService) {
   this.$scope = $scope;
   this.someApiService = SomeApiService;
   this.formData = {};
 }

 submit(form) {
   if (form.$valid) {
     this.someApiService
         .save(this.formData)
         .then(() => {
           // handle success

           // reset form
           form.$setPristine();
           form.$setUntouched();

           // clear data
           this.formData = {};
         })
         .catch((result) => {
           // handle error
           if (result.status === 400) {
             this.handleServerValidationErrors(form, result.data && result.data.errors)
           } else {// TODO: handle other errors}
         })
   }
 }

 handleServerValidationErrors(form, errors) {
  // form field to model map
  // add fields with input name different from name in model
  // example: <input type="text" name="bCategory" ng-model="user.categoryId"/>
  var map = {
    categoryId: 'bCategory',
    // other
  };

  if (errors && errors.length) {
    // handle form fields errors separately
    angular.forEach(errors, (error) => {
      let formFieldName = map[error.field] || error.field;
      let formField = form[formFieldName];
      let formFieldWatcher;

      if (formField) {
        // tell the form that field is invalid
        formField.$setValidity('server', false);

        // waits for any changes on the input
        // and when they happen it invalidates the server error.
        formFieldWatcher = this.$scope.$watch(() => formField.$viewValue, (newValue, oldValue) => {
          if (newValue === oldValue) {
            return;
          }

          // clean up the server error
          formField.$setValidity('server', true);

          // clean up form field watcher
          if (formFieldWatcher) {
            formFieldWatcher();
            formFieldWatcher = null;
          }
        });
      }
    });

  } else {
    // TODO: handle form validation
    alert('Invalid form data');
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-27T15:47:40.543

据我了解，问题是关于将错误从服务器传递到客户端。我不确定是否有成熟的做法。所以我将描述一种可能的方法：

```
<form name="someForm" ng-submit="submit()" ng-controller="c1" novalidate>
    <input name="someField" type="text" ng-model="data.someField" required>
    <div ng-show="someForm.$submitted || someForm.someField.$touched">
        <div ng-show="someForm.someField.$error.required" class="error">required</div>
        <div ng-show="someForm.someField.$error.someError" class="error">some error</div>
    </div>
    <input type="submit">
</form> 
```

假设服务器返回以下类型的对象：

```
{errors: {
    someField: ['someError'],
}} 
```

然后您可以通过这种方式将错误传递给 UI：

```
Object.keys(resp.errors).forEach(i => {
    resp.errors[i].forEach(c => {
        $scope.someForm[i].$setValidity(c, false);
        $scope.someForm[i].$validators.someErrorResetter
            = () => $scope.someForm[i].$setValidity(c, true);
    });
}); 
```

我使每个字段无效并添加一个验证器（这不是真正的验证器）。由于每次更改后都会调用验证器，因此让我们重置错误状态。

你可以[在这里](https://codesandbox.io/s/angularjs-forms-server-errors-omc3k)试验一下。您可能还想检查一下[`ngMessages`](https://docs.angularjs.org/api/ngMessages)。还有几篇[相关的](https://steelkiwi.com/blog/validation-error-handling-angularjs-applicatios/) [文章](https://www.yearofmoo.com/2014/09/taming-forms-in-angularjs-1-3.html)。

# android - 计费：isBillingSupported 始终不可用

> ID：16168361
> 
> 赞同：6
> 
> 时间：2013-04-23T11:36:11.507
> 
> 标签：android

我正在三星 Galaxy Tab 2 7.0 上测试应用内计费，当我尝试检查计费是否可用时，我总是得到响应 3 - `BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE (Billing API version is not supported for the type requested)`。

```
int response = payService.isBillingSupported(3, getPackageName(), "inapp"); 
```

我创建了草稿应用程序，在开发者控制台中上传了签名的 APK 并添加了测试帐户的电子邮件（在仪表板的 LICENSE TESTING 字段中，指出这些帐户也用于计费测试）。另外，我的设备正在使用这个测试帐户作为主帐户。我在 Eclipse 中调试应用程序。

编辑：也在 HTC Evo 3D 上测试过，同样的事情，响应总是返回 3。

编辑：测试帐户是否必须关联谷歌钱包或其他东西才能测试应用程序？我的位置是塞尔维亚，这可能是问题吗？

是什么导致了这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T22:30:00.130

**我现在可以确认这是一个真正的问题，与我的设备或代码无关。问题出在 Google Play 商店和我在塞尔维亚的位置。**

以下是 Google 针对此问题的官方详细信息：

> 目前，塞尔维亚的用户报告说他们不再能够在 Google Play 上购买 Android 应用程序。我们正在努力解决此问题，以便该国家/地区的用户可以再次下载付费应用；但是，目前还没有解决此问题的方法。
> 
> 如果您在塞尔维亚并且在尝试购买时遇到错误，或者您根本看不到付费应用程序，那么您遇到了这个已知问题。我们将继续更新此页面的发展，所以请稍后再回来查看。
> 
> 首次报告的问题：2012 年 2 月 1 日
> 
> 最后更新日期：2013 年 4 月 10 日

现在，我的意图是简单地测试应用计费，而不是真正购买任何东西，但是这是不可能的，因为 Play 商店总是像生产环境一样，并且在塞尔维亚存在一些问题，这当然也会影响到开发人员。

**解析度**

> 1.  通过标准 VPN 连接将设备连接到国外互联网（在我的情况下为比利时）
> 2.  在位置设置中，关闭所有功能（GPS、Wi-Fi 辅助……）
> 3.  停止（终止）Play Store 应用（如果它正在运行）
> 4.  在应用程序设置中，清除 Play Store 应用程序的缓存（不是数据）
> 5.  启动 Play 商店应用程序 - 它现在加载针对 VPN 所针对的国家/地区的不同内容

一旦 Play 商店针对不同的国家/地区，我的代码就开始完美运行。

**我写这个答案是为了帮助其他人，如果他们遇到类似的问题 - 谁知道，也许是其他国家，其他时间。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-06T17:22:52.453

我现在可以确认这是一个真正的问题，与我的设备或代码无关。问题出在 Google Play 商店和我在塞尔维亚的位置。

以下是 Google 针对此问题的官方详细信息：

目前，塞尔维亚的用户报告说他们不再能够在 Google Play 上购买 Android 应用程序。我们正在努力解决此问题，以便该国家/地区的用户可以再次下载付费应用；但是，目前还没有解决此问题的方法。

如果您在塞尔维亚并且在尝试购买时遇到错误，或者您根本看不到付费应用程序，那么您遇到了这个已知问题。我们将继续更新此页面的发展，所以请稍后再回来查看。

首次报告的问题：2012 年 2 月 1 日

最后更新时间：2013 年 4 月 10 日 现在，我的意图是简单地测试应用计费，而不是真正购买任何东西，但是这是不可能的，因为 Play 商店总是像生产环境一样，并且与塞尔维亚存在一些问题，当然，也在影响开发人员。

解析度

通过标准 VPN 连接将设备连接到国外互联网（在我的情况下为比利时） ，清除 Play 商店应用程序的缓存（不是数据） 启动 Play 商店应用程序 - 它现在加载针对 VPN 所针对的国家/地区的不同内容一旦 Play 商店针对不同的国家/地区，我的代码开始完美运行。

我写这个答案是为了帮助其他人，如果他们遇到类似的问题 - 谁知道，也许是其他国家，其他时间。

# java - 带有 jdbc 存储的 Spring 中的 Quartz Cron 调度程序

> ID：16168367
> 
> 赞同：1
> 
> 时间：2013-04-23T11:36:40.700
> 
> 标签：java, spring, postgresql, cron, quartz-scheduler

我需要在 Spring 中创建 Cron 服务，但我找不到足够的信息来如何使用 jdbc 存储。我希望 Quartz 使用我目前与 Datasource 的连接，我的数据库是 PostgreSql。我需要创建使用 jdbc 存储，因为即使服务器关闭，任务也应该完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:25:17.963

你可以试试这样的

```
<bean id="scheduler-JDBC" class="org.springframework.scheduling.quartz.SchedulerFactoryBean" abstract="true">
    <property name="dataSource" ref="myDataSource" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="jobFactory">
        <bean class="org.springframework.scheduling.quartz.SpringBeanJobFactory" />
    </property>
    <property name="overwriteExistingJobs" value="true" />
    <property name="quartzProperties">
        <props>
            <prop key="org.quartz.jobStore.isClustered">false</prop>
            <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.StdJDBCDelegate</prop>
            <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
            <prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
        </props>
    </property>
</bean>

<bean id="cronScheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean" parent="scheduler-JDBC">
    <property name="startupDelay" value="10" />
    <property name="autoStartup" value="true" />
    <property name="applicationContextSchedulerContextKey" value="applicationContext"/>
    <property name="triggers">
        <list>
            <ref bean="myTrigger" />                
        </list>
    </property>
</bean> 
```

[从http://quartz-scheduler.org/](http://quartz-scheduler.org/)下载 Quartz 发行版，您将在 docs/dbTables 中找到所需表的数据库脚本。

# google-maps - Google Maps API V3 是否支持触摸事件？

> ID：16168369
> 
> 赞同：6
> 
> 时间：2013-04-23T11:36:43.613
> 
> 标签：google-maps, google-maps-api-3, touch, internet-explorer-10, touchscreen

我们遇到了与 GoogleMaps 相关[的问题。](https://stackoverflow.com/questions/16098971/internet-explorer-windows8-touchscreen-issues)该问题主要与触摸屏有关。我们试图解决这个问题，但到目前为止还没有成功。

我们[在这篇文章](http://www.robertkern.com/sencha-touch/detecting-touch-events-on-google-maps-using-sencha-touch.html)中发现Google Maps API V3 不支持触​​摸事件？这是真的还是假的？

**更新**

此问题已在 bug 中处理

[https://issuetracker.google.com/issues/35824421](https://issuetracker.google.com/issues/35824421)

并于 2016 年 12 月在 Google Maps JavaScript API 3.27 版中得到解决。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T21:52:02.000

根据我的经验，`mousedown`, `mouseup`, `dragstart`,`dragend`事件可以很好地代替`touchstart`, `touchmove`, `touchend`.

```
google.maps.event.addListener(myMap, "mousedown", function(event){...}); 
```

我很确定`gesture`不会支持事件，因为这些事件用于捏缩放功能。

如果您需要手势，则必须通过跟踪 mousedown 事件、将它们存储在数组中、然后跟踪位置以确定角度、距离等来构建自己的识别器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T23:45:15.347

目前不支持它们。有关显示当前可用事件演示的交互式地图，请参见此处：

[https://developers.google.com/maps/documentation/javascript/events#EventsOverview](https://developers.google.com/maps/documentation/javascript/events#EventsOverview)

该页面还指出：

> 有关事件的完整列表，请参阅 Google 地图 JavaScript API 参考。

该页面没有与触摸相关的事件，因此不支持它们。

评论接受的答案时，支持的事件*并不*严格等效（触摸在语义上与鼠标单击明显不同），并且根据我的经验结果可能是可变的（例如，在某些情况下，触摸可能会导致触发Google 地图上的 onclick 事件，在某些情况下它可能会导致触发鼠标悬停事件），因此当“借用”这些事件来检测触摸时，可能需要一些失败处理来可靠地处理此类事件。

这是一篇关于使用监听器处理触摸的好文章：

[https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwiwm6y38dXXAhWHVbwKHRdUCY4QFggmMAA&url=https%3A%2F%2Fmedium.com%2F%40david.gilbertson%2Fthe-only-用javascript-7791a3346685&usg=AOvVaw3pWv0R_AESWKqwF72D0hix 检测触摸的方式](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwiwm6y38dXXAhWHVbwKHRdUCY4QFggmMAA&url=https%3A%2F%2Fmedium.com%2F%40david.gilbertson%2Fthe-only-way-to-detect-touch-with-javascript-7791a3346685&usg=AOvVaw3pWv0R_AESWKqwF72D0hix)

# python - 如何从熊猫中读取 HDF 表？

> ID：16168371
> 
> 赞同：2
> 
> 时间：2013-04-23T11:36:50.107
> 
> 标签：python, io, pandas, hdf5

我有一个`my_file.h5`文件，大概包含 HDF5 格式（PyTables）的数据。我尝试使用 pandas 读取此文件：

```
import pandas as pd
store = pd.HDFStore('my_file.h5') 
```

然后我尝试使用该`store`对象：

```
print store 
```

结果我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/pandas/io/pytables.py", line 133, in __repr__
    kind = v._v_attrs.pandas_type
  File "/usr/lib/python2.7/dist-packages/tables/attributeset.py", line 302, in __getattr__
    (name, self._v__nodePath)
AttributeError: Attribute 'pandas_type' does not exist in node: '/data' 
```

有人知道我在做什么错吗？问题是否是由于 my`*.h5`不是我认为的那样（不是 hdf5 格式的数据）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:55:45.023

在您的`/usr/lib/pymodules/python2.7/pandas/io/pytables.py`第 133 行

```
kind = v._v_attrs.pandas_type 
```

在我的`pytables.py`我看到

```
kind = getattr(n._v_attrs,'pandas_type',None) 
```

通过使用`getattr`，如果没有`pandas_type`属性，则`kind`设置为`None`。我猜我的熊猫版本

```
In [7]: import pandas as pd

In [8]: pd.__version__
Out[8]: '0.10.0' 
```

比你的新。如果是这样，解决方法是升级您的`pandas`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:06:19.177

我有一个 h5 表。使用独立于 pandas 的 pytables 制作，需要将其转换为元组列表，然后将其导入 df。这很好，因为它允许我利用我的 pytables 索引在输入上运行“位置”。这可以节省我阅读所有行的时间。

# perl - Perl - 可变深度的哈希参考结构

> ID：16168374
> 
> 赞同：0
> 
> 时间：2013-04-23T11:37:10.990
> 
> 标签：perl, loops, hash, data-dumper, hashref

我有一个问题希望有人能帮忙。

我有一个制表符分隔的文本文件，名为`FILE.txt`：

（注意缺少两个年龄）：

```
BOY    Fred      Smith     56
BOY    David     Jones     18
GIRL   Anne      Roberts   
BOY    Fred      Andrews
GIRL   Hannah    Williams  27 
```

我想将文本文件读入哈希/哈希引用数据结构（如下所示）：

```
open my $f, '<', 'FILE.txt';
my $details;
while (<$f>) {
    chomp;
    my ( $gender, $firstName, $middleName, $lastName, $age) = split("\t");
    $details->{$gender}->{$firstName}->{$lastName} = "$age";
} 
```

*   这是制作结构的正确方法吗，因为有时文本文件中可能没有年龄？

有了这个散列/散列参考结构，我想打印人们的详细信息，但因为有些人没有年龄。这会导致散列中的空值和未初始化值等问题。

这是它产生的数据：

```
{
  BOY  => { David => { Jones => 18 }, Fred => { Andrews => "", Smith => 56 } },
  GIRL => { Anne => { Roberts => "" }, Hannah => { Williams => 27 } },
} 
```

*   您如何适应此人没有指定年龄的情况`FILE.txt`？
*   如果这个数据结构的深度是可变的，你如何正确地制作它，然后正确地访问它？

如果哈希/哈希引用的深度是固定/已知的，我知道如何制作和访问它的不同部分，但是当数据结构可能有不同的深度时，最好的方法是什么？

非常感谢您的帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:05:39.557

**存储年龄的空白**值应该没有问题 ！

它是一个值，键在哈希数据结构中必须是唯一的。

你的做法是对的！

否则，将其设为空白会更好。

IE：

```
my ( $gender, $firstName, $middleName, $lastName, $age) = split("\t") ;
if($age =~ /\d+/) {
   $details->{$gender}->{$firstName}->{$lastName} = "$age"; 
} else {
   $details->{$gender}->{$firstName}->{$lastName} = ""; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:31:17.970

您可以替换这行示例代码

```
$details->{$gender}->{$firstName}->{$lastName} = "$age"; 
```

有了这个：

```
$details->{$gender}->{$firstName}->{$lastName} = "$age" if $age; 
```

但是现在你会从你的最终数据结构中错过没有年龄的记录，我不知道你的任务是否可以。

同样在您的代码中，您的年龄值包含在 string:`"$age"`中，因此当没有年龄时，您会得到空字符串值，这本身表明该记录没有年龄。

# java - 哪个组件定义了默认的数据库锁定类型？

> ID：16168375
> 
> 赞同：0
> 
> 时间：2013-04-23T11:37:11.623
> 
> 标签：java, database, locking

当事务开始时，有许多不同类型的锁定（例如乐观锁定、锁定整个表、仅锁定正在更改的行等）

如果我没有指定我想要的那个，默认类型是什么？数据库？（Java）连接器实现？用于数据库连接的 API？还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:46:09.240

Java 应用程序仅通过 JDBC 方法控制 DB。控制表锁定的标准方法是

```
Connection.setTransactionIsolation 
```

它取决于 DBMS 如何使用锁来保护请求的事务隔离级别

# python - AttributeError：类“测试”对象没有属性“A”

> ID：16168378
> 
> 赞同：1
> 
> 时间：2013-04-23T11:37:23.717
> 
> 标签：python

我正在编写一个测试类来测试另一个测试类的功能。当我尝试编译代码时，出现以下错误：“AttributeError: 'Test' object has no attribute 'A'”。这是我的代码：

```
'''
\package 
Created on 23.04.2013

@author: kuiekejl
@see http://svnserv01/hf_programmierung/doku/dokumente/PythonCookbook    /PythonCookbook.pdf
@brief 
'''
import unittest
from math import sin
from math import pi
from src.parallelogram import Parallelogram

class Test(unittest.TestCase):
    def Setup(self):
        self.A= 3.00
        self.B=7.00
        self.Angle=pi/3

    def testparallelogram(self): 
        parallelogram= Parallelogram(self.A,self.B,self.Angle)

        testgetArea = self.A*self.B*sin(self.Angle)
        self.assertEqual(parallelogram.getArea,testgetArea)

        testgetOutline=2*(self.A+self.B)        
        self.assertEqual(parallelogram.getOutLine,testgetOutline)      

if __name__ ==  '__main__':
    unittest.main() 
```

我将不胜感激任何帮助解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:40:49.857

设置方法是命名的`setUp`，不是`Setup`。你的没有运行。

# python - 在python中使用for循环将两个列表切片为具有相同大小

> ID：16168385
> 
> 赞同：1
> 
> 时间：2013-04-23T11:37:46.780
> 
> 标签：python, numpy

您好，我想使用 for 循环从现有列表中创建两个新列表。我知道通过对列表进行切片可以得到该结果，但是我有一个包含 1000 多个条目的大列表，因此通过计算索引进行切片并不是很可靠。我正在学习python，所以可能还有其他我不知道的方法，如果有人能解决我的问题，我将不胜感激。

所以我有两个清单说：

```
 a=np.linspace(1,10,30)
 b=np.linspcae(0,6,30)

 a
array([  1\.        ,   1.31034483,   1.62068966,   1.93103448,
         2.24137931,   2.55172414,   2.86206897,   3.17241379,
         3.48275862,   3.79310345,   4.10344828,   4.4137931 ,
         4.72413793,   5.03448276,   5.34482759,   5.65517241,
         5.96551724,   6.27586207,   6.5862069 ,   6.89655172,
         7.20689655,   7.51724138,   7.82758621,   8.13793103,
         8.44827586,   8.75862069,   9.06896552,   9.37931034,
         9.68965517,  10\.        ])

 b
array([ 0\.        ,  0.20689655,  0.4137931 ,  0.62068966,  0.82758621,
        1.03448276,  1.24137931,  1.44827586,  1.65517241,  1.86206897,
        2.06896552,  2.27586207,  2.48275862,  2.68965517,  2.89655172,
        3.10344828,  3.31034483,  3.51724138,  3.72413793,  3.93103448,
        4.13793103,  4.34482759,  4.55172414,  4.75862069,  4.96551724,
        5.17241379,  5.37931034,  5.5862069 ,  5.79310345,  6\.        ]) 
```

所以我的代码是：

```
for i in a:
   if i >2.27-1\. and i<2.27+1:
      print i 
```

这给了我想要的元素。

```
1.31034482759
1.62068965517
1.93103448276
2.24137931034
2.55172413793
2.86206896552
3.1724137931 
```

但我也想要bie中的对应元素

```
0.20689655
0.4137931
0.62068966
0.82758621
1.03448276
1.24137931
1.44827586 
```

我如何从这里得到想要的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:43:01.137

使用 numpy 时尽量避免 for 循环，它的速度要快得多，而且很重要。

```
mask = (a>1.27) & (a<3.27)
a[mask]
b[mask] 
```

`(a>1.27) & (a<3.27)`只返回一个布尔数组，其中值是`True`满足条件时和`False`其他地方的值。通过将`a`and分配`b`给该数组，您将获得布尔数组索引所在的值`True`。

编辑：

```
list(a[(a>1.27) & (a<3.27)])
list(b[(a>1.27) & (a<3.27)]) 
```

如果你真的想返回一个列表。如果你在这个 for 循环中做其他事情，那么你会想要坚持使用 for 循环。

# asp.net-mvc-4 - 迁移不在主机上运行

> ID：16168389
> 
> 赞同：0
> 
> 时间：2013-04-23T11:37:54.973
> 
> 标签：asp.net-mvc-4, shared-hosting, migratordotnet

我正在使用 MigratorDotNet 来管理我的 Web 应用程序的 Rails 样式迁移。我有一个工作流程，如果我删除数据库中的所有表，我可以访问一个安装视图，该视图将运行 MigratorDotNet 并创建所有必要的表。

这在本地有效。出于某种原因，当我将代码上传到我的 Arvixe 主机时，迁移永远不会运行。我收到这个奇怪的错误：

`There is already an object named 'SchemaInfo' in the database.`

这很奇怪，因为在运行迁移之前，我手动删除了数据库中的所有表（以确保它没有从以前的安装中遗留下来）。

我的代码基本上归结为：

`new Migrator.Migrator("SqlServer", connectionString.ToString(), migrationsAssembly).MigrateToLastVersion();`

我已经通过记录连接字符串是否正确（生产/托管设置）来验证，并且程序集已正确加载（名称和版本）。

在本地工作，但不在 Arvixe 上。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T07:04:30.660

对于您遇到的问题，我深表歉意。在共享主机上，不幸的是，我们可能能够更改架构的唯一方法是手动。如果您仍在寻找需要我们帮助的解决方案，请将您的票证 ID 转发至 qa .at。arvixe.com 以及 arvand .at。arvixe.com，我们可以研究解决此问题的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:15:06.900

这是黑暗的一天。

事实证明（奇怪的是）根本原因是我的托管公司使用了**我的数据库****以外的模式。`dbo`**因此，我看到的错误消息 ( `SchemaInfo already exists`) 是在谈论*他们的*桌子。

不幸的是，我的解决方案是**淘汰 MigratorDotNet 并[改用 FluentMigator](https://github.com/schambers/fluentmigrator)。**这不仅解决了问题，而且还给了我一个更容易理解的错误消息（一个指的是模式名称）。

虽然似乎无法自动设置架构，而且我需要在开发机器和生产机器上切换架构，但它仍然是一个可以解决的问题（以及更好的 API，IMO）。我用谷歌搜索，但没有找到任何方法来更改 migratordotnet 中的默认架构。

# c++ - c ++正确关闭cout

> ID：16168391
> 
> 赞同：2
> 
> 时间：2013-04-23T11:37:58.370
> 
> 标签：c++, daemon, cout

我想编写一个充当远程外壳的守护程序。因此我必须关闭标准输入、标准输出和标准错误。

现在我想知道这是如何正确完成的。

```
std::streambuf * old = std::cout.rdbuf(mStdOut.rdbuf());
std::cout << "Bla" << std::endl;
std::string text = mStdOut.str(); 
```

这有效，流现在被重定向。但是“老”是什么意思？这不是旧缓冲区，应该删除吗？当我尝试删除它时，我得到一个空指针异常，即使指针本身不是 NULL。那么我怎样才能摆脱它，或者我可以简单地忽略它？如果忽略它，守护程序是否与终端正确解除关联？

stderr 和 stdin 也是如此，但我认为处理方式是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:55:53.257

您需要做的就是关闭实际的文件描述符。这当然是特定于平台的，但守护进程也是如此。因此，对于 POSIX 平台，您可以使用 POSIX API。重定向后`cout`，您执行以下操作：

```
close(STDIN_FILENO);
close(STDOUT_FILENO);
close(STDERR_FILENO); 
```

您可能还想阅读：

[http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:46:36.540

`cout`您应该在终止程序之前恢复原始缓冲区。

您无法删除它，因为您不知道它是否是动态分配的（或者其他代码是否会调用 delete，如果是的话）。

# c# - 如何在 C# 运行时获取表的列名？

> ID：16168395
> 
> 赞同：14
> 
> 时间：2013-04-23T11:38:11.957
> 
> 标签：c#, asp.net, .net, sql-server

假设我在 SQLServer 中有一个名为 MyTable 的表

```
ID FirstName   LastName
1  Harry       Dan
2  Maria       Vicente
3  Joe         Martin 
```

现在，如果我必须在表中插入任何数据，我将像这样简单地触发 Insert Query

```
INSERT INTO MyTable (ID, FirstName, LastName) VALUES (4, Smith, Dan); 
```

但是如果我事先不知道列名怎么办，我只知道表名。那么有没有办法在运行时获取表的列名呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T11:40:08.573

您可以使用 sql-

```
SELECT name FROM sys.columns WHERE object_id = OBJECT_ID('TABLE_NAME') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T11:40:49.657

或者您可以查询`SELECT TOP 0 * FROM TableName`. 然后，您可以获得列：

```
using(var reader = command.ExecuteReader())
{
    reader.Read();
    var table = reader.GetSchemaTable();
    foreach (DataColumn column in table.Columns)
    {
        Console.WriteLine(column.ColumnName);
    }
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-07T15:15:23.783

使用纯 C# / .NET 代码的另一个选项：首先是一个辅助方法，这里返回一个简单的列名列表。使用 DataTable 保存表模式信息，意味着还可以为每一列 fx 检索其他信息。如果它是一个自动增量列等。

```
 private IEnumerable<string> GetColumnNames(string conStr, string tableName)
    {
        var result = new List<string>();
        using (var sqlCon = new SqlConnection(conStr))
        {
            sqlCon.Open();
            var sqlCmd = sqlCon.CreateCommand();
            sqlCmd.CommandText = "select * from " + tableName + " where 1=0";  // No data wanted, only schema
            sqlCmd.CommandType = CommandType.Text;

            var sqlDR = sqlCmd.ExecuteReader();
            var dataTable = sqlDR.GetSchemaTable();

            foreach (DataRow row in dataTable.Rows) result.Add(row.Field<string>("ColumnName"));
        }

        return result;
    } 
```

该方法可以调用为：

```
 var sortedNames = GetColumnNames("Data Source=localhost;Initial Catalog=OF2E;Integrated Security=SSPI", "Articles").OrderBy(x => x);
        foreach (var columnName in sortedNames) Console.WriteLine(columnName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:44:24.170

只需通过此查询：

```
SELECT * FROM sys.columns
WHERE object_id = OBJECT_ID('dbo.[table_name]') 
```

或此查询：

```
SELECT COLUMN_NAME
FROM information_schema.columns
WHERE TABLE_NAME = [table_name]
ORDER BY COLUMN_NAME 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-12T13:39:00.730

```
var ColName = "";
        var model = new AttributeMappingSource().GetModel(typeof(DataClassesDataContext));
        foreach (var mt in model.GetTables())
        {
            if (mt.TableName == "dbo.Table_Name")
            {
                foreach (var dm in mt.RowType.DataMembers)
                {
                    ColName = dm.MappedName + ", ";
                    Response.Write(ColName);
                }
            }
        } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-23T11:45:00.797

这个问题之前在各种线程中得到了回答

查看：

[如何从 SQL Server 中的表中获取列名？](https://stackoverflow.com/questions/1054984/get-columns-of-a-table-sql-server)

[如何从 Oracle 中的表中获取列名？](https://stackoverflow.com/questions/452464/how-can-i-get-column-names-from-a-table)

[如何列出表中的所有列？](https://stackoverflow.com/questions/1580450/how-do-i-list-all-the-columns-in-a-table)

# knockout.js - Knockout 自定义绑定创建函数

> ID：16168398
> 
> 赞同：0
> 
> 时间：2013-04-23T11:38:18.737
> 
> 标签：knockout.js, custom-binding

我想创建一个淘汰赛自定义绑定（所以我可以添加一个计算的 observable），就像这个例子一样：

```
var mapping = {
    'children': {
        create: function(options) {
            return new myChildModel(options.data);
        }
    }
} 
```

问题是，我的 viewModel 是实际的数组（根）。在此示例中，不是作为“孩子”的子属性。所以我需要类似的东西：

```
var mapping = {
    'root': {
        create: function(options) {
            return new myChildModel(options.data);
        }
    }
} 
```

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:23:13.253

不能只用插件的法线贴图功能来做吗？

```
var viewmodel = ko.observableArray([]);
ko.utils.arrayForEach(options.data, function(data) {
    viewmodel.push(new myChildModel(data));
} 
```

虽然我个人不会让您的视图模型成为数组，而是让数组成为视图模型上的属性，但如果您将来想添加更多属性，它会为您提供更大的灵活性。

# ubuntu - Octave 在 Ubuntu 中缺少 strread.m 和 fskipl.m

> ID：16168401
> 
> 赞同：0
> 
> 时间：2013-04-23T11:38:30.027
> 
> 标签：ubuntu, octave

每当我在 ubuntu 中从 apt-get 安装 octave 时，它​​都会丢失 fskipl 和 strread，这很奇怪，因为它们是 octave/matlab 中的核心功能......我通常最终将文件手动复制到 m 目录。有没有人有这个问题，我在 3 台 32 位和 64 位不同的机器上试过这个，但都是 ubuntu 12.04 和 12.10 以及 Octave 版本 3.2.4。debian kernel v3.0 的软件包有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:56:12.597

不，这些功能仅在 Octave 3.4.0 中实现。它们在版本 3.2.4 中不存在。Ubuntu 很长一段时间都没有在他们的存储库中更新 Octave 版本，但是看到[这个](http://wiki.octave.org/Debian)可以从 Octave 的 PPA 安装或自己从源代码构建它。

请注意，当前版本是 3.6.4，距离 3.8.0 不是很远。

# c# - 设置两个多维数组相等时的行为

> ID：16168403
> 
> 赞同：3
> 
> 时间：2013-04-23T11:38:36.620
> 
> 标签：c#, arrays

我目前正在编写俄罗斯方块应用程序。我为我的石头使用了一个多维整数数组，它表示它们在多维面板字段 (int[row][colum]) 上的位置。

当一块石头向下移动时，我现在正处于我想要更新我的字段颜色的地方。我不想循环所有字段和所有俄罗斯方块，我只想更新当前的石头，所以我为最后一个位置添加了一个变量。但是我在设置这个变量时遇到了一些问题！

我现在的问题是，为什么会这样：

```
public void moveDown()
{
    for (int i = 0; i < location.Length; i++)
    {
        last_location[i][0] = location[i][0];
        last_location[i][1] = location[i][1];
        location[i][0] += 1;
    }
} 
```

但这不会：

```
public void moveDown()
{
    last_location = location;
    for (int i = 0; i < location.Length; i++)
    {
        location[i][0] += 1;
    }
    //last_location got also updated??
} 
```

这里的问题是，在循环之后， last_location 具有与 location 变量完全相同的值，**之后**会发生变化！为什么？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:42:36.660

数组是*引用*类型。

因此，当您编写 时`last_location = location;`，**您不会创建数组的副本**。`last_location`使用与 相同的数组实例`location`。

因此，当您修改两个变量之一时，在内存中修改了相同的唯一实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:42:43.410

在第二个示例中分配引用，同时在第一个示例中分配值。

当你做**last_location = location;** 您将变量**last_location**分配给指向您的位置的指针，因此当您更改位置值时，因为 last_location 指向**location**，在您看来，这些值也发生了变化。*单个内存分区***上**的last_location和**location**点。

 *在第一种情况下**last_location[i][0] = location[i][0]**您在循环中分配值，而不是引用，因此您的**last_location**和**location**指向具有不同值的*不同内存分区。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:44:33.330

当您分配`last_location`给 引用的对象时`location`，

```
last_location = location; 
```

然后你有两个对同一个对象的引用。被引用的对象`last_location`不再被引用，将在适当的时候被垃圾回收。

* * *

实现您想要的最快的方法是初始化到与使用`last_location`相同的尺寸，`location`[`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)

例如，

```
var location = new []
    {
        new int[10],
        new int[10]
    };

var last_location = new []
    {
        new int[10],
        new int[10]
    };

Buffer.BlockCopy(location, 0, last_location, 0, location.Length * sizeof(int)); 
```*

# gcc - 破坏所有浮点寄存器的 gcc 内联汇编函数

> ID：16168407
> 
> 赞同：0
> 
> 时间：2013-04-23T11:38:46.137
> 
> 标签：gcc, inline-assembly, gnu-assembler

我正在尝试编写一个语句（ **GCC**`asm`中的内联汇编），它只调用一些函数，在浮点寄存器中返回一个值并且没有操作数，但可能会破坏所有浮点寄存器。

 **```
asm("call *%1"
    : "=t"(result_)
    : "d"(code_.data())
    : "memory", "cc", "ax", "%st(1)", "%st(2)", "%st(3)", "%st(4)", "%st(5)", "%st(6)", "%st(7)"
    ); 
```

我的问题是我不能告诉汇编器，这也破坏了顶部的浮点寄存器`%st(0)`，因为我不能在 clobber 列表中指定`"%st(0)"`（或`"%st"`）（这会导致编译错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:33:38.907

您正在返回结果`%st(0)`；这就是`t`约束的意思。因此编译器知道它被修改了。

我不确定为什么您的 GCC 不识别`%st(0)`或不`%st`作为 clobber 列表中的名称，但这在这种情况下不应该导致问题。

Apple clang 版本 4.0 (tags/Apple/clang-418.0.60)`%st`在 clobber 列表中接受，即使`=t`作为输出约束也是如此。**

# php - 获取论坛主题/回复的查询 - 仅显示最新的

> ID：16168415
> 
> 赞同：0
> 
> 时间：2013-04-23T11:39:18.723
> 
> 标签：php, mysqli, forum

祝你有美好的一天！

我一直试图解决这个问题好几个小时，但我就是无法让它发挥作用。
我有一个论坛，应该显示所有线程，按最新回复排序。
**数据库：**
*表线程*
thread_id、category_id、title、created、author、status

*表回复*
reply_id, thread_id, created, text

**询问：**

```
$query = mysqli_query($link, "SELECT * FROM threads, replies 
WHERE threads.thread_id=replies.thread_id AND threads.category_id=$cat 
AND threads.status=1 ORDER BY replies.reply_id DESC"); 
```

**问题：** 它只显示最新回复的线程。我使用 while 循环来回显所有行。mysqli_num_rows($query) 显示 3，但只打印一个线程。while 循环简单地包括：

```
while($r = mysqli_fetch_assoc($query))
{
   $thread_id = $r['thread_id'];
                    $total_comments = mysqli_num_rows(mysqli_query($link, "SELECT thread_id FROM replies WHERE thread_id=$thread_id"));
                    $last_comment = mysqli_query($link, "SELECT * FROM replies WHERE thread_id=$thread_id ORDER BY reply_id DESC LIMIT 0,1");
                    $rLastComment = mysqli_fetch_assoc($last_comment);
    $query = mysqli_query($link, "SELECT author FROM threads WHERE thread_id=$thread_id");
    $a = mysqli_fetch_assoc($query);
    echo '<tr>
     <td><img src="" alt=""></td>
     <td><a href="/forum/thread/'.$thread_id.'">'.$status.''.(substr($r['title'], 0, 15)).'</a> </td>
     <td>'.$a['author'].'</td>
     <td>'.($total_comments).'</td>
     <td>'.$lastComment.'</td>
     </tr>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:41:57.973

您需要`mysqli_fetch_assoc()`重复调​​用，每行一次。

查看 PHP 文档以获取有关如何使用 while 循环输出结果的示例：http: [//php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

# android - 在没有登录按钮的 Facebook Wall 上发布

> ID：16168417
> 
> 赞同：2
> 
> 时间：2013-04-23T11:39:27.147
> 
> 标签：android, facebook-graph-api

我想在 Facebook Wall 上发布一些文字。

我看过“Facebook Developers”的教程，但他们建议有一个登录按钮和另一个发布提要的按钮。不幸的是，这不是我想要的。

我想要的是单击我制作的按钮并直接在 Facebook Wall 上发布，而无需通过登录按钮。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:41:10.933

您可以为此使用[共享意图](http://developer.android.com/training/sharing/send.html)。

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(sendIntent); 
```

# android - 在 ListView 中居中文本项

> ID：16168424
> 
> 赞同：5
> 
> 时间：2013-04-23T11:39:50.937
> 
> 标签：android, android-layout, android-widget

如何水平居中对齐我的文本`ListView`项目`Layout`？
老实说，在问这样一个基本问题之前，我至少搜索了一个小时。

谢谢。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:hint="Remind..." />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/listviewTimeInterval"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:scrollbars="none" />

         <-- . . . --/>
         <-- more lists of the same kind--/>
         <-- . . .--/>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T11:43:42.793

您需要为您的列表视图项目创建自己的布局，如下所示

例子：

文本中心.xml：

```
<LinearLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center" >
    <TextView
        android:id="@id/textItem"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

然后，在您的代码中，您必须这样做

```
ArrayAdapter<String> ad = new ArrayAdapter<String>(this, R.layout.textcenter, R.id.textItem, functions);
listView.setAdapter(ad); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-19T11:07:49.063

如果 LisView 本身是用 android:layout_width="wrap_content" 定义的，我发现不可能在 ListView 中将项目居中。这没有意义，因为这个参数应该只影响 ListView 的位置而不是它的元素。

无论如何，将列表的宽度更改为 match_parent 允许将项目的 (layout_)gravity 属性居中。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-02-23T22:13:13.690

在 TextView 的布局中为您自定义的 ListView xml 文件使用`android:gravity="center"`. 这样就可以了。

# mysql - 没有匹配项的 MySQL 全文搜索

> ID：16168426
> 
> 赞同：0
> 
> 时间：2013-04-23T11:40:02.290
> 
> 标签：mysql, database, search, full-text-search

* * *

有这张表：

```
CREATE  TABLE search (
`uid_search` INT(15) NOT NULL auto_increment,
`uid` INT(11), 
`type` VARCHAR(30), 
`strings` TEXT, 
UNIQUE (uid,type),
PRIMARY KEY (uid_search),
FULLTEXT (strings) ) ENGINE=MyISAM 
DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci 
```

并插入这些数据：

```
INSERT INTO `search` (`uid_search`, `uid`, `type`, `strings`) 
VALUES (1, 2, 'doc', 'Formación Primeros Auxilios'); 
```

为什么这些查询都不匹配全文搜索？

`SELECT uid, type, strings, MATCH (strings) AGAINST ('Formación' IN NATURAL LANGUAGE MODE) as matches FROM search`

`SELECT uid, type, strings, MATCH (strings) AGAINST (CONVERT(_utf8'Formación' USING latin1) IN NATURAL LANGUAGE MODE) as matches FROM agd_tmp.search`

我认为UTF8有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:15:04.980

引用[手册](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)：

> 此外，出现在 50% 或更多行中的单词被认为是常见的并且不匹配。

您需要在表中插入更多行。

# c++ - c++ 上具有公共访问器的私有字段

> ID：16168430
> 
> 赞同：0
> 
> 时间：2013-04-23T11:40:05.773
> 
> 标签：c++

对不起，这个问题可能太简单了，我是 C++ 的新手。我应该如何实现`int`只能在类内部修改但具有公共访问器的字段？

在 c# 中，我们可以编写这个简单的代码：

```
public int MsgSeqNum { get; private set; } 
```

在 c++ 上，我可能应该写类似的东西（伪代码）：

```
public:
    int GetMsgSeqNum() { return msgSeqNum; };
private:
    int msgSeqNum; 
```

这是做事的正确方式吗？会`GetMsgSeqNum`被内联吗？我应该手动将方法标记为`inline`吗？添加此方法调用时是否会引入延迟？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T11:43:46.570

> 这是做事的正确方式吗？

是的，您应该将函数返回参数标记为`const`

```
int GetMsgSeqNum()const { return msgSeqNum; }; 
```

正如评论中提到的那样，`const`不允许您修改对象，因此如果您需要这样做，您应该将 getter 设为非 const，或者将您要在您的 stil `const`getter 中更改的成员声明为`mutable`.

> GetMsgSeqNum 会被内联吗？

很可能是的，在类声明中定义的任何函数都具有隐式内联。通过 inline 无论是显式还是隐式都不能保证该函数将被内联。

> 添加此方法调用时是否会引入延迟？

很可能不会，任何理智的编译器实现都会优化这样的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:43:42.290

这是在...中执行此操作的唯一**明智**的方法`C++`...您可以尝试

```
public:
    inline int GetMsgSeqNum() const { return msgSeqNum; } //const -> doesn't change object 
```

但是你不能强迫编译器坚持`inline`. 编译器决定是否使用`inline`此方法。如果编译器不内联该方法，不会有严重的性能损失，所以不用担心。

在 MSVC 中有`__forceinline`-keyword ，您可以在其中强制编译器内联您的方法，但与 getter 和 setter 一样，这可能有点过分了。

参见[维基百科](http://en.wikipedia.org/wiki/Inline_function)。

# php - 在多个 Apache 服务器上使用会话数据库

> ID：16168437
> 
> 赞同：5
> 
> 时间：2013-04-23T11:40:28.167
> 
> 标签：php, database, apache, class, session

我一直在开发一个 webApp，它应该只能通过使用 AJAX 来执行任务。它似乎工作得很好，但我遇到了一个问题，因为我没有`Session`在公共站点上存储变量。

我的登录过程类似于 iCloud 的。您到达一个要求登录的页面。您的登录信息使用 AJAX 发送到服务器并返回一个`true`或`false`。如果为真，登录框会消失，您就可以使用应用程序了。

![在此处输入图像描述](https://i.stack.imgur.com/uCSbP.jpg)

当您查看上图时，您会看到两个绿色框是完全相同的站点，没有任何 URL 刷新或任何东西。它只是同一页。

粉红色框代表尚未注册任何`Sessions`. 我的会话类是使用这个`session_set_save_handler`想法构建的。

```
session_set_save_handler(
         array($this, 'open'),
         array($this, 'close'),
         array($this, 'read'),
         array($this, 'write'),
         array($this, 'destroy'),
         array($this, 'gc')
     ); 
```

我似乎无法找到一种方法让公共站点在`pink`没有会话 ID 的情况下请求服务器上的数据。`session_set_save_handler`谁能像我 6 岁一样告诉我这个想法背后的想法？我已经阅读了 PHP 手册以了解详细信息，但这确实让我感到困惑。

如果有人知道这种通信方法如何正常工作，请告诉我。所有的 Apache 服务器都通过 LAN 网络连接，并且能够通信。他们也都可以访问`Session Class`Apache 包含库中的相同内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T14:31:14.787

看来您遇到的问题可以使用分布式会话来解决。

使用 memcached，您可以为任何连接的服务器可以共享的所有会话数据提供一个中心点。

如果您使用的是 linux，下面的代码演示了如何注释掉本地文件会话处理，并用 memcache 替换它可以让您共享会话数据。

```
 ~$ cat /etc/php5/apache2/php.ini | grep -i session 
  [Session] 
  ;session.save_handler = files 
  session.save_handler = memcache 
  session.save_path = "tcp://127.0.0.1:11211" 
```

如需深入解释，请访问：[http ://bakery.cakephp.org/articles/rynop/2010/09/10/using-memcached-to-run-your-sessions](http://bakery.cakephp.org/articles/rynop/2010/09/10/using-memcached-to-run-your-sessions)

# javascript - 冻结（或修复）FlexiGrid 中显示/隐藏菜单中的标题

> ID：16168446
> 
> 赞同：0
> 
> 时间：2013-04-23T11:41:02.203
> 
> 标签：javascript, flexigrid

我遇到问题并在这里和那里搜索从显示/隐藏菜单中修复或冻结表头的解决方案，并将在启动时显示/隐藏。为此，我在**colModel**添加了一个属性。

我给属性的名称是**"fixCol"**。如果要修复任何标题并且永远不会隐藏或显示（不会在显示/隐藏菜单列表中），只需给出**"fixCol"**的值**"true** " 。

 **示例 :: colModel : [{display: 'ID', name : 'id', width : 40, sortable : true, align: 'center', fixCol:true}, {display: 'ISO', name : 'iso' ，宽度：40，可排序：true，对齐：'center'}]，

将在**flexigrid.js**文件中检查此**fixCol 。**有一个功能

 **```
**`if (p.colModel) //create model if any
{ }`** 
```

转到那里并在检查中添加以下代码`if( cm ) {}`

```
 `if (cm.fixCol) {
                   $(th).attr('title', 'fixCol'+i);
    }` 
```

现在更新另一个代码，其中为显示/隐藏菜单添加了**复选框**（添加列控件）。在那里给出一个条件

```
if( kcol.title){}
else { $('tbody', g.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" ' + chk + ' class="togCol" value="' + cn + '" /></td><td class="ndcol2">' + this.innerHTML + '</td></tr>'); } 
```

这将检查标题是否有任何标题。如果存在任何标题，则意味着我们已将其设置为修复标题。

这将帮助您从 FlexiGrid 的显示/隐藏菜单中删除标题。

请评论并建议我解决任何问题或错误。

谢谢你。****

# dart - dart SDK 中是否有事件委托？

> ID：16168447
> 
> 赞同：6
> 
> 时间：2013-04-23T11:41:08.173
> 
> 标签：dart

想象一下，您想收听对页面上任何锚元素所做的所有点击。页面上的锚点可以在页面生命周期内动态添加/删除，您想要注册所有点击事件，即使是新添加的。

有什么方法可以使用标准库在 Dart 中附加委托事件（如在 jQuery 中）？

在 jQuery 中，您可以使用`element.on('click', '.selector', handler);`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T09:36:05.440

您现在可以这样做[`ElementStream.matches`](http://api.dartlang.org/docs/releases/latest/dart_html/ElementStream.html#matches)：

```
document.body.onClick.matches('.selector').listen((Event event) {
  print('Super cool!');

  // The currently registered target for the event
  // document.body
  event.currentTarget;

  // The element whose CSS selector matched
  // .selector
  event.matchingTarget;

  // The target to which the event was originally dispatched
  // the real element clicked under .selector
  event.target;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:30:48.543

因为我没有找到可行的解决方案，所以我创建了启用委派的包。

您可以在 [http://pub.dartlang.org/packages/delegate找到它](http://pub.dartlang.org/packages/delegate)

代码很简单：

```
delegate(parent, condition, handler) {
  return (event) {
    var element = event.target;
    while (element != parent && element != null) {
      if (condition(element)) {
        handler(event, element);
      }
      element = element.parent;
    }
  };
}

delegateOn(parent, String eventType, condition, handler) {
  parent.on[eventType].listen(delegate(parent, condition, handler));
} 
```

# html - 中间框可滚动的垂直布局（不是位置：绝对）

> ID：16168449
> 
> 赞同：2
> 
> 时间：2013-04-23T11:41:13.183
> 
> 标签：html, css

我需要一些看起来很常见的东西：

```
+-----------+
|  Header   |
+-----------+
|          ^|
|          ||
|  Scroll  ||
|          ||
|          v|
+-----------+
|  Footer   |
+-----------+ 
```

但问题是，我的标题可以换行，因此它的高度可以改变。所以我不能用于`position: absolute`布局页面和任何其他标题大小固定且*先验已知的*页面。我使用 设计了一个[解决方案](http://jsbin.com/oluhoh/14/edit)，`display: table`但它在每个浏览器中看起来都不同，并且只能在 Chrome 中按预期工作。

我需要做些什么来适应 FF 和 IE9？

[链接（仅在 chrome 中工作）](http://jsbin.com/oluhoh/14/edit)

这是按顺序排列的图片：FF、IE、Chrome（ok）

![在此处输入图像描述](https://i.stack.imgur.com/Qpxxy.png)

我的版本：FF (20.0.1), IE (9.0.8112.16421 64bit), Chrome (26.0.1410.64 m)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:45:52.190

你想要`overflow-y: scroll`。

工作示例：

## [演示](http://jsbin.com/oturiw/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:25:37.137

将 overflow-y:scroll 添加到您的内容 div 以进行滚动，并将 max-height 添加到标题。这可能对您的查询有所帮助：请参见此处：[**fiddle**](http://jsfiddle.net/XYgVH/16/)

```
.header{
    max-height: 100px;
}
.content {
  height: 400px;
  background-color: yellow;
  overflow-y: scroll;
} 
```

# php - session_start() [function.session-start] 没有这样的文件或目录

> ID：16168452
> 
> 赞同：-3
> 
> 时间：2013-04-23T11:41:24.097
> 
> 标签：php

我收到两个错误。

> 警告：session_start() [function.session-start]: open(..\Server\tmp\sess_mj3hbck8pvhpbioosqf4cu8ns2, O_RDWR) failed: No such file or directory (2) in C:\Documents and Settings\evan.YO-1EE77D2E6018\ Desktop\Games\WoWPrivate server\Vampwow legit\Server\htdocs\include\common.php 在第 3 行

我得到了

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 C:\Documents and Settings\evan.YO-1EE77D2E6018\Desktop\Games\WoWPrivate server\Vampwow legit\Server \htdocs\include\common.php:3) 在 C:\Documents and Settings\evan.YO-1EE77D2E6018\Desktop\Games\WoWPrivate server\Vampwow legit\Server\htdocs\include\common.php 第 3 行

我很难过，我不知道如何解决这个问题，我在任何地方都找不到解决方案这是我的 Common.php 文件，我将在下面发布。

```
<?php
session_start();
if (!defined('PATHROOT'))  
{define('PATHROOT', './');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:04:02.757

第二个错误“标头已发送”是因为您收到第一个错误。

第一个错误可能是您帐户的磁盘空间不足。检查您的磁盘空间限制并尽可能增加它。

**编辑：**

对于第一个错误，还请检查以下问题

[警告：session_start() 失败：没有这样的文件或目录](https://stackoverflow.com/questions/3262727/warning-session-start-failed-no-such-file-or-directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:44:21.953

`session_start();`应该是第一行不要留空行。

# php - 使用第一个 $_POST 的值发送另一个 $_POST

> ID：16168454
> 
> 赞同：1
> 
> 时间：2013-04-23T11:41:30.953
> 
> 标签：php, post

我必须使用从`$_POST`第二种方法中第一次调用获得的`$_POST`值到另一个值。例如我得到`$location = $POST['location_name'];`

我希望能够在执行另一个 $_POST 时传递 $location ，这会导致第二种形式。

```
1st Form -> 2nd Form($_POST['location-name']) -> 3rd form $_POST['location-name'] 
```

但是我在进入第三种形式时失去了价值。

如何获得第 3 种形式的值？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:46:51.227

虽然出于安全原因我不建议这样做...有*一种*方法可以使用 POST

您可以在第二页上写一堆隐藏字段，其中包含上一个表单帖子的值，如下所示：

```
foreach($_POST as $field => $val) {
  echo('<input type="hidden" name="'.$field.'" value="'.$value.'" />);
} 
```

这将为前一个`$_POST`数组中的每个值创建一个隐藏字段，并将其与新表单数据一起发送，因此第二个`$_POST`将包含第一个和第二个表单中的所有值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:45:12.080

正如其他人所说，您不能为此使用 POST。会话会更好。

如果您确实必须使用 POST，那么真正解决此问题的唯一方法是加载一个页面，该页面使用 POST 变量填写表单，然后使用 JavaScript 自动将该表单发布到 location 变量。对于每个 POST 变量，此表单必须有一个隐藏值，其名称属性与 $_POST 数组中的键相同。

有关更多面向代码的描述，请参见 Duellsy 的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:43:55.517

您应该为此使用[会话变量](http://www.php.net/manual/en/book.session.php)- 获取在第一篇文章中提交的值，将它们存储并在`$_SESSION`第二篇文章之后从那里获取它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:49:58.223

只有客户端可以进行 POST。只有当客户端向您的服务器执行 POST 时，您才会获得这些 POST 变量。

所以你应该找到另一个解决方案。您可以使用会话来存储特定于客户端的信息，这样您就可以在客户端向您的服务器发出另一个请求时识别该客户端。

```
$_SESSION['variable_name']; 
```

您还可以在下一个 POST 的表单中包含第一个 POST 的变量。如果它不是您必须在整个网站上使用的东西，而只是为了这个流程，这会更干净。

但是请注意，您应该始终验证客户发布的数据，您应该注意[跨站点请求伪造](https://en.wikipedia.org/wiki/Cross-site_request_forgery)。

# java - Java - 获取数字格式的正则表达式

> ID：16168458
> 
> 赞同：6
> 
> 时间：2013-04-23T11:41:45.843
> 
> 标签：java, regex, string

我有这个：

*   110121 自然色 95 1570,40
*   110121 自然色 95 1570,40*
*   41,110 1 x 38,20 捷克克朗)[A] *
*   ' 31,831 261,791 1308,61)
*   >01572 普拉沃 SO 17,00
*   1,000 千秒 x 17,00
*   1570,40

此输出的每一行都保存在 List 中，我想得到数字 1570,40

对于这种格式，我的正则表达式看起来像这样

```
 "([1-9][0-9]*[\\.|,][0-9]{2})[^\\.\\d](.*)"
    "^([1-9][0-9]*[\\.|,][0-9]{2})$" 
```

我有一个问题，如果最后一行是 1570,40（通过第二个正则表达式），也是 1570,40（从最后的 1570,40* 开始），但第一行没有成立..你知道在哪里是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:56:15.977

不确定我是否完全理解您的需求，但我认为您可以使用以下单词边界：

```
\b([1-9]\d*[.,]\d{2})\b 
```

为了不匹配日期，您可以使用：

```
(?:^|[^.,\d])(\d+[,.]\d\d)(?:[^.,\d]|$) 
```

**解释：**

```
The regular expression:

(?-imsx:(?:^|[^.,\d])(\d+[,.]\d\d)(?:[^.,\d]|$))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (?:                      group, but do not capture:
----------------------------------------------------------------------
    ^                        the beginning of the string
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    [^.,\d]                  any character except: '.', ',', digits
                             (0-9)
----------------------------------------------------------------------
  )                        end of grouping
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    \d+                      digits (0-9) (1 or more times (matching
                             the most amount possible))
----------------------------------------------------------------------
    [,.]                     any character of: ',', '.'
----------------------------------------------------------------------
    \d                       digits (0-9)
----------------------------------------------------------------------
    \d                       digits (0-9)
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  (?:                      group, but do not capture:
----------------------------------------------------------------------
    [^.,\d]                  any character except: '.', ',', digits
                             (0-9)
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    $                        before an optional \n, and the end of
                             the string
----------------------------------------------------------------------
  )                        end of grouping
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:54:52.377

尝试这个：

```
String s = "41,110 1 x 38,20 CZK)[A] * ";
Matcher m = Pattern.compile("\\d+,\\d+").matcher(s);
while(m.find()) {
    System.out.println(m.group());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:56:35.077

`"([1-9][0-9]*[\\.|,][0-9]{2})[^\\.\\d](.*)"`has ，这意味着它期望在`[^\\.\\d]`数字之后有一个非数字、非点符号。第二行`*`与之匹配。第一行在行尾有数字，所以没有匹配。我认为您只需要一个可以捕获所有数字的正则表达式：`[^.\\d]*([1-9][0-9]*[.,][0-9]{2})[^.\\d]*`. 此外，您应该使用`find`而不是`match`查找字符串中的任何子字符串，而不是匹配整个字符串。此外，如果一行中有两个这样的数字，则可能找到所有匹配项是有意义的，不确定它是否适合您。

此外，使用`[0-9]`或`\d`。目前它令人困惑 - 它的含义相同，但看起来不同。

# java - java中用户'user_name'@'localhost'的访问被拒绝（使用密码：YES）

> ID：16168472
> 
> 赞同：0
> 
> 时间：2013-04-23T11:42:51.473
> 
> 标签：java, jdbc

我已经在我的机器上安装了 MYSQL 数据库，并且有 java 代码来操作数据。

数据库凭据... 数据库名称：ram 用户名：“user_name” 密码：“123”。主机是：本地主机；

我给了这个“user_name”用户所有的权限（比如创建、更新、删除等等）

现在我想与数据库连接我们使用以下方法

```
DriverManager.getConnection("jdbc:MySql://localhost/ram","user_name","123"); 
```

那么它的工作正常。

现在我将用户凭据更改为主机：127.0.0.1

并将连接语法替换为`DriverManager.getConnection("jdbc:MySql://127.0.0.1/ram","Ramesh","123");`

很好，它工作正常.. 现在我想用这个用户的任何主机连接到数据库。所以我将用户详细信息更改为 Host:%

使用以下方法连接DB

```
DriverManager.getConnection("jdbc:MySql://127.0.0.1/ram","Ramesh","123"); 
```

但它给出了一个错误

```
Access denied for user 'Ramesh'@'localhost' (using password: YES) 
```

我无法确定这个问题属于 java 代码还是 DB 代码。

请让我离开这个家伙...谢谢提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:49:50.367

您需要`FLUSH PRIVILEGES;`在更改后执行`%`以使这些更改生效

# code-cleanup - AppCode 未检测到 .h 文件中未使用的导入

> ID：16168474
> 
> 赞同：2
> 
> 时间：2013-04-23T11:42:57.960
> 
> 标签：code-cleanup, appcode

我在 xcode 中开发了我的项目，为了检测项目中未使用的导入和语句，我在“AppCode”上打开了我的项目。我面临的问题是 AppCode 仅在我的项目的 .m 文件中检测未使用的导入文件，而如果我在 .h 文件中包含任何不必要的导入语句，则 AppCode 不会检测到它并且该文件不会变成灰色.

谁能告诉我，如果我们使用“AppCode”作为我们的 IDE，有什么方法可以检测项目的 .h 文件中未使用的导入语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T12:33:24.847

不，AppCode 不会故意在头文件中显示未使用的导入。标头可能包含在其他标头中，并且几乎不可能检测到标头中未使用的导入。顺便说一句，在其他头文件中包含头文件不是一种好的样式，最好使用 @class 或 @protocol 之类的预声明并将实际头文件包含在相应的源文件中。这种方法将产生更少的依赖关系并且程序的编译将更快。

# c# - 如何通过电子邮件发送 Gridview

> ID：16168477
> 
> 赞同：0
> 
> 时间：2013-04-23T11:43:07.667
> 
> 标签：c#, html, gridview

我在 C#.Net（桌面应用程序）中创建了 GridView。现在我想通过邮件将此 Gridview 发送给用户。

请告诉我如何实现这一点（通过将网格导出为 HTML 或其他方式？？）。

我在下面的 HTML 中尝试过，但遇到了很多格式问题。

```
dataGridView1.Rows[i].Cells[1].Value = data1.ToString();
dataGridView1.Rows[i].Cells[3].Value = data2.ToString();

mailBody.AppendFormat("<td>{0}</td>",data1.ToString() );
mailBody.AppendFormat("<td>{0}</td>", data2.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:44:46.653

这样做...我有Gridview，它是在没有数据源的情况下以编程方式生成的，所以面临问题...

下面的技巧奏效了:) :)

```
 DataTable dt = new DataTable();
        foreach (DataGridViewColumn col in dataGridView1.Columns)
        {
            dt.Columns.Add(col.HeaderText);
        }

        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            DataRow dRow = dt.NewRow();
            foreach (DataGridViewCell cell in row.Cells)
            {
                dRow[cell.ColumnIndex] = cell.Value;
            }
            dt.Rows.Add(dRow);
        }

      //  StringBuilder myBuilder = new StringBuilder();

        myBuilder.Append("<table border='1px' cellpadding='5' cellspacing='0' ");
        myBuilder.Append("style='border: solid 1px Silver; font-size: x-small;'>");

        myBuilder.Append("<tr align='left' valign='top'>");
        foreach (DataColumn myColumn in dt.Columns)
        {
            myBuilder.Append("<td align='left' valign='top'>");
            myBuilder.Append(myColumn.ColumnName);
            myBuilder.Append("</td>");
        }
        myBuilder.Append("</tr>");

        foreach (DataRow myRow in dt.Rows)
        {
            myBuilder.Append("<tr align='left' valign='top'>");
            foreach (DataColumn myColumn in dt.Columns)
            {
                myBuilder.Append("<td align='left' valign='top'>");
                myBuilder.Append(myRow[myColumn.ColumnName].ToString());
                myBuilder.Append("</td>");
            }
            myBuilder.Append("</tr>");
        }
        myBuilder.Append("</table>");
    } 
```

# google-api - 谷歌驱动器直接链接

> ID：16168480
> 
> 赞同：6
> 
> 时间：2013-04-23T11:43:14.927
> 
> 标签：google-api, google-drive-api

谷歌驱动器文件是否有某种直接链接，所以我可以通过他们的链接下载它们？即使是临时链接也足够了。

据我了解，webContentLink 只能由浏览器使用，downloadUrl 可用于小文本文件，应该与 XMLHttpRequest 或其他东西一起使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:42:47.167

`webContentLink`并且`downloadUrl`是您可以用来下载云端硬盘文件的两个主要链接。

*   `downloadUrl``downloadUrl + "&access_token=" + access_token`要求您使用 OAuth 2.0 进行授权（使用或使用 Authorization HTTP 标头将访问令牌附加到 URL ）。它可用于下载**任何**大小的文件。不知道是什么让你相信它只适用于小文本文件。它不是。这`downloadUrl`是一个在 24 小时左右有效的临时 URL。
*   `webContentLink`要求用户登录 Google 帐户。基本上，它使用cookie授权，这就是为什么我们通常说它是在浏览器中使用的。但是，该链接还有另一个有趣的用例：如果您的文件是公开共享的，则此链接不需要任何类型的授权，`downloadUrl`但仍需要您使用 OAuth 2.0 访问令牌。`webContentLink`永不过期。

# jquery - 在元素上强制鼠标悬停/悬停效果

> ID：16168482
> 
> 赞同：1
> 
> 时间：2013-04-23T11:43:20.937
> 
> 标签：jquery

当悬停在另一个元素上时，我想在一个元素上强制悬停效果：

```
<div class="portfolio-item-holder">
   <div class="portfolio-item-hover-content"></div>
</div>

$('portfolio-item-hover-content').on('mouseover',function(){
        $('portfolio-item-holder').trigger('mouseover');
}); 
```

但这不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:23:16.077

您不能使用 jQuery 设置悬停样式。我建议在你的 CSS 中创建一个悬停类并使用 addClass 应用它：

**CSS：**

```
.portfolio-item-holder:hover,
.portfolio-item-holder.hover {
    // these styles will be applied when naturally hovered
    // and when elements with the class "portfolio-item-holder"
    // also have the class "hover"
} 
```

**Javascript：**

```
$('.portfolio-item-hover-content').on('mouseenter', function(){
    $('.portfolio-item-holder').addClass('hover')
}); 
```

你可以在 mouseleave 上删除它：

```
$('.portfolio-item-hover-content').on('mouseleave', function(){
    $('.portfolio-item-holder').removeClass('hover')
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T11:44:12.550

嗯，你忘了`.`

```
$('.portfolio-item-hover-content').on('mouseover',function(){
        $('.portfolio-item-holder').trigger('mouseover');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:15:11.353

[`hover`](http://api.jquery.com/hover/)不将处理程序绑定到`mouseover/mouseout`，而是将它们绑定到`mouseenter/mouseleave`。

您可以触发正确的事件：http: [//jsfiddle.net/FCxfR/26/](http://jsfiddle.net/FCxfR/26/)

请注意，您可能会观察到动画的奇怪行为（[`mouseover/mouseout`](http://api.jquery.com/mouseover/)并且[`mouseenter/mouseleave`](http://api.jquery.com/mouseenter/)行为不同 - 请参阅每个文档页面末尾的示例）

* * *

看看插件是否不允许你做你想做的事（在其他元素上触发动画）。

否则，您可以通过查找为 html 设置动画的代码片段来破解您的方式，而不是使用它们的框架，而是手动将这两个函数绑定`mouseenter/mouseleave`为父节点上的处理程序。

您还需要相应地更新 css，沿着线：

```
 //rules applying to
 .portfolio-item-hover-content:hover
 //should be replaced with rules applying to
 .portfolio-item-holder:hover .portfolio-item-hover-content 
```

不言而喻：您将是唯一知道这是否会破坏页面其余部分的插件行为的人......

# php - 如何通过 Windows 7 的批处理文件运行 php 脚本？

> ID：16168483
> 
> 赞同：0
> 
> 时间：2013-04-23T11:43:20.930
> 
> 标签：php, batch-file

我有 2 个 php 文件。一个将各种 xml 文件存储在数据库中，而其他 php 文件将这些 xml 文件作为输入，解析它们并生成另一个表，其中包含有关 xml 文件的各种信息。

我希望这项工作安排在每晚。 **我想通过批处理文件来做到这一点，但我不知道如何使用 .bat 文件，以及如何在其中加入 php 脚本。**

需要帮助/指导。

谢谢。约格什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:49:47.603

当您提到 .bat 文件时，我假设您是在 Windows 机器上执行此操作

PHP 可以从命令行执行，例如 dos shell

[http://www.php.net/manual/en/features.commandline.introduction.php](http://www.php.net/manual/en/features.commandline.introduction.php)

一旦你让它手动工作，只需将你输入的内容放入一个文本文件中。（。蝙蝠）

您可以在需要使用调度程序时执行 .bat 文件（Windows 的程序文件），例如[http://windows.microsoft.com/en-GB/windows7/schedule-a-task](http://windows.microsoft.com/en-GB/windows7/schedule-a-task)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:53:07.390

1.  创建 start.sh 添加以下代码：
    #!/bin/bash
    php /path/to/folder/script.php
2.  chmod 644 script.php

或者

1.  创建 start.sh 添加以下代码：
    #!/bin/bash
    /path/to/folder/script.php
2.  chmod 755 script.php
3.  script.php 的第一行必须是：
    #!/usr/bin/php

# javascript - javascript语法错误：无效的正则表达式

> ID：16168484
> 
> 赞同：12
> 
> 时间：2013-04-23T11:43:22.023
> 
> 标签：javascript, regex

我正在用javascript编写一个应用程序。在我的应用程序中有一个搜索字符串/正则表达式的选项。如果用户输入错误的值，问题是匹配返回 javascript 错误。示例代码：

```
 function myFunction() {
      var filter = $("#text_id").val();
      var query = "select * from table";
      var found;
      if (query.match(filter) != -1) {
        found = true;
      } 
      else{
        found = false;
      }
       //Do something
    } 
```

jsfiddle：http: [//jsfiddle.net/ZVNMq/](http://jsfiddle.net/ZVNMq/)

输入字符串：`sel/\`

匹配返回 js 错误 -`Uncaught SyntaxError: Invalid regular expression: /sel\/: \ at end of pattern.`

有没有办法检查字符串是否是有效的正则表达式？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T11:55:32.167

在这种情况下，您实际上并不需要正则表达式，但如果您想避免表达式中出现无效字符，您应该转义它：

```
RegExp.quote = function(str) {
     return str.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
}; 
```

用法：

```
var re = new RegExp(RegExp.quote(filter)); 
```

如果没有正则表达式，您可以这样做：

```
if (query.indexOf(filter) != -1) {
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-23T11:47:48.747

使用 try-catch 语句：

```
function myFunction() {
    var filter = $("#text_id").val();
    var query = "select * from table";
    try {
        var regex = new RegExp(filter);
    } catch(e) {
        alert(e);
        return false;
    }
    var found = regex.test(query);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-15T12:28:12.817

```
 RegExp.quote = function allowSpecialSymbols(str) {
      return str.replace(/([.?*+^$[\]\\(){}|-])/g, '');
    };
    const regExp = new RegExp(RegExp.quote('some \ string'), 'i'); 
```

此外，您可以转义特殊字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:51:58.820

也许您应该尝试在“var query”之前转义一行上的斜杠。如果要在字符串中搜索正则表达式中的斜杠，则必须对其进行转义，否则正则表达式会将其读取为保留字符。

# domain-driven-design - DDDD：事件数据

> ID：16168485
> 
> 赞同：8
> 
> 时间：2013-04-23T11:43:28.523
> 
> 标签：domain-driven-design, cqrs, dddd

我正试图以Greg **Young 的风格了解****DDDD**。

 **有很多关于如何**使用 CQRS+EventSourcing 实现 DDDD 的讨论，**并且有一些示例实现......总之它可能会很混乱......

在 Gregs 视图**中，聚合没有 getter 或 setter** - 只是发出相应事件的状态更改方法。

基本上，一个**事件**描述了过去发生的**状态转换。**它的数据描述了发生了什么变化。

有人说，**这些数据可以通过附加数据来“*丰富***” 。***这些额外的***数据
***从哪里来***？

 *即我有**`User`**和**`Usergroup`**-**两个聚合根**（可以独立存在，有身份）。`User`有一个方法叫做`AddToUsergroup`.

```
public class User : AggregateRoot
{
    // ...
    public void AddToUsergroup(Usergroup usergroup)
    {
        // validate state
        RaiseEvent(new UserJoinedUsergroup(this.Id, usergroup.Id));
    }
    // ...
}

public class Usergroup : AggregateRoot
{
    private string _displayName;
    // ...
    public void ChangeDisplayName(string displayName)
    {
        // validate state
        RaiseEvent(new DisplayNameChanged(this.Id, displayName));
    }
    public void Apply(DisplayNameChanged e)
    {
        this._displayName = e.DisplayName;
    }
    // ...
} 
```

如果我想用用户组的**名称“****丰富**”**事件**（出于调试原因或类似原因），我该怎么做？

 ***   **吸气剂**不**存在**
*   **用户组的**内部状态****不可访问****

 ******不允许**将诸如**存储库**之类`User`的东西**注入**（**我在这里吗？！？**），例如**

 *******   读取端存储库
*   事件存储库

## 底线问题：

*   ~~能~~是否应该***注入*****诸如存储库**之类的东西来聚合根？
**   事件是否应该***只***使用**通过参数和**聚合的内部状态可用的数据？*   事件是否应该***只***包含描述状态变化的***最少*数据？***

 *而且（有点离题，但样本在这里）

*   应该`AddToUsergroup`采用**Guid** *而不是*完整的***聚合*根**？

期待您的回答！

华拉巴

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T15:02:45.130

> 是否应该注入诸如存储库之类的东西来聚合根？

不，在这种情况下也没有必要。将域服务传递给聚合上的行为方法可能是合适的，但同样在这种情况下不需要。

> 事件是否应该只使用通过参数和聚合的内部状态可用的数据？

是的，原始领域事件应该可以很容易地由聚合构建，并且可以以确定性的方式重播。

> 事件是否应该只包含描述状态变化的最少数据？

是的。然而，为了满足外部订阅者的需求，这就是[内容丰富](http://www.eaipatterns.com/DataEnricher.html)器发挥作用的地方。要从外部分派域事件，首先将其提交到事件存储，然后您可以在同一个 tx 中分派或使用进程外机制将事件发布到外部。在外部发布时，您通常会为消息使用不同的合同，因为订阅者可能需要的不仅仅是域事件本身的内容。在这种情况下，您需要用户组名称。然后，发布者可以提取用户组名称并将该数据放入丰富的事件中。此发布者可以访问允许其检索名称的用户组的读取模型存储库。

> AddToUsergroup 是否应该采用 Guid 而不是完整的聚合根？

是的。传递整个聚合可能是不可能的，并且还会产生一种错觉，即可以使用 ID 以外的东西，但事实并非如此。**************

# iphone - 使用 UIpageviewcontroller 返回屏幕时，在 pagecontroller 中加载的视图不会刷新

> ID：16168486
> 
> 赞同：1
> 
> 时间：2013-04-23T11:43:28.470
> 
> 标签：iphone, ios

我有一个带有 UIPageviewController 的 rootviewContoller，其中一次加载两个视图控制器 V1 和 V2。我在 rootviewcontroller 的 viewwillapear 中添加了以下代码。

```
[self.pageViewController setViewControllers:@[self.pageViewControllers[self.pageControl.currentPage]]
                                      direction:UIPageViewControllerNavigationDirectionForward
                                       animated:NO
                                     completion:NULL]; 
```

第一次加载 rootviewcontroller 时，控制转到 v1 或 v2 的 viewwillAppear（无论加载哪个视图）并刷新视图。
但是，当返回此屏幕时（例如在 popviewcontroller 之后），页面控制器中加载的视图不会刷新。在 pageviewcontroller 中加载的视图的 viewWillappear 根本不会被调用。

这适用于 iPhone 5。但不适用于 iPhone < 5。

提前致谢。

# c# - 首次单击时未触发按钮单击事件

> ID：16168487
> 
> 赞同：0
> 
> 时间：2013-04-23T11:43:34.030
> 
> 标签：c#, asp.net, mysql, buttonclick

我有一个项目，其中需要在第一次点击时触发事件，但在第一次点击时不会触发事件，在第二次点击时会触发它，但在第一次点击时确实会发生回发，但不会触发事件

```
<asp:Button ID="btn_search" runat="server" Text="Search" CssClass="button blue"  onclick="btn_search_Click"  CausesValidation="False"/> 
```

按钮点击事件的cs代码

```
protected void btn_search_Click(object sender, EventArgs e)
{

    if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchsubcat();
        txt_subcategory.Text = "";

    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length != 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchcat();
        txt_category.Text = "";

    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length == 0 && txt_author.Text.Length != 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchauthor();
        txt_author.Text = "";
    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length != 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchpublisher();
        txt_publisher.Text = "";
    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length != 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchisbn();
        txt_isbn.Text = "";
    }
    else if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length != 0 && txt_edition.Text.Length == 0)
    {
        btnsearchname();
        txt_bookname.Text = "";
    }
    else if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length != 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchcatsubcat();
    }
    else if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length != 0 && txt_author.Text.Length != 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {
        btnsearchcatsubcatauthor();
    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length != 0 && txt_edition.Text.Length != 0)
    {
        btnsearchbooknameedition();
    }
    else if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length == 0 && txt_author.Text.Length != 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {

        btnsearchsubcatauthor();
    }
    else if (txt_subcategory.Text.Length != 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length != 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length == 0 && txt_edition.Text.Length == 0)
    {

        fillgridsubcatpublisher();
    }
    else if (txt_subcategory.Text.Length == 0 && txt_category.Text.Length == 0 && txt_author.Text.Length == 0 && txt_publisher.Text.Length == 0 && txt_isbn.Text.Length == 0 && txt_bookname.Text.Length != 0 && txt_edition.Text.Length == 0)
    {

        btnsearchname();
    }
    else
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(),
        Guid.NewGuid().ToString
        (), "<script language=JavaScript>alert('Fill The TextBox ');</script>");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:49:11.423

试试： 1.set in congif 文件

```
 <System.web><pages eventvalidation="true"/></system.web> 
```

2 看看`ValidationGroup`你可能需要设置正确的值

但这些是你的问题的版本

# java - 需要帮助在 Spring/Maven 上配置 MongoDB

> ID：16168499
> 
> 赞同：9
> 
> 时间：2013-04-23T11:43:51.620
> 
> 标签：java, spring, mongodb, maven

当我在 Spring 中编码时，我总是使用注释，并且在涉及基于 xml 的配置时总是卡住。现在，我遇到了一个可能很简单的问题。如果你能帮助我解决这个问题，我将不胜感激。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.data.mongodb.core.MongoTemplate]: Constructor threw exception; nested exception is java.lang.IllegalAccessError: tried to access method org.springframework.core.GenericTypeResolver.getTypeVariableMap(Ljava/lang/Class;)Ljava/util/Map; from class org.springframework.data.util.ClassTypeInformation
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:281)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:984)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:888)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:562)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:272)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:196)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4887)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.data.mongodb.core.MongoTemplate]: Constructor threw exception; nested exception is java.lang.IllegalAccessError: tried to access method org.springframework.core.GenericTypeResolver.getTypeVariableMap(Ljava/lang/Class;)Ljava/util/Map; from class org.springframework.data.util.ClassTypeInformation
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:107)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:273)
    ... 24 more
Caused by: java.lang.IllegalAccessError: tried to access method org.springframework.core.GenericTypeResolver.getTypeVariableMap(Ljava/lang/Class;)Ljava/util/Map; from class org.springframework.data.util.ClassTypeInformation
    at org.springframework.data.util.ClassTypeInformation.<init>(ClassTypeInformation.java:96)
    at org.springframework.data.util.ClassTypeInformation.<clinit>(ClassTypeInformation.java:42)
    at org.springframework.data.mongodb.core.convert.DefaultMongoTypeMapper.<clinit>(DefaultMongoTypeMapper.java:45)
    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.<init>(MappingMongoConverter.java:107)
    at org.springframework.data.mongodb.core.MongoTemplate.getDefaultMongoConverter(MongoTemplate.java:1691)
    at org.springframework.data.mongodb.core.MongoTemplate.<init>(MongoTemplate.java:189)
    at org.springframework.data.mongodb.core.MongoTemplate.<init>(MongoTemplate.java:175)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    ... 26 more 
```

**spring-servlet.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/data/mongo
        http://www.springframework.org/schema/data/mongo/spring-mongo-1.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:annotation-config />

    <context:component-scan base-package="co.jobstix.controller">
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Controller" />
    </context:component-scan>

    <context:component-scan base-package="co.jobstix.service">
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Service" />
    </context:component-scan>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/view/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <mongo:mongo host="127.0.0.1" port="27017" />
    <mongo:db-factory dbname="jobstix" />

    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
    </bean>
</beans> 
```

**SpringMongoConfig.java**

```
@Configuration
public class SpringMongoConfig {

    public @Bean
    MongoDbFactory mongoDbFactory() throws Exception {
        return new SimpleMongoDbFactory(new MongoClient(), "yourdb");
    }

    public @Bean
    MongoTemplate mongoTemplate() throws Exception {
        MongoTemplate mongoTemplate = new MongoTemplate(mongoDbFactory());
        return mongoTemplate;
    }
} 
```

祝你有美好的一天！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-06T19:19:11.143

编译后的`IllegalAccessError`代码（不涉及反射）通常意味着版本不匹配：客户端代码是针对依赖项的版本编译的，其中成员具有更宽松的访问修饰符。更新您的 Maven 依赖项。

（因为这是一个最近遇到的非常老的问题：所涉及的版本都是过时的，应该升级到现代版本，这应该可以解决问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-11T09:35:35.663

```
 !.  Changes in Xml

    spring-servlet.xml you can also change name with spring-servlet.xml to yourProjectName-servlet.xml

        http://www.springframework.org/schema/data/mongo
          http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd

          change to 1.1

                  http://www.springframework.org/schema/data/mongo
        http://www.springframework.org/schema/data/mongo/spring-mongo-1.1.xsd

    <mongo:mongo host="localhost" port="27017">

    <mongo:options connections-per-host="100"
   threads-allowed-to-block-for-connection-multiplier="5"
            max-wait-time="120000000"
            connect-timeout="10000000"
            socket-keep-alive="true"
            socket-timeout="15000000"
            auto-connect-retry="true"/>

    </mongo:mongo>

    <mongo:db-factory dbname="jobstix"
        mongo-ref="mongo" />
    <bean id="mongoTypeMapper"
        class="org.springframework.data.mongodb.core.convert.DefaultMongoTypeMapper">
        <constructor-arg name="typeKey">
            <null />
        </constructor-arg>
    </bean>
    <bean id="mongoMappingContext"
        class="org.springframework.data.mongodb.core.mapping.MongoMappingContext" />
    <bean id="mongoConverter"
        class="org.springframework.data.mongodb.core.convert.MappingMongoConverter">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
        <constructor-arg name="mappingContext" ref="mongoMappingContext" />
        <property name="typeMapper" ref="mongoTypeMapper"></property>
    </bean>
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
        <constructor-arg name="mongoConverter" ref="mongoConverter" />
        <property name="writeResultChecking" value="EXCEPTION" />
    </bean>

2\. Put Four Jars OR Get From Maven

/Test/WebContent/WEB-INF/lib/mongo-java-driver-2.10.1.jar
/Test/WebContent/WEB-INF/lib/spring-data-commons-1.5.1.RELEASE.jar
/Test/WebContent/WEB-INF/lib/spring-data-commons-core-1.3.1.RELEASE.jar
/Test/WebContent/WEB-INF/lib/spring-data-mongodb-1.3.1.RELEASE.jar

3\. In Dao/Service/Controller you can call these connection to Autowired

    @Autowired
    private MongoTemplate mongoTemplate;

    @Autowired
    private MongoOperations mongoOperation; 
```

# mysql - 启动截断，然后写入

> ID：16168501
> 
> 赞同：0
> 
> 时间：2013-04-23T11:43:53.323
> 
> 标签：mysql, pdo, myisam

如果我`TRUNCATE`在一个表上启动 a ，`INSERT`对那个表执行的 s 会发生什么？他们是排队直到`TRUNCATE`完成，还是只是被丢弃？我知道这种情况非常罕见，但这是可能的。

我在 MySQL 中使用 PDO 事务，但是`TRUNCATE`在事务之后我必须对表进行操作。我不想`DELETE`在事务中使用，因为它比`TRUNCATE`. 这是针对网站上的统计记录器的，因此可以轻松地对同一个表进行并发请求。

执行的查询是（来自查询日志）：

```
SHOW PROCESSLIST
SELECT COUNT(*) AS Counter FROM stats_current
START TRANSACTION
LOCK TABLES stats_current WRITE, stats WRITE
UNLOCK TABLES
LOCK TABLES stats_customer_current WRITE, stats_customer WRITE
UNLOCK TABLES
LOCK TABLES stats_update_queue WRITE, stats_customer_current WRITE, stats_customer WRITE
UNLOCK TABLES
TRUNCATE stats_update_queue
commit 
```

# sql - 从 PostgreSQL 中的搜索中排除过时数据的最佳方法

> ID：16168504
> 
> 赞同：5
> 
> 时间：2013-04-23T11:43:58.140
> 
> 标签：sql, postgresql, indexing, plpgsql, ddl

我有一个包含以下列的表：

*   一个名为的整数列`id`
*   一个名为的文本列`value`
*   一个名为的时间戳列`creation_date`

目前，已经为`id`和`value`列创建了索引。

我必须在此表中搜索给定的值，并希望尽可能快地进行搜索。但我真的不需要查看超过一个月的记录。因此，理想情况下，我想将它们从索引中排除。

实现这一目标的最佳方法是什么：

1.  执行表分区。仅在子表中搜索适当的月份。
2.  创建仅包括最近记录的部分索引。每个月重新创建它。
3.  还有什么？

（PS.：“最佳解决方案”是指最方便、快捷、易于维护的解决方案）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:41:20.513

### 部分索引

[**部分索引**](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)将是完美的，甚至是部分[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)。但是你的情况

> 不需要在超过 1 个月的记录中搜索值

*不稳定*。_ 部分索引的条件只能用于文字或`IMMUTABLE`函数，即常量值。你提到`Recreate it every month`，但这不符合你的定义`older than one month`。你看出区别了吧？

如果您只需要当前（或上一个）月份，索引重新创建以及查询本身就会变得相当简单！

对于这个答案的其余部分，我会用你的定义**“不超过一个月” 。**我以前不得不处理这样的情况。以下解决方案最适合我：

将索引条件基于固定时间戳，并在查询中使用相同的时间戳来说服查询规划器它可以使用部分索引。这种部分将在很长一段时间内保持有用，只是它的有效性会随着新行的添加和旧行退出您的时间范围而下降。索引将返回越来越多的误报，附加`WHERE`子句必须从查询中消除这些误报。重新创建索引以更新其条件。

给定您的测试表：

```
CREATE TABLE mytbl (
   value text
  ,creation_date timestamp
); 
```

创建一个非常简单的`IMMUTABLE`SQL 函数：

```
CREATE OR REPLACE FUNCTION f_mytbl_start_ts()
  RETURNS timestamp AS
$func$
SELECT '2013-01-01 0:0'::timestamp
$func$ LANGUAGE sql IMMUTABLE; 
```

在部分索引的条件下使用函数：

```
CREATE INDEX mytbl_start_ts_idx ON mytbl(value, creation_date)
WHERE (creation_date >= f_mytbl_start_ts()); 
```

`value`先来。在dba.SE上的[相关答案中进行了解释](https://dba.stackexchange.com/questions/33196/multicolumn-index-and-performance/33220#33220)。
@Igor 在评论中的输入让我改进了我的答案。部分*多*列索引应该可以更快地排除部分索引中的误报 - 索引条件的本质是它总是越来越过时（但仍然*比*没有它好得多）。

### 询问

像这样的查询将使用索引并且应该非常快：

```
SELECT value
FROM   mytbl
WHERE  creation_date >= f_mytbl_start_ts()            -- !
AND    creation_date >= (now() - interval '1 month')
AND    value = 'foo'; 
```

`WHERE`看似多余的子句的唯一目的是：`creation_date >= f_mytbl_start_ts()`让查询规划器使用部分索引。

您可以手动删除和重新创建函数和索引。

### 全自动化

或者你可以在一个更大的方案中自动化它，可能有很多类似的表：

**免责声明**：这是高级的东西。您需要知道自己在做什么，并考虑 *用户权限*、可能的*SQL 注入*和并发负载较大的*锁定问题！*

这个“指导表”在你的政权中每张桌子都有一行：

```
CREATE TABLE idx_control (
   tbl text primary key  -- plain, legal table names!
  ,start_ts timestamp
); 
```

我会将所有这些元对象放在一个*单独的模式*中。

对于我们的示例：

```
INSERT INTO idx_control(tbl, value)
VALUES ('mytbl', '2013-1-1 0:0'); 
```

“指导表”提供了额外的好处，您可以在一个中心位置概览所有此类表及其各自的设置，并且您可以同步更新其中的部分或全部。

每当您`start_ts`在此表中进行更改时，以下触发器就会启动并处理其余部分：

触发功能：

```
CREATE OR REPLACE FUNCTION trg_idx_control_upaft()
  RETURNS trigger AS
$func$
DECLARE
   _idx  text := NEW.tbl || 'start_ts_idx';
   _func text := 'f_' || NEW.tbl || '_start_ts';
BEGIN

-- Drop old idx
EXECUTE format('DROP INDEX IF EXISTS %I', _idx);

-- Create / change function; Keep placeholder with -infinity for NULL timestamp
EXECUTE format('
CREATE OR REPLACE FUNCTION %I()
  RETURNS timestamp AS
$x$
SELECT %L::timestamp
$x$ LANGUAGE SQL IMMUTABLE', _func, COALESCE(NEW.start_ts, '-infinity'));

-- New Index; NULL timestamp removes idx condition:    
IF NEW.start_ts IS NULL THEN 
   EXECUTE format('
   CREATE INDEX  %I ON %I (value, creation_date)', _idx, NEW.tbl);
ELSE
   EXECUTE format('
   CREATE INDEX  %I ON %I (value, creation_date)
   WHERE  creation_date >= %I()', _idx, NEW.tbl, _func);
END IF;

RETURN NULL;

END
$func$ LANGUAGE plpgsql; 
```

扳机：

```
CREATE TRIGGER upaft
AFTER UPDATE ON idx_control
FOR EACH ROW
WHEN (OLD.start_ts IS DISTINCT FROM NEW.start_ts)
EXECUTE PROCEDURE trg_idx_control_upaft(); 
```

`UPDATE`现在，转向台上的一个简单的校准索引和功能：

```
UPDATE idx_control
SET    start_ts = '2013-03-22 0:0'
WHERE  tbl = 'mytbl'; 
```

您可以运行 cron 作业或手动调用它。
使用索引的查询不会改变。

[**-> SQLfiddle**](http://www.sqlfiddle.com/#!12/74d4f/1)。
我用一个 10k 行的小测试用例更新了小提琴来证明它是有效的。PostgreSQL 甚至**会对我的示例查询进行仅索引扫描**。不会比这更快。

# jquery - 加快谷歌地图的加载速度

> ID：16168517
> 
> 赞同：4
> 
> 时间：2013-04-23T11:44:46.973
> 
> 标签：jquery, google-maps, asynchronous

我正在尝试加快我的网页速度，而让网页速度减慢的一件事是我的谷歌地图。我目前的设置是这样的：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=key_goes_here&amp;sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script> 
```

在我的 document.ready 脚本中：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

是否有替代方法，我确实尝试了异步加载，但我无法让它与信息框一起使用，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:02:40.670

您可以异步加载地图：请参阅[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async)

如果静态地图可以，您可以使用它。一旦用户需要完整的地图，您就可以加载它。

如果您不需要 Infobox.js，请将其删除。如果您仍然需要它加载较小的打包版本（infobox_packed.js）。

最后但并非最不重要的一点是，您的网页是如何加载到像谷歌浏览器这样的拨款分析器中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:50:30.037

如果您在文档底部包含脚本标签或使用像**[HeadJS](http://headjs.com/)**这样的 javascript 加载库，您可以加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T10:19:11.610

您可以异步加载 Google API，之后，您可以有一个自定义事件来指示地图加载过程何时完成。您可以将照片与地图一起使用，当事件触发时，隐藏照片，您将拥有没有“缓慢加载效果”的地图。

# android - 安卓多语言支持

> ID：16168519
> 
> 赞同：2
> 
> 时间：2013-04-23T11:44:58.637
> 
> 标签：android, language-agnostic, libgdx, multilingual

我有用英语开发的 android 应用程序，也有英语内容。是否有可能将所有文本都转换为其他语言，例如中文或日文，然后如何？一些示例代码或教程将对我有很大帮助。

我可以通过如下代码设置来选择语言。

```
Locale.getDefault().getDisplayLanguage() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:01:36.553

通常的做法是：

`strings.xml`在项目文件夹中的文件中输入字符串`/res/values/`。然后，您可以通过将字符串文件添加到本地化`/res/values/`文件夹来定义字符串文件的不同本地化。（`/res/values-jp/`或`/res/values-en/`等）

请参阅：[开发者 Android](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T07:49:53.290

我们也可以使用翻译api。请参阅此链接
[http://www.creatiosoft.com/how-to-use-microsoft-translation-api-in-android/](http://www.creatiosoft.com/how-to-use-microsoft-translation-api-in-android/)

# titanium - 钛与 TideSDK 的兼容性

> ID：16168522
> 
> 赞同：1
> 
> 时间：2013-04-23T11:45:04.967
> 
> 标签：titanium, tidesdk

据我所知，TideSDK 曾经是 Titanium Desktop，对吧？

我想问一下是否有人有在 TideSDK 中重用 Titanium mobile 组件（主要是业务逻辑和数据访问）的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:14:21.953

我已经为这两者开发了，根据我的经验，移动版 Titanium 和 TideSDK 在这一点上是相当不兼容的。

[这是 Appcelerator 开源](http://developer.appcelerator.com/blog/2012/01/the-future-of-titanium-desktop.html)项目并停止工作的原因之一。这与他们公司强大的移动 API 的目标大相径庭，以至于对他们来说开发它没有意义。在这一点上，API 以及技术和工作流程都非常不同，从 UI 到业务逻辑，到数据访问，再到后端的开发堆栈。

我能够重用的唯一部分是纯 JavaScript 实用程序文件和 Titanium 本地数据库访问脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:52:12.030

您可以在 TideSDK 中使用大部分 javascript 代码，而无需进行太多修改。桌面平台和移动平台上的各种 UI 组件之间存在根本区别。举个例子……在桌面你的应用程序有窗口……你可以有单独的 UI 项目，如系统托盘、任务栏等。而在移动设备中，你通常会控制整个屏幕，并且各种 UI 组件与桌面有很大不同。

这就是为什么您需要以桌面和移动分开的方式实现本机接口，但大多数业务逻辑将保持不变。

# arrays - 以有效的方式对两个数组进行排序和合并？

> ID：16168524
> 
> 赞同：1
> 
> 时间：2013-04-23T11:45:12.143
> 
> 标签：arrays, algorithm, sorting, data-structures

我们有两个数组（未排序），容量为**n**和**n+m**。第一个数组有**n 个**元素。第二个数组有**m**个元素（另外还有**n 个**位置为更多元素保留）。

目标是合并两个数组并将结果以排序方式存储在第二个数组中，而不使用额外的空间。

目前，我使用快速排序对两个数组进行排序，然后使用合并排序将它们合并。有没有更有效的方法来实现这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:48:14.580

您可以探索归并排序。

[https://www.google.com/search?q=mergesort&ie=UTF-8&oe=UTF-8&hl=en&client=safari#itp=open0](https://www.google.com/search?q=mergesort&ie=UTF-8&oe=UTF-8&hl=en&client=safari#itp=open0)

或者根据大小，您可以对每个数组进行快速排序，然后使用合并排序技术将它们合并（或合并，然后快速排序）。

我会使用mergesort，它基本上通过单独排序每个数组，然后将它们按顺序放在一起

您正在查看合并排序的 O(nlogn) 和快速排序的 O(nlogn)，但快速排序可能是 O(n^2) 最坏的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T15:25:07.090

显然，最好的做法是将 N 的内容复制到 N+M 数组的空闲空间中，然后对 N+M 数组进行快速排序。

通过进行 2 次快速排序然后进行合并排序，您只会降低整个操作的效率。

这是一个心理练习，如果您必须对长度为 M 的数组进行排序，您会将其拆分为 2 个数组，M1 和 M2，对每个数组进行排序，然后将它们合并排序吗？不，如果你这样做了，你只会限制每次快速排序调用的可用信息，从而减慢进程。

那么，为什么要将两个起始数组分开？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:11:22.643

如果我还想保证 O(n*log(n)) 行为，我将使用[Heapsort](http://en.algoritmy.net/article/39807/Heapsort)的修改版本，它将使用这两个数组作为堆的基础，并将排序后的数据存储在附加部分中的数组。

这也可能比两个快速排序更快，因为它不需要额外的合并操作。当对小数组进行排序时，快速排序也非常慢（问题的大小没有提到问题的设置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:46:10.670

让我们将较小的数组称为 N 数组，将另一个称为 M 数组。我假设 M 数组的元素最初位于 0 到 m-1 的位置。使用您最喜欢的技术对两个数组进行排序，这可能取决于其他标准，例如稳定性或限制最坏情况的行为。

```
if min(N) > max(M)
   copy N's elements over starting at location m [O(n) time]   
else
   move M's elements to the end of the M array (last down to first) [O(m) time]   
   if min(M) > max(N)
      copy N's elements over starting at location 0 [O(n) time for the copy]
   else
      perform classic merge: min of remaining m's and n's gets migrated
      to next available space in M [O(min(m,n) time] 
```

总体而言，这主要由初始排序时间决定，合并阶段都是线性的。将 m 迁移到 M 数组的末尾可以保证没有空间冲突，因此根据您的规范，您不需要额外的侧存储。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:06:04.750

如果您将存储在第二个数组中，那么您将使用额外的空间，但是您可以通过像这样帮助 GC 来最小化它：

*   将两个数组加入第二个数组
*   将先前的两个变量都设置为 null，以便它们有资格被垃圾收集
*   对第二个数组进行排序，`Arrays.sort(...)`- **O(n log(n))**

查看此方法的 javadoc：

```
/**
  * Sorts the specified array into ascending numerical order.
  *
  * <p>Implementation note: The sorting algorithm is a Dual-Pivot Quicksort
  * by Vladimir Yaroslavskiy, Jon Bentley, and Joshua Bloch. This algorithm
  * offers O(n log(n)) performance on many data sets that cause other
  * quicksorts to degrade to quadratic performance, and is typically
  * faster than traditional (one-pivot) Quicksort implementations.
  *
  * @param a the array to be sorted
  */
  public static void sort(int[] a) { 
```

# selenium - Jenkins 和 Seleniumhq 配置

> ID：16168525
> 
> 赞同：0
> 
> 时间：2013-04-23T11:45:13.717
> 
> 标签：selenium, jenkins, debian, selenium-rc

我正在尝试在 Jenkins 中设置一个简单的 Selenium 测试。我的操作系统是 Debian GNU/Linux 6.0.7（挤压），桌面版（64 位）。我卸载了提供的浏览器 iceweasel 并安装了 Firefox 的 aptitude。Firefox 版本是“20.0”。我也安装了谷歌浏览器。我可以通过在终端窗口中写入“firefox”来运行 Firefox。Jenkins 安装了 aptitude。

所以，我在 Jenkins 中安装了一个名为 Seleniumhq 的插件。这些是我的设置：

![在此处输入图像描述](https://i.stack.imgur.com/aBY2e.png)

然后，当我尝试构建时，我在 Jenkins 控制台中收到错误消息：

```
Started by user anonymous
Building in workspace /var/lib/jenkins/workspace/selenium2
java -jar /var/lib/jenkins/selenium-server-standalone-2.0b2.jar -trustAllSSLCertificates      -htmlSuite *firefox http://site.com /var/lib/jenkins/jobs/Selenium1/suites/suite1.html   /var/lib/jenkins/jobs/Selenium1/logs/selenium.html
[selenium2] $ java -jar /var/lib/jenkins/selenium-server-standalone-2.0b2.jar -   trustAllSSLCertificates -htmlSuite *firefox http://site.com      /var/lib/jenkins/jobs/Selenium1/suites/suite1.html    /var/lib/jenkins/jobs/Selenium1/logs/selenium.html
 13:32:18.507 INFO - Java: Sun Microsystems Inc. 14.0-b16
 13:32:18.508 INFO - OS: Linux 2.6.32-5-amd64 amd64
 13:32:18.512 INFO - v2.0 [b2], with Core v2.0 [b2]
 13:32:18.604 INFO - RemoteWebDriver instances should connect to:      http://127.0.0.1:4444/wd/hub
 13:32:18.605 INFO - Version Jetty/5.1.x
13:32:18.606 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
13:32:18.606 INFO - Started HttpContext[/selenium-server,/selenium-server]
13:32:18.607 INFO - Started HttpContext[/,/]
13:32:18.616 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@488e32e7
13:32:18.616 INFO - Started HttpContext[/wd,/wd]
13:32:18.621 INFO - Started SocketListener on 0.0.0.0:4444
13:32:18.621 INFO - Started org.openqa.jetty.jetty.Server@5a5e5a50
HTML suite exception seen:
java.lang.RuntimeException: java.lang.RuntimeException: Firefox 3 could not be found in    the path!
Please add the directory containing ''firefox-bin' or 'firefox'' to your PATH   environment
 variable, or explicitly specify a path to Firefox 3 like this:
*firefox3/blah/blah/firefox-bin
at    org.openqa.selenium.server.browserlaunchers.BrowserLauncherFactory.createBrowserLauncher(Bro wserLauncherFactory.java:160)
at  org.openqa.selenium.server.browserlaunchers.BrowserLauncherFactory.getBrowserLauncher(Browse rLauncherFactory.java:99)
at    org.openqa.selenium.server.htmlrunner.HTMLLauncher.getBrowserLauncher(HTMLLauncher.java:58)
at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:114)
at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:166)
at org.openqa.selenium.server.SeleniumServer.runHtmlSuite(SeleniumServer.java:557)
at org.openqa.selenium.server.SeleniumServer.boot(SeleniumServer.java:250)
at org.openqa.selenium.server.SeleniumServer.main(SeleniumServer.java:210)
  Caused by: java.lang.RuntimeException: Firefox 3 could not be found in the path!
  Please add the directory containing ''firefox-bin' or 'firefox'' to your PATH environment
  variable, or explicitly specify a path to Firefox 3 like this:
 *firefox3/blah/blah/firefox-bin
at org.openqa.selenium.browserlaunchers.locators.Firefox2or3Locator.findBrowserLocationOrFail(Firefox2or3Locator.java:26)
at org.openqa.selenium.server.browserlaunchers.BrowserInstallationCache.locateBrowserInstallation(BrowserInstallationCache.java:27)
at org.openqa.selenium.server.browserlaunchers.FirefoxLauncher.<init>(FirefoxLauncher.java:52)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at org.openqa.selenium.server.browserlaunchers.BrowserLauncherFactory.createBrowserLauncher(BrowserLauncherFactory.java:153)
... 7 more
 Finished: SUCCESS 
```

我还尝试将其放在浏览器字段中： *firefox/usr/bin/firefox 我认为 firefox 已安装在那里（我运行了“locate firefox”）。该配置呈现另一个错误消息：

```
...
HTML suite exception seen:
java.lang.RuntimeException: Browser not supported: *firefox/usr/bin/firefox

Supported browsers include:
*firefox
*mock
*firefoxproxy
*pifirefox
*chrome
*iexploreproxy
*iexplore
*firefox3
*safariproxy
*googlechrome
*konqueror
*firefox2
*safari
*piiexplore
*firefoxchrome
*opera
*iehta
*custom 
.... 
```

有人对如何解决这个问题有想法吗？谢谢！

**编辑**

我将浏览器设置更改为： *firefox /opt/firefox/firefox（之间有空格） 现在似乎可以找到 FIrefox，但我收到另一个错误：

```
 Started by user anonymous
 Building in workspace /var/lib/jenkins/workspace/selenium2
 java -jar /var/lib/jenkins/selenium-server-standalone-2.0b2.jar -trustAllSSLCertificates -htmlSuite *firefox /opt/firefox/firefox http://site.com   /var/lib/jenkins/jobs/selenium2/suites/suite1.html   /var/lib/jenkins/jobs/selenium2/logs/selenium.html
 [selenium2] $ java -jar /var/lib/jenkins/selenium-server-standalone-2.0b2.jar -    trustAllSSLCertificates -htmlSuite "*firefox /opt/firefox/firefox" http://site.com  /var/lib/jenkins/jobs/selenium2/suites/suite1.html  /var/lib/jenkins/jobs/selenium2/logs/selenium.html
 10:51:15.567 INFO - Java: Sun Microsystems Inc. 14.0-b16
 10:51:15.569 INFO - OS: Linux 2.6.32-5-amd64 amd64
 10:51:15.572 INFO - v2.0 [b2], with Core v2.0 [b2]
 10:51:15.668 INFO - RemoteWebDriver instances should connect to:     http: //127.0.0.1:4444/wd/hub
 10:51:15.669 INFO - Version Jetty/5.1.x
 10:51:15.669 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
 10:51:15.670 INFO - Started HttpContext[/selenium-server,/selenium-server]
 10:51:15.670 INFO - Started HttpContext[/,/]
 10:51:15.680 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@3da99561
 10:51:15.680 INFO - Started HttpContext[/wd,/wd]
 10:51:15.685 INFO - Started SocketListener on 0.0.0.0:4444
 10:51:15.685 INFO - Started org.openqa.jetty.jetty.Server@182d9c06
 10:51:15.743 INFO - Preparing Firefox profile...
HTML suite exception seen:
 java.lang.NullPointerException
at org.openqa.selenium.os.CommandLine.destroy(CommandLine.java:259)
at  org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.populateCustomProfileDirec tory(FirefoxChromeLauncher.java:117)
at  org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.launch(FirefoxChromeLauncher.java:84)
at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.launchHTMLSuite(FirefoxChromeLauncher.java:406)
at org.openqa.selenium.server.browserlaunchers.FirefoxLauncher.launchHTMLSuite(FirefoxLauncher.java:106)
at  org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:121)
at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:166)
at org.openqa.selenium.server.SeleniumServer.runHtmlSuite(SeleniumServer.java:557)
at org.openqa.selenium.server.SeleniumServer.boot(SeleniumServer.java:250)
at org.openqa.selenium.server.SeleniumServer.main(SeleniumServer.java:210)
  10:51:35.789 INFO - Shutting down...
  Finished: SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T16:35:56.090

您应该尝试从 shell 运行命令行，看看会发生什么。这肯定是与 selenium 实例化的 firefox 使用的默认配置文件相关的问题。

在我的情况下，问题是firefox是通过显示可以恢复的选项卡开始的。

您也可以尝试创建特定的配置文件： `firefox -p` 或 `firefox -ProfileManager`

然后使用命令行参数使用这个专用配置文件：
`-firefoxProfileTemplate /home/userXXX/.mozilla/firefox/ljhyckqd.Selenium`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T14:42:04.863

好吧，我找到了一个很好的教程，结果证明它很有用。一件重要的事情是在服务器上启动一个虚拟 X 窗口，Selenium 可以在其中启动浏览器以运行您的测试 (Xvfb)。在 Jenkins 中，服务器应该像“*firefox”一样输入。

[http://alex.nederlof.com/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/](http://alex.nederlof.com/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T06:55:28.577

```
java.lang.RuntimeException: Browser not supported: *firefox/usr/bin/firefox 
```

语法错误。尝试 *firefox 或 *firefox [插入目录]

# php - php - 日期格式 ISO 8601

> ID：16168527
> 
> 赞同：2
> 
> 时间：2013-04-23T11:45:26.977
> 
> 标签：php, date, time

我遇到过这种日期格式：

```
2013-03-12T09:16:12.1550656+01:00 
```

根据我在网上找到的内容，这是 ISO 8601（我正确吗？）。

如何使用 php 转换这种日期格式？

我可以使用 date('c') 轻松生成它，但我需要转换这种类型的日期：

```
20130422122037 - (YYYYMMDDHHMMSS) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:50:17.927

尝试这个：

```
$date = new DateTime('20130422122037');

var_dump($date->format('c')); 
```

# xml - 如何将数据附加到 sql server 2008 中的现有 xml 值

> ID：16168528
> 
> 赞同：0
> 
> 时间：2013-04-23T11:45:32.707
> 
> 标签：xml, sql-server-2008

我有一张桌子叫学生。

`Table Student( Name varchar() ,subject xml)`

我的数据数据库中有一些值。现在我需要附加 xml 数据。

```
<subject code="Maths">
  <subjectname name="test">test123</subjectname>
</subject> 
```

我想为现有的 xml 添加一个新值。

```
<subjectname name="newtest">newtest123</subjectname> 
```

这将是样本值。任何人都有任何想法或方法来解决任何解决问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:57:16.657

`update Student set subject.modify('insert <subjectname name="newtest">newtest123</subjectname> as last into /Maths[1]') where name='YourName';`

污垢

# c++ - 创建 OS C++ 特定 API

> ID：16168529
> 
> 赞同：2
> 
> 时间：2013-04-23T11:45:34.133
> 
> 标签：c++, header, multiplatform

我需要创建一些 API，通过调用一个函数，将调用当前操作系统的正确函数。

所以我同意了：

主.cpp：

```
#include "api.h"
int main() {
    helloWorld();
    return 0;
} 
```

api.h：

```
void helloWorld(); 
```

api.cpp：

```
void helloWorld() {
    #ifdef __gnu_linux__    
        printf("Hello World of Linux");
    #endif
    #ifdef WIN32
        printf("Hello World of Windows");
    #endif
} 
```

但这并不能满足我。当我将拥有大功能时，例如在 Linux 下获取进程的所有子进程以及许多其他功能时，我将遇到空间问题，以及维护代码的可见性问题。

我尝试根据底层操作系统包含不同的标头，但这效果不佳，我不能有两个标头（一个用于 Windows，一个用于 Linux）和只有一个 C++ 文件。

那么，您知道如何将 Linux 和 Windows 的代码分开，这样我就得到了两个文件（一个仅适用于 Linux，一个仅适用于 Windows）和一个带有`#ifdef`条件的头文件？我无法让它工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:10:04.703

我是通过以下方式做到的：

main.cpp 和 api.h 没有受到任何修改。

api.cpp：

```
#ifdef linux
    #include "linux_api.h"
#endif
#ifdef WIN32
    #include "windows_api.h"
#endif

void helloWorld() {
    #ifdef linux
        helloWorld_linux();
    #endif
    #ifdef WIN32
        helloWorld_win32();
    #endif
} 
```

然后你需要提供`linux_api.h`,`linux_api.cpp`和`windows_api.h`, `windows_api.cpp`。优点是这四个文件已经是特定于平台的。您只需`api.cpp`为每个功能创建“胶水代码”。

linux_api.h：

```
void helloWorld_linux(); 
```

linux_api.cpp：

```
#include "linux_api.h"

#include <cstdio>

void helloWorld_linux()
{
    std::printf( "Hello world from linux..." );
} 
```

希望这可以帮助。

# php - 设置一个基本的 Yii 应用程序

> ID：16168534
> 
> 赞同：0
> 
> 时间：2013-04-23T11:45:50.237
> 
> 标签：php, yii

我是 Yii 框架的新手，我在他们的网站上，我试图让我的第一个应用程序正常工作。

从这个链接[http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)他们要求我输入`% YiiRoot/framework/yiic webapp WebRoot/testdrive`命令提示符

Yii root 在这个目录下：`E:\Documents\Webdesign\htdocs\yii\`

当我输入这个

```
 % E:\Documents\Webdesign\htdocs\yii\framework/yiic webapp     
  E:\Documents\Webdesign\htdocs/testdrive 
```

进入我得到的cmd

> '%' 不是内部或外部命令、可运行程序或批处理文件。

可能是什么问题呢？任何机构都可以帮助我完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:49:13.510

`cd E:\Documents\Webdesign\htdocs\yii\framework`使用命令转到此文件夹

在此类型`yiic webapp testdrive`命令之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:56:47.830

在此上下文中，此语句的含义如下：

`% YiiRoot/framework/yiic webapp WebRoot/testdrive`

*   `% YiiRoot/framework/yiic`- 切换到保存 yii 库的目录。在这种情况下，您将打开终端并输入：`cd E:\Documents\Webdesign\htdocs\yii\`。省略`%`标志。

*   `webapp`- 是 yiic 识别的实际命令。它允许您生成应用程序。这意味着在更改目录后，您将他们键入`webapp`. 在输入路径之前不要按 Enter。所以最后，这部分命令将如下所示：`webapp /path/to/where/you/want/to/create/the/application`

*   `WebRoot/testdrive`- 最后，这指的是您希望创建应用程序的目录。

我希望这有帮助 ：-）

# angularjs - 文本框堆栈Angularjs

> ID：16168537
> 
> 赞同：1
> 
> 时间：2013-04-23T11:45:56.033
> 
> 标签：angularjs, stack, textarea

我正在尝试在“AngularJs”中从其他文本框做一个文本区域女巫堆栈数据。有谁知道如何做到这一点？这将类似于我们在 StackOverflow 上添加标签的文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:59:12.650

**已编辑**

请参阅此处的工作示例：http: [//plnkr.co/edit/XQkuJIOREuHiV4EuZ2wX ?p=preview](http://plnkr.co/edit/XQkuJIOREuHiV4EuZ2wX?p=preview)

标签？看看 Select2：http: [//ivaynberg.github.io/select2/#tags](http://ivaynberg.github.io/select2/#tags)

# python - 局部变量赋值错误，为什么？

> ID：16168539
> 
> 赞同：-1
> 
> 时间：2013-04-23T11:45:58.600
> 
> 标签：python

我收到以下错误：

`UnboundLocalError: local variable 'current_uarfcn' referenced before assignment`

但是我不知道为什么，我以与该变量相同的方式声明它`ran_update_uarfcn`并且该变量工作正常。有任何想法吗？

```
current_uarfcn = ""
ran_update_uarfcn = ""

def ran_network_listen(access_point_id, mode):
  def set_current_uarfcn(value):
      global current_uarfcn
      global ran_update_uarfcn
      current_uarfcn = value
      ran_update_uarfcn = "upd ap" + " " + access_point_id + " " + "uarfcn=" + current_uarfcn 
  set_current_uarfcn("11000")
  print ran_update_uarfcn
  print current_uarfcn
  return 
```

编辑：堆栈跟踪

```
Traceback (most recent call last):
  File "/a/b.py", line 460, in <module>
    ran_network_listen(ap_id, mode)
  File "/a/b.py", line 97, in ran_network_listen
    print current_uarfcn
UnboundLocalError: local variable 'current_uarfcn' referenced before assignment 
```

像这样调用：

```
 # Network Listen
    if args.ap_id:
      ap_id = args.ap_id[0]
      mode = None
      if len(args.ap_id) == 2:
          mode =  args.ap_id[1]
      ran_network_listen(ap_id, mode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:20:03.220

**显示**的代码工作正常。

我能想到的唯一问题是您在某些行上使用制表符并在其他行上使用空格，因此赋值语句确实是外部函数的一部分。

使用 python，你永远不应该在你的代码中使用标签（我们有一个实际强制执行的预提交规则）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:50:03.830

您必须在第一个函数中定义 ran_network_listen

```
current_uarfcn = ""
ran_update_uarfcn = ""

def ran_network_listen(access_point_id, mode):
    global current_uarfcn
    global ran_update_uarfcn
    def set_current_uarfcn(value):
        current_uarfcn = value
        ran_update_uarfcn = "upd ap" + " " + access_point_id + " " + "uarfcn=" + current_uarfcn 
    set_current_uarfcn("11000")
    print ran_update_uarfcn
    print current_uarfcn
    return 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:11:25.087

您是否尝试在 ran_network_listen 方法中声明全局？您仅在 set_current_uarfcn 的上下文中声明了它。

# android - android推送通知打开浏览器

> ID：16168549
> 
> 赞同：0
> 
> 时间：2013-04-23T11:46:38.467
> 
> 标签：android, push-notification

我正在按照下面的 Google 推送通知教程进行操作。本教程使用 WAMP，但我已经让它与 SQL Server 一起使用。一切正常。我可以从服务器上的 php 文件生成一条消息，并将消息传递到注册的手机。

我遇到的问题是消息是应用程序升级 url 的 apk 的 URL。当手机收到消息时，消息在通知中，点击后消失。我想要发生的是当用户点击通知时，手机浏览器被打开。这将开始下载新应用程序。

如果消息是url，我怎样才能让android打开浏览器？

提前致谢，

马特

教程。

[教程。](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

```
/**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, PushTestActivity.class);

        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);     

    } 
```

.

```
 /**
     * Receiving push messages
     * */
    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

            if(newMessage != null){
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(newMessage));
            startActivity(browserIntent);
            }else{
                Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            }

            // Showing received message
            //lblMessage.append(newMessage + "\n");
            //Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }

    }; 
```

[编辑] 这是接收推送时执行的代码。它在 PushTestActivity 类中

```
04-23 13:12:52.630: E/AndroidRuntime(16231): FATAL EXCEPTION: main
04-23 13:12:52.630: E/AndroidRuntime(16231): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.carefreegroup.pushtest.DISPLAY_MESSAGE flg=0x10 (has extras) } in com.carefreegroup.pushtest.PushTestActivity$1@412b29b0
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:846)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.os.Handler.handleCallback(Handler.java:615)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.os.Looper.loop(Looper.java:155)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.ActivityThread.main(ActivityThread.java:5485)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at java.lang.reflect.Method.invoke(Method.java:511)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at dalvik.system.NativeStart.main(Native Method)
04-23 13:12:52.630: E/AndroidRuntime(16231): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=null }
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1671)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1542)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Activity.startActivityForResult(Activity.java:3409)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Activity.startActivityForResult(Activity.java:3370)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Activity.startActivity(Activity.java:3580)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.Activity.startActivity(Activity.java:3548)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at com.carefreegroup.pushtest.PushTestActivity$1.onReceive(PushTestActivity.java:142)
04-23 13:12:52.630: E/AndroidRuntime(16231):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:832) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:00:32.853

尝试这样的事情，当您单击通知时，获取 url 并开始并打算使用 Intent.ACTION_VIEW 而不是活动：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(yourUrlInString));
startActivity(browserIntent); 
```

# php - 如何将 mysqli_fetch_assoc 结果转换为 json 格式？

> ID：16168552
> 
> 赞同：1
> 
> 时间：2013-04-23T11:46:54.663
> 
> 标签：php, json

我正在尝试将我的查询结果转换为 json 格式，以便我可以在另一个文件中使用 jquery 获取它。我没有收到任何错误，但它不被识别为 json。

```
 $patientquery = mysqli_query($connect, "SELECT * FROM login WHERE assignedTo='$logID'");

    $numrows = mysqli_num_rows($patientquery);

    if($numrows > 0)
    {
        while($rows = mysqli_fetch_assoc($patientquery))
        {
            $dbloginID = $rows['loginID'];
            $dbname = $rows['name'];

            $result[] = array('patient'=>array('id' => $dbloginID, 'name' => $dbname));

        }
    }
    else
    {
        $result[] = 'No Patients yet';
    }

echo json_encode($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:54:10.490

请试试这个：

```
$patientquery = mysqli_query($connect, "SELECT * FROM login WHERE assignedTo='$logID'");

$numrows = mysqli_num_rows($patientquery);

$result = array();

if($numrows > 0)
{
    while($rows = mysqli_fetch_assoc($patientquery))
    {
        $dbloginID = $rows['loginID'];
        $dbname = $rows['name'];

        $result['patient'][] = array('id' => $dbloginID, 'name' => $dbname);
    }
}
else
{
    $result[] = 'No Patients yet';
}

echo json_encode($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:48:57.523

您应该像这样在 while 循环之外声明 $result

```
$result = array(); 
```

# android - 创建自定义通知，android

> ID：16168553
> 
> 赞同：21
> 
> 时间：2013-04-23T11:46:57.147
> 
> 标签：android, notifications

我想创建一个类似于此图像中红色边框通知的通知：

![在此处输入图像描述](https://i.stack.imgur.com/twgOc.png)

我知道如何创建普通通知，例如此图像中的蓝色边框通知，但我想在其附近显示一个图标和大约 3 行信息。我怎样才能做到这一点？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-23T11:54:57.570

添加`RemoteViews`通知。这是一个示例：

![在此处输入图像描述](https://i.stack.imgur.com/BIwc4.png)

```
var remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
var mBuilder = new NotificationCompat.Builder(this)
    .setSmallIcon(R.drawable.ic_launcher)
    .setContent(remoteViews);

// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, test.class);

// The stack builder object will contain an artificial back stack for
// the started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(test.class);

// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);

PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
remoteViews.setOnClickPendingIntent(R.id.button1, resultPendingIntent);

var notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

// mId allows you to update the notification later on.
notificationManager.notify(100, mBuilder.build()); 
```

**小部件.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="DJ notification"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Close Me" />
</LinearLayout> 
```

检查这篇[文章](http://dj-android.blogspot.in/2013/04/android-notifications-3-applying-big.html)有更多的风格avaialbe

[安卓开发者](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

## 编辑：

**NotificationCompat.Builder 是在所有 Android 版本上创建通知的最简单方法。您甚至可以使用 Android 4.1 提供的功能。如果您的应用在 Android >=4.1 的设备上运行，则将使用新功能，如果在 Android <4.1 上运行，则通知将是一个简单的旧通知。**

对于 < 11 API 使用[http://www.framentos.com/en/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/](http://www.framentos.com/en/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T11:50:11.177

[从 Android 4.1 开始可以使用扩展通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#ApplyStyle)来处理这些场景。如果您使用`Notification.Builder`or ，您将为扩展通知`NotificationCompat.Builder`设置一个普通`Builder`和一个单独的，使用or 其他样式之一，并将两者连接起来。`Builder``NotificationCompat.InboxStyle`

# javascript - 如何在两个单独的类中叠加两个图像？

> ID：16168556
> 
> 赞同：0
> 
> 时间：2013-04-23T11:47:23.493
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-autocomplete

我有两门课：一：

```
 .ui-combobox-customclose {
      background: url('js/autocomplete/css/ui-lightness/images/close-button.gif') no-repeat right center;
      z-index: 105;
  } 
```

另一个类（证明背景）与输入框相关联。如何`ui-combobox-customclose`在该输入框的右侧覆盖此图像（）。

我在运行时添加这个类。但这并没有显示图像。

如果我指定高度和宽度，然后`.insertAfter`指定输入。然后图像来了。但这正在破坏整个组织。

我想将该图像合并到输入框本身。这就是为什么我需要在两个不同的 css 类中覆盖两个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:08:29.057

您可以定位一个类并添加两个背景，使顶部的一个成为半透明 png。

```
.backgroundMerge {
  background: url(one.jpg), url(two.jpg) no-repeat center;
} 
```

否则，您将需要使用画布标签，并可能将组合图像导出到 data-uri 字符串并获取并附加它。

编辑：您可以通过如下方式获取和存储背景，然后将其与另一个背景一起添加

```
var backgroundOne = $(".ui-combobox- customclose").css('background-image');     
$('element').css({ 'background' : backgroundOne + ', url(someotherimage) no-repeat'}); 
```

# c# - 有什么方法可以使用 Visual C# 创建带有头文件的 DLL？

> ID：16168563
> 
> 赞同：-4
> 
> 时间：2013-04-23T11:47:42.837
> 
> 标签：c#

我正在使用

1.  视觉 C#
2.  安捷伦 VEE

我正在尝试将从 C# 创建的 DLL 文件导入 Agilent VEE，但 VEE 需要头文件和库文件进行导入。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:58:51.370

您不能在 C++ 项目中使用 ac# dll，反之亦然（通常）。您应该在 C# 中创建一个 com 感知 dll 以在 C++ 中使用它，或者另一方面，您需要在 C# 中声明所有函数以从 c++ dll 中使用。

这里我说的是标准 dll（不是 activex 或 com all）。他们需要不同的方法来使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:49:12.553

在 C# 中，没有头文件，这与 C++ 不同！要使用旧的 C/C++ 代码，请使用[PInvoke](http://www.pinvoke.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T14:22:14.557

也许您可以避免 VEE 中的“导入库”原语，并且不需要头文件。

使用 Device --> .NET Assembly References... 并浏览到您的 DLL 文件。然后你必须导入或选择一个命名空间。最后，DLL的函数出现在VEE的函数浏览器中。

并非所有 DLL 文件都可以使用。我有两个来自硬件供应商的类似产品。名为 somename_net.dll 的工作。

如果您找到原始问题的答案，我想知道。我的方法

# c - 将字节指针分配给 C 中的结构

> ID：16168564
> 
> 赞同：2
> 
> 时间：2013-04-23T11:47:43.597
> 
> 标签：c, pointers, reference, variable-assignment, dereference

这让我很烦，但我想避免只使用 memcpy 的明显解决方案。

```
struct Person
{
    //Some variables
};

void doSomething(char* pointerToSomeone)
{
    struct Person bob;

    //Assign pointerToSomeone to bob, somehow...
} 
```

在上面，pointerToSomeone 是一个指向 Person 结构的指针。我如何将它分配给鲍勃？肯定有可能吗？

我已经尝试了许多我认为是明智的演员表、尊重等但没有成功（编译器错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:50:33.223

您不能分配指向 a 的指针`char`，`struct`但可以将指向的内容复制`char*`到 a`struct`中，如下所示：

```
memcpy(&bob, pointerToSomeone, sizeof(struct Person)); 
```

在`pointerToSomeone`无类型的情况下，更常见的是使用`void*`而不是`char*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:49:36.177

你不能。但是，如果您**确定**这`pointerToSomeone`确实是指向 a 的指针，`Person`那么您可以创建`bob`一个指针并使用类型转换：

```
struct Person *bob = (struct Person *) pointerToSomeone; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:03:35.060

你可以简单地这样做（假设它是一个有效的演员表）：

```
struct Person bob = *((struct Person*) pointerToSomeone); 
```

请注意，您正在复制指针的堆栈，而不是像这样引用它：

```
struct Person* bob = (struct Person*) pointerToSomeone; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:51:04.150

您只需将指向的结构复制`pointerToSomeone`到`bob`with `memcpy`，只需确保 pointerToSomeone 确实是指向结构 Person 的指针

```
void doSomething(char* pointerToSomeone)
{
    struct Person bob;

    memcpy( &bob , pointerToSomeone , sizeof( struct Person ) ) ;

} 
```

# sql - 必须声明标量变量

> ID：16168565
> 
> 赞同：4
> 
> 时间：2013-04-23T11:47:46.103
> 
> 标签：sql, sql-server-2008

首先，我创建了一个包含一列的内存表，并使用这些列值与另一个表进行了内部连接。这样做时，我收到此错误：

> 必须声明标量变量**@Temporary**。

谁能解释我哪里出错了？

```
DECLARE @ID INT
Declare @Temporary Table
(
AccountID INT
)  

DECLARE cur CURSOR FOR

SELECT DISTINCT ParentItem from ItemBillOfMaterial

OPEN cur

FETCH NEXT FROM cur INTO @ID;

WHILE @@FETCH_STATUS = 0

BEGIN 

Insert into @Temporary Values(@ID)  

FETCH NEXT FROM cur INTO @ID;

END

SELECT UOM FROM Item

INNER JOIN @Temporary

ON Item.ItemID=@Temporary.AccountID

CLOSE cur;

DEALLOCATE cur; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T11:54:05.107

在连接条件中引用表时必须使用别名

```
SELECT UOM FROM Item
INNER JOIN @Temporary t
ON Item.ItemID=t.AccountID 
```

虽然这可以解决您遇到的问题，但您不需要临时表或游标。这个查询可以重写为：

```
SELECT UOM 
FROM Item
WHERE ItemID IN (SELECT DISTINCT ParentItem FROM ItemBillOfMaterial) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:59:15.400

不确定您是否需要游标或临时表，我认为这在一个查询中大致相同

```
SELECT UOM FROM Item
INNER JOIN (
  SELECT DISTINCT ParentItem AccountID 
  from ItemBillOfMaterial
) Temporary
ON Item.ItemID=Temporary.AccountID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:02:11.593

虽然答案可能很好，但这样做不是更好吗：
`SELECT UOM FROM Item WHERE UOM.ItemID IN (SELECT DISTINCT ParentItem FROM ItemBillOfMaterial)`
而不是光标获取？Fetch 非常慢，根据您在作业上方添加的代码，似乎并不太复杂。
抱歉，如果我在这里错了，您只是简化了任务以专注于您面临的问题。

# html - 如何使用纯 CSS 在项目旁边放置图形标记？

> ID：16168569
> 
> 赞同：1
> 
> 时间：2013-04-23T11:48:00.307
> 
> 标签：html, css

我有一个简单的菜单：

```
<ul id="menu">
    <li>A</li>
    <li class="current">B</li>
    <li>C</li>
</ul> 
```

我想`<--`在当前项目旁边放置一个大图形标记 ( )：

```
* A
* B <--
* C 
```

我怎样才能只使用 CSS 来做到这一点，而不改变标记？我通常的技巧是将图像设置为项目的背景，但此图像非常大，因此它会被项目的边界框裁剪。我强调标记不是字符串，而是图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:51:48.707

你可以这样做：

```
li.current:after {
   content: "<--";
   display: inline-block;
} 
```

也许给一些左边距，例如：http: [//jsbin.com/aluziv/1/](http://jsbin.com/aluziv/1/)

如果元素本身是图像，只需将其加载为`background-image`

```
li.current:after {
   content: "";
   background: url(...) top left no-repeat;
   width: ...px;
   height: ...px;
   display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:51:46.930

使用 CSS`:before`或 :`after`选择器。例如：

```
.current:after {
    content:'<--';
} 
```

jsFiddle 示例：http: [//jsfiddle.net/hr3Rv/](http://jsfiddle.net/hr3Rv/)

您可以根据需要向块中添加其他样式`:after`（您可以使用它执行的操作有一点限制，但对于您的要求，它是完全正确的）。

如果标记是图像，您可以像这样引用它：

```
.current:after {
    content:url('image.png');
} 
```

另一种选择是使用图像字体（例如，[FontAwesome](http://fortawesome.github.io/Font-Awesome/)字体）。在 CSS 的其他地方包含字体，并从字体中引用适当的字符：

```
.current:after {
    font-family: FontAwesome;
    content: "\f100"; //font-awesome's left double-arrow icon
} 
```

（有关更多说明，请参阅 FontAwesome 网站）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:52:47.293

试试 CSS`:after`选择器。以下将[产生您的结果](http://jsfiddle.net/Z2UXu/1/)（在当前元素后写“<--”）：

```
li.current:after {
    content: "<--";
} 
```

您还可以插入图像：

```
li.current:after {
    content: url('arrow.png');
} 
```

# dotnetnuke - 如何在 dotnetnuke 中向 filepickeruploader 控件添加新项目？

> ID：16168572
> 
> 赞同：0
> 
> 时间：2013-04-23T11:48:03.433
> 
> 标签：dotnetnuke, dotnetnuke-module, filepicker

我想在文件选择器中添加一个新项目，但我不知道该怎么做。
我总是看到一个目录 portal\0\ 如何在 filepickeruploader 中更改或添加路径？

```
<dnn:filepicker id="filepicker1" runat="server"></dnn:filepicker>
DnnFilePickerUploader filepicker = (DotNetNuke.Web.UI.WebControls.DnnFilePickerUploader)Panel1.FindControl("filepicker1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:55:16.333

您可以使用 FilePath 属性更改路径。

例如，如果您想将默认文件夹设置为“Images/”，请尝试以下操作：

```
<dnn:FilePicker id="filepicker1" runat="server" FilePath="Images/"></dnn:FilePicker> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T19:56:42.080

使用 DotNetNuke.Services.FileSystem 命名空间。添加一个新文件夹将是：

```
FolderManager.Instance.AddFolder(PortalId, myPath); 
```

# php - 为什么我们不能对在 cakephp2.x 中创建和修改的字段使用 TIMESTAMP 数据类型？

> ID：16168573
> 
> 赞同：4
> 
> 时间：2013-04-23T11:48:04.297
> 
> 标签：php, cakephp, phpmyadmin

我们知道 MYSQL 日期时间数据类型占用比 TIMESTAMP 更多的内存。为了快速开发，我使用 cakephp2.x。**我担心的是为什么我们不使用 TIMESTAMP 来创建和修改数据库中的字段。？**我阅读了 cakephp2.x 文档，他们没有在技术术语中明确提及原因。期待专家的好回答！

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:52:25.900

主要区别在于 DATETIME 是常量，而 TIMESTAMP 受 time_zone 设置的影响。

此外，如果您没有数十亿行（4 字节对 8 字节，但实际上仍然没有），则两者所需的空间可以看作几乎相同。日期时间字段也可用于轻松比较和计算。

我的建议：所以只要坚持日期时间，不要在真正没有问题的情况下制造问题。在开始开发应用程序时，手头通常会遇到更多令人不安的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T13:03:28.057

对我来说，它多次证明自己应该避免使用 CakePHP 的创建和更新的自动字段，或者最多用于取证簿记（即你不应该在你的应用程序中使用它的值）。

它不灵活，缺乏像国际化这样的定制，可以更高效地工作。

每当我需要存储时间时，我都会在 INT 字段中作为 Unix 时间戳记。这也适用于多个时区和不同的环境（例如 DB 中的 TZ 与 PHP）。

# c - 如何修复关于 Mandelbrot 集的 Pthreads 代码？

> ID：16168575
> 
> 赞同：0
> 
> 时间：2013-04-23T11:48:11.690
> 
> 标签：c, image, pthreads, set, mandelbrot

我有以下关于计算和创建 Mandelbrot 集的图片的 Pthreads 代码。我的 C 代码工作得很好，它很好地打印了结果图片。关键是使用下面的代码，我能够编译代码并执行它。之后，如果我尝试在 Gimp 中查看生成的 .ppm 文件，它根本无法打开它。我想我在代码中做错了什么。如果有人可以帮助我，我会很高兴。

```
// mandpthread.c
// to compile: gcc mandpthread.c -o mandpthread -lm -lrt -lpthread
// usage: ./mandpthread <no_of_iterations> <no_of_threads> > output.ppm

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>
#include <assert.h>
#include <pthread.h>

typedef struct {
    int r, g, b;
} rgb;

int NITERATIONS, NTHREADS;
rgb **m;

void color(rgb **m, int x, int y, int red, int green, int blue)
{
    m[y][x].r = red;
    m[y][x].g = green;
    m[y][x].b = blue;
}

void mandelbrot(int tid)
{
    int w = 600, h = 400, x, y; 
    // each iteration, it calculates: newz = oldz*oldz + p, 
    // where p is the current pixel, and oldz stars at the origin
    double pr, pi;                   // real and imaginary part of the pixel p
    double newRe, newIm, oldRe, oldIm;   // real and imaginary parts of new and old z
    double zoom = 1, moveX = -0.5, moveY = 0; // you can change these to zoom and change position

    int start = tid * NITERATIONS/NTHREADS;
    int end = (tid+1) * (NITERATIONS/NTHREADS) - 1;

    //loop through every pixel
    for(y = 0; y < h; y++) {
        for(x = 0; x < w; x++) {
            // calculate the initial real and imaginary part of z, 
            // based on the pixel location and zoom and position values
            pr = 1.5 * (x - w / 2) / (0.5 * zoom * w) + moveX;
                pi = (y - h / 2) / (0.5 * zoom * h) + moveY;
                newRe = newIm = oldRe = oldIm = 0; //these should start at 0,0
                // i will represent the number of iterations
                int i;
                // start the iteration process
                for(i = start; i <= end; i++) {
                        // remember value of previous iteration
                        oldRe = newRe;
                        oldIm = newIm;
                        // the actual iteration, the real and imaginary part are calculated
                        newRe = oldRe * oldRe - oldIm * oldIm + pr;
                        newIm = 2 * oldRe * oldIm + pi;
                        // if the point is outside the circle with radius 2: stop
                        if((newRe * newRe + newIm * newIm) > 4) break;
                }

                if(i == NITERATIONS)
                color(m, x, y, 0, 0, 0); // black
            else
            {
                // normalized iteration count method for proper coloring
                double z = sqrt(newRe * newRe + newIm * newIm);
                int brightness = 256\. * log2(1.75 + i - log2(log2(z))) / log2((double)NITERATIONS);
                color(m, x, y, brightness, brightness, 255);
            }

            }
    }

}

// worker function which will be passed to pthread_create function
void *worker(void *arg)
{
    int tid = (int)arg;
    mandelbrot(tid);
}

int main(int argc, char *argv[])
{
    pthread_t* threads;
    int i, j, rc;

    if(argc != 3)
    {
        printf("Usage: %s <no_of_iterations> <no_of_threads> > output.ppm\n", argv[0]);
        exit(1);
    }

    NITERATIONS = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));

    m = malloc(400 * sizeof(rgb *));
    for(i = 0; i < 400; i++)
        m[i] = malloc(600 * sizeof(rgb));

    // declaring the needed variables for calculating the running time
    struct timespec begin, end;
    double time_spent;

    // starting the run time
    clock_gettime(CLOCK_MONOTONIC, &begin);

    printf("P6\n# AUTHOR: ET\n");
    printf("%d %d\n255\n",600,400);

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0); // checking whether thread creating was successfull
    }

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0); // checking whether thread join was successfull
    }

    // printing to file
    for(i = 0; i < 400; i++) {
        for(j = 0; j < 600; j++) {
            fputc((char)m[i][j].r, stdout);
            fputc((char)m[i][j].g, stdout);
            fputc((char)m[i][j].b, stdout);
        }
    }

    // ending the run time
    clock_gettime(CLOCK_MONOTONIC, &end);

    // calculating time spent during the calculation and printing it
    time_spent = end.tv_sec - begin.tv_sec;
    time_spent += (end.tv_nsec - begin.tv_nsec) / 1000000000.0;
    fprintf(stderr, "Elapsed time: %.2lf seconds.\n", time_spent);

    for(i = 0; i < 400; i++)
        free(m[i]);
    free(m);

    free(threads);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:01:34.537

您的代码的最新版本对我有用，有 100 次迭代和 1 个线程。

![在此处输入图像描述](https://i.stack.imgur.com/MqNaS.png)

执行两个线程失败，因为 ppm 文件有 2 个来自每个线程的标题。

如果我删除其中一个标题，图像会加载，但颜色会关闭，并且图像中有故障。

![在此处输入图像描述](https://i.stack.imgur.com/H3Xwu.png)

# .htaccess - .htaccess 中的动态重写规则

> ID：16168578
> 
> 赞同：1
> 
> 时间：2013-04-23T11:48:30.013
> 
> 标签：.htaccess, mod-rewrite

有没有办法结合这个：

```
RewriteCond %{THE_REQUEST} (user-x/project/www)
RewriteRule ^.*$ /user-x/project/www/index.php [NC,L]

RewriteCond %{THE_REQUEST} (user-y/project/www)
RewriteRule ^.*$ /user-y/project/www/index.php [NC,L]

RewriteCond %{THE_REQUEST} (user-z/project/www)
RewriteRule ^.*$ /user-z/project/www/index.php [NC,L] 
```

对于适用于“n”个用户的“动态”规则？

我有这个想法：

```
RewriteRule ^/([a-z]+)/project/www/index.php$ /$1/project/www/index.php [NC,L] 
```

不幸的是，RewriteRule 的第一个参数在与正则表达式匹配时不包括整个路径。

有任何想法吗？

编辑：.htaccess 文件位于“www”目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:46:03.350

不知道你为什么要匹配`%{THE_REQUEST}`，这实际上是请求而不是 URI。但是你可以像这样组合：

```
RewriteCond %{THE_REQUEST} (user-x|user-y|user-z)/project/www
RewriteRule ^ /%1/project/www/index.php [L] 
```

但`%{THE_REQUEST}`变量实际上看起来像这样：

```
GET /some/path/maybe/a/user-x/project/www/and/some/more/stuff HTTP/1.1 
```

并且上述条件将符合上述要求。否则，您可以更具体地了解要匹配的 wat：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(user-x|user-y|user-z)/project/www/?($|\ )
RewriteRule ^ /%1/project/www/index.php [L] 
```

# javascript - Fancybox 无法滚动到溢出

> ID：16168581
> 
> 赞同：1
> 
> 时间：2013-04-23T11:48:36.733
> 
> 标签：javascript, jquery, fancybox

我有一个加载 AJAX 内容的 Fancybox 对话框。用户可以单击“+”在里面添加一行。随着行的增加，对话框变得比屏幕尺寸大。出现滚动条，**但对话框无法向下滚动**，它一直向上滚动。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:21:13.650

对不起各位，我的错。为了将来参考，这里是修复。

**永远不要**尝试动态更新和重新定位您的 Fancybox。

# 我试过的

```
$('#stuff').fancybox({
    ... stuff
    onUpdate: function() {
        $.fancybox.update();
        $.fancybox.reposition();
    }
}); 
```

*最终，在每次更新时，Fancybox 都应该居中并重新定位。*

**然而！**实际上，它尝试每隔几毫秒执行一次。这会导致 Chrome 的检查器在 Fancybox 处于活动状态时冻结，并且还会导致滚动失败（它会在您尝试滚动时不断尝试更新大小/位置导致失败）。

# 正确的方法

每次您希望手动更改尺寸时更新。

*   更改对话框内容时（如果是 AJAX）
*   显示内部错误或在内部添加新 div 时
*   ETC

# python - 文件更改在 OpenERP 中不起作用

> ID：16168588
> 
> 赞同：4
> 
> 时间：2013-04-23T11:48:58.230
> 
> 标签：python, css, xml, ubuntu, openerp

我是 OpenERP 新手。我已经在 Ubuntu 服务器（本地机器）中成功安装了 openerp-7.0。我在菜单下面的路径中编辑了帮助台模块中的一些文件
`Sales => Configuration = > Helpdesk => Categories`。

我在下面的路径中编辑了帮助台文件

```
opt/openerp/server/openerp/addons/crm_helpdesk/crm_helpdesk_view.xml 
```

但我的更改并未反映在上述菜单的前端。

那么我需要为前端的变化反射做些什么吗？

我需要在帮助台模块中自定义主题和其他一些功能。

任何帮助我的赞赏。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:44:54.697

正如 Arya 所说，您需要更新 crm_helpdesk 模块。加载更改。如果您的修改低于`<data noupdate="1">...</data>`然后在新数据库中检查它或将 noupdate="1" 更改为 noupdate="0"。并更新它。之后再次更改为 noupdate="1"

# asp.net - Asp.Net 将字符串从资源绑定到 ListItem

> ID：16168590
> 
> 赞同：0
> 
> 时间：2013-04-23T11:49:09.580
> 
> 标签：asp.net

我有以下代码。

```
 <asp:DropDownList ID="CurrencyList" AutoPostBack="true" runat="server" OnSelectedIndexChanged="CurrencyList_SelectedIndexChanged">
                    <asp:ListItem Text="<%$ GetGlobalResourceObject("GlobalResourceBms", "RentPage2FilterByLabel")%>" Value="-1"></asp:ListItem>
                </asp:DropDownList> 
```

此代码抛出

> 解析器错误消息：不允许使用像 '<%$ GetGlobalResourceObject("GlobalResourceBms", "RentPage2FilterByLabel")%>' 这样的文字表达式。请改用“ />”。

如何在 Asp.NET 中做这件事，我需要从资源中获取字符串并将其作为下拉菜单项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:55:24.527

尝试使用

```
<%# GetGlobalResourceObject("GlobalResourceBms","RentPage2FilterByLabel" ) %> 
```

**编辑**

您将需要以不同的方式添加项目。

使用 rowdatabound 方法填充您的 ddl。看：

```
public void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow) {
        DropDownList ddl = (DropDownList)e.Row.FindControl("CurrencyList");
        //items.

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T07:02:50.230

我“有点”迟到了吗？尽管如此，它可能会帮助其他人。<%$ %> 语法不允许编码表达式。利用：

```
<asp:ListItem Text="<%$ Resources:GlobalResourceBms, RentPage2FilterByLabel %>" Value="-1" /> 
```

# svn - svn+ssh 无休止地要求输入密码，为什么？

> ID：16168594
> 
> 赞同：0
> 
> 时间：2013-04-23T11:49:16.833
> 
> 标签：svn, ssh

我们的 svn+ssh 存储库在使用 TortoiseSVN 浏览存储库或在 cli 中合并或签出时要求输入密码 8 次。我们的配置没什么好看的，`svnserve`在`CentOS`机器上很普通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:55:08.847

好吧，它的美妙之`ssh`处在于您可以首先设置要使用的密钥而不是密码。 `svn`在某些情况下可能需要建立多个连接，我认为它通常至少在当前运行时缓存了该密码，但看起来不像。

改为考虑键：

```
remoteHost# ssh-keygen
remoteHost# scp ~/.ssh/id_rsa.pub serverHost:

serverHost# mkdir ~/.ssh
serverHost# chmod 700 ~/.ssh
serverHost# mv ~/id_rsa.pub ~/.ssh/authorized_keys 
```

然后它就再也不会要求输入密码了！

# c# - 在unity3d中通过标签查找不活动的游戏对象

> ID：16168596
> 
> 赞同：15
> 
> 时间：2013-04-23T11:49:32.477
> 
> 标签：c#, unity3d

我有一个游戏对象，我希望在特定条件下激活它。我给了它一个独特的标签，并尝试使用据`GameObject.FindObjectWithTag("Tag name").`我所知，这种方法只会在场景中找到活动的游戏对象，而不是非活动的游戏对象。

有没有一种我可以调用的方法也可以搜索非活动的游戏对象？（最好按标签搜索）。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-23T12:12:54.050

经过一些研究，似乎没有办法通过标签找到不活动的游戏对象。

但是存在访问非活动游戏对象的解决方案：

1 - 如果您之后需要重新激活它们，将不活动的游戏对象存储在一个数组中（仅适用于在运行时不活动的游戏对象）。

2 - 不要停用游戏对象，只需停用您想要停用的组件。如果您希望使对象消失，请停用渲染器。如果是特定脚本，请停用该脚本等。

此解决方案将允许您仍然通过其标签名称找到游戏对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-25T05:58:40.187

可以找到不活动的东西`gameObjects`：

```
transform.Find() or transform.FindChild()
transform.GetComponentsInChildren<Component>(true)

Resources.FindObjectsOfTypeAll<Component>() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T19:07:35.187

FindObjectsOfTypeAll 确实会找到不活动的，它也可能会找到预制件和你不想要的东西，所以你必须小心。

# java - JGroups 函数列出可用的组或集群

> ID：16168599
> 
> 赞同：0
> 
> 时间：2013-04-23T11:49:38.450
> 
> 标签：java, jgroups

我有一系列使用 JGroups 库相互通信的客户端，它们基本上创建了一个附加到集群名称的通信通道：

```
communicationChannel = new JChannel(AutoDiscovery.class.getResource("/resource/udp.xml"));
communicationChannel.connect("cluster1"); 
```

现在我希望他们首先列出要连接的可用集群，并让用户决定连接到哪个集群，而无需在上面的代码中硬连线集群的名称。显然 API 有 getName() 如果设置返回通道的逻辑名称，但没有检索设置集群的方法。

我虽然使用 org.jgroups.Message.getHeaders() 并读取标题会产生活动集群，但什么也没有。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:12:30.313

没有办法找到*当前*可用的集群，我建议维护一些额外的状态来存储（在内存中）所有集群名称及其相关配置。

您可以做的事情是开发一个自定义协议（将其插入 GMS 下方），该协议执行以下操作： - 捕获（事件 evt）：如果 evt.getType() == Event.CONNECT***（4 个事件），获取集群名称 ((String)evt.getArg()) 并将其添加到集合 - 捕获 (Event evt): 如果 evt.getType() == Event.DISCONNECT，获取当前集群名称并将其从放

这不会给你配置信息；如果你继承 JChannel 并重写 connectXXX() 和 disconnect()，你也可以得到这个。

# dependencies - 关于如何避免 Go 中的导入循环有什么好的建议吗？

> ID：16168601
> 
> 赞同：44
> 
> 时间：2013-04-23T11:49:48.570
> 
> 标签：dependencies, go, circular-dependency

我在 Go 项目上工作了一个月。好消息是 Go 确实非常高效。但是经过一个月的开发，我已经有了数千行代码和许多`packages`. 避免导入周期对我来说是一个主要问题，每当我遇到导入周期错误时，我第一次不知道问题可能出在哪里。

Go 编译器也只有非常简单的通知，总是不足以快速定位问题，例如：`main.go:7:3: import cycle not allowed`. 它只会帮助您了解哪个文件可能导致问题，但不会更深入。由于`import`随着代码的增长，关系变得越来越复杂，我很想知道如何在 Go 中更有效地避免导入循环。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-23T12:15:11.907

```
go list -f '{{join .Deps "\n"}}' <import-path> 
```

如果为空，将在`<import-path>`- 或当前目录中显示包的导入依赖项。`<import-path>`或者

```
go list -f '{{join .DepsErrors "\n"}}' <import-path> 
```

希望在您的案例中显示一些有用的信息。另请参阅的输出

```
go help list 
```

有关 go list 工具的更多信息。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-23T17:27:18.497

为了补充 jnml 的答案（这有助于“调试”循环引用问题），您可以使用[依赖反转](http://en.wikipedia.org/wiki/Dependency_inversion_principle)来打破这些循环，再加上依赖注入。对于应用程序，我总是尝试遵循[Clean Architecture](http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html)的指导方针——请参阅[此处](http://manuel.kiessling.net/2012/09/28/applying-the-clean-architecture-to-go-applications/)以获取特定于 Go 的示例——并且我发现 Go 的接口的“非声明性实现”（也就是说，您不必明确地说`type MyStruct struct implements IfceSomething`) 使这非常简单。

所以，如果你有包`A -> B -> C -> A`，你在包 C 中创建`InterfaceA`（一些相关的名称，显然，比包相关的行为更相关:) 并使其依赖于这个接口而不是包 A，并且你确保包 A“实现"这个界面。

然后你只需要在某个时候提供 A 到 C 的具体实现（这里有很多可能性，我通常在知道所有依赖项的主包中执行这个“粘合”代码）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-03-26T17:34:44.743

> 由于随着代码的增长，导入关系变得越来越复杂，我很想知道如何在 Go 中更有效地避免导入循环。

另一种选择是可视化项目中的依赖关系。这可以使用 CLI 工具[godepgraph](https://github.com/kisielk/godepgraph)来完成。您可以使用以下方式安装它：

```
go get -u github.com/kisielk/godepgraph 
```

[然后在另一个 CLI 工具graphvis](http://graphviz.org/)的帮助下使用它来查找应用程序中的导入周期。使用此工具，您可以可视化包依赖项：

```
godepgraph -s path/to/my/package | dot -Tpng -o godepgraph.png
open ./godepgraph.png 
```

在我的代码中查找循环： [![在此处输入图像描述](https://i.stack.imgur.com/xWZxI.png)](https://i.stack.imgur.com/xWZxI.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-03T20:03:54.730

除了使用 go list 工具之外，它可以确认您已经知道的依赖关系，从架构视图来看，您希望确保您的依赖关系树足够深，以便您可以通过构建子组件来找出循环。如果模块中有导入循环，那么存在的循环应该是明确的。应该有足够的模块化（树深度）来无缝移动这些依赖关系。

```
Model -> Field  (Uses A) -- Needs to import "System"
Model -> System (Defines A) -- But needs to import "Field"
----------Move type A Struct A.go to top of module----------
----------This is what the Model Dir looks like now---------
Model -> A
Model -> Field
Model -> System 
```

现在依赖已经被分离了，孩子们可以自由地使用A了。这可能无助于可视化依赖关系或成为一个很好的基于工具的解决方案，但再一次，如果你足够解耦你的逻辑并构建子组件，你应该很快收敛到循环中。否则，如果您使用的是树可视化器，我会说这是最后的手段，并且是设计不佳/子组件不足的结果。

# python - 使用 celery 和 rabbitmq 在另一台服务器上执行任务

> ID：16168603
> 
> 赞同：0
> 
> 时间：2013-04-23T11:49:51.143
> 
> 标签：python, python-3.x, rabbitmq, celery

目前我们正在开发一个 Python3 网络项目，我们必须为我们的金字塔应用程序执行一项任务。celery worker 位于另一台服务器上。我们的问题是：我们如何通过在另一台服务器上使用该工作人员来执行我们的任务并获得结果。我们必须使用 celery、rabbitMQ 和 amqp。

当工人与我们的金字塔项目位于同一台服务器时，我们已经可以执行任务。任何人都可以帮助我们或举例说明我们如何解决这个问题。因为我们真的不知道如何开始。

![http://img818.imageshack.us/img818/1051/drawing1x.jpg](https://i.stack.imgur.com/CJZZr.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:17:31.313

[Celery First Steps](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#first-steps)应该是一个很好的起点。如果您没有使用 RabbitMQ 的经验，您可能想先尝试 Redis。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:09:22.607

我找到了解决方案，我使用 send_task 方法在另一台服务器上使用任务。而且我已经阅读了第一步，这是学习 Celery 的一个很好的开始。谢谢大家的回复！！

# c# - WPF 如何显示每个图像 x 秒？

> ID：16168605
> 
> 赞同：2
> 
> 时间：2013-04-23T11:49:52.343
> 
> 标签：c#, wpf, windows, image

我正在尝试使用 mediaElement 制作幻灯片，在列表框 x 秒内显示每个图像。

如何让我的代码在继续之前播放每个图像 x 秒？

此代码将所有图像添加到名为 Listbox1 的列表框

```
 Dictionary<string, string> Listbox1Dict = new Dictionary<string, string>();

    private void SearchBtn_Click(object sender, RoutedEventArgs e)
    {
        Listbox1.Items.Clear();
        FolderBrowserDialog folderDialog = new FolderBrowserDialog();
        folderDialog.SelectedPath = "C:\\";

        DialogResult result = folderDialog.ShowDialog();
        if (result.ToString() == "OK")
            FileNameTextBox.Text = folderDialog.SelectedPath;
        string directory = FileNameTextBox.Text;
        var files = Directory.GetFiles(directory).Where(name => !name.EndsWith(".ini"));
        foreach (string file in files)
        {
            Listbox1.Items.Add(System.IO.Path.GetFileNameWithoutExtension(file));
            Listbox1Dict.Add(System.IO.Path.GetFileNameWithoutExtension(file), file);
        }
    } 
```

此代码全屏显示所有图像，但在开始时会跳过每个人到最后一张图像。

```
private void button1_Click_1(object sender, RoutedEventArgs e)
{
    foreach (var selected in Listbox1.Items)
        {
            string s = selected.ToString();
            if (Listbox1Dict.ContainsKey(s))
            {
                mediaElement1.Visibility = Visibility.Visible;
                SearchBtn.Visibility = Visibility.Hidden;
                Listbox1.Visibility = Visibility.Hidden;
                FileNameTextBox.Visibility = Visibility.Hidden;
                mediaElement1.Source = new Uri(Listbox1Dict[s]);
                mediaElement1.Width = System.Windows.SystemParameters.PrimaryScreenWidth;
                mediaElement1.Height = System.Windows.SystemParameters.PrimaryScreenHeight;
                this.Background = new SolidColorBrush(Colors.Black);
                this.WindowStyle = WindowStyle.None;
                this.WindowState = WindowState.Maximized;
            }

    }
} 
```

尝试使用此代码使图像一张一张播放，但出现错误。查看对代码的评论：

```
private int currentSongIndex = -1;

void mediaElement1next(object sender, EventArgs e)
{
    if(currentSongIndex == -1)
    {
        currentSongIndex = Listbox1.SelectedIndex;
    }
    currentSongIndex++;
    if(currentSongIndex < Listbox1.Items.Count)
    {
        mediaElement1.Play(Listbox1.Items[currentSongIndex]); // No overload for method 'Play' takes 1 arguments    
    }
    else
    {
        // last song in listbox has been played
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:54:08.987

将您的图像路径保存在列表中并使用计时器的滴答事件。就像是：

```
List<string> paths = new List<string>();

private void timer1_Tick(object sender, EventArgs e)
{
    pictureBox1.Image = getNextImage();
}

private string getNextImage()
{
    //code...
}
enter code here 
```

编辑：添加一个类变量：int index = 0; 在 SearchBtn_Click 事件中，将结果添加到列表中。

```
//..
    foreach (string file in files)
    {
        paths.Add(file);
    }
//.. 
```

然后像我上面那样做，getNextImage方法的内容是：

```
private string getNextImage()
{
    if(index < paths.Count - 1)
    {
        index += 1;
    }
    else
    {
        index = 0;
    }
    return paths[index];   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:54:57.060

我认为您需要一个计时器来设置下一个图像。使用您当前使用的代码，它将遍历您的列表并更改图像，直到您到达最后。

看看[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)。您可以将其设置为，在每次滴答时，它都会更改为下一个图像。像这样的东西（只是写下我的头）

```
dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick); 
```

然后，在您的事件处理程序中：

```
private void dispatcherTimer_Tick(object sender, EventArgs e)
{
    // get the next image
} 
```

当然，您可以使用其他类型的计时器，但这是主要思想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:10:07.277

像这样的东西：

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            if (Listbox1.Items.Count > 0)
            {
                if (dispatcherTimer.IsEnabled)
                    dispatcherTimer.Stop();
                else
                {
                    curImage = 0;
                    dispatcherTimer.Start();
                }
            }
        }

private void dispatcherTimer_Tick(object sender, EventArgs e)
{
    Dispatcher.Invoke((Action)delegate
    {
        ShowNextImage();
    }, null);            
}

private void ShowNextImage()
{
    if (curImage >= Listbox1.Items.Count)
        curImage = 0;

    var selected = Listbox1.Items[curImage];
    string s = selected.ToString();
    if (Listbox1Dict.ContainsKey(s))
    {
        mediaElement1.Visibility = Visibility.Visible;
        SearchBtn.Visibility = Visibility.Hidden;
        Listbox1.Visibility = Visibility.Hidden;
        FileNameTextBox.Visibility = Visibility.Hidden;
        mediaElement1.Source = new Uri(Listbox1Dict[s]);
        mediaElement1.Width = System.Windows.SystemParameters.PrimaryScreenWidth;
        mediaElement1.Height = System.Windows.SystemParameters.PrimaryScreenHeight;
        this.Background = new SolidColorBrush(Colors.Black);
        this.WindowStyle = WindowStyle.None;
        this.WindowState = WindowState.Maximized;
    }
} 
```

和声明

```
DispatcherTimer dispatcherTimer = new DispatcherTimer();
        int x = 2; //seconds
        private int curImage = 0; 
```

和一些构造

```
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
            dispatcherTimer.Interval = new TimeSpan(0, 0, x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:51:45.403

我的想法是实现一个计数到 X 的线程，然后在完成后调用 NextImage() 函数。

# android - custom adapter filter get wrong position id

> ID：16168607
> 
> 赞同：0
> 
> 时间：2013-04-23T11:50:01.503
> 
> 标签：android, list, checkbox, adapter

So I have a custom adapter, which I tries to implement a filter search where user key search item from edittext. And the filtering works just fine. However, in my list, I do also implement checkbox.

Let's say I have a list

```
Bar
Tar
Foo
Kay 
```

Default list would get the position correctly, so no issue here. The issue starts when I search for say a and the list will becomes.

```
Bar
Tar
Kay 
```

And if I check on Kay after search, it returns me Foo instead.

And the following is my code for my adapter and filter, what is wrong?

```
 public class MyMediaAdapter extends ArrayAdapter<Media> implements Filterable {

            private List<Media> list;
            private final Activity context;
            private Filter mediaFilter;
            private List<Media> origMediaList;

            public MyMediaAdapter(Activity context, List<Media> list) {
                super(context, R.layout.media_view, list);
                this.context = context;
                this.list = list;
                this.origMediaList = list;
            }

            public int getCount() {
                return list.size();
            }

            public Media getItem(int position) {
                return list.get(position);
            }

            public long getItemId(int position) {
                return list.get(position).hashCode();
            }

            private class ViewHolder {
                protected TextView fName, fSub, fDuration, fSize;
                protected CheckBox checkbox;
                // protected CheckBox checkbox1;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View view = null;
                // Moved here to ensure the checkbox is persistent
                ViewHolder viewHolder = new ViewHolder();
                if (convertView == null) {
                    LayoutInflater inflator = context.getLayoutInflater();
                    view = inflator.inflate(R.layout.media_view, null);
                    // Moved out of the if-else to solve the problem
                    // view being recycled each time it scrolls
                    // final ViewHolder viewHolder = new ViewHolder();
                    viewHolder.fName = (TextView) view.findViewById(R.id.tvfname);
                    viewHolder.fSub = (TextView) view.findViewById(R.id.tvsub);
                    viewHolder.fDuration = (TextView) view.findViewById(R.id.tvduration);
                    viewHolder.fSize = (TextView) view.findViewById(R.id.tvsize);
                    viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);

                    view.setTag(viewHolder);
                    // Moved out of the if-else to solve the problem
                    // view being recycled each time it scrolls
                    // viewHolder.checkbox.setTag(list.get(position));
                } else {
                    view = convertView;
                    // Moved out of the if-else to solve the problem
                    // view being recycled each time it scrolls
                    // ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
                    viewHolder = (ViewHolder) view.getTag();
                }

                // Moved here to ensure the checkbox is persistent
                viewHolder.checkbox.setId(position);
                viewHolder.checkbox.setTag(list.get(position));

                ViewHolder holder = (ViewHolder) view.getTag();
                holder.fName.setText(list.get(position).getName());
                holder.fSub.setText(list.get(position).getPath());
                // Converting duration from String to Long
                long milli = Long.valueOf(list.get(position).getDuration());
                // Put it in % min, % sec format to display
                holder.fDuration.setText(util.readableTime(milli));
                // Convert data size from String to Long
                long datasize = Long.valueOf(list.get(position).getData());
                // Put in human readable format
                holder.fSize.setText(util.readableFileSize(datasize));
                holder.checkbox.setChecked(list.get(position).isSelected());

                // viewHolder.checkbox.setId(position);
                viewHolder.checkbox.setOnClickListener(new OnClickListener() {  
                    public void onClick(View v) {  
                        // TODO Auto-generated method stub  
                        CheckBox cb = (CheckBox) v;  
                        int id = cb.getId();  
                        if (selection[id]) {  
                            cb.setChecked(false);  
                            selection[id] = false; 
                            list.get(id).setSelected(false);
                        } else {  
                            cb.setChecked(true);  
                            selection[id] = true;  
                            list.get(id).setSelected(true);
                        }  
                    }  
                });  

                // Implement SelectAll/DeselectAll feature
                final CheckBox checkbox1 = (CheckBox) findViewById(R.id.cb_selectall);

                checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton button, boolean checked) {
                        // TODO Auto-generated method stub

                        if (checked) {
                            checkbox1.setText("Click to Deselect All");

                            for (int i = 0; i < list.size(); i++) {
                                selection[i] = true;
                                list.get(i).setSelected(true);
                            }
                            // Called to notify checkbox changes so the view gets updated immediately
                            notifyDataSetChanged();

                            Toast.makeText(getApplicationContext(), "All files are selected", Toast.LENGTH_LONG).show();
                        } else {
                            checkbox1.setText("Click to Select All");

                            for (int i = 0; i < list.size(); i++) {
                                selection[i] = false;
                                list.get(i).setSelected(false);
                            }
                            notifyDataSetChanged();

                            Toast.makeText(getApplicationContext(), "All files are deselected", Toast.LENGTH_LONG).show();
                        }

                    }

                });

                return view;
            }

            public void resetData() {
                list = origMediaList;
            }

            @Override
            public Filter getFilter() {
                if (mediaFilter == null)
                    mediaFilter = new mediaFilter();

                return mediaFilter;
            }

            private class mediaFilter extends Filter {

                @Override
                protected FilterResults performFiltering(CharSequence constraint) {
                    FilterResults results = new FilterResults();
                    // We implement here the filter logic
                    if (constraint == null || constraint.length() == 0) {
                        // No filter implemented we return all the list
                        results.values = origMediaList;
                        results.count = origMediaList.size();
                    }
                    else {
                        // We perform filtering operation
                        List<Media> nMediaList = new ArrayList<Media>();

                        for (Media m : list) {
                            if (m.getName().toUpperCase().contains(constraint.toString().toUpperCase()))
                                nMediaList.add(m);
                        }

                        results.values = nMediaList;
                        results.count = nMediaList.size();

                    }
                    return results;
                }

                @SuppressWarnings("unchecked")
                @Override
                protected void publishResults(CharSequence constraint,
                        FilterResults results) {

                    // Now we have to inform the adapter about the new list filtered
                    if (results.count == 0)
                        notifyDataSetInvalidated();
                    else {
                        list = (List<Media>) results.values;
                        notifyDataSetChanged();
                    }
                }
            }
        } 
```

I have the following setup so I know which has been selected.

```
private boolean[] selection;  
private int count;

// After I fetch my list
count = getMediaList.size();
selection = new boolean[count];  

// Inside onOptionsItemSelected

@Override
    public boolean onOptionsItemSelected(MenuItem item) {

        final ArrayList<Integer> posSel = new ArrayList<Integer>();  

        posSel.clear();  
        storeSelectedMedia.clear();

        /*
         * Construct the list of selected items
         */
        boolean noSelect = false;  
        //Log.i("MediaSelection", "" + selection.length);
        for (int i = 0; i < selection.length; i++) {  
            //Log.i("MediaSelect", "" + getMediaList.get(i).isSelected());
            if (selection[i] == true) { 
                //if (getMediaList.get(i).isSelected() == true) {
                noSelect = true;  
                Log.e("Mediasel pos thu-->", "" + i);  
                posSel.add(i);  
                storeSelectedMedia.add(getMediaList.get(i).getPath());

            }  
        }

        switch (item.getItemId()) {

case R.id.action_sfd:
            if (noSelect) {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);

                final ScrollView s_view = new ScrollView(getApplicationContext());
                final TextView t_view = new TextView(getApplicationContext());

                StringBuilder sBuilder = new StringBuilder();

                sBuilder.append("\n Name: \t " + getMediaList.get(posSel.get(0)).getName());
                sBuilder.append("\n Parent: \t " + getMediaList.get(posSel.get(0)).getParent());
                sBuilder.append("\n Type: \t " + getMediaList.get(posSel.get(0)).getType());
                sBuilder.append("\n Size: \t\t " + util.readableFileSize(getMediaList.get(posSel.get(0)).getSize()));
                sBuilder.append("\n ");

                t_view.setText(sBuilder);
                t_view.setTextSize(14);     
                s_view.addView(t_view);

                builder.setTitle("File Properties")
                        .setView(s_view);

                AlertDialog dialog = builder.create();
                dialog.show();

            Toast.makeText(this,  
                    "Selected Items:" + storeSelectedMedia.toString(),  
                    Toast.LENGTH_LONG).show();  
            } else {
                Toast.makeText(this, 
                        "No files selected",  
                        Toast.LENGTH_SHORT).show(); 
            } 
            break; 
```

Hopefully that would be enough information.

Anyone has any idea on this? Appreciate it greatly!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:29:48.673

I have solved my own problem. As I was using getMediaList to get the item to display, I forgotten that I have no update my getMediaList to the "after-filtered" list.

Thus, on the publishResult method, before notifyDataSetChanged();, I basically just assign the getMediaList = list.

```
@SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {

                // Now we have to inform the adapter about the new list filtered
                if (results.count == 0)
                    notifyDataSetInvalidated();
                else {
                    list = (List<Media>) results.values;
                    // HERE
                    getMediaList = list;
                    notifyDataSetChanged();
                }
            } 
```

Checked through it for quite a long time before I realize this stupid mistake. Hope it helps someone in the future.

# java - 如何在 Java 中使用 SNMP？

> ID：16168610
> 
> 赞同：17
> 
> 时间：2013-04-23T11:50:04.060
> 
> 标签：java, snmp

我正在编写一个访问网络打印机的应用程序。作为该应用程序的一部分，我需要知道打印机的“状态”。打印机通告其状态的唯一方法是通过 SNMP。Java 本身没有任何使用 SNMP 协议的工具，所以我不知道该怎么做。如何从 Java 应用程序访问打印机的 SNMP 状态更新？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T12:32:42.487

试试这个例子。按照那里给出的说明进行操作。
[http://shivasoft.in/blog/java/snmp/create-snmp-client-in-java-using-snmp4j/](http://shivasoft.in/blog/java/snmp/create-snmp-client-in-java-using-snmp4j/)

# vba - VBA 向自己发送调试信息

> ID：16168614
> 
> 赞同：2
> 
> 时间：2013-04-23T11:50:14.980
> 
> 标签：vba, excel

我创建了一个 excel 插件，但我想找到一种方法来获取自己的调试信息。我的用户很远，在不同的操作系统和 Office 版本上运行。我尝试过发送电子邮件，但 Outlook 安全警告让我很难受，而且 CDO 邮件对象需要 smtp 详细信息，这对我的所有用户来说都是不同的。有没有像一般 smtp 设置这样的东西总是有效的？欢迎任何其他建议。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:11:20.973

网上有代码和文档可用于在 VBA 中使用 SMTP 从 Excel 发送邮件：

[Chip Pearson：使用 VBA 和协作数据对象发送电子邮件](http://www.cpearson.com/excel/Email.aspx)

该代码需要对**Microsoft CDO for Windows 2000 Library**的引用 。此文件的典型文件位置是**C:\Windows\system32\cdosys.dll**。此组件的 GUID 为 {CD000000-8B95-11D1-82DB-00C04FB1625D}，其中 Major = 1 和 Minor = 0。

```
' COPIED FROM Chip Pearson Website: http://www.cpearson.com/excel/Email.aspx
'
Function SendEMail(Subject As String, _
        FromAddress As String, _
        ToAddress As String, _
        MailBody As String, _
        SMTP_Server As String, _
        BodyFileName As String, _
        Optional Attachments As Variant = Empty) As Boolean
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' SendEmail Function
' By Chip Pearson, chip@cpearson.com www.cpearson.com 28-June-2012
'
' This function sends an email to the specified user.
' Parameters:
'   Subject:        The subject of the email.
'   FromAddress:    The sender's email address
'   ToAddress:      The recipient's email address or addresses.
'   MailBody:       The body of the email.
'   SMTP_Server:    The SMTP-Server name for outgoing mail.
'   BodyFileName:   A text file containing the body of the email.
'   Attachments     A single file name or an array of file names to
'                   attach to the message. The files must exist.
' Return Value:
'   True if successful.
'   False if failure.
'
' Subject may not be an empty string.
' FromAddress must be a valid email address.
' ToAddress must be a valid email address. To send to multiple recipients,
' use a semi-colon to separate the individual addresses. If there is a
' failure in one address, processing terminates and messages are not
' send to the rest of the recipients.
' If MailBody is vbNullString and BodyFileName is an existing text file, the content
' of the file named by BodyFileName is put into the body of the email. If
' BodyFileName does not exist, the function returns False. The content of
' the message body is created by a line-by-line import from BodyFileName.
' If MailBody is not vbNullString, then BodyFileName is ignored and the body
' is not created from the file.
' SMTP_Server must be a valid accessable SMTP server name.
' If both MailBody and BodyFileName are vbNullString, the mail message is
' sent with no body content.
' Attachments can be either a single file name as a String or an array of
' file names. If an attachment file does not exist, it is skipped but
' does not cause the procedure to terminate.
'
' If you want to send ThisWorkbook as an attachment to the message, use code
' like the following:
'    ThisWorkbook.Save
'    ThisWorkbook.ChangeFileAccess xlReadOnly
'    B = SendEmail( _
'        ... parameters ...
'        Attachments:=ThisWorkbook.FullName)
'    ThisWorkbook.ChangeFileAccess xlReadWrite
'
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' Required References:
' --------------------
'   Microsoft CDO for Windows 2000 Library
'       Typical File Location: C:\Windows\system32\cdosys.dll
'       GUID: {CD000000-8B95-11D1-82DB-00C04FB1625D}
'       Major: 1    Minor: 0
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Dim MailMessage As CDO.Message
Dim N As Long
Dim FNum As Integer
Dim S As String
Dim Body As String
Dim Recips() As String
Dim Recip As String
Dim NRecip As Long

' ensure required parameters are present and valid.
If Len(Trim(Subject)) = 0 Then
    SendEMail = False
    Exit Function
End If

If Len(Trim(FromAddress)) = 0 Then
    SendEMail = False
    Exit Function
End If

If Len(Trim(SMTP_Server)) = 0 Then
    SendEMail = False
    Exit Function
End If

' Clean up the addresses
Recip = Replace(ToAddress, Space(1), vbNullString)
If Right(Recip, 1) = ";" Then
    Recip = Left(Recip, Len(Recip) - 1)
End If
Recips = Split(Recip, ";")

For NRecip = LBound(Recips) To UBound(Recips)
    On Error Resume Next
    ' Create a CDO Message object.
    Set MailMessage = CreateObject("CDO.Message")
    If Err.Number <> 0 Then
        SendEMail = False
        Exit Function
    End If
    Err.Clear
    On Error GoTo 0
    With MailMessage
        .Subject = Subject
        .From = FromAddress
        .To = Recips(NRecip)
        If MailBody <> vbNullString Then
            .TextBody = MailBody
        Else
            If BodyFileName <> vbNullString Then
                If Dir(BodyFileName, vbNormal) <> vbNullString Then
                    ' import the text of the body from file BodyFileName
                    FNum = FreeFile
                    S = vbNullString
                    Body = vbNullString
                    Open BodyFileName For Input Access Read As #FNum
                    Do Until EOF(FNum)
                        Line Input #FNum, S
                        Body = Body & vbNewLine & S
                    Loop
                    Close #FNum
                    .TextBody = Body
                Else
                    ' BodyFileName not found.
                    SendEMail = False
                    Exit Function
                End If
            End If ' MailBody and BodyFileName are both vbNullString.
        End If

        If IsArray(Attachments) = True Then
            ' attach all the files in the array.
            For N = LBound(Attachments) To UBound(Attachments)
                ' ensure the attachment file exists and attach it.
                If Attachments(N) <> vbNullString Then
                    If Dir(Attachments(N), vbNormal) <> vbNullString Then
                        .AddAttachment Attachments(N)
                    End If
                End If
            Next N
        Else
            ' ensure the file exists and if so, attach it to the message.
            If Attachments <> vbNullString Then
                If Dir(CStr(Attachments), vbNormal) <> vbNullString Then
                    .AddAttachment Attachments
                End If
            End If
        End If
        With .Configuration.Fields
            ' set up the SMTP configuration
            .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = SMTP_Server
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
            .Update
        End With

        On Error Resume Next
        Err.Clear
        ' Send the message
        .Send
        If Err.Number = 0 Then
            SendEMail = True
        Else
            SendEMail = False
            Exit Function
        End If
    End With
Next NRecip
SendEMail = True
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:24:50.010

另一种选择是使用 MAPI？

这是来自 MS 知识库：

```
 Dim objSession As Object
   Dim objMessage As Object
   Dim objRecipient As Object

   'Create the Session Object.
   Set objSession = CreateObject("mapi.session")

   'Logon using the session object.
   'Specify a valid profile name if you want to.
   'Avoid the logon dialog box.
   objSession.Logon profileName:="MS Exchange Settings"

   'Add a new message object to the OutBox.
   Set objMessage = objSession.Outbox.Messages.Add

   'Set the properties of the message object.
   objMessage.subject = "This is a test."
   objMessage.Text = "This is the message text."

   'Add a recipient object to the objMessage.Recipients collection.
   Set objRecipient = objMessage.Recipients.Add

   'Set the properties of the recipient object.
   objRecipient.Name = "John Doe"  '<---Replace this with a valid
                                   'display name or e-mail alias
   'Type can be ActMsgTo, mapiTo, or CdoTo for different CDO versions;
   'they all have a constant value of 1.
   objRecipient.Type = mapiTo
   objRecipient.Resolve

   'Send the message.
   objMessage.Send showDialog:=False
   MsgBox "Message sent successfully!"

   'Logoff using the session object.
   objSession.Logoff 
```

# selenium - 如何使用 selenium IDE 验证类

> ID：16168617
> 
> 赞同：1
> 
> 时间：2013-04-23T11:50:20.783
> 
> 标签：selenium, selenium-ide

我希望能够验证（或断言）一个类（“盒子”）是否存在。

我可以用 Selenium IDE 做到这一点吗？

这是一个使用“box”类的html示例

```
 ...
 <div class="box documentText">
    ...
 </div>
 ... 
```

如何验证页面是否包含此类“框”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T11:54:36.743

1.  打开 Selenium IDE 到新窗口
2.  加载您要测试的页面（即通常的设置:)）
3.  **右键单击**要检查其是否存在于页面上的元素
4.  选择*显示所有可用命令*
5.  选择命令“verifyElementPresent”
6.  你完成了！;)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T03:49:49.060

1.  在FF浏览器输入URl，打开网站
2.  在 FF 浏览器中打开 Selenium IDE
3.  右键单击要检查其是否存在于页面上的元素
4.  将鼠标悬停在所有可用命令上
5.  选择命令“verifyElementPresent”或 Assertelementpresent

检查图像![这里](https://i.stack.imgur.com/3xbn0.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T05:46:45.667

1.  在FF浏览器输入URl，打开网站

2.  在 FF 浏览器中打开 Selenium IDE

3.  右键单击要检查其是否存在于页面上的元素

4.  将鼠标悬停在所有可用命令上

5.  选择命令“verifyElementPresent”或`Assertelementpresent`

6.  你完成了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:55:02.857

使用 assertElementPresent 命令，如下所示。

```
 Command: assertElementPresent
 Target: class=box 
```

# android - 在android中以编程方式删除用户数据

> ID：16168619
> 
> 赞同：0
> 
> 时间：2013-04-23T11:50:23.693
> 
> 标签：android, admin

我正在寻找一种在android中以编程方式删除用户数据的方法，我不知道android是否允许这样做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:21:28.190

一般来说，这是不可能的，原因很明显。

如果您被用户配置为[设备管理员](http://developer.android.com/guide/topics/admin/device-admin.html)，[您基本上可以使用`wipeData()`](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#wipeData%28int%29)该设备将设备恢复出厂设置。

# fabricjs - 移动后圆形mousedown不起作用

> ID：16168626
> 
> 赞同：1
> 
> 时间：2013-04-23T11:50:45.650
> 
> 标签：fabricjs

我正在用 Fabricjs 制作图像编辑器。当您单击它时，我制作了一个手柄（蓝色圆圈），它隐藏了选定的对象。

一切正常....但是： **移动对象后，我无法单击蓝色圆圈**

在移动过程中，必须隐藏控件和边框。

[我的小提琴](http://jsfiddle.net/6Pa9q/)

```
var canvas = new fabric.Canvas('c', {  hoverCursor: 'pointer', selection: false });
var blue = new fabric.Circle({ radius: 15, fill: '#00f', top: 300, left: 300 });      // Circle to hide / remove the object
var red = new fabric.Circle({ radius: 50, fill: '#f00', top: 100, left: 100 });
var white = new fabric.Circle({ radius: 50, fill: '#ccc', top: 300, left: 100 });
blue.hasControls = blue.hasBorders = false;
blue.visible = false;
blue.name = "blue";
canvas.add(white, red, blue);

var selObj;

canvas.on({
    'mouse:down' : setHanlde, 
    'mouse:up' : setHanlde, 
    'object:moving' : moving,
    'object:rotating' : updatePosition,
    'object:scaling' : updatePosition,
    'selection:cleared' : hideHandle,
});

function setHanlde(e) {
    obj = e.target;
    obj.hasControls = obj.hasBorders = true;   
    if(obj.name != "blue") {
        selObj = obj;
        obj.setCoords();
        blue.setLeft(obj.oCoords.tr.x);
        blue.setTop(obj.oCoords.tr.y);
        blue.visible = true;  
    } else {
        // hide / remove object
        selObj.visible = false;
        blue.visible = false;
        canvas.deactivateAll().renderAll();
        hideHandles();
    }
    canvas.renderAll();
}

function updatePosition() {
    selObj.setCoords();
    blue.setLeft(selObj.oCoords.tr.x);
    blue.setTop(selObj.oCoords.tr.y);   
}

function moving(e) {
     e.target.hasControls = e.target.hasBorders = false;   
     blue.visible = false;
}  

function hideHandle() {
    blue.visible = false;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:29:03.167

我已经更新了你的小提琴。
现在它应该可以工作了：
[jsfiddle](http://jsfiddle.net/6Pa9q/6/)

```
var canvas = new fabric.Canvas('c', {  hoverCursor: 'pointer', selection: false });
var blue = new fabric.Circle({ radius: 15, fill: '#00f', top: 300, left: 300 });      // Circle to hide / remove the object
var red = new fabric.Circle({ radius: 50, fill: '#f00', top: 100, left: 100 });
var white = new fabric.Circle({ radius: 50, fill: '#ccc', top: 300, left: 100 });
blue.hasControls = blue.hasBorders = false;
blue.visible = false;
blue.name = "blue";
canvas.add(white, red, blue);

var selObj;

canvas.on({
    'mouse:down' : setHanlde, 
    'mouse:up' : setHanlde, 
    'object:moving' : moving,
    'object:rotating' : updatePosition,
    'object:scaling' : updatePosition,
    'selection:cleared' : hideHandle,
    'object:modified' : updatePosition
});

function setHanlde(e) {
    obj = e.target;
    e.target.hasControls = e.target.hasBorders = true;   
    if(obj.name != "blue") {
        selObj = obj;
        obj.setCoords();
        blue.setLeft(obj.oCoords.tr.x);
        blue.setTop(obj.oCoords.tr.y);
        blue.visible = true;  
    } else {
        // hide / remove object
        selObj.visible = false;
        blue.visible = false;
        canvas.deactivateAll().renderAll();
        hideHandles();
    }
    canvas.renderAll();
}

function updatePosition() {
    selObj.setCoords();
    blue.setLeft(selObj.oCoords.tr.x);
    blue.setTop(selObj.oCoords.tr.y);
    blue.setCoords();
}

function moving(e) {
     e.target.hasControls = e.target.hasBorders = false;   
     blue.visible = false;
}  

function hideHandle() {
    blue.visible = false;    
} 
```

# android - Android - 在发送前调整大小和裁剪图片而不保存它

> ID：16168627
> 
> 赞同：1
> 
> 时间：2013-04-23T11:50:49.510
> 
> 标签：android, resize, crop

请原谅我的英语不好，我是法国人！

在我的 Android 应用程序中，我必须在将图片发送到服务器之前从图库中调整大小并裁剪图片**而不**保存它。

这是我要发送到服务器的代码：

```
 HttpURLConnection connection = null;
    DataOutputStream outputStream = null;

    String pathToOurFile = imagePath;
    String urlServer = "http://ip/serverApp/upload/transfert.php";
    Log.e("UploadImage", urlServer);
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";

    try
    {
        File file = new File(imagePath);
        FileInputStream fileInputStream = new FileInputStream(file);
        byte[] bytes = new byte[(int) file.length()];
        fileInputStream.read(bytes);
        fileInputStream.close();

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
        connection.setDoOutput(true);
        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        int bufferLength = 1024;
        for (int i = 0; i < bytes.length; i += bufferLength) {
            int progress = (int)((i / (float) bytes.length) * 100);
            publishProgress(progress);
            if (bytes.length - i >= bufferLength) {
                outputStream.write(bytes, i, bufferLength);
            } else {
                outputStream.write(bytes, i, bytes.length - i);
            }
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        outputStream.close();
        outputStream.flush();

        InputStream inputStream = connection.getInputStream();

        // read the response
        inputStream.close();

        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = connection.getResponseMessage();

        Log.w("Upload image", "Response -> Code:"+serverResponseCode+" Message:"+serverResponseMessage);

        return serverResponseCode;
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    } 
```

现在我需要编写代码来调整和裁剪图片，以获得 350px/350px 大小的图像。

你知道我该怎么做吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:43:12.583

好的 ！！！！对于正确的方法，请遵循此代码！

但是：小心，**这是一个例子**！->**你不应该在主线程中做一个互联网请求**

要执行此代码，该函数`exec();`应放入一个“doInBackground()”`asyncTask<Object, Object, Object>();`

和 **覆盖**应该进入`startActivityForResult()`活动类**`onActivityResult()`**

 **告诉我是否正确！！！！

```
private int ACTIVITY_ID_PICK_PHOTO = 42;
private int maxWidth = 350;
private int maxHeight = 350;
private String url = "http://ip/serverApp/upload/transfert.php"

//Call the activity for select photo into the gallery
private void SelectPhoto(){
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
    photoPickerIntent.setType("image/*");
    startActivityForResult(photoPickerIntent, ACTIVITY_ID_PICK_PHOTO);
}

// check the return of the result
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
//check th id of the result
    if (requestCode == ACTIVITY_ID_PICK_PHOTO)
        selectPhotoControl(data);
}

//Working data
private void selectPhotoControl(Intent data) {
//check if any photo is selected
    if (data == null)
        return;
//get the uri of the picture selected
    Uri photoUri = data.getData();
    if (photoUri != null) {
//decode the Uri
        String[] filePathColumn = { MediaStore.Images.Media.DATA };
        Cursor cursor = getContentResolver().query(photoUri,
                filePathColumn, null, null, null);
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
//get the uri of the image
        String filePath = cursor.getString(columnIndex);
        cursor.close();
//get the image in the bitmap and resize the image
        Bitmap bp = resize(filePath);
        if (bp != null)
            postImage(bp, filePath);
    }
}

public static HttpResponse postImage(Bitmap bp, String uristr) throws ClientProtocolException, IOException {
//initialization of the postrequest
        HttpPost httpPost = new HttpPost(url);
//create the multipart entitiy (if you want send another content)
        MultipartEntity entity = new MultipartEntity(
//the boundary for separate the informations
        HttpMultipartMode.BROWSER_COMPATIBLE, "------CustomBoundary", null);
        if (bp != null) {
//create the bytes array for send the image
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
//if you want to compress the image -> write the result into bos
            bp.compress(CompressFormat.JPEG, 100, bos);
//get the filename of the image
            String filename = uristr.substring(uristr.lastIndexOf("/") + 1,
                    uristr.length());
//put the picture into the body of this part
            FormBodyPart fbp = new FormBodyPart("photo", new ByteArrayBody(
                    bos.toByteArray(), "image/jpeg", filename));
//add the part to the entity
            entity.addPart(fbp);
        }
//set the entity into the request
            httpPost.setEntity(entity);
//execute the request
        return exec(httpPost);
    }

protected synchronized static HttpResponse exec(HttpRequestBase base) throws ClientProtocolException, IOException{
    if (base != null)
//Execute the request
        return mHttpClient.execute(base);
    else
        return null;
}

private Bitmap resize(String path){
// create the options
    BitmapFactory.Options opts = new BitmapFactory.Options();

//just decode the file
    opts.inJustDecodeBounds = true;
    Bitmap bp = BitmapFactory.decodeFile(path, opts);

//get the original size
    int orignalHeight = opts.outHeight;
    int orignalWidth = opts.outWidth;
//initialization of the scale
    int resizeScale = 1;
//get the good scale
    if ( orignalWidth > maxWidth || orignalHeight > maxHeight ) {
       final int heightRatio = Math.round((float) orignalHeight / (float) maxHeight);
       final int widthRatio = Math.round((float) orignalWidth / (float) maxWidth);
       resizeScale = heightRatio < widthRatio ? heightRatio : widthRatio;
    }
//put the scale instruction (1 -> scale to (1/1); 8-> scale to 1/8)
    opts.inSampleSize = resizeScale;
    opts.inJustDecodeBounds = false;
//get the futur size of the bitmap
    int bmSize = (orignalWidth / resizeScale) * (orignalHeight / resizeScale) * 4;
//check if it's possible to store into the vm java the picture
    if ( Runtime.getRuntime().freeMemory() > bmSize ) {
//decode the file
        bp = BitmapFactory.decodeFile(path, opts);
    } else
        return null;
    return bp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T21:23:35.457

这个答案[基于另一个答案][1]，但我对该代码有一些问题，所以我发布了编辑和工作的代码。

我是这样做的：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.outWidth = 50; //pixels
options.outHeight = 50; //pixels
InputStream in = context.getContentResolver().openInputStream(data.getData()); // here, you need to get your context.
Bitmap bitmap = BitmapFactory.decodeStream(in, null, options);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte[] bitmapdata = baos.toByteArray(); 
```

请注意，*数据*是您用于获取文件的 Intent 返回的数据。如果您已经有文件路径，请使用它...

现在，当您创建 HTTP 实体时，添加：

```
 FormBodyPart fbp = new FormBodyPart("image", new ByteArrayBody(baos.toByteArray(), "image/jpeg", "image"));
 entity.addPart(fbp); 
```

另外，请注意您需要一个*MultipartEntity*来上传文件。**

# c# - 将唯一值插入通用列表

> ID：16168628
> 
> 赞同：0
> 
> 时间：2013-04-23T11:50:50.697
> 
> 标签：c#

我正在使用一个与值重复的通用列表。我只想在列表中添加不同的值。下面是我正在使用的代码。任何人都可以帮助我如何避免重复进入列表

```
foreach (Questionnaire_Response questionnaireResponse in Questionnaire_Response.FindWithQuery(query))
{
    if (questionnaireResponse.Response_Descr == response)
    {
        submitOrderResponseItems.RESP_KEY = questionnaireResponse.Response_Id;
        submitOrderResponseItems.DESCR = questionnaireResponse.Response_Descr;
        submitOrderResponseItems.UPDATED_DATE = currentDate;
        submitOrderResponseItems.UPDATED_TIME = currentDateTime;
        submitOrderResponse.Add(submitOrderResponseItems);
    }                                   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T11:52:09.980

如果需要，请使用 a`HashSet<T>`代替和自定义。`IEqualityComparer<T>`

# asp.net-mvc - 在 MVC4 中未生成 Captha 图像

> ID：16168631
> 
> 赞同：1
> 
> 时间：2013-04-23T11:51:05.570
> 
> 标签：asp.net-mvc, captcha

我正在使用 MvcCaptcha。为此，我使用了这个参考 [http://sameercode.wordpress.com/2013/01/08/mvc-captcha-using-dll/](http://sameercode.wordpress.com/2013/01/08/mvc-captcha-using-dll/)

[http://captchamvc.codeplex.com/releases/view/103937](http://captchamvc.codeplex.com/releases/view/103937)

![在此处输入图像描述](https://i.stack.imgur.com/Xe2kF.png)

我遵循了所有步骤，但没有生成验证码图像。

请看附图

我是否必须添加任何配置设置..

应该出现的图像是

![在此处输入图像描述](https://i.stack.imgur.com/MuFXy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T21:55:40.130

对于这个例子，我将使用 MathCaptcha 的实现。在控制器中，您应该添加：

```
using CaptchaMvc.Attributes;
...
// At the action that process your form you have to add the [CaptchaVerify] atttribute
[HttpPost]
[CaptchaVerify("Captcha result is not valid.")] // Captcha is now able for validation
public ActionResult yourAction(FormCollection collection)
{
        if (!ModelState.IsValid)
        {
            ViewBag.Error = "The captcha answer is not correct.";
            return View("SameViewForm");
        }
        else
        {
            ...
            // Whatever you have to do when Captcha answer is correct.
            return View();
        }
} 
```

在视图中：

```
// Add
@using CaptchaMvc.HtmlHelpers
...
@using (Html.BeginForm())
{
    ...
    <label style="color: red">@ViewBag.Error</label>
    @Html.MathCaptcha()
    <input type="submit" value="Send" />
} 
```

# javascript - 当 && 之前的语句为 false 时，强制 && 之后的语句执行

> ID：16168632
> 
> 赞同：1
> 
> 时间：2013-04-23T11:51:07.543
> 
> 标签：javascript, boolean-logic

我已经使用为单个字段运行的验证函数设置表单验证，更改其格式并返回布尔值。然后验证我的表格

```
var isValid = validate(field1) && validate(field2) ... ; 
```

我希望突出显示每个无效字段，但是使用这种方法，一旦到达无效字段，验证就会停止（由于工作方式`&&`）。

显然，我可以将每个字段的 validate 作为单独的语句进行评估，然后将结果组合起来，但是有什么方法可以强制 && 在错误结果后不停止，或者以其他方式将代码保持在一条简洁的行中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:03:54.843

您可以更合乎逻辑地（和可读性）将其分解；

```
var isValid = validate(field1);
    isValid = validate(field2) && isValid;
    isValid = validate(fieldN) && isValid; 
```

您可以`&`按照 HMC 的建议使用 !! 得到一个布尔值`!!(a & b & c)`

甚至`var isValid = true == validate(field1) == validate(field2) == validate(fieldN);`

# php - PHP CentOS - Couchbase 连接失败

> ID：16168635
> 
> 赞同：1
> 
> 时间：2013-04-23T11:51:34.837
> 
> 标签：php, couchbase, centos6

我在连接到`Couchbase`服务器上的数据库时遇到问题。我安装了`Couchbase` ，它在服务器上运行良好。我可以通过控制台访问它，也可以通过本地计算机上托管的 Web 应用程序访问它，但是当我将站点部署到服务器时，出现此连接错误：

`Failed to connect libcouchbase to the server: Connection failure`

我认为问题出`libcouchbase`在服务器上的模块上。我`Ubuntu`在本地和`CentOS 6`服务器上使用，就这个问题而言，这些是使平台不同的唯一参数。

有没有人遇到过这个问题？任何解决方案/指导？

# android - Android Map (V2) Marker InfoWIndowClickListener 在启动子选项卡活动时冻结（然后崩溃）

> ID：16168639
> 
> 赞同：2
> 
> 时间：2013-04-23T11:51:42.367
> 
> 标签：android, maps

```
googleMap.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() {
    public void onInfoWindowClick(Marker marker) {
        Intent rest_list = new Intent(getParent(), RestFullDetail.class);
        TabGroupActivity parentActivity = (TabGroupActivity)getParent();
        parentActivity.startChildActivity("mapRestDetail", rest_list);
    }
}); 
```

当我点击信息窗口时，信息窗口冻结并且不会导航到另一个选项卡子活动。在冻结和崩溃时，它不会产生任何 logcat 信息。

**得到解决方案：**

> 我自己找到了解决方案。尝试在 infowindowclick 上执行异步任务，并将所有代码（在 info window click 下运行）放在 postexecute 中。它就像魅力一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-29T11:30:16.953

您需要按照以下步骤执行自定义信息窗口单击：

--> 实现**“GoogleMap.OnInfoWindowClickListener”**和**“GoogleMap.InfoWindowAdapter”**

--> 膨胀自定义信息窗口：

```
@Override
    public View getInfoContents(Marker marker) {
        // Inflate the layouts for the info window, title and snippet.
        View infoWindow = getActivity().getLayoutInflater().inflate(R.layout.custom_info_contents, null);
        TextView txtStoreName = ((TextView) infoWindow.findViewById(R.id.txtStoreName));
        txtStoreName.setText(marker.getTitle());
        TextView txtStoreAddress = ((TextView) infoWindow.findViewById(R.id.txtStoreAddress));
        txtStoreAddress.setText(marker.getSnippet());
        return infoWindow;
    } 
```

--> 设置监听器：// InfoWindowClick

```
mGoogleMap.setOnInfoWindowClickListener(this);
    @Override
        public void onInfoWindowClick(final Marker marker) {
            // TODO Here perform action on balloon view click
            mRecyclerStore.post(new Runnable() {
                @Override
                public void run() {
                    StoreModel model = (StoreModel) marker.getTag();
                    boolean isAddedToBackStack = true;
                    StoreDetailsAndProductListFragment storeDetailsAndProductListFragment = new StoreDetailsAndProductListFragment();
                    Bundle bundle = new Bundle();
                    bundle.putParcelable(ExtrasUtil.STORE, model);
                    storeDetailsAndProductListFragment.setArguments(bundle);
                    showOtherFragment(storeDetailsAndProductListFragment, getActivity().getFragmentManager(), isAddedToBackStack);
                }
            });
        } 
```

# sql-server - Redis 作为 RDBMS 的缓存

> ID：16168640
> 
> 赞同：3
> 
> 时间：2013-04-23T11:51:42.237
> 
> 标签：sql-server, caching, nosql, redis, aggregate-functions

我打算将redis用作已经存在的数据库（MS SQL）的缓存。我想使用redis中的数据放在前端。我将在一天内处理大约100GB的大量数据。我将主要有一个包含时间值和一些计数器值（大约 10-100 列）的表。如果我要基于小时、天等对这些大量数据进行聚合，redis 将如何执行……（即基于时间列。）redis 是正确的方法还是有其他选择？与 RDBMS 相比，我不知道 nosql 在处理聚合时有多好。MonogoDB 在这种情况下会怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T16:21:36.403

如果您需要存储 100Gb 并且您不希望您的数据集增长太多，请从 3 个 redis 实例开始，每个实例具有 64Gb 的 RAM，总共 192Gb，足以容纳您的数据集并有增长空间.

每个 redis 实例都将是一个主实例，因此您的数据将在实例之间平均分配。您需要使用简单的散列算法从应用程序层对实例进行分片，例如...

```
(from your application layer)
shardKey = "redis" + getShardKey( cacheKey);
redisConnection = getRedisConnectionByShardKey( shardKey);
//do work with redisConnection here 
```

该函数`getShardKey(string)`获取 cacheKey，将其转换为整数，然后根据 redis 实例的数量对其进行修改，返回 0、1 或 2。为每个 redis 实例配置一个连接池，为每个实例命名，如`redis0`,`redis1`等。 ，调用hash函数后，使用shard key获取目标redis实例的连接。获得所需数据后，在应用程序层进行聚合。

这是一种简单的方法；它在 redis 实例之间平均分配数据（或多或少），并避免将所有内容填充到单个 redis 实例中。Redis 是单线程的，所以如果你做大量的 I/O，你会受到 CPU 服务请求的速度的限制；使用多个实例会分配该负载。

当您的数据集超过 180Gb 时，此解决方案就会失效。如果您添加另一个 redis 实例以容纳更大的数据集，则必须更新哈希函数以反映模 4，而不是 3，并且您必须移动大部分数据，这很丑陋，因此仅在以下情况下使用此方法您 100% 确定数据集将保持在 150Gb 以下。

# testing - Umbraco：A/B 测试，结构中的链接

> ID：16168643
> 
> 赞同：1
> 
> 时间：2013-04-23T11:51:48.300
> 
> 标签：testing, hyperlink, umbraco, ab-testing, abtest

我在尝试对 Umbraco 的节点树中的某些节点进行 A/B 测试时遇到问题。我想要做的是将节点树中的一个节点复制到一个特定的位置，并使用该 B 结构来查看哪种结构效果最好，使用谷歌分析。

例如我们有两个节点结构，我们称它们为“Private”和“Sweden”。它们与子节点的结构和属性完全相同。它们之间的唯一区别是属性值（内容）。“私人”-URL 是 www.mysite.com/Private，“瑞典”-URL 是 www.mysite.com/Sweden。

我想做的是更改B 结构上的**每个**链接，使其指向 A 结构上的匹配项。问题在于，由于它是两种不同的结构，它将有两个不同的替代链接。

换句话说，它进入B结构应该是一个巧合，然后在下一次点击时被移回A结构。

我们使用脚本管理它应该加载的页面（A 节点或 B 节点），以便每个节点都有 50% 的机会，如果它登陆 B 节点，谷歌分析将保存数据。我们无法管理的是该页面上的每个链接都将指向 A 节点。

我会很感激我能得到的任何帮助。

问候，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:06:03.887

我不确定我是否完全理解您需要做什么，所以请原谅任何可能被证明是错误的假设。这是我的想法：

既然 A & B 节点应该共享相同的 html 内容（当然除了链接），为什么不通过在模板或宏中使用一点剃刀来使链接 href 属性动态化：

```
 @{var isANode = CurrentPage.Parent.Name == "Sweden"; }
    <a href="/@(isANode ? "Private": "Sweden")/something/somethingelse.aspx"></a> 
```

如果您使用 Web 表单，类似的方法也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:16:19.223

至少有几种方法似乎可以让你开始。

/config/urlrewriting.config 文件允许您在 umbraco 中设置多个重定向规则，因此类似以下的部分可以用于将所有请求（无论是（/sweden/pagename/ 还是 /private/pagename/）发送回私有结构.不确定GA将如何处理它：

```
rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="http://www.mysite.com/private/$1" redirect="Domain" redirectMode="Permanent" ignoreCase="true" /> 
```

其次，一个简单的 httpmodule ( [http://support.microsoft.com/kb/307996](http://support.microsoft.com/kb/307996) ) 可以处理所有页面请求并根据需要重定向 - 您可以在此处直接或间接执行 gaq_push。

我很想知道你过得怎么样——这似乎是扩展至 Umbraco 的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T08:53:38.663

我们最终做出了使用替代模板解决方案的最终决定。由于对于我的这个问题似乎没有通用的解决方案，我们不得不创建一个带有特定宏的替代模板来为我们正在使用的每个文档类型呈现不同的信息。

在项目的这个阶段，为每个页面创建动态链接是一项艰巨的工作，因为有很多页面和链接。还有一些链接是用javascript制作的，所以还有另一个问题。

我将 a 结构复制到另一个节点，只是为了能够更改属性值。不过，使用 Google Analytics 记录和跟踪信息可能会出现问题，所以这是我们在这个项目中的下一步。在我们的替代模板中，我们从 b 结构中获取属性值。

不过，如果有人有更好的解决方案，我将不胜感激！

问候，大卫

# java-me - java ME 创建你自己的层

> ID：16168645
> 
> 赞同：0
> 
> 时间：2013-04-23T11:51:53.330
> 
> 标签：java-me, sprite, layer

是否可以创建自己的图层？像：

```
public class MyLayer extends javax.microedition.lcdui.game.Layer{
(...)
} 
```

我收到错误消息：“Layer() 在 Layer 中不公开；无法从包外部访问。”

我想绘制一些 2D 图形（导入 javax.microedition.lcdui.Graphics），然后是 Sprite 游标。图形大部分是静止的，所以不需要每次都绘制它们，所以我认为 layerManager 会帮助我，但有了它，我需要它是 Sprite 或 TiledLayer。创建我自己的图层可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:31:58.763

[`Layer`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/Layer.html)不是为在`javax.microedition.lcdui.game`包外扩展而设计的。错误消息很清楚。
但是你可以扩展[`TiledLayer`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/TiledLayer.html)或[`Sprite`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/Sprite.html)。

**更新**

由于`paint`两个类的方法都是最终的（@ [bartholomew-surma](https://stackoverflow.com/users/2165777/bartholomew-surma)在评论中指出）我的上述声明无效。另一种方法是创建一个可变[`Image`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html)的调用`getGraphics`方法，在其中绘制 2D 图形，最后绘制精灵。

# c# - 如何在mvc的视图中显示表中的数据库数据

> ID：16168648
> 
> 赞同：3
> 
> 时间：2013-04-23T11:51:58.773
> 
> 标签：c#, asp.net-mvc

在我的 MVC 应用程序中，我正在从数据库中检索数据。我想在表格中显示退役数据。控制器代码：

```
 public ActionResult MyAccount()
    {

        var user = User.Identity.Name;

       string sThumbnails = "";

        DataSet dsTemplates = new DataSet();

        string qryTemplets = "select * from FileInfo where UserName= '" + user + "'";

        open_Connection();
        SqlDataAdapter daTemplate = new SqlDataAdapter(qryTemplets, conn);
        daTemplate.Fill(dsTemplates, "FileInfo");
        DataTable dtTemplates = new DataTable();
        dtTemplates = dsTemplates.Tables[0];

        foreach (DataRow row in dtTemplates.Rows)
        {

            sThumbnails = sThumbnails +  row["FileName"] +  row["Date"] +  row["Time"] +  row["Info"] ;
            ViewData["thumbs"] = sThumbnails;
        }
        close_Connection();
        return View();
    } 
```

查看代码：

```
 <div id="formleft" style="border-style: solid; border-color: inherit; border-width: 4px; width:550px; height:500px; position:absolute; top: 345px; left: 348px;">
   <h2 class="heading" style="text-align: center;">Info</h2><%= ViewData["thumbs"] %> </div> 
```

此代码显示数据但我想以表格格式显示它。

如何以表格格式显示数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:07:57.520

不要使用`ViewData`，使用使用自定义类构建的模型来存储该信息。就像是：

```
public class TableInfo
{
    public string FileName { get; set; }
    public string Date { get; set; } //you might want to change this to DateTime
    public string Time { get; set; }  //this may need changing to TimeSpan or int possibly?
    public string Info { get; set; }
} 
```

然后你可以这样做：

```
List<TableInfo> tables = dtTemplates.Rows.AsEnumerable()
    .Select(t => new TableInfo
        {
            FileName = row["FileName"],
            Date = row["Date"],
            Time = row["Time"],
            Info = row["Info"]
        })
    .ToList();

    close_Connection();
    return View(tables); 
```

然后在您看来，您可以执行以下操作：

```
@model List<TableInfo>

if (Model.Count > 0)
{
    <table>
        <tr>
            <td>File Name</td>
            <td>Date</td>
            <td>Time</td>
            <td>Info</td>
        </tr>
        @foreach (TableInfo item in Model)
        {
            <tr>
                <td>@item.FileName</td>
                <td>@item.Date</td>
                <td>@item.Time</td>
                <td>@item.Info</td>
            </tr>
        }
    </table>
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-14T11:17:30.420

在模型中的 Html 代码之前添加以下代码

```
<style> 
   table th {  border: 1px solid black; text-align:center }
   table td {  border: 1px solid black; text-align:center } 
  </style> 
```

# google-provisioning-api - 用户字段的 Google api 架构

> ID：16168656
> 
> 赞同：1
> 
> 时间：2013-04-23T11:52:17.390
> 
> 标签：google-provisioning-api

我创建了一个连接到 Google 应用程序电子邮件的软件，并允许我使用他们的信息为指定用户创建签名。在 Google 应用程序域管理中，无法编辑更多“高级”字段，如公司地址、传真、电子邮件、标题、昵称等。所以我使用了 Flash 面板，它为我提供了这种可能性。但为此，我需要将字段 api 模式添加到我的配置中，以便将 Google 字段与我的合并字段连接起来。通过在我的配置文件中添加以下内容，我设法使其适用于某些字段，例如：姓名、公司名称、电子邮件地址、所有类型的电话、职务、部门、经理、传真号码：

```
<string>name=Name.FullName</string>
<string>company=Organizations[Rel:http://schemas.google.com/g/2005#work].Name</string>
<string>mail=PrimaryEmail.Address</string>
<string>mobile=Phonenumbers[Rel:http://schemas.google.com/g/2005#mobile].Value</string>
<string>title=Organizations[Rel:http://schemas.google.com/g/2005#work].Title</string>
<string>department=Organizations[Rel:http://schemas.google.com/g/2005#work].Department</string>
<string>managerGA=ContactEntry.Relations[Rel:manager].Value</string>
<string>phone number=Phonenumbers[Rel:http://schemas.google.com/g/2005#work_fax].Value</string>
<string>emlHome=Emails[Rel:http://schemas.google.com/g/2005#home].Address</string>
or
<string>homeEml=Emails[Home:true].Address</string> 
```

“=”之前的内容只是用于连接的名称，我需要的是“=”之后的内容..

我搜索了谷歌文档，但我没有找到正确的 api 模式格式，例如：国家、城市、街道、昵称、照片、网站、URL、注释、组织单位、Aka 等。同样在 Flash 面板中，可以添加自定义字段，如果我也可以将这些字段与我的签名模板编辑器中的合并字段连接起来，那就太好了。有人可以帮我找到正确的或者我在哪里/如何找到它们吗？

另外例如，如果用户有两封家庭电子邮件，我知道如何检索第一封，但是第二封的字符串应该如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T13:58:21.460

这是我偶然发现的一个古老的未回答的问题。

该示例使用 2013 年 12 月弃用的 Profiles API。请参阅迁移指南：[https ://developers.google.com/admin-sdk/directory/v1/guides/migrate](https://developers.google.com/admin-sdk/directory/v1/guides/migrate)

截至 2016 年，API 是 Admin SDK 的用户资源。API 文档在这里：[https ://developers.google.com/admin-sdk/directory/v1/reference/users/update](https://developers.google.com/admin-sdk/directory/v1/reference/users/update)

您可以使用`User.primaryEmail`Google Apps 帐户的 ID/地址，并且可以遍历数组以`User.emails[]`获取任何其他电子邮件地址。

# objective-c - 拍照时显示图层

> ID：16168661
> 
> 赞同：1
> 
> 时间：2013-04-23T11:52:36.453
> 
> 标签：objective-c, uiimageview, uiimagepickercontroller

我想知道是否可以在拍照时在相机视图顶部显示一个图层（UIImageView？）。我知道在拍照后很容易实现图层，但我想在拍照时显示该图层。把它想象成你的照片的框架。我以前从未见过这样做过的应用程序，所以我想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:19:27.493

您要查找的术语是**叠加层**

[这是 Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Listings/OverlayViewController_m.html)。

# jquery - 是否可以在网格中显示或隐藏列（类似于 VISUAL STUDIO 中的折叠和展开选项）

> ID：16168662
> 
> 赞同：0
> 
> 时间：2013-04-23T11:52:42.427
> 
> 标签：jquery, asp.net

我有一个问题，当单击 + 或 - 时必须隐藏/显示列（+/- 将是网格中的另一列。）

```
==============================================================
 - | Column 1 | Column 2 | Column 3 | Column 4 |
============================================================== 
```

单击时应`-`显示为

```
=======
 + 
======= 
```

所有列（Column1，Column2，Column3，Column4）都将被隐藏，单击`+`它会再次展开。

注意 1\. 这些列仅在运行时是已知的。将有三种类似的列。但是隐藏或显示将像上面那样工作。

如果您遇到任何控件（现成/调整）asp.net/jquery 控件，请分享。

谢谢维诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:00:33.040

`Infragistics` `igGrid`支持这样的功能。您可以在此处查看示例：

[igGrid 列隐藏](http://www.infragistics.com/products/jquery/sample/grid/column-hiding-basic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:09:50.023

查看这个名为 DataTables.net - [www.datatables.net 的免费 jQuery 网格插件](http://www.datatables.net)

[这个](http://www.datatables.net/examples/api/show_hide.html)例子展示了如何使用 fnSetColumnVis() 函数显示隐藏列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:07:16.360

如果您需要在客户端显示/隐藏列，您可以使用 jqgrid

[jqgrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)

（在左侧菜单中：自 beta 3.0 以来的新功能/隐藏/显示列）

# linux - 错误：未定义索引：HTTP_X_FORWARDED_FOR

> ID：16168680
> 
> 赞同：0
> 
> 时间：2013-04-23T11:54:01.800
> 
> 标签：linux, cakephp

我写了这段代码

```
 $ips = preg_split("/,/", $_SERVER["HTTP_X_FORWARDED_FOR"]);
    $ip = $ips[0];
    if ($key === $ip && $val === env('SERVER_ADDR')) {
        $addr = env($ip);
        if ($addr !== null) {
            $val = $addr;
        }
    } 
```

但我收到以下错误：

```
<b>Notice</b>:  Undefined index: HTTP_X_FORWARDED_FOR 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:03:15.037

只是不要在不知道它们总是存在的情况下使用数组键..基本的 PHP 一对一

```
if (!empty($_SERVER["HTTP_X_FORWARDED_FOR"])) {
    // now only try to access this key
} 
```

Cake 中的替代方法是使用旨在自动检查内部存在的包装器方法。然后您可以直接读取该值。在您的情况下 env() 检查这些服务器变量：

```
$result = env('HTTP_X_FORWARDED_FOR'); 
```

# c# - WebAPI StreamContent 与 PushStreamContent

> ID：16168683
> 
> 赞同：40
> 
> 时间：2013-04-23T11:54:06.053
> 
> 标签：c#, visual-studio, asp.net-mvc-4, asp.net-web-api

我正在实现[BluImp jQuery File Upload 的 MVC4 + WebAPI 版本，在](https://github.com/bUKaneer/bluimp-jquery-file-upload-with-mvc4-and-webapi)我最初的尝试中一切正常，但我试图确保在下载非常大的文件（~2GB）的同时充分利用内存。

我已经阅读了[Filip Woj 关于 PushStreamContent 的文章，](http://www.strathweb.com/2013/01/asynchronously-streaming-video-with-asp-net-web-api/)并尽我所能实现了它（删除了异步部分——也许这就是问题所在？）。当我运行测试并观看 TaskManager 时，我没有看到内存使用方面的太大差异，并且我试图了解如何处理响应之间的差异。

这是我的 StreamContent 版本：

```
private HttpResponseMessage DownloadContentNonChunked()
{
    var filename = HttpContext.Current.Request["f"];
    var filePath = _storageRoot + filename;
    if (File.Exists(filePath))
    {
        HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
        response.Content = new StreamContent(new FileStream(filePath, FileMode.Open, FileAccess.Read));
        response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
        {
            FileName = filename
        };
        return response;
    }
    return ControllerContext.Request.CreateErrorResponse(HttpStatusCode.NotFound, "");
} 
```

这是我的 PushStreamContent 版本：

```
public class FileDownloadStream
{
    private readonly string _filename;

    public FileDownloadStream(string filePath)
    {
        _filename = filePath;
    }

    public void WriteToStream(Stream outputStream, HttpContent content, TransportContext context)
    {
        try
        {
            var buffer = new byte[4096];

            using (var video = File.Open(_filename, FileMode.Open, FileAccess.Read))
            {
                var length = (int)video.Length;
                var bytesRead = 1;

                while (length > 0 && bytesRead > 0)
                {
                    bytesRead = video.Read(buffer, 0, Math.Min(length, buffer.Length));
                    outputStream.Write(buffer, 0, bytesRead);
                    length -= bytesRead;
                }
            }
        }
        catch (HttpException ex)
        {
            return;
        }
        finally
        {
            outputStream.Close();
        }
    }
}

private HttpResponseMessage DownloadContentChunked()
{
    var filename = HttpContext.Current.Request["f"];
    var filePath = _storageRoot + filename;
    if (File.Exists(filePath))
    {
        var fileDownload = new FileDownloadStream(filePath);
        var response = Request.CreateResponse();
        response.Content = new PushStreamContent(fileDownload.WriteToStream, new MediaTypeHeaderValue("application/octet-stream"));
        response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
        {
            FileName = filename
        };
        return response;
    }
    return ControllerContext.Request.CreateErrorResponse(HttpStatusCode.NotFound, "");
} 
```

我的问题是为什么我没有看到这两种方法在内存使用方面有太大差异？此外，我已经下载了 StreamContent 类型的 PDB，并且可以看到对缓冲区大小等的引用（见下文），所以我想确切地知道 PushStreamContent 在 StreamContent 之外做什么。我检查了 MSDN 上的类型信息，但这篇文章的解释有点轻！

```
namespace System.Net.Http
{
  /// <summary>
  /// Provides HTTP content based on a stream.
  /// </summary>
  [__DynamicallyInvokable]
  public class StreamContent : HttpContent
  {
    private Stream content;
    private int bufferSize;
    private bool contentConsumed;
    private long start;
    private const int defaultBufferSize = 4096;

    /// <summary>
    /// Creates a new instance of the <see cref="T:System.Net.Http.StreamContent"/> class.
    /// </summary>
    /// <param name="content">The content used to initialize the <see cref="T:System.Net.Http.StreamContent"/>.</param>
    [__DynamicallyInvokable]
    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public StreamContent(Stream content)
      : this(content, 4096)
    {
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T14:28:47.050

关于这两种方法的内存使用情况，对于 StreamContent 和 PushStreamContent，Web API 不会缓冲响应。以下代码快照来自 WebHostBufferPolicySelector。源代码[**在这里**](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/9e18ded46ea76dac253bb893a66a3475d0cf685c#src/System.Web.Http.WebHost/WebHostBufferPolicySelector.cs)。

```
 /// <summary>
    /// Determines whether the host should buffer the <see cref="HttpResponseMessage"/> entity body.
    /// </summary>
    /// <param name="response">The <see cref="HttpResponseMessage"/>response for which to determine
    /// whether host output buffering should be used for the response entity body.</param>
    /// <returns><c>true</c> if buffering should be used; otherwise a streamed response should be used.</returns>
    public virtual bool UseBufferedOutputStream(HttpResponseMessage response)
    {
        if (response == null)
        {
            throw Error.ArgumentNull("response");
        }

        // Any HttpContent that knows its length is presumably already buffered internally.
        HttpContent content = response.Content;
        if (content != null)
        {
            long? contentLength = content.Headers.ContentLength;
            if (contentLength.HasValue && contentLength.Value >= 0)
            {
                return false;
            }

            // Content length is null or -1 (meaning not known).  
            // Buffer any HttpContent except StreamContent and PushStreamContent
            return !(content is StreamContent || content is PushStreamContent);
        }

        return false;
    } 
```

PushStreamContent 还适用于需要将数据“推送”到流的场景，其中 StreamContent 从流中“拉取”数据。因此，对于您当前下载文件的场景，使用 StreamContent 应该没问题。

以下示例：

```
// Here when the response is being written out the data is pulled from the file to the destination(network) stream
response.Content = new StreamContent(File.OpenRead(filePath));

// Here we create a push stream content so that we can use XDocument.Save to push data to the destination(network) stream
XDocument xDoc = XDocument.Load("Sample.xml", LoadOptions.None);
PushStreamContent xDocContent = new PushStreamContent(
(stream, content, context) =>
{
     // After save we close the stream to signal that we are done writing.
     xDoc.Save(stream);
     stream.Close();
},
"application/xml"); 
```

# drupal - 为什么我从 drupal 6.3 升级到 6.28 后看到混合信息

> ID：16168689
> 
> 赞同：1
> 
> 时间：2013-04-23T11:54:27.913
> 
> 标签：drupal, drupal-6

所以我刚刚从 6.3 升级到 6.28，现在在 mysite/admin/reports/status 我看到混合信息。在第一行我看到 Drupal 6.28

但是根据 drupal 核心更新状态，我看到需要更新并且它说不安全！（版本 6.28 可用）。我想这有点不合逻辑，因为我有那个版本！所有其他消息都是绿色的。但是在 mysite/admin/reports/updates 上，我看到列出的所有更新并说 drupal core 6.3，并建议我安装 6.28。所有其他模块均已更新。

我能做错什么吗？如何解决？顺便提一句。该页面工作正常，我只是在内容中看到“请按照这些步骤设置并开始使用您的网站”块。

# qt - 资源暂时不可用

> ID：16168690
> 
> 赞同：0
> 
> 时间：2013-04-23T11:54:31.023
> 
> 标签：qt, qt4

考虑这个线程，它就像一个定时器，向串口发送一些数据包：

```
void PlCThead::run()
{
    while(1)
    {
        const char str[]={UPDATE_PACKET};

        QByteArray  built;
        built.append(0x02);
        built.append(0x05);
        built.append(0x03);

        emit requestForWriteAndReceive(built);

        msleep(100);
    }
} 
```

发射工作正常，它进入插槽，在那里，它只将 78 或 char x 写入串行而不是 3 个字节的数据包。

```
bool RS::rs_ThreadPlcDataAqustn(QByteArray byteArray)
{
    QByteArray rd15Bytes;

    char *data = byteArray.data();
    int len = byteArray.length();

    if(!rs_serialWrite(data, len))
    {
        qDebug() << "Failure:( rs_dataqustn: rs_plcWrite(data, len)";
        emit plc_port_dscntd();
        return false;
    }
}

bool RS::rs_serialWrite(char* buff, size_t length)
{  
    int tries;

    int len;

    tries = 0;

    QByteArray built((char*)buff, length);

    qDebug() << built.toHex();

            len = write(fd, buff, length);

            qDebug() << len;

            qDebug() << strerror(errno);

            return true;
} 
```

这就是 fd 创建的方式：

```
fd = open(portPath, O_RDWR | O_NOCTTY | O_NDELAY | O_NONBLOCK, S_IWUSR | S_IRUSR | S_IXUSR); 
```

这是在主窗口中创建线程的方式：

```
rs_plc->rs_plcOpenPort((char *)"/dev/ttyS0"); /*/dev/ttyS3*/

PlCThead *thread = new PlCThead();
connect(thread, SIGNAL(requestForWriteAndReceive(QByteArray)), rs_plc, SLOT(rs_ThreadPlcDataAqustn(QByteArray )));
thread->start(); 
```

rs_plc 是 MainWindow 的私有成员。

`strerror`返回此警告：

```
> Resource temporarily unavailable 
```

有任何想法吗？这段代码在定时器上工作得很好，它已经过准确的检查和测试，但现在我需要添加这个线程而不是定时器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:52:29.897

您的问题不足以进行全面诊断，因为您没有显示如何`fd`创建、如何设置线程（您说这是问题的一部分）等。

但是......你的`resource temporarily unavailable`台词是一个很大的提示。write() 函数没有成功写入所有内容，因为它返回了一个错误（可能是`EAGAIN`or `EWOULDBLOCK`）。`fd`文件描述符附加到具有小缓冲区、没有缓冲区或缓冲区已满的东西上。它已经满了，在它可以处理之前不发送任何其他内容是应用程序的工作。一个常见的做法是睡觉，然后如果错误代码是`EAGAIN`或，则再次尝试写入`EWOULDBLOCK`。

但是，您说它返回 3，这实际上也表示“没有错误”。如果是这种情况，那么错误字符串将不会指代 write 本身，以及`errno`之前设置的其他内容。（过去可能是`write`它自己）。

简而言之，如果这被多次调用（可能），您可能需要注意写入速度太快（它看起来像一个串行缓冲区，肯定属于易于填充缓冲区的类别） .

简而言之：如果它没有将所有字节写入`fd`你想要的，那是因为它不能处理更多。

顺便说一句，这可能与此完全无关`qt`。这都是关于`write()`电话的。

# python - 在 Linux 上使用 cx_freeze 冻结共享对象

> ID：16168691
> 
> 赞同：3
> 
> 时间：2013-04-23T11:54:33.580
> 
> 标签：python, libc, cx-freeze

我正在尝试 CX_Freeze Linux 平台的应用程序。Windows MSI 安装程序运行良好，但 Linux 对应部分并没有真正按照我想要的方式运行。

构建包时，它可以在原始系统上完美运行，但是当移植到不同的系统（尽管架构相同）时，它会生成段错误。我做的第一件事是检查库，libc、pthread 和 libdl 存在一些巨大的版本差异。所以我决定将这些包含在构建中，如下所示：

```
if windows_build:
    build_exe_options['packages'].append("win32net")
    build_exe_options['packages'].append("win32security")
    build_exe_options['packages'].append("win32con")
    pywintypes_dll = 'pywintypes{0}{1}.dll'.format(*sys.version_info[0:2])      # e.g. pywintypes27.dll
    build_exe_options['include_files'].append((os.path.join(GetSystemDirectory(), pywintypes_dll), pywintypes_dll))
else:
    build_exe_options['packages'].append("subprocess")
    build_exe_options['packages'].append("encodings")
    arch_lib_path = ("/lib/%s-linux-gnu" % os.uname()[4])
    shared_objects = ["libc.so.6", "libpthread.so.0", "libz.so.1", "libdl.so.2", "libutil.so.1", "libm.so.6", "libgcc_s.so.1", "ld-linux-x86-64.so.2"]
    lib_paths = ["/lib", arch_lib_path, "/lib64"]
    for so in shared_objects:
        for lib in lib_paths:
            lib_path = "%s/%s" % (lib, so)
            if os.path.isfile(lib_path):
                build_exe_options['include_files'].append((lib_path, so))
                break 
```

在检查了原始的 cx_frozen bin 之后，动态库似乎在那里发挥了作用并完美地拦截了调用。尽管现在我处于 pthread 段错误的位置，因为他尝试了系统 libc 而不是我的（使用 ldd 和 gdb 检查）。

我的问题很简单，我正在尝试的这种方法很糟糕，因为它不能解决递归依赖问题。因此我的问题是“这样做的更好方法是什么？或者我应该在我的安装程序中编写递归依赖解决方案？”

为了击败解决方案：“改用本机 Python”，我们有一些硬件设备（想想 2~4U）和 Linux（和 Bash 访问），我们也想在其中运行它。当我们可以 cx_freeze 并将其与库一起发布时，移植整个 python（及其动态链接等）似乎是一种很有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T03:37:54.073

我不知道您的其他问题，但是`libc.so.6`按照您的方式将其运送到另一个系统是*不可能的*，如此[处](https://stackoverflow.com/a/851229/50617)所述。

# c - 使用 Vix 发送到虚拟机的命令序列有时会失败

> ID：16168692
> 
> 赞同：0
> 
> 时间：2013-04-23T11:54:35.823
> 
> 标签：c, wrapper, vmware, cpython, vix

我创建了一个名为的函数`listProcesses`，它按以下顺序调用以下 Vix 命令：

1.  VixHost_Connect
2.  VixHost_OpenVM
3.  VixVM_LoginInGuest
4.  VixVM_ListProcessesInGuest
5.  VixVM_LogoutFromGuest
6.  VixHost_Disconnect

请注意，我没有调用`VixVM_PowerOn`，因为我手动启动了虚拟机。

该函数`listProcesses()`是用 C 语言编写的，但我将其导出为一个`.pyd`文件以与 Python 一起使用。

在 Python 解释器中，我运行以下代码：

```
from myModule import listProcesses

for i in xrange(1000):
    print listProcesses() 
```

该函数`listProcesses()`为我提供了循环的前约 30 次迭代的预期输出（代表虚拟机内运行的进程名称的字符串列表）`for`，但之后它开始打印一个空列表。

我使用 Visual Studio 2012 中的调试器进行调查，看起来在`for`循环约 30 次迭代后，函数`VixVM_LoginInGuest()`返回错误`3006`。从 Vix 文档中，该错误意味着“需要打开虚拟机电源。”。

我检查过，虚拟机已开机并响应，并且 VmwareTools 仍在虚拟机内运行。

我想补充一点，我按照文档的建议释放了所有手柄。另外，如果有任何帮助，如果我在开始收到错误后暂停执行 python 脚本并重新启动虚拟机，则脚本会开始打印另外约 30 个的预期输出（取决于我运行的主机）脚本，它可能多达 80) 次，然后它再次开始打印一个空列表。

我想知道为什么会出现这个问题。

编辑：在我进一步调查之后，我注意到该函数`VixHost_OpenVM`创建了一个到虚拟机的 TCP 连接，并且连接永远不会关闭。当连接数达到一定数量时，操作系统可能会禁止来自我的脚本的任何新连接。有没有办法在不关闭脚本的情况下关闭未使用的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:03:17.210

我已经找到了我的问题的答案，并且由于看起来没有人会回答它，所以我将自己发布答案，以供将来可能遇到此问题的人使用。

问题是我`VixHost_Connect`每次运行该函数时都会调用，因此该函数每次`VixHost_OpenVM`都会创建一个到虚拟机的新 (TCP) 连接。几次调用后，我将达到操作系统强加的 TCP 连接限制，进一步调用`VixHost_OpenVM`将失败。

解决方法是在函数`VixHost_Connect`中调用`initmodule()`函数，并将句柄存储为全局变量，供其他方法使用。完成此操作后，我的`listProcesses()`函数如下所示：

1.  VixHost_OpenVM
2.  VixVM_LoginInGuest
3.  VixVM_ListProcessesInGuest
4.  VixVM_LogoutFromGuest

因为我每次运行时都使用相同的 Vmware 句柄，`listProcesses()`所以只有当虚拟机不存在时才会创建与虚拟机的 TCP 连接，并且我可以根据需要多次调用该函数。

# php - 在 EventListener 中添加表单错误

> ID：16168694
> 
> 赞同：3
> 
> 时间：2013-04-23T11:54:39.617
> 
> 标签：php, symfony, symfony-2.2

我有一个基于 Symfony 2.2 的应用程序，它的表单具有一个字段，该字段仅基于表单中的另一个字段。我绑定了一个 EventListener 以在提交表单时捕获，以便我可以验证在提交表单时是否实际上不需要“必需”字段。

我注意到我无法`FormError`在`PRE_BIND`表单事件内设置。这样做不会显示错误，但如果我绑定到`BIND`事件侦听器，则表单错误会正确显示，但我不想等到 BIND 事件检查我的错误（我不希望坏数据绑定到我的实体）。

有人能告诉我为什么会这样吗？

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // snip ...

    $builder->addEventListener(FormEvents::PRE_BIND, function(FormEvent $event) use ($options) {
        $data = $event->getData();
        $form = $event->getForm();
        if ($data === null) {
            return;
        }

        // yes, this is definitely called; If I remove the if() and just
        // and just add the formError it still doesn't work.
        if ($data['type'] == 'port' and empty($data['protocol'])) {
            $form->get('protocol')->addError(new FormError('A valid protocol must be selected.'));
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T08:53:43.393

在这种情况下，您应该使用基于提交数据的验证组。这个方法从 symfony 2.1 开始可用。

而且你不需要拉事件。看这里：

表格 - [http://symfony.com/doc/current/book/forms.html#groups-based-on-submitted-data](http://symfony.com/doc/current/book/forms.html#groups-based-on-submitted-data)

验证 - [http://symfony.com/doc/current/book/validation.html#validation-groups](http://symfony.com/doc/current/book/validation.html#validation-groups)

试试这个方法。你应该得到这样的代码：

带有验证器的实体脚本：*src/Acme/AcmeBundle/Entity/Url.php*

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

...
    /**
     * @ORM\Column(name="port", type="integer")
     * @Assert\NotBlank(groups={"validation_partial", "validation_full"})
     */
    private $port;

    /**
     * @ORM\Column(name="protocol", type="string", length=10)
     * @Assert\NotBlank(groups={"validation_full"})
     */
    private $protocol;
... 
```

表单脚本：src/Acme/AcmeBundle/Form/UrlType.php

```
use Symfony\Component\Form\FormInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

...

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'validation_groups' => function(FormInterface $form) {
            $data = $form->getData();

            if ('port' == $data->getType()) {
                return array('validation_full');
            } else {
                return array('validation_partial');
            }
        },
    ));

 } 
```

* * *

好的，我将尝试详细回答您的问题。例如。我们有这样的 FormType：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('name') // Some text field 'Name'
    ;

    $builder->addEventListener(FormEvents::PRE_BIND, function(FormEvent $event) use ($options) {
        $event->getForm()->get('name')->addError(new FormError('*** ERROR PRE_BIND'));
    });
    $builder->addEventListener(FormEvents::BIND, function(FormEvent $event) use ($options) {
        $event->getForm()->get('name')->addError(new FormError('*** ERROR BIND'));
    });
    $builder->addEventListener(FormEvents::POST_BIND, function(FormEvent $event) use ($options) {
        $event->getForm()->get('name')->addError(new FormError('*** ERROR POST_BIND'));
    });
} 
```

你说的对。如果在事件监听器中添加错误：PRE_BIND、BIND、POST_BIND。您只会从 BIND 和 POST_BIND 事件中得到错误。要了解为什么会这样，您需要知道 2 点。

*第一件事：* 形式中的每一个元素也是形式。在我们的例子中，我们的主表单有子“名称”（文本元素），这也是一个表单。

[主窗体]

-> [名称形式]

// 如果您的表单有其他元素，则可以有其他表单

*第二件事：* 当您将请求绑定到 MainForm 时，您会调用 bind() 函数。

此函数为 MainForm 的每个子级调用 bind() 函数。

您的问题的答案在此函数的算法中。bind() 函数算法：

```
function bind($submittedData) {
    1) clear all errors
    2) dispatch event PRE_BIND
    3) invoke bind() function for children
    4) dispatch event BIND
    5) dispatch event POST_BIND
} 
```

因此，基于我们的示例程序流程将是：

```
Invoke bind() function for MainForm
1) MainForm - clear all errors
2) MainForm - dispatch event PRE_BIND // there our listener add error for child NameForm.
3) MainForm - invoke bind() function for child NameForm:
    1) NameForm - clear all errors // is the answer for your question, error from event MainForm:PRE_BIND cleared!!!
    2) NameForm - dispatch event PRE_BIND // no changes
    3) NameForm - invoke bind() for children // this form does not have children, so will be passed
    4) NameForm - dispatch event BIND // no changes
    5) NameForm - dispatch event POST_BIND // no changes
4) MainForm - dispatch event BIND // there our listener add error to child NameForm
5) MainForm - dispatch event POST_BIND // there our listener add another error to child NameForm. 
```

我希望这个解释对你有帮助。

# javascript - 如何在页面和所有扩展都完全加载后运行 javascript？

> ID：16168696
> 
> 赞同：0
> 
> 时间：2013-04-23T11:54:48.587
> 
> 标签：javascript, dom, pageload

我想在整个页面和扩展完成加载**后完全运行一个简短的 javascript 文件。**

更好的是，如果我可以将脚本的加载延迟到页面后 100 毫秒，并且页面中的所有扩展都完成加载。

目的是确保这个 javascript 文件不能以任何方式被任何浏览器扩展修改，尤其是在 chrome 或 firefox 中。我打算强制此 javascript 运行的想法和方法是**仅在**任何扩展可能运行后运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:57:42.477

如果您使用的是 jquery，您可以这样做：

```
$(document).ready(function()
{
    //Your code here
}); 
```

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:58:12.243

您可以使用 onload 事件并调用您的函数。

```
<body onload="myFunction()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:57:54.740

body 标签的 onload 事件应该这样做，除非扩展正在初始化自己，在这种情况下，您将不得不使用它们的特定回调。

延迟你会使用 setTimeout 的东西

```
setTimeout(function(){ }, 100); 
```

# php - 使用 RewriteRule 阻止文件时包含/排除某些文件

> ID：16168701
> 
> 赞同：1
> 
> 时间：2013-04-23T11:54:56.227
> 
> 标签：php, .htaccess

在[这个答案](https://stackoverflow.com/questions/16109208/blocking-file-requests-with-a-503)的帮助下，我阻止了机器人使用这个 RewriteRule 破解我的 Web 应用程序的尝试

```
RewriteRule (?:foo.php|bar.pl|baz.py) - [R=503,L] 
```

但是，虽然我需要`foo.php`使用 503 阻止访问，但我还需要访问`naked-foo.php`上述代码块。

有没有办法专门从规则中排除一组 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:18:50.877

你可以试试这个：

```
RewriteEngine On

# Add files to exclude
RewriteCond %{REQUEST_URI} (1.php|2.html|3.txt) [NC]

# Or add file types to exclude (Remove the previous condition if used)
RewriteCond %{REQUEST_URI} \.(php|html|js)     [NC]

RewriteRule  .* - [L]

# Your rule
RewriteRule (?:foo.php|bar.pl|baz.py) - [R=503,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:12:59.133

我给出的[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)似乎太宽泛了。它阻止所有*包含* `foo.php`,`bar.pl`或的请求`baz.py`。如果你想完全阻止`/foo.php`等等，你可以用`^...$`

```
RewriteRule ^(?:foo.php|bar.pl|baz.py)$ - [R=503,L] 
```

当脚本可以在子目录中时，以斜杠作为前缀

```
RewriteRule /(?:foo.php|bar.pl|baz.py)$ - [R=503,L] 
```

您还可以使用多个规则

```
RewriteRule ^(?:foo.php|bar.pl|baz.py)$ - [R=503,L]
RewriteRule /(?:foo.php|baz.py)$ - [R=503,L]
RewriteRule /bar.pl$ - [R=503,L] 
```

或者

```
RewriteRule ^foo.php$ - [R=503,L]
RewriteRule /foo.php$ - [R=503,L]
RewriteRule /bar.pl$ - [R=503,L]
RewriteRule baz.py - [R=503,L] 
```

并尽可能具体或广泛，因为你需要。

# html - 带有静态列的响应式表格布局？

> ID：16168711
> 
> 赞同：2
> 
> 时间：2013-04-23T11:55:06.833
> 
> 标签：html, css, responsive-design

我需要实现一个在尽可能多的浏览器中工作的响应式表格设计。最左边的两个单元格（左/中）将具有静态宽度，而我需要右 div 具有基于当前窗口大小的动态宽度。

这是标记的样子：

```
<div class="wrapper">
    <div class="leftWrapper">
        <div class="left">left</div>
        <div class="mid">mid</div>
    </div>
    <div class="right">Lorem ipsum dolor sit amet, facilisi velit justo non. Pretium vestibulum nibh nonummy et a libero. Aptent consequat suscipit ridiculus leo pellentesque tempus, suspendisse pretium quis turpis. Euismod facilisi congue ab. Pretium ultricies non aliquam mi, cras sint, pede elit ligula aliquam in scelerisque ultricies, vitae dictum tincidunt sit, torquent eu et eros suspendisse. Voluptate nec curabitur et at nam non, diam vel, lorem nibh id condimentum a, laborum ornare, pede sem mattis. Numquam magna non metus sit fringilla, ligula quis cras, in lorem, praesent eros volutpat nisl vehicula tellus, egestas nullam. Pede aliquam donec.</div>
</div> 
```

[http://jsfiddle.net/mmZeN/](http://jsfiddle.net/mmZeN/)。

如何在不使用 display: table-cell 的情况下让右单元格与左单元格和中间单元格保持在同一行，同时点亮它根据 Bowser 的宽度调整大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:05:41.873

我是从头开始做的，看看对你有用吗

[**演示**](http://jsfiddle.net/nuPzA/1/)

```
<div class="wrapper">
    <div class="left"></div>
    <div class="center"></div>
    <div class="right"></div>
</div>

<style>
.left {
    float: left; 
    width: 200px; 
    background-color:#0f0;
    min-height: 200px;
}

.center { 
    float: left; 
    width: 120px;  
    background-color:#000;
    min-height: 200px;
}
.right { 
    height: 200px; 
    background-color: #f0f; 
    margin-left: 320px; 
}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:09:11.333

不要浮动`.right`元素并给它一个与元素宽度相同的边距`.leftWrapper`

这就是花车的魅力。。

**[在http://jsfiddle.net/mmZeN/2/](http://jsfiddle.net/mmZeN/2/)**更新了演示****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:03:22.207

如果您有左侧和中间的静态值，您可以指定使用 css 并将其他列设为百分比值。这应该在这种情况下工作。

更新：获取当前占位符的 px（可能是 DIV），减去左侧和中间列的宽度，然后保持宽度例如：Xpx Xpx/容器的总宽度 x 100 这个值你可以作为百分比给出。**

# google-chrome-extension - Chrome 扩展：仅在某些情况下显示浏览器操作弹出窗口

> ID：16168715
> 
> 赞同：3
> 
> 时间：2013-04-23T11:55:14.480
> 
> 标签：google-chrome-extension

我有一个 chrome 扩展。当用户单击我想要的图标时：

1.  检查用户是否登录。这使用谷歌存储（我已经有了这个代码）。

2.  如果用户已登录，则不应出现弹出窗口。

3.  如果用户未登录，则显示带有登录帖子/ajax 表单的浏览器操作弹出窗口。

谷歌说“如果浏览器操作有一个弹出窗口，当用户点击图标时弹出窗口就会出现。” [https://developer.chrome.com/extensions/browserAction.html](https://developer.chrome.com/extensions/browserAction.html)

所以我猜不是？我可以改为向页面 DOM 添加一个表单，但我宁愿不这样做。还有其他不错的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:43:40.477

用于`chrome.browserAction.setPopup({ popup: ''})`删除弹出窗口。

从[`browserAction.setPopup`文档](https://developer.chrome.com/extensions/browserAction.html#method-setPopup)：

> 当用户单击浏览器操作的图标时，设置要作为弹出窗口打开的 html 文档...
> 
> ***popup ( string )***：如果设置为空字符串 (`''`)，**则不显示弹出窗口。**

您可以使用`chrome.browserAction.setPopup`指定要显示的弹出页面，或根本不显示弹出页面。但是，您必须在用户单击浏览器操作*之前指定弹出窗口；*我不相信您可以在用户单击时“及时”更改它。您应该简单地从默认情况下激活的弹出窗口开始，然后在用户成功登录后将其关闭。

# android - Android：在运行时启用/禁用按钮？

> ID：16168716
> 
> 赞同：8
> 
> 时间：2013-04-23T11:55:18.123
> 
> 标签：android, button, runtime

好的，所以我有两个按钮。第一个是“加载文本”，第二个是“说出来”。

现在，我不希望 Speak 按钮在没有加载文本时处于活动状态。

我设法通过加载文本按钮的 onClickListener 方法将值设置为 EditText。在我调用的相同方法中，

```
btnSpeak.setEnabled(true); 
```

我已将其初始化为，

```
btnSpeak = (Button) findViewById(R.id.button1); 
```

整个编码是，

```
@Override
public void onInit(int status) {

    if (status == TextToSpeech.SUCCESS) {

        int result = tts.setLanguage(Locale.US);

        if (result == TextToSpeech.LANG_MISSING_DATA
        || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "This Language is not supported");
        } else {
            btnSpeak.setEnabled(true);
            //for checking
            if(btnSpeak.isEnabled())
            {
                Toast.makeText(SimpleAndroidOCRActivity.this, "Button should work!", Toast.LENGTH_SHORT).show();
            }
            else
            {
                Toast.makeText(SimpleAndroidOCRActivity.this, "Button should not work!", Toast.LENGTH_SHORT).show();
            }
        }

    } else {
        Log.e("TTS", "Initilization Failed!");
    }

} 
```

这是为了检查状态并将语言分配给 TTS 以供进一步使用。我得到了“按钮应该可以工作”的祝酒词，但它没有被启用。为什么会这样？有什么工作？

我在 .xml 文件中作为，

```
<Button
    android:id="@+id/button1"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_width="200dp"
    android:enabled="false"
    android:text="@string/tts_text" /> 
```

我应该在这里启用它，然后在运行时禁用和启用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T12:06:27.480

```
@Override
public void onInit(int status) {

    if (status == TextToSpeech.SUCCESS) {

        int result = tts.setLanguage(Locale.US);

        if (result == TextToSpeech.LANG_MISSING_DATA
        || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "This Language is not supported");
        } else {
            btnSpeak.setEnabled(true);
            //for checking
            if(btnSpeak.isEnabled())
            {
                btnSpeak.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View view) {
                        YourVoicemethod();

                        Toast.makeText(SimpleAndroidOCRActivity.this, "Button should work!", Toast.LENGTH_SHORT).show();
                    }

                });
            }
            else
            {
                Toast.makeText(SimpleAndroidOCRActivity.this, "Button should not work!", Toast.LENGTH_SHORT).show();
            }
        }

    } else {
        Log.e("TTS", "Initilization Failed!");
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T11:59:36.270

你必须使用`setClickable`

```
btnSpeak.setClickable(true);
btnSpeak.setEnabled(true); 
```

另外，用于`isEnabled()`检查状态

```
//for checking
if(btnSpeak.isEnabled())
{
  Toast.makeText(SimpleAndroidOCRActivity.this, "Button should work!", Toast.LENGTH_SHORT).show();
}
else
{
  Toast.makeText(SimpleAndroidOCRActivity.this, "Button should not work!", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T12:07:29.220

检查您的按钮是否被按下并编写您的代码。

示例代码。

```
if(button2.isPressed()){
    button2.setEnabled(false);
    button1.setEnabled(true);
}
else if(button1.isPressed()){
    button1.setEnabled(false);
    button2.setEnabled(true);
} 
```

我希望这能帮到您。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-20T22:36:54.953

回答可能为时已晚，您已经找到了解决方案，但您可以使用 invalidate 强制按钮根据其新状态重绘自身：

```
btnSpeak.setEnabled(true);
btnSpeak.invalidate(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T12:13:20.267

您可以通过禁用和启用按钮的可见性来实现

这是一个例子

```
View button = findViewById(R.id.buttonid);
button.setVisibility(View.GONE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T12:28:32.093

为两个按钮使用一个侦听器

```
button1.setOnClickListener(listener);
button2.setOnClickListener(listener);

listener = new OnClickListener({
    @Override
    public void onClick(View v) {
        switch(button_id){
            case id1:
            button2.setEnabled(false);
            button1.setEnabled(true);
            break;
            case id2:
            button1.setEnabled(false);
            button2.setEnabled(true);
            break;
        }
    }
}); 
```

# ruby-on-rails - 在 Rails 中同时使用 simple_format 和 html_safe

> ID：16168718
> 
> 赞同：12
> 
> 时间：2013-04-23T11:55:22.960
> 
> 标签：ruby-on-rails, html-safe

在中`@post.content`，我想要

1.simple_format，所以内容会有不同的行，而不是在没有中断的单行中

2.html_safe，因此用户可以粘贴一些`<embed>`视频链接，如 youtubes

可以`<%= simple_format @post.content %>`单独`<%= @post.content.html_safe %>`使用

但是当我一起使用它们时：`<%= simple_format @post.content.html_safe %>`html_safe 不起作用，因此`<embed>`视频不显示

你能告诉我如何同时启用`<embed>`代码`simple_format`吗？还是有其他解决方案来显示`@post.content`？谢谢！！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T12:04:42.457

我会告诉`simple_format`不要清理我的内容：

```
simple_format(@post.content, {}, :sanitize => false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T18:21:26.777

我正在研究类似的问题。

我正在尝试在我的博客文章中发布代码片段。它工作得很好，但是 <> 里面的任何东西都会被去掉。无论是我显示还是更复杂的东西，<> 中的任何东西都会消失。我已经运行了 <%= simple_format(@article.content), {}, sanitize: false 代码，我几乎得到了我想要的。

问题是我的块中的代码实际上改变了我的页面布局。:)。

我最终选择了 Redcarpet 作为我的答案。

这很简单。

将 gem 'redcarpet' 添加到 Gemfile 并重新启动 Rails 服务器。

在 application_helper.rb 中放入以下代码：

```
def markdown(content)
  @markdown ||= Redcarpet::Markdown.new(Redcarpet::Render::HTML, autolink: true, space_after_headers: true, fenced_code_blocks: true)
  @markdown.render(content)
end 
```

此处的选项在文档中进行了描述。但是，fenced_code_blocks: true 允许您按照描述将代码放入块中。

这将在此处输出您键入的任何内容，并且可以与您的嵌入一起使用。

然后，要在您的情况下呈现它，只需输入：

降价（@post.content）.html_safe

去应该不错。您还可以选择缩进四个空格，如此处插入代码。不过，做围栏似乎更容易。

# regex - 检索 xml/html 属性 - 双引号和单引号问题

> ID：16168721
> 
> 赞同：0
> 
> 时间：2013-04-23T11:55:29.257
> 
> 标签：regex

## 代码

我有这个正则表达式：

```
data-([a-zA-Z_]+[0-9]*)=[\"']([a-zA-Z0-9_ ]*)[\"'] 
```

## 电流输出

如果我有这个输入：

```
<div data-foo="bar"> 
```

比赛是：

*   数据-foo="栏"
*   富
*   酒吧

但如果我给出这个输入：

```
<div data-foo="ba'r"> 
```

然后比赛是：

*   数据-foo="ba'
*   富
*   巴

## 期望的输出

如果我有这个输入：

```
<div data-foo="ba'r"> 
```

然后我不会比赛是：

*   数据-foo="ba'r"
*   富
*   酒吧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:59:27.623

添加要查找的所需字符 [a-zA-Z0-9_\"'] --> 请注意，我还添加了 " 和 '

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:09:09.620

请注意，您可以使用支持 pcre 的语言（php、ruby、java...）来执行此操作。带有 php 语法的示例（带有反向引用）：

```
$pattern = "~data-([a-zA-Z_]+\d*)=([\"'])(.*?)\2~"; 
```

但是通过这种方法，您捕获了不需要的报价。

另一种方式：

```
 $pattern = "~data-([a-zA-Z_]+\d*)=(?|'([^']++)'|\"([^\"]++)\")~"; 
```

使用该`(?|...|...|...)`功能时，您允许正则表达式引擎为不同的捕获组提供相同的编号。因此，您可以准确地获得您想要的，没有寄生虫匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:12:06.573

'\' 用于跳跃引号？

也许，如果你同时跳跃

数据-([a-zA-Z_]+[0-9]*)=[\"\']([a-zA-Z0-9_]*)[\"\']

如果您需要内容有引号，您需要使用 - \' 或 \" 或 \'" 进入引号之间的组 - 这样您现在可以将其他字符放在一起。

# c# - 检测和替换值 Onkeydown

> ID：16168726
> 
> 赞同：3
> 
> 时间：2013-04-23T11:55:40.693
> 
> 标签：c#, wpf, textbox

`OnKeyPress`在我的旧项目中，我使用了in的覆盖`winform TextBox`来替换一些输入键

```
if(e.KeyChar == 'a')
   e.KeyChar = 'b'; // just an example 
```

但在 wpf 中我必须使用`OnKeyDown`并且`e.key`没有 setter ！

我必须在自定义 TextBox 中使用什么来更改某些按键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:01:53.493

像这样的东西应该工作。

对于**WinForm**：

```
 protected override void OnKeyPress(KeyPressEventArgs e)
 {
     //newChar will be passed to the base
     char newChar = e.KeyChar;

     if (e.KeyChar == 'a')
     {
         //handle the event and cancel the original key 
         e.Handled = true;

        //get caret position
         int tbPos = this.SelectionStart;

         //insert the new text at the caret position
         this.Text = this.Text.Insert(tbPos, "b");

         //update the newChar
         newChar = 'b';       

         //replace the caret back to where it should be 
         //otherwise the insertion call above will reset the position
         this.Select(tbPos + 1, 0);
     }

     base.OnKeyPress(new KeyPressEventArgs(newChar));
} 
```

**根据评论更新**（我将把上面的代码留给任何使用 WinForm 文本框的人）

对于**WPF**：

```
protected override void OnKeyDown(System.Windows.Input.KeyEventArgs e)
{
    Key newKey = e.Key;

    if (e.Key == Key.A)
    {
        //handle the event and cancel the original key
        e.Handled = true;

        //get caret position
        int tbPos = this.SelectionStart;

        //insert the new text at the caret position
        this.Text = this.Text.Insert(tbPos, "b");

        newKey = Key.B;

        //replace the caret back to where it should be 
        //otherwise the insertion call above will reset the position
        this.Select(tbPos + 1, 0);
    }

    base.OnKeyDown(new KeyEventArgs(e.KeyboardDevice, e.InputSource, e.Timestamp, newKey));
} 
```

# web - 从观看次数和收藏次数计算评分的最方便和最简单的公式是什么？

> ID：16168727
> 
> 赞同：0
> 
> 时间：2013-04-23T11:55:45.063
> 
> 标签：web, rating

我的网站上有一些带有两个参数的内容： - 观看次数 - 将项目添加到收藏夹的人数。

我想提出一些公式来将这两个参数组合在一个参数中，即“项目评级”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:06:38.680

当您让用户为特定项目*投票时，有一个非常好的公式可以计算排名中的位置。*

```
rating = (g / (g+m)) * s + (m / (g+m)) * S 
```

*   `s`是项目的平均评分
*   `S`是所有项目的平均评分
*   `g`是该项目的投票数
*   `m`是要包含在您的排名中的项目的最小投票数。

它对[Filmweb](http://www.filmweb.pl/rankings/film/world)非常有效。

你必须稍微修改一下。如果您将一个项目的*视图*计为使用标记对其进行*评分，并将**添加到收藏夹*中计为，请检查它将如何工作。一开始试试。可能您想更改为...`1.0`*`5.0``m = 1``5.0`*

 *```
rating_for_a_favourite = number_of_all_views / number_of_all_adds 
```

...也许有一些因素< 1.0。

试试看。:-)

**编辑**：使用这个公式，您可以轻松地将项目的真实评级（例如 1-5 星）合并到您的网站，*除了*将视图和收藏夹包括到`rating`.*

# c# - c#格式化数据保存到excel文件

> ID：16168735
> 
> 赞同：1
> 
> 时间：2013-04-23T11:56:02.603
> 
> 标签：c#, excel, kinect

我正在使用 Kinect 并尝试将跟踪坐标保存到 excel 文件中。我已经设法创建了 excel 文件并保存了数据，但我需要格式化保存数据的方式才能创建图表。我该怎么做？

数据当前在一个单元格中显示为：

23-04-13 10:24

头部：X:411 Y:255

肩中心：X:417 Y:317

左肩：X:360 Y:353

右肩：X:474 Y:357

左肘：X:341 Y:412

右肘：X:513 Y:426

左手腕：X:321 Y:451

右手腕：X:513 Y:471

左手：X:312 Y:454

右手：X:502 Y:471

脊椎：X:422 Y:389

髋关节中心：X:422 Y:403

左髋：X:397 Y:429

HipRight: X:450 Y:434

左膝：X:305 Y:484

右膝：X:316 Y:425

左脚踝：X:205 Y:547

右脚踝：X:426 Y:437

左脚：X:178 Y:559

右脚：X:394 Y:441

我需要将坐标值放在单独的单元格中。

我保存到excel的代码。

}

```
 TextBox1.Text = Head;
        TextBox2.Text = ShoulderCenter;
        TextBox3.Text = ShoulderLeft;
        TextBox4.Text = ShoulderRight;
        TextBox5.Text = ElbowLeft;
        TextBox6.Text = ElbowRight;
        TextBox7.Text = WristLeft;
        TextBox8.Text = WristRight;
        TextBox9.Text = HandLeft;
        TextBox10.Text = HandRight;
        TextBox11.Text = Spine;
        TextBox12.Text = HipCenter;
        TextBox13.Text = HipLeft;
        TextBox14.Text = HipRight;
        TextBox15.Text = KneeLeft;
        TextBox16.Text = KneeRight;
        TextBox17.Text = AnkleLeft;
        TextBox18.Text = AnkleRight;
        TextBox19.Text = FootLeft;
        TextBox20.Text = FootRight;

        {
            StreamWriter sw = File.AppendText("Data.xls");
            sw.WriteLine(DateTime.Now);
            sw.WriteLine(TextBox1.Text);
            sw.WriteLine(TextBox2.Text);
            sw.WriteLine(TextBox3.Text);
            sw.WriteLine(TextBox4.Text);
            sw.WriteLine(TextBox5.Text);
            sw.WriteLine(TextBox6.Text);
            sw.WriteLine(TextBox7.Text);
            sw.WriteLine(TextBox8.Text);
            sw.WriteLine(TextBox9.Text);
            sw.WriteLine(TextBox10.Text);
            sw.WriteLine(TextBox11.Text);
            sw.WriteLine(TextBox12.Text);
            sw.WriteLine(TextBox13.Text);
            sw.WriteLine(TextBox14.Text);
            sw.WriteLine(TextBox15.Text);
            sw.WriteLine(TextBox16.Text);
            sw.WriteLine(TextBox17.Text);
            sw.WriteLine(TextBox18.Text);
            sw.WriteLine(TextBox19.Text);
            sw.WriteLine(TextBox20.Text);

            sw.Close();          

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:13:17.470

首先，将您的值放入一个数组（IEnumerable、List 或其他）中，这样您就可以使用循环遍历它。

```
using Excel = Microsoft.Office.Interop.Excel; 
```

并使用：

```
public void doExcel()
{

    Excel.Application myExcelApplication = new Excel.Application();
    myExcelApplication.Visible = true; 
    myExcelApplication.ScreenUpdating = true;
    Excel.Workbook myExcelWorkbook = (Excel.Workbook) myExcelApplication.Workbooks.Add(System.Reflection.Missing.Value)); 
    Excel.Worksheet myExcelWorkSheet = (Excel.Worksheet)myExcelWorkbook.ActiveSheet;

    for (int i = 0; i < myList.Count; i++)
    {
        myExcelWorkSheet.Cells[3, i] = String.Format("{0}", myList[i]);                
    }
    myExcelWorkbook.Close(true, "C:\\data.xls", System.Reflection.Missing.Value);
} 
```

# java - 休眠内线程而不休眠外线程 - Java

> ID：16168741
> 
> 赞同：0
> 
> 时间：2013-04-23T11:56:11.077
> 
> 标签：java, multithreading, mina

我有一个主要的 Mina 处理程序线程正在处理，并且在该线程中我创建了另一个线程并将其设置为休眠指定的时间。现在我希望这个内部线程独立睡眠而不会阻塞 Handler 线程。以下是示例代码。

```
public void messageReceived(IoSession session, Object message) throws Exception {
        Integer tts = 5000; 
        Thread sleepThread = new Thread(obj);
        sleepThread.sleep(tts);
} 
```

目前它正在阻塞主处理程序线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:59:26.943

`Thread.sleep()`是静态方法，所以调用`sleepThread.sleep(tts)`和 `Thread.sleep(tts)`. 因此，您当前的线程只是在睡觉。

您不能通过调用其`Thread`对象上的方法来导致另一个线程休眠。在推送时，您可以在对象上设置一个标志，您的线程可以检查该标志的存在并做出相应的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:01:53.117

尝试

```
 final int tts = 5000; 
    Thread sleepThread = new Thread() {
        public void run() {
            try {
                Thread.sleep(tts);
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
        }
    };
    sleepThread.start(); 
```

# php - Yii 框架，自定义 PHP 文件的路径

> ID：16168743
> 
> 赞同：0
> 
> 时间：2013-04-23T11:56:15.243
> 
> 标签：php, yii, yii-extensions

我正在使用[Yii 框架](http://yiiframework.com)，并且我有自定义的**.php**文件，`header('Content-type: image/png');`实际上它返回了一个图像。
我希望以这种方式**查看**该图像：

```
<img src="path/to/custom/image.php"/> 
```

我应该**把**我的自定义 php 文件放在哪里？我应该如何**设置它的路径**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:18:45.207

相对于您的控制器，例如：`../../images/file.php`，或者您可以这样做：

```
<img src="<?php echo Yii::app()->request->baseUrl; ?>/images/file.php"/> 
```

这样，文件必须可以从外部访问。

只是为了澄清，你不应该从你的控制器中调用它，而是从你的视图中调用它。

# c# - 生成用于编辑 EntityFramework 4 数据的 Web 客户端的框架

> ID：16168751
> 
> 赞同：0
> 
> 时间：2013-04-23T11:56:30.010
> 
> 标签：c#, .net, entity-framework, user-interface

想象一下，有一个使用 EF 4 数据存储的应用程序。

我需要开发一个 Web 客户端，它允许以最小的努力对这些数据执行 CRUD 操作。

是否有框架或工具允许从现有数据模式快速生成这些操作的 UI（例如，类似于[Spring Roo](http://www.springsource.org/spring-roo)）？

# android - 我的应用程序的更新 url 将用户转移到应用程序页面，但没有更新选项

> ID：16168752
> 
> 赞同：0
> 
> 时间：2013-04-23T11:56:31.703
> 
> 标签：android, google-play

我建议用户更新我的应用程序，并将他转移到 Play 商店的特定页面。它适用于从商店下载应用程序并真正建议他们更新的用户。

但是当用户从其他地方下载应用程序时的问题，在这种情况下，他将进入 Play 商店中的正确页面但没有“更新”选项 - 只有“打开”和“卸载”在这种情况下我该怎么办？

谢谢你们！:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:46:17.123

这很可能是因为您的 APK 文件的签名在 Google Play 和其他地方不同。Google Play 仅允许在未更改签名的情况下更新应用程序。

可能会发生签名差异，因为：

*   Amazon AppStore 更改 APK 文件的签名
*   您的应用程序的调试版本始终使用调试签名进行签名

在此处阅读有关签署 Android 应用程序的更多信息：http:
[//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

# xcode - Mac OSX -bash 中的 Virtualenv：找不到命令问题

> ID：16168754
> 
> 赞同：0
> 
> 时间：2013-04-23T11:56:34.873
> 
> 标签：xcode, osx-mountain-lion, virtualenv, pip, homebrew

我很难在 Mac OSX Mountain Lion 上使用 virtualenv。

我用 Homebrew 安装了 XCode、python2.7 和使用 sudo PIP 的 virtualenv + virtualenvwrapper。

我已将 usr/local/share/python 添加到我的 $PATH 中，并且还遵循了此站点上给出的建议：

[http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/](http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/)

并相应地编辑了我的 ~/bashrc 。

但是当我运行 virtualenv ENV 时，我得到：

-bash：virtualenv：找不到命令

我已经完成了许多关于 SO 的类似问题中概述的步骤，但到目前为止，它们都没有奏效。我会非常感谢一些帮助和建议。

# android - 无法从位置侦听器 android 在 oncreate 方法中调用和获取位置

> ID：16168757
> 
> 赞同：1
> 
> 时间：2013-04-23T11:56:40.657
> 
> 标签：android, sms, location

关于 android 中的位置更新，我需要您的帮助。以下是我获取位置更新的代码，它工作正常。但是当我在主类的 oncreate 方法中获取带有位置的存储变量时，它返回无效的消息正文。经过深入研究，我在 oncreate 方法中调用的变量似乎是空的。您能告诉我如何获取出现在 onlocationChanged 方法中的地址吗？谢谢！

使用 oncreate 方法调用类：

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            listener = new Mylocation();

            locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);
             String address1= listener.getAddress();

           {
                sendSms(phone, message, false);
            } catch (Exception e) {

                Log.i("Error Is ", e.toString());
            }

        } 
```

位置类：

```
class Mylocation implements LocationListener{

    double lat, lon;
    static final String address="";

    public void onLocationChanged(Location location)
    {
        //...

        lat = location.getLatitude();
        lon = location.getLongitude();
        address = GetAddressDetail(lat, lon);
        Log.i("Messge is", address); //working here 
        }

    public String getAddress(){ //not returning the address
        return address;
    }

public String GetAddressDetail(Double lat2, Double lon2)
    {
        Geocoder geocoder = new Geocoder(MainActivity.this, Locale.ENGLISH);
        try {
            List<Address> addresses = geocoder.getFromLocation(lat2,lon2, 1);
            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("Address:");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i));
                }
                ret = strReturnedAddress.toString();
            }
            else{
                ret = "No Address returned!";
            }
}
        return ret;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:17:35.227

确保您的变量已正确初始化。我在问题中没有看到这方面的证据，所以我只是在检查。

```
// Instantiation
Mylocation listener;
String phone;
String message;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Initialization
    listener = new Mylocation(this);
    phone = "";
    message = "";

    // These two lines aren't really necessary,
    // this should be in your MyLocation class      
    //locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    //locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);

    // Add this line, we are going to initialize this class 
    // and make sure that address gets set
    listener = new Mylocation();
    String address1 = listener.getAddress();

    try {
        // If neither phone nor message is empty lets sendSms()
        if (!phone.isEmpty() || !message.isEmpty()) {
            sendSms(phone, message, false);
        }
    } catch (Exception e) {
        Log.i("Error Is ", e.toString());
    }

} 
```

* * *

将其更改`String address`为私有并在 getter 中尝试`return this.address;`

```
class Mylocation implements LocationListener {

    double lat, lon;
    // Let's make this private so it can't be accessed directly, 
    // since you have the setter and getter.
    private String address = "";

    // Make sure you are overriding this method
    @Override    
    public void onLocationChanged(Location location) {
        /** ... */
        lat = location.getLatitude();
        lon = location.getLongitude();
        address = GetAddressDetail(lat, lon);
        Log.i("Messge is", address);
    }

    public String getAddress(){
        return (address.isEmpty()) ? "Address not set" : this.address;
    }

    public String GetAddressDetail(Double lat2, Double lon2) {
        Geocoder geocoder = new Geocoder(MainActivity.this, Locale.ENGLISH);
        try {
            List<Address> addresses = geocoder.getFromLocation(lat2,lon2, 1);
            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("Address:");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i));
                }
                ret = strReturnedAddress.toString();
            }
            else{
                ret = "No Address returned!";
            }
        }
        return ret;
    }
} 
```

* * *

**编辑**

我在上面的答案中对您的代码进行了更改，请查看评论。我还将为您的`MyLocation`课程建议其他方法：

```
class Mylocation implements LocationListener {
    protected LocationManager locationManager;
    private Context activityContext;

    // The initializing method, this fires off first 
    // when a new instance of the class is created
    public MyLocation(Context context) {
        this.activityContext = context;
        locationManager = (LocationManager) activityContext.getSystemService(LOCATION_SERVICE);
        if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);) {
            locationManager.requestLocationUpdates(
                NETWORK_PROVIDER, 
                MIN_TIME, 
                MIN_DISTANCE, 
                this
            );
        }

        getLocation();
    }

    private double lat;
    private double lon;

    public double getLat() {
        return this.lat;
    }

    public double getLng() {
        return this.lng;
    }

    public void getLocation() {
        if (location == null) {
            locationManager.requestLocationUpdates(NETWORK_PROVIDER, MIN_TIME, MIN_DISTANCE, this);
            if (locationManager != null) {
                location = locationManager.getLastKnownLocation(NETWORK_PROVIDER);
                if (location != null) {
                    // Set the coordinate variables
                    lat = location.getLatitude();
                    lon = location.getLongitude();
                    Log.i("Network", "Lat: " + latitude + " / Lng: " + longitude);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:53:38.320

在将 locationmanager 设置为探测位置后，您将直接调用 getAdress。当您以这种方式调用 getAddress 时，可能尚未调用 onLocationChanged 方法。我建议将其更改为以下内容以确保已调用它：

```
 public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      listener = new Mylocation();

      locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
      locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,new LocationListener(){
           @Override    
           public void onLocationChanged(Location location) {
           //...

              long lat = location.getLatitude();
              long lon = location.getLongitude();
              String address = GetAddressDetail(lat, lon);
              //Do whatever you want to do with the address here, maybe add them to the message or something like that.
              sendSms(phone, message, false);
           }
      });

}

public String GetAddressDetail(Double lat2, Double lon2)
{
        Geocoder geocoder = new Geocoder(MainActivity.this, Locale.ENGLISH);
        try {
            List<Address> addresses = geocoder.getFromLocation(lat2,lon2, 1);
            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("Address:");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i));
                }
                ret = strReturnedAddress.toString();
            }
            else{
                ret = "No Address returned!";
            }
        }
        return ret;
} 
```

# c# - 比较c#中不同类型的列表

> ID：16168758
> 
> 赞同：1
> 
> 时间：2013-04-23T11:56:42.167
> 
> 标签：c#, linq, list

我有两个列表，一个是字符串列表，另一个是一个类的列表。该类包含一些属性，如 soid、项目名称、数量等，它的值也..字符串列表和类列表有一些共同的属性。所以我想检查带有类列表的字符串列表，并将常用值添加到一个字典中。

```
public class Input
   {
       public string soid { get; set; }

       public string itemname { get; set; }

       public int qty { get; set; }
   }
list<Input> inputclass=new  list<Input>();//inputclass list

List<string> metadata=new List<string>();//string list
metadata.Add("itemname");
        metadata.Add("soid");
        metadata.Add("qty"); 
```

所以我想将类成员名称与字符串列表名称进行比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:21:31.000

不确定我是否 100% 正确理解了您，但给出了以下输入：

```
var inputclass= new List<Input>() {
    new Input(){ soid="123", itemname="Bar", qty=123 },
    new Input(){ soid="777", itemname="Foo", qty=999 } 
};
List<string> metadata=new List<string>() { "itemname", "soid", "qty" }; 
```

你可以像这样使用`.ToDictionary()`and`.GetProperty()`方法

```
Type t = typeof(Input);
var result = metadata.ToDictionary(i => i, i => inputclass.Select(c => t.GetProperty(i).GetValue(c))); 
```

创建一个看起来像的字典

![在此处输入图像描述](https://i.stack.imgur.com/hdlPs.png)

**编辑：**

如果`metadata`可以包含不属于 的属性的值，`Input`则将保存以下内容：

```
var result = metadata.Select(i => t.GetProperty(i))
                     .Where(i => i != null)
                     .ToDictionary(i => i.Name, i => inputclass.Select(c => i.GetValue(c))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:08:03.473

如果我理解正确，您想比较类型本身，而不是该列表中的实例。

你可以这样做：

```
List<string> metadata = new List<string>();//string list
metadata.Add("itemname");
metadata.Add("soid");
metadata.Add("qty");
metadata.Add("yada");

var result = from str in metadata
             join prop in typeof(Input).GetProperties() on str equals prop.Name
             select str;

foreach (string prop in result)
{
    Console.WriteLine(prop);
} 
```

现在，如果您有一个`T`未知对象列表并希望将每个对象与元数据进行匹配，请告诉我，我会帮助您。

**根据您的评论进行**编辑：**`when we get the common name between list<input> and string how will get the value of corresponding member of the class.now you return only common names r8..?`**

 **你可以这样做。假设你有这两个类：

```
public class Input
{
    public string soid { get; set; }

    public string itemname { get; set; }

    public int qty { get; set; }
}

public class Yada : Input
{
    public string yada { get; set; }
} 
```

`Input`4 个属性中的 3 个也是如此，而`Yada`class 具有全部 4 个。

然后假设我们有一个对象列表：

```
List<Input> inputclass = new List<Input>();//inputclass list

inputclass.Add(new Input() { itemname = "test",soid="myId",qty=10 });
inputclass.Add(new Yada() { itemname = "test2",soid="myId2", yada = "woo",qty=20 }); 
```

您可以使用以下代码从对象中获取所有匹配的属性，包括它们的当前值：

```
var result = inputclass.Select(
                 input => (from str in metadata
                           join prop in input.GetType().GetProperties()
                           on str equals prop.Name
                           select new { Obj = input, Prop = str, Value = prop.GetValue(input, null) }))
                           .SelectMany(i => i)
                           .GroupBy(obj => obj.Obj);

foreach (var obj in result)
{
    Console.WriteLine(obj.Key);
    foreach (var prop in obj)
    {
        Console.WriteLine(prop.Prop + ":" + prop.Value);
    }
    Console.WriteLine();
 }

 Console.ReadKey(); 
```

这是我的输入：

![在此处输入图像描述](https://i.stack.imgur.com/72gJS.png)

请注意，使用时要小心`GetValue`：例如，您必须对其进行细微的更改才能与索引器一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:10:00.290

使用此[ReflectionExt.GetAttr](https://stackoverflow.com/questions/138045/is-there-something-like-pythons-getattr-in-c)您可以执行以下操作：

```
var dict = new Dictionary<string, List<string>>();

foreach(var listItem in inputclass)
{
   foreach(var metaItem in metadata)
   {
       try
       {
            var value = ReflectionExt.GetAttr(listItem, metaItem);

            if (dict[metaItem] == null)
                dict[metaItem] = new List<string>();

            if (!dict[metaItem].Contains(value)) // Add only if not exists
                dict[metaItem].Add(value);
       }
       catch
       {
           ;
       }

   }

} 
```**

# java - JavaScript 到 Java 的转换

> ID：16168759
> 
> 赞同：-4
> 
> 时间：2013-04-23T11:56:45.000
> 
> 标签：java, javascript, stack

我在 JavaScript 中有这个函数：

```
// this is a unit-cost specialization of dijkstra's algorithm
function floodfill(distmap,idx) {
    var q = [idx], q2 = [];
    distmap[idx] = 1;
    var dist = 1;

    while(q.length) {
        dist++;
        for(var i=0;i<q.length;i++) {
            var idx = q[i];

            for(var move=0;move<4;move++) {
                var i2 = idx+di[move];
                if(map[i2] || distmap[i2])
                    continue;
                distmap[i2] = dist;
                q2.push(i2);
            }
        }
        q = q2; q2 = [];
    }
    return distmap;
} 
```

它被称为

```
var p1dist;
p1dist = floodfill([], myi); // myi its position of player 2 in map (for example 13
                               // and map[13] = 2); 
```

地图是这样的：

```
// map: 0 = empty, -1 = wall, 1 = player 1, 2 = player 2
var map = [];
var w = 7 //width of map
var h = 9 //height of map

// start out with a clear map with a border around the edges
for(var j=0;j<h*w;j++) map[j] = 0;

function addWall(x,y) {
    map[x+y*w] = -1;
}

for(var i=0;i<w;i++) { addWall(i,0); addWall(i,h-1); }
for(j=0;j<h;j++) { addWall(0,j); addWall(w-1,j); } 
```

我试图为 Java 重写这个函数（floodfill）但没有成功。我哪里想错了？

```
public int[] floodfill(int idx) {
    int[] q, q2, distmap;
    q2 = new int[1];
    q = new int[idx];
    distmap = new int [w*h];
    distmap[idx] = 1;
    int dist = 1;

    while(q.length != 0) {
        dist++;
        for(int i=0; i < q.length; i++) {
            int index = q[i];
            for(int move = 0; move < 4; move++) {
                int i2 = index+di[move];
                if (i2 > 0) {
                    if(map[i2] == 0 || distmap[i2] == 0)
                        continue;

                    distmap[i2] = dist;
                    q2 = push(i2, q2);
                }
            }
        }
        q = q2; q2 = new int[1];
    }
    return distmap;
} 

int[] p1dist;
p1dist = floodfill(myi); 
```

和功能推送：

```
public int[] push(int k, int[] r) {
    int[] p;
    p = new int[r.length+1];
    p[r.length] = k;
    r = p;
    return r;
} 
```

请，如果有人不理解我的问题或其他问题，请询问更多细节，但我真的需要一个答案，因为我今晚有截止日期。

对于这个函数和这样的地图（5 表示墙，地图是 int[] 而不是 int[][]）：

```
 5 5 5 5 5 5 5 5 5 5 5 5 5 
 5 5 5 0 0 0 0 0 5 0 0 0 5 
 5 0 0 2 0 0 0 0 0 0 5 5 5 
 5 0 0 0 0 0 0 0 0 0 0 1 5 
 5 5 5 5 5 5 5 5 5 5 5 5 5         

public int[] floodfill(int idx) {
    ArrayList<Integer> q, q2;
    int[] distmap;
    q2 = new ArrayList<Integer>();
    q = new ArrayList<Integer>();
    q.add(idx);
    distmap = new int [w*h];
    distmap[idx] = 1;
    int dist = 1;

    while(q.isEmpty()) {
        dist++;
        for(Integer index:q) {
            for(int move = 0; move < 4; move++) {
                    int i2 = index+di[move];
                    if (i2 > 0) {
                        if( i2 > map.length || i2 > distmap.length)
                        continue;

                    distmap[i2] = dist;
                    q2.add(i2);
                }
            }
        }
        q = q2; q2 = new ArrayList<Integer>();
    }
    return distmap;
} 
```

我有这个可怕的输出：

```
 [I@24753433 [I@24753433 [I@24753433 ... [I@24753433 [I@24753433 [I@24753433 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:12:18.237

```
q = new int[idx]; 
```

我想你想要

```
q = new ArrayList<Integer>();
q.add(idx); 
```

而不是使用数组使用 ArrayList 来删除这个`push`方法，所以你只需要`add`

可能是这样的：

```
public int[] floodfill(int idx) {
    List<Integer> q, q2;
    Integer[] distmap;
    q2 = new ArrayList<Integer>();
    q = new ArrayList<Integer>();
    q.add(idx);
    distmap = new Integer[w*h];
    distmap[idx] = 1;
    int dist = 1;

    while(q.length != 0) {
        dist++;
        for(Integer index:q) {
            for(int move = 0; move < 4; move++) {
                    int i2 = index+di[move];
                if (i2 > 0) {
                    if( i2 > map.length     || map[i2] == null || 
                        i2 > distmap.length || distmap[i2] == null)
                        continue;

                    distmap[i2] = dist;
                    q2.add(i2);
                }
            }
        }
        q = q2; q2 = new ArrayList<Integer>();
    }
    return distmap;
} 
```

您应该像这样显示列表：

```
int[] p1dist;
p1dist = floodfill(myi);
for(int i:p1dist){
    System.out.print(i);
} 
```

# perl - 在 Perl 字符串中保留反斜杠

> ID：16168763
> 
> 赞同：2
> 
> 时间：2013-04-23T11:56:50.593
> 
> 标签：perl, backslash, preserve

Perl 中有没有办法在字符串变量中保留和打印所有反斜杠？例如：

```
$str = 'a\\b'; 
```

输出是

```
a\b 
```

但是我需要

```
a\\b 
```

问题是无法以任何方式处理字符串以转义反斜杠，因为我必须从数据库中读取复杂的正则表达式并且不知道它们出现在哪个组合和数字中，并且必须完全按照它们在网页。

我尝试使用模板工具包以及 html 和 html_entity 过滤器。到目前为止，唯一可行的方法是使用单引号此处的文档：

```
print <<'XYZ';
a\\b
XYZ 
```

但是我不能插入变量，这使得这个解决方案毫无用处。

我试图将字符串写入网页、文件和外壳，但没有运气，总是一个反斜杠消失。也许我完全走错了路，但是打印复杂正则表达式的正确方法是什么，包括所有组合和数字中的反斜杠而不做任何更改？

换句话说：我有一个包含数百个正则表达式作为字符串数据的数据库。我想用 perl 阅读它们并将它们打印在网页上，就像它们在数据库中一样。许多管理员一直在对这些正则表达式进行更改，所以我事先不知道如何以及如何逃避。一个典型的例子看起来像这样： `'C:\\test\\file \S+'` 但它可能会在第二天更改为 `'\S+ C:\\test\\file'` 也许一个正确的结论是，无论它出现在哪个组合和哪个数字中，都将每个反斜杠恰好转义一次？这意味着它可以将它们加倍。那么问题就没有我担心的那么大了。我在 bash 上对其进行了测试，它可以连续使用两个甚至三个反斜杠（4 个反斜杠打印 2 个反斜杠，6 个反斜杠打印 3 个反斜杠）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:09:37.837

反斜杠仅在 Perl 源代码中出现时才对 Perl 有意义，例如：将文字字符串分配给变量：

```
my $str = 'a\\b'; 
```

但是，如果您从文件（或数据库或套接字等）读取数据，您读取的数据中的任何反斜杠都将被保留，而无需采取任何特殊步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:59:22.597

```
my $str = 'a\\b';
print $str; 
```

这打印`a\\b`。

使用我的 $str = 'a\\\\b'; 反而

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:37:45.753

我试图解决的问题不存在。我将直接在代码中初始化字符串与使用 html 表单混淆了。在保留所有反斜杠的代码中使用字符串只能通过此处的文档或通过读取包含该字符串的文本文件来实现。但是，如果我只是在网页上使用 html 表单插入字符串并使用 CGI 模块中的 escapeHTML() ，它会处理所有问题，您可以插入最连线的特殊字符组合。它们都完全按照插入的方式显示和保存。所以我应该直接从 html 和数据库操作开始，而不是尝试通过直接在代码中直接使用字符串来检查事物。无论如何，谢谢你的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T12:23:23.573

您可以使用以下正则表达式来正确形成您的字符串：

```
my $str = 'a\\b';
$str =~ s/\\/\\\\/g;
print "$str\n"; 
```

这打印`a\\b`。

**编辑：**

您可以使用非插值 here-document 代替：

```
my $str = <<'EOF';
a\\b
EOF
print "$str\n"; 
```

这仍然打印`a\\b`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T12:00:27.610

这是一个 PITA，但你只需要加倍反斜杠，例如

```
 a\\\\b 
```

否则，您可以将反斜杠存储在另一个变量中，然后对其进行插值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T12:13:17.093

获得两个斜线的最小值是（不幸的是）三个斜线：

```
use 5.016;
my $a = 'a\\\b';
say $a; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-05T17:11:24.973

格兰特的回答提供了我需要的提示。其他一些答案与 Perl 在我的系统上的操作不匹配，所以......

```
#!/usr/bin/perl
use warnings;
use strict;

my $var = 'content';

print "\'\"\N{U+0050}\\\\\\$var\n";

print <<END;
\'\"\N{U+0050}\\\\\\$var\n
END

print '\'\"\N{U+0050}\\\\\\$var\n'.$/;

my $str = '\'\"\N{U+0050}\\\\\\$var\n';
print $str.$/;

print @ARGV;
print $/; 
```

从 bash 调用...使用 bash 转义引号的方法，将 \' 更改为 '\''。

```
jamie@debian:~$ ./ft.pl '\'\''\"\N{U+0050}\\\\\\$var\n'
'"P\\\content
'"P\\\content

'\"\N{U+0050}\\\$var\n
'\"\N{U+0050}\\\$var\n
\'\"\N{U+0050}\\\\\\$var\n 
```

最后一行，中间有六个反斜杠，是我所期望的。现实不同。

所以：

*   "in here \" 被插值
*   在 HEREDOC \ 被插值
*   'in single quotes only \' 被插值并且仅用于 \ 和 ' （还有更多吗？）
*   我的 $str = '同样有限\插值';
*   perl.pl 'escape using bash rules' with @ARGV 未插值

# vb.net - 如何在 vb.net 中将纸张大小设置为合法

> ID：16168771
> 
> 赞同：0
> 
> 时间：2013-04-23T11:57:31.327
> 
> 标签：vb.net, printing, datagridview, resize, size

我试图将我的 datagridview 的内容打印到合法或长尺寸的证券纸上，但我找不到使预览对话框中的纸张变长的代码。这是我的打印预览和打印代码：

```
Private Sub btnPreview_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPreview.Click
    Dim strcon As New OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0;Data Source=C:\Users\user\Documents\Visual Studio 2008\Projects\NMGInventory\NMGInventory\Supplies.mdb")
    Try
        strcon.Open()
        Dim sql As String
        sql = "SELECT * From [product info]"
        Dim adapter As New OleDbDataAdapter(sql, strcon)
        Dim dt As New DataTable("product info")
        adapter.Fill(dt)
        print.DefaultPageSettings.Landscape = True
        .
        preview.PrintPreviewControl.Zoom = 1
        preview.Document = print
        preview.Show()

        AddHandler print.PrintPage, AddressOf print_PrintPage
        strcon.Close()
    Catch Ex As Exception
        MessageBox.Show(Ex.Message)
    End Try

End Sub

Protected Sub print_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs)

    Dim ColumnCount As Integer = DataGridView1.ColumnCount
    Dim RowCount As Integer = DataGridView1.RowCount

    Dim CellTopPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Top

    For Row = 0 To RowCount - 1

        Dim CellLeftPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Left
        Dim CellRightPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Right
        For Cell = 0 To ColumnCount - 1

            Dim CellValue As String = DataGridView1.Rows(Row).Cells(Cell).Value.ToString()
            Dim CellWidth = DataGridView1.Rows(Row).Cells(Cell).Size.Width + 50
            Dim CellHeight = DataGridView1.Rows(Row).Cells(Cell).Size.Height

            Dim CellWidth1 = DataGridView1.Rows(3).Cells(Cell).Size.Width + -30

            Dim Brush As New SolidBrush(Color.Black)
            e.Graphics.DrawString(CellValue, New Font("Century Gothic", 10), Brush, CellLeftPos, CellTopPos)
            e.Graphics.DrawRectangle(Pens.Black, CellLeftPos, CellTopPos, CellWidth, CellHeight)
            CellLeftPos += CellWidth
        Next

        CellTopPos += DataGridView1.Rows(Row).Cells(0).Size.Height
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:15:32.727

设置以下设置

```
Dim xCustomSize As New PaperSize("Legal", 850, 1400)

        Me.DefaultPageSettings.PaperSize = xCustomSize 
```

# c++ - 隐藏 DDD 中的静态数据成员，或仅显示某些成员

> ID：16168773
> 
> 赞同：4
> 
> 时间：2013-04-23T11:57:42.077
> 
> 标签：c++, ddd-debugger

我的 DDD 数据显示窗口过于拥挤，因为每个对象都列出了它的静态数据成员以及它的实例数据成员。

有没有隐藏这些的选项？

编辑：更好的是，我可以为每个元素获取一个数组切片并仅显示 xy 和 z 成员吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T19:56:00.613

您可能会为您的代码编写一个漂亮的打印机。

例子：

```
namespace Test {
    struct Filter {
        static unsigned a;
        static unsigned b;
        static unsigned c;
        // ,,,
        unsigned x;
        unsigned y;
        unsigned z;

        Filter()
        : x(1), y(2), z(3)
        {}
    };

    unsigned Filter::a;
    unsigned Filter::b;
    unsigned Filter::c;
}

int main() {
    Test::Filter value;
    return 0;
} 
```

有了这台漂亮的打印机

```
@printers.register_pretty_printer
class TestFilter:
    "Pretty Printer for Test::Filter"
    regex = re.compile('^Test::Filter$')

    @printers.static
    def supports(typename):
        return TestFilter.regex.search(typename)

    def __init__(self, typename, value):
        self.typename = typename
        self.value = value

    def to_string(self):
        x = self.value['x']
        y = self.value['y']
        z = self.value['z']
        return '(Test::Filter) x=%d, y=%d, z=%d' % (x, y, z) 
```

在第 27 行返回并运行 gdb -q Test -ex 'b 27' -ex 'r' -ex 'p value' -ex 'c' -ex 'q' 将给出：

```
$1 = (Test::Filter) x=1, y=2, z=3 
```

有关更多说明，请查看[gdb 中漂亮的打印 boost::mpl::string<...> 类型](https://stackoverflow.com/questions/18604664/pretty-printing-boostmplstring-types-in-gdb/18698884#18698884)

# excel - 使用 VBA 动态设置范围等于另一个范围

> ID：16168774
> 
> 赞同：1
> 
> 时间：2013-04-23T11:57:43.203
> 
> 标签：excel, vba, reference

我想设置一个引用命名范围的单元格范围，该范围`name1`等于另一个 Excel 工作表上同样大小的单元格范围，也引用了一个命名范围`name2`。我希望单元格`Sheet1`等于当前对应的单元格`Sheet2`，因此我不能使用 .value 属性。

```
Sheets("Sheet1").Range("name1").Offset(0, 1).Resize(15, 5) = Sheets("Sheet2").Range("name2").Offset(0, 1).Resize(15, 5).value 
```

除了，我不想使用价值。有没有像这样简单的方法来做我需要的事情？我搜索了一些论坛，但找不到这样做的好方法。我需要使用 a`For each`和`R1C1`命名吗？重申一下 - 上的单元格`sheet1`应该等于相对单元格上的值`sheet2`（范围大小相同）。所以，例如。单元格`Sheet1!A1`有公式`=Sheet2!A1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:41:05.677

您可以尝试以下方法：

```
Sheets("Sheet1").Range("name1").Offset(0, 1).Resize(15, 5).FormulaR1C1 = "=Sheet2!R[0]C[0]" 
```

**更新**

如果范围（名称 1 和名称 2）位于不同的位置，则需要相应地调整公式：

```
Dim nRowOffset As Long
Dim nColOffset As Long
Dim sFormula As String
nRowOffset = Sheets("Sheet2").Range("name2").Row - Sheets("Sheet1").Range("name1").Row
nColOffset = Sheets("Sheet2").Range("name2").Column - Sheets("Sheet1").Range("name1").Column
sFormula = "=Sheet2!R[" & nRowOffset & "]C[" & nColOffset & "]"
Sheets("Sheet1").Range("name1").Offset(0, 1).Resize(15, 5).FormulaR1C1 = sFormula 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:41:18.267

我只对此进行了一点测试，所以它可能不是那么健壮。

**注意**此子需要放置在新的（或现有的）模块中，而不是任何工作表或此工作簿模块中。

它是一个宏，因此不能作为 UDF 从工作表中调用。此外，由于它有参数，因此不能直接调用。

要使用代码，您需要创建另一个子程序来为您调用它，或者直接从即时窗口调用它。

```
Sub RunCode()
    Main "Name1", "Name2" ' you could run this line in the immediate/debug window
End Sub 
```

该子`RunCode`应该在您的工作簿的宏菜单中可用。

```
Sub Main(ByVal Name1 As String, ByVal Name2 As String)
Dim Cell As Long
Dim Range1 As Range: Set Range1 = ThisWorkbook.Names(Name1).RefersToRange
Dim Range2 As Range: Set Range2 = ThisWorkbook.Names(Name2).RefersToRange
' check to make sure Name1 and Name2 are the same size
If Range1.Cells.Count = Range2.Cells.Count Then 
    If Range1.Rows.Count = Range2.Rows.Count Then
        If Range1.Columns.Count = Range2.Columns.Count Then
            ' populate the cells with the formula
            For Cell = 1 To Range1.Cells.Count
                Range2.Cells(Cell).Formula = "=" & Range1.Worksheet.Name & "!" & Range1.Cells(Cell).Address
            Next Cell
        End If
    End If
End If

End Sub 
```

如果您想要对该函数进行更多可定制的界面，那么以下代码应该会有所帮助。运行`RunCode2`宏将提示您输入要传递给的两个名称`Main`

```
Public Function nameExists(ByVal Name As String) As Boolean
Dim Result As Boolean: Result = fasle
Dim Item As Variant
For Each Item In ThisWorkbook.Names
    If Item.Name = Name Then
        Result = True
        Exit For
    End If
Next Item
nameExists = Result
End Function

Sub RunCode2()
Dim Response As Variant
Dim Name1, Name2 As String
Response = Application.InputBox(Prompt:="Name 1", Type:=2)
If VarType(Response) = vbBoolean Then
    Debug.Print "RunCode2 - User Canceled Name 1 Selection"
    Exit Sub
Else
    If nameExists(Response) = False Then
        MsgBox "Name [" & Response & "] Not Found", vbOKOnly
        Exit Sub
    Else
        Name1 = Response
    End If
End If
Response = Application.InputBox(Prompt:="Name 2", Type:=2)
If VarType(Response) = vbBoolean Then
    Debug.Print "RunCode2 - User Canceled Name 2 Selection"
    Exit Sub
Else
    If nameExists(Response) = False Then
        MsgBox "Name [" & Response & "] Not Found", vbOKOnly
        Exit Sub
    Else
        Name2 = Response
    End If
End If
Main Name1, Name2
End Sub 
```

# c++ - 检查 C++ 编译器是否存在

> ID：16168777
> 
> 赞同：0
> 
> 时间：2013-04-23T11:57:53.863
> 
> 标签：c++, compiler-construction, gnu, autotools, autoconf

GNU 文档`AC_PROG_CXX`声明：

> 否则，如果在没有参数的情况下调用宏，则在可能的名称下搜索 C++ 编译器（首先是 g++ 和 c++，然后是其他名称）。如果这些检查都没有成功，那么作为最后的手段，将 CXX 设置为 g++。

这意味着无论是否找到工作的 C++ 编译器，该`CXX`变量都将设置为某个值。因此，无法使用`CXX`知道 C++ 编译器是否可用。

如何检查 C++ 编译器是否可用`./configure`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:01:44.727

您可以添加额外的[`AC_CHECK_PROG`](http://www.gnu.org/software/autoconf/manual/autoconf-2.64/html_node/Generic-Programs.html)检查，以确保找到编译器。

# ios - 使用 AVFoundation 像在屏幕上一样捕获图像预览

> ID：16168779
> 
> 赞同：3
> 
> 时间：2013-04-23T11:57:55.363
> 
> 标签：ios, objective-c, avfoundation

我设置了`AVCaptureSession`预设的 PhotoPreset

```
self.session.sessionPreset = AVCaptureSessionPresetPhoto; 
```

然后在我的视图中添加一个新图层

```
 AVCaptureVideoPreviewLayer *previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.session];
[previewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];
CALayer *rootLayer = [self.view layer];
[rootLayer setMasksToBounds:YES];
[previewLayer setFrame:[rootLayer bounds]];
[rootLayer addSublayer:previewLayer]; 
```

到目前为止一切顺利，但是当我想捕捉图像时，我使用下面的代码

```
 AVCaptureConnection *videoConnection = [self.stillImageOutput connectionWithMediaType:AVMediaTypeVideo];

[self.stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {

     [self.session stopRunning];

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData ];

     self.imageView.image = image; //IMAGEVIEW IS WITH THE BOUNDS OF SELF.VIEW
     image = nil;

 }]; 
```

捕获图像很好，但是与`AVCaptureVideoPreviewLayer`在屏幕上显示的图像相比，捕获的图像有所不同。我真正想做的是显示捕获的内容就像出现在`AVCapturePreviewLayer`图层上一样。我怎样才能做到这一点？我应该如何调整和裁剪捕获的图像的边界`self.view`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T12:27:03.637

我不确定这是否会对您有所帮助，但是当您谈论裁剪图像时，我使用以下代码在 ImagePickerView 中裁剪图像我不确定这是否会对您有所帮助

```
- (void)imagePickerController:(UIImagePickerController *)picker 
didFinishPickingMediaWithInfo:(NSDictionary *)info {
    self.lastChosenMediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if ([lastChosenMediaType isEqual:(NSString *)kUTTypeImage]) {
        UIImage *chosenImage = [info objectForKey:UIImagePickerControllerEditedImage];
        UIImage *shrunkenImage = shrinkImage(chosenImage, imageFrame.size);
        self.imagee = shrunkenImage;
        selectImage.image = imagee;

    }     [picker dismissModalViewControllerAnimated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {    
    [picker dismissModalViewControllerAnimated:YES];
}

// function for cropping images you can do some changes in parameter as per your requirements  
static UIImage *shrinkImage(UIImage *original, CGSize size) {
    CGFloat scale = [UIScreen mainScreen].scale;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef context = CGBitmapContextCreate(NULL, size.width * scale,
                                                 size.height * scale, 8, 0, colorSpace, kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(context,
                       CGRectMake(0, 0, size.width * scale, size.height * scale),
                       original.CGImage);
    CGImageRef shrunken = CGBitmapContextCreateImage(context);
    UIImage *final = [UIImage imageWithCGImage:shrunken];

    CGContextRelease(context);
    CGImageRelease(shrunken);   

    return final;
} 
```

# php - 为多维数组创建 OAuth 签名

> ID：16168781
> 
> 赞同：2
> 
> 时间：2013-04-23T11:57:56.547
> 
> 标签：php, oauth, oauth-2.0, twitter-oauth, google-oauth

如何为多维数组创建 OAuth 签名字符串

**例子：**

```
<?php

 //MULTI ARRAY
    $a = array(

        //KEY 1 CONTAINS AN ARRAY
        1=>array('name'=>sundar','email'=>'s7sunder@gmail.com'),

        //KEY 2 CONTAINS AN ARRAY
        2=>array('name'=>sundar1','email'=>'s7sunder1@gmail.com')
    );
?> 
```

如何为 OAuth 形成这样的签名字符串

签名字符串：

```
status=Hello%20Ladies%20%2b%20Gentlemen%2c%20a%20signed%20OAuth%20request%21 
```

# javascript - 在 ipad 中设置 jwplayer 的高度和宽度

> ID：16168784
> 
> 赞同：0
> 
> 时间：2013-04-23T11:58:11.913
> 
> 标签：javascript, jquery, width, jwplayer

我正在尝试设置`jwplayer`使用 jquery 的高度和宽度。它在所有桌面系统中都能正常工作。但是在`Ipad`，它不能正常工作。它显示垂直滚动条。我使用以下计算。

```
jwpwt = ((document.documentElement.clientWidth/100)*70);
jwpht = ((document.documentElement.clientHeight/100)*65);

jwplayer('container_video').setup({
    flashplayer: '/media/js/player.swf',
    file:$("#"+temp).val(),
    height: jwpht,
    width: popwt,
    stretching :'exactfit',
    skin:'/media/images/modieus/modieus/modieus.xml',
    autostart: true
}); 
```

`ipad`我不知道，窗口必须给出哪个百分比。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T09:47:00.347

JWPlayer 正在移动设备和桌面上加载不同的元素（您可以使用 safari 开发模式检查 ipad 版本上的元素）。我试图使用宽度：100% 高度：100% 和拉伸：统一来动态调整播放器的大小。它适用于台式机，但也不适用于 iPad。我想对于您的情况，您可以尝试将 jwplayer 放入容器中。您设置容器的宽度和高度。对于 jwplayer，使用我的方法，设置宽度：100%，高度：100%

不确定它是否有帮助。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T02:28:52.567

```
<script type="text/javascript">
   jwplayer("myElement").setup({
         ......
         width: '100%',
         .....
   });
</script> 
```

# ios - 是否有可能：在 iOS 中使用静态库而不包含任何头文件？

> ID：16168786
> 
> 赞同：0
> 
> 时间：2013-04-23T11:58:17.847
> 
> 标签：ios, static, static-libraries, libraries

我做了一个非常基本的静态库，在屏幕上只打印一个字符串。我为 ios 设备制作了它，并在复制头文件中添加了头文件 --> 项目。该`main .h`文件是`SampleSubproject.h`. 运行后我找到`libSampleSubproject.a`并复制到我的项目中。当我尝试使用该库时，我在我的 .m 文件中调用它，例如

```
`#import "SampleSubproject/SampleSubproject.h"`. 
```

它给出了错误

```
"SampleSubproject/SampleSubproject.h" is not found. 
```

是否可以在不公开的情况下使用库中的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:00:05.903

据我所知，你不能。由于您是作为静态库执行的，因此您应该添加头文件。

# ios - 应用程序从后台加载时显示的蒙版 UIView 内容

> ID：16168792
> 
> 赞同：1
> 
> 时间：2013-04-23T11:58:32.710
> 
> 标签：ios, objective-c, xcode, quartz-core

我有一个 UIView 的一部分，我添加了一个掩码来使用：

```
-(void)viewDidLoad{

    CALayer* maskLayer = [CALayer layer];
    maskLayer.contents = (__bridge id)[[UIImage imageNamed:@"mask.png"] CGImage];

    self.myView.layer.mask = maskLayer;
} 
```

我的问题是，当我按下主页按钮后返回应用程序时，当应用程序从背景状态开始动画时，蒙版区域会短暂显示。

据我了解，这是因为 iOS 会捕获应用程序状态的图像来显示此动画，而蒙版层没有被捕获？（我之前在以编程方式捕获我的应用程序的快照时遇到过这个问题）

有没有更好的地方可以戴口罩，或者有更好的遮盖方法来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:06:27.547

当应用程序来自后台时，它将调用 AppDelegate 的以下方法

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
```

**解决方案**

*   在上述方法中添加图层动画代码（applicationWillEnterForeground）。
    **或者**
*   添加将调用您的动画方法的选择器或 NSNotificationCenter。

这适用于应用程序的任何视图控制器，如果您希望它用于特定视图检查当前可见视图控制器。

# asp.net-mvc - 添加新的 API 控制器时，EF 类不显示

> ID：16168794
> 
> 赞同：2
> 
> 时间：2013-04-23T11:58:49.823
> 
> 标签：asp.net-mvc, entity-framework

这个问题已经在 SO 中被问过几次，但到目前为止对我来说没有任何帮助。

在现有的 MVC 项目中，我添加了一个从数据库生成的模型（首先使用数据库）。现在我想添加一个新的 API 控制器。但是，我的新模型类和数据上下文类都没有出现在“添加控制器”对话框中：

*   确保我重新编译了我的 dll
*   重新启动VS（2010）
*   删除了 AssemblyInfo.cs （如另一篇 SO 帖子中所建议的那样）
*   检查 ILSpy 以确保模型在其中并具有 ID

我的解决方法是将我的模型放在另一个 dll 中。不过我觉得没必要……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:23:28.933

是否可以像命名空间或引用问题一样简单。

如果它们在不同的项目中，那么控制器项目将需要引用存储库项目。

你可以通过使用完整的命名空间路径来访问模型吗？你只需要`using`在类中添加一个合适的；键入 CTRL+。会给你建议。

希望能有所帮助。

# ruby - 将 PDF 转换为 JPG 时质量低下

> ID：16168798
> 
> 赞同：3
> 
> 时间：2013-04-23T11:59:05.790
> 
> 标签：ruby, pdf, imagemagick, rmagick

我正在尝试使用 Imagemagic(RMAgick) 将 PDF 文档转换为图像。原始 PDF 也是从图像创建的（不是原生矢量 PDF）。

```
image = Magick::Image::from_blob(original_pdf) { self.format = 'PDF' }
image[0].format = 'JPG'
image[0].to_blob
image[0].write(to_file.jpg) {
  self.quality = 100
  self.density = 144
} 
```

但是打印时生成的图像质量太低。原始PDF同时具有良好的质量。我正在尝试使用这些选项

```
self.quality = 100
self.density = 144 
```

或使用 PNG 而不是 JPG，但这一切都不起作用，只会增加图像大小（以 kb 为单位）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-14T18:12:19.457

假设`original_pdf`是 pdf 文件的内容，例如：

```
original_pdf = File.open('from_file.pdf', 'rb').read 
```

`from_blob` 然后在方法块而不是方法块中应用质量选项`write`：

```
image = Magick::Image::from_blob(original_pdf) do
  self.format = 'PDF'
  self.quality = 100
  self.density = 144
end
image[0].format = 'JPG'
image[0].to_blob
image[0].write('to_file.jpg') 
```

还要查看[method](https://stackoverflow.com/questions/3631543/rmagick-convert-problem/20586384#20586384)[的质量选项`Magick::ImageList.new`](https://stackoverflow.com/questions/3631543/rmagick-convert-problem/20586384#20586384)。

# android-emulator - Android模拟器和virtualbox不能同时运行

> ID：16168799
> 
> 赞同：116
> 
> 时间：2013-04-23T11:59:10.060
> 
> 标签：android-emulator, virtualbox, kvm

每当我运行 Virtualbox 时，我都无法启动 Android 模拟器映像（反之亦然）。AVD 管理器中的错误消息是

```
ioctl(KVM_CREATE_VM) failed: Device or resource busy
ko:failed to initialize KVM 
```

我怎样才能让两者同时运行？

那是一个 64 位的 Ubuntu，所有涉及的软件都是最新发布的版本。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-31T07:32:53.110

删除 kvm 内核模块（使用 'sudo rmmod kvm_intel kvm'）可以同时运行 Virtualbox 和 Android 模拟器，但 Android 模拟器在这种设置中的性能非常糟糕。如果可能，最好关闭 Virtualbox 模拟器并通过运行“sudo /etc/init.d/vboxdrv stop”卸载其驱动程序（vboxdrv）。[谷歌在其Android Emulator 页面](http://developer.android.com/tools/devices/emulator.html#accel-vm)上关于 Linux 的部分建议了这个“解决方案” 。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-09-24T19:04:05.013

我遇到了同样的 VirtualBox 冲突。通过使用不同于“x86”的 ABI 解决了这个问题（在我的例子中是 armeabi-v7a）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-07-03T14:40:51.170

我停止了使用 VirtualBox 运行的虚拟机。这使错误消失了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-30T18:54:48.197

我在 Ubuntu 13.10 上遇到了同样的问题。尝试删除 kvm 和 kvm_intel 内核模块。

去做这个：

1.  停止所有模拟器。
2.  运行命令：'sudo rmmod kvm_intel kvm'

如果没有这些内核模块，Virtualbox 和 Android 模拟器可以同时工作。

顺便说一句，我不知道为什么要加载模块。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-14T21:30:53.057

**终于有一个解决方法。**

*对macOS*执行以下步骤：

1.  在 Android Studio 中转到工具 -> Android -> SDK 管理器

2.  确认您已安装最新版本的 Intel Emulator Accelerator HAXM (v6.1.1) [![Android Studio 中的首选项面板](https://i.stack.imgur.com/qHTPc.png)](https://i.stack.imgur.com/qHTPc.png)。

3.  转到`extras`首选项中显示的 Android SDK 位置的目录。在 MacOS 上，您可以这样做：

    `open ~/Library/Android/sdk/extras`

4.  通过打开 IntelHAXM_6.1.1.dmg，然后在已安装的文件夹中打开 IntelHAXM_6.1.1.mpkg 并按照安装程序说明安装 HAXM 打包。

*对于Windows*，请按照以下步骤操作：

1.  在 Android Studio 中转到工具 -> Android -> SDK 管理器

2.  确认您已安装最新版本的 Intel Emulator Accelerator HAXM (v6.1.1) [![Android Studio 中的首选项面板](https://i.stack.imgur.com/qHTPc.png)](https://i.stack.imgur.com/qHTPc.png)。

3.  转到`extras`首选项中显示的 Android SDK 位置的目录。就像是：

    `C:\Users\<username>\AppData\Local\Android\sdk\extras`

4.  在该目录中有某种文件，例如`intelhaxm-android.exe`. 运行。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-18T09:29:07.180

您还可以在模拟器设置中将 CPT/ABI 设置从 x86 更改为 arm。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-15T12:24:32.513

我终于通过使用 Genymotion 而不是标准的 Android 模拟器解决了这个问题。除了没有这个冲突，它比普通模拟器快几倍。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-07T07:36:54.263

另一种解决方案是使用[vagrant-libvirt](https://github.com/vagrant-libvirt/vagrant-libvirt)插件使用 libvirt 支持的 vagrant。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-02-23T15:17:08.357

对于那些在 Linux 上开发并且被大量运行在 virtualbox 中的后端系统困住的人来说，一个简单的解决方案是简单地创建一个 virtualbox X86 Android VM，并在从 localhost 通过 PAT 隧道传输的 NAT 接口上公开 5555 端口。不需要慢臂 AVD，不需要 libvirt/vagrant，更不用说杀死 kvm！

[![在此处输入图像描述](https://i.stack.imgur.com/UM6Dm.png)](https://i.stack.imgur.com/UM6Dm.png)

然后让adb知道

```
$ adb tcpip 5555
restarting in TCP mode port: 5555
$ adb connect 127.0.0.1
connected to 127.0.0.1:5555
$ adb devices
List of devices attached adb server
* daemon started successfully
emulator-5554   device 
```

然后，在 Android Studio 中按运行或调试，将在该 VM 上部署和执行。您可以完全控制 Android Studio 调试器。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-17T11:12:59.760

虽然这也是一种解决方法，但绝对比每个人都建议的禁用 KVM 更好。

只需在 KVM 中运行 virtualbox 来宾。例如*（`kvm`这里只是一个运行 a 的脚本`qemu-system-x86_64 -enable-kvm`）*：

```
kvm Win7.vdi -boot c -m 2G -vga qxl 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-18T11:35:06.363

在某些情况下，我们需要保持 virtualbox 机器正常运行，因此让所有 virtualbox 机器继续运行，切换到物理移动设备来测试您的应用程序而不是模拟器。

如果您正在使用 react-native 或您真正的 android/ios 设备，则可以使用 expo。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-19T10:17:30.723

这可能超出了主题，因为 OP 同时请求了 VirtualBox + KVM，但仍然可能是解决方法：我正在寻找一种在 Ubuntu 18.10 x64 上启动 Windows 7 和 AVD 的方法。关闭 KVM 不是一个选项，因为 AVD 的性能对我来说至关重要。我已经通过虚拟机管理器（virt-manager 包）安装了 Windows 7，现在 AVD 和 Windows 7 都是硬件加速的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-06T03:25:15.163

我通过安装 HAXM 6.1.2 解决了这个问题。

详情请参阅以下链接：- [https://forums.docker.com/t/cant-using-docker-for-mac-with-android-emulator-haxm/8939/11](https://forums.docker.com/t/cant-using-docker-for-mac-with-android-emulator-haxm/8939/11)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-03T23:48:00.503

以下是使用**vagrant**解决这个问题的方法，它是两个插件“libvirt”和“mutate”：

1.  打开终端并设置环境变量：

    ```
     export VAGRANT_DEFAULT_PROVIDER=libvirt
     export VAGRANT_HOME=/home/directoryToStoreVagrant/
     VBoxManage list vms 
    ```

2.  现在复制从上一个命令获得的代码，如“c1530713-aec2-4415-a6b5-b057928c7e5f”，并在以下内容中使用：

    > vagrant package --base c1530713-aec2-4415-a6b5-b057928c7e5f --output window7.box

    ```
     vagrant init window7
     vagrant up window7 --provider=libvirt 
     vagrant box list 
    ```

3.  您需要安装一些 vagrant 插件，例如**libvirt**和 **mutate**。Mutate 会将 .box 转换为 libvirt VM：

    > vagrant 插件安装 vagrant-libvirt vagrant 插件安装 vagrant-mutate

4.  将 vagrant box 转换为 libvirt：

    `vagrant mutate window7_.box libvirt`

5.  现在您可以初始化 vagrant VM。如果任何错误仍然存​​在，请编辑您的 Vagrant 文件。**像我一样，我取消注释以config.vm.network**开头的行 ，然后运行以下命令：

    `vagrant up --provider=libvirt`

这就是我能够完全摆脱这个错误的方式

# python - Aptana (eclipse) - 在编辑 Python 时，启用驼峰式光标移动

> ID：16168804
> 
> 赞同：2
> 
> 时间：2013-04-23T11:59:21.213
> 
> 标签：python, eclipse, aptana

我正在使用 Aptana 来编辑我的 python 项目。

我想知道是否有一个选项可以定义编辑器在按下按钮时*在*驼峰式单词中移动。`ctrl`

例如，如果我的光标由管道 '|' 表示 并位于此处：

```
whatIsTheMeaningOfLife| 
```

当按下`ctrl`+`left Arrow` 我希望它跳到这里：

```
whatIsTheMeaningOf|Life 
```

而不是在第一个'w'之前。

我很确定它应该在以下位置：*Window -> Preferences -> PyDev -> Editor*

但是找不到。

谢谢！

# mysql - MYSQL 内连接 2 个表和 sum()

> ID：16168814
> 
> 赞同：3
> 
> 时间：2013-04-23T11:59:37.017
> 
> 标签：mysql, sum, inner-join

加入 2 个表后，我无法获取 sum()，其中一个是 HEADER AND DETAIL。它只为下面的 sql 语句提供 0 结果。需要一些帮助：

我的桌子：

INVHDR：

```
 Invno,  Invdate,   Ac_code
    100     2013-04-01  2
    101     2013-04-30  2

    INVDTLS:
    Invno,  Prod_desc, Amount
    100     Argon      155
    100     Argon      250
    101     Oxygen     322
    101     Oxygen     065 
```

期望的结果：amts 的总和：405

MYSQL 语句到内部连接和 sum()

```
SELECT
        a.Invno, a.Ac_code, a.Invdate, b.*
    FROM INVHDR a
    INNER JOIN (
        SELECT
                Invno, Prod_desc, SUM( Amount ) AS amts
            FROM INVDTLS
            WHERE Prod_desc='Argon'
        ) AS b ON a.Invno = b.Invno
    WHERE
        a.Ac_code='2'
        AND a.Invdate BETWEEN '2013-04-01'
        AND '2013-04-30'
    GROUP BY a.Ac_code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:05:13.417

为什么要写这么**复杂** `Query`的，试试这个：

```
SELECT sum(b.Amount)
FROM INVHDR a 
INNER JOIN INVDTLS b
ON a.Invno = b.Invno 
WHERE a.Ac_code='2' 
AND a.Invdate BETWEEN '2013-04-01' AND '2013-04-30' 
AND b.Prod_desc='Argon'
--Group by b.Prod_desc,a.Invno, a.Ac_code 
```

这是**[SQL 小提琴](http://www.sqlfiddle.com/#!2/86377/10)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T12:04:45.270

检查[http://www.sqlfiddle.com/#!2/86377/8](http://www.sqlfiddle.com/#!2/86377/8) 谢谢@Luv

```
SELECT 
    a.Invno, a.Ac_code, b.Prod_desc, SUM(b.Amount) AS Amount
FROM INVHDR a 
INNER JOIN INVDTLS b ON a.Invno = b.Invno 
WHERE 
    a.Ac_code = 2 -- a.Ac_code='2'
    AND a.Invdate BETWEEN '2013-04-01' AND '2013-04-30' 
    AND b.Prod_desc='Argon'
group by a.Invno, a.Ac_code, b.Prod_desc 
```

# java - JFreeChart 堆积条形图

> ID：16168815
> 
> 赞同：1
> 
> 时间：2013-04-23T11:59:36.507
> 
> 标签：java, swing, jfreechart

最近我尝试使用 JFreeChart 库。

我可以在互联网上找到一些演示。堆叠条形图的演示显示以下内容（不包括红色圆形标记）。 ![在此处输入图像描述](https://i.stack.imgur.com/hn7ok.png)

有没有办法可以修改用红色标记的标签？是否可以创建多标签条，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/gmIwX.jpg)

# python - 在 Pypi 中发布代码

> ID：16168816
> 
> 赞同：0
> 
> 时间：2013-04-23T11:59:38.183
> 
> 标签：python, python-2.7, python-module, pypi

我想将我的包设置为 Pypi。当我跑

```
python setup.py sdist bdist_wininst upload 
```

出现这个错误：

```
 File "setup.py", line 8, in <module>
    long_description=open('README.txt').read(),
  File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.7/distutils/command/bdist_wininst.py", line 189, in run
    self.create_exe(arcname, fullname, self.bitmap)
  File "/usr/lib/python2.7/distutils/command/bdist_wininst.py", line 271, in create_exe
    file.write(self.get_exe_bytes())
  File "/usr/lib/python2.7/distutils/command/bdist_wininst.py", line 366, in get_exe_bytes
    raise DistutilsFileError, str(msg) + ', %s not included in the Debian packages.' % filename
NameError: global name 'DistutilsFileError' is not defined 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:38:52.290

似乎存在与您在启动板上的体验相关的错误。看[这里](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/1081155)。

您可以通过尝试解决方案来解决问题吗？

取自页面：

> 可以通过在导入部分（bdist_wininst.py 文件的第 17 行）添加 DistutilsFileError 来纠正此错误

# ios - 在 Xcode 中使用 Google Maps SDK for iOS 时如何解决错误“线程 1：SIGABRT 错误”

> ID：16168818
> 
> 赞同：2
> 
> 时间：2013-04-23T11:59:41.907
> 
> 标签：ios, xcode, google-maps, google-maps-sdk-ios

我按照[Google Maps SDK for iOS - Getting started](https://developers.google.com/maps/documentation/ios/start#add_a_map)链接中提到的步骤进行操作。以下是我创建的文件

**AppDelegate.m**

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    [GMSServices provideAPIKey:@"AIzaXXXXXXXXXXeGuCyxChdTECXXXXXXXXXXV9E"];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
}
//Other functions are there as it is. 
```

**视图控制器.m**

```
#import "ViewController.h"
#import <GoogleMaps/GoogleMaps.h>

@interface ViewController ()

@end

@implementation ViewController 
{
    GMSMapView *mapView_;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)loadView 
{
    // Create a GMSCameraPosition that tells the map to display the
    // coordinate -33.86,151.20 at zoom level 6.
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.86
                                                        longitude:151.20
                                                             zoom:6];
    mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
    mapView_.myLocationEnabled = YES;
    self.view = mapView_;

    // Creates a marker in the center of the map.
    GMSMarker *marker = [[GMSMarker alloc] init];
    marker.position = CLLocationCoordinate2DMake(-33.86, 151.20);
    marker.title = @"Sydney";
    marker.snippet = @"Australia";
    marker.map = mapView_;
}

@end 
```

**主文件**

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool 
    {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        //Error is displayed in the above line.
    }
} 
```

**以下是错误的详细信息**

```
2013-04-23 17:02:37.482 GMap[8146:12e03] +[GMSCameraPosition cameraWithLatitude:longitude:zoom:]: unrecognized selector sent to class 0x25ad5c
2013-04-23 17:02:37.483 GMap[8146:12e03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[GMSCameraPosition cameraWithLatitude:longitude:zoom:]: unrecognized selector sent to class 0x25ad5c'
*** First throw call stack:
(0x2418012 0x223de7e 0x24a32ad 0x2407bbc 0x240794e 0x2bb4 0x1262ff8 0x1263232 0x11b23d5 0x11b276f 0x11b2905 0x11bb917 0x27ad 0x117f157 0x117f747 0x118094b 0x1191cb5 0x1192beb 0x1184698 0x3133df9 0x3133ad0 0x238dbf5 0x238d962 0x23bebb6 0x23bdf44 0x23bde1b 0x118017a 0x1181ffc 0x24bd 0x23e5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:07:53.567

你的错误是：

> '+[GMSCameraPosition cameraWithLatitude:longitude:zoom:]: 无法识别的选择器发送到类 0x25ad5c'

根据似乎已定义的 SDK。那是怎么定义的？如果它是一个类别，您可能需要使用标志 -ObjC 和 -all_load 链接 SDK。

# mysql - 将 6 个项目加在一起得出总数，但不要将它们的值加在一起

> ID：16168820
> 
> 赞同：0
> 
> 时间：2013-04-23T11:59:47.267
> 
> 标签：mysql, math, count, sum

有点新手，对你来说可能是一个非常基本的问题，但让我发疯。

我有一个mysql表。我有一个记录，它有一个记录 ID，还有六个包含照片名称的其他字段。

所以，Record_id，照片1，照片2，照片3，照片4，照片5，照片6

我希望得到最终结果，其中有一个名为“TOTAL”的列，它显示了其中有多少条记录中有照片的总数。那么，记录 1 可能总共有 5 张照片，记录 2 可能有 3 张照片，记录 3 可能总共没有该记录的记录，等等？

现在上传到字段的一些照片名称可能包含数字，即photo244.jpg或pic3993.jpg等 - 所以我不想将这些数字加在一起，我只是在寻找字段是否有名称在其中等，这将被计为 1 以添加到总数中。所以页面上的最终结果是记录 13（例如）总共有 4 张照片等 - 如果没有很好的解释，对不起！

它可能与 SUM 或 COUNT 有关，但花了很长时间试图获得组合或正确的键/语法！任何人都可以通过给出 mysql select 语句的示例来帮助 - 将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:04:26.937

我假设如果没有照片，那么字段 photoX 为空或为空。
因此，如果字段为空或为空，则使用[CASE](http://dev.mysql.com/doc/refman/5.0/en/case.html)输出 0，否则使用 1。

```
SELECT Record_id
     , 
          CASE WHEN (photo1 IS NULL OR photo1 = '') THEN 0 ELSE 1 END
        + CASE WHEN (photo2 IS NULL OR photo2 = '') THEN 0 ELSE 1 END
        + CASE WHEN (photo3 IS NULL OR photo3 = '') THEN 0 ELSE 1 END
        + CASE WHEN (photo4 IS NULL OR photo4 = '') THEN 0 ELSE 1 END
        + CASE WHEN (photo5 IS NULL OR photo5 = '') THEN 0 ELSE 1 END
        + CASE WHEN (photo6 IS NULL OR photo6 = '') THEN 0 ELSE 1 END
      AS Total
FROM myTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:09:50.950

像这样的东西会给你一个计数`Photo1`，`Photo2`等：

```
SELECT
  SUM(CASE WHEN photo1 IS NOT NULL THEN 1 END) AS Photo1Count,
  SUM(CASE WHEN photo2 IS NOT NULL THEN 1 END) AS Photo2Count,
  SUM(CASE WHEN photo3 IS NOT NULL THEN 1 END) AS Photo3Count,
  SUM(CASE WHEN photo4 IS NOT NULL THEN 1 END) AS Photo4Count,
  SUM(CASE WHEN photo5 IS NOT NULL THEN 1 END) AS Photo5Count
FROM MyTable 
```

这样的事情将计算至少有一张照片的行数：

```
SELECT SUM (
  CASE WHEN
    photo1 IS NOT NULL OR
    photo2 IS NOT NULL OR
    photo3 IS NOT NULL OR
    photo4 IS NOT NULL OR
    photo5 IS NOT NULL THEN 1 END)
FROM MyTable 
```

*请注意，这些查询是针对总计的。*他们不按行显示活动。如果需要逐行活动，请尝试 Scorpi0 或 Michael Sivolobov 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:13:43.307

这将是最好的查询：

```
SELECT
    Record_id,
    (6 - IFNULL(photo1,1) - IFNULL(photo2,1) - IFNULL(photo3,1) - IFNULL(photo4,1) - IFNULL(photo5,1) - IFNULL(photo6,1)) AS TOTAL
FROM
    table 
```

# jquery - 如何使用jQuery触发提交表单

> ID：16168821
> 
> 赞同：2
> 
> 时间：2013-04-23T11:59:49.917
> 
> 标签：jquery, google-analytics, event-tracking, analytics.js

我正在尝试通过 Google Universal Analytics 跟踪对博客文章的评论。我希望标签获取博客文章的名称，因此我使用 jQuery 来触发事件。

到目前为止，我有以下代码（它基于我用于其他网站的代码并且工作正常） - 显然我必须忽略一些东西，因为它不起作用：

```
$(document).ready(function(){
   $('#commentform').submit(function(){
     var postname = $('h2.post-title').text();
     ga('send', 'event', 'Engagement', 'Comment', postname, 5);

   });
}); 
```

有什么想法吗？

（对不起，我会链接到博客，但它还没有上线）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:29:16.260

```
$(document).ready(function(){
$('#commentform').submit(function(){
var postname = $('h2.post-title').text();
ga('send', 'event', 'Engagement', 'Comment', postname, 5);
});
}); 
```

首先。此代码将`h2`标签的文本分配给`post-title`在`document`. 获取帖子标题的一种更可靠的方法是 id。

其次，它可能不起作用，因为表单是在 Google Analitycs 代码触发之前提交的。因此，您应该停止默认行为并在 analitycs 完成发送数据后提交表单。（参见：[https](https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback) ://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback ）

```
$( document ).ready( function() {
    $( document ).on( 'submit', 'form#commentform', function( e ) {
        var postname = $( '#post-title' ).text();
        ga( 'send', {
            'hitType': 'event',
            'eventCategory': 'Engagement',
            'eventAction': 'Comment',
            'eventLabel': postname,
            'eventValue': 5,
            'hitCallback': function() {
                //now you can submit the form
                //$('#commentform').off('submit').trigger('submit');
                $('#commentform').off('submit'); //unbind the event
                $('#commentform')[0].submit(); //fire DOM element event, not jQuery event
            }
        });
        return false;
    });
}); 
```

**编辑：** 我刚刚意识到来自的代码`hitCallback`可能不起作用。修改后的版本应该调用 DOM 元素的事件，结果是 - 发送表单。

**Edit2：** 更正了事件绑定，以防触发 document.ready() 时表单不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:04:35.833

如果不查看实际页面很难判断，但浏览器可能会在 ga 的网络调用之前重定向到表单的提交。您需要一种方法来等待 ga 完成，然后完成提交表单。

# c# - 在将文件移动到另一台机器之前如何检查用户的权限？

> ID：16168825
> 
> 赞同：1
> 
> 时间：2013-04-23T12:00:13.873
> 
> 标签：c#, permissions, io

我想将文件移动/复制到另一台机器上的文件夹中，并且我想检查用户是否有足够的权限来执行此操作。我该怎么做，我从哪里开始？在 C# 中甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:03:14.717

有`System.Security.FileIOPermission`-class 公开了检查权限的方法。

来自 MSDN 的示例

```
FileIOPermission f2 = new FileIOPermission(FileIOPermissionAccess.Read, "C:\\test_r");
f2.AddPathList(FileIOPermissionAccess.Write | FileIOPermissionAccess.Read, "C:\\example\\out.txt");
try
{
    f2.Demand();
}
catch (SecurityException s)
{
    Console.WriteLine(s.Message);
} 
```

您将文件/目录传递给构造函数并使用`AddPathList`. 然后检查是否可以使用`Demand()`-method 授予访问权限。如果调用者的权限不足，`SecurityException`则抛出 a。

见[这里](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:03:30.797

检查关于代码项目的文章，这是关于你需要的东西

[给定文件的访问权限](http://www.codeproject.com/Articles/14402/Testing-File-Access-Rights-in-NET-2-0)

希望能帮助到你。

# android - 为什么 TextAppearance 和 TextAppearance.Small 的文本大小相同？

> ID：16168833
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:00:39.427
> 
> 标签：android

我正在开发一个 android 应用程序，我相信使用官方文本样式可以为用户提供跨各种平台和设备的最佳体验。但我发现它`TextAppearance.Large`的文本大小更大，但大小`TextAppearance`相同`TextAppearance.Small`但颜色不同，我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:13:08.727

它们**的**大小不一样。如果您查看`styles.xml`in ，`sdk\platforms\android-4.2\data\res\values\`您将看到它们是如何定义的。

至于为什么它们是相同的文本大小（***它们不是***），你会想问谷歌。;-)

```
<style name="TextAppearance">
    <item name="android:textColor">?textColorPrimary</item>
    <item name="android:textColorHighlight">?textColorHighlight</item>
    <item name="android:textColorHint">?textColorHint</item>
    <item name="android:textColorLink">?textColorLink</item>
    <item name="android:textSize">16sp</item>
    <item name="android:textStyle">normal</item>
</style>

<style name="TextAppearance.Small">
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">?textColorSecondary</item>
</style> 
```

> 我相信使用官方文本样式可以给用户在各种平台和设备上的最佳体验

您能做的最好的事情就是在`styles.xml`. 在我看来，这比仅仅依靠默认主题要好。他们确实从制造商到制造商。您的想法仅适用于使用现有 Android 操作系统的设备。

# python - 正则表达式仅匹配列表中的几个元素

> ID：16168836
> 
> 赞同：0
> 
> 时间：2013-04-23T12:01:06.027
> 
> 标签：python, regex, python-2.6

这是一个python代码片段：

```
import re

VARS='Variables: "OUTPUTFOLDER=installers","SETUP_ORDER=Product 4,Product 4  Library","SUB_CONTENTS=Product 4 Library","SUB_CONTENT_SIZES=9364256","SUB_CONTENT_GROUPS=Product 4 Library","SUB_CONTENT_DESCRIPTIONS=","SUB_CONTENT_GROUP_DESCRIPTIONS=","SUB_DISCS=Product 4,Product Disc",SUB_FILENAMES='
comp = re.findall(r'\w+=".*?"', VARS)

for var in comp:
    print var 
```

这是当前的输出：

```
SUB_CONTENT_DESCRIPTIONS="," 
SUB_CONTENT_GROUP_DESCRIPTIONS="," 
```

但是我希望输出提取所有元素，所以它看起来像这样：

```
"OUTPUTFOLDER=installers"
"SETUP_ORDER=Product 4, Product 4 Library"
"SUB_CONTENTS=Product 4"
"SUB_CONTENT_SIZES=9364256"
... 
```

我的正则表达式模式有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:15:17.690

你可以试试这个：

```
 comp = re.findall(r'"(.*?)"', VARS)
 print [x for x in comp] 
```

粗略地说，您以非贪婪的方式得到双引号内的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:06:32.940

使用这个正则表达式。

```
comp = re.findall(r'"\w+=.*?"', VARS) 
```

结果：

```
>>> 
"OUTPUTFOLDER=installers"
"SETUP_ORDER=Product 4,Product 4  Library"
"SUB_CONTENTS=Product 4 Library"
"SUB_CONTENT_SIZES=9364256"
"SUB_CONTENT_GROUPS=Product 4 Library"
"SUB_CONTENT_DESCRIPTIONS="
"SUB_CONTENT_GROUP_DESCRIPTIONS="
"SUB_DISCS=Product 4,Product Disc" 
```

* * *

在我看来，您可以以更聪明的方式做到这一点，并将您的“vars”存储在字典中。

```
d = dict(var.strip('"').split('=') for var in re.findall(r'"\w+=.*?"', VARS)) 
```

要查看字典：

```
for k, v in d.items():
    print k, '=', (v if v else '<NONE>') 
```

结果：

```
>>> 
SETUP_ORDER = Product 4,Product 4  Library
SUB_CONTENT_DESCRIPTIONS = <NONE>
SUB_DISCS = Product 4,Product Disc
SUB_CONTENT_GROUPS = Product 4 Library
SUB_CONTENT_SIZES = 9364256
SUB_CONTENT_GROUP_DESCRIPTIONS = <NONE>
OUTPUTFOLDER = installers
SUB_CONTENTS = Product 4 Library 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:12:07.770

使用这个正则表达式：

```
r'"\w+?=.*?"' 
```

我的和你的正则表达式之间的区别，你自己看看：

```
r'"\w+?=.*?"' # mine
r'\w+=".*?"' # your's 
```

只有一个`"`。

输出：

```
>>> regex = re.compile(r'"\w+?=.*?"')
>>> regex.findall(string)
[u'"OUTPUTFOLDER=installers"', u'"SETUP_ORDER=Product 4,Product 4 Library"',  
 u'"SUB_CONTENTS=Product 4 Library"', u'"SUB_CONTENT_SIZES=9364256"',
 u'"SUB_CONTENT_GROUPS=Product 4 Library"', u'"SUB_DISCS=Product 4,Product Disc"'] 
```

# java - 如何使用 apache.commons 获取属性列表

> ID：16168841
> 
> 赞同：12
> 
> 时间：2013-04-23T12:01:15.320
> 
> 标签：java, apache-commons-config

我需要获取 .properties 文件中的属性列表。例如，如果有以下 .properties 文件：

```
users.admin.keywords = admin
users.admin.regexps = test-5,test-7
users.admin.rules = users.admin.keywords,users.admin.regexps

users.root.keywords = newKeyWordq
users.root.regexps = asdasd,\u0432[\u044By][\u0448s]\u043B\u0438\u0442[\u0435e]
users.root.rules = users.root.keywords,users.root.regexps,rules.creditcards

users.guest.keywords = guest
users.guest.regexps = *
users.guest.rules = users.guest.keywords,users.guest.regexps,rules.creditcards

rules.cc.creditcards = 1234123412341234,11231123123123123,ca
rules.common.regexps = pas
rules.common.keywords = asd 
```

结果，我想得到一个 ArrayList ，它由以下字段的名称组成： `users.admin.keywords, users.admin.regexps, users.admin.rules`等等。正如您所注意到的，我需要使用 apache.commons.config 来执行此操作

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T12:12:29.483

您可以使用如下：

```
Configuration configuration = new PropertiesConfiguration(filename);
Iterator<String> keys = configuration.getKeys();
List<String> keyList = new ArrayList<String>();
while(keys.hasNext()) {
    keyList.add(keys.next());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T12:11:18.060

```
Properties prop = new Properties();
prop.load(new FileInputStream("prop.properties"));
Set<Map.Entry<Object, Object>> set = prop.entrySet();
List<Object> list = new ArrayList<>();
for (Map.Entry<Object, Object> entry : prop.entrySet())
{
   list.add(entry.getKey());
}
System.out.println(list); 
```

使用 Apache Commons 版本 <2.1：

```
Configuration config = new PropertiesConfiguration("prop.properties");
List<String> list = new ArrayList<>();
Iterator<String> keys = config.getKeys();
while(keys.hasNext()){
    String key = (String) keys.next();
    list.add(key);
} 
```

为 Apache Commons 版本 2.1 编辑：

```
List<String> list = new ArrayList<>();
Parameters params = new Parameters();
FileBasedConfigurationBuilder<FileBasedConfiguration> builder =
    new FileBasedConfigurationBuilder<FileBasedConfiguration>
    (PropertiesConfiguration.class)
    .configure(params.properties()
    .setFileName("prop.properties"));
try
{
    Configuration config = builder.getConfiguration();
    Iterator<String> keys = config.getKeys();
    while(keys.hasNext()){
      String key = (String) keys.next();
      list.add(key);
    }
}
catch(ConfigurationException cex)
{
    // handle exception here
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T12:05:03.383

您可以使用[getKeys()](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/AbstractFileConfiguration.html#getKeys%28%29)。

`Iterator<String>`它在属性文件中的所有键上返回一个。

# asp.net - 连接到 sql server 2008 的 asp.net

> ID：16168842
> 
> 赞同：0
> 
> 时间：2013-04-23T12:01:19.287
> 
> 标签：asp.net, sql-server-2008, iis

我是使用 asp.net 语言的新手，我尝试编辑已经连接到 iis 服务器上数据库的代码 asp.net

我面临的问题是：

我可以检索该数据库上已经存在的所有表，但是当我添加新表时，我无法在 asp.net 上检索它“未找到”

当我添加新列时出现同样的问题，所有列都已存在，我可以检索它们，除了我添加它们的列

但是当我编辑记录时，记录在 asp.net 上更新，所以当我创建任何东西或更改列名时出现问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:23:40.290

您使用的是哪种数据访问技术？ADO.NET Entity Framework（一个带有`.edmx`文件）还是 ADO.NET（一个带有`.xsd`）？

如果您使用其中之一，您还需要在这些图表中刷新或添加表格。否则，请在此处获取您的代码，以便图片更清晰。

# c# - 根据最新条目获取所有项目的列表

> ID：16168844
> 
> 赞同：1
> 
> 时间：2013-04-23T12:01:27.493
> 
> 标签：c#, asp.net-mvc

我有这样的数据集合：

```
public class PriceList
{
    [Display(Name = "Price List ID")]
    public int m_ID { get; set; }

    [Display(Name = "Price List Provider")]
    public int m_Provider { get; set; }

    [Display(Name = "Current Book")]
    public int m_BookID { get; set; }

    public BookInfo m_Book { get; set; }

    [Display(Name = "Price")]
    public decimal m_Price { get; set; }

    [Display(Name = "Date of price list")]
    public DateTime m_PriceListDate { get; set; }
} 
```

价目表是当我在我的 mvc-app 中获得特定项目的价格时创建的价目表对象。它可以在同一天、一周、一个月或一年内多次创建。

所以现在一本书可以成为一个类别的一部分，例如“漫画书”。我的问题是我正在尝试创建一个方法，它只会给我最新的条目，所以只有最近的日期，基于这个集合的所有项目。

这是方法：

```
 public List<PriceList> ListLatestPriceListByBookCategoryID(int _id)
    {
        List<PriceList> listToReturn = new List<PriceList>();

        var priceListQry = from pl in m_Db.PriceList
                           where pl.Book.BookCatID == _id
                           // INSERT CODE HERE???
                           select pl;

        if (!priceListQry.Any())
        {
            return null;
        }

        listToReturn.AddRange(priceListQry);

        return listToReturn;
    } 
```

基本上，我想创建一个只返回所需数据的查询。而这些所需的数据仅包含 id 找到的每本书的最新条目。我可以有很多类别和很多书。

谁能帮我想出一个好的方法来做到这一点？到目前为止，我所考虑的只是一个庞大的方法，它将遍历整个列表以过滤所有不必要的数据，但我想要更有效的方法，因为我最终将拥有大量数据，这将证明需要很多时间。

*** 编辑 ***

到目前为止，我已经添加了这行代码：

```
var result = m_Db.PriceList.GroupBy(r => r.BookID).Select(r => new
                {
                    BookID = r.OrderByDescending(t => t.PriceListDate).First().BookID,
                    PriceListDate = r.OrderByDescending(t => t.PriceListDate).First().PriceListDate
                }); 
```

我对这行代码没有错误，这对我来说很有意义。但是，该`listToReturn.AddRange(result)`行现在抛出此错误：

`Error 13 Argument 1: cannot convert from 'System.Linq.IQueryable<AnonymousType#1>' to 'System.Collections.Generic.IEnumerable<MyApp.Models.Entities.PriceList>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:11:00.330

你可以试试：

```
var result = m_Db.PriceList.GroupBy(r => r.m_BookID)
                 .Select(r=> new 
                 { 
                     BookID = r.OrderByDescending(t=> t.m_PriceListDate).First().m_BookID,
                     Date = r.OrderByDescending(t=> t.m_PriceListDate).First().m_PriceListDate,
                 }); 
```

*（不太确定这会有多少效率）*

# javascript - 要求 JS 仍然没有按顺序加载 shim 内容

> ID：16168845
> 
> 赞同：1
> 
> 时间：2013-04-23T12:01:28.313
> 
> 标签：javascript, requirejs, shim

我可能在这里做了一些明显错误的事情，这是我拥有的代码，我一直收到一个错误，说**_Packery 未定义**，我认为这是因为它是在 jQuery 之前加载的。

我查看了文档，但我不明白为什么它不能正常工作。

```
require.config({
    urlArgs: "ts="+new Date().getTime(), // disable caching - remove in production
    paths: {
        jquery: [
            "http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min",
            "libs/jquery-191"
        ],
        packery: [
            "plugins/packery"
        ]
    },
    shim: {
        'packery': ['jquery']
    }
});

require(['jquery', 'packery'], function($) {

    var container = $('#container');
    container.packery({
        itemSelector: '.item',
        gutter: 10
    });

}); 
```

任何让我了解我做错了什么的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T03:18:33.337

Packery 目前不支持 AMD / Require JS。请参阅[https://github.com/metafizzy/packery/issues/20](https://github.com/metafizzy/packery/issues/20) 但是，此问题正在开发中，将来会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:08:56.587

我认为你应该像这样定义一个垫片：

```
 shim: {
        'packery': {
            deps: ['jquery'],
        }, ... 
```

然后尝试像这样导出packery ...

```
require(['jquery', 'packery'], function($, packery) {

    var container = $('#container');
    container.packery({
        itemSelector: '.item',
        gutter: 10
    });

}); 
```

来自官方文档：**使用 Packery 不需要 jQuery。但是如果你喜欢 jQuery，Packery 可以将它作为一个 jQuery 插件使用。**

# javascript - 需要正则表达式来验证时间格式

> ID：16168849
> 
> 赞同：0
> 
> 时间：2013-04-23T12:01:37.277
> 
> 标签：javascript, regex

我有一个包含 date 和 time 的 datetime 文本框。我想验证时间。对于我验证的日期。例如，日期时间值为 04/23/2013 05:26 pm；

我需要一个正则表达式，它可以验证格式为 00:00:00 的时间。都是数字，不会输入任何特殊字符或数字以外的字符。我只想验证 dd:dd:dd 都是 2 位数字。例如，我可以输入 10:10:10 和 01:02。

我已经尝试过这样的js方式。我对正则表达式一无所知。所以我想要建议。

```
function ValidateDate()
{
  //getting the value from textbox
  var dateVal=document.getElementById('txtDateTime').value;
  //after one space there is time..as i am using a datepicker and timepicker format
  var time=dateVal.split(' ')[1];   
  var isValidTime=CheckTime(time);
}

function CheckTime(time)
{
var timePart=time.split(":");
var hour = timePart[0];
var minute = timePart[1];
var second = timePart[2]; 

if((parseInt(hour,10)<0) || (parseInt(hour,10)>59))
{   
  return false;
}

if((parseInt(minute)>59) || (parseInt(minute)<0))
  {      
     return false;     

  }

 if((parseInt(second)<0) || (parseInt(second)>59))
  {
      return false;
  }  

  return true;
} 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:14:31.963

一个简单的正则表达式`/^([0-1][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$/g`将起作用。

```
10:00:00 - OK
01:00:00 - OK
60:00:00 - Fail
30       - Fail
30:00    - Fail
23:59    - OK
24:00    - Fail
23:60:60 - Fail
23:59:59 - OK 
```

**正则表达式尸检：**

*   `^`- 这是句子必须开始的地方
*   `([0-1][0-9]|2[0-3])`
    *   `[0-1][0-9]`- 数字后跟介于和之间`0`的任何数字`1``0``9`
    *   `|`- 或者
    *   `2[0-3]`- 数字`2`后跟和之间的任何`0`数字`3`
*   `:`- 文字：字符
*   `([0-5][0-9])`- 从`0`到的数字`5`后跟和之间的任何`0`数字`9`
*   `(?::([0-5][0-9]))?`
    *   `?:`- 非捕获组
    *   `:`- 文字：字符
    *   `([0-5][0-9])`- 从`0`到的数字`5`后跟和之间的任何`0`数字`9`
    *   `?`- 表示前一个语句应该存在 0 次或 1 次（因此不必*存在*）。
*   `$`- 这是句子必须结束的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:12:24.347

以下正则表达式应该可以工作：`/^\d{2}:\d{2}(?::\d{2})?$/`.

# ios - 以编程方式更改子视图控制器

> ID：16168856
> 
> 赞同：1
> 
> 时间：2013-04-23T12:01:52.967
> 
> 标签：ios, objective-c, cocoa-touch, uicollectionview

我有一个基于页面的 3 页应用程序，在每个页面上我都有`UIView`一个子视图，这`UIView`是从`UIViewController`. 在最后一页，我有一个`UICollectionView`包含不同的项目，**当我触摸一个`UICollectionCell`我想更改子视图时。**

这是我的故事板：

![在此处输入图像描述](https://i.stack.imgur.com/rNwWf.png)

Orange`UIView`加载了来自`UIViewController`s 的视图（带有 xib 文件）

并且`viewWillAppear:`在`DataViewController.m`：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.dataLabel.text = [self.dataObject description];

    if([self.dataLabel.text isEqualToString:@"View1"])
        [mainView addSubview: view1.view];
    else if([self.dataLabel.text isEqualToString:@"View2"])
        [mainView addSubview: view2.view];
    else if([self.dataLabel.text isEqualToString:@"View3"]){
        [mainView addSubview: view3.view];
    }
} 
```

以及如何处理触摸的方法`UICollectionCell`：

```
- (void)collectionView:(UICollectionView *)collectionView
            didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
   // Change the view
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:03:46.567

您可以将 UICollectionView 上的事件委托给 DataViewController 以更轻松地处理这些事件。

* * *

1-`UICollectionView`用标签识别您的身份以轻松检索它：

```
//Supposed that your UICollectionView has been declared as an IBOutlet in your .h
yourCollectionView.tag = 1; 
```

2-添加`<UICollectionViewDelegate>`到您`DataViewController.h`的处理`UICollectionView`事件，

3-在您将视图的`UICollectionView` 委托`DataViewController`添加到之后将其设置为`mainView`：

```
//Replace 1 with the NSInteger you chose
[[[mainView subviews] lastObject] viewWithTag:1] setDelegate:self]; 
```

4-处理`didSelectItemAtIndexPath`你`DataViewController`的改变你的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:03:49.953

像这样尝试它可以帮助您将子视图带到您想要的视图，

```
 [self.view bringSubviewToFront:view]; 
```

# html - CSS3-PIE：即8个奇怪的黑点问题

> ID：16168857
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:01:58.180
> 
> 标签：html, css, internet-explorer-8, css3pie

如果您查看以下链接：`http://78.109.168.22/tv`- 您会注意到在 IE8 中徽标标题的中间有一个黑色的小斑点区域。我不知道它可能是什么！

有没有人有任何想法？我很想听听他们的声音！这让我疯狂。

我在说什么的截图 - [http://i.imgur.com/AaZMHdr.png](http://i.imgur.com/AaZMHdr.png)

解决方案是 Drupal 跳过链接 ID。我刚刚在 IE8 中将这个 id 显示为 none，现在它已经解决了。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:22:17.993

这些代码行产生了问题

```
<div id="skip-link">
        <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
      </div> 
```

# css - 使用CSS锐边到圆形边框？

> ID：16168860
> 
> 赞同：4
> 
> 时间：2013-04-23T12:02:05.733
> 
> 标签：css

我正在尝试创建一个带有圆形边框的 div 元素。我知道 的使用`border-radius`，但我注意到使用这个属性只会弯曲角落，比如右上角、左上角等，所以我想知道是否有一些属性可以弯曲 div 元素的侧面, 类似于`border-radius`top, down, left 和 right。

例如，一个顶部、底部和左侧是直的，但右侧是圆形的 div。我想创建右侧，使其顶部比底部更圆。

我的目标是创建一个右侧圆形的 div 元素，不会影响顶部和底部。我的意思是右侧的曲线应在到达顶部或底部后立即停止。（使顶部和底部保持笔直而不是略微弯曲）。

有没有办法使用 css 获得这种效果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T12:09:50.290

您可以通过斜线表示法指定[水平和垂直边界半径](https://developer.mozilla.org/en-US/docs/CSS/border-radius)来实现这样的效果......

```
div{
    width:100px;height:100px;
    border:3px solid #bada55;
    border-radius:10px/50%;
}
```

```
<div></div>
```

这将为所有边设置 50% 的垂直边框半径和 10 像素的水平边框半径。您可以单独为每个角定义此值（因此您最多有八个值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:09:58.730

您仍然可以使用`border-radius`它。你只需要对你给它的参数更有创意。

`border-radius`允许您为每个角指定水平半径和垂直半径。如果您愿意，使用这些可以让您灵活地在元素的整个一侧拉伸曲线效果。

一个制作奇形盒子的随机示例：

```
.myElement { border-radius: 24% 41% 31% 9%/44% 6% 32% 40%; } 
```

[它在 jsFiddle](http://jsfiddle.net/ReuEz/)上。

我不会给你很多详细的例子，我会把你链接到这个网站，它展示了 的灵活性`border-radius`，并允许你设计你想要的形状：[http ://www.webtutorialplus.com/border-radius.aspx](http://www.webtutorialplus.com/border-radius.aspx)

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:11:43.597

您可以使用`/`定义水平和垂直半径的效果。10px 是水平的，100px 是垂直的

```
div
{
    height: 200px;
    width: 200px;
    border: 2px solid #000;
    border-radius: 10px/100px;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
} 
```

将边框半径设置为`10px/100px`这会使侧面略微弯曲。将左角设置为 0，您只有一侧是弯曲的 :)

[http://jsfiddle.net/UWbKf/](http://jsfiddle.net/UWbKf/)

# c# - LINQ - 从数据库中选择并比较两个列表

> ID：16168861
> 
> 赞同：1
> 
> 时间：2013-04-23T12:02:11.153
> 
> 标签：c#, linq

我是 linq 的新手，我正在编写一个我相信可以改进的过程。

为了简单起见：
我得到一个对象列表。
我签入一个数据库表，哪个对象在数据库中有一行。
我返回一个带有附加布尔值存在/不存在的对象列表。

我有以下简单的 POCO

```
public class Project  
{
   public Guid? Id {get; set;}
   public string name {get; set;}
} 
```

请注意，我并不总是有一个 id，因此我应该跳过这个对象。
（奇怪，但这只是非常接近我在现实生活中的要求）

这是我的代码 - 需要改进：

```
// Get List OF Project Guids
List<Project> ProjectList = GetProjects()
IEnumerable<Guid?> projectsIDs = from package in packages select package.Key;
List<Guid?> prjGuidsList = projectsIDs.ToList();

// Sends the list of Guids and return only the one that exists in the db
// will be implemented with select.. where.. in..
List<Guid?> dbProjects = FilterSharedVersions(prjGuidsList);

// create a new object that will contain the true false value
List<ProjectsToken> tokens = packages.Select(subject => new ProjectsToken
 {
  Id = subject.id
  MetaKey = subject.Name,
  exists = dbProjects.contains(subjecy.id)
 }    
).ToList();

return tokens; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:13:13.377

List 类的[Contains](http://msdn.microsoft.com/library/vstudio/bhkz42b3.aspx)方法在 O(n) 中的性能很差。相反，您需要构建一个 HashSet，然后[Contains](http://msdn.microsoft.com/en-us/library/bb356440.aspx)方法将在 O(1) 中执行。

```
var dbProjects = new HashSet<Guid?>(FilterSharedVersions(prjGuidsList));
var tokens = packages.Select(subject => new ProjectsToken
 {
     Id = subject.id
     MetaKey = subject.Name,
     exists = dbProjects.Contains(subjecy.id)
 }    
).ToList(); 
```

# python - 简单尝试存储 json 后出现错误

> ID：16168863
> 
> 赞同：3
> 
> 时间：2013-04-23T12:02:11.820
> 
> 标签：python, json, python-3.x

在python 3,3

```
import  json

peinaw = {"hi":4,"pordi":6}
json_data = open('data.json')
json.dump(peinaw, json_data)
json_data.close() 
```

我明白了

```
File "C:\Python33\lib\json\__init__.py", line 179, in dump
fp.write(chunk)
io.UnsupportedOperation: not writable 
```

在 2,7 中尝试了同样的事情并且它有效。我在 3,3 中有不同的方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:04:30.077

```
>>> import  json
>>> peinaw = {"hi":4,"pordi":6}
>>> with open('data.json', 'w') as json_data: # 'w' to open for writing
        json.dump(peinaw, json_data) 
```

我在这里使用了一个语句，其中文件在块的末尾`with`自动d 。`.close()``with`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:18:23.173

您没有打开文件进行写入。该文件以一种`read`模式打开。验证这样做：

```
json_data = open('data.json')
print (json_data) # should work with 2.x and 3.x 
```

要解决问题，只需在`write`模式下打开文件。

```
json_data = open('data.json', 'w') 
```

此外，您应该`with`在处理文件时使用该语句。

```
with open('data.json', 'w') as json_data:
   json.dump(peinaw, json_data) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:03:41.827

您需要打开文件进行写入，使用 'w' 模式参数：

```
json_data = open('data.json', 'w') 
```

# reporting-services - 如何在命令行上使用 Visual Studio 2012 构建报表项目？

> ID：16168876
> 
> 赞同：3
> 
> 时间：2013-04-23T12:02:50.260
> 
> 标签：reporting-services, visual-studio-2012

我有一个解决方案，其中有几个“.rptproj”项目在我运行 IDE 时构建良好，但是当我尝试`devenv`在命令行上运行时，每个报告项目都会出现以下错误：

> 错误：灾难性故障（来自 HRESULT 的异常：0x8000FFFF (E_UNEXPECTED)）

快速搜索显示有几个人遇到了同样的问题，但还没有解决方案。我安装了适用于 Visual Studio 2012 的商业智能，这就是我们能够从 IDE 构建的方式。

注意：有针对此问题的[Microsoft Connect 票证。](https://connect.microsoft.com/SQLServer/feedback/details/781872/fail-to-build-ssis-ssas-projects-via-vs2012-command-line-devenv-exe-with-ssdt-bi-tool-installed#tabs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:16:17.420

这是我出于继续前进的需要而提出的一种解决方法。这不是很好，但它让我得到了我在 CI 中需要的东西。

> 为了解决这个问题，我从我的正常解决方案配置中排除了我的所有报表项目，并添加了一个仅构建报表项目的新 ReportOnly 配置。然后在我的 CI 服务器上，我针对 Visual Studio 2012 构建非 Report 配置，并针对 Visual Studio 2010 构建 ReportOnly 配置。

可以在[Microsoft Connect 票证](https://connect.microsoft.com/SQLServer/feedback/details/781872/fail-to-build-ssis-ssas-projects-via-vs2012-command-line-devenv-exe-with-ssdt-bi-tool-installed#tabs)中找到最新的对话和其他解决方法（如果发现） 。

# javascript - Javascript：将上下文属性传递到函数范围

> ID：16168883
> 
> 赞同：1
> 
> 时间：2013-04-23T12:03:21.553
> 
> 标签：javascript, scope

我正在寻找一种将“this”中的属性注入本地函数范围的方法，所以我不需要写“this”。引用此属性时。

确切的细节显示在这段代码[http://jsfiddle.net/wwVhu/3/](http://jsfiddle.net/wwVhu/3/)中，看看这部分

```
 ...
    //it's how it works
    doStuff: function(param) { $('#output').html(this.value + param) }

    //it's how i want it work - without referencing to this
    //doStuff: function(param) { $('#output').html(value + param) } 
```

我知道这可以通过将函数代码包装在“with(this) { ... }”中来实现，但是还有哪些其他选项？

在每个方法的开头写“with(this)”或使用 js aop 是我试图避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:01:56.123

基本上有四种选择：

1.  你保持原样。上下文和局部范围是不同的对象，将它们结合起来是不好的做法并会导致冲突。
2.  您将 value 属性作为第二个参数添加到`doStuff`函数中。
3.  `this`您使用较短的标识符昵称。我经常发现自己使用`$t`.
4.  你用`with(this) $('#output').html(value + param);`. 这是一种不好的编码习惯，如`1)`. 您的代码`param`在`this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:11:20.953

你为什么想做这个？它是命名空间的，因为它有意义。`this`对侦听器正在侦听的元素的引用。它包含的信息不仅仅是价值。

如果你想要另一个变量中的值，你可以这样做：

```
var value = this.value 
```

# apache - 只用密码保护apache中的一个文件夹

> ID：16168893
> 
> 赞同：0
> 
> 时间：2013-04-23T12:03:36.753
> 
> 标签：apache

问题是我只想保护一个文件夹“admin”，我在 /home/my_home/public_html 中的 .htaccess 中使用它

```
AuthName "message"
AuthType Basic
AuthUserFile /home/my_home/.htpasswd
require valid-user 
```

但这保护了我所有的网站，而我实际上想保护 /home/my_home/public_html/admin。在我的错误日志中，我看到：

```
/home/myhome/public_html/admin/.htaccess: <Directory not allowed here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:14:43.347

您必须将 .htaccess 文件放入您的管理文件夹。

在 .htaccess 文件中找到的配置指令应用于找到 .htaccess 文件的目录及其所有子目录。请参阅[Apache 文档](http://httpd.apache.org/docs/2.4/howto/htaccess.html#how)

# web-services - 在 SharePoint for Office 365 中复制 Web 服务

> ID：16168903
> 
> 赞同：4
> 
> 时间：2013-04-23T12:04:05.143
> 
> 标签：web-services, file, sharepoint, upload, office365

我正在尝试将大于 100 MB 的文件上传到 Office 365 的 SharePoint 门户。我尝试了三种不同的方法来实现相同的目的。

1.  **复制 Web 服务**以及 httpRuntime 设置，其中 maxRequestLength 设置为 2097151，executionTimeout 设置为 14400。此外，我确实尝试将 Timeout 设置为“Infinite”和“60000”。
    **错误：**基础连接已关闭：发送时发生意外错误。

2.  **Web 客户端，**使用 UploadDataAsync 方法将文件字节“PUT”到目标 URL。即使这样，httpRuntime 设置也如上所述。
    **错误：**无法从传输连接中读取数据：现有连接被远程主机强行关闭。

3.  **HttpWebRequest，** ServicePointManager.Expect100Continue 设置为 false。还尝试将 SendChunked 设置为 true 和 false。
    **错误：**请求被中止：请求被取消。

除了所有这些，我还添加了

```
protected override System.Net.WebRequest GetWebRequest(Uri uri)
{
 System.Net.HttpWebRequest webRequest = 
  (System.Net.HttpWebRequest) base.GetWebRequest(uri);
 webRequest.KeepAlive = false;
 return webRequest;
} 
```

在为复制服务生成的代理类中。限制是我不能使用 CSOM 上传文件。

而且每次上传请求都会超时。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T20:20:15.743

尝试使用以下代码：-

```
 WebRequest webRequest = WebRequest.Create(url);
           HttpWebRequest request = (HttpWebRequest)webRequest;
           request.CookieContainer = CookieContainer;
           request.Method = "PUT";
           request.KeepAlive = true;
           request.Timeout = Timeout.Infinite;
           byte[] buffer = new byte[1024];
           using (Stream stream = request.GetRequestStream())
           {
               using (MemoryStream memoryStream = new MemoryStream(fileBytes))
               {
                   memoryStream.Seek(0, SeekOrigin.Begin);
                   for (int i = memoryStream.Read(buffer, 0, buffer.Length); i > 0;
                       i = memoryStream.Read(buffer, 0, buffer.Length))
                   {
                       stream.Write(buffer, 0, i);
                   }
               }
           }
           WebResponse response = request.GetResponse();
           response.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:11:19.337

您是否尝试更改默认的最大上传文件大小？您使用的是什么版本的 SharePoint？

# php - codeigniter 404 错误中的分页

> ID：16168904
> 
> 赞同：-2
> 
> 时间：2013-04-23T12:04:07.640
> 
> 标签：php, codeigniter, pagination

控制器文件：此处的功能索引

```
 public function index()
      {
        $this->load->helper('url');
        $this->load->helper('form');
        $this->load->model('register_model');
        $this->load->library("pagination");
        $config = array();
        $config["base_url"] = base_url()."register";
        $config["total_rows"] = $this->register_model->record_count();
        $config["per_page"] = 5;
        $config["uri_segment"] = 3;

        $this->pagination->initialize($config);

        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $data["result"] = $this->register_model->fetch_logs($config["per_page"], $page);
        $data["links"] = $this->pagination->create_links();            
        $this->load->view('register',$data);            
      } 
```

这是我的模型函数

```
 public function view()
     {
      $query = $this->db->query("select * from user_login");
       return $query->result_array();
      }

    public function record_count() 
    {
       return $this->db->count_all("user_login");
    }

    public function fetch_logs($limit, $start) 
    {
       $this->db->limit($limit, $start);
       $query = $this->db->get("user_login");

       if ($query->num_rows() > 0) {
           foreach ($query->result() as $row) {
              $data[] = $row;
           }
           return $data;
        }
        return false;
      } 
```

这是我的视图代码

```
 <form method="post" accept-charset="utf-8" action="<?php echo base_url(); ?>/register/create" class="myform" id="myform" />

    <div style="text-align:left;"><h1>User Registration</h1></div>
        <table width="488" border="0">
          <tr>
            <td colspan="3">User
              <input name="user_name" type="text" size="40" /></td>
          </tr>
          <tr>
            <td colspan="3">Pass
              <input name="password" type="password" size="40" /></td>
          </tr>
          <tr>
            <td width="278" align="right"><input name="submit" type="submit" value="ADD"  class="big_btn"/></td>
            <td width="148" align="center">&nbsp;</td>
            <td width="48" align="center">&nbsp;</td>
          </tr>
      </table>
        <p>&nbsp;</p>
            <table width="679" border="1" cellpadding="3" cellspacing="0">

        <tr><th width="202" align="center">User</th>    
          <th width="319" align="center">Password</th>
          <th colspan="2" align="center">Action</th>
        <?php 
        foreach ($result as $row)
      {
      ?>
      <tr>
      <td height="32" align="center"><?php echo $row->user;?>   </td>
      <td align="center"><?php echo md5($row->pwd);?></td>
      <td width="56" align="center"><a href="<?php echo base_url();?>/register/delete/<?php echo $row->id;?>">
       <input name="delete" type="button" id="delete" value="x" class="del_btn">

      </a></td>
      <td width="68" align="center"><?php 
    $atts = array(
                  'width'      => '700',
                  'height'     => '300',
                  'scrollbars' => 'no',
                  'status'     => 'no',
                  'resizable'  => 'yes',
                  'screenx'    => '600',
                  'screeny'    => '150'
                );
    echo anchor_popup(base_url().'/register/viewmore/'.$row->id, '<input name="view" type="button" id="view" value="" class="view_btn">', $atts);
    ?></td>
      </tr>
    <?php  
      }

        ?>

      </table>

    </form>
    </div>   <p><?php echo $links; ?></p> 
```

在这里我可以看到分页链接，但是在我点击链接后，它给出了 404 Page Not Found 错误，任何人都可以检查这个并回复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:01:27.877

```
public function index() {
    $this->load->helper ( 'url' );
    $this->load->helper ( 'form' );
    $this->load->model ( 'register_model' );
    $this->load->library ( "pagination" );
    $config = array ();
    $config ["base_url"] = base_url ( 'register/index/' );
    $config ["total_rows"] = $this->register_model->record_count ();
    $config ["per_page"] = 5;
    $config ["uri_segment"] = 3;
    $this->pagination->initialize ( $config );
    $page = ($this->uri->segment ( 3 )) ? $this->uri->segment ( 3 ) : 0;
    $data ["result"] = $this->register_model->fetch_logs ( $config ["per_page"], $page );
    $data ["links"] = $this->pagination->create_links ();
    $this->load->view ( 'register', $data );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:30:59.627

我认为这是问题尝试这样

```
$config['base_url'] = site_url('register/index/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:05:27.463

改变这个

```
$config["base_url"] = base_url()."register"; 
```

对此

```
$config["base_url"] = base_url('register'); // or you can use site_url('register'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:12:03.480

如果您的上述控制器是注册控制器，那么您可以这样做

```
 $config["base_url"] = site_url("register"); //this will call the index function of register contoller 
```

# cuda - cudaBindTextureToArray 和 cudaUnbindTexture 会破坏 GPU-CPU 并发吗？

> ID：16168905
> 
> 赞同：2
> 
> 时间：2013-04-23T12:04:16.647
> 
> 标签：cuda

我希望我的 CPU 和 GPU 重叠计算，但是，我的 GPU 代码包含一些同步函数调用，例如`cudaBindTextureToArray()`不`cudaUnbindTexture()`存在异步对应项。这些调用会破坏 GPU-CPU 的并发性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:05:08.563

一般来说，可能是异步的函数在[这里](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)列出：

```
 - •Kernel launches;
  - •Memory copies between two addresses to the same device memory;
  - •Memory copies from host to device of a memory block of 64 KB or less;
  - •Memory copies performed by functions that are suffixed with Async;
  - •Memory set function calls. 
```

异步函数通常有一个`Async`后缀，它们通常会接受一个`stream`参数。

不符合上述描述的函数应该被认为是同步的。特定的例外（如`cudaSetDevice()`）通常从它们的描述中显而易见。

在单设备系统的上下文中，同步函数（除了特定的流同步函数，如`cudaStreamSynchronize`和`cudaStreamWaitEvent`）将：

1.  等到*所有 cuda 活动* 完成后才开始（即所有以前的 cuda API 调用和内核调用都已完成）
2.  执行他们指定的活动（例如将*在第 1 步完成后*`cudaMemcpy()`开始指定的复制操作）
**   第 2 步完成后释放调用（宿主）线程*

 *因此，调用（主机）线程从调用的那一刻起被*阻塞*，直到所有先前的`cudaMemcpy()`cuda 活动完成*并且*`cudaMemcpy()`调用完成。我想大多数人会说这可能会“破坏”GPU-CPU 并发性，因为在上述序列的持续时间内（步骤 1-3），CPU 线程实际上什么都不做。

它是否对您的应用程序产生很大影响将取决于所讨论的同步调用之前和之后发生的情况。*

# jquery - iPhone中的jQuery问题

> ID：16168906
> 
> 赞同：0
> 
> 时间：2013-04-23T12:04:18.093
> 
> 标签：jquery, iphone

我已经使用 jQuery 效果来自动填充文本文件。在所有浏览器中，它都运行良好。即使在安卓手机中它也能正常工作。但它在 Iphone 中无法正常工作。

这是我的标记和代码：

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){ 
$("#tostreet").blur(function(){
var  street=$("#tostreet").val();
if(street=='schiphol'){
$("#tostreet").val('Vertrekpassage');
$("#tohouse").val('1');
$("#tocity").val('SCHIPHOL');

    }
  });
});

<input class="text_field" id="tostreet" onkeyup="repp();" type="text" name="tostreet" placeholder="Street" />
<input class="short_text_field" id="tohouse" type="text" name="tohouse" placeholder="No." value="" />

</div>
</div>
<div class="field_box">
<div class="input_text"><label></label></div>
<div class="field"><input class="full_text_field" id="tocity" type="text" name="tocity" placeholder="City" /></div>
</div> 
```

# git - Git 别名推送失败，出现错误

> ID：16168908
> 
> 赞同：0
> 
> 时间：2013-04-23T12:04:22.923
> 
> 标签：git

我正在创建一个 git 别名，如下所示（为了便于阅读，分成几行）：

```
git config --global alias.make-release '
! _() { if test "$1" != "2" ; then echo "git make-release TAG_NUMBER DESCRIPTION"; return 1; fi; }; 
_ "$#" 
&& git checkout release 
&& git merge master 
&& git fetch --tags 
&& git tag -a "$1" -m "$2" 
&& git push origin release --tags' 
```

该命令合并`master`到`release`，从命令行参数创建一个新标签并将其推送到 origin/release。它一直工作到标签创建点。当我跑步时，我得到了这个：

```
Switched to branch 'release'
Already up-to-date.
error: src refspec Testing does not match any.
error: failed to push some refs to 'git@github.com:Stockopedia/prototype.git' 
```

我有两个问题：

1.  最后一个命令`git push origin release --tags`不起作用。为什么？
2.  最后两行是什么意思？它们为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:42:56.417

这可能会更好，但我还没有完全测试它 - 它的格式是为了可读性，而不是为了使用 shell，您可能需要调整换行符和间距：

```
git config --global alias.make-release '
! _() { if test "$1" != "2" ;
        then
          echo "git make-release TAG_NUMBER DESCRIPTION"
          return 1
        fi;
        git checkout release &&
        git merge master &&
        git fetch --tags &&
        git tag -a "$1" -m "$2" &&
        git push origin release --tags
}; _' 
```

我认为最大的问题是误解了别名是如何扩展的。您发布的代码会导致扩展，考虑`git make-release arg1 arg2`到外壳看起来像：

```
_() { if .... }; _ "$#" && git checkout .... && git push origin release --tags arg1 arg2 
```

其中`$#`,`$1`和的扩展`$2`不太可能是您所期望的，甚至可能是空的 - 参数没有`git tag`按照您的意愿传递。为了解决这个问题，整个事情需要在函数内部，函数名是别名中的最后一个，所以你基本上得到：

```
_() { .... }; _ arg1 arg2 
```

# cordova - 如何在多平台上部署 Cordova 应用程序？

> ID：16168910
> 
> 赞同：1
> 
> 时间：2013-04-23T12:04:29.210
> 
> 标签：cordova, cordova-2.0.0

我是 Cordova 框架的初学者。我想知道我是否在 Eclipse 中使用 Android SDK 开发了一个 HelloWorld 应用程序，这个应用程序是否可以在 IOS 平台上运行？（我认为情况并非如此）。但是官网上说Cordova是一个使用JQuery、Html和Css的框架。我已经下载了这个框架，并且我有一个适用于所有平台的这个框架的示例。因此，如果我使用 android 并用它编写 HelloWorld 应用程序，我的应用程序只能在 Android 手机上运行，​​对吗？那么，如果我想同时制作 Android 和 IOS 应用程序，我将不得不制作两个不同的程序？是否有可能为所有平台提供相同的程序？我真的迷路了。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:49:00.963

使用 phonegap，您将为每个项目（ios、android...）拥有一个 www 文件夹。在此文件夹中，您可以使用 html、css 和 javascript 开发您的应用程序。如果你想将你的应用程序从 android 导出到 ios，你所要做的就是将这些文件复制到你 ios 项目的 www 文件夹中。只是不要复制cordova.js（每个项目都不同）。

希望这有帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:20:30.603

请在此处查看我对类似问题的回答：[从 Apache Cordova 开始](https://stackoverflow.com/questions/16147671/beginning-with-apache-cordova/16151042#16151042)

基本上，您使用 JQuery、HTML 和 CSS 创建应用程序。您可以使用 Cordova JavaScript API 访问设备功能，这些功能通常只能通过使用 C# 或 Java 创建本机应用程序来获得，例如访问设备相机或联系人。您将需要 Android SDK 将您的 HTML/JS 应用程序实际“编译”为 Android 应用程序，并且您将需要 XCode 将其“编译”为 iOS 应用程序。除非您想构建 Cordova 插件以扩展基本 Cordova API，否则您不一定需要 Android SDK 来创建 Cordova 应用程序。但是，为了在真实设备上测试您的应用程序，设置 SDK 和 Eclipse 会有很大帮助。

您可以使用免费（目前）名为[PhoneGap Build](http://build.phonegap.com/)的服务将您的 HTML/JavaScript/CSS“编译”到多个不同的本机应用程序中，而不是自己下载各种 SDK。但是，我不确定在没有在本机设备上持续测试的情况下创建应用程序有多容易。

您是正确的，您使用 Eclipse 和 Android SDK 构建的 HelloWorld 应用程序无法在 iOS 平台上运行。但是，您应该能够获取完全相同的 HTML/JavaScript/CSS 代码，将其粘贴到 XCode（Apple 版本的 Eclipse）中，然后无需任何更改即可创建 iOS 应用程序。因此，您可以在 Android 上编写所有代码并使用 Android 进行测试，但是假设您只使用 HTML/JS/CSS 编写应用程序，那么移植到 iOS 应该非常简单。

# c# - 相同长度的字符串需要不同数量的制表符来格式化

> ID：16168911
> 
> 赞同：1
> 
> 时间：2013-04-23T12:04:29.397
> 
> 标签：c#, string, tabstop

我有多个长度相同的字符串，但它们似乎需要不同数量的制表位才能正确格式化。我不确定谷歌的用途，也没有得到任何对我有帮助的结果，所以我在这里问。

除了创建多个我不想要的控件之外，还有什么好的解决方案......

[查看 Malzahar 和 Kassadin](http://www.imagebanana.com/view/31e74836/asdf.png)（相同的长度，相同数量的制表位，malzahar 的格式混乱）当前代码：

```
if (_counter.zCounter[i].Length <= 8)
{
    DataCollection += _counter.zCounter[i] + "\t\t↑" + _counter.zUpvotes[i] + "\t↓" + _counter.zDownvotes[i] + "\n";
}
else
    DataCollection += _counter.zCounter[i] + "\t↑" + _counter.zUpvotes[i] + "\t↓" + _counter.zDownvotes[i] + "\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:07:47.530

字符串*长度*（字符数）仅与其*宽度*（像素数）松散相关。

您的方法仅适用于固定宽度的字体（如 Courier）。否则，您将需要使用 Measure() 函数并计算特定字体的空格/制表符。凌乱。

将您的 GUI 更改为 2 列要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:16:12.217

正在使用固定宽度（等宽）字体吗？即使这样，制表符的位置也取决于字符串的长度。

当制表符前面的字符串太长时，您需要更少的制表符。这就是您的问题的来源：

```
str→   →   →str
strstr→→   →str
strstrstr→ →   →str 
```

我建议您改为插入填充空格。您可以像这样计算空格数：

```
padding = (column - (index % column)) % column 
```

Where`column`是要对齐下一个单词的从零开始的列，并且`index`是紧接在前一个单词之后的字符的从零开始的索引。

```
str·········str
strstr······str
strstrstr···str 
```

# android - Android最佳钢琴风琴布局

> ID：16168921
> 
> 赞同：0
> 
> 时间：2013-04-23T12:04:59.037
> 
> 标签：android, layout, touch, piano

我的应用程序有一个音乐风琴的背景图像，我使用`LinearLayout`s 和`Button`s 并将它们的背景设置`@null`为键。

我已经实现了我的布局，`View.OnTouchListener`并在`OnTouch`我播放相关声音`MotionEvent.ACTION_DOWN`并停止它`MotionEvent.ACTION_UP`。

这种工作正常，除了当我的手指滑过按钮（风琴键）时，因为它们是按钮（我认为），除非我抬起并修饰按钮，否则不会触发新的 ontouch 事件。

任何人都可以建议一个更好的布局，使用其他一些控件，也许这将使我能够检测到它们之间的滑动以实现向上或向下滑动键盘效果？

我真的不想从头开始绘制它们的键，因为我想利用比绘制的矩形更令人愉悦的背景图像（用于风琴键盘）中的图形。谢谢

```
 <LinearLayout android:id="@+id/ll" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/vibrato_off" android:orientation="vertical" android:weightSum="95" xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" tools:context=".main">
<LinearLayout android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="70"></LinearLayout>
<LinearLayout android:id="@+id/llblack" android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="11">
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="1.5"/>
    <android.view.View android:id="@+id/vib_off" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="0.4"/>
    <android.view.View android:id="@+id/a2u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/a2sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/b2u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/c3u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/c3sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/d3sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/e3u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/f3u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/f3sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/g3sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/a3sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/b3u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/c4u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <android.view.View android:id="@+id/c4sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/d4sharp" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/e4u" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="0.5" android:background="@null"/>
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="0.5"/>
</LinearLayout>
<LinearLayout android:id="@+id/llwhite" android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="9">
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="1.5"/>
    <android.view.View android:id="@+id/vib_on" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="0.4"/>
    <android.view.View android:id="@+id/a2" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/b2" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/c3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/d3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/e3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/f3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/g3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/a3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/b3" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/c4" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/d4" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <android.view.View android:id="@+id/e4" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="1" android:background="@null"/>
    <View android:layout_width="1dp" android:layout_height="0dip" android:layout_weight="0.4"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:16:07.823

我假设您正在做一些数学运算以知道将按钮放在哪里，以便它们与背景图像相对应。

如果您将 an 设置`OnTouchListener`为整体`LinearLayout`并实现它以在 and 上执行操作`ACTION_DOWN`，`ACTION_UP`您可以使用相同的数学计算来确定用户触摸的位置`LinearLayout`以了解他或她实际打算按下的键。所以你根本不需要按钮。

然后，您将实现侦听器以也做一些事情，`ACTION_MOVE`并借助您已经在做的数学运算，您可以弄清楚用户何时用他或她的手指离开了一个键并移动到另一个键。因此，您基本上会将手指的当前坐标与`onTouch()`之前调用该方法时的坐标进行比较，这样您就可以知道移动到了哪个键，以便您可以开始播放它的声音，以及它从哪个键开始，以便您可以停止播放上一个的声音。如果运动在同一个键上开始和结束，你什么也不做。

大约一年前，当我实现一个日历时，我做了类似的事情，用户可以通过从一个日历单元滑动到另一个来选择一个间隔。并且日历必须随着用户滑动而更新，所以我还必须知道他或她何时离开一个单元格并将手指移动到另一个单元格。所以我确信，如果你正确地实施它，它会起作用。

我假设，因为它应该是一个模拟钢琴的应用程序，所以您需要允许用户不仅用一个手指滑动键盘，而且用两个（或更多）手指滑动键盘，对吧？我认为这也应该很容易实现，因为它`MotionEvent`携带有关执行该动作的指针（手指、鼠标指针……）的信息。我对此没有任何经验，但您可以在`MotionEvent`此处的文档中阅读更多相关信息：http: [//developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)

希望能帮助到你。如果您还有其他问题，我很乐意回答（更具体地说，我还有日历的代码。）

祝你好运。

**编辑回答评论：**

我不是说用`View`s 代替`Button`s。我的意思是您的布局仅包含`LinearLayout`设置为背景图像的 a 。就是这样。然后在代码中，你附加一个`OnTouchListener`它，在`onTouch()`方法中，你计算位置。在我的脑海中，我认为你可以这样做：

我假设该应用程序应该在横向模式下使用，并且钢琴的图像覆盖整个屏幕。假设您有 8 个白色钢琴键。通过将屏幕宽度除以 8，您可以知道设备上一个钢琴键的宽度。您还知道一个键的开始位置和结束位置。假设一个键的宽度为 50 像素。然后第一个从第 1 个像素开始，到第 50 个像素结束。第二个从 51 日开始，到 100 日结束。等等。

因此，如果触摸事件发生，您可以通过调用`MotionEvent.getX`或访问其坐标`MotionEvent.getY`。现在我不知道你是否需要`getX`or `getY`，你必须弄清楚。因此，假设该方法返回一个类似 94 的数字。当您将其除以先前计算的钢琴键宽，并将结果四舍五入到最接近的整数时，您将知道用户按下了哪个键。所以如果宽度是 50，你做 94 / 50 = 1.88，四舍五入到 2，你就有了第二个键。

并且您应该将`getX`/`getY`变量存储在您的活动中，以便当您检测到下一个事件时，您可以知道发生了什么。因此，如果你`ACTION_DOWN`在第二个键上得到一个，然后你得到一个`ACTION_MOVE`并且你计算它实际上已经在第三个键上，你知道用户已经按下第二个键，然后滑到第三个键。所以你停止播放第二个键的声音并开始播放第三个键的声音。

我希望这是有道理的，并且这不是一种过于原始和愚蠢的方法。:)

# objective-c - ARC Objective-C 中的 C 样式多维数组

> ID：16168923
> 
> 赞同：0
> 
> 时间：2013-04-23T12:05:07.193
> 
> 标签：objective-c, c, arrays, multidimensional-array

我正在尝试在 Objective-C 中实现一个 nxn 多维整数数组，并且因为使用 NSMutableArray 似乎开销太大，我决定只使用 C 的 malloc 和 free 来实现它。我的问题是，下面的代码在 ARC Objective-C 下是否正确（没有内存泄漏）？

```
@interface TwoDimensionalArray
{
    int **array;
    int size;
}
@end

@implementation TwoDimensionalArray
- (id)initWithSize: (int)s
{
    if(self = [super init])
    {
        size = s;
        array = malloc(sizeof(int*) * size);
        for(int i = 0; i < size; i++)
        {
            array[i] = malloc(sizeof(int) * size);
            for (int j = 0; j < size; j++)
            {
                array[i][j] = 0;
            }
        }
    }
    return self
}
- (id)init
{
    return [self initWithSize:1];
}
- (void)dealloc
{
    for(int i = 0; i < size; i++)
    {
        free(array[i]);
        array[i] = nil;
    }
    free(array);
    array = nil;
}
@end 
```

如果这不正确，或者如果您认为在 Objective-C 中确实有更好的方法可以在不使用 malloc 的情况下执行此操作，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:22:32.527

ARC 实现了*Objective-C 对象*和*块*的自动内存管理，但不自动化*malloc/free*。（参考：[Clang/ARC 文档：General](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#general)， [ARC 发行说明：FAQ](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW17)。）

因此，您的问题与 ARC 无关：您`malloc()`必须接受 `free()`的一切（并且`dealloc`是这样做的好地方）。乍一看，您的代码看起来不错。

`dealloc`（小记：不需要 将数组指针归零，但`NULL`将是要分配的适当指针值，`nil`适用于 Objective-C 对象。）

我不知道使用 Objective-C 集合会导致多少开销`NSMutableArray` ，应该通过分析来测试（正如评论中已经说过的）。

# liferay - 创建时如何为网站页面动态分配权限

> ID：16168925
> 
> 赞同：4
> 
> 时间：2013-04-23T12:05:12.883
> 
> 标签：liferay, liferay-6

在 Liferay 中，当添加站点页面时，会自动为角色、角色和角色分配`VIEW`权限。`Owner``Guest``Site Member`

是否可以在创建页面时将权限动态分配给自定义角色，而不是从站点页面的管理权限选项卡`VIEW`手动分配权限？`VIEW`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:43:41.880

一种可能的方法是`LayoutListener`通过钩子使用

为此，您需要创建钩子（门户属性）并覆盖以下属性：

```
value.object.listener.com.liferay.portal.model.Layout 
```

请参见以下示例：

```
value.object.listener.com.liferay.portal.model.Layout=com.smb.mypermissions.hook.listeners.LayoutListener 
```

这`LayoutListener`是在 package 下创建的自定义类`com.smb.mypermissions.hook.listeners`以覆盖 default `LayoutListener`。

这个类的签名：`public class LayoutListener extends BaseModelListener<Layout>`

现在覆盖该方法

```
public void onAfterCreate(Layout model)throws ModelListenerException 
```

要为角色​​分配权限，请使用以下一行：

```
ResourcePermissionLocalServiceUtil.setResourcePermissions(
    companyId, Layout.class.getName(),
    ResourceConstants.SCOPE_INDIVIDUAL,
    String.valueOf(primKey), role.getRoleId(),
    new String[] {
        ActionKeys.VIEW
    }); 
```

角色可以从哪里获得，`RoleLocalServiceUtil`并且`primkey`是页面唯一ID，即`plid`

```
long primKey = model.getPlid();

long companyId = model.getGroup().getCompanyId();

Role role = RoleLocalServiceUtil.fetchRole(companyId, "<Your Role name here>"); 
```

# c++ - 使用模板从类型列表中提升类型

> ID：16168927
> 
> 赞同：1
> 
> 时间：2013-04-23T12:05:22.647
> 
> 标签：c++, templates, c++11

我有一个带有 int 元素的向量和一个带有 float 元素的向量。在这种情况下，最喜欢的类型是浮点数，在点积中我想返回浮点数类型（如果未指定）。

下面的代码就是这样做的，但是模板包出了点问题。

我能得到一点帮助吗？

```
#include <iostream>
#include <vector>
#include <array>
using namespace std;

template<typename Tp, typename T1> struct contains
{
    constexpr static bool value = std::is_same<Tp, T1>::value;
};
template<typename Tp, typename T1, typename ... Tn> struct contains
{
    constexpr static bool value = std::is_same<Tp, T1>::value || contains<Tp, Tn...>::value;
};

template<typename ... T> struct perfect
{
    typedef 
        typename std::conditional<contains<long double, T...>::value, long double,
        typename std::conditional<contains<double     , T...>::value, double,
        typename std::conditional<contains<float      , T...>::value, float,
        typename std::conditional<contains<long long  , T...>::value, long long,
        typename std::conditional<contains<unsigned long long, T...>::value, unsigned long long,
        typename std::conditional<contains<int        , T...>::value, int,
        typename std::conditional<contains<unsigned int, T...>::value, unsigned int,
        //.....
        void
        >>>>>>>::type type;
};

struct Vector1 : public std::vector<double> {};
struct Vector2 : public std::vector<int> {};
struct Vector3 : public std::vector<float> {};

template<typename C1, typename C2, typename T = perfect<typename C1::value_type, typename C2::value_type>::type>
T dot_product(const C1 &c1, const C2 &c2)
{
    return 0; // return c1 * c2
} 

int main()
{
    Vector1 a;
    Vector2 b;
    cout << dot_product(a, b) << endl;
    cout << dot_product<Vector1, Vector2, long double>(a, b) << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:46:16.077

您在这里缺少两件事。

```
template<typename Tp, typename T1> struct contains
{
    constexpr static bool value = std::is_same<Tp, T1>::value;
}; 
```

是一个*专业*，所以它应该是

```
template<typename Tp, typename T1> struct contains<T1,Tp>
                                               // ^^^^^^ 
{
    constexpr static bool value = std::is_same<Tp, T1>::value;
}; 
```

它应该**在原始模板之后**定义。

* * *

接下来，您在这里缺少类型名。

```
template<typename C1, typename C2, typename T = typename perfect<typename C1::value_type, typename C2::value_type>::type>
                                             // ^^^^^^^ 
```

* * *

但是我应该提到你可能在这里过于复杂了。我不确定是否所有这些都是从两种类型中扣除所必需的。也许预处理器宏可以为您做得更好。我假设这是一个练习。

* * *

* * *

**编辑**：好的，这是一个与[C++ Templates a Complete Guide](https://rads.stackoverflow.com/amzn/click/com/0201734842)
类似的操作，但方法不同。旧但仍然足以满足您的选择

```
#define MK_PROMOTION(T1,T2,Tr)             \
    template<> class Promotion<T1, T2> {   \
      public:                              \
        typedef Tr type;                   \
    };                                     \
                                           \
    template<> class Promotion<T2, T1> {   \
      public:                              \
        typedef Tr type;                   \
    };

template<typename T1, typename T2>
class Promotion {
public:
    typedef T1 type;    
};

template<typename T>
class Promotion<T,T> {
  public:
    typedef T type;
};

MK_PROMOTION(int, char, int)
MK_PROMOTION(double, float, double)
MK_PROMOTION(double, int, double)

typedef std::vector<double> Vector1;
typedef std::vector<int> Vector2;
typedef std::vector<float> Vector3;

template<typename C1, typename C2, typename T = typename Promotion< typename C1::value_type, typename C2::value_type >::type >
T dot_product(const C1 &c1, const C2 &c2)
{
    return 0; // return c1 * c2
} 

int main()
{
    Vector1 a;
    Vector2 b;
    cout << dot_product(a, b) << endl;
    cout << dot_product<Vector1, Vector2, long double>(a, b) << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:54:00.053

你正在寻找`decltype<C1() * C2()>`，不需要你的`struct perfect`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:21:32.017

**编辑：** `decltype()`做得更好。

```
template<typename C1, typename C2, typename T = decltype(typename C1::value_type() * typename C2::value_type())>
T dot_product(const C1 &c1, const C2 &c2) { return 5; } 
```

未来社区需要的固定程序：（许多语法错误）

```
#include <iostream>
#include <vector>
using namespace std;

template<typename Tp, typename T1, typename ... Tn> struct contains_type
    { constexpr static bool value = std::is_same<Tp, T1>::value || contains_type<Tp, Tn...>::value; };
template<typename Tp, typename T1> struct contains_type<Tp, T1>
    { constexpr static bool value = std::is_same<Tp, T1>::value; };

template<typename ... T> struct type_promotion
{
    typedef typename
        std::conditional<contains_type<long double, T...>::value, long double,
        typename std::conditional<contains_type<double     , T...>::value, double,
        typename std::conditional<contains_type<float      , T...>::value, float,
        typename std::conditional<contains_type<long long  , T...>::value, long long,
        typename std::conditional<contains_type<unsigned long long, T...>::value, unsigned long long,
        typename std::conditional<contains_type<int        , T...>::value, int,
        typename std::conditional<contains_type<unsigned int, T...>::value, unsigned int,
        void>::type>::type>::type>::type>::type>::type>::type type;
};

struct Vector1 : public std::vector<double> {};
struct Vector2 : public std::vector<int> {};

template<typename C1, typename C2, typename T = typename type_promotion<typename C1::value_type, typename C2::value_type>::type>
T dot_product(const C1 &c1, const C2 &c2)
    { return 5; } 

int main()
{
    Vector1 a;
    Vector2 b, c;
    cout << dot_product(a, b) / 2 << endl;
    cout << dot_product(b, c) / 2 << endl;
    cout << dot_product<Vector1, Vector2, long double>(a, b) << endl;
} 
```

# asp.net - 我如何在 aspx.vb 中通过 sql 添加组

> ID：16168933
> 
> 赞同：1
> 
> 时间：2013-04-23T12:05:37.567
> 
> 标签：asp.net, sql, vb.net

在 SQL 中：

```
select SE.shipperId, SUM(SEDetail.totalSize) as CBM from SE, SEDetail
where SEDetail.shipperId=10011 and SE.id = SEDetail.bolId and SEDetail.containerId
between 1 and 5 group by SE.shipperID 
```

我改变了这一点，并在 aspx.vb 中工作：

```
SELECT SE.shipperID as 'Shipper ID', SUM(SEDetail.totalSize) as CBM 
FROM SE inner join SEDetail on SE.id = SEDetail.bolId and SEDetail.containerId 
between 1 and 5 Where 
```

但是当我`group by`在sql中添加时出现错误：

```
SELECT SE.shipperID as 'Shipper ID', SUM(SEDetail.totalSize) as CBM 
FROM SE inner join SEDetail on SE.id = SEDetail.bolId and SEDetail.containerId 
between 1 and 5 Where group by SE.shipperID 
```

如何在一个 sql 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:13:12.053

只需删除`WHERE`

```
SELECT SE.shipperID as 'Shipper ID', SUM(SEDetail.totalSize) as CBM 
FROM SE inner join SEDetail on SE.id = SEDetail.bolId WHERE SEDetail.containerId 
between 1 and 5 group by SE.shipperID 
```

# python - Eclipse 中是否有类似 Windows Buider Editor 的 Python 接口？

> ID：16168936
> 
> 赞同：-2
> 
> 时间：2013-04-23T12:05:42.693
> 
> 标签：python, python-2.7, python-3.x

我想开发一个 Python 程序，但我对 UI 不太了解。你知道一些像 Windows Builder Editor 或 Java/Eclipse 这样的 UI 编辑器吗？

我想要一个像这样的工具：[http](http://www.youtube.com/watch?v=XuQow4uWm_g) ://www.youtube.com/watch?v=XuQow4uWm_g 但适用于 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:09:15.100

如果我正确理解了您的问题，那么您正在寻找有人建议您为 Python 使用哪种 IDE。

请在此处查看 -[用于 Python 的 IDE 是什么？](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:35:26.167

这里有几个用于 python 的 UI 编辑器：

对于 pyqt 或 pyside（python 的 qt）： [QT disigner](http://qt-project.org/doc/qt-4.8/designer-manual.html)

GTK： [林间空地](http://glade.gnome.org/)

希望能帮助到你！！

# c++ - Qt C++ 加载 GUI 然后加载其他设置

> ID：16168943
> 
> 赞同：0
> 
> 时间：2013-04-23T12:06:15.150
> 
> 标签：c++, qt

我正在制作需要快速的大型应用程序。我有一个加载的窗口，然后我将 6 个图像缩放到大约 126x105 大小，然后将它们设置为 6 个按钮上的图标。此过程大约需要 2 秒才能完成，并且在这 6 张图片被缩放之前不会显示 GUI。有什么方法可以显示 GUI 并在加载 GUI 后缩放图像并将它们设置为图标。这是代码：

```
 f = new QFrame(this);
    f->setStyleSheet("background-color: rgba(240, 240, 240, 85%);"
                     "border: 2px solid green;"
                     "border-radius: 12px;");
    f->setGeometry(this->width/2-250, this->height/2-200, 500, 300);
    f->show();

    frameZatvori = new QPushButton(this);
    frameZatvori->setFlat(true);
    frameZatvori->setFont(QFont("Droid Sans", 9, QFont::Bold));
    frameZatvori->setGeometry(f->x()+475, f->y()+10, 15, 15);
    frameZatvori->setText("X");
    frameZatvori->setFocusPolicy(Qt::NoFocus);
    frameZatvori->show();

    promjenaP1 = new QPushButton(this);
    promjenaP1->setFlat(true);
    promjenaP1->setStyleSheet("border-color: solid blue;"
                              "border: 3px;"
                              "border-radius: 9px;");

    promjenaP1->setFocusPolicy(Qt::NoFocus);
    promjenaP1->setGeometry(f->x()+30, f->y()+30, 126, 105);
    promjenaP1->show();

    promjenaP2 = new QPushButton(this);
    promjenaP2->setFlat(true);
    promjenaP2->setFocusPolicy(Qt::NoFocus);
    promjenaP2->setGeometry(promjenaP1->x()+156, f->y()+30, 126, 105);
    promjenaP2->show();

    promjenaP3 = new QPushButton(this);
    promjenaP3->setFlat(true);
    promjenaP3->setFocusPolicy(Qt::NoFocus);
    promjenaP3->setGeometry(promjenaP2->x()+156, f->y()+30, 126, 105);
    promjenaP3->show();

    promjenaP4 = new QPushButton(this);
    promjenaP4->setFlat(true);
    promjenaP4->setFocusPolicy(Qt::NoFocus);
    promjenaP4->setGeometry(f->x()+30, promjenaP1->y()+135, 126, 105);
    promjenaP4->show();

    promjenaP5 = new QPushButton(this);
    promjenaP5->setFlat(true);
    promjenaP5->setFocusPolicy(Qt::NoFocus);
    promjenaP5->setGeometry(promjenaP1->x()+156, promjenaP1->y()+135, 126, 105);
    promjenaP5->show();

    promjenaP6 = new QPushButton(this);
    promjenaP6->setFlat(true);
    promjenaP6->setFocusPolicy(Qt::NoFocus);
    promjenaP6->setGeometry(promjenaP2->x()+156, promjenaP1->y()+135, 126, 105);
    promjenaP6->show();

    QObject::connect(frameZatvori, SIGNAL(clicked()), this, SLOT(zatvoriPozadineFunkcija()));

    QPixmap slika("/home/alen/QtSDK/writer/Pozadine/slika.jpg");
    QPixmap prebaci = slika.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP1->setIcon(prebaci);
    promjenaP1->setIconSize(QSize(126, 105));
    QPixmap slika1("/home/alen/QtSDK/writer/Pozadine/slika1.jpg");
    QPixmap prebaci1 = slika1.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP2->setIcon(prebaci1);
    promjenaP2->setIconSize(QSize(126, 105));
    QPixmap slika2("/home/alen/QtSDK/writer/Pozadine/slika2.jpg");
    QPixmap prebaci2 = slika2.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP3->setIcon(prebaci2);
    promjenaP3->setIconSize(QSize(126, 105));
    QPixmap slika3("/home/alen/QtSDK/writer/Pozadine/slika3.jpg");
    QPixmap prebaci3 = slika3.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP4->setIcon(prebaci3);
    promjenaP4->setIconSize(QSize(126, 105));
    QPixmap slika4("/home/alen/QtSDK/writer/Pozadine/slika4.jpg");
    QPixmap prebaci4 = slika4.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP5->setIcon(prebaci4);
    promjenaP5->setIconSize(QSize(126, 105));
    QPixmap slika5("/home/alen/QtSDK/writer/Pozadine/slika5.jpg");
    QPixmap prebaci5 = slika5.scaled(126, 105, Qt::IgnoreAspectRatio, Qt::FastTransformation);
    promjenaP6->setIcon(prebaci5);
    promjenaP6->setIconSize(QSize(126, 105)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:11:24.270

您的 GUI 未显示，因为此时未处理应用程序事件（我想您正在主线程中执行所有这些操作）。尝试推迟缩放像素图，例如，`QTimer::singleShot()`在计时器回调中使用并执行此操作。

# c# - 按顺序处理登录事件的好方法

> ID：16168948
> 
> 赞同：0
> 
> 时间：2013-04-23T12:06:36.500
> 
> 标签：c#, wpf, asynchronous, async-await

我有一个登录系统，需要：

1.  连接。
2.  等到它连接上。
3.  发送登录请求。
4.  等待此请求的响应。
5.  发送另一种请求。
6.  等待这个请求
7.  继续！

什么是处理这种情况的好方法，知道网络堆栈是事件驱动的，这基本上意味着当我接收数据时发送事件，当我连接时，等等。

我想知道我应该使用 Async 方法还是只使用一个简单的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:11:35.763

异步与否很大程度上取决于您提供给用户的 GUI 类型。如果您在控制台应用程序中实现此功能，则无需这样做，因为控制台总是一次只做一件事。另一方面，如果您要为用户提供功能齐全的 GUI，那么当您的应用程序尝试连接时，GUI 必须具有响应性，这一点很重要。

除此之外，当您通过套接字处理网络和通信时，使用数据包头是一个好主意。即，您应该首先发送一个数据包头，说明您将要发送登录请求的服务器，并且该头应主要包含两个信息： 1\. 将跟随什么样的数据包和 2\. 跟随数据包的长度是多少。同样，服务器将首先响应数据包头。

异步是一个好主意，您应该尝试使用网络实现异步方法，以优雅地处理用户交互并使 GUI 更具响应性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:23:41.963

如果您使用的是 WPF 4.5，那么新的 async/await 结构将非常适合您的场景。

[http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:32:46.843

可以通过调用线程来保持 GUI 响应`synchronous methods`能力`background`。

如果您计划让用户有机会接受`'Cancel'`其请求，异步调用基本上很有用[如果服务器响应太慢]

同步：

```
|----A-----| |-----B-----------| |-------C------| 
```

异步：

```
|----A-----|
   |-----B-----------| 
       |-------C------| 
```

考虑到您需要在进行下一步之前完成一个步骤，我认为异步方法不会给您带来任何显着优势（除了取消请求的能力）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:59:36.530

协程是一个不错的技巧

允许您循环执行异步任务

[C#中的协程](https://stackoverflow.com/questions/2599361/coroutines-in-c-sharp)

# javascript - 为什么 Array.sort 有时会两次比较某些值对？

> ID：16168955
> 
> 赞同：3
> 
> 时间：2013-04-23T12:06:59.317
> 
> 标签：javascript, sorting

`sort`我正在使用此 Javascript 代码查看调用该方法时比较数组元素的顺序。

```
function log(text)
{
    document.documentElement.appendChild(document.createElement('div')).appendChild(document.createTextNode(text));
}

[5, 4, 3, 2, 1].sort(function (a, b) {
    log("comparing " + a + " and " + b);
    return a - b;
}); 
```

看到不同的浏览器由于不同的实现而产生不同的输出，我并不感到惊讶。我无法理解的是为什么 IE 和 Opera 有时会连续两次比较同一对值。这对我来说没有任何意义。排序数组看起来像是一个基本的语言功能，我可能在这里遗漏了一些东西。有人可以解释这种行为吗？

这是我的测试结果：

# IE 9 和 10

*   **比较 4 和 5**
*   **比较 4 和 5**
*   比较 3 和 5
*   比较 3 和 4
*   比较 2 和 5
*   比较 2 和 4
*   比较 2 和 3
*   比较 1 和 5
*   比较 1 和 3
*   比较 1 和 2

# 火狐

*   比较 5 和 4
*   比较 5 和 3
*   比较 4 和 3
*   比较 2 和 1
*   比较 5 和 1
*   比较 3 和 1
*   比较 3 和 2

# 铬合金

*   比较 5 和 4
*   比较 5 和 3
*   比较 4 和 3
*   比较 5 和 2
*   比较 4 和 2
*   比较 3 和 2
*   比较 5 和 1
*   比较 4 和 1
*   比较 3 和 1
*   比较 2 和 1

# 歌剧

*   比较 5 和 4
*   比较 2 和 1
*   **比较 3 和 1**
*   **比较 3 和 1**
*   比较 3 和 2
*   比较 5 和 1
*   比较 4 和 1
*   比较 4 和 2
*   比较 4 和 3

以及概念证明：http: [//jsfiddle.net/Sd9ph/](http://jsfiddle.net/Sd9ph/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:00:09.070

我们不知道细节，因为它们的实现不是开源的。

然而，Opera 似乎使用了一些合并排序，其中合并阶段包括比较范围边界（在可能的情况下进行更有效的连接而不是逐项合并）。在最小的情况下，其中一个范围中只有一个项目 - 如果它不能只是前置，则将对其进行两次比较。它*可以*使用优化，但不会经常发生，所以显然不值得。

您可以使用三项数组检查[此处的行为。](http://jsfiddle.net/Sd9ph/2/)示例`[3,2,1]`：

```
3 2 1

[3][2 1] // divide

[3][2 1] // compare (and exchange)
    ^ ^
[3][1 2] // compare upper with lower boundary (would concat if possible)
  ^^
[3][1 2] // but they're overlapping, so let's merge…
 ^  ^
1 [3][2] // …by comparing smallest items from each set
   ^  ^
1 2 3 
```

的示例`[2,1,4,3]`，具有连接：

```
2 1 4 3

[2 1][4 3] // divide

[2 1][4 3] // and sort sub-arrays
 ^ ^  ^ ^
[1 2][3 4] // compare boundaries
    ^^
1 2 3 4    // uh, we're done already! 
```

这种连接将使（至少部分）已经排序的数组的合并排序更快。

相比之下，Internet Explorer 执行经典的插入排序。我假设它首先测试数组是否已经排序 - 在第一次比较时失败，4 不是 >= 5。然后它在 5 之前插入 4，在 5 和 4 之前插入 3，在 5 和 4 和 3 之前插入 2，并且由于 1 缺少与 4 的比较，因此它似乎使用了一种二进制搜索。

# iphone - 在项目中添加了 Tapku 库，导致 Sen TestingKit 错误

> ID：16168958
> 
> 赞同：0
> 
> 时间：2013-04-23T12:07:02.433
> 
> 标签：iphone, error-handling

我已经在我的项目 tapku 日历库中添加了，它给出了错误

```
SenTestingKit/SenTestingKit.h file not found 
```

我没有得到这个错误是如何删除它的。我找到了这个[链接](https://stackoverflow.com/questions/8939806/sentestingkit-not-found-in-xcode4)，但对我没有帮助，我没有得到它。请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:35:16.227

您必须`SenTestingKit.framework`在应用程序的目标 > 摘要 > 链接框架和库中添加到您的项目

# tcl - 类似于 Quickcheck 或 ScalaCheck 的 Tcl 工具

> ID：16168963
> 
> 赞同：0
> 
> 时间：2013-04-23T12:07:12.720
> 
> 标签：tcl

是否有可用于 Tcl 的自动测试用例生成？类似于 quickcheck 或 scala 检查？互联网搜索没有发现任何图书馆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:12:56.137

tl; dr：我不知道，但是您可以很容易地在 tcltest 之上对其进行编码。

* * *

我查看了一些 QuickCheck 和 ScalaCheck 教程。有趣，但他们有一个问题是不能保证找到问题。这些例子都很好地展示了事情是如何工作的，当发现*短*输入问题时，但使用随机输入模型（我怀疑泊松分布？）我真的认为找到上限或特定值的机会不大除非您确实提供了大量数据，否则失败。

还有一个问题是 Tcl 代码通常是有状态的。当你有状态时进行测试需要更复杂的方法。基本上，您*通常*需要一段额外的代码将系统*置于*您想要测试的状态，而另一段代码将系统*从*该状态中取出并返回到静止状态。好的测试框架有这种东西，所以它实际上不是一个真正的问题。只是您需要注意的并发症。

但是我们可以利用 Tcl 几乎是一种特定于领域的语言这一事实*​​来*制作我们自己的小模糊测试器。（`upvar`and`uplevel`命令对于这类事情非常有用。）

```
package require tcltest 2

proc fuzzInteger {var from to count test} {
    upvar 1 $var v
    for {set i 0} {$i < $count} {incr i} {
        set v [expr {$from+int(rand()*($to-$from))}]
        uplevel 1 $test
    }
}
proc fuzzList {var P language count test} {
    upvar 1 $var v
    for {set i 0} {$i < $count} {incr i} {
        set v {}
        while {rand() <= $P} {
            lappend v [lindex $language [expr {int(rand() * [llength $language])}]]
        }
        uplevel 1 $test
    }
}

# Demonstrate by throwing random crap into 'lindex'; it should never produce an error
fuzzList abcList 0.5 {a b c} 500 {
    fuzzInteger foobar 0 20 500 {
        tcltest::test lindex-fuzztest-[incr count] "fuzzed: lindex {$abcList} $foobar" -body {
            lindex $abcList $foobar
        } -match glob -result *
    }
}
# Print the final report
tcltest::cleanupTests 
```

在这种情况下，不需要状态设置/清理；这些将由 . 的`-setup`and`-cleanup`子句处理`tcltest::test`。另请注意，记录测试标题中使用了哪些模糊值*或*在正文中进行替换是一个非常好的主意（顺便说一句，第二个更难；我上面的示例显示了第一个）。

# c# - 如何旋转可编辑网格的行？

> ID：16168970
> 
> 赞同：2
> 
> 时间：2013-04-23T12:07:36.753
> 
> 标签：c#, asp.net-mvc, linq, entity-framework-5

我需要能够在可编辑的网格中输入数据，动态列由查找表中的行数确定。这不是实际示例，但它是我正在尝试做的类似的简单案例：

```
public class Student {
  public long ID {get; set;}
  public string FirstName {get; set;}
  public string LastName {get; set;}
  ...
}

public class Assessment {
  public long ID {get; set;}
  ...
}

public class AssessmentQuestion {
  public long ID {get; set;}
  public long AssessmentID {get; set;}
  public int QuestionNo {get; set;}
  public int PointValue {get; set;}
  ...
}

public class StudentAssessment {
  public long ID {get; set;}
  public long StudentID {get; set;}
  public long AssessmentID {get; set;}
  ...
}

public class StudentAssessmentAnswer {
  public long ID {get; set;}
  public long StudentAssessmentID {get; set;}
  public long AssessmentQuestionID {get; set;}
  public int PointsAwarded {get; set;}
  public string Comments {get; set;}
  ...
} 
```

根据上述结构，学生可以参加给定的评估。我们可以将评估、评估问题、学生和学生评估数据的创建视为给定的。现在用户正在对评估进行评分，她想检查所有试卷并输入每个学生每个问题的得分。因此，为了最大程度地方便使用，评分者应该看到一个可编辑的网格，每行有一个学生姓名，每个问题都有列，他们可以在所有单元格中使用标签，为每个问题输入点和评论（如果有的话）。然后，在点击“保存”时，应填充 StudentAssessmentAnswer 表。当然，阅读应该使用外连接，因为即使学生评估和问题之间没有 StudentAssessmentAnswer 连接，我们仍然要输入分数。

那么，当列数取决于该 AssessmentID 的 AssessmentQuestion 表中的行数时，如何制作这样的网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T19:48:50.930

有几种商用网格可以做到这一点（有点），即。[Telerik MVC 网格](http://demos.telerik.com/aspnet-mvc/razor/grid/hierarchyserverside)：

![在此处输入图像描述](https://i.stack.imgur.com/zbl7B.jpg)

# android - 使用第三方应用程序在运行时打开解密文件而不存储解密数据

> ID：16168972
> 
> 赞同：1
> 
> 时间：2013-04-23T12:07:46.477
> 
> 标签：android, security, android-intent, android-contentprovider

在我的应用程序中，我需要将动态解密的文件传递给第三方应用程序，而不将其保存到设备中。

示例：我有一个自己创建的加密文件，其中包含一个 pdf 文件和一些要求，然后才能显示 pdf 文件。如果所有要求都满足，则该 pdf 文件应由第三方 PDF 阅读器显示。

所以我需要开始一个新的意图，但是有问题。我必须提供我的 pdf 文件的 URI，但我没有 URI，因为我没有将文件保存到设备中。

有什么办法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:19:23.917

对于非常小的 PDF 或使用某种流加密算法加密的 PDF，您可以创建一个管道`ContentProvider`. 使用管道，您基本上将数据倒入一个`OutputStream`中，而另一方使用 a `Uri`and`ContentResolver`来检索相应的`InputStream`.

但是，堆空间的限制将严重限制文件的大小，如果您不能以流方式处理它（例如，当您从 HTTP 读取字节时，动态解密并将解密的字节传递给`OutputStream`.

[这是](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)创建这样一个`ContentProvder`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T19:42:22.110

回答我自己的问题：

连同来自 CommensWare 的答案（和[示例代码](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)）和[这个链接](http://blog.tomgibara.com/post/779006479/sharing-dynamic-resources)，我找到了一个半解决方案。

示例代码向您展示了如何使用内容提供程序使其他应用程序可以访问本地文件。第二个链接描述了删除方法的实现，该方法甚至在第三方应用程序完全打开文件之前从文件结构中删除文件（并解释了为什么这是可能的）。

所以基本上，解密后，您创建一个可从内容提供者访问的文件，用另一个应用程序打开它并立即删除它。

对于有根手机，这仍然不是 100% 的解决方案，因为它们可以监控本地文件结构的变化，并在文件创建后立即复制文件。

# java - PostgreSQL 中带有特殊字符的全文搜索异常

> ID：16168974
> 
> 赞同：0
> 
> 时间：2013-04-23T12:07:47.477
> 
> 标签：java, hibernate, jakarta-ee, ejb, postgresql-8.4

我正在尝试通过搜索文本获取对象列表。如果我使用特殊字符串进行此操作，例如

```
searchText ="Agenya\\&\&"; 
```

像这样查询（我用的是Postgres的全文搜索方法）

```
select object from Object object where object.Id = :Id and fts('english',object.searchColumn,'Agenya\\&\&') = true  order by object.objectName asc 
```

我得到这样的例外：

```
javax.ejb.EJBException: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.jboss.ejb3.tx.Ejb3TxPolicy.handleExceptionInOurTx(Ejb3TxPolicy.java:63)
    at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:83)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:191)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:95)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)
    at org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:110)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:46)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessContainer.dynamicInvoke(StatelessContainer.java:304)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invokeLocal(IsLocalInterceptor.java:81)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:72)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessRemoteProxy.invoke(StatelessRemoteProxy.java:107)
    at $Proxy1152.getAllOpportunitiesBySearchText(Unknown Source)

Caused by: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2223)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:28:46.020

您正在运行相当过时的 Postgres 8.4。此版本中的默认设置[**`standard_conforming_strings`**](https://www.postgresql.org/docs/current/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)是`off`.

这给了你什么？

```
SHOW standard_conforming_strings; 
```

如果你得到`off`，字符串中的反斜杠将被视为转义字符。从这个问题中我不清楚什么应该是转义字符，什么应该是文字反斜杠。相应地清理你的字符串。

将文字反斜杠加倍并在字符串前面加上，`E`以便它们在切换后继续工作。或切换到`on`. 请务必先了解后果。

还要检查您的任何软件层是否也被`\`视为转义字符。你可能不得不再次加倍。如果有疑问，[`log_statement = on`](https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-LOG-STATEMENT)请在数据库日志中记录语句并检查 Postgres 实际获取的内容。

升级到当前版本的 Postgres。

* * *

旁白：

在 Postgres 中，表达式如下：

```
fts(...) = true 
```

...在`WHERE`子句中可以简化为：

```
fts(...) 
```

如果没有双引号[，标识符将转换为小写。](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)所以：

```
from Object object 
```

...实际上只是一种嘈杂的说法：

```
from object 
```

看：

*   [PostgreSQL 列名是否区分大小写？](https://stackoverflow.com/questions/20878932/are-postgresql-column-names-case-sensitive/20880247#20880247)

# javascript - 如何在不使用 Javascript 在 chrome 中加载弹出窗口的情况下检查弹出窗口阻止程序已启用

> ID：16168979
> 
> 赞同：3
> 
> 时间：2013-04-23T12:07:57.127
> 
> 标签：javascript, jquery

我在 Firefox 中使用了以下代码，它可以工作。但不能在 chrome 中工作。

```
var myTest = window.open("about:blank","","directories=no,height=100,width=100,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,top=0,location=no");
  if (!myTest) {
    alert("A popup blocker was detected.");
  } else {
    myTest.close();
    alert("No popup blocker was detected.");
  } 
```

如何使用 Jquery 检查 chrome 中启用的弹出窗口阻止程序。**我检查 了 Jsfiddle.net 中的[早期讨论](https://stackoverflow.com/questions/668286/detect-blocked-popup-in-chrome)。但它在 chrome 中不起作用。请帮助我，用 jsfiddle.net 给出答案。**

# log4net - log4net 在部署时未从 Autocad 插件记录

> ID：16168982
> 
> 赞同：1
> 
> 时间：2013-04-23T12:08:02.343
> 
> 标签：log4net, autocad-plugin

我正在使用 autocad 的 .net API 开发 AutoCAD 2012 插件。Autocad 插件是 dll，在 Autocad 启动时加载到 Autocad 运行时。我已经能够使用 Visual Studio 开发环境从 log4net 成功登录。但是，当我在Visual Studio之外运行插件时，也就是部署插件时，log4net不会记录任何消息，甚至不会创建日志文件。这里是日志相关的代码和配置文件。

**log4net_autocad.config**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false"/>
  </configSections>

  <log4net>
    <appender name="AutocadRollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="File" value="${NIRVANA_SOFTWARE_INSTALL_PATH}Relay_Manager_Autocad.log"/>
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="0" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p [%C.%M] %m%n"/>
      </layout>
    </appender>
    <logger name="AutocadFile">
      <level value="All"/>
      <appender-ref ref="AutocadRollingFileAppender"/>
    </logger>
  </log4net>
</configuration> 
```

**myPlugin.cs：**配置日志记录的代码

```
public class MyPlugin : IExtensionApplication {

    private static log4net.ILog log;

    void IExtensionApplication.Initialize() {
        ...
        log4net.Config.XmlConfigurator.Configure(new System.IO.FileInfo("log4net_autocad.config"));
        log = log4net.LogManager.GetLogger("AutocadFile");
    } 
```

**void IExtensionApplication.Initialize()**将在 Autocad 启动时执行。我检查过的几件事：

*   检查 Autocad 插件是否正确加载到 Autocad 中，这意味着 log4net 初始化代码已运行。
*   检查 log4net 配置文件 (log4net_autocad.config) 是否复制到已部署应用程序的 bin 目录中

奇怪的是，当我在开发环境（VS 2010）中加载插件时，插件正确记录。那么为什么 log4net 在部署中没有记录（甚至创建日志文件）。

**编辑：** 我检查了一些额外的东西

在我登录之前的插件中，我通过警报对话框检查了以下内容。

*   log.Logger.Name正确返回我正在使用的记录器的名称**。**
*   log.Logger.IsEnabledFor(log4net.Core.Level.All) 返回 false，即使我在配置文件中配置了**Level Value=All**。

**EDIT-2** 我尝试按照答案的引用网址中的说明定义配置文件。我引用了文档中概述的方法。

> 2.] 应用程序配置文件：[AppName].exe.config, [AppName].dll.config 应用程序级配置 [AppName].exe.config 或 [AppName].dll.config 是本文档的大部分内容会花时间。此配置文件将包含所有应用程序级设置，甚至可用于定义与漫游用户和本地用户配置文件相关的设置的使用和默认值。这些文件通常存储在与应用程序可执行文件相同的目录中，但如果需要，可以放在其他地方。将来会有更多关于这个的讨论。

上述方法适合我的应用程序，但我仍然无法让记录器记录任何内容。我定义了一个名为**RelayAnalysis_Autocad.dll.config**的 log4net 配置文件，并将其提供给 log4net 进行配置。我认为还有一些我无法理解的东西。我开始怀疑我们是否可以使用 autocad 插件中的 log4net 进行日志记录？我还删除了环境路径并对其进行了硬编码，以消除有关读取环境变量的任何问题。仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T21:57:24.197

在部署时，您应该将插件配置存储在[默认配置文件](http://aucache.autodesk.com/au2011/sessions/5462/class_handouts/v1_Configure%20Your%20.Net%20Application%20-%20The%20Other%20INI.pdf)之一中：

*   `User.config`
*   `acad.exe.config`
*   `machine.config`

可能是在安装过程中***仔细***更改`User.config`的最佳文件。此外，您应该设计和编码更改，以便它们可以在卸载时恢复。

 *仔细检查您是否`${NIRVANA_SOFTWARE_INSTALL_PATH}`在安装过程中正确替换了该文件夹并且该文件夹具有适当的权限。

此外，我会尝试将以下行添加到 AssemblyInfo.cs

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile="AbsolutePathToTheConfig")] 
```

（在这种情况下，您不应调用 XmlConfigurator.Configure）或在调用中使用绝对路径

```
log4net.Config.XmlConfigurator.Configure(new FileInfo("AbsolutePathToTheConfig")); 
```

最后，请注意有关[XmlConfigurator.Configure](http://logging.apache.org/log4net/release/sdk/log4net.Config.XmlConfigurator.Configure_overload_5.html)的 log4net 文档指出，所使用的配置文件可能是与 .NET 配置规则不匹配的 XML。

> 配置文件必须是有效的 XML。它必须至少包含一个名为 log4net 的元素，该元素包含 log4net 配置数据。

因此，在`log4net_autocad.config`文件中您可以跳过该`<configuration>`元素：

```
<log4net>
    <appender name="AutocadRollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="File" value="Absolute\Path\To\Relay_Manager_Autocad.log"/>
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="0" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p [%C.%M] %m%n"/>
      </layout>
    </appender>
    <logger name="AutocadFile">
      <level value="All"/>
      <appender-ref ref="AutocadRollingFileAppender"/>
    </logger>
</log4net> 
```*

# c++ - c++11 std 数组 - gcc 和 Visual Studio 的区别

> ID：16168987
> 
> 赞同：1
> 
> 时间：2013-04-23T12:08:17.030
> 
> 标签：c++, arrays, c++11, std

我对这部分代码有疑问：

```
typedef std::array<u32, 3> my_array;

void foo()
{
    my_array a1{{1, 2, 3}};
    a1 = {{1, 2, 3}}; // PROBLEM - does not work;

    my_array a2{{3, 2, 1}};
    a1 = a2;
} 
```

GCC 4.7 也编译此代码，但从 2012 年 11 月开始使用 cl 的 Visual Studio 失败并显示：

```
 error C2679: binary '=' : no operator found which takes a right-hand
 operand of type 'initializer-list' (or there is no acceptable
 conversion) 1>        C:\Program Files (x86)\Microsoft Visual Studio
 11.0\VC\INCLUDE\array(211): could be 'std::array<u32,3> &std::array<u32,3>::operator =(const std::array<u32,3> &)' 1>       
 while trying to match the argument list '(my_array, initializer-list)' 
```

这种语法是否正确并符合 c++11 标准？我找不到有关此的任何信息，也不知道我应该责怪哪个编译器。提前感谢您的帮助。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:11:35.210

正如我所说，`VS2012`有点蹩脚并且有一些困难`C++11`，如果你想要一个列表，看[这里](http://cpprocks.com/c11-compiler-support-shootout-visual-studio-gcc-clang-intel/)。

# java - 使用 gmetric4j 将 mterics 发布到神经节

> ID：16168993
> 
> 赞同：1
> 
> 时间：2013-04-23T12:08:52.457
> 
> 标签：java, ganglia

我正在考虑使用 gmetric4j 将指标发布到神经节。到目前为止，我发现这样做的唯一记录方法是使用它的 GSampler 类来制作在预定时间运行的 Metric 数据轮询 Runnable。

但是，在我的应用程序中，让组件自己在认为合适时发布度量数据会更容易（即不是定期安排的时间间隔）。通过检查 gmetric4j 源代码，我可以看到这可以使用 GMetric 对象来完成，但我不确定这最终是否会产生有意义的结果。

所以我想知道的是：

你能不定期地向神经节发布数据吗？如果可以，在这种情况下，数据聚合和时间序列是如何形成的？

我也无法理解gmetric调用的“tmax”（命令行上的-x）和“dmax”（命令行上的-d）参数的含义以及它们是否与上述问题有关。有没有人知道更多关于这些的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T05:00:12.317

您是否尝试[过度量](https://github.com/dropwizard/metrics)库？它有一个 Ganglia 记者负责何时以及如何将您的测量结果发送到 gmond/gmetad。如果您需要代码示例，还可以查看源代码。

对于 dmax、tmax 和报告频率，我发现这是一个[很好的来源](http://monami.sourceforge.net/tutorial/ar01s06.html)

# c++ - FibonacciHeap increase_key 实现

> ID：16168995
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:05.523
> 
> 标签：c++, algorithm, stl, fibonacci-heap

.

嗨，大家好，

我正在使用 Erel Segal 的 C++ STL FibonacciHeap [http://ideone.com/9jYnv](http://ideone.com/9jYnv)，我认为它缺少 increase_key() 方法。

```
/**
  * template Fibonacci Heap 
  *
  * @ref http://en.wikipedia.org/wiki/Fibonacci_heap
  * @ref http://www.cse.yorku.ca/~aaw/Jason/FibonacciHeapAlgorithm.html
  * @author Erel Segal http://tora.us.fm/rentabrain
  * @date 2010-11-11
  */ 
```

我即将自己实现它，但我没有找到很多关于理论实现的参考。

您能给我一些关于如何进行 increase_key 操作的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:47:41.290

# [Boost.Heap](http://www.boost.org/doc/libs/1_53_0/doc/html/heap.html)

只需使用[`boost::heap::fibonacci_heap`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/heap/fibonacci_heap.html)- 它同时具有[`increase`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/heap/fibonacci_heap.html#idp18368448-bb)和[`decrease`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/heap/fibonacci_heap.html#idp38883264-bb)。它是可靠的，并[在不同的平台上进行了测试](http://www.boost.org/development/tests/trunk/developer/heap.html)。

它是仅头文件库，这意味着您不需要编译它并链接它。