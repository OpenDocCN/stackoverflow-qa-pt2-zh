# StackOverflow 问答 14825000-14825999

# css - Wordpress.org 博客 - 将特色图片置于帖子顶部

> ID：14825006
> 
> 赞同：1
> 
> 时间：2013-02-12T03:40:08.673
> 
> 标签：css, image, wordpress, center, featured

我的网站使用 wordpress.org 和 bluehost：www.thekatsup.com

主页是一堆专辑封面，然后单击专辑，它会打开带有歌曲封面图片、音频链接和下载链接的帖子。

图片是通过“特色图片”选项设置的，所以我不能通过 HTML 在帖子中更改它，它必须通过 CSS 完成。

通过玩弄它，我发现玩弄CSS 的[这个](http://postimage.org/image/hhl5g1hwf/)（屏幕截图）部分会在专辑封面周围移动，但随后它也会移动我在帖子中的其他图像。

有没有办法让我所有专辑的专辑封面居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:05:25.960

```
display: block; 
```

会成功的

你的规则：

```
.post img {
background:#fff;
border:0 solid rgba(0,0,0,0.2);
box-shadow:0 0 1px rgba(0,0,0,0.1);
padding:3px;
display: block;
margin:0 auto;
margin-bottom:15px;
position:relative;
z-index:5;
} 
```

# asp.net-mvc - 使用 MVC 4 Web API 从网站获取数据

> ID：14825012
> 
> 赞同：0
> 
> 时间：2013-02-12T03:40:42.427
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

这是这篇文章的后续内容：[MVC 4 Web API 的新内容 对 HTTPRequestMessage 感到困惑](https://stackoverflow.com/questions/14804615/new-at-mvc-4-web-api-confused-about-httprequestmessage)

以下是我想要做的总结：有一个网站，我想通过 MVC 4 Web API 与之交互。在该站点，用户可以使用用户名和密码登录，然后转到一个名为“原始数据”的链接以从该站点查询数据。

在“原始数据”页面上，有一个用于“设备”的下拉列表、一个用于“从”日期的文本框和一个用于“到”日期的文本框。给定这三个参数，用户可以单击“获取数据”按钮，并将数据表返回到页面。我要做的是在 Azure 上托管一项服务，该服务将以编程方式将这三个参数的值提供给站点，并将 CSV 文件从站点返回到 Azure 存储。

托管该站点的公司已提供文档以通过编程方式与该站点交互以检索这些原始数据。该文档描述了如何针对他们的云服务提出请求。必须使用自定义 HTTP 身份验证方案对请求进行身份验证。以下是身份验证方案的工作原理：

1.  根据用户密码计算 MD5 哈希。
2.  将请求行附加到第一步中的值的末尾。
3.  在第二步中将日期标题附加到值的末尾。
4.  将消息正文（如果有）附加到步骤 3 中的值的末尾。
5.  计算来自步骤 4 的结果值的 MD5 散列。
6.  使用“:”字符作为分隔符将步骤 5 中的值附加到用户电子邮件。
7.  根据步骤 6 中的值计算 Base64。

我要列出的代码是在 Visual Studio 2012、C#、.NET Framework 4.5 中完成的。这篇文章中的所有代码都在我的“FileDownloadController.cs”控制器类中。'getMd5Hash' 函数接受一个字符串，并返回一个 MD5 哈希：

```
//Create MD5 Hash:  Hash an input string and return the hash as a 32 character hexadecimal string. 
    static string getMd5Hash(string input)
    {
        // Create a new instance of the MD5CryptoServiceProvider object.
        MD5CryptoServiceProvider md5Hasher = new MD5CryptoServiceProvider();

        // Convert the input string to a byte array and compute the hash. 
        byte[] data = md5Hasher.ComputeHash(Encoding.Default.GetBytes(input));

        // Create a new Stringbuilder to collect the bytes 
        // and create a string.
        StringBuilder sBuilder = new StringBuilder();

        // Loop through each byte of the hashed data  
        // and format each one as a hexadecimal string. 
        for (int i = 0; i < data.Length; i++)
        {
            sBuilder.Append(data[i].ToString("x2"));
        }

        // Return the hexadecimal string. 
        return sBuilder.ToString();
    } 
```

此函数接受一个字符串，并返回 BASE64：

```
 //Convert to Base64
    static string EncodeTo64(string input)
    {
        byte[] str1Byte = System.Text.Encoding.ASCII.GetBytes(input);
        String plaintext = Convert.ToBase64String(str1Byte);

        return plaintext;
    } 
```

下一个函数创建一个 HTTPClient，发出一个 HTTPRequestMessage，并返回授权。注意：以下是从“原始数据”页面返回数据时从 Fiddler 返回的 URI：GET /rawdata/exportRawDataFromAPI/?devid=3188&fromDate=01-24-2013&toDate=01-25-2013 HTTP/1.1

让我先来看看这个函数发生了什么：

1.  “WebSiteAuthorization”函数需要一个“deviceID”、一个“fromDate”、一个“toDate”和一个“password”。
2.  接下来，我声明了三个变量。我不清楚我是否需​​要“消息正文”，但我有这个设置的通用版本。其他两个变量保存 URI 的开头和结尾。
3.  我有一个名为“dateHeader”的变量，它包含数据头。
4.  接下来，我尝试创建一个 HTTPClient，为其分配带有参数的 URI，然后将“application/json”分配为媒体类型。我仍然不太清楚应该如何构建它。
5.  在下一步中，根据 API 文档的要求创建授权，然后返回结果。

    ```
    public static string WebSiteAuthorization(Int32 deviceid, string fromDate, string toDate, string email, string password)
    {
        var messagebody = "messagebody"; // TODO: ??????????? Message body
        var uriAddress = "GET/rawdata/exportRawDataFromAPI/?devid=";
        var uriAddressSuffix = "HTTP/1.1";

        //create a date header
        DateTime dateHeader = DateTime.Today;
        dateHeader.ToUniversalTime();

        //create the HttpClient, and its BaseAddress
        HttpClient ServiceHttpClient = new HttpClient();
        ServiceHttpClient.BaseAddress = new Uri(uriAddress + deviceid.ToString() + " fromDate" + fromDate.ToString() + " toDate" + toDate.ToString() + uriAddressSuffix);
        ServiceHttpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        //create the authorization string
        string authorizationString = getMd5Hash(password);
        authorizationString = authorizationString + ServiceHttpClient + dateHeader + messagebody;
        authorizationString = email + getMd5Hash(authorizationString);
        authorizationString = EncodeTo64(authorizationString);

        return authorizationString;

    } 
    ```

我还没有在 Azure 上测试过。我还没有完成获取文件的代码。我知道我需要做的一件事是确定创建 HttpRequestMessage 并使用 HttpClient 发送它的正确方法。在我阅读的文档和我查看的示例中，以下代码片段似乎是解决此问题的可能方法：

```
Var serverAddress = http://my.website.com/;
//Create the http client, and give it the ‘serverAddress’:
Using(var httpClient = new HttpClient()
{BaseAddress = new Uri(serverAddress)))
Var requestMessage = new HttpRequestMessage();
Var objectcontent = requestMessage.CreateContent(base64Message, MediaTypeHeaderValue.Parse          (“application/json”) 
```

或者 - -

```
var formatters = new MediaTypeFormatter[] { new jsonMediaTypeFormatter() }; 
HttpRequestMessage<string> request = new HttpRequestMessage<string>
("something", HttpMethod.Post, new Uri("http://my.website.com/"), formatters); 

request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json"); 

var httpClient = new HttpClient(); 
var response = httpClient.SendAsync(request); 
```

或者 - - -

```
Client = new HttpClient();
var request = new HttpRequestMessage
                 {
                     RequestUri = "http://my.website.com/",
                     Method = HttpMethod.Post,
                     Content = new StringContent("ur message")
                 }; 
```

我不确定这部分代码采用哪种方法。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:28:42.157

阅读[此](http://net.tutsplus.com/tutorials/building-an-asp-net-mvc4-application-with-ef-and-webapi/)分步[教程](http://net.tutsplus.com/tutorials/building-an-asp-net-mvc4-application-with-ef-and-webapi/)以了解基本知识。

# cuda - 哪个流应该用于 GPU 之间的统一虚拟地址 (UVA) 复制？

> ID：14825013
> 
> 赞同：1
> 
> 时间：2013-02-12T03:40:49.360
> 
> 标签：cuda

因此，如果我想在两个 GPU 之间进行统一虚拟地址 (UVA) 复制（使用带有 kind 参数的 cudaMemcpyAsync 是 cudaMemcopyDefault），我应该使用哪个流？源内存的设备流？还是注定记忆的开发流？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:15:12.217

建议：改用[cudaMemcpyPeerAsync](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g8ff91443cbf4bb9334bec897ac7d6691)。以[这个问题](https://stackoverflow.com/questions/14263986/using-peered-gpus-in-a-single-stream/14264899#14264899)为例。

我想[从这里](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)回答你的问题：

> 流和事件行为
> 
> 如果将内核启动或内存复制发布到与当前设备无关的流，则会失败

因此，请选择与您最近`cudaSetDevice()`拨打的电话对应的设备对应的流。

# ruby - 什么是按属性对数组进行排序的好方法，但在 Ruby 中不是自然排序的？

> ID：14825014
> 
> 赞同：0
> 
> 时间：2013-02-12T03:41:02.270
> 
> 标签：ruby

```
array = [{ name:'Joe', class:'foo' },
         { name:'Bob', class:'bar' },
         { name:'Hal', class:'baz' },
         { name:'Kim', class:'qux' },
         { name:'Zoe', class:'bar' }
        ] 
```

按以下顺序按类排序的好方法是什么：qux、bar、foo、baz？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T03:45:02.513

像这样，例如：

```
array = [{ name:'Joe', class:'foo' },
         { name:'Bob', class:'bar' },
         { name:'Hal', class:'baz' },
         { name:'Kim', class:'qux' },
         { name:'Zoe', class:'bar' }
        ]

order = %w[qux bar foo baz]

sorted = array.sort_by{|el| order.index(el[:class])}

sorted # => [{:name=>"Kim", :class=>"qux"}, 
       #     {:name=>"Bob", :class=>"bar"}, 
       #     {:name=>"Zoe", :class=>"bar"}, 
       #     {:name=>"Joe", :class=>"foo"}, 
       #     {:name=>"Hal", :class=>"baz"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T03:44:26.653

```
order = %w[qux bar foo baz]
array.sort_by{|h| order.index(h[:class])} 
```

给出：

```
[
  {
    :name  => "Kim",
    :class => "qux"
  },
  {
    :name  => "Bob",
    :class => "bar"
  },
  {
    :name  => "Zoe",
    :class => "bar"
  },
  {
    :name  => "Joe",
    :class => "foo"
  },
  {
    :name  => "Hal",
    :class => "baz"
  }
] 
```

# php - 带进度条的 PHP 批处理

> ID：14825016
> 
> 赞同：0
> 
> 时间：2013-02-12T03:41:13.120
> 
> 标签：php, excel, batch-file, import, progress-bar

我一直在搜索 PHP 批处理教程，但到目前为止还没有。

我的任务是从 MS Excel 导入数据。对于每个 excel 数据，将由 PHP 处理以创建 mysql 行。

由于 1 excel 数据的复杂性，我想构建一个批处理系统，其中 PHP 一次处理 1 行，显示一些进度条。然后防止超时（设置为 60 秒）。

对此有任何指导方针/示例/等吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:47:23.237

通常对于 CSV，我会使用`fgetcsv`- [http://php.net/manual/es/function.fgetcsv.php](http://php.net/manual/es/function.fgetcsv.php) - 它可以让你一次做一行。

对于进度条，您可以为处理的每一行和来自浏览器的[AJAX请求更新一个](http://api.jquery.com/jQuery.getJSON/)[JSON](http://www.w3schools.com/json/default.asp)文件，以读取该文件并使用 javascript 在前端显示客户端的进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:48:28.277

为了防止超时，您必须设置**set_time_limit(0);** 如果您希望浏览器不超时，首先是代码，您必须回显一些数据并刷新浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:41:18.590

我不确定你想要什么，但我会试一试。据我了解，您需要一个批处理文件来在您的 PHP 程序运行时刺激进度条。

嗯，首先你需要知道你需要多少个细胞来做任何你想做的事情。只要这是可能的（并且它可以将数字导出到文本文件），那么它应该是可能的。

以下方法在运行时需要一个 .txt 文件来包含您需要处理的单元格数量（如果不能，您可能应该跳过整个答案）。然后它将扫描包含已处理的单元格数量的不同文本文件（最好这是文件中唯一的内容，否则这可能会变得很麻烦）。

在考虑生活方式之前了解我和我的谈话，这个答案可能永远不会被提交，因为我是一个白痴并且高估了我能完成的事情。

所以，事不宜迟……

```
@echo off & setlocal enabledelayedexpansion
for /f %%i in (file1) do set num1=%%i
set /a num1*=100
:update
if not exist file2 goto update
for /f %%i in (file2) do (
    if %%i equ %prog% goto update
    set prog=%%i
)
set /a prog*=100
set /a stat=%prog%/%num1%
cls
echo %stat% % done.
goto update 
```

嗯，结果比我预期的要好。这个答案可能刚刚发布。我应该注意的一件事是，您需要将`file1`and `file2`（出现两次）替换为相应文件的文件路径。file1 应该包含你需要做的任何事情的单元格数量。file2 应该具有您已处理的更新数量的单元格。

不幸的是，我没有对此进行测试，并且我确信会出现错误或可以进行某种改进。它被制作为模板并激发其他想法，而不是硬拷贝。

# ruby-on-rails-3 - Rails 3 中的动态按钮

> ID：14825018
> 
> 赞同：0
> 
> 时间：2013-02-12T03:41:38.387
> 
> 标签：ruby-on-rails-3, syntax-error

我有一个`link_to image_tag`点击时应该弹出一个模式以显示帮助屏幕。按钮代码为：

`<%= link_to image_tag('help_sm.png'), '#', :id =>"btnShowHelp_"{current_step} %>`

其中`{current_step}`是用户所在步骤的名称，对应于他们正在访问的帮助屏幕。

我正在`SyntaxError`输出`current_step`.

有人可以帮助使用正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:48:22.367

ruby 中的字符串插值看起来像这样：`"#{var}"`，所以你需要这样做：

```
<%= link_to image_tag('help_sm.png'), '#', :id =>"btnShowHelp_#{current_step}" %> 
```

请注意，字符串插值必须使用双引号（`"`），如果使用单引号（`'`），则不会插值。

# .net - 基类中的事件与派生类中接口事件的实现之间的冲突

> ID：14825021
> 
> 赞同：1
> 
> 时间：2013-02-12T03:41:47.027
> 
> 标签：.net, events, inheritance, interface, conflict

基类：

```
Public MustInherit Class Connector

    Public Event Changed as EventHandler

End Class 
```

界面：

```
Public Interface IPlug

    Event Changed as EventHandler

End Interface 
```

派生类：

```
Public Class OutputConnector
    Inherits Connector
    Implements IPlug

    Event Changed as EventHandler Implements IPlug.Changed

End Class 
```

VB.Net 问题：

当然，中的事件与中的事件`Changed`发生`OutputConnector`冲突。但我必须实现它以满足接口。`Changed``Connector``IPlug`

我该如何解决这个问题？

我有其他派生自`Connector`（例如一个`InputConnector`类）的类需要有`Changed`事件，但不实现`IPlug`。而且我不希望正在实现`IPlug`的派生类有一个额外的事件，只是为了避免名称冲突（如果我在基类或接口中更改了事件的名称，就会出现这种情况）。

有什么建议么？

编辑：

问题不在于名称本身，而是我希望派生类以某种方式将其接口事件实现映射到基类中的现有事件 - 而不必在派生类中声明附加事件（使用各种路由杂乱无章的启动）；毕竟，事件已经存在于基类中！我需要的是一种让界面知道的方法..

一个伪解决方案（只是为了说明）将能够使某些东西达到

```
Public Event MyBase.Changed Implements IPlug.Changed 
```

在派生`OutputConnector`类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:47:05.880

[这个问题](https://stackoverflow.com/questions/1577149/explicit-interface-implementation-in-vb-net)指出了两种使接口实现显式的方法。

*   将其设为私有
*   使用实现的名称不需要与接口名称匹配的事实。

所以这取决于你打算如何使用`IPlug.Changed`. 如果您将始终使用该接口进行交互，那么您可以简单地将其设为私有，即使它需要`Shadows`它也不会通过公共 API 可见。

另一种方法是为声明决定一个新名称，例如`OutputConnector.IPlugChanged`.

您选择哪个取决于您如何使用所有内容。

编辑：

您似乎希望这两个事件在功能上相同。

在这种情况下，最好的办法是`IPlug.Changed`通过使用不同的名称将其设为私有来隐藏实现。

一旦你隐藏了`IPlug.Changed`，使用你的`OnChange`受保护方法（假设你做了一个）来连接两者，在触发`IPlugChanged`时调用。`OnChange`

如果您没有`OnChange`受保护的方法，则可以附加一个执行上述调用的事件。请注意，如果您担心调用订单事件，这将不起作用。

最后一个选项可能是使用[自定义](http://msdn.microsoft.com/en-us/library/6hwhs172(v=vs.80).aspx)语法将更改流式传输`IPlug`到基类。

# c++ - 添加到缓冲区末尾的随机字节

> ID：14825022
> 
> 赞同：0
> 
> 时间：2013-02-12T03:42:01.410
> 
> 标签：c++, stream, unmanaged

我正在从该类中重新创建一些 System.IO 函数。当我设置一个缓冲区并分配 n 个字节时，它会读取字节，然后将随机字节添加到该缓冲区的末尾。

例如：

我的主要：

```
int main(int argc, char *args[])
{
    SetConsoleTitle(TEXT("Stream Test."));
    cout<<"Press any Key to begin reading.";
    cin.get();
    const char* data = File::ReadAllBytes(args[1]);
    Stream* stream = new Stream(data);
    char* magic = new char[8];
    stream->Read(magic, 0, 8);
    magic[8] = '\0';
    cout<<magic<<endl<<endl;
    delete[]data;
    cout<<"Press any key to quit.";
    cin.get();
    return 0;
} 
```

这是我的 System::IO 命名空间 + 流类：

```
namespace System
{
    namespace IO
    {
        class File
        {
        public:
            static char* ReadAllBytes(const char *name)
            {
                ifstream fl(name, ifstream::in|ifstream::binary);
                fl.seekg( 0, ifstream::end );
                size_t len = fl.tellg();
                char* ret = new char[len+1];
                ret[len] = '\0';
                fl.seekg(0); 
                fl.read(ret, len);
                fl.close();
                return ret;
            }

            //not sure of this use yet.
            static size_t fileSize(const char* filename)
            {
                ifstream in(filename, ifstream::in | ifstream::binary);
                in.seekg(0, ifstream::end);
                return in.tellg(); 
            }
        };

        class Stream
        {
        public:
            const char *_buffer;
            __int64 _origin;
            __int64 _position;
            __int64 _length;
            __int64 _capacity;

            bool _expandable;
            bool _writable;
            bool _exposable;
            bool _isOpen;

            static const int MemStreamMaxLength = 2147483647;

            Stream()
            {
                InitializeInstanceFields();
            }

            Stream(const char *buffer)
            {
                _buffer = buffer;
                _length = strlen(_buffer);
                _capacity = _length;
                _position = 0;
                _origin = 0;
                _expandable = false;
                _writable = true;
                _exposable = true;
                _isOpen = true;
            }

            int ReadByte()
            {
                if (_position >= _length)
                    return -1;
                return _buffer[_position++];
            }

            void Read(char* &buffer, int offset, int length)
            {
                if((_position + offset + length) <= _length)
                {
                    memcpy( buffer, _buffer + (_position + offset), length );
                    _position += length;
                }
            }

            private:
                void InitializeInstanceFields()
                {
                    _origin = 0;
                    _position = 0;
                    _length = 0;
                    _capacity = 0;
                    _expandable = false;
                    _writable = false;
                    _exposable = false;
                    _isOpen = false;
                }
        };
    }
} 
```

这就是最终发生的事情： ![怎么了](../Images/ed1c9676ed3c028f24bc468c613d8139.png)

谁能解释为什么会发生这种情况，我该如何解决，或者其他什么？我是 C++ 新手，所以任何解释都会有所帮助。另外请不要批评我的脚本，我知道它可能很糟糕、过时、已弃用等，但我愿意学习，任何有帮助的建议都会变得更好。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:51:17.147

您只能`operator << (char *)`在 C 风格的字符串上使用，而不是任意的字符数组。您如何期望它知道要输出多少个字符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:01:49.497

我猜该文件没有正确打开，因此根本没有设置魔法缓冲区，这留下了初始化的垃圾数据：

> 如果构造函数没有成功打开文件，尽管没有文件与流缓冲区关联并且设置了流的失败位（可以通过继承成员失败检查），但仍会创建对象。 [http://www.cplusplus.com/reference/fstream/ifstream/ifstream/](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)

尝试在此过程中添加更多错误检查（使用 cout），尤其是在打开和读取缓冲区时。也许将魔术缓冲区设置为零或成功时被覆盖的可识别的东西。

# bash - Bash 不适用于新用户

> ID：14825024
> 
> 赞同：0
> 
> 时间：2013-02-12T03:42:18.690
> 
> 标签：bash, tty

我刚刚使用*adduser --system --group studio*在我的机器中创建了一个新用户，用于音频目的，一切正常，直到我尝试打开一个终端，该终端立即打开和关闭。我尝试过使用其他终端（xfce4-terminal、Xterm 和 UXterm），但问题仍然存在。

然后我尝试登录一个 tty，它显示了一个奇怪的行为：它登录，显示消息*Last login: bla bla bla*，然后很快回到登录屏幕。所以我认为问题在于*bash*和这个特定的用户。使用老用户登录 tty 仍然有效。

我也尝试过创建文件*.bashrc*和*.profile*（实际上是从工作用户那里复制它们），但它也没有解决问题。

这对我来说是一种非常奇怪的行为，我以前从未见过这种情况。由于我无法从该用户访问任何 shell，因此无法诊断问题。我检查了*dmesg*和所有可能的日志，当错误发生时没有任何显示。我正在使用 Debian Wheezy 和 XFCE4。我的*名字 -a*是：

```
Linux t4rkus-nb 3.2.0-4-rt-686-pae #1 SMP PREEMPT RT Debian 3.2.35-2 i686 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:50:17.733

你为什么要传`--system`旗？从手册页：

> 新系统用户将拥有 shell /bin/false（除非被 --shell 选项覆盖），并禁用登录。不会复制骨架配置文件。

这意味着新用户具有`/bin/false`外壳，当您尝试使用它登录时它会立即存在。

# ios - 如何从视图中删除最深的子层？

> ID：14825026
> 
> 赞同：2
> 
> 时间：2013-02-12T03:42:31.747
> 
> 标签：ios, objective-c, cocoa, calayer

从视图的主层中删除最深的子层的方法是什么？应该很简单，我对iOS很陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T04:07:08.583

如果你真的是指后面的图层（不是视图），你也可以试试这个：

```
[[view.layer.sublayers objectAtIndex:0] removeFromSuperlayer]; 
```

如果要删除后视图，可以使用类似的：

```
[[view.subviews objectAtIndex:0] removeFromSuperview]; 
```

当然，如果你真的想删除*最深*的子层/子视图，包括那些子视图，你必须做这样的事情：

```
CALayer *layer = view.layer;
while ([layer.sublayers count] > 0) {
    layer = [layer.sublayers objectAtIndex:0];
}
[layer removeFromSuperlayer]; 
```

不过，这似乎是个坏主意。如果您真的在寻找它，我建议您重新考虑您真正在寻找什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T04:01:16.120

如果您的意思是最后面的子视图，请使用：

```
UIView *subViewToBeRemoved = [mainView.subviews objectAtIndex:0];
[subViewToBeRemoved removeFromSuperview]; 
```

mainView.subviews 将按其在屏幕上的可见顺序返回视图的子视图数组。

如果最深是指可以使用的最前面的视图

```
UIView *subViewToBeRemoved = [mainView.subviews lastObject];
[subViewToBeRemoved removeFromSuperview]; 
```

# html - 为什么我的页脚不粘在底部？

> ID：14825029
> 
> 赞同：0
> 
> 时间：2013-02-12T03:42:38.403
> 
> 标签：html, css

```
body {
    background: #ffffff;
    color: #000;
    font-family: Verdana, Arial, Sans-Serif;
    font-size: 13px;
    text-align: center; /* IE 5 fix */
    line-height: 1.4;
height: 100%;
margin: 0;
padding: 0;
}

#container {
    width: 50%;
    background: #fff;
    border: none;
    color: #000000;
    margin: auto auto;
    padding: 20px;
    text-align: left; /* IE 5 fix */
overflow:auto;
padding-bottom: 180px
}

#wrap {
min-height: 100%;
}

#footer {
background: #000 url(images/cbf/foot.png) repeat;
border-top: solid 1px #000;
position: relative;
width:100%;
margin-top: -180px; /* negative value of footer height */
height: 180px;
clear:both;
} 
```

一整天都在努力，也许我的眼睛只是因为疲惫而失明。

我也在 body 标签中加入了 wrap div，我清除了缓存并尝试了 Chrome 和 firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:51:12.073

尝试这个

```
#footer {
background: #000 url(images/cbf/foot.png) repeat;
border-top: solid 1px #000;
position: fixed;
bottom: 0;
width: 100%;
height: 180px;
clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:48:07.107

您是否尝试过添加`bottom:0;`到页脚？

::EDIT:: 不太确定您是在谈论整个页脚还是只是文本。如果你想要底部的文本，给它一个新的 div/class 并设置 bottom:0; 它会为你把它放在那里。如果你想把整个页脚放在底部，它已经在我的 Firefox 和 Chrome 中了。

::编辑2::

```
#copyright { font: 11px Verdana, Arial, Sans-Serif; bottom: 0; padding: 10px 0 0 0; } 
```

如果您也想要底部的链接，请将它们也添加到版权 div 中。

这是您的页脚：

```
#footer {
background: #000 url(../../../images/cbf/foot.png) repeat;
border-top: solid 1px #000;
position: relative;
width:100%;
bottom: 0px;
margin-top: -180px; /* negative value of footer height */
height: 180px;
clear:both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:02:42.303

我认为这门课有问题，试试下面的 chanegs ......我希望这应该可行......

```
#copyright {
    border: 0 none;
    bottom: 0;
    font: 11px Verdana,Arial,Sans-Serif;
    margin: 0;
    padding: 10px 0 0;
    position: relative;
    top: 110px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:15:34.523

似乎您将页脚的高度设置为 180px，这在您的代码中产生了问题`height: 180px`。

应该是`height: 60px`。

# audio - 未捕获的 TypeError：值不是 AudioBuffer 类型

> ID：14825030
> 
> 赞同：2
> 
> 时间：2013-02-12T03:42:52.767
> 
> 标签：audio, web, xmlhttprequest, audiobuffer

当我尝试运行 XHR 加载样本时出现此错误。未捕获的 TypeError：值不是 AudioBuffer 类型。一切似乎都是正确的，但我不确定问题是什么。

```
Kit.prototype.load = function(){
    if(this.startedLoading)
        return;
    this.startedLoading = true;

    // var kick = "samples/M-808Sn2.wav";
    var snare = "samples/M-808Sn2.wav";
    // var hihat = "samples/M-808Sn2.wav";

    // this.loadSample(0, kick, false);
    this.loadSample(1, snare, false);
    // this.loadSample(2, hihat, false);
} 
```

我从请求开始：

```
Kit.prototype.loadSample = function(sampleID, url, mixToMono){
// Load Asynchronously

var request = new XMLHttpRequest();
request.open("GET", url, true);
request.responseType = "arraybuffer";

var kit = this;

request.onload = function(){

    var buffer;
    context.decodeAudioData(request.response, function(decodedBuffer){
        buffer = decodedBuffer;
    });

    switch(sampleID){
        // case 0: kit.kickBuffer = buffer; break;
        case 1: kit.snareBuffer = buffer; break;
        // case 2: kit.hihatBuffer = buffer; break;
    }
}

request.send(); 
```

}

然后我尝试运行它。

```
 context = new webkitAudioContext();

var kit = new Kit();

kit.load();

var voice = context.createBufferSource();

voice.buffer = kit.snareBuffer;
voice.loop = true;
voice.playbackRate.value = 1;
voice.connect(gain);

voice.start(0);
voice.stop(2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T13:21:05.290

问题是`kit.load()`触发异步请求以加载和解码音频缓冲区。后面的两行（`createBufferSource`，分配缓冲区）立即跟随异步请求，无论文件是否已加载。所以你得到这个“值不是类型`AudioBuffer`”的原因是因为在你分配的时候`voice.buffer = kit.snareBuffer`，`kit.snareBuffer`仍然是未定义的，因为加载回调没有被触发。

这可能适用的原因`window.onload`是因为 XHR 请求可以在窗口加载之前运行，这意味着在`window.onload`触发事件处理程序时，XHR 请求已经返回并且`kit.snareBuffer`是一个已定义的`audioBuffer`.

这个答案来得有点晚，但希望它有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:53:20.897

看起来像 chrome 中的回归。即使我得到同样的错误。请参阅下面的 chrome 错误

[http://code.google.com/p/chromium/issues/detail?id=128826](http://code.google.com/p/chromium/issues/detail?id=128826)

# jquery - jquery，jsf集成不起作用..！

> ID：14825033
> 
> 赞同：0
> 
> 时间：2013-02-12T03:43:12.840
> 
> 标签：jquery, jsf, modal-dialog

我应该在单击确定链接时将 div 加载到模式对话框中。但它在这里不起作用是代码，有人可以帮忙。

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:rich="http://richfaces.org/rich"
xmlns:a4j="http://richfaces.org/a4j">
<h:head>

    <script src="JqueryLib/jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="js/jquery-1.8.2.js"></script>
<h:outputStylesheet library="css" name="application_1.css"></h:outputStylesheet>
<h:outputStylesheet library="css" name="jquery-ui.css"></h:outputStylesheet>

<script>
$(document).ready(function(){
$("#viewDetails").click(function(){

$("#popup").dialog({
     modal: true,
    height: 400,
    width:600,
     buttons: {
     Ok: function() {
     $( this ).dialog( "close" );} }
});

})    
});
</script>
</h:head>
<h:body>

<ui:composition template="/template.xhtml">

            <ui:define name="title">my title</ui:define>

            <ui:define name="content">

                <div class="content2">

                    <div class="tabs">

                        <h1>Overview</h1>

                            <p>
                                test test
                            </p>

                        <f:view>

                            <h:form id="testForm">

                            <h:outputLink id="viewDetails" value="#">
                <h:outputText value="View Details"/>
            </h:outputLink>

            <h:panelGroup id="popup" class="popup" title="test Panel" layout="block" >

            </h:panelGroup>

                            </h:form>

                        </f:view>

                    </div>

                </div>

            </ui:define>

        </ui:composition>

</h:body>

</ui:composition> 
```

不知道这里出了什么问题，当我单击应该显示对话框的链接时，如果我用一个简单的 jsf 页面测试它可以正常工作，但不是这个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:44:46.373

```
<ui:composition ... xmlns:rich="http://richfaces.org/rich">
...
<script src="JqueryLib/jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="js/jquery-1.8.2.js"></script> 
```

您正在加载和混合 4 个不同的 jQuery 文件。这当然会失败，因为它们会相互冲突。您应该只拥有并使用一个 jQuery 文件。我建议坚持使用 RichFaces 捆绑的一个。摆脱所有`<script>`对 jQuery 的引用。

```
<ui:composition ... xmlns:rich="http://richfaces.org/rich"> 
```

如果你不能保证你的当前页面是否会使用 RichFaces ajaxified 组件，RichFaces 捆绑的 jQuery 会自动加载，那么你可以通过

```
<ui:composition ... xmlns:rich="http://richfaces.org/rich">
...
<h:outputScript name="jquery.js" /> 
```

请注意，您**不需要**提供自己的文件。将`<h:outputScript>`自动从 RichFaces JAR 文件中加载它。

* * *

**与具体问题无关**，RichFaces 有一个[`<rich:popupPanel>`](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&skin=blueSky)开箱即用的功能。你有没有看过它而不是在家种植它？

# java - 禁止基于 Maven 的持续集成构建的 GPG 签名 (Travis CI)

> ID：14825039
> 
> 赞同：60
> 
> 时间：2013-02-12T03:43:58.847
> 
> 标签：java, maven, continuous-integration, gnupg, travis-ci

我正在使用[Travis-CI](https://travis-ci.org/)为我正在从事的一些 Java 开源项目提供持续集成构建。

通常这很顺利，但是当 POM 指定 GPG 签名时我遇到了问题，例如

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-gpg-plugin</artifactId>
  <version>1.4</version>
  <executions>
    <execution>
      <id>sign-artifacts</id>
      <phase>verify</phase>
      <goals>
        <goal>sign</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

这会导致 Travis 构建失败 - 显然是因为它在运行时没有可用的密码`mvn install`。有关示例，请参[见此构建。](https://travis-ci.org/nuroko/nurokore/jobs/4683227)

配置 Maven 和/或 Travis 以跳过 CI 测试构建的 GPG 签名，但在我进行正确的发布构建时仍执行 GPG 签名的最佳方法是什么？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-06T21:12:00.633

通过将以下行添加到您的`.travis.yml`文件中来禁用 GPG 签名：

```
install: mvn install -DskipTests -Dgpg.skip 
```

示例：[https ://github.com/stefanbirkner/system-rules/blob/master/.travis.yml](https://github.com/stefanbirkner/system-rules/blob/master/.travis.yml)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-14T07:21:47.997

您需要创建一个配置文件并确保仅在您进行发布构建时运行该配置文件。

删除当前插件，并将其添加到配置文件中，如下所示：

```
<profiles>
    <profile>
        <id>release-sign-artifacts</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-gpg-plugin</artifactId>
                    <version>1.4</version>
                    <executions>
                        <execution>
                            <id>sign-artifacts</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>sign</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

然后当你真正需要发布时，将属性添加到你的 mvn 命令中：

```
mvn -DperformRelease=true ... 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-05T14:43:01.743

我找到了一种稍微简单的方法来使用上述配置[文件](https://stackoverflow.com/a/14869692/1127485)。*您可以使用gpg.passphrase*属性，而不是使用新的属性值，在进行签名时无论如何都需要提供该属性。修改后的属性部分如下：

```
<activation>
    <property>
        <name>gpg.passphrase</name>
    </property>
</activation> 
```

请注意，不需要任何值，因为如果为该属性设置了任何值，您希望激活此配置文件。

相应的命令行如下所示：

```
mvn <command> -Dgpg.passphrase=myverysupersecretpassphrase 
```

您可以通过以下两种方式运行它来测试它：

```
mvn install 
```

不会生成签名的工件，并且：

```
mvn install -Dgpg.passphrase=myverysupersecretpassphrase 
```

创建签名的工件。

要执行工件的实际签名发布，请执行以下操作：

```
mvn release:perform -Darguments=-Dgpg.passphrase=myverysupersecretpassphrase 
```

释放操作需要间接，因为它不会将命令行参数直接传播到生成的进程（请参阅[http://maven.apache.org/plugins/maven-gpg-plugin/usage.html](http://maven.apache.org/plugins/maven-gpg-plugin/usage.html)）。

# python - 如何使用 Python 将数组从球坐标插入到笛卡尔坐标？

> ID：14825049
> 
> 赞同：4
> 
> 时间：2013-02-12T03:45:31.017
> 
> 标签：python, numpy, scipy

我在球坐标中有一组密度值。更具体地说，我有一个名为密度的数组，形状为 (180,200,200)。我还有一个名为 r_coord、theta_coord 和 phi_coord 的数组，其形状 (180,200,200) 也是密度数组的球坐标。

我想使用 python 将此密度映射到笛卡尔坐标。因此，我需要一个新的密度 2，它在笛卡尔坐标 x_coord、y_coord 和 z_coord 上进行插值。我发现 scipy.ndimage.interpolation.map_coordinates 看起来很有希望，但我不知道如何让它工作。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:37:49.463

像这样的东西应该工作：

```
import scipy.interpolate
rflat=scipy.array( r_coord.flat )
tflat=scipy.array( theta_coord.flat )
pflat=scipy.array( phi_coord.flat )
coordpoints=scipy.concatenate( [ rflat[:, scipy.newaxis], tflat[:,scipy.newaxis], pflat[:,scipy.newaxis] ] , axis=1 )
rtpinterpolator=scipy.interpolate.linearNDInterpolate( coordppoints, density.flat )    

def xyz2rtp( x,y,z):
     r=scipy.sqrt( x**2+y**2+z**2)
     t=scipy.acos( z/r )
     p=scipy.atan2( y, x )
     return (r,t,p)

# now you can get the interpolated value for any (x,y,z) coordinate you want.
val=rtpinterpolator( xyz2rtp( x,y,z) ) 
```

关键点：

*   使用现有的 scipy 多维插值，
*   将`xyz`坐标转换为`rtp`当您将其传递给插值器时。

# c# - DateTime.ParseExact 引发 FormatException

> ID：14825050
> 
> 赞同：0
> 
> 时间：2013-02-12T03:45:35.753
> 
> 标签：c#, .net, datetime

编码：

```
DateTime.ParseExact("2/2/2002", "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

正在提高`System.FormatException`。

如果有人能告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T03:47:03.490

它应该是`d/M/yyyy`

```
DateTime.ParseExact("2/2/2002", "d/M/yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

异常的原因是它转换了两个位置，`dd`但找到的字符串是`2/`.

# javascript - 如何从 CSV 创建行 Hightchart，其中两列数据用作工具提示文本？

> ID：14825053
> 
> 赞同：0
> 
> 时间：2013-02-12T03:46:20.223
> 
> 标签：javascript, jquery, highcharts

这是一个多部分的问题，所以请原谅问题的长度。

我正在尝试创建一个图表，将患者的身高、体重和 BMI 绘制为多个日期的单独系列。我想在迁移到服务器之前使用 CSV 提取数据以进行测试。我试图让它类似于这个[FIDDLE](http://jsfiddle.net/g7d4W/9/)工作，但到目前为止还没有成功。

这是我的代码的一个版本，其中对数据进行了硬编码：

```
$(function () { 
    var options = {
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        title: {
            text: 'Patient Measurements'
        },
        xAxis: {
            categories: []
        },
        yAxis: {
            title: {
                text: 'Measurements'
            }
        },
        series: []
    };

    var data = "ID,PATIENT_NAME,DATA_DATE,HEIGHT,WEIGHT,BMI\n" +
               "1,\"Doe,John\",1/1/2013 00:00:00,65,185,30.78224852\n" +
               "1,\"Doe,John\",1/2/2013 00:00:00,65,184,30.61585799\n" +
               "1,\"Doe,John\",2/1/2013 00:00:00,65,181,30.11668639\n" +
               "1,\"Doe,John\",2/2/2013 00:00:00,65,180,29.95029585\n"

    // Split the lines
    var lines = data.split('\n');
    var first = lines.shift().split(',');
    var series_holder = [];
    for (var = i, i < first.length, i++) {
        var s = {
            data: []
        };
        series_holder.push(s);
    }

    $.each (lines, function(lineNo, line) {
        var items = line.split(',');

        $.each (items, function(itemNo, item){
            // If itemNo is the row/column iteration object, then start at column 2
            if (itemNo >= 2) {
                // Subtract the column from the itemNo to get a zero-based series_holder
                series_holder[itemNo - 2].data.push(parseFloat(item));
            }
        });
    });
    options.series = series_holder;

    var chart = new Highcharts.Chart(options);
}); 
```

该示例应绘制三条线（一条用于身高、体重和 BMI），每条线有四个数据点（针对每个日期）。

我知道我的示例中的数据不是根据 Highcharts 建议格式化的，但我需要能够从 CSV 中获取 ID 和 PATIENT_NAME 字段并在该系列的工具提示中使用它们，以便 ID 和 PATIENT_NAME 识别患者，无论您将鼠标悬停在哪个数据点上。我知道我可以将其显示在 DIV 或页面上的其他内容中，但我希望能够做到这一点，因为如果我能弄清楚如何使其工作，我可以在工具提示中显示其他内容.

通过查看 Highcharts 站点，我相信实现 CSV 代码所需要做的就是在上面的代码中添加以下代码而不是*var data = "..."*：

```
$.get(inputData, function(data) {
    // Check for data
    if (data.value != "") {
        alert("No data to retrieve!");
        return(0);
    } 
```

我不太精通 Javascript、jQuery 或 Highcharts，但我正在尽我所能快速学习。我意识到我的代码中可能存在许多错误（有些是故意的，比如 parseFloat 用于非浮点数据类型，所以我可以学习如何处理/解析不同的数据类型），所以我感谢大家的耐心。

谢谢你的帮助。我一直在玩这个，在进行了大量调试以确定如何处理数据之后，我想出了以下代码。我认为这可能是一个简化版本，可以更好地理解我的观点。

```
$(function () { 
var options = {
    chart: {
        renderTo: 'container',
        type: 'line'
    },
    title: {
        text: 'Patient Measurements'
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        title: {
            text: 'Measurements'
        }
    },
    series: []
};

var data = "ID;PATIENT_NAME;DATA_DATE;AVG_HEIGHT;AVG_WEIGHT;BMI;WEIGHT_STATUS\n"+"1;DOE,JOHN;2012-12-29 00:00:00;65;185;30.7822485207101;Obese\n"+"1;DOE,JOHN;2013-01-12 00:00:00;65;184;30.6158579881657;Obese\n"+"1;DOE,JOHN;2013-02-09 00:00:00;65;181;30.1166863905325;Obese\n";
// Split the lines
var lines = data.split('\n');
var first = lines.shift().split(';');
var series_holder = [];
$.each (lines, function(lineNo, line) {
    var items = line.split(';');
    $.each(items, function(itemNo, item) {
        if (itemNo == 3) {
            options.xAxis.categories.push(item);
        }
        else if (itemNo > 3 && itemNo < 7) {
            series_holder[itemNo-4].data.push(parseFloat(item));
        }
    });
});      

for (var i = 4; i < first.length - 1; i++) {
    var s = {
        data: []
    };

    s.name = first[i].replace(/AVG_/g,"");
    series_holder.push(s);
}

var chart = new Highcharts.Chart(options); 
```

});

x 轴应该是 DATE_DATE 下的日期值。

系列/行应如下所示：

1.  高度
2.  重量
3.  体重指数

绘图点的数据位于标题行之后的列索引 4 (AVG_HEIGHT) 到 6 (BMI) 中。

这是我要工作的一个示例[小提琴](http://jsfiddle.net/beacon5/HDrhv/4/)，它与我想做的类似......我只是无法让它适用于我的特定数据。

我将暂时搁置问题的工具提示和 CSV 部分。我真的很想让我的东西工作，所以我知道我在正确的轨道上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:30:39.847

这不是一个完整的答案，而是一个提示：Highcharts 有一个插件 (modules/data.src.js) 可以处理 csv 数据的解析，这应该可以帮助您入门。它会自动使用列名作为系列名称，并且还会尝试猜测列的类型（日期时间/数字/类别）。

[查看github](https://github.com/highslide-software/highcharts.com/blob/master/js/modules/data.src.js)上的 src和[jsfiddle](http://jsfiddle.net/highcharts/SnLFj/)上的演示示例：

```
$('#container1').highcharts({
    data: {
        csv: document.getElementById('csv1').innerHTML
    },
    title: {
        text: 'Categorized CSV data'
    }
}); 
```

# ios - iOS - 如何解码来自 iTunes Connect 的符号化崩溃报告？

> ID：14825056
> 
> 赞同：9
> 
> 时间：2013-02-12T03:46:42.407
> 
> 标签：ios, ios5, ios6, appstore-approval, symbolicatecrash

我有一个新应用程序，它被应用程序商店拒绝并显示以下消息：

```
We found that your app crashed on an iPhone 5 and iPad 3rd Gen running iOS 6.1, which is not in compliance with the App Store Review Guidelines.

Your app crashed when we:

1) Launched the app

This occurred when your app was used:

- On Wi-Fi
- On cellular network 
```

但我的应用程序构建目标设置是设备：iPhone 部署目标：6.0

我的 plist 设置是：目标设备系列：iPhone iOS 部署目标：6.0

以下是我从 Apple 获得的崩溃日志：

```
Incident Identifier: 9CA0955F-F59D-486C-8D73-8B3B61403EE4
CrashReporter Key:   aca1b4fd3ac58a223f67f43ce5c768e6e94616f0
Hardware Model:      xxx
Process:         Fundraising [13707]
Path:            /var/mobile/Applications/E4F866A6-D1B2-48F0-B471-913FAC78B0E3/Fundraising.app/Fundraising
Identifier:      Fundraising
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-02 10:13:13.282 -0800
OS Version:      iOS 6.1 (10B141)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x3445029e 0x3c2e997a 0x365e537c 0x3642758e 0x362b079c 0x36258c34 0x362586c8 0x36258116 0x37f4a59e 0x37f4a1ce 0x3442516e 0x34425112 0x34423f94 0x34396eb8 0x34396d44 0x362af480 0x362ac2fc 0x7a3aa 0x3c720b1c)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3c7e7350 __pthread_kill + 8
1   libsystem_c.dylib               0x3c75e11e pthread_kill + 54
2   libsystem_c.dylib               0x3c79a96e abort + 90
3   libc++abi.dylib                 0x3bd38d4a abort_message + 70
4   libc++abi.dylib                 0x3bd35ff4 default_terminate() + 20
5   libobjc.A.dylib                 0x3c2e9a74 _objc_terminate() + 144
6   libc++abi.dylib                 0x3bd36078 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x3bd36110 std::terminate() + 16
8   libc++abi.dylib                 0x3bd37594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x3c2e99cc objc_exception_rethrow + 8
10  CoreFoundation                  0x34396f1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x34396d44 CFRunLoopRunInMode + 100
12  UIKit                           0x362af480 -[UIApplication _run] + 664
13  UIKit                           0x362ac2fc UIApplicationMain + 1116
14  Fundraising                     0x0007a3aa 0x79000 + 5034
15  libdyld.dylib                   0x3c720b1c start + 0

Thread 1:
0   libsystem_kernel.dylib          0x3c7e7d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c735cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c735a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c7358a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3c7d7648 kevent64 + 24
1   libdispatch.dylib               0x3c707974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3c707654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 3:
0   libsystem_kernel.dylib          0x3c7e7d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c735cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c735a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c7358a0 start_wqthread + 4

Thread 4:
0   libsystem_kernel.dylib          0x3c7e7d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c735cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c735a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c7358a0 start_wqthread + 4

Thread 5 name:  WebThread
Thread 5:
0   libsystem_kernel.dylib          0x3c7d6eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c7d7048 mach_msg + 36
2   CoreFoundation                  0x34425040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x34423d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x34396eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x34396d44 CFRunLoopRunInMode + 100
6   WebCore                         0x3a37c500 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3c74030e _pthread_start + 306
8   libsystem_c.dylib               0x3c7401d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3e2db534
    r4: 0x00000006    r5: 0x3e2dbb88      r6: 0x208694e4      r7: 0x2fd879f4
    r8: 0x208694c0    r9: 0x00000300     r10: 0x366ce04b     r11: 0x1fd56aa0
    ip: 0x00000148    sp: 0x2fd879e8      lr: 0x3c75e123      pc: 0x3c7e7350
  cpsr: 0x00000010 
```

我正在从这两页了解符号化：1）[http://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs](http://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs) 2）[符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

我对一些事情感到困惑：我确实有将应用程序上传到 iTunes 时制作的旧存档。但他们希望我有一个 .app 文件。那是哪个文件？那是存档吗？哪个文件是 myApp.app.dSYM 文件？我是否只是将整个崩溃报告复制到一个文本文件中并保存在本地？

谢谢！

此外，这是应用程序启动时运行的一些代码：

```
- (void)viewDidLoad:(BOOL)animated
{
    UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building"]];
    [self.view addSubview:imgView];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building"]];
    imgView.frame = self.view.bounds; // to set the frame to your view's size
    [self.view addSubview:imgView];
    [self.view sendSubviewToBack:imgView];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        //load iphone image
        UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building"]];

        imgView.frame = self.view.frame;

        [self.view addSubview:imgView];
        [self.view sendSubviewToBack:imgView];
    }
    else
    {
        //load ipad image
        UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building@2x"]];
        imgView.frame = self.view.bounds; // to set the frame to your view's size
        //[self.view addSubview:imgView];

        imgView.frame = self.view.frame;
        [self.view sendSubviewToBack:imgView];
    }

    // Get user data.
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    // First arg is name and second is if not found.
    NSString *user_id = [standardUserDefaults objectForKey:@"user_id"];
    NSString *user_email = [standardUserDefaults objectForKey:@"email"];
    BOOL first_time_cookie = [standardUserDefaults boolForKey:@"first_time_cookie"];

    [super viewDidAppear:animated];

    if(!first_time_cookie)
    {
        // First time on the app, so set the user cookie.
        [standardUserDefaults setBool:YES forKey:@"first_time_cookie"];

        EmailUtil *email_new_user = [[EmailUtil alloc] initWithSubject:@"New_Download" body:@"New_iPhone_download"];
        [email_new_user send];

        // Send to server to make new acount AND send me an email re - new user.
        [self sendFeedback];

        [standardUserDefaults synchronize];
    }
    else
    {        
        EmailUtil *email = [[EmailUtil alloc] initWithSubject:@"RepeatUser" body:[NSString stringWithFormat: @"User_id: %@, and email: %@" , user_id , user_email]];
        [email send];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) sendFeedback
{
    NSString *string_url = @"http://www.my_url.php";

    NSURL *url = [NSURL URLWithString:string_url];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url ];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
         if ( error != nil )
         {
             // Send me an email that there was an error
             EmailUtil *email = [[EmailUtil alloc] initWithSubject:@"iCreate_User_Error" body:@"There_was_some_error_creating_user_INVESTIGATE"];
             [email send];
         }
         else
             if ( data != nil )
             {
                 NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

                 NSCharacterSet* notDigits = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];

                 if ([responseString rangeOfCharacterFromSet:notDigits].location == NSNotFound)
                 {
                     // newString consists only of the digits 0 through 9
                     NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

                     [standardUserDefaults setObject:responseString forKey:@"user_id"];
                     [standardUserDefaults synchronize];
                 } 
             }
     }];    
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T09:52:41.087

首先，您需要为要为其表示问题的构建存储并保存 .dSYM 文件。

1.  将 symbolicatecrash 可执行文件从此位置复制到桌面上的某个文件夹以便于访问：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources

2.  将崩溃和 .dSYM 文件复制到同一个文件夹。

3.  从终端导航到该文件夹​​并运行下面给出的命令：

./symbolicatecrash .crash .app.dSYM

** 象征 IPA **

如果我们使用 IPA 进行符号化 - 只需将扩展名 .ipa 重命名为 .zip ，将其解压缩，然后我们可以获得一个包含应用程序的有效负载文件夹。在这种情况下，我们不需要 .dSYM 文件。**（仅在复制期间未剥离调试符号的情况下）**

参考：[符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

您是否有提交给 Apple 的 ipa 或您可以在 Organizer->Archives 下看到的存档。如果您右键单击并选择显示包内容，那么将有一个名为 dSYM 的文件夹，您可以在该文件夹下找到您提交的应用程序的 dSYM 文件。

![在此处输入图像描述](../Images/25592271fcd5d9de30bfb397a7dc3db6.png) ![在此处输入图像描述](../Images/dea4eb89afd1b2540294eb40237f7d6a.png) ![在此处输入图像描述](../Images/3590c9dcbb851d6c54e7c474021773aa.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T03:51:11.123

iPhone 应用程序可以在 iPad 上运行。它们在屏幕上的“窗口”中运行，大小和形状与 iPhone 屏幕相同。

话虽如此，您的应用程序在 iPhone 5 上也崩溃了。所以它并不特定于在 iPad 上运行。您需要查看崩溃日志以了解详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T03:52:25.857

你错了 Targets iPhone 不是不能在 iPad 上运行的东西。但不仅仅适用于 iPad 适当的 UI，全屏。根据我的经验，Apple 测试了最新的操作系统 Device。所以，iPad 3 在测试。我将 iPhone 提交给 Apple。但iPad也有测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T04:03:27.263

目标与您允许它在其上运行的目标不同......目标只是告诉xCode您将要测试它，它不会告诉xCode您希望它只能在该目标上运行设备...为此，您需要查看（谷歌）设置`requirements`和`Device Capabilities`您的`plist file`！祝你好运！:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T05:51:18.133

其他人都已经提到了你的构建也可以在 iPad 上运行，尽管在一个较小的窗口中。因此，让我们进入分析崩溃日志的下一步。

```
Exception Type:  EXC_CRASH (SIGABRT) 
```

这意味着一条消息被发送到一个没有响应的对象。（未知的选择器崩溃）

```
Thread 0:
14  Fundraising                     0x0007a3aa 0x79000 + 5034 
```

我假设`Fundraising`是您的应用程序的名称。看，这里的这一行将为您提供最后执行的方法的名称（在 0x0007a3aa 内符号化）。前提是您拥有`.dSYM`上传到应用商店的构建文件。

`.dSYM`文件是您归档应用程序时生成的文件。 ![.sym 文件生成位置](../Images/db731632e17ca22b52c7b9fc9816764c.png)

所以我说你得到那个文件，检查它出错的方法和:)。

要了解更多信息，请访问此页面：[http ://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs](http://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs)

# java - 如何创建布尔方法？

> ID：14825064
> 
> 赞同：-4
> 
> 时间：2013-02-12T03:47:26.113
> 
> 标签：java, arrays, loops, multidimensional-array

我正在尝试创建一个名为 isAvailable 的布尔方法，它接受航班上的座位号作为参数，返回一个指示该座位是否可用的布尔值。使用类似于井字游戏程序的代码，该代码会将座位号（如 20）转换为二维数组的行和列索引。如果航班上有*任何可用座位，则返回 true。*

```
 public class Flight {

     /*
     * declare instance variables
     * each flight object that is created will have its own copy of these
     * These are declared as private to ensure that external Java code
     * cannot access them directly and assign any arbitrary values to them.
     */
     String flightNumber;
     int rows;
     int seatsPerRow;
     boolean [][] seat;
     double fare;
     String origin;
     String destination;

     /*
     * The constructor
     * Contains code that initially sets up each flight object when it is
     * first created. Always has the same name as the class.
     */
     public Flight (String flightNumber, int rows, int seatsPerRow, double fare,  String origin, String destination) {

    //call the mutator methods and let them initialize the instance variables
    setflightNumber(flightNumber);
    setRows(rows);
    setSeatsPerRow(seatsPerRow);
    setFare(fare);
    setOrigin(origin);
    setDestination(destination);

    seat = new boolean [rows][seatsPerRow]

    for(int i = rows, int x = seatsPerRow; i>0, x>0; i--, x--){
        seat[i][x] = true;
    }
     }//end of constructor

         /*
         * The accessor methods
     * These report the current values of the Flight object's instance variables
     */
     public String getFlightNumber() {
         return flightNumber;
     }

     public int getRows() {
         return rows;
     }

     public int getSeatsPerRow() {
         return seatPerRow;
     }

     public double getFare() {
         return fare;
     }

     public String getOrigin() {
         return origin;
     }

     public String getDestination() {
         return destination;
     }

     public boolean isAvailable(int userRow, int userSeatPerRow) {

    int row = 0;
    int seatPerRow = 0;

     }
}//end of accessors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:50:43.313

你的功能

```
public boolean isAvailable(int userRow, int userSeatPerRow) {

    int row = 0;
    int seatPerRow = 0;

     } 
```

不返回任何东西。那是因为你不知道该放什么，还是你忘记了……？

大概，您会想要一个将座位设置为 false 的“book”方法（在座位 [] [] 数组中稍微切换一下）；该`isAvailable`方法需要访问数组并返回值

```
return seat[userRow][userSeatPerRow]. 
```

当这些是传入的参数时，在您的方法中将`row`和设置为零，这让我感到困惑。`seatPerRow`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:52:55.120

这是你想要的？

```
public boolean isAvailable(int userRow, int userSeatPerRow) {
      return !seat[userRow][userSeatPerRow];
} 
```

这假设`seat[x][y]`如果 x 行中的座位，位置 y 被占用，则数组为真

如果座位已被占用，`seat[userRow][userSeatPerRow]`则为`true`。

当 时`!`，我们得到反转逻辑，所以`true`变成`false`。

所以函数返回`false`的是座位被占用，因为那时它是不可用的。如果座位是空的，则会发生相反的情况。然后函数返回`true`

要找到第一个可用座位，您可以执行以下操作：

```
 for (int row = 0; row < getRows(); row++) {
     for (int column = 0; column < getSeatsPerRow(); column++) {
         if (isAvailable(row, column)) {
             System.out.println("Sear " + row +", " + column + " is emply!!!!!!");
         }
     } 
 } 
```

检查是否有空位

```
public boolean areThereAnyAvailableSeats() {
    for (int row = 0; row < getRows(); row++) {
        for (int column = 0; column < getSeatsPerRow(); column++) {
            if (!seat[userRow][userSeatPerRow]) {
                return true;
            }
        } 
    }
    return false;
} 
```

# joomla - 保存时 JCE 损坏了我的 SlideShowPro 文本

> ID：14825071
> 
> 赞同：0
> 
> 时间：2013-02-12T03:48:24.030
> 
> 标签：joomla, slideshow, joomla-content-editor

我正在为我的网站使用 Joomla，并且我已成功将 SlideShowPro 添加到多个网站。

但是，由于某种原因，当我将扩展程序添加到我的特定站点之一时，出现了问题。

我正在使用 JCE，在**Editor Parameters** > **Advanced**下，我打开了以下所有内容：

*   允许 Javascript
*   允许 CSS
*   允许 PHP XHTML 内联脚本

在**Plugin Parameters**然后**Media Support**选项卡下，我关闭了以下所有内容：

*   严格的 XHTML Flash
*   允许 HTML5 音频
*   允许 HTML5 视频
*   允许 OBJECT 元素
*   允许嵌入元素
*   并允许 iframe

当我添加以下代码时：

```
<!-- START EMBED CODE -->

<script type="text/javascript" src="http://www.colmandesigns.co.nz/colmangallery/m/embed.js"></script>

<div id="album-6">

</div>

<script type="text/javascript">
SlideShowPro({
attributes: {
id: "album-6",
width: 550,
height: 400
},
mobile: {
auto: false
},
params: {
bgcolor: "#000000",
allowfullscreen: true
},
flashvars: {
xmlFilePath: "http://www.colmandesigns.co.nz/colmangallery/images.php?album=6",
paramXMLPath: "http://www.colmandesigns.co.nz/colmangallery/m/params/chrome.xml",
contentScale: "Crop to Fit All"
}
});
</script>

<!-- END EMBED CODE --> 
```

一旦我点击保存，它最终会像这样出现：

```
<!-- START EMBED CODE -->
<p>
<s-cript type="text/j-avascript" src="http://www.colmandesigns.co.nz/colmangallery/m/embed.js"></s-cript>
</p>
<div id="album-6">&nbsp;</div>
<p>
<s-cript type="text/j-avascript"> SlideShowPro({ attributes: { id: "album-6", width: 550, height: 400 }, mobile: { auto: false }, params: { bgcolor: "#000000", allowfullscreen: true }, flashvars: { xmlFilePath: "http://www.colmandesigns.co.nz/colmangallery/images.php?album=6", paramXMLPath: "http://www.colmandesigns.co.nz/colmangallery/m/params/chrome.xml", contentScale: "Crop to Fit All" } }); 
<!-- END EMBED CODE -->
</s-cript>
</p>
<p>&nbsp;</p> 
```

我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:21:35.540

是的，所见即所得的编辑器会弄乱您的嵌入式脚本和样式。我在我的网站上所做的是将 JCE 配置为默认不显示。

转到“组件 > JCE 编辑器 > 配置文件 > 默认 > 功能和布局 > 编辑器状态”并将其设置为“关闭”。

这将为您提供一个用于编辑文章的通用文本区域（默认情况下）和一个打开所见即所得编辑的链接。这样它就不会弄乱你的 JavaScript / CSS。

您也可以尝试“Flexi 自定义代码”模块，它的工作方式类似于“自定义 HTML”模块，但旨在用于 JS/CSS。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:04:25.317

为超级用户禁用文本过滤器可能会有所帮助：

去做**管理员/全局配置/文本过滤器并在****超级用户**旁边选择**无过滤器**

# java - 格式化java字符串以查看特定方式

> ID：14825078
> 
> 赞同：3
> 
> 时间：2013-02-12T03:49:31.617
> 
> 标签：java, string-formatting

我是 Java 新手，我有 4 个 int 堆栈需要以特定方式打印出来。我使用的 IDE 是 BlueJ。

我想打印数组看起来像下面

```
 |110|   |231|   |333|   |444|
 |111|   |232|   |334|   |447|
 |112|   |233|   |335|   |448|
 |113|   |234|   |336|   |449|
 |114|   |235|   |337|   |450|
 |115|   |236|   |338|   |451| 
```

我正在尝试这样做，`System.out.println("|"+stack1.pop()+"|")`但它会产生一个问题，因为我不确定如何从底部返回顶部。前任。115 --> 回溯到 231。每一列代表一个堆栈。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T03:59:11.667

您将无法在控制台中执行此操作：
作为替代方案，您可以打印每个堆栈中的值，然后向下移动，例如：

```
System.out.println("|"+stack1.pop()+"|\t|"+stack2.pop()+"|\t|"+stack3.pop()+"|\t|"+stack4.pop()+"|" ); 
```

**按评论编辑** - 您可以使用[String.format(...)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)，[在此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)查看可用的格式选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:15:40.283

使用`String.format()`比连接一堆字符串更好

```
System.out.println(String.format("|%s|\t|%s|\t|%s|\t|%s|",
                            stack1.pop(),stack2.pop(),stack3.pop(),stack4.pop())); 
```

如果要以`Stack`相反的顺序打印元素，只需`reverse`先堆栈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:37:33.823

这个怎么样 ：

```
 ArrayList<Stack<Integer>> arrays=new ArrayList<Stack<Integer>>();
    arrays.add(stack1);
    arrays.add(stack2);
    arrays.add(stack3);
    arrays.add(stack4);

//Put some code here to  Determine the stack size, if all are unequal in size   
    int size=stack1.size(); 

    for(int i=0;i<size;i++){
        String value="";
        String temp=""; 
```

//4 = 如果您知道堆栈数仅为 4

```
 for(int j=0;j<4;j++){ 

            //Handle here Empty Stack Exception and print blank
            value="|"+(String)(arrays.get(j)).pop().toString()+"|"+" ";
            temp=temp+value;

        }

        System.out.println(temp);

    } 
```

# node-redis - node_redis 身份验证与管道

> ID：14825079
> 
> 赞同：1
> 
> 时间：2013-02-12T03:49:40.663
> 
> 标签：node-redis

使用下面的代码，有没有什么情况可以和node_redis中的其他命令一起流水线AUTH？

每次节点服务器接受请求时都会调用此函数。在回调函数中，其他 redis 命令如 get/set 正在发出。

```
var client = null;
var getRedisClient = function(name, callback) {
    var redis = require('redis');
    var redisInfo = getRedisInfo(name);
    if (client == null || client.connected == false) {
        if (client != null) {
            client.end();
            client = null;
        }
        client = redis.createClient(redisInfo.port, redisInfo.host);

        if (redisInfo.password != '') {
            client.auth(redisInfo.password, function(err){
                if (err) {
                    client.end();
                    client = null;
                }

                callback(err, client);
            });
        } else {
            callback('', client);
        }
    } else {
        callback('', client);
    }
}; 
```

使用node_redis将身份验证发送到redis服务器的正确方法是什么？

# php - 从 Propel ORM 捕获 SQL 通知

> ID：14825080
> 
> 赞同：3
> 
> 时间：2013-02-12T03:49:51.357
> 
> 标签：php, sql, postgresql, propel

我有一个大型 SQL 函数，我想通过 PHP/Propel 使用如下准备好的语句在 PostgreSQL 数据库上执行：

```
$sql = "lots of SQL statements";
$statement = $propelPDO->prepare($sql);
$statement->execute(); 
```

在我尝试执行的 SQL 语句中，有很多调用“引发信息……”和“引发警告……”来显示调试信息。从命令行执行 SQL，我可以看到有助于调试 SQL 的通知：

```
psql -h hostname database username < lots_of_sql_statements.sql 
```

我的问题：有什么方法可以从 PHP 捕获 SQL 中引发的信息和警告通知，以便我可以记录它们以供以后分析？我在很多不同的记录上运行 SQL，如果能够记录通知而不需要单独进入命令行来查看调试信息，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T03:55:20.520

好吧，如果您使用实际的 Propel 对象，您可以通过 catch 来捕获消息`PropelException`

```
try {
    $propelObject
        ->setSomething('foo')
        ->save()
    ;
} catch (PropelException $pe) {
    someLoggingFunction($pe->getMessage());
} 
```

否则，您将仅限于 PDO 错误处理功能：

[http://www.php.net/manual/en/pdo.error-handling.php](http://www.php.net/manual/en/pdo.error-handling.php)

# android - 如何使用Phonegap修复facebook android sdk集成的以下错误

> ID：14825086
> 
> 赞同：2
> 
> 时间：2013-02-12T03:50:57.253
> 
> 标签：android, facebook, cordova, sdk

请帮助修复以下错误。目前正在尝试使用 PhoneGap 集成 Facebook Android SDK。我遵循了本教程：[http](http://www.youtube.com/watch?v=mlpBgWiel2w) ://www.youtube.com/watch?v= mlpBgWiel2w 和 github 资源：[https ://github.com/davejohnson/phonegap-plugin-facebook -connect.git](https://github.com/davejohnson/phonegap-plugin-facebook-connect.git) 但得到以下错误：-

```
 Error in an XML file: aborting build.
   Error in an XML file: aborting build.
   Dex Loader] Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1;
   Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1;
   Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1;
    Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1;
   Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1;
    Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/facebook/android/AsyncFacebookRunner$1; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T12:43:18.367

我在**eclipse**中遇到了同样的问题，我做了以下事情，它对我**有用**：

1-右键单击您的Android项目
2-**属性**>>> **Java构建路径**
3-单击**Android依赖项**
4-单击**删除**>>>**确定**
5-运行Android项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T05:43:33.527

这是一个非常容易解决的问题，尽管它似乎是一个非常难以解决的问题。

```
1.Just make a copy of the project.
2.run the the copy of the project thats it!!! 
```

因为这个步骤对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T23:26:21.340

我遇到了这个问题，但可能已经解决了。在平台/安卓中，运行：

```
find . -name "AsyncFacebookRunner.class" 
```

`platforms/android/ant-build/`对我来说，这在和中都找到了课程`platforms/android/FacebookLib/ant-build`。由于将有来自 FacebookLib 的 jar，因此该课程将多次结束。我设法通过确保 Eclipse 已关闭然后从两者中删除所有 、 、 和 目录来解决此问题，`bin`然后`gen`再次`ant-build`运行`ant-gen`构建命令。之后，上面的 find 命令只找到了该类的一份副本，在.`platforms/android``platforms/android/FacebookLib``platforms/android/CordovaLib``FacebookLib/ant-build`

# jquery - 从页外链接显示 div

> ID：14825090
> 
> 赞同：1
> 
> 时间：2013-02-12T03:51:14.697
> 
> 标签：jquery, html, show-hide

我有一个子导航（使用下面的代码）在单击适当的链接时关闭/打开 div。它工作完美。唯一的事情是，现在我需要使用哈希 (pageName.php#div4) 链接到此页面并打开 id 为 div4 的 div，但我运气不佳。

关于我如何实现这一目标的任何想法？

子导航 HTML：

```
<div class="subnav">
    <a href="javascript:;" data-target="1" class="showDiv active">Link</a>
    <a href="javascript:;" data-target="2" class="showDiv">Link</a>
    <a href="javascript:;" data-target="3" class="showDiv">Link</a>
    <a href="javascript:;" data-target="4" class="showDiv">Link</a>
</div> 
```

内容 HTML：

```
<div id="div1" class="targetDiv">Content</div>
<div id="div2" class="targetDiv">Content</div>
<div id="div3" class="targetDiv">Content</div>
<div id="div4" class="targetDiv">Content</div> 
```

JavaScript：

```
$('.showDiv').on('click', function () {
    $(this).addClass('active').siblings().removeClass('active');
    $('.targetDiv').fadeOut("fast").delay(200);
    $('#div' + $(this).data('target')).fadeIn("slow");
});

$('.showDiv').first().click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:58:30.673

> 现在我需要链接到这个页面并打开 - 比如说 - div #4

如果要选择 ID 为的元素，`4`可以编写代码：

```
$('div#' + $(this).data('target')) 
```

或者因为 ID 是唯一的：

```
$('#' + $(this).data('target')) 
```

* * *

编辑：

```
var $divs = $('div.targetDiv');
$('.showDiv').on('click', function() {
    var $this = $(this);
    // return if the clicked element has active class 
    if ($this.hasClass('active')) return;
    $this.addClass('active').siblings().removeClass('active');
    $divs.fadeOut("fast", function() {
       $divs.filter('#div' + $this.data('target')).delay(200).fadeIn("slow");
    })
}).first().click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:49:49.150

检查页面加载事件[中 URL 的哈希组件。](https://stackoverflow.com/questions/298503/how-can-you-check-for-a-hash-in-a-url-using-javascript)从那里，根据需要做出响应。

就像是

```
$(function()
{
    if(window.location.hash)
    {
        $("#" + window.location.hash).click();
    }
}); 
```

# python - Python重定向日志

> ID：14825092
> 
> 赞同：1
> 
> 时间：2013-02-12T03:51:23.453
> 
> 标签：python, tornado

我正在运行一个 Web 服务器，tornado，并且我正在尝试使用以下命令将所有日志输出重定向到一个文件。但我没有在文件中看到输出。

```
/usr/bin/python -u index.py 2>&1 >> /tmp/tornado.log 
```

我将 -u 选项传递给 python 解释器。我仍然没有看到任何输出记录到我的日志文件中。

但是，当我执行以下操作时，我会在标准输出上看到输出

```
/usr/bin/python index.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:44:31.357

Tornado 使用内置的日志记录模块。您可以轻松地将文件处理程序附加到根记录器并将其级别设置为`NOTSET`记录所有内容，或者如果您想过滤，则设置为其他级别。

参考文档：[logging](http://docs.python.org/2/library/logging.html)，[logging.handlers](http://docs.python.org/2/library/logging.handlers.html#module-logging.handlers)

与 Tornado 的日志记录一起使用的示例：

```
import logging
# the root logger is created upon the first import of the logging module

# create a file handler to add to the root logger
filehandler = logging.FileHandler(
    filename = 'test.log', 
    mode = 'a', 
    encoding = None, 
    delay = False
)

# set the file handler's level to your desired logging level, e.g. INFO
filehandler.setLevel(logging.INFO)

# create a formatter for the file handler
formatter = logging.Formatter('%(asctime)s.%(msecs)d  [%(name)s](%(process)d): %(levelname)s: %(message)s')

# add filters if you want your handler to only handle events from specific loggers 
# e.g. "main.sub.classb" or something like that. I'll leave this commented out.
# filehandler.addFilter(logging.Filter(name='root.child'))

# set the root logger's level to be at most as high as your handler's
if logging.root.level > filehandler.level:
    logging.root.setLevel = filehandler.level

# finally, add the handler to the root. after you do this, the root logger will write
# records to file.
logging.root.addHandler(filehandler) 
```

通常情况下，我实际上希望抑制龙卷风的记录器（因为我有自己的记录器，无论如何都会捕获它们的异常，它们最终只会污染我的日志，）这就是在文件处理程序上添加过滤器非常方便的地方.

# javascript - JavaScript - 如何阻止脚本运行 onClick()？

> ID：14825097
> 
> 赞同：0
> 
> 时间：2013-02-12T03:52:09.287
> 
> 标签：javascript, image, onclick, gallery

我只是想弄清楚如何阻止脚本在 onClick() 上运行和旋转图像。

有什么帮助吗？请？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:56:39.933

```
document.querySelector('#imageGallery').addEventListener('click', function () {
    clearTimeout(thetimer);
}); 
```

这只会*停止*图像。如果您希望能够切换停止和动画，您可以使用`dataset`（至少，我建议您这样做）跟踪停止/恢复状态，并`numb`在恢复状态时调用以再次开始超时。

这不是 100% 跨浏览器兼容的。您必须使用`attachEvent`IE，并且不应将`thetimer`其用作全局变量，而应使用`var`.

# php - MySql 选择数据是 PHP 中的多对多关系

> ID：14825099
> 
> 赞同：2
> 
> 时间：2013-02-12T03:52:30.427
> 
> 标签：php, mysql, database, random, relationship

*   条目（表）

    ```
    ent_seq  entry
    100010      1
    100020      2
    100030      3
    100040      4 
    ```

*   K_ELE（表）

    ```
    KID  entry   keb 
    1        1   食べる
    2        2   日本
    3        3   先生 
    ```

*   R_ELE（表）

    ```
    RID  entry   reb 
    1        1   たべる
    2        2   にほん
    3        2   にっぽん
    4        3   せんせい
    5        4   ビール 
    ```

*   感觉（表）

    ```
    SID  entry
    1        1
    2        2
    3        3
    4        4 
    ```

*   GLOSS_ENG(SENSE 表的子表)

    ```
    GID SID  mean 
    1     1  eat
    2     2  Japan
    3     2  Japanese
    4     3  theacher
    5     4  beer 
    ```

*   UPDATE（SENSE 表的子表）

    ```
     UPID   SID    up_date 
      1     1    2012.12.12 17:31
      2     2    2012.12.12 17:31
      3     2    2012.12.12 17:31
      4     3    2012.12.12 17:31
      5     4    2012.12.12 17:31 
    ```

**我喜欢展示这张桌子。**

```
 ent_seq  keb     reb            mean             update

   100010   食べる   たべる           eat             2012.12.12 17:31
   100020   日本    にほん; にっぽん   Japan; Japanese 2012.12.12 17:31
   100030   先生    せんせい          theacher        2012.12.12 17:31
   100040           ビール   beer                    2012.12.12 17:31 
```

**这个数据库非常大，有 195000 行，请帮助我！！！**

**我的简单代码 KKK**

```
 <?php include('con_db.php');
$query = mysql_query("SELECT * FROM entry");
$number=mysql_num_rows($query);
for ($count=1; $count<= 20 ; $count++)
{ $entry = RAND(1,$number);

$query1 = "SELECT   
        entry.ent_seq, k_ele.keb, r_ele.reb, s_gloss_eng.gloss
        FROM entry, k_ele, r_ele, sense, s_gloss_eng
        WHERE entry.entry_pkey = $entry
        AND   sense.sense_pkey = s_gloss_eng.sense_pkey
        AND   entry.entry_pkey = sense.entry_pkey
        AND   entry.entry_pkey = r_ele.entry_pkey
        AND   entry.entry_pkey = k_ele.entry_pkey
        ORDER BY entry.ent_seq
        ";
$view2 = mysql_query($query1);
$row = mysql_fetch_assoc($view2);

    $ent_seq=$row['ent_seq'];
    $keb=$row['keb'];
    $reb=$row['reb'];
    $mean_eng=$row['mean'];
    $update=$row['update'];
?>

      <table width="614" border="1">
   <tr>
     <td>ent_seq</td>
     <td>keb</td>
     <td>reb </td>
     <td>mean</td>
     <td>update</td>
  </tr>
  <tr>
     <td>$ent_seq</td>
     <td>$keb</td>
     <td>$reb</td>
     <td>$mean_eng</td>
     <td>$update</td>
  </tr>
  </table>
 <?php
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:21:17.233

试试这个查询 -

```
SELECT
  e.ent_seq,
  e.entry,
  ke.keb,
  re.reb,
  s.mean,
  s.up_date
FROM entry e
LEFT JOIN (SELECT entry, GROUP_CONCAT(keb) keb FROM k_ele GROUP BY entry) ke
  ON ke.entry = e.entry
LEFT JOIN (SELECT entry, GROUP_CONCAT(reb) reb FROM r_ele GROUP BY entry) re
  ON re.entry = e.entry
LEFT JOIN (
  SELECT s.entry, mean, up_date FROM sense s
    LEFT JOIN (SELECT sid, GROUP_CONCAT(mean) mean FROM gloss_eng
               GROUP BY sid
              ) ge
      ON ge.sid = s.sid
    LEFT JOIN (SELECT sid, GROUP_CONCAT(DISTINCT up_date) up_date FROM `update`
               GROUP BY sid
              ) u
      ON u.sid = s.sid
  GROUP BY s.sid
  ) s
  ON s.entry = e.entry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:58:20.000

```
SELECT e.ent_seq, 
    GROUP_CONCAT(DISTINCT kei.keb SEPARATOR'; ')AS kebs, 
    GROUP_CONCAT(DISTINCT rei.reb SEPARATOR '; ') AS rebs,
    GROUP_CONCAT(DISTINCT sei.mean SEPARATOR '; ') AS means

FROM entry e

LEFT JOIN k_ele kei ON e.entry = kei.entry
LEFT JOIN r_ele rei ON e.entry = rei.entry
LEFT JOIN sense se ON e.entry = se.entry 
LEFT JOIN s_gloss_eng sei ON se.SID = sei.SID

WHERE e.ent_seq IN (SELECT jt5.jlpt5_seq FROM jlptn5 jt5
                   WHERE jt5.jlpt5_null = 0
                   ORDER BY RAND())
GROUP BY e.entry    
ORDER BY RAND()
LIMIT 20 
```

# python - 使用模式创建更大的列表列表

> ID：14825101
> 
> 赞同：1
> 
> 时间：2013-02-12T03:52:50.627
> 
> 标签：python, list, pattern-matching

假设我有以下模式：

```
PATTERN = [[1, 2, 3],[4, 5, 6],[7, 8, 9]] 
```

我想用它来创建以下内容：

```
PATTERN | HORIZONTAL_MIRROR (PATTERN)
VERTICAL_MIRROR(PATTERN) | HORIZONTAL_MIRROR(VERTICAL_MIRROR(PATTERN)) 
```

换句话说：

```
[[1, 2, 3, 3, 2, 1],[4, 5, 6, 6, 5, 4],[7, 8, 9, 9, 8, 7], [7, 8, 9, 9, 8, 7], [4, 5, 6, 6, 5, 4], [1, 2, 3, 3, 2, 1]] 
```

除了从 复制每个元素之外，还有可以在 Python 中使用的有效方法`PATTERN`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T03:59:16.920

如果我正确理解了要求：

```
def mirror(pat):
    return pat + pat[::-1]

SUPERPATTERN = mirror(map(mirror, PATTERN)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T03:59:28.390

只是一个想法：

```
PATTERN = [[1, 2, 3],[4, 5, 6],[7, 8, 9]]
def patternify(l):
    for sl in l:
        yield sl+sl[::-1]
    for sl in l[::-1]:
        yield sl+sl[::-1]

list(patternify(PATTERN))
#output: [[1, 2, 3, 3, 2, 1], [4, 5, 6, 6, 5, 4], [7, 8, 9, 9, 8, 7], [7, 8, 9, 9, 8, 7], [4, 5, 6, 6, 5, 4], [1, 2, 3, 3, 2, 1]] 
```

# java - 无限循环或提前终止 do while 循环

> ID：14825106
> 
> 赞同：1
> 
> 时间：2013-02-12T03:53:02.810
> 
> 标签：java, infinite-loop, do-while

我一直在与这个程序斗争一段时间。它已经开始正确编译，但是当我按原样运行它时，它会无限显示“你的账单是__”。当我更改初始响应值时，它拒绝运行。我不知道如何解决它。

```
/* Savannah Moore
   CSCI 1301
    2/11/2013
    Internet Package Code: Code determines customer's final pricing. */
import java.util.Scanner;

public class internet{
    public static void main(String[] args){
      double hours, price;
      int internet;
      String response, check="Yes";

      Scanner kb = new Scanner(System.in); /* This sections questions the user as to which package they have bought. */
       System.out.println("Our internet packages include:");
        System.out.println("Package 1: For $9.95 per month, 10 hours of access are provided. Additional hours are $2.00 per hour.");
        System.out.println("Package 2: For $13.95 per month, 20 hours of access are provided. Additional hours are $1.00 per hour.");
        System.out.println("Package 3: For $19.95 per month, unlimited access is provided.");
        System.out.println("Please enter your package number:");
       internet=kb.nextInt();
        System.out.println("Please enter your total hours used:");
       hours=kb.nextDouble();   
        response = "Yes";

while(check.compareToIgnoreCase(response)== 0)
  {
      switch (internet)
      {
      case 1: 
              {  if (hours > 10)
                       price = (hours-10)*2 + 9.95; /* This adds the additional hours to the user's price at the current overage rate. */
                    else    
                        price = 9.95;
                }
              System.out.println("Your bill is $" +price);  
               break; 
      case 2: 
              {  if (hours > 20)
                       price = (hours-20) + 13.95;
                    else    
                        price = 13.95;
                }
              System.out.println("Your bill is $" +price);  
               break;        
     case 3:System.out.println("Your bill is $19.95");  
                break; 
      default: System.out.println("This package choice is invalid.");

      System.out.println("Would you like to compare your price with that of another package? Yes or No"); /* This gives the user the ability to stop the loop. */
      response=kb.nextLine();
      response=kb.nextLine();   
     }
    }

    System.out.println("Thank you for using us as your internet service provider.  Have a nice day!");
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T04:15:25.413

循环变得无限，因为用户将响应更改为“否”的机会在 case 语句中。因此，当您`break;`退出 case 语句时，您会立即跳回“while”检查，并且因为*response*和*check*都仍然是“是”，所以它会再次执行所有操作。

只需将这些陈述放在`default:`案例陈述中的案例之后，它应该可以工作。

换句话说，改变：

```
 ...
   default: System.out.println("This package choice is invalid.");

   System.out.println("Would you like to compare your price with that of another package? 
       Yes or No"); /* This gives the user the ability to stop the loop. */
   response=kb.nextLine();
   response=kb.nextLine();   
  }
} 
```

至：

```
 ...
     default: System.out.println("This package choice is invalid.");
   }
   System.out.println("Would you like to compare your price with that of another package? 
        Yes or No"); /* This gives the user the ability to stop the loop. */
   response=kb.nextLine();
   response=kb.nextLine();   
} 
```

我不知道你为什么要做`response=kb.nextLine();`两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:21:13.327

这应该可以解决问题

```
import java.lang.*;
import java.util.Scanner;

public class Program
{
    /**
     * This is the main entry point for the application
     */
  public static void main(String[] args){
      double hours, price;
      int internet;
      String response, check="Yes";

        response = "Yes";

while(check.compareToIgnoreCase(response)== 0)
  {

      Scanner kb = new Scanner(System.in); /* This sections questions the user as to which package they have bought. */
       System.out.println("Our internet packages include:");
        System.out.println("Package 1: For $9.95 per month, 10 hours of access are provided. Additional hours are $2.00 per hour.");
        System.out.println("Package 2: For $13.95 per month, 20 hours of access are provided. Additional hours are $1.00 per hour.");
        System.out.println("Package 3: For $19.95 per month, unlimited access is provided.");
        System.out.println("Please enter your package number:");
       internet=kb.nextInt();
        System.out.println("Please enter your total hours used:");
       hours=kb.nextDouble();   
      switch (internet)
      {
      case 1: 
              {  if (hours > 10)
                       price = (hours-10)*2 + 9.95; /* This adds the additional hours to the user's price at the current overage rate. */
                    else    
                        price = 9.95;
                }
              System.out.println("Your bill is $" +price);  
               break; 
      case 2: 
              {  if (hours > 20)
                       price = (hours-20) + 13.95;
                    else    
                        price = 13.95;
                }
              System.out.println("Your bill is $" +price);  
               break;        
     case 3:System.out.println("Your bill is $19.95");  
                break; 
      default: System.out.println("This package choice is invalid.");
      }
      System.out.println("Would you like to compare your price with that of another package? Yes or No"); /* This gives the user the ability to stop the loop. */
      response=kb.nextLine();
      response=kb.nextLine();   

    }

    System.out.println("Thank you for using us as your internet service provider.  Have a nice day!");
    }
} 
```

# visual-studio-2010 - 如何在visual studio中自动保持智能缩进

> ID：14825107
> 
> 赞同：1
> 
> 时间：2013-02-12T03:53:14.513
> 
> 标签：visual-studio-2010

我不太知道如何表达这个问题，但基本上发生的事情是：

如果我在 Visual Studio 中进行智能缩进，然后单击页面上的其他位置，甚至在具有智能缩进的同一行上单击，它就会消失，就好像我根本没有缩进，甚至没有阻止缩进一样。

它只是将光标/插入点放在行的开头。

**编辑：**顺便说一句，我最近格式化了我的电脑，我几乎可以肯定以前不是这种情况，我猜这是一个设置，但我一直在摆弄所有试图改变它的设置，但我可以'吨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:01:19.607

打开工具->选项。导航到 LHS 上的文本编辑器。选择源类型（C++、VB 等）。打开树视图节点并选择选项卡。在那里，您会在 RHS 上找到您的选择

# emacs - 缩写模式 - 试图从插入键中删除空格字符

> ID：14825108
> 
> 赞同：2
> 
> 时间：2013-02-12T03:53:16.023
> 
> 标签：emacs

我无法从插入键中删除空间。

这是我的 .emacs 文件的功能

```
(defun abbrev-backward-char ()
    (backward-char 1) t) ; return non-nil to inhibit insertion of the character
                         ; that triggered the expansion
(put 'abbrev-backward-char 'no-self-insert t) 
```

这是我的 abbrevs_defs 表

```
(define-abbrev-table 'global-abbrev-table
   '(   
       ("slv" "std_logic_vector" abbrev-backward-char 0))) 
```

我遇到的问题是，当我输入“slv”时，它是：首先扩展单词，然后退格，然后添加插入字符。所以我只剩下这个：“std_logic_vecto r”。

我希望它改为：扩展，添加插入字符，然后最后退格。所以我只剩下“std_logic_vector”了。

我希望我不是在这里要求奇迹。

我已经做了好几个小时了，这似乎太荒谬了，以至于没有比插入字符更容易摆脱的了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:41:50.023

界面更简洁是您不会超载空间来进行缩写扩展。而是`dabbrev-expand` `M-/`使用[hippie-expand](http://emacswiki.org/emacs/HippieExpand)重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T02:10:42.790

我遇到了同样的问题，我发现的解决方法是在使用缩写调用的函数的末尾使用 (signal 'quit nil)。

# jquery - 如何在 jquery 悬停期间跟踪位置？不是在 stop() 之后

> ID：14825109
> 
> 赞同：0
> 
> 时间：2013-02-12T03:53:17.497
> 
> 标签：jquery

我正在尝试制作一个滑动项目列表来模仿 netflix。查看他们的源代码，我已经弄清楚了 html 标记，并且我想我已经大致了解了它的概念。我只需要能够在悬停期间跟踪 css 正确位置，并在悬停发生时而不是在悬停停止后通过另一个功能用它做其他事情。

**编辑：**有关我要实现的概念的更多详细信息。在“set”滑动时，我需要做两件事。

1.  当一个“项目”滑出屏幕时，它需要从集合中移除，然后重新插入集合的另一端，所以我需要一种方法来知道它何时在任一方向离开屏幕。

2.  我需要知道该装置何时在任一方向上滑动它的全长，以便我可以重置它的位置。

我能想到的实现这种无限滚动集合的幻觉的唯一方法是在集合滑动时跟踪 css 位置。我可以处理我认为的其余部分，但只需要知道如何插入 .hover() 或其他方式来跟踪它而不中断 .hover()。

如果 .hover 不合适，我愿意接受其他方法的建议。

这是我的代码

HTML：

```
<div id="slider">
            <div class="set">
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
                <div class="item">
                    <img src="img/book.png">
                </div>
            </div><!--end set-->

            <div class="prevBtn"></div>
            <div class="nextBtn"></div>
        </div><!--end slider--> 
```

滑块.js：

```
(function() {

    var Slider = {

        init: function() {
            var set = $('#slider .set'),
            setLength = set.children().length * 190,

            prev = $('.prevBtn'),
            next = $('.nextBtn');
            self = this;

            prev.hover(function() {
                set
                    .css({right: set.position().right})
                    .animate({right: '-' + setLength + 'px'}, 8000);
            }, function() {
                set.stop();
            });

            next.hover(function() {
                set
                    .css({left: set.position().right})
                    .animate({right: setLength + 'px'}, 8000);
            }, function() {
                set.stop();
            });
        }
    }

    Slider.init();
}()); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:07:05.453

我发现这个[jquery watch 插件](https://github.com/darcyclarke/jQuery-Watch-Plugin)回答了跟踪左侧位置的问题。它是有限的，因为它只检查 DomAttrModified 或 propertychange，否则会运行一个计时器来检查我出于性能原因真的不想要的间隔位置。看起来替代者将是“突变观察者”，尽管它似乎还没有足够的浏览器支持。

但后来我发现这个[选框插件](https://github.com/aamirafridi/jQuery.Marquee)比试图跟踪位置和执行各种疯狂的数学、速度计算、确定方向和删除/附加图像要少。我要去的地方看起来越来越复杂。所以我想我将采用第二种解决方案。我可以通过用悬停函数替换它的 setInterval 来修改它，以根据悬停的按钮更改方向并运行/停止动画。

我将使用它并为此特定目的重写，并在接下来的一两天内将其发布在这里。

# java - 先注释还是屏蔽评论？（评论风格）

> ID：14825110
> 
> 赞同：-2
> 
> 时间：2013-02-12T03:53:24.413
> 
> 标签：java, annotations, comments

```
/* Prints the coordinate */
@Override
public String toString() {
    return new StringBuilder("(").append(x).append(",").append(y).append(",").append(z).append(")").toString();
} 
```

在上面的示例中，该方法的注释排在第一位。这是通常的做法，还是相反的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:05:31.993

虽然这完全是一个选择的问题，或者说将由团队编码约定决定，但我个人觉得跟随一个看起来更好、更有表现力：

```
/**
  comments
  .... 
*/
@Annotation
type method(){
    ...
    ...
 } 
```

# assembly - 仅从 ADD 和 NAND 右移逻辑？

> ID：14825123
> 
> 赞同：1
> 
> 时间：2013-02-12T03:55:43.307
> 
> 标签：assembly, add, bit-shift

我正在用一种非常简单的汇编语言制作乘法器，其中我有 BEQ、NAND 和 ADD 来创建 SRL。我还必须将乘数保持在 50 行以下（到目前为止使用了 16 行），因此希望该解决方案可以循环使用。

编辑：我的问题是如何实现一个只有一个 NAND 和一个 ADD 的 SRL

有一个想法，虽然效率很低，但也许有人可以改进它：

将 a 递减 1。将该值存储在 b 中。添加 b 和 b 并存储在 c 中。Beq c 和 a，如果它是真的，那么 b 是 a 的一半，也就是 srl。唯一的问题是在某些情况下它必须循环数千次。仍然对其他想法持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:59:21.517

你真的不需要右移来实现乘法。看看如何做到这一点，C 中的示例代码：

```
#include <stdio.h>

typedef unsigned char uint8;
typedef unsigned short uint16;

uint16 Mul8x8(uint8 a, uint8 b)
{
  int cnt;
  uint16 prod = 0;

  for (cnt = 8; cnt > 0; cnt--)
  {
    prod += prod;

    if (a & 0x80)
      prod += b;

    a += a;
  }

  return prod;
}

const uint8 Multipliers[][2] =
{
  { 0x00, 0x01 },
  { 0x01, 0x00 },
  { 0x33, 0x10 },
  { 0x11, 0x0C },
  { 0x0F, 0x0F },
  { 0x80, 0x80 },
  { 0xFF, 0xFF },
};

int main(void)
{
  int i;

  for (i = 0; i < sizeof(Multipliers) / sizeof(Multipliers[0]); i++)
  {
    uint8 a = Multipliers[i][0];
    uint8 b = Multipliers[i][1];

    uint16 p = a * b;
    uint16 p2 = Mul8x8(a, b);

    printf("0x%02X * 0x%02X = 0x%04X %c= 0x%04X\n",
           a, b, p, "!="[p == p2], p2);
  }

  return 0;
} 
```

输出（[ideone]）（[http://ideone.com/NwsykN](http://ideone.com/NwsykN)））：

```
0x00 * 0x01 = 0x0000 == 0x0000
0x01 * 0x00 = 0x0000 == 0x0000
0x33 * 0x10 = 0x0330 == 0x0330
0x11 * 0x0C = 0x00CC == 0x00CC
0x0F * 0x0F = 0x00E1 == 0x00E1
0x80 * 0x80 = 0x4000 == 0x4000
0xFF * 0xFF = 0xFE01 == 0xFE01 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:14:37.673

这是一个仅使用您拥有的操作的代码（对于 BNE，您需要 2 个 NAND 用于 AND 和 BEQ 周围的跳转）。

如果你*真的*需要右移，你可以使用与 test 和 set 相同的循环，而不是 shift 和 add。移动 N 位需要 N-1 次迭代。

```
#include <stdio.h>

unsigned mult(unsigned x, unsigned y)
{
  unsigned test = 1, ans = 0;
next:
  if ((test & x) == 0) goto skip;
  ans += y;
skip: 
  y += y;
  test += test;
  if (test != 0) goto next;
  return ans; 
}

int main(void)
{
  unsigned x, y;
  while (1) {
    printf("Operands: ");
    if (scanf("%u%u", &x, &y) != 2) break;
    printf("Result: %u\n", mult(x, y));
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:14:56.647

右移可以通过两个位掩码来完成：`out_bit=1`，`in_bit=1<<RSHIFT`通过将 in_bit 掩码寻址的位复制到 out_bit 掩码寻址的位置——就像移位字节数组一样。

```
while (in_bit > 0) {
   if (word & in_bit) out_word+=out_bit;
   in_bit+=in_bit; out_bit+=out_bit;
} 
```

与NAND一起操作，即。`~(a & b)`, 有一个选项

```
do { 
   if (~(word & in_bit) == -1) { 
      out_word+=out_bit; 
   }
   in_bit+=in_bit; out_bit+=out_bit;
} while (!(in_bit==0)); 
```

现在只有运算符 ADD / NAND。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:04:54.563

为了实现**乘法器**，您需要**逻辑左移**，而不是右移。左移就是简单的乘以2。可以通过自己加值来实现：

```
 a = a + a  ; this will produce the value shifted left. 
```

不过，右移并不是那么明显。

# c# - c#中强制转换的优先级

> ID：14825127
> 
> 赞同：1
> 
> 时间：2013-02-12T03:57:02.707
> 
> 标签：c#, operators

c#中强制转换的优先级是什么？例如在下面的代码中，z 是否会小于或等于 2？

```
double x = 4.5;
double y = 2.1;
double z = (int) x / y; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:03:30.380

演员在绑定方面击败了所有二元运算符。因此 (int)x / y 表示 ((int)x)/y。

另一方面，你应该总是更喜欢*可读*的代码而不是*聪明*的代码，所以既然你不知道你应该写下面的代码：

> ((int)x) / y

请注意，括号是免费的，并使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:02:02.483

少于：

```
using System;

public class Test
{
    public static void Main()
    {
        double x = 4.5;
        double y = 2.1;
        double z = (int) x / y;
        Console.WriteLine(z);
    }
} 
```

见这里：http: [//ideone.com/fhg5ai](http://ideone.com/fhg5ai)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:03:28.657

`z`将少于两个：

```
 double x = 4.5;
    double y = 2.1;
    double z = (int) x / y;
    Console.WriteLine(z); //1.9047619047619 
```

您的代码确实在执行此操作：`((int)x) / y`，这可能是您的预期输出，也可能不是。

# c# - 查找两个列表交集的高效数据结构

> ID：14825131
> 
> 赞同：4
> 
> 时间：2013-02-12T03:57:18.137
> 
> 标签：c#, algorithm, data-structures

我有两个非常大`List<List<int>>`的 A 和 B。我需要在这些列表的每个元素之间找到交集。

```
A[0] = { 1, 2, 3};
B[0] = {2, 3, 4};

Intersection = { 2, 3 }; 
```

我的实现：

```
List<int> intersection = A[0].Intersection(B[0]).ToList(); 
```

该解决方案需要很长时间才能执行。我想知道是否有更好的方法来做到这一点，以及我可以用来在更好的时间执行它的更有效的数据结构。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T03:59:54.357

您应该在 C# 中为此使用 Hashset [`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。哈希集中的查找是 O(1)（如果像样的哈希函数并在下面使用数组），而不是列表的 O(n)。

在 C# 中使用 Linq，您基本上得到了这个“内置”：[`Intersect()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)如果使用两个列表，将在内部使用哈希集来计算 O(n) 而不是 O(n^2) 中的交集。

```
var intersection = a.Intersect(b).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:19:58.623

使用[HashSet(T).IntersectWith 的](http://msdn.microsoft.com/en-us/library/bb293080.aspx)代码示例：

```
HashSet<string> lst1 = new HashSet<string> 

     { "id1", "id2", "id3" };

HashSet<string> lst2 = new HashSet<string> 

     { "id2", "id3", "id4" };

// what happens is that, lst1 will be modified by only leaving the intersect items
lst1.IntersectWith(lst2); 
```

PS：我将示例用于字符串，但您可以使用自己的整数值。

# javascript - jQuery Tag-It - 使用标签和值对象列表

> ID：14825133
> 
> 赞同：1
> 
> 时间：2013-02-12T03:57:28.953
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, tag-it

我尝试了一个很棒的插件（[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)）。

我有一个像这样的对象列表：

```
var category = [{label:'Photographer',value:'Guruh'},{label:'Photographer',value:'Citta'},{label:'Photographer',value:'Zaki'},{label:'Version',value:'737'},{label:'Version',value:'738'}]; 
```

我在我的设置中传递给 tagSource 选项：

```
$("#my_list_tags").tagit({
    tagSource: category,
    singleField: true,
    singleFieldNode: $("#my_list"),
    placeholderText: "Start typing..."
}); 
```

我当前的显示列表：
![当前列表](../Images/e62d51944b89280729405930b9223fda.png)

我想用一些额外的标签显示我的显示列表： ![显示列表](../Images/6785c3e0253e32bf88f80ad04183a76d.png)

这是我的渲染 html：

```
 <ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1; top: 50px; left: 12px; display: none; width: 294px;">
<li class="ui-menu-item" role="menuitem">
     <a class="ui-corner-all" tabindex="-1">Guruh SKOM</a>
</li>
<li class="ui-menu-item" role="menuitem">
     <a class="ui-corner-all" tabindex="-1">guruh</a>
</li>
</ul> 
```

有人可以在这里帮助我吗？我将不胜感激！

在此先感谢，古鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:03:15.013

你可以在你的选项被渲染后调用这样的东西

```
var category = [{label:'Photographer',value:'Guruh'},{label:'Photographer',value:'Citta'},{label:'Photographer',value:'Zaki'},{label:'Version',value:'737'},{label:'Version',value:'738'}]; 

$("a.ui-corner-all").each(function(){

     var txt = $(this).text();
     var lblIndex;
     var lblValue;

     $.each(category, function (index, singleObj) {
            if(singleObj.value == txt)
             {
                 lblValue = singleObj.label;
                 return false;
             }
     });         

     $(this).text(txt + " " + lblValue);

}); 
```

这可能并不复杂

# jdbc - 如何在不知道列类型的情况下运行 JDBC 更新查询

> ID：14825134
> 
> 赞同：1
> 
> 时间：2013-02-12T03:57:33.960
> 
> 标签：jdbc

我必须在不知道列类型的情况下使用preparedstatement/statement 运行jdbc 更新查询。我有一个查询说'更新表设置状态=？哪里id=？' 我得到一个值的映射，如 {("status"="123"), ("id"="546")}

现在我不知道列类型，是否有任何通用方法可以使用 jdbc 运行此查询？

而不是运行 - ps.setString(1,map.get(("status")); 因为我不知道 DB 中状态字段的列类型（它也可能是 int）

请在不使用 spring jdbc 模板的情况下帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:03:25.907

`ps.setString(1,map.get(("status"))`也适用于整数，你只需要注意`value`你输入的整数列是`int`类型的。

以下代码说明：

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class SOJDBC 
{
public static void main(String rgs[])
{
    Connection con = DBConnection.getConnection("TEMP");
    try 
    {
        PreparedStatement pstmt = con.prepareStatement("insert into STUDENT(ROLLNO,NAME,AGE) values(?,?,?)");
        pstmt.setString(1, "1");    //column type is integer, will work because the value is of int type
        pstmt.setString(2, "Bhushan");
        pstmt.setString(3, "25");   //column type is integer, will work because the value is of int type
        pstmt.executeUpdate();
    }
    catch (SQLException e) 
    {
        e.printStackTrace();
    }
}
} 
```

# excel - 使用 AppleScript 在 Excel 文件中创建超链接

> ID：14825135
> 
> 赞同：0
> 
> 时间：2013-02-12T03:57:42.467
> 
> 标签：excel, applescript, excel-2008

在 Mac 上的 Excel 2008 中，我想在同一 Excel 文档中使用 AppleScript 在单元格“A8”上的工作表 1 上创建一个超链接。

`<hyperlink ref="A8" location="Sheet1!A20" display="Sheet1!A20" />`

我尝试了以下脚本，但它不起作用：

```
tell application "Microsoft Excel"
   make new workbook
   tell worksheet "Sheet1" of active workbook
       make new hyperlink of cell "A8" with properties {address :"#Sheet1!A20", text to display:"Sheet1!A20"}
   end tell
end tell 
```

你能帮我弄清楚该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:48:15.853

这是一个艰难的！以下作品：

```
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        make new hyperlink of cell "A8" with properties {address:"", sub address:"$A$20", text to display:"Sheet1!A20"}
    end tell
end tell 
```

注意 - 我已经编辑了这个答案以改进它。在第一次尝试时，我没有`address:""`权利。您在评论中自己指出了这一点。这是缺少的部分 - 使用`""`as`address`创建对“本文档”的引用。添加一个`#`标志（当您手动输入超链接时似乎会发生这种情况）是导致问题的原因......

# javascript - 在浏览器中替换 URL 路径，而不是在请求中

> ID：14825147
> 
> 赞同：1
> 
> 时间：2013-02-12T03:59:42.280
> 
> 标签：javascript, tomcat, web, fiddler

我正在开发 Web 应用程序，它的监听 URL 是：

```
localhost:8080/secret/index.jsp 
```

但我需要它在浏览器上工作

```
localhost:8080/public/index.jsp 
```

我只需要从浏览器地址中隐藏密码即可。例如 localhost:8080/secret/* -> localhost:8080/public/*

我正在使用 tomcat 网络服务器。有什么方法可以使用任何工具在客户端或服务器端实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:15:52.833

感谢爆炸药丸！

```
history.replaceState({}, 'Public title', '/public/index.jsp'); 
```

工作。

# c - 作业上的分段错误。不知道为什么

> ID：14825151
> 
> 赞同：1
> 
> 时间：2013-02-12T03:59:56.980
> 
> 标签：c, struct, segmentation-fault

我无法找出段错误的原因。我已经在 GDB 中进行了调试，它告诉我给我带来麻烦的行，但我仍然无法弄清楚。

```
Employee* readfile(FILE* file) {
  Employee* newemployee;
  char* tempsalary;
  int salary;
  char* name;
  char* dept;
  char line[128];
  while(file != NULL) {
    fgets(name, sizeof(line), file);
    newemployee->name = strdup(name);  // THIS IS WHERE THE SEGFAULT IS
    fgets(dept, sizeof(line), file);
    newemployee->department = strdup(dept);
    fgets(tempsalary, sizeof(line), file);
    sscanf(tempsalary, "%d", &salary);
    newemployee->salary = salary;
  }
  return newemployee; 
```

我试图在其中运行它的主程序应该打开文件，读取行并从中创建一个 Employee 结构。它使用先前的函数打印结构。

```
int main() {
  FILE* file;
  file = fopen ("stest2.txt", "r");
  Employee* employees[max_employees];
  int i;
  int c;

  for (i = 0; i < max_employees; i++) {
    employees[i] = readfile(file);
    printEmployee(employees[i]);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:02:07.090

看来你有错字，你的意思是：

```
fgets(name, sizeof(line), file); 
```

成为：

```
fgets(line, sizeof(line), file); 
```

* * *

还，

```
Employee* newemployee;
newemployee->name = strdup(name); 
```

您刚刚取消引用了导致**未定义行为**的未初始化指针。
`newemployee`需要指向一个足够大的内存来保存一个`Employee`对象，然后才能取消引用它。

```
Employee* newemployee;
Employee emp;
newemployee = &emp;
newemployee->name = strdup(name); 
```

* * *

上述两个问题都在您的代码中重复出现。你需要解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:02:07.367

没有为 分配内存`name`。所以

```
fgets(name, sizeof(line), file); 
```

很可能是后来出现的问题。

`name`在将行读入之前分配内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T04:04:56.003

您的指针似乎都没有分配内存。新员工，部门，姓名，tmpsalary。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T04:07:14.570

您将“newemployee”声明为指向 Employee 类实例的指针，但实际上从未分配过新的 Employee。在 C++ 中，以下两个调用通常是等效的（除非您使用运算符重载，在这种情况下您不是）：

```
newemployee->name = "hello";
(*newemployee).name = "hello"; 
```

由于您从未为“newemployee”指针分配任何内容，因此您最终会取消引用一个完全随机的内存位置，该位置不属于您的进程，因此您的操作系统会立即通过发出段错误信号来杀死它。

# ruby - 不同 ruby 版本的不同指数行为

> ID：14825152
> 
> 赞同：3
> 
> 时间：2013-02-12T04:00:07.583
> 
> 标签：ruby, math, exponent, ruby-1.8.7

我正在尝试`2^1000`用 ruby​​ 进行计算，但是对于不同的版本，我得到了不同的结果。知道为什么吗？

使用 1.8.7：

```
~ » rbenv global system                                                                         ~  
~ » ruby --version                                                                              ~  
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
~ » irb                                                                                         ~  
>> 2 ** 1000
0
>> exit 
```

使用红宝石 1.9.3

```
~ » rbenv global 1.9.3-p194                                                                     ~  
~ » ruby --version                                                                              ~  
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.1.0]
~ » irb                                                                                         ~  
>> 2 ** 1000
10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376
>> exit 
```

我可以使用该语法并让它工作，但我只是好奇为什么它在 1.8.7 中导致 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:23:20.657

我有理由确定您遇到[了这篇文章中提到的错误](https://stackoverflow.com/questions/12009799/exponentiation-in-ruby-1-8-7-returns-wrong-answers)。

似乎它已[被此对 Ruby trunk 的提交修复](https://github.com/ruby/ruby/commit/4e4649e13cd4175aab75a0edc2fc5b082cf735d1)，这使其成为 Ruby 1.9.3-p0 及更高版本。

# android - 如何从 couchdb 服务器推送到 touchdb 客户端？

> ID：14825154
> 
> 赞同：0
> 
> 时间：2013-02-12T04:00:55.153
> 
> 标签：android, database, couchdb, touchdb

我正在尝试将数据从我的 couchdb 服务器推送到在 android x86 vm 上运行的 touchdb 应用程序（杂货同步示例）。应用程序的复制在应用程序进行拉和推的情况下正常工作。我无法从服务器推送到 touch db 客户端。当我尝试时，出现以下错误：

{“错误”：“db_not_found”，“原因”：“无法打开http://192.168.100.101/grocery-sync/”}。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:59:54.503

你几乎肯定不想这样做。您应该假设您的移动客户端将使用动态 IP 地址。在 wi-fi 和蜂窝网络之间切换将创建一个新的 IP 地址。服务器需要一个要复制到的 URL。

TouchDB 是为从服务器拉取移动客户端的用例而设计的。为了推送到客户端，TouchDB 需要处理服务器发出的所有正确的 HTTP 请求。其中许多对于 TouchDB 的当前用例没有意义，所以我怀疑它们是否会很快被添加。

# mysql - 错误：标记“@”在预处理器表达式中无效

> ID：14825159
> 
> 赞同：0
> 
> 时间：2013-02-12T04:01:45.877
> 
> 标签：mysql, c, linux, compiler-errors

谁能告诉我错误的原因是什么

`/mysql_com.h:306:5: error: token @ is not valid in preprocessor expressions`

而这个 mysql_com.h 文件不包含任何 **@**。那么我该如何解决这个错误。

我认为这类似于我们在 linux 中打开 windows 编辑文件时的错误，然后**^V appers**。但在这种情况下，**@**不在文件中的任何位置。

提前致谢。寻找您的善意回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:18:05.403

当在某些时候包含 '.h.in' 文件而不是通常的 '.h' 头文件（例如[this](http://forums.codeguru.com/showthread.php?462378-GNU-compile-error-quot-token-is-not-valid-in-preprocessor-expressions-quot)）时，似乎已经报告了这种问题 - 可能是因为一些丢失的文件或错误配置的包含路径? 正如之前建议的那样，我会尝试通过定义进行追溯，`MYSQL_VERSION_ID`并仔细检查您的计算机上是否存在正确的 .h 文件和包含路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:10:22.360

您必须检查 **MYSQL_VERSION_ID**中存储的内容。转到库文件，该常量定义的语法如下：-

**#define MYSQL_VERSION_ID BLAH-BLAH**

尝试解决这个**BLAH-BLAH**，因为这肯定有一些问题，有“ **@** ”符号。

# c - Fgets 错误 段错误

> ID：14825162
> 
> 赞同：0
> 
> 时间：2013-02-12T04:01:53.187
> 
> 标签：c, fgets

是否有任何理由让较早编译的程序由于 fgets 而在某个点出现段错误？我根本没有更改任何与它相关的代码。突然我相信它无法打开文件，但我在十五分钟前用文件测试了它......我所做的只是添加了一个搜索功能，所以我不明白问题是什么......

可能是我通过 PuTTy 连接的服务器吗？

```
int createarray( int **arrayRef, FILE *fptr){
    int size = 0, i;
    char rawdata[100];

    while (fgets(rawdata, 99, fptr) != NULL){
        size++;
    }

    rewind(fptr);
    *arrayRef = malloc(sizeof(int) * size);

    for ( i = 0; i < size; i++ ){
     fgets(rawdata, 99, fptr);
     *(*arrayRef + i) = atoi(rawdata);
    }

    return size;
}

      int main ( int argc, char **argv ) {  //main call

    // declare variable to hold file
    FILE *inFilePtr = fopen(*(argv + 1), "r");
    int **aryHold;
    int numElements, sortchoice, key, foundindex;

    // Call function to create array and return num elements
    numElements = createarray(aryHold, inFilePtr); 
```

这是编译、执行正确且此后未更改的代码。GDB 说 fgets 有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:57:38.057

好的，它用来“工作”的原因是你破坏了一个不重要的内存位置。改变你的代码改变了事情，现在你正在破坏一些重要的东西。

您将未初始化的指针传递给 createarray()。你想做类似的事情：

```
int* aryHold;
//...
... createarray(&aryHold ... 
```

顺便说一句，许多编译器都有能力为你捕捉到这种错误。如果你还没有，你可能想看看你的编译器是否有一个错误检查选项，可以省去你的麻烦（并且可能会找到一些其他代码，只是偶然地“工作”）。

# javascript - chrome 存储 API 集调用中使用的密钥可以是变量吗？

> ID：14825167
> 
> 赞同：0
> 
> 时间：2013-02-12T04:02:18.107
> 
> 标签：javascript, api, google-chrome, storage

我正在尝试使用[Chrome 存储 API](http://developer.chrome.com/extensions/storage.html)并希望使用在运行时确定的密钥。但是，当我尝试类似

```
 var d = 'random string';
    chrome.storage.sync.set({d : actual_data}); 
```

似乎存储的键是实际字符“d”，而不是分配给它的字符串的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:05:49.857

您不能在带有变量的 JavaScript 对象中设置键。您必须使用括号表示法来执行此操作。

```
var obj = {}, d = 'random string';
obj[d] = actual_data; 
```

# php - PHP-mysql查询案例问题

> ID：14825169
> 
> 赞同：0
> 
> 时间：2013-02-12T04:02:21.197
> 
> 标签：php, mysql

我有以下 php 和 sql 代码，它完美地工作是用户在 tblactions 中至少有 4 个案例中的一个。如果用户只有 1 个案例，例如参加，则会出现问题。然后它似乎进入一个无限循环并且页面不会加载。谁能帮我修改这段代码？

```
 $result5 = mysql_query("SELECT tblactions.*, fgusers.username FROM tblactions LEFT JOIN fgusers ON fgusers.id_user = tblactions.following_id WHERE user_id = '$test' ORDER BY timestamp DESC")

    while ($row5 = mysql_fetch_array($result5))
    {
        $actiontype = $row5['type'];
        switch ($actiontype)
    {
    case "event":

       echo '<div id="peepme" class="ui-btn-text">',
            '<img id="peoplemeimg" alt="Happps" src="image/'.$row7['photo'].'" class="ui-li-thumb">',
            '<h3 id="pmh3" class="ui-li-heading">',$row5['user_name'], ' created the event','</h3>', 
            '<a id="pmevent" data-ajax="false" class="ui-li-heading" href="eventview.php?eventid='.$row5['event_id'].'">',$row5['event_name'],'</a>',

            '</div>';
       break;

    case "follow":

       echo '<div id="peepme" class="ui-btn-text">',
            '<img id="peoplemeimg" alt="Happps" src="image/'.$row7['photo'].'" class="ui-li-thumb">',
            '<h3 id="pmh3" class="ui-li-heading">',$row9['username'], ' started following','</h3>', 
            '<a id="pmevent" data-ajax="false" class="ui-li-heading" href="people.php?id='.$row5['following_id'].'">',$row5['username'],'</a>',

            '</div>';

       break;

    case "photo":

    echo '<div id="peepme" class="ui-btn-text">',
         '<img id="peoplemeimg" alt="Happps" src="image/'.$row7['photo'].'" class="ui-li-thumb">',
         '<h3 id="pmh3" class="ui-li-heading">',$row9['username'], ' uploaded a photo','</h3>', 
         '<div id="imgupld">','<img id="upldimg" alt="Happps" src="image/'.$row5['photo'].'" class="ui-li-thumb">',

         '</div>',                  
         '</div>';

       break;

    case "attending":

    echo '<div id="peepme" class="ui-btn-text">',

         '<img id="peoplemeimg" alt="Happps" src="image/'.$row7['photo'].'" class="ui-li-thumb">',
         '<h3 id="pmh3" class="ui-li-heading">',$row9['username'], ' is attending ','</h3>', 
         '<a id="pmevent" data-ajax="false" class="ui-li-heading" href="eventview.php?eventid='.$row5['event_id'].'">','This Event','</a>',

         '</div>';

        }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:13:36.257

这是错误。

```
case "attending":

echo '<div id="peepme" class="ui-btn-text">',

        '<img id="peoplemeimg" alt="Happps" src="image/'.$row7['photo'].'" class="ui-li-thumb">',
        '<h3 id="pmh3" class="ui-li-heading">',$row9['username'], ' is attending ','</h3>', 
        '<a id="pmevent" data-ajax="false" class="ui-li-heading" href="eventview.php?eventid='.$row5['event_id'].'">','This Event','</a>',
    '</div>';

break;
```

**忘记打破出席案例。**

# java - 如果只使用两次，创建一个新的对象引用会更快吗？

> ID：14825172
> 
> 赞同：2
> 
> 时间：2013-02-12T04:02:50.007
> 
> 标签：java, object, optimization, reference, casting

我有一个关于指令优化的问题。如果要在两个语句中使用一个对象，创建一个新的对象引用会更快还是应该在两个语句中直接调用该对象？

就我的问题而言，该对象是对象的一部分`Vector`（此示例来自没有 ArrayLists 的简化版 Java）。这是一个例子：

```
AutoEvent ptr = ((AutoEvent)e_autoSequence.elementAt(currentEventIndex));
if(ptr.exitConditionMet()) {currentEventIndex++; return;}
ptr.registerSingleEvent(); 
```

`AutoEvent`是有问题的类，`e_autoSequence`是`Vector`AutoEvent 对象的。包含有问题的`AutoEvent`两种方法：`exitConditionMet()`和`registerSingleEvent()`.

因此，此代码可以交替编写为：

```
if(((AutoEvent)e_autoSequence.elementAt(currentEventIndex)).exitConditionMet()) 
    {currentEventIndex++; return;}
((AutoEvent)e_autoSequence.elementAt(currentEventIndex)).registerSingleEvent(); 
```

这比上面的快吗？

我知道铸造过程很慢，所以这个问题实际上是双重的：另外，如果我不铸造对象，哪个会更优化？

请记住，这仅用于所讨论对象的两种用途。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:33:51.027

第一个解决方案在所有方面都更好：

*   **只调用一次**向量`elementAt`方法。这实际上是这里最昂贵的操作，所以只做一次就是一个不错的性能胜利。同样做两次可能会使您面临一些竞争条件。
*   **只有一次铸造**操作。在现代 JVM 上强制转换非常便宜，但仍然有一点成本。
*   恕我直言，它**更具可读性**。你得到一个对象，然后用它做两件事。如果你得到了两次，那么读者必须在心里弄清楚你得到的是同一个对象。最好得到一次，并将其分配给具有好名称的变量。
*   局部变量的*单个赋值*（如`ptr`第一个解决方案中）**非常便宜且通常免费**- Java JIT 编译器足够聪明，可以在这里生成高度优化的代码。

PS`Vector`已经过时了。考虑转换为`ArrayList<AutoEvent>`. 通过使用通用 ArrayList，您无需显式强制转换，而且它比 a 快得多`Vector`（因为它不同步，因此锁定开销更少）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:06:44.150

第一个解决方案会更快。

原因是赋值比方法调用工作得更快。在第二种情况下，您将调用 elementAt() 方法两次，这将使其变慢，并且 JVM 可能无法优化此代码，因为它不知道 elementAt() 中究竟发生了什么。

还要记住，Vector 的方法是同步的，这使得每个方法调用由于获取锁而变得更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:17:57.600

我不知道这里的“创建新对象引用”是什么意思。下面的代码`((AutoEvent)e_autoSequence.elementAt(currentEventIndex))`可能会被翻译成字节码，获取序列元素，将其转换为`AutoEven`并将结果引用存储在堆栈中。与其他局部变量`ptr`一样的局部变量也存储在堆栈中，因此分配对 is 的引用只是将 4 个字节从一个堆栈槽复制到另一个附近的堆栈槽。这是非常非常快速的操作。现代 JVM 不进行引用计数，因此分配引用可能与分配`int`值一样便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:39:34.380

让我们先弄清楚一些术语。您的代码不会“创建新的对象引用”。它正在从`Vector`.

* * *

要回答您的问题，获取一次并将引用放入临时变量（可能）会快一点。但是差异很小，除非您在循环中多次执行此操作，否则*不太可能显着。*

（or`elementAt`上的方法很便宜。如果列表是一个链表，它有一个实现 for ，那么该调用可能很昂贵，并且进行 1 次或 2 次调用之间的差异可能很大......）`Vector``ArrayList``O(1)``O(N)``elementAt`

一般来说，您应该考虑算法的复杂性，但除此之外，您不应该花时间优化......直到您有可靠的分析证据告诉您在哪里优化。

* * *

我不能说是否`ArrayList`更合适。这可能是您*需要*`Vector`.

# javascript - Google HeatMap API 抛出 2 条错误消息：H/M 未定义

> ID：14825181
> 
> 赞同：1
> 
> 时间：2013-02-12T04:03:38.257
> 
> 标签：javascript, google-maps-api-3, heatmap

几个小时以来，我一直在尝试实现一个非常简单的 Google HeatMap 演示。我几乎从演示页面复制了所有内容（在 google map api 文档上）这是 2 条错误消息：

1.  未捕获的 ReferenceError：H 未定义 HeatMap.html:6
2.  未捕获的 ReferenceError：未定义 M

![在此处输入图像描述](../Images/3ae7ad0fb31ec6ebeaa852dd4f92c886.png)

这是代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry,visualization&sensor=true"></script>
<script type="text/javascript">

    // Adding 500 Data Points
    var map, pointarray, heatmap;

    var taxiData = [
      new google.maps.LatLng(37.782551, -122.445368),
      new google.maps.LatLng(37.782745, -122.444586),
      new google.maps.LatLng(37.782842, -122.443688),
      new google.maps.LatLng(37.782919, -122.442815),
      new google.maps.LatLng(37.782992, -122.442112),
      new google.maps.LatLng(37.783100, -122.441461),
      //...........so many data here, skip...........
      new google.maps.LatLng(37.756335, -122.403719),
      new google.maps.LatLng(37.755503, -122.403406),
      new google.maps.LatLng(37.754665, -122.403242),
      new google.maps.LatLng(37.753837, -122.403172),
      new google.maps.LatLng(37.752986, -122.403112),
      new google.maps.LatLng(37.751266, -122.403355)
    ];

    function initialize() {
        var mapOptions = {
            zoom: 13,
            center: new google.maps.LatLng(37.774546, -122.433523),
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        pointArray = new google.maps.MVCArray(taxiData);

        heatmap = new google.maps.visualization.HeatmapLayer({
            data: pointArray
        });

        heatmap.setMap(map);
    }

    function toggleHeatmap() {
        heatmap.setMap(heatmap.getMap() ? null : map);
    }

    function changeGradient() {
        var gradient = [
          'rgba(0, 255, 255, 0)',
          'rgba(0, 255, 255, 1)',
          'rgba(0, 191, 255, 1)',
          'rgba(0, 127, 255, 1)',
          'rgba(0, 63, 255, 1)',
          'rgba(0, 0, 255, 1)',
          'rgba(0, 0, 223, 1)',
          'rgba(0, 0, 191, 1)',
          'rgba(0, 0, 159, 1)',
          'rgba(0, 0, 127, 1)',
          'rgba(63, 0, 91, 1)',
          'rgba(127, 0, 63, 1)',
          'rgba(191, 0, 31, 1)',
          'rgba(255, 0, 0, 1)'
        ]
        heatmap.setOptions({
            gradient: heatmap.get('gradient') ? null : gradient
        });
    }

    function changeRadius() {
        heatmap.setOptions({ radius: heatmap.get('radius') ? null : 20 });
    }

    function changeOpacity() {
        heatmap.setOptions({ opacity: heatmap.get('opacity') ? null : 0.2 });
    }

    $(document).load(function () {

    });

    $(document.body).on("onload", initialize);

</script>

<script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/11/9/%7Bcommon,map,util,onion,visualization_impl%7D.js"></script>
<script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/11/9/%7Bstats,controls%7D.js"></script>
<script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/11/9/%7Bmarker%7D.js">

</script>
</head>
<body onload="initialize()">
    <div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:26:18.803

我不确定这会有多大帮助，但[这里有一个工作版本](http://jsbin.com/otegob/1/edit)，它依赖于一组非常不同的库依赖项。源代码中的那些让我觉得很奇怪。他们似乎依靠非常奇怪的技术来初始化地图。

如果你不介意我问，你从哪里得到你所依赖的代码？我使用的修改后的依赖[来自这里](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)，我不相信我见过任何与你之前从谷歌发布的内容非常相似的东西......它似乎依赖于修改后的 eval 形式来创建地图库，这将是非常不寻常的。总体而言，该示例在功能上与您的示例非常相似，只是库构建似乎有所不同。

# php - MongoDB php 空间天文学数据 这有什么问题？

> ID：14825183
> 
> 赞同：0
> 
> 时间：2013-02-12T04:03:47.827
> 
> 标签：php, mongodb, spatial

我想检索边界框内的数据（（ra_min，dec_min），（ra_max，dec_max））。谁能告诉我下面有什么问题？

php 代码和数据结构如下。谢谢......

结构 ：

```
 {
        "filter": "E", 
        "loc": {
            "dec": 130, 
            "ra": 15
        }, 
        "path": "00015+00130E.jpeg"
    }, 
    {
        "filter": "Z", 
        "loc": {
            "dec": 130, 
            "ra": 15
        }, 
        "path": "00015+00130Z.jpeg"
    }, 
```

代码 ：

```
$lowerLeft = array("ra"=>$RA_min - $ra_offset, "dec"=>$DEC_min - $dec_offset);
$upperRight= array("ra"=>$RA_max + $ra_offset, "dec"=>$DEC_max + $dec_offset);

$cond = array("loc" => array('$within' => array('$box' => $lowerLeft, $upperRight)));
$cursor = $collection->find($cond); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:16:48.970

我认为问题出在 $box 上

$box 用法示例：

```
$cursor = $collection->find( array( 'loc'=>array('$within'=> array('$box'=>array(array(0,0), array(100,100) ) ) ) )); 
```

这将返回框内的所有文档，其点位于：[0,0]、[0,100]、[100,0] 和 [100,100]。

使用 print_r($cond); 在查找（）之前；查看显示问题所在的数组值

# heroku - Heroku Cedar 上的 HireFire 没有被触发？

> ID：14825184
> 
> 赞同：0
> 
> 时间：2013-02-12T04:03:50.893
> 
> 标签：heroku, cedar, hirefire

我已将应用程序从 3.2/1.8.7/Bamboo 升级到 3.2/1.9.2/Cedar。一切似乎都在工作，除了 HireFire 没有被正确触发。

当我跑步时，事情似乎进展顺利

```
bundle exec rake jobs:work 
```

手动，但我无法为我的生活弄清楚！我什至不知道如何获得输出以查看问题可能是什么。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:14:21.810

这让事情奏效了。显然在撰写本文时，HireFire 不适用于 Cedar（尽管它声称可以）

# [Rails 3 Mailer 和延迟作业和 Heroku](https://stackoverflow.com/questions/9830629/rails-3-mailer-and-delayed-job-heroku)

# r - 将 ggplot2 绘制密度直方图作为线

> ID：14825187
> 
> 赞同：3
> 
> 时间：2013-02-12T04:04:22.143
> 
> 标签：r, ggplot2

我有一个关于我在 3 个网站（比如说 OpenTable、Yelp、TripAdvisor）上收集的评分的简单表格。评级从 1 到 5，因此评级是一个因素列，网站是另一个因素列（只允许 3 个值）。我只有这样的 2 列和我的所有观察结果。该结构是一个名为`all`包含上述列的数据框。例子：

```
Website           Rating
_________________________
Yelp                 1
TripAdvisor          2
Yelp                 3
OpenTable            2 
```

我想做的是有一个彩色的密度图。

我的问题看起来与此线程中发布的问题完全相同：[Create a density plot with ggplot2 using a factor](https://stackoverflow.com/questions/14024236/create-a-density-plot-with-ggplot2-using-a-factor)

但是，该解决方案对我不起作用。我通过使用替换我的变量名称来尝试它

`ggplot(all, aes(rating, colour=website, group=website)) + geom_density()`

但它不起作用。而不是给我一个插值曲线，这是我得到的：![我的密度图](../Images/a0133e977cc5c69b8bb4253ab794b80b.png)

在我看来，我与链接线程中的 OP 具​​有相同的数据结构：`all`具有两个因子列（`website`和）的数据框（ `rating`）。

```
> mode(all)
[1] "list"
> head(all$website)
[1] TripAdvisor TripAdvisor TripAdvisor TripAdvisor TripAdvisor TripAdvisor
Levels: TripAdvisor OpenTable Yelp
> head(all$rating)
[1] 1 2 1 4 5 2
Levels: 1 2 3 4 5 
```

我的问题是：为什么我的行为不同？我该怎么做才能获得相同的情节？作为奖励/不同的解决方案，我还将尝试用直线插入我的点，而不是使用更复杂的内核，但我需要保持密度，因为我对一个网站的观察比其他 2 个网站的总和要多。

数据样本：

```
> dput(all[sample(nrow(all), 200),])
structure(list(website = structure(c(3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
2L, 1L, 3L, 2L, 1L, 3L, 2L, 1L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 1L, 
3L, 3L, 1L, 3L, 2L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 
2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 1L, 3L, 1L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 
2L, 3L, 3L, 3L, 1L, 3L, 1L, 3L, 3L, 2L, 3L, 3L, 3L, 3L, 1L, 3L, 
3L, 3L, 3L, 3L, 2L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 2L, 3L, 1L, 3L, 
1L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 
3L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 2L, 1L, 3L, 3L, 3L, 
1L, 3L, 3L, 2L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 3L, 1L, 3L, 3L, 
3L, 3L), .Label = c("TripAdvisor", "OpenTable", "Yelp"), class = "factor"), 
    rating = c(2, 4, 5, 3, 5, 3, 2, 4, 4, 5, 5, 2, 5, 5, 4, 2, 
    5, 4, 5, 5, 4, 4, 3, 5, 3, 2, 4, 4, 4, 2, 4, 5, 3, 4, 5, 
    4, 4, 3, 5, 4, 5, 2, 5, 5, 4, 3, 1, 5, 5, 5, 5, 2, 4, 1, 
    1, 4, 4, 4, 3, 1, 5, 4, 4, 5, 4, 4, 5, 4, 1, 1, 3, 4, 5, 
    5, 5, 4, 5, 2, 3, 4, 2, 4, 4, 4, 3, 2, 4, 4, 4, 4, 5, 4, 
    5, 3, 1, 5, 2, 3, 5, 1, 5, 4, 4, 5, 5, 4, 4, 4, 4, 5, 4, 
    4, 4, 3, 3, 5, 2, 4, 3, 5, 3, 3, 3, 5, 4, 1, 3, 3, 5, 4, 
    4, 2, 2, 4, 3, 2, 5, 5, 5, 4, 5, 1, 2, 5, 2, 4, 2, 5, 3, 
    4, 4, 3, 4, 5, 3, 3, 5, 4, 2, 4, 5, 4, 1, 4, 5, 1, 5, 1, 
    2, 5, 3, 3, 4, 5, 4, 4, 3, 3, 4, 4, 3, 3, 4, 3, 4, 3, 4, 
    5, 3, 2, 5, 3, 4, 4, 1, 5, 4, 3, 5, 3)), .Names = c("website", 
"rating"), row.names = c(2736944L, 3701156L, 4217688L, 5350640L, 
3600261L, 2944052L, 3522393L, 5443298L, 3965562L, 490821L, 4706825L, 
1694078L, 3395609L, 2220568L, 2886121L, 4329867L, 3414341L, 4911507L, 
2629607L, 2547491L, 5254750L, 5089579L, 922864L, 643065L, 1797579L, 
782480L, 686194L, 5035633L, 998745L, 553929L, 888404L, 730158L, 
4357257L, 1824206L, 4941425L, 2910113L, 2006209L, 643302L, 1534660L, 
3489947L, 202175L, 2483374L, 820339L, 3411547L, 4792406L, 1379214L, 
3900503L, 1000939L, 3823518L, 5340233L, 1330743L, 5333146L, 3638755L, 
2445636L, 1057389L, 5092709L, 5092040L, 3841598L, 3739264L, 1482807L, 
1314908L, 2522682L, 1757427L, 723017L, 4809829L, 4636027L, 1728575L, 
2974897L, 3485658L, 2592565L, 3207974L, 2721825L, 4295506L, 4953206L, 
3325724L, 4706765L, 455090L, 5386094L, 612504L, 3483673L, 881132L, 
1715784L, 4478951L, 1995026L, 1640553L, 4213693L, 925338L, 4541407L, 
3602299L, 5233082L, 727017L, 4954392L, 270757L, 3436121L, 3793314L, 
824985L, 1558576L, 3659425L, 2131835L, 1721671L, 32696L, 3405602L, 
2736827L, 4403647L, 2171731L, 2954043L, 976434L, 3680791L, 30799L, 
4833704L, 3895171L, 4469617L, 2517017L, 4236947L, 733711L, 1480361L, 
255671L, 4847331L, 355851L, 2933805L, 5470569L, 3045714L, 3423394L, 
475428L, 4460007L, 4668961L, 1560070L, 3314368L, 2150067L, 4480758L, 
781676L, 3659111L, 4799721L, 3509779L, 5320687L, 5179115L, 852931L, 
4141898L, 4768793L, 1356381L, 3881247L, 1685112L, 2232222L, 315374L, 
1721551L, 1464571L, 2472040L, 3198238L, 4719488L, 2763751L, 2999152L, 
2042160L, 1374928L, 1703496L, 1805583L, 5192311L, 3558389L, 925026L, 
5497787L, 2464617L, 1850617L, 1047932L, 186007L, 3168546L, 1433736L, 
1548105L, 5450L, 5288180L, 2476807L, 997242L, 4693332L, 5107109L, 
3338800L, 2722363L, 58422L, 3408902L, 4537803L, 2780976L, 2129998L, 
376274L, 1773109L, 5138810L, 2364642L, 1087043L, 3318862L, 1567254L, 
418564L, 726387L, 4128160L, 4669905L, 1194602L, 2315020L, 211234L, 
818018L, 3378122L, 462827L, 1516313L, 3120210L, 4257323L, 5214034L
), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T08:08:33.610

正如@joran 在他的评论中指出的那样，这似乎都是带宽问题。如果我用低带宽绘制您的样本数据，它看起来像您提供的图像：

```
ggplot(all, aes(rating, colour=website, group=website)) + geom_density(adjust=0.1) 
```

![在此处输入图像描述](../Images/07ff2f4eb8cdb846e33ebf37610cc04d.png)

但是对于高带宽，它似乎完全不同：

```
ggplot(all, aes(rating, colour=website, group=website)) + geom_density(adjust=2) 
```

![在此处输入图像描述](../Images/057719d06737fe523c77386341ebd82a.png)

如果您只想绘制与线连接的相对频率，我认为您必须事先计算它们。例如 ：

```
all.prop <- data.frame(prop.table(table(website=all$website, rating=all$rating),1))
ggplot(all.prop, aes(x=rating, y=Freq)) + geom_line(aes(group=website, color=website)) 
```

![在此处输入图像描述](../Images/4a2cd6bf2e64071af5fe252b749d599d.png)

# php - 使用 PHP 从 Stack Overflow API 获取 null 作为响应

> ID：14825188
> 
> 赞同：4
> 
> 时间：2013-02-12T04:04:30.897
> 
> 标签：php, stackexchange-api

我将此代码用于 PHP 以获得 Stack Overflow 声誉。

```
$feed = json_decode(file_get_contents("http://api.stackexchange.com/2.1/users/22656?order=desc&sort=reputation&site=stackoverflow&filter=!*MxOyD8qN0Yghnep", true), true);
$array = $feed['items'][0];
$rep = $array['reputation'];
echo $rep; 
```

但我得到`null`了饲料。另外，用户帐户是 Jon Skeet，这是我获得 ID 22656 的地方。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T04:48:33.117

问题是响应也被压缩了。

我首选的解决方法是使用带有 CURLOPT_ENCODING 选项的 curl。

```
<?php
function curl($url){
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
    curl_setopt($curl, CURLOPT_USERAGENT, 'cURL');
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_ENCODING , "gzip");//<< Solution

    $result = curl_exec($curl);
    curl_close($curl);

    return $result;
}

$feed = curl("http://api.stackexchange.com/2.1/users/22656?order=desc&sort=reputation&site=stackoverflow&filter=!*MxOyD8qN0Yghnep");

$feed = json_decode($feed,true);
$rep = $feed['items'][0]['reputation'];
echo $rep;//531776
?> 
```

不过，您可以使用普通的 FGC，然后将响应膨胀回未压缩的状态。

```
<?php
$feed = file_get_contents('http://api.stackexchange.com/2.1/users/22656?order=desc&sort=reputation&site=stackoverflow&filter=!*MxOyD8qN0Yghnep');
$feed = gzinflate(substr($feed, 10, -8));

$feed = json_decode($feed,true);
$rep = $feed['items'][0]['reputation'];
echo $rep;//531776
?> 
```

# c++ - 无法使 c++ 文件可读 infile.good()

> ID：14825195
> 
> 赞同：0
> 
> 时间：2013-02-12T04:05:24.260
> 
> 标签：c++

我正在编写一个程序，它第一次运行时会创建并写入文件，稍后在程序中它应该从该文本文件中读取，但 good() 返回 false。如果我第二次运行该程序，它将完美地读写。

```
while(!done) {    //loop thats not supposed to end 
//code that has nothing to do with file
infile.seekg(0,ios::beg);   
while(infile.good() && !infile.eof()) {
//reads file line by line
}
ofstream file(fileName, ios::app);
file << s+"\n";
file << m+"\n";
file.close(); 
```

它总是写得很好但是我第一次运行程序并且文本文件是新的以后程序不会进入这个

如果我关闭程序并再次运行它，它将进入一段时间并完美运行我无法弄清楚任何帮助将不胜感激。我试过把

```
if(!infile.good()){ 
ofstream file(fileName) 
} 
```

在文件的开头，但除了在程序的早期创建文件之外什么也没做，但仍然有同样的问题。这是我的第一个 c++ 程序，它是一个很大的成绩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:46:22.857

在您的 infile 上的文件结束后，您必须调用 infile.clear() 来清除 EOF 位。

# html - 仅在图像的一部分上进行灰度？

> ID：14825206
> 
> 赞同：3
> 
> 时间：2013-02-12T04:07:06.023
> 
> 标签：html, css

在css中是否可以只制作图像灰度的一部分？
我尝试使用过滤器无济于事，似乎想不出任何方法来实现这一点。你有什么想法？

我想让这张图片只在这个页面的黑暗部分变灰。

![图片](../Images/80ddbd6761eafc27e5b74bfb99fd3595.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T04:08:44.370

我以前做过类似的事情来实现这一目标......

1.  使用 a`div`并将其设置`background-image`为图像。
2.  设置`background-position`并绝对定位它，使其看起来是相同的图像。
3.  使用 CSS 设置`div`.

[js小提琴](http://jsfiddle.net/Nc7Vt/)。

对于您想要的确切内容，我可能会根据需要将其`opacity`设置为黑色背景，并为顶部效果设置顶部嵌入阴影。

# winforms - Winforms DevExpress 中的 MasterPage 概念？

> ID：14825210
> 
> 赞同：0
> 
> 时间：2013-02-12T04:07:22.590
> 
> 标签：winforms, devexpress

实际上，我是 Winforms 的新手。Winforms DevExpress 中是否有类似 MasterPage 概念的东西？这可以通过 InheritedForms 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:21:19.517

是的。尽管它与 Devex 无关，但在 Winforms 中是可能的。

您可以做的是创建一个表单并调用它`MasterForm`，然后您创建的每个其他表单 - 都可以从它继承。

查看此链接[Inherited Forms](http://www.akadia.com/services/dotnet_inherited_forms.html)以获取更多信息和示例 :)

# mysql - grails如何设置全文索引

> ID：14825215
> 
> 赞同：1
> 
> 时间：2013-02-12T04:07:53.263
> 
> 标签：mysql, grails, grails-orm

我找不到关于这个非常简单的问题的信息。我有一个像这样的简单域类

```
Class VehicleRequest{
    LocalDateTime startTime
    LocalDateTime endTime
    Status status
    String destination
    User reqUser  
} 
```

在我的服务中，我想查询具有相似目的地的车辆请求（基于文本匹配）。我正在使用 MySQL Innodb 5.5。如果可能的话，我不想只为一个字段添加插件。有什么解决方法吗？谢谢中午Yuki

# android - 安卓设置界面

> ID：14825216
> 
> 赞同：2
> 
> 时间：2013-02-12T04:08:16.133
> 
> 标签：android, android-fragments, android-preferences, android-fragmentactivity

我正在寻找类似于系统 android 的设置 UI 的东西。我想要一些复选框首选项，开关首选项，编辑文本首选项之类的应用程序启动，然后当用户选择一个首选项时打开一个片段，但我无法弄清楚。

我已经参考了[设置](http://developer.android.com/guide/topics/ui/settings.html)指南，但它坚持使用首选项标题。在显示标题时，我面临显示文本的不太可能的开销，而文本又会加载片段。

例如，

我的偏好标题是这样的：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >

    <!-- These settings headers are only used on tablets. -->

    <header
        android:fragment="${packageName}.${activityClass}$GeneralPreferenceFragment"
        android:title="@string/pref_header_general" />
    <header
        android:fragment="${packageName}.${activityClass}$NotificationPreferenceFragment"
        android:title="@string/pref_header_notifications" />
    <header
        android:fragment="${packageName}.${activityClass}$DataSyncPreferenceFragment"
        android:title="@string/pref_header_data_sync" />

</preference-headers> 
```

只是为了加载实际数据，我不得不使用它。实际数据将具有复选框和编辑文本。

如果有人对此提供一些见解，那就太好了。如果我可以在加载屏幕时启动实际的片段数据，那将有很大帮助。如果我可以控制在选择片段项目时调用哪个片段并调用其他片段，那就更好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:00:24.817

要使用开关等创建自定义首选项标头，您需要使用标头扩展 PreferenceActivity，如 Android 文档所述，然后覆盖 PreferenceActivity.setListAdapter 以创建您自己的列表适配器，从而创建自定义视图。我用实际 android 设置活动中的代码制作了一个 pastebin 来帮助你。 [http://pastebin.com/RhSndGCQ](http://pastebin.com/RhSndGCQ)

```
@Override
public void onBuildHeaders(List<Header> headers) {
  loadHeadersFromResource(R.xml.settings_headers, headers);
  updateHeaderList(headers);
}

@Override
public void setListAdapter(ListAdapter adapter) {
    if (adapter == null) {
        super.setListAdapter(null);
    } else {
        super.setListAdapter(new HeaderAdapter(this, getHeaders(), mAuthenticatorHelper));
    }
}

private static class HeaderAdapter extends ArrayAdapter<Header> {
    static final int HEADER_TYPE_CATEGORY = 0;
    static final int HEADER_TYPE_NORMAL = 1;
    static final int HEADER_TYPE_SWITCH = 2;
    private static final int HEADER_TYPE_COUNT = HEADER_TYPE_SWITCH + 1;

    private final WifiEnabler mWifiEnabler;
    private final BluetoothEnabler mBluetoothEnabler;
    private final ProfileEnabler mProfileEnabler;

    private AuthenticatorHelper mAuthHelper;

    private static class HeaderViewHolder {
        ImageView icon;
        TextView title;
        TextView summary;
        Switch switch_;
    }

    private LayoutInflater mInflater;

    static int getHeaderType(Header header) {
        if (header.fragment == null && header.intent == null) {
            return HEADER_TYPE_CATEGORY;
        } else if (header.id == R.id.wifi_settings
                || header.id == R.id.bluetooth_settings
                || header.id == R.id.profiles_settings) {
            return HEADER_TYPE_SWITCH;
        } else {
            return HEADER_TYPE_NORMAL;
        }
    }

    @Override
    public int getItemViewType(int position) {
        Header header = getItem(position);
        return getHeaderType(header);
    }

    @Override
    public boolean areAllItemsEnabled() {
        return false; // because of categories
    }

    @Override
    public boolean isEnabled(int position) {
        return getItemViewType(position) != HEADER_TYPE_CATEGORY;
    }

    @Override
    public int getViewTypeCount() {
        return HEADER_TYPE_COUNT;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    public HeaderAdapter(Context context, List<Header> objects,
            AuthenticatorHelper authenticatorHelper) {
        super(context, 0, objects);

        mAuthHelper = authenticatorHelper;
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        // Temp Switches provided as placeholder until the adapter replaces these with actual
        // Switches inflated from their layouts. Must be done before adapter is set in super
        mWifiEnabler = new WifiEnabler(context, new Switch(context));
        mBluetoothEnabler = new BluetoothEnabler(context, new Switch(context));
        mProfileEnabler = new ProfileEnabler(context, null, new Switch(context));
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        HeaderViewHolder holder;
        Header header = getItem(position);
        int headerType = getHeaderType(header);
        View view = null;

        if (convertView == null || headerType == HEADER_TYPE_SWITCH) {
            holder = new HeaderViewHolder();
            switch (headerType) {
                case HEADER_TYPE_CATEGORY:
                    view = new TextView(getContext(), null,
                            android.R.attr.listSeparatorTextViewStyle);
                    holder.title = (TextView) view;
                    break;

                case HEADER_TYPE_SWITCH:
                    view = mInflater.inflate(R.layout.preference_header_switch_item, parent,
                            false);
                    holder.icon = (ImageView) view.findViewById(R.id.icon);
                    holder.title = (TextView)
                            view.findViewById(com.android.internal.R.id.title);
                    holder.summary = (TextView)
                            view.findViewById(com.android.internal.R.id.summary);
                    holder.switch_ = (Switch) view.findViewById(R.id.switchWidget);
                    break;

                case HEADER_TYPE_NORMAL:
                    view = mInflater.inflate(
                            R.layout.preference_header_item, parent,
                            false);
                    holder.icon = (ImageView) view.findViewById(R.id.icon);
                    holder.title = (TextView)
                            view.findViewById(com.android.internal.R.id.title);
                    holder.summary = (TextView)
                            view.findViewById(com.android.internal.R.id.summary);
                    break;
            }
            view.setTag(holder);
        } else {
            view = convertView;
            holder = (HeaderViewHolder) view.getTag();
        }

        // All view fields must be updated every time, because the view may be recycled
        switch (headerType) {
            case HEADER_TYPE_CATEGORY:
                holder.title.setText(header.getTitle(getContext().getResources()));
                break;

            case HEADER_TYPE_SWITCH:
                // Would need a different treatment if the main menu had more switches
                if (header.id == R.id.wifi_settings) {
                    mWifiEnabler.setSwitch(holder.switch_);
                } else if (header.id == R.id.bluetooth_settings) {
                    mBluetoothEnabler.setSwitch(holder.switch_);
                } else if (header.id == R.id.profiles_settings) {
                    mProfileEnabler.setSwitch(holder.switch_);
                }
                // No break, fall through on purpose to update common fields

                //$FALL-THROUGH$
            case HEADER_TYPE_NORMAL:
                if (header.extras != null
                        && header.extras.containsKey(ManageAccountsSettings.KEY_ACCOUNT_TYPE)) {
                    String accType = header.extras.getString(
                            ManageAccountsSettings.KEY_ACCOUNT_TYPE);
                    ViewGroup.LayoutParams lp = holder.icon.getLayoutParams();
                    lp.width = getContext().getResources().getDimensionPixelSize(
                            R.dimen.header_icon_width);
                    lp.height = lp.width;
                    holder.icon.setLayoutParams(lp);
                    Drawable icon = mAuthHelper.getDrawableForType(getContext(), accType);
                    holder.icon.setImageDrawable(icon);
                } else {
                    holder.icon.setImageResource(header.iconRes);
                }
                holder.title.setText(header.getTitle(getContext().getResources()));
                CharSequence summary = header.getSummary(getContext().getResources());
                if (!TextUtils.isEmpty(summary)) {
                    holder.summary.setVisibility(View.VISIBLE);
                    holder.summary.setText(summary);
                } else {
                    holder.summary.setVisibility(View.GONE);
                }
                break;
        }

        return view;
    }

    public void resume() {
        mWifiEnabler.resume();
        mBluetoothEnabler.resume();
        mProfileEnabler.resume();
    }

    public void pause() {
        mWifiEnabler.pause();
        mBluetoothEnabler.pause();
        mProfileEnabler.pause();
    }
} 
```

# algorithm - Dijkstra 算法会陷入死胡同吗？

> ID：14825224
> 
> 赞同：2
> 
> 时间：2013-02-12T04:09:15.967
> 
> 标签：algorithm, graph, graph-algorithm

假设我有以下图表：

```
 e (destination)
           |
           | (1)
           |
           d
           |
           | (100)
           |
  (start)  a - - - b - - - c
             (1)      (1) 
```

Dijkstra 的算法会陷入死胡同吗？我想如果我从a开始，它会去a->b->c并进入死胡同，因此无法到达e。是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:15:33.300

显然不是。来自[Dijkstra 算法的维基百科描述](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)：

> .3\. 对于当前节点，考虑其所有未访问的邻居并计算它们的暂定距离。

这意味着如果您从 开始`a`，`b`并且`d`都被检查（即计算它们的暂定距离），因为它们是未访问的邻居。因为`b`有较小的暂定距离，你下一个访问那个。

对于您使用额外节点的更新：您如上所述`e`到达。`c`但是您并没有被卡住 - 仍然有一个未访问的节点具有预先计算的暂定距离，即`d`- 所以您接下来访问那个节点。

# c - 在并行 for 循环中调用函数

> ID：14825226
> 
> 赞同：0
> 
> 时间：2013-02-12T04:09:26.730
> 
> 标签：c, parallel-processing, cilk-plus

我试图在 Cilk plus 的并行 for 循环中调用一个函数。如果我在我调用的函数中声明一个数组，它会有种族问题吗？在运行一些循环后，我收到分段错误或中止（核心转储）错误。

```
PScan()
{
    // Would working on w create race issues?
    double *w = calloc(num,sizeof(double));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:38:11.757

如果从 cilk_for 循环调用 PScan()，那么使用 w 数组将不会是一场比赛。所有平行链都有自己分配的 w 副本。完成后请务必释放该内存。

但是，请注意，调用诸如 calloc 之类的内存分配例程可能涉及会限制性能的锁。像 tbbmalloc 这样的备用内存分配器可以缓解这种情况。

您可以使用 Cilkscreen 工具搜索比赛。Cilk 工具（Cilkscreen 种族检测器和 Cilkview 可扩展性分析器）可从[http://cilkplus.org/download免费获得](http://cilkplus.org/download)

```
- Barry Tannenbaum
  Intel Cilk Plus Runtime Development 
```

# symfony - 如何让 Assetic 自动将 CSS 背景图像从我的 Bundle 移动到 Web 目录？

> ID：14825227
> 
> 赞同：0
> 
> 时间：2013-02-12T04:09:29.767
> 
> 标签：symfony, sass, symfony-2.1, compass-sass, assetic

[在使用Alexandre Salomé 的 [尽管如此出色的]“Sass、Compass 和 Assetic 在 10 分钟内”的](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)大量麻烦之后，我终于得到了 Compass Assetic 过滤器来将我的 SCSS 文件转换为我项目的 /web 目录中的 CSS 文件。我什至认为我有 compass image-url() 函数来引用应该在的图像。

不幸的是，我不知道如何将图像保存在我的包中，并在需要时让 Assetic 正确地将它们复制或重写到 /web 目录中。他们只是不去那里。暂时（......看起来这可能是预期的功能？？）我只是将它们复制到 /web/images 目录中。这不可能。...对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:56:44.977

这不是assetic 可以而且应该做的事情，而是Symfony 可以做的事情。

首先，您应该将资产放在包结构中的正确位置。这些应该放在`Resources/public`目录中。这是样式表、脚本、图像和所有其他公共事物存在的地方。有关捆绑包结构的更多信息，请阅读文档：[“如何使用构建捆绑包的最佳实践”](http://symfony.com/doc/2.0/cookbook/bundles/best_practices.html)

FrameworkBundle 带有一个有用的命令，称为`assets:install`this 会将所有捆绑包中的所有资产安装到`web/bundles/<bundle_name>`目录中。每次使用`composer update`or命令时都会运行此`composer install`命令。当您更新捆绑包中的某些资产时，您可以运行以下命令将所有内容复制到 web 目录：

```
$ php app/console assets:install 
```

有时，您不想在每次更新某些内容时都运行此命令。例如，如果您开始设置页面样式，则需要每分钟运行一次该命令。如果您的服务器支持使用符号链接，则可以使用该`--symlink`选项。这样，您不需要每次都运行该命令。

# python - 为什么 decimal.Decimal 返回科学计数法进行简单计算？

> ID：14825228
> 
> 赞同：2
> 
> 时间：2013-02-12T04:09:48.787
> 
> 标签：python

我的一台机器上有一个奇怪的问题：

```
Tibuchina ~$ python
Python 2.6.7 (r267:88850, May 14 2012, 20:36:34) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from decimal import Decimal
>>> Decimal('99') / 2
Decimal('2.21660407009470578688E-8')
>>> 
```

我不确定在哪里寻找解决方案，也没有成功寻找答案——主要是因为我不确定如何表达这个问题。希望有人看到类似的东西并可以提出解决方案。谢谢！

-*编辑*

嗯，不完全是骗子，但很接近；实际上，Mintyfresh 链接（CppLearner）的答案最有帮助，因为它为我指明了正确的方向。我的 python 是 brew 安装的，而不是 mac 端口，但最终修复它的步骤很简单：

*   安装 Xcode 命令行工具
*   卸载并重新安装 python 2.6.7

谢谢您的帮助！

# c++ - 我如何（或者我可以安全地，或者我可以）移动一个 const 对象？

> ID：14825230
> 
> 赞同：1
> 
> 时间：2013-02-12T04:10:25.117
> 
> 标签：c++, c++11, move-semantics

考虑[这段](https://ideone.com/8xzfSz)代码：

```
#include <iostream>
#include <string>

using namespace std;

class Movable {
public:
    Movable(const string& name) : m_name(name) { }
    Movable(const Movable& rhs) {
        cout << "Copy constructed from " << rhs.m_name << endl;
    }

    Movable(Movable&& rhs) {
        cout << "Move constructed from " << rhs.m_name << endl;
    }

    Movable& operator = (const Movable& rhs) {
        cout << "Copy assigned from " << rhs.m_name << endl;
    }

    Movable& operator = (Movable&& rhs) {
        cout << "Move assigned from " << rhs.m_name << endl;
    }

private:
    string m_name;
};

int main() {
    Movable obj1("obj1");
    Movable obj2(std::move(obj1));
    obj2 = std::move(obj1);     // For demostration only

    const Movable cObj("cObj");
    Movable tObj(std::move(cObj));
    tObj = std::move(cObj);     // For demonstration only
} 
```

它的输出是：

```
Move constructed from obj1
Move assigned from obj1
Copy constructed from cObj
Copy assigned from cObj 
```

如您所见，在这些行中，

```
Movable tObj(std::move(cObj));
tObj = std::move(cObj);     // For demonstration only 
```

我打算移动`cObj`到`tObj`（使用赋值运算符的第二步纯粹是为了演示）。但是，正如您在输出中看到的，`cObj`仅*复制*到`tObj`.

上面的例子只是一个演示，我不知道这有什么实际用途。但我会问：

1.  我可以移动一个`const`物体吗？
2.  如果可以，这样做安全吗？

**补充：**我忘了问。如果我可以移动一个`const`物体，*我*应该怎么做？( `const_cast`?)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:23:09.220

在您的代码中，复制构造函数被调用，因为移动构造函数需要一个非常量参数（`Movable&&`），而参数是一个 const 对象（`std::move(cObj)`类型为`const Movable&&`）。由于非 const 右值引用不能绑定 const 右值，因此该重载被丢弃，下一个最佳匹配是复制构造函数。

现在下一个问题是您是否/何时可以移出`const`对象。虽然从技术上讲，您可以实现一个带有 a 的移动构造函数，`const &&`您甚至可以在不调用未定义行为的情况下执行此操作（只是不要修改源对象的任何非可变成员），但问题是它是否有意义。而且我认为不会。

移动构造函数的存在通常表明存在由对象维护的资源，当不再需要源对象时（例如，从临时对象构造对象时），该资源可以有效地转移到另一个对象。 . 移动*本质上*是修改源对象。不修改源对象的移动构造函数*不能*将资源从源对象移动到目标对象，这几乎没有意义或根本没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:12:39.750

当然，只要对象的非`mutable`状态不会因为被移出而改变。

也许您有一个与文件内容或数据库记录相对应的对象。并且它在访问时将该数据缓存在一个`mutable`成员中。现在，您可以通过窃取其缓存数据来移动该对象，而无需实际修改该对象。因此，该对象具有 move 构造函数和 move 赋值运算符是有意义的（只要对象可移动是有意义的） take `const Record&&`。

这是完全合法的，C++11 标准的第 12.8p3 节规定：

> 类的非模板构造函数`X`是移动构造函数，如果它的第一个参数是、、 或类型`X&&`，并且没有其他参数或者所有其他参数都有默认参数。**`const X&&`**`volatile X&&``const volatile X&&`

和 p19：

> 用户声明的移动赋值运算符`X::operator=`是类的非静态非模板成员函数，`X`只有一个类型为`X&&`、**`const X&&`**、`volatile X&&`或的参数`const volatile X&&`。

这样，您可以移动一个`const`对象，即通过移动创建`reopen`的新~~副本~~，从而将缓冲区空间重用于其他内容并避免新分配，同时保持旧对象完好无损并且如果需要，准备好返回其内容（通过再次访问磁盘或数据库）。

# sql - SQL 存储一个值并在同一个查询中使用另一个值

> ID：14825231
> 
> 赞同：1
> 
> 时间：2013-02-12T04:10:56.080
> 
> 标签：sql, sql-server

我有一个`Patients`看起来像这样的表：

```
 PatientName    DateOftest    Eye     L1    L2    L3    L4     L5
  ----------------------------------------------------------------
    Mike         17-02-2009     L      23    25    40    32     30
    Mike         17-02-2009     R      25    30    34    35     24
    Bill         08-03-2006     L      20    24    30    24     25
    Bill         08-03-2006     R      18    25    27    30     24 
```

现在我在下面的查询发现意味着

```
SELECT 
   PatientName, DateOfTest,    
   (MAX(L1) + MAX(L2) + MAX(L3) + MAX(L4) + MAX(L5))/4 as Mean, 
   SQRT(POW(L1 - Mean, 2) + POW(L2 - Mean, 2) + POW(L3 - Mean, 2) + POW(L4 - Mean, 2)  + POW(L5 - Mean, 2)) AS Standard Deviation, 
   'Binocular' Eye 
FROM 
   Patients 
GROUP BY  
   PatientName, DateOfTest; 
```

上面的查询是错误的，因为我没有存储平均值..有没有办法存储平均值来找出我的代码中的标准偏差..我问是因为我有很长的查询和更多的记录..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:44:32.610

要存储平均值并在查询中重用它，一种选择是使用[Common Table Expression](http://msdn.microsoft.com/en-us/library/ms190766%28SQL.105%29.aspx)。您可以将 CTE 连接到表中以多次使用计算的平均值。

我承认不明白下面的行...

```
SQRT(POW(L1-Mean,2)+POW(L2-Mean,2)+POW(L3-Mean,2)+POW(L4-Mean,2)+POW(L5-Mean,2))
as Standard Deviation, 'Binocular' Eye 
```

...但下面的查询显示了如何将计算出的平均值整合到该行中，我认为这可能还需要一些额外的工作。

```
--This is the CTE to calculate the mean
WITH Mean_CTE AS
(
  SELECT PatientName, DateOfTest,
    (MAX(L1) + MAX(L2) + MAX(L3) +  MAX(L4) + MAX(L5))/4 AS [Mean]
  FROM Patients
  GROUP BY PatientName, DateOfTest
)
--This is the original query
SELECT Patients.PatientName, Patients.DateOfTest, Mean_CTE.Mean AS Mean, 
  SQRT(POW(L1-Mean_CTE.Mean,2)+POW(L2-Mean_CTE.Mean,2)+POW(L3-Mean_CTE.Mean,2)
  +POW(L4-Mean_CTE.Mean,2)+POW(L5-Mean_CTE.Mean,2)) as Standard Deviation, 
  'Binocular' Eye
FROM Patients
INNER JOIN Mean_CTE --This is where you join the two
ON Patients.PatientName = Mean_CTE.PatientName
    AND Patients.DateOfTest = Mean_CTE.DateOfTest
GROUP BY Patients.PatientName, Patients.DateOfTest, Mean_CTE.Mean; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:59:39.457

向存储公式结果的表中添加 CALCULATED 列的可能性如何？

这是一个相当简单的概念，并且会确定公式的值。

[http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)

# c# - 在 XAML 中获取子控件的更智能方法是什么？

> ID：14825232
> 
> 赞同：1
> 
> 时间：2013-02-12T04:11:17.257
> 
> 标签：c#, .net, xaml

我有一个用户控件，包含一个网格，包含一个子控件。

我想从用户控件后面的代码中获取对子控件的引用。

这就是我所拥有的：

```
var childControl = (MyChildControlType)this.Grid.Children.Single(c => (string) c.GetValue(NameProperty) == "MyChildControlNameFromXAMLNameAttribute"); 
```

像垃圾桶盖一样丑陋。

有什么更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:16:34.693

您可以按照已经建议的方式进行名称搜索：

```
var childControl = (MyChildControlType)this.Grid.FindName("MyChildControlNameEtc"); 
```

或者，如果您想要一种更通用的方法来处理您已经在尝试的方法（例如，如果您想通过不同的属性进行查找），您可以尝试：

```
var childControl = (MyChildControlType)this.Grid.Children.OfType<FrameworkElement>().Single(f => f.Name == "Blah"); 
```

或者

```
var childControl = (MyChildControlType)this.Grid.Children.OfType<MyChildControlType>().Single(f => f.Name == "Blah"); 
```

或者您可以使用 VisualTreeHelper，它可以与非网格一起使用，如果您需要向下递归可视化树，它会特别好用：

```
for(int i = 0; i < VisualTreeHelper.GetChildrenCount(this.Grid); ++i)
{
    var child = VisualTreeHelper.GetChild(this.Grid, i) as FrameworkElement;
    if (child != null && child.Name == "Blah")
        return child;
} 
```

但实际上，如果您可以命名它并从代码隐藏中访问它，就像 John Bowen 所说的那样，那是迄今为止最简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:32:14.120

将 Name 或 x:Name 分配给 XAML 中的元素（除非它在模板内）使该元素可以作为具有该名称的字段从代码隐藏中访问。所以这基本上已经在 InitializeComponent 期间为您声明和填充：

```
MyChildControlType MyChildControlNameFromXAMLNameAttribute; 
```

你可以直接使用它：

```
MyChildControlNameFromXAMLNameAttribute.Visibility = Visibility.Hidden; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:20:57.950

可能是这样，将 x:Name 给您的 childControl

```
 var childControl = (MyChildControlType)MyGridNameFromXAMLNameAttribute.FindName("MyChildControlNameFromXAMLNameAttribute"); 
```

# 3d - xna动画问题

> ID：14825233
> 
> 赞同：1
> 
> 时间：2013-02-12T04:11:39.907
> 
> 标签：3d, xna

我想绘制 3 轴 XYZ 和一个模型，以查看它在空间中的位置以及它是如何移动的

当我只是用简单的旋转来绘制立方体时，一切都很好

但是当我添加轴绘图方法时

渲染不正常

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame2
{

    public class Game1 : Microsoft.Xna.Framework.Game
    {
    //Some declaration 
    float x = 30f;
    float y = 0f;
    float z = 30f;

    //GraphicsDevice device;
    VertexBuffer vertexBuffer;
    VertexPositionColor[] lines;

    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Model model;
    Matrix view;
    Matrix progection;
    float xTans = 0.0f;
    float yTans = 0.0f;
    float zTans = 0.0f;
    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {

        //device = graphics.GraphicsDevice;
        base.Initialize();
        this.IsMouseVisible = true;
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.

        spriteBatch = new SpriteBatch(GraphicsDevice);
        model = Content.Load<Model>("cube");

        DrawLines();

        createCamera();

    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == 
                ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);

        //update camera
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Azure);

        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (BasicEffect fx in mesh.Effects)
            {
                fx.View = view;

                //fx.World = Matrix.CreateRotationX(xTans);
                fx.World = Matrix.CreateRotationY(yTans);
                //fx.World = Matrix.CreateRotationZ(zTans);

                fx.Projection = progection;
                fx.EnableDefaultLighting();

            }
            mesh.Draw();

        }
        //xTans += 0.01f;
        yTans += 0.01f;
        //zTans += 0.01f;

        BasicEffect effect = new BasicEffect(graphics.GraphicsDevice);
        effect.VertexColorEnabled = true;

        effect.View = view;
        effect.Projection = progection;

        effect.World = Matrix.Identity;

        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
        {
            // Begin Drawing
            pass.Apply();
            // Set the vertex buffer to graphic device
            graphics.GraphicsDevice.SetVertexBuffer(vertexBuffer, 0);
            // Draw the axes with LineList Type
            graphics.GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(
            PrimitiveType.LineList, lines, 0, 3);
            //pass.Apply();
        }
        base.Draw(gameTime);
    }

    protected void DrawLines()
    {
        lines = new VertexPositionColor[6];

        //Setting Size and Width and Color of the X axis
        lines[0] = new VertexPositionColor(new Vector3(50, 0, 0), Color.Red);
        lines[1] = new VertexPositionColor(new Vector3(-50, 0, 0), Color.Red);

        //Setting Size and Width and Color of the Y axis
        lines[2] = new VertexPositionColor(new Vector3(0, 50, 0), Color.Green);
        lines[3] = new VertexPositionColor(new Vector3(0, -50, 0), Color.Green);

        //Setting Size and Width and Color of the Z axis
        lines[4] = new VertexPositionColor(new Vector3(0, 0, 50), Color.Blue);
        lines[5] = new VertexPositionColor(new Vector3(0, 0, -50), Color.Blue);

        vertexBuffer = new VertexBuffer(graphics.GraphicsDevice,
            VertexPositionColor.VertexDeclaration, 6, BufferUsage.None);
        vertexBuffer.SetData<VertexPositionColor>(lines);
    }

    protected void createCamera()
    {
        view = Matrix.CreateLookAt(
            new Vector3(0f, 60.0f, 60f), 
            Vector3.Zero, 
            Vector3.Up);
        progection = Matrix.CreatePerspectiveFieldOfView(
            MathHelper.ToRadians(8.0f), 
            graphics.GraphicsDevice.Viewport.AspectRatio, 
            10.0f, 
            1000.0f);
    }        
} //end game class
} //end namespace 
```

绘制轴的函数是 drawLines()

在方法 draw() 内部

我有这个来真正画轴

```
BasicEffect effect = new BasicEffect(graphics.GraphicsDevice);
effect.VertexColorEnabled = true;

effect.View = view;
effect.Projection = progection;

effect.World = Matrix.Identity;

foreach (EffectPass pass in effect.CurrentTechnique.Passes)
{
    // Begin Drawing
    pass.Apply();
    // Set the vertex buffer to graphic device
    graphics.GraphicsDevice.SetVertexBuffer(vertexBuffer, 0);
    // Draw the axes with LineList Type
    graphics.GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(
    PrimitiveType.LineList, lines, 0, 3);
    //pass.Apply();
} 
```

我不知道为什么旋转的渲染速度很慢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:03:46.860

有好消息，也有坏消息。好消息是您的项目可以顺利运行。你发布了足够的代码来构建你的项目，只要构建器像我一样有一个 fbx 模型。这是所需的更改。

```
// take this out of your Draw() method.
BasicEffect effect = new BasicEffect(graphics.GraphicsDevice);

// put this in your class variables
BasicEffect effect;

//and put this at the end of LoadContent()
effect = new BasicEffect(graphics.GraphicsDevice); 
```

说明在文章末尾。

坏消息是你有一大堆不好的代码。它会编译，它会运行，但它不会运行良好。我假设您对编写 XNA 项目有些陌生，这意味着您可能对游戏程序的组件缺乏了解。

尽管我将尝试解释您做错的一些事情，但您的帖子对 SO 来说并不是一个好帖子。这是简单的不良实践的结果，而不是技术难题。在[gamedev.stackexchange.com](https://gamedev.stackexchange.com/)上，有时会接受这样的问题，因为它们为如何（不）使用特定技术编写游戏提供了很好的例子。回答完后，我将标记您的帖子以将其移到那里；模组可能会认为它不值得。

无论如何，这是我的最大努力：

**您在加载内容方法中调用此函数。**

```
protected override void LoadContent()
    ...
    DrawLines();
    ...
} 
```

正如默认模板注释告诉您的那样，加载内容方法用于加载内容。不是为了画画。它只被调用一次，所以无论如何从它绘制一个框架是愚蠢的。但这并不是您使用该方法所做的。您在其中声明了一些原始数据。没关系，但最后两行是多余的：

```
protected void DrawLines()
{
    lines = new VertexPositionColor[6];
    lines[0] = new VertexPositionColor(new Vector3(50, 0, 0), Color.Red);
    // ...

    vertexBuffer = new VertexBuffer(graphics.GraphicsDevice,
        VertexPositionColor.VertexDeclaration, 6, BufferUsage.None);
    vertexBuffer.SetData<VertexPositionColor>(lines);
    ... 
```

您甚至不使用该顶点缓冲区。您使用`DrawUserPrimitives<T>()`，它为您设置一个顶点缓冲区。这意味着您也不需要绘制方法中的这条线。

```
graphics.GraphicsDevice.SetVertexBuffer(vertexBuffer, 0); 
```

**在开始效果通道后设置顶点数据。**

这是一个坏主意。在图形硬件开始工作后中断它。这通常会成为游戏性能的瓶颈。在你的情况下，这不是，但仍然是一个坏主意。

**您每帧都创建一个新效果。**

正如我上面写的，这是你唯一需要改变的。尽管有它的名字，a`BasicEffect`是一个复杂的 OO 容器，用于容纳大量可配置的着色器片段，以及绘制具有多种纹理、材质和效果的复杂几何体所需的一切。并且您尝试每秒分配其中一个对象 60 次。

我的建议是：阅读更多[博客文章](http://blogs.msdn.com/b/shawnhar/)，学习更多[示例代码](http://xbox.create.msdn.com/en-US/education/catalog/?contenttype=4&devarea=0&platform=0&sort=2)，并学习使用[内存分析器](http://www.jetbrains.com/profiler/)。

# .net - WPF .net exe 文件名的最大长度

> ID：14825234
> 
> 赞同：0
> 
> 时间：2013-02-12T04:11:40.573
> 
> 标签：.net, wpf, windows-7

当 WPF .net 4.0 exe 的文件名超过 47（包括 .exe 扩展名的 51）时，我们遇到了这种情况，该 exe 无法正常工作。它只是说停止工作。

即使我们将文件放在 c:\ 侧，问题仍然存在，这意味着这不是 Windows 限制。

任何人都遇到过这样的情况。

通过使用缩写重命名 exe 文件解决了该问题。但是想知道为什么会这样。

在此先感谢喜悦

* * *

来自评论

它是正常的停止工作对话框。在问题详细信息中它说：

> 问题签名：问题事件名称：BEX 应用程序名称：ABCEDFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUV.exe 应用程序版本：1.0.0.0 应用程序时间戳：50e559e0 故障模块名称：igdumd32.dll 故障模块版本：8.15.10.1995 故障模块时间戳：4af4b4e4 异常偏移量：00014fe6 异常代码： c0000409 异常数据：00000000 操作系统版本：6.1.7601.2.1.0.256.4 区域设置 ID：1033 附加信息 1：1d75 附加信息 2：1d7537ede8bee0a1d08a5f0d2036cc52

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:41:02.563

这是 igdumd32.dll 中的堆栈缓冲区溢出。恭喜。您刚刚发现英特尔在编写良好的安全代码方面很糟糕。

除了您的显卡供应商有助于将英特尔图形加速器 dll 插入您的进程并在您为其提供长模块名称时堆栈溢出这一事实之外，WPF 文件名的长度没有限制，除了通常MAX_PATH 的 Windows 限制。

# java - Java 中的 Yahoo 日历 API

> ID：14825237
> 
> 赞同：1
> 
> 时间：2013-02-12T04:12:25.210
> 
> 标签：java, javascript, api, jsp

雅虎日历是否有可用的 Java API？我想以编程方式登录用户帐户并需要阅读他/她的日历约会。我想将 google、yahoo 和 hotmail 日历与我的 Web 应用程序集成。我知道谷歌有一个 API。我没有找到 yahoo calendar api 的好例子。请让我知道如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:36:03.457

[雅虎确实通过https://caldav.calendar.yahoo.com](https://caldav.calendar.yahoo.com)支持 CalDAV，并且快速谷歌为 Java 提供了以下库：

*   [caldav4j](http://code.google.com/p/caldav4j/)
*   [ical4j](http://wiki.modularity.net.au/ical4j/index.php?title=Main_Page)

有关协议本身的更多信息，请访问[http://caldav.calconnect.org/index.html](http://caldav.calconnect.org/index.html)

不幸的是，这不像谷歌的 REST API 那样友好，但至少是可能的。我不知道我个人是否会去麻烦。

# angularjs - Angular：当用户按 Enter 时如何单击模态按钮？

> ID：14825238
> 
> 赞同：1
> 
> 时间：2013-02-12T04:12:29.567
> 
> 标签：angularjs, angularjs-directive, angular-ui

我有几个[Angular UI Modals](http://angular-ui.github.com/bootstrap/#/modal)。每个模式都有一个**Cancel**按钮和一个“Action”按钮（可以是**Create**、**Delete**等）。

我使用来自 Angular UI 的[`ui-keyup`指令](http://angular-ui.github.com/#directives-keypress)来识别用户何时按下按钮。

我想在用户点击时单击“操作”按钮`Enter`。

我怎么能做到这一点？

到目前为止，这是我到达的地方：[http ://plnkr.co/edit/n6dgiE?p=preview](http://plnkr.co/edit/n6dgiE?p=preview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:57:40.543

[http://plnkr.co/edit/icKazZ?p=preview](http://plnkr.co/edit/icKazZ?p=preview)

所以，我只是确保它`createIt()`在`ui-event`（通过将控制器向上移动到`<body>`）上可用并直接触发它。

现在假设这是不可行的（body 标签和`createIt()`函数之间有太多层）。您可以**做**的是放置某种全局处理程序功能或服务`$rootScope`，然后通过触发。但是，在范围内或跨控制器的通信超出了这个问题的明确范围**:-)**

# xslt - 带有排序、添加和删除元素的 XSL 复杂转换

> ID：14825241
> 
> 赞同：0
> 
> 时间：2013-02-12T04:12:58.050
> 
> 标签：xslt, xslt-1.0

我正在尝试使用 XSLT 转换 XML 文档，但我遇到了困难，因为要对 XML 文档执行多个处理任务。

以下是我希望完成的步骤（抱歉，我不确定这是否可能，或者我是否必须尝试其他方法）：

1 - 剥离/删除所有`<group>`元素并将相邻`<relation>`元素放入/移动到下一个`<filter>`元素

2 - 通过调用和`<filter>`中的两个元素对所有元素进行排序`<relation>``<filtertype>`

3 -通过添加元素并将元素从第一个元素中拉出，重新组合所有`<filter>`元素`<relation>``<filtertype>``<group>``<relation>``<filter>``<group>`

换句话说，我正在尝试撤消所有现有的分组，按过滤器类型和关系对所有过滤器元素进行排序，然后通过公共过滤器类型和关系重新对过滤器进行分组，因为知道第一个组元素必须有一个被移动的关系元素从它的第一个过滤器元素到组元素

抱歉，如果这令人困惑，我的示例如下（提前致谢）

**输入 XML**

```
<mainXML>
   <version major="1" minor="0" build="0" revision="0"/>
   <id>30</id>
   <set>Partial</set>
   <evaluate>True</evaluate>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>01001</value>
         </action>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>LessThanOrEqualTo</operator>
            <value>26886</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>30001</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Grouping</filtertype>
         <action>
            <type>Mailing</type>
            <operator>DoNotBelongTo</operator>
            <groupingid>1133519</groupingid>
         </action>
      </filter>
      <filter>
         <relation>And</relation>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
            <operator>Bill</operator>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>       
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
</mainXML> 
```

**所需的输出 XML**

```
<mainXML>
   <version major="1" minor="0" build="0" revision="0"/>
   <id>30</id>
   <set>Partial</set>
   <evaluate>True</evaluate>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
            <operator>Bill</operator>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Grouping</filtertype>
         <action>
            <type>Mailing</type>
            <operator>DoNotBelongTo</operator>
            <groupingid>1133519</groupingid>
         </action>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>01001</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>LessThanOrEqualTo</operator>
            <value>26886</value>
         </action>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>30001</value>
         </action>
      </filter>
   </group>
</mainXML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:46:36.210

**这种转变：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFilterRel" match="filter"
  use="concat(filtertype,'+'
              , (preceding-sibling::*[1]
                            [self::relation]
               | relation
                )[1]
              )"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:param name="pPos"/>
  <xsl:copy>
   <xsl:apply-templates select="node()|@*">
     <xsl:with-param name="pPos" select="$pPos"/>
   </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select="@*|*[not(self::group)]"/>

   <xsl:apply-templates select=
     "*/filter
        [generate-id()
        =
         generate-id(key('kFilterRel',
                         concat(filtertype,'+'
                                , (preceding-sibling::*[1]
                                             [self::relation]
                                  | relation
                                  )[1]
                               )
                         )
                         [1]
                     )]">
    <xsl:sort select="filtertype"/>
    <xsl:sort select="(preceding-sibling::*[1]
                                   [self::relation]
                     | relation)[last()]"/>
   </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="filter">
  <group>
    <xsl:variable name="vRelation"
        select="(preceding-sibling::*[1][self::relation]
               | relation)[last()]"/>
    <xsl:copy-of select="$vRelation"/>
    <xsl:apply-templates mode="inGroup" select=
     "key('kFilterRel',
          concat(filtertype,'+'
                 , (preceding-sibling::relation[1]
                   | relation
                   )[last()]
                )
         )">
       <xsl:with-param name="pRel" select="$vRelation"/>
     </xsl:apply-templates>
  </group>
 </xsl:template>

 <xsl:template match="filter" mode="inGroup">
  <xsl:param name="pRel"/>

  <filter>
      <xsl:if test="not(relation) and position() > 1">
       <xsl:copy-of select="$pRel"/>
      </xsl:if>
      <xsl:apply-templates>
       <xsl:with-param name="pPos" select="position()"/>
      </xsl:apply-templates>
  </filter>
 </xsl:template>

 <xsl:template match="relation">
  <xsl:param name="pPos"/>

  <xsl:if test="$pPos > 1">
   <xsl:copy-of select="."/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<mainXML>
   <version major="1" minor="0" build="0" revision="0"/>
   <id>30</id>
   <set>Partial</set>
   <evaluate>True</evaluate>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>01001</value>
         </action>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>LessThanOrEqualTo</operator>
            <value>26886</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>30001</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Grouping</filtertype>
         <action>
            <type>Mailing</type>
            <operator>DoNotBelongTo</operator>
            <groupingid>1133519</groupingid>
         </action>
      </filter>
      <filter>
         <relation>And</relation>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
            <operator>Bill</operator>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
</mainXML> 
```

**产生想要的正确结果：**

```
<mainXML>
   <version major="1" minor="0" build="0" revision="0"/>
   <id>30</id>
   <set>Partial</set>
   <evaluate>True</evaluate>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
            <operator>Bill</operator>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Action</filtertype>
         <campaign>
            <campaignid>1509779</campaignid>
         </campaign>
         <action>
            <status>DoNot</status>
         </action>
         <operator>AfterNHour</operator>
         <value>36</value>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Grouping</filtertype>
         <action>
            <type>Mailing</type>
            <operator>DoNotBelongTo</operator>
            <groupingid>1133519</groupingid>
         </action>
      </filter>
   </group>
   <group>
      <relation>And</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>01001</value>
         </action>
      </filter>
   </group>
   <group>
      <relation>Or</relation>
      <filter>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>LessThanOrEqualTo</operator>
            <value>26886</value>
         </action>
      </filter>
      <filter>
         <relation>Or</relation>
         <filtertype>Search</filtertype>
         <attributeid>32900</attributeid>
         <action>
            <type>Numeric</type>
            <operator>GreaterThanOrEqualTo</operator>
            <value>30001</value>
         </action>
      </filter>
   </group>
</mainXML> 
```

# ios - 为什么我在使用 GKMatchSendDataReliable 时会丢包？

> ID：14825243
> 
> 赞同：3
> 
> 时间：2013-02-12T04:13:27.460
> 
> 标签：ios, ios6, game-center, gamekit

我有一个多人 iOS 游戏，我正在使用`GKMatchSendDataReliable`. 但是，有时，数据包会丢失。我已经检查了发送端，我没有收到错误。我只是在接收时没有收到它。它是间歇性的，我在接收方法的开头就有 NSLogs，所以我总是知道什么时候收到消息。

`GKMatchSendDataReliable`100%可靠吗？必须建立自己的可靠数据发送例程似乎是一种浪费。

似乎只有当一台设备在 Verizon 的 LTE 网络上时才会发生这种情况。我还没有尝试过任何其他蜂窝网络。仅使用时`Wi-Fi`，不一定是相同的 wi-fi，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T01:38:29.317

苹果表示这是一个错误并已在 iOS7 中修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T07:54:39.397

我的用户还抱怨在游戏过程中可能会意外丢失一些数据。我写了一个[测试应用程序](https://github.com/rabovik/GKMatchPacketLostExample)，发现`GKMatchSendDataReliable`它并不可靠。在弱互联网连接（例如 EDGE）上，一些数据包经常丢失，而 Game Center API 没有任何错误。

因此，唯一的选择是添加额外的传输层以实现真正可靠的交付。

为此，我编写了一个简单的库：[RoUTP](https://github.com/rabovik/RoUTP)。它保存所有发送的消息，直到每个接收到的确认，重新发送丢失的消息并缓冲接收到的消息以防序列中断。在我的测试中，“RoUTP + GKMatchSendDataUnreliable”组合比“RoUTP + GKMatchSendDataReliable”效果更好（当然比纯 GKMatchSendDataReliable 更好，后者并不可靠）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T18:00:58.553

这也发生在我身上。看起来虽然`GKMatchSendDataReliable`oodles 比`GKMatchSendDataUnreliable`（在我的测试中丢失大约 2% 的数据包）更可靠，但`GKMatchSendDataReliable`似乎偶尔会丢失我发送*的第一个数据包*（连接后立即）。

# jquery - 从 HTML 字符串中提取 DOM 节点，结果为 HTML 字符串

> ID：14825244
> 
> 赞同：0
> 
> 时间：2013-02-12T04:13:29.220
> 
> 标签：jquery

给定

```
var html = "<html><body><p>Hello, World!</p><p>Ciao!</p></body></html>"; 
```

我想提取`body`标签 ( `<p>Hello, World!</p><p>Ciao!</p>`) 的内部 HTML。

`.find()`找到`body`DOM 节点

```
var body = $(html).find("body"); 
```

但我找不到获取该节点内部 HTML 的方法。我试过了：

```
var text = body.text(); //  returns ""
var var = body.var(); // returns undefined 
```

如何获取`<body>`标签内部 HTML 的字符串表示形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:23:56.123

您可以使用子字符串，获取的索引和索引，并用里面的内容创建一个子字符串。

```
var bot = html.indexOf("<body>");
var top= html.indexOf("</body>");
var body=html.substring(bot,top); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:25:44.867

当您将`html`字符串`body`包装在`$()`.

因此，您可以这样做：

```
var str=$('<div>').append($(html)).html() 
```

演示[http://jsfiddle.net/LxdrM/](http://jsfiddle.net/LxdrM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:25:54.813

你可以试试`body[0].innerHTML()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:49:30.587

当您想显示字符串表示时，最好将 html 保留在一个`div`元素（或 body 标签内的任何其他元素）中，而不是`body`标签本身。对于字符串表示，使用`TextArea`这也是 SO 正在使用的。

**[工作小提琴](http://jsfiddle.net/cKcE3/)**

```
$(function(){
   var body = $('html').find('div'); 
   var text = body.html(); 
   $("#textArea").val(text);
}); 
```

**HTML**

```
<html>
     <body>
        <div><p>Hello, World!</p>
             <p>Ciao!</p>
        </div>
        <textarea id="textArea" name="post-text" cols="92" rows="15" tabindex="101">
        </textarea>
     </body>    
 </html> 
```

# ios - Air iOS Flash，包含的文件夹路径是什么？

> ID：14825251
> 
> 赞同：0
> 
> 时间：2013-02-12T04:14:44.273
> 
> 标签：ios, flash, air, path, urlrequest

这有点傻，但我似乎找不到包含文件夹的目录路径。在 Flash Cs6 发布设置中，我包含了一个位于 c:\abc\def\ghi/xxx 的文件夹。

在这种情况下，iOS 中的路径将是 app://xxx? 要访问文件夹中的文件，我究竟需要将什么字符串传递给 URLRequest？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:32:32.920

使用[文件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)。

如果要传递到 URLRequest iOS Documents 文件夹路径。

尝试这个：

```
var urlRequest:URLRequest = new URLRequest(File.documentsDirectory.resolvePath("myFile.txt").nativePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:42:41.040

我认为您正在尝试访问 applicationDirectory。在 iOS 标准目录中的本地路径，如

```
app:/ means applicationDirectory 
```

applicationDirectory - /var/mobile/Applications/uid/filename.app

applicationStorageDirectory - /var/mobile/Applications/uid/Library/Application Support/applicationID/Local Store

但是，您可以访问应用程序目录文件，例如

```
var applicationXMLFile:File =  File.applicationDirectory.resolvePath("application_data.xml");
var applicationXMLUpdateFile:File = new File(applicationXMLFile.nativePath); 
```

如果我们尝试直接访问

```
var applicationXMLFile:File =  File.applicationDirectory.resolvePath("application_data.xml"); 
```

有时它会抛出`SecurityError/IOError`.

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7fe4.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7d9e](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7fe4.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7d9e)

# powershell - 将 PrimalForms 的 3 个文本框的输入读入 PowerShell

> ID：14825252
> 
> 赞同：0
> 
> 时间：2013-02-12T04:14:52.370
> 
> 标签：powershell

我有一个 PowerShell 文件，比如***TestForm.ps1***和一个 PrimalForm 文件***UserForm.ps1***，有 3 个文本框；如以下代码所示：

```
$FormPath = $PSScriptRoot + "\UserForm.ps1"
$Result = & $FormPath 
```

我不知道，如何将在 UserForm.ps1 的 3 个文本框中输入的文本读入我的调用 TestForm.ps1。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:27:23.040

一种方法是修改 PrimalForm 生成的代码以从其 GenerateForm 函数返回一个值。

```
#Generated Form Function
function GenerateForm {
########################################################################
# Code Generated By: SAPIEN Technologies PrimalForms (Community Edition) v1.0.9.0
# Generated On: 8/8/2011 2:30 PM
# Generated By: Andy Arismendi
########################################################################

# ... bunch of generated code ...

#Show the Form
$your_form.ShowDialog()| Out-Null

$text_box_values = @{}
$text_box_values.a = $text_box_1.Text
$text_box_values.b = $text_box_2.Text
$text_box_values.c = $text_box_3.Text

return $text_box_values

} #End Function 
```

这个小例子将返回一个哈希表，其中包含存储文本框值的键 a、b 和 c。

# android - 布局android的动态变化

> ID：14825253
> 
> 赞同：1
> 
> 时间：2013-02-12T04:14:56.273
> 
> 标签：android, android-layout, visibility, expandablelistview, android-gridview

我有一些像这样以相同顺序排列的元素：textview、textview、滑块栏、按钮、gridview、按钮、gridview、按钮。当单击其上方的按钮时，我会切换 gridview 的可见性。早些时候，我遇到了 gridview 隐藏其下方所有内容的问题，因此我为按钮分配了权重，但 gridview（尽管可滚动）看起来非常皱缩。我怎样才能增加gridview的宽度，以便下面的元素保持它们的相对位置并出现在它们应该出现的位置。（当我基本上点击按钮时，我想要一个可扩展列表的行为）

 ````
 <TextView
        android:id="@+id/text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical"
        android:layout_marginTop="20dip"        
        android:layout_marginLeft="10dip"
        android:text="Select Price Range"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textSize="15sp" />

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >        
        <LinearLayout
            android:id="@+id/seekBar_wrapper"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="10dip"
            android:padding="10dip"
            />

        <RelativeLayout
            android:id="@+id/absMinMax_holder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="10dip"
           android:layout_weight="1"
            >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/absMinCarVal"
                android:layout_alignParentLeft="true"
                android:textSize="14sp" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/absMaxCarVal_above"
                android:textSize="14sp"
                android:layout_alignParentRight="true" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/minMax_holder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="40dip"
            android:paddingRight="40dip"
            android:paddingTop="10dip"
            android:paddingBottom="10dip"
            >
            <TextView
                android:id="@+id/minVal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/absMinCarVal"
                android:layout_alignParentLeft="true"
                android:textSize="18sp" />

            <TextView
                android:id="@+id/value_seperator"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/value_seperator"
                android:layout_centerHorizontal="true"
                android:textSize="22sp" />

            <TextView
                android:id="@+id/maxVal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/absMaxCarVal"
                android:textSize="18sp"
                android:layout_alignParentRight="true" />
        </RelativeLayout>
    </LinearLayout>
<!--    <ScrollView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"> -->
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1" > 

            <Button 
                android:id="@+id/car_make"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Car Make"
                android:gravity="left"
                android:textSize="18sp"
                android:layout_marginBottom="10dp"/>

             <GridView 
                android:id="@+id/make_gridview"
                android:layout_width="match_parent" 
                android:layout_height="wrap_content"
                android:columnWidth="90dp"
                android:numColumns="auto_fit"
                android:verticalSpacing="10dp"
                android:horizontalSpacing="10dp"
                android:stretchMode="columnWidth"
                android:gravity="center"
                android:visibility="gone"
                android:layout_weight="1"
                android:layout_marginBottom="10dp"/>                            

            <Button 
                android:id="@+id/car_models"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Car Models"
                android:gravity="left"
                android:textSize="18sp"
                android:layout_marginBottom="20dp"/>

            <GridView 
                android:id="@+id/models_gridview"
                android:layout_width="match_parent" 
                android:layout_height="wrap_content"
                android:columnWidth="90dp"
                android:numColumns="auto_fit"
                android:verticalSpacing="10dp"
                android:horizontalSpacing="10dp"
                android:stretchMode="columnWidth"
                android:gravity="center"
                android:visibility="gone"
                android:layout_weight="1"
                android:layout_marginBottom="10dp"/>        

        </LinearLayout>
    <!-- </ScrollView>   -->
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Search"
        android:textSize="18sp" /> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:37:23.020

如果您改用 tableLayout`gone`并`visible`根据需要制作表格行会更容易。这将产生可扩展列表的效果。请随时提出任何疑问`

# javascript - 特殊代码验证

> ID：14825256
> 
> 赞同：-2
> 
> 时间：2013-02-12T04:15:12.430
> 
> 标签：javascript, validation

我有一个特殊的 ID，格式为 A000000004..A000000150 等和 OD000000001..OD000000150。我已经阅读了这里的论坛并尝试了解决方案（许多以`/^([A]{1}\[0-9]{9})$/`等形式），但没有一个有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:37:18.303

我希望我能正确理解你的问题，但是这个正则表达式怎么样？

```
/^(A|OD)[0-9]{9}$/ 
```

要针对此正则表达式检查字符串，您将使用如下内容：

```
var regex = /^(A|OD)[0-9]{9}$/;
if (regex.test(myCode)) {
    // ... do something ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:23:53.340

***因此，对于将来将要参考的人，我的问题的最终解决方案是：代码将是：

```
var regex= /^(A|OD)[0-9]{9}$/;
var myCode=document.forms["formname"]["fieldname"].value;
if(!regex.test(myCode))
{
alert(...);
return false;
} 
```

# iphone - 使用“插入”行初始化 UITableView

> ID：14825257
> 
> 赞同：3
> 
> 时间：2013-02-12T04:15:13.243
> 
> 标签：iphone, ios, uitableview, insert

我有一个 UITableView，我想在其中插入和删除行。

如果我有一个包含 10 个值的数组并从包含所有行的 tableview 开始，则该表显示正常。然后，如果我想过滤除 [0, 1, 5] 之外的所有内容。然后我在索引路径删除行的过程： [2, 3, 4, 6, 7, 8, 9] 并且返回的行数是 3。我不必更改我的单元格渲染代码，它显示行：[0, 1, 5]。

但是，如果在过滤完所有内容后，我想返回此表并从持久性中加载包含行 [0, 1, 5] 的表，我遇到了麻烦。表格加载行数：3 并呈现单元格：[0, 1, 2]。

我尝试在 viewDidLoad 中用 0 行初始化表，然后在 viewDidAppear 中调用 insertRows:[0, 1, 5] - 但这会引发异常：

```
*** -[UITableView _endCellAnimationsWithContext:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:909

```

而且我已经验证了在 viewDidLoad 中，打印的行数是 0，而在抛出这个错误之前，打印的行数是 3。

编辑如果我插入 [0, 1, 2] - 它可以工作......但再次......我最终需要 [0, 1, 5] 出现。

```
- (void) viewDidAppear:(BOOL) 动画
 {
    [超级 viewDidAppear:动画];

    NSArray *initializing_indeces = @[[NSIndexPath indexPathForRow:0 inSection:0], [NSIndexPath indexPathForRow:1 inSection:0], [NSIndexPath indexPathForRow:5 inSection:0]];
    [self.userDataTable insertRowsAtIndexPaths:initializing_indeces withRowAnimation:UITableViewRowAnimationAutomatic];
}

```

```
- (int) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // 使用不同的布尔值，但要点：
    如果（viewDidLoad）
        返回0；
    if (viewDidAppear || 过滤)
        返回 3；
    如果（扩展）
        返回 10；
}

```

```
- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CELL"];

    如果（！单元格）{
        单元格 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CELL"];
    }

    [cell.textLabel setText:[NSString stringWithFormat:@"%i",indexPath.row]];

    返回单元格；
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:04:07.503

我必须自己跟踪映射：

```
- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CELL"];

    如果（！单元格）{
        单元格 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CELL"];
    }

    int 行 = indexPath.row;
    如果（过滤）{
        // 翻译 0 - 0
        // 翻译 1 - 1
        // 翻译 2 - 5
    }

    [cell.textLabel setText:[NSString stringWithFormat:@"%i", row]];

    返回单元格；
}

```

我最终使用了一个 NSMutableArray，它在过滤后变为 [0, 1, 5]，因此访问该数组的索引， indexPath.row of 2 返回 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:25:56.783

@鱼斯蒂克斯

> [cell.textLabel setText:[NSString stringWithFormat:@"%i",indexPath.row]];

您的代码中的此方法明确指出，文本将是具有 indexPath.row 值的 NSString。现在，当您删除行和数据源时，从`10 = [0, 1, 5] + [2, 3, 4, 6, 7, 8, 9]`到`3 = [0, 1, 5]`。您的数据源已减少为计数为 3 的数组。因此，您将仅获得三行作为返回的 bby`numberOfRowsInSection`方法。三行将有这些 indexPath.row 的`0, 1, 2`。因此你得到`0,1 ,2`的不是`0, 1 ,5`.

如果您打印 indexPath，在`cellForRowAtIndexPath`方法中（过滤后）您将看到它们为 [0, 0] [0, 1] [0, 2] 分别表示第 0 节和第 0、1、2 行。因此你的结果

> 为了得到你想要的结果。做这个。取一个属性 @property (retain, nonAtomic) NSArray *dataArray;
> 
> 在**viewDidLoad**中： self.dataArray = [NSArray arrayWithObjects:@"0",@"1",@"2",@"3",@"4",@"5",@"6",@"7" ,@"8",@"9", 无];
> 
> 在**numberOfRowsInSection**中 返回 [数组计数]；
> 
> 并在**cellForRow** [cell.textLabel setText:[self.dataArray objectAtIndex:indexPath.row]];
> 
> **现在只需在viewWillAppear**或任何您想要的地方更改 dataSource（我的意思是 dataArray）为过滤或扩展状态）并使用 [self.tableView reloadData] 重新加载表数据；

希望我清楚。干杯，玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:36:18.603

首先在你的情况下不`numberOfRowsInSection`返回，所以请改变它`NSInteger``int`

我不知道究竟什么是共鸣。我认为这个问题必须与您的代码中的这一部分有关，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

通常，您在其中一种数据源方法中犯了错误。可能无法说出究竟出了什么问题，但可能是这样的：您在`thenumberOfRowsInSection` （*在您的情况下为 10*） 中告诉表格视图，`thecellForRowAtIndexPath`然后在您中仅处理***10 - 1***行。如果您向我们展示您的数据源的实现，那么您会更容易知道发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:23:33.810

对于每次插入，您需要使用重新加载表格视图`[tableView realodData]`

# android - Android sdk 访问被拒绝

> ID：14825258
> 
> 赞同：0
> 
> 时间：2013-02-12T04:15:16.600
> 
> 标签：android, eclipse, sdk

当我打开 Eclipse 它说

```
This version of ADT requires Android SDK Tools revision 21.0.0 rc9 or above.
Current revision is 20.0.0
Please update your SDK Tools to the latest version 
```

所以我单击打开 sdk 管理器按钮，但我看到的唯一东西是

```
Androids SDK Tools Rev 20 installed
Android SDK Platform-tools Rev 12 Installed 
```

没有要更新的选项，也没有要安装的平台。所以我尝试以管理员身份运行 android.bat，我在 cmd 中看到 13 行访问被拒绝

我对android开发和eclipse还很陌生，所以现在我不知道该怎么做

我在 Windows 7 上，它是 Eclipse Juno

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:22:15.447

尝试重新加载包。它将解决问题。

检查[此](http://tools.android.com/knownissues)链接。

我希望它会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:17:26.483

实际上，该解决方案不涉及删除或下载整个安装程序。更新 Eclipse ADT 后，您只需更新 SDK 管理器中的 SDK 工具。诀窍是打开 SDK manager -> Packages menu -> Reload。然后最新版本将可供更新。就这么简单，但起初实际上很烦人。您仍然面临问题，请单击[此处](https://stackoverflow.com/questions/13220460/latest-adt-and-sdk-tools-installed-but-still-asking-for-latest-sdk-tools)

# python-2.7 - python - 使用telnet登录到远程机器后如何在终端上写入

> ID：14825262
> 
> 赞同：0
> 
> 时间：2013-02-12T04:15:30.517
> 
> 标签：python-2.7, telnetlib

我正在尝试在 python 中连接远程机器。我使用了telnetlib模块，输入登录ID和密码后可以连接到机器

tn = Telnet("主机 IP")

tn.write("UID")

tn.write("密码")

输入密码后，终端连接到远程机器，这是一个基于linux的软件[有自己的IP地址（HOST IP）。]

然后，如果我尝试发出命令，例如 tn.write("cd //tmp/media/..) 以转到其各个文件夹，则它不起作用，当检查屏幕显示的内容时

tn.read_very_eager()

错误出现为：

""\r\n\r\n\r\nBusyBox v1.19.4 (2012-07-19 22:27:43 CEST) 内置 shell (ash)\r\n 输入 'help' 获取内置列表-in 命令。\r\n\r\n~ # ""

我想知道 Python 中是否有任何方法，就像我们在 PERL 中的**$telnet->cmd ("cd //tmp/media/..)**

如果你能举个例子，欢迎任何建议！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:48:24.590

您应该尝试使用 登录机器`telnet`，然后您会注意到您将登录到 BusyBox。您打印的那个字符串不是错误，它是正常的 BusyBox 提示符。

这可能不是您所期望的，我只知道无法正常启动的 Linux 机器中的 BusyBox。

# java - 如何解决“线程中的异常”main“java.lang.ArrayIndexOutOfBoundsException”

> ID：14825271
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:16:18.610
> 
> 标签：java, indexoutofboundsexception

我的程序有一些问题。第 93 行有错误。如何解决这个问题？

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
    at first_JWNL.main(first_JWNL.java:93) 
```

## 代码

```
 for (int i=0;i<sentences.length;i++)
             {  
                 System.out.println(i);
              System.out.println(sentences[i]);
              int wcount = sentences[i].split("\\s+").length;
        String[] word1 = sentences[i].split(" ");

        for (int j=0;j<wcount;j++){  
            System.out.println(j);

         System.out.println(word1[j]);
         String sen="one";

         IndexWordSet set = wordnet.lookupAllIndexWords(word1[j]);
         IndexWord[] ws = set.getIndexWordArray(); 
         **POS p = ws[0].getPOS();**///////Line no 93

         Set<String> synonyms = new HashSet<String>();
         IndexWord indexWord = wordnet.lookupIndexWord(p, word1[j]);
         Synset[] synSets = indexWord.getSenses();
         for (Synset synset : synSets)
         {  Word[] words = synset.getWords();

            for (Word word : words)
            {  synonyms.add(word.getLemma());
            }
         }
         System.out.println(synonyms); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:29:46.913

```
IndexWordSet set = wordnet.lookupAllIndexWords(word1[j]); 
```

在数组中找不到任何索引词，并返回一个空集。因此

```
IndexWord[] ws = set.getIndexWordArray(); 
```

返回一个零长度数组和表达式

```
ws[0] 
```

导致异常。

您必须考虑到可能没有匹配项。

例如，在您的代码中，执行以下操作：

```
if (wordnet.size() == 0 ) {
    System.out.println("Could not find any words!!!!!");
} else {
    IndexWordSet set = wordnet.lookupAllIndexWords(word1[j]);
    IndexWord[] ws = set.getIndexWordArray(); 
    POS p = ws[0].getPOS();

    // .......
    // ETC
    // ....... 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:24:58.053

做检查：

```
if(ws.length > 0){
  POS p = ws[0].getPOS();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:25:21.440

您`set.getIndexWordArray ()`出于某种原因返回空数组。您没有发布此方法的代码，所以我不知道为什么。

# asp.net - 排序 Ektron 内容类型

> ID：14825272
> 
> 赞同：0
> 
> 时间：2013-02-12T04:16:23.163
> 
> 标签：asp.net, ektron

爱克创 801 SP1

我正在使用以下代码来获取一些智能表单内容。我可以在获取 20 行之前进行预排序（使用 OrderByField 吗？）？我正在对成员列表进行排序，但这是事后的事，有点没用。我错过了什么？

```
Criteria<ContentProperty> criteria1 = new Criteria<ContentProperty>();
criteria1.AddFilter(ContentProperty.XmlConfigurationId, CriteriaFilterOperator.EqualTo, MEMBERS_ID);
criteria1.PagingInfo = new PagingInfo(20);

List<ContentType<member>> memberslist = contentTypeManager.GetList(criteria1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:01:55.467

我有好消息和坏消息要告诉你。

首先，好消息。在拉出 20 个项目*之前*，您可以使用 Criteria 对象按 Content Properties 排序。您需要使用条件的 OrderByField 和 OrderByDirection 属性。

```
criteria.OrderByField = ContentProperty.DateCreated;
criteria.OrderByDirection = EkEnumeration.OrderByDirection.Descending; 
```

坏消息是在尝试根据智能表单中的字段订购商品时出现。您*或许*可以使用 IndexSearch API 执行此操作，但由于 Ektron 8.0* 仍然依赖于 Microsoft 的索引服务，因此我不喜欢这种方法，也没有任何代码可共享。如果您选择走那条路线，前提是使用搜索以正确的顺序返回内容 ID，然后按照您的原样使用条件来获取具有这些 ID 的项目。

您*可以*仅使用 API 执行的操作是在加载数据后使用 Microsoft LINQ 对数据进行排序，但为了以正确的顺序获得正确的结果，您必须首先加载所有项目（并理想地缓存它们以最大限度地减少性能影响）。我以我的一种内容类型为例，但您应该明白这一点。

```
var membersList = new List<SlideBannerType>();
var sortedList = membersList.OrderBy(s => s.EnableAlternateText);
var firstpage = sortedList.Take(20);
var nextpage = sortedList.Skip(20).Take(20); 
```

这并不理想，但它确实适用于较小的（数百个，可能是数千个，但不是数十个）数据集。

不过，第二个好消息是 Ektron 将 Microsoft Search Server 用于 8.5 及更高版本。这有一个更强大的 API，并且性能出色（在速度和可靠性方面）。前提实际上与 IndexSearch 相同，使用 Search 以正确的顺序获取 ID，然后使用 ContentManager（或 ContentTypeManager）获取项目。我已经多次使用这种方法，尽管不是专门针对 Smart Forms。最好的结果来自升级到 8.6 和 Microsoft Search Server 并同时使用这两个 API 来获取每一页数据。这样做时，将高级搜索和过滤选项以及新的搜索 API 混合在一起实际上几乎是微不足道的。

# c++ - 将向量作为 void 指针传递给函数

> ID：14825274
> 
> 赞同：5
> 
> 时间：2013-02-12T04:16:40.700
> 
> 标签：c++, pointers, vector, void

我有一个回调函数，它以 a`void *`作为参数来传递参数，我想将一个向量传递给函数。该函数将被多次调用，因此在回调过程完成后，我希望能够遍历所有已`push_back()`通过回调编辑的元素。

```
static void cb(void *data)
{
    vector<int> *p = static_cast<vector<int>*>(data); //Attempting to convert *void to vector<int>
    p->push_back(1);
}

int main()
{
    vector<int> a(10); //Max of 10 push_back()s? vector<int> a; gives memory error.
    cb((void*)&a.at(0));
    cout << a.at(0); //Gives a random number of 6 digits or higher
} 
```

`a.at(0)`问题是在回调后调用时它的值不正确，只是一些随机数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T04:18:21.760

假设您无法更改 的签名`cb()`，请尝试以下操作：

```
cb(static_cast<void*>(&a)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T04:22:13.980

这里：

```
cb ((void*)&a.at(0)); 
```

您将指针传递给向量的第一个元素，而不是向量本身，而是在这里：

```
vector <int> *p = static_cast <vector <int> *> (data); 
```

您将传递的数据转换为指向向量的指针，这可能是未定义的行为。如果要将指针传递给整个向量，请按以下方式传递：

```
cb ((void *)&a); 
```

如果你真的想传递一个指向向量元素的指针，那么你应该像这样转换：

```
int * = static_cast <int *> (data); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-20T11:37:32.637

在 C++11 中，您有`vector::data`：

```
cb(a.data()); 
```

# sql - 使用 JPA 2 在权限模型中存储整数以进行按位比较

> ID：14825280
> 
> 赞同：8
> 
> 时间：2013-02-12T04:17:16.393
> 
> 标签：sql, hibernate, jakarta-ee, jpa, jpa-2.0

我正在使用一个权限模型，其中我有一个 table `user_permissions`。该表将包含一个或多个具有特定 bigint 的列。我将使用每个十进制数的位与某些权限规则进行比较（位位置将是权限规则，值将是规则的条件`active`或`not active`）。

这种方法的问题在于，在使用诸如 bigint 之类的数字时，我可以使用的位数有限。

在这种情况下，我可以在跨数据库环境中使用的最佳列类型是什么？

这些标签代表了我的目标技术，因此与这些技术相关的任何其他解决方案都值得赞赏。

我正在考虑使用 @Lob 注释来存储大数据，这是最佳做法吗？

更新：user_permission 表以 1:1 的关系扩展了用户，并具有 bin_create、bin_read、bin_update、bin_delete 等 bigint 字段，这些字段将二进制数据保存为十进制数。

为了澄清这个问题：我正在考虑使用按位运算符比较权限。因此，假设我有一个权限值为 10(1010) 的用户，以及一个需要 13 (1101) 的操作。所以 10 & 13 == 8 (1000) -> 用户有一个与操作所需权限匹配的权限，所以我可以允许或拒绝（取决于应用程序规则定义哪个）。但是通过这种方法，我可以处理的位数有限（假设我增加了要考虑的权限，所以数字也会增加）。最大的 bigint 值是 ~9223372036854775807，这给了我二进制 1111111111111111111111111111111111111111111111111111111111111111111111111，每个字段有 ~60 个块和权限可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:38:17.200

如果这是您关注的字段中可以容纳的数据量，为什么不将数字存储为 varchar？据我所知，几乎任何数据库都可以让您至少达到 varchar(255)。如果您需要的数字超过 255 位，则可以将其编码为 base 64 以将其压缩得更多。如果我的心算是正确的，那么您可以使用 255 个字符 * 每个字符 6 位 = 1530 个不同的位可供使用。如果您需要更多，我可能会建议您的权限模型有点过分。

That's assuming that you're trying to crowd the data into a smallish space in the database. Your question isn't entirely clear on what you're trying to solve for. On the other end of the spectrum, you could unpack the bits and save each bit to its own field or its own row. For example, user_permissions could be a table with two columns: user and permission, where each row is one permission granted to one user.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:33:56.947

如果您想以最佳方式存储数据，则必须命名要优化的目标。

这是 MySQL 的最佳解决方案（通过定义`BINARY(32)`），您可以在您喜欢的数据库上尝试类似的东西：

```
@Column(columnDefinition = "BINARY(32)", length = 32, nullable = false)
private byte[] bits; 
```

有时，对于某些 JPA 提供程序和数据库，列定义以`Lob`. 这不是最好的解决方案，因为读取 a`Lob`是一个外部（*非常昂贵的*）操作。尝试更改提供程序或数据库（如果您使用的是纯 JPA，则可以尝试）。

替换`Lob`s 的选项例如是数字列（您可以使用例如 4 列 64 位宽度或类似的列）。如果您想要一个好的解决方案，这些容器列甚至可以`@Embedded`进入您的主类。但这一切都取决于您的数据库。

这样，您将拥有 256 位（32 字节），无需任何转换和进一步计算，并且您可以根据需要扩展范围。但是，在更改列定义时必须小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:01:32.513

有两种不同的方法：

1）漂亮的数据模型

一行（您的示例中的用户）可以具有值（这里是一位用户权限或布尔值），您不知道可能有多少值，即值的数量基本上是无限的。SQL 中处理此问题的常规方法是子表：

您创建一个表（以及用于映射/注释的 Java 类）UserPermission，其中包含作为外键的用户 ID、权限 ID 和布尔值。用户 ID 和权限 ID 是此表的唯一键（如果您愿意，可以添加一个 ID 作为不同的主键）。如果您想进行一些审核，您甚至可以为授予权限的用户添加列、完成日期等，但这不是必需的。

如果您想让它更漂亮，那么您还可以创建一个表（和 Java 类）权限，其中包含权限 ID、权限名称以及可能的其他信息。

此解决方案需要比您的想法更多的数据库空间，但请记住，与数据库中的其他数据相比，您不会有这么多的用户，因此额外的数量无关紧要。

2）快速解决方案：

如果带有额外表的解决方案需要很多开销，因为您的权限并不重要，并且您担心整数可能会很短，那么您可以使用 Java 类型`BigInteger`（该类型允许位操作）并将其与`@Column`注解映射到a`NUMBER`或`DECIMAL`在数据库中。

请记住，数据库的大小`NUMBER`也是有限的（例如 Oracle 最多允许 10^40）。如果这可能是一个问题，那么您必须使用解决方案 1)。

解决方案 2) 的另一个缺点是，您永远不能使用索引来获取权限。（选择具有特定权限集的所有用户永远不会超过索引。）

我总是会使用解决方案 1）。

# jquery - jquery 1.9 不会在 IE9 / xhtml 中检查收音机

> ID：14825281
> 
> 赞同：1
> 
> 时间：2013-02-12T04:17:19.013
> 
> 标签：jquery, internet-explorer-9, radio-button

我试图让 IE9 承认单选按钮组已选中一个选项，通过脚本设置。在我的脚本中，我希望检查第一个选项。在 xhtml doctype 上的兼容模式为 ON 的 IE9 中不起作用（必需配置）。

```
var $list = jQuery("#my-radio-container");
jQuery(":radio",$list).each(function (ind,el) {
var $elm = jQuery(el);
$elm.addClass("ui-widget-content");
if (ind == 0) {
    $elm.addClass("ui-state-active")
    .get()[0].setAttribute("checked", "checked")
}); 
```

我已经尝试了所有常用的组合：

```
$elm.attr('checked', 'checked');
$elm.prop('checked', 'checked');
$elm.attr('checked', true); 
```

以及更不寻常的：

```
 $elm.get()[0].setAttribute("checked", "checked") 
```

看起来应该可以工作-如果您检查`$list`then 的 innerHTML ，它表明该对象包含`CHECKED="checked"`在其中，所以您会认为它会被选中？但是执行表单发布显示没有为单选按钮提交数据（单击按钮，而不是在脚本中设置它，显示相同的外部 html 并且表单确实发布了该值）。

恢复到这个甚至不起作用，这很奇怪：

```
 document.forms[0].elements[jQuery(":radio",$list).filter(":first").attr("name")].value = jQuery(":radio",$list).filter(":first").attr("value");

 // which works out like this:
 document.forms[0].myradio.value="1"; 
```

1.  我在等文件准备好。
2.  我已经用谷歌搜索了这个。我一直在尝试[各种文章中建议的各种](https://stackoverflow.com/questions/5570455/jquery-dynamically-added-checkbox-attrchecked-true-not-working)技术，仅仅因为我只链接到一篇文章并不意味着我没有关闭其他大约 20 篇文章的标签。
3.  我检查了我的元素是什么，是的，它是一个 input type=radio 标签，而不是它的标签或一些愚蠢的东西。

`IE9 doesn't want to let me set a radio button check state through code.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:26:07.013

用于`.prop("checked", true)`选中和`.prop("checked", false)`取消选中。Migrate 插件应该警告过`.attr(..., true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:22:13.240

我遇到过类似的问题，之前我通过在输入字段（具有相同名称）之前声明一个隐藏字段并将值设置为 0 来解决，这确保有一个字段可以发布/修改。这是一个很长的镜头，但过去对我有用。

# backbone.js - Backbone.io、Backbone 和 require.js

> ID：14825284
> 
> 赞同：1
> 
> 时间：2013-02-12T04:17:46.693
> 
> 标签：backbone.js, socket.io, requirejs

如何使用 Require.js 的 shim 配置加载 Backbone.io、Backbone 和 socket.io？

似乎其他所有内容都加载得很好，只是当我尝试运行 Backbone.io.connect() 时，我得到“Backbone is not defined”。Backbone.io 的服务方式与 socket.io 来自 socket.io 服务器创建的 /socket.io 目录的方式相同。

```
requirejs.config({
  baseUrl: 'javascripts/lib',
  paths: {
    jquery: 'jquery.min',
    bootstrap: 'bootstrap.min'
  },
  shim : {
    'underscore': {
      exports: '_'
    },
    'backbone': {
      deps: ["underscore", "jquery"],
      exports: 'Backbone'
    },
    'bootstrap': {
      deps: ["jquery"]
    }
  }
})

requirejs(['jquery',
           'underscore',
           'backbone',
           'bootstrap',
           '../socket.io/socket.io.js',
           '../socket.io/backbone.io.js'
           ], function($, 
                       _,
                       Backbone,
                       bootstrap){

    Backbone.io.connect();
} 
```

* * *

小更新：

似乎Backbone在主requirejs函数中定义得很好，只是backbone.io需要在初始化之前定义Backbone。如何初始化 Backbone 对象，然后初始化主干.io 库，以便它可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:07:32.180

尝试在你的路径中包含骨干

```
paths: {
    jquery: 'jquery.min',
    bootstrap: 'bootstrap.min',
    underscore: '<name of underscore file>',
    backbone: '<name of backbone file>'
}, 
```

我认为应该这样做。请记住不要在文件名中包含 .js。此外，如果主干.io 依赖于主干，您可能需要在 shim 下添加依赖项。

```
shim : {
    'underscore': {
      exports: '_'
    },
    'backbone': {
      deps: ["underscore", "jquery"],
      exports: 'Backbone'
    },
    'bootstrap': {
      deps: ["jquery"]
    },
    'backbone.io': {
      deps: ["backbone"]
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:27:42.857

以下是它最终为我工作的方式：

感谢landland，您的回答最有帮助。

```
requirejs.config({
  baseUrl: 'javascripts/lib',
  paths: {
    jquery: 'jquery.min',
    bootstrap: 'bootstrap.min',
    backbone: 'backbone',
    underscore: 'underscore',
    socketio: '../../socket.io/socket.io',
    backboneio: '../../socket.io/backbone.io'
  },
  shim : {
    'underscore': {
      exports: '_'
    },
    'backbone': {
      deps: ["underscore", "jquery"],
      exports: 'Backbone'
    },
    'bootstrap': {
      deps: ["jquery"],
      exports: 'bootstrap'
    },
    'backboneio': {
      deps: ["backbone", "socketio"]
    }
  }
})

requirejs(['jquery',
           'underscore',
           'backbone',
           'bootstrap',
           'socketio',
           'backboneio'
           ], function($, 
                       _,
                       Backbone,
                       bootstrap,
                       titlealert,
                       waitForImages){
} 
```

# vba - 如何通知我对附加到电子邮件的 .ics 文件的响应？

> ID：14825294
> 
> 赞同：0
> 
> 时间：2013-02-12T04:18:37.517
> 
> 标签：vba, outlook, icalendar, outlook-2010

如果我将 iCalendar 文件附加到电子邮件，而不是会议或约会，而是作为带有附件的电子邮件，有什么方法可以通知我回复/接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:26:48.477

也许。iCalendar 是由另一个处理文件的程序（例如 Google 日历、iCal 等）打开的[文件格式。](http://www.ietf.org/rfc/rfc2445.txt)

例如，这可能是文件的内容：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
UID:uid1@example.com
DTSTAMP:19970714T170000Z
ORGANIZER;CN=John Doe:MAILTO:john.doe@example.com
DTSTART:19970714T170000Z
DTEND:19970715T035959Z
SUMMARY:Bastille Day Party
END:VEVENT
END:VCALENDAR 
```

没有办法将网络调用直接嵌入到文件中的另一个服务以确认接受 iCalendar 邀请，就像您在电子邮件中嵌入 <img/> 像素，这些像素会回调到服务器以进行电子邮件分析。但是，它确实支持多个“关系组件属性”。出于您的目的，最重要的字段似乎是“参加者”（规范中的第 4.8.4.1 节）。此部分可能如下所示：

```
 ORGANIZER:MAILTO:jsmith@host1.com
 ATTENDEE;MEMBER="MAILTO:DEV-GROUP@host2.com":
  MAILTO:joecool@host2.com
 ATTENDEE;DELEGATED-FROM="MAILTO:immud@host3.com":
  MAILTO:ildoit@host1.com 
```

但是，我相信由客户（如 iCal）来解析信息并将其用于通知接受。因此，根据他们选择的日历客户端，您可能会收到一些人的接受通知，但不会收到其他人的通知。

# android - Android - 是否可以确定活动是否从另一个任务开始？

> ID：14825297
> 
> 赞同：1
> 
> 时间：2013-02-12T04:19:34.673
> 
> 标签：android, android-activity, task, lifecycle

这是相当详尽的，所以我会尽量清楚。目前，我的应用程序在启动时需要重新加载一些数据。我在我的主要活动的 onCreate/onRestart 方法中加载这些数据。但是，如果用户从不离开当前任务，我需要小心不要重新加载数据。

例如，如果我需要从我的主要活动启动内置的联系人应用程序来选择一个联系人，那么我的主要活动将在我选择一个新联系人时暂停/停止。当我回到我的主要活动时，将调用 onRestart。在这种情况下，因为我从未离开过应用程序的任务，所以我不想重新加载数据。这意味着需要在此处包含一些检查，以确定用户是否直接从联系人应用程序返回而无需离开它。

否则，如果用户在打开时退出联系人应用程序并从启动器菜单（或最近的应用程序列表等）重新启动应用程序 - 我想关闭联系人应用程序并在主活动的 onRestart 方法时重新加载数据叫。

有没有办法在不使用任何可怕的权限（例如 GET_TASKS）的情况下做到这一点。我已经被这个问题困扰了很长时间，所以任何帮助都将不胜感激:)

Tyvm, B. 坎贝尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:10:20.567

我从 Android 文档中学到了很多东西：

[任务和回栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)

[带有返回和向上的导航](http://developer.android.com/design/patterns/navigation.html)

[应用结构](http://developer.android.com/design/patterns/app-structure.html)

这里有一些亮点：

> 任务是用户在执行特定工作时与之交互的活动的集合。活动按每个活动的打开顺序排列在一个堆栈（“后堆栈”）中。
> 
> 当当前活动开始另一个活动时，新活动被推到堆栈顶部并获得焦点。前一个活动保留在堆栈中，但已停止。当活动停止时，系统会保留其用户界面的当前状态。当用户按下 Back 按钮时，当前 Activity 从栈顶弹出（该 Activity 被销毁）并恢复前一个 Activity（其 UI 的先前状态被恢复）。堆栈中的 Activity 永远不会重新排列，只会从堆栈中压入和弹出——当当前 Activity 启动时将其压入堆栈，并在用户使用“后退”按钮离开时弹出。

这意味着当您的应用程序[拿起一个联系人](https://stackoverflow.com/a/867828/1365960)时，任务中的活动堆栈可能是：

| 联系人中的活动 A |

| 应用程序中的活动 B |

| 其他应用中的活动 C|

> 当用户通过按 Home 按钮离开任务时，当前活动停止，其任务进入后台。系统保留任务中每个活动的状态。如果用户稍后通过选择启动任务的启动器图标来恢复任务，则任务将进入前台并恢复堆栈顶部的活动。

即使用户在打开时退出联系人应用程序并从启动器菜单或最近的应用程序列表重新启动应用程序，活动堆栈仍然与我们在上面看到的一样。可能使您的活动从另一个任务开始的唯一可能性是另一个应用程序（可能是启动器应用程序），它通过 startActivity 标志在新任务中启动主要活动，这是一种罕见的情况。[在这种罕见的情况下，您可以通过Binder.getCallinguid()](http://developer.android.com/reference/android/os/Binder.html#getCallingUid%28%29)简单地检查启动您的活动的应用程序的 uid以区分它。

根据评论编辑：

[您可以通过FLAG_ACTIVITY_LAUNCED_FROM_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY)检查是否从历史记录中打开了活动：

```
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) != 0){

}else{

} 
```

您还可以查看：

[android:excludeFromRecents](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)如果您不希望您的应用从最近的应用开始

[机器人：finishOnTaskLaunch](http://developer.android.com/guide/topics/manifest/activity-element.html#finish)

[android:stateNotNeeded](http://developer.android.com/guide/topics/manifest/activity-element.html#state)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:26:11.737

如果您正在加载的数据与`application`生命周期相关而不是特定的`activity`，您可以在`application`类中加载它，因此除非您的应用程序任务被终止，否则它不会再次重新加载。

# c - 在 C 中存储指针

> ID：14825298
> 
> 赞同：0
> 
> 时间：2013-02-12T04:19:39.327
> 
> 标签：c, pointers, heap-memory

我正在尝试创建一个内存分配系统，其中一部分涉及将整数存储在指针位置以创建一种标题。我存储了几个整数，然后是两个指针（指向内存中下一个和上一个点的位置）。

现在我想弄清楚是否可以将指针存储在以后可以用作原始指针的位置。

```
int * header;
int * prev; 
int * next;
...
*(header+3) = prev; 
*(header+4) = next; 
```

然后后来...

```
headerfunction(*(header+4)); 
```

将使用指向内存中“下一个”位置的指针执行操作。

（代码仅供说明）

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:03:36.490

Akp 是正确的，只需查看您要在代码段中完成的操作，如果您尝试将整数指针存储在标头中，标头应定义如下：

```
int **header; 
```

然后应该为它分配内存。

关于实际的内存分配，如果在 Unix 机器上，你应该查看 brk() 系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:49:18.937

不要直接进行指针操作。结构是为了消除您直接执行此操作的需要。

相反，做一些更像这样的事情：

```
 typedef struct 
 {
    size_t cbSize;
 } MyAwesomeHeapHeader;

 void* MyAwesomeMalloc(size_t cbSize)
 {
    MyAwesomeHeapHeader* header;
    void* internalAllocatorPtr;
    size_t cbAlloc;
    // TODO: Maybe I want a heap footer as well?

    // TODO: I should really check the following for an integer overflow:
    cbAlloc = sizeof(MyAwesomeHeapHeader) + cbSize; 
    internalAllocatorPtr = MyAwesomeRawAllocator(cbAlloc);
    // TODO: Check for null

    header = (MyAwesomeHeapHeader*)internalAllocatorPtr;
    header->heapSize = cbSize;
    // TODO: other fields here.

    return (uint8_t*)(internalAllocatorPtr) + sizeof(MyAwesomeHeapHeader);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:50:40.360

你所做的一切都是不安全的，因为你正在尝试写入一个没有被标头指向的内存位置，因为`*(header+3)`它会尝试写入距离标头指针 12 字节的其他内存位置，并且如果这个新内存被另一个持有变量那么它将导致问题。

您可以首先分配一个大内存，然后起始地址将为您提供内存来源，您可以在其中使用一些起始字节或内存来借助结构控制剩余内存的其他部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:20:20.187

你正在构建一个内存分配系统，因此我们假设你有一个内存主干，你可以自由地使用它来管理分配和释放。

根据您的问题，`header`指针是在`heap`内存中分配的（由编译器和库） - 您可能想知道使用该内存是否安全，因为*您*正在分配内存。这取决于您的系统，以及是否有另一个（系统）内存分配管理。

但你能做的是

```
main() {
  void *header;
  void *prev;
  void *next;

   manage_memory_allocations(&header, &prev, &next); // never returns

} 
```

在这种情况下，指针是在堆栈上创建的——因此分配取决于处理器堆栈指向的内存。

请注意“永不返回”，因为一旦*main*结束，内存就会“释放”。

# hadoop - 如何备份和恢复 HDFS

> ID：14825300
> 
> 赞同：1
> 
> 时间：2013-02-12T04:20:08.853
> 
> 标签：hadoop, backup, hdfs, restore

实际上，我已经开发了使用 Hdfs 存储图像的应用程序。现在我想在新服务器中迁移服务器并再次设置 hadoop。如何将 HDFS（旧服务器）中的图像文件备份到新服务器中的 HDFS？

我尝试使用**CopyToLocal**命令进行备份并使用**CopyFromLocal**进行恢复，但是我出错了，当应用程序运行时，我在 hdfs 上恢复的图像无法显示在我的应用程序上。

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:33:31.000

Distcp 是在执行大型集群间/集群内复制数据时使用的命令。[这](http://hadoop.apache.org/docs/r0.19.2/distcp.html)是相同的文档。

CopyToLocal 和 CopyFromLocal 也应该适用于少量数据。运行[HDFS CLI](http://hadoop.apache.org/docs/r0.19.2/hdfs_shell.html)并确保文件在那里。那么它可能是应用程序的问题。

# ruby-on-rails - 在 ruby on rails 上实现 postgresql 时出错

> ID：14825302
> 
> 赞同：1
> 
> 时间：2013-02-12T04:20:31.163
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql

实现 rake db:migrate 时出现以下错误

```
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) 
```

我使用 postgresql 在数据库中创建了两个表。

我的 database.yml 是

```
development:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: shop_development
  pool: 5
  username: postgres
  password: 

test:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: shop_test
  pool: 5
  username: postgres
  password: 

production:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: shop_production
  pool: 5
  username: postgres
  password: 
```

我还运行了以下命令：

```
C:\Sites\shop>gem install 'pg'
Successfully installed pg-0.14.1-x86-mingw32
1 gem installed
Installing ri documentation for pg-0.14.1-x86-mingw32...
Installing RDoc documentation for pg-0.14.1-x86-mingw32... 
```

但这仍然给我同样的错误。

我的 gemfile 有以下内容：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.6)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.21)
    multi_json (1.5.0)
    polyglot (0.3.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12.1)
      json (~> 1.4)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7-x86-mingw32)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  rails (= 3.2.11)
  sass-rails (~> 3.2.3)
  sqlite3
  uglifier (>= 1.0.3) 
```

我的 gemfile 有以下内容：-

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# gem 'sqlite3'

 gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

我的捆绑安装显示以下内容：-

```
C:\Sites\shop>bundle install
Using rake (10.0.3)
Using i18n (0.6.1)
Using multi_json (1.5.0)
Using activesupport (3.2.11)
Using builder (3.0.4)
Using activemodel (3.2.11)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.5)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.2.2)
Using actionpack (3.2.11)
Using mime-types (1.21)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.11)
Using arel (3.0.2)
Using tzinfo (0.3.35)
Using activerecord (3.2.11)
Using activeresource (3.2.11)
Using bundler (1.0.22)
Using coffee-script-source (1.4.0)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.3)
Using json (1.7.6)
Using rdoc (3.12.1)
Using thor (0.17.0)
Using railties (3.2.11)
Using coffee-rails (3.2.2)
Using jquery-rails (2.2.1)
Using pg (0.14.1)
Using rails (3.2.11)
Using sass (3.2.5)
Using sass-rails (3.2.6)
Using uglifier (1.3.0)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem
is installed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:56:53.677

你跑了`bundle install`吗？
它看起来像`sqlite3`当前已安装但`pg`不是。

如果您要将数据从中移动，`sqlite3`请`pg`查看此 railscast：[迁移到 PostgreSQL](http://railscasts.com/episodes/342-migrating-to-postgresql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:05:05.893

请试试这个..

```
 sudo apt-get install postgresql postgresql-client postgresql-contriblibpq-dev 
```

# mysql - 502 错误 nginx + ruby on rails 应用程序

> ID：14825304
> 
> 赞同：3
> 
> 时间：2013-02-12T04:20:55.887
> 
> 标签：mysql, ruby-on-rails-3, nginx, activeadmin

应用详情：
Rails 3.1.0
Ruby 1.9.2
unicorn 4.2.0
resque 1.20.0
nginx/1.0.14
redis 2.4.8

我正在使用**active_admin gem**，所有 URL 都得到响应 200，
但只有一个 URL 在生产中给出 502 错误。

耙路线：

```
admin_links GET        /admin/links(.:format)                                            {:action=>"index", :controller=>"admin/links"} 
```

及其在本地（开发）方面的工作。

本地主机日志：响应代码 200

```
 Started GET "/admin/links" for 127.0.0.1 at 2013-02-12 11:05:21 +0530
        Processing by Admin::LinksController#index as */*
        Parameters: {"link"=>{}}
    Geokit is using the domain: localhost
        AdminUser Load (0.2ms)  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 3 LIMIT 1
         (0.1ms)  SELECT 1 FROM `links` LIMIT 1 OFFSET 0
         (0.1ms)  SELECT COUNT(*) FROM `links` 
         (0.2ms)  SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM `links` LIMIT 10 OFFSET 0) subquery_for_count 
        CACHE (0.0ms)  SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM `links` LIMIT 10 OFFSET 0) subquery_for_count 
        Link Load (0.6ms)  SELECT `links`.* FROM `links` ORDER BY `links`.`id` desc LIMIT 10 OFFSET 0
        Link Load (6677.2ms)  SELECT `links`.* FROM `links` 
    Rendered /usr/local/rvm/gems/ruby-1.9.2-head/gems/activeadmin-0.4.2/app/views/active_admin/resource/index.html.arb (14919.0ms)
    Completed 200 OK in 15663ms (Views: 8835.0ms | ActiveRecord: 6682.8ms | Solr: 0.0ms) 
```

生产日志：502 响应

```
 Started GET "/admin/links" for 103.9.12.66 at 2013-02-12 05:25:37 +0000
        Processing by Admin::LinksController#index as */*
        Parameters: {"link"=>{}} 
```

NGinx 错误日志

```
2013/02/12 07:36:16 [error] 32401#0: *1948 upstream prematurely closed connection while reading response header from upstream 
```

不知道怎么回事，有大佬帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T10:32:04.900

你有一个超时问题。

**解决它**

> HTTP/1.1 502 错误网关

表示 nginx 在与其配置的上游通信时遇到问题。 [http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#502](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#502)

> 2013/02/12 07:36:16 [错误] 32401#0: *1948 上游过早关闭连接，同时从上游读取响应标头

Nginx 错误日志告诉您 Nginx 实际上能够连接到配置的上游，但进程在（完全）收到答案之前关闭了连接。

您的开发环境：

> 在 15663 毫秒内完成 200 OK

显然，您需要大约 15 秒才能在您的开发机器上生成响应。

> 与 proxy_connect_timeout 相比，此超时将捕获一个将您置于其连接池中的服务器，但除此之外不会对您做出任何响应。请注意不要将其设置得太低，因为您的代理服务器可能需要更长的时间来故意响应请求（例如，当为您提供需要一些时间来计算的报告页面时）。您可以为每个位置设置不同的设置，这使您能够为报告页面的位置设置更高的 proxy_read_timeout。

[http://wiki.nginx.org/HttpProxyModule#proxy_read_timeout](http://wiki.nginx.org/HttpProxyModule#proxy_read_timeout)

在 nginx 端，proxy_read_timeout 默认为 60 秒，所以这是安全的

我不知道 ruby​​ (on rails) 是如何工作的，请检查错误日志 - 超时发生在堆栈的那一部分

# jquery - 完成后如何将功能链接到此功能

> ID：14825306
> 
> 赞同：1
> 
> 时间：2013-02-12T04:21:12.047
> 
> 标签：jquery, twitter-bootstrap, timepicker

由于某种原因，引导时间选择器似乎在其隐藏事件中重置了我的表单元素。所以我想做一个临时解决方法，但我希望能够在这个函数之后立即调用另一个函数

```
$('#EventTimeEdit').timepicker()
                   .on('hide.timepicker', function (e) {
                   }
 ); 
```

假设我想在上述完成后调用 foo

```
function foo(){

}; 
```

出于某种原因，如果我从上述方法中调用 foo ，它的行为就不会像我想要的那样，所以我想知道我是否可以在它执行后调用它（每次 .timepicker...on 执行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:08:04.000

```
$('#EventTimeEdit').timepicker().on('hide.timepicker', function (e) {
    // Do optional stuff
    anotherFunction();
}); 
```

`anotherFunction();`时间选择器隐藏后您尚未创建的函数在哪里执行

# mysql - MySQL - 按单独表中的值排序

> ID：14825309
> 
> 赞同：0
> 
> 时间：2013-02-12T04:21:15.097
> 
> 标签：mysql, sql, aggregate-functions, greatest-n-per-group

我有两个 MySQL 表。表格1：

```
id name otherid 
```

表2：

```
id otherid time 
```

在每个表中，“id”是每一行的唯一标识符（也是主键），“otherids”对应于表之间。table2 中可能有多个（或 0）行的 otherid 对应于 table1 中的 otherid。桌子

例如，表 1：

```
id name otherid
1  bob  24
2  joe  326 
```

表 2：

```
id otherid time
4  326     2014-03-12 023:38:59
5  24      2013-02-11 22:05:21
6  24      2013-02-10 13:27:58 
```

我希望获取 table1 中的每一行，按照 table2 中的行的最近时间排序，根据 otherid。在我的示例中，这是我要寻找的结果：

```
id name time
2  joe  2014-03-12 023:38:59
1  bob  2013-02-11 22:05:21 
```

这是因为 Joe 拥有来自 table2 的最新时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:25:30.060

见下面的例子：

```
SELECT table1.*, max(table2.time) 
FROM table1 
INNER JOIN table2 ON table1.otherid = table2.otherid
GROUP BY table2.otherid
ORDER BY table2.id 
```

参见[SqlFiddle 演示](http://www.sqlfiddle.com/#!2/81716/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:34:05.583

尝试

```
SELECT MIN(a.id) AS `id`, MIN(a.name) AS `name`, MAX(b.time) AS `time`
FROM table1 a INNER JOIN
     table2 b ON a.otherid = b.otherid
GROUP BY a.otherid
ORDER BY b.time DESC 
```

工作[的 sqlfiddle](http://sqlfiddle.com/#!2/915cb/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:25:25.390

您可以使用`MAX`功能获取最近的时间。

前任。`MAX(time)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:25:50.130

```
SELECT
    Table1.id, name, MAX(time)
FROM
    Table1
    JOIN Table2 USING (otherid)
GROUP BY
    otherid
ORDER BY
    time DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T04:32:56.740

```
SELECT DISTINCT(table1.id),table1.name,table2.time FROM table1 
LEFT JOIN table2 ON table1.otherid=table2.otherid
ORDER BY table2.time DESC; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T04:39:43.490

您可以使用连接和子查询尝试此操作：

```
select id, name
from tb1 a
left join
(select otherid, max(dt) mdt
from tb2
group by otherid) b
on a.otherid = b.otherid
order by b.mdt desc
; 
```

# iphone - 重新排序 TableViewCells 位置不会持续存在

> ID：14825310
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:21:29.650
> 
> 标签：iphone, ios, xcode, uitableview

我使用以下代码重新排序我的 TableViewCells：

```
- (void)moveRowAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath{
[self.ammoTable moveRowAtIndexPath:indexPath toIndexPath:[NSIndexPath indexPathForRow:[self.tableArray count] - 1 inSection:1]];
}

-(IBAction)setEdit{
if ([self.button.currentTitle isEqualToString:@"Edit"]) {
    self.ammoTable.editing = YES;
    [self.button setTitle:@"Done" forState:UIControlStateNormal];
}
else{
    self.ammoTable.editing = NO;
    [self.button setTitle:@"Edit" forState:UIControlStateNormal];

}
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath   
*)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    // fetch the object at the row being moved
NSString *r = [self.tableArray objectAtIndex:fromIndexPath.row];

    // remove the original from the data structure
[self.tableArray removeObjectAtIndex:fromIndexPath.row];

    // insert the object at the target row
[self.tableArray insertObject:r atIndex:toIndexPath.row];

[self.ammoTable reloadData];
} 
```

一切都很好，除非您离开视图并返回它。如果我移动单元格，当视图恢复时，它们都按照原来的顺序排列。这有什么原因吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:26:58.830

我假设您正在从某种数组加载数据。除了移动表格中的单元格之外，您还必须对这个数组执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:27:07.837

您需要保留对`tableArray`属性所做的更改，以便在下次显示视图时再次重新加载该数组时，将按新顺序加载行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:29:07.893

因为您正在使用旧数组重新加载您的表格视图，即不是使用更新的数组，这意味着您正在重新初始化您的数组，它可能在 viewDidLoad 中。在 appDelegate 中创建并初始化您的数组。使用此数组并在您移动单元格时进行更改，它将保持元素的顺序。

请参阅此链接以[了解如何从 appDelegate 创建和访问数组](https://stackoverflow.com/questions/7756120/how-to-copy-an-array-to-appdelegate-array-and-then-retrieve-it-again-elsewhere)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:29:20.143

当您在 tableview 单元格中进行更改时，您还需要在 tablearray 中进行相同的更改。否则 tableview 单元格将按照数组中的顺序加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T05:01:11.170

@亚历克斯

> 为什么当我不重新排序单元格时，数组会自动记住顺序？但是如果我想重新排序，我必须手动让它记住状态？

你看 Alex，数组不记得任何顺序，它是根据数组自行排列的表格。这就是数据源的重点。操作数据源，就可以操作表了。但是操作表并不会改变数据源。因此，如果您要对表进行一些更改，请记住事先更改数据源以反映相同。

> 例如。说你想从表中删除一行。如果您使用 **commitEditing**方法并简单地删除该行，您将最终崩溃，出现无效更新或不一致异常。您需要先从 dataSource 中删除相应单元格的数据，然后再删除该行。

在您的情况下也是如此..首先交换数据数组中的对象，然后相应地移动行。

希望我清楚。干杯，玩得开心。

# html - 创建子页面

> ID：14825311
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:21:34.500
> 
> 标签：html

我对开发很陌生，希望大家能帮我解决一个小问题。

我目前正在建立一个网站并有一个常见问题解答页面。

例如，网址是 www.sitename.com/faq.html

我想创建一个常见问题子页面来保存答案

例如，网址是 www.sitename.com/faq/answers.html

我的问题是我不知道如何创建一个页面作为另一个页面的扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:24:37.260

我不确定您所说的“子页面”是什么意思。但是，如果您想在 URL *www.sitename.com/faq/answers.html*创建答案，您：

*   创建一个名为的子目录`faq`
*   将 answers.html 放在该子目录中。

就我个人而言，我会改为创建一个子目录`faq`，并将其放在`questions.html`该`answers.html`子目录中。

URL 将是

www.sitename.com/faq/questions.html

www.sitename.com/faq/answers.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:23:22.940

您只需在您拥有 faq.html 的目录中创建一个名为 faq 的文件夹。

# vba - Excel搜索并删除不包含搜索值的不同特定单元格

> ID：14825312
> 
> 赞同：0
> 
> 时间：2013-02-12T04:21:35.877
> 
> 标签：vba, excel

我不得不问，如何搜索价值和！删除差异

如果我在`column A B C` 工作表（2）的单元格 A1 中和下面有这样的数据，则有“bbb”

我应该使用什么函数或 VBA 来删除不包含 bbb 的行 A 和 B 列中的单元格

尝试使用宏记录，但效果不佳

```
 A                   B                       C

aaa-1.1.1.1         aa1a1a1a1a1               remark

bbb-2.5.2.2         b2b2b2b2b2b2              remark  

ccc-3.3.3.3         c3c3c3c3c3c3              remark

bbb-1.2.2.5         b2b2b2b2b2b2              remark  

ddd-4.1.2.4         d4d4d4d4d4d4              remark

bbb-1.3.2.7         b2b2b2b2b2b2              remark  

bbb-2.2.2.2         b2b2b2b2b2b2               remark 
```

结果应该像

```
 A                  B                        C
                                              remark

bbb-2.5.2.2         b2b2b2b2b2b2              remark  

                                              remark

bbb-1.2.2.5         b2b2b2b2b2b2              remark  

                                              remark

bbb-1.3.2.7         b2b2b2b2b2b2              remark  

bbb-2.2.2.2         b2b2b2b2b2b2              remark 
```

感谢您为我提供的每一个帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:36:51.257

使用 vba

当它到达一个空行时，以下将停止......

```
x = 1
While Cells(x, 1) <> ""
    If Left(Cells(x, 1), 3) <> "bbb" Then
        Cells(x, 1) = ""
        Cells(x, 2) = ""
    End If
    x = x + 1
Wend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:37:24.850

如果您不是在寻找一个自动化的解决方案（例如，这是一个一次性的方案，不需要编程或记录），您可以简单地`sort`基于`Column A`'s 值的数据，那么删除过程是微不足道的。简而言之：

1.  突出显示所有有问题的行/列
2.  右键->排序->从A到Z排序
3.  选择包含 的行上方和下方的所有行`bbb`。这可以通过`CTRL`在选择时按住来完成。
4.  按删除

这是这些步骤和结果的一些屏幕截图

**对数据进行排序** ![在此处输入图像描述](../Images/adc9d2534debdd6e88759fc357d26631.png)

**选择上方和下方的行`bbb`** ![在此处输入图像描述](../Images/a35aaf31796ab2552547b6965f5cab6c.png)

**按键`Delete`（**结果） ![在此处输入图像描述](../Images/895f5b5307aad781aad4094065474a1b.png)

# xml - 根据元素值更改结果显示

> ID：14825314
> 
> 赞同：0
> 
> 时间：2013-02-12T04:21:39.380
> 
> 标签：xml, xslt

我有包含大学课程信息的 XML。课程按标题、课程编号和总学分显示。

My XSLT 按学习领域对数据进行分组，然后按课程编号列出课程，并提供课程描述和总学分。一切正常，但我想调整学分的最终显示。

每个班级至少有 1-4 个学分。有些课程有最大的学分数。

我的 XSLT 会同时提取最小信用`<CRSMINCRED1>`和最大信用（`<CRSMAXCRED1>`如果存在）。

然后，XSLT 构建最终显示，使其显示为以下之一：

当只有类数据功能时`<CRSMINCRED1>`，显示如下：“1 学时”“2 学时”“3 学时”“4 学时”

当课程数据同时具有这两种功能时 `<CRSMINCRED1>`，`<CRSMAXCRED1>`显示如下：“1 到 4 学分”。

一切都很好，除了第一项。当课程只有“1”个最低学分而没有最高学分时，我希望显示为：

“1学分”

我试图做出“变量”和“if”语句但没有成功。

这是一些示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<CrystalReport>
<Details Level="1">
<Section SectionNumber="0">
<CRSTITLE1>Clinical Applications of CT I</CRSTITLE1>
<DEPTSDESC1>Diagnostic Medical Imaging</DEPTSDESC1>
<CRSNO1>2511</CRSNO1>
<CRSMINCRED1>3</CRSMINCRED1>
<CRSMAXCRED1/>
</Section>
</Details>
<Details Level="1">
<Section SectionNumber="0">
<CRSTITLE1>Clinical Applications of CT II</CRSTITLE1>
<CRSDEPTS1>DMI</CRSDEPTS1>
<DEPTSDESC1>Diagnostic Medical Imaging 2</DEPTSDESC1>
<CRSNO1>2512</CRSNO1>
<CRSMINCRED1>1</CRSMINCRED1>
<CRSMAXCRED1>4</CRSMAXCRED1>
</Section>
</Details>
<Details Level="1">
<Section SectionNumber="0">
<CRSTITLE1>Clinical Applications of CT III</CRSTITLE1>
<CRSDEPTS1>DMI</CRSDEPTS1>
<DEPTSDESC1>Diagnostic Medical Imaging 3</DEPTSDESC1>
<CRSNO1>2513</CRSNO1>
<CRSMINCRED1>1</CRSMINCRED1>
<CRSMAXCRED1/>
</Section>
</Details>
</CrystalReport> 
```

这是我正在尝试使用的 XSLT 的一部分：

```
<xsl:template match="CrystalReport">
...
 <xsl:apply-templates select="Section/CRSMINCRED1|Section/CRSMAXCRED1"/>

</xsl:template>

<xsl:template match="Section/CRSMINCRED1">
<xsl:if test=". = 1">
<mincredit><xsl:value-of select="."/></mincredit><xsl:text> credit hour</xsl:text></xsl:if>
<xsl:if test=". &gt; 1">
<mincredit><xsl:value-of select="."/></mincredit><xsl:text> credit hours</xsl:text></xsl:if>
</xsl:template>

<xsl:template match="Section/CRSMAXCRED1[string-length() != 0]">
<xsl:text> to </xsl:text><maxcredits><xsl:value-of select="normalize-space(.)" /></maxcredits><xsl:text> credit hours</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

此样式表生成我想要的内容，直到课程同时显示最小和最大学分，然后我得到以下显示：“1 学分到 4 学分”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:09:58.660

我建议做这样的事情：

```
 <xsl:template match="CrystalReport">
    ...
    <xsl:apply-templates select="Section" mode="credits"/>

  </xsl:template>

  <xsl:template match="Section" mode="credits">
    <xsl:apply-templates select="CRSMINCRED1" />
    <xsl:text> credit hour</xsl:text>
    <xsl:apply-templates select="CRSMINCRED1[. != 1]" mode="pluralize" />
  </xsl:template>

  <xsl:template match="Section[normalize-space(CRSMAXCRED1)]" mode="credits">
    <xsl:apply-templates select="CRSMINCRED1" />
    <xsl:text> to </xsl:text>
    <xsl:apply-templates select="CRSMAXCRED1" />
    <xsl:text> credit hour</xsl:text>
    <xsl:apply-templates select="CRSMAXCRED1[. != 1]" mode="pluralize"/>
  </xsl:template>

  <xsl:template match="CRSMINCRED1">
    <mincredit>
      <xsl:value-of select="." />
    </mincredit>
  </xsl:template>

  <xsl:template match="CRSMAXCRED1">
    <maxcredit>
      <xsl:value-of select="." />
    </maxcredit>
  </xsl:template>

  <xsl:template match="*" mode="pluralize">
    <xsl:text>s</xsl:text>
  </xsl:template> 
```

# emacs - Emacs Mx zone 命令停止在我开始输入时结束，这是正确的吗？

> ID：14825316
> 
> 赞同：2
> 
> 时间：2013-02-12T04:21:54.420
> 
> 标签：emacs

根据我的阅读，Mx 区域应该“帮助”您停止分区，并在您使 emacs 不活动时运行。对我来说，当我输入 Mx zone 时，emacs 会立即开始在文本框中随机移动我的文本，并且一旦我开始输入它就会结束，并且再也不会这样做了。这对我来说似乎不正确。这是它应该运行的方式吗？我正在使用 Windows 操作系统版本的 emacs，如果这有所不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:52:50.097

我的猜测是您正在寻找的功能是

```
M-x zone-when-ide 
```

移动文本是按区域运行的可能的“屏幕保护程序”之一，因此观察到的行为应该很好。

```
M-x zone 
```

如果您激活并在您开始输入后立即停止，则只会启动一次。如果您希望它自行重新启动，请使用上面提到的 zone-when-idle。

# .net - 报告 RPC 调用进度

> ID：14825330
> 
> 赞同：1
> 
> 时间：2013-02-12T04:23:26.093
> 
> 标签：.net, progress-bar, servicestack, progress

我正在使用 .NET 3.5 上的 ServiceStack 库开发一个 API 服务器（对我来说是一种新体验），旨在由 Windows 窗体厚客户端应用程序访问。当用户单击导致向服务器发出 REST 请求的按钮时，我想显示一个进度条，显示 RPC 调用的进度。

我的服务通常遵循以下模式之一：

*   客户端发送一个 ID 列表，并期望接收一个对象列表，每个 ID 一个对象。在这种情况下，进度百分比可以计算为`(number of objects received so far) / (total number of objects requested)`
*   客户端发送一个请求，并期望收到一个未知长度的列表。在服务端，我们检索对象列表（来自缓存、数据库、计算等），对其进行序列化，然后将序列化数据写入 HTTP 响应流。在这种情况下，进度百分比可以估计为`(number of bytes received so far) / (Content-Length of the HTTP response)`

在这两种情况下，这些列表都可能很长，因此我希望它们通过网络发送需要相当长的时间。

有没有办法使用 ServiceStack 的 , 或一般的任何子类来完成`JsonServiceClient`此`XmlServiceClient`任务`ServiceClientBase`？如果没有，那么在没有太多额外工作的情况下完成我想要的事情的好方法是什么？我知道我可以从头开始编写自己的 REST 客户端实现，但如果可以的话，我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:47:01.963

一种方法是查看 ServiceStack 提供的 pub/sub。您可以提交初始请求并返回相关标识符。然后你会希望胖客户端订阅一个事件。该事件可以包含客户端计算进度的数据。

[ServiceStack Redis 发布/订阅](http://www.servicestack.net/docs/redis-client/redis-pubsub)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:11:52.077

您不能使用[ServiceStack 的服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)，它们当前没有公开任何方式来利用 URL 的下载来报告进度条。

我建议使用[支持进度更新的 HTTP 客户端](http://www.c-sharpcorner.com/uploadfile/kirtan007/how-to-download-file-and-showing-its-progress-in-progress-bar/)来下载 json 字符串。要从 ServiceStack 服务获取 JSON，您可以使用`Accept: application/json`HTTP 标头或将**?format=json**附加到 QueryString。

下载 JSON 字符串后，将其完全转换为 DTO：

```
var json = ...; //download with progress
var dto = json.FromJson<MyDto>(); 
```

# android - 二进制 XML 文件第 8 行：膨胀类片段时出错，Google 地图

> ID：14825331
> 
> 赞同：8
> 
> 时间：2013-02-12T04:23:38.527
> 
> 标签：android, xml, mapfragment

在这个应用程序中，我正在尝试添加功能性 V2 谷歌地图。我查看了大多数关于创建活动、获取地图密钥和创建 xml 文件以尝试查看是否错过任何步骤的教程（我经历了 4 次），但它没有好像我错过了任何一步。

[这](http://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_mapsview)是我使用的网站：

当我在手机上运行我的应用程序时（因为 Google Play 服务在模拟器上不起作用），它给了我这两个错误：

```
 02-11 22:10:54.690: E/AndroidRuntime(4526): java.lang.RuntimeException: Unable to       start activity ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.ShowActivity}:       android.view.InflateException: Binary XML file line #8: Error inflating class fragment
  02-11 22:10:54.690: E/AndroidRuntime(4526): 

  Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment       com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public 
```

这是我的活动：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import com.google.android.maps.*;
import com.google.android.gms.maps.MapFragment;
public class ShowActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_map, menu);
    return true;
}

//@Override
//protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    //return false;
//}

    } 
```

抱歉格式化，但这是我的 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".ShowActivity" >

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

  </RelativeLayout> 
```

我已经导入了谷歌 API 和谷歌播放服务，所以所有的导入都在工作，这让我想知道为什么第二个错误说 MapFragment 是空的。清单文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.SUBSCRIBED_FEEDS_READ" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission        android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.example.myfirstapp.permission.MAPS_RECEIVE" />
<permission
    android:name="com.example.myfirstapp.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.myfirstapp.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <meta-data
            android:name="android.app.default_searchable"
            android:value=".SearchResultsActivity" />
    </activity>
    <activity
        android:name="com.example.myfirstapp.SearchResultsActivity"
        android:label="@string/title_activity_search_results"
        android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
    <activity
        android:name="com.example.myfirstapp.AddContacts"
        android:label="@string/title_activity_add_contacts" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.ContactActivity"
        android:label="@string/title_activity_contact" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.DisplayInfo"
        android:label="@string/title_activity_display_info" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <provider
        android:name="com.example.myfirstapp.SomeProvider"
        android:authorities="com.example.myfirstapp.SomeProvider" >
    </provider>

    <activity
        android:name="com.example.myfirstapp.EditContacts"
        android:label="@string/title_activity_edit_contacts" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.DeleteContact"
        android:label="@string/title_activity_delete_contact" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.FlightInfo"
        android:label="@string/title_activity_flight_info" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.EventInfo"
        android:label="@string/title_activity_event_info" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.ContactsActivity"
        android:label="@string/title_activity_contacts" >
    </activity>
    <activity
        android:name="com.example.myfirstapp.ShowActivity"
        android:label="@string/title_activity_map" >
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="removed" />
<uses-library android:name="com.google.android.maps" />
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T04:28:34.107

试试下面的代码：

```
public class ShowActivity extends android.support.v4.app.FragmentActivity {
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }
} 
```

XML文件代码：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/map"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       class="com.google.android.gms.maps.SupportMapFragment"/> 
```

清单文件代码：

```
 <permission
        android:name="com.example.myfirstapp.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
      <uses-permission android:name="com.example.myfirstapp.permission.MAPS_RECEIVE"/>
        <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
      <uses-sdk
                android:minSdkVersion="8"
                android:targetSdkVersion="16"/>
        <uses-permission android:name="android.permission.INTERNET"/>
      <uses-permission         android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<!-- External storage for caching. -->
       <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
      <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
      <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >    
         <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="removed" />
   </application> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:57:17.100

我正在尝试在 Android 2.3.4 上部署 Google Play Services V2（用于 Google 地图功能）。（API 级别 10），我遇到了同样的问题。这是我解决它的方法：

1.  google-play-services_lib 必须作为库包含在内。在 Eclipse 中，您可以执行以下操作：

    *   使用 Android SDK Manager 下载库。
    *   从现有代码创建一个新的**Android 项目，**在其中指向用于安装 SDK 的文件夹中的 google-play-services_lib。我使用了一级（libproject）。
    *   在**Project -> Properties -> Android**下将此项目标记为**Is library**。
    *   在您的项目中，还打开**Project -> Properties -> Android**并单击库部分中的**Add**。选择 google-play-services_lib。它将显示为 com_google_android_gms。

    这很重要：请确保库的项目构建目标与您的应用程序使用的目标相同。

2.  由于 API 版本低于 11，因此使用 SupportMapFragment 代替 MapFragment。

希望这可以帮助。我至少花了三个小时来解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T10:37:07.637

## 我按照以下步骤操作::

**第 1 步：**在清单中包含以下行，确保在应用程序标签中添加

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyA0YQoByyHKGbB2R3pSIerQCEiGlwieRas" />
    <meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

* * *

前任：：

```
 <application
        android:name="taxialways.user.MyApplication"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="taxialways.user.Register"
            android:label="@string/title_activity_register"
            android:noHistory="true"
            android:screenOrientation="portrait" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyA0YQoByyHKGbB2R3pSIerQCEiGlwieRas" />
        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />
</application> 
```

* * *

**第 2 步：**确保您的活动延长`FragmentActivity`

* * *

**第 3 步：**使用 mapFragment 元素，如下所示`xml`

```
 <fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/lineartab" /> 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T07:21:41.570

在清单中添加以下行

```
<meta-data  
android:name="com.google.android.gms.version"  
android:value="@integer/google_play_services_version" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-06T08:51:28.560

这个问题发生在我身上，我的代码似乎没有任何问题，经过调查，我注意到在开发过程中应用实例运行后打开活动时会出现问题，所以我只是忽略了它，因为即时运行永远不会发生该应用程序是在一个真正的用户手中。！

# cocoa - 不正确的 NSStringEncoding - 兼容性（原文如此）映射

> ID：14825334
> 
> 赞同：0
> 
> 时间：2013-02-12T04:24:12.103
> 
> 标签：cocoa, debugging, nsstringencoding

我将 Xcode 4.6 与 Cocoa 项目一起使用，使用 10.8 SDK，为 10.6 部署。

使用 LLVM 4.2。

我的日志文件到处都是以下错误：

```
Incorrect NSStringEncoding value 0x0000 detected. Assuming NSASCIIStringEncoding. Will stop this compatiblity mapping behavior in the near future. 
```

我试图缩小罪魁祸首，但到目前为止还找不到任何编码：使用 0、nil 或 NULL 的调用。

**问题：**如何确定此消息在代码中的哪个位置生成？有没有办法在调试器中打破这条消息？

（我已经搜索了编码的所有用法：在我自己的代码中。）

谢谢。

# nsattributedstring - 为什么这个属性字符串 stmt 会崩溃？

> ID：14825337
> 
> 赞同：0
> 
> 时间：2013-02-12T04:24:35.043
> 
> 标签：nsattributedstring

我正在尝试学习如何使用属性字符串。此语句导致“EXC_BAD_ACCESS”：

```
NSDictionary *attDict = @{ NSForegroundColorAttributeName : [UIColor redColor] }; 
```

我阅读文档 NSForegroundColorAttributeName 的方式是一个 NSString，所以我然后尝试了这个但得到了同样的崩溃：

```
NSLog(@"NSForegroundColorAttributeName: %@", NSForegroundColorAttributeName ); 
```

还有这个并得到了同样的崩溃：

```
NSString *fcan = NSForegroundColorAttributeName; 
```

所以看起来任何提到 NSForegroundColorAttributeName 都会导致崩溃。我确实尝试过其他 xxxAttributeNames，它们也做同样的事情。我正在导入 UIKit/UIkit.h。没有编译器警告，也没有运行时消息。我错过了什么？还有什么我需要导入或分配的吗？我的整个概念错了吗？我认为没有任何 Apple 代码示例可以涵盖这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:00:18.630

使用较新的 NS* 常量可以编译，因为它们的 extern 存在于标头中（如果您使用“最新 iOS”SDK 构建，但如果您在没有 iOS 6 但更低版本的设备上执行此代码，那么您会崩溃描述。

# jquery - 使用单选按钮和 jquery 更改图像

> ID：14825343
> 
> 赞同：3
> 
> 时间：2013-02-12T04:25:06.317
> 
> 标签：jquery, html, radio-button

我一直在尝试一些事情，但这似乎并不像我希望的那样工作。

```
<div id="box1">
    <h2>Question 1</h2>
    <ul>
        <li><input type="radio" id="q1a" name="q1"><label for="q1a">A</label></li>
        <li><input type="radio" id="q1b" name="q1"><label for="q1b">B</label></li>
        <li><input type="radio" id="q1c" name="q1"><label for="q1c">C</label></li>
        <li><input type="radio" id="q1d" name="q1"><label for="q1d">D</label></li>
    </ul>
    <img src="../images/q1.jpg" alt="" class="src">
</div>
<div id="box2">
    <h2>Question 2</h2>
    <ul>
        <li><input type="radio" id="q2a" name="q2"><label for="q2a">A</label></li>
        <li><input type="radio" id="q2b" name="q2"><label for="q2b">B</label></li>
        <li><input type="radio" id="q2c" name="q2"><label for="q2c">C</label></li>
        <li><input type="radio" id="q2d" name="q2"><label for="q2d">D</label></li>
    </ul>
            <img src="../images/q2.jpg" alt="" class="src">
</div>
<div id="box3">
    <h2>Question 3</h2>
    <ul>
        <li><input type="radio" id="q3a" name="q3"><label for="q3a">A</label></li>
        <li><input type="radio" id="q3b" name="q3"><label for="q3b">B</label></li>
        <li><input type="radio" id="q3c" name="q3"><label for="q3c">C</label></li>
        <li><input type="radio" id="q3d" name="q3"><label for="q3d">D</label></li>
    </ul>
            <img src="../images/q3.jpg" alt="" class="src">
</div> 
```

我有 3 个盒子，每个盒子都有一个唯一的 ID。每个问题 4 个问题，每个单选按钮标记正确。我的脚本沿着这些方向改变它。

```
$('input[type=radio]').change(function(){
    $(this).next('img').attr('src','../images/'+$(this).attr('id')+'.jpg');
}); 
```

我知道如果我用 $('img') 替换第一个 $(this) 它将起作用，但它最终会改变所有图像，我只希望收音机反映在同一个父 div 中的图像中. 任何将我指向正确方向的帮助将不胜感激。

我怀疑当我查询 img 时，我用于图像的 this 不能按我想要的方式工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:27:18.163

`next`只选择元素的下一个兄弟元素，可以使用`closest`method和使用method选择目标图像`find`。

```
$('input[type=radio]').change(function(){
    $(this)
         .closest('div')
         .find('img')
         .prop('src','../images/'+this.id+'.jpg');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:27:08.007

`<ul>`img 是单选按钮祖先的“下一个”兄弟（显然）。您可以使用 jQuery 轻松遍历 DOM：

```
$(this).closest('ul').next('img')... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T04:27:45.383

```
$('input[type=radio]').change(function(){
    $(this).closest('div').find('img').attr('src','../images/'+$(this).attr('id')+'.jpg');
}); 
```

[.closest()](http://jqapi.com/#p=closest)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T04:29:25.553

尝试这个

```
$('input[type=radio]').change(function(){
    $(this).closest('div').find('img')
    .attr('src','../images/'+$(this).attr('id')+'.jpg');
}); 
```

这是文档[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T04:32:04.977

您需要进行一项更改。

```
$(this).parent().parent().next('img').attr('src','../images/'+$(this).attr('id')+'.jpg');
```

要做`.parent().parent()`的是获取收音机的父容器和get`img`标签。

# php - 从 node.js 连接到 Memcached 服务时的 EADDRINUSE

> ID：14825345
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:25:25.370
> 
> 标签：php, node.js, memcached

Node.js 的新手。在 SO 中搜索了很多答案，但找不到适合此问题的解决方案。我正在使用 node.js 的自定义 memcache 服务器代码从 memcached 服务（使用 php 存储）获取数据，仅在下面添加了相关代码：

```
var net = require("net");
net.createServer(function(socket) {
     socket.setEncoding('utf8');

     var cmd = {};
     var incoming = '';
     socket.addListener('receive', function(data) {
         incoming += data;
         // in the mid of receiving some data, so we can't
         // parse it yet.
         if(data.substring(data.length - 2) != '\r\n')
            return;

         data = incoming;
         incoming = '';

         var parts = data.split(/ /);
         if(parts[0].match(/^(add|set|delete|get|gets)$/i)) {
             switch(parts[0]) {
                 case 'add':
                     var message = JSON.parse(data.split('\r\n')[1]);
                     self._add.call(socket, parts[1].replace('\r\n', ''), message);
                     break;

                 case 'set':
                     var message = data.split('\r\n')[1];
                     try {
                        message = JSON.parse(message);
                     } catch(e) {}
                        var subparts = parts[1].replace('\r\n', '').split('/');
                        self._set.call(socket, subparts.slice(0, 2), subparts.slice(2).join('/'), message);
                 break;

                 case 'delete':
                     self._delete.call(socket, parts[1].replace('\r\n', ''));
                 break;

                 case 'get':
                     self._get.call(socket, parts[1].replace('\r\n', ''));
                 break;

                 case 'gets':
                     var getsparts = parts.slice(1);
                     getsparts[getsparts.length - 1] =
                     getsparts[getsparts.length - 1].replace('\r\n', '');
                     self._gets.call(socket, getsparts);
                 break;
            }
         }
     });
}).listen(11211, "localhost"); 
```

但是每当我尝试启动节点服务器时，它都会说`EADDRINUSE`，因为这是由于 memcached 服务已经在端口上运行的原因`11211`。如果我将端口更改为 (51242) 之类的其他内容，则不会显示错误，但不会从 memcached 中检索到任何数据。

那么有什么方法可以使用`11211`来自这个node.js memcache服务器代码的相同端口连接到memcached服务..？我是 Node.js 的新手，所以想不出任何可能的解决方案。那么，如何在**不使用任何 node.js memcached 模块**的情况下解决此问题，或者我完全走错了路..？作为旁注，我在 Windows 7 上运行 memcached 服务和 nodejs。请建议

**更新**

代替

```
net.createServer(function(socket) { 
```

我改为关注测试

```
this.start = function() {
        var socket = net.createConnection(11211, "127.0.0.1");
        console.log('Socket created.');
        socket.on('data', function(data) {          
            console.log('RESPONSE: ' + data);
        }).on('connect', function() {

            socket.write("GET / HTTP/1.0\r\n\r\n");
        }).on('end', function() {
             console.log('DONE');
        });
} 
```

但在控制台上，它显示 Socket Created，然后抛出 error:: Error connect`ECONNREFUSED`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:53:04.550

这是因为 node 应该与 memcached 交互，而不是作为*服务器*（绑定端口并接受传入连接），而是作为*客户端*。查看[net.createConnection](http://nodejs.org/api/net.html#net_net_createconnection_port_host_connectlistener)而不是 net.createServer。

# python - QT/PySide processEvents 调用锁定

> ID：14825353
> 
> 赞同：1
> 
> 时间：2013-02-12T04:26:08.940
> 
> 标签：python, qt, pyside

为什么对 processEvents 的调用会阻止长达 9 秒的无操作？

我有一个带有基于 PySide 的 QT 接口的应用程序，其中 UI 代码作为较低级别的实际应用程序逻辑上的解耦层。当用户执行一个执行可能会运行一段时间的较低级别应用程序逻辑的操作时，实际上会发生以下情况：

1.  直接在 GUI 线程上显示一个进度对话框。
2.  直接在 GUI 线程上，较低级别的逻辑启动一个工作线程。
3.  直接在 GUI 线程上，较低级别的逻辑循环更新进度对话框（间接/解耦）并通过 QtGui.qApp.processEvents() 标记应用程序事件队列（再次间接/解耦）。
4.  在工作线程上，QT 函数被调用（再次间接/解耦）以响应事件，这些通过槽/信号发生在 GUI 线程上，当 GUI 线程（如上所述）调用 processEvents() 时运行。
5.  直接在 GUI 线程上，在循环退出之前，最后一个 processEvents() 调用会阻塞大约 9 秒。这是在工作线程上的所有逻辑都结束并完成之后，并且没有更多的函数等待通过信号/插槽调用在其上运行。此调用中没有发生与我的应用程序相关的任何内容。它在那里做什么？为什么会阻塞？我尝试传入 300 毫秒的最大处理时间并查看它是否退出，但这没有什么区别。只要它愿意，呼叫就会锁定。
6.  进度对话框关闭，用户重新获得焦点。

这都分布在许多文件中，以解耦的方式实现。我将尝试提供片段来展示流程。

解耦的低层逻辑工作循环：

```
 while not completed_event.wait(0.1) and not work_state.is_cancelled():
        work_completeness, work_description = work_state.get_completeness(), work_state.get_description()
        for client in self.clients:
            if work_completeness != last_completeness or work_description != last_description:
                client.event_prolonged_action_update(client is acting_client, work_description, step_count * work_completeness)
            # THE LAST CALL TO THE NEXT LINE LOCKS UP FOR NO REASON
            client.event_tick(client is acting_client)
        last_completeness, last_description = work_completeness, work_description 
```

PySide/QT层客户端event_tick函数：

```
def event_tick(self, active_client):
    # THIS IS WHERE THE LOCK UP HAPPENS
    QtGui.qApp.processEvents() 
```

PySide/QT 层中的信号/槽使用，以在 GUI 线程上发生工作线程调用：

```
def event_pre_line_change(self, active_client, line0, line_count):
    self.pre_line_change_signal.emit((line0, line_count))

def event_post_line_change(self, active_client, line0, line_count):
    self.post_line_change_signal.emit((line0, line_count))

def event_uncertain_reference_modification(self, active_client, data_type_from, data_type_to, address, length):
    self.uncertain_reference_modification_signal.emit((data_type_from, data_type_to, address, length)) 
```

我使用信号/插槽将工作线程上的调用委托给 GUI 线程的原因是，这是 PySide/QT 需要的，因为它们将更新 UI。

如果您想更深入地挖掘复制案例：

*   根据 GitHub 项目自述文本下载并运行[代码。](https://github.com/rmtew/peasauce)
*   从 mega下载[测试文件](https://mega.co.nz/#!gNUxWDzZ!DJ-owFOfmvx9Gr9Kqc9dXGJrUMQB3Pa3IeHsJtWEpyg)“NEURO”（<200KB）（抱歉，这是最容易上传的网站）。
*   在 PeaSauce 中加载 NEURO。
*   转到偏移量 0x1A19E (CTRL-G)
*   将数据类型更改为代码（菜单：编辑/更改地址数据类型/代码）
*   观察进度对话框来来去去。
*   观察~9 秒锁定。

# grails - 无法安装 grails 插件 Jaces - 无法解决

> ID：14825359
> 
> 赞同：0
> 
> 时间：2013-02-12T04:26:29.610
> 
> 标签：grails

尝试将此行放在 BuildConfig.groovy 的插件部分中：

```
build ":jaces:1.7.2.2" 
```

并添加了回购

```
mavenRepo "http://jaces.googlecode.com/svn/" 
```

收到此错误：

```
| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- org.grails.plugins:jaces:1.7.2.2 
```

如果我取出构建指令并尝试 install-plugin 命令，也会出现错误。

使用 grails 2.2

任何帮助，将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T19:01:47.777

grails 门户上的信息已经过时。我正在尝试更新它。请参阅[http://jaces.org](http://jaces.org)。

在那里，您将找到从 google 代码下载插件二进制文件并安装到 Grails 应用程序的说明。

当 Grails 门户页面更新时，我将发布另一条消息。

谢谢

# java - Slick2D 音乐问题

> ID：14825360
> 
> 赞同：0
> 
> 时间：2013-02-12T04:26:36.333
> 
> 标签：java, audio, slick2d

我是 Slick2D、LWJGL 等的新手。无论如何，当按下退出按钮时，我一直在尝试制作一个简单的游戏内菜单。一切正常，但是当我按下退出按钮时，我希望当前音乐暂停并在菜单打开时播放声音。然后在菜单关闭时继续播放音乐。但是，当我确实按下逃生键时，它会播放声音并且音乐停止，但是当我再次按下逃生键时，音乐不会恢复。有什么建议么？

```
if(input.isKeyPressed(Input.KEY_ESCAPE)) {
        //Toggles Menu Open/Close
        inGameMenu = !inGameMenu;

        //Toggle Music to shut off
        pauseMusic = !pauseMusic;

        //Opacity trick
        InGameMenu.resetOpacity = !InGameMenu.resetOpacity;

        //toggle menu open/close
        InGameMenu.closeMenu = !InGameMenu.closeMenu;

        if(pauseMusic){
            if(Sound.bgMusic.playing()){
                Sound.bgMusic.pause();
            } 
                ObjectSounds.menuOpen.play();

        } else {
            if(ObjectSounds.menuOpen.playing()) {
                ObjectSounds.menuOpen.stop();
            }
            if(!Sound.bgMusic.playing())
                Sound.bgMusic.play();
        }

        System.out.println(pauseMusic);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:08:06.487

原来音乐是它自己的专用音频通道，但声音是另一个。

# python - 在ndb中使用get_by_id获取多个实体

> ID：14825361
> 
> 赞同：10
> 
> 时间：2013-02-12T04:26:40.130
> 
> 标签：python, google-app-engine, app-engine-ndb

使用旧数据库，我可以调用`Model.get_by_id([1, 2, 3])`以获取实体列表。

Ndb`Model.get_by_id`不支持将 id 列表作为参数。复制旧功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T07:38:25.973

您使用获取键列表的函数 get_multi。

```
objects = ndb.get_multi([ndb.Key(Model, k) for k in ids]) 
```

# assembly - 在汇编编程中执行 2 的补码

> ID：14825368
> 
> 赞同：2
> 
> 时间：2013-02-12T04:27:11.863
> 
> 标签：assembly, tasm

我正在尝试制作一个用负数执行算术运算的计算器。此处的此代码用于将输入的数字转换为 ASCII 值。如果输入为负数，我想修改此程序以执行 2 的补码转换，它应该会产生所需的输出。

目前这是我的计算器的流程：

-1+2=66675（应该是1）

-1-1=656745（应该是-2）

-1*-1=66757（应该是1）

有人建议我应该修改这部分代码以执行我想要的。我已经尽力了，但它不起作用。你能帮我做这个吗？哦，顺便说一句，我真的是组装新手..

```
CONVERT_ASSCII PROC NEAR

    MOV AH , BYTE PTR RESULT        ;MOVE FIRST TWO BYTE OF RESULT TO AX
    MOV AL , BYTE PTR RESULT + 1

    ;AT FIRST CHECK IF AX IS POSITIVE OR NEGETIVE
    TEST EAX , 8000H                    ;CHECK THE LAST BIT . IF THATS 1 THEN AX IS NEG , OTHERWISE THATS POSITIVE
    MOV EDI , 0                     ;AT FIRST SET OUR FLAG TO ZERO
    JZ EAX_POSITIVE                 ;AX IS POSITIVE
    NEG EAX                         ;CALCULATE NEGETIVE OF AX 
    MOV EDI , 1                     ;DI INDICATES THAT AX IS NEG

EAX_POSITIVE :
    MOV ECX , 10
    LEA ESI , ASSCII_NUM
    ADD ESI , 29                        ;MOVE TO THE LAST SPACE

    MOV EBP , 0                     ;THIS IS THE COUNTER OF CHARS

    ASSCII_LOOP : MOV EDX , 0
                  DIV ECX 
                  OR DL , 30H       ;MAKE REMINDER ASSCII
                  MOV [ESI] , DL        ;PUT ASSCII IN ASSCII_NUM
                  DEC ESI
                  INC EBP           ;ADD ONE TO THE CHAR'S COUNTER
                  CMP EAX , 0       ;IF AX > 0 GOTO 
                  JA ASSCII_LOOP    ;ASSCII_LOOP

    CMP EDI , 0                     ;CHECK IF THAT WAS A NEGETIVE NUMBER
    JZ REST                         ;IF THATS NOT NEGETIVE GOTO REST
    MOV DL , '-'
    MOV [ESI] , DL                  ;ADD A MINES SIGN TO THE STRING
    DEC ESI
    INC EBP

REST :
    LEA EDI , ASSCII_NUM

    ;MOVE THE ASSCII CODE TO IT'S RIGHT PLCAE IN ASSCII_NUM
    ORDER_ASSCII : INC ESI
                   MOV AL , BYTE PTR [ESI] 
                   MOV BYTE PTR [EDI] , AL
                   INC EDI
                   DEC EBP
                   CMP EBP , 0
                   JA ORDER_ASSCII

    MOV CL , '$'           
    MOV BYTE PTR [EDI] , CL         ;AT LAST PUT A DOLLOR SIGN AT THE END OF ASSCII_NUM

    RET
CONVERT_ASSCII ENDP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:51:41.123

理解问题，然后应用语言。我会先用 C 语言编写它，然后再用汇编语言编写它。

你提到了 ASCII，但我没有看到你从 ascii 转换。

例如，当您说“-1+2”时，这是否意味着您的输入是那些项目的 ASCII 字符

```
0x2D,0x31,0x2B,0x32 
```

您可以解析的一种方法是：

您需要将 0x2D 识别为减号操作，然后点击数字 1，即 ascii 中的 0x31。假设这些是十进制数字，然后去掉 0x30，例如 0xF。下一个字符是 +、0x2B、运算符，所以现在您可以返回并获取完整的数字 1 并将之前的运算符应用于它。但是您需要的寄存器大小是这些 8 位值还是 16 位或 32 位或 64 位？一个 8 位的 1 是 0x01，16 是 0x0001，等等，当你否定你得到 0xFF 或 0xFFFF 或 0xFFFFFFFF 等时。所以当前的操作符是一个 +，0x2B，下一个字符是 0x32 数字 2，并用 0xF 提取2.下一个字符是字符串的结尾，所以现在应用操作-1，如果8位为0xFF，加2，如果8位为0xFF+0x02 = 0x101，则为0x02，当剪裁为8位时为0x01，结果-1+ 2 = 1，然后你必须把它恢复为ascii，

```
"-1*-1" is 0x2D,0x30,0x2A,0x2B,0x30 
```

当您在 0x2A 和 0x2B 一行中看到两个运算符时，问题就来了，在这种情况下，作为人类，我们知道这意味着在这两种情况下，减号都会否定后面的数字，然后执行乘法运算。

如果您支持更大的数字，也必须处理它们。

```
"12+34" 0x31,0x32,0x2B,0x33,0x34 
```

0x31 是从 0x1 中去除的数字，但 0x32 也是一个数字，因此将 0x1 乘以 10，然后将从 0x32 中去除的 2 相加，得到 0xC，无论是累积该数字（十进制 12），然后是加号 0x2B，然后是其他数字的处理方式相同，将 0x33 中的 3 乘以 10，将 0x34 中的 4 相加，得到十进制 34（0x22），然后将这两个数字相加 0x0C + 0x22 = 0x2E（十进制 46）。在这种情况下，我假设所需的结果是 0x34,0x46，即“46”的 ascii 字符串。要到达那里，尽管您需要将 0x2e 除以 10，因为它大于 10，要获得第一个数字 4，余数（模 10）是 6，即不大于 10，因此您完成了转换，使 6一个 0x36。

如果您的目标有 NEG，则使用 AND、OR、ADD、NOT 和 NEG 操作（否则使用 not 并加 1）。请记住，如果您没有直接的 NOT 指令，则与所有的 xoring 是 NOT 操作。（基本上是您想要定位的指令集中可用的基本操作）用您非常熟悉的编程语言或至少支持这些类型的操作和字节处理的编程语言实现和测试您的算法，然后让算法工作并完成只需将高级语言中的每个 and、add、not、sub 等操作转换为汇编。它可能（将）在高级语言中对解决方案进行多次迭代，然后才能类似于易于转换为汇编的形式。如果您现在的组装能力不强，那么完成这项任务所需的复杂性和时间就会成倍增加。尝试同时创建和调试算法并学习汇编并不是两倍的工作量，而是四倍或更多倍的工作量。分而治之。在受控环境中开发算法，然后用目标语言实现。

-1+2=66675（应该是 1）0xFFFF...FFFF + 0x000...00002 = 0x1000000...000001，剪辑到 0x0000...00001（我正在使用任意寄存器大小）66675 = 0x10473。不太清楚你是怎么得到这样的数字的。

-1-1=656745（应该是-2）0xFFFFF....FFFFF + 0xFFFFFF...FFFFF = 0xFFFFFFF...FFFFFFE。656745 = 0xA0569

-1*-1=66757（应该是1）

我很想知道这些的结果是什么

```
-1+1
-1+3
-2+1
-2+2
-1*-2
-1*-3
-2*-1
-2*-2 
```

正在使用您的计算器。当您这样做时，您可能会开始在结果中看到一种模式。

把问题分成两半，你确定你正在为你的数学运算计算正确的结果，而且只有 ascii 的结果被破坏了吗？还是 ascii 的结果正常工作并且数学运算被破坏了？十六进制很容易，八进制更容易转换，你不需要做反向的事情来快速检查，看到结果后可以手动反转它

```
while(ax)
{
   dl = (ax&7)+0x30;
   string[ptr++]=dl;
   ax>>=3;
}
string[ptr]=0; 
```

然后显示字符串。手动反转字符串，使用计算器将八进制转换为十进制并检查结果。负二 (-2) 将是 0xFFFFF....FFFFE，因此您会看到八进制，以相反的顺序 67777777777....7777777。因此，一旦您反转字符串，计算器就会让您得到十六进制值 0xFFFFF....FFFE。使用计算器应该很容易看到积极的结果。

（是的，我很清楚您正在使用带有 16 位寄存器的 x86）

# api - 用于高级搜索/过滤的 .Net WebAPI URI 约定

> ID：14825370
> 
> 赞同：4
> 
> 时间：2013-02-12T04:27:21.987
> 
> 标签：api, rest, asp.net-web-api

我对微软的 REST 和 WebAPI 比较陌生。我们正在实现一个集线器 REST 服务，它将容纳多种类型的对象获取和设置。作为该项目的负责人，我的任务是提出我们要使用的正确 Uri 设计。我想知道关于战争的想法更好。是的，我在没有使用“标准”一词的情况下明确分阶段进行。

以下是我和我的团队目前正在娱乐的选项：

```
Http://servername/API/REST/Ldap/AD/employees?username=jsmith 
Http://servername/API/REST/Ldap/AD/employee/UserName?searchTerm=jsmith (this seems RPC to me)
Http://servername/API/REST/Ldap/AD/employees/getusername?searchterm?jsmith 
```

我们还创建了一个肥皂版本，因此其余的都在 Uri 中。

感谢您的输入

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-12T05:05:09.393

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-02T15:57:47.463

对于反对党的评论，这是我前段时间整理的。

[https://groups.google.com/d/msg/servicestack/uoMzASmvxho/CtqpZdju7NcJ](https://groups.google.com/d/msg/servicestack/uoMzASmvxho/CtqpZdju7NcJ)

```
public class QueryBase
{
    public string Query { get; set; }
    public int Limit { get; set; }
    public int Offset { get; set; }
}

[Route("/v1/users")]
public class User : IReturn<List<User>>
{
    public string Id { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
}

public class RequestFilterAttribute : Attribute, IHasRequestFilter
{
    #region IHasRequestFilter Members

    public IHasRequestFilter Copy()
    {
        return this;
    }

    public int Priority
    {
        get { return -100; }
    }

public void RequestFilter(IHttpRequest req, IHttpResponse res, object requestDto)
{
    var query = req.QueryString["q"] ?? req.QueryString["query"];
    var limit = req.QueryString["limit"];
    var offset = req.QueryString["offset"];

    var user = requestDto as QueryBase;
    if (user == null) { return; }
    user.Query = query;
    user.Limit = limit.IsEmpty() ? int.MaxValue : int.Parse(limit);
    user.Offset = offset.IsEmpty() ? 0 : int.Parse(offset);
    }

#endregion
}

[Route("/v1/users/search", "GET")]
[RequestFilter]
public class SearchUser : QueryBase, IReturn<PagedResult<User>> { }

public class UsersService : Service
{
    public static List<User> UserRepository = new List<User>
    {
        new User{ Id="1", FirstName = "Michael", LastName = "A", Email = "michaelEmail" },
        new User{ Id="2", FirstName = "Robert", LastName = "B", Email = "RobertEmail" },
        new User{ Id="3", FirstName = "Khris", LastName = "C", Email = "KhrisEmail" },
        new User{ Id="4", FirstName = "John", LastName = "D", Email = "JohnEmail" },
        new User{ Id="4", FirstName = "Lisa", LastName = "E", Email = "LisaEmail" }
    };

    public PagedResult<User> Get(SearchUser request)
{
    var query = request.Query;
    var users = request.Query.IsNullOrEmpty()
                    ? UserRepository.ToList()
                    : UserRepository.Where(x => x.FirstName.Contains(query) || x.LastName.Contains(query) || x.Email.Contains(query)).ToList();

    var totalItems = users.Count;
    var totalPages = (int)Math.Ceiling((decimal)totalItems / (decimal)request.Limit);
    var currentPage = request.Offset;
    users = users.Skip(request.Offset * request.Limit).Take(request.Limit).ToList();
    var itemCount = users.Count;

    return new PagedResult<User>
        {
            TotalItems = totalItems,
            TotalPages = totalPages,
            ItemCount = itemCount,
            Items = users,
            CurrentPage = currentPage
        };
}
} 
```

# ios - 如何在 CoreMIDI 中监听传出的 MIDI 信息？

> ID：14825371
> 
> 赞同：0
> 
> 时间：2013-02-12T04:27:33.983
> 
> 标签：ios, objective-c, macos, midi, coremidi

有没有办法获取设备的目标端点并监控通过 CoreMIDI 发送给它的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:25:43.150

[这是一个非常好的免费 MIDI 监视器](http://www.snoize.com/MIDIMonitor/)

我还使用 coreMIDI 为 iMac 和 iPhone 构建了一个带有 Xcode 的 MIDI 监视器。我唯一的问题是 MIDI Thru 的“MIDIThruConnectionCreate”。当然，我可以将接收到的 MIDI 数据包发送到 MIDI 输出，但这不是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T20:32:34.257

MIDIThruConnection 就是为了这个。有关详细信息，请参阅 CoreMIDI.framework 中的 MIDIThruConnection.h。

# java - 使用 InputStream 读取文本文件

> ID：14825374
> 
> 赞同：24
> 
> 时间：2013-02-12T04:27:50.830
> 
> 标签：java, android, inputstream

如何读取像在 android 应用程序中的文本文件：

```
"1.something written
2.in this file
3.is to be read by
4.the InputStream
..." 
```

所以我可以返回一个字符串，如：

```
"something written\nin this file\nis to be read by\nthe InputStream" 
```

我想到的是（伪代码）：

```
make an inputstream
is = getAssest().open("textfile.txt");  //in try and catch
for loop{
string = is.read() and if it equals "." (i.e. from 1., 2., 3\. etc) add "/n" ...
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-12T04:31:27.593

尝试这个

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;
import java.io.*;

public class FileDemo1 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try {
            playWithRawFiles();
        } catch (IOException e) {
            Toast.makeText(getApplicationContext(), "Problems: " + e.getMessage(), 1).show();
        }
    }

    public void playWithRawFiles() throws IOException {      
        String str = "";
        StringBuffer buf = new StringBuffer();            
        InputStream is = this.getResources().openRawResource(R.drawable.my_base_data);
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            if (is != null) {                            
                while ((str = reader.readLine()) != null) {    
                    buf.append(str + "\n" );
                }                
            }
        } finally {
            try { is.close(); } catch (Throwable ignore) {}
        }
        Toast.makeText(getBaseContext(), buf.toString(), Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-12T04:38:01.210

用于`BufferedReader`读取输入流。从`BufferedReader`字符输入流中读取文本，缓冲字符以提供字符、数组和行的有效读取。`InputStream`表示字节的输入流。`reader.readLine()`将逐行读取文件。

```
BufferedReader reader = new BufferedReader(new InputStreamReader(in));
StringBuilder out = new StringBuilder();
String line;
while ((line = reader.readLine()) != null) {
    out.append(line);   // add everything to StringBuilder 
    // here you can have your logic of comparison.
    if(line.toString().equals(".")) {
        // do something
    } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-23T07:58:12.803

```
 File fe=new File(abc.txt);
                FileInputStream fis=new FileInputStream(fe);
                byte data[]=new byte[fis.available()];
                fis.read(data);
                fis.close();
                String str=new String(data);
                System.out.println(str); 
```

# javascript - 使用 jQuery 更改移动设备的图像

> ID：14825389
> 
> 赞同：0
> 
> 时间：2013-02-12T04:29:20.610
> 
> 标签：javascript, jquery, mobile

我正在使用一个脚本来创建社交墙或我的所有社交订阅源的墙。该脚本具有过滤社交网络的能力，并在顶部有图标。它工作得很好，但在移动设备上，图标非常小。我考虑过使用 CSS 媒体查询来使它们更大，但这会扭曲图标，因此我必须用更大的图标替换图标。

问题是脚本正在动态生成代码，我无法编辑此代码。生成的代码如下所示：

```
<li class="active f-facebook">
  <a data-filter=".dcsns-facebook" data-group="dc-filter" rel="facebook" href="#filter">
     <img alt="" src="/images/icons/facebook.png">
  </a>
</li> 
```

脚本加载后，我需要将图像更改为更大的版本，并且仅适用于特定尺寸的移动设备。

我不知道如何尝试使用 jQuery 来执行此操作。有人可以指出我正确的方向或帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:46:04.233

我会告诉你使用 CSS 而不是脚本，因为一些运营商习惯在他们的移动设备中禁用 javascript，而且并不是每个设备都有相同的脚本行为。如果您使用 CSS，您需要在徽标中添加一个类并按比例设置 with 和/或 height。例如，如果设置为：40%，则可以设置高度：'auto'。

我希望这能有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:48:41.637

也许使用媒体查询？它们允许您针对特定设备属性指定 css。

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# c# - 在静态 Web 方法中使用 Request 和 Response 变量

> ID：14825391
> 
> 赞同：2
> 
> 时间：2013-02-12T04:29:26.497
> 
> 标签：c#, asp.net, .net-4.0, facebook-c#-sdk, webmethod

这是我的代码，

```
[WebMethod]
public static bool FirstAccess()
{
    string app_id = "139295982898884";
    string app_secret = "b5d2a88b56898610d54da2af498e3220";
    //string post_login_url = "http://dev.fitbook.com.asp1-23.ord1-1.websitetestlink.com/v4/FitbookContest.aspx";
    string post_login_url = "http://localhost:4327/FitbookContest.aspx";
    string scope = "publish_stream,manage_pages";

    string code = HttpContext.Current.Request["code"] ?? "";

    try
    {
        if (code == "")
        {
            string dialog_url = "http://www.facebook.com/dialog/oauth?" + "client_id=" + app_id + "&redirect_uri=" + HttpContext.Current.Server.UrlEncode(post_login_url) + "&scope=publish_stream";
            // HttpContext.Current.Response.Write(dialog_url);
            //HttpContext.Current.Response.Redirect(dialog_url, true);
            return false;
        }
        else
        {
            Dictionary<string, string> tokens = new Dictionary<string, string>();

            string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}", app_id, HttpContext.Current.Request.Url.AbsoluteUri, scope, HttpContext.Current.Request["code"].ToString(), app_secret);

            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                StreamReader reader = new StreamReader(response.GetResponseStream());
                string vals = reader.ReadToEnd();
                foreach (string token in vals.Split('&'))
                {
                    //meh.aspx?token1=steve&token2=jake&...
                    tokens.Add(token.Substring(0, token.IndexOf("=")), token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                }
            }
            access_token = tokens["access_token"];
            TestFB.GetProfilePic(code);
            return true;
        }
    }
    catch (Exception ex)
    {
        return false;
    }
} 
```

这里的线条像

```
HttpContext.Current.Request["code"] ?? ""; 
```

和

```
HttpContext.Current.Response.Redirect(dialog_url, true); 
```

不工作。那么有没有替代的解决方案呢？有什么方法可以使用它吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T05:11:01.600

你试过这个吗，

```
string dialog_url = "~http://www.facebook.com/dialog/oauth?" + "client_id=" + app_id + "&redirect_uri=" + HttpContext.Current.Server.UrlEncode(post_login_url) + "&scope=publish_stream"; 
```

并且，redirect as false 表示当前页面的执行是否应该终止

```
HttpContext.Current.Response.Redirect(dialog_url,false); 
```

试试这个：

```
string code = HttpContext.Current.Request["code"];

if (code==null)
{
  // code
} 
```

我认为问题就在于此。您没有指定访问令牌

```
string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}", app_id, HttpContext.Current.Request.Url.AbsoluteUri, scope, HttpContext.Current.Request["code"].ToString(), app_secret); 
```

# c# - 使用双打的奇怪行为

> ID：14825392
> 
> 赞同：1
> 
> 时间：2013-02-12T04:29:31.597
> 
> 标签：c#, .net-4.0, double, switch-statement

我有这个 switch 语句，每次将双 itemCost（最初为 0.80）减少 0.20。当它达到 0.00 我想执行一些代码。它工作正常，直到它达到 0.00 但不是 0.00 itemCost 变为 5.55111512312578E-17。

当我按下执行 switch 语句的按钮时， itemCost 的输出值为：

```
0.60, 0.40, 0.20, 5.55111512312578E-17, -0.20, -0.40 etc 
```

代码：

```
switch (codeString)
{
    case "20":
    {
        userAmount = userAmount + 0.20;
        itemCost = itemCost - 0.20;
        Console.WriteLine("" + itemCost);
        if (itemCost == 0.00)
        {
            giveChange();
            labelInstructions.Text = "giveChange";
        }
        else
        {
            string tempString = string.Format("{0:N2}", itemCost);
            labelInstructions.Text = "Please insert £" + tempString;
        }
        break;
    }
} 
```

任何人都知道为什么会发生这种奇怪的行为以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:34:05.560

**由于您正在处理货币，因此您应该切换并使用[Decimal 数据类型](http://msdn.microsoft.com/en-us/library/xtba3z33%28v=vs.110%29.aspx)。**

当您接近 0.0 时，浮点数和双精度数在处理加法和减法时会遇到非常非常奇怪的行为。

在所有平台上进行编程时，当您需要绝对精度时，对浮点数学非常警惕是至关重要的。例如 ，由于显卡、图形库和性能限制，游戏开发人员*被迫使用浮点数。*通常，当他们想要查看一个值是否为零时，而不是与零进行比较，他们会执行以下操作（伪代码）

```
if AbsoluteValue(MyValue) < 0.001 then  //assume MyValue is zero. 
```

如果你绝对不能切换到十进制，你可以做类似的事情。如果 MyDouble 在零的 Epsilon 范围内，其中 Epsilon 是 0.00001 附近的常量，则将您的值强制为零。99% 的情况下不建议这样做。你真的必须使用 Decimal 作为货币，否则你最终会向客户收取错误的金额或遭受看似随机的错误。

# magento - 不同客户群的表率

> ID：14825393
> 
> 赞同：2
> 
> 时间：2013-02-12T04:29:34.653
> 
> 标签：magento

有没有办法为 Magento 中的不同客户组定义不同的表率？

我想创建组 ABC 并使其具有与其他用户不同的运费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:24:50.623

使用任何运输模块并自定义方法（[Matrixrate](http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension-certified-bug-free.html)是非常好的模块）

并在（ ../model/Carrier/{ShippingMethod}.php ）中修改 collectRates() 方法

```
public function collectRates(Mage_Shipping_Model_Rate_Request $request){
.....
$customer = Mage::helper('customer')->getCustomer();
$group = null;
if($customer)
{
    $group = $customer->getGroupId();
}
if($group == 'ID'){
// do the logic here 
}else{
return false; // disable the shipping method
}
......
} 
```

检查客户群和退货率的方法或错误；

# java - 何时取消引用 java web mvc 中的对象

> ID：14825394
> 
> 赞同：0
> 
> 时间：2013-02-12T04:29:43.233
> 
> 标签：java, jakarta-ee, memory-management, memory-leaks

我正在研究spring web mvc，最近遇到了java.lang.OutOfMemoryError: Java heap space。

所以，我正在阅读它，而我正在做的主要错误是我没有尊重使用过的对象。所以 GC 并没有清理大量内存。

现在的问题是何时取消引用它。

这是基本的输出流程：

```
From front end user sends a request

server calls a library with the users request

library returns it a big chunk of array of results.

server forwards it to front end. 
```

现在直到这一点我无法取消引用结果数组，因为我需要结果对象。我对么 ？因此，当用户发送新请求时，我应该清理结果数组并使用新请求调用库。

我还使用 -XX:+HeapDumpOnOutOfMemoryError 来获取转储文件。但我没有在项目文件夹中看到转储文件。在日志中，我看到创建了转储文件。有没有人遇到过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:59:44.883

[如果没有http://sscce.org/](http://sscce.org/)，将很难为您提供帮助。JVM 为您执行 GC，如果您的对象具有明确定义的范围，则它们应该自动进行 GC。

我建议您从增加堆内存开始弄清楚这些：

结果数组的范围是什么（全局或仅限于方法调用层次结构，即通过方法调用堆栈传递到前端）？

如果它具有全局范围，它是单例实例的一部分还是每个请求实例创建的？Result 数组中存储了哪些对象，它们是否在代码中的其他任何地方引用？

您可以使用 Jhat 来获取对象引用图并找出还有谁在引用这些对象（免责声明：如果存储在数组中的对象包含对其他对象的引用，这将变得一团糟，这通常是这种情况）

[识别未收集垃圾的对象的更好方法？](https://stackoverflow.com/questions/4495849/better-ways-to-identify-objects-not-getting-garbage-collected)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:29:51.680

一般这类问题的解决方法是：

1.  （明显）使用 增加最大堆设置`-Xmx`，获得更大的硬件。这种方法可能不可扩展，但可以为问题提供短期解决方案
2.  问问自己，你真的需要*一大块*吗？如果不尝试请求更小的块来节省堆使用。确保您对对象的引用没有超过您应该持有的时间。一旦您知道不再需要您的变量，请将其设置为 null 以便它们可以被垃圾收集。

# java - 如何将表单的值放入对象并将对象发送到控制器

> ID：14825397
> 
> 赞同：0
> 
> 时间：2013-02-12T04:29:51.083
> 
> 标签：java, jsp, struts2

我有一个用于将用户详细信息提交给操作的 jsp 表单，因为我不希望操作类扩展用户类，我需要创建一个输入对象并将其发送到我的操作，但不确定如何。

*   用户类有很长的参数列表，如果我扩展它，我应该将它们全部作为我的 Register 方法的参数。

形式

```
 <s:form action="Register">

                <s:textfield name="fname" label="Name"/>
                <s:textfield name="lname" label="Surname"/>
                <s:textfield name="mobile" label="Mobile"/>
                   .....
                <s:submit validate="true"></s:submit>
    </s:form>

 <jsp:useBean id="obj" class="com.Users"/>
 <jsp:setProperty property="*" name="obj"/> 
```

行动

```
 @Action
  public class Registration{
    public boolean Register(User obj)
    {
           .....
    }
    .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:38:57.617

您可以创建一个包含所有字段的 Pojo 类，并通过 getParameter() 方法设置与 Pojo 类的每个字段对应的值。之后，您可以直接将 Pojo 类 obj 直接传递给您的 Registration 方法。

# java - 文件到字节数组

> ID：14825398
> 
> 赞同：0
> 
> 时间：2013-02-12T04:30:05.977
> 
> 标签：java, bytearray

我使用过这个主题：[Java 中的 File to byte[]](https://stackoverflow.com/questions/858980/file-to-byte-in-java) 这是我的代码：

```
try {
  Path path1 = Paths.get(path + fileName);
  byte[] fileAsByte = Files.readAllBytes(path1);
  System.out.println("Byte : " + fileAsByte.toString());
} catch (FileNotFoundException e) {
  System.out.println("File Not Found.");
  e.printStackTrace();
} catch (IOException e1) {
  System.out.println("Error Reading The File.");
  e1.printStackTrace();
} catch (OutOfMemoryError e3) {
  System.out.println("Out of Memory");
  e3.printStackTrace();
  } 
```

此代码没有触发任何异常，但输出仍然是：

```
Byte : [B@60f17a2f 
```

这对我来说似乎很无效。我很确定我犯了一个愚蠢的错误，但我已经尝试解决它三个小时了，我可以用一些新的眼光来看待它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:31:12.610

您不能将数组直接转换`String`为人眼并使其可读。它正在打印`[`（意思是“数组”），然后`B`是（for `byte`），然后`@`是它的身份哈希码。

要获取数组中的字节列表，请改用静态[`Arrays.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString(byte[]))方法：

```
System.out.println("Byte : " + java.util.Arrays.toString(fileAsByte)); 
```

（如果字节代表输出字符串的字符，请使用[@iTech](https://stackoverflow.com/users/1813858/itech)的解决方案。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T04:31:49.673

您应该创建一个`String`用您的实例初始化的实例`byte[]`，例如

```
System.out.println("Byte : " + new String(fileAsByte)); 
```

您还可以指定编码，例如`new String(fileAsBytes,"UTF-8");`

# mysql - 大查询会影响性能

> ID：14825399
> 
> 赞同：1
> 
> 时间：2013-02-12T04:30:14.047
> 
> 标签：mysql, sql

嗨，我通过加入一些 8 个表来进行大查询，我将使用该单个查询本身获取所有详细信息。

现在我想知道将所有表连接在一起是否很好，或者我们可以运行单独的查询以使用主查询中的 id 获取循环内的详细信息？而且，在循环内运行查询好吗？

下面是我正在使用的查询，

```
SELECT node.nid AS nid,
       node.uid,
   node.title AS node_title, 
   og.og_description AS og_og_description,
   node.created AS node_created,  
   og.og_selective AS og_og_selective, 
tn.tid, 
td.name as groupcategory,
(select count(ou.uid) from og_uid ou,users u where ou.uid=u.uid and u.status=1 and ou.is_active=1 and ou.nid=node.nid) as ucount,
f.filepath,
CONCAT(statusbook_users.first_name,' ',statusbook_users.last_name) AS users_name
FROM node node 
LEFT JOIN og og ON node.nid = og.nid 
INNER JOIN content_type_group ctg ON (node.nid = ctg.nid AND ctg.field_cn_group_type_value IS NULL)
LEFT JOIN files f ON (ctg.field_group_image_fid = f.fid)
INNER JOIN users users ON node.uid = users.uid
INNER JOIN statusbook_users statusbook_users ON users.uid= statusbook_users.uid
INNER JOIN og_uid og_uid ON og.nid=og_uid.nid 
INNER JOIN term_node tn ON node.nid=tn.nid 
INNER JOIN term_data td ON tn.tid=td.tid 
WHERE (node.status <> 0) AND (node.type IN ('group'))
AND og_uid.is_active=1 AND og_uid.uid=65 
```

在我的本地系统中执行上述查询的时间是 12824.59 毫秒，当我在生产服务器中运行相同的查询时，它花了 217.34 毫秒

有什么办法可以优化上面的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:36:55.890

通常最好进行一次大型查询并让 DBMS 优化器努力找出完成查询的最快方法。在这方面它通常比你好得多。

但是要确定，您应该同时尝试版本和配置文件。

# list - Haskell 函数，它获取一对列表和一个列表并返回一个列表

> ID：14825402
> 
> 赞同：-2
> 
> 时间：2013-02-12T04:31:35.823
> 
> 标签：list, haskell

我必须编写一个执行以下操作的 haskell 函数：

`mySub`它接受一个对列表和一个值列表并返回一个新列表，其中对中的第一个值的每次出现都被该对中的第二个值替换。替换应按对的顺序进行。例如，`mySub [('a','b'), ('c','d')]` “abcd”应该给出“bbdd”并且`mySub [(1,2), (2,3)] [1,2,3,4]`应该给出`[3,3,3,4]`.

我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:49:16.637

首先尝试解决这个问题：编写一个函数，该函数`oneSub`接受一个元组和一个列表，并将列表中与元组中的第一个元素相等的每个元素替换为第二个元素。所以`oneSub ('h','c') "hat"`会评估为`"cat"`.

一个你写这个函数，试着用它来实现`mySub`

# java - 如何获取子div id，它是一个父div下的直接子？

> ID：14825406
> 
> 赞同：0
> 
> 时间：2013-02-12T04:32:14.643
> 
> 标签：java, html, css, css-selectors, selenium-webdriver

如果我有如下所示的标记，我想从其父 div 中单独访问第 8 个 div 并使用 for 循环打印其 id。

```
<div class=abc>
  <div id="parent">
    <div id="one">
       <div id=........</div>
       <div id=........</div>
    <div id="two">
       <div id=........</div>
       <div id=........</div>
    <div id="three">
       <div id=........</div>
       <div id=........</div>
    <div id="four">
       <div id=........</div>
       <div id=........</div>
    <div id="five">
       <div id=........</div>
       <div id=........</div>
    <div id="six">
       <div id=........</div>
       <div id=........</div>
    <div id="seven">
       <div id=........</div>
       <div id=........</div>
    <div id="eight">
       <div id=........</div>
       <div id=........</div>
  </div>
</div> 
```

但是，当我打印（在 Java 中）时，八个 div 下的每个 div id 也在打印。如何在一个 for 循环中只获取每个八个 div 的 id？我正在使用 selenium Web Driver 自动化网站。我试过这样：

```
List<WebElement> eightdivs = driver.findElements(By.cssSelector("#abc div:nth-child(n)"));
     for(WebElement eachdiv : eightdivs)
      {
         System.out.println(eachdiv.getAttribute("id"));
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:45:27.210

选择器：

```
#abc div:nth-child(n) 
```

选择`div`在`#abc`. 该空间是一个后代选择器，这意味着父选择器可以是其中的`#abc`任何东西。这意味着您的*所有*`div`s 都应该被选中，因为它们都是其父母的第 n 个孩子（尽管您的父元素是`.abc`or `#parent`，但不是`#abc`，因此您使用的选择器实际上根本不会返回*任何内容*）。

您应该更改`#abc`为，直接在 下`#parent`使用子选择器，并删除该部分，因为它是多余的：`>``#parent``:nth-child(n)`

```
List<WebElement> eightdivs = driver.findElements(By.cssSelector("#parent > div"));

for (WebElement eachdiv : eightdivs)
{
    System.out.println(eachdiv.getAttribute("id"));
} 
```

# sockets - 如何在java中压缩照片以通过UDP套接字发送它

> ID：14825409
> 
> 赞同：0
> 
> 时间：2013-02-12T04:32:51.760
> 
> 标签：sockets, serversocket, image-segmentation

朋友们！我想通过 Java 中的 UDP scoket 截取远程 PC 的屏幕截图。但是，照片大小有问题！UDP 数据包支持最大 64 kb，我有超过 150 kb 的照片。

总体思路是实时查看远程PC的屏幕！！！如果您知道如何获得这种结果，请帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:25:04.390

好吧，首先我建议使用 TCP 而不是 UDP，但无论哪种方式，为什么不创建屏幕部分？将屏幕分成 20 个左右的部分（或者地狱甚至 200 个），并且只发送自上次发送以来已更改的部分。

此外，您正在将 64Kb 到 150KB 的位与字节进行比较。

# c# - 如何从 .NET 网站拨打电话？非常旧的解决方案有效，需要升级到服务器控制

> ID：14825412
> 
> 赞同：1
> 
> 时间：2013-02-12T04:33:14.970
> 
> 标签：c#, .net, vb.net, telephony, tapi

目前，我们有一个网站，它依赖于 Microsoft TAPI 接口从 .NET 网站内拨打电话。它使用 VBScript 和标签，并绑定到母版页。我们正在寻找的是一个包含所有这些代码的服务器控件，并且只有在它包含在网页上时才会运行。

旧页面执行以下操作：

```
<object classid="clsid:21D6D48E-A88B-11D0-83DD-00AA003CCABD" id="TAPIOBJ"></object>
<object classid="clsid:E9225296-C759-11d1-A02B-00C04FB6809F" id="MAPPER"></object> 
```

在这些代码行之后是包含用于初始化 Microsoft TAPI 3.0 库的 VBScript 和一些要拨号的函数的标记。拨号器控件创建对其中一个函数的调用以拨入 onclick 事件。

本质上，我们希望创建相同类型的控件，而无需将标签直接嵌入到页面的 HTML 中。我们也不希望在其中使用 VBScript。理想情况下，我们需要一个与 TAPI 3.0 API 一起工作并获得对客户端电话的访问权限的服务器控件。这可能吗？由于我们谈论的是“服务器”控件，因此我持怀疑态度。我可以很容易地在项目中创建一个用户控件，但是我们希望将它放在一个控件框架中以便在其他地方使用而不是复制它。

我一直在看这篇关于[如何创建](http://www.codeproject.com/Articles/39132/Server-Control-for-Injection-of-Client-ActiveX-Con)用于注入客户端 ActiveX 控件的服务器控件的文章，但这是否正确？

更新：这是 VBScript：

这就是标签中的内容：

```
<script type="text/vbscript"  LANGUAGE="VbScript">

'Constants section
'These constants are copied from tapi3if.idl
Const TAPIMEDIATYPE_AUDIO  = &H08&
Const TAPIMEDIATYPE_VIDEO = &H8000&
Const S_MEDIA_AUDIOVIDEO = &H8008&
Const TD_CAPTURE  = 0
Const TD_RENDER = 1
Const QSL_NEEDED = 1
Const AS_INSERVICE = 0
Const DC_NORMAL = 0
Const TE_CALLSTATE = 8
Const TE_CALLNOTIFICATION = 4
Const CS_DISCONNECTED = 3
Const CS_IDLE = 0
Const CS_OFFERING = 4
Const CS_CONNECTED = 2
Const CNE_OWNER =  0
Const CIS_CALLERIDNAME = 0
Const CIS_CALLERIDNUMBER = 1
'Interface IDs for casting 
'Note: you can find the following IID-s in tapi3.h, tapi3if.idl or rend.idl

Const IID_String_ITMediaSupport = "{B1EFC384-9355-11D0-835C-00AA003CCABD}"
Const IID_String_ITTerminalSupport="{B1EFC385-9355-11D0-835C-00AA003CCABD}"
Const IID_String_ITBasicCallControl = "{B1EFC389-9355-11D0-835C-00AA003CCABD}"

'Const IID_String_ITCallInfo = "{B1EFC390-9355-11d0-835C-00AA003CCABD}"
'New interface
Const IID_String_ITCallInfo = "{350F85D1-1227-11D3-83D4-00C04FB6809F}"
Const IID_String_ITStreamControl= "{EE3BD604-3868-11D2-A045-00C04FB6809F}"
Const IID_String_ITDirectoryObjectConference= "{F1029E5D-CB5B-11D0-8D59-00C04FD91AC0}"
Const IID_String_ITCallStateEvent = "{62F47097-95C9-11d0-835D-00AA003CCABD}"
Const IID_String_ITCallNotificationEvent = "{895801DF-3DD6-11d1-8F30-00C04FB6809F}"

' IID of IVideoWindow 
' Note: you can find this IID defined in control.h (from your sdk\inc directory), 
' which contains the interface to type library QuartzTypeLib for quartz.dll;
' (search for the interface IVideoWindow)
Const IID_String_IVideoWindow = "{56A868B4-0AD4-11CE-B03A-0020AF0BA770}"

' The following CLSID is defined in tapi3.h 
'(and it's used for creating a terminal of class "video window terminal")
Const CLSID_String_VideoWindowTerm = "{F7438990-D6EB-11d0-82A6-00AA00B5CA1B}"

'****************************************************************************
'Global variable section
'****************************************************************************
Dim CallStatus
Dim pICallState
pICallState = 0

'Set on True when we are unable to complete the connecting phase, to skip rest of processing
DIM sUnableToComplete
DIM sbNeedToExit
sUnableToComplete = False
sbNeedToExit = False

' If we want to receive incoming calls, we have to register on the corresponding addresses.
'We don't really use the values returned by registration (they are supposed to be used 
'for unregistration), because Unregistration is performed automatically when we shutdown the TAPI object

'The variable pRegisteredCallNotification is an array that contains cookies returned by RegisterCallNotifications;
'these would normally be used to call UnregisterNotifications.

'The variable pRegisteredName holds correspondent AddressName 

DIM pRegisteredCallNotification(50)
DIM pRegisteredName(50)
DIM iQtaRegistered
DIM callFrom

iQtaRegistered = 0

'Set by radio button "Select Address Type" 
DIM sCurrentAddressType
'sCurrentAddressType = -1
sCurrentAddressType = 1

' This variable will hold a reference to the currently established call
DIM spITCall 
spITCall = Empty

DIm pVideoWindow1
DIm pVideoWindow2

'Simplest error processing
Sub CheckError(strMsg)
if not Err.number = 0 Then
    MsgBox strMsg & ":" & Err.number & ";"&Err.description
    sbNeedToExit = True
    Err.Clear
End If

End Sub

Function IsComponentInstalled(ProgId)
Dim tmpObject

On Error Resume Next

    Set tmpObject = Server.CreateObject(ProgId)

    If Err.Number = 0 Then
        IsComponentInstalled = True
    Else
        IsComponentInstalled = False
    End If

    Set tmpObject = Nothing

End Function

</script> 
```

在标签之后的结束正文标签下方是：

```
<script type="text/vbscript"  LANGUAGE="vbscript">

' Be sure that you call TAPIOBJ.Initialize before window_onload, otherwise you'll
' never receive events from tapi... 
On Error Resume Next

call TAPIOBJ.Initialize
sUnableToComplete = False
TAPIOBJ.EventFilter = &H1FFFF&

if Not Err.number = 0  Then
   MsgBox "TAPI software has not been installed on your workstation.",0,"Init"
   sUnableToComplete = True
End If  

For Each  pITAddress in TAPIOBJ.Addresses

    if left(pITAddress.AddressName,4) <> "Line" and left(pITAddress.AddressName,29) <> "Shoreline Multi-Line Monitor:" _
    and pITAddress.MediaTypes = 8 then
        callFrom = pITAddress.AddressName
    end if

next

'This section shows how to override Application Priority:
'after the execution of the following lines, our app will always receive incoming calls
'even if there are other running tapi apps that had registered for receiving calls before our app.

call TAPIOBJ.SetApplicationPriority("IEXPLORE.EXE",TAPIMEDIATYPE_AUDIO,TRUE)
call TAPIOBJ.SetApplicationPriority("IEXPLORE.EXE",TAPIMEDIATYPE_VIDEO,TRUE)

' Check parameters of a call before connecting it
Sub PressConnect(pNumber,Status)
On Error Resume Next
'MsgBox (pNumber & "," & Status)
DIM iAddressType
 DIM pConnectTo

DIM addressFrom
DIM selStr

'If not IsEmpty(spITCall) Then
'  MsgBox "You are currently in call. Disconnect first",0,"connect"
'End If

pConnectTo = pNumber
set CallStatus=Status

addressFrom = callFrom 

If addressFrom = "" Then
    callStatus.innerHTML = "Feature Unavailable"
    MsgBox "The TAPI Feature has not been setup on your phone line.",0,"COnnect"
else   
    sUnableToComplete = False

    callStatus.innerHTML = "Connecting to " & pConnectTo & " ...."

    'Create new internal call representation 
     For Each  pITAddress in TAPIOBJ.Addresses 
        if pITAddress.AddressName = addressFrom Then
         'Obtain ITMediaSupport
         Set pITAddress_Connect = pITAddress
         Exit For
      End If    
     Next

    Set pITAddress = Nothing

     'Create a Call
     DIM MediaTypes

     MediaTypes = TAPIMEDIATYPE_AUDIO

     Set pCall = pITAddress_Connect.CreateCall(pConnectTo,1,MediaTypes)

     Set spITCall = pCall

     if sUnableToComplete Then
       Call DisconnectCall(1)
       callStatus.innerHTML = "Call to "& pConnectTo & " failed."
     End If

     Call pCall.Connect(false)

     ' Check for error "invalid address" (see in tapi3err.h TAPI_E_INVALADDRESS=(HRESULT)0x8004000C)
     if Err.Number = &H8004000C Then
      Err.Clear
      Call DisconnectCall(1)
      callStatus.innerHTML = "Call to "& pConnectTo & " failed: Address is invalid"
      Set pCall = Nothing

    Else
      if not Err.Number = 0 Then 
        Err.Clear
        Call DisconnectCall(1)
        callStatus.innerHTML = "Call to "& pConnectTo & " failed: error " & Hex(Err.number)
        Set pCall = Nothing
      Else
        Set spITCall = pCall
      End if

    End If
end if  

Set pCall = Nothing

end sub

' Disconnect current call
Sub HangUp(callDisc)
'On Error resume Next

    if not IsEmpty(spITCall) Then

        if not callDisc = 8 and not callDisc = 0 Then 
          ' We need some kind of message pump here. The following call to MsgBox does exactly this:
          'MsgBox "A call is disconnected",0,"Disconnect"  
        End If  

        Set pVideoWindow1 = Nothing
        Set pVideoWindow2 = Nothing

    '   ConnANN.innerHTML =  "Disconnected"  

        if callDisc=0  Then
          spITCall.Disconnect(DC_NORMAL)
        End If

        Set spITCall = Nothing 
        spITCall = Empty  
        callStatus.innerHTML = "Disconnected"

        'btnDisconnect.disabled = true   
        'source.visible = false
    End If
End Sub

'*****************************************************************************
' Tapi events processing: 
' - call state events ("connected", "disconnected") 
' - and call notification events (these calls will be in "offering" state)
Sub TAPIOBJ_Event(event_type, tapi_event)
'On Error Resume Next  

'Check For disconnected call
if event_type = TE_CALLSTATE Then
  DIM pITCallStateEvent

  Set pITCallStateEvent = MAPPER.QueryDispatchInterface(_
  IID_String_ITCallStateEvent,tapi_event)

  iCallState = pITCallStateEvent.State 

  if iCallState= CS_DISCONNECTED or iCallState= CS_IDLE Then

   cause = pITCallStateEvent.Cause
   'pICallState=iCallState
   strinnerHTML = ""
   Select Case cause
     Case 1 '  CEC_DISCONNECT_NORMAL - Normal disconnect
       strinnerHTML =  "Disconnected"
     Case 2 '  CEC_DISCONNECT_BUSY
       strinnerHTML =  "Your Party is busy.Try Later."
     Case 3 '  CEC_DISCONNECT_BADADDRESS
       strinnerHTML =  "Address is invalid"
     case 4 '  CEC_DISCONNECT_NOANSWER
       strinnerHTML =  "No answer from your party."
     case 0 'CEC_NONE
       strinnerHTML =  "No answer from your party."
     Case Else
       strinnerHTML =  "Your call is cancelled, rejected or failed"       
   End Select

    'Call DisconnectCall(1)
    'btnDisconnect.disabled = true             
  End If  'Call is disconnected

  if iCallState = CS_CONNECTED Then 'Call is connected
   callStatus.innerHTML =  "Call is connected."
   'btnDisconnect.disabled =  False
  End If 'Call is connected
End If ' event: call state

'Check only for incoming calls
if event_type = TE_CALLNOTIFICATION Then ' We have an incoming call (an "offering" call)

  DIM pITCallNotificationEvent
  Set pITCallNotificationEvent = MAPPER.QueryDispatchInterface(_
  IID_String_ITCallNotificationEvent,tapi_event)

  Call CheckError("TAPIOBJ_Event:query for pITDirectoryObjectUser")   

  CallOwnership = pITCallNotificationEvent.Event

  DIM pITCallInfo

  Set pITCallInfo = pITCallNotificationEvent.Call

  Call CheckError("TAPIOBJ_Event:get pITCallInfo")   

  if not blnShowOnlyOnce and  pITCallInfo.CallState  = CS_OFFERING and not ( CallOwnership = CNE_OWNER) Then
    MsgBox "Unable to accept incoming calls: is other instance of this app running?",0,"Info"
     blnShowOnlyOnce  = True
    Exit Sub
  End IF

  if CallOwnership = CNE_OWNER Then  'We are the owner!

    if not IsEmpty(spITCall) Then
      MsgBox "Already in call, disconnect first",0,"Incoming Call"
      Exit Sub
    End if

    if  pITCallInfo.CallState  = CS_OFFERING Then 'Offering

      '-- CIS_CALLERIDNAME Wasn't working so I switched to NUMBER
      sCalleeName = pITCallInfo.CallInfoString(CIS_CALLERIDNAME)
      if not Err.number = 0 then ' Caller ID name is not supported 
        sCalleeName =  "Unknown Name"
        Err.Clear
      End if

      sCalleeNumber = pITCallInfo.CallInfoString(CIS_CALLERIDNUMBER)
      if not Err.number = 0 then ' Caller ID name is not supported 
        sCalleeNumber =  "Unknown Number"
        Err.Clear
      End if

      DIM pITCallOffer
      Set pITCallOffer = MAPPER.QueryDispatchInterface( _ 
        IID_String_ITBasicCallControl, pITCallInfo)

      Call CheckError("TAPIOBJ_Event:query for pITCall")   

      response = MsgBox("A call from '" & sCalleeNumber & " " & sCalleeName & "' has arrived. Do you want to accept it?",4,"Incoming call")

      if not response = 7    Then       'the did not press "NO", so he pressed "YES"
        Call AcceptIncomingCall(pITCallOffer, pITCallInfo)
      End If  
    End If 'Call is offering
   End If 'We are owner   

End If 'Call Notification has arrived  

End Sub 

</script> 
```

是否[可以使用 ITAPI3 托管库](http://itapi3.codeplex.com/)来摆脱这种情况并在代码隐藏中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:11:23.473

希望有人知道一种更清洁、更现代的方法，但这就是我所做的。

我将 VBScript 嵌入到脚本服务器端，并将其注册为客户端脚本。在注册之前，我将标签添加到 Literal 控件中，并将它们添加到页面标题中。服务器控件本身只不过是一个围绕电话图标图像的链接。

因为我可以在 javascript 中调用 VBScript 函数，所以我创建了一个 GetPhoneNumber 函数，该函数接受控件的 controlID，我将在其中获取我的电话号码。这是在 Dialer 控件的 ControlID 属性上设置的。在这种情况下，它是一个文本框。该函数解析任何不良数据的编号，然后调用 PressConnect... 完成。它可以工作，但我对以这种方式使用 VBScript 并不十分满意。

如果有人知道如何与用户的客户端（本地）TAPI 交互（实际示例将不胜感激），请在此处发布。

# jquery - 滚动点jquery后固定标题上的fadeIn addClass

> ID：14825414
> 
> 赞同：0
> 
> 时间：2013-02-12T04:33:23.517
> 
> 标签：jquery, scroll, delay, fadein, offset

新来的论坛，希望有人可以帮助我。

尝试使固定标题淡入一个类时遇到一点问题，一旦用户滚动超过某个点，该类就会应用到它。

这是我在下面使用的代码：

```
$(window).scroll(function(){
    if($(".header-container").offset().top>385){
       $(".header-container").fadeIn(200).addClass("sticky");
    }
    else{
       $(".header-container").fadeOut(200).removeClass("sticky");
   }
}); 
```

您可以在此处查看我正在尝试使用的页面：

[http://v2.blue-square.com.au](http://v2.blue-square.com.au)

您会注意到，当页面加载时，您可以在顶部查看徽标和导航。你开始滚动它的那一刻就消失了。我不希望这种情况发生。我希望 .header-container 留在原处并可见。一旦它到达页面上的滚动点，“粘性”类（基本上粘性包含背景图像，更改徽标并更改导航链接的颜色）被添加到 .header-container div 并淡入。当用户向上滚动我希望它删除“粘性”类并让导航显示为首次加载网站时的样子。标题根本不应该被隐藏。

对此的任何帮助将不胜感激。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:23:36.147

在您的代码中，该`else`部分有问题，

```
else
{
    $(".header-container").fadeOut(200).removeClass("sticky");
} 
```

通过将element ( ) 淡化为透明来`fadeOut` 隐藏它，并添加一个with属性。`.header-container``attribute style``display:none`

要解决此问题，请尝试：

```
else
{
    $(".header-container").removeClass("sticky");
} 
```

参考网站`fadeOut` [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# object - Autohotkey_L 数值比较问题

> ID：14825415
> 
> 赞同：1
> 
> 时间：2013-02-12T04:33:26.247
> 
> 标签：object, comparison, ocr, autohotkey, numeric

我有一个脚本循环 8 个数字，跳过负数并返回最大值，如下所示：

```
biggest = 0
entry = 0
loop, 8
    {
    ; MsgBox %A_Index%
    if NegativeReadings%A_Index% not contains - ;filter out readings that are negative
        {
        ; MsgBox % AttributeReadings%A_Index%
        MsgBox %biggest%
        ; MsgBox % AttributeReadings%A_Index%
        if (AttributeReadings[A_Index] > biggest)
            {
            biggest := AttributeReadings[A_Index]
            entry = %A_Index%
            }
        }
    }
MsgBox %entry% 
```

当我输入一些具有 100,100,150,100,50,100,110,75 的示例图像时，OCR 正确返回对象数组结果，但数值比较失败

我得到 MsgBox %biggest% = 0,100,100,150, 150,50 **,** 50,50 => %entry% = 8

在 (50 > 150) 之间发生了一些错误我在处理 ahk 中的数据类型方面几乎没有任何线索，欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:15:55.890

好的，我今晚在第二次拍摄时发现了，OCR 返回一个带有尾随空格的字符串，因此它导致了管理员提到的字母比较。

用正则表达式修剪它现在它工作得很好这是任何可能遇到这个类似问题的人的代码片段

```
#SingleInstance force
#Include OCR.ahk

; sleep 5000
OCR()
; global
    {
    AttributeReadings := Object()
    loop, 8
        {
        NegativeReadings%A_Index% := GetOCR(730, (136 + (17 * (A_Index - 1))), 35, 17)
        AttributeReadings[A_Index] := GetOCR(730, (136 + (17 * (A_Index - 1))), 35, 17, "numeric")
        ; MsgBox % AttributeReadings%A_Index%
        }
    biggest = 0
    entry = 0
    i = 0
    loop, 8
        {
        ; MsgBox %A_Index%
        if NegativeReadings%A_Index% not contains - ;filter out readings that are negative
            {
            ; MsgBox % AttributeReadings%A_Index%
            ; length := StrLen(biggest)
            ; MsgBox %biggest%, %length%
            number := RegExReplace(AttributeReadings[A_Index], "([space])?", "")
            MsgBox %number%
            ; MsgBox % AttributeReadings%A_Index%
            if (number > biggest)
                {
                biggest := number
                entry := i
                }
            }
            i++
        }
    MsgBox %entry%
    }
End::
OCR()
return 
```

上面的代码基本上从图像中读取数字列表并返回第一个最大的非负数。至于否定过滤部分，它是在 OCR 中完成的，因为我的测试用例没问题，您可能需要根据您正在使用的图像对其进行修改

# php - 显示mysql表中的所有记录

> ID：14825417
> 
> 赞同：4
> 
> 时间：2013-02-12T04:33:38.903
> 
> 标签：php, mysql, html-table

下面的代码可以很好地打印数据库表中的一条记录，但我真正想做的是以类似于我的代码的格式打印 mysql 表中的所有记录。

IE：字段名称作为 html 表中每一列的标题以及标题下方的条目。希望这对某人有意义；）

```
 $raw = mysql_query("SELECT * FROM tbl_gas_meters");
        $allresults = mysql_fetch_array($raw);
        $field = mysql_query("SELECT * FROM tbl_gas_meters");
        $num_fields = mysql_num_fields($raw);   
        $num_rows = mysql_num_rows($raw);   
        $i = 1;

            print "<table border=1>\n";
            while ($i < $num_fields)
            {
                echo "<tr>";
                echo "<b><td>" . mysql_field_name($field, $i) . "</td></b>";
                //echo ": ";
                echo '<td><font color ="red">' . $allresults[$i] . '</font></td>';
                $i++;
                echo "</tr>";
                //echo "<br>";
            }
            print "</table>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:01:44.243

作为一条附加信息，您可能应该使用 PDO。它具有更多的功能，有助于学习如何准备 SQL 语句。如果您编写更复杂的代码，它也会为您提供更好的服务。

[http://www.php.net/manual/en/intro.pdo.php](http://www.php.net/manual/en/intro.pdo.php)

此示例使用对象而不是数组。不一定重要，但它使用的字符较少，所以我喜欢它。当您深入研究对象时，差异确实会出现，但在此示例中没有。

```
//connection information
$user = "your_mysql_user";
$pass = "your_mysql_user_pass";
$dbh = new PDO('mysql:host=your_hostname;dbname=your_db;charset=UTF-8', $user, $pass);

//prepare statement to query table
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();
//loop over all table rows and fetch them as an object
while($result = $sth->fetch(PDO::FETCH_OBJ))
{
//print out the fruits name in this case.
  print $result->name;
  print("\n");
  print $result->colour;
  print("\n");
} 
```

您可能还想查看准备好的语句。这有助于防止注射。出于安全原因，注入是不好的。这是该页面。

[http://www.php.net/manual/en/pdostatement.bindparam.php](http://www.php.net/manual/en/pdostatement.bindparam.php)

您可能还应该考虑清理您的用户输入。只是提醒一下，与您当前的情况无关。

还要使用 PDO 获取所有字段名称，试试这个

```
$q = $dbh->prepare("DESCRIBE tablename");
$q->execute();
$table_fields = $q->fetchAll(PDO::FETCH_COLUMN); 
```

一旦你拥有了所有的表格字段，它会很容易使用`<div>`，甚至可以使用`<table>`你喜欢的方式来排列它们`<th>`

快乐学习 PHP。很好玩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T03:21:22.080

谢谢各位，明白了

```
 $table = 'tbl_gas_meters';
        $result = MYSQL_QUERY("SELECT * FROM {$table}");

        $fields_num = MYSQL_NUM_FIELDS($result);

        ECHO "<h1>Table: {$table}</h1>";
        ECHO "<table border='1'><tr>";
        // printing table headers
        FOR($i=0; $i<$fields_num; $i++)
        {
            $field = MYSQL_FETCH_FIELD($result);
            ECHO "<td>{$field->name}</td>";
        }
        ECHO "</tr>\n";
        // printing table rows
        WHILE($row = MYSQL_FETCH_ROW($result))
        {
            ECHO "<tr>";

            // $row is array... foreach( .. ) puts every element
            // of $row to $cell variable
            FOREACH($row AS $cell)
            ECHO "<td>$cell</td>";

            ECHO "</tr>\n";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:35:55.310

```
while ( $row = mysql_fetch_array($field) ) {
    echo $row['fieldname'];
    //stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:05:34.763

尝试这个 ：

```
 $raw = mysql_query("SELECT * FROM tbl_gas_meters");
    $allresults = mysql_fetch_array($raw);
    $field = mysql_query("SELECT * FROM tbl_gas_meters");
    while($row  = mysql_fetch_assoc($field)){
         echo $row['your field name here'];
    } 
```

请注意，新的 php 版本不推荐使用 mysql_* 函数，因此请改用 mysqli 或 PDO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T11:11:39.570

谢谢！我调整了其中一些答案，以从任何表的所有记录中绘制一个表，而无需指定字段名称。只需将其粘贴到 .php 文件中并更改连接信息：

```
<?php    

// Authentication detail for connection
$servername = "localhost";
$username =   "xxxxxxxxxx";
$password =   "xxxxxxxxxx";
$dbname =     "xxxxxxxxxx";
$tablename =  "xxxxxxxxxx";
$orderby = "1 DESC LIMIT 500";  // column # to sort & max # of records to display

// Create & check connection
$conn = new mysqli($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);  // quit
    }

// Run query & verify success
$sql = "SELECT * FROM {$tablename} ORDER BY {$orderby}";
if ($result = $conn->query($sql)) {
    $conn->close();  // Close table
    $fields_num = $result->field_count;
    $count_rows = $result->num_rows;

    if ($count_rows == 0) {
        die ("No data found in table: [" . $tablename . "]" );  //quit 
        } 
    } else {
    $conn->close();  // Close table
    die ("Error running SQL:<br>" . $sql );  //quit
}

// Start drawing table
echo "<!DOCTYPE html><html><head><title>{$tablename}</title>";
echo "<style> table, th, td { border: 1px solid black; border-collapse: collapse; }</style></head>";
echo "<body><span style='font-size:18px'>Table: <strong>{$tablename}</strong></span><br>";  
echo "<span style='font-size:10px'>({$count_rows} records, {$fields_num} fields)</span><br>";
echo "<br><span style='font-size:10px'><table><tr>";        

// Print table Field Names
while ($finfo = $result->fetch_field()) {
    echo "<td><center><strong>{$finfo->name}</strong></center></td>";
}
echo "</tr>"; // Finished Field Names

/* Loop through records in object array */
while ($row = $result->fetch_row()) {
    echo "<tr>";    // start data row
    for( $i = 0; $i<$fields_num; $i++ ) {
        echo "<td>{$row[$i]}</td>";
    }
    echo "</tr>";   // end data row
}

echo "</table>";  // End table
$result->close();  // Free result set
?> 
```

# php - 如何通过局域网共享 php/mysql 应用程序？

> ID：14825425
> 
> 赞同：-7
> 
> 时间：2013-02-12T04:34:21.497
> 
> 标签：php, mysql, lan

我有**php/mysql**应用程序。它在**xampp 服务器**的一台计算机上运行。我如何通过**LAN**共享它，以便其他计算机可以访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:38:17.950

1）找出你在局域网上的IP地址（你如何做到这一点取决于运行XAMPP的操作系统，但你当然应该能够在SO上找到有人为你的操作系统提出问题）；

2) 禁用您可能正在运行的任何防火墙软件；再次，在您的环境中搜索特定的操作系统/软件。

3) 让 LAN 上的用户打开他们的 Web 浏览器到[http://your.ip.address.here/](http://your.ip.address.here/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T04:45:29.563

如果您使用的是 XAMPP，则将 XAMPP 安装在 C 驱动器中。一旦您这样做，您就可以使用您的 IP 地址通过局域网中的不同系统访问您的应用程序。我在大学期间实施了相同的环境。

# c++ - 为什么后缀运算符设计为按值返回？

> ID：14825427
> 
> 赞同：6
> 
> 时间：2013-02-12T04:35:25.880
> 
> 标签：c++, c++11, operator-overloading

特别是，前缀运算符的按引用返回对我来说很有意义——它很有用，以防人们想对对象进行进一步的操作。

*但是，我无法理解为什么后缀运算符被设计为按值返回。*

**它仅仅是一个约定，还是有充分的理由为什么它是这样设计的（比如按值返回对后缀没有意义，但对前缀有意义）？**

有人可以解释吗？

**回答**

多亏了下面的答案，后缀运算符似乎*不一定*要按值返回（根据标准）。

但是，由于后缀运算符的语义要求（返回原始值，但之后增加对原始值的引用），结合标准要求：

**运算符重载是函数，因此所有副作用都必须在函数完成之前发生。**

正如下面[David Rodriguez](https://stackoverflow.com/a/14825829/975129)清楚地解释的那样，**分叉值**似乎是语义要求的必然结果。

在这种情况下，由于我们正在返回另一个值（不是原始引用，因为它会被函数的右括号改变），*按值返回另一个值*似乎是最有意义的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T05:13:45.590

后缀运算符是产生原始值然后修改对象的表达式。同时，运算符重载是函数，因此所有副作用都必须在函数完成之前发生。获得所需语义的唯一方法是在应用更改之前复制对象的初始状态。原始状态必须按值返回（如果返回引用，则表达式的评估将在函数完成后产生对象的状态，因此具有前缀运算符的语义，而不是后缀运算符）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T04:37:56.920

这是约定，因为 post fix 的*典型*实现涉及创建函数本地的临时对象，同时使用前缀运算符递增最初传递的对象，然后返回临时对象。您不能返回对该本地对象的引用，因此它需要按值返回。

您不能返回引用，因为本地对象只能在函数的范围内保证是活动的，并且超出此范围的任何访问都将导致未定义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T04:38:48.187

以下代码在 C 和 C++ 中定义良好：

```
int i = 7;
printf("%i\n", i++ + 2); 
```

这会将 9 打印到控制台，而`i`将是 8。保证。

后缀增量/减量修改`i`，但它们返回 的*旧*`i`值。对对象执行此操作的唯一方法是将当前值保存为新值，自增，然后返回保存的值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T05:01:46.083

当然这是一个很好的理由。后增量运算符执行以下操作：

1.  递增变量和
2.  返回其旧值。

无法返回对变量“旧值”的引用。它消失了。

# visual-studio-2010 - 将项目文件夹存储在隔离存储中

> ID：14825431
> 
> 赞同：0
> 
> 时间：2013-02-12T04:35:47.017
> 
> 标签：visual-studio-2010, windows-phone-7

我正在一个名为“webapplication”的文件夹中创建一个带有静态 html 文件的 windows phone 项目。我想将“webapplication”文件夹的所有内容存储在隔离存储中。有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:00:59.390

[在http://windowsphonegeek.com/tips/all-about-wp7-isolated-storage-files-and-folders](http://windowsphonegeek.com/tips/all-about-wp7-isolated-storage-files-and-folders)查看 windows phone geek，了解有关独立存储的信息。

要创建文件夹，请执行以下操作：

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication(); 
myIsolatedStorage.CreateDirectory("NewFolder"); 
```

如果要在文件夹中创建文件，则：

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
StreamWriter writeFile = new StreamWriter(new IsolatedStorageFileStream("NewFolder\\SomeFile.txt", FileMode.CreateNew, myIsolatedStorage)); 
```

如果您希望将文件复制到 IsolatedStorage，则需要在应用程序第一次执行时运行以下代码：

```
using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                string[] files =  System.IO.Directory.GetFiles(folderPath);
                foreach (var _fileName in files)
                {
                    if (!storage.FileExists(_fileName))
                    {
                        string _filePath = _fileName;
                        StreamResourceInfo resource = Application.GetResourceStream(new Uri(_filePath, UriKind.Relative));
                        using (IsolatedStorageFileStream file = storage.CreateFile("NewFolder\\SomeFile.txt", FileMode.CreateNew, Storage))
                        {
                            int chunkSize = 102400;
                            byte[] bytes = new byte[chunkSize];
                            int byteCount;

                            while ((byteCount = resource.Stream.Read(bytes, 0, chunkSize)) > 0)
                            {
                                file.Write(bytes, 0, byteCount);
                            }
                        }
                    }
                }
            } 
```

# macos - OS X Web View App - 是否可以使用本机首选项面板来调整 JavaScript 变量？

> ID：14825435
> 
> 赞同：0
> 
> 时间：2013-02-12T04:36:03.903
> 
> 标签：macos, cocoa, webview

我用 HTML5/JavaScript 编写了一个应用程序并将其嵌入为 OS X 网络视图。它可以工作，并且当前在 Web 应用程序中内置了一个设置区域，该区域也可以工作。

我的问题是，是否可以使用本机 OS X 样式首选项面板（应用程序名称 > 首选项）来调整网络应用程序的设置？

Web 应用程序使用 JavaScript 变量进行设置。OS X 首选项面板必须读取 JavaScript 变量，允许调整它们，然后在保存时更新它们。

示例网页代码（test.html）：

```
<p>Number of widgets (sample setting): 
<input type="button" id="buttonLessWidgets" value="&lt;">
<span id="divNumWidgets"></span>
<input type="button" id="buttonMoreWidgets" value="&gt;">
</p>

<script>
var numWidgets = 10;

// Display current number of widgets when the app is opened
document.getElementById("divNumWidgets").innerHTML = numWidgets;

// Adjust sample setting --- this is the part I'm hoping to move to the preferences panel
buttonLessWidgets.onclick = function() { 
    numWidgets -= 1;

    divNumWidgets.innerHTML = numWidgets;
};

buttonMoreWidgets.onclick = function() { 
    numWidgets += 1;

    divNumWidgets.innerHTML = numWidgets;
};
</script> 
```

这是我可以轻松实现的吗？我对 HTML5 和 JavaScript 很熟悉，但我是 Xcode 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:48:15.053

这是很有*可能的*，但它需要你做一些工作，而且没有自动的方法来做到这一点。至于实现自定义首选项窗格，这超出了单个问题的范围，您可能可以在其他地方找到材料。然而，实际的 JavaScript 部分并不算太糟糕。

WebView 类提供了一种`windowScriptObject`方法，您可以调用该方法来获取对 JavaScript 环境的引用。然后，您可以使用标准`setValue:forKey:`和`valueForKey:`方法在 JavaScript 上下文中获取和设置全局变量。

您可以在页面实际加载之前将这些值注入页面，方法是向 Web 视图的`setFrameLoadDelegate:`方法提供自定义 WebFrameLoadDelegate，然后利用传递给[`webView:didClearWindowObject:forFrame:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView%3adidClearWindowObject%3aforFrame%3a)委托方法的 WebScriptObject 上下文。只要 JavaScript 上下文可用，但在页面实际加载之前，就会调用此方法，以允许您插入自定义首选项变量。

# wpf - 如何创建剪辑儿童的 WPF 圆形容器？

> ID：14825436
> 
> 赞同：4
> 
> 时间：2013-02-12T04:36:06.993
> 
> 标签：wpf, rounded-corners

以下代码应该在圆形容器内绘制一个菜单栏。您会注意到底部是圆形的，但菜单的角不是。我遵循所选答案的指示，因为它似乎是最有效的：

[如何创建 WPF 圆角容器？](https://stackoverflow.com/questions/120851/how-do-i-create-a-wpf-rounded-corner-container)

作为记录，我正在使用最新版本的 WPF 运行 .NET 4.5。这是我的代码：

```
<Window
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="240" Height="320" Background="Black" >
      <Border BorderBrush="Red" CornerRadius="10" BorderThickness="1" Background="Gray" >
         <StackPanel>
          <Menu IsMainMenu="True" HorizontalAlignment="Stretch" >
                        <MenuItem Header="_File" />
                        <MenuItem Header="_Edit" />
                        <MenuItem Header="_View" />
                        <MenuItem Header="_Window" />
                        <MenuItem Header="_Help" />
                    </Menu>

         </StackPanel>
      </Border>
</Window> 
```

**编辑：** 同一篇文章中还有另一个答案，暗示了 Chris Cavanagh 提出的更复杂的解决方案。他的解决方案不是那么简单或那么快，但它确实剪裁了我想要的角落。该问题没有指定剪辑，建议的答案也没有。希望问题和/或答案将更新以反映这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:14:34.257

Chris Cavanagh 有一篇关于舍入控制的[博客文章。](http://chriscavanagh.wordpress.com/2008/10/03/wpf-easy-rounded-corners-for-anything/)它应该可以帮助你实现你想要的。

**编辑：** 以下是该博客的代码。

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Background="Black">
    <!-- Rounded yellow border -->
    <Border BorderThickness="3" BorderBrush="Yellow" CornerRadius="10" Padding="2" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Grid>
            <!-- Rounded mask (stretches to fill Grid) -->
            <Border Name="mask" Background="White" CornerRadius="7"/>
            <!-- Main content container -->
            <StackPanel>
                <!-- Use a VisualBrush of 'mask' as the opacity mask -->
                <StackPanel.OpacityMask>
                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                </StackPanel.OpacityMask>
                <!-- Any content -->
                <Image Source="https://chriscavanagh.files.wordpress.com/2006/12/chriss-blog-banner.jpg"/>
                <Rectangle Height="50" Fill="Red"/>
                <Rectangle Height="50" Fill="White"/>
                <Rectangle Height="50" Fill="Blue"/>
            </StackPanel>
        </Grid>
    </Border>
</Page> 
```

> 它所做的只是包含一个“掩码”边框元素作为您要剪辑的内容的同级元素。在内容中，它使用绑定到该蒙版的 VisualBrush。蒙版会根据您的内容自动调整大小，因此这是一个很好的“设置并忘记”解决方案

# java - 如何从 java 中收集 JVM 性能统计信息

> ID：14825438
> 
> 赞同：5
> 
> 时间：2013-02-12T04:36:18.087
> 
> 标签：java, junit, jvm, performance-testing

我想编写一个 JUnit 测试用例，它还能够监视和收集 JVM 的参数，例如内存使用情况、堆大小和其他自定义 JMX 托管 bean 等。我将拥有 JVM 的 JMX 地址。更清楚地说，我想知道我是否可以收集 jconsole 提供的信息，但无需 UI 以编程方式提供。然后我想通过将它与 Jenkins 集成来检查 JVM 性能是否已经下降。是否有任何已经可用的工具可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:52:57.103

您可能会考虑使用虚拟机代理，这是一篇很好的[教育文章](https://blogs.oracle.com/kto/entry/using_vm_agents)

您还可以使用`Profiler`eclipse 中的工具来监控程序性能

# ios - iOS 使用 detachNewThreadSelector 冻结和线程化

> ID：14825440
> 
> 赞同：0
> 
> 时间：2013-02-12T04:36:27.343
> 
> 标签：ios, multithreading, thread-safety

我正在开发由其他人设计的应用程序。该应用程序充满了这样的调用：

```
[NSThread detachNewThreadSelector:@selector(loadPhotoImage) toTarget:self withObject:nil]; 
```

和

```
DownloadPhotoThread *thread = [[DownloadPhotoThread alloc] initWithFriendArray:_friendsList delegate:self];
[self.arrDownloadThreads addObject:thread];
[thread start]; 
```

随机我会遇到整个 ui 锁定，手机/模拟器不再响应触摸的情况。需要明确的是，该设备永远不会解冻。如果我在调试会话期间点击暂停，我会看到一个线程位于 start 或 detachNewThreadSelector 行上。

今天，当这些锁定发生时，我能够缩小原因。我刚刚添加了 Zendesk 表单控制器（在这里找到：[https](https://github.com/zendesk/zendesk_ios_sdk/blob/master/DropboxSampleApp/FormViewController.m) ://github.com/zendesk/zendesk_ios_sdk/blob/master/DropboxSampleApp/FormViewController.m ）

其中有这个代码：

```
- (void) textViewDidChange:(UITextView *)textView
{
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
}
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row > 1) {
        CGSize s = [description sizeThatFits:CGSizeMake(description.frame.size.width, 10000)];
        float dh = MAX(s.height, 115);
        description.frame = CGRectMake(description.frame.origin.x, 
                                   description.frame.origin.y, 
                                   description.frame.size.width, 
                                   dh);
        return dh;
    }
    return 44.0;
} 
```

我可以通过键入一个字符并在此文本框中一遍又一遍地返回来轻松重现锁定条件。（这会调整表格视图的高度）

在某些情况下，我可以通过使用 dispatch_async() 块包装违规者来防止锁定条件，如下所示：

```
DownloadPhotoThread *thread = [[DownloadPhotoThread alloc] initWithFriendArray:_friendsList delegate:self];
[self.arrDownloadThreads addObject:thread];
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [thread start];
}); 
```

但在其他情况下，我不能，因为有问题的代码位于复杂的库中，例如 ASIHTTPRequest 或 XMPPFramework。你对这里到底发生了什么有什么建议吗？

另一件事。当我在这种情况下暂停时，这就是主线程所说的：

```
Thread 1
com.apple.main-thread
0 objc_msgSend
....
25 UIApplicationMain
26 main 
```

暂停和取消暂停总是会在 objc_msgSend 中的某个汇编指令中找到 main。

感谢您的帮助，因为我在这里很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:31:14.203

事实证明，崩溃是由[https://github.com/zendesk/zendesk_ios_sdk/](https://github.com/zendesk/zendesk_ios_sdk/)中的错误引起的 。我已经提出了拉取请求并提交给他们进行审查。

# jquery - Jquery在存在多个类时选择一个类

> ID：14825441
> 
> 赞同：1
> 
> 时间：2013-02-12T04:36:29.807
> 
> 标签：jquery, css-selectors

我在 jquery 脚本中有以下内容：

```
if ( path[1] ) {
    $('.content_nav a[class$="' + pos1_path + '"]').toggleClass('current');
} 
```

它选择适当的元素，例如：

```
<a class='pos1_path' href="#">link</a> 
```

它可以工作，但是现在当使用多个类时我需要同样的工作，如下所示：

```
<a class='pos1_path pos2path' href="#">link</a> 
```

我怎样才能做到这一点？

**解决了：**

```
$('.content_nav a[class$="' + pos1_path + ' ' + pos2_path + '"]').toggleClass('current'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:40:03.877

您可以在 jQuery 中使用多个选择器：

```
$('.content_nav a.pos1_path, .content_nav a.pos2_path').toggleClass('current'); 
```

如果您希望两个类都存在以便选择元素，那么您可以执行以下操作：

```
$('.content_nav a.pos1_path.pos2_path').toggleClass('current'); 
```

为了清楚起见，我省略了字符串连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:44:38.080

你可以只连接类，也许使用上下文

```
var $context = $('.content_nav');
$('.pos1_path.pos2path', $context); 
```

或者，如果您想选择一个班级或另一个班级：

```
var $context = $('.content_nav');
$('.pos1_path, .pos2path', $context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:41:06.417

试试这个：

```
if ( path[1] ) {
    if($('.content_nav a').hasClass(pos1_path))
          $('.content_nav a').toggleClass('current');
} 
```

对于多个选择器，您可以参考[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:42:44.107

你可以试试这个，它将用你的字符串替换逗号的空格。这将选择具有任何类的所有元素。如果那是你想要的。：

```
var classList = path[1].replace(" ",",.");
if $('.content_nav a[class$=".' + classList + '"]').toggleClass('current'); 
```

# java - 表单的Java文本字段到新表单

> ID：14825442
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:36:30.960
> 
> 标签：java, swing, user-interface, jframe, label

我是 Java 新手，只想问一个简单的问题 我有我的第一个表单和一个文本字段，我在其中输入一个文本，一旦我单击按钮，就会出现一个新表单，文本字段中的文本将是给新表格贴上标签

我尝试了这段代码，但它不起作用

```
public class Data extends javax.swing.JFrame {

  public Data() {
    initComponents();

    FrmLogIn f = new FrmLogIn();
    User.setText(f.UName.getText());
    User.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:58:13.417

有很多方法可以解决这个问题。您可以创建自己的`JDialog`来处理输入要求（在大多数情况下我可能会这样做），但是如果您想要更简单的东西，`JOptionPane`可以提供一个高度可配置的现成对话框。

![在此处输入图像描述](../Images/db7fe52765b58a1dafe7ecd0b7dfc2c3.png)![在此处输入图像描述](../Images/89f2f8d1b0fe23e0ba0b850c42b19ca3.png)![在此处输入图像描述](../Images/fd14c2c16d37df4ab47d004e3a4bb8f5.png)

当然，没有什么能阻止你混合这两个概念（自定义`JDialog`和`JOptionPane`）

```
public class TestLogin01 {

    public static void main(String[] args) {
        new TestLogin01();
    }

    public TestLogin01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                LoginPane loginPane = new LoginPane();

                String userName = null;
                boolean validUser = false;
                int result = JOptionPane.CANCEL_OPTION;
                do {
                    result = JOptionPane.showConfirmDialog(null, loginPane, "Login", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
                    switch (result) {
                        case JOptionPane.OK_OPTION:
                            // Verify user details..
                            userName = loginPane.getUserName();
                            char[] password = loginPane.getPassword();

                            // Simple random test...
                            validUser = ((int) (Math.round(Math.random() * 1))) == 0 ? true : false;
                            if (!validUser) {
                                JOptionPane.showMessageDialog(null, "Inavlid username/password", "Error", JOptionPane.ERROR_MESSAGE);
                            }
                            break;
                    }
                } while (!validUser && result != JOptionPane.CANCEL_OPTION);

                if (result == JOptionPane.OK_OPTION) {
                    if (validUser) {
                        JOptionPane.showMessageDialog(null, "Welcome back valued user " + userName, "Welcome", JOptionPane.INFORMATION_MESSAGE);
                    }
                }
            }
        });
    }

    public class LoginPane extends JPanel {

        private JTextField userName;
        private JPasswordField passwordField;

        public LoginPane() {
            userName = new JTextField(10);
            passwordField = new JPasswordField(10);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;

            add(new JLabel("User name: "), gbc);
            gbc.gridy++;
            add(new JLabel("Password: "), gbc);

            gbc.gridy = 0;
            gbc.gridx++;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(userName, gbc);
            gbc.gridy++;
            add(passwordField, gbc);
        }

        public String getUserName() {
            return userName.getText();
        }

        public char[] getPassword() {
            return passwordField.getPassword();
        }
    }
} 
```

您可能想阅读[如何使用 Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)和[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:01:26.550

看到您的代码，您似乎没有包含**事件处理**部分（并且您需要包含它才能完成工作）

作为简要介绍，您需要在代码中执行此操作：

```
button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                FrmLogIn f = new FrmLogIn();
                            User.setText(f.UName.getText());
                            f.setVisible(true);
                }
 } 
```

**注意：**假设`User`是一个`JLabel`和`UName`一个`JTextField`
并且`FrmLogIn`已经扩展`JFrame`并且您已经设置了必填字段，例如布局**和大小**`JFrame`

有关事件处理的更多信息，请查看[此处](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

**编辑 2**：

示例代码片段 - 你想要这样的东西（它只是一个粗略的，让你知道如何继续前进）

**编辑**
@madProgrammer 评论的 3 - 将`null`布局替换为`FlowLayout`

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.*;
import javax.swing.JTextField;

class FrmLogIn extends JFrame{
    JLabel User;

    public FrmLogIn()  {
        setLayout(new FlowLayout());
        setSize(200,200);
        User = new JLabel("");
       // User.setBounds(20,30,100,40);
        add(User);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

}

class ForTest extends JFrame{
   JButton enter;
   JTextField UName;

    public ForTest()  {
     setLayout(new FlowLayout());
     setSize(300,300);

     enter = new JButton("enter");
     //enter.setBounds(20,20,100,30);
     UName = new JTextField();
     //UName.setBounds(40,80,60,30);
     add(UName);
     add(enter);
     setVisible(true);
     enter.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    FrmLogIn f = new FrmLogIn();
                                f.User.setText(UName.getText());
                                f.setVisible(true);
                                setVisible(false);
                    }
     }); 

     setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
      new ForTest();
    }
} 
```

# r - 通过使用 quantmod 的滚动窗口回归来回测回归模型的准确性

> ID：14825443
> 
> 赞同：5
> 
> 时间：2013-02-12T04:36:36.857
> 
> 标签：r, regression, xts, zoo, quantmod

我一直在尝试通过实施滚动窗口回归并计算和记录过去每一天的估计与最后可用日期之间的差异来回测回归的可预测性（试图提前一步预测） ，在一列中。

我试图在[滚动回归返回多个对象时应用 Christoph_J 的答案](https://stackoverflow.com/questions/14732505/rolling-regression-return-multiple-ojects)

代码中没有语法错误。但是，我不确定是否存在语义错误。“预测”列的行中的值是该列的行值的`i`事前预测吗？`i``OpCl`

```
library(zoo) 
library(dynlm)
library(quantmod)
sp <- getSymbols("^GSPC", auto.assign=FALSE)
sp$GSPC.Adjusted <- NULL
colnames(sp) <- gsub("^GSPC\\.","",colnames(sp))

sp$Number<-NA
sp$Number<-1:nrow(sp)

sp$OpCl <- OpCl(sp) 
sp$ClHi <- HiCl(sp) 
sp$LoCl <- LoCl(sp) 
sp$LoHi <- LoHi(sp) 

#### LAG

spLag <- lag(sp)
colnames(spLag) <- paste(colnames(sp),"lag",sep="")
sp <- na.omit(merge(sp, spLag))

### REGRESSION

f <- OpCl ~ Openlag + Highlag + OpCllag + ClHilag 

OpClLM <- lm(f, data=sp)

#sp$OpClForecast <- NA
#sp$OpClForecast <- tail(fitted(OpClLM),1)

#####################################################

rolling.regression <- function(series) {
mod <- dynlm(formula = OpCl ~ L(Open) + L(High) + L(OpCl) + L(ClHi), 
data = as.zoo(series))    

nextOb <- min(series[,6])+1 # To get the first row that follows the window
if (nextOb<=nrow(sp)) {   # You won't predict the last one

# 1) Make Predictions
predicted=predict(mod,newdata=data.frame(OpCl=sp[nextOb,'OpCl'],
Open=sp[nextOb,'Open'],High=sp[nextOb,'High'],

OpCl=sp[nextOb,'OpCl'], ClHi=sp[nextOb,'ClHi']))
attributes(predicted)<-NULL

#Solution ; Get column names right
c(predicted=predicted, 
AdjR = summary(mod)$adj.r.squared)
}
}

rolling.window <- 300
results.sp <-  rollapply(sp, width=rolling.window, 
FUN=rolling.regression,  by.column=F, align='right')
sp<-cbind(sp,results.sp)

View(sp) 
```

# spring - Spring MVC：未在 POST 上返回到控制器的复选框列表

> ID：14825447
> 
> 赞同：1
> 
> 时间：2013-02-12T04:36:50.697
> 
> 标签：spring, spring-mvc, checkbox, controller

**为什么服务器看不到我填写的复选框列表？**

这个问题似乎在这里被问了很多次，但是每个请求者的细节是如此不同，以至于似乎每次都需要不同的答案。这是我的故事。

这些是我的数据承载类。报价包含过滤器属性中的过滤器对象列表：。

```
public class Offer implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private Long id = null;

    @Column(name="title")
    private String title = null;
    [snip]

    @ManyToMany(fetch=FetchType.EAGER)
    @JoinTable(name = "offer_filter", 
        joinColumns = { @JoinColumn(name = "offer_id", nullable = false, updatable = false) }, 
        inverseJoinColumns = { @JoinColumn(name = "filter_id", nullable = false, updatable = false) })
    private List<Filter> filters;

    [snip]
}

public class Filter implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private Long id;

    @NotBlank
    @Length(max=100)
    @Column(name="text")
    private String text;

    [snip]

    @Transient
    private boolean owned = false;

    [snip]
} 
```

简单控制器发送带有完全填充的 Offer 对象的 offerEdit.jsp 页面。该对象包含一个过滤器列表。由于拥有的属性，只有三个过滤器中的一个被预先检查。这模拟了我的最终计划，其中过滤器列表是整个宇宙，而报价拥有的是一个子集。

请注意注释，Offer 将过滤器列表转到网页，但没有看到它返回。

```
public class OfferController {
    [snip]

    @RequestMapping(value = "/edit", method = RequestMethod.GET)
    public String getEdit(@RequestParam("id") Long id, Model model, HttpSession session) {
        Offer offerAttribute = offerService.get(id);

        // At this point, offerAttribute.filters has three elements.
        // Mockup -- tells web page that only the middle one of the three Filters should be checked.
        List<Filter> filters = offer.getFilters();
        Filter filter = filters.get(1);
        filter.setOwned(true);

        model.addAttribute("offerAttribute", offerAttribute);

        return "offer/offerEdit";
    }

    @RequestMapping(value = "/edit", method = RequestMethod.POST)
    public String postEdit(@RequestParam("id") Long id, @Valid @ModelAttribute("offerAttribute") Offer offerAttribute, BindingResult result, HttpSession session, Model model) {

        // At this point, offerAttribute.filters is null.
        if(result.hasErrors()) {
            result.reject("offer.invalidFields");

            return "offer/offerEdit";
        }

        offerAttribute.setId(id);
        offerService.edit(offerAttribute);

        return "redirect:/offer/list";
    }

    [snip]
} 
```

该网页的复选框部分具有此功能。我使用 form:checkbox 而不是 form:checkboxes 因为我想使用表格，

```
[snip]
<form:form modelAttribute="offerAttribute" method="POST" action="${saveUrl}">
    <table>
        <tr>
            <td></td>
            <td><form:hidden path="id" /></td>
        </tr>

        <tr>
            <td><form:label path="title">Title:</form:label></td>
            <td><form:input path="title" size="80" /></td>
            <td><form:errors path="title" cssClass="error" /></td>
        </tr>

    [snip]
    </table>

    <table>
    </table>

    <table>
        <c:forEach items="${offerAttribute.filters}" var="filter">
            <tr>
                <td><form:checkbox 
                        path="filters" 
                        label="${filter.text}" 
                        value="${filter.id}" 
                        checked="${filter.owned ? 'true' : ''}" />
                </td>
            </tr>
        </c:forEach>
    </table>
    [snip] 
```

显示的网页显示了三个过滤器复选框，仅填充了中间的复选框。

![在此处输入图像描述](../Images/f1bb062aaca248c81db2f75b30e8aaa2.png)

对于返回的列表，我希望服务器只获得中间的复选框，这正是我想要的。

以下是生成的复选框作为源的样子：

```
<table style="border: 1px solid; width: 100%; text-align:left;">
        <tr>
            <td>
                <input id="filters1" name="filters" type="checkbox" value="1"/>
                <label for="filters1">Adults (18+) desired, please</label>
                <input type="hidden" name="_filters" value="on"/>
            </td>
        </tr>
        <tr>
            <td>
                <input id="filters2" name="filters" checked="true" type="checkbox" value="2"/>
                <label for="filters2">Quiet audiences, please</label>
                <input type="hidden" name="_filters" value="on"/>
            </td>
        </tr>
        <tr>
            <td>
                <input id="filters3" name="filters" type="checkbox" value="4"/>
                <label for="filters3">Filter Text First</label>
                <input type="hidden" name="_filters" value="on"/>
            </td>
        </tr>
</table> 
```

我的复选框已设置，并且在 HTML 中。重申我的问题，

**为什么在控制器的 POST 处理程序中看不到复选框值？**

感谢您的任何答案，

杰罗姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:14:46.023

复选框的值不能直接绑定到列表。

为了让它工作，你需要创建一个简单的 pojo 数据bean，它将在 jsp 中保存表单字段的值。并在该数据bean中绑定您需要声明`int[] filterId`的值，并且复选框的值将绑定在该数组中。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:44:56.243

经过大量的网络研究和不同的调试会话，我想出了一个我可以接受的配置。

在我的控制器中，我提供了一个模型属性“filterList”，其中包含列表。“offerAttribute”是一个 Offer 对象，包含列表过滤器。

该视图具有以下顺序：

```
<table>
    <c:forEach items="${filterList}" var="filter" varStatus="status">
        <tr>
            <td><input type="checkbox" name="filters[${status.index}].id" 
                 value="${filter.id}"  
                 ${filter.owned ? 'checked' : ''} /> ${filter.text}
            </td>
        </tr>
    </c:forEach>
</table> 
```

POST 完成后，ownerAttribute.filters 列表与创建复选框的原始 filterList 对象一样长。选中的包含一个 Filter.id 值。未选中的包含空值。（也就是说，返回的过滤器列表是“稀疏的”。）如果用户只点击几个复选框，那么我必须解析返回的列表以找到那些被选中的。

一旦我知道选中过滤器的 ID 值，我就通过 Hibernate 获取它们中的每一个，将它们放入我重建的 Offer 对象中，然后将它们保存到数据库中。

我意识到我（当前）没有使用表单：复选框。但它有效，我在这里的时间很紧迫。也许我稍后会回来，看看 form:checkbox 可以为我做什么。

# c# - 处理 Shift+Del

> ID：14825460
> 
> 赞同：0
> 
> 时间：2013-02-12T04:38:09.083
> 
> 标签：c#, winforms, datagridview

我正在处理`DataGridView`一个`winform`带有删除的操作，它对这些行进行身份验证和删除。但是，按`Shift`+`Del`会从 中删除行`UI`。我尝试`boolean` *`IsShiftPressed`*通过处理*`keydown`*事件来设置 a ，但这看起来很难看。当然应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:54:08.937

试穿`KeyUp Event`

```
if (e.KeyCode == Keys.Del && e.Shift)
{
   if (dataGridView1.SelectedRows.Count > 0)
   {
      //Do Stuff
   }
   e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:54:31.573

您可以根据本文尝试[在 C# 中捕获控件。](http://support.microsoft.com/kb/320584).

```
class MyDataGrid : System.Windows.Forms.DataGrid
{
   protected override bool ProcessCmdKey(ref Message msg, Keys keyData) 
   {
            const int WM_KEYDOWN = 0x100;
            const int WM_SYSKEYDOWN = 0x104;

            if ((msg.Msg == WM_KEYDOWN) || (msg.Msg == WM_SYSKEYDOWN))
            {
                switch (keyData)
                {
                    case Keys.Shift | Keys.Delete:
                        MessageBox.Show("shift + del pressed");
                        break;
                }
            }
            return base.ProcessCmdKey(ref msg, keyData);
   }
} 
```

# python - 将视图限制为只能由 App Engine 内部网络访问

> ID：14825462
> 
> 赞同：2
> 
> 时间：2013-02-12T04:38:22.003
> 
> 标签：python, google-app-engine, flask

我想找到一种方法来限制视图（请求处理程序）只能从我的视图内而不是 app.yaml 内的 Google App Engine 内部网络中调用。

例如，我有一个视图来处理我的 Flask 应用程序中的入站电子邮件

```
@app.route('/_ah/mail/notifications@example.appspotmail.com', methods=['POST'])
def inbound_notification_email():
    from google.appengine.api import mail
    message = mail.InboundEmailMessage(request.data)
    ...
    return '' # 200 OK 
```

虽然我知道我可以将所有邮件处理程序放在他们自己的文件/wsgi 实例中，如下所示：

```
handlers:
- url: /_ah/mail/.+
  script: inbound_mail.app
  login: admin 
```

我宁愿不必这样做，因为我使用的是 Flask 而不是 Webapp。现在，请求就像上面的设置一样工作，但它是公开的。

检查对我的`inbound_notification_email()`视图的请求，我看到`X-App-Country`请求标头设置为`ZZ`，请求的远程地址为`0.1.0.20`. 我知道 0.xxx IP 范围是 IANA 为本地网络保留的，因此检查 request.remote_address 是否以“0”开头似乎是合乎逻辑的。会起作用，但我不确定 App Engine 中的所有内部请求是否总是以这种方式处理（想到推送队列和 xmpp）。

我惊讶地看到一件事是`users.is_current_user_admin()`返回 False，`inbound_notification_mail()`即使您`login: admin`在使用 Webapp 时进行了设置。

# jms - JMS Query：如何定义主题和队列？

> ID：14825463
> 
> 赞同：0
> 
> 时间：2013-02-12T04:38:23.300
> 
> 标签：jms, spring-jms, jms-topic

我们已经在我们的 jms-context.xml 中定义了 inboundConnector，如[http://activemq.apache.org/jms-and-jdbc-operations-in-one-transaction.html](http://activemq.apache.org/jms-and-jdbc-operations-in-one-transaction.html)中指定的队列

我为主题定义了一个新的 inboundTopicConnector，当我为该主题发送一条消息时，它会给出以下错误 java.lang.UnsupportedOperationException: Adestination must be specified。

你能帮我解决这个问题吗？

在 jms-context.xml 中

```
bean id="inboundConnector" ....
property name="destinationType" value="javax.jms.Queue"

bean id="inboundTopicConnector" ...
property name="destination" value="${jms.topic}"
property name="destinationType" value="javax.jms.Topic" 
```

在 jms-context-without-inbound-listeners.xml

```
bean id="sendTo" ...
bean id="topic" class="org.apache.activemq.command.ActiveMQTopic"
property name="physicalName" value="${jms.topic}" 
```

在java文件中

```
@Autowired
  @Qualifier("topic")
  private Destination destination;
          getJMSTemplate().setPubSubDomain(true);
          getJMSTemplate().send(this.destination, new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
              return session.createTextMessage("Hello...." + destination);
            }
          }); 
```

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:11:40.427

每当 postinq 这样的问题时，您必须包括堆栈跟踪 - 和更完整的配置（例如 bean“主题”）。

最好的猜测是未启用自动装配 - 所以目标字段是`null`. 您可以在调试器中验证这一点。

你包括了`<context:annotation-config/>`吗？这启用了自动装配。

# html - 浮动在div上不起作用

> ID：14825465
> 
> 赞同：0
> 
> 时间：2013-02-12T04:38:47.637
> 
> 标签：html, css, css-float

![在此处输入图像描述](../Images/0715dd83b87b575e35e230be0926b63e.png)我给这个 div 向左浮动，但它没有向左移动到它上面的 div .....

欢迎和邮件 ID 应与公司徽标 div 相邻。...

每个 div 应该水平对齐

[http://jsfiddle.net/TdcRJ/7/](http://jsfiddle.net/TdcRJ/7/)

```
 <div style="float: left;">
                        <p>welcome xyz! xyz@defie.co</p>
                    </div>
providing my code below

<div style="
    display: inline-block;
">
                    <a class="brand" href="&lt;?= HOME_URL ;?&gt;" style="">
                    Company LOGO
                    </a>
                </div>
                <div style="clear: left;">
                    <p>47657 Lakeview Blvd</p>
                    <p>Fremont CA 94538</p>
                    <p>510-657-8981</p>
                </div>

                <div style="float: left;">
                    <p>welcome xyz! xyz@defie.co</p>
                </div>

                <div class="inline" style="padding-top: 12px;">

                        <ul class="homePageLists" style="">
                            <li style="padding-bottom: 5px; list-style: none; color: #333;">
                                <a style="color: #333;" href="http://www.w3schools.com/" target="_blank">
                                  <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_menu.png">
                                   Menu
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #; ">
                                <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                  <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                  Inventory
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                  <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                  BOM List
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                    <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                    Sub BOM List
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #9e1c20; ">
                                <a style="color: #9e1c20;" href="http://www.w3schools.com/" target="_blank">
                                    <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_product.png">
                                    Product
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #ff5100; ">
                                <a style="color: #ff5100;" href="http://www.w3schools.com/" target="_blank">
                                    <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_customer.png">
                                    Customer List
                                </a>
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; color: #184179;">
                                <a style="color: #ff5100;" href="http://www.w3schools.com/" target="_blank">
                                    <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_vender.png">
                                    Vendor List
                                </a>
                            </li>
                        </ul>

                </div><!--/.nav-collapse --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:58:16.830

在这种情况下，您必须按 div 排列 div。为每个 div 提供一个浮点数。并为每个 div 设置一个高度和 with。之后，将此 div 包含在另一个主 div 中。我将很快包含 jsfiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:45:57.803

增加导航栏的宽度，然后它会从左到顶 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:21:06.937

试试这个

```
 <div class="companyLogo" style="width: 1009px;">
    <div style="width: 400px;height: 120px;">
    <div style="float:right;margin-top: -8px;">
    <a class="brand" href="&lt;?= HOME_URL ;?&gt;" style="">
        Company LOGO
        </a>

    <div style="clear: left;">
    <p>47657 Lakeview Blvd</p>
    <p>Fremont CA 94538</p>
    <p>510-657-8981</p>
    </div></div>

    <div style="float: left;">
    <p>welcome xyz! xyz@defie.co</p>
    </div>
    </div>
   <div class="inline" style="padding-top: 12px;">

    <ul class="homePageLists" style="">
     <li style="padding-bottom: 5px; list-style: none; color: #333;">
     <a style="color: #333;" href="http://www.w3schools.com/" target="_blank">
   <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_menu.png">
                                       Menu
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #; ">
                                    <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                      <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                      Inventory
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                    <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                      <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                      BOM List
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                    <a style="color: #653921;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                        Sub BOM List
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #9e1c20; ">
                                    <a style="color: #9e1c20;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_product.png">
                                        Product
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #ff5100; ">
                                    <a style="color: #ff5100;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_customer.png">
                                        Customer List
                                    </a>
                                </li>
                                <li style="padding-bottom: 5px; list-style: none; color: #184179;">
                                    <a style="color: #ff5100;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_vender.png">
                                        Vendor List
                                    </a>
                                </li>
                            </ul>

                    </div><!--/.nav-collapse -->

                    <div>
                        <p>ABC Systems</p>
                        <p>1234 lakeview Blvd</p>
                        <p>CA 94538</p>
                        <p>510-657-8981</p>
                    </div>

                </div> 
```

# ios - 用户不接受许可协议时如何退出 IOS 应用程序？

> ID：14825467
> 
> 赞同：2
> 
> 时间：2013-02-12T04:38:49.363
> 
> 标签：ios, user-interface

我知道苹果不支持以编程方式退出应用程序，但是如果用户不同意许可协议，我想退出我的应用程序？如果被拒绝，是否可以限制应用程序加载？或者在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T04:47:33.260

不要崩溃或强制关闭或想办法关闭您的应用程序。如果用户不接受该协议，那么他们可能对使用您的应用程序不感兴趣，最终他们将删除它。但是，按照协议所说的那样，显示协议警报（如果您已经有 EULA）然后指向相同并询问用户他们必须接受协议才能使用该应用程序。

其他方式可能是，预览一些屏幕（对于那些不接受 EULA 的人），如果他们喜欢您的屏幕，然后要求接受协议。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T04:42:21.403

我建议您继续重新显示许可协议。如果他们选择“否”，则会弹出一个提示“您必须接受使用此应用程序的协议”，然后当他们点击“确定”时，再次将他们重定向到协议确认。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:41:47.570

您可以显示一个单独的视图来道歉，未经用户同意，他们将无法使用您的应用程序。顺便说一句，这是让他们改变主意的另一个机会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T04:50:00.843

在我的一个应用程序中，我所做的是向用户展示了协议并要求他接受或拒绝它。

如果用户拒绝协议，那么我会显示一个弹出窗口，通知用户如果他拒绝协议，他将无法在应用程序中继续进行，并且我只将他保留在协议屏幕上。

如果您手动退出应用程序，那么您的应用程序将被苹果拒绝，因为苹果不希望应用程序以这种方式运行。

希望这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T04:43:10.517

```
 [[UIApplication sharedApplication]performSelector:@selector(suspend)]; 
```

但是像这样退出应用程序并不是一个好习惯。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T04:43:52.067

我想`NSAssert(NO, @"The user failed to accept the EULA");`可能会起作用，也许在呈现一个警报视图后的委托回调中，表明应用程序现在将退出，因为他们拒绝接受这些条款。然后，您可以轻松地在崩溃报告中跟踪断言失败，以确定有多少人拒绝了 EULA。

不过，我不能说这是否会通过应用商店的审查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T04:46:15.880

Apple 不建议使用`exit(0)`，但我认为在您的情况下应该没问题，因为如果用户不接受*许可协议，该应用程序将无法运行*

但不鼓励使用它来退出常规应用程序操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-12T22:32:18.450

您可以向用户显示通知，然后将它们启动到您的网站或 Facebook 页面。这将提供一个中断的流程，而不是一个只会出现和消失的对话框，直到用户感到被迫点击“我同意”。

您还可以在您的 plist 中将 UIApplicationExitsOnSuspend 设置为 YES，这将终止它进入后台的应用程序。然后，当用户从您的网站返回应用程序时，您将完全重新启动。有关如何执行此操作的信息在这里：[UIApplicationExitsOnSuspend 我还缺少什么？](https://stackoverflow.com/questions/3388951/uiapplicationexitsonsuspend-anything-else-im-missing)

# visual-c++ - 从 VC++ 将字节数组传递给 C 函数

> ID：14825470
> 
> 赞同：0
> 
> 时间：2013-02-12T04:39:06.547
> 
> 标签：visual-c++, windows-phone-8

如何从 VC++ 将字节传递给 c 函数。我正在使用 WinRT 编译。

错误：与参数类型不兼容。

C 函数

```
 int TestFunction(unsigned char testdata[])
 {
 } 
```

VC++ 类

```
 int Wrapper::DoSomething(IVector<unsigned char>^ inputBytes)
 {
      TestFunction(inputBytes);
 } 
```

# html - 将文本正好放在图像旁边

> ID：14825473
> 
> 赞同：0
> 
> 时间：2013-02-12T04:39:22.427
> 
> 标签：html, css

我试图将文本正好放在图像旁边的 div 中（水平），并且它必须是可点击的

下面是代码，我试过了...

```
<!DOCTYPE html>
<html lang="en">
 <head>
  <style>
   #div {
    width: 128px;
    height: 35px;
    border: 2px solid #ccc;
   }
  </style>
<body>
<div id="div">Some service   
<a href="http://stackoverflow.com">
<img src="http://upload.wikimedia.org/wikipedia/commons/1/1a/Volkswagen_Logo.png"   alt="Stack Overflow" width="40" height="35"title="Click to return to Stack Overflow homepage" />
</a>
</div>  
</body>
</html> 
```

![我正在尝试像这张图片一样](../Images/56f77e4022b24ee9583d65b8de0eb807.png)

解决方案 ：

```
<!DOCTYPE html>
<html lang="en">
<head>
<style>
#div {
width: 128px;
height: 35px;
border: 2px solid #ccc;
}
</style>
<body>
<div id="div">sdasdasdasd   
<a href="http://stackoverflow.com">
  <img src="http://upload.wikimedia.org/wikipedia/commons/1/1a/Volkswagen_Logo.png"    alt="Stack Overflow" width="40" height="35"title="Click to return to Stack Overflow homepage" style="vertical-align:middle"" />
</a> 
</div>  
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:49:02.227

我想这就是你需要的吗？[**演示**](http://jsfiddle.net/SYxcX/)

```
<div id="div">  
<a href="http://stackoverflow.com">Some service 
<img src="http://upload.wikimedia.org/wikipedia/commons/1/1a/Volkswagen_Logo.png"   alt="Stack Overflow" width="40" height="35"title="Click to return to Stack Overflow homepage" />
</a>
</div> 
```

# php - 基本的 php pbkdf2 散列

> ID：14825477
> 
> 赞同：1
> 
> 时间：2013-02-12T04:39:49.460
> 
> 标签：php, hash, salt, pbkdf2

我对 php 比较陌生，并且刚刚开始掌握哈希密码的重点（我认为？）。无论如何，这是我的问题......

现在我有一个带有用户名、密码、盐字段的 mysql 数据库。密码字段长度为 64 个字符，盐字段长度为 3 个字符。在注册时，每个用户名都被分配一个随机盐。我对此没有任何问题（我相信）。首先，用户所需的密码通过以下方式进行哈希处理：

```
$hashedinput = hash ('sha256', $input); 
```

然后通过以下过程使用 pbkdf2 中包含的 salt 对用户所需的密码进行哈希处理，并将其输入数据库：

```
$password = pbkdf2('sha256', $hashedinput, $salt, 10000, 64); 
```

**我的问题是登录。**将数据库中的哈希密码与用户输入的密码进行比较时，它总是回来！=。这是我验证登录的方法：

```
$userData = mysql_fetch_array($search, MYSQL_ASSOC);
$inputhash = hash('sha256', $input); // From Form
$salt = $userData['salt']; // Salt from DB
$password = pbkdf2('sha256', $inputhash, $salt, 10000, 64);
$knownpassword = $userData['password']; // Known password from DB 
```

所以，为了排除故障，我回显了所有输出，这就是我输入正确密码时的样子（它没有让我登录）：

输入密码：3d8bc905668c1a1cca5b53a78941d3ca4673e12df6ac5e98e19fa47b153406f6e66913e43bf60478907ca07429b0cf90c808ce2097e0544cc44d298bfb7b85ad

数据库密码：3d8bc905668c1a1cca5b53a78941d3ca4673e12df6ac5e98e19fa47b153406f6

请注意，输入密码的前 64 个字符是正确的，但它会继续输入 128 个字符。DB密码只有64。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:44:19.663

Thomas Ptacek 不久前[写了一篇很棒的文章](http://hashphp.org/hashing.html)，详细解释了盐是什么，为什么它有用，并给出了关于密码散列系统需要记住的 #1 规则：

> 使用别人的密码系统。不要建立自己的。

如果您打算在应用程序中使用 PHP 5.5，请使用新的[password_hash](http://php.net/password-hash) API；如果不是，请确保您至少使用 PHP 5.3 并使用[password_hash 用户空间兼容性库](https://github.com/ircmaxell/password_compat)。它们旨在为您消除所有痛苦。

# mongodb - mongodb 的 db.currentOp() 中的锁是什么？

> ID：14825488
> 
> 赞同：0
> 
> 时间：2013-02-12T04:41:11.240
> 
> 标签：mongodb

我正在尝试将数百万条记录插入数据库。在插入过程中，我看到了下面的锁 json。有人可以解释什么是“^”吗？是全局写锁吗？我认为在最新的数据库中删除了全局写锁。仅供参考`emails_5`是我要插入记录的数据库。

```
"locks" : {
                "^" : "w",
                "^local" : "W",
                "^emails_5" : "W"
            }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:23:42.167

这些锁表示锁的类型，如下所示：http: [//docs.mongodb.org/manual/reference/current-op/#currentOp.locks](http://docs.mongodb.org/manual/reference/current-op/#currentOp.locks)

大写的`W`or`R`表示全局写锁，而小写的`w`and`r`表示数据库特定的锁。

基本上，那里的输出表明，对于`mongod`( `^`)，您正在对`local`数据库和`emails_5`数据库使用特定于数据库的锁定。

# xbee - API 模式 Xbee 不发送数字样本？

> ID：14825489
> 
> 赞同：2
> 
> 时间：2013-02-12T04:41:30.087
> 
> 标签：xbee

我一直在尝试让[XBee](http://en.wikipedia.org/wiki/XBee)传输按钮是向上还是向下。

为此，我将电路中的电线连接到 XBee 上的 DIO4。我使用[X-CTU](http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/xctu)将 DIO4 设置为数字输入模式。没有其他任何东西被启用。

现在，传感器 XBee 正在传输一个[ZigBee](http://en.wikipedia.org/wiki/ZigBee) I/O 数据样本 Rx 指示器数据包。我使用“构建无线传感器网络”一书来帮助解析数据包。它表示数据包始终包含模拟样本值，并且如果配置了数字引脚，则仅包含数字样本值。我收到了一个 21 字节的数据包，这意味着不包括数字位样本。数字掩码显示 IO4 已启用，所有模拟输入均已禁用。但是，数字值似乎已放入模拟样本中。

这是我的困惑。为什么数字样本被填充到模拟样本中？或者，如果没有配置模拟输入（与书上所说的相反），模拟样本是否会被忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:23:06.113

简短回答：是的，如果在模拟通道掩码中设置了位，则有效负载中只有模拟样本。

长答案：[XBee S2B 文档](http://ftp1.digi.com/support/documentation/90000976_M.pdf)在第 114 页的 ZigBee IO 数据样本 Rx 指示器部分中描述了数据包的详细信息。

总之，有效载荷以样本数（始终为 0x01）开始，然后是 16 位数字通道掩码和 8 位模拟通道掩码。掩码指示后面的数据。如果在数字通道掩码中设置了任何位，则将有一个 16 位值保存数字样本。然后是模拟通道掩码中指示的每个模拟样本的 16 位值，从 AD0 到 AD3，然后是电源电压。

Digi 的[开源 XBee Host C 库](https://github.com/digidotcom/xbee_ansic_library)中有一些代码，`include/xbee/io.h`用于`src/xbee/xbee_io.c`演示这些帧的解析。

# ruby - 在 ruby 中打印按时间顺序排列的字符串列表

> ID：14825490
> 
> 赞同：1
> 
> 时间：2013-02-12T04:41:33.573
> 
> 标签：ruby

是否可以在 ruby​​ 中打印按时间顺序排列的字符串？喜欢excel的页眉`A - Z`，然后`AA, AB, AC`。这可能在红宝石中吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:42:40.313

是的。尝试

```
string = 'A'
99.times { puts string.succ! } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T05:47:13.450

```
class Numeric
  Alph = ("A".."Z").to_a
  def alph
    s, q = "", self
    (q, r = (q - 1).divmod(26)) && s.prepend(Alph[r]) until q.zero?
    s
  end
end

[1, 2, 3].map(&:alph) # => ["A", "B", "C"]
[26, 27, 28].map(&:alph) # => ["Z", "AA", "AB"] 
```

# java - Recursive Binary Search Tree Insert

> ID：14825492
> 
> 赞同：7
> 
> 时间：2013-02-12T04:41:34.027
> 
> 标签：java, binary-search-tree

So this is my first java program, but I've done c++ for a few years. I wrote what I think should work, but in fact it does not. So I had a stipulation of having to write a method for this call:

```
tree.insertNode(value); 
```

where value is an int. I wanted to write it recursively, for obvious reasons, so I had to do a work around:

```
public void insertNode(int key) {
    Node temp = new Node(key);

    if(root == null) root = temp;

    else insertNode(temp);
}

public void insertNode(Node temp) {
    if(root == null)
        root = temp;

    else if(temp.getKey() <= root.getKey())
        insertNode(root.getLeft());

    else insertNode(root.getRight());
} 
```

Thanks for any advice.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-13T09:05:35.357

```
// In java it is little trickier  as objects are passed by copy.
// PF my answer below.

// public calling method

public void insertNode(int key) {
    root = insertNode(root, new Node(key));
}

// private recursive call

private Node insertNode(Node currentParent, Node newNode) {

    if (currentParent == null) {
        return newNode;
    } else if (newNode.key > currentParent.key) {
        currentParent.right = insertNode(currentParent.right, newNode);
    } else if (newNode.key < currentParent.key) {
        currentParent.left = insertNode(currentParent.left, newNode);
    }

    return currentParent;
} 
```

**萨米尔·苏库马兰**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:15:11.483

代码看起来与重载函数有点混淆。假设成员变量 'left' 和 'right' 分别是 BSTree 的左孩子和右孩子，你可以尝试通过以下方式实现它：

```
 public void insert(Node node, int value) {
    if (value < node.value)
    {
        if (node.left != null)
        {
            insert(node.left, value);
        } 
        else
        {     
            node.left = new Node(value);
        }
    } 
    else if (value > node.value)
    {
        if (node.right != null)
        {
            insert(node.right, value);
        }
        else
        {
            node.right = new Node(value);
        }
    }
}

........
public static void main(String [] args)
{ 
     BSTree bt = new BSTree();
     Node root = new Node(100);
     bt.insert(root, 50);
     bt.insert(root, 150);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T15:33:30.740

你应该看看这篇文章。它有助于实现树形结构和搜索、插入方法：http: [//quiz.geeksforgeeks.org/binary-search-tree-set-1-search-and-insertion/](http://quiz.geeksforgeeks.org/binary-search-tree-set-1-search-and-insertion/)

```
// This method mainly calls insertRec()
void insert(int key) {
   root = insertRec(root, key);
}

/* A recursive function to insert a new key in BST */
Node insertRec(Node root, int key) {

    /* If the tree is empty, return a new node */
    if (root == null) {
        root = new Node(key);
        return root;
    }

    /* Otherwise, recur down the tree */
    if (key < root.key)
        root.left = insertRec(root.left, key);
    else if (key > root.key)
        root.right = insertRec(root.right, key);

    /* return the (unchanged) node pointer */
    return root;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:47:33.877

您可以使用标准`Integer`（原始 int 的包装器）对象，而不是创建新的对象类型`Node`。在最新的 java Integer/int上支持**自动装箱**。因此，您的方法`insertNode(int key)`也可以接受`Integer`参数（确保它不为空）。

编辑：请忽略上面的评论。我不明白你的真正问题。你将不得不超载`insertNode()`。我想你是对的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T04:52:32.753

但是当你的时候温度在哪里`insertNode`？？如果 root 不为空，您当前的实现 temp 会丢失。

我想你想要类似的东西

```
root.getLeft().insertNode(temp); 
```

和

```
root.getRight().insertNode(temp); 
```

即在左子树或右子树中插入新节点（temp）。

# sh - 从 Shell 脚本运行可执行文件

> ID：14825503
> 
> 赞同：5
> 
> 时间：2013-02-12T04:43:09.237
> 
> 标签：sh

我无法启动从 shell 脚本创建的可执行文件。我想通过使用不同的命令行选项多次运行程序来自动化测试，以验证它是否正常工作。

当我键入`echo $SHELL`时，`/bin/sh`显示。

以下是我的 shell 脚本：

```
#!/bin/sh
clear 
echo "Running first test."
./myProgram
exit 0 
```

当我在同一目录中运行脚本 ( `sh myScript.sh`) 时，我看到以下输出：`myProgram`

```
Running first test.
: not foundsh: line 4: 
```

执行程序`./myProgram`时，它按预期运行，没有命令行选项。

我也尝试过：myProgram ./myProgram & myProgram & 基于对类似问题的回答，但它们都会导致上述错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T04:59:44.907

你的换行符搞砸了。用来`dos2unix`修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:54:26.323

为什么不尝试使用完整路径？例如，如果 myProgram 在 /home/user1/bin 中，您可以尝试 /home/user1/bin/myProgram 而不是 ./myProgram。这应该有效。

您还可以将路径添加到路径变量 $PATH 并从任何地方直接调用 myProgram。

在终端上运行“export PATH=$PATH:/home/user1/bin”，不带引号。请注意，这只影响您当前的终端会话。如果要永久添加路径，请使用以下行更新主目录中的 .bashrc 文件：

# jquery - jQuery克隆表单字段直到最大计数

> ID：14825505
> 
> 赞同：2
> 
> 时间：2013-02-12T04:43:12.470
> 
> 标签：jquery, forms, clone, field

我允许用户在点击时添加更多字段。但我希望允许用户添加最多 4 个字段。如何更改此代码以使其正常工作。因此，当用户创建总共 4 个元素时，`Add Photo`按钮应该变为禁用模式或隐藏。我更喜欢禁用，但如果它比隐藏更难也可以。

jQuery代码：

```
jQuery(document).ready(function(){

   jQuery('#add-photo-button').click(function(){

        var current_count = jQuery('input[type="file"]').length;
        var next_count = current_count + 1;

        jQuery('#file-upload').prepend('<input type="file" name="photo_' + next_count + '" />');    

   });

}); 
```

HTML 代码：

```
<form id="file-upload" action="#" method="GET" enctype="multipart/form-data">
    <div id="image-uploader-box" class="group">           
        <div id="forms" class="add-photo-fields">
            <input type="submit" value="Upload" />
            <input type="button" id="add-photo-button" class="add-photo-button" value="Add Photo"/>
        </div>
    </div> 
</form> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:48:16.180

尝试这个

**[演示](http://jsbin.com/alejak/2)**

```
jQuery(document).ready(function(){
  $cnt = 1;
  jQuery('#add-photo-button').click(function(){
   if($cnt == 4){
     //$('#add-photo-button').hide();
     $('#add-photo-button').prop('disabled', true);
   }
   $cnt++;
   var current_count = jQuery('input[type="file"]').length;
   var next_count = current_count + 1;
   jQuery('#file-upload').prepend('<input type="file" name="photo_' + next_count + '"  />');    

 });

}); 
```

# unit-testing - 如何访问 PHPUnit 模拟对象上的重载属性？

> ID：14825507
> 
> 赞同：2
> 
> 时间：2013-02-12T04:43:41.677
> 
> 标签：unit-testing, mocking, phpunit

使用 PHPUnit 模拟对象时，如何访问通常通过重载访问的对象的属性，即通过`__get()`？

例如，在下面的代码中，我正在测试一个 Post 对象。每个帖子都有一个作者，作者是角色类型。每个角色都有一个签名属性。

```
$author = $this->getMockBuilder('App_Model_Domain_Role')
        ->disableOriginalConstructor()
        ->getMock();        

$author->expects($this->any())
        ->method('__get')
        ->will($this->returnValue('authorname')); 
```

如您所见，我模拟了 Role 对象，然后将其配置为在`__get()`调用时返回一个字符串（'authorname'）。我正在测试的 Post 对象指的是`$this->author->signature`. 我希望它返回“作者姓名”，但测试错误表明这`$signature`是一个未定义的属性。

我尝试如上所述配置模拟但没有`method()`调用（认为`expects()`and`will()`调用将应用于所有模拟方法）但仍然没有成功。

有任何想法吗？

此外，如果您知道关于 PHPUnit 模拟的好教程，我会很想看到它 - 该手册似乎假定了该特定领域的先前测试知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:22:18.480

我尝试了与您相同的代码，它对我有用。我的 PHPUnit 版本是 3.7.12。您使用的是哪个版本？如果您运行的是旧版本，您可以尝试升级。

```
public function testMockingMagicGetter()
{
    $myMock = $this->getMockBuilder('MyClass')
        ->disableOriginalConstructor()
        ->getMock();
    $myMock
        ->expects($this->any())
        ->method('__get')
        ->will($this->returnValue('authorname'));
    var_dump($myMock->signature);
    var_dump($myMock->dummy);
    var_dump($myMock->someprop);
} 
```

结果是：

```
string(10) "authorname"
string(10) "authorname"
string(10) "authorname" 
```

# html - 里面的标签标签

> ID：14825508
> 
> 赞同：-1
> 
> 时间：2013-02-12T04:43:50.580
> 
> 标签：html

好的，所以我在我刚购买的一个应用程序上看到了这个，现在我想用我的表格来做。看起来标签实际上在输入内部。

**[http://i1309.photobucket.com/albums/s627/mievan123/This_zps1884e41d.png](http://i1309.photobucket.com/albums/s627/mievan123/This_zps1884e41d.png)**

我知道您可以使用占位符，但是一旦您开始在该字段中输入，它们就会消失。我希望它保持如上图所示。我打了“先生”。在我在标题字段中拍照之前。

有什么秘诀！！！！

```
label {
    border: 1px solid black;
    border-radius: 5px;
    margin-bottom: 5px;
    border-bottom: 1px solid #669244;
    background: #669244;
    color: #ddd;
    padding: 11px 10px;
}
input {
    border: 0;
    color: black;
    font-size: 14px;
    background: #669244;
}

textarea { 
    border: 0;
    color: black;
    font-size: 14px;
    background: #669244;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:51:36.627

您可以`input`用另一个具有边框和“标签”的元素围绕该元素，并从`input`.

```
label {
    border: 1px solid black;
    border-radius: 5px;
    color: gray;
    padding: 5px;
}
input {
    border: 0;
    color: black;
} 
```

[http://jsfiddle.net/ExplosionPIlls/JjasN/1/](http://jsfiddle.net/ExplosionPIlls/JjasN/1/)

# jquery - 用户名的 jQuery 正则表达式不起作用

> ID：14825511
> 
> 赞同：1
> 
> 时间：2013-02-12T04:43:55.280
> 
> 标签：jquery, regex

我正在使用以下代码来测试用户是否在输入字段中正确写入了用户名（id='username'）。不幸的是，当使用其他特殊字符时，代码无法报告错误，即使用^、*、+、§等。

例如：

> 米奇^
> 
> ppppppp§°
> 
> 米奇12-22

他们都通过了测试。

不幸的是，我花了几天时间，但未能解决问题。

用户名的语法是：

1.  第一个字符 = 字母
2.  以下字符 = 字母或数字或 _（下划线）。（点） - （破折号）
3.  最小长度 5 个字符
4.  最大长度 20 个字符

这是代码：

```
> var returncode = true; 
> var userinput = $('#username').val(); 
> var pattern = new RegExp(/^[a-zA-Z]{1}|[a-zA-Z0-9_\.\-]{4, 19}$/); 

> if(!pattern.test(userinput)) {    
>      returncode = false;
> } 
```

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:48:01.843

```
new RegExp(/^[a-zA-Z]{1}|[a-zA-Z0-9_\.\-]{4, 19}$/) 
```

正则表达式文字已经是正则表达式；你不需要再次施放它。`{1}`是多余的。`a-zA-Z0-9_`也是`\w`。`.`在字符类中没有特殊含义，`-`最后不需要转义。无论如何，第一个`[a-zA-Z]`可以只是`[a-z]`带有`i`标志，属于哪种。因此，顺便说一句：

```
/^[a-z]|[\w.-]{4,19}$/i 
```

到实际问题。`^`和`$`都是“或”中的选项，因此任何以一个字母或 4 到 19 个字母、数字、下划线、句点或破折号开头的用户名都可以使用。中间分组：

```
/^([a-z]|[\w.-]{4,19})$/i 
```

……除了，根据你的描述，你甚至不是故意的？它可能只是：

```
/^[a-z][\w.-]{4,19}$/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:48:01.137

尝试：

```
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('test'));
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('1testing'));
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('testing'));
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('micky^'));
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('ppppppp§°'));
console.log(/^[a-z][a-z0-9_.-]{4,19}$/i.test('micky12-22')); 
```

[http://jsfiddle.net/z5x6k/1/](http://jsfiddle.net/z5x6k/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:50:47.293

试试这个：

```
 var returncode = true; 
 var userinput = $('#username').val(); 
 var pattern = new RegExp(/^[a-z][a-z0-9_.-]{4,19}$/); 

 if(!pattern.test(userinput)) {    
      returncode = false;
 } 
```

在哪里

```
^[a-z][a-z0-9_.-]{4,19}$
   |        |________________Letters, numbers, dot and dash in remaining 
   |
Letter as start 
```

它肯定会起作用。

# c++ - 键入 Alt 键时可能会解决 char 中的“无效八进制数字”

> ID：14825513
> 
> 赞同：2
> 
> 时间：2013-02-12T04:44:04.113
> 
> 标签：c++, key, alt, octal

我正在编写一个执行二次公式的程序。我唯一的问题是程序的实际格式。允许我输入加减号和平方根符号的 alt 键给我带来了一些问题。

问题存在于

```
cout<< 0-b << char(241) << char(251) << char(0178); 
```

键入平方符号 (²) 的最后一个字符会报告无效的八进制数字错误。有没有办法解决这个问题，或者我必须通过简单地写“x^2”来满足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:58:31.840

您应该只删除`0`. `0178`数字常量上的前导零会自动被视为八进制并且`8`不是有效的八进制数字。

此外，您所指的[上标 2 字符是](http://www.fileformat.info/info/unicode/char/b2/index.htm)*十进制*178, `U+00B2`。另一种方法是仅`'\xb2'`在您的代码中使用。

当然，您还必须确保解释该输出流的任何内容都知道您尝试输出的 Unicode 字符。这可能取决于您的终端程序或控制台。如果没有，你可能不得不求助于黑客，`(x^2)`或者更糟糕的是，像这样的怪物：

```
 3     2
    3x  - 7x  + 42x - 1
y = -------------------
            12 
```

# servicestack - 缺少 ServiceStack 元数据描述

> ID：14825517
> 
> 赞同：2
> 
> 时间：2013-02-12T04:44:19.553
> 
> 标签：servicestack

在下面的给定示例代码中，元数据页面永远不会获得中指定的描述

```
[Description("GET account, all or by list of groups or by list of logins")] 
```

是否需要设置特殊配置才能在元数据页面中显示描述？

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using ServiceStack.ServiceHost;
using System.Runtime.Serialization;
using ServiceStack.WebHost.Endpoints;

namespace ConsoleApplication2
{
    public class User
    {
        public User()
        {

        }
        public int login;
        public string group;
        public string name;
    }

    [Description("GET account, all or by list of groups or by list of logins")]
    [Route("/accounts")]
    public class Accounts : IReturn<List<User>>
    {
        public string[] groups { set; get; }
        public int[] logins { set; get; }

        public Accounts() { }

        public Accounts(params int[] logins)
        {
            this.logins = logins;
        }

        public Accounts(params string[] groups)
        {
            this.groups = groups;
        }
    }

    public class Host : AppHostHttpListenerBase
    {
        public Host() : base("Test", 
                            typeof(Accounts).Assembly)
        {

        }

        public override void Configure(Funq.Container container)
        {
            SetConfig(new EndpointHostConfig { 
                EnableFeatures = Feature.All

            });
        }
    }

    public class Servce : IService
    {
        public object Get(Accounts request)
        {
            return new List<User>(){new User()};
        }

    }

    class Program
    {
        static void Main(string[] args)
        {
            var host = new Host();
            host.Init();
            host.Start("http://+:12345/");

            Console.ReadLine();

        }
    }
} 
```

导航到`http://localhost:12345/json/metadata?op=Accounts`生产

```
<body>
    <a id="logo" href="http://www.servicestack.net" title="servicestack"></a>
    <h1>Test</h1>

    <form>
    <div>
        <p><a href="/metadata">&lt;back to all web services</a></p>
        <h2>Accounts</h2>

        <div class="example">
        <!-- REST Examples -->
        ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:01:05.797

在[最近发布的 ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)中，`[Description]`已弃用，`[Api]`而在[ServiceStack 的 Swagger 支持](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)`[ApiMember]`中也使用了它。

现在这是一个完全注释服务的示例：

```
[Api("Service Description")]
[Route("/swagger/{Name}", "GET", Summary = @"GET Summary", Notes = "GET Notes")]
[Route("/swagger/{Name}", "POST", Summary = @"POST Summary", Notes = "POST Notes")]
public class MyRequestDto
{
    [ApiMember(Name="Name", Description = "Name Description", 
               ParameterType = "path", DataType = "string", IsRequired = true)]
    public string Name { get; set; }
} 
```

# jquery - 如果另一个人打开，如何关闭 div

> ID：14825519
> 
> 赞同：0
> 
> 时间：2013-02-12T04:44:34.040
> 
> 标签：jquery, if-statement, jquery-animate

编辑：由于完全没有回复而更新了措辞。

***说明***：

*****单击LEFT***按钮时， **Left** DIV 滑出。**

 *******单击RIGHT***按钮时，**右**DIV 滑出。**

 *****问题***：

如果**Left** DIV 已**退出**并单击***RIGHT***按钮**>>>**将**Left** DIV滑入**并**滑出**Right** DIV **。**

如果**右**DIV 已**滑出**并且单击了LEFT***按钮***>>>**将****右****DIV**滑入并滑出**左**DIV **。**

 *****非常感谢您的帮助。*

```
$("#left").click(function () {
    if (out === 0) {
        $("#left-slide").animate({
            width: "400px"
        }, {
            queue: false,
            duration: 1900
        });
        out = 1;
    } else {
        $("#left-slide").animate({
            width: "0px"
        }, {
            queue: false,
            duration: 2000
        });
        out = 0;
    }
});

     $("#right").click(function () {
    if (out === 0) {
        $("#right-slide").animate({
            width: "400px"
        }, {
            queue: false,
            duration: 1900
        });
        out = 1;
    } else {
        $("#right-slide").animate({
            width: "0px"
        }, {
            queue: false,
            duration: 2000
        });
        out = 0;
    }
}); 
```

这是带有完整代码的 jsFiddle：http: [//jsfiddle.net/fxVS9/](http://jsfiddle.net/fxVS9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:29:27.487

[http://jsfiddle.net/fxVS9/3/](http://jsfiddle.net/fxVS9/3/)

```
$(document).ready(function () {
    var l_out = 0;
    var r_out = 0;

    $("#left").click(function () {
        if (l_out === 0) {
            $("#left-slide").animate({
                width: "400px"
            }, {
                queue: false,
                duration: 1900
            });
            l_out = 1;
        } else {
            $("#left-slide").animate({
                width: "0px"
            }, {
                queue: false,
                duration: 2000
            });
            l_out = 0;
        }
        $("#right-slide").animate({
                width: "0px"
            }, {
                queue: false,
                duration: 2000
            });
            r_out = 0;
    });

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:18:02.940

这是一个紧凑的版本。

```
 $(document).ready(function () {
       $("#left,#right").click(function () {
              var clickedDiv = $(this).attr('id');
              var nonclickDiv = (clickedDiv === "left") ? "right" : "left";
              var currDiv = $('#' + clickedDiv + "-slide");
              var offDiv =  $('#' + nonclickDiv + "-slide" );
        currDiv.animate({
            width: currDiv.width() > 0 ? "0px" : "400px"
        }, {
            queue: false,
            duration: 1900
       });
       offDiv.animate({
            width: "0px"
        }, {
            queue: false,
            duration: 2000
       });
   });
 }); 
```

希望你喜欢（并接受:-)）哈哈。是的，代表。********

# iphone - 如何在 iOS 中使用动作脚本文件

> ID：14825520
> 
> 赞同：1
> 
> 时间：2013-02-12T04:44:37.027
> 
> 标签：iphone, ios, xcode, actionscript-3

我在动作脚本中有一个页面卷曲代码，我想在我的应用程序中使用该代码，该代码是使用 Xcode(Objective c) 开发的。任何人都可以告诉它是否可能。如果可能的话，请告诉我该怎么做。

动作脚本代码如下

```
package  
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.DisplayObject;
    import flash.display.GradientType;
    import flash.display.PixelSnapping;
    import flash.display.Sprite;
    import flash.geom.Matrix;
    import flash.geom.Point;
    import flash.geom.Rectangle;

    import asData.clsGlobalConstants;
    import com.DaveLibrary.clsSupport;
    import com.cupcake.Utils;

    public class clsPageTurn extends Sprite 
    {
        private var cMain:clsMain;
        private var gc:clsGlobalConstants;

        private var flipDirection:int;
        private var pageWidth:Number;
        private var pageHeight:Number;
        private var pageWidthHeight:Number;
        private var pivotY:Number;

        private var NextPageLeft:BitmapData;
        private var NextPageRight:BitmapData;

        private var StationaryPage:Sprite;
        private var StationaryPageMask:Sprite;
        private var StationaryPageBitmap:Bitmap;

        private var StationaryShadow:Sprite;
        private var StationaryShadowMask:Sprite;

        private var FlippingPage:Sprite;
        private var FlippingPageBitmap:Bitmap;
        private var FlippingPageMask:Sprite;
        private var FlippingPageBorder:Sprite;

        private var FlippingPageShadow:Sprite;

        private var OutsideShadow:Sprite;
        private var OutsideShadowMask:Sprite;

        private var LeftRect:Rectangle;
        private var RightRect:Rectangle;
        private var LeftPoint:Point;
        private var RightPoint:Point;

        private var StaticLeftRect:Rectangle;
        private var StaticRightRect:Rectangle;
        private var StaticLeftPoint:Point;
        private var StaticRightPoint:Point;

        public var percentage:Number;
        public var useShadows:Boolean = false;

        public function clsPageTurn(Main:clsMain, FlipDirection:int, pWidth:Number = 1366, pHeight:Number = 768, xOffset:Number = -171)
        {
            // constructor code
            cMain = Main;
            gc = cMain.gc;

            this.x = xOffset;

            percentage = 0; // tracks the last percentage that was drawn.

            StationaryPage = new Sprite();
            StationaryPage.x = xOffset;
            this.addChild(StationaryPage);

            StationaryPageBitmap = new Bitmap();
            StationaryPageBitmap.pixelSnapping = PixelSnapping.ALWAYS;
            StationaryPage.addChild(StationaryPageBitmap);

            StationaryPageMask = new Sprite();
            StationaryPageMask.x = xOffset;
            this.addChild(StationaryPageMask);

            useShadows = !clsMain.isSlow;
            if ( useShadows )
            {
                StationaryShadow = new Sprite();
                StationaryShadow.x = xOffset;
                this.addChild(StationaryShadow);

                OutsideShadow = new Sprite();
                OutsideShadow.x = xOffset;
                this.addChild(OutsideShadow);

                OutsideShadowMask = new Sprite();
                OutsideShadowMask.x = xOffset;
                this.addChild(OutsideShadowMask);
            }

            FlippingPage = new Sprite();
            FlippingPage.x = xOffset;
            this.addChild(FlippingPage);

            FlippingPageBitmap = new Bitmap();
            FlippingPageBitmap.pixelSnapping = PixelSnapping.ALWAYS;
            FlippingPage.addChild(FlippingPageBitmap);

            if ( useShadows ) 
            {
                FlippingPageBorder = new Sprite();
                FlippingPage.addChild(FlippingPageBorder);
            }

            FlippingPageMask = new Sprite();
            FlippingPageMask.x = xOffset;
            this.addChild(FlippingPageMask);

            if ( useShadows )
            {
                FlippingPageShadow = new Sprite();
                FlippingPage.addChild(FlippingPageShadow);
            }

            // set the page width and height and other variables for this page flip object.
            pageWidth = pWidth / 2; // the width is the width of one of our half pages, not the full screen width.
            pageHeight = pHeight;
            pageWidthHeight = pageWidth + pageHeight;           
            pivotY = (pageHeight/2) + pageWidth;

            // rect and points for copying the halves.
            LeftRect = new Rectangle(xOffset, 0, pageWidth, pageHeight);
            RightRect = new Rectangle(pageWidth + xOffset, 0, pageWidth, pageHeight);
            LeftPoint = new Point(xOffset,0);
            RightPoint = new Point(pageWidth + xOffset, 0); 

            StaticLeftRect = new Rectangle(0, 0, pageWidth, pageHeight);
            StaticRightRect = new Rectangle(pageWidth, 0, pageWidth, pageHeight);
            StaticLeftPoint = new Point(0,0);
            StaticRightPoint = new Point(pageWidth, 0); 

            flipDirection = FlipDirection;

            // create our page halves.
            NextPageLeft = new BitmapData(pageWidth, pageHeight, true, 0);
            NextPageRight = new BitmapData(pageWidth, pageHeight, true, 0); 

            if(flipDirection > 0) {
                StationaryPageBitmap.bitmapData = NextPageRight;
                FlippingPageBitmap.bitmapData = NextPageLeft;
            } else {
                StationaryPageBitmap.bitmapData = NextPageLeft;
                FlippingPageBitmap.bitmapData = NextPageRight;
            }

            // disable the mouse for this sprite so it doesn't trap events.
            this.mouseEnabled = false;
            this.mouseChildren = false;     
        }

        public function destroy():void
        {
            this.graphics.clear();

            if(this.parent != null) {
                if(this.parent.contains(this)) {
                    this.parent.removeChild(this);
                }
            }

            if(NextPageLeft != null) NextPageLeft.dispose();
            NextPageLeft = null;

            if(NextPageRight != null) NextPageRight.dispose();
            NextPageRight = null;

            if(StationaryPage != null) {
                while(StationaryPage.numChildren < 0) {
                    StationaryPage.removeChildAt(0);
                }
            }
            StationaryPage = null;

            if(StationaryPageMask != null) StationaryPageMask.graphics.clear();
            StationaryPageMask = null;

            if(StationaryShadow != null) StationaryShadow.graphics.clear();
            StationaryShadow = null;

            if(StationaryShadowMask != null) StationaryShadowMask.graphics.clear();
            StationaryShadowMask = null;

            if(OutsideShadow != null) {
                while(OutsideShadow.numChildren < 0) {
                    OutsideShadow.removeChildAt(0);
                }
            }
            OutsideShadow = null;

            if(OutsideShadowMask != null) OutsideShadowMask.graphics.clear();
            OutsideShadowMask = null;

            if(FlippingPage != null) {
                while(FlippingPage.numChildren > 0) {
                    FlippingPage.removeChildAt(0);
                }
            }
            FlippingPage = null;

            if(FlippingPageMask != null) FlippingPageMask.graphics.clear();
            FlippingPageMask = null;

            if(FlippingPageShadow != null) FlippingPageShadow.graphics.clear();
            FlippingPageShadow = null;

            if(FlippingPageBitmap != null) {
                if(FlippingPageBitmap.bitmapData != null) FlippingPageBitmap.bitmapData.dispose();
            }
            FlippingPageBitmap = null;

            gc = null;
            cMain = null;
        }

        public function Initialize( NextPage:BitmapData ):void
        {
            NextPageLeft.copyPixels(NextPage, StaticLeftRect, StaticLeftPoint);
            NextPageRight.copyPixels(NextPage, StaticRightRect, StaticLeftPoint);
            StationaryPageBitmap.smoothing = useShadows;
            FlippingPageBitmap.smoothing = useShadows;

            redraw(0);
        }

        public function InitializeDO( NextPage:DisplayObject ):void
        {
            var rect:Rectangle = NextPage.scrollRect;
            NextPage.scrollRect = LeftRect;
            NextPageLeft.draw( NextPage );
            NextPage.scrollRect = RightRect;
            NextPageRight.draw( NextPage );
            NextPage.scrollRect = rect;
            StationaryPageBitmap.smoothing = useShadows;
            FlippingPageBitmap.smoothing = useShadows;

            redraw(0);
        }

        public function InitializeHelperObjects():void
        {
            var bmData:BitmapData;
            var m:Matrix;
            var colors:Array;
            var alphas:Array;
            var ratios:Array;
            var maxLength:Number = Math.sqrt((pageWidth * pageWidth)+(pageWidthHeight * pageWidthHeight));
            var matrix:Matrix = new Matrix();

            StationaryPageBitmap.x = ((flipDirection * pageWidth) / 2) - (pageWidth / 2);
            StationaryPageBitmap.y = -pivotY - (pageHeight/2);

            StationaryPage.x = pageWidth;
            StationaryPage.y = pivotY + (pageHeight / 2);

            StationaryPageMask.graphics.clear();
            StationaryPageMask.graphics.beginFill(0x00FF00,1);
            StationaryPageMask.graphics.drawRect(((flipDirection > 0) ? 0 : -pageWidth)  , (-pivotY) - (pageWidthHeight / 2), pageWidth, pageWidthHeight);
            StationaryPageMask.graphics.endFill();          
            StationaryPageMask.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));

            colors = [gc.pageTurn_InsideShadow_Color, gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color];
            alphas = [0,0,gc.pageTurn_InsideShadow_Stationary_Max,0,0];
            ratios = [0,85,125,170,255];
            matrix = new Matrix();

            if ( useShadows )
            {
                StationaryShadow.graphics.clear();
                StationaryShadow.graphics.beginGradientFill(GradientType.LINEAR, colors, alphas, ratios, matrix);
                StationaryShadow.graphics.drawRect(((flipDirection > 0) ? 0 : -pageWidth), (-pivotY) - (pageWidthHeight / 2), pageWidth, pageWidthHeight);
                StationaryShadow.graphics.endFill();            
                StationaryShadow.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));
            }

            FlippingPageBitmap.x = ((-flipDirection * pageWidth) / 2) - (pageWidth / 2);
            FlippingPageBitmap.y = (-pivotY) - (pageHeight / 2);
            FlippingPage.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));

            maxLength = Math.sqrt((pageWidth * pageWidth)+(pageWidthHeight * pageWidthHeight));
            colors = [gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color,gc.pageTurn_InsideShadow_Color];
            alphas = [0, gc.pageTurn_InsideShadow_Flipping_Max, gc.pageTurn_InsideShadow_Flipping_Max, 0];
            ratios = [0, 100, 150, 255];
            matrix = new Matrix();
            matrix.createGradientBox( pageWidth, FlippingPageBitmap.height, 0, 0, 0);

            if ( useShadows )
            {
                FlippingPageShadow.graphics.clear();
                FlippingPageShadow.graphics.beginGradientFill(GradientType.LINEAR, colors, alphas, ratios, matrix);
                FlippingPageShadow.graphics.drawRect(0, 0, FlippingPageBitmap.width, FlippingPageBitmap.height);
                FlippingPageShadow.graphics.endFill();          
                FlippingPageShadow.transform.matrix = new Matrix(1,0,0,1,FlippingPageBitmap.x, FlippingPageBitmap.y);       
            }

            FlippingPageMask.graphics.clear();
            FlippingPageMask.graphics.beginFill(0xFF0000,1);
            FlippingPageMask.graphics.drawRect(((-flipDirection * pageWidthHeight) / 2) - (pageWidthHeight/2), (-pivotY) - (pageWidthHeight / 2), pageWidthHeight, pageWidthHeight*2);
            FlippingPageMask.graphics.endFill();
            FlippingPageMask.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));

            if ( useShadows )
            {
                OutsideShadow.graphics.clear();
                OutsideShadow.graphics.beginFill(0x000000,cMain.gc.pageTurn_OutsideShadow_Alpha);
                OutsideShadow.graphics.drawRect(FlippingPageBitmap.x, FlippingPageBitmap.y, FlippingPageBitmap.width, FlippingPageBitmap.height);
                OutsideShadow.graphics.endFill();
                OutsideShadow.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));

                OutsideShadowMask.graphics.clear();
                OutsideShadowMask.graphics.beginFill(0x0000FF,1);
                OutsideShadowMask.graphics.drawRect(((-flipDirection * pageWidthHeight) / 2) - (pageWidthHeight/2), (-pivotY) - (pageWidthHeight / 2), pageWidthHeight, pageWidthHeight*2);
                OutsideShadowMask.graphics.endFill();
                OutsideShadowMask.transform.matrix = new Matrix(1,0,0,1,pageWidth, pivotY + (pageHeight / 2));

                FlippingPageBorder.x = FlippingPageBitmap.x;
                FlippingPageBorder.y = FlippingPageBitmap.y;
                FlippingPageBorder.width = pageWidth;
                FlippingPageBorder.height = pageHeight;

                FlippingPageBorder.graphics.clear();
                FlippingPageBorder.graphics.beginFill(0x000001, 1);
                FlippingPageBorder.graphics.drawRect(0,0,gc.pageTurn_Border_Size, pageHeight);
                FlippingPageBorder.graphics.endFill();
                FlippingPageBorder.graphics.beginFill(0x000001, 1);
                FlippingPageBorder.graphics.drawRect(gc.pageTurn_Border_Size,0,pageWidth-(gc.pageTurn_Border_Size*2), gc.pageTurn_Border_Size);
                FlippingPageBorder.graphics.endFill();
                FlippingPageBorder.graphics.beginFill(0x000001, 1);
                FlippingPageBorder.graphics.drawRect(gc.pageTurn_Border_Size,pageHeight - gc.pageTurn_Border_Size,pageWidth - (gc.pageTurn_Border_Size*2), gc.pageTurn_Border_Size);
                FlippingPageBorder.graphics.endFill();
                FlippingPageBorder.graphics.beginFill(0x000001, 1);
                FlippingPageBorder.graphics.drawRect(pageWidth - gc.pageTurn_Border_Size,0,gc.pageTurn_Border_Size, pageHeight);
                FlippingPageBorder.graphics.endFill();
                FlippingPageBorder.visible = true;
            }

            StationaryPage.mask = StationaryPageMask;
            FlippingPage.mask = FlippingPageMask;
            if ( useShadows ) OutsideShadow.mask = OutsideShadowMask;
        }

        public function redraw(Percentage:Number):void
        {
            percentage = Utils.Clamp( Percentage, 0, 1 );

            var rot:Number = flipDirection * 45 * Percentage;

            rotateSprite(FlippingPage, (flipDirection * 90) - rot * 2);

            if ( useShadows )
            {
                FlippingPageShadow.alpha = 0;
                StationaryShadow.alpha = clsSupport.GetBezier2DPercentage(0,0,1,1,Percentage);
                FlippingPageBorder.alpha =  gc.pageTurn_Border_Alpha * (1 - percentage);
                rotateSprite(OutsideShadow, ((flipDirection * 90) - rot * 2) + (clsSupport.GetBezier2DPercentage(gc.pageTurn_OutsideShadow_OffsetStart, gc.pageTurn_OutsideShadow_OffsetEnd, gc.pageTurn_OutsideShadow_LeadIn, gc.pageTurn_OutsideShadow_LeadOut, Percentage) * -flipDirection));
                rotateSprite(StationaryShadow, (flipDirection * 45) - rot );
                rotateSprite(OutsideShadowMask, (flipDirection * 45) - rot);
            }

            rotateSprite(StationaryPageMask, (flipDirection * 45) - rot );          
            rotateSprite(FlippingPageMask, (flipDirection * 45) - rot);

            if(Percentage == 0 && useShadows) 
            {
                FlippingPageBorder.x = FlippingPageBitmap.x;
                FlippingPageBorder.y = FlippingPageBitmap.y;
                FlippingPageBorder.width = FlippingPageBitmap.bitmapData.width;
                FlippingPageBorder.height = FlippingPageBitmap.bitmapData.height;
            }
        }

        private function rotateSprite(spr:Sprite, degress:Number):void
        {
            var m:Matrix;
            var x:Number;
            var y:Number;
            x = spr.x;
            y = spr.y;
            m = spr.transform.matrix;
            m.a = 1;
            m.b = 0;
            m.c = 0;
            m.d = 1;
            m.rotate(clsSupport.ToRadians(degress));
            m.tx = x;
            m.ty = y;
            spr.transform.matrix = m;
        }
    }
} 
```

谁能告诉我如何做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:51:32.640

不可能的。如果要在objective-c中使用，必须直接移植。请注意，页面卷曲效果是内置在 iOS 中的。使用 iPhone 上的代码使用 Air 进行 iOS 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:37:12.187

使用 UIPageViewController 来获得这种卷曲效果。将 transitionStyle 设置为*UIPageViewControllerTransitionStylePageCurl*或使用 init-method – *initWithTransitionStyle:navigationOrientation:options:*。创建您想要使用的所有 viewController 的实例，将它们放入一个数组中。这个数组是*setViewControllers:direction:animated:completion:*方法的第一个参数。

# python - 缓存一个常量值

> ID：14825523
> 
> 赞同：1
> 
> 时间：2013-02-12T04:45:10.983
> 
> 标签：python

我正在为色盲人士开发一个应用程序，使他们能够顺利上网。我有一组颜色，比如说 A ，它由色盲人看到的所有颜色组成。集合 A 是使用涉及数百万种颜色的大型计算来计算的。集合 A 独立于我的应用程序中的输入，即集合 A 对我来说就像一个“常数”（就像数学中的“pi”）。现在我想存储集合 A，这样每当我运行我的应用程序时，它就可以在没有任何额外计算成本的情况下使用，即我不必每次运行我的应用程序时都计算 A。

我的尝试：我认为这可以通过构建一个具有一个常量的类来完成，但是可以在不为一个常量创建任何特殊类的情况下完成吗？

我正在使用 Python！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T04:48:50.790

不需要上课。您希望将计算的值存储在磁盘上并在启动时再次加载它们：为此您需要查看[搁置](http://docs.python.org/2/library/shelve.html)或[泡菜](http://docs.python.org/2/library/pickle.html)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:13:16.063

是的，你当然可以用 Python 做到这一点

如果你的常量只是一个数字——比如说，你刚刚发现了[tau——](http://www.youtube.com/watch?v=jG7vhMMXagQ)那么你只需在一个模块中声明它，然后将该模块导入所有其他源文件中：

常量.py：

```
# Define my new super-useful number
TAU = 6.28318530718 
```

其他地方：

```
from constants import TAU # Look, no calculations! 
```

扩展一点，如果你有一个更复杂的结构，比如字典，需要很长时间来计算，那么你可以在你的模块中声明它：

常量.py：

```
# Verified results of the national survey
PEPSI_CHALLENGE = {
    'Pepsi': 0.57,
    'Coke': 0.43,
} 
```

您可以对越来越复杂的数据执行此操作。最终，问题在于编写常量模块变得越来越难，数据越复杂，如果偶尔重新计算要缓存的值，更新可能会特别困难。在这种情况下，您希望查看[酸洗](http://docs.python.org/3.3/library/pickle.html)数据，可能是计算数据的 python 脚本的最后一步，然后将该数据加载到您导入的模块中。

为此，请导入 pickle，并将单个对象转储到磁盘文件中：

重新计算.py：

```
# Here is the script that computes a small value from the hugely complicated domain:
import random
from itertools import groupby
import pickle

# Collect all of the random numbers
random_numbers = [random.randint(0,10) for r in xrange(1000000)]

# TODO: Check this -- this should definitely be 7
most_popular = max(groupby(sorted(random_numbers)),
                           key=lambda(x, v):(len(list(v)),-L.index(x)))[0]

# Now save the most common random number to disk, using pickle
# Almost any object is picklable like this, but check the docs for the exact details
pickle.dump(most_popular, open('data_cache','w')) 
```

现在，在您的常量文件中，您可以简单地从磁盘上的文件中读取腌制数据，并使其可用而无需重新计算：

常量.py：

```
import pickle

most_popular = pickle.load(open('data_cache')) 
```

其他地方：

```
from constants import most_popular 
```

# eclipse - 按需验证netbeans中的页面文件夹，如eclipse

> ID：14825529
> 
> 赞同：1
> 
> 时间：2013-02-12T04:45:33.137
> 
> 标签：eclipse, validation, netbeans

如何按需验证 netbeans 中的 pages 文件夹，如 eclipse ？

在 Eclipse 中，我们右键单击 pages 文件夹并验证该文件夹。但是如何在 Netbeans 中

# c++ - 从字符串到字符的转换 - C++

> ID：14825530
> 
> 赞同：8
> 
> 时间：2013-02-12T04:45:35.347
> 
> 标签：c++, string, char, string-conversion

对于我根据规范编写的程序，变量作为字符串传递给函数。我需要将该字符串设置为 char 变量以设置另一个变量。我该怎么做呢？

这是头文件中的内容：

```
void setDisplayChar(char displayCharToSet); 
```

这是设置它的函数：

```
void Entity::setElementData(string elementName, string value){
    if(elementName == "name"){
            setName(value);
    }
    else if(elementName == "displayChar"){
    //      char c;
      //      c = value.c_str();
            setDisplayChar('x');//cant get it to convert :(
    }
    else if(elementName == "property"){
            this->properties.push_back(value);
    }
} 
```

感谢您在高级的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T04:47:51.400

您可以简单地通过索引从字符串中获取特定字符。例如，的第五个字符`str`是`str[4]`（因为第一个字符是 ，所以减一`str[0]`）。

请记住，如果字符串比您的索引认为的短，您会遇到问题。

`c_str()`，正如您在评论中所说，为您提供了一个`char*`表示形式（整个字符串作为 C“字符串”，更准确地说是指向第一个字符的指针）而不是`char`.

您可以同样索引它，但在这种特殊情况下没有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T04:47:39.763

您只需要使用 value[0] 并返回第一个字符。

```
char c = value[0]; 
```

# java - 裁剪图像的中心

> ID：14825533
> 
> 赞同：1
> 
> 时间：2013-02-12T04:45:57.940
> 
> 标签：java, android, opencv

我是 OpenCV 的新手，所以请耐心等待。我正在做一个 Android 应用程序来测量叶子颜色的相似性。我尝试使用 canny 仅检测叶区域，但我认为它需要更长的过程。这是代码，仅用于叶面积的检测。

```
public class editImage extends Activity {
//private static final int CV_64FC1 = 0;
protected ImageView im;
protected String msg_path;
private Mat mMatriximg;

private Mat mMatriximgBW;
private int CV_64FC1;

//private Mat mMatriximgBW;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_layout);

    im = (ImageView) findViewById(R.id.imV_ed);
    Intent iIdentify = getIntent();
    msg_path = iIdentify.getStringExtra("path");

    //to grayscale
    int im_gray = Highgui.CV_LOAD_IMAGE_GRAYSCALE;
    mMatriximg = Highgui.imread(msg_path, im_gray);

    // call library OpenCV
    //Imgproc.equalizeHist(mMatriximg, mMatriximg);
    Imgproc.Canny(mMatriximg, mMatriximg, 50, 150);

    mMatriximgBW = Mat.zeros(mMatriximg.height(), mMatriximg.width(), CV_64FC1);

    double y;
    double threshold=190;

    for(int i=0; i<mMatriximg.height(); i++){
        for(int j=0; j<mMatriximg.width(); j++){
            if(mMatriximg.get(i, j) [0]>=threshold){
                y=255;
            }else{
                y=0;        
            }
            mMatriximgBW.put(i, j, new double[] {y});
        }
    }

    //result mat to Grayscale
    Imgproc.cvtColor(mMatriximgBW, mMatriximgBW, Imgproc.COLOR_GRAY2RGBA, 4);

    Bitmap bmpOut = Bitmap.createBitmap(mMatriximgBW.cols(), mMatriximgBW.rows(), Bitmap.Config.ARGB_8888);

    Utils.matToBitmap(mMatriximgBW, bmpOut);
    im.setImageBitmap(bmpOut);

}

public void bckHome(View v){
    Intent iIden = new Intent(this, MBWDActivity.class);
    setResult(RESULT_OK, iIden);
    startActivityForResult(iIden, 99);
}
} 
```

所以我认为如果我切出叶子的中心作为样本数据（矩阵）会更有效。

有谁可以分享如何实现 cvSetImageROI 或其他方法？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:35:54.313

我已经[在这个答案上](https://stackoverflow.com/a/14696576/176769)讨论了这个话题。

您需要`Rect`使用 ROI 的维度创建一个。然后，创建一个新`Mat`的并将原始图像作为第一个参数传递给它的构造函数，并将具有 ROI 的矩形作为第二个参数。

# sml - 如何使用带有两个列表的地图？

> ID：14825535
> 
> 赞同：0
> 
> 时间：2013-02-12T04:46:05.583
> 
> 标签：sml

在 SML 中，如何使用一个 map 函数，它接受两个列表并返回一个列表中每个元素的列表乘以另一个列表中的相应元素？

我试过了

```
fun mult_list v1 v2 = map (fn (x, y) => x * y) (v1, v2); 
```

但它不工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:00:49.700

你想要[`ListPair.map`](http://www.standardml.org/Basis/list-pair.html#SIG%3aLIST_PAIR.map%3aVAL)：

```
fun mult_list v1 v2 = ListPair.map (fn (x, y) => x * y) (v1, v2) 
```

其中，顺便说一句，可以缩写为

```
fun mult_list v1 v2 = ListPair.map op* (v1, v2) 
```

[`ListPair.mapEq`](http://www.standardml.org/Basis/list-pair.html#SIG%3aLIST_PAIR.map%3aVAL)如果您想在列表长度不同时强制异常，您也可以使用。

# javascript - Javascript 切换与 if/else

> ID：14825538
> 
> 赞同：0
> 
> 时间：2013-02-12T04:46:22.183
> 
> 标签：javascript, performance

我正在学习 Codecademy 的 Javascript - Intro to Objects 课程，目前正在“回顾：迄今为止的故事......”课程中的[“4。我必须庆祝你的宝贝”练习。](http://www.codecademy.com/courses/spencer-sandbox/0#!/exercises/3)

练习是：

> 这个练习有很多电影和评论可以输入。你可能会想，“这是教编码还是打字？！”
> 
> 但是有这么多案件需要处理是有原因的。我们想表明，如果我们使用`if`-`else`语句，它会是低效的。我们可以使用条件课程的什么替代方法？
> 
> 想象一下，您有一个电影收藏，并且您想编写一些代码，将您的评论分配给每个电影。显然，每个评论都因电影而异。以下是电影和您的评论。使用在前面课程中学习的结构编写代码以获取以下信息：
> 
> *   《黑客帝国》——《出游好去处》
> *   “公主新娘”-“很棒的约会之夜电影”
> *   “欢迎来到美国” - “Amjad 的最爱”
> *   “记住泰坦” - “热爱运动”
> *   “为什么我看起来像 12 岁？” - “瑞恩和扎克的故事”
> *   《野外打袋鼠》——《给冷的澳洲代币电影》
> 
> `getReview`应该是一个函数，它接受电影名称并`return`根据上述信息对其进行评论。如果没有找到电影名称，则返回`"I don't know!"`。

我的理解是，将数据与逻辑分开很重要。所以，我最初的解决方案是：

```
var getReview = function (movie) {
    for (var i = 0; i < movieReviews.length; i++) {
        if (movie === movieReviews[i].name) {
            return(movieReviews[i].review);
        }
    }
    return("I don't know!");
};

var movieReviews = [{name: "Matrix", review:"good trip out"},
    {name: "Princess Bride", review:"awesome date night movie"},
    {name: "Welcome to America", review:"Amjad's favorite"},
    {name: "Remember the Titans", review:"love the sports"},
    {name: "Why do I look like I'm 12?", review:"The Ryan and Zach story"},
    {name: "Fighting Kangaroos in the wild", review:"Token Australian movie for Leng"}];

console.log(getReview("Matrix")); 
```

我确信有办法对此进行优化，但总的来说，我认为添加、编辑、修改等movieReviews 数组比编写switch 语句更容易。

换句话说，我不明白为什么 switch 语句与 if-else 语句相比效率低下。我错过了什么？

编辑：问题的帮助文本是：

> 可以使用 if、else if 和 else 语句，但效率低下。在你有很多不同的场景和不同的场景的情况下，尝试使用 switch 语句！
> 
> 因为我们正在定义一个函数，所以我们可以使用 return 关键字！
> 
> 确保您返回的内容与评论文本的大小写相符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:34:35.450

确实，目前的问题是有缺陷的。您正在学习的课程是**“对象简介”**，那么为什么两者都使用非关联数组？简单地：

```
movieReviews = { 
  "matrix": "a good trip"
}
// These are now both valid for accessing "a good trip"
movieReviews["matrix"];
movieReviews.matrix 
```

每部电影都将有一个唯一的名称，这使其成为**key**的完美候选者。此外，用于搜索评论的函数应该是评论对象的**方法**。对于它的价值（希望它是一些东西，*即使现在不是*），这就是我实施解决方案的方式。

```
MovieReviews = function() {
  /* Private data. */
  var data = {
    "matrix": "good trip out",
    "Princess Bride": "awesome date night movie",
    "Welcome to America": "Amjad's favorite"
  }
  /* Get a review for a movie by name, or notify that we don't know */
  this.getReview = function(movie) {
    if(data.hasOwnProperty(movie)) { return data[movie]; }
    return "I don't know!";
  }
  /* Add a review by movie name, and review string. */
  this.addReview = function(movie, review) {
    data[movie] = review;
  }
} 
```

现在实例化一个新`MovieReview`对象，添加一个新的电影评论，并打印一些测试。

```
var reviews = new MovieReviews();
reviews.addReview("Remember the Titans", "love the sports");

console.log(reviews.getReview("matrix")); // 'good trip out'
console.log(reviews.getReview("Remember the Titans")); // 'love the sports'
console.log(reviews.getReview("A Scanner Darkly")); // 'I don't know!' 
```

通过这种方式访问​​您对每部电影的评论是微不足道的，并且根本不需要迭代。您还将数据包含在对象中，提供封装并强制用户使用您的接口。

至于您最初的问题，我很难说如果不执行一些定时测试，and `if-else`or`switch`语句是否会更有效（也许您可以做一些事情并让我们知道！）。但根据[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)写的，

> “如果多个案例与提供的值匹配，则选择第一个匹配的案例......”

无论如何，这似乎只是在遍历这些案例。JavaScript 控制结构如何与您当前的 JS 引擎一起翻译可能会优化您的 switch 语句，我敢打赌它比 if-else 具有大量选项的性能更好。

抛开性能不谈，与 if-else 相比，阅读具有许多元素的 switch 语句**非常好。**此外，有时您可以更改其他因素，例如对象类型（*在我的示例中为数组 -> 对象*），以更好地解决问题。

不要陷入过早优化代码的陷阱，否则你将永远无法完成任何事情，维护你工作的人会永远恨你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:06:34.293

您将所有内容存储在一个数组中，当您可以使用 case/switch 时运行循环。您可以通过多种不同的方式完成此任务，但如果您使用大小写/开关而不是大量条件，您将使用更少的字符。

```
function movieReviews(movie) {
var x = "No review.";
switch (movie)
{
case 'Matrix':
  x="good trip out";
  break;
case 'Princess Bride':
  x="awesome date night movie";
  break;
case 'Remember the Titans':
  x="love the sports";
  break;
case 'Welcome to America':
  x="Amjad's favorite";
  break;
default:
  x="No movie selected.";
}
document.write("Movie: " + movie + " Review: " + x);
} 
```

它也使代码更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T19:57:40.577

尝试以下操作：

```
var getReview = function (movie) {
    switch (movie) {
        case 'Matrix': return "good trip out";
        break;
        case 'Princess Bride': return "awesome date night movie";
        break;
        case 'Welcome to America': return "Amjad's favorite";
        break;
        case 'Remember the Titans': return "love the sports";
        break;
        case 'Why do I look like I\'m 12?': return "The Ryan and Zach Story";
        break;
        case "Fighting Kangaroos in the wild": return "TOken Australian movie for Leng";
        break;
        default: return "I don't know!"
        break;
    }
}; 
```

# java - 为什么 JMS MessageProducer 方法 setTimeToLive 或 send() 不起作用？

> ID：14825539
> 
> 赞同：1
> 
> 时间：2013-02-12T04:46:27.607
> 
> 标签：java, jms

我尝试使用这两种方法中的任何一种，以便我通过该生产者发送的消息将过期。例如，我将生存时间设置为 5 秒（5 000 毫秒），但即使在 5 秒之后，订阅后我仍然会收到来自消费者的消息。我想知道为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:18:30.263

规范说如下，

> 当到达消息的过期时间时，提供者应该丢弃它。JMS API 没有定义任何形式的消息过期通知。客户端不应收到已过期的消息；但是，JMS API 不保证不会发生这种情况。

所以它完全是特定于实现的。您的发布者/订阅者应该按照 JMS 规范以丢弃过期消息的方式实现，否则即使在过期时间之后您也一定会收到这些消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:18:35.210

也许你做错了什么。试试我的测试

```
 String url = "tcp://localhost:61616";
    BrokerService broker = new BrokerService();
    broker.addConnector(url);
    broker.start();

    ConnectionFactory cf = new ActiveMQConnectionFactory(url);
    Connection conn = cf.createConnection();
    Session s = conn.createSession(true, Session.AUTO_ACKNOWLEDGE);
    ActiveMQQueue q = new ActiveMQQueue("test");

    MessageProducer p = s.createProducer(q);
    p.send(s.createTextMessage("!!!!"), DeliveryMode.NON_PERSISTENT, 0, 1000);  // ttl = 1s

    Thread.sleep(2000);

    MessageConsumer c = s.createConsumer(q);
    System.out.println("Received: " + c.receiveNoWait());

    System.exit(1); 
```

它使用activemq-all-5.6.0.jar，TTL = 1s，你会看到如果你在发送消息后睡眠超过1s，它就会从队列中消失。

# jquery - 改进导航动画

> ID：14825541
> 
> 赞同：0
> 
> 时间：2013-02-12T04:46:49.250
> 
> 标签：jquery, animation

我有一个导航，根据光标在列表上的位置，有一个小图像移动到列表项。但是由于某种原因，当我“鼠标悬停”另一个元素时，会出现某种滞后

```
//MOVE MOUSE ICON -- Mouse over
$('#lava_menu li').mouseover(function(){
var pos = $(this).position();
$("#google").animate({
    left: pos.left,
    right: pos.right,
    top: pos.top,
    bottom: pos.bottom
    },"slow");   
    break;  
});

//MOVE MOUSE ICON --Mouse out
$('#lava_menu li').mouseout(function(){
    var pos = $("li.current").position();
 $("#google").animate({
    left: pos.left,
    right: pos.right,
    top: pos.top,
    bottom: pos.bottom
    },"fast");  
    break;      
}); 
```

[http://jsfiddle.net/Komlan/NgEkr/](http://jsfiddle.net/Komlan/NgEkr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:10:58.083

**[工作演示 现在](http://jsfiddle.net/NgEkr/2/)**解决了图像根据需要来回移动的问题。

你的代码`mouseover`和`mouseout`被调用了两次不知道为什么。在这里，我使用了鼠标悬停（over and out）的切换功能。请参阅[this](http://www.tutorialspoint.com/jquery/events-hover.htm)以了解悬停（over and out）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:55:08.387

尝试使用`stop`jquery [http://api.jquery.com/stop/的方法](http://api.jquery.com/stop/)

更改您的javascript代码，例如

```
//MOVE MOUSE ICON --Mouse out
$('#lava_menu li').mouseout(function(){
    var pos = $("li.current").position();
         $("#google").animate({
            left: pos.left,
            right: pos.right,
            top: pos.top,
            bottom: pos.bottom
            },"fast").stop(true, true);  //using stop
}); 
```

您需要一些额外的代码才能更有效地创建它

[此http://jsfiddle.net/NgEkr/1/](http://jsfiddle.net/NgEkr/1/)的演示

# haskell - Haskell 中的双反斜杠 \\ 是什么意思？

> ID：14825543
> 
> 赞同：9
> 
> 时间：2013-02-12T04:46:57.393
> 
> 标签：haskell, syntax

我试图弄清楚 `\\`Haskell 中的含义是什么？

我有一个程序在编译时可以完美运行，这意味着它`\\`是一个内置函数，因为它没有在程序的任何地方定义。但是，在 GHCi 中，如果我尝试以相同的方式使用它，我会收到一条错误消息，指出它不在范围内。

它在每种情况下都意味着什么特别的东西吗？

这是我的代码；

```
module Main where

import Data.List

numbersA = [1, 105, 103, 7, 4, 102, 3, 101, 107, 8, 9]

numbersB = [6, 9, 7, 8, 1, 5, 3, 2, 4]

type Number = Integer

type Run = [Number]

extractRuns :: [Number] -> [Run]
extractRuns [] = []
extractRuns xs = run : extractRuns xs'
                   where run = buildRun (head xs) (tail xs)
                         xs' = xs \\ run

buildRun :: Number -> [Number] -> Run
buildRun seed numbers
  | endRun    = [seed]

  | otherwise = seed : buildRun seed' numbers'
                  where endRun     = successors == []
                        successors = filter (.#. seed) numbers
                        numbers'   = numbers \\ [seed]
                        seed'      = head successors

(.#.) :: Number -> Number -> Bool
x .#. y = x /= y && abs (x - y) < 10

runs = extractRuns numbersA

main = print runs 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-12T04:50:45.873

`\\`是[列表差分算子](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:-92--92-)。您可以在 GHCi 中使用它，您只需先导入即可`Data.List`。

```
Prelude> :m Data.List
Prelude Data.List> [1..5]\\[3,4]
  [1,2,5] 
```

在旁注中，这就是为什么我建议避免大规模进口`import Data.List`，更具体地说`import Data.List ( (\\) )`，这样您就可以更加了解您正在进口的内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T04:51:45.370

它是[列表差分操作](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3a-92--92-)。[如果您知道使用hoogle](http://www.haskell.org/hoogle/?hoogle=%5C%5C)，那么弄清楚这样的事情很容易。

# ant - 同一项目的多个构建

> ID：14825545
> 
> 赞同：0
> 
> 时间：2013-02-12T04:47:02.977
> 
> 标签：ant, web-deployment

我想部署一个 Java Web 应用程序。但是进行一些更改后，我还需要使用相同的应用程序进行跟踪。不同之处在于一个额外的包。通过使用 Ant 或其他一些工具，有可能吗？我需要将应用程序部署为两个战争文件。对不起，我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:32:39.860

使用 Ant 应该可以做到这一点。您可以创建两个单独的目标，一个用于每个战争，然后在您的构建中运行这两个目标。

```
<project name="Proj" default="package" basedir=".">
   <target name="package" depends="war1,"war2" />

   <target name="war1">
    ...  build the first WAR
   </target>
   <target name="war2">
    ...  build the second WAR
   </target>
</project> 
```

如果您发现目标是重复的，您可以将通用部分分解为较小的目标，或者您可以使用`macrodef`创建宏让您运行具有不同参数的类似目标。

# intellij-idea - 使用 IntelliJ 12 部署和调试远程 Jetty

> ID：14825546
> 
> 赞同：8
> 
> 时间：2013-02-12T04:47:19.530
> 
> 标签：intellij-idea, jetty, remote-debugging

我已经黑客和谷歌搜索了一段时间，我发现了几个 statck 溢出线程，它们似乎是为旧版本的 intellij 编写的，具有各种应用程序服务器。通常他们会告诉你进入

```
java -Xdebug -Xrunjdwp:transport=dt_socket,address=51887,suspend=n,server=y 
```

[一个答案](https://stackoverflow.com/a/1088759/1172174)建议使用类似的东西

```
-agentlib:jdwp:transport=dt_socket,address=51887,suspend=n,server=y 
```

但后来我明白了：

```
Error occurred during initialization of VM
Could not find agent library: libjdwp:transport.jnilib (searched /Library/Java/JavaVirtualMachines/1.6.0_37-b06-434.jdk/Contents/Libraries:/System/Library/Java/Extensions:/Library/Java/Extensions:.) 
```

然后在上面的一个或另一个之后，他们会告诉你类似“编辑配置>码头>远程并输入本地主机，51887”（端口号不同）

但是在 12 中，您选择远程后登陆的页面有很多选项，并且要求 JNDI 端口，而不是另一个选项卡上的 jdwp 端口，它实际上建议了上面的 jdwp 参数。

研究 JNDI 端口位，通常会产生将这样的参数添加到命令行的指令......

```
-Dcom.sun.management.jmxremote= \
-Dcom.sun.management.jmxremote.port=1099 \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.authenticate=false\ 
```

我也这样做了，我可以看到 java 持有的端口 1099（使用 lsof），我可以远程登录到 1099，所以我知道 JVM 正在监听。（我们尽量不要担心这样一个事实，即打开一个端口，任何人都可以通过该端口通过网络将任意 java 代码安装到您的计算机上而无需密码）

但是，在 Intellij 中，每当我尝试部署和调试时，它都会给我以下消息：

![是的，我知道这是一个古老版本的码头](../Images/c8459dea5a0577e43ce7d4442dcf8c42.png)

当我使用wireshark 窥探端口1099 时，我可以看到超过1099 的java RMI 通信（但它们难以辨认）。显然，Intellij 的通信并不令人满意，所以我想知道我是否需要对 Jetty 做些什么才能让它发挥得更好。请注意，更改 Jetty 版本目前不是一个选项，所以我们不要去那里:)。

我还尝试删除工件、禁用 make 并尝试仅连接调试器，但它仍然给我相同的红色气球和错误消息，因此显然需要 JNDI（端口 1099）部分。

有没有人看到我做错了什么，或者知道我应该做些什么来让它工作？

（我想知道它是否与此类似：http: [//youtrack.jetbrains.com/issue/IDEA-65746](http://youtrack.jetbrains.com/issue/IDEA-65746) jboss issue）

**编辑：**感谢[这个 google groups post](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/ixWOc9H9aJ0)我发现如果您不指定 Edit Configurations> + > jetty > remote，而是选择 Edit Configurations > + > remote，但调试和部署，则可以连接调试器是我所追求的，所以这只是一个一半的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:43:59.947

Jetty`remote`配置需要几个手动步骤，当您直接从 IDEA 使用`local`配置启动 Jetty 时，这些步骤会自动执行。

如果您绝对必须使用该`remote`配置，请尝试以下步骤：

在IDEA Jetty 远程运行配置`Remote staging`的选项卡部分：`Server`

*   指定和`Same file system`_`Type``Host`
*   在该部分的字段中指定`<Jetty home>/contexts`文件夹的路径`Local path``contexts`

（如果您在 IDEA 以外的另一台机器上运行 Jetty，设置会有所不同，但我认为在您的情况下它是同一台机器）

将以下 VM 参数传递给 Jetty 进程：

```
-Dcom.sun.management.jmxremote=
-Dcom.sun.management.jmxremote.port=<JNDI port>
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false
-DOPTIONS=jmx 
```

`<JNDI port>`值应与`JNDI port`IDEA Jetty 运行配置字段中指定的相同

将以下配置文件传递给 Jetty 进程（在命令行中）：

*   `etc/jetty-jmx.xml`
*   `etc/jetty.xml`

如果需要调试，还应该把从IDEA Jetty运行配置中获取的VM参数传递给Jetty进程：`Startup/Connection`tab，选择`Debug`list项下的`To debug remote server JVM ...`

这是使用所有必需选项启动 Jetty 进程的示例命令行：

```
java -Xdebug -Xrunjdwp:transport=dt_socket,address=60208,suspend=n,server=y -DSTOP.PORT=0 -Dcom.sun.management.jmxremote= -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -DOPTIONS=jmx -Dfile.encoding=UTF-8 -classpath start.jar etc/jetty-jmx.xml etc/jetty.xml 
```

# javascript - 重新加载页面但不要在 IE 中滚动到顶部

> ID：14825549
> 
> 赞同：3
> 
> 时间：2013-02-12T04:47:34.977
> 
> 标签：javascript

嗨，我有一张大表要管理的项目。当我单击按钮时，我使用

```
$.post("update_the_database.php", { mode: 'themode', username: username },
            function(result){
                window.location.href = window.location.href;
        }); 
```

这`"update_the_database.php"`在后台运行，然后在完成后重新加载页面。它会回到页面顶部...

我试过了：

```
window.location.href = window.location.href + '#the_id'; 
```

但在所有浏览器（IE、Firefox、Chrome、Safari）中，它会更改地址栏中的 URL，但不会重新加载页面。

从这里：

[window.location.href=window.location.href 和 window.location.reload() 的区别](https://stackoverflow.com/questions/2405117/difference-between-window-location-href-window-location-href-and-window-location)

“window.location.href=window.location.href 如果 URL 中有一个锚点 (#)，则不会重新加载页面 - 在这种情况下，您必须使用 window.location.reload()。”

所以我尝试了：

```
window.location.reload(true); 
```

它会重新加载页面并向下滚动到 Chrome 和 Safari 中的上一个位置，而不是 IE 和 Firefox...

[如果 url 中的所有更改都是哈希，如何强制页面重新加载？](https://stackoverflow.com/questions/1589799/how-to-force-a-page-to-reload-if-all-what-was-changed-in-url-is-hash)

方法#2：

```
window.location.hash = "#" + newhash;
window.location.reload(true); 
```

现在它可以在 Firefox 中运行...

顺便说一句，如果我使用 window.location.reload(true); 在 IE 中它出现：

```
Windows Internet Explorer

To display the webpage again, the web browser needs to
resend the information you've previously submitted.

If you were making a purchase, you should click Cancel to
avoid a duplicate transaction. Otherwise, click Retry to display
the webpage again.

Retry   Cancel 
```

您必须按“重试”，否则会出现错误页面，显示“网页已过期”。

为了避免我目前正在做的 IE 弹出窗口：

```
 window.location.hash = "#<?php echo $id;?>";
                if (navigator.appName != 'Microsoft Internet Explorer') {
                    window.location.reload(true);
                } 
```

虽然它只是将哈希放入地址栏中，即使我转到地址栏并按 Enter 也不会刷新页面。我必须删除哈希并按 Enter 重新加载页面...（然后滚动到顶部）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:03:24.447

而不是每次都使用 window.location.href 附加“#id”，这会在您的情况下导致问题，因为编码时间 window.location.href 已经包含一个 id 并且您将另一个 id 附加到它。在 window.location.href 上使用正则表达式 '/^(.*)#/is' 在重新加载之前找到实际的 url。现在使用你写的逻辑，即

```
$.post("update_the_database.php", { mode: 'themode', username: username },
        function(result){
            var str = window.location.href;
            var patt1 = /^(.*)#/;
            window.location.href = patt1.exec(str)[1];
            window.location.href = window.location.href + '#the_id'
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T01:23:53.093

我能想到的唯一技巧是保存由指示的滚动位置`window.scrollY`并将其传递给下一个请求（例如：使用查询字符串）。然后你创建一个代码来检查这个键是否存在，使用 . 跳转到那个位置`window.scrollTo(0, lastPos)`。如果您不使用任何 javascript 框架，它并不漂亮并且需要大量代码（并且会弄脏您的查询字符串）。

如果您这样做是为了定期更新数据，也许值得重新设计您的代码以进行 ajax 更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:14:53.590

对正则表达式的例子来说，你知道当你用正则表达式解决问题时他们会说什么！

```
 if(window.location.hash){
window.location.href = window.location.href.replace(window.location.hash,"#mynewhash");} 
```

window.location.hash 将包含

> URL 中 # 符号之后的部分，包括 # 符号。您可以侦听 hashchange 事件以获取支持浏览器中哈希更改的通知。

请参阅[Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# php - php 未定义变量：_session_register 问题

> ID：14825550
> 
> 赞同：0
> 
> 时间：2013-02-12T04:47:35.470
> 
> 标签：php, session-variables

有一个 php 项目`fully core php`。现在我的工作是改变一些风格问题。所以我只是用数据库下载了所有文件。我刚刚通过本地主机（LAMP）配置了所有数据库名称、用户名、密码。当我浏览该页面时，它正在显示该页面，但它存在一些错误。它显示错误，例如

```
Notice: Undefined variable: _session_register in path to the folder/session.php on line 8 
Notice: Undefined variable: _session_register in path to the folder/session.php on line 9
Notice: Undefined variable: _session_register in path to the folder/session.php on line 10 
Notice: Undefined variable: _session_register in path to the folder/session.php on line 11 
Notice: Undefined variable: _session_register in path to the folder/session.php on line 12 
Notice: Undefined variable: _session_register in path to the folder/session.php on line 13 
```

session.php 的代码是这样的

```
<?php
$_SESSION['example']="yes"; 
ini_set("url_rewriter.tags","");
ini_set('session.use_trans_sid', 0);
ini_set("session.cookie_domain", ".localhost");
session_start();
ob_start();
$_session_register["easb2b_username"];
$_session_register["easb2b_userid"];
$_session_register["easb2b_memtype"];
$_session_register["easb2b_adv_id"];
$_session_register["easb2b_adv_email"];
$_session_register["lang"];
?> 
```

所以有人可以告诉我如何解决这个问题。该项目有大约数千个文件。所以真的很难浏览所有文件并检查它们。任何帮助和建议都将是非常可观的。谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:57:04.630

```
<?php
// Use of session_register() is deprecated
$new_sessionvar = "Some value.";
session_register("new_sessionvar");
```

但是你仍然可以使用

```
session_start();
$_SESSION['new_sessionvar'] = "Some value"
```

为了使用它，您需要`register_global`打开`php.ini`

请注意，我在`session_start()`初始化上方有函数。在您的代码中，您可能希望将其添加到脚本的顶部，以防止[PHP 消息已发送标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。

# python - 将文本编码为 html 实体（不是标签）

> ID：14825552
> 
> 赞同：0
> 
> 时间：2013-02-12T04:47:42.307
> 
> 标签：python, django, pisa

我一直在寻找这个没有任何运气。所以我想问题可能是因为我错过了一些概念或者不明白我真正需要什么，所以问题就在这里：

我正在使用 pisa 创建一个 pdf，这是我用于它的代码：

```
def write_to_pdf(template_data, context_dict, filename):
    template = Template(template_data)
    context = Context(context_dict)
    html = template.render(context)
    result = StringIO.StringIO()
    pdf = pisa.pisaDocument(StringIO.StringIO(html.encode("UTF-8")), result, link_callback=fetch_resources)

    if not pdf.err:
        response = http.HttpResponse(mimetype='application/pdf')
        response['Content-Disposition'] = 'attachment; filename=%s.pdf' % filename
        response.write(result.getvalue())
        return response

    return http.HttpResponse('Problem creating PDF: %s' % cgi.escape(html)) 
```

因此，如果我尝试将此字符串变为 pdf：

> template_data = '测试 á'

它变成了这样的东西（考虑`#`是一个黑点而不是字母）：

> t##sting á

我尝试使用`cgi.escape`没有任何运气，因为黑点仍然存在并且它最终会打印 html 标签。它是 python 2.7，所以我不能使用`html.escape`和解决我所有的问题。

所以我需要一些可以将普通文本转换为 html 实体而不影响已经存在的 html 标签的东西。有什么线索吗？

哦，如果我改变那行：

```
pdf = pisa.pisaDocument(StringIO.StringIO(html.encode("UTF-8")), result, link_callback=fetch_resources) 
```

到

```
pdf = pisa.pisaDocument(html, result, link_callback=fetch_resources) 
```

它可以工作，但它不会创建我需要的 html 实体，因为我不确切知道将在那里放置什么样的字符，并且可能不会得到 pisa 的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:10:55.177

使用 Python 对命名的 HTML 实体进行编码

[http://beckism.com/2009/03/named_entities_python/](http://beckism.com/2009/03/named_entities_python/)

还有一个用于解码和编码的 django 应用程序：

[https://github.com/cobrateam/python-htmlentities](https://github.com/cobrateam/python-htmlentities)

`html.entities.codepoint2name`对于 Python 2.x（在 Python 3.x 中更改为）：

```
'''
Registers a special handler for named HTML entities

Usage:
import named_entities
text = u'Some string with Unicode characters'
text = text.encode('ascii', 'named_entities')
'''

import codecs
from htmlentitydefs import codepoint2name

def named_entities(text):
    if isinstance(text, (UnicodeEncodeError, UnicodeTranslateError)):
        s = []
        for c in text.object[text.start:text.end]:
            if ord(c) in codepoint2name:
                s.append(u'&%s;' % codepoint2name[ord(c)])
            else:
                s.append(u'&#%s;' % ord(c))
        return ''.join(s), text.end
    else:
        raise TypeError("Can't handle %s" % text.__name__)

codecs.register_error('named_entities', named_entities) 
```

# mongodb - mongodump 是否锁定数据库？

> ID：14825557
> 
> 赞同：17
> 
> 时间：2013-02-12T04:48:05.080
> 
> 标签：mongodb

我正在为 mongo 设置备份策略，只是想知道 mongodump 在执行数据库转储之前是否锁定了数据库？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T05:10:29.970

我在[mongo 的 google group](http://comments.gmane.org/gmane.comp.db.mongodb.user/70273)上找到了这个：

> Mongodump 对实时系统进行简单查询，不需要关闭。像所有查询一样，它在运行时需要读锁，但不会比普通查询阻塞。
> 
> 如果您有一个副本集，您可能希望使用 --oplog 标志来进行备份。

### 有关更多信息，请参阅文档

*   [http://docs.mongodb.org/manual/administration/backups/](http://docs.mongodb.org/manual/administration/backups/)

### 另外我发现了这个以前问过的问题

*   [MongoDB：mongodump/restore 与直接备份文件](https://stackoverflow.com/questions/9741111/mongodb-mongodump-restore-vs-backup-up-files-directly)

*摘自上述问题*

> 只有当您没有繁重的写入负载时，才可以选择锁定和复制文件。
> 
> `mongodump`可以针对实时服务器运行。它会产生一些额外的负载，所以不要在高峰时段这样做。此外，建议在辅助节点上执行此操作（如果您不使用副本集，则应该这样做）。
> 
> 当您拥有一个大到没有一台机器可以容纳它的数据库时，会出现一些复杂情况。请参阅[此文档](http://www.mongodb.org/display/DOCS/Backing+Up+Sharded+Cluster)。
> 
> 此外，如果您有副本集，则删除其中一个辅助节点并直接复制其文件。请参阅[http://www.mongodb.org/display/DOCS/Backups](http://www.mongodb.org/display/DOCS/Backups)：

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-12T12:54:03.617

Mongdump 不锁定数据库。这意味着其他读写操作将继续正常进行。

实际上， mongodump 和 mongorestore 都是非阻塞的。因此，如果您想 mongodump mongorestore 一个数据库，那么您有责任确保它确实是所需的快照备份/恢复。为此，您必须在使用 mongodump/mongorestore 进行/恢复备份时停止所有其他写入操作。如果您正在运行分片环境，那么建议您也停止平衡器。

# ios - 必须使用 VoiceOver 重新关注 UIView

> ID：14825563
> 
> 赞同：1
> 
> 时间：2013-02-12T04:48:27.203
> 
> 标签：ios, objective-c, voiceover

我正在尝试使用 VoiceOver 制作一个简单的应用程序。

该应用程序加载一个带有不透明视图的视图控制器，并在此视图上跟踪一根手指的位置。但是，我无法理解为什么我必须重新关注（通过点击）我的视图，即使在调用了它的“（void）accessibilityElementDidBecomeFocused”方法之后也是如此。我很困惑，因为我的视图的“（void）accessibilityElementDidLoseFocus”也从未被调用过。

我相信我正确地遵循了来自 SO 和 Apple 文档的 View Controller 遏制说明：

1 - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)

2 -[视图控制器包含如何在 iOS 5 中工作？](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5)

显示新视图控制器的代码如下：

```
CGRect frame = self.view.bounds;
customViewController = [[FocusIssueCustomViewController alloc] init];
[customViewController loadWithFrame:frame forViewController:self withAlpha:0.5];

// setting properties of the custom view:
[customViewController.view setAccessibilityLabel:@"Touch area"];
[customViewController.view setMultipleTouchEnabled:YES];
[customViewController.view setIsAccessibilityElement:YES];
[customViewController.view setAccessibilityTraits:UIAccessibilityTraitAllowsDirectInteraction];

// inform user the screen has changed:
UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification, customViewController.view); 
```

loadWithFrame 方法如下：

```
- (void) loadWithFrame: (CGRect) frame forViewController: (UIViewController*) viewController withAlpha: (float) alphaValue
{
// keep a reference to the view controller that requested the Custom View
[self setOriginatingViewController:viewController];

// load the custom view
[self setCustomView:[[FocusIssueCustomView alloc] initWithFrame:frame]];
[self customView].alpha = alphaValue;

// make this the ViewController for this view
self.view = [self customView];

// add the view controller following guidelines from the
// viewController containment in the UIViewController class reference from the Apple docs
[self.originatingViewController addChildViewController:self];
[self.originatingViewController.view addSubview:self.view];
[self didMoveToParentViewController:self.originatingViewController];
} 
```

然后，此自定义视图会跟踪一次触摸：实现文件如下所示。

```
#import "FocusIssueCustomView.h"
#define CIRCLE_DIAMETER 110

@interface FocusIssueCustomView ()
{
    // coordinate of this one touch
    float xCood, yCood;
}
@end

@implementation FocusIssueCustomView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
return self;
}

 // Only override drawRect: if you perform custom drawing.
 // An empty implementation adversely affects performance during animation.
 - (void)drawRect:(CGRect)rect
 {

 // make the custom view opaque
 CGContextRef ctx = UIGraphicsGetCurrentContext();
 CGFloat black[] = {0, 0, 0, 1.0};
 CGContextSetFillColor(ctx, black);
 CGContextAddRect(ctx, rect);
 CGContextFillPath(ctx);
 [self setAlpha:0.5];

 // clear current context
 CGContextRef CurrentContext = UIGraphicsGetCurrentContext();
 CGContextClearRect(CurrentContext, rect);

 // draw a blue circle, no fill for the touch
 CGContextRef context = UIGraphicsGetCurrentContext();
 CGContextSetLineWidth(context, 4.0);
 CGContextSetRGBStrokeColor(context, 0, 0, 255, 1);
 CGRect rectangle = CGRectMake(xCood - CIRCLE_DIAMETER/2, yCood - CIRCLE_DIAMETER/2, CIRCLE_DIAMETER, CIRCLE_DIAMETER);
 CGContextAddEllipseInRect(context, rectangle);
 CGContextStrokePath(context);
 }

- (void) accessibilityElementDidBecomeFocused
{
    NSLog(@"Inside the custom view's \"accessibilityElementDidBecomeFocused\" method");
}

- (void) accessibilityElementDidLoseFocus
{
    NSLog(@"Inside the custom view's \"accessibilityElementDidLoseFocus\" method");
}

#pragma mark - touch method
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // if 1 touch on screen, track this touch
    if ([[event allTouches] count] == 1)
    {
        CGPoint point = [[touches anyObject] locationInView:self];
        xCood = point.x;
        yCood = point.y;
        NSLog(@"Touch at (%f, %f)", xCood, yCood);        
    }

    // redraw
    [self setNeedsDisplay];
}
@end 
```

我真的需要一个视图控制器来控制这个透明的 CustomView（因此是视图控制器包含方法）。这就是为什么我不是简单地采用“addSubview”方法的原因。任何帮助是极大的赞赏..

谢谢 -

副总裁

# ruby-on-rails - Sidekiq 部署到多个环境

> ID：14825565
> 
> 赞同：12
> 
> 时间：2013-02-12T04:48:39.393
> 
> 标签：ruby-on-rails, deployment, capistrano, sidekiq

（有关我的详细配置，请参见下文，这是 Henley Chiu 回答的结果）。

我一直在尝试围绕 Sidekiq 部署进行思考，但我并没有真正理解它。我在同一台服务器上有一个带有暂存环境和生产环境的应用程序。我看到的关于sidekiq 部署的所有内容基本上都说“只需将sidekiq/capistrano 添加到您的部署文件中”，所以我就这样做了。然后说明是“这是一个带有选项的 yml 文件”，但似乎没有任何解释。我需要命名空间吗？我在初始化文件中看到了这一点，但这似乎指向服务器之外。

我之前部署过，每个阶段似乎都在适当的环境下启动 sidekiq，但它们都从同一个队列中处理。我的生产电子邮件正试图由舞台 sidekiq 处理，但失败了。我暂时停止了我的舞台，但最终我需要再次使用它。我希望我不是太密集，我真的试图理解这一点，只是很难找到一个明确的“这就是它的完成方式”。

对于它的价值，这里是 config/sidekiq.yml （在部署期间加载良好）：

```
:concurrency: 5
:verbose: false
:pidfile: ./tmp/pids/sidekiq.pid
:logfile: ./log/sidekiq.log
:queues:
  - [carrierwave, 7]
  - [client_emails, 5]
  - [default, 3]
staging:
  :concurrency: 10
production:
  :concurrency: 25 
```

日志文件和 pid 似乎在正确的位置，但队列只是合并了。任何帮助都会很棒！

另外，如果重要的话：

```
Rails 3.2.11, passenger, nginx, rvm, Ubuntu 12.10, and Ruby 1.9.3 
```

## 详细配置（答案）：

首先，我在端口 7777 （或者除了默认的 6379 之外的任何端口）设置了一个新的 redis 服务器。几乎遵循了我第一次使用的[redis 快速入门指南。](http://redis.io/topics/quickstart)

然后我制作了初始化文件；这有客户端和服务器配置。两者都需要让 sidekiq 多阶段工作。

请注意，我使用外部 YAML 文件进行设置。我为此使用[SettingsLogic](https://github.com/binarylogic/settingslogic)使事情变得更容易，但是您可以[通过包含文件来轻松地自己完成此操作](https://stackoverflow.com/questions/592554/best-way-to-create-custom-config-options-for-my-rails-app)。通过使用 yaml 文件，我们不必接触我们的环境/暂存或生产文件。

```
# config/initializers/sidekiq.rb
server = Settings.redis.server
port = Settings.redis.port
db_num = Settings.redis.db_num
namespace = Settings.redis.namespace

Sidekiq.configure_server do |config|  
  config.redis = { url: "redis://#{server}:#{port}/#{db_num}", namespace: namespace  }
end 
```

我正在使用乘客 - [sidekiq wiki 的故障排除页面](https://github.com/mperham/sidekiq/wiki/Problems-and-Troubleshooting)建议在使用独角兽或乘客时更改设置，因此我在此处添加了客户端设置的代码：

```
# config/initializers/sidekiq.rb (still)
if defined?(PhusionPassenger)
  PhusionPassenger.on_event(:starting_worker_process) do |forked|
    Sidekiq.configure_client do |config|
      config.redis = { url: "redis://#{server}:#{port}/#{db_num}", namespace: namespace }
    end if forked
  end
end 
```

这是我的设置文件（显然值已更改）：

```
#config/settings.yml
defaults: &defaults
  redis: &redis_defaults
    server: 'localhost'
    port: 6379
    db_num: 0
    namespace: 'sidekiq_development'

development:
  <<: *defaults

test:
  <<: *defaults

staging:
  <<: *defaults
  redis:
    <<: *redis_defaults
    port: 8888
    namespace: 'sidekiq_staging'

production:
  <<: *defaults
  redis:
    <<: *redis_defaults
    port: 7777
    namespace: 'sidekiq_production' 
```

我发现将命名空间添加到 config/sidekiq.yml 文件似乎不起作用——sidekiq 会在部署时使用正确的端口启动，但实际上不会处理任何内容。但由于 wiki 建议使用命名空间，我最终只是将其添加到 init 文件中。

我希望这对其他人有帮助，因为这对我来说真的很难理解，以前没有做过很多这种设置。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-23T11:30:13.617

如果所有环境（开发、登台和生产）都在同一台服务器上，则使用命名空间。在您的初始化程序/sidekiq.rb 文件中，

```
Sidekiq.configure_server do |config|
    config.redis = { url: 'redis://localhost:6379/0', namespace: "sidekiq_app_name_#{Rails.env}" }
end

Sidekiq.configure_client do |config|
    config.redis = { url: 'redis://localhost:6379/0', namespace: "sidekiq_app_name_#{Rails.env}" }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T17:10:57.240

在您的 initializers/sidekiq.rb 文件中，您指定所有环境启动时使用的 Redis 队列。对我来说是：

```
redisServer = "localhost"
Sidekiq.configure_server do |config|
  config.redis = { :url => 'redis://' + redisServer + ':6379/0' }
end 
```

如果您希望每个环境从单独的队列中处理，您可以在每个环境的环境文件夹中拥有特定的 sidekiq.rb 文件。每个都有不同的 redis 服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-08T10:34:08.910

除了命名空间之外，如果你也为 Redis 中的每个 Rails 环境分离出 DB 会很好，即：

```
env_num = Rails.env == 'staging' ? 0 : 1
Redis.new(db: env_num) # existing DB is selected if already present

Sidekiq.configure_server do |config|
  config.redis = { url: "redis://localhost:6379/#{env_num}", namespace: "app_name_#{Rails.env}" }
end

Sidekiq.configure_client do |config|
  config.redis = { url: "redis://localhost:6379/#{env_num}", namespace: "app_name_#{Rails.env}" }
end 
```

# c# - 视图模型中的 MVVM 颤动

> ID：14825571
> 
> 赞同：2
> 
> 时间：2013-02-12T04:49:02.403
> 
> 标签：c#, .net, wpf, data-binding, mvvm

我的视图模型是：

```
public class SampleViewModel : ViewModelBase
{
 private bool isBusy;
 public bool IsBusy
 {
   get { return isBusy; }
   set { isBusy = value;
         RaisePropertyChanged("IsBusy"); }

 private string prop1;
 public string Prop1
 {
   get { return prop1; }
   set { prop1 = value;
         RaisePropertyChanged("Prop1"); }
 }

 private string prop2;
 public string Prop2
 {
   get { return prop2; }
   set { prop2 = value;
         RaisePropertyChanged("Prop2"); }
 }

 private string prop3;
 public string Prop3
 {
   get { return prop3; }
   set { prop3 = value;
         RaisePropertyChanged("Prop3"); }
 }

 public SampleViewModel()
 {
     new Task(() => LoadProp1Async()).Start();
     new Task(() => LoadProp2Async()).Start(); 
     new Task(() => LoadProp3Async()).Start();
 }

 private void LoadProp1Async()
 {
    Thread.Sleep(5000);
    Prop1 = "a";
 }

 private void LoadProp2Async()
 {
    Thread.Sleep(15000);
    Prop2 = "b";
 }

 private void LoadProp3Async()
 {
    Thread.Sleep(10000);
    Prop3 = "c";
 }
} 
```

看法：

```
<toolkit:BusyIndicator BusyText="Loading..." IsBusy="{Binding IsBusy}" /> 
```

我想在 viewmodel 属性 IsBusy == true 时显示 throbber。当三个任务中的任何一个正在运行时，此属性为真。

我怎样才能做到这一点？我个人有一个解决方案（使用调解器），但我不喜欢它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:28:49.510

如果您使用的是 .NET 4.5，则可以使用 WhenAll 设置连接的延续：

```
 public SampleViewModel()
 {
    IsBusy = true;
    var task1 = Task.Run(() => LoadProp1Async());
    var task2 = Task.Run(() => LoadProp2Async());
    var task3 = Task.Run(() => LoadProp3Async());
    Task.WhenAll(task1, task2, task3).ContinueWith(t => IsBusy = false);
 } 
```

如果不是，您可以在另一个任务中执行类似 WaitAll 的操作：

```
 public SampleViewModel()
 {
    IsBusy = true;
    new Task(() =>
    {
        var task1 = new Task(() => LoadProp1Async());
        var task2 = new Task(() => LoadProp2Async());
        var task3 = new Task(() => LoadProp3Async());
        task1.Start();
        task2.Start();
        task3.Start();
        Task.WaitAll(task1, task2, task3);
        IsBusy = false;
    }).Start();
 } 
```

# ios - 在动画时更改 UIView 对象引用的颜色

> ID：14825574
> 
> 赞同：1
> 
> 时间：2013-02-12T04:49:17.733
> 
> 标签：ios, objective-c, xcode, animation, core-graphics

我在我的 xib 文件中绘制了一个视图。我希望它在动画时改变它的颜色。动画正在工作。但我找不到改变对象的颜色。请帮我解决一下这个。我对ios完全陌生。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:51:13.957

`UIView`在动画过程中 编写以下代码。

```
YourView.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:59:08.983

试试这个。

```
[UIView animateWithDuration:2.0 animations:^ {

    //other animations

    self.view.backgroundColor = [UIColor redColor];
}
completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:38:42.563

我认为您不能像那样为颜色设置动画（使用 animateWithDuration ...）。您将不得不使用计时器并迭代一系列颜色。例如，您可以使用 colorWithHue:saturation:brightness:alpha: 并增加色调值。

# php - HTML中的多个提交按钮

> ID：14825584
> 
> 赞同：0
> 
> 时间：2013-02-12T04:50:14.190
> 
> 标签：php, html, mysql

出于测试目的，我设计了如下简单的 HTML 表单

```
<html>
<head>
    <title>Test Form</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body> 
      <table border="0"  align="center">
            <tbody>
                <tr>
                    <td>First Name</td>
                    <td><input type="text" name="txtfname" value="" size="10" /></td>
                </tr>
                <tr>
                    <td>Last Name</td>
                    <td><input type="text" name="txtlname" value="" size="10" /></td>
                </tr>
                <tr>
            </tbody>  
         </table>    
       </body>
    </html> 
```

现在，在这个单一的 HTML 页面上，我想使用 PHP 使用 MySQL 执行基本的 SQL 功能。我想要单个 HTML 表单上的 4 个提交按钮（插入删除更新搜索）。我通过使用 DIV 标签进行了尝试，但仍然无法正常工作。有什么建议么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:56:25.833

```
<form method="post">
<table border="0"  align="center">
            <tbody>
                <tr>
                    <td>First Name</td>
                    <td><input type="text" name="txtfname" value="" size="10" /></td>
                </tr>
                <tr>
                    <td>Last Name</td>
                    <td><input type="text" name="txtlname" value="" size="10" /></td>
                </tr>
                <tr>
                   <input type="submit" name="insert" value="insert" />
                   <input type="submit" name="update" value="update" />
                   <input type="submit" name="delete" value="delete" />
                   <input type="submit" name="search" value="search" />
                </tr>
            </tbody>  
         </table>
</form> 
```

现在您可以使用下面的常规 php 内容检查用于提交的按钮`isset()`。

```
<?php

  if(isset($_POST['insert'])) { 
    //perform insert
  }
  if(isset($_POST['search'])) { 
    // perform search
  }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:57:20.410

你的意思是问你想执行 4 个动作。

`onClick`只需对每个按钮的操作使用 ajax 调用。

不要创建表单，只需进行函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:53:53.947

您可以在 HTML 页面上创建四个表单，如下所示

```
<form action="insert.php" method="post">
<!--  Some form data here -->
<input type="submit">
</form>

<form action="delete.php" method="post">
<!--  Some form data here -->
<input type="submit">
</form>

<form action="update.php" method="post">
<!--  Some form data here -->
<input type="submit">
</form>

<form action="search.php" method="post">
<!--  Some form data here -->
<input type="submit">
</form> 
```

根据您的问题，我了解上述情况

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:57:34.290

您可以使用此代码进行操作...

```
<input type="button" onclick="var e = document.getElementById('form_id'); e.action='adress1'; e.submit();" value="submit1">

<input type="button" onclick="var e = document.getElementById('form_id'); e.action='adress2'; e.submit();" value="submit2">

<input type="button" onclick="var e = document.getElementById('form_id'); e.action='adress3'; e.submit();" value="submit3"> 
```

# mysql - 是否可以跨多个表创建唯一（索引）约束？

> ID：14825586
> 
> 赞同：5
> 
> 时间：2013-02-12T04:50:29.840
> 
> 标签：mysql, sql, database, unique-constraint

有没有办法在 MySQL 数据库中的表之间创建唯一索引？

我的意思是独特的，

```
 table A ids=1,2,5,7... 

                table B ids=3,4,6,8... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T04:56:02.173

*我认为*，直接创建约束是不可能的。但是有一些解决方案可以让您获得唯一的 ID。

一个建议是使用`TRIGGER`. 在两个表上创建一个*BEFORE INSERT*`INSERT`触发器，用于在或期间检查 ID 是否存在`UPDATE`。

其次，是通过创建包含`UNIQUE`数字和其他表的第三个表：`TableA`然后`TableB`将在第三个表上引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:11:02.333

就像 JW 说的那样，这可能适用于使用第三张桌子。在 MySQL 中，您可以使用标识字段来简化此操作。一个非常简单的例子是使用这些表（表的简单版本，只有名称，不知道任何进一步的信息）：

```
CREATE TABLE a
  (
    `id` int,
    `name` varchar(100),
    PRIMARY KEY(`id`)
  )
  ENGINE = INNODB;
CREATE TABLE b
  (
    `id` int,
    `name` varchar(100),
    PRIMARY KEY(`id`)
  )
  ENGINE = INNODB;
CREATE TABLE c
  (
    `id` int auto_increment,
    `intable` varchar(10) not null,
    PRIMARY KEY(`id`)
  )
  ENGINE = INNODB; 
```

然后，当您想在任一表上插入一个值时，请执行（将“Joe”插入 a 的示例）：

```
INSERT INTO c (`intable`) VALUES ('a');
INSERT INTO a (`id`, `name`)
  SELECT LAST_INSERT_ID() AS id, 'Joe' AS name; 
```

c 中 intable 条目的唯一原因是您知道它是为哪个表创建的。可以使用插入到 c 中的任何类型的值来代替。

# forms - 模块表单 - 将 addField 的值存储到变量中

> ID：14825587
> 
> 赞同：0
> 
> 时间：2013-02-12T04:50:34.820
> 
> 标签：forms, magento, module

我的自定义模块中有类似的东西：

```
$fieldset->addField('orderinfo', 'link', array(
      'label'     => Mage::helper('web')->__('Order Info'),
      'style'   => "",
      'href' => Mage::helper('adminhtml')->getUrl('adminhtml/sales_order/view', array('order_id' => $order_id)),
      'value'  => 'Magento Blog',
      'after_element_html' => '',
    )); 
```

正如您从代码中看到的那样，我正在尝试将该字段链接到后端的“订单”选项卡。不过，我在获取 ID 时遇到了麻烦。我打算只将订单 ID 保存在数据库中，然后使用 addField 我可以获得正确的 url。

但是如何将 addField 值保存到变量中？

我想将值存储在“$order_id”中。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:40:42.147

我不确定您在哪个上下文中使用此字段集，但如果它用于创建或编辑对象，您可以尝试以下操作：

在控制器中：

```
public function editAction()
{
    $id = $this->getRequest()->getParam('id');
    $model  = Mage::getModel('module/model')->load($id);
    Mage::register('model_name', $model);
} 
```

然后在块中：

```
protected function _prepareForm()
{
    $model = Mage::registry('model_name');

    // add fieldset to form

    $fieldset->addField('orderinfo', 'link', array(
      'label'     => Mage::helper('web')->__('Order Info'),
      'style'   => "",
      'href' => Mage::helper('adminhtml')->getUrl('adminhtml/sales_order/view', array('order_id' => $model->getOrderId())),
      'value'  => 'Magento Blog',
      'after_element_html' => '',
    ));

    //rest of the elements
} 
```

再次回答我自己的帖子。（来源：[https](https://magento.stackexchange.com/questions/682/module-forms-store-value-of-addfield-to-a-variable) ://magento.stackexchange.com/questions/682/module-forms-store-value-of-addfield-to-a-variable ）

# javascript - 当我包含 jquery.js 文件时出现未捕获的错误

> ID：14825596
> 
> 赞同：0
> 
> 时间：2013-02-12T04:51:20.543
> 
> 标签：javascript, jquery

以下链接包含我原来的问题：“[在 javascript 中出现错误，当使用摘要身份验证对用户名和密码进行身份验证时](https://stackoverflow.com/questions/14795352/getting-error-in-the-javascipt-when-authenticate-the-username-and-password-usin)”

通过遵循建议`I included the jquery.js file`和`jquery-1.4.2.min.js`文件。在那之后我得到了错误，`"Uncaught TypeError: Object function (a,b){return new c.fn.init(a,b)} has no method 'Class' ".` 任何人都可以帮我解决这个问题。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:05:39.057

您需要包含位于此 github 存储库中的文件来定义`Class`函数。

```
https://github.com/Arrowgroup/JSDigestAuth/blob/master/src/main/webapp/resources/js/jquery.class.min.js 
```

实际上，查看那里的示例，您将需要在标题中包含所有这些，如果您没有按此顺序排列这些脚本文件，那么您将收到未声明的错误，正如您在两个问题中看到的那样。

> 顺便说一句，快速浏览一下这段代码会发现它是……好吧……让我们说“不太好”。作为一个例子，它可能会有所帮助，但我看到了许多不是领先实践的东西。

```
 <script type="text/javascript" src="jquery.min.js" ></script>
    <script type="text/javascript" src="jquery.class.min.js" ></script>
    <script type="text/javascript" src="md5-min.js" ></script>
    <script type="text/javascript" src="digest-auth.js" ></script>

    <script type="text/javascript">
        var digestAuth = new pl.arrowgroup.DigestAuthentication(
            {
                onSuccess : function(response){
                    $("#response").html(response);
                },
                onFailure : function(response){
                    $("#response").html('Invalid credentials !!!');
                },
                cnonce : 'testCnonce'
            }
        );
        function callREST(){
            digestAuth.setCredentials($('#user').val(),$('#password').val());
            digestAuth.call('/restauth/user/echo');
        }
    </script> 
```

# iphone - 将此 url 转换为 base 64

> ID：14825597
> 
> 赞同：0
> 
> 时间：2013-02-12T04:51:20.777
> 
> 标签：iphone, base64

我尝试过这种方式，但它不起作用。

这是要转换为 base 64 的 url

```
NSString *strUrlB64 = [NSString stringWithFormat:@"https://play.google.com/store/apps/details?id=com.ShiftSharerfree_new&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5TGlmdFNoYXJlcmZyZWVfbmV3Il0"];

NSData *dataUrl = [NSData dataFromBase64String:strUrlB64]; 
```

然后尝试将其发送到另一个网址。

```
NSString *urlStr = [NSString stringWithFormat:@"http://server39.pnht.com/360ad/apps/ads/%@/android/136/ord0.910950258132325?json=1&package_url=%@",self.mStrPid, dataUrl]; 
```

它给了我输出： NSString *urlStr = [NSString stringWithFormat:@" [http://server39.pbgs.com/360ads/apps/ad/%@/android/1360/ord0.910950252132325?json=1&package_url=%@](http://server39.pbgs.com/360ads/apps/ad/%@/android/1360/ord0.910950252132325?json=1&package_url=%@) " ,self.mStrPid, url];

它不是base 64。请指导如何从中获取base 64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:22:08.003

我正在使用 base 64 编码和解码**一些文本**，你能告诉我它是否适用于**URL**，

```
- (NSString *)base64Encode:(NSString *)plainText
 {
    NSData *plainTextData = [plainText dataUsingEncoding:NSUTF8StringEncoding];
    NSString *base64String = [plainTextData base64EncodedString];
    return base64String;
 }

- (NSString *)base64Decode:(NSString *)base64String
{
    NSData *plainTextData = [NSData dataFromBase64String:base64String];
    NSString *plainText = [[NSString alloc] initWithData:plainTextData   encoding:NSUTF8StringEncoding];
    return plainText;
} 
```

# iphone - 如何在 UIActionsheet 中使用 UITextFields？

> ID：14825599
> 
> 赞同：6
> 
> 时间：2013-02-12T04:51:33.773
> 
> 标签：iphone, ios, uiactionsheet

我是 iphone 的新手。我正在为我的项目做提醒应用程序。我想从 uiactionsheet 获取提醒标题和数据和时间等输入值。我在 actionsheet 中创建了 datepicker 和 uitextfield。操作表与文本字段一起出现。当我单击文本字段时，键盘出现但无法正常工作。当我输入时，它们在文本字段中不可见

```
-(void)btnSetRemainderTapped:(id)sender
{
UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Select reminder date and time"
                                                  delegate:self
                                         cancelButtonTitle:@"Cancel"
                                    destructiveButtonTitle:@"Save"
                                         otherButtonTitles:nil,nil];
 menu.tag =10;
[menu showInView:self.view];
menu.userInteractionEnabled=YES;

UITextField  *txtReminderTitle= [[UITextField alloc] initWithFrame:CGRectMake(20.0, 180, 280.0, 40.0)];
[txtReminderTitle setTag:99];
[txtReminderTitle setBackgroundColor:[UIColor whiteColor]];
[txtReminderTitle setFont:[UIFont boldSystemFontOfSize:17]];
[txtReminderTitle setBorderStyle:UITextBorderStyleNone];
[txtReminderTitle setTextAlignment:UITextAlignmentCenter];
txtReminderTitle.borderStyle = UITextBorderStyleRoundedRect;
txtReminderTitle.keyboardType = UIKeyboardTypeDefault;
txtReminderTitle.returnKeyType = UIReturnKeyDone;
txtReminderTitle.delegate =self;
[menu addSubview:txtReminderTitle];

UIDatePicker *pickerView = [[UIDatePicker alloc] init];
pickerView.datePickerMode = UIDatePickerModeDateAndTime;
pickerView.tag =9999;
[menu addSubview:pickerView];

CGRect menuRect = menu.frame;
NSInteger orgHeight = menuRect.size.height;
menuRect.origin.y -= 270; //height of picker
menuRect.size.height = orgHeight+270;
menu.frame = menuRect;

CGRect pickerRect = CGRectMake(20, 250, 280, 200);
pickerView.frame = pickerRect; 
```

}

```
-(void) actionSheet:(UIActionSheet *)actionSheet willDismissWithButtonIndex:(NSInteger)buttonIndex
  {
UIDatePicker *datePicker = (UIDatePicker *)[actionSheet viewWithTag:9999];
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateStyle = NSDateFormatterLongStyle;
[df setTimeStyle:NSDateFormatterShortStyle];
UITextField * txtReminderTitle = (UITextField *)[actionSheet viewWithTag:99];
   NSLog(@"%@",txtReminderTitle.text);  //it print null value
  } 
```

我不确定为什么它不接受来自键盘的输入。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:43:45.453

我发现，当你添加`UITextField`到`UIActionSheet`then时，`UITextField`它仍然保留在`UIActionSheet`. 所以你需要把`UITextField`上面那个`UIActionSheet`方法**输入任何文本**都
`[menu addSubview:txtReminderTitle];`行不通。`UITextField`

 **使用以下代码添加`UITextField`：

```
UIWindow *appWindow = [UIApplication sharedApplication].keyWindow;
[appWindow insertSubview:txtReminderTitle aboveSubview:menu]; 
```

只需要更改如何添加`UITextField`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:12:38.697

使用自定义 UIActionSheet 。像下面这样
1) 添加新的 UIViewController
2) 声明一个 UITextField

```
@interface ViewController  
{
            UITextField *TextField;

    } 
```

3) 添加 ActionSheet & TextField 的代表

```
@interface ViewController : UIViewController <UIActionSheetDelegate, UITextFieldDelegate> {

        UITextField *TextField;

    } 
```

4）现在实现方法

看到我在[stackoverflow上看到的这个链接](https://stackoverflow.com/questions/5089437/how-to-enable-text-input-in-uitextfield-which-is-in-uiactionsheet)**

# objective-c - 创建另一个类的实例的实例

> ID：14825601
> 
> 赞同：0
> 
> 时间：2013-02-12T04:51:45.170
> 
> 标签：objective-c, cocoa

我试图将我的一些“超级对象”分解为更易于管理的类，这些类具有单一（或至少有限）责任。

我刚刚遇到的一个问题是创建 UIBarButtonItem 的特定实例的对象。在现在的类中，我首先定义了一个 UIButton，然后将所有充当该按钮图标的图像作为子视图（例如，按钮代表对设备的访问/控制，我使用按钮图像来显示该设备的当前信号强度）。此外，该按钮正在侦听来自设备对象的 NSNotifications，以表示信号强度的变化，或者设备是否断开连接。按下按钮会向设备发送一条消息以断开连接。作为 RootViewController 的属性，所有这些代码现在都可以正常工作。但是，我想将它拉到它自己的类中，因为该按钮由多个类共享，它只会用不必要的方法使控制器混乱。

我尝试使用下面的 init 创建一个单独的类。但是，这不起作用，因为用于按钮的 self 与最终由 [UIBarButtonItem alloc] 创建的 self 不同，并且当 NSNotification 或按钮按下尝试向“self”选择器发送消息时，该对象已被释放。问题是，我不确定如何创建一个对象（由类定义），它只是另一个类的实例，而不是对象的属性（因为它目前是用于 RootViewController）。

**对我的问题进行编辑和补充说明**

MyClass 目前是 UIBarButtonItem 的子类。但是，我不想像这样使用它：[[MyClass alloc] initWithCustomView:]。我希望 [MyClass alloc] init] 自己完全创建自定义视图 - 换句话说，这个类的全部意义在于完全包含此按钮创建自身、管理其子视图并采取适当行动所需的一切当它被按下时。（我可以使用 [MyClass setupButton] 之类的公共方法和 UIBarButtonItem 类型的公共属性轻松使 MyClass 成为 NSObject。但是，我认为这看起来不对，因为那时该类仅用于创建按钮，但它不是按钮本身。）

```
@interface MyClass : UIBarButtonItem
@end

@implementation MyClass
- (id)init {
    if (self = [super init]) {

        UIImage *defaultButton = [[UIImage imageNamed:@"...
        UIImage *defaultButtonPressed = [[UIImage imageNamed:@"....
        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 40, 30)];
        [button setBackgroundImage:defaultButton forState:UIControlStateNormal];
        [button setBackgroundImage:defaultButtonPressed forState:UIControlStateHighlighted];
        [button addTarget:self action:@selector(deviceButtonPressed) forControlEvents:UIControlEventTouchUpInside];

        //Then several UIImageViews that are added as subviews of the button, initially hidden

        //Then set up the NSNotification listener

        //Finally
        self = [[UIBarButtonItem alloc] initWithCustomView:button];
    }

    return self;
}

//Then several functions to handle hiding and unhiding the subviews depending on the received device notifications, and a function to handle the button press and sending the message back to the device. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:58:52.333

在我看来，您想扩展`UIBarButtonItem`，而不是在您的`init`方法中创建它的实例。尝试从此更改您的类声明（在您的类的 .h 文件中）：

```
@interface MyClass : NSObject 
```

对此：

```
@interface MyClass : UIBarButtonItem 
```

然后只需返回`self`您的`init`方法。设置`self`一个值通常是一个坏主意。

如果您不确定这里发生了什么，您正在创建 UIBarButtonItem 的*子类*。这让您的子类可以扩展超类的功能。如果您感到困惑，您应该看一下面向对象语言中的子类化/类继承，以了解发生了什么。[本指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/DefiningClasses/DefiningClasses.html)记录了类在 Objective-C 中的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:00:26.087

这不是 Cocoa 中的初始化工作方式。请阅读Cocoa 核心能力指南中的[“初始化”](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Initialization.html)。

`init`运行此方法时，您的对象已被分配。您不应该将`self`指针重新分配给另一个分配。

你的类应该首先调用它的超类指定的初始化器`self = [super initWithWhatever:obj];`，然后设置它自己的属性。

# mysql - 我如何进行此选择查询

> ID：14825604
> 
> 赞同：0
> 
> 时间：2013-02-12T04:52:12.540
> 
> 标签：mysql, sql, select

我正在尝试从 2 个表中获取与部分成员名称匹配的 member_id、member_name、member_code 和成员类型。

我的表格结构

> **导师表**
> -tutor_id
> -tutor_name
> -tutor_code
> 
> **研究所表**
> -institute_id
> -institute_name
> -institute_code

当我从导师名或研究所名中给出部分名称时，查询需要识别这是一名导师或研究所。然后需要选择结果。

我试过这样的东西。但没有运气。

```
SELECT  
    COALESCE(t.tutor_id, i.institute_id) AS member_id,
    COALESCE(t.tutor_name, i.institute_name) AS member_name,
    COALESCE(t.tutor_code, i.institute_code) AS member_code
FROM (tutors AS t OR institutes AS i)
WHERE (t.tutor_name LIKE '%jaya%' OR i.institute_name LIKE '%jaya%'); 
```

希望有人指出我正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:58:54.750

最好的办法是使用 UNION：

```
SELECT t.tutor_id member_id, t.tutor_name member_name, t.tutor_code member_code, 'tutor' as type
FROM tutors t
WHERE t.tutor_name LIKE '%jaya%'
UNION 
SELECT t.institute_id, t.institute_name, t.institute_code, 'institute' as type
FROM institute i
WHERE i.institute_name LIKE '%jaya%' 
```

但是，这可能不会返回您要查找的内容。没有共同的领域，就无法确定是导师还是研究所……

假设如果存在导师，您可能可以应用这样的技巧，不要显示学院：

```
SELECT t.tutor_id member_id, t.tutor_name member_name, t.tutor_code member_code, 'tutor' as type
FROM tutors t
WHERE t.tutor_name LIKE '%jaya%'
UNION 
SELECT t.institute_id, t.institute_name, t.institute_code, 'institute' as type
FROM institute i
WHERE i.institute_name LIKE '%jaya%' 
   AND 0 = (SELECT COUNT(*) FROM tutors WHERE tutor_name LIKE '%jaya%') 
```

但这似乎非常奇怪......

# android - 数据库被锁定在 getReadableDatabase() android

> ID：14825607
> 
> 赞同：1
> 
> 时间：2013-02-12T04:52:34.443
> 
> 标签：android, sqlite

在我的应用程序中，我正在获取数据库被锁定。

我尝试使用其他帖子中提供的解决方案，但找不到合适的解决方案，这就是我发布这个问题的原因。

这是 onCreate

```
DBAdapter db = new DBAdapter(this.getApplicationContext());
        dialoge = new Progress_Dialog(this);
        dialoge.setCancelable(false);
        try {
            db.createDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

这是创建数据库方法

```
public void createDataBase() throws IOException{     
            boolean dbExist = checkDataBase();     
            if(!dbExist){
                this.getReadableDatabase();     
                try {     
                    copyDataBase();
                } catch (IOException e) {     
                    e.printStackTrace();
                    throw new Error("Error copying database");     
                }
            }
        } 
```

以下是检查数据库方法

```
 private boolean checkDataBase(){     
            SQLiteDatabase checkDB = null;
            try{
                String myPath = DB_PATH + DB_NAME;

                String myPath2 = DB_PATH + DB_NAME2;

                checkDB = SQLiteDatabase.openDatabase(myPath, null, 
                        SQLiteDatabase.OPEN_READWRITE);

                if(checkDB != null){
                    checkDB.close();

                }
                checkDB = SQLiteDatabase.openDatabase(myPath2, null, 
                        SQLiteDatabase.OPEN_READWRITE);

            }catch(SQLiteException e){
        //      e.printStackTrace();
                //database does't exist yet.
                System.out.print("SQLiteException   "+e.toString());
            }
            if(checkDB != null){
                checkDB.close();

            }
            return checkDB != null ? true : false;
        } 
```

请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T05:34:15.860

发生“锁定”是因为您试图打开多个`SQLiteDatabase`实例。[按照这篇文章](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)`SQLiteDatabase`中的描述制作你的单身人士。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-12T05:26:57.497

改变这个方法 this.getReadableDatabase(); 到 this.getWritableDatabase();

它会工作......

# jquery - 如果在单击定义时在 jquery 中获取它，如何为命名空间对象变量赋值

> ID：14825608
> 
> 赞同：0
> 
> 时间：2013-02-12T04:52:53.070
> 
> 标签：jquery, javascript-namespaces

我想知道当它在命名空间内时如何在 jquery 绑定中保存一个值。

```
var obj = obj || (obj ={ 
    valuetosave:-1,
    init:function(){
        $("some selector").on("click",function(){
            tmpval = I get some value here
            how can asign 'tmpval' to obj.valuetosave if I can't use this because 
            is in the jquery scope
        })
    }
}) 
```

我知道无论是标题还是我的小描述都没有多大用处，我希望这个小例子可以说明我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:07:03.393

如果你想引用当前实例，`obj`那么你应该使用*这个*关键字。例如

```
var obj = obj || ({ 
  valuetosave:-1,
  init:function(){

    var self = this;  // preserver your global instance in a variable
      $("#mybutton").on("click",function(){               
          var tmpval = 'I get some value here'
          // here `this` refers to  the function event instance , not obj instance
          // So i am using self (which is global instance variable)
          self.valuetosave = tmpval;
          alert(self.valuetosave);
      });
  }
}); 
```

如果您需要更多帮助，请告诉我，[请查看 jsfiddle](http://jsfiddle.net/madhuvana/BtyMp/)链接。

# android - androidplot xml文件中的错误

> ID：14825612
> 
> 赞同：0
> 
> 时间：2013-02-12T04:53:13.000
> 
> 标签：android, xml, androidplot

我正在使用 Android Plot jar 文件示例实现图表应用程序。它显示应用程序在 Jar 文件的`com.androidplot.xy.XYPlot`. 但是当我在配置项目后尝试时，它显示错误为，..

```
Could not find class 'com.androidplot.xy.XYPlot', referenced from method com.androidplot.xy.SimpleXYPlotActivity.onCreate 
```

帮我找解决办法...

我的 xml 代码是，..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">
<com.androidplot.xy.XYPlot
        android:id="@+id/mySimpleXYPlot"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10px"
        android:layout_marginLeft="10px"
        android:layout_marginRight="10px"
        title="A Simple XYPlot Example"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:05:50.627

通常这意味着您要么在项目的 /libs 目录中没有 androidplot jar，要么如果您使用带有 ADT 的 IntelliJ 或 Eclipse 之类的 IDE，则您没有明确地将 jar 添加到您的类路径中。

此外，如果您使用的是 Androidplot 0.5.1 或更高版本，则需要更改此行：

```
title="A Simple XYPlot Example" 
```

至

```
androidPlot.title="A Simple XYPlot Example" 
```

# python - XLRD 在迭代具有真/假和百分比值的单元格时呈现错误的数据

> ID：14825614
> 
> 赞同：3
> 
> 时间：2013-02-12T04:53:21.837
> 
> 标签：python, xlrd

当 Cell 包含 True 时返回 1，如果包含 False 则返回 0。

此外，如果 80% 被渲染为 0.8

我现在很困惑不知道该往哪里看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:06:35.127

Cell 对象具有三个属性：ctype 是一个 int、value（取决于 ctype）和 xf_index。如果打开工作簿时未启用“formatting_info”，则 xf_index 将为 None。下表描述了单元格的类型以及它们的值在 Python 中的表示方式。

![检查这个](../Images/cd3aef52fe2a3a79b339ed14a7e0c974.png)

当您从文本文件中获取布尔值 0/1 时，您可以执行类似的操作

`text = ("FALSE", "TRUE")[bool_value_from_xl]`

如文档所述，xlrd 返回实际存储的基础数据值，而不是格式化的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:26:51.220

好吧，我认为问题出在 file 。我认为你应该用文件检查它。

当使用 openoffice 和 Libra Office 创建的具有 True 和 False 数据的 xls 文件返回 0 和 1 时，我遇到了同样的问题。

我注意到在使用 xlrd 迭代文件以及创建文件时 microsoft office .. xlrd 非常好.. 所以请检查一下。

# jpa - JPA 命名查询偶尔返回部分结果

> ID：14825622
> 
> 赞同：1
> 
> 时间：2013-02-12T04:54:15.050
> 
> 标签：jpa, ejb-3.0, eclipselink, named-query

我有一张桌子 PhoneModels

ID、名称、供应商

1、iphone、苹果

2、Xperia、索尼爱立信

3、剃须刀、摩托罗拉

我有一个相应的实体
类 PhoneModel 实现 Serializable {

```
@Id  
@GeneratedValue(strategy = GenerationType.AUTO)   
@Column(nullable = false)   
private Long id;   

@Column(nullable = false)   
private String phoneName;   

@Column(nullable = false)   
private String vendor; 
```

我有一个相应的实体类 PhoneModel 实现 Serializable {

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(nullable = false)
private Long id;

@Column(nullable = false)
private String phoneName;

@Column(nullable = false)
private String vendor; 
```

和相应的命名查询

@NamedQuery(name = "phones.findAll", query = "select o from PhoneModels o"),

但奇怪的是，**有时**上述 NamedQuery 的结果会返回部分结果

ID、名称、供应商

1、<----------------------------缺少名称和供应商

2、Xperia、索尼爱立信

3、剃须刀、摩托罗拉

**最重要的是它是 1000 次零星的，并且它在代码或服务器上没有任何变化**

这是我们使用EclipseLink的版本，版本：Eclipse Persistence Services - 2.1.2.v20101206-r8635

# modeshape - 更新 nodeType 定义和修改现有数据

> ID：14825629
> 
> 赞同：0
> 
> 时间：2013-02-12T04:54:51.057
> 
> 标签：modeshape

刚开始使用 ModeShape，我有一个问题，是否可以更改 nodeType 定义（通过：nodeTypeMgr.registerNodeTypes(File, true)）？

假设我向 noteType 添加了一个字段，我注意到即使在执行上述方法调用之后，在现有节点上调用 setProperty()（在旧的 nodeType 定义到位时仍然存在）会导致 ConstraintViolationException。

如果行为是设计使然，您是否会删除该节点并再次重新持久化以修复它？或者是否有将节点“更新”到新定义的咒语？

我将 ModeShape 3.1.0.Final 与 JBossAS 7.1.1.Final 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:56:21.660

ModeShape 确实允许您更改/更新现有节点类型，这确实可能使现有内容在进行进一步更改时“无效”。这是[JSR-283](http://jcp.org/en/jsr/detail?id=283)规范在很大程度上留给实现的一个领域。例如，第 19.2.4.1 节“更新节点类型”这样说：

> 支持节点类型管理的存储库可以支持对已用作现有节点类型的节点类型进行更新。任何此类能力的范围取决于实现。例如，一些实现可能只允许不使现有内容无效的更改，而其他实现可能允许更大的更改。如何解决任何导致的不兼容性也取决于实现。

ModeShape 确实实现了更宽松的更改，因此我们建议在更新节点类型时使用良好的实践和程序。如果您知道要向节点类型添加强制属性定义或子节点定义，请在执行此操作之前考虑其含义并确保更新内容（在更改节点类型之前或之后，具体取决于节点类型可能允许剩余属性或剩余子节点）。

如果您的节点类型没有剩余属性定义和/或子节点定义，那么在多个步骤中实现更改可能是有意义的：

1.  首先用非强制性（例如，可选）属性定义和/或子节点定义注册节点类型。
2.  更改使用节点类型的任何现有内容并添加新属性和/或子节点，使用导航或查询来查找需要更改的节点。
3.  使用相同的属性定义和/或子节点定义注册节点类型，现在是`mandatory`.

或者，如果它在您的存储库中有意义，则将属性定义添加为新的 mixin。注册 mixin 后，您可以开始在新内容上使用它，您可以返回并将 mixin 添加到要添加新属性（或属性）的现有节点。

我们还建议您在首次创建节点类型时考虑您的节点类型可能会如何演变。进化只是影响您设计的几个方面之一。

更新节点类型的挑战在于需要做什么（以及最好的方法）在很大程度上取决于节点类型的细节。这就是为什么我们选择将这个过程的大部分内容留给您。另一种选择是 ModeShape 对节点类型允许的更新类型有更多限制，这将阻止和/或限制大量节点类型更新。

# java - 如何使用 Java 分离这个 JSON 对象中的键和值？

> ID：14825632
> 
> 赞同：1
> 
> 时间：2013-02-12T04:55:10.230
> 
> 标签：java, json

我有 JSON 对象

```
{
 "projector":"no",
 "video_conference":"no",
 "polycom":"no",
 "lcd":"no",
 "digital_phone":"no",
 "speaker_phone":"no"
} 
```

如何将键存储在一个数组中，将值存储在单独的数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:35:08.620

尝试`GSON` 将您的 java 对象转换为 json，反之亦然。

参考这个链接

**[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:07:55.803

我喜欢来自[http://codehaus.org/](http://codehaus.org/)的 Jackson用于 JSON 解析。

```
String text = "{ \"projector\":\"no\", \"video_conference\":\"no\", \"polycom\":\"no\", \"lcd\":\"no\", \"digital_phone\":\"no\", \"speaker_phone\":\"no\" }";

ObjectMapper mapper = new ObjectMapper();
Map<String,Object> map = mapper.readValue(text, Map.class);
Set<String> k = map.keySet();
Collection<Object> v = map.values();

String[] keys = k.toArray(new String[k.size()]);
String[] values = v.toArray(new String[v.size()]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:11:57.917

你可以试试这个。

```
 String s = " { "projector":"no", "video_conference":"no", "polycom":"no", "lcd":"no", "digital_phone":"no", "speaker_phone":"no" }";

        JSONObject jObject  = new JSONObject(s);
        JSONObject  menu = jObject.getJSONObject("projector");

        Iterator iter = menu.keys();
    String[] keyArr = new String();
    String[] valArr = new String();
    int count = 0;
        while(iter.hasNext()){
                 keyArr[count] = (String)iter.next();

             valArr[count] = menu.getString(key);
           count +=1;

        } 
```

# oop - 一个类是否应该能够从一个它不知道的类中捕获异常？

> ID：14825634
> 
> 赞同：0
> 
> 时间：2013-02-12T04:55:36.573
> 
> 标签：oop

我在 MVC 框架中编写了一些代码，如下所示：

```
class Controller_Test extends Controller
{
   public function action_index()
   {
      $obj = new MyObject();
      $errors = array();

      try
      {
         $results = $obj->doSomething();
      }
      catch(MyObject_Exception $e)
      {
         $e->getErrors();
      }
      catch(Exception $e)
      {
         $errors[] = $e->getMessage();
      }
} 
```

我的朋友争辩说，Controller 应该对 MyObject 一无所知，因此我不应该捕获 MyObject_Exception。

他认为代码应该做这样的事情：

```
class Controller_Test extends Controller
{
   public function action_index()
   {
      $obj = new MyObject();
      $errors = array();

      if($obj->doSomething())
      {
         $results = $obj->getResults();
      }
      else
      {
         $errors = $obj->getErrors();
      }
} 
```

我绝对理解他的方法，但感觉好像状态管理会导致意想不到的副作用。

什么是正确或首选的方法？

编辑：错误地将 $obj->getErrors() 放在 MyObject_Exception catch 子句中，而不是 $e->getErrors();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:16:02.287

总的来说，我会说重要的是控制器是否理解异常的*含义*并能够正确处理它。在许多情况下（如果不是大多数情况下），控制器将不知道如何正确处理异常，因此不应*捕获*和处理它。

另一方面，控制器可能被合理地允许理解一些特定的异常，例如“DatabaseUnavailableException”，即使它不知道如何或为什么`MyObject`使用数据库。控制器可能被允许重试调用`MyObject`一定次数，所有这些都不知道是如何`MyObject`实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:17:55.407

关于异常与返回的错误代码的争论是一场漫长而血腥的争论。

他的论点分解为，通过使用 getErrors() 函数，您正在*了解有关 object 的信息*。如果这是您使用布尔返回来表示成功的原因，那么您就错了。为了让控制器正确处理错误，它必须知道它正在触摸的对象以及具体的错误是什么。是网络错误吗？内存错误？**它必须以某种方式知道。**

我更喜欢异常模型，因为它更简洁，允许我以更可控的方式处理更多错误。它还为与异常相关的数据提供了一种明确的传递方式。

但是，我不同意您使用 getErrors() 之类的函数。任何与异常有关的有助于我处理它的数据都应该包含在异常中。我不应该再去寻找对象来获取关于哪里出了问题的信息。

网络连接超时了吗？异常应包含它尝试连接的主机/端口、等待的时间以及来自较低网络级别的任何数据。

让我们在示例中执行此操作（在伪 c# 中）：

```
public class NetworkController {
    Socket MySocket = null;
    public void EstablishConnection() {
        try {
            this.MySocket = new Socket("1.1.1.1",90);
            this.MySocket.Open();

        } catch(SocketTimeoutException ex) {
            //Attempt a Single Reconnect
        }
        catch(InvalidHostNameException ex) {
            Log("InvalidHostname");
            Exit();
        }

    }
} 
```

使用他的方法：

```
public class NetworkController {
    Socket MySocket = null;
    public Boolean EstablishConnection() {
        this.MySocket = new Socket("1.1.1.1",90);
        if(this.MySocket.Open()) {
            return true;
        } else {
            switch(this.MySocket.getError()) {
                case "timeout":
                    // Reattempt
                    break;
                case "badhost":
                    Log("InvalidHostname");
                    break;
            }
        }
    }
} 
```

最终，您需要知道对象发生了什么才能知道如何响应它，并且使用一些复杂的 if 语句集或 switch-case 来确定它是没有意义的。使用例外并爱他们。

编辑：我不小心说了后半句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T08:03:47.657

首先，控制器并不意味着处理类抛出的底层异常。

即使发生这种情况，控制器也应该停止在潜在错误中说错话。

通过这种方式，我们可以确保控制器确实并且只做流量控制的工作。

给控制器一些输出的其他类应该没有错误，除非错误是非常特定于控制器的。

# dart - 如何仅在我的应用程序初始化后才显示我的 UI？

> ID：14825635
> 
> 赞同：5
> 
> 时间：2013-02-12T04:55:41.280
> 
> 标签：dart, dart-webui

我有一个 Dart + Web UI 应用程序，它首先需要从本地 IndexedDB 存储加载数据。IndexedDB API 是异步的，所以我会在加载数据时收到回调。在我的数据库首次打开并准备就绪之前，我不想显示任何 UI 元素。

如何在显示 UI 之前等待数据库初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:26:19.170

我在我的项目中以 Web UI 方式进行操作：

```
...
<body>
  <template if="showApplication">
    <span>The app is ready.</span>
  </template>
</body>
... 
```

```
@observable bool showApplication = false;

main() {
  // Initialize...
  window.indexedDB.open(...).then((_) {
    showApplication = true;
  });
} 
```

这还有一个额外的好处：单独的代码/Web组件还可以在依赖数据库连接之前检查应用程序状态等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T08:51:31.153

隐藏`body`标签`visibility:hidden`：

```
<body style="visibility:hidden">
  <!-- content -->
</body> 
```

然后在你未来的 then() 回调中显示它

```
window.indexedDB.open(dbName, 
  version: version, 
  onUpgradeNeeded: createObjectStore).then(handleDBOpened);

handleDBOpened(..) {
  query('body').style.visibility = "visible"; // <-- show the body tag
} 
```

# jquery - 重新启动 javascript 幻灯片

> ID：14825637
> 
> 赞同：1
> 
> 时间：2013-02-12T04:55:47.507
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在 jquery-ui 选项卡中实现了 s3slider。多个滑块运行良好。我在选项卡上添加了一个 onClick，因此当您单击选项卡时，幻灯片将从头开始，但令我惊讶的是，我在选项卡中有一个滑块的副本。我认为如果我再次调用滑块但没有成功，该对象可能会被重置。我在[这里有一个jsfiddle。](http://jsfiddle.net/Cyberjetx/D7QBc/)

代码太长，无法在此处完整列出，但包含插件的 js 似乎非常简单。插件代码需要 .Die() 或类似的，但我不知道该怎么做。

```
$(document).ready(function () {
        $("#tabs").tabs();
        $('#slider').s3Slider({
            timeOut: 4000
        });
    });

    function PreFire() {
        slider1 = $('#slider1').s3Slider({
            timeOut: 3000
        });
    } 
```

您可以通过选项卡在 chrome 和 IE9 中复制结果。在第三次单击时，您至少有一个额外的滑块副本。我要做的就是重新启动幻灯片。我已经尝试了具有相同结果的“当前”参数。

在你抨击我上当之前：我已经看过[这个帖子](https://stackoverflow.com/questions/7122840/how-to-kill-reset-a-running-jquery-plugin)，但在我的情况下这不起作用。图像就这样消失了。

# objective-c - NSWindow 的 cocoa 中的什么事件告诉 NSWindow 在第一次运行后现在显示？

> ID：14825638
> 
> 赞同：0
> 
> 时间：2013-02-12T04:55:49.753
> 
> 标签：objective-c, macos, cocoa

我需要在第一次运行后显示主窗口后不久显示一个工作表对话框。如果我在 init 中执行此操作或从 nib 唤醒，它似乎无法正常工作（如果我在 init 方法中执行此操作，则工作表显示为与主窗口分离的窗口）。我想一旦显示父窗口，我就必须显示工作表。我有一个 appcontroller 类，它有一个窗口指针。所以我想我需要用 window 注册为代表或其他东西？并实现一些方法来接收该调用？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:45:42.250

没有可靠的事件、通知或委托方法调用。预计您的代码负责显示窗口，因此它应该已经知道窗口何时显示。

您是否依赖于 Interface Builder 中设置的 Visible at Launch 属性？如果是这样，你用什么来加载NIB？希望是一个窗口控制器。在这种情况下，您应该调用该`-window`方法来加载 NIB 并获取窗口。生成的窗口引用是您将传递给开始工作表的方法的内容。

如果不依赖于启动时可见，您使用什么代码来显示窗口？例如，`-showWindow:`在窗口控制器上调用？因此，在此之后放置代码以显示工作表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:46:28.667

[`applicationDidFinishLaunching:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008592-CH1-SW3)是你的切入点。它会在应用程序全部设置完成后发送给您的应用程序委托，但在用户有机会与之交互之前。

# r - R中的并行处理

> ID：14825642
> 
> 赞同：2
> 
> 时间：2013-02-12T04:56:30.200
> 
> 标签：r, foreach, parallel-processing, random-forest

我正在使用一个自定义随机森林函数，该函数需要一组基因组数据（大约 56k 列）中的起点和终点。

我想将列号拆分为子组，并允许单独处理每个子组以加快速度。我用以下代码尝试了这个（不成功）：

```
library(foreach)
library(doMC)
foreach(startMrk=(markers$start), endMrk=(markers$end)) %dopar% 
    rfFunction(genoA,genoB,0.8,ntree=100,startMrk=startMrk,endMrk=endMrk) 
```

其中 startMrk 是一个数值变量数组：`1 4 8 12 16`而 endMrk 是另一个数组：`3 7 11 15 19`

对于这个例子，我希望一个核心以 1:3 运行样本，另一个以 4:7 运行，等等。我对 R 中的并行处理概念不熟悉，所以我非常愿意研究任何文档可用的。有人对我在并行处理或上述代码中缺少的东西有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:31:03.503

这里的基本点是您将列拆分为块，对。首先，最好在每次迭代时适当地对数据集进行分块并将这些块馈送到 RF 中。此外，foreach 在某些方面的工作方式与 for 类似，因此代码可以是

```
rfs=vector('list',4)
foreach(i=1:4) %dopar% {
  ind <- markers$start[i]:markers$end[i]
  rfs[[i]] <- randomForest(genoA[,ind],genoB[,ind], 0.8, ntree=100)
} 
```

我在常规的 randomForest 中给出了这个，但是你可以用一种简单的方式把它包装到你的自定义代码中。

# android - 递增/递减 button.onclicklistener

> ID：14825650
> 
> 赞同：1
> 
> 时间：2013-02-12T04:57:08.320
> 
> 标签：android, button, onclicklistener, buttonclick

我有一个实现`onClickListener` **接口的活动类**

我不知道下一步该做什么。我的目标是拥有一个覆盖视图方法，该方法将在单击**UP**`onClick(View v)`按钮时将标志从 1 增加到 5 个**不同的 uri（例如 5 个 url），并在单击****DOWN**按钮时从 uri-5 减少到 uri-1 。它取决于每个按钮在任何情况下的位置。请帮我一个线索。

 ****我试过如下： -

```
Button up = (Button) findViewById(R.id.button1);
Button down = (Button) findViewById(R.id.button2);

up.setOnClickListener(this);
down.setOnClickListener(this);

public void onClick(View v) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:06:30.853

试试这个做一个静态变量

```
static int count=0; 
```

在上

```
 if(count=<5)
   Log.e("Output" ,"uri-"+count++); 
```

在下来

```
if(count>0)
 Log.e("Output" ,"uri-"+count--); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:14:09.237

你可以试试这个： -

```
static int flag = 0;  // Global variable in class

/** Code to use in onCreate()  **/
Button up = (Button) findViewById(R.id.button1);
Button down = (Button) findViewById(R.id.button2);    
up.setOnClickListener(this);
down.setOnClickListener(this);

/** Override method in class **/
public void onClick(View v)
{
  if (v == up)
  {
    if (flag < 5)
       flag++;
  }
  else if (v == down)
  {
    if (flag > 0)
       flag--;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:15:06.360

你可以这样做：

```
int currentURLIndex = 0;
int urlCount = 5;

public void onClick(View v) {
  if(v == up){
    currentURLIndex = Math.min(++currentURLIndex, urlCount);
  } else if if(v == down){
     currentURLIndex = Math.max(--currentURLIndex, 0);
   }
} 
```****

# iphone - 使用 parse.com 共享图像

> ID：14825652
> 
> 赞同：0
> 
> 时间：2013-02-12T04:57:17.217
> 
> 标签：iphone, ios, image, parse-platform

我想使用 parse.com 在两个用户之间共享图像。我最初的想法是简单地将图像 url 从第一个用户传递给第二个用户以查看/下载。我将图像上传到 parse.com 没有问题，但是我不知道如何返回 url。可以返回网址吗？

在 android 上似乎有一个解决方案[Get link to image file at Parse.com](https://stackoverflow.com/questions/14562595/get-link-to-image-file-at-parse-com)但我找不到适用于 iphone 的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:46:07.510

在Parse.com的[图像保存示例中，我找到了图像 url。](https://github.com/ParsePlatform/SavingImagesTutorial)

在`- (void)setUpImages:(NSArray *)images`方法上，

`PFFile *theImage = [eachObject objectForKey:@"imageFile"];`将返回带有 URL 的图像文件对象。

希望这会帮助你。

# facebook - 使用 Facebook API 检索群组的未读群组消息计数

> ID：14825653
> 
> 赞同：0
> 
> 时间：2013-02-12T04:57:19.297
> 
> 标签：facebook, facebook-fql, facebook-group

我正在尝试找到一种方法来获取群组的未读帖子计数，例如 Facebook.com 左侧菜单中显示的帖子

我能够[在 FQL 中找到对 Group 表](http://developers.facebook.com/docs/reference/fql/group)的引用，但我看不到任何表示未读消息计数的字段

我是在正确的地方找到这些数据还是有其他方法可以检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:54:40.777

这在 FQL 或 Graph API 中可用作`unread`Group 的字段，但在 FQL 中，这是[`group_member`table](https://developers.facebook.com/docs/reference/fql/group_member)，而不是`group`table。

要访问组的未读计数，您需要用户的`user_groups` [许可](https://developers.facebook.com/docs/authentication/permissions/)。

示例图 API 调用：

`/me/groups?fields=unread`

回复：

```
{
  "data": [
       {
      "name": "Facebook Developers", 
      "version": 1, 
      "id": "146797922030397", 
      "unread": 11, 
      "bookmark_order": 1
    }, 
// snip 
```

示例 FQL 查询： `select gid, unread from group_member where uid = me()`

示例响应：

```
{
  "data": [
    {
      "gid": "146797922030397", 
      "unread": 3

}
// removed other groups 
```

# objective-c - 访问数组中对象的属性以在 UITableViewCell 中显示

> ID：14825655
> 
> 赞同：0
> 
> 时间：2013-02-12T04:57:22.553
> 
> 标签：objective-c, arrays, object, properties, uitableview

我正在使用 XML 解析器从博客中获取信息以创建提要阅读器应用程序。我创建了一个对象，其属性是每个博客条目（标题、已发布、作者...）的数据。我将数据存储在对象中，然后使用指针将对象放入已解析数据的数组中。当我去访问属性以在我的 UITableView 中显示它们时，每个单元格都是相同的，每个单元格都有最后一个博客条目的数据。

解析器 .m 文件

```
@interface Parser()

//This property holds the blog objects that were parsed
@property (nonatomic, strong) NSMutableArray *parsedResults;

//This property holds the current element content being parsed
@property (nonatomic, strong) NSString *currentElement;

@property (nonatomic, strong) FRFeedItem *blogEntry;

@end

@implementation SolsticeParser

@synthesize parsedResults = _parsedResults;
@synthesize currentElement = _currentElement;

// Will be used to truncate data parsed from publish tag so that it will only store the YYYY-MM-DD to self.blogEntry.datepublished
NSRange dateOnly = {0, 10};

//This method initializes the parser, sets the delegate, starts parsing, and returns the results.
- (NSMutableArray *)parseFeedWithResults:(NSURL *)URL
{
NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:URL];
parser.delegate = self;
self.parsedResults = [[NSMutableArray alloc] init];
[parser parse];             // Everything parsed here
return self.parsedResults;
} 
```

...这里解析的数据保存到 BlogEntry 对象的属性中...

```
#pragma mark - Parser delegate

- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI
qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict
{

// Custom blog object initialized here
     if ([elementName isEqualToString:@"entry"]) {
        if (!self.blogEntry) {
            self.blogEntry = [[FRFeedItem alloc] init];

        }
    }

}
...

- (void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName {

if([elementName isEqualToString:@"title"]) {
    self.blogEntry.title = self.currentElement;

} else if([elementName isEqualToString:@"published"]) {
    self.blogEntry.datePublished = [self.currentElement substringWithRange:dateOnly];

} else if([elementName isEqualToString:@"entry"]) {
    [self.parsedResults  addObject:self.blogEntry];
}
} 
```

在 MyTableViewController.m 中：

```
@interface MyTableViewController ()

@property (nonatomic, strong) Parser* parser;
@property (nonatomic, strong) NSMutableArray* feedDataFromParser;

@end

@implementation MyTableViewController

 // synthesize automatically done by Xcode v4.6

- (void)viewDidLoad
{
[super viewDidLoad];
self.parser = [[Parser alloc] init]; // initialize parser by allocating memory on the heap
[self loadItems]; // automatically loads data to be displayed upon opening the app

}

- (void)loadItems
{
// information parsed from blog stored to a mutable array
self.feedDataFromParser = [self.parser parseFeedWithResults:[NSURL URLWithString:kFeedURL]];
}

...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
//code not included for this question for brevity

// Configure the cell from data stored in mutable array of FRFeedItem objects
// PROBLEM:
cell.textLabel.text = [[self.feedDataFromParser objectAtIndex:indexPath.row] title];
cell.detailTextLabel.text = [[self.feedDataFromParser objectAtIndex:indexPath.row] datePublished];

return cell;
}
@end 
```

据我所知，语法上没有任何错误。我已经尝试打印出解析并保存到解析器文件中的对象的数据以及indexPath.row的值，两者都是正确的。我错过了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:33:50.927

我认为问题在于这一行：

```
if (!self.blogEntry) 
```

创建第一个后，您将不再创建。尝试删除该 if 子句，看看是否可以修复它。

# php - Codeigniter 事务

> ID：14825661
> 
> 赞同：4
> 
> 时间：2013-02-12T04:58:05.657
> 
> 标签：php, mysql, codeigniter, transactions

codeIgniter 中的事务如何工作？我可以停止一次交易并开始另一个交易吗？

看我的例子

```
$this->db->trans_begin();

$a = 'UPDATE ......'; RETURN TRUE
$b = 'INSERT INTO......'; RETURN FALSE

$this->db->trans_rollback(); // I tried $this->db->trans_off();

var_dump( $this->db->trans_status() );

$this->db->trans_begin();

if ( $this->db->trans_status() === FALSE  ) {
   $this->db->trans_rollback();
} else {    
   $this->db->trans_commit();    
} 
```

我的第一个事务将始终返回`FALSE`（即使确实我需要回滚它），现在我需要关闭该事务并需要启动另一个事务。

问题在于`$this->db->trans_status()`，它总是`FALSE`在第二笔交易中返回（即使在`$this->db->trans_rollback()`or之后`trans_off()`）。

我究竟做错了什么 ？请帮我。

```
I am using mySql as underlying database. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T06:29:06.807

我认为你需要在交易开始之前添加这个：

```
$this->db->trans_strict(FALSE); 
```

> 默认情况下，CodeIgniter 以严格模式运行所有事务。
> 
> 启用严格模式后，如果您正在运行多组事务，如果一组失败，所有组都将回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:14:04.297

现在可以通过手动设置`trans_status`

```
$this->db->trans_begin();

$a = 'UPDATE ......'; RETURN TRUE
$b = 'INSERT INTO......'; RETURN FALSE

$this->db->trans_rollback(); //First transaction ends it will return FALSE always(in my case)

$this->db->_trans_status = TRUE; // setting the trans_status manually ,so it will ignore previous attempts 

$this->db->trans_begin();

//other operations ..

if ( $this->db->trans_status() === FALSE  ) {
   $this->db->trans_rollback();
} else {    
   $this->db->trans_commit();    
} 
```

# iphone - 需要 iOS 的 Stripe API 来传递信用卡详细信息

> ID：14825665
> 
> 赞同：2
> 
> 时间：2013-02-12T04:58:37.167
> 
> 标签：iphone, ios, api, strip

我必须在条纹 api 中传递用户的信用卡号、到期日期和密码。有没有人有 iOS 的 stripe api 的演示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:57:03.050

[您可以从这里](https://github.com/stripe/stripe-ios#installation)获取官方 iOS Stripe api 详细信息。

**条纹 iOS 绑定**

Stripe iOS 绑定可用于在您的 iOS 应用程序中生成令牌。如果您正在构建一个向信用卡收费的 iOS 应用程序，您应该使用这些绑定来确保您不会将信用卡信息传递到您的服务器（因此符合 PCI 标准）。

**安装**

您可以通过两种方式安装 Stripe iOS 绑定。

**使用 CocoaPods 安装**

CocoaPods 是 Objective-C 的库依赖管理工具。要将 Stripe iOS 绑定与 CocoaPods 一起使用，只需将以下内容添加到您的 Podfile 并运行 pod install：

吊舱`Stripe`，:git => ' [https://github.com/stripe/stripe-ios.git](https://github.com/stripe/stripe-ios.git) '

**通过将文件添加到项目来安装**

1.  克隆此存储库
2.  在菜单栏中，单击“文件”，然后单击“将文件添加到“项目”...”
3.  在克隆的 stripe-ios 存储库中选择“Stripe”目录
4.  确保选中“将项目复制到目标组的文件夹（如果需要）”
5.  点击“添加”

**指导**

您应该关注 Stripe iOS 绑定中的三个主要类。STPCard 是信用卡的代表。您将需要使用客户输入的信用卡详细信息来创建和填充此对象。STPToken 是 Stripe 为信用卡返回的令牌的表示形式。您不能自己构建这些，但需要创建它们（如下所示）。Stripe 是用于与 Stripe REST API 交互的静态类。

此外，代码本身也有很多注释。查看 .h 文件以更全面地了解此库。

# php - TYPO3 内容元素边距不能在 BE 中设置

> ID：14825666
> 
> 赞同：1
> 
> 时间：2013-02-12T04:58:36.530
> 
> 标签：php, typo3, typoscript

我对 TYPO3 内容元素边距有疑问。我正在使用 TYPO3 版本 4.7.2。当我在“外观”选项卡-“内容元素布局”、上边距和下边距中设置边距时，边距无法识别并显示在 FE 中。

我在我的 TS 模板设置中添加了一个打字稿代码“tt_content.stdWrap.innerWrap >”，但它不起作用。

# jasper-reports - 如何找到 Jasper 报告中使用的 Jdbc Url

> ID：14825667
> 
> 赞同：2
> 
> 时间：2013-02-12T04:58:40.513
> 
> 标签：jasper-reports, jasperserver

我有一个使用 .jrxml 文件生成报告的项目。我想知道该项目中使用的 JDBC url 是什么。我在哪里可以在该项目代码中找到该网址？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:26:54.337

转到 JasperReport 服务器中的“数据源”目录并编辑您用于报告的数据库名称。

在那里您可以找到“URL（必需）：”属性。

# actionscript-3 - 页面大小的 Flex 数据网格打印问题

> ID：14825668
> 
> 赞同：0
> 
> 时间：2013-02-12T04:58:42.223
> 
> 标签：actionscript-3, apache-flex, air, flex4

我需要在 A4 大小的页面中打印以下数据网格。它不适合页面大小，并且 dataprovider 不适用于 printdatagrid。请纠正我。

![在此处输入图像描述](../Images/a3d19877f0c943b804fbfc9b713aa105.png)

当前输出为：

![在此处输入图像描述](../Images/0ffabad6d2d09a2f6f42249f2781b303.png)

***我的数据网格：***

```
<mx:DataGrid id="dashboardList" width="100%" height="95%"
                                             alternatingItemColors="[0x373737, 0x373737]"
                                             borderColor="#FFFFFF" borderStyle="inset"
                                             chromeColor="#295A7D" contentBackgroundColor="#373737"
                                             dataProvider="{allTrancList}" fontWeight="normal"
                                             horizontalGridLineColor="#858585" click="productDatagrid_clickHandler(event)"
                                             horizontalGridLines="true" variableRowHeight="true"
                                             wordWrap="true">
                                    <mx:columns>
                                        <mx:DataGridColumn width="60" headerText="S.No"
                                                           labelFunction="serialNoLabelFunc2"/>                                 
                                        <mx:DataGridColumn width="60" dataField="trancCode"
                                                           headerText="Order ID"/>
                                        <mx:DataGridColumn dataField="date" headerText=" Date"
                                                           labelFunction="getDateLabel"/>
                                        <mx:DataGridColumn dataField="clientName"
                                                           headerText="Client name"/>
                                        <mx:DataGridColumn width="90" dataField="clientCode"
                                                           headerText="Client code"/>
                                        <mx:DataGridColumn dataField="itemType"
                                                           headerText="Work/Product"/>
                                        <mx:DataGridColumn width="60" dataField="itemNumbers"
                                                           headerText="Count"/> 

                                        <mx:DataGridColumn dataField="cost" headerText="Cost"/>

                                        <mx:DataGridColumn dataField="discountAmount"
                                                           headerText="Discount"/>
                                        <mx:DataGridColumn dataField="tax" headerText="Tax"/>

                                        <mx:DataGridColumn dataField="total" headerText="Total"/>

                                        <mx:DataGridColumn dataField="paymondmode"
                                                           headerText="Payment mode"/>
                                    </mx:columns>
                                </mx:DataGrid> 
```

***我的 printData 网格：***

```
<mx:PrintDataGrid id="myDataGrid" width="99%" height="100%">
        <mx:columns>

            <mx:DataGridColumn width="60" dataField="trancCode"
                               headerText="Order ID"/>

            <mx:DataGridColumn dataField="clientName"
                               headerText="Client"/>
            <mx:DataGridColumn width="90" dataField="clientCode"
                               headerText="Client code"/>
            <mx:DataGridColumn dataField="itemType"
                               headerText="Type"/>
            <mx:DataGridColumn width="60" dataField="itemNumbers"
                               headerText="Count"/> 

            <mx:DataGridColumn dataField="cost" headerText="Cost"/>

            <mx:DataGridColumn dataField="discountAmount"
                               headerText="Discount"/>
            <mx:DataGridColumn dataField="tax" headerText="Tax"/>

            <mx:DataGridColumn dataField="total" headerText="Total"/>

            <mx:DataGridColumn dataField="paymondmode"
                               headerText="Payment mode"/>
        </mx:columns>
    </mx:PrintDataGrid> 
```

***我的打印代码：***

```
var thePrintView:FormPrintView = new FormPrintView();
                    addElement(thePrintView);

                    // Set the print view properties.
                    thePrintView.width=printJob.pageWidth;
                    thePrintView.height=printJob.pageHeight;
                    thePrintView.prodTotal = prodTotal;

                    // Set the data provider of the FormPrintView 
                    // component's DataGrid to be the data provider of 
                    // the displayed DataGrid.
                //  thePrintView.myDataGrid=PrintDataGrid(dashboardList);
                    thePrintView.myDataGrid.dataProvider =allTrancList; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:21:07.357

您可以寻找[AlivePDF](http://alivepdf.bytearray.org/)或[PurePDF](http://code.google.com/p/purepdf/)，这两个选项都将为您提供更多的空间来展开您的翅膀，并有很多可能性，并且可以满足不断变化的需求。

请在下面找到代码（此代码只是关于您的要求的可能性的见解，您可以从 purePDF 站点 [上面链接] 找到整个测试文件库）-

```
package
{
import flash.events.Event;

import org.purepdf.colors.RGBColor;
import org.purepdf.elements.Paragraph;
import org.purepdf.elements.RectangleElement;
import org.purepdf.pdf.PdfPCell;
import org.purepdf.pdf.PdfPTable;

public class PdfPTableColors extends DefaultBasicExample
{
    public function PdfPTableColors(d_list:Array=null)
    {
        super(["Customize border and background color","of table cells"]);
    }

    override protected function execute(event:Event=null):void
    {
        super.execute();
        createDocument();
        document.open();

        registerDefaultFont();

        var table: PdfPTable = new PdfPTable(4);
        table.widthPercentage = 100;
        var cell: PdfPCell;
        cell = PdfPCell.fromPhrase(new Paragraph("test colors:"));
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("red / no borders"));
        cell.border = RectangleElement.NO_BORDER;
        cell.backgroundColor = RGBColor.RED;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("green / magenta bottom border"));
        cell.border = RectangleElement.BOTTOM;
        cell.borderColorBottom = RGBColor.MAGENTA;
        cell.borderWidthBottom = 10;
        cell.backgroundColor = RGBColor.GREEN;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("blue / cyan top border + padding"));
        cell.border = RectangleElement.TOP;
        cell.useBorderPadding = true;
        cell.borderWidthTop = 5;
        cell.borderColorTop = RGBColor.CYAN;
        cell.backgroundColor = RGBColor.BLUE;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("test GrayFill:"));
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("0.25"));
        cell.border = RectangleElement.NO_BORDER;
        cell.grayFill = 0.25;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("0.5"));
        cell.border = RectangleElement.NO_BORDER;
        cell.grayFill = 0.5;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("0.75"));
        cell.border = RectangleElement.NO_BORDER;
        cell.grayFill = 0.75;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("test bordercolors:"));
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("different borders"));
        cell.borderWidthLeft = 6;
        cell.borderWidthBottom = 5;
        cell.borderWidthRight = 4;
        cell.borderWidthTop = 2;
        cell.borderColorLeft = RGBColor.RED;
        cell.borderColorBottom = RGBColor.ORANGE;
        cell.borderColorRight = RGBColor.YELLOW;
        cell.borderColorTop = RGBColor.GREEN;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("with correct padding"));
        cell.useBorderPadding = true;
        cell.borderWidthLeft = 6;
        cell.borderWidthBottom = 5;
        cell.borderWidthRight = 4;
        cell.borderWidthTop = 2;
        cell.borderColorLeft = RGBColor.RED;
        cell.borderColorBottom = RGBColor.ORANGE;
        cell.borderColorRight = RGBColor.YELLOW;
        cell.borderColorTop = RGBColor.GREEN;
        table.addCell(cell);

        cell = PdfPCell.fromPhrase(new Paragraph("orange border"));
        cell.borderWidth = 6;
        cell.borderColor = RGBColor.ORANGE;
        table.addCell(cell);

        document.add(table);
        document.close();
        save();
    }
}
} 
```

# asp.net-mvc-3 - 今天的记录从 linq 获取到 sql

> ID：14825673
> 
> 赞同：0
> 
> 时间：2013-02-12T04:59:03.113
> 
> 标签：asp.net-mvc-3, datetime, linq-to-sql

我想从我的表中获取今天的记录。我写了以下查询 -

```
public ICollection<DashboardNotification> GetNotificationOfToday()
        {
            DateTime todaysDate = DateTime.Now;
            DateTime yesterdaysDate = DateTime.Now.AddDays(-1);
            db = new BobTheBuilderEntities();
            var notificationList = (from n in db.DashboardNotifications.OrderByDescending(n => n.NotificationDateTime)
                                    where (n.NotificationDateTime > yesterdaysDate && n.NotificationDateTime <= todaysDate)
                                    select n).ToList();

            return notificationList;
        } 
```

![在此处输入图像描述](../Images/2b6552ccaa204c1849be2e43ab8e60f2.png)

但是上面的查询不起作用，因为它也从昨天获取记录。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:53:55.573

尝试以下查询

```
var notificationList = (from n in db.DashboardNotifications.OrderByDescending(n => n.NotificationDateTime)
                                    where (n.NotificationDateTime > yesterdaysDate )
                                    select n).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:17:55.807

您能先尝试将昨天的日期声明为变量吗

```
var yesterDay = DateTime.Now.AddDays(-1);
var notificationList = (from n in db.DashboardNotifications.OrderByDescending(n => n.NotificationDateTime)
                        where (n.NotificationDateTime > yesterDay)
                        select n).ToList(); 
```

# c# - 将 TreeView 保存到 XML 并在 WPF/C# 中从 XML 加载它

> ID：14825679
> 
> 赞同：0
> 
> 时间：2013-02-12T04:59:37.077
> 
> 标签：c#, wpf, xml, treeview, xmldataprovider

我在这里找到了一些关于如何将树视图保存到 xml 并使用 WPF/C# 从 xml 加载它的问题和答案。但是，使用 xmldataprovider，它们都不起作用，使用 AppendChild，exporttoxml 起作用，但无法从保存的 xml 导入它。

在 xmldataprovider 的情况下，它具有 XAML 中的架构，因此一旦将 xml 加载到树视图上，它似乎不允许用户更新树视图。

我正在寻找一种可以将树视图保存到 xml 并从保存的 xml 加载它以及允许用户在将 xml 加载到树视图后修改树视图的方法。

有谁知道该怎么做？

# css - 将 div 响应地定位在背景“封面”上

> ID：14825683
> 
> 赞同：0
> 
> 时间：2013-02-12T04:59:54.000
> 
> 标签：css, html, responsive-design

我正在尝试响应地定位一个带有图像的 div。

如果调整浏览器大小，我正在使用保持其纵横比的背景图像。

我已经使用 %ages 定位了 div，但是当窗口变小时，div 最终会移动，而图像刚刚开始被截断。

这是我的例子：http: [//jsfiddle.net/bbLTD/1/](http://jsfiddle.net/bbLTD/1/)

我的目标是让带有小图像的潜水与背景图像保持在同一位置。

我是不是走错了路？

这是 HTML/CSS：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>laPINA</title>
    <style type="text/css">
        html { 
        background: url(http://www.freegreatpicture.com/files/146/26189-abstract-color-background.jpg) no-repeat center center fixed; 
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;

        }

    </style>

</head>
<body>

    <div style="position: absolute; bottom: 50%; right: 10%;">
        <img src="http://www.friesens.com/wp-content/uploads/2011/10/Contact-UsHeader940x260.jpg"  width="50" height="50" alt="contact_logo" />
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:37:01.843

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>laPINA</title>
    <style type="text/css">
        html { 
        background: url(http://www.freegreatpicture.com/files/146/26189-abstract-color-background.jpg) no-repeat center center fixed; 
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;

        }
        ***img{
           width: 100%;
 max-width: 50px;
            height:100%;
        max-height:50px;
        }***

    </style>

</head>
<body>

    <div style="position: absolute; bottom: 50%; right: 10%;">
        ***<img src="http://www.friesens.com/wp-content/uploads/2011/10/Contact-UsHeader940x260.jpg" alt="contact_logo" />***
    </div>
</body>
</html> 
```

我所做的更改以粗斜体显示。您可以根据相对于图像容器的百分比指定图像的高度和宽度，并指定您希望它的最大高度和最大宽度。

我已将图像的高度/宽度转移到 css 内部样式表，因为将 css 排除在 html 之外被认为是一种更好的做法，除非它像您对 div 的 style=" 所做的那样位于特定的样式标签中位置：绝对；底部：50%；右侧：10%；"。

希望这可以帮助。

# android - 在我的 android 应用程序中增强帮助选项

> ID：14825685
> 
> 赞同：3
> 
> 时间：2013-02-12T05:00:14.390
> 
> 标签：android

我需要在我的 android 应用程序中添加帮助菜单，以帮助用户在启动时第一次了解该应用程序[应该很好地显示这样的弹出屏幕](http://i.stack.imgur.com/Tys2r.png) ，我可以通过添加此类图像来做到这一点，但是是否有任何可用的库或示例项目我可以用它来实现这个！ [这是开发人员链接下来有一个半透明的图像](http://developer.android.com/design/patterns/help.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:31:30.953

需要做的是获取相关视图的位置，并将它们传递给具有透明背景的帮助活动。幸运的是，有一个开源库。查看[ShowcaseView](https://github.com/Espiandev/ShowcaseView)。这就是你要找的东西。

# c# - 文本正在转换为符号

> ID：14825693
> 
> 赞同：0
> 
> 时间：2013-02-12T05:00:32.147
> 
> 标签：c#, visual-studio-2010

我正在制作一个 adz 收集器，所以我从一个网站获取广告，然后用 html 获取标题、价格、描述。最后继续输入到 DataTable 中，将 DataTable 导出为 CSV。但问题是文本是在代码中很好，但是当它导出到 CSV 时，它就像：

```
 Â· 75% of the Controllerâ€™s time will focus on accounting: Their role includes:  o 
 Bookkeeping  o Payroll  o Monthly HST  o Trust accounting; Ensuring compliance with the     Real 
 Estate Council requirements  o Financial Statement Preparation  Â· 25% Will be       management 
 functions:  o Supervise and assist with conveyancing  o Supervise all the office staff (4 - 
 6)  o Other day to day management functions.   Requirements and Qualifications  Essential 
 Skills   Â· Experience working with government regulated financial reporting  Â· Experience 
 working with large numbers of people in a customer service oriented role  Â·     Experience with 
 Trust Accounting    Additional Assets .... 
```

到处都有符号，我用来导出的代码如下：

```
public  void DataTable2CSV(DataTable table, string filename, string seperateChar)
    {

        StreamWriter sr = null;

        try
        {

            sr = new StreamWriter(filename, true);
            string seperator = "";
            StringBuilder builder = new StringBuilder();

                foreach (DataColumn col in table.Columns)
                {

                    builder.Append(seperator).Append(col.ColumnName);

                    seperator = seperateChar;
                }

                sr.WriteLine(builder.ToString());

            foreach (DataRow row in table.Rows)
            {

                seperator = "";
                builder = new StringBuilder();
                foreach (DataColumn col in table.Columns)
                {

                    builder.Append(seperator).Append(row[col.ColumnName]);
                    seperator = seperateChar;

                }

                sr.WriteLine(builder.ToString());

            }

        }

        finally
        {

            if (sr != null)
            {

                sr.Close();

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:03:46.430

您有文本编码混淆。换句话说，您正在写入 CSV 文件的数据的编码与 CSV 查看器（例如 Excel）所期望的编码不匹配。

有关更多详细信息，请参阅

[字符编码和问题](https://stackoverflow.com/q/8421316/141172)

> 在特定的示例中，这是使用 UTF-8 读取的 Unicode 字符 'RIGHT SINQLE QUOTATION MARK' (U+2019)' 的典型 CP1252 表示。在 UTF-8 中，该字符存在于字节 0xE2、0x80 和 0x99 中。如果您检查 CP1252 代码页布局，您会发现这些字节正好代表字符 â、€ 和 ™。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:05:49.847

最可能的原因可能是您的系统有一种字体，而 CSV 无法支持。查看本文以获取编码帮助。[http://office.microsoft.com/en-us/help/choose-text-encoding-when-you-open-and-save-files-HA010121249.aspx](http://office.microsoft.com/en-us/help/choose-text-encoding-when-you-open-and-save-files-HA010121249.aspx)

# android - Facebook 错误“登录配置错误”

> ID：14825696
> 
> 赞同：0
> 
> 时间：2013-02-12T05:01:09.193
> 
> 标签：android, facebook-social-plugins

我的 Logcat 中的错误是：

02-12 10:04:54.240: E/SurfaceFlinger(521): 无法打开 /sys/power/wait_for_fb_sleep 或 /sys/power/wait_for_fb_wake 02-12 10:04:54.250: D/libEGL(521): egl .cfg 未找到，使用默认配置 02-12 10:04:54.260: D/libEGL(521): 加载 /system/lib/egl/libGLES_bst.so 02-12 10:04:54.260: W/PGA(521) : eglGetProcAddress: "eglGetRenderBufferANDROID" 未找到 02-12 10:04:55.260: E/HdIpc(521): 连接失败 err = -1 errno = 110 (ETIMEDOUT)。每个进程只记录一次超时日志 02-12 10:04:55.260: E/PGA(521): 无法连接到主机，err = -1，正在重试... 每个进程只记录一次以避免淹没原木。

当我的手机显示该错误并且当我按下 fb 页面右上角的确定按钮时。我还生成了哈希键并将其放入仪表板。当我从我的暴民中卸载 fb 应用程序时，它运行良好。但不适用于 fb 应用程序。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:13:33.583

有时，您生成的密钥哈希并不完全正确。*显然*（当然未经证实），它与 JRE 1.7 有关。

遵循以下两种解决方案之一，您应该一切顺利。

**解决方案1：**

试试这个链接：[http](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1) ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1 。我发现使用 Facebook 获取哈希键的方法并不总是像宣传的那样有效。但是，此链接具有获取哈希键的不同方法，并且几乎总是有效。

**解决方案2：**

话虽如此，我总是发现最简单的事情就是*让 Facebook SDK 告诉你你的 Hash Key 是什么*。这要简单得多，不应该超过几分钟。

第 1 步：在您的 Facebook SDK 中，找到*Util.java*类。在那，改变这个：

```
private static boolean ENABLE_LOG = false; 
```

到：

```
private static boolean ENABLE_LOG = true; 
```

第 2 步：创建一个**新**的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。

第 3 步：在您的 DDMS (Logcat) 运行并且您的设备连接到计算机的情况下，运行应用程序并继续寻找*密钥不匹配*警告。该警告具有**实际**的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:31:11.693

这是密钥库哈希键的问题。您可以安装[openSSL](http://code.google.com/p/openssl-for-windows/source/checkout)（下载适合您的系统，即 32 位/64 位，这很重要）并使用以下命令生成哈希密钥。这将解决问题。

```
 @echo Exporting keystore cert
keytool -exportcert -alias myalias -keystore mycert.keystore > mycert.keystore.bin

@echo Converting to sha1
C:\PROGRAMS\openssl-0.9.8k_X64\bin\openssl sha1 -binary mycert.keystore.bin > mycert.keystore.sha1

@echo Converting to base64
C:\PROGRAMS\openssl-0.9.8k_X64\bin\openssl base64 -in mycert.keystore.sha1 -out mycert.keystore.base64

@echo Done, Android hash key for Facebook app is:
C:\PROGRAMS\openssl-0.9.8k_X64\bin\openssl base64 -in mycert.keystore.sha1 
```

# javascript - 使用 JavaScript 获取网站的 HTML、CSS 和 JavaScript

> ID：14825701
> 
> 赞同：1
> 
> 时间：2013-02-12T05:01:33.097
> 
> 标签：javascript

我见过很多关于使用 Jquery + node.js + YQL 抓取 html 的问题。它没有提到从网页获取 css 和 javascript。

有没有办法在不使用服务器端技术的情况下获取外部网站的 html、css 和 javascript？

*我需要在代码中发生这种情况，以便我可以在 webapp 中使用结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:07:52.217

[可能与此](https://stackoverflow.com/questions/578095/how-to-get-data-with-javascript-from-another-server?rq=1)重复。你的答案就在这里。

你应该看看 jQuery。它具有丰富的 AJAX 功能基础，可以让您完成所有这些工作。您可以加载外部页面，并使用类似 CSS 的直观选择器解析其 HTML 内容。

使用示例`$.get();`

```
$.get("anotherPage.html", {}, function(results){
  alert(results); // will show the HTML from anotherPage.html
  alert($(results).find("div.scores").html()); // show "scores" div in results
}); 
```

对于外部域，我不得不编写一个充当中间人的本地 PHP 脚本。jQuery 将调用本地 PHP 脚本，传入另一个服务器的 URL 作为参数，本地 PHP 脚本将收集数据，jQuery 将从本地 PHP 脚本中读取数据。

```
$.get("middleman.php", {"site":"http://www.google.com"}, function(results){
  alert(results); // middleman gives Google's HTML to jQuery
}); 
```

**注意：** PHP 的东西适用于不同的域。

# php - 如何从 xml 中获取元素、属性及其值？

> ID：14825702
> 
> 赞同：0
> 
> 时间：2013-02-12T05:01:33.517
> 
> 标签：php, xml, parsing

这是我的示例 xml 文件。我怎样才能得到每个元素、属性和它们的值。我想要所有版本的代码和名称、所有版本的代码和名称以及所有品牌的代码和名称？

```
<?xml version="1.0" encoding="UTF-8"?>
<PLM_University namespace="DS">
  <ALL_VERSIONS>
    <version code="1" name="V1" description="Version for CLS Products">
      <RELEASES_LIST>
        <release code="7" name=".7" rank="5" description="">
          <BRAND_LIST>
            <BRAND code="WLS" name="Companion">
              <SOLUTIONS_LIST>
                <SOLUTION code="WLS_STU" name="Companion Learning Space" />

              </SOLUTIONS_LIST>
            </BRAND>
          </BRAND_LIST>
        </release>
      </RELEASES_LIST>
    </version>
    <version code="10" name="Matrix10" description="Version for Matrix Products">
        <RELEASES_LIST>
        <release code="6" name=".6" rank="1" description="">
          <BRAND_LIST>
            <BRAND code="ENOVIA" name="ENOVIA Collaborative Innovation">
               <SOLUTIONS_LIST>
                <SOLUTION code="ENOV_MX1" name="ENOVIA MatrixOne" />

               </SOLUTIONS_LIST>
             </BRAND>
           </BRAND_LIST>
          </release>
         <release code="7" name=".7" rank="2" description="">
          <BRAND_LIST>
             <BRAND code="ENOVIA" name="ENOVIA Collaborative Innovation">
               <SOLUTIONS_LIST>
                 <SOLUTION code="ENOV_MX1" name="ENOVIA MatrixOne" />

              </SOLUTIONS_LIST>
            </BRAND>
           </BRAND_LIST>
         </release>
            <release code="8" name=".8" rank="3" description="">
          <BRAND_LIST>
            <BRAND code="ENOVIA" name="ENOVIA Collaborative Innovation">
              <SOLUTIONS_LIST>
            <SOLUTION code="ENOV_MX1" name="ENOVIA MatrixOne" />
              </SOLUTIONS_LIST>
            </BRAND>
          </BRAND_LIST>
        </release>
    </RELEASES_LIST>
    </version>
</ALL_VERSIONS>
</PLM_University> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:38:47.650

```

$xml = simplexml_load_file("data.xml");

foreach($xml->ALL_VERSIONS->版本为 $child)
{

    echo "版本代码：".$child['code'];
    echo "版本名称：".$child['name'];

    foreach($child->RELEASES_LIST->发布为 $releaseChild)
    {
        echo "发布代码：".$releaseChild['code'];
        echo "发布名称：".$releaseChild['name'];

        echo "品牌代码：".$releaseChild->BRAND_LIST->BRAND['code'];
        echo "品牌名称：".$releaseChild->BRAND_LIST->BRAND['name'];
    }

}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:31:38.040

这是一个您可以使用的简单解决方案：

```
<?php
//Load xml file and than json encode/decode it into an array.
$a = json_decode(json_encode((array) simplexml_load_file('path_to_your_xml.xml'),1);

//Loop the array creating a return array
$return = array();
foreach($a['ALL_VERSIONS']['version'] as $key=>$value){
    $return[$key]['code'] = $value['@attributes']['code'];
    $return[$key]['name'] = $value['@attributes']['name'];

    if(is_array($value['RELEASES_LIST']['release']) && isset($value['RELEASES_LIST']['release'][0]['BRAND_LIST']['BRAND']['@attributes']['code'])){
        //Loop sup versions
        foreach($value['RELEASES_LIST']['release'] as $key2=>$sub){
            $return[$key][$key2]['RELEASES_LIST'] = array(
                                            'core'=>$sub['@attributes']['code'],
                                            'name'=>$sub['@attributes']['name']);
            $return[$key][$key2]['BRAND_LIST'] = array(
                                            'brand'=>$sub['BRAND_LIST']['BRAND']['@attributes']['code'],
                                            'brand_name'=>$sub['BRAND_LIST']['BRAND']['@attributes']['name']);
        }

    }else{
    $return[$key]['RELEASES_LIST'] = array(
                                            'core'=>$value['RELEASES_LIST']['release']['@attributes']['code'],
                                            'name'=>$value['RELEASES_LIST']['release']['@attributes']['name']);
    $return[$key]['BRAND_LIST'] = array(
                                            'brand'=>$value['RELEASES_LIST']['release']['BRAND_LIST']['BRAND']['@attributes']['code'],
                                            'brand_name'=>$value['RELEASES_LIST']['release']['BRAND_LIST']['BRAND']['@attributes']['name']);
    }
}

print_r($return);
/*
Array
(
    [0] => Array
        (
            [code] => 1
            [name] => V1
            [RELEASES_LIST] => Array
                (
                    [core] => 7
                    [name] => .7
                )

            [BRAND_LIST] => Array
                (
                    [brand] => WLS
                    [brand_name] => Companion
                )

        )

    [1] => Array
        (
            [code] => 10
            [name] => Matrix10
            [0] => Array
                (
                    [RELEASES_LIST] => Array
                        (
                            [core] => 6
                            [name] => .6
                        )

                    [BRAND_LIST] => Array
                        (
                            [brand] => ENOVIA
                            [brand_name] => ENOVIA Collaborative Innovation
                        )

                )

            [1] => Array
                (
                    [RELEASES_LIST] => Array
                        (
                            [core] => 7
                            [name] => .7
                        )

                    [BRAND_LIST] => Array
                        (
                            [brand] => ENOVIA
                            [brand_name] => ENOVIA Collaborative Innovation
                        )

                )

            [2] => Array
                (
                    [RELEASES_LIST] => Array
                        (
                            [core] => 8
                            [name] => .8
                        )

                    [BRAND_LIST] => Array
                        (
                            [brand] => ENOVIA
                            [brand_name] => ENOVIA Collaborative Innovation
                        )

                )

        )

)
*/
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T05:08:28.440

在 php 中你可以使用 DOMDocument

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

在 PHP 上

例如 ：

```
 <?php
   $handle = fopen("1.xml", "rb");
   $xml= '';
   while (!feof($handle)) {
       $xml .= fread($handle, 8192);
   }
   fclose($handle);

    $dom = new DOMDocument;
    $dom->loadXML($xml);
    $books = $dom->getElementsByTagName('book');
    foreach ($books as $book) {
       echo $book->nodeValue, PHP_EOL;
    }
  ?> 
```

有关更多示例，请参见此页面[http://www.php.net/manual/en/domdocument.getelementsbytagname.php](http://www.php.net/manual/en/domdocument.getelementsbytagname.php)

# java - 无法将 View.getTag 转换为 ArrayList

> ID：14825706
> 
> 赞同：0
> 
> 时间：2013-02-12T05:02:07.893
> 
> 标签：java, android, exception

由于此异常，我的 Android 应用程序崩溃，我不明白为什么会发生此异常：

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList 
```

下面是我的代码。

```
private void setAllData(View v)
{
    ArrayList<String> idList = new ArrayList<String>();
    boolean added=false;
    for(String chid:checkedList)
    {
        SortedSet<String> ts = new TreeSet<String>();
        int id=txt2Id.get(chid);
        View v1=v.findViewById(id);
        if(v1!=null)
        {
            Log.e("---- Value of v1 ----", v1.getTag().toString());

            // I am getting ClassCast exception on the below line

            ArrayList<String>vidList=(ArrayList<String>) v1.getTag(id);

            if(vidList==null||vidList.size()==0)
            {
                ((CustomFragment) getActivity()).updateTab4List(new ArrayList<String>());
                return;
            }
            else
            {
                if(!added)
                {
                    idList=vidList;
                    added=true;
                }
                else if(idList.size()==0)
                {
                    ((CustomFragment) getActivity()).updateTab4List(idList);
                    return;
                }
                else
                {
                    ArrayList<String> temp = new ArrayList<String>();
                    int i=0;
                    for(String str:idList)
                    {
                        if(vidList.contains(str))
                            temp.add(str);
                    }
                    idList=temp;
                }
            }
        }
    }
    if(checkedList.size()==0)
    idList=null;
    ((CustomFragment) getActivity()).updateTab4List(idList);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:04:51.597

`getTag()`类的方法`View`返回一个对象。请参阅[http://developer.android.com/reference/android/view/View.html#getTag()](http://developer.android.com/reference/android/view/View.html#getTag())

您不能将其转换为 ArrayList。表达式不合法

```
 ArrayList<String>vidList=(ArrayList<String>) v1.getTag(id); 
```

也许你想要

```
 ArrayList<String> vidList = new ArrayList<String>();
 vidList.add((String) v1.getTag(id)); 
```

# html - 通过 CSS 进行的图像转换不适用于 Chrome 和 IE

> ID：14825707
> 
> 赞同：1
> 
> 时间：2013-02-12T05:02:18.197
> 
> 标签：html, css, image, google-chrome, png

这是我的代码，在 Firefox 中运行良好，但是它不能以所需的格式运行，FF 这次在 chrome 和 IE 中显示的内容。

当页面加载时，它甚至在 Chrome 中也显示，但在那之后所有转换都停止工作，让我知道我做错了什么或如何修复它。

注意-我知道`blank.jpg`这里不存在，但我相信这不会对修复造成伤害。

小提琴 -[明星修复](http://jsfiddle.net/swapnesh/fPuUR/)

FF截图（必填）

![火狐](../Images/5309fea7c4a808bb2acfded4c149241d.png)

Chrome 截图（不正确）

![铬合金](../Images/0875043a37dab332d233c59ce7e464c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:18:10.660

它**确实**有所不同，`blank.jpg`这里不存在，Firefox 将图像处理为 0x0，但 Chrome 将其处理为 50x50，因为这就是您在`<img>`标记中设置的内容

**[JSFiddle](http://jsfiddle.net/NoahWetjen/fPuUR/5/)**

# android - 如何在使用 AsyncTask 更新两个片段时在 android 中的地图片段和列表片段之间进行交换

> ID：14825708
> 
> 赞同：2
> 
> 时间：2013-02-12T05:02:35.663
> 
> 标签：android, android-fragments, android-maps, android-maps-v2

我在使用 MapView 时执行此操作的策略非常简单，但我现在正在过渡到 Android Maps v2 并且必须使用 MapFragment。我的场景涉及获取事件列表，然后我需要在后台对这些事件进行地理解码以获取它们的纬度和经度，以计算与用户的距离并放置到地图上。我有一个操作栏按钮，允许用户在列表和地图片段之间切换，但我的问题是如何将两个片段保存在内存中并避免它们的生命周期，以便我可以在更新列表适配器时不断向地图片段添加标记在列表片段中？

目前我用 FragmentTransaction.replace 用每个 Fragment 替换 FrameLayout，但这会导致另一个被破坏，而我只是希望它被隐藏（在我简单地将 MapView 可见性设置为 View.GONE 之前）。

**编辑**

我的代码最终是：

```
@Override
    public void swapFragments() {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction transaction = fm.beginTransaction();
        if (listFragment.isVisible()) {
            transaction.hide(listFragment);
            if (mapFragment.isAdded()) {
                transaction.show(mapFragment);
            } else {
                transaction.add(R.id.root, mapFragment);
            }
        } else {
            transaction.hide(mapFragment);
            transaction.show(listFragment);
        }
        transaction.commit();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:11:39.717

我一直在做类似的事情。我所做的是在`onCreate()`我的主要部分中创建两个片段`FragmentActivity`--- 然后基于 onclick 操作，我显示和隐藏适当的片段。我通过在我提交隐藏 listFragment 之前添加到后堆栈来补充这一点，这样当用户按下回时，他们将再次获得列表而不是之前的活动。

但是，目前，由于某种原因，我无法让 GoogleMap 在我的 MapFragment 中不为空。

我解决了这个问题——你可以在这里找到类似的答案[MapFragment Error - CameraUpdateFactory is not initialized](https://stackoverflow.com/questions/14904277/mapfragment-error-cameraupdatefactory-is-not-initialized/14910955#14910955)

# itextsharp - 从 HTML 获取背景颜色

> ID：14825713
> 
> 赞同：0
> 
> 时间：2013-02-12T05:03:16.520
> 
> 标签：itextsharp

在将 HTML 转换为 PDF 时，我没有为文本应用背景颜色，因为前颜色工作正常。当我调试时，我发现 Chunk 对象没有从包含背景颜色的 HTML 中获取的背景颜色。

有什么方法可以找到块背景颜色，以便我可以通过使用`SetBackground`方法进行设置？我正在使用 HTMLWorker.ParseToList 方法并在 pdf 中添加具有自定义格式的元素，但想从 HTML 中获取字体背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:37:36.197

抱歉不可能。即使我遇到了这个问题

# php - 如何使用 PHP 代码将 Web 图像 URL 编码为 JSON

> ID：14825718
> 
> 赞同：0
> 
> 时间：2013-02-12T05:03:42.587
> 
> 标签：php, android, json

我正在编写一个应用程序，在该应用程序中，我允许用户将他们的产品详细信息输入到框架中[我在 PHP 上制作]，然后通过使用该框架，我将数据编码为 json，并且我在我的 Android 应用程序中检索的编码数据使用网页服务。

但现在的问题是我无法编码网络图像 url，因此我没有在 json 中获得正确的图像路径：-

喜欢：

我已经给出了这个链接来编码成 JSON：

```
 "imageurl" => "http://www.libpng.org/pub/png/img_png/pnglogo-blk-sml1.png" 
```

但是每当我在 JSON 中看到编码的网络图像 url 时，都会得到这样的结果：

```
 "imagepath":"http:\/\/www.libpng.org\/pub\/png\/img_png\/pnglogo-blk-sml1.png" 
```

**为什么我得到错误的图片网址....**

我不知道我该如何解决这个问题..请有人帮助我....

相册.php：

```
 <?php
/*
*Simple JSON generation from static array
*Author: JSR
*/

include_once './data.php';
$albums = array();

// looping through each album
foreach ($album_tracks as $album) {
$tmp = array();
$tmp["id"] = $album["id"];
$tmp["name"] = $album["album"];
$tmp["description"] = $album["detail"];
$tmp["imagepath"] = $album["imageurl"];
$tmp["songs_count"] = count($album["songs"]);

// push album
array_push($albums, $tmp);
}

//printing json
echo json_encode($albums);
?> 
```

数据.php：

```
 <?php
/*
*Simple JSON generation from static array
*Author: JSR
*/
$album_tracks = array(
1 => array(
"id" => 1,
"album" => "Appetizers",
"detail" => "All appetizers served with mint and tamarind chutneys.",
"imageurl" => "http://www.libpng.org/pub/png/img_png/pnglogo-blk-sml1.png"
)
));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:16:11.033

对我来说它有效

```
<script>
    var str="http:\/\/www.libpng.org\/pub\/png\/img_png\/pnglogo-blk-sml1.png";
    document.write("<img src='" + str + "'/>");
</script> 
```

每当您在 json 中发送图像路径或 url 时，它都会转义所有斜杠、引号等。因此您可以使用 s/\////gis 之类的一些正则表达式来摆脱这些转义字符并获取原始 url 或位置。

# jquery - 将焦点设置到 jqgrid 中选择行上的可编辑输入字段

> ID：14825722
> 
> 赞同：1
> 
> 时间：2013-02-12T05:03:56.790
> 
> 标签：jquery, jquery-ui, jqgrid

在我的网格中，我使用自定义格式化程序来编辑其列字段值之一。

我想在选择网格行时将焦点设置到该可编辑字段。

请帮助我...

这是我的网格

```
jQuery("#myGrid").jqGrid({
datatype: "local",
colNames:['','','',''],
colModel:[{name:'id',index:'id', width:50, hidden:true},
          {name:'activname',index:'activname', width:100, title: false},
          {name:'formattedvalue',index:'formattedvalue', width:200, formatter:formatField},
          {name:'value',index:'value', hidden:true}],
height: window.innerHeight - 318,

onSelectRow: function(id,stat,e)
{
  // here I want to set the focus to the editable field
}}); 
```

这是格式化程序功能

```
function formatField(cellvalue, options, rowObject){
 jQuery("myGrid").jqGrid('setColProp','formattedvalue',
  {editable: true, 
   edittype:"custom", 
   editoptions: {
     custom_element: function(value, options) {

       var elemStr = '<div><input type="text" id="'+ options.id +'_id" tabindex="2" maxlength="10" size="10" value="' + value + '" /> </div>';          

       var $custElem = jQuery(elemStr);

       $custElem.find("input").bind("keydown",function(e) {             
         return dynamicFieldKeyPressed(e, this, rowObject);                         
       });

       return $custElem[0];
     },
     custom_value: function(elem, operation, value){           
         return jQuery(elem).find("input").val();           
     }
  }
});
return cellvalue;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:32:36.683

您可以使用

更新：

```
 onSelectRow: function(id,stat,e){
 if(id && id!==lastSel){ 
    jQuery('#myGrid').restoreRow(lastSel); 
    lastSel=id; 
 }
 jQuery('#myGrid').editRow(id, true); 
 $("#"+id+"_formattedvalue").focus();

  }, 
```

未经测试，但应该可以工作

# silverlight - 每次都在构造函数中调用 InitializeComponent？

> ID：14825726
> 
> 赞同：0
> 
> 时间：2013-02-12T05:04:22.307
> 
> 标签：silverlight, silverlight-4.0

我有两个构造函数，如何为两个构造函数调用 InitializeComponent() 方法。

例如

ABC类

{

```
 public ABC(int a, int b)
   {
      InitializeComponent();
      //some Code
   }

  public ABC(int a, int b, int c)
  {
      InitializeComponent();
      // some Code
  } 
```

}

我要这样写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:22:34.737

```
public ABC()
{
      InitializeComponent();
}

public ABC(int a, int b): this()
{
}

public ABC(int a, int b, int c): this(a,b)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:29:22.897

您的代码片段对我来说看起来不错。通过这个 InitializeComponent() 方法将从两个构造函数中调用（可以创建对象的任何一种方式）。

如果您确定，无论构造函数如何，您都需要调用 InitializeComponent()，然后您甚至可以在对象创建后调用它以避免重复，但这完全取决于您的逻辑和需求实现

维诺德

# asp.net-mvc - MVC _Layout with Action using Session - 加载顺序对我来说是个问题

> ID：14825727
> 
> 赞同：0
> 
> 时间：2013-02-12T05:04:25.623
> 
> 标签：asp.net-mvc, session

全部，

我有一个 MVC _Layout.cshtml 调用：

```
@Html.Action("GetActionStrip", "Vehicles") 
```

我还有一个加载一些视图的控制器。

我的问题是我有一个名为**GetVehicleDetails**的控制器操作，它通过 ID 获取车辆。

行动：

```
@Html.Action("GetActionStrip", "Vehicles") 
```

需要首先加载 GetVehicleDetails，因为它需要将车辆 ID 放入会话中。

这不起作用：

```
@Html.Action("GetActionStrip", "Vehicles") 
```

在 GetVehicleDetails 之前加载。

```
@Html.Action("GetActionStrip", "Vehicles") 
```

需要在多个视图上，这就是我将它放在 _Layout 文件中的原因。

我可以通过放置：

```
@Html.Action("GetActionStrip", "Vehicles") 
```

在每个视图上我都需要它，然后它们以正确的顺序加载。即.. 控制器操作 GetVehicleDetails 将车辆 ID 设置为会话，然后：

```
@Html.Action("GetActionStrip", "Vehicles") 
```

读取会话值。

有没有人知道我是否可以按照我想要的方式进行操作，或者我是否必须将我的@Html.Action 放在每种违反 DRY 原则的视图上。

谢谢RuSs

**保罗，我试图给你写评论，但字数限制杀死了我。这是我的评论：**

保罗，

感谢你的信息。我了解您所写的内容，但在我继续并尝试实施类似的事情之前，我只想确保您完全理解该场景。

您的方案是否会满足以下事实：需要会话值的代码是从我的**_Layout**（可以说是母版页）中的 @Html.Action 调用的，而我需要我的控制器获取操作以接收参数并将此参数设置为会话.

据我了解，_Layouts（母版页）首先加载，因此我的 @Html.Action 将运行并查找会话值。但是，由于此代码位于 _Layout 中，它将首先运行，因此我的控制器上的 GET 尚未从传入参数的操作中设置会话。

注意：我的 _Layout 没有它自己的控制器（不确定这是否重要）

谢谢RuSs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:24:10.107

关于设计的某些东西从根本上是不正确的。您不应该像这样紧密耦合不同的组件。顺序应该不重要，哪个先出现。

这就是我可能会做你正在寻找的事情的方法。我将创建一个模型绑定类，您可以在需要会话值的控制器操作中接收该类。如果尚未设置，模型将从数据库或任何地方提取会话值，否则它将使用会话值。现在顺序无关紧要。更好的是，您可以使 MySessionObject 成为一个接口，然后您可以在测试用例中模拟它。

```
 public interface IMySessionObject
    {
        int GetValueX();
    }

    public class MySessionObject : IModelBinder, IMySessionObject
    {
        private HttpContextBase _httpContext;
        private MySessionObject(HttpContextBase httpContext)
        {
            _httpContext = httpContext;
        }

        public int GetValueX()
        {
            if (_httpContext.Session["x"] == null)
            {
                _httpContext.Session["x"] = 54; // Get the value here.
            }
            return (int)_httpContext.Session["x"];
        }

        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var context = controllerContext.HttpContext;
            var obj = new MySessionObject(context);
            return obj;
        }
    }

    public class HomeController : Controller
    {
        public ActionResult Index(IMySessionObject obj)
        {
            ViewBag.X = obj.GetValueX();

            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            return View();
        }

        public ActionResult About(IMySessionObject obj)
        {
            ViewBag.Message = "Your app description page.";

            return View();
        }

        public ActionResult Contact(IMySessionObject obj)
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:08:13.557

谢谢保罗。如果没有 Sitecore CMS 参与，我认为您的答案是正确的。我会投票给你，但仍然不能解决我的问题。这是我的另一篇文章，它更好地解释了它。我不希望您使用 Sitecore。[https://stackoverflow.com/questions/14867915/order-of-loading-layout-and-url-driven-action-is-opposite-to-a-standard-non-sit](https://stackoverflow.com/questions/14867915/order-of-loading-layout-and-url-driven-action-is-opposite-to-a-standard-non-sit) 试图为 Sitecore 找到一种方法 NOT在我的 MVC 代码运行之前以声明方式加载我的 _layout。

# php - 内部异常通过asp.net访问php web服务

> ID：14825733
> 
> 赞同：1
> 
> 时间：2013-02-12T05:04:53.853
> 
> 标签：php, asp.net, web-services

访问 php Web 服务时出现此错误

System.Web.Services.Protocols.SoapHeaderException：SOAP 错误：编码：对象在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）处没有“available_credit”属性System.Web.Services.Protocols.SoapHttpClientProtocol.InvokeAsyncCallback（IAsyncResult 结果）

使用的代码：

```
private void button1_Click(object sender, EventArgs e)
    {

        try
        {

            virtualrechargeService vr = new virtualrechargeService();
            vr.GetBalanceInfoCompleted += new GetBalanceInfoCompletedEventHandler(vr_GetBalanceInfoCompleted);
            vr.GetBalanceInfoAsync("asikcse");
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    }
    void vr_GetBalanceInfoCompleted(object sender,GetBalanceInfoCompletedEventArgs ev)
    {
        try
        {
            Console.WriteLine(ev.Error.ToString());
            Console.WriteLine(ev.Result.client_user_id);
            //MessageBox.Show(ev.Result.client_user_id);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

# tooltip - IE10 中的默认标题工具提示错位

> ID：14825735
> 
> 赞同：0
> 
> 时间：2013-02-12T05:05:05.763
> 
> 标签：tooltip, internet-explorer-10

我在 IE10 上遇到了工具提示问题。IE10 的默认工具提示显示锚元素的 title 属性文本，在其预期位置上方错位 20 到 40 像素。我们是否对此问题有任何解决方案或在 Microsoft 的网站上记录了有关此错误的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:06:47.173

工具提示没有放错位置，它的位置不会被触摸对象的手指或触控笔阻挡。如果工具提示位于被悬停的对象下方，则很难阅读，因为您必须在手指下方查看显示的信息。

随着平板电脑和触控设备变得越来越普遍，我们可以期待看到这些类型的变化对于更好的用户体验变得更加必要。

# asp.net - asp.net 应用到 html5/css3

> ID：14825743
> 
> 赞同：0
> 
> 时间：2013-02-12T05:06:06.167
> 
> 标签：asp.net, asp.net-mvc, html, css

我有一个用 VisualStudio2008 制作的 asp.net 应用程序，我想为移动用户提供类似的应用程序，我想为此使用 HTML5 和 css3，但我不知道如何处理代码隐藏部分，谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:08:45.730

您可以通过 Web 服务公开代码中的逻辑/代码*（最好是 RESTful）*，然后通过客户端代码（[jQuery](http://jquery.com/)）使用这些服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:22:18.957

您可能想研究像 Nustache（Mustache for .NET）这样的东西。

更好的选择是责备您的前端标记，使其具有响应性。一个不错的选择是使用 Twitter Bootstrap 或 Zurb 的 Foundation 框架之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:25:26.597

您可以将 jquery mobile 用于您的项目，[这篇](http://www.codeproject.com/Articles/413099/HTML5-jQuery-Mobile-and-ASP-NET-MVC-4-Using-the-Vi)文章可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:56:03.590

使用 Twitter 引导[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)。这确实是最好的选择，它将使创建响应式移动和桌面网站变得轻而易举。

# java - Java Regex 匹配特定字符串或另一个特定字符串，还是根本不匹配？

> ID：14825744
> 
> 赞同：1
> 
> 时间：2013-02-12T05:06:09.507
> 
> 标签：java, regex

想象一下使用正则表达式捕获输入：

```
2.1_3_4
3.2.1
3.2.1.RELEASE
3.2.1.SNAPSHOT 
```

数字和点很容易得到

```
([0-9\._]+) 
```

但是你如何捕捉到它加上“RELEASE”或“SNAPHOT”或没有这些？

我玩弄了 or 运算符，但无济于事...

```
([0-9\._]+RELEASE||SNAPSHOT)  // no worky 
```

顺便说一句，这是一个不错的正则表达式测试器：http: [//java-regex-tester.appspot.com/](http://java-regex-tester.appspot.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:09:07.073

我想你想要这个：

```
([0-9._]+(RELEASE|SNAPSHOT)?) 
```

（内部）括号形成一个组，问号表示该组可能出现 0 次或 1 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:22:14.070

你做的很棒。您只需要进行一些更改。
首先，你不使用`||`for 或，`|`被使用。所以`RELEASE||SNAPSHOT`会转换为`RELEASE|SNAPSHOT`.
由于发布或快照不是强制性的，`?`因此应在其后放置 a。所以最终的正则表达式变成

```
([0-9\._]+(RELEASE|SNAPSHOT)?) 
```

您也可以使用`\d`代替`0-9`. 除此之外，没有必要在它出现在里面时`.`逃脱 所以最后，下面可能是最终的正则表达式`\``[]`

```
([\d._]+(RELEASE|SNAPSHOT)?) 
```

# excel - Microsoft Excel - 日期序列

> ID：14825745
> 
> 赞同：0
> 
> 时间：2013-02-12T05:06:09.193
> 
> 标签：excel, date, time, spreadsheet, clock

在我问之前我已经看过这个问题，但如果它是重复的，我很抱歉。在电子表格中，我想使用日期序列。

例如。库存到货 - 2013 年 2 月 22 日星期五，然后在 2 月 22 日，该日期更改为接下来的 7 天。例如。库存到货 - 2013 年 3 月 1 日，然后无限期重复。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:49:30.393

如果您想始终显示下周五，您可以使用此公式

`=TODAY()+8-WEEKDAY(TODAY()+2)`

现在将显示 2013 年 2 月 15 日星期五.....但在 2 月 15 日它将更改为显示 2 月 22 日

对于其他日子，只需更改末尾的 +2，例如 +3 将在下周四给您，+4 将在下周三给您，+5 将在下周二给您等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:46:47.037

这是您可以执行此操作的某种方式，尽管我不确定这是否是您想要的。

`=B1+FLOOR((TODAY()-B1)/7,1)*7`

基本上，让一个单元格保存库存的开始日期（过去您收到此库存的第一个日期）。您还需要补货之间的天数（这里我硬编码为 7）。然后，您可以使用今天与该日期之间的差异除以补货时间的下限。这会给你一个阶梯函数式的行为。

# jquery - jquery 文档就绪问题

> ID：14825746
> 
> 赞同：1
> 
> 时间：2013-02-12T05:06:17.257
> 
> 标签：jquery, debugging, document-ready

我想知道两者之间的区别。

```
(function($){
    //some console.log code     
});
```

```
$(document).ready(function()
{
    //some console.log code
});
```

你们可能会说我愚蠢，但我不知道为什么会这样。

那么这里是问题。

当我使用时`(function($){`，我看不到任何结果，`console.log`但是当我使用时它显示所有`console debug`结果`document.ready`。

我正在使用`jQuery v1.8.2`.

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:13:07.303

第一个

```
$(function(){...});  //missing $ sign here in your code 
```

这只是在 Jquery 中调用 document.ready 的一种捷径。两者完全相同。如果您碰巧看到核心 .. 您会在评论中注意到这一点...[这里](https://github.com/jquery/jquery/blob/1.4.2/src/core.js#L152)是链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:08:52.977

编码

```
(function($){
    //some console.log code     
}); 
```

应该是这样的

```
$(function() {
    //some console.log code     
}); 
```

现在测试一下。

参考[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:12:21.930

在第一个示例中，您在结束时错过了一些东西：

```
(function($){
    //some console.log code     
})(jQuery); // <----------add (jQuery) here and test it 
```

或这个：

```
 jQuery(function($){ // <---------add jQuery first here
    //some console.log code     
  }); 
```

# ios - 无法单击工具栏上的栏按钮？

> ID：14825749
> 
> 赞同：0
> 
> 时间：2013-02-12T05:06:31.610
> 
> 标签：ios, ipad, cocoa-touch

在我的 iPad 应用程序中，我手动添加了导航栏和工具栏。
我还通过编码添加滚动视图和图像视图。

我的问题是我可以看到导航栏和工具栏。
我可以点击导航栏上的按钮。
但是，我无法单击工具栏上的栏按钮。

我该怎么做？

这是我的代码。

```
- (void)viewDidLoad
{

[super loadView];
self.view.backgroundColor = [UIColor grayColor];

UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height)];
ScrollView.pagingEnabled = YES;

NSInteger numberOfViews = 4;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    // Create a UIImage to hold Info.png
    UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
    UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];
    UIImage *image3 = [UIImage imageNamed:@"Image-003.jpg"];
    UIImage *image4 = [UIImage imageNamed:@"Image-004.jpg"];

    NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,image3,image4,nil];

    UIImageView *ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height-88)];
    [ImageView setImage:[images objectAtIndex:i]];

    [ScrollView addSubview:ImageView];
}

ScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
[self.view addSubview:ScrollView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:49:16.037

谢谢大家。我可以解决我的问题。
我改变我的代码。

```
UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height)]; 
```

对此。

```
UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height-88)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:14:25.820

我不知道您的确切问题是什么，因为您显示的代码与`UIToolBar`.

但是下面的代码我 `UIBarButton`用**flexSpace**添加了两个。
**您可以`UIBarButton`根据需要添加**

```
UIToolbar *Toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    Toolbar = UIBarStyleBlackTranslucent;
    [Toolbar sizeToFit];

     NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];
    [flexSpace release];

    UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(Cancel)];
    [barItems addObject:btnCancel];

    UIBarButtonItem *btnDone = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(done)];
    [barItems addObject:btnDone];

    [Toolbar setItems:barItems animated:YES]; 
```

**点击栏按钮时调用以下方法**

```
-(void)Cancel
{
  // Write Code for Cancel Method
}

-(void)done
{
  // Write Code for Done Method
} 
```

此代码可能对您自己的情况有所帮助。

谢谢 ：）

# c#-4.0 - 水晶报表中主报表每一行的子报表

> ID：14825752
> 
> 赞同：0
> 
> 时间：2013-02-12T05:06:40.467
> 
> 标签：c#-4.0, crystal-reports, row, subreport

我有一个显示申请人及其详细信息的主报告，我想将与该申请人相关的注释显示为子报告，所以如果我有大约 100 个申请人，那么对于每一行申请人，我想在它下面显示详细信息子报告。是否可以为每一行创建一个子报告？我的意思是我无法从我的子报告中获得如何为所有申请人提供注释，我将显示为每个申请人过滤的记录，这些记录也低于每个相关申请人行。

```
ApplicantName1    Address1   City1     Salary1

Notes:
Date1  Initials1      AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Date2  Initials2     BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB

ApplicantName2    Address2   City2     Salary2

Notes:
Date3  Initials3      AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Date4  Initials4      BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 
```

我创建了一个子报告，显示所有注释（已完成），现在如何显示仅与第一行相关的子报告数据？我是否必须通过将报告放在详细信息部分来传递参数？请指导我，我正在寻找所有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:41:34.167

您必须在字段下方的“详细信息”部分本身中插入子报告。您可能希望关闭子报告中的所有页眉/页脚，并且必须先调整主报告和子报告部分的高度，然后才能使它们完美。

是的，需要参数来链接两者，这个概念更像是链接主/子表。一点也不复杂。在您的情况下，ApplicantID 可能是子报告的链接键

# c# - 如何使用 C# 中的 word 中的 print to file 选项创建 postscript 文件？

> ID：14825754
> 
> 赞同：2
> 
> 时间：2013-02-12T05:06:48.537
> 
> 标签：c#, ms-word, postscript

我想使用 Microsoft word 和 C# 的打印到文件从 word 文档（.doc）创建一个 postscript 文件，我找到了很多打印文件的方法，但找不到“打印到文件”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T08:08:29.933

除非事情发生了变化，否则您不会“打印到文件”，而是“打印到文件上的打印机：”

因此，您需要做的是使用您选择的驱动程序创建一个打印机实例，并将其数据发送到文件：硬件（而不是 LPT！：COM！：USB001：等）。

在高达 7 的 Windows 版本上（我还没有关于 Windows 8 的信息），可以创建一个端口监视器并安装它，然后可以将数据写入文件。不过，您仍然必须创建一个使用该端口监视器的打印机实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:55:37.010

添加新打印机。

选择 - 连接到此打印机的本地打印机

使用端口 - 文件：（打印到文件）

从列表中选择一台 postscript 打印机，例如 Apple LaserWriter 16/600 PS（或用于更大输出的 11x17 打印机或用于可变页面尺寸能力的照排机）

然后只需打印到打印机

# ruby-on-rails - 通过触发间隔上的操作来更新页面的一部分

> ID：14825755
> 
> 赞同：0
> 
> 时间：2013-02-12T05:07:02.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望每秒更新我的页面的一部分。我知道我可以在 JavaScript 中使用*setInterval*来实现这一点，但是如果我想在 Rails 代码中内置一些逻辑怎么办？这是一个简单的抽象：

控制器中的代码：

```
def lookup_something
  @stuff_to_display = [code to look up a set of records]
end 
```

然后在视图中：

```
<body>    
<div id="update_this"></div>    
</body> 
```

我想要每秒运行该操作并更新`div`上述内容。我知道我以前在以前的项目中用相对简单的代码块完成了此操作，但我无法找到如何在我的一生中再次执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:46:30.383

如果您愿意使用 jQuery，$.ajax 调用相当简单：来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
setInterval(function() {
     $.ajax({
        url:"url/to/lookup_something",
        success:function(result){
            // do something here to 
            // $("#update_this")
        }
    });
}, 1000); // every second 
```

# sql-server - 水平显示结果

> ID：14825760
> 
> 赞同：0
> 
> 时间：2013-02-12T05:07:44.037
> 
> 标签：sql-server, for-xml

使用 SQL Server 2005

我想要`itemid, deliverydate, remainpurchphysical`水平显示。

目前我正在使用`FOR XML PATH`并且这有效。

当结果是每个 itemid 的多个交货日期时，我想让它们显示得更好一些

```
 [ITEMID]  [DELIVERYDATE AND REMAINPURCH]
  -----------------------------------------
  [1234]    [14/14/2014 25 | 15/15/2015 27 | 16/16/2016 28] 
```

最好用 | 每个日期之间

这是当前代码

```
-select itemid, CONVERT(NVARCHAR, deliverydate, 103),remainpurchphysical
--from purchline where purchstatus =1 --and itemid = '00727-s'
SELECT 
    itemid 
    ,deliverydates = STUFF(
                       (SELECT '   ' + CONVERT(NVARCHAR, deliverydate, 103)
                        FROM purchline b 
                        WHERE b.itemid = a.itemid AND purchstatus = 1 
                        ORDER BY deliverydate 
                        FOR XML PATH('')), 1, 1, '')
    ,remainpurchphysical = STUFF(
                              (SELECT '   ' + CAST(CONVERT(Decimal(9,0), remainpurchphysical) AS VARCHAR)
                               FROM purchline b 
                               WHERE b.itemid = a.itemid AND purchstatus = 1  
                               ORDER BY deliverydate
                               FOR XML PATH('')), 1, 1, '')
FROM purchline a
WHERE purchstatus =1
GROUP BY itemid
ORDER BY itemid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:12:57.480

像这样的东西，

```
SELECT
     [ITEMID],
     STUFF(
         (SELECT ' | ' + [date]
          FROM Table1
          WHERE [ITEMID] = a.[ITEMID]
          FOR XML PATH (''))
          , 1, 1, '')  AS DateList
FROM Table1 AS a
GROUP BY [ITEMID] 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/40710/4)

# css - 为什么谷歌字体不起作用？

> ID：14825765
> 
> 赞同：0
> 
> 时间：2013-02-12T05:08:06.383
> 
> 标签：css, font-face, google-font-api

我正在使用来自[http://www.google.com/webfonts/earlyaccess](http://www.google.com/webfonts/earlyaccess)的 Google 字体，但它没有按预期工作。有任何想法吗。

[我在http://jsfiddle.net/UbDcg/4/](http://jsfiddle.net/UbDcg/4/)上设置了一个基本版本，它不像想象的那样工作。

**HTML**

```
 FONT RESOURCE:<br>
 http://www.google.com/webfonts/earlyaccess<br>

<div id="fontTest">
   Lohit font why not working ...
</div> 
```

**CSS**

```
 @import url(http://fonts.googleapis.com/earlyaccess/lohitdevanagari.css);    

 body{
      font-family: verdana,helvetica,arial,sans-serif;
      font-size:12px;
 }

#fontTest{
     background:#e8e8e8;
     padding:20px;
     margin-top: 20px;
     font-family: 'Lohit Devanagari', serif;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T15:46:13.273

将 !important 标签添加到您的 CSS 将修复它。

```
#fontTest {font-family: 'Lohit Devanagari', serif !important} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:18:00.067

您需要具有如下字体系列：

```
font-family: 'Lohit Devanagari', serif; 
```

这就是它在 Google 文档中的显示方式：[http ://www.google.com/webfonts/earlyaccess](http://www.google.com/webfonts/earlyaccess)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:32:45.870

这是工作！你第一次打错了，但现在可以了。

试试看

```
<div id="fontTest">
    It's working!<br/>
    सभी मनुष्यों को गौरव और अधिकारों के मामले में जन्मजात स्वतन्त्रता और समानता प्राप्त है। उन्हें बुद्धि और अन्तरात्मा की देन प्राप्त है और परस्पर उन्हें भाईचारे के भाव से बर्ताव करना चाहिये
</div> 
```

见[http://jsfiddle.net/UbDcg/5/](http://jsfiddle.net/UbDcg/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T22:02:35.730

有问题的字体“Lohit Devanagari”似乎已从 Google 站点中删除： [http](http://www.google.com/webfonts/) ://www.google.com/webfonts/ 尝试在该站点搜索“Lohit Devanagari”，您会发现它不再存在。

# php - 为什么我的更新表功能不起作用？

> ID：14825766
> 
> 赞同：0
> 
> 时间：2013-02-12T05:08:12.767
> 
> 标签：php, mysql

我知道我会得到你们的支持，`mysql_**`但我现在必须这样做，因为我已经深入到项目中，我不能回去重新开始。所以请温柔一点。

无论如何，我不明白为什么我的更新表不起作用！

这是代码：

```
 <?php

$host="localhost"; // Host name
$username="mydetails"; // Mysql username
$password="XXXXXXX"; // Mysql password
$db_name="mydetails"; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Delete data in mysql from row that has this id
$result = mysql_query ("UPDATE $tbl_name SET balance='$balance' WHERE id='$id'");

// if successfully deleted
if($result){
echo "The user has been banned successfully!";
echo "<BR>";
echo "<a href='suspend_users.php'>Back to main page</a>";
}

else {
echo "ERROR";
}
?>

<?php
// close connection
mysql_close();
?> 
```

如果我删除`$balance`并`''`留空或替换`$balance`为文本或数字，它将进入余额列，这意味着它可以正常工作并成功连接到数据库而没有任何问题。但是当我说它`balance='$balance'`根本不起作用时。

我确实有一个带有`id="balance"`and的输入字段，`name="balance"`因此不会丢失。

有人可以帮我解决这个问题而不给我一个使用的griff`mysql_*`吗？

谢谢

**更新：**

我的表单代码：

```
<tr>
<td bgcolor="#FFFFFF"><? echo $rows['id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['username']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['email']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['balance']; ?></td>
<td bgcolor="#FFFFFF"><input name="balance" type="text" id="balance" value="<? echo $rows['balance']; ?>" size="15"></td>
<td bgcolor="#FFFFFF"><a href="delete_ac.php?id=<? echo $rows['id']; ?>">Ban and Remove</a></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:48:17.350

无法使用存储在全局数组 $_GET 或 $_POST 中的变量名称访问表单的值（取决于您在表单中使用的方法）。你可以试试这个：

```
// get value of id that sent from address bar
$id=$_GET['id'];

//get value of balance. i am supposing you have used get method in your form
$balance = $_GET['balance'];

// Delete data in mysql from row that has this id
$result = mysql_query ("UPDATE $tbl_name SET balance='$balance' WHERE id='$id'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:14:15.737

尝试这个

```
$result = mysql_query ("UPDATE ". $tbl_name ." SET balance='".$balance."' WHERE id='".$id."'");
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T05:37:19.880

`$balance`永远不会在您的代码中设置。

尝试添加`$balance = $_POST['balance']`，

或者如果表单有`method="get"`使用`$balance = $_GET['balance']`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T05:22:57.657

像这样加上`$tbl_name`引号`'$tbl_name'`

# c# - 将动态属性序列化为 JSON

> ID：14825776
> 
> 赞同：0
> 
> 时间：2013-02-12T05:08:55.790
> 
> 标签：c#, json, serialization, ravendb, square-bracket

我有一个 Web API 项目，它可以从 JSON 中对定义为以下内容的对象进行水合。我正在尝试将此对象插入 RavenDB 数据库，但发现动态属性“内容”未正确序列化（注意空数组）。

我尝试了几种序列化程序来生成 json 字符串：System.Helpers.Json.Encode()、System.Web.Script.Serialization.JavaScriptSerializer。两者都面临同样的问题。

RavenJObject.fromObject(obj) 也有同样的问题。

尽管 CLR 反射有明显的限制，有没有办法完成我的目标？

```
public class SampleType
    {
        public Guid? Id { get; private set; }
        public dynamic Content { get; set; }
        public string Message { get; set; }
        public string Actor { get; set; }

        public LogEntry()
        {
            Id = Guid.NewGuid();
        }
    }

JSON submitted to API:
{
    "Content": {
        "SomeNumber": 5,
        "ADate": "/Date(1360640329155)/",
        "MaybeABoolean": true,
        "EmptyGUID": "00000000-0000-0000-0000-000000000000"
    },
    "Message": "Hey there",
    "Actor": "John Dow"
}

Hydrated object:
    ID: {b75d9134-2fd9-4c89-90f7-a814fa2f244d}
    Content: {
        "SomeNumber": 5,
        "ADate": "2013-02-12T04:37:44.029Z",
        "MaybeABoolean": true,
        "EmptyGUID": "00000000-0000-0000-0000-000000000000"
    }
    Message: "Hey there",
    Actor: "John Dow"

JSON from all three methods:
{
    "Id": "b75d9134-2fd9-4c89-90f7-a814fa2f244d",
    "Content": [
        [
            []
        ],
        [
            []
        ],
        [
            []
        ],
        [
            []
        ]
    ],
    "Message": "Hey there",
    "Actor": "John Dow"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:14:01.240

我记得我们使用了 Newtonsoft JSON 序列化程序，它可以很好地处理动态对象和 Expando 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:13:27.873

您可以为此使用 Planet 最快的库`Servicestack.Text`。您的问题的解决方案已[在此处](https://stackoverflow.com/questions/11313078/serializing-expandoobject-with-servicestack-text)得到解答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:07:22.370

您的动态对象必须正确实现 GetDynamicFieldNames() 方法才能使动态序列化工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T16:52:13.853

我真的不确定你在说什么。

```
public class Foo
{
    public dynamic Bar { get; set; }
}

var foo = new Foo { Bar = new { A = 1, B = "abc", C = true } };
Debug.WriteLine(RavenJObject.FromObject(foo).ToString(Formatting.None));
Debug.WriteLine(JsonConvert.SerializeObject(foo, Formatting.None)); 
```

这两个的输出是：

```
{"Bar":{"A":1,"B":"abc","C":true}} 
```

我错过了什么？

# javascript - pjax 后页面重新加载

> ID：14825779
> 
> 赞同：3
> 
> 时间：2013-02-12T05:09:24.170
> 
> 标签：javascript, html, pjax

大家！我尝试使用 jquery-pjax 我有带有片段的 html 代码：

```
<li id="left_menu_item"><a href="myurl">Caption</a></li>
...
<div class="right-block" id="content">
</div> 
```

和js代码

```
$(document).pjax('a', '#content');

$(document).on('pjax:send', function() {
    console.log('pjax:send');
});
$(document).on('pjax:complete', function() {
    console.log('pjax:complete');
});
$(document).on('pjax:success', function() {
    console.log('pjax:success');
});
$(document).on('pjax:error', function() {
    console.log('pjax:error');
});
$(document).on('pjax:timeout', function() {
    console.log('pjax:timeout');
}); 
```

我收到“pjax:error”和“pjax:timeout”消息。行。我添加了

```
$.pjax.defaults.timeout = false; 
```

现在在 Javascript 控制台中可以：'pjax:send' 和 'pjax:complete'。但是在此之后页面重新加载！为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T11:07:45.300

当`jquery-pjax`用于逐步增强静态 HTML 站点时，您必须使用该`fragment`选项。

在您的情况下，代码将类似于：

```
$(document).pjax('a', '#content', { fragment: '#content' }); 
```

您还应该确保您的 HTML 是有效的 -`jquery-pjax`解析 HTML 并不完全像浏览器

`jquery-pjax`还有一个错误，其中作为片段的直接子节点的文本节点被剥离。确保您的内容包含在元素中，例如

```
<div id="content">
  <p>Page 1</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T14:14:33.710

```
$(document).pjax('a', '#content', { push: false, replaceRedirect: false }); 
```

# android - Android Google Map Api V2 中的异常

> ID：14825781
> 
> 赞同：0
> 
> 时间：2013-02-12T05:09:32.043
> 
> 标签：android, google-maps-api-2

我从示例中尝试了这段代码，但在 onResume() 中出现异常。我不明白有什么问题？任何人都可以为此提出建议吗？

**我的代码**

```
public class MainActivity extends Activity 
        implements LocationSource, LocationListener{

final int RQS_GooglePlayServices = 1;
private GoogleMap myMap;
TextView tvLocInfo;

LocationManager myLocationManager = null;
OnLocationChangedListener myLocationListener = null;
Criteria myCriteria;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tvLocInfo = (TextView)findViewById(R.id.locinfo);

    FragmentManager myFragmentManager = getFragmentManager();
    MapFragment myMapFragment 
        = (MapFragment)myFragmentManager.findFragmentById(R.id.map);
    myMap = myMapFragment.getMap();

    myMap.setMyLocationEnabled(true);

    myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

    myCriteria = new Criteria();
    myCriteria.setAccuracy(Criteria.ACCURACY_FINE);
    myLocationManager = (LocationManager)getSystemService(LOCATION_SERVICE);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_legalnotices:
        String LicenseInfo = GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(
                getApplicationContext());
        AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(MainActivity.this);
        LicenseDialog.setTitle("Legal Notices");
        LicenseDialog.setMessage(LicenseInfo);
        LicenseDialog.show();
        return true;    
    }
    return super.onOptionsItemSelected(item);   
}

@Override
protected void onResume() {
    super.onResume();

    int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

    if (resultCode == ConnectionResult.SUCCESS){
        Toast.makeText(getApplicationContext(), 
                "isGooglePlayServicesAvailable SUCCESS", 
                Toast.LENGTH_LONG).show();

        //Register for location updates using a Criteria, and a callback on the specified looper thread.
        myLocationManager.requestLocationUpdates(
                0L,             //minTime
                0.0f,           //minDistance
                myCriteria,     //criteria
                this,           //listener
                null);          //looper

        //Replaces the location source of the my-location layer.
        myMap.setLocationSource(this);

    }else{
        GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);    
    }

}

@Override
protected void onPause() {
    myMap.setLocationSource(null);
    myLocationManager.removeUpdates(this);

    super.onPause();
}

@Override
public void activate(OnLocationChangedListener listener) {
    myLocationListener = listener;
}

@Override
public void deactivate() {
    myLocationListener = null;
}

@Override
public void onLocationChanged(Location location) {
    if (myLocationListener != null) {
        myLocationListener.onLocationChanged(location);

        double lat = location.getLatitude();
        double lon = location.getLongitude();

        tvLocInfo.setText(
                "lat: " + lat + "\n" +
                "lon: " + lon);
    }
}

@Override
public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

}

} 
```

**Logcat 视图**

```
02-12 10:56:34.907: W/dalvikvm(1986): threadid=1: thread exiting with uncaught exception (group=0x40e55258)
02-12 10:56:34.922: E/AndroidRuntime(1986): FATAL EXCEPTION: main
02-12 10:56:34.922: E/AndroidRuntime(1986): java.lang.RuntimeException: Unable to resume activity {com.example.androidmapsv2/com.example.androidmapsv2.MainActivity}: java.lang.IllegalArgumentException: no provider_s found for criteria
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2491)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2519)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2033)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1179)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.os.Looper.loop(Looper.java:137)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.main(ActivityThread.java:4508)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at java.lang.reflect.Method.invoke(Method.java:511)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at dalvik.system.NativeStart.main(Native Method)
02-12 10:56:34.922: E/AndroidRuntime(1986): Caused by: java.lang.IllegalArgumentException: no provider_s found for criteria
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.os.Parcel.readException(Parcel.java:1331)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.os.Parcel.readException(Parcel.java:1281)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:671)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.location.LocationManager._requestLocationUpdates(LocationManager.java:582)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:563)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at com.example.androidmapsv2.MainActivity.onResume(MainActivity.java:88)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1159)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.Activity.performResume(Activity.java:4553)
02-12 10:56:34.922: E/AndroidRuntime(1986):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2481)
02-12 10:56:34.922: E/AndroidRuntime(1986):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:45:16.943

您应该查看 Android-Developers 页面，您可以在其中找到[`requestLocationUpdates`方法](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.location.LocationListener,%20android.os.Looper%29)的声明。

```
public void requestLocationUpdates (long minTime, float minDistance, Criteria criteria, LocationListener listener, Looper looper) 
```

在那里你可以看到该方法抛出了什么异常

```
Throws
    IllegalArgumentException    if criteria is null
    IllegalArgumentException    if listener is null
    SecurityException   if no suitable permission is present 
```

如果您现在查看您的代码

```
 myLocationManager.requestLocationUpdates(
            0L,             //minTime
            0.0f,           //minDistance
            myCriteria,     //criteria
            this,           //listener
            null);          //looper 
```

和你的例外

```
E/AndroidRuntime: java.lang.RuntimeException: Unable to resume activity {...}: 
        java.lang.IllegalArgumentException: no provider_s found for criteria
                   ^^^^^^^ this                              and this  ^^^^ 
```

也

```
at com.example.androidmapsv2.MainActivity.onResume(MainActivity.java:88) 
```

您可以看到`IllegalArgumentException`在第 88 行抛出了。原因`criteria`是`null`当`requestLocationUpdates`被调用时。

`criteria`你的in的初始化`OnCreate`是不够的。当您`OnResume`被调用时，您需要进行空检查以确认`criteria`已实例化。

# javascript - 如何编辑主干模型并等待保存

> ID：14825783
> 
> 赞同：0
> 
> 时间：2013-02-12T05:10:08.797
> 
> 标签：javascript, backbone.js

我会尽量简洁地描述这一点。在我正在开发的应用程序中，保存了 Backbone 模型，然后可以稍后对其进行编辑。目前，我将它设置为功能完全动态的地方。

例子：`this.model.set('attribute', value)`

那里有标准的东西。这就是问题所在。客户端希望在用户明确单击保存并完成按钮之前不保存更新的模型。

以前，我使用这种模式进行编辑：

```
this.model = options.previousModel || new NamedBackboneModel({
    id: this.model.get('id'),
    attr: otherModel.get('attr')
}); 
```

我已经将该示例中的属性和模型名称设为通用名称，但效果很好。在整个视图中，我会使用`model.set('attr' value)`它，它是完美的。

我可以对previousModel进行编辑而不立即将它们保存到以前的模型的最佳方式是什么？

我研究过使用普通对象来跟踪更改，但我认为必须有一种更好的方法，它更符合典型的 Backbone 模式。

自然地，我尝试了，`new NamedBackboneModel(options.previousModel.toJSON())`但由于模型上的嵌套集合没有按预期工作，并且需要进行一些架构更改。

我认为previousModel 上的克隆可以工作，但我也没有任何运气使用这种方法。感谢您的帮助，如果我需要提供更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:00:43.727

我认为你应该`{silent: true}`在你打电话时通过`model.set()`。

`model.previousAttributes()`然后，您可以通过调用获取所有先前的属性来检索先前值的列表。或`model.previous("name")`获取特定属性。

当你想丢弃之前的属性时，你可以调用`model.change()`来调用'change'事件。

当您要保存时，您可以`model.save({silent:false})`将其保存并丢弃以前的属性，或者传递`{silent:true}`将保留以前的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:18:20.377

我最终使用了多种方法来完成这项工作。我向模型添加了存储和恢复功能，如下所示：

```
store: function() {
    this._storedAttributes = _.clone(this.attributes);
    this._storedCollection = _.clone(this.collection().toJSON());
},

revert: function() {
    if (this._storedAttributes) {
        this.set(this._storedAttributes, {
            silent: true
        });
        this.collection.remove(this.collection.models, { silent: true });
        this.collection.reset(this._storedCollection, { silent: true });

        // For syncing local storage up the chain
        if(!this.isNew()) { this.trigger('change'); }
    }
}, 
```

# python - Flask：如何在应用程序根目录中读取文件？

> ID：14825787
> 
> 赞同：24
> 
> 时间：2013-02-12T05:10:29.757
> 
> 标签：python, flask

我的 Flask 应用程序结构看起来像

```
application_top/
         application/
                    static/
                          english_words.txt
                    templates/
                             main.html
                     urls.py
                     views.py
         runserver.py 
```

当我运行 时`runserver.py`，它会在`localhost:5000`. 在我的`views.py`中，我尝试将文件打开`english.txt`为

```
f = open('/static/english.txt') 
```

它给出了错误`IOError: No such file or directory`

我怎样才能访问这个文件？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-12T05:45:12.140

我认为问题是你把`/`路径。删除`/`因为`static`与 处于同一级别`views.py`。

我建议制作与或许多 Flask 用户喜欢使用`settings.py`的级别相同的级别，但我不这样做。`views.py``__init__.py`

```
application_top/
    application/
          static/
              english_words.txt
          templates/
              main.html
          urls.py
          views.py
          settings.py
    runserver.py 
```

如果这是您的设置方式，请尝试以下操作：

```
#settings.py
import os
# __file__ refers to the file settings.py 
APP_ROOT = os.path.dirname(os.path.abspath(__file__))   # refers to application_top
APP_STATIC = os.path.join(APP_ROOT, 'static') 
```

现在在您看来，您可以简单地执行以下操作：

```
import os
from settings import APP_STATIC
with open(os.path.join(APP_STATIC, 'english_words.txt')) as f:
    f.read() 
```

根据您的要求调整路径和级别。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-01-31T09:03:36.323

这是 CppLearners 答案的简单替代方案：

```
from flask import current_app

with current_app.open_resource('static/english_words.txt') as f:
    f.read() 
```

请参阅此处的文档：[Flask.open_resource](http://flask.pocoo.org/docs/1.0/api/#flask.Flask.open_resource)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-20T15:17:18.123

烧瓶`app`还有一个名为`root_path`解析根目录的属性以及一个不需要模块`instance_path`的特定目录的属性，尽管我喜欢@jpihl 的回答。`app``os`

```
with open(f'{app.root_path}/static/english_words.txt', 'r') as f:
    f.read() 
```

# sql - 在带有 Group By 的子查询中使用 IN 运算符

> ID：14825791
> 
> 赞同：1
> 
> 时间：2013-02-12T05:10:54.183
> 
> 标签：sql, oracle, aggregate-functions, ora-00913

我在查询时遇到了一些问题。我应该调出客户只参加了 1 次测试并通过的所有客户信息。我被告知使用`IN`操作员。这就是我所拥有的：

```
SELECT *
  FROM Client
 WHERE ClientName IN (SELECT ClientName, COUNT(TestNbr)
                        FROM Test
                    GROUP BY ClientName, TestResult
                      HAVING COUNT(TestNbr)=1
                         AND TestResult='Pass'); 
```

我收到此错误：

```
(SELECT ClientName, COUNT(TestNbr)
 *
ERROR at line 4: 
ORA-00913: too many values 
```

我知道这是因为我不应该在该行中除了 ClientName 之外的任何其他条目。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:14:14.937

删除`COUNT(*)`子查询上的列，因为结果不需要它，

```
SELECT  *
FROM    Client
WHERE   ClientName IN
        (
            SELECT  ClientName
            FROM    Test
            GROUP   BY ClientName, TestResult
            HAVING  COUNT(TestNbr) = 1 AND TestResult='Pass'
        ); 
```

但我宁愿使用`JOIN`而不是使用`IN`

```
SELECT  DISTINCT a.*
FROM    Client a
        INNER JOIN
        (
            SELECT  ClientName
            FROM    Test
            GROUP   BY ClientName, TestResult
            HAVING  COUNT(TestNbr) = 1 AND TestResult='Pass'
        ) b ON a.ClientName = b.ClientName 
```

`ClientName`为了获得更快的性能，请在两个表的列上添加索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:12:57.780

如果`IN`使用子查询，则子句只能包含一列。如果有问题，您应该`COUNT`从选定的列中删除 。

您可能想要做的是制作一个`VIEW`代表子查询的 a，然后`JOIN`反对它。

# java - 实现一个算法来打乱一个数字数组

> ID：14825799
> 
> 赞同：-2
> 
> 时间：2013-02-12T05:11:25.490
> 
> 标签：java

我为以下问题编写了代码，但它们不起作用。我得到随机数，但随机播放方法不会随机播放它们。你能帮帮我吗？

```
for( each index i)

   choose a random index j where j>=i.
   swap the elements at index i and j. 
```

我的代码是：

```
public static void shuffle(int[] a){
   for( int i = 0; i < a.length-1; i++){
       int range = a.length; 
       int j = (int) (Math.random() * range);
       swap(a, i, j);      
  }
}

public static void swap(int[] array, int i, int j){

        if (i != j) {
            int temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:24:02.103

有与 List 一起使用的 java.util.Collections.shuffle。我建议从 src 复制粘贴算法并将其更改为使用 int[]：

```
public static void shuffle(int[] a) {
    Random rnd = new Random();
    for (int i = a.length; i > 1; i--) {
        swap(a, i - 1, rnd.nextInt(i));
    }
}

private static void swap(int[] a, int i, int j) {
    int tmp = a[i];
    a[i] = a[j];
    a[j] = tmp;
}

public static void main(String[] args) {
    int[] a = {1, 2, 3, 4, 5, 6, 7, 8, 9};
    shuffle(a);
    System.out.println(Arrays.toString(a));
} 
```

印刷

```
[8, 7, 3, 4, 6, 1, 2, 5, 9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:40:33.153

将您的数组转换为 Integer Wrapper 类，并通过将 Integer 数组转换为 List 来调用 Collections.shuffle。片段如下

您应该可以访问 Apache 语言库，然后您可以使用 ArrayUtils.toObject(int[]) 方法，如下所示：

```
int [] array = {1,2,3,4,5,6};
Integer[] newArray = ArrayUtils.toObject(array);
Collections.shuffle(Arrays.asList(newArray));
for (int i = 0; i < newArray.length; i++) {
    System.out.println(newArray[i]);
} 
```

如果你没有 Apcahe Lang 图书馆，那么你可以这样做

```
Integer[] newArray = new Integer[array.length];
int i = 0;
for (int value : array) {
    newArray[i++] = Integer.valueOf(value);
} 
```

# javascript - 使用辅助帐户在 gmail 中合并邮件

> ID：14825801
> 
> 赞同：0
> 
> 时间：2013-02-12T05:11:39.700
> 
> 标签：javascript, google-apps-script

我对 Google Apps 脚本完全陌生，正在尝试完成应该是来自 gmail 的相当基本的邮件合并。我已经下载了一个 99% 正确工作的脚本和模板，但是，它不允许用户调整电子邮件来自的电子邮件地址或帐户。我有几个链接到我的 gmail 帐户的电子邮件帐户，这个脚本只允许我使用我的 gmail 域帐户 (myname@gmail.com) 发送。有谁知道我如何编辑以下代码以允许使用我的替代链接帐户（myname@domain.com）？编码：

```
function onOpen() {
  var mySheet = SpreadsheetApp.getActiveSpreadsheet();  
  mySheet.addMenu('Mail Merge', [{name:'Send Emails', functionName:'sendEmail'}]);
}

function sendEmail() {

  //Get Sheet
  var mySheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var rowCount = mySheet.getLastRow();

  //Get Basic Email Data
  var emSubject = mySheet.getRange('K2').getValue();
  var emFromName = mySheet.getRange('K3').getValue();
  var emFrom = mySheet.getRange('K4').getValue();

  //Build Email Body
  var emBody = '';
  var textFound = false;
  for (var i=rowCount; i>=6; i--) {
    var line = mySheet.getRange('J' + i).getValue();
    if (line != '' || textFound) {
      emBody = line + '<br/>' + emBody;
      textFound = true;
    }
  }

  //Process Emails
  var remainingQuota = MailApp.getRemainingDailyQuota();
  remainingQuota = remainingQuota;

  var emailsSent = 0;

  for (var i=3; i<=rowCount; i++) {
    var emTo = mySheet.getRange('B' + i).getValue();
    if (emTo != '' && mySheet.getRange('A' + i).getValue() == '') {

      if (remainingQuota > 0) {

        //Add Merge Fields To Body
        var thisEmBody = emBody;
        thisEmBody = thisEmBody.replace(/\[GreetingName\]/g, mySheet.getRange('C' + i).getValue());
        thisEmBody = thisEmBody.replace(/\[DATA2\]/g, mySheet.getRange('D' + i).getValue());
        thisEmBody = thisEmBody.replace(/\[DATA3\]/g, mySheet.getRange('E' + i).getValue());
        thisEmBody = thisEmBody.replace(/\[DATA4\]/g, mySheet.getRange('F' + i).getValue());
        thisEmBody = thisEmBody.replace(/\[DATA5\]/g, mySheet.getRange('G' + i).getValue());
        thisEmBody = thisEmBody.replace(/\[DATA6\]/g, mySheet.getRange('H' + i).getValue());

        //Send Emails
        MailApp.sendEmail(emTo, emSubject, thisEmBody, { htmlBody:thisEmBody, name:emFromName, replyTo:emFrom })
        mySheet.getRange('A' + i).setValue('Sent');
        remainingQuota--;
        emailsSent++;

      } else {

        mySheet.getRange('A' + i).setValue('QUOTA EXCEEDED');

      }

      SpreadsheetApp.flush();
    }
  }

  Browser.msgBox(emailsSent + ' email' + ((emailsSent!=1)?'s':'') + ' sent.' + ((emailsSent==0) ? ' - Please make sure the status column (A) is empty and there are email addresses in column B' : ''))

} 
```

我环顾四周，但无法确定解决方案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:31:49.110

如果您改为使用`GmailApp.sendEmail()`，则可以获得该功能。[请参阅文档](https://developers.google.com/apps-script/class_gmailapp#sendEmail)。

您只需将 a 添加`from:"yourOtherEmail@domain.com"`到 advancedArgs。

您可以使用 查询可以使用的别名[`GmailApp.getAliases()`](https://developers.google.com/apps-script/class_gmailapp#getAliases)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:06:04.977

通过阅读您的问题，不清楚您是否`@domain`是您帐户的别名`@gmail`...如果不是，则规则很简单：邮件是使用脚本所有者的帐户发送的，因此您唯一要做的就是创建脚本在您的`@domain`帐户中，邮件将自动从该帐户发送。

# javascript - 使用条件语句进行类型检查？JS

> ID：14825802
> 
> 赞同：0
> 
> 时间：2013-02-12T05:11:43.223
> 
> 标签：javascript

JavaScript 问题。如果数字是数字、字符串或布尔值，我需要应用条件。我可以检查它的类型但不能应用条件。为什么？

```
var g = 5e-2;
alert(typeof g);
if(g === number) //not working
if(g == number) //also not working
alert("yeah it worked"); 
```

两个 if 都供参考 不嵌套

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:13:00.713

`number`没有定义。你是这个意思吗？

```
if( typeof g === "number") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:16:10.723

**typeof** return`string` [在这里阅读](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)

所以写

```
 if( typeof g === "number")

 if( typeof g === "string" ) 
```

# angularjs - 使用 Angular JS 的移动应用程序

> ID：14825804
> 
> 赞同：50
> 
> 时间：2013-02-12T05:11:53.210
> 
> 标签：angularjs, mobile

我想开发一个小型 4 屏幕移动应用程序。

我想使用的技术堆栈是 AngularJS，我很擅长 C#，我搜索了几次，但找不到任何使用 AngularJS 的示例。

移动应用程序应兼容 iPhone、Android、Windows 8。

我需要使用哪些技术。

任何参考都会有所帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-13T22:52:52.973

你应该看看 github 上的 Angular-mobile-nav 插件：

[https://github.com/ajoslin/angular-mobile-nav](https://github.com/ajoslin/angular-mobile-nav)。

这是一个非常简单的插件，可以包含在 angular.js 中。重要的是，包含的演示文件提供了一个很好的入门方法，尽管您仍然需要知道 Angular 如何与其模块、控制器和路由交互。

您可以在此处查看演示应用程序：

[http://ajoslin.github.com/angular-mobile-nav/](http://ajoslin.github.com/angular-mobile-nav/)

我刚刚从 jQuery-mobile 迁移到 angular.js 和 angular-mobile-nav，因为它为我提供了一种更好的方式来构建应用程序并在视图中绑定数据，而不会劫持 DOM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-24T05:17:37.870

我对此有积极的体验：

[https://github.com/opitzconsulting/jquery-mobile-angular-adapter](https://github.com/opitzconsulting/jquery-mobile-angular-adapter)

它让我在尊重 AngularJS 语义和使用其构造的同时使用 jQuery Mobile。

# cookies - Safari 6 中未设置 Cookie

> ID：14825805
> 
> 赞同：8
> 
> 时间：2013-02-12T05:11:56.847
> 
> 标签：cookies, safari, facebook-php-sdk, session-cookies

晚上好，

这个问题我问了好几次都没有反应，希望这次一切顺利。几年来，我一直在使用 php 和 Facebook PHP SDK 开发 Facebook 应用程序。最近我一直在努力使用 Safari 和 Facebook 登录。

问题是Safari 6默认检查了“阻止第3方cookies”选项，所以我的应用程序无法自动设置cookies。我只在 Safari 中看到这一点，cookie 是空的，与 Chrome 或 Firefox 不同，它们都很好地保存了 cookie。

我正在使用[Facebook PHP SDK 示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)登录用户，所以我不知道问题出在哪里。我已经阅读了很多“解决方案”，但都不是最新的，并且不适用于 Safari 6。

**有没有办法手动设置 cookie 或告诉浏览器这是一个安全站点？**

我真的不知道我是否问对了问题。我对这个问题感到绝望，真的，我已经尝试了一切，我可以使用一些帮助，任何事情都会有帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:54:43.847

您可以使用 php 手动设置 cookie：

```
setcookie(name, value, expire, path, domain); 
```

[http://php.net/manual/en/features.cookies.php](http://php.net/manual/en/features.cookies.php)

或者这是你已经在使用的？

另外，尝试使用 p3p 标头。

```
<?
  header('P3P: CP=HONK');
  setcookie('test_cookie', '1', 0, '/');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:52:14.297

您是否尝试过[在 Safari 中设置跨域 cookie](https://stackoverflow.com/questions/408582/setting-cross-domain-cookies-in-safari?rq=1)

Safari6 开箱即用，不允许跨域 cookie，这是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:54:29.967

您是否尝试过此博客中指定的带有标题更新 2 的解决方案。

[http://www.reizbombardement.de/archives/safari-5-1-4-enforces-cookie-policy](http://www.reizbombardement.de/archives/safari-5-1-4-enforces-cookie-policy)

我希望它在这里工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T21:36:27.170

您是否尝试过 PHP 会话？如果我没记错`session.use_only_cookies`的话，您可以设置为 0 以便使用`SID`.

# javascript - 如何每30秒向php脚本发出jquery post请求？

> ID：14825807
> 
> 赞同：-1
> 
> 时间：2013-02-12T05:12:04.487
> 
> 标签：javascript, jquery

你们能告诉我如何每 30 秒向 php 脚本发出 jquery post 请求吗？Php 脚本正在向 mysql 写入一些数据。

```
$.ajax(
{

    type: 'POST',
    url: './postIt.php',

     data: {
     title: 'test',

     },
     success: function (good)
     {
     //handle success

     //alert(good)
     },
     failure: function (bad)
     {
     //handle any errors

     //alert(bad)

     }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:19:20.873

您可以使用 set interval 像这样不断地轮询。

```
 $(function() {
    setInterval(function() {
        $.ajax({
            type: 'POST',
            url: './postIt.php',

            data: {
                title: 'test',
            },
            success: function(good) {
                //handle success

                //alert(good)
            },
            failure: function(bad) {
                //handle any errors

                //alert(bad)

            }
        });
    }, 30000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:14:12.477

您可以为此使用[setTimeout](http://www.w3schools.com/js/js_timing.asp)或[setInterval](http://www.w3schools.com/js/js_timing.asp)

# android - 编辑文本请求焦点（）？

> ID：14825817
> 
> 赞同：6
> 
> 时间：2013-02-12T05:12:53.317
> 
> 标签：android

我遇到了 requestFocus 的问题。

首先，这是我的源代码：

```
<EditText
    android:id="@+id/etGLNum2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/btGLCalculate"
    android:ems="10"
    android:hint="@string/gl_num2_hint"
    android:inputType="number" />

<EditText
    android:id="@+id/etGLNum1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/etGLNum2"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/btGLCalculate"
    android:ems="10"
    android:hint="@string/gl_num1_hint"
    android:inputType="number">

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/tvGLResult"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/etGLNum2"
    android:gravity="center"
    android:text="@string/result"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/btGLCalculate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/tvGLResult"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/etGLNum1"
    android:text="@string/calculate" /> 
```

如您所见，焦点必须转到 etGLNum1，但始终转到 etGLNum2。

我已经尝试`etGLNum1.requestFocus();`从我的 java 文件中添加，但没有奏效。

我应该怎么办？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:19:17.070

添加 `requestFocus`您的`Edittext`.

```
<EditText
    android:id="@+id/etGLNum2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/btGLCalculate"
    android:ems="10"
    android:hint="@string/gl_num2_hint"
    android:inputType="number">
    <requestFocus />
</EditText> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T11:00:21.863

```
 try this :-
 etGLNum2.setOnFocusChangeListener(new OnFocusChangeListener() {      
        @Override
        public void onFocusChange(View rv, boolean hasFocus) {

                       etGLNum2.clearFocus();
                   etGLNum1.requestFocus();

         }
      }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:17:42.483

只需添加 xml 所有编辑文本：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10"
    android:hint="@string/gl_num2_hint"
    android:inputType="number" >
    <requestFocus />
</EditText> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T11:00:05.623

在你`onCreate()`写的：

```
EditText etGLNum1 = (EditText)findViewById(R.id.etGLNum1);
etGLNum1.requestFocus();
etGLNum1.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) 
    {
        //enter code here
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-26T13:38:05.277

根据我的经验，Android 有一个默认行为，即把焦点放在当前表面中找到的第一个可聚焦元素上（如果我们没有将任何默认元素设置为可聚焦）。
您可以在 onCreate()中使用`etGLNum1.setFocusable(true)`（在 setContentView() 调用之前）然后（在 setContentView() 调用之后）.. 它应该可以工作..`etGLNum1.requestFocus()`

# php - 从 android 中的服务器检索 UNICODE TO UTF-8 问题

> ID：14825818
> 
> 赞同：1
> 
> 时间：2013-02-12T05:12:56.717
> 
> 标签：php, android

我将 unicode 存储在 mysql 数据库中，并尝试在我的 android 应用程序中使用 php 检索它。每当我尝试仅检索 unicode 而不是 utf-8 字符时。我在 http 中将编码指定为 utf-8 并且我在网上搜索了很多解决方案，但仍然没有找到答案。我也用过这个，但还是没有运气。

```
new String(json_data.getString("message").getBytes(""),"UTF-8") 
```

下面我发布我的代码。欢迎提出任何建议。我的要求是从服务器获取印地语、乌尔都语或任何语言，我需要显示。所以我做错了什么。从数据库我得到这个 \u0cb9\u0ccc \u0c85\u0cb0\u0cc6 \u0caf\u0cc1

```
private class BackgroundTask extends AsyncTask <String, Void, String> {
      @Override
protected String doInBackground(String... url) {
String result = "";
ArrayList<NameValuePair>   nameValuePairs = new ArrayList<NameValuePair>(5);
String prefName = "MyPref";
SharedPreferences prefs=getSharedPreferences(prefName,MODE_PRIVATE);
 nameValuePairs.add(new BasicNameValuePair("username", mname.getText().toString()));
 nameValuePairs.add(new BasicNameValuePair("password", mpassword.getText().toString()));
 nameValuePairs.add(new BasicNameValuePair("regid", regid));
 nameValuePairs.add(new BasicNameValuePair("status_id", "1"));
 nameValuePairs.add(new BasicNameValuePair("clienttype_id", "clienttype_id"));
        try {
      HttpClient httpclient = new DefaultHttpClient();
            Resources resources=getResources(); 
 String urlstr=String.format(resources.getString(R.string.androidexternal));

 HttpPost httppost = new HttpPost(urlstr);// for test db                  
 // Add your data
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"UTF-8"));

              // Execute HTTP Post Request
              HttpResponse  response = httpclient.execute(httppost);

              inputStream = response.getEntity().getContent();

         }catch(Exception e){
             Log.e("log_tag", "Error in http connection "+e.toString());
     }
     //convert response to string
     try{//iso-8859-1,UTF-8
 BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream,"UTF-8"),8000);
             StringBuilder sb = new StringBuilder();
             String line = null;

             while ((line = reader.readLine()) != null) 
                  {
                sb.append(line + "\n");
             }
             inputStream.close();

             result=sb.toString();
     }catch(Exception e){
             Log.e("log_tag", "Error converting result "+e.toString());
     }
      if(result.contains("null")){

      } 
      else
      {
         try{
                    JSONArray jArray = new JSONArray(result);

                    for(int i=0;i<jArray.length();i++)
                    {
                            JSONObject json_data = jArray.getJSONObject(i);

                   if(i>=3){

System.out.println( new String(json_data.getString("message").getBytes(),"UTF-8"));

                         }

                    }
                   startActivity(intent); 

            }
             catch(JSONException e){
                    Log.e("log_tag", "Error parsing data "+e.toString());

            }  catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }  catch (IOException e) {

                e.printStackTrace();
            }

      }
   return result.toString();
  } 
```

和服务器端代码是

```
// select query for login layout if(isset($_REQUEST['username']))
{

    $get_message_sql = mysql_query("SELECT `message`,`language` FROM doctor_custom_message WHERE  `client_id`='".$result['id']."' AND status='1' ");

 $number=mysql_num_rows( $get_message_sql);
   while($e=mysql_fetch_assoc($get_message_sql))
    if($number==0)
    {
        $output[]="null";

    }else{
          $output[]=$e;
          }

//header('content-type: text/plain; charset=utf-8');
    print(json_encode($output));

}// main brace closed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:21:03.120

尝试删除`"UTF-8"`表格

```
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"UTF-8")); 
```

所以它应该像`httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));`

因为你已经在使用`UrlEncodedFormEntity`所以不需要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T05:16:14.753

如果您正确设置了 json_encode 的参数，例如

```
 $output=json_encode($output,JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE); 
```

编码值和传输数据没有问题，但如果不能再次工作.set

```
 header('Content-Type: application/json; charset=utf8'); 
```

您可以使用**urlencode**对 UTF-8 值进行编码并在 android 上对其进行解码

像这样

```
urlencode('aیgfسبd'); 
```

输出

```
a%DB%8Cgf%D8%B3%D8%A8d 
```

有了这个输出，你的 json 值没有问题。

# jquery - jQuery.support 将通过 IE10+ 但不通过 IE9-？

> ID：14825821
> 
> 赞同：2
> 
> 时间：2013-02-12T05:12:57.300
> 
> 标签：jquery, browser-detection, jquery-1.10

是否有任何`jQuery.support`选项可以在 IE10 以及 Firefox 和 Webkit 浏览器上返回 true，但在 IE9 及更低版本上返回 false？

这个选项的 jquery 页面似乎已经过时了。 [http://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)

如果有人有其他建议，我会接受。（使用 jQuery 1.10）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:14:01.050

如果您只想检测浏览器版本：

```
$.browser.msie
$.browser.version 
```

请注意，通常这是一个坏主意，您应该对您使用的任何浏览器中可用的功能进行编码。但是，如果您有某些特定原因，请使用这些。

# jquery - 在 FancyBox2 中发布表单（ajax）

> ID：14825828
> 
> 赞同：0
> 
> 时间：2013-02-12T05:13:37.557
> 
> 标签：jquery, fancybox, fancybox-2

我正在尝试从 FoncyBox2 发布表格，但到目前为止还没有运气。以下代码的结果是一个封闭的覆盖。没有其他事情发生。没有错误。没什么。我想要的只是结果（在这种情况下是字段的内容）出现在同一个叠加层中的表单位置。

HTML：

```
<a class="fancybox fancybox.ajax" href="formPage.php">Open Overlay</a> 
```

JavaScript：

```
$(document).ready(function(){
            $(".fancybox").fancybox();

            $("#question-form").bind("submit", function() {
                $.fancybox.showActivity();

                $.ajax({
                    type : "POST",
                    cache : false,
                    url: "formProcessing.php",
                    data: $(this).serializeArray(),
                    success:function(data){
                        $.fancybox(data);
                    }
                });
                return false;
            });
        }); 
```

表单（formPage.php）：

```
<form id="question-form" action="" method="POST">
Name <input type="text" name="name">
<input type="submit" value="Send">
</form> 
```

表单处理（formProcessing.php）：

```
print_r($_POST); 
```

哦，我不担心验证。我打算以另一种方式做到这一点。

谢谢，@rrfive

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:50:25.740

是的，我设法解决了这个问题。事实证明我是个笨蛋，这是将代码 $.ajax 代码移动到表单页面的简单案例。这是我的最终代码。

HTML (index.html) - 不变：

```
<a class="fancybox fancybox.ajax" href="formPage.php">Open Overlay</a> 
```

JavaScript (index.html):

```
$(".fancybox").fancybox(); 
```

表单 (formPage.php) - 未更改：

```
<form id="question-form" action="" method="POST">
Name <input type="text" name="name">
<input type="submit" value="Send">
</form> 
```

JavaScript (formPage.php):

```
 $(document).ready(function(){
            $("#question-form").bind("submit", function() {
                $.ajax({
                    type : "POST",
                    cache : false,
                    url: "formProcessing.php",
                    data: $(this).serializeArray(),
                    success:function(data){
                        $.fancybox(data);
                    }
                });
                return false;
});
}); 
```

表单处理（formProcessing.php）：

```
print_r($_POST); 
```

感谢@JFK 和@Daniel 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T14:08:25.007

我是这个社区的新用户。首先对不起我的英语不好:)

我也使用上面的代码，它工作得很好，但我希望在fancybox 关闭后重新加载文档。

我试过这段代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        // cart iframe
        $("#stocart").bind("submit", function() {
            $.ajax({
                type        : "POST",
                cache       : false,
                url         : "reloadpage.php",
                data        : $(this).serializeArray(),
                success: function(data) {$.fancybox(data);},
                afterClose: location.reload()   
            });
            return false;   
        });
    });
</script> 
```

但这会重新加载页面而不显示fancybox...当我单击fancybox 关闭按钮时如何重新加载页面？非常感谢

# android - 避免列表中的重复项

> ID：14825836
> 
> 赞同：1
> 
> 时间：2013-02-12T05:14:12.320
> 
> 标签：android, arraylist, duplicates

我试图避免列表中出现重复值，但它不起作用。你能帮我解决这个问题吗？我做了很多工作，但我是 android 新手，也是编码新手。你能帮我在哪里犯错吗？

```
import java.util.ArrayList;

public class Dynamic extends Activity {

    Button bt, bt2, ent, clr;
    EditText et, et2;
    String input, input1;
    public static ArrayList<String> k_listItems = new ArrayList<String>();
    public static ArrayList<String> p_listItems = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        bt = (Button) findViewById(R.id.nameok);
        et = (EditText) findViewById(R.id.name);

        input = et.getText().toString();

        bt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                if (et.getText().length() == 0) {
                    Context context = getApplicationContext();
                    CharSequence text = "Enter Your Name";
                    int duration = Toast.LENGTH_SHORT;

                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                } else {

                    {
                        for (int i = 0; i < k_listItems.size(); i++) {
                            if (k_listItems.get(i).equals("input")) {
                                Intent in = new Intent(Dynamic.this, Dynamic.class);
                                startActivity(in);
                                Toast.makeText(getApplicationContext(), "Name Already Exists", Toast.LENGTH_SHORT).show();
                                break;
                            }
                        }
                    }

                    if (et.getText().length() == 0) {
                        Context context = getApplicationContext();
                        CharSequence text = "Enter Your Number";
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    } else {

                        et2.setVisibility(View.VISIBLE);
                        bt2.setVisibility(View.VISIBLE);
                        bt2.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                if (et2.getText().length() == 0) {
                                    Context context = getApplicationContext();
                                    CharSequence text = "Enter Your Number";
                                    int duration = Toast.LENGTH_SHORT;
                                    Toast toast = Toast.makeText(context, text, duration);
                                    toast.show();
                                } else {
                                    ent.setVisibility(View.VISIBLE);
                                    clr.setVisibility(View.VISIBLE);
                                    ent.setOnClickListener(new View.OnClickListener() {

                                        @Override
                                        public void onClick(View v) {
                                            if (null != input && input.length() > 0) {
                                                k_listItems.add(input);
                                            }
                                            if (null != input1 && input1.length() > 0) {
                                                p_listItems.add(input1);
                                            }
                                            input = et.getText().toString();
                                            input1 = et2.getText().toString();

                                            Intent in = new Intent(Dynamic.this, GetList.class);
                                            in.putExtra("input", input);
                                            in.putExtra("input1", input1);
                                            startActivity(in);
                                        }
                                    });
                                    clr.setOnClickListener(new View.OnClickListener() {

                                        @Override
                                        public void onClick(View v) {
                                            Intent in4 = new Intent(Dynamic.this, Dynamic.class);
                                            startActivity(in4);
                                        }
                                    });
                                }
                            }
                        });

                    }
                }
            }
        });
    }

    protected void onStart() {
        super.onStart();

        et2 = (EditText) findViewById(R.id.number);
        bt2 = (Button) findViewById(R.id.numberok);
        ent = (Button) findViewById(R.id.enter);
        clr = (Button) findViewById(R.id.clear);
    }

    public void onBackPressed() {
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain);
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

Mylist 以获取该列表...

```
import java.util.ArrayList;

public class GetList extends Activity {

    ListView lv;
    Button bt3;
    Dialog d;
    EditText edt;
    String x;
    public static ArrayList<String> x_listItems = new ArrayList<String>();
    public static ArrayList<String> y_listItems = new ArrayList<String>();
    String inp, inp1;

    public static ArrayAdapter<String> a_adapter;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);

        lv = (ListView) findViewById(R.id.listView1);

        Intent in = getIntent();

        inp = in.getStringExtra("input");
        inp1 = in.getStringExtra("input1");

        a_adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, x_listItems);

        lv.setAdapter(a_adapter);

        if (null != inp && inp.length() > 0) {
            x_listItems.add(inp);
            a_adapter.notifyDataSetChanged();
        }
        if (null != inp1 && inp1.length() > 0) {
            y_listItems.add(inp1);
            Log.v("num", "" + y_listItems);
        }
        lv.setOnItemClickListener(new OnItemClickListener() {
            @SuppressWarnings("deprecation")
            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                                    long arg3) {
                if (x_listItems.get(position) != null) {
                    AlertDialog ab = new AlertDialog.Builder(
                            GetList.this).create();
                    ab.setTitle("Details");
                    ab.setMessage("NAME:" + x_listItems.get(position) + "\n" + "Number" + y_listItems.get(position));
                    ab.setButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Toast.makeText(getApplicationContext(), "Thanx for visiting", Toast.LENGTH_SHORT).show();
                        }
                    });
                    ab.show();
                }
            }
        });
        lv.setOnItemLongClickListener(new OnItemLongClickListener() {
            @SuppressWarnings("deprecation")
            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View v,
                                           final int position, long arg3) {
                if (x_listItems.get(position) != null) {
                    AlertDialog ab = new AlertDialog.Builder(
                            GetList.this).create();
                    ab.setTitle("Slect Your Option");
                    ab.setButton("Edit", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            final String z = x_listItems.get(position);
                            Log.v("position", "" + z);
                            d = new Dialog(GetList.this);
                            d.setContentView(R.layout.abc);
                            d.setTitle("Enter new name");
                            Button sub = (Button) d.findViewById(R.id.submit);
                            edt = (EditText) d.findViewById(R.id.edt);
                            edt.setText(x_listItems.get(position));

                            sub.setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                    x_listItems.remove(position);
                                    x = edt.getText().toString();
                                    x_listItems.add(position, x);
                                    String p = x_listItems.get(position);
                                    String f = y_listItems.get(position);
                                    y_listItems.set(position, f);
                                    Log.v("changednum", "" + inp1);
                                    a_adapter.notifyDataSetChanged();
                                    lv.setAdapter(a_adapter);
                                    Toast.makeText(getApplicationContext(), "" + edt.getText().toString().trim(), 4000).show();
                                    d.dismiss();
                                }
                            });
                            d.show();
                        }
                    });

                    ab.setButton2("Delete", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            x_listItems.remove(position);
                            y_listItems.remove(position);
                            a_adapter.notifyDataSetChanged();
                            lv.setAdapter(a_adapter);
                        }
                    });
                    ab.show();
                }
                return true;
            }

            private int get(int position) {
                return 0;
            }
        });
    }

    public void onBackPressed() {
        super.onBackPressed();
        Intent in4 = new Intent(GetList.this, Dynamic.class);
        startActivity(in4);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:00:58.207

设置不允许重复...请参见下面的示例

```
 HashSet<String> x_hashSet = new HashSet<String>();
 HashSet<String> y_hashSet = new HashSet<String>();

 x_hashSet.addAll(x_listItems);
 y_hashSet.addAll(y_listItems);

 x_listItems.clear();
 y_listItems.clear();

 x_listItems.addAll(x_hashSet);
 y_listItems.addAll(y_hashSet); 
```

然后将列表添加到适配器。而已。

希望对你有帮助 ;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:17:35.153

你为什么不使用 a`Set`而不是 a `List`？他们不允许重复。如果您将自己的对象放在那里，您将需要一个 hashCode 和 equals 方法，但它应该只适用于字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:35:57.950

HashSet 不允许重复值。它提供了 add 方法而不是 put 方法。您还可以使用其包含方法来检查对象是否已在 HashSet 中可用。HashSet 可用于您想要维护唯一列表的地方。

```
HashSet<String> stateSet = new HashSet<String>();
stateSet.add ("CA");
stateSet.add ("WI");
stateSet.add ("NY");

if (stateSet.contains("PB")) /* if CA, it will not add but shows following message*/
     System.out.println("Already found");
else
    stateSet.add("PB"); 
```

# c# - 无法在漫游/本地设置中保存设置

> ID：14825838
> 
> 赞同：0
> 
> 时间：2013-02-12T05:14:14.003
> 
> 标签：c#, .net, windows-8, windows-store-apps

我需要将设置保存在漫游或本地设置中。问题是当我执行程序时，它显示设置是用给定的键存储的，并且这些设置也可以被检索回来。但是当我稍后重新执行或执行相同的程序时，那些保存的设置会丢失。它再次创造了他们！

为什么设置没有被保存？

要设置设置，我使用以下代码（设置是字符串，值是对象）

```
ApplicationData.Current.LocalSettings.Values.Add(setting, value);

ApplicationData.Current.RoamingSettings.Values.Add(setting, value); 
```

要检索设置，我使用以下代码

```
ApplicationData.Current.RoamingSettings.Values[setting]; 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:45:46.537

您的代码应该可以正常工作。您用来决定读取值和写回值的逻辑可能存在问题。

尝试在您的应用程序启动时添加这样的内容：

```
object settingValue = "InitValue";

if (ApplicationData.Current.LocalSettings.Values.ContainsKey(settingKey))
{
    settingValue = ApplicationData.Current.LocalSettings.Values[settingKey];
}
else
{
    ApplicationData.Current.LocalSettings.Values[settingKey] = settingValue;
} 
```

您基本上需要读取设置（如果存在）或在不存在时对其进行初始化。

此外，请记住，当应用程序被卸载并重新安装时，本地设置会被删除。当您更改应用程序清单时，Visual Studio 有时会执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:30:17.927

我通过调试测试方法犯了一个错误，因此设置不会被永久保存。如果您执行您的应用程序，您的所有设置都将使用上述简单编码保存。

# php - 如何在 cakephp 登录操作中传递参数？

> ID：14825842
> 
> 赞同：0
> 
> 时间：2013-02-12T05:14:23.630
> 
> 标签：php, cakephp

```
$this->Auth->loginAction = array('controller' => 'users', 'action' => 'blogin'); 
```

这里我需要在博客页面传递一个参数，如何传递呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:52:32.603

这是答案

```
$url = array('controller' => 'users', 'action' => 'blogin'); $this->Auth->loginAction = array_merge($url, $my_params); 
```

`$this->redirect($this->Auth->redirect());`内添加`if ($this->Auth->login()) { block`

# java - 如何限制用户输入除电子邮件格式之外的任何其他内容

> ID：14825849
> 
> 赞同：0
> 
> 时间：2013-02-12T05:15:20.470
> 
> 标签：java, email, methods

我正在尝试编写一个检查电子邮件格式的 Java 方法。用户不应被允许在该字段中输入任何其他内容，如下面的硬编码电子邮件值所述。所以布尔方法应该返回假值。

但不知何故，这似乎对我不起作用。在这种情况下，它总是对我来说是真实的。你能纠正我哪里错了吗？或者你能建议我另一种解决方案吗？

```
public static boolean isValidEmailAddress(String email) {
    boolean result = true;
    email = "testemail@gmail.com" + "\'" + "\"" + "onmouseover=" + "\"" + "alert(20)" + "\"" + "\"";

    try {
        InternetAddress emailAddr = new InternetAddress(email);
        emailAddr.validate();
    } catch (AddressException ex) {
        result = false;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:35:24.207

我相信你可以像这样使用正则表达式：

```
import java.util.regex.Pattern;

public class Email {

    private static final Pattern EMAIL_REGEX = Pattern.compile("^\\w+@\\w+(\\.\\w+){1,2}$");

    public static void main(String[] args) {
        System.out.println(isValidEmailAddress("testemail@gmail.com"));
        System.out.println(isValidEmailAddress("testemail@gmail.co.in"));
        System.out.println(isValidEmailAddress("testemail@gmail.co.in.blah"));
    }

    public static boolean isValidEmailAddress(String email) {
        return EMAIL_REGEX.matcher(email).matches();
    }    
} 
```

输出如下：

```
true
true
false 
```

# android - Why does setOnCheckedChangeListener? cause crash?

> ID：14825850
> 
> 赞同：0
> 
> 时间：2013-02-12T05:15:20.970
> 
> 标签：android, uiswitch

For some reason my app crashes on launch.. heres all the code and debug output. It seems to me it's something with how I am using setOnCheckedChangeListener..

Debug output:

```
02-12 05:12:03.048: E/AndroidRuntime(1464): FATAL EXCEPTION: main
02-12 05:12:03.048: E/AndroidRuntime(1464): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dugley.check.in/com.dugley.check.in.MainActivity}: java.lang.ClassCastException: com.dugley.check.in.MainActivity cannot be cast to android.widget.CompoundButton$OnCheckedChangeListener
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.os.Looper.loop(Looper.java:137)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at java.lang.reflect.Method.invoke(Method.java:511)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at dalvik.system.NativeStart.main(Native Method)
02-12 05:12:03.048: E/AndroidRuntime(1464): Caused by: java.lang.ClassCastException: com.dugley.check.in.MainActivity cannot be cast to android.widget.CompoundButton$OnCheckedChangeListener
02-12 05:12:03.048: E/AndroidRuntime(1464):     at com.dugley.check.in.MainActivity.onCreate(MainActivity.java:21)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.Activity.performCreate(Activity.java:5104)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-12 05:12:03.048: E/AndroidRuntime(1464):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

Main_activity.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Switch
        android:id="@+id/switch1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="30dp"
        android:text="Service"/>

</RelativeLayout> 
```

MainActivity.java:

```
package com.dugley.check.in;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.Switch;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Switch s = (Switch) findViewById(R.id.switch1);

        if (s != null) {
            s.setOnCheckedChangeListener((OnCheckedChangeListener) this);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        Toast.makeText(this, "The Switch is " + (isChecked ? "on" : "off"),
                       Toast.LENGTH_SHORT).show();
        if(isChecked) {
            //do stuff when Switch is ON
        } else {
            //do stuff when Switch if OFF
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:20:17.280

you need to add `implements OnCheckedChangeListener` with your MainActivity

I made your code working, See below....

```
public class MainActivity extends Activity implements OnCheckedChangeListener{//Changed

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Switch s = (Switch) findViewById(R.id.switch1);

    if (s != null) {
        s.setOnCheckedChangeListener(this); // Changed
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:21:20.780

Your app crashes because you are casting your listener callback to your activity. This is not the way to implement callbacks in android.

Try this.

```
public class MainActivity extends Activity implements OnCheckedChangeListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Switch s = (Switch) findViewById(R.id.switch1);

        if (s != null) {
            s.setOnCheckedChangeListener(this);    // note this
        }
    }

    @override                                    // take a note
     public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        Toast.makeText(this, "The Switch is " + (isChecked ? "on" : "off"),
                       Toast.LENGTH_SHORT).show();
        if(isChecked) {
            //do stuff when Switch is ON
        } else {
            //do stuff when Switch if OFF
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:26:34.523

all you want is just

1 implement

```
 implement OnCheckedChangeListener 
```

2 change

```
 s.setOnCheckedChangeListener((OnCheckedChangeListener) this); 
```

to

```
 s.setOnCheckedChangeListener(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:28:00.863

Switch inherits CompoundButton's attributes, so I would recommend the [OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)

```
mySwitch.setOnCheckedChangeListener(new OnCheckedChangedListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // Do Something
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-05T08:23:27.850

```
class MainActivity : AppCompatActivity() {
private var switchCompat: SwitchCompat? = null
override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        setupView()
    }

    private fun setupView(){
        switchCompat = findViewById(R.id.switch_compat)
        switchCompat?.setOnCheckedChangeListener { buttonView, isChecked ->
            Toast.makeText(this, ""+isChecked, Toast.LENGTH_SHORT).show()
        }
    }
} 
```

# ios - 我们如何在 iPad 应用程序中以编程方式编辑外部文档（例如 doc ppt 和 pdf）？

> ID：14825853
> 
> 赞同：0
> 
> 时间：2013-02-12T05:15:45.987
> 
> 标签：ios, objective-c, ipad, document

我正在做一个项目，我需要编辑外部文档，例如 doc、ppt 和 PDF，并以相同的名称和位置重新保存它。我还想在该文档中搜索一些文本并用不同的颜色标记它。

请提供一些解决方案的建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:17:24.210

对于您想要支持的每种类型的文档，您都需要包含某种支持。想要编辑 DOC 文件？然后您需要编写可以打开 DOC 文件的代码，以正确的格式显示它，了解您如何编辑文件，最后但同样重要的是，以正确的格式将其保存回来。

PPT en PDF 文件格式也是如此。

这是一个具有相同问题的主题： [Open Ms Word document inside iPad Application](https://stackoverflow.com/questions/5802231/open-ms-word-document-inside-ipad-application)

他们回答了一个可能能够打开 DOC 文件的库的链接，但正如其他答案所提到的，它仅适用于 ARMv6（现在可能已更新）。

# javascript - () 的 knockout.js 指南

> ID：14825854
> 
> 赞同：2
> 
> 时间：2013-02-12T05:15:56.837
> 
> 标签：javascript, knockout.js

我很难理解何时应该使用 () 在 knockout.js 中调用我的变量。

比如说：

```
function RandomViewModel() {
    var self = this;
    self.randomJ = new randomSquare;
}

var randomSquare = ko.observable({
    innate: ko.observableArray([ { star: "randomStar", type: "starList" } ])
}); 
```

如果我想将 div 的文本设置为 randomJ 中的元素，代码如下：

```
<div data-bind="text: randomJ.innate()[0].star"></div> 
```

但是以下方法不起作用：

```
<div data-bind="text: randomJ().innate()[0].star"></div>
<div data-bind="text: randomJ.innate[0].star"></div> 
```

我只是想知道是否有人知道关于何时以及如何 () 应与 knockout.js 变量处理一起使用的明确指南 - 在 html 和 javascript 中。

我目前正在重构我以前的代码以使用淘汰赛，我想在开始进入嵌套的对象数组等之前牢牢掌握概念。我不想假设事情。

也非常欢迎对上述 javascript 发表任何评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:51:19.463

如果变量`var`是一个可观察的，你得到它的*值*（`var()`因为可观察的实际上是返回当前值的函数）。但是有一个方便的例外：如果您在**data-bind**中引用的表达式解析为可观察对象，*则可以*省略括号，因为 knockout.js 将识别可观察类型。

通常，对于包含具有不可观察值的可观察数组的对象的可观察对象，您*必须*使用以下命令：

```
randomJ().innate()[0].star 
```

但是您的示例有一个缺陷： randomJ 实际上是不可观察的！在这一行

```
self.randomJ = new randomSquare; 
```

你使用 observable 作为构造函数。这不是预期的用法，会导致以下结果：您得到一个新对象（不是函数，特别是不是 observable！），具有与 observable 相同的*属性*。后者是 randomJ.innate 实际上是 randomSquare 的原始可观察数组的原因。

它应该是：

```
self.randomJ = randomSquare; 
```

或直接：

```
self.randomJ = ko.observable({
    innate: ko.observableArray([ { star: "randomStar", type: "starList" } ])
}); 
```

如果您打算使用 randomSquare 作为多个可观察对象的构造函数/工厂，则必须这样做：

```
var randomSquare = function() {
    return ko.observable({
        innate: ko.observableArray([ { star: "randomStar", type: "starList" } ])
    });
}
self.randomJ = randomSquare(); 
```

# java - jstl 显示嵌套对象数据

> ID：14825856
> 
> 赞同：1
> 
> 时间：2013-02-12T05:16:05.313
> 
> 标签：java, spring, hibernate, jsp, jstl

我正在使用 jsp、hibernate 和 spring。

我的问题是我有一个名为“carsearchlist”的对象，而在 carsearchlist 中，我还有另外两个名为 user 和 car 的对象。由于某种原因，这个 foreach 循环将不起作用。

```
 <c:forEach var="csl" items="${carsearchlist}">
     ${csl.id}
         <c:forEach var="name" items="${csl.user}">
               ${name.first} 
         </c:forEach>
    </c:forEach> 
```

我的数据显示 HQL 编辑器，如下面的屏幕截图所示：

[http://i244.photobucket.com/albums/gg5/robasc/ScreenShot2013-02-12at120841AM_zpsdb5449b4.png](http://i244.photobucket.com/albums/gg5/robasc/ScreenShot2013-02-12at120841AM_zpsdb5449b4.png)

这也是我对 CarSearchList 的映射：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Feb 9, 2013 8:14:19 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="com.usedcarsearch.domain.CarSearchList" table="Car_Search_List">
    <id name="id" type="java.lang.Integer">
        <column name="id" />
        <generator class="identity" />
    </id>
    <many-to-one name="car" class="com.usedcarsearch.domain.Car" fetch="select">
        <column name="fkCarId" not-null="true" />
    </many-to-one>
    <many-to-one name="user" class="com.usedcarsearch.domain.User" fetch="select">
        <column name="fkUserId" not-null="true" />
    </many-to-one>
</class>
</hibernate-mapping> 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:10:28.267

该`CarSearchList`实例有一个 type`User`字段和另一个 type 字段`Car`。并且您的代码正在尝试使用`forEach`, on进行迭代`CarSearchList.user`。但`user`不是集合或数组。这是一个简单的对象。没有什么可以迭代的。

此外， User 类似乎没有任何`name`属性。它有一个“第一个”属性和一个最后一个属性，但它们直接在用户中，而不是在`Name`子对象中。

所以你只需要

```
<c:forEach var="csl" items="${carsearchlist}">
     ${csl.id}
     ${csl.user.first} 
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:23:48.770

快速而肮脏的方法是将惰性属性设置为false。请注意，这可能会导致性能问题。解决此问题的常用做法是使用“在视图过滤器中打开会话”。这篇博文可以帮助 [http://sourabhissourabh.blogspot.com/2008/03/what-is-opensessioninviewfilter-and-how.html](http://sourabhissourabh.blogspot.com/2008/03/what-is-opensessioninviewfilter-and-how.html)

这种方法的缺点是汽车搜索列表、用户或汽车的设置值将被持久化到数据库中。所以你必须小心。

# vim - 如何手动输入选项卡（可能是 .vimrc 文件）？

> ID：14825861
> 
> 赞同：1
> 
> 时间：2013-02-12T05:16:21.863
> 
> 标签：vim, tabs

每当我尝试在 vim 中输入制表符时，它只会输入 4 个空格。我目前正在编写一个makefile，所以我需要能够输入文字标签。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:24:07.463

从您的 .vimrc 中删除`set expandtab`（或在其中使用）。`set noexpandtab`

要在展开选项卡打开时插入文字选项卡，您可以使用`Ctrl+v``Tab`（或`Ctrl+q``Tab`在具有默认设置的窗口上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:47:14.710

据我所知，`expandtab`Makefile 会自动重置

```
:verbose set et? 
```

节目

```
noexpandtab
    Last set from C:\Program Files\Vim\vim73\ftplugin\make.vim 
```

即使`se et`我的 $MYVIMRC 中有

尝试添加

```
filetype plugin on 
```

到你的 $MYVIMRC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:22:16.043

在你想要的 .vimrc `set noexpandtab`

# ruby-on-rails - Jquery 令牌输入中的令牌限制

> ID：14825863
> 
> 赞同：0
> 
> 时间：2013-02-12T05:16:39.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, coffeescript, railscasts

这个 tokeninput 来自 [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)
我看到了来自[http://railscasts.com/episodes/258-token-fields-revised的教程](http://railscasts.com/episodes/258-token-fields-revised)

当我在很多地方使用它时，有时我只需要一个值选择，而在其他地方需要多个值。它是多值选择的代码。现在我希望它只搜索一次并只提交一个值。有没有办法在我的咖啡脚本文件中对其进行编码以仅选择一个值并停止？

```
my code for customers.js.coffee
jQuery ->
  $('#customer_plan_tokens').tokenInput '/plans.json'
    theme: 'facebook'
    prePopulate: $('#customer_plan_tokens').data('load')

my code for _form.html.erb for cusomers is
   <div class="form-inputs-right">

            Projects: <%= f.text_field :plan_tokens, data: {load: @customer.plans}, :label => "Projects" %>
        </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T06:46:03.937

JQueryToken 输入中有一个名为“tokenLimit”的选项......您可以在只需要输入一个值的地方将此值设置为 1。在其他地方，您可以相应地设置令牌限制的值。

请参考： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

搜索“tokenLimit”了解更多详情。希望这可以帮助。

# jquery - JQuery：单击链接时在鼠标位置显示隐藏的div

> ID：14825864
> 
> 赞同：5
> 
> 时间：2013-02-12T05:16:49.160
> 
> 标签：jquery, html, click, mouseevent, hidden

假设我的页面中有 2 个链接，并且当单击任一链接时，我希望隐藏的 div 出现在页面上鼠标所在的位置（鼠标 x，y）。另外，我想传入一个值来设置 div 的标题（参见 divTitle id）。

如何使用 jQuery 完成此任务？

隐藏分区：

```
<div class="boxFAQ" id="questionMarkId">
  <span id="divTitle"></span>  
  SHOW ME!
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T05:29:52.177

下面的代码将为您提供有关显示 div 的想法。继续您的要求，然后相应地隐藏它或根据需要显示消息

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">

jQuery(document).ready(function(){
   $('.alink').click(function(e){
    $('#questionMarkId').hide();
    $('#questionMarkId').css({'top':e.pageY-50,'left':e.pageX, 'position':'absolute', 'border':'1px solid black', 'padding':'5px'});
    $('#questionMarkId').show();
   });
});

</script>
</head>

<body>

<div class="boxFAQ" id="questionMarkId" style="display: none;">
  <span id="divTitle"></span>  
  SHOW ME!
</div>

<br /><br /><br /><br />
<a href="#" class="alink">Link 1</a>
<a href="#" class="alink">Link 2</a>

</body>
</html> 
```

**更新**
创建将在单击链接时调用的函数。向此函数传递您的消息（任意数量的参数）
因此您的链接将如下所示

```
<a href="#" class="alink" onclick="showTitle('This is the title')">Link 1</a>
<a href="#" class="alink" onclick="showTitle('This is another title')">Link 2</a> 
```

函数看起来像这样

```
function showTitle(message)
{
    $('#questionMarkId').hide();
    $('#questionMarkId').css({'top':e.pageY-50,'left':e.pageX, 'position':'absolute', 'border':'1px solid black', 'padding':'5px'});
    $('#questionMarkId').show();
    $('#divTitle').html(message);
} 
```

 **带`event`参数 的**更新函数****

 **```
function showTitle(message, evt)
{
   var e = e || evt || window.event;
   // ... rest of the code
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T05:26:19.393

根据您提供的上下文，这里有一个帮助：

```
$('#questionMarkId').hide();

$('a').on('click', function(e) {
    e.preventDefault();
    $('#questionMarkId').css( 'position', 'absolute' );
    $('#questionMarkId').css( 'top', e.pageY );
    $('#questionMarkId').css( 'left', e.pageX );
    $('#questionMarkId').show();
}); 
```

和小提琴链接：http: [//jsfiddle.net/m6XPP/](http://jsfiddle.net/m6XPP/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T21:07:33.010

为了让 ie 找到鼠标坐标，我必须在函数中添加以下内容。我很惊讶没有更多的“Jquery”方法来解决这个问题。再次感谢你的帮助！

```
var posx;
var posy;
if (typeof e.pageY === "undefined") 

    {       //will e work here?
    posx = window.event.clientX + document.body.scrollLeft 
    + document.documentElement.scrollLeft; 
    posy = window.event.clientY + document.body.scrollTop 
    + document.documentElement.scrollTop; 

    alert("was undefined!");
    } 
else{ 

    posx = e.pageX; 
    posy = e.pageY; 
    alert("was NOT undefined!");

    }
alert("posy:" + posy);
alert("posX:" + posx); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-12T19:08:15.313

当我刚刚登陆此页面时，也许将来会帮助某人-但这是我的解决方案

```
$(document).ready(function() {
        $('.hider').hide();
        $(document).mousemove(function(event) {
            var x = event.pageX;
            var y = event.pageY;
                //output mouse movements
                //console.log(x + y);
            $('h3').html("X="+x+"Y="+y+"");

        $(document).on('click',function(event) {
            $('.hider').show();
            $('.hider').css({'background-color' : 'red','width' : '250px','height' : '250px','position' : 'absolute','top': y,'left' : x});
        });
        });
    }); 
```

工作代码笔[https://codepen.io/desjardins2019/pen/XWNpmXL](https://codepen.io/desjardins2019/pen/XWNpmXL)**

# javascript - 悬停和 iframe 类型加载的请求页面

> ID：14825866
> 
> 赞同：0
> 
> 时间：2013-02-12T05:17:31.797
> 
> 标签：javascript, jquery, ajax, iframe

我有一个链接菜单，我想单独预览鼠标悬停时打开的页面窗口。

加载和隐藏多个 iframe 会占用过多的 CPU。

我想在悬停时请求页面并在悬停结束时终止连接/加载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:52:15.167

使用`attr()`方法根据需要更改`src`仅一个 iFrame 的。

```
var $iFrame=$('#iFrameID');    
$('.someClass').hover(){
    var src= this.href /* not sure of source*/
    $iFrame.show().attr('src', src);
},function(){
   $iFrame.hide()
}); 
```

为了简单起见，我使用了隐藏和显示，您也可以动态添加和删除 iFrame

API 参考：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

# android - 通过命令行拍摄的 Android 屏幕截图的图像格式

> ID：14825872
> 
> 赞同：1
> 
> 时间：2013-02-12T05:18:00.763
> 
> 标签：android, linux, image, image-processing, android-ndk

最近我找到了一种通过 adb shell 命令行将数据显示到帧缓冲区的方法。为了从帧缓冲区中获取数据，我使用了以下命令：

**猫 /dev/graphics/fb0 > /sdcard/screenshot**

现在在我的 /sdcard 中，我得到了一个原始图像截图。为了在作为设备屏幕的帧缓冲区上显示它，我使用了命令：

**猫 /sdcard/screenshot > /dev/graphics/fb0**

作为输出，我可以在我的设备屏幕上看到屏幕截图（注意：我的设备已植根，因此我可以访问 /dev/graphics/fb0）。

现在我的问题是：我必须从命令行在屏幕上显示 RGB888 格式的图像。所以我尝试了：

**猫 /sdcard/rgbimg > /dev/graphics/fb0**

但是作为屏幕上的输出，我可以看到一个白色和黑色的点而不是图像。

因此，为了在帧缓冲区上显示我的 RGB888，我需要将其转换为文件屏幕截图的格式。因此，如果有人尝试过，您能否告诉我上面示例中图像屏幕截图的格式。

任何有关如何获得此格式的建议也将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:48:56.360

屏幕上的图像可能是 32 bpp（[每像素位数](http://en.wikipedia.org/wiki/Color_depth)）。只需检查捕获图像的文件大小并将其除以`(width * height)`. 这应该可以确定一个像素使用多少字节。

如果是 4 字节，则需要将 RGB888 图像转换为 ARGB 或 RGBA。alpha 字节位置的 Afaik 差异取决于显示硬件，而不是 Android。

[ImageMagick](http://www.imagemagick.org)是完成此类工作的工具。例如，您可以将 RGBA 图像转换`png`为

```
convert -size 'width'x'height' -depth 8 filename.rgba filename.png 
```

更具体的例子是

```
convert -size 680x1209 -depth 8 phone_decor.rgba phone_decor.png 
```

由于图像的原始数据不包括您需要提供的宽度、高度、深度信息。

请参阅[convert 的手册](http://www.imagemagick.org/script/convert.php)以了解有关图像转换选项的更多信息（我应该承认这不是我见过的最好的手册）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:18:41.833

> 猫 /dev/graphics/fb0 > /sdcard/screenshot

这个命令产生了一个文件，它是 RGBA，红绿蓝 alpha。至少我假设它是一个 alpha 通道，我得到的每个字节在第 4 个字节位置都有一个 FF。

我能够使用原始文件打开 4 通道 544x1920 交错的原始文件在 Photoshop 中打开原始文件，该文件显示了 2 个屏幕副本，一个在另一个之上。我不确定为什么有 2 个副本，也许是双缓冲？也许是内部/外部视频？

要将原始文件视为 RGB，我将黄色通道复制到红色，将绿色通道复制到绿色通道，将青色通道复制到蓝色通道，图像看起来就像从 DDMS 屏幕捕获按钮捕获的图像，除了有一个堆叠 2 张图像，而不仅仅是一张。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:05:46.590

这取决于设备，但很可能您需要 RGBA。您从帧缓冲区获得的原始图像也包含多个副本（您可以通过检查文件大小来计算数量）。

您可以尝试使用此脚本生成带有彩条的图像，`fb.raw`然后复制到`/dev/graphics/fb0`（使 W、H 和 c 适应您的硬件）：

```
#! /usr/bin/env python

W=480
H=800

# R G B
COLORS = [
    "\xff\x00\x00",
    "\x00\xff\x00",
    "\x00\x00\xff",
    "\xff\xff\x00",
    "\x00\xff\xff",
    "\xff\x00\xff",
    ]
ALPHA = "\xff"
BLACK = "\x00\x00\x00\xff"
N = len(COLORS)

def color(x):
    for i in range(N):
        if x <= (i+1)*W/N:
            return COLORS[i]

f = open('fb.raw', 'wb')

for c in range(2):
    for y in range(H):
        if c == 0:
            for x in range(W):
                f.write(color(x)+ALPHA)
        else:
             f.write(BLACK)

f.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:52:19.240

鉴于默认相机输出格式是 NV21，我猜它可能是用于显示的格式（这似乎是从相机输出可以按原样显示的格式的逻辑）。

[如果这对您有帮助，这里](http://developer.android.com/reference/android/graphics/ImageFormat.html)列出了 Android 支持的各种图像格式，您正在寻找的格式可能就是其中之一。例如，这些格式的实现细节可以在[这里](http://www.fourcc.org/yuv.php)找到！

希望这可以帮助。

# iphone - 如何以编程方式录制视频而不在 iPad 应用程序中显示相机视图？

> ID：14825876
> 
> 赞同：0
> 
> 时间：2013-02-12T05:18:10.787
> 
> 标签：iphone, ios, objective-c, ipad

我想在应用程序中录制视频而不向用户显示相机视图，以便我们可以知道谁使用了该应用程序。

请问你能建议吗？谢谢

# android - 广告暴民没有出现！一切都正确设置

> ID：14825877
> 
> 赞同：1
> 
> 时间：2013-02-12T05:18:13.673
> 
> 标签：android

我有 onCreate() {

```
adView = new AdView(this, AdSize.IAB_BANNER, "a15119c131293a3");
       AdRequest adRequest = new AdRequest();
           //adLayout is a large linear layout that takes up half of the screen
       LinearLayout adLayout = (LinearLayout)findViewById(R.id.adViewLayout);
       adLayout.addView(adView);
       adView.loadAd(adRequest); 
```

}

然后在清单中，我导入了所有权限和 admob 活动。

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET" /> 
<activity  
            android:name="com.google.ads.AdActivity"  
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />  
        <activity 
```

可能出了什么问题？预先感谢您的帮助。广告根本不显示。

编辑：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/res/com.easyDefinition.googledefinition"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="3dp"
        >
        </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="42dp"
        >

        <TextView
            android:id="@+id/statusTitle"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:text="Define: "
            android:textSize = "20dp"
            android:gravity="center_vertical|center_horizontal"
            android:layout_gravity="center"/>

        <EditText
            android:id="@+id/editTxt2"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:maxLength="90"
            android:singleLine="true" 
            android:layout_weight="6"
            android:textSize="16dp"
            android:hint= "The word to search"
            android:gravity="center_vertical|center_horizontal"
            android:inputType="textNoSuggestions" >         
            </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="40dp"
        >
        <Button
            android:id="@+id/googleSearchBtn"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Show the definition"
            android:gravity="center_vertical|center_horizontal"
            android:textSize="12dp"/>

    </LinearLayout>
    <com.easyDefinition.googledefinition.ToolFileListView
        android:id="@+id/fileListView"
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/adViewLayout"
        >

    </LinearLayout>
</LinearLayout> 
```

没有 Logcat 错误

这算不算？

```
02-12 00:26:15.223: E/webview(18040): registerForStylusPenEvent onAttachedToWindow
02-12 00:26:15.223: E/webview(18040): registerForStylusPenEvent START
02-12 00:26:15.228: E/webview(18040): registerForStylusPenEvent END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:28:47.213

当您第一次运行 AdMob 时，可能什么都不会显示，因为服务器需要“预热”才能开始向您的应用投放广告。之后，广告仍然有可能因为没有广告资源而无法展示。特别是，您测试应用的国家/地区可能没有广告资源。

**编辑 re:warm up** 根据我的经验，来自应用的前几个广告请求通常会失败。这可能是因为服务器需要分配资源来向以前未见过或最近未见过的应用投放广告。

[AdMob 文档](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)有这样的评论：

> AdMob 第一次看到您的发布商 ID 时，最多可能需要两分钟才能收到广告。每次 ID 闲置 24 小时时，都会出现最初的两分钟延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:50:19.280

试试这个，

将此添加到您的 manifest.xml

```
 <meta-data
    android:name="ADMOB_ALLOW_LOCATION_FOR_ADS"
    android:value="true" /> 
```

# c# - 使用 SoapUi 进行 Web 服务测试 - 反序列化和 XmlNode [] 出错

> ID：14825878
> 
> 赞同：3
> 
> 时间：2013-02-12T05:18:18.320
> 
> 标签：c#, .net, visual-studio-2010, soapui, xml-deserialization

我正在尝试对第三方创建的 Web 服务进行快速测试。问题是每当我使用 SoapUI 时，我都会遇到以下错误：

> [来自命名空间http://schemas.datacontract.org/2004/07/Services](http://schemas.datacontract.org/2004/07/Services)的元素 MyValue 不能将子内容反序列化为对象。请使用 XmlNode[] 反序列化这种 XML 模式。

我从[这里](http://johnliu.net/blog/2012/9/7/xml-deserialization-cannot-have-child-contents-to-be-deseria.html)了解到，DataMember 是类型，`object`而不是`string`反序列化器在将字符串转回该类型的对象时遇到问题`Object`。

建议的一种解决方案是将 DataMember 的类型更改回`String`显然我不能，因为它属于第三方。

还有其他建议可以使其与 SoapUI 测试一起使用吗？

附加信息：博客中建议的解决方案：

```
[DataContract] 
public class MyClass 
{ 
   [DataMember] 
   public string MyName;

   [DataMember] 
   public object MyValue; 
} 
```

如果您将 DataContract 更改为

```
 [DataContract] 
 public class MyClass 
 { 
    [DataMember] 
    public string MyName;

    [DataMember] 
    public string MyValue; 
 } 
```

# android - Android：将后台进程切换到前台

> ID：14825879
> 
> 赞同：1
> 
> 时间：2013-02-12T05:18:26.963
> 
> 标签：android, notifications, background-process

我的应用程序将创建通知以通知用户

当应用程序处于后台进程 8 小时时

我想要的只是切换创建通知的进程（背景）

到前台，我该怎么办？

```
 // PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
    // intent, PendingIntent.FLAG_CANCEL_CURRENT);

    NotificationManager manager = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification;

    if (Build.VERSION.SDK_INT >= 16) {

        Notification.Builder builder = new Notification.Builder(this);
        builder.setContentIntent(pendingIntent);
        builder.setContentTitle(xx);
        builder.setContentText(xx);
        builder.setTicker(xx);
        builder.setLargeIcon(xx);
        builder.setSmallIcon(xx);
        builder.setDefaults(Notification.DEFAULT_ALL);
        notification = builder.build();

    } else {

        notification = new Notification(xx, xx, 0);
        notification.defaults |= Notification.DEFAULT_ALL;
        notification.setLatestEventInfo(this, xx, xx, pendingIntent);

    } 
```

![在此处输入图像描述](../Images/ccf47aa25ce7b7a24215a904719f0091.png)

![在此处输入图像描述](../Images/578417916df1d5ffe99c0608ed4f2474.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:03:42.333

解决方案

```
 Intent intent = new Intent(this, StartWorkingActivity2.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

这会将现有任务带到前台，而无需实际创建新 Activity。如果您的应用程序没有运行，它将创建一个 MyRootActivity 实例并启动它。

[用户单击主页按钮后将应用程序置于最前面](https://stackoverflow.com/questions/12074980/bring-application-to-front-after-user-clicks-on-home-button)

# php - 使用 simplexml_load_string、addChild 和 addAttribute 创建 XML 文件

> ID：14825881
> 
> 赞同：0
> 
> 时间：2013-02-12T05:18:31.347
> 
> 标签：php, xml, simplexml, addchild, addattribute

这是我到目前为止所拥有的：

这是我收到的输出：http: [//i.imgur.com/mGRAJPe.gif](http://i.imgur.com/mGRAJPe.gif)

似乎所有子字段节点都成为第一个数据字段元素的子节点，而不是嵌套在各自的数据字段父节点中。有什么建议么？

```
$str = '<?xml version="1.0" encoding="UTF-8"?><collection     xmlns="http://www.loc.gov/MARC21/slim"><record></record></collection>';
$xml = simplexml_load_string($str);
$xml->record = "";
$xml->record->addChild('leader', $data["controlfield"]["000"]["40"]);

foreach ($data["controlfield"] as $dcf => $value) {
    foreach ($value as $dcfv) {
    $addControl = $xml->record->addChild('controlfield', $dcfv);
    $addControl->addAttribute('tag', $dcf);
    }
}

foreach ($data["datafield"] as $dftc => $dfarray) {
    $addData = $xml->record->addChild('datafield');
    $addData->addAttribute('tag', $dftc);
    $addData->addAttribute('ind1', $dfarray['ind1']);
    $addData->addAttribute('ind2', $dfarray['ind2']);

    foreach ($dfarray as $code => $value) {                         
        if(($code != "ind1") && ($code != "ind2")) {
        $addSubs = $xml->record->datafield->addChild('subfield', $value);
        $addSubs->addAttribute('code', $code);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:47:34.053

好吧，这就是你在这里所做的，你`datafield`作为单个节点处理，所以使用第一个（为什么应该是最后一个？）：

```
$xml->record->datafield->addChild('subfield', $value); 
```

但是你已经有了你想要的父母`$addData`，只需使用它：

```
$addData->addChild('subfield', $value); 
```

# javascript - 在我的 jquery 弹出窗口中延长持续时间

> ID：14825885
> 
> 赞同：0
> 
> 时间：2013-02-12T05:18:54.137
> 
> 标签：javascript, jquery

我有一个 jquery 弹出插件，当我提交表单时它会自动关闭。但我需要为弹出窗口设置时间限制。

**HTML：**

```
 <div class='popbox'>
<a class='open' href='#'>
  <img src='plus.png' style='width:14px;position:relative;'> Click Here!
</a>

<div class='collapse'>
  <div class='box'>
    <div class='arrow'></div>
    <div class='arrow-border'></div>

    <form action="" method="post" id="subForm">
      <div class="input">
        <input type="text" name="cm-name" id="name" placeholder="Name" />
      </div>
      <div class="input">
        <input type="text" name="cm-nklki-nklki" id="nklki-nklki" placeholder="Email" />
      </div>
      <div class="input">
        <textarea name="cm-f-tlhll" id="Message" placeholder="Comments"></textarea>
      </div>
      <input type="submit" value="Get In Touch" /> <a href="#" class="close">Cancel</a>
      <input type="button" name="closebutton" id="closebutton" value="closebutton" >
    </form>

  </div>
</div> 
```

**查询：**

```
 (function () {
   $.fn.popbox = function (options) {
     var settings = $.extend({
       selector: this.selector,
       open: '.open',
       box: '.box',
       arrow: '.arrow',
       arrow_border: '.arrow-border',
       close: '.close'
     }, options);
     var methods = {
       open: function (event) {
         event.preventDefault();
         var pop = $(this);
         var box = $(this).parent().find(settings['box']);
         if (box.css('display') == 'block') {
           methods.delay(1500).close();
         } else {
           box.css({
             'display': 'block',
             'top': 10,
             'left': ((pop.parent().width() / 2) - box.width() / 2)
           });
         }
       },
       close: function () {
         $(settings['box']).fadeOut("fast");
       }
     };
     $(document).bind('keyup', function (event) {
       if (event.keyCode == 27) {
         methods.delay(1500).close();
       }
     });
     return this.each(function () {
       //$(this).css({'width': $(settings['box']).width()}); // Width needs to be set otherwise popbox will not move when window resized.
       $(settings['open'], this).bind('click', methods.open);
       $(settings['open'], this).parent().find(settings['close']).bind('click', function (event) {
         event.preventDefault();
         methods.close();
       });
     });
   }
 }).call(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:37:07.697

将 增加到`delay(1500)`更高的值。1500 以毫秒为单位，这意味着您当前的弹出窗口将在 1.5 秒内关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:37:11.677

```
close: function () {
    window.setTimeout(function() {
        $(settings['box']).fadeOut("fast");
    }, 1000); // 1 second
} 
```

# perl - 通过目录树递归的 Perl 脚本

> ID：14825886
> 
> 赞同：-1
> 
> 时间：2013-02-12T05:18:55.153
> 
> 标签：perl, recursion, directory

我想编写一个 Perl 脚本，它从目录树的顶部开始（在命令行参数中提供）并递归地遍历每个子目录，对每个文件执行特定操作。

我正在使用`finddepth`它，但是当我在距离基本目录两级或更高级别的目录上运行脚本时，它似乎不起作用。

这是我的代码：

```
#!/usr/local/bin/perl -w

use strict;

use File::Copy;
use File::Find;
use File::Basename;
use File::Path;

finddepth(\&file_list, @ARGV);

sub file_list {

    my ($file_path, $name, $path, $suffix);

    $file_path = $File::Find::name;

    ($name, $path, $suffix) = fileparse($file_path, /\.*/);

    my $fullname = $name . $suffix;
    my $file = $fullname;

    if ($file =~ /^[^\.].*[^\.pl]$/) {

        copy($file, "$file.orig");

        open(FILE, "$file");
        my @file_data = <FILE>;
        close(FILE);

        open(FOUT, ">$file") or die " \n File cannot be opened !";

        foreach my $line (@file_data) {
            if ($line =~ /^\s+Error:/) {
                $line =~ s/([^-]\d+)/ \*\*/gc;
                print FOUT $line;
            }
            else {
                print FOUT $line;
            }
        }
        close(FOUT);
    }
} 
```

始终抛出以下警告/错误：

1.  读取关闭的文件句柄
2.  文件打不开！

我似乎无法弄清楚为什么会这样。我试图让我的问题尽可能具体。如果您需要更多信息，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:17:03.007

您无法打开该文件，因为当时`$file`恰好是一个目录，因此您需要为此添加一个检查。

`or die`在打开文件进行阅读时，可能值得添加一条语句。

另请注意，`File::Find`设置`$_`为当前文件名，因此您生成的 5 行`$file`实际上是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:44:37.483

您的代码存在一些问题。

*   `use warnings`比命令行更可取`-w`

*   在第一个使用点声明变量，而不是在子例程顶部的块中

*   `open`使用, 和词法文件句柄的三参数形式

*   检查`open`调用状态时，将内置变量`$!`放入`die`字符串中，以便知道*打开*失败的原因

*   不要将标量变量放在双引号内。这可能是不必要的，并且在某些情况下可能会破坏您的代码。极不可能做任何你想做的事

程序的这种重写`use autodie`用于避免显式`open ... or die $!`语句的需要。它用于`rename`更改文件的名称，而不是复制它并覆盖原始文件。

我没有将整个文件读入内存，而是打开重命名的文件并逐行读取，编辑每一行并将其写入新文件

我已经编写了它，以便它忽略以点开头或结尾的文件`.pl`- 我希望这是对的。我也非常怀疑您的替换`s/[^-]\d+/ **/g`，它查找前面不是连字符的字符的数字序列；那正确吗？

```
#!/usr/local/bin/perl

use strict;
use warnings;

use autodie;
no autodie 'unlink';

use File::Find 'finddepth';

finddepth(\&file_list, @ARGV);

sub file_list {

  return unless -f;
  return if /^\./ or /\.pl$/;

  my $file = $_;
  my $orig = "$file.orig";

  unlink $orig;
  rename $file, $orig;

  open my $infh, '<', $orig;
  open my $outfh, '>', $file;

  while (my $line = <$infh>) {
    if ($line =~ /^\s+Error:/) {
      $line =~ s/[^-]\d+/ **/g
    }
    print $outfh $line;
  }

  close $outfh;
} 
```

# javafx - Javafx Gridpane Builder 的优点

> ID：14825887
> 
> 赞同：3
> 
> 时间：2013-02-12T05:18:56.543
> 
> 标签：javafx

我想知道使用 Javafx Gridpane Builder 而不是使用它的目的和/或好处是什么？我似乎找不到任何关于建造者的目的和好处的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:25:24.847

**更新 - 不推荐使用构建器**

关于一般的 Builders，JavaFX 项目负责人[写道](http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-August/010024.html)：

> 在 8 中弃用并从 JavaDoc 中删除，在 9 中消失（将作为单独的可下载 Jar 提供，因此您可以继续使用它们，但它们不会更新）。我们正在从样本中删除它们。
> 
> 最好循环关闭 Builders。

* * *

JavaFX 中的[Builder 类为功能提供了](http://docs.oracle.com/javafx/2/api/javafx/util/Builder.html)[流畅的接口](http://en.m.wikipedia.org/wiki/Fluent_interface#section_1)。这样的 API 通常比命令式的代码更容易阅读。

Fluent API 本质上是[声明](http://en.m.wikipedia.org/wiki/Declarative_programming)性的，编写无错误的声明性代码通常比有状态的[命令式代码](http://en.m.wikipedia.org/wiki/Imperative_programming)更容易。

可以将 Builder 实例创建为模板，并且可以反复重用同一个实例，正如[JavaFX Builders 的优势中](http://blog.netopyr.com/2012/01/24/advantages-of-javafx-builders/)所展示的那样。

JavaFX Builders 还定义了可以在 FXML 文档中使用的属性。有关此用法的更多信息，请参阅[FXML 简介](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#instance_declaration_elements)文档的构建器部分。

与命令式 API 相比，JavaFX 2.2 中构建器可能不足的一些领域是：

1.  构建器不促进属性绑定。
2.  构建器 API 可能并不适用于所有功能。
3.  构建器可以使用难以理解的泛型。
4.  构建器不允许您对对象设置静态约束。
5.  对于简单的声明，建设者比他们的同行更罗嗦。

第 4 点的一个示例是 Builder 没有等效的方法，例如[GridPane.setVgrow(priority)](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html#getVgrow%28javafx.scene.Node%29)。

至于[GridPaneBuilder](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPaneBuilder.html)与使用[GridPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html)类的对比——它与其他构建器与命令式 API 比较具有相同的优点和缺点，但是 GridPaneBuilder 比其他一些构建器更受限制，因为它只公开了 GridPane 接口功能的一个子集——主要是因为GridPane 非常依赖静态方法来指定布局约束，并且在 Builder 中未公开等效功能。

# blackberry - 如何在黑莓的运行时添加一个字段？

> ID：14825892
> 
> 赞同：0
> 
> 时间：2013-02-12T05:19:26.493
> 
> 标签：blackberry

我是黑莓新手，被困在一个地方。我有一个自定义下拉菜单，我希望如果我从菜单中选择第二个选项，则应添加一个字段，如果我从菜单中选择第一个选项，则应再次添加相同的字段被删除。这是我的自定义下拉菜单。

```
 public FWCustomChoiceField(final Object choice[]) {
    edit_field = GlobalUtils.getImage(Display.getWidth() + "x"+ Display.getHeight() + "bb_dropdown1.png");

    this.choice = new Object[choice.length];
    this.choice = choice;
    text = choice[0].toString();
    choiceField = new ListField() {
        protected boolean navigationClick(int status, int time) {
            //buttonIndexFunctionality(getSelectedIndex());

            Field focus = UiApplication.getUiApplication().getActiveScreen().getLeafFieldWithFocus();
            if (focus instanceof ListField) {
                ChoicePopupScreen popup = new ChoicePopupScreen(20, Display.getHeight()/ 2 - (choice.length * 20), choice);
                popup.setChoice(choice);
                UiApplication.getUiApplication().pushScreen(popup);
            }
            return super.navigationClick(status, time);
        }
    };

    choiceField.setSize(1);
    choiceField.setCallback(new TestListCallback());
    add(choiceField);
    invalidate();
}
    public int getListFieldIndex()
{

    return choiceField.getSelectedIndex();
}

public void setSelIndex(int index) {
    this.index = index;
    this.text = choice[index].toString();
    choiceField.invalidate();
}

public String getValue() {
    String value = choice[index1].toString();
    return value;

}

public int getSelectedIndex() {
    return index;
} 
```

我搜索并发现我需要在运行时重建屏幕但无法弄清楚如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:01:29.517

首先创建一个字段管理器并将其添加到您的屏幕。

```
 VerticalFieldManager title1;
 title1=new VerticalFieldManager(FIELD_HCENTER)
           {

           };
 title1.add(new NullField());
 add(title1); 
```

现在，当您在下拉列表中选择第二项时，请执行以下操作 -

```
title1.deleteAll();
title1.add(add your field);//here add your field to title1.
title1.invalidate(); 
```

当您单击下拉菜单中的第一项时，-

```
title1.deleteAll();
title1.invalidate(); 
```

# matlab - 可视化 3D 数据集

> ID：14825895
> 
> 赞同：1
> 
> 时间：2013-02-12T05:20:00.957
> 
> 标签：matlab, plot, data-visualization

我有一个 200 x 50 的矩阵。我想显示一个与 y 轴上 50 和 x 轴上 200 的值相对应的颜色的网格。我试图玩*网格*但是：

1.  我在彩色部分之间有很多空白（我希望该区域由完全填充的正方形组成，最好在每个正方形周围也有一个框架）和

2.  角度是 3D-ish，而我希望它是“从上方直接”。

*网格*对我来说是正确的工具还是应该使用其他工具？

到目前为止，我一直在使用以下代码。我愿意接受意见和建议。

```
surf(values, 'EdgeColor','none');
view(90, 90); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:35:33.033

改为使用[`surf`](http://www.mathworks.com/help/matlab/ref/surf.html)，例如：

```
% Create a grid of x and y points
g= linspace(-2, 2, 20);
[X, Y] = meshgrid(g, g);

% Define the function Z = f(X,Y)
Z = 10*exp(-X.^2-Y.^2);

% "phong" and "gouraud" lighting are good for curved, interpolated surfaces. 
surf(X, Y, Z); 
view(30, 75);
colormap(jet(256));
shading interp;
light;
lighting phong; 
```

![在此处输入图像描述](../Images/429d04705c6e15f7e79878558579c496.png)

或者，如果您真的想要“从上方查看”，请使用`view(0, 90);`

![在此处输入图像描述](../Images/61b6b5950a271f650196256cfb0597ca.png)

# wpf - 如何在 WPF 中单击（打开组合框）时更改组合框背景颜色？

> ID：14825896
> 
> 赞同：7
> 
> 时间：2013-02-12T05:20:08.803
> 
> 标签：wpf, mvvm, combobox, background-color

有谁能知道，

如何在 WPF 中单击（打开组合框）时更改组合框背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:05:41.680

这是一个有点幼稚的方法：

```
<ComboBox
  ItemsSource="{x:Static Fonts.SystemFontFamilies}"
  Width="100"
  >
  <ComboBox.Style>
    <Style TargetType="ComboBox">
      <Setter Property="Background" Value="Green" />
      <Style.Triggers>
        <Trigger Property="IsDropDownOpen" Value="True">
          <Setter Property="Background" Value="Red" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </ComboBox.Style>
</ComboBox> 
```

最初，这会将`Background`属性设置为，但会安排它在下拉菜单出现时`Green`转到。`Red`但是，这样做有两个问题：

1.  在某些 Windows 主题中（例如，在 Vista 和 Windows 7 中使用的 Aero 主题），绿色背景会被主题用来指示下拉按钮已被按下的蓝色所掩盖。因此按钮会在淡出为青色之前短暂变为绿色。
2.  该`ComboBox.Background`属性仅影响按钮本身的外观，而不影响下拉列表。您实际想要做的可能是更改弹出部分的背景颜色。

如果 2 是您想要的，这可以解决问题：

```
<ComboBox
  ItemsSource="{x:Static Fonts.SystemFontFamilies}"
  Width="100"      >
  <ComboBox.Resources>
    <Style TargetType="ComboBoxItem">
       <Setter Property="Background" Value="Orange" />
    </Style>
  </ComboBox.Resources>
</ComboBox> 
```

严格来说，这实际上是在更改`ComboBoxItem`下拉菜单中出现的控件的背景颜色，但这会产生预期的效果。

但是，如果要修复 1，则需要自定义模板，因为内置`ComboBox`模板实际上并不能很好地支持该`Background`属性，因为它会在各种情况下更改按钮部分的颜色。Aero 主题的外观`ComboBox`并不是为支持自定义背景颜色而设计的，因此您需要为控件创建自己的自定义外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T16:07:47.040

好的，回答您关于背后代码的问题：

将项目添加到您的组合框：

```
foreach (String tag in tags)
{
    ComboBoxItem item = new ComboBoxItem();
    item.Content = tag;
    cbTags.Items.Add(item);
} 
```

然后您可以修改项目背景颜色：

```
((ComboBox)o).Background = GetBrushByRGB(r, g, b);
foreach (ComboBoxItem item in ((ComboBox)o).Items)
{
    item.Background = GetBrushByRGB(r, g, b);
} 
```

所以基本上你需要改变 ComboBoxItem 的背景色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T20:18:29.320

首先，您需要获取 Combobox 的默认模板（如果需要，请参阅下面的详细信息）。然后，将此 XAML 放在第一个“ControlTemplate.Triggers”标签中：

```
<DataTrigger Binding="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Value="True">
    <Setter Property="Background" TargetName="templateRoot" Value="Red"/>
</DataTrigger> 
```

当下拉菜单打开时，您的组合框按钮将变为红色。

获取默认模板： 在 Visual Studio 2015 中，在设计模式下查看您的页面。然后，右键单击组合框，然后选择“编辑模板->编辑副本”。这将为您生成默认模板。

# mysql - Magento中的自定义查询以将数据插入数据库

> ID：14825897
> 
> 赞同：1
> 
> 时间：2013-02-12T05:20:13.050
> 
> 标签：mysql, database, magento, magento-1.7

这是 payment_customer 表的表结构。

```
CREATE TABLE IF NOT EXISTS `payment_customer` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `added_date` datetime NOT NULL,
  `merchant_reference_no` varchar(20) NOT NULL,
  `amount` int(10) NOT NULL,
  `order_desc` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ; 
```

上表存储有关付款客户的数据。我使用以下查询将数据插入到我的自定义支付网关模块中的表中。

```
$write = Mage::getSingleton('core/resource')->getConnection('core_write');
$sql  = " INSERT INTO payment_customer ('id', 'added_date', 'merchant_reference_no', 'amount', 'order_desc') VALUES (NULL, '2013-02-13 00:00:00', '233AX23', '200', 'test'); ";
$write->query($sql); 
```

然后我尝试了

```
$write = Mage::getSingleton('core/resource')->getConnection('core_write');
$sql  = " INSERT INTO sampath_payment_customer ('id', 'added_date', 'merchant_reference_no', 'amount', 'order_desc') VALUES (?, ?, ?, ?,?); ";
$write->query($sql, array('NULL', '2013-02-13 00:00:00', '233AX23', '200', 'test'));
$write->save(); 
```

但是两者都没有插入任何数据，而是给我下面的错误消息。

![在此处输入图像描述](../Images/61bd803b4c057aaaa9b3d12d38ab7e52.png)

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:47:03.933

**您可以检查var/report/1149745463637**中带有错误日志记录号的文件吗？ 它将给出有关错误的确切信息。希望这会帮助你。

# python - 如何获取夹在逗号之间的数字？

> ID：14825899
> 
> 赞同：1
> 
> 时间：2013-02-12T05:20:13.983
> 
> 标签：python, regex

以下是 Python 片段

`line = '3520005,"Toronto (Ont.)",C ,F,2503281,2481494,F,F,0.9,1040597,979330,630.1763,3972.4,1\r\n'`我希望能够将第一个数字夹在两个逗号之间，在这种情况下是`,2503281,`

但是，我想出的似乎无法正常工作：`m = re.search("\,([0-9])*\,",line)`仅保留数字中的最后一位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:23:11.190

星号需要放在括号内：

```
`",([0-9]*)," 
```

否则，您只能捕获其中一个数字。您也不需要逗号前的反斜杠，但这没关系。

您可能还想使用`+`而不是`*`确保至少有一个数字，甚至使用`{}`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:24:51.547

这是一个非正则表达式解决方案：

```
>>> [item for item in line.split(',')[1:] if item.isdigit()][0]
'2503281' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:56:26.543

请注意，使用正则表达式解析逗号分隔值充满了疏忽、脆弱性和潜在错误。如果您可以将其强制转换为 csv 模块可以执行的操作 - 您会过得更好。

也就是说，这有效：

```
import re

st='''line = '3520005,"Toronto (Ont.)",
C ,F,2503281,2481494,F,F,0.9,1040597,979330,630.1763,3972.4,1\r\n'''

print re.findall(r"(\d+\.?\d*)",st) 
```

印刷：

```
['3520005', '2503281', '2481494', '0.9', '1040597', '979330', '630.1763', '3972.4', '1'] 
```

[这](http://www.regex101.com/r/gO8dR4)是正则表达式的解释。

# opencv - 使用opencv进行face_eyes检测和跟踪

> ID：14825905
> 
> 赞同：1
> 
> 时间：2013-02-12T05:20:24.440
> 
> 标签：opencv

我正在 Ubuntu 平台上使用 C 语言中的 opencv 2.4.3 进行眨眼。

我能够使用 Haar 级联检测实时视频中的人脸和眼睛，但是当我倾斜我的脸时，算法无法检测到人脸，而且我还在网上读到如果人脸倾斜则无法检测到。所以我认为跟踪可能会有所帮助。

我应该如何在实时视频中跟踪面部和眼睛？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:37:26.720

您可以使用 HaarCascade 作为**初始检测**，然后使用[cv::GoodFeaturesToTrack()](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html#goodfeaturestotrack)提取一些**特征**。然后对于每个**下一帧**，您将初始特征和帧（*从中提取特征*）以及下一帧传递给[cv::calcOpticalFlowPyrLK()](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=calcopticalflowpyrlk#calcopticalflowpyrlk)，它将计算这些特征的新位置。您可以使用 cv::boundingRect(features) 来获取限制特征集的 cv::Rect。

# java - ArrayList的HashMap ，字符串不能正常工作？

> ID：14825906
> 
> 赞同：2
> 
> 时间：2013-02-12T05:20:31.390
> 
> 标签：java, string, arraylist, hashmap

所以，我想制作一个字符串列表到字符串的映射，但我无法让它正常工作：

这是我所做的所有代码，在我找出原因之前，我无法进步：

```
Map<List<String>, String> test = new HashMap<List<String>, String>();
test.put( new ArrayList<String>(), "s1");
test.put( new ArrayList<String>(), "s2");
test.put( new ArrayList<String>(), "s3");

System.out.println(test.size()); 
```

我得到1，应该是3！为什么当我为 3 个单独的对象进行 3 次调用时只添加了一个对象？我知道不小心将同一个对象添加到集合中的危险，但我专门为每个 put 创建了一个新的 ArrayList，从而创建了一个全新的对象。

那么为什么 Map 中只有一个对象呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:24:00.480

ArrayList#hashCode() 为所有这些返回相同的值。如果您查看它的来源：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractList.java#AbstractList.hashCode%28 %29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractList.java#AbstractList.hashCode%28%29)

您可以看到，如果没有元素或所有元素相同，则 hashCode 将相同。

修复它，它应该可以正常工作。使用 Map 或以一种或另一种方式更改 hashCode。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:26:22.580

尝试这个：

```
Map<String,List<String>> test = new HashMap<String,List<String>>();
test.put("s1", new ArrayList<String>());
test.put("s2", new ArrayList<String>());
test.put("s3", new ArrayList<String>());

System.out.println(test.size()); 
```

请注意，地图是一种`key-value`关系。出于这个原因，您可能也想使用`String`作为**键**和`ArrayList`作为**值**，而不是相反。这样，如果添加 3 个不同的字符串，每个字符串都会有不同的哈希值（hashcode）。因此，您的`Map`.

另请注意：

**放**

> public Object put(Object key, Object value) 将指定值与此映射中的指定键相关联。如果映射先前**包含此键的映射**，则**替换**旧值。

这就是您得到 1 而不是 3 的原因，因为您添加了相同的 object `new ArrayList<String>()`。

更详细地了解 [Class HashM](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)规范。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:27:33.053

您使用 ArrayList 作为键，尝试

```
 System.out.println(new ArrayList<String>().equals(new ArrayList<String>())); 
```

它打印

```
true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:00:57.207

我不知道为什么你需要列表作为键和字符串作为值，但你基本上对每个 put 操作使用相同的“键”，因为哈希码对于任何空列表都是相同的。就像提到的其他答案一样，最好将列表切换为值，将字符串切换为键。如果列表发生变化，任何未来的 .get 尝试都将返回 null

```
 public static void main(String...args) {
       Map<List<String>, String> test = new HashMap<List<String>, String>();
       List<String> bob = new ArrayList<>();
       bob.add("asdf");
       test.put( new ArrayList<String>(), "s1");
       test.put( bob, "s2");

       System.out.println(test.size());
       System.out.println(test.get(bob));
   } 
```

输出

```
2
s2 
```

当添加新项目时

```
 public static void main(String...args) {
       Map<List<String>, String> test = new HashMap<List<String>, String>();
       List<String> bob = new ArrayList<>();
       bob.add("asdf");
       test.put( new ArrayList<String>(), "s1");
       test.put( bob, "s2");      
       bob.add("aabbcc");

       System.out.println(test.size());
       System.out.println(test.get(bob));
   } 
```

get 将不起作用，因为列表的哈希已更改。在这种情况下，输出将是：

```
2
null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T05:38:53.327

最好的方法是使用 String 对象作为键，使用 List 作为值。

看看 java 文档[在这里](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#put%28K,%20V%29)说了什么。

如果您想将 ArrayList 添加为键，那么覆盖 equals 方法就足够了。

[这里](https://stackoverflow.com/questions/13501142/java-arraylist-how-can-i-tell-if-two-lists-are-equal-order-not-mattering)的帖子提供了很好的见解。我从那篇文章中放了一些我喜欢的东西。

覆盖两个 ArrayList 的等于：

```
 public boolean equals(List<String> one, List<String> two){
    if (one == null && two == null){
        return true;
    }

    if((one == null && two != null) 
      || one != null && two == null
      || one.size() != two.size()){
        return false;
    }

    //to avoid messing the order of the lists we will use a copy
    //as noted in comments by A. R. S.
    one = new ArrayList<String>(one); 
    two = new ArrayList<String>(two);   

    Collections.sort(one);
    Collections.sort(two);      
    return one.equals(two);
} 
```

# php - 不支持网页中的阿拉伯语内容

> ID：14825909
> 
> 赞同：1
> 
> 时间：2013-02-12T05:20:45.087
> 
> 标签：php, mysql

大家好，我正在创建阿拉伯语网站。但问题是它不支持阿拉伯语内容。它来了 ？？？？？？？？？？？？. 即使我把 charset="utf-8" 放在 .htaccess 中。我还在每个页面中放置了元标记。我将文件保存为 utf-8 支持文件格式。即使我把`header('Content-Type: text/html; charset=utf-8');` MySQL 存储的数据放在那里，以阿拉伯语显示，但如果我在标签中放一些阿拉伯语，它将不支持

有人对此有一些想法，因为这是我的第一个阿拉伯语网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:28:57.577

您可能希望在 HTML 中添加额外的名称。例如，如果您使用的是 HTML 5，它将如下所示：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
:
your content here
: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T08:15:31.097

将字段 Collat​​ion 的结构更改为：`UTF8 general CI`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:27:29.813

尝试在开始时为阿拉伯语添加元字符集

```
<META HTTP-EQUIV="Content-Type"  CONTENT="text/html; CHARSET=iso-8859-6"> 
```

或者您可以通过以下步骤进行尝试：-

```
Displaying Arabic text using PHP

1\. Don't use the short tags <? ?>. Use the full tags <?php ?>

2\. Remove the quotes and semicolon from the first line and others that are outside the php tags
"<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">";

3\. Close the span tag <span lang='ar-kw'

4\. Make sure save the file with utf-8 encoding. You might be saving it with another coding. 
```

# python - Django子类化一个抽象基类的子类

> ID：14825910
> 
> 赞同：0
> 
> 时间：2013-02-12T05:20:47.447
> 
> 标签：python, django, inheritance, abstract-class

我尝试在 Django 1.4.3 中执行以下操作：

```
class The_Image_Abstract(models.Model):
    create_time = models.DateTimeField()
    class Meta:
        abstract = True

class Imager(The_Image_Abstract):
    time2 = models.DateTimeField()

class ImagerB(Imager):
    time3 = models.DateTimeField() 
```

但是在执行 syncdb 时，create_time 字段不会显示为 ImagerB 中的字段。任何想法如何显示？否则我将不得不在 ImagerB 中重复 Imager 的一大堆事情。

谢谢，

时代

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:01:11.967

假设您在 Imager 或 ImagerB 上没有任何其他字段，那么您可以使用[代理模型](https://docs.djangoproject.com/en/1.4/topics/db/models/#proxy-models)。

这允许您为基类保留一个 db 表并让 Imager 和 ImagerB 共享数据 - 它确实像正确的面向对象继承一样工作。问题是您不能在子类上拥有其他字段。但是，如果您有一点灵活性，那么您可以在基类上将字段设为可选，然后在子类上要求或隐藏它们。

更新

我仍然没有设法让以下代码工作，但它可能会提供一些想法。

```
class TheImage(models.Model):
    create_time = models.DateTimeField()
    field2 = models.CharField(max_length=64, blank=True, null=True)
    field3 = models.TextField(blank=True, null=True)

class Imager(TheImage):
    class Meta:
        proxy = True

    def __init__(self, *args, **kwargs):
        for f in self._meta.fields:
            if f.name == 'field2':
                f.editable = False
            if f.name == 'field3':
                f.blank = False:
        super(Imager, self).__init__(*args, **kwargs)

class ImagerB(TheImage):
    class Meta:
        proxy = True

    def __init__(self, *args, **kwargs):
        for f in self._meta.fields:
            if f.name == 'field3':
                f.editable = False
            if f.name == 'field2':
                f.blank = False:
        super(ImagerB, self).__init__(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:41:57.027

它不会显示在`Imager`表中`ImagerB`。

`Imager`继承自抽象类`The_Image_Abstract`，但它有自己的表。虽然`ImagerB`继承自非抽象类`Imager`，所以`Imager`放在表中的字段`Imager`。

# sql - 如何在 SQL Server 2005/2000 中创建类似数组？

> ID：14825911
> 
> 赞同：0
> 
> 时间：2013-02-12T05:20:58.447
> 
> 标签：sql, sql-server-2005, sql-server-2000

我知道我们不能在 SQL Server 中创建数组。我的数据库中有 25 个不同的表。我想在这些表中添加额外的列。所以我想要一个数组，这样我就可以将我的表名存储到其中。我可以一一访问它们并插入新列。在 SQL Server 中没有 for 循环，我可以使用 while 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:51:20.387

您可以轻松地将表名存储到**表变量**中，然后`Done`在该表变量中也有一列 - 例如：

```
DECLARE @AllMyTables TABLE (TableName VARCHAR(200), Done BIT) 
```

然后将您的表插入该表变量：

```
INSERT INTO @AllMyTables(TableName, Done)
    SELECT name, 0
    FROM sys.tables 
```

现在，您可以轻松地一次获取一张表并对其进行操作：

```
DECLARE @TableName VARCHAR(200)

SELECT TOP (1) @TableName = TableName FROM @AllMyTables WHERE Done = 0 
```

现在添加您的列，更新`Done`列以指示您已完成，然后继续......

# php - 生成 PHP 警告

> ID：14825918
> 
> 赞同：3
> 
> 时间：2013-02-12T05:21:37.643
> 
> 标签：php, command-line, arguments

如何以与内置函数警告相同的方式生成自定义 PHP 警告。

例如：

```
php > fopen(null);
PHP Warning:  fopen() expects at least 2 parameters, 1 given in php shell code on line 1
php > fopen(null, 'w');
PHP Warning:  fopen(): Filename cannot be empty in php shell code on line 1
php > fopen(array('a'), 'w');
PHP Warning:  fopen() expects parameter 1 to be a valid path, array given in php shell code on line 1 
```

假设我有一个功能如下：

```
function my_func($a, $b, $c); 
```

我可以使用哪些代码`my_func`在错误调用时会引发类似的警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:25:05.503

您可能正在寻找 trigger_error。这些将显示标准错误并由 php.ini 中的 error_log、display_errors 等设置处理

一个最小的例子是：

```
if (!DoAFunction()) {
  trigger_error("DoAFunction returned false!", E_USER_ERROR);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:25:28.467

```
trigger_error("Here is your herror", E_WARNING); 
```

# android - 在mapview上绘制带有图像的圆圈

> ID：14825921
> 
> 赞同：0
> 
> 时间：2013-02-12T05:22:04.037
> 
> 标签：android, android-mapview

我必须在谷歌地图视图上画一个圆圈和一个小的 .png 图像，任何人都可以建议如何实现它？

它应该在提供的纬度和经度上显示圆圈，并且 .png 图像应该在圆圈内。

我试过下面的代码来画一个圆圈：

```
GeoPoint point = new GeoPoint((int) lattitude,

                            (int) longitude);

@Override
   public void draw(Canvas canvas, MapView mapView, boolean shadow) {

              paint1 = new Paint();
              paint1.setARGB(128,0 , 0, 250);
              paint1.setStrokeWidth(2);
              paint1.setStrokeCap(Paint.Cap.ROUND);
              paint1.setAntiAlias(true);
              paint1.setDither(false);  
              paint1.setStyle(Paint.Style.FILL);
              paint1.setColor(Color.argb(128, 250, 135, 143));

              this.radius = 5000;

              Point pt = mapView.getProjection().toPixels(point, null);
              float projectedRadius =    mapView.getProjection().metersToEquatorPixels(radius);

              canvas.drawCircle(pt.x, pt.y, projectedRadius, paint1);

   } 
```

我可以在提供的纬度和经度上使用上面的代码绘制一个圆圈，但找不到在圆圈内绘制 .png 图像的方法。所以想法是在地图视图上提供的纬度和经度上绘制带有.png图像的圆圈。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:34:03.673

就个人而言，我会先想象一下 png-in-circle 的样子，然后从中制作一个图像。如，用你想在其中显示的 png 制作一个圆圈的 png 图像。然后，只需在所需的纬度/经度处放置一个叠加层。[请参阅本资源](https://developers.google.com/maps/documentation/android/v1/hello-mapview)的第 2 部分。

# lua - 使用此 Lua 脚本将 2 个变量的内容写入 2 行文件

> ID：14825926
> 
> 赞同：1
> 
> 时间：2013-02-12T05:22:15.820
> 
> 标签：lua

在 Lua 脚本中，我有 2 个变量（var1 和 var2），每个变量都包含表中的值。

```
 local var2 = (table.concat(itmes_A, " "))
    local var3 = (table.concat(items_B, " ")) 
```

我需要用 2 行编写一个文件。var1 的第一行，var2 的第二行。

目前我的 Lua 代码在一行上写入文件（var1_2.txt）。代码如下：

```
 local communicatorFile
        communicatorFile = "D:\\Windows\\temp\\var1_2.txt"
        local createFile = assert(io.open(communicatorFile,"w+"))
        createFile:write(var2)
        createFile:write(var3)
        createFile:close() 
```

需要什么才能将变量分别放在一行上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:02:52.560

改变

```
createFile:write(var2)
createFile:write(var3) 
```

与他们有一个换行符。

```
createFile:write(var2.."\r\n")
createFile:write(var3) 
```

请注意，您可以只使用`\n`而不是`\r\n`; 但是您的记事本不会将其识别为换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:13:16.087

插入`createFile:write('\r\n')`

# mysql - SQL 查询 - 从多个表中添加总金额

> ID：14825927
> 
> 赞同：2
> 
> 时间：2013-02-12T05:22:15.523
> 
> 标签：mysql, sql, navicat

我正在为客户开发一个项目，需要 3 个不同表中 3 个不同列的总和，这些表的状态为“已清除”。

这三个表是（例如）：

**付款1**

```
ID | Amount | Status  
1  | 200    | Cleared 
```

**付款2**

```
ID | Amount | Status              
1  | 100    | Cleared 
```

**付款3**

```
ID | Amount | Status  
1  | 300    | Cleared 
```

我提出了以下代码，它基本上完成了我想要实现的目标，但是正在处理的值被乘以三（当从多个表中添加值时）。

```
SELECT SUM(CASE WHEN P1.`Status` = "Cleared" THEN P1.Amount ELSE 0 END) 
     + SUM(CASE WHEN P2.`Status` = "Cleared" THEN P2.Amount ELSE 0 END)
     + SUM(CASE WHEN P3.`Status` = "Cleared" THEN P3.Amount ELSE 0 END) AS ClearedFunds
FROM PAYMENT1 As P1, 
     PAYMENT2 As P2, 
     PAYMENT3 As P3 ; 
```

上面的查询将返回（从给出的示例中）：1800 而不是预期的结果 600。

谁能找出问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:58:00.040

```
SELECT  ID, SUM(Amount) totalAmount
FROM
    (
        SELECT  ID, Amount
        FROM    payment1
        WHERE   Status = 'Cleared'
        UNION ALL
        SELECT  ID, Amount
        FROM    payment2
        WHERE   Status = 'Cleared'
        UNION ALL
        SELECT  ID, Amount
        FROM    payment3
        WHERE   Status = 'Cleared'
    ) s
GROUP   BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:25:38.040

您可以将 union all 与三个选择查询一起使用以将结果作为单个表获取，然后使用 sum 聚合函数获取清除状态的金额的总和。

# streaming - 使用 wsgi 的龙卷风的无缓冲输出

> ID：14825933
> 
> 赞同：0
> 
> 时间：2013-02-12T05:22:55.987
> 
> 标签：streaming, tornado, wsgi

我创建了小型 django 项目来服务音乐。一切都通过 django，甚至是流媒体部分（项目真的很小，最多 2-3 个用户）。

我现在想让项目独立，所以我使用 tornado 作为网络服务器。我正在使用以下内容：

```
os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'
wsgi_app = tornado.wsgi.WSGIContainer(
    django.core.handlers.wsgi.WSGIHandler())

tornado_app = tornado.web.Application([
    (r'/static/(.*)', tornado.web.StaticFileHandler, {'path': STATIC_DIR}),
    (r'.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),
])
server = tornado.httpserver.HTTPServer(tornado_app)                                                                                                      
server.listen(8888)
tornado.ioloop.IOLoop.instance().start() 
```

虽然 Tornado 似乎缓冲了输出，因此无法播放流媒体音乐。有没有办法改变这种行为？或者 python 中是否有另一个网络服务器可以同时为 wsgi 应用程序和静态文件提供服务？

编辑：经过一些研究，我得出结论，问题很可能在于`WSGIContainer`. 似乎在响应[的定义中`WSGIContainer`](https://github.com/facebook/tornado/blob/9df23246564a8c8f53904fcf02f84000c9eeec77/tornado/wsgi.py#L233)被读入缓冲区，然后写入客户端。因此，与其在原版的基础上滚动我自己`WSGIContainer`的，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:34:35.240

从[这个问题](https://github.com/facebook/tornado/issues/301)来看，tornado 似乎不是我需要的合适服务器。我可能会使用开箱即用的 CherryPy。

# javascript - 连接两个变量并作为 URL 传递给 ajax 调用

> ID：14825935
> 
> 赞同：-5
> 
> 时间：2013-02-12T05:22:59.593
> 
> 标签：javascript, html, ajax

我有一个名为 domainname.xml 的文件和许多其他 html 文件。我从该文件中获取了“x”的值。

现在我需要将'y'与它连接起来并作为一个URL传递给一个ajax调用......

那是我的特殊需要家伙！

```
Var x=http://www.xyzftp/myservice/service1.svc

Var y=/logincheck 
```

现在我需要连接这两个并将其作为 URL 传递给 ajax 调用！

我已经问过一个类似的问题，但我无法将它作为 ajax 调用的 url 传递..

**我的尝试：**

```
var x='http://www.xyzftp/myservice/service1.svc';
var y='/logincheck';

var z = x + y;     

 "http://www.xyzftp/myservice/service1.svc/logincheck"

var z = x.concat(y);

"http://www.xyzftp/myservice/service1.svc/logincheck" 
```

我的问题是我无法将它作为 ajax 调用的 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:28:49.897

试试这个 ：

```
var x="http://www.example.com/";
var y="test/test";
var url=x+y; 
```

现在把这个网址放在ajax上：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:26:27.947

包括[jquery](http://api.jquery.com/jQuery.ajax/)和使用

```
$.ajax({url: x+y}); 
```

# mysql - mysql左连接列重组

> ID：14825941
> 
> 赞同：0
> 
> 时间：2013-02-12T05:23:42.790
> 
> 标签：mysql, sql, database, join

我有一个名为的表`application_user`，其中有一个名为`id`. 另一个名为的表`voucher_info`，其中有一个名为 的字段`maker_id`。现在我想使用带有表`LEFT JOIN`的表？但是会显示此错误：`application_user``voucher_info``maker_id``id`

```
Error Code: 1054
            Unknown column 'application_user.id' in 'on clause' 
```

任何人都可以请帮我吗？下面是我的代码：

```
LEFT JOIN application_user AS maker
    ON(voucher_info.maker_id = application_user.id) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:28:34.763

将其更改为

```
ON (voucher_info.maker_id = maker.id) 
```

为表设置别名后，您只能通过别名引用它。

# android - setAllowUniversalAccessFromFileURLs?

> ID：14825943
> 
> 赞同：3
> 
> 时间：2013-02-12T05:23:51.323
> 
> 标签：android, android-webview

我的问题是我运行 android 应用程序并显示下面给出的错误日志。如何解决它。

```
public class SeoShopTest extends Activity {

    WebView myWebView;
    TextView mDisplay;
    AsyncTask<Void, Void, Void> mRegisterTask;
    String Message;
    String deviceId;
    String regId;
    IntentFilter gcmFilter;
    SharedPreferences sharedPref;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        checkNotNull(SERVER_URL, "https://android.googleapis.com/gcm/send");
        checkNotNull(SENDER_ID, "201519466560");

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        setContentView(R.layout.activity_seo_shop_test);

        myWebView = (WebView) findViewById(R.id.web);

        gcmFilter = new IntentFilter();
        gcmFilter.addAction("GCM_RECEIVED_ACTION");

        sharedPref = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
        String CheckTokenId = sharedPref.getString(
                getResources().getString(R.string.token_id), "");
        String CheckShopId = sharedPref.getString("shop_id", "");

        Log.v("log", " check TokenID" + CheckTokenId + "  check Shop id "
                + CheckShopId);

        if ((!CheckTokenId.equals("")) && (!CheckShopId.equals(""))) {
            Log.v("log",
                    "  lhl hklkh lkh ll  : : :  shopId and TokenId Get IT ");
            Intent i = new Intent(SeoShopTest.this, devicephp.class);
            i.putExtra("tokenId", CheckTokenId);
            i.putExtra("shop_id", CheckShopId);
            i.putExtra("app_var", "1");
            startActivity(i);
        }

        final JavaScriptInterface myJavaScriptInterface = new JavaScriptInterface(
                this);
        myWebView.addJavascriptInterface(myJavaScriptInterface,
                "AndroidFunction");

        // mDisplay = (TextView) findViewById(R.id.display);
        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                DISPLAY_MESSAGE_ACTION));
        regId = GCMRegistrar.getRegistrationId(SeoShopTest.this);

        WebSettings settings = myWebView.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setDatabaseEnabled(true);
        settings.setDomStorageEnabled(true);
        settings.setAllowFileAccess(true);
        settings.setBuiltInZoomControls(true);
        settings.setUseWideViewPort(true);
        settings.setJavaScriptCanOpenWindowsAutomatically(true);
        settings.setLoadWithOverviewMode(true);
        myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        //settings.setAllowUniversalAccessFromFileURLs(true);

         myWebView.setWebViewClient(new WebViewClient() {  
               public boolean shouldOverrideUrlLoading(WebView view, String url)  {                  

                            //handle stuff here 
                            //e.g. view.loadUrl(url);   
                   Log.v("log"," on ovverRide " + url);
                            return true;    
                        }

                        public void onPageFinished(WebView view, String url) {
                            //dismiss the indeterminate progress dialog
                            Log.v("log", "onPageFinished: " + url);
                            myWebView.setEnabled(false);

                        } 
                    });

        myWebView.loadUrl("file:///android_asset/www/index.html");

        if (regId.equals("")) {
            // Automatically registers application on startup.
            Log.v("log", " sender ID" + SENDER_ID);
            GCMRegistrar.register(this, SENDER_ID);

            regId = GCMRegistrar.getRegistrationId(SeoShopTest.this);

            Log.v("log", " re register main if " + regId);
        } else {
            Log.v("log", " re register main else " + regId);

            // Device is already registered on GCM, needs to check if it is
            // registered on our server as well.
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                // Skips registration.
                // mDisplay.append("already_registered" + "\n");
            } else {
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        boolean registered = ServerUtilities.register(context,
                                regId);

                        if (!registered) {
                            GCMRegistrar.unregister(context);
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        mRegisterTask = null;
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        }

    }

    private void SavePreferences(String key, String value) {
        sharedPref = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
        SharedPreferences.Editor editor = sharedPref.edit();
        editor.putString(key, value);
        editor.commit();
    }

    public class JavaScriptInterface {
        Context mContext;

        JavaScriptInterface(Context c) {
            mContext = c;
        }

        public void showToast(String shopId) {

            sharedPref = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());
            String token_new_ID = sharedPref.getString(getResources()
                    .getString(R.string.token_id), "");

            Log.v("log", "tokenNEWID " + token_new_ID + " shoipdi  " + shopId);

            if ((!shopId.equals("")) && (token_new_ID.equals(""))) {

                SavePreferences("shop_id", shopId);

                Intent i = new Intent(SeoShopTest.this, LoginCompleteUrl.class);
                i.putExtra("shopId", shopId);
                startActivity(i);
            } else if ((!token_new_ID.equals("")) && (!shopId.equals(""))) {

                Log.v("log", "shop id else if " + shopId);
                SavePreferences("shop_id", shopId);
                Intent i = new Intent(SeoShopTest.this, devicephp.class);
                i.putExtra("tokenId", token_new_ID);
                i.putExtra("shop_id", shopId);
                startActivity(i);
            } else {
                Log.v("log", " else token  " + token_new_ID);

            }

        }

        public void MainUrl(String url) {
            Log.v("log"," login main url " + url);

            String url_new = "http://"+url;
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url_new));
            startActivity(i);

        }

    }

    @Override
    protected void onDestroy() {
        if (mRegisterTask != null) {
            mRegisterTask.cancel(true);
        }
        unregisterReceiver(mHandleMessageReceiver);
        GCMRegistrar.onDestroy(this);
        super.onDestroy();
    }

    private void checkNotNull(Object reference, String name) {
        if (reference == null) {
            throw new NullPointerException(
                    "Please set the %1$s constant and recompile the app.");
        }
    }

    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // String newMessage = intent.getExtras().getString("message");
            String GcmMessage = intent.getExtras().getString("message");
            int GcmId = intent.getExtras().getInt("id");
            String GCmType = intent.getExtras().getString("type");

            Log.v("log", " new Message from server GsmMessage " + GcmMessage
                    + " id" + GcmId + "type " + GCmType);

            // mDisplay.append(newMessage + "\n");
        }
    };

} 
```

我的错误如下：

```
02-12 10:37:14.629: ERROR/AndroidRuntime(330): FATAL EXCEPTION: main
    02-12 10:37:14.629: ERROR/AndroidRuntime(330): java.lang.NoSuchMethodError: android.webkit.WebSettings.setAllowUniversalAccessFromFileURLs
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at com.example.seoshoptest.SeoShopTest.onCreate(SeoShopTest.java:93)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.os.Handler.dispatchMessage(Handler.java:99)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.os.Looper.loop(Looper.java:123)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invokeNative(Native Method)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at java.lang.reflect.Method.invoke(Method.java:521)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    02-12 10:37:14.629: ERROR/AndroidRuntime(330):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T05:31:51.717

它崩溃的原因是您可能没有在 API 级别 16 或更高的设备上运行。

从官方网站[这里](http://developer.android.com/reference/android/webkit/WebSettings.html)你可以看到方法`getAllowUniversalAccessFromFileURLs`是在 API 级别 16 之后添加的。所以你会

> 公共抽象布尔 getAllowUniversalAccessFromFileURLs ()
> 
> 在 API 级别 16 中添加 获取在文件方案 URL 的上下文中运行的 JavaScript 是否可以访问来自任何来源的内容。这包括从其他文件方案 URL 访问内容。
> 
> 返回在文件方案 URL 的上下文中运行的 JavaScript 是否可以访问来自任何来源的内容 另请参见 setAllowUniversalAccessFromFileURLs(boolean)

所以要访问这个你应该写下面的代码：

```
if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN) {
        super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true);
} 
```

# c# - 替换字符串中最后一次出现的单词 - C#

> ID：14825949
> 
> 赞同：99
> 
> 时间：2013-02-12T05:24:14.927
> 
> 标签：c#, asp.net

我有一个问题，我需要替换字符串中最后一次出现的单词。

**情况：**我得到一个格式如下的字符串：

```
string filePath ="F:/jan11/MFrame/Templates/feb11"; 
```

然后我像这样替换`TnaName`：

```
filePath = filePath.Replace(TnaName, ""); // feb11 is TnaName 
```

这行得通，但是当`TnaName`与我的`folder name`. 当发生这种情况时，我最终会得到一个这样的字符串：

```
F:/feb11/MFrame/Templates/feb11 
```

现在它已经替换了两个出现的`TnaName`with `feb11`。有没有办法可以只替换字符串中最后一次出现的单词？

**注意：`feb11`是`TnaName`来自另一个进程 - 这不是问题。**

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-02-12T05:33:17.057

这是替换最后一次出现的字符串的函数

```
public static string ReplaceLastOccurrence(string Source, string Find, string Replace)
{
        int place = Source.LastIndexOf(Find);

        if(place == -1)
           return Source;

        string result = Source.Remove(place, Find.Length).Insert(place, Replace);
        return result;
} 
```

*   `Source`是您要对其执行操作的字符串。
*   `Find`是要替换的字符串。
*   `Replace`是您要替换它的字符串。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-12T05:28:57.530

用于`string.LastIndexOf()`查找字符串最后一次出现的索引，然后使用 substring 查找您的解决方案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-12T05:33:59.037

您必须手动进行替换：

```
int i = filePath.LastIndexOf(TnaName);
if (i >= 0)
    filePath = filePath.Substring(0, i) + filePath.Substring(i + TnaName.Length); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-25T21:28:22.133

我不明白为什么不能使用 Regex：

```
public static string RegexReplace(this string source, string pattern, string replacement)
{
  return Regex.Replace(source,pattern, replacement);
}

public static string ReplaceEnd(this string source, string value, string replacement)
{
  return RegexReplace(source, $"{value}$", replacement);
}

public static string RemoveEnd(this string source, string value)
{
  return ReplaceEnd(source, value, string.Empty);
} 
```

用法：

```
string filePath ="F:/feb11/MFrame/Templates/feb11";
filePath = filePath.RemoveEnd("feb11"); // F:/feb11/MFrame/Templates/
filePath = filePath.ReplaceEnd("feb11","jan11"); // F:/feb11/MFrame/Templates/jan11 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-12T15:09:02.610

使用一行代码可以更简单地实现该解决方案：

```
 static string ReplaceLastOccurrence(string str, string toReplace, string replacement)
    {
        return Regex.Replace(str, $@"^(.*){Regex.Escape(toReplace)}(.*?)$", $"$1{Regex.Escape(replacement)}$2");
    } 
```

因此，我们利用了正则表达式星号运算符的贪婪性。该函数的使用如下：

```
var s = "F:/feb11/MFrame/Templates/feb11";
var tnaName = "feb11";
var r = ReplaceLastOccurrence(s,tnaName, string.Empty); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T05:37:42.517

您可以使用命名空间中的`Path`类`System.IO`：

```
string filePath = "F:/jan11/MFrame/Templates/feb11";

Console.WriteLine(System.IO.Path.GetDirectoryName(filePath)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-16T12:32:00.877

以下内容不会`TnaName`在路径/字符串中替换，而是在不`TnaName`包含的情况下返回它：

```
var lastIndex = filePath.LastIndexOf(TnaName); // get position of TnaName

filePath = filePath.Substring(0, lastIndex); // get path till position of TnaName 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-01T16:15:35.277

以下函数在模式（要替换的单词）最后出现的位置拆分字符串。
然后它使用替换字符串（在字符串的后半部分）更改模式。
最后，它再次将两个半字符串连接起来。

```
using System.Text.RegularExpressions;

public string ReplaceLastOccurance(string source, string pattern, string replacement)
{
   int splitStartIndex = source.LastIndexOf(pattern, StringComparison.OrdinalIgnoreCase);
   string firstHalf = source.Substring(0, splitStartIndex);
   string secondHalf = source.Substring(splitStartIndex, source.Length - splitStartIndex);
   secondHalf = Regex.Replace(secondHalf, pattern, replacement, RegexOptions.IgnoreCase);

   return firstHalf + secondHalf;
} 
```

# c# - 委托可以指向多个方法吗？

> ID：14825950
> 
> 赞同：0
> 
> 时间：2013-02-12T05:24:33.967
> 
> 标签：c#, delegates

各位程序员，大家好，我正在学习委托。在我的书中，作者声称此方法将打印出委托对象维护的方法的名称以及定义该方法的类的名称。

```
static void DisplayDelegateInfo(Delegate delObj)
{
 foreach (Delegate d in delObj.GetInvocationList())
{
 Console.WriteLine("Method Name: {0}", d.Method);
 Console.WriteLine("Type Name: {0}", d.Target);
}
} 
```

该方法正在以这种方式使用。

```
static void Main(string[] args)
{
 Console.WriteLine("***** Simple Delegate Example *****\n");
 SimpleMath m = new SimpleMath();
 BinaryOp b = new BinaryOp(m.Add);
 DisplayDelegateInfo(b);
 Console.WriteLine("10 + 10 is {0}", b(10, 10));
 Console.ReadLine();
} 
```

我的问题是，如果 DisplayDelegateInfo() 循环遍历 delObj 调用列表，在这种情况下，我会在数组中看到多个项目吗？这本书似乎没有给出这个例子，任何人都可以修改 main() 方法以在这个数组中显示多个项目吗？

感谢任何输入，谢谢，Leo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:28:01.647

```
static void Main(string[] args)
{
 Console.WriteLine("***** Simple Delegate Example *****\n");
 SimpleMath m = new SimpleMath();
 BinaryOp b = new BinaryOp(m.Add);

 // bellow 'b +=' is short for b = b + 
 b += m.Add1; // Add1 same type (signature really) as method Add

 DisplayDelegateInfo(b);
 Console.WriteLine("10 + 10 is {0}", b(10, 10));
 Console.ReadLine();
} 
```

复制`Add`类主体中的现有方法`SimpleMath`并将其重命名为`Add1`，以使其工作。这称为多播委托，这是[`short example`](http://msdn.microsoft.com/en-us/library/ms173175%28v=vs.80%29.aspx)可用的 .NET C# 实现和操作。

Add 将保留在委托中，而 Add1 将附加到委托维护的内部列表（FIFO 队列）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:41:32.730

MultiCastDelegate 是一个派生自委托的类，可以容纳多个委托。[MSDN](http://msdn.microsoft.com/en-us/library/system.multicastdelegate.aspx)有一个完整的工作示例。

# jquery - 在初始化 jQuery 图像滑块时显示加载器

> ID：14825956
> 
> 赞同：2
> 
> 时间：2013-02-12T05:25:04.117
> 
> 标签：jquery, image, slider, loader

嗨，我已经使用[这个美妙的 jQuery 滑块](http://bqworks.com/products/advanced-slider/responsive.html)构建了一个大型图片库，考虑到我包含的幻灯片数量，初始加载时间很长，我想知道是否有一种简单的方法可以让我集成基本加载动画 div - 例如。带有“正在加载画廊..”文本的微调器 - 滑块完全加载后隐藏？我很好奇是否有办法让我指示 DOM 首先显示加载 div，并可能使用滑块的回调函数之一——或通过 jQuery（？）——在完全初始化时拉出 div？最终，我希望在脚本、标记和缩略图加载到浏览器中的 5-10 秒内向用户显示一些内容（我正在使用延迟加载功能，所以它

感谢您在这里的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:33:18.210

您可以按以下方式进行操作，但请记住它未经测试。

**js**

```
$(window).load(function(){
   // initialize slider.
   // remove loading_image image as below
   $('img#loading_image').remove();
});
```

**HTML**

```
<div><img src="loading.jpg" alt="" id="loading_image" /></div>
<div><img src="image.jpg" class="hide" alt="" /></div>
<div><img src="image.jpg" class="hide" alt="" /></div>
<div><img src="image.jpg" class="hide" alt="" /></div>
<div><img src="image.jpg" class="hide" alt="" /></div>
```

**CSS**

```
#loading_image { display: block; other css code. }
.hide { display: none; }
```

希望这将有助于此代码的作用，直到页面完全加载，它将隐藏除加载图像之外的所有滑块图像，并且一旦页面完全加载了所有图像，它将按您的需要工作。

# php - PHP 包含函数

> ID：14825960
> 
> 赞同：0
> 
> 时间：2013-02-12T05:25:18.483
> 
> 标签：php, arrays, include

嗨，当我包含一个文件并使用包含文件中的数组变量到当前文件中时，我得到了错误的值。（即）我在 rate.php 文件中有一个数组。我将（rate.php）包含在我当前的文件（Bankrate.php）中。我需要访问 bankrate.php 文件中的数组（$commodities_arr）。当我单独运行 rate.php 文件时，我可以获得预期的答案。但是当我包含到 bankrate.php 并使用 $commodities_arr 时，它给出了错误的答案。但它包括没有错误。

这是我包含的文件（rate.php）

```
 <?php 
    $commodities_arr = array();
    $result_set = "myquery";
    while($row = mysql_fetch_array($result_set)) {
        $selling_rate = '';
        $buying_rate = '';
    if($row['com_sel_active']==1 || $row['com_buy_active']==1) {
if($row['com_type']==0){
.
.
.
$selling_rate = $selling_con * $row['com_weight'];
.
.
.
$buying_rate = $buying_rate * $row['com_weight'];
}
}
}
    .....
    .....
    ........
    for(...){
       $commodities_arr['buying_rate'][$row['com_id']] = (int)$buying_rate;
       $commodities_arr['selling_rate'][$row['com_id']] = (int)$selling_rate;
    }
    ?> 
```

我的正常文件看起来像(Bankrate.php) $commodities_arr = '';

```
$filename = "../rate.php";
require($filename);
echo "<pre>";
print_r($commodities_arr);
echo "</pre>"; 
```

当我在其中打印数组时，`rate.php`它会显示我的期望。（IE）

```
Array ( 
   [buying_rate] => Array ( [1] => 29625 [6] => 29625 ) 
   [selling_rate] => Array ( [1] => 33617 [6] => 33617 )
) 
```

但是当我在 Bankrate.php 中显示时，它没有显示预期的答案。

```
Array
(
    [buying_rate] => Array
        (
            [1] => 0
            [6] => 0
        )

    [selling_rate] => Array
        (
            [1] => 0
            [6] => 0
        )    
) 
```

# git - git stash 无法刷新，如何只弹出一些文件

> ID：14825965
> 
> 赞同：5
> 
> 时间：2013-02-12T05:25:35.533
> 
> 标签：git

我已经隐藏了我的更改以执行 git pull，但现在我无法将更改从我的存储中弹出。它看起来像这样：

```
dave@apollo % git stash pop 
sites/all/themes/foobar122/node--pin.tpl.php: needs merge
unable to refresh index

dave@apollo % git stash show  
 .htaccess                                            | 10 +++++-----
 phpinfo.php                                          |  4 +++-
 sites/all/modules/ajax_comments/ajax_comments.module |  6 +++---
 sites/all/themes/foobar122/node--pin.tpl.php         | 14 +++++++-------
 4 files changed, 18 insertions(+), 16 deletions(-) 
```

有人可以简单地解释一下我如何在恢复对没有冲突的文件的更改时恢复冲突文件（接受他们的副本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:32:52.647

从下面的链接。

> 该消息仅表示您有未完成的更改。你也会得到这个，例如，如果你`stage`对 进行了一些更改`git add`，然后改变你的想法并做`git reset HEAD`文件以重新开始。

1.  [git-says-a-file-needs-update 是什么意思](https://stackoverflow.com/questions/2660977/what-does-it-mean-when-git-says-a-file-needs-update)
2.  [需求更新](https://git.wiki.kernel.org/index.php/GitFaq#.22needs_update.22_and_.22not_uptodate.22)

# python - 尝试通过python启动应用程序

> ID：14825970
> 
> 赞同：-1
> 
> 时间：2013-02-12T05:25:58.483
> 
> 标签：python

我正在尝试通过 python 启动一个应用程序。我有这个问题可以给我一个解决方案吗？

```
path1= "C:\\Program Files (x86)\\XYZ\\NX2\\RT900"

ver="7.50 Internal Release"

path2="bin\\Rt900.exe"

path3=os.path.join(path1,ver)

path4=os.path.join(path3,path2)

App.open("path4") 
```

谁能告诉我上面的陈述有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:27:24.017

你应该`path1`加入`path2`不`ver`

```
path3 = os.path.join(path1, path2) 
```

你在`path4=os.path.join(path3,path4)`这里做`path4`的也是在分配之前使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:29:35.750

正如 avasal 所提到的，您应该正确连接路径：

```
path3 = os.path.join(path1, path2) 
```

看起来您还需要像这样打开路径：

```
App.open(path3) 
```

注意最后一行没有引号。

编辑：

看到您不断更改问题中的代码，我注意到您的代码中存在另一个错误：

```
path4=os.path.join(path3,path4) 
```

此行将始终记录您尝试加入的变量，该变量甚至还不存在。一个变量在第一次被赋值时不能引用它自己。在这种情况下，您正在做`os.path.join(path3, path4)`但`path4`还不存在！

# mysql - 组合两个表的输出具有相同的结构

> ID：14825971
> 
> 赞同：0
> 
> 时间：2013-02-12T05:26:02.777
> 
> 标签：mysql, sql

我确实有两张桌子和员工

```
Stuff
ID   F_Name   L_Name
1    Charles  Nilson
2    Bell      Steve

employee
ID   F_Name   L_Name
231  Andy      natalie
622  Mego      Rob
127  Roberto   Bell 
```

我想将它们显示如下

```
Stuff_employee
ID   F_Name    L_Name
1    Charles   Nilson
2    Bell      Steve
231  Andy      natalie
622  Mego      Rob
127  Roberto   Bell 
```

有谁知道如何做到这一点？您的建议或想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:28:31.620

```
SELECT *
FROM `Stuff`
UNION ALL
SELECT *
FROM `employee` 
```

阅读更多关于[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:27:31.863

```
SELECT * FROM Stuff UNION ALL SELECT * FROM employee 
```

# oracle11g - 如何以 oracle 形式部署 java bean？

> ID：14825972
> 
> 赞同：1
> 
> 时间：2013-02-12T05:26:05.160
> 
> 标签：oracle11g, javabeans, oracleforms

我正在使用 Oracle 11g 表单开发人员。我只想知道在 Oracle 表单中部署 java bean 的过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:32:22.120

oracle 提供了很多很好的文档，我为您找到了 2 个链接 1 详细说明了如何创建 javabean 以及要扩展和覆盖哪些类。还有 1 个链接，其中包含许多您可以下载的示例。

希望这可以帮助您创建您的第一个 bean。

链接1： http://www.oracle.com/technetwork/developer-tools/forms/documentation/269054-130573.pdf 链接2： [http](http://www.oracle.com/technetwork/developer-tools/forms/documentation/269054-130573.pdf) : [//forms.pjc.bean.over-blog.com/](http://forms.pjc.bean.over-blog.com/)

# android - 4.1 或 4.2 果冻豆中的 SDCARD 问题

> ID：14825973
> 
> 赞同：0
> 
> 时间：2013-02-12T05:26:15.053
> 
> 标签：android

谁能帮我解决这个问题，看起来很简单，但我找不到任何有用的解决方案。

我收到此错误：

> 02-12 13:12:51.720：E/错误：（532）：/sdcard/mounted/LCPROD.xml：打开失败：EACCES（权限被拒绝）

当我尝试在其中运行我的代码时，`emulator 4.1`或者`4.2`我总是收到错误，但它在版本`4.0`及以下版本中运行良好。

顺便说一句，我已经在 中添加了读写权限`manifest`，它仍然不起作用。

在此先感谢，我是android开发的新手:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:41:07.763

请查看您是否为模拟器创建了 SDCARD。

打开 AVD 并为 4.0 创建一个新的模拟器，并确保填写以下面板

![检查这个](../Images/d55b2fa09454ad34288a7e85687d9f2f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:35:26.530

该文件`mounted/LCPROD.xml`是否在您设备的此路径中可用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:15:41.323

请参阅在清单上添加权限。

# c++ - 如何在 C++/visualc++ for windows7 中控制主音量

> ID：14825975
> 
> 赞同：-1
> 
> 时间：2013-02-12T05:26:20.090
> 
> 标签：c++, visual-c++, windows-7

我想在 C++/VisualC++ 中为 windows7/vista 控制主音量吗？任何建议请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:04:52.597

如果您的意思是您想控制计算机中的声音，这里有一个有用的链接。[http://msdn.microsoft.com/en-us/library/bb331828(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb331828(VS.85).aspx)

希望这可以帮助。

# php - Wordpress 永久链接永远不会在 localhost Ubuntu 12.10 上运行

> ID：14825980
> 
> 赞同：5
> 
> 时间：2013-02-12T05:26:35.883
> 
> 标签：php, wordpress, permalinks, ubuntu-12.10

除了默认设置外，Wordpress 永久链接不起作用。如何启用此重写？我试过了：

```
sudo a2enmod rewrite

sudo service apache2 restart 
```

永久链接保存到 /localhost/wordpress 中的 .htaccess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule>

# END WordPress 
```

我复制到 root /var/www 只是为了尝试，它没有任何区别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T15:36:48.070

我也尝试过 AllowOverwride All，但它在错误的配置文件中并且它坏了。（将其添加到的正确文件是/etc/apache2/sites-available/default）[这](http://mixeduperic.com/ubuntu/5-simple-steps-to-configure-wordpress-to-use-permalinks-on-an-ubuntu-server.html)对我来说有解决方案。

**13.10 更新**

在新安装时，我得到了它如上所述的工作，但有以下更改：

而不是像他们描述的那样编辑 /etc/apache2/sites-available/default ，您必须使用：

`sudo gedit /etc/apache2/sites-available/000-default.conf`

并在该行之后添加以下内容`DocumentRoot /var/www`：

```
<Directory /var/www>
AllowOverride All
</Directory> 
```

如教程所述，运行`sudo a2enmod rewrite`

设置 /var/www/.htaccess 文件，然后运行：

```
sudo chmod 664 /var/www/.htaccess

sudo chown www-data:www-data /var/www/.htaccess 
```

并重新启动`sudo service apache2 restart`

# php - 减小cakephp中文本框的大小

> ID：14825982
> 
> 赞同：0
> 
> 时间：2013-02-12T05:26:51.090
> 
> 标签：php, html, cakephp

嗨，我想在我的网站中放置一个文本框以进行搜索操作。但是当我只使用代码打印文本框时，文本框覆盖了整个页面。我的要求是在页面右侧获取文本框，并且文本框的大小必须非常小。

这是我试过的，

```
 <div align="right">
  <?php echo $this->Form->create('Post') ?>
  <?php echo $this->Form->input('Search',array('type'=>'text','maxlength'=>'8')) ?>
  </div> 
```

谁能帮我吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:38:38.700

您可以添加`style`到您的文本框中，例如：

```
 echo $this->Form->input('Search',array('type'=>'text','maxlength'=>'8','style'=>'width:50px; height:20px;')); 
```

另一种方法是使用`size`文本框的属性。

```
echo $this->Form->input('Search',array('type'=>'text','maxlength'=>'8','size'=>'8')); 
```

# memory-management - 管理 Map iOS 上的内存分配问题

> ID：14825983
> 
> 赞同：1
> 
> 时间：2013-02-12T05:26:55.700
> 
> 标签：memory-management, ios6, annotations, mkmapview

在我的 iPhone 应用程序中，我有一个地图视图。在此，我显示了许多 pin 视图取决于来自 Web 服务器的数据。这是我使用的方法。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    NSString *identifier = @"myPin";
    self.pinView = (MKPinAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (self.pinView == nil) {
        self.pinView= [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier]autorelease];     //11.1%
    } else {
        self.pinView.annotation = annotation;
    }
    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];  //20.4%
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    self.pinView.rightCalloutAccessoryView = rightButton;   //2.7%

    MyAnnotation *annot = (MyAnnotation*)annotation;

    UIImageView *egoimageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"defaultPerson"]];    //17.5%
    NSString *imageUrl = [NSString stringWithFormat:@"%@%@", CommonImageURL, [friendsProfileImageArray objectAtIndex:annot.tag]];     //9.4%

    if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
        ([UIScreen mainScreen].scale == 2.0)) {
        // Retina display
        [egoimageView setImageWithURL:[NSURL URLWithString:imageUrl] placeholderImage:[UIImage imageNamed:@"defaultPerson@2x.png"]];    //2.6%

        egoimageView.image = [UIImage imageWithCGImage:egoimageView.image.CGImage scale:egoimageView.image.size.width/25 orientation:egoimageView.image.imageOrientation];
    } else {
        // non-Retina display
        [egoimageView setImageWithURL:[NSURL URLWithString:imageUrl] placeholderImage:[UIImage imageNamed:@"defaultPerson.png"]];    //14.6%

        egoimageView.image = [UIImage imageWithCGImage:egoimageView.image.CGImage scale:egoimageView.image.size.width/25 orientation:egoimageView.image.imageOrientation];   //1.6%
    }

    [egoimageView sizeToFit];
    self.pinView.leftCalloutAccessoryView = egoimageView;    //3.1%
    [egoimageView release];
    self.pinView.canShowCallout=YES;
    self.pinView.animatesDrop=YES;

    //pin color based on status.....
    if ([annot.relationshipStatus intValue]==2 )
        self.pinView.pinColor=MKPinAnnotationColorGreen;
    else
        self.pinView.pinColor=MKPinAnnotationColorPurple;    //17.1%

    return self.pinView;
} 
```

在这我已经提到了内存分配的百分比。如果我不断加载地图，总内存使用量会增加，应用程序会崩溃。我该如何正确解决这个问题？我试图修复它，但我不知道我还能做些什么。

请帮助，提前谢谢。

# c - 在 C 中运行时生成函数

> ID：14825986
> 
> 赞同：3
> 
> 时间：2013-02-12T05:26:59.347
> 
> 标签：c, function, function-pointers, jit, dynamically-generated

我想在运行时在 C 中生成一个函数。我的意思是我本质上想分配一些内存，指向它并通过函数指针执行它。我意识到这是一个非常复杂的话题，我的问题很幼稚。我也意识到有一些非常强大的库可以做到这一点（例如[nanojit](https://developer.mozilla.org/en-US/docs/Nanojit)）。

但我想学习这项技术，从基础开始。有知识的人可以给我一个非常简单的C示例吗？

**编辑：** *下面的答案很好，但这里是 Windows 的相同示例：*

```
#include <Windows.h>

#define MEMSIZE 100*1024*1024
typedef void (*func_t)(void);

int main() {

    HANDLE proc = GetCurrentProcess();
    LPVOID p = VirtualAlloc(
        NULL,
        MEMSIZE,
        MEM_RESERVE|MEM_COMMIT,
        PAGE_EXECUTE_READWRITE);

    func_t func = (func_t)p;
    PDWORD code = (PDWORD)p;
    code[0] = 0xC3; // ret

    if(FlushInstructionCache(
        proc,
        NULL,
        0))
    {
        func();
    }

    CloseHandle(proc);
    VirtualFree(p, 0, MEM_RELEASE);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:13:23.637

正如其他海报之前所说，您需要非常了解您的平台。

忽略将对象指针转换为函数指针的问题，从技术上讲，UB，这是一个适用于 x86/x64 OS X（也可能是 Linux）的示例。所有生成的代码都会返回给调用者。

```
#include <unistd.h>
#include <sys/mman.h>

typedef void (*func_t)(void);

int main() {
    /*
     * Get a RWX bit of memory.
     * We can't just use malloc because the memory it returns might not
     * be executable.
     */
    unsigned char *code = mmap(NULL, getpagesize(),
            PROT_READ|PROT_EXEC|PROT_WRITE,
            MAP_SHARED|MAP_ANON, 0, 0);

    /* Technically undefined behaviour */
    func_t func = (func_t) code;

    code[0] = 0xC3; /* x86 'ret' instruction */

    func();

    return 0;
} 
```

显然，这在不同的平台上会有所不同，但它概述了所需的基础知识：获取内存的可执行部分、写入指令、执行指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:37:25.730

这需要您了解您的平台。例如，您平台上的 C 调用约定是什么？参数存储在哪里？哪个寄存器保存返回值？哪些寄存器必须保存和恢复？一旦你知道这一点，你基本上可以编写一些 C 代码，将代码组装成一块内存，然后将该内存转换为函数指针（尽管这在 ANSI C 技术上是禁止的，并且取决于你的平台是否标记了某些页面，这将不起作用内存作为不可执行的又名 NX 位）。

解决这个问题的简单方法是编写一些代码，编译它，然后反汇编它并查看哪些字节对应于哪些指令。您可以编写一些 C 代码，用该字节集合填充分配的内存，然后将其转换为适当类型的函数指针并执行。

最好从阅读架构和编译器的[调用约定开始。](http://en.wikipedia.org/wiki/Calling_convention)然后学习编写可以从 C 调用的程序集（即遵循调用约定）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T07:02:32.200

如果您有工具，它们可以帮助您更轻松地完成一些事情。例如，与其尝试设计正确的函数序言/尾声，我可以只用 C 编写代码：

```
int  foo(void* Data)
    {
    return (Data != 0);
    } 
```

然后（Windows 下的 MicrosoftC）将其提供给“cl /Fa /c foo.c”。然后我可以查看“foo.asm”：

```
_Data$ = 8
; Line 2
        push    ebp
        mov     ebp, esp
; Line 3
        xor     eax, eax
        cmp     DWORD PTR _Data$[ebp], 0
        setne   al
; Line 4
        pop     ebp
        ret     0 
```

我还可以使用“dumpbin /all foo.obj”来查看函数的确切字节是：

```
00000000: 55 8B EC 33 C0 83 7D 08 00 0F 95 C0 5D C3 
```

只是节省了我一些时间让字节完全正确......

# c - 如何使用 VC 从控制台读取字符串？

> ID：14825987
> 
> 赞同：0
> 
> 时间：2013-02-12T05:27:09.640
> 
> 标签：c, visual-c++, command-line, mfc

我想从命令行读取字符串。我打开了一些在命令行中运行的程序，我必须等待该程序进程。所以，我不知道什么时候处理成功。如果不能从命令中读取字符串，我就不能输入下一个命令。这是我在命令中运行程序 unhidden.bat 并发送 Y 进行处理的代码。

```
DWORD WINAPI unhidden(LPVOID lp)
{
   //ShellExecute(NULL, L"open", L"C:/unhidden.exe", NULL, NULL, SW_SHOWNORMAL);
    system("C:/unhidden.bat");
   return 0;
}

int run_unhidden(){
    AllocConsole() ;
    AttachConsole( GetCurrentProcessId() ) ;
    freopen( "CON", "w", stdout ) ;

    HANDLE hConIn = GetStdHandle(STD_INPUT_HANDLE);
    HANDLE hConOut = GetStdHandle(STD_OUTPUT_HANDLE);
    DWORD dwTmp;

    INPUT_RECORD ir[5];

    CreateThread(NULL, 0, unhidden,(LPDWORD)0, 0, &dwTmp);

    Sleep( 1000 );

    ir[0].EventType = KEY_EVENT;
    ir[0].Event.KeyEvent.bKeyDown = TRUE;
    ir[0].Event.KeyEvent.dwControlKeyState = 0;
    ir[0].Event.KeyEvent.uChar.UnicodeChar = 'y';
    ir[0].Event.KeyEvent.wRepeatCount = 1;
    ir[0].Event.KeyEvent.wVirtualKeyCode = 'Y';
    ir[0].Event.KeyEvent.wVirtualScanCode = MapVirtualKey('Y', MAPVK_VK_TO_VSC);

    ir[1].EventType = KEY_EVENT;
    ir[1].Event.KeyEvent.bKeyDown = TRUE;
    ir[1].Event.KeyEvent.dwControlKeyState = 0;
    ir[1].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[1].Event.KeyEvent.wRepeatCount = 1;
    ir[1].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[1].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

    ir[2].EventType = KEY_EVENT;
    ir[2].Event.KeyEvent.bKeyDown = FALSE;
    ir[2].Event.KeyEvent.dwControlKeyState = 0;
    ir[2].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[2].Event.KeyEvent.wRepeatCount = 1;
    ir[2].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[2].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

    dwTmp = 0;
    WriteConsoleInput(hConIn, ir, 2, &dwTmp);

wprintf(GetCommandLine());

    Sleep( 1000 );

    ir[0].EventType = KEY_EVENT;
    ir[0].Event.KeyEvent.bKeyDown = TRUE;
    ir[0].Event.KeyEvent.dwControlKeyState = 0;
    ir[0].Event.KeyEvent.uChar.UnicodeChar = 'y';
    ir[0].Event.KeyEvent.wRepeatCount = 1;
    ir[0].Event.KeyEvent.wVirtualKeyCode = 'Y';
    ir[0].Event.KeyEvent.wVirtualScanCode = MapVirtualKey('Y', MAPVK_VK_TO_VSC);

    ir[1].EventType = KEY_EVENT;
    ir[1].Event.KeyEvent.bKeyDown = TRUE;
    ir[1].Event.KeyEvent.dwControlKeyState = 0;
    ir[1].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[1].Event.KeyEvent.wRepeatCount = 1;
    ir[1].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[1].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

    ir[2].EventType = KEY_EVENT;
    ir[2].Event.KeyEvent.bKeyDown = FALSE;
    ir[2].Event.KeyEvent.dwControlKeyState = 0;
    ir[2].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[2].Event.KeyEvent.wRepeatCount = 1;
    ir[2].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[2].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

     dwTmp = 0;
    WriteConsoleInput(hConIn, ir, 3, &dwTmp);
    wprintf(GetCommandLine());
     Sleep( 1000 ); 
```

它在控制台中显示如下

```
Do you want to process now (Y/N)?y "C:\Users\PKRU\documents\visual studio 2010\Projects\Virus Scan\Debug\Virus Scan .exe" You chose: y 
Please wait . . . 
"C:\Users\PKRU\documents\visual studio 2010\Projects\Virus Scan\Debug\Virus Scan .exe" Could Not Find N:\*.lnk 
N:\autorun.ini\*, Are you sure (Y/N)? 
```

怎么读线

> N:\autorun.ini*，您确定 (Y/N) 吗？

使用 MFC 将下一个键发送到控制台。如果我不知道它什么时候会显示这一行，那么我不能发送 Y 或 N 来编程

# python - 使用map函数进行多重赋值

> ID：14825988
> 
> 赞同：2
> 
> 时间：2013-02-12T05:27:15.843
> 
> 标签：python

是否可以一次将映射函数应用于多个值？

像这样的东西

```
from collections import defaultdict
d['a'] = [1,2,3,4]
d['b'] = [4,5,6,7]
d['a'], d['b'] = map(lambda x,y: (x,y) if x*y % 3 == 0 else (0,0), d['a'], d['b'])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-129-5191c9205e6f> in <module>()
----> 1 d['a'], d['b'] = map(lambda x,y: (x,y) if x*y % 3 == 0 else (0,0), d['a'], d['b'])

ValueError: too many values to unpack 
```

当然也可以单独进行。

```
 l = map(lambda x,y: x if x*y % 3 == 0 else 0, d['a'],d['b'])
 m = map(lambda x,y: x if x*y % 3 == 0 else 0, d['b'],d['a'])
 d['a'] = l
 d['b'] = m

 d
 defaultdict(<type 'list'>, {'a': [0, 0, 3, 0], 'b': [0, 0, 6, 0]}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:43:21.393

我想不出让`map`函数接受两个或更多值的方法（我希望有人能在这个线程中告诉我）。`zip`但是您可以在列表生成器和s的帮助下准确地实现您所需要的：

```
from collections import defaultdict

d = {}
d['a'] = [1,2,3,4]
d['b'] = [4,5,6,7]
d['a'], d['b'] = [list(x) for x in zip( *[(x,y) if x*y % 3 == 0 else (0,0) for (x,y) in zip(d['a'], d['b'])])] 
```

如果您不需要 d['a'] 和 d['b'] 成为列表，则可以使最后一行更容易一些：

```
d['a'], d['b'] = zip( *[(x,y) if x*y % 3 == 0 else (0,0) for (x,y) in zip(d['a'], d['b'])]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:41:44.760

是的，您可以使用`zip`. 虽然它看起来不是很pythonic：

```
from collections import defaultdict
d = defaultdict(list)
d['a'] = [1,2,3,4]
d['b'] = [4,5,6,7]
d['a'], d['b'] = zip(*map(lambda (x,y): (x,y) if x*y % 3 == 0 else (0,0),
                                                   zip(d['a'], d['b'])))
#out: defaultdict(<type 'list'>, {'a': (0, 0, 3, 0), 'b': (0, 0, 6, 0)}) 
```

要获得准确的输出：

```
d['a'], d['b'] = map(list,zip(*map(lambda (x,y): (x,y) if x*y % 3 == 0 else (0,0), 
                                                           zip(d['a'], d['b']))))
#out: defaultdict(<type 'list'>, {'a': [0, 0, 3, 0], 'b': [0, 0, 6, 0]}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:42:51.983

如果你想做的是这样的：

```
>>> a['b'] = None
>>> a['c'] = None
>>> a['b'], a['c'] = (1,2)
>>> a['b']
1
>>> a['c']
2 
```

是的，这是可能的，但您可能需要再看看您的`map`函数返回的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:42:16.190

如果您的参数是整数或浮点数，并且您的函数可以使用算术标准运算来表达，那么您也可以为此目的使用数组

```
from numpy import array

x_vals = array([1,2,3,4])
y_vals = array([4,5,6,7])
f = lambda x,y: (x*y % 3 == 0)*x

f(x_vals,y_vals)
>>> array([0, 0, 3, 0]) 
```

# android - PageViewer 垂直滚动

> ID：14825989
> 
> 赞同：1
> 
> 时间：2013-02-12T05:27:16.293
> 
> 标签：android, view, pageviews

我有一个`pageViewer`其中有一个网格视图。但是我没有找到`PagerViewer.SetOnScrollListner`垂直滚动的..任何人都可以帮我解决这个问题..以前我在做`m_oGridView.SetOnScrollListner`。下面是我的pageViewer

```
<android.support.v4.view.ViewPager
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        tools:context=".MainActivity"> 
```

我在 PageViewer 中获取了 gridView，但我需要一个回调函数，当 gridview 在活动中滚动时调用

# java - 如何在java中获取具有两个属性的xml中元素的文本

> ID：14825994
> 
> 赞同：1
> 
> 时间：2013-02-12T05:27:48.487
> 
> 标签：java, xml

我想获取具有两个属性的元素内的文本，示例 xml 如下

```
 <?xml version="1.0" encoding="UTF-8"?>
    <queries>
    <query pagename="master" param="default">
        SELECT * from test;
    </query>
    <query pagename="uftl" param="default">
        SELECT uftl, lop from dwells where lop='a'
    </query>
    </queries> 
```

输入：两个属性，输出：查询。即，在将输入作为“主”、“默认”时，我想获取该元素的查询，在本例中为“SELECT * from test;”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:42:04.650

下面是一个示例，说明如何使用[`javax.xml.xpath`](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/package-summary.html)JDK/JRE 中的 API 实现此用例。

```
import javax.xml.namespace.QName;
import javax.xml.xpath.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {

        // Your query can be expressed as the following XPath.  It contains to
        // variables $pagename and $param that we can use to inject different
        // values into.
        String expression = "/queries/query[@pagename=$pagename and @param=$param]";

        XPathFactory xpf = XPathFactory.newInstance();
        XPath xPath = xpf.newXPath();

        // We will use an instance of `XPathVariableResolver` to put the real
        // values into our XPath expression
        xPath.setXPathVariableResolver(new XPathVariableResolver() {

            @Override
            public Object resolveVariable(QName variableName) {
                if("pagename".equals(variableName.getLocalPart())) {
                    return "master";
                } else if("param".equals(variableName.getLocalPart())) {
                    return "default";
                }
                return null;
            }

        });

        InputSource source = new InputSource("src/forum14825994/input.xml");

        // When we execute the XPath we can ask that the result be returned to
        // us as a String
        String result = (String) xPath.evaluate(expression, source, XPathConstants.STRING);
        System.out.println(result);
    }

} 
```

**输出**

```
SELECT * from test; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:39:59.193

哦。我在等待你的回答时写 dom 解析器

```
private String parse(Document document) {
    Element root = document.getDocumentElement();
    NodeList queries = root.getElementsByTagName("queries");
    int queriesLength = queries.getLength();
    for (int i = 0; i < queriesLength; i++) {
        Element currentQuery = (Element) queries.item(i);
        if (currentQuery.getNodeType() == Element.ELEMENT_NODE) {
            String pagename = currentQuery.getAttributes()
                    .getNamedItem("pagename").getTextContent();
            String param = currentCategory.getAttributes()
                    .getNamedItem("param").getTextContent();
            if(param.equals(paramValue) && pagename.equals(pagename)){
               String query =  currnetNode.item(0).getTextContent();
                return query;
            }
            return null;
        }
    }
} 
```

SAX 解析器：

```
public class parser implements ContentHandler {
    boolean check = false;
    ArrayList<String> queries = new ArrayList<>();

    @Override
    public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {
        switch (localName) {
            case "query":
                String param = atts.getValue("param");
                String pagename = atts.getValue("pagename");
                check = true;
                break;
            default:
                return;
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
            check = false;
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        String tagContent = new String(ch, start, length).trim();
        if(check){
            if(!tagContent.isEmpty()){
                queries.add(tagContent);
            }
        }
    } 
```

我删除了 sum overriden 方法，因为它们在这里是空的并且是不必要的。您必须实施它们并留空

**更新：**

主类：

```
public class Main {
    public static void main(String[] args) throws IOException, SAXException {
        ArrayList<String> queries = new parser().getQueries("test.xml");
        for (String query : queries){
            System.out.println(query);
        }

    }
} 
```

解析器类：

```
public class parser implements ContentHandler {
    boolean check = false;
    ArrayList<String> queries = new ArrayList<>();

    public ArrayList<String> getQueries(String fileName) throws SAXException, IOException {
        XMLReader xmlReader = XMLReaderFactory.createXMLReader();
        xmlReader.setContentHandler(this);
        xmlReader.parse(fileName);
        return queries;
    }

    @Override
    public void setDocumentLocator(Locator locator) {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void startDocument() throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void endDocument() throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void startPrefixMapping(String prefix, String uri) throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void endPrefixMapping(String prefix) throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {
    switch (localName) {
        case "query":
            String param = atts.getValue("param");
            String pagename = atts.getValue("pagename");
            if(!param.isEmpty() && !pagename.isEmpty())
                check = true;
            break;
        default:
            return;
    }
}

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
            check = false;
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        String tagContent = new String(ch, start, length).trim();
        if(check){
            if(!tagContent.isEmpty()){
                queries.add(tagContent);
            }
        }
    }

    @Override
    public void ignorableWhitespace(char[] ch, int start, int length) throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void processingInstruction(String target, String data) throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void skippedEntity(String name) throws SAXException {
        //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

我还在项目的根目录中添加了带有 te 名称的 xml 文件`test.xml`

我的输出如下所示：

```
SELECT * from test;
SELECT uftl, lop from dwells where lop='a' 
```

# php - PHP 在任何输出之前吐出一个新行

> ID：14825996
> 
> 赞同：7
> 
> 时间：2013-02-12T05:27:58.887
> 
> 标签：php, apache

我有一个来自 1&1 的 VPS 和 CentOS 5.2 64 位。

上周二，我升级了 PHP 并安装了 ImageMagick，它必须升级许多其他软件包，包括 Apache、MySQL、Perl 等。在此过程中升级了很多东西，但作为一个完整的菜鸟，我只是接受了它。

现在的问题是所有的网站都是这样的：

```
1.
﻿2\. <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/    xhtml1/DTD/xhtml1-transitional.dtd"> 
```

（输出前每个 PHP 文件上的新行）

我什至尝试过`ob_start();`，`die(trim(ob_get_clean()));`但没有运气。新线继续存在。

我简单地检查`/etc/php.ini`了一下，没有什么突出的。

我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T05:34:16.393

在黑暗中拍摄，但请检查您的 php.ini 以获取`auto-prepend-file`值。它可能指向一个空白的默认文件，该文件恰好有一个换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:34:29.457

最可能的原因是某些基本包含文件末尾有空格。`<?php`如果任何包含文件在and标记之外有任何字符`?>`，包括换行符或空格，那么 apache 会在响应的开头写一个空行，就像你看到的那样。

不幸的是，包含链中的任何文件都可能是罪魁祸首。如果您使用的是共享主机提供商，那么您可能需要联系他们的支持人员，以确保他们没有任何古怪的 php 自动包含行为或 apache 指令，如 AlienWebguy 提到的。[这是关于包含文件的最佳实践](https://stackoverflow.com/questions/4410704/why-would-one-omit-the-close-tag)的一个很好的 Stack Overflow 问题。（它甚至指出 Smarty，一个 3rd 方 php 模板插件在其包含文件中有多余的空格，即使在最近/当前版本中也是如此。）

这是一篇关于如何[查找和杀死带有空格的页面的可能的文章。](http://jimbojw.com/wiki/index.php?title=How_to_find_PHP_files_with_trailing_whitespace)如果您的 *nix-fu 足够强大，您可以使用正则表达式 grep 文件结构来尝试找到任何此类罪魁祸首。预防性地，马里奥在 SO 问题链接中发布了一些可以警告它的 php 指令，可以将其放入 svn 提交钩子中以捕获任何此类未来错误。

# c# - 如何在 C# 中将数据从文本框插入到 datagridview

> ID：14825999
> 
> 赞同：3
> 
> 时间：2013-02-12T05:28:07.500
> 
> 标签：c#, datagridview, textbox, insert

我有一个任务，即我必须将数据从文本框插入到 datagridview，然后将 datagridview 数据保存到具有多行的数据库中，我从文本框添加到 datagridview。我尝试了一些代码，但它仅适用于第一行我继续添加不止一排。任何人都可以帮助我，我该怎么做？

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        dgvUom.Rows[0].Cells["UomType"].Value = txtUomtyp.Text;
        dgvUom.Rows[0].Cells["UOmDesc"].Value = txtUomDesc.Text;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T05:46:52.547

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        string firstColum = txtUomtyp.Text;
        string secondColum = txtUomDesc.Text;
        string[] row = { firstColum, secondColum };
        dgvUom.Rows.Add(row);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-16T09:02:56.500

我希望这对你有用，对我有用

```
 DataTable dt = new DataTable();
    dt = (DataTable)dgvUom.DataSource;
    string firstColumn = txtUomtyp.Text;
    string secondColumn = cbxVNo.Text;
    string[] row = { firstColumn, secondColumn };
    dGVInventory.Rows.Add(row); 
```