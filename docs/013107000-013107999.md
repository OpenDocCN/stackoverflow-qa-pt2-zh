# StackOverflow 问答 13107000-13107999

# windows-7 - 在 Windows 7 上启动 Cassandra 服务器时出错

> ID：13107000
> 
> 赞同：2
> 
> 时间：2012-10-28T07:03:38.853
> 
> 标签：windows-7, cassandra

我已经下载了 Cassandra 的所有文件并将它们放在`C:\cassandra`文件夹中。我检查了 JAVA_HOME 和 CASSANDRA_HOME 环境变量是否设置正确（`echo %CASSANDRA_HOME% -> C:\cassandra`）

我修改了配置文件，例如：

```
commitlog_directory: C:/cassandra/storage/commitlog 
```

我已经尝试使用反斜杠和正斜杠作为目录分隔符。我去了 cassandra 'BIN' 目录并运行`cassandra -f`.

我收到一个错误：

```
Starting Cassandra Server

The system cannot find the path specified 
```

这就是我被卡住的地方，不知道如何继续。运行时我也遇到同样的错误`cassandra-cli`。我不想使用 Datastax，因为我现在正在试验 1.2 beta。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-11T14:15:35.603

我遇到了同样的错误，由于 cmd.exe 找不到批处理脚本中引用的文件。就我而言，原因是`JAVA_HOME`变量设置不当。我已将值设置为`c:\Program Files\Java\jre6\bin`，但它应该`c:\Program Files\Java\jre6`不会破坏以下部分`cassandra.bat`：

```
:runDaemon
echo Starting Cassandra Server
"%JAVA_HOME%\bin\java" %JAVA_OPTS% %CASSANDRA_PARAMS% -cp %CASSANDRA_CLASSPATH% "%CASSANDRA_MAIN%"
goto finally 
```

此外，我发现[本指南](http://support.qualityunit.com/249500-Cassandra-installation-on-Windows-7)在 Windows 7 上设置 Cassandra 1.2.5 时很有帮助。它引用的配置文件现在位于`conf/cassandra.yaml`，但适用相同的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:51:58.070

`cassandra.bat -f`根据记忆，在 Windows 上，您可能不需要运行`cassandra -f`（这将是等效的 Linux bash 脚本） - 在文本编辑器中检查它们以确保...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T07:19:45.623

我也遇到了同样的错误。解决了。

**通过选择“以管理员身份运行”选项以管理员身份打开 cmd。**

然后给出 Cassandra 的路径并运行它。例如：C:\Program Files\cassandra

# c# - 从 c# asp.net 中的 Datatable 或 List 导出 .csv 文件？

> ID：13107007
> 
> 赞同：0
> 
> 时间：2012-10-28T07:05:13.923
> 
> 标签：c#, asp.net

我见过许多使用 StringBuilder 和 Foreach 导出 csv 文件的解决方案。但是没有人可以描述当以下情况发生时会发生什么？

但我的问题是当包含逗号（，）到字段值时会发生什么？我想用逗号（，）值导出数据

在给出答案之前，请仔细阅读我的问题。为了获得更多帮助，我给你一个示例表，如下所示。

**示例表：**

```
字段 1 字段 2 字段 3
虚拟数据 2012 年 10 月 27 日 Mark、David、Nancy 等...
虚拟数据 2012 年 10 月 27 日 Mark、David、Nancy 等...
虚拟数据 2012 年 10 月 27 日 Mark、David、Nancy 等...
虚拟数据 2012 年 10 月 27 日 Mark、David、Nancy 等...
虚拟数据 2012 年 10 月 27 日 Mark、David、Nancy 等...
等等......

```

我想将上述数据导出到 .csv 文件中。我也想导出确切的值。
**不带双引号，例如“2012 年 10 月 27 日”无效**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:14:04.723

~~您应该用双引号将带有逗号的字段括起来。如果引用的字段值包含双引号，请在其位置使用**双双引号。**~~

在你的情况下：

```
Dummy data,"27 Oct, 2012","Mark,David,Nancy"
Dummy data,"27 Oct, 2012","Mark,David ""the CSV wiz"",Nancy" 
```

另外，网络搜索。

编辑：在您对双引号发表评论后，您必须手动解析它并考虑已知的逗号位置，但这只有在只有一个带有任意数量逗号的字段并且它排在最后时才有效（或者您解析双方的数据并将其余部分作为该字段）。

如果您无法确定性逗号解析，请使用另一个分隔符，例如 Tab。基本上不能在输入中的东西。

# javascript - 从谷歌地图中的建议路线中提取距离

> ID：13107008
> 
> 赞同：1
> 
> 时间：2012-10-28T07:05:23.580
> 
> 标签：javascript, google-maps, google-maps-api-3

我设置了这个：

```
provideRouteAlternatives: true 
```

我在我的**方向面板中获得了替代路线**

我可以通过这种方式获得主要路线距离：

```
var myroute = result.routes[0];
for (i = 0; i < myroute.legs.length; i++) {
  total += myroute.legs[i].distance.value;
} 
```

例如，我可以计算油耗。

但是当我点击显示在**方向**面板上的替代路线时，我无法弄清楚如何获得新的距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:53:41.683

您可以使用 构造折线`overview_path`。这是第一个路线的示例，但您可以轻松地将其扩展到 for 循环并具有不同的折线和处理程序函数。

```
 path = result.routes[0].overview_path;
      var polyline = new google.maps.Polyline({
        path: [],
        strokeColor: 'green',
        strokeWeight: 4
      });
      google.maps.event.addListener(polyline, 'click', function(me) {
        alert('Click');
       });
      var bounds = new google.maps.LatLngBounds();
      for (i=0;i<path.length;i++){
         polyline.getPath().push(path[i]);
         bounds.extend(path[i]);
      }
      polyline.setMap(map);
      map.fitBounds(bounds);
    }); 
```

给你点击监听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:09:08.870

主要路线是 result.routes[0]。第一个替代方案是 result.routes[1]。

# ruby-on-rails - 运行 exec bundle cucumber 立即关闭终端

> ID：13107010
> 
> 赞同：0
> 
> 时间：2012-10-28T07:05:53.567
> 
> 标签：ruby-on-rails, cucumber

我正在使用命令

```
`exec bundle cucumber features/filter_movie_list.feature --guess` 
```

在虚拟机上运行的 ubuntu 上运行良好，但今天运行相同的命令会立即关闭终端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:07:38.010

[`bundle exec`](http://gembundler.com/man/bundle-exec.1.html)不是`exec bundle`。_ 后者正在运行[`exec`bash 命令](http://ss64.com/bash/exec.html)，它用给定的进程替换 shell，导致终端在完成后关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T07:09:06.140

捆绑执行黄瓜功能/filter_movie_list.feature --guess

它不是执行包

# java - 如何从 servlet 向所有登录用户发送数据

> ID：13107017
> 
> 赞同：1
> 
> 时间：2012-10-28T07:06:37.200
> 
> 标签：java, servlets, servlet-filters, servlet-3.0, servlet-listeners

我的要求是管理员应该向所有登录用户发送数据。我有一个 servlet 第一个用户发送登录 HTTP 请求并从 servlet 获取登录成功响应，现在该用户的会话已启动。类似地其他用户登录。现在管理员也是一个用户可以登录并看到两个用户 user1 和 user2 登录. 管理员应该向所有登录的用户发送数据。Servlet 应该在没有用户 HTTP 请求的情况下将数据推送给该用户。请注意在会话期间用户不会发送任何其他 HTTP 请求。

我尝试存储每个登录用户的响应 obj 而不是彗星，然后使用该 obj 尝试将数据发布回用户，但这没有用。

请检查以下代码：**LoginServlet.java**

```
 public class LoginServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;
        ServletContext sc;

        protected ArrayList<HttpServletResponse> connections = new ArrayList<HttpServletResponse>();

        public LoginServlet() {
            super();

        }

        public void init() throws ServletException {
            super.init();

            sc = getServletContext();

        }

        protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {

        }

        protected void doPost(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {

            synchronized (connections) {
                connections.add(response);
            }
            ServletContext sc = getServletContext();
            Integer x = (Integer) sc.getAttribute("hit");

            if (x == null)
                x = 1;
            else
                x++;
            sc.setAttribute("hit", x);

            String username = request.getParameter("username");
            String password = request.getParameter("password");

            HttpSession session = request.getSession(true);

            session.setAttribute("username", username);
            session.setAttribute("password", password);
            response.setContentType("text/html");

            ArrayList<LoggedInUser> loggedInUsers = (ArrayList<LoggedInUser>) sc
                    .getAttribute("users");

            if (loggedInUsers == null) {
                System.out.println("loggedInUsers creates");
                loggedInUsers = new ArrayList<LoggedInUser>();

            }
            loggedInUsers.add(new LoggedInUser(username, password));

            sc.setAttribute("users", loggedInUsers);

            PrintWriter out = response.getWriter();
            System.out.println("loggedInUsers ==>" + loggedInUsers.size());
            if (username != null && username.equals("admin")) {
                out.println("Admin Login Success");
                ServletContext scx = getServletContext();
                Integer xx = (Integer) scx.getAttribute("hit");

                out.println("<H1>Users visited " + xx + "</h1>");
                loggedInUsers = (ArrayList<LoggedInUser>) sc.getAttribute("users");

                for (int i = 0; i <= loggedInUsers.size() - 1; i++) {
                    LoggedInUser LoggedInUser = loggedInUsers.get(i);
                    out.println(LoggedInUser.getmUsername()+ "<br>");
                }

                for (int i = 0; i < connections.size(); i++) {

                    try {

                        LoggedInUser LoggedInUser = loggedInUsers.get(i);
                        PrintWriter writer = connections.get(i).getWriter();
                        System.out.println("inside loope " + i + "\n" + writer);
                        writer.println("MESSAGE FROM ADMIN HERE" + "<br>");

                        writer.flush();
                        writer.close();
                    } catch (IOException e) {
                        log("IOExeption sending message", e);
                    }

                }

            } else {
                out.println("Welcome   " + username + "   Login Success");
            }
        }
    } 
```

一旦用户登录 arraylist 中存储的 resp obj。

```
synchronized (connections) {
    connections.add(response);
} 
```

后来使用那个 obj 得到了 printwriter obj。

```
PrintWriter writer = connections.get(i).getWriter(); 
```

**问题：**

1.  如何向所有登录用户发送一个特定的消息？
2.  没有彗星，我们能做到这一点吗？

如果我做错了什么，请更正代码并提供其他建议。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:35:10.690

> Servlet 应该在没有用户 HTTP 请求的情况下将数据推送给该用户。

这在技术上是不可能的。HTTP 协议根本不允许这样做。浏览器只有在发送请求时才能从服务器获得响应。一旦完成读取响应，它就不会尝试从其套接字中读取更多内容……直到它发送下一个请求。

您可以做的是将一些 javascript 放入定期向服务器发出 AJAX 请求的所有页面中，询问是否有要显示的管理消息。

我想你也可以使用 COMET 来做到这一点。

您当前保留最后一个响应并尝试向其写入更多数据的方法失败了，因为它违反了 HTTP 协议和 servlet 状态机。当登录 servlet 完成原始请求时，响应的输出流被刷新到套接字并关闭。它无法重新打开，即使可以，浏览器也不知道如何处理您编写的数据。

更新：对此有一个可行的变体。它涉及WebSockets ...客户端在请求中发送一些特殊的标头，服务器发送101响应并*切换协议*；见[https://en.wikipedia.org/wiki/WebSocket](https://en.wikipedia.org/wiki/WebSocket)

# wxwidgets - 如何获取窗口的大小

> ID：13107019
> 
> 赞同：1
> 
> 时间：2012-10-28T07:06:52.647
> 
> 标签：wxwidgets

我想为点数组分配内存。

而且我想依赖屏幕大小，这样我就可以正确绘制。

但我不知道屏幕的大小，除了`onPaint()`调用函数`GetClientSize()`。

而且我发现`GetClientSize()`and的结果`GetSize()`差别很大，我不知道它们之间有什么联系。

无论如何，在我调用绘图函数之前我可以知道尺寸吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:19:10.927

客户端大小是可绘制区域。窗口大小为，客户端大小 + 标题大小 + 其他框架大小。全部 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:26:33.157

您可以处理`EVT_SIZE`以收到有关大小更改的通知，但通常这甚至不需要：您只需将处理程序`GetClientSize()`中的返回值`EVT_PAINT`与先前缓存的值进行比较，并在必要时更新后者。

您确实需要使用客户端大小，这是您绘制窗口区域的大小，而不是完整大小，还包括菜单/工具/状态栏和窗口装饰。

# mysql - 选择具有重复数据的行

> ID：13107023
> 
> 赞同：2
> 
> 时间：2012-10-28T07:07:57.507
> 
> 标签：mysql, sql, select, join

我有一些 MySQL 表，其中包含需要删除的冗余数据。例如：

```
 id email            date       data...
 1  email1@gmail.com 2012-01-01 my_data
 2  email2@gmail.com 2012-01-01 my_data
 3  email1@gmail.com 2012-01-02 my_data
 4  email1@gmail.com 2012-01-02 my_data   (redundant)
 5  email2@gmail.com 2012-01-02 my_data 
```

我需要删除多余的行，但我想先选择它们。我在 StackOverflow 上找到了这个，但它需要电子邮件地址

```
SELECT * 
FROM `my_table`
WHERE `id` IN (SELECT `id` 
               FROM `my_table` 
               where `email` = 'email1@gmail.com' 
               group by `date` 
               HAVING count(*) > 1) 
```

我可以像上面那样使用什么查询，在嵌入式查询中不使用 WHERE 限定符，所以我可以在所有电子邮件地址中使用它？

查询可以是 SELECT 查询。我不介意在 PHPMyAdmin 中手动删除行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T07:11:12.020

```
DELETE FROM tableName
WHERE ID NOT IN
(
    SELECT minID
    FROM
    (
        SELECT email, date, MIN(id) minID
        FROM tableNAme
        GROUP BY email, date
    ) x
) 
```

*   [***SQLFiddle 演示***](http://sqlfiddle.com/#!2/e29e5/1)

或通过使用`JOIN`

```
DELETE a 
FROM tableName a
    LEFT JOIN (
            SELECT minID
            FROM (
                    SELECT email, DATE, MIN(id) minID
                    FROM tableNAme
                    GROUP BY email, DATE
                    ) y
            ) x
            ON a.ID = x.minID
WHERE x.minID IS NULL; 
```

*   [***SQLFiddle 演示***](http://sqlfiddle.com/#!2/09732/1)

以下查询仅`SELECT`重复每个*电子邮件*和*日期的行*

```
SELECT a.*
FROM tableName a
        LEFT JOIN 
       ( 
         SELECT minID
        FROM
        (
          SELECT email, date, MIN(id) minID
          FROM tableNAme
          GROUP BY email, date
        )y
       ) x ON a.ID = x.minID
WHERE x.minID IS NULL 
```

*   [***SQLFiddle 演示***](http://sqlfiddle.com/#!2/24977/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:50:25.777

另一种方法是计算表中每个电子邮件地址的日期列的出现次数：

```
SELECT `email`, `date`, COUNT(*) FROM `my_table` GROUP BY `date`, `email` HAVING COUNT(*) > 1

+------------------+---------------------+----------+
| email            | date                | COUNT(*) |
+------------------+---------------------+----------+
| email1@gmail.com | 2012-01-02 00:00:00 |        2 |
+------------------+---------------------+----------+ 
```

# mongodb - 如何删除集合中的子文档？

> ID：13107034
> 
> 赞同：0
> 
> 时间：2012-10-28T07:09:41.520
> 
> 标签：mongodb

mongo> db.users.findOne({username: 'foo'});

```
 {
    "__v" : 266,
    "_id" : ObjectId("50752b5f00a0f5ab64000002"),
    "followers" : [
            ObjectId("505e2f1de888c7d701000001"),
            ObjectId("506146fe72c0280723000001"),
            ObjectId("50752b5f00a0f5ab64000002"), //remove this
            ObjectId("50752b5f00a0f5ab64000002") //remove this
    ], 
```

我想删除 follower[] 集合中的最后两项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:15:58.913

你可以试试这个（如果你*确定*它们是最后两个）：

```
db.users.update({"_id" : ObjectId("50752b5f00a0f5ab64000002")}, {$pop: {followers:1}});
db.users.update({"_id" : ObjectId("50752b5f00a0f5ab64000002")}, {$pop: {followers:1}}); 
```

[`$pop`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pop)将删除数组的最后一个元素。

但是，如果您需要从列表中删除特定的 id，无论它们在哪里，您都可以使用[`$pull`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull)，或者[`$pullAll`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pullAll)如果您想一次删除多个。

# for-loop - 批处理文件，for循环不回显行

> ID：13107040
> 
> 赞同：3
> 
> 时间：2012-10-28T07:11:25.937
> 
> 标签：for-loop, batch-file, cmd, command-prompt

我这里有问题。首先，代码：

test.bat 的内容：

```
@echo off
cls
for /F "delims=" %%a in ('dir /B /A-D ^| findstr /I ".txt$"') do (
set str=%%a
echo %str% >> list.tmp
pause
)

echo ------------------
for /F %%i in (list.tmp) do echo %%i
del list.tmp
echo ------------------ 
```

在test.bat所在的同一个目录下，有两个测试文件：1.txt和2.txt

当我运行 test.bat 时，我的输出是：

```
------------------
2.txt
2.txt
------------------ 
```

如您所见，1.txt 未列出。

而当添加 3.txt 时，输出为：

```
------------------
3.txt
3.txt
3.txt
------------------ 
```

任何人都可以帮助我吗？

谢谢，安德鲁·王

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:43:45.840

您需要使用*延迟扩展*功能，因为在`FOR`循环中，您正在读取一个变量，并且该变量也在该循环中被修改。

```
@echo off
setlocal enabledelayedexpansion
cls
for /F "delims=" %%a in ('dir /B /A-D ^| findstr /I ".txt$"') do (
  set str=%%a
  echo !str! >> list.tmp
  pause
)

echo ------------------
for /F %%i in (list.tmp) do echo %%i
del list.tmp
echo ------------------ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T08:33:36.237

你也可以使用一个函数（子程序）......这也“强制” CMD 评估每个循环......

```
@echo off
cls
for /F "delims=" %%a in ('dir /B /A-D ^| findstr /I ".txt$"') do (
  call :doOne %%a 
)

echo ------------------
for /F %%i in (list.tmp) do echo %%i
del list.tmp
echo ------------------
goto :EOF

:DoOne
  set str=%1
  echo %str% >> list.tmp
  pause 
```

# terminal - 无法在终端中输入任何内容

> ID：13107045
> 
> 赞同：3
> 
> 时间：2012-10-28T07:13:52.143
> 
> 标签：terminal

我正在 iMac OSX 10.8.2 上安装 Zend Server。当它无法正常工作时，我快要结束了，所以我通过输入第一个命令重新开始：

```
sudo nano /usr/local/zend/bin/zendctl.sh 
```

然后这被返回了，我无法在终端中输入任何内容。我关了窗户又重新打开了，还是一样。Apple 论坛上的人建议我删除 /usr/local/zend 文件夹并重新启动终端，我这样做了，但仍然有同样的问题。那里似乎没有人经历过这种情况，所以他们把我带到了这里。

这是我的终端窗口中的内容：

```
http://forums.zend.com/download/file.php?id=3028 
```

这是我打开新窗口时的样子。

我在我的机器上使用另一个帐户登录，同样的事情发生了。我难住了。苹果帮手都难住了。我希望这里有人能解开这整个烂摊子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:36:48.807

此错误显然是不[正确权限](http://forums.macrumors.com/showthread.php?t=1197937)的不明显结果。使用磁盘工具的[修复磁盘权限](http://support.apple.com/kb/HT1452)功能来修复它。

# javascript - Javascript - 解构菜单

> ID：13107048
> 
> 赞同：0
> 
> 时间：2012-10-28T07:14:17.027
> 
> 标签：javascript, jquery, menu, split

我有一个带有图像的菜单，当鼠标悬停在一个图像上并且在图像之外（对于每个图像）时，它会执行动画。

代码是：

```
var nav = $('.menu');
nav.navs({
    useHash:true,
    defHash: '#!/page_splash',
    //myComm - Menus Hover In 
    hoverIn:function(li){
            $('a>span', li).stop().animate({'marginTop': -400},1000,'easeInOutExpo');
            $('a>strong',li).stop().animate({height:0},800,'easeInOutExpo');
    },
    //myComm - Menus Hover Out 
    hoverOut:function(li){
        if ((!li.hasClass('with_ul')) || (!li.hasClass('sfHover'))) {
            $('a>span', li).stop().animate({'marginTop': marOver},1600,'easeOutElastic');
            $('a>strong',li).stop().animate({height:414},1200,'easeOutBounce');
        }
    }
})
.navs(function(n){  

    $('#content').tabs(n);
}); 
```

但是我需要单独做这个功能，菜单的每个项目一个功能。

# asp.net-mvc-3 - 使用模型类而不是使用元组时出错

> ID：13107049
> 
> 赞同：0
> 
> 时间：2012-10-28T07:14:33.220
> 
> 标签：asp.net-mvc-3, model

我有我的模型的父类：

```
public class MyModel
{
    public ThemesModel themesModel { get; set; }
    public ThemeGroupsModel themesGroupsModel { get; set; }
    public ThemeTypsModel themesTypesModel { get; set; }
} 
```

我在我的方法中使用它：

```
public List<MyModel> getAllTheme()
{
    List<MyModel> myModelList = new List<MyModel>();
    MyModel myModelTemp;
    using (var context = new EShopThemeDBEntities(idbconnection.ConnStr))
    {
        var ThemeTypeQ = (//some queries... ).ToList();

        if (ThemeTypeQ != null)
        {
             foreach (var item in ThemeTypeQ)
             {
                   myModelTemp = new MyModel();
                   myModelTemp.themesTypesModel.ThemeTypeName = item.ThemeTypeName;
                      .
                      .
                      .
             } 
        } 
    }

    return myModelList;   
 } 
```

我在这一行收到错误：

> myModelTemp.themesTypesModel.ThemeTypeName = item.ThemeTypeName;

错误：

> 你调用的对象是空的。

我使用过`Tuple<ThemeTypsModel, ThemesModel, ThemeGroupsModel>`而不是使用`MyModel`过，并且我的项目以前曾工作过。

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:53:40.083

我通过将 MyModel.cs 更改为此自己解决了这个问题：

```
public class MyModel
{
public ThemesModel themesModel { get; set; }
public ThemeGroupsModel themesGroupsModel { get; set; }
public ThemeTypsModel themesTypesModel { get; set; }

  public MyModel()
    {
        themesModel = new ThemesModel();
        themesGroupsModel = new ThemeGroupsModel();
        themesTypesModel = new ThemeTypsModel();
    } 
```

}

我不会删除我的问题以供有相同问题的其他人使用。

# c - 用 Lisp 编写 C 代码

> ID：13107051
> 
> 赞同：2
> 
> 时间：2012-10-28T07:14:51.733
> 
> 标签：c, lisp, root

最近，我不得不用 C 语言编写代码，因为我正在使用 C/C++ 命令行解释器 (CINT) 作为我正在开展的项目（即 root）使用的平台。但是，我想继续使用 Lisp 进行编码。在“ANSI Common Lisp”中，Graham 指出可以使用 C 和 Lisp 的组合来编写代码。然而，Naggum 更进一步——他指出可以使用 Lisp 编写 C 代码。

如何做到这一点？

# c# - C# 有预定义的符号吗？

> ID：13107054
> 
> 赞同：11
> 
> 时间：2012-10-28T07:15:57.903
> 
> 标签：c#, preprocessor-directive

在 C++ 中，我有这个： http: [//msdn.microsoft.com/en-us/library/b0084kay](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.80).aspx) (v=vs.80).aspx 。

所以我可以编写只在调试时运行的代码，或者只在特定平台（PowerPC、MIPS、Power Macintosh 等）运行的代码。它不再受支持，但它是一个很好的例子。您也可以在 32 位和 64 位系统之间切换（当然，这仅在您发布 2 个不同的版本时才有用，每个版本都有自己的处理器架构。在 C# 中这是一个罕见的需求，但它**仍然**存在）。

所以我的问题是C#中是否存在类似的东西。我意识到没有宏，但是有符号（即使使用相同的`#define`关键字。所以它应该存在 - 至少对我来说是有道理的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T07:23:03.417

在 .NET 中有[预处理指令](http://msdn.microsoft.com/en-us/library/aa691094(v=vs.71).aspx)。要仅在调试时包含一些代码块，您可以执行以下操作：

```
#define Debug      // Debugging on

class PurchaseTransaction
{
   void Commit() {
      #if Debug
         CheckConsistency();
      #else
         /* Do something else
      #endif
   }
} 
```

如果您转到 Visual Studio 中的项目设置，请检查“构建”选项卡。在那里，您可以为选定的配置定义调试和跟踪常量（默认为调试构建选中）。您还可以定义其他条件编译符号。

![在此处输入图像描述](../Images/e000cac79d7020a33a46c1dbb2364df2.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-11-28T16:22:07.523

尽管似乎没有针对不同的操作系统，但有一些针对各种不同的[.NET 框架](https://docs.microsoft.com/en-us/dotnet/standard/frameworks#how-to-specify-target-frameworks)：

*   .NET 框架
    *   `NET20`, `NET35`, `NET40`, `NET45`, `NET451`, `NET452`, `NET46`, `NET461`, `NET462`, `NET47`, `NET471`,`NET472`
*   .NET 标准
    *   `NETSTANDARD1_0`, `NETSTANDARD1_1`, `NETSTANDARD1_2`, `NETSTANDARD1_3`, `NETSTANDARD1_4`, `NETSTANDARD1_5`, `NETSTANDARD1_6`,`NETSTANDARD2_0`
*   .NET 核心
    *   `NETCOREAPP1_0`, `NETCOREAPP1_1`, `NETCOREAPP2_0`,`NETCOREAPP2_1`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T07:24:21.127

MSDN 文档没有列出任何预定义的名称。似乎所有内容都需要来自#define 和/define。

[在这里检查 IF](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

# perl - 在 ActivePerl 上安装 mechanize-firefox 模块

> ID：13107057
> 
> 赞同：1
> 
> 时间：2012-10-28T07:16:26.363
> 
> 标签：perl, firefox, www-mechanize

在 win7 中使用 ppm [Perl Package Manager] 在 ActivePerl 上找不到 mechanize-firefox 模块。您是否有任何替代方式或方法来安装此模块？感谢您分享宝贵的经验。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:25:46.250

我也不能在ppm。我已经手动安装了[WWW::Mechanize::Firefox](http://metacpan.org/pod/WWW%3a%3aMechanize%3a%3aFirefox)

1,WWW-Mechanize-Firefox-0.68.tar.gz [下载]
2,扩展
3,perl Makefile.PL-> make -> make test ->make install->ok

成功

# python - 用于实例化类实例的优先装饰器

> ID：13107061
> 
> 赞同：0
> 
> 时间：2012-10-28T07:16:47.680
> 
> 标签：python, decorator

嗨，这是python中的新手，我想编写一个优先装饰器，它将根据传递给装饰器的优先级值决定必须实例化哪个类实例。

```
# abstract class
class Base:
   def method1(self):
    pass

@deco(priority=1)
class A(Base):
    def method1(self):
        pass

@deco(priority=3)
class B(Base):
    def method1(self):
        pass

@deco(priority=2)
class C(B):
    def method1(self):
        pass

def return_class_obj():
# this method will return the object based upon the priority of the 
# class passed through decorator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:12:19.227

看来你需要这样的东西：

```
class Factory():
    registred = {}

    @classmethod
    def register(cls, priority):
        registred = cls.registred
        def inner(inner_cls):
            registred[priority] = inner_cls
            return inner_cls
        return inner
    @classmethod
    def get(cls):
        return min(cls.registred.items())[1]()

@Factory.register(3) 
class A():
    def test(self):
        print "A"

Factory.get().test()

@Factory.register(2)
class B():
    def test(self):
        print "B"

Factory.get().test()

@Factory.register(1)
class C(B):
    def test(self):
        print "C"

Factory.get().test() 
```

这将输出`ABC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:52:57.223

这是`deco`and的工作实现`return_class_obj`。装饰器将优先级子类安装在一个`Base`属性中，该属性会`return_class_obj`查找。

```
def deco(priority):
    def _deco(cls):
       cls._cls_priority = priority
       if not hasattr(Base, '_subclasses'):
          Base._subclasses = {}
       Base._subclasses[priority] = cls
       return cls
    return _deco

def return_class_obj():
    # return Base subclass with the highest priority
    return Base._subclasses[max(Base._subclasses)] 
```

使用装饰器时，别忘了`@`在装饰器调用前加上，否则装饰器将是空操作。

# asp.net-mvc-3 - linq orderby 未排序 asc 不起作用

> ID：13107063
> 
> 赞同：1
> 
> 时间：2012-10-28T07:17:10.190
> 
> 标签：asp.net-mvc-3, linq, kendo-ui

我在网格中有以下信息返回，但它不会先按名字排序记录，然后按姓氏排序。请让我知道如何实现这一目标。我目前正在使用 MVC4 和 kendoui 网格

```
public ActionResult Index()
    {
        return View();
    }

public ActionResult GetSession([DataSourceRequest] DataSourceRequest request)
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    return Json(GetAllSessionList().ToDataSourceResult(request),         JsonRequestBehavior.AllowGet);
} 
 private static IEnumerable<ListsViewModel> GetAllSessionList()
    {
        var context = new HEntities();

        return context.vwSessionListConfigs
            .OrderBy(x => x.FirstName).ThenBy(x => x.FamilyName)
            .Select(session => new ListsViewModel
            {
                ConsumerID = session.ConsID,
                ConsumerHCID = session.ConsHCL,
                ConsumerHRN = session.ConsHRK,
                ConsumerFirstName = session.FirstName,
                ConsumerFamilyName = session.GivenName,
                ConsumerGender = session.Gender,
            });
    } 
```

**看法：**

```
@(Html.Kendo().Grid<Web_App.ViewModel.ListsViewModel>()

    .Name("SList")
    .HtmlAttributes(new { @Style = "align:center; font-size:10px;" })
    .Columns(columns =>
    {
        columns.Bound(p => p.ConsID).Visible(false);
        columns.Bound(p => p.ConsHCL).Width(80);
        columns.Bound(p => p.ConsHRK).Width(50);
        columns.Bound(p => p.FirstName).Width(80);
        columns.Bound(p => p.GivenName).Width(80);
        columns.Bound(p => p.ConsumerAlias).Width(45);
        columns.Bound(p => p.Gender).Width(30);

        columns.Command(commands => commands.Edit()).Width(175);      
    })
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .Pageable()
    .Selectable(s => s.Mode(Kendo.Mvc.UI.GridSelectionMode.Single))
    .Scrollable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(10)
        .ServerOperation(true)
        .Model(model => model.Id(p => p.ConsID))
        .Read(read => read.Action("GetSession", "Manage").Type(HttpVerbs.Get))
        .Update("Edit", "Manage")         
    )
    .Events(events => events
                            .Change("change"))

) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:57:53.040

在将集合传递给 ToDataSourceResult 方法之前如何对集合进行排序并不重要。ToDataSourceResult 方法将在内部再次按模型的第一个属性对集合进行排序。

要对您的集合进行排序，您应该使用数据源的 Sort 方法。

```
.DataSource(dataSource => dataSource
            .Ajax()
            .Sort(st => {

                st.Add(m => m.Name).Descending();
                st.Add(m => m.PersonID).Descending(); 
            }) 
```

# c# - 如何在 WPF 应用程序中将参数传递给 ViewModel 的构造函数？

> ID：13107064
> 
> 赞同：7
> 
> 时间：2012-10-28T07:17:32.430
> 
> 标签：c#, wpf, mvvm, prism

我看到人们建议在“当前”目标更改时使用 Messenger/EventAggregator 将参数传递给 ViewModel，但它不适用于我的情况。

假设我有一个这样的 ViewModel 类：

```
class CustomerViewModel
{
    CustomerViewModel(int customerId) {}
} 
```

和：

1.  我同时在应用程序外壳中拥有相同类型的视图。
2.  对于每个视图，都有一个唯一的 CustomerViewModel 实例。每个 CustomerViewModel 实例可以有不同的 customerId。（类似于Visual Studio IDE，同时打开多个文档）

我不想在我的视图类中编写像“this.DataContext = new CustomerViewModel(id)”这样的代码。处理这种情况的 MVVM 方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:10:09.697

有几种方法可以处理这种情况，首先 - 确定您是使用[View first 还是 View Model first](http://forums.silverlight.net/t/186609.aspx/1)方法。

使用 EventAggregator 是一个有效的选项。

另一种选择是让您的 ViewModel 实现一个接口，然后使用一些[IoC/DI](http://msdn.microsoft.com/en-us/magazine/cc163739.aspx)（例如[MEF](http://mef.codeplex.com/)或 Unity）来获取 ViewModel 的实例。使用这个方法，你可以定义一个`Initalize(int Id)`你知道 ViewModel 必须实现的函数。你不需要你的 View 知道 CustomerViewModel 类，只需要接口。

我应该注意，如果您使用某种**DI**，您始终可以将该参数注入 ViewModel。在 Unity 中的 IIRC 这可以比在 MEF 中更容易完成（您只需注册值，然后创建取决于该类型的 ViewModel）。

# github-pages - Github 页面（gh-Pages）img 资源未/找到/不会加载？

> ID：13107065
> 
> 赞同：4
> 
> 时间：2012-10-28T07:17:45.233
> 
> 标签：github-pages

我正在使用 github 页面并且 index.html 打开并且 css 和 javascript 加载但图像不会，我查看路径[http://myusername.github.com/project-name/img/example.png](http://myusername.github.com/project-name/img/example.png)和 example.png将在查看原始文件后加载，我尝试单独提交图像但未检测到更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:58:19.757

您可以使用 url 存储库中的基本 href 路径结束分隔符

例子：

[https://github.com/YourName/Repo/](https://github.com/YourName/Repo/) # "/" 结束行分隔符

Include Image File Path To { img/img.jpg } # 带有你的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T14:46:49.810

路径区分大小写...png 与 PNG 不同。你的回购路径是什么？

# ruby-on-rails - 如何更改 Rails 代码以使其在 Sinatra 中工作？

> ID：13107069
> 
> 赞同：1
> 
> 时间：2012-10-28T07:18:32.727
> 
> 标签：ruby-on-rails, ruby, sinatra

一个名为`omniauth-ebay`与 Sinatra 兼容的 Rails gem 使用下面的代码来设置自己：

```
Rails.application.config.middleware.use OmniAuth::Builder do
       provider :ebay, "runame", "devid", "appid", "certid", "siteid", "apiurl"
    end 
```

我知道`omniauth`（`omniauth-ebay`基于它）gem 绝对与 Sinatra 兼容。请注意，这不是 eBay 或 gem 特定的问题，当然应该有一种在 Sinatra 中设置中间件的通用方法。

那么，如何更改上面的代码以使其与 Sinatra 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:49:59.290

你只需要了解 Rails 对你隐藏了什么。Rack 中间件实际上直接安装在 Rack 内部。

在您的 config.ru 文件中：

```
use OmniAuth::Builder do
  provider :ebay, "runame", "devid", "appid", "certid", "siteid", "apiurl"
end 
```

config.ru 是由 Rack 加载的，所以任何特定于 Rack 的东西都应该放在那里，除非你有某种系统可以把它放在其他地方。我怀疑 Sinatra 可能允许您`#use`从 Sinatra 应用程序内部调用，但 config.ru 仍然适用于所有情况。

# c# - 为什么实现变体接口的类保持不变？

> ID：13107071
> 
> 赞同：14
> 
> 时间：2012-10-28T07:18:55.047
> 
> 标签：c#, c#-4.0, ienumerable, covariance

C# 4.0 进一步扩展了泛型类型和接口的协变和逆变。一些接口（如`IEnumerable<T>`）是协变的，所以我可以执行以下操作：

```
IEnumerable<object> ie = new List<string>(); 
```

但是这条线呢？我得到一个编译时错误

```
List<Object> list = new List<String>();
//Cannot implicitly convert type List<string>' to List<object>' 
```

我的意思是，如果`List<T>`实施`IEnumerable<T>`为什么`List<T>`仍然不变？是否有一个很好的反例来解释为什么在 C# 中不允许这样做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-28T07:40:52.690

首先，类在 C# 中*总是*不变的。你不能像这样声明一个类：

```
// Invalid
public class Foo<out T> 
```

其次-对于您给出的示例更重要的是-`List<T>`无论如何都不能声明为协变或逆变`T`，因为它具有接受和返回 type 值的成员`T`。

想象一下，如果它*是*协变的。然后你可以写这个（对于明显的`Fruit`类层次结构）：

```
List<Banana> bunchOfBananas = new List<Banana>();
// This would be valid if List<T> were covariant in T
List<Fruit> fruitBowl = bunchOfBananas;
fruitBowl.Add(new Apple());
Banana banana = bunchOfBananas[0]; 
```

你希望最后一行做什么？从根本上说，您不应该添加`Apple`对实际执行时类型为`List<Banana>`. 如果你把一个苹果加到一堆香蕉里，它就会掉下来。相信我，我已经试过了。

最后一行在类型方面*应该*是安全的 - a 中的唯一值`List<Banana>`应该是`null`或对实例`Banana`或子类的引用。

现在至于为什么类不能是协变的，即使它们在*逻辑上*是......我相信这会在实现级别引入问题，并且在编程级别也会*非常*严格。例如，考虑一下：

```
public class Foo<out T> // Imagine if this were valid
{
    private T value;

    public T Value { get { return value; } }

    public Foo(T value)
    {
        this.value = value;
    }
} 
```

那仍然可能必须是无效的——变量仍然是可写的，这意味着它被视为一个“in”槽。您必须将每个类型的变量设置为`T`只读......这只是为了初学者。我强烈怀疑会有更深层次的问题。

就纯粹的实用主义而言，CLR 已经支持 v2 的委托和接口变化 - C# 4 只是引入了公开该功能的语法。我不相信 CLR 曾经支持泛型类差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T14:26:36.120

如果我们要讨论向 List 添加（接受）某物（T），我们必须讨论 CONTRAVARIANCE（COVARIANCE 不允许接受），所以：

```
List<Fruit> bunchOfFruits = new List<Fruit>();
// This would be valid if List<T> were contravariant in T
List<Banana> bunchOfBananas = bunchOfFruits;
bunchOfBananas.Add(new Apple()); // not possible! We have compile error, coz in spite of Apple is a Fruit it is not ancestor of Banana. No logical mistakes.
bunchOfBananas.Add(new BigBanana()); // possible coz of rules of C#! we deal with a descendant of Banana
bunchOfBananas.Add(new Fruit()); // possible, coz CONTRAVARIANCE of List. We deal with the ancestor of Banana. No logical mistakes. 
```

因此，我们可以看到 VARIANCE 既适用于类，也适用于接口和委托（一般是类，不仅适用于集合）。而且我认为它可以在.NET 的未来版本中实现。

# php - 定义和可互换的网站语言

> ID：13107073
> 
> 赞同：0
> 
> 时间：2012-10-28T07:19:00.520
> 
> 标签：php, translation

如何让用户选择将网站上的文本语言更改为 PHP 中预定义的短语？

这方面的一个例子是 facebook，将语言更改为英语（海盗）产生的不是翻译，而是检索在其他地方定义的许​​多不同的短语。

我希望通过在我的网站中添加海盗语言来做同样的事情，让用户可以选择自己更改它。

我能想到的最好的事情是每种语言的文件都充满了变量，然后在适用的地方调用这些变量，并且有某种在这些文件之间进行更改的方法。虽然这个想法看起来俗气且不切实际，但我想知道是否有人对我如何做到这一点有任何其他想法。

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:04:11.907

您的想法类似于我使用 CakePHP 的经历，其中包括使用 gettext 文件的国际化支持。ide非常简单。您可以使用转换器函数输出所有需要翻译的字符串。在 Cakephp 1.X 中它是 __() 。所以如果我想翻译一个字符串“hello world”，我会做

```
<?php 
__('hello world');

?> 
```

知道应该翻译成哪种语言的诀窍在于设置会话语言或区域设置。在 Cakephp 中，它将“Config.language”设置为我希望翻译成的语言的简码（对于法语，我会将其设置为“fre”）。然后应用程序将在其语言环境文件夹中查找“fre”目录，从那里读取文件并查找“hello world”的字符串匹配并从那里获取其相应的翻译字符串（这可能不是 100% 准确）。我可以认为这是从文件中返回一个数组，然后使用键来匹配翻译。

```
<?php
return array(
'hello world' => '123456',
);

?> 
```

另一种方法是将字符串及其翻译存储在数据库中

字符串、翻译、语言 ID

然后使用要翻译的字符串和语言 ID 或短代码查询 db。

# ruby-on-rails - Rails，属性确认

> ID：13107076
> 
> 赞同：1
> 
> 时间：2012-10-28T07:19:08.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我不喜欢 Rails 确认验证如何将消息“不匹配确认”附加到父属性......

```
validates(:password, {confirmation: true}) 
```

从用户体验的角度来看，当两者不匹配时，应该将错误传递给确认“不匹配密码”，这更有意义。

似乎忽略了向确认属性添加任何验证...

```
validates(:password_confirmation, {my_validation: true, length: {maximum: 3}}) 
```

**`length`验证仅用于测试目的。请注意，此屏幕截图中的密码确认字段没有错误：

![表格截图](../Images/fd2e2763cd0f004b220778e08e4d72cf.png)

我创建了一个自定义验证，`better_validation`：

```
class BetterConfirmationValidator < ActiveModel::EachValidator
  def validate_each(record, attr_name, value)
    parent_attr = attr_name.to_s
    parent_attr['_confirmation'] = ''
    unless value == record.send(parent_attr)
      record.errors.add(attr_name, :better_confirmation, options.merge(:value => value))
    end
  end
end 
```

`:password_confirmations`但除非我将确认字段命名为不同的名称（即在末尾添加“s”... ），否则它不起作用。

有没有办法告诉 Rails 不要接管并让我对`foo_confirmation`属性应用验证？

谢谢！

## 编辑

型号代码...

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  attr_accessor :password, :password_confirmation

  validates :name,
    presence: true,
    length: { maximum: 50 }
  validates :email,
    presence: true,
    format: { with: /\A.+@[a-z\d\-.]+\z/i },
    uniqueness: true
  validates :password,
    length: { minimum: 6, maximum: 255 },
    presence: { on: :create }
  validates :password_confirmation,
    presence: true,
    better_confirmation: true
.
.
.
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:11:04.903

试试看：

```
validates :password,
  presence: true,
  length: { minimum: 6, maximum: 255 },
  confirmation: true 
```

或者这样：

```
validate :password_confirmation_match

def password_confirmation_match
  self.errors[:password_confirmation] << "does not match password" if self.password_confirmation.to_s != self.password
end 
```

# javascript - 我们如何使用 javascript 在数组中使用正则表达式过滤数组中的元素？

> ID：13107078
> 
> 赞同：7
> 
> 时间：2012-10-28T07:19:17.197
> 
> 标签：javascript, regex, arrays, optimization

假设我有两个数组：一个是正则表达式，另一个是输入。那么，就性能和可读性而言，最好的方法是什么？

```
var regex = [
    '/rat/',
    '/cat/'
    '/dog/',
    '/[1-9]/'
]

var texts = [
    'the dog is hiding',
    'cat',
    'human',
    '1'
] 
```

最终结果是

```
result = [
    'human'
] 
```

好吧，我在想的是做类似的事情`reduce`：

```
// loop by text
for (var i = texts.length - 1; i >= 0; i--) {
    // loop by regex
    texts[i] = regex.reduce(function (previousValue, currentValue) {
        var filterbyRegex = new RegExp("\\b" + currentValue + "\\b", "g");  
        if (previousValue.toLowerCase().match(filterbyRegex)) {
            delete texts[i];
        };
        return previousValue;
    }, texts[i]);
} 
```

但是，这不是可读的吗？也许还有另一种我没有想到的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T07:53:20.540

我可能会去这样的事情

```
var regexs = [
    /rat/i,
    /cat/i,
    /dog/i,
    /[1-9]/i
]

var texts = [
    'the dog is hiding',
    'cat',
    'human',
    '1'
]

var goodStuff = texts.filter(function (text) {
    return !regexs.some(function (regex) {
         return regex.test(text);
    });
}); 
```

但实际上，除非您执行 10,000 次，否则性能差异在这里可以忽略不计。

请注意，这使用了 ES5 方法，这些方法很容易调整（我编了一个我知道的词）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T07:52:29.910

这是我的解决方案：

```
var words = [ 'rat', 'cat', 'dog', '[1-9]' ];

var texts = [ ... ];

// normalise (and compile) the regexps just once
var regex = words.map(function(w) {
    return new RegExp('\\b' + w + '\\b', 'i');
});

// nested .filter calls, removes any word that is
// found in the regex list
texts = texts.filter(function(t) {
    return regex.filter(function(re) {
        return re.test(t);
    }).length === 0;
}); 
```

[http://jsfiddle.net/SPAKK/](http://jsfiddle.net/SPAKK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T07:52:12.137

您显然必须逐个处理文本数组元素。但是，您可以通过加入 '|' 将您的正则表达式组合成一个

您显示的正则表达式数组实际上是简单的字符串。我会删除前导和尾随 / 字符，然后构造一个正则表达式。就像是 ：

```
function reduce (texts, re) {
  re = new RegExp (re.join ('|'));
  for (var r = [], t = texts.length; t--;)
    !re.test (texts[t]) && r.unshift (texts[t]);
  return r;
}

alert (reduce (['the dog is hiding', 'cat', 'human', '1'], ['rat', 'cat', 'dog', '[1-9]'])) 
```

请注意，如果您的 re 字符串包含 RegExp 特殊字符，如 .{[^$ 等，您将需要在字符串中转义它们或在函数中处理它们。

见 jsfiddle：http: [//jsfiddle.net/jstoolsmith/D3uzW/](http://jsfiddle.net/jstoolsmith/D3uzW/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:00:25.513

只是一个想法，将正则表达式数组组合成一个新的正则表达式并将第二个数组组合成一个新字符串，每个值都用一个信号分割，例如@，#，然后使用正则表达式替换匹配部分。

# c - OpenCL：多次循环调用内核后，从设备到主机内存传输获取 INVALID_COMMAND_QUEUE

> ID：13107080
> 
> 赞同：1
> 
> 时间：2012-10-28T07:19:25.107
> 
> 标签：c, osx-snow-leopard, opencl, nvidia

我正在开发一个在循环中多次调用同一个内核的 OpenCL 程序。当我使用 clEnqueueReadBuffer 将设备内存传输回主机时，它报告命令队列无效。

下面是一个调用来启动双音排序的函数，它被缩短以使其更具可读性。设备列表、上下文、命令队列和内核在外部创建并传递给该函数。*list*包含要排序的列表，*size*是*list*中元素的数量。

```
cl_int OpenCLBitonicSort(cl_device_id device, cl_context context, 
    cl_command_queue commandQueue, cl_kernel bitonicSortKernel, 
    unsigned int * list, unsigned int size){

    //create OpenCL specific variables
    cl_int error = CL_SUCCESS;
    size_t maximum_local_ws;
    size_t local_ws;
    size_t global_ws;

    //create variables that keep track of bitonic sorting progress
    unsigned int stage = 0;
    unsigned int subStage;
    unsigned int numberOfStages = 0;

    //get maximum work group size
    clGetKernelWorkGroupInfo(bitonicSortKernel, device, 
        CL_KERNEL_WORK_GROUP_SIZE, sizeof(maximum_local_ws), 
         &maximum_local_ws, NULL);

    //make local_ws the largest perfect square allowed by OpenCL
    for(i = 1; i <= maximum_local_ws; i *= 2){
        local_ws = (size_t) i;
    }
    //total number of comparators will be half the items in the list
    global_ws = (size_t) size/2;

    //transfer list to the device
    cl_mem list_d = clCreateBuffer(context, CL_MEM_COPY_HOST_PTR, 
        size * sizeof(unsigned int), list, &error);

    //find the number of stages needed (numberOfStages = ln(size))
    for(numberOfStages = 0; (1 << numberOfStages ^ size); numberOfStages++){
    }

    //loop through all stages
    for(stage = 0; stage < numberOfStages; stage++){
        //loop through all substages in each stage
        for(subStage = stage, i = 0; i <= stage; subStage--, i++){
            //add kernel parameters
            error = clSetKernelArg(bitonicSortKernel, 0, 
                sizeof(cl_mem), &list_d);
            error = clSetKernelArg(bitonicSortKernel, 1, 
                sizeof(unsigned int), &size);
            error = clSetKernelArg(bitonicSortKernel, 2, 
                sizeof(unsigned int), &stage);
            error = clSetKernelArg(bitonicSortKernel, 3, 
                sizeof(unsigned int), &subStage);

            //call the kernel
            error = clEnqueueNDRangeKernel(commandQueue, bitonicSortKernel, 1, 
                NULL, &global_ws, &local_ws, 0, NULL, NULL);

            //wait for the kernel to stop executing
            error = clEnqueueBarrier(commandQueue);
        }
    }

    //read the result back to the host
    error = clEnqueueReadBuffer(commandQueue, list_d, CL_TRUE, 0,  
        size * sizeof(unsigned int), list, 0, NULL, NULL);

    //free the list on the device
    clReleaseMemObject(list_d);

    return error;
} 
```

在这段代码中： clEnqueueReadBuffer 表示 commandQueue 无效。但是，当我调用 clEnqueueNDRangeKernel 和 clEnqueueBarrier 时它是有效的。

当我将*numberOfStages*设置为 1 并将*stage*设置为 0 时，只调用一次 clEnqueueNDRangeKernel 时，代码可以正常工作而不会返回错误（尽管结果不正确）。多次调用 clEnqueueNDRangeKernel 存在问题（我确实需要这样做）。

我在 Mac OS 10.6 Snow Leopard 上使用 Apple 的 OpenCL 1.0 平台和 NVidia GeForce 9600m。在其他平台上的 OpenCL 中是否可以在循环中运行内核？有人在 OS X 上使用 OpenCL 遇到过这样的问题吗？什么可能导致命令队列无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:02:55.203

可能有多种原因，例如内核中的（全局或本地）内存溢出。

global_ws 也应该是 local_ws 的倍数。

查看 SortingNetworks 示例 [http://developer.download.nvidia.com/compute/cuda/3_0/sdk/website/OpenCL/website/samples.html](http://developer.download.nvidia.com/compute/cuda/3_0/sdk/website/OpenCL/website/samples.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:43:33.173

回答您的一个问题：是的，您可以将任意数量的内核排入命令队列（无论是来自循环内还是其他方式）。我可以确认这至少可以在 Windows 上的 NVIDIA、AMD 和 Intel 驱动程序上正常工作。

# ruby-on-rails - rails 'bundle install' - 手动执行？

> ID：13107081
> 
> 赞同：0
> 
> 时间：2012-10-28T07:19:29.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, installation, bundler

**问题：** 由于代理设置，我无法从命令行执行“捆绑安装”。我收到以下错误。我不知道代理设置，我想继续进行 Rails 开发。

```
Fetching source index for http://rubygems.org/
Could not reach rubygems repository http://rubygems.org/
Could not find gem 'capybara (>= 0)' in any of the gem sources listed in your Ge
mfile. 
```

**问题：** 我们如何手动进行“捆绑安装”（通过浏览器下载 gem 并在命令行中安装）？我只需要安装少量的宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:26:53.663

您*必须*设置代理。如果不是现在，等你的应用程序增长的时候。通过浏览器下载所有的 gem 将变得乏味和可怕的混乱。

请参阅有关[如何在代理后面使用捆绑器的](https://stackoverflow.com/questions/3877055/how-to-use-bundler-behind-a-proxy)相关问题。

# java - 如何以相同的方式使用多个对象？

> ID：13107082
> 
> 赞同：0
> 
> 时间：2012-10-28T07:19:34.297
> 
> 标签：java, polymorphism

我正在寻求在 java 中访问多种不同类型的系统的帮助，就好像它们是相同的一样。

例如，我有课程

```
private class SystemA{

    public void in(boolean input){
      //do x;
    }
    public boolean out(){
      //return x;
    }
} 
```

假设我想要一个不同系统的 ArrayList。这些系统都像 SystemA 一样实现了输入和输出的功能，但它们将是不同的对象，都具有不同的内部架构。

例如，我想遍历上述数组列表，在所有对象上调用 out() - 我怎么能：

存储多种不同的对象类型。确保我可以调用 arraylist 中对象的 in 和 out 函数，而不必担心该对象是一种或另一种特定类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:22:00.693

让您的系统类实现一个新`MySystem`接口：

```
public interface MySystem {
    void in(boolean input);
    boolean out();
} 
```

例如：

```
private class SystemA implements MySystem {
    @Override
    public void in(boolean input) { ... }
    @Override
    public boolean out() { ... }
} 
```

然后，您的`ArrayList`遗嘱将如下所示：

```
List<MySystem> list = new ArrayList<MySystem>();
List<? extends MySystem> list = someFactoryMethod(); 
```

我建议阅读[Java 教程“什么是接口？”](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html) 更多细节。另外，请阅读一般的[“亚型多态性”](http://en.wikipedia.org/wiki/Subtype_polymorphism)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:21:50.210

这是一个广泛的问题。你需要的是多态性。在此处阅读有关 Java 多态性的信息：http: [//home.cogeco.ca/~ve3ll/jatutor5.htm](http://home.cogeco.ca/~ve3ll/jatutor5.htm)

# mysql - 在 MySQL 中同时创建索引

> ID：13107086
> 
> 赞同：3
> 
> 时间：2012-10-28T07:20:54.873
> 
> 标签：mysql, sql, multithreading, parallel-processing

我在 pl/sql 中找到了一个创建**多线程**索引的过程：

```
declare l_job number;
begin
    dbms_job.submit( l_job, 'execute immediate ''alter index idx1 rebuild'';' );
    commit;
    dbms_job.submit( l_job, 'execute immediate ''alter index idx2 rebuild'';' );
    commit;
end; 
```

此过程将并行执行。

我可以在 MySQL 中编写这样的程序吗？MySQL 可以在单独的线程中执行过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:55:13.967

在 MySQL 中，每个客户端连接有 1 个线程。为了使这种并行化，您需要为您希望重建的每个索引启动一个客户端实例，并并行运行这些客户端。这个链接谈到了手头的限制：[http ://www.mysqlperformanceblog.com/2010/10/27/mysql-limitations-part-4-one-thread-per-connection/](http://www.mysqlperformanceblog.com/2010/10/27/mysql-limitations-part-4-one-thread-per-connection/)

# algorithm - 将形状划分为全等的子区域

> ID：13107087
> 
> 赞同：0
> 
> 时间：2012-10-28T07:21:19.540
> 
> 标签：algorithm, shape, geometric-arc

给定一个边相等的不规则多面多边形。有没有什么算法可以把它分成六个大小相等的全等区域？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T08:57:38.783

不可以。这样的细分并不总是可能的：

考虑`P`通过连接两个正多边形`P1`并`P2`具有不同且非常多的边数`N1`和得到的多边形`N2`。这个多边形近似于一对圆盘`C1`并且`C2`在任意精度内。

考虑将其细分为六个全等区域。

考虑 的顶点集`P1`。必须有一个至少包含`(N1)/6`顶点的区域。调用顶点`V1`和区域`R1`。必须有一个区域至少包含 的`(N2)/6`顶点`P2`。将顶点`V2`称为 region `R2`。

如果`R1 != R2`，则必须有一个`R2`到的同余映射`R1`。如果`2*N1 < N2`，这样的映射是不可能的。选择 N2 远大于 N1。

因此，`R1 == R2`. 有一个区域同时包含`V1`和`V2`。每个区域的直径必须大于 的直径`P2`。

使用两圆近似。每个区域必须包含至少 1/6 周长的`C1`弧和至少 1/6 周长的弧`C2`。此外，至少有一个区域位于两个圆圈内，并且没有一个区域完全位于较小的圆圈内。

考虑 的可能同余`R1`。任何同余 1) 是沿主轴的反射或 2) 将 P1 或 P2 映射到 P 外部或 3) 将周长的某些部分映射到 P 的内部。反射是不够的，因此任何细分都必须包含同余将 P1 的某些部分映射到 P1 的内部。

因此，每个区域边界必须包含一个直径为 的凹弧`12`。直观地说，这表明这种细分是不存在的。

* * *

您可以检测到许多类别的多边形：

*   6 阶旋转对称`C6`。这些可以以任何尊重旋转对称性的方式细分。
*   3 阶二面对称`D6`（3 阶旋转 + 镜像）。沿着镜子切割。
*   平铺平面的形状，四个多边形在一个顶点相遇。这些是具有两对匹配相反路径的形状。在一个方向复制切削刃，在另一个方向复制三次。
*   一些形状具有反射对称性，每个单独的一半具有 3 阶旋转对称性。这些也可以被检测和切割。
*   一些形状具有 2 阶旋转对称性，并且可以在具有 3 阶旋转对称性的两个全等区域中切割。沿着边界寻找重复的图案。
*   某些形状具有 3 阶旋转对称性，可以对称地分成三个区域。我不确定我能否可靠地检测到这些形状（检测`C3`很容易，随后的切割不是）而且我是一个人。
*   ...
*   polyominoes 是由正方形组成的形状，polyhexes 是由六边形组成的形状，polyiamonds 是由三角形组成的形状。它们很容易被发现，*有些*甚至有细分。细分（如果存在）也可能难以检测，但*至少*您可以枚举所有符合正确大小的对齐网格的细分，以查看它们是否一致。
*   ...

为了证明问题的复杂性：有一类逻辑谜题，其目标是将一个复杂的形状（60 个正方形）分割成两个全等区域。如果*人类**很难*将一个*多格骨牌*拆分为两个*全等*区域，那么您如何期望*计算机*将一个*一般形状*拆分为*六个*全等区域？

 ***如果您*确实*想检测可以进行细分的大多数情况，则必须在编程时间（以支持越来越多的特殊情况）和测试强度之间进行权衡。对于初学者，坚持使用`C6, D3 and checkerboard tiles => easy to subdivide; polyforms => maybe possible; the rest => probably no subdivision`.***

# python - urllib2.urlopen 破折号和点 urlerror

> ID：13107091
> 
> 赞同：0
> 
> 时间：2012-10-28T07:22:21.100
> 
> 标签：python, django, urllib2, urllib

我遇到了 python urllib2 的 url open 问题

f = urllib2.urlopen(url)

网址 = [http://merchantcircle.com/business/Buffas.Restaurant.and.Lounge.504-949-0038](http://merchantcircle.com/business/Buffas.Restaurant.and.Lounge.504-949-0038)

并得到这个 url 错误 - 之后出现破折号。我想点成为问题

意外错误：类 'urllib2.URLError'

我怎样才能修复这个 url 以便用 urlopen 打开它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:35:25.627

该 URL 没有实际错误。

```
In [1]: import urllib2
In [2]: url = 'http://merchantcircle.com/business/Buffas.Restaurant.and.Lounge.504-949-0038'
In [3]: urllib2.urlopen(url)
Out[3]: <addinfourl at 46996224 whose fp = <socket._fileobject object at 0x2cb6ad0>> 
```

如果您发布一些真实的代码，您可能会得到更好的帮助。

# bash - 为什么“noclobber”出现在 bash 命令参数中

> ID：13107092
> 
> 赞同：2
> 
> 时间：2012-10-28T07:22:40.640
> 
> 标签：bash, alias

~/path/ 中有一堆文件夹，名称以前缀开头，我需要非常频繁地访问它们。我正在尝试在 .bashrc 中创建一个快捷方式，这将使“前缀示例”运行命令“cd ~/path/prefixexample”。

我在函数和别名上都遇到了同样的问题：

```
function prefix(){ "cd ~/path/prefix$1"; }

alias prefix="cd ~/path/prefix$1" 
```

当我输入“prefix 4”（文件夹路径/prefix4 确实存在）时，我得到：

```
bash: cd: path/prefixnoclobber: No such file or directory 
```

我在这台机器上没有管理员权限，所以我无法更改某些内容。

.bashrc 已经包含了一堆东西，但唯一相关的似乎是“set noclobber”。我很确定用字符串“noclobber”替换参数不是 noclobber 开关功能的一部分，并且注释掉这个开关没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:15:46.633

别名命令中的`$1`被替换为安装脚本的第一个参数（显然是“noclobber”），而不是别名/函数的参数。你需要做两件事：

1.  摆脱别名。别名不够灵活，无法满足您的要求，但别名*会*覆盖任何具有相同名称的其他内容（因此会干扰更好的解决方案）。
2.  使用一个函数：

    ```
    prefix() { cd ~/path/prefix"$1"; } 
    ```

# android-ndk - NDK - 带有本机 (JNI) C++ 代码构建问题的 Android Java

> ID：13107104
> 
> 赞同：1
> 
> 时间：2012-10-28T07:25:37.980
> 
> 标签：android-ndk, java-native-interface, native

我在 OSX 的 Eclipse 中使用 NDK r8b 将 Java 和本机 JNI C++ 代码混合用于 android 项目。我希望能够在 std 命名空间中使用常规 C++ 类（映射、字符串）。

在 Android.mk 文件中添加了以下内容：

> APP_STL := stlport_shared

在这里我也尝试了静态库。参考[http://docs.huihoo.com/android/ndk/r5/CPLUSPLUS-SUPPORT.html](http://docs.huihoo.com/android/ndk/r5/CPLUSPLUS-SUPPORT.html)

> STLPORT_FORCE_REBUILD := 真

还尝试删除强制构建。

在 C/C++ 路径和变量中：

> ${NDKROOT}/sources/cxx-stl/stlport/stlport

“map”和“string”标头包含在 .cpp 文件中。我可以使用 std::string 和 std::map。助理接他们。搜索定义时（eclipse 中的 F3）会显示头文件，即已解析。此外，大纲显示了“字符串”和“地图”头文件，双击它们时，它也会将标题带到最前面。

但是，构建并没有选择它们。我得到以下信息：

```
> ndk-build
> Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
> Gdbsetup       : libs/armeabi/gdb.setup
> Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi-v7a/gdbserver
> Gdbsetup       : libs/armeabi-v7a/gdb.setup
> Compile++ arm    : ImageTargets <= ImageTargets.cpp
> xxx/Project/Code/MyImageTarget/jni/ImageTargets.cpp:20:18: fatal error: string: No such file > or directory
> compilation terminated.
> make: *** [xxx/Project/Code/MyImageTarget/obj/local/armeabi/objs->    debug/ImageTargets/ImageTargets.o] Error 1 
```

有谁知道还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T21:36:09.167

在命令行上使用**V=1**参数。`ndk-build`这将回显所有执行的命令，包括编译和链接，以及 NDK 构建分配的所有参数。

在您的情况下，可以在没有详细构建日志的情况下找到答案：

> 在 Android.mk 文件中添加了以下内容：
> 
> `APP_STL := stlport_shared`

这是你的错误。你引用的文件解释说这个设置应该进入`Application.mk`. 这个文件通常被认为是可选的。是的。`APP_STL`您可以在命令行上指定，而不是创建此文件：

```
ndk-build V=1 APP_STL=stlport_static 
```

我不知道 Eclipse 为什么以及如何解析`#include <string>`或**映射**。

# javascript - 如何根据前一行选择的值更改jqgrid中行的内容？

> ID：13107106
> 
> 赞同：0
> 
> 时间：2012-10-28T07:26:42.440
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqgrid 显示页面上的内容，但我想根据我在前一行中选择的值更改当前行列表的内容。就像我们在 javascript 中的 onchange 事件中所做的那样，通过向服务器发送 ajax 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:31:03.817

因此，假设您的数据是从其中一行的下拉列表中选择的，它应该进行 AJAX 调用并相应地填充下一行。看看下面的代码是否对你有任何帮助。

```
$('#select-id').on("change", function(){
  //make an AJAX call, retrieve data in 'data' variable
  var trdata = '<td>'+data.element1+'</td>'+'<td>'+data.element2+'</td>';
  $(this).closest('tr').next().html(trdata);
}); 
```

# ruby-on-rails - Ruby 1.9.3 哈希中的乘客错误

> ID：13107110
> 
> 赞同：1
> 
> 时间：2012-10-28T07:27:32.470
> 
> 标签：ruby-on-rails, apache, passenger, compatibility, ruby-1.9.3

我正在尝试在*Apache上设置我的**Rails*应用程序。我正在使用 Passenger 加载我的*Rails App*。似乎*Passenger*不支持新的Ruby 哈希格式，但支持旧的。我使用的 Ruby 版本是***`x: y``:x => y``1.9.3`***

 ***这是我收到的错误消息：

```
categories_controller.rb:12: syntax error, unexpected ':', expecting '}' format.json { render json: @categories }
categories_controller.rb:23: syntax error, unexpected ':', expecting '}' format.json { render json: @category }
categories_controller.rb:34: syntax error, unexpected ':', expecting '}' format.json { render json: @category }
categories_controller.rb:50: syntax error, unexpected ':', expecting '}' ...redirect_to @category, notice: 'Category was successfully cr...
categories_controller.rb:51: syntax error, unexpected ':', expecting '}' ... format.json { render json: @category, status: :created, ...
categories_controller.rb:51: syntax error, unexpected ':', expecting '=' ...ender json: @category, status: :created, location: @category... 
categories_controller.rb:53: syntax error, unexpected ':', expecting '}' format.html { render action: "new" }
categories_controller.rb:54: syntax error, unexpected ':', expecting '}' ... format.json { render json: @category.errors, status: :un...
categories_controller.rb:54: syntax error, unexpected ':', expecting '=' ...son: @category.errors, status: :unprocessable_entity }
categories_controller.rb:66: syntax error, unexpected ':', expecting '}' ...redirect_to @category, notice: 'Category was successfully up...
categories_controller.rb:69: syntax error, unexpected ':', expecting '}' format.html { render action: "edit" }
categories_controller.rb:70: syntax error, unexpected ':', expecting '}' ... format.json { render json: @category.errors, status: :un...
categories_controller.rb:70: syntax error, unexpected ':', expecting '=' ...son: @category.errors, status: :unprocessable_entity } 
```

是否有任何解决方法。我不想将所有哈希转换为 :x => y 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:40:08.550

我认为您的乘客正在使用 Ruby 1.8.x。

将您的乘客切换到 3.2 版本，以确保您为此 rails 应用程序使用 1.9.3。

参考：[https ://serverfault.com/a/388821](https://serverfault.com/a/388821)***

# css - 在所有页面中包含样式表 asp vbscript

> ID：13107111
> 
> 赞同：-1
> 
> 时间：2012-10-28T07:27:50.853
> 
> 标签：css, asp-classic, vbscript, include

如何将页面、样式表或指向它们的链接自动包含到我的 ASP VBscript 页面中？我读过一些关于“全球”页面的内容，但我不确定它们的含义以及我如何能够完成这样的事情。我确信这是一个简单的问题，但它对我有很大帮助，因为我已经写了 2 天的 VBscript！总的来说，我也不是 HTML 方面的专家，但我觉得我对事物的掌握相当好。我希望有一个很好的详细示例，说明“全局”页面如何与我的其他 ASP 页面一起使用。

我正在设置我的第一个站点...我打算以后构建的主站点的管理站点。在继续使用公共站点之前，我想把我所有的鸭子排成一排。有人可以给我一些关于如何在我的网站中自动包含这些页面/链接的详细信息（页面包括（页眉/页脚）、样式表等），而无需在`<!--#include file....`我制作的每个页面上使用，因为那是种痛苦，我相信有一个更简单的方法。如果有，我知道你可以帮忙！在此先感谢，我期待听到可用的选项/可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:17:32.600

您要查找的术语是 Master Page，而不是 Global Page，这可能就是您在 Google 上很难找到所需内容的原因。基本上将母版页视为模板。您创建一个母版页，然后将其他页面加载到其中。您将内容占位符放入母版中，然后填充到您的其他页面上。

所以一个非常基本的例子看起来像这样。

```
<%@ Master Language="VB" CodeFile="general.master.vb" Inherits="master1_general"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head id="Head1" runat="server">
<link rel="stylesheet" type="text/css" href="/styles/main.css?v2"/>

<asp:ContentPlaceHolder id="head" runat="server">
</asp:ContentPlaceHolder>

</head>

<body>
<form id="form1" runat="server">
    <asp:ContentPlaceHolder id="body" runat="server">
    </asp:ContentPlaceHolder>
</form>
</body>
</html> 
```

然后您的各个页面将如下所示：

```
<%@ Page Language="VB" MasterPageFile="~/master/general.master" AutoEventWireup="false" CodeFile="base.aspx.vb" Inherits="_Default" title="Opportunities" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

//any additional head stuff specific to this page goes here.

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="body" Runat="Server" >

//your body mark up goes here.
</asp:Content> 
```

注意母版页实际上是一个网页。然后它在某些地方有占位符。在这个中，头部有一个占位符，身体有一个。然后在各个页面上，我确定要使用哪个母版页以及占位符中包含哪些数据（如果有）。我总是在头部包含一个占位符，因此我可以仅在该页面上加载特定页面所需的 js 或资源。

然后各个页面只是占位符中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T11:28:12.623

如果您坚持使用 ASP Classic，您可能会找到一些方法来处理类似功能的母版页，但据我所知，框架并不支持这种方法。

**[编辑] 鉴于对原始问题的编辑，首先演示的方法并不那么有趣，因此我也建议另一种方法。**

您可以制作一个通用的 ASP 页面，为网站的所有流量提供服务。然后一个查询参数指定应该显示哪个子页面。子页面被制成单独的 ASP 页面，由通用/母版页或另一个子页面执行。一个非常粗略的例子可能如下所示：

```
<%
url = Request.QueryString("url") & ""
if url = "/" or url = "" then
  subpage = "home.asp"
else
  subpage = url & ".asp"
end if
%>
<!DOCTYPE html>
<html>
<head>
  <title>Header for all pages</title>
  <link rel="stylesheet" href="/css/site.css" />
</head>
<body>

    <% Server.Execute(subpage) %>

</body>
</html> 
```

然后应该以这种方式处理该站点：

```
www.domain.com/default.asp?url=/contact 
```

这会将contact.asp子页面加载到母版页中，或者：

```
www.domain.com/default.asp?url=/user/1234/profile 
```

加载用户的个人资料页面（由文件夹 user/1234 中的 profile.asp 显示）。最后一个示例引发了一些问题，因为每个用户都必须拥有一个包含所有 asp 文件的文件夹（这远非最佳），因此您可能希望对 url 查询参数进行一些解释，以更智能的方式重定向输入。

另一个问题是子页面本身就是 ASP 页面，这意味着有人可以直接引用它们。这需要采取一些措施来保护这些子页面不被直接引用。可以做到，但这可能意味着包含一些代码 => 回到原点！

这种方法的另一个缺点是子页面在它们自己的上下文中呈现，因此无法从调用页面的上下文中访问功能和数据。这意味着必须以其他方式（会话、应用程序、数据库或其他方式）共享全局数据。数据也不能传递到子页面（不，Server.Execute 不允许查询参数）。

**包含方式**

就我个人而言，我认为您可以通过使用页眉/页脚包含来获得最大的灵活性，如我的原始帖子中所示，如下所示。

一种方法是将您的一般内容放入包含中，然后在每个 ASP 页面上包含这些位。例如：

```
<!-- #include virtual="/includes/header.asp" -->

content goes here

<!-- #include virtual="/includes/footer.asp" --> 
```

你的 header.asp 可能看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
  <title>Header for all pages</title>
  <link rel="stylesheet" href="/css/site.css" />
</head>
<body> 
```

和 footer.asp 像这样：

```
</body>
</html> 
```

这种策略有一些缺点。标题是相当静态的，可能会给 SEO 带来一些问题；一方面，标题应该适合页面内容，这在包含包含标题标记时很难完成。这可以通过在包含部分之前设置的一些全局变量来促进，即：

```
<%
title = "Title for this page's content"
%> 
<!-- #include virtual="/includes/header.asp" -->

content goes here

<!-- #include virtual="/includes/footer.asp" --> 
```

然后像这样在标题中

```
<!DOCTYPE html>
<html>
<head>
  <title><%=title%></title>
  <link rel="stylesheet" href="/css/site.css" />
</head>
<body> 
```

但这已经开始有点“味道”了，因为您为包含文件中的包含页面设置了一些期望。至少在构建页面时您必须非常自律。

# android - 代码有问题吗？

> ID：13107113
> 
> 赞同：1
> 
> 时间：2012-10-28T07:28:41.917
> 
> 标签：android, sqlite

我有一个获取歌曲 id 的函数。id 是一个主要字段和自动增量。但不知何故，每当我调用此函数时，它都会返回-1，即未找到结果。我解决问题的方式有问题吗？

```
int getIdForSong(Song song){

        String selectQuery = "SELECT id FROM " + TABLE_SONG + " WHERE " + SONG_TITLE + "= ' " + song.getSongTitle() + "' AND " + ARTIST_NAME + "= ' " + song.getArtistName()+" ' ";
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        cursor.moveToFirst();
        if(cursor.moveToNext() && cursor != null){
            int id = Integer.parseInt(cursor.getString(0));
            return id;
        }
        else
            return -1;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:33:17.607

我看到额外的空格：

```
' " + song.getArtistName()+" ' 
```

因此，如果您的艺术家名称是“Green Day”，它将变为“Green Day”

相似地：

```
"= ' " + song.getSongTitle() + "' 
```

所以“碎梦大道”变成了“碎梦大道”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:31:37.297

```
String selectQuery = "SELECT id FROM " + TABLE_SONG + " WHERE " + SONG_TITLE + "= '" + song.getSongTitle() + "' AND " + ARTIST_NAME + "= '" + song.getArtistName()+"' "; 
```

# ruby - 使用 ruby 和 simple_statistics 计算移动平均值并附加到 JSON

> ID：13107114
> 
> 赞同：0
> 
> 时间：2012-10-28T07:28:42.043
> 
> 标签：ruby, yahoo-finance

我正在尝试计算移动平均线（简单和指数），并且遇到了 simple_statistics gem，它非常适合我的需求。我正在尝试修改此链接中的代码：[如何计算简单移动平均](https://stackoverflow.com/questions/12883917/how-to-calculate-simple-moving-average)线）用于我的目的。

目标：我有一个这样的 JSON，它列出了一只股票在很长一段时间内的历史价格：

```
[
  {
    "Low": 8.63,
    "Volume": 14211900,
    "Date": "2012-10-26",
    "High": 8.79,
    "Close": 8.65,
    "Adj Close": 8.65,
    "Open": 8.7
  }, 
```

为此，我想添加 20 天和 50 天平均值（以及其他所需的其他）的每一天的移动平均线（简单和指数 - simple_statistics gem 似乎很容易做到），因此每天都会出现这样的情况：

```
[
  {
    "Low": 8.63,
    "Volume": 14211900,
    "Date": "2012-10-26",
    "High": 8.79,
    "Close": 8.65,
    "Adj Close": 8.65,
    "Open": 8.7,
    "SMA20":
    "SMA50":
  }, 
```

我更喜欢使用 yahoo_finance 和 simple_statistics gem，然后将输出附加到原始 JSON，因为我觉得一旦我获得了更好的理解，修改起来会更容易。

现在，我仍在阅读我将如何做到这一点（感谢任何帮助） 下面是我尝试计算 Microsoft 的 20 天简单移动平均线（不起作用）。这种方式（使用HistoricalQuotes_days）似乎假设开始日期是今天，这对我的总体目标不起作用。

```
require 'rubygems'
require 'yahoofinance'
require 'simple_statistics'

averages = {}

dates.each do |dates|
  quotes = YahooFinance::get_HistoricalQuotes_days ( 'MSFT' , 20 ) start, finish
  closes = quotes.collect { |quote| quote.close }
  averages = closes.mean
end 
```

谢谢

更新：我实际上不需要使用 YahooFinance gem，因为我已经拥有 JSON 中的数据。我不知道该怎么做是从 JSON 数组中提取，使用 simple_statistics gem 进行计算，然后将新数据添加到原始 JSON 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:18:49.280

使用 gem，我看到了两种获取数据的方法。他们在这里（注意他们都可以阻止）：

```
YahooFinance::get_HistoricalQuotes_days('MSFT', 20) 
```

它使用以下方法返回 YahooFinance::HistoricalQuote 对象数组：

```
[ :recno, :recno=, :symbol, :symbol=, :date, :date=, 
  :open, :open=, :high, :high=, :low, :low=, :close, 
  :close=, :adjClose, :adjClose=, :volume, :volume=, 
  :to_a, :date_to_Date  ] 
```

或者：

```
YahooFinance::get_historical_quotes_days('MSFT', 20) 
```

[它从文档](http://www.transparentech.com/projects/yahoofinance)中返回一个值数组：

```
Getting the historical quote data as a raw array.
The elements of the array are:
  [0] - Date
  [1] - Open
  [2] - High
  [3] - Low
  [4] - Close
  [5] - Volume
  [6] - Adjusted Close 
```

要取平均值（简单移动平均线），您可以轻松做到：

`ary.reduce(:+) / ary.length`

将值保持在哪里`ary`（需要浮点数或整数除法）。要进行指数移动平均，只需使用以下公式：

```
(close - previous_ema) * (2 / (amount_of_days_ago + 1) ) + previous_ema 
```

其中 close 是股票的收盘价，previous_ema 是昨天的 ema，amount_of_days_ago 是过去的平均值范围，例如 20（天）。

## 编辑

哦。是的，解析 json 很简单：[https ://github.com/flori/json](https://github.com/flori/json)

我无法编写完整的 ruby​​ 入门指南，但您需要的基础知识是`Hash`和`Array`. 查看如何使用 ruby​​ 哈希和数组，这可能是 30% 的 ruby​​ 编程。

例如，要获取数组中的 json 对象，然后只获取关闭值，您可以像这样使用 Array#map：

```
stocks = JSON.parse( your_json_here )
array = stocks.map{ |hash| hash["Close"] }
# => [8.65, 9.32, etc... ] 
```

希望这能让你开始，祝你好运

# java - java中，如何快速注释几行代码？

> ID：13107116
> 
> 赞同：10
> 
> 时间：2012-10-28T07:28:59.140
> 
> 标签：java, debugging, annotations

我想测试某些代码块的运行时间如下：

```
start = System.currentTimeMillis();
{
   ...
   this.dosomething();
}
end = System.currentTimeMillis();
System.out.println(end - start); 
```

当我优化代码块时，如何注释那些快速计算时间的代码，如下所示？

```
//start = System.currentTimeMillis();
{
   ...
   this.dosomething();
}
//end = System.currentTimeMillis();
//System.out.println(end - start); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T08:02:03.560

只需使用分析器。它将以最小的占用空间自动检测您的代码，显示各种统计数据和热点。查看JVisualVM 、[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)或[YourKit中](http://www.yourkit.com/)[内置](http://www.baptiste-wicht.com/2010/07/profile-applications-java-visualvm/)的分析器。

当您不需要它时，您无需为此支付任何费用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T07:44:52.517

您可以使用它`annotation processing`来创建`compile time` `annotations`和生成源代码。

本文讨论如何[`Properties via Annotation Processing`](https://blogs.oracle.com/darcy/entry/properties_via_annotation_processing)使用注释生成代码。您可以定义自定义注释，如`@Start`, `@End`，`@Calculate`并像下面这样使用它们。如果您不生成源代码，它们无论如何都会被删除。

```
@Start
{
      ...
      this.dosomething();
}
@End
@Caclulate 
```

注意：它不能修改被检查的代码，所以你需要创建子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T07:46:07.523

通过从一开始就将用于性能测量的代码与主要代码分开。执行以下操作之一：

*   正如他的回答中所描述的chm052，带有一些标志和受保护的命令；
*   通过使用带有这些受保护命令的日志框架，例如[SLF4J](http://www.slf4j.org/)；
*   通过使用[（微）基准测试工具](https://stackoverflow.com/q/7146207/750378)，它可以帮助您进行良好的时间测量、统计和受保护的命令（例如通过 AspectOrientedProgramming）。您绝对应该使用这样的工具来获得明智的测量结果（参见例如[https://stackoverflow.com/a/7120803/750378](https://stackoverflow.com/a/7120803/750378)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T07:46:52.733

chm052 提出的方法肯定行得通，但是它将时间测量时间逻辑耦合到您的业务方法中，这是不可取的。毕竟编写方法来执行“dosomething（）” - 在这些之前和之后你想要测量时间。明天你会想要记录语句链接“进入方法/离开方法doSomething”，过一段时间你可能想要检查这段代码是否可以运行的权限。

我希望你明白我的意思，虽然这种方法适用于简单的项目，但它会污染你的代码，带来不相关的问题

有几种技术。

1.  AOP，这已经由 Joachim Isaksson 提出。AOP 确实在这方面大放异彩。创建一个建议，您将在其中使用您的时间测量逻辑，然后您就可以开始了。

2.  如果你想/需要坚持 OOP 技术，我建议你创建一个[代理](http://en.wikipedia.org/wiki/Proxy_pattern) 或[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)

从技术上讲，它真的很接近，只是你如何记住你关心的意图。

希望这可以帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T07:34:56.447

如果你只是想要一些简单的东西，`debug`当你想要打印调试信息时，你总是可以有一个（布尔）变量为真，例如：

```
if (debug) start = System.currentTimeMillis();
{
   ...
   this.dosomething();
}
if (debug) {
    end = System.currentTimeMillis();
    System.out.println(end - start);
} 
```

当我这样做时，我经常`debug`使用命令行参数进行设置，因此无需更改代码即可切换调试模式。

**编辑：**如果您可能想在程序的其他地方重复此结构，我肯定会使用其他答案中提到的 AOP。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-28T07:43:05.190

我不是很清楚你的意思。如果你只是想注释代码，那么快捷键是 eclipse 中的 ctrl+/。如果你尝试在你的项目中编写这种代码，你可以使用 log4j 来做这种事情。

# oracle - 在 Oracle 存储过程中解析 base64 X509 证书？

> ID：13107117
> 
> 赞同：2
> 
> 时间：2012-10-28T07:29:16.593
> 
> 标签：oracle, plsql, base64, x509

我有一个 base 64 二进制格式的证书 x509。如何使用 Oracle 检索有关证书的信息？我必须得到这个证书的序列号。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-15T20:29:35.317

Oracle 论坛上有一个解决方案：[SQL to extract specific attributes from an x​​509 digital certificate](https://community.oracle.com/thread/2466746)

代码（原件用于存储为 CLOB 的证书，我将其修改为 BLOB 并返回序列号）：

```
create or replace and compile java source named testx509src
 as
  import java.security.cert.*;
  import java.io.*;
  import java.sql.*;
  import oracle.sql.BLOB;
  import oracle.sql.NUMBER;

  public class TestX509 {
      public static NUMBER getSerialNumber(BLOB cert)
              throws SQLException, IOException, CertificateException {

          Connection conn = (Connection) DriverManager.getConnection("jdbc:default:connection:");
          BufferedInputStream is = new BufferedInputStream(cert.getBinaryStream());

          CertificateFactory cf = CertificateFactory.getInstance("X.509");
          X509Certificate c = (X509Certificate) cf.generateCertificate(is);
          is.close();

          return new oracle.sql.NUMBER(c.getSerialNumber()); 

      }
  }
/

CREATE OR REPLACE FUNCTION CERT_getSerialNumber(cert in blob)
  RETURN NUMBER
  AS LANGUAGE JAVA
  NAME 'TestX509.getSerialNumber(oracle.sql.BLOB) return oracle.sql.NUMBER';
/

SQL> select CERT_GetSerialNumber(cert) serial from cert_storage where id = 1;

serial
-----------------------
243435653237 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T09:31:21.907

在对证书进行 base64 解码后，您很可能会获得 X.509 v3 证书的 DER 编码 ASN.1 结构（足够的关键字可以继续搜索答案）。

我不知道 ASN.1 解析器的任何 PL/SQL 实现，解析 DER 编码的内容，但是可以学习 ASN.1 结构（序列、整数等）及其 DER 格式的二进制表示，然后在 PL/SQL 中逐字节进行解析。=> 序列号接近 DER-content 的开头，所以不需要支持解析每个 ASN.1 元素来提取序列号。

您可能必须查看 X.509[证书结构/模板](http://en.wikipedia.org/wiki/X.509#Sample_X.509_certificates)，解释如何从基本 ASN.1 元素构造证书，然后解析/提取元素并获取您感兴趣的信息。

更详细的证书内容描述：X.509 证书包含一些数据字段，如版本、序列号、有效起始/截止日期、颁发者 DN（可分辨名称）、主题 DN、主题公钥、签名哈希算法等。然后，该信息由证书颁发者“签名”：颁发者根据上述信息创建一个哈希码（例如使用 SHA-1 算法），然后使用颁发者的私钥对其进行加密（RSA 加密）。拥有颁发者的公钥并信任颁发者，可以使用颁发者的公钥解密颁发者加密的哈希码，然后使用相同的算法从证书详细信息创建哈希码，最后将计算的哈希与颁发者的哈希码进行比较创建的。如果这些匹配，则意味着没有人修改细节，所以如果发行者是可信的，

X.509 证书以（右侧显示的数据类型）开头：

```
Certificate                SEQUENCE
    Data                   SEQUENCE
        Version            [0] { INTEGER }
        Serial Number      INTEGER 
```

每个元素都以一个指示元素类型的标记字节开始，然后是元素长度，然后是元素内容。如果元素包含少于 128 个字节，则长度字段只需要一个字节来指定内容长度。如果超过 127 个字节，长度字段的第 7 位设置为 1，第 6 到 0 位指定用于标识内容长度的附加字节数。对于 X.509 证书，版本被包装在特定于上下文的标签 [0] 中。

可以从网上[免费下载解释 ASN.1 的书籍。](http://www.oss.com/asn1/resources/books-whitepapers-pubs/asn1-books.html)

```
Here's an example for analysing the beginning of a certificate:
    30 82 02 D7 30 82 02 40 A0 03 02 01 02 02 01 01 ...
Interpretation:
    30 = Start of Certificate SEQUENCE
    82 = sequence length are the following two bytes
    02 D7 = sequence length 0x02D7 (Big Endian order of bytes)
    30 = Start of Data SEQUENCE
    82 = sequence length are the following two bytes
    02 40 = sequence length 0x0240 (Big Endian order of bytes)
    A0 = start of context-specific element [0]
    03 = length of context-specific element [0]
    02 01 02 = content of context-specific element [0] (Version INTEGER)
        (02=start of Version INTEGER,
         01=length of the integer,
         02=Version value (zero-based, so value 02 actually means v3))
    02 = Start of Serial Number INTEGER
    01 = Length of Serial Number INTEGER
    01 = The serial number itself
    ... 
```

当然，在您的情况下，序列号的长度可能大于此处显示的一个字节。

# css - 如何从 Opera 中的 input[type="number"] 中删除箭头

> ID：13107118
> 
> 赞同：136
> 
> 时间：2012-10-28T07:29:58.290
> 
> 标签：css, html, forms, input, opera

只是想删除这些箭头，在某些情况下很方便。

但是，我想保留浏览器对纯数字内容的认识。因此，将其更改`input[type="text"]`为不是可接受的解决方案。

* * *

现在 Opera 是基于 webkit 的，这个问题是重复的：[我可以隐藏 HTML5 数字输入的旋转框吗？](https://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-inputs-spin-box)

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2014-03-10T17:20:42.963

我一直在使用一些简单的 CSS，它似乎删除了它们并且工作正常。

```
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    margin: 0; 
}
```

```
<input type="number" step="0.01"/>
```

[本教程来自 CSS Tricks 详细解释并展示了如何设置它们的样式](http://css-tricks.com/snippets/css/turn-off-number-input-spinners/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-28T08:14:14.717

这些箭头是[Shadow DOM](http://www.w3.org/TR/shadow-dom/)的一部分，它们基本上是页面上隐藏的 DOM 元素。如果您对这个想法不熟悉，[可以在这里找到](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)一本很好的介绍性读物。

在大多数情况下，Shadow DOM 为我们节省了时间并且很好。但是有些情况，比如这个问题，你想修改它。

您现在可以在 Webkit[中使用正确的选择器](https://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-inputs-spin-box)修改这些，但这仍处于开发的早期阶段。Shadow DOM 本身还没有统一的选择器，因此 webkit 选择器是专有的（而且它不仅仅是附加的问题`-webkit`，就像在其他情况下一样）。

正因为如此，Opera 似乎还没有开始添加它。但是，查找有关 Opera Shadow DOM 修改的资源很困难。我发现一些[不可靠的互联网资源都说或暗示 Opera 目前不支持 Shadow DOM 操作。](http://my.opera.com/community/forums/topic.dml?id=1422602)

我花了一些时间浏览 Opera 网站，看看是否有人提到它，并试图在 Dragonfly 中找到它们……搜索都没有运气。由于在这个问题上的沉默，以及Shadow DOM + Shadow DOM 操作的发展性质，似乎可以肯定的结论是你不能在Opera 中做到这一点，至少目前是这样。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-28T07:51:33.113

没有办法。

这个问题基本上是重复的[Is there a way to hide the new HTML5 spinbox controls shown in Google Chrome & Opera?](https://stackoverflow.com/questions/3527865/is-there-a-way-to-hide-the-new-html5-spinbox-controls-shown-in-google-chrome-o) 但也许不是完整的副本，因为已经给出了动机。

如果目的是“浏览器意识到内容是纯数字的”，那么您需要考虑这意味着什么。在某些情况下，箭头或微调器是使数字输入更舒适的一部分。另一部分是检查内容是否为有效数字，在支持 HTML5 输入增强的浏览器上，您可以使用该`pattern`属性来做到这一点。该属性还可能影响第三个输入特征，即可能出现的虚拟键盘的类型。

例如，如果输入应该正好是五位数字（在某些国家/地区可能是邮政号码），那么`<input type="text" pattern="[0-9]{5}">`可能就足够了。当然，如何处理它取决于实现。

# php - PHP中具有静态范围变量的未定义变量

> ID：13107123
> 
> 赞同：-2
> 
> 时间：2012-10-28T07:30:59.107
> 
> 标签：php

在 PHP 中使用“静态”时出现问题。这是我的代码：

```
static $a = 12;
if(0) {
static $b = 11;
static $a = 11111;
}
echo $a.'----------'.$b; 
```

为什么输出是“11111----------”并得到“注意：未定义的变量：b”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:38:44.530

这一定是范围问题，但我不确定*为什么，*因为它不在函数中。不管怎样，我让它像这样工作：

```
static $a = 12;
static $b; // <-- notice this
if (0) {
    static $b = 11;
    static $a = 11111;
}
echo $a.'----------'.$b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:43:51.483

作为您的问题的解决方案，请参考以下代码片段

```
 <?php 
     static $a = 12;
     static $b ;
     if(0) {
       static $b = 11;
       static $a = 11111;
      }

     echo $a.'----------'.$b;
    ?> 
```

在上面的代码片段中，变量 $b 是在 if 块中定义的。在条件块或循环块中定义的变量只能在该块中访问。所以它需要全局声明。然后只有它可以在全局范围内访问

# c# - 存储报废数据的最简单方法

> ID：13107128
> 
> 赞同：2
> 
> 时间：2012-10-28T07:31:43.767
> 
> 标签：c#, database, screen-scraping

我正在创建一个应用程序，它将在一种语言中搜索函数的文档并返回结果。目前，文档由一个页面组成，该页面链接到专用于所选功能的页面。我准备了一种使用 HTML Agility Pack 检索数据的方法。我也有一个算法来搜索关键字。我只需要一种存储数据的方法。对我来说，易用性比效率更重要，在这种情况下，因为应用程序只需要存储大约 75 条记录。

这是我提出的潜在解决方案的列表：

1.  System.Data.SQLite
2.  CSV
3.  XML

我认为这些是大多数人会立即提出的解决方案。到目前为止，我已经尝试了解决方案 1，对于相对较少的记录来说，这似乎比必要的工作要多。

对于这个项目，你会建议什么存储方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:59:58.103

如果数据集相对较小并且速度不是问题，我会选择 XML。如果您正确设计了您的类并且它是可序列化的，那么您可以只使用 Xml 序列化中的构建。

```
[Serializable]
public class MyDataStorage
{
    // some members

    public void Store( String filename )
    {
        XmlSerializer serializer = new XmlSerializer( typeof( MyDataStorage ) );
        using ( FileStream stream = File.OpenWrite( filename ) )
        {
            serializer.Serialize( stream, this );
        }
    }

    public static MyDataStorage Load(String filename )
    {
        XmlSerializer serializer = new XmlSerializer( typeof( MyDataStorage ) );
        object deserialized;
        using ( FileStream stream = File.OpenRead( filename ) )
        {
            deserialized = serializer.Deserialize( stream );
        }

        return (MyDataStorage) deserialized;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:15:09.983

对于平面数据，csv。否则为 xml 或 json。

# c# - 表名作为主键的一部分

> ID：13107129
> 
> 赞同：0
> 
> 时间：2012-10-28T07:32:18.817
> 
> 标签：c#, sql-server, linq-to-sql, composite-primary-key

我的项目中有一个来自[http://doddleaudit.codeplex.com/](http://doddleaudit.codeplex.com/)的审计跟踪系统。正如您在此图像上看到的，它记录了**EntityTable** - 这是表名和**EntityTableKey** - 这是主键![在此处输入图像描述](../Images/99bf794eea84140eac03e42c0df6fc09.png)

我想将审计记录与它有记录器的表相关联，然后在 linq to sql 中查询结果。但问题是，如果审计表有**订单**记录和**产品**记录，它永远不会只通过主键知道记录属于哪里，因此我需要使用表名作为键的一部分。

所以问题是：是否有可能创建一个具有包含表名的复合主键的关系？

```
AuditRecord to Orders
AuditRecord to Products 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:21:22.760

你可以这样做，但我会推荐一种不同的方法。

不要在 PK/FK 中使用 char/varchars/nvarchar，它会使索引膨胀。我宁愿创建另一个表来保存所有表的 TableId/TableName 对（如果你愿意，你可以使用 sys.tables.object_id 作为你的 id）并在 AuditRecords 中有一个 FK。然后在 AuditRecords 和 AuditRecordFields (Id, TableId) 之间建立复合键。

另一件事：

*   EntityTable 和 AssociationTable 应该是 sysname 类型
*   AuditDate 可以是 Date 类型（可从 SQL Server 2008 获得）

编辑：

如果您想从每个对象访问审计记录，您可以为审计对象创建一个基类并实现以下方法（注意，它未经测试）：

```
public IQueryable<AuditRecord> AuditRecords
{
    get
    {
        MyContext ctx = new MyContext();

        var ars = from ar in ctx.AuditRecords
                  where ar.EntityTable.Equals(this.GetType().Name)
                  select ar;

        return ars;
    }
} 
```

# php - Facebook授权（oauth）将应用程序重定向到iFrame（在php中）

> ID：13107136
> 
> 赞同：0
> 
> 时间：2012-10-28T07:34:41.067
> 
> 标签：php, facebook, login, oauth

我的 facebook 应用程序在授权时被重定向到 iFrame 之外。我已经使用了来自 gitHub 的 facebook.php 和 base_facebook.php 没有任何更改，并且几乎遵循了 example.php。我可能会错过什么？：

```
$facebook = new Facebook(array(
    'appId'  => $configParam['appId'],
    'secret' => $configParam['secret']
));
$appId=$configParam['appId'];
$user = $facebook->getUser();
if ($user==null) {
    $loginUrl = $facebook->getLoginUrl(array(
            'scope' => $perm
                ));     
    $loginUrl = $facebook->getLoginUrl();
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
} 
```

loginUrl 在 base_facebook.php 中构造为：

```
$this->establishCSRFTokenState();
$currentUrl = $this->getCurrentUrl();
return $this->getUrl(
'www',
'dialog/oauth',
array_merge(array(
        'client_id' => $this->getAppId(),
        'redirect_uri' => $currentUrl, // possibly overwritten
        'state' => $this->state),
      $params)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:01:05.887

这是您为解决这两个问题而需要注意的事情的组合：1\. facebook 授权将应用程序重定向到 iFrame 之外（如 ifaour 所述） 2\. 应用程序进入循环 3\. 应用程序仅在 IE 中进入循环

对于 (1)，所有内容都必须始终为 https（或 http）。我确实将我的安全画布 URL 设为 https，但将我的画布 URL 保留为 http（我认为这很好）。显然，两者都应该是https

对于 (2)，GitHub 上的 OOB facebook-php 集成代码使用当前 URL 作为 redirect_uri。您必须将其更改为 apps.facebook.com/namespace - 请注意，这必须在 base_facebook.php 中的两个地方完成 - getLoginUrl 和 getAccessTokenFromCode

对于 (3) 看看[为什么我的 FB 应用程序在 IE 中永远循环？](https://stackoverflow.com/questions/7083738/why-my-fb-app-loops-forever-in-ie)

# php - 限制用户从我的网站重定向到另一个网站

> ID：13107142
> 
> 赞同：-3
> 
> 时间：2012-10-28T07:36:06.400
> 
> 标签：php, javascript, jquery

我想限制用户从我的网站停止重定向到另一个网站。例如，我的网站是 www.paktutorial.com，并且有一个指向网站 www.google.com 的链接。但我希望该用户不要导航到 google.com（我想要那里的链接，但不要重定向）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:44:17.047

这是我从你的问题中了解到的。

[http://jsfiddle.net/84ATs/1/](http://jsfiddle.net/84ATs/1/)

HTML

```
<a href="www.google.com">link 1</a>
<a href="www.paktutorial.com">link 2</a> 
```

JS

```
$('a').on("click", function(e){
  if($(this).attr('href').indexOf(window.location.host)==-1)
    e.preventDefault();
}); 
```

所以基本上我会在窗口的 URL 中查看单击的锚标记的目标 URL 是否具有相同的主机，如果没有，则阻止窗口重定向。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:55:40.687

作为您的问题的解决方案，请参考以下 HTML 代码片段。您需要按以下方式定义锚标记。

```
 <a href="javascript:void(0);">link</a> 
```

在锚元素的 href 属性中指定 javascript:void(0) 将阻止其默认行为，因为 void 运算符返回 null ，结果浏览器将无法加载新页面。

有关 javascript:void(0) 的更多文档，请参阅以下 url [http://www.tizag.com/javascriptT/javascriptvoid.php中提到的文档](http://www.tizag.com/javascriptT/javascriptvoid.php)

# linux - 在任意初始化的内存块周围加载 ELF 二进制文件

> ID：13107143
> 
> 赞同：0
> 
> 时间：2012-10-28T07:36:18.857
> 
> 标签：linux, memory-management, process

我正在做一个项目，该项目需要我在运行时确定的内存地址处将一些数据加载到内存中，然后将 ELF 二进制文件加载到相同的地址空间中。我知道我可以将 ELF 编译为与位置无关，但是如何分配我的内存块，*然后*加载并运行二进制文件而不覆盖内存块或移动到不同的地址空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T12:29:00.177

Exec 替换了整个内存空间，我认为您对此无能为力。但也许您可以使用共享内存在新旧进程之间共享数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:27:37.413

您可以将 ELF 二进制文件编译为共享库，然后将其动态链接到您的原始进程吗？动态链接器应该尊重现有的 malloc/mmap 内存分配，而不是踩到它们。

# dependency-injection - 如何在 Google Guice 中动态确定绑定

> ID：13107144
> 
> 赞同：0
> 
> 时间：2012-10-28T07:36:21.003
> 
> 标签：dependency-injection, guice

我目前正在使用工厂类实现某些功能，如下所示：

```
public class TemplateFactory {

    Template template = null;

    public static Template createTemplate(Message message){
        if(Message.getMessageId() == Message.WELCOME_MESSAGE) {
            template = new WelcomeTemplate(message);
        } else if (Message.getMessageId == Message.RESET_PASSWORD){
            template = new ResetPasswordTemplate(message);
        }
        return template;
    }
}

public class TemplateClient {
    public static void Main(String[] args){
        Message message = new Message(args[0]);
        Template template = TemplateFactory.createTemplate(message);
        template.doSomething();
    }
} 
```

考虑到绑定是在运行时动态确定的，您如何使用 Google Guice 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:49:21.783

MapBinder 是您正在寻找的：http: [//google-guice.googlecode.com/svn/trunk/latest-javadoc/com/google/inject/multibindings/MapBinder.html](http://google-guice.googlecode.com/svn/trunk/latest-javadoc/com/google/inject/multibindings/MapBinder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:16:12.530

[您可以使用名为AssistedInject](http://code.google.com/p/google-guice/wiki/AssistedInject)的 guice 扩展来创建工厂。

# jquery - Javascript 历史状态不正确

> ID：13107147
> 
> 赞同：7
> 
> 时间：2012-10-28T07:36:34.737
> 
> 标签：jquery, html, pushstate, popstate, html5-history

我正在尝试使用填充当前选定选项卡的索引

```
history.pushState({tabSelected: 1}, null, ""); 
```

我在 jquery 中有一个 popstate 事件的处理程序，它以编程方式切换 jquery ui 选项卡。

```
 $(window).bind("popstate", function(event) {
                               var state = event.originalEvent.state;
                               ...
                            } 
```

这工作正常，浏览器和我可以使用后退和前进按钮在选项卡之间切换。也适用于两层标签。

但在某些情况下，我想将其他状态推送到堆栈。所以我做了以下事情：

```
 var content = { targetId : id,
                  targetContent : $("#myDivId").html()
               };
 $.extend(content, {tabSelected: currentTab});
 history.pushState(content, null, ""); 
```

内容在我将其推送到历史之前和之后看起来都不错。用 console.log(history.state); 检查 还尝试检查 chrome 控制台。

但是在我的 popstate 处理程序中，我没有看到对象 event.originalEvent.state 上的 targetId、tabSelected 属性。我在对象上看到了正确的 tabSelected 值，但由于某种原因，我看到了一个修剪状态。

在 Chrome 和 Firefox 中检查。无法获取正确的内容。有什么想法可能是错的吗？提前致谢。

**更新**

还尝试在每个 pushstate 上增加一个全局变量并将其添加到状态中。事实证明，对于我提到的特定情况，全局变量的值变为 48 而不是 49，这意味着它正在接收最后一个事件。我没有看到我的 popstate 处理程序在两者之间被调用。不知道发生了什么。

**另一个更新**

当我调用 history.pushState(content, null, "") 两次它工作正常。（仅在一个地方，在另一个地方我仍然称之为一次）。看起来由于某种原因，浏览器正在返回最后一个状态。显然我的代码有问题，因为这种解决方法适用于 chrome 和 firefox。

# javascript - Jquery/Javascript - 语法高亮显示为 contentEditable 区域中的用户类型

> ID：13107150
> 
> 赞同：14
> 
> 时间：2012-10-28T07:37:14.403
> 
> 标签：javascript, jquery, syntax-highlighting

我正在我的网站上开发一个 contentEditable 区域，用户可以在其中互相键入消息。

```
<div contentEditable="true" class="smartText">User types here...</div> 
```

问题是，我们将在里面有智能文本，这意味着如果用户`@usersame`在这个 div 中输入，如果用户名存在，则`@username`应该以蓝色突出显示，如果用户名不存在，则应该以绿色突出显示。当然，所有这些都应该在用户键入时发生......

我不知道从哪里开始，现在我有这个：

```
$("body").on("keyup",".smartText",function(){
      var $this = $(this),
          value = $this.html(),
          regex = /[^>]#\S+[^ ]/gim;
      value = value.replace(regex,"<span style='color:red'>$&</span>");
      $this.html(value);
}); 
```

但是文本一直在跳跃（以及插入符号的位置）并且感觉方向不正确。我想它有点类似于 JSFiddle，它找到了颜色代码。我基本上想要和 Twitter 一样的东西。

这是一个可以玩的 JSFiddle：http: [//jsfiddle.net/denislexic/bhu9N/4/](http://jsfiddle.net/denislexic/bhu9N/4/)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-29T16:54:29.303

我喜欢这个问题，我非常努力地解决了这个问题。我相信我终于成功了（在一点帮助下）。

## = 更新 =

**一段代码：**

```
[...]

// formatText
formatText: function (el) {
    var savedSel = helper.saveSelection(el);
    el.innerHTML = el.innerHTML.replace(/<span[\s\S]*?>([\s\S]*?)<\/span>/g,"$1");
    el.innerHTML = el.innerHTML.replace(/(@[^\s<\.]+)/g, helper.highlight);

    // Restore the original selection
    helper.restoreSelection(el, savedSel);
}

[...]

// point
keyup: function(e){                    

    // format if key is valid
    if(helper.keyIsAvailable(e)){
        helper.formatText($this[0]);
    }

    // delete blank html elements
    if(helper.keyIsDelete && $this.text()=="") {
        $this.html("");
    }
} 
```

**截屏：**

![截图 2](../Images/859d26850e04c3259e65c217faa32257.png)

**JSFiddle在这里：http:** [//jsfiddle.net/hayatbiralem/9Z3Rg/11/](http://jsfiddle.net/hayatbiralem/9Z3Rg/11/)

**所需的外部资源：**

*   [http://dl.dropboxusercontent.com/u/14243582/jscalc/js/rangy-core.js](http://dl.dropboxusercontent.com/u/14243582/jscalc/js/rangy-core.js)
*   [http://dl.dropboxusercontent.com/u/14243582/jscalc/js/rangy-selectionsaverestore.js](http://dl.dropboxusercontent.com/u/14243582/jscalc/js/rangy-selectionsaverestore.js)

**帮助问题（谢谢）：** [替换 contenteditable div 中的 innerHTML](https://stackoverflow.com/questions/5595956/replace-innerhtml-in-contenteditable-div/5596688#5596688)

**正则表达式测试工具（感谢）： http:** [//www.pagecolumn.com/tool/regtest.htm](http://www.pagecolumn.com/tool/regtest.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T10:38:09.807

请记住，用户键入的 HTML 标记可能非常令人惊讶，例如：`<span>@use</span><span>rname</span>`，在用户看来仍然如此`@username`。

为了避免元素内部出现疯狂的插入符号行为（以及其他一些讨厌的副作用）`contentEditable`，您应该使用[W3C DOM API](https://developer.mozilla.org/en/docs/DOM)并在每次 HTML 发生更改时遍历 DOM 树（您可以通过轮询`body.innerHTML`计时器来嗅探更改）。

我最近为 CKEditor 回答了一个[类似的问题](https://stackoverflow.com/a/21251949/1768303)，并描述了如何构建 DOM 的文本到节点映射以查找文本匹配的算法。[CKEditor DOM API](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.text)与W3C 非常相似，您可以采用相同的算法。

一旦找到匹配项，您应该使用[DOM Range API](http://html5.org/specs/dom-range.html)来操作 DOM 节点的内容。例如，用 styled 包装一段纯文本`<SPAN>`：

```
var range = document.createRange();
range.setStart(startNode, startOffset);
range.setEnd(endNode, endOffset);
var span = document.createElement("span");
span.style.backgroundColor = "blue"
range.surroundContents(span); 
```

总的来说，这个任务非常重要，当然不是你可以放在一页 JavaScript 代码中的东西，这里要回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T08:13:29.850

这似乎可以解决您的问题。

演示在这里：http: [//jsfiddle.net/bhu9N/5/](http://jsfiddle.net/bhu9N/5/)

```
$(document).ready(function() {
    $("body").on("keyup", ".editable", function(e) {
        var $this = $(this);
        if(e.keyCode==32) {//space
            var words = $this.text().split(' ');
            var lastword = $.trim(words[words.length-1]);
            var reg = /^@\S+/;
            if(reg.test(lastword)) {
                //make an AJAX call for checking this word for existence
                //suppose data is returned and data==1 means green
                var data = 1;
                if(data==1) {
                    var orgtext = $this.html();
                    orgtext = orgtext.replace(lastword, '<span class="green">'+lastword+'</span>');
                    $this.html(orgtext);
                }
            }   
        }
    });

});​ 
```

突出显示文本后，光标将转到 div 的开头。所以这仍然需要修复。如果我能找到它，我将更新解决方案。同时，只需使用我现在提供的内容，看看它是否有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-29T01:48:24.507

正如 Ezos 在他的回答中指出的那样，我不建议每次用户释放密钥时都尝试做任何密集的事情（例如发出 Ajax 请求以检查用户名是否存在）。你可能过得不好。话虽如此，我建议在用户停止输入后等待一段时间，以浏览他们输入的内容并突出显示单词，例如：

```
var textarea = $(".smartText");
var highlightWords = function highlightWords() {
    var original = textarea.text();
    var replaced = original.replace(/@[a-zA-Z0-9]+/g, function (username) {
        // Magic
        return "<span class='exists'>" + username + "</span>";
    });
    textarea.html(replaced);
};
var timer;

textarea.keyup(function (e) {
    clearTimeout(timer);
    if ($(this).text()) {
        timer = setTimeout(highlightWords, 1000);
    }
}); 
```

链接到小提琴：http: [//jsfiddle.net/neJLW/](http://jsfiddle.net/neJLW/)

我认为上面的代码应该让你朝着正确的方向开始。就像你说的那样，光标仍然会跳来跳去，所以每次编辑`div`. 此外，您需要根据您希望确定用户名是否存在需要多长时间来调整超时。您需要`// Magic`用您的用户名检查替换并相应地调整返回值。

顺便说一句，您需要记住将某些内容包装在`span`s 中的可访问性问题（[有关示例，请参阅此 GitHub 问题 for Lettering.js](https://github.com/davatron5000/Lettering.js/issues/38)）。

编辑：另请注意，这不是一个强大的解决方案（例如，它不会对复制粘贴做出反应）。YMMV。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T00:36:55.730

您使用的方法似乎是浏览器密集型的，如果有人键入非常快并且在可以通过 ajax 验证“字符串”之前运行多个请求，则可能会导致一些问题。如果您使用诸如[http://aehlke.github.io/tag-it/](http://aehlke.github.io/tag-it/)之类的库，您可能会更好- 您可以描述一个更改字体颜色等的函数，就像它推荐一个标签一样。

如果我有时间，我会做小提琴演示。

# clojure - 我可以在 deftype 中提示函数的参数类型吗？

> ID：13107151
> 
> 赞同：2
> 
> 时间：2012-10-28T07:37:24.450
> 
> 标签：clojure

我试图这样做：

```
(defprotocol TestP
  (fun [this ^int i]))

(deftype Test [] TestP
  (fun [this ^int i] i)) 
```

但是，编译失败并说`Can't find matching method: fun`. 这是否意味着 deftype 函数可能不接受参数的类型提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:05:32.500

您不需要指定类型提示，`deftype`因为错误消息清楚地指出：

> 找不到匹配方法：好玩，不用提示自动匹配。

# iphone - 以编程方式设置 UIDatepicker

> ID：13107152
> 
> 赞同：3
> 
> 时间：2012-10-28T07:37:28.303
> 
> 标签：iphone, objective-c, ios, uidatepicker

我有一个日期选择器和 2 个按钮。当我单击按钮时，我想以编程方式设置 datepicker 值。就像当我按下第一个按钮时，日期选择器值变成今天的日期和 00:00:00: 时间，当我按下第二个按钮时，日期选择器值变成今天的日期和 23:59:59 时间。

怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T07:58:36.370

简单的任务，假设您已经添加了两个在按钮按下时调用的函数，您需要这样的东西：

```
-(IBAction)beginPressed:(id)sender
{
  NSDate * now = [[NSDate alloc] init];
  NSCalendar *cal = [NSCalendar currentCalendar];
  NSDateComponents * comps = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:now];
  [comps setHour:0];
  [comps setMinute:0];
  [comps setSecond:0];
  NSDate * date = [cal dateFromComponents:comps];
  [self.datePicker setDate:date animated:TRUE];

}
-(IBAction)endPressed:(id)sender
{
  NSDate * now = [[NSDate alloc] init];
  NSCalendar *cal = [NSCalendar currentCalendar];
  NSDateComponents * comps = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:now];
  [comps setHour:23];
  [comps setMinute:59];
  [comps setSecond:59];
  NSDate * date = [cal dateFromComponents:comps];
  [self.datePicker setDate:date animated:TRUE];
} 
```

我认为设置组件的部分对您来说并不清楚，检查上述类的API，您会发现更多。

**编辑**：我将日历更改为当前的默认日历并用现在初始化日历。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-23T06:57:33.753

```
NSDateFormatter *dateFormat;
  dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"h:mm a"];
  NSDate *exampleDateFromString =[dateFormat dateFromString:@"8:48 AM"]; 
  date-picker.minimumDate=exampleDateFromString;
 [date-picker setDate:exampleDateFromString]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-11T16:53:51.567

对于那些想知道如何在 Swift 中做到这一点的人：

```
let now = NSDate()
let cal = NSCalendar.currentCalendar()
let comp = cal.components([.Year, .Month, .Day], fromDate: now)
comp.hour = 0 // or whatever you need
comp.minute = 0
let date = cal.dateFromComponents(comp)!
picker.setDate(date, animated: true) 
```

# php - 为什么我不能以这种方式调用 eval() ？

> ID：13107162
> 
> 赞同：0
> 
> 时间：2012-10-28T07:39:08.783
> 
> 标签：php

为什么以下代码无法编译：

```
<?php
  $str = "echo \"ok\"";
  $func = "eval";
  $func ($str);
?> 
```

php 告诉我 eval 是未定义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:46:27.103

在 PHP 中，`eval`是“语言构造”，而不是函数。（注意它在语法高亮编辑器中变成关键字颜色。）不能使用变量函数语法调用语言结构，也不能`$func()`与其他特定于函数的东西一起使用，例如`is_callable()`.

从[http://www.php.net/manual/en/functions.variable-functions.php](http://www.php.net/manual/en/functions.variable-functions.php)：

> 变量函数不适用于诸如 echo、print、unset()、isset()、empty()、include、require 等语言结构。利用包装函数将这些结构中的任何一个用作变量函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:43:54.420

[`eval`](http://www.php.net/manual/en/function.eval.php#refsect1-function.eval-notes)不是一个函数，它是一个语言结构，变量函数不适用于语言结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T07:51:24.370

[`eval()`](http://php.net/manual/en/function.eval.php)不能使用变量函数调用。如果你不明白什么是[变量函数](http://www.php.net/manual/en/functions.variable-functions.php)？查看代码的以下部分

```
 $func = "eval";
  $func ($str); //Here $func becomes eval upon execution making it a variable function 
```

如果您查看手册参考，则清楚地[指出](http://php.net/manual/en/function.eval.php#refsect1-function.eval-notes)

> 注意：因为这是一种语言结构而不是函数，所以不能使用变量函数来调用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T07:50:54.730

你错了..代码，也许像例子..

```
<?php
    $eval_code =    '$my_name = "Swashata";' .
                    '$your_name = "John";' .
                    'return $your_name;' .
                    'echo $my_name;';
    $the_name = eval( $eval_code );
    echo '<p>$the_name has got a value ' . $the_name . '</p>';
?> 
```

# html - 直到运行时才知道要生成多少图。（那么不能硬编码解决方案）

> ID：13107167
> 
> 赞同：0
> 
> 时间：2012-10-28T07:40:40.407
> 
> 标签：html, ruby-on-rails

我正在为我就读的大学创建一个能源使用/分析/管理应用程序。已经有一个在线数据库，该数据库会不断更新每座建筑物的最新电表额定值。

我的应用程序将有一个页面，其中列出了所有建筑物并且可以单击。当用户选择建筑物时，应用程序将获取该建筑物的电表读数，并使用“Highcharts”图表库为每个电表生成图表。

应用程序的后端是用 Ruby（使用 Rails）编写的。在显示由特定建筑物的图形组成的页面的 HTML 视图中，我将

```
 <div id="graphContainer">

 </div> 
```

为了生成图表。

目前，我可以通过在视图中硬编码上述代码的一个实例来为每个构建页面生成一个图形。

但是，每个建筑物可以有多个电表。在 HTML 方面没有太多经验，当我不知道在运行时需要多少时，我不知道如何生成图表。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:50:30.657

给定一个

```
<div id="graphContainer"></div> 
```

您可以使用高图来定位它

```
chart1 = new Highcharts.Chart({
  chart: {
    renderTo: '#graphContainer',  //  <=== this selector here  
    type: 'bar'
  },
  //... more options and graph data
}); 
```

`#graphContainer`您最初也不必在视图中包含 HTML 。你可以有一些

```
<div id="graphs-container"></div> 
```

在您的视图中，然后通过 Javascript *（下面的 jQuery）*，您可以通过一个简单的循环为运行时所需的每个图形构建容器和高图。

```
$(function(){
  var highcharts = [];

  for (var i=0; i<charts.length; i++) {
    $('#graphs-container').append($('<div id="graph-container-' + (i+1) + '"/>');

    var highchart = new Highcharts.Chart({
      chart: {
        renderTo: '#graph-container' + (i+1),  //  <=== this selector here  
        type: 'bar'
      },
      //... more options and graph data for chart[i]
    });

    highcharts.push(highchart);
  });
}); 
```

您需要做的就是修改上述内容以满足您的需求，方法是发送`charts`到可能作为 JSON 数据的视图，其中包含根据所需的 Highchart 选项和数据集呈现每个特定图形所需的一切。

Highcharts 文档是一个很好的查看位置，但是正如您所建议的，在您对所有这些东西感到满意之前，您似乎还需要学习更多的东西。

*   [http://www.highcharts.com/documentation/how-to-use](http://www.highcharts.com/documentation/how-to-use)

# rally - 如何查询所有项目中的所有用户故事？

> ID：13107174
> 
> 赞同：1
> 
> 时间：2012-10-28T07:42:18.587
> 
> 标签：rally

无论他们的项目如何，我都想获得所有用户商店。这可以在一个查询中完成吗？我有一个递归逻辑和循环项目，对于每个执行此逻辑的项目对我来说都不起作用，因为有些美国的父母在不同的项目中

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:00:32.170

简短的回答是在您的 WSAPI 请求 url 中包含 workspace=/workspace/12345&project=null 作为查询字符串参数。您如何访问 WSAPI？应用 SDK 1？2？根据您使用的工具包，有不同的方法可以做到这一点。

# c# - 在 C# 为什么使用委托允许线程访问表单对象（如 TextBoxes）

> ID：13107177
> 
> 赞同：3
> 
> 时间：2012-10-28T07:43:05.207
> 
> 标签：c#, visual-studio-2010

根据我的阅读，代表的定义是：

> 委托是一种引用方法的类型。一旦为委托分配了一个方法，它的行为就与该方法完全相同。委托方法可以像任何其他方法一样使用，带有参数和返回值。

现在我知道如何使用委托通过线程编写文本框来编写表单对象，但是我无法理解委托中处理的方法如何访问表单上的所有对象。如果有人能解决这个问题，我将不胜感激。

编辑：现在这里是我将如何创建一个委托

```
public delegate void MyDelegate(string str,int str2);

void main()
{
Thread t = new Thread(RunInThread); //Method that will run in a separate thread
t.Start();
}
void RunInThread ()
{
MyDelegate delInstatnce = new MyDelegate(AddControl); //Attach a method
this.Invoke(delInstatnce,"First Parameter",1001);
}
void AddControl(string str,int str2)
{
  //Why could you access all the form components from here ?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:51:56.463

首先，这是对代表的非常混乱的描述。您可能会发现[我关于代表和事件的文章](http://csharpindepth.com/Articles/Chapter2/Events.aspx)更有帮助。

其次，鉴于标题和正文谈论不同的事情，您的问题不是很清楚。

委托实际上只是一个对象，它封装了在类中调用方法的想法。该方法的可访问性是在委托*创建*时而不是在*执行*时控制的 - 例如，类中的代码可以创建一个引用私有方法的委托，并且该委托可以返回给类外的代码......当它被调用时，私有方法被调用。就访问而言，这仍然是“安全的”，因为只有有权访问私有方法的代码才能创建委托实例。在私有方法中，代码可以以正常方式访问所有其他成员。

现在您的标题谈到线程......并且使用委托*实际上*不允许您从非 UI 线程访问 UI 元素。但是，它允许您使用类似的东西，`Control.Invoke`或者`Dispatcher.Invoke`每个调用 UI 线程上的委托实例。所以你基本上是在说，“我需要运行一些代码，但我想在正确的线程上运行它——请为我做。” 委托只是您传达要在 UI 线程上运行的代码的方式。

希望有帮助。随时要求更具体的说明。

# javascript - 如何使用选择绑定？

> ID：13107179
> 
> 赞同：0
> 
> 时间：2012-10-28T07:43:44.347
> 
> 标签：javascript, jquery, knockout.js

我在javascript中有一个对象数组。数组是：

```
 [
     { "Name": "A", "Id": "1" , "FID": "1" },
     { "Name": "B", "Id": "2" , "FID": "1" },
     { "Name": "C", "Id": "3" , "FID": "1" },
     { "Name": "D", "Id": "4" , "FID": "1" },
     { "Name": "E", "Id": "5" , "FID": "1" },
    ] 
```

我正在使用 knockout.js。我想使用选择绑定将此数组与选择列表绑定。以便选择列表在其下拉列表中包含此数组的 Name 属性值。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:55:16.207

你可以试试这个

```
<select data-bind='options:Your_Observable_Array, optionsText:"Name", optionsValue:"Id"'> 
```

# f# - 捕获键盘输入 Webshaper

> ID：13107181
> 
> 赞同：2
> 
> 时间：2012-10-28T07:43:45.963
> 
> 标签：f#, websharper

我想在 Websharper 中为整个页面（或最接近我的任何内容）获取用户的键盘输入，但我看不到任何好的方法。

我尝试了一些类似的东西

```
JQuery.Of("document").Keyup(fun _ _ -> Window.Self.Alert("boo")) 
```

但我一直遇到很多`NotImplementedExceptions`. 这些真的没有落实吗？还是我遇到了一些奇怪的边缘情况，因为我违反了规定？

更新：

我已经从 nuget 安装了 2.4.85.235 版本，如果这对任何人都意味着什么的话。我也在使用 VS 2012。

我还使用 VS 2010 中的新站点站点模板站点进行了测试，我看到了同样的情况。我已经从 WebSharper 站点安装了最新的软件包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T09:58:26.530

确保您没有调用未在服务器上实现的客户端方法。如果是这种情况，将客户端和服务器代码分开，显示相关元素并通过 Web 控制机制调用 JavaScript，并使用“html”、“body”或 Dom.Document.Current 作为选择器。以下是每次按下回车键时显示警报的示例：

```
module Client =

    open IntelliFactory.WebSharper
    open IntelliFactory.WebSharper.Html
    open IntelliFactory.WebSharper.JQuery

    [<JavaScriptAttribute>]
    let paragraph () =
        P [Text "Press the Enter key to display an alert box."]
        |>! OnAfterRender (fun x ->
            JQuery.Of("html").Keydown(fun _ event ->
                match event.Which with
                    | 13 -> JavaScript.Alert "Enter key was pressed."
                    | _  -> ()).Ignore)

    type ParagraphViewer () =
        inherit Web.Control()

        [<JavaScript>]
        override this.Body = paragraph () :> _ 
```

# c - 如何覆盖（重置）SIGUSR1 的默认行为？

> ID：13107187
> 
> 赞同：0
> 
> 时间：2012-10-28T07:44:45.700
> 
> 标签：c, signals

我读到了信号处理函数中的 add signal() 函数可以覆盖默认行为：

```
#include <stdio.h>
#include <signal.h>
#include <unistd.h>
void signalHandler();
int main(void) {
    signal(SIGUSR1, signalHandler);
    sleep(60);
    printf("I wake up");
    return 0;
}
void signalHandler() {
    signal(SIGUSR1, signalHandler);// I add this line to overwrite the default behaviour 
    printf("I received the signal");
} 
```

我用另一个进程触发它

```
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
int main(int argc, char *argv[]) {

    kill(5061, SIGUSR1); // 5061 is the receiver pid, kill(argv[1], SIGUSR1) doesn't working, when I get 5061 as parameter
    puts("send the signal ");
    return 0;
} 
```

接收`wake up`器一接收到`SIGUSR1`信号就进行处理。`sleep`即使接收到来自其他进程的信号，如何让接收器继续？

顺便说一句，为什么 `kill(5061, SIGUSR1);`5061 是接收器 pid `kill(argv[1], SIGUSR1)`，当我将 5061 作为参数时不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:54:44.747

从[`sleep(3)`](http://linux.die.net/man/3/sleep)手册页：

> **返回值**
> 
> 如果请求的时间已经过去，则为零，或者如果调用被信号处理程序中断，则剩余的睡眠秒数。

`sleep`因此，您必须检查返回值并循环调用，而不是仅仅调用：

```
int sleep_time = 60;
while ((sleep_time = sleep(sleep_time)) > 0)
    ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T07:52:20.660

您的问题（为什么`kill(argv[1], SIGUSR1)`不起作用）实际上与信号无关，而是与基本的 C 编程有关。请在 Linux 上编译`gcc -Wall -g`（即所有警告和调试信息），并改进您的代码，直到没有给出警告。

请仔细阅读[kill(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/kill.2.html)手册页（在 Linux 上，安装软件包后`manpages`，`manpages-dev`在`man-db`Ubuntu 或 Debian 上，您可以`man 2 kill`在计算机上键入阅读它）。另请仔细阅读[signal(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/signal.2.html)和[signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)手册页。多次阅读这些手册页。

然后，了解 kill 系统调用被声明为

```
int kill(pid_t pid, int sig); 
```

并且由于`pid_t`是某种整数类型，因此您需要将`argv[1]`（这是一个字符串，即 a `char*`）转换为某个整数（`kill(argv[1], SIGUSR1)`甚至不应该编译没有错误，因为`argv[1]`不是某个整数而是一个字符串）。所以请使用：

```
kill((pid_t) atoi(argv[1]), SIGUSR1); 
```

手册页还说您应该使用它`signal(SIGUSR1, SIG_DFL)`来恢复默认行为，并`signal(SIGUSR1, SIG_IGN)`忽略该信号。

当然，您最好使用[sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)的手册页`signal(2)`告诉您。

[最后，请养成阅读手册页的习惯，花几个小时阅读《高级 Linux 编程》](http://advancedlinuxprogramming.com/)和《[高级 Unix 编程](http://basepath.com/aup/)》等好书。他们对事情的解释比我们在几分钟内解释的要好得多。如果你不熟悉*C 编程*，也可以阅读一些关于它的好书。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T07:50:58.447

我以前没有尝试过，但是您可以使用[sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)代替并设置`SA_RESTART`标志，这应该使系统调用可以重新启动。

**编辑**：实际上这行不通，根据[信号（7）](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal%207)的手册页，并非所有系统调用都可以重新启动：

> 如果被处理程序中断， sleep(3) 函数也永远不会重新启动，**但会返回成功：休眠的剩余秒数**。

因此，您应该`sleep`使用剩余时间再次调用该函数。

# objective-c - 如何在 NSTableView 中重复使用单元格？

> ID：13107194
> 
> 赞同：5
> 
> 时间：2012-10-28T07:45:39.277
> 
> 标签：objective-c, macos, nstableview

我有一个`NSTableView`10 个单元格。它们都是相同的单元格，我想重用它们，但是我似乎无法让表格视图这样做。

目前，每次需要一个新单元格时，代理似乎都无法找到具有相同标识符的前一个单元格，因此必须重新创建它。

下面是我的代码，关于我可能做错了什么有什么建议吗？

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView
{
    return 10;
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    static NSString *cellIdentifier = @"Name";

    NSTableCellView *cellView = [tableView makeViewWithIdentifier:cellIdentifier owner:self];

    if (cellView == nil)
    {
        NSLog(@"A cell");
        NSRect cellFrame = [_scrollView.contentView bounds];
        cellFrame.size.height = 65;

        cellView = [[NSTableCellView alloc] initWithFrame:cellFrame];
        [cellView setIdentifier:cellIdentifier];
    }

    return cellView;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T22:53:31.243

我做了一些测试，发现表格会不断创建新的单元格，直到表格无法同时显示所有单元格。

此时，表格将重用不可见的单元格。

# java - 禁用 JFrame 最小化按钮

> ID：13107195
> 
> 赞同：10
> 
> 时间：2012-10-28T07:45:39.487
> 
> 标签：java, swing, jframe, jdialog, jwindow

我正在为我的笔记本电脑开发一个工具。我想禁用 JFrame 中的最小化按钮。我已经禁用了最大化和关闭按钮。

这是禁用最大化和关闭按钮的代码：

```
JFrame frame = new JFrame();  
frame.setResizable(false); //Disable the Resize Button  
// Disable the Close button
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

请告诉我如何禁用最小化按钮。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T07:47:51.973

一般来说，你不能，你可以做的是使用 a`JDialog`而不是`JFrame`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-28T08:59:17.360

正如@MadProgrammer 所说（对他+1），这绝对不是你想要的好主意

*   使用 a `JDialog`and call`setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);`来确保它不能被关闭。

*   您也可以使用`JWindow`(+1 to @MM) 或调用`setUndecorated(true);`您的`JFrame`实例。

或者，您可能希望通过在方法中覆盖和调用来添加自己的`WindowAdapater`以使`JFrame`不可最小化等：`windowIconified(..)``setState(JFrame.NORMAL);`

```
//necessary imports
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class Test {

    /**
     * Default constructor for Test.class
     */
    public Test() {
        initComponents();
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }
    private final JFrame frame = new JFrame();

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.setResizable(false);
        frame.addWindowListener(getWindowAdapter());

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        frame.pack();
        frame.setVisible(true);
    }

    private WindowAdapter getWindowAdapter() {
        return new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent we) {//overrode to show message
                super.windowClosing(we);

                JOptionPane.showMessageDialog(frame, "Cant Exit");
            }

            @Override
            public void windowIconified(WindowEvent we) {
                frame.setState(JFrame.NORMAL);
                JOptionPane.showMessageDialog(frame, "Cant Minimize");
            }
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-28T07:49:36.837

如果您不想允许任何用户操作，请使用`JWindow`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-13T10:19:38.080

您可以尝试将您的 JFrame 类型更改为 UTILITY。然后你不会在你的程序中看到最小化 btn 和最大化 btn。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T14:40:56.100

我建议您使用 `jframe.setUndecorated(true)` ，因为您不使用任何窗口事件并且不希望调整应用程序的大小。如果您想移动面板，请使用我制作的 [MotionPanel 。](http://d3ep4k.blogspot.in/2013/07/moving-undecorated-window-by-clicking.html)

# ios - 为通用 iOS 应用程序制作图像需要什么分辨率？

> ID：13107199
> 
> 赞同：1
> 
> 时间：2012-10-28T07:46:50.630
> 
> 标签：ios, image, photoshop, resolution

我正在使用 Storyboards 在 xCode 4.4 上制作通用应用程序。我正在 Photoshop 中为这个应用程序制作图像。我想制作一个填满整个屏幕的背景图像。

我想知道的是：

1.  我制作图像的分辨率是多少？
2.  我需要 1 个 iPad 和 1 个 iPhone，还是更多？
3.  你如何让它与 iPhone 5 一起工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T08:06:00.873

您可能需要多达 10 张背景图片：

有视网膜 iPad：2048x1536，非视网膜 iPad 和 iPad Mini：1024x768，视网膜 iPhone：640x960，非视网膜 iPhone：320x480 和新 iPhone 5（仅限视网膜）：640x1136。

那是 5。如果你想同时支持横向和纵向，那么你有 10 种组合。

PS：如果您决定保持状态栏可见（就像大多数应用程序一样），则将高度降低 20 像素（视网膜显示器为 40 像素）。这就是状态栏需要多少空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:05:24.573

您应该考虑仅使用一张图像的方法。如果您不尊重可用的画布大小，大多数应用程序的用户体验都很差。

您可能希望将艺术品的特殊区域聚焦于用户。我建议您至少为 iPad 和 iPhone 实施不同的方案。

分辨率本身在规格中进行了描述。因此，使用一个用于 iPhone 和一个用于 iPad，不同的徽标以两种分辨率发布，带有后缀 @2x 或带有另一个前缀的新 Appstore 尺寸，但所有这些细节都在规格范围内。

我的经验是，在大多数情况下，您必须单独组织用户界面才能提供良好的用户体验。

# c++ - 如何在 TCP 端口上实时传输数据时减少 CPU 使用率

> ID：13107207
> 
> 赞同：-1
> 
> 时间：2012-10-28T07:50:01.830
> 
> 标签：c++, sockets, cpu-usage

我有一个套接字程序，它既像客户端又像服务器。

它在输入端口上启动连接并从中读取数据。在实时场景中，它读取输入端口上的数据并将数据（逐个记录）发送到输出端口。

这里的问题是，在向输出端口发送数据时，CPU 使用率会增加到 50%，而这是不允许的。

```
while(1)
{    
        if(IsInputDataAvail==1)//check if data is available on input port
        { 
           //condition to avoid duplications while sending
        if( LastRecordSent < LastRecordRecvd )   
        {     
           record_time temprt;
           list<record_time> BufferList;
           list<record_time>::iterator j;
           list<record_time>::iterator i;

           // Storing into a temp list
            for(i=L.begin(); i != L.end(); ++i)
             {
               if((i->recordId > LastRecordSent) && (i->recordId <= LastRecordRecvd))
               {     
                temprt.listrec = i->listrec;
                temprt.recordId = i->recordId;
                temprt.timestamp = i->timestamp;
                BufferList.push_back(temprt);
               }
             }

                //Sending to output port
             for(j=BufferList.begin(); j != BufferList.end(); ++j)
             {
               LastRecordSent = j->recordId;

              std::string newlistrecord = j->listrec;
              newlistrecord.append("\n");
              char* newrecord= new char [newlistrecord.size()+1];
              strcpy (newrecord, newlistrecord.c_str());

             if ( s.OutputClientAvail() == 1) //check  if output client is available
             { 
              int ret = s.SendBytes(newrecord,strlen(newrecord));                        
              if ( ret < 0)
               { 
                log1.AddLogFormatFatal("Nice Send Thread : Nice Client Disconnected");    
                 --connected;
                  return;
               }                                              
            }
            else
            {
             log1.AddLogFormatFatal("Nice Send Thread : Nice Client Timedout..connection closed");    
             --connected; //if output client not available disconnect after a timeout
             return;
            }                                        
          }    

       }  
      }

    //  Sleep(100); if we include sleep here CPU usage is less..but to send data real time I need to remove this sleep.
If I remove Sleep()...CPU usage goes very high while sending data to out put port.          
  }//End of while loop 
```

任何可能的方法来保持实时数据传输并减少 CPU 使用率..请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:51:37.337

列出的代码中有两个潜在的 CPU 接收器。一、外循环：

```
while (1)
{
    if (IsInputDataAvail == 1)
    {
        // Not run most of the time
    }

    // Sleep(100);
} 
```

鉴于 Sleep 调用显着降低了 CPU 使用率，这个自旋循环很可能是罪魁祸首。它看起来像是`IsInputDataAvail`由另一个线程设置的变量（尽管它可能是预处理器宏），这意味着几乎所有 CPU 都用于运行这条比较指令和几次跳转。

回收浪费的功率的方法是阻塞直到输入可用。您的阅读线程可能已经这样做了，因此您只需要某种信号量来在两者之间进行通信，并使用系统调用来阻止输出线程。在可用的情况下，理想的选项是`sem_wait()`在输出线程中，就在循环的顶部，`sem_post()`在输入线程中，它当前设置`IsInputDataAvail`. 如果这是不可能的，那么自管技巧可能会起作用。

第二个潜在的 CPU 接收器位于`s.SendBytes()`. 如果肯定结果表明记录已完全发送，则该方法必须使用循环。它可能使用阻塞调用来写入记录；如果没有，那么可以重写它来这样做。

或者，您可以重写一半的应用程序以使用`select()`,`poll()`或类似的方法将读取和写入合并到同一个线程中，但如果您的程序已经大部分完成，那么工作量就太大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T02:14:19.800

```
 if(IsInputDataAvail==1)//check if data is available on input port 
```

摆脱它。只需从输入端口*读取。*它将阻塞，直到数据可用。这是您大部分 CPU 时间的去向。但是还有其他问题：

```
 std::string newlistrecord = j->listrec; 
```

在这里，您正在复制数据。

```
 newlistrecord.append("\n");

          char* newrecord= new char [newlistrecord.size()+1];
          strcpy (newrecord, newlistrecord.c_str()); 
```

在这里，您再次复制相同的数据。你也在动态分配内存，你也在泄漏它。

```
 if ( s.OutputClientAvail() == 1) //check  if output client is available 
```

我不知道这是做什么的，但你应该删除它。以下发送是检查错误的时间。不要试图猜测未来。

```
 int ret = s.SendBytes(newrecord,strlen(newrecord)); 
```

在这里，您正在重新计算您在设置时可能已经知道的字符串的长度`j->listrec`。`s.sendBytes()`直接调用`j->listrec`，然后再调用`"\n"`比执行所有这些操作要高效得多。无论如何，TCP 都会合并数据。

# javascript - 如何在打字稿中定义 jQuery 对象？

> ID：13107208
> 
> 赞同：7
> 
> 时间：2012-10-28T07:50:14.947
> 
> 标签：javascript, typescript

我有以下代码：

```
var modal = {
    content: '',
    form: '',
    $form: '',
    $message: '',
    $modal: '',
    $submits: '',
    href: ''
}

$.modal = function (options) {
    var settings = $.extend({}, $.modal.defaults, options),
        root = getModalDiv(),
    function getModalDiv() {
        var modal = $('#modal');
        return modal;
    };
})(jQuery);

modal.$modal = $.modal({
    title: link.title,
    closeButton: true,
    content: modal.content,
    onClose: onModalClose,
    minWidth: 315,
    maxHeight: false,
    width: false,
    resizeOnLoad: true
});
modal.$form = modal.$modal.find('.form'); 
```

我收到一个指向 .find 的错误并说：

“字符串”类型的变量上不存在属性 find。我明白错误在说什么，但我如何定义`$modal`一个我可以使用的变量`.find`？

另外，现在我在打字稿世界中，有没有比我在这里将其定义为 var 更好的方法来定义模态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T07:51:25.423

我认为您的代码正在执行的功能分配是`$.modal`不完整的——但是，由于您是专门询问定义类型的，所以无论如何我都会尝试回答。

因此，首先，如果您还没有：[从 codeplex](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#typings%2fjquery.d.ts)获取 jquery.d.ts并在您的代码中引用它，如下所示。它将为您提供 jQuery 的类型声明，这在使用该库时非常有用。它还允许您定义应该是 jQuery 对象的成员。

```
///<reference path="jquery.d.ts" /> 
```

举个例子，看看`IModal`哪个是一个有 4 个 jQuery 成员的接口（我猜了一些你想在其他成员上使用的类型——它们可能不是你想要的）：

```
interface IModal {
    content : string;
    form    : HTMLFormElement;
    $form   : JQuery;
    $message: JQuery;
    $modal  : JQuery;
    $submits: JQuery;
    href    : string;
} 
```

第二个接口声明，`JQueryStatic`简单地声明另一个静态成员，该成员可以在`$`对象上访问（见脚注），因为在 jquery.d.ts 文件中`$`实现。`JQueryStatic`

```
interface JQueryStatic {
    modal : any;
}; 
```

有了这个，您现在可以使用`IModal`它实现的接口提供的显式类型信息创建模态对象：

```
var modal : IModal = {
    content : '',
    form    : null,
    $form   : null,
    $message: null,
    $modal  : null,
    $submits: null,
    href    : ''
} 
```

您可以根据附加功能将您的功能分配给 $.modal `JQueryStatic`：

```
$.modal = function (options) {
    var settings = $.extend({}, $.modal.defaults, options),
        root = getModalDiv(),
        getModalDiv = function() {
            var modal = $('#modal');
            return modal;
        };

    ...
})(jQuery); 
```

有了它，并且如果您更正了该分配，那么下面的行现在应该可以了：

```
modal.$form = modal.$modal.find('.form'); 
```

注意：我向现有接口添加成员的经验充其量是不确定的——通常编译器出于任何原因都不会选择它们。我发现随着代码库的增长，这种情况更有可能发生，因此很难找出确切的原因。只是需要注意的事情。

# objective-c - NSXMLParser 来解析这个数据

> ID：13107214
> 
> 赞同：0
> 
> 时间：2012-10-28T07:51:13.277
> 
> 标签：objective-c, xml, nsxmlparser

我正在尝试使用 NSXMLParser 来解析以下数据：

```
 <FORM ACTION="/prod/bwckgens.p_proc_term_date" METHOD="POST" onSubmit="return checkSubmit()">
<INPUT TYPE="hidden" NAME="p_calling_proc" VALUE="bwckschd.p_disp_dyn_sched">
<TABLE  CLASS="dataentrytable" summary="This layout table is used for term selection."width="100%"><CAPTION class="captiontext">Search by Term: </CAPTION>
<TR>
<TD CLASS="dedefault"><LABEL for=term_input_id><SPAN class="fieldlabeltextinvisible">Term</SPAN></LABEL>
<SELECT NAME="p_term" SIZE="1"  ID="term_input_id">
<OPTION VALUE="">None
<OPTION VALUE="201320">Spring 2013
<OPTION VALUE="201315">STAR/BGR: New Admits Fall 2012 (View only)
<OPTION VALUE="201310">Fall 2012 (View only)
<OPTION VALUE="201230">Summer 2012 (View only)
<OPTION VALUE="201220">Spring 2012 (View only)
<OPTION VALUE="201210">Fall 2011 (View only)
<OPTION VALUE="201130">Summer 2011 (View only)
<OPTION VALUE="201120">Spring 2011 (View only)
<OPTION VALUE="201110">Fall 2010 (View only)
<OPTION VALUE="201030">Summer 2010 (View only)
<OPTION VALUE="201020">Spring 2010 (View only)
<OPTION VALUE="201010">Fall 2009 (View only)
<OPTION VALUE="200930">Summer 2009 (View only)
<OPTION VALUE="200920">Spring 2009 (View only)
<OPTION VALUE="200910">Fall 2008 (View only)
<OPTION VALUE="200830">Summer 2008 (View only)
<OPTION VALUE="200820">Spring 2008 (View only)
</SELECT>
</TD>
</TR>
</TABLE>
<BR>
<BR>
<INPUT TYPE="submit" VALUE="Submit">
<INPUT TYPE="reset" VALUE="Reset">
</FORM> 
```

我希望它将所有 VALUE 属性存储在字典或具有相应字符串的东西中，如下所示：

```
(201320, "Spring 2013")
(201315, "STAR/BGR: New Admits Fall 2012 (View only)")
(201310, "Fall 2012 (View only)")
.... 
```

我阅读了有关如何使用 XML Parser 的文档。我知道如何获取 VALUE 属性的值，但我不明白如何获取字符串的值，因为它们出现在元素 OPTION 关闭之后。

任何人都可以通过制作 XML 树来帮助我，向我展示一切是如何构造的，以及我将如何在每个 OPTION 属性之后提取字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:09:58.120

你的结构是错误的。

```
<OPTION VALUE="200820">Spring 2008 (View only) 
```

应该

```
<OPTION VALUE="200820">Spring 2008 (View only)</OPTION> 
```

结束`</OPTION>`。

[然后您可以使用来自http://obj-c.pl/parsowanie-xml-za-pomoca-nsxmlparser/](http://obj-c.pl/parsowanie-xml-za-pomoca-nsxmlparser/)的 NSXMLParser 示例

附言。`<INPUT>`是错的。应该是`<INPUT ... />`。

# jquery - 在点击事件中选择一个元素

> ID：13107224
> 
> 赞同：1
> 
> 时间：2012-10-28T07:52:49.657
> 
> 标签：jquery, jquery-selectors

我正在尝试更改表中所选行的类。每行都有相同的类名开头。每当用户单击图像时，类名称都会更改。（想想 gmail 的已加星标/未加星标的电子邮件）

我有以下代码

```
$(document).ready(function() {
$(".notSelected").click(function() {
    $(".notSelected").removeClass(".notSelected").addClass(".selected");
    });
});​ 
```

编辑：我想标记/突出显示每个选定的行。
[jsfiddle](http://jsfiddle.net/J8Ehr/)

关于如何解决这个问题的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:56:06.770

当有人单击`.notselected`并将其更改为“已选择”时，这将更改类。Remove 和 AddClass 需要不带点。此外，您的班级名称未选择而不是未选择。

```
$(document).ready(function() {
    $(".notselected").click(function() {
     $(this).removeClass("notselected").addClass("selected");
    });
});​ 
```

见[http://jsfiddle.net/J8Ehr/1/](http://jsfiddle.net/J8Ehr/1/)

顺便说一句，看看[toggleClass](http://api.jquery.com/toggleClass/)也许它会帮助您以另一种方式定义它。

另注：您要更改行类，上面的答案只会更改字段类。如果您想更改行的类，请尝试以下操作（未测试）：

```
$(document).ready(function() {
    $(".notselected").click(function() {
     $(this).parent('tr').removeClass("notselected").addClass("selected");
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:58:38.803

您的元素具有`notselected`类名，并且您的选择器尝试查找具有 class of 的元素`notSelected`，您也不应该使用`.`with`addClass`和`removeClass`方法。

```
$(document).ready(function() {
    $(".notselected").click(function() {
        $('.notselected').removeClass('selected')
        $(this).addClass("selected")
    });
}); 
```

[http://jsfiddle.net/sxY6z/](http://jsfiddle.net/sxY6z/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:03:51.073

您可能正在寻找：

```
$(document).ready(function() {
$(".notselected").click(function() {
    $(".selected").removeClass("selected").addClass("notselected");
    $(this).removeClass("notselected").addClass("selected");
    });
});​ 
```

两个问题。一，你申请的课程`notselected`不是`notSelected`。第二，您不需要`.`在 removeClass 参数中使用 a 。此外，您在原始小提琴中加载了 MooTools，而不是 jQuery。

[http://jsfiddle.net/J8Ehr/6/](http://jsfiddle.net/J8Ehr/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:05:16.963

[类的名称](http://jsfiddle.net/sushanth009/J8Ehr/3/)足以添加/删除。去掉前缀的点..

对于未选择的类，**还将****s**设置为小写

 **```
$(document).ready(function() {
    $(".notselected").on('click',function() {
        $('.notselected').removeClass("notselected")
            $(this).addClass("selected");
    });
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[小提琴](http://jsfiddle.net/sushanth009/J8Ehr/3/)**

# ruby-on-rails - 在后台打开一个新页面选项卡（Ruby）

> ID：13107229
> 
> 赞同：0
> 
> 时间：2012-10-28T07:53:39.673
> 
> 标签：ruby-on-rails, tabs

```
<%= link_to StackOverflow, 'https://stackoverflow.com/',  :target => '_blank' %> 
```

如何创建在新背景选项卡中打开的链接？上面的代码在前台选项卡中打开了 StackOverflow 的链接。

提前致谢

**更新：**

[我从另一个问题](https://stackoverflow.com/questions/12814261/html-how-to-open-a-link-in-the-background?lq=1)中找到了答案

```
$('a[target="_blank"]').removeAttr('target'); 
```

***如何在 Ruby/Rails 中做到这一点？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:21:54.003

```
<%= link_to StackOverflow, 'http://stackoverflow.com/',  :target => 'new' %> 
```

# ios - 如何从原生 iOS Facebook SDK 获取用户兴趣？

> ID：13107237
> 
> 赞同：0
> 
> 时间：2012-10-28T07:56:02.173
> 
> 标签：ios, facebook, facebook-ios-sdk

我一直在阅读文档，但找不到任何东西。对于名称、id 等其他属性，它们在 FBGraphUser 类中可用。我需要的是用户的兴趣列表。我相信我必须使用 FBGraphObject 类，但我不确定如何去做。任何指导将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T20:46:49.667

我/兴趣是你如何获得用户的兴趣。如果您正在寻找其他人，例如用户的朋友，则 id/interests

这取决于正在登录的用户

```
-(void)fbRequest{

[FBRequestConnection startWithGraphPath:@"me/interests" completionHandler:^(FBRequestConnection *connection,NSDictionary<FBGraphObject> *result,NSError *error){

        if(!error){
            NSArray *data = [result objectForKey:@"data"];
            [self updateInterests:data];

        }else{

        }
    }];
}

-(void)updateInterests:(NSArray*)interests
{
NSString *str = self.groupList.text;

for(FBGraphObject <FBGraphUser>*interest in interests) //Using FBGraphUser because it implements name though I'd love to use something else
{

    str = [str stringByAppendingFormat:@"%@\n",interest.name ];
}
[self.groupList setText:str];

} 
```

上述方法的替代方法不依赖于graphuser有名称的巧合，所以这里是

```
-(void)updateInterests:(NSArray*)interests
{
NSString *str = self.groupList.text;

for(FBGraphObject *interest in interests) //Using FBGraphUser because it implements name though I'd love to use something else
{

    str = [str stringByAppendingFormat:@"%@\n",[interest objectForKey:@"name"] ];
}
[self.groupList setText:str];

} 
```

# c# - 从文字中提取控制

> ID：13107239
> 
> 赞同：4
> 
> 时间：2012-10-28T07:56:53.533
> 
> 标签：c#, asp.net, literals

我在我的 ASP.Net 应用程序中有一个文字控件，我用很多 FileUploads 填充这个文字，如下所示：

```
Literal1.Text += string.Format("<input id='File{0}' type='file' /><br/>",n++); 
```

其中 n 是一个我不担心的数字，它已被处理。FileUploads 成功添加到页面，现在我想将文字文本转换（或任何你称之为的）文本到几个 FileUploads（n 个项目）中，并将它们全部保存在一个回发中。**我怎样才能将此字符串作为文件上传？**
到目前为止，我已经尝试过：

```
string[] fileUploads = Literal1.Text.Split(new string[] { "<br/>" },  
    StringSplitOptions.RemoveEmptyEntries); 
```

这给了我一个字符串数组，每个字符串都将文件上传为字符串，是否可以将**这些字符串投射到文件上传并上传他们的文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:58:58.547

给您的输入名称，并在回`Request["inputName"]`发检查值..

```
lit.Text += String.Format("<input id='File{0}' name='File{0}' type='file' /><br/>", n++); 
```

在回发时，您的文件名位于`Request["File1"]`,`Request["File2"]`等中。

PS：也许您需要的只是从中获取文件本身`Request.Files`（假设表单有`enctype="multipart/form-data"`）。

# c# - django 与 c# 桌面应用程序的接口

> ID：13107241
> 
> 赞同：2
> 
> 时间：2012-10-28T07:57:18.600
> 
> 标签：c#, python, .net, django, http

我有这个项目，我有一个在机器上运行的 django 服务器，用于与网络上的其他机器进行通信。现在我在同一台机器上还有另一个用 c# 编写的应用程序，用于监视某些硬件的状态。

我想知道是否有办法在 c# 应用程序中编写 http 请求/响应系统，我可以将它与 django 服务器接口，这样当 django 向 c# 应用程序发出请求时，它会读取某些值并返回响应姜戈。

有人可以告诉我如何在 c# 应用程序上编写这个 http 服务器，或者给我可以查找的资源。

谢谢

# python - 从文本文件中的行中读取特定字符（Python）

> ID：13107243
> 
> 赞同：0
> 
> 时间：2012-10-28T07:57:46.443
> 
> 标签：python

```
char1= "P"
length=5
f = open("wl.txt", 'r')

for line in f:
if len(line)==length and line.rstrip() == char1:
   z=Counter(line)
   print z 
```

我只想输出长度为 5 且包含字符 p 的行。到目前为止

```
 f = open("wl.txt", 'r')
    for line in f:
    if len(line)==length :#This one only works with the length
      z=Counter(line)
      print z 
```

有人猜吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T08:02:44.880

你的问题是：

```
if len(line)==length and line.rstrip() == char1: 
```

如果一行有 5 个字符长，那么在删除尾随空格之后，您将比较它是否等于长度为 1 的字符串...例如，'abcde' 永远不会等于 'p'，并且您的检查如果您的行包含 'p' 将永远不会运行，因为它不是 5 个字符...

我不确定你想做什么`Counter`

更正的代码是：

```
# note in capitals to indicate 'constants'
LENGTH = 5
CHAR = 'p'

with open('wl.txt') as fin:
    for line in fin:
        # Check length *after* any trailing whitespace has been removed
        # and that CHAR appears anywhere **in** the line
        if len(line.rstrip()) == LENGTH and CHAR in line:
            print 'match:', line 
```

# qt - 在 QMdiArea 中处理多个文档的最佳实践？

> ID：13107244
> 
> 赞同：0
> 
> 时间：2012-10-28T07:57:54.410
> 
> 标签：qt, qgraphicsview, qgraphicsscene, qmainwindow, qmdiarea

我需要设计和开发一种图形软件，可以编辑包含图形元素的自定义文件等。

我希望该软件包含许多文档，`QMdiArea`这实际上是我在`QMainWindow`.

对于每个文档，我都需要 a`QGraphicsView`和 a `QGraphicsScene`，因为它们一起工作。

现在，我的问题是，我应该`QGraphicsView`用受保护/私有成员继承它自己的`QGraphicsScene`，还是应该创建一个继承`QWidget`和处理`QGraphicsView`/实例的类`QGraphicsScene`？

还是有什么我没有想到的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:08:29.733

首先，我认为您不需要 QWidget 来管理 QGraphicsScene 和 QGraphicsView。考虑到这一点，“最佳实践”通常是尽可能避免子类化。最终，您可能必须继承 QGraphicsView （如果您想更改其默认功能），但您的问题中没有任何内容暗示您现在需要。另请注意，有一个函数`QGraphicsView::scene()`可以返回视图的当前场景，因此无需将场景设为成员（它已经是）。

如果您需要访问特定的视图或场景，可以执行以下操作：

```
MainWindow::onActionClearActiveWindow() // just an example
{
    QMdiArea *myMdiArea = static_cast<QMdiArea*>(centralWidget());
    QGraphicsView *activeView = static_cast<QGraphicsView*>(myMdiArea->widget());
    QGraphicsScene *activeScene = activeView->scene();
    activeScene->clear();
} 
```

另请参阅[`QMdiArea::subWindowList()`](http://doc.qt.digia.com/qt/qmdiarea.html#subWindowList)返回所有子窗口的列表。

# android-actionbar - 在 android 应用程序中不显示简单的操作栏

> ID：13107245
> 
> 赞同：0
> 
> 时间：2012-10-28T07:58:00.347
> 
> 标签：android-actionbar

我正在尝试在我的应用程序中创建一个操作栏。我已经隐藏了默认操作栏，但它没有显示我的操作栏。

我正在使用以下代码：- [http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
     }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
         MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.activity_category, menu);
            return true;
            }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
         return super.onOptionsItemSelected(item);
    }

 } 
```

这是菜单的代码：-

# installshield - 如何在 installshield 中禁用字体注册 installscript MSI 项目？

> ID：13107248
> 
> 赞同：3
> 
> 时间：2012-10-28T07:58:22.073
> 
> 标签：installshield

我有一个 Installscript MSI 项目，我想在 Install Shield 中禁用全局字体注册。我怎样才能做到这一点 ？

我只有一些字体文件，我将它们复制到我设置应用程序的硬盘上，但它会在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts`. 我不希望它发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:12:22.120

据我所知，有两种方法。

如果您有 InstallShield 的付费版本，您可以使用此方法： [http ://helpnet.installshield.com/installshield18helplib/mergedProjects/installshield18langref/LangrefDisable00000677.htm](http://helpnet.installshield.com/installshield18helplib/mergedProjects/installshield18langref/LangrefDisable00000677.htm)

或者，如果您的应用程序动态加载字体（就像我们使用 QT 所做的那样），只需将您的字体文件重命名为 .font 或其他名称，然后将它们读入您的安装项目。InstallShield 不会将它们识别为字体，因此不会注册文件。

如果您确实需要它们具有 .ttf 扩展名，我建议您设置一个自定义操作（例如 .js 脚本），将安装后的字体文件重命名为 ttf。

我希望这有帮助

干杯

# sms - Cinterion MC52i - 如何删除所有短信？

> ID：13107252
> 
> 赞同：0
> 
> 时间：2012-10-28T07:58:50.093
> 
> 标签：sms, modem, at-command

在 USB 调制解调器（华为 E1550）命令 AT+CMGD=0,4 从内存中删除所有短信。

但我不能在 MC52i 中做同样的事情。AT+CMGD=? 返回正常，没有显示选项

at+cpms?
+CPMS: "MT",85,85,"MT",85,85,"MT",85,85

如何一次删除所有短信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:31:14.133

您应该查看由[ClearConnex开发的](http://www.clearconnex.com)[ClearLink](http://www.clearconnex.com/content/clearlink)。ClearLink 适用于大量模块，应该能够帮助您解决问题。这是其他模块的列表：

*   灰烬MC75i
*   Cinterion TC63i
*   华为MG323
*   华为MU509
*   Sierra Wireless Q2687、SL6087、WMP100、Fastrack、GL6100
*   泰利特 GE864-PY

# html - 如何禁用外部 CSS 样式表 - 新手

> ID：13107259
> 
> 赞同：0
> 
> 时间：2012-10-28T07:59:53.057
> 
> 标签：html, css

我创建了一个三页网页，并且正在使用一个外部 css 样式表来调整我的导航列表，以便它们越过顶部并具有彩色背景。

当我尝试在表格内的页面上创建列表时，缩进和垂直列表不起作用。
我将问题追溯到外部样式表。

如何关闭样式表所做的设置以便正确格式化列表？

**[编辑-好的，所以我做了一个工作。我按照建议删除了外部样式表链接，并将所有样式信息放入我的脑海中。然后我在 ul 周围做了一个 div ，在 li 周围做了一个 div ，这似乎已经成功了一半。在 li 周围，我设置了宽度：50px，这让我的垂直列表工作。list-style-type:square 仍然没有做任何事情，但我已经厌倦了今晚不再关心。]**

```
<!DOCTYPE html>
<html>
<head>
<title>Elex267-Webpage</title>
<link rel="stylesheet" type="text/css" href="myStyle.css">
</head>

<body>
<!-- Banner at Top of Page ***********************************-->
<div style="background-color:blue; color:white;font-size:30px;">

<img src="Pics/camosun-white.png" alt="CamosunPNG" width="200" height="70" align="left">
<div align="center"style="margin-left:50%">Elex 267 Web Demo
<br>
Microchip TCP/IP Stack v3.02</div>
</div>
<!--*********************************************************-->
<!--NavBar Code *********************************************-->
<ul>
<li><a href="index.htm">Home</a></li>
<li><a href="features.htm">Features</a></li>
<li><a href="about.htm">About</a></li>
</ul>
<!--***************************************************-->
<h1>
Welcome to the features page of the website.<br>
</h1>
<p>
This web page is being run on the NM101 NorthMicro Pic Prototype Board with the LCD/Keypad and Network modules.
<br>
Features are:
</p>
<table border="1">
<tr>
<td>
<p>This is a paragraph</p>
<p>This is another paragraph</p>
</td>
<td>This cell contains a table:
<table border="1">
<tr>
 <td>A</td>
 <td>B</td>
</tr>
<tr>
 <td>C</td>
 <td>D</td>
</tr>
</table>
</td>
</tr>
<tr>
<td>This cell contains a list
<ul>
 <li>apples</li>
<li>bananas</li>
<li>pineapples</li>
</ul>
</td>
<td>HELLO</td>
</tr>
</table>

</body>
</html>

<!-- And the External CSS Stylesheet Code -->

 p {color:black;font-size:20px;background-color:white;}
 body {background-color:white;}
 ul{list-style-type:none;margin:0;padding:0;overflow:hidden;}
 li{float:left;}
 a{display:block;width:400px;background-color:#ff0000;color:white;}
 a:hover,a:active{background-color:#cc0000;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:05:02.560

我刚刚阅读了您的编辑，虽然您似乎走了，但无论如何我还是要回答。不要放弃。CSS 在开始时可能会令人沮丧，并且难以实施。内联样式、字体标签地狱这一切似乎变得如此简单，直到您意识到 CSS 赋予您的样式的实际力量。我认为你应该做的就是暂时离开你的工作，阅读一些 CSS，这样你就可以更好地理解你在做什么，我将在这里给你一些建议帮助解决手头的问题，但我仍然认为您需要阅读更多内容。

*   将样式从头脑中取出并返回到外部样式表中，这是您可能得到的最糟糕的建议。

*   首先阅读特异性。如果存在冲突的规则，这就是 CSS 决定应用哪个规则的方式。例如采取以下代码：

    ```
    a{color:blue;text-decoration:underline;font-weight:bold;}
    p{color:red;}
    a{color:green;font-weight:normal;} 
    ```

您的链接将变为绿色、带下划线且重量正常。这是因为绿色和正常的重量在蓝色和粗体之后按照阅读的顺序排列，这是最简单的规则，还有其他规则，比如它是内联的，它是一个 id 还是一个类等。阅读规则，您将了解如何编写 CSS 以将规则应用到您想要的位置。这就是可怕的“把它放在头脑中”建议的来源，因为该 CSS 将在外部 CSS 之后应用。仍然没有使它成为正确的方法。

*   了解类和 ID。很快，ID 是您可以应用于元素的唯一名称，例如，您可以在 CSS 中使用 #mainNav{color:blue} 设置该 ID 的样式，关于 ID 要记住的是它们是唯一的。不要使用 ID 为 mainNav 的 5 个 UL（这样做的主要原因是您可以使用它们来识别它们，例如在 js 或 jQuery 中）。如果您有多个需要使用类的相同样式的东西，那么类的好处是您可以将它们链接起来，因此作为一个简单的示例，请考虑以下代码：

    ```
    .blue{color:blue}
    .underlined{text-decoration:underline}
    .bold{font-weight:bold} 
    ```

第一次阅读似乎有点愚蠢，但现在看看你如何应用它。

```
<p class="bold blue">This is some blue text<span class="underlined"> some of it is underlined</span> and some of it isn't</p> 
```

这是您需要解决问题的地方。如果您只想将这些列表样式应用于您的导航，添加一个类将解决它级联到其他列表的问题。请参阅以下内容：

```
.nav ul{list-style-type:none;margin:0;padding:0;overflow:hidden;}
.nav li{float:left;}
.nav a{display:block;width:400px;background-color:#ff0000;color:white;}
.nav a:hover,a:active{background-color:#cc0000;}

<div class="nav">
   <ul>
       <li></li>
   </ul>
 </ul> 
```

您创建的任何其他列表都不会采用这些样式。基本上，您希望您的外部样式表从您的基础开始，然后随着您的进展而变得更加具体。因此，您希望在每个列表中的样式位于顶部，并位于 ul 和 li 或 ol 和 li 元素上，然后随着您在表格中进一步向下，您可以得到更具体的样式。

**远离内联 CSS 远离头部 CSS**

相信我，学会正确地做这件事，你会很高兴，你永远不会明白为什么你会这样做。使用 Chrome 的检查元素来追踪为什么某些东西以某种方式显示，然后修复 CSS，忘记这些修复它的黑客方法。把它修好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:05:07.660

如果我知道你的要求，你不能那样做。

您可以使用 firebug/chrome 开发工具检查并找到被覆盖的属性。

一旦你找到它们，你就可以在你自己的样式表中覆盖它们。

请记住，这里的特异性也很重要。

如果它不起作用，您可能需要为选择器添加权重，或使用 !important 关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:08:13.263

所以你想保留工作表中的样式，只是不影响页面上的列表？为什么不给该列表一个特定的 ID 和不同的样式呢？

例如，我刚刚调用了你的列表 #cellul 并给它一个 10px 的边距来展示不同的样式：

```
p {color:black;font-size:20px;background-color:white;}
body {background-color:white;}
ul{list-style-type:none;margin:0;padding:0;overflow:hidden;}
li{float:left;}
a{display:block;width:400px;background-color:#ff0000;color:white;}
a:hover,a:active{background-color:#cc0000;}
#cellul{list-style-type:none;margin:10px;padding:0;overflow:hidden;} 
```

结果如下：[JsFiddle](http://jsfiddle.net/Koubenec/rgnk5/2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T08:07:19.753

你可以为你的`<ul>`喜欢设置一个类：

```
<ul class="sth"> 
```

然后在 CSS 样式表中，把你的类名放在后面`ul`：

```
ul.sth {list-style-type:none;margin:0;padding:0;overflow:hidden;} 
```

# c++ - 初始化类构造函数

> ID：13107262
> 
> 赞同：1
> 
> 时间：2012-10-28T07:59:58.283
> 
> 标签：c++, class, constructor

我有一些代码

```
// Includes, namespace and prototypes
#include "template.h"
#include "Global.h"
#include "Sprite.h"
#include "Gesture.h"
#include "Touch.h"

using namespace AGK;

Gesture currentGesture;

// Begin app, called once at the start
void app::Begin( void )
{
    SetupEnvironment(ENV_ANDROID);
    CreateBackground();
} 
```

在这种情况下我将如何调用`currentGesture`'s 构造函数以便我可以使用它？我知道仅通过在上面定义它就不会调用它`app::Begin`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T08:02:01.033

事实上，它是。

```
Gesture currentGesture; 
```

`currentGesture`定义了一个使用外部链接和全局范围调用的变量。构造函数在 entry in 之前被调用`main`，所以这个变量在那个时候是活跃的并且很好。您可以在此翻译单元中将其用作`currentGesture`或`::currentGesture`。

其他翻译单元必须先声明它：

```
extern Gesture currentGesture; 
```

# xaml - 在 Flipview 中使用 Listview 并使用触摸手势时出现未处理的异常

> ID：13107270
> 
> 赞同：0
> 
> 时间：2012-10-28T08:02:37.290
> 
> 标签：xaml, windows-runtime, winrt-xaml

我正在制作一个日历应用程序，它使用 FlipView 在几周之间进行，每个翻转视图内部都是“周”对象。Week.xaml 由 1 行 7 列的 Grid 组成，用于一周中的几天。每个网格列都包含一个 ListView，我用用户可以从中选择的事件来填充它。下面是一些代码作为示例，用于定义网格和 1 列（星期日） 这还包含日期的名称和我稍后用日期填充的空白文本框。你也可以看到它的样子。

```
 <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Sunday-->
            <Grid Grid.Column="0" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Rectangle Grid.Row="0" Fill="#FF0353A8" Stroke="Black" StrokeThickness="5" RadiusX="10" RadiusY="10"/>
                <TextBlock Grid.Row="0" Style="{StaticResource DayOfWeek}" Text="Sunday" Margin="10,6,0,38" />
                <TextBlock Grid.Row="0" x:Name="SundayNumber" Style="{StaticResource DayOfWeek}" Text="" Margin="10,37,0,7" />
                <ListView Name="SundayPanel" ItemTemplate="{StaticResource TaskTemplate}" IsItemClickEnabled="True" ItemClick="Item_Clicked"/>

            </Grid> 
```

[这看起来像什么](http://i.stack.imgur.com/u6nNs.png)

这对于在我的 ListView 中填充项目非常有用，但是在尝试使用我的 FlipView 在几周之间滑动时我遇到了一个大问题。每当我用手指从 ListView 区域开始向左或向右滑动以更改周数时，我都会收到如下所示的未处理异常。**当我使用鼠标控件在 FlipView 之间切换时，这不会发生，只有滑动手势。**我可以整天使用 ListView 箭头控件向后单击，没有问题。

[异常](http://i.stack.imgur.com/UYTbv.png)**使用下面的帮助后，我可以获得有关异常的更多信息：TaskM8.exe 中 0x0f96a375 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

**如果我使用 ItemsControl 和 ItemsPanelTemplate 而不是 ListView 来显示我的项目，则不会**出现此问题，但是我还没有弄清楚如何使我的单个项目可点击并对其进行处理（我需要能够导航到全屏单击后的事件描述。）。像 ItemClick 这样的事件处理程序似乎在 ItemsControl 中不可用。

有谁知道我为什么会得到这个异常，或者如何用 ItemsControl 来实现它？

关于我尝试过的事情的快速说明 - 我尝试用任何内容或 ItemControls 替换 ListView 的区域，即使只有 1 个列表视图（例如，星期五），我只会在以下情况下收到错误消息我从 ListView 所在的位置开始滑动。当整个星期页面有 7 个页面时，这是不可行的，因为用户基本上无法在页面的 3/4 上滑动:(

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:25:01.130

我不会假装知道你为什么会收到这个错误，但我在调试我的应用程序时也遇到了类似的问题。[如果您遵循这篇文章中](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/6940e4c7-5ed1-4030-a6c3-276feba10c14/)的建议，您可能可以获得有关该错误的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T06:30:52.797

尝试使用 ItemsControl 而不是 ListView

# jquery - jwysiwyg 使用当前 textarea 值作为初始内容

> ID：13107273
> 
> 赞同：4
> 
> 时间：2012-10-28T08:03:10.297
> 
> 标签：jquery

我在一页上的多个 textarea 上使用 jwysiwyg。但是，我的 textarea 具有我需要使用的初始预填充值。而是使用 jwysiwyg 的默认“初始内容”。

我的代码是：

```
$(document).ready(function(){
    $('textarea').wysiwyg({
        autoGrow:true, 
        initialContent: this.value,
        controls:"bold,italic,underline,|,undo,redo"
        });
}); 
```

感谢我可以通过 id 单独调用每个文本区域，但这看起来像是代码行。认为我的问题完全取决于我引用“this.value”的方式，但无法弄清楚。

我可以通过在 jswysywig.js 'initialContent = original.val();' 中更改以下内容来解决这个问题 更改为“options.initialContent = original.val();”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:02:38.293

这是你在找什么：http: [//jsfiddle.net/QjBh4/](http://jsfiddle.net/QjBh4/)

希望这符合您的需要`:))`

PS - 请随时使用我的演示并创建您的问题，如果我错过了什么，我会尝试帮助您！

**脚本来源等。人。**

```
 <link rel="stylesheet" type="text/css" href="http://akzhan.github.com/jwysiwyg/help/lib/blueprint/screen.css" media="screen, projection" />
<link rel="stylesheet" type="text/css" href="http://akzhan.github.com/jwysiwyg/help/lib/blueprint/print.css" media="print" />
<link rel="stylesheet" href="http://akzhan.github.com/jwysiwyg/jquery.wysiwyg.css" type="text/css"/>
<script type="text/javascript" src="http://akzhan.github.com/jwysiwyg/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="http://akzhan.github.com/jwysiwyg/controls/wysiwyg.image.js"></script> 
```

**示例代码**

```
(function($) {
    $(document).ready(function() {
        $('textarea').each(function() {
            value_of_textarea = this.value;
            $(this).wysiwyg({

                autoGrow: true,
                initialContent: function() {
                    return value_of_textarea;
                },
                controls: "bold,italic,underline,|,undo,redo"

            });
        });

    });
})(jQuery);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:32:34.463

就我而言，我犯了一个愚蠢的错误。 `value="whatever"`不是 textarea 属性。我发布这个的唯一原因，我猜其他人也犯了同样的错误，因为这个问题在谷歌中的结果数量很多。也许这在某些时候是 jWysiwyg 中的一个真正的错误，但它对我有用（没有任何修改）应该从 v0.97 开始工作

`<textarea id="wysiwyg" rows="10" cols="80" wrap="physical" name="whatever">This is your initial content.</textarea>`

# objective-c - 如何从文件名中查找图像数量？

> ID：13107274
> 
> 赞同：0
> 
> 时间：2012-10-28T08:03:18.333
> 
> 标签：objective-c, ios, nsstring

我需要从文件名 exp 中知道我有多少图像：我有图像调用：第一个文件：Splash_10001.jpg 最后一个文件：Splash_10098.jpg 我想插入然后数组..

```
 for(int i = 1; i <= IMAGE_COUNT; i++)
{
    UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"%@%04d.%@",self.firstImageName,i,self.imageType]];
    NSLog(@"%d",i);
    [imgArray addObject:image];
} 
```

我想用数字 98 替换 IMAGE_COUNT，但我需要从用户发送给我的字符串中获取数字：Splash_10098.jpg 我需要将 Splash_10098.jpg 分离为：nsstring:Splash_1 int:0098 nsstring:jpg 10x 全部！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:34:56.583

这取决于授予的字符串的输入是什么。在下文中，我将搜索点并返回到最大位数。顺便说一句，我只能建议使用多语言 NumberFormatter 而不是依赖默认转换。

```
 NSString * input = @"Splash_19001.jpg";
  NSRange r = [input rangeOfString:@"."];
  if(r.location>4){
    NSString * numberPart = [input substringWithRange: NSMakeRange(r.location-4,4)];
    NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
    [nf setNumberStyle:NSNumberFormatterDecimalStyle];
    NSNumber * number = [nf numberFromString:numberPart];
    int val = [number intValue];
    NSLog(@"intValue=%d",val);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:39:39.110

如果数字长度在后缀中是固定的，那么使用子字符串而不是尝试删除前缀是有意义的。剥离扩展名并获取最后的 x 字符，将它们转换为 int`intValue`或`NSNumberFormatter`iOS 建议的，尽管如果您确定字符串的格式，这可能是不必要的。

```
NSString *userProvidedString = @"Splash_10001.jpg";
NSString *numberString = [userProvidedString stringByDeletingPathExtension];
NSUInteger length = [numberString length];
NSInteger numberLength = 4;
if (length < numberLength)
{
     NSLog(@"Error in the string");
     return;
}
numberString = [numberString substringWithRange: NSMakeRange(length - 4, 4)];
NSInteger integer = [numberString integerValue];
// Do whatever you want with the integer. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T11:05:45.130

使用`Regex`(`NSRegularExpression`在 iOS 中)，这可以很容易地完成，

看一下这个，

```
NSError *error = NULL;
NSString *originalString = @"Splash_10098.jpg";
NSString *regexString = @"([^\?]*_[0-9])([0-9]*)(.)([a-z]*)";

NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:regexString options:NSRegularExpressionCaseInsensitive error:&error];
NSTextCheckingResult *match = [regex firstMatchInString:originalString options:NSRegularExpressionCaseInsensitive range:NSMakeRange(0, [originalString length])];

NSLog(@"FileName: %@", [originalString substringWithRange:[match rangeAtIndex:1]]);
NSLog(@"Total Count: %@", [originalString substringWithRange:[match rangeAtIndex:2]]);
NSLog(@"File type: %@", [originalString substringWithRange:[match rangeAtIndex:4]]); 
```

**结果：**

```
FileName: Splash_1
Total Count: 0098
File type: jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:15:23.747

我想这就是你要找的

```
NSString *stringUserSendsYou = @"Splash_10098.jpg";
int IMAGE_COUNT = [[[stringUserSendsYou stringByReplacingOccurrencesOfString:@"Splash_1" withString:@""] stringByReplacingOccurrencesOfString:@".jpg" withString:@""] integerValue]; 
```

# ios5 - 如果 iOS 5 + 联系人中的姓氏为空，则应用程序崩溃

> ID：13107275
> 
> 赞同：1
> 
> 时间：2012-10-28T08:03:26.473
> 
> 标签：ios5, abaddressbook, nsnull

我正在尝试从通讯录中检索联系人并将其显示在表格视图中，索引列表与 iOS 中的联系人应用程序相同。我正在按姓氏对联系人进行排序。如果姓氏为空，则我的应用程序崩溃。这是我的代码

```
 - (void)getAddressBookDataForUpdateRequest:(BOOL)isUpdateRequest {

    if (self.peopleArray == nil) {
        NSMutableArray *temp = [[NSMutableArray alloc]init];
        self.peopleArray = temp;
    }

    if (self.batchUserArray == nil) {
        NSMutableArray *temp = [[NSMutableArray alloc]init];
        self.batchUserArray = temp;
    }

    row = [[NSMutableDictionary alloc] init];
    words =  [[NSMutableArray alloc]init];

    ABAddressBookRef addressBook=ABAddressBookCreate();
    CFArrayRef cfPeople=ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFMutableArrayRef cfPeopleMutable=CFArrayCreateMutableCopy(kCFAllocatorDefault, CFArrayGetCount(cfPeople), cfPeople);
    CFArraySortValues(cfPeopleMutable, CFRangeMake(0, CFArrayGetCount(cfPeopleMutable)), (CFComparatorFunction)ABPersonComparePeopleByName, (void *)ABPersonGetSortOrdering());
    NSArray *tempPeople=(__bridge NSArray *)cfPeopleMutable;

    APP_DELGATE.people = [NSArray arrayWithArray:tempPeople];

    peopleCount = [APP_DELGATE.people count];

    lastCharacter = @"A";

    if (peopleCount >0) {

        int noOfRec = 0;
        for (int i=0; i<peopleCount; i++) {

            ABRecordRef record = (__bridge ABRecordRef)[APP_DELGATE.people objectAtIndex:i];

            // Convert ABRecordRef to UserContactInfo object
            UserContactInfo *user = [self getUserContactInfoFromABRecordRef:record isForUpdate:isUpdateRequest];

            if (user != nil) {
                currentCharacter = [[user.lastName substringToIndex:1]uppercaseString];
                NSLog(@"Last: %@ :: Current:- %@",lastCharacter,currentCharacter);

                if ([currentCharacter isEqualToString:lastCharacter]) {
                    [words addObject:user];

                }
                else {

                    row = nil;
                    row = [[NSMutableDictionary alloc] init];

                    [row setValue:lastCharacter forKey:@"sectionTitle"];
                    [row setValue:words forKey:@"sectionRows"];
                    [self.peopleArray addObject:row];
                    [self.batchUserArray addObject:row];

                    NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:[self.batchUserArray mutableCopy],BATCH_DONE_KEY,[NSNumber numberWithBool:isUpdateRequest],@"isUpdateRequest", nil];
                    [[NSNotificationCenter defaultCenter] postNotificationName:BATCH_DONE_NOTIFICATION object:self userInfo:dic];
                    [self.batchUserArray removeAllObjects];

                    words = nil;

                    words =  [[NSMutableArray alloc]init];
                    [words addObject:user];

                    NSLog(@"ASCII Value of %@ = %d :: Last Char %@ = %d",currentCharacter,[currentCharacter characterAtIndex:0],lastCharacter,[lastCharacter characterAtIndex:0]);
                    int lastCharAsciiValue = [lastCharacter characterAtIndex:0];
                    int currentCharAsciiValue = [currentCharacter characterAtIndex:0];

                    while ((lastCharAsciiValue +1) < (currentCharAsciiValue)) {

                        row = nil;
                        row = [[NSMutableDictionary alloc] init];

                        lastCharAsciiValue ++;
                        lastCharacter = [NSString stringWithFormat:@"%c",lastCharAsciiValue];
                        [row setValue:lastCharacter forKey:@"sectionTitle"];
                        [row setValue:[[NSMutableArray alloc]init] forKey:@"sectionRows"];
                        [self.peopleArray addObject:row];
                        [self.batchUserArray addObject:row];

                    }
                }

                lastCharacter = currentCharacter;
                noOfRec++;
            }
        }

        // For last char "z"
        row = nil;
        row = [[NSMutableDictionary alloc] init];
        [row setValue:lastCharacter forKey:@"sectionTitle"];
        [row setValue:words forKey:@"sectionRows"];
        [self.peopleArray addObject:row];
        [self.batchUserArray addObject:row];

        NSLog(@"total rec count=%d",self.peopleArray.count);
        NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:self.batchUserArray,BATCH_DONE_KEY,[NSNumber numberWithBool:isUpdateRequest],@"isUpdateRequest", nil];
        [[NSNotificationCenter defaultCenter] postNotificationName:BATCH_DONE_NOTIFICATION object:self userInfo:dic];
        [self.batchUserArray removeAllObjects];

        [[NSNotificationCenter defaultCenter]postNotificationName:TASK_DONE_NOTIFICATION object:self];

        APP_DELGATE.allUsersArray = self.peopleArray;

    }
    else {
        [[NSNotificationCenter defaultCenter]postNotificationName:NO_CONTACTS_AVAILABLE_NOTIFICATION object:nil];
    }
    CFRelease(addressBook);
} 
```

如果 LAST NAME 是 EMPTY 应用程序崩溃

```
 if ([currentCharacter isEqualToString:lastCharacter]) {
       [words addObject:user];

    } 
```

如何检查姓氏是否为空并将其显示在索引列表的未命名部分中。任何形式的帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:11:08.707

请用

> if (user.lastName != nil) {

相当

> 如果（用户！= nil）{

完整代码

```
- (void)getAddressBookDataForUpdateRequest:(BOOL)isUpdateRequest {

if (self.peopleArray == nil) {
    NSMutableArray *temp = [[NSMutableArray alloc]init];
    self.peopleArray = temp;
}

if (self.batchUserArray == nil) {
    NSMutableArray *temp = [[NSMutableArray alloc]init];
    self.batchUserArray = temp;
}

row = [[NSMutableDictionary alloc] init];
words =  [[NSMutableArray alloc]init];

ABAddressBookRef addressBook=ABAddressBookCreate();
CFArrayRef cfPeople=ABAddressBookCopyArrayOfAllPeople(addressBook);
CFMutableArrayRef cfPeopleMutable=CFArrayCreateMutableCopy(kCFAllocatorDefault, CFArrayGetCount(cfPeople), cfPeople);
CFArraySortValues(cfPeopleMutable, CFRangeMake(0, CFArrayGetCount(cfPeopleMutable)), (CFComparatorFunction)ABPersonComparePeopleByName, (void *)ABPersonGetSortOrdering());
NSArray *tempPeople=(__bridge NSArray *)cfPeopleMutable;

APP_DELGATE.people = [NSArray arrayWithArray:tempPeople];

peopleCount = [APP_DELGATE.people count];

lastCharacter = @"A";

if (peopleCount >0) {

    int noOfRec = 0;
    for (int i=0; i<peopleCount; i++) {

        ABRecordRef record = (__bridge ABRecordRef)[APP_DELGATE.people objectAtIndex:i];

        // Convert ABRecordRef to UserContactInfo object
        UserContactInfo *user = [self getUserContactInfoFromABRecordRef:record isForUpdate:isUpdateRequest];

        if (user.lastName != nil) {
            currentCharacter = [[user.lastName substringToIndex:1]uppercaseString];
            NSLog(@"Last: %@ :: Current:- %@",lastCharacter,currentCharacter);

            if ([currentCharacter isEqualToString:lastCharacter]) {
                [words addObject:user];

            }
            else {

                row = nil;
                row = [[NSMutableDictionary alloc] init];

                [row setValue:lastCharacter forKey:@"sectionTitle"];
                [row setValue:words forKey:@"sectionRows"];
                [self.peopleArray addObject:row];
                [self.batchUserArray addObject:row];

                NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:[self.batchUserArray mutableCopy],BATCH_DONE_KEY,[NSNumber numberWithBool:isUpdateRequest],@"isUpdateRequest", nil];
                [[NSNotificationCenter defaultCenter] postNotificationName:BATCH_DONE_NOTIFICATION object:self userInfo:dic];
                [self.batchUserArray removeAllObjects];

                words = nil;

                words =  [[NSMutableArray alloc]init];
                [words addObject:user];

                NSLog(@"ASCII Value of %@ = %d :: Last Char %@ = %d",currentCharacter,[currentCharacter characterAtIndex:0],lastCharacter,[lastCharacter characterAtIndex:0]);
                int lastCharAsciiValue = [lastCharacter characterAtIndex:0];
                int currentCharAsciiValue = [currentCharacter characterAtIndex:0];

                while ((lastCharAsciiValue +1) < (currentCharAsciiValue)) {

                    row = nil;
                    row = [[NSMutableDictionary alloc] init];

                    lastCharAsciiValue ++;
                    lastCharacter = [NSString stringWithFormat:@"%c",lastCharAsciiValue];
                    [row setValue:lastCharacter forKey:@"sectionTitle"];
                    [row setValue:[[NSMutableArray alloc]init] forKey:@"sectionRows"];
                    [self.peopleArray addObject:row];
                    [self.batchUserArray addObject:row];

                }
            }

            lastCharacter = currentCharacter;
            noOfRec++;
        }
    }

    // For last char "z"
    row = nil;
    row = [[NSMutableDictionary alloc] init];
    [row setValue:lastCharacter forKey:@"sectionTitle"];
    [row setValue:words forKey:@"sectionRows"];
    [self.peopleArray addObject:row];
    [self.batchUserArray addObject:row];

    NSLog(@"total rec count=%d",self.peopleArray.count);
    NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:self.batchUserArray,BATCH_DONE_KEY,[NSNumber numberWithBool:isUpdateRequest],@"isUpdateRequest", nil];
    [[NSNotificationCenter defaultCenter] postNotificationName:BATCH_DONE_NOTIFICATION object:self userInfo:dic];
    [self.batchUserArray removeAllObjects];

    [[NSNotificationCenter defaultCenter]postNotificationName:TASK_DONE_NOTIFICATION object:self];

    APP_DELGATE.allUsersArray = self.peopleArray;

}
else {
    [[NSNotificationCenter defaultCenter]postNotificationName:NO_CONTACTS_AVAILABLE_NOTIFICATION object:nil];
}
CFRelease(addressBook); 
```

}

# java - 插入更新或删除后如何刷新JTable

> ID：13107279
> 
> 赞同：1
> 
> 时间：2012-10-28T08:04:48.317
> 
> 标签：java, swing, jdbc, jtable, tablemodel

我想用数据库中新添加或修改的信息刷新 JTable 目前它仅在我单击`showDetails`或在数据库中插入 1 条记录后才有效。

每次添加或删除新条目时，它只会一次又一次地显示信息

**代码属于 GUIClass**

```
package studentmanagementsystem.gui;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.sql.*;
import java.util.Vector;
import studentmanagementsystem.entity.*;
import studentmanagementsystem.backend.*;

public class StudentPersonalGui extends JFrame implements ActionListener{

JLabel heading,lenroll,lDOB,lgender,lmobileno,lemailid,lfathername,lname;
JLabel lmothername,laddress;
            JTextField tenroll,tDOB,tmobileno,temailid,tfathername,tname;
            JTextField tmothername,taddress;
            JComboBox<String> cgender;
            JButton insert,retrieve;
            JButton reset;
            JPanel p1,dataPanel;
            String gender[]={"Male","Female"};
            Font f1=new Font("BOLD",Font.ITALIC,25);
            Color c1=Color.white;
            Color c2=Color.lightGray ;
            Color c3=new Color(50,100,10);
            boolean insert_status;

            StudentPersonal sp;

                public StudentPersonalGui(){
                        setLayout(null);

                        heading=new JLabel("Student Personal Record");
                        heading.setFont(f1);
                        heading.setForeground(c3);
                        p1=new JPanel();
                        p1.add(heading);
                        p1.setBackground(c2);
                        p1.setLayout(null);
                        p1.setBounds(200,20,400,60);
                        heading.setBounds(50,10,300,30);
                        add(p1);

                        lenroll=new JLabel("Enrollment No.:");
                        lname=new JLabel("Student Name:");
                        lDOB=new JLabel("Date of Birth:");
                        lmobileno=new JLabel("Mobile No.:");
                        lemailid=new JLabel("Email Id:");
                        lgender=new JLabel("Gender:");
                        lfathername=new JLabel("Father Name:");
                        lmothername=new JLabel("Mother Name:");
                        laddress=new JLabel("Address:");

                        tenroll=new JTextField(12);
                        tname=new JTextField(12);
                        tDOB=new JTextField(12);
                        tmobileno=new JTextField(12);
                        temailid=new JTextField(12);
                        tfathername=new JTextField(12);
                        tmothername=new JTextField(12);
                        taddress=new JTextField(12);

                        cgender=new JComboBox<String>(gender);

                        insert=new JButton("Add Record");
                        retrieve=new JButton("View Details");
                        reset=new JButton("Reset");

                        add(lenroll);
                        add(lDOB);
                        add(lmobileno);
                        add(lgender);
                        add(lemailid);
                        add(lfathername);
                        add(lmothername);
                        add(lname);
                        add(laddress);

                        add(tenroll);
                        add(tDOB);
                        add(tmobileno);
                        add(cgender);
                        add(temailid);
                        add(tfathername);
                        add(tmothername);
                        add(tname);
                        add(taddress);

                        add(insert);
                        add(retrieve);
                        add(reset);

                        lenroll.setBounds(100,100,100,20);
                        tenroll.setBounds(220,100,150,20);

                        lname.setBounds(450,100,100,20);
                        tname.setBounds(570,100,200,20);

                        lDOB.setBounds(100,130,100,20);
                        tDOB.setBounds(220,130,120,20);

                        lgender.setBounds(450,130,100,20);
                        cgender.setBounds(570,130,100,20);

                        lmobileno.setBounds(100,160,100,20);
                        tmobileno.setBounds(220,160,120,20);

                        lemailid.setBounds(450,160,200,20);
                        temailid.setBounds(550,160,200,20);

                        lfathername.setBounds(100,190,100,20);
                        tfathername.setBounds(220,190,200,20);

                        lmothername.setBounds(100,220,100,20);
                        tmothername.setBounds(220,220,200,20);

                        laddress.setBounds(100,250,200,20);
                        taddress.setBounds(220,250,350,20);

                        insert.setBounds(150,300,150,20);
                        reset.setBounds(350,300,80,20);
                        retrieve.setBounds(480,300,150,20);

                        insert.addActionListener(this);
                        reset.addActionListener(this);
                        retrieve.addActionListener(this);

                        dataPanel=new JPanel();
                        dataPanel.setBounds(50,350,730,250);
                        dataPanel.setLayout(new BorderLayout());
                        dataPanel.setBackground(Color.WHITE);
                        add(dataPanel);

                        setResizable(false);
                        setVisible(true);
                        setSize(850,700);
                        setTitle("Student Record Management");
                        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                }

                public void actionPerformed(ActionEvent ae){
                        if(ae.getActionCommand()=="Add Record"){
                                sp=new StudentPersonal();
                                String sDOB=tDOB.getText();
                                String sname=tname.getText();
                                String gender=(String)cgender.getSelectedItem();
                                String emailid=temailid.getText();
                                String fathername=tfathername.getText();
                                String mothername=tmothername.getText();
                                String address=taddress.getText();

                                long enrollno=0;
                                long mobileno=0;
                                try{
                                     enrollno=Long.parseLong(tenroll.getText());
                                     mobileno=Long.parseLong(tmobileno.getText());
                                }catch(NumberFormatException nfe){
                                JOptionPane.showMessageDialog(null,"Alphabets cann't be inserted in phone field","Information", JOptionPane.ERROR_MESSAGE);
                                }
                                sp.setSenrollno(enrollno);
                                sp.setSname(sname);
                                sp.setSDOB(sDOB);
                                sp.setSgender(gender);
                                sp.setSmobileno(mobileno);
                                sp.setSemailid(emailid);
                                sp.setSfathername(fathername);
                                sp.setSmothername(mothername);
                                sp.setSaddress(address);

                                insert_status=new CRUDOperations().insert(sp);
                                if(insert_status){
                                JOptionPane.showMessageDialog(null,"Record Inserted Successfully","Information", JOptionPane.INFORMATION_MESSAGE);
                                showData();
                                }
                        }
                        else if(ae.getActionCommand()=="View Details"){
                            showData();
                        }
                        else{
                            tenroll.setText("");
                            tDOB.setText("");
                            tmobileno.setText("");
                            temailid.setText("");
                            tfathername.setText("");
                            tname.setText("");
                            tmothername.setText("");
                            taddress.setText("");
                            cgender.setSelectedIndex(0);    
                        }
                }

                public void showData(){
                    JTable table;
                    JScrollPane pane;
                    Vector<String> columnname=new Vector<String>();
                    Vector<Vector<String>> rowData=new Vector<Vector<String>>();
                    Vector<String> student;
                    try{
                                ResultSet rs=new CRUDOperations().retrieve_Data();
                                if(rs!=null){
                                    ResultSetMetaData rsmd=rs.getMetaData();
                                        int columnCount=rsmd.getColumnCount();
                                            for(int j=1;j<=columnCount;j++){
                                                columnname.add(rsmd.getColumnName(j));
                                            }
                                        while(rs.next()){
                                            student=new Vector<String>();
                                            student.add(rs.getString(1));
                                            student.add(rs.getString(2));
                                            student.add(rs.getString(3));
                                            student.add(rs.getString(4));
                                            student.add(rs.getString(5));
                                            student.add(rs.getString(6));
                                            student.add(rs.getString(7));
                                            student.add(rs.getString(8));
                                            student.add(rs.getString(9));

                                            rowData.add(student);
                                        }   
                                        rs.close();
                                        table = new JTable(rowData,columnname);
                                        pane=new JScrollPane(table);
                                        dataPanel.add(pane,BorderLayout.CENTER);
                                        add(dataPanel);
                                        validate();
                                        repaint();

                                }
                            }catch(SQLException sqle){
                            }
                }
} 
```

CRUDOperation 类用于在 ShowDetails 按钮上进行 DB 操作单击一个 CRUDOperation 函数retrieve_Data 被调用，它返回用于设置 JTable 数据的结果集

```
package studentmanagementsystem.backend;

 import java.awt.Color;
 import java.sql.*;
 import java.util.Vector;
 import studentmanagementsystem.entity.*;
 import studentmanagementsystem.gui.*;
  public class CRUDOperations{

    Connection con;
    PreparedStatement stat;
    StudentPersonal sp;
    boolean insert_status,delete_status,update_status,login_status;

    public boolean insert(StudentPersonal sp){
            con=new ConnectionManager().makeConn();
            try{
                long enrollno=sp.getSenrollno();
                String sname=sp.getSname();
                String sDOB=sp.getSDOB();
                String gender=sp.getSgender();
                String emailid=sp.getSemailid();
                long mobileno=sp.getSmobileno();
                String fathername=sp.getSfathername();
                String mothername=sp.getSmothername();
                String address=sp.getSaddress();

                String  insertSP="insert into StudentPersonal values(?,?,?,?,?,?,?,?,?)";
                    stat=con.prepareStatement(insertSP);
                    stat.setLong(1,enrollno);
                    stat.setString(2,sname);
                    stat.setString(3,sDOB);
                    stat.setString(4,gender);
                    stat.setLong(5,mobileno);
                    stat.setString(6,emailid);
                    stat.setString(7,fathername);
                    stat.setString(8,mothername);
                    stat.setString(9,address);

                        int i=stat.executeUpdate();
                        if(i>0){
                            insert_status=true;
                        }
                    }catch(Exception e){
                    }
                    return insert_status;
    }

    public ResultSet retrieve_Data(){
        ResultSet rs=null;
        try{
            con=new ConnectionManager().makeConn();
            String retrieve="select * from StudentPersonal";
            stat=con.prepareStatement(retrieve);
            rs=stat.executeQuery();
        }catch(SQLException sql){
            System.out.println(sql);
        }
        return rs;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:37:38.960

**您可以使用TableModel**并更新它的内容，而不是为每个事件添加新的 JTable 。

这是[如何创建 TableModel的示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

在这里你可以找到另一个[JDBC with JTable的链接](http://docs.oracle.com/javase/tutorial/jdbc/basics/jdbcswing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T14:18:44.777

为您的表使用[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)，而不是将数据直接添加到表中。只需将数据添加到模型并将此模型设置到您的表中。

```
DefaultTableModel dtm = new DefaultTableModel(data, columnNames);
JTable table = new JTable();
table.setModel(dtm); 
```

现在，当您想要添加数据时，只需添加到您的模型中......

```
dtm.addRow(...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T08:24:37.083

在表模型中，您应该触发适当的事件，包括表行更改、表列更改、表数据更新等。

# c++ - C++ 中的输出程序无缘无故全是白色

> ID：13107282
> 
> 赞同：0
> 
> 时间：2012-10-28T08:05:18.330
> 
> 标签：c++, allegro

以上是我遇到的问题。我正在使用 C++ 中的 Visual Studio 2010 和 Allegro 库进行游戏开发。我遇到了一个问题，在某些情况下，我的测试程序总是全白的，直到我按下按钮。我真的不明白如何解决这个问题，也不知道出了什么问题。我知道它与所使用的代码无关，因为网站上的一些示例代码从未发生过这种情况；现在，这个项目似乎一直在发生。如果有人可以指出可能的错误修复，将不胜感激。

下面是代码：

```
#include <allegro5\allegro.h>
#include <allegro5\allegro_primitives.h>                //Our primitive header file

int main(void)
{
    int width = 640;
    int height = 480;

    bool done = false;
    int pos_x = width / 2;
    int pos_y = height / 2;

    ALLEGRO_DISPLAY *display = NULL;
    ALLEGRO_EVENT_QUEUE *event_queue = NULL;

    if(!al_init())                                      //initialize Allegro
        return -1;

    display = al_create_display(width, height);         //create our display object

    if(!display)                                        //test display object
        return -1;

    al_init_primitives_addon();
    al_install_keyboard();

    event_queue = al_create_event_queue();

    al_register_event_source(event_queue, al_get_keyboard_event_source());

    while(!done)
    {
        ALLEGRO_EVENT ev;
        al_wait_for_event(event_queue, &ev);

        if(ev.type == ALLEGRO_EVENT_KEY_DOWN)
        {
            switch(ev.keyboard.keycode)
            {
                case ALLEGRO_KEY_UP:
                    pos_y -= 10;
                    break;
                case ALLEGRO_KEY_DOWN:
                    pos_y += 10;
                    break;
                case ALLEGRO_KEY_RIGHT:
                    pos_x += 10;
                    break;
                case ALLEGRO_KEY_LEFT:
                    pos_x -= 10;
                    break;
            }
        }
        else if(ev.type == ALLEGRO_EVENT_KEY_UP)
        {
            if(ev.keyboard.keycode == ALLEGRO_KEY_ESCAPE)
                done = true;
        }

        al_draw_filled_rectangle(pos_x, pos_y, pos_x + 30, pos_y + 30, al_map_rgb(255,0,255));
        al_flip_display();
        al_clear_to_color(al_map_rgb(0,0,0));
    }

    al_destroy_event_queue(event_queue);
    al_destroy_display(display);                        //destroy our display object

    return 0;
} 
```

正如我所说，它是来自在线教程的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:19:08.397

快速修复正是@mythagel 在评论中提到的。

通常对于 Allegro 游戏，您会想要创建一个计时器并让它以某个固定的时间间隔（例如，每秒 60 次）计时并将其附加到您的事件队列中。每次它滴答作响，您将游戏逻辑推进一帧，然后重新绘制图形（如果没有其他事情可做）。

因此，无需在按键事件期间直接处理输入，您只需将按键标记为按下或按下即可。因此，您可能有一个`key_left`表示向左移动的变量，并将其设置为`true`在 keydown 事件和`false`keyup 事件中。

然后在`ALLEGRO_EVENT_TIMER`你的计时器事件（`if (key_left == true) pos_x -= 10;`

There are more advanced ways of handling input that don't involve a fixed frame rate, but this is the easiest approach and usually works just fine.

# java - 在 Java 中将类型作为参数传递的最佳实践

> ID：13107283
> 
> 赞同：0
> 
> 时间：2012-10-28T08:05:17.987
> 
> 标签：java, design-patterns, reflection

我有一个类应该在 c'tor 中接收一些 IStratagy 接口的实现类型（具体类类型），并创建这些接收类型的一些对象。像这样的东西：

```
Class SomeClass {
    public SomeClass(Class<IStrategy> strategyClass) {
        strategyClass.newInstance();
        // catch nasty reflection exceptions...
    }
} 
```

我想确保参数实现 IStrategy。我可以收到一个参数“IStrategy 具体策略”，然后是具体策略.getClass().newInstance()，但它仍然是我试图避免的反射。Java 中这个问题的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:59:16.783

为什么不像这样更简单：

```
Class SomeClass {
   public SomeClass( IStrategy strategyClass ) {
      ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:07:44.290

我认为您应该使用以下方法：

```
if( IStrategy.class.isAssignableFrom(strategyClass) ) {
          .....
} 
```

基本上这就像 instanceof，但没有创建具体策略实施的实际实例。

希望这可以帮助

# silverlight - 两个应用程序可以具有相同的 .xap 文件名吗？

> ID：13107287
> 
> 赞同：1
> 
> 时间：2012-10-28T08:05:55.520
> 
> 标签：silverlight, windows-phone-7, xap

我开发了一个付费应用程序`WP7`。现在，我正在通过稍微修改它来创建免费版本。两个应用程序可以有相同的`.xap`文件吗？它不会对同时拥有这两个版本的用户造成任何问题吗？如果需要如何修改名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:17:44.083

它们可以具有相同的 XAP 名称或程序集名称或命名空间，但要确保在测试和调试时 ProductID 不同。否则，您将在部署时覆盖第一个应用程序，但第二个应用程序。
通过定义两个不同的 ProductID，您可以将它们并排部署并将它们作为两个不同的应用程序进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:15:45.453

xap 名称并不重要，因为每个应用程序都部署到手机上的不同文件夹中。只需确保两个应用程序具有不同的图标和不同的名称，否则它们将无法通过认证。

# mysql - 从具有相同字段的所有表中选择

> ID：13107291
> 
> 赞同：0
> 
> 时间：2012-10-28T08:06:29.407
> 
> 标签：mysql, sql

我有多个名为： 的表`data_yyyymmdd`。前任。数据_20121028，数据_20121029，...

每个表都有相同的字段。如何从所有这些表中获取所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:07:37.453

```
SELECT * FROM data_20121028
UNION
SELECT * FROM data_20121029
UNION
... 
```

[MySQL 5.6 参考手册](http://dev.mysql.com/doc/refman/5.6/en/index.html)：[UNION 语法](http://dev.mysql.com/doc/refman/5.6/en/union.html)

# objective-c - UIActivityViewController 可以附加 AAC 吗？

> ID：13107293
> 
> 赞同：5
> 
> 时间：2012-10-28T08:07:23.030
> 
> 标签：objective-c, ios6, uiactivityviewcontroller

我试过这个没有运气：

```
 NSData *imageData = UIImageJPEGRepresentation([sight.photo valueForKey:@"image"], 0.8);

        NSString *docsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        NSString *filePath = [docsPath stringByAppendingPathComponent:@"sound.m4a"];
        NSURL *fileUrl     = [NSURL fileURLWithPath:filePath];
        NSData *aacData = [sight.sound valueForKey:@"soundrecord"];
        [aacData writeToURL:fileUrl atomically:YES];
        //    NSString *text = self.textField.text;
        NSArray *items = @[imageData, aacData]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T13:09:20.100

是的，但是您需要将音频文件 URL 传递给活动表而不是 NSData。

```
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES)objectAtIndex:0];
NSString *filePath = [docPath stringByAppendingPathComponent:@"sound.aac"];

NSURL *fileUrl     = [NSURL fileURLWithPath:filePath isDirectory:NO];
NSArray *activityItems = @[fileUrl];

UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityVC animated:YES completion:nil]; 
```

如果您在从活动表启动电子邮件编写器时发现附件未出现，请确保您的文件路径和 URL 正确且文件存在（包括设备/模拟器驱动器上的扩展名）。

要在模拟器上打开文件，请转到文件夹（~/Library/Application Support/iPhone Simulator/...

要检查设备上的文件名，请转到 XCode Organizer Window 并选择连接的调试设备中的 Applications 选项卡。您应该在主面板上看到文件结构。

# jquery - jquery fileupload on button click

> ID：13107298
> 
> 赞同：5
> 
> 时间：2012-10-28T08:08:04.210
> 
> 标签：jquery, asp.net, file-upload

我使用了 fileupload.js jquery 插件并按照本教程来实现：[ASP.NET Ajax file upload using jQuery File Upload plugin](http://evolpin.wordpress.com/2011/09/11/asp-net-ajax-file-upload-using-jquery-file-upload-plugin/)

这很好用，但是一旦使用输入（fileuplaod 控件）选择文件，就会引发事件并上传文件。但是，我仅在单击按钮后才尝试执行此操作。

**这是代码：**

```
<input id="fileupload" type="file" name="file" multiple="multiple"/>
<input id="btnSubmit" type="button" value="Start Upload"/>

    $('#fileupload').fileupload({
      //uploads file
    }); 
```

**需要做这样的事情：**

```
 $('#btnSubmit').click(function () {
       $('#fileupload').fileupload({
         //uploads file
       });
    }); 
```

我想我们可以使用回调选项来做到这一点，但我无法正确理解：[回调选项](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:32:35.970

尝试这个：

```
<input id="fileupload" type="file" name="file" multiple="multiple"/>

<script>
$('#fileupload').on('click', function(){
    //uploads file
});
</script> 
```

在 jQuery 中使用“on”。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T19:25:21.540

在您关于此插件的链接中指出：“正如文档所述，'add' 默认使用 'data.submit()' 提交数据。但您可能希望对所选文件执行验证，例如，该文件扩展名是正确的。因此您的实现可能如下所示："

```
if(valid)
 data.submit(); 
```

下面是：“另一种选择可能是指示上传插件不要立即开始上传文件，并在用户手动单击某个“上传”按钮时进行验证。”

所以我想你必须剪掉这`data.submit()`条线，然后在你的点击按钮事件处理程序上调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T08:38:35.543

您可以这样做，通过“添加”选项上传文件

**在标记中**

```
<input id="files" type="file" name="files" multiple="multiple"/>
<input id="fileupload" type="file" name="file" multiple="multiple" style="display:none;"/>
<input id="btnSubmit" type="button" value="Start Upload"/> 
```

**输入 JQuery**

```
$('#btnSubmit').click(function () {
    var inputs = $('#files'); 
    var arr = $.makeArray(inputs); // turn the jQuery objects into an array
    var filesList = $.map(arr, function (element, index) { 
        return element.files;
    });

    $('#fileupload').fileupload('add', { files: filesList }); // upload by calling 'add'
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T07:38:06.293

按钮 id="buttonUpload" onclick="return ajaxFileUpload();" style="font-size: 11px">上传/>

img id="loading" src="images/loading.gif" style="display: none;" /> -- 使其成为进度条

在脚本标签包括下面并根据您的要求进行修改

函数 ajaxFileUpload() {

```
 $("#loading")
.ajaxStart(function() {
    $(this).show();
})
.ajaxComplete(function() {
    $(this).hide();
});

$.ajaxFileUpload
    (
        {
            url: 'AjaxImageUploader.ashx',
            secureuri: false,
            fileElementId: 'fileToUpload',
            dataType: 'json',
            data: {},
            success: function(data, status) {

            },
            error: function(data, status, e) {
                alert(e);
            }
        }
    )

        return false;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T08:16:04.200

尝试这个：

```
<input id="fileupload" type="file" name="file" multiple="multiple" onClick="uploadFunction"/>

<script>
uploadFunction()
{
$('#fileupload').fileupload({
  //uploads file
});
}
</script> 
```

# php - 从浏览器获取唯一标识符

> ID：13107303
> 
> 赞同：1
> 
> 时间：2012-10-28T08:09:36.053
> 
> 标签：php, javascript, jquery

我正在提高我网站上的安全性，因为我的一些用户质疑安全性，但我只能说没有人可以查看您的密码（使用 SHA-512 和 md5 进行双重哈希），但他们回复了，但是什么如果他们进入我的帐户，他们可以更改我的密码并使用我的帐户。

因此，我将提高我的安全性，就像 Steam 的安全性一样，如果没有他们向您发送随机密钥，您将无法登录到新计算机。我正在想办法做到这一点，所以我得到了它，所以它会在我的数据库中存储一个小数组，其中包含用户登录的所有计算机。

但是我需要一些数据，以便我的脚本可以检查它，但我不太确定是什么数据，我在考虑 IP 地址，但是如果没有外部来源，例如[我的 ip](http://whatismyipaddress.com/)和其他类似网站是什么，你就无法获得它。我需要一些不会随着同一浏览器/计算机而改变的数据。

所以问题是，我需要一些他/她正在使用的浏览器独有的数据，但如果他/她在不同的计算机或浏览器上，它确实会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:32:46.630

可以在 IP 级别的 Web 应用程序中实现一些安全性。事实上，例如，在我工作的公司中，只能从连接在公司网络中的设备使用“管理员”帐户登录 - 给定的 IP 地址范围。

如果你想为每个用户实现这种技术，你会遇到很多问题，因为你的用户可能在某个代理服务器后面，即在每次登录时或在给定的时间间隔内更改他们的 IP 地址。

它们是不同[类型](http://info.webtoolhub.com/kb-a14-types-of-proxy-servers-transparent-and-anonymous-proxies.aspx)的代理，您可以检测用户何时使用其中一些代理，然后检索用户的真实 IP 地址 - 检查此 HTTP 标头：[HTTP_X_FORWARDED_FOR、HTTP_VIA 和 REMOTE_ADDR EXPLAINED](http://www.xpertdeveloper.com/2011/08/http_x_forwarded_for-http_via-and-remote_addr-explained/)以及更具体的此[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)一。

无论如何，它们是很多隐藏 IP 地址的技术，例如代理服务器和[HideMyAss](http://www.hidemyass.com/)等应用程序，这使整个事情变得非常简单。

无论如何，即使您的用户向您发送一组特定的电子邮件地址，您将存储在您的数据库中并检查用户是否使用它们连接到您的应用程序，同样的滥用可能性，使用您的帐户（作为密码）面临再次。IP 地址将只是数据库表中的另一个字段。因此，如果任何人都可以更改密码，他也许可以将另一个新 IP 添加到您正在检查的 IP 列表中。

我认为最好的办法是只为您的管理员帐户实施这种 IP 安全性。然后，您和您的客户就会平静下来，没有人可以加入它并更改他们的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:37:55.887

不知道你有没有很多用户，我在实际应用中从来没有这样做过，但是很久以前玩过bouncycastle。有一个类似的问题，第 3 方提供商通过 IP 过滤向外部公司提供服务，但迪拜办事处被拒绝，因为一些代理进入那里，不提供转发并且具有广泛的 IP 范围。

这是我正在考虑但从未应用的选项：

为每个/所有/组的客户端制作一个自签名密钥以导入并在您的服务器存储中导入该公共部分，然后不允许任何人在那里，除非他们有一个在您的服务器密钥库中导入的密钥。

也许如果您为使用代理的公司提供服务，您可以让代理提供密钥。

# c - 获取连接在不同网络中的远程客户端的主机名和 IP 地址

> ID：13107305
> 
> 赞同：0
> 
> 时间：2012-10-28T08:10:13.670
> 
> 标签：c, ip-address

如何检索请求连接到我的服务器的对等客户端的 IP 地址和主机名。客户端和服务器都连接在不同的网络中

我尝试了 getpeername() ..但是当客户端和服务器都连接在同一网络中时，它会提供正确的 IP 地址。

```
Socket* SocketServer::Accept() 
{

    struct sockaddr_in cli_addr;
    struct hostent *hp;
   int clilen = 0;    
    clilen = sizeof (cli_addr);

    SOCKET new_sock = accept(s_, (struct sockaddr *) &cli_addr, &clilen);
    if (new_sock == INVALID_SOCKET) 
    {
        SetLastError( WSAGetLastError() );
       // std::cout<<"Socket invalid due to :"<<WSAGetLastError()<<endl;
        WSACleanup();
    }
    Socket* r = new Socket(new_sock);
    //std::cout<<" Accepted Connection"<<endl;

  int ret = getpeername(new_sock, (struct sockaddr *)&cli_addr, &clilen);

   struct sockaddr_in *s = (struct sockaddr_in *)&cli_addr;
   std::string ip = inet_ntoa(cli_addr.sin_addr);

  //cout << " The IP address from the accept is " << ip << std::endl;

  hp = gethostbyaddr((char *)&cli_addr.sin_addr,sizeof(cli_addr.sin_addr),AF_INET);
  std::string cliname;
  if (hp!=NULL)
   cliname  = hp->h_name;
   r->setDNS(cliname);
   r->setIP(ip);
    return r;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:16:37.027

如果我正确阅读了您的问题，则客户端位于重写源 IP 地址的 NAT 框后面，而您想要原始 IP 地址。如果是这种情况，除了要求客户端将其发送给您之外，您无法找到“真实”IP 地址。

# arduino - 我什么时候应该在 Arduino 中使用 client.available()？

> ID：13107310
> 
> 赞同：1
> 
> 时间：2012-10-28T08:11:10.103
> 
> 标签：arduino

我买了一个以太网盾，我写了一个代码，但我看到有 .available() 方法。我不知道在哪里使用它。所以伙计们，你知道我应该在哪里和什么时候使用它吗？这是我的示例代码：

```
#include <Ethernet.h>
#include <SPI.h>

byte mac[] = {0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED};
IPAddress ip(192, 168, 1, 107);

EthernetServer server = EthernetServer(80);

void setup() {
  Serial.begin(9600);
  Ethernet.begin(mac, ip);
  server.begin();
}

void loop() {
  EthernetClient client = server.available();

  if(client) {
      if(client.available()) {
          char c = client.read();
          Serial.print(c);
      }
  }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:45:14.897

`Client.available()`返回客户端（远程客户端）可能已写入的字节数。如果您正在编写 HTTP 服务器，则第一个客户端数据将是：`GET /URL HTTP/1.0`.

然后，您使用`Client.write()`. 例如：

```
c.write("HTTP/1.0 200 OK") 
```

# javascript - “for”循环的奇怪语法

> ID：13107311
> 
> 赞同：0
> 
> 时间：2012-10-28T08:11:28.177
> 
> 标签：javascript, for-loop

今天我遇到了以下JS：

```
 for (var b = k, d = function (c) {
       // function body
    }, a = b.p, e = z; 0 < c;) {

    } // for loop closing cause 
```

有人可以解释一下这里发生了什么吗？我对该功能感到困惑，正常的“for”循环会这样做：

```
 for(x=0; x<something; x++){

    } 
```

此循环似乎遵循不同的结构：

```
 for(x=0; d = function(c), a = somevar, e = somevar, 0 < c) 
```

为什么for循环中有5个元素？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:14:49.177

for ( **var b = k, d = function (c) {}, a = bp, e = z;** `0 < c;` ) {

```
} // for loop closing cause 
```

对于（**x=0**；；`x<something`x++）

如果您将第一个 for 循环与签名 for 循环映射...

**粗体代码**是用于在 for 循环中使用的不同变量的声明部分.. .. 可以在此处声明任意数量的变量...

第二个是检查条件...

第三部分是空的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:15:14.620

没有五个部分，只有三个：

*   第一个包含四个变量声明（、`b`和`d`）。`a``e`
*   第二个包含比较 ( `0 < c`)。
*   第三个是空的。

每个部分用分号 ( `;`) 分隔，变量声明用逗号分隔`,`。

第一部分允许包含表达式或变量声明列表。有关更多信息，请查看[规范](http://es5.github.com/#x12.6.3)或[MDN JavaScript 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)：

> **`initialization`**
> 表达式（包括赋值表达式）或变量声明。通常用于初始化计数器变量。此表达式可以选择使用`var`关键字声明新变量。这些变量不是循环的局部变量，即它们与 for 循环所在的范围相同。该表达式的结果被丢弃。

* * *

只是因为`for(x=0; x<something; x++)`是最典型的形式，并不代表其他的不存在。每个部分都可以包含任意表达式。例如，迭代 DOM 元素的所有子元素的有用方法如下：

```
for(var node = element.firstChild; node; node = node.nextSibling) {

} 
```

首先，`node`用元素的第一个子元素初始化。第二部分只是测试是否`node`不是`null`（您也可以`node !== null`显式编写），第三部分（在迭代后执行）将下一个孩子分配给`node`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:14:01.390

循环中的控制变量也可以是您在示例中的有效表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:15:20.413

您发布的第一个循环与上一个略有不同。第一个声明并分配几个变量（其中一个是函数），然后提供一个条件`(0<c)`，然后每次迭代都不做任何事情。最后一个似乎无效。

第一个问题似乎只是它没有初始化 a `c`，所以除非 c 是循环范围之外的变量，并且在其主体内以某种方式被更改，否则循环将根本不运行（如果`c>=0`) 否则它将永远运行（如果`c`确实小于 0）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T08:18:46.690

生病解释，但基本上这不是好的代码。

它的代码不好，因为您需要上网才能弄清楚。

for (var b = k, d = function (c) { // 函数体 }, a = bp, e = z; 0 < c;) {

```
} // for loop closing cause 
```

相当于

```
var b = k,
    d = function (c) {
      // function body
    },
    a = b.p,
    e = z;

for (; 0 < c; ){

} 
```

for循环父母有三个部分1.初始化2.条件3.结束语句

这都必须用 ; 分隔。

除了这些在 for 循环中都是可选的

```
for (var init = 0; init < 10; init += 1) {} 
```

如同：

```
var init = 0;
for (;;) {
 if (!(init < 10)) {
  break;
 }
 init += 10;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T08:46:43.620

```
 for (var b = k, d = function (c) {
       // function body
    }, a = b.p, e = z; 0 < c;) {

    } // for loop closing cause 
```

只要 d 不为 0，for 循环就会运行。当 0 < c 时 d 为 0

# c++ - 转换为使用 typedef 创建的结构类型

> ID：13107313
> 
> 赞同：0
> 
> 时间：2012-10-28T08:11:29.650
> 
> 标签：c++, casting

我的 C++ 代码中的结构存在强制转换问题。我使用 C 风格的铸造。但是，如果我尝试使用替代名称（使用创建`typedef`）进行转换，则会出现错误。请看我的代码。

```
class T
{
public:
    typedef struct kIdS* kIdN;
    typedef struct kIdS {
        int* a;
        double* b;
    }  kIdR;

    typedef struct tIdS {
        int* a;
        double* b;
        float* c;
    }  tIdR;

    int a;
    double b;
    float c;

    void F()
    {
        a = 0; 
        b = 0; 
        c = 0;
        struct kIdS A = {&a, &b};
        struct tIdS B = {&a, &b, &c};
        struct kIdS* knv[] = {&A, (struct kIdS*)&B};
        struct kIdS* knv1[] = {&A, (kIdN)&B}; //error
    }
}; 
```

错误是：

```
error C2440: 'initializing' : cannot convert from 'T::kIdN' to 'T::kIdS *'
    Types pointed to are unrelated; conversion requires reinterpret_cast, 
    C-style cast or function-style cast 
```

为什么我不能使用替代名称？我如何使用创建的替代名称来解决这个问题`typedef`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:18:56.163

为什么不使用继承？

```
struct tIdS : public kIdS { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:20:50.643

我会摆脱过多的typedef。

```
struct kIdS {
    int* a;
    double* b;
};

typedef kIdS* kIdN;
typedef kIdS kIdR;

.....

kIdS* knv[] = {&A, (kIdS*)&B};
kIdS* knv1[] = {&A, (kIdN)&B}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T08:28:55.540

您的错误的原因首先是`typedef struct kIdS* kIdN`您的类中没有名为 的结构`kIdS`，因此 C++ 编译器认为您正在谈论一个全局`struct kIdS`，然后`typedef`全局结构`kIdN`和行内`struct kIdS* knv1[] = {&A, (kIdN)&B};`错误是显而易见的，`struct kIdS*`不能使用全局代替`T::kIdS*`, 但我有一个问题要问你，为什么你使用`struct X`而你可以简单地说`X`??

# php - 抛出 RestException 时如何返回数据对象？

> ID：13107318
> 
> 赞同：0
> 
> 时间：2012-10-28T08:12:38.023
> 
> 标签：php, restler

```
function put($id, $name)
{
   try
   {
       product::put($id, $name);
   }
   catch(\util\BadNameException $e)
   {
       throw new RestException(400, "Please supply a better name.");
   }
} 
```

返回错误消息时，我还想在`(array)product::getNamingConvention()`错误中包含结果。我怎样才能做到这一点？

我可以只返回一个包含错误消息和数据的自定义数组，但我不知道在这种情况下如何将状态码设置为 400？

我正在使用 Restler 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:26:40.617

Responder 类负责给错误响应和成功响应一个结构

您可以如下所示扩展 Responder 类以添加数据属性

```
use \Luracast\Restler\Responder;
use \Luracast\Restler\Defaults;

class MyResponder extends Responder
{
    public static $data = null;

    public function formatError($statusCode, $message)
    {
        $r = array(
            'error' => array(
                'code' => $statusCode,
                'message' => $message
            )
        );
        if (isset(self::$data)) {
            $r['data'] = self::$data;
        }
        return $r;
    }
}

Defaults::$responderClass = 'MyResponder'; 
```

然后从你的类中设置数据，如下所示

```
function put($id, $name)
{
   try
   {
       product::put($id, $name);
   }
   catch(\util\BadNameException $e)
   {
       MyResponder::$data = product::getNamingConvention();
       throw new RestException(400, "Please supply a better name.");
   }
} 
```

# php - 使用简单的 HTML DOM 进行抓取？

> ID：13107319
> 
> 赞同：1
> 
> 时间：2012-10-28T08:12:54.033
> 
> 标签：php, dom, loops, simple-html-dom, scrape

简单的 HTML DOM 基本上是您添加到页面的 php，它可以让您进行简单的网络抓取。这在大多数情况下都很好，但我无法弄清楚手册，因为我不是一个编码员。是否有任何网站/指南可以为此提供更简单的帮助？（php.net 上的那个对我来说有点太复杂了）有没有更好的地方来问这种问题？

它的网站位于：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

我可以抓取具有特定类的东西，例如`<tr class="group">`，但不能抓取介于两者之间的东西。例如..这是我目前使用的...

```
$url = 'http://www.test.com';
$html = file_get_html($url);
foreach($html->find('tr[class=group]') as $result)
  {
    $first = $result->find('td[class=category1]',0);
    $second = $result->find('td[class=category2]',0);
    echo $first.$second;
  }
} 
```

但这是我试图抓取的那种代码。

```
<table>
  <tr class="Group">
    <td>
      <dl class="Summary">
        <dt>Heading 1</dt>
          <dd><a href="#123" class="ViewProfile">Cat</a></dd>
          <dd><a href="#032" class="ViewProfile">Bacon</a></dd>
        <dt>Heading 2</dt>
          <dd><a href="#143" class="ViewProfile">Narwhal</a></dd>
          <dd><a href="#642" class="ViewProfile">Ice Soap</a></dd>
      </dl>
    </td>
  </tr>
</table> 
```

我正在尝试提取每个内容`<dt>`并将其放入变量中。然后我试图提取每个的内容`<dd>`并将其放入一个变量中，但我没有尝试过任何工作。这是我能找到的最好的，但它只给了我第一个标题而不是第二个标题。

```
foreach($html->find('tr[class=Summary]') as $result2)
  {
    echo $result2->find('dt',0)->innertext;
  } 
```

感谢任何能提供帮助的人。抱歉，如果不清楚或太长了。理想情况下，我希望能够更多地理解这些 DOM 命令，因为我想自己解决这个问题，而不是这里的某个人只是这样做（但我也很感激）。

**TL;DR：**我试图了解如何使用手册中列出的命令（上面的 url）。“手册”还不够简单。你如何去学习这些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:18:07.713

我认为`$result2->find('dt',0)`给你回元素`0`，这是第一个。如果你忽略它，你应该能够得到一个数组~~（或节点列表）~~。像这样的东西：

```
foreach($html->find('tr[class=Summary]') as $result2)
{
    foreach ($result2->find('dt') as $node)
    {
       echo $node->innertext;
    }
} 
```

您并不严格需要外部 for 循环，因为您的文档中只有 1 个 tr 。您甚至可以完全离开它来查找`dt`文档中的每个，但是对于像这样的工具，我认为既灵活又严格是一件好事，因此您准备好处理多行，但不要意外地`dt`从任何地方解析 s文件。

# iphone - CAGradientLayer 的问题

> ID：13107320
> 
> 赞同：0
> 
> 时间：2012-10-28T08:13:06.663
> 
> 标签：iphone, ios

我使用代码

```
NSArray *buttons = [NSArray arrayWithObjects: self.rollBtn,nil];        
for(UIButton *btn in buttons)
{       
    btn.layer.shadowRadius = 3.0;
    btn.layer.shadowOffset = CGSizeMake(-2.0, -3.0);
    btn.layer.shadowOpacity = 0.5;
    btn.layer.shadowColor = [UIColor blackColor].CGColor;
    CAGradientLayer *btnGradient = [CAGradientLayer layer];
    btnGradient.frame = btn.bounds;
    btnGradient.colors = [NSArray arrayWithObjects:
                          (id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor],
                          (id)[[UIColor colorWithRed:51.0f / 255.0f green:51.0f / 255.0f blue:51.0f / 255.0f alpha:1.0f] CGColor],
                          nil];

    [btn.layer insertSublayer:btnGradient atIndex:0];            
} 
```

但我得到的只是一个带有阴影的按钮。我已经链接了石英核心库，我已经导入了它，我已经链接了按钮，我尝试使用不同类型的按钮；我被难住了。任何想法出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:34:15.683

我遇到了同样的问题。看来您[和我一样](https://stackoverflow.com/questions/13368197/cant-do-custom-uibutton-in-ios6-with-enabled-storyboard-autolayout)正在为 iOS6 构建。我发现 iOS6 中引入的故事板自动布局会导致此类问题。如果您不使用此功能，只需禁用它：

1.  在 Xcode 中打开故事板
2.  故事板的打开属性（带有属性的右窗格）
3.  在“Interface Builder Document”部分取消选中“Use Autolayout”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:17:41.473

我认为您可以尝试删除`CAGradientLayer`按钮中以前存在的任何内容：

```
for(CALayer* layer in btn.layer.sublayers)
    if ([layer isKindOfClass:[CAGradientLayer class]])
        [layer removeFromSuperlayer]; 
```

然后添加你自己的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:13:32.787

您是否尝试为渐变设置位置和起点/终点？

```
btnGradient.locations  = @[@(0.), @(1.)];
btnGradient.startPoint = (CGPoint){0., 0.};
btnGradient.endPoint   = (CGPoint){0., 1.}; 
```

# java - android-想要把 Button 放在 listview 上面

> ID：13107324
> 
> 赞同：4
> 
> 时间：2012-10-28T08:13:37.823
> 
> 标签：java, android, android-layout

我在一个按钮和一个列表视图中使用线性布局..列表视图在运行时动态添加其项目..所以当时按钮位于列表视图后面并且不可见并且列表视图完全适合布局。

**我想将 Button 放在 List 视图上方，并且在加载 list-view 后它也必须保留**

提前致谢

我的 .xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical"
    android:background="#000000">

    <Button
        android:id="@+id/btn_searchNewDevices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dip"
        android:layout_gravity="left"
        android:background="#000000"
        android:textColor="#FFFFFF"
        android:text="Search New Devices"
      />   

     <ListView
        android:id="@+id/lst_add_newDevices"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scrollbars="horizontal" >

    </ListView>
</LinearLayout> 
```

![在此处输入图像描述](../Images/08580ebcd21469c1dc2cc611ef227358.png)

这里是搜索新设备按钮。

单击该按钮设备搜索蓝牙并添加到列表视图中 ![在此处输入图像描述](../Images/14995de0167f1459582b5cbcbc3fb66f.png)

所以这就是我的应用程序中发生的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:54:24.480

我认为即使这样也行。试一试

编辑...

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relative"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btn_searchNewDevices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_marginTop="5dip"

        android:text="Search New Devices"
        android:textColor="#000000" />

    <ListView
        android:id="@+id/lst_add_newDevices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btn_searchNewDevices" 
        android:scrollbars="horizontal">
    </ListView>

</RelativeLayout> 
```

活动如下。

```
public class MainActivity extends Activity implements OnClickListener {
    ArrayAdapter<String> adapter;
    private Button mBTNSearch;
    private static ListView mLV_list;
    ArrayList<String> devicesList;
    SparseBooleanArray checked;
    RelativeLayout layout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mBTNSearch = (Button) findViewById(R.id.btn_searchNewDevices);
        devicesList = new ArrayList<String>();

        mLV_list = (ListView) findViewById(R.id.lst_add_newDevices);
        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, devicesList);
        mBTNSearch.setOnClickListener(this);
      mLV_list.setAdapter(adapter);
    }

    public void onClick(View v) {

        adapter.add("new Device");
        adapter.notifyDataSetChanged();
    }

} 
```

输出捕获如下

![在此处输入图像描述](../Images/11103a4aaa0bd084d1d9be7a67f0d62f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:38:07.473

为您的布局尝试此代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
       >
    </ListView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T04:27:51.890

尝试将您的列表视图放在滚动视图中。

```
<Button
    android:id="@+id/btn_searchNewDevices"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginTop="5dip"
    android:background="#000000"
    android:text="Search New Devices"
    android:textColor="#FFFFFF" />

<ScrollView
    android:id="@+id/scroll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="7dip"
    android:scrollbars="none" >

    <ListView
        android:id="@+id/lst_add_newDevices"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scrollbars="horizontal" >
    </ListView>
</ScrollView> 
```

它可能会起作用。我没有测试，所以不确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:30:25.973

尝试`android:layout_weight="1"`在列表视图的高度中使用，以确保您的按钮将始终显示在屏幕上。

你应该试试：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical" >
    <Button
        android:id="@+id/btn_searchNewDevices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_marginTop="5dip"
        android:background="#000000"
        android:text="Search New Devices"
        android:textColor="#FFFFFF" />
    <ListView
        android:id="@+id/lst_add_newDevices"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:scrollbars="horizontal" >
    </ListView>
</LinearLayout> 
```

或者您可以使用 ListView 的[addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)方法。这是一个[教程](http://www.samcoles.co.uk/mobile/android-listactivity-with-a-header-or-footer/)。

# java - 为什么我不能在我的文本区域中显示我的二维数组的值

> ID：13107325
> 
> 赞同：0
> 
> 时间：2012-10-28T08:13:50.737
> 
> 标签：java

我有一个由列和行组成的二维数组，计算时它会构建一个矩阵或矩阵中的值，但问题是我的文本区域仅在我的二维数组中显示我的最终结果，而不是在我的所有其他数组中显示netbeans 中的控制台它确实显示所有值我如何更改我的代码以启用此功能。以下是我认为问题所在的部分。谢谢

这是在我的 actionperform 按钮中显示

```
 for (int i =0; i < rows; i++) {
       for (int j = 0; j < cols; j++) {
         matrix_tf.setText(String.valueOf(matrix[i][j])); 
```

这是计算我的矩阵的代码

```
 private void build_matrix() {
    String seq1 = sequence1_tf.getText();
    String seq2 = sequence2_tf.getText();

    int r, c, ins, sub, del;

    rows = seq1.length();
    cols = seq2.length();

    matrix = new int [rows][cols];

    // initiate first row
    for (c = 0; c < cols; c++)
        matrix[0][c] = 0;

    // keep track of the maximum score
    max_row = max_col = max_score = 0;

    // calculates the similarity matrix (row-wise)
    for (r = 1; r < rows; r++)
    {
        // initiate first column
        matrix[r][0] = 0;

        for (c = 1; c < cols; c++)
        {
                        sub = matrix[r-1][c-1] + scoreSubstitution(seq1.charAt(r),seq2.charAt(c));
                        ins = matrix[r][c-1] + scoreInsertion(seq2.charAt(c));
                        del = matrix[r-1][c] + scoreDeletion(seq1.charAt(r));

            // choose the greatest
            matrix[r][c] = max (ins, sub, del, 0);

            if (matrix[r][c] > max_score)
            {
                // keep track of the maximum score
                max_score = matrix[r][c];
                max_row = r; max_col = c;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:29:04.400

在这个循环中：

```
 for (int i =0; i < rows; i++) {
   for (int j = 0; j < cols; j++) {
     matrix_tf.setText(String.valueOf(matrix[i][j])); 
```

您在每次迭代时**设置**字段的文本（设置文本会覆盖先前的文本）。尝试连接你的文本：

```
 for (int i =0; i < rows; i++) {
   for (int j = 0; j < cols; j++) {
     matrix_tf.setText(matrix_tf.getText() + " " + String.valueOf(matrix[i][j])); 
```

如果您使用的是文本区域（而不是文本字段），请按照@Sujay 的建议使用 append

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:32:57.000

正如其名称[及其 javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)所示，`setText()`将文本区域的文本设置为给定的 String 参数。它不附加文本。

使用 StringBuilder 将各种矩阵元素连接成一个字符串，并将文本区域的文本设置为完整的结果：

```
StringBuilder sb = new StringBuilder();
for (int i =0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
        sb.append(String.valueOf(matrix[i][j]));
        sb.append(' ');
    }
    sb.append('\n');
}
textArea.setText(sb.toString()); 
```

# php - PHP函数检查关联数组中有多少个整数

> ID：13107327
> 
> 赞同：0
> 
> 时间：2012-10-28T08:14:05.493
> 
> 标签：php, arrays, function, associative

我需要帮助来解决我大学考试中的问题。它是这样的：''PHP 中的函数检查关联数组中有多少整数，数据不是通过参数传输，而是作为全局变量传输''。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:47:57.377

这是一个非常狡猾的问题。首先，PHP 不是强类型的，因此“这是一个整数”的概念并不明显。例如，以下数组中有多少个整数？

```
$array = array(5, "6", "7abc", 8.0, "9.0xyz", false); 
```

如果我们严格地看类型，就会发现只有一个整数。如果我们松散地比较（即允许隐式类型强制），则有六个。您可以使用任意函数来确定在给定情况下某事物是否类似于整数。我觉得问题中没有足够的信息来给出一个答案，但我想你的讲座中给出了更多的背景信息。

这个问题还有另一个问题。“关联数组中有多少个整数”没有明确定义“in”，或者更确切地说，没有定义数组的真实结构。考虑以下。

```
class Foo {
    public $x;
    public $y;
    private $xy;
    public __construct($x, $y) { $this->x = $x; $this->y = $y; $this->xy = $x * $y; }
}

$array = array(
    10,
    new Foo(3, 4), 
    array(
        array(
            12,
        ),
        17,
        3
    )
); 
```

你只考虑顶层还是递归下降？如果递归下降，是否还必须扫描对象内部？这些对象中的私有整数是否也在数组中？此外，递归下降的算法是否必须检测和避免循环？对于真正的需求，存在相当多的不确定性。

所以，要回答这个问题，你必须做出几个假设。我假设他们打算让您使用“is_int”函数或等效函数检查整数以确定变量的类型。其次，我假设他们打算让您只关注关联数组的顶层。我想这个练习是为了证明你对“foreach”的熟悉，如何访问全局变量，以及变量仍然有类型的现实，即使 PHP 允许你忽略它们。

“数据不通过参数传输，而是作为全局变量”听起来有点令人困惑，但这只是意味着您的函数将不接受任何参数。相反，它计算全局数组中的整数。在本例中，我将调用全局数组“$globalArray”。

```
$globalArray = array("k1" => "foo", "k2" => 5, "k3" => "bar", "k4" => 10);

function num_ints_in_array() {
    global $globalArray;
    $num_ints = 0;
    foreach ($globalArray as $v) {
        if (is_int($v)) ++$num_ints;
    }
    return $num_ints;
} 
```

只是为了好玩而额外编辑：当然有很多方法。这个特殊的功能解决方案让我很喜欢。

```
function num_ints_in_array() {
    global $globalArray;
    return count(array_filter($globalArray, 'is_int'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:24:42.667

**尝试以下操作：**

```
<?php

$a[0] = 1;
$a[1] = 'aam';
$a[2] = 5;
$a[3] = 'c';
$result = count($a);
$totalints = 0;

for ($i = 0; $i < $result; $i++)
{
    if (is_int($a[$i]))
    {
        $totalints++;
    } 
}

echo "Total number of integers: " . $totalints;

?> 
```

# c++ - 如何处理 JSON 字符串中的 unicode 值？

> ID：13107329
> 
> 赞同：10
> 
> 时间：2012-10-28T08:14:41.923
> 
> 标签：c++, json, parsing, unicode

我正在用 C++ 编写 JSON 解析器，在解析 JSON 字符串时遇到问题：

JSON 规范规定 JSON 字符串可以包含以下形式的 unicode 字符：

```
"here comes a unicode character: \u05d9 !" 
```

我的 JSON 解析器尝试将 JSON 字符串映射到`std::string`通常情况下，JSON 字符串的一个字符变成`std::string`. 但是对于那些 unicode 字符，我真的不知道该怎么做：

我应该像这样将原始字节值放在我的`std::string`位置：

```
std::string mystr;
mystr.push_back('\0x05');
mystr.push_back('\0xd9'); 
```

或者我应该用一个库来解释这两个字符，`iconv`并将 UTF-8 编码的结果存储在我的字符串中？

我应该使用 a`std::wstring`来存储所有字符吗？那么在 *NIX 操作系统上`wchar_t`4 字节长的地方是什么？

我觉得我的解决方案有问题，但我不明白是什么。在那种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-28T10:00:57.267

经过一番挖掘并感谢[H2CO3 的评论](https://stackoverflow.com/questions/13107329/how-to-handle-unicode-values-in-json-strings#comment17817077_13107329)和[Philipp 的评论](https://stackoverflow.com/questions/13107329/how-to-handle-unicode-values-in-json-strings/13107892#comment17817850_13107329)，我终于明白了这应该是如何工作的：

阅读[RFC4627](http://www.ietf.org/rfc/rfc4627.txt?number=4627)部分`3\. Encoding`：

> 3.  编码
>     
>     
>     
>     JSON 文本应以 Unicode 编码。默认编码为
>     UTF-8。
>     
>     
>     
>     由于 JSON 文本的前两个字符始终是 ASCII 字符 [RFC0020]，因此可以确定八位字节
>     流是 UTF-8、UTF-16（BE 或 LE）还是 UTF-32（BE 或 LE）通过查看
>     前四个八位字节中的空值模式。
>     
>     
>     
>     ```
>      00 00 00 xx  UTF-32BE
>        00 xx 00 xx  UTF-16BE
>        xx 00 00 00  UTF-32LE
>        xx 00 xx 00  UTF-16LE
>        xx xx xx xx  UTF-8 
>     ```

所以看起来 JSON 八位字节流可以用 UTF-8、UTF-16 或 UTF-32 编码（在它们的 BE 或 LE 变体中，最后两个）。

一旦清楚，`Section 2.5\. Strings`解释如何处理`\uXXXX`JSON 字符串中的这些值：

> 任何字符都可以转义。如果字符在基本
> 多语言平面（U+0000 到 U+FFFF），那么它可以
> 表示为六个字符序列：一个反斜线，后跟
> 小写字母 u，后跟四个十六进制数字，
> 编码字符的代码点。十六进制字母 A 到
> F 可以是大写或小写。因此，例如，一个
> 只包含一个反斜线字符的字符串可以表示为
> “\u005C”。

对不在[*基本多语言平面*](http://en.wikipedia.org/wiki/Plane_(Unicode))中的字符进行更完整的解释。

> 为了转义不在基本多语言平面中的扩展字符，该字符表示为一个十二字符序列，
> 编码 UTF-16 代理对。因此，例如，
> 仅包含 G 谱号字符 (U+1D11E) 的字符串可以表示为
> “\uD834\uDD1E”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T08:43:01.137

如果我是你，我会使用 std::string 仅存储 UTF-8 和 UTF-8。如果传入的 JSON 文本不包含任何 \uXXXX 序列，则 std::string 可以按原样使用，字节到字节，无需任何转换。

当您解析 \uXXXX 时，您可以简单地对其进行解码并将其转换为 UTF-8，有效地将其视为真正的 UTF-8 字符 - 这是大多数 JSON 解析器正在做的事情（当然是 libjson）。

当然，使用这种方法读取带有 \uXXXX 的 JSON 并立即使用您的库将其转储回去可能会丢失 \uXXXX 序列并用它们真正的 UTF-8 表示替换它们，但谁真正在乎呢？最终，最终结果仍然完全相同。

# php - 在 FQL 查询中过滤用户流

> ID：13107335
> 
> 赞同：2
> 
> 时间：2012-10-28T08:15:16.350
> 
> 标签：php, facebook, facebook-fql

我正在尝试像这样查询我自己的流...

```
$fql_query = 
    "SELECT " .
        "post_id, actor_id, target_id, " .
        "message, updated_time, attachment, " .
        "likes, place, description, " .
        "description_tags, privacy " .
    "FROM stream " .
    "WHERE " .
        "filter_key in 
             (SELECT filter_key 
              FROM stream_filter 
              WHERE uid=me() AND type='newsfeed') 
```

不幸的是，尽管这可行，但它返回的结果集很差（从我一直在阅读的内容来看，这对于 FQL 查询并不罕见）。我收到了 14 件商品，而在过去 30 天内，我的提要中轻松限制了 50 件商品。我正在尝试运行多个查询以获取更全面的数据，但这样的查询不会返回任何内容：

```
SELECT post_id, actor_id, target_id, message 
FROM stream 
WHERE filter_key in 
    (SELECT filter_key 
     FROM stream_filter 
     WHERE uid=me() AND 
         type='newsfeed') and 
    created_time < 1301746000 
```

有人知道我如何从查询中获得更全面的数据集吗？我什至不需要所有数据，但目前我会说我得到的数据少于我应该得到的总数据的 20%（假设 api 应该返回我的数据仅限于过去 30 天或 50 个帖子，如文件说应该退回）。

可能值得注意的是，我尝试使用不同的 filter_key where 子句运行查询，但无济于事。我担心我将不得不使用图形 api，这将涉及提取大量数据，而我只对很少感兴趣。

我真正想要的是查询（给定两个用户 ID）一组两个人可以相互看到的新闻提要项目（换句话说，他们共同的朋友发布的帖子）。鉴于我什至无法正确查询自己的新闻提要帖子，这似乎是一个白日梦。

# java - 如何编写一个 Java 程序来计算地球上两点之间的距离？

> ID：13107338
> 
> 赞同：0
> 
> 时间：2012-10-28T08:15:38.113
> 
> 标签：java, math, latitude-longitude, radians, earthdistance

我知道如何开始，我知道如何放入扫描仪和所有东西，但在学校里，我从来没有真正了解经度和纬度公式以及如何将这些点转换为弧度。所以我几乎被困在这个Java问题上。这是我到目前为止所拥有的：

```
import java.util.*;

class DistanceCalculator {

    // Radius of the earth in km; this is the class constant.
    public static final double Radius = 6372.795; 

    /**
     * This program computes the spherical distance between two points on the surface of the Earth.
     */

    public static void main(String[] args) {
        Scanner console = new Scanner(System.in);
        intro();

        System.out.print("Longitude (degrees.minutes) ");
        double Longitude = console.nextDouble();
        System.out.print("Latitude (degrees.minutes) ");
        double Latitude = console.nextDouble(); 
    }

    public static double distFrom(double lat1, double lng1, double lat2, double lng2); 
        double Latitude = Math.toRadians(...);  
    }

    public static void intro() {
        System.out.println("This program computes the spherical distance between two points on the surface of the Earth.");
        System.out.println("\tPlease start by entering the longitude and the latitude of location 1.");
    }
} 
```

在 Java IDE 中，他们说`intro();`没有使用经度和纬度点（下面的），我知道为什么，因为我还没有真正定义它们。我知道我错过了经度和纬度的公式。在我的书中，它要我使用余弦的球面定律，由于我在学校从未学过这个，所以无论我如何从我寻找的网站上学习这个公式，我都不知道如何转移它成Java语言。
另一个问题是，如何将度数和分钟数从经度/纬度点转换为弧度？我必须使用`Math.toRadians`东西吗？哦，是的，而且，我的答案必须以公里为单位。

更新：你们中的一些人正在谈论的数学函数让我非常困惑。在学校（我是一名高中生），甚至在 Math IB SL，我的老师也从未教过我们如何找到经度/纬度。点...然而。所以我很难掌握。由于余弦公式的球面定律在线，我基本上只是将那个公式转换为“java语言”并将其插入我的程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T08:17:26.590

您需要搜索的关键词是[*“Haversine 公式”*](http://en.wikipedia.org/wiki/Haversine_formula)。

一种更容易理解但对于小距离不太准确的方法是回忆两个向量之间的角度`A`，`B`可以使用点积计算：

> A ⋅ B = |A| * |B| * cos(θ)

因此，如果您将极地纬度/经度对转换为 3D 笛卡尔坐标（是的，您需要使用`Math.toRadians()`,`Math.cos()`并`Math.sin()`执行此操作，然后计算点积，然后您将得到`cos(theta)`，因此使用`Math.acos()`来获取`theta`.

然后，您可以简单地计算出距离`D = R * theta`，其中`R`是地球的半径，并`theta`保持为弧度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:08:23.397

我建议阅读更多关于[WGS84](http://en.wikipedia.org/wiki/WGS84)的信息。

[这里有数学解释。](http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T08:39:09.340

您可以查看此链接以了解逻辑。

[http://aravindtrue.wordpress.com/2009/06/30/calculate-distance-using-latitude-and-longitude-php-mysql/](http://aravindtrue.wordpress.com/2009/06/30/calculate-distance-using-latitude-and-longitude-php-mysql/)

PHP 中的函数...我不懂Java。所以有人编辑我的帖子。这是PHP函数：

```
function getDistanceBetweenPointsNew($latitude1, $longitude1,
$latitude2, $longitude2, $unit = 'Mi')
{
    $theta = $longitude1 - $longitude2;
    $distance = (sin(deg2rad($latitude1)) *
    sin(deg2rad($latitude2))) + (cos(deg2rad($latitude1)) *
    cos(deg2rad($latitude2)) * cos(deg2rad($theta)));
    $distance = acos($distance);
    $distance = rad2deg($distance);
    $distance = $distance * 60 * 1.1515;
    switch($unit)
    {
        case 'Mi': break;
        case 'Km' : $distance = $distance *1.609344;
    }
    return (round($distance,2));
} 
```

还可以从 MySQL 数据库中获取价值：

[计算给定2点，纬度和经度的距离](https://stackoverflow.com/questions/8599200/calculate-distance-given-2-points-latitude-and-longitude)

我试图创建一个java函数，我不知道它是否有效。

试试这个。如果有人可以提供帮助，请尝试编辑我的 java 代码。

```
import java.math.BigDecimal;

public static double round(double unrounded, int precision, int roundingMode)
{
    BigDecimal bd = new BigDecimal(unrounded);
    BigDecimal rounded = bd.setScale(precision, roundingMode);
    return rounded.doubleValue();
}

public static double distFrom(double lat1, double lng1, double lat2, double lng2, String unit)
{
    double theta = lng1 - lng2;

    double distance = (
        Math.sin(Math.toRadians(lat1)) * Math.sin(Math.toRadians(lat2))
     )+(
        Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) * Math.cos(Math.toRadians(theta))
     );
    distance = Math.acos(distance);
    distance = Math.toDeg(distance);
    distance = distance * 60 * 1.1515;

    switch(unit)
    {
        /* Mi = miles, Km = Kilometers */
        case "Mi"   : 
            break;
        case "Km"   : 
            distance = distance *1.609344;
            break;
    }
    distance = round(distance, 2, BigDecimal.ROUND_HALF_UP);
    return distance;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-09-27T18:16:41.787

```
 import java.util.*;

       public class SphericalDistance {
public static void main(String[] args){
System.out.println(" This program computes the spherical distance\n between two points, 1 and 2.");
System.out.println(" Please enter the latitude and longitude for \n each point as a pair of integers, degrees \n followed by minutes:");
System.out.print("Latitude 1:");
    Scanner s=new Scanner(System.in);
    double latangledeg = s.nextDouble();
    double latanglemin = s.nextDouble()/60;

    double phideg = latangledeg + latanglemin;
    double phi1 = phideg * Math.PI/180;

    System.out.print("Longitude 1:");

    double lonangledeg = s.nextDouble();
    double lonanglemin = s.nextDouble()/60;

    double lambdadeg = lonangledeg + lonanglemin;
    double lambda1 = lambdadeg * Math.PI/180;

    System.out.println("Latitude 2:");

    double latangledeg2 = s.nextDouble();
    double latanglemin2 = s.nextDouble()/60;

    double phideg2 = latangledeg2 + latanglemin2;
    double phi2 = phideg2 * Math.PI/180;

    System.out.println("Longitude 2:");

    double lonangledeg2 = s.nextDouble();
    double lonanglemin2 = s.nextDouble()/60;

    double lambdadeg2 = lonangledeg2 + lonanglemin2;
    double lambda2 = lambdadeg2 * Math.PI/180;

    double lambdaf = lambda2 - lambda1;
    double angdistance = Math.acos(Math.sin(phi1)*Math.sin(phi2) + Math.cos(phi1)*Math.cos(phi2)*Math.cos(lambdaf));
    System.out.println("Angular Distance = " + angdistance + " radians");
    int distancekm = (int)(angdistance * 6372.795);
    int distancemi = (int) (distancekm * .621371);
    System.out.println("Distance         = " + distancekm + " kilometers");
    System.out.println("Distance         = " + distancemi + " miles");

    s.close();
} 
```

}

# r - 在 r 中，如何根据层中的观察数量从 3 维列联表中删除层？

> ID：13107339
> 
> 赞同：1
> 
> 时间：2012-10-28T01:29:51.923
> 
> 标签：r

我正在从数据框中的 3 个变量构建 3d 列联表。假设我正在通过以下方式构建这些

```
table(x,y,z) 
```

其中 z 是我要分层的变量。我想摆脱`(,,z(i))`该层中观察数为1的任何地方。

我该怎么做？首先，我很难弄清楚如何计算观察结果，我认为我可以使用子集来减少我的列联表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:45:57.760

假设您的数据包含在名为 的数据框对象中`data`，则此代码应通过一次观察删除层中的所有数据。

```
data <- data[-which(data$z %in% which(table(data$z)==1)),] 
```

**编辑**

这似乎现在有效。我不确定这是否能正常工作，但它适用于这种情况。

```
data <- read.csv(file='~/Downloads/juveniles2forMax.csv')

data <- data.frame(
  Urban = data$Urban,
  RecidivismPlacement = data$RecidivismPlacement,
  timeinjj = data$timeinjj
)

removeStrata <- function(data, z) {
    data[-which(data[,z] %in% as.numeric(attr(which(table(data[,z])==1),"names"))),]
}

removeStrata(data=data, z='timeinjj') 
```

# java - 将一个字符串散列为几个（100-200）个无符号整数

> ID：13107345
> 
> 赞同：1
> 
> 时间：2012-10-28T08:16:17.597
> 
> 标签：java

我正在尝试实现[这个网站](http://www.lastfm.de/user/RJ/journal/2007/04/10/rz_libketama_-_a_consistent_hashing_algo_for_memcache_clients)上定义的逻辑。步骤之一是：

> *   将每个服务器字符串散列到几个 (100-200) 无符号整数

但我对此感到困惑。谁能告诉我这意味着什么，以便我可以手动实现逻辑？

```
// This count is always 2 as per my current setup
int availableservers = Client.getAvailableServers().size();  

String key = "MyKey";
int keyid = key.hashCode();
int v = keyid % 1;
String valess = (String) mcc.get(key,v); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:31:00.903

您引用的文章包含指向其 SVN 代码库的链接：

`svn://svn.audioscrobbler.net/misc/ketama/`

在这里，他们似乎包含了一个 Java 实现：

`svn://svn.audioscrobbler.net/misc/ketama/java_ketama/SockIOPool.java`

在代码中，您会发现以下内容：

```
for(long j = 0; j < factor; j++) {
  byte[] d = md5.digest((servers[i]+"-"+j).getBytes());
  for(int h=0;h<4;h++) {
    Long k = 
        ((long)(d[3+h*4]&0xFF) << 24)
      | ((long)(d[2+h*4]&0xFF) << 16)
      | ((long)(d[1+h*4]&0xFF) << 8)
      | ((long)(d[0+h*4]&0xFF));
    buckets.put(k, servers[i]);
    log.debug( "++++ added " + servers[i] + " to server bucket" );
  }             
} 
```

`factor`此代码正在为每个服务器创建一个总哈希值。请注意在散列之前将 的当前值附加`j`到字符串的 for 循环。`server[i]`

将此与 Frank Pavageau 的回答结合起来，您应该很快就会明白发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T08:29:11.607

我猜 ketama 哈希是使用 MD5 计算的。[我在这里](http://blog.chris.de/categories/10-Development)找到了示例实现

```
public static Long md5HashingAlg(String key) {
  MessageDigest md5 = null;
        try {
            MessageDigest md5 = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            throw new IllegalStateException( "md5 algorythm found");            
        }
    }
    md5.reset();
    md5.update(key.getBytes());
    byte[] bKey = md5.digest();
    long res = ((long)(bKey[3]&0xFF) << 24) | ((long)(bKey[2]&0xFF) << 16) | ((long)(bKey[1]&0xFF) << 8) | (long)(bKey[0]&0xFF);
    return res;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T08:38:56.157

邓肯是对的，只需检查源代码即可了解此特定实现的工作原理。

但是，从概念上讲，无论使用哪种散列算法，如果您需要基于相同键的多个散列，您所需要做的就是将键与多个“常量”或至少已知且可重复的值连接起来：

```
String key = "MyKey";
List<Integer> hashes = new ArrayList<>();
for (String s : Arrays.asList("", "extra1", "extra2")) {
    hashes.add((key + s).hashCode());
} 
```

这相当于将散列分布在整数“连续体”周围，以重用文章的术语。所以你也可以这样做，就像你可以实现 hashCode() 一样：

```
String key "MyKey";
List<Integer> hashes = new ArrayList<>();
int hash = key.hashCode();
for (int i = 0; i < 100; i++) {
    hashes.add(hash);
    hash = 31 * hash + 1234567;
} 
```

# javascript - 原型中原始类型的行为

> ID：13107349
> 
> 赞同：1
> 
> 时间：2012-10-28T08:17:25.303
> 
> 标签：javascript, prototype, prototype-chain

每个实例都有一个指向创建它的构造函数原型的链接。所以每个实例都共享原型成员。如果通过一个实例对共享原型成员进行更改，它会反映到所有其他实例。为什么这似乎不适用于原始类型，如下所示：

```
//creating an empty object type
function OBJTYPE(){};

//adding primitive value and reference value as a memeber to 
//the prototype of the object type
OBJTYPE.prototype.value = 0;
OBJTYPE.prototype.arr = ["red","green","blue"];

//creating instances of the object type
var obj1 = new OBJTYPE();
var obj2 = new OBJTYPE();

//outputting the prototype members through both the instances     
document.write(obj1.value + "<br />");  //0
document.write(obj2.value + "<br />");  //0
document.write(obj1.arr + "<br />");    //red,green,blue
document.write(obj2.arr + "<br />"); //red,green,blue

//changing value of primitive member
obj1.value = 1;  //creates a new instance property

//modifying the reference type member - pushing a value on the array
obj1.arr.push("black"); //modifies the prototype property

//outputting the prototype members through both the instances     
document.write(obj1.value + "<br />"); //1 //.value from instance
document.write(obj1.__proto__.value + "<br />"); //0 //.value from prototype
                                                 //works in Firefox, Safari, and Chrome
document.write(obj2.value + "<br />"); //0 //.value from prototype

document.write(obj1.arr + "<br />");   //red,green,blue,black
document.write(obj2.arr + "<br />");   //red,green,blue,black 
```

正如您在上面看到的，更改原始成员的值会创建一个名为`value`on的新实例属性`obj1`，而不是覆盖原型中相同的命名属性。因此，当访问`obj1.value`属性时，它会返回掩盖原型属性的实例属性。这就是为什么两个实例实例显示不同的`value`.

但是，从上面可以看出，这不引用类型的行为并不相似。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:23:56.047

当您写入对象中的属性时，新值存储在对象上，而不是原型上。

您遇到的数组问题是这样的：

1.  获取存储在 obj1 上的数组，并修改数组：obj1.arr.push("black");

2.  在 obj1 的实例上写入一个新值：obj1.arr = [1,2,3];

如果您需要我，我会扩展。

* * *

是的，有很多方法可以做到这一点，具体取决于您的需要。

1 对我来说最明显的是你想要相同的对象，在这种情况下我只会制作一个对象。

```
var obj1 = {
 "arr": [],
 "value": 0
};
// I can garuntee any editing you do on obj1 will be reflected on obj2
var obj2 = obj1; 
```

2 制作原型访问器方法：

```
function OBJTYPE(){};

//adding primitive value and reference value as a memeber to 
//the prototype of the object type
OBJTYPE.prototype.value = 0;
OBJTYPE.prototype.arr = ["red","green","blue"];
OBJTYPE.prototype.proto = function (name, optValue) {
 if (arguments.length === 2) {
  return OBJTYPE.prototype[name] = optValue;
 }

 return OBJTYPE.prototype.proto[name];
};

var obj1 = new OBJTYPE();
var obj2 = new OBJTYPE();

obj1.proto('value', 1);  //on the prototype
// The rest will behave like desired 
```

3 存储指向 proto 的直接链接：

```
function OBJTYPE(){};

//adding primitive value and reference value as a memeber to 
//the prototype of the object type
OBJTYPE.prototype.value = 0;
OBJTYPE.prototype.arr = ["red","green","blue"];
OBJTYPE.prototype.proto = OBJTYPE.prototype;
//creating instances of the object type
var obj1 = new OBJTYPE();
var obj2 = new OBJTYPE();

//changing value of primitive member
obj1.proto.value = 1;  //on the prototype
// The rest will behave like desired 
```

4 最后但同样重要的是，使用 ES5 的方法 getPrototypeOf

```
function OBJTYPE(){};

OBJTYPE.prototype.value = 0;
OBJTYPE.prototype.arr = ["red","green","blue"];
//creating instances of the object type
var obj1 = new OBJTYPE();
var obj2 = new OBJTYPE();

//changing value of primitive member
Object.getPrototypeOf(obj1).value = 1;  //on the prototype
// The rest will behave like desired 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:24:15.727

您正在推送到数组，而不是像使用原始值那样分配新数组。这将按预期工作：

```
obj1.value = 1; 
obj1.arr = []; 
```

请注意，设置值永远不会在原型上设置，而是在对象本身上设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T02:20:34.773

```
obj1.value = 1; 
```

这创建了一个新的属性“值”，`obj1`并且不会改变原型。这就是为什么`obj2.value`返回最初在原型中设置的旧值的原因。

如果您想通过改变原型`obj1`，使其也影响函数的所有其他实例，请通过沿着原型链向下更改属性：

```
obj1.__proto__ === OBJTYPE.prototype;  //true 
obj1.__proto__.value = 1; 
obj1.value;   //1 
obj2.value;   //1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-08T21:49:54.937

我从类似的例子中得出了这个问题：

```
function Person(first, last, age) {
  this.name = {
    first,
    last
  };
  this.age = age;
};
let person1 = new Person('Tammi', 'Smith', 17); 
let person2 = Object.create(person1);

person2.name.first = "Bob" // modifies prototype value on person1 instance
person2.age = 18           // creates new Property on person2 
```

我相信原因是在 Prototype person1 对象上持有“name”属性的对象被运行时作为关联数组 so 访问`person2.name.first = "Bob" is actually person2.name['first'] = "Bob"`。

当我尝试像这样设置“名称”属性时：

```
person2.name = "Bob"; 
```

`first`然后在 person2 实例上创建新的属性，有效地隐藏持有属性的person1“名称”对象`last`。这解释了为什么更改引用实例的内容与设置新的引用实例不同的行为。

# save - 页面保存脚本

> ID：13107351
> 
> 赞同：1
> 
> 时间：2012-10-28T08:17:33.477
> 
> 标签：save, webpage, contenteditable

具体来说，我正在寻找一种将网页保存在服务器上的方法（这是一个很难表达的问题，所以谷歌没有给我任何有用的东西）。

我想将此功能添加到页面某处的按钮中，然后从技术上讲，任何有权访问此 ContentEditable 页面的人都可以保存他们的进度。是的，我知道这不安全。

最好/最简单的方法是什么？php？Javascript？

# ruby - 将代码块分成主要部分和预期的返回部分

> ID：13107353
> 
> 赞同：0
> 
> 时间：2012-10-28T08:18:17.817
> 
> 标签：ruby, regex, string

将代码块（字符串）分成“主要部分”和“预期返回部分”的最佳方法是什么？这是我的定义：

*   *预期返回部分*是匹配的行，后跟`/^[ \t]*#[ \t]*=>/`零个或多个不匹配`/^[ \t]*#[ \t]*=>/`但匹配的连续行`/[ \t]*#(?!\{)/`。
*   *主要部分*是不是预期返回部分的任何连续行。

主要部分和预期返回部分可能在一个代码块中出现多次。

给定一串代码块，我想得到一个数组数组，每个数组都包含一个标志，表明它是否是预期的返回部分，以及字符串。做这个的最好方式是什么？例如，给定一个字符串`code`，其内容为：

```
def foo bar
  "hello" if bar
end
#=> foo(true) == "hello"
#=> foo(false) == nil
a = (0..3).to_a
#=> a == [
#          0,
#          1,
#          2,
#          3
#   ] 
```

我想要一个相当于这个的回报：

```
[[false, <<CHUNK1], [true <<CHUNK2], [true, <<CHUNK3], [false, <<CHUNK4], [true, <<CHUNK5]]
def foo bar
  "hello" if bar
end
CHUNK1
#=> foo(true) == "hello"
CHUNK2
#=> foo(false) == nil
CHUNK3
a = (0..3).to_a
CHUNK4
#=> a == [
#          0,
#          1,
#          2,
#          3
#   ]
CHUNK5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:31:09.517

此正则表达式应匹配所有预期回报：

```
^([ \t]*#[ \t]*=>.+(?:\n[ \t]*#(?![ \t]*=>).+)*) 
```

提取并用分隔符替换字符串中的所有预期返回。然后用分隔符分割你的字符串，你将拥有所有主要部分。

在这里测试：[http ://rubular.com/r/ZYjqPQND28](http://rubular.com/r/ZYjqPQND28)

您的与正则表达式有关的定义有一点问题`/[ \t]*#(?!>\{)/`，我假设您的意思是`/[ \t]*#(?!=>)/`，否则

```
#=> foo(true) == "hello"
#=> foo(false) == nil 
```

将算作一大块

另一种方法是使用这个[正则表达式](http://rubular.com/r/SJx55bZL66)（完全未优化）：

```
^([ \t]*#[ \t]*=>.+(?:\n[ \t]*#(?![ \t]*=>).+)*|(?:[ \t]*(?!#[ \t]*=>).+\n)*) 
```

简单地将其正确拆分为块，然后对每个块进行相对简单的正则表达式测试，以查看它是预期回报还是主要部分。

# java - 如何使用 JPA 生命周期事件获取实体数据

> ID：13107363
> 
> 赞同：9
> 
> 时间：2012-10-28T08:19:29.457
> 
> 标签：java, jpa, eclipselink, glassfish-3, entitylisteners

我有一个 RESTful API，它使用带有 @EntityListners 注释的实体类。在 EntityListner.java 中，我有一个用 @PostPersist 注释的方法。因此，当该事件触发时，我想提取有关刚刚保存到数据库中的实体的所有信息。但是当我尝试这样做时，Glassfish 正在生成一个异常，并且 EntityListner 类中的方法没有按预期执行。这是代码

```
public class EntityListner {
private final static String QUEUE_NAME = "customer";
@PostUpdate
@PostPersist
public void notifyOther(Customer entity){
    CustomerFacadeREST custFacade = new CustomerFacadeREST(); 
    Integer customerId = entity.getCustomerId();
    String custData = custFacade.find(customerId).toString();
    String successMessage = "Entity added to server";
    try{
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();

        channel.queueDeclare(QUEUE_NAME, false, false, false, null);
      //  channel.basicPublish("", QUEUE_NAME, null, successMessage .getBytes()); 
        channel.basicPublish("", QUEUE_NAME, null, custData.getBytes());  
        channel.close();
        connection.close();

    }
    catch(IOException ex){

    }
    finally{

    }
  }    
} 
```

如果我发送注释掉的**successMessage**消息而不是**custData**，一切正常。

[http://www.objectdb.com/java/jpa/persistence/event](http://www.objectdb.com/java/jpa/persistence/event)说以下关于实体生命周期方法的内容，我想知道这是否是这里的情况。

> 为避免与触发实体生命周期事件（仍在进行中）的原始数据库操作发生冲突，回调方法不应调用 EntityManager 或 Query 方法，并且不应访问任何其他实体对象

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T20:45:37.093

正如那段所说，该标准不支持从内部实体侦听器调用实体管理器方法。正如 Heiko Rupp 在他的回答中所说，我*强烈*建议从持久实体构建。`custData`如果这不可行，请考虑：

*   异步通知。*我真的不推荐这样*做，因为它可能取决于正常工作的时间：

```
公共类 EntityListener {
    私人最终静态字符串QUEUE_NAME =“客户”；

    私有 ScheduledExecutorService getExecutorService() {
        // 从某处获取异步执行器服务
        // 你很可能需要一个 ScheduledExecutorService
        // 实例，以便安排通知
        // 一些延迟。或者，您可以尝试 Thread.sleep(...)
        // 在通知之前，但这很难看。
    }

    私人无效doNotifyOtherInNewTransaction（客户实体）{
        // 为了让这一切正常工作，
        // 你应该执行你的通知
        // 在一个新事务中。你可能
        // 发现以声明方式执行此操作更容易
        // 通过调用一些划分的方法
        // 使用 REQUIRES_NEW
        尝试 {
            //（开始交易）
            doNotifyOther(实体);
            //（提交事务）
        } 捕捉（异常前）{
            //（回滚事务）
        }
    }

    @PostUpdate
    @PostPersist
    公共无效通知其他（最终客户实体）{
        ScheduledExecutorService 执行者 = getExecutorService();
        // 这是“原始”版本
        // 很可能你需要调用
        // executor.schedule 并指定延迟，
        // 为了给旧事务一些时间
        // 刷新和提交
        executor.execute(new Runnable() {
            @覆盖
            公共无效运行（）{
                doNotifyOtherInNewTransaction(实体);
            }
        });
    }

    // 这与您的原始代码完全相同
    公共无效doNotifyOther（客户实体）{
        CustomerFacadeREST custFacade = new CustomerFacadeREST();
        整数 customerId = entity.getCustomerId();
        字符串 custData = custFacade.find(customerId).toString();
        String successMessage = "实体添加到服务器";
        尝试 {
            ConnectionFactory 工厂 = new ConnectionFactory();
            factory.setHost("localhost");
            连接连接 = factory.newConnection();
            频道 channel = connection.createChannel();
            channel.queueDeclare(QUEUE_NAME, false, false, false, null);
            channel.basicPublish("", QUEUE_NAME, null, custData.getBytes());  
            通道.close();
            连接.close();
        }
        捕捉（IOException ex）{
        }
        最后 {
        }
    }    
}

```

*   **注册一些提交后触发器**（如果 Heilo Rupp 的答案不可行，我的建议是）。这与时间无关，因为它保证在您刷新到数据库后执行。此外，它还有一个额外的好处，即如果您最终回滚交易，您不会通知您。执行此操作的方法取决于您用于事务管理的内容，但基本上您创建某个特定实例的实例，然后在某个注册表中注册它。例如，对于 JTA，它将是：

```
公共类 EntityListener {
    私人最终静态字符串QUEUE_NAME =“客户”；

    私人交易 getTransaction() {
        // 从某处获取当前的 JTA 事务引用
    }

    私人无效doNotifyOtherInNewTransaction（客户实体）{
        // 为了让这一切正常工作，
        // 你应该执行你的通知
        // 在一个新事务中。你可能
        // 发现以声明方式执行此操作更容易
        // 通过调用一些划分的方法
        // 使用 REQUIRES_NEW
        尝试 {
            //（开始交易）
            doNotifyOther(实体);
            //（提交事务）
         } 捕捉（异常前）{
            //（回滚事务）
         }
    }

    @PostUpdate
    @PostPersist
    公共无效通知其他（最终客户实体）{
        交易交易 = getTransaction();
        transaction.registerSynchronization（新同步（）{
            @覆盖
            公共无效 beforeCompletion() { }

            @覆盖
            public void afterCompletion(int status) {
                if (status == Status.STATUS_COMMITTED) {
                    doNotifyOtherInNewTransaction(实体);
                }
            }
        });             
    }

    // 这与您的原始代码完全相同
    公共无效doNotifyOther（客户实体）{
        CustomerFacadeREST custFacade = new CustomerFacadeREST();
        整数 customerId = entity.getCustomerId();
        字符串 custData = custFacade.find(customerId).toString();
        String successMessage = "实体添加到服务器";
        尝试 {
            ConnectionFactory 工厂 = new ConnectionFactory();
            factory.setHost("localhost");
            连接连接 = factory.newConnection();
            频道 channel = connection.createChannel();
            channel.queueDeclare(QUEUE_NAME, false, false, false, null);
            channel.basicPublish("", QUEUE_NAME, null, custData.getBytes());  
            通道.close();
            连接.close();
        }
        捕捉（IOException ex）{
        }
        最后 {
        }
    }    
}

```

如果您使用的是 Spring 事务，则代码将非常相似，只是更改了一些类名。

一些指示：

*   [ScheduledExecutorService Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)，用于触发异步操作。

*   使用 JTA 进行事务同步：[事务 Javadoc](http://docs.oracle.com/javaee/5/api/javax/transaction/Transaction.html)和[同步 Javadoc](http://docs.oracle.com/javaee/5/api/javax/transaction/Synchronization.html)

*   [EJB 事务划分](http://docs.oracle.com/javaee/5/tutorial/doc/bncij.html)

*   Spring 等价物：[TransactionSynchronizationManager Javadoc](http://static.springsource.org/spring/docs/3.1.2.RELEASE/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html)和[TransactionSynchronization Javadoc](http://static.springsource.org/spring/docs/3.1.2.RELEASE/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html)。

*   还有[一些关于 Spring 事务的 Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T08:25:13.590

我猜您可能会看到 NPE，因为您可能违反了您引用的段落：

```
String custData = custFacade.find(customerId).toString(); 
```

`find`似乎隐式查询对象（如您所描述），该对象可能未完全同步到数据库，因此尚无法访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T01:41:15.760

在他的回答中，gpeche 指出将他的选项#2 转换为 Spring 相当简单。为了避免其他人这样做的麻烦：

```
package myapp.entity.listener;

import javax.persistence.PostPersist;
import javax.persistence.PostUpdate;
import org.springframework.transaction.support.TransactionSynchronizationAdapter;
import org.springframework.transaction.support.TransactionSynchronizationManager;
import myapp.util.ApplicationContextProvider;
import myapp.entity.NetScalerServer;
import myapp.service.LoadBalancerService;

public class NetScalerServerListener {

    @PostPersist
    @PostUpdate
    public void postSave(final NetScalerServer server) {
        TransactionSynchronizationManager.registerSynchronization(
            new TransactionSynchronizationAdapter() {

                @Override
                public void afterCommit() { postSaveInNewTransaction(server); }
            });
    }

    private void postSaveInNewTransaction(NetScalerServer server) {
        ApplicationContext appContext =
            ApplicationContextProvider.getApplicationContext();
        LoadBalancer lbService = appContext.getBean(LoadBalancerService.class);
        lbService.updateEndpoints(server);
    }
} 
```

服务方法（此处为`updateEndpoints()`）可以毫无问题地使用 JPA `EntityManager`（在我的情况下，用于发出查询和更新实体）。一定要对`updateEndpoints()`方法进行注释，`@Transaction(propagation = Propagation.REQUIRES_NEW)`以确保有一个新事务来执行持久性操作。

与问题没有直接关系，`ApplicationContextProvider`只是返回应用程序上下文的自定义类，因为 JPA 2.0 实体侦听器不是托管组件，我懒得在`@Configurable`这里使用。这是为了完整性：

```
package myapp.util;

import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

public class ApplicationContextProvider implements ApplicationContextAware {
    private static ApplicationContext applicationContext;

    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    @Override
    public void setApplicationContext(ApplicationContext appContext)
            throws BeansException {

        applicationContext = appContext;
    }
} 
```

# ruby - Ruby：内核#`权限被拒绝运行命令

> ID：13107365
> 
> 赞同：4
> 
> 时间：2012-10-28T08:19:39.560
> 
> 标签：ruby

在尝试了解 Ruby 执行方法时，我发现这篇关于在 Ruby 中运行命令的五种方法的博文 [http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/](http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/)

作者创建了一个err.rb文件，输出两行，一行在STDOUT上，另一行在STDERR上

```
#!/usr/bin/env ruby
puts "out"
STDERR.puts "error" 
```

他尝试运行它的第一种方式是使用 Kernal#`（反引号）

```
 >> `./err.rb`

      err
=> "out\n" 
```

这说明的一点是，当使用反引号运行时

> ```
> STDERR is output, but not captured
> STDOUT is captured 
> ```

当我试图在我的系统上复制它时，我得到了一个权限错误

```
localhost:sites mike$ `./err.rb`
-bash: ./err.rb: Permission denied 
```

我试过 sudo`./err.rb`没有改变。

我可以运行`ruby err.rb`，但这会产生与作者得到的结果不同的结果。即通过运行 ruby​​ err.rb 我得到

```
 out
  error 
```

有人可以解释为什么我在尝试使用反引号运行它时遇到权限错误，以及使用反引号运行它的总体目的是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T08:22:08.733

尝试添加执行权限，使用“chmod +x that_file_name”使用格式“./file”执行“文件”需要有执行权限

它在您使用 ruby​​ 时运行，因为 ruby​​ 具有执行权限并且它只是读取该文件。

试试这个

```
localhost:sites mike$ chmod +x err.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:25:11.310

您需要使文件可执行，您可以从 shell 执行此操作：

```
chmod +x err.rb 
```

然后你可以从一个shell调用它

```
./err.rb 
```

或从 IRB 作为

```
`./err.rb` 
```

您也可以`ruby`对其执行：

```
`ruby err.rb` 
```

对于不同的反引号、系统和 exec 方法，这里也是一个[很好的资源。](http://rubyquicktips.com/post/5862861056/execute-shell-commands)

# database - 如何测试数据库访问代码

> ID：13107366
> 
> 赞同：0
> 
> 时间：2012-10-28T08:20:02.580
> 
> 标签：database, testing

我有一个数据库层。我想测试 db CRUD 结果我希望每个测试都是独立的，所以我只在 setUp() 中创建表，然后在 tearDown() 中删除所有表。那么有什么好方法可以独立测试数据库访问吗？我的意思是我不需要在每次测试中删除所有表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:59:59.653

您可以在测试后回滚的数据库事务中进行数据库测试。

例如，在 java / spring 中，您可以使用 [TestContext 框架](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testing-tx)，该框架将为每个测试创建和回滚事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:11:39.993

有几种方法。

1.  您可以使用“DELETE”语句删除每次测试后的所有数据。据我所知，删除速度很慢），所以它不太可取。

2.  您可以在每次测试后截断表格，使它们为空。

3.  （我最喜欢的一个）在每次测试之前打开一个事务，并在测试完成后*回滚它（甚至成功！）。*这样，您将在 db 中保留测试前的状态。

希望这可以帮助

# windows - 是否可以从另一个进程捕获渲染音频会话？

> ID：13107368
> 
> 赞同：2
> 
> 时间：2012-10-28T08:20:34.450
> 
> 标签：windows, audio, windows-7, audio-recording, wasapi

我正在第一次潜入 Windows 的 WASAPI 系统，我不知道我想要的东西是否可以通过 Windows API 实现。

我正在尝试编写程序，该程序将记录来自各种程序的声音并将每个程序分成单独的录制曲目/音频文件。从我所做的研究中，我知道我需要记录的单元是渲染到端点的各种[音频会话](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370796%28v=vs.85%29.aspx)，而正常的记录方式是采用渲染端点并执行环回。但是，从我目前在 MSDN 中阅读的内容来看，我可以做的唯一与会话的交互是通过[IAudioSessionControl](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368246%28v=vs.85%29.aspx)，这并没有为我提供获取会话流副本的方法。

我是否遗漏了一些允许我使用 WASAPI（或其他一些 Windows API）执行此操作并在它们混合在一起形成端点之前获取单个会话（或单个流）的东西，或者这是一个不可能实现的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:07:47.417

混合发生在 API (WASAPI) 内部，您无权访问其他音频客户端的缓冲区，尤其是。它们首先不存在于当前流程的上下文中。如果所讨论的任务允许像这样的肮脏技巧，也许最好的（不是那么好，但没有更好的选择）方法是挂钩 API 调用并在通往 WASAPI 的途中拦截数据。

# google-api - 如何在 Drive API 中获取 google doc 修订的详细列表

> ID：13107369
> 
> 赞同：13
> 
> 时间：2012-10-28T08:20:40.207
> 
> 标签：google-api, google-drive-api, revision-history, revisions

我正在尝试找到一种方法来使用 Google Drive API 检索 Google 文档修订的详细列表。我尝试在 Java 中实现它，它确实返回了一个包含 10 个修订的列表。但是，这个列表还不够详细。如果我去 Google Drive，打开这个文件并通过“File-see revision history”检查修订，它将返回与我从 Drive API 获得的相同列表（10 个修订）。但是有一个名为“显示更详细的修订”的按钮，如果我单击它，它将返回详细的修订列表。

有谁知道如何通过 Drive API 获取此详细列表？或者有没有其他替代方法来获得这个详细的修订列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T15:23:42.947

您应该同时使用[get](https://developers.google.com/drive/v2/reference/revisions/get)和[list](https://developers.google.com/drive/v2/reference/revisions/list)方法来获取 google drive 文件的详细修订列表；下面的示例应该可以工作（我没有测试过）：

```
 /**
       * Print detail information about revisions of the specified file.
       *
       * @param service Drive API service instance.
       * @param fileId ID of the file to print revisions for.
    */
    private static void detailedRevisions(Drive service, String fileId) {
        try {
           RevisionList revisions = service.revisions().list(fileId).execute();
           List<Revision> revisionList = revisions.getItems();

           for(Revision revision : revisionList) {
               revision = service.revisions().get(
                 fileId, revision.getId()).execute();

               System.out.println("Revision ID: " + revision.getId());
               System.out.println("Modified Date: " + revision.getModifiedDate());
               if (revision.getPinned()) {
                   System.out.println("This revision is pinned");
               }
           }
        } catch (IOException e) {
            System.out.println("An error occured: " + e);
        }
    } 
```

检查此以获取修订类方法的完整列表： [https ://developers.google.com/resources/api-libraries/documentation/drive/v2/java/latest/](https://developers.google.com/resources/api-libraries/documentation/drive/v2/java/latest/)

# android - 如何使用手指而不是键盘在 EditText 框内绘制或书写？

> ID：13107373
> 
> 赞同：-1
> 
> 时间：2012-10-28T08:21:45.113
> 
> 标签：android, android-edittext, gesture, touch-event, ontouchlistener

![在此处输入图像描述](../Images/b3c8616fdf79559f8bcf27965e8f8d3f.png)

在第一种情况下：单击编辑文本框时，应打开一个具有白色背景的屏幕。在那个屏幕上，我想在不使用键盘的情况下绘制或写一些东西。它看起来与 MS 油漆相似，但使用手指应该可以做到这一点！在我完成（书写或绘图）之后，它应该能够将屏幕（具有用户手写或绘图）粘贴到编辑文本框中。

因此，当我看到 Edittext 框时，图像（即屏幕）将与特定用户的笔迹一起出现。如果屏幕（类似于 MS -paint 屏幕）可能看起来更大，那么通过应用程序应该能够最小化或将屏幕转换为更小的屏幕（即最终转换为具有用户自己的手写或绘图的图像），完全适合内部编辑文本框！

我怎样才能做到这一点？我可以通过使用手势或画布来实现这一点吗？

在第二种情况下：我想知道用背景颜色或背景图像显示屏幕的可能性是什么（例如，我可以绘制矩形边距或插入贺卡边框（左、右、顶和底边角裁剪和插入图片）在屏幕内，因此在屏幕中间，空间将可用于允许用户写一些文字，如“生日快乐”或“祝你好运”等等。

![可以参考这张图！](../Images/75c2d2a701b35ed564352a98160040ab.png) ![生日快乐祝福画面](../Images/51d57fbfe2025f47234ab44773a76703.png)

书写或绘图应该用手指完成！我怎样才能做到这一点，以及通过 android 应用程序做到这一点的想法和可能性是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:47:35.050

当前的 EditText 根本不可能做到这一点。

您将必须创建自己的小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:50:17.003

您可能需要一些手写识别库来与您的应用程序集成。尝试找出一些可以在 android 上使用的现有库。

# iframe - 在 JQuery 对话框中预览 IFrame 的代码

> ID：13107378
> 
> 赞同：1
> 
> 时间：2012-10-28T08:22:55.610
> 
> 标签：iframe, text, editor

好的，我正在制作一个基本的文本编辑器。我有一个 iframe，用户将在其中编写他们的 HTML 代码。我正在为一些所见即所得的功能（如粗体、斜体等）使用 JavaScript 执行命令。一切都像 BOSS 一样工作正常。

我想预览他们在 JQuery 对话框中编写的代码或在新窗口中打开的代码。我想知道这是否可能？我们可以使用 textarea 来做到这一点，但我在这里使用的是 IFrame。

**这是我的代码 Iframe：**

```
<iframe name="code" id="code"></iframe> 
```

**这是我的DIV，用于在JQuery UI的对话框中预览编写的代码：**

```
<div id="preview"></div> 
```

**这是我在 JQuery UI 对话框中预览的 JavaScript 代码：**

```
<script>
    $(function() {
        $( "#preview" ).dialog();
    });
    </script> 
```

当然，我只是放了对话框的基本代码，但是如何从IFrame预览到对话框中写好的代码呢？例如，如果用户使用 CSS 或 HTML 在 Iframe 中以粗体书写“Hello”，则预览时对话框中的“Hello”一词应以粗体显示。另外，我可以知道如何通过在新窗口中打开来进行预览吗？

感谢

# javascript - 如果等级低于 75，则将颜色变为红色

> ID：13107379
> 
> 赞同：1
> 
> 时间：2012-10-28T08:23:48.323
> 
> 标签：javascript, jquery

我需要有关 jQuery 的帮助。我怎样才能将 74 的字体颜色变为红色。我的意思是一旦等级低于 75，字体颜色将变为红色，如果通过，则变为绿色。

```
$("document").ready( function(){

 //alert("working");

var passing_grade = parseInt("75");
var grade = parseInt($(".grade").val());

    if( grade < passing_grade ){
        $(".grade").css("color","#ff000");
    } else {
        $(".grade").css("color","#066d06");
}

} ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:29:49.517

`val`方法用于获取/设置表单元素的值，如果`.grade`元素不是表单元素，则应使用`text`or`html`方法，还要注意何时`parseInt`使用，应指定`radix`.

```
$(document).ready( function(){
    $(".grade").css("color", function() {
        return parseInt(this.value, 10) > 75 ? "#ff0000" : "#066d06"
    })
}); 
```

* * *

对于`li`元素，您应该使用`text`方法而不是`val`：

```
return parseInt($(this).text(), 10) > 75 ? "#ff0000" : "#066d06" 
```

[http://jsfiddle.net/wsBBH/](http://jsfiddle.net/wsBBH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:33:34.070

问题是红色的颜色代码不正确。对于红色，它是`#ff0000`（这是一个错字，您错过了添加另一个零。）

试试这个代码，

```
var passing_grade = parseInt("75");
var grade = parseInt($(".grade").val());

    if( grade < passing_grade ){    
        $(".grade").css("color",'#ff0000');  // <<< Change the color code HERE
    } else {
        $(".grade").css("color","#066d06");
    } 
```

**演示：http:** [//jsfiddle.net/muthkum/xC89P/3/](http://jsfiddle.net/muthkum/xC89P/3/)

**更新：**

试试这段代码，你需要循环每个`.grade`元素并应用 CSS

```
 var passing_grade = parseInt("75");

    $(".grade").each(function(){
       var grade = parseInt($(this).text());

        if( grade < passing_grade ){    
            $(this).css("color",'#ff0000');
        } else {
            $(this).css("color","#066d06");
        }
    }) 
```

**演示：http:** [//jsfiddle.net/muthkum/xC89P/5/](http://jsfiddle.net/muthkum/xC89P/5/)

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:30:03.290

假设（因为您使用`.val`）这`.grade`是一个文本输入字段，那么要让该字段在每次值更改时更改颜色，请使用以下命令：

```
var pass = 75;

$('.grade').on('change', function() {
    var grade = parseInt(this.value, 10);
    $(this).css('color', grade < pass ? '#ff0000' : '#066d06');
}); 
```

# delphi - Delphi - 在连接到 Oracle 并调用 Web 服务方法后关闭时 ntdll.dll 中的异常

> ID：13107382
> 
> 赞同：3
> 
> 时间：2012-10-28T08:24:14.447
> 
> 标签：delphi, debugging, delphi-2009, oracle-call-interface, ntdll

在 Delphi 2009 中，我发现每当我执行与 Oracle**的**连接（通过 OCI.dll）和对 Web 服务方法的调用时，在 IDE 中关闭我的应用程序时，都会在 ntdll.dll 中出现异常。

对于与 Oracle 的连接，我尝试使用 DOA（直接 Oracle 访问）4.1.1.0 和 ODAC 组件（最新试用版）；

对于 Web 服务方法调用（只是一个简单的“函数 HelloWorld：字符串”），在从 Web 服务导入 WSDL 之后，我正在使用 Delphi 的现有功能。

如果我在“直接”模式下使用 ODAC 组件，即不使用 OCI.dll，则关闭时不会出现异常。

如果我只调用 Web 服务方法（不连接到 Oracle），则关闭时不会发生异常（即使我使用 DOA 或 ODAC 组件）。

如果我只连接到 Oracle（通过 OCI.dll）（不调用 Web 服务方法），一切都会正常进行（无论我使用 DOA 还是 ODAC 组件）。

当在 Delphi 7 和 Delphi XE2 中执行时，相同的代码运行完美：应用程序关闭时不会发生异常。

一些信息：Delphi 2009（股票和更新 3 版本）操作系统：Windows 7 32 位 Oracle Instant Client 10.2.0.4 和 Oracle Instant Client 10.2.0.5

我开始怀疑这可能是与 Delphi 2009 中应用程序关闭时的堆损坏有关的问题......

请问有什么帮助吗？

重现步骤（来自评论）：

1.  创建一个新的 VCL 表单应用程序
2.  在窗体上放置一个 TOracleSession DOA 组件（名为 OracleSession1）
3.  在窗体上放置一个 TButton（名为 Button1）
4.  为按钮单击事件放置此事件处理程序：

这是代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
   MyWebService3Soap: WebService3Soap;
   s: string;
begin
   OracleSession1.LogonDatabase := 'SomeLogonDB';
   OracleSession1.LogonUsername := 'SomeUsername';
   OracleSession1.LogonPassword := 'SomePassword';
   OracleSession1.Connected := True;
   ShowMessage('Connected');

   MyWebService3Soap := GetWebService3Soap();
   s := MyWebService3Soap.HelloWorld(); // Just returns a string such as "Hello World"
   ShowMessage(s);
 end; 
```

“WebService3Soap”接口是由Delphi 2009 WSDL Importer 自动生成的。这是有意义的部分：

```
WebService3Soap = interface(IInvokable)
  ['{F6F12FA6-3881-8BB5-AD71-2408B47692CD}']
    function  HelloWorld: string; stdcall;
  end;

function GetWebService3Soap(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): WebService3Soap;

initialization
  InvRegistry.RegisterInterface(TypeInfo(WebService3Soap), 'http://mytest.it/Test3', 'utf-8');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(WebService3Soap), 'http://mytest.it/Test3/HelloWorld');
  InvRegistry.RegisterInvokeOptions(TypeInfo(WebService3Soap), ioDocument);
end. 
```

在 IDE 中运行应用程序，按下按钮（关闭 ShowMessages 后面的 2 个），然后关闭表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:18:04.667

鉴于这可能是一个“DLL 地狱”问题的提示，我能够在 Windows XP 和 Vista 上运行测试：一切正常。所以我开始认为这个问题一定与 Windows 7 上的 Delphi 2009 有关。

我是对的，我发现在 Delphi 2009 中在 Windows 7 上进行调试存在问题。

幸运的是，有一个补丁可用：

[ID：27476，用于 Delphi 2009 和 C++Builder 2009 的修补程序 2](http://cc.embarcadero.com/item/27476)

应用补丁解决了！

# maven - Maven 构建问题 - 任何人都可以帮助我了解为什么当我以 maven install 运行时会看到此错误

> ID：13107388
> 
> 赞同：0
> 
> 时间：2012-10-28T08:25:17.540
> 
> 标签：maven, maven-plugin, maven-surefire-plugin

[错误] 无法执行目标 org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project resteasy：执行目标 org.apache.maven.plugins:maven-surefire 的默认测试-plugin:2.10:test failed: 插件 org.apache.maven.plugins:maven-surefire-plugin:2.10 或其依赖项之一无法解析：无法收集 org.apache.maven.plugins:maven-surefire 的依赖项-plugin:jar:2.10 (): 无法读取 org.apache.maven.shared:maven-common-artifact-filters:jar:1.3 的工件描述符: 无法传输工件 org.apache.maven.shared:maven-common -artifact-filters:pom:1.3 from/to central (http://repo.maven.apache.org/maven2): 远程关闭 [id: 0x3004ed34, /192.168.200.22:59080 :> repo.maven.apache.org /93.184.215.223:80] -> [帮助 1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:37:15.363

您可以尝试几个选项：

1.  使用调试选项。这将产生大量输出，并且您可能能够理解真正发生的事情。

    mvn -X 测试

2.  如果您在存储库（Nexus、Artifactory 等）上运行某种代理，您可以尝试在 settings.xml 中禁用它并尝试直接从中央存储库获取工件。

3.  从理论上讲，您的本地存储库中可能出现问题（默认情况下为 ~/.m2） 在这种情况下，请尝试从 ''org.apache.maven.shared:maven-common-artifact-filters:jar:1.3 中删除所有包'' 并重新运行构建。

这有什么帮助

# ios - iOS 6：[self.tableview 重新加载数据] 禁用滚动？

> ID：13107392
> 
> 赞同：3
> 
> 时间：2012-10-28T08:26:07.007
> 
> 标签：ios, uitableview

我正在为 iOS 6 的数据管理系统开发应用程序。这是我的代码：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.navigationItem.title = @"Detail";

    if (self.student.thumbnailImage != nil) {
        [self.imageButton setImage:[UIImage imageWithData:self.student.thumbnailImage] forState:UIControlStateNormal];
    } else {
        [self.imageButton setImage:[UIImage imageNamed:@"Default_photo3.png"] forState:UIControlStateNormal];

    }

    NSLog(@"Student First = %@", self.student.firstname);
    self.firstNameTF.text = self.student.firstname;

    NSLog(@"Student Last = %@", self.student.lastname);
    self.lastNameTF.text = self.student.lastname;

    NSLog(@"Student IC = %@", self.student.ic);
    self.icTF.text = self.student.ic;

    NSLog(@"Student Form = %@", self.student.form);
    self.formTF.text = self.student.form;

    NSLog(@"Student Gender = %@", self.student.gender);
    self.genderTF.text = self.student.gender;

    NSLog(@"Student Birthday = %@", self.student.birthday);

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd/MM/yyyy"];
    NSString *date = [dateFormatter stringFromDate:self.student.birthday];
    self.birthdateTF.text = date;;
    self.dateButton.titleLabel.text =date;

    NSLog(@"Address = %@", self.student.address.street);
    NSLog(@"Zip = %@", self.student.address.zip);
    NSLog(@"City = %@", self.student.address.city);
    NSLog(@"State = %@", self.student.address.state);

    [self updateImageButton];

    //Create a mutable array for guardians
    NSSortDescriptor *sortDEscriptors = [[NSSortDescriptor alloc]initWithKey:@"firstname" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDEscriptors, nil];

    NSMutableArray *sortedGuardians = [[NSMutableArray alloc] initWithArray:[self.student.guardians allObjects]];

    [sortedGuardians sortUsingDescriptors:sortDescriptors];

    self.guardiansArray= sortedGuardians;

    [self.tableView reloadData];
} 
```

我发现我的表格视图一开始没有滚动。但是当我删除`[self.tableView reloadData]`这部分中的时，它确实滚动正常。有谁知道为什么？我需要把它放在`[self.tableView reloadData]`这里，以便在编辑后更新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:19:17.710

将 reloadData 放在 ViewDidAppear 方法中，这样您将在视图出现之前设置数据并在视图出现后请求重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T14:01:52.560

您可以像重新加载数据之前一样设置偏移量

```
CGPoint offset = self.tableView.contentOffset;
[self.tableView reloadData];
[self.view layoutIfNeeded];
[self.tableView setContentOffset:offset animated:NO]; 
```

希望这会对某人有所帮助

# cocoa - 当我使用 OpenGL Core Profile 3.2 时，我的三角形不渲染

> ID：13107393
> 
> 赞同：3
> 
> 时间：2012-10-28T08:26:11.470
> 
> 标签：cocoa, opengl

我有一个目前非常简单的 Cocoa (OSX) 项目，我只是想掌握使用 OpenGL 背后的一般概念。我能够在视图中显示一个三角形，但是当我开始编写顶点着色器和片段着色器时，我意识到我正在运行旧版 OpenGL 核心配置文件。所以我在生成上下文之前通过设置相关视图的像素格式的属性来切换到 OpenGL 3.2 配置文件，但是现在即使没有我的顶点或片段着色器，三角形也不会渲染。

我有一个用于在笔尖中实例化的视图的控制器类。在`-awakeFromNib`它上面设置像素格式和上下文：

```
NSOpenGLPixelFormatAttribute attr[] =
{
    NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core,
    0
};
NSOpenGLPixelFormat *glPixForm = [[NSOpenGLPixelFormat alloc] initWithAttributes:attr];
[self.mainView setPixelFormat:glPixForm];
self.glContext = [self.mainView openGLContext]; 
```

然后我生成 VAO：

```
glGenVertexArrays(1, &vertexArrayID);
glBindVertexArray(vertexArrayID); 
```

然后是VBO：

```
glGenBuffers(1, &buffer);
glBindBuffer(GL_ARRAY_BUFFER, buffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW); 
```

`g_vertex_buffer_data`，该缓冲区的实际数据定义如下：

```
static const GLfloat g_vertex_buffer_data[] = {
    -1.0f, -1.0f, 0.0f,
    1.0f, -1.0f, 0.0f,
    0.0f, 1.0f, 0.0f,
}; 
```

这是实际绘图的代码：

```
[_glContext setView:self.mainView];
[_glContext makeCurrentContext];
glViewport(0, 0, [self.mainView frame].size.width, [self.mainView frame].size.height);

glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, self.vertexBuffer);
glVertexAttribPointer(
                      0,
                      3,
                      GL_FLOAT,
                      GL_FALSE,
                      0,
                      (void*)0
                      );
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glDrawArrays(GL_TRIANGLES, 0, 3); // Starting from vertex 0; 3 vertices total -> 1 triangle
glDisableVertexAttribArray(0);
glFlush(); 
```

如果我注释掉数组`NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core,`中的，这段代码可以很好地绘制三角形`NSOpenGLPixelFormatAttribute`，但是一旦我启用 OpenGL Core Profile 3.2，它就会显示为黑色。谁能告诉我我在这里做错了什么？

编辑：无论我是否打开我的顶点和片段着色器，这个问题仍然会发生，但这里是我的着色器，以防它有帮助：

顶点着色器：

```
#version 150

in vec3 position;

void main() {
    gl_Position.xyz = position;
} 
```

片段着色器：

```
#version 150

out vec3 color;

void main() {
    color = vec3(1,0,0);
} 
```

在链接程序之前，我进行了这个调用来绑定属性位置：

```
glBindAttribLocation(programID, 0, "position"); 
```

编辑2：

我不知道这是否有帮助，但我只是逐步完成我的程序，运行`glGetError()`它看起来一切都很好，直到我实际调用`glDrawArrays()`，然后它返回`GL_INVALID_OPERATION`。我试图弄清楚为什么会发生这种情况，但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:32:11.233

我想通了，可悲的是，这对我来说是一个非常愚蠢的错误。

我认为问题是在使用 3.2 核心配置文件时需要一个顶点着色器和一个片段着色器，没有它们就不能渲染。它不能与我的着色器一起工作的原因是......等待它......在链接我的着色器程序后，我忘记将 programID 存储在我的类的 ivar 中，所以后来当我调用 glUseProgram() 我是只是用零参数调用它。

我想主要的混淆来源之一是我希望 3.2 核心配置文件在没有任何顶点或片段着色器的情况下工作。

# wordpress - 无法更改 wordpress 侧边栏项目

> ID：13107395
> 
> 赞同：0
> 
> 时间：2012-10-28T08:26:24.230
> 
> 标签：wordpress, sidebar, woocommerce

我有一个带有侧边栏的 wordpress 站点，该站点以我下载的主题为主题。

在外观 > 菜单中，我创建了一个新菜单，然后将侧栏菜单下拉列表设置为新创建的菜单，但是当您访问网站时，它没有任何区别.. 旧菜单仍然存在...

![在此处输入图像描述](../Images/1cd84fc0808873bfde431edc51563b78.png)

所以我从主题中查看了代码编辑器，但我不知道如何更改它，以便它可以从我新创建的菜单中工作，我希望有人能够帮助我.. 这是 sidebar.php 代码和侧边栏-init.php

侧边栏-init.php

```
<?php
function elegance_widgets_init() {
    // Header Widget
    // Location: right after the navigation
    register_sidebar(array(
        'name'                  => 'Header',
        'id'                        => 'header-sidebar',
        'description'   => __( 'Located at the top of pages.'),
        'before_widget' => '<div id="%1$s" class="widget">',
        'after_widget' => '</div>',
        'before_title' => '<h3>',
        'after_title' => '</h3>',
    ));
    // Sidebar Widget
    // Location: the sidebar
    register_sidebar(array(
        'name'                  => 'Sidebar',
        'id'                        => 'main-sidebar',
        'description'   => __( 'Located at the right side of pages.'),
        'before_widget' => '<div id="%1$s" class="widget">',
        'after_widget' => '</div>',
        'before_title' => '<h3>',
        'after_title' => '</h3>',
    ));
    // Contact Form Widget
    // Location: Contacts page
    register_sidebar(array(
        'name'                  => 'Contact Form',
        'id'                        => 'contact_form',
        'description'   => __( 'Located at the left side of Contacts page.'),
        'before_widget' => '<div id="%1$s">',
        'after_widget' => '</div>',
        'before_title' => '<h3>',
        'after_title' => '</h3>',
    ));
    // Address Widget
    // Location: Contacts page
    register_sidebar(array(
        'name'                  => 'Address',
        'id'                        => 'address',
        'description'   => __( 'Located at the right side of Contacts page.'),
        'before_widget' => '<div id="%1$s" class="widget">',
        'after_widget' => '</div>',
        'before_title' => '<h3>',
        'after_title' => '</h3>',
    ));
    // Footer Widget Area
    // Location: at the top of the footer, above the copyright
    register_sidebar(array(
        'name'                  => 'First footer widget area',
        'id'                        => 'first-footer-widget-area',
        'description'   => __( 'Located at the bottom of pages.'),
        'before_widget' => '<div id="%1$s" class="widget-area">',
        'after_widget' => '</div>',
        'before_title' => '<h4>',
        'after_title' => '</h4>',
    ));
    // Footer Widget Area
    // Location: at the top of the footer, above the copyright
    register_sidebar(array(
        'name'                  => 'Second footer widget area',
        'id'                        => 'second-footer-widget-area',
        'description'   => __( 'Located at the bottom of pages.'),
        'before_widget' => '<div id="%1$s" class="widget-area">',
        'after_widget' => '</div>',
        'before_title' => '<h4>',
        'after_title' => '</h4>',
    ));
    // Footer Widget Area
    // Location: at the top of the footer, above the copyright
    register_sidebar(array(
        'name'                  => 'Third footer widget area',
        'id'                        => 'third-footer-widget-area',
        'description'   => __( 'Located at the bottom of pages.'),
        'before_widget' => '<div id="%1$s" class="widget-area">',
        'after_widget' => '</div>',
        'before_title' => '<h4>',
        'after_title' => '</h4>',
    ));
    // Footer Widget Area
    // Location: at the top of the footer, above the copyright
    register_sidebar(array(
        'name'                  => 'Fourth footer widget area',
        'id'                        => 'fourth-footer-widget-area',
        'description'   => __( 'Located at the bottom of pages.'),
        'before_widget' => '<div id="%1$s" class="widget-area">',
        'after_widget' => '</div>',
        'before_title' => '<h4>',
        'after_title' => '</h4>',
    ));

}
/** Register sidebars by running elegance_widgets_init() on the widgets_init hook. */
add_action( 'widgets_init', 'elegance_widgets_init' );
?> 
```

边栏.php

```
<aside id="sidebar" class="grid_6 omega">
    <?php if ( ! dynamic_sidebar( 'Sidebar' )) : ?>

        <div id="sidebar-nav" class="widget menu">
            <h3>Navigation</h3>
            <?php wp_nav_menu( array('menu' => 'Sidebar Menu' )); ?> <!-- editable within the Wordpress backend -->
        </div>

    <?php endif; ?>
</aside><!--sidebar--> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:48:07.123

```
<div id="sidebar-nav" class="widget menu">
            <h3>Navigation</h3>
            <?php wp_nav_menu( array('menu' => 'Catalogue' )); ?> <!-- editable within the Wordpress backend -->
</div> 
```

只需更改 wp_nav_menu(array('menu' => ' **Catalog** '));中的值 这将调用您的菜单名为“目录”，主题声明您可以从后端更改所选菜单

# java - XSLT CallTemplate ForEach XML 扩展函数

> ID：13107399
> 
> 赞同：0
> 
> 时间：2012-10-28T08:27:40.610
> 
> 标签：java, templates, xslt

我希望 $content 是预期的字符串。我知道 $content 的 copy-of 而不是 value-of 会产生预期的字符串。但是我如何不使用 copy-of 并将其传递给 java 扩展函数呢？

[我在这里](https://stackoverflow.com/questions/13096832/xslt-calltemplate-foreach-xml)问了一个不同的相关问题。

## XML

```
<?xml version="1.0"?>
<a>
  <b c="d"/>
  <b c="d"/>
  <b c="d"/>
</a> 
```

## XSL

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template name="foo">
        <xsl:param name="content"></xsl:param>
        <!-- <xsl:copy-of select="$content"></xsl:copy-of> -->
        <!-- copy-of produces the expected string here, but how to pass to Java -->
        <xsl:value-of select="java:someMethod($content)" />
        <!-- I want the content to be the expected string -->
    </xsl:template>

    <xsl:template match="/">
        <xsl:call-template name="foo">
            <xsl:with-param name="content">
                <xsl:for-each select="a/b">
                    <e>
                        <xsl:value-of select="@c" />
                    </e>
                </xsl:for-each>
            </xsl:with-param>
        </xsl:call-template>
    </xsl:template>
</xsl:stylesheet> 
```

从 $content 传递给 Java 扩展函数的所需字符串。

```
<?xml version="1.0"?>
<e>d</e>
<e>d</e>
<e>d</e> 
```

PS：调用 foo 是强制性的。

最终，我的目标是使用扩展功能在 XSLT 1.0 中模拟结果文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:11:39.703

调用 Java 扩展函数取决于您使用的 XSLT 处理器，而您没有告诉我们。如果您使用 Java 的 TransformerFactory，您将获得类路径中的任何内容，例如 Xalan 的内置版本、Xalan 的 Apache 版本或 Saxon。

Your description suggests you want to pass a string containing lexical XML to your Java extension function. That implies you need to serialize a node to a string. That can't be achieved without an extension function such as saxon:serialize(). It's probably easier to pass the node to your Java method, and have the Java method do the serialization.

# c# - C# - 无法访问所有文件

> ID：13107407
> 
> 赞同：3
> 
> 时间：2012-10-28T08:29:37.097
> 
> 标签：c#, exception, permissions, file-permissions

我的应用程序使用 .NET 对象`Directory.GetFiles()`

我正在使用的实际过载是

```
var allFiles = Directory.GetFiles("C:\\Users\\Dave", "*.*", SearchOption.AllDirectories); 
```

问题是当源文件夹是 C:\Users\UserName 时，它​​会尝试查看应用程序数据文件夹。

当它尝试从应用程序数据文件夹中读取时，会引发异常：

> “访问路径 'C:\Users\Dave\AppData\Local\Application Data' 被拒绝。”

所以，我的问题是有人对我的选择有意见吗？我假设我必须改变收集所有文件的方式，或者可能有一个内置的重载或方法可以让我继续这个（我显然不知道）。

如果有帮助，这样做的目的是获取所有检索到的文件`Directory.GetFiles()`并将它们“粘贴”到其他地方（美化的副本和粘贴/备份）。我实际上并不太担心系统文件，只是“用户文件”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:38:43.093

该目录`%AppData%`是受系统保护的目录。一旦访问未被授权（来自管理员以外的其他用户的访问），Windows 将尝试阻止对该目录的任何访问。

默认情况下，只有管理员有权读取/写入此目录。

或者，您可以捕获异常并查看结果是否为`Access Denied`. 然后，您可能会提示用户以管理员身份运行以完成此步骤。这是一个提示用户以管理员身份运行的简单示例

```
try
{
     var allFiles = Directory.GetFiles("C:\\Users\\Dave", "*.*", SearchOption.AllDirectories);
}
catch (Exception EX)
{
     if (EX.Message.ToLower().Contains("is denied."))
     {
          ProcessStartInfo proc = new ProcessStartInfo();
          proc.UseShellExecute = true;
          proc.WorkingDirectory = Environment.CurrentDirectory;
          proc.FileName = Application.ExecutablePath;
          proc.Verb = "runas"; //Required to run as Administrator
          try
          {

          Process.Start(proc);

          }
          catch
          {
               //The user refused to authorize
          }
     }
} 
```

但是，您可能总是在您的应用程序启动时提示用户授权，这并不总是推荐的。为此，您必须编辑项目`app.manifest`文件

找到并更改以下行

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

到

```
<requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:46:48.467

最好使用 foreach 循环来获取您可以访问的文件夹名称：

```
DirectoryInfo dI = new DirectoryInfo(@"C:\Users\Dave");
List<string> files = new List<string>();
foreach (DirectoryInfo subDI in dI.GetDirectories())
{
        if ((subDI.Attributes & (FileAttributes.ReparsePoint | FileAttributes.System)) !=
        (FileAttributes)0)
              continue;
        files.Add(subDI.FullName);
} 
```

# asp.net - 超链接 url 包含 localhost 和端口号

> ID：13107421
> 
> 赞同：3
> 
> 时间：2012-10-28T08:33:13.353
> 
> 标签：asp.net, html

我正在使用 ASP.NET 创建一个搜索网站。在我的一个页面上显示结果的 URL。当我单击 URL 时，会打开一个新链接，但浏览器中新链接的 URL 路径包括 loalhost:portnumbet。我没有想要在我的网址中。

例如。

```
 <a href = "https://www.google.com"> result </a> 
```

所以在点击结果时，我转到 URL 为“https://localhost:8080//www.google.com”的浏览器，为什么这个 localhost:8080 包含在 URL 中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:40:56.663

当您重定向到 URL 时，您不会添加任何协议信息，因此它将默认为当前网站/协议。

例如;

```
Response.Redirect("www.google.com") 
```

不一样；

```
Response.Redirect("http://www.google.com") 
```

您需要添加`fully qualified`URL，否则它会认为它是`relative`当前网站，因此添加`http(s)://`到重定向。

# java - 如果用户输入数字以外的任何内容，如何将用户返回到程序的输入阶段？

> ID：13107422
> 
> 赞同：0
> 
> 时间：2012-10-28T08:33:23.777
> 
> 标签：java, exception, try-catch

首先，我想说的是，在 Java 方面我是一个完整的初学者。到目前为止，我所知道的是我从大学的软件开发课程中学到的东西。我自己一直在搞砸它，我设法创建了一个应用程序，它以两个双精度值作为输入并计算用户的 BMI（体重指数）。

该程序运行良好，并且完全符合我的要求，但是，如果用户没有输入任何内容并按下回车键，则会引发异常。如果用户输入的不是数字，则会引发异常。当抛出异常时，程序停止。我想阻止这些异常完全停止程序，而是将用户返回到输入阶段并显示错误消息。

我知道它是如何完成的。有些人建议使用 try {..} catch (..) {..} 结构，我已经尝试过，但我总是设法破坏程序。

有人有想法么？

所以，这是我到目前为止的代码，如果有任何问题，我很抱歉，我已经尝试添加注释以使其更容易。

```
import java.io.*;

public class bmi {

    public static void main(String[] args) throws IOException {

        /**
         * User input of weight and height.
         */

        BufferedReader in;
        in = new BufferedReader(new InputStreamReader(System.in));

        System.out.println("Please enter how much you weigh in KG.");
        double weight = Double.parseDouble(in.readLine()); //take weight input as double

        System.out.println("Please enter how tall you are in meters.");
        double height = Double.parseDouble(in.readLine()); //take height input as double

        /**
         * BMI calculation
         */

        double bmi = weight / Math.pow(height,2); // weight divided by height squared

        /**
         * if else statements to find if person is underweight, at a healthy weight or overweight.
         */

        if (bmi<18.5) { //if BMI is smaller than 18.5
            System.out.println("Your BMI is " + bmi + ", you are underweight.");
        }

        else if (bmi>=18.5 && bmi<=25) { //if BMI is bigger than or equal to 18.5 and smaller than or equal to 25
            System.out.println("Your BMI is " + bmi + ", you are at a healthy weight.");
        }

        else if (bmi>25) { //if bmi is bigger than 25
            System.out.println("Your BMI is " + bmi + ", you are overweight");
        }

    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:36:59.190

代替

```
System.out.println("Please enter how much you weigh in KG.");
double weight = Double.parseDouble(in.readLine()); //take weight input as double

System.out.println("Please enter how tall you are in meters.");
double height = Double.parseDouble(in.readLine()); //take height input as double 
```

使用这样的构造：

```
double weight = 0, height = 0;
boolean incorrectInput = true;

while(incorrectInput){
    try{
        System.out.println("Please enter how much you weigh in KG.");
        weight = Double.parseDouble(in.readLine()); //take weight input as double

        System.out.println("Please enter how tall you are in meters.");
        height = Double.parseDouble(in.readLine()); //take height input as double
        incorrectInput = false;
    }catch(NumberFormatException nxe){
        System.out.println("Incorrect value for weight or height provided. Please try again")
    }
} 
```

您实际上在做的事情如下：

*   声明一个布尔变量，用于控制是否要求用户输入信息。*请注意，这需要在初始时间为真，直到用户输入正确的体重和身高值*

*   如果输入不符合预期，则 parseDouble() 方法会抛出 NumberFormatException。您需要捕获此输入并告诉用户该输入不是预期的。这进入你的 catch 块。解析部分进入 try 块内部。

*   假设用户输入了预期的输入，您需要做的是设置布尔变量，以便 while 循环终止。

**注意**：另一种选择是使用[扫描仪](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)。[您可以在 Java 教程：扫描中](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)阅读有关其用法的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:38:03.070

You can use [`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html) for that. `Scanner` provides various methods to check appropriate types so you can use them. And there is no need to catch exceptions like `NumberFormatException`

```
 Scanner scanner = new Scanner(System.in);
    double weight = 0;
    double height = 0;
    System.out.println("Please enter how much you weigh in KG.");
    while (scanner.hasNext()) {
        if (scanner.hasNextDouble()) {
            // correct value
            weight = scanner.nextDouble();
        } else {
            System.out.println("Please enter correct value.");
            scanner.next();
            continue;
        }
        System.out.println("Please enter how tall you are in meters.");
        if (scanner.hasNextDouble()) {
            // correct value
            height = scanner.nextDouble();
        } else {
            System.out.println("Please enter correct value.");
            scanner.next();
            continue;
        }
        break;
    }
    double bmi = weight / Math.pow(height, 2);
    System.out.println("Your BMI :"+bmi);
    //Rest of the code remains the same 
```

# php - CakePHP 表单自动附加 div 和标签

> ID：13107427
> 
> 赞同：0
> 
> 时间：2012-10-28T08:33:59.560
> 
> 标签：php, forms, cakephp

我正在使用 Cakephp 2.2.3 版本。当我使用 Cake 表单助手创建表单时，它会自动将 div 和标签附加到输入类型字段。如何避免？

以下是代码：

```
 <?php echo $this->Form->input('username', array('id' => 'username', 'class' => 'login-inp', 'type' => 'text')); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:53:25.120

您可以使用 options 输入数组来避免表单自动附加 div 和 label。将选项数组的`div`和设置为。`label``false`

```
echo $this->Form->input('username',
         array('id' => 'username', 'class' => 'login-inp',
               'div' => false, 'label' => false
         )
     ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T12:51:54.157

这`FormHelper::input()`就是应该做的。如果您不想要标签和包装 div，只需使用函数来生成特定的输入元素，例如`FormHelper::text()`, `FormHelper::select()`,`FormHelper::radio()`等。

# delphi - 安装自定义包时出现异常 ENonAIRException

> ID：13107428
> 
> 赞同：0
> 
> 时间：2012-10-28T08:34:05.503
> 
> 标签：delphi, exception, delphi-xe

我有一个自定义包（使用 FibPlus 和 IBExpress）。包构建正常，但是在尝试安装它时它给了我这个异常：Exception ENonAIRException。有人知道吗？它生成什么？

LE：找到[http://docwiki.embarcadero.com/VCL/2010/en/DesignEditors.EDesignPropertyError_Members](http://docwiki.embarcadero.com/VCL/2010/en/DesignEditors.EDesignPropertyError_Members) - 但它没有帮助

LE2：安装包时出现错误，IDE 正在尝试加载包。在 madExcept 报告下方：

```
21ba0eb1 +0ad delphicoreide150.bpl PakList           896 +20 TPackageListItem.LoadDesignPackage
7c91e485 +009 ntdll.dll                                      KiUserExceptionDispatcher
7c92487a +048 ntdll.dll                                      RtlAppendUnicodeToString
207a8c49 +055 coreide150.bpl       PakLoad           217  +7 TPackage.Load
207ab419 +061 coreide150.bpl       PakMgr            591  +2 TDesignPackage.Load
21af8317 +05b delphicoreide150.bpl PasCppPakMgr     2253  +4 TIDEDesignPackage.Load
500a014a +04e rtl150.bpl           Classes          5284  +2 TStrings.IndexOf
21af7bbb +0ff delphicoreide150.bpl PasCppPakMgr     2059 +20 TProfileData.LoadIntersectingPackageGroups
21af81db +077 delphicoreide150.bpl PasCppPakMgr     2214  +8 TIDEDesignPackage.LoadRequiredDesignPackages
21af83ce +112 delphicoreide150.bpl PasCppPakMgr     2266 +17 TIDEDesignPackage.Load
5003a7c1 +01d rtl150.bpl           System          12170  +2 @AfterConstruction
21af812b +06b delphicoreide150.bpl PasCppPakMgr     2178 +11 TIDEDesignPackage.DelayLoad
21ba0f0c +030 delphicoreide150.bpl PakList           916  +3 TPackageListItem.LoadWait
21ba0e73 +06f delphicoreide150.bpl PakList           891 +15 TPackageListItem.LoadDesignPackage
21b9feeb +067 delphicoreide150.bpl PakList           559  +7 TPackageListItem.SetIsInstalled
21b9fcbb +0d3 delphicoreide150.bpl PakList           474 +13 TPackageList.AddPackage
21bacba0 +090 delphicoreide150.bpl BasePasProjOpts  1670  +8 TProjOptsManager.InstallPackage
21bade5f +003 delphicoreide150.bpl BasePasProjOpts  2363  +0 TProjectOptions.InstallPackage
21b8561d +191 delphicoreide150.bpl PasMgr          11722 +18 TPascalPackageCodeUpdater.InstallPackage
21b028ef +06f delphicoreide150.bpl PkgContainers     178  +8 TStdPackageProjectContainer.CommandHandler
2079350f +19f coreide150.bpl       ContainerIntf     866 +26 TIDEProjectManagerMenuObject.Execute
20795136 +176 coreide150.bpl       ContainerIntf    1114 +18 TProjectManagerMenuItem.Click
5029fc9b +013 vcl150.bpl           Menus            3390  +5 TMenu.DispatchCommand
502a0e7a +082 vcl150.bpl           Menus            4496  +4 TPopupList.WndProc
502a0dc9 +01d vcl150.bpl           Menus            4471  +2 TPopupList.MainWndProc
500afa64 +014 rtl150.bpl           Classes         13491  +8 StdWndProc
77d189e3 +00a USER32.dll                                     DispatchMessageW
50358af7 +0f3 vcl150.bpl           Forms            9760 +23 TApplication.ProcessMessage
50358b3a +00a vcl150.bpl           Forms            9790  +1 TApplication.HandleMessage
50358e65 +0c9 vcl150.bpl           Forms            9927 +26 TApplication.Run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:22:01.570

我可能在这里偏离了轨道，但这是发生在我身上的一个与类似情况有关的场景。我希望这有帮助。

我有一个大项目，由于某种原因，我无法再打开项目选项或编辑构建配置。我也认为错误安装的组件或包是罪魁祸首。

我关闭了 EurekaLog IDE 集成，尝试打开项目选项，然后看到有关错误平台的 Delphi 错误消息。这让我玩了两个可用的平台“Unknown Platform Win64”，这很奇怪，因为这是一台 Win7 机器，但是好吧，我会玩，另一个平台只是“Windows”（激活的平台）。

我禁用了“Windows”平台，现在我的项目选项打开了，我可以编辑构建配置，我已经让我疯狂数周的该死的 coreide150.bpl 错误终于消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-22T16:22:52.373

对于它的价值，我今天为此苦苦挣扎（Delphi XE）。正如@DavidHeffernan 所说，它与模块加载有关。就我而言，一个长期存在的软件包在需要**调用 .DLL**的更改后尝试重新安装，给出了这个无法解释的错误消息。当我重新写东西时，它没有，一切都好起来了。

# javascript - 只有一个 javascript 类的两种效果

> ID：13107435
> 
> 赞同：-1
> 
> 时间：2012-10-28T08:36:03.620
> 
> 标签：javascript, class, graph

我想创建一个自己的 javascript 类。我的问题是，如何根据上下文创建具有两种不同效果的函数。

这是一个例子：

```
function Matrix(str) {
this.G = 2 dim array;
this.e = function(x,y){
    G[x][y] = 3 // if the user types myGraph.e(1,1) = 3;
    return G[x][y] // if user call myGraph.e(1,1);
} 
```

那么我怎样才能用一个函数得到两个不同的结果呢？`myGraph.e(1,1) = 3`和`myGraph.e(1,1)`

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:43:14.800

这无法做到，但您可以简单地采用第三个参数：

```
this.e = function( x , y, value){
    switch( arguments.length ) {
         case 3: this.G[x][y] = value; return; // myGraph.e( 1, 1, 3 );
         case 2: return this.G[x][y]; // myGraph.e( 1, 1 );
         default: throw new TypeError( "..." );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:45:53.987

稍微修改@Esalija的答案：

```
this.e = function(x, y, value) {
    if (typeof value !== 'undefined') {
        this.G[x][y] = value;
    }
    return this.G[x][y];  // always return the value
} 
```

注意：二维数组的*第一个*维度更常见的是表示`y`，而不是`x`。

# django - Django中的循环数据库关系

> ID：13107436
> 
> 赞同：1
> 
> 时间：2012-10-28T08:36:36.450
> 
> 标签：django, database, relationship, circular-dependency

我有以下模型（campaigns/models.py）

```
from django.db import models
from django.contrib.auth.models import User

class Module(models.Model):
    name = models.CharField(max_length=20)
    def __unicode__(self):
        return self.name

class TestType(models.Model):
    name = models.CharField(max_length=20)
    def __unicode__(self):
        return self.name

class Test(models.Model):
    PROTO_CHOICES = (
        ('TCP','tcp'),
        ('UDP','udp'),
    )
    module = models.ForeignKey(Module)
    testtype = models.ForeignKey(TestType)
    name = models.CharField(max_length=50, unique=True)
    port = models.IntegerField(blank=True, null=True)
    proto = models.CharField(max_length=3, blank=True, choices=PROTO_CHOICES)
    payload = models.TextField()
    sig_match = models.TextField(blank=True)
    def __unicode__(self):
        return self.name

class Campaign(models.Model):
    name = models.CharField(max_length=50, unique=True)
    tests = models.ManyToManyField(Test)
    updated = models.DateTimeField(auto_now_add=True)
    user = models.ForeignKey(User, editable=False)
    def __unicode__(self):
        return self.name

class CampaignRun(models.Model):
    campaign = models.ForeignKey(Campaign)
    name = models.CharField(max_length=50, unique=True)
    run_start = models.DateTimeField()
    run_end = models.DateTimeField()
    updated = models.DateTimeField(auto_now=True)
    user = models.ForeignKey(User, editable=False)
    class Meta:
    def __unicode__(self):
        return self.name

class TestRun(models.Model):
    campaignrun = models.ForeignKey(CampaignRun)
    test = models.ForeignKey(Test)
    test_start = models.DateTimeField()
    test_end = models.DateTimeField()
    alert = models.TextField(blank=True)
    flag = models.IntegerField(blank=True, null=True) 
```

…导致以下数据库（sqlite3）：

```
 +-----------------------------+
                                                                       |                             |
   +---------------------------+     +------------------------------+  |     +--------------------+  |
   | campaigns_testrun         |     | campaigns_test               |  |     | campaigns_module   |  |
   +----------------+----------+     +----------------+-------------+  |     +------+-------------+  |
   | id             | INT      |  +--| id             | INT         |--+  +--| id   | INT         |  |
+--| campaignrun_id | INT      |  |  | module_id      | INT         |-----+  | name | VARCHAR(20) |  |
|  | test_id        | INT      |--+  | testtype_id    | INT         |--+     +------+-------------+  |
|  | test_start     | DATETIME |     | name           | VARCHAR(50) |  |                             |
|  | test_end       | DATETIME |     | port           | INT         |  |     +--------------------+  |
|  | alert          | TEXT     |     | proto          | VARCHAR(3)  |  |     | campaigns_testtype |  |
|  | flag           | INT      |     | payload        | TEXT        |  |     +------+-------------+  |
|  +----------------+----------+     | sig_match      | TEXT        |  +-----| id   | INT         |  |
|                                    +----------------+-------------+        | name | VARCHAR(20) |  |
|                                                                            +------+-------------+  |
|                                                                                                    |
|  +------------------------+                                +--------------------------+            |
|  | campaigns_campaignrun  |     +--------------------+     | campaigns_campaign_tests |            |
|  +-------------+----------+     | campaigns_campaign |     +-------------+------------+            |
+--| id          | INT      |     +------+-------------+     | id          | INT        |            |
   | campaign_id | INT      |-----| id   | INT         |-----| campaign_id | INT        |            |
   | name        | INT      |     | name | VARCHAR(50) |     | test_id     | INT        |------------+
   | run_start   | DATETIME |     +------+-------------+     +-------------+------------+
   | run_end     | DATETIME |     
   +-------------+----------+ 
```

这是逻辑：

*   一个活动由测试组成
*   一个活动可以运行多次（campaignrun）并产生测试结果（test run）。
*   对于每次活动运行，从测试表中收集测试相关信息

显然，存在循环关系，数据库的完整性仅由应用程序来保证。

但是，从数据库架构师的角度来看，这种循环关系是不正确的，因为它会导致完整性问题：

*   在 SQL 中直接或从 django 管理模块中，可以在campaign_testrun 中创建不在campaign_tests 表中的测试

由于上述原因，解决方案是直接将campaigns_testrun 与campaigns_campaign_tests 链接起来。但是，我认为这在 Django 中是不可能的。

如果您有任何想法如何处理此问题，欢迎发表评论。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:23:28.690

[通过参数](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)使用 ManyToManyField 。

这允许您使用自定义模型，并在 FK、M2M 等中引用它......

另请注意，您可以引用您的班级名称，即。ForeignKey('SomeClass')，启用循环关系没有问题。

欢迎来到 Django，享受你的旅程 B)

# postgresql - Lazarus Pascal 的 postgresql 客户端库 - 缺少 libpq.dll 错误

> ID：13107442
> 
> 赞同：1
> 
> 时间：2012-10-28T08:37:20.360
> 
> 标签：postgresql, ubuntu-12.04, lazarus, libpq

我正在尝试使用 Lazarus Pascal 和 PostgreSQL 创建我的第一个应用程序。

pg 数据库在我的 Ubuntu Linux 主机上。Lazarus 在 XP 上，通过 VirtualBox 运行。

尝试连接到 PG 数据库时，我收到一个`libpq.dll`缺少的错误。

我该怎么办？这个平台很新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:46:56.940

从这里的文档[http://wiki.lazarus.freepascal.org/postgres](http://wiki.lazarus.freepascal.org/postgres)

> 错误：“无法加载 PostgreSQL 客户端库“libpq.dll”” 程序找不到您的 PostgreSQL 驱动程序文件。将所有必需的 PostgreSQL .dll/.manifest 文件复制到您的项目目录和可执行输出目录，或复制到搜索路径中的目录（例如 c:\windows\system32）在 Windows 下连接 Lazarus 和 PostgreSQL 是 easyDB。在 Linux/Unix/OSX 上：确保 PostgreSQL 库位于库搜索路径中，例如：在 linux 上，将 libpq.so 文件的路径添加到 /etc/fpc.cfg 文件中的库部分。例如： -Fl/usr/local/pgsql/lib 可能需要创建从特定库版本到通用库名称的符号链接： ln -s /usr/lib/pqsql.so.5 /usr/lib /pqsql.so 。或者，

# java - 当 Windows 连接到网络时收到通知

> ID：13107443
> 
> 赞同：4
> 
> 时间：2012-10-28T08:37:23.497
> 
> 标签：java, windows, networking, notifications, java-native-interface

当有新的连接可用时，在 Java 程序中（使用 JNI）有什么方法可以通知 Windows 操作系统？目前，我必须检查的唯一方法是轮询尝试下载网页的函数。如果下载成功并且没有抛出异常，那么我可以猜测有 Internet 连接。

但是，更好的解决方案可能是这个：

1.  在程序启动时，检查 Internet 连接
2.  如果没有可用的互联网连接，请“注册”Windows 网络通知和 WAIT()
3.  用户连接到 Internet，Windows os 通知 Java 机器=> 线程唤醒
4.  做点事....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:47:15.413

下面做一个 ping，比下载一个页面花费更少，并且你可以更改超时：

```
InetAddress.getByName( "stackoverflow.com" ).isReachable( 4000 ) 
```

以低优先级放入线程循环中：

```
while( ! InetAddress.getByName( "stackoverflow.com" ).isReachable( 4000 )) {
   Thread.slepp( 1000L );
} 
```

我没有更好的。

`InetAddress.isReachable`文档：

> 测试该地址是否可达。实现会尽最大努力尝试访问主机，但防火墙和服务器配置可能会阻止请求，从而导致无法访问状态，而某些特定端口可能可以访问。如果可以获得特权，典型的实现将使用 ICMP ECHO REQUEST，否则它将尝试在目标主机的端口 7 (Echo) 上建立 TCP 连接。

# sql - 使用 JOIN 更新 SQL 块

> ID：13107444
> 
> 赞同：3
> 
> 时间：2012-10-28T08:37:47.493
> 
> 标签：sql, stored-procedures, sql-update

我的数据库中有 2 个表，一个包含有关客户端的数据（称为 Clients），另一个表包含 clientID、Guid、AddedTime 和 IsValid（称为 ClientsToUpdate）。

ClientID与clients表相关，Guid是唯一标识符，AddedTime是记录被添加到表中的时间，IsValid是这个ClientID是否更新的位指示。

我想要做的是更新他们的 ID 在 ClientsToUpdate 中的所有客户端，问题是，ClientsToUpdate 表包含超过 80,000 条记录，我遇到了死锁。

虽然我可以做的是一次更新 2000 个客户端，使用 while 循环或类似的东西。

我的存储过程如下所示：

```
UPDATE client SET LastLogin=GETDATE() 
FROM Clients client
JOIN ClientsToUpdate ctu ON client.ID = ctu.ClientID; 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T08:43:30.077

```
declare @done table (ClientID int primary key)
while 1=1
    begin

    update  top (2000) c
    set     lastlogin = getdate()
    output  deleted.id into @done
    from    Clients c
    join    ClientsToUpdate ctu
    on      c.id = ctu.ClientID
    where   not exists
            (
            select  *
            from    @done d
            where   d.ClientID = ctu.ClientID
            )

    if @@rowcount = 0
        break
    end 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/20a93/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:08:41.173

如果您遇到死锁，分块更新可能会减少错误（假设您仔细管理事务并提交块更新），但不会解决死锁起源。恕我直言，您应该调查锁定问题并找出死锁的原因

# vim - Vimscript 检查当前缓冲区是否有未保存的更改

> ID：13107453
> 
> 赞同：18
> 
> 时间：2012-10-28T08:39:26.773
> 
> 标签：vim

我目前已设置状态行，使其在插入模式下为橙色，否则为白色。如果文件有任何未保存的更改，当我回到正常模式时，我想让它变成另一种颜色，因为我经常在兔子洞里走一会儿，想知道为什么我的更改没有生效。小“[+]”对我的打击还不够；）

我找不到任何以“buf”开头的函数，但看起来像是脏的谓词。我假设一个存在，但被命名为别的东西。我希望会有类似的东西`bufdirty()`or `bufchanged()`。任何指针？:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-28T09:07:06.003

我认为你正在寻找

```
:echo &mod[ified] 
```

`1`如果修改，则返回，`0`如果未修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T09:28:37.837

我喜欢使用状态行颜色来指示缓冲区状态的想法。事实上，我已经编写了[StatusLineHighlight 插件](http://www.vim.org/scripts/script.php?script_id=3383)，它指示以下属性：已修改、只读、不可修改、特殊的非文件“scratch”（但不是您正在使用的插入模式；为此，我找到了 Vim 的模式指示在左下角就够了）。

# android - 如何在模拟器上安装电子邮件客户端

> ID：13107457
> 
> 赞同：1
> 
> 时间：2012-10-28T08:39:55.693
> 
> 标签：android, email, android-emulator, installation

我必须构建一个电子邮件发送程序，现在我想对其进行测试。但模拟器说“他们不是执行此操作的应用程序”。

那么如何在模拟器上安装 gmail 或其他一些电子邮件客户端。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T08:46:32.073

打开电子邮件应用程序，并使用它配置一个帐户。然后，您将能够发送电子邮件意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:16:50.950

使用“Google API”配置您的模拟器，而不仅仅是选择“Android”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-18T01:52:30.907

您需要在您的 gmail 帐户的登录和安全设置中启用“允许不太安全的应用程序：打开”，然后才能在 Android Emulator 中将 gmail 帐户用于标准电子邮件客户端

[![在此处输入图像描述](../Images/b40fa5897a775beebe3d9264677ceb11.png)](https://i.stack.imgur.com/r5QNf.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T14:40:58.610

使用浏览器或 Gmail 应用程序中的普通 Gmail 帐户，从设置中启用“安装不安全的应用程序”并转到“转发和 POP/IMAP”选项卡并设置“启用 IMAP 访问”，然后在 AVD 上使用虚拟设备上的 IMAP 帐户与您的通常的登录名和密码，但不要忘记，当无法将服务器设置为 m.google.com 时。为我工作。

# haskell - 将 Yesod 应用程序配置为 CGI

> ID：13107460
> 
> 赞同：6
> 
> 时间：2012-10-28T08:41:31.383
> 
> 标签：haskell, cgi, fastcgi, yesod

给定一个新搭建的 Yesod 应用程序，获得充当 CGI 程序的可执行文件所需的最小更改集是多少？包装程序是可以接受的。如果由 'cabal build' 构建的默认可执行文件是 CGI 程序，则必须设置哪些环境变量才能使其充当 CGI（默认情况下，它将绑定到端口并尝试在那里提供请求。）

对于 FastCGI 的类似答案也将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T10:47:15.817

使用以下内容更新您`app/main.hs`的：

```
import Prelude              (IO, (>>=))
import Yesod.Default.Config (fromArgs)
import Yesod.Default.Main   (defaultMain)
import Settings             (parseExtra)
import Application          (makeApplication)
import Network.Wai.Handler.CGI (run)

main :: IO ()
main = fromArgs parseExtra >>= makeApplication >>= run 
```

您需要`wai-extra`在 cabal 文件中添加依赖项。要改用 FastCGI，请替换`Network.Wai.Handler.CGI`为`Network.Wai.Handler.FastCGI`并添加`wai-handler-fastcgi`到依赖项列表。

# android - 如何接收来自特殊电话号码的短信？

> ID：13107461
> 
> 赞同：2
> 
> 时间：2012-10-28T08:41:45.643
> 
> 标签：android, android-intent, android-emulator, sms, broadcastreceiver

我成功地在android中编写了一个发送和接收短信。

我希望我的程序能够接收来自特殊号码（“+9856874236”）的短信。但是，如果 SMS 来自任何其他号码，它应该发送到手机的消息收件箱，而不是我的应用程序。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;

    public class SmsReceiver extends BroadcastReceiver {
        public String str = "";

        @Override
        public void onReceive(Context context, Intent intent) {

            Bundle bundle = intent.getExtras();
            Object messages[] = (Object[]) bundle.get("pdus");
            SmsMessage[] msgs = null;

            if (bundle != null)
            {

                Object[] pdus = (Object[]) bundle.get("pdus");
                SmsMessage smsMessage[] = new SmsMessage[messages.length];      
                String msg_from="";
                for (int n = 0; n < messages.length; n++) 
                {
                    smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]); 
                      msg_from += msgs[n].getOriginatingAddress();
                }

                String receivedMessage = smsMessage[0].getMessageBody().toString().toUpperCase();

                if(msg_from .equals("+989124236870"))  
                {
                for (int n = 0; n < messages.length; n++) 
                {

                    smsMessage[n] = SmsMessage.createFromPdu((byte[]) pdus[n]); 
                    str += "SMS from " + msgs[n].getOriginatingAddress();
                    str += " :";
                    //str += "sms az shomare makhsus";
                    str += msgs[n].getMessageBody().toString();

                    str += "\n";

               abortBroadcast();

               }

                Intent act = new Intent(context, MainActivity.class);
                act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                act.putExtra("message", str);
                context.startActivity(act);
            }

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:48:21.350

为什么要在 for 循环中附加 msg_from 参数？

```
msg_from += msgs[n].getOriginatingAddress(); 
```

不应该只是：

```
msg_from[n] = msgs[n].getOriginatingAddress(); 
```

基本上有一个 msg_from[n] 的数组，并将每条消息的每个原始地址放入其中。然后通过遍历 msg_from 数组来检查每条消息？

您可以在 for 循环中移动原点检查，如下所示：

```
for (int n = 0; n < messages.length; n++) {
           if(msg_from[n].equals("+9856874236")){  
                smsMessage[n] = SmsMessage.createFromPdu((byte[]) pdus[n]); 
                str += "SMS from " + msg_from[n];
                str += " :";
                //str += "sms az shomare makhsus";
                str += msgs[n].getMessageBody().toString();

                str += "\n";

                 abortBroadcast();
               }else{
               //Do something else 
               }
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:53:23.483

我也有这个问题。现在我使用这个代码并且它工作正常：

```
 `enter code here`  
         if ( extras != null ) {
        // get array data from SMS
        Object[] smsExtra = (Object[]) extras.get( "pdus" ); // "pdus" is the key

        for ( int i = 0; i < smsExtra.length; ++i ) {
            // get sms message
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);
            // get content and number
            String body = sms.getMessageBody();
            String address = sms.getOriginatingAddress();
            // create display message

            if( address.contains("5558")){

            messages += "SMS from " + address + " :\n";
            messages += body + "\n";

       // notify new arriving message
            Toast.makeText( context, messages, Toast.LENGTH_LONG ).show();

        this.abortBroadcast();

    }
    } 
```

并且不要忘记将此代码用于您的清单：

```
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />

 .....
<receiver android:name=".SmsReceiver" android:exported="true" >
<intent-filter android:priority="1">
<action android:name="android.provider.Telephony.SMS_RECEIVED" />

</intent-filter>
</receiver> 
```

该程序仅从 port="5558"（在模拟器中）接收并将其他 msg 存储在您的收件箱中。

是（09124236870）你自己的电话号码吗？！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:55:19.097

使用此示例并对其进行自定义：

```
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.IBinder;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SrvSmsListener extends Service {

    private BroadcastReceiver IncomingSMSReceiver = new BroadcastReceiver() {
        private static final String SMS_RECEIVED =
                "android.provider.Telephony.SMS_RECEIVED";

        @Override
        public void onReceive(Context _context, Intent _intent) {
            if (_intent.getAction().equals(SMS_RECEIVED)) {
                Bundle bundle = _intent.getExtras();
                if (bundle != null) {
                    Object[] pdus = (Object[]) bundle.get("pdus");

                    SmsMessage[] messages = new SmsMessage[pdus.length];
                    for (int i = 0; i < pdus.length; i++)
                        messages[i] = SmsMessage
                                .createFromPdu((byte[]) pdus[i]);
                    for (SmsMessage message : messages) {
                        String strPhoneNo = message.getOriginatingAddress();
                        String msg = message.getMessageBody();

                        if (msg.startsWith("my text"))
                        {
                            // this stops notifications to others
                            this.abortBroadcast();

                        }
                    }
                }
            }
        }
    };

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
        IntentFilter filter = new IntentFilter(SMS_RECEIVED);
        BroadcastReceiver receiver = IncomingSMSReceiver;
        registerReceiver(receiver, filter);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public void onDestroy() {
        if (IncomingSMSReceiver != null)
        {
            unregisterReceiver(IncomingSMSReceiver);
        }
    }
} 
```

# c# - 解析 JSONData 时出错

> ID：13107465
> 
> 赞同：0
> 
> 时间：2012-10-28T08:42:26.943
> 
> 标签：c#, json, json.net

我有这个 Json 数组

```
[{"Fname":"Axe","Lname":"Venture" },{"Fname":"dsa","Lname":"das"}] 
```

我正在使用 JSON.net 反序列化 Json 数组。我的班级如下

```
public class Cifo
    {
        public string Fname { get; set; }
        public string Lname { get; set; }
    } 
```

当只有 1 个 Json 数据，例如 {"Fname":"Axe","Lname":"Venture" } 时，json 数组将存储在一个名为 JSONData 的字符串中。我的代码不会返回任何错误。但是当我有超过 1 个像上面这样的 JSON 数组数据时。我会得到一个异常“无法将 JSON 数组反序列化为类型 'myClassName+Cifo'。”

我正在使用此代码反序列化`JsonConvert.DeserializeObject<Cifo>(JSONData)`

如何解析所有 json 数据并存储到一个对象中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:44:17.470

尝试反序列化到列表

```
 var list = JsonConvert.DeserializeObject<List<Cifo>>(JSONData) 
```

# android - 当从另一个活动回来时，android setOnItemClickListener 没有响应

> ID：13107467
> 
> 赞同：1
> 
> 时间：2012-10-28T08:43:08.687
> 
> 标签：android, listview, back

我的活动中有一个列表视图。我第一次单击 listview 项目时，它工作正常。当我按下返回按钮并返回此活动时，我无法再单击该项目。这个列表视图适用于 android2。当我用 android 4 测试时，会出现这个问题。

[我在这里](https://stackoverflow.com/questions/11184987/android-listview-items-not-responding-when-come-back-from-another-activity)发现了这种问题，我已经尝试了所有“descendentFocusabilty”的东西，但还没有解决。我知道我不应该发布几乎相同的问题。但我找不到任何答案在那里可以正常工作。

请帮我解决这个问题。

这是我的孩子1 活动

```
public class TabChild1 extends NavigationActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabchild1);

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);

     adapter.add("red");
     adapter.add("green");
     adapter.add("blue");
     ListView listView = (ListView) findViewById(R.id.listview);

        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                ListView listView = (ListView) parent;
                String item = (String) listView.getItemAtPosition(position);
                Intent intent = new Intent(TabChild1.this, TabChild2.class);
                int iNum = position;
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                goNextHistory("TabChild2", intent);   
            }
        });

}

@Override
public void onBackPressed() {
    super.onBackPressed();
} 
```

}

这是我的 NavigationActivity

```
public class NavigationActivity extends Activity {
public void goNextHistory(String id, Intent intent) {
    NavigationGroupActivity parent = ((NavigationGroupActivity) getParent());
    View view = parent.group.getLocalActivityManager()
            .startActivity(id,intent)
            .getDecorView();
    parent.group.replaceView(view);
}

@Override
public void onBackPressed() {
    NavigationGroupActivity parent = ((NavigationGroupActivity) getParent());
    parent.back();
} 
```

}

这是我的 NavigationGroupActivity

公共类 NavigationGroupActivity 扩展 ActivityGroup {

```
ArrayList<View> history; 
NavigationGroupActivity group;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    history = new ArrayList<View>();
    group = this;
}

public void changeView(View v) {
    history.remove(history.size() - 1);
    history.add(v);
    setContentView(v);
}

public void replaceView(View v) {
    history.add(v);
    setContentView(v);
}

public void back() {
    if(history.size() > 1) {
        history.remove(history.size() - 1);
        setContentView(history.get(history.size() - 1));
    } else {
        finish();
    }
}

@Override
public void onBackPressed() {
    group.back();
    return;
} 
```

}

和我的 child1 布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:58:25.840

我认为您必须在 TabChild1 类的 onBackPressed() 方法中使用***finish() 。***并在 NavigationActivity 类的 onBackPressed() 方法中注释***parent.back()行。***我认为这对你有用。

# sdk - Corona sdk - 在文本正文中显示图像

> ID：13107471
> 
> 赞同：1
> 
> 时间：2012-10-28T08:43:37.500
> 
> 标签：sdk, coronasdk

我正在使用 corona sdk 在 tableview 中创建项目列表，一旦选择了项目，然后我会显示该项目的简历，并且还想显示图像。

我可以做到这一点，但我怎样才能正确对齐文本正文中的图像并让文本像围绕图像流动？我正在使用 native.newText 来显示文本。

类似于在 a 内有一个右对齐的图像

HTML 中的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:19:58.893

您不能自动执行此操作，您需要检测图像尺寸（我建议使用 myImage.contentBounds ），然后根据需要将文本放在它附近。

在我的一个应用程序中，我们显示了一张图片，一些基本数据和一个详细描述，我所做的是将图片放置，然后将基本数据放在它的右侧，然后将详细描述放在两者下方。

# ruby-on-rails - 在 rails 中显示关联的记录

> ID：13107473
> 
> 赞同：1
> 
> 时间：2012-10-28T08:43:50.437
> 
> 标签：ruby-on-rails, activerecord, view, model

我有一个`User`,`List`和`Task`模型。

一个**任务** `belongs_to` *用户*和*列表*，一个*列表* `has_many` *任务*和`belongs_to` *用户*，以及一个*用户* `has_many` *列表*和`has_many` *任务*。

我有一部分我想在我的索引视图中显示的工作，只有一个我被挂断的混乱。

我能够在所有列表的索引视图中显示第一个创建的任务。问题是，为所有列表显示创建的第一个任务，即使列表与任务无关。

在列表索引视图中，我希望创建的第一个任务仅在与列表关联时才显示。

任务模型：

```
class Task < ActiveRecord::Base
  attr_accessible :completed, :description, :list_id, :user_id

  belongs_to :list
  belongs_to :user

  scope :completed, where(:completed => true)
  scope :incomplete, where(:completed => false)

  def self.most_recent
    first(:order => 'id ASC' ) # or whatever query you need to get the most recent
  end

end 
```

列表索引视图-

```
<div class="span12 offset2"> 
 <% @lists.each do |list| %> 
  <div class="well row span4">
    <div class="span3">
    </div>  
    <div class="span4">   
      <span class="lead">
        <%= link_to "#{list.name}", list_url(list) %>
      </span>
      <p>
        <%= list.description %>
      </p><hr>
      <div class="pull-right" id="gage-<%= list.id %>" style="width:170px; height:100px;"></div>
      <br>  
      <span class="offset1">
        <% if Task.most_recent %>
          <span class="pull-left"> <%= image_tag Task.most_recent.user.gravatar_url, :class => "gravatar_index" %></span>
        <% end %>  
      </span>
    </div>
  <% end %>
</div> 
```

我对 Rails 还是很陌生，但我知道我已经很接近了。我在这里俯瞰什么？*强调文本*

===========

# **编辑**

我已经测试了@Baldrick 的解决方案，现在似乎又遇到了另一个错误

我对所描述的解决方案的看法-

```
<% if Task.most_recent(list) %>
      <span class="pull-left"> <%= image_tag Task.most_recent.user.gravatar_url, :class => "gravatar_index" %></span>
<% end %> 
```

我现在收到错误 -

```
SQLite3::SQLException: no such column: tasks.list: SELECT  "tasks".* FROM "tasks"  WHERE "tasks"."list" = 4 ORDER BY id ASC LIMIT 1 
```

我一定没有正确理解，因为我在创建任务模型时创建了这样一个列

```
class CreateTasks < ActiveRecord::Migration
  def change
    create_table :tasks do |t|
      t.string :description
      t.boolean :completed, :default => false
      t.integer :list_id

      t.timestamps
    end
  end
end 
```

这是我需要添加索引才能进行查询的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:13:02.397

该方法为您提供*所有*`most_recent`任务的最后一个创建任务。您需要的是给定列表的最新任务。

 *你应该给列表一个参数

```
def self.most_recent(list)
  where(list_id: list.id).order('id ASC').first # or whatever query you need to get the most recent
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:08:08.703

您的`most_recent`方法返回 Task 的第一个任务。此方法中没有任何内容将任务绑定到任何列表。您需要将 list_id 传递给此方法以获取此列表的第一个任务，例如

```
def self.most_recent(list_id)
    first(:order => 'id ASC', :list_id => list_id) 
end 
```

编辑：其他解决方案不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:12:49.947

根据您的描述，您似乎*不*希望为每个列表显示该列表的最新任务。相反，您似乎希望*整个*最近的任务出现多次，每个列表恰好包含它一次。要实现这一点，您需要替换`if Task.most_recent`为`if list.tasks.include? Task.most_recent`.

- -编辑 - -

好的，如果您真的想为每个列表显示*该列表的*最新任务，那么您应该以完全不同的方式进行处理。在您的`List`课程中，您应该有以下方法：

```
def most_recent_task
    tasks.first(:order => 'id ASC') # or whatever
end 
```

然后在您看来，您将用 替换两次出现`Task.most_recent`的`list.most_recent_task`。如果您的列表总是至少有一项任务，那么您可以完全摆脱保护子句（即`if`）。

作为进一步的重构，您可能希望从视图中进行一些计算，并为您的列表索引创建“演示者”，这将只是每个单独列表的演示者数组。单个演示者应该是一个普通对象，其中包含您需要的有关列表的信息，预先计算：

*   姓名
*   网址
*   描述
*   最近任务用户的头像 url*

# ruby - 预期回报的 `#=>` 约定

> ID：13107492
> 
> 赞同：1
> 
> 时间：2012-10-28T08:48:09.837
> 
> 标签：ruby, coding-style, convention

这是`#=>`用于描述预期回报的 Ruby 约定。我意识到我自己使用`# =>`（带有一些空格或标签）。这只是一个约定，并没有正式的规范，所以想问一下Ruby程序员之间的约定是什么。是

1.  `#=>`唯一正确的方式或首选方式，
2.  `# =>`是首选，或
3.  两者几乎同样使用？

而且，是否有任何理由排除或偏爱一种形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:51:36.043

我不会说这是一个约定。至少，我还没有读到任何关于它的内容。我自己使用它只是因为我的编辑器 (TextMate) 在评估代码时有助于扩展这些标记。例如，如果我输入这一行：

```
2 + 3 # 
```

然后按TAB，它会`=>`在哈希字符后面插入。这条线变成了这样：

```
2 + 3 # => 
```

然后，如果我按下快捷方式，它将运行代码并在`# =>`标记后插入/更新相应行的值。

```
2 + 3 # => 5 
```

另外，我个人认为这`# =>`看起来比`#=>`.

# matlab - 缩放两个图像的值

> ID：13107496
> 
> 赞同：2
> 
> 时间：2012-10-28T08:49:35.467
> 
> 标签：matlab, image-processing

我需要缩放两个图像（imgA 和 imgB）的值。这让我陷入困境。两个图像大小相同。当imgA的值为0时，imgB的值为0.8。当 imgA 等于 20 时，标量 (imgB) 以抛物线方式上升到 1，然后当 imgA 等于 40 时下降到 0.8。

简单来说：

```
imgA   imgB
0      0.8
20     1
40     0.8 
```

那么我想知道的是如何在 Matlab 中编写代码来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:20:19.020

给定您的示例值，似乎描述 imgA 和 imgB 之间关系的函数是

```
 B = 1 - 0.2 * ( A/20 - 1 ) ^ 2 
```

您可以直接将其应用于您的矩阵。要找到所需的 imgB 值：

```
imgB = 1 - 0.2 * ( imgA/20 - 1) .^ 2; 
```

# jquery - 使用 AJAX 从另一个页面执行 Javascript

> ID：13107497
> 
> 赞同：0
> 
> 时间：2012-10-28T08:49:55.687
> 
> 标签：jquery, yahoo-api

我正在尝试使用 AJAX 从另一个页面获取该 div 中包含一些 Javascript 的特定 div，但由于某种原因，Javascript 无法加载......我只能看到 HTML。

我究竟做错了什么？这是我的代码：

```
$.ajax({ url: 'web.php', type: 'GET', datatype: 'html', success: 
    function (html) { 
        var data = $('#content',$(html)).html();
        YAHOO.plugin.Dispatcher.process($('#content').get(0), data);  
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:56:14.150

用这个

```
 $.ajax({ url: 'web.php', type: 'GET', datatype: 'html', success: 
     function (html) { 
        $("script").append(html);
         var data = $('#content',$(html)).html();
         YAHOO.plugin.Dispatcher.process($('#content').get(0), data);  
     } 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:10:51.633

如果您的 .js 未加载，则可能某处存在语法错误，您的浏览器将使用先前缓存的版本。我会回顾我最近的一些更改，看看我搞砸了什么——缺少括号、括号、分号等。

# java - Postgres 中的生成值

> ID：13107502
> 
> 赞同：10
> 
> 时间：2012-10-28T08:50:35.530
> 
> 标签：java, hibernate, postgresql, sequence

我的实体类映射如下：

```
@Entity
@Audited
@Table(name="messages_locale")
public class Locale {

    @Id
    @GeneratedValue
    @Getter @Setter //Project Lombok's annotations, equal to generated getter and setter method
    private int id;
        (...) 
```

我创建干净的新数据库和属性：

> <prop key="hibernate.hbm2ddl.auto" >创建</prop>

为什么在创建数据库后，我在我的 postgres 数据库中有一个序列？：

```
CREATE SEQUENCE hibernate_sequence
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 2
  CACHE 1;
ALTER TABLE hibernate_sequence
  OWNER TO postgres; 
```

我不想有一个序列，我只想自动递增自动生成的值..

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-02-13T08:56:58.577

我认为 Petar 接受的答案不正确，或者不再正确。Postgres 中的自增是通过`SERIAL`伪类型处理的，没错。但是，Petar 提供的映射将导致 Hibernate 5.1 生成以下 DDL：

```
CREATE SEQUENCE users_id_seq START 1 INCREMENT 50;

CREATE TABLE … (
    id INT8 NOT NULL,
    …
); 
```

这不是 using `SERIAL`，而是一个 Hibernate 托管序列。它不属于该表，并且未设置默认值。当然，DDL 生成是很多人在生产中不使用的特性（但很多人以生成的代码为模板）。

如果您手写 DDL 并实际使用`SERIAL`，那么 using`GenerationType.SEQUENCE`甚至可能与数据库行为发生冲突。使用 Postgres 的首选 ID 策略映射 Hibernate 的正确方法是使用`GenerationType.IDENTITY`. 顺便说一句，代码也更短且更具可读性：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
Long id; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-28T08:54:04.447

在 PostgreSQL 中，自动增量是使用`SERIAL`伪类型处理的。执行时使用此类型`CREATE TABLE`。

现在说到重点——这个`SERIAL`伪类型创建了一个序列。`PostgreSQL`使用创建的序列处理自动增量。该`id`列的默认值变为 - `nextval('your_sequence_name')`。

在`User`实体的休眠中：

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "users_seq_gen")
@SequenceGenerator(name = "users_seq_gen", sequenceName = "users_id_seq")
public Long getId() {
     return id;
} 
```

在这里阅读：

[http://www.postgresql.org/docs/8.4/static/datatype-numeric.html#DATATYPE-SERIAL](http://www.postgresql.org/docs/8.4/static/datatype-numeric.html#DATATYPE-SERIAL)

[http://www.neilconway.org/docs/sequences/](http://www.neilconway.org/docs/sequences/)

# php - 用户上传视频后使用 HandbrakeCLI

> ID：13107503
> 
> 赞同：-1
> 
> 时间：2012-10-28T08:50:41.520
> 
> 标签：php, encode

一旦用户上传了视频，我希望能够使用手刹 CLI 对视频进行编码。我不知道该怎么做，我只能猜测我能想到的是使用 php 的 exec() 命令并从那里执行程序。但这不会带来风险吗？

或者有没有其他方法可以做到这一点？我基本上需要将视频编码为具有基线 3 编码的网络可播放格式，以便它们在所有设备上通过 JWPlayer 播放。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:58:17.373

`exec()`只要您小心执行的操作，就不必不安全。

或者，一个更好的解决方案是使用生产者 - 消费者模型。每次上传视频时，将对其的引用添加到队列中。有一个监控队列的 CLI 脚本，只要队列有需要处理的视频，脚本就会进行编码。

您可以使用数据库，甚至只是一个目录作为队列。例如，将所有新视频上传到目录`unprocessed`。消费者脚本可以从那里获取视频，对其进行编码并将它们放在一个名为`processed`.

这使您可以控制应同时处理的视频数量（通过改变消费者的数量）。`exec()`用户上传不允许这样做，并且您可能会冒着使服务器瘫痪的风险。

编辑：

如果您打算使用多个消费者，我不建议使用目录即队列模型，因为您可能会遇到竞争情况。

# pdf - 在 UIWebView 中看不到 pdf（该应用程序已获得 Apple 批准）

> ID：13107506
> 
> 赞同：1
> 
> 时间：2012-10-28T08:51:36.137
> 
> 标签：pdf, webview, ios6

我的应用程序的功能之一是在 UIWebView 中呈现 PDF 文件（来自应用程序包）。

在我的 iPhone 上它工作正常，但我有一些报告说在其他设备上没有显示 PDF 文件。

可能是什么问题呢？这可能与这些设备上的 iOS 版本有关吗？

这就是我在应用程序中呈现文件的方式：

```
NSString *pdfPath = [[NSBundle mainBundle] pathForResource:self.fileName ofType:@".pdf"];
if (!pdfPath) {
    Helper* h = [[Helper alloc]init];
    pdfPath = [h filesinADocumentFolder:self.fileName];
}

self.pdfUrl = [NSURL fileURLWithPath:pdfPath];
[self.webView1 loadRequest:[NSURLRequest requestWithURL:pdfUrl]];
[self.webView1 setBackgroundColor:[UIColor clearColor]];
[self.webView1 setOpaque:NO]; 
```

# ruby-on-rails - 为 nil 调用 id

> ID：13107509
> 
> 赞同：1
> 
> 时间：2012-10-28T08:52:43.897
> 
> 标签：ruby-on-rails, mongodb, shapado

我正在尝试在我的 OS X 机器上安装 Shapado。最终我想在 Heroku 上安装它，所以如果有人有安装指南，请告诉我。

我相信依赖关系都可以，并且 mongodb 正在运行。运行时出现错误：

```
$rake bootstrap RAILS_ENV=development

rake aborted!
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id

Seans-MacBook-Pro:shapado sean$ rake bootstrap RAILS_ENV=development
/Users/sean/.rvm/gems/ruby-1.9.3-p194/gems/maruku-0.6.0/lib/maruku/input/parse_doc.rb:22:in `<top (required)>': iconv will be deprecated in the future, use String#encode instead.
Loaded
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/sean/Dropbox/rails/shapado/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/sean/Dropbox/rails/shapado/Rakefile:7)
Missing GeoIP data. Please run '/Users/sean/Dropbox/rails/shapado/script/update_geoip'
>> Setting up Twitter provider
>> Setting up Facebook provider
>> Setting up Identica provider
>> Setting up Github provider
>> Setting up LinkedIn provider
rake aborted!
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id

Tasks: TOP => bootstrap => setup:default_group
(See full trace by running task with --trace)
Seans-MacBook-Pro:shapado sean$ rake bootstrap RAILS_ENV=development
/Users/sean/.rvm/gems/ruby-1.9.3-p194/gems/maruku-0.6.0/lib/maruku/input/parse_doc.rb:22:in `<top (required)>': iconv will be deprecated in the future, use String#encode instead.
Loaded
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/sean/Dropbox/rails/shapado/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/sean/Dropbox/rails/shapado/Rakefile:7)
Missing GeoIP data. Please run '/Users/sean/Dropbox/rails/shapado/script/update_geoip'
>> Setting up Twitter provider
>> Setting up Facebook provider
>> Setting up Identica provider
>> Setting up Github provider
>> Setting up LinkedIn provider
rake aborted!
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

**编辑** rake 上 --trace 标志的输出

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil,  use object_id
/Users/sean/Dropbox/rails/shapado/app/models/group.rb:641:in `set_shapado_version' 
```

问题代码是这样的：

```
def set_shapado_version
  self.shapado_version_id = ShapadoVersion.where(:token => 'free').first.id
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T06:10:39.773

在 app/models/group.rb 更改

```
def set_shapado_version
  self.shapado_version_id = ShapadoVersion.where(:token => 'free').first.id
end 
```

到

```
def set_shapado_version
  self.shapado_version_id = ShapadoVersion.where(:token => 'free').first.try(:id)
end 
```

这是相关的合并请求：[https ://gitorious.org/shapado/shapado/merge_requests/18](https://gitorious.org/shapado/shapado/merge_requests/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T10:34:42.700

```
def set_shapado_version
  self.shapado_version_id = ShapadoVersion.where(:token => 'free').first.id
end 
```

你确定有一个 ShapadoVersion 其中 token = 'free' 吗？我认为 Rails 正在抱怨这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T11:17:21.027

使用这篇文章：[http](http://shapado.com/questions/rake-bootstrap-error-called-id-for-nil) ://shapado.com/questions/rake-bootstrap-error-called-id-for-nil 我通过执行以下 操作设法让它通过了**rake 引导：**

将 shapado.yml 中的第 13 行更改为**true**

```
is_shapadocom: true 
```

将以下内容添加到 config/payments.yml

```
secret: vtUQeOtUnYr7PGCLQ96Ul4zqpDUO4sOE 
```

添加了以下代码破解。原始行已被注释。可能不是最好的方法。

```
def self.reload!
  #return unless AppConfig.is_shapadocom
  unless AppConfig.is_shapadocom
    ShapadoVersion.new(token: "free", price: 0).save!
    return
  end
  .
  .
  . 
```

如果有人知道 Shapado，请查看我的个人资料并与我联系。我有兴趣分享经验，尤其是在推动 Heroku 方面。它看起来像一个不错的应用程序，但我找不到太多的文档方式。

# r - 如何使用 R 绘制散点图和直方图

> ID：13107510
> 
> 赞同：0
> 
> 时间：2012-10-28T08:49:48.343
> 
> 标签：r

我有一个关于最大风速（cm）的数据集，如下所示：

```
Year Jan Feb Mar Apr May June July Aug Sept Oct Nov Dec     
2011 4.5 5.6 5.0 5.4 5.0 5.0  5.2  5.3 4.8  5.4 5.4 3.8     
2010 4.6 5.0 5.8 5.0 5.2 4.5  4.4  4.3 4.9  5.2 5.2 4.6     
2009 4.5 5.3 4.3 3.9 4.7 5.0  4.8  4.7 4.9  5.6 4.9 4.1     
2008 3.8 1.9 5.6 4.7 4.7 4.3  5.9  4.9 4.9  5.6 5.2 4.4     
2007 4.6 4.6 4.6 5.6 4.2 3.6  2.5  2.5 2.5  3.3 5.6 1.5     
2006 4.3 4.8 5.0 5.2 4.7 4.6  3.2  3.4 3.6  3.9 5.9 4.4     
2005 2.7 4.3 5.7 4.7 4.6 5.0  5.6  5.0 4.9  5.9 5.6 1.8 
```

如何使用 R 编程创建每月最大风速散点图（x 轴为月份，y 轴为风速）以及每月最大风速直方图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:18:06.847

我建议阅读 R 的介绍，但这应该可以帮助您入门。

```
df <- read.table(text="Year Jan Feb Mar Apr May June July Aug Sept Oct Nov Dec     
2011 4.5 5.6 5.0 5.4 5.0 5.0  5.2  5.3 4.8  5.4 5.4 3.8     
2010 4.6 5.0 5.8 5.0 5.2 4.5  4.4  4.3 4.9  5.2 5.2 4.6     
2009 4.5 5.3 4.3 3.9 4.7 5.0  4.8  4.7 4.9  5.6 4.9 4.1     
2008 3.8 1.9 5.6 4.7 4.7 4.3  5.9  4.9 4.9  5.6 5.2 4.4     
2007 4.6 4.6 4.6 5.6 4.2 3.6  2.5  2.5 2.5  3.3 5.6 1.5     
2006 4.3 4.8 5.0 5.2 4.7 4.6  3.2  3.4 3.6  3.9 5.9 4.4     
2005 2.7 4.3 5.7 4.7 4.6 5.0  5.6  5.0 4.9  5.9 5.6 1.8",header=TRUE)
#look at ?read.csv to learn how to read your data from a CSV file

#transform data.frame into long format
library(reshape2)
df <- melt(df,id="Year",variable.name = "Month",value.name = "Speed")

#plot boxplots per month
plot(Speed~Month,data=df) 
```

![箱形图](../Images/3aa9353bed5d55c349763d32b3c86a05.png)

```
#histogram for January
hist(df$Speed[df$Month=="Jan"],main="Max wind speed in January",xlab="Speed") 
```

![直方图](../Images/71ce753f315defc804f79928225213f2.png)

```
#histogram for 2011
hist(df$Speed[df$Year==2011],main="Max wind speed in 2011",xlab="Speed") 
```

![直方图 2011](../Images/2d9d4bab9be03ae2dc4130ec07bdd254.png)

```
#create actual dates
df$Month2 <- factor(df$Month)
levels(df$Month2) <- 1:12
df <- transform(df,Time = as.Date(paste(Year,Month2,"15",sep="-"),'%Y-%m-%d'))
#plot Speed vs Time
plot(Speed~Time,data=df[order(df$Time),],type="l") 
```

![时间序列](../Images/83024d572ce948d47d5d05570426d470.png)

# android-4.0-ice-cream-sandwich - 如何在锁屏中使用 Renderscript

> ID：13107511
> 
> 赞同：1
> 
> 时间：2012-10-28T08:53:02.500
> 
> 标签：android-4.0-ice-cream-sandwich, live-wallpaper, lockscreen

这几天在研究动态壁纸，RenderscriptGL很好用，但是当我想在锁屏中使用它时，问题就开始了。虽然我修改了 frameworks\base\policy\Android.mk。添加$(call all-renderscript-files-under, src)，还是不能生成ScriptC文件。

我不知道问题出在哪里。有没有人遇到同样的问题并给我一些帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:26:54.310

添加如下行

```
LOCAL_SRC_FILES += core/java/com/android/internal/widget/waterwave/fall.rs 
```

在你的`$(ANDROID)/frameworks/base/Android.mk`

也许这可以解决您的问题。

# python - IDA python脚本，过载函数错误的参数数量错误

> ID：13107515
> 
> 赞同：0
> 
> 时间：2012-10-28T08:53:51.417
> 
> 标签：python, ida

我有一个为 IDA 编写的简单 python 脚本，但我不知道我做错了什么。

```
file = open("c:\\example.txt", "r")

for line in file:
    if line == "":
        pass
    else:
        addr =  line.split(None,1)

    if len(addr) < 2:
        pass
    else:
        address = ''.join(addr[0])
        if(idc.Jump(address)):
            sea = ScreenEA()
        else:
            print "There is a problem with the destenation address"

        counter = 0
        for l in addr[1]:
            PatchByte(sea+counter, ord(l))
            counter += 1

file.close() 
```

文件中的两条线`example.txt`：

```
0x1001b3a4               Kernel32.DLL
0x1001b3c8                 CreateToolhelp32Snapshot 
```

我得到的错误信息是：

![在此处输入图像描述](../Images/7bf924aee9a530941106a64be4936912.png)

对我来说很明显错误是`if(idc.Jump(address)):`在线的，我试图用它来调用它，`if(Jump(addr[0])):`但我得到了相同的错误消息。

我`Jump`在官方文档中看到了该函数，但似乎我正在将正确的参数传递给它。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:17:03.350

我认为问题在于您将字符串传递给`Jump()`. 因此，[对于文档](http://www.hex-rays.com/products/ida/support/idadoc/194.shtml)，它必须是`long`.

# javascript - 淘汰赛中的选项绑定问题

> ID：13107522
> 
> 赞同：2
> 
> 时间：2012-10-28T08:55:45.053
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js `options binding on select-list`。我创建了一个示例小提琴：

[http://jsbin.com/uzecaf/12/edit](http://jsbin.com/uzecaf/12/edit)

但问题是不是在 ui 上显示值文本，而是在 ui 上显示 [object object]。我做错了什么？

**编辑**

**JS代码**

```
function AuthorVM(){
  this.Name = ko.observable("bla-bla");
  this.books = ko.observableArray(
    [
      new BookVM('book-1', '1'),
      new BookVM('book-2', '2'),
      new BookVM('book-3', '3'),
      new BookVM('book-4', '4')
    ]
  );
}

function BookVM(name, id){
    this.Name = name;
    this.Id = id;
}

ko.applyBindings(new AuthorVM()); 
```

**标记**

```
<label data-bind="text: Name"></label> &nbsp;&nbsp;
<select data-bind="options: books, optionsText: Name">
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:31:37.593

您的`select`绑定错误，[optionsText 参数](http://knockoutjs.com/documentation/options-binding.html)是 a`string`所以您需要将属性名称作为字符串传递给那里。

您的绑定应如下所示：

```
<select data-bind="options: books, optionsText: 'Name'"> 
```

请参阅[演示](http://jsbin.com/akiqak/1/edit)。

# c# - 在c#中查找从数据集中选中的单选按钮

> ID：13107524
> 
> 赞同：0
> 
> 时间：2012-10-28T08:56:09.953
> 
> 标签：c#, dataset

我将选中的单选按钮编号保存在数据库中。如果列包含数字，则单选按钮显示已选中，如果列包含 null/empty，则单选按钮未选中。

```
int chk;
if(DBNull.Value.Equal(dataset.table["TableName"].Rows[i][9].ToSting()))

{ 

     chk = dsData.Tables["Option"].Rows[n][9].ToString();

     switch(chk)
     {
         case 1: radioButton1.Checked=true;
         break;
         .
         .
         .
         case 4: radioButton4.Checked=true;
         break;
     }
}

else

{
      radioButton1.Checked=false; . . .  radioButton4.Checked=false;
} 
```

但它总是给出空值。请给出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:00:47.300

在数据表中查看`empty string where you expect null`，其次您在检查的开关中传递字符串，但使用您可能需要的 int 值`case "1": instead of case 1:`

```
if(dataset.table["TableName"].Rows[i][9].ToSting() != "")
{     
     chk = dsData.Tables["Option"].Rows[n][9].ToString();    
     switch(chk)
     {
         case 1: radioButton1.Checked=true;
         break;
         .
         .
         .
         case 4: radioButton4.Checked=true;
         break;
     }
}    
else    
{
      radioButton1.Checked=false; . . .  radioButton4.Checked=false;
} 
```

# android - 如何设置在 Android 上将新值插入 SQLite 数据库的规则？

> ID：13107526
> 
> 赞同：1
> 
> 时间：2012-10-28T08:56:13.990
> 
> 标签：android

例如，我在数据库中插入了 2 行：第一行使用“1”_ID，第二行使用“2”_ID。如果我删除第二行并插入新行，它将再次具有“2”_ID。是否可以为总是增加_ID 的数据库设置规则？就我而言，一个新的将具有“3”_ID 而不是“2”。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:12:33.520

您可以在列`AUTOINCREMENT`上使用关键字。`_ID`这将保证自动选择的 ROWID 将增加。

从[SQLite 文档](http://www.sqlite.org/autoinc.html "SQLite 文档")：

> 请注意，“单调递增”并不意味着 ROWID 总是恰好递增 1。一种是通常的增量。但是，如果插入由于（例如）唯一性约束而失败，则失败插入尝试的 ROWID 可能不会在后续插入中重用，从而导致 ROWID 序列中的间隙。AUTOINCREMENT 保证自动选择的 ROWID 会增加，但不保证它们是连续的。

# javascript - 如何重置 SVG 转换（即将 SVG 对象恢复到其原始状态）？

> ID：13107528
> 
> 赞同：1
> 
> 时间：2012-10-28T08:56:31.727
> 
> 标签：javascript, svg, raphael

我正在构建一个应用程序，用户可以在其中无限次操作 svg 对象（例如图像），即旋转和缩放它们。我使用***Raphael.js***来处理 SVG。

如何在应用新转换之前将对象“重置”为其初始状态，以便新转换不会与前一个转换重叠？

Bellow 是一个测试（这是一个工作小提琴：**[jsfiddle.net/5TsW6/3/](http://jsfiddle.net/5TsW6/3/)**），我尝试在第二个视口中重置对象，然后再应用与第一个相同的转换，但我的尝试没有效果，因为两个视口中的结果是不同的，当它应该是相同的时：

```
<div id="wrapper1" style="width:250px; height:250px; outline:1px solid invert; float:left; margin-right:5px;"></div>
<div id="wrapper2" style="width:250px; height:250px; outline:1px solid invert; float:left;"></div>​ 
```

和脚本：

```
var img_width=100, img_height=75,
    canvas1, canvas2,
    image1, image2,
    w1, w2, // contours
    x,y,    // attributes "x" and "y"
    rx,ry;  // coordinates for the rotation pivot

// Create the canvases
canvas1 = new Raphael(document.getElementById("wrapper1"), 250, 250);  
canvas2 = new Raphael(document.getElementById("wrapper2"), 250, 250);

// Add the images to the canvases    
image1 = canvas1.image("http://picselbocs.com/projects/cakemyface/image-gallery/intermediate/3295094303_2b50e5fe03_z.jpg",0,0,img_width,img_height);
image2 = canvas2.image("http://picselbocs.com/projects/cakemyface/image-gallery/intermediate/3295094303_2b50e5fe03_z.jpg",0,0,img_width,img_height);

// Modify (x,y) 
x = 40;
y = 80;
image1.attr({"x":x,"y":y});
image2.attr({"x":x,"y":y});

// Add the objects' contours
canvas1.rect(x,y,img_width,img_height).attr({"stroke-width":"1px","stroke":"#00F"});
canvas2.rect(x,y,img_width,img_height).attr({"stroke-width":"1px","stroke":"#00F"});

// Compute the rotation pivot coordinates (the pivot should coincide with the object's center)
var scaling = 1.2;
rx = (x + img_width / 2) * scaling;
ry = (y + img_height / 2) * scaling;

// Apply transformations
image1.transform("S"+scaling+","+scaling+",0,0R45,"+rx+","+ry);
image2.transform("S"+scaling+","+scaling+",0,0R45,"+rx+","+ry);

// ----- Here starts second transformation ------ //
image2.transform("").transform("S"+scaling+","+scaling+",0,0r45,"+rx+","+ry);   // I've attempted to reset the transform string, but with no effect
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:26:50.943

重置正在工作。您在第二次转换中打错了，使用`r45`而不是`R45`，意思是“在应用之前考虑之前的转换”，因此有所不同。

# python - 在 Python 的 Bottle 中使用异步 POST 请求？

> ID：13107535
> 
> 赞同：2
> 
> 时间：2012-10-28T08:58:35.680
> 
> 标签：python, ajax, post, asynchronous, bottle

我正在尝试用 Python 创建一个回合制策略游戏（想想 Dominion）。核心游戏对象和方法是其中包含方法的 Python 类（只是典型的 OO 东西）。UI 是一个使用 Bottle 的 HTML 客户端。我的目标是完全异步的方法。因此，唯一页面的内容是从 Python 对象生成的，我希望从页面提交以更新这些对象，而无需通过瓶子网络服务器返回页面（为此使用 jQuery AJAX）。

目前，我正在开发一个基本的聊天系统，该系统检索玩家编写的消息并将它们存储为聊天对象（包含玩家和文本数据，仅此而已）。然后将这些对象写入使用每秒更新一次窗口的 AJAX 的聊天窗口。聊天行的 HTML 格式是非常`<div class="chatLine"><p>Player > </p><p>Text</p></div>`标准的东西。

这个基本图可能会让它更清晰一些，即使它不是真正的技术，更概念化：

* * *

## ![通讯周期图](../Images/51bb1b6c99b678999aa8f3be5954d34d.png)

* * *

我的 BottleUI.py（这是我运行以启动服务器的内容）：

```
from Populate import *  # Everything in Populate can now be directly called.
# NOTE: Populate allows access to "bottle" and "Main"

# This ensures the css file is available
@route('/theCSS')
def static():
    return static_file('main.css', root='static')

@route('/citadel/:game/:player')
def gamePage(game, player):
    if not (game.isdigit()) or not (player.isdigit()):
        return "Invalid page."
    game = int(game)
    player = int(player)
    if ((game >= 0) and (game < listOfGames.__len__())) and ((player >= 0) and (player < listOfGames[game].listOfPlayers.__len__())):

        return '''

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/theCSS">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!-- Sample AJAX script below, change as needed -->
    <script type="text/javascript">
        $(document).ready(function() {
            $('#chatForm').submit(function(e) {
                $.ajax({
                    type: 'POST',
                    url: "/AddToChat/''' + str(game) + '''/''' + str(player) + '''",
                    success: function() {
                        $('#chatInput').val("");
                    }
                });
                e.preventDefault();
            });
        });
        setInterval("updateChat();", 1000);
        $(function() {
            updateChat = function() {
                $('#chatText').load('/GenerateChat/''' + str(game) + '''');
            };
        });
    </script>
    <!-- Script to scroll to bottom of divs - needs to be changed into called function -->
    <script type="text/javascript">
        window.onload = function () {
             var objDiv = document.getElementById("gameFlow");
             objDiv.scrollTop = objDiv.scrollHeight;
             objDiv = document.getElementById("chatText");
             objDiv.scrollTop = objDiv.scrollHeight;
        };
    </script>
</head>
<body>
    <div id="container">
        <!-- Make this have background-image with the game number displaying programmatically -->
        <div id="banner">
            <h1>Citadel - Game ''' + str(game) + ''', Player ''' + str(player) + '''</h1>
        </div>
        <div id="main">
            <div id="leftPanel">
                <div id="playerTotals">
                    <h4>Player Totals:</h4>
                    <div id="totalsText">
                        <p>Money:</p>
                        <p>Population:</p>
                        <p>Troops:</p>
                        <p>Friend:</p>
                        <p>Enemy:</p>
                    </div>
                    <!-- Player totals go here (money, population/limit, troops, friend, enemy) -->
                    <div id="totalsNums">

                    </div>
                    <div class="clear"></div>
                </div>
                <div class="leftSegment">
                    <h4>Troop Cards:</h4>
                    <!-- Player's troopCards here -->
                    <select size=2>

                    </select>
                </div>
                <div class="leftSegment">
                    <h4>Territory Cards:</h4>
                    <!-- Player's territoryCards here -->
                    <select size=2>

                    </select>
                </div>
                <div class="leftSegment">
                    <h4>Region Cards:</h4>
                    <!-- Player's regionCards here -->
                    <select size=2>

                    </select>
                </div>
                <div class="leftSegment">
                    <h4>Resource Cards:</h4>
                    <!-- Player's resourceCards here -->
                    <select size=2>

                    </select>
                </div>
                <div class="leftSegment">
                    <h4>Diplomacy Cards:</h4>
                    <!-- Player's diplomacyCards here -->
                    <select size=2>

                    </select>
                </div>
                <div id="chatPane">
                    <form id="chatForm" method="POST" action="/AddToChat/''' + str(game) + '''/''' + str(player) + '''">
                        <textarea name="theChatText" id="chatInput"></textarea>
                        <input id="chatSubmit" class="button" type="submit" value="Send" />
                    </form>
                </div>
                <div class="clear"></div>
            </div>
            <div id="rightPanel">
                <!-- Game flow goes here (shows current player/phase, attacks with results, etc) -->
                <div id="gameFlow">

                </div>
                <!-- Player turn stuff goes here (changes depending on which phase, etc) -->
                <div id="playerActions">

                </div>
                <!-- Chat goes here (implement last) -->
                <div id="chatText">

                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</body>
</html>

    '''

    else:
        return "Invalid page."

run(host='localhost', port=8080) 
```

* * *

这是我的 Populate.py（这是我的 AJAX @route 方法存储的地方）：

```
 """
This module contains the bottle routs for AJAX population of the various parts
of the game page.
"""

from bottle import route, run, template, static_file, request
from Main import *  # Everything in Main can now be directly called.

globalBegin()

@route('/AddToChat/:game/:player', method='POST')
def AddToChat(game, player):
    theText = request.POST.get('theChatText', '').strip()
    game = int(game)
    player = int(player)
    listOfGames[game].listOfPlayers[player].addChat(theText)

@route('/GenerateChat/:game')
def GenerateChat(game):
    chatText = ""
    game = int(game)
    for line in listOfGames[game].chatList:
        chatText += '<div class="chatLine"><p>'
        chatText += line.player.name
        chatText += ' > </p><p>'
        chatText += line.text
        chatText += '</p></div>'
    return chatText 
```

* * *

问题是，“chatForm”表单没有按预期工作。`AddToChat()`似乎认为那`request.POST.get('theChatText', '')`是`NoneType`我尝试提交文本的时候。

所以，是的，我很困惑为什么要这样做。据我所见，`'theChatText'`应该是 POST 字典中的有效键。

我还要声明我所有的核心游戏逻辑都有效（尽管很明显这不是问题所在）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:52:08.713

原始的jQuery函数：

```
$(document).ready(function() {
    $('#chatForm').submit(function(e) {
        $.ajax({
            type: 'POST',
            url: "/AddToChat/''' + str(game) + '''/''' + str(player) + '''",
            success: function() {
                $('#chatInput').val("");
            }
        });
        e.preventDefault();
    });
}); 
```

`data: $(this).serialize(),`需要添加，如下所示：

```
$(document).ready(function() {
    $('#chatForm').submit(function(e) {
        $.ajax({
            type: 'POST',
            url: "/AddToChat/''' + str(game) + '''/''' + str(player) + '''",
            data: $(this).serialize(),
            success: function() {
                $('#chatInput').val("");
            }
        });
        e.preventDefault();
    });
}); 
```

否则服务器（或者在这种情况下是 Bottle）将无法读取提交的表单。

# jquery - jQuery 处理程序错误不是函数

> ID：13107536
> 
> 赞同：7
> 
> 时间：2012-10-28T08:58:39.653
> 
> 标签：jquery, jquery-plugins

我正在使用 jquery ajax [fileupload](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)。该文件已正确上传，但我收到类似错误

```
TypeError: jQuery.handleError is not a function
[Break On This Error]   

jQuery.handleError(s, xml, status, e); 
```

使用 jQuery 版本 1.7.2，代码是

```
jQuery.ajaxFileUpload
        (
            {
                url:'<?php echo $currenturl.'&fileupload=enable';?>',
                secureuri:false,
                fileElementId:'fileToUpload',
                dataType: 'json',
                data:{'image_desc':image_desc,'gallery_id':curr_time_stamp},
                success: function (data, status)
                {   

                     if(typeof(data.error) != 'undefined')
                    {
                        if(data.error != '')
                        {
                            alert(data.error);
                        }else
                        {
                            alert(data.msg);
                            showprofilepicture();
                        }
                    }
                }

            }
        ) 
```

函数 showprofilepicture() 也没有执行。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-29T04:31:27.517

jQuery.handleError 在 1.5 中的 jQuery 版本之后被删除，您需要编写一个自定义错误处理函数来解决这个问题

```
jQuery.extend({
    handleError: function( s, xhr, status, e ) {
        // If a local callback was specified, fire it
        if ( s.error )
            s.error( xhr, status, e );
        // If we have some XML response text (e.g. from an AJAX call) then log it in the console
        else if(xhr.responseText)
            console.log(xhr.responseText);
    }
}); 
```

参考[博客](http://www.johnmain.co.uk/blog/2012/06/14/jquery-handleerror-is-not-a-function-issues/)。感谢 John Main 提供的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:00:02.897

```
 if(typeof(data.error) != 'undefined')
            {
                if(data.error != '')
                {
                    alert(data.error);
                }else
                {
                    alert(data.msg);
                    showprofilepicture();
                }
            } 
```

应该

```
jQuery.ajaxFileUpload({
            url:'<?php echo $currenturl."&fileupload=enable";?>',
            secureuri:false,
            fileElementId:'fileToUpload',
            dataType: 'json',
            data:{'image_desc':image_desc,'gallery_id':curr_time_stamp},
            success: function (data, status)
            {   

                 if(typeof(data.error) != 'undefined')
                {
                    if(data.error != '')
                    {
                        alert(data.error);
                    }
                }else
                    {
                        alert(data.msg);
                        showprofilepicture();
                    }
            }

        }
    ) 
```

# django - 简单的应用程序将值从 django 视图传递到 javascript

> ID：13107543
> 
> 赞同：0
> 
> 时间：2012-10-28T09:00:03.477
> 
> 标签：django, django-views

我已经 2 天了，我试图弄清楚如何做到这一点。我是新手，请尽可能详细的解释。

我在views.py中这样做

```
dict1 = simplejson.dumps(dict1)
return render_to_response('main_page.html', {
                    'js_testsuite':testsuite_dict,
                    'js_testset':js_testset,
                    'dict1':dict1}) 
```

在 main_page.html

```
{% if js_testsuite %}               
<select id="testsuites" name="testsuite" onchange="setOptions(document.selection.testsuite.selectedIndex);">
    {% for key, value in js_testsuite.items %}
            <option value={{ value }} name="testsuite">{{ key }}</option>
    {% endfor %}
</select>
{% endif %} 
```

在包含函数 setOptions(value) 的 setoptions.js 中，我将选择框的选定索引传递给该函数，并且使用该值我必须设置第二个选择框，并且该选择框的数据必须来自上面给出的views.py。另外，我试着做

```
var value_from_django = {{ dict1 }}; 
```

我还缺少什么其他东西。您能否对此提供详细的解释。我已经尝试了 2 天。

*   有没有一种方法可以将值从 django 视图直接绕过 django 模板传递给 javascript？
*   我可以将 django 视图中的信息传递给 html 模板，然后再传递给 javascript 吗？

我指的 javascript 是一个简单的 javascript 而不是 jquery。

谢谢你的支持，

维奈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:36:28.500

您不能绕过模板将值传递给 javascript，除非您使用 ajax 调用来启动单独的请求，或者除非您执行一些非常不寻常的操作，例如将数据嵌入响应标头中（实际上不要这样做，这不是响应标头是给！）。响应，包括标题和正文（正文是模板生成的部分）是您的应用程序提供给客户端的信息的总和，因此除非您生成额外的请求并使用 ajax 获取额外的响应，你别无选择。

如果您不想这样做，那么通过模板将信息传递给 javascript 的选项基本上如下：

*   使用内联标记，通过模板系统动态创建格式正确的 javascript。您拥有的示例行`var value_from_django = {{ dict1 }};`基本上就是我在这里谈论的内容，除了我不确定您是否可以像这样将 dict 从 django 传递到 javascript，因为模板中 dict 的 django 文本输出不太可能是完全正确的 javascript 变量声明格式。所以，相反，你可以...
*   将您的数据转换为 JSON 并将其放入您的模板中，然后使用 javascript 进行处理。（这通常通过 ajax 调用来完成，但没有什么能阻止您将 JSON 数据直接注入初始模板。）
*   或者用您想要的数据填充您的 HTML，然后使用 javascript 定位包含数据的 HTML 标记并解析数据。

如果您尝试传递整数等简单变量，则使用第一个或第三个选项可能最容易。如果您尝试传递更复杂的数据结构，例如字典，则使用 JSON 可能会更好（这就是它的用途！）

我想为您提供更详细和具体的说明，但为此您需要发布更多详细信息，说明您当前的方法到底出了什么问题以及您想要的功能是什么。

顺便说一句：如果在此页面上包含 jquery 并使用它而不是尝试使用基本的 javascript，那么您应该这样做。它会让你的生活变得更加轻松。

# algorithm - 如何在图中找到哈密顿循环

> ID：13107545
> 
> 赞同：3
> 
> 时间：2012-10-28T09:00:42.697
> 
> 标签：algorithm, graph

我正在尝试解决哈密顿循环问题。我能够找到包含所有顶点的路径，但无法完成循环。

有人可以为我提供一个算法来找到循环吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-28T09:24:57.437

确定图是否具有[哈密顿循环是一个 NP 完全问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)。这意味着我们可以**检查**给定路径是否是多项式时间内的哈密顿循环，但我们不知道任何能够**找到**它的多项式时间算法。

唯一可以用来找到哈密顿循环的算法是**指数时间算法**。他们之中有一些是

*   蛮力搜索
*   动态规划
*   [您可以在此处](http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms)找到其他指数但速度更快的算法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:04:09.873

这是计算机科学中最基本的问题之一，有很多解决方案取决于您想要什么：从这里开始[http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms](http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms)

还有一些相关的答案： [here](https://stackoverflow.com/questions/6038367/gcj-hamiltonian-cycles) 和[here](https://stackoverflow.com/questions/1387523/how-can-i-find-the-number-of-hamiltonian-cycles-in-a-complete-undirected-graph)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T09:07:09.263

我希望我找到的这个下面的链接能帮助你清楚地解释...... [http://www.geeksforgeeks.org/archives/19092](http://www.geeksforgeeks.org/archives/19092)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T10:46:59.700

如果可能，请使用 SAT 求解器。它们没有 Wikipedia 文章中算法的良好理论时间限制，但在实践中，它们通常可以惊人地快速解决它们。

# windows - 当我在同一系统中使用 Ubuntu/Windows 时，如何配置 Skype 以保持相同的历史记录位置？

> ID：13107548
> 
> 赞同：2
> 
> 时间：2012-10-28T09:01:01.507
> 
> 标签：windows, ubuntu, skype

我在我的系统中安装了双操作系统（`Ubuntu/Windows`）。如果我需要查看`skype`使用 Windows 时制作的一些对话历史记录，我需要重新启动系统以移至 Windows 并查看相同的内容。`ubuntu/windows`当我使用任何操作系统时，我能否拥有相同的历史位置“.skpye” ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T12:34:35.130

我目前将这些文件存储在一个目录中。还没有找到在 windows 和 ubuntu 中使用它的直接方法......但是这些文件可以随时供我们参考，因为任何编辑器都可以打开这些平面文件......

# jquery-animate - 动画切换仅以一种方式唤醒

> ID：13107549
> 
> 赞同：0
> 
> 时间：2012-10-28T09:01:05.797
> 
> 标签：jquery-animate, toggle

我要做的是打开菜单 1，显示“点击我开始”。菜单 2，当前显示“这是菜单 2”，仅用于构建目的，已隐藏。然后，在第一次单击时，菜单 1 隐藏并显示菜单 2，然后在第二次单击时切换回来。问题是一旦菜单 2 显示并且菜单 1 被隐藏，它就不会切换回来。

```
<div id="nav" class="nav">
<div id="whiteboardtext1" class="whiteboardtext1"><p>Click here to start</p></div>
<div id="whiteboardtext2" class="whiteboardtext2"><p>this is menu number 2</p></div>
</div>​

.nav{
    width:700px;
    float:left;

}

.whiteboardtext1{
    position:absolute;
    margin-top:110px;
    margin-left:215px;
    width:300px;
    height:100px;
    font-size:30px;
    font-family:whiteboard;
    text-align:center;
    border:1px solid #fff;
    cursor:pointer;
}

.whiteboardtext2{
    z-index:1;
    position:absolute;
    margin-top:50px;
    margin-left:50px;
    width:650px;
    height:350px;
    font-size:30px;
    cursor:pointer;
    font-size:30px;
    font-family:whiteboard;
    text-align:center;
    border:1px solid #fff;
    cursor:pointer;
}

​$(document).ready(function(){
$('#whiteboardtext2').hide();
$('#whiteboardtext1').toggle(
function() {
$('#whiteboardtext1').stop().animate({

                        'opasity':'0'

                        }, 'fast');
$('#whiteboardtext2').stop().animate({

                        'opasity':'1'

                        }, 'fast');    
$('#whiteboardtext1').fadeOut();
$('#whiteboardtext2').fadeIn();
},
function() {
$('#whiteboardtext1').stop().animate({

                        'opasity':'1'

                        }, 'fast');
$('#whiteboardtext2').stop().animate({

                        'opasity':'0'

                        }, 'fast');    
$('#whiteboardtext2').fadeOut();
$('#whiteboardtext1').fadeIn();
})
}); 
```

​</p>

我很确定代码是正确的，但我无法让它工作。

如果有人可以提供帮助，我将不胜感激。

预先感谢

我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:42:54.373

如果我理解正确 - [http://jsfiddle.net/M8Tgx/](http://jsfiddle.net/M8Tgx/)

我更改了默认`.whiteboardtext2`添加的CSS 规则。`display:none;`

我将您的 JavaScript 重写为：

```
$(document).ready(function(){
    $('#whiteboardtext1').click(function(){
        $('#whiteboardtext1').fadeOut();
        $('#whiteboardtext2').fadeIn();
    });
    $('#whiteboardtext2').click(function(){
        $('#whiteboardtext1').fadeIn();
        $('#whiteboardtext2').fadeOut();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:19:12.980

您的代码不正确，因为您正在应用切换`#whiteboardtext1`元素，但是当它第一次调用时，它会隐藏并`#whiteboardtext2`显示，并且您会对其应用任何事件，因此它无法按预期工作。并且`opacity`是正确的 css 属性。

你可以试试这个工作

```
$(document).ready(function(){

    $('#whiteboardtext2').hide();
    $('#whiteboardtext1').show();

    $('.nav').on('click', 'div', function() {
        var _this =$(this);
        _this.stop().animate({
                       'opacity':'0'
                    }, 'fast', function(){_this.hide();})

        _this.siblings().stop().animate({
                       'opacity':'1'
                    }, 'fast').show();    
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:19:13.913

这是因为`toggle`处理程序绑定到`#whiteboardtext1`元素。每当`#whiteboardtext1`单击时，一个文本将淡出，另一个将淡入，但`#whiteboardtext2`没有单击处理程序，因此单击它没有效果。

此外，`opasity`它不是一个有效的 CSS 属性，因此对其进行动画处理除了延迟后续动画外没有任何效果。假设您想淡入/淡出文本，而不是延迟的突然变化。

用这个：

```
var $text1=$('#whiteboardtext1');
var $text2=$('#whiteboardtext2');

$text1.click(function(){
   $text1.stop().fadeOut("fast");
   $text2.stop().fadeIn("fast");
}

$text2.click(function(){
   $text2.stop().fadeOut("fast");
   $text1.stop().fadeIn("fast");
} 
```

# mysql - 启动tomcat时Sonar SQLException

> ID：13107550
> 
> 赞同：0
> 
> 时间：2012-10-28T09:01:20.210
> 
> 标签：mysql, tomcat, sonarqube

我一直在尝试安装新版本的 Sonar，但是在此之后没有工作（由于数据库迁移的 table_lock 错误）我已经参考了原始版本 2.11。现在，当我启动 tomcat 时，我得到了这个异常（附加）。我一直在更改 my.cnf 并且某些内容可能已被重置。

在 catalina.out 日志中，我收到此错误：

```
 ... 42 common frames omitted
Caused by: java.sql.SQLException: Access denied for user 'sonar'@'localhost' (using       password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075) [mysql-connector-java-5.1.13.jar:na]
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566) [mysql-connector-java-5.1.13.jar:na]
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498) [mysql-connector-java-5.1.13.jar:na]
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919) [mysql-connector-java-5.1.13.jar:na]
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4004) [mysql-connector-java-5.1.13.jar:na] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:55:37.133

看起来您的声纳数据库不再授予声纳用户访问权限。要修复它，请在命令提示符下键入“mysql”并执行以下操作：

```
mysql> GRANT ALL ON your_sonar_database TO 'sonar@localhost' IDENTIFIED BY 'password_for_sonar_user';
mysql> FLUSH PRIVILEGES;
mysql> exit 
```

然后重新启动声纳服务器，你应该很好。

# c# - C# HttpListener 作为 Windows 客户端上的 exe - 它会“听到”服务器推送吗？

> ID：13107551
> 
> 赞同：2
> 
> 时间：2012-10-28T09:01:20.917
> 
> 标签：c#, asynchronous, httplistener

我想编写一个“侦听”服务器推送的应用程序.. 即服务器可以广播.. 我想通过一个开放的 Web 请求来执行此操作，该请求包含一个包含数据库值并返回数据库值的 php 页面。 . 这样如果数据库发生变化.. 值发生变化，这意味着 C# 应用程序知道触发某种类型的启动（在我的情况下，它是一个“刷新”请求）99.99% 的这项工作是通过这个刷新请求完成的。我只需要知道..如何从服务器实现“触发器”或“事件”...这个（我知道）的标准方法是轮询 x 秒，但我知道适当的事件驱动架构非常好..

请记住，这与 IIS 无关……这是一个需要“侦听”Web 服务器的 Windows 客户端 C# exe。有没有人们知道的好的代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:09:16.610

HTTP 是一种请求/响应协议——没有“推送”。常见的历史解决方法是频繁轮询和长轮询，但现在 web-sockets 是另一种选择。您可以使用来自客户端应用程序的 Web 套接字：在 Windows 8 / Server 8 上的 .net 4.5 中，框架中有一个内置客户端，但根据规范中的原始 TCP 编写一个客户端并不难（或者只是看看对于现有的客户端库）。Web-sockets 支持双向通信，因此服务器可以自发地向客户端广播。非常适合及时更新。

当然，您还需要一个 web-socket 服务器实现，但这适用于大多数平台和工具集。

# java - 如何将视图设置为看起来像 ListView

> ID：13107557
> 
> 赞同：0
> 
> 时间：2012-10-28T09:02:21.853
> 
> 标签：java, android, listview, styles

> **可能重复：**
> [获取 Listview 默认单击颜色，具体取决于设备](https://stackoverflow.com/questions/3817662/getting-the-listview-default-clicked-color-depending-on-the-device)

我想设置一个视图的样式，使其表现得像一个 ListView。这意味着当我单击它时，背景颜色会发生变化。我不能通过设置自定义颜色来做到这一点，因为每个设备对此组件都有不同的样式。有什么想法我该怎么做？我可以应用任何系统样式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:07:38.483

```
setBackground(res.getDrawable(android.R.drawable.list_selector_background)); 
```

# facebook-comments - Facebook 评论 - 在等待时加载图片

> ID：13107560
> 
> 赞同：0
> 
> 时间：2012-10-28T09:03:52.757
> 
> 标签：facebook-comments

我正在使用 Facebook 评论插件，用于一个互联网较差的地区的本地旅游网站。当网络速度很慢时，评论插件通常需要永远或根本不加载。当它不加载时，它只是空白，而不是使页面看起来很奇怪。我希望用户知道那里应该有内容。

关于在等待 Facebook 评论插件加载时如何显示 LOADING 图形的任何想法？然后也许如果它在 10 或 15 秒后没有返回，它会在该空间返回一条错误消息。

我认为一种可能性可能在于 Facebook 返回的#Comments 值。也许可以加载图形，直到返回该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:29:27.560

在其他地方找到了解决方案 - 也许它会帮助其他有类似问题的人：

只需将此片段替换为您希望计数出现的当前片段，
将 gif 图像放在与 html 文件相同的文件夹中。或者将 src="" 中的路径更改为服务器上的正确路径。当来自 facebook 的评论数量更新时，您应该会看到加载动画。

# javascript - 使用 jquery 将表单数据保存到本地 json 文件中

> ID：13107567
> 
> 赞同：4
> 
> 时间：2012-10-28T09:05:42.350
> 
> 标签：javascript, json, forms, jquery

我有一个带有一些输入字段的基本表单。我想在提交表单时将表单数据保存到 json 文件中。json文件中保存的数据格式应该是这样的。

```
[
    {"title":"some text","description":"some text","info":"some text","username":"some name"},
    {"title":"some text","description":"some text","info":"some text","username":"some name"},
    {"title":"some text","description":"some text","info":"some text","username":"some name"}
] 
```

我尝试使用此代码执行此操作，但没有数据保存在我的“story.json 文件”中

```
$('form').submit(function() {
    $.ajax({
       type: 'POST', 
       dataType: 'json', 
       url: 'story.json', 
       data: $(this).serialize(), 
       success: function(data) { 
           alert(data.message); 
       },
       failure: function (data) {
           alert('Please try again');
       }
    });
 }); 
```

我想将此表单数据保存在我的本地文件中。请帮助我找到正确的方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:09:03.243

您需要将数据发布到一个简单的 php 文件...

就像`url: 'story.php'` 在那个php文件中创建一个'story.json'使用`fopen`并存储那个json

编辑：如果你想使用`serialize()`而不是使用这样的东西

```
data:{'mydata':$(this).serialize()} 
```

并在 php 文件中

```
parse_str($_POST['mydata'],$newarray) ;

echo json_encode($newarray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:14:56.077

JavaScript 不能保存到文件，除非它是 FireFox 插件。

您所做的是发布一个表单（将其发送到网络服务器），然后让服务器端脚本处理它。

序列化不会将表单值转换为 JSON 字符串：

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

当您使用 $.post 时，您必须在 $('form').submit(function() 中返回 false ，否则浏览器将为您提交表单。

提交表单是当您单击一个按钮并且整个页面变白片刻然后您获得一个新页面时。

Ajax ($.post, $.get, $.getJson ...) 是指您在不刷新页面的情况下向服务器发送信息。谷歌地图就是一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:12:33.537

在表单 jQuery 对象上调用 serialize 方法不会返回其数据的 JSON 表示。它返回其数据的查询字符串表示。如上所述，您将需要使用服务器端脚本来解释（和操作）发送的数据并将其作为 JSON 存储在文件中。

# highcharts - highcharts 如何“剪切”某个日期时间段

> ID：13107568
> 
> 赞同：0
> 
> 时间：2012-10-28T09:05:56.803
> 
> 标签：highcharts

我正在绘制股票利润图表。我在证券交易所交易时间收集数据。在几天的时间里，我只想**在**交易时间内显示图表

![在此处输入图像描述](../Images/9c5a3be4bbcda7cc2b077a1bb25d7226.png)

没有交易之间的数据，但由于周末和交易时间之后，您可以清楚地看到所需范围内的图表。

js代码是：

```
$.each(data.profits, function (index, value)
  {
   if (value.y != ""){
      profits.push([(new Date(value.x)).getTime(), parseFloat(value.y)]);
   }
  }); 
```

其中 `value.x`- 以毫秒为单位的 unix 时间戳和`value.y`- 利润

是否有设置让 highcharts 忽略时间范围，例如：

```
xAxis:
   {
      dontdisplay: weekends and after trades hour!
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:02:26.393

在 Highcharts 中没有这样的选项，但您可以在代码中忽略周末。

例如：

```
$.each(data.profits, function (index, value) {
    var date = new Date(value.x);
    var dayOfWeek = date.getDay(); // Sunday is 0, Monday is 1, and so on.
    var hours = date.getHours(); // From 0 to 23.

    if (value.y != "" && dayOfWeek != 0 && dayOfWeek != 6 && hours > 7 && hours < 19) {
        profits.push([date.getTime(), parseFloat(value.y)]);
    }
}); 
```

因此，您只会获得在周一至周五 8:00 至 18:00 之间收集的积分。

# android-listview - 在android中刷新Listview

> ID：13107569
> 
> 赞同：0
> 
> 时间：2012-10-28T09:06:18.910
> 
> 标签：android-listview

我正在尝试在我的 sqllite 数据库更改时（删除或更新查询时）刷新我的列表视图。查询本身工作得很好，但它不会更新列表视图布局，只有当我退出活动并租用它时liseview正在改变。

我尝试了以下方法：

1.  notifyDataSetChanged()
2.  重新查询（）

活动的代码是：

```
public class ShowListActivity extends ListActivity {

    private ItemsDataSource itemsDataSource;
    private String source[] = new String[] {MySQLiteHelper.KEY_NAME, MySQLiteHelper.KEY_QUANTITY, MySQLiteHelper.KEY_CHECKED};
    private int dest[] = new int[] {R.id.itemTitle, R.id.itemQuantity, R.id.itemCheck};

    public void goBackMethod(View view) {
        Intent intent = new Intent(this, MainScreen.class);
        startActivity(intent);  
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            setContentView(R.layout.activity_show_list);
        } catch (Exception e) {
            e.getMessage();
        }

        ApplicationController applicationController = (ApplicationController)getApplicationContext();
        itemsDataSource = applicationController.itemsDataSource;

        final Cursor mCursor = itemsDataSource.getAllItems();
        startManagingCursor(mCursor);

        CustomCursorAdapter adapter = new CustomCursorAdapter(this, mCursor);
        adapter.notifyDataSetChanged();
        setListAdapter(adapter);

      ListView listView = getListView();

      listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
                selectAction(id);
            }
        });
    }

    private void selectAction(final long position) {
        Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("בחר פעולה");
        builder
                .setMessage("בחר בפעולה שברצונך לבצע:");
        builder.setPositiveButton("עדכן פריט קניה",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                       //do update
                    }
                });

        builder.setNeutralButton("מחק פריט קניה",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                         itemsDataSource.deleteItem(position);
                         Toast toast = Toast.makeText(getBaseContext(), "הפריט הנבחר נמחק בהצלחה", Toast.LENGTH_SHORT);
                         toast.show();               
                    }
                });

        builder.setNegativeButton("חזור לרשימת הקניות",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();

                    }
                });
        AlertDialog alertDialog = builder.create();
        alertDialog.show();       
    }
} 
```

customadapter的代码是：

```
public class CustomCursorAdapter extends CursorAdapter implements Adapter {
private Cursor mCursor;
private Context mContext;
private final LayoutInflater mInflater;

public CustomCursorAdapter(Context context, Cursor c) {
    super(context, c);
    mInflater=LayoutInflater.from(context);
    mContext=context;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {

    TextView itemTitle= (TextView)view.findViewById(R.id.itemTitle);
    itemTitle.setText(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)));

    TextView itemQuantity = (TextView)view.findViewById(R.id.itemQuantity);
    itemQuantity.setText(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_QUANTITY)));

    CheckBox itemCheck = (CheckBox) view.findViewById(R.id.itemCheck);
    itemCheck.setChecked(cursor.getInt(cursor.getColumnIndex(MySQLiteHelper.KEY_CHECKED))==1);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final View view=mInflater.inflate(R.layout.listview_item_row, parent, false);

    TextView itemTitle= (TextView)view.findViewById(R.id.itemTitle);
    itemTitle.setText(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)));

    TextView itemQuantity = (TextView)view.findViewById(R.id.itemQuantity);
    itemQuantity.setText(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_QUANTITY)));

    CheckBox itemCheck = (CheckBox) view.findViewById(R.id.itemCheck);
    itemCheck.setChecked(cursor.getInt(cursor.getColumnIndex(MySQLiteHelper.KEY_CHECKED))==1);

    return view;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:24:51.720

在您的代码中，您尚未添加适配器类。我确信您将从数组列表中添加列表视图中的数据。

因此，在通过向列表视图添加或删除数据来更新列表视图时，首先从数组列表中添加或删除数据，然后调用如下

```
listView.invalidateViews();
then call your set Adapter method 
```

# wpf - CustomControl Wpf 中的项目

> ID：13107573
> 
> 赞同：2
> 
> 时间：2012-10-28T09:07:13.527
> 
> 标签：wpf, custom-controls, items

**我有一个自定义控件**

* * *

```
 static CustomControl1()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomControl1), new     FrameworkPropertyMetadata(typeof(CustomControl1)));
    }

    public List<string> MyProperty
    {
        get { return (List<string>)GetValue(MyPropertyProperty); }
        set { SetValue(MyPropertyProperty, value); }
    }
    public static readonly DependencyProperty MyPropertyProperty =
        DependencyProperty.Register("MyProperty", typeof(List<string>), 
                                                   typeof(CustomControl1), 
                                                   new UIPropertyMetadata(new List<string>())); 
```

* * *

当我在我的应用程序中使用多个**CustomControl1并为每个****MyProperty**设置值时

 **```
 <StackPanel HorizontalAlignment="Left" Orientation="Vertical" VerticalAlignment="Top" Width="176">
        <local:CustomControl1>          
            <local:CustomControl1.MyProperty>
                <System:String>A</System:String>
                <System:String>B</System:String>
                <System:String>C</System:String>
                <System:String>D</System:String>
            </local:CustomControl1.MyProperty>          
        </local:CustomControl1>
        <local:CustomControl1>          
            <local:CustomControl1.MyProperty>
                <System:String>F</System:String>
                <System:String>E</System:String>                    
            </local:CustomControl1.MyProperty>          
        </local:CustomControl1>
    </StackPanel> 
```

运行解决方案时，每个**CustomControl1** 和设计模式中显示的所有值仅显示最后一个 customcontrol1 的值。

所以看起来它们都共享相同的实例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:43:16.463

为集合（列表、字典……）创建依赖属性时，***始终在类的构造函数中重新初始化 DP***。（否则，您将对所有实例使用相同的列表）

所以在你的情况下：

```
public CustomControl1()
{
    MyProperty = new List<string>();
} 
```

并删除依赖属性的默认值中的值：

```
public static readonly DependencyProperty MyPropertyProperty =
        DependencyProperty.Register("MyProperty", typeof(List<string>), 
                                                   typeof(CustomControl1), 
                                                   new UIPropertyMetadata(null)); 
```**

# asp.net - 如果日期字段是今天，则验证原因字段是否已填写

> ID：13107585
> 
> 赞同：0
> 
> 时间：2012-10-28T09:08:34.303
> 
> 标签：asp.net, asp.net-mvc

我在我的解决方案中使用 ASP.NET MVC4。我有下面的 ViewModel，我想验证仅当字段 Date 是今天时才填写字段 EmergencyReason。我试试这个：

```
public class LoadingViewModel
{
    public DateTime Date { get; set; }

    [RequiredIf("Date", Comparison.IsEqualTo, DateTime.Today)]
    public string EmergencyReason { get; set; }
    ...
} 
```

它不起作用。RequiredIf 的第三个参数必须是一个常量表达式，...

知道如何仅当日期字段为今天时才强制用户输入紧急原因？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:58:37.400

C# 不支持`DateTime`文字，解决方法是使用`String`like [this](https://stackoverflow.com/questions/6859778/constant-datetime-in-c-sharp)，但它不会解决您的问题。我建议你把验证码移到里面`Controller`并返回一个`ModelState.AddModelError("EmergencyReason", "Emergency Reason is required")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:14:06.403

您似乎正在使用一些`RequiredIf`不属于标准 ASP.NET MVC 4 包的非标准属性。

如您所知，C# 只允许将常量值传递给属性。所以一种可能性是编写一个自定义属性：

```
public class RequiredIfEqualToTodayAttribute: RequiredIfAttribute
{
    public RequiredIfEqualToTodayAttribute(string field)
        : base(field, Comparison.IsEqualTo, DateTime.Today)
    {
    }
} 
```

进而：

```
public class LoadingViewModel
{
    public DateTime Date { get; set; }

    [RequiredIfEqualToToday("Date")]
    public string EmergencyReason { get; set; }

    ...
} 
```

# java - 导入的 Eclipse 项目未编译

> ID：13107594
> 
> 赞同：3
> 
> 时间：2012-10-28T09:09:12.277
> 
> 标签：java, eclipse, cordova

我在新的 Windows 8 中安装了 Eclipse 4.2，并复制并导入了我所有的项目。所有项目都基于 phonegap，所以有 phonegap 构建

src> app.java 没有一个会编译并且所有的都有红色 X，尽管它们在原始 Eclipse 中工作正常。

我不明白错误所以不知道从哪里开始：

我的代码： () 中的行的错误不是代码的一部分

```
package com.x.x;
import android.os.Bundle;         (ERROR=The import android.os.Bundle cannot be resolved)
import com.phonegap.*;
public class App extends DroidGap {         (ERROR= The hierarchy of the type App is inconsistent)
/** Called when the activity is first created. */
@Override                       (ERROR = Override cannot be resolved to a type)
public void onCreate(Bundle savedInstanceState) {      (ERROR=Bundle cannot be resolved to a type)
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");   (ERROR = The method loadUrl(String) from the type DroidGap refers to the missing type String)
}
} 
```

错误行 1：

```
 Multiple markers at this line
- The type android.os.Bundle cannot be resolved. It is indirectly referenced from 
 required .class files
- The type android.content.Intent cannot be resolved. It is indirectly referenced from 
 required .class files
- The type java.lang.String cannot be resolved. It is indirectly referenced from 
 required .class files
- The type java.lang.Object cannot be resolved. It is indirectly referenced from 
 required .class files 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T09:19:29.480

第一步是解决您的 JRE 设置，这显然是不按顺序的（`java.lang.Object`无法解决）。打开项目属性、Java Build Path、Libraries，然后在列表中找到引用 JRE 的项目。编辑此条目。您可能需要在文件系统上找到 JRE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-08T09:27:07.137

我按照以下步骤解决了..打开项目属性，java构建路径，库，搜索JRE，选择它并删除JRE，单击添加库，选择JRE系统库，单击下一步并检查执行环境和替代jre而不是单击完成。现在再次打开项目而不是选择清理。这将清理您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:28:57.650

只需转到编译设置并检查项目特定设置，然后更改编译器版本。这可以从那里解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T22:34:16.983

我在我的项目中遇到了同样的错误，但我以不同的方式修复了它，这就是我所做的：

*   右键单击我的 android 项目（根）并选择属性
*   点击左侧列表中的“Android”
*   从 Build Target 列表中勾选一个 Android Build，例如 Android #.#.#（例如 Android 4.0.3）

单击确定，就是这样！清除了我所有的错误:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-30T19:44:50.443

试试这个：

1.  右键单击包>构建路径>配置构建路径
2.  选择 Java Build Path > 单击 Classpath，删除现有的 JRE 库。
3.  添加库 > JRE 系统库 > 备用 JRE > 已安装的 JRE > 添加 > 标准 VM > 浏览 jre 文件夹并将 JRE Home 指向安装 JRE 的目录 > 完成。

这应该可以解决问题。

# c# - 如何在下一次打开 csv 文件时在下一行写入？

> ID：13107596
> 
> 赞同：6
> 
> 时间：2012-10-28T09:10:02.417
> 
> 标签：c#, winforms, csv, line

在第一次运行时，我的程序在第一行写入一个 csv 文件，但是，当我在第二次运行我的程序时......第三次......时间，它运行在第一行......我该如何纠正它？

我想要一个 CSV 文件输入所有输入到我的程序中。

代码如下：

```
private void WriteToCsvFile()
{
    var us = users.ElementAt(0);
    string names = "Number',";
    string userAnswer = (us.userName + ",");
    foreach (string ss in user)
    {
        string str = Path.GetFileName(ss);
        names = names + str + ",";
    }
    foreach (string ans in us.answer)
    {
        userAnswer = userAnswer + ans + ",";
    }

    using (StreamWriter sw = new StreamWriter("EntranceLog.csv"))
    {
        sw.WriteLine(names);
        sw.WriteLine(userAnswer);

    }

    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:13:33.147

`true`在构造函数中添加参数：

```
using (StreamWriter sw = new StreamWriter("EntranceLog.csv", true)) 
```

命名的第二个参数`append`控制是否应覆盖或附加现有文件。[MSDN](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)状态：

> `true`将数据附加到文件中；`false`覆盖文件。如果指定的文件不存在，则该参数无效，构造函数创建一个新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:16:22.020

每次运行时，您都会创建一个具有相同名称的新文件，并覆盖旧文件。这是您正在使用的特定构造函数的默认行为。

您想改用[此构造函数](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)并将`append`参数指定为`true`：

```
using (StreamWriter sw = new StreamWriter("EntranceLog.csv", true))
{
    // write your file as normal
} 
```

# python - 如何对某些列进行 df.groupby(cols).apply(my_func) 处理，同时保留一些未处理的列？

> ID：13107598
> 
> 赞同：3
> 
> 时间：2012-10-28T09:10:25.470
> 
> 标签：python, pandas

假设我有一个 Pandas 数据框`df`，其中包含 a,b,c,d...z 列。我想：`df.groupby('a').apply(my_func())`对于列`d-z`，而保持列`'b' & 'c'`不变。怎么做 ？

我注意到 Pandas 可以通过传递 dict 将不同的功能应用于不同的列。但是我有一个很长的列列表，只想设置参数或提示以简单地告诉 Pandas 绕过某些列并应用于`my_func()`其余列？（否则我必须建立一个长的字典）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:51:52.187

一种简单（且通用）的方法是使用您感兴趣的子集创建数据框的视图（或者，根据您的情况，创建一个包含除您要忽略的列之外的所有列的视图），然后使用 APPLY看法。

```
In [116]: df
Out[116]: 
     a  b         c  d        f
0  one  3  0.493808  a      bob
1  two  8  0.150585  b    alice
2  one  6  0.641816  c  michael
3  two  5  0.935653  d      joe
4  one  1  0.521159  e     kate 
```

使用您喜欢的方法来创建您需要的视图。您可以像这样选择一系列列`df_view = df.ix[:,'b':'d']`，但以下内容可能对您的场景更有用：

```
#I want all columns except two 
cols = df.columns.tolist()    
mycols = [x for x in cols if not x in ['a','f']]
df_view = df[mycols] 
```

将您的功能应用于该视图。（请注意，这还没有改变 df 中的任何内容。）

```
In [158]: df_view.apply(lambda x: x /2)
Out[158]: 
   b         c   d
0  1  0.246904  20
1  4  0.075293  25
2  3  0.320908  28
3  2  0.467827  28
4  0  0.260579  24 
```

使用 update() 更新 df

```
In [156]: df.update(df_view.apply(lambda x: x/2))

In [157]: df
Out[157]: 
     a  b         c   d        f
0  one  1  0.246904  20      bob
1  two  4  0.075293  25    alice
2  one  3  0.320908  28  michael
3  two  2  0.467827  28      joe
4  one  0  0.260579  24     kate 
```

# c# - 排序后的Listview BackColor

> ID：13107606
> 
> 赞同：0
> 
> 时间：2012-10-28T09:11:50.713
> 
> 标签：c#

我想制作一个包含许多类似项目的列表视图（详细）。为了更具可读性，我希望每个 listview.items.count % 2 == 0 行都作为 backolor.lightgray。

我已经按照本网站的说明制作了一个 listviewColumnSorter：http: [//support.microsoft.com/kb/319401](http://support.microsoft.com/kb/319401)

经过一些修改，使数据看起来与我需要使用的数据“相似”，我的代码如下：

```
public partial class Form1 : Form
{
    private ListViewColumnSorter lvwColumnSorter;

    public Form1()
    {
        InitializeComponent();
        lvwColumnSorter = new ListViewColumnSorter();
        this.listView1.ListViewItemSorter = lvwColumnSorter;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        ColumnHeader columnheader;      // Used for creating column headers.
        ListViewItem listviewitem;      // Used for creating listview items.

        // Ensure that the view is set to show details.
        listView1.View = View.Details;

        for (int i = 0; i < 10; i++)
        {
            listviewitem = new ListViewItem("item" + i.ToString());
            if (listView1.Items.Count % 2 == 0)
            {
                listviewitem.BackColor = Color.LightGray;
                listviewitem.SubItems.Add("xxx");
            }
            else
                listviewitem.SubItems.Add("yyy");
            this.listView1.Items.Add(listviewitem);
        }

        // Create some column headers for the data. 
        columnheader = new ColumnHeader();
        columnheader.Text = "First Name";
        this.listView1.Columns.Add(columnheader);

        columnheader = new ColumnHeader();
        columnheader.Text = "Last Name";
        this.listView1.Columns.Add(columnheader);

        // Loop through and size each column header to fit the column header text.
        foreach (ColumnHeader ch in this.listView1.Columns)
        {
            ch.Width = -2;
        }
    }

    private void listView1_ColumnClick(object sender, ColumnClickEventArgs e)
    {
        // Determine if clicked column is already the column that is being sorted.
        if (e.Column == lvwColumnSorter.SortColumn)
        {
            // Reverse the current sort direction for this column.
            if (lvwColumnSorter.Order == SortOrder.Ascending)
            {
                lvwColumnSorter.Order = SortOrder.Descending;
            }
            else
            {
                lvwColumnSorter.Order = SortOrder.Ascending;
            }
        }
        else
        {
            // Set the column number that is to be sorted; default to ascending.
            lvwColumnSorter.SortColumn = e.Column;
            lvwColumnSorter.Order = SortOrder.Ascending;
        }

        // Perform the sort with these new sort options.
        this.listView1.Sort();
    }
} 
```

（+ 来自 msdn 站点的 ListViewColumnsSorter 类。）

如果您对第二列（姓氏）进行排序，您会看到，所有 xxx 列都是灰色的，yyy 是白色的，并且由于颜色似乎与数据绑定，我最初的想法是让每一列都变成灰色，现在毁了。

我可以以某种方式保持排序功能，并且总是每隔一行灰色，独立于数据吗？

图片：

![在此处输入图像描述](../Images/836dd8ff16bf4a57c10cac671c6b441e.png)

所以要非常清楚，在任何列中排序后，我想每隔一行保留一次浅灰色。如何做到这一点？

(.net 4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:24:02.017

这太典型了 我在发布此内容前 2 小时搜索并尝试了 10 分钟后找到了答案...

[ListView C#（.Net 3.5）中的替代颜色？](https://stackoverflow.com/questions/4006071/alternate-color-in-listview-c-sharp-net-3-5)

只需添加

```
recolorListItems(listView1); 
```

到 listview1_columnClick 函数的末尾。在哪里：

```
private static void recolorListItems(ListView lv)
    {
        for (int ix = 0; ix < lv.Items.Count; ++ix)
        {
            var item = lv.Items[ix];
            item.BackColor = (ix % 2 == 0) ? Color.LightGray : Color.White;
        }
    } 
```

抱歉这些额外的帖子

# java - jni 代码中的 FindClass 使 JVM 崩溃

> ID：13107608
> 
> 赞同：3
> 
> 时间：2012-10-28T09:11:59.437
> 
> 标签：java, java-native-interface

我正在尝试从 c++ 代码编写一个相当基本的 JNI 调用。

```
JavaVM *jvm;
JNIEnv *env;
JavaVMInitArgs vm_args;
JavaVMOption options[2];

// Get the default initialization arguments and set the class 
// path.
JNI_GetDefaultJavaVMInitArgs(&vm_args);
options[0].optionString = "-Djava.class.path=./hbase-1.0-SNAPSHOT.jar"
 options[1].optionString = "-verbose:jni";
vm_args.nOptions = 2;
vm_args.version = JNI_VERSION_1_6;
vm_args.options = options;

// Load and initialize a Java VM, return a JNI interface 
// pointer in env.
long result = JNI_CreateJavaVM(&jvm, (void **)&env, &vm_args);
if (result == JNI_ERR) {
  LOG(ERROR) << "Failed to create a JVM";
  return false;
}

jclass cls = env->FindClass("com/scaligent/falcon/hbase/HFileJniReader"); 
```

我的代码在 FindClass 中崩溃。奇怪的是我在类中有一个静态块，它在静态块中打印消息。我在这里发布了几行错误。我无法弄清楚如何调试或解决这个问题。

```
[Dynamic-linking native method java.lang.Package.getSystemPackage0 ... JNI]
[Dynamic-linking native method java.util.jar.JarFile.getMetaInfEntryNames ... JNI]
[Dynamic-linking native method java.lang.ClassLoader.defineClass1 ... JNI]
[Dynamic-linking native method java.io.FileOutputStream.writeBytes ... JNI]
Starting static block
[Dynamic-linking native method java.util.zip.Inflater.getBytesWritten ... JNI]
[Dynamic-linking native method sun.reflect.NativeMethodAccessorImpl.invoke0 ... JNI]
[Dynamic-linking native method java.security.AccessController.doPrivileged ... JNI]
[Dynamic-linking native method java.lang.Class.isAssignableFrom ... JNI]
[Dynamic-linking native method java.lang.System.identityHashCode ... JNI]
[Dynamic-linking native method java.util.zip.Inflater.end ... JNI]
[Dynamic-linking native method java.util.zip.ZipFile.close ... JNI]
[Dynamic-linking native method java.util.TimeZone.getSystemTimeZoneID ... JNI]
[Dynamic-linking native method sun.nio.fs.UnixNativeDispatcher.init ... JNI]
[Dynamic-linking native method sun.nio.fs.UnixNativeDispatcher.getcwd ... JNI]
[Dynamic-linking native method sun.nio.fs.UnixNativeDispatcher.realpath0 ... JNI]
[Dynamic-linking native method java.io.UnixFileSystem.getLength ... JNI]
[Dynamic-linking native method java.util.ResourceBundle.getClassContext ... JNI]
[Dynamic-linking native method sun.reflect.ConstantPool.getUTF8At0 ... JNI]
[Dynamic-linking native method java.lang.reflect.Proxy.defineClass0 ... JNI]
[Dynamic-linking native method java.lang.Class.isInstance ... JNI]
12/10/28 02:08:54 WARN conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS
 ending static block
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x000000000042f9e3, pid=7057, tid=140108980991808
#
# JRE version: 7.0_04-b20
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.0-b21 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [hfile_jni_reader_test+0x2f9e3]  ftell@@GLIBC_2.2.5+0x2f9e3
#
# Core dump written. Default location: /home/amit/git2/scaligent/falcon/hbase/core or core.7057
#
# An error report file with more information is saved as:
# /home/amit/git2/scaligent/falcon/hbase/hs_err_pid7057.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:33:46.550

这可能是由于指针指向一个已经被删除的对象。检查您的本机代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T17:57:17.050

我后来意识到 jni 会抛出通常会捕获的信号，但在 gdb 中，它会导致 gdb 报告崩溃。我的代码还有其他一些我无法捕捉到的非常普通的错误，因为我依赖 gdb 进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-02T14:07:43.620

你可以告诉 GDB 忽略这些信号：

处理 SIGSEGV nostop

# bash - 如何格式化 bash 脚本的 cowsay 输出

> ID：13107619
> 
> 赞同：0
> 
> 时间：2012-10-28T09:13:48.323
> 
> 标签：bash, ubuntu, format

我在 bash 脚本中有一个自定义 motd，它通过这个命令打印 cowsay，

```
/usr/games/fortune | cowsay -f www 
```

我想知道是否有格式化此输出的方法，例如通过制表符或空格移动输出？我是否必须遍历文本手动格式化每一行，还是有更短/更好的方法？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T09:17:24.123

您可以使用`sed`在输出前添加一些其他文本。以下命令在每行的开头添加一个制表符：

```
/usr/games/fortune | cowsay -f www | sed -e 's/^/\t/' 
```

# java - 针对此特定场景使用 XPath、SAX 或 DOM 从 XML 文件中提取值

> ID：13107624
> 
> 赞同：1
> 
> 时间：2012-10-28T09:15:30.257
> 
> 标签：java, xml, dom, xpath, sax

我目前正在从事一个学术项目，在`Java`和`XML`. 实际任务是解析`XML`，最好将所需的值传递`HashMap`给进一步处理。这是实际 XML 的简短片段。

```
<root>
  <BugReport ID = "1">
    <Title>"(495584) Firefox - search suggestions passes wrong previous result to form history"</Title>

    <Turn>
      <Date>'2009-06-14 18:55:25'</Date>
      <From>'Justin Dolske'</From>
      <Text>
        <Sentence ID = "3.1"> Created an attachment (id=383211) [details] Patch v.2</Sentence>
        <Sentence ID = "3.2"> Ah. So, there's a ._formHistoryResult in the....</Sentence>
        <Sentence ID = "3.3"> The simple fix it to just discard the service's form history result.</Sentence>
        <Sentence ID = "3.4"> Otherwise it's trying to use a old form history result that no longer applies for the search string.</Sentence>
      </Text>
    </Turn>

    <Turn>
      <Date>'2009-06-19 12:07:34'</Date>
      <From>'Gavin Sharp'</From>
      <Text>
        <Sentence ID = "4.1"> (From update of attachment 383211 [details])</Sentence>
        <Sentence ID = "4.2"> Perhaps we should rename one of them to _fhResult just to reduce confusion?</Sentence>
      </Text>
    </Turn>

    <Turn>
      <Date>'2009-06-19 13:17:56'</Date>
      <From>'Justin Dolske'</From>
      <Text>
        <Sentence ID = "5.1"> (In reply to comment #3)</Sentence>
        <Sentence ID = "5.2"> &amp;gt; (From update of attachment 383211 [details] [details])</Sentence> 
        <Sentence ID = "5.3"> &amp;gt; Perhaps we should rename one of them to _fhResult just to reduce confusion?</Sentence>
        <Sentence ID = "5.4"> Good point.</Sentence>
        <Sentence ID = "5.5"> I renamed the one in the wrapper to _formHistResult. </Sentence>
        <Sentence ID = "5.6"> fhResult seemed maybe a bit too short.</Sentence>
      </Text>
    </Turn>

  .....
  and so on
</BugReport> 
```

有许多像“Justin Dolske”这样的评论者对这份报告发表了评论，而我真正寻找的是评论者列表以及他们在整个 XML 文件中编写的所有句子。类似的东西`if(from == justin dolske) getHisAllSentences()`。其他评论者（所有人）也是如此。我尝试了许多不同的方法来获取仅适用于“Justin dolske”或其他评论者的句子，即使是所有使用的通用形式，`XPath`但都失败了。我对这些技术很陌生，包括 JAVA 和任何不知道如何实现它的人。`SAX``DOM`

任何人都可以具体指导我如何使用上述任何技术获得它，或者是否有其他更好的策略来做到这一点？

（注：稍后我想把它放在`hashmap`评论者（justin dolske）的位置和值是（所有句子）之类的`HashMap (key, value)`地方）`key = name`

紧急帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:21:34.753

我建议使用 JAXB 创建反映您的 XML 结构的数据模型。

完成后，您可以将 XML 加载到 Java 实例中。

将每个 'Turn' 放入 a`Map< String, List< Turn >>`中，使用`Turn.From`as 键。

完成后，您可以编写：

`List< Turn > justinsTurn = allTurns.get( "'Justin Dolske'" );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:47:43.677

有几种方法可以满足您的要求。

*   一种方法是使用[JAXB](http://docs.oracle.com/javaee/5/tutorial/doc/bnazg.html)。网上有很多教程，所以请随意参考。

*   您还可以考虑创建一个 DOM，然后从中提取数据，然后将其放入您的 HashMap。

一个参考实现是这样的：

```
import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;

import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

public class XMLReader {

    private HashMap<String,ArrayList<String>> namesSentencesMap;

    public XMLReader() {
        namesSentencesMap = new HashMap<String, ArrayList<String>>();
    }

    private Document getDocument(String fileName){
        Document document = null;

        try{
            document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File(fileName));
        }catch(Exception exe){
            //handle exception
        }

        return document;
    }

    private void buildNamesSentencesMap(Document document){
        if(document == null){
            return;
        }

        //Get each Turn block
        NodeList turnList = document.getElementsByTagName("Turn");
        String fromName = null;

        NodeList sentenceNodeList = null;
        for(int turnIndex = 0; turnIndex < turnList.getLength(); turnIndex++){
            Element turnElement = (Element)turnList.item(turnIndex);
            //Assumption: <From> element
            Element fromElement = (Element) turnElement.getElementsByTagName("From").item(0); 
            fromName = fromElement.getTextContent();
            //Extracting sentences - First check whether the map contains 
            //an ArrayList corresponding to the name. If yes, then use that,  
            //else create a new one                                              
            ArrayList<String> sentenceList = namesSentencesMap.get(fromName);
            if(sentenceList == null){
                sentenceList = new ArrayList<String>();
            }
            //Extract sentences from the Turn node
            try{
                sentenceNodeList = turnElement.getElementsByTagName("Sentence");
                for(int sentenceIndex = 0; sentenceIndex < sentenceNodeList.getLength(); sentenceIndex++){
                    sentenceList.add(((Element)sentenceNodeList.item(sentenceIndex)).getTextContent());
                }
            }finally{
                sentenceNodeList = null;
            }
            //Put the list back in the map                  
            namesSentencesMap.put(fromName, sentenceList);
        }
    }

    public static void main(String[] args) {
        XMLReader reader = new XMLReader();
        reader.buildNamesSentencesMap(reader.getDocument("<your_xml_file>"));

        for(String names: reader.namesSentencesMap.keySet()){
            System.out.println("Name: "+names+"\tTotal Sentences: "+reader.namesSentencesMap.get(names).size());
        }
    }
} 
```

**注意：**这只是一个演示，您需要对其进行修改以满足您的需要。我已经根据您的 XML 创建了它，以展示一种方法。

# stomp - Stomp 协议历史和所有者

> ID：13107625
> 
> 赞同：1
> 
> 时间：2012-10-28T09:15:53.177
> 
> 标签：stomp

我正在对消息传递中间件和协议进行基准测试。
我想写一个关于我正在测试的每个协议的摘要。除了许可证，我没有找到任何关于 STOMP 的信息。官网极其稀少，wikipedia term 是个stub，网上搜索也一无所获。

谁拥有和维护协议？谁发布规格？最好有一些关于协议演变的历史事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:47:47.657

您是否阅读过 STOMP 官方[网站](http://stomp.github.com/index.html)？

规范位于网站上，[v1.0](http://stomp.github.com/stomp-specification-1.2.html)、[v1.1](http://stomp.github.com/stomp-specification-1.2.html)和[v1.2](http://stomp.github.com/stomp-specification-1.2.html)（最新）

发布是通过在网站上列出的邮件列表上进行的投票完成的，您可以去那里查看档案并提出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T21:09:31.223

以下链接可能会有所帮助：

[http://docs.codehaus.org/pages/viewpreviousversions.action?pageId=30757](http://docs.codehaus.org/pages/viewpreviousversions.action?pageId=30757)

Codehaus 是该规范的最初所在地。我相信早在 2005 年就开始了

# javascript - 文本选择 Internet Explorer

> ID：13107628
> 
> 赞同：1
> 
> 时间：2012-10-28T09:16:03.127
> 
> 标签：javascript, css, html, internet-explorer-9, textselection

我尝试在此代码中禁用文本选择，但没有成功。编辑（感谢 techfoobar）： http: [//jsfiddle.net/5uG63/3/](http://jsfiddle.net/5uG63/3/)我应用大部分代码的唯一元素是其中包含三个的元素。其余的你将能够突出显示。我知道任何拖动功能都不起作用，因为这是一个更大的代码块的片段，很难发布看到它通过 Ajax 获取元素。我并不担心用户选择文本是为了获取信息，但有时当文本被选中时，它会干扰拖放功能。

对于包含这三个元素的元素，以及启用它们的所有其他元素，似乎只有一种情况会发生这种情况。使用 Internet Explorer，如果您要单击最左侧两个框之间的空白中心，然后将鼠标拖动到两个框的最右侧，则数字 3 将被选中。我正在使用 Internet Explorer 9。

我尝试在 CSS 中禁用它，似乎效果不大。我认为问题在于它是从它所在的 div 之外选择的。

那是我使用的 CSS：[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:51:59.900

对于您的表，您已指定`onselectstart="select()"`. 您应该将其更改为`onselectstart="return select()"`（注意**return**）以确保您从*select()函数返回的***false**被通知给浏览器，从而阻止选择。

 *检查这个*小提琴*：http: [//jsfiddle.net/5uG63/4/](http://jsfiddle.net/5uG63/4/)

*注意：*这仅在您从元素本身开始选择时才有效。如果您从表外开始选择，仍然会被选中。*

# c++ - 如何使用 cin 读取 double 的整个值？

> ID：13107632
> 
> 赞同：9
> 
> 时间：2012-10-28T09:17:01.353
> 
> 标签：c++, double

```
long double m;
cout << "enter double: "; cin >> m;
cout << "m = " << m <<endl; 
```

输入：

输入双：1.546640625

输出：

米 = 1.54664

我必须用点转换成二进制，当我读到像 2.359375000 这样的数字时

输出：

米 = 2.35938

它有效，但我认为问题是 1.546640625 中的零

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T09:18:39.073

您已经阅读了 double 的全部值。问题出在 cout 上。默认情况下，它会将值四舍五入到小数点后 6 位。

要设置精度 cout 使用，请使用`setprecision`from `<iomanip>`：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main() {
    long double d;
    cin >> d;
    cout << setprecision(10) << d << endl;
    return 0;
} 
```

# synchronization - 绝对音频同步

> ID：13107636
> 
> 赞同：1
> 
> 时间：2012-10-28T09:17:22.130
> 
> 标签：synchronization, gstreamer

我想将我的计算机与外部摄像机记录同步，以便我可以准确地知道（以毫秒为单位）何时发生某些记录的事件与计算机记录的其他传感器有关。一种想法是每秒从计算机播放短的声音脉冲或啁啾声，这些声音被摄像机上的麦克风拾取。但是播放声音剪辑的简单 cron 作业的准确性不够精确。我正在考虑使用像 gstreamer 这样的东西，但是如何让它根据系统时钟在特定时间播放剪辑呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:02:41.437

如果您知道摄像机的开始时间，则可以从捕获的视频流中得出视频的任何时间的时间。你不需要做任何这些。每个帧在容器中都有一个与之关联的时间戳，并且可以知道确切的时间。您只需要记下开始墙的时间。

编辑：另一种方法如下：如果你有一个你信任的时钟，你能把它放在摄像机的路径中吗？所以你总是对视频本身有一个衡量标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:27:34.360

这是我解决这个问题的尝试。[我已经修改了来自http://pygstdocs.berlios.de/pygst-tutorial/playbin.html](http://pygstdocs.berlios.de/pygst-tutorial/playbin.html)的 gstreamer python 教程命令行 playbin（示例 2.3）之一，以与系统时钟同步的定义间隔重复播放声音文件。

我确保管道使用系统时钟而不是接收器的默认时钟，并禁止管道设置元素的基本时间。然后在播放完文件后，它会回到开头，并手动设置基准时间，以便接收器在下一个 epoch 等待播放缓冲区。

```
#!/usr/bin/env python

import sys, os
#import time, thread
import glib,gobject
import pygst
pygst.require("0.10")
import gst

class CLI_Main:

  def __init__(self):
    self.player = gst.element_factory_make("playbin2", "player")
    fakesink = gst.element_factory_make("fakesink", "fakesink")
    self.player.set_property("video-sink", fakesink)
    bus = self.player.get_bus()
    bus.add_signal_watch()
    bus.connect("message", self.on_message)

    # use the system clock instead of the sink's clock
    self.sysclock = gst.system_clock_obtain()
    self.player.use_clock(self.sysclock)

    # disable the pipeline from setting element base times
    self.player.set_start_time(gst.CLOCK_TIME_NONE)
    # default tick interval
    self.tick_interval = 1;

    self.tick_interval = float(sys.argv[1])
    filepath = sys.argv[2]
    if os.path.isfile(filepath):
      self.playmode = True
      self.player.set_property("uri", "file://" + filepath)
      current_time = self.sysclock.get_time()
      print current_time
      play_time = (current_time/long(self.tick_interval*gst.SECOND) + 1) * long(self.tick_interval*gst.SECOND)
      print play_time
      self.player.set_base_time(play_time)
      self.player.set_state(gst.STATE_PLAYING)
      print "starting"

  def on_message(self, bus, message):
    t = message.type
    if t == gst.MESSAGE_EOS:
      # compute the next time the sound should be played
      current_time = self.sysclock.get_time()
      play_time = (current_time/int(self.tick_interval*gst.SECOND) + 1)*int(self.tick_interval*gst.SECOND)

      # setup the next time to play the sound and seek it to the beginning
      self.player.set_base_time(play_time)
      # seek the player so that the sound plays from the beginning
      self.player.seek(1.0, gst.FORMAT_TIME, gst.SEEK_FLAG_FLUSH, gst.SEEK_TYPE_SET, 0L, gst.SEEK_TYPE_NONE, 0L)   
      # make sure that the player will play
      self.player.set_state(gst.STATE_PLAYING)
      #self.playmode = False
      print play_time

    elif t == gst.MESSAGE_ERROR:
      self.player.set_state(gst.STATE_NULL)
      err, debug = message.parse_error()
      print "Error: %s" % err, debug
      self.playmode = False

mainclass = CLI_Main()
loop = glib.MainLoop()
loop.run() 
```

对不起，如果代码被黑客入侵和混乱；我对 python 还是很陌生。

# mysql - MySQL LOAD XML INFILE 的问题

> ID：13107639
> 
> 赞同：5
> 
> 时间：2012-10-28T09:17:42.593
> 
> 标签：mysql, xml, cdata, load-data-infile

我有一个格式为...的 XML 文档

```
<?xml version="1.0" encoding="UTF-8"?>
<yahootable>
    <row>
        <various><![CDATA[ multiline 
        text, "&" 
        other <stuff> ]]>
        </various>
        <id>1</id>
        <message><![CDATA[
                sdfgsdfg
                dsfsdfsd ]]>
        </message>
    </row>
<yahootable> 
```

...并希望使用 MySQL 的 LOAD XML LOCAL INFILE 将其插入到带有列的表中；（各种，id，消息）。我似乎无法从未解析的 CDATA 标记中获取任何数据到数据库列中。是CDATA标签之间的数据被完全忽略了，还是我错过了什么？我原以为 CDATA 会转义非法 XML 字符并将其作为常规文本插入。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-10T01:07:25.120

`LOAD XML INFILE`在保留 CDATA 内容的同时，我找不到这样做的方法。但是，以下工作和使用 good old`LOAD DATA INFILE`一起`ExtractValue()`完成同样的事情：

如果我们有您的示例文件和此表：

```
CREATE TABLE `yahootable` (
  `id` int(11) NOT NULL PRIMARY KEY,
  `various` text,
  `message` text
) ENGINE=InnoDB DEFAULT CHARSET=utf8
; 
```

然后运行此语句会将文件的内容导入表中：

```
LOAD DATA INFILE 
    '/tmp/yahootable.xml'
INTO TABLE 
    yahootable
CHARACTER SET 'utf8'
LINES STARTING BY '<row>' TERMINATED BY '</row>'
(@tmp)
SET
  id      = ExtractValue(@tmp, '//id'),
  various = ExtractValue(@tmp, '//various'),
  message = ExtractValue(@tmp, '//message')
; 
```

这通过告诉 LOAD DATA INFILE 每个`<row>...</row>`都是逻辑“行”来工作，它存储在局部变量`@tmp`中。然后我们将它作为 XML 片段传递给[ExtractValue](http://dev.mysql.com/doc/refman/5.1/en/xml-functions.html#function_extractvalue)函数，并使用适当的 XPath 表达式从中选择我们想要的值。

# jquery - jquery mobile在加载页面时自动完成不同的行为

> ID：13107644
> 
> 赞同：0
> 
> 时间：2012-10-28T09:18:41.717
> 
> 标签：jquery, jquery-mobile, jquery-autocomplete

目前我在 jquery mobile ( [http://andymatthews.net/code/autocomplete/](http://andymatthews.net/code/autocomplete/) ) 中的自动完成功能有问题。因此，如果我直接通过 url 运行页面，页面和自动完成功能将毫无问题地工作。如果我通过例如带有 changepage 功能的主菜单导航到该页面，则自动完成功能将不起作用！

你能给我一个建议吗？

我的代码：

主菜单：

```
<li>
    <a id="buttonNewReservation" href="newReservations/newReservation.htm">Neue Reservation</a>
    <script type="text/javascript">
        $.cookie.json = true;
        $('#buttonNewReservation').click(newReservation);

        function newReservation() {
            var session = $.cookie("session");
            if (session != null) {
                $.mobile.changePage("/newReservations/newReservation.htm", 
                       {data:session});
            }
        }   
    </script>
</li> 
```

*   [具有自动完成功能的页面：与http://andymatthews.net/code/autocomplete/search.html](http://andymatthews.net/code/autocomplete/search.html)中的代码相同

谢谢你的帮助！

亲切的问候，亲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:33:26.800

`head`您在标签中导入自动完成脚本。由于 JQM 仅加载一次（您打开的第一个页面），然后`div`从您要转到的页面动态加载 ，因此您`data-role="page"`从该页面重定向到的页面始终使用来自第一页的 head 标签。

有关更多信息，请阅读此页面：http: [//jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)（头部中的脚本和样式）

所以你需要添加这一行：

```
<script src="jqm.autoComplete-1.4.3-min.js"></script> 
```

给你的页面 div，像这样：

```
<div data-role="page" id="mainPage">
    <script src="jqm.autoComplete-1.4.3-min.js"></script>
    <div data-role="header">
    //rest of the code....
</div>//end of data-role="page" 
```

这样，当 JQM 使用 AJAX 拉入页面时，脚本将被加载，并且在您直接进入页面时也可以使用

# android - Android：我们可以在运行 UI 线程时将数据插入到 sqlite 中吗？

> ID：13107650
> 
> 赞同：1
> 
> 时间：2012-10-28T09:19:36.880
> 
> 标签：android, sqlite, xml-parsing, ui-thread

我发现了同样的问题，但没有答案。这就是为什么我想在这里再次问：

这是我的主线程上的课程：

```
private class DownloadTask extends AsyncTask<String, Void, String>
    {   
        @Override
        protected String doInBackground(String... urls) 
        {
            // TODO Auto-generated method stub
            XMLParser parser1 = new XMLParser();//System.out.println("XML before catching");
            String result = parser1.getXmlFromUrl("http://exampl1.com/arrival.XML"); 
            xml=result;
            Document doc = parser1.getDomElement(xml);
            NodeList nl = doc.getElementsByTagName(DOM_KEY_CONTENT);
            arrayList = new ArrayList<HashMap<String,String>>();
            databaseAirport myDbHelper ;
            myDbHelper = new databaseAirport(ctx);
            myDbHelper.open();
            for (int i = 0; i < nl.getLength(); i++) 
            {
                // creating new HashMap
                HashMap<String, String> mapData= new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                mapData.put(DOM_KEY_ID, parser1.getValue(e, DOM_KEY_ID));
                mapData.put(DOM_KEY_PRI_ID,parser1.getValue(e,DOM_KEY_PRI_ID));
                mapData.put(DOM_KEY_FDATE, parser1.getValue(e, DOM_KEY_FDATE));
                mapData.put(DOM_KEY_ORDER, parser1.getValue(e, DOM_KEY_ORDER));

                arrayList.add(mapData); 
```

字符串 a1,b1,c1,d1 是 var global；

```
 a1 = parser1.getValue(e,  DOM_KEY_ID);
                b1 = parser1.getValue(e,  DOM_KEY_PRI_ID);
                c1 = parser1.getValue(e,  DOM_KEY_FDATE);
                d1 = parser1.getValue(e,  DOM_KEY_ORDER);

                System.out.println(a1+b1+c1+d1);
                myDbHelper.insertArrival(Integer.parseInt(a1), c1, Integer.parseInt(d1));

            }
            long size = arrayList.size();
            System.out.println("Size of arrayList "+size);
            return result;
        }
    } 
```

a1,b1,c1 和 d1 正常打印

这是错误：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:299)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)

**Caused by: java.lang.NullPointerException**

at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
    at com.airport.serverside.databaseAirport.open(databaseAirport.java:76)
    at com.airport.serverside.AirportActivity$DownloadWebPageTask.doInBackground(AirportActivity.java:133)
    at com.airport.serverside.AirportActivity$DownloadWebPageTask.doInBackground(AirportActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:287)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

**已编辑**

```
74  public databaseAirport open() throws SQLException 
75    {
76       db = DBHelper.getWritableDatabase();
77        return this;
78    } 
```

谁能帮我吗 ？提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:24:05.067

我也面临数据库被锁定的问题。我使用内容提供者来摆脱它。可能这对你也有帮助。

我提到了 Google IO 应用程序[http://code.google.com/p/iosched/](http://code.google.com/p/iosched/)。

# mongodb - mongodb方案数据库设计

> ID：13107656
> 
> 赞同：2
> 
> 时间：2012-10-28T09:21:23.350
> 
> 标签：mongodb, mongodb-query

我有用户表，如：

```
{ _id: kshjfhsf098767, email: email@something name: John joshua }
{ _id: dleoireofd9888, email: email@hhh name: Terry Holdman } 
```

我还有其他收藏“游戏”

```
{_id: gsgrfsdgf8898, home_user_id: kshjfhsf098767, guest_user_id: dleoireofd9888, result: "0:1"} 
```

然后我想要加入（就像在 mysql 中一样），与用户进行两次游戏，因为我知道 home_user_id 和 guest_user_id 并使用姓名电子邮件等。我可以将所有这些放在桌面游戏中，但这将是重复的内容。如果他们更改名称或电子邮件，我需要更新整个游戏桌......

任何有关设计和查询的帮助，以便与正在玩游戏的两个用户一起调用该游戏会很棒...... Tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:36:03.737

有两种方法来管理它，手动或使用[DBRef](http://docs.mongodb.org/manual/applications/database-references/)。从前面的文档链接：

> MongoDB 不支持连接。在 MongoDB 中，一些数据被“非规范化”，或者与相关数据一起存储在文档中，以消除对连接的需要。但是，在某些情况下，将相关信息存储在单独的文档中是有意义的，通常是在不同的集合或数据库中。

所以这是一个*自己管理链接*或使用内置DBRef的情况。对于 DBRef 案例，请参阅[如何使用 DBRef 查询 mongodb](https://stackoverflow.com/questions/6195286/how-to-query-mongodb-with-dbref)

或者，使用不同的模式设计*可能*更容易管理。例如，*游戏*集合可以只存储`result`和`game_id`，而是添加`game_id`对每个相关用户的引用。当然，您仍然需要查询这两个集合，并且链接的 SO 问题有一个如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:24:18.350

MongoDB 没有 JOIN (NoSQL)。

只需在此处进行惰性连接，您可以在其中查询用户行，然后查询该用户参与的所有游戏。使用正确的索引将是超快的，因为命令将是两个小命令，MongoDB 几乎不会注意到它们。

我不建议在这里嵌入。以您所说的原因为例，这将使数据难以在可能位于单个游戏“房间”中的 100 名用户中更新。在这种情况下，最好进行一次原子更新，即使这意味着您必须在查询另一个集合时增加一些开销。

# jsp - 关于 JSF Postback 的评论与 JSP 作为视图定义技术的混淆

> ID：13107657
> 
> 赞同：1
> 
> 时间：2012-10-28T09:21:26.113
> 
> 标签：jsp, jsf, jsf-2, jstl, el

在 Java Server Faces 2.0 - The Complete Reference 一书名为“检查 EL 的演变：延迟与即时表达式”的第 5**章**[中](http://jsfcompref.com/)，*作者*写道：

> 立即评估对于 JSP 来说是完美的，但 JSF 需要更多的东西。JSF 引入了请求处理生命周期（在第 3 章中描述），它控制提交表单时发生的事情（回发）。在回发期间，呈现正在回发的标记的 JSP 页面是未知的，并且对 JSF 运行时不可用；因此，该页面中的任何表达式都不可用，因为它们在页面被呈现时立即被评估。

为什么作者说“在回发期间，呈现正在回发的标记的 JSP 页面是未知的”？这不是 JSF 生命周期的恢复视图阶段恢复 JSP 视图定义技术所描述的视图的确切职责吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T12:45:33.490

不，作者的意思是没有办法以编程方式找到`${}`EL 表达式引用以便以编程方式/单独评估它们。一旦基于 JSP 输出构建 JSF 组件树，它们就已经由 JSP 引擎评估。`${}`JSF 组件树中没有对 EL 表达式的引用。JSP 引擎无法识别 EL 表达式，因此`#{}`JSP 引擎不会直接对其求值。通过这种方式，JSF 可以找到它们并将它们转换为引用，从而允许以编程方式进行[`ValueExpression`](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html)评估。`getValue()``setValue()`

所以，想象一下你有一个

```
<h:inputText value="${bean.input}" /> 
```

然后在视图构建期间，`${}`JSP 引擎将立即评估该值，并且 value 属性最终将成为*已*评估的值（由 getter 获得）。JSF 组件的值最终将仅代表作为评估结果的“文字”值。没有办法完整地找出原始 EL 表达式，以便能够在回发时设置模型值。

# c# - 在 C# 和 Java 中计算 CRC32 校验和有什么区别吗？

> ID：13107665
> 
> 赞同：5
> 
> 时间：2012-10-28T09:22:37.043
> 
> 标签：c#, java, crc32

我必须为 C# 中的字符串计算 CRC32 校验和并将其发送到外部应用程序。

另一方面，他们将使用 Java 进行计算。

但是我的校验和最终不匹配。

例如以下字符串 43HLV109520DAP10072la19z6 的 CRC32 校验和

最后是 1269993351。

最后是 2947932745 使用 C#

请告诉我我的代码出了什么问题。

我正在使用这个 0xffffffff 默认种子并遵循 crc 表

```
readonly static uint[] CRCTable = new uint[] {
            0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,
            0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,
            0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,
            0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,
            0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,
            0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,
            0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,
            0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,
            0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,
            0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,
            0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,
            0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,
            0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,
            0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,
            0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,
            0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,
            0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,
            0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,
            0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,
            0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,
            0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,
            0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,
            0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,
            0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,
            0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,
            0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,
            0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,
            0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,
            0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,
            0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,
            0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,
            0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,
            0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,
            0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,
            0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,
            0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,
            0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,
            0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,
            0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,
            0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,
            0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,
            0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,
            0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,
            0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,
            0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,
            0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,
            0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,
            0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,
            0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,
            0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,
            0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,
            0x2D02EF8D
        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T09:39:17.897

CRC32 是基于字节序列而不是字符串计算的。因此，要计算 CRC32，您需要先将字符串转换为字节。如果您使用不同的编码将字符串转换为字节序列，则结果将有所不同。

因此，您需要在两侧使用相同的编码。我建议使用没有 BOM 的 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T11:22:57.100

我已经用 Java 计算了 CRC32，并得到了与 C# 相同的结果。即`CRC32(43HLV109520DAP10072la19z6)=2947932745`。这意味着要么他们在 java 中存在错误，要么您在传输过程中存在错误。

代码如下。

我建议您尝试向 Java 应用程序发送简单的数据，例如零或一，并尝试推断它们如何计算 CRC。

```
public static void main(String[] args) {

    CRC32 crc32 = new CRC32();

    String data = "43HLV109520DAP10072la19z6";

    String[] cs = new String[] {"utf8" /*, "cp1252", "cp866" */};
    byte[] array;
    byte b;

    for(int i=0; i<cs.length; ++i) {

        array = data.getBytes(Charset.forName(cs[i]));

        crc32.reset();
        crc32.update(array);

        System.out.println(String.format("%s: %d", cs[i], crc32.getValue()));

        /*
        for(int j=0; j<array.length/2; j++) {
            b = array[i];
            array[i] = array[array.length-1-i];
            array[array.length-1-i] = b;
        }
        */

        for(int j=0; j<array.length; j+=2) {
            b = array[i];
            array[i] = array[i+2];
            array[i+1] = b;
        }

        crc32.reset();
        crc32.update(array);

        System.out.println(String.format("of modified: %d", crc32.getValue()));
    }

} 
```

**更新**

Endiannes反转也无济于事

```
 for(int j=0; j<array.length; j+=4) {

            b = array[i];
            array[i] = array[i+3];
            array[i+3] = b;

            b = array[i+1];
            array[i+1] = array[i+2];
            array[i+2] = b;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:32:20.227

在不深入研究任何细节的情况下，问题可能与 Java 缺乏无符号整数类型有关。问题可能发生在`int`层面，也可能发生在`byte`层面。这是一种调查途径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-23T11:54:04.960

CRC 是基于字节序列而不是字符串计算的。由于 Java 中 Unsigned int 的不可用，Java 中的任何 CRC 看起来都不同。

将计算的 Int CRC 转换为十六进制字符串并取最后 2 个字节（长度 4）

那是您实际的 CRC unsigned Int。

```
String hexCrc = Integer.toHexString(crcCalculated);
hexCrc = hexCrc.substring(hexCrc.length()-4); 
```

比较 c# 和 Java 的十六进制 CRC 都应该相同。

# mysql - 如何在 WHERE 子句中使用实际行数 (COUNT(*)) 而无需编写与子查询相同的查询？

> ID：13107671
> 
> 赞同：8
> 
> 时间：2012-10-28T09:24:06.250
> 
> 标签：mysql, sql, sqlite, count

我有这样的事情：

```
SELECT id, fruit, pip 
FROM   plant 
WHERE  COUNT(*) = 2; 
```

我猜这个奇怪的查询是不言自明的。`COUNT(*)`这里的意思是表中的行数`plant`。**我的要求是，仅当表中的总行数 = 2 时，我才需要从指定字段中检索值。**这不起作用，但是：`invalid use of aggregate function COUNT`。

我不能做到这一点：

```
SELECT COUNT(*) as cnt, id, fruit, pip 
FROM   plant 
WHERE  cnt = 2; 
```

一方面，它将输出的行数限制为 1，另一方面，它给出了相同的错误：`invalid use of aggregate function`.

我能做的是：

```
SELECT id, fruit, pip 
FROM   plant 
WHERE  (
        SELECT COUNT(*) 
        FROM   plant
       ) = 2; 
```

但随后该子查询是重新运行的主要查询。我在这里展示了问题的较大部分的一个小示例，尽管我知道`COUNT(*)`给定示例中的附加子查询并不是那么大的开销。

**编辑：我不知道为什么这个问题被否决了。`COUNT(*)`我试图从查询中的一个视图（一个临时表）中获取，这是一个具有 5 到 6 个连接和附加 where 子句的大型查询。将查询作为子查询重新运行以获取计数效率低下，我也可以看到瓶颈。**

这是实际的查询：

```
SELECT U.UserName, E.Title, AE.Mode, AE.AttemptNo, 
   IF(AE.Completed = 1, 'Completed', 'Incomplete'), 
   (
    SELECT COUNT(DISTINCT(FK_QId)) 
    FROM   attempt_question AS AQ
    WHERE  FK_ExcAttemptId = @excAttemptId
   ) AS Inst_Count, 
   (
    SELECT    COUNT(DISTINCT(AQ.FK_QId)) 
    FROM      attempt_question AS AQ
    JOIN      `question` AS Q 
          ON  Q.PK_Id = AQ.FK_QId                      
    LEFT JOIN actions AS A                             
           ON A.FK_QId = AQ.FK_QId
    WHERE     AQ.FK_ExcAttemptId = @excAttemptId
         AND (
                  Q.Type = @descQtn 
              OR  Q.Type = @actQtn 
              AND A.type = 'CTVI.NotImplemented'       
              AND A.IsDelete = @status                 
              AND (
                    SELECT COUNT(*) 
                    FROM   actions 
                    WHERE  FK_QId = A.FK_QId 
                       AND type != 'CTVI.NotImplemented'
                       AND IsDelete = @status
                   ) = 0
             )
   ) AS NotEvalInst_Count,  
   (
    SELECT COUNT(DISTINCT(FK_QId)) 
    FROM   attempt_question AS AQ
    WHERE  FK_ExcAttemptId = @excAttemptId 
       AND Mark = @mark
   ) AS CorrectAns_Count, 
   E.AllottedTime, AE.TimeTaken
FROM   attempt_exercise AS AE
JOIN   ctvi_exercise_tblexercise AS E 
    ON AE.FK_EId = E.PK_EId
JOIN   ctvi_user_table AS U 
    ON AE.FK_UId = U.PK_Id
JOIN   ctvi_grade AS G 
    ON AE.FK_GId = G.PK_GId
WHERE  AE.PK_Id = @excAttemptId
-- AND COUNT(AE.*) = @number --the portion in contention. 
```

请忽略上述查询，并从我发布的小示例查询中引导我走向正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T10:32:05.960

在 MySQL 中，您只能执行您尝试过的操作：

```
SELECT id, fruit, pip 
FROM   plant 
WHERE  (
        SELECT COUNT(*) 
        FROM   plant
       ) = 2; 
```

或这种变化：

```
SELECT id, fruit, pip 
FROM   plant 
  JOIN
      (
        SELECT COUNT(*) AS cnt 
        FROM   plant
       ) AS c
    ON c.cnt = 2; 
```

第一个或第二个更有效，取决于 MySQL 的版本（和优化器）。我会打赌第二个，在大多数版本上。

在其他具有窗口函数的 DBMS 中，您还可以执行@Andomar 建议的第一个查询。

* * *

这是避免两次计算派生表的瓶颈的建议，一次获取行，一次获取计数。如果派生表的计算成本很高，并且它的行数为数千或数百万，那么计算它们两次只是为了丢弃它们，确实是一个问题。这可能会提高效率，因为它将中间（两次）计算的行限制为 3：

```
SELECT  p.*
FROM
    ( SELECT id, fruit, pip 
      FROM   plant 
      LIMIT 3
    ) AS p
  JOIN
    ( SELECT COUNT(*) AS cnt
      FROM   
        ( SELECT 1 
          FROM   plant 
          LIMIT 3
        ) AS tmp
    ) AS c
    ON c.cnt = 2 ; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T09:25:26.067

重新阅读您的问题后，您仅在整个表中有 2 行时才尝试返回行。在那种情况下，我认为您自己的示例查询已经是最好的了。

在另一个 DBMS 上，您可以使用 Windowing 函数：

```
select  *
from    (
        select  *
        ,       count(*) over () as cnt
        from    plant
        ) as SubQueryAlias
where   cnt = 2 
```

但是`over`MySQL 不支持该子句。

**下面是旧的错误分析器**

该`where`子句在分组之前起作用。它适用于单行，而不是行组，因此您不能在子句中使用`count`or之类的聚合。`max``where`

要设置对行组起作用的过滤器，请使用该`having`子句。它在分组后工作，可用于过滤聚合：

```
SELECT id, fruit, pip 
FROM   plant 
GROUP BY
       id, fruit, pip 
HAVING COUNT(*) = 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-16T01:46:35.317

其他答案不满足“不使用子查询”过滤结果的原始问题。

实际上，您可以通过在 2 个连续的 MySQL 语句中使用变量来执行此操作：

```
SET @count=0;

SELECT * FROM
(
    SELECT id, fruit, pip, @count:=@count+1 AS count
    FROM   plant 
    WHERE
) tmp
WHERE @count = 2; 
```

# sql - 类中用于 SQL 的 F# 类型提供程序

> ID：13107676
> 
> 赞同：2
> 
> 时间：2012-10-28T09:24:48.413
> 
> 标签：sql, f#, type-providers

我正在编写一个用于 Azure Worker 角色的 F#。我希望该类将连接字符串 a 作为参数。我创建了一个数据库连接

```
type dbSchema = SqlDataConnection<"...">
let db = dbSchema.GetDataContext() 
```

但是 dbSchema 是一种类型，因此它不能嵌入到我的类中（另一种类型）。我可以创建两个单独的模块，一个带有数据库连接，另一个带有我的班级

```
module DataSource =

    [<Literal>]
    let connectionString = "Data Source=.\SQLEXPRESS;Initial Catalog=Service;Integrated Security=True"

    type dbSchema = SqlDataConnection<connectionString>
    let db = dbSchema.GetDataContext()

module DealerFactory =

    type Factory(connectionString) =

        member this.GetList(latitudeLeftTop, longitudeLeftTop, latitudeRightBottom, longitudeRightBottom) =
        ".." 
```

但是如何在我的类的构造函数中使用 connectionString 来创建连接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T13:16:37.353

SQL 数据库的类型提供程序将连接字符串用于两个不同的目的。首先，它需要一个（在编译时）来生成数据库模式。其次，您可以（可选地）在实际运行程序时再给它一个在运行时使用。

编译时连接字符串需要指定为参数，`SqlDataConnection<...>`运行时连接字符串可以传递给`GetDataContext(...)`操作。

因此，您可以使用静态已知的编译时连接字符串定义您的类型：

```
[<Literal>]
let connectionString = "Data Source=.\SQLEXPRESS;Initial Catalog=Service; ..."
type dbSchema = SqlDataConnection<connectionString> 
```

当你想创建一个数据库连接的实例时，你可以传递另一个连接字符串：

```
type Factory(connectionString) =
  // Create connection to the DB using (a different)
  // connection string specified at runtime
  let db = dbSchema.GetDataContext(connectionString)

  member this.GetList( latitudeLeftTop, longitudeLeftTop, 
                       latitudeRightBottom, longitudeRightBottom) =
    // Use local 'db' to access the database
    query { for v db.Table do select v } 
```

与您的原始代码（具有`db`模块中的值）相比，这会为每个创建一个新`db`实例有所不同`Factory`，但我想如果`Factory`将连接字符串作为参数，这是可以预期的。

# java - 无法识别的选项：-XLoggc：

> ID：13107681
> 
> 赞同：0
> 
> 时间：2012-10-28T09:25:21.807
> 
> 标签：java, garbage-collection, openjdk

OpenJDK 不支持该`-XLoggc`标志吗？我可以使用哪些等效标志？OpenJDK 的标志在哪里记录？

```
$ cat Hello.java
public class Hello {
        public static void main(String[] args) {
                System.out.println("Hello World");
        }
}
$ javac Hello.java
$ java -XLoggc:gc.log Hello
Unrecognized option: -XLoggc:gc.log
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
$ java -version
java version "1.7.0_147-icedtea"
OpenJDK Runtime Environment (IcedTea7 2.0pre) (7~b147-2.0~pre6-1ubuntu1)
OpenJDK Client VM (build 21.0-b17, mixed mode, sharing) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:30:09.987

标志是`-Xloggc`小写的“l”。

# c - C 传递给要处理哪个数组的参数

> ID：13107683
> 
> 赞同：0
> 
> 时间：2012-10-28T09:25:25.563
> 
> 标签：c, arrays, function, parameters, arguments

如果这是一个重复的问题，我深表歉意，但我似乎无法找到关键字来搜索我要问的问题。

基本上，我已经为自己定义了一个结构。

```
#define max_terms 101

typedef struct{
    int row, col, value;
} term; 
```

现在我有三个不同的术语，即 a[max_terms]、b[max_terms] 和 c[max_terms] 我想输入以下函数的参数，以便我可以选择处理三个定义的数组中的哪一个

```
void input(/*parameter here*/){
    a[0].row = 0; // want to be able to choose the array to work on instead of just a
} 
```

感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:27:18.803

最简单的方法是将指向数组第一个元素的指针传递给函数。

```
void input(term *a)
{
    a[0].row = 0;
} 
```

/* ... */

```
term b[max_terms];
input(b); 
```

* * *

正如[giorashc](https://stackoverflow.com/users/986169/giorashc)在评论中指出的那样，如果数组不都使用相同的大小，您需要将实际大小作为附加参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:31:38.503

您有两个常见的选择：

```
void input(term *t, size_t size) 
```

和：

```
void input(term t[], size_t size) 
```

两者意思相同。传递参数对两者都是一样的。当你有：

```
term t[SIZE]; 
```

然后其中任何一个都可以工作：

```
input(&t[0], SIZE); 
```

或者：

```
input(t, SIZE); 
```

显然，第二种更方便。和第一个意思一样；这只是一种更短的编写方式。C 允许这样做，因为传递数组第一个元素的地址是一种非常常见的操作。

# iphone - 如何为视图转换的一部分设置动画

> ID：13107685
> 
> 赞同：0
> 
> 时间：2012-10-28T09:25:28.100
> 
> 标签：iphone, objective-c, ios, uiview, cgaffinetransform

我最近偶然发现了一个问题，我有一个可以由用户旋转的视图。然而，在旋转期间，它应该大 10%（按比例放大）。

我希望缩放动画但旋转立即可见，因为我在手势识别器的回调中设置它没有动画。

**问题：**是否可以在不拦截动画比例的情况下更新`CGAffineTransform`的旋转，或者没有办法创建一个被缩放的环绕视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:53:13.413

编辑：

我认为缩放的包装视图将是最不容易出错的方式。

如果您非常想避免这种情况，您可以尝试使用 NSTimer 手动创建缩放动画。也许如果您先查询当前的变换值，然后修改它而不是用独立创建的变换值替换它（用于旋转和缩放），它可以工作。

我认为隐式 UIView 动画会在开始时计算所有后续值，因此会打乱您的旋转。

另一种方法是在缩放发生时锁定旋转。缺点是缩放和旋转不会同时进行。无论如何，您可以创建一个 iVar 或属性，让我们说`rotationLocked`和做某事。像这样：

```
- (void)handlePan:(UIPanGestureRecognizer *)gr
{
    if (gr.state == UIGestureRecognizerStateBegan)
    {
        self.rotationLocked = YES;
        [UIView animateWithDuration:.2 animations:^{
            [self scaleView];
        }completion:^{ self.rotationLocked = NO; };
    }
    if (gr.state == UIGestureRecognizerStateChanged)
    {
        if (!self.rotationLocked){
            // do the rotation
    }
    if (gr.state == UIGestureRecognizerStateEnded)
    {
        // do something else
    } 
```

# ios - 在 CAKeyframeAnimation 之后 UIButton 没有收到触摸

> ID：13107690
> 
> 赞同：2
> 
> 时间：2012-10-28T09:27:21.020
> 
> 标签：ios, uibutton, core-animation, cakeyframeanimation

我的情况：我有一个`UIButton`动画，它`CAKeyframeAnimation`被声明为一个类别`UIView`：

```
 CAKeyframeAnimation * scale =  [CAKeyframeAnimation animationWithKeyPath:@"transform.scale"];
    scale.duration = duration;
    scale.beginTime = delay;
    scale.fillMode = kCAFillModeForwards;

    NSMutableArray * times = [[NSMutableArray alloc] init];

    scale.values = values;
    scale.timingFunctions = times;

    CAAnimationGroup * group = [CAAnimationGroup animation];
    [group setDelegate:self];
    [group setDuration:duration + delay];
    [group setFillMode:kCAFillModeForwards];
    [group setRemovedOnCompletion:NO];
    [group setAnimations:[NSArray arrayWithObject:scale]];

    [self.layer addAnimation:group forKey:@"scale"]; 
```

问题是在动画之后，按钮没有收到触摸。如果我删除动画一切正常。有谁知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T09:52:14.297

您不应该使用 kCAFillModeForwards 和 removedOnCompletion = NO 将动画层粘贴在最终位置。这不适用于控件，并导致您注意到的行为。

相反，在将动画添加到其图层之前设置按钮的最终状态。

```
self.layer.transform = CGAffineTransformMakeScale(finalScaleX, finalScaleY);
[self.layer addAnimation:group forKey:@"scale"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T13:36:38.993

问题是动画只改变了按钮的呈现，但触摸目标仍然和以前一样。您应该在完成后删除动画并在按钮上设置变换或测试表示层。

我[在一篇博客文章](http://ronnqvist.tumblr.com/post/21228285860/hit-testing-animating-layers)中写了关于命中测试动画层的文章，其中更详细地解释了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T08:09:31.710

`self.layer.transform = CGAffineTransformMakeScale(finalScaleX, finalScaleY);`您必须在动画结束时插入以下代码行。

# ruby-on-rails - 通过'{}'解析字符串

> ID：13107696
> 
> 赞同：0
> 
> 时间：2012-10-28T09:28:51.613
> 
> 标签：ruby-on-rails, regex

输出的格式是`[{uuid, Readings}, {uuid, Readings}, {uuid,Readings}]`
（通常比这个长）

例如......（所有一个字符串，只是格式化为更容易看到）。

```
[{"uuid": "e2e38e4e-431d-508a-a5f9-e50eaffe6aab", "Readings": [[1351329301000.0, 0.0], [1351330202000.0, 0.0], [1351331102000.0, 0.0]]}, 

{"uuid": "8ed157d9-b31d-5075-bad6-69dfde7a34a4", "Readings": [[1351329301000.0, 0.0], [1351330202000.0, 0.0], [1351411200000.0, 494.0]]}, 

{"uuid": "8737f287-14df-5ccd-82df-e66ca7374b63", "Readings": [[1351329300000.0, 515.0], [1351330200000.0, 467.0], ]}] 
```

我想解析这个，以便我得到“{}”符号之间的所有内容，包括“{}”符号。

我不想分开其他任何东西。'{ }' 符号之间的所有内容都应作为一个字符串保持在一起。

我也感兴趣的是在最后的每个结果周围添加“[]”。

简单的例子：

```
[ {"uuid": 1, "Readings": [[2,3], [2,6]]}, {"uuid": 1, "Readings": [[5,6], [7,7]]} ] 
```

会产生一个数组，其中

```
element 0 = "[{"uuid": 1, "Readings": [[2,3], [2,6]]}]"
element 1 = "[{"uuid": 1, "Readings": [[5,6], [7,7]]}]" 
```

任何人都知道正则表达式来选择这样的东西吗？（顺便说一句，我在 Rails 上使用 ruby​​）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:35:11.620

这相当“hacky”，但我建议使用 JSON Parser 来解析它（你必须自己看看如何做到这一点，我确信有一个库或其他东西）。然后，您可以对返回数组中的每个对象进行字符串化，并将它们放入字符串数组中。

这是我在 javascript 中的做法（您可以将工作流程调整为 RoR）

```
objArray = JSON.parse(jsonString);
stringArray=[];
for (i=0; i<objArray.length; i++) {
    stringArray.push("[" + JSON.stringify(objArray[i]) + "]");
} 
```

**编辑**为什么要这样做让我感到困惑，因为将对象放在数组中会更有用

# spring - 使用 Spring-orm 的目的是什么？

> ID：13107700
> 
> 赞同：3
> 
> 时间：2012-10-28T09:29:40.503
> 
> 标签：spring, ibatis, spring-orm

我的项目中有以下 Maven 依赖项。

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>2.5.6</version>
</dependency> 
```

我们将 iBatis 用于 ORM。

*   赋予这种依赖的目的是什么？
*   如果我在 Spring 和 iBatis 之间建立桥梁，这是否需要？
*   一般来说Spring和iBatis是怎么联系起来的？

感谢您的答复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T10:01:47.233

> 赋予这种依赖的目的是什么？如果我在 Spring 和 iBatis 之间建立桥梁，这是否需要？

它添加了支持（粘合代码）以将各种 ORM 解决方案与 Spring 集成，包括 Hibernate 3/4、iBatis、JDO 和 JPA。当然它本身并不是一个 ORM，它只是一个桥梁。您仍然需要包含相关库。

> 一般来说Spring和iBatis是怎么联系起来的？

引用官方文档：[*12.5。iBATIS SQL 地图*](http://static.springsource.org/spring/docs/2.5.6/reference/orm.html#orm-ibatis)：

> iBATIS 支持与 Spring 的异常层次结构一起使用，让您享受 Spring 的所有 IoC 功能。
> 
> 事务管理可以通过 Spring 的标准工具来处理。

# objective-c - 具有非基础对象的 ARC

> ID：13107701
> 
> 赞同：3
> 
> 时间：2012-10-28T09:29:45.603
> 
> 标签：objective-c, automatic-ref-counting, clang

我已经制作了自己的 Objective-C 基类以在 Objective-C 项目中使用（没有 Foundation/Cocoa 类或 API）。虽然我不介意编写自己的保留和发布，但这是一个乏味的过程，所以我想知道是否可以将 ARC 与我的自定义类一起使用。

具体来说：

*   是否可以将 ARC 与自定义类一起使用？
*   我的引用计数选择器是否必须被调用`retain`和`release`（和`autorelease`）？
*   `-fobjc-arc`要使 ARC 按预期对自定义类工作（编译时包括参数除外），还有哪些额外要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:35:03.210

> 是否可以将 ARC 与自定义类一起使用？

当然是。

> 我的引用计数选择器是否必须称为保留和释放（和自动释放）？

是的，他们有。Apple 已将其最喜欢的 Objective-C 库（Foundation）的方法名称硬编码到编译器中。该死的糟糕的编程模式，不是吗？

> 要使自定义类的 ARC 按预期工作（编译时包括 -fobjc-arc 参数除外），还有哪些其他要求？

据我所知，什么都没有。

# c# - 懒评估不那么懒？

> ID：13107705
> 
> 赞同：3
> 
> 时间：2012-10-28T09:30:51.860
> 
> 标签：c#, lazy-evaluation

我一直听说 C# 使用惰性求值。因此，对于某些代码，例如，`if (true || DoExpensiveOperation()`将在`true`不执行的情况下返回`DoExpensiveOperation()`。

在一次面试测试中，我看到了以下问题，

```
static bool WriteIfTrue(bool argument)
{
    if (argument)
    {
        Console.WriteLine("argument is true!");
    }

    return argument;
}

static void Main()
{
    // 1              0                       0                 1
    WriteIfTrue((WriteIfTrue(false) & WriteIfTrue(true)) || WriteIfTrue(true));

    // 1               1                     0                      1
    WriteIfTrue((WriteIfTrue(true) || WriteIfTrue(false)) & WriteIfTrue(true));

    //  0                 0                  0                    0
    WriteIfTrue((WriteIfTrue(false) & WriteIfTrue(true)) & WriteIfTrue(false));

    // 1                1                      0                   1
    WriteIfTrue((WriteIfTrue(true) || WriteIfTrue(false)) & WriteIfTrue(true));
} 
```

它会打印多少次“argument is true!” 到屏幕上？

我会说`7`是正确的答案。现在，如果我坚持使用编译器并运行它，它会`10`多次打印！懒惰的评价到底哪里出错了？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-28T09:34:26.660

> 我一直听说 C# 使用惰性求值。

这对我来说太模糊了，无法同意。如果您说 C# 中的`||`and`&&`运算符是短路的，如果仅从第一个操作数无法确定总体结果，则仅评估第二个操作数，*那么*我同意它。惰性求值是一个更广泛的概念——例如，LINQ 查询使用惰性（或延迟）求值，在使用结果之前实际上并不获取任何数据。

您正在使用[`&`operator](http://msdn.microsoft.com/en-us/library/sbf85k1c.aspx)，它*不是*短路的：

> & 运算符会评估两个运算符，而不管第一个运算符的值如何。

[`&&`操作](http://msdn.microsoft.com/en-us/library/2a723cdk.aspx) *员*短路：

> 操作`x && y`对应的操作`x & y`除了如果`x`为假，`y`则不求值，因为无论 的值`y`是什么，AND 操作的结果都是假的。

替换`&`为`&&`代码中的任何地方，您会看到“参数为真！” 打印 8 次（不是 7 - 再次计算您的评论）。

# c# - 使用 c# 将 compmgmnt.msc 连接到远程主机

> ID：13107712
> 
> 赞同：0
> 
> 时间：2012-10-28T09:32:01.950
> 
> 标签：c#, cmd, mmc, runas

如何使用 c# 将 compmgmnt.msc 用于远程主机。我找到了这个...

在“cmd.exe”中执行此命令它正在工作并询问您密码：

```
/user:administrator \"mmc.exe compmgmt.msc /computer:IZADI-PC\ 
```

但我需要知道如何在 c# 中使用此命令。我还需要使用 c# 将密码传递给此命令。我有远程计算机的用户名和密码，我想以编程方式做所有事情。

我还参观了：

[http://www.lansweeper.com/forum/yaf_postst5116_Runas-Custom-Actions.aspx](http://www.lansweeper.com/forum/yaf_postst5116_Runas-Custom-Actions.aspx) [Process.Start 与 UAC 不同的凭据](https://stackoverflow.com/questions/2313553/process-start-with-different-credentials-with-uac-on)

先谢谢了！！！

任何人都编写示例代码以`/user:administrator \"mmc.exe compmgmt.msc /computer:IZADI-PC\`在 C# 中执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:54:25.517

```
ProcessStartInfo startInfo = new ProcessStartInfo();
                Process myprocess = new Process();
                myprocess.StartInfo.CreateNoWindow = true;
                myprocess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                myprocess.StartInfo.UseShellExecute = false;
                myprocess.StartInfo.Verb = "runas";
                myprocess.StartInfo.FileName = "cmd.exe";
                myprocess.StartInfo.UserName = "administrator";
                myprocess.StartInfo.Password = MakeSecureString("123456");
                myprocess.StartInfo.Arguments = "/k mmc.exe compmgmt.msc /computer:PC135-PC";
                myprocess.Start();
                myprocess.Close(); 
```

# jquery - 将 jquery 绑定到动态加载的内容

> ID：13107715
> 
> 赞同：2
> 
> 时间：2012-10-28T09:32:54.617
> 
> 标签：jquery

我有以下 html 树：

```
<div class="section yellow" id="section1">
    <div id="content-wrap1" class="content-wrap">
</div> 
```

我正在使用 ajax 将以下内容加载到`#content-wrap1`：

```
<div id="content">
    <a href="whoweare.php">Who we are</a>
    <a href="whatwedo.php">Our team</a>
    <p>ABOUT US : Dance is a type of art</p>
</div> 
```

成功发生，生成的 HTML 如下所示：

```
<div class="section yellow" id="section1">
    <div id="content-wrap1" class="content-wrap">.
        <div id="content">
        <a href="whoweare.php">Who we are</a>
        <a href="whatwedo.php">Our team</a>
        <p>ABOUT US : Dance is a type of art</p>
    </div>
</div> 
```

现在我想点击动态加载的链接来加载以下内容：

```
<div id="content">
    <a href="whoweare.php">Who we are</a>
    <a href="whatwedo.php">Our team</a>
    <p>Hi there! How are you?</p>
</div> 
```

使最终的 HTML 看起来像这样：

```
<div class="section yellow" id="section1">
    <div id="content-wrap1" class="content-wrap">.
        <div id="content">
        <a href="whoweare.php">Who we are</a>
        <a href="whatwedo.php">Our team</a>
        <p>Hi there! How are you?</p>
    </div>
</div> 
```

我听说我应该使用`on()`将 jquery 绑定到动态加载的内容。所以我做了以下事情：

```
('#section1').on("click", "#section1#content-wrap1#content a", function(){
    alert("1");
    toLoad = $(this).attr('href')+' #content';
    $('content-wrap1').load(toLoad);
} 
```

**问题1**：这是正确的用法`on()`吗？因为当我点击链接时，我没有进入`alert 1`屏幕，页面只是导航到`whoweare.php`

**问题2**：如果我确实设法收到警报，理论上是否可以点击加载内容的链接来替换最初点击的链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T09:36:49.307

**问题1：**这是 on() 的正确用法吗？因为当我单击链接时，我没有在屏幕上收到警报 1，页面只是导航到 whoweare.php

*   你错过了一个美元符号：`$`并且使用`document`你在同一个 id 上绑定相同的 id，这是不正确的，如果你热衷于：[什么是“$”符号在 javascript 中的含义](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)& 如果你更想知道为什么`.on` [有什么问题jQuery live 方法？](https://stackoverflow.com/questions/11115864/whats-wrong-with-the-jquery-live-method/11115926#11115926)

**代码**

```
$(document).on("click", "#content a", function(){
        alert("1");
        toLoad = $(this).attr('href')+' #content';
        $('content-wrap1').load(toLoad);
}) 
```

**问题2：**如果我确实设法收到警报，理论上是否可以点击加载内容的链接来替换最初点击的链接？

*   这可能会对您有所帮助：[jQuery 如何替换 src url](https://stackoverflow.com/questions/2127482/jquery-how-to-replace-src-url)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:35:22.990

**问题 1**

您的绑定语句应如下所示：

```
$(document).on("click", "#section1 #content-wrap1 #content a", function() {
    ...
}); 
```

请注意，我们现在绑定到`document`对象以容纳与`#section1 #content-wrap1 #content a`动态加载或以其他方式加载的第二个选择器 ( ) 匹配的任何和所有元素。

另外，请注意第二个选择器（空格）中的更正。

**问题 2**

*理论上是否有可能点击加载内容的链接替换首先点击的链接？*

**是的。完全。**

# apache - htaccess 从 *.ru 拒绝或从 .ru 拒绝

> ID：13107716
> 
> 赞同：0
> 
> 时间：2012-10-28T09:32:57.683
> 
> 标签：apache, .htaccess

我知道主机扩展阻止可能会导致不必要的服务器负载，但哪个是正确的？例如...

拒绝来自 *.ru

或者

拒绝来自.ru

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:55:18.543

根据[Apache 2.2 mod_authz 文档](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow)`deny from .ru`，它说主机语法与. 他们提供了一个例子：`Allow`

```
Allow from apache.org
Allow from .net example.edu 
```

# iphone - 从字符串转换为 int

> ID：13107717
> 
> 赞同：0
> 
> 时间：2012-10-28T09:33:13.320
> 
> 标签：iphone, objective-c, ios

我有这个代码：

```
NSString * firstdDigitTest = [numberString substringToIndex:1];

        if (! [firstdDigitTest isEqualToString:@"0"])
        {
            numberString = [numberString substringFromIndex:1];
            self.firstImageName = [namefile stringByAppendingString:firstdDigitTest];

        }

        self.number = [numberString integerValue]; 
```

我检查第一个数字是否不是 0，如果不是 0，我需要将其插入到`firstImageName`. 但是当我这样做（使用`substringFromIndex`）并且我尝试使用 integerValue 时，它​​是无效的！没有`substringFromIndex`它的作品！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:37:00.010

查看`[numberString intValue];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:53:06.407

```
NSString *str0 = @"XXX10098";
NSString *str1 = [str0 substringWithRange:NSMakeRange(4, str0.length-4)];
NSLog(@"%@", str1);

NSLog(@"%d", [str1 intValue]);

2012-10-28 10:52:07.309 iFoto[5652:907] 0098
2012-10-28 10:52:07.312 iFoto[5652:907] 98 
```

# android - 自定义图像查看速度变慢

> ID：13107722
> 
> 赞同：0
> 
> 时间：2012-10-28T09:33:52.350
> 
> 标签：android, android-layout, optimization, time

# 问题

你好呀，

我正在开发一个应用程序，用户在其中指定一些图片以及它们将在屏幕上显示多长时间。所以有时他想创建一个小动画之类的东西或在一小段时间内查看图像。问题是一段时间后，图像没有在应该预览的时候进行预览，并且我们有几毫秒的错误。在我正在开发的应用程序中，时间很重要，所以我想要一些关于问题可能是什么的帮助。

# 编码

所以让我解释一下它是如何工作的。我从我的网络应用程序中拍摄照片，然后将它们保存在 HashMap 中

```
Bitmap image = ImageOperations(url,String.valueOf(frameNum) + ".jpg");

ImageMap.put(String.valueOf(frameNum), image); 
```

其中的方法 ImageOperations 是这样的：

```
private Bitmap ImageOperations(String url, String saveFilename) {
        try {
            Display display = getWindowManager().getDefaultDisplay();
            InputStream is = (InputStream) this.fetch(url);
            Bitmap theImage = BitmapFactory.decodeStream(is);
            if (theImage.getHeight() >= 700 || theImage.getWidth() >= 700) {
                theImage = Bitmap.createScaledBitmap(theImage,
                        display.getWidth(), display.getHeight() - 140, true);
            }
            return theImage;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }

    } 
```

所以后来我运行了一个线程，当用户指定时更新 UI。更新它的方法就是这个。

```
public void setPictures(int NumOfFrame) {
if (frameArray.get(NumOfFrame - 1).frame_pic.contains("n/a") != true) {
ImagePlace.setImageBitmap(ImageMap.get(String.valueOf(NumOfFrame)));
} else {
        ImagePlace.setImageDrawable(null);
}

} 
```

更新图像后，我们将线程置于睡眠状态，当再次运行时，它会更新线程。是否有什么造成问题的原因？它与垃圾收集有关吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:06:33.097

问题可能在于加载其他图像时增加堆大小。我建议您进行一些[分析](http://developer.android.com/tools/debugging/debugging-tracing.html)，这样事情会更加清晰，您将全面了解应用程序的时间安排。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:43:58.603

首先，您在这里缺少一个空检查：

```
ImageMap.get(String.valueOf(NumOfFrame)) 
```

而且您不会在这里回收旧位图：

```
theImage.recycle(); // missing line
theImage = Bitmap.createScaledBitmap(theImage,
                        display.getWidth(), display.getHeight() - 140, true); 
```

它可能会导致内存不足异常，这很可能来自您对问题的描述。

我也不确定`BitmapFactory.decodeStream`当他失败时是否抛出异常。您还需要在那里添加一个空点检查。

# c# - SQL 文本无法在网格窗格和图表窗格中表示

> ID：13107723
> 
> 赞同：5
> 
> 时间：2012-10-28T09:33:57.643
> 
> 标签：c#, sql-server, view, entity-framework-4.1

我正在研究实体模型。我将视图更新为实体模型，但此视图未显示正确的数据。

我在谷歌上搜索，一些成员建议在视图中再添加一列。所以，我只是在视图中添加了一列：

`row_number() over (order by Employee.EmployeeID) as PK,`

在 Employee 表中，该`EmployeeId`列是标识列。

我运行实体模型。现在，视图显示正确的数据。问题是当我在 SQL 中看到视图设计时，它没有显示。当我`row_number()`从视图中删除它时，它会显示在视图的设计中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-22T09:31:03.573

某些查询对于 Management Studio 来说太复杂而无法可视化。因此，即使您的查询是正确的并显示结果，您也不会看到可视化设计器。

# svn - Linux（Ubuntu）。SVN + TRAC。在 TRAC 中显示 SVN 项目

> ID：13107724
> 
> 赞同：2
> 
> 时间：2012-10-28T09:34:20.670
> 
> 标签：svn, ubuntu, trac

我已经安装了 trac + svn (Linux Ubuntu)。TRAC 必须能够看到 SVN 存储库中的文件列表。

在 localhost/trac/browser/ 我看到错误：

```
"Unsupported version control system "svn": libneon-gnutls.so.27: cannot open shared object file: No such file or directory" 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T13:16:27.030

这是一个常见的错误，但是 subversion 库有两种不同的 Python 绑定。Trac 的 Subversion 集成所需的是`python-subversion`Ubuntu 软件包，而不是**软件包**`python-svn`，因此您**需要安装该`python-subversion`软件包**（请参阅[Trac 和 Subversion](http://trac.edgewall.org/wiki/TracSubversion#TracandSubversion)）。

# java - 使用 EJB 实现 XML

> ID：13107727
> 
> 赞同：0
> 
> 时间：2012-10-28T09:34:55.163
> 
> 标签：java, xml, ejb

我想知道什么样的 XML 实现提供 EJB？是否有 Saxbuilder 或其他实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:57:48.070

SAX 和 DOM 实现都是标准 Java 运行时库的一部分。您无需导入任何内容即可使用它们。

请注意，这与 EJB 无关。您可以在任何 Java 应用程序中使用 SAX 和 DOM

# functional-programming - 当函数式编程看起来不可避免时，它如何避免状态？

> ID：13107734
> 
> 赞同：3
> 
> 时间：2012-10-28T09:36:10.573
> 
> 标签：functional-programming, state

假设我们定义了一个函数`c sum(a, b)`，函数式编程风格，它返回其参数的总和。到现在为止还挺好; FP的所有美好事物都没有任何问题。

现在假设我们在具有动态类型和单例、有状态错误流的环境中运行它。然后假设我们传递了一个`a`和/或`b`不是`sum`设计用于处理的值（即不是数字），并且它需要以某种方式指示错误。

但是怎么做？这个函数应该是纯粹的和无副作用的。它如何在不违反该规则的情况下将错误插入到全局错误流中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T11:08:26.477

我所知道的任何编程语言都没有内置“单一状态错误流”之类的东西，因此您必须制作一个。如果您试图以纯函数式风格编写程序，那么您根本*不会做这样的事情。*

但是，您可以有一个 sum 函数来返回总和或错误指示。用于执行此操作的类型实际上通常以名称而闻名`Either`。然后，您可以轻松地创建一个函数来调用可能返回错误的一大堆计算，并返回在其他计算中遇到的所有错误的列表。这与您所说的非常接近；它只是显式返回而不是全局的。

请记住，当您编写函数式程序时，问题是“我如何制作具有我想要的行为的程序？” 不是，“我将如何复制另一种编程风格中采用的一种特定方法？”。“全局状态错误流”是一种*手段*而不是*目的*。您不能拥有纯函数样式的全局有状态错误流，不。但是问问自己，你使用全局有状态错误流来*实现*什么；不管是什么，你都可以在函数式编程中实现*，*只是机制不同。

询问纯函数式编程是否可以实现依赖于副作用的特定技术就像询问您如何在面向对象编程中使用汇编技术。OO 提供了不同的工具供您使用来解决问题；限制自己使用这些工具来模拟不同的工具集并不是使用它们的有效方法。

* * *

**回应评论：**如果你想用你的错误流*实现*的是将错误消息记录到终端，那么是的，在某种程度上，代码将不得不做 IO 来做到这一点。¹

打印到终端就像任何其他 IO 一样，没有什么特别之处，因此值得将其作为状态似乎特别不可避免的情况单独列出。因此，如果这将您的问题变成“纯函数式程序如何处理 IO？”，那么毫无疑问，SO 上有很多重复的问题，更不用说很多博客文章和教程正是针对这个问题。对于纯编程语言的实现者和用户来说，这并不是一个突然的惊喜，这个问题已经存在了几十年，并且已经在答案中加入了一些相当复杂的想法。

不同的语言采用了不同的方法（`IO`Haskell 中的 monad，Mercury 中的独特模式，Haskell 历史版本中的延迟请求和响应流，等等）。基本思想是提出一个可以由纯代码操作的模型，并将模型的操作与语言实现中的实际不纯操作挂钩。这使您可以保持纯度的好处（适用于纯代码但不适用于一般不纯代码的证明仍适用于使用纯 IO 模型的代码）。

必须仔细设计纯模型，以便您实际上不能用它做任何在实际 IO 方面没有意义的事情。例如，Mercury 通过让您编写程序来执行 IO，*就好像*您将宇宙的当前状态作为额外参数传递一样。这个纯模型准确地表示了依赖和影响程序外部宇宙的操作的行为，但只有当系统中的宇宙在任何时候都恰好存在一种状态时，它才会从头到尾贯穿整个程序. 所以设置了一些限制

1.  该类型`io`是抽象的，因此无法构造该类型的值；你能得到一个的唯一方法是从你的来电者那里得到一个。语言实现将一个`io`值传递给`main`谓词以启动整个过程。
2.  `io`传入的值的模式`main`被声明为是唯一的。这意味着您不能做可能导致重复的事情，例如将其放入容器中或将相同的`io`值传递给多个不同的调用。唯一模式确保您只能将`io`值分配给也使用唯一模式的谓词，并且一旦您传递它，一旦值“死”并且不能传递到其他任何地方。

* * *

¹请注意，即使在命令式程序中，如果您的错误记录系统返回错误消息流，然后实际上只决定在程序的最外层附近打印它们，您就会获得很大的灵活性。如果您的日志调用立即直接写入输出，那么我能想到的一些事情在这样的系统中变得更加困难：

*   推测性地执行计算并通过检查它是否发出任何错误来查看它是否失败
*   将多个高级系统合并为一个系统，在日志中添加标签以区分每个系统
*   仅在还有错误消息时才发出调试和信息日志消息（因此，当没有要调试的错误时输出是干净的，当有错误时输出是丰富的）

# php - str_replace() 仅使用单引号

> ID：13107740
> 
> 赞同：-1
> 
> 时间：2012-10-28T09:36:54.100
> 
> 标签：php, str-replace

我在一件简单的事情上遇到了麻烦，经过很长时间试图找出问题后，我意识到 str_replace 不适用于简单的引号。这是我的代码：

```
<?php
$replaceNL1=str_replace("\n", "NEWLINE", $_POST['txt']);
echo $replaceNL1;
$replaceNL2=str_replace('\n', 'NEWLINE', $_POST['txt']);
echo '<hr>' . $replaceNL2;
?> 
```

只做`$replaceNL2`替换。在第一个变量上，它的行为就像没有任何`str_replace()`. 这从来没有发生在我身上。

我正在使用 UTF-8 字符集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T09:39:39.157

单引号和双引号在 PHP 中是不同的东西。

[PHP 字符串](http://pl.php.net/manual/en/language.types.string.php)：

> 单引号
> 
> 指定字符串的最简单方法是将其括在单引号中（字符 '）。
> 
> 要指定文字单引号，请使用反斜杠 () 对其进行转义。要指定文字反斜杠，请将其加倍 (\)。**所有其他反斜杠实例都将被视为文字反斜杠：这意味着您可能习惯使用的其他转义序列，例如 \r 或 \n，将按照指定的字面意思输出，而不是具有任何特殊含义**。

`"\n"`换行符也是如此，而`'\n'`两个字符（字面`\n`意思）是没有特殊含义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T09:39:54.863

```
"\n" - String that contains newline character
'\n' - String that contains two characters, a backslash \ and the letter n 
```

所以你刚刚发现了 php.ini 中单引号和双引号的区别。

# gnome-shell-extensions - 编写 GNOME Shell 扩展的文档

> ID：13107743
> 
> 赞同：71
> 
> 时间：2012-10-28T09:37:09.983
> 
> 标签：gnome-shell-extensions

我被要求自定义 GNOME 3 桌面的布局。显然，这样做的方法是编写一个“扩展”。

我已经设法完成了一些我想做的事情，但我感到完全*缺乏*信息。*我在任何地方都*找不到任何有用的文档。我浪费了一*整天*的时间在谷歌上疯狂地搜索每一个可以想象的搜索词，拼命地试图找到有用的信息。

GNOME 网站有*数百个*扩展可供下载。这些不是微不足道的 3 线；它们是复杂的代码片段。它不相信任何人都可以在没有解释如何做的文档的情况下编写这些。

拜托，有人能告诉我实际文件在哪里吗？到目前为止，我能做的最好的事情就是拆开现有的扩展，试图追踪执行我感兴趣的特定部分的魔法命令。（这不是一件容易的事！）

命令名称、对象路径、示例程序，*任何东西*都会有帮助！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-09T20:17:24.020

我最近自己研究了它。文档通常很少或过时。以下是一些帮助我开始（并通过开发）的资源：

*   [基本资料](https://live.gnome.org/GnomeShell/Extensions)
*   [开发的基本资料](https://live.gnome.org/GnomeShell/Development)
*   [分步教程（Gnome 3.4）](https://live.gnome.org/GnomeShell/Extensions/StepByStepTutorial)
*   [**许多库的 JavaScript 绑定的非官方文档**](http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/index.html)
*   [**gnome-shell 的 JavaScript 绑定的来源**](http://git.gnome.org/browse/gnome-shell/tree/js)
*   [St (Shell Toolkit) Ui-Toolkit 组件的解释。](http://mathematicalcoffee.blogspot.de/2012/09/gnome-shell-javascript-source.html)
*   [在 extensions.gnome.org 上获取扩展的一些非官方指南](http://blog.mecheye.net/2012/02/requirements-and-tips-for-getting-your-gnome-shell-extension-approved/)

由于文档几乎不可用（或最新），您需要进行**大量**源代码阅读。我链接了上面的 gnome-shell 源代码（JavaScript 部分），这是一个很好的开始，可以深入研究非官方文档（这是您会找到的最完整的内容）未涵盖的部分。

还有一点特别有用的是检查[extensions.gnome.org](https://extensions.gnome.org)是否有与您想要创建的内容类似的扩展，并查看它们的源代码（其中大部分是 GitHub 或 Bitbucket 上的开源。您也可以安装它们并找到下的来源`~/.local/share/gnome-shell/extensions/`）。

在搜索要使用的东西或特定函数的更多文档时，您还可以查阅不同语言的绑定手册（认为参数和返回值可能不匹配）。

* * *

最后但同样重要的是，这里有一些**调试建议**：

LookGlass 并不是特别有用。它只显示一行异常（描述），并且仅当它们发生在启动时（当您的扩展程序首次启动时）。

有关完整的 StackTraces 和运行时异常，请查阅`~/.xsession-errors`-file。它可能很长而且很臃肿。我使用这个[方便的脚本](https://bitbucket.org/LukasKnuth/backslide/src/561b1dbe542a/session-error.sh)来阅读它：

```
# Grabs the last session-errors from the current X11 session.
# This includes full Stack-Trace of gnome-shell-extension errors.
# See https://live.gnome.org/GnomeShell/Extensions/StepByStepTutorial#lookingGlass
tail -n100 ~/.cache/gdm/session.log | less 
```

> **请注意**，从 Gnome 3.6 开始，如果您`gdm`用作显示管理器，则当前会话日志是文件`~/.cache/gdm/session.log`.

在一些使用 systemd 的较新发行版上，您可以通过以下方式获取错误日志：

```
journalctl -f /usr/bin/gnome-session 
```

要**调试**扩展的首选项部分，您可以`gnome-shell-extension-prefs`从终端使用 -tool 启动首选项，以查看控制台上的任何异常输出（您也可以调用该工具，如`gnome-shell-extension-prefs [uuid]`，直接显示您的扩展首选项）。

由于目前还没有真正的断点调试方法（有，但[很棘手](https://live.gnome.org/GnomeShell/Debugging)），您可以**登录控制台**进行快速检查，使用`print()`-function。您将看到上述输出（在会话错误文件中或启动`gnome-shell-extension-prefs`-tool 时在终端上）。

* * *

虽然进入它可能有点困难，但扩展框架非常强大。玩得**开心**！

* * *

我写了一篇**更详细的博客文章**，可以在这里找到：[制作 Gnome-Shell 扩展](http://codeisland.org/2013/making-gnome-shell-extensions)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-10T05:41:58.637

可以在[Gnome Developer - API 参考](http://developer.gnome.org/references)页面上找到广泛的参考列表。

我将以下内容用于我的扩展，但您的使用可能会有所不同：

*   **[GTK+ 3](https://developer.gnome.org/gtk3/stable/)**
    GTK+ 是用于在 GNOME 应用程序中构建用户界面的主要库。它提供用户界面控件和信号回调来控制用户界面。

*   **[GDK 3](https://developer.gnome.org/gdk3/stable/)**
    GDK 是一个中间层，它将 GTK+ 与窗口系统的细节隔离开来。

*   **[Clutter](https://developer.gnome.org/clutter/stable/)**
    Clutter 是一个基于 GObject 的库，用于创建快速、视觉丰富的图形用户界面。

*   **[GObject Introspection](https://developer.gnome.org/gi/stable/)**
    GObject Introspection 致力于在（基于 GObject 的）C 库和语言绑定之间提供一个中间件层。

*   **[外壳](https://developer.gnome.org/shell/stable/)**
    外壳参考手册

*   **[St](https://developer.gnome.org/st/stable/)**
    St - *Shell Toolkit* - 是 GNOME Shell 的自定义基于 Clutter 的工具包，它定义了有用的 actor。其中一些参与者，例如`[StBoxLayout](https://developer.gnome.org/st/stable/StBoxLayout.html)`并`[StBin](https://developer.gnome.org/st/stable/StBin.html)`实现各种布局选项。

*   **[图标主题规范](https://developer.gnome.org/icon-theme-spec/)**
    此[freedesktop.org](http://www.freedesktop.org/wiki/)规范描述了存储图标主题的常用方法。

**注意：**最后两个对于查找视觉元素参数非常有帮助！

*   **[PyGTK](https://developer.gnome.org/pygtk/stable/)**
    PyGTK 是 Python 的 GTK+。此参考包含每个 Python PyGTK 模块（对应于底层 GTK+ 库）的一章，其中包含类描述。

*   **[PyGObject](https://developer.gnome.org/pygobject/stable/)**
    PyGObject 是一个 Python 扩展模块，它通过使用 GObject Introspection 提供对整个 GNOME 软件平台的清晰一致的访问。具体来说，它是 GLib、GObject、GIO 和 GTK+ 的 Python 绑定。
    此参考包含包含类描述的每个 PyGObject 模块的一章。

# c - 未命名的管道在我的代码中不起作用

> ID：13107748
> 
> 赞同：0
> 
> 时间：2012-10-28T09:38:14.223
> 
> 标签：c, pipe

我得到了一些奇怪的输出：

```
Read 0 bytes: P
?\? 
```

从我的代码：

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>

char phrase[0] = "stuff this in your pipe and smoke it";
int main(int argc, char* argv[]) {
    int fd[2], bytesRead;
    char message[100];
    int pid;
    pid = fork();
    pipe(fd);
    if (pid == 0) {
        close(fd[0]);
        write(fd[1], phrase, strlen(phrase) + 1);
        close(fd[1]);
    }else {
        close(fd[1]);
        bytesRead = read(fd[0], message, 100);
        printf("Read %d bytes: %s\n", bytesRead, message);
        close(fd[0]);

    }
} 
```

我不知道我哪里出错了，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:39:33.493

> ```
> pid = fork();
> pipe(fd); 
> ```

当子进程从父进程继承描述符时，此示例有效。你会想`pipe` **在你之前`fork`**打电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T09:48:33.253

@cnicutar 已经回答了一个问题。另一个问题是：

```
 char phrase[0] = "stuff this in your pipe and smoke it"; 
```

声明一个长度为 0 的数组，并且您正在存储一个更长的字符串。

将其更改为：

```
char phrase[] = "stuff this in your pipe and smoke it"; 
```

C 标准要求数组的大小应大于零。

**从 C99，6.7.5.2 开始：**

> 如果它们分隔了一个表达式（它指定了一个数组的大小），则该表达式应为整数类型。如果表达式是常量表达式，它的值应大于零。

# c# - 如何从 jqgrid 数据中填充文档标题

> ID：13107750
> 
> 赞同：1
> 
> 时间：2012-10-28T09:39:08.557
> 
> 标签：c#, jquery, asp.net-mvc, jqgrid

ASP .NET MVC2 页面包含订单标题数据（订单号、客户、订单数据等）：

```
<form id='_form' class='form-fields' action='' onsubmit='SaveDocument();return false;'>
<input id='Number' name='Number' />

<select id='PaymentTerm' name='PaymentTerm'>
<option value=''></option><option value='0'>Cash</option>
<option value='10'>10 days</option>
</select>

</form> 
```

和 jqgrid 中显示的订单行。

我正在寻找一种方法来从控制器的 json 日期填充订单头数据，就像 jqgrid 填充数据一样。为了最小化请求，最好在 jqgrid 数据请求中返回标头数据。对于这个附加参数 documentId 被传递给控制器​​。

GetData 将文档标题作为文档对象中的名称值对返回。如何在 jqgrid loadcomplete 或其他地方将这些值分配给浏览器中的表单元素？

```
public JsonResult GetData(int page, int rows, string filters,
          int documentId )

{
    var query = ...;
    var totalRecords = query.Count();

    var documentHeader = new FormCollection();
    // In production code those values are read from database:
    documentHeader.Add("Number", 123);  // form contains input type='text' name='Number' element
    documentHeader.Add("PaymentTerm", "10"); // form contains select name='PaymentTerm' element
    ...

    return Json(new {
        total = page+1,
        page=page,
        document = documentHeader,
        rows = (from item in query
                select {
                    id = item.Id.ToString(),
                    cell = new[] {
                        item.ProductCode,
                        item.ProductName,
                        item.Quantity,
                        item.Price
                    }
                 }).ToList()
    },
    JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:24:04.640

如果我理解正确您的问题，您可以使用`beforeProcessing`或`loadComplete`回调来根据服务器的响应填写表单数据。`data`两个回调（`beforeProcessing`或）的第一个参数`loadComplete`将包含*从服务器返回的所有数据*。因此，您可以访问 的`document`属性，`data`它的格式与服务器上的格式相同。

我不确定你为什么使用`document`type `FormCollection`。在我看来，使用匿名类型的数据是最原生的：

```
return Json(new {
    total = page + 1,
    page = page,
    document = new {
        number = 123,
        paymentTerm = 10
    },
    rows = (...)
},
JsonRequestBehavior.AllowGet); 
```

但确切的类型`document`可能并不那么重要。

或者你`beforeProcessing`可以`loadComplete`只使用相同格式的相应属性`data.document`。例如

```
beforeProcessing: function (data) {
    var hearderData = data.document;
    if (hearderData) {
        if (hearderData.number) {
            $("#Number").val(hearderData.number);
        }
        if (hearderData.paymentTerm) {
            $("#PaymentTerm").val(hearderData.paymentTerm);
        }
    }
} 
```

# c# - How to make a textbox disable but selectable

> ID：13107752
> 
> 赞同：3
> 
> 时间：2012-10-28T09:39:28.687
> 
> 标签：c#, winforms, visual-studio-2010

How to make a textbox disable but selectable in C# winform VS 2010?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T09:42:54.653

You can use the ReadOnly property:

```
textbox.ReadOnly = true; 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.readonly.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.readonly.aspx)

# javascript - 谷歌脚本文本区域或文本框不想给我文本

> ID：13107759
> 
> 赞同：1
> 
> 时间：2012-10-28T09:40:15.417
> 
> 标签：javascript, textbox, google-apps-script

如何从 textarea 或 textbox 获取文本。

```
function myClickHandler() {
    var app = UiApp.getActiveApplication();
    var textbox = app.getElementById("TextBox1");
    var text = textbox.text;
    textbox.setText(text + "1");
    return app;
} 
```

运行此函数后在我的文本区域中：“undefined1”。

在 googledevelopers 帮助页面上[https://developers.google.com/apps-script/class_textbox](https://developers.google.com/apps-script/class_textbox) 不是 getText 方法。

如何从文本框中获取文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:57:23.810

不是`textbox.text`。应该是`textbox.value`。

```
function myClickHandler() {
    var app = UiApp.getActiveApplication();
    var textbox = app.getElementById("TextBox1");
    var text = textbox.value;
    textbox.setText(text + "1");
    return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:50:51.283

为了将小部件的值传递给回调处理程序，您必须做两件事：

1.  创建小部件时为其指定名称。
    `texbox.setName('foo');`
2.  将小部件作为回调元素添加到您创建的服务器处理程序。
    `clickHandler.addCallbackElement(textbox);`

如果你这样做了，那么文本框的值将在你的回调函数的事件参数中传递。

```
function myClickHandler(event) {
  var textboxValue = event.parameters['foo'];
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:56:07.577

尝试这个 -

```
 var text = textbox.value; 
```

# java - 等待批处理结束

> ID：13107764
> 
> 赞同：3
> 
> 时间：2012-10-28T09:41:07.600
> 
> 标签：java, batch-file, runtime.exec

我的`bat`文件中有 4 行，但我的线程在 cmd 关闭之前继续。

这是我的代码：

```
rt = Runtime.getRuntime();
proc = rt.exec("cmd /c start C:\\temp\\test.bat");
if(proc.waitFor() == 0) {
    return "did it";
} else {
    return "nooope";
} 
```

我总是`did it`在 cmd 关闭之前得到。这是我的批处理文件：

```
@ECHO off
taskkill /IM "Process.exe" /F
cd "C:\Program Files\ProcessFolder"
START /WAIT Process.exe
START otherProcess.exe
EXIT 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T09:46:28.297

问题是您正在使用`start`- 它将启动一个*新*的shell 来运行批处理文件。原来的 shell 然后关闭，所以进程终止，你的 Java 程序继续。

`start`就等待批处理文件结束而言，删除它应该可以工作。但是，当您启动`otherProcess`.

要么不使用`start`，要么*总是*`start /wait`在批处理文件中使用。

但是，如果您`start /wait`在 Java 代码中使用，那么据我通过实验可以看出，在批处理文件执行结束时，您最终会看到一个命令提示符。

# visual-studio-2010 - TFS 2010 版本控制

> ID：13107767
> 
> 赞同：2
> 
> 时间：2012-10-28T09:41:46.440
> 
> 标签：visual-studio-2010, version-control, tfs

我们想开始在我们的项目中使用 TFS 版本控制。我阅读了教程并注意到 TFS 在 sql db 中创建表。我的问题是：

1.  这些桌子是干什么用的？
2.  vs解决方案实际存储在哪里？
3.  如何从另一台计算机（另一位开发人员）使用我们解决方案的多个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:29:44.863

1.  TFS 将几乎所有的数据都存储在几个 SQL 数据库中：源代码控制、工作项、构建定义、构建结果等。

2.  在团队项目集合的 SQL 数据库中，关于哪些表等的细节对您来说并不重要。用户设置一个工作区，将源代码控制中的目录结构映射到他们本地磁盘上的某个位置。

3.  我不确定你在这里问什么，你能试着澄清你的问题吗？

# wpf - 剪裁装饰层

> ID：13107772
> 
> 赞同：2
> 
> 时间：2012-10-28T09:42:55.200
> 
> 标签：wpf, adorner, adornerlayer

我有一个`PanZoomImage`这样定义的类：

```
<Border Grid.Row="0" Name="border" ClipToBounds="True">
    <Canvas Name="canvas">
        <Image Name="image" RenderOptions.BitmapScalingMode="NearestNeighbor" Stretch="None" 
           Source="{Binding Path=Source}"
           MouseLeftButtonDown="image_MouseLeftButtonDown"
           MouseLeftButtonUp="image_MouseLeftButtonUp"
           MouseMove="image_MouseMove"
           MouseWheel="image_MouseWheel"
           Loaded="image_Loaded">
        </Image>
    </Canvas>
</Border> 
```

有时我想在图像上显示装饰器，所以我有一个属性可以为我`AdornerLayer`提供图像：

```
public AdornerLayer Adorners
{
    get
    {
        return AdornerLayer.GetAdornerLayer(image);
    }
} 
```

我使用此属性为图像添加不同的装饰器。问题是当我平移或缩放图像时， aodrners 不会被剪裁并显示在包含 的控件之外`PanZoomImage`，如下所示： ![无剪裁](../Images/ac1666f9389bda034f589705adfc710d.png)

我尝试了几种解决方案：

我尝试设置`ClipToBounds=True`边框、画布和图像。

我尝试为每个 Adorner 分别设置`ClipToBounds=True`和`AdornerLayer`。

我尝试在 Adorner 的 OnRender 中设置剪辑几何。

我还注意到`IsClipEnabled`Adorner 有一个属性，但是当我尝试将其设置为 true 时，我不断收到 NullReferenceException（即使 Adorner 绝对不为空）...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T13:59:21.613

该`IsClipEnabled`物业工作。`NullPointerException`如果装饰控件没有父控件，则抛出。在设置之前，您必须将控件放入某个容器中`IsClipEnabled`。

# jquery - 从控制器获取 Json 数据

> ID：13107773
> 
> 赞同：0
> 
> 时间：2012-10-28T09:42:58.947
> 
> 标签：jquery, json, codeigniter

我需要在我的表单中创建动态选择。我编写了这段代码以从我的控制器（CodeIgniter）中动态地获取它，该控制器从模型中获取数据。

这是脚本：

```
<script type="text/javascript">
   $(document).ready(function(){
                    $("select#regione").change(function(){
                        $.getJSON("http://test:8888/ricerca/test",{id: $(this).val()}, function(dati){
                            var options = '';
                            for (var i = 0; i < dati.length; i++) {
                                options += '<option value="' + dati[i].valore + '">' + dati[i].etichetta + '</option>';
                            }
                            $("#provincia").html(options);
                            $('#provincia option:first').attr('selected', 'selected');
                        });
                    });
                });
            </script> 
```

这是下拉表单：

```
<form action="base_url().'ricerca'" method="post">
<select name="regione" id="regione">
<option value="">No option</option>
<option value="Lombardia">Lombardia</option>
<option value="Lazio">Lazio</option>
</select>

<select name="provincia" id="provincia">
</select>
</form> 
```

这是控制器：

```
class Ricerca extends CI_Controller
{
 public function test()
{
 $dati = array();
         array_push($dati,array("valore"=>"ciao", "etichetta"=>"ciao"));
         array_push($dati,array("valore"=>"mamma", "etichetta"=>"mamma"));
         return json_encode($dati);
}
} 
```

在模型中进行查询之前，我会查看我的脚本是否有效，但是如果我在第一个选择中选择一个名为“Regione”的选项，则脚本什么也不做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:10:32.530

您必须从控制器函数中回显 json 数据才能返回数据

```
public function test()
{
 $dati = array();
         array_push($dati,array("valore"=>"ciao", "etichetta"=>"ciao"));
         array_push($dati,array("valore"=>"mamma", "etichetta"=>"mamma"));
         echo json_encode($dati);
} 
```

或者你可以做

```
public function test()
    {
     $dati = array();
             array_push($dati,array("valore"=>"ciao", "etichetta"=>"ciao"));
             array_push($dati,array("valore"=>"mamma", "etichetta"=>"mamma"));
             $this->output
    ->set_content_type('application/json')
    ->set_output(json_encode($dati));
    } 
```

# batch-file - 带有 robcopy 的批处理文件

> ID：13107776
> 
> 赞同：1
> 
> 时间：2012-10-28T09:43:25.793
> 
> 标签：batch-file

我在批处理文件中与 robcopy 一起使用。我希望如果这些批处理文件将在没有安装 robcopy 的操作系统上运行，则有关它的错误将出现在 loG 文件中。有关它的错误是：

> 'robocopy' 不是内部或外部命令、可运行程序或批处理文件。

我的代码是：

```
robocopy Obl\BR "%WEBDIR%\BR"  /E /LOG+:%TMPLog% >nul 
```

但是这个错误只出现在控制台上，不会出现在 TMPLog 中。也许这种错误不应该出现在日志中？如果是，我能做什么？也许尝试捕获它是否存在于批处理文件中？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:59:26.397

我现在不在我的 Windows 7 PC 上，所以无法真正验证这件事，但记录使用重定向的*输出*是否与使用交换机记录相同？如果是这样，您可以将（发送消息的位置）重定向到和您的文件，如下所示：`robocopy``>>``/LOG+``stderr``not recognized``stdout``stdout``%TMPLog%`

```
robocopy Obl\BR "%WEBDIR%\BR"  /E >>%TMPLog% 2>&1 
```

# citrix - 带有流式应用程序的 ICA 协议 - XenApp

> ID：13107778
> 
> 赞同：0
> 
> 时间：2012-10-28T09:44:04.817
> 
> 标签：citrix, xenapp

我正在研究 XenApp，我知道将应用程序托管到 XenApp 服务器时会使用 ICA 协议。

但是在将应用程序从 xenapp 流式传输到客户端时是否也使用 ICA 协议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:14:23.013

Citrix 应用程序流是一种类似于 Microsoft 的 App-V 的应用程序虚拟化技术。流式（又名虚拟化）应用程序被打包在所谓的配置文件中，该配置文件被传输到客户端以供本地执行。传输可以通过以下协议进行：

*   SMB（又名 CIFS）
*   HTTP
*   HTTPS

进一步阅读：[应用程序流传输和分析最佳实践](http://support.citrix.com/servlet/KbServlet/download/18183-102-641274/AppStreamingDeliveryProfilingBestPractices.pdf)

# ruby - Ruby中的反向哈希

> ID：13107780
> 
> 赞同：0
> 
> 时间：2012-10-28T09:44:44.057
> 
> 标签：ruby, hash

给定这样的哈希：

```
{ "key_1" => ["value1","value2","value3"], "key_2" => ["value4","value5"], ...} 
```

我怎样才能得到这样的哈希：

```
{ "value1" => "key_1", "value2" => "key_1", "value3" => "key_1", "value4" => "key_2", "value5" => "key_2" } 
```

我试过这个：

```
Hash[original_hash.flat_map { |key, values| original_hash.map { |value| [value, key] } }] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T09:58:56.807

```
hash.each_with_object({}) { |(key,values),h| values.each { |v| h[v] = key } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:50:20.307

像往常一样遍历哈希：

```
h = { "key_1" => ["value1","value2","value3"], "key_2" => ["value4","value5"]}
newh = {}
h.each do |key, vals|
  vals.each { |v| newh[v] = key }
end

p newh
#=> {"value1"=>"key_1", "value2"=>"key_1", "value3"=>"key_1", "value4"=>"key_2", "value5"=>"key_2"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:51:51.193

鉴于此哈希：

```
> h = { "key_1" => ["value1","value2","value3"], "key_2" => ["value4","value5"]}
=> {"key_1"=>["value1", "value2", "value3"], "key_2"=>["value4", "value5"]} 
```

你可以这样做：

```
> h.map{ |k, v| v.map{ |f| { f => k }}}.flatten
=> [{"value1"=>"key_1"}, {"value2"=>"key_1"}, {"value3"=>"key_1"}, {"value4"=>"key_2"}, {"value5"=>"key_2"}] 
```

更新的答案：

```
> h.inject({}){ |h, (k,v)| v.each{ |f| h[f] = k }; h }
=> {"value1"=>"key_1", "value2"=>"key_1", "value3"=>"key_1", "value4"=>"key_2", "value5"=>"key_2"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-04T16:19:06.867

鉴于您的哈希：

```
Hash = { "key_1" => ["value1","value2","value3"], "key_2" => ["value4","value5"]} 
```

我将您的哈希称为“哈希”，以便我们可以反转它。反转哈希会切换键和值对。

```
Hash ={ "key_1" => ["value1","value2","value3"], "key_2" => ["value4","value5"]}

inverseHash = Hash.invert 
```

所以，我称倒置有，“inverseHash”。如果你放这个 inverseHash，你会得到你的结果：

```
puts inverseHash 
```

上面的代码输出：

```
{["value1", "value2", "value3"]=>"key_1", ["value4", "value5"]=>"key_2"} 
```

# bash - 管道输出到两个不同的命令

> ID：13107783
> 
> 赞同：35
> 
> 时间：2012-10-28T09:45:02.710
> 
> 标签：bash, pipe, tee

> **可能重复：**
> [osx/linux：管道进入两个进程？](https://stackoverflow.com/questions/10218103/osx-linux-pipes-into-two-processes)

有没有办法将一个命令的输出通过管道传输到另外两个命令的输入中，同时运行它们？

像这样的东西：

```
$ echo 'test' |(cat) |(cat)
test
test 
```

我想这样做的原因是我有一个程序，它从 USB SDR 设备接收 FM 无线电信号，并将音频输出为原始 PCM 数据（如 .wav 文件，但没有标题。）因为信号不是音乐，但 POCSAG 寻呼机数据，我需要将其传送到解码器程序以恢复寻呼机文本。但是我也想听信号，所以我知道是否有任何数据进入。（否则我无法判断解码器是否损坏或没有数据正在广播。）除了将数据传输到寻呼机解码器之外，我还需要将相同的数据传输到`play`命令。

目前我只知道如何做一个 - 要么将其传送到解码器并静默读取数据，要么将其传送到`play`并听到它而没有看到任何解码的文本。

如何将相同的数据传送到两个命令，以便我可以阅读文本并听到音频？

我不能使用`tee`，因为它只会将重复的数据写入文件，但我需要实时处理数据。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-28T09:51:11.977

如果你同时使用`tee`和应该没问题`mkfifo`。

```
mkfifo pipe
cat pipe | (command 1) &
echo 'test' | tee pipe | (command 2) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-28T10:48:55.837

## 最近的[bash](/questions/tagged/bash "显示标记为“bash”的问题")呈现`>(command)`语法：

```
echo "Hello world." | tee >(sed 's/^/1st: /')  >(sed 's/^/2nd cmd: /') >/dev/null 
```

可能返回：

```
2nd cmd: Hello world.
1st: Hello world. 
```

### 下载`somefile.ext`，保存，计算 md5sum 和 sha1sum：

```
wget -O - http://somewhere.someland/somepath/somefile.ext |
    tee somefile.ext >(md5sum >somefile.md5) | sha1sum >somefile.sha1 
```

或者

```
wget -O - http://somewhere.someland/somepath/somefile.ext |
    tee >(md5sum >somefile.md5) >(sha1sum >somefile.sha1) >somefile.ext 
```

## 旧答案

有一种方法可以通过未命名的管道（在 linux 下测试）来做到这一点：

```
 (( echo "hello" |
         tee /dev/fd/5 |
             sed 's/^/1st occure: /' >/dev/fd/4
    ) 5>&1 |
    sed 's/^/2nd command: /'
 ) 4>&1 
```

给：

```
2nd command: hello
1st occure: hello 
```

此示例将让您下载`somefile.ext`、保存它们、计算他的 md5sum 并计算他的 sha1sum：

```
(( wget -O - http://somewhere.someland/somepath/somefile.ext |
    tee /dev/fd/5 |
    md5sum >/dev/fd/4
  ) 5>&1 |
  tee somefile.ext |
  sha1sum
) 4>&1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T09:46:34.000

也许看看`tee`命令。它所做的只是将其输入打印到文件中，但它也将其输入打印到标准输出。所以像：

```
echo "Hello" | tee try.txt | <some_command> 
```

将创建一个内容为“Hello”的文件，并让“Hello”（流经管道）最终成为`<some_command>`'s STDIN。

# mobile - css移动固定定位

> ID：13107785
> 
> 赞同：0
> 
> 时间：2012-10-28T09:45:55.060
> 
> 标签：mobile, scroll, css-position

我已经在网上到处寻找解决方案...

我想为我的 Web 应用程序创建一个固定的底部菜单，据我所知，支持不是跨平台的，每个设备和浏览器都存在不同的障碍，

我已经放置了一个元素

```
position:fixed;
bottom:0;
left:0; 
```

问题：在某些浏览器上它非常有问题（滚动结束后弹出放置，停留在屏幕中心等'......）

这个问题有没有好的解决方案，还是我应该休息一下:-)？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:00:48.977

对此没有跨平台的解决方案，主要是因为许多设备仍然不支持触摸事件，这就是为什么 iScroll 在例如 WindwsPhone 上失败的原因。我预测 native`position: fixed;`至少要一年才能实现（即使是 iOS 最近也做到了，其他移动浏览器也落后了；我们可以期待带有 IE10 的 WP8 会支持它和其他一些浏览器，但这还不够）。我建议您将工具栏保持在底部并保持页面高度足够小，这样人们就不必向下滚动很多 - 您的应用程序在所有移动平台上看起来都一样。

# php - 多个 GET 键和值

> ID：13107788
> 
> 赞同：0
> 
> 时间：2012-10-28T09:46:33.953
> 
> 标签：php, get

现在已经在谷歌上搜索了近一个星期，试图找到这个问题的答案，到目前为止我运气不太好。也许我没有问正确的问题。

我想要做的是获取一个 PHP 脚本来测试输入的 url 中的多个键和值并提供所需的内容/功能。无需使用多个文件即可完成工作。

我最初的想法是使用 $_GET 来处理信息，当脚本只能使用第一个键时，我就陷入了困境。

```
<?php
if(isset($_GET['key1'])){
   $key1 = $_GET['key1'];
   echo "Key 1 is - " .$key1\. " - There is no other data.";
}
elseif(isset($_GET['key2'])){
   $key2 = $_GET['key2'];
   echo "Key 2 is - " .$key2\. " - There is no other data.";
}
else {
   echo "No data provided";
}
?> 
```

希望以上是正确的，因为我必须写出我记得它的样子，因为它不适用于第二个键。

然后我尝试了另一种方法。

```
<?php
if(isset($_GET['key1'],$_GET['key2'])){
   if($_GET['key1']){
      $key1 = $_GET['key1'];
      echo "Key 1 is - " .$key1\. " - There is no other data.";
   }
   elseif($_GET['key2']){
      $key2 = $_GET['key2'];
      echo "Key 2 is - " .$key2\. " - There is no other data.";
   }
   else {
      echo "No data provided";
   }
}
?> 
```

所做的只是给我一个内部服务器错误，现在我被卡住了。

所以我的问题是，如何在同一个脚本中处理单个和多个键和值而不需要包含其他键？我的目标也是纯 PHP，这样代码就可以在 linux 和 windows 服务器上运行，这意味着不能使用 .htaccess 进行 URL 重写。

注意！：以上只是一个简单的示例，实际代码将链接到执行任务和输出内容的函数。

目的是允许 url，例如 example.com/?key1=value1 example.com/?key2=value1 每个键执行单独的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:11:12.350

我不知道我是否理解你，但是这个怎么样？

```
foreach($_GET as $key => $value) {
    if(!empty($value)) {
        switch($key) {
            case 'key1':
                // do stuff for key1
                break;
            case 'key2':
                // do stuff for key1
                break;
        }
    } else {
        // handle if key is not set
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:51:18.747

如果我正确理解你，你想要的是：

```
if(isset($_GET['key1']) && isset($_GET['key2'])){
    //both keys are set
} elseif(isset($_GET['key1'])) {
    //only key1 is set
} elseif(isset($_GET['key2'])){
    //only key2 is set
} else {
    //no valid combinations found
} 
```

记下语句的顺序，降低特异性，就好像你有：

```
if(isset($_GET['key1'])) {
    //only key1 is set
} elseif(isset($_GET['key2'])){
    //only key2 is set
} elseif(isset($_GET['key1']) && isset($_GET['key2'])){
    //both keys are set
} else {
    //no valid combinations found
} 
```

设置两个键的条件永远不会被触发，因为它会匹配第一个条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:54:26.593

您可以使用此功能：

```
extract( $_REQUEST, EXTR_PREFIX_ALL, 'f' ); 
```

[http://fr2.php.net/manual/en/function.extract.php](http://fr2.php.net/manual/en/function.extract.php)

# iphone - 如何在 iPhone 上扩展键盘渐变？

> ID：13107796
> 
> 赞同：6
> 
> 时间：2012-10-28T09:47:46.407
> 
> 标签：iphone, objective-c, ios

我看到很少有应用程序正在扩展键盘，但我想知道他们是如何做到的。

这里有2个例子。

[文本](http://www.textasticapp.com/images/screenshot_iphone5.png)和 [提示](https://pbs.twimg.com/media/A6SCZlXCAAETFJu.png:large)

现在我知道我可以将 inputAccessoryView 添加到 UITextView 但它仍然有一条细线将键盘与 UIToolbar 分开，如下图所示。

![在此处输入图像描述](../Images/951e156f18d146faae39edf44caa12ab.png)

他们是怎么做到的？扩展持有键盘的 UIWindow 或以其他方式？

更新 1 的答案：

所以我使用了 Tyraz 写的解决方案。

1.  子类 UIToolbar
2.  我使用 UIView 而不是图像，其背景颜色与键盘渐变的完成颜色相同，并使用 UIViewAutoResizingMaskFlexibleWidth 以便在旋转时覆盖键盘，高度为 3 像素

这是子类 UIToolbar 的代码

```
- (void)didMoveToSuperview {

    [self.separatorHideView removeFromSuperview];

    CGRect seperatorRect = CGRectMake(self.frame.origin.x,
                                      self.frame.size.height,
                                      self.frame.size.width,
                                      3.0);

    self.separatorHideView = [[UIView alloc]];
    self.separatorHideView.backgroundColor = [UIColor colorWithRed:0.569 green:0.600 blue:0.643 alpha:1.000];
    self.separatorHideView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [self addSubview:self.separatorHideView];
} 
```

更新 2：这是我如何将其添加到 UITextView 以及我使用什么颜色进行着色的代码。

我使用以下代码将其添加到 viewDidLoad 中的 UITextView

```
 CustomToolbar *accessoryToolbar = [[CustomToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 38)];
    accessoryToolbar.tintColor = [UIColor colorWithRed:0.569 green:0.600 blue:0.643 alpha:1.000];
    editor.inputAccessoryView = accessoryToolbar; 
```

这就是应用解决方案后的样子

![在此处输入图像描述](../Images/06630400ebfb0af6594637bb0cac5355.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-04T11:54:17.043

在 iOS 7 上，您可以轻松创建`inputAccessoryView`匹配键盘样式：

```
[[UIInputView alloc] initWithFrame:<#frame#> 
                    inputViewStyle:UIInputViewStyleKeyboard]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T10:52:04.523

我会尝试使用 inputAccessoryView 加上位于分隔线顶部并“填补空白”的第二个视图。

将 inputAccessoryView 添加到键盘后（覆盖您的辅助 UIView 子类中的 didMoveToSuperview 方法以在发生这种情况时得到通知），将其添加到 inputAccessoryView 的超级视图中。

在您的附件 UIView 子类中应该是这样的：

```
- (void)didMoveToSuperview {
  [self.separatorHideView removeFromSuperview];

  CGRect seperatorRect = CGRectMake(self.frame.origin.x, 
                                    self.frame.origin.y + self.frame.size.height,
                                    self.frame.size.width,
                                    2.0);

  UIImage *gapGradient = [UIImage imageNamed:@"GapGradient"];
  self.separatorHideView = [[UIImageView alloc]initWithImage:gapGradient];
  self.separatorHideView.frame = seperatorRect;

  [self.superview addSubview:self.separatorHideView];
} 
```

我还会在您的辅助 UIView 子类中覆盖 setFrame 以更新 gapView 的框架，以防键盘的框架发生变化。

# ruby - Ruby 浮点数有很多小数，为什么？

> ID：13107797
> 
> 赞同：0
> 
> 时间：2012-10-28T09:47:50.963
> 
> 标签：ruby, floating-point

为什么以下操作会导致我达到这个值：

```
14.99 + 1.5 = 16.490000000000002 
```

我希望它是 16.49。我怎样才能避免那些额外的小数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:53:02.600

这就是[浮点运算](http://en.wikipedia.org/wiki/Floating_point)的工作原理。如果你想要一个仍然是一个`Float`对象的四舍五入的数字，你可以这样做

```
result.round(2) #=> 16.49 
```

或者如果你只需要一个字符串：

```
"%0.2f" % result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:55:14.717

这不是因为 Ruby，而是因为浮点数在计算机中的表示方式（根据[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)标准）。

简而言之，一些浮点数无法在计算机中精确表示。如果你需要更好的精度，你可以试试这个[`BigDecimal`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)类。

# git - EGit 可以与现有的 Eclipse 项目和现有的 Git 存储库一起使用吗？

> ID：13107801
> 
> 赞同：2
> 
> 时间：2012-10-28T09:49:18.367
> 
> 标签：git, egit

我一直在使用 Eclipse 和 Git。现在我想使用 EGit。我的项目有 4 个包。每个包都有一个 Git 存储库。

当我将 Git 存储库导入 EGit 时，用户文档中有一条指令来导入或创建 .project 文件。这些 .project 文件可能与 Eclipse 相关。我已经有 Eclipse 项目，所以我不想创建新项目。我仍然可以使用 EGit 在不创建新项目或导入项目的情况下对 Git 存储库进行 GUI 访问吗？

项目创建和导入遵循向导中选择 Git 存储库的点。选择特定于包的 Git 存储库然后继续导入非特定于包的项目似乎很奇怪。如果我的项目文件不是特定于包的，但我的 Git 存储库是特定于包的，我会有问题吗？导入或创建项目 4 次似乎也很奇怪，因为我有 4 个 Git 存储库。我已经在没有 EGit 的情况下使用 Eclipse 工作了好几个月，只使用了 1 个项目。

编辑：当我尝试导入现有项目时，找不到项目。这可能是因为 Git repo 文件夹与 Eclipse 项目不在同一级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:01:29.280

有点像“[在不使用 egit 的情况下将 git 项目导入工作区](https://stackoverflow.com/questions/5243568/importing-git-project-into-workspace-without-using-egit)”，您应该在`.project`and所在的位置初始化您的 git repo `.classpath`。

这有助于“[从现有 Git 存储库导入](http://wiki.eclipse.org/EGit/User_Guide#Starting_from_existing_Git_Repositories)”。

![进口](../Images/47c089dc7c83e83b3a79160359a95ba4.png)

# javascript - 更新 parse.com 表时出现“POST 400 bad request”错误

> ID：13107802
> 
> 赞同：7
> 
> 时间：2012-10-28T09:49:34.203
> 
> 标签：javascript, parse-platform

尝试使用 JS SDK 更新 parse.com 上的表时，我收到“POST 400 bad request”错误。

```
var Gallery = Parse.Object.extend("Gallery");
var gallery = new Gallery();
var activeArtworks = 0;
gallery.save(null, {
    success: function(gallery) {
          gallery.set("activeArtworks", activeArtworks);
          gallery.save();
    }
}); 
```

请帮忙！

我看不出这与 parse [here提供的示例代码有何不同](https://www.parse.com/docs/js_guide/#objects-updating)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T06:34:54.713

您引用的示例代码在设置 save() 方法之前创建其所有参数。这是您缺少的步骤；您需要在您的画廊实例上创建 activeArtworks 参数。您的更新失败，因为您尝试更新从未创建的属性。

我希望这段代码能够工作，尽管我没有对其进行测试，因为 parse.com 要求您设置一个帐户来运行任何代码，这很愚蠢，而且我不想创建一个：

```
var Gallery = Parse.Object.extend("Gallery");
var gallery = new Gallery();
var activeArtworks = 0;
gallery.activeArtworks = []; // or some more appropriate default if you have one.
gallery.save(null, {
    success: function(gallery) {
        gallery.set("activeArtworks", activeArtworks);
        gallery.save();
    }
}); 
```

检查 400 错误的标题中是否有任何信息可能也值得检查（浏览器中的调试控制台将在其网络选项卡中显示这些信息）。我希望 Parse 能给你一些信息来帮助你调试问题，这是它唯一适合 HTTP 错误的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T22:17:21.063

如果您在 Parse JS 中使用了 user.logIn(callback) 函数，则您的会话可能无效。请检查您的回调函数错误代码，如果`error.code==209`（无效的会话令牌），请重新使用`Parse.User.logOut()`并重新登录。

像这样：

```
if (error.code == 209) {    
    Parse.User.logOut();
    user.logIn(loginCallback);
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T16:35:25.260

我遇到了同样的问题，并且在意识到我发布的数据类型与我创建的列中指定的数据类型不同后解决了。在我的例子中，当我在类中创建列时指定了一个数组时，我试图保存一个对象。

# facebook - 如何防止 Facebook 在墙上聚合链接

> ID：13107804
> 
> 赞同：2
> 
> 时间：2012-10-28T09:49:52.227
> 
> 标签：facebook, aggregation

我们有一个被注入网站的 javascript 工具栏。在我们的工具栏上，我们可以在页面内分享一些东西（在 facebook 上）。
我们生成的 URL 类似于[http://somedomain.com/page1#ourtag=1234](http://somedomain.com/page1#ourtag=1234)。
现在，如果用户决定在同一页面上共享超过 1 个内容，例如：http: //somedomain.com/page1#ourtag=1234
http://somedomain.com/page1#ourtag=5678

Facebook 聚合链接并将它们显示在墙上： [http ://somedomain.com/page1](http://somedomain.com/page1)

知道我们如何在 Open Graph 中定义一些阻止 facebook 进行链接聚合的规则吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:54:28.123

你看过这个吗？[https://developers.facebook.com/docs/opengraph/explicit_sharing/](https://developers.facebook.com/docs/opengraph/explicit_sharing/)状态更新和显式隐式更新的区别

# c - 将一个结构的属性复制到另一个相同类型的结构

> ID：13107807
> 
> 赞同：0
> 
> 时间：2012-10-28T09:50:30.740
> 
> 标签：c

我有一个结构，我想将 orig 的 outfname 中的元素复制到 dest 的 outfname 中。我怎样才能做到这一点？

```
typedef struct {
    char outfname[256];
} sudoku_t;

void sudoku_copy(sudoku_t* orig,sudoku_t* dest){
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T09:51:14.800

```
void sudoku_copy(sudoku_t* orig, sudoku_t* dest)
{
    *dest = *orig;
} 
```

只需使用赋值运算符。

作为旁注，我建议您将其用作函数中的第一个参数，以与和`dest`之类的函数使用的 C 约定保持一致。`memcpy``strcpy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:38:40.177

另一种（最便携的）方法是：

```
#include <string.h>

void sudoku_copy(sudoku_t* orig, sudoku_t* dest)
{
    memcpy(dest, orig, sizeof (*dest));
} 
```

# c# - 从 C# 程序创建新的 SQL Server 2008 R2 登录

> ID：13107808
> 
> 赞同：0
> 
> 时间：2012-10-28T09:50:30.707
> 
> 标签：c#, sql-server-2008-r2

我为 SQL Server 2008 R2 上的数据库制作了 C# 前端。

有没有办法从前端程序创建 sql server 登录，还是需要在 sql management studio 中创建？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:56:09.757

是的，您可以使用 SQL 代码来完成。查看[CREATE LOGIN](http://msdn.microsoft.com/en-us/library/ms189751.aspx)文档。

下面是示例 SQL 代码：

`CREATE LOGIN <login_name> WITH PASSWORD = '<password>' MUST_CHANGE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:00:51.297

您可以使用 Smo [http://msdn.microsoft.com/en-us/library/ms162169.aspx](http://msdn.microsoft.com/en-us/library/ms162169.aspx)

有关详细信息，请参阅此主题[http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/54293150-4289-4e65-a2dc-a642e9a54f1e](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/54293150-4289-4e65-a2dc-a642e9a54f1e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T10:05:17.433

是的，您可以在 C# 应用程序中创建登录。

这可以通过在应用程序中执行所需的 SQL 语句或使用 SQL Server 管理对象 (SMO) 来完成。

对于 SQL [MSDN，创建登录](http://msdn.microsoft.com/en-us/library/ms189751%28v=sql.105%29.aspx)。

对于 SMO [MSDN，使用 SMO 示例管理用户、角色和登录](http://msdn.microsoft.com/en-us/library/ms162144%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T22:55:45.320

您可以使用 TSQL 或 smo。我在上一个项目中使用了 smo：

```
 public void CreateLogin(string name, string password, string defaultDatabase, string[] roles)
    {
        Login login = new Login(_server, name);
        login.LoginType = LoginType.SqlLogin;
        login.DefaultDatabase = defaultDatabase;

        login.PasswordExpirationEnabled = false;
        login.PasswordPolicyEnforced = false;

        login.Create(password, LoginCreateOptions.None);

        for (int i = 0; i < roles.Length; i++)
            login.AddToRole(roles[i]);

        login.Alter();

        login.Enable();

        login.Alter();
    } 
```

# arrays - 从 as2 中的本地函数弹出一个数组

> ID：13107811
> 
> 赞同：1
> 
> 时间：2012-10-28T09:51:12.927
> 
> 标签：arrays, function, actionscript, actionscript-2

为什么这个pop方法返回：`[type Function]`

```
var possibles:Array=new Array(1,2,3,4);
function testpop()
{
  trace( possibles.pop );
}
testpop(); 
```

此代码用动作脚本 2 编写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:14:06.370

因为它是一个函数，记得调用它：

```
var possibles:Array=new Array(1,2,3,4);
function testpop()
{
  trace( possibles.pop() );
}
testpop(); 
```

# java - 如何在 ArrayList 中对用户定义的对象进行排序

> ID：13107814
> 
> 赞同：-2
> 
> 时间：2012-10-28T09:51:14.467
> 
> 标签：java

> **可能重复：**
> [如何按属性对对象的数组列表进行排序？](https://stackoverflow.com/questions/2535124/how-to-sort-an-arraylist-of-objects-by-a-property)

```
 public static void main(String args[]){

            List<Emp> unsortList = new ArrayList<Emp>();

            unsortList.add(new Emp(109));
            unsortList.add(new Emp(106));
            unsortList.add(new Emp(103));
            unsortList.add(new Emp(108));
            unsortList.add(new Emp(101));
    }

public class Emp {
Integer eid;
public Emp(Integer eid) {
    this.eid=eid;
}
} 
```

Emp 是用户定义的类并存储在 ArrayList 中。如何排序 ArrayList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:54:15.510

查看[Collections#sort(List list, Comparator c)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

它允许您提供自己的[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)，您可以使用它来定义对象将如何匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:53:59.553

实现`Comparable<Emp>`和使用[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)对列表进行排序

```
public class Emp implements Comparable<Emp> {
    Integer eid;

    public Emp(Integer eid) {
        this.eid = eid;
    }

    @Override
    public int compareTo(Emp o) {
        return eid.compareTo(o.eid);
    }
} 
```

# python - 没有这样的测试方法/未绑定的错误

> ID：13107823
> 
> 赞同：0
> 
> 时间：2012-10-28T09:52:16.233
> 
> 标签：python, unit-testing, class-method

我已经覆盖了 unittest.TestCase 类以包含一些像这样的附加功能

```
class TestCase(unittest.TestCase):
    def foo(self):
        return 4711 
```

我将`setUpClass`在这样的测试用例中的调用中使用它

```
class MyTest(TestCase):
    @classmethod
    def setUpClass(cls):
        value = cls.foo() #1 
        value = MyTest.foo() #2
        value = MyTest().foo() #3
        value = TestCase().foo() #4 
```

我无法访问`foo()`我在修改后的 unitest 类中实现的功能。

我可以看到尝试 #2 将失败，因为我尝试访问未实例化的类的方法，而 foo 不是类方法。我可以看到 try #1 也不起作用，因为我试图从 classmethod 级别访问非类方法（或者如何正确描述）。但是为什么尝试#3/#4 给我一个`no such test method`错误？

`foo()`如何在不使其成为类方法的情况下访问该方法（因为我无法更改它，因为它是外部的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:37:37.723

似乎是一个黑客，但它的工作原理：

```
TestCase.__dict__['foo'](None) 
```

# python - 使用 selenium Web 驱动程序访问表单标签

> ID：13107825
> 
> 赞同：0
> 
> 时间：2012-10-28T09:52:42.003
> 
> 标签：python, selenium, webdriver, selenium-webdriver

我正在尝试在页面上查找标签，但到目前为止通过名称/id/xpath 找到它还没有奏效。这是我试图通过 xpath 找到它：

```
db = driver.find_element_by_xpath("/html/body/form") 
```

并且

```
driver.find_element_by_xpath("//form[@id='formControl']") 
```

这两个都返回错误：

```
selenium.common.exceptions.NoSuchElementException: Message: u'Unable to locate element: 
```

就好像在页面上找不到表格一样。关于如何解决的任何想法？

这是页面上 html 的开头：

```
<html>
  <body id="bodyControl" class="PersonalizationPage ContentPage Layout_PageUsesRegions" onunload="closeTimeoutWarningPopupWindow();return true;" onload="return __MasterOnLoad();" onresize="return __MasterOnResize();">
    <form name="formControl" method="post" action="default.wl?appflag=65.14&amp;bhcp=1&amp;MT=208&amp;rs=LAWS2.0&amp;strRecreate=no&amp;sv=Split&amp;transfertoken=10281204301250d0dbca913e4aa6887c7d425f4ede9c&amp;vr=2.0" id="formControl" target="_top"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:42:45.643

试试这个。

```
driver.find_element_by_id("formControl") 
```

还有两件事：

1.  确保表单不在页面上的框架内。如果是，您将不得不切换到框架（它在功能上是显示在框中的不同网页。）
2.  确保选择了正确的浏览器窗口，如果要操作多个窗口，则必须切换到要搜索的窗口。

# xmpp - xmpp 中的超级用户（用于 pubsub 服务）

> ID：13107831
> 
> 赞同：1
> 
> 时间：2012-10-28T09:53:10.893
> 
> 标签：xmpp

是否有一种 pubsub 服务的超级用户或管理员可以从字面上做所有事情，例如有用的 pubsub 节点用例：

*   删除由另一个实体创建的集合或叶节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:16:55.740

这将是特定于实现的，因此必须在您的服务器中进行设置（前提是您的服务器支持这样的用户）。

例如，在 Openfire 中，您将设置属性

```
xmpp.pubsub.sysadmin.jid 
```

# git - git-credential-winstore 提示不适用于自托管存储库

> ID：13107833
> 
> 赞同：19
> 
> 时间：2012-10-28T09:53:42.283
> 
> 标签：git, windows-7, credentials

git-credential-winstore 与 github 和 bitbucket 存储库完美配合，但在使用自托管存储库时不会弹出提示。我看不出问题出在哪里。

我试过了 ：

```
git config --global credential.helper winstore 
```

通过控制台

```
[credential]
    helper = winstore 
```

在 gitconfig 中并手动创建和存储凭据。没有成功。谁能指出我正确的方向吗？我用的是Win7。

此致。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T09:24:10.820

复制`git-credential-winstore.exe`到`C:\Program Files (x86)\Git\libexec\git-core`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-03T18:17:28.443

使用“wincred”代替“winstore”。它会起作用的。它为我解决了同样的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-02T15:34:15.717

执行“git-credential-winstore.exe”并说“是”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-12T09:57:55.327

2016 年更新：

使用适用于 Windows 的 Git 凭据： [可在此处获取 Microsoft 的 GitHub 组织帐户](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)

安装它，它就可以工作，无需配置。

# php - 通过 CURL 发送“X-Requested-With: XMLHttpRequest”和其他标头 - 其他方式？

> ID：13107837
> 
> 赞同：2
> 
> 时间：2012-10-28T09:54:02.190
> 
> 标签：php, curl, header, http-headers, xmlhttprequest

当然，我已经阅读了几个与此问题完全相同的问题，但我不得不说它根本不适合我。我即将完成的是

*   通过 PHP 和 curl 发送“X-Requested-With: XMLHttpRequest”标头
*   通过 PHP 和 curl 发送其他 http 请求标头

提供的解决方案对我不起作用。

**我怎么知道我没有发送正确的 http 请求标头？**

只需通过

(1)比较XMLHttpRequest(触发JQuery点击)生成的真实headers和Firefox add-on Live HTTP headers中PHP和curl模拟生成的headers

(2)Print_r() - 目标脚本中的 $_SERVER 变量

**我得到什么不正确/低于我的预期？**

首先也是最重要的：Firefox Live HTTP 标头不会捕获我的标头（就像它们不存在一样）。

其次，通过 print_r($_SERVER)：

如果我得到任何模拟标题，我得到`[HTTP_X_REQUESTED_WITH] => XMLHttpRequest`-**而不是：** `[X_REQUESTED_WITH] => XMLHttpRequest`。对于我通过 curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_header) 发送的任何标头，该问题几乎仍然存在 - 其中任何一个都以'HTTP'为前缀（'Header1: value1' - 我得到'HTTP_HEADER1'）。

我将 XAMPP 与 PHP 版本 5.4.7, CURL 7.24.0 一起使用。

在我询问我正在尝试完成的工作是否可能并提前表示感谢之前，提供我的代码并不是一个坏主意 -这是我尝试过*的众多代码解决方案之一。*

```
$curl_header = array('X-Requested-With: XMLHttpRequest');
$data = "name=miloshio"; // just to be sure I'm doing the POST request
$ch = curl_init('http://example.com/test.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_header);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_VERBOSE, true);
$result = curl_exec($ch);
echo $result; 
```

我的问题总和：

1.  是否可以通过 PHP 和 curl 准确发送“X-Requested-With: XMLHttpRequest”标头？
2.  是否可以避免将“HTTP_”前缀附加到 PHP 和 curl 发送的自定义标头？
3.  使用 PHP 和 curl 是否存在众所周知的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:30:35.350

1.  Firefox Live HTTP 标头不会显示您的标头，因为它们是由服务器发送到另一台服务器而不是客户端（浏览器）的。

2.  [Curl 使用CURLOPT_PROXY](http://lt1.php.net/manual/en/function.curl-setopt.php)正确发送标头如果您使用 Windows 进行开发，您可以尝试通过[Fiddler](http://www.fiddler2.com/fiddler2/)等调试代理放置 curl 流量，我确信有 linux 替代品

3.  如果您尝试从 $ *SERVER 变量中获取标头，它们将以 HTTP 为前缀*，您可以使用[apache_request_headers](http://php.net/manual/en/function.apache-request-headers.php)获取没有 HTTP_ 前缀的标头。

# android - 使设备根据命令朗读文本

> ID：13107846
> 
> 赞同：0
> 
> 时间：2012-10-28T09:55:42.517
> 
> 标签：android

我很难提出这个问题，但无论如何，我已经制作了两个应用程序，基本上是 TextToSpeech 应用程序和 SpeechToText 应用程序。他们工作正常，现在我正在尝试合并它们。基本上，我希望文本到语音部分说出在文本字段中输入的文本，前提是用户说出“说”这个词。这将使用语音到文本部分来完成。现在我遇到的问题是，当用户说些什么时，android 会显示一个输出列表，但我只有一个输出是 "Speak" 。我怎样才能只得到一个输出而不是一个列表。

最初，应用程序在按钮单击时变为活动状态。

我正在尝试的代码如下：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    i.putExtra(RecognizerIntent.EXTRA_PROMPT, "system Activated");
    startActivityForResult(i, check);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    if (requestCode == check && resultCode == RESULT_OK) {
        String command = data
            .getStringExtra(RecognizerIntent.EXTRA_RESULTS).toString();
        if (command.equals(command_verify)) {
            speak();
        } else
            finish();
    }

    super.onActivityResult(requestCode, resultCode, data);
}

public void speak() {
    String text_to_speak = message_field.getText().toString();
    talk.speak(text_to_speak, TextToSpeech.QUEUE_FLUSH, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:58:21.763

语音识别器会返回一个猜测列表，其中第一个猜测是最准确的。您可以使用它调用`list.get(0)`. 希望这可以帮助。

# cmake - 如何指定头文件引入的库依赖

> ID：13107847
> 
> 赞同：0
> 
> 时间：2012-10-28T09:55:51.337
> 
> 标签：cmake, build-automation

假设在 CMake 项目中，我有一个内置于库中的源代码

```
// a.cpp
void f() { /* some code*/ } 
```

我有一个标题

```
// b.h
void f();
struct X { void g() { f(); } }; 
```

我有另一个文件：

```
// main.cpp
#include "b.h"
int main() { X x; x.g(); } 
```

CMakeLists.txt 包含：

```
add_library(A a.cpp)
add_executable(main main.cpp)
target_link_libraries(main A) 
```

现在看 CMakeLists.txt 的最后一行：我需要明确指定 A 作为 main 的依赖项。基本上，我需要为包含 bh 的每个源指定此类依赖项，因为包含可以是间接的，并且一直向下通过包含链。比如a.cpp调用ch的类内联函数，依次调用dh等函数，最后调用A库中的函数。如果bh包含在lots文件中，手动查找所有依赖是不可行的大型项目。

所以我的问题是，是否有任何规定，对于每个直接或间接包含头文件的源文件，它需要链接到某个库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T14:20:43.017

说清楚一点：你 a.cpp 被编译成一个库“A”。这意味着 A 的任何用户都需要`target_link_libraries`用 A 指定。没有办法绕过它。如果您有 10 个小应用程序使用 A，则需要指定`target_link_libraries`十次。

我的回答涉及您问题的第二个问题，我认为这是更重要的一个：

**如何摆脱包含链？**

通过在 bh 中包含 ah 并在 bh 中使用其方法，您正在添加“隐式”依赖项。正如您所注意到的，任何 bh 用户也需要 ah。从广义上讲，有两种方法。

## 好办法：

这与 CMake 无关，而是关于封装。你的库的用户（包括你自己）不需要担心它的内部实现。这意味着：不要在 ah 中包含 bh

相反，将包含移动到 .cpp 文件。这样，你就打破了链条。例如像

```
// b.h
void f();
struct X
{ 
    void g();
};

// b.cpp
#include b.h
#include a.h
void X::g( )
{
    f();
} 
```

这样， ah 的使用被“包含”在 cpp 文件中，任何使用您的库的人只需要包含 bh 并链接到 b.lib。

## 替代方案：

现在，在某些情况下，您必须接受这种“依赖”，或者这是一种有意识的选择。例如，当您无法控制 A 时，或者当您有意识地决定创建一个根据 A 内部的类/结构定义的库时。

在这种情况下，我建议你编写一段 CMake 代码，它会准备好所有必要的包含目录。例如，在“YourLibConfig.cmake”中定义一个变量“YOURLIB_INCLUDES”和“YOURLIB_LIBRARIES”，并记录您图书馆的任何用户都应该导入“YourLibConfig.cmake”。这是几个基于 cmake 的项目采用的方法。例如OpenCV安装一个`OpenCVConfig.cmake`文件，VTK安装一个`VTKConfig.cmake`并准备一个`UseVTK.cmake`文件

# twitter-bootstrap - 我可以为 twitter 创建 1 个联系人导入器来获取我的 frnd 电子邮件吗？

> ID：13107852
> 
> 赞同：0
> 
> 时间：2012-10-28T09:56:14.970
> 
> 标签：twitter-bootstrap, twitter, twitter-oauth

尊敬的所有人，

我的任务是使用 php 或 CURL 从 twitter 获取我的朋友的电子邮件，我应该怎么做才能实现这个目标......！！！

请参考此链接 Facebook importer 和 twitter importer 在此链接上成功工作，请查看此链接

[http://www.adiinviter.com/forums/](http://www.adiinviter.com/forums/)

谢谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:42:12.793

如果您需要从 Facebook 抓取您朋友的电子邮件，编写一个 Facebook 应用程序，授权它访问您的帐户并抓取电子邮件会很容易。Twitter 也是如此，但不幸的是，根据他们的文档，他们不通过 api 调用为用户提供电子邮件，所以我认为这是不可能的。

如果您想进一步检查，请查看他们的 api 文档：[https ://dev.twitter.com/docs/api/1.1](https://dev.twitter.com/docs/api/1.1)

# javascript - 如何在javascript中检查数组索引是否存在？

> ID：13107855
> 
> 赞同：260
> 
> 时间：2012-10-28T09:56:58.373
> 
> 标签：javascript, titanium, titanium-mobile

我正在使用 Titanium，我的代码如下所示：

```
var currentData = new Array();
if(currentData[index]!==""||currentData[index]!==null||currentData[index]!=='null')
{
    Ti.API.info("is exists  " + currentData[index]);
    return true;
}
else
{   
    return false;
} 
```

我正在将索引传递给`currentData`数组。我仍然无法使用上面的代码检测到不存在的索引。

* * *

## 回答 #1

> 赞同：497
> 
> 时间：2012-10-28T09:58:37.637

利用`typeof arrayName[index] === 'undefined'`

IE

```
if(typeof arrayName[index] === 'undefined') {
    // does not exist
}
else {
    // does exist
} 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-09-12T17:35:49.543

```
var myArray = ["Banana", "Orange", "Apple", "Mango"];

if (myArray.indexOf(searchTerm) === -1) {
  console.log("element doesn't exist");
}
else {
  console.log("element found");
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-04-03T20:21:12.927

如果我错了，请有人纠正我，但**AFAIK**以下是正确的：

1.  数组实际上只是 JS 引擎盖下的对象
2.  因此，他们的原型方法`hasOwnProperty`“继承”自`Object`
3.  在我的测试中，`hasOwnProperty`可以检查数组索引处是否存在任何内容。

因此，只要上述情况属实，您就可以简单地：

`const arrayHasIndex = (array, index) => Array.isArray(array) && array.hasOwnProperty(index);`

用法：

`arrayHasIndex([1,2,3,4],4);`输出：`false`

`arrayHasIndex([1,2,3,4],2);`输出：`true`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2021-03-05T11:59:52.367

这些天我会利用 ecmascript 并像那样使用它

```
return myArr?.[index] 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-10-01T13:49:23.247

这正是`in`运营商的目的。像这样使用它：

```
if (index in currentData) 
{ 
    Ti.API.info(index + " exists: " + currentData[index]);
} 
```

接受的[答案](https://stackoverflow.com/a/13107879/579078)是错误的，如果`index`值为`undefined`：

```
const currentData = ['a', undefined], index = 1;

if (index in currentData) {
  console.info('exists');
}
// ...vs...
if (typeof currentData[index] !== 'undefined') {
  console.info('exists');
} else {
  console.info('does not exist'); // incorrect!
}
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-09T14:00:07.930

我不得不将 techfoobar 的答案包装在一个`try`..`catch`块中，如下所示：

```
try {
  if(typeof arrayName[index] == 'undefined') {
    // does not exist
  }
  else {
  // does exist
  }
} 
catch (error){ /* ignore */ } 
```

...that's how it worked in chrome, anyway (otherwise, the code stopped with an error).

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-08-16T04:43:06.667

考虑数组 a：

```
var a ={'name1':1, 'name2':2} 
```

如果要检查 a 中是否存在“name1”，只需使用以下命令对其进行测试`in`：

```
if('name1' in a){
console.log('name1 exists in a')
}else
console.log('name1 is not in a') 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-22T12:42:15.700

If elements of array are also simple objects or arrays, you can use [some](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some) function:

```
// search object
var element = { item:'book', title:'javasrcipt'};

[{ item:'handbook', title:'c++'}, { item:'book', title:'javasrcipt'}].some(function(el){
    if( el.item === element.item && el.title === element.title ){
        return true; 
     } 
});

[['handbook', 'c++'], ['book', 'javasrcipt']].some(function(el){
    if(el[0] == element.item && el[1] == element.title){
        return true;
    }
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-31T16:17:01.367

```
var demoArray = ['A','B','C','D'];
var ArrayIndexValue = 2;
if(ArrayIndexValue in demoArray){
   //Array index exists
}else{
   //Array Index does not Exists
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-10-31T19:38:10.540

如果你正在寻找这样的东西。

这是以下代码片段

```
var demoArray = ['A','B','C','D'];
var ArrayIndexValue = 2;
if(demoArray.includes(ArrayIndexValue)){
alert("value exists");
   //Array index exists
}else{
alert("does not exist");
   //Array Index does not Exists
}
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-05-27T06:54:05.387

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
if(fruits.indexOf("Banana") == -1){
    console.log('item not exist')
} else {
	console.log('item exist')
}
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-05-29T19:47:47.990

如果你使用[underscore.js](http://underscorejs.org/#isEmpty)，那么这些类型的 null 和 undefined 检查会被库隐藏。

所以你的代码看起来像这样 -

```
var currentData = new Array();

if (_.isEmpty(currentData)) return false;

Ti.API.info("is exists  " + currentData[index]);

return true; 
```

它现在看起来更具可读性。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-23T14:21:12.773

检查项目是否存在的简单方法

```
Array.prototype.contains = function(obj) {
    var i = this.length;
    while (i--)
       if (this[i] == obj)
       return true;
    return false;
}

var myArray= ["Banana", "Orange", "Apple", "Mango"];

myArray.contains("Apple") 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-01T13:29:32.900

一行验证。最简单的方法。

```
return !!currentData[index]; 
```

输出

```
var testArray = ["a","b","c"]

testArray[5]; //output => undefined
testArray[1]; //output => "b"

!!testArray[5]; //output => false
!!testArray[1]; //output => true 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-30T13:56:22.067

当试图找出 JS 中是否存在数组索引时，最简单、最短的方法是通过双重否定。

```
let a = [];
a[1] = 'foo';
console.log(!!a[0])   // false
console.log(!!a[1])   // true 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-12-31T23:07:15.683

这种方式在我看来是最简单的。

```
var nameList = new Array('item1','item2','item3','item4');

// Using for loop to loop through each item to check if item exist.

for (var i = 0; i < nameList.length; i++) {
if (nameList[i] === 'item1') 
{   
   alert('Value exist');
}else{
   alert('Value doesn\'t exist');
} 
```

也许另一种方法是。

```
nameList.forEach(function(ItemList)
 {
   if(ItemList.name == 'item1')
        {
          alert('Item Exist');
        }
 } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-16T09:10:10.797

```
const arr = []

typeof arr[0] // "undefined"

arr[0] // undefined 
```

如果布尔表达式

```
typeof arr[0] !== typeof undefined 
```

为真则 0 包含在 arr 中

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-07-21T15:23:30.223

你可以简单地使用这个：

```
var tmp = ['a', 'b'];
index = 3 ;
if( tmp[index]){
    console.log(tmp[index] + '\n');
}else{
    console.log(' does not exist');
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-07-21T07:58:30.710

```
if(typeof arrayName[index] == undefined) {
    console.log("Doesn't exist")
}
else {
console.log("does exist")
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-10-14T23:57:34.830

```
(typeof files[1] === undefined)?
            this.props.upload({file: files}):
            this.props.postMultipleUpload({file: files widgetIndex: 0, id}) 
```

`typeof`使用and 检查数组中的第二项是否未定义`undefined`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-02-02T08:46:42.020

这也可以正常工作，使用`===`against进行类型测试`undefined`。

```
if (array[index] === undefined){ return } // True 
```

**测试：**

```
const fruits = ["Banana", "Orange", "Apple", "Mango"];

if (fruits["Raspberry"] === undefined){
  console.log("No Raspberry entry in fruits!")
}
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-28T16:03:19.193

**使用 Object.hasOwn()**

数组的元素被认为是自己的属性，因此您可以使用新`Object.hasOwn()`方法以简短而优雅的方式检查特定索引是否存在，如下例所示：

```
let cars = ['Reno', 'Ford','Honda', 'BMW'];
console.log(Object.hasOwn(cars, 3));   // true ('BMW')
console.log(Object.hasOwn(cars, 4));   // false - not defined
```

# python - http代理后面的python WSDL.Proxy

> ID：13107856
> 
> 赞同：1
> 
> 时间：2012-10-28T09:56:59.443
> 
> 标签：python, wsdl, http-proxy, soappy

我有一个简单的代码，当我不在任何代理之后时有效，但在代理之后无效。那么有什么方法可以指定必须通过类`http_proxy`的构造函数进行连接`WSDL.Proxy`？我一直在尝试[ideone.py](https://github.com/mkilling/ideone.py)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:12:49.313

您必须将以下补丁应用于`ideone.py`：

```
diff --git a/ideone.py b/ideone.py
index fffdf27..b15abef 100644
--- a/ideone.py
+++ b/ideone.py
@@ -42,10 +42,10 @@ def getError(response):

 class IdeOne:
-    def __init__(self, user='test', password='test'):
+    def __init__(self, user='test', password='test', **kwargs):
         self._user = user
         self._password = password
-        self._wsdlObject = WSDL.Proxy('http://ideone.com/api/1/service.wsdl')
+        self._wsdlObject = WSDL.Proxy('http://ideone.com/api/1/service.wsdl', **kwargs)

     def testFunction(self):
         response = self._wsdlObject.testFunction(self._user, self._password) 
```

这将允许将关键字参数传递给`WSDL.Proxy`将用于创建其内部[`Client.SOAPProxy`](https://github.com/kiorky/SOAPpy/blob/develop/src/SOAPpy/Client.py#L339)实例的对象。[`Client.SOAPProxy`](https://github.com/kiorky/SOAPpy/blob/develop/src/SOAPpy/Client.py#L339)有一个`http_proxy`关键字参数，所以在应用补丁之后，`IdeOne(user='test', password='test', http_proxy='the.http.proxy')`应该可以工作。

# android - Android facebook 意图显示类 com.facebook.katana.ProfileTabHostActivity 的个人资料不再起作用

> ID：13107857
> 
> 赞同：5
> 
> 时间：2012-10-28T09:57:06.290
> 
> 标签：android, facebook, android-intent

> **可能重复：**
> [从其他应用程序启动 facebook 应用程序](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)

直到几天前，为了向我的用户显示另一个用户配置文件，我使用了以下解决方案：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.facebook.katana", "com.facebook.katana.ProfileTabHostActivity");
Long uid = new Long("123456789");
intent.putExtra("extra_user_id", uid);
startActivity(intent); 
```

许多 stackoverflow 用户都使用此解决方案（从查看有关此主题的所有问题和答案）。

上一次 facebook 应用程序更新 (1.9.11)，甚至可能在此解决方案过时之前。现在您将获得以下异常：

> java.lang.SecurityException: Permission Denial: 从 ProcessRecord 开始 Intent { act=android.intent.action.VIEW cmp=com.facebook.katana/.ProfileTabHostActivity (has extras) } ... 需要 null

有谁知道我现在如何打开 facebook 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T09:57:06.290

问题中描述的解决方案将不再起作用（在此问题的编辑中，您可以查看原因的详细信息）。新版本的 facebook 应用程序不再支持这些意图。请参阅[此处](http://developers.facebook.com/bugs/286768364773190?browse=search_508ceda838bb38b23277350)的错误报告

新的解决方案是使用 iPhone 方案机制（是的，facebook 决定在 Android 中支持 iPhone 机制，而不是 Android 的隐式 Intent 机制）。

因此，要使用用户个人资料打开 facebook 应用程序，您需要做的就是：

```
String facebookScheme = "fb://profile/" + facebookId;
Intent facebookIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(facebookScheme)); 
startActivity(facebookIntent); 
```

如果您正在寻找其他操作，您可以使用[以下页面](http://wiki.akosma.com/IPhone_URL_Schemes)获取所有可用操作（但您必须对其进行测试，因为我没有找到关于此的 facebook 官方出版物）

## 编辑

这部分问题提供了有关问题性质和解决方案的更多详细信息，但以上详细信息足以解决问题。

使用新版本的 facebook 应用程序，清单文件已更改。今天的活动

> com.facebook.katana.ProfileTabHostActivity

在清单中以以下方式描述：

```
<activity android:theme="@style/Theme.Facebook"
android:name="com.facebook.katana.ProfileTabHostActivity"
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout"
android:windowSoftInputMode="adjustPan" /> 
```

由于此活动不再*有意图过滤器，因此**android:exported*的默认值现在为*false*。在以前的版本中，有*intent-filter*，然后默认值为*true*（欢迎您在[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#exported)阅读）我要感谢[这个答案](https://stackoverflow.com/a/8784878/1020530)关于导出值的详细信息。

但新版本有以下活动：

```
<activity android:name="com.facebook.katana.IntentUriHandler">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="facebook" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="fb" />
        </intent-filter>
    </activity> 
```

在这里你可以看到他们支持*fb*和*facebook*方案。

# c# - Star - 使用正则表达式在字符串中查找字符 *

> ID：13107860
> 
> 赞同：11
> 
> 时间：2012-10-28T09:57:12.580
> 
> 标签：c#, regex

我试图在我的字符串中找到以下文本：`'***'` 问题是 C# Regex 机制不允许我执行以下操作：

```
new Regex("***", RegexOptions.CultureInvariant | RegexOptions.Compiled); 
```

由于

> ArgumentException：“正在解析“ *** ” - 量词 {x,y} 什么都没有。”

显然它认为我的星星代表正则表达式，有没有办法告诉正则表达式机制将星星视为星星而不是别的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-28T09:57:56.997

您需要使用反斜杠**转义星号：**`@"\*"`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-28T10:01:02.320

***`*`***意味着`Regex`：

> 匹配前一个元素零次或多次。

因此，您需要使用`\*`or`[*]`代替。

解释：

> ***`\`***
> 
> 当后跟一个在本主题和本主题的其他表格中未被识别为转义字符的字符时，匹配该字符。例如，`\*`与 相同`\x2A`。
> 
> ***`[ character_group ]`***
> 
> 匹配`character_group`.

# android - 如何将百分比宽度转换为数值？

> ID：13107861
> 
> 赞同：-2
> 
> 时间：2012-10-28T09:57:16.157
> 
> 标签：android, view, width, titanium-mobile

我正在创建一个宽度 = 20% 的视图。我怎样才能得到一个整数值。

```
var v = Ti.UI.createView({
    width: '20%',
    left: '10%',
    height: '40%',
    top: '10%'
}); 
```

我需要将 v.width 转换为数字。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T11:10:29.823

请试试这个：

```
var screenWidth = Titanium.Platform.displayCaps.platformWidth;

var v = Ti.UI.createView({
   width: screenWidth/5 ,
   left: '10%',
   height: '40%',
   top: '10%'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T07:58:08.617

有一个功能可以做到这一点：

```
function turnPercentToDp(percent){

    var dp = 0;

    if(percent){

      if(_.isString(percent) && percent.indexOf('%')>0) {
        percent = parseFloat(percent.slice(0, percent.indexOf('%')))/100;
      }else{
        if(percent > 1){
          percent = parseFloat(percent)/100;
        }
      }

      dp = Math.ceil((OS_IOS ? Ti.Platform.displayCaps.platformWidth : (Ti.Platform.displayCaps.platformWidth/Ti.Platform.displayCaps.logicalDensityFactor))*percent);

    }

    return dp;

} 
```

# jquery - jQuery 使子 div 在悬停时可见（仅在有效的 li 元素上，而不是父元素！）

> ID：13107862
> 
> 赞同：5
> 
> 时间：2012-10-28T09:57:17.843
> 
> 标签：jquery

我已经尝试了所有与此相关的现有帖子，但它们并没有按我的意愿工作......

的HTML：

```
<ol class="sortable">
<li>
    <div>
        <a href="#">Start Page</a>
        <div class="li_options">
            <a href="#"><img src="img/icons/small_add.png" /></a>
            <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
        </div>
        <div class="clear"></div>
    </div>
    <ol>
        <li>
            <div>
                <a href="#">Sub Seite</a>
                <div class="li_options">
                    <a href="#"><img src="img/icons/small_add.png" /></a>
                    <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
                </div>
                <div class="clear"></div>
            </div>
            <ol>
                <li>
                    <div>
                        <a href="#">Sub Sub Seite</a>
                        <div class="li_options">
                            <a href="#"><img src="img/icons/small_add.png" /></a>
                            <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
                        </div>
                        <div class="clear"></div>
                    </div>
                </li>
            </ol>
        </li>
    </ol>
</li>
<div class="clear"></div> 
```

这应该是这样的：

*   首页
    *   子页面
        *   子页面

我希望为每个 li 元素设置的 div.li_options 仅在悬停元素上显示。我知道，父母的 li 也被“悬停”在悬停的子元素上，但我没有显示那些“li_options”。

迄今为止最好的解决方案：

```
$(document).ready(function() {      
    $('.sortable li').mouseover(function() {
        $(this).children().children('.li_options').show();
    }).mouseout(function() {
        $(this).children().children('.li_options').hide();
    });
}); 
```

但是有了这个，父母并没有被排除在外……我不知道如何指出他们，因为可以有无穷无尽的层次。你知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T10:29:53.403

**工作演示** [http://jsfiddle.net/sm8vS/](http://jsfiddle.net/sm8vS/)

**更新版本** [http://jsfiddle.net/36cV3/](http://jsfiddle.net/36cV3/)

**或像这样 =>** [http://jsfiddle.net/N6xqm/](http://jsfiddle.net/N6xqm/)（较小的方式）

*另外*，您还可以通过树视图菜单的名称查看一些插件。- 如果需要或者如果你正在寻找这样的东西：http: [//jquery.bassistance.de/treeview/demo/](http://jquery.bassistance.de/treeview/demo/)

*将出现悬停在`Start Page`=>上的*行为*`Sub Seite`，现在将出现悬停在`Sub Seite`=> =>`Sub Sub Seite`上。*

 *为了更好地解析，我在您各自的菜单结构中添加了 -`sub-menu`和类。`sub-sub-menu`其余代码如下。

希望它符合您的需求`:)`

**另一种很小的方法来做** [http://jsfiddle.net/N6xqm/](http://jsfiddle.net/N6xqm/) `:)`

```
(function($) {

    $('.li_options').hide();
        $('a').mouseover(function() {
            $(this).next('.li_options').show();
        }).mouseout(function() {
            $('.li_options').hide();
        });

})(jQuery);​ 
```

**示例代码**

```
 (function($) {

    $('.li_options').hide();
    $('.sortable li').mouseover(function() {
        $(this).find('ol').show();
        anchor_hover();
    }).mouseout(function() {
        anchor_hover();
        $(this).find('ol').hide();
    });

    function anchor_hover() {
        $('a').mouseover(function() {
            $(this).next('.li_options').show();
        }).mouseout(function() {
            $('.li_options').hide();
        });

    }

})(jQuery);​ 
```

**HTML**

```
<ol class="sortable">
<li>
    <div>
        <a href="#">Start Page</a>
        <div class="li_options">
            <a href="#"><img src="img/icons/small_add.png" /></a>
            <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
        </div>
        <div class="clear"></div>
    </div>
    <ol class="sub-menu">
        <li>
            <div>
                <a href="#">Sub Seite</a>
                <div class="li_options">
                    <a href="#"><img src="img/icons/small_add.png" /></a>
                    <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
                </div>
                <div class="clear"></div>
            </div>
            <ol class="sub-sub-menu">
                <li>
                    <div>
                        <a href="#">Sub Sub Seite</a>
                        <div class="li_options">
                            <a href="#"><img src="img/icons/small_add.png" /></a>
                            <a href="#" onClick="[..]"><img src="img/icons/small_remove.png" /></a>
                        </div>
                        <div class="clear"></div>
                    </div>
                </li>
            </ol>
        </li>
    </ol>
</li>
<div class="clear"></div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T11:35:58.347

最短的方法是

```
$('.sortable li').mouseover(function(e) {
    $( '> div > .li_options', $(this) ).show();
    e.stopPropagation();
}).mouseout(function(e) {
    $( '> div > .li_options', $(this) ).hide();
    e.stopPropagation();
}); 
```*

# javascript - jQuery多次重复替换innerHTML

> ID：13107871
> 
> 赞同：1
> 
> 时间：2012-10-28T09:58:07.400
> 
> 标签：javascript, jquery

我有以下脚本可用于在 innerHTML 中用 jQuery 替换。

**HTML 代码**

```
<input type="submit" name="replace" id="replace" value="Replace" />

<div class="my_div">Default1 content1</div>
<div class="my_div">Default2 content2</div> 
```

**脚本**

```
$('#replace').click(function() {
   $('.my_div').html(function( idx, oldHtml){
      return oldHtml.replace(/Default1|content1|Default2|content2/gi, 'symbol1');
   });
}); 
```

但我无法修改脚本以进行多个唯一替换。我要替换的示例

默认1到符号1

默认2到符号2

内容 1 到符号 3

内容 2 到符号 4

以下不起作用

```
$('#replace').click(function() {
   $('.my_div').html(function( idx, oldHtml){
      return oldHtml.replace(/Default1/gi, 'symbol1');
      return oldHtml.replace(/Default2/gi, 'symbol2');
      return oldHtml.replace(/content1/gi, 'symbol3');
      return oldHtml.replace(/content2/gi, 'symbol4');
   });
}); 
```

我也有基于 id 属性的早期脚本，它有 500 多个替换行。我可以在这个新的 jQuery 类属性中包含类似的结构吗？

```
var str=document.getElementById("my_id").innerHTML;
var n=str.replace("Default1","symbol1");
var n=str.replace("Default2","symbol2");
document.getElementById("my_id").innerHTML=n;
} 
```

非常感谢，你们帮了我很多。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:59:56.220

**问题一：**

代替

```
return oldHtml.replace(/Default1/gi, 'symbol1');
return oldHtml.replace(/Default2/gi, 'symbol2');
return oldHtml.replace(/content1/gi, 'symbol3');
return oldHtml.replace(/content2/gi, 'symbol4'); 
```

和

```
return oldHtml.replace(/Default1/gi, 'symbol1')
    .replace(/Default2/gi, 'symbol2')
    .replace(/content1/gi, 'symbol3')
    .replace(/content2/gi, 'symbol4'); 
```

**问题2 ：**

代替

```
var str=document.getElementById("my_id").innerHTML;
var n=str.replace("Default1","symbol1");
var n=str.replace("Default2","symbol2");
document.getElementById("my_id").innerHTML=n; 
```

和

```
var $div = $('#my_id');
$div.html(
    $div.html().replace("Default1","symbol1")
    .replace("Default2","symbol2")
); 
```

（如果您使用 jQuery，则不需要那些 getElementById）

# android - Loop the Loop(Fences) 益智游戏在 android 上的开发

> ID：13107877
> 
> 赞同：1
> 
> 时间：2012-10-28T09:58:33.563
> 
> 标签：android, puzzle

我计划在Android上开发Loop the loop，也称为Fences，益智游戏。它基本上由 n x m (n X m) 单元矩阵组成。每个单元格都有边和角（点）。规则很简单。您必须在点之间画线以形成没有交叉或分支的单个循环。带有单元格的数字表示它周围有多少行。请参阅[Puzzle_LoopTheLoop](http://www.puzzle-loop.com/)了解规则并进行尝试。

为了开发视觉 n X m 矩阵，我考虑使用 n X m 行的网格布局。每个单元格将包含一个默认不透明度为 0 的按钮，即它是透明的。当用户单击一条边时，其不透明度将切换为 1，即按钮将突出显示，表示选择了一条边，如下所示。

![GridLayout 包含按钮作为边、角和单元格](../Images/b114a82283c6ed0464b78e90748c5470.png)

除了处理用户点击（触摸）事件以启用/禁用之外，该事件将被分派到周围的单元格以增加/减少其活动边缘计数。

我的问题如下： 1）我选择的网格布局可能不是最佳选择，也可能效率低下。你能就此发表你的看法吗？2) 是否有其他 API/库具有更好的数据结构来处理带有边缘处理的 nXm？3) 对于边缘，ImageButton 会是更好的选择吗？4) 此游戏开发的任何其他输入，而不是视觉拼图开发。我这样说是因为它与普通的 2D 游戏非常不同，后者的演员占据游戏区域的任何位置。5）让我知道这篇文章是否应该发布在任何其他区域，比如任何特定的论坛/维基或类似的地方？

非常感谢您的投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:05:51.087

1.  通常安卓游戏是使用 Canvas 和 OpenGL 设计的，但由于您的应用不需要高图形处理能力，因此可以实现。但我的意见是使用自己的矩阵框架，你可以更舒适地控制和管理。

2.  我怀疑会有任何 API 来解决这个问题。默认情况下，android 具有矩阵类，但主要用于位图处理。网格在这里为您服务。

3.  同样，如果您没有制作自己的框架，那么 imageButton 可能会达到目的。也可以使用具有不同图像可绘制对象的 CheckBox。

4.  看不懂题...

5.  不知道，我也是新人。。。

# c# - 在没有存储库模式的情况下模拟 EF

> ID：13107882
> 
> 赞同：1
> 
> 时间：2012-10-28T09:59:03.123
> 
> 标签：c#, entity-framework, unit-testing, orm

我正在使用实体框架 4。

我读过这篇文章：

[http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context](http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context)

但是在我的代码中，我看不到任何类似 `EFContext` `Attach() Detach()`的东西以及那里出现的其他东西。

我的更像这张图：

[http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html](http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html)

然后我不明白嘲笑 Icontext 将如何帮助嘲笑？

数据库的 ORM 位于内部`get property`和`AddTo methods`

# php - 卷曲还是简单的 XML？- Apache 或 PHP 设置？

> ID：13107889
> 
> 赞同：1
> 
> 时间：2012-10-28T10:00:42.580
> 
> 标签：php, xml, json, apache, curl

我猜我的服务器设置有问题。我有一个从另一台服务器获取代码的代码。我不知道为什么，但代码不适用于我的 VPS，但它适用于一个简单的共享主机帐户......

这是代码：

```
$post = array(
      'KEY' => 'somekey',
      'format' => 'xml'
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'xxxxxxxxxx.com' . http_build_query($post));
    curl_setopt($ch,  CURLOPT_RETURNTRANSFER, TRUE);
    $response = curl_exec($ch);
    $xml_obj = simplexml_load_string($response);
    $json = json_encode($xml_obj);
    $array = json_decode($json, true);
    curl_close($ch); 
```

如果我在我的共享托管服务器上运行它，它就像一个魅力，但它只是有一些问题（它不输出）并且脚本没有运行。我已经测试过我得到了 1（真）这个陈述：`$json = json_encode($xml_obj);` 但没有任何进一步的代码。因此，问题可能出在某个地方。

我还检查了是否启用了 xml DOM，确实如此。我还检查了 CURL 和 json，它们都已启用。

有人能帮我吗？如果没有错误消息，我什么都做不了，而且我无法弄清楚可能是什么问题。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:03:44.627

似乎您可能未启用远程 allow_url_fopen 。将其放在脚本的开头：

```
ini_set("allow_url_fopen", 1); 
```

要启用 curl_exec，您需要修改 php.ini 并将其从最后一个不允许的函数中删除。要找出您的 php.ini，您可以在脚本开头调用一次：

```
phpinfo(); die(); 
```

这将告诉您使用哪个 php.ini 文件（查找 php.ini 字符串）。修改 php.ini 后，您需要重新启动 Web 服务器。

# uml - 关于“抽象”和刻板印象的 UML 问题

> ID：13107893
> 
> 赞同：2
> 
> 时间：2012-10-28T10:00:57.203
> 
> 标签：uml

大家好，我正在尝试理解 UML，但有一些关于它的问题

在 UML 中，用原型标记一个类有什么意义`<<abstract>>`？

以及如何将此约束表示为不变量，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-04T00:44:19.480

我意识到这个线程已经有几年的历史了，但是当它被其他人引用时我才想到它，因为它`«abstract»`支持 UML 规范不支持构造型的断言。这个说法不太准确，我想解释一下原因。我将首先阐明什么是抽象类。

抽象类是不包括完整实现的类的定义。因此，抽象类不能直接实例化；它们必须是专门的（继承的）。抽象类通过斜体表示类名和抽象方法，另外还可以选择在类名和/或操作中添加 {abstract} 属性（我们通常说的方法，但方法实际上是“方法" 实现操作的) 是抽象的。

接口实际上是一种特定类型的抽象类：零实现的类。它们的表示法与其他类型的抽象类不同（不要斜体，使用`«interface»`关键字，并用虚线表示所有特化箭头）。所以，正如 Christian 在这里所说，抽象类有标准的表示法——至少，在类图中有。

现在，正如 Christian 所说的那样，`«abstract»`刻板印象确实不存在，但您也可以根据需要创建它，而且 UML 规范支持这样做。您不太可能有理由（至少在类图中），但您仍然可以。

原型是 UML 的“可扩展机制”（共有三种：原型、标记值和约束）。它允许您更具体地定义某种元素。刻板印象应用于类（实际上是元类，元类是其实例也是类的类）。许多原型是预定义的“标准原型”（在 UML 1.4 中它们被称为“标准元素”）。这些例子是`«metaclass»`（同样，一个类，它的实例也是类）和`«file»`（在系统开发的上下文中的一个物理文件）。

刻板印象是一种关键字。规范（*上层结构*2.0，附件 B，第 663 页）对关键字有这样的说法：

> UML 关键字是保留字，它是 UML 表示法的组成部分，通常作为附加到 UML 图形元素的文本注释或作为 UML 图中文本行的一部分出现。这些词......不能用于命名用户定义的模型元素，因为这样的命名会导致对模型的模棱两可的解释。例如，关键字“trace”是系统定义的抽象构造型（参见附录 C，“标准构造型”），因此不能用于定义任何用户定义的构造型。
> 
> 在 UML 中，关键字用于四种不同的目的：
> 
> *   为了将特定的 UML 概念（元类）与共享相同通用图形形式的其他概念区分开来......
>     
>     
> *   为了将 UML 概念（元关联）之间的特定关系与共享相同通用图形形式的其他关系区分开来...
>     
>     
> *   要指定附加到 UML 概念的某些修饰符的值（元属性值）...
>     
>     
> *   表示标准刻板印象（见附件 C，“标准刻板印象”）...

> 关键字始终包含在 guillemets ( `«keyword»`) 中，作为视觉提示，可以更容易地区分何时使用关键字...除了识别关键字之外，guillemets 还用于区分用户配置文件中定义的刻板印象的使用。这意味着：

> 1.  并非所有出现在 guillemets 之间的单词都是关键字（即保留字），并且
> 2.  出现在 guillemets 中的词不一定代表刻板印象。

换句话说，您可以创建任何您想要的刻板印象，只要它不是关键字。由于“抽象”不是关键字，因此您可以创建一个`«abstract»`刻板印象。

然而，为了这样做，您将不得不遇到一些麻烦，在 UML 2.0 及更高版本中比在 UML 1.4 中更麻烦。UML 1.4 简单地指出，构造型是 UML 规范的扩展机制。可以简单地定义原型，将其应用到任何想要的 UML 元模型部分，并记录更改。UML 2.0 希望将构造型与 UML 元类的关系形式化（UML 图上的任何项目都是元类，并且是 UML 元模型的一部分）。所以，他们想出了Profiles。此示例图显示了配置文件的工作方式：

![](../Images/143d710d7548c9dfa7572927f584884a.png)

现在，那个黑色箭头可能看起来有点奇怪，因为除了这个之外，您在任何上下文中都看不到它。UML 2.0 引入了扩展的概念，它将扩展定义为“用于指示元类的属性通过原型进行扩展”。此黑色箭头表示扩展名。

我将引用 Tom Pender（*The UML Bible*，Wiley Publishing，2004）来解释这个图，因为他比规范做得更好（我当然无法改进）：

> 它表明一个组件是由一个 Bean 原型扩展的，这是必需的。Bean 原型是一种抽象类型，有两个子类型——实体和会话。因此，Component 的每个实例都必须由 Entity 原型或 Session 原型的实例进行扩展。请记住，构造型是一种可以具有属性的类——在这种情况下，会话构造型具有名为状态的属性。这对应于一个标记定义，其值指定会话的状态。标记值是一个枚举 StateKind，它具有无状态或有状态值。

> 组件有一个约束，显示在附加到组件符号的注释中，说明组件不能被概括或专门化。

> 该图还显示了接口元类由 Remote 和 Home 原型扩展。EJB 包有一个约束，显示在包中的注释中，说明 Bean 必须实现一个 Home 接口。

`«abstract»`因此，如果您有理由费力地创建它，您确实可以使用刻板印象。任何人可能想要的主要原因是在类图以外的某个地方表示一个抽象类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T08:25:11.937

不存在刻板印象“抽象”——抽象类应该使用斜体字体来描述。抽象意味着一个类不能被实例化。它需要一个子类来做到这一点。因此，作为伪代码约束，这意味着

```
for all instances i of MyAbstractClass holds: i.actualClass != MyAbstractClass 
```

或在 ocl 中为 MyAbstractClass 持有

```
self.allInstances()->forAll(i: MyAbstractClass | i.classifier <> self) 
```

由于您的第一个问题版本中没有显示“抽象”一词，因此我一般扩展了刻板印象：

首先：在学习 UML 时，刻板印象不应该是你首先研究的东西。它们相当复杂。

刻板印象或关键词（都用 表示`<<MyStereotype>>`）没有一般意义。它由特定的刻板印象定义。通常，您不能将刻板印象表达为不变量。

但是 UML 的其他一些方面可以以相同的方式显示：来自 UML 元级别的类被标记为，`<<metaclass>>`即使它没有构造型甚至是不同的实际类型。刻板印象本身用`<<stereotype>>`标记显示（即使它们是特殊类的实例）。

自定义构造型的一个示例可以是“服务”。您可以用它标记代表服务的类。可能有一个约束告诉你“服务”必须实现一个特殊的接口。在这种情况下，您可以将此约束表示为（无聊的）不变量。但可能它甚至只是一个标记。在后一种情况下，您可以使用关键字作为替换。

# java - 何时使用异常而不是布尔值

> ID：13107895
> 
> 赞同：3
> 
> 时间：2012-10-28T10:01:09.683
> 
> 标签：java

假设您有一个方法可以检查参数 (Answer) 是否正确，并检查问题是否已经在列表中包含正确的答案：

```
public void addAnswer(Answer answer) {
    if (answer.isCorrect()) {
        ...
    }
} 
```

但是，我只希望列表中的一个答案是正确的。我有多种选择。我可以抛出一个异常，我可以忽略它，我可以从 addAnswer 返回一些布尔值，告诉我操作是否正常。在这种情况下你应该怎么想？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T10:10:42.880

规则很简单：*对异常、错误、不可预测的故障使用异常*。*当您预计*某事会发生或某事真的经常发生时，不要使用异常。

在您的情况下，答案不正确并不是错误或真正罕见的事情。它是您业务逻辑的一部分。您*可以*抛出异常，但仅作为某些验证（断言）的一部分，前提是您希望给定点的答案始终正确而突然不是（前提条件失败）。

当然，如果在检查正确性（数据库连接丢失，数组索引错误）时发生某些故障，则需要异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T10:12:34.043

这完全取决于您**想要**实现的目标。您的方法的调用者是否应该已经确保它没有添加两个正确答案？**如果发生这种情况，是否是编程错误**的迹象？然后抛出异常，但绝对**是未经检查的异常**。

如果您的方法的目的是使调用者免于强制执行唯一正确答案不变量（不过我对此表示怀疑），那么您可以安排通过`boolean`返回值发出信号，这使得它只是调用者的可选信息通道。

如果**无法**提前知道是否还有其他正确答案——例如，答案是从多个线程甚至进程（通过数据库）同时添加的——那么抛出一个**检查异常**是有意义的。

底线：没有一刀切的最佳实践，但对于您想要完成的每个场景都有一个最佳实践。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T10:32:11.783

异常警察会像一吨砖头一样对你不利，而我会回答这个问题，并附上诸如“不要将异常用于流量控制”和“不要将异常用于正常情况”之类的声明。

第一条语句的问题在于异常*是*一种流控制形式。这使得论证自相矛盾，因此无效。

第二种说法的问题在于，它似乎不可避免地伴随着无休止地将异常情况重新定义为正常情况。你会在这个网站上找到例子：例如，一个生动的讨论，警察坚持认为 EOF 是“正常的”，因此不应该捕获 EOFException，尽管存在许多没有给你任何的 Java API在这件事上的选择。沿着这条路走得足够远，你最终不会有任何异常，因此根本没有机会使用它们。

这些不是合乎逻辑的论点。这些都是未经检验的教条。

最初和真正的观点，早在 1989 年首次制定时，就是*你不应该向自己抛出异常，以相同的方法处理：*换句话说，*不要将其视为 GOTO。*这一原则仍然有效。

检查异常的要点是你*强制*调用者做一些处理它们的事情。如果您根据自己的分析认为这是您想要的，请使用例外。或者，如果您使用的 API 会强制您捕获它们，请在适当的级别捕获它们（无论是什么：留给读者作为练习）。

换句话说，就像现实世界中的大多数事情一样，这取决于你的判断力和判断力。该功能可以像其他任何东西一样被使用或滥用。

@异常警察：你会在电话簿里找到我。但要做好争论的准备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T10:04:08.323

从方法抛出的异常会强制调用者在预期某些输入会发生异常时采取一些行动。返回值不会强制执行相同的操作，因此由调用者来捕获它并采取一些措施。

如果您希望调用者处理该场景以采取一些纠正措施，那么您应该抛出一个检查异常（子类`java.lang.Exception`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T10:18:13.733

这里的问题是您的 API 容易出错。我会改用以下方案：

```
public class Question {

    private List<Answer> answers;
    private int mCorrect;

    // you may want a List implementation without duplicates
    public void setAnswers(List<Answer> answers, int correct) {
        this.answers = answers;
        // check if int is between bounds
        mCorrect = correct;
    }

    public boolean isCorrect(Answer answer) {
        return answers.indexOf(answer) == mCorrect;
    }
} 
```

因为 a`Answer`本身只是一个陈述，并且通常不能`true`与`false`a 相关联`Question`。这个 API 使得不可能有零个或多个正确答案，并强制用户在添加答案时提供正确的答案，因此您的程序始终处于一致状态并且根本不会失败。

在决定如何发出错误信号之前，最好设计 API 以使错误尽可能少见。使用您当前的实现，您必须在您这边进行检查，并且客户端程序员也必须在他这边进行检查。使用建议的设计，无需检查，您将拥有正确、简洁和流畅的代码。

关于何时使用 a`boolean`和何时使用`Exception`s，我经常看到 boolean 用于镜像底层 API（主要是低级 C 代码）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T11:06:55.497

我会以这种方式实现它：

```
 public class Question { 

    private int questionId; 
    private final Set<Answer> options = new HashSet<Answer>();
    private final Set<Answer> correctAnswers = new HashSet<Answer>();

    public boolean addAnswer(Answer answer) throws WrongAnswerForThisQuestionException {
        if(!answer.isValid(questionId)) {
            throw new WrongAnswerForThisQuestionException(answer, this);
        }
        if (answer.isCorrect(questionId)) {
           correctAnswers.add(answer);
        }
        return options.add(answer);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T10:20:31.780

我同意 Tomasz Nurkiewicz 的回应。我不能对此发表评论，因为我是新用户。我还建议，如果 addAnswer() 方法并不总是会添加答案（因为它们已经存在正确的答案），请将其命名为建议这种行为。“添加”是建议正常的收藏行为。

```
public boolean submitAnswer(Answer answer); // returns true is answer accepted 
```

您的确切解决方案可能取决于我们不了解的有关您的应用程序的更大图景。也许您确实想抛出一个异常，但也让调用者有责任检查添加答案是否有效。

这一切都是丰富的挂毯。

# windows-8 - Windows 8 中的快照视图解决方案

> ID：13107897
> 
> 赞同：0
> 
> 时间：2012-10-28T10:01:40.003
> 
> 标签：windows-8, snapping

如何在 Win 8 应用程序中使用“快照视图”进程？

我已经尝试了很多次使用不同的博客，但找不到合适的解决方案。
任何人都可以帮助我解决以下条件：

1.  快照视图的编码是什么？
2.  如何实施？

我制作了应用程序，但卡在了这个**“快照视图”**中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:03:37.717

快照视图是 Windows 的一项内置功能。

只要您的用户的屏幕分辨率至少为 1366 x 768，他们就可以激活快照视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T11:01:34.140

SnapView 真的很容易实现。后退按钮和页面标题等默认内容已经实现，但您也可以将自定义元素添加到列表中。

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton"
                                               Storyboard.TargetProperty="Style">
                    <DiscreteObjectKeyFrame KeyTime="0" 
                    Value="{StaticResource SnappedBackButtonStyle}" />
                </ObjectAnimationUsingKeyFrames> 
```

让我们使用上面的代码：

1.  要更改的元素：`Storyboard.TargetName="backButton"`
2.  要更改的元素的属性：Storyboard.TargetProperty="Style"
3.  属性的新值：Value="{StaticResource SnappedBackButtonStyle}"

所以我们所做的就是，`backButton`将`Style`属性更改为`{StaticResource SnappedBackButtonStyle}`.

您可以对任何其他元素执行相同操作。

这是文件中的代码：

```
 <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape" />
                <VisualState x:Name="Filled" />

                <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton"
                                                       Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}" />
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!-- The back button and title have different styles when snapped -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton"
                                                       Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle"
                                                       Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}" />
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups> 
```

# c++ - 以 boost ublas 矩阵 matlab 样式插入数据

> ID：13107899
> 
> 赞同：2
> 
> 时间：2012-10-28T10:01:57.133
> 
> 标签：c++, matlab, boost, ublas

我`ublas::matrix`想像这样（或类似的东西）在与 Matlab 相同的一行中插入数据：

```
model = [  
    0.0685    0.6383    0.4558    0.7411   -0.7219    0.7081    0.7061  0.2887   -0.9521   -0.2553 
    0.4636    0.0159   -0.1010    0.2817    0.6638    0.1582    0.3925 -0.7954    0.6965   -0.7795
    0         0         0         0         0         0         0       0         0         0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:50:24.110

如果您查看 boost 文档，这里是矩阵类的构造函数列表[http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/matrix.htm#18Members](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/matrix.htm#18Members)

正如您从本文档中看到的那样，目前似乎没有一种方法可以做您想做的事情，所以我建议（除非您收到更好的答案）您使用循环填充矩阵。Matlab 和 C++ 是不同的语言，因此您不能假设您将能够以相同的方式访问功能。

# oracle - ORA-01843: 无效的月份

> ID：13107900
> 
> 赞同：2
> 
> 时间：2012-10-28T10:02:40.317
> 
> 标签：oracle, oracle10g, ora-01843

我的 sql 查询有问题。

```
 create table rental
  (     
  rental_id NUMBER(5) NOT NULL,
  rental_date timestamp NOT NULL, 
  inventory_id NUMBER(5) NOT NULL,
  customer_id NUMBER(5) NOT NULL,
  return_date timestamp NOT NULL,
  staff_id NUMBER(5) NOT NULL,
  constraint rental_primary PRIMARY KEY (rental_id),
  constraint rental_foreign FOREIGN KEY (inventory_id) REFERENCES 

  inventory(inventory_id),
  constraint rental_foreign2 FOREIGN KEY (customer_id) REFERENCES
  customer(customer_id),
  constraint rental_foreign3 FOREIGN KEY (staff_id) REFERENCES staff(staff_id),
  constraint rental_unique_rental_date unique (rental_date),
  constraint rental_unique_inventory_id unique (inventory_id),
  constraint rental_unique_customer_id unique (customer_id),
  constraint rental_rental_date check(to_char(rental_date,'YYYY/MM/DD HH:MI:SS AM') 
  between '2005/01/01 00:00:01 AM' AND '12/31/2015 11:59:59 PM'),
  constraint rental_return_date check(to_char(return_date,'YYYY/MM/DD HH:MI:SS AM') 
  between '2005/01/01 00:00:01 AM' AND '12/31/2015 11:59:59 PM')
  ); 
```

当我尝试插入数据时，它会抛出此错误“ORA-01843: not a valid month”。谁能建议我可以使用什么类型的数据类型来作为 rent_date 和 return date 来度过这种情况？这是我要上传的示例数据

```
 rental_date                   return_date
   5/24/2011  10:53:30 PM        5/26/2011  10:04:30 PM 
```

注意：我可以在我的 excel 工作表中看到这种类型的格式，其中有我的数据，但是当我收到错误时

```
 "ORA-01843: not a valid month    
     Row 145: 144,  2011-05-25 23:49:56  ,1689,357,  2011-06-01 21:41:56  ,2" 
```

我在这里观察不同的时间格式。

谁能建议我一个解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T11:36:05.667

在您的检查约束中，您指定 TO_CHAR() 的日期格式掩码为`'YYYY/MM/DD HH:MI:SS AM'`. 但是您为范围指定的值有两种不同的格式，例如

```
'2005/01/01 00:00:01 AM' AND '12/31/2015 11:59:59 PM' 
```

我认为使用日期代替是个好主意，因为字符串不会像您认为的那样进行比较。

```
constraint rental_rental_date check(rental_date) 
    between to_date('2005/01/01 00:00:01 AM', 'YYYY/MM/DD HH:MI:SS AM') and
            to_date('2015/12/31 11:59:59 PM', 'YYYY/MM/DD HH:MI:SS AM') 
```

但是，这可能不是您问题的根源。这可能是您加载过程中的转换，这就是为什么我们需要知道您是如何加载数据的。

# c# - 循环通过一组服务器和端口

> ID：13107901
> 
> 赞同：0
> 
> 时间：2012-10-28T10:02:53.833
> 
> 标签：c#, .net

我想遍历一组服务器和端口（准确地说是每个 3 个）并尝试建立连接，一旦建立连接，我就可以继续使用其余的代码。这就是我所拥有的。

```
 IRC_SETTINGS IRC; //3 servers & 3 ports.
        foreach (string SERVER in IRC.IRC_SERVERS)
        {
            try
            {
                ircSocket = new TcpClient(SERVER, PORT);
                break; //;when we have a working connection.
            }
            catch(Exception){}
        } 
```

我想这对服务器部分来说很好，但是我如何同时循环通过端口呢？像 foreach （字符串服务器，int port in ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:09:34.493

您可以将它们放入单个数据结构（例如列表）中，然后循环遍历它们：

```
public class IrcServer
{
    public string Name { get; set; }
    public int Port { get; set; }

    // perhaps some methods
}

IList<IrcServer> servers = new List<IrcServer>();

foreach(IrcServer server in servers)
{
    // server.Name, server.Port
} 
```

**更新**

由于您有两个不同的数组（一个用于服务器名称，一个用于端口号），您可以*将*它们合并到字典中：

```
int[] ports = { 1, 2, 3 };
string[] servers = { "one", "two", "three" };

var serversWithPorts = servers.
    Zip(ports, (s, i) => new { s, i }).
    ToDictionary(i=> i.s, i => i.i);

foreach(var server in serversWithPorts)
{
    Console.WriteLine(server.Key + ":" + server.Value);
} 
```

# symfony - Symfony 2存根？

> ID：13107902
> 
> 赞同：1
> 
> 时间：2012-10-28T10:03:14.307
> 
> 标签：symfony, stub

我看到一些 SF2 组件在 Resources/ 文件夹内有一个名为 stubs 的文件夹。我想知道它是干什么用的？对于我的包，我需要定义一些全局函数，存根文件夹是否是放置包含这些函数的文件的好位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:17:47.213

存根似乎有几个含义。我能找到的最相关的是将存根描述为“用于代表其他一些编程功能的代码”。

即充当尚未开发的代码的替代品，或模拟在某些情况下（例如，在开发环境中）不可用（或可行）的现有代码的行为。

# ios - 现有路径的 NSBundle“尚未加载”

> ID：13107903
> 
> 赞同：5
> 
> 时间：2012-10-28T10:03:14.853
> 
> 标签：ios, nsbundle

我正在尝试实现一种更改应用程序内部语言的方法。

我想我已经弄清楚了，但是由于某种原因，该文件夹没有作为捆绑包装运

我有一个名为 kh.lproj 的文件夹

```
 NSString *path = [[NSBundle mainBundle] pathForResource:newLanguage ofType:@"lproj"];

  if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {
    bundle = [NSBundle bundleWithPath:path];
    DLOG(@"Language: %@ from path %@ (%@)", newLanguage, path, bundle);
  } 
```

我的 dlog 的输出是

> 语言：kh来自路径......../F1AA1E74-A014-4331-BD1B-D05D0E54AFF3/console.app/kh.lproj (NSBundle <......../F1AA1E74-A014-4331-BD1B- D05D0E54AFF3/console.app/kh.lproj>（尚未加载））

在 iPhone 和模拟器上（当然有不同的路径）。

我已经签入了 .app 文件夹，并且 kh.lproj 文件夹就在那里。（小写）。

有谁知道为什么会这样？如果我尝试加载一个不存在的文件，它只会忽略它并且不要尝试加载它。

编辑

如果有任何帮助，当我使用 loadAndReturnError:(NSError) 时，我会收到以下消息：

> NSLocalizedFailureReason=无法定位捆绑包的可执行文件。, NSLocalizedDescription=无法加载捆绑包“kh.lproj”，因为无法找到其可执行文件。, NSBundlePath=......./A65E8399-6CDB- 4CAE-9074-803125E78BBA/storeconsole.app/kh.lproj

这个错误信息是什么意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:39:19.080

看起来我在打电话时得到了我想要的东西

```
[bundle localizedStringForKey:key value:NULL table:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T08:15:07.307

一个可能的陷阱也是，当字符串文件有错误时，例如缺少分号或不完整的注释标记。

Xcode 不检查文件的语法错误。

# c# - C# GOTO 在这个例子中是如何工作的（不像预期的那样）？

> ID：13107904
> 
> 赞同：1
> 
> 时间：2012-10-28T10:03:17.420
> 
> 标签：c#, match, goto

这段 C# 代码很简单：

这段代码的场景：

当单词匹配时，会导致意外输出：

找到单词 未找到单词 found 的值为：True

当单词不匹配时，它会产生预期的输出：

单词未找到 找到的值为：False

```
 static void Main()
    {
        string[] words = { "casino", "other word" };

        Boolean found = false;
            foreach (string word in words)
            {
                if (word == "casino")
                {
                    found = true;
                    goto Found;
                }
            }

        if(!found)
        {
            goto NotFound;
        }

    Found: { Console.WriteLine("The word is found"); }
    NotFound: { Console.WriteLine("The word is not found"); }

        Console.WriteLine("The value of found is: {0}", found);

        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T10:34:21.503

goto 语句只是将执行移动到该点。因此，在您的情况下，正在执行 Found，然后正在执行下一行 NotFound。

要使用 goto 解决此问题，您必须有一个类似于 Continue 的第三个 goto。

```
static void Main()
{
    string[] words = { "casino", "other word" };

    Boolean found = false;

    foreach (string word in words)
    {
        if (word == "casino")
        {
            found = true;
            goto Found;
        }
    }

    if(!found)
    {
        goto NotFound;
    }

    Found: { Console.WriteLine("The word is found"); goto Continue; }
    NotFound: { Console.WriteLine("The word is not found"); }

    Continue:
    Console.WriteLine("The value of found is: {0}", found);

    Console.Read();
} 
```

但是，我更喜欢这样的东西：

```
static void Main()
{
    string[] words = { "casino", "other word" };

    Boolean found = false;

    foreach (string word in words)
    {
        if (word == "casino")
        {
            found = true;
            break;
        }
    }

    if(!found)
    {
        Console.WriteLine("The word is not found");
    }
    else
    {
        Console.WriteLine("The word is found");
    }

    Console.WriteLine("The value of found is: {0}", found);

    Console.Read();
} 
```

甚至更好！

```
static void Main()
{
    string[] words = { "casino", "other word" };

    if (words.Contains("casino"))
    {
        Console.WriteLine("The word is found");
    }
    else
    {
        Console.WriteLine("The word is not found");
    }

    Console.Read();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T10:05:28.543

当 you 时`goto Found`，所有其余代码都将执行，包括下一条语句。

# iphone - 无法在越狱的 iphone 4s 5.1.1 上打开 xcode 4.5.1 应用程序

> ID：13107905
> 
> 赞同：0
> 
> 时间：2012-10-28T10:03:23.937
> 
> 标签：iphone, xcode

我在 xcode 4.5.1 上创建了一个简单的应用程序，并按照教程将其发送到我越狱的 iphone 4s (5.1.1)。我创建了一个假密码符号，并且能够将应用程序转移到我的 iPhone 上。但是当我单击它运行它时，它会打开但又会立即关闭。当我在 xcode 上使用 iphone 作为模拟器时，它会执行相同的操作，并且我收到错误消息“无法获取进程 27658 的任务”。请帮忙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T11:49:50.310

这很简单：

我认为 Xcode 不允许这样做以减少破解代码签名。需要开发人员程序。就这样。

看看这个：[https ://developer.apple.com/programs/ios/](https://developer.apple.com/programs/ios/)

如果你要编写一个成功的应用程序，你应该买这个。

# object - 如何在 Dart 中克 隆对象（深拷贝）？

> ID：13107906
> 
> 赞同：102
> 
> 时间：2012-10-28T10:03:31.757
> 
> 标签：object, copy, clone, dart

是否有语言支持的方式在 Dart 中制作对象的完整（深度）副本？

仅次要；有多种方法可以做到这一点，有什么区别？

感谢您的澄清！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-02-17T03:26:11.783

Darts 内置集合使用名为“from”的命名构造函数来完成此操作。请参阅这篇文章：[在 Dart 中克​​隆列表、地图或集合](https://stackoverflow.com/questions/21744480/clone-a-list-map-or-set-in-dart)

```
Map mapA = {
    'foo': 'bar'
};
Map mapB = new Map.from(mapA); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-28T10:19:50.627

就未解决的问题似乎暗示而言，没有：

[http://code.google.com/p/dart/issues/detail?id=3367](http://code.google.com/p/dart/issues/detail?id=3367)

特别是：

```
.. Objects have identity, and you can only pass around references to them. There is no implicit copying. 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2019-01-10T20:48:09.400

派对迟到了，但我最近遇到了这个问题，不得不按照以下方式做一些事情：-

```
class RandomObject {

  RandomObject(this.x, this.y);

  RandomObject.clone(RandomObject randomObject): this(randomObject.x, randomObject.y);

  int x;
  int y;
} 
```

然后，您可以使用原件调用副本，如下所示：

```
final RandomObject original = RandomObject(1, 2);
final RandomObject copy = RandomObject.clone(original); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-10-28T18:41:59.070

我猜对于不太复杂的对象，您可以使用转换库：

```
import 'dart:convert'; 
```

然后使用 JSON 编码/解码功能

```
Map clonedObject = JSON.decode(JSON.encode(object)); 
```

如果您使用自定义类作为要克隆的对象中的值，则该类需要实现 toJson() 方法，或者您必须为 JSON.encode 方法提供 toEncodable 函数，并为解码调用提供 reviver 方法.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-03-27T19:32:16.543

不幸的是没有语言支持。我所做的是创建一个名为的抽象类`Copyable`，我可以在我希望能够复制的类中实现它：

```
abstract class Copyable<T> {
  T copy();
  T copyWith();
} 
```

然后我可以按如下方式使用它，例如用于 Location 对象：

```
class Location implements Copyable<Location> {
  Location({
    required this.longitude,
    required this.latitude,
    required this.timestamp,
  });

  final double longitude;
  final double latitude;
  final DateTime timestamp;

  @override
  Location copy() => Location(
        longitude: longitude,
        latitude: latitude,
        timestamp: timestamp,
      );

  @override
  Location copyWith({
    double? longitude,
    double? latitude,
    DateTime? timestamp,
  }) =>
      Location(
        longitude: longitude ?? this.longitude,
        latitude: latitude ?? this.latitude,
        timestamp: timestamp ?? this.timestamp,
      );
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-05-30T02:24:04.650

要在没有引用的情况下复制对象，我找到的解决方案类似于此处发布的解决方案，但是如果对象包含 MAP 或 LIST，您必须这样做：

```
class Item {
  int id;
  String nome;
  String email;
  bool logado;
  Map mapa;
  List lista;
  Item({this.id, this.nome, this.email, this.logado, this.mapa, this.lista});

  Item copyWith({ int id, String nome, String email, bool logado, Map mapa, List lista }) {
    return Item(
      id: id ?? this.id,
      nome: nome ?? this.nome,
      email: email ?? this.email,
      logado: logado ?? this.logado,
      mapa: mapa ?? Map.from(this.mapa ?? {}),
      lista: lista ?? List.from(this.lista ?? []),
    );
  }
} 
```

```
Item item1 = Item(
    id: 1,
    nome: 'João Silva',
    email: 'joaosilva@gmail.com',
    logado: true,
    mapa: {
      'chave1': 'valor1',
      'chave2': 'valor2',
    },
    lista: ['1', '2'],
  );

// -----------------
// copy and change data
Item item2 = item1.copyWith(
    id: 2,
    nome: 'Pedro de Nobrega',
    lista: ['4', '5', '6', '7', '8']
  );

// -----------------
// copy and not change data
Item item3 = item1.copyWith();

// -----------------
// copy and change a specific key of Map or List
Item item4 = item1.copyWith();
item4.mapa['chave2'] = 'valor2New'; 
```

查看 dartpad 上的示例

[https://dartpad.dev/f114ef18700a41a3aa04a4837c13c70e](https://dartpad.dev/f114ef18700a41a3aa04a4837c13c70e)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-07-25T17:30:07.093

假设你有课

```
Class DailyInfo

  { 
     String xxx;
  } 
```

通过创建类对象 dailyInfo 的新克隆

```
 DailyInfo newDailyInfo =  new DailyInfo.fromJson(dailyInfo.toJson()); 
```

为此，您的班级必须已实施

```
 factory DailyInfo.fromJson(Map<String, dynamic> json) => _$DailyInfoFromJson(json);

Map<String, dynamic> toJson() => _$DailyInfoToJson(this); 
```

这可以通过使用使类可序列化来完成

```
@JsonSerializable(fieldRename: FieldRename.snake, includeIfNull: false)
Class DailyInfo{ 
 String xxx;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-01-22T01:34:12.167

尝试使用 Dart 提供的[Copyable](https://pub.dev/documentation/copyable/latest/index.html#usage)接口。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-01-17T08:02:29.067

它仅适用于可以由 JSON 表示的对象类型。

```
ClassName newObj = ClassName.fromMap(obj.toMap()); 
```

或者

```
ClassName newObj = ClassName.fromJson(obj.toJson()); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-12-30T09:07:39.770

没有内置的深度克隆对象的方法 - 您必须自己提供方法。

我经常需要从 JSON 编码/解码我的类，所以我通常提供`MyClass fromMap(Map)`和`Map<String, dynamic> toJson()`方法。这些可用于创建深度克隆，方法是首先将对象编码为 JSON，然后将其解码回来。

但是，出于性能原因，我通常会实现一个单独的`clone`方法。这是几分钟的工作，但我发现它通常是值得花时间的。

在下面的示例中，`cloneSlow`使用 JSON 技术，并`cloneFast`使用显式实现的克隆方法。打印输出证明该克隆确实是一个深度克隆，而不仅仅是引用的副本`a`。

```
import 'dart:convert';

class A{
  String a;
  A(this.a);

  factory A.fromMap(Map map){
    return A(
        map['a']
   );
  }

  Map<String, dynamic> toJson(){
    return {
      'a': a
    };
  }

  A cloneSlow(){
    return A.fromMap(jsonDecode(jsonEncode(this)));
  }

  A cloneFast(){
    return A(
      a
    );
  }

  @override
  String toString() => 'A(a: $a)';
}

void main() {
  A a = A('a');
  A b = a.cloneFast();
  b.a = 'b';

  print('a: $a   b: $b');
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-11-10T14:16:29.767

有一个更简单的方法来解决这个问题`...`，例如使用运算符，克隆一个 Map

```
Map p = {'name' : 'parsa','age' : 27};
Map n = {...p}; 
```

此外，您可以对类属性执行此操作。就我而言，我需要克隆一个类的列出属性。所以：

```
class P1 {
List<String> names = [some data];
}

/// codes
P1 p = P1();
List<String> clonedList = [...p.names]
// now clonedList is an unreferenced type 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-07T08:44:28.553

//希望这个工作

```
 void main() {
  List newList = [{"top": 179.399, "left": 384.5, "bottom": 362.6, "right": 1534.5}, {"top": 384.4, "left": 656.5, "bottom": 574.6, "right": 1264.5}];
  List tempList = cloneMyList(newList);
  tempList[0]["top"] = 100;
  newList[1]["left"] = 300;
  print(newList);
  print(tempList);
}

List cloneMyList(List originalList) {
 List clonedList = new List();
  for(Map data in originalList) {
    clonedList.add(Map.from(data));
  }
  return clonedList;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-28T10:00:58.833

参考@Phill Wiggins 的回答，这是一个带有 .from 构造函数和命名参数的示例：

```
class SomeObject{
  String parameter1;
  String parameter2;

  // Normal Constructor
  SomeObject({
    this.parameter1,
    this.parameter2,
  });

  // .from Constructor for copying
  factory SomeObject.from(SomeObject objectA){
    return SomeObject(
      parameter1: objectA.parameter1,
      parameter2: objectA.parameter2,
    );
  }

} 
```

然后，在要复制的位置执行此操作：

```
SomeObject a = SomeObject(parameter1: "param1", parameter2: "param2");
SomeObject copyOfA = SomeObject.from(a); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-07T02:40:49.623

make a helper class:

```
class DeepCopy {
  static clone(obj) {
    var tempObj = {};
    for (var key in obj.keys) {
      tempObj[key] = obj[key];
    }
    return tempObj;
  }
} 
```

and copy what you want:

```
 List cloneList = [];
 if (existList.length > 0) {
    for (var element in existList) {
        cloneList.add(DeepCopy.clone(element));
    }
 } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-05T18:39:40.327

比方说，你想深拷贝一个对象`Person`，它的属性是其他对象的列表`Skills`。按照惯例，我们使用`copyWith`带有可选参数的方法进行深拷贝，但您可以将其命名为任何您想要的名称。

你可以做这样的事情

```
class Skills {
  final String name;

  Skills({required this.name});

  Skills copyWith({
    String? name,
  }) {
    return Skills(
      name: name ?? this.name,
    );
  }
}

class Person {
  final List<Skills> skills;

  const Person({required this.skills});

  Person copyWith({
    List<Skills>? skills,
  }) =>
      Person(skills: skills ?? this.skills.map((e) => e.copyWith()).toList());
} 
```

请记住，仅使用`this.skills`只会复制列表的引用。所以原始对象和复制的对象将指向相同的技能列表。

```
 Person copyWith({
    List<Skills>? skills,
  }) =>
      Person(skills: skills ?? this.skills); 
```

如果您的列表是原始类型，您可以这样做。原始类型会自动复制，因此您可以使用这种较短的语法。

```
class Person {
  final List<int> names;

  const Person({required this.names});

  Person copyWith({
    List<int>? names,
  }) =>
      Person(names: names ?? []...addAll(names));
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-17T01:45:41.907

dart 中的 Deep Copy 示例。

```
void main() {
  Person person1 = Person(
      id: 1001,
      firstName: 'John',
      lastName: 'Doe',
      email: 'john.doe@email.com',
      alive: true);

  Person person2 = Person(
      id: person1.id,
      firstName: person1.firstName,
      lastName: person1.lastName,
      email: person1.email,
      alive: person1.alive);

  print('Object: person1');
  print('id     : ${person1.id}');
  print('fName  : ${person1.firstName}');
  print('lName  : ${person1.lastName}');
  print('email  : ${person1.email}');
  print('alive  : ${person1.alive}');
  print('=hashCode=: ${person1.hashCode}');

  print('Object: person2');
  print('id     : ${person2.id}');
  print('fName  : ${person2.firstName}');
  print('lName  : ${person2.lastName}');
  print('email  : ${person2.email}');
  print('alive  : ${person2.alive}');
  print('=hashCode=: ${person2.hashCode}');
}

class Person {
  int id;
  String firstName;
  String lastName;
  String email;
  bool alive;
  Person({this.id, this.firstName, this.lastName, this.email, this.alive});
} 
```

以及下面的输出。

```
id     : 1001
fName  : John
lName  : Doe
email  : john.doe@email.com
alive  : true
=hashCode=: 515186678

Object: person2
id     : 1001
fName  : John
lName  : Doe
email  : john.doe@email.com
alive  : true
=hashCode=: 686393765 
```

# olap-cube - 使用 mondrian 和 olap4j 进行日期范围查询

> ID：13107910
> 
> 赞同：1
> 
> 时间：2012-10-28T10:03:44.223
> 
> 标签：olap-cube, mondrian, rolap, olap4j

我正在使用 olap4j 来查询一个蒙德里安立方体。我在我的模式 xml 中定义了一个标准的 TimeDimension：

```
 <Dimension name="DateTime" type="TimeDimension">
    <Hierarchy hasAll="true" primaryKey="DateId">
        <Table name="event_date" />
        <Level name="Year" column="Year" type="Numeric" uniqueMembers="true" levelType="TimeYears" />
        <Level name="Quarter" column="Quarter" captionColumn="QuarterLabel" uniqueMembers="false" levelType="TimeQuarters" />
        <Level name="Month" column="Month" captionColumn="MonthLabel" uniqueMembers="false" type="Numeric" levelType="TimeMonths" />
        <Level name="Week" column="Week" uniqueMembers="false" levelType="TimeWeeks" />
        <Level name="Day" column="Day" uniqueMembers="false" type="Numeric" levelType="TimeDays">
            <Property name="DayISO" column="DateIso" dependsOnLevelValue="true" />
            <Property name="DayOfWeek" column="DayOfWeek" dependsOnLevelValue="true" />
        </Level>
    </Hierarchy>
</Dimension> 
```

我无法理解的是如何使用 olap4j 查询以 DateTime 作为共享维度的多维数据集上的一系列日期。

有没有人可以分享的例子？

约西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:24:05.487

在 MDX 中，您可以按如下所示的日期范围对结果进行切片：

```
select
    (...)
where
    ([DateTime].[Month].[2] : [DateTime].[Month].[6]) 
```

# ios - Ipad1 太旧无法用作测试设备？

> ID：13107911
> 
> 赞同：2
> 
> 时间：2012-10-28T10:04:01.890
> 
> 标签：ios, ipad

你还在 iPad1 上测试 iPad 应用吗？作为测试设备是否太旧了？

有谁知道 Apple 对这款设备的计划 - 它是否还会获得更新和类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:05:58.000

作为功​​能最弱的 iPad，它是 iPad 应用程序性能测试的良好测试设备。您在应用程序开发中可能遇到的主要限制特征是系统上的 RAM 数量有限。

虽然它只支持 iOS 5，所以如果你打算支持 iOS 5 而不是只支持 iOS 6，那就买一个。如果你只想支持 iOS 6，iPad 2 是你的最低基准，虽然有些功能可以执行在 iPad 3 上更慢（`renderInContext`是其中之一），所以理想情况下你会同时拥有。从设备的角度来看，iPad mini 与 iPad 2 几乎相同，但界面会稍小一些。

总之，对于只支持 iOS 6 的新应用程序，我将有一个 iPad mini 和 iPad 3 作为最低测试套件，对于 iOS 5 支持，我建议添加第一代 iPad。

# c# - 列表视图中对 TextBox lostFocus 的事件调用

> ID：13107914
> 
> 赞同：-1
> 
> 时间：2012-10-28T10:04:23.297
> 
> 标签：c#, wpf, events, delegates

我有一个 ListView 绑定到 List，listview 的一列有 cellTemplate 和 dataTemplate 包含一个文本框。我希望在文本框失去焦点时调用一个事件，它比较文本框的先前值和新值（如果用户已更改![在此处输入图像描述](../Images/9c1f8923a275c60bc9c2007b81840c9c.png)），如果新值更大，则显示警告，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:02:34.360

查看 ExceptionValidationRule

[ExceptionValidationRule 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.exceptionvalidationrule.aspx)

[自定义数据显示](http://msdn.microsoft.com/en-us/magazine/cc700358.aspx)

# c# - 如何将“X8”十六进制类型拆分为“X2-X2-X2-X2”类型

> ID：13107917
> 
> 赞同：-3
> 
> 时间：2012-10-28T10:05:08.547
> 
> 标签：c#

这是我的代码，我只是想知道如何将 4bytes 拆分为 1byte-1byte-1byte-1byte

```
 static int count;
    private void SetClock_Click(object sender, EventArgs e)
    {

        count++;

        label5.Text = count.ToString("X8");

        DateTime time = DateTime.Now;
        txtSend.Text = "4D-" + "1A-" + "2B-" + "3C-" +
        (label5.Text.ToString()) + "-" + "03-" + "07-" + "00-" + 
        time.ToString("yy-MM-dd-") +
        ((int)time.DayOfWeek).ToString("00") +
        time.ToString("-HH-mm-ss");

        string[] allHaxValues = txtSend.Text.Split(new char[] { '-' });
        int result = 0;
        foreach (string haxValue in allHaxValues)
        {
            result = result ^ Convert.ToInt32(haxValue, 16);
        }
        //txtSend.Text = s;
        txtSend.Text = txtSend.Text + ("-") + result.ToString("X2");
     } 
```

我在单击“00000001”时收到价值。我想像其他人一样得到它“00-00-00-01”谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:12:35.000

您可以使用`BitConverter`该类将`int`值转换为`xx-xx-xx-xx`形式：

```
// make a four byte array of the int
byte[] parts = BitConverter.GetBytes(result);
// put the bytes in the right order
if (BitConverter.IsLittleEndian) {
  Array.Reverse(parts);
}
// turn the bytes into the xx-xx-xx-xx format
string resultString = BitConverter.ToString(parts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:33:48.210

基于@Guffa 解决方案：

```
private string IntToBytes(int count)
{ 
// make a four byte array of the int
byte[] parts = BitConverter.GetBytes(count);
// put the bytes in the right order
if (BitConverter.IsLittleEndian) {
  Array.Reverse(parts);
}
// turn the bytes into the xx-xx-xx-xx format
return BitConverter.ToString(parts);
} 
```

现在只需更换

```
label5.Text = count.ToString("X8"); 
```

和

```
label5.Text = IntToBytes(count); 
```

# php - PHP中的子类化和调用方法？

> ID：13107919
> 
> 赞同：0
> 
> 时间：2012-10-28T10:05:26.503
> 
> 标签：php, apache, parent, subclass

我来自 Objective-C，面向对象编程只是一个梦想。（至少对我来说）

我在 PHP 中有一个问题。我正在尝试制作一个模型类来保存我的数据库条目。它看起来像这样：

```
class Model {

    public function __set($name, $value)
    {
        $methodName = "set" . ucfirst($name);

        if (method_exists($this, $methodName)) {
            $methodName($value);
        } else {
            print("Setter method does not exists");
        }
    }

}; 
```

我想对此进行子类化并创建一个类用户。

```
class User extends Model {
    private $userID;

    public function userID() {
        return $this->userID;
    }

    public function setUserID($theUserID) {
        $this->userID = $theUserID;
    }

}; 
```

当我打电话时，`$user->__set("userID", "12345");`我得到以下异常：

> 致命错误：调用 Model.class.php 中未定义的函数 setUserID()

$user 对象当然是一个用户对象。为什么我不能从超类调用方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T10:08:32.827

```
if (method_exists($this, $methodName)) {
    $methodName($value);
} 
```

您正在检查对象中是否存在方法，`(method_exists($this, $methodName))`而不是调用函数，而不是此对象方法，应该是： `$this->$methodName($value);`

# c# - 如何优化这段代码使用 lambda 表达式

> ID：13107929
> 
> 赞同：1
> 
> 时间：2012-10-28T10:07:24.523
> 
> 标签：c#

我有代码：

```
protected void Method1(List<SomeClass> mylist)
{
    foreach(var item in mylist)
    {
        if (!SomeClass.Validate(item))
        {
            continue;
        }
        DoStuff(item);
    }
}

protected void Method2(List<SomeClass> mylist)
{
    foreach(var item in mylist)
    {
        if (!SomeClass.Validate(item) || item.Value == 0)
        {
            continue;
        }
        DoStuff(item);
    }
} 
```

如何组织这两种方法？

它们的区别在于只能`item.Value == 0`使用 lambda 表达式。

我不知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:14:30.523

```
protected void Method(List<SomeClass> mylist, Func<SomeClass, bool> filter)
{
    var selectedItem = mylist.Where(filter);

    foreach (var item in selectedItem)
        DoStuff(item);
} 
```

所以你可以使用：

```
Method(mylist, item => (SomeClass.Validate(item) && item.Value != 0)); 
```

或者：

```
Method(mylist, item => SomeClass.Validate(item)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:15:59.310

如果我了解您的需求，那么代码应该如下所示。

```
protected void CommonMethod(List<SomeClass> mylist, Func<SomeClass, bool> predicate)
{
    foreach(var item in mylist)
    {
        if (predicate(item))
        {
            continue;
        }
        DoStuff(item);
    }
}

Func<SomeClass, bool> method1Predicate = (SomeClass item) => !SomeClass.Validate(item); 
Func<SomeClass, bool> method2Predicate = (SomeClass item) => !SomeClass.Validate(item) || item.Value == 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T10:16:58.690

关于什么：

```
protected void Method<T>(List<T> mylist, Func<T, bool> predicate)
{
    var result = mylist.Where(predicate);   

    foreach(var item in result)
        DoStuff(item);
} 
```

# silverlight - Silverlight 4 - ListBox 自动滚动到最后添加的项目 - mvvm 灯光绑定 - 没有代码后面

> ID：13107938
> 
> 赞同：0
> 
> 时间：2012-10-28T10:09:04.563
> 
> 标签：silverlight, silverlight-4.0

我在 WPF 中找到了这个问题的 2 个解决方案，但是在 Silverlight 4 中它不起作用，代码不能

编译，

WPF 示例：http: [//michlg.wordpress.com/2010/01/16/listbox-automatically-scroll-currentitem-into-](http://michlg.wordpress.com/2010/01/16/listbox-automatically-scroll-currentitem-into-)

看法/

任何有效的 Silverlight 4 扩展器？

# ios - iOS 上的 Cordova/PhoneGap UI 响应能力

> ID：13107944
> 
> 赞同：1
> 
> 时间：2012-10-28T10:10:14.970
> 
> 标签：ios, cordova

我们决定使用 Cordova/PhoneGap 引擎进行 iOS 应用程序开发。我们查看了[PhoneGap 应用程序库](http://phonegap.com/app)中的一些示例。与原生应用程序相比，它们在触摸反应时间方面的响应能力非常差。

我们还发现了一些关于提高响应能力的文章。比如[这个](http://www.mikedellanoce.com/2012/09/10-tips-for-getting-that-native-ios.html)。

现在我们希望看到真实世界的 PhoneGap 应用程序具有最佳的 UI 响应能力，以确保它能够正常工作。你知道这样的应用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T21:18:11.613

好吧，如果开发人员正在使用点击事件，那么您将在事件触发之前获得 300 毫秒的延迟。相反，他们应该使用点击事件作为您发现提及的文章。除非我们查看他们的代码，否则我们真的无法知道开发人员是否以“正确的方式”做事。

例如，您应该查看使用 PG 构建的 Wikipedia 应用程序。作为额外的奖励，所有来源都可以在以下位置获得：

[https://github.com/wikimedia/WikipediaMobile](https://github.com/wikimedia/WikipediaMobile)

# c# - 在多个实例之间分离数据

> ID：13107949
> 
> 赞同：3
> 
> 时间：2012-10-28T10:10:51.263
> 
> 标签：c#, .net, class

我有一堂课用来存储我的数据：

```
class Model
{
   public int Progress{ get; set; }
} 
```

第二类，我可以修改这些数据并通知订阅者有关更改：

```
class Copy
{
   //...
   public static event EventHandler Changed;
   Model model = new Model();
   ProgressForm progressForm = new ProgressForm();

   public void Start()
   {
      for(int i=0;i<100;i++)
      { 
         model.Progress++;
         if(Changed!=null)
           Changed(this,EventArgs.Empty);
      }
   }

   //...
} 
```

和这样的：

```
class ProgressForm
{
    Model model;
    public ProgressForm()
    { 
       model = new Model();
       Copy.Changed+=new Changed(ShowProgress);
    }

    void ShowProgress()
    {
       progressBar1.value = model.Progress;
    }
} 
```

如何分别更改每个模型的数据并`ProgressForm`在运行两个或多个实例时显示此数据`Copy`？

```
Main()
{
   Copy copy = new Copy();
   copy.Start();
   Copy copy2 = new Copy();
   copy2.Start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:34:05.837

```
public class Model
{ 
    public int progress;
    public event EventHandler ProgressChanged;

    public int Progress
    {
        get { return progress; }
        set 
        { 
            progress = value;
            if (ProgressChanged != null)
            {
                ProgressChanged(this, null);
            }
        }
    }
}

public class Copy
{
    public List<Model> models = new List<Model>();
    public event EventHandler CopyProgrss; // FormModel binded to this event. 
    public void AddModel(Model m)
    {
        this.models.Add(m);
        m.ProgressChanged += new EventHandler(m_ProgressChanged);
    }

    void m_ProgressChanged(object sender, EventArgs e)
    {
        Model currentModel = sender as Model;
        int modelProgress = currentModel.Progress;
        if (CopyProgrss != null)
            CopyProgrss(modelProgress,null); // here you can caluclate your over progress. 
    }
} 
```

# vb.net - 在 MS Access 查询中添加十进制数字时不显示十进制值

> ID：13107952
> 
> 赞同：1
> 
> 时间：2012-10-28T10:11:33.263
> 
> 标签：vb.net, ms-access

如果我的 ".SubItems(2).Text" 是 12.5 并且 "[quantity]" 是 15 ，那么它存储的是 '3' 而不是 2.5' ，数量列的数据类型是十进制格式的数字..请帮助我在这...

```
"update purchase set [quantity] = [quantity] - " & CDec(.SubItems(2).Text) & " where (ID =  " & .SubItems(7).Text & ")" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T13:59:40.467

要解决此问题，请手动将列的字段大小属性（在我的情况下为数量）设置为 Double 或 Decimal。

单击数据表选项卡。在“视图”组中，单击“视图”下的箭头，然后单击“设计视图”。

注意 如果该表尚未保存，系统将提示您使用您提供的表名保存该表。找到要更改的列，然后将该列的字段大小属性设置为 Double 或 Decimal。

注意如果将列的字段大小属性设置为十进制，则还必须设置列的比例属性。设置 Scale 属性时，您指定可以存储在小数点分隔符右侧的最大位数。保存表。

有关更多详细信息，请参阅：

[http://support.microsoft.com/kb/920359](http://support.microsoft.com/kb/920359)

# concurrency - runtime.Gosched 到底是做什么的？

> ID：13107958
> 
> 赞同：99
> 
> 时间：2012-10-28T10:12:51.183
> 
> 标签：concurrency, go

在[Tour of Go 网站的 go 1.5 发布之前的一个版本中](http://tour.golang.org/)，有一段代码看起来像这样。

```
package main

import (
    "fmt"
    "runtime"
)

func say(s string) {
    for i := 0; i < 5; i++ {
        runtime.Gosched()
        fmt.Println(s)
    }
}

func main() {
    go say("world")
    say("hello")
} 
```

输出如下所示：

```
hello
world
hello
world
hello
world
hello
world
hello 
```

困扰我的是，当`runtime.Gosched()`被删除时，程序不再打印“世界”。

```
hello
hello
hello
hello
hello 
```

为什么呢？对`runtime.Gosched()`执行有何影响？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-10-28T11:37:00.640

**笔记：**

从 Go 1.5 开始，GOMAXPROCS 设置为硬件的核心数：[golang.org/doc/go1.5#runtime](http://golang.org/doc/go1.5#runtime)，低于 1.5 之前的原始答案。

* * *

当你在没有指定 GOMAXPROCS 环境变量的情况下运行 Go 程序时，Go goroutine 被安排在单个 OS 线程中执行。然而，为了使程序看起来是多线程的（这就是 goroutines 的用途，不是吗？），Go 调度程序有时必须切换执行上下文，以便每个 goroutine 都可以完成它的工作。

正如我所说，当没有指定 GOMAXPROCS 变量时，Go 运行时只允许使用一个线程，因此在 goroutine 执行一些常规工作时无法切换执行上下文，例如计算甚至 IO（映射到普通 C 函数）。只有在使用 Go 并发原语时才能切换上下文，例如，当您打开多个通道时，或者（这是您的情况）当您明确告诉调度程序切换上下文时 - 这就是`runtime.Gosched`目的。

因此，简而言之，当一个 goroutine 中的执行上下文到达`Gosched`调用时，调度程序被指示将执行切换到另一个 goroutine。在您的情况下，有两个 goroutine， main （代表程序的“主”线程）和附加的，您使用`go say`. 如果你删除`Gosched`调用，执行上下文将永远不会从第一个 goroutine 转移到第二个，因此你没有“世界”。当`Gosched`存在时，调度程序将每个循环迭代的执行从第一个 goroutine 转移到第二个 goroutine，反之亦然，所以你有 'hello' 和 'world' 交错。

仅供参考，这称为“协作多任务”：goroutines 必须明确地将控制权交给其他 goroutines。大多数现代操作系统中使用的方法称为“抢占式多任务”：执行线程不关心控制转移；调度程序将执行上下文透明地切换给它们。协作方法经常用于实现“绿色线程”，即不将 1:1 映射到 OS 线程的逻辑并发协程 - 这就是 Go 运行时及其 goroutine 的实现方式。

**更新**

我提到了 GOMAXPROCS 环境变量，但没有解释它是什么。是时候解决这个问题了。

当此变量设置为正数`N`时，Go 运行时将能够创建最多`N`本地线程，所有绿色线程都将在其上调度。本机线程是一种由操作系统创建的线程（Windows 线程、pthread 等）。这意味着如果`N`大于 1，goroutine 可能会被安排在不同的本地线程中执行，因此并行运行（至少取决于您的计算机能力：如果您的系统基于多核处理器，它这些线程很可能是真正并行的；如果您的处理器具有单核，那么在 OS 线程中实现的抢占式多任务处理将创建并行执行的可见性）。

可以使用`runtime.GOMAXPROCS()`函数设置 GOMAXPROCS 变量，而不是预先设置环境变量。在你的程序中使用这样的东西而不是当前的`main`：

```
func main() {
    runtime.GOMAXPROCS(2)
    go say("world")
    say("hello")
} 
```

在这种情况下，您可以观察到有趣的结果。您可能会不均匀地交错打印“hello”和“world”行，例如

```
hello
hello
world
hello
world
world
... 
```

如果 goroutine 被调度为单独的 OS 线程，则可能会发生这种情况。这实际上是抢占式多任务的工作原理（或多核系统中的并行处理）：线程是并行的，它们的组合输出是不确定的。顺便说一句，您可以离开或删除`Gosched`呼叫，当 GOMAXPROCS 大于 1 时似乎没有效果。

以下是我在`runtime.GOMAXPROCS`调用程序的几次运行中得到的结果。

```
hyperplex /tmp % go run test.go
hello
hello
hello
world
hello
world
hello
world
hyperplex /tmp % go run test.go
hello
world
hello
world
hello
world
hello
world
hello
world
hyperplex /tmp % go run test.go
hello
hello
hello
hello
hello
hyperplex /tmp % go run test.go
hello
world
hello
world
hello
world
hello
world
hello
world 
```

See, sometimes output is pretty, sometimes not. Indeterminism in action :)

**Another update**

Looks like that in newer versions of Go compiler Go runtime forces goroutines to yield not only on concurrency primitives usage, but on OS system calls too. This means that execution context can be switched between goroutines also on IO functions calls. Consequently, in recent Go compilers it is possible to observe indeterministic behavior even when GOMAXPROCS is unset or set to 1.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-28T11:19:12.593

协同调度是罪魁祸首。在没有让步的情况下，另一个（比如“世界”）goroutine 可能在 main 终止之前/期间合法地获得零执行机会，根据规范终止所有 gorutines - 即。整个过程。

# javascript - HTML5 游戏 - 如何防止修改变量

> ID：13107960
> 
> 赞同：9
> 
> 时间：2012-10-28T10:13:16.950
> 
> 标签：javascript, jquery, html, canvas, protection

我在画布中编写了 HTML5 游戏，但遇到了问题。

我像这样使用var：

```
var score = 0;
// another code 
++score; 
```

但用户可以编辑该变量（例如在 FireBug 或 Chrome 编辑器中）——得分被黑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T10:22:06.403

Javascript是客户端执行的。客户端上发生的任何事情都可以由它控制。没有其他办法了。您可以尝试混淆您的代码，但这只会使找出如何作弊变得更加困难。它无法阻止一个足够坚定的人。

设计防作弊游戏的唯一方法是在服务器上完成所有游戏机制。这当然在技术上更具挑战性，当用户连接不良时会损害游戏体验，并且会因为您需要更多服务器容量而花费您额外的资源，但这是唯一的方法。

顺便说一句：我们有一个姊妹网站[http://gamedev.stackexchange.com](http://gamedev.stackexchange.com)专门针对有关游戏开发的问题。你可能会在那里得到一些更好的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T10:21:11.360

您实际上无法保护在客户端运行的任何代码！

因此，您无法保护变量的内容。你只能让破解变得更加困难——就像 Guffa 说的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T10:19:37.683

您可以将 score 变量作为局部变量放在类构造函数中，这样更难获得：

```
function MyClass() {
  var score = 0;

  this.somethingHappened = function() {
    if (someondition) {
      score++;
    }
  }

  this.getScore = function() {
    return score;
  }

} 
```

当然仍然可以破解代码，但它根本不像更改全局变量那么简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-28T10:15:37.070

您无法采取任何措施来避免这种情况。您可以通过混淆代码使其更难，但仍然有可能破解分数。

一种更难的方法是双重保存分数，并在循环或某些函数中检查它是否在游戏逻辑之外发生了变化，这样用户需要找到这两个变量。

如果第二个分值是另一个分值的两倍，则通过将当前得分与所有变量得分进行比较，更难找到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T10:22:42.707

[http://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)

请参阅 Crockford 的关于 js 中的私有和公共 var 的文章

# css - 这种 DIV 布局可能吗？

> ID：13107961
> 
> 赞同：2
> 
> 时间：2012-10-28T10:13:37.290
> 
> 标签：css, layout, html

我无法生成 HTML/CSS 布局。考虑它的最佳方法是采用正常的水平居中页面布局。只有我想要一个 div 超出居中布局到浏览器窗口的右边缘。

这应该与浏览器窗口大小调整一起流畅地工作。 ![这张图片中的红色平面解释了我的意思](../Images/4786e20fb09873f0bb124498508db11b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T11:49:22.577

这里有两种纯 CSS 方法来实现这样的布局。两者都在 IE 7/8/9 和 Chrome 中进行了简要测试。

## 示例 1

这是一个您知道所有元素高度的示例。

演示：http: [//jsfiddle.net/3RDuy/2/](http://jsfiddle.net/3RDuy/2/)

**HTML**

```
<div id="top">Top</div>
<div id="left">Left</div>
<div id="right">Variable Right</div>
<div id="bottom">Bottom</div> 
```

**CSS**

```
DIV { position: absolute; height: 100px; }
#top { width: 400px; left: 50%; margin-left: -200px; background-color: #aaa; }
#left{ width: 100px; left: 50%; top: 100px; margin-left: -200px; background-color: #bbb; }
#right{ left: 50%; right: 0; top: 100px; margin-left: -100px; background-color: #aa0000; }
#bottom{ left: 50%; width: 400px; top: 200px; margin-left: -200px; background-color: #aaa; }​ 
```

## 示例 2

这是一个示例，您只知道顶部和底部的高度。

演示：http: [//jsfiddle.net/3RDuy/3/](http://jsfiddle.net/3RDuy/3/)

**HTML**

```
<div id="top">Top</div>
<div id="left">Left</div>
<div id="right">Variable Right</div>
<div id="bottom">Bottom</div> 
```

**CSS**

```
DIV { position: absolute; }
#top { width: 400px; left: 50%; margin-left: -200px; background-color: #aaa;  height: 100px; }
#left{ width: 100px; left: 50%; top: 100px; bottom: 100px; margin-left: -200px; background-color: #bbb; }
#right{ left: 50%; right: 0; top: 100px; margin-left: -100px; top: 100px; bottom: 100px; background-color: #aa0000; }
#bottom{ left: 50%; width: 400px; bottom: 0; margin-left: -200px; background-color: #aaa; height: 100px; }​ 
```

* * *

如果您希望所有内容都具有可变高度（包括高度大于 100% 的能力），您可能需要使用 JavaScript。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T14:12:13.407

这是一个非常有趣的挑战。

几个月前我需要一个类似的效果，一个元素从容器延伸到窗口的边缘，但不需要用于内容的空间——它只是一种设计效果。

蒂姆的回答是可靠的，但需要知道元素的高度是不切实际的。我的解决方案消除了这个要求。

利用包装器、一些填充和负边距，我们可以操纵我们的布局来复制所需的功能。

**标记：**

```
<div class="header">
    <h1>Hello World!</h1>
</div>

<div class="content">
    <div class="a">A</div>
    <div class="b">B</div>
</div>

<div class="footer">
    <p>Lorem ipsum dolor sit amet.</p>
</div>​ 
```

**CSS：**

```
.header,
.footer {
    clear: both;
    margin: auto;
    width: 600px; /* Your container width */
    background: grey;
    }

.content {
    float: right;
    width: 50%;
    padding-left: 300px; /* Half of your container width */
    }

.a {
    float: left;
    margin-left: -300px; /* Half of your container width */
    width: 200px;
    height: 10em;  /* Not required, set for visual */
    background: red;
    }

.b {
    margin-left: -100px; /* The difference between half your container width and element A */
    height: 10em; /* Not required, set for visual */
    background: yellow;
    } 
```

**演示：http:** [//jsfiddle.net/rkW9J/](http://jsfiddle.net/rkW9J/)

应该注意的是，这还没有经过广泛的跨浏览器测试，但没有实现任何明显的布局怪癖，所以我们应该很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T11:19:14.883

找不到解决方案宽度纯 CSS，但这里是如何使用 javascript / jquery 来做到这一点。

[**演示**](http://jsfiddle.net/gionaf/4MaDu/)

HTML：

```
<div id="wrapper">
<div id="header"> 1080px </div>
<div id="left"> 400px </div>
<div id="right"> full width </div>
<div id="footer"> 1080px </div>
</div>​ 
```

CSS：

```
#wrapper { width:1080px; margin:0 auto; }
#header, #footer { clear:both; }
#left { float:left; width:400px; margin-right:10px; } 
```

jQuery：

```
var right = $('#right'),
    left = $('#left');

$(window).on('resize',positionRightDiv);

function positionRightDiv(){
    var posLeft = left.offset().left + left.outerWidth(true),
        posTop = left.offset().top;
    right.css({'position':'absolute','left':posLeft,'top':posTop,'right':0});
}
positionRightDiv(); 
```

* * *

注意：要使此方法起作用，`#wrapper`必须**没有**也`position:relative;`没有`overlow:hidden;` ​</p>

* * *

PS漂亮的原子心母亲简介图片;-)

# php - 如何处理在 latin1 数据库中存储阿拉伯字符的遗留应用程序

> ID：13107965
> 
> 赞同：0
> 
> 时间：2012-10-28T10:14:03.097
> 
> 标签：php, utf-8, latin1

我现在在一个基于 Web 的 PHP 应用程序上工作，以使用 MySQL 服务器数据库。
数据库是 Latin1 字符集，所有波斯文本都不能正确显示。
数据库是用一个windows软件显示和保存波斯文的好。
我不想更改字符集，因为 Windows 软件可以使用该字符集。

***问题：***
如何将 latin1 转换为 utf8 以显示并将 utf8 转换为 latin1 以从我的基于 Web 的 PHP 应用程序保存，或在 latin1 字符集数据库上使用波斯语/阿拉伯语没有问题？

*注意：
我的文本之一是`احمد رحمانی`从我的基于 Windows 的软件保存时另存为`ÇÍãÏ ÑÍãÇäí`并仍然显示`احمد رحمانی`在我的旧的基于 Windows 的软件中*

*图像*： [数据库、字符集、整理和基于 Windows 的软件的图像（全尺寸）](https://i.stack.imgur.com/yGL8H.jpg) ![数据库、字符集、整理和基于windows软件的图像](../Images/f2b255e64925d25b1d1d222777f4a35e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:36:35.150

> **编辑：**您的屏幕截图显示下面的诊断可能是正确的。
> 
> **怎么做：**尝试`iconv()`在您的 PHP Web 应用程序中使用。您将不得不猜测或找出您的 Windows 应用程序使用的排序规则/代码页。
> 
> 然后这样的事情可能会起作用：
> 
> ```
> $string_decoded =  iconv("windows-1256", "utf-8", $string); 
> ```
> 
> 您可能需要进行试验才能使其正常工作。另外，我*认为*您需要强制您的数据库连接使用 latin1 而不是 UTF-8！
> 
> 如果您问我，这不是您的网络应用程序的良好基础。您必须一直将数据转换为损坏的格式。您可能不得不破坏与您的应用程序的兼容性，或者编写一个导入工具。

latin1 字符集不包括波斯字符。[collat​​ion-charts.org 上的证明](http://www.collation-charts.org/mysql60/mysql604.latin1_general_ci.html)

我对为什么您的 Delphi 程序能够在 latin1 数据库中存储阿拉伯字符的唯一解释是，它可能*滥用*latin1 数据库来存储 latin1 未涵盖的数据，例如[Windows-1256 阿拉伯语。](http://msdn.microsoft.com/en-us/library/cc195058.aspx)因此程序将存储每个阿拉伯字符的原始字节，而实际上这些字节被latin1 字符集中的其他*拉丁字符占用。*但只要只是 Delphi 程序存储和获取数据，*就没有人注意到。*

如果我在这方面是正确的——这是我能看到你所描述的事情如何发生的唯一方法——*只要*只涉及以相同方式执行此操作的应用程序，这种方式确实是错误的。

您应该能够通过查看来自“中性”数据库工具（如 phpMyAdmin 或 HeidiSQL）的数据来确认是否属于这种情况。如果您在那里看到垃圾而不是阿拉伯/波斯字符，我可能是对的。

至于*如何*使您的 PHP Web 应用程序与您的 Delphi 应用程序使用相同的数据库 - 老实说，我不确定该怎么做。据我所知，没有办法强制 mySQL 使用一种编码而不是另一种。在将数据提取到 Web 应用程序之前，您必须手动“重新编码”数据。这很可能是一个痛苦的过程。

但首先，试着找出到底发生了什么。

# orm - JPA + 多个多对一连接与同一列

> ID：13107971
> 
> 赞同：0
> 
> 时间：2012-10-28T10:15:41.360
> 
> 标签：orm, mapping, jpa-2.0

SchoolClass 实体有一个由 schoolID、grade 和 section 组成的复合键。学生实体中的键是 userName 和 schoolID 的组合。我正在尝试在我的 SchoolClass 中添加两个学生对象的外键。我想在所有映射中的 SchoolClass 表中使用相同的 schoolID 列，我想知道这是否是正确的方法？

```
@Entity
public class SchoolClass {

    @Column(unique=true, nullable=false)
    @EmbeddedId
    private SchoolClassPK key;

    @ManyToOne(optional = true)
    @JoinColumns({
        @JoinColumn(name="classRep1", referencedColumnName="userName", nullable = true),
        @JoinColumn(name="schoolID", referencedColumnName="schoolID", nullable = true),
    }) 
    private Student classRep1;

    @ManyToOne(optional = true)
    @JoinColumns({
        @JoinColumn(name="classRep2", referencedColumnName="userName", nullable = true),
        @JoinColumn(name="schoolID", referencedColumnName="schoolID", nullable = true),
    }) 
    private Student classRep2;
......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:36:35.197

最好简单地删除复合键以支持相关实体上的自动生成键。

# node.js - 当 mongodb 的好处应该是无模式时，为什么 mongoose 使用模式？

> ID：13107976
> 
> 赞同：42
> 
> 时间：2012-10-28T10:16:07.920
> 
> 标签：node.js, mongodb, mongoose

我是 mongodb 的超级新手。我正在使用 mongoose 从 node.js 访问 mongodb，并且知道如何让事情正常工作，但我认为我不明白为什么它会以这种方式工作。

最重要的是，当 mongodb 的突出特点之一是它没有模式时，我不明白为什么 mongoose 有“模式”。有人可以启发我吗？谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-28T13:36:23.233

没有模式的数据是没有用的。你从 MongoDB 得到一个文档，你用它做什么？阅读一些领域？您需要知道这些字段的名称、类型和含义。那是一个模式。

当人们说 MongoDB “没有模式”时，他们的真正意思是它不像 SQL 数据库那样强制执行模式。MongoDB 将模式问题推到您的应用程序级别，您可以更灵活地处理它们。例如，为了向您的文档添加一个新字段，您不需要`ALTER`对您的集合执行全有或全无（可能有数百万个条目）。您只需将该字段添加到您的 ODM (Mongoose) 架构中即可。

# eclipse - Eclipse 工作区设置和打包一个独立的jar

> ID：13107977
> 
> 赞同：2
> 
> 时间：2012-10-28T10:16:11.057
> 
> 标签：eclipse, maven, gradle

我在 Eclipse 工作区中有 5 个常规 Java 项目，它们在作为 maven 存储库存在的库和不存在的库上具有相互依赖关系和外部 jar 依赖关系。

在 Eclipse 中一切正常，但我有两个任务需要执行：

1）将所有内容打包到一个可运行的 jar 中，我可以将其上传到另一台计算机并运行，而无需在那里设置相同的 eclipse 环境。我一直在研究 gradle/maven，但不知道我是否需要像那样“复杂”的东西，而且似乎我的很多设置都必须更改工作区设置才能使用这些工具，但我可能错了。

2) 我很快想在 google 代码上托管两个 java 项目的代码，因此工作区的结构应该使该任务顺利进行。

我提到这两个任务是因为我不知道它们是否以某种方式交互。

我该如何以一种好的方式解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:42:45.123

您的描述听起来非常适合 Gradle 的多项目支持以及它的 eclipse 和应用程序插件。这是我将如何处理它的一个简单示例。

您的项目可能在同一个 Eclipse 工作区中，但不一定在同一个文件夹下，因此请记住以下目录结构假设您可以自由移动它们。

```
|-- component1
|-- component2
`-- myRunnableApp 
```

第一步是创建您的顶级 build.gradle 文件和 settings.gradle。

```
|-- build.gradle
|-- settings.gradle
|-- component1
|-- component2
`-- myRunnableApp 
```

您的 settings.gradle 将指示 gradle 将子目录视为子项目。

```
include ':component1', ':component2', ':myRunnableApp' 
```

您的 build.gradle 将包含所有子项目通用的设置，在这种特殊情况下，我们要应用 java 和 eclipse 插件：

```
subprojects {

  apply plugin: 'eclipse'
  apply plugin: 'java'

  repositories {
    mavenCentral()
  }
} 
```

这应该足以让您通过发出`gradle eclipse`. 接下来，您将要声明项目之间的依赖关系：

*组件1/build.gradle*

```
dependencies {
    // declare your 3rd party jar dependencies as needed
    compile 'group:artifact:version'
} 
```

现在您可以声明项目之间的依赖关系 - 这将在您生成它们时反映在您的 eclipse 项目文件中。

*组件2/build.gradle*

```
dependencies {
    compile project(':component1')
} 
```

最后，您需要将应用程序插件应用到您的可运行项目中。它将生成您的 jar 文件以及用于 unix 和 windows 的包装器 sh/bat 文件。

*myRunnableApp/build.gradle*

```
apply plugin: 'application'

mainClassName = 'my.custom.app.Main'

dependencies {
    // component 1 is a transitive dependency of component 2
    compile project(':component2')
} 
```

就是这样！我希望这应该是推出您自己的构建的一个很好的起点。查看多项目构建、java 插件、应用程序插件和依赖管理的 gradle 文档。

希望有帮助！

# mysql - MySQL：查看前 1000 个中是否存在值

> ID：13107979
> 
> 赞同：0
> 
> 时间：2012-10-28T10:16:22.363
> 
> 标签：mysql

如何检查一个值是否存在于前 1000 行中，以及它是否返回信息。

就像是

```
select cme_fbid 
from table1 if exists(select cme_fbid from table1 limit 1000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:37:12.393

使用子查询来限制您查看的数据：

```
select cme_fbid 
from (select * from table1 order by someThing limit 1000) x
where someField = someValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T10:26:18.133

```
SELECT
    CASE 
        WHEN EXISTS(SELECT cme_fbid FROM table1 LIMIT 1000) THEN t.cme_fbid
        ELSE NULL
    END
    FROM table1 t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T10:32:29.443

```
select cme_fbid 
from table1
where cme_fbid in (
    select cme_fbid
    from table1
    limit 1000) 
```

您可能希望向`order by`内部查询添加一个以获得一致/有意义的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T10:23:17.710

`select count(*) as cnt from table1 where cme_fbid is not null and cme_fbid <> 0 limit 1000 order by id`

或`mysql_row_count`使用

`select cme_fbid from table1 where cme_fbid is not null and cme_fbid <> 0 limit 1000 order by id`

# jquery - 修改 bootstrap Popover Html 内容不持久

> ID：13107984
> 
> 赞同：2
> 
> 时间：2012-10-28T10:17:05.333
> 
> 标签：jquery, twitter-bootstrap

我有以下弹出框设置：

**弹出图标启动器**

```
 <label id="settings-layout" class="icon-th" rel="popover" data-original-title="Switch Layout"></label> 
```

**弹出框内容**

```
<div id="settings-layout-content" style="display:none;">
                                 <ul style='margin-left:5px;' >
        <li class='popover-list layout-list' data-id="badge">

            <label class='icon-ok' style='color:#6ABD3D !important;position:relative;right:5px;'></label>
            <label class='icon-th' style='position:relative; top:1px;right:4px;'></label>Badge
           </li>

        <li class='popover-list layout-list' data-id="table">

            <label class='icon-ok' style='color:#6ABD3D !important;position:relative;right:5px;'></label>
            <label class='icon-table' style='position:relative; top:1px;right:4px;'></label>Table

        </li>

    </ul>
   </div> 
```

***将内容分配给弹出框的脚本**

```
$('.icon-th').popover({
            html: true, placement: 'bottom',
            trigger: 'manual', content: function () { return $('#settings-layout-content').html(); }
        }).click(function (e) {
            $('.icon-font').popover('hide');
            $('.icon-filter').popover('hide');
            $(this).popover('toggle');
            e.stopPropagation();
        }); 
```

现在，当我单击弹出框内容中的一个 li 时，我将内容修改如下：

```
$('.layout-list').live('click', function () {

            $(this).find(">:first-child").addClass("display");

        }); 
```

这工作正常。但是当我关闭弹出框并单击图标以再次显示弹出框时，更改不会保留。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T11:43:46.193

这里的问题是您将`#settings-layout-content`html 的副本发送到 Popover 插件以显示。当您单击弹出窗口中的列表项时，更改将应用​​于复制的元素，并且当弹出窗口关闭时，这些元素将被破坏。

要保留更改，您需要将它们应用于要复制到弹出内容中的原始元素：

```
// .live() is deprecated, use .on() instead
$(document).on('click', '.layout-list', function () {

    // get clicked item index used to matched the same element in the original content
    var itemIndex = $(this).index();

    // get original element that holds the popover content
    var orig = $('#settings-layout-content').find('.layout-list:eq(' + itemIndex + ')');

    // add the class to the original content
    orig.children(":first").addClass("display");

    // close the popover
    $('#settings-layout').popover('hide');
}); 
```

此外[.live()](http://api.jquery.com/live/)已被弃用，建议从现在开始使用[.on()](http://api.jquery.com/on/)。

这是一个如何工作的演示：http: [//jsfiddle.net/ZdJUC/1/](http://jsfiddle.net/ZdJUC/1/)

# linq - Sql 到 linq 约定

> ID：13107985
> 
> 赞同：0
> 
> 时间：2012-10-28T10:17:09.040
> 
> 标签：linq

我在构建我的 linq 查询时遇到问题，我需要你的帮助，以下代码是我到目前为止所得到的，它确实有一些预期的错误，所以，这是我的 sql 查询：

*我是 linq 的新手，并通过谷歌搜索过。

```
select CAST(h.changedate as date) as 'RegDate' ,count (cast(h.changedate as date)) as 'Amount' from T_TalmidStatusHistory h
    join T_talmid t on h.talmidid = t.talmidid 
    where t.talmidStatusID=16 and h.[statusid] != 16
        and h.id =
            (
                select max(id) from T_TalmidStatusHistory 
                    where T_TalmidStatusHistory.talmidid=h.talmidid  and T_TalmidStatusHistory.[statusid] != 16
            )
    group by CAST(h.changedate as date) 
```

这就是我现在在 linq 中所拥有的：

```
 var res = from r in db.T_TalmidStatusHistories
              from m in db.T_TalmidStatusHistories
   join t in db.T_Talmids  on r.TalmidID equals t.TalmidID
   where  t.TalmidStatusID == 16 && r.StatusID != 16
    && r.id == from l in db.T_TalmidStatusHistories
        where m.TalmidID  == r.TalmidID && m.StatusID != 16
        select new{db.T_TalmidStatusHistories.OrderByDescending(tp => tp.id).FirstOrDefault().id }
        group h by h.changedate as date
   select new { h.changedate as date, count (cast(h.changedate as date))}; 
```

编辑：我希望得到每个日期注册的学生人数，

我的错误是：运算符'=='不能应用于'int'和'System.Linq.IQueryable'类型的操作数在行：r.id == from l in db.T_TalmidStatusHistories

泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:49:50.437

整个部分

```
from l in db.T_TalmidStatusHistories ... count (cast(h.changedate as date))} 
```

是一个`r.id`由`==`操作员比较的查询。

将其更改为

```
...
r.id == (db.T_TalmidStatusHistories
        .Where(m.TalmidID  == r.TalmidID && m.StatusID != 16)
        .OrderByDescending(tp => tp.id).FirstOrDefault().id)
group h by h.changedate as date
select new { h.changedate as date, count (cast(h.changedate as date))}; 
```

# android - Android：以编程方式从设备管理员中删除我的应用程序？

> ID：13107986
> 
> 赞同：11
> 
> 时间：2012-10-28T10:17:24.840
> 
> 标签：android, components, device-admin

我正在尝试向我的应用程序添加一个按钮以将其从设备管理员中删除，并且正在使用下面的代码，但我的应用程序只是崩溃了。

代码：-

按钮点击：-

```
{
    ComponentName devAdminReceiver = new ComponentName(this, DemoDeviceAdminReceiver.class);
    DevicePolicyManager dpm = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
    dpm.removeActiveAdmin(devAdminReceiver);
} 
```

在上面的代码中，DemoDeviceAdminReceiver 是一个扩展 DeviceAdminReceiver 的类。

错误日志：-

```
10-28 15:26:09.295: E/AndroidRuntime(26101): FATAL EXCEPTION: main
10-28 15:26:09.295: E/AndroidRuntime(26101): java.lang.IllegalArgumentException: Unknown admin: ComponentInfo{com.dragonnis.intellicover/com.dragonnis.intellicover.DemoDeviceAdminReceiver}
10-28 15:26:09.295: E/AndroidRuntime(26101):    at android.os.Parcel.readException(Parcel.java:1331)
10-28 15:26:09.295: E/AndroidRuntime(26101):    at android.os.Parcel.readException(Parcel.java:1281)
10-28 15:26:09.295: E/AndroidRuntime(26101):    at android.app.admin.IDevicePolicyManager$Stub$Proxy.removeActiveAdmin(IDevicePolicyManager.java:2940)
10-28 15:26:09.295: E/AndroidRuntime(26101):    at android.app.admin.DevicePolicyManager.removeActiveAdmin(DevicePolicyManager.java:183) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T10:39:04.620

就像你做的那样：

```
DevicePolicyManager mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
mDPM.removeActiveAdmin(mDeviceAdminReceiver); 
```

但是您需要在 AndroidManifest.xml 中将这些过滤器添加到接收器中：

```
 <intent-filter>
        <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        <action android:name="android.app.action.DEVICE_ADMIN_DISABLED" />
    </intent-filter>

@Override
public CharSequence onDisableRequested(Context context, Intent intent) {
    return "Admin rights are beeing requested to be disabled for the app called: '" + context.getString(R.string.app_name) + "'.";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T09:18:52.260

编写了一个启用设备管理员（DevicePolicyManager）并安装的应用程序。但是当我想卸载它时，它返回失败并显示此消息

# c++ - 二叉搜索树 - 删除没有指向前任指针的节点

> ID：13107988
> 
> 赞同：1
> 
> 时间：2012-10-28T10:17:37.313
> 
> 标签：c++, binary-search-tree

我有以下 BST 的实现：

```
struct BstNode
{
    int value;
    BstNode* leftSubnode;
    BstNode* rightSubnode;

    BstNode(int value)
    {
        this->value = value;
        this->leftSubnode = this->rightSubnode = nullptr;
    }
};

struct BstTree
{
    BstNode* root;
}; 
```

你可以看到，我没有指向前任（当前节点的父节点）的指针。我在实现添加/显示方法方面没有问题，但我不知道如何从我的结构中删除节点。当您只有左右节点的指针时，是否有可能做到这一点？请注意，所有方法都应该针对`BstTree`结构实现，而不是针对`BstNode`一个（因为我从老师那里收到的任务）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:24:06.583

像这样，适应您的特定要求并填写空白

```
void remove(BstTree& tree, int value)
{
   BstNode* parent = nullptr;
   BstNode* node = tree.root;
   while (node)
   {
      if (node->value == value)
      {
         if (parent)
         {
            // remove node using the parent pointer
         }
         else
         {
            // remove the root node
         }
         return;
      }
      if (value < node->value)
      {
         // go down left branch
         parent = node;
         node = node->leftSubNode;
      }
      else
      {
         // go down right branch
         parent = node;
         node = node->rightSubNode;
      }
   }
} 
```