# StackOverflow 问答 15876000-15876999

# jvm - OutofMemory 异常详细信息

> ID：15876000
> 
> 赞同：1
> 
> 时间：2013-04-08T09:45:29.357
> 
> 标签：jvm, out-of-memory

我在最近的一次 Java 采访中被问到这个问题。当我们得到 OutOfMemory Exception 时，我们如何找出哪个类和哪个方法抛出了 OutOfMemory Exception。我回答说它会出现在堆栈跟踪中，但他告诉我很多时候它不会告诉您哪个特定方法/类引发了该异常。我假设他期待一些可以提供帮助的工具或 JVM 参数。但是我从来没有使用过，所以我无法回答。

我尝试了一个简单的示例，我将值放入无限循环中的哈希图中。一段时间后，我收到了 OutOfMemory 错误，它确实显示了类/方法名称和行号。我想了解在哪些情况下它不会为您提供这些详细信息[方法/类名]，以及我可以使用哪些工具/VM 参数来找出它。

```
**Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Unknown Source)
    at java.lang.AbstractStringBuilder.expandCapacity(Unknown Source)
    at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)
    at java.lang.AbstractStringBuilder.append(Unknown Source)
    at java.lang.StringBuilder.append(Unknown Source)
    at hashmapTest.main(hashmapTest.java:18)** 
```

我还阅读了有关此 VM 参数 Xms1024m -Xmx1024m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath 但我不太确定它是否用于实现此目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:56:06.810

如果 Java 堆空间不足，您可能会看到哪个特定对象抛出异常（如果它是您自己的对象之一），但它很可能是一个内部 Java 对象，它正在执行一些低级延迟的内部工作，其中如果跟踪不是很有帮助。

Xms 选项定义了允许的最大堆大小，而 Xms 选项定义了最小堆大小，因此如果不是内存泄漏/开销问题，它应该可以解决您的问题。

如果您怀疑您的程序使用了比必要更多的内存，那么可以使用一些工具来跟踪内存使用情况。

# windows-phone-7 - windows phone 8 old map vs new map

> ID：15876001
> 
> 赞同：1
> 
> 时间：2013-04-08T09:45:31.140
> 
> 标签：windows-phone-7, memory-leaks, windows-phone-8, bing-maps, here-api

I have a two WP8 projects. This is projects with map. First project with new `Nokia maps` and second project with old `Bing maps`. I noticed inappropriate behavior of old maps. They consume large amounts of memory, and when I go away from the maps then the memory is not freed. In WP7 `Bing maps` behave differently, it spent as much RAM memory, but when I go away from the map, the memory is immediately freed. How can I return the memory, I have a big problem with old maps, I exceed the limit of 90 Mb in my project ..

Screenshots below.

Any help.

Thanks in advance!

**Project 1 Nokia Maps**

![MainPage](https://i.stack.imgur.com/0Z5D2.jpg)

![Memory usage](https://i.stack.imgur.com/FODDm.jpg)

![Map page](https://i.stack.imgur.com/B2IIb.jpg)

![enter image description here](https://i.stack.imgur.com/6TPek.png)

After go away from map

![enter image description here](https://i.stack.imgur.com/LGDl9.png)

**Project 2 Old Bing maps**

![enter image description here](https://i.stack.imgur.com/URDrx.jpg)

![enter image description here](https://i.stack.imgur.com/vMKmz.png)

![enter image description here](https://i.stack.imgur.com/vJ5FX.jpg)

![enter image description here](https://i.stack.imgur.com/x6z6a.png)

After go away from map

![enter image description here](https://i.stack.imgur.com/Z42g0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T14:24:03.527

我不知道这是否可以帮助你，但我发现了这个

仅供参考：对于 Windows Phone 8 地图控件，您需要使用 Microsoft.Phone.Maps.Controls 中的 TileSource 类。（即 Microsoft.Phone.Maps.Controls.TileSource）

这里：[http ://social.msdn.microsoft.com/Forums/wpapps/en-US/66512153-06d0-4269-996a-b4b7e5f995de/windows-phone-8-api-for-open-street-map-osm](http://social.msdn.microsoft.com/Forums/wpapps/en-US/66512153-06d0-4269-996a-b4b7e5f995de/windows-phone-8-api-for-open-street-map-osm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:27:44.433

您可以显示静态地图，为此使用 Jeff Wilcox 库。在这里查看[http://www.jeff.wilcox.name/2012/01/jeffwilcox-maps/](http://www.jeff.wilcox.name/2012/01/jeffwilcox-maps/)。

# ios - UITabBarController 中的 UINavigationController 在 iOS 6 中不会旋转

> ID：15876005
> 
> 赞同：2
> 
> 时间：2013-04-08T09:45:40.557
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我在 UITabBarController 中有一个 UINavigationController。我尝试了社区关于 iOS 6 中自动旋转的所有建议，但没有成功，最后我决定为 UINavigationController 创建一个类别，该类别没有对 orientaion 进行任何更改（尽管确实调用了这些函数）

![在此处输入图像描述](https://i.stack.imgur.com/rAhPP.png)

然后我为 UITabBarController 创建了一个类别，如下所示：

```
#import "UITabBarController+ios6Rotate.h"

@implementation UITabBarController (ios6Rotate)

-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortraitUpsideDown;;
}

@end 
```

得到了这个：

```
Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'preferredInterfaceOrientationForPresentation must return a supported interface orientation! 
```

但是我所有的方向都支持？！唔

然后我将代码更改为：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

这使我的应用程序颠倒了，但仍然不会旋转。我不明白发生了什么事。在这一点上，我想在 ios6 中看到任何形式的旋转，我不在乎哪一边，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:49:35.493

您应该确保添加正确的`supportedInterfaceOrientations`. 您可以尝试在您的类别中调用相应`viewController`的方向方法。

例如在`UINavigationController`类别中它会是这样的

```
-(BOOL)shouldAutorotate
{  
  return   [self.topViewController shouldAutorotate];   
}

-(NSUInteger)supportedInterfaceOrientations
{
   return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
   return [self.topViewController preferredInterfaceOrientationForPresentation];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:05:05.627

我花了几个小时才弄清楚。这是解决方案：由于某种原因，previos 程序员做了这样的事情：

```
 [window addSubview:[someController view]];  // In the appDelegate 
```

我需要做的就是用这个替换它：

```
 [self.window setRootViewController:someController]; 
```

自动旋转方向重新开启！

# javascript - 调用基类函数 - JavaScript 中的类继承

> ID：15876007
> 
> 赞同：8
> 
> 时间：2013-04-08T09:45:47.670
> 
> 标签：javascript, class, inheritance

请查看以下示例：

```
MyBaseClass = function(a) {
     this.a = a;
};

$.extend(MyBaseClass.prototype, {
    init: function() {
        console.log('I am initializing the base class');
    }
});

MyChildClass = $.extend(MyBaseClass, {
    init: function() {
        MyBaseClass.prototype.init();
        console.log('I am initializing the child class');
    }
});

var = new MyChildClass();
var.init(); 
```

Тhis 应该输出“我正在初始化基类”和“我正在初始化子类”。

我需要能够继承类 MyBaseClass，但仍然能够在新的 init() 方法的开头调用他的 init() 方法。

我怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T09:48:27.680

[jQuery 的 extend](http://api.jquery.com/jQuery.extend/)不会构建继承，而是*“将两个或多个对象的内容合并到第一个对象中”*。

使用[基于原型的继承](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)来实现您的继承并显式调用“超级”方法：

```
MyBaseClass = function(a) {
     this.a = a;
};
MyBaseClass.prototype.init = function() {
    console.log('I am initializing the base class');
};

MyChildClass = function(a) {
  this.a = a;
}
MyChildClass.prototype = Object.create(MyBaseClass.prototype); // makes MyChildClass "inherit" of MyBaseClass
MyChildClass.prototype.init = function() {
    MyBaseClass.prototype.init.call(this); // calls super init function
    console.log('I am initializing the child class');
};

var child= new MyChildClass();
child.init(); 
```

[输出](http://jsbin.com/ekuyew/1/edit)：

```
I am initializing the base class
I am initializing the child class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:53:48.940

**[jsFiddle 演示](http://jsfiddle.net/QqQe3/)**

几件事。`extend`真的只是增加了属性，它并没有做太多。因此，您需要为您的类准备好一个函数，从基类继承，然后在该类原型上使用扩展。

```
function MyChildClass(){};
MyChildClass.prototype = new MyBaseClass();
$.extend(MyChildClass.prototype, {
 init: function() {
    MyBaseClass.prototype.init();
    console.log('I am initializing the child class');
 }
}); 
```

这是我喜欢用于继承的另一种方法 - 当方法的特异性将成为问题时 - 将基类存储在它自己的属性中

```
function MyChildClass(){};
MyChildClass.prototype = new MyBaseClass();
MyChildClass.prototype.base = new MyBaseClass();
$.extend(MyChildClass.prototype, {
 init: function() {
    this.base.init();
    console.log('I am initializing the child class');
 }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:58:11.203

实现这一目标的另一种基于原型的模式：

```
MyBaseClass = function(a) {
     this.a = a;
};

MyBaseClass.prototype = {
    init: function() {
        console.log('I am initializing the base class');
    }
};

MyChildClass = function() {};
MyChildClass.prototype = $.extend(new MyBaseClass(), {
    init: function() {
        this.super.init.call(this);
        console.log('init child');
    },
    super: MyBaseClass.prototype,
    constructor: MyChildClass
});

var a = new MyChildClass();
a.init(); 
```

输出：

```
I am initializing the base class
init child 
```

这里`this.super`存储对基类的引用。

# python - 向 matplotlib 导航工具栏/状态栏添加信息？

> ID：15876011
> 
> 赞同：12
> 
> 时间：2013-04-08T09:45:54.620
> 
> 标签：python, matplotlib

我正在用 matplotlib 绘制一个二维数组。在窗口的右下角显示光标的 x 和 y 坐标。如何在此状态栏中添加有关光标下方数据的信息，例如，而不是“x=439.501 y=317.744”，它会显示“x，y：[440,318] 数据：100”？我能否以某种方式获得此导航工具栏并编写自己的要显示的消息？

我设法为“button_press_event”添加了我自己的事件处理程序，以便在终端窗口上打印数据值，但这种方法只需要大量的鼠标点击并淹没交互式会话。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T14:14:14.790

您只需要重新分配`ax.format_coord`，即用于绘制该标签的回调。

请参阅文档中的[此示例](http://matplotlib.org/examples/api/image_zcoord.html)，以及 [在 matplotlib 图形窗口（使用 imshow）中，如何删除、隐藏或重新定义鼠标的显示位置？](https://stackoverflow.com/questions/14349289/in-a-matplotlib-figure-window-with-imshow-how-can-i-remove-hide-or-redefine/14351623#14351623)和[光标下的 matplotlib 值](https://stackoverflow.com/questions/14754931/matplotlib-values-under-cursor/14755358#14755358)

（直接从示例中提取的代码）

```
"""
Show how to modify the coordinate formatter to report the image "z"
value of the nearest pixel given x and y
"""
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

X = 10*np.random.rand(5,3)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(X, cmap=cm.jet, interpolation='nearest')

numrows, numcols = X.shape
def format_coord(x, y):
    col = int(x+0.5)
    row = int(y+0.5)
    if col>=0 and col<numcols and row>=0 and row<numrows:
        z = X[row,col]
        return 'x=%1.4f, y=%1.4f, z=%1.4f'%(x, y, z)
    else:
        return 'x=%1.4f, y=%1.4f'%(x, y)

ax.format_coord = format_coord
plt.show() 
```

# database - Automation system, Database

> ID：15876019
> 
> 赞同：0
> 
> 时间：2013-04-08T09:46:09.730
> 
> 标签：database, automation, system

I worked in big project last year, it was Educational Management System! My team solved a lot of problems during developing. But we had one problem and now I am again got it.

Problem is:

> how to design database structure, if some records that have references can be deleted from Software Interface?

Simple Example: Assume that, you have tables :

```
Students, StudentClass, Marks, Classes 
```

. So, if I try to delete record from `'Classes'` table, it will be impossible, because `'StudentClass'` table has reference to `'Classes'` table. Of course, it is possible delete records from depending tables(`StudentClass, etc.`) and then delete `'Classes'` record, but i need to keep data.

I found solution, in all tables that is referenced by other, i create column `'IsDeleted'`. It means that If i want to delete record from `'Classes'` table, i just update `'IsDeleted'` column to `1`. To show to users, i use `"SELECT * .... FROM ... WHERE Classes.IsDeleted = 0".`

This my solution! Can you tell me, how you solve such problems, share with me your approaches, pls! Any opinions will be interesting for me! Thanks in advance for your reply!!!!

**EDIT:**

Any solutions else?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:08:29.503

非常经典的问题，我已经看到您的解决方案实施了很多次。通常它被称为“软”删除，因为数据库中仍有数据，但它不会出现在 UI 中。

我想到了两个潜在的缺点：

1.  开发人员在某些时候*总是*忘记按已删除标志进行过滤。
2.  如果您从不删除，表可能会变大，并且在某些时候这会影响查询时间。

缓解这两个问题的一种潜在解决方案是不时运行一项作业，将已删除的数据存档/移动到其他地方。如果需要，您可以随时查询或稍后恢复它，但它不会影响其他“实时”记录。

# mongodb - DataLogging and NoSQL

> ID：15876020
> 
> 赞同：0
> 
> 时间：2013-04-08T09:46:23.123
> 
> 标签：mongodb, hadoop, couchdb, bigdata, nosql

I have a Saas application that monitor equipments.

I developed a monitoring platform sensors. My application currently oversees approximately `100,000` sensors. A value is recorded every 15 minutes.

Each measurement is currently stored in a single MySQL table (timestamp => value). To limit the number of rows in the `MySQL` table, all points of a single sensor are combined in a daily log.

The number of sensors increases exponentially. My BDD is already `100GB`.

From these measures, I must make consolidations `daily, monthly, annual and total`.

My application needs to access recent data quickly, but I have to keep history for at least 10 years and can consult them.

`NoSQL architectures` seem to be the solution to store a lot of data and do the consolidation.

Which solution is most suitable for storing this type of data.

I tested `CouchDB`. I hesitate between different `NoSQL solution (Hadoop,cassandra, mongodb...)`

I'm looking for feedback on this experence.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:24:15.733

我将根据我对您提到的一些技术的经验提供建议。

**使用 HDFS/Flume/Hadoop**

您可能会考虑只编写纯文本文件，然后使用 Flume ( [http://flume.apache.org/](http://flume.apache.org/) ) 将它们移动到 HDFS ( [http://en.wikipedia.org/wiki/Apache_Hadoop#Hadoop_Distributed_File_System](http://en.wikipedia.org/wiki/Apache_Hadoop#Hadoop_Distributed_File_System) )。

之后，您可以使用 Hadoop 及其所有工具针对存储在 HDFS 中的平面文件编写 map/reduce 作业。HDFS 将允许您很好地扩展存储大小。

**使用 Mongo**

您可以在 Mongo 中设置一个副本集并水平扩展以存储日志数据，但是 100GB 并且不断增长对于副本集来说可能有点太大了。Mongo 中的副本集（概念上与“集群”相同）不会*无限*扩展。

如果你发现你正在重载一个副本集，你可以分片日志信息（也许通过传感器和 id 条目？）然后你可以通过添加节点来无限地扩展。

-- 我会找到一些你喜欢在其中编写查询的东西。许多解决方案都会横向扩展，但并非所有解决方案都具有相同的生态系统。

# sql-server - VS2012 Automated Database deployment issue - .dacpac does not exist?

> ID：15876022
> 
> 赞同：5
> 
> 时间：2013-04-08T09:46:30.163
> 
> 标签：sql-server, visual-studio-2012

We are trying to set up automated deployment of our database project and need some help.

We are using VS2012, TFS 2012 and SQL server 2008 R2. We have a single solution file which contains all the projects. We would like to have the database project build and deploy at set intervals - say nightly.

I have created the publish profile which works, but when I schedule the build definition I get this error:

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Tools.Schema.SqlTasks.targets (1255): File "C:\Builds\1\projectName\Deploy Database\output\Binaries\Storage.SqlServer.dacpac" does not exist.

The build machine and deployment server is all set up correctly, as far as I can tell.

How can I fix this? We don't have a .dacpac file that I can see.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T13:10:52.440

检查构建日志和构建服务器上的输出目录（例如\project\bin\Debug 或\project\bin\Release）以查看项目是否正在构建。如果它没有被构建，那么检查解决方案的配置属性以确保为您的数据库项目检查了构建标志。

如果它正在构建但未输出，那么如果数据库项目上没有直接引用或依赖关系，则可能会发生这种情况。检查解决方案的项目依赖关系并确保检查数据库项目的依赖标志。

如果数据库项目正在按预期构建但仍未部署，则解决方案的配置属性中还有一个部署标志可以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:15:39.690

“我们没有我能看到的 .dacpac 文件。” 猜测这就是为什么它会因为“文件”C：\Builds\1\projectName\Deploy Database\output\Binaries\Storage.SqlServer.dacpac“不存在而失败。”

大概你需要一个更早的任务（例如）a）从源代码管理中获取数据库定义，b）根据定义创建一个数据库，然后 c）你可以通过 sqlpackage 自动创建 .dacpac .exe（例如[这里的博客演练](http://www.benday.com/2012/12/18/deploy-a-sql-server-database-projects-dacpac-with-sqlpackage-exe/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T21:15:31.057

我今天刚碰到这个。我通过添加构建解决方案的构建任务来解决它。这在部署命令查找它的 bin 文件夹中生成了我的 dacpac 文件。

# layout - 如何使用 zurb Foundation 4 大布局进行打印

> ID：15876033
> 
> 赞同：6
> 
> 时间：2013-04-08T09:47:13.980
> 
> 标签：layout, printing, zurb-foundation

如何让我的 > 768px 布局用于打印？我似乎回退到移动布局。我正在使用修复[https://github.com/zurb/foundation/issues/1285](https://github.com/zurb/foundation/issues/1285) 任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:34:37.737

就在@import“设置”之后；在 app.scss 添加：

```
$small: "print, screen and (min-width:"#{$small-screen}")"; 
```

这似乎有效。

# java - java - 如何验证在java swing中只接受浮点/十进制值的jtextfield？

> ID：15876036
> 
> 赞同：1
> 
> 时间：2013-04-08T09:47:20.813
> 
> 标签：java, swing, validation, double, jtextfield

我正在尝试验证文本字段，使其接受浮点或双精度值，例如 .25、0.2、111.25
它不应该接受 ...25、0.2.2 之类的值。ETC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:50:09.353

*   [与](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)_[`JFormattedTextField``Number Formatter`](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

*   否则（对于 plain `JTextField`）你必须用 and 创建一个`DocumentFilter`自己`InputMask`的`InputVerifier`

`JFormattedTextField`例子

![在此处输入图像描述](https://i.stack.imgur.com/vfBBz.jpg)

```
import java.awt.*;
import java.awt.font.TextAttribute;
import java.math.*;
import java.text.*;
import java.util.Map;
import javax.swing.*;
import javax.swing.JFormattedTextField.*;
import javax.swing.event.*;
import javax.swing.text.InternationalFormatter;

public class DocumentListenerAdapter {

    public static void main(String args[]) {
        JFrame frame = new JFrame("AbstractTextField Test");
        final JFormattedTextField textField1 = new JFormattedTextField(new Float(10.01));
        textField1.setFormatterFactory(new AbstractFormatterFactory() {

            @Override
            public AbstractFormatter getFormatter(JFormattedTextField tf) {
                NumberFormat format = DecimalFormat.getInstance();
                format.setMinimumFractionDigits(2);
                format.setMaximumFractionDigits(2);
                format.setRoundingMode(RoundingMode.HALF_UP);
                InternationalFormatter formatter = new InternationalFormatter(format);
                formatter.setAllowsInvalid(false);
                formatter.setMinimum(0.0);
                formatter.setMaximum(1000.00);
                return formatter;
            }
        });
        final Map attributes = (new Font("Serif", Font.BOLD, 16)).getAttributes();
        attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON);
        final JFormattedTextField textField2 = new JFormattedTextField(new Float(10.01));
        textField2.setFormatterFactory(new AbstractFormatterFactory() {

            @Override
            public AbstractFormatter getFormatter(JFormattedTextField tf) {
                NumberFormat format = DecimalFormat.getInstance();
                format.setMinimumFractionDigits(2);
                format.setMaximumFractionDigits(2);
                format.setRoundingMode(RoundingMode.HALF_UP);
                InternationalFormatter formatter = new InternationalFormatter(format);
                formatter.setAllowsInvalid(false);
                //formatter.setMinimum(0.0);
                //formatter.setMaximum(1000.00);
                return formatter;
            }
        });
        textField2.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void changedUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void insertUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void removeUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            private void printIt(DocumentEvent documentEvent) {
                DocumentEvent.EventType type = documentEvent.getType();
                double t1a1 = (((Number) textField2.getValue()).doubleValue());
                if (t1a1 > 1000) {
                    Runnable doRun = new Runnable() {

                        @Override
                        public void run() {
                            textField2.setFont(new Font(attributes));
                            textField2.setForeground(Color.red);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                } else {
                    Runnable doRun = new Runnable() {

                        @Override
                        public void run() {
                            textField2.setFont(new Font("Serif", Font.BOLD, 16));
                            textField2.setForeground(Color.black);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                }
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(textField1, BorderLayout.NORTH);
        frame.add(textField2, BorderLayout.SOUTH);
        frame.setVisible(true);
        frame.pack();
    }

    private DocumentListenerAdapter() {
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:49:20.870

`-?(\d*\.)?\d+([eE][+\-]?\d+)?|[nN]a[nN]|[iI]nf(inity)?`是我通常用于解析双打的正则表达式。

如果你不想要无穷大和 NaN，

`-?(\d*\.)?\d+([eE][+\-]?\d+)?`

如果你也不想要指数符号，

`-?(\d*\.)?\d+`

如果需要，不要忘记转义反斜杠。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-21T13:04:26.660

创建一个扩展 PlainDocument 的类，然后将 jtextfield setDocument() 设置为您的新文档类。

```
import java.awt.Toolkit;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class DoubleDocument extends PlainDocument {

    int size;

    public DoubleDocument(int size) {
        this.size = size;
    }

    @Override
    public void insertString(int offs, String str, AttributeSet a) throws BadLocationException {
        if(str == null){
            return;
        }

        if(getLength() + str.length() > size){
            Toolkit.getDefaultToolkit().beep();
            return;
        }

        boolean isValid = true;
        for(int i = 0; i < str.length(); i++){
            if(!Character.isDigit(str.charAt(i))){
                if(str.charAt(i) != '.'){
                    isValid = false;
                    break;
                } else {
                    if(this.getText(0, this.getLength()).contains(".")){
                        isValid = false;
                        break;
                    }
                }
            }
        }

        if(isValid){
            super.insertString(offs, str, a);
        } else {
            Toolkit.getDefaultToolkit().beep();
        }
    }

} 
```

然后像这样实现。

```
txtLoanAmount.setDocument(new DoubleDocument(12)); 
```

如果您不关心字段的长度，您可以选择删除 DoubleDocument 类中的大小。希望这可以帮助。

# ios - 添加 UIViewControllers 视图作为另一个 UIViewController 视图的子视图

> ID：15876037
> 
> 赞同：1
> 
> 时间：2013-04-08T09:47:23.063
> 
> 标签：ios, ios5, ios6, uiviewcontroller, addsubview

我有一个名为 TestView 的 UiView，我已将其添加为 NumberViewController 的子视图。

在我的应用程序启动时，我的 rootViewController 是 PaperViewController，这有一些我通过 xib 添加的 UIButtons，现在我想将 NumberViewController 的视图添加为 PaperViewController 的子视图，所以我这样做了

```
 NumberViewController = [[NumberViewController alloc] initWithNibName:@"NumberViewController" bundle:nil];
    NumberViewController.delegate = self;
    [self.view addSubview:NumberViewController.view];
    NumberViewController.view.backgroundColor = [UIColor clearColor];
    NumberViewController.view.hidden = YES; 
```

现在这是隐藏的，因为我将在单击某个按钮时取消隐藏它，然后我将显示 NumberViewContrller 的视图。这一切都很好。

但是假设我通过代码在 PaperViewController 中添加了一些按钮，然后取消隐藏 NumberViewController 的视图，那么两个视图重叠。

我不明白问题是什么，我犯了什么错误。所以请朋友们帮帮我

问候兰吉特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-02T12:46:30.963

在 Header 中添加 UIView：

```
@property (weak, nonatomic) IBOutlet UIView *addChildView; 
```

在`- (void)viewDidLoad`- 方法中这样做：

```
 ChildViewController *nonSystemsController = [[ChildViewController alloc] initWithNibName:@"ChildViewController" bundle:nil];

    nonSystemsController.view.frame = self.addChildView.bounds;    
    [self.addChildView addSubview:nonSystemsController.view];

    [nonSystemsController didMoveToParentViewController:self];
[self addChildViewController:nonSystemsController]; 
```

# json - 在客户端解析 json 数据的最佳方法是什么？

> ID：15876038
> 
> 赞同：1
> 
> 时间：2013-04-08T09:47:27.907
> 
> 标签：json, gwt, jackson, jsni

我正在使用 Jackson 编写数据并在客户端使用 gwt-json 来解析数据。我正在客户端通过字典渲染数据，这很慢，所以我想加快解析速度。我尝试使用 eval() 而不是 Dictionary 的 JSNI，它在速度方面与字典相比做得很好，但它存在安全问题。

```
 private List<Party> getPartyListFormJackson() {    

    String name = "partyListInfo"; // jsp variable     
    String partyListStr = getString(name);     
    JSONArray partyJSONArray = JSONParser.parse(partyListStr).isArray();    
    for(int i=0; i < partyJSONArray.size(); i++) {    
      JSONObject partyJSONObject = (JSONObject) partyJSONArray.get(i);   
      Party party = VsJacksonFactory.getParty(partyJSONObject);    
      partyList.add(party);     
    }    
    return partyList;    
  }    

  public static native String getString(String name) /*-{     
  return eval('$wnd.'+ name);     
}-*/; 
```

在上面我可以使用哪种方法代替 eval()？

任何人都可以对此有任何想法，以使其变得更好。

谢谢MSNaidu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:55:27.920

GWT has basically 3 ways to parse JSON (this is without third-party libs):

*   `JSONParser` is the legacy API. It's cumbersome to work with but is most flexible, particularly when you work with *dynamic* JSON (where the structure is not fixed in advance)
*   `JsonUtils.safeEval()` with `JavaScriptObject`s (aka *overlay types*) is the most lightweight; it'll use native `JSON.parse()` where supported, and will validate the JSON with a regexp before handing it to `eval()` otherwise
*   `AutoBeans` is the latest addition. It works in GWT and in the JVM (server-side, Android clients, etc.)

All approaches can also work when you have a `JavaScriptObject` instance rather than a JSON string (you mention `Dictionary`, which is not about JSON; this is why I add this precision).

# javascript - 从 YouTube 播放视频时出现黑屏：Phonegap Android

> ID：15876046
> 
> 赞同：3
> 
> 时间：2013-04-08T09:47:52.470
> 
> 标签：javascript, android, cordova

我正在从一个 URL 播放一个你的管视频，它的播放和声音即将到来，但在 UI 上只出现黑屏，但是当我在全屏模式下播放视频时，它的可见..我的代码在下面，请查看它并指导我是否我错在哪里..

```
try{
$("#videoProdName").text(dataArr[3]+' - '+dataArr[1]);
 $("#videoProdPrice").text(dataArr[2]+" MSRP");
// $("#buyNowVideo").attr("href",dataArr[7]);
var videourl=dataArr[5]+"?autoplay=1&rel=0&showinfo=0&cc_load_policy=1";

$("#youTubeVideo").html('<iframe height="200" width="100%" src="'+videourl+'"        frameborder="0" type="text/html" frameborder="0" allowfullscreen></iframe>');
//  

$.mobile.changePage( "#video-page", {transition: "slide"});
    $("#aPageVideo").fadeTo("fast", .5);
}catch(e){alert("Exp: "+e)} 
```

}

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:11:02.847

尝试使用 Phonegap YouTube 的插件来完成此操作：

[https://github.com/remcob00/cordova-phonegap_youtube_player_api_android](https://github.com/remcob00/cordova-phonegap_youtube_player_api_android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:51:28.940

我认为我的 Android 模拟器中发生了同样的问题，当我尝试使用选项卡/电话启动应用程序时，视频按预期工作，

如果您使用的是 PhoneGAP，我建议您为 Android 应用程序使用 HTML5 视频标签。

请检查这个帖子

[html5视频播放器](https://stackoverflow.com/questions/9721679/html5-video-player)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T17:20:36.197

您需要将其放在 res 文件夹内的 config.xml 文件中：

```
<feature name="VideoPlayer">
        <param name="android-package" value="com.phonegap.plugins.video.VideoPlayer" />  
</feature> 
```

不是视频播放器... 视频播放器.... 不是`<param name="VideoPlayer"... <param name="android-package"...`

# sitecore - Sitecore - 操作 URL

> ID：15876051
> 
> 赞同：3
> 
> 时间：2013-04-08T09:47:58.833
> 
> 标签：sitecore

Sitecore 根据 Sitecore 树中定义的项目名称生成 URL，

```
http://samplewebsite/Pages/Sample Page 
```

但是我们的客户有兴趣降低所有 URL（页面/示例页面）的大小写，并使用连字符（示例页面）格式化空格。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:05:41.900

在您的 web.config 中，您可以添加 节点`<replace find=" " mode="on" replacewith="-">`以`<encodeNameReplacements>`使用连字符格式化空格。不过要小心 - 这意味着您不能再在项目名称中使用连字符（因为 Sitecore 会尝试查找其中包含空格的项目）

要小写您的 URL，您可以使用规则引擎，如 John West 在此处描述的：
[使用 Sitecore 规则引擎控制项目名称](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Use-the-Sitecore-Rules-Engine-to-Control-Item-Names.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T23:24:07.010

如果您在 App_Config/Include 中使用自定义配置文件，则可以在您的`<sitecore>`和`</sitecore>`标签之间使用以下配置补丁。这会将您的 URL 中的空格更改为破折号，并且不允许内容编辑器在其项目名称中使用破折号。

```
<encodeNameReplacements>
  <!-- Replace spaces in URLs with dashes -->
  <replace mode="on" find=" " replaceWith="-" />
</encodeNameReplacements>
<settings>
  <setting name="InvalidItemNameChars">
    <!-- Disallow dashes in item names for content editors because the above rule causes the page to crash -->
    <patch:attribute name="value">-\/:?&quot;&lt;&gt;|[]</patch:attribute>
  </setting>
</settings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:05:15.820

连字符替换的空格可以`<encodeNameReplacements>`用`Sitecore.config`.

要对所有 url 使用小写字符，您需要扩展`LinkManager`类。它们都在这里解释：

[http://csuwannarat.wordpress.com/2011/07/17/how-i-make-seo-friendly-sitecore-urls/](http://csuwannarat.wordpress.com/2011/07/17/how-i-make-seo-friendly-sitecore-urls/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:46:22.087

John West 在这里也发布了一个出色的解决方案：[http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Use-the-Sitecore-Rules-Engine- to-Control-Item-Names.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Use-the-Sitecore-Rules-Engine-to-Control-Item-Names.aspx)

# c# - 减少/删除进度条内的文本闪烁

> ID：15876052
> 
> 赞同：0
> 
> 时间：2013-04-08T09:48:00.873
> 
> 标签：c#, winforms, progress-bar, backgroundworker

我正在执行一个 DLL，它使用它通过引用`backgroundWorker1`更新变量。`i`要使用 更新进度条`i`，我使用以下代码。我还想将百分比显示为文本。问题是文本（不是进度条）闪烁很多。如何减少/消除这种闪烁？增加睡眠时间不是一种选择。

```
BackgroundWorker backgroundWorker1 = new BackgroundWorker();
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.DoWork += (s, args) =>
{
   Mydll.MyCFunction(ref i);
};
backgroundWorker1.RunWorkerAsync();

while (backgroundWorker1.IsBusy)
{
    backgroundWorker1.ReportProgress(i * 100);               
    backgroundWorker1.ProgressChanged += (s, e) =>
    {
       progressBar1.Refresh();
       progressBar1.Value = e.ProgressPercentage;
       progressBar1.CreateGraphics().DrawString(e.ProgressPercentage.ToString() + "%",
            SystemFonts.DefaultFont, Brushes.Black,
            new PointF(progressBar1.Width / 2 - 10, progressBar1.Height / 2 - 7));
    };
    Application.DoEvents();
    System.Threading.Thread.Sleep(200);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:57:59.787

您的代码将多次订阅 ProgressChanged 事件。您应该只需要订阅一个事件。拥有所有这些事件将意味着对于每个进度更改，进度条上的刷新次数将会增加。

我建议为进度更改事件创建一个单独的事件处理程序，并确保您只订阅一次。

所以，尽量保持你的设计：

为 ProgressChanged 订阅事件处理程序（在别处声明的事件处理程序）

环形 {

报告进度

做事件

睡觉 }

作为旁注，你为什么要睡觉？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:22:34.857

如果图形闪烁，您应该启用双缓冲。

```
DoubleBuffered = true 
```

或者

```
SetStyle(ControlStyles.OptimizedDoubleBuffer, true); 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/3t7htc9c.aspx](http://msdn.microsoft.com/en-us/library/3t7htc9c.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:01:23.490

您的代码有多个错误。其中之一，一般来说是 call `Application.DoEvents`。这可能在 15 年前的 VB6 中很有用，但那是技术石器时代。您还多次将相同的处理程序附加到事件，这意味着在 100 次循环后，您的绘图将被调用 100 次/百分比。

有这么多错误，很难建议一个简单的修复。在[这里](http://msdn.microsoft.com/de-de/library/system.componentmodel.backgroundworker.aspx)查看两种简单的方法来完成这项工作。尝试了解发生了什么，以什么顺序以及为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:02:42.190

首先，我会删除该行`Application.DoEvents();`（关于 do 事件的优秀[帖子](https://stackoverflow.com/questions/5181777/use-of-application-doevents)），这通常表明多线程设计不佳。我也会`Thread.Sleep`亲自删除电话。

其次，您应该订阅`ProgressChanged`OUTSIDE 的工作循环。例如：

```
public Form1()
{
    bgWorker.ProgressChanged += bgWorker_ProgressChanged;
}

private void bgWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar.Value = e.ProgressPercentage;
    progressBar1.CreateGraphics().DrawString(e.ProgressPercentage.ToString() + "%",
            SystemFonts.DefaultFont, Brushes.Black,
            new PointF(progressBar1.Width / 2 - 10, progressBar1.Height / 2 - 7));
} 
```

# iphone - NSString 用单个换行符替换重复的换行符

> ID：15876053
> 
> 赞同：5
> 
> 时间：2013-04-08T09:48:06.647
> 
> 标签：iphone, ios, objective-c, nsstring

我有一个`NSString`字符串之间可以有多个 \n 。我需要用单个 \n 替换多次出现的 \n。

我试过这段代码：

```
newString = [string stringByReplacingOccurrencesOfString:@"\n\n" withString:@"\n"]; 
```

但是，如果在字符串中遇到一系列“\n\n\n\n\n\n”，这不会给出预期的结果。在这种情况下，它们将被替换为“\n\n\n”。

我应该怎么做才能将多个“\n”替换为单个“\n”？

谢谢大家！

更新：添加`UITextView`将过滤字符串设置为文本的屏幕截图。按照 Attila H 在回答中的建议编写代码后，新行似乎不止一条。 ![在此处输入图像描述](https://i.stack.imgur.com/PumbY.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T09:55:24.940

您可能会使用[NSRegularExpression](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。这是最简单优雅的方式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\n+" options:0 error:NULL];
NSString *newString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@"\n"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-18T11:47:38.990

对于任何寻找更新的**Swift 4**答案的人：

```
extension String {

   func removeMultipleNewlinesFromMiddle() -> String {
       let returnString = trimmedString.replacingOccurrences(of: "\n+", with: "\n", options: .regularExpression, range: nil)
       return (returnString)
   }
} 
```

**用法 ：**

```
let str = "Hello \n\n\nWorld \n\nHow are you\n?"
print (str.removeMultipleNewlinesFromMiddle()) 
```

**输出 ：**

你好

世界

你好吗

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:55:50.227

您可以通过以下方式进行

```
NSArray *arrSplit = [s componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
                s = [arrSplit componentsJoinedByString:@"\n"]; 
```

希望它可以帮助你..

# android - Android在后台检查webview内容

> ID：15876060
> 
> 赞同：0
> 
> 时间：2013-04-08T09:48:27.650
> 
> 标签：android, background, webview, notifications

几周以来，我一直在尝试创建一个检查 webview 的 HTML 内容的活动（感谢我在这个网站上找到的答案，我管理它）我没有管理的是让这个活动在没有用户的情况下在后台运行知道它正在运行 在后台它应该检查这个页面的内容，当它改变时，必须发送通知。

我想知道这是否可能，如果有人管理它，那将非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:54:47.830

Check with Activity life cycle. This will Help You [http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# java - 检测文本控件中的插入符号移动

> ID：15876061
> 
> 赞同：1
> 
> 时间：2013-04-08T09:48:27.803
> 
> 标签：java, swt, listener, caret

`Text`我觉得真的很愚蠢，但是当用户更改或`StyledText`输入字段中的插入符号时，我似乎无法通知侦听器。我已经尝试过`SelectionListener`（`CaretListener`仅限 StyledText），但是当我使用箭头键在多行输入字段内移动插入符号时，没有一个可靠调用。`CaretListener`有时会被调用，但是，例如，在选择所有文本并点击之后不会被调用`Del`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:11:50.027

在你的情况下，听`SWT.MouseUp`并且`SWT.KeyUp`似乎是要走的路：

```
public static void main(String[] args)
{
    Display display = new Display();
    Shell shell = new Shell(display);

    shell.setLayout(new FillLayout());

    Text text = new Text(shell, SWT.BORDER);

    Listener listener = new Listener()
    {
        @Override
        public void handleEvent(Event arg0)
        {
            System.out.println("Event");
        }
    };

    text.addListener(SWT.KeyUp, listener);
    text.addListener(SWT.MouseUp, listener);

    shell.pack();
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose(); 
} 
```

您可以使用变量跟踪旧的插入符号位置，`static`并将其与`Listener`.

* * *

另一个非常方便的事件是`SWT.Verify`每当包含的文本发生更改时调用。请注意，这不会处理鼠标的位置变化。

# html - CSS浮动属性问题（+指导）

> ID：15876071
> 
> 赞同：3
> 
> 时间：2013-04-08T09:48:48.150
> 
> 标签：html, css, css-float

我需要一些帮助来弄清楚为什么我的布局很乱。这是我正在做的事情：[站点](http://eclesia.org/petros/dev/test/)。绿色盒子应该在紫色盒子里面。我认为有一个浮动的问题。由于我不完全理解`float`规则，有人可以帮助我找出问题并建议一些好的“旧”文档阅读吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:02:37.403

添加*溢出：隐藏；*到具有 id: content-n 的 div

```
#content-n {
    clear: left;
    position: relative;
    width: 980px;
    overflow: hidden; /* add this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:52:52.637

浮动从文档流中删除项目。

添加一个空的`<div>`or`<span>`并给它 CSS `clear: both;`。这将使 div 清除浮动元素，然后它的父级将展开到全高。

阅读[clearfix](http://www.webtoolkit.info/css-clearfix.html)和[floats](http://css-tricks.com/all-about-floats/) - 特别是标题为“Clearing Floats 的技术”部分。

**来源**

[CSS Clearfix](http://www.webtoolkit.info/css-clearfix.html)
[关于浮点数](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:52:53.130

你里面的物品`#container`都向左浮动。

这意味着它们将全部堆叠到左侧，直到它们达到包含元素的宽度，此时它们将开始换行（就像您的情况一样）。

包含浮动项目的包含元素不会扩展为包含浮动元素。您可以强制执行此操作的一种方法是执行以下操作：

```
#container:after{
 content: ".";
 clear: left;
 visibility: hidden;
} 
```

这基本上在 div 的末尾添加了一个句号，将其设置为向左清除（因此它清除所有浮动项目），然后设置为不可见，迫使容器延伸到其内容之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:59:14.140

好，

这是我想推荐您阅读的关于 Float 的内容

[http://coding.smashingmagazine.com/2009/10/19/the-mystery-of-css-float-property/](http://coding.smashingmagazine.com/2009/10/19/the-mystery-of-css-float-property/)

除此之外，如果您将#content 定位从相对编辑为绝对。这会将绿色框包裹在紫色内，因为它将占据与父级相关的位置（即#content）..

```
#content {
   position: absolute;
   ..
   ..
   ..
} 
```

小心使用时，浮动是非常好的功能。

# c# - 内连接Repeater

> ID：15876075
> 
> 赞同：0
> 
> 时间：2013-04-08T09:48:58.430
> 
> 标签：c#, sql

我有以下表格：

```
# Product
- id
- fk_id
- product_name
- product_text

# Category
- id
- category_name 
```

我正在使用转发器来输出 product_name 和 product_text，但我也希望输出 category_name。

我尝试过使用简单的内部连接，但是这样做时，它似乎会遍历类别以及产品，这是不应该的。我只想遍历类别。

我感觉到我应该使用另一个循环而不是中继器来正确执行此操作。

编辑：

```
SELECT product.product_name, product_text, category.category_name
FROM product 
INNER JOIN category ON product.fk_id = category.id 
```

我只是想知道我是否可以在中继器中循环遍历产品表，而不会循环分类表。

# php - mod_rewrite 会导致 GET 请求被忽略吗？

> ID：15876077
> 
> 赞同：0
> 
> 时间：2013-04-08T09:49:02.353
> 
> 标签：php, .htaccess, mod-rewrite, get

我无法访问我的获取请求...

我的.htaccess：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /alex
RewriteRule ^admin/([a-zA-Z0-9]+)/?$ admin/index.php?page=$1
RewriteRule ^admin/([a-zA-Z0-9]+)?$ admin/index.php?page=$1
RewriteCond %{REQUEST_URI}  !(admin|assets|inventory|test)
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?page=$1
RewriteCond %{REQUEST_URI}  !(admin|assets|inventory|test)
RewriteRule ^([a-zA-Z0-9]+)$ index.php?page=$1
ErrorDocument 404 /alex/index.php?page=404
ErrorDocument 403 /alex/index.php?page=404 
```

我点击的网址：

> [http://example.com/alex/admin/users?pagenum=37](http://example.com/alex/admin/users?pagenum=37)

示例 PHP 代码：

```
echo $_GET["pagenum"]; 
```

但是，我在我的 php 中绝对没有得到变量回显。是我的 .htaccess 造成的吗？如果不是... 是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:52:40.550

您需要`QSA`在重写中使用该标志：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /alex
RewriteRule ^admin/([a-zA-Z0-9]+)/?$ admin/index.php?page=$1 [L,QSA]
RewriteRule ^admin/([a-zA-Z0-9]+)?$ admin/index.php?page=$1 [L,QSA]
RewriteCond %{REQUEST_URI}  !(admin|assets|inventory|test)
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?page=$1 [L,QSA]
RewriteCond %{REQUEST_URI}  !(admin|assets|inventory|test)
RewriteRule ^([a-zA-Z0-9]+)$ index.php?page=$1 [L,QSA] 
```

该标志会将任何现有查询字符串附加到您在规则目标中构建的查询字符串的末尾。通常，如果您的规则目标中没有 a，则`?`默认情况下会附加查询字符串。但是，如果您`?`的目标中确实有 a，则需要`QSA`.

# android - 如何设置循环警报管理器以在预定日期执行代码？

> ID：15876079
> 
> 赞同：0
> 
> 时间：2013-04-08T09:49:05.443
> 
> 标签：android, alarmmanager, repeatingalarm

我正在制作一个药物提醒应用程序，提醒人们在预定的日期时间服药。

例如，如果我的**开始日期是 2013 年 4 月 8 日，结束日期是 2013 年 4 月 12 日，时间是上午 11.30，那么警报应该会一直触发到 2013 年 4 月 12 日上午 11.30。** 请帮助我如何实现这一目标。我知道如何设置警报管理器并触发正常警报。但是当我当时有一个开始日期和结束日期时，我对如何使用该`alarmManager.setRepeating()`方法感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:59:51.420

此代码用于每天重复警报

```
Date dateobj=new Date(Year,month,day,hour,min);             
setRepeating(AlarmManager.RTC_WAKEUP, dateobj.getTime(), (24*60*60*1000), pendingIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:08:06.687

你可以通过使用 setReapting() 方法在你想要的时间设置闹钟来做到这一点。

```
1.Use a table to insert your entries.
2.query the table for every minute or for the time interval you want using a broadcast receiver.
3.In the onReceive() callback compare the current time with the insert time and fire the alarm.
4.if there is no record then cancel the pending intent. 
```

如果您对此有任何疑问，请通过此[链接](https://stackoverflow.com/questions/7357469/how-can-i-get-the-repeat-alarm-for-week-days-using-alarm-manager-in-android)

.

# git - .gitignore 文件是否适用于本地拉取？

> ID：15876080
> 
> 赞同：1
> 
> 时间：2013-04-08T09:49:08.200
> 
> 标签：git

**我有一种情况，我在/home/user/IU**本地克隆了一个 github 存储库。现在我正在运行 apache，apache 的根目录是**/var/www/**，我的网站根目录是**/var/www/IU**，它是**/home/user/IU**的克隆。每次我想在浏览器中查看我的网站时，我都会在**/var/www/IU执行****git pull**。这很好，但我不想将所有文件从**/home/user/IU**拉到**/var/www/IU**但我想继续将所有文件从 rmeote 拉到**/home/user/IU**。.gitignore 可以帮助我吗？如何？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:30:55.317

不，这不可能使用`git pull`和/或 .gitignore - 您不能克隆或仅提取某些文件夹。这对于 Git 来说很典型，因为大多数事情都是在每个存储库中完成的（克隆、拉取、提交、分支......）。

也就是说，您可能使用了错误的工具来完成这项工作。看来您想使用 Git 来部署网站。`git pull`一般来说，尤其是Git**不是一个部署工具**——即使有些人这样使用它。如果你尝试这个，你会经常遇到问题。

相反，请使用一些专用工具进行部署。许多技术都有自己的部署方法（例如，Java Web 应用程序使用 WAR，Ruby on Rails 使用 mod_rails 等）。您也可以只编写一些脚本来复制文件。******

# ruby-on-rails - user_path(user) 未定义的局部变量或方法“用户”

> ID：15876081
> 
> 赞同：0
> 
> 时间：2013-04-08T09:49:12.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, link-to

我正在尝试为我的应用程序的用户添加个人资料页面。

我按照 railscasts [250](http://railscasts.com/episodes/250-authentication-from-scratch) & [274](http://railscasts.com/episodes/274-remember-me-reset-password)设置了我的用户身份验证并添加了以下内容以获取用户配置文件。

**用户/show.html.erb**

```
<div class="page-header">
  <h1><%= @user.name %> Profile</h1>
</div>

<p>
  <b>email:</b>
  <%= @user.email %>
</p> 
```

**布局/_navbar.html.erb**

```
<%= link_to "View your Profile", user_path(user) %> 
```

**users_controller.rb**

```
 def show
    @user = User.find(params[:id])
  end 
```

这会引发`undefined local variable or method 'user'`错误。

所以我尝试将这两行添加到我的**application_controller.rb**：

```
@user = User.all 
```

&

```
@user = User.all.find(params[:id]) 
```

但是这些分别返回了以下错误

```
undefined local variable or method `user' 
```

&

```
undefined local variable or method `params' 
```

我`resources :users`在我的**routes.rb**文件中有 & 我也尝试添加`get 'users/:id', :to => 'users#show', :as => 'user'`但没有任何成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:51:35.477

转到当前登录用户的显示页面：

```
<%= link_to "View your Profile", current_user %> 
```

保持原样的表演动作和路线`resources :users`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:55:01.597

我认为问题出在您的**layouts/_navbar**文件中。您需要定义`user`.

使用助手：`<%= link_to "View your Profile", user_path(current_user) %>`

或者：`<%= link_to "View your Profile", url_for({ :controller => 'users', :action => 'show', :id => current_person.id }) %>`

# c# - 我的输入在途中丢失了（打印 0）

> ID：15876082
> 
> 赞同：0
> 
> 时间：2013-04-08T09:49:20.650
> 
> 标签：c#, arrays, output

尝试对包含以下内容的数据列表进行排序：

.txt。文件目前看起来像这样，但将扩展为包含更多，大约 100 个左右。900 只是用作上限。

21，f，s，14

41，女，男，22

12, 米, s, 12

11、f、s、8

29, 米, 米, 4

6, 米, s, 12

9, f, s, 2

30, f, s, 1

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Program
{
    const int SIZE = 900;
    const int SIZEDISTRICT = 22;
    const int RANGE = 5;
    static void Main()
    {   
        //These arrays will hold the split data from a text file.
        int[] districtDataD = new int[900];
        string[] districtDataG = new string[900];
        string[] districtDataM = new string[900];
        int[] districtDataA = new int[900];

        //countDistrict will hold how many hypothetical people in each hypothetical district and 
        //ages will hold how many hypothetical people between certain hypothetical ages.
        int[] countDistrict = new int[SIZEDISTRICT];
        int[] ages = new int[RANGE] { 0, 18, 30, 45, 65};

        //Modules
        ReadFile(districtDataD, districtDataG, districtDataM,districtDataA);
        CountPopulation(districtDataD, countDistrict);
        AgeRanges(districtDataA, ages);
        DisplayData(countDistrict, districtDataA, ages);
    }//End Main

    //This module splits and inserts the data into the four first arrays
    static void ReadFile(int[] districtDataD, string[] districtDataG, string[] districtDataM, int[] districtDataA)
    {
        string[] lines = File.ReadAllLines("census.txt");
        int i = 0;

        while (i < SIZE  && i < 0)
        {
            foreach (string line in File.ReadAllLines("census.txt"))
            {
                string[] parts = line.Split(',');

                districtDataD[i] = int.Parse(parts[0]);
                districtDataG[i] = parts[1];
                districtDataM[i] = parts[2];
                districtDataA[i] = int.Parse(parts[3]);
                i++;
            }
        }
    }
    //This module counts how many hypothetical people are in each fictional district
   static void CountPopulation(int[] districtDataD, int[] countDistrict)
    {
        int i = 0;
        for (i = 0; i < districtDataD.Length; i++)
        {
            if (districtDataD[i] > 0 && districtDataD[i] < districtDataD.Length)
            {
                districtDataD[countDistrict[i]]
                    ++;
            }
        }
    }

    //This module sorts the ages into 0-18, 19-30, 31-45, 46-65, and 65 and up
     private static void AgeRanges(int[] districtDataA, int[] ages)
     {
         int idx = 0;
         for (idx = 0; idx < districtDataA.Length && ages[idx] > districtDataA[idx]; idx++)
         {

             ages[idx] = districtDataA[idx];
         }
     }

    //This module displays the data
     static void DisplayData(int[] countDistrict, int[] districtDataA, int[] ages)
    {
        int index = 0;
        for (index = 0; index < countDistrict.Length; index++)
        {
            Console.WriteLine(" District {0}: {1}", index + 1, countDistrict[index]);
        }

        int x = 0;
        for (x = 0; x < ages.Length; x++)
        {
            Console.WriteLine("Ages over {0} : {1}", ages[x], districtDataA[x]);
        }
    }
} 
```

当前输出如下所示：

![一堆零](https://i.stack.imgur.com/W2cpm.png)

我的数据在哪里丢失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:07:57.440

你`ReadFile`错了。试试这样的东西。

```
static void ReadFile(int[] districtDataD, string[] districtDataG, string[] districtDataM, int[] districtDataA)
{
   // Read in the file contents
    string[] lines = File.ReadAllLines("census.txt");
    int i =0;
    //iterate through each line
    foreach(var line in lines)
    {
      //split the line by a comma
      string[] parts = line.Split(',');

            districtDataD[i] = int.Parse(parts[0]);
            districtDataG[i] = parts[1];
            districtDataM[i] = parts[2];
            districtDataA[i] = int.Parse(parts[3]);
            i++;
    }

} 
```

您当前正在读取文件并将其分配给`lines`然后再次读取文件并将值分配给`line`. 如果您使用`foreach`，您可以轻松地遍历每一行，而无需跟踪您所在的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:56:29.317

问题出在这一行。

```
while (i < SIZE && i < 0) 
```

这个循环永远不会执行。用这个替换它。

```
while (i < SIZE && i <= 0)
{
    foreach (string line in File.ReadAllLines("census.txt"))
    {
        if (!string.IsNullOrEmpty(line))
        {
            string[] parts = line.Split(',');

            districtDataD[i] = int.Parse(parts[0]);
            districtDataG[i] = parts[1];
            districtDataM[i] = parts[2];
            districtDataA[i] = int.Parse(parts[3]);
            i++;
        }
    }
} 
```

# linux-kernel - 多阶段引导

> ID：15876089
> 
> 赞同：3
> 
> 时间：2013-04-08T09:49:49.357
> 
> 标签：linux-kernel, arm, u-boot

我有一块板子，上面闪着工作的 u-boot。现在我想为引导加载程序添加一些功能（用于初始化硬件的某些部分），但是如果我犯了一些错误，开发过程可能会使电路板变砖。是否可以进行如下所述的多阶段引导： 1) 启动 u-boot 2) u-boot 将加载我的二进制文件，其中添加了初始化硬件的功能。3) 我的二进制文件将加载并启动 linux 内核。

如果可能的话，一些指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:12:20.557

是的。多阶段引导通常用于 ARM SoC。

以 TI OMAP 器件为例，使用了两个引导加载程序实例。第一个是在没有任何期望初始化 SDRAM 的情况下运行的，它被复制到 48kB 的嵌入式 SRAM 中并从中执行。必然地，除了一些基本的硬件初始化（例如 SDRAM，启用某些功能单元的电源，启用时钟）然后加载第二阶段引导加载程序之外，它并没有做太多事情。即使这是紧身衣。

u-Boot（以及[Barebox](http://barebox.org)和可能的其他引导加载程序）源代码树具有构建此设置的构建选项，我相信您可以颠覆。

您最好修改现有的引导加载程序。我有很好的使用[Barebox](http://barebox.org)的经验。

在 OMAP 的情况下，第一个引导加载程序通常称为`MLO`- 这可能有助于查找资源。

# jsp - 从单选按钮将值传递给操作类

> ID：15876090
> 
> 赞同：0
> 
> 时间：2013-04-08T09:49:55.333
> 
> 标签：jsp, radio-button, liferay-6

我有一个 jsp 表单，我必须在其中标记每个员工的出勤率并将结果存储在数据库中。我标记出勤的jsp片段如下：

```
<portlet:defineObjects />
<%
   List<Employee> EmployeeAttendanceDetails = MISPortalActionUtil.getEmployeeData();
 %>

 <portlet:renderURL  var="viewMarkAttendanceURL"/>
 <!DOCTYPE HTML>
 <html>
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>mark attendance</title>
 </head>

 <body>
Mark Attendance for Today:   
<%= new java.util.Date() %>
<portlet:actionURL name="updateDailyAttendance" var="updateDailyAttendanceURL" />

**<aui:form name="updateDailyAttendance" action="<%=updateDailyAttendanceURL.toString()%>" method="post" >
<portlet:renderURL var="viewEmployeeDataURL"/>
<liferay-ui:search-container delta="20" emptyResultsMessage="No Results Found">
<liferay-ui:search-container-results total="<%= EmployeeAttendanceDetails .size() %>"
results="<%= ListUtil.subList(EmployeeAttendanceDetails , searchContainer.getStart(),     searchContainer.getEnd()) %>" />
<liferay-ui:search-container-row modelVar="search"
 className="com.test.mis.portal.model.Employee">
<liferay-ui:search-container-column-text name='Employee Name'     value='<%=String.valueOf(search.getEmpFname()) + " " +    String.valueOf(search.getEmpLname())%>' href="" />
<liferay-ui:search-container-column-text name='Employee Id' value='<%=String.valueOf(search.getEmpId())%>' href="" />
<liferay-ui:search-container-column-text name = "Attendance Status" >
 <label>Present</label><input type = "radio" name ='updateattendance +     <%=String.valueOf(search.getEmpId())%>' value = "present" />
<label>Absent</label><input type = "radio" name= 'updateattendance +     <%=String.valueOf(search.getEmpId())%>' value = "absent"/>
</liferay-ui:search-container-column-text>
</liferay-ui:search-container-row>
<liferay-ui:search-iterator searchContainer="<%=searchContainer %>" paginate="<%=true %>" />
</liferay-ui:search-container> 
<input type = "submit" value = "Update"/>
</aui:form>** 
```

我使用以下函数来标记出勤： public void updateDailyAttendance(ActionRequest areq, ActionResponse aRes) throws Exception{

```
int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount();
String attendanceValue = getAttendanceValue(areq);
***for (int i = 0; i < totalEmployees; i++) {
long attPKey = CounterLocalServiceUtil.increment(Employee.class.getName());
Attendance newAttendanceInstance = new AttendanceImpl();
newAttendanceInstance.setAttId(attPKey);
newAttendanceInstance.setAttStatus(attendanceValue);
AttendanceLocalServiceUtil.addAttendance(newAttendanceInstance);
}***
}

 private String getAttendanceValue(ActionRequest areq) {
 Enumeration parameters = areq.getParameterNames();

 while (parameters.hasMoreElements()) {
 String parameterName = parameters.nextElement().toString();
 if (parameterName.startsWith("updateattendance")) {
 return areq.getParameter(parameterName);
}
}
throw new IllegalStateException("Parameter updateattendance is not found");
} 
```

我面临的问题是，无论我为第一位员工（在场/缺席）标记的出勤情况，都会为其他员工存储相同的出勤率。我认为错误出现在上面的 for 循环中，我用斜体表示。我应该如何更正此代码，以便为每个员工存储正确的出勤状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:23:13.533

考虑到你的jsp是正确的，代码

```
<input type = "radio" name ='updateattendance +     <%=String.valueOf(search.getEmpId())%>' value = "present" /> 
```

将创建一个名为 updateattendance101、updateattendance102、updateattendance201、updateattendance301 等的属性数组

编码

```
if (parameterName.startsWith("updateattendance")) { return areq.getParameter(parameterName); 
```

获取第一个匹配的属性，因此您始终获得相同的值。因此，您需要做的是使用您用于提供搜索容器的相同数组（数组 'EmployeeAttendanceDetails' ），遍历它的所有对象并使用 'getEmpId' id 来精确匹配属性。

其次，我看到一些关于使用 ServiceBuilder 的不良做法。

1.  您确定要创建新员工，而不是更新现有员工吗？
2.  即使您想创建/更新员工条目，您也应该在 AttendanceLocalServiceImpl 中创建一个包装函数，而不是在客户端代码中手动编辑所有属性/增加持久性计数器等

编辑：你可以用这个替换你发布的java代码，我希望你能理解这样做

```
public void updateDailyAttendance(ActionRequest areq, ActionResponse aRes) throws Exception{

    List<Employee> employeeAttendanceDetails = MISPortalActionUtil.getEmployeeData();

    for (Employee emp: employeeAttendanceDetails) {

    String name = "updateattendance" + Long.toString(emp.getEmpId());

                    String value = getAttendanceValue(areq, name);
                    // You don't really need to call call getAttendanceValue, except if you're going to handle the IllegalStateException. 
                    //If this is the case, you can just call :
                    //String value = areq.getParameter(name);

        // Do your stuff with the employee object

    }
}

private String getAttendanceValue(ActionRequest areq, String paramName) {
 Enumeration parameters = areq.getParameterNames();

 while (parameters.hasMoreElements()) {
     String parameterName = parameters.nextElement().toString();
     if (parameterName.equals(paramName)) {
         return areq.getParameter(parameterName);
     }
 }
 throw new IllegalStateException("Parameter updateattendance is not found");
} 
```

编辑2：替换

```
name ='updateattendance +     <%=String.valueOf(search.getEmpId())%>' 
```

和

```
name ='updateattendance<%=String.valueOf(search.getEmpId())%>' 
```

# java - 文件配置 Hibernate 4 和 spring 3

> ID：15876094
> 
> 赞同：3
> 
> 时间：2013-04-08T09:50:06.837
> 
> 标签：java, hibernate, spring-3, hibernate-4.x

我从 spring 3 hibernate 4 开始使用新技术，并尝试从教程中执行以下示例。每次我得到同样的错误。我使用 Spring 3.1.1 Hibernate 4.1.0。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<!-- Data Source Declaration -->
    <bean id="DataSource" class="org.apache.commons.dbcp.BasicDataSource" >
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql:Bibliotheque" />
        <property name="username" value="postgres" />
        <property name="password" value="root" />

    </bean>

    <!-- Session Factory Declaration -->
    <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.ardia.Adherent</value>
                <value>com.ardia.Emprunt</value>
                <value>com.ardia.Fournisseur</value>
                <value>com.ardia.Livre</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>
<!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

<!-- Enable the configuration of transactional behavior based on annotations -->

 <tx:annotation-driven transaction-manager="transactionManager"/>

</beans> 
```

这是消息，我不明白：

处理 XML 'org/springframework/transaction/interceptor/TransactionInterceptor' 时发生错误。有关详细信息，请参阅错误日志

处理“/Hibernate_spring/src/application_configuration.xml”时发生错误

```
java.lang.NoClassDefFoundError: org/springframework/transaction/interceptor/TransactionInterceptor
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser$AopAutoProxyConfigurer.configureAutoProxyCreator(AnnotationDrivenBeanDefinitionParser.java:126)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser.parse(AnnotationDrivenBeanDefinitionParser.java:84)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.ide.eclipse.beans.core.internal.model.namespaces.DelegatingNamespaceHandlerResolver$ElementTrackingNamespaceHandler.parse(DelegatingNamespaceHandlerResolver.java:177)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1335)
    at org.springframework.ide.eclipse.beans.core.internal.model.BeansConfig$ErrorSuppressingBeanDefinitionParserDelegate.parseCustomElement(BeansConfig.java:1292)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.ide.eclipse.beans.core.internal.model.BeansConfig$2.registerBeanDefinitions(BeansConfig.java:389)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.ide.eclipse.beans.core.internal.model.BeansConfig$2.loadBeanDefinitions(BeansConfig.java:375)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.ide.eclipse.beans.core.internal.model.BeansConfig$3.call(BeansConfig.java:421)
    at org.springframework.ide.eclipse.beans.core.internal.model.BeansConfig$3.call(BeansConfig.java:1)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:56:43.500

确保您的类路径中有相应版本的 spring-tx.jar、spring-orm.jar 和 hibernate-entitymanager.jar 文件。

此外，在您的配置中，请注意`transactionManager`错误地引用了 。

```
<!-- An id of txManager is assigned here -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

<!-- While transactionManager is referenced here -->    
 <tx:annotation-driven transaction-manager="transactionManager"/> 
```

这行配置应该将`transaction-manager`to 指向`txManager`bean：

```
 <tx:annotation-driven transaction-manager="txManager"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:24:00.563

该 `spring-tx.jar`文件应该在您的类路径中，这意味着它应该出现在`(i.e. WEB-INF/lib)`您的应用程序的文件夹中

检查您是否只有一个`spring-tx.jar`具有多个相同类型的罐子也可能导致`NoClassDefFoundError`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T12:53:18.170

尝试在你的 pom.xml 中添加它

```
<dependency>
    <groupId>aopalliance</groupId>
    <artifactId>aopalliance</artifactId>
    <version>1.0</version>
</dependency> 
```

# javascript - 如何在本地存储数据？

> ID：15876098
> 
> 赞同：2
> 
> 时间：2013-04-08T09:50:13.560
> 
> 标签：javascript, html, web, local-storage, analytics

我正在构建处理跟踪的网络分析工具`click events and mouse movements`，为此，我不想将数据发送到服务器`mouse move`，`click`而是我计划在本地保存并在会话超时或同时将数据发送到服务器关闭浏览器或选项卡（关闭网站）。

**注意：**大量数据要存储在本地。

我知道一些在本地存储数据的可能方法。

```
 1.LocalStorage:
      Drawbacks:  Domain Specific so i can't rely on this.

 2.Cookie
     Drawbacks: 1.Analytics fails if cookie is disabled
                2.Not possible to store large amount of data
                     (scenario: Every mouse movement 
                      co-ordinates should be captured) 
```

我有两个问题：

1.在本地存储数据是否是好的做法（特别是使用网络分析）？

2.是否有其他可能的方式在`large amount`本地存储（不能假设）数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:28:09.583

至少 Safari 和 Chrome 有一个 Web SQL 数据库 API，因此您将能够使用 sqlite 而不是原始本地存储。我找到了**[一篇关于在 web 浏览器中使用 sqlite 的好文章](http://rickosborne.org/blog/2010/03/html5-in-browser-sql-database-storage/)**。

另一种选择是将数据直接保存在内存中（并在达到一定大小时将其推送到服务器）。

# php - PHP：长字符串、json_encode、var_dump 和 echo

> ID：15876099
> 
> 赞同：3
> 
> 时间：2013-04-08T09:50:14.423
> 
> 标签：php, echo, json, var-dump

我注意到我正在开发的应用程序正在崩溃，我设法将其缩小到这个问题（我已经为它设置了一个测试用例）：

```
ini_set("display_errors", "1");
error_reporting(E_ALL);

error_log("[test] Memory limit: " . ini_get('memory_limit'));
error_log("[test] Max Execution Time: " . ini_get('max_execution_time'));

$testArray = array("abcdefghijklmnotuv..... 786998 characters later...ijklmEND");
$json = json_encode($testArray);

var_dump($json);
// echo($json);

error_log("[test] Memory: ".memory_get_usage()."B"); 
```

当我 var_dump 变量 $json 时，我得到正确的输出：

```
string(786998) "["abcdefghijklm....ijklmEND"]" 
```

当我回显变量 $json 时，您可以非常短暂地看到屏幕上出现了一些东西，但随后它消失了，最终响应似乎为 NULL。

如果我用字符串而不是数组重复上述内容，则会发生同样的事情。

如果我用字符串重复上述操作并省略 json_encode 步骤，一切都会按预期运行，则 var_dump 和 echo 的结果是正确的。

在整个过程中，错误日志中没有任何错误输出，我的内存限制和最大执行时间也还可以：

```
[test] Memory limit: 256M
[test] Max Execution Time: 30
[test] Memory: 2134296B 
```

有任何想法吗？

关于我的应用程序的一些信息：

简而言之，有两台服务器。服务器 A 向服务器 B 发送 HTTP 请求，服务器 B 处理请求并将响应发送回服务器 A。响应始终是 JSON 编码的数组。如果响应中的数组值之一太长，则服务器 A 收到 NULL 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:52:56.817

原来问题不在于服务器 B，而在于服务器 A。

服务器 A 使用 Netty API 在 Java 中实现。

HTTP 响应太长并且被分块，我的管道中没有 HttpChunkAggregator，一旦我将它添加到一切都很好。

```
ClientBootstrap cb = new ClientBootstrap(cf);

cb.getPipeline().addLast("codec", new HttpClientCodec());
cb.getPipeline().addLast("chunkaggregator", new HttpChunkAggregator(1048576));
cb.getPipeline().addLast("inflater", new HttpContentDecompressor());
cb.getPipeline().addLast("handler", new OutboundHandler()); 
```

我确实从外部检查了浏览器源代码，代码在那里，感谢您的评论，他们确实引导我朝着正确的方向前进！

# coldfusion - 实例化 COM 对象时发生异常

> ID：15876102
> 
> 赞同：3
> 
> 时间：2013-04-08T09:50:23.297
> 
> 标签：coldfusion, coldfusion-10

我已从 ColdFusion 6 升级到 ColdFusion 10，但遇到以下错误：

> 实例化 COM 对象时发生异常
> 
> 此异常的原因是：coldfusion.runtime.com.ComObjectInstantiationException：实例化COM对象时发生异常。

我对 COM 对象的调用：

```
<cfobject 
  type="COM" 
  action="create" 
  context="INPROC" 
  class="ASIUtil.Ccrypting" 
  name="crypting"
> 
```

我的 ColdFusion 在 32 位上运行，我知道 ColdFusion 64 位不支持 COM 互操作性。但即使我的 ColdFusion 是 32 位的，我也遇到了这个问题。

请帮助我找到一种方法来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:37:22.017

这与 ColdFusion 无关。您所要做的就是注册 DLL。我也遇到过这个问题，注册它们后，对象创建工作了。

```
regsvr32 asiutil.dll 
```

**重要的**

在进行注册之前，请确保备份任何冲突的 DLL，而且有时 DLL 会因为正在使用而被锁定，因此您可能需要重新启动服务器。

# javascript - jsfiddle 在 IE8 中不起作用。它适用于 Firefox 和 chrome

> ID：15876103
> 
> 赞同：0
> 
> 时间：2013-04-08T09:50:24.547
> 
> 标签：javascript, html, jsfiddle

这是 jsfiddle 在我的 IE8 中的样子：

![在此处输入图像描述](https://i.stack.imgur.com/alAt9.png)

以及以下js错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
Timestamp: Mon, 8 Apr 2013 09:49:23 UTC

Message: Expected ':'
Line: 222
Char: 1
Code: 0
URI: http://jsfiddle.net/js/jshint.js?TheBlackKeys

Message: Expected identifier
Line: 105
Char: 25
Code: 0
URI: http://jsfiddle.net/js/EditorCM.js?TheBlackKeys

Message: Object doesn't support this property or method
Line: 24
Char: 5
Code: 0
URI: http://jsfiddle.net/js/heyoffline.js?TheBlackKeys

Message: 'MooShellEditor' is undefined
Line: 91
Char: 7
Code: 0
URI: http://jsfiddle.net/

Message: Object doesn't support this property or method
Line: 7326
Char: 2
Code: 0
URI: http://jsfiddle.net/js/moo-clientcide-1.3.js?TheBlackKeys

Message: 'editor' is null or not an object
Line: 130
Char: 5
Code: 0
URI: http://jsfiddle.net/js/Actions.js?TheBlackKeys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:22:38.767

jsFiddle 与 IE8 不兼容。对于在不受支持的浏览器下进行测试，我们建议使用“草稿”功能：[http ://doc.jsfiddle.net/basic/introduction.html#draft-page](http://doc.jsfiddle.net/basic/introduction.html#draft-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:54:39.203

与您的编程或您正在编码的任何内容无关，这只是[http://jsfiddle.net/](http://jsfiddle.net/)具有跨浏览器兼容性的一个不好的考虑（在这种情况下是 IEv8）

无论如何，如果您真的需要在 IE8 中进行测试，请在控制台中运行：

```
document.getElementById('content').style.height = '800px'; 
```

'800px' 适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:04:09.093

我同意转基因。我在 IE8 上使用 jsFiddle 时遇到问题，需要改用 Chrome。

[在 IE8 Here](https://github.com/jsfiddle/jsfiddle-issues/issues/311)和[Here](https://github.com/jsfiddle/jsfiddle-issues/issues/108)上还有几个针对 jsFiddle 的开放错误报告。迄今为止，它们尚未得到解决。

# nginx - Nginx Cache-Control 标头不起作用（在日志中显示 404）

> ID：15876104
> 
> 赞同：7
> 
> 时间：2013-04-08T09:50:27.487
> 
> 标签：nginx, caching, static, cache-control

我正在尝试设置 nginx 来缓存静态文件，例如图像、css 和 js。

这是我的会议。

```
server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/log/host.access.log  main;

    location / {
        root   /var/www/site;
        index  index.html index.htm;
  }

        location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
                expires max;
                add_header Pragma public;
                add_header Cache-Control "public, must-revalidate, proxy-revalidate";
        }

#error_page  404              /404.html;

# redirect server error pages to the static page /50x.html
#
error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root   /usr/share/nginx/html;
}
} 
```

当我尝试使用它时，我在所有文件上都得到 404，当我删除位置时 ~*... 我可以完美地检索所有文件。我的文件在`/var/www/site/images/*/*.jpg`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T11:35:21.997

问题在于

```
location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
        expires max;
        add_header Pragma public;
        add_header Cache-Control "public, must-revalidate, proxy-revalidate";
} 
```

它应该设置根路径。

```
location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
            root /var/directory/...
            expires max;
            add_header Pragma public;
            add_header Cache-Control "public, must-revalidate, proxy-revalidate";
    } 
```

# entityspaces - 重置 EntitySpaces 查询的选定字段

> ID：15876105
> 
> 赞同：1
> 
> 时间：2013-04-08T09:50:28.250
> 
> 标签：entityspaces

EntitySpaces 用于我目前正在处理的项目中。由于 EntitySpaces 文档稀缺，并且所有 EntitySpaces 知识都离开了公司，因此我只能尽力而为。

问题：如何重置查询对象上的选定字段，以便可以通过以前定义的连接和 where 子句重用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:29:51.750

您确实需要创建一个新查询，EntitySpaces 查询仅供一次性使用。[此外，当您从CNET 的 download.com](http://download.cnet.com/1770-20_4-0.html?query=entityspaces&platformSelect=Windows&tag=srch&searchtype=downloads&filterName=platform=Windows&filter=platform=Windows)安装完全免费的版本时，将安装完整的文档，该链接可从[主页上的 EntitySpaces 网站获得](http://www.entityspaces.net/www.entityspaces.net/Portal/Default.aspx.html)。进入 download.com 后，请使用下载按钮下方的“链接”，而不是下载按钮本身。你得到了完整的源代码，一切，太棒了，你可以安装 ES2012，它不会干扰旧的非 2012 版本。完整的帮助安装在本地，安装后请查看 EntitySpaces 2012 菜单。

*   迈克·格里芬

# java - 我可以使用 eclipse-m2e 并且在编译类时不重启容器吗？

> ID：15876107
> 
> 赞同：0
> 
> 时间：2013-04-08T09:50:33.147
> 
> 标签：java, eclipse, maven, m2e

我正在使用 Eclipse 和 m2e 集成来处理 Java/Maven/Spring 应用程序堆栈。大部分情况下一切正常，但有点烦人的是，默认行为是在重新编译类时重新启动 servlet 容器中的整个应用程序上下文。

在我使用过的以前的应用程序堆栈中，我能够让应用程序上下文保持运行，并且在调试模式下运行时类热部署（使用 Jetty，只要方法签名不改变）。

这不是 m2e 集成很容易支持的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:02:17.453

我很确定[Jrebel](http://zeroturnaround.com/jrebel/)可以为您处理热部署。在使用依赖项由 maven 管理的 Web 应用程序时，我遇到了类似的问题。它也部署在 tomcat 上，我让 Jrebel 热部署代码。

我遇到了一个[名为 manik 的插件](https://code.google.com/p/manik-hot-deploy/)，它声称可以在 Eclipse 上为 maven 项目执行热部署，但我自己没有尝试过。如果你可以让它与你的项目一起工作，那可能是一个选择。

# java - 如何在不使变量最终的情况下访问线程外的变量

> ID：15876110
> 
> 赞同：1
> 
> 时间：2013-04-08T09:50:34.123
> 
> 标签：java, multithreading, variables, assign

如何在不使变量最终的情况下访问线程外的变量？

```
int x=0;
Thread test = new Thread(){
public void run(){
x=10+20+20;   //i can't access this variable x without making it final, and if i make     it.....                   
              //final i can't assign value to it
}
};    
test.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T12:06:02.473

理想情况下，您希望使用`ExecutorService.submit(Callable<Integer>)`然后调用`Future.get()`来获取值。线程共享的变异变量需要同步操作，例如`volatile`，`lock`或`synchronized`关键字

```
 Future<Integer> resultOfX = Executors.newSingleThreadExecutor().submit(new Callable<Integer>() {
        @Override
        public Integer call() throws Exception {
            return 10 + 20 + 20;
        }
    });
    int x;
    try {
        x = resultOfX.get();
    } catch (InterruptedException ex) {
        // never happen unless it is interrupted
    } catch (ExecutionException ex) {
        // never happen unless exception is thrown in Callable
    } 
```

# javascript - sammyjs 可选参数

> ID：15876112
> 
> 赞同：6
> 
> 时间：2013-04-08T09:50:35.220
> 
> 标签：javascript, sammy.js

只是想知道是否无论如何在 sammy js 路由中将参数指定为可选。

我见过你可以使用的地方

```
route/:foo/?:bar 
```

这会让 sammy 认为 bar 是可选的。但是，如果您在没有`bar`提供的情况下查询您的参数，它将等于 url 的最后一个字符，例如

```
'#/route/test' => {foo: 'test', bar: 't'} 
```

和

```
'/route/test/chicken' => {foo: 'test', bar: 'chicken' } 
```

但是在这两种情况下都填充了 bar ，因此无法检查它是否已提供。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T19:00:56.383

当涉及到可选参数和查询字符串时，Sammy 实际上丢了球。我能让它很好地工作的唯一方法是使用正则表达式和 splat 对象。在您的示例中，您将编写：

```
this.get(/\#\/route\/(.*)\/(.*)/, function (context) {
        var result = this.params['splat'];
}); 
```

缺点是当省略可选参数时，您需要在 URL 末尾添加反斜杠。

splat 对象是 JavaScript match 方法的实际结果，是一个**数组**。

```
'#/route/test/' => {result[0]: 'test', result[1]: ''}
'#/route/test/chicken' => {result[0]: 'test', result[1]: 'chicken'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T20:27:34.097

```
this.get("#/:param1(/:param2)?", function (context) {
    var result = this.params['splat'];
}); 
```

这种方法的唯一问题是 param2 将以 '/' 开头，但这可以很容易地删除。

```
'#/go' => {result[0]: 'go', result[1]: ''}
'#/go/here' => {result[0]: 'go', result[1]: '/here'} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-30T14:57:38.297

```
this.get('#/product/(:id)?', function(context) {
        var id = this.params['id'];
        context.app.swap('');
        context.render('templates/product.template', {base_url:base_url})
            .appendTo(context.$element()).then(function () {loadProduct();});
  });
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-09-11T12:37:52.627

这是一个旧帖子，仍然，如果有人正在寻找这个：

另一种解决方案是定义两条映射到同一函数的路由：

```
this.get('#route/:foo', module.foo_handler)
this.get('#route/:foo/:bar', module.foo_handler) 
```

然后在 foo_handler 检查 typeof(this.params.bar) 是否未定义，否则如果已定义，则使用带有 bar 参数的路由并且已指定 bar

# magento - 根据篮子的总计计算运费？

> ID：15876114
> 
> 赞同：7
> 
> 时间：2013-04-08T09:50:42.747
> 
> 标签：magento

我已经根据“价格与目的地”条件在我的商店中实施了表费率运输系统。但是，我注意到运费是根据购物篮的小计（不包括增值税/税）而不是总计（包括增值税/税）计算的。如何让 Magento 将运费基于总计而不是小计？

**更新：**我使用的 Magento 版本是 1.5.0.1 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:31:39.303

就在对 huzefam 回答的评论后面 - 你提到了增值税并且在英国，所以我想可能已经安装了 GB 语言包，在这种情况下，你的路径将是系统 -> 配置 -> 销售 ->增值税子菜单标题 -> 税级，然后更改交付的增值税级选项。

见下图；

![在此处输入图像描述](https://i.stack.imgur.com/rfJV8.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:27:13.743

转到：系统 -> 配置 -> 销售 -> 增值税检查**计算设置**并尝试以下设置：

> *   基于“总价”的计税方法
> *   基于“送货地址”的税收计算
> *   目录价格“含税”
> *   运费“含税”
> *   “折扣前”申请客户税
> *   对“不含税”的价格应用折扣
> *   对“个性化价格（如果有）”征税

来源：[我的免费送货是在加税后计算的](https://stackoverflow.com/questions/13713982/my-free-shipping-is-being-calculated-after-tax-is-added)

有关更多信息，请参阅：

> *   [http://www.magentocommerce.com/knowledge-base/entry/configuration-sales-tax-calculation-settings](http://www.magentocommerce.com/knowledge-base/entry/configuration-sales-tax-calculation-settings)
> *   [http://www.magentocommerce.com/knowledge-base/entry/configuring-general-tax-settings](http://www.magentocommerce.com/knowledge-base/entry/configuring-general-tax-settings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:23:24.590

You can enable tax for your shipping from admin in System>Configuration>Tax>Tax Classes>Tax Class for shipping

Hope this solves your problem :)

# sql - 使用 IN 子句获取超过 1000 条记录

> ID：15876115
> 
> 赞同：0
> 
> 时间：2013-04-08T09:50:48.097
> 
> 标签：sql, oracle, oracle-sqldeveloper

我在 oracle 数据库上使用 sql developer。我的要求是使用我拥有的主键 ID 一次提取 8000 多行。sql developer 不允许我一次获取超过 1000 个。我所能做的就是添加一个 OR 并最多拉出 2000（1000+1000）。有没有更好的方法一次拉所有？

如果需要使用临时表，我该如何在 oracle 中进行处理？

```
Select * from X where ID in (1,2,...1000) OR ID IN (1001,1002,...2000); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:11:04.523

把所有的`ID`放在一个**临时表中**。

然后执行`SELECT`查询`WHERE id IN` **(SELECT id FROM < the temp table you created>)**。

应该管用。

例如在 Oracle 中创建 TEMP TABLE：

```
CREATE TABLE `temp`
   AS SELECT distinct `id` FROM `<your table>`; 
```

干杯。

# asp.net - 正则表达式匹配 9 个字符，其中前 2 个是字母，然后是 6 个数字，然后是 1 个字母

> ID：15876117
> 
> 赞同：0
> 
> 时间：2013-04-08T09:50:50.080
> 
> 标签：asp.net, regex

我有一个 asp 文本框控件，现在使用正则表达式我想验证该控件，它应该包含 9 个字符，其中前 2 个是字母，然后是 6 个数字，然后是 1 个字母。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:54:12.780

如果我知道我的正则表达式，你可以使用这个：`^[a-zA-Z]{2}[\d]{6}[a-zA-Z]{1}$`.

（`{1}`最后不需要，但我虽然看起来不错......）

你如何检查这取决于你。您可以在代码隐藏（因为您使用的是 asp.net）或 JS 中执行此操作。

编辑：也应该与`ValidationExpression`.

这是一个使用中的示例：

```
<asp:TextBox ID="TB1" runat="server" />
<asp:RegularExpressionValidator ID="validator" runat="server" ControlToValidate="TB1" ErrorMessage="2 letters, 6 digits and a letter, hotshot!" ValidationExpression="^[a-zA-Z]{2}[\d]{6}[a-zA-Z]{1}$" /> 
```

![验证者在行动](https://i.stack.imgur.com/LxYzk.jpg)

# java - Java 正则表达式 HTML

> ID：15876118
> 
> 赞同：0
> 
> 时间：2013-04-08T09:50:50.830
> 
> 标签：java, regex

尝试获取 html 的结果：

```
private static final String PATTERN = "(ReportSession=)[0-9A-Za-z]{24}";`

...    

Pattern pattern = Pattern.compile(PATTERN);
Matcher matcher = pattern.matcher(".axd?ReportSession=frytm055l51aigbigh5xzrin\u");
if(matcher.find()){
    textView1.setText(matcher.group(1));
} 
```

输出是，但我需要在反斜杠之前`ReportSession=`得到整个。`ReportSession=frytm055l51aigbigh5xzrin`有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:57:16.250

您用括号表示组。您只有一个内部组，即 (ReportSession=)。如果您需要整个模式，您可以使用：

```
matcher.group(); 
```

或者

```
matcher.group(0); 
```

组 0 表示整个模式，因此表达式 m.group(0) 等价于 m.group()。
来源：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28int%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:53:21.293

使用`matcher.group(0)`代替`matcher.group(1)`

# c++ - 验证用户输入不起作用

> ID：15876119
> 
> 赞同：0
> 
> 时间：2013-04-08T09:51:00.860
> 
> 标签：c++

我想知道是否有人可以提供帮助，我有下面的代码，我想添加验证以确保用户不能输入小于 1 或大于 9 的数字但是我无法让它工作，任何人都可以帮助谢谢。

我试过把

```
if(x >=1 && x <= 9) 
```

围绕波纹管代码的内容声明，但这不起作用。

```
for(int x = 0;x < 9; x++) 
```

我有的代码：

```
void interactiveSudokuFill(int grid1[9][9]){

for(int y=0;y<9;y++){
 for(int x=0;x<9;x++){
    string theString;
    cout<<"Write the value to place in Sudoku["<<y<<"]["<<x<<"] :"<<endl;
    std::getline(cin,theString);
    int nr=atoi(theString.c_str());
    grid1[y][x]=nr;
    system("cls");

}

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:52:31.567

那么`x`不是用户输入的值。你应该检查`nr`：

```
if(nr >= 1 && nr <= 9) {
  grid1[y][x] = nr;
} 
```

通常，from 的提取`int`是`std::cin`这样完成的：

```
int nr;
std::cin >> nr; 
```

如果您想继续询问用户一个新值，直到他们输入一个既是整数又是正确整数的值：

```
int nr = 0;
do {
  std::cin >> nr;
  std::cin.clear();
} while(nr < 1 || nr > 9);
grid[y][x] = nr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:57:58.457

试试这个：

```
void interactiveSudokuFill(int grid1[9][9]){

for(int y=0;y<9;y++){
 for(int x=0;x<9;x++){
string theString;
cout<<"Write the value to place in Sudoku["<<y<<"]["<<x<<"] :"<<endl;
std::getline(cin,theString);
int nr=atoi(theString.c_str());
if(nr>=1 && nr<=9){
     grid1[y][x]=nr;
}
else{
 cout<<"Invalid number."<<endl;
 x--;
}
system("cls");

}

}
}

x-- and surely aren't the most correct way of doing things but it works... 
```

# mysql - 如何使用 NetBeans 创建 MySQL 数据库？

> ID：15876120
> 
> 赞同：-3
> 
> 时间：2013-04-08T09:51:08.393
> 
> 标签：mysql, netbeans, jdbc

我想检查这个数据库，“genericDatabase”在使用 NetBeans 的 MySQL 数据库中是否可用，如果没有，我想创建这个给定的数据库，表使用 NetBeans（使用 JDBC）。

```
create database genericDatabase;
use genericDatabase;

create table data(
dataID VARCHAR(5) NOT NULL,
dataName VARCHAR(20) NOT NULL,
CONSTRAINT PRIMARY KEY (dataID)
)ENGINE=INNODB;

create table information(
informationID VARCHAR(4) NOT NULL,
informationName VARCHAR(20) NOT NULL,
CONSTRAINT PRIMARY KEY (informationID)
)ENGINE=INNODB; 
```

**我用上面的 SQL 做了一个控制器类，但它不起作用。如何正确执行此操作？我需要知道如何使用 NetBeans 识别 SQL 数据库，以及在数据库不可用时如何创建数据库和插入表？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:39:19.313

我假设 Nimila 正在寻找的是一种使用 Netbeans 操作 MySQL 数据库的方法，以便能够为某些 CRUD 应用程序编写 Java 程序。

使用 Netbeans，您无法创建数据库。您可以使用 mysql 命令或 MySQL Workbench 来创建数据库模式。

在此之后，您可以添加表并准备一切以编写 Java 代码。

这是架构中的两个表，奇怪的是，称为“zoot”...

![在此处输入图像描述](https://i.stack.imgur.com/N9CW1.png)

# classification - 在 Weka 中对未标记的数据进行分类

> ID：15876121
> 
> 赞同：3
> 
> 时间：2013-04-08T09:51:16.957
> 
> 标签：classification, weka, arff

我目前在 Weka 中使用各种分类器。

我的测试数据被标记，例如：

```
@relation bmwreponses

@attribute IncomeBracket {0,1,2,3,4,5,6,7}
@attribute FirstPurchase numeric
@attribute LastPurchase numeric
@attribute responded {1,0}

@data
4,200210,200601,0
5,200301,200601,1
6,200411,200601,0
5,199609,200603,0
6,200310,200512,1
... 
```

每行的最后一个值是类元素，即响应。

但是，如果我尝试未标记的测试数据，例如：

```
@relation bmwreponses

@attribute IncomeBracket {0,1,2,3,4,5,6,7}
@attribute FirstPurchase numeric
@attribute LastPurchase numeric
@attribute responded {1,0}

@data
4,200210,200601,?
5,200301,200601,1
6,200411,200601,?
5,199609,200603,0
6,200310,200512,?
... 
```

Weka 将执行分类但忽略未标记的行。所以上面的测试将只包括第 1 行和第 3 行。

有谁知道如何解决这个问题？我应该在测试文件中声明类属性还是遗漏了什么？

摩根先生。

# cassandra - 使用 PlayOrm 读取查询确实返回适当的结果

> ID：15876122
> 
> 赞同：3
> 
> 时间：2013-04-08T09:51:17.650
> 
> 标签：cassandra, playorm

我刚刚开始探索 PlayOrm 并尝试运行网络上可用的基本代码来插入和读取数据。当我插入数据时，一切似乎都工作正常，但在读取相同的数据时，它返回的行数不正确。例如。如果我插入 3 条记录，有时会得到 0 条记录，有时会返回所有记录。

按照我正在使用的代码：

用于插入/读取数据的类：

```
 @NoSqlEntity
  @NoSqlQueries({
    @NoSqlQuery(name="findByLastName", query="PARTITIONS t('lastName',:lastName) select *  FROM TABLE as t"),
    @NoSqlQuery(name="findByName", query="PARTITIONS e('name',:name) select *  FROM TABLE as e")
  })

  public class User {

    @NoSqlId
    private String id;

    @NoSqlPartitionByThisField
    private String name;

    @NoSqlIndexed
    private int age;

    @NoSqlPartitionByThisField
    @NoSqlIndexed
    private String lastName;

    public String getId() {
            return id;
    }

    public void setId(String id) {
            this.id = id;
    }

    public int getAge() {
            return age;
    }

    public void setAge(int age) {
            this.age = age;
    }

    public String getName() {
            return name;
    }

    public void setName(String name) {
            this.name = name;
    }

    public String getLastName() {
            return lastName;
    }

    public void setLastName(String lastName) {
            this.lastName = lastName;
    }
    /*
     * Queries:
     *      @NoSqlQuery(name="findByLastName", query="PARTITIONS t('lastName',:lastName) select *  FROM TABLE as t"),
     *      @NoSqlQuery(name="findByName", query="PARTITIONS e('name',:name) select *  FROM TABLE as e")
     */

    public static List<User> findByLastName(NoSqlEntityManager mgr, String lastName) {
            Query<User> query = mgr.createNamedQuery(User.class, "findByLastName");
            System.out.println("Using last name "+lastName);
            query.setParameter("lastName", lastName);
            return query.getResultList(0, 100);
    }

    public static List<User> findByName(NoSqlEntityManager mgr, String name) {
            Query<User> query = mgr.createNamedQuery(User.class, "findByName");
            System.out.println("Using name "+name);
            query.setParameter("name", name);
            return query.getResultList(0, 100);
    }

  } 
```

使用此类的代码：

```
import java.awt.List;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.HashMap;
import java.util.Map;
import com.alvazan.orm.api.base.Bootstrap;
import com.alvazan.orm.api.base.DbTypeEnum;
import com.alvazan.orm.api.base.NoSqlEntityManager;
import com.alvazan.orm.api.base.NoSqlEntityManagerFactory;
import com.netflix.astyanax.retry.SleepingRetryPolicy;

public class Example {

private static NoSqlEntityManager mgr;
public static void main(String[] args) {
    Map<String, Object> properties = new HashMap<String, Object>();
    properties.put(Bootstrap.AUTO_CREATE_KEY, "create");
    /*
     * Bootstrap.createAndAddBestCassandraConfiguration(properties, clusterName, keyspace, seeds);
     * NoSqlEntityManagerFactory factory = Bootstrap.create(DbTypeEnum.CASSANDRA, properties,null,null);
     */
    NoSqlEntityManagerFactory factory = Bootstrap.create(DbTypeEnum.IN_MEMORY, properties,null,null);
    mgr = factory.createEntityManager();

   String file_to_use = userData;
   SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
   System.out.println("Starting inserts with file "+file_to_use+" at "+sdf.format(Calendar.getInstance().getTime()));

   BufferedReader CSVFile = null;
   try {
        CSVFile = new BufferedReader(new FileReader(file_to_use));
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     String dataRow = null;
    try {
        dataRow = CSVFile.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // Read the first line of data.
      int i = 0; 
      while (dataRow != null){
          String[] dataArray = dataRow.split(",");
          User user = new User();
          user.setName(dataArray[0]);
          user.setAge(Integer.parseInt(dataArray[1]));
          user.setLastName(dataArray[2]);
          System.out.println("Inserting Values "+dataArray[0]+" "+dataArray[1]+" "+dataArray[2]);

          mgr.flush();
          try {
            dataRow = CSVFile.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }
      }

     java.util.List<User> result;
     System.out.println("#### By LastName ####");
     result = User.findByLastName(mgr, "Freida");
     System.out.println("Result Size: "+ result.size());

     System.out.println("#### By Time ####");
     result = User.findByName(mgr, "John");
     System.out.println("Result Size: "+ result.size());
}
} 
```

用户数据的内容：

```
John,17,Freida
Jim,18,Freida
Jam,19,Freida
Johny,20,Freida
Jen,21,Freida 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:56:58.547

编辑：这是 PlayOrM 中一个非常具体的错误。已提交的修复程序是最新的[https://github.com/deanhiller/playorm/commit/22d50a12667d03fd2c4683abeb59a4822420a4ce](https://github.com/deanhiller/playorm/commit/22d50a12667d03fd2c4683abeb59a4822420a4ce)

仅当您在同一列上同时使用 @NoSqlPartionedBy 和 @NoSqlIndexed 两次时才会发生这种情况。一种解决方法是在您的 where 子句中放置一些东西（任何东西），它每次都会使用特定的索引（基于您的 where 子句中的列）。或者只是获取带有修复程序的最新代码。

我不确定您是否应该使用分区。在您的示例中，您以两种方式对表进行分区......名称和姓氏。在一种情况下，所有同名的行都在同一个分区中。在另一种情况下，具有相同 lastName 的所有行都在同一个分区中。您只能查询单个分区。所以想象你有名字

```
dean
mike
joe 
```

这是 3 个不同的分区，您可以查询任何人。您可以查询“给我所有在 partition=dean 中姓氏=smith 的人”，或者您可以查询给我所有姓氏=smith 在 partition=mike 中的人”

想象一下，你也有 lastNames

```
smith
black
obama 
```

您在这里有 3 个分区，您可以查询“给我所有在 partition=smith 中 name=dean 的人”或“给我所有在 partition=black 中 name=dean 的人”

如果您想让事情变得更容易，请摆脱所有 @NoSqlPartitionByField 以便您根本不进行分区。

基本上，通过分区，您可以查询单个分区。每个分区都是它自己的索引。这就是为什么它可以在您拥有 X 百万行的无限分区时进行扩展。但是，您不能在分区中拥有无限行。

我猜了很多，因为您的示例仅插入一行，而您声称要插入 3 行，我希望您的代码在这两种情况下都返回 1 行。您的查询要求返回 lastName="Frieda" 分区中的所有行，然后返回 name="John" 分区中的所有行，并且由于您存储了两者的对象，因此该行应该最终进入的分区.. ..这对我们来说已经在生产中工作了，我们对此没有任何问题。

让我知道您是否有更多信息，例如执行 3 次插入而不是仅此一次的代码。

院长

# jquery - Wijmo 网格分页的可扩展性

> ID：15876132
> 
> 赞同：0
> 
> 时间：2013-04-08T09:51:47.663
> 
> 标签：jquery, asp.net, asp.net-mvc-3, wijmo

我可以扩展 Wijmo Grid Paging 行为以显示除了显示 First、Last、Previous 和 Next 按钮之外，还想显示总页数和页面索引（1-30 of 300）。如果是，请一些机构可以指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:21:15.253

目前，WijPager 中没有可用于在 Wijmo Grid 中进行分页的这种寻呼机模式。我们已经将它作为增强请求转发，您也可以在此链接的 UserVoice 页面上投票支持它（[http://wijmo.uservoice.com/forums/165790-general/suggestions/3076732-additional-pager-mode](http://wijmo.uservoice.com/forums/165790-general/suggestions/3076732-additional-pager-mode)），以便它会根据选票优先合并。

您可以查看以下演示，其中显示了现在可用的模式： [http ://wijmo.com/demo/explore/?widget=Pager&sample=Paging%20Modes](http://wijmo.com/demo/explore/?widget=Pager&sample=Paging%20Modes)

# python - fortran中的Btest函数，python中有没有等价的？

> ID：15876136
> 
> 赞同：1
> 
> 时间：2013-04-08T09:52:01.340
> 
> 标签：python, fortran

我想[`btest`](http://gcc.gnu.org/onlinedocs/gfortran/BTEST.html)在 Python 中使用与 Fortran 中的函数等效的函数。你知道有什么我可以用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:55:28.443

我认为是这样的：

```
def btest(i, pos):
    return i & (1 << pos) 
```

# android - android设备中的列表顺序不同

> ID：15876139
> 
> 赞同：3
> 
> 时间：2013-04-08T09:52:08.957
> 
> 标签：android, collections, android-listview, android-sqlite, device

我很难理解为什么 an 的列表顺序`arrayList`在不同的 android 设备中是相反的。例如，在 Asus Nexus 7 中，列表（我想在 a 中显示的一些项目`ListView`）排序良好，但在 Galaxy Tab 2 中，顺序相反。当我在 Nexus 中调用`Collections.reverse(items);` 命令时，在 Galaxy 中变得良好而错误！！！！这来自 SQLite 数据库，该数据库在每个设备中以不同的顺序放置项目！！！这是为什么 ？这正常吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:03:49.010

不能保证 SQL 将按照与插入行的顺序相同的顺序返回结果。这不是规范的一部分。如果您需要保证结果是有序的，请`ORDER BY`在特定列上使用该子句。

# c++ - CUDA 内存（类型），仅用于内核调用期间的设备计算（计算 1.1 或 1.2）

> ID：15876140
> 
> 赞同：2
> 
> 时间：2013-04-08T09:52:11.167
> 
> 标签：c++, c, memory, cuda

我目前正在学习 CUDA，我的算法必须根据一些输入数据进行一些繁重的计算。这些计算是在一个最多旋转 1024 轮的循环中进行的。只要每个内核有少量线程（< 100´000），一切都可以正常工作，但是如果我想使用更多线程，内核将被窗口中断，因为它需要很长时间才能完成。

我的解决方案是在几个内核调用中拆分繁重的计算：

1.  主**内核**，准备输入数据并计算前 x 轮（循环展开）。每个输入只会调用一次。
2.  **工作**内核，执行接下来的 x 轮（循环展开）。这将根据需要经常调用以计算所有所需的回合。

在每个内核调用（一个*main*，许多*工作*）之间，我必须保存 16 + length 个字节的数据，这些数据将在下一次调用中使用（长度是输入的长度，每个*main*调用都是固定的）。主*内核*将初始写入这些字节，*工作*内核将读取它们，运行下一个计算并用新结果写入原始数据。我只需要设备上的那些数据，不需要主机访问。我必须为此使用哪种内存？至少它必须是全局内存，因为它是内核调用期间唯一持久的可写内存，不是吗？但是，然后呢？您能否就如何继续使用正确的内存（和最佳性能）给我一个建议？

在“伪代码”中，它可能如下所示：

```
prepare memory to hold threads * (16 + length) bytes

for length = 1 to x step 1
  call mainKernel
  rounds = 1024 - rounds_done_in_main
  for rounds to 0 step rounds_done_in_work
    call workKernel
  end for
end for

cleanup memory

--------

template <unsigned char length> __global__ mainKernel() {
  unsigned char input[length];
  unsigned char output[16];
  const int tid = ...;

  devPrepareInput<length>(input);

  calc round 1: doSomething<length>(output, input)
  calc round 2: doSomething<length>(output, output + input) // '+' == append

  write data to memory based on tid // data == output + input
}

template <unsigned char length, remaining rounds> __global__ workKernel() {
  unsigned char *input;
  unsigned char *output;
  const int tid = ...;

  read data from memory based on tid
  ouput = data
  input = data+16

  if rounds >= 1
    calc round x  : doSomething<length>(output, output + input)
  if rounds >= 2
    calc round x+1: doSomething<length>(output, output + input) // '+' == append

  if rounds == x // x is the number of rounds in the last work call
    do final steps on output
  else
    write ouput + input to memory based on tid (for next call)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T05:57:25.443

是的，您可以使用设备内存来执行此操作。声明的变量`__device__`提供了一个缓冲区的静态声明，内核可以直接使用，不需要任何`cudaMemcpy`操作，也不需要将指针显式传递给内核。由于它具有[应用程序的生命周期，因此](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-variable-qualifier)其中的数据将从一个内核调用持续到下一个内核调用。

```
#define NUM_THREADS 1024
#define DATA_PER_THREAD 16
__device__ int temp_data[NUM_THREADS*DATA_PER_THREAD];

__global__ my_kernel1(...){
  int my_data[DATA_PER_THREAD] = {0};
  int idx = threadIdx.x + blockDim.x * blockIdx.x;
  // perform calculations

  // write out temp data
  for (int i = 0; i < DATA_PER_THREAD; i++) temp_data[i + (idx * DATA_PER_THREAD)] = my_data[i];
  }

__global__ my_kernel2(...){
  int my_data[DATA_PER_THREAD];
  // read in temp data
  for (int i = 0; i < DATA_PER_THREAD; i++) my_data[i] = temp_data[i + (idx * DATA_PER_THREAD)];
  // perform calculations

  } 
```

有多种方法可以根据您在内核中的使用模式进行优化。数据传入/传出`my_data`并不是真正必要的。显然，您的内核代码可以通过适当的索引`temp_data`直接访问。`my_data`

如果您确实决定加载/存储它，您可以交错数据以允许在`for`-loop 读取和写入数据期间进行合并访问。

# javascript - 显示 Div Onclick 按钮

> ID：15876142
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:52:21.807
> 
> 标签：javascript, jquery, html, css

我有多个按钮，每个按钮都显示一个主题名称。示例：英语、数学、社交、法语等。

单击任何这些按钮时，应显示其内容。每个按钮（主题）的内容都是唯一的。我只有一个 div 容器。when a particular button is selected, the corresponding content is shown, and when next button is showed, the current content should be replaced by new button content, and all these should happen on Click only.

我对 java 脚本和查询非常陌生，请尝试帮助我。

这是我的 HTML

```
<div id="graybox">
    <button type="button">English</button>
    <button type="button">Math</button>
    <button type="button">French</button>
    <button type="button">Social</button>
</div>

<div id="whitebox">
    on click of the subject above, respective content will be shown here, 
</div> 
```

PS：科目将来自数据库，可以是5个科目或8个或任意数量。所以主题名称和编号不固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:56:34.060

使用 display:none 创建一个 CSS 类并将其应用于 div，然后在通过 Javascript 单击按钮时从 div 中删除该类。如果您需要更详细的帮助，请发布 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:57:23.067

用这个

**HTML**

```
<div class="container">
    <ul>
        <li><button>English</button> <span>English Description</span></li>
         <li><button>Maths</button> <span>Maths Description</span></li>
         <li><button>Social</button> <span>Social Description</span></li>
         <li><button>French</button> <span>French Description</span></li>
    </ul>
</div> 
```

**jQuery**

```
$("button").click(function() {
  $(this).siblings("span").show();
}); 
```

**[演示](http://jsfiddle.net/we296/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:02:02.210

```
<div class="container">
    <ul>
        <li><button>English</button> <span>English Description</span></li>
         <li><button>Maths</button> <span>Maths Description</span></li>
         <li><button>Social</button> <span>Social Description</span></li>
         <li><button>French</button> <span>French Description</span></li>
    </ul>
</div>
<div id="subtext">
</div> 
```

[JS小提琴](http://jsfiddle.net/rahularyansharma/we296/9/)

```
$("button").click(function() {
 $('#subtext').html($(this).next().html());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:18:29.627

尝试查找文本，我猜你有相同的 div id 对应于按钮文本，如

`<button type="button">English</button>`

然后我猜 div 是

`<div id="English">English Content</div> etc`.

如果是这种情况，那么你可以试试这个：

```
 $("#graybox button").click(function() {
     var div2show = $(this).text();
     $('#whitebox').find(div2show).show().siblings().hide();
 }); 
```

# java - 如何工作：x = x++？

> ID：15876151
> 
> 赞同：0
> 
> 时间：2013-04-08T09:52:48.917
> 
> 标签：java

Java 代码如下：

```
 int x = 10;
    while (x != 15){
       x = x++;
       System.out.println("Value X " + x);
    } 
```

执行：无限循环？为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:55:01.027

Because `x` will never change and always will be `10`. Read JLS.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:55:12.307

I may be wrong but `x++` incrementes x **after** reading it so `x = x++` means `x = x`. You should use `x = ++x` instead.

See [this question](https://stackoverflow.com/questions/1094872/is-there-a-difference-between-x-and-x-in-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T09:55:27.407

Becouse you assign the old value of `x` to `x` befor you increase the value! Try this:

```
int x = 10;
while (x != 15){
   x++;
} 
```

or

```
int x = 10;
while (x != 15){
   x = ++x;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T09:54:37.443

x++; increments the value of x then returns the old value of x.

THEN x = (that number) executes, meaning the mutation x++ did of x is undone.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T09:57:14.470

该行`x = x++;`应该是`x++;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T09:54:08.863

Because `x = x++` will assign the result of the operation `x++` to `x`. What you want is only `x++;`, which increments the value of `x` by one.

# hadoop - Hadoop节点高可用

> ID：15876154
> 
> 赞同：0
> 
> 时间：2013-04-08T09:53:00.137
> 
> 标签：hadoop, hdfs

如何拥有namenode的高可用？我们应该在集群中配置一些东西吗？（我们应该有 2 个节点（namenodes）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:09:14.620

互联网上有很多关于如何在 hadoop v1 中执行此操作的资源，例如 [http://www.hadoopsphere.com/2012/11/understanding-high-availability-options.html](http://www.hadoopsphere.com/2012/11/understanding-high-availability-options.html)或[http://hortonworks.com/blog/ ha-namenode-for-hdfs-with-hadoop-1-0-part-1/](http://hortonworks.com/blog/ha-namenode-for-hdfs-with-hadoop-1-0-part-1/)

在 Hadoop 2.0 中，这从本质上得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:57:01.467

Datanode：他们做实际的工作..

NameNode：负责管理 DataNode 的工作。

一个集群可以有多个 DataNode，但只有一个 NameNode。在一组物理盒子中，通常一个盒子运行 NameNode，而其他盒子运行 DataNode。

将 NameNode 与执行繁重工作的 DataNode 分开是一个好主意。原因是 NameNode 工作已经是内存密集型的。NameNode 可能成为集群的单点故障也无济于事。因此，经常重复的建议是让 NameNode 在具有防弹可靠性的单独高可用性服务器上运行。

# javascript - 防止按钮对html输入和按钮标签的影响

> ID：15876159
> 
> 赞同：1
> 
> 时间：2013-04-08T09:53:24.793
> 
> 标签：javascript, html, css, asp.net-mvc, asp.net-mvc-4

我正在编写一个 Intranet MVC 应用程序，并希望所有按钮的外观和行为方式都相同。对于创建、详细信息、返回列表等一些操作，我使用 GET 方法，而对于创建和保存，我使用 POST 方法。

我做了一点 CSS，所以按钮、a 和输入标签看起来是一样的：

```
input[type="submit"].actionButton,
button[type="submit"].actionButton,
a.actionButton,
a.actionButton:visited {
  background-color: transparent;
  padding: 4px;
  margin: 2px;
  font-family: sans-serif;
  font-style: normal;
  font-weight: normal;
  font-size: 1em;
  text-decoration: underline;
  border: none;
  cursor: pointer;
} 
```

但是输入和按钮标签都对鼠标按下事件有影响。我怎样才能防止这种情况？最好的解决方案是通过 CSS，但我还没有确定目标浏览器。主要是IE7和IE8。

这个问题的javascript解决方案也很好。

谢谢，
彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:44:58.117

这是 IE 中按钮的默认行为。这可以通过在按钮上添加负填充来“撤消”（欺骗）`:active`

```
input[type="submit"]:active,
button[type="submit"]:active {
    padding: -1px 0 0 -1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:29:24.243

尝试：

```
input[type="submit"].actionButton:active,
button[type="submit"].actionButton:active, 
```

# iphone - extracting embedded video from pdf in ios

> ID：15876162
> 
> 赞同：2
> 
> 时间：2013-04-08T09:53:42.570
> 
> 标签：iphone, ios

I have a pdf that contain a video. My need is to extract that embedded video from pdf. is there any way to do this in ios?Thanks..

# sql - Get the output based on column in the same table

> ID：15876163
> 
> 赞同：0
> 
> 时间：2013-04-08T09:53:45.070
> 
> 标签：sql, database

I have a table which looks like this: Employee table:

```
Employee_id  E_Name  Manager_Id 
-------------------------------
1             p          -
2             q          1
3             r          1
4             s          2 
```

Here column Manager_Id denotes the manager's employee Id. Meaning for p there is no manager. for q and r employee with id 1 is manager (p). and for s employee with emp id 2 is manager.

I want to build a query which will return below result:

```
Employee_id  E_Name  Manager_Name 
-------------------------------
1             p          -
2             q          p
3             r          p
4             s          q 
```

table here has manager name instead of id.

How to achieve above? Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:08:38.377

可以使用 LEFT OUTER JOIN 轻松完成：

尝试这个：

```
SELECT a.EMPLOYEE_ID, a.E_NAME, b.E_NAME
FROM EMPLOYEE a left outer join EMPLOYEE b
on A.MANAGER_ID = B.EMPLOYEE_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:01:25.273

您没有提到数据库提供程序，但对于*MySQL*，它是：

```
SELECT e.employee_id, e.e_name,COALESCE(m.e_name,'-') AS Manager_Name
FROM employee e 
LEFT JOIN employee m ON m.employee_id = e.manager_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:03:57.017

请试试：

```
select 
    Employee_id, 
    E_Name, 
    (select E_Name from YourTable b where b.Employee_id=a.Manager_Id) as Manager_Name
from YourTable a 
```

# java - Simple navigation through pages spring

> ID：15876170
> 
> 赞同：0
> 
> 时间：2013-04-08T09:54:06.237
> 
> 标签：java, spring

I am a Spring beginner and was recently looking at this tutorial [http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-annotation-example/](http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-annotation-example/)

(There's a download link at the bottom of the page and with a quick maven install you should be able to run the project very easily.)

I noticed that when I pressed the submit button on the 1st page and it goes to the 2nd page, the URL stays the same. Now, I modified the 2nd page to have **its own form**. Unfortunately, because the URL is still the same on the 2nd page, Spring picks the controller for the 1st page when I click the 2nd page's submit button. Why does this happen and how can I override this behavior?

Apologies if I am not being clear enough. Feel free to ask for certain clarification.

Thanks for your time Regards Steve

**EDIT : My 2nd page's form looks like this**

```
<form:form method="POST" commandName="step2">

    <table width="800" align="center"
        style="border-width: 5px; border-style: solid; border-color: gray;">
        <caption>
            <b>STEP 2</b>
        </caption>
        <tr>
            <td></td>
            <td colspan="3"><input type="submit" value="Submit Page 2"
                cssClass="field" /></td>
        </tr>
    </table>
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:13:02.573

如果您希望在使用 Page2 url 从 Page1 导航到 Page2 时更新 url。然后在服务器端使用重定向而不是转发。我不是你在 Spring MVC 中的做法，你可能想查看 Spring MVC 参考手册。

# javascript - 我要编辑 Javascript 的哪一部分？

> ID：15876175
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:54:24.057
> 
> 标签：javascript

我发现了这个很棒的教程[http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)

它很容易理解，但我被 JS 卡住了，因为我想在页面上拥有多个图像。

有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:19:39.243

你不需要`edit`你的`script`（可能是）。但是你必须为你的每一个`selector`设置两个，一个是为（在选择时可行），另一个是为你的每一对设置`classes``images``common identity``Jquery``unique styles``images`

## [演示](http://jsfiddle.net/LhaEb/)

# android - the alarm doesn't be reset after reboot

> ID：15876179
> 
> 赞同：0
> 
> 时间：2013-04-08T09:54:29.897
> 
> 标签：android, reboot, alarms

I developed a new app what displaying the times for TV shows and i want to make reminders for this times .. that's working good but after reboot all alarms are deleted then i used receiver with `BOOT_COMPLETED` action to retreive data from `database` and reset all `alarms` after reboot directly but it doesn't work

this is my code :

**manifest.xml**

```
<receiver android:name=".NotAlarm" />
        <receiver android:name=".BootCompletedReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

**BootCompletedReceiver.java**

```
package com.shadatv.shada;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.widget.Toast;

public class BootCompletedReceiver extends BroadcastReceiver {

    public DAOTimes timeDatabase;
    Cursor allNotifs;
    AlarmManager am;

    @Override
    public void onReceive(Context context, Intent intent) {
        timeDatabase = new DAOTimes(context);       
        allNotifs = timeDatabase.getAllNotifications();                     

        if (allNotifs.moveToFirst()) {
            do{
                String noPrName = allNotifs.getString(allNotifs.getColumnIndex("_noprname")).toString().trim();
                String noTime = allNotifs.getString(allNotifs.getColumnIndex("_notime")).toString().trim();             

                Intent alarmIntent = new Intent(context, NotAlarm.class);               
                alarmIntent.setAction(noTime);
                alarmIntent.putExtra("nameSelected", noPrName);
                PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                        alarmIntent, PendingIntent.FLAG_CANCEL_CURRENT);
                am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
                am.setRepeating(AlarmManager.RTC_WAKEUP, Long.valueOf(noTime),
                        7 * 24 * 60 * 60 * 1000, pendingIntent);

                Toast.makeText(context,
                        "name : " + Long.valueOf(noTime),
                        Toast.LENGTH_LONG).show();
            }while(allNotifs.moveToNext());     
        }
    }
} 
```

**NotAlarm.java**

```
package com.shadatv.shada;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class NotAlarm extends BroadcastReceiver {

    NotificationManager nm;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        NotificationManager nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

        Notification.Builder builder = new Notification.Builder(context);
        builder.setSmallIcon(android.R.drawable.btn_star);
        builder.setTicker("تذكير");

        Notification notify = builder.getNotification();

        CharSequence title = intent.getExtras().getString("nameSelected");
        CharSequence details = "تذكير - برنامج " + title;

        PendingIntent pending = PendingIntent
                .getActivity(context, 0, new Intent(), 0);
        notify.setLatestEventInfo(context, title, details, pending);

        nm.notify(0, notify);

        Toast.makeText(context,
                "noti : " + title,
                Toast.LENGTH_LONG).show();

    }

} 
```

and for some trace, as you notice i put `Toast` in **`BootCompletedReceiver.java`** and in **`NotAlarm.java`**

**The first `Toast` is displayed after reboot but another one isn't**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:02:10.703

单独注册您的接收器

```
 <receiver android:name=".NotAlarm" />
   <receiver android:name=".BootCompletedReceiver" >
      <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
    </receiver> 
```

像这样写代码

```
 <receiver android:name=".BootCompletedReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
    </receiver> 
```

和

```
 <receiver android:name=".NotAlarm" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
    </receiver> 
```

# python - 将嵌套字典中的 numpy 数组转换为列表，同时保留字典结构

> ID：15876180
> 
> 赞同：4
> 
> 时间：2013-04-08T09:54:33.300
> 
> 标签：python, json, numpy, dictionary

我正在寻找一种方法如何将包含 numpy 数组的嵌套字典转储到 JSON 文件中（以将我的实验和数据的完整日志保存在一个地方）。

我的字典看起来像这样（结构可能比显示的代码更嵌套）：

```
import numpy as np
data = {'foo': {'bar': np.array([1, 2, 3])}, 'goo': np.array([3,5,7]),'fur': {'dur': {'mur': np.array([7,5,8])}}} 
```

目前此代码失败，因为 numpy 数组不可序列化：

```
with open('data.txt','w') as fl:
    json.dump(data,fl) 
```

我知道可以使用 tolist() 函数，但我不知道如何遍历字典，同时保留数据结构并将 np.arrays 交换为列表。

我尝试使用递归从字典中获取单个值，但我不知道如何“重新构建字典”。我目前的代码（没有 json 转储）：

```
import numpy as np

def dict_walk(data):
    for k, v in data.iteritems():
        if isinstance(v, dict):
            dict_walk(v)
        else:
            l = v.tolist()
            print l

data = {'foo': {'bar': np.array([1, 2, 3])}, 'goo': np.array([3,5,7]),'fur': {'dur': {'mur': np.array([7,5,8])}}}
dict_walk(data) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T09:58:11.100

你可以给`json.dump`一个`default`函数；对于 JSON 不知道如何处理的任何数据类型都会调用它：

```
def default(obj):
    if isinstance(obj, np.ndarray):
        return obj.tolist()
    raise TypeError('Not serializable')

with open('data.txt','w') as fl:
    json.dump(data, fl, default=default) 
```

# xml - XML 文件中的数据量是否有最大值

> ID：15876190
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:02.207
> 
> 标签：xml, csv

XML 文件中的数据量是否有最大值？我问的原因是我想从一个 CSV 文件中获取数据，该文件可以包含超过 100.000 个值，并通过 XML 消息发送所有这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:59:31.493

不，但是一个巨大的 XML 文件可能很难处理：由于内存限制，在您访问其内容之前将整个文件加载到内存中的库可能无法使用。

# c++ - 为什么我不能使用列表迭代器逻辑比较运算符？

> ID：15876191
> 
> 赞同：1
> 
> 时间：2013-04-08T09:55:03.260
> 
> 标签：c++, list, stl, iterator

这是非常基本的，但我在这里找不到类似的问题。我正在尝试使用 list 从不同方向迭代相同的排序 STL 列表。我知道我可以将迭代器与`list.begin()`and进行比较`list.end()`，那么为什么这不起作用？

```
list<family>::iterator itLargeFamily = 
                  families.begin(); //starts from the biggest families
list<family>::iterator itSmallFamily = 
                  families.end(); //starts from the smallest families

for (; itSmallFamily > itLargeFamily; --itSmallFamily, ++itLargeFamily) {
    // stuff...
} 
```

错误当然是

> no operator > 匹配这些操作数

100% 的机会我错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:56:49.113

只有随机访问迭代器是有序的。`std::list`迭代器只是双向迭代器，因此它们不支持`operator<`or `operator>`。

相反，您可以与`!=`.

```
while (itSmallFamily != itLargeFamily) 
```

您必须确保迭代器不会相互跳过才能使其正常工作。也就是说，如果`itSmallFamily`距离 仅一个增量`itLargeFamily`，您只需将它们交换过来，它们就永远不会彼此相等。

您可以改为使用`std::vector`，其迭代器是随机访问迭代器。此外，`std::array`和`std::deque`都还支持随机访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:08:36.367

从 sftrabbit 的评论和答案中可以看出，关系运算符只为随机访问迭代器定义，并且`std::list`只有双向迭代器。因此，您的问题有几种解决方案：

1.  使用`std::vector`或`std::array`。它们提供随机访问迭代器，对于较小的尺寸具有更好的性能，并且取决于您如何填充/使用它们以获得较大的尺寸，并且它们具有更好的内存占用。这是首选解决方案，我将其称为“默认”解决方案。仅在有非常好的、可衡量的原因时才使用其他容器（例如，分析器告诉您使用该容器是性能瓶颈）。
2.  由于您知道列表的大小，因此您可以使用计数器进行迭代：

    ```
    for (size_t i = 0, count = families.size()/2; 
         i < count; 
         ++i, --itSmallFamily, ++itLargeFamily)
    { /* do stuff */ } 
    ```

3.  由于您的列表已排序，因此您可以比较迭代器指向的元素，而不是迭代器本身。

# asp.net - 如果有相关实体已被删除，实体框架 5 .Include() 不会加载记录

> ID：15876193
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:04.633
> 
> 标签：asp.net, entity-framework-5, model-binding

我有一个数据库，两个表之间有 1..many 关系，称它们为 Color 和 Car。颜色与 1..many 与 Cars 相关联。就我而言，可以随时删除颜色至关重要。没有级联删除，所以如果一个颜色被删除，汽车的 Color_ID 字段指向不存在的东西。还行吧。它们通过名为 Color_ID 的 FK 关联。

当我这样做时，问题就来了：

```
var query = context.Cars.Include(x => x.Colors); 
```

这仅返回具有关联 Color 记录的 Cars。我真正想要的是所有汽车，即使它们的颜色不存在，所以我可以使用 GridView 进行模型绑定，即 `<asp:Label runat="server" Text='<%# Item.Colors == null ? "Color Deleted!" : Item.Colors %>' />`

如果我删除 .Include() 并诉诸延迟加载，所有这些都可以正常工作。然后 Item.Car.Color 为空。完美的。但是，我非常担心对大量结果集进行过多的数据库查询，这当然是可能的。

避免过多 db 查询的一种解决方案是从数据源查询中返回一个匿名类型，其中包含网格所需的所有特定相关信息位，并将我的所有“Item”样式绑定转换为良好的 'ol Eval()。但后来我失去了强类型，以及 Value Provider 属性带来的简单性。我不想重写所有这些。

我是对的，我必须选择其中一个吗？即使没有颜色记录，如何调整查询以返回所有汽车记录？如果我尝试使用 .Include() 进行急切加载，我想我会搞砸的。我需要一个 .IncludeWithNulls() 之类的东西。

更新：刚想到这个。就查询成本而言，我不知道这有多难看，但它确实有效。有没有更好的办法？？

```
var query = context.Cars.Include(x => x.Colors);
var query2 = context.Cars.Where(x => !context.Colors.Any(y => y.Color_ID == x.Color_ID);
return query.Union(query2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:03:08.767

问题是不正确的末端多重性。我真正需要的不是 1..many，而是 0..many。这样，Entity Framework 会从 .Include() 生成左外连接而不是内连接。这是有道理的，在上面的示例中，实际颜色记录可能为零。让我感到困惑的是，在 SQL 数据库中，我从未将这些外键字段设置为可为空，因为在创建时，它们总是需要有效的外键。所以我将它们设置为可空并修复了我的 .edmx 表，一切正常。我确实不得不在这里和那里添加更多的空检查，例如我上面的问题中的那个，这在以前并不是绝对必要的，因为 .Include 现在正在提取引用缺失相关实体的记录，但没什么大不了的。

因此，我在数据库级别的非空检查上失败了，但我在 LINQ 查询中获得了一些一致的逻辑，这些逻辑与这些表的实际关联方式以及我期望得到的结果有关。

# .net - Net 2.0 Framework Service Pack 2 Issue

> ID：15876194
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:05.357
> 
> 标签：.net, windows-server-2003

I'm trying to install .Net 2.0 Framework Service Pack 2 on a Win 2k8 server which currently has .Net Framework 2.0 SP1, .Net Framework 3.0 SP 2 and .Net Framework 3.5 SP1 installed. The reason for installing SP2 is that I need to install a hotfix for this issue (hanselman.com/blog/…). When I attempt to install the relevant hotfix it tells me nothing on the machine requires it, but this is not the case. The older definition files are still present. I am able to install on a second machine with the only difference being the lack of an SP2 for .Net 2.0, which is one of the pre-requisities.

When I try to run the SP 2 installer it immediately ends and displays a screen with Setup Error. No other information is shown. If I check the event viewer it shows a single related Information entry saying “Product: Microsoft .NET Framework 2.0 SP2 -- Installation completed successfully.” Having checked the Installed Updates/Programs I know this is not the case.

Any ideas what could cause this or how to debug?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:30.593

3.5 SP1 已包含 2.0 SP2 将安装的所有更新。所以没有什么可做的，你可以说。你没有问题。

# cpu-cache - 手动刷新直写缓存

> ID：15876200
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:27.020
> 
> 标签：cpu-cache

如果将 CPU 缓存实现为直写缓存，手动刷新 CPU 缓存是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:46:07.573

当一个单词通过存储指令写入直写 (WT) 缓存时，它也会被发送到内存层次结构的下一层（[参见 wikipedia 上的缓存条目](http://en.wikipedia.org/wiki/Cache_%28computing%29)）。因此，WT 缓存中的缓存块是干净的，也就是说，与它们在下一级的副本一致，并且不需要回写。

在导致缓存内容陈旧的直接内存访问 (DMA) 的情况下，可能需要 WT 失效，但据我所知，这些不是手动操作，而是操作系统或硬件驱动的。

与手动刷新相关，例如根据英特尔架构软件开发人员手册（第 2 卷，指令集参考）：

WBINVD — 写回并使缓存无效 该指令将处理器内部缓存中所有已修改的缓存行写回主存储器并使内部缓存无效（刷新）。

所以我认为，在 WT 缓存的情况下，该指令只会使所有缓存行无效。

# php - why email is not sent in Windows server by drupal?

> ID：15876205
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:31.107
> 
> 标签：php, drupal

I am an ASP.net programmer and don't know much about drupal cms.

In my website I have a `registration web page(form)` that sends the `registration form` to a specified email.

Previously it worked properly. but we moved server from `linux` to a `windows server` with `IIS` not `apache`. now the registration form is not sent to specified email. whats wrong? Should I change the sender email address in drupal?? If so how to set password and smtp address?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:59:51.233

Drupal 使用 PHP ini 文件中定义的外发邮件服务器。如果您无法更新/编辑它，那么最好使用[SMTP 身份验证支持](http://drupal.org/project/smtp)模块。

另请参阅以下链接：

1.  [http://drupal.org/node/1229932](http://drupal.org/node/1229932)
2.  [http://forums.iis.net/t/1164375.aspx/1](http://forums.iis.net/t/1164375.aspx/1)

# maven - 如何开源一个 Maven 插件？

> ID：15876211
> 
> 赞同：3
> 
> 时间：2013-04-08T09:55:41.313
> 
> 标签：maven, maven-plugin

我有一个想与外界分享的 Maven 插件。是否有官方的 Maven 存储库我也可以部署这个插件？涉及哪些步骤？

非常感谢任何指向文档的链接

我一直在阅读[http://www.sonatype.com/people/2008/11/adding-a-jar-to-a-maven-repository-with-sonatype-nexus/](http://www.sonatype.com/people/2008/11/adding-a-jar-to-a-maven-repository-with-sonatype-nexus/)但这似乎只是描述部署到内部Nexus 存储库，我想部署到外部存储库，以便任何用户都可以使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:33:49.237

我会推荐：

*   [在Github](http://www.github.com/)中设置一个帐户，以便有一个地方来托管您的源代码。
*   [在 Cloudbee 的BuildHive](https://buildhive.cloudbees.com/)中设置一个帐户。这是用于开源项目的免费 Jenkins CI。这将在每次推送到 Github 时测试您的项目。
*   请求[将您的项目发布到 Maven Central 的权限](http://central.sonatype.org/pages/ossrh-guide.html)。

带有请求的位通常需要大约一天的时间，然后您就可以直接将代码发布到 Maven Central。

# jquery - 发布项目后对话框未在服务器中加载视图

> ID：15876212
> 
> 赞同：2
> 
> 时间：2013-04-08T09:55:44.283
> 
> 标签：jquery, asp.net-mvc, dialog

在这里，我正在尝试使用 jquery 在对话框中加载部分视图。这是我的代码：

```
 $('#newdialog').dialog({
            autoOpen: false,
            width: 900,
            top: 76,
            resizable: false,
            title: 'Modify Add image',
            modal: true,
            open: function (event, ui) {
                //Load the CreateAlbumPartial action which will return 
                // the partial view _CreateAlbumPartial
                // alert(idimg);
                $(this).load("@Url.Action("GridView1","LandingSetting")");
            },
            buttons: false,
            //            {
            //                "Close": function () {
            //                    $(this).dialog("close");
            //                }
            //            },
            position: {
                my: 'top',
                at: 'top',
                of: $('.maindiv')
            }

        }); 
```

我的查看代码：

```
@{
    ViewBag.Title = "GridView";
    Layout = null;
}
<h2>
</h2>
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Home</title>
</head>
<body>
    <table border="0" align="center" cellpadding="0" cellspacing="0">
        <tr>
            <td>
                <div id="HOME" style="overflow: auto; height: 560px; width: 880px; background-color: #E0E0E0;
                    color: White;">
                    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "adform" }))
                    {
                        if (Model.Count == 0)
                        {

                        <h1 align="center">
                            Sorry No Ads Found! Please Add some ads.</h1>
                        }

                        else
                        {
                        <table>
                            <tr>
                                @{
                            int crow = 1;
                            foreach (var item in Model)
                            {
                                    <td>
                                        <ul style="list-style: none;">
                                            <li>
                                                <img src="@item.banner" width="250" height="170" />
                                            </li>
                                            <li>
                                                <input id="@item.banner" type="radio" name="one" value="@item.banner" />
                                            </li>
                                        </ul>
                                    </td>
                                if (crow % 2 == 0)
                                {                                                    
                                    <tr>
                                        <td style="width: 285px; height: 50px">
                                        </td>
                                    </tr>

                                }
                                crow++;

                            }

                                }
                            </tr>
                        </table>

                        <input id="Submit1" type="submit" value="submit" />
                        }
                    }
                </div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

此代码**在 localhost 中运行良好**。但是当我**发布我的项目**并在服务器上运行它时，**对话框打开但部分视图未加载其中**。我做错了什么？谁能帮忙。谢谢

**编辑：jquery 代码在我的主视图上，它有一个布局页面参考以及所需的 jquery 参考。在该页面中，如果我单击一个按钮，则应打开对话框，并且应在其中加载上述视图。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:05:18.347

我感觉这是由跨域请求引起的。如果您的操作 url 指向不同的主机（甚至可能是子域），您的控制台中将出现错误，说明您无法发出此类请求。无论如何，如果您的控制台确实输出了一些东西，请告诉我们。

否则，请尝试从局部视图中删除 doctype、html、head、body 等标签，您的页面上已经有了这些标签，无需创建糟糕的嵌套情况。

# sql-server - 如何从字符串中获取 WHERE 子句中的“奇异”值？

> ID：15876213
> 
> 赞同：0
> 
> 时间：2013-04-08T09:55:45.170
> 
> 标签：sql-server, ssis

我有一个变量`@text varchar`，它有一些由符号分隔的值，无论我选择它是什么。前任：

```
declare @text varchar
set @text='John^Marry^Smith^Ane^Sue^' 
```

我需要删除一些数据，但因为它是不同的服务器和数据库（一个很长的故事），我必须在 WHERE 子句中指定我的字符串中的值，如下所示：

```
Delete Employers where employer_name in ('John','Marry','Smith','Ane','Sue') 
```

这可以做到吗？最重要的是没有任何其他对象，如过程或函数？

最好的问候， 波格丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:05:42.913

如果我正确理解了您的问题，那么答案是肯定的，就在您已​​经说明的情况下。您可以使用以下条带将字符串转换为表格。如果您将返回表声明为表变量，那么您可以将它作为一个

```
DELETE where EXISTS(....)

Create function [dbo].[atf_BarListToTable]
    (@list ntext)
RETURNS @tbl TABLE (ListPosn int IDENTITY(1, 1) NOT NULL,
                          SString  VARCHAR(1028) NOT NULL) AS
BEGIN
    DECLARE @pos int
    DECLARE @textpos int
    DECLARE @ChunkLength smallint
    DECLARE @str nvarchar(4000)
    DECLARE @tmpstr nvarchar(4000)
    DECLARE @leftover nvarchar(4000)
    SET @textpos = 1
    SET @leftover = ''
    WHILE @textpos <= datalength(@list) / 2
    BEGIN
        SET @ChunkLength = 4000 - datalength(@leftover) / 2
        SET @tmpstr = ltrim(@leftover + substring(@list, @textpos, @ChunkLength))
        SET @textpos = @textpos + @ChunkLength
        SET @pos = charindex('|', @tmpstr)
        WHILE @pos > 0
            BEGIN
                SET @str = substring(@tmpstr, 1, @pos - 1)
                INSERT @tbl (SString) VALUES( @str)
                SET @tmpstr = ltrim(substring(@tmpstr, @pos + 1, len(@tmpstr)))
                SET @pos = charindex('|', @tmpstr)
            END
        SET @leftover = @tmpstr
    END
    IF ltrim(rtrim(@leftover)) <> ''
        INSERT @tbl (SString) VALUES(@leftover)
    RETURN
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:24:37.557

最简单的方法：将您的 SQL 查询生成为字符串，`replace`用于形成您的`in`列表，然后执行它。

```
declare @sqlquery nvarchar(max)
set @sqlquery = 'Delete Employers where employer_name in (''' + replace(@text, '^', ''',''') + ''')'
EXEC sp_executesql @sqlquery 
```

# magento - 高级搜索结果没有出现在主页上的 magento 中

> ID：15876214
> 
> 赞同：1
> 
> 时间：2013-04-08T09:55:47.107
> 
> 标签：magento, magento-1.7

我通过将此代码放在 /app/design/frontend/default/hellowired/template/page/2columns-right.phtml 中，在我的主页上添加了高级搜索选项

```
<div> 
<?php  echo
$this->getLayout()->createBlock('catalogsearch/advanced_form')->setTemplate('catalogsearch/advanced/form.phtml')->toHtml() 
?>
</div> 
```

![在此处输入图像描述](https://i.stack.imgur.com/8FoSv.png)

当按下提交按钮时，它什么也没给我。所以**结果没有显示...**请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:20:37.580

检查您是否将表单的帖子网址设为 {{base-url}}/catalogsearch/advanced/result/

# c# - C# 等效于 Java 的 timer.scheduleAtFixedRate

> ID：15876219
> 
> 赞同：2
> 
> 时间：2013-04-08T09:56:01.757
> 
> 标签：c#, timer

我需要一种每 5 分钟准确运行一次的方法。我不能使用 Timer，因为我注意到它会慢慢变得不同步（即它最终会在 00:01、00:06、00:11、00:16 等时间运行）。

虽然它需要准确，但我不需要它太精确。每 5 分钟 +/- 1 秒就可以了，只要经过几天的跑步，它仍然会在 5 分钟标记上准确滴答。

到目前为止，我想到的是创建一个间隔为 1 秒的计时器，它不断检查 DateTime.Now 以查看下一个 5 分钟标记是否已通过。我想知道是否有更优雅的解决方案或我错过的 C# 库中的某些内容。

**编辑：**我现在有以下模板，可以满足我的要求。

```
public class ThreadTest
{
    private Thread thread;
    private long nextExecutionTime;
    private long interval;

    public void StartThread(long intervalInMillis)
    {
        interval = intervalInMillis * TimeSpan.TicksPerMillisecond;
        nextExecutionTime = DateTime.Now.Ticks;
        thread = new Thread(Run);
        thread.Start();
    }

    private void Run()
    {
        while (true)
        {
            if (DateTime.Now.Ticks >= nextExecutionTime)
            {
                nextExecutionTime += interval;
                // do stuff
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:27:07.353

如果您对 Timer 不满意？

那么**你可以尝试让你的线程休眠 5 分钟，而不是使用 Timer**

看看这个，希望对你有帮助

```
using System;
using System.Threading;

public class Worker
{
    // This method will be called when the thread is started.
    public void DoWork()
    {
        while (!_shouldStop)
        {
            Task.Factory.Start(() => 
               {
                    // do you task async
               })
            Thread.Sleep(300000);
        }
    }

    public void DoWork2()
    {
        var watch = new Stopwatch();
        while (!_shouldStop)
        {
            watch.Start();
            Task.Factory.Start(() => 
               {
                    // do you task async
               })

            while(watch.Elapsed.ElapsedMilliseconds < 300000);
            watch.Stop();
            watch.Reset();
        }
    }

    public void RequestStop()
    {
        _shouldStop = true;
    }

    private volatile bool _shouldStop;
}

public class WorkerThreadExample
{
    static void Main()
    {
        // Create the thread object. This does not start the thread.
        Worker workerObject = new Worker();
        Thread workerThread = new Thread(workerObject.DoWork);

        // Start the worker thread.
        workerThread.Start();

        // Loop until worker thread activates.
        while (!workerThread.IsAlive);

        while (true)
        {
            //do something to make it break
        }

        // Request that the worker thread stop itself:
        workerObject.RequestStop();
        workerThread.Join();
    }
} 
```

或者你可以试试这个：

# javascript - 布局类似于 google chrome 应用程序选项卡

> ID：15876225
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:56:15.387
> 
> 标签：javascript, jquery, html, css, google-chrome

我想使用多列反应式布局，其中每列将有一个图像并在标题下方，如 google chrome 应用程序选项卡中使用的那样。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:29:46.563

也许你可以用缩略图做到这一点。您可以使用表格网格布局，以便它们对齐。

这里有一个演示。[http://designshack.net/tutorialexamples/cssthumbnailgrid/](http://designshack.net/tutorialexamples/cssthumbnailgrid/)

这里的教程：http: [//designshack.net/articles/css/creating-a-css-thumbnail-grid-with-dynamic-flyout-menu/](http://designshack.net/articles/css/creating-a-css-thumbnail-grid-with-dynamic-flyout-menu/)

您可以制作一个网格布局并将图像放在那里并在其上方放置一个标题。

更多关于网格布局：[http ://www.ehow.com/how_6317944_make-table-grid.html](http://www.ehow.com/how_6317944_make-table-grid.html)

希望它可以帮助你。我认为没有其他方法可以做到这一点。但是当我遇到更好的解决方案时，我会编辑这个答案。

# javascript - 咖啡脚本中的 d3 回调中的 this 和 _this

> ID：15876228
> 
> 赞同：0
> 
> 时间：2013-04-08T09:56:22.680
> 
> 标签：javascript, coffeescript, d3.js

我有一个使用 d3 创建的元素，如下所示：

```
redraw:()->
  #
  points = d3.select(".point").data( the_data )
  points.enter().append("g").classed("point").on("click", @on_click )

on_click:(d,i)-> 
  matrix = this.getScreenCTM()
  # do some stuff
  @popup.show(params) 
```

`popup`是一个有方法的成员对象`show()`。

问题是在`on_click()`回调中我需要它既是 DOM 对象又是实例，以便我可以引用数据成员`popup`。

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:07:53.957

一种选择是返回一个在另一个引用原始 this 时关闭的函数：

```
on_click: do ->
  self = this
  return (d,i) -> 
    matrix = this.getScreenCTM()
    self.popup.show(params) 
```

这样当函数被事件处理程序调用时，`this`是DOM元素，并`self`引用原始`this`对象。当然，这个解决方案意味着你失去了速记`@`符号。

# vb.net - 遍历表单控件时如何检查复选框是否被选中

> ID：15876229
> 
> 赞同：1
> 
> 时间：2013-04-08T09:56:25.803
> 
> 标签：vb.net, forms, checkbox

我正在尝试为表单上的每个复选框设置一个注册表项，但在以下代码块中，我收到了错误`'Checked' is not a member of 'System.Windows.Forms.Control'`

有人可以帮我找出我收到此错误的原因吗？

```
' Create the data for the 'Servers' subkey
Dim SingleControl As Control    ' Dummy to hold a form control
For Each SingleControl In Me.Controls
    If TypeOf SingleControl Is CheckBox Then
        Servers.SetValue(SingleControl.Name, SingleControl.Checked) ' Error happening here
    End If
Next SingleControl 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:02:50.030

在使用 Checked 属性之前，您应该将控件转换为 CheckBox。
您直接使用 Control 变量，并且这种类型 (Control) 没有 Checked 属性

```
Dim SingleControl As Control    ' Dummy to hold a form control
For Each SingleControl In Me.Controls
    Dim chk as CheckBox = TryCast(SingleControl, CheckBox)
    If chk IsNot Nothing Then
        Servers.SetValue(chk.Name, chk.Checked) 
    End If
Next 
```

更好的方法可能是使用 `Enumerable.OfType`

```
Dim chk As CheckBox
For Each chk In Me.Controls.OfType(Of CheckBox)()
    Servers.SetValue(chk.Name, chk.Checked) 
Next 
```

这消除了将通用控件转换为正确类型并测试转换是否成功的需要

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T10:01:31.130

试试这个代码，

```
Dim SingleControl As Control
For Each SingleControl In Me.Controls
    If TypeOf SingleControl Is CheckBox Then
        'control does not have property called checked, so we have to cast it into a check box.
        Servers.SetValue(CType(SingleControl, CheckBox).Name, CType(SingleControl, CheckBox).Checked)         End If
Next SingleControl 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T10:03:29.347

`Checked`是`CheckBox`类的属性，而不是`Control`其父类。

您要么必须向下转换`Control`为 a`Checkbox`才能访问该属性`Checked`，要么必须将复选框存储为`CheckBox`集合而不是`Control`集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:08:23.897

试试这个：

```
For Each SingleControl As Control In Me.Controls
    If TypeOf SingleControl Is CheckBox Then
        Dim auxChk As CheckBox = CType(SingleControl, CheckBox)
        Servers.SetValue(auxChk.Name, auxChk.Checked)
    End If
Next SingleControl 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:29:53.403

使用我的扩展方法获取表单上的所有控件，包括表单中其他容器内的控件，即面板、组框等。

```
<Extension()> _
Public Function ChildControls(Of T As Control)(ByVal parent As Control) As List(Of T)
    Dim result As New ArrayList()
    For Each ctrl As Control In parent.Controls
        If TypeOf ctrl Is T Then result.Add(ctrl)
        result.AddRange(ChildControls(Of T)(ctrl))
    Next
    Return result.ToArray().Select(Of T)(Function(arg1) CType(arg1, T)).ToList()
End Function 
```

用法：

```
Me.ChildControls(Of CheckBox). _
    ForEach( _
        Sub(chk As CheckBox)
            Servers.SetValue(chk.Name, chk.Checked)
        End Sub) 
```

# .net - 反应式扩展与事件聚合器

> ID：15876230
> 
> 赞同：3
> 
> 时间：2013-04-08T09:56:28.860
> 
> 标签：.net, system.reactive, eventaggregator

我是反应式扩展的新手。我知道 Rx 会观察底层对象的任何更改（在运行时），并在更改时通知订阅者。

考虑事件的 Rx，它检查任何事件并将这些更改发布到订阅。同样，我们有事件聚合器，它将事件发布给订阅者。两者都在做同样的工作。两者都有相同的目的。我们两者之间有什么区别吗？

感谢您的答复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:08:48.483

## 咆哮

以我的经验，EventAggregator 是单例，它颠倒了职责的方向，以便 UI 可以相互发送消息并破坏域抽象。我个人认为 EventAggregators（特别是 Prism）是对错误问题的正确答案。

一般来说，我认为在使用 EventAggregator 的地方，应该将它们替换为对适当域实体或服务的调用，这可能会将操作的结果公开为事件（Rx 或其他）。现在使用 IoC 相关方可以将相关实现注入其中，然后他们可以订阅事件（再次 Rx 或其他方式）。

——吐槽——

但是，为了更好地回答您的实际问题，我认为如果您确实使用 EventAggregator，您的问题可能实际上是“我应该将通知公开为 .net 事件还是 Rx Observable 序列（IObservable）”

我在这种情况下，我看不出有什么不同。如果不需要调度/并发控制、事件/通知的组合或序列的转换（如节流或缓冲），那么您当前使用事件就可以了。

# c# - 如何添加自定义 TFS CheckinNoteDefinitions？

> ID：15876235
> 
> 赞同：3
> 
> 时间：2013-04-08T09:56:34.390
> 
> 标签：c#, tfs, tfs-sdk, git-tfs

使用 TFS 2012 客户端 C# API，我可以将 CheckinNotes 添加到每个提交；CheckinNotes 需要为每个 CheckinNoteFieldValue 设置一个合适的 CheckinNoteFieldDefinition，否则 checkin 会被拒绝并抛出异常。

如何将其他（自定义）CheckinNoteFieldDefinitions 添加到 tfs 服务器？

我并没有真正从 MSDN 文档中获得任何有用的信息。

相关 MSDN 链接：

*   [CheckinNoteFieldValue](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.checkinnotefieldvalue.aspx)
*   [CheckinNoteFieldDefinition](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.checkinnotefielddefinition.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T23:04:13.517

一旦您使用任何自定义签入说明签入，它就会由服务器动态创建：

```
var checkinNoteFieldValues = new[]
{
    new CheckinNoteFieldValue("Custom Note", "some value"),
    new CheckinNoteFieldValue("Other Note", "other value")
};
var checkinNote = new CheckinNote(checkinNoteFieldValues);
var pendingChanges = workspace.GetPendingChanges(); // workspace is Microsoft.TeamFoundation.VersionControl.Client.Workspace
workspace.CheckIn(pendingChanges, "comment", checkinNote, null, null); // checkinNote will trigger a new CheckinNoteFieldDefinition 
```

# uitableview - 添加 UITableViewController.h 和 .m

> ID：15876236
> 
> 赞同：0
> 
> 时间：2013-04-08T09:56:35.593
> 
> 标签：uitableview, tableview

我有点绝望，因为我现在尝试了很多天来将 UITableViewController 添加到我的一个 TableView 中。我使用 - 文件 - 新文件 - Objective-C 类 - UITableViewController 的子类创建了文件。

当我为 TableView 提供我的新 UITableViewController 的自定义类并在模拟器中运行它时，我总是收到此消息

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; THREAD1：信号 SIGABRT

有谁知道我做错了什么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:12:11.377

你从哪里得到这个功能的`dequeueReusableCellWithIdentifier: forIndexPath`？试试这个。

```
UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

# jsf - 在 inline-text 中将 double 转换为 int

> ID：15876237
> 
> 赞同：0
> 
> 时间：2013-04-08T09:56:38.130
> 
> 标签：jsf, casting, converter

```
<o:importFunctions type="java.lang.Math" />//omnifaces, see http://showcase.omnifaces.org/taghandlers/importFunctions
<c:set var="ordersToShow" value="${Math:min(5, processedOrders.size())}" /> // processedOrders is a List
<p:fieldset legend="Last Stuff (${ordersToShow})">[...]</p:fieldset> 
```

${ordersToShow} 是 java.lang.Double 类型（“${ordersToShow.class}”的输出）并打印某事。像“最后的东西2.0”。

我想要像“Last Stuff 2”这样的输出，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:49:54.917

f:convertNumber 如果在内部使用，将为 p:fieldSet 抛出错误（Parent 不是 ValueHolder 的实例）。

相反，您可以在托管 bean 中保留一个字符串，并在它的 getter 中使用`String.format("%.0f", ordersToShow);`

否则为 fieldSet 保留一个绑定变量，并在 bean 中设置上述格式化值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T10:01:00.877

您可以使用 f:convertNumber。保持 minFractionDigits="0" 应该可以解决问题。

见这里[http://www.tutorialspoint.com/jsf/jsf_convertnumber_tag.htm](http://www.tutorialspoint.com/jsf/jsf_convertnumber_tag.htm)

我没有使用 p:fieldset 所以现在确定如何将 f:convertNumber 与图例一起使用，但似乎不可能。

您可以使用它，将 c:set 和 p:fieldset 行替换为以下内容。fmt 标签在这里解释[http://www.tutorialspoint.com/jsp/jstl_format_formatnumber_tag.htm](http://www.tutorialspoint.com/jsp/jstl_format_formatnumber_tag.htm)

```
<fmt:formatNumber var="ordersToShow" type="number" maxFractionDigits="0" value="${...}" />
<p:fieldset legend="Last Stuff (${ordersToShow})">[...]</p:fieldset> 
```

# css - 位置固定的元素

> ID：15876242
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:56:47.237
> 
> 标签：css, position

我需要将元素的位置设置为固定，因为我想将它用作可滚动 div 中的标题。我还需要在 top:0 和 right:0 指定元素位置

如果我一起使用这些属性，它就不起作用。我该如何解决这个问题；

```
 position:absolute;
 top:0;
 right:0; 
```

有效，但我需要固定位置..

如果我使用固定位置，则 div 是整个文档的位置，而不是在我附加它的 div 内...

小提琴：http: [//jsfiddle.net/TP2cp/](http://jsfiddle.net/TP2cp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:58:42.083

谁说你不能一起使用这些属性？

```
position:fixed;
top:0;
right:0; 
```

在这个示例 jsFiddle [**here**](http://jsfiddle.net/KDZQz/)中自己尝试一下。

**HTML：**

```
<div id="theDiv">Example Div</div> 
```

**CSS：**

```
#theDiv { position:fixed; top:0px; right:250px; } 
```

* * *

**回复 OP 的编辑：**

你不能在这样的容器 div 内有一个固定的定位 div，因为使它成为一个固定的 div**会使它脱离 flow**。如果您打算将其固定在另一个 div 中，则应该`position:absolute`在容器 div 中使用。`position:relative`

看看我的新 jsFiddle [**here**](http://jsfiddle.net/HFjU6/932/)。

**HTML：**

```
<div id="container">
    Container Div
    <div id="fixed">Child Div</div>
</div> 
```

**CSS：**

```
#container {
    width: 400px;
    position:relative;
}

#fixed {
   position:absolute;
   top:0px;
   right:0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:01:28.710

使用`position:fixed`.

例子：

**HTML**

```
<div class="main">
    <div id="header"><p>Header</p></div>
</div> 
```

**CSS**

```
.main{
    width:100%;
    height:2000px;
}

#header{
    width:100%;
    height:100px;
    position:fixed;
    top:0;left:0;
    background:yellow;
} 
```

[JSF](http://jsfiddle.net/m8Y3q/)中。

**更新**

一个解决方案`width:inherit;`：

[JSFiddle#2](http://jsfiddle.net/TP2cp/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:59:31.670

为什么不：

```
position:fixed;
top:0;
right:0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:05:00.187

问题是你是如何定位可滚动的 div 的？如果我明白你想要什么我想你只需要将标题放在可滚动的 div 之外

# jquery - 使用 ajax 填充 CKEditor 的对话框并获得响应

> ID：15876249
> 
> 赞同：2
> 
> 时间：2013-04-08T09:57:14.173
> 
> 标签：jquery, ckeditor, html-object

我有一个与 CKEditor 的对话框有关的特殊问题。我设法将一个 php 文件（包含数据表）嵌入到对话框窗口中。然后用户可以选择将插入到 CKEditor 中的行。

将 HTML 嵌入对话窗口似乎很容易：

```
CKEDITOR.dialog.add( 'tableDialog', function( editor ) {
    return {
        title: 'parametres',
        minWidth: 800,
        minHeight: 500,
        contents: [
            {
                id: 'tab-basic',
                label: 'Basic Settings',
                elements: [
                    {
                    type:"html",
                    id:"htmlPreview",
                    style:"width:95%;height:95%;",
                    html:test_HTML,
                        commit: function( element ) {
etc.. 
```

有趣的是，填充变量“test_HTML”很棘手。将其定义为 HTML 对象非常有效：

```
test_HTML = '<object type="text/html" data="http://entseditor.etest.ee/edit/mm_insert.php" style="width:100%; height:100%"><p></p></object>'; 
```

，使用 jQuery ajax 会失败：

```
var request = $.ajax({
  url: "http://entseditor.etest.ee/edit/mm_insert.php",
  //type: "POST",
  //data: {id : menuId},
  dataType: "html"
});

request.done(function(msg) {
  //$("#asdasd").html( msg );
    test_HTML =  msg ;
  //alert( 'success' + test_HTML );
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

（请求很好，并且对 id='asdasd' 给出了正确的响应，但 CKEditor 对话框窗口显示：“未捕获的类型错误：无法调用未定义的方法 'charAt'”。而且两个 HTML 看起来仍然相同。）

现在使用该对象没有问题，但是我似乎无法从创建的#document 中获得响应。我尝试过变量和隐藏字段，但无法从“父”文档中访问它们。

有人对 CKEditor 这方面有经验吗？

（如果我没有以适当的方式解释所有内容，我很抱歉..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:24:39.297

很难了解全局，但感觉就像是同步/异步问题。您是否在设置变量后确定访问该变量？即使`request.done`函数是在`CKEDITOR.dialog.add`实际调用之前声明的，由于它是异步调用，因此在运行`test_HTML = msg ;`之后可能会被调用。`CKEDITOR.dialog.add`

这意味着当 ajax 加载时，JavaScript 会继续运行并执行`CKEDITOR.dialog.add`，因此它`test_HTML`仍然是未定义的。在任何代码访问它之前尝试将其设置为 100% 肯定设置的默认值，并且可能尝试遵循执行代码的顺序。

# c++ - 如何强制 MIDL 编译器在 Visual Studio 2010 中使用“C++ 模式”而不是“C 模式”？

> ID：15876252
> 
> 赞同：3
> 
> 时间：2013-04-08T09:57:18.397
> 
> 标签：c++, visual-studio-2010, com, migration, midl

我的问题很简单，但我不知道如何解决：我有一个 Visual Studio 2010 项目，其中包含用于生成 COM 类型库的 idl 文件。该项目最初由 VC++ 6.0 创建。VC 6.0 可以编译这个项目而没有任何错误。但我最近对其进行了转换并继续尝试在 VC 2010 中对其进行编译。我总是收到以下控制台输出消息：

```
1>------ Build started: Project: myProject, Configuration: Debug Win32 ------ 
1>Build started 08.04.2013 11:23:12.
1>InitializeBuildStatus:
1>  Touching ".\Debug\myProject.unsuccessfulbuild".
1>Midl:
1> Processing .\myFile.idl
1>  myProject.idl
1>C:\Programme\Microsoft Visual Studio 10.0\VC\include\typeinfo(29): fatal error C1189: #error :  This header requires a C++ compiler ...
1>
1>midl : command line error MIDL1003: error returned by the C preprocessor (2)
1>
1>Build FAILED. 
```

我已经发现这仅意味着 MIDL 在“C 模式”中调用编译器，而不是在“C++ 模式”中。该项目既不包含 .c 也不包含 .cpp，只有 .h 和 .idl 文件：C/C++ 部分在项目属性页中不可用。我尝试添加一个 dummy.cpp 文件，以使缺少的部分可用并能够在其中默认 C++ 编译器。

Midl 文件如下所示：

```
import "unknwn.idl";

//Globale Definitionen
#include "MyProjectGlobaleDefinitionen.h"

//Interfacedeklarationen

interface IMyProjectDcomSchnittstellen;

[

uuid(E6C14CB3-CFFE-11d4-B1A2-00104BC1A971),
helpstring(MyProject_SCHNITTSTELLE_RELEASE_2_HELPSTRING),
version (MyProject_SCHNITTSTELLE_VERSIONSNUMMER)

]

library MyProject_SCHNITTSTELLE_KURZBEZEICHNER

{

    importlib("..\\..\\..\\Files\\DLL\\stdole32.tlb");
    importlib("..\\..\\..\\Files\\DLL\\MSADO15.dll");

    //  #include "..\..\common\Hresult_Werte.h"
#include "MyProjectDcomSchnittstellenTypdefinitionen.idl"

#include "IObj1ManagerMyProject.idl"
#include "IObj1ManagerMyProjectEvents.idl"

#include "IObj2Manager.idl"
#include "IObj2NotifySink.idl"

    //************ Obj2Manager **************************
    [uuid(F0284CF2-8E24-11d4-8941-006097AA387A)]

        coclass Obj2Manager
    {
        [default] interface IObj2Manager;
        [default, source] interface IObj2NotifySinkEvents;
    }

    //************ Obj1ManagerMyProject ************************
    [uuid(E6C14CB2-CFFE-11d4-B1A2-00104BC1A971)]

        coclass Obj1ManagerMyProject
    {
        [default] interface IObj1ManagerMyProject;
        [default, source] interface IObj1ManagerMyProjectEvents;

    }   
};                                                //Ende library Obj1_myProject 
```

如何强制 MIDL 在“C++ 模式”下调用编译器/预处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:31:50.723

这不应该

```
#include "MyProjectDcomSchnittstellenTypdefinitionen.idl"

#include "IObj1ManagerMyProject.idl"
#include "IObj1ManagerMyProjectEvents.idl"

#include "IObj2Manager.idl"
#include "IObj2NotifySink.idl" 
```

实际上是这个

```
import "MyProjectDcomSchnittstellenTypdefinitionen.idl"

import "IObj1ManagerMyProject.idl"
import "IObj1ManagerMyProjectEvents.idl"

import "IObj2Manager.idl"
import "IObj2NotifySink.idl" 
```

[好的......这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366773%28v=vs.85%29.aspx)怎么样：

此页面仅适用于有特定理由将 Microsoft C/C++ 预处理器替换为 MIDL 使用的预处理器的开发人员，或必须指定自定义预处理器开关的开发人员。MIDL 开关 /cpp_cmd、/cpp_opt 和 /no_cpp 用于覆盖编译器的默认行为。通常没有理由替换 Microsoft C/C++ 预处理器，也没有指定自定义预处理器开关的理由。

MIDL 编译器在 IDL 文件的初始处理期间使用 C 预处理器。编译 IDL 文件时使用的构建环境与默认的 C/C++ 预处理器相关联。如果要使用不同的预处理器，MIDL 编译器开关 /cpp_cmd 启用默认 C/C++ 预处理器名称的覆盖：

```
midl /cpp_cmd preprocessor_name filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:13:15.733

在包含文件`MyProjectGlobaleDefinitionen.h`中有一个包含存在。我只需要删除这个包含，因为它根本不需要。

# jsf - f:setPropertyActionListener 没有设置值但是触发了动作

> ID：15876257
> 
> 赞同：3
> 
> 时间：2013-04-08T09:57:29.423
> 
> 标签：jsf, primefaces

`p:fieldset`每当切换时，我都需要设置一个布尔字段。我尝试了以下代码，但 f:setPropertyActionListener 从未设置该字段，尽管在切换时调用了 p:ajax 侦听器。我尝试了以下代码。

```
 <p:fieldset legend="(Optional) Link.." toggleable="true">
        <p:ajax event="toggle" listener="..">
            <f:setPropertyActionListener target="#{viewScope.rendrUsrProjctsList}" value="#{true}"/>
        </p:ajax>
    </p:fieldset> 
```

但是，当我尝试如下修改代码时，字段已成功设置：

```
 <p:fieldset legend="(Optional) Link.." toggleable="true">
        <p:ajax event="toggle" listener="#{view.viewMap.put('rendrUsrProjctsList', true)}" />
        <p:ajax event="toggle" listener=".."/>
        </p:ajax>
    </p:fieldset> 
```

我想问一下：

1.  为什么第一种方法不起作用？
2.  以第二种方式将多个附加`p:ajax`到单亲是否不好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T14:01:53.237

该[`<f:setPropertyActionListener>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/setPropertyActionListener.html)作品[`ActionListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ActionListener.html)仅作为实现[`ActionSource`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ActionSource.html)接口的组件上的实现，例如[`UICommand`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UICommand.html)ie`<h:commandXxx>`等`<p:commandXxx>`。`<p:ajax>`不实现此接口，因此`<f:setPropertyActionListener>`基本上完全忽略了 。

至于您的解决方法，您可以这样做，尽管我宁愿只使用具体的视图范围 bean 或将其包装在具有支持组件的复合材料中。

# python - TypeError：“过滤器”对象不可下标

> ID：15876259
> 
> 赞同：45
> 
> 时间：2013-04-08T09:57:30.087
> 
> 标签：python, python-idle

我收到错误

```
TypeError: 'filter' object is not subscriptable 
```

尝试运行以下代码块时

```
bonds_unique = {}
for bond in bonds_new:
    if bond[0] < 0:
        ghost_atom = -(bond[0]) - 1
        bond_index = 0
    elif bond[1] < 0:
        ghost_atom = -(bond[1]) - 1
        bond_index = 1
    else: 
        bonds_unique[repr(bond)] = bond
        continue
    if sheet[ghost_atom][1] > r_length or sheet[ghost_atom][1] < 0:
        ghost_x = sheet[ghost_atom][0]
        ghost_y = sheet[ghost_atom][1] % r_length
        image = filter(lambda i: abs(i[0] - ghost_x) < 1e-2 and
                       abs(i[1] - ghost_y) < 1e-2, sheet)
        bond[bond_index] = old_to_new[sheet.index(image[0]) + 1 ]
        bond.sort()
        #print >> stderr, ghost_atom +1, bond[bond_index], image
    bonds_unique[repr(bond)] = bond

# Removing duplicate bonds
bonds_unique = sorted(bonds_unique.values()) 
```

和

```
sheet_new = [] 
bonds_new = []
old_to_new = {}
sheet=[]
bonds=[] 
```

错误发生在该行

```
bond[bond_index] = old_to_new[sheet.index(image[0]) + 1 ] 
```

很抱歉，此类问题已多次发布，但我对 Python 还很陌生，并不完全理解字典。我是在尝试以不应该使用的方式使用字典，还是应该在不使用字典的地方使用字典？我知道修复可能非常简单（尽管对我来说不是），如果有人能指出我正确的方向，我将不胜感激。

再次，如果这个问题已经得到回答，我深表歉意

谢谢，

克里斯。

我在 Windows 7 64 位上使用 Python IDLE 3.3.1。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-08T09:59:24.213

`filter()`在 python 3 中*不*返回一个列表，而是一个[可迭代](https://docs.python.org/3/glossary.html#term-iterable) `filter`的对象。使用它上面的 [`next()`函数](https://docs.python.org/3/library/functions.html#next)来获取第*一个*过滤的项目：

```
bond[bond_index] = old_to_new[sheet.index(next(image)) + 1 ] 
```

无需将其转换为列表，因为您只使用第一个值。

可迭代的对象，如*按需*`filter()`产生结果，而不是一次性产生结果。如果您的列表非常大，将所有过滤后的结果放入列表中可能需要很长时间和大量内存，但只需要评估您的条件，直到*其中一个*值产生结果以产生一个输出。你告诉对象通过将它传递给函数来扫描第一个值。您可以多次这样做以获取多个值，或者使用其他可迭代的工具来完成更复杂的事情；[图书馆](https://docs.python.org/3/library/itertools.html)里到处都是这样的工具。Python[循环](https://docs.python.org/3/reference/compound_stmts.html#for-loops)*`sheet``filter()``lambda`*`sheet``True``filter()``sheet``next()`[`itertools`](https://docs.python.org/3/library/itertools.html)[`for`](https://docs.python.org/3/reference/compound_stmts.html#for-loops)是另一个这样的工具，它也一个接一个地从可迭代中获取值。**

 **如果您*必须*同时访问所有过滤结果，因为您必须随意索引结果（例如，因为*这次*您的算法需要访问索引 223、索引 17 和索引 42），*然后*才将可迭代对象转换为一个列表，通过使用`list()`：

```
image = list(filter(lambda i: ..., sheet)) 
```

访问有序值序列的任何值的能力称为*随机访问*；a`list`就是这样一个序列，a`tuple`或 numpy 数组也是如此。Iterables*不*提供随机访问。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-03-10T18:35:00.333

`list`在条件之前使用`filter`它可以正常工作。对我来说，它解决了这个问题。

例如

```
list(filter(lambda x: x%2!=0, mylist)) 
```

代替

```
filter(lambda x: x%2!=0, mylist) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-25T17:16:11.020

```
image = list(filter(lambda i: abs(i[0] - ghost_x) < 1e-2 and abs(i[1] - ghost_y) < 1e-2, sheet)) 
```**

# python - 某些页面上的 MoinMoin ACL

> ID：15876260
> 
> 赞同：0
> 
> 时间：2013-04-08T09:57:35.207
> 
> 标签：python, moinmoin

我们使用 MoinMoin 作为我们应用程序的 wiki。我们想打开被设置的页面给公众访问。我该怎么做？

我可以在配置文件中的某些页面上设置公共访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:28:53.413

阅读 HelpOnAccessControlLists wiki 页面。

您可以在页面内容的顶部设置 ACL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T16:46:16.413

为了设置一个页面“只读未授权用户”：

1.  编辑配置文件**wikiconfig.py**

    acl_rights_before = u"AnAdminAccount：读取、写入、删除、恢复、管理"

    acl_rights_default = u"AnAdminAccount：读取、写入、删除、恢复、管理"

2.  在您希望向公众开放的 wiki 页面顶部添加：

    `#acl MyUserName:read,write,admin,revert,delete All:read`

# mysql - 按存储过程参数排序

> ID：15876263
> 
> 赞同：2
> 
> 时间：2013-04-08T09:57:46.520
> 
> 标签：mysql, sql, stored-procedures

我在按用户给出的参数对存储过程进行排序时遇到问题，我尝试过阅读，但我尝试过的解决方案不起作用。

那么，有人可以帮助我吗？我希望它按类型从我的 Group_concat 中排序。如果我用硬编码输入它，它就可以工作，比如（ORDER BY Type1，ORDER BY Type2 等等）。但我想要这样的东西（ORDER BY @specificStat）。

```
CREATE PROCEDURE getSpecificStatsBySeason(IN khID INT(11), IN seasonName varchar(40), IN specificStat INT(11))
BEGIN

SET @sql = NULL;
SET @khID = khID;
SET @seasonName = seasonName;
SET @specificStat = specificStat;

SELECT
  GROUP_CONCAT(DISTINCT CONCAT('SUM(IF(em.eventTypeID = ',
      et.eventTypeID, ', 1, 0)) AS Type',
      et.eventTypeID )
  ) INTO @sql
FROM  eventTypes       AS et, `eventType-R-kh` AS eRk, kh AS kh WHERE et.eventTypeID = eRk.eventTypeID AND eRk.kh = kh.kh AND kh.khID = @khID;

SET @sql = CONCAT('SELECT u.userID, ud.firstname, ud.lastname,', @sql,
                  ',
                  IFNULL((SELECT COUNT(s.activityID)
                          FROM activity AS a1, signup AS s
                          WHERE u.userid = s.userid
                          AND s.activityID = a1.activityID
                          AND a1.khID = @khID
                            AND s.answer = 1
                            AND se.seasonName = @seasonName
          AND a1.activityDate BETWEEN se.seasonStart AND se.seasonEnd
                  AND a1.activityDate <= NOW()), 0) AS matchCount
                  FROM userData AS ud, userInfo AS u
                  LEFT JOIN activity      AS  a ON a.khID = @khID
                  RIGHT JOIN season AS se ON se.seasonName = @seasonName
          AND a.activityDate BETWEEN se.seasonStart AND se.seasonEnd
                  LEFT JOIN `eventMatch`       AS em ON em.userid = u.userid
                  AND em.activityID = a.activityID
                  LEFT JOIN activityMatch AS am ON a.activityID = am.activityID 
                  WHERE u.khID  = @khID
                  AND u.userID = ud.userID
                  GROUP BY u.UserID  
                  ORDER BY  @specificStat  ;');

prepare stmt 
FROM @sql;

execute stmt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:53:16.307

改用这个：

```
...
...
  AND u.userID = ud.userID
              GROUP BY u.UserID  
              ORDER BY ',   @specificStat, '  ;'); 
```

# android - 修复了第一个 TableRow android

> ID：15876275
> 
> 赞同：1
> 
> 时间：2013-04-08T09:58:09.490
> 
> 标签：android, tablerow, android-tablelayout

我在这个表格中有一个表格布局，我定义了一个带有 4 个编辑文本的表格行作为列标题。

我的问题是我想将此静态行设为固定位置，因此当我向下滚动屏幕时，此行位置不会改变。

我从数据库动态加载其他行。

感谢您的帮助！

这是我的 xml 代码：

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/horizontalScrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/background">
    <ScrollView 
        android:id="@+id/scrollViewPhysicalExam"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <LinearLayout 
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
            <TableLayout 
                    android:id="@+id/TLArchiveHeader"
                    android:layout_height="wrap_content"
                    android:layout_width="match_parent">

                    <TableRow style="@style/HeaderRow">

                        <TextView
                        style="@style/HeaderText"
                        android:layout_width="200dp"
                        android:text="Owner name"/>

                    <TextView
                        style="@style/HeaderText"
                        android:layout_width="200dp"
                        android:text="Phone" />

                    <TextView
                        style="@style/HeaderText"
                        android:layout_width="200dp"
                        android:text="Address" />

                    <TextView
                        style="@style/HeaderText"
                        android:layout_width="200dp"
                        android:text="Mail" />
                    <TextView
                        style="@style/HeaderText"
                        android:layout_width="200dp"
                        android:text="Fax" />

                </TableRow>

            </TableLayout>

        </LinearLayout>
  </ScrollView>
</HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:24:26.273

首先，为什么你需要`LinearLayout`inside `ScrollView`？ `TableLayout`将不带`LinearLayout`.

其次 - 大量的视图会**显着**降低应用程序的性能。考虑替换`TableLayout`为.. 可能是 a`ListView`或编写您自己的组件。据我了解，您需要一个带有*纯文本*字段的简单表格 - 实现单个、快速且易于使用的组件并不难。

第三 - 解决方案 - 只需将标题行放在 ScrollView 之外，如下所示：

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/horizontalScrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/background">

    <TableLayout 
        android:id="@+id/TLArchiveHeader"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <TableRow style="@style/HeaderRow">
            <TextView
            style="@style/HeaderText"
            android:layout_width="200dp"
            android:text="Owner name"/>
            <TextView
                style="@style/HeaderText"
                android:layout_width="200dp"
                android:text="Phone" />
            <TextView
                style="@style/HeaderText"
                android:layout_width="200dp"
                android:text="Address" />
            <TextView
                style="@style/HeaderText"
                android:layout_width="200dp"
                android:text="Mail" />
            <TextView
                style="@style/HeaderText"
                android:layout_width="200dp"
                android:text="Fax" />
        </TableRow>
    </TableLayout>
    <ScrollView 
        android:id="@+id/scrollViewPhysicalExam"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <TableLayout 
            android:id="@+id/TLArchiveRowPlaceholder"
            android:layout_height="wrap_content"
            android:layout_width="match_parent">
        </TableLayout>
    </ScrollView>
</HorizontalScrollView> 
```

将行添加到`TLArchiveRowPlaceholder`.

但在这种情况下，你需要有固定的列宽。或者在每次主表更新后更新标题列宽，以免标题错位。

希望这可以帮助。

我的错。为什么答案在评论中？之前没看过=）

# css - IE9（标准模式）悬停时 Div 高度跳跃

> ID：15876282
> 
> 赞同：1
> 
> 时间：2013-04-08T09:58:41.540
> 
> 标签：css, internet-explorer-9, hover

我们在这里有一个项目页面来实时检查问题 -> [http://hdev.hattrick12.com/](http://hdev.hattrick12.com/)

将帖子元素悬停会导致帖子高度在 IE9/Standard 中跳跃一瞬间。

它与*.post footer li*内联显示有关 - 但我需要让元素浮动或显示内联，这两者似乎都会在 IE9 中造成麻烦。

有人能指出我正确的方向吗，因为我在那个特定的 IE 错误上找不到任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:20:56.973

我找到了！是元素的最小高度导致它们在悬停时瞬间切换高度。

感谢所有贡献的人

# c# - MouseButtonEventArgs.MouseDevice.DirectlyOver 误解

> ID：15876285
> 
> 赞同：6
> 
> 时间：2013-04-08T09:58:55.290
> 
> 标签：c#, wpf, popup, mouseevent

我面临着下一个误解。

**序言**：

我有 wpf 应用程序，其中包含下一个基本 UI 部分：`RadioButtons`以及一些基于`Popup`（以组合框方式）使用下拉菜单的控件。根据一些逻辑每个单选按钮挂钩`PreviewMouseDown`事件并做一些计算。在下一个场景中，

1.  用户打开弹出窗口（不要选择任何东西，弹出窗口只是保持打开状态）
2.  用户单击单选按钮

`PreviewMouseDown`不会像预期的那样为单选按钮触发（因为`Popup` [feature](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9337ff73-0641-4336-a65b-5aeb3a1ad3d8/)）。

尽管有一个，我的目标仍然是射击`PreviewMouseDown`。`RadioButton`

**尝试解决**：

快速而肮脏的解决方案是：如果需要，使用新源挂钩并重新触发事件，使用单选按钮作为`PreviewMouseDown`源`Popup`。`PreviewMouseDown`新的来源可以通过`MouseButtonEventArgs.MouseDevice.DirectlyOver`. `Popup`下一段代码执行此操作（仅当“吃”`PreviewMouseDown`外部点击时才会重新触发事件）：

```
 private static void GrantedPopupPreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        var popup = sender as Popup;
        if(popup == null)
            return;

        var realSource = e.MouseDevice.DirectlyOver as FrameworkElement;
        if(realSource == null || !realSource.IsLoaded)
            return;

        var parent = LayoutTreeHelper.GetParent<Popup>(realSource);

        if(parent == null || !Equals(parent, popup ))
        {
            e.Handled = true;
            var args = new MouseButtonEventArgs(e.MouseDevice,
                                                e.Timestamp,
                                                e.ChangedButton)
            {
                RoutedEvent = UIElement.PreviewMouseDownEvent,
                Source = e.MouseDevice.DirectlyOver,
            };
            realSource.RaiseEvent(args);
        }
    } 
```

当我将该处理程序直接附加到通过并且**不工作****（**不会为单选按钮触发）时，如果我要附加一个通过（目的是避免将行为附加到使用这些单选按钮在页面上可能发生的每一个）上，这很有效：`Popup.PreviewMouseDown``Behavior`**`PreviewMouseDown``EventManager.RegisterClassHandler``Popup`**

 **```
EventManager.RegisterClassHandler(
            typeof (Popup),
            PreviewMouseDownEvent,
            new MouseButtonEventHandler(GrantedPopupPreviewMouseDown)); 
```

调试器显示`e.MouseDevice.DirectlyOver`（参见上面的代码）是`Popup`，而不是`Radiobutton`（就像我通过 附加处理程序时那样`Behavior`）！

**问题**：

如果事件处理程序以两种不同的方式附加，相同的操作如何以及为什么`MouseButtonEventArgs`会有所不同？

有人可以解释这种行为吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T15:22:18.473

提供组合框是用户从一组选项中进行选择的一种方式，您可能希望这样做。但它也有其他合同。它说用户应该专注于这个并且只关注这个任务。但这不是你的情况。您想要显示选项，让它们可以隐藏，并允许用户在显示时执行其他操作。

我认为您需要其他控件而不是组合框。我的建议是使用包含列表框的扩展器。鉴于：

```
class NotificationObject : INotifyPropertyChanged
{
    public void RaisePropertyChanged(string name)
    {
        if(PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
}

class ComboEntry : NotificationObject
{
    public string Name { get; private set; }

    private string _option = "Off";
    public string Option 
    {
        get { return _option; }
        set { _option = value; RaisePropertyChanged("Option"); }
    }

    public ComboEntry()
    {
        Name = Guid.NewGuid().ToString();
    }
}

class MyDataContext : NotificationObject
{
    public ObservableCollection<ComboEntry> Entries { get; private set; }

    private ComboEntry _selectedEntry;
    public ComboEntry SelectedEntry
    {
        get { return _selectedEntry; }
        set { _selectedEntry = value; RaisePropertyChanged("SelectedEntry"); }
    }
    public MyDataContext()
    {
        Entries = new ObservableCollection<ComboEntry>
        {
            new ComboEntry(),
            new ComboEntry(),
            new ComboEntry()
        };
        SelectedEntry = Entries.FirstOrDefault();
    }
    public void SetOption(string value)
    {
        Entries
            .ToList()
            .ForEach(entry => entry.Option = value);
    }
} 
```

我认为您需要以下 XAML：

```
<Window x:Class="RadioInCombo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:RadioInCombo"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:MyDataContext x:Key="myDataContext" />
        <DataTemplate x:Key="ComboEntryTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Name}" />
                <Border Width="5" />
                <TextBlock Text="{Binding Option}" />
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <StackPanel DataContext="{StaticResource myDataContext}">
        <RadioButton x:Name="OnButton"
                     Content="On"
                     PreviewMouseDown="OnButton_PreviewMouseDown" />
        <RadioButton x:Name="OffButton"
                     Content="Off"
                     PreviewMouseDown="OffButton_PreviewMouseDown" />
        <Expander Header="{Binding SelectedEntry}" 
                  HeaderTemplate="{StaticResource ComboEntryTemplate}">
            <ListBox ItemsSource="{Binding Entries}"
                     ItemTemplate="{StaticResource ComboEntryTemplate}" />
        </Expander>
    </StackPanel>
</Window> 
```

以及以下代码隐藏：

```
 private MyDataContext GetMyDataContext()
    {
        var candidate = FindResource("myDataContext") as MyDataContext;
        if (candidate == null) throw new ApplicationException("Could not locate the myDataContext object");
        return candidate;
    }

    private void OnButton_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        GetMyDataContext().SetOption("On");            
    }

    private void OffButton_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        GetMyDataContext().SetOption("Off");
    } 
```**

# url-rewriting - url 在重定向.net 上失去扩展

> ID：15876287
> 
> 赞同：0
> 
> 时间：2013-04-08T09:58:59.027
> 
> 标签：url-rewriting

使用 plesk 作为管理面板的共享托管服务器上的网站。我希望我的 404 重定向到默认页面来处理无扩展的 url

我在 plesk 面板中指出了以下 url。错误描述类型位置 404 未找到 URL [http://iservice.iwebdesigner.org](http://iservice.iwebdesigner.org) 但是，当我使用像这样的 URL [http://iservice.iwebdesigner.org/user](http://iservice.iwebdesigner.org/user) 时，它会重定向到默认页面，但会丢失 /user。我认为需要将 plesk 上不可用的类型设置为执行 iis 的 url。有没有办法在plesk中改变它？或者我还能做什么。我不确定 Web 配置设置是否有帮助，因为 iis 已经重定向了页面，并且扩展程序在 Web 配置设置可以运行之前就消失了。

托管人说不能对 iis 做任何改变。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:13:26.647

好的，我已经弄清楚了。对于那些尝试在共享托管服务器中使用 urlrewriter 模块的人。下面的这条规则处理不存在的无扩展 url 并重定向到 default.aspx 进行处理。例如 www.mysite/user。在 plesk 中将 404 错误页面设置为指向上面的 default.aspx（类型必须是 url 并且路径设置为 default.aspx）后，将 UrlRewritingNet.UrlRewriter.dll 上传到您的 bin 文件夹。在网络配置中

```
<configsections>
    <section name="urlrewritingnet"`enter code here`
             requirePermission ="false"
             type="UrlRewritingNet.Configuration.UrlRewriteSection, UrlRewritingNet.UrlRewriter"  />
  </configsections>
<urlrewritingnet rewriteonlyvirtualurls="true" contextitemsprefix="QueryString" defaultpage="default.aspx"
    defaultprovider="RegEx" xmlns="http://www.urlrewriting.net/schemas/config/2006/07">
    <rewrites>
      <add name="ExtensionlessRewrite" virtualUrl="^~/(.*)" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="/default.aspx" ignoreCase="true" />
   </rewrites>
  </urlrewritingnet>
<system.webserver>

    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter" />
    </modules>
  </system.webserver> 
```

这对我有用回声

# javascript - 来自 alertify 插件和 jquery 的确认框返回值

> ID：15876289
> 
> 赞同：2
> 
> 时间：2013-04-08T09:59:09.557
> 
> 标签：javascript, jquery, forms, alertify

我的表单有一个确认对话框。它在 jquery 提交函数中。我正在使用 alertify 来显示确认对话框。但问题是我的 jquery 提交函数在 alertify 获取确认框值之前返回。阅读 alertify 是非阻塞的。有什么办法可以克服这个问题并将确认框的值返回到我的表单中？

```
$("#viewform").submit(function(){

      alertify.confirm("Delete the selected entry?",function(e){

             if(e)
                    return true;
              else 
                     return false;

               });

 }); 
```

该函数始终返回 true。我想返回确认框的输出。如何返回确认框的延迟返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:18:34.533

一种解决方法是使用 a`button`而不是`submit`输入，然后使用点击侦听器来运行 alertify。然后可以通过 jQuery 提交您的表单。以下是它的外观：

HTML：

```
<form id="form">
    <input type="button" value="Submit" id="btn">
</form> 
```

JavaScript：

```
$('#btn').click(function() {
    alertify.confirm("Delete the selected entry?",function(e){
        if(e) {
            $('#form').submit();
            return true;
        } else {
            return false;
        }

    });
}); 
```

# asp.net - 从下拉列表中的 asp.net 更新数据库

> ID：15876298
> 
> 赞同：0
> 
> 时间：2013-04-08T09:59:32.903
> 
> 标签：asp.net, vb.net, drop-down-menu, sql-update

我试图让用户选择他们的婚姻状况，这将更新数据库中的一个字段。当用户是第一次时这很好，但如果他们想再次更新它，它不会更新。

如果我选择了一个数据源，如果他们希望更新，除了第一次选择的内容之外，DDL 中不会为他们提供任何其他选项。

******* *ASPX* *********

 **```
<asp:DropDownList ID="DDLMarital" runat="server" TabIndex="1">
                <asp:ListItem Value = "Single" Text = "Single">Single</asp:ListItem>
                <asp:ListItem Value = "Married" Text = "Married">Married</asp:ListItem>
                <asp:ListItem Value = "Separated" Text = "Separated">Separated</asp:ListItem>
                <asp:ListItem Value = "Divorced" Text = "Divorced">Divorced</asp:ListItem>
            </asp:DropDownList> 
```

****** *** *** *ASPX.VB* ***** ********

 **```
'binding... 
```

Protected Sub Page_Load(sender As Object, e As System.EventArgs) 处理 Me.Load

```
 Dim dvSql4 As DataView =
DirectCast(SqlMarital.Select(DataSourceSelectArguments.Empty), DataView)
    For Each drvSql4 As DataRowView In dvSql4
        DDLMarital.Text = drvSql4("Marital_Status").ToString()
    Next 
```

结束子

'单击“下一步”按钮时更新数据库 Protected Sub BtnNext_Click(sender As Object, e As System.EventArgs) Handles BtnNext.Click

```
 Dim con As New SqlConnection
    Dim cmd As New SqlCommand

    con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\scrummingit2.mdf;Integrated Security=True;User Instance=True"
    con.Open()

    cmd.Connection = con
    cmd.CommandText = ("UPDATE Student_Personal_Details SET Marital_Status = @Marital WHERE Student_No = @StudentNo")

    Dim maritalParam As New SqlParameter("@Marital", DDLMarital.Text)
    Dim studentNoParam As New SqlParameter("@StudentNo", lblEnrolmentStudentNumber.Text)

    lblEnrolmentStudentNumber.Text = Session("Student")

    cmd.Parameters.Add(maritalParam)
    cmd.Parameters.Add(studentNoParam)

    cmd.ExecuteNonQuery()

    con.Close() 
```

结束子

任何人都可以帮忙吗？在谷歌上找不到任何答案几天后，现在变得绝望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:14:02.970

您应该检查 PostBack，并且仅当它不是 PostBack 时才分配选定的值。

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
   If Not IsPostBack
        Dim dvSql4 As DataView =
    DirectCast(SqlMarital.Select(DataSourceSelectArguments.Empty), DataView)
        For Each drvSql4 As DataRowView In dvSql4
            DDLMarital.Text = drvSql4("Marital_Status").ToString()
        Next
   End If
End Sub 
```

用户的选择目前被忽略，因为每次都会重置该值`Load`****

# jquery - 未捕获的类型错误：无法读取 null 的属性“clientWidth”

> ID：15876302
> 
> 赞同：6
> 
> 时间：2013-04-08T09:59:39.153
> 
> 标签：jquery, wordpress, menu, var, screen-size

我有一个响应式的 wordpress 主题。当屏幕尺寸低于 740 时，菜单被编码为隐藏。但是它只在主页上正确执行此操作。如果我转到任何其他页面，菜单会折叠但它无法隐藏并且我收到此错误：“未捕获的 TypeError：无法读取属性 'clientWidth' of null”

这是代码，我在主题的 header.php 文件中调用了它：

```
var ww = document.body.clientWidth;
$(document).ready(function() {
    adjustMenu();

    $(".cat").click(function(e) { // cat class
        e.preventDefault();
        $(this).toggleClass("active");
        $(".sf-menu").toggle();
    });
});

function adjustMenu() {
    if (ww <= 740) { //change this to your breakpoint
        $('.sf-menu').hide();
        $(".cat").show();
        if (!$(".cat").hasClass("active")) {
            $(".sf-menu").hide();
        } else {
            $(".sf-menu").show();
        }
    } else {
        $('.sf-menu').show();
        $(".cat").hide();

    }
}

$(window).bind('resize orientationchange', function() {
    ww = document.body.clientWidth;
    adjustMenu();
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-23T17:56:01.903

尝试在文档末尾添加您的脚本。原因是，一开始你的文档宽度为零，因为你的内容还没有加载，所以没有什么可以显示的，所以你的宽度为零

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T10:10:08.397

我会说`$(window).width();`从 jquery 中使用。它返回浏览器视口的宽度，这是等效的，或者我会说是传统 javascript 的更好选择。

您的代码将如下所示。检查它是否有效。

```
var ww = $(window).width();
$(document).ready(function() {
    adjustMenu();

    $(".cat").click(function(e) { // cat class
        e.preventDefault();
        $(this).toggleClass("active");
        $(".sf-menu").toggle();
    });
});

function adjustMenu() {
    if (ww <= 740) { //change this to your breakpoint
        $('.sf-menu').hide();
        $(".cat").show();
        if (!$(".cat").hasClass("active")) {
            $(".sf-menu").hide();
        } else {
            $(".sf-menu").show();
        }
    } else {
        $('.sf-menu').show();
        $(".cat").hide();

    }
}

$(window).bind('resize orientationchange', function() {
    ww = document.body.clientWidth;
    adjustMenu();
    });
    function adjustMenu() {
        if (ww <= 740) { //change this to your breakpoint
        $('.sf-menu').hide();
        $(".cat").show();
        if (!$(".cat").hasClass("active")) {
            $(".sf-menu").hide();
        } else {
            $(".sf-menu").show();
        }
    } else {
        $('.sf-menu').show();
        $(".cat").hide();

    }
}

$(window).bind('resize orientationchange', function() {
    ww = $(window).width();
    adjustMenu();
}); 
```

# macos - Mac OSX 插件可以有自己的权利吗？或者扩展主应用程序的权利？

> ID：15876305
> 
> 赞同：2
> 
> 时间：2013-04-08T09:59:54.683
> 
> 标签：macos, cocoa, plugins, sandbox, entitlements

我需要能够在 Mac OSX 10.7 及更高版本中为我的打印对话框扩展 (PDE) 插件定义新的权利（例如网络访问、文件读取），其中应用程序现在大多是沙盒。

这可能吗？如果是，如何？

编辑：查看 XPC 服务。XPC 似乎不起作用，可能是因为 PDE 插件运行在应用程序之上，例如 Preview，而我的 XPC 服务不在主应用程序的捆绑包中。

# python - Python 机械化复选框

> ID：15876307
> 
> 赞同：2
> 
> 时间：2013-04-08T10:00:16.737
> 
> 标签：python, automation, mechanize, www-mechanize

我想使用 Python Mechanize 来做到这一点。这是 HTML 页面：

```
<form action="config.php" method="POST">
<div>
<img src="/images/delete1.png" />
<strong>EmptyDir1</strong><br />
<input type="checkbox"  value="3" name="manager[]" />
</div>

<div>
<img src="/images/delete2.png" />
<strong>EmptyDir2</strong><br />
<input type="checkbox"  value="4" name="manager[]" />
</div>

<div>
<img src="/images/copy.png" />
<strong>CopyConf</strong><br />
<input type="checkbox"  value="22" name="manager[]" />
</div>
................. and so on another 20

<div><input type="submit" value="Do Jobs!" /></div>
</form> 
```

我有 2 个问题： 1\. 如何从该页面选中所有复选框并提交？2\. 我怎样才能选择所有的复选框，除了一个名为“修改”的复选框？代码示例会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:16:58.330

对每个复选框使用它：

```
import mechanize

br = mechanize.Browser()
br.open(URL)
br.select_form(nr=0)
for i in range(0, len(br.find_control(type="checkbox").items)):
    br.find_control(type="checkbox").items[i].selected =True
reponse = br.submit()
print reponse.read() 
```

这适用于所有除了修改复选框（尚未检查）：

```
import mechanize

br = mechanize.Browser()
br.open(URL)
br.select_form(nr=0)
for i in range(0, len(br.find_control(type="checkbox").items)):
    if "modify" not in str(br.find_control(type="checkbox").items[i]):
        br.find_control(type="checkbox").items[i].selected =True
reponse = br.submit()
print reponse.read() 
```

# asp.net - 本地化信息（全球化）

> ID：15876308
> 
> 赞同：1
> 
> 时间：2013-04-08T10:00:21.203
> 
> 标签：asp.net, localization, globalization

截至 2013 年，网页多语言多文化本地化的最佳实践是什么。

我应该将所有翻译存储在数据库中吗？语言等？

我应该基于数据库查询构建 resx 文件还是应该简单地创建 resx 文件？

该应用程序将与跨多个设备和平台的浏览器界面一起使用，例如 Windows/IOS/Android。还有什么我应该考虑的其他事情。

最好的祝福

史莱基托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:31:17.177

您通常需要处理几种类型的全局内容：

*   应用程序模板，例如您的应用程序发送的 HTML 页面、菜单和电子邮件
*   存储在数据库中的动态内容

**应用模板**

模板通常使用您自己的框架的国际化 (i18n) 框架来处理。对于 asp.net，该框架包括用于标记字符串并将其导出为（英文）.resx 文件的库。这支持许多内置功能，例如变量、复数和开发人员评论。因此，除非您遇到一些实际的障碍，否则您通常希望使用它而不是构建自己的 i18n 框架（例如，在数据库中，或在数据库中使用 .resx 导出）。

如今，当您真正想要将这些文件*本地化*时，就会做出工作流决策。在过去，您会使用电子邮件与代理机构交换文件。2013 年，Web 应用程序的开发周期快节奏，每周（或每天）发布多个版本，因此对自动化的需求更大。团队正在从使用 VCS、FTP 或 Dropbox 作为文件的临时存储转向现代本地化 (L10n) 管理平台，如[Transifex](https://www.transifex.com)（discl：我是创始人）来管理他们的本地化过程。

消除开发人员 L10n 痛苦的最佳方法是将 L10n 平台与构建工具集成，因此无论何时提交某些内容，英文文件都会自动发送到 L10n 系统，该系统将检测更改并通知正确的翻译人员。当您准备好部署时，您的集成将自动提取新翻译的文件。

使用 Transifex，您可以将 Tx 客户端应用程序与 git-commit 挂钩、您的构建/CI 系统或您的优秀部署脚本一起使用：

`tx push --source`

`tx pull -l de,fr,it --mode=reviewed --minimum-perc=90`

**动态和外部内容**

这种类型的内容通常不使用 .resx 文件处理，因为在您的数据库本身中管理它更容易。通常，您希望将此内容与您的模板内容一起存储，以便翻译人员可以在一个地方查看所有内容。

您选择的平台需要有一个现代 API 才能使用。查看[Transifex API](http://support.transifex.com/customer/portal/topics/440186-api/articles)了解它们的外观。

**其他提示和技巧**

*   选择具有强大的内置基于 Web 的翻译编辑器的平台。翻译人员需要可靠的功能，例如翻译记忆库、词汇表、机器翻译，以提供高质量和一致的翻译。

*   遵循良好的 i18n 实践，例如良好的日期格式和避免串联。

*   爱你的翻译。他们是让这一切发生的人。

# heroku - Heroku CNAME 重定向中的 DNS 之谜

> ID：15876312
> 
> 赞同：5
> 
> 时间：2013-04-08T10:00:34.967
> 
> 标签：heroku, dns, host, cname

我的 DNS 配置中有一些非常神秘的东西不起作用：

*   我的应用程序位于：`http://my-domain.herokuapp.com`
*   我配置`my-domain.com`了以下方式：

    ```
    @ 10800 IN A 174.129.25.170
    www 10800 IN CNAME my-domain.herokuapp.com. 
    ```

使用 wwwizer。

因此，`http://my-domain.com`重定向到`http://www.my-domain.com`哪些 CNAME`http://my-domain.herokuapp.com`

一切似乎都很好，但是当我输入`http://my-domain.com`or时`http://www.my-domain.com`，我收到：`Heroku | No such app`错误消息。

所以我尝试了这个：

```
host http://www.my-domain.com
www.my-domain.com is an alias for my-domain.herokuapp.com.
my-domain.herokuapp.com has address 54.243.92.108 
```

和

```
host http://my-domain.herokuapp.com
my-domain.herokuapp.com has address 184.72.248.52 
```

我看不出问题出在哪里。WWWizer 似乎工作正常，但感觉自从 herokuapp IP 更改后 CNAME 没有刷新......

任何提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:23:24.910

感谢@neil-middleton 的评论，我找到了解决方案。

我之前确实添加了`heroku domains:add my-domain.com`

但没有 `heroku domains:add www.my-domain.com`

这是这里重要的一个。（虽然我都离开了以防万一）

因此，当 CNAME-ing *.herokuapp.com 时，heroku 似乎有自己的内部 DNS 控制，它作为 .herokuapp.com 的条目获得`heroku domains`。

避免将 CNAME 设置为不属于自己的应用程序是合乎逻辑的。

# android - 如何从左到右android一张一张地为图像设置动画

> ID：15876313
> 
> 赞同：1
> 
> 时间：2013-04-08T10:00:44.923
> 
> 标签：android, android-layout, android-animation

我想从左到右一张一张地为 9 张图像制作动画。我试过编码，所有图像都在同时移动。我需要一张一张地移动每张图片。

公共类 MainActivity 扩展 Activity {

```
ArrayList<ImageView> imageHolder;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    animateBottles();
}

private void animateBottles() {
    ImageView upperRowBottleOneImageView = (ImageView) findViewById(R.id.upperRowBottleOneImageView);
    ImageView upperRowBottleTwoImageView = (ImageView) findViewById(R.id.upperRowBottleTwoImageView);
    ImageView upperRowBottleThreeImageView = (ImageView) findViewById(R.id.upperRowBottleThreeImageView);
    ImageView upperRowBottleFourImageView = (ImageView) findViewById(R.id.upperRowBottleFourImageView);
    ImageView upperRowBottleFiveImageView = (ImageView) findViewById(R.id.upperRowBottleFiveImageView);
    ImageView upperRowBottleSixImageView = (ImageView) findViewById(R.id.upperRowBottleSixImageView);
    ImageView upperRowBottleSevenImageView = (ImageView) findViewById(R.id.upperRowBottleSevenImageView);
    ImageView upperRowBottleEightImageView = (ImageView) findViewById(R.id.upperRowBottleEightImageView);
    ImageView upperRowBottleNineImageView = (ImageView) findViewById(R.id.upperRowBottleNineImageView);

    imageHolder = new ArrayList<ImageView>();

    imageHolder.add(upperRowBottleOneImageView);
    imageHolder.add(upperRowBottleTwoImageView);
    imageHolder.add(upperRowBottleThreeImageView);
    imageHolder.add(upperRowBottleFourImageView);
    imageHolder.add(upperRowBottleFiveImageView);
    imageHolder.add(upperRowBottleSixImageView);
    imageHolder.add(upperRowBottleSevenImageView);
    imageHolder.add(upperRowBottleEightImageView);
    imageHolder.add(upperRowBottleNineImageView);

    for (int i = 0; i < imageHolder.size(); i++) {
        ImageView imageView = imageHolder.get(i);

        ObjectAnimator mover = ObjectAnimator.ofFloat(imageView,
                "translationX", -150f, 50f);
        mover.setDuration(4000);

        AnimatorSet animatorSet = new AnimatorSet();
        animatorSet.play(mover);
        animatorSet.start();
        mover.addListener(new AnimatorListener() {

            @Override
            public void onAnimationCancel(Animator arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animator arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animator arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationStart(Animator arg0) {
                // TODO Auto-generated method stub

            }

        });}

        //try {
            //Thread.sleep(1000);
        //} catch (InterruptedException e) {
        //  // TODO Auto-generated catch block
            //e.printStackTrace();
        //}
    //}
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T10:04:50.337

为了一张一张地为图像设置动画，您必须为每个图像设置一个开始偏移延迟，例如：

```
for (int i = 0; i < imageHolder.size(); i++) {
        ImageView imageView = imageHolder.get(i);

        TranslateAnimation animation = new TranslateAnimation(fromX, ToX, FromY, ToY);
        animation.setDuration(400);
        animation.setStartOffset(100*i);

        imageView.startAnimation(animation);
} 
```

# tcl - 我如何在 TCL 脚本中使用 input.properties 文件，如概念

> ID：15876316
> 
> 赞同：1
> 
> 时间：2013-04-08T10:00:49.833
> 
> 标签：tcl

在 ANT 脚本中，我们访问属性文件如下 `<property file="input.properties"/>` 在 perl 脚本中，我们访问属性文件如下 `do "config.cfg";`

同样的方式我如何访问 TCL 脚本中的属性文件。任何人都可以帮我吗？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:45:24.527

好的，如果你希望它像在 Perl 中一样愚蠢，只需`source`Tcl 中的文件。

配置文件示例（名为`config.tcl`）：

```
# Set "foo" variable:
set foo bar 
```

要加载此配置文件：

```
source config.tcl 
```

-ing之后`source`，您可以在脚本中访问您的变量`foo`。

* * *

与 perl 一样，恶意用户可能会输入类似

```
exec rm -rf ~ 
```

在您的“配置文件”中，祝您好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:20:57.687

最简单的机制是使其成为脚本或使其成为数组的内容。以下是如何在仍然支持评论的同时执行后者：

```
proc loadProperties {arrayName fileName} {
    # Put array in context
    upvar 1 $arrayName ary

    # Load the file contents
    set f [open $fileName]
    set data [read $f]
    close $f

    # Magic RE substitution to remove comment lines
    regsub -all -line {^\s*#.*$} $data {} data

    # Flesh out the array from the (now clean) file contents
    array set ary $data
} 
```

然后你会像这样使用它：

```
loadProperties myProps ~/myapp.props
if {[info exists myProps(debug)] && $myProps(debug)} {
    parray myProps
} 
```

在您的主目录中使用一个文件（称为`myapp.props`），如下所示：

```
# Turn on debug mode
debug true
# Set the foos and the bars
foo "abc"
bar "Harry's place downtown" 
```

您可以做比这更复杂的事情，但它为您提供了一种易于使用的格式。

* * *

如果您更喜欢使用可执行配置，只需执行以下操作：

```
# Define an abstraction that we want users to use
proc setProperty {key value} {
    # Store in a global associative array, but could be anything you want
    set ::props($key) $value
}
source ~/myapp_config.tcl 
```

如果您想将操作限制为不会造成（太多）麻烦的操作，您需要一种稍微复杂的方法：

```
interp create -safe parser
proc SetProp {key value} {
    set ::props($key) $value
}
# Make a callback in the safe context to our main context property setter
interp alias parser setProperty {} SetProp
# Do the loading of the file. Note that this can't be invoked directly from
# within the safe context.
interp invokehidden parser source [file normalize ~/myapp_config.tcl]
# Get rid of the safe context; it's now surplus to requirements and contaminated
interp delete parser 
```

安全的开销非常低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:52:28.197

相当于perls

```
$var = "test"; 
```

在 Tcl 中

```
set var "test" 
```

因此，如果您希望它像在 Perl 中一样简单，我建议[您使用 kostix answer](https://stackoverflow.com/a/15878232/845414)。

* * *

但您也可以尝试使用[dicts](http://www.tcl.tk/man/tcl8.6/TclCmd/dict.htm)作为配置文件：

这看起来像

```
var {hello world}
other_var {Some data}
foo {bar baz} 
```

我个人喜欢使用它，它甚至允许嵌套：

```
nestedvar {
    subvar {value1}
    subvar2 {value2}
} 
```

和评论：^([有点破解，其实有关键`#`])

```
# {This is a comment} 
```

解析：

```
 set fd [open config.file]
 set config [read $fd]
 close $fd
 dict unset config #; # Remove comments. 
```

使用权：

```
 puts [dict get $config var]
 puts [dict get $config nestedvar subvar] 
```

* * *

但是如果你真的想要类似的东西`$var = "foo";`（这是有效的 Perl 代码，但不是 Tcl），那么你必须自己解析这个文件。

一个例子：

```
proc parseConfig {file} {
    set fd [open $file]
    while {[gets $fd line] != -1} {
         if {[regexp {^\s*\$([^\s\=]+)\s*\=\s*(.*);?$} $line -> var value]} {
              # The expr parses funny stuff like 1 + 2, \001 inside strings etc.
              # But this is NOT perl, so "foo" . "bar" will fail.
              set ::$var [expr $value]
         }
    }
} 
```

缺点：不允许多行设置，如果存在无效值将抛出错误，并允许命令注入（但您的 Perl 解决方案也这样做）。

# python - 替换单独文件中的字典值

> ID：15876317
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:00:50.020
> 
> 标签：python, file-io, dictionary, python-2.7

我在 python 2.7.3 上。我编写了一个简单的代码来搜索字典键，当它找到由 定义的键时`var_par`，它会迭代地从列表中替换新值`array`：

```
var_par = 'B'
array = [1.4, 2.6, 4.8, 3.56]

params = {
    "A":    ["A part of",      "#comment 1"],
    "B":    [1.2,              "#comment 2"],
    "C":    ["the test run.",  "#comment 3"]
}

for I in array:
    if var_par in params: params[var_par][0] = I
    execfile('script.py') 
```

现在基本上我想做的和我的问题是：我想把我的`params`字典放在一个单独的文件`parameters.dat`中，然后做同样的事情，但是*物理上*`B`改变给定键的值（在这种情况下是 for ）在脚本执行之前由文件定义`var_par`并保存文件。`script.py`原因是该脚本从文件中读取其输入参数。

我尝试添加和玩弄

```
value_old = str(params[var_par][0])
value_new = str(I)

for key in fileinput.input("parameters.dat", inplace = 1): 
    print key.replace(value_old, value_new), 
```

但是，我对这个添加的问题是，每当两者`C`共享`B`相同的值时，两者都会被更改为新值。（这当然是看到代码搜索值而不是给定 key 的逻辑`var_par`。）否则它可以工作，但是对于代码来说当然没有这个缺陷是至关重要的，我目前还无法做到解决。另一方面，我有一种感觉，它一定不会那么困难，而且我很接近。

非常感谢您的任何意见。

附言。我是 python 初学者，所以我不是很擅长，但如果/需要时会尝试提供任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T18:07:05.377

感谢那些花时间考虑我的问题的人。但是，我自己已经设法解决了这个问题。我希望下面的代码也有助于其他人的编程。

```
execfile('parameters.dat')

var_par = 'B'
array = [1.4, 2.6, 4.8, 5.6]

for I in array: # Start choosing the values in array

    if var_par in params: params[var_par][0] = I

    f = open('params_temp.dat', 'w')
    print >> f, 'params = {'
    for p in params:
        if type(params[p][0]) == str:
            print >> f, ''.join(map(str,['"', p,'"',':'])), '\t',
            print >> f, ''.join(map(str,['[', '"', params[p][0], '"', ','])), '\t', ''.join(map(str,['"', params[p][1], '"', ']', ',']))
        else:
            print >> f, ''.join(map(str,['"', p,'"',':'])), '\t',
            print >> f, ''.join(map(str,['[', params[p][0], ','])), '\t', ''.join(map(str,['"', params[p][1], '"', ']', ',']))
    print >> f, '}'
    f.close()
    os.remove('parameters.dat')
    os.rename('params_temp.dat', 'parameters.dat')

    execfile('script.py') 
```

其中`parameters.dat`仅包含（一些*初始*）字典：

```
params = {
    "A":    ["A part of",      "#comment 1"],
    "B":    [1.2,              "#comment 2"],
    "C":    ["the test run.",  "#comment 3"]
} 
```

然后脚本将迭代地生成文件`parameters.dat`，然后`script.py`调用该文件将读取文件，在终止之后`array`将选择下一个值，生成一个新的参数文件，直到`array`耗尽。

请注意，为了正确构建新字典，我在字符串和其余部分之间进行了一些排序。此外，我必须编写打印语句，以免打印额外的空格。即，`"B"`取而代之的`" B "`是不会被识别为字典键。

我知道这可能被认为是“基础”，但是当你开始学习一些东西时，没有什么是真正的基础......;）另外，如果有人知道如何以不那么冗长的方式编程或以任何其他方式改进它，我很高兴听到。

干杯，威廉。

# css - div 包含绝对定位元素，因此没有高度

> ID：15876321
> 
> 赞同：0
> 
> 时间：2013-04-08T10:01:06.743
> 
> 标签：css, css-position, jquery-cycle

我正在使用`cycle.js`创建一个旋转横幅。该循环通过`position:absolute`在横幅链接上使用来工作。

问题是，包含的 div 现在的高度为零，因此下面的内容重叠并被隐藏。

如何让 div`slideshow`有高度？需要响应，所以不能是设定的高度。

```
<div id="feature">
   <div class="slideshow" style="position: relative;">
        <a href="/guarantees.aspx" style="position: absolute; top: 0px; left: 0px; 
              display: none; z-index: 2; opacity: 0; width: 682px; height: 258px;">
           <img alt="" src="/images/mobile/banner1.jpg">
        </a>
        <a href="/fencing.aspx" style="position: absolute; top: 0px; left: 0px; 
            display: block; z-index: 3; opacity: 1; width: 682px; height: 259px;">
           <img alt="" src="/images/mobile/banner2.jpg">
        </a>
   </div>
   <div id="pageNav">
        <a href="#" class="">&nbsp;</a>
        <a href="#" class="activeSlide">&nbsp;</a>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:43:31.373

[我](http://jquery.malsup.com/cycle/options.html)想您唯一的选择是将事件处理程序绑定到[`ready`](http://api.jquery.com/ready/)并通过检测您的宽度（或者如果您愿意，可以使用您当前的图像）来[`resize`](http://api.jquery.com/resize/)设置更改图像以设置新高度的功能）。`height``.slideshow``window``height`

由于无论如何您都在使用 Javascript 来处理您当前的图像尺寸，因此这不应该成为问题。

无论如何，也许您应该考虑使用另一个滑块插件（或编写您自己的函数），通过不使用`position: absolute`. Cycle 已经很老了，可能不是以*响应*式思维方式构建的（我知道同一个开发人员正在使用更现代的方法在[**Cycle 2上工作）。**](http://www.malsup.com/jquery/cycle2/)

# android - AuotCompleteTextView 与 android 中谷歌地图中所有地点的列表

> ID：15876323
> 
> 赞同：0
> 
> 时间：2013-04-08T10:01:22.863
> 
> 标签：android, google-places-api, android-maps

我知道谷歌地图上有很多东西，并且完成了几乎所有的事情，比如显示当前位置、使用 Google Place API 查找最近的地方、搜索一个地方，但我想当有人输入编辑文本来搜索地方时，它应该显示下拉列表所有与他输入的子字符串匹配的地名。我尝试了很多但没有找到好的解决方案。谢谢

对不起朋友我刚刚从这个链接[https://developers.google.com/places/documentation/autocomplete得到了这个问题的答案](https://developers.google.com/places/documentation/autocomplete)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:18:23.367

您可以使用谷歌网络服务 API 进行搜索以获取建议单词列表。这将提供比预期更多的信息。但是你可以试一试。

有关谷歌网络服务 API 的更多信息，请访问[https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

# c++ - 如何创建锁定和解锁互斥锁的智能指针？

> ID：15876325
> 
> 赞同：15
> 
> 时间：2013-04-08T10:01:23.757
> 
> 标签：c++, thread-safety, mutex, smart-pointers, raii

我有一个线程类，我想偶尔从中获取一个实例变量的指针。我希望这种访问受到互斥锁的保护，以便在客户端完成其指针之前阻止线程访问此资源。

我最初的方法是返回一对对象：一个是指向资源的指针，一个是指向互斥锁对象的 shared_ptr。这个 shared_ptr 持有对锁定对象的唯一引用，因此当它超出范围时应该解锁互斥锁。像这样的东西：

```
void A::getResource()
{
    Lock* lock = new Lock(&mMutex);
    return pair<Resource*, shared_ptr<Lock> >(
        &mResource, 
        shared_ptr<Lock>(lock));
} 
```

这个解决方案不太理想，因为它需要客户端持有整对对象。像这样的行为破坏了线程安全：

```
Resource* r = a.getResource().first; 
```

另外，我自己的实现是死锁的，我很难确定原因，所以可能还有其他问题。

我想要的是一个 shared_ptr ，它包含作为实例变量的锁，将它与访问资源的方法绑定。这似乎应该有一个既定的设计模式，但做了一些研究后，我惊讶地发现它很难遇到。

我的问题是：

*   这种模式有共同的实现吗？
*   将互斥锁放在我忽略的 shared_ptr 中是否存在问题，从而阻止了这种模式的广泛传播？
*   是否有充分的理由不实现我自己的 shared_ptr 类来实现这种模式？

（注意，我正在开发一个使用 Qt 的代码库，但不幸的是在这种情况下不能使用 boost。但是，涉及 boost 的答案仍然是普遍感兴趣的。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T10:22:40.650

我不确定是否有任何标准实现，但由于我喜欢无缘无故地重新实现东西，所以这里有一个应该可以工作的版本（假设你不想复制这样的指针）：

```
template<class T>
class locking_ptr
{
public:
  locking_ptr(T* ptr, mutex* lock)
    : m_ptr(ptr)
    , m_mutex(lock)
  {
    m_mutex->lock();
  }
  ~locking_ptr()
  {
    if (m_mutex)
      m_mutex->unlock();
  }
  locking_ptr(locking_ptr<T>&& ptr)
    : m_ptr(ptr.m_ptr)
    , m_mutex(ptr.m_mutex)
  {
    ptr.m_ptr = nullptr;
    ptr.m_mutex = nullptr;
  }

  T* operator ->()
  {
    return m_ptr;
  }
  T const* operator ->() const
  {
    return m_ptr;
  }
private:
  // disallow copy/assignment
  locking_ptr(locking_ptr<T> const& ptr)
  {
  }
  locking_ptr& operator = (locking_ptr<T> const& ptr)
  {
    return *this;
  }
  T* m_ptr;
  mutex* m_mutex; // whatever implementation you use
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T11:19:20.400

您正在描述由 Kevlin Henney 在[Executing Around Sequences中描述的](http://hillside.net/europlop/HillsideEurope/Papers/ExecutingAroundSequences.pdf)[EXECUTE AROUND POINTER](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Execute-Around_Pointer)模式的变体。

我有一个原型实现，[`exec_around.h`](https://gitorious.org/redistd/redistd/?p=redistd:redistd.git;a=blob;f=include/redi/exec_around.h;hb=HEAD)但我不能保证它在所有情况下都能正常工作，因为它正在进行中。它包括一个函数，该函数`mutex_around`创建一个对象并将其包装在一个智能指针中，该指针在访问时锁定和解锁互斥锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T23:31:42.833

这里还有另一种方法。灵活性和通用性要低得多，但也简单得多。虽然它似乎仍然适合您的确切情况。

`shared_ptr`（[标准](http://en.cppreference.com/w/cpp/memory/shared_ptr)和[Boost](https://www.boost.org/libs/smart_ptr/doc/html/smart_ptr.html#shared_ptr)）提供了构造它的方法，同时提供了另一个`shared_ptr`实例，该实例将用于使用计数器和一些根本不会被管理的任意指针。在[cppreference.com](http://en.cppreference.com/)上，它是第 8 种形式（[别名构造函数](http://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr)）。

现在，通常，这种形式用于转换——比如`shared_ptr`从派生类对象提供基类对象。它们共享所有权和使用计数器，但（通常）有两个不同类型的不同指针值。这种形式还用于根据它所属的对象提供`shared_ptr`一个成员值。`shared_ptr`

在这里我们可以“滥用”表单来提供锁守卫。像这样做：

```
auto A::getResource()
{
    auto counter = std::make_shared<Lock>(&mMutex);
    std::shared_ptr<Resource> result{ counter, &mResource };
    return result;
} 
```

返回的`shared_ptr`指向`mResource`并保持`mMutex`锁定，只要它被任何人使用。

此解决方案的问题在于，您现在有责任确保在这段时间内`mResource`保持有效（特别是 - 它不会被破坏）。如果锁定`mMutex`就足够了，那么你很好。

否则，上述解决方案必须根据您的特定需求进行调整。例如，您可能希望拥有`counter`一个简单的对象，该对象`struct`同时保留了拥有.`Lock``shared_ptr``A``mResource`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-12T16:36:09.353

要添加到[Adam Badura 的答案](https://stackoverflow.com/a/50165107/1658105)，对于使用`std::mutex`and的更一般情况`std::lock_guard`，这对我有用：

```
auto A::getResource()
{
    auto counter = std::make_shared<std::lock_guard<std::mutex>>(mMutex);
    std::shared_ptr<Resource> ptr{ counter, &mResource} ;
    return ptr;
} 
```

其中 和 的生命周期`std::mutex mMutex`由`Resource mResource`某个类管理`A`。

# android - 访问 android、sdcard 或系统分区中的文件哪个更快？

> ID：15876333
> 
> 赞同：0
> 
> 时间：2013-04-08T10:01:51.800
> 
> 标签：android, performance, file, android-sdcard

我有一个简单的问题。如果我在 android 的系统分区中有一个文件，并且如果我将相同的文件复制到 sdcard 上，哪个会更快访问？

请回答这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:07:49.743

您将无法真正注意到从内部存储器和 SD 卡访问文件之间的访问速度差异。使用内部存储器，您将获得额外的安全优势，因为其他应用程序无法访问它，或者您无法通过挂载访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:12:45.753

答案是手机内部存储器，因为与 SD 卡相比，磁盘管理（用于手机）对于内部存储器来说总是更好，因此访问内部存储器的速度更快，但您不会注意到因为差异以毫秒为单位

使用内部存储器，您将获得优势，除非设备未植根，否则用户无法看到您的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:03:42.397

差异可以忽略不计。在任何情况下，大多数较新的设备都只有一个存储在设备上，它是分区的。在此类设备中，无需访问单独的 SD 卡，因为内存与系统存储相同。

在带有 SD 卡的设备上，访问文件可能会有很短的延迟，但在几乎任何情况下都可以忽略不计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T21:48:03.670

如前所述，时差并不明显。但是，一个简单的物理定律（和 EE）会告诉您，距离越长（在本例中为 I/O 总线），所需的时间就越长。因此，SDCard 比主板上的任何东西都慢，即使它以毫秒为单位。

我发现 SDCard 最适合用于媒体文件的静态存储，并且应在手机上安装应用程序，使它们尽可能快地运行，即使您可以将一些应用程序移动到 SDCard。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-20T06:57:27.817

除非您处理非常大的视频文件，否则速度并不明显。SD卡的速度是按等级来衡量的：（4、6或10级），10级的速度更高，为10MB/S，2级的速度在2MB/S左右。所以，对于好等级的SD卡，速度差距更小。但是，通常手机内存比 SD 卡快。

# sql - 按范围分组 ms 访问数据库

> ID：15876334
> 
> 赞同：2
> 
> 时间：2013-04-08T10:02:00.187
> 
> 标签：sql, ms-access, group-by, range

我想生成一个计数表，它显示在每个范围 im ms 访问数据库中出现了多少次分数。

数据库表

```
smsId int, Age text,etc.. 

Age   range  | number of occurrences
-------------------------------------
   0-9       |        11
  10-19      |        14
  20-29      |         3
   ...       |       ... 
```

什么是sql语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:21:08.637

您可以使用[`IIF()`](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)表达式为每个年龄范围创建组，然后计算每个范围内的行数：

```
select AgeRange, count(*) as NumberOfOccurrences
from
(
  SELECT 
    iif(age >= 0 and age <=9, "0-9", 
         iif(age>=10 and age <=19, "10-19", "20-29")) as AgeRange
  FROM yourtable
) d
group by AgeRange 
```

如果您有更多的年龄范围，那么您将向`IIF()`.

另一种方法是添加一个包含报告年龄范围的表格。示例表可以是：

```
create table AgeRange
(
  ageRangeStart number,
  ageRangeEnd number
);

insert into AgeRange values
(0, 9),
(10, 19); 
```

如果您创建此表，则可以将该表连接到现有表以报告范围：

```
SELECT r.agerangestart &" - "&r.agerangeend as AgeRange, 
  count(*) as NumberOfOccurrences
from agerange r
inner join test t
  on t.age >= r.agerangestart
  and t.age <= r.agerangeend
group by r.agerangestart &" - "&r.agerangeend 
```

这两个查询都会给出结果：

```
+----------+---------------------+
| AgeRange | NumberOfOccurrences |
+----------+---------------------+
| 0 - 9    |                   6 |
| 10 - 19  |                   4 |
| 20 - 29  |                   2 |
+----------+---------------------+ 
```

注意：这两个查询都在 MS Access 2003 中进行了测试。

# c# - 将 .NET 配置为在 Windows 7 上使用 3.5，在 Windows 8 上使用 4.5

> ID：15876338
> 
> 赞同：2
> 
> 时间：2013-04-08T10:02:17.917
> 
> 标签：c#, .net, windows

如何配置我的应用程序以在 Windows 7 和 Windows 8 上运行？我的应用程序是用 .net 3.5 编写的，它在 windows 7 中运行良好，但对于 windows 8，应用程序要求打开 .net 3.5 功能。这是因为 Windows8 默认具有 .net framework 4.5。所以我的问题是如何配置我的应用程序以在 Windows 8 中使用 .net 4.5 和在 Windows 7 中使用 .net 3.5？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:07:12.703

你不能
你的应用程序必须针对一个 .NET 框架，你不能针对多个框架。我建议您以 .NET 4 为目标，因为它广泛安装在 Windows 7 上，带有 4.5 的 Windows 8 可以为 .NET 4 运行应用程序构建。从 .NET 3.5 升级到 .NET 4 效果很好。

请务必以 .NET 4**客户端配置文件**为目标，因为 Windows 计算机上默认未安装完整的 .NET 4。

编辑：有关将代码从 .NET 3.5 升级到 .NET 4 的更多信息（几周前我不得不这样做，所以我知道会发生什么样的问题）。**除非**您的代码使用不包含在 .NET 4 客户端配置文件中的服务器端组件（即 System.Web）并且需要完整的 .NET 4（默认情况下未安装在最终用户的 win7 PC 上），否则
这样做会很容易）。 只需将您的项目切换到 .NET 4 客户端配置文件并检查它是否已编译。如果它被编译，则意味着它不使用任何服务器端组件。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:08:36.053

可能的事情可能是：

*   编译不同的程序集
*   让 Windows 8 用户安装 .NET 3.5（或 Windows 7 安装 4.5）

最好的解决方案可能是在 3.5 中构建它，然后让 Windows 8 用户安装 .NET 3.5，他们可能无论如何都需要它来获得更多应用程序。程序在启动时不会决定使用 .NET 4.0 或 .NET 3.5。（或者你制作了某种 dropper，它在运行时用 codedom 编译二进制文件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:27:47.657

Windows 8 默认具有*CLR 版本 4*，因此您可以使用以下代码更改运行时

```
 <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/> 
    </startup>
    <runtime>
        <NetFx40_LegacySecurityPolicy enabled="true" />
    </runtime> 
```

在*配置部分下。这将更改您的 CLR*版本。我认为这会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:05:31.420

按照这个链接：

[http://www.techrepublic.com/blog/10things/10-things-to-try-when-applications-wont-work-with-windows-8/3540](http://www.techrepublic.com/blog/10things/10-things-to-try-when-applications-wont-work-with-windows-8/3540)

参考 ：

**安装 .NET Framework 3.5**

> 安装 Windows 8 时，会默认安装 .NET Framework 4.5 版。但是，较旧的应用程序通常需要较早版本的 .NET Framework。如果您收到与 .NET Framework 相关的错误，您可以进入控制面板，单击程序，然后选择打开或关闭 Windows 功能的选项。Windows 将显示您可以启用或禁用的各种组件的列表。列表中的一项是 .NET Framework 3.5，它还包括 .NET 3.0 和 2.0。安装此组件可能会纠正您遇到的问题。

在那里面。**

# powershell - 如何将特定年份的文件移动到具有相对路径的新目录？

> ID：15876339
> 
> 赞同：-8
> 
> 时间：2013-04-08T10:02:18.697
> 
> 标签：powershell

在`Windows 7`中，我想用来`PowerShell`将当前目录及其子目录、子子目录等中的所有文件，以一定的`LastWrite YEAR`，移动到具有它们相对路径的新目录中。

有人可以写下我需要`PowerShell`使用的行代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:02:32.733

这是保持相对路径的解决方案。你需要的是 CD 到源目录然后更新

```
 $files = Get-ChildItem -Recurse -File | where {$_.LastWriteTime.Year -eq 2012} 
```

并运行

```
 $baselength = (Get-Location).Path.Length + 1
    $destDir = 'G:\dest'

    $files = Get-ChildItem -Recurse -File | where {$_.LastWriteTime.Year -eq 2012}

    $files | foreach {
        Write-Verbose "moving $_.fullname"    
        $dest = Join-Path $destDir $_.FullName.Substring($baselength)
        if ( -not (Test-Path (Split-Path $dest)))
        {
            New-Item -ItemType directory -Path (Split-Path $dest) | Out-Null
        }
        Move-Item $_.FullName $dest -Force
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:14:18.410

您可以使用该`Move-Item`功能将文件从一个路径移动到另一个路径

例子：

`Move-Item 'c:\YourFolder\*' 'c:\DestinationFolder'`

这会将文件夹中的所有文件移动到目标文件夹 (*)。

* * *

要从某个日期移动文件，您必须将其通过管道传输到`where-object`函数中：

例子：

`Get-ChildItem 'C:\folder' | where-object {$_.lastwritetime.Year -eq 2013} |
Move-Item -destination 'c:\DestinationFolder'`

[http://technet.microsoft.com/en-us/library/ee176910.aspx](http://technet.microsoft.com/en-us/library/ee176910.aspx)

# excel - 在excel中填充HttpResponce csv数据 - VBA

> ID：15876340
> 
> 赞同：0
> 
> 时间：2013-04-08T10:02:19.260
> 
> 标签：excel, excel-2007, vba

在我的情况下，我调用 HttpRequest 来获取结果 `result = winHttpReq.responseText` .result 实际上是一个字符串。我在 woorkbook 加载时将结果作为逗号分隔的格式字符串获取。我想显示这些文本从特定行开始，在我的 excel 中以逐行方式列。我在响应字符串中用 `"\n"` 分隔每一行。

它必须在 wookbook 加载 `Workbook_Open()` 时填充。这样做的简单解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:12:51.820

如果您可以将 HTTPResponse 放入 ADODB Recordet，则可以使用 CopyFromRecordset 方法。

或者，如果您可以将 XLHTTPResponse 作为 XML 数据获取，那么 Excel 应该能够将其视为数据

# jquery - 如何从不同的应用程序远程调用 Grails Web 服务

> ID：15876343
> 
> 赞同：1
> 
> 时间：2013-04-08T10:02:36.263
> 
> 标签：jquery, web-services, rest, grails, getjson

我的 Grails 应用程序中有一个 Web 服务方法，它以 json 格式呈现数据。

```
def getCityListJson(){
    def cityList= City.list() as JSON
    render cityList
} 
```

这基本上是一个控制器动作。

现在我想从我的 PHP 应用程序中调用这个方法

我已经尝试在我的 php 页面中使用 Jquery

```
 <script type="text/javascript">
      $(function(){
         $("#geCity").click(function(){
             $.getJSON('http://localhost:8080/city/getCityListJson',               
             function(data) {
                console.log(data)
              });
         });
     });
  </script> 
```

但没有得到任何回应..

我是 Web 服务概念的新手.. 调用 Web 服务的正确方法是什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:18:33.737

在您的成功回调中，您尝试记录`json`未声明的日志。

你已经命名了你的参数`data`。改变这个，它应该工作：

```
<script type="text/javascript">
    $(function(){
        $("#geCity").click(function(){
            $.getJSON('http://localhost:8080/city/getCityListJson',               
                function(data) {
                    console.log(data)
            });
        });
    });
</script> 
```

如果这没有记录任何内容，请使用 firebug 或类似的东西检查您与 web 服务的通信。因此，您可以检查请求是否正确发送以及服务器是否按预期发送（JSON）响应。

# mongodb - 没有索引 mongo 查询无法排序

> ID：15876347
> 
> 赞同：0
> 
> 时间：2013-04-08T10:02:41.823
> 
> 标签：mongodb, exception, indexing

我有以下查询：

```
{ "loc" : { "$near" : [ 32.08 , 34.779] , "$maxDistance" : 0.04499640028797696} , "isCreated" : true , "loc.venueName" :  null} 
```

排序 ：

```
{"lastActiveTime":-1} 
```

限于 100 个文档。

***loc*** - 包含键的嵌入文档（ lat,lon,venueName ）

***isCreated*** - 布尔值

**lastActiveTime** - 日期

我得到了例外：

> org.springframework.data.mongodb.UncategorizedMongoDbException：sort() 的数据太多，没有索引。添加索引或指定较小的限制；

我已经尝试了各种索引的变体，复合而不是复合，但我仍然遇到上述异常，尝试过......

```
{'loc':'2d', 'lastActiveTime':-1} 
```

和：

```
{'lastActiveTime':-1} 
```

我需要在文档中创建哪些索引才能使查询成功？

MongoDB 版本是 2.0.6

这是示例文档（带有相关键）：

```
{
  "_id" : "5d5085601208aa918bea3c1ede31374d",
  "gender" : "female",
  "isCreated" : true,
  "lastActiveTime" : ISODate("2013-04-08T11:30:56.615Z"),
  "loc" : {
    "lat" : 32.082230499955806,
    "lon" : 34.813542940344945,
    "locTime" : NumberLong(0)
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:09:17.417

在我看来，索引尚未创建。如果您正在排序，`lastActiveTime`那么这就是要索引的那个。

尝试通过在 mongo shell 中键入以下内容来确保您已正确设置索引：

```
use yourdbname
db.yourcollectionname.getIndexes() 
```

# java - JAX-WS 服务在使用默认构造函数时给出 FileNotFoundException？

> ID：15876349
> 
> 赞同：0
> 
> 时间：2013-04-08T10:02:42.637
> 
> 标签：java, web-services, jax-ws, classloader, ear

我正在尝试在我的企业应用程序中编写 JAX-WS 客户端。我的客户端代码如下

```
...
public class WSClient{
...
MyHelloService service = new MyHelloService();
service.sayHello("Test"); 
```

但我得到以下异常

```
Caused By: java.io.FileNotFoundException: zip:C:/appsrv/domains/xdv_v00_7772_localhost/tmp/_WL_user/geftj9/war/WEB-INF/lib/wsClient.jar!/com/test/MyHelloService.wsdl 
```

我的EAR结构如下

```
MyEAR.ear
      APP-INF/wsdl.jar[contains MyHelloService.wsdl]
      APP-INF/stubs.jar[contains stubs of JAX-WS]
      somewar.war
            WEB-INF/lib/wsdl.jar[contains WSDL]
            WEB-INF/lib/stubs.jar[contains stubs of JAX-WS]
            WEB-INF/lib/wsClient.jar[This jar has WS Client code using stubs] 
```

我发现 JAX-WS 生成的服务类有以下代码

```
package com.test;
public class MyHelloService extends Service{            
    ..
    MyHelloService(){
        ..
        baseUrl = com.test.MyHelloService.class.getResource(".");
        url = new URL(baseUrl, "MyHelloService.wsdl");
        ..
    }
} 
```

我也尝试如下更改我的客户。但它给了我同样的例外。

```
URL baseUrl = com.test.WSClient.class.getClassLoader().getResource(".");
url = new URL(baseUrl, "MyHelloService.wsdl");
MyHelloService service = new MyHelloService();
service.sayHello("Test"); 
```

我想知道如何从 WEB-INF/lib/wsdl.jar 加载 WSDL。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:39:25.237

如果`MyHelloService.wsdl`住在 中`wsdl.jar`，请尝试下一个：

```
ClassLoader classloader = Thread.currentThread().getContextClassLoader();
URL wsdlLocation = classloader.getResource("MyHelloService.wsdl");
QName serviceName= new QName("http://test.com/", "MyHelloService");

MyHelloService service = new MyHelloService(wsdlLocation, serviceName);
service.sayHello("Test"); 
```

*   [*使用 Java 6 和 JAX-WS 使用 Web 服务*](http://shrubbery.mynetgear.net/c/display/W/Consuming+a+Web+Service+with+Java+6+and+JAX-WS)
*   [*加载 Java 属性文件*](http://viralpatel.net/blogs/loading-java-properties-files/)

# css - Zurb's Foundation 4 如何计算排版？

> ID：15876353
> 
> 赞同：5
> 
> 时间：2013-04-08T10:02:55.900
> 
> 标签：css, responsive-design, sass, zurb-foundation, typography

我一直在挖掘很多关于黄金比例和模块化比例的文章，试图了解排版在技术层面上是如何工作的。我不能说我完全理解它，但我现在对 Zurb 的 Foundation 4 更加困惑。

在他们的[文档](http://foundation.zurb.com/docs/components/type.html)中，他们表示他们不再依赖/使用模块化比例进行排版。所以我很想知道他们是如何得出这些数字的，尤其是在他们的标题元素中。

例如：这就是他们的标题在**_type.SCSS中的写法**

```
$h1-font-size:                         emCalc(44px) !default;
$h2-font-size:                         emCalc(37px) !default;
$h3-font-size:                         emCalc(27px) !default;
$h4-font-size:                         emCalc(23px) !default;
$h5-font-size:                         emCalc(18px) !default;
$h6-font-size:                         1em !default;

// Also...

$paragraph-font-size:                  1em !default; 
```

**我的问题；**

1.  它们是如何得出这些值的，以及它们如何在数学上相互关联？文档似乎没有具体说明它是如何工作的。

2.  我想将段落字体大小（基线？）更改为 18px（1.125em）而不是 16px（1em） - 我将如何计算标题元素，以便它们相距适当/数学上合理的距离?

3.  我是否正确假设更改标题大小始于选择正文字体大小然后从那里计算？

我非常感谢关于这个主题的任何建议，我不是最有数学头脑的人，所以......要温柔。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T10:46:51.830

```
// Working in ems is annoying. Think in pixels by using this handy function, emCalc(#px)
@function emCalc($pxWidth) {
  @return $pxWidth / $em-base * 1em;
} 
```

这是 Foundation 用来计算它的函数，“$em-base”应该为您提供全局上下文。

我发现 Zurb 当前方法的一件事是它没有像 em 的级联那样提供足够的功率/足够的灵活性，所以我通常将其修改为：

```
@function emCalc($target, $context:16) {
    @return $target / $context * 1em;
} 
```

这使您可以判断元素所在的上下文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:38:25.803

字体大小值不一定是数学完美的某种计算。作者完全有可能尝试了一些值并认为“这看起来不错”。根据这篇[文章](http://www.zurb.com/article/1000/foundation-3-0-typography-and-modular-sca)，似乎他们最初使用[14px @ 1:1.618、44px @ 1:1.618](http://modularscale.com/scale/?px1=14&px2=44&ra1=1.618&ra2=0)和四舍五入很多，最终决定只使用`18px`而不是`16.807`. 使用模块化秤很好，但打破它并不违法。

回答你的第二个问题，关于`em`s 的伟大之处在于它们是相对的！如果要按比例缩放所有类型，只需更改正文上的字体大小：

```
body {
  font-size: 18px;
}

h1 {
  font-size: 3em;
}
h2 {
  font-size: 2em;
}
p {
  font-size: 1em;
} 
```

[演示](http://codepen.io/bookcasey/pen/mEIuH)

由于基础在 ems 中完成所有操作，因此您无需编辑任何变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T23:25:53.597

我们仍然使用模块化比例来确定字体大小，我们只是不再使用模块化比例[ruby​​ gem](https://github.com/Team-Sass/modular-scale)以减少依赖关系。Foundation 4 中的字体大小是使用黄金比例简单地手动计算（然后四舍五入）的，如我们关于 Foundation 3 排版的博客文章中所述（zurb [dot] com/article/1000/foundation-3-0-typography-和模块化sca）。

从放大正文开始并向上计算是生成字体大小的好方法，尽管我建议使用双比例方法，如 Tim Brown 的文章[更有意义的排版](http://alistapart.com/article/more-meaningful-typography)中所述，因为它不是极端的增加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T21:28:16.670

作者在这篇文章中解释了他们的方法：

[http://zurb.com/article/1000/foundation-3-0-typography-and-modular-sca](http://zurb.com/article/1000/foundation-3-0-typography-and-modular-sca)

# iphone - 使用 FBRequestConnection 错误处理程序获取 Facebook 数据的问题

> ID：15876356
> 
> 赞同：0
> 
> 时间：2013-04-08T10:03:03.183
> 
> 标签：iphone, facebook, error-handling, facebook-fql

为了一次获取所有朋友的详细信息，我使用 FQL 查询和带有错误处理程序的 FBRequestConnection 将所有数据保存到一个数组中，即

```
- (void)fetchFriendDetails
{
    NSString* query = [NSString stringWithFormat:@"SELECT uid,name,birthday_date,pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"];

    // Set up the query parameter
    NSDictionary *queryParam = [NSDictionary dictionaryWithObjectsAndKeys:
                                query, @"q", nil];
    // Make the API request that uses FQL
    [FBRequestConnection startWithGraphPath:@"/fql"
                                 parameters:queryParam
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error) {
                              if (!error)
                              {
                                  NSArray *tempArray = [result valueForKey:@"data"]; 
                                  NSMutableArray *tempArrayAbout = [NSMutableArray arrayWithArray:tempArray]; 
                                  self.friendsDetailsArray = tempArrayAbout;
                                  NSLog(@"details are %@",friendsDetailsArray);
                              }
                          }];
} 
```

当用户单击同步按钮时，将执行上述方法，然后执行将数据保存到数据库中。但是我这里有个问题！由于 FBRequestConnection 错误处理程序是一个回调函数，发生的情况是它最初不执行，并且对于第二次尝试，它进入并将所有朋友数据保存在**FriendsDetailsArray**中，这是我的同步按钮操作：

```
- (IBAction)syncSettings:(id)sender
{
if (self.remindBeforeDaysField.text.length != 0 && self.setTimeField.text.length != 0)
    {
        self.syncProgressHUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
        self.syncProgressHUD.labelText = kSyncingBirthdays;
        self.syncProgressHUD.detailsLabelText = kPleaseWait;
        self.syncProgressHUD.mode = MBProgressHUDModeIndeterminate;
        [self.navigationController.view addSubview:syncProgressHUD];
        syncProgressHUD.delegate = self;
        dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
            // Do the task in the background
            [syncProgressHUD show:YES];
            [self saveUpdateFriendDetails];
            // Hide the HUD in the main thread 
            dispatch_async(dispatch_get_main_queue(), ^{
                [MBProgressHUD hideHUDForView:self.view animated:YES];
            });
        });
    }
} 
```

由于我的friendsDetailsArray有问题，我不得不将我的代码移动到**viewDidLoad**方法，就保存数据而言，这对我来说效果很好。我不明白为什么我无法更新数据，尽管我可以通过日志查看所有条件、数组值、包含所有 Facebook 好友 ID 的集合。换句话说，我可以保存好友详细信息，但无法更新。

**令我惊讶的是，我在调试时发现了一些疯狂的事情，我已经检索了所有 Facebook 朋友 id（如果存在）并存储在 NSMutableSet 中，然后检查该集合是否包含我们的 Facebook 朋友 id 的条件，我想我的数据库是否已经保存朋友记录，那么条件应该是有效的，但令人震惊的是它没有验证并跳转到反之亦然的条件，即如果设置不包含我们的 Facebook id**，这是我的示例实现代码：

```
-(void)saveUpdateFriendDetails
{
NSLog(@"reminder set values are %@",remindersSet);
NSLog(@"id is %@",facebookID);
if(updateIfExistSwitch.on && [remindersSet containsObject:facebookID])
{
   //Do update stuff
}

else if(![remindersSet containsObject:facebookID])
{
   //Do insertion stuff
}
} 
```

这是用于澄清的记录输出：

![在此处输入图像描述](https://i.stack.imgur.com/o7ld4.png)

正如我们在图像中观察到我的 Facebook id 存在于 NSMutableSet 即提醒集中，我不知道为什么条件：**if(updateIfExistSwitch.on && [remindersSet containsObject:facebookID])**没有被验证：O

此外，我相信在 viewDidLoad 中编写代码根本不是解决该场景的正确方法，谁知道呢，用户可能会输入详细信息并快速单击同步按钮，到时不会发生朋友详细信息的同步。我已经测试了场景也是。我认为所有的东西都围绕一个地方，即 FBRquestConnection 错误处理程序，我可以通过调试看到它不是第一次进入循环，而是第二次。

我希望先执行获取朋友详细信息操作，然后再将数据保存/更新到 sqlite 数据库。

**注意：saveUpdateFriendDetails 是我保存或更新数据的方法，您可以观察同步按钮动作中的 [self saveUpdateFriendDetails] 行**

有人可以指导我吗？

有用的建议鼓掌，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:59:41.603

我终于找到了解决方案，让我回答我自己的问题，以便有人可以从中受益。成功解决了 2 个问题：

**-> [remindersSet containsObject:facebookID] 条件失败，因为 facebookID 以 NSDecimal 格式检索，因此我们需要在检索之前指定字符串格式。**

**-> 第二个问题是回调函数，因为它是回调函数，我们需要在获取详细信息并保存到数组后执行保存或更新操作。**

希望这对某人有帮助

谢谢 ：）

# plsql - PL SQL 替换字符串问题

> ID：15876361
> 
> 赞同：0
> 
> 时间：2013-04-08T10:03:29.977
> 
> 标签：plsql

嗨，我正在用 PL SQL 编写一个过程，我需要在其中检索一个字符串并替换其中的一些值。我的问题是，如果我在其中传递变量，则替换语句不起作用。

```
tempPrewMonth      VARCHAR2(20);
tempMonth          VARCHAR2(20);
link               VARCHAR(400);

//First of all i stored values in the variables tempPrewMonth and  tempMonth

SELECT to_char((c.month-1),'09')
       INTO tempPrewMonth
       FROM dual;

SELECT to_char((c.month),'09')
        INTO tempMonth
        FROM dual;

//Replace the  "tempPrewMonth" in the "link" variable with "tempMonth" value (this part doesn't work. I don't get any error but the replacement doesn't work)

EXECUTE IMMEDIATE 'select replace (:1,:2,:3)                
                    from dual' 
INTO link
USING link,tempPrewMonth,tempMonth ; 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:09:37.177

使用`to_char(...,'fm09')`而不是`to_char(...,'09')`.

# sql-server - 在 SQL Server 中将单个数字与范围内最接近的数字匹配

> ID：15876362
> 
> 赞同：3
> 
> 时间：2013-04-08T10:03:41.233
> 
> 标签：sql-server, tsql, sql-server-2012

我有一个表格显示基于数字的评分数字，如下所示：

*   0-24 = 新手
*   25-49 = 实习生
*   50-74 = 中等
*   75-99 = 专业
*   100 = 超人

我需要取一个数值，并将其与上面最接近的等效等级相匹配。因此，**80**相当于**Pro**，因为它符合基本*Pro*级别，但低于基本*超人*级别。

我已经编写了一些代码来测试这一点，但 TOP 1 过滤器似乎在 JOIN 之前应用，这意味着我总是看到最低成绩而不是实际成绩。谁能帮我提出一个更好的选择？

[SQL小提琴在这里](http://www.sqlfiddle.com/#!6/d41d8/3393)

代码在这里：

```
DECLARE @tbl_levels TABLE ([schemeID] int, [calevel] numeric(5,2), [desc] nvarchar(200))
DECLARE @level numeric(5,2) = 70
DECLARE @schemeID int = 1

insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 0, 'Newbie')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 25, 'Trainee')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 50, 'Moderate')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 75, 'Pro')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 100, 'Superman')

SELECT
    *
FROM
    (SELECT
        @level as [level],
        @schemeID as [schemeID]) ca LEFT OUTER JOIN 
    (SELECT 
        TOP 1 * 
    FROM 
        @tbl_levels
    ORDER BY 
        calevel ASC
    ) lvl ON lvl.schemeID = ca.schemeID AND lvl.calevel <= ca.[level] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:15:29.743

```
SELECT @level as Level,s.*
from @tbl_levels s
where [calevel]=(Select Max([calevel]) from @tbl_levels where [calevel]<=@level) 
```

作为对您评论的回答

```
SELECT
    t.[level],
    (Select [desc] from @tbl_levels where [calevel]=(Select Max([calevel]) from @tbl_levels where [calevel]<=t.[level])) as [Desc]
FROM
    @test t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:43:36.907

您可以将问题改写为“与给定值匹配的最高级别是什么？” 然后解决方案变得明显。70 级为“中等”：

```
SELECT TOP(1) @level, *
FROM @tbl_levels
WHERE [calevel] <= @level
ORDER BY calevel DESC; 
```

对于多个值，只需使用[CROSS APPLY](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT
    t.[level],
    lvl.[desc]
FROM @test t 
cross apply (
select top(1) *
from @tbl_levels
where [calevel] <= [level]
order by calevel desc) as lvl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:26:01.683

（更新）尝试：

```
;with r as 
(select l.*, row_number() over (partition by [schemeID] order by [calevel]) rn
 from @tbl_levels l),
cte as
(select l.*, n.[calevel] as [nextlevel]
 from r l 
 left join r n on l.[schemeID] = n.[schemeID] and l.rn+1 = n.rn)
SELECT
    ca.*, cte.[calevel],cte.[nextlevel],cte.[desc]
FROM @test ca 
LEFT OUTER JOIN cte
ON ca.schemeID = cte.schemeID AND 
   ca.[level] >= cte.[calevel] AND
   ca.[level] < coalesce(cte.[nextlevel], ca.[level]+1) 
```

[（这里](http://www.sqlfiddle.com/#!6/d41d8/3417)的 SQLFiddle ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:12:03.227

```
DECLARE @tbl_levels TABLE ([schemeID] int, [calevel] numeric(5,2), [desc] nvarchar(200))
DECLARE @level numeric(5,2) = 70
DECLARE @schemeID int = 1

insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 0, 'Newbie')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 25, 'Trainee')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 50, 'Moderate')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 75, 'Pro')
insert into @tbl_levels ([schemeID],[calevel],[desc]) VALUES (1, 100, 'Superman')

SELECT
    TOP 1 *
FROM
    (SELECT
        @level as [level],
        @schemeID as [schemeID]) ca LEFT OUTER JOIN 
    (SELECT *
        FROM 
        @tbl_levels
    ) lvl ON lvl.schemeID = ca.schemeID AND lvl.calevel <= ca.[level]
    ORDER BY lvl.calevel DESC 
```

拉吉

# jquery - 如何在 jquery 循环插件中设置 100% div 宽度

> ID：15876364
> 
> 赞同：0
> 
> 时间：2013-04-08T10:03:45.297
> 
> 标签：jquery, html, width, cycle

我有问题..我必须将幻灯片 div 的宽度设置为 100%，即“sklo”div 的最大宽度。请参阅下面的代码：

```
$(function () {
$('#sklo').cycle({ 
    fx:     'scrollHorz', 
    speed:  1000, 
    timeout: 0,
    slideExpr: '.slide',
    slideResize: 1
        }); 
}); 
```

和表

```
<table>
 <tr>
  <td class="container">

<div id="content">

<div id="sklo">
<div class="slide">Text content 1</div>
<div class="slide">Text content 2</div>
<div class="slide">Text content 3</div>
</div>

</div>

  </td>
 </tr>
</table> 
```

和 CSS：

```
.container {
min-width:800px;
width:100%;
position:relative;
}
#sklo {
display:block;
min-width:675px;
min-height:250px;
width:100% !important;
height:100%;
border-radius:20px;
background-color:red;
}
.slide {
min-width:675px;
min-height:250px;
width:100% !important;
text-align:center;
} 
```

我的问题：

文本内容滑块不能是“sklo”的 100% 宽度？？如何设置 100% 的 .slide div？必须以 % 为单位，没有 px！

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:07:44.220

让你的`table`宽度达到`100%`然后它`content`会`automatically`采取`100% width`

```
<table width="100%">
    <tr>
      <td class="container">
         <div id="content">
           <div id="sklo">
             <div class="slide">Text content 1</div>
             <div class="slide">Text content 2</div>
             <div class="slide">Text content 3</div>
           </div>    
         </div>
      </td>
    </tr>
</table> 
```

# objective-c - Objective-C 的 @synthesize 是否需要为每种类型完成？

> ID：15876365
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:03:45.360
> 
> 标签：objective-c, code-design

我目前在我的 obj-c 文件的顶部有一大堆 @synthesize。

现在我正在为每种类型的变量做@synthesize，所以如果我有2个整数，称为xx，yy，那么我对它们都使用@synthesize等，但我仍然有很多行@synthesizes。

所以我的问题是，我需要这样做吗？

或者我可以把所有东西都放在一条大的@synthesize 线上吗？

是否需要将它们分成单独的@synthesizes？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:06:55.927

**两者都很好。**这是你的风格。

```
@synthesize a,b,c; 
```

类似于

```
@synthesize a;
@synthesize b;
@synthesize c; 
```

包含一个综合的一行使您具有可读性。

如果你在一行里放了几十个合成器，并且出现了一些错误，你需要再次扫描所有合成器的名称。

而多行合成会向您显示错误并且易于调试。

***此外，使用新编译器运行的 XCode4.4+ 可让您自动合成，**因此根本不需要合成**。*

# yii - 导出到 pdf 非英文字符的谷歌输入工具不起作用 php/YII

> ID：15876370
> 
> 赞同：0
> 
> 时间：2013-04-08T10:03:58.500
> 
> 标签：yii, tcpdf

我制作了一个基于 YII 的基于 Web 的软件，其中有两个功能。1) 导出到 Excel 2) 导出到 PDF

该软件有两种语言。

1.  英语
2.  古吉拉特语。

要输入古吉拉特语和英语，我使用的是“谷歌输入工具”

要导出，我使用 excelview YII 扩展 excel 和 tcpdf 导出到 PDF。虽然导出到 excel 对于两种语言都可以正常工作，但它不适用于 PDF。字体渲染有问题。

问题与此处相同[哪个 PDF 生成 API (Java) 支持古吉拉特语字体？](https://stackoverflow.com/questions/10499183/which-pdf-generation-api-java-supports-gujarati-font)

我不知道该怎么做，并且已经尝试了一切。我们可以在不指定任何字体的情况下生成 pdf 吗？tcpdf的`setFonts`功能可能会导致问题？

我没有在网站上使用任何古吉拉特语字体。我只使用 UTF-8 编码和带有 UTF-8 编码的数据库和带有 UTF8-general-ci 的列。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:19:06.100

古吉拉特语是印度文字，是吗？即使您有必要的字体，TCPDF 也不支持印度语文本呈现。（如果第 6 版的 TCPDF 解决了这个问题，有人纠正我，但我在更改日志中看不到任何表明它确实如此的内容。）

有关更多信息和一些潜在的替代方案，请参阅我对马拉雅拉姆语查询的回答：

[如何在 PHP 中使用 TCPDF 创建马拉雅拉姆语 PDF？](https://stackoverflow.com/questions/14869173/how-can-i-create-malayalam-pdf-using-tcpdf-in-php/14890068#14890068)

# linux - 在重定向命令前添加“&”

> ID：15876372
> 
> 赞同：1
> 
> 时间：2013-04-08T10:04:08.213
> 
> 标签：linux, shell, unix, csh

现在，我有一个使用重定向命令的脚本。

```
set filename1='/home/1.log'

echo "hello " >>& ${filename1} 
```

问题：

1.  我知道在文件处理程序之前添加了“&”，但是这里，“filename1”是一个文件名，是否需要在这个变量之前添加“&”？
2.  如果不是，这个“&”运算符是否还有其他含义？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:10:32.343

在 C shell 中，将标准输出`>&`和`>>&`标准错误都重定向到指定文件。

请注意，Csh 及其衍生版本与 Bourne shell 不兼容；您可能应该考虑切换到标准外壳。如今，Bash 和 Zsh 大体上支持与 Tcsh 相同的功能，而不会牺牲与 Bourne shell 的语法向后兼容性。另请参阅[http://www.perl.com/doc/FMTEYEWTK/versus/csh.whynot](http://www.perl.com/doc/FMTEYEWTK/versus/csh.whynot)

# ruby-on-rails - If/else Rails 要寻找什么？

> ID：15876376
> 
> 赞同：0
> 
> 时间：2013-04-08T10:04:27.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, if-statement, switch-statement

我无法弄清楚要为以下场景选择哪些参数进行比较。

我想链接到我网站上的特定页面，具体取决于使用哪个范围来获取主页上显示的数据。这可能吗？

例如，我有一个职位和部门模型，关系如此

邮政

```
belongs_to :department 
```

部门

```
belongs_to :post 
```

我通过范围抓取帖子，然后有一种方法从其范围中抓取第一个帖子。

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.published_on DESC"
scope :woodside_posts, :include => :department, :conditions => {"departments.name" => "Woodside"}, :order => "posts.published_on DESC" 
```

然后显示每个帖子的第一个帖子

```
def self.top_posts
#Array with each of the 4 departments - first record
top_posts = [
  self.tynewydd_posts.first,
  self.woodside_posts.first,
  self.sandpiper_posts.first,
  self.outreach_posts.first
]
#remove entry if nil
top_posts.delete_if {|x| x==nil}
return top_posts
end 
```

在我看来，然后我会遍历热门帖子

```
<% @toppost.each do |t| %>
<%= link_to 'Read more' %> <!-- Want to put a helper method here -->

<% end %> 
```

路线

```
/tynewyddnews #tynewydd_posts
/woodsidenews #woodside_posts 
```

在@toppost 实例变量中，我有可用的属性department.name，我通过我的.each 循环中的t.department.name 访问。

例如，我将如何说“如果@toppost.department.name ==“xxxx”然后link_to“/path”。只是寻找一些关于结构的提示，或者如果这可以转换为案例陈述，那将是什至更好的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:31:25.830

您可以使用哈希而不是数组，然后只返回键，因为您不需要它们的值：

```
def self.top_posts
   top_posts = { "tynewydd" => self.tynewydd_posts.first, 
              "woodside" => self.woodside_posts.first,
              "sandpiper" => self.sandpiper_posts.first,
              "outreach" => self.outreach_posts.first
               }
   top_posts.delete_if {|x| x.value==nil}
   return top_posts.keys
end 
```

现在你得到一个这样的哈希键数组： `["tynewydd","woodside",..]`

在您看来：

```
<% @toppost.each do |t| %>
      <%= link_to 'Read more', "#{t}news_path" %>
<% end %> 
```

# c++ - 两个参数的纯虚函数

> ID：15876382
> 
> 赞同：0
> 
> 时间：2013-04-08T10:04:59.223
> 
> 标签：c++

当我需要根据对象的类型调用不同的函数时，我使用虚拟方法。但是，当我有两个未知类型的对象时，我该怎么办？我有所有可能组合的代码，但实际调用它的最佳方法是什么？

**示例**：

有抽象类，它有后代，`Shape`例如`Point`、`Line`和。我们需要一个函数，它返回这些形状的最近点之间的最短距离，例如：`Polygon``Circle`

```
double shortestDistance(const Shape &first, const Shape &second); 
```

没有办法简化这个问题（至少在我的情况下不是）以避免实际上必须为每个组合使用不同的代码。

我当前的解决方案是让 Shape 拥有一个纯虚方法，该方法返回其实际类型（作为枚举），然后在对参数进行类型转换之前在两个嵌套的 switch 语句中使用此值，最后为特定组合调用适当的函数，如下所示：

```
switch (first.getType()) {
    case POINT:
        switch (second.getType()) {
            case POINT:
                return shortestDistancePointPoint((const Point &) first, (const Point &) second);
            case LINE:
                return shortestDistancePointLine((const Point &) first, (const Line &) second);
            ...
        }
    case LINE:
        switch (second.getType()) {
            ...
        }
    ...
} 
```

不过，这似乎有点笨拙，而且可能效率低下。那么，有没有更好的方法呢？

# android - Android maps v2 点击弹窗

> ID：15876390
> 
> 赞同：1
> 
> 时间：2013-04-08T10:05:26.557
> 
> 标签：android, google-maps

有没有办法在谷歌地图 v2 弹出窗口中点击另一个活动的意图？

这是我的代码：

```
@Override
public View getInfoContents(Marker marker) 
{
    View popup=inflater.inflate(R.layout.popup, null);

    final TextView tvtitulo=(TextView)popup.findViewById(R.id.tvTitulo);
    TextView tvDatos=(TextView)popup.findViewById(R.id.tvDatos);
    TextView tvCat=(TextView)popup.findViewById(R.id.tvCategoria);

    tvtitulo.setText(marker.getTitle());

    StringTokenizer tokens = new StringTokenizer(marker.getSnippet(), "?");
    final String first = tokens.nextToken();// this will contain "Fruit"
    String second = tokens.nextToken();// this will contain " they taste good"

    tvDatos.setText(first);
    tvCat.setText(second);

    ImageView imagen = (ImageView)popup.findViewById(R.id.menuImgView);

    if(marker.getTitle().substring(0,3).equalsIgnoreCase("Bar"))
        imagen.setBackgroundResource(R.drawable.bar);

    else if(marker.getTitle().substring(0,3).equalsIgnoreCase("Res"))
        imagen.setBackgroundResource(R.drawable.rest);
    else
        imagen.setVisibility(4);

    return(popup);
} 
```

我想在该方法中添加类似这样的内容：

```
 popup.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getApplicationContext(), InfoLocal.class);
            startActivity(intent);
            finish();
        }
    }); 
```

谢谢你的回答，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T21:21:55.957

是的，但如果您只想点击默认视图而不提供您自己的视图，您只需要这个：

```
googleMap.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() {
            public void onInfoWindowClick(Marker marker)
            {
            //do sth with  your  click

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:18:30.653

是的，这里看看我是如何做到的，你在代码中有注释以了解发生了什么：

```
// Setting a custom info window adapter for the google map
        map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }
                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

# c# - 与对象绑定

> ID：15876393
> 
> 赞同：1
> 
> 时间：2013-04-08T10:05:38.680
> 
> 标签：c#, xaml, mvvm, microsoft-metro, windows-store-apps

我想绑定项目对象中的 projectName 属性...这是我的 view.xaml.cs 文件..

**代码背后：**

```
 TempData t = new TempData();
        t.Contract = contract;
        t.Project = project;
        this.DataContext = t; 
```

我正在像这样在文本块中绑定它，但它不起作用。

**XAML：**

```
<TextBlock Text="{Binding ProjectName,  Mode=TwoWay}" 
           DataContext="{Binding t}" FontSize="20" 
           Foreground="Black" 
           TextAlignment="Right" 
           Margin="100,0,0,0">
     enter code here
</TextBlock> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:19:12.193

当您当时进行绑定时，属性名称和绑定路径必须与字符大小写相同。在这里，我发布了您想要的代码

XAML 不要在两侧使用 DataContext。在 XAML 或代码隐藏中使用

```
<TextBlock Text="{Binding ProjectName, Mode=TwoWay}" 
           FontSize="20" 
           Foreground="Black" 
           TextAlignment="Right" 
           Margin="100,0,0,0" /> 
```

C＃

```
class TempData
{
    public string Contract { get; set; }
    public string ProjectName { get; set; }
}

public sealed partial class BlankPage2 : Page
{
    public BlankPage2()
    {
        this.InitializeComponent();
        string contract = "contract", project = "project";
        TempData t = new TempData();
        t.Contract = contract;
        t.ProjectName = project;
        this.DataContext = t;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:53:56.963

我想你想说的是这个（但很难说）......

```
<TextBlock Text="{Binding Project.ProjectName,  Mode=TwoWay}" 
       FontSize="20" 
       Foreground="Black" 
       TextAlignment="Right" 
       Margin="100,0,0,0">
    ...
</TextBlock> 
```

或者如果你愿意...

```
<TextBlock Text="{Binding ProjectName,  Mode=TwoWay}" 
       DataContext="{Binding Project}" FontSize="20" 
       Foreground="Black" 
       TextAlignment="Right" 
       Margin="100,0,0,0">
    ...
</TextBlock> 
```

假设您`TempData.Project`是某个项目类`ProjectName`

```
// in your code-behind...
this.DataContext = new TempData
{
    Contract = new Contrac{},
    Project = new Project{ ProjectName = "My proj...", }
}
// this is for the window or user-control (I guess) - thus DataContext to start with... 
```

您的 TextBox DataContext 是相同的 (TempData) -**没有`t`there**。

**这就是你已经在的地方**- 即你的 TextBox 的“上下文”（除非你有一些其他控件，列表项等）。直接绑定到`Project.ProjectName`

# python - isinstance 行为与模块重新加载

> ID：15876395
> 
> 赞同：5
> 
> 时间：2013-04-08T10:05:42.133
> 
> 标签：python, import, reload, isinstance

给定以下两个 .py 文件：

类.py

```
class A(object):
    pass 
```

主文件

```
def importer(klass):
    """
    Used to import classes from there python qalname
    """
    import_ = lambda m, k: getattr(__import__(m, fromlist=k), k)
    klass = klass.split('.')
    module = '.'.join(klass[:-1])
    klass = klass[-1]
    return import_(module, klass)

from aclass import A

import_A = importer('aclass.A')
print isinstance(A(), import_A)  # Expected to be true 
print isinstance(import_A(), A)  # Expected to be true 
```

在这个阶段，一切正常（我的程序打印`True\nTrue`）但是如果我修改`importer`方法以强制重新加载，即：

这一行：

```
 import_ = lambda m, k: getattr(__import__(m, fromlist=k), k) 
```

替换为：

```
 import_ = lambda m, k: getattr(reload(__import__(m, fromlist=k)), k) 
```

我的程序返回

```
False
False 
```

而且我不理解这种行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T11:02:37.840

重新加载一个模块意味着重新执行它的内容，在这种情况下`class A(object): pass`。所以它创建了另一个不同的类。这与以下行为相同：

```
class A(object):
    pass
a = A()
class A(object):          # a different class
    pass
print isinstance(a, A)    # False 
```

这应该足以解释为什么裸露`reload()`通常是一个坏主意。我相信其他人可能会指出实现更复杂的重新加载过程的框架，例如修补旧类以被认为与新类相同。

# c# - 当焦点在多行文本框中时，如何使用 Enter 键提交表单？

> ID：15876401
> 
> 赞同：0
> 
> 时间：2013-04-08T10:06:25.800
> 
> 标签：c#, javascript, asp.net, ajax, c#-4.0

我正在使用多行文本框和按钮。我只想在用户按下回车键时提交表单，所以我将表单的默认按钮设置为按钮 id，我只想在页面加载后将焦点设置为多行文本框但是当我按回车键将进入新行，表单未提交。

```
<form id="form1" runat="server" defaultbutton="btnSend" >
<table>
<tr><td>Message: </td><td><asp:TextBox ID="txtMsg" CssClass="mymsg" TextMode="MultiLine" runat="server"></asp:TextBox></td>
        <td colspan="2"><asp:Button ID="btnSend" runat="server" onclick="btnSend_Click" 
                OnClientClick="scroll()" Text="send" />
        </td></tr>        
        </table> 
```

谁能帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:11:33.387

您可以在标签中设置默认按钮属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:28:22.050

`enter` 替代解决方案：在下一行提交表单`shift`+`enter`

尝试这个[`DEMO`](http://jsfiddle.net/jishnuap/zYEMv/)

[参考](https://stackoverflow.com/questions/6014702/how-do-i-detect-shiftenter-and-generate-a-new-line-in-textarea)

# android - 在活动和服务之间持续存在的数据 (aidl)

> ID：15876405
> 
> 赞同：0
> 
> 时间：2013-04-08T10:06:47.170
> 
> 标签：android, android-pendingintent, aidl, data-persistence

我花了 6 个小时试图解决这个问题，但没有成功。

我有 2 个通过 AIDL 服务进行通信的应用程序。这是源代码：

应用 A：

```
protected void onCreate(Bundle savedInstanceState) {

...
Intent i = new Intent();
i.setClassName("xxx.service","xx.service.MyService");
try {
   Boolean ret = bindService(i, mConnection, Context.BIND_AUTO_CREATE);
} catch (Exception e) {
   Utils.error("application not installed");
}

...

button1.setOnClickListener(this);

//service connection instance
private ServiceConnection mConnection = new ServiceConnection() {
   public void onServiceConnected(ComponentName name, IBinder boundService) {
      service = BillingInterface.Stub.asInterface((IBinder) boundService);
      Utils.debug(mContext, "connection to service !");
      }

      public void onServiceDisconnected(ComponentName name) {
      service = null;
      }
};
...

//when clicking button, method of service is called
public void onClick(View arg0) {

   bundle = null ;
   bundle = service.myMethod(myId);

   PendingIntent pIntent = bundle.getParcelable(Utils.RESPONSE_P_INTENT);

   try {
    Intent in = new Intent();
    pIntent.send(mContext, 0, in);
   } catch (PendingIntent.CanceledException e) {
    Utils.error("Sending contentIntent failed:" + e.getMessage());
   }
}

}

public void onDestroy(){
super.onDestroy();
unbindService(mConnection);
mConnection = null;
} 
```

应用程序 B 中的服务返回一个包含 PendingIntent 的 Bundle：

```
@Override
public IBinder onBind(Intent arg0) {
return new BillingInterface.Stub() {

   @Override
   public Bundle myMethod(String id) throws RemoteException {

      //Service class implements parcelable class
      DB.domains.Service result = dao.getServiceDetails(appId);

      Intent intent = new Intent(); 
      intent.setClass(BillingService.this, xx.appli.test.class);
      intent.putExtra(Consts.PENDING_INTENT_INFO, result);

      PendingIntent pendingIntent;                  
      pendingIntent = PendingIntent.getActivity(BillingService.this, 0, intent, 0);                         

      bundle.putParcelable(Consts.PENDING_INTENT, pendingIntent);

      return bundle; 

   }
};
} 
```

在我的清单文件中：

```
<service
    android:name=".service.BillingService"
    android:enabled="true"
    android:exported="true"
    android:process=":remote" >
    <intent-filter>
        <action android:name=".service.BillingInterface.aidl" />
    </intent-filter>
</service> 
```

使用 pendingIntent 启动的 Activity：

```
public void onCreate(Bundle savedInstanceState) {
...
Bundle bundle = getIntent().getExtras();
serviceInfo = bundle.getParcelable(Consts.BUNDLE_APPLI);

//Data processing
...

finish()

} 
```

在 PendingIntent (Consts.PENDING_INTENT_INFO) 中作为参数传递的数据对于每个调用都是不同的。但是，在第一次调用之后，活动类（serviceInfo）中的数据每次都是相同的。数据似乎存在于某处。

我已经检查了以下所有要点：

*   Activity在数据处理后用finish()关闭
*   在 OnDestroy() 方法中关闭与服务的连接
*   调用方法时实例化“结果”对象（在服务中）
*   “捆绑”对象在调用服务之前被实例化

我很着急，非常感谢您的宝贵帮助。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:01:19.993

我已经修好了，谢谢！

我更改了以下行：

```
pendingIntent = PendingIntent.getActivity(BillingService.this, 0, intent, 0); 
```

到

```
pendingIntent = PendingIntent.getActivity(BillingService.this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

感谢您的帮助。

# c# - 显示详细信息表中的最新条目 - 使用 Linq 到实体

> ID：15876406
> 
> 赞同：1
> 
> 时间：2013-04-08T10:06:51.400
> 
> 标签：c#, wpf, linq-to-sql, linq-to-entities, wpfdatagrid

我有一个作为主表的数据网格和一个用于详细显示的饼图。我在主表中有一个服务器列表及其 ServerID，如下所示 -

![在此处输入图像描述](https://i.stack.imgur.com/WsnoL.png)

我的详细信息表是

![在此处输入图像描述](https://i.stack.imgur.com/gxyf2.png)

当我单击相应的服务器 ID 时，我想在饼图中显示 RAM 的最新值（取决于 RAM_ID）- 已使用和可用。

例如，服务器 1 的值将显示为（来自 Ram_ID） ![在此处输入图像描述](https://i.stack.imgur.com/3ihdY.png)

服务器 2

![在此处输入图像描述](https://i.stack.imgur.com/mz6KC.png)

& 用于服务器 3

![在此处输入图像描述](https://i.stack.imgur.com/BrUxl.png)

我尝试过的，

```
public override void OnApplyTemplate()
    {
        using (DB_Entities db = new DB_Entities())
        {

          var ramRow = db.UsageRAMs.OrderByDescending(c => c.ID).First();                

          var Ram = new List<UsageRAM>() { new UsageRAM() { name = "Used"  , value = ramRow.Used },
                                          new UsageRAM() { name = "Available" , value = ramRow.Available}};

          this.ramViewSource = (CollectionViewSource)this.FindResource("ramView");
          ramViewSource.Source = Ram;
        }
        base.OnApplyTemplate();
    } 
```

XAML

```
<customControls:LabeledPieChart x:Name="labeledPieChartRAM" BorderBrush="Transparent" Margin="2,10,35,27" Grid.RowSpan="3" Grid.Column="1">
       <customControls:LabeledPieChart.LegendStyle>
       <Style TargetType="dv:Legend">
        <Setter Property="Width" Value="0" />
       </Style>
     </customControls:LabeledPieChart.LegendStyle>
    <customControls:LabeledPieChart.Series>
   <customControls:LabeledPieSeries x:Name="labeledPieSeriesRAM" 
      ItemsSource="{Binding Source={StaticResource ramView}}"                                                              
      PieChartLabelStyle="{StaticResource pieChartLabelStyle}" 
      PieChartLabelItemTemplate="{StaticResource pieChartLabelDataTemplate}" 
      IndependentValuePath="name" DependentValuePath="value" IsSelectionEnabled="True"
      LabelDisplayMode="ArcMidpoint" />
     </customControls:LabeledPieChart.Series>
    </customControls:LabeledPieChart> 
```

输出

![在此处输入图像描述](https://i.stack.imgur.com/ULW2t.png)

上述代码的输出显示了详细信息表中的最新值，即它采用 RAM_ID 8 中的值，但在选择时我需要每个服务器的值。如何做到这一点？好心的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:01:32.100

尝试这样的事情

```
 //In this query i am grouping the record by ServerID and Selecting ServerID+ Max(Ram_ID )

     using (DB_Entities db = new DB_Entities())
     {
        var lstRamList = (from usgRam in DB.UsageRAMs 
           group usgRam  by new { usgRam.ServerID} 
           into grp
           select
           new
           {
           TMP_ID_ServerID = grp.Key.ServerID,
           TMP_MAX_RAM_ID= grp.Max(x => x.Ram_ID)}); 

 //in this lower list we save all the record from the Db.UsageRAMs where k.ServerID(from above list) == d.ServerID(from Your DB Context) && k.TMP_MAX_RAM_ID == d.Ram_ID
    var lstRAMListFinal = from d in db.UsageRAMs
    where lstRamList.Any(k =>
                        k.TMP_ID_ServerID== d.ServerID  &&
                        k.TMP_MAX_RAM_ID == d.Ram_ID)
   select d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:27:39.250

如果我没记错的话，您可以简单地使用详细信息表中的 RECORD_DATE 列！！！![在此处输入图像描述](https://i.stack.imgur.com/eAxTT.png)

# ormlite - 查询表中的最后一个id

> ID：15876408
> 
> 赞同：5
> 
> 时间：2013-04-08T10:07:01.897
> 
> 标签：ormlite, query-builder

我需要获取表中最后一条记录的 id。我努力了：

```
Dao<ParticipantModel,Integer> participantDao  = getHelper().getParticipantsDao();
        participant = participantDao.query(participantDao.queryBuilder()
                 .orderBy("id", false).prepare()).get(1); 
```

我不确定如何使用`QueryBuilder`来获得我正在寻找的结果。提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:42:02.363

在我的应用程序中，我只需将 limit(int) 添加到准备好的查询中，如下所示：

```
Dao<ParticipantModel,Integer> participantDao  = getHelper().getParticipantsDao();
    participant = participantDao.query(participantDao.queryBuilder()
         .orderBy("id", false).limit(1L).prepare()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T18:38:40.063

在请求中向 DBMS 询问 maxId 更有效。因为 DBMS 不应该对行进行排序。[这个答案](https://stackoverflow.com/a/22054283/3086074)中有一个很好的例子

```
 QueryBuilder<MODEL, ID> qb = dao.queryBuilder().selectRaw("max(id)");
    String[] columns = new String[0];
    try {
        GenericRawResults<String[]> results = dao.queryRaw(qb.prepareStatementString());
        columns = results.getFirstResult();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    if (columns.length == 0) {
        // NOTE: there are not any rows in table
        return 0;
    }
    return Integer.parseInt(columns[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-06T13:40:25.713

您可以简单地使用它：

```
ParticipantModel lastItem = participantDao.queryBuilder().orderBy("id", false).limit(1L).query().get(0); 
```

# dynamic - 在 WSO2 ESB 中动态更改端点地址

> ID：15876410
> 
> 赞同：6
> 
> 时间：2013-04-08T10:07:04.083
> 
> 标签：dynamic, wso2, uri, wso2esb, endpoint

如何动态设置端点地址？

我在运行时在属性中设置了端点地址，并且需要将端点地址的 URI 替换为其值。

如何使用此值设置地址的 URI 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-04T11:31:46.450

您可以创建您的端点，例如

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="MyEndpoint">
   <http uri-template="{uri.var.full}?f={uri.var.f}{+uri.var.extra}" method="put">
   </http>
</endpoint> 
```

然后在调用端点'MyEndpoint'之前设置属性..要为端点解析的属性必须以uri开头。

我还发现，如果你在属性名称前加上一个 +，它不会对它进行 URI 编码，所以它对于动态创建参数很方便。否则对于已知参数，你可以像上面那样为参数 f 做

所以..像

```
<property name="uri.var.full" value="http://jarhedz.com/viewtopic.php"/>
<property name="url.var.f" value="2"/>
<property name="uri.var.extra" value="&t=39"/>
<send>
    <endpoint key="MyEndpoint"></endpoint>
</send> 
```

应该带你到网址[http://jarhedz.com/viewtopic.php?f=2&t=39](http://jarhedz.com/viewtopic.php?f=2&t=39)

（顺便说一句，如果您使用的是网络编辑器，它会抱怨 & .. 它的 buggy .. 将其保存为

```
&amp; 
```

.. 并将其保存为 & 或使用 javascript 设置属性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T19:00:51.283

使用 Header meditaor 设置“to”标头并使用默认端点。查看[此帖子](http://vvratha.blogspot.com/2013/08/defining-dynamic-endpoint-in-wso2esb.html)以获取示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:20:06.873

使用[标头调解](http://docs.wso2.org/wiki/display/ESB460/Header+Mediator)器将“To”地址标头设置为您从分配的属性中提取的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T17:35:03.770

当服务器不发布其 WSDL 时，请参阅[此处](https://stackoverflow.com/questions/2490737/how-to-change-webservice-url-endpoint)的 Myobis 评论。尝试[addPort](https://stackoverflow.com/questions/7646591/connect-to-soap-using-jax-ws)没有成功。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-20T05:22:15.380

这种方法对我来说是正确的。

我需要创建波纹管动态网址

> [http://localhost:8787/](http://localhost:8787/) {**动态参数**}

端点url里面是这样的

> [http://localhost:8787/](http://localhost:8787/) {uri.var.servicepath}

将“**测试**”变量设置为我的**动态参数**（如果需要设置表达式值，请设置它）。在属性调解器内设置“测试”值。（我做了这个内部代理服务）

```
<property name="uri.var.servicepath" scope="default" type="STRING" value="test"/> 
```

创建端点

在这里我创建了 HTTP 端点

```
<endpoint name="ServiceEP" xmlns="http://ws.apache.org/ns/synapse">
   <http method="post" uri-template="http://localhost:8787/{uri.var.servicepath}"/>
</endpoint> 
```

然后将此端点​​添加到您的代理服务或 API 中

```
<send>
   <endpoint key="ServiceEP"/>
</send> 
```

最后你的代理看起来像这样

```
<inSequence>
   <property name="uri.var.servicepath" scope="default" type="STRING" 
   value="test"/>

   <send>
      <endpoint key="SurepayVASAppsEP"/>
    </send>
</inSequence> 
```

像这样您可以更改每个 url 参数。例如：

> http://{uri.var.hostname}:{uri.var.port}/{uri.var.servicepath}

# java - 在一对键控列表中递归聚合重复项

> ID：15876413
> 
> 赞同：1
> 
> 时间：2013-04-08T10:07:30.410
> 
> 标签：java, arraylist

我有两个列表，*其中匹配索引的列表之间的项目是链接的*。第一个列表提供与第二个列表值相关的键：

```
List<Double> a1 = [10,20,20,30,10];           // keys
List<Double> y1 = [2012,2013,2012,2012,2013]; // values 
```

我想从键（索引）列表中删除重复项，以便在找到重复项时添加键的值。因此，例如，如果找到两个值为 10 的键，我想用一个值为 20 的键替换这两个键。将重复此过程，直到没有剩余的重复键。所以我想要这样的列表输出：

```
List<Double> a1 = [60,30];
List<Double> y1 = [2012,2013]; 
```

我尝试使用以下代码解决此问题，但输出不正确。

```
y2=new ArrayList<Double>();
a2 = new ArrayList<Double>();
String y = "";
double a = 0;

for (int i = 0; i < y1.size(); i++) {

    if (y1.get(i).equals(y)) {
        a = a + y1.get(i);
    } else {
        if (!y.equals("")) {
            y2.add(y);
            a2.add(a);
        }

        y = y1.get(i);
        a = a1.get(i);
    }
}

y2.add(y);
a2.add(a); 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:15:25.837

用一个`Map`

```
Map<Double, Double> map = new HashMap<>();
for (int i = 0; i < y1.size(); i++) {
    double oldValue = map.containsKey(y1.get(i)) ? map.get(y1.get(i)) : 0.0;

    map.put(y1.get(i), oldValue + a1.get(i));
}

y1.clear();
a1.clear();

for (Entry<Double, Double> entry : map.entrySet()) {
    y1.add(entry.getKey());
    a1.add(entry.getValue());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:45:37.487

```
private void method(List<Double> y1, List<Double> a1) {
    for (int i = 0; i < y1.size(); i++) {
        if (y1.get(i) != -1) {
        for (int j = i + 1; j < y1.size(); j++) {
            if (y1.get(i).equals(y1.get(j))) {
            y1.set(j, -1d);
            a1.set(i, a1.get(i) + a1.get(j));
            a1.set(j, -1d);
            }
        }
        }
    }
    for (Iterator<Double> itr = y1.iterator(); itr.hasNext();)
        if (itr.next().equals(-1d))
        itr.remove();
    for (Iterator<Double> itr = a1.iterator(); itr.hasNext();)
        if (itr.next().equals(-1d))
        itr.remove();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:11:32.920

您的代码失败，因为 y1 数组未排序。由于您想保留 y1 和 a1 之间的映射，您应该使用此值创建一个类，并创建一个此类的数组：

```
public class Elem implements Comparable<Elem> 
{
    double year;
    double value;

// getters and setters 

public double getValue() {
    return value;
}

public void setValue(double value) {
    this.value = value;
}

public int compareTo(Elem item) 
    {
        if (this.getYear() == item.getYear())
        return 0;
    else if (this.getYear() > item.getYear())
        return 1;
    else 
        return -1;
}

public int hashCode()
{
    StringBuffer buffer = new StringBuffer();
    buffer.append(this.year);
    buffer.append(this.value);
    return buffer.toString().hashCode();
}

public boolean equals(Object item)
{
    if (item instanceof Elem)
    {
        Elem e = (Elem) item;
        if (e.getYear() == this.getYear())
        {
            return true;
        }
        return false;
    }
    return false;
}
} 
```

现在您可以创建数组、填充和排序它：

```
 List<Elem> y1 = new ArrayList<Elem>();

    //---- populate array ----

    Collections.sort(y1);

    ArrayList<Elem> y2;

    y2 = new ArrayList<Elem>();
    Elem y = null;

    double a = 0;

    for(int i = 0;i<y1.size();i++){
        if((y != null) && (y1.get(i).equals(y))){
            a = y.getValue() + y1.get(i).getValue();
            y1.get(i).setValue(a);
            y = y1.get(i);
        }
        else{
            if(y != null) {
                y2.add(y);
            }

            y = y1.get(i);
        }

    }
    if(y != null) {
        y2.add(y);
    } 
```

# objective-c - 如何在interfacebuilder中设置视图控制器的笔尖名称

> ID：15876414
> 
> 赞同：1
> 
> 时间：2013-04-08T10:07:32.540
> 
> 标签：objective-c, ios6, storyboard, xcode4.5, uisplitviewcontroller

我在我的项目中使用了多个视图，我需要相互导航，当我用谷歌搜索时，我不知道该怎么做使用界面生成器的视图控制器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:20:51.043

您需要在编辑器区域中选择窗口。然后去检查器[选择栏](http://beginning-mac-programming.timisted.net/images/posts/generalOverview/13-Xcode4Inspectors.png)并打开`File Inspector`. 您可以在此处设置窗口笔尖名称，以便稍后在代码中调用。

![在此处输入图像描述](https://i.stack.imgur.com/onqXD.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:21:13.953

**单击文件所有者并单击身份检查器并在那里写下您的班级名称.....**

![在此处输入图像描述](https://i.stack.imgur.com/eqn1V.png)

# linux - 脚本不执行，而是挂起

> ID：15876415
> 
> 赞同：1
> 
> 时间：2013-04-08T10:07:34.243
> 
> 标签：linux, bash

我有一个脚本，我想在我的 Web 服务器上每分钟运行一次，以检查日志文件的最后 3 行，以查看程序的内存使用情况。该脚本的工作原理是为内存获取正确的结果，但我无法将其发送到电子邮件或退出 - 它只是挂起？

关于为什么这不退出的任何想法？这是在服务器上作为 cron 运行以跟踪日志的最后 3 行的最佳方法吗？

```
#!/bin/bash
LOG=/home/user/Scripts/test.txt
SERVER=/home/user/Scripts/local/case.txt
CASE=$(head -n 1 $SERVER)

grep INFO: | grep Memory $LOG | awk '{print $9}' | tail -n 3 | while read output;
do
  #echo $output
  new=$(echo $output)
  usep=$(echo $output | awk '{ print $1}' | cut -d'%' -f1  )
  mag=$(echo $output | awk '{ print $2 }' )
  if [ $new -lt 10 ]; then
  echo $new
  mail -s "TEST" - Alert: Memory usage is at $usep%" "user@examplecom" <<< \
  " \"$CASE \" - Memory usage is currently peaked to \"$mag ($usep%)\" on $(hostname) as   on $(date)"
  echo "email"
  fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:27:33.983

首先`grep`是读取标准输入。除非您通过重定向调用它（请告诉我们！）这就是它看起来挂起的原因——它正在等待您输入一些输入。

作为快速修复，更改

```
grep INFO: | grep Memory $LOG | awk ... 
```

读书

```
grep INFO: "$LOG" | grep Memory | awk ... 
```

（这里的双引号不是绝对必要的，但是将来学习的好主意。）

更好的是，将 multiple `grep`s 和 the重构`tail`到`awk`脚本中：

```
awk '/INFO:/ && /Memory/ { g[NR%3+1] = $0 }
    END { for (j=1; j<=3; ++j) print g[j] }' "$LOG" 
```

如果输出的顺序很重要，你必须多摆弄它。

此外，除非您特别需要分词，否则它比它更`new=$output`可取，在这种情况下更安全且更惯用。另见[http://porkmail.org/era/unix/award.html#echo](http://porkmail.org/era/unix/award.html#echo)`new=$(echo $output)``set -- $output`

# c# - DateTime.Today.ToString("dd/mm/yyyy") 返回无效的 DateTime 值

> ID：15876418
> 
> 赞同：28
> 
> 时间：2013-04-08T10:07:45.783
> 
> 标签：c#, datetime

我正在尝试以 GBR 格式获取今天的日期，但是，

```
DateTime.Now.ToString("dd/mm/yyyy"); 
```

返回值为`08/00/2013`

所以`00`在月份组被返回而不是返回月份`04`。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-08T10:09:17.040

较低的`mm`意思是分钟，所以

```
DateTime.Now.ToString("dd/MM/yyyy"); 
```

或者

```
DateTime.Now.ToString("d"); 
```

或者

```
DateTime.Now.ToShortDateString() 
```

[**作品**](http://ideone.com/7orxw4)。

[**标准日期和时间格式字符串**](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T10:09:07.013

使用`MM`(months) 而不是`mm`(minutes) ：

```
DateTime.Now.ToString("dd/MM/yyyy"); 
```

[在这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)查看更多格式选项。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T10:08:34.267

应该是`MM`几个月。你要求几分钟。

```
DateTime.Now.ToString("dd/MM/yyyy"); 
```

有关详细信息，请参阅MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-19T11:50:25.540

除了其他答案所说的之外，请注意“dd/MM/yyyy”中的“/”字符不是文字字符：它代表当前用户文化的日期分隔符。因此，如果当前文化使用 yyyy-MM-dd 日期，那么当您调用 toString 时，它会给您一个日期，例如“31-12-2016”（使用破折号而不是斜杠）。要强制它使用斜杠，您需要转义该字符：

```
DateTime.Now.ToString("dd/MM/yyyy")     --> "19-12-2016" for a Japanese user
DateTime.Now.ToString("dd/MM/yyyy")     --> "19/12/2016" for a UK user
DateTime.Now.ToString("dd\\/MM\\/yyyy") --> "19/12/2016" independent of region 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-08T10:10:45.983

使用`MM`数月。`mm`是几分钟。

```
DateTime.Now.ToString("dd/MM/yyyy"); 
```

您可能会在开始的一小时运行此代码，例如 ( `00:00`, `05.00`, `18.00`) 并为您的日期`mm`时间提供分钟 ( )。`00`

从[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)

> "mm" --> 分钟，从 00 到 59。
> 
> "MM" --> 月份，从 01 到 12。

这是一个[`DEMO`](http://ideone.com/zZHAQP). （第一行的哪个*月份*取决于您运行此代码的时间`;)`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-25T08:54:29.983

只有小错误。使用 MM 而不是 mm ，所以它会有效 **写如下：**

```
 @DateTime.Now.ToString("dd/MM/yyy") 
```

# c - 在 C 中输入转换为数字的单词

> ID：15876419
> 
> 赞同：0
> 
> 时间：2013-04-08T10:07:47.713
> 
> 标签：c

我正在尝试制作一个在 Windows 控制台中启动的程序，该程序会在电阻器中询问“第一个波段的颜色是什么”，因此当您键入诸如“红色”之类的内容时，它会将 2 输入到浮点数中。我遇到的问题是，我不仅不知道如何将“红色”变成“2”，而且每当我尝试在控制台上输入文本时，它都会显示其余的 printf 并跳到最后。

这就是我到目前为止所做的，我注释掉了第三和第四个输入，以便我可以更轻松地进行故障排除。

```
//Color bands

#include <stdio.h>

int
main(void)
{
    double first;
    double second;
    //double third;
    //double fourth;
    double total_resist;
    double black, brown, red = 2, orange, yellow, green, blue, violet, gray, white;

    black = 0;
    brown = 1;
    red = 2;
    orange = 3;
    yellow = 4;
    green = 5;
    blue = 6;
    violet = 7;
    gray = 8;
    white = 9;

    printf("Input first color band> ");
    scanf("%lf", &first);

    printf("Input second color band> ");
    scanf("%lf", &second);

    total_resist = first + second;// + second + third + fourth;

    printf("\nTotal resistance is %.lf\n", total_resist);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T01:43:23.823

```
#include <string.h>
#include <stdio.h>

static int colour_value(char const *colour)
{
    const char *band[] =
    {
        "black", "brown", "red", "orange", "yellow",
        "green", "blue", "violet", "grey", "white"
    };
    enum { NUM_BANDS = sizeof(band) / sizeof(band[0]) };
    for (int i = 0; i < NUM_BANDS; i++)
    {
        if (strcmp(colour, band[i]) == 0)
            return i;
    }
    return -1;
}

int main(void)
{
    double total_resistance = 0.0;
    const char *ordinals[] = { "zeroth", "first", "second", "third", "fourth" };
    char colour[32];
    char band[4][8];
    int i;

    for (i = 0; i < 4; i++)
    {
        int value;
        printf("Input %-6s color band> ", ordinals[i + 1]);
        if (scanf("%s", colour) != 1)
            break;
        if ((value = colour_value(colour)) == -1)
            break;
        total_resistance = total_resistance * 10.0 + value;
        strcpy(band[i], colour);
    }

    if (i == 4)
    {
        printf("%s", "Bands: ");
        for (i = 0; i < 4; i++)
            printf(" %s", band[i]);
        printf("\nTotal resistance is %.lf\n", total_resistance);
    }
    else
        puts("Oops!");

    return(0);
} 
```

示例运行：

```
Input first  color band> orange
Input second color band> green
Input third  color band> violet 
Input fourth color band> brown
Bands:  orange green violet brown
Total resistance is 3571

Input first  color band> red
Input second color band> yellow
Input third  color band> black
Input fourth color band> blue
Bands:  red yellow black blue
Total resistance is 2406 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:10:37.157

怎么样：

```
char color[20];

printf("Input first color band> ");
scanf("%19s", color);

if (!strcmp(color, "red"))
    first = 2.0;
else if (...) 
```

显然下一步是制作一个函数：

```
double color2number(const char *name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:21:22.680

这应该做的工作：

```
#include <stdio.h>

int color2nr(char* color){
if(color=="red")
   return red;
else if(color=="orange")
   return orange;
...  
} 
```

对所有其他颜色做同样的事情......

```
main(void)
{
double first;
double second;
double third;
double fourth;
double total_resist;
double black, brown, red = 2, orange, yellow, green, blue, violet, gray, white;

black=0;
brown=1;
red = 2;
orange = 3;
yellow = 4;
green = 5;
blue = 6;
violet = 7;
gray = 8;
white = 9;

char[10] buf;
printf("Input first color band> ");
scanf("%s", buf);
double first=color2nr(buf);

printf("Input second color band> ");
scanf("%s", buf);
double second=color2nr(buf);

total_resist = first + second;// + second + third + fourth;

printf("\nTotal resist is %.lf\n", total_resist);

return(0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:45:54.447

```
1) try using **enum** 
```

例如：
`typedef enum {black,brown,red...}colorcodes;`

像这样声明变量..

```
colorcodes FstColor, SndColor;

2) `scanf("%s\n",FstColorStr)` and not `scanf("%lf",bSndColorStr);`

3)  if(strcmp(FstColorStr,"red")) FstColor = red and so on for all other colors.

4) tot_resist = FstColor * pow(10,SndColor); //include math.h 
```

# java - Drools 查询“通配符”

> ID：15876422
> 
> 赞同：0
> 
> 时间：2013-04-08T10:07:50.423
> 
> 标签：java, drools

是否可以将事实插入作为通配符的 Drools 工作记忆（例如查询约束）？

例如，假设我有以下规则：

```
rule "meal_exceptions_1"
    agenda-group "MEAL"
    salience 100
    when
        Meal(id = "Breakfast")
        Person(name == "Sally")
    then
        insert(new Food("Jelly"));
        drools.setFocus("OTHERGRP");
end 

rule "meal_breakfast"
    agenda-group "MEAL"
    when
        Meal(id == "Breakfast")
    then
        insert(new Food("Cornflakes"));
        drools.setFocus("OTHERGRP");
end 

rule "meal_dinner"
    agenda-group "MEAL"
    when
        Meal(id == "Dinner")
    then
        insert(new Food("Fish Fingers"));
        drools.setFocus("OTHERGRP");
end 
```

我想回答“早餐可以订购的所有可能食物是什么”这个问题（也许我正在订购厨房用品）。

我可以很容易地插入一个事实，`new Meal("Breakfast")`将结果限制为仅适用于早餐的结果。但是，我的应用程序不知道哪些人可能请求了例外，甚至不知道整组人是什么。我想添加另一个事实`Person("*")`，以便这将符合第一条规则，即使我不知道（或关心！）具体是莎莉要求不同的食物。

所需的输出是包含玉米片和果冻的工作记忆。是否可以在不了解潜在异常的具体知识的情况下发出这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:47:43.873

我不知道任何这样的通配符，我什至怀疑它是否可能。我不会问你为什么要从 Drools 规则中插入事实，你可能有一些充分的理由，否则回到绘图板。

由于这些都是异常，处理这种情况的一种方法是在会话中注册所有异常事实。在这个基本情况下，您只需要注册 Person("Sally") 并且您将获得 Jelly 和 Cornflakes 的列表。

作为替代方案，您可以添加一个标志，例如`Person.wildcard`并将您的 LHS 更改为类似的东西`Person(name == "Sally" || wildcard)`，但我怀疑您是否愿意进行交易，因为您自己是在规则范围内注册事实的。

# c# - 使用 Response.Write 的打印机友好页面

> ID：15876425
> 
> 赞同：0
> 
> 时间：2013-04-08T10:08:04.387
> 
> 标签：c#, asp.net, response.write

我需要创建一个打印友好的页面，其中仅包含我的一页网站中的几个数据字段。我被告知要使用`Response.Write`.

在我的任务中，我得到了这个线索：

> 诀窍是使用`Response`Page Class 提供的方法（更准确地说，它是由名为 的父类提供的 `System.Web`）。您在屏幕上显示的内容由`System.Web` 对象管理，使用该`Response`方法您可以在其中放置任何您想要的东西。

我已经做了一些谷歌搜索，但这似乎不是应该这样做的方式，但是由于某种原因，它必须这样做。

基本上，它必须通过清除页面并仅传递一些变量以在白色上显示纯黑色来创建一个易于打印的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:32:55.087

> 我被告知要使用`Response.Write`.

谁告诉你这样做是错的，错的，错的。

如果您需要使任何类型的网页“打印机友好”，那么正确的方法是通过[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)

所以如果你的页面当前有这样的 CSS

```
<link rel="stylesheet" type="text/css" href="style.css"> 
```

然后，您只需创建第二个样式表，它会完成使您的页面“打印机友好”所需的一切，然后更改您的 html 以包含该`print`版本。

```
<link rel="stylesheet" type="text/css" media="print" href="print.css">
<link rel="stylesheet" type="text/css" media="screen" href="style.css"> 
```

然后在您的`print.css`样式表中，您可以使用与打印视图直接相关的样式。可以在[此链接中找到一些示例](http://www.cssnewbie.com/default-print-stylesheet-template/#.UbdJwvb71FE)

```
/*Make your layout similar to a sheet of paper*/
body, #content, #container {
    width: 100%;
    margin: 0;
    float: none;
    background: #fff url(none);
}

/*Hide navigation, ads, and anything else you don't want printed*/
#topnav, #navbar, #nav, #sidebar, .ad, .noprint {
    display: none; 
}

/*Set a new default font*/
body {
    font: 1em Georgia, "Times New Roman", Times, serif;
    color: #000; 
}

/*Style your headings*/
h1,h2,h3,h4,h5,h6 {
    font-family: Helvetica, Arial, sans-serif;
    color: #000;
}
h1 { font-size: 250%; }
h2 { font-size: 175%; }
h3 { font-size: 135%; }
h4 { font-size: 100%; font-variant: small-caps; }
h5 { font-size: 100%; }
h6 { font-size: 90%; font-style: italic; }

/*Display the links associated with hyperlinks*/
a:link, a:visited {
    color: #00c;
    font-weight: bold;
    text-decoration: underline; }

#content a:link:after, #content a:visited:after {
    content: " (" attr(href) ") ";
} 
```

# java - JOptionPane - 将 keylistener 添加到 showOptionDialog

> ID：15876427
> 
> 赞同：1
> 
> 时间：2013-04-08T10:08:14.100
> 
> 标签：java, swing, joptionpane

我正在开发 Java Swing 应用程序。

当我退出应用程序时，会弹出 optionDialog 并询问我是否要在退出前保存文件。

我想要做的是 optionDialog 上有三个按钮（YES，NO，CANCEL）**我想让 optionDialog 通过箭头键而不是 tab 键改变按钮的焦点**。如何在 optionDialog 中为按钮创建键侦听器？

到目前为止，这是我的代码

```
Object[] options = {" YES "," NO ","CANCEL"};

int n = JOptionPane.showOptionDialog(Swing4.this,
        "File haven't save yet." +
        " \n Are you want to save the file?",                                   
        "Confirm Dialog",
        JOptionPane.YES_NO_CANCEL_OPTION,
        JOptionPane.QUESTION_MESSAGE,
        null,     //do not use a custom Icon
        options,  //the titles of buttons
        options[1]); //default button title                 

if(n == JOptionPane.YES_OPTION){            
    if(helper.updateFile("text.txt", gatherAllContent(), Swing4.this)){
        System.exit(0);
    }
    label.setText("There is something wrong on quit");

}else if(n == JOptionPane.NO_OPTION){
    System.exit(0);
}else if(n == JOptionPane.CANCEL_OPTION){
    System.out.println("Cancel");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:45:51.620

用 做这个是不可能的`showOptionDialog`，相反你需要`JOptionPane`为自己创建一个。您正在寻找的是[Container.getFocusTraversalKeys()](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#getFocusTraversalKeys%28int%29)。这是一个使用右键更改按钮焦点的工作片段（Tab 仍然有效）：

```
 JOptionPane optionPane = new JOptionPane("File haven't save yet." +
            " \n Are you want to save the file?", JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_CANCEL_OPTION);
    JDialog dialog = optionPane.createDialog("Confirm Dialog");
    Set<AWTKeyStroke> focusTraversalKeys = new HashSet<AWTKeyStroke>(dialog.getFocusTraversalKeys(0));
    focusTraversalKeys.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_RIGHT, KeyEvent.VK_UNDEFINED));
    dialog.setFocusTraversalKeys(0, focusTraversalKeys);
    dialog.setVisible(true);
    dialog.dispose();
    int option = (Integer) optionPane.getValue(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:12:55.190

> 当我退出应用程序时，会弹出 optionDialog 并询问我是否要在退出前保存文件。

*   伪代码，[应用程序`JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)与`setDefaultCloseOperation(EXIT_ON_CLOSE);`

*   添加[`WindowListener`到`JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)

*   override `public void windowClosing()`，然后每个事件都[以所需的选择](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#button)[触发`JOptionPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#button)

例如

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ClosingFrame extends JFrame {

    private JMenuBar MenuBar = new JMenuBar();
    private JFrame frame = new JFrame();
    private static final long serialVersionUID = 1L;
    private JMenu File = new JMenu("File");
    private JMenuItem Exit = new JMenuItem("Exit");

    public ClosingFrame() {
        File.add(Exit);
        MenuBar.add(File);
        Exit.addActionListener(new ExitListener());
        WindowListener exitListener = new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                int confirm = JOptionPane.showOptionDialog(frame,
                        "Are You Sure to Close this Application?",
                        "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null, null, null);
                if (confirm == JOptionPane.YES_OPTION) {
                    System.exit(1);
                }
            }
        };
        frame.addWindowListener(exitListener);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setJMenuBar(MenuBar);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    private class ExitListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == JOptionPane.YES_OPTION) {
                System.exit(1);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ClosingFrame cf = new ClosingFrame();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-17T18:57:45.400

改进 Nandor 接受的答案...这将允许您使用左箭头向后遍历，并在使用 X 关闭对话框时避免 NullPointerException。

```
public int showConfirmDialog(Component parent, String message, String title)
{
    JOptionPane optionPane = new JOptionPane(message, JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_CANCEL_OPTION);
    JDialog dialog = optionPane.createDialog(parent, title);

    Set forwardTraversalKeys = new HashSet(dialog.getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));
    forwardTraversalKeys.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_RIGHT, KeyEvent.VK_UNDEFINED));
    dialog.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, forwardTraversalKeys);

    Set backwardTraversalKeys = new HashSet(dialog.getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));
    backwardTraversalKeys.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_LEFT, KeyEvent.VK_UNDEFINED));
    dialog.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, backwardTraversalKeys);

    dialog.setVisible(true);
    dialog.dispose();

    Integer ret = (Integer) optionPane.getValue();
    if (ret == null)
    {
        return JOptionPane.CANCEL_OPTION;
    }
    return ret.intValue();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T07:07:22.683

您可以递归地添加 KeyListener。这是我的“Enter press”确认对话框的示例。

```
public static void setEnterKey(Object o, JButton okButton) {
    if (okButton == null) {
        okButton = getOkButton(o);
    }

    if (okButton != null) {
        if (o instanceof JRootPane) {
            JRootPane root = (JRootPane) o;

            for (int i = 0; i < root.getComponentCount(); i++) {
                Component c = root.getComponent(i);
                setEnterKey(c, okButton);
            }
        } else if (o instanceof JPanel) {
            JPanel p = (JPanel) o;

            for (int i = 0; i < p.getComponentCount(); i++) {
                Component c = p.getComponent(i);
                setEnterKey(c, okButton);
            }
        } else if (o instanceof JLayeredPane) {
            JLayeredPane p = (JLayeredPane) o;

            for (int i = 0; i < p.getComponentCount(); i++) {
                Component c = p.getComponent(i);
                setEnterKey(c, okButton);
            }
        } else if (o instanceof JTabbedPane) {
            JTabbedPane p = (JTabbedPane) o;

            for (int i = 0; i < p.getComponentCount(); i++) {
                Component c = p.getComponent(i);
                setEnterKey(c, okButton);
            }
        } else if (o instanceof JOptionPane) {
            JOptionPane p = (JOptionPane) o;

            for (int i = 0; i < p.getComponentCount(); i++) {
                Component c = p.getComponent(i);
                setEnterKey(c, okButton);
            }
        } else if (o instanceof Component) {
            if (!(o instanceof JTextArea) && !(o instanceof JTable) && !(o instanceof JTextPane)) {
                final JButton bt = okButton;
                ((Component) o).addKeyListener(new KeyListener() {
                    @Override
                    public void keyTyped(KeyEvent e) {

                    }

                    @Override
                    public void keyPressed(KeyEvent e) {
                        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                            bt.doClick();
                        }
                    }

                    @Override
                    public void keyReleased(KeyEvent e) {

                    }
                });
            }
        }
    }
}

public static JButton getOkButton(Object o) {
    JButton button = null;

    if (o instanceof JRootPane) {
        JRootPane root = (JRootPane) o;

        for (int i = 0; i < root.getComponentCount() && button == null; i++) {
            Component c = root.getComponent(i);
            button = getOkButton(c);
        }
    } else if (o instanceof JPanel) {
        JPanel p = (JPanel) o;

        for (int i = 0; i < p.getComponentCount() && button == null; i++) {
            Component c = p.getComponent(i);
            button = getOkButton(c);
        }
    } else if (o instanceof JLayeredPane) {
        JLayeredPane p = (JLayeredPane) o;

        for (int i = 0; i < p.getComponentCount() && button == null; i++) {
            Component c = p.getComponent(i);
            button = getOkButton(c);
        }
    } else if (o instanceof JTabbedPane) {
        JTabbedPane p = (JTabbedPane) o;

        for (int i = 0; i < p.getComponentCount() && button == null; i++) {
            Component c = p.getComponent(i);
            button = getOkButton(c);
        }
    } else if (o instanceof JOptionPane) {
        JOptionPane p = (JOptionPane) o;

        for (int i = 0; i < p.getComponentCount() && button == null; i++) {
            Component c = p.getComponent(i);
            button = getOkButton(c);
        }
    } else if (o instanceof JButton) {
        JButton b = (JButton) o;

        if (b.getText().equalsIgnoreCase("ok")) {
            button = b;
        }
    }
    return button;
} 
```

# html - 为什么 .ogv 不能在 Firefox 上播放？

> ID：15876428
> 
> 赞同：0
> 
> 时间：2013-04-08T10:08:15.260
> 
> 标签：html, video

这是我的代码：

```
<div class="fascia-animata-video">
    <video>
        <source src="/video/myvideo.secondversion.ogv" type='video/ogg; codecs="theora, vorbis"'>
    </video>        
</div> 
```

但它不会在 Firefox 上播放。如果我拖放视频，它可以正常播放。那么这个“视频”标签有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:16:15.947

尝试删除编解码器，让浏览器自行解决。

```
<source src="/video/myvideo.secondversion.ogv" type='video/ogg'> 
```

你是在本地服务器上运行它吗？根据您在下面所说的，您需要告诉您的服务器如何提供 .ogv 文件。

如果您有权访问 .htaccess 文件，请添加：

```
AddType video/ogg .ogv 
```

# twitter - C# Twitter API 1.1 OAuth 用户时间线搜索

> ID：15876429
> 
> 赞同：2
> 
> 时间：2013-04-08T10:08:22.177
> 
> 标签：twitter

在尝试以下 url 请求时，我在尝试从 twitter 获得成功响应时遇到问题：[https ://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=username&count=1](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=username&count=1)

我在 codeproject.com 上找到了一个出色的示例，它使我能够获取用户的推文，但我希望能够将一些属性附加到 url 字符串以过滤我收到的推文数量。我曾经能够在没有 OAuth 的 twitter API 版本 1.0 中执行此操作。当我尝试下面的代码时，我得到了 WebRequest 对象引发的未经授权的异常。

```
var oauth_token = "twitterAppData";
var oauth_token_secret = "twitterAppData";
var oauth_consumer_key = "twitterAppData";
var oauth_consumer_secret = "twitterAppData";

// oauth implementation details
var oauth_version = "1.0";
var oauth_signature_method = "HMAC-SHA1";

// unique request details
var oauth_nonce = Convert.ToBase64String(
    new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
var timeSpan = DateTime.UtcNow
    - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();

// message api details
var status = "Updating status via REST API if this works";
var resource_url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
var screen_name = "user1234";
var count = "1";
// create oauth signature
var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
                "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&screen_name={6}&count={7}";

var baseString = string.Format(baseFormat,
                            oauth_consumer_key,
                            oauth_nonce,
                            oauth_signature_method,
                            oauth_timestamp,
                            oauth_token,
                            oauth_version,
                             Uri.EscapeDataString(screen_name),
                             Uri.EscapeDataString(count)
                            );

baseString = string.Concat("GET&", Uri.EscapeDataString(resource_url), "&", Uri.EscapeDataString(baseString));

var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                        "&", Uri.EscapeDataString(oauth_token_secret));

string oauth_signature;
using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
{
    oauth_signature = Convert.ToBase64String(
        hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
}

// create the request header
var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
                   "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
                   "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
                   "oauth_version=\"{6}\"";

var authHeader = string.Format(headerFormat,
                        Uri.EscapeDataString(oauth_nonce),
                        Uri.EscapeDataString(oauth_signature_method),
                        Uri.EscapeDataString(oauth_timestamp),
                        Uri.EscapeDataString(oauth_consumer_key),
                        Uri.EscapeDataString(oauth_token),
                        Uri.EscapeDataString(oauth_signature),
                        Uri.EscapeDataString(oauth_version)
                );

// make the request

ServicePointManager.Expect100Continue = false;

var postBody = "screen_name=" + Uri.EscapeDataString(screen_name);//
var postbody2 = "count=" + Uri.EscapeDataString(count);
resource_url += "?" + postBody + "&" + postbody2;
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
request.Headers.Add("Authorization", authHeader);
request.Method = "GET";
request.ContentType = "application/x-www-form-urlencoded";

WebResponse response = request.GetResponse();
string responseData = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

如果我取出所有裁判员到 &count=1 的部分，上面的代码块就可以工作

预先感谢您为我提供的任何帮助或启发。

斯图尔特·特伯菲尔德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T13:18:49.137

看起来参数需要在 OAUTH 签名字符串中按字母顺序排列。我尝试将 COUNT 切换到开头并且它有效：

var baseFormat = " **count={7}** &oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" + "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&screen_name={6}";

var baseString = string.Format(baseFormat, oauth_consumer_key, oauth_nonce, oauth_signature_method, oauth_timestamp, oauth_token, oauth_version, Uri.EscapeDataString(screen_name), Uri.EscapeDataString(count));

祝你好运，多亏了你，我正在寻找 1.1 api 的例子。

K。

# c# - 如何限制 microsoft inkoverlay 在输入控件（如（文本框、复选框）中绘制？

> ID：15876432
> 
> 赞同：5
> 
> 时间：2013-04-08T10:08:26.677
> 
> 标签：c#, .net, microsoft.ink

我想限制`InkOverlay`在文本框和复选框中绘图，但我需要在标签中绘图。如何实现这一点。

如果我设置

```
theInkOverlay.AttachMode =InkOverlayAttachMode.Behind; 
```

它正在申请所有控件。我需要在标签和图片控件上绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T21:23:03.837

InkOverlay 对象附加到窗口，并且位于该窗口的上方或下方。因此，最好的选择是将两个子窗口放在对话框/主窗口中，将文本框/复选框放在一个窗口中，然后将墨迹覆盖层放在第二个窗口中。

# post - nginx 不向 uwsgi 转发 POST 数据 -- [UPDATE] flask 不读取 post 数据

> ID：15876433
> 
> 赞同：2
> 
> 时间：2013-04-08T10:08:29.340
> 
> 标签：post, flask

我有一个非常简单的设置有一个非常特殊的问题。

该设置部署了 nginx Web 服务器以提供一些静态页面。它还有一个用于处理 POST 请求的后端 uwsgi 守护进程。

我的nginx位置配置如下

```
#For handling POST Request
location  = / {
#              index index.html;
#               autoindex on;

                uwsgi_pass unix:/tmp/uwsgi.sock;
                include uwsgi_params;
}

#For handling static page requests under /custpages
location ^(/custpages).*(\.html) {

                autoindex off;

 } 
```

当我部署此服务器并从浏览器发出发布请求时，nginx 不会将 POST 数据发送到 uwsgi。

但有趣的是，当我使用 python 请求发出独立的 POST 请求时，它按预期工作。

我想知道，与独立请求相比，基于浏览器的 POST 请求有什么问题，因为两者都通过 nginx。

任何指针？

提前致谢

**[更新]**

这似乎是 uwsgi 的问题。对于从 python 请求发送的 POST，它返回 POST 数据，因为我可以在 uwsgi 日志中看到响应字节。

但是对于从浏览器发送的请求，响应字节为零。

在这两种情况下，uwsgi 都从 nginx 接收正确的 POST 数据，所以这似乎与 uwsgi 有关

**[更新 2]**

进一步更新。这个问题与 nginx 或 uwsgi 无关。

我正在为我的服务器后端应用程序使用带有flask微框架的python，问题是这样的。

我使用当前请求上下文对象读取 POST 数据如下 data_string = request.data

现在，事实证明，当从浏览器发出 POST 时，request.data 为空当从 python 请求发出 POST 时，request.data 包含正确的 POST 数据。

所以，那里有任何烧瓶书呆子，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:41:15.657

此问题是由于烧瓶框架中的固有行为导致 POST 数据未出现在当前请求上下文对象中。

有关详细信息和解决方案，请参阅以下问题。

[Flask没有从jQuery请求数据中获取任何数据](https://stackoverflow.com/questions/11839855/flask-not-getting-any-data-from-jquery-request-data)

# sql - postgresql 中的高效增量插入

> ID：15876438
> 
> 赞同：1
> 
> 时间：2013-04-08T10:08:36.577
> 
> 标签：sql, postgresql, postgresql-performance

我使用数据库来表示文件列表，以及与每个文件相关联的一些元数据。我需要定期更新这个文件列表，只添加新文件并删除不再存在的文件（我不必触摸表中的现有行，因为我会丢失相关的元数据）。

当我有大约 10000 个文件时，我当前的查询只需要几秒钟，但我当前的 150000 个文件表需要一个小时。

经过网上的一些研究，我一直是以下过程：

1.  使用扫描结果填充表“newfiles”
2.  `DELETE FROM files WHERE path NOT IN (SELECT path FROM newfiles);`
3.  `INSERT INTO files (SELECT * FROM newfiles WHERE path NOT IN (SELECT path FROM files));`

我也有索引：

```
CREATE INDEX "files_path" ON "files" ("path");
CREATE INDEX "files_path_like" ON "files" ("path" varchar_pattern_ops);
CREATE INDEX "files_path" ON "newfiles" ("path");
CREATE INDEX "files_path_like" ON "newfiles" ("path" varchar_pattern_ops); 
```

*（我主要使用这些索引在数据库中进行搜索；我的应用程序在文件中有一个搜索引擎。）*

当我有 150000 个文件时，这两个查询中的每一个都需要一个多小时。我该如何优化呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:27:02.397

尝试`NOT EXISTS`代替`NOT IN`，如：

```
DELETE FROM files WHERE NOT EXISTS
  (SELECT 1 FROM newfiles WHERE newfiles.path=files.path); 
```

此外，如果`newfiles`每次都从头开始填充，请确保`ANALYZE newfiles`在发出任何使用它的查询之前，优化器可以使用良好的统计信息。

如果这不能解决问题，请尝试`EXPLAIN`或`EXPLAIN ANALYZE`在您的查询上制定执行计划并将其附加到问题中。

# javascript - 如何在谷歌地图 api 中使用地理编码器获取城市的纬度值？

> ID：15876442
> 
> 赞同：0
> 
> 时间：2013-04-08T10:08:38.737
> 
> 标签：javascript, google-maps-api-3

我需要使用以下代码获取城市的 latlng 值......但我得到的结果是“latlng 值未定义”我的代码是

```
geocoder.geocode( {'address': acity}, function(results, status) {
             if (status == google.maps.GeocoderStatus.OK) {
                 latlng1 = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng());
              }
        }); 
```

更新：如果我分别显示 lat 和 lng 值，则它已显示，如果将它们分配给 latlng1 “latlng1 未定义”，则显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:33:42.157

根据文档，该位置作为 LatLng 对象返回。您不需要创建新的 LatLng 对象。

> 几何包含以下信息：
> 
> location 包含地理编码的纬度、经度值。请注意，我们将此位置作为 LatLng 对象返回，而不是作为格式化字符串。

例子：

```
geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        window.test = results[0].geometry.location
         setTimeout(function() {
             console.log(window.test.lat());
             console.log(window.test.lng());
         }, 5000)
      } 
    }); 
```

编辑：我想我误解了，我想你只是想要全局范围内的 latLng 对象。我已经编辑了这个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:15:36.807

如果我理解你的话，你正在尝试做这样的事情：

```
var latlng1;

geocoder.geocode({
    'address': acity
}, function( results, status ) {
    if( status == google.maps.GeocoderStatus.OK ) {
        latlng1 = new google.maps.LatLng(
            results[0].geometry.location.lat(),
            results[0].geometry.location.lng()
        );
    }
});

// Now do stuff with latlng1 here 
```

这永远不会奏效，而且你也无法让它发挥作用。正如您所发现的，“现在使用 latlng1 进行操作”代码在*收到*结果之前运行。

地理编码器 API 与访问服务器获取数据的任何 JavaScript API 一样，是异步的。API调用立即返回，数据准备好时调用回调函数。

所以你需要做的是在数据准备好时*调用*`LatLng`你自己的函数，像这样（也简化以删除冗余的构造函数调用）：

```
geocoder.geocode({
    'address': acity
}, function( results, status ) {
    if( status == google.maps.GeocoderStatus.OK ) {
        doStuffWithLatLng( results[0].geometry.location );
    }
});

function doStuffWithLatLng( latlng ) {
    // Now do stuff with latlng1 here
} 
```

或者，您当然可以将“do stuff”代码放在地理编码器回调中：

```
geocoder.geocode({
    'address': acity
}, function( results, status ) {
    if( status == google.maps.GeocoderStatus.OK ) {
        var latlng1 = results[0].geometry.location;
        // Now do stuff with latlng1 here
    }
}); 
```

# ruby-on-rails - 在这台机器上可用的 gem 中找不到 gem 'resque (>= 2.0) ruby '

> ID：15876445
> 
> 赞同：1
> 
> 时间：2013-04-08T10:08:45.900
> 
> 标签：ruby-on-rails, resque

我正在使用 ruby​​ 2 为 ruby​​gems 安装最新版本 + 为 rails 安装最新版本，即 3.2.13。

我在之前的项目中使用了delayed_job。现在我在想redis + resque。但是当我尝试安装 resque 2 时，我从他们在[Github](https://github.com/resque/resque)上的 read me 文件中获得。我收到一个错误，即：

```
 Could not find gem 'resque (>= 2.0) ruby' in the gems available on this machine. 
```

来自自述文件。安装 resque 2\. 将其添加到您的 gem 文件中并运行捆绑程序。

```
 gem "resque", "~> 2.0" 
```

根据ruby [​​gems.org](https://rubygems.org/gems/resque)最新版本是 1.24.1。

有什么建议么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:54:50.030

据我所知，自述文件中的 gemfile 行已添加[到此提交](https://github.com/resque/resque/commit/f4c622e76394e53ac25d4d42df2638ec85d15f5d)中（这是 2.0 自述文件的初稿），但 2.0 版仍未发布。最新的稳定版本确实是 1.24.1。

正如自述文件所述，您应该在[1-x-stable 分支](https://github.com/resque/resque/tree/1-x-stable)中查找已发布的版本，因为主分支包含版本 2 正在进行的工作。因此自述文件比代码稍早。

您也可以尝试使用最新的代码

```
gem 'resque', :git => 'git://github.com/resque/resque.git' 
```

这将（当前）安装版本 2.0.0.pre.1，它 - 不言而喻 -**不是**最终/稳定版本。谨慎使用。

# c++ - 抛出没有层次结构的 bad_cast exc

> ID：15876446
> 
> 赞同：1
> 
> 时间：2013-04-08T10:08:46.513
> 
> 标签：c++, exception

是否可以在不创建任何不同于 C 的层次结构或新类的情况下抛出 bad_cast 异常？main() 不能编辑，唯一可以编辑的是C类。我也不能明确抛出 bad_cast 。

```
class C{
    private:
        ...

    public:
        void f(){
        ...
        }
};

int main () {
    C c;
    c.f();

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:22:49.570

**不**，你不能。

`dynamic_cast`仅适用于多态类类型，C++ 核心语言的任何内置类型都不是多态类类型。

因此，只要您不能定义任何新的多态类（也不能`#include`定义其他已经存在的多态类），或者不能调用确实看到这些定义的另一个函数（这可能应该被视为作弊），就有没有办法你可以得到一个`bad_cast`例外。

`dynamic_cast`此外，除了引发异常之外，没有核心语言结构`std::bad_cast`。所以你的问题的答案：

> 是否可以在不创建任何不同于 C 的层次结构或新类的情况下抛出 bad_cast 异常？

是“**否**”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:08:24.080

> main() 不能编辑，唯一可以编辑的是C类。我也不能明确抛出 bad_cast 。

给定这些约束，定义一个嵌套在内部的多态类`C`，并尝试将其转换为不相关的东西（例如它`C`自己）：

```
class C{
    private:
        struct X {virtual ~X(){}};

    public:
        void f(){
            X x;
            dynamic_cast<C&>(x);
        }
};

int main () {
    C c;
    c.f();
} 
```

请注意，这可能会发出编译器警告，因为它足够聪明，可以确定强制转换永远不会成功。

If you also include the constraint that you can't make any new classes, then it's impossible. `bad_cast` is only thrown by the language itself when using `dynamic_cast`; that can only be applied to polymorphic types, and there are no polymorphic types available.

# groovy - Groovy 表达式评估

> ID：15876450
> 
> 赞同：4
> 
> 时间：2013-04-08T10:08:57.023
> 
> 标签：groovy

一个基本的常规问题。为了使我的代码健壮，我需要使用 groovy 提供的 Eval.me(String)。

不过我有一个问题。当我尝试进行字符串比较时会出现问题。

```
def x='yay'
def y='yay'
def groovyString="'$x' == '$y'"
println Eval.me(groovyString); 
```

这打印正确。

但是下面的代码只是说'yay'不是变量定义，

```
def x='yay'
def y='yay'
def groovyString="$x == $y"
println Eval.me(groovyString); 
```

我知道为什么会出现这个错误:) 有没有办法可以回避这个问题而实际上不需要附加`' '`字符串比较？

PS：我需要它能够正常工作，而不仅仅是字符串。因此担心附加''

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:17:11.123

您应该可以使用`Binding`and来执行此操作`GroovyShell`

如果我们创建一个带有 Binding 的 GroovyShell 实例，当没有找到 property 时默认返回该属性的名称：

```
def shell = new GroovyShell( new Binding( [:].withDefault{ it } ) ) 
```

然后我们可以评估您的 groovyString：

```
shell.evaluate( groovyString ) 
```

这基本上评估为第一种形式，因为这两个`yay`属性都被解析为字符串`yay`

# php - 目录中的 PHP 文件夹数组并显示每个文件夹中的文件

> ID：15876455
> 
> 赞同：0
> 
> 时间：2013-04-08T10:09:10.233
> 
> 标签：php, arrays, directory

我正在使用以下代码列出目录中的所有文件夹（称为 test），以及这些文件夹中的所有文件：

```
<?php
function listFolderFiles($dir){
$ffs = scandir($dir);
echo '<ol>';
foreach($ffs as $ff){
    if($ff != '.' && $ff != '..'){
        echo '<li class="title">'.$ff;
        if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
        echo '</li>';
    }
}
echo '</ol>';
}

listFolderFiles('test');

?> 
```

这很好用，但是我希望能够链接到这些文件夹中的每个文件。谁能告诉我我会怎么做？

例如，我有一个名为“test”的目录，其中包含“test 1”、“test 2”和“test 3”子目录。在其中的每一个中，我都有几个文件，我希望它们成为用户可以单击以显示文件的链接。因此，当用户访问该站点时，他们会看到如下内容：

测试 1：链接 1 链接 2

测试 2：链接 1 链接 2

测试 3：链接 1 链接 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:29:48.763

只需在您输出的 LI 标记内添加一个 html A 标记。这些方面的东西应该起作用：

```
<?php
function listFolderFiles($dir){
    $ffs = scandir($dir);
    echo '<ol>';
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            echo '<li class="title">';
            if(is_dir($dir.'/'.$ff)){
                echo $ff;
                listFolderFiles($dir.'/'.$ff);
            }else{
                echo '<a href="'.$dir.'/'.$ff.'">'.$ff.'</a>';
            }
            echo '</li>';
        }
    }
    echo '</ol>';
}

listFolderFiles('test');

?> 
```

# openacc - 创建后的 pcopyin

> ID：15876456
> 
> 赞同：0
> 
> 时间：2013-04-08T10:09:12.087
> 
> 标签：openacc

我问这个问题是为了明确这两个子句在嵌套数据环境中的行为。

当我第一次阅读 openACC API 时，我想如果我有以下代码：

```
#pragma acc create(a[0:20])
{
  #pragma acc pcopyin(a[0:20])
  {
    ...
  }
} 
```

第一个子句在加速器上分配必要的内存，然后`pcopyin`子句将数据从主机复制到加速器（不分配）。

现在阅读第 2 版 API 的草稿，我的理解是第二个`pcopyin`子句完全没有做任何事情，因为数据已经在加速器上分配，并且由于数据已经存在于加速器上，所以不应该进行分配或传输. 是对的吗？

当我用这种示例测试 CAPS 编译器时，我认为我获得了预期的行为。是不是因为 API 中的一些歧义？对于 v2，如果我想做这类事情，我应该用更新替换我的 copyin 子句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:34:03.937

我认为您对 v1.0 规范的解释是错误的（很容易读错，您并不孤单）。“present_or_ *something* ”仅在变量列表不存在时才执行“ *something ”。*

因此，在您的情况下，“#pragma acc pcopyin(a[0:20])”不应该做任何事情（因为“创建”，当我使用 CAPS Compiler 3.3.2 检查此处的行为时会发生这种情况

这是我为检查行为而编写的示例（请将 present_or_copyin(a[0:20] 更改为 copyin(a[0:20] 以查看行为不同：我在“present”之间修改数组“a” " 和 "present_or_copyin"，所以 present_or_copyin 或 "copyin" 导致不同的结果）：

```
#include <stdio.h>

int main(void) {

    int a[20], b[20], i;

    for (i = 0; i < 20; i++) {
        a[i] = 42;
    }

    #pragma acc data, create(a[0:20]) copyout(b[0:20])
    {
    // will upload the array of 42
        #pragma acc data copyin(a[0:20])
        {
            // executed on the host, not seen on GPU
            for (i = 0; i < 20; i++) {
                a[i] = 666;
            }
            // has no effect: already present
            #pragma acc data present_or_copyin(a[0:20])
            {
                #pragma acc kernels, private(i)
                #pragma acc loop independent
                for (i = 0; i < 20; i++) {
                    a[i] += i;
                }
                #pragma acc kernels, private(i)
                #pragma acc loop independent
                for (i = 0; i < 20; i++) {
                    b[i] = a[i];
                }

            }
        }
    }
    for (i = 0; i < 20; i++) {
        printf("%d, ", b[i]);
    }
    printf("\n");

} 
```

使用“present_or_copyin”这个示例程序写道：

```
42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61,
```

使用“copyin”这个示例程序写道：

```
666、667、668、669、670、671、672、673、674、675、676、677、678、679、680、681、682、683、684、685、
```

# javascript - javascript - 处理“未知错误”

> ID：15876465
> 
> 赞同：0
> 
> 时间：2013-04-08T10:09:38.667
> 
> 标签：javascript, error-handling, try-catch, indexeddb

我正在为我的 Web 应用程序编写错误处理代码。目前，当没有足够的权限从文件中读取时，我正在测试将 blob 保存到对象存储：

```
transaction.objectStore("files").put(object, key); 
```

执行这行代码后，我得到了，`UnknownError`但我不知道如何处理它。我尝试将这一行包装在 try/catch 块中，但从不执行 catch 部分。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T22:07:15.960

如果您想捕获所有错误，只需附加到`window.onerror`事件。

```
window.onerror = function(){
    //your code
    return false;
} 
```

如果要捕获特定的 IndexedDB 错误，请附加 IndexedDB 请求 onerror 事件：

```
request.onerror = function(){
    //your code
    return false;
} 
```

# javascript - 使用 JavaScript 拆分和连接四个文本字段的名称

> ID：15876469
> 
> 赞同：1
> 
> 时间：2013-04-08T10:09:52.833
> 
> 标签：javascript, dom

我有四行。每行都有名字和姓氏。我需要连接名字和姓氏。连接后它应该出现在标签中。

```
<input type='text'  id='fnamer1'  style='width:185px;height:20px;text-align:right;font-size:11px;background:white' onblur='Change(this, event);concatName()' onfocus='Change(this, event)'></td>";

<input type='text' id='lnamer1' style='width:185px;height:20px;text-align:right;font-size:11px;background:white' onblur='Change(this, event);concatName()' onfocus='Change(this, event)'></td>";

function concatName()
{  
        document.getElementById('disName').innerHTML="";
        var fname = document.getElementById("fnamer0").value;
        var lname = document.getElementById("lnamer0").value;
        var splitfname = fname.substring(0,1);
        var splitlname = lname.substring(0,4);
        var joinStr = splitlname+splitfname;
        document.getElementById('disName').innerHTML=joinStr.toUpperCase();
} 
```

这是第一行，但我怎样才能为四行做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:33:07.750

使用索引变量告诉 concatName 您要使用哪个项目：

```
function concatName(index)
{  
        document.getElementById('disName').innerHTML="";
        // this might be: document.getElementById('disName' + index).innerHTML="";
        var fname = document.getElementById("fnamer" + index).value;
        var lname = document.getElementById("lnamer" + index).value;
        var splitfname = fname.substring(0,1);
        var splitlname = lname.substring(0,4);
        var joinStr = splitlname+splitfname;
        document.getElementById('disName').innerHTML=joinStr.toUpperCase();
        // this might be: document.getElementById('disName' + index).innerHTML=joinStr.toUpperCase();
} 
```

然后：

```
concatName(0);
concatName(1);
concatName(2);
concatName(3); 
```

或者：

```
for(var i = 0; i < 4; i++) {
 concatName(i); 
} 
```

# c# - 在数据列表或列表视图中显示逗号分隔的字符串？

> ID：15876470
> 
> 赞同：1
> 
> 时间：2013-04-08T10:09:55.360
> 
> 标签：c#, listview, asp.net-4.0

我有字符串，其中包含逗号分隔格式的数据。如下所示。

```
xyz,abc,lmnk 
```

现在我需要在列表视图或数据列表的一列中显示这些项目，但如下所示（垂直）。

```
xyz
abc
lmnk 
```

怎么做？想不通。

我有其他列要显示在列表视图中，我的列表视图与自定义对象绑定。如下所示。

```
List<Product> p =GetProductlist();
        lvProduct.DataSource = p; 
```

现在在我的列表视图中，我正在显示列表的内容，例如

```
<a> '<%#DataBinder.Eval(Container.DataItem,"ProductName")%>'</a>
                           <a> '<%#DataBinder.Eval(Container.DataItem,"ProductIntegraidents")%>'</a> 
```

这里 ProuctInegraident 包含逗号分隔的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:14:20.347

只需使用这个：

```
myListView.DataSource = myString.Split(','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:51:30.853

好的得到了答案。

```
<%# Convert.ToString(Eval("ProductIntegraidents")).Replace(",","<br/>") % 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:13:40.077

您可以使用以下[`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法：

```
var str = "xyz,abc,lmnk";
var items = str.Split(new char[] { ',' }); 
```

然后您可以将返回的值用作`DataSource`：

```
var listBox = new ListBox();
listBox.DataSource = items; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:15:04.353

**使用以下代码：**

```
ListView.Items.Add(myString.Split(',')); 
```

希望它有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T10:15:19.830

使用[`String.Split()`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法；

> 返回一个字符串数组，其中包含此实例中由指定 Unicode 字符数组的元素分隔的子字符串。

```
var s = "xyz,abc,lmnk";
var i = s.Split(new char[] { ',' });

foreach(var z in i)
   Console.WriteLine(z); 
```

这是一个[`DEMO`](http://ideone.com/VkGmCn).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T10:16:34.223

```
String str = "xyz,abc,lmnk";
String[] Splitted = str.Split(',');
foreach (var word in Splitted)
{
    if (!String.IsNullOrEmpty(word))
        listView1.Items.Add(word);
} 
```

类似的东西，如果你想要更多的“控制”，请使用 ListViewItem，例如添加子项等。

# ruby-on-rails - 如何使用 Mongoid 执行 runCommand？

> ID：15876472
> 
> 赞同：3
> 
> 时间：2013-04-08T10:10:00.957
> 
> 标签：ruby-on-rails, mongodb, text, mongoid

我在 MongoDB 中有文本索引，并且想使用[文本](http://docs.mongodb.org/manual/reference/command/text/)命令在我的集合中进行搜索。在 Mongoid 中找不到此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:14:09.057

我试图找到解决方案，因为我也是一个 mongoid 用户。除了 where 查询之外，我还没有找到任何与 mongoid 中的搜索文本相关的特定内容。经过一番调查，我发现[了 mongoid_search](https://github.com/mauriciozaffari/mongoid_search) gem，它可能对搜索文本很有用。

它有一个限制，写在自述文件的第一行是“如果您的可搜索模型很大（即 1.000.000+ 条记录），solr 或 sphinx 可能更适合您。” 如果有，您需要配置 solr 或 elasticsearch 以获得更好的性能。如果您要在 heroku 上进行部署，那么也请考虑到这一点。

可能这会帮助你实现你的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T07:05:39.047

最近遇到了类似的情况。您可以通过以下方式在 Mongoid 中运行搜索命令：

```
session = Mongoid.session('default')
session.command({"text" => 'my_collection', 'search' => 'whatever'}) 
```

做一个很好的混合：

```
# mixins/search.rb
module Mixins
  module Search

    extend ActiveSupport::Concern

    module ClassMethods

      def search(query)
        session = Mongoid.session('default')
        session.command({"text" => collection.name, 'search' => query})
      end

    end

  end
end 
```

这样你就可以`include Mixins::Search`进入你的模型并使用它`Model.search 'whatever'`来搜索东西。

# excel - 如何总结一行包含文本，并且每个文本等于谷歌电子表格中的给定特定值

> ID：15876474
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:10:05.903
> 
> 标签：excel, function, google-sheets

在谷歌电子表格中，鉴于以下内容：

```
John      5
Peter     0
Brad      3
Smith     1

Grade1    1
Grade2    2
Grade3    3
Grade4    4

Pass      5
Fail      0 
```

我想做以下事情，当我在同一行写（John Grad1 Pass）时，它应该对每个单词的所有值求和，所以在这种情况下我应该得到“11”。下面是一些例子：

```
Peter  Grade2  Fail   2
Smith  Grade4  Pass   10 
```

ETC..

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:14:20.693

如果原始数据在 A 和 B 列中，并且您的 3 个搜索词在 C1:E1 中，那么您可以使用：

`=ArrayFormula(SUM(SUMIF(A:A;C1:E1;B:B)))`

# image - 如何获取电子商务网站的图片或产品照片/图像

> ID：15876475
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:10:06.777
> 
> 标签：image, e-commerce, photos

我正在开发一个电子商务网站（时尚相关）。我想知道如何让产品的图片上传到网站。我在大多数网站上看到高清照片与模型一起使用。我是否需要实际寻找我的产品的照片，或者是否有一些我可以下载和使用的工具？

我对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:19:56.620

既然你提到了时尚相关的网站，所以我相信你需要付出一些金钱和努力才能告诉用户你的产品。

作为客户，如果没有产品的原始图片，我为什么要在您的网站上购买。在电子商务领域工作这么久让我对客户的思维方式有了一个很好的了解，当它与时尚相关时，包括我在内的每个人都希望看到我要购买的产品的好图片。

我对您的建议是付出一些努力并获得高质量的图像，否则无论产品有多好/最好，我担心人们不会对您的产品产生兴趣。

# wpf - 从视图模型打印 WPF 视觉对象

> ID：15876478
> 
> 赞同：0
> 
> 时间：2013-04-08T10:10:17.520
> 
> 标签：wpf, mvvm, printing

如何通过仅调用打印方法而不使用 RelayCommand 从 ViewModel 打印视觉对象或窗口，如本示例所示：[使用 MVVM 模式打印 WPF 视觉](https://stackoverflow.com/questions/3875789/print-wpf-visuals-with-mvvm-pattern)对象？

```
var printDlg = new PrintDialog();
printDlg.PrintVisual(View, "JOB PRINTING") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:15:14.193

好的，这是一个快速而肮脏但可重用的附加行为类。免责声明：我只是在几分钟内破解了它，它有缺陷，应该很容易克服。

首先我们需要我们的服务类。

```
public class VisualPrinter
{
    private static RoutedUICommand PrintVisualCommand = new RoutedUICommand("PrintVisualCommand", "PrintVisualCommand", typeof(VisualPrinter));

    #region ab PrintCommand

    public static ICommand GetPrintCommand(DependencyObject aTarget)
    {
        return (ICommand)aTarget.GetValue(PrintCommandProperty);
    }

    public static void SetPrintCommand(DependencyObject aTarget, ICommand aValue)
    {
        aTarget.SetValue(PrintCommandProperty, aValue);
    }

    public static readonly DependencyProperty PrintCommandProperty =
        DependencyProperty.RegisterAttached("PrintCommand", typeof(ICommand), typeof(VisualPrinter), new FrameworkPropertyMetadata(PrintVisualCommand));

    #endregion

    #region ab EnablePrintCommand

    public static bool GetEnablePrintCommand(DependencyObject aTarget)
    {
        return (bool)aTarget.GetValue(EnablePrintCommandProperty);
    }
    public static void SetEnablePrintCommand(DependencyObject aTarget, bool aValue)
    {
        aTarget.SetValue(EnablePrintCommandProperty, aValue);
    }

    public static readonly DependencyProperty EnablePrintCommandProperty =
        DependencyProperty.RegisterAttached("EnablePrintCommand", typeof(bool), typeof(VisualPrinter), new FrameworkPropertyMetadata(false, OnEnablePrintCommandChanged));

    private static void OnEnablePrintCommandChanged(DependencyObject aDependencyObject, DependencyPropertyChangedEventArgs aArgs)
    {
        var newValue = (bool)aArgs.NewValue;
        var element = aDependencyObject as UIElement;
        if(newValue)
        {
            element.CommandBindings.Add(new CommandBinding(PrintVisualCommand, OnPrintVisual));
        }
    }

    private static void OnPrintVisual(object aSender, ExecutedRoutedEventArgs aE)
    {
        // the element is the one were you set the EnablePrintCommand
        var element = aSender as Visual;
        var printDlg = new PrintDialog();
        // do the printing
    }

    #endregion
} 
```

这里我们定义了两个附加属性。`PrintCommand`用于将实际打印命令注入到视图模型中，这必须通过 OneWayToSource 完成。第二个`EnablePrintCommand`是启用打印，设置应该打印哪个元素并注册命令绑定。

我当前的版本有一个缺陷，你不能在同一个元素上设置两个属性，但这很容易克服。所以要打印一个按钮，它看起来像这样：

```
<Grid local:VisualPrinter.EnablePrintCommand="True">
    <Button Content="Test" local:VisualPrinter.PrintCommand="{Binding ViewModelPrint, Mode=OneWayToSource">
</Grid> 
```

While`ViewModelPrint`是视图模型中 ICommand 类型的属性，可以执行然后打印网格（因此是按钮）。

# .htaccess - Apache 文件夹密码保护的安全性如何？

> ID：15876479
> 
> 赞同：-3
> 
> 时间：2013-04-08T10:10:22.630
> 
> 标签：.htaccess, apache2

Apache 文件夹密码保护的安全性如何？当然，安全性是相对的，取决于其他变量，例如服务器的其余部分等等。

但只放大 .htaccess 中的文件夹保护：这是一种安全的方式吗？有已知的大洞吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:34:46.130

我假设您指的`AuthType`是用于创建密码保护目录的指令集。

你可以做一些事情来让它*“更安全”*。

1.  使用 DIGEST 方法而不是 BASIC 的`AuthType`. BASIC 身份验证将用户名和密码作为 base64 编码字符串传递。DIGEST 使用随机数和 MD5，因此永远不会传输实际密码。

2.  确保您的 htpasswd/htdigest 文件不在 web 文档根目录中，否则可能有人可以通过 apache 访问它（例如`http://example.com/.htpasswd`）

3.  如果*必须*使用 BASIC 身份验证，请考虑使用 SSL

4.  与基于会话的身份验证不同，登录的用户将保持登录状态，直到浏览器关闭。没有会话超时。除了可能强制 401/403 欺骗浏览器认为其身份验证不正确之外，您对此无能为力

附加信息：[http ://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

# asp.net - Asp.Net 如何将一个 css 样式应用到它的所有控件中

> ID：15876480
> 
> 赞同：0
> 
> 时间：2013-04-08T10:10:22.817
> 
> 标签：asp.net, css, controls

我想使用一种适用于所有控件的css样式。

```
.(Kind of Control)

{
  css propeties;
} 
```

我该怎么做 ？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:13:36.217

您可能需要以不同的方式处理此问题，因为您需要设置控件类型的外观并对其应用 CSS。

[MSDN网站](http://msdn.microsoft.com/en-us/library/ykzx33wh.ASPx)上有更多详细信息

此外，在上面的链接中，您可以查看可能也有帮助的主题。

> 主题类似于级联样式表，因为主题和样式表都定义了一组可以应用于任何页面的通用属性。但是，主题在以下方面与样式表不同：
> 
> 主题可以定义控件或页面的许多属性，而不仅仅是样式属性。例如，使用主题，您可以指定 TreeView 控件的图形、GridView 控件的模板布局等。
> 
> 主题可以包括图形。
> 
> 主题不像样式表那样级联。默认情况下，由页面的 Theme 属性引用的主题中定义的任何属性值都会覆盖在控件上以声明方式设置的属性值，除非您使用 StyleSheetTheme 属性显式应用主题。有关详细信息，请参阅上面的主题设置优先级部分。
> 
> 每个页面只能应用一个主题。您不能将多个主题应用于页面，这与可以应用多个样式表的样式表不同。

然而：

> “主题还可以包含级联样式表（.css 文件）。当您将 .css 文件放入主题文件夹时，样式表会自动作为主题的一部分应用。您可以使用文件扩展名定义样式表.css 在主题文件夹中。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:14:15.220

尝试文本框：

```
[type=text]
{
    css propeties;
} 
```

用于文本区域

```
textarea 
{ 
    css propeties;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:14:03.630

例如，如果您想将 css 应用于所有标签，只需键入；

```
label
{
 css propeties;
} 
```

注意：使用 html 控件名称来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:16:55.387

即使不指定 CssClass="YourStyle" 属性，您也可以应用样式，如下例所示。

```
<style type="text/css">
[type=textarea]
{
    css propeties;
}

</style> 
```

# core-data - 我可以使用 Titanium 绘制实时图形并使用 ORM db 吗？

> ID：15876482
> 
> 赞同：-2
> 
> 时间：2013-04-08T10:10:29.740
> 
> 标签：core-data, opengl-es, orm, cross-platform, titanium

我的背景：我有 iOS 编程经验，很少使用 Java。我一直在网上查看代码示例并在钛网站上搜索 fx core-data，但这对我没有多大帮助。

问题：我的新项目包括以下功能：

1.  摄像头（条码读取和分析）
2.  大量带有自定义图形动画的图像处理显示 fx。一个应该通过手指触摸旋转的轮子。
3.  ORM db 类似于 Core-Data 还是哪一个？普通的sqlite？

问：Titanium 跨平台是否支持这 3 个步骤？（针对iphone和android平台）。

**请只是一些明确的答案-不要讨论！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:21:46.267

1.  取决于设备，应该适用于 Android 和 iOS，但我没有检查
2.  Titanium 被解释为 JavaScript，因此对于高级或繁重的东西来说并不多
3.  sqllite 应该可以在大多数设备上使用

我认为你的第 2 步是这里的交易破坏者。

# java - 从电子邮件地址推导出的 Exchange 用户名 DOMAIN\USERNAME\MAILBOX

> ID：15876484
> 
> 赞同：1
> 
> 时间：2013-04-08T10:10:32.350
> 
> 标签：java, outlook, exchange-server

我正在尝试使用 javax.mail.Store 连接到 MS Exchange。

根据以下帖子[将 POP 和 IMAP 客户端连接到 MS Exchange 服务器](http://www.msexchange.org/articles-tutorials/exchange-server-5-5/Connecting_POP_And_IMAP_Clients_To_MS_Exchange_Server.html)，用户名必须指定为 DOMAIN\USERNAME\MAILBOX。

是否可以获得只有电子邮件地址（例如 name.surname@company.com）和预配置 Outlook 的 USERNAME 和 MAILBOX？我只是想知道是否可以在没有 MS Exchange 管理员帮助的情况下找到此信息。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T10:51:27.203

会`substring()`帮助你吗？[http://www.tutorialspoint.com/java/java_string_substring.htm](http://www.tutorialspoint.com/java/java_string_substring.htm)

我从来没有使用过 Java，所以恐怕我不能举个例子，但我用 PHP 和`substr()`.

# php - 从数组中获取某些行

> ID：15876490
> 
> 赞同：0
> 
> 时间：2013-04-08T10:10:54.603
> 
> 标签：php, arrays, image, count, rows

美好的一天，我是新来的，真的不知道要搜索什么。我有一个关于从数据库中获取某些行的问题。我不能把它放在一个while循环中，因为我会一遍又一遍地输出HTML。

无论如何，我会展示代码和我的问题。

```
<?php 

        $q = "SELECT * FROM image, pakket
        WHERE pakket.pakket_id = image.pakket_id 
        AND pakket.pakket_id='$packageid'";

        $image = $row['img'];           

        if ($result = mysql_query($q)){
        <a href="<?php echo $image; ?>"  rel="fancybox-thumb" class="fancybox-thumb"><img width="370" src="<?php echo $image;; ?>" style="border: 1px solid #ccc;" ></a>
        <a href="<?php echo $image; ?>" rel="fancybox-thumb" class="fancybox-thumb"><img width="119" src="<?php echo $image; ?>" style="border: 1px solid #ccc;"></a>
        <a href="img/screens/1/EO_screen3.jpg" rel="fancybox-thumb" class="fancybox-thumb"><img width="119" src="img/screens/1/EO_screen3.jpg" style="border: 1px solid #ccc;"></a>
        <a href="img/screens/1/EO_screen2.jpg" rel="fancybox-thumb" class="fancybox-thumb"><img width="119" src="img/screens/1/EO_screen2.jpg" style="border: 1px solid #ccc;"></a>
        }
        else {
            echo "Afbeeldingen konden niet opgehaald worden.";
        }
        ?> 
```

我想要的是在正确的 HTML 中显示正确的图像。我在想我应该有一个计数器来计算数组中的行数，但我不知道我应该如何处理这个问题。

我感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:36:08.233

我同意chandresh ......你的代码很混乱......尝试以这种方式使用它

```
$link = mysqli_connect("localhost", "my_user", "my_password", "world");
$q = "SELECT * FROM image, pakket
        WHERE pakket.pakket_id = image.pakket_id 
        AND pakket.pakket_id='$packageid'";

$result = mysqli_query($link, $q);
$rs = mysqli_fetch_array($result)
while($rs)
{

// now print the image code in this using 
//$row['image']

} 
```

您需要将选择查询的结果集放在一个数组中，然后才能使用它....浏览[php 文档](http://www.php.net/manual/en/mysqli-result.fetch-array.php)一次。

# sitecore - Sitecore 元标记

> ID：15876493
> 
> 赞同：1
> 
> 时间：2013-04-08T10:11:01.433
> 
> 标签：sitecore

有没有办法为站点核心项目添加元标记，管理员可以在其中定义元关键字、元描述。

我指的是以下文件，

[Sitecore SEO 用户指南](http://www.codehousegroup.com/~/media/Files/pdf/Guides/sitecore-seo-guide.ashx)

SEO 工具包不这样做。我怎样才能获得这个功能？

另外，我查看了 nicam 演示项目，它有这个元标记基础设施。我在哪里可以找到“Nicam 元标签模块”之类的东西...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:21:37.637

有两个现有的[Sitecore Marketplace](http://marketplace.sitecore.net)模块可以执行此操作：
[Metatag Manager](http://marketplace.sitecore.net/en/Modules/MetaTag_Manager.aspx)和[Meta-tags](http://marketplace.sitecore.net/en/Modules/Meta-Tags.aspx)。

否则，您可以通过将元标记字段添加到模板并输出它们（使用渲染或子布局）来创建自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:34:19.870

请参阅此博客文章[http://andyuzick.arke.com/2013/03/the-heart-of-meta.html](http://andyuzick.arke.com/2013/03/the-heart-of-meta.html)

这是一个关于 Sitecore Marketplace 上提供的元标记管理器共享源项目。它允许内容所有者管理多种类型，包括无需编码即可添加动态标签的能力。完整的文档在这里[http://marketplace.sitecore.net/services/~/media/Marketplace/Modules/M/MetaTag%20Manager/Documents/ArkeSharedSourceMetatags1.ashx](http://marketplace.sitecore.net/services/~/media/Marketplace/Modules/M/MetaTag%20Manager/Documents/ArkeSharedSourceMetatags1.ashx)。

# c++ - C++ makefile 和正确（足够？）标志以进行优化

> ID：15876500
> 
> 赞同：1
> 
> 时间：2013-04-08T10:11:25.823
> 
> 标签：c++, makefile

[使用这里](https://stackoverflow.com/questions/10455480/makefile-improvements-dependency-generation-not-functioning)的makefile ，我想用-O2编译我的项目。我唯一`FLAGS`使用的是

```
CXX = g++
CXXFLAGS = 
LDFLAGS  = -O2
DEPFLAGS = -MM 
```

仅使用`-O2`as是否明智和安全`LDFLAGS`？我想要对可执行文件做的唯一事情就是在我的机器上执行它，仅此而已.. 即，程序已准备好交付。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:18:10.753

你应该有`CXXFLAGS=-O2`（我可能也会添加`-Wall -Werror`）

# jsf - primefaces 组件的 Ajax 事件

> ID：15876510
> 
> 赞同：1
> 
> 时间：2013-04-08T10:11:55.240
> 
> 标签：jsf, primefaces

我如何知道每个 primefaces 组件（如饼图等）的 ajax 事件？在某处可以找到列表吗？

# sql - SQL 通过滑动窗口记录出现次数

> ID：15876511
> 
> 赞同：3
> 
> 时间：2013-04-08T10:11:55.543
> 
> 标签：sql, sql-server, count, sql-server-2012

在上一个问题（请参阅：[SQL Keeping count of occurrences](https://stackoverflow.com/questions/15817239/sql-keeping-count-of-occurrences)）中，我需要计算一个变量的出现次数。

提供的代码如下：

```
SELECT 
    [Date], Code, 
    [Count] = COUNT(*) OVER (PARTITION BY Code ORDER BY [Date] ROWS UNBOUNDED PRECEDING)
FROM dbo.YourTable
ORDER BY [Date]; 
```

但是，现在我需要对该代码进行改进：

假设我有下表：

```
 Date          | Code
   ------------------------
   2010/01/01    | 25
   2010/01/01    | 22
   2010/01/01    | 23
   2010/01/01    | 25
   2010/01/02    | 23
   2010/01/02    | 23
   2010/01/03    | 23
   2010/01/04    | 23
   2010/01/05    | 23
   2010/01/06    | 23
   2010/01/07    | 23
   .....
   2013/03/02    | 21 
```

现在，我需要计算特定时间段内出现的次数。所需的输出如下（为简单起见，假设时间范围为 n=2 天）

```
 Date         | Code  |  Occurrences
   ------------------------------------
   2010/01/01    | 25    |      1
   2010/01/01    | 22    |      1
   2010/01/01    | 23    |      1
   2010/01/01    | 25    |      2
   2010/01/02    | 23    |      2
   2010/01/02    | 23    |      3
   2010/01/03    | 23    |      3 -> We are not considering the occurence in 2011/01/01 as it is out of the scope now
   2010/01/04    | 23    |      2 -> Considers only occurrences in 01/03 and 01/04 
   2010/01/05    | 23    |      2
   2010/01/06    | 23    |      2
   2010/01/07    | 23    |      2
   .....
   2013/03/02    |  21   |      1 
```

也就是说，我需要知道代码“x”在过去“n”个月内出现在我的表中的次数。

这是在 SQL Server 2012 中运行的。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:50:48.123

将选项与[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)、[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符和[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)排名函数一起使用

```
 ;WITH cte AS
 (
  SELECT [Date], Code
  FROM dbo.YourTable  
  GROUP BY [Date], Code
  )
  SELECT c.Date, c.Code, o.Occurrences
  FROM cte c 
    CROSS APPLY (
                 SELECT t2.[Date], t2.Code,
                        ROW_NUMBER() OVER(PARTITION BY c.[Date] ORDER BY t2.[Date]) AS Occurrences        
                 FROM dbo.YourTable t2
                 WHERE c.Code = t2.Code
                   AND DATEDIFF(day, t2.[Date], c.[Date]) BETWEEN 0 AND 1
                 ) o
  WHERE c.Code = o.Code AND c.[Date] = o.[Date] 
  ORDER BY c.[Date] 
```

[**SQLFiddle**](http://sqlfiddle.com/#!6/cf8d8/1)上的演示[](http://sqlfiddle.com/#!6/cf8d8/1)

 **为了提高性能，请使用此索引

```
CREATE INDEX x ON dbo.YourTable([Date], Code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:26:00.040

试试这个

```
 SELECT * FROM 
            (SELECT 
            ROW_NUMBER() OVER (PARTITION BY Code,[Date] ORDER BY [Date]) AS NO,
            [Date], Code, 
            COUNT(1) OVER (PARTITION BY Code ,[Date]) AS [Count] 
        FROM dbo.YourTable Where date between dateadd(m, -n, GETDATE()) and GETDATE() ) 
AS T1 WHERE No = 1
        ORDER BY [Date]; 
```

或者试试这个。

```
 SELECT * FROM 
                (SELECT 
                ROW_NUMBER() OVER (PARTITION BY Code,[Date] ORDER BY [Date]) AS NO,
                [Date], Code, 
                COUNT(1) OVER (PARTITION BY Code ,[Date]) AS [Count] 
            FROM dbo.YourTable Where 
    Code = 25 And
    date between dateadd(m, -n, GETDATE()) and GETDATE() ) AS T1 WHERE No = 1
            ORDER BY [Date]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:34:02.593

请试试：

```
SELECT 
    *, 
    ROW_NUMBER() OVER (PARTITION BY Code ORDER BY Code) Occurrences 
FROM YourTable
ORDER BY Occurrences 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:35:09.297

试试这个查询

**查询 1**：

```
select 
  count(*) as CountOccurance,
  code
from 
  tbl 
where 
  code = 21 and 
  date between dateadd(m, -5, SYSDATETIME ()) and SYSDATETIME ()
group by 
  code 
```

**结果**：

```
| COUNTOCCURANCE | CODE |
-------------------------
|              1 |   21 | 
```

如果要计算所有代码值，请删除 where 子句。

## **[SQLFIDDLE](http://sqlfiddle.com/#!6/40a6f/11)**

希望这可以帮助**

# javascript - javascript的mixin继承模式失去了闭包特性

> ID：15876515
> 
> 赞同：2
> 
> 时间：2013-04-08T10:12:03.780
> 
> 标签：javascript

总之，我知道定义 javascript OOP 对象的传统方式。这是示例。

```
var TField=function(jData)
{
   this.id=jData.id;
   this.name=jData.name;
   this.attributes=jData.attributes;
   TField.prototype.render=function(){
      alert(jData.id);
   };
}; 
```

我们可以发现无论何时调用它都`TField.prototype.render`知道它的值是多少，这是因为.`jData``Closure`

但现在我只是尝试在 javascript 中实现继承。我发现推荐的方式是`Mixin pattern`. 这是我到目前为止所做的代码。

```
TChildField.prototype.render=function(){
      alert('TChildField render.');
      //Can not utilize the parameters of the constructor. like jData
};

var TField=function(jData)
{
   this.id=jData.id;
   this.name=jData.name;
   this.attributes=jData.attributes;

};

TField.prototype.render=function(){
      alert('TField render.');
};

var TChildField=function(jData)
{
    TField.call(this,jData)
}

var tobj={id:"1",name:"test",attribute:{}};
TChildField.prototype=Object.create(TField.prototype)
TChildField.prototype.render=function(){
      alert('TChildField render.');
};
var c= new TChildField(tobj);
alert(c.id);
alert(c.name); 
```

好吧，它工作正常没有问题。但是我的问题是我发现我不能像TField一样`jData`使用构造函数的参数。`TChildField`我知道我可以定义`this.Data=jData`以便我可以在 中使用它`TChildField.prototype.render`，但我不希望它作为一个属性。而最糟糕的是失去了利益`Closure`，有什么办法可以做到吗？或者我不知道的东西？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:08:07.047

你需要这个封装做什么？设置有什么问题`this.Data=jData`？这很简单，它可以解决您的问题。为什么最糟糕的事情是失去关闭的好处？实际上应该避免闭包，因为它们可能会导致非常奇怪的问题（内存泄漏？）。

# android - 在android的后台线程中从磁盘加载缓存的图像

> ID：15876520
> 
> 赞同：1
> 
> 时间：2013-04-08T10:12:13.840
> 
> 标签：android, multithreading, caching

我有一个列表视图，其中的图像是从互联网加载的，然后缓存在磁盘上。滚动时，我正在尝试使用 ExecutorService 在后台线程中从磁盘加载图像（因为滚动时会有多个图像） - 如下所示：

```
executorService.submit(new Runnable() {
    @Override
    public void run() {
           // load images from the disk
           // reconnect with UI thread using handler
        }
} 
```

但是，滚动一点也不流畅，而且非常生涩——好像 UI 线程在某个地方被阻塞了。但是当我评论这个给定的代码时，滚动是平滑的。我无法理解我的实施中的缺陷。

编辑：刚才我发现当我将消息从后台线程传递给 UI 线程时，问题正在发生。如果我评论那部分，滚动是平滑的（但当然不显示图像）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:23:39.873

您可以使用延迟加载或通用图像加载器

延迟列表是使用 url 从 sdcard 或 fomr 服务器延迟加载图像。这就像按需加载图像。

图像可以缓存到本地sd卡或手机内存。Url 被认为是关键。如果密钥存在于 sdcard 中，则显示来自 sd 卡的图像，否则通过从服务器下载显示图像并将其缓存到您选择的位置。可以设置缓存限制。您还可以选择自己的位置来缓存图像。缓存也可以清除。

而不是用户等待下载大图像然后显示惰性列表按需加载图像。由于图像区域缓存，您可以离线显示图像。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。懒惰列表

在你的 getview

```
imageLoader.DisplayImage(imageurl, imageview); ImageLoader Display method

public void DisplayImage(String url, ImageView imageView) //url and imageview as parameters
{
imageViews.put(imageView, url);
Bitmap bitmap=memoryCache.get(url);   //get image from cache using url as key
if(bitmap!=null)         //if image exists
imageView.setImageBitmap(bitmap);  //dispaly iamge
else   //downlaod image and dispaly. add to cache.
{
queuePhoto(url, imageView);
imageView.setImageResource(stub_id);
}
} 
```

惰性列表的替代方法是通用图像加载器

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用 Universal Image Loader，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

// Get singletone instance of ImageLoader
imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
  // You can pass your own memory cache implementation
 .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
 .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
 .enableLogging()
 .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以**查看持有者以实现平滑滚动和性能**。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

# php - php mysqli 从数据库表中的每一行生成列表项

> ID：15876523
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:12:27.983
> 
> 标签：php, mysqli

我的数据库中名为“职责”的表中有以下内容

```
Progressing of new Engineering & Technical enquiries from client
Expediting jobs
Resolving any client's requests
Quote processing
Communicating and liaising between client and Team Leader
Progressing of new repair enquiries
Attend meetings with clients and generating enquiries
Build relationships and obtain new orders from clients
Liaising with customer planners to organise offshore trips
Assisting in the workshop during busy periods 
```

它通过 Textarea 输入到数据库中，每个都是一个新行。

输出数据库单元格时，它显示为单行。但是，如果我使用`nl2br`它来回显它会添加`<br>`到代码中，因此它会显示为列表。

```
$result2 = $con->query('SELECT * FROM role WHERE id = "'.$row['role'].'"');
while ($row2 = $result2->fetch_assoc()) {
    echo "<p>".nl2br($row2['duties'])."</p>";
} 
```

有没有办法改变它，让它回显每一行，而不是`<br>`像下面这样的实际列表项？

```
<li>Progressing of new Engineering & Technical enquiries from client</li>
<li>Expediting jobs</li>
<li>Resolving any client's requests</li>
<li>Quote processing</li>
<li>Communicating and liaising between client and Team Leader</li>
<li>Progressing of new repair enquiries</li>
<li>Attend meetings with clients and generating enquiries</li>
<li>Build relationships and obtain new orders from clients</li>
<li>Liaising with customer planners to organise offshore trips</li>
<li>Assisting in the workshop during busy periods</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:19:45.897

在你的`while`循环中，替换：

```
echo "<p>".nl2br($row2['duties'])."</p>"; 
```

和

```
$withLineBreaks = nl2br($row2['duties']) ;
echo "<li>" . str_replace ( "<br/>", "</li><li>" , mixed $withLineBreaks) . "</li>"; 
```

（如果您的数据末尾有一个尾随换行符，那么您最终会得到一个多余的/空`<li></li>`的 - 所以您可能需要先将其修剪掉）。

当然`nl2br`，如果你有正确的正则表达式，你可以直接替换那些换行符而不是使用。无法对此进行测试，但认为这应该获得任何常见的换行格式：

```
echo "<li>" . preg_replace("#[\n\r]{1,2}#","</li><li>", $row2['duties']) . "</li>"; 
```

# android - 在 Android 的 layout.xml 中使用派生类

> ID：15876529
> 
> 赞同：3
> 
> 时间：2013-04-08T10:12:56.533
> 
> 标签：android, android-layout, android-widget

我正在尝试在 Android 应用程序中实现派生类。该类派生自 ToggleButton 小部件。它看起来像这样：

```
public class ButtonController extends ToggleButton implements OnClickListener{

    private boolean enabled;
    private boolean on;

    public ButtonController(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        enabled =false;
    }

    public void setEnabled(boolean en){
        enabled=en;
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(enabled == true)
            on=!on;
    }
} 
```

但是如何在我的 layout.xml 中使用这个自定义对象？如果我只创建一个普通的 ToggleButton 并尝试

```
ButtonController b1 = (ButtonControllerfindViewByI(R.id.button1); 
```

应用程序只是崩溃。

我还尝试在 layout.xml 中制作对象，如下所示：

```
<ToggleButton
                    class = "com.example.testv1.ButtonController"
                    android:id="@+id/Button1"
                    android:layout_width="100sp"
                    android:layout_height="50sp"
                    android:textOn="Button 1 On"
                    android:textOff="Button 1 Off" /> 
```

但应用程序放在设备上时仍会意外停止。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:14:17.270

尝试使用：

```
<com.example.testv1.ButtonController
    android:id="@+id/Button1"
    android:layout_width="100sp"
    android:layout_height="50sp"
    android:textOn="Button 1 On"
    android:textOff="Button 1 Off" /> 
```

# spring - 使用 Spring 的 Primefaces 移动视图导航：视图不会改变

> ID：15876531
> 
> 赞同：2
> 
> 时间：2013-04-08T10:13:07.423
> 
> 标签：spring, mobile, primefaces

我正在 Spring 3.2.0、Spring webflow、JSF 2.1.11、Primefaces 3.4.1、Primefaces mobile 0.9.3 中实施问卷调查

规范是将所有问题放在同一个物理 .xhtml 页面中，但分成多个部分，以便一次只显示一个部分。在移动网站中，我为每个部分使用 pm:view。

我需要使用后导航，因为所有部分都引用同一个 bean 来提交数据，并且我需要在每个部分填充后进行验证。这是我的代码示例：

```
<pm:page id="page">

      <pm:view id="page1">
         <pm:content>
            <h:form id="page1Form">
                <h:panelGroup id="form1Container" >
                    <p:inputText id="input1" value="${managedBean.property1}" required="true" />

                    <p:commandButton  id="next" action="pm:page2" value="Next" process="form1Container" update="form1Container :page2Form"/>
                </h:panelGroup>
            </h:form>
         </pm:content>
      </pm:view>   

      <pm:view id="page2">
         <pm:content>
            <h:form id="page2Form">
                <h:panelGroup id="form2Container" >
                    <p:inputText id="input2" value="${managedBean.property2}" required="true" />

                    <h:commandButton id="registerSave" action="save" value="Save"/>
                </h:panelGroup>
            </h:form>
         </pm:content>
      </pm:view>   

</pm:page> 
```

验证正确触发，并且 input1 的值在按下“下一步”按钮时更新。我还可以在服务器日志上看到一个 ajax 请求。但是页面只是刷新在 page1 上，page2 永远不会显示。没有页面中的验证错误，我可以通过萤火虫看到请求/响应中没有错误。

我在做什么错才能到达第 2 页？

我可以看到 page2 的内容在生成的 html 页面中被 css 隐藏，我可以尝试使用 javascript 使其可见，但 html 中缺少所有 css 类（我认为 jQuery 这样做是为了表演）。有一种方法可以使用 javascript 作为解决此问题的方法吗？

再次感谢，

马蒂亚

ps 我也尝试在“下一步”按钮中使用 ajax="false"，但它仍然不起作用。我还尝试将操作字符串作为 bean 方法的返回对象，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:58:30.160

我在旧的 Primefaces 移动导航样式中找到了一种解决方法。在 ajax 命令按钮上，我直接调用 PrimeFaces.navigate，在之前检查验证错误。代码是这样的：

```
<p:commandButton  id="nextButton_page1" action="pm:page2" oncomplete="if (!args.validationFailed) PrimeFaces.navigate('#page2',{});" value="Next" process="form1Container" update="form1Container :page2Form"/> 
```

上一个按钮的类似内容。这对我有用：ajax 调用处理 form1 的值，如果发生任何验证错误，导航将停止，如果一切正常，导航将转到 page2。

if (!args.validationFailed) 检查验证错误

PrimeFaces.navigate('#page2',{}) 导航到下一页

祝你有美好的一天，

马蒂亚

# c++ - 用于 ARMv7/ARMv7s 的 Lua

> ID：15876532
> 
> 赞同：2
> 
> 时间：2013-04-08T10:13:16.490
> 
> 标签：c++, ios, cocos2d-iphone, lua, cocos2d-x

我正在 xcode 上用 cocos2d-x 编写游戏，但在为 armv7/7s 编译正确版本的 Lua 时遇到问题。

这是我收到的错误消息：

```
ld: warning: ignoring file 
/Users/seriousgames/Documents/PopulationTest/PopulationTest/libs/lua/liblua.a, file was built for archive which is not the architecture being linked (armv7): /Users/seriousgames/Documents/PopulationTest/PopulationTest/libs/lua/liblua.a
Undefined symbols for architecture armv7:
  "_luaL_newstate", referenced from:
      Behavior::onTerminate(Status) in Behavior.o
  "_luaL_openlibs", referenced from:
      Behavior::onTerminate(Status) in Behavior.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我选择为 macosx（而不是 iOS）编译，LUA 确实可以工作。

**编辑：**我最终使用了较旧的 Lua 版本 5.1.4，并按照此处的说明进行操作：http: [//blog.stokedsoftware.com/blog/2012/02/05/scripting-ios-games-with-lua -part-ii/](http://blog.stokedsoftware.com/blog/2012/02/05/scripting-ios-games-with-lua-part-ii/) 此方法不需要 lualib.a 外部库，而是 xcode 将 lua 源构建到项目中。

注意：虽然他的代码在 Objective C 中，但我发现他的方法确实适用于 cocos2d-x。

他特别从构建中排除了 lua.c 和 luac.c 文件。我选择不这样做，但我注释掉了 int main() 函数，因为它们会与 main.m 中的函数发生冲突。我会稍微回答一下这个问题，但我仍然有兴趣知道如何为 arm7/7s 构建 liblua.a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:44:08.543

见编辑：

编辑：我最终使用了较旧的 Lua 版本 5.1.4，并按照此处的说明进行操作：http: [//blog.stokedsoftware.com/blog/2012/02/05/scripting-ios-games-with-lua -part-ii/](http://blog.stokedsoftware.com/blog/2012/02/05/scripting-ios-games-with-lua-part-ii/)此方法不需要 lualib.a 外部库，而是 xcode 将 lua 源构建到项目中。

注意：虽然他的代码在 Objective C 中，但我发现他的方法确实适用于 cocos2d-x。

他特别从构建中排除了 lua.c 和 luac.c 文件。我选择不这样做，但我注释掉了 int main() 函数，因为它们会与 main.m 中的函数发生冲突。我会稍微回答一下这个问题，但我仍然有兴趣知道如何为 arm7/7s 构建 liblua.a。

# matlab - 在 Matlab 中沿绘图查找点

> ID：15876539
> 
> 赞同：4
> 
> 时间：2013-04-08T10:13:42.343
> 
> 标签：matlab, math, plot

我有以下图和创建该图的数据文件。我想让 Matlab 为我找到以下几点：

1.  [y,x] 表示 100% 线指出的峰值
2.  [x] 表示绘图与 y=0 线相交的位置
3.  [x] 其中 y 是第 1 部分中发现的峰值的 50% 和 20%。

是否有任何人们知道的附加工具或软件包可以帮助我完成此任务？我需要为一组图执行此操作，因此合理自动化的东西将是理想的。

我当然可以在 Matlab 中进行编程和计算部分，只需能够加载数据文件，将其与曲线或函数匹配，并找到各种 [x,y] 坐标。

![数据图](https://i.stack.imgur.com/5te4D.gif)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T07:48:06.683

好的，这就去。据我所知，Matlab 中没有内置的例程来做你想做的事。你必须自己做一个。需要注意的几点：

*   应该很明显，线性插值数据是最容易做到的，应该没有问题

*   使用单个多项式插值也不是太难，尽管还有一些细节需要处理。找到峰值应该是首要任务，这涉及找到导数的根（`roots`例如，使用 ）。找到峰值后，通过将多项式偏移该数量，在所有所需级别（0%、20%、50%）处找到多项式的根。

*   使用三次样条 ( `spline`) 是最复杂的。对于具有完整三次的所有子区间，应重复上面概述的一般多项式例程，考虑到最大值也可能位于子区间边界上的可能性，并且找到的任何根和极值都可能位于区间之外三次方有效（也不要忘记`x`使用的 -offsets `spline`）。

这是我对所有 3 种方法的实现：

```
%% Initialize
% ---------------------------

clc
clear all

% Create some bogus data
n = 25;

f = @(x) cos(x) .* sin(4*x/pi) + 0.5*rand(size(x));
x = sort( 2*pi * rand(n,1));
y = f(x);

%% Linear interpolation
% ---------------------------

% y peak
[y_peak, ind] = max(y);
x_peak = x(ind);

% y == 0%, 20%, 50%
lims = [0 20 50];
X = cell(size(lims));
Y = cell(size(lims));
for p = 1:numel(lims)

    % the current level line to solve for
    lim = y_peak*lims(p)/100;

    % points before and after passing through the current limit
    after    = (circshift(y<lim,1) & y>lim) | (circshift(y>lim,1) & y<lim);
    after(1) = false;
    before   = circshift(after,-1);

    xx = [x(before) x(after)];
    yy = [y(before) y(after)];

    % interpolate and insert new data
    new_X = x(before) - (y(before)-lim).*diff(xx,[],2)./diff(yy,[],2);
    X{p} = new_X;
    Y{p} = lim * ones(size(new_X));

end

% make a plot to verify
figure(1), clf, hold on
plot(x,y, 'r') % (this also plots the interpolation in this case)

plot(x_peak,y_peak, 'k.') % the peak

plot(X{1},Y{1}, 'r.') % the 0%  intersects
plot(X{2},Y{2}, 'g.') % the 20% intersects
plot(X{3},Y{3}, 'b.') % the 50% intersects

% finish plot
xlabel('X'), ylabel('Y'), title('Linear interpolation')
legend(...
    'Real data / interpolation',...
    'peak',...
    '0% intersects',...
    '20% intersects',...
    '50% intersects',...
    'location', 'southeast')

%% Cubic splines
% ---------------------------

% Find cubic splines interpolation
pp = spline(x,y);

% Finding the peak requires finding the maxima of all cubics in all
% intervals. This means evaluating the value of the interpolation on 
% the bounds of each interval, finding the roots of the derivative and
% evaluating the interpolation on those roots: 

coefs = pp.coefs;
derivCoefs = bsxfun(@times, [3 2 1], coefs(:,1:3));
LB = pp.breaks(1:end-1).'; % lower bounds of all intervals
UB = pp.breaks(2:end).';   % upper bounds of all intervals

% rename for clarity
a = derivCoefs(:,1);
b = derivCoefs(:,2);  
c = derivCoefs(:,3); 

% collect and limits x-data
x_extrema = [...
    LB, UB,...     
    LB + (-b + sqrt(b.*b - 4.*a.*c))./2./a,... % NOTE: data is offset by LB
    LB + (-b - sqrt(b.*b - 4.*a.*c))./2./a,... % NOTE: data is offset by LB
    ];

x_extrema = x_extrema(imag(x_extrema) == 0);
x_extrema = x_extrema( x_extrema >= min(x(:)) & x_extrema <= max(x(:)) );

% NOW find the peak
[y_peak, ind] = max(ppval(pp, x_extrema(:)));
x_peak = x_extrema(ind);

% y == 0%, 20% and 50%
lims = [0 20 50];
X = cell(size(lims));
Y = cell(size(lims));    
for p = 1:numel(lims)

    % the current level line to solve for
    lim = y_peak * lims(p)/100;

    % find all 3 roots of all cubics
    R = NaN(size(coefs,1), 3); 
    for ii = 1:size(coefs,1) 

        % offset coefficients to find the right intersects
        C = coefs(ii,:);
        C(end) = C(end)-lim;

        % NOTE: data is offset by LB
        Rr = roots(C) + LB(ii); 

        % prune roots
        Rr( imag(Rr)~=0 ) = NaN;
        Rr( Rr <= LB(ii) | Rr >= UB(ii) ) = NaN;
        % insert results
        R(ii,:) = Rr;
    end

    % now evaluate and save all valid points    
    X{p} = R(~isnan(R));
    Y{p} = ppval(pp, X{p});

end

% as a sanity check, plot everything 
xx = linspace(min(x(:)), max(x(:)), 20*numel(x));
yy = ppval(pp, xx);

figure(2), clf, hold on

plot(x,y, 'r') % the actual data
plot(xx,yy) % the cubic-splines interpolation 

plot(x_peak,y_peak, 'k.') % the peak

plot(X{1},Y{1}, 'r.') % the 0%  intersects
plot(X{2},Y{2}, 'g.') % the 20% intersects
plot(X{3},Y{3}, 'b.') % the 50% intersects

% finish plot
xlabel('X'), ylabel('Y'), title('Cubic splines interpolation')
legend(...
    'Real data',...
    'interpolation',...
    'peak',...
    '0% intersects',...
    '20% intersects',...
    '50% intersects',...
    'location', 'southeast')

%% (N-1)th degree polynomial
% ---------------------------

% Find best interpolating polynomial
coefs = bsxfun(@power, x, n-1:-1:0) \ y;
% (alternatively, you can use polyfit() to do this, but this is faster)

% To find the peak, we'll have to find the roots of the derivative: 
derivCoefs = (n-1:-1:1).' .* coefs(1:end-1);
Rderiv = roots(derivCoefs);
Rderiv = Rderiv(imag(Rderiv) == 0);
Rderiv = Rderiv(Rderiv >= min(x(:)) &  Rderiv <= max(x(:)));

[y_peak, ind] = max(polyval(coefs, Rderiv));
x_peak = Rderiv(ind);

% y == 0%, 20%, 50%
lims = [0 20 50];
X = cell(size(lims));
Y = cell(size(lims));
for p = 1:numel(lims)

    % the current level line to solve for
    lim = y_peak * lims(p)/100;

    % offset coefficients as to find the right intersects
    C = coefs;
    C(end) = C(end)-lim;

    % find and prune roots
    R = roots(C);
    R = R(imag(R) == 0);
    R = R(R>min(x(:)) & R<max(x(:)));

    % evaluate polynomial at these roots to get actual data
    X{p} = R;
    Y{p} = polyval(coefs, R);

end

% as a sanity check, plot everything 
xx = linspace(min(x(:)), max(x(:)), 20*numel(x));
yy = polyval(coefs, xx);

figure(3), clf, hold on

plot(x,y, 'r') % the actual data
plot(xx,yy) % the cubic-splines interpolation 

plot(x_peak,y_peak, 'k.') % the peak

plot(X{1},Y{1}, 'r.') % the 0%  intersects
plot(X{2},Y{2}, 'g.') % the 20% intersects
plot(X{3},Y{3}, 'b.') % the 50% intersects

% finish plot
xlabel('X'), ylabel('Y'), title('(N-1)th degree polynomial')
legend(...
    'Real data',...
    'interpolation',...
    'peak',...
    '0% intersects',...
    '20% intersects',...
    '50% intersects',...
    'location', 'southeast') 
```

这导致这三个图：

![线性插值](https://i.stack.imgur.com/Ko4i2.jpg) ![多项式插值](https://i.stack.imgur.com/iAShz.jpg) ![三次样条插值](https://i.stack.imgur.com/NoMhZ.jpg)

（请注意，第 (N-1) 次多项式出现问题；20% 的交叉点在最后都是错误的。因此，在复制粘贴之前，请更彻底地检查所有内容：)

正如我之前所说，并且您可以清楚地看到，如果基础数据不适合它，使用单个多项式进行插值通常会引入很多问题。此外，正如您从这些图中可以清楚地看到的那样，插值方法非常强烈地影响交叉点的位置 - 至关重要的是，您至少对数据的基础模型*有所了解*。

对于一般情况，三次样条通常是最好的方法。但是，这是一种*通用*方法，会让您（以及您出版物的读者）对数据的准确性产生错误的认识。使用三次样条来初步了解相交是什么以及它们的行为方式，但一旦真实模型变得更加清晰，总是回来重新审视您的分析。当仅用于通过数据创建更平滑、更“视觉吸引力”的曲线时，当然不要使用三次样条发布 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:07:51.067

这不是一个完整的答案，但 Matlab 具有应该完成大部分您想做的事情的内置函数。

*   `max`可以帮你找到100%的线
*   `polyfit`将以最小二乘的方式为您提供一组点的多项式拟合。如果您希望它准确地通过 n 个点，我相信您至少需要使用 n-1 度。
*   `roots`会给你刚刚找到的多项式的零交叉点。您还可以使用它通过减去一个常数来找到 20% 和 50% 的交叉点。如果有多个交叉口，您将需要最接近最初找到的最大值的交叉口。（你确定过境点会一直存在吗？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:09:36.287

求全局最大值使用 MAX 函数：

```
[ymax, imax] = max(y);
xmax = x(imax);
line(xlim,[ymax ymax],'Color','r')
line(xmax,ymax,'Color','r','LineStyle','o') 
```

对于其余部分，您可以使用出色的 FileExchange 提交 - [“Fast and Robust Curve Intersections”](https://www.mathworks.com/matlabcentral/fileexchange/11837)。

y=0 处的线可以用`xlim`和定义`yline0 = [0 0];`。然后你可以做

```
[x0, y0] = intersections(x,y,xlim,yline0); % function from FileExchange
x0close(1) = xmax - min(xmax-x0(x0<xmax));
x0close(2) = xmax + min(x0(x0>xmax)-xmax);
y0close = y0(ismember(x0,x0close));
line(xlim,yline0,'Color','r')
line(x0close,y0close,'Color','r','LineStyle','o') 
```

20% 和 50% 也可以这样做，除了

```
yline20 = repmat((ymax - y0(1))*0.2,1,2); 
```

* * *

所有这一切都假设您希望在绘图上出现海峡线的交叉点，而不是用于插值。

# vb6 - 如何隐藏命令行参数

> ID：15876543
> 
> 赞同：3
> 
> 时间：2013-04-08T10:14:02.433
> 
> 标签：vb6, command-line-arguments

我们有一个调用辅助 exe 并传递命令行参数来控制它们执行的结构。由于可以看到命令行参数，因此可以由其他应用程序传递。我们希望我们的前任只能由我们调用。我们怎样才能以最小的改变来实现这一点，并保持当前传递命令行参数的结构完好无损？

**编辑 1**

可以识别来电者吗？例如，调用助手 exe 作为子级并识别父级

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:21:25.017

您可以在应用程序启动后使用 hack 清除内存中的命令行参数，方法是[写入从 返回的地址`GetCommandLineW()`](http://blogs.msdn.com/b/oldnewthing/archive/2009/11/25/9928372.aspx)，但这不会同时阻止任何读取它的内容，或者任何挂钩进程创建的内容。

您可以尝试创建共享内存并传递指针，但这只会掩盖数据。

一个简单的事实是，您无法隐藏以相同用户和执行级别运行的任何东西的数据。无论你付出什么努力来隐藏它，都可以用来解开它。即使是加密也意味着密钥和方法将在内存中并且可以读取。如果您想阻止随机用户尝试运行您的可执行文件，请不要将它们提供给随机用户:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:20:27.650

您根本无法隐藏命令行参数。您可能希望检查[如何清除进程命令行？](https://stackoverflow.com/questions/3992786/how-to-clear-a-process-command-line?rq=1)问题并在那里查看答案和评论。

如果你想坚持传递命令行参数，Raymond Chen 有一篇关于如何优雅地做到这一点的非常好的帖子：http: [//blogs.msdn.com/b/oldnewthing/archive/2003/12/11/56043.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2003/12/11/56043.aspx) . 基本思想是使用匿名共享内存块来存储要在进程之间传递的实际数据，并将句柄的数值传递给它。

一个重量级的替代方案可能是加密/解密通过命令行传递的数据。或者附加一些生成的“秘密词”，以便被调用者可以验证它是否被您的一个应用程序调用。

我建议选择一种方法（以及相关的成本/收益）取决于风险：谁/为什么/何时会操纵您的辅助应用程序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:55:41.440

您的应用程序可以使用 DDE 相互通信。有关详细信息，请参阅[使用 DDE 使两个 Visual Basic 程序交换数据](http://www.vb-helper.com/howto_dde.html)以及[如何在 Visual Basic 中使用 DDE 与其他 Windows 程序进行通信](http://support.microsoft.com/kb/189498)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:27:14.687

您可以将这些值设置为变量并在您的 .exe 中提取这些变量吗？

# sql-server - Linux 中的 MSSQL ODBC 连接

> ID：15876547
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:14:08.160
> 
> 标签：sql-server, linux, odbc

我在 linux wine 中安装了 vb 项目。我想创建到 mssql 数据库的 odbc 连接。如何连接到 MSSQl 服务器。任何人都可以帮助我..请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:16:56.157

Microsoft 有一个[ODBC Linux 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=28160)，可提供从 Linux 到 Microsoft SQL Server 的本机连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T04:43:34.190

我使用官方文档[为 SQL Server (Linux) 安装 Microsoft ODBC 驱动程序](https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver15)

例如，我在 Ununtu 上的一个 Python 项目（root 用户）：

```
curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add -
curl https://packages.microsoft.com/config/ubuntu/18.04/prod.list > /etc/apt/sources.list.d/mssql-release.list
apt-get update
apt-get install dialog apt-utils -y
ACCEPT_EULA=Y apt-get install -y mssql-tools msodbcsql17
echo 'export PATH="$PATH:/opt/mssql-tools/bin"' >> ~/.bash_profile
source ~/.bashrc && apt-get install unixodbc-dev 
```

# java - 使用 GSON 计算 JSON 响应中的 id

> ID：15876554
> 
> 赞同：0
> 
> 时间：2013-04-08T10:14:26.597
> 
> 标签：java, json, gson

我收到的服务`JSON`响应低于 -`REST`

```
[
   {
      "id":"cls102",
      "name":"Class X",
      "students":[
         {
            "total-students":38,
            "present-students":35
         }
      ]
   },
   {
      "id":"cls202",
      "name":"Class XI",
      "students":[
         {
            "total-students":42,
            "present-students":38
         }
      ]
   }
] 
```

我的目标是获得 element 的总数`id`。我创建了如下所示的模型类 -

```
public class ClassRoom {
    private String id;
    private String name;
    private Student[] students;
    // Getter and Setter are not put here
}

import com.google.gson.annotations.SerializedName;

public class Student {
    @SerializedName("total-students")
    private int totalStudents;
    @SerializedName("present-students")
    private int presentStudents;
    // Getter and Setter are not put here
} 
```

现在我的测试班正在`Gson`按照以下方式调用-

```
Gson gson = new GsonBuilder().create();
ClassRoom agents = gson.fromJson(jsonRepsone, ClassRoom.class); 
```

现在，如何进一步进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:22:27.150

你需要做这样的事情，因为你的 JSON 代表一个`ClassRoom`对象数组。

```
Gson gson = new GsonBuilder().create();
ClassRoom[] agents = gson.fromJson(jsonRepsone, ClassRoom[].class);

//Gives the no. of ClassRoom objects, which corresponds to the no.of `id`s
System.out.println(agents.length); 
```

# php - PHP 中是否有类似于整数的 substr() 函数？

> ID：15876558
> 
> 赞同：4
> 
> 时间：2013-04-08T10:14:52.973
> 
> 标签：php, int, substr

我有一个电话号码，它将在我的数据库中记录为整数（例如 1234512312345），但我想在网页上表示为 (12345) 123 - 12345。如果它是一个字符串，我会使用 substr，但将它转换为 strval 似乎不太优雅。

虽然我很欣赏整数和字符串在分类上是不同的，但有没有办法在不自己编写效率较低的函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T10:25:07.603

您可以使用[sscanf](http://www.php.net/manual/en/function.sscanf.php)尝试[vprintf](http://www.php.net/manual/en/function.vprintf.php) 或 [vsprintf](http://www.php.net/manual/en/function.vsprintf.php)

```
$data = 1234512312345;
vprintf("(%d)-%d-%d",sscanf($data, "%5d%3d%5d")); 
```

[输出](http://eval.in/15469)

```
(12345)-123-12345 
```

[多个 PHP 版本测试](http://3v4l.org/rMOOe)

***注意**

如果你想返回它有一个值，那么它应该是

```
$var = vsprintf("(%d)-%d-%d",sscanf($data, "%5d%3d%5d"));
        ^
        |---- Note the `s` 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T13:32:34.840

^(注意：因为标题而回答这个问题，**将电话号码视为整数不是一个好主意**)

您应该**利用 PHP 的类型杂耍功能**并在电话号码上使用字符串函数，但如果您想使用**C**风格并保持使用整数，您有：

*   **除法****`/`**运算符，有助于获取第一个数字（除法会给你第一个数字，但不是马上，因为，使用该函数会给你，但我们在这里可能会遇到问题，因为's 结果是类型而不是)**`123``100``123/100=1.23``floor()``floor(123/100)=1``floor()``float``integer`**
***   **modulo**的**`%`**运算符，有助于获取最后一位数字（模数会立即为您提供最后一位数字，并且是整数类型，例如。）**`123``10``123%10=3`****

 ****因此，您可以像这样（整数方式）从您的电话号码中提取所需的部分：

```
$last=$no%100000; // get last 5 digits (modulo by 1 followed by 5 zeroes)

$no=$no-$last; // subtract the last digits from original number

$no=$no/100000; // divide to shorten the number, end up with a natural number

$area=$no%1000; // get last 3 again

$prefix=($no-$area)/1000; //remainder is the first digits of the original number 
```

或（//`float`方式）-*更具可读性*：`double``real`

 *```
$last=$no%1e5; // scientific notation 1e5 = 10000 (1 followed by 5 zeroes)

$no=($no-$last)/1e5;

$area=$no%1e3;

$prefix=($no-$area)/1e3; 
```

实时代码：[http ://codepad.viper-7.com/tVRjXC](http://codepad.viper-7.com/tVRjXC)

*注：科学计数法`e`使用类型`float`*

您还应该记住 32 位平台上的最大整数是`2^31 = 2.147.483.648`

* * *

现在，将此代码与“电话号码”一起使用`0077705501234`会让您头疼！

所以它来自数据库，但是如果通过任何更改它作为一个真正的`int`PHP 出现，它将解释任何以**[八进制为基数](http://php.net/manual/en/language.types.integer.php)**`0`的前导数字并在内部将其转换为十进制，所以你最终会得到一个完全不同的“电话号码”，垃圾到准确地说。

如果 PHP 将它作为 a 接收，`string`并且您真的想使用整数，您可以使用[类型](http://www.php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)`(int) $no`转换或转换`$no+0`等。

无论如何，前导零对于整数无关紧要，但对于字符串则如此，因此您最终可能会得到 `77705501234`并且您可能想要进行长度检查（~~整数~~浮点方式）：

*我要使用浮点数，因为有很多零要依靠......*

我们知道该号码必须有`13`数字，以便我们可以检查`if ( $no > 1e12 )`，也可能`if ( $no < 1e14 )`用于验证目的。

如果您还想知道数字的“长度”（*为此**您需要知道[pow()](http://www.php.net/manual/en/function.pow.php)*）：

```
for ($i=1;$i<13;$i++) { //count from 1 to 12
    //stop when $no modulo 10^$i is the number
    if ( $no % pow(10,$i) == $no ) break; 
}
// number of digits of $no are stored in $i - equivalent to strlen() 
```

最后，即使缺少前导零整数，也要正确打印您的号码：

`printf('Your number: (%05u) %03u - %05u',$prefix,$area,$last);`

实时代码：[http ://codepad.viper-7.com/Xgr8RQ](http://codepad.viper-7.com/Xgr8RQ)

*旁注：对于大数字，您也有[BCMath](http://php.net/manual/en/book.bc.php)函数，但它们适用于字符串*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:17:13.953

最好不要将电话号码存储和处理为整数，而只是作为字符串。

因此，使用 将您的数字转换为字符串`strval()`，然后您可以使用`substr()`它上面的所有其他字符串函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:22:53.430

请尝试此代码。

```
<?php
   $data = 1234512312345;
   echo "(".substr($data, 0, 5).") ".substr($data, 5, 3)."-".substr($data,8);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T10:27:57.970

是否只显示在网页上？

如果是，您可以使用一个 jquery 插件来执行此操作。

对我来说最好的：

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

[http://igorescobar.github.io/jQuery-Mask-Plugin/](http://igorescobar.github.io/jQuery-Mask-Plugin/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T10:22:37.833

尝试这个，，，

```
<?php
$phone = "1234512312345";
//(12345) 123 - 12345

$array = str_split($phone,5);
$array1 = substr($phone,5, 3);
$array2 = substr($phone,8, 5);

echo "(".$array[0].") ".$array1."-".$array2;
?> 
```*****

# iphone - 在 mkmapview 中获取方向的问题

> ID：15876564
> 
> 赞同：1
> 
> 时间：2013-04-08T10:15:27.993
> 
> 标签：iphone, ios, objective-c, mkmapview, directions

我正在寻找方向`mkmapview`，我从这个[答案](https://stackoverflow.com/a/11924208/756941)中得到了代码。

在函数中

```
- (NSArray*)getRoutePointFrom:(Annotation *)origin to:(Annotation *)destination
{
NSString* saddr = [NSString stringWithFormat:@"%f,%f", origin.coordinate.latitude, origin.coordinate.longitude];
NSString* daddr = [NSString stringWithFormat:@"%f,%f", destination.coordinate.latitude, destination.coordinate.longitude];

NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

NSError *error;
NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];
NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];

return [self decodePolyLine:[encodedPoints mutableCopy]];
} 
```

我遇到了一些小问题，寻找解决方案，但我做不到。

问题是

**1.解析问题**

```
Expected a type 
```

在

```
- (NSArray*)getRoutePointFrom:(Annotation *)origin to:(Annotation *)destination 
```

**2.自动引用计数问题**

```
 'NSString' for instance message does not declare a method with selector 'stringByMatching:capture:' 
```

在

```
NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L]; 
```

如何解决这两个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-19T09:56:07.697

试试这个

1.  **删除文件 RegexKitLite.h 和 RegexKitLite.m**

    ```
    -(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t {
        NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
        NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

        NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
        NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];
        NSLog(@"api url: %@", apiUrl);
        NSError *error;
        NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"points:\\\"([^\\\"]*)\\\"" options:0 error:NULL];
        NSTextCheckingResult *match = [regex firstMatchInString:apiResponse options:0 range:NSMakeRange(0, [apiResponse length])];
        NSString *encodedPoints = [apiResponse substringWithRange:[match rangeAtIndex:1]];
        //NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];

        return [self decodePolyLine:[encodedPoints mutableCopy]];
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T10:35:14.817

1：听起来像一个进口问题。请在您的头文件和实现文件中向我们展示您的导入。

2：这不是 ARC 问题。您正在调用一个不存在的方法`NSString`。同样，我建议这是一个导入问题，您忘记导入将方法添加到`NSString`. 将其导入您的实现文件。如果您没有此类别代码，那么您需要在网络上的某个地方找到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T11:31:36.937

除了**Robotic Cat**的回答，请尝试执行以下操作：

1.  Goto：[这个 code.google 项目](http://code.google.com/p/ashiphone/downloads/detail?name=MapWithRoutes.zip&can=2&q=)（因为，我从那里得到了那个）
2.  打开封闭文件夹
3.  在里面找到`RegexKitLite`文件夹。
4.  将其添加到您的项目中（启用`copy file to destination group`AND 选项）`Add to target`
5.  添加`#import RegexKitLite.h`到您的`.m`文件中。

很可能问题会得到解决。

# php - 无法从数据库加载图像

> ID：15876566
> 
> 赞同：3
> 
> 时间：2013-04-08T10:15:34.933
> 
> 标签：php, jquery, mysql

我正在尝试加载存储在数据库中的图像，但无法正常工作。我只能看到链接，但看不到图像。我在存储图片的字段中使用 longblob。

JavaScript：

```
 <script>

    $(document).ready(function(){
         $.ajax({type: "POST",
                 url: "cargaImg.php",
                 success:function(data) {
                    $('#pinta').html(data);
                    }

         });  
    });
  </script> 
```

PHP

(images.php)

```
 <? require('conecta.php');
   $stmt=$oConni->prepare("SELECT PIC FROM FOTOS WHERE ID_PIC=?");
   $stmt->bind_param('i',$_GET['id']);
   $stmt->execute();
   $stmt->store_result();
   $stmt->bind_result($Foto);
   while ($stmt->fetch()) {
     header('Content-Type: image/jpeg');
     print $Foto;
   }
 ?> 
```

(cargaImg.php)

```
 <?php
        require('conecta.php');
        ini_set('display_errors',1); error_reporting(E_ALL);  

        $cSQL="SELECT ID_PIC, PIC, NOMBRE FROM FOTOS";

        $stmt=$oConni->prepare($cSQL) or die($oConni->error);
        //$stmt->bind_param('i',$_POST['local']);
        $stmt->execute();                               
        $stmt->bind_result($id, $pic, $nombre);
        //$i=0;
        echo '<table cellspacing="0">';
        while ($stmt->fetch()) {

            if (!empty($pic)){ ?>
            <tr><td><img class="sifoto" src="images.php?id=<?=$id?>" width="60" height="60"  /></td></tr>
            <?}
            echo'<tr><td value="'.$id.'"><a target="_blank" href="'.$nombre.'">Enlace</a></td></tr>'; 
            //$i++;
        }   
        $stmt->close();
        echo'</table>';

     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:57:23.027

已解决：我需要这个：$stmt->store_result();

```
 <?php
        require('conecta.php');
        ini_set('display_errors',1); error_reporting(E_ALL);  
        $cSQL="SELECT ID_PIC, PIC, NOMBRE FROM FOTOS";
        $stmt=$oConni->prepare($cSQL) or die($oConni->error);
        //$stmt->bind_param('i',$_POST['local']);
        $stmt->execute(); 
        $stmt->store_result();
        $stmt->bind_result($id, $pic, $nombre);
        //$i=0;
        echo '<table cellspacing="0">';
        while ($stmt->fetch()) {

            if (!empty($pic)){ 
            echo'<tr><td><img class="sifoto" src="images.php? id='.$id.'" width="100" height="100"  /></td></tr>';
            }
            echo'<tr><td value="'.$id.'"><a target="_blank" href="'.$nombre.'">Enlace</a></td></tr>'; 
            //$i++;
        }   
        $stmt->close();
        echo'</table>';

?> 
```

# asp.net-mvc - 在 HttpModule 中获取执行动作

> ID：15876572
> 
> 赞同：10
> 
> 时间：2013-04-08T10:15:54.737
> 
> 标签：asp.net-mvc

我有一个 HttpModule 并且需要知道正在执行哪个操作。而我需要从方法中获取MethodInfo，动作名还不够，我需要从类型中获取真正的方法。

我知道如何获取控制器和操作：

```
string controllerName = ...RouteData.Values["controller"].ToString();
string actionName = ...RouteData.Values["action"].ToString(); 
```

我想要做：
`controllerType.GetMethod(actionName)`

这当然会导致 AmbiguousMatchException ...

哪个签名正在执行？有可能知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:06:25.317

这应该有效。它循环遍历路由数据并获取所有不为人所知的路由数据，即控制器、动作和区域。这是假设您使用的是默认路由。路由的每个其他部分，无论是在 URL 中还是在查询字符串中，都将映射到方法参数。您可以获取这些路由值的类型并使用它们来获取指定的方法信息。

```
List<Type> methodParams = new List<Type>();
string action = HttpContext.Current.Request.RequestContext.RouteData["action"];
foreach (var data in HttpContext.Current.Request.RequestContext.RouteData.Values)
{
    if ((data.Key != "action") && (data.Key != "controller") && (data.Key != "area"))
        methodParams.Add(data.Value.GetType());                
}

Type t; //assume this is your type that implements the action method you're interested in.  
        //I'm assuming you know it somehow

MethodInfo info = t.GetMethod(action, methodParams.ToArray()); 
```

# iphone - 导航控制器内的 TableView：左侧和右侧的零边缘插入？

> ID：15876574
> 
> 赞同：2
> 
> 时间：2013-04-08T10:15:59.330
> 
> 标签：iphone, ios, uitableview, insets, uiedgeinsets

我在导航控制器中有一个 TableView。

默认情况下，TableView 在左侧和右侧设置了边缘插图。即 TableView 中内容的宽度小于 iPhone 的宽度。

我的设计师希望我的内容在 iPhone 上从左到右拉伸，没有任何插图。

所以，我尝试了以下代码：

```
UIEdgeInsets inset = UIEdgeInsetsMake(0, -10, 0, 10);
tableView.contentInset = inset; 
```

在左侧，内容现在真正位于 iPhone 左边缘。美好的。有效。

但是在右边，似乎没有设置将内容向右移动。

非常感谢您的帮助！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:32:24.853

清洁解决方案将是

继承 UITableViewCell 类，并重写 layoutSubViews 方法，如下所示。

并将 tableView contentInsets 设置为零。

```
mTableView.contentInset = UIEdgeInsetsZero;

-(void)layoutSubviews {
   [super layoutSubviews];
   self.textLabel.frame = self.contentView.bounds;
} 
```

# android - 关于 onLocationChange 的误解

> ID：15876575
> 
> 赞同：1
> 
> 时间：2013-04-08T10:16:02.597
> 
> 标签：android, locationlistener

让我给你一个简短的背景。

我需要*在一段时间或一段距离后*检查用户的位置。所以我使用 LocationListner 类来跟踪位置。为了在模拟器上测试它，我创建了 .gpx 文件来设置方向。我正在通过按钮单击获得模拟器上的位置。但是**我如何能够根据距离或时间获取更新的位置。** 如developer.adnroid所述

```
You can control the frequency at which your listener receives updates with the second 
and third parameter—the second is the minimum time interval between notifications and
the third is the minimum change in distance between notifications—setting both to
zero requests location notifications as frequently as possible. 
```

但我没有得到预期的结果。有人知道我在做什么错吗？？

**代码片段**

在按钮上单击这段代码执行

```
 LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            MyLocationListener locListener = new MyLocationListener(this, locManager);
            boolean isGPSEnabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
            if (isGPSEnabled) 
            {
                Toast.makeText(getApplicationContext(), "Called isGPSEnabled", Toast.LENGTH_SHORT).show();
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, locListener);
                } 
```

**仅供参考：如果被调用，则在里面吐司。**

这是我的 onLoactionChange。仅在其余方法为空时才添加此方法。

```
@Override
    public void onLocationChanged(Location location) 
    {
           if(location != null)
        {
            locManager.removeUpdates(this);

            Geocoder gcd = new Geocoder(context.getApplicationContext(), Locale.getDefault());       
            List<Address>  addresses; 
            try
            {  
                addresses = gcd.getFromLocation(location.getLatitude(), location.getLongitude(), 1);  
                if (addresses.size() > 0)
                {
                    String cityName = addresses.get(0).getAddressLine(0) + "\n";
                    cityName = cityName + addresses.get(0).getAddressLine(1);
                    TextView tvInfo = (TextView) ((Activity) context).findViewById(R.id.tv_info);
                    tvInfo.setVisibility(View.VISIBLE);
                    tvInfo.setText("Curent address is" + cityName + "Latitude :" + addresses.get(0).getLatitude() + "Longitude :" +addresses.get(0).getLongitude());
                }
            } catch (IOException e) 
            {           
                //Toast
                Toast.makeText(context.getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
                e.printStackTrace();  
            } 
        }
    } 
```

清单具有权限为

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
     <uses-permission android:name="android.permission.INTERNET" /> 
```

**结果：** 单击按钮后，它会给出当前位置。但始终如此。

**预期结果**：经过一段时间或移动一定距离后，当前位置应该更新。

任何预兆都可以帮助我实现这一目标。或指出我在哪里做错了。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:39:59.537

看来我需要删除`locManager.removeUpdates(this);`

删除此行使我的应用程序能够在模拟器上接收更新。

# java - 搜索代码无法搜索音视频文件

> ID：15876577
> 
> 赞同：1
> 
> 时间：2013-04-08T10:16:11.103
> 
> 标签：java

我在java中开发了一个基于桌面的搜索项目。我已经递归地调用了搜索函数来进行搜索操作。

我的项目运行良好，但无法搜索音频和视频文件的名称。

我正在输入我的搜索代码

```
 public void searchFiles(String mainPath, String searchText){
                            mainFile = new File(mainPath);
                            System.out.append(mainFile.getAbsolutePath());
                            File[] roots = mainFile.listFiles();
                            Arrays.sort(roots);
                            for (int i = 0; i < roots.length; i++) {
                                try {
                                    System.out.println(roots[i]);
                                    SearchProgram searchProgram = new SearchProgram(roots[i], searchText);
                                } catch (Exception exception) {
                                }
                            }
    }

-----------------------------------------------------------------------------------

    class SearchProgram extends Thread {

            File fileDir;
            String fileName;

            public SearchProgram(File d, String n) {
                fileDir = d;
                fileName = n;
                this.start();
            }
            // this is a recursive file search function

            @Override
            public void run() {
                if (check) {
                    try {
                        search(fileDir, fileName);
                    } catch (Exception exception) {
                    }
                }
            }

            private void search(File dir, String name) {
                if (check) {
                    String dirPath = dir.getAbsolutePath();
                    if (dirPath.length() > 60) {
                        lblCurrentLocation.setText("\\\\.............." + dirPath.substring(60, dirPath.length()));
                    } else {
                        lblCurrentLocation.setText(dirPath);
                    }
                    if (dir.getName().toLowerCase().endsWith(name.toLowerCase())) {
                        tableModel.addRow(new Object[]{dir.getAbsolutePath()});
                    } else if (dir.isDirectory()) {
                        String[] children = dir.list();
                        for (int i = 0; i < children.length; i++) {
                            search(new File(dir, children[i]), name);
                        }
                    }
                }
            }
        } 
```

请建议这段代码有什么问题

# hibernate - 保证 Hibernate JoinTable 中数据集的唯一性

> ID：15876582
> 
> 赞同：1
> 
> 时间：2013-04-08T10:16:18.043
> 
> 标签：hibernate, many-to-many, unique, jointable

因为我是 Hibernate 的新手，所以在提出这个问题之前，我已经阅读、搜索和尝试了很多。

事实上，我有一个简单的表（例如 Person），只有一个生成的 id 和一个唯一的名称作为第二列。第二个表（例如用户）也包含一个生成的 id 和一个来自表 1 的名称的 Set<Person>。

对于表 2 中的 Set<Person>，我创建了一个 @ManyToMany 关系，从而生成了一个 JoinTable。到目前为止一切顺利（按预期工作）。

我现在需要（并且无法实现）是一种我可以定义的方式，即每组人在连接表中只存在一次（所以我不想有相同的人组合表中有两次 A 和 B，但肯定是 A 人的附加条目或 A 和 C 的组合）。

您对我需要从这里往哪个方向发展有什么建议或提示吗？

# html - 移动 Safari 图片上传及其大小

> ID：15876584
> 
> 赞同：10
> 
> 时间：2013-04-08T10:16:20.603
> 
> 标签：html, ios, api, file-upload

好吧，众所周知，safari mobile 现在允许通过相机或图像库上传文件。

“问题”是，当从相机拍摄照片时，它是按原样发送的，这意味着它的内存非常重（我认为即使在 iphone 4 上也有 2 或 3 mb 左右）。

这使得上传速度非常慢并且还消耗带宽（对移动设备不利）。你知道`<file />`有没有办法通过 html 标签对 iOS 说：“嘿，你也可以压缩一下图片吗？” - 就像通过邮件应用程序发送所述图像时所做的那样。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T12:34:08.640

有一个库：[https ://github.com/gokercebeci/canvasResize](https://github.com/gokercebeci/canvasResize)

它的工作原理是将图像放入`<canvas />`（小于原始图像），然后获取图像数据，以便您可以将其发布到您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:08:06.620

我不认为你真的可以在那里做任何事情。不过，您可以做的是使用 FILE API 并将上传文件分成更小的块，从而减少内存过载。

这是一篇关于如何做到这一点的优秀帖子：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files)

# android - 从所有网络访问 Virtual Box

> ID：15876585
> 
> 赞同：0
> 
> 时间：2013-04-08T10:16:22.107
> 
> 标签：android, virtualbox

嗨，我已将我的 Android ( `iso image`) 加载到其中`virtual box`并尝试从所有网络访问它。我使它成为桥接网络，并且能够从所有具有系列的机器访问，`xx.xx.xx.y`但不能从`xx.xx.tt.s`

请建议我让我`virtual box`可以从任何地方访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:20:47.927

你能写下XX吗？这有点重要，因为它似乎是网络掩码的一些问题。

例如，如果第一个地址是`192.168.1.32`使用网络掩码`255.255.255.0 (24)`的，则`192.168.2.x`.

[http://en.wikipedia.org/wiki/Subnetwork](http://en.wikipedia.org/wiki/Subnetwork)

# opencv - 如果窗口关闭，如何不显示图像？

> ID：15876586
> 
> 赞同：1
> 
> 时间：2013-04-08T10:16:31.120
> 
> 标签：opencv

如果窗口不存在，我认为 imshow 不应该显示图像，但显然它是。我不明白这是否是我没有正确理解的错误。

如果用户关闭它，我会尝试不打开新窗口。我想我会在初始化时打开窗口，而在其他部分我只使用 imshow ，这样如果用户关闭窗口，它就不会再次出现。但是因为 imshow 显示图像这不起作用。我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:47:46.703

**调用时，`cv::imshow()`将在窗口上显示图像**。如果在调用时该窗口不存在，则会创建一个。

如果您不想显示窗口，请不要调用`cv::imshow()`.

# c# - 错误：对象引用未设置为对象的实例

> ID：15876589
> 
> 赞同：1
> 
> 时间：2013-04-08T10:16:37.807
> 
> 标签：c#, asp.net

我目前正在开发一个应用程序，该应用程序将使用户能够从我们在他的电子邮件地址中提供的链接下载演示软件。24 小时后，现在我已经通过他的电子邮件地址中显示的链接完成了，他可以下载但在禁用此链接的编码中.. 我收到错误我的代码是..

```
protected void btn_sub_Click(object sender, EventArgs e)
{        
    cn.Open();
    objInquiry.Name = txt_name.Text.ToString().Trim();
    objInquiry.MobileNo = txtMobileNo.Text.ToString().Trim();
    objInquiry.EmailId = txt_eid.Text.ToString().Trim();
    objInquiry.InquiryFor = "Agriculture Product Marketing comity System".ToString().Trim();
    objInquiry.Message = txt_msg.Text.ToString().Trim();

    using (DataSet ds = objInquiry.InsertInquiry())
    {
        Msg.Visible = true;
        Msg.Text = "Thank U For Inquiry We Will Send Demo Link To Your Email Please Check Your Email Regularly";
    }

    try
    {
        DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString());
        DateTime dt2 = DateTime.Now;
        TimeSpan ts = dt2 - dt1;

        if (ts.TotalMinutes > 5)
        {
            Response.Write("Download time is over");
        }
        else
        {
            MailMessage mail = new MailMessage();
            mail.From = new MailAddress("abc@gmail.com");
            mail.To.Add(txt_eid.Text);
            mail.Subject = txtInquiryFor.Text;
            mail.IsBodyHtml = true;
            mail.Body = "Welcome Mr." + txt_name.Text + "<br><br>";
            mail.Body += "To ShreeHans Webnology" + "<br><br>";
            mail.Body += "Thank u for putting inquiry for" + txtInquiryFor.Text + "<br><br>";
            mail.Body += "Please Click on Following Link To Download Your Demo" + "<br><br>";
            mail.Body += "<a href=\"http://www.test.co.in/ConatctUs.aspx?period=" + DateTime.Now + "'\">Download Demo Software</a>";

            SmtpClient smtp = new SmtpClient();
            smtp.Host = "smtp.gmail.com";
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.Credentials = new System.Net.NetworkCredential("abc@gmail.com", "*****");
            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
            smtp.Send(mail);
        }
    }
    catch (Exception ex)
    {
        ex.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:22:28.720

正如您所提到的，错误就在这条线上

```
DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString()); 
```

所以它建议你有空值

```
Request.QueryString["period"].ToString() 
```

首先检查空值，然后将其转换为日期时间

```
if(Request.QueryString["period"]!=null)
{
    DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:20:05.827

可能`Request.QueryString["period"]`是 null 所以在调用`ToString()`它时，您会得到未将对象引用设置为对象异常的实例。

在调用之前检查空引用`ToString`：

```
var period = Request.QueryString["period"];
if (period != null) {
    DateTime dt1 = Convert.ToDateTime(period.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:21:25.050

检查该参数是否存在于您的 QueryString 中。

```
TimeSpan ts;
if(null != Request.QueryString["period"])
{
  DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString());
  DateTime dt2 = DateTime.Now;
  TimeSpan ts = dt2 - dt1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:22:02.013

如果`DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString())`抛出错误，则意味着您`period`的查询字符串中没有。最好检查一下

```
if(Request.QueryString["period"]!=null)
{
  DateTime dt1 = Convert.ToDateTime(Request.QueryString["period"].ToString());
 . .
 . .
} 
```

# c++ - 重载方法还是使用默认值？C++

> ID：15876590
> 
> 赞同：21
> 
> 时间：2013-04-08T10:16:46.983
> 
> 标签：c++, overloading, default

我对 C++ 还比较陌生，我似乎无法弄清楚以下两种编码可能采用一个参数或两个或三个或更多参数的函数的方式的区别。无论如何，这是我的观点

函数重载：

```
int aClass::doSomething(int required)
{
    //DO SOMETHING
}

int aClass::doSomething(int required, int optional)
{
    //DO SOMETHING
} 
```

这与默认值有何不同：

```
int aClass::doSomething(int required, int optional = 0)
{
    //DO SOMETHING
} 
```

我知道在不同的情况下，一个可能比另一个更合适，但是在这些选项之间进行选择时我应该注意哪些事项？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-06-11T19:42:08.950

[有几个技术原因更喜欢重载而不是默认参数，它们在 Google 的C++ 样式指南](https://google.github.io/styleguide/cppguide.html)的[默认参数部分](https://google.github.io/styleguide/cppguide.html#Default_Arguments)中有很好的阐述：

> 在存在默认参数的情况下，函数指针会令人困惑，因为函数签名通常与调用签名不匹配。向现有函数添加默认参数会更改其类型，这可能会导致代码获取其地址时出现问题。添加函数重载可以避免这些问题。

和：

> 默认参数可能会导致代码变得更庞大，因为它们在每个调用点都被复制 - 与重载函数相反，其中“默认”仅出现在函数定义中。

从积极的方面来说，它说：

> 通常你有一个使用默认值的函数，但有时你想覆盖默认值。默认参数允许一种简单的方法来执行此操作，而无需为罕见的异常定义许多函数。

因此，您的选择将取决于负面问题与您的应用程序的相关程度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T10:19:25.070

首先，您说的是*重载*，而不是覆盖。`virtual`对派生类中的函数进行覆盖。重载是指相同的函数名称具有不同的签名。

区别是合乎逻辑的 - 在第一种情况（2 个版本）中，两个函数的行为可能完全不同，而第二种情况将具有或多或少相同的逻辑。这真的取决于你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T10:29:02.353

编译器并不关心您使用其中的哪一个。想象一下，你把它写成两个构造函数，它们最终有大约 20 行长。进一步想象有 19 行是相同的，不同的行读取

```
foo = 0; 
```

在一个版本中和

```
foo = optional; 
```

在另一个。在这种情况下，使用可选参数会使您的代码更具可读性和可理解性。在另一种没有可选参数的语言中，您可以通过让单参数版本调用双参数版本并将零作为第二个参数传递给它来实现这一点。

现在想象一对不同的构造函数或函数，它们也有大约 20 行长但完全不同。例如，第二个参数是一个 ID，如果提供，则在数据库中查找内容，如果不是，则将值设置为`nullptr`0 等。你可以有一个默认值（-1 很受欢迎）但是函数的主体将充满

```
if (ID == -1)
{
    foo = 0;
}
else 
{
    foo = DbLookup(ID);
} 
```

这可能很难阅读，并且会使单个函数比两个单独的函数长得多。我见过一个巨人`if`的函数，它本质上将整个事情分成两个单独的块，没有共同的代码，我已经看到随着计算的进行，相同的条件测试了 4 或 5 次。两者都很难阅读。

这就是关于 C++ 的事情。有很多方法可以完成大多数事情。但是这些不同的方式服务于不同的目的，一旦你“得到”了细微的差异，你就会写出更好的代码。在这种情况下，“更好”意味着更短、更快（所有这些`if`成本执行时间）和更具表现力 - 阅读它的人可以快速理解您的意图。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T10:19:18.317

`constructor`如果您提供了几个s ，则您正在使用重载功能。这种情况下的优点是，您可以对每个`constructor`传递的参数做出不同的反应。如果这很重要，请使用重载。
如果您可以为`default`参数提供合适的值并且这些值不会影响代码的正常运行，请使用默认参数。

有关 SO 的线程，请参见[此处](https://stackoverflow.com/questions/187640/default-parameters-with-c-constructors)。

# r - 在R中合并多个栅格

> ID：15876591
> 
> 赞同：28
> 
> 时间：2013-04-08T10:16:48.060
> 
> 标签：r, merge, geospatial, raster, satellite-image

我一直在尝试找到一种节省时间的方法来合并 R 中的多个光栅图像。这些是来自乞力马扎罗山南部地区的相邻 ASTER 场景，我的目标是将它们放在一起以获得一张大图像。

这是我到目前为止得到的（对象“ast14dmo”代表 RasterLayer 对象列表）：

```
# Loop through single ASTER scenes
for (i in seq(ast14dmo.sd)) {
  if (i == 1) {
    # Merge current with subsequent scene
    ast14dmo.sd.mrg <- merge(ast14dmo.sd[[i]], ast14dmo.sd[[i+1]], tolerance = 1)
  } else if (i > 1 && i < length(ast14dmo.sd)) {
    tmp.mrg <- merge(ast14dmo.sd[[i]], ast14dmo.sd[[i+1]], tolerance = 1)
    ast14dmo.sd.mrg <- merge(ast14dmo.sd.mrg, tmp.mrg, tolerance = 1)
  } else {
    # Save merged image
    writeRaster(ast14dmo.sd.mrg, paste(path.mrg, "/AST14DMO_sd_", z, "m_mrg", sep = ""), format = "GTiff", overwrite = TRUE)
  }
} 
```

正如您肯定猜到的那样，代码有效。但是，考虑到每个单个栅格对象大约 70 mb 大，合并需要很长时间。我也尝试过 Reduce 和 do.call，但失败了，因为我无法传递绕过光栅文件不同来源的参数“容差”。

有人知道如何加快速度吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-15T04:08:53.933

您可以使用`do.call`

```
ast14dmo.sd$tolerance <- 1
ast14dmo.sd$filename <- paste(path.mrg, "/AST14DMO_sd_", z, "m_mrg.tif", sep = "")
ast14dmo.sd$overwrite <- TRUE
mm <- do.call(merge, ast14dmo.sd) 
```

这里有一些数据，来自示例`raster::merge`

```
r1 <- raster(xmx=-150, ymn=60, ncols=30, nrows=30)
r1[] <- 1:ncell(r1)
r2 <- raster(xmn=-100, xmx=-50, ymx=50, ymn=30)
res(r2) <- c(xres(r1), yres(r1))
r2[] <- 1:ncell(r2)

x <- list(r1, r2)
names(x) <- c("x", "y")
x$filename <- 'test.tif'
x$overwrite <- TRUE
m <- do.call(merge, x) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-18T04:10:21.123

Raster 包中的“合并”功能有点慢。对于大型项目，更快的选择是在 R 中使用 gdal 命令。

```
library(gdalUtils)
library(rgdal) 
```

您要加入的所有光栅文件的构建列表（在您当前的工作目录中）。

```
all_my_rasts <- c('r1.tif', 'r2.tif', 'r3.tif') 
```

制作一个模板光栅文件来构建。想想这是一个可以添加瓷砖的大空白画布。

```
e <- extent(-131, -124, 49, 53)
template <- raster(e)
projection(template) <- '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
writeRaster(template, file="MyBigNastyRasty.tif", format="GTiff") 
```

将所有栅格图块合并为一个大栅格。

```
mosaic_rasters(gdalfile=all_my_rasts,dst_dataset="MyBigNastyRasty.tif",of="GTiff")
gdalinfo("MyBigNastyRasty.tif") 
```

这应该可以很好地提高速度（比在 raster 包中合并更快），但是如果您有数千个图块，您甚至可能想先考虑构建一个 vrt。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T12:27:25.537

例如，您可以`Reduce`像这样使用：

```
Reduce(function(...)merge(...,tolerance=1),ast14dmo.sd) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-05T04:52:53.533

SAGA GIS 镶嵌工具 ( [http://www.saga-gis.org/saga_tool_doc/7.3.0/grid_tools_3.html](http://www.saga-gis.org/saga_tool_doc/7.3.0/grid_tools_3.html) ) 为您提供了合并数字图层的最大灵活性，并且默认情况下并行运行！您只需首先将所有栅格/图像转换为 SAGA .sgrd 格式，然后运行命令行 saga_cmd。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-02T09:40:34.893

我已经按照*Matthew Bayly*`gdalUtils`的建议测试了该解决方案。它工作得很好而且很快（我有大约 1000 张图像要合并）。但是，在检查了[此处](https://www.rdocumentation.org/packages/gdalUtils/versions/2.0.3.2/topics/mosaic_rasters)的功能文档后，我发现它在拼接图像之前无需制作模板光栅即可工作。我粘贴了以下文档中的示例代码：*`mosaic_raster`*

 *```
outdir <- tempdir()
gdal_setInstallation()
valid_install <- !is.null(getOption("gdalUtils_gdalPath"))
if(require(raster) && require(rgdal) && valid_install)
{
layer1 <- system.file("external/tahoe_lidar_bareearth.tif", package="gdalUtils")
layer2 <- system.file("external/tahoe_lidar_highesthit.tif", package="gdalUtils")
mosaic_rasters(gdalfile=c(layer1,layer2),dst_dataset=file.path(outdir,"test_mosaic.envi"),
    separate=TRUE,of="ENVI",verbose=TRUE)
gdalinfo("test_mosaic.envi") 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-11T14:21:03.043

我遇到了同样的问题，我使用了

```
#Read desired files into R
data_name1<-'file_name1.tif' 

r1=raster(data_name1)

data_name2<-'file_name2.tif'

r2=raster(data_name2)

#Merge files
new_data <- raster::merge(r1, r2) 
```

尽管它没有生成新的合并栅格文件，但它存储在数据环境中并在绘制时生成了合并地图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-26T17:31:41.587

尝试将多个栅格相互拼接时遇到以下问题

```
In vv[is.na(vv)] <- getValues(x[[i]])[is.na(vv)] :
  number of items to replace is not a multiple of replacement length 
```

正如@Robert Hijmans 指出的那样，这可能是因为栅格未对齐。为了解决这个问题，我必须先重新采样栅格

```
library(raster)

x  <- raster("Base_raster.tif")
r1 <- raster("Top1_raster.tif")
r2 <- raster("Top2_raster.tif")

# Resample
x1 <- resample(r1, crop(x, r1))
x2 <- resample(r2, crop(x, r2))

# Merge rasters. Make sure to use the right order
m <- merge(merge(x1, x2), x)

# Write output
writeRaster(m,
            filename = file.path("Mosaic_raster.tif"),
            format = "GTiff",
            overwrite = TRUE) 
```*

# css - 禁用 IE7 和 IE8 的 CSS 样式

> ID：15876597
> 
> 赞同：1
> 
> 时间：2013-04-08T10:17:04.903
> 
> 标签：css

我有样式表文件，想为 IE7 和 IE8 浏览器禁用其中的一些 css 标签，该怎么做？我不想将这些选项卡放在单独的 css 文件中，然后将其保留在一个文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:34:12.343

我推荐 HTML5 样板所采用的方法，[由 Paul Irish 在这里概述](http://misteroneill.com/journal/improved-internet-explorer-targeting-through-body-classes/)。基本上，像这样设置您的文档：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

您现在有适当的类来准确地仅针对某些版本的 IE。您的 CSS 将如下所示：

```
.element { margin-bottom: 20px; }
.lt-ie8 .element { margin-bottom: 10px; } 
```

然后，您可以避免 CSS hack，并且可以将所有内容保存在一个样式表中。

正如@Daniel 所说，这不是禁用样式，而是覆盖它们。如果出于某种原因您只想将样式发送到*现代*浏览器和较新的 IE，您可以在上面的 final`html`标记中添加另一个类，然后使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:22:06.943

如果您尝试仅针对 IE 使用特定的样式表，则如下所示：

```
<!--[if IE 8]><link rel="stylesheet" href="css/ie8.css" type="text/css" media="screen"><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="css/ie7.css" type="text/css" media="screen"><![endif]-->
<!--[if IE]><link rel="stylesheet" href="css/ie.css" type="text/css" media="screen"><![endif]--> 
```

更多关于这里的信息：[***如何创建一个仅限 IE 的样式表***](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:20:34.860

```
.element {  
    margin-bottom: 20px;  
    margin-bottom: 10px\9;  
} 
```

来自这里的信息：[http ://www.impressivewebs.com/ie7-ie8-css-hacks/](http://www.impressivewebs.com/ie7-ie8-css-hacks/)

您不能禁用它们，但可以覆盖它们

# java - Java - 为什么 HttpClient 不发送我的 cookie？

> ID：15876598
> 
> 赞同：4
> 
> 时间：2013-04-08T10:17:08.047
> 
> 标签：java, cookies, httpclient

我尝试使用 Apache HttpClient 发送带有表单帖子的 cookie，并且由于某种原因，服务器收到了请求，但没有收到 cookie。这是我的代码：

```
 DefaultHttpClient client = new DefaultHttpClient();

            // Set the cookies...
            {
                String Domain = MyGetParameter("Domain");
                BasicCookieStore cookieStore = new BasicCookieStore(); 
                String[] strs = GetParameterSplitted("PostCookies");
                int size = strs.length;
                for (int i=0; i<size-1; i+=2)
                {
                    //JOptionPane.showMessageDialog(null, strs[i]+" = "+FromBase64(strs[i+1], "UTF-8"));
                    BasicClientCookie cookie = new BasicClientCookie(strs[i], FromBase64(strs[i+1], "UTF-8"));
                    cookie.setDomain(Domain);
                    cookie.setPath("/");
                    //cookie.setSecure(true);
                    cookieStore.addCookie(cookie);
                }
                client.setCookieStore(cookieStore);
            }

            HttpPost post = new HttpPost(url.toURI());
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(10);
            // Set the form POST parameters...
            {
                String[] strs = GetParameterSplitted("PostParams");
                int size = strs.length;
                for(int i=0; i<size-1; i+=2)
                {
                    String name = strs[i].trim();
                    String value = FromBase64(strs[i+1].trim(), "UTF-8");//, "UTF-8"

                    nameValuePairs.add(new BasicNameValuePair(name, value));
                }
            }
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            post.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
            post.getParams().setParameter(ClientPNames.COOKIE_POLICY, org.apache.http.client.params.CookiePolicy.BROWSER_COMPATIBILITY);

            HttpResponse response = client.execute(post);
            int StatusCode = response.getStatusLine().getStatusCode(); 
```

该站点使用 HTTP（不是 HTTPS），我确保将域名正确设置为 cookie ( `http://mysite`)，并且在执行上述代码时，cookie 似乎设置正确。

有谁知道为什么它无法将它们传递给服务器？我在这个网站上看到了其他类似的问题，但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T10:54:56.250

你仔细看，如果你的 cookie 过期的日期 httptClient 没有发送这个 cookie，那么你应该把 cookie 的日期放在这个上面。

并且在域名中不会有“http://”，只有简单的域名。

例如：( [http://www.gmail.com](http://www.gmail.com) => 像这样写**setDomain(** "www.gmail.com" **)** )

这个例子我将 100 天添加到当天并设置 cookie。示例通过带有 cookie 的 HttpClient 发送帖子数据：

```
Calendar calendar = Calendar.getInstance();
calendar.add(Calendar.DAY_OF_YEAR, 100);
Date date = calendar.getTime();

DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY,CookiePolicy.BROWSER_COMPATIBILITY);
httpClient.setCookieStore(new BasicCookieStore());
BasicClientCookie cookie = new BasicClientCookie(YourCookieName, YourCookieValue);
cookie.setDomain(YourDomain);
cookie.setExpiryDate(date);
cookie.setPath("/");
httpClient.getCookieStore().addCookie(cookie);

....

httpClient.execute(yourHttpUriRequest); 
```

# c++ - 为什么 std::bitset<8> 变量无法处理 11111111？

> ID：15876605
> 
> 赞同：14
> 
> 时间：2013-04-08T10:17:15.690
> 
> 标签：c++, binary, bitset

为什么这个程序显示以下输出？

```
#include <bitset>
...

{
    std::bitset<8> b1(01100100); std::cout<<b1<<std::endl;
    std::bitset<8> b2(11111111); std::cout<<b2<<std::endl; //see, this variable
                                                           //has been assigned
                                                           //the value 11111111
                                                           //whereas, during
                                                           //execution, it takes
                                                           //the value 11000111
    std::cout << "b1 & b2: " << (b1 & b2) << '\n';
    std::cout << "b1 | b2: " << (b1 | b2) << '\n';
    std::cout << "b1 ^ b2: " << (b1 ^ b2) << '\n';
} 
```

这是输出：

```
01000000
11000111
b1 & b2: 01000000
b1 | b2: 11000111
b1 ^ b2: 10000111 
```

首先，我认为头文件有问题（我使用的是 MinGW），所以我使用 MSVCC 进行了检查。但它也表明了同样的事情。请帮忙。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-08T10:20:17.280

尽管有外观，但`11111111`它是十进制的。`11111111`[10]的二进制表示是`101010011000101011000111`[2]。在构造时，`std::bitset<8>`取其中的八个最低有效位：`11000111`[2]。

第一种情况类似，除了`01100100`是八进制（由于前导零）。以二进制表示的相同数字是`1001000000001000000`[2]。

表示值为`11111111`[2]的位集的一种方法是`std::bitset<8> b1(0xff)`.

或者，您可以从二进制字符串构造位集：

```
std::bitset<8> b1(std::string("01100100"));
std::bitset<8> b2(std::string("11111111")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T10:26:11.993

根据 NPE 的回答，您正在使用 构建`bitset`，`unsigned long`而不是像您期望的那样使用位。构造它的另一种方法，使您能够指定位，是使用`string`构造函数，如下所示：

```
#include <bitset>
#include <cstdio>
#include <iostream>

int main()
{
    std::bitset<8> b1(std::string("01100100")); std::cout<<b1<<std::endl;
    std::bitset<8> b2(std::string("11111111")); std::cout<<b2<<std::endl;
    std::cout << "b1 & b2: " << (b1 & b2) << '\n';
    std::cout << "b1 | b2: " << (b1 | b2) << '\n';
    std::cout << "b1 ^ b2: " << (b1 ^ b2) << '\n';
getchar();
return 0;
} 
```

[单击此处](http://ideone.com/2b7KXJ)查看输出。

# wso2 - Wso2 BPS：请求可能被卡住

> ID：15876608
> 
> 赞同：0
> 
> 时间：2013-04-08T10:17:22.467
> 
> 标签：wso2, bpel

我有进程等待选择并监听 ReportProcessStageStateService 服务。由于此处描述的某种原因[https://stackoverflow.com/questions/15679408/wso2-bps-mex-error-with-pick](https://stackoverflow.com/questions/15679408/wso2-bps-mex-error-with-pick) bps 无法接收发送到此服务的肥皂。每分钟调用一次 ReportProcessStageStateService，其中一些调用会导致 bps 失败。但更有趣的是我在“几次”失败后得到的按摩：

总共有 500 个线程被此 Valve 监控并且可能被卡住

此消息是什么意思以及如何避免？

我正在使用 bps 2.1.2

```
[2013-04-06 06:15:04,523]  WARN - StuckThreadDetectionValve - Thread ""http-nio-8763"-exec-25" has been active for 601,590 milliseconds (since 4/6/13 6:05 AM) to serve the same request for http://10.10.19.231:8763/services/ReportProcessStageStateService and may be stuck (configured threshold for this StuckThreadDetectionValve is 600 seconds). There is/are 500 thread(s) in total that are monitored by this Valve and may be stuck., tenantDomain=null
java.lang.Throwable
    at java.lang.Object.wait(Native Method)
    at org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseCallback.waitResponse(MyRoleMessageExchangeImpl.java:301)
    at org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture.get(MyRoleMessageExchangeImpl.java:247)
    at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.waitForTheResponse(BPELProcessProxy.java:353)
    at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onAxisServiceInvoke(BPELProcessProxy.java:172)
    at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.handleInOutOperation(BPELMessageReceiver.java:100)
    at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.invokeBusinessLogic(BPELMessageReceiver.java:73)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
[2013-04-06 06:15:04,523] ERROR - BPELProcessProxy - Timeout or execution error when waiting for response to MEX {MyRoleMex#hqejbhcnphr867xnjguf6v [Client hqejbhcnphr867xnjguf6u] calling {http://test.pl/WebService/Report/Process/Stage/State/Service}ReportProcessStageStateService.reportProcessStageState(...)} java.util.concurrent.TimeoutException: Message exchange org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture@20f8b012 timed out(610000 ms) when waiting for a response!
java.util.concurrent.TimeoutException: Message exchange org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture@20f8b012 timed out(610000 ms) when waiting for a response!
    at org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture.get(MyRoleMessageExchangeImpl.java:250)
    at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.waitForTheResponse(BPELProcessProxy.java:353)
    at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onAxisServiceInvoke(BPELProcessProxy.java:172)
    at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.handleInOutOperation(BPELMessageReceiver.java:100)
    at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.invokeBusinessLogic(BPELMessageReceiver.java:73)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
[2013-04-06 06:15:04,570] ERROR - AxisServlet - 
java.lang.ThreadDeath
    at java.lang.Thread.stop(Thread.java:758)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.handleStuckThread(CarbonStuckThreadDetectionValve.java:119)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.backgroundProcess(CarbonStuckThreadDetectionValve.java:173)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1227)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1391)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1401)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1380)
    at java.lang.Thread.run(Thread.java:662)
[2013-04-06 06:15:04,585] ERROR - CommonsHTTPTransportSender - 
org.apache.axis2.AxisFault
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:78)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
    at org.apache.axis2.engine.AxisEngine.sendFault(AxisEngine.java:526)
    at org.apache.axis2.transport.http.AxisServlet.handleFault(AxisServlet.java:433)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:216)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxIOException: null
    at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1692)
    at com.ctc.wstx.sw.BaseStreamWriter.close(BaseStreamWriter.java:288)
    at org.apache.axiom.util.stax.wrapper.XMLStreamWriterWrapper.close(XMLStreamWriterWrapper.java:46)
    at org.apache.axiom.om.impl.MTOMXMLStreamWriter.close(MTOMXMLStreamWriter.java:188)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:197)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    ... 32 more
Caused by: ClientAbortException:  java.nio.channels.ClosedByInterruptException
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:329)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:298)
    at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:103)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:99)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
    at com.ctc.wstx.sw.BufferingXmlWriter.close(BufferingXmlWriter.java:194)
    at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1690)
    ... 37 more
Caused by: java.nio.channels.ClosedByInterruptException
    at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:184)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:343)
    at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:116)
    at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:94)
    at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:155)
    at org.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:186)
    at org.apache.coyote.http11.InternalNioOutputBuffer.flushBuffer(InternalNioOutputBuffer.java:261)
    at org.apache.coyote.http11.InternalNioOutputBuffer.flush(InternalNioOutputBuffer.java:116)
    at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:763)
    at org.apache.coyote.Response.action(Response.java:170)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:324)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:298)
    at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:103)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:99)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:311)
    at org.apache.axiom.util.stax.wrapper.XMLStreamWriterWrapper.flush(XMLStreamWriterWrapper.java:50)
    at org.apache.axiom.om.impl.MTOMXMLStreamWriter.flush(MTOMXMLStreamWriter.java:198)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:195)
    ... 33 more
[2013-04-06 06:15:04,663]  INFO - AxisServlet - org.apache.axis2.AxisFault
[2013-04-06 06:15:04,663] ERROR - [bridgeservlet] - Servlet.service() for servlet [bridgeservlet] in context with path [/] threw exception [org.apache.axis2.AxisFault] with root cause
java.nio.channels.ClosedByInterruptException
    at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:184)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:343)
    at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:116)
    at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:94)
    at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:155)
    at org.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:186)
    at org.apache.coyote.http11.InternalNioOutputBuffer.flushBuffer(InternalNioOutputBuffer.java:261)
    at org.apache.coyote.http11.InternalNioOutputBuffer.flush(InternalNioOutputBuffer.java:116)
    at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:763)
    at org.apache.coyote.Response.action(Response.java:170)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:324)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:298)
    at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:103)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:99)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:311)
    at org.apache.axiom.util.stax.wrapper.XMLStreamWriterWrapper.flush(XMLStreamWriterWrapper.java:50)
    at org.apache.axiom.om.impl.MTOMXMLStreamWriter.flush(MTOMXMLStreamWriter.java:198)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:195)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
    at org.apache.axis2.engine.AxisEngine.sendFault(AxisEngine.java:526)
    at org.apache.axis2.transport.http.AxisServlet.handleFault(AxisServlet.java:433)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:216)
    at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

问候

托梅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T06:38:17.840

BPS 2.1.2 缺少一些重要的配置操作，例如配置胎面池大小的能力。你能用 BPS 3.2.0 版本试试这个吗？另外，您是否在其他产品（例如 wso2 ESB）之上安装了 bps？

问候南迪卡

# ruby-on-rails - 如何将未确认用户的电子邮件传递给会话（设计）？

> ID：15876609
> 
> 赞同：1
> 
> 时间：2013-04-08T10:17:24.087
> 
> 标签：ruby-on-rails, email, session, devise, devise-confirmable

我有一个注册表单，注册后我希望浏览器记住用户（仍未确认）的电子邮件。我怎么能那样做？`build_resource`我想我可以用of以某种方式做到这一点`RegistrationsController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:31:33.267

假设您想记住最后注册/未确认的用户，您可以这样做：

在 app/controllers 下创建名为**my_devise的新文件夹**

在**app/controllser/my_devise**中创建一个名为**registrations_controller.rb**的文件：

 **```
class MyDevise::RegistrationsController < Devise::RegistrationsController

  # POST /resource
  def create
    build_resource

    if resource.save
      # here we save the registering user in a session variable
      session[:registered_as] = resource 
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end

end 
```

更新**config/routes.rb**文件以告诉 Devise 使用我们的新控制器：

```
devise_for :users, 
    :controllers  => {
      :registrations => 'my_devise/registrations'
    } 
```

注册后，会话变量**:registered_as**现在将保存最后注册的用户，并且可以在任何控制器或视图中引用：

some_view.html.rb：

```
<p>Registered as: 

<%= session[:registered_as].inspect %>

</p> 
```

另请参阅：[覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)**

# sas - PROC OLAP - 省略 nway 但包括其他聚合

> ID：15876611
> 
> 赞同：0
> 
> 时间：2013-04-08T10:17:27.860
> 
> 标签：sas, olap, cube

我正在尝试优化大型多维数据集的构建时间。我正在使用 SAS OCS。我查看了 ARM 日志，似乎从未使用过 NWAY 聚合（或者过去 2 个月没有使用过）。因此，我有信心可以省略默认的 nway 聚合。然而，我想留下一些其他的聚合。

我已直接从代码中删除了 nway 创建，并将“no_nway”作为 proc olap 语句中的一个选项包含在内，同时保留了其他聚合。但是，我收到以下错误消息：

```
ERROR: A failure occurred as a result of a problem in creating cube aggregations.

ERROR: A problem was encountered during the aggregation phase of cube building. 
```

如果我要创建其他聚合，是否需要保留 nway 聚合？

# python - python的测试工具

> ID：15876612
> 
> 赞同：0
> 
> 时间：2013-04-08T10:17:30.297
> 
> 标签：python, linux, bash, shell, python-2.7

我在需要运行服务器的python中编码。为此，我打开每个终端并启动每个服务器。最后，我有一个客户端可以联系服务器以获取信息。

现在我需要对此进行测试并开发一个测试工具。那么如何打开一个终端（从那里连接到集群）然后运行代码。

帮助我使用任何 python 代码来运行我的代码。

前任：

```
$ssh 10.0.0.1:2000
[10.0.0.1.2000~]$python server.py 10.0.0.1:3000
..
..
..
.. 
```

现在 server.py 代码应该运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:35:15.460

为什么不使用简单的 shell 脚本呢？

```
#!/bin/bash
ssh 10.0.0.1:2000 python server.py 10.0.0.1:3000 
```

# sql-server - SQL Server：导出多个数据库架构

> ID：15876615
> 
> 赞同：0
> 
> 时间：2013-04-08T10:17:43.940
> 
> 标签：sql-server, export, database-schema

我发现关于如何将数据库模式导出到脚本的问题已经在这里被询问和回答，但是我有一个包含近 200 个数据库的数据库服务器场景，所以右键单击每个数据库以生成脚本每一个都不实用。

我想知道是否有更优雅的选择来实现这一目标。

我希望能够只保存整个服务器结构及其数据库的模式。我可以想到一个脚本，它可以首先获取数据库列表，然后遍历每个数据库并导出所有数据库的模式，但我真的不知道如何实现这一点！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:34:04.040

这有帮助吗：

[http://www.nigelrivett.net/DMOScriptAllDatabases.html](http://www.nigelrivett.net/DMOScriptAllDatabases.html)

您可以使用 DMO 自动执行此操作，但我没有给您的示例脚本。

# node.js - 将数据保存在 Socket.IO 中的 Socket 上

> ID：15876616
> 
> 赞同：10
> 
> 时间：2013-04-08T10:17:48.143
> 
> 标签：node.js, websocket, socket.io

我想在服务器端的套接字上保存一些数据，所以每当客户端向服务器发出任何数据时，我都希望这些数据可用！

一个用例可以是在套接字上存储令牌。当客户端第一次连接时，它会发出令牌，如果有的话，或者它会显示登录页面，然后登录数据将被发送到服务器。无论是哪一个，我都想将令牌存储在服务器上，以便之后的每个请求都不需要指定令牌。

稍后，我将使用`RedisStore`，因此所有运行应用程序的服务器都可以访问所有数据。

**我唯一的问题是，我在哪里将数据存储在套接字上以便与该客户端相关联？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T10:33:59.000

在[http://socket.io/#how-to-use](http://socket.io/#how-to-use) 滚动到：存储与客户端关联的数据

使用 socket.set 和 socket.get 异步设置和获取数据

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-01T12:44:31.990

当您不想使用任何数据库时，可以将数据保存在全局变量中

```
var globalVariable = {};

io.sockets.on("connection", function (socket) {

    socket.on("save-client-data", function (clientData) {
          var clientId = clientData.clientId;
          globalVariable[clientId] = JSON.parse(clientHandshakeData);
    });

    socket.on("get-client-data", function (clientId) {

          var clientData =  globalVariable[clientId];
          socket.emit("get-client-data", JSON.stringify(clientData));

    });

}); 
```

这适用于我的场景，但是我不知道性能影响。

# c# - MVC4 - 使用 Ajax.ActionLink 意外删除对象后刷新部分视图

> ID：15876620
> 
> 赞同：0
> 
> 时间：2013-04-08T10:17:53.423
> 
> 标签：c#, asp.net-mvc, jquery, asp.net-mvc-4

我有一个 DIV ( `tenant-reference-photos`) ，其中包含显示照片的部分视图。每张照片旁边都有一个删除按钮。单击它时，我希望将照片从列表中删除，并且只有 DIV 由 Ajax 更新。

我正在使用`Ajax.ActionLink`删除操作：

```
<div>
    @Ajax.ActionLink("Delete", "DeleteReference",
    new { id = photo.ImageId },
    new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", 
                      UpdateTargetId = "tenant-reference-photos" },
    new { @class = "btn btn-primary" })
</div> 
```

控制器动作：

```
[HttpGet]
public ActionResult DeleteReference(int id)
{
    return View(refPhotoRepository.Find(id));
}

[HttpPost, ActionName("DeleteReference")]
public ActionResult DeleteReferenceConfirmed(int id)
{
    try
    {
        refPhotoRepository.Delete(id);
        refPhotoRepository.Save();
        return PartialView("_TenantReferencePhotosPartial");
    }
    catch (Exception e)
    {
         // handle exception   
    }
    return View();
} 
```

当我单击删除时，该操作将触发并从​​数据库中删除记录。问题出在`return PartialView("_TenantReferencePhotosPartial");`. 当操作尝试返回部分时，我在`@if (Model.ReferencePhotos.Count == 0)`.

**_TenantReferencePhotosPartials.cshtml**

```
<div>
@if (Model.ReferencePhotos.Count == 0)
{
    <h3>You haven't uploaded any references! 
        @Ajax.ActionLink("Upload now?",
            "TenantUploadReference",
            new AjaxOptions
            {
                UpdateTargetId = "tenant-reference-photos",
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "GET",
                LoadingElementId = "ajax-loader"
            })</h3>
}
else
{
    foreach (var photo in Model.ReferencePhotos)
    {
    <ul class="thumbnails">
        <li class="span8">
            <a href="#" class="thumbnail">
                <img src="@Url.Action("GetReference", "Tenants", new { id = photo.ImageId })" alt="@photo.Name") />
            </a>
        </li>
        <li class="span4 btn-group btn-group-vertical">
            <a href="#" class="btn btn-primary" id="showEditPhotoModal" role="button" data-toggle="modal">Edit</a>
            @Ajax.ActionLink("Delete", "DeleteReference",
         new { id = photo.ImageId },
         new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "POST", UpdateTargetId = "tenant-reference-photos" },
         new { @class = "btn btn-primary" })
        </li>
    </ul>
    }
}
</div> 
```

即使集合中有几张照片并删除了一张，仍然会在前面提到的行处抛出异常。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:52:52.267

> 如何解决上述错误？
> 
> 即使在源代码中也没有在部分中定义 jQuery $，我遇到了一些麻烦

我相信这与您的问题有关。当我在局部视图中遇到这个问题时，对我来说总是有用的是将它包含在`script section`. 因此，`_Layout.cshtml`在您编写脚本的位置上，您可以添加以下内容：

```
// Do this after you referenced jquery
@RenderSection("scripts", required: false)
<script>
// some script references
</script> 
```

然后在你看来你这样做：

```
@section scripts {
    $(function() {
        <script>
            function onDeleteReferenceSuccess(data, status, xhr) {
                if (data.error) { /* handle error */ }
                else {
                    window.location.reload(true);
                }
            }
        </script>
    });
} 
```

> 解决上述问题后，如何更新唯一的 DIV？由于您删除了该项目，我假设您想要删除代表该项目的 div。

如果我的假设是正确的，那么为什么不给它一个，这样你就可以在你的声明`Id`中删除它：`else`

```
else {
    // instead of this -> window.location.reload(true);
    $("#id_of_the_div").remove();
} 
```

**更新：** 您更新的问题抛出了我原来的答案。但是让我先在此处包含更新的答案（然后再进行清理）。所以你有一个空引用错误的原因是你没有返回模型：

```
refPhotoRepository.Delete(id);
refPhotoRepository.Save();
// build the model here and pass it to the partial view
// this will most probably involve querying your data store again
var model = goBuildTheModel();
return PartialView("_TenantReferencePhotosPartial", model; 
```

# ssis - SSIS 错误：[SSIS.Pipeline] 错误：“组件“Excel Source”(14)”验证失败并返回验证状态“VS_NEEDSNEWMETADATA”

> ID：15876621
> 
> 赞同：4
> 
> 时间：2013-04-08T10:17:57.307
> 
> 标签：ssis, ssi

我浏览了这个网址：

[如何遍历 Excel 文件并使用 SSIS 包将它们加载到数据库中](https://stackoverflow.com/questions/7411741/how-to-loop-through-excel-files-and-load-them-into-a-database-using-ssis-package)

我遵循了那里提到的相同步骤，但我收到了这个警告：

```
[Excel Source [14]] Warning: The external columns for component 
"Excel Source" (14) are out of synchronization with the data source 
columns. The column "state" needs to be added to the external columns.
The external column "state " (27) needs to be removed from the external 
columns. 
```

这个错误：

```
[SSIS.Pipeline] Error: "component "Excel Source" (14)" failed validation 
and returned    validation status "VS_NEEDSNEWMETADATA". 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:31:56.043

我发现这个错误，有时只需双击每个组件，查看列和各种转换，然后按确定即可修复。然后我保存并重新运行它就可以了。确保没有红色 x 徘徊或任何其他警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-16T06:00:55.137

这个错误的原因是元数据的变化，在我的例子中，列名在 Excel 源中被重命名。验证 Excel 列名称和相应的映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T18:39:52.913

当您处理它时，excel源有问题。有一些步骤可以避免它：1）确保您获得 Excel 连接并且不要更改 excel 文件连接字符串或文件夹（物理上不要移动文件） 2）检查红十字（X），如果你看到在 excel 文件源中找到箭头，它将显示错误代码。3）打开excel源并检查列并检查预览 4）单击确定

注意：你不应该有红十字会（X）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-20T14:57:07.847

列的名称不同。您在名称“state”与“state”中有一个空格。而且它也区分大小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-12T17:17:15.463

从 excel 源中删除未使用的或空白的 excel 表并尝试再次执行包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-22T11:46:52.227

当您更改开发期间在连接管理器中预定义的 excel 时，就会发生这种情况。如果您想更改 excel，请确保您也在 excel 连接管理器中进行更改（尽管您已配置为使用其他名称）。

# jquery - 传递文件 blueimp fileupload IE

> ID：15876623
> 
> 赞同：2
> 
> 时间：2013-04-08T10:18:01.127
> 
> 标签：jquery, asp.net, jquery-ui, file-upload, blueimp

我在使用 blueimp 文件上传时遇到问题。

当我尝试在 FireFox 或 Google Chrome 中上传文件时，我会在 .NET 端获取带有长度和文件名的文件。

![在此处输入图像描述](https://i.stack.imgur.com/JbHHb.png)

如果我在 IE 中尝试它，我会得到一个没有内容长度和文件名的空流。我确定我的文件数组是正确的，因为它可以在 FF 和 Chrome 中使用长度和文件名。

![在此处输入图像描述](https://i.stack.imgur.com/QXrMT.png)

谁能给我正确的提示？

这是我的设置的样子：

```
$('.fileupload').each(function () {
        var that = $(this);
        $(this).fileupload({
            dropZone: $('#' + content).find('.fileupload').length > 1 ? $('#' + content + ' .container' + that.closest('.standardJoins').find('.tStampJoin').val()) : $(document),
            pasteZone: $('#' + content).find('.fileupload').length > 1 ? $('#' + content + ' .container' + that.closest('.standardJoins').find('.tStampJoin').val()) : $(document),
            singleFileUploads: false,
            url: '/service/serviceAIO.aspx',
            multipart: false,
            change: function (e, data) {
                $.each(data.files, function (index, file) {
                    fileArray[fileArray.length] = data.files[0];
                });
            }
... 
```

由于某些原因，在按下按钮之前我无法提交表单。按下按钮后，我以这种方式提交表单：

```
$('#' + content + ' .fileupload:visible:first').fileupload('send', { files: fileArray }); 
```

我有多个文件上传器实例，因为它是具有多个选项卡（jQuery UI）的单页面布局。

在服务器端，我收到以下请求：

```
Request.Files("files[]") 
```

在此先感谢，丹尼尔

# jquery-ui - 无法使用 jQueryUI 绑定自动完成功能

> ID：15876624
> 
> 赞同：2
> 
> 时间：2013-04-08T10:18:02.843
> 
> 标签：jquery-ui, jquery-autocomplete

我正在尝试使用 jqueryUi 进行自动完成，但无法将数据绑定到它。

```
$("#CustomerName").autocomplete({
        source:
       function () {
           $.ajax({
               url: "SearchCustomer?key=" + $("#CustomerName").val(),
               async: false,
               dataType:"json",
               success: function (data) {
                   return data.ResultList;
               }
           })
       },
        minLength: 0, autoFocus: true, delay: 1000
    }); 
```

我的ajax结果是 -

```
{"Message":null,"Successfull":false,"Id":0,"Result":null,"ResultList":["Customer 2","Kohl\u0027s Corp","Test Corp"]} 
```

如果我使用它，那么它工作正常

```
$("#CustomerName").autocomplete({
            source:["Customer 2","Kohl\u0027s Corp","Test Corp"],
            minLength: 0, autoFocus: true, delay: 1000
        }); 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:23:50.407

$.ajax 没有问题，您能否将返回的数据与响应包装起来，例如 `response(data.ResultList);`

```
$("#CustomerName").autocomplete({
    source: function( request, response ) {
            $.ajax({
               url: "SearchCustomer?key=" + $("#CustomerName").val(),
               dataType : "json",
               success: function (data) {
                   response(data.ResultList);
               }
           });
    },
    minLength: 0, 
    autoFocus: true, 
    delay: 1000
}); 
```

# javascript - 防止事件冒泡（用于 javascript onclick 事件）

> ID：15876628
> 
> 赞同：2
> 
> 时间：2013-04-08T10:18:16.277
> 
> 标签：javascript, jquery, event-handling, event-bubbling

我正在使用 javascript 与 CMS 进行交互，该 CMS 提供了一个按钮供用户将东西添加到他们的购物篮中。但是，我正在使用 javascript 来尝试阻止客户这样做，除非他们从页面其他位置的下拉菜单中进行了选择。

因为有许多不同的按钮可能会将它们带到购物篮（包括下面的示例），并且所有这些按钮都有不同的方法来执行此操作，而不是编写多行代码来阻止每个方法，然后在出现时重新启用该方法进行了选择我正在尝试进行一种“包罗万象”的修复，我只是用另一个 div 覆盖任何此类按钮/链接，以便有效地“掩盖”其下方的按钮，直到他们做出决定。

我首先尝试使用绝对定位的 div 来做到这一点，效果很好，直到用户在页面上重新调整文本框的大小，然后突然我的绝对定位的 div 出现在错误的位置！

所以我现在使用 JQuery 的 .wrap() 很好地解决了这个问题.. 但是.. 现在我不能使用 z-index 将 div 定位在所需按钮的上方，因为这些按钮位于掩码内而不是它下方！

我已经阅读了很多关于事件冒泡的内容，但我不确定我是否还没有找到正确的信息，或者我是否理解正确，或者事件冒泡可能会导致我一起走上错误的道路。似乎没有采用这些概念并将它们应用于这种情况。

所以.....

给定以下 HTML 结构：

```
<div class="btnMask">
    <div class="button">
        <a onclick="pageSubmit();return false;" href="#" id="addToBasket">
            <span>Add to Basket</span>
        </a>
    </div>
</div> 
```

*   我的javascript添加了带有class =“btnMask”的div。

加上以下 JQuery：

```
$('.btnMask').click(function() {
    // prevent default actions and alert the customer to select something;
}); 
```

单击 .btnMask div 时如何停止标签触发？并且（如果这个问题的答案不能使我的其他问题的答案显而易见......）我将如何打开和关闭它？（我有一个检查下拉 onchange 并将 z-index 设置为 99 / -99 的函数，所以我想更改它以合并这个新方法。）

预先感谢您的帮助。

**<< 编辑 >>**

使用对此的初步答案，我设法解决了使用常规 href 将您带离页面的链接的问题。

所以我现在已经修复了 HTML 如下所示的链接：

```
<div class="btnMask">
    <div class="button">
        <a id="nextPage" href="/link/toanotherpage.asp?id=667868465726122926234">
            <span>Click to go to Page 2</span>
        </a>
    </div>
</div> 
```

但是，就像我说的那样，有很多方法可以让人们离开页面，并且**e.preventDefault();** 和**e.stopPropagation();** 不适用于我原来的例子（大概是因为他们使用 onclick 而不是 href ？）。

**有没有办法做与e.preventDefault();**相同的事情？和**e.stopPropagation();** 在我的 .btnMask div 上做，但也会处理由 onclick 触发的包含链接？

谢谢

**<< 编辑 >>**

更新了问题标题以反映确切的问题，而不仅仅是常规链接上的事件冒泡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:35:18.397

如果要防止事件冒泡并取消默认操作，则可以`false`从事件处理程序返回。

```
$('.btnMask').click(function() {
    return false;
}); 
```

或者使用[preventDefault](http://api.jquery.com/event.preventDefault/)和[stopPropagation](http://api.jquery.com/event.stopPropagation/)

```
$('.btnMask').click(function(e) {
    e.preventDefault();
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:32:57.390

```
$('.btnMask').click(function(e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:03:30.377

您的 onclick 处理程序在您的 jquery 单击处理程序之前触发。你可以做这样的事情

```
 function pageSubmit() {
        alert('pageSubmit');
    }
    var link = document.getElementById('addToBasket');
    var linkClickHandler = link.onclick;
    link.onclick = null;
    $('.button').data('linkClickHandler', linkClickHandler);

    $('.button').on('click', function(e){
        var clickHandler = $(this).data('linkClickHandler');
        var link = $(this).find('a').get(0);
        clickHandler.apply(link, [e]);
    });

    $('.btnMask').on('click', function(e){
        if (!$(this).hasClass('test')) {
            e.preventDefault();
            e.stopPropagation();
        }
    }); 
```

和 html 作为

```
<div class="button">
    <a onclick="pageSubmit();return false;" href="#" id="addToBasket">
        <div class="btnMask test">
            <span>Add to Basket</span>
        </div>
    </a>
</div> 
```

如果从 btnMask div 中删除类测试，则不会调用 pageSubmit 处理程序，并且当它存在时会调用处理程序。

# cordova - Derby 可以与 Phonegap 一起使用吗？

> ID：15876636
> 
> 赞同：1
> 
> 时间：2013-04-08T10:18:34.430
> 
> 标签：cordova, derbyjs

是否可以使用 phonegap 打包 derbyjs 应用程序？我根本没有找到任何人这样做的单一参考，而流星是一个[不同的故事](https://stackoverflow.com/questions/10322723/can-meteor-be-used-with-phonegap)，所以我自然很好奇为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-08T21:53:39.757

在 0.5 版本上可以部分实现。查看[psirenny](https://github.com/psirenny)存储库以获取有关[设置 Derby-Phonegap 应用程序的](https://github.com/psirenny/derbygap)示例。还有许多以这种方式制作的示例应用程序和带有 Phonegap 支持的 Derby 的 Passport 身份验证库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-17T06:41:37.537

从 0.6 版（即将推出）开始，您将能够分离 derby 应用程序的客户端和服务器端。您将能够在 phonegap 中使用客户端应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:04:29.050

我对此也有兴趣。您可以查看此线程[https://groups.google.com/forum/?fromgroups=#!topic/derbyjs/Hna5c_WRrc0](https://groups.google.com/forum/?fromgroups=#!topic/derbyjs/Hna5c_WRrc0)来澄清它。

# opengl-es - 如何使用片段着色器在 OpenGL ES 中绘制球体错觉？

> ID：15876640
> 
> 赞同：2
> 
> 时间：2013-04-08T10:18:49.383
> 
> 标签：opengl-es, shader

我正在使用这个简单的函数在面向相机的 3D 空间中绘制四边形。现在，我想使用片段着色器在里面绘制一个球体的错觉。但是，问题是我是 OpenGL ES 的新手，所以我不知道怎么做？

```
void draw_sphere(view_t view) {

    set_gl_options(COURSE);

    glPushMatrix();
    {
        glTranslatef(view.plyr_pos.x, view.plyr_pos.y, view.plyr_pos.z - 1.9);
#ifdef __APPLE__
#undef  glEnableClientState
#undef  glDisableClientState
#undef  glVertexPointer
#undef  glTexCoordPointer
#undef  glDrawArrays

        static const GLfloat vertices []=
        {
            0, 0, 0,
            1, 0, 0,
            1, 1, 0,
            0, 1, 0,
            0, 0, 0,
            1, 1, 0
        };

        glEnableClientState(GL_VERTEX_ARRAY);
        glVertexPointer(3, GL_FLOAT, 0, vertices);
        glDrawArrays(GL_TRIANGLE_STRIP, 0, 6);
        glDisableClientState(GL_VERTEX_ARRAY);
#else
#endif
    }
    glPopMatrix();
} 
```

更确切地说，我想实现这一目标： ![使用 OpenGL ES 2.0 增强分子](https://i.stack.imgur.com/I2TRN.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:50:33.217

要实现这一点，您可能需要做很多事情......在您发布的最后一张图像上绘制的球体是使用照明、光泽和颜色的结果。一般来说，您需要一个可以处理所有这些并且通常可以适用于任何形状的着色器。

这种特殊情况（还有其他一些可以用数学表示的）可以用单个四边形绘制，甚至不需要将法线坐标推送到程序中。您需要做的是在片段着色器中创建法线：如果您收到向量`sphereCenter`和`fragmentPosition`浮点数`sphereRadius`，那么`sphereNormal`是一个向量，例如

```
sphereNormal = (fragmentPosition-sphereCenter)/radius; //taking into account all have .z = .0
sphereNormal.z = -sqrt(1.0 - length(sphereNormal)); //only if(length(spherePosition) < sphereRadius) 
```

和真实的球体位置：

```
spherePosition = sphereCenter + sphereNormal*sphereRadius; 
```

现在你需要做的就是添加你的光照。不管是不是静态的，最常见的是使用一些环境因子、线性和平方距离因子、发光因子：

```
color = ambient*materialColor; //apply ambient

vector fragmentToLight = lightPosition-spherePosition;
float lightDistance = length(fragmentToLight);
fragmentToLight = normalize(fragmentToLight); //can also just divide with light distance
float dotFactor = dot(sphereNormal, fragmentToLight); //dot factor is used to take int account the angle between light and surface normal
if(dotFactor > .0) {
   color += (materialColor*dotFactor)/(1.0 + lightDistance*linearFactor + lightDistance*lightDistance*squareFactor); //apply dot factor and distance factors (in many cases the distance factors are 0)
}

vector shineVector = (sphereNormal*(2.0*dotFactor)) - fragmentToLight; //this is a vector that is mirrored through the normal, it is a reflection vector
float shineFactor = dot(shineVector, normalize(cameraPosition-spherePosition)); //factor represents how strong is the light reflection towards the viewer
if(shineFactor > .0) {
   color += materialColor*(shineFactor*shineFactor * shine); //or some other power then 2 (shineFactor*shineFactor)
} 
```

这种在片段着色器中创建灯光的模式是众多模式之一。如果你不喜欢它或者你不能让它工作，我建议你在网上找到另一个，否则我希望你能理解它并能够玩弄它。

# python - 重新加载自制模块

> ID：15876642
> 
> 赞同：1
> 
> 时间：2013-04-08T10:18:54.977
> 
> 标签：python, python-2.7

```
Files:

File 1: metrobot.py
File 2: irc.py
File 3: cmd.py 
```

MetroBot.py 启动 irc.py，irc.py 生成一个 while 循环，然后使用 cmd.py。我尝试从 irc.py 重新加载 cmd 模块。在我重新加载它之后，cmd.py 中的更改仍然不会生效。

重新加载代码片段：

```
if ":!reload" in self.buf:
  reload(sys.modules['cmd']) 
```

我也试过

```
reload(cmd) 
```

两者都不起作用。

任何人都知道是什么原因导致重新加载不起作用，或者其他简单的方法？该脚本旨在始终运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:56:45.853

我创建了以下三个迷你脚本来测试它并且它可以工作：

机器人.py：

```
import irc

def start():
  irc.run() 
```

irc.py：

```
import cmd, time

def run():
  while 1:
    print cmd.dothis()
    reload(cmd)
    time.sleep(1) 
```

命令.py：

```
def dothis():
  return 1 
```

现在，如果您运行 bot.start() 它将每秒打印一次“1”，然后如果我在某个时候编辑 cmd.py 说它`return 2`打印“2”.. 显然我想象这比无论您拥有什么代码，但您需要发布一些示例以帮助我们更好地回答您。或者尝试分解您的代码并使用精简版本的代码测试重新加载。

# android - 错误 android: 您的内容必须有一个 id 属性为 android.R.id.list 的 ListView

> ID：15876646
> 
> 赞同：0
> 
> 时间：2013-04-08T10:19:11.760
> 
> 标签：android, android-listview

大家好，我需要一些帮助来解决我的问题。我想显示所有数据`database`。但是当我尝试显示时，我在日志 Cat 中出现这样的错误：您的内容必须有一个`ListView`其 id 属性为`android.R.id.list`

这是我在**DBHelper.java中的查询**

```
public Cursor getAll() {
    SQLiteDatabase db = getReadableDatabase();
    Cursor cur = db.query(TableName, new String[]{ID, LATITUDE, LONGITUDE, 
            RADIUS, 
            ALAMAT, KONTEKS_TUGAS}, null, null, null, null, null);
    db.close();
    return cur;
} 
```

我的代码在**视图中**

```
public class readReminder extends ListActivity {
DBHelper helper;
ListView taskList;
ArrayList<Task> listArr;
listAdapter listadapt;

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.read_task);
     taskList = (ListView) findViewById(android.R.layout.simple_list_item_1);
     helper = new DBHelper(this);
     listArr = new ArrayList<Task>();

     Cursor cur = helper.getAll();
     if(cur.moveToFirst()) {
         do {
             ArrayList temp = new ArrayList();
             temp.add(String.valueOf(cur.getString(5)).toString());
             temp.add(String.valueOf(cur.getString(6)).toString());
             listArr.addAll(temp);
         } while(cur.moveToNext());
     }
     cur.close();
     listadapt = new listAdapter(getApplicationContext(), listArr);
     taskList.setAdapter(listadapt);
 }} 
```

**listAdapter.java**

```
public class listAdapter extends BaseAdapter {
Context konteks;
ArrayList<Task> data;

public listAdapter(Context context, ArrayList<Task> data) {
    this.konteks = context;
    this.data = data;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return this.data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    LayoutInflater inflater = (LayoutInflater) 
            konteks.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.txt_view, null);
    TextView txt = (TextView) view.findViewById(R.id.txtView);
    txt.setText(this.data.get(position).getAlamat());
    view.setTag(this.data.get(position).getKonteks());
    return view;
}} 
```

我的**read_task.xml**

```
 <ListView 
    android:id="@+id/android:list" 
    android:layout_height="wrap_content" 
    android:layout_width="match_parent">
</ListView> 
```

还有**我的 txt_view.xml**

```
<TextView
    android:id="@+id/txtView"
    android:textSize="16sp"
    android:textStyle="bold"
    android:textColor="@android:color/black"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:21:11.393

更改`android:id="@+id/android:list"`为`android:id="@android:id/list"`，这应该可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:34:32.313

使用`android:id="@android:id/list"`，您的 ListView 应通过以下方式找到：

```
taskList = getListView(); 
```

# xml - ComplexType 元素 XSD

> ID：15876650
> 
> 赞同：1
> 
> 时间：2013-04-08T10:19:18.393
> 
> 标签：xml, xsd

使用不同的元素验证两种 XML XSD 类型。

产品的这个 XML。

```
<oils hostDbID="6" hostDetailId="289" model="1l dans 5w30 c3"
  host="norauto" trademark="oil-dans" id="noil-237789" 
  product-type="oils">
  <url>http://www.oils.es/product/_289.html</url>
  <img>http://medias.es/images_prod/oil_5_w_30_c3_1l.jpg</img>
  <price>11.95</price>
  <currency>€&lt;/currency>
  <manufacture>autoOil</manufacture>
  <viscosity>5W30</viscosity>
  <liters>1 L</liters>
  <composition>sint</composition>
  <norm type="Acea">C2</norm>
  <norm type="API">SM/CF</norm>
  <norm type="VW">505.00</norm>
  <norm type="Mercedes-Benz">229.31</norm>
  <norm type="BMW">LONGLIFE 04</norm>
  <content>
    Norma C3 A3/B3/B4 LL.
  </content>
</oils> 
```

这是 XSD：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="tire" type="tire" />
  <xs:element name="oils" type="oil" />

  <xs:complexType name="product">
    <xs:sequence>
      <xs:element type="xs:anyURI" name="url" />
      <xs:element type="xs:double" name="price" />
      <xs:element type="xs:float" name="ecorate" 
        minOccurs="0" maxOccurs="unbounded" />
      <xs:element type="xs:string" name="currency" />
      <xs:element type="xs:boolean" name="vat" />
      <xs:element type="xs:anyURI" name="img" />
      <xs:element type="xs:string" name="content" />
      <xs:element name="specs" maxOccurs="unbounded"
        minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="spec" maxOccurs="unbounded"
              minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                    <xs:attribute type="xs:string" name="name"
                      use="optional" />
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="features" maxOccurs="unbounded"
        minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="feature" maxOccurs="unbounded"
              minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                    <xs:attribute type="xs:string" name="name"
                      use="optional" />
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute type="xs:int" name="hostDbID" />
    <xs:attribute type="xs:string" name="hostDetailId" />
    <xs:attribute type="xs:string" name="host" />
    <xs:attribute type="xs:string" name="id" />
    <xs:attribute type="xs:string" name="product-type" />
  </xs:complexType>

  <xs:complexType name="tire">
    <xs:complexContent>
      <xs:extension base="product">
        <xs:attribute type="xs:string" name="speed" />
        <xs:attribute type="xs:int" name="load" />
        <xs:attribute type="xs:int" name="wheels" />
        <xs:attribute type="xs:int" name="height" />
        <xs:attribute type="xs:int" name="width" />
        <xs:attribute type="xs:int" name="season" />
        <xs:attribute type="xs:string" name="model" />
        <xs:attribute type="xs:string" name="trademark" />
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="oil">
    <xs:complexContent>
      <xs:extension base="product">
      <xs:attribute type="xs:string" name="model"/>
      <xs:attribute type="xs:string" name="trademark"/>
      </xs:extension>
    </xs:complexContent>

    <xs:sequence>
      <xs:element type="xs:string" name="manufacture"/>
      <xs:element type="xs:string" name="viscosity"/>
      <xs:element type="xs:string" name="liters"/>
      <xs:element type="xs:string" name="composition"/>
      <xs:element name="norm" 
          maxOccurs="unbounded" minOccurs="0">
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute type="xs:string" 
                name="type" use="optional"/>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
        </xs:element>
      </xs:sequence>

  </xs:complexType>
<xs:element name="products">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="tire" maxOccurs="unbounded"
        minOccurs="0" type="tire" />
      <xs:element name="oils" maxOccurs="unbounded"
        minOccurs="0" type="oil" />
    </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

问题是**在**：****

 ****```
 <xs:sequence>
      <xs:element type="xs:string" name="manufacture"/>
      <xs:element type="xs:string" name="viscosity"/>
      <xs:element type="xs:string" name="liters"/>
      <xs:element type="xs:string" name="composition"/>
      <xs:element name="norm" maxOccurs="unbounded" 
          minOccurs="0">
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute type="xs:string" 
                name="type" use="optional"/>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
        </xs:element>
      </xs:sequence> 
```

我用过xmllint。我得到的错误是这样的：

```
Element '{http://www.w3.org/2001/XMLSchema}element': The content is not valid. 
```

“油”的 complexType 中元素的内容不正确，没有有效的元素。如何在产品油中添加更多项目的扩展？谢谢。

**解决方案：**

```
<xs:complexType name="fullOil">
  <xs:complexContent>
    <xs:extension base="oil">
      <xs:sequence>
        <xs:element type="xs:string" 
                    name="manufacture"/>
        <xs:element type="xs:string" name="viscosity"/>
        <xs:element type="xs:string" name="liters"/>
        <xs:element type="xs:string" name="composition"/>
        <xs:element name="norm" 
                    maxOccurs="unbounded" 
                    minOccurs="0">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute type="xs:string" 
                              name="type" 
                              use="optional"/>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```****

# c# - 将 lambda 表达式作为方法参数传递

> ID：15876652
> 
> 赞同：2
> 
> 时间：2013-04-08T10:19:36.803
> 
> 标签：c#, lambda, expression

我想创建以下方法，它接受一个 lambda 表达式并按它排序数据。我似乎无法正确设置它。

会在哪里看起来像这样？？？是 lambda 表达式：

```
public static MyList<T> PageAndSort<T>(this IEnumerable<T> data, ???) 
```

会这样使用：

```
MyList.PageAndSort(List<MyEntity> data, x=>x.ChildEntity.Name) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:43:04.463

LINQ 有一个非常相似的方法：[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx). 看它的签名并模仿它：

```
public static IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(
    this IEnumerable<TSource> source,
    Func<TSource, TKey> keySelector
) 
```

适用于您的案例：

```
public static MyList<TSource> PageAndSort<TSource, TKey>(
    this IEnumerable<TSource> data,
    Func<TSource, TKey> keySelector
) 
```

`Func<T, TResult>`是具有一个类型参数的委托，该参数`T`返回一个`TResult`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:31:27.083

使用`Action<T>`or`Func<T>`取决于您是否需要返回参数。

所以：

```
public static MyList<T> PageAndSort<T>(this IEnumerable<T> data, Action<T> sortBy) 
```

where`T`被您要排序的类型替换，所以 sting 等。

# oracle - Oracle 使用管道函数从对象类型中进行选择

> ID：15876665
> 
> 赞同：1
> 
> 时间：2013-04-08T10:20:21.483
> 
> 标签：oracle, plsql, user-defined-types

我想创建一个访问表类型 Oracle 对象的 Oracle 包。

```
CREATE OR REPLACE TYPE t_dept_avg_rec AS OBJECT( 
  dept  number, 
  age   number
)

CREATE OR REPLACE TYPE t_dept_avg_tab IS TABLE OF t_dept_avg_rec 
```

如下所述，在上述对象类型表中插入少量记录。

```
 dept, age
  ----- ---
 - 20,   60
 - 30,   40
 - 20,   24
 - 30,   66 
```

然后创建一个单独的 oracle 流水线函数来返回以下结果。

```
select dept, avg(age)
  from t_dept_avg_tab
group by dept; 
```

这可能使用 Oracle 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:51:20.873

`t_dept_avg_tab`是一种 SQL 类型，因此您可以通过 TABLE() 函数直接在 FROM 中使用它：

```
SQL> select dept, avg(age)
  2  from table(t_dept_avg_tab(t_dept_avg_rec(20,60)
  3                         , t_dept_avg_rec(30,40)
  4                         , t_dept_avg_rec(20,24)
  5                         , t_dept_avg_rec(30,66)))
  6  group by dept
  7  /

      DEPT   AVG(AGE)
---------- ----------
        30         53
        20         42

SQL> 
```

# ios - UITableView 在添加数据后停止更新 UI 而不会崩溃

> ID：15876666
> 
> 赞同：0
> 
> 时间：2013-04-08T10:20:22.407
> 
> 标签：ios, uitableview

我有一个让我发疯的问题。

我有一个***始终***处于编辑模式的 UITableView（必须如此）。

用户可以向其中添加新行。

tableViewController 的 navigationItem.leftbarButton 推送了一个新的控制器，我们称之为“newRowsVC”。

在推送之前 tableViewController 将自己设置为 newRowsVC 的委托，协议只有一个方法：

```
-(void) aNewRowHasBeenCreated
{
  [self.tableView reloadData];
} 
```

我开始添加行，一切正常，现在每一行都立即显示在 tableViewController 中，***直到***最后一个新行将强制 tableView 滚动，因为它不再有屏幕空间。在这里，我不知道为什么，只有它的 tableView 是冻结的，没有滚动条并且不响应输入。该应用程序继续运行而不会崩溃，我什至可以通过点击 navigationItem.rightbarButtonItem 来关闭 tableViewController。

我可以继续创建新行，将它们添加到数组中，正确计算 tableView 数据源中的行数。但是桌子就像死了一样。

如果我关闭 tableViewController 然后我回到它，我会看到之前创建的所有行，还有那些在创建后没有显示的行！

我真的不知道如何解决这个问题。

我尝试的第一件事是在重新加载表格后强制滚动，但它没有修复它。

```
-(void) aNewRowHasBeenCreated
{
    [self.tableView reloadData];
    [self.tableView setScrollEnabled:YES]; 
} 
```

我还尝试强制 tableView 滚动到最后一行，但它没有修复它。

```
-(void) aNewRowHasBeenCreated
{
   [self.tableView reloadData];
   [self.tableView setScrollEnabled: YES];
   [self.tableView scrollToRowAtIndexPosition: [self.tableView indexPathsForVisibleRows]last object] atScrollPosition: UITableViewScrollPositionBottom animated:YES];
} 
```

每次重新加载表时，我都会检查行数。没有错误，数字是完美的，新行数据在数组中正确，还有未显示的单元格的数据。

我认为这可能是因为 tableView 始终处于编辑模式，所以我尝试将其设置为 NO，但没有任何变化，id 无法解决问题。

两个注意事项：

1）tableView 必须是每个自定义单元格的代表。它们有一个 UITextField 和一个 UIStepper，由 tableViewController 处理。我已经尝试不将 tableViewController 设置为其自定义单元格的代表，但没有任何变化，所以问题不在于这个。

2) self.tableView.bounces = NO 但这与滚动问题无关，启用滚动。

更新：经过更多测试后，我发现如果我删除可重用自定义单元格的出队，一切正常，所以问题应该是关于重用的。

```
static NSString *CellIdentifier=@"MyCell"
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier]; 
```

尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:49:29.313

几个小时后，我得到了它。正如 Amit 所指出的，问题隐藏在 cellForRowAtIndexPath 中......很难捕捉到，因为它并没有一直发生，而且我第一次启用/禁用单元重用一切似乎都是一样的，所以我没有链接问题给它。在尝试了我能想到的所有其他选项后，我重新开始了它。

问题在于单元格的重用以及自定义单元格将 tableView 作为其委托来处理其 textView 和步进器而不暴露它们的事实。

我摆脱了所有的 delagion 东西，并将 textView 和 stepper 作为视图的公共属性公开。通过这样做，我能够将 tableViewController 直接设置为 cell.textView 的代表，并直接为步进器添加目标/动作。

现在一切都完美无缺。

感谢所有试图帮助我的人！

尼古拉

# html - 使用 Twitter Bootstrap 水平放置表单域

> ID：15876669
> 
> 赞同：5
> 
> 时间：2013-04-08T10:20:34.360
> 
> 标签：html, css, user-interface, twitter-bootstrap

我们如何使用 Twitter Bootstrap 水平放置表单字段

我尝试了下面的 HTML 代码。但它像下面一样一一显示

*   **名字**- 文本框

*   **姓氏**- 文本框

    **搜索**

    ```
    <form class="form-horizontal">
        <div class="control-group">
          <label class="control-label" for="first">First Name</label>
          <div class="controls">
            <input type="text" id="first" placeholder="firstname">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="lastname">Last Name</label>
          <div class="controls">
            <input type="text" id="lastname" placeholder="Last Name">
          </div>
        </div>
        <div class="control-group">
          <div class="controls">              
            <button type="submit" class="btn">Search</button>
          </div>
        </div>
      </form> 
    ```

我希望名字和姓氏应该水平放置在第一行和下一行搜索按钮中。

像这样

*   **名字**- 文本框 **姓氏**- 文本框

    **搜索**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:27:30.250

将`inline`类添加到名字，姓氏`control-group`div：

```
<div class="control-group inline"> 
```

**CSS**

```
.inline {
    display:inline-block;
} 
```

工作小提琴[http://jsfiddle.net/GgSRN/](http://jsfiddle.net/GgSRN/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T10:29:21.023

尝试这个

```
 <form class="form-group form-inline">
      <label class="control-label" for="first">First Name</label>
      <input type="text" id="first" placeholder="firstname">
      <label class="control-label" for="lastname">Last Name</label>
      <input type="text" id="lastname" placeholder="Last Name">

      <div>
        <button type="submit" class="btn">Search</button>
      </div>
    </form> 
```

检查[引导程序内联表单](http://getbootstrap.com/2.3.2/base-css.html#forms) ，按照您所说的进行操作会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:25:31.647

在单独的文件中使用 CSS 来设置 html 样式。我会亲自将它们包装在`<div class="row">`using Bootstrap 中，并为您要创建的每个“行”使用其中一个。

# javascript - 我怎样才能得到javascript函数的返回值

> ID：15876673
> 
> 赞同：0
> 
> 时间：2013-04-08T10:20:39.630
> 
> 标签：javascript, jquery

我的代码是这样的

```
 var key,value;     
   //……some code……    
   function checkReg(i,j){    
       $.getJSON(api_checkExists,{"k":i,"v":j,"rand":Math.random()},function(c){    
           alert(c.status);    
           return(c.status);    
       });      
   }        
    var temp=checkReg(key,value);    
    alert(temp); 
```

问题是当我在浏览器中运行它时，它总是先警告未定义然后警告返回值；似乎无法获取函数 checkReg 的返回值。我很困惑，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:22:20.227

那是因为您的 ajax 调用与其他调用异步运行。在触发 ajax 之前，您的代码已经返回。

所以返回不是那样工作的，你应该为你的函数提供一个回调而不是试图返回它。

```
function checkReg(i,j, callback){    
       $.getJSON(api_checkExists,{"k":i,"v":j,"rand":Math.random()},function(c){    
           alert(c.status);    
           callback(c.status);    
       });      
   }        
    checkReg(key,value, function(temp){
          alert(temp);   
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:22:37.537

你不能那样做......因为ajax是ashynchronus......当成功函数被调用并返回时，警报将被调用，因此temp为未定义或空......一种方法是做你需要的事情到 getJSON 回调的成功内部...或使用[$.defered](http://api.jquery.com/category/deferred-object/)或调用回调函数..

```
function checkReg(i,j, callback){    
   $.getJSON(api_checkExists,{"k":i,"v":j,"rand":Math.random()},function(c){    
       callback(c.status);    
   });      
}        
checkReg(key,value, function(temp){
      alert(temp);   
}); 
```

# ruby - 如何在不在硬盘上创建文件的情况下发出 Multipart 请求？

> ID：15876674
> 
> 赞同：0
> 
> 时间：2013-04-08T10:20:44.423
> 
> 标签：ruby, multipartform-data, multipart

我需要请求一个 http api，问题是，不是所有参数都由**&**分隔的常见 post 请求，而是他们希望对每个参数都有一个**Multipart请求，如下所示：**

```
POST /core/eligibility HTTP/1.1 
Host: server_host:server_port 
Content-Length: 2408 
Content-Type: multipart/form-data; boundary=XbCY 
--XbCY 
Content-Disposition: form-data; name=“PayloadType“ 
X12_270_Request_005010X279A1 
--XbCY 
Content-Disposition: form-data; name=“ProcessingMode" 
RealTime 
--XbCY 
Content-Disposition: form-data; name=“PayloadID" 
e51d4fae-7dec-11d0-a765-00a0c91e6da6 
--XbCY 
Content-Disposition: form-data; name=“TimeStamp" 
2007-08-30T10:20:34Z 
--XbCY 
Content-Disposition: form-data; name=“UserName" 
hospa 
--XbCY 
Content-Disposition: form-data; name=“Password" 
8y6dt3dd2 
--XbCY 
Content-Disposition: form-data; name=“SenderID" 
HospitalA 
--XbCY 
Content-Disposition: form-data; name=“ReceiverID" 
PayerB 
--XbCY 
Content-Disposition: form-data; name=“CORERuleVersion" 
2.2.0 
--XbCY 
Content-Disposition: form-data; name=“Payload" 
<contents of file go here -- 1674 bytes long as specified above> 
--XbCY— 
```

关于使用 ruby​​ 发送 Multipart 请求有一个很好的[问题和答案](https://stackoverflow.com/questions/184178/ruby-how-to-post-a-file-via-http-as-multipart-form-data)，问题是您必须为每个参数创建一个文件，为一个简单的 api 请求创建 10 个不同的文件是无稽之谈。

有没有办法在不需要在磁盘上创建文件的情况下做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:20:44.423

就在这里 ：）

通过查看 gem **[rest-client](https://github.com/rest-client/rest-client/blob/master/lib/restclient/payload.rb)**，我发现有一个很好的参数称为**multipart**，当它为**true**时，所有参数都像 Multipart 请求一样发送。

IE：

```
require 'rest-client'
request_params = {
   CORERuleVersion: "value1",
   PayloadType: "value2",
   ProcessingMode: "value3",
   UserName: "value4",
   Password: "value5",
   SenderID: "value6",
   ReceiverID: "value7",
   PayloadID: "value8",
   TimeStamp: Time.now.utc.iso8601,
   Payload: "long_payload",
   multipart: true
}
RestClient.post("http://www.example.com", request_params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:51:05.907

由于磁盘 I/O 或混乱或其他原因，无法说出您关心的是什么，创建文件。

如果是任何类型的 I/O，您应该能够使用 Ruby 的 StringIO 类，而不是常规的 IO 对象。一切都在内存中写入和读取，使用字符串作为缓冲区。

# java - 如何为在 Tomcat 上运行的应用程序使用 System.getProperty()

> ID：15876678
> 
> 赞同：3
> 
> 时间：2013-04-08T10:20:55.247
> 
> 标签：java, tomcat

我正在尝试设置系统属性并在我的 Servlet 中检索它。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println(System.getProperty("name"));
    } 
```

我放置了这个：`-Dname=rickesh`在 CATALINA_OPTS 但运行代码返回`null`。我不知道如何在运行时将参数传递给 Tomcat 并通过`System.getProperty(String)`. 执行相同操作的[Google 搜索](https://www.google.co.in/search?q=pass%20runtime%20parameter%20to%20tomcat&aq=f&oq=pass%20runtime%20parameter%20to%20tomcat&aqs=chrome.0.64.1037j0&sourceid=chrome&ie=UTF-8)建议执行 JNDI 或在 CATALINA_OPTS 中设置，但没有关于如何设置的示例。

请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:39:45.907

经过一番打击和考验，`name=rickesh`放在`catalina.properties`现在`C:\apache-tomcat-6.0.35\conf`。工作正常。

# c# - 如何获取子字符串

> ID：15876681
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:20:58.913
> 
> 标签：c#, winforms, substring

我有一个类似这样`1234ABCD-1A-AB`的字符串，我在 string[] 分隔符中有分隔符，我正在循环直到字符串的长度。我想得到`substring`. 在循环内我正在写下面的代码

```
string tempVar = test.Substring(0, test.IndexOf("'" + separator+ "'")); 
```

我也试过这样

```
string tempVar = String.Join(",", test.Split(',').Select(s => s.Substring(0, s.IndexOf("'" + separator+ "'")))); 
```

通过使用这个我得到错误索引不应该小于 0，循环将只运行 2 次，因为我是基于分隔符的循环，并且我的字符串中有 2 个分隔符。

让我解释：

我有一个分隔符循环，它只会执行 2 次，因为我将 2 个分隔符，一个是第 9 位，另一个是第 14 位，在该循环内我根据分隔符拆分字符串

```
string[] test1 = test.Split("'" + separator+ "'"); 
```

在我的下一步中，我正在为下一个过程传递一个字符串值，如下所示

```
string temp = test1[i].ToString(); 
```

有了这个，我只得到 2 个字符串，`1234ABCD`我`1A`想在循环中也得到第三个值。所以我想到了使用子字符串而不是使用拆分。

输出应该是：

`first time: 1234ABCD`

`second time: 1A`

`third time: AB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:21:54.507

使用拆分功能：

```
string s = "1234ABCD-1A-AB";
string[] parts = s.Split('-'); 
```

然后：

```
s[0] == "1234ABCD"
s[1] == "1A"
s[2] == "AB" 
```

* * *

根据现在更新的要求，尝试以下操作：

```
string input = "1234ABCD-1A-AB";
char separator = '-';

string[] parts = input.Split(separator);

// if you do not need to know the item index:
foreach (string item in parts)
{
    // do something here with 'item'
}

// if you need to know the item index:
for (int i = 0; i < parts.Length; i++)
{
    // do something here with 'item[i]', where i is 
    // the index (so 1, 2, or 3 in your case).
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:25:29.087

您可以使用`Split`分隔符`'-'`，然后访问返回的`string[]`.

```
string[] parts = test.Split('-');
string firstPart  = parts[0];
string secondPart = parts.ElementAtOrDefault(1);
string thirdPart  = parts.ElementAtOrDefault(2); 
```

[**演示**](http://ideone.com/rEzk3m)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:22:59.390

```
string[] items = str.Split(new char[] { '-' }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:23:27.563

你可以使用[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法

> 返回一个字符串数组，其中包含此实例中由指定字符串或 Unicode 字符数组的元素分隔的子字符串。

```
string s = "1234ABCD-1A-AB";
string[] items = s.Split('-');

for(int i = 0; i < items.Length; i++)
  Console.WriteLine("Item number {0} is: {1}", i, items[i]); 
```

输出将是；

```
Item number 0 is: 1234ABCD
Item number 1 is: 1A
Item number 2 is: AB 
```

这是一个[`DEMO`](http://ideone.com/v0f0gE).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T10:25:30.583

[通过String.Split()](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)非常简单：

```
string t = "1234ABCD-1A-AB";
string[] tempVar = t.Split('-');

foreach(string s in tempVar)
{
     Console.WriteLine(s);
}
Console.Read(); 
```

印刷：

`1234ABCD` `1A` `AB`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T10:25:36.773

您可以使用[String.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)：

```
string str = "1234ABCD-1A-AB";
string[] splitted = str.Split('-');
/* foreach (string item in splitted)
{
    Console.WriteLine(item);
}*/ 
```

您可以将其设置为：

```
 string firstPart = splitted.FirstOrDefault();
 string secondPart = splitted.ElementAtOrDefault(1);
 string thirdPart = splitted.ElementAtOrDefault(2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T06:03:39.277

我只是错过了索引

```
string tempVar = test.Substring(0, test.IndexOf(separator[0].ToString())); 
```

# actionscript-3 - Event.ADDED_TO_STAGE 不会为添加到 ScrollContainer 的 DisplayObjects 触发

> ID：15876682
> 
> 赞同：0
> 
> 时间：2013-04-08T10:21:00.143
> 
> 标签：actionscript-3, starling-framework

我正在使用 Starling + Feathers + StarlingMVC 构建一个小游戏。

这样做，我遇到了 ScrollContainer 的问题：似乎添加到 ScrollContainer 的元素（在我的情况下为按钮）不会触发 Event.ADDED 事件，因此不会获得主题。

这是一个包含[添加代码的](http://pastebin.com/0mSh8NQG)粘贴箱：当我测试我的游戏时，_shopButton 和 _shopRPButton 是可见的，因为我指定了它们的纹理，但 _startButton 不是，因为它应该获得主题。

这是我[的自定义主题代码](http://pastebin.com/BhTqrVFM)，其中包含 buttonInitializer 中的 trace() 语句

这是相关的跟踪日志（我会放一个 pastebin 链接，但我的声誉不够高，无法发布两个以上的链接

> 羽毛-标题-项目 羽毛-标题-项目-羽毛-简单-滚动条-拇指羽毛-简单-滚动条-拇指-羽毛-简单-滚动条-拇指-羽毛-简单-滚动条-拇指-羽毛-简单-滚动条拇指羽毛简单滚动条拇指

如您所见，为 ScrollContainer 相关项目调用 trace() 语句，但不为我的按钮调用。

我究竟做错了什么？

问候， 布莱斯

# mysql - ELSE '60+' 在 CASE 语句中不起作用，但 ELSE 'Others' 起作用

> ID：15876683
> 
> 赞同：1
> 
> 时间：2013-04-08T10:21:04.673
> 
> 标签：mysql, sql, if-statement, case

这是我用来查找给定年龄范围内有多少人的 SQL 语句（以百分比为单位）。

```
SELECT
CASE 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 10 THEN '-10' 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 20 THEN '11-20'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 30 THEN '21-30'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 60 THEN '31-60'
ELSE '60+' 
END AS Age, 
(Count(adherent_naissance)* 100 / (Select Count(*) From adherent)) as Pourcentage
FROM adherent
GROUP BY 
CASE 
WHEN Age <= 10 THEN '-10' 
WHEN Age <= 20 THEN '11-20'
    WHEN Age <= 30 THEN '21-30'
    WHEN Age <= 60 THEN '31-60'
ELSE '60+' 
END 
```

一切正常，除非有人属于“其他”类别，然后我有一个奇怪的行为：该人被计入前一个类别。

也就是说我得到了：

```
Age     Pourcentage
11-20   33.3333
21-30   33.3333
31-60   33.3333 
```

代替 ：

```
Age     Pourcentage
11-20   33.3333
21-30   33.3333
31-60   16.6667
60+     16.6667 
```

`ELSE '60'`也不起作用，但`ELSE 'Others'`确实有效......

任何的想法 ？谢谢 ！

注意（测试数据）：`SELECT adherent_naissance FROM adherent WHERE 1`返回

```
adherent_naissance
1991-01-09
1990-03-28
1995-09-10
1964-01-10
1992-08-19
1920-02-21 
```

如果有帮助，我正在使用 MySQL 5.5.24-log。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:48:44.030

您需要将相同的 CASE 表达式添加到 GROUP BY 子句中

```
SELECT
CASE 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 10 THEN '-10' 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 20 THEN '11-20'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 30 THEN '21-30'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 60 THEN '31-60'
ELSE '60+' 
END AS Age, 
(Count(adherent_naissance)* 100 / (Select Count(*) From adherent)) as Pourcentage
FROM adherent
GROUP BY 
CASE 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 10 THEN '-10' 
WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 20 THEN '11-20'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 30 THEN '21-30'
    WHEN FLOOR(DATEDIFF(NOW(), adherent_naissance)/365.4) <= 60 THEN '31-60'
ELSE '60+' 
END 
```

[**SQLFiddle**](http://sqlfiddle.com/#!2/5f2e9/4)上的演示[](http://sqlfiddle.com/#!2/5f2e9/4)

# c# - GC.Collect() 和 GC.Collect(GC.MaxGeneration) 有什么区别？

> ID：15876691
> 
> 赞同：3
> 
> 时间：2013-04-08T10:21:28.270
> 
> 标签：c#, .net, garbage-collection

我已经看到了多个建议运行的 anwsers `GC.Collect(GC.MaxGeneration)`。
既然该方法`GC.Collect()`会收集所有现有的世代，那么两者之间有什么区别吗？

也许如果只有两代而不是三代，GC 将收集两代，并且不会尝试收集第三代，这将提高性能。但说真的，这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:32:04.867

唯一的区别是`GC.Collect()`会使用[`GCCollectionMode.Optimized`](http://msdn.microsoft.com/en-us/library/bb495757.aspx)但`GC.Collect(GC.MaxGeneration)`会使用`GCCollectionMode.Default`（至少在 .NET Framework 4.5 中）。在重载中，您也可以手动指定收集模式。

```
/// <summary>Specifies the behavior for a forced garbage collection.</summary>
public enum GCCollectionMode
{
    /// <summary>The default setting for this enumeration, which is currently <see cref="F:System.GCCollectionMode.Forced" />. </summary>
    Default,
    /// <summary>Forces the garbage collection to occur immediately.</summary>
    Forced,
    /// <summary>Allows the garbage collector to determine whether the current time is optimal to reclaim objects. </summary>
    Optimized
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:42:33.200

GC.Collect() 可能什么都不做，因为它对 GCCollectionMode 使用“优化”

MSDN on Optimized->允许垃圾收集器判断当前时间是否是回收对象的最佳时间。

GC.Collect(GC.MaxGeneration) 对 GCCollectionMode 使用“强制”

MSDN on Forced -> 强制垃圾收集立即发生。

两者都将尝试为所有世代​​回收。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:40:29.907

`GC.Collect()`使用`GCCollectionMode.Default`，所以`GC.Collect(GC.MaxGeneration)`

### 所以，和那时没有区别！

* * *

根据 MSDN

GCCollectionMode 枚举

> Default ：此枚举的默认设置，当前为 Forced。
> Forced ：强制垃圾收集立即发生。
> Optimized ：允许垃圾收集器确定当前时间是否是回收对象的最佳时间。

使用反射器：

```
[MethodImpl(MethodImplOptions.InternalCall)]
private static void nativeCollectGeneration(int generation, int mode); 

public static void Collect()
{
  GC.nativeCollectGeneration(-1, 0);
}

public static void Collect(int generation)
{
  GC.Collect(generation, GCCollectionMode.Default);
} 
```

**PS**：`0`和`GCCollectionMode.Default`是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:51:50.167

标准（系统启动）垃圾收集的行为是这样的：

1.  从 GenX 中删除所有没有根的项目（即从活动代码中引用）
2.  将所有剩余项目从 GenX 提升到 GenX+1
3.  如果 GenX+1 中没有足够的空间容纳新项目，则对 GenX+1 重复上述操作

所以，一个标准的集合可能只收集 Gen0，并将一些数据洗牌到 Gen1，然后停止。这有助于延长到达 Gen2 的对象的寿命：Gen2 的收集频率远低于 Gen0，因此到达 Gen2 的对象可能会停留一段时间。

如果对所有代强制收集，Gen2 中的对象将立即被收集。这将释放更多内存，但也会对性能产生影响。

最重要的是，任何收藏品都会将根深蒂固的物品推广到下一代。这是手动收集不好的原因之一：项目将不必要地提升到 Gen1/2，然后实际上会停留更长时间（除非您反复使用手动 GC，这只会使问题更加复杂......）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T10:55:45.713

这是 GC 类的内部代码

```
// Forces a collection of all generations from 0 through Generation.
//
public static void Collect(int generation) {
    Collect(generation, GCCollectionMode.Default);
    }

// Garbage Collect all generations.
//
[System.Security.SecuritySafeCritical]  // auto-generated
public static void Collect() {
    //-1 says to GC all generations.
    _Collect(-1, (int)GCCollectionMode.Default);
}

[System.Security.SecuritySafeCritical]  // auto-generated
public static void Collect(int generation, GCCollectionMode mode)
{
    if (generation<0)
    {
        throw new ArgumentOutOfRangeException("generation", Environment.GetResourceString("ArgumentOutOfRange_GenericPositive"));
    }
    if ((mode < GCCollectionMode.Default) || (mode > GCCollectionMode.Optimized))
    {
        throw new ArgumentOutOfRangeException(Environment.GetResourceString("ArgumentOutOfRange_Enum"));
    }
    Contract.EndContractBlock();
    _Collect(generation, (int)mode);
} 
```

在这里，您可以看到您的两个方法调用都使用两个参数调用了 Collect 方法。收集（int genration，GCCollectionMode 模式）。

# php - 在 MySQL 和 PHP 中显示一个由 ID 分配的特定列

> ID：15876692
> 
> 赞同：-3
> 
> 时间：2013-04-08T10:21:32.810
> 
> 标签：php, mysql, database, show

我有一个名为“tekst”的数据库。

有3列：

1.  id（自动增量），
2.  日期（时间戳），
3.  特雷斯克（文本）

和网站：index.html。

我想将这样的代码粘贴`<?php echo "$id1"; ?>`到 index.html 中以显示分配给某个“id”的列“treść”。

现在我确实喜欢这样：

`$w = mysql_fetch_array(mysql_query("SELECT * FROM tekst WHERE id=5"));`

`echo $w['tresc'];`

但是当我有很多记录时，它会很麻烦。

如何创建 MySQL 查询以显示我想要的内容？在一页中，我将有许多 ID。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:35:36.900

> 是的，但我想要一个 index.php 并且想要显示来自 mysql 的数据

最后，从评论中可以清楚地看到。

使用查询字符串分配变量。以这种方式处理您的脚本

```
index.php?id=1 
```

然后使用 $_GET 数组接收这个变量

```
$id = $_GET['id']; 
```

然后为 SQL 查询格式化 if

```
$id = intval($id); 
```

然后在查询中使用它

```
$sql = "SELECT tresc FROM tekst WHERE id=$id"; 
```

# c# - 实体框架中数据类型不匹配时的导航属性

> ID：15876696
> 
> 赞同：6
> 
> 时间：2013-04-08T10:21:42.723
> 
> 标签：c#, entity-framework, sql-server-2005, .net-4.5

我正在尝试将遗留数据库映射到实体框架模型。该数据库非常通用，大部分数据都存储在“对象”和“事件”表中。这些列被命名为“Date1”、“Num11”、“Text4”。数据库中没有定义明确的外键。

这是两个表的子集：

```
CREATE TABLE [Object] (
    [ObjectId] int not null identity(1,1) primary key,
    [ObjectTypeId] int,
    [Name] varchar(100)
);

CREATE TABLE [Event] (
    [EventId] int not null identity(1,1) primary key,
    [EventTypeId] int,
    [Subject] text,
    [Body] text,
    [Date1] datetime,
    [Num11] decimal(18,2)
); 
```

对于 的某些值`EventTypeID`，该`Num11`字段引用`Object`。我可以轻松地在表之间编写连接：

```
SELECT
    ev.[EventId], ev.[Subject], ev.[Body], ev.[Date1] AS [CreatedDate],
    p.[ObjectId] AS [PersonId], p.[Name] AS [PersonName]
FROM [Event] ev
LEFT JOIN [Object] p ON p.ObjectId = ev.Num11
WHERE ev.[EventTypeId] = 7
AND ev.[Date1] > '2013-04-07' 
```

在实体框架设计器中，我可以为每种类型的对象创建一个单独的实体，并适当地重命名列。当我尝试在实体之间创建导航属性时，问题就开始了，因为外键列类型并不总是与主键匹配。

SQL Server 和实体框架都不允许我在列之间创建外键引用。

**当 FK an 和 PK 数据类型不完全匹配时，如何在实体之间创建导航属性？**使我能够在 LINQ 查询中包含相关实体的东西，并希望能够在 OData 服务中公开它。

我无法对数据库中的现有表进行任何更改，但如果需要，我可以添加视图。虽然我需要能够将实体保存回数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:48:26.973

不是一个令人愉快的设计，但还有一些选择。这是你*可以*做的：

*   `Event`使用将小数转换为整数的附加列创建 1:1 视图。该属性应标记为已计算。
*   在与 的 FK 关联中使用该属性`Object`，因此`Object`具有`EventViewItems`映射到视图的导航属性（如果您喜欢）。（您必须[在 edmx 设计器中手动添加关联并调整外键字段](http://ihadthisideaonce.com/2012/01/18/manually-creating-referential-constraints-in-entity-framework-4/)）。
*   *在一个 linq 语句中读取*对象和事件，例如`db.Objects.Include(o => o.EventViewItems)`

但你不能

*   将事件添加到`db.Objects.EventViewItems`，因为您无法写入 FK 字段。
*   添加事件是`db.EventViewItems`因为没有为视图定义 InsertFunction。（除非您[将视图作为表格侵入模型中](https://stackoverflow.com/a/5640770/861716)）。

因此，您还必须`Event`在模型中包含原始对象，并使用它来创建/更新/删除 (CUD) 单个`Event`对象。

感觉有点不稳定，因为您必须注意您的步骤以免遇到运行时异常。另一方面，您将有单独的读取和 CUD 路径。将其称为 CQRS，这种设计突然变得前沿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:15:32.750

你可以试试这个。将模型中 Num11 的类型更改为整数。在 Event 的配置中，使用 xx.HasColumnType("int") 将 num11 的 databasetyp 设置为 int。

# xpages - xPage 作为欢迎页面

> ID：15876698
> 
> 赞同：1
> 
> 时间：2013-04-08T10:21:46.583
> 
> 标签：xpages, lotus-notes

我正在尝试将 xPage 设置为笔记客户端的欢迎页面并通过策略进行部署。仅发布它会打开 2 个窗口，一个是 Bookmarks.nsf 框架集，第二个是 xPage。尝试了许多不同的方法来关闭框架集，但是一些内部设置不喜欢这样，因为它是一个受欢迎的页面框架......任何想法或者如果有人做过类似的项目。

我尝试通过打开 xPage 的欢迎页面打开视图，然后在 Postopen 事件中关闭视图，但没有运气。也尝试了与 Form 相同的方法。

感谢帮助..严重卡在里面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:44:10.350

一种方法是：

1.  在客户端打开你的 xpage
2.  右键单击选项卡并为其创建一个新书签
3.  右键单击新创建的书签，然后单击“将书签设置为主页”

我不知道您是否可以通过策略来做到这一点，但如果我以交互方式进行，至少它可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:54:01.577

您可以通过添加到 ini StartupDB = 这将在每次客户端打开时加载 NSF 来通过策略进行设置。此命令不尊重强制标志，因为它默认强制执行，不要设置强制标志...

您还可以将 nsf 设置为按策略复制，以便远程用户也可以打开它。

# windows-phone-7 - 无法在 WP7 应用程序中设置 Adcontrol TestMode 属性值

> ID：15876700
> 
> 赞同：0
> 
> 时间：2013-04-08T10:21:50.007
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone-7.1.1

我已将 AdControl 控件添加到我的 windows phone 应用程序中。在 Xaml 视图设计器中，我可以看到广告预览。但是当我在手机中运行它时，我看到一个黑盒子，里面什么也没有。

我试图设置 TestMode 属性，但 AdControl 没有可用的静态或非静态方法。

我已经交叉检查了 Applicationid 和 AdControlId。添加了所有功能。

```
 <UI:AdControl x:Name="AdBox" IsAutoCollapseEnabled="True"    IsAutoRefreshEnabled="True" Visibility="Visible" Margin="-12,0,-12,0" Height = "80"  ApplicationId="ca1215264283-ba59-" AdUnitId="125679" /> 
```

这个问题有什么解决办法吗？或者我们可以忽略它并在应用程序发布后直接工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:08:20.530

我想出了这个。如果没有广告商愿意为具有正美元价值的展示出价，则不会显示任何广告。

# vhdl - 什么时候用什么类型

> ID：15876707
> 
> 赞同：0
> 
> 时间：2013-04-08T10:22:26.023
> 
> 标签：vhdl

**问题：**

1.  是否有比（关于我的情况）`signed`更合适的“超类型”？`unsigned``std_logic_vector`

2.  可以将输入定义为整数（子类型）还是将其定义为位向量更好？（整数方法是否有任何问题）

3.  我什么时候应该对实体的输入/输出使用已解决或未解决的逻辑？

    *   已解决总线驱动程序（因为“高 Z 驱动程序”），否则未解决？
    *   始终已解决，因此可以驱动/使用总线作为输入（这似乎是错误的，因为我什么时候会使用未解决的呢？）

**实际案例：**

我正在声明一个实体，并且想知道输入和输出的正确类型。假设我正在构建一个动态宽度相等。它比较两个输入的前 n 位是否相等。

实体定义将是：

```
entity comparisonDynWidth is
    generic(
        width       : positive;
        min_width   : positive;
            -- when the tools suport vhdl2008 enough
            -- reason for both signed/unsigned => std_logic inputs
        --function compareFunc (x: in std_logic_vector; y: in std_logic_vector)  return std_logic 
    );
    port (
        left, right : in  std_logic_vector(width-1 downto 0);
        widthControl: in  natural range 0 to width-min_width;
        result      : out std_logic / std_ulogic ??
    ); 
```

我选择 std_logic_vector 作为输入，因为我希望它看起来像一个通用`less than`比较器的端口，对于哪些符号很重要，哪些可以有`signed`和`unsigned`输入。因为我更容易将宽度定义为我这样做的整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:49:12.730

1.  std_logic_vector 在您的情况下是一个不错的选择（在大多数情况下，在实体中，因为它最能代表硬件情况......例如使用“U”和“Z”等）

2.  只要它不是顶级实体，就可以在实体中使用整数。在顶级实体中，建议独占使用 std_logic(_vector)。

3.  无论如何，大多数工具都会报告多驱动程序的情况……因此可以使用已解析的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:30:09.893

> 有没有比 std_logic_vector 更合适的“超类型”签名和无符号（关于我的情况）？

不确定你的意思，但你别无选择 -`signed`并且`unsigned`在标准中定义。

> 可以将输入定义为整数（子类型）还是将其定义为位向量更好？（整数方法是否有任何问题）

如果超出范围，整数将标记错误。向量 (`signed`和`unsigned`) 将环绕。哪个是“正确的”取决于您想要什么以及如果您想要使用整数编码显式环绕的感觉。

> 我什么时候应该对实体的输入/输出使用已解决或未解决的逻辑？

如果你坚持：

*   仅对顶级 IO 端口使用已解析类型（即设备的实际引脚）
*   在内部使用未解析的类型

您将能够在细化时通过详细的错误消息捕获涉及多个驱动程序的信号的错误。`X`这可能比在仿真时在波形中追踪s 更好。

如今，大多数技术内部都没有内部三态总线，因此您不能拥有多个驱动程序，因此设备内部不需要解析信号。IO 引脚（几乎？）总是具有三态驱动程序，因此使用已解析类型是合适的，并且“Z”的驱动可用于推断该行为。

# z3 - 调整 Z3 中的“简化”策略

> ID：15876712
> 
> 赞同：3
> 
> 时间：2013-04-08T10:22:33.257
> 
> 标签：z3

我有几个关于 Z3 战术的问题，其中大部分都关心`simplify`。

1.  我注意到应用后的线性不等式`simplify`经常被否定。例如`(> x y)`被转换`simplify`成 `(not (<= x y))`。理想情况下，我希望整数 [in] 等式不被否定，因此它`(not (<= x y))`被转换为`(<= y x)`. 我能保证这样的行为吗？

2.  此外，在 <、<=、>、>= 中，希望在简化公式中的所有整数谓词中仅使用一种类型的不等式，例如 <=。这可以做到吗？

3.  `:som`参数的作用是什么`simplify`？我可以看到描述说它用于将多项式置于单项形式的形式中，但也许我没有做对。您能否举一个`:som`设置为 true 和 false 的简化的不同行为的示例？

4.  我是否正确，在应用`simplify`算术表达式后总是以形式表示`a1*t1+...+an*tn`，常量在哪里`ai`，并且`ti`是不同的术语（变量、未解释的常量或函数符号）？特别是减法运算总是不会出现在结果中的情况？

5.  是否有任何可用的`ctx-solver-simplify`策略描述？从表面上看，我知道这是一个昂贵的算法，因为它使用了求解器，但是了解更多关于底层算法的信息会很有趣，这样我就可以知道我可能期望有多少求解器调用等等。也许你可以给出一个参考论文或简要介绍算法？

6.  最后，[这里](https://stackoverflow.com/questions/13802651/custom-simplifiers)提到可能会出现一个关于如何在 Z3 代码库中编写战术的教程。有吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:40:36.817

这是一个尝试回答问题 1-4 的示例（带有注释）。它也可以[在这里](http://rise4fun.com/Z3/Qb5m)在线获得。

```
(declare-const x Int)
(declare-const y Int)

;; 1\. and 2.
;; The simplifier will map strict inequalities (<, >) into non-strict ones (>=, <=)
;; Example:   x < y  ===>  not x >= y
;; As suggested by you, for integer inequalities, we can also use
;;            x < y ==>   x <= y - 1
;; This choice was made because it is convenient for solvers implemented in Z3
;; Other normal forms can be used.
;; It is possible to map everything to a single inequality. This is a straightforward modificiation
;; in the Z3 simplifier. The relevant files are src/ast/rewriter/arith_rewriter.* and src/ast/rewriter/poly_rewriter.*
(simplify (<= x y))
(simplify (< x y))
(simplify (>= x y))
(simplify (> x y))

;; 3.
;; :som stands for sum-of-monomials. It is a normal form for polynomials. 
;; It is essentially a big sum of products.
;; The simplifier applies distributivity to put a polynomial into this form.
(simplify (<= (* (+ y 2) (+ x 2)) (+ (* y y) 2)))
(simplify (<= (* (+ y 2) (+ x 2)) (+ (* y y) 2)) :som true)

;; Another relevant option is :arith-lhs. It will move all non-constant monomials to the left-hand-side.
(simplify (<= (* (+ y 2) (+ x 2)) (+ (* y y) 2)) :som true :arith-lhs true)

;; 4\. Yes, you are correct.
;; The polynomials are encoded using just * and +.
(simplify (- x y)) 
```

5) ctx-solver-simplify 在文件 src/smt/tactic/ctx-solver-simplify 中实现。* 代码可读性很强。我们可以添加跟踪消息以查看它在特定示例中的工作方式。

6) 目前还没有关于如何编写战术的教程。但是，代码库有很多示例。该目录`src/tactic/core`具有基本目录。

# web-applications - SlickUpload 不适用于 IE10

> ID：15876717
> 
> 赞同：1
> 
> 时间：2013-04-08T10:22:39.580
> 
> 标签：web-applications, internet-explorer-10, slickupload

我正在使用带有 IE 10 的 Krystalware.SlickUpload 版本 5.5.11.16112。但由于某些原因，它无法正常工作。浏览文档时，它不会进一步显示进度条。我确信这个问题是 IE10 特有的，因为它在其他浏览器甚至 IE9 中都可以工作。

有人可以提供解决方案/评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T23:15:35.457

我们使用 SlickUpload 5.x 并且[此论坛帖子](http://slickupload.com/forums/yaf_postst1648_SlickUpload-does-not-work-with-IE10.aspx)中概述的解决方案为我们解决了该问题。

简而言之，只需在任何使用 SlickUpload 的页面上包含此代码，您就可以开始了：

```
document.createElementOrg = document.createElement;
document.createElement = function(e) {
    // iframe compability
    var icf = false;
    if (/msie\s(\d+)/.test(navigator.userAgent)) {
        var v = 0;
        try {
            v = parseInt(RegExp.$1)
        } catch (ex) {}
        icf = v <= 8;
    }
    if ((!icf) && (e.indexof("<iframe name") == 0)) {
        var result = document.createElement("iframe");
        result.name = result.id = RegExp.$1;
        return result;
    }
    return document.createElementOrg(e);
}; 
```

要回答您的其他问题 - 是的，（遗憾的是）[不再支持此组件](http://slickupload.com/forums/yaf_postst1600_MUST-READ-If-youre-thinking-about-purchasing-SlickUpload.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:22:07.363

经过几天的研发，我通过以下两个步骤找到了解决方案：

1.  使用位于以下位置的 slickupload.js 文件。它将在您的代码中添加正确运行所需的 DIV。

[http://slickupload.com/download](http://slickupload.com/download)

2.  它与 iframe 相关。在创建 iframe 时，它​​也连接了它的名称，这不被 IE10 接受。请参阅以下帖子中的解决方案：

[IE9 中的无效字符 DOM 异常](https://stackoverflow.com/questions/5344029/invalid-character-dom-exception-in-ie9)

# jquery - jquery计算跨度标签上的字符

> ID：15876723
> 
> 赞同：0
> 
> 时间：2013-04-08T10:22:58.097
> 
> 标签：jquery

我可能遗漏了一些非常明显的东西，但不知何故我正在努力计算跨度标签内的字符。跨度是动态填充的，我试图获取它的长度，包括空格，以调整列的宽度。如果我只运行 text() 或 html() 我可以得到内容：

```
<span id="vlen00">someword</span>

vlenght = $('#vlen00').text();//vlenght is assigned 'someword'
vlenght = $('#vlen00').html();//this also gives me 'someword' 
```

但是当我尝试将其调整为：

```
vlenght = $('#vlen00').text().lenght;//that gives me 'undefined'
vlenght = vlenght.lenght;//that also gives me 'undefined' 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:24:14.547

将长度更改为长度。它将起作用

改变

`vlenght = $('#vlen00').text().lenght;` 到

```
vlenght = $('#vlen00').text().length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:24:22.133

您的物业名称错误 -`length`不是`lenght`

# ajax - 我们如何在 ajax 中编码多 JSON 数据响应

> ID：15876725
> 
> 赞同：0
> 
> 时间：2013-04-08T10:23:13.380
> 
> 标签：ajax, json, jquery

我对通过 ajax 加载的 json 编码信息有疑问。我将多 JSON 传递给 ajax 以显示字段值。

如何使用查询 ajax 从 json 中获取字段值。

阿贾克斯代码：

```
 ....success:function(data){
                    var TotalBuyPrice = 0;
                    var TotalItem = 0;
                    $.each(data, function(c,cart){

                        //Condition follow  1
                      var InStockQty =cart.products_qty;
                      alert(InStockQty);

                         //And also follow  2
                       var name =cart["withoutdiscount"][0]["products_name"];
                        alert(name); 

                    });
                     }... 
```

PHP代码：

这些是我对 json 响应的步骤。通过使用数组收集结果

```
 $response = array();
        $response['withoutdiscount'] = $withoutdiscount;
        $response['withdiscount'] = $withdiscount;

        echo $_GET['jsoncallback'] . '(' . json_encode($response). ');'; 
```

json回调：

```
 ({"withoutdiscount":[{"products_id":"1","products_name":"Lumia"}],
            "withdiscount":[{"products_id":"2","discount_qty":"8"},
                            {"products_id":"3","discount_qty":"1"}
                           ]
          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:23:24.057

我解决了这样的问题：使用 PHP 文件得到一个这样的响应：

```
 $response = array();
    $response['withoutdiscount'] = $withoutdiscount;
    $response['withdiscount'] = $withdiscount;

    echo $_GET['jsoncallback'] . '(' . json_encode($response). ');'; 
```

jsoncallback: //JSON 响应

```
 ({"withoutdiscount":[{"products_id":"1","products_name":"Lumia"}],
        "withdiscount":[{"products_id":"2","discount_qty":"8"},
                        {"products_id":"3","discount_qty":"1"}
                       ]
      }); 
```

使用 ajax 函数调用 json 响应，如下所示：

```
 function querySuccess(tx,results) {
            var jsonString = JSON.stringify(results);
            $.ajax({
                url:'getcart.php',
                data: {data : jsonString},
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                timeout: 5000,
                success:function(data){
                    var withdiscount=data.withdiscount;
                    var withoutdiscount=data.withoutdiscount;
                if(withdiscount!='')
                {
                    $.each(withdiscount, function(c,cart){
                       var discount_qty =cart.discount_qty;
                        alert(discount_qty);
                     );
                 }
                if(withoutdiscount!='')
                {
                    $.each(withoutdiscount, function(c,cart){ 
                       var products_name =cart.products_name;
                          alert(products_name);
                     });
                }
               }
            });
        } 
```

这和我一起工作。

注意：只有 2 个 JSON 响应通过，所以我直接给出。

# c# - 如何在车辆跟踪系统中使用 c# 在 asp.net 中生成停车报告

> ID：15876727
> 
> 赞同：1
> 
> 时间：2013-04-08T10:23:19.910
> 
> 标签：c#, php, asp.net

嗨，我正在研究项目车辆跟踪系统，我想生成停机报告，它可以在 php 和 extjs 中正常工作，但现在正在使用 C# 将项目更改为 asp.net。我有 4 个不同的查询来显示报告，但在 asp 中。 net gridview 如何绑定所有 4 个不同的查询以在带有分页的 gridview 中显示。

这是我的 PHP 代码

```
$NewID = "";
        $OldID = "";        
         //echo("Select gps_id,lat,lon,tdate,ttime,tdate_time,speed,lname from gps_data where vehicle_no = '$vno' and (CONVERT(tdate_time, DATETIME) between '$FromDate' and '$ToDate') and speed > 1 order by gps_id asc");

    $sql1 = mysql_query("Select gps_id,latitude,longtitude,get_date,get_time,get_date_time,speed,location from gps_data where device_id = '$device_id' and host_name = '". $host  ."' and (CONVERT(get_date_time, DATETIME) between '$FromDate' and '$ToDate') and speed > 1 order by gps_id asc");
    while($row = mysql_fetch_row($sql1))
    {

        $NewID = $row[0];
        //echo($OldID);
        if($OldID > 0)
        {
         // echo("Select CONVERT(tdate_time, DATETIME) from gps_data where gps_id = ". $OldID ."");
           $query = mysql_query("Select get_date_time,date_time from gps_data where gps_id = ". $OldID ." and host_name = '". $host  ."'");

           if($result = mysql_fetch_row($query))
           {
              $show_old_get_date_time = $result[0];  
              $old_get_date_time = $result[1];
              //echo($old_get_date_time);
           }

           $query1 = mysql_query("Select get_date_time,date_time from gps_data where gps_id = ". $NewID ." and host_name = '". $host  ."'");
           if($result1 = mysql_fetch_row($query1))
           {
                  $show_new_get_date_time = $result1[0];
                  $new_get_date_time      = $result1[1];
           }

        //echo("Select gps_id,lat,lon,tdate,ttime,tdate_time,speed,lname from gps_data where vehicle_no = '$vno' and gps_id > ". $OldID ." and gps_id < ". $NewID ." and (CONVERT(tdate_time, DATETIME) between '$FromDate' and '$ToDate') order by gps_id asc");
            $sql2 = mysql_query("Select gps_id,latitude,longtitude,get_date,get_time,get_date_time,speed,location from gps_data where device_id = '$device_id' and host_name = '". $host  ."' and gps_id > ". $OldID ." and gps_id < ". $NewID ." and (CONVERT(get_date_time, DATETIME) between '$FromDate' and '$ToDate') order by gps_id asc");
            if($rowA = mysql_fetch_row($sql2))
            {

                $NewLoc = parseD($rowA[7]);
                //echo("SELECT TIMEDIFF('". $new_get_date_time ."','". $old_get_date_time ."')");
                $sql3 = mysql_query("SELECT TIMEDIFF('". $new_get_date_time ."','". $old_get_date_time ."')");  
                    if($rowB = mysql_fetch_row($sql3))
                    {

                            $cnt = $cnt + 1;
                            $DTDiff = $rowB[0];

                            $strBld .= $comm."{slno:\"". $cnt ."\",get_date:\"". $rowA[3] ."\",get_date_time:\"". $show_old_get_date_time." "."-"." ". $show_new_get_date_time ."\",stoppedTm:\"". $DTDiff ."\",loc_name:\"". $NewLoc ."\",latitude:\"".$rowA[1]."\",longitude:\"".$rowA[2]."\"}";
                            $comm = ",";

                    }

            } //while($rowA = mysql_fetch_row($sql2))

        } //if($OldID > 0)

        $OldID = $row[0];   
        //echo($OldID);
    } //while($row = mysql_fetch_row($sql1)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:35:11.983

分页用于显示剩余数据。但似乎你有不同的情况。您可以使用这些案例编写查询，然后将它们合并并将此查询绑定为 gridview 的数据源。或者您可以为每种情况设置按钮或任何其他 ui 控件来更改 gridview 的数据源。

# perl - 将结构成员传递给函数时打印结构成员

> ID：15876728
> 
> 赞同：0
> 
> 时间：2013-04-08T10:23:23.800
> 
> 标签：perl

我有这个结构

```
package StrukturaStudent;
use Class::Struct;

struct Student => {
sifra => '$',
ime => '$',  
prezime => '$',
brojBodova => '$'
}; 
```

和功能

```
sub ispisiStudenta($st){
print $st->{sifra}." ". $st->{ime}." ". $st->{rezime}." ". $st->{brojBodova}."\n";
} 
```

我想在其中打印当前学生。

In another package I have an array of students and call this function as

```
StrukturaStudent->ispisiStudenta(@lista[1])."\n"; 
```

I don't get anything (only new empty line on console). But when I call this from main

```
print @lista[1]->ime; 
```

I got right what I need. So how to pass a single student from the array and print it inside function? Moreover, how can I pass the whole array and print every student in it inside a for loop?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:43:06.123

`$st->{ime}`不一样`$st->ime`。第一个在哈希引用中搜索键，第二个调用方法。

您应该始终使用带有 Class:Struct 的方法，如[文档](http://p3rl.org/Class%3a%3aStruct)中所示。此外，您不能在 Perl 中声明命名参数：

```
sub ispisiStudenta {
    my $st = shift;
    print join(' ', $st->sifra, $st->ime, $st->rezime, $st->brojBodova), "\n";
} 
```

# android - How to handle Like Unlike of events in listview similar to facebook API call android

> ID：15876732
> 
> 赞同：2
> 
> 时间：2013-04-08T10:23:36.420
> 
> 标签：android, http, listview, httpresponse

Currently I am working on a list of event similar to Facebook TimeLine in which user can like/Unlike events. I have POST/DELETE API calls for the same and Local Database Table for displaying the same.

目前，我正在根据用户 LIKE/DISLIKE 调用 API，并在服务器响应并通知适配器更改后更新数据库表，但向服务器发送请求和更新表所用的时间超过 3-4 秒，这似乎实现速度较慢/与事件不同，有没有更好的方法来处理相同的事件？类似于 FaceBook 的超快 LIKE/UNLIKE 响应？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:47:54.177

只需将视图的文本更改为喜欢/不喜欢并保留视图的列表位置，在后台一段时间后获取更改为喜欢/不喜欢的位置并获取该视图的状态，将其更新到服务器。

# c++ - `y=++y`，这个标准符合吗？[出现在微软的测试中]

> ID：15876734
> 
> 赞同：12
> 
> 时间：2013-04-08T10:23:48.607
> 
> 标签：c++, c, language-lawyer, undefined-behavior

我知道这看起来很熟悉，但它是微软招聘实习生测试中的一个问题。在我看来，这`y=++y`不符合标准，但我认为确定会更好（不确定我是否比那些在 MS 编写这些测试的人更好）。所以我在征求你的意见。您是否认为这样的表达式符合标准并且不会导致**未定义的行为**？

```
#include <stdio.h>
int main(){
    int a = 10;
    int b = 10;
    a = ++a;    //What ???
    b = b++;    //What ???
    printf("%d %d\n",a,b);
    return 0;
} 
```

`gcc`用于编译时抱怨它`-Wsequence-point`。（没有明确说明它是 C 还是 C++ 特定问题。）

但只提供了四个答案：

```
a) 10 10
b) 11 10
c) 10 11
d) 11 11 
```

虽然一个不限于只选择一个答案（所以也许我应该选择所有四个？）

好吧，在我看来，自增和赋值之间没有序列点。所以这违反了规范。不是吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:33:37.947

根据 C++11，它们都是定义明确的行为。C++11 甚至*没有*序列点，因此与序列点相关的警告显然已经过时。赋值运算符对其参数进行排序。

编辑：

虽然每个人都可以同意`i = ++i`现在是明确定义的行为，但决定`i = i++`. 直观地说，我应该将其描述为定义明确的，但标准明确指出

```
i = i++ + 1; 
```

是 UB，我看不出有`+ 1`什么不同。

简而言之，如果你想回答这个问题，你需要成为绝对不平凡的 C++11 排序规则方面的专家，我似乎不是，但答案似乎是“没有以上是因为UB”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T10:28:54.490

根据 C++03 标准，
以下两个语句都会导致**未定义的行为**：

```
a = ++a;
b = b++; 
```

正如您正确指出的那样，g++ 指出了以下警告：

> 警告：对“a”的操作可能未定义 [-Wsequence-point]

请注意，在 UB 的情况下，答案可以是 (a)、(b)、(c)、(d) 之外的任何内容。
理想情况下，测试问题中应该有一个“未定义行为”选项。但通常，准备问题的人会简单地在 XYZ 编译器中编译并提交。

这是一个相关的 SO 帖子，解释了[Undefined Behavior 和 Sequence Points](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:34:50.610

一个=++一个；b= b++; 这些操作被认为是未定义的。每个编译器都可以随心所欲。输出因考官提出问题的编译器而异。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-08T10:31:02.577

我认为是 D) 因为 ++a 表示递增 a 然后执行操作，所以它就像做 a=11。b++ 表示执行操作然后递增，因此您将分配 b=10，但随后 b 递增，使其值为 b=11。

对于纯粹主义者来说，这并不“意味着什么，然后什么”，但这就是它的行为。我对其进行了测试（使用 Visual c++ 和 g++），我的答案是正确的 a=11 和 b=11。

# jquery - 在全日历中单击“下一步”之前不会呈现事件

> ID：15876735
> 
> 赞同：1
> 
> 时间：2013-04-08T10:23:50.777
> 
> 标签：jquery, fullcalendar

我已经克隆了 AgendaWeekView 并创建了一个为期 3 天的新视图（AgendaThreeDayView）。我在视图中进行了必要的更改，添加了一个新按钮，除了一件事，一切都很好。我第一次导航到“3 天”视图时，日历上没有事件，我必须单击下一个或上一个。之后，所有事件都在此视图中呈现良好。当我单击下一个或上一个时，我在哪个视图中并不重要。我还检查了 viewDisplay 是否每次都按原样触发。

# java - 设计客户端-数据库-服务器

> ID：15876736
> 
> 赞同：0
> 
> 时间：2013-04-08T10:23:59.470
> 
> 标签：java, hibernate

我知道我的标题并不具体，但我不知道它到底叫什么。问题是我必须为大学做一个有更多人参与的项目，我们模拟团队合作环境（敏捷）。

我负责`database - applicaion communication`. 服务器部分更准确。如果是这种情况，我需要在哪里管理并发，以及我将要找出的所有其他事情。

我想要一些关于应用程序的这一部分、最佳实践和东西的提示或教程。我们决定采用的技术`java`是`hibernate`. 当涉及到类似的东西时，我熟悉 ado.net 基础知识和 ruby​​ on rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:34:50.543

Hibernate 的人已经写了一个[入门指南](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/)，我建议你从那开始。

# solr - 在 solr 中运行完全导入时出现异常

> ID：15876738
> 
> 赞同：1
> 
> 时间：2013-04-08T10:24:08.190
> 
> 标签：solr

我正在尝试在 SOLR 中运行简单的数据库导入。我已经走了很长一段路。没有问题是我跑步的时候

```
http://127.0.0.1:8983/solr/db/dataimport?command=full-import. 
```

我得到那个错误：

```
Exception while processing: id document : SolrInputDocument[]:org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select definer from event Processing Document # 1 
```

在我的 solrconfig.xml 我有：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
<str name="config">data-config.xml</str>
</lst>
</requestHandler> 
```

在 data-config.xml 我有：

```
 <dataConfig>

 <dataSource name="mysql" 
driver="com.mysql.jdbc.Driver"
url="jdbc:mysql://127.0.0.1/mysql"
user="testuser" password="testpass" 
batchSize="-1" /> 
   <document>
     <entity name="id" 
      query="select definer from event">
        <field column="definer" name="title"/>
      </entity>
   </document>
 </dataConfig> 
```

在我的日志文件中，我看到：

```
 SEVERE: Exception while processing: id document : SolrInputDocument[]:org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select definer from event Processing Document # 1
at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:71)
at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:253)
at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:210)
at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:38)
at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:243)
at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:465)
at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:404)
at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:319)
at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:227)
at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:422)
at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:487)
at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:468)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Access denied for user 'testuser'@'localhost' to database 'mysql'
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:925)
at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1704)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1250)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2483)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2516)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2301)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:161)
at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:127)
at org.apache.solr.handler.dataimport.JdbcDataSource.getConnection(JdbcDataSource.java:366)
at org.apache.solr.handler.dataimport.JdbcDataSource.access$200(JdbcDataSource.java:38)
at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:240)
... 12 more 
```

我从这里尝试了很多东西：

[DataImportHandlerException：无法执行查询](https://stackoverflow.com/questions/9011480/dataimporthandlerexception-unable-to-execute-query)

# xpages - 带有计算的 CSS 文件的 XPage

> ID：15876739
> 
> 赞同：0
> 
> 时间：2013-04-08T10:24:10.110
> 
> 标签：xpages, lotus-notes

我正在尝试为用户实现一个选项，以便在前端设置自己的 CSS。

我创建了一个这样的 XPage：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" rendered="false">
<xp:this.afterRenderResponse><![CDATA[#{javascript:

var externalContext = facesContext.getExternalContext();
var writer = facesContext.getResponseWriter();
var response = externalContext.getResponse();

response.setContentType("text/css");

response.setHeader("Cache-Control", "no-cache");
var param = context.getUrlParameter("myParam");
//HERE I WILL READ THE USER FIELD
writer.write("body{font-size:100pt;}");
writer.endDocument();

}]]>
  </xp:this.afterRenderResponse>
</xp:view> 
```

如果我尝试像这样实现 CSS (XPage)

```
<xp:styleSheet href="/myCssXPages.xsp"></xp:styleSheet> 
```

一切正常，直到我将属性设置`xsp.resources.aggregate`为`true`. 如果我尝试像这样实现文件：

```
<xp:linkResource type="text/css" loaded="true" href="./myCssXPages.xsp">
<xp:this.attrs>
<xp:attr name="rel" value="stylesheet" loaded="true"></xp:attr>
</xp:this.attrs>
</xp:linkResource> 
```

它可以工作，因为现在每个 CSS 文件都将被聚合，除了这个文件，但是顺序是错误的。这个文件总是在加载聚合文件之前加载，但我需要这个文件在最后一个位置。

是否有任何解决方案来设置资源的顺序，或者为什么我不能将 XPage 用作具有聚合 true 的 CSS 资源？还是有另一种解决方案来实现这样的功能？

更新

用户创建了一个设置文档，其中有一个文本字段。所以他会将他的css作为字符串保存在文档中。

我还创建了一些默认的 css 文件资源。但是当用户设置自己的 css 配置时，这将覆盖默认文件资源中的内容。

我不能使用主题，因为在实现聚合 css 文件之前也实现了主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:55:43.017

我不太确定我是否真的了解您的用例。但我的第一个想法是使用 Xpages 主题，您可以在资源节点中加载特定的 css 文件，可能使用适当的渲染属性设置。

作为参考，请查看标准讨论模板如何使用各种主题，每个主题都使用自己的一组样式表资源。

如果这不是您的想法，您必须告诉我们更多关于 hwo 以及您的用户何时应该能够选择他们自己的 css，以及应该在哪里创建和存储这些特定 css 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:06:24.080

您可以使用 CSJS 脚本加载 CSS 并将其附加到 HTML 头部：

```
<xp:scriptBlock id="scriptBlockCss">
   <xp:this.value><![CDATA[
      function loadCss(url) {
         var link = document.createElement("link");
         link.type = "text/css";
         link.rel = "stylesheet";
         link.href = url;
         document.getElementsByTagName("head")[0].appendChild(link);
      }
      loadCss( '/yourDB.nsf/myCssXPages.xsp' );
    ]]></xp:this.value>
</xp:scriptBlock> 
```

*[从http://requirejs.org/docs/faq-advanced.html#css](http://requirejs.org/docs/faq-advanced.html#css)无耻地复制代码*

# regex - 正则表达式用逗号和 E/e 解析十进制数

> ID：15876744
> 
> 赞同：0
> 
> 时间：2013-04-08T10:24:20.800
> 
> 标签：regex

我正在尝试编写正则表达式，以便它对以下所有可能性返回 true

```
1.2E3
12.22e32
+1.2
1,222
3,222
+3,222E23
3.2E2,333 
```

如果逗号后有 3 位数字，则逗号有效。我有返回的正则表达式可能适用于 E/e 和小数点

```
[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)? 
```

我也有下面的正则表达式，它适用于逗号。

```
^(\d?\d?\d(,\d\d\d)*|\d+)(\.\d\d)?$ 
```

上面 regex 的第一件事，我不明白它是如何工作的。我知道 ^ 用于否定表达式。我理解其余部分，但为什么它必须否定它？

我已经尝试将两者结合起来完成我的工作。这是我的尝试（它们不适用于逗号）

```
"[-+]?[0-9]*(,[0-9][0-9][0-9])*\\.?[0-9]+([eE][-+]?[0-9]+)?"

"/[1-9](?:\\d{0,2})(?:,\\d{3})*(?:\\.\\d*[1-9]+([eE][-+]?[0-9]+)?)?|0?\\.\\d*[1-9]+([eE][-+]?[0-9]+)?|0/" 
```

有人可以帮我解决这个问题。这似乎让我头疼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:36:41.933

我假设您不允许没有逗号的数字。除非写为 123,456，否则 123456 是无效的。鉴于该假设，此正则表达式将起作用：

```
^[+-]?\d{1,3}((\.\d{1,3})?|(,\d{3})*)([eE]\d{1,3}(,\d{3})*)?$ 
```

您可以在[debuggex](http://www.debuggex.com/?re=%5E%5B%2b-%5D?%5Cd%7B1,3%7D%28%28%5C.%5Cd%7B1,3%7D%29?%7C%28,%5Cd%7B3%7D%29%2a%29%28%5BeE%5D%5Cd%7B1,3%7D%28,%5Cd%7B3%7D%29%2a%29?%24&flags=m&str=1.2E3%0A12.22e32%0A%2b1.2%0A1,222%0A3,222,312%0A%2b3,222,123E23,312%0A3.2E2,333)上查看它如何工作的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:30:57.437

这有效：

```
/^[+-]?[\d]{1,3}((\.[\d]{1,3})?|(,[\d]{3})*)([eE][\d]{1,3}(,[\d]{3})*)?$/ 
```

请注意，这将有更优雅的正则表达式。

干杯。

# .net - “按原样”序列化属性 XML 内容

> ID：15876745
> 
> 赞同：0
> 
> 时间：2013-04-08T10:24:21.550
> 
> 标签：.net, vb.net, serialization, xml-serialization

有些事情我现在不知道如何处理。我用 XML 序列化一个对象，需要“按原样”将属性内容序列化为 XML 结构。默认情况下，系统对实体进行“编码（&, <...），但我需要 xml 树。

（样本）

将 tmp 调暗为 myClass

tmp.Value = "这是<b>粗体</b>"

'序列化的字符串是

......<value>这是<b>粗体</b></value>

'而我需要的是

<value>这是<b>粗体</b></value>

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:26:29.327

您可以将元素数据/内容包装在一个[`<![CDATA[]]>`](http://en.wikipedia.org/wiki/CDATA)块中以从字面上维护它：

> 在 XML 文档或外部解析实体中，CDATA 部分是元素内容的一部分，被标记为解析器仅将其解释为字符数据，而不是标记。

# ios - iphone 5 视网膜显示屏

> ID：15876749
> 
> 赞同：0
> 
> 时间：2013-04-08T10:24:26.383
> 
> 标签：ios, iphone

我对 iOS 完全陌生，我正在开发一个与 iPhone 5 兼容的应用程序，我还想应用背景图像来查看我的问题是我是否需要两个不同尺寸的不同图像？？？？

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone 4S background view
    }
    if(result.height == 568)
    {
        // iPhone background image

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:52:40.570

假设你有**background.png**作为应用程序背景，现在为了支持视网膜设备，你应该有一个完全相同的 background.png 大小，它将作为**background@2x.png**添加到你的项目文件夹中。正常或视网膜图像的选择将由 iOS 本身根据您使用的设备处理！

好的，现在对于高度不等于 iPhone 3G、4、4S 的 iPhone 5 设备，您需要 640(width)*1136(height) 的 background.png，因为 iPhone 5***仅支持视网膜***图像。为此，您需要包含`background-568h@2x.png`以将其与其他文件区分开来。

启动画面的一个例子，

> > Default.png --- 普通设备，iPhone 3G
> > 
> > Default@2x.png --- Retina 设备，> iPhone 3G
> > 
> > Default-568h@2x.png --- 仅限 Retina 设备，> iPhone 4S

它会自动选择特定的启动画面！

# html - 引导程序，我如何保持我的容器全宽屏幕

> ID：15876750
> 
> 赞同：1
> 
> 时间：2013-04-08T10:24:30.827
> 
> 标签：html, css, twitter-bootstrap

我有以下代码，无论屏幕大小如何，导航栏都保持全宽......好！但是下面的宽度变小了：708，我只希望它也是 100%。

```
 <div class="navbar navbar-static-top" id="navigation">
        <div class="navbar-inner">
        <div class="container-fluid">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#"><img style="height:20px; padding: 0px; margin: 0px;" src="<?php echo Site::$imageFolder; ?>logo.png" alt="logo" /></a>
            <div class="nav-collapse collapse">
            <ul class="nav pull-right topRightIcons">
                <li class="active"><a href="#"><i class="icon-user icon-white"></i></a></li>
                <li><a href="#about"><i class="icon-eject icon-white"></i></a></li>
            </ul>
            </div><!--/.nav-collapse -->
        </div>
        </div>
    </div>
    <!-- THIS ONE HERE -->
    <div class="row-fluid" id="topBar">
        <div class="span12">         
            <p class="nav-text pull-right"><img src="http://placehold.it/15x15" alt="Your company logo"> Welcome ClientName</p>
        </div>
    </div> 
```

> `#topBar is purely for colour, as is #navigation`

![在此处输入图像描述](https://i.stack.imgur.com/ZEwUk.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:34:02.927

您需要覆盖媒体查询。创建一个 custom.css (any-name.css)。在其中添加此代码。

```
@media (max-width: 767px)
{
    body {
        padding-right: 0px;
        padding-left: 0px;
    }
} 
```

现在它应该将容器粘贴到浏览器宽度。

**重要提示**- 切勿对现有样式表进行任何更改。改为覆盖它:-)

# javascript - 在 Telerik MVC 中使用客户端传递参数

> ID：15876751
> 
> 赞同：2
> 
> 时间：2013-04-08T10:24:35.017
> 
> 标签：javascript, asp.net-mvc, razor, telerik-mvc

我正在使用 Telerik MVC 开发一些应用程序。我想从客户端传递参数。有什么办法吗？

这是我的 rad 窗口代码

```
@{ Html.Telerik().Window()
    .Name("NewsWindow")
    .Title("Edit Here")
    .Draggable(true)
    .Scrollable(true)
    .Resizable(resizing => resizing
    .Enabled(true))
    .LoadContentFrom("News/NewsEditor")
    .Modal(true)
    .Buttons(b => b.Refresh().Close())
    .Width(600)
    .Height(650)
    .Visible(false)
    .Render(); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-17T10:10:05.553

消除

```
.LoadContentFrom("News/NewsEditor") 
```

添加包含以下代码的函数并将其绑定到所需的事件。

```
$("#NewsWindow")
    .data("kendoWindow")
    .refresh({
        url: baseURL + "News/NewsEditor",
        data: { argumentName: argumentValue }
    })
    .open(); 
```

# javascript - 无限循环滑块概念

> ID：15876754
> 
> 赞同：36
> 
> 时间：2013-04-08T10:24:44.783
> 
> 标签：javascript, jquery, html, css

我想知道使用 JavaScript/jQuery 为网站构建 Infinity-Image-Loop-Slider 的最佳（良好可读代码、害虫实践代码、可重用性）概念是什么？我不知道如何对幻灯片进行编码，但什么蓝图符合上述要求。我的问题的主要焦点是如何排列图片以获得无限循环滑块的印象。

通过查看来自不同滑块的代码，我遇到了两种解决方案：

- 每次显示下一张/上一张图像时更改所有图像的 z-Index。

- 更改图像在 DOM 中的位置。

但是检查和理解其他人的代码非常耗时 - 这就是我问这个问题的原因:-)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-08T10:53:12.753

**tl;dr** - JSBin 示例：http: [//jsbin.com/ufoceq/8/](http://jsbin.com/ufoceq/8/)

* * *

一种无需太多努力即可创建无限图像滑块的简单方法如下：为了简单起见，假设您有`<n>`要在循环中滑动的图像，以便在`n`^(第 th)图像之后可视化的是`1`^(st)（和反之亦然）。

这个想法是创建第一个和最后一个图像的克隆，以便

*   最后一个图像的克隆在第一个图像之前添加；
*   第一个图像的克隆附加在最后一个图像之后。

无论您的图像数量是多少，您最多只需要附加 2 个克隆元素。

再次为简单起见，假设所有图像都是`100px`宽的，并且它们被包裹在一个容器中，您可以将其左/右移动到一个带有`overflow: hidden`. 然后，所有图像都可以轻松地与容器对齐`display: inline-block`并`white-space: nowrap`设置在容器上（`flexbox`现在更容易了）。

对于`n = 4`DOM 结构将是这样的：

```
offset(px)     0       100     200     300     400     500
images         |   4c   |   1   |   2   |   3   |   4   |   1c

/*                 ^^                                       ^^
       [ Clone of the last image ]              [ Clone of the 1st image ]
*/ 
```

一开始，您的容器将被定位`left: -100px`（`margin-left: -100px` [或者甚至更好（出于性能问题）](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/) `transform: translateX(-100px)`），因此滑块可以显示第一张图像。要从一个图像切换到另一个图像，您需要在您之前选择的相同属性上应用一个 javascript 动画。

当您的滑块当前位于第 4^个图像时，您必须从 image 切换`4`到`1c`，因此想法是在动画结束时执行回调，很快将您的滑块包装重新定位在真正的第 1 个^(图像)偏移量（例如，您设置`left: -100px`到容器）

当您的滑块当前位于第一个元素上时，这类似于^：要显示上一个图像，您只需要从图像执行动画`1`，`4c`当动画完成时，您只需移动容器，使滑块立即定位在 4 ^(th)图像偏移量（例如，您设置`left: -400px`为容器）。

* * *

您可以在上面的小提琴上看到效果：这是`js/jquery`我使用的最小代码（当然代码甚至可以优化，因此项目的宽度不会硬编码到脚本中）

```
$(function() {

  var gallery = $('#gallery ul'),
      items   = gallery.find('li'),
      len     = items.length,
      current = 1,  /* the item we're currently looking */

      first   = items.filter(':first'),
      last    = items.filter(':last'),

      triggers = $('button');

  /* 1\. Cloning first and last item */
  first.before(last.clone(true)); 
  last.after(first.clone(true)); 

  /* 2\. Set button handlers */
  triggers.on('click', function() {

    var cycle, delta;

    if (gallery.is(':not(:animated)')) {

        cycle = false;
        delta = (this.id === "prev")? -1 : 1;
        /* in the example buttons have id "prev" or "next" */  

        gallery.animate({ left: "+=" + (-100 * delta) }, function() {

            current += delta;

            /** 
             * we're cycling the slider when the the value of "current" 
             * variable (after increment/decrement) is 0 or when it exceeds
             * the initial gallery length
             */          
            cycle = (current === 0 || current > len);

            if (cycle) {
                /* we switched from image 1 to 4-cloned or 
                   from image 4 to 1-cloned */
                current = (current === 0)? len : 1; 
                gallery.css({left:  -100 * current });
            }
        });   
     }

  });
}); 
```

* * *

如前所述，这个解决方案不需要太多的努力和谈论性能，将这种方法与没有循环的普通滑块进行比较，它只需要在滑块初始化时进行两次额外的 DOM 插入和一些（相当微不足道的）额外逻辑管理向后/向前循环。

这是另一个同时看到两个元素的示例：在这种情况下，您需要克隆更多元素并对逻辑进行一些简单的更改

[https://codepen.io/fcalderan/pen/bGbjZdz](https://codepen.io/fcalderan/pen/bGbjZdz)

我不知道是否存在更简单或更好的方法，但无论如何希望这会有所帮助。

**注意**：如果您还需要一个响应式画廊，也许[这个答案](https://stackoverflow.com/a/15920259/1098851)也可能有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-24T12:40:08.617

我刚刚创建了项目滑块：检查一下： [https ://github.com/lingtalfi/jItemSlider/blob/master/README.md](https://github.com/lingtalfi/jItemSlider/blob/master/README.md)

600行代码，或许你可以简单浏览一下。

其背后的想法受到 netflix 滑块的启发（截至 2016 年 2 月 24 日）。

基本上，它使用 css 转换翻译，因为这些是浏览器中最快/最流畅的。

[http://eng.wealthfront.com/2015/05/19/performant-css-animations/](http://eng.wealthfront.com/2015/05/19/performant-css-animations/)

现在滑动运动背后的基本概念是，您只显示当前可见切片，但左侧还有一个不可见切片，右侧还有另一个不可见切片。

而且，你还有两个额外的物品，每边一个，所以你的物品看起来像这样：

上一个项目 - 上一个额外项目 - 主要项目 - 下一个额外项目 - 下一个项目

只有主要项目是可见的。额外的项目是部分可见的。上一个和下一个项目是不可见的。

更多细节在这里： [https ://github.com/lingtalfi/jItemSlider/blob/master/doc/conception.md](https://github.com/lingtalfi/jItemSlider/blob/master/doc/conception.md)

现在，当您向右滑动时（例如），您基本上将更多项目附加到右侧，然后从左侧删除这些项目。

这种技术是迄今为止我遇到的最棒的技术，因为您不需要处理一长串项目（使用克隆而不删除不可见项目），这会使您的动画变慢。

注意：我第一次尝试这个滑块实际上是克隆而不删除，它可以工作，但我不喜欢它： [https ://github.com/lingtalfi/jInfiniteSlider](https://github.com/lingtalfi/jInfiniteSlider)

此外，它是基于项目的（而不是基于像素的），最终，这就是用户所期望的，因为一切总是对齐的，因为它应该是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T15:43:31.123

非常感谢这篇文章！我已经更新并使用了上面的代码。我希望这对每个人都有帮助。可怜的开发商。

```
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Directive slider</title>
    <style>
        /* 四联切换焦点图 */
        .slides-wrapper{ position: relative;  width: 100%;  margin: 10px 0; }
        .gallery { position: relative;  width: 1200px;  height: 180px;  overflow:hidden;  }
        .gallery ul {  font-size: 0;  white-space: nowrap;  position: absolute;  top: 0;  left: -1200px;  margin: 0; padding: 0;  }
        .gallery li {  display: inline-block;  vertical-align: top;  width: 1200px;  height: 180px;  white-space: normal;  }
        .gallery li img{  width: 298px;  height:180px;  padding: 1px;  }
        .gallery .arrow { background: url(/shop/templates/default/images/home_bg.png) no-repeat; background-size: 150px 223px; width: 35px; height: 70px; position: absolute; z-index: 2; top: 50px; cursor: pointer; opacity: 0;}
        .gallery .prev { background-position: 1px -92px; left: 0;}
        .gallery .next { background-position: -30px -92px; right: 0px;}
    </style>
    <style type="text/css">
        .demo_wrapper{
            margin: 0 auto;
            width: 1200px;
        }
        .demo_wrapper .title{
            text-align: center;
        }
    </style>
</head>
<body>
<div class="demo_wrapper">
    <div class="title">
        <h1>Directive slider (Published by fenmingyu)</h1>
    </div>
    <!-- demo content -->
    <div class="slides-wrapper">
        <div class="gallery" id="top_sale_gallery">
            <ul>
                <li>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-1.jpg?234" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-2.jpg?752" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-3.jpg?320" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-4.jpg?365" alt=""></a>
                </li>
                <li>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-1.jpg?852" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-2.jpg?746" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-3.jpg?525" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-4.jpg?550" alt=""></a>
                </li>
            </ul>
            <div class='arrow prev'></div>
            <div class='arrow next'></div>
        </div>
        <div class="gallery" id="top_goods_gallery">
            <ul>
                <li>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-3-1.jpg?793" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-3-2.jpg?180" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-3-3.jpg?550" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-3-4.jpg?851" alt=""></a>
                </li>
                <li>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-1.jpg?234" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-2.jpg?752" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-3.jpg?320" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-1-4.jpg?365" alt=""></a>
                </li>
                <li>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-1.jpg?852" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-2.jpg?746" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-3.jpg?525" alt=""></a>
                    <a href="" target="_blank" title="" style="opacity: 1;"><img src="http://imgserv.5thmedia.cn/upload_test/shop/editor/web-102-104-2-4.jpg?550" alt=""></a>
                </li>
            </ul>
            <div class='arrow prev'></div>
            <div class='arrow next'></div>
        </div>
        <div style="clear: both;"></div>
    </div>
</div>

</body>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    $(function() {
        $.fn.gallery = function(settings) {
            var defaults = {
                time: 3000,
                direction:1
            };
            var settings = $.extend(defaults, settings);
            var gallery_wrapper = $(this),
                gallery = gallery_wrapper.find('ul'),
                items   = gallery.find('li'),
                len     = items.length,
                current = 1,  /* the current item we're looking */
                first   = items.filter(':first'),
                last    = items.filter(':last'),
                w = gallery.find('li').width(),
                triggers = gallery_wrapper.find('.arrow');
            var show_slide = function(direction,w){
                gallery.animate({ left: "+=" + (-w * direction) }, function() {

                    current += direction;

                    /**
                     * we're cycling the slider when the the value of "current"
                     * variable (after increment/decrement) is 0 or when it exceeds
                     * the initial gallery length
                     */
                    cycle = !!(current === 0 || current > len);

                    if (cycle) {
                        /* we switched from image 1 to 4-cloned or
                         from image 4 to 1-cloned */
                        current = (current === 0)? len : 1;
                        gallery.css({left:  -w * current });
                    }
                });
            };
            var picTimer = setInterval(function() {
                        show_slide(settings.direction,w);
                    },
                    settings.time);
            return this.each(function(){

                /* 1\. Cloning first and last item */
                first.before(last.clone(true));
                last.after(first.clone(true));
                /* 2\. Set button handlers */
                triggers.on('click', function() {
                    if (gallery.is(':not(:animated)')) {

                        var cycle = false;
                        settings.direction = ($(this).hasClass('prev'))? -1 : 1;
                        /* in the example buttons have id "prev" or "next" */
                        show_slide(settings.direction,w);
                    }
                    clearInterval(picTimer);
                    picTimer = setInterval(function() {
                                show_slide(settings.direction,w);
                            },
                            settings.time);
                });
                /* hover show arrows*/
                show_slide(settings.direction,w);

                gallery_wrapper.hover(function() {
                    $(this).find(".arrow").css("opacity", 0.0).stop(true, false).animate({
                                "opacity": "0.3"
                            },
                            300);
                },function(){
                    $(this).find(".arrow").css("opacity", 0.3).stop(true, false).animate({
                                "opacity": "0"
                            },
                            300);
                });
            });
        };
        $('#top_goods_gallery.gallery').gallery();
        $('#top_sale_gallery.gallery').gallery({
            time: 5000,
            direction:-1
        });
    });
</script>
</html>
```

te 并在我的项目中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-13T20:33:38.523

**香草Javascript！无克隆技术，getElementsByClassName 来拯救**

document.getElementsByClassName 选择是一个实时集合；与 querySelector 方法不同，DOM 中的任何更改都会在存储的变量中更新。

在这种技术中，如果我们在右击时到达最后一张幻灯片，我们只需将第一张幻灯片移到末尾，或者当我们在左击时到达第一张幻灯片时，我们将最后一张幻灯片移到开头。此处不需要创建克隆。getElementsByClassName 方法为我们提供了一个实时的 HTML 集合，当我们在 DOM 中进行更改时，可以使用该集合进行更新。（在这种情况下，改变 div 的顺序）

这是我的[GitHub 存储库](https://github.com/dibakash/infinity-looping-rotating-slider)

```
// slider
const slides = document.getElementsByClassName("slide"); // this selection is a live collection; any changes in DOM is updated in the variable unlike querySelectors
const btnLeft = document.querySelector(`.btn-left`);
const btnRight = document.querySelector(`.btn-right`);

let currentSlideIndex = 0;
let lastSlideIndex = slides.length - 1;

// go to a slide;
function goToSlide(slideIndex) {
    [...slides].forEach((s, i) => {
        s.style.transform = `translateX(${100 * (i - slideIndex)}%)`
    })
    currentSlideIndex = slideIndex;
}
goToSlide(currentSlideIndex);

// make ready the next slide if current slide is the first or the last slide
function readyNextSlide() {
    // if currentSlide is the last slide, shift the first slide to the end
    if (currentSlideIndex === lastSlideIndex) {
        slides[lastSlideIndex].insertAdjacentElement("afterend", slides[0]);
        slides[lastSlideIndex].style.transform = `translateX(${100}%)`;
        currentSlideIndex--; //this is because current slide is now the second last slide
    }
    // if currentSlide is the first slide, shift the last slide to the beginning
    if (currentSlideIndex === 0) {
        slides[0].insertAdjacentElement("beforebegin", slides[lastSlideIndex]);
        slides[0].style.transform = `translateX(-${100}%)`;
        currentSlideIndex++; //this is because current slide is now the second slide
    }
}

// put the last slide in the beginning; ('if' condition is not necessary but providing if condition is future proof if user sets the initial slide to be shown as the last slide )
if (currentSlideIndex === lastSlideIndex || currentSlideIndex === 0) readyNextSlide();

// shift all slides left or right based on direction provided
function shiftSlides(direction) {
    direction ? currentSlideIndex++ : currentSlideIndex--
    if (currentSlideIndex === lastSlideIndex || currentSlideIndex === 0) readyNextSlide();
    goToSlide(currentSlideIndex);
}

//button click events
btnRight.addEventListener("click", shiftSlides.bind(null, 1));
btnLeft.addEventListener("click", shiftSlides.bind(null, 0));
```

```
body {
  display: grid;
  height: 100vh;
  width: 100vw;
  align-items: center;
  align-content: center;
  justify-content: center;
}

.slider {
  position: relative;
  width: 600px;
  height: 300px;
  transform: scale(0.8);
  overflow: hidden; /* remove overflow to see what's going on*/
}

.slide {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 1s;
}

.slide b {
  position: absolute;
  font-size: 10em;
  color: black;
  opacity: 0.6;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.s1 {
  background-color: cornflowerblue;
}

.s2 {
  background-color: bisque;
}

.s3 {
  background-color: coral;
}

.s4 {
  background-color: thistle;
}

.btn {
  position: absolute;
  top: 50%;
  z-index: 10;
  border: none;
  background: crimson;
  font-family: inherit;
  color: white;
  height: 5.5rem;
  width: 5.5rem;
  font-size: 3.25rem;
  cursor: pointer;
}

.btn-left {
  left: 6%;
  transform: translate(-50%, -50%);
}

.btn-right {
  right: 6%;
  transform: translate(50%, -50%);
}
```

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Infinity Looping Rotating slider</title>
        <link rel="stylesheet" href="slider.css">
        <script src="slider.js" defer></script>
    </head>
    <body>
        <div class="slider">
            <div class="slide s1"><b>1</b></div>
            <div class="slide s2"><b>2</b></div>
            <div class="slide s3"><b>3</b></div>
            <div class="slide s4"><b>4</b></div>

            <button class="btn btn-left">&larr;</button>
            <button class="btn btn-right">&rarr;</button>
        </div>
        <p>
            <b>
                This is my response to a questing in <a href="https://stackoverflow.com/a/70340585/6216765">StackOverflow</a> about infinity loop slider.<br>
                My github repo is <a href="https://github.com/dibakash/infinity-looping-rotating-slider">Infinity loop Slider by Dibakash</a>
            </b>
        </p>

    </body>
</html>
```

# database - Zend 2 框架中的多对多关系

> ID：15876755
> 
> 赞同：1
> 
> 时间：2013-04-08T10:24:50.400
> 
> 标签：database, join, many-to-many, zend-framework2

我使用 Zend 2 框架来构建我的 Web 应用程序。我通过本教程实现了我的数据库表模型：http: [//framework.zend.com/manual/2.1/en/user-guide/database-and-models.html](http://framework.zend.com/manual/2.1/en/user-guide/database-and-models.html)

我的数据库中的两个模型之间存在多对多关系。为了从他们那里获取数据，我用谷歌搜索并找到了这个链接： http: [//mattmccormick.ca/2010/04/24/how-to-easily-create-models-and-table-relationships-in-zend-framework/](http://mattmccormick.ca/2010/04/24/how-to-easily-create-models-and-table-relationships-in-zend-framework/)

问题是所有表模型都从`Zend_Db_Table_Abstract`示例中扩展。我不知道如何从模型中获取数据。

我有一个包含投票的表，每个投票都有一个唯一的哈希 id。每个投票也有标签。因此，我定义了一个`tags`包含所有可用标签的表，以及一个`voting_tag_map`映射所有多对多关系的表。

到目前为止，我尝试过的是以下内容，这是我`VotingTable`班上的代码：

```
public function getTagsByVoting($votingHash){
    $select = $this->tableGateway->getSql()->select();
    $select->from(array('v' => 'voting'))
           ->join('voting_tag_map', 'v.voting_id=voting_tag_map.voting_id')
           ->join('tags', 'voting_tag_map.tag_id=tags.tag_id');
    $resultSet = $this->tableGateway->selectWith($select);
    return $resultSet;
} 
```

然后它说：

```
Since this object was created with a table and/or schema in the constructor, it is read only. 
```

那是因为 from() 方法。如果我删除 from() 方法，它会说：

```
Statement could not be executed 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:00:36.510

```
Since this object was created with a table and/or schema in the constructor, it is read only. 
```

这个错误是因为你试图在 from 子句中设置表名，但它已经在 TableGateway 的构造函数中设置了，一旦设置就无法更改。

如果你真的需要这样做，那么你可以自己扩展 AbstractTableGateway 然后你不必向构造函数添加字符串表名，但你真的不需要在主表上使用别名......

注释掉 from() 方法时出现的 SQL 错误是由于您在联接中引用了投票表，因为它是别名“v”，当您不使用别名 v 时，请尝试将其更改为 'voting.XXX '来自'v.XXX'

# winforms - 使用 System.Media.SoundPlayer.PlaySync() 和 AxWindowsMediaPlayer 并行播放声音

> ID：15876760
> 
> 赞同：3
> 
> 时间：2013-04-08T10:25:11.693
> 
> 标签：winforms, c#-4.0, axmediaplayer

我创建了一个 WinForm 应用程序，其中包含一个 AxWMPLib.AxMediaPlayer，我在其中播放一些视频。我还必须在不同的线程中播放一些其他自定义声音。为此，我使用了 System.Media.SoundPlayer.PlaySync()。该线程循环播放几个声音文件。问题是当我暂停/停止视频时，按钮事件的声音播放得很好。但是当视频运行时，有时会跳过一些声音文件。它是随机发生的。任何人都可以对这个问题以及如何解决它给出一些解释。我的意思是我怎么能同时播放声音和视频。

视频在 UI 线程中播放，其他声音在不同线程中播放。请查看以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using ElectroQ;
using ElectroQServer1.Entities;
using WMPLib;
using System.Media;
using System.Windows.Media;

namespace ElectroQServer1
{
    public partial class Form1 : Form
    {
        Thread dbListenerThread;
        IWMPPlaylist playlist;

        //string[] tokenNumber = { "A001", "B002", "C003", "D004","E005", "F006", "G007","HAMB" };
        //string[] counterNumber = { "01", "02", "03", "04", "05", "06", "07", "MB" };
        public Form1()
        {
            InitializeComponent();
            //ResizeRedraw = true;
            this.SetStyle(System.Windows.Forms.ControlStyles.DoubleBuffer, true);
            this.WindowState = FormWindowState.Maximized;
            //this.FormBorderStyle = FormBorderStyle.None;
            //this.TopMost = true;

            dbListenerThread = new Thread(RefreshQueueBoard);
            dbListenerThread.Start();

        }
        /// <summary>
        /// This method is used to prevent the flickering of the window.
        /// </summary>
        protected override CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;
                cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
                return cp;
            }
        } 
        public void RefreshQueueBoard()
        {
            //Thread.Sleep(000);
            while (true)
            {
                List<QueueData> lstQData = DA.GetAllQueueData(" where service_status_id = 2 ");
                printToken(lstQData);
                printCounter(lstQData);

                playSound(lstQData);
                Thread.Sleep(1000);
            }
        }

        public void playSound(List<QueueData> lstQData)
        {
            foreach (QueueData qData in lstQData)
            {
                if (!qData.SoundPlayed)
                {
                    string strSoundFile;
                    PlaySoundFIle(@"Sounds/TN.WAV");
                    foreach (char c in qData.ServiceQueueSerial)
                    {
                        strSoundFile = string.Format(@"Sounds/{0}.WAV", c);
                        PlaySoundFIle(strSoundFile);
                    }
                    PlaySoundFIle(@"Sounds/CN.WAV");
                    foreach (char c in qData.ServiceCounterID)
                    {
                        strSoundFile = string.Format(@"Sounds/{0}.WAV", c);
                        PlaySoundFIle(strSoundFile);
                    }
                    string strUpdateQuery = string.Format("UPDATE electro_queue SET sound_played = 1 WHERE service_queue_serial = '{0}'", qData.ServiceQueueSerial);
                    DA.UpdateQueueData(strUpdateQuery);

                }
            }
        }

        public void PlaySoundFIle(string strFile)
        {
            //string[] files = new string[4] { @"Sounds/TN.WAV", @"Sounds/CN.WAV", @"Sounds/TN.WAV", @"Sounds/CN.WAV"};

            //WaveIO wa = new WaveIO();
            //wa.Merge(files, @"tempfile.wav");
            //MediaPlayer wowSound = new MediaPlayer(); //Initialize a new instance of MediaPlayer of name wowSound
            //wowSound.Open(new Uri(@"tempfile.wav", UriKind.Relative)); //Open the file for a media playback
            //wowSound.Play();
            using (var soundPlayer = new SoundPlayer(strFile))
            {
                soundPlayer.PlaySync(); // can also use soundPlayer.Play() but it misses some sound file.
            }
        }

        private void printToken(List<QueueData> lstQData)
        {
            if (InvokeRequired)
            {
                this.Invoke(new MethodInvoker(delegate
                {
                    pnlQStat.Controls.Clear(); 
                    string dir;
                    //int xpos = 55;
                    //int ypos = 207;
                    int xpos = 10;
                    int ypos = 00;
                    //int k=0;
                    for (int i = 0; i < lstQData.Count; i++)
                    {
                       /* if (i == 4 || i == 8)
                        {
                            ypos = ypos - 360;
                            xpos = 675;
                        }*/

                        foreach (char c in lstQData[i].ServiceQueueSerial)
                        {
                            if (i == 0)
                            {
                                dir = "Resources/_" + c + ".bmp";
                            }
                            else
                            {
                                dir = "Resources/" + c + ".bmp";
                            }
                            createPicBox(dir, "pBox" + i, xpos, ypos);
                            xpos = xpos + 43;

                        }

                        ypos = ypos + 50;
                        xpos = 10;

                    }
                }));
                return;
            }
        }

        private void printCounter(List<QueueData> lstQData)
        {
            if (InvokeRequired)
            {
                this.Invoke(new MethodInvoker(delegate
                {

                    //int xpos = 415;
                    //int ypos = 207;
                    //int xpos = 292;
                    int xpos = 220;
                    int ypos = 00;
                    //int k=0;
                    for (int i = 0; i < lstQData.Count; i++)
                    {
                        /*if (i == 4 || i == 8)
                        {
                            ypos = ypos - 360;
                            xpos = 1035;
                        }
                        */
                        foreach (char c in lstQData[i].ServiceCounterID)
                        {
                            string dir;
                            if (i == 0)
                            {
                                dir = "Resources/_" + c + ".bmp";
                            }
                            else
                            {
                                dir = "Resources/" + c + ".bmp";
                            }
                            //string dir = "Resources/" + c + ".bmp";
                            createPicBox(dir, "pBox" + i, xpos, ypos);
                            xpos = xpos + 63;

                        }

                        ypos = ypos + 50;
                        xpos = xpos - 63;

                    }
                }));
                return;
            }
        }
        private void createPicBox(string directory, string name, int xposition, int yposition)
        {
            PictureBox picBox = new System.Windows.Forms.PictureBox();
            picBox.Name = name;

            picBox.Location = new System.Drawing.Point(xposition, yposition);
            picBox.Size = new System.Drawing.Size(40, 50);

            picBox.BackgroundImage = Image.FromFile(directory);
            picBox.BackgroundImageLayout = ImageLayout.Stretch;
            pnlQStat.Controls.Add(picBox);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            createPlayList();
            //dbListenerThread.Abort(); // this line of code should be placed in onClosing Event.
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            dbListenerThread.Abort();
            player.playlistCollection.remove(playlist);
        }

        private void createPlayList()
        {
            playlist = player.playlistCollection.newPlaylist("mpl");
            playlist.appendItem(player.newMedia(@"E:\SONGS\teri-meri-promo-Muskurahat.Com.wmv"));
            playlist.appendItem(player.newMedia(@"E:\MOVZZZ\English\The Kid\THE KID FILM_1_0001.avi"));
            player.currentPlaylist = playlist;
        }

        private void btnPlay_Click(object sender, EventArgs e)
        {
           // player.URL = @"E:\MOVZZZ\English\The Kid\THE KID FILM_1_0001.avi";
            player.Ctlcontrols.play();
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            player.Ctlcontrols.stop();
        }

    }

} 
```

我的目标是按顺序播放循环播放的声音文件，同时并行播放视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:45:54.967

您不应将`SoundPlayer`其用于此目的；`SoundPlayer`是一个轻量级、方便的类，用于在应用程序中播放偶尔的附带声音。如果音频子系统中发生其他事情（如视频播放），它偶尔会跳过声音。这是[一个很好的示例，展示了如何使用低级 waveOutOpen API 播放声音](http://www.codeproject.com/Articles/3352/A-low-level-audio-player-in-C)。

# python - Python 中的线程与异步执行

> ID：15876761
> 
> 赞同：2
> 
> 时间：2013-04-08T10:25:12.850
> 
> 标签：python, multithreading, asynchronous

一般来说，我对线程和异步编程比较陌生，但我试图理解两者之间的区别，因为它与 CPython 中的 GIL 相关。

从我的阅读中，我了解到线程有自己的堆栈，这两种模型是不同的编程范式。但是考虑到它们因为 GIL 而不能同时运行，那么 python 线程是不是底层的一种异步执行呢？我真的很想更好地理解python解释器是如何实现线程的，特别是它如何确定一个线程何时阻塞而另一个线程何时可以执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:40:52.837

GIL 仅在执行 python 代码时发挥作用——调用用 C 实现的函数，例如，GIL 不应干扰 afaik。此外，从磁盘下载文件或移动文件可以与 python 线程同时工作。

引自[Python Wiki](http://wiki.python.org/moin/GlobalInterpreterLock)：

> 请注意，潜在的阻塞或长时间运行的操作（例如 I/O、图像处理和 NumPy 数字运算）发生在 GIL 之外。因此，只有在 GIL 中花费大量时间来解释 CPython 字节码的多线程程序中，GIL 才会成为瓶颈。

您可能会查看[多处理](http://docs.python.org/3.2/library/multiprocessing.html)模块，它允许您克服 GIL 并在机器上使用多个核心。此外，还有一些工作正在进行，以使替代 Python 解释器 PyPy 在某一天变得无 GIL（只需搜索 STM/AME）。

# ruby-on-rails-3 - 在omnicontacts中，邀请hotmail联系人时，我的回调中的request.env['omnicontacts.contacts']为空

> ID：15876762
> 
> 赞同：0
> 
> 时间：2013-04-08T10:25:14.730
> 
> 标签：ruby-on-rails-3, rubygems, omnicontacts-gem

我有为 gmail 工作的宝石。我可以看到联系人列表

```
@contacts = request.env['omnicontacts.contacts'] 
```

但是，通过 hotmail 导入时，列表为空。我确保我确实有 hotmail 联系人。我仔细检查了我的`live`应用程序中的每个设置（密钥，域......）

有没有人有类似的问题？我可以尝试进一步诊断什么？

**我的回调控制器：**

```
class Oauth::HotmailController < ApplicationController

  def callback_token
    #this is called.

    #This is empty. When using gmail, contacts are retrieved. But not with hotmail
    @contacts = request.env['omnicontacts.contacts']
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:05:50.080

在您从 hotmail 的回复中，您已对电子邮件进行了编码。例如：`"email_hashes":["243c01e30cfdbc8c46b8dddb68a685bb8f86016096fd3398919ed6845fde6b7b"]`

这个补丁应该有帮助： [https ://gist.github.com/clouw/5871254](https://gist.github.com/clouw/5871254)

# sql - 是否有异步 SQL 查询之类的东西？

> ID：15876764
> 
> 赞同：0
> 
> 时间：2013-04-08T10:25:23.480
> 
> 标签：sql, asynchronous

我的意思是，如果我正在运行一个将返回一百万个结果的查询，我可以一次返回一千个并追加，就像 AJAX 调用如何返回结果并追加到 HTML 一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:27:32.330

`TOP`您可以使用MSSQL 或`LIMIT`MySQL中的函数编写自己的函数。更改您的查询以返回最多 1000 条记录，并保持运行开始索引。

附加到 HTML 将是一个不同的问题。也许您最好的选择是创建一个在服务器上获取分页数据的函数，并从客户端多次调用它。

# android - Android listview在同时被触摸和下拉时不滚动

> ID：15876772
> 
> 赞同：0
> 
> 时间：2013-04-08T10:25:36.293
> 
> 标签：android, listview, scroll

有一个列表视图。当用户在滚动时触摸屏幕时，我写了这个来停止滚动：

```
 public class OnTouchListner implements OnTouchListener{

    @Override
    public boolean onTouch(View v, MotionEvent event) {
         if(event.getAction()==MotionEvent.ACTION_DOWN)  
             {
                businessResultListView.smoothScrollBy(0, 0); 
                return true;

            }  
         return false;
    }
 } 
```

当我向下滚动列表并触摸屏幕时，列表视图停止滚动。但是，如果我再次尝试向下/向上滚动，而不从滚动视图中抬起手指，我将无法滚动它。如果我松开手指，然后触摸列表并尝试滚动，那么我可以这样做。

触摸后如何使我的列表可滚动？

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:05:36.223

提供像 scroll_home 这样的 Scroll id

ScrollView scroll_home;

scroll_home = (ScrollView) findViewById(R.id.scroll_event);

并在触摸列表视图行添​​加此功能...

这运作良好

```
v.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            scroll_home.requestDisallowInterceptTouchEvent(true);
            return false;
        }
    }); 
```

# object - Java 概念混淆：对象和原始类型

> ID：15876776
> 
> 赞同：1
> 
> 时间：2013-04-08T10:25:54.493
> 
> 标签：object, methods, reference, primitive

我真的很困惑这个概念：

```
/* Example with primitive data type */

public class Example1 {

public static void main (String[] args){
int a = 1;

System.out.println("a is " + a);
myMethod( a );
System.out.println("a is " + a);

}

public static void myMethod(int b){

b = 3;
System.out.println("b is " + b);

    }
} 
```

输出：

a 是 1

b 是 3

a 是 1

为什么“a”不改变？当 int i 初始化为零时，这个原始变量如何改变 FOR LOOP 或 WHILE LOOP？像这样：

```
int i = 1;
while (i < = 3) {
 System.out.println(i);
 i *= 2;
} 
```

输出：

1

2

请详细告诉我，因为我真的很困惑。i 是原始类型，为什么它会更新，为什么 int a 在第一个程序中没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:28:24.800

myMethod() 是无效的，如果它返回一个 int 并且你分配了 a=myMethod(a) 那么它会改变

```
int a = 1;
System.out.println("a is " + a);
a= myMethod(a); //where myMethod is changed to return b instead of void
System.out.println("a is " + a); 
```

a 是 1

b 是 3

a 是 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:46:50.920

“*为什么“a”没有变化*？

因为您的原始`a`内部与`myMethod`您`a`的`void main`. 将其完全视为另一个变量，并将其值复制到`myMethod`. 此原语的生命周期在此方法执行结束时结束。

**如果您有 C++ 背景**，那么这个解释可能会有所帮助：

*   当您将原始类型参数传递给方法时 - 您正在传递正在复制的变量。你传递的是价值，而不是实例。
*   当您将对象作为参数传递给方法时 - 您正在传递对该对象的引用，**但**更准确地说：在 java 中，正在传递引用值的副本。这就像将对象地址的副本传递给方法一样。如果您在此方法内修改此对象，则修改将在方法外可见。如果你`=null`或`=new Obj`它，它只会影响你的方法内部的对象。

# javascript - 动态构造一个 JavaScript 对象

> ID：15876777
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:25:57.310
> 
> 标签：javascript

我想填充对象数组，以便将数组附加到网格。这是我需要的格式：

```
data.push({ id: 1, values: { "country": "uk", "age": 33, "name": "Duke", "firstname": "Patience", "height": 1.842, "email": "patience.duke@gmail.com", "lastvisit": "11\/12\/2002" } }); 
```

我有 的键值对`values`，我不确定我将如何在循环中构造上述对象...？？

编辑：

到目前为止我有这个，但我只是添加值，而不是它们各自的键：

```
var recordValues = [];
//for loop iterator
recordValues.push(colValues[colCount]);
//end for

data.push({ id: recordID, values: recordValues }); 
```

`colValues`包含以下内容：“uk”、33、“Duke”……对象中的所有可能值……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:35:11.113

```
for (var key in keyValuePairs) {
  if (keyValuePairs.hasOwnProperty(key)) {
    data.push({ id: key, values:keyValuePairs[key]);
  }
} 
```

[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)过滤掉原型属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:33:39.077

如果正确理解你：

```
var data = [];
for (var i = 0; i < people.length; i++) {
    var person = people[i];
    data.push({ 
        id : i + 1,
        values : { 
            country : person.country, 
            age : person.age, 
            name : person.surname, 
            firstname : person.firstname, 
            height : person.height, 
            email : person.email,
            lastvisit : person.lastvisit 
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T10:30:13.290

你可以这样做：

```
var recordValues = [];
for (var value in colValues) {
   recordValues.push(colValues[value]);
}

data.push({ id: recordID, values: recordValues }); 
```

# sql - SQL 减去 2 列 - 具有空值

> ID：15876781
> 
> 赞同：13
> 
> 时间：2013-04-08T10:26:00.117
> 
> 标签：sql

我有这张表（由 SQL 查询制成）：

```
Row 1 Row 2 
2     1    
3     NULL 
```

我想减去 2 列，所以我只选择这样：

```
Select Row1 - Row2
From table 
```

但后来我得到了这个结果：

```
1
NULL 
```

代替：

```
1
3 
```

我怎样才能得到最后的结果？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T10:27:30.860

请试试：

```
SELECT ISNULL([Row 1], 0) - ISNULL([Row 2], 0) from YourTable 
```

欲了解更多信息，请访问**[ISNULL](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.100%29.aspx)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T10:34:24.310

你得到这个的原因是因为**任何带有 NULL 的数学运算都会产生 NULL**所以在进行运算时，所有值都应该被读取为**NULL=0**。

使用**[ISNULL()](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.100%29.aspx)**

因此

```
SELECT ISNULL([Row 1], 0) - ISNULL([Row 2], 0) from YourTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-24T04:06:24.517

[ISNULL](http://technet.microsoft.com/en-us/library/ms184325.aspx)的 MySQL 等价物是[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

> 如果 expr1 不为 NULL，则 IFNULL() 返回 expr1；否则返回 expr2。

也许还看看[SQL NULL Functions](http://www.w3schools.com/sql/sql_isnull.asp)

[MySQL 的 ISNULL 用于检查值是否为空](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_isnull)

> 如果 expr 为 NULL，则 ISNULL() 返回 1，否则返回 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-24T09:03:39.340

在sql中任何减去NULL的东西总是NULL所以你需要将NULL转换为零

```
SELECT ISNULL(ROW1,0)-ISNULL(ROW2,0) FROM YOUR_TABLE 
```

# highslide - 想要禁用使用 highslide 在页面上拖动图像弹出窗口？

> ID：15876783
> 
> 赞同：0
> 
> 时间：2013-04-08T10:26:03.103
> 
> 标签：highslide

我想关闭在整个页面上拖动的图像。我只想放大图像。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:26:48.997

您可以将其添加到您的 highslide.config.js 文件中，或将其放在页面头部的脚本标记中（在加载 highslide-full.js 之后）：

```
hs.Expander.prototype.onDrag = function() {
    return false;
} 
```

要摆脱“移动”光标，请从 highslide.css 中删除这些：

```
.highslide-move, .highslide-move * {
    cursor: move;
}

.highslide-header .highslide-move a {
    cursor: move;
} 
```

如果您使用任何包装类名称，如 .draggable-header 或 .titlebar，则需要进行进一步的 CSS 修订，消除“光标：移动；” 属性在 CSS 文件中的任何位置。

您可能还想摆脱控制栏中的“移动”图标，但无法看到您的页面，我不知道您使用的是哪种控制栏，或者您是否正在使用全部。

# sql - sql中的时差

> ID：15876784
> 
> 赞同：0
> 
> 时间：2013-04-08T10:26:03.947
> 
> 标签：sql, phpmyadmin

我无法获得函数的时差——

```
"SELECT DATEDIFF(day,'2008-06-05','2008-08-05') " 
```

上面的查询返回错误消息说

```
"Incorrect parameter count in the call to native function 'DATEDIFF'" 
```

我直接从 w3schools 复制了这段代码。（我想获得两个参数之间的时间，但这也给出了相同的错误消息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:29:19.680

[DATEDIFF](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)有两个参数。尝试使用它

```
SELECT DATEDIFF(day,'2008-08-05') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:32:07.943

如果您使用 MySQL，则有 2 个参数。

```
SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30'); 
```

如果你使用 MSSQL 有 3

```
 SELECT DATEDIFF(year, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000'); 
```

MSSQL [http://msdn.microsoft.com/pl-pl/library/ms189794.aspx](http://msdn.microsoft.com/pl-pl/library/ms189794.aspx)

```
DATEDIFF ( datepart , startdate , enddate ) 
```

返回指定开始日期和结束日期之间跨越的指定日期部分边界的计数（有符号整数）。

MySQL [https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

DATEDIFF() 返回 expr1 – expr2，表示为从一个日期到另一个日期的天数。expr1 和 expr2 是日期或日期和时间表达式。计算中仅使用值的日期部分。

# java - TestNG 无法设置程序默认测试名称

> ID：15876787
> 
> 赞同：0
> 
> 时间：2013-04-08T10:26:10.417
> 
> 标签：java, testng

我正在尝试使用以下代码更改默认测试名称，但该值仍然保持为：默认测试名称而不是我将其设置为的测试：

```
 TestNG testng = new TestNG();

XmlSuite suite = new XmlSuite();
suite.setName("Programmatic suite");

XmlTest xmlTest = new XmlTest(suite);
xmlTest.setName(testcase);
List<XmlClass> classes = new ArrayList<XmlClass>();
classes.add(new XmlClass(testsuite));
xmlTest.setXmlClasses(classes) ;
xmlTest.setName(testcase);

List<XmlTest> xmlTestsList = new ArrayList<XmlTest>();
xmlTestsList.add(xmlTest);
suite.setTests(xmlTestsList);

List<XmlSuite> suites = new ArrayList<XmlSuite>();
suites.add(suite);

testng.setXmlSuites(suites);
testng.setTestNames(Arrays.asList(testcase));

    testng.setTestClasses(new Class[] { autotestClass });
testng.addListener(tla);

testng.run(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:51:56.820

好的，基本上添加了对方法的调用：testng.setDefaultTestName("your default testname");

我还需要实现接口：IMethodInterceptor

# google-app-engine - appengine 网站处理请求非常慢

> ID：15876791
> 
> 赞同：1
> 
> 时间：2013-04-08T10:26:16.260
> 
> 标签：google-app-engine

我在具有 API 的 appengine 上部署了一个网站。在我的计算机上，我有一个 node.js 脚本，它通过 API 使用 POST 将数据发送到网站。

问题是，虽然有时网站处理请求很快（平均每秒 1 个），但有时它非常慢（平均每分钟 1 个请求）。

经过一番挖掘，我发现当发生这种情况时，4个请求的处理速度非常快，然后网站4分钟没有做任何事情，重复这个过程，平均每分钟1个请求的时间就像之前所说的那样. 这可能是什么原因造成的？

我不知道它是否非常相关，但我有一个免费的 appengine 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:34:25.003

看起来像您的 node.js 脚本中的错误。Appengine 对外部请求有 60 秒的限制 - 一个请求阻止实例的时间不可能超过这 60 秒。（即使实例被阻止，gae 也会产生另一个）

其他猜测：

*   检查访问日志以获取首次/预热请求（例如，缓慢的实例启动）
*   检查访问日志以确保 gae 确实收到了请求

# python - python列表（子/父）到嵌套字典

> ID：15876793
> 
> 赞同：1
> 
> 时间：2013-04-08T10:26:18.267
> 
> 标签：python, sql, dictionary, nested

我有 2 个 SQL 表：

```
CREATE TABLE IF NOT EXISTS `test` (
  `id_block` int(11) NOT NULL AUTO_INCREMENT,
  `label` varchar(30) NOT NULL,
  PRIMARY KEY (`id_block`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12 ;

INSERT INTO `test` (`id_block`, `label`) VALUES
(1, 'Cat1'),
(2, 'Cat2'),
(3, 'Cat3'),
(4, 'Cat4'),
(5, 'Cat5'),
(6, 'Cat6'),
(7, 'Cat7');

CREATE TABLE IF NOT EXISTS `test2` (
  `id_block` int(11) NOT NULL,
  `id_parent` int(11) NOT NULL,
  PRIMARY KEY (`id_block`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;     

INSERT INTO `test2` (`id_block`, `id_parent`) VALUES
(1, 0),
(2, 0),
(3, 2),
(4, 2),
(5, 3),
(6, 4),
(7, 2); 
```

一个块可能有一个、两个或三个父级，这就是我有 2 个表的原因。

这是我的 SQL 查询：

```
SELECT T.id_block, T2.id_block, label, id_parent
FROM test T 
INNER JOIN test2 T2 ON T.id_block = T2.id_block 
```

我使用此脚本将这些信息放入列表中：

```
conn = MySQLdb.connect('localhost','user','pass', 'db') 
curs = conn.cursor() 
result=curs.execute("SELECT ....") 

cats = curs.fetchall() 

curs.close() 
conn.close() 
```

输出 ：

```
cats = ((1L, 1L, 'Cat1', 0L), (2L, 2L, 'Cat2', 0L), (3L, 3L, 'Cat3', 2L), (4L, 4L, 'Cat4', 2L), (5L, 5L, 'Cat5', 3L), (6L, 6L, 'Cat6', 4L), (7L, 7L, 'Cat7', 2L)) 
```

我想要一个像这样的分层/嵌套字典：

```
dict = {"Cat1": {}, "Cat2": {"Cat3": {"Cat5": {}}, "Cat4": {}, "Cat7": {}}} 
```

你有什么解决办法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:52:13.813

这里有一个解决方案：

```
#! /usr/bin/python
# -*- coding: utf-8 -*-
# Python v2.7  
############################################################################# 
def _creadict(c, d={}):

    # recherche des enfants
    for cle in d:
        for cat, catpar in c:
            if catpar==cle:
                d[cle][cat] = {}
        # recherche récursive
        d[cle] = _creadict(c, d[cle])        

    return d  
#============================================================================ 
def creadict(cats):

    # simplification de la liste => [[cat, catparent], ...]
    c = []
    for i, (id1, id2, cat, idpar) in enumerate(cats):
        if idpar==0:
            c.append([cat, 0])
        else:
            for elem in cats:
                if idpar==elem[0]:
                    c.append([cat, elem[2]])
                    break    

    # recherche des 'cat' sans parent (catpar==0)
    d = {}
    for cat, catpar in c:
        if catpar==0:
            d[cat] = {}

    # recherche récursive des enfants
    d = _creadict(c, d)

    return d  
cats = ((1, 1, 'Cat1', 0), (2, 2, 'Cat2', 0), (3, 3, 'Cat3', 2), (4, 4, 'Cat4', 2), (5, 5, 'Cat5', 3), (6, 6, 'Cat6', 4), (7, 7, 'Cat7', 2))
d = creadict(cats)
print d 
```

# algorithm - 删除元素以对数组进行排序

> ID：15876796
> 
> 赞同：2
> 
> 时间：2013-04-08T10:26:30.437
> 
> 标签：algorithm, sorting

我正在寻找一种算法来对数组进行排序，但不是通过移动值。相反，我想删除尽可能少的值并最终得到一个排序列表。基本上我想找到最长的升序子数组。

为了显示：

```
1 4 5 6 7 2 3 8 
```

应该成为（2 删除）

```
1 4 5 6 7 8 
```

而不是（5 次删除）

```
1 2 3 
```

我可以看到如何以一种天真的方式做到这一点，即通过递归检查每个元素的“删除”和“不删除”树。我只是想知道是否有更快/更有效的方法来做到这一点。这类问题有通用的首选算法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:31:09.517

您正在寻找[最长的递增子序列](http://en.wikipedia.org/wiki/Longest_increasing_subsequence)问题。有一种[算法](http://en.wikipedia.org/wiki/Longest_increasing_subsequence#Efficient_algorithms)可以在 O(n log n) 时间内解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T10:34:54.807

该站点有一种 O(NlogN) 算法，它比递归算法更快。

[http://www.algorithmist.com/index.php/Longest_Increasing_Subsequence](http://www.algorithmist.com/index.php/Longest_Increasing_Subsequence)

# reporting-services - 使用 ServerReport.Render 或 ServerReport.RenderStream 导出 CSV 报告的可编程性

> ID：15876800
> 
> 赞同：0
> 
> 时间：2013-04-08T10:26:48.277
> 
> 标签：reporting-services, ssrs-2008

是否可以使用 ServerReport.Render 或 ServerReport.RenderStream 将报告导出到 SSRS 2008 R2 上的 CSV 可编程性？

这很奇怪，因为我们可以使用 Report Viewer 来做到这一点，但是当使用渲染在代码中将格式更改为 CSV 时，我会遇到一些异常。

这是我正在使用的代码，可以完美地以 XLS、DOC 和 PDF 格式导出报告：

```
 private void ExportReport(String format)
    {
        // Variables
        Warning[] warnings;
        string[] streamIds;
        string mimeType = string.Empty;
        string encoding = string.Empty;
        string extension = string.Empty;

        string fileName = _reportName.Replace("Rep", "Report") + "_" + DateTime.Now.ToString("yyyyMMdd HH:mm");

        PrepareReportParameters();
        rv.ServerReport.SetParameters(lstReportParameters);

        byte[] bytes = rv.ServerReport.Render(format, null, out mimeType, out encoding, out extension, out streamIds, out warnings);

        // Now that you have all the bytes representing the PDF report, buffer it and send it to the client.
        Response.Buffer = true;
        Response.Clear();
        Response.ContentType = mimeType;
        Response.AddHeader("content-disposition", "attachment; filename=" + fileName + "." + extension);
        Response.BinaryWrite(bytes); // create the file
        Response.Flush(); // send it to the client to download
    } 
```

**更新 1**

这是我在上述方法中选择“CSV”作为“字符串格式”时遇到的异常：

```
You have attempted to use a rendering extension that is either not registered for this report server or it is not supported in this edition of Reporting Services. (rsRenderingExtensionNotFound) 
```

谢谢

# html - 从“中提取文本 " HTML 标签

> ID：15876801
> 
> 赞同：1
> 
> 时间：2013-04-08T10:26:48.313
> 
> 标签：html, .net, vb.net, winforms

我有一个字符串：

```
<a href = "http://www.zigwheels.com/reviews/long-term-reviews/fiat-linea/8804-100-1/1">
  <img src="http://static.zigwheels.com/media/content/2011/Jul/fiatlinealt_1_560x420.jpg" />
</a> 
<p>
  To sum it up in a nutshell, the Fiat Linea is a spacious family car that 
  rewards you with its space and fuel efficiency, while maintaining 
  decent levels of performance as well
</p> 
```

我只需要`<p>`标签中的文本。请帮助...我需要纯 vb 语言的 vb.net windows 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:37:15.320

这取决于输入数据，但对于像这样的简单情况，您可以使用与标签之间的文本匹配的正则表达式。

```
Imports System.Text.RegularExpressions

Dim input As String = ... ' Your string
Dim match As Match = Regex.Match(input, "<p>(?<content>.*)</p>")
If match.Success Then
    Dim content As String = match.Groups("content").Value ' The text between <p> and </p>
End If 
```

这当然不是解析 HTML 的解决方案，因为您需要一个 HTML 解析器。但它可用于匹配非常简单的字符串，例如您提供的字符串。如果您要匹配的字符串更复杂，或者您需要更复杂的匹配，那么您需要一个不同的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:29:50.810

您可以使用 HTML 敏捷包。这是一个例子

```
HtmlDocument htmlDoc = new HtmlDocument();
htmlDoc.LoadHtml("Get the entire string here");
var xyz = from x in htmlDoc.DocumentNode.DescendantNodes()
                     where x.Name == "p"
                     select x.InnerText; 
```

通过这种方式，您可以根据需要获取值。您可以从以下链接获得更多帮助。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

编辑 :: VB.NET

```
Dim htmlDoc As New HtmlDocument()
htmlDoc.LoadHtml("Get the entire string here")
Dim xyz = From x In htmlDoc.DocumentNode.DescendantNodes() Where x.Name = "p"x.InnerText 
```

# css - 将“记住我”和复选框对齐在同一行（Devise 的 CSS 问题）

> ID：15876803
> 
> 赞同：4
> 
> 时间：2013-04-08T10:26:49.340
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

我正在使用设计，复选框位于记住我的下方。这是 jsfiddle [http://jsfiddle.net/icyborg7/8zxyz/上的 HTML 代码](http://jsfiddle.net/icyborg7/8zxyz/)

这是标准设计代码

```
 <%= f.input :email %>
 <%= f.input :password %>
 <%= f.input  :remember_me, :as => :boolean if devise_mapping.rememberable? %>     
 <%= f.button :submit, "Sign In", :class => "btn-info btn" %> 
```

这是 HTML 输出（也粘贴在 SO 上）

```
<div class="control-group boolean optional">
<label class="boolean optional control-label" for="user_remember_me">Remember me</label>
<div class="controls"><input name="user[remember_me]" type="hidden" value="0">
<label class="checkbox"><input class="boolean optional" 
id="user_remember_me" name="user[remember_me]" type="checkbox" value="1"></label>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:30:43.857

添加`display: inline-block`并`label`获得`.controls`您想要的结果：

[http://jsfiddle.net/8zxyz/8/](http://jsfiddle.net/8zxyz/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T12:31:07.620

我遇到了同样的问题，这可能比其他人建议的解决方法要干净一些（使用 simple_form 对我有用）

`<%= f.input :remember_me, :as => :boolean, :label => false, :inline_label => true if devise_mapping.rememberable? %>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:31:08.423

尝试像这样浮动您的内容：http: [//jsfiddle.net/8zxyz/3/](http://jsfiddle.net/8zxyz/3/) Css：

```
.boolean, .controls{
    float: left;
} 
```

您也可以在清除内容之后创建一个重置 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T15:24:04.723

我知道这个问题是不久前提出的，但我发现了我遇到的问题，我希望它可以帮助其他正在寻找的人。

我注意到在我的一个 css 文件中`input`，表单设置为`width: 100%`.

因此，无论我如何尝试布局 HTML，它都会导致标签始终位于另一行。

修理：

设置to和 tada，标签如果包含在 spans 中将出现在同一行`width & height`。`input#user_remember_me``15px`

# android - Android SyncAdapter：在特定时间同步

> ID：15876805
> 
> 赞同：2
> 
> 时间：2013-04-08T10:27:00.143
> 
> 标签：android, synchronization, android-syncadapter

我有一个应用程序，它使用`SyncAdapter`a 每天一次与服务器同步一些数据。我希望用户能够选择执行此同步的时间。用户可以随时更改此小时。

在这种情况下，我该怎么办？

1- 在选定的时间使用 a`Receiver`呼叫`requestSync`。

2- 定义 24 小时定期同步。

在解决方案编号 2 中，如果用户修改它，我不确定如何更新请求同步的时间。如果我使用`addPerodicSync(account, AUTH, params, 24*HOURS);`它会每天在我设置定期同步的时间执行同步吗？

谢谢！

# java - 如何将spring表单选择的路径映射到字节变量

> ID：15876814
> 
> 赞同：0
> 
> 时间：2013-04-08T10:27:35.240
> 
> 标签：java, spring, spring-mvc

我有下面给出的列表

```
<form:select class="inputField" path="var1">
                                        <form:options items="${list}" />
                                        </form:select> 
```

但是，我从我的控制器中放入了字符串类型的数组列表，它在显示页面时给了我 NumberFormatException ，var1 的类型是字节，如果我将 var1 更改为其他整数类型的变量，效果很好，它会显示中的值落下。

但我想将它映射到字节类型的 var1。

# class - ttk 条目小部件的 Python validate 和 validateommand 问题

> ID：15876821
> 
> 赞同：0
> 
> 时间：2013-04-08T10:27:56.363
> 
> 标签：class, python-3.x, tkinter, int

我试图限制输入到条目小部件中的数字，因此它必须是 4 个整数长，在值 0000 到 9999 之间，实际上是一个 4 位数的密码。这个类工作正常，但是，关于以 0 开头的数字有一个小问题。如果要输入数字 0000，那么它将只取值 0 而不是实际值 0000。有人可以帮我指出我的意思吗做错了。

```
class ConstrainedEntry(ttk.Entry):
    def __init__(self, *args, **kwargs):
        ttk.Entry.__init__(self, *args, **kwargs)

        vcmd = (self.register(self.on_validate),"%P")
        self.configure(validate="key", validatecommand=vcmd)

    def disallow(self):
        self.bell()

    def on_validate(self, new_value):
        try:
            if new_value.strip() == "": return True
            value = int(new_value)
            if value < 0 or value > 9999:
                self.disallow()
                return False
        except ValueError:
            self.disallow()
            return False

        return True 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:08:53.063

您正在将值转换为 int：

```
value = int(new_value) 
```

如果您的最终目的是检查用户是否输入了四位数字，您还可以使用一个非常简单的正则表达式：

```
import re

def on_validate(self, new_value):
    m = re.match(r'^(\d{1,4})?$', new_value)
    if m is None:
        self.disallow()
        return False
    else:
        return True 
```

# java - @RequestMapping 不适用于 Spring 2.5 中的类型和方法

> ID：15876834
> 
> 赞同：1
> 
> 时间：2013-04-08T10:28:34.507
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我最近一直在阅读 Spring 3.2，现在我正在使用 Spring 2.5 尝试以下代码。从我读过的内容来看，这应该意味着它应该映射`profile/tags/me`。然而事实并非如此。它只是抛出一个 `No mapping found for HTTP request with URI ...`. 代码有什么问题，或者 Spring 2.5 不像 Spring 3 那样工作？

**使用 Spring 2.5 时的问题**

```
@Controller
@RequestMapping("/profile/tags")
public class ProfileController { ... } 
```

这是 ProfileController 类中的方法：

```
@RequestMapping(value = "/me", method = RequestMethod.GET)    
public String show(@RequestParam final long id, final ModelMap model) { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:32:41.367

根据[Spring documentation](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestparam)，我想你缺少接收请求参数所需的配置，如果你的意思是接收这个请求参数：

```
@RequestMapping(value = "/me/{id}", method = RequestMethod.GET)    
public String show(@RequestParam("id") final long id, final ModelMap model) { ... } 
```

或者你应该删除`RequestParam`.

### 春季 2.5 更新

此外，由于您使用的是 Spring 2.5，请确保您已`DispatcherServlet`按照预期方式进行了配置；第[13.11](http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-annotation)节，第 1、2 和 3 小节。总结：

1.  应该告诉 DispatcherServlet 加载带注释的 RequestMappings。
2.  应该告诉 DispatcherServlet 加载 Controller 注释。
3.  不确定，但也许您需要改进用于请求映射的路径。

希望这可以帮助。

# c++ - 以下函数返回什么？

> ID：15876841
> 
> 赞同：2
> 
> 时间：2013-04-08T10:29:02.977
> 
> 标签：c++, c, return, output, generic-programming

```
int fn(unsigned int x)
{
int count = 0 ;
for(; x!=0; x&=(x-1))
    count ++;
return count;
} 
```

我在编译器中尝试了它，但无法弄清楚发生了什么。我认为这与 in 的位数有关`x`，但是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:30:24.373

这[有点诡计](http://www.ugcs.caltech.edu/~wnoise/base2.html)。:)

您将返回设置为的位数`1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:44:59.447

我解释你做了什么:)

根据您的代码，如果 x = 5，将发生以下情况

1) 在循环的第一次迭代中，

```
 a) condition check : .... 0101(X) ! = 0 ,
  b) body : count will be 1 ;
  c) increment part : .... 0101 &= .... 0100 => .... 0100 
```

2) 在第二次迭代中

```
a) condition check : .... 0100(X) ! = 0 ,
  b) body : count will be 2 ;
  c) increment part : .... 0100 &= .... 0011 => .... 0000 
```

计数等于 2，即 X(5) 中设置的位数

# asp.net - Asp.Net：executionTimeout + 并行线程

> ID：15876843
> 
> 赞同：0
> 
> 时间：2013-04-08T10:29:15.197
> 
> 标签：asp.net, multithreading, parallel-processing

在网页上，我启动了一个并行进程来执行一项长时间运行的任务，然后发送一封电子邮件以跟踪其“输出”。但是线程有时似乎在发送电子邮件之前就结束了（电子邮件是我唯一的轨道），我认为这可能与超时有关。

这里的代码：

```
var thread = new Thread(() =>
{
    var cli = Factory.GetClient(callBack);
    FedDBService.ReturnMessage msg;
    try
    {
       msg = cli.SendFedCards(xmls.ToArray());
    }
    catch (Exception exe)
    {
       msg = new FedDBService.ReturnMessage();
       msg.Error = exe.Message;
    }
    finally
    {
        cli.Close();
        completion.Finished = true;
    }
    message = String.Format(@"{0}Ended: {1: HH:mm} {2} {3}", message, DateTime.Now, 
              msg.Error.Trim(' ', '\n', '\r', '\t') == "" ? 
                                   "Withouth errors" : "With errors:"
                , msg.Error);
    try
    {
       golf.classes.Mailing.Mail.sendMail(Club.ClubEmail, email, null, 
         "***@***.com", message, "**Subject**", false); 
       // this method works right
    }
    finally
    {
       Thread.Sleep(5 * 60 * 1000);
       RemoveCompletion(guid);
    }
});
thread.Start(); 
```

你认为这与一些超时有关吗？我可以在不让通常的请求永远运行的情况下更改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:13:42.297

您不应该在 Web 应用程序中启动后台工作 - 如果应用程序池被回收，您的后台工作将因极端偏见而中止。

Phil Haack 在这里写了一篇关于这个主题的博客：

[`The Dangers of Implementing Recurring Background Tasks In ASP.NET`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

推荐的解决方案是将这项工作传递给单独的 Windows 服务。

# postgresql - 从 db2 触发器插入 postgresql 表

> ID：15876845
> 
> 赞同：0
> 
> 时间：2013-04-08T10:29:19.790
> 
> 标签：postgresql, stored-procedures, triggers, db2, sql-insert

我的问题是以下一个：

我有一个 db2 数据库和一个 postgres 数据库。它们位于不同的服务器中。每次我将新记录添加到 db2 表中时，它也应该立即添加到 postgresql 中。

我在想通过触发器来做。但我不知道要在其中放入什么以插入到 postgresql 中。我读过也许我可以调用一个外部存储过程，但我不太确定它是否是我正在寻找的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:20:28.707

**Java 存储过程**

是的，您可以创建存储过程，例如在 Java 中。您从触发器中调用此存储过程。在 Java 存储过程中，您创建到 postgresql 的连接，并插入从 DB2 接收到的值并将它们插入到 postgres 中。我认为你必须处理两个连接，一个来自 DB2，一个来自 postgres。

关于Java存储过程的资料有很多：

*   [http://www.redbooks.ibm.com/redbooks/pdfs/sg245945.pdf](http://www.redbooks.ibm.com/redbooks/pdfs/sg245945.pdf)
*   [http://www.ibm.com/developerworks/data/library/techarticle/dm-0510law/](http://www.ibm.com/developerworks/data/library/techarticle/dm-0510law/)

**联邦：Postgres 包装器**

另一种方法是为 Postgresql 创建一个包装器。目前，IBM 通过 InfoSphere Federation 服务器提供了许多连接器，但我没有为 Postgres 和 Mysql 提供任何连接器。但是，您可以创建自己的包装器。文档在这里：

*   [http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp)
*   联合 > 为联合开发 > 开发与自定义数据源的连接。

如果您想为 postgresql 包装器创建一个开源项目，我将有兴趣参与。

# three.js - 为什么我在 Three.js 中实现置换贴图会断开球体两极的顶点？

> ID：15876848
> 
> 赞同：5
> 
> 时间：2013-04-08T10:29:29.293
> 
> 标签：three.js, shader, glsles

我正在尝试通过将带有柏林噪声的置换贴图应用于球体来创建小行星。除了球体的两极被扭曲之外，一切都按预期工作。看起来好像两极上的顶点是断开的。

Frontview：看起来像预期的那样 ![小行星前视图](https://i.stack.imgur.com/xVdtc.png) Topview：看起来很丑;-) ![小行星顶视图](https://i.stack.imgur.com/brerO.png)

起初，我认为这与我的置换贴图有关，并且我将它应用在球面上，但如果我将它应用在立方体上，面之间也会有间隙。

我不确定，我能做些什么来缩小这些差距。在后面的步骤中，置换贴图一般是通过渲染到纹理并使用随机种子生成噪声来生成的，因此我不能使用 Blender 或 Photoshop 等外部程序来修改置换贴图。我在着色器中做错了什么，还是这是“正常”行为？我能做些什么来避免这种情况吗？我读到了立方体贴图。这可能是一个解决方案吗？如果是这样，是否有 Three.js r57 或更高版本的工作示例？

这是我的着色器代码：

```
 vertexShader: [
    'uniform sampler2D displacementMap;',
    'varying vec3 vColor;',

    'void main() {',
        'vec4 newVertexPos;',
        'vec4 dv;',
        'float df;',

        'dv = texture2D( displacementMap, uv.xy );',
        'df = 0.30*dv.x + 0.59*dv.y + 0.11*dv.z;',
        '//newVertexPos = vec4(normal * df * 1.0, 0.0) + vec4( position, 1.0 );',
        'newVertexPos = vec4( normalize( position ) * df * 1.0 ) + vec4( position, 1.0 );', 
        'vColor = vec3( dv.x, dv.y, dv.z );',

        'gl_Position = projectionMatrix * modelViewMatrix * newVertexPos;',
    '}'

].join( "\n" ),

fragmentShader: [
    'varying vec3 vColor;',

    'void main() {',
        'gl_FragColor = vec4( vColor.rgb, 1.0 );',
    '}'

].join( "\n" ) 
```

这是制服和球体代码：

```
asteroidMaterial = new THREE.ShaderMaterial( {
    uniforms: {
        //"displacementMap": { type: "t", value: rtTexture },
        "displacementMap": { type: "t", value: THREE.ImageUtils.loadTexture( 'txt/asteroid1.png' ) },
    },
    vertexShader: asteroidShader.vertexShader,
    fragmentShader: asteroidShader.fragmentShader,
    blending: THREE.NormalBlending,
    depthWrite: false,
    depthTest: true,
    transparent: true,
    overdraw: true,
    //wrapS: THREE.RepeatWrapping,
    //wrapT: THREE.RepeatWrapping,
    minFilter: THREE.NearestFilter,
    magFilter: THREE.NearestFilter,
} );
var asteroidGeometry = new THREE.IcosahedronGeometry( 100, 4 );
asteroidGeometry.dynamic = true;
var asteroid = new THREE.Mesh( asteroidGeometry, asteroidMaterial );
asteroid.position = new THREE.Vector3( 0, 0, 200 );
asteroid.visible = true;
scene.add( asteroid ); 
```

我刚刚看到，代码使用二十面体而不是球体，但同样的事情也发生在球体上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T14:21:55.973

不要使用`IcosahedronGeometry`，它在[r.57](https://github.com/mrdoob/three.js/issues/3269)中存在问题。使用`SphereGeometry`, 代替。

问题是你的置换贴图。看起来你在整个接缝处都有缝隙。

要修复垂直接缝，置换贴图的右边缘必须与左边缘具有相同的值。

要固定极点，它必须在顶部边缘具有恒定值，在底部边缘具有恒定值。

# queue - 在 HornetQClient 中设置 max-size-bytes 和 address-full-policy

> ID：15876855
> 
> 赞同：1
> 
> 时间：2013-04-08T10:29:53.353
> 
> 标签：queue, jms, hornetq

我们使用 HornetQ 核心 API 来从 HornetQClient 创建 ServerLocator。ServerLocator 用于创建队列。这是代码：

```
TransportConfiguration connectorConfig = new TransportConfiguration(InVMConnectorFactory.class.getName());

ServerLocator locator = HornetQClient.createServerLocatorWithoutHA(connectorConfig);

int ackBatchSize = ConfigWrapperHelper.getIntParameter(ProductMarkingConfigParamEnum.ACK_BATCH_SIZE_FOR_JMS_QUEUES);
locator.setAckBatchSize(ackBatchSize);
locator.setConsumerWindowSize(CONSUMER_WINDOW_SIZE);
locator.setClientFailureCheckPeriod(Long.MAX_VALUE);
locator.setConnectionTTL(-1);

ClientSessionFactory  clientSessionFactory = locator.createSessionFactory(connectorConfig);

ClientSession clientSession = _clientSessionFactory.createSession(XA, AUTO_COMMIT_SENDS, AUTO_COMMIT_ACKS);
clientSession.createQueue(queueName, queueName, IS_DURABLE); 
```

问题是我们需要为每个队列配置 max-size-bytes 和 te address-full-policy。

我知道如何通过 XML 中的来执行此操作，但由于我使用 hornetq 核心来配置队列，因此还需要通过代码配置这些参数。

我看到有一个名为 AddressSettings 的类，可以在其中设置这些参数。

我的问题是 - 如何将此 AddressSettings 对象配置到 ServerLocator 中？

或者 - 是否有另一种方法可以在从 HornetQCLient 创建的 ServerLocator 中配置这些参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:54:59.927

AddressSettings 是服务器的属性，您不能从客户端设置它。您可以在 HornetQServer 上使用它，或者更改等效的 XML。

AddressSettings 基于通配符。因此，您可以创建一个地址设置，以根据您的规则匹配您的队列名称。

如果您使用的是嵌入式服务器，则可以使用：

```
server.getAddressSettingsRepository().addMatch("<your-expression-matchin your queue(s)", setting); 
```

要使用 XML 进行配置，请查看文档的这一部分：

[http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/queue-attributes.html#queue-attributes.address-settings](http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/queue-attributes.html#queue-attributes.address-settings)

在 JBoss 7 上，可以在standalone-all.xml（或任何包含 hornetq / 消息传递的独立 *.xml）中找到相同的 XML 片段

# android - 安卓相册

> ID：15876856
> 
> 赞同：0
> 
> 时间：2013-04-08T10:29:59.307
> 
> 标签：android, mysql, http

我正在使用 android 和 mysql 创建一个相册。照片存储在远程服务器上的文件夹中。本地数据库包含一个字段 `imgUri`，该字段代表图像路径。

有人可以向我描述将这些照片放入我的 android 应用程序（我正在使用轮播）的最简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:54:28.137

我认为您只是在寻找如何将 ImageViews 绑定到实际位于本地数据库中的图像源

照原样创建下面的类，它将从 URL 中获取图像并将其绑定到您的 ImageViews

当我处理同样的问题时，我从网上的某个地方得到了这门课

```
/*
 * Copyright (C) 2010 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */

package com.AZone.egba;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.client.methods.HttpGet;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.graphics.drawable.Drawable;
import android.net.http.AndroidHttpClient;
import android.os.AsyncTask;
import android.os.Handler;
import android.util.Log;
import android.widget.ImageView;

import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.ref.SoftReference;
import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.concurrent.ConcurrentHashMap;

// From the XMLAdapters sample code. Really helpful.

/**
 * This helper class download images from the Internet and binds those with the
 * provided ImageView.
 * <p>
 * It requires the INTERNET permission, which should be added to your
 * application's manifest file.
 * </p>
 * A local cache of downloaded images is maintained internally to improve
 * performance.
 */
public class ImageDownloader {
    private static final String LOG_TAG = "ImageDownloader";

    private static final int HARD_CACHE_CAPACITY = 40;
    private static final int DELAY_BEFORE_PURGE = 30 * 1000; // in milliseconds

    // Hard cache, with a fixed maximum capacity and a life duration
    private final HashMap<String, Bitmap> mHardBitmapCache = new LinkedHashMap<String, Bitmap>(
            HARD_CACHE_CAPACITY / 2, 0.75f, true) {

        private static final long serialVersionUID = 1L;

        @Override
        protected boolean removeEldestEntry(LinkedHashMap.Entry<String, Bitmap> eldest) {
            if (size() > HARD_CACHE_CAPACITY) {
                // Entries push-out of hard reference cache are transferred to
                // soft reference cache
                sSoftBitmapCache.put(eldest.getKey(), new SoftReference<Bitmap>(eldest.getValue()));
                return true;
            } else
                return false;
        }
    };

    // Soft cache for bitmap kicked out of hard cache
    private final static ConcurrentHashMap<String, SoftReference<Bitmap>> sSoftBitmapCache =
            new ConcurrentHashMap<String, SoftReference<Bitmap>>(HARD_CACHE_CAPACITY / 2);

    private final Handler purgeHandler = new Handler();

    private final Runnable purger = new Runnable() {
        public void run() {
            clearCache();
        }
    };

    /**
     * Download the specified image from the Internet and binds it to the
     * provided ImageView. The binding is immediate if the image is found in the
     * cache and will be done asynchronously otherwise. A null bitmap will be
     * associated to the ImageView if an error occurs.
     * 
     * @param url The URL of the image to download.
     * @param imageView The ImageView to bind the downloaded image to.
     */
    public void download(String url, ImageView imageView) {
        download(url, imageView, null);
    }

    /**
     * Same as {@link #download(String, ImageView)}, with the possibility to
     * provide an additional cookie that will be used when the image will be
     * retrieved.
     * 
     * @param url The URL of the image to download.
     * @param imageView The ImageView to bind the downloaded image to.
     * @param cookie A cookie String that will be used by the http connection.
     */
    public void download(String url, ImageView imageView, String cookie) {
        resetPurgeTimer();
        Bitmap bitmap = getBitmapFromCache(url);

        if (bitmap == null) {
            forceDownload(url, imageView, cookie);
        } else {
            cancelPotentialDownload(url, imageView);
            imageView.setImageBitmap(bitmap);
        }
    }

    /*
     * Same as download but the image is always downloaded and the cache is not
     * used. Kept private at the moment as its interest is not clear. private
     * void forceDownload(String url, ImageView view) { forceDownload(url, view,
     * null); }
     */

    /**
     * Same as download but the image is always downloaded and the cache is not
     * used. Kept private at the moment as its interest is not clear.
     */
    private void forceDownload(String url, ImageView imageView, String cookie) {
        // State sanity: url is guaranteed to never be null in
        // DownloadedDrawable and cache keys.
        if (url == null) {
            imageView.setImageDrawable(null);
            return;
        }

        if (cancelPotentialDownload(url, imageView)) {
            BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
            DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
            imageView.setImageDrawable(downloadedDrawable);
            task.execute(url, cookie);
        }
    }

    /**
     * Clears the image cache used internally to improve performance. Note that
     * for memory efficiency reasons, the cache will automatically be cleared
     * after a certain inactivity delay.
     */
    public void clearCache() {
        mHardBitmapCache.clear();
        sSoftBitmapCache.clear();
    }

    private void resetPurgeTimer() {
        purgeHandler.removeCallbacks(purger);
        purgeHandler.postDelayed(purger, DELAY_BEFORE_PURGE);
    }

    /**
     * Returns true if the current download has been canceled or if there was no
     * download in progress on this image view. Returns false if the download in
     * progress deals with the same url. The download is not stopped in that
     * case.
     */
    private static boolean cancelPotentialDownload(String url, ImageView imageView) {
        BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

        if (bitmapDownloaderTask != null) {
            String bitmapUrl = bitmapDownloaderTask.url;
            if ((bitmapUrl == null) || (!bitmapUrl.equals(url))) {
                bitmapDownloaderTask.cancel(true);
            } else {
                // The same URL is already being downloaded.
                return false;
            }
        }
        return true;
    }

    /**
     * @param imageView Any imageView
     * @return Retrieve the currently active download task (if any) associated
     *         with this imageView. null if there is no such task.
     */
    private static BitmapDownloaderTask getBitmapDownloaderTask(ImageView imageView) {
        if (imageView != null) {
            Drawable drawable = imageView.getDrawable();
            if (drawable instanceof DownloadedDrawable) {
                DownloadedDrawable downloadedDrawable = (DownloadedDrawable) drawable;
                return downloadedDrawable.getBitmapDownloaderTask();
            }
        }
        return null;
    }

    /**
     * @param url The URL of the image that will be retrieved from the cache.
     * @return The cached bitmap or null if it was not found.
     */
    private Bitmap getBitmapFromCache(String url) {
        // First try the hard reference cache
        synchronized (mHardBitmapCache) {
            final Bitmap bitmap = mHardBitmapCache.get(url);
            if (bitmap != null) {
                // Bitmap found in hard cache
                // Move element to first position, so that it is removed last
                mHardBitmapCache.remove(url);
                mHardBitmapCache.put(url, bitmap);
                return bitmap;
            }
        }

        // Then try the soft reference cache
        SoftReference<Bitmap> bitmapReference = sSoftBitmapCache.get(url);
        if (bitmapReference != null) {
            final Bitmap bitmap = bitmapReference.get();
            if (bitmap != null) {
                // Bitmap found in soft cache
                return bitmap;
            } else {
                // Soft reference has been Garbage Collected
                sSoftBitmapCache.remove(url);
            }
        }

        return null;
    }

    /**
     * The actual AsyncTask that will asynchronously download the image.
     */
    class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
        private static final int IO_BUFFER_SIZE = 4 * 1024;
        private String url;
        private final WeakReference<ImageView> imageViewReference;

        public BitmapDownloaderTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

        /**
         * Actual download method.
         */
        @Override
        protected Bitmap doInBackground(String... params) {
            final AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
            url = params[0];
            final HttpGet getRequest = new HttpGet(url);
            String cookie = params[1];
            if (cookie != null) {
                getRequest.setHeader("cookie", cookie);
            }

            try {
                HttpResponse response = client.execute(getRequest);
                final int statusCode = response.getStatusLine().getStatusCode();
                if (statusCode != HttpStatus.SC_OK) {
                    Log.w("ImageDownloader", "Error " + statusCode +
                            " while retrieving bitmap from " + url);
                    return null;
                }

                final HttpEntity entity = response.getEntity();
                if (entity != null) {
                    InputStream inputStream = null;
                    OutputStream outputStream = null;
                    try {
                        inputStream = entity.getContent();
                        final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
                        outputStream = new BufferedOutputStream(dataStream, IO_BUFFER_SIZE);
                        copy(inputStream, outputStream);
                        outputStream.flush();

                        final byte[] data = dataStream.toByteArray();
                        final Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);

                        // FIXME : Should use NOTE FIXME was in the orriginal
                        // file.
                        // BitmapFactory.decodeStream(inputStream) instead.
                        // final Bitmap bitmap =
                        // BitmapFactory.decodeStream(inputStream);

                        return bitmap;

                    } finally {
                        if (inputStream != null) {
                            inputStream.close();
                        }
                        if (outputStream != null) {
                            outputStream.close();
                        }
                        entity.consumeContent();
                    }
                }
            } catch (IOException e) {
                getRequest.abort();
                Log.w(LOG_TAG, "I/O error while retrieving bitmap from " + url, e);
            } catch (IllegalStateException e) {
                getRequest.abort();
                Log.w(LOG_TAG, "Incorrect URL: " + url);
            } catch (Exception e) {
                getRequest.abort();
                Log.w(LOG_TAG, "Error while retrieving bitmap from " + url, e);
            } finally {
                if (client != null) {
                    client.close();
                }
            }
            return null;
        }

        /**
         * Once the image is downloaded, associates it to the imageView
         */
        @Override
        protected void onPostExecute(Bitmap bitmap) {
            if (isCancelled()) {
                bitmap = null;
            }

            // Add bitmap to cache
            if (bitmap != null) {
                synchronized (mHardBitmapCache) {
                    mHardBitmapCache.put(url, bitmap);
                }
            }

            if (imageViewReference != null) {
                ImageView imageView = imageViewReference.get();
                BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
                // Change bitmap only if this process is still associated with
                // it
                if (this == bitmapDownloaderTask) {
                    imageView.setImageBitmap(bitmap);
                }
            }
        }

        public void copy(InputStream in, OutputStream out) throws IOException {
            byte[] b = new byte[IO_BUFFER_SIZE];
            int read;
            while ((read = in.read(b)) != -1) {
                out.write(b, 0, read);
            }
        }
    }

    /**
     * A fake Drawable that will be attached to the imageView while the download
     * is in progress.
     * <p>
     * Contains a reference to the actual download task, so that a download task
     * can be stopped if a new binding is required, and makes sure that only the
     * last started download process can bind its result, independently of the
     * download finish order.
     * </p>
     */
    static class DownloadedDrawable extends ColorDrawable {
        private final WeakReference<BitmapDownloaderTask> bitmapDownloaderTaskReference;

        public DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask) {
            super(Color.BLACK);
            bitmapDownloaderTaskReference =
                    new WeakReference<BitmapDownloaderTask>(bitmapDownloaderTask);
        }

        public BitmapDownloaderTask getBitmapDownloaderTask() {
            return bitmapDownloaderTaskReference.get();
        }
    }
} 
```

完成此操作后，您必须像这样从您的活动中访问此类

```
private ImageDownloader mDownload = null; // before onCreate Statement

mDownload = new ImageDownloader(); //where you want to bind the images to image views

            mDownload.download(ImageURL, mImageView); 
```

`ImageURL`是您将以 http 形式从数据库中获取的图像 url `mImageView`是您的图像视图控件...

**输出** 看起来就像您在布局中排列图像视图的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:43:53.563

您将需要一个 Web 服务，可以是表示图像 URL 的 XML 或 JSON，其余的将由普通流处理。希望我明白你在问什么:)

# ios - iCloud - 同时访问数据

> ID：15876860
> 
> 赞同：1
> 
> 时间：2013-04-08T10:30:17.357
> 
> 标签：ios, icloud, inventory

对于 iOS 游戏，我们目前正在探索使用 iCloud 来存储用户库存。我们希望能够在多个应用程序之间转移此类库存资产，或者更好的是，使它们可在多个应用程序中使用。

在[两个应用程序之间共享 iCloud 数据](https://stackoverflow.com/questions/8882682/sharing-icloud-data-between-two-apps)线程表明可以从多个应用程序访问相同的 iCloud 存储。

但在这种情况下，就会出现并发问题。如何管理用户同时使用两台设备的情况，例如销售相同的库存商品？可以以某种方式安装锁吗？或者 iCloud 是在应用程序之间共享库存的错误技术选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:41:12.507

我认为您需要在服务器端进行事务并将更改推送到所有客户端以使其可靠（并且没有漏洞）。

iCloud 在这方面有两个缺点：您无法控制服务器并且它不是“实时的”——有时它会“批量”更改，而您对何时发生这种情况没有发言权。

我认为这意味着您需要 iCloud 以外的技术。

# excel - 使用 vba 检查枢轴的布局更改

> ID：15876867
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:30:42.000
> 
> 标签：excel, pivot-table, vba

我想知道是否有一种方法可以遍历工作簿中的所有数据透视表并检查数据透视表的布局是否已以任何方式更改（插入新字段、添加/删除报告过滤器等）这是可能的？

或者，如果有人更改了枢轴中的任何内容（与布局相关，而不是选择），那么我希望切换一个标志。

请让我知道您的专家意见。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:41:53.820

将其放在评论中可能会更长一些。所以：

1.  您可以遍历所有数据透视表 (PT)，但请记住 PT 是一个工作表对象。实际上，您需要遍历所有工作表，而不是每个单独的工作表中的所有 PT（循环中的循环）

2.  要检查 PT 是否发生了变化，您需要能够比较“以前的情况”和“现在的情况”。我觉得这并不容易。

3.  但是，您可以尝试使用任何与 Workbook PivotTable 相关的事件来控制所有 PT。您可以尝试记住每个 PT 更改或更新的时间。但是，仍然很难检查发生了什么变化。

# spring - Spring MVC - 大写到小写的类成员名称，使用什么注释？

> ID：15876869
> 
> 赞同：0
> 
> 时间：2013-04-08T10:30:45.467
> 
> 标签：spring, spring-mvc

我有成员 id 和 parentId 的类，

```
public class User {

    @Id
    private String id;

    private String parentId;
... 
```

当我从 DB 中读取对象时，我得到了带有大写字母的 json parentId "I"，例如：

[用户 [id=5162979b39201784891da107, parentId=1 ...

我想在 User 类中有 parentId，但是在 json 中我想将其重命名为 parentid 我需要使用什么注释来获取 json

[用户 [id=5162979b39201784891da107, parentid=1 ...

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:15:29.883

您需要将 toString 方法添加到您的类中。

```
@Override
public String toString() {

    return "[id=" + getId() + ", parentid=" + getParentId() + "]";
} 
```

# django - 模型之间的关系（按名称）在 syncdb 上失败

> ID：15876876
> 
> 赞同：0
> 
> 时间：2013-04-08T10:31:03.340
> 
> 标签：django, django-models, foreign-keys, django-syncdb

我有以下 2 个模型，我想将它们与 ManyToMany 关系链接：

*   www/hruser/models.py

    ```
    from django.db import models

    class HRuser(models.Model):
        """Custom user class."""
        email = models.EmailField(max_length=60, unique=True, db_index=True)
        is_active = models.BooleanField(default=True)
        is_staff = models.BooleanField(default=False)
        video = models.ManyToManyField('www.pandastream.models.Video', related_name='users') 
    ```

*   www/pandastream/models.py

    ```
    from django.db import models

    from www.hruser.models import HRuser

    class Video(models.Model):
        """Video object, really basic for now."""
        video_id = models.CharField(max_length=32, unique=True, db_index=True)
        user = models.ForeignKey(HRuser, related_name='videos') 
    ```

如您所见，它们位于不同的应用程序中，并且 Video 也有一个指向 HRuser 的 ForeignKey。为了避免循环导入，`www/hruser/models.py`我尝试使用文档中定义的惰性关系，[但](https://docs.djangoproject.com/en/dev/ref/models/fields/#lazy-relationships)它会在 syncdb 上引发错误：

```
Error: One or more models did not validate:
hruser.hruser: 'video' has an m2m relation with model www.pandastream.models.Video, which has either not been installed or is abstract. 
```

到目前为止，我已经尝试过：

*   在 python shell 中导入我的视频模型，它可以工作
*   从 mysql(5.6.10) 切换到 sqlite(3.7.12)
*   从 Django 1.5 切换到 Django 1.4
*   将`HRuser.video`字段更改为简单的 ForeignKey 字段
*   看源头[`django.core.management.validation`](https://github.com/django/django/blob/master/django/core/management/validation.py#L140)

所有这些都没有改变我的问题，所以要么我没有正确理解文档，要么文档有误，但无论哪种方式，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:43:50.543

如该文档链接中所述，将目标引用为字符串的方法是 as `"appname.Model"`。所以它应该只是`"pandastream.Video"`。

# java - 我们可以以编程方式配置 Chrome 吗？

> ID：15876879
> 
> 赞同：0
> 
> 时间：2013-04-08T10:31:13.783
> 
> 标签：java, javascript, google-chrome, primefaces

我正在尝试以编程方式在 Chrome 上启用“询问下载位置”选项，因为我的客户希望有一个浏览窗口来选择下载位置。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:33:22.403

不可以。网站不能更改用户的浏览器偏好。

# c# - 将 FlipView 与 GridView 绑定

> ID：15876886
> 
> 赞同：0
> 
> 时间：2013-04-08T10:31:33.003
> 
> 标签：c#, xaml, microsoft-metro, flipview

我有一个与数据源完美结合的 GridView 绑定。

```
public void LoadXmlData(string dateOfRunAsString)
{
    IEnumerable<RetrieveFromXml> processList = from process in xmlDocument.Descendants("Process") 
                                               where process.Parent.Parent.Attribute("Date").Value == dateOfRun 
                                               select new RetrieveFromXml(process.Attribute("Name").Value, Convert.ToDouble(process.Elements("ActiveTime").Sum(sec => (int)sec)));
    NameGrid.ItemTemplateSelector = myTemplateSelector;
    NameGrid.ItemsSource = processesList;
} 
```

现在的问题是我需要将 Gridview 组合到一个 FlipView。

就像 FlipView 每天都会显示一个网格视图。

就像是

```
for(int i = 0; i<10; i++)
{
    flipview.list.add(processfromxml(date+i));
    //Consider processfromxml() is returning a Ienumerable List
} 
```

这样 FlipView 将显示第一天的 GridView，然后单击下一步，它会显示第二天的 GridView。

请帮助如何在 Windows 8 中的 XAML、C# 中实现这一点

这是我获取数据的基础类。

```
public class RetrieveProcessFromXml
{
    private string name;
    private double activeTime;

    public RetrieveFromXml(string nameFromXml,double activeTimeFromxml)
    {
        name = nameFromXml;
        activeTime = activeTimeFromxml;
    }

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public double ActiveTime
    {
        get { return activeTime; }
        set { activeTime = value; }
    }
enter code here

} //End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:32:10.557

你有这样的循环

```
for(int i = 0; i<10; i++)
{
    flipview.list.add(processfromxml(date+i));
    //Consider processfromxml() is returning a Ienumerable List
} 
```

因此，如果要添加项目，`FlipView`则必须添加`GridView`非`IEnumerable`列表。您必须分配`ItemsSource`给特定`GridView`，然后将其添加`GridView`到`FlipView`.

这里我给你一个简单的例子

XAML

```
<Page.Resources>
    <DataTemplate x:Name="MyTemplate">
        <Border Background="DarkGray" Width="100" Height="100">
            <TextBlock Text="{Binding}" 
                       Foreground="White" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="30"/>
        </Border>
    </DataTemplate>
</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <FlipView x:Name="flipview" Height="500" Width="500"/>
</Grid> 
```

C＃

```
List<SolidColorBrush> colors;
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    colors = new List<SolidColorBrush> 
    {
        new SolidColorBrush(Windows.UI.Colors.Red),
        new SolidColorBrush(Windows.UI.Colors.Gainsboro),
        new SolidColorBrush(Windows.UI.Colors.BlanchedAlmond),
        new SolidColorBrush(Windows.UI.Colors.Turquoise),
        new SolidColorBrush(Windows.UI.Colors.Azure),
        new SolidColorBrush(Windows.UI.Colors.Teal),
        new SolidColorBrush(Windows.UI.Colors.Tan),
        new SolidColorBrush(Windows.UI.Colors.PowderBlue),
        new SolidColorBrush(Windows.UI.Colors.WhiteSmoke),
        new SolidColorBrush(Windows.UI.Colors.SeaGreen)
    };
    for (int i = 0; i < 10; i++)
    {
        flipview.Items.Add(AddNewGridview(i));
    }
}

int i = 1, j = 0;
GridView AddNewGridview(int k)
{
    var gv = new GridView();
    gv.Background = colors[k];
    gv.ItemTemplate = this.Resources["MyTemplate"] as DataTemplate;
    List<int> IDs = new List<int>();
    while(i < 17 + j)
    {
        IDs.Add(i);
        i++;
    }
    j = i - 1;
    gv.ItemsSource = IDs;
    return gv;
} 
```

# ios - 在 iPad1 和 ios5 问题上禁用保存图像弹出窗口

> ID：15876887
> 
> 赞同：0
> 
> 时间：2013-04-08T10:31:34.347
> 
> 标签：ios, css, ipad

我建立了一个移动网站，我在网站上有一个 javascript 游戏，需要用户点击并按住图像来摇动和动画。

我在图像上实现了以下 CSS：

```
-webkit-user-select:none;
-webkit-touch-callout:none;
pointer-events:none; 
```

它在运行在 ios4 和 ios6 上的 ipad2 和 ipad3 上运行良好，但在运行在 ios5 上的 ipad1 上不起作用。

很难相信 CSS 可以在 ios4 上运行，但不能在 ios5 上运行。我怀疑这是特定于设备的问题，但如果是，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T17:18:14.533

好的，这个问题实际上很容易解决。我拥有的图像实际上是在一个 div 容器中。我已经指定了图像的宽度和高度，但它实际上并没有扩展 div 容器。因此，绑定到 div 的点击并按住事件不起作用。修复非常简单，我只是添加了 div 的高度和宽度。

这很有趣，因为在此修复实施之前，div 在 ios4 和 6 中不是问题。

# r - devtools test() 返回“正在加载 [包] 测试 [包] NULL”

> ID：15876888
> 
> 赞同：1
> 
> 时间：2013-04-08T10:31:34.410
> 
> 标签：r, unit-testing, devtools

我对 R 比较陌生，正在尝试开发一个示例包，其中包含文档、单元测试等，以使我自己和公司的其他人能够参考它以获得最佳实践。

考虑到这一点，我将一个 R 函数保存到包结构的 R 文件夹中（由 RStudio 创建，在 git 分支中）

```
#' Loads the typical example for a specific modelling problem
#' 
#' @keywords helper dataset logistic
#' 
#' @param purpose Provide the type of modelling you're looking to do
#' @return dataset A dataset should be added to the workspace
#' 
#' @examples
#' relevantTestDataset(purpose="logistic")
#' relevantTestDataset("logistic")
#' 
#' @export

relevantTestDataset<-function(purpose)
{

  if (purpose=="logistic") 
    {
    loadedPackage<-"caret"
    loadedData<-c("GermanCredit")
      }

  data(list=loadedData,package=loadedPackage)
} 
```

我创建了以下测试（保存到符合 stringr 结构的测试文件夹）

```
context("Basic functionality")

test_that("a dataset is loaded up for each expected model type",{
  expect_that(relevantTestDataset("a"),throws_error())

}) 
```

然后我在开发模式下运行 test() 并得到

```
Loading Example
Testing Example
NULL 
```

我试过 test_dir("/tests/") 并返回一个空的控制台行然后继续。

我尝试了各种期望，看看这是否是问题所在，但都返回相同的控制台输出。我已经通过将其加载到我的工作区并执行它来验证该功能确实有效。

我确定我在这里做了一些完全愚蠢和明显的事情，有人可以准确地告诉我我哪里出错了吗？

在此先感谢，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:54:44.867

你的测试应该在`~inst/tests/`.

例如：

```
context("Basic functionality")

test_that("a dataset is loaded up for each expected model type",{
  expect_that(relevantTestDataset("a"),throws_error())  
}) 
```

应该在一个文件中`~inst/tests/test1.R`。

此外应该有一个文件`~tests/run-all.R`：

```
library(testthat) 
library(<yourpackage>) 
test_package("<yourpackage>") 
```

# java - Eclipse 在一段时间后停止突出显示引用

> ID：15876890
> 
> 赞同：11
> 
> 时间：2013-04-08T10:31:41.563
> 
> 标签：java, android, eclipse, syntax-highlighting

当我在 Eclipse 中打开一个 Java 文件进行编辑时，引用突出显示在一段时间内工作得很好，但几分钟后突然停止工作。

在此示例`parameters`中，最后一个变量是否正确突出显示，但现在它不再工作并且没有突出显示其他任何内容（它应该突出显示`password`）：

![问题示例截图](https://i.stack.imgur.com/CKLS0.png)

切换`Mark Occurrences`并重新打开并不能解决它。我已经尝试过重新启动 Eclipse 并重新启动计算机（实际上这个问题已经有好几个星期了）。

到目前为止，我发现的唯一解决方法是关闭文件，然后重新打开它。但是一段时间后它又停止工作了。

有关信息，我在 Windows 7 64 位机器上使用 Eclipse 4.2.2。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-28T14:07:51.960

解决方法：在大纲视图（右侧）中选择一些内容，然后返回编辑器。

（有关更多信息，请参阅[此错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:06:08.263

它已经被报告为 Eclipse Juno[问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402526)，原因就在[这个 bug](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)中。看起来[这个](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=2223c41bef449202fb6017ee8d7a571cf3e5010f)更新应该会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-04T12:00:22.387

Juno 中的已知错误，此功能经常关闭/打开。我正在使用 **Alt+Shift+O**作为解决方法！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T07:59:12.337

[一种解决方案是从http://www.eclipse.org/downloads/index-developer.php](http://www.eclipse.org/downloads/index-developer.php)安装下一个（当前正在开发的）版本 - Eclipse Kepler (4.3) M7 。突出显示问题在那里得到解决。

但要注意它不是发布版本，所以可能还没有完成。

# php - 正则表达式修剪双引号内的文本

> ID：15876896
> 
> 赞同：0
> 
> 时间：2013-04-08T10:32:10.850
> 
> 标签：php, regex, preg-replace

我想要一个正则表达式，它会在双引号中的文本元素的开头和结尾删除额外的空格。目前我没有想出一个可行的方法。

例如。转换

马丁说“oogle booogle”，玛莎说“totty wottie”

到

马丁说“oogle booogle”，玛莎说“totty wottie”

谢谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:40:09.943

您应该能够使用简单的正则表达式，例如`/"\s*(.*?)\s*"/`并替换为`"$1"`.

**正则表达式的解释：**

*   `"`- 一个字面`"`人物
*   `\s*`- 空格/制表符/换行符重复 0 次或更多次
*   `(.*?)`- 一个惰性捕获组尽可能少地匹配，直到它到达下一部分：
*   `\s*`- 空格/制表符/换行符重复 0 次或更多次
*   `"`- 一个字面`"`人物

**代码**：

```
<?php
    $string = 'Martin said " oogle booogle" and Martha said " totty wottie "';
    $string = preg_replace('/"\s*(.*?)\s*"/', '"$1"', $string);
    var_dump($string);
    //string(58) "Martin said "oogle booogle" and Martha said "totty wottie""
?> 
```

[**演示**](http://codepad.org/Izswvwk7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:36:51.360

```
$string = 'Martin said " oogle booogle" and Martha said " totty wottie "';

$str = preg_replace_callback(
    '/"(.*?)"/',
    function ($matches) {
        return '"' . trim($matches[1]) . '"';
    },
    $string
);

var_dump($str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:42:06.270

试试这个

```
$a = 'Martin said " oogle booogle" and Martha said " totty wottie "';
function Replace1($M){
  //print_r($M);
  return "\"".trim($M[1])."\"";
}
$new=preg_replace_callback("#\"[ ]*(.*?)[ ]*\"#","Replace1",' '.$a.' ');
echo($new); 
```

输出

```
Martin said "oogle booogle" and Martha said "totty wottie" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:46:31.197

虽然马克贝克提供的答案会奏效，但我认为这有点过于复杂了。你不需要回调，一个简单的`preg_replace`就可以了：

```
$string = 'Martin said " oogle booogle" and Martha said " totty wottie "';
$str = preg_replace('/"\s*(.*?)\s*"/', '"$1"', $string); 
```

# cmusphinx - 在 sphinx 4 的语法中添加更多单词后，识别器无法有效工作

> ID：15876899
> 
> 赞同：1
> 
> 时间：2013-04-08T10:32:24.473
> 
> 标签：cmusphinx, sphinx4

我增加了语法的大小，因此通过使用不同的 HMM 在字典中添加了更多具有不同口音的单词。但是识别器没有有效地工作并且使用荒谬的词或者可能没有响应。它主要发生在语法中添加大词的情况下。例如，我在语法中添加了诸如 stackoverflow 之类的单词，并在字典中进行了条目。但它不承认它。请帮忙。

# performance - VUGEN 11.0 脚本总是损坏[Loadrunner 问题]

> ID：15876904
> 
> 赞同：1
> 
> 时间：2013-04-08T10:32:36.650
> 
> 标签：performance, performance-testing, loadrunner

我们的 vugen 脚本损坏了，操作中的代码改组导致我们重新创建脚本，当我们尝试保存或编译脚本时会发生这种情况。

请任何人帮助我们解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:06:06.547

在我尝试过的所有 LR 版本中，都存在一个隐藏问题，并且效果与您描述的一致。

**如果您清空 TEMP 文件夹**（使用工具或手动），**LR VuGen 将丢失有关所有打开脚本**的信息。如果您尝试保存、关闭或除终止进程之外的任何操作，您会丢失您的脚本，因为它会尝试使用垃圾数据更新真实脚本。

当计算机每晚进行“清理”时我发现了这一点，我不小心让 VuGen 在一夜之间打开了一个脚本......

据我所知，这个错误存在于所有版本的 LR 中，至少从 8.0 开始（我没有尝试过 LR 7.x 或更早版本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:20:09.053

K.桑德尔。这不是错误，这是 Microsoft Windows 应用程序的运行方式。当您打开一个文档进行修改时，临时副本是在 $Temp$ 环境变量定义的文件夹中操作的。您在删除打开文件时描述的行为也会影响 Microsoft（办公应用程序）和许多其他供应商的所有其他 Windows 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:58:30.790

你的信息太笼统了。上传您的脚本，然后其他人可能会帮助您。或者使用 LR 11.50 试试看。

# php - 在模型规则错误消息上显示另一个属性值

> ID：15876908
> 
> 赞同：0
> 
> 时间：2013-04-08T10:32:55.273
> 
> 标签：php, yii

我通过校验和验证一个新条目，该校验和是所有条目的 md5() 以查看该条目是否已经存在并且工作正常，但是对于规则消息，我想显示条目“名称”而不是唯一属性下列的：

```
public function rules() {
    return array_merge(parent::rules(), array(
        array('checksum', 'unique', 'message' => 'Store ' . $this->name . 'already exists on the database.'),
    ));
} 
```

规则函数总是将 $this->name 设为 null。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:35:38.640

`CUniqueValidator`支持`{value}`在错误消息中针对这种确切情况的自定义占位符，但不幸的是，它映射到正在验证的属性的值（校验和），因此您不能利用它来显示名称。

此外，当`rules()`被框架调用时，当前实例仍然是空的，因此`$this->name`如上所述将始终具有`name`属性的默认值——通常是`null`.

获得你想要的东西的唯一方法是扩展`CUniqueValidator`，也许像这样：

```
class ExtendedUniqueValidator extends CUniqueValidator
{
    public $additionalPlaceholders;

    protected function addError($object,$attribute,$message,$params=array())
    {
        $params['{attribute}']=$object->getAttributeLabel($attribute);

        $additional = array_filter(
            array_map('trim', explode(',', $this->additionalPlaceholders)));
        foreach ($additional as $attributeName) {
            $params['{'.$attributeName.'}'] = $object->$attributeName;
        }

        $object->addError($attribute,strtr($message,$params));
    }
} 
```

然后，您可以定义验证规则

```
'additionalPlaceholders' => 'name', // comma-separated list
'message' => 'Store {name} already exists on the database.', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:48:45.833

正在验证的对象在规则函数中是不可访问的，而 Yii 中的验证器使用占位符机制来代替。

我认为获得所需行为的正确方法是扩展 uniqueValidator 以将对象名称包含在新的或现有的占位符中。

# php - Mysql问题 - 功能不起作用

> ID：15876910
> 
> 赞同：0
> 
> 时间：2013-04-08T10:33:04.103
> 
> 标签：php, mysql

由于某种原因，我无法从投标中检索我想要的信息。我希望它显示当前项目的所有出价。db、query 或 php 有问题吗？其他功能起作用，只是`bid[bidprice]`不起作用。当我试图让它显示它不会显示等。

```
/*
============
db class
============
*/

public function allbids($id){
        $qry = "SELECT userName , bidPrice as bidPrice FROM bids , users WHERE productID =                $id";
        $rs = $this -> db -> query($qry);
        if($rs) {
            if($rs ->num_rows > 0) {
                $bid = $rs -> fetch_assoc();

            }
            return $bid;

        } else {
            echo 'Error Executing Query';   
        }
        return false;
    }

/*
============
html php
============
*/
 <?php

class ProductView extends View {
    protected function displayContent() {
        if(isset($_GET['id'])) {
        //get the record from database
            $this -> product = $this -> model -> getProductByID($_GET['id']);
            $this -> bidprice = $this -> model ->allbids($_GET['id']);
                if(is_array($this -> product)) {
                    $html = $this -> displayProduct();
                    } else {

                       $html .= '<p>Sorry, that product is not available</p>';

                    }            
                        } else {
                         header("Location:index.php?page=error");

        }
            return $html;
    }

    private function displayProduct() {

            $html = '<div id="product">';
            $html .= '<img src="images/products/'.$this -> product['productImage'].'" alt="'.$this -> product['productName'].'" />';
            $html .= '<h3>'.$this -> product['productName'].'</h3>';
            $html .= '<p><strong>$'.$this -> product['productPrice'].'.00'.'</strong></p>';
            //.sprintf("%.2f" result was breaking the query placed .00\. to give it currency rate.
            $html .= '<p>'.$this -> product['productDescription'].'</p>';
            $html .= '<p>'.$this -> bidprice['bidprice'].'</p>';
               foreach($this -> bidprice as $val)
        {
            $html .= '<p> Bid Price'.$val['bidPrice'].'</p>';
            $html .= '<p> Bidded By'.$val['userName'].'</p>';
        }

            $html .= '</div>';
            $html .='<div id="space">';
            $html .='</div>';

        return $html;        
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:35:19.000

您必须更新查询以指定应从中获取字段的表：

```
SELECT `users`.`userName` AS `userName`, 
       `bids`.`bidPrice` AS `bidPrice` 
FROM `bids`, `users` 
WHERE `bids`.`productID` = $id 
```

对于上述内容，我假设该`productID`字段包含在`bids`表中。此外，您只会从集合中获取第一个返回的记录。如果要获取整个投标历史记录，则需要使用`while()`循环，然后将每条记录写入`bids`数组，然后将其返回。

这样的事情应该可以实现您想要做的事情：

```
public function allbids($id)
{
    $qry = "SELECT `users`.`userName` AS `userName`, 
            `bids`.`bidPrice` AS `bidPrice` 
            FROM `bids`, `users` 
            WHERE `bids`.`productID` = $id";

    $rs = $this->db->query($qry);
    if($rs) 
    {
        $bids = array();
        while($bid = $rs->fetch_assoc())
        {
            $bids = $bid
        }
        return $bids;
    } 
    else 
    {
        echo 'Error Executing Query';   
        return false;
    }
} 
```

调用`allbids(1)`将返回产品 ID 的出价记录数组`1`，或者`false`查询是否有错误。

# magento - 如何在magento客户注册表中添加手机号码和昵称等字段

> ID：15876912
> 
> 赞同：1
> 
> 时间：2013-04-08T10:33:06.787
> 
> 标签：magento, magento-1.7, registration

我想在客户注册表中添加字段手机号码、昵称、职业。我有一个教程，通过它我可以从客户那里获取地址和传真并将它们取回，但是如果我尝试手机号码和昵称，数据没有保存在数据库中，我现在该怎么办? 请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:38:06.353

将移动设备添加到客户注册、客户编辑页面等。从 magento 根目录运行以下设置脚本。

```
define('MAGENTO', realpath(dirname(__FILE__)));

require_once MAGENTO . '/app/Mage.php';

Mage::app();

$installer = new Mage_Customer_Model_Entity_Setup('core_setup');

$installer->startSetup();

$vCustomerEntityType = $installer->getEntityTypeId('customer');
$vCustAttributeSetId = $installer->getDefaultAttributeSetId($vCustomerEntityType);
$vCustAttributeGroupId = $installer->getDefaultAttributeGroupId($vCustomerEntityType, $vCustAttributeSetId);

$installer->addAttribute('customer', 'mobile', array(
        'label' => 'Customer Mobile',
        'input' => 'text',
        'type'  => 'varchar',
        'forms' => array('customer_account_edit','customer_account_create','adminhtml_customer','checkout_register'),
        'required' => 0,
        'user_defined' => 1,
));

$installer->addAttributeToGroup($vCustomerEntityType, $vCustAttributeSetId, $vCustAttributeGroupId, 'mobile', 0);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'mobile');
$oAttribute->setData('used_in_forms', array('customer_account_edit','customer_account_create','adminhtml_customer','checkout_register'));
$oAttribute->save();

$installer->endSetup(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:07:27.640

您必须覆盖客户模块的帐户控制器。您将按照此链接在 magento 中覆盖控制器。[http://inhoo.net/tools-frameworks/how-to-extend-magento-core-controller/](http://inchoo.net/tools-frameworks/how-to-extend-magento-core-controller/)

# java - 尝试通过我的 java 程序查询 dbpedia 时发生 bif:contain 错误

> ID：15876916
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:33:29.087
> 
> 标签：java, sparql, dbpedia

该代码用于从 java 程序中查询 dbpedia，然后在 html 页面中显示结果

```
package jenaamem;

import com.hp.hpl.jena.query.Query;
import com.hp.hpl.jena.query.QueryExecution;
import com.hp.hpl.jena.query.QueryExecutionFactory;
import com.hp.hpl.jena.query.QueryFactory;
import com.hp.hpl.jena.query.ResultSet;
import com.hp.hpl.jena.query.ResultSetFormatter;
import com.hp.hpl.jena.sparql.engine.http.QueryEngineHTTP;

public class db2
{
static public void main(String...argv)
{
    try {
        String queryStr = "SELECT * WHERE{ ?s ?p ?o . ?o bif:contains' barack and obama and america' OPTION (score ?sc) } ORDER BY DESC (?sc) LIMIT 10 ";
        Query query = QueryFactory.create(queryStr);

        // Remote execution.
        QueryExecution qexec =   QueryExecutionFactory.sparqlService("http://dbpedia.org/sparql", query);
        // Set the DBpedia specific timeout.
        ((QueryEngineHTTP)qexec).addParam("timeout", "10000") ;

        // Execute.
        ResultSet rs = qexec.execSelect();
        ResultSetFormatter.out(System.out, rs, query);
        qexec.close();
    } catch (Exception e) {
    }

} 
```

}

这里我在这段代码中面临的问题是 bif:contains 显示错误，我什至尝试过，然后我的问题仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:17:10.500

`bif:contains`是一个带前缀的名称，但您尚未为其定义前缀，因此 ARQ 解析器会抛出应有的错误

不幸`bif:contains`的是，这是一个 Virtuoso 特定的扩展，实际上没有任何关联的前缀，因此您无法定义它。但是，您可以将其包含在`<`其中，`>`以便 ARQ 将其视为 URI，而 Virtuoso 仍会理解它，即`<bif:contains>`在您的查询中使用它。

# php - Laravel 和 CDN 集成

> ID：15876917
> 
> 赞同：2
> 
> 时间：2013-04-08T10:33:29.347
> 
> 标签：php, laravel, cdn

我正在使用 PHP 框架 laravel，并且刚刚购买了 CDN 服务器计划。

我想知道是否有人曾经或建议将 laravel 的一些核心文件移动到 CDN 上以减少加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:37:52.880

将 Laravel 核心文件移动到 CDN 会*增加*而不是*减少*加载时间。想想看 - 你的服务器需要获取网络上的所有 PHP 脚本，每个文件一个请求，这将产生大量数据。PHP fopen 包装器也不支持缓存，因此您将失去 CDN 的主要优势。

如果您真的想减少磁盘 I/O（听起来这就是您想要实现的），请考虑使用操作码缓存（memcache、eAccelerator）。这会将您的 PHP 代码以其执行前编译的形式缓存在 RAM 中，这使您可以安全地将解释步骤从大多数请求的循环中抛出，从而加快页面加载速度。

或者切换到 PHP5.5，虽然它还没有完全准备好，因为它有一个内置的操作码缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T06:05:02.090

这是 Laravel 的 CDN 资产管理器包，默认支持 Amazon S3。

**[https://github.com/Vinelab/cdn](https://github.com/Vinelab/cdn)**

### 通过 Composer 安装它：

```
 {
    "require": {
        "vinelab/cdn": "*"
    } 
```

### 添加您的 CDN 凭据：

```
 'credentials' => [
            'key'    => '',
            'secret'    => '',
        ],

        'buckets' => [
            'bucket-name-here' => '*',
        ] 
```

### 指定要上传的目录、扩展名、文件和模式

```
'include'    => [
    'directories'   => ['public/dist'],
    'extensions'    => ['.js', '.css', '.yxz'],
    'patterns'      => ['**/*.coffee'],
], 
```

### 还要指定要忽略的内容

```
'exclude'    => [
    'directories'   => ['public/uploads'],
    'files'         => [''],
    'extensions'    => ['.TODO', '.txt'],
    'patterns'      => ['src/*', '.idea/*'],
    'hidden'        => true, // ignore hidden files
], 
```

* * *

### 用法：

1.  运行此 artisan 命令将您的资产推送到 CDN。

    **php工匠cdn：推送**

2.  在您的视图或代码中的其他任何地方使用它：

    **{{ Cdn::asset('public/assets/js/script.js') }}**

    **{{ Cdn::asset('public/assets/css/main.css') }}**

# r - GGPLOT - 如何根据预定义的标签区分线并在 x 轴上添加文本

> ID：15876918
> 
> 赞同：3
> 
> 时间：2013-04-08T10:33:30.263
> 
> 标签：r, plot, ggplot2

我有一个如下所示的分发文件：

```
Function Freq
foo 1117
...
qux 1992
..
bar 4158
.. 
```

完整的数据可以在[这里](http://dpaste.com/1051018/plain/)下载。

我想要做的是创建密度图，具有以下内容：

1.  在 x=800 处放置一个[geom_vline](http://docs.ggplot2.org/current/geom_vline.html)，并在图中显示值 800。
2.  对于分布“条”，使用不同粗细的虚线，而不是正常的实线。

这样它就可以创建这样的图形。 ![在此处输入图像描述](https://i.stack.imgur.com/NBULS.jpg)

但我坚持使用以下代码。最好的方法是什么？

```
library(ggplot2)
library(RColorBrewer)

pal <- c(brewer.pal(8,"Dark2"),brewer.pal(12,"Paired"));
dat<-read.table("http://dpaste.com/1051018/plain/",header=TRUE);
dat.sub <- data.frame(dat$Function,dat$Freq)

ggplot(dat.sub,aes(dat.Freq,color=dat.Function),shape=dat.Function)+
stat_density(geom="path",position="identity",size=0.5)+
theme(legend.position="none")+
scale_color_manual(values=pal)+
geom_vline(xintercept=800,colour="red",linetype="longdash") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:49:12.753

要更改线的类型，您应该放在`linetype=dat.Function`里面`aes()`然后使用`scale_linetype_manual()`来更改线类型，类似于线条大小 - 放在`size=dat.Function`里面`aes()`然后使用`scale_size_manual()`来更改线宽（您应该删除`size=0.5`表格`stat_density()`）要标记垂直线的位置，一种可能性是更改在 x 轴上用 . 中断`scale_x_continuous()`或在绘图内添加一些文本`annotate()`。

```
ggplot(dat.sub,aes(dat.Freq,color=dat.Function,
            linetype=dat.Function,size=dat.Function))+
  stat_density(geom="path",position="identity")+
  scale_color_manual(values=pal)+
  geom_vline(xintercept=800,colour="red",linetype="longdash")+
  scale_linetype_manual(values=c(2,1,1))+
  scale_size_manual(values=c(2,0.8,0.8))+
  scale_x_continuous(breaks=c(0,800,2500,5000,7500,10000))+
  annotate("text",label="x=800",x=800,y=-Inf,hjust=0,vjust=1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/FF9Hi.png)

如果要将文本放置`x=800`在轴下方，一种方法是使用网格对象，另一种可能是使用`scale_x_continuous()`and `theme()`。首先，在`scale_x_continuos()`设置800 位置使用`breaks=`和。现在 x 轴下有 6 个数字。使用并且您可以更改文本的功能。如果您为要更改的元素提供值向量，则每个轴文本将具有单独的特征（我为 2\. 元素设置了不同的特征（文本 x=800））`labels=``x=800``theme()``axis.text.x=`

```
ggplot(dat.sub,aes(dat.Freq,color=dat.Function,
               linetype=dat.Function,size=dat.Function))+
  stat_density(geom="path",position="identity")+
  scale_color_manual(values=pal)+
  geom_vline(xintercept=800,colour="red",linetype="longdash")+
  scale_linetype_manual(values=c(2,1,1))+
  scale_size_manual(values=c(2,0.8,0.8))+
  scale_x_continuous(breaks=c(0,800,2500,5000,7500,10000),
                     labels=c(0,"x=800",2500,5000,7500,10000))+
  theme(axis.text.x=
       element_text(color=c("grey35","red","grey35","grey35","grey35"),
                    size=rel(c(1,1.2,1,1,1,1)),
                    face=c("plain","bold","plain","plain","plain","plain"))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ky3WM.png)

# ember.js - 在余烬中选择

> ID：15876924
> 
> 赞同：0
> 
> 时间：2013-04-08T10:33:53.513
> 
> 标签：ember.js, handlebars.js

我的把手模板中有以下代码。

```
{{#each vouchers in content.vouchers}}                
    {{view Ember.Select viewName="hoa[]"
        prompt = "Select Account"
        contentBinding = "content.chartOfAccounts"
        optionLabelPath = "content.ca_name"
        optionValuePath = "content.id"
        selectionBinding = vouchers.ca_id
    }}
{{/each}} 
```

选择填充正确，但似乎我的 selectionBinding 不起作用。在凭证.ca_id 我有当前所选选项的 ID。但它不起作用。

另一件事是我无法为创建的下拉菜单设置名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:38:19.497

`selectionBinding`将绑定整个选定的模型。如果您只想传递值，则应使用`valueBinding`而不是`selectionBinding`.

至于选择名称，只需使用 name="" 而不是`viewName`：

```
{{view Ember.Select name="name_of_select"}} 
```

# php - jQuery 501 错误（不支持的方法（'POST'））

> ID：15876926
> 
> 赞同：2
> 
> 时间：2013-04-08T10:33:57.860
> 
> 标签：php, jquery

我学习 ajax，并在工作目录中设置了一个简单的 httpserver 以在浏览器中运行一些文件。现在发生的事情是，当我运行我的 html 文件时，它看起来如下所示：

```
<!doctype html>
  <html>
    <head>
    <meta charset=utf-8>
    <title>playground</title>
    </head>
    <body>

    <h1>Save</h1>
    <form action="#">
      <textarea name="content" id="content" cols="30" rows="10"></textarea>
      <p><button type="submit">Save</button></p>
    </form>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <script>
    (function($) {

      $('form').on('submit', function(e) {
        $.post('save.php', $(this).serialize(), function(data) {
          console.log(data);
        });
        e.preventDefault();
      });

    })(jQuery);
    </script>

    </body>
  </html> 
```

而“save.php”就是这样：

```
<?php
    $_POST['content'];
?> 
```

然后浏览器给我错误：

```
POST http://localhost:8000/save.php 501 (Unsupported method ('POST')) in jquery.min.js:4 
```

我不明白为什么不支持 post 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:36:16.163

发送

标头**Access-Control-Allow-Origin、Access-Control-Allow-Methods 和 Access-Control-Allow-Headers**

[看这里](https://stackoverflow.com/questions/8470414/strange-jquery-error-code-501-message-unsupported-method-options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:33:12.170

@PSRs 的答案可能有效，但我所做的只是停止在 simpleHTTPServer 上运行简单的应用程序并将其移动到更好地支持 php 的 mamp 服务器...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T15:28:19.800

另一种选择是使用简单服务器的 php 解决方案而不是 python 解决方案：

```
php -S localhost:8000 
```

如果您没有安装 php，请先运行它：

```
sudo apt install php7.2-cli 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-08T11:02:44.677

转移`<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`到`<head>`标签

# windows-server-2008 - 使用 NCSA 时 Squid 不询问用户名和密码

> ID：15876934
> 
> 赞同：1
> 
> 时间：2013-04-08T10:34:16.377
> 
> 标签：windows-server-2008, squid

我在 Windows 机器（Win2K8 服务器，64 位）上使用 squid 代理。我参考[了这个](http://www.cyberciti.biz/tips/linux-unix-squid-proxy-server-authentication.html)链接来启用 NCSA 身份验证。安装顺利，我可以启动服务，但仍然无法获得用户名和密码提示。

下面是我的鱿鱼配置。请注意，我从原始 squid 配置文件中删除了所有注释行以减小帖子的大小（由于 Stack 的字符限制）。

```
#   WELCOME TO SQUID 2.7.STABLE8
#   ----------------------------
#

    auth_param basic program c:/squid/libexec/ncsa_auth.exe c:/squid/etc/passwd
    auth_param basic children 5
    auth_param basic realm Squid proxy-caching web server
    auth_param basic credentialsttl 2 hours
    auth_param basic casesensitive off
#
#Recommended minimum configuration:
acl all src all
acl manager proto cache_object
acl localhost src 127.0.0.1/32
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32
#
# Example rule allowing access from your local networks.
# Adapt to list your (internal) IP networks from where browsing
# should be allowed
acl localnet src 10.0.0.0/8 # RFC1918 possible internal network
#acl localnet src 172.16.0.0/12 # RFC1918 possible internal network
#acl localnet src 192.168.0.0/16    # RFC1918 possible internal network
#
acl SSL_ports port 443
acl Safe_ports port 80      # http
acl Safe_ports port 21      # ftp
acl Safe_ports port 443     # https
acl Safe_ports port 70      # gopher
acl Safe_ports port 210     # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280     # http-mgmt
acl Safe_ports port 488     # gss-http
acl Safe_ports port 591     # filemaker
acl Safe_ports port 777     # multiling http
acl CONNECT method CONNECT
acl ncsa_users proxy_auth REQUIRED
http_access allow ncsa_users

http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localnet

http_access deny all

icp_access allow localnet
icp_access deny all
# Squid normally listens to port 3128
http_port 3128

hierarchy_stoplist cgi-bin ?

#Default:
 cache_mem 8 MB

access_log c:/squid/var/logs/access.log squid

# none

#Suggested default:
refresh_pattern ^ftp:       1440    20% 10080
refresh_pattern ^gopher:    1440    0%  1440
refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
refresh_pattern .       0   20% 4320

coredump_dir c:/squid/var/cache 
```

我已经使用[此](http://www.htaccesstools.com/htpasswd-generator-windows/)生成了 passwd 文件， 请帮助。自上周以来，我一直在努力完成这项工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T18:41:38.300

查看您的规则：

```
http_access allow ncsa_users
http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localnet

http_access deny all 
```

我看到您同时允许 ncsa_users 和 localnet。如果您是从 10.0 网络内部访问它（在描述中看不到），那么您将允许使用此规则的所有流量，而无需任何身份验证： `acl localnet src 10.0.0.0/8 # RFC1918 possible internal network` 因此请尝试将其注释掉，看看它是否有效。

# jmeter - 如何在 CentOS 6.3 服务器上安装 jmeter

> ID：15876935
> 
> 赞同：4
> 
> 时间：2013-04-08T10:34:18.690
> 
> 标签：jmeter

我需要`jmeter`在`CentOS 6.3`服务器上安装以对我的一个项目进行负载测试。如何在 CentOS 6.3 服务器上安装 jmeter？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-03T08:17:48.523

1.  下载 JMeter 二进制文件。
2.  将 apache-jmeter-*.tgz 解压缩到您的首选位置
3.  运行 bin/jmeter.sh

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:40:53.550

[这](http://testedandwrote.blogspot.in/2012/09/installing-jmeter-on-centoswill-work-on.html)是安装`jmeter`在`CentOS`.

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:41:03.583

只需复制 Jmeter 二进制文件即可。确保已安装 java sdk 并为该 JDK 版本选择 jmeter bin 发行版。检查 apache[站点](http://jmeter.apache.org/)以获取更多信息。

请注意，Jmeter 是一个可视化应用程序，需要它来创建和配置测试。

也可以，在配置测试后，您可以使用命令行运行这些测试。

谢谢！

@Leo

# php - 从表中获取逗号分隔值的记录

> ID：15876936
> 
> 赞同：0
> 
> 时间：2013-04-08T10:34:19.160
> 
> 标签：php, mysql

我在我的网站中使用 php。在这里，我想以与逗号分隔值匹配的方式获取记录。请阅读下面的示例
我有两个表。

1.  表 1 说用户，其中有一个列名说`itemcode`

    例如：

    `id = 1 itemcode =3,10`

2.  表 2 说 itemsList，其中也有 itemcode 字段

    例如：

    ```
    id=1 itemcode= 1,3,7,5,
    id=2   itemcode= 4,9,10
    id=3 itemcode= 1,3,10,11
    id=4 itemcode 2,3,7,10
    id=5 itemcode 1,2,8,9 
    ```

我需要显示 itemsList 表中具有 itemcode 的所有记录`3 or 10`

即需要显示ids = 1, 2,3,4的记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:38:58.243

您可以使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
SELECT *
FROM yourtable
WHERE
  FIND_IN_SET(3, itemcode) OR
  FIND_IN_SET(10, itemcode) 
```

请[在此处](http://sqlfiddle.com/#!2/62b3f/1)查看小提琴。

# android - 升级后在 Android 中保留数据库

> ID：15876938
> 
> 赞同：1
> 
> 时间：2013-04-08T10:34:20.877
> 
> 标签：android

我有一个 android 应用程序，在我的 sqlite DB 中有一些表，我想升级我的应用程序，因此我需要更改一些现有的表结构，还需要添加可以包含旧表数据的新表。如何在不丢失用户保存的数据的情况下进行管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:36:55.390

这`onUpgrade()`就是调用的方法：

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

如果数据库版本不同，您可以在该方法中处理结构更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:07:39.720

您需要确定所需的字段。在[onUpgrade()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)首先创建新表，然后将所需字段复制到新表。然后删除旧表中您不想要的列和行，如果您不想要更多，也将其删除

也请参阅[这个](http://myandroidsolutions.blogspot.in/2012/07/android-database-tutorial.html)有用的教程..

# vbscript - 从 VBScript 中 HTTP 文件的 x 位置开始下载 n 个字节

> ID：15876949
> 
> 赞同：3
> 
> 时间：2013-04-08T10:35:05.940
> 
> 标签：vbscript

我已经看到许多处理通过 VBScript 将 HTTP 文件下载到 ADO 缓冲区的示例，但我不知道如何调整这些示例以使用我需要的内容：从给定字节位置 x 开始下载并下载 n 个字节。我认为这与以下调用有关：

`object.Open "GET", "url", asyncValue`

上面的代码尝试下载整个文件。那么我可以改变这一点，还是有一种完全不同的方法可以让我在 VBScript 中实现我所需要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:38:22.520

使用[`XMLHttpRequest`](http://msdn.microsoft.com/en-us/library/hh453379)并设置`Range`标题：

```
url = "..."

first = 123
last  = 321

Set req = CreateObject("MSXML2.XMLHTTP.6.0")
req.Open "GET", url, False
req.setRequestHeader "Range", "bytes=" & first & "-" & last
req.Send

If req.Status = 200 Then WScript.Echo req.ResponseText 
```

您可以通过设置分块检索远程文件

```
first = iteration * chunksize
last  = first + chunksize 
```

`last`或者您可以通过省略该值来检索文件的其余部分：

```
first = 123
last  = "" 
```

如果远程文件是二进制文件，您可能需要将其保存到如下文件：

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type = 1 'binary
stream.Write req.responseBody
stream.SaveToFile "C:\out.file"
stream.Close 
```

# c++ - 为什么 std::bitset<8> 变量无法处理 11111111？

> ID：15876953
> 
> 赞同：0
> 
> 时间：2013-04-08T10:20:50.470
> 
> 标签：c++

为什么这个程序显示以下输出？

```
#include <bitset>
#include <cstdio>
#include <iostream>

int main()
{
    std::bitset<8> b1(01100100); std::cout<<b1<<std::endl;
    std::bitset<8> b2(11111111); std::cout<<b2<<std::endl; //see, this variable
                                                           //has been assigned
                                                           //the value 11111111
                                                           //whereas, during
                                                           //execution, it takes
                                                           //the value 11000111.
                                                           //Same is the case with b1
    std::cout << "b1 & b2: " << (b1 & b2) << '\n';
    std::cout << "b1 | b2: " << (b1 | b2) << '\n';
    std::cout << "b1 ^ b2: " << (b1 ^ b2) << '\n';
getchar();
return 0;
} 
```

这是输出：

```
01000000
11000111
b1 & b2: 01000000
b1 | b2: 11000111
b1 ^ b2: 10000111 
```

首先，我认为头文件有问题（我使用的是 MinGW），所以我使用 MSVCC 进行了检查。但它也表明了同样的事情。请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T10:26:37.500

您`std::bitset`使用**数字** `01100100`和启动`11111111`。只需查看输出：

```
01000000
11000111 
```

两者都是错误的。您使用二进制表示`std::bitset`的十进制数`11111111`启动`101010011000101011000111`。首先是数字`01100100`是八进制表示：`1001000000001000000`二进制。并`std::bitset`取其中的最低有效八位。

这是正确的[代码](http://liveworkspace.org/code/eGjEp$0)：

```
#include <bitset>
#include <iostream>
#include <string>

int main()
{
    std::bitset<8> b1(std::string("01100100")); std::cout<<b1<<std::endl;
    std::bitset<8> b2(std::string("11111111")); std::cout<<b2<<std::endl;
    std::cout << "b1 & b2: " << (b1 & b2) << '\n';
    std::cout << "b1 | b2: " << (b1 | b2) << '\n';
    std::cout << "b1 ^ b2: " << (b1 ^ b2) << '\n';
    return 0;
} 
```

和正确的输出：

```
01100100
11111111
b1 & b2: 01100100
b1 | b2: 11111111
b1 ^ b2: 10011011 
```

# c# - 一个代码示例说明 async/await 和 Reactive (Rx) 扩展的范例之间的区别？

> ID：15876957
> 
> 赞同：19
> 
> 时间：2013-04-08T10:35:15.957
> 
> 标签：c#, task-parallel-library, system.reactive, async-await, c#-5.0

既是系统。[.NET 的响应式扩展](http://msdn.microsoft.com/en-us/library/hh242985%28v=vs.103%29.aspx)和[新的 C# 5.0 (.NET 4.5)`async/await`](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)追求（或基于）[未来并承诺构造](http://en.wikipedia.org/wiki/Futures_and_promises)范例（方法）。

你能给出 (*) 最简单的 C# 代码示例来说明它们之间的区别吗？

(*)
没有 I/O、互联网或数据库连接是否可行？

**更新：**
好吧，如果这个问题似乎以前得到了回答，让我重新表述一下。
为什么要在使用本机 .NET [Iobservable](http://msdn.microsoft.com/en-us/library/dd990377%28v=vs.100%29.aspx) / [IObserver](http://msdn.microsoft.com/en-us/library/dd783449.aspx) + [await/async](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)的同时添加并开始使用 .NET 的 Reactive (Rx) 扩展？

有哪些可能的说明来说明 Rx 会缺少什么，导致在没有 Rx 的情况下做同样的事情更笨拙或效率更低（即只使用原生 .NET Iobservable/IObserver + await/async 方法）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T11:33:49.670

Future/Promise 范式通常用于在将来返回单个值。也许需要一些繁重的计算或 IO，因此不能保证及时同步返回。

Rx（以及代理`IObserver<T>`/`IObservable<T>`接口）是可观察序列的范例。正如同步方法可以返回单个值（int）一样，它也可以返回`IEnumerable<int>`一个值。将此与异步世界进行比较，`Task<int>`可以返回单个`int`值，`IObservable<int>`可以返回只有一个`int`值的序列。

因此，如果您想返回一系列值`Task<T>`，则必须创建某种延续，或者将值的集合/数组/列表作为`T`eg返回`Task<int[]>`。然而，这将意味着您获得所有或非所有值。

`Task`/`Task<T>`也是一个具体类型，因为 Rx 使用接口将您从实现中抽象出来。我发现这有助于单元测试。`TaskCompletionSource<T>`然而，在测试任务时有助于避免隐式并发。

最后，除了 Rx 处理值序列（而不是单个值）的主要区别之外，Rx 还被设计为与 LINQ 一起使用，以提供似乎与序列很好地工作的查询和组合优势（无论是静止的`IEnumerable<T>`，或像运动一样`IObservable<T>`）。

最终，这些是用于略有不同工作的不同工具。有一些重叠，所以你有时可以用一个来做另一个更擅长的事情。具体来说，我认为`Task`更好地组合异步工作单元（执行此操作，然后执行此操作，然后执行此操作），而 Rx 更擅长将事件序列组合在一起（当此事件发生时，使用来自这另一个事件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-23T13:45:43.023

我喜欢 Reactive 文档中的表格：[http ://reactivex.io/intro.html](http://reactivex.io/intro.html)

我对它有自己的看法，我添加了第三维不可组合/可组合。

```
不可组合：

       | 单品 | 多个项目
 ------|----------------|----------------
 同步 | 功能 | 可迭代
 异步 | 异步函数 | 可观察的

可组合：

       | 单品 | 多个项目
 ------|-----------|-------- ---------
 同步 | 高阶函数 | Linq/Ramda/java.util.stream
 异步 | 未来/承诺 | Rx 可观察的

```

请注意，根据实现，您可以拥有可以同步或异步操作的期货和 rx 可观察对象，具体取决于您尝试对它们执行的操作是同步的还是异步的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T11:12:47.510

它们并不相互排斥。主要的决定是你是否有一个单一的未来结果或多个未来的结果。

[http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)

[http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-31-75-metablogapi/0815.image_5F00_thumb_5F00_59BBA077.png](http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-31-75-metablogapi/0815.image_5F00_thumb_5F00_59BBA077.png)

# c++ - 如果条件有效，这将如何？

> ID：15876960
> 
> 赞同：1
> 
> 时间：2013-04-08T10:35:22.263
> 
> 标签：c++, if-statement

我有以下 IF 语句，但我无法弄清楚它的含义：

```
if (data->tokens.size()) 
{..
  //reads each token in a for loop and assigns each token to a variable...
} 
```

令牌中有六个值，所以`tokens.size()`应该返回**6**，对吧？

我不明白为什么我们需要一个 if 条件？据我了解，如果返回 1 则条件为真，如果**返回**`tokens.size()`0**则为**假。

 ****在我的情况下，它返回**6**（或任何数量的令牌，可以是任何数字，而不仅仅是 0 或 1）。那么如果条件起作用，这是如何工作的呢？

换句话说，我想知道 if 在获取 0 和 1 以外的值时如何处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:38:10.093

如果没有给出其他内容，C 和 C++ 中的条件语句会隐含地与“不等于零”进行比较。例如`if (data->tokens.size())`与 相同`if (data->tokens.size() != 0)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:39:26.317

`if`采用 true 或 false bool 表达式，而不是数字。对我们来说幸运的是，如果你给出一个数字，它将被转换为一个布尔值。如果数字为 0，则为 false，否则为 true，因此它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:39:03.607

我认为这只是对非空性的测试，以确保我们不会遍历空向量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:39:55.077

它是有条件的而不是循环。如果为真，则进入条件块。如果它为零，那么它是错误的并且它不会进入块。如果有除 0 以外的任何其他值，则为真并进入块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T10:43:00.880

```
if(data->tokens.size()) ~ if(data->tokens.size()!=0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T11:45:44.877

为了更准确：[标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)说：

> 6.4 选择声明
> 
> 选择声明：
> 
> ```
> if ( condition ) statement 
> ```
> 
> ……条件规则既适用于选择语句，也适用于`for`and`while`语句（6.5）。...条件的值是在除 switch 语句之外的语句中的初始化声明，是上下文转换为的声明变量的值`bool`（第 4 条）。如果该转换格式不正确，则程序格式错误。… 作为表达式的条件的值是表达式的值，根据上下文**转换为`bool`;** 如果该转换格式不正确，则程序格式错误。

转换为 bool 的意思是：

> 4 标准转换
> 
> 某些语言结构要求将表达式转换为布尔值。对于某些发明的临时变量 t (8.5)，当且仅当 **声明**格式正确时，出现在这种上下文中的表达式`e`被称为上下文转换并格式正确。`bool`**`bool t(e);`**

这个很重要。这就是为什么你可以做这种“魔术”：

```
while(getline(cin,str))) cout<<str; 
```

with 将适用`bool(cin)`（在这种情况下`getline`返回`cin`））

在您的示例中，转换将是：

> 4.12 布尔转换 [conv.bool]
> 
> 1 算术、无作用域枚举、指针或指向成员类型的指针的纯右值可以转换为类型的纯右值`bool`。零值、空指针值或空成员指针值转换为`false`; 任何其他值都转换为`true`. 对于直接初始化（8.5），类型的纯右值`std::nullptr_t`可以转换为类型的纯右值`bool`；结果值为`false`。

顺便说一句，`if`您的示例中的 很有可能几乎没有用，甚至只是混淆了代码。考虑：

```
for (int i=0; i< data->tokens.size(); ++i) 
{..
  //reads a token and assigns to a variable...
} 
```

或者：

```
for( const auto &token : data->tokens)
    {..
      // assigns token to a variable...
    } 
```

在这两种情况下，`for`只有在`size()>0`使多余的`if`.****

# .net - .NET 内存泄漏，使用 GC.Collet() 或不要

> ID：15876961
> 
> 赞同：0
> 
> 时间：2013-04-08T10:35:25.570
> 
> 标签：.net, vb.net, memory-leaks, garbage-collection, profiling

我在 vb.net 中有以下代码：

```
Public Async Function WriteData(buffer() As Byte, offset As Integer, count As Integer) As System.Threading.Tasks.Task
        Try
            Using data_writer = IO.WindowsRuntimeStreamExtensions.AsStreamForWrite(_outputStream)
                Await data_writer.WriteAsync(buffer, offset, count)
                Await data_writer.FlushAsync
            End Using
        Catch ex As Exception
             Logger.Write(ex)
        End Try
    End Function 
```

我调用函数 WriteDate 太多了，但我注意到每次调用该函数时内存都会增加，因为您可以看到数据写入器流和 _outputStream 因使用而被释放。

当我运行 vs Profiler 时，分析器显示 95% 的内存被我的代码中的“缓冲区”字节数组保留过多。

1-您在我的代码中看到任何问题吗？2-如何清除字节数组？

-- 我在 Await data_writer.FlushAsync 行之后向该函数添加了以下代码

```
buffer = Nothing
GC.Collect() 
```

所以我的内存并没有像以前那样增加，但是我在我的应用程序中调用 WriteData 太多了，我读到不建议调用 GC.Collect 太多。

不调用 GC.Collect 内存会跳转到 300 MB，而 GC.Collect() 内存不会超过 50MB。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:44:37.123

在尝试控制 GC 之前，您应该了解它的工作方式。垃圾回收主要由“内存压力”驱动；也就是说，当你的程序内存不足时可以立即使用，会发生一个collection，以便释放一些。

您的内存使用量是 300MB 而没有调用`GC.Collect`的原因是因为 .NET 在运行代码时没有压力。因为它没有压力，所以不会浪费时间运行一个集合。分配的 300MB 内存没有被积极使用——你的代码并没有因为你在调用而神奇地更高效`Collect`——但是 .NET 没有理由在那时进行整理。

我的建议是：不要调用`GC.Collect`，除非您有特定且有意义的理由来减少应用程序的内存使用。需要时，垃圾收集器会自行收集该内存（您可能会看到使用量增加，然后定期回落到约 50MB）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:27:11.647

这是一个通用的 GC 问题，并非特定于 Phone 或 Await。虽然它肯定无助于解决问题。问题是您的缓冲区太大，超过 85KB。太大而无法被 GC 轻松压缩，因此它被分配在大对象堆中。现在第 0 代中没有足够的小对象来触发收集。LOH 仅在 gen#2 收集期间被清理，因此调用 GC.Collect() 确实是一种解决方法。

避免调用 Collect() 的两种基本策略。首先强烈支持使用较小的缓冲区，小到足以在 gen#0 中分配。做一点点工作总是更好，Await 关键字应该真的有助于在您的代码中进行微不足道的更改。很难说，我们看不到来电者。

第二种策略是*重用*缓冲区，因此您只需要其中一个。这又是多么容易，这在很大程度上取决于调用者的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T18:44:17.060

在另一种情况下，我遇到了同样的问题，使用 HTTP Server，但我找到了真正的解决方案：

永远不要使用 AsStreamForWrite()，直接使用 WinPRT IOuputStream（我想这是可能的，即使在 VB 中也是如此） AsStreamForWrite() 创建一个内部 Stream，它只会占用内存（在某些情况下）并且永远不会释放它。

# css - 为什么我的 Android 设备宽度为 980 像素？

> ID：15876964
> 
> 赞同：7
> 
> 时间：2013-04-08T10:35:29.007
> 
> 标签：css, responsive-design, media-queries

我很困惑。我正在尝试通过播放媒体查询来使网站具有响应性。

根据大多数消息来源，例如[this](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)，用于智能手机的 mediq-query 是`max-device-width: 480px`and `min-device-width: 320px`。

但是当我使用这些查询时，我的 android 2.x 仍然显示页面的“计算机版本”。所以我开始更改查询中的值并注意到我的手机似乎有 980px 的设备宽度..

这是为什么？我真的很想掌握这一点，当然我很高兴在使用 980 时它可以正常工作，但我想知道发生了什么以及为什么？我的意思是我的手机不应该是 980px 宽或高，这是某种像素密度问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-22T06:10:39.963

我知道这个问题很老，但对于未来的人来说，这很可能是因为 OP 没有设置正确的元标记。将此添加到标题中。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:47:34.860

您可能想尝试使用`max-width`而不是`max-device-width`. 它很可能是一个像素密度的东西——`max-device-width`可能是报告设备像素而不是 CSS 像素。

这是一个测试页面：

*   [http://jsfiddle.net/56XhE/](http://jsfiddle.net/56XhE/)

要真正了解这一点，您需要阅读 Peter-Paul Koch 的“两个视口的故事”：

*   [http://www.quirksmode.org/mobile/viewports.html](http://www.quirksmode.org/mobile/viewports.html)
*   [http://www.quirksmode.org/mobile/viewports2.html](http://www.quirksmode.org/mobile/viewports2.html)

可能还有他关于为移动设备做 CSS 的建议：

*   [http://www.quirksmode.org/blog/archives/2010/09/combining_meta.html](http://www.quirksmode.org/blog/archives/2010/09/combining_meta.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:39:31.923

有关设备宽度的信息，请参阅以下 URL：

[http://www.javascriptkit.com/dhtmltutors/cssmediaqueries2.shtml](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries2.shtml)

# opencv - opencv 正方形检测示例检测窗口衬里，当我使用 imageroi 时，它会裁剪整个图像

> ID：15876971
> 
> 赞同：1
> 
> 时间：2013-04-08T10:35:56.600
> 
> 标签：opencv

我目前正在尝试检测图像中的框，然后我想裁剪检测到的框以在我的项目中使用它……但是，opencv 的方形检测样本也检测到图像的衬里……所以，问题是我如何才能只检测图像中的框？？我使用的是opencv244，c ++ ......只是为了记录，我已经在这里搜索过这个主题，但我无法得到任何想法......任何帮助将不胜感激，谢谢！这是我的图片的链接...

1.  原图：[http ://www.flickr.com/photos/94841531@N08/8631367890/in/photostream/lightbox/](http://www.flickr.com/photos/94841531@N08/8631367890/in/photostream/lightbox/)
2.  检测到的盒子：[http ://www.flickr.com/photos/94841531@N08/8631368138/in/photostream/lightbox/](http://www.flickr.com/photos/94841531@N08/8631368138/in/photostream/lightbox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:44:38.393

忽略**最大的正方形**。

在 **squares.cpp* 中有这个函数：

```
static void findSquares( const Mat& image, vector<vector<Point> >& squares )
{

} 
```

它接收 a`Mat`和 a `vector<vector<Point> >`。所以在调用这个函数之后，原始的绿色矩形还没有绘制出来`image`，你可以迭代**过滤掉在输入图像中找到的最大的**`squares`矩形。

 **您可以[查看这篇文章](https://stackoverflow.com/a/13532779/176769)以检查**如何识别**图像中发现的最大正方形。

之后，您可能想要[查看这篇文章](https://stackoverflow.com/a/7756000/176769)以**从正方形向量中提取图像区域**。

请记住，它会`drawSquares()`在图像上绘制绿色的东西。**

# dependency-injection - zf2 'Zend\Db\Adapter\Profiler\ProfilerInterface 类型为“NULL”的无效实例化器

> ID：15876972
> 
> 赞同：0
> 
> 时间：2013-04-08T10:36:08.150
> 
> 标签：dependency-injection, dependencies, zend-framework2, adapter

这是警告

```
 zf2 'Invalid instantiator of type "NULL" for "Zend\Db\Adapter\Profiler\ProfilerInterface" 
```

所以，这是我的 local.config.php，不知何故，适配器希望我使用函数 setProfile 设置配置文件。setProfile 函数位于'Zend\Db\Adapter\Adapter'。我是一个编程的白痴，我不知道如何解决这个问题，我什至不知道它期望什么参数而不是 NULL，我什至不想要一个分析器.....

```
include (__DIR__ . '/../../vendor/Core/config/function.local.php');

$dbParams = $functionVars['dbParams'];

return array(
  'di' => array(
     'allowed_controllers' => array(
       'Application\Controller\IndexController',
       'Login\Controller\FormController',
       'Login\Controller\RegisterController',
     ),
     'instance' => array(
       'Zend\Db\Adapter\Adapter' => array(
         'parameters' => array(
            'driver' => 'Zend\Db\Adapter\Driver\Pdo\Pdo',
         ),
       ),
       'Zend\Db\Adapter\Driver\Pdo\Pdo' => array(
         'parameters' => array(
            'connection' => 'Zend\Db\Adapter\Driver\Pdo\Connection',
         ),
       ),
       'Zend\Db\Adapter\Driver\Pdo\Connection' => array(
         'parameters' => array(
           'connectionParameters' => array(
             'dsn'            => "mysql:dbname=" . $dbParams['database'] . ";host=" . $dbParams['hostname'],
             'username'       => $dbParams['username'],
             'password'       => $dbParams['password'],
             'driver_options' => array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''),
           ),
         ),
      ),
    ),
  ),
); 
```

# android - FFMPEG：使用 ffmpeg-android ndk 将 mp4 转换为 mp3

> ID：15876974
> 
> 赞同：4
> 
> 时间：2013-04-08T10:36:10.527
> 
> 标签：android, video, android-ndk, ffmpeg

我想将格式的视频文件转换为`mp4`格式的音频文件`mp3`。通过命令行很简单，但我找不到如何通过`jni`. 不确定要调用哪个库和哪个函数。任何有关此问题的帮助将不胜感激。

# css - 样式表中的 base64 SVG 样式

> ID：15876975
> 
> 赞同：3
> 
> 时间：2013-04-08T10:36:11.900
> 
> 标签：css, svg

所以我有以下 CSS 来生成 SVG 徽标：

```
 background: url("data:image/svg+xml;base64,xyz....."); 
```

有谁知道如何在样式表中使用 CSS 更改图标的颜色，而不是嵌入在 SVG 标签中。

我试图在页面上多次使用不同颜色的相同徽标，因此不想在我的样式表中加载多个版本的 SVG 代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:34:29.033

如果您要以不同的大小大量使用它，则可能值得制作自定义图标字体。

然后您可以使用 css 对其进行样式设置并使用 em 来保持其相对大小等。

[http://www.font2web.com/](http://www.font2web.com/)等将采用 SVG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T12:18:36.170

正如评论中所说：如果您使用 base64 格式显示 SVG 图像，则无法使用外部 CSS 对其进行样式设置。唯一的方法是使用`<svg>`可以看到标签和属性的原始格式，或者直接插入到您的 html 中或从外部文件加载。

# sql - 合并两个查询的输出

> ID：15876978
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:36:24.420
> 
> 标签：sql, tsql

我有 2 张桌子：

SalesOrder - 有 2 条记录

```
OrderID   Order Desc
101       My Order1
102       My Order2 
```

SalesOrderLine - 具有以下记录：

```
OrderID    Order_Line
101        10
101        20
102        10
102        20
102        30 
```

我的预期结果是，当我执行查询时，它应该给我：

*   TotalSalesordercount 为 2；和
*   `LineCount`作为`2 for Order 101`和`3 for Order 102`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:42:15.637

```
select 
  t1.orderid, 
  count(distinct t1.orderid) as 'TotalSalesordercount', 
  count(*) as 'LineCount'   
from 
  SalesOrder T1, 
  SalesOrderLine T2
where 
  t1.orderid = t2.orderid
group by 
  t1.orderid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:45:37.857

您将要`JOIN`在两个表上`OrderId`然后使用聚合函数：

```
select so.orderid,
  so.order_desc,
  count(ol.orderid) LineCount,
  (select count(*) from salesorder) TotalOrders
from salesorder so
inner join orderline ol
  on so.orderid = ol.orderid
group by so.orderid, so.order_desc; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/b5c91/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:47:31.080

这样的事情将适用于您的数据：

```
select so.OrderId
  , TotalSalesordercount = (select count(distinct OrderId) from SalesOrderLine)
  , LineCount = count(1)
from SalesOrder so
  inner join SalesOrderLine sol on so.OrderId = sol.OrderId
group by so.OrderId 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/b5579/8)。

# php - mssql_num_row 需要 1 个参数才能获得资源

> ID：15876979
> 
> 赞同：0
> 
> 时间：2013-04-08T10:36:26.417
> 
> 标签：php, sql

这是我的代码：

```
 $link=mssql_connect($server, 'username','password');
if (!$link) {
    die('Something went wrong while connecting to the mssql database, it could be offline! ' . mssql_get_last_message());
}
mssql_select_db('GunzDB', $link);
$result="SELECT * FROM Account WHERE UserID = '$username'";

if(mssql_num_rows($result) > 0){
    echo "That username is already in use!";
} else{
    $result="SELECT * FROM Account WHERE Email = '$email'";

    if(mssql_num_rows($result) > 0){
        echo "That email is already in use!";
    } else{

        $query="INSERT INTO Account (UserID, UGradeID, PGradeID, RegDate, Name, Email) VALUES ('" . $username . "','0','0','00:00','" . $name . "','" . $email . "')";
        if($query){
            $result="SELECT * FROM Account WHERE UserID = '$username'";

            $row = mssql_fetch_array($result);
            $AID=$row['AID'];
            $query="INSERT INTO Login (AID, Password) VALUES ('" . $AID . "','" . $password . "')";
            if($query){
                echo "<span style='color: lime'>Your account has been successfully created!</span>";
            } else{
                echo "error with MSSQL: " . mssql_get_last_message();
            }
        } else{
            echo "error with MSSQL: " . mssql_get_last_message();
        }
    }
} 
```

我不断收到这些错误

```
Warning: mssql_num_rows() expects parameter 1 to be resource, string given in /var/www/gunz/register.php on line 81

Warning: mssql_num_rows() expects parameter 1 to be resource, string given in /var/www/gunz/register.php on line 86

Warning: mssql_fetch_array() expects parameter 1 to be resource, string given in /var/www/gunz/register.php on line 94 
```

它与这些行有关

```
$result="SELECT * FROM Account WHERE UserID = '$username'";

$result="SELECT * FROM Account WHERE Email = '$email'";

$result="SELECT * FROM Account WHERE UserID = '$username'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:40:55.140

您没有使用 mssql_query() 函数。

用这个：

```
$result=mssql_query("SELECT * FROM Account WHERE UserID = '$username'");

$result=mssql_query("SELECT * FROM Account WHERE Email = '$email'");

$result=mssql_query("SELECT * FROM Account WHERE UserID = '$username'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:39:08.037

您不执行任何查询：

```
$result= "SELECT * FROM Account WHERE UserID = '$username'";
if (mssql_num_rows($result) > 0){ 
```

它应该是 ：

```
$result = mssql_query("SELECT * FROM Account WHERE UserID = '$username'");
if (mssql_num_rows($result) > 0){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:39:32.370

你不应该给一个字符串作为输入`mssql_num_rows`

应该是做之后得到的资源`mssql_query`

喜欢

```
$query = mssql_query('SELECT * FROM a');

echo mssql_num_rows($query); 
```

并不是

```
$query = 'SELECT * FROM a';

echo mssql_num_rows($query); 
```

# c# - 使用 jQuery 获取 Ajax:ComboBox 的选定值

> ID：15876980
> 
> 赞同：0
> 
> 时间：2013-04-08T10:36:37.183
> 
> 标签：c#, jquery, webforms

我想获得一个 asp.net 的选定值`Ajax:ComboBox`

```
<Ajax:ComboBox ID="Cmb_Class" runat="server" MaxLength="0"></Ajax:ComboBox> 
```

组合框是从我尝试过的数据库中填充的，
但它不起作用；

```
var class = $("#<%=Cmb_Class.ClientID %>option:selected").val(); 
```

那是因为在运行时，生成的 html 是

```
 <div id="Cmb_Class" class="WindowsStyle" style="display:inline-block;">
    <table id="Cmb_Class_Table" class="ajax__combobox_inputcontainer" style="border-width:0px;border-style:None;border-collapse:collapse;display:inline-block;position:relative;top:5px;" cellpadding="0" cellspacing="0">
        <tbody><tr>
            <td class="ajax__combobox_textboxcontainer"><input name="ctl00$CPH_Content$Cmb_Class$Cmb_Class_TextBox" id="Cmb_Class_TextBox" autocomplete="off" style="width: 180px; margin: 0px;" type="text"></td><td class="ajax__combobox_buttoncontainer"><button style="height: 25px; width: 25px; margin: 0px; padding: 0px; visibility: visible;" id="Cmb_Class_Button" type="button"></button></td>
        </tr>
    </tbody></table><ul id="Cmb_Class_OptionList" class="ajax__combobox_itemlist" style="display: none; visibility: hidden; z-index: 10000; overflow-x: hidden; overflow-y: auto; width: 230px; position: absolute; height: 266px;"><li>--Select--</li><li>1-A</li><li>1-B</li><li>1-C</li><li>1-D</li><li>1-E</li><li>1-F</li><li>1-G</li><li>2-A</li><li>2-B</li><li>2-C</li><li>2-D</li><li>3-A</li><li>3-B</li><li>3-C</li><li>3-D</li><li>4-A</li><li>4-B</li><li>4-C</li><li>5-A</li><li>5-B</li><li>6-A</li><li>6-B</li><li>7-A</li><li>8-A</li><li>9-A</li><li>10-A</li><li>11-A</li><li>12-A</li><li>Nursery-lily</li><li>Nursery-sun</li><li>Nursery-moon</li><li>Nursery-sky</li><li>Nursery-tulip</li><li>Nursery-roze</li><li>Nursery-star</li><li>Play Group-Blue</li><li>KG-1</li><li>KG-2</li><li>KG-3</li><li>KG-4</li><li>KG-5</li><li>KG-6</li><li>KG-7</li><li>KG-8</li><li>KG-9</li><li>KG-10</li><li>KG-11</li><li>KG-12</li></ul><input name="ctl00$CPH_Content$Cmb_Class$Cmb_Class_HiddenField" id="Cmb_Class_HiddenField" value="0" type="hidden">
</div> 
```

如您所见，它生成表。
**那么，我如何获取选定的值并使用 jQuery 检查该值是否为空；**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:38:32.907

使用隐藏的输入字段来获取选定的值。

```
$("#Cmb_Class_HiddenField").val() 
```

# ravendb - 在 IISExpress 上运行 RavenDB 时无法创建数据库

> ID：15876983
> 
> 赞同：1
> 
> 时间：2013-04-08T10:36:41.387
> 
> 标签：ravendb, iis-express

正如标题所说。（来自邮件列表的交叉帖子：[https](https://groups.google.com/forum/#!topic/ravendb/hxP3REWVMdg) ://groups.google.com/forum/#!topic/ravendb/hxP3REWVMdg ）

iisexpress 进程以当前登录的用户身份运行，但我在尝试创建数据库时只收到未经授权的错误消息。

访问 /debug/user-info 只会给出以下消息： {"Remark":"Using anonymous user","AnonymousAreAdmins":false}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:21:03.240

感谢 Fitzchak Yitzchaki，我在 RavenDB 邮件列表中得到了答案：
[https ://groups.google.com/forum/?fromgroups=#!topic/ravendb/hxP3REWVMdg](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/hxP3REWVMdg)

正确的做法是将`AnonymousAccess`web.config 中的设置设置为`Admin`：

```
<add key="Raven/AnonymousAccess" value="Admin"/> 
```

该`AnonymousAccess`设置没有很好的记录，但它告诉 RavenDB 如何对待匿名用户。在这种情况下，它将所有都视为管理员，因此只能在开发中使用。对于生产，它应该重置为默认值，即`All`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:56:10.210

试试这个。

```
var store = new EmbeddableDocumentStore
            {
                Configuration = { Port = 8081 },
                DataDirectory = "~\\App_Data\\Raven",
                UseEmbeddedHttpServer = true
            };
store.Initialize(); 
```

使用“App_Data”可能会让它为你工作。

# c# - 捕获控制台输入输出

> ID：15876985
> 
> 赞同：0
> 
> 时间：2013-04-08T10:36:53.887
> 
> 标签：c#

我有一个控制台应用程序，它从控制台读取输入并将输出写入控制台。我需要编写另一个程序来运行第一个程序，为它模拟控制台输入并获取输出。您能否提供一种针对此问题的调查方法？

控制台应用程序代码的（非常简单的）示例：

```
string input = Console.ReadLine();
int value = int.Parse(input);
Console.WriteLine(value * value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:47:00.803

您可以创建新`Process`的并分配它的`StandardInput`和`StandardOutput`属性。

```
ProcessStartInfo processStartInfo = 
  new ProcessStartInfo(executableName, executableParameter);
processStartInfo.UseShellExecute = false;
processStartInfo.ErrorDialog = false;
processStartInfo.RedirectStandardError = true;
processStartInfo.RedirectStandardInput = true;
processStartInfo.RedirectStandardOutput = true;
Process process = new Process();
process.StartInfo = processStartInfo;
bool processStarted = process.Start();
StreamWriter inputWriter = process.StandardInput;
StreamReader outputReader = process.StandardOutput;
StreamReader errorReader = process.StandardError;
//Write and read process console using inputWriter and outputReader.
process.WaitForExit(); 
```

# c# - 从图像中读取原始字节数据

> ID：15876987
> 
> 赞同：1
> 
> 时间：2013-04-08T10:36:58.340
> 
> 标签：c#

我需要从 Image 获取原始数据，我正在使用 Bitmap LockBits

图像为 24BppRgb 但创建位图后，位图格式为 32BppArgb

知道为什么会这样

```
 System.Drawing.Bitmap bmp = new Bitmap(image);
    Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
    System.Drawing.Imaging.BitmapData bmpData = bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadOnly, image.PixelFormat);
    IntPtr ptr = bmpData.Scan0;
    int bytes = Math.Abs(bmpData.Stride) * bmp.Height;
    byte[] rgbValues = new byte[bytes];
    Marshal.Copy(ptr, rgbValues, 0, bytes);
    bmp.UnlockBits(bmpData);
    bmp.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:17:55.330

我怀疑您的原始图像实际上是 32bppArgb。如果是这种情况，为什么不转换为 RGB？

```
var bmp24bppRgb = new Bitmap(image.Width, image.Height, PixelFormat.Format24bppRgb);

using (var g = Graphics.FromImage(bmp24bppRgb))
{
  g.DrawImage(image, new Rectangle(0, 0, image.Width, image.Height));
} 
```

...然后使用您的代码访问转换后的图像的位。

# c# - 将 PartialView 显示为弹出窗口

> ID：15876993
> 
> 赞同：0
> 
> 时间：2013-04-08T10:37:24.493
> 
> 标签：c#, asp.net-mvc, jquery

在我看来，我有；

```
@foreach (var item in Model)
{
    <li>@Html.ActionLink("click me", "popup", "SomeData", new{id = item.ID}, new {@class = "PopUp"})</li>
} 
```

然后我有一个看起来像这样的控制器；

```
public ActionResult popup(Guid id)
{
    var singelData = db.SomeRandomData.Find(id);

    return PartialView(singelData);
} 
```

还有一个像这样的 partialView；

```
<div>This a popup</div>
@Model.metadata1 
```

到目前为止一切顺利，当我点击一个链接时，我被重定向到一个 partialView。

现在到我不舒服的部分，脚本部分，这是我的尝试；

```
<script src="~/Scripts/jquery-ui-1.8.20.js"></script>
<script type="text/javascript">
    $(function () {
        $('.PopUp').click(function () {
            $('<div/>').appendTo('body').dialog({
                close: function (event, ui) {
                    dialog.remove();
                },
                modal: true
            }).load(this.href, {});

            return false;            
        });
    });
</script> 
```

但它仍然只是返回一个视图。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:18:09.193

您应该确保在显示的 2 个脚本**之前包含 jQuery。**此外，我建议您使用 javascript 调试工具（例如 FireBug）并查看控制台窗口，您可能会在其中看到脚本的潜在错误。

# jquery - 页面中所有 ajax 的 JQuery ajaxComplete

> ID：15876994
> 
> 赞同：0
> 
> 时间：2013-04-08T10:37:31.393
> 
> 标签：jquery, ajax

我有 Java Script 文件，我想在 Ajax 请求/响应完成后做一些事情，所以我找到了这个函数，但我有多个 Ajax 请求/响应，我希望它在所有主题完成后触发。

```
$(document).ajaxComplete(function() {
  alert("Completed");
});

$(function main() {
  ...
  for (var i = 1; i < length; i++) {
    $.ajax({...});
}); 
```

我怎么能实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:54:39.780

使用[ajaxStop](http://api.jquery.com/ajaxStop/)而不是[ajaxComplete](http://api.jquery.com/ajaxComplete/)，它在每个 ajax 请求完成时触发。

```
$( document ).ajaxStop(function() {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:01:05.830

通过使用 ajaxsend 和 ajaxstop 来轻松识别开始和结束。

```
$("document").bind("ajaxSend", function() {
               console.log("********ajax call started ********");
  }).bind("ajaxStop", function() {
               console.log("********ajax call stoped ********");
  }).bind("ajaxError", function() {
               console.log("********ajax call error ********");
  }); 
```

# php - 显示提供的参数无效的警告

> ID：15876997
> 
> 赞同：3
> 
> 时间：2013-04-08T10:37:41.517
> 
> 标签：php, mysql

当我在 mysql 中添加数据时执行内部联接时，它显示错误 mysql_fetch_array 不是有效参数。**代码如下：**

```
 echo $sql="SELECT * FROM info
 INNER JOIN item ON info.info_id=item.info_id where item.info_id=".$info_id;
        $query=mysql_query($sql);
         while($result=mysql_fetch_array($query))
        { 
             echo "<tr>";
             echo "<td>" .$result['Name']. "</td>";
        echo "<td>" .$result['Item']. "</td>";
         echo "<td>" .$result['Price']. "</td>";
        echo "<td>" .$result['info_id']. "</td>";
             echo "<td><a href='item.php?act=edit&id=".$result['id']."'>Edit</a></td>";
             echo "<td><a href='item.php?act=delete&id=".$result['id']."'>Delete</a></td>";
             echo "<td><a href='item.php?act=item&id=".$result['id']."'>Item</a></td>";
echo "</tr>"; 
```

**运行上述代码时，它显示以下警告：**

警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:48:31.097

该`mysql_query`方法可能会默默地失败。如果是，它会返回`FALSE`，所以你应该这样做：

```
$query=mysql_query($sql);
if (!$query) {
    die('MSSQL error: ' . mssql_get_last_message());
} 
```