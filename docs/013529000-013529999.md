# StackOverflow 问答 13529000-13529999

# python - 将列表追加到列表，覆盖值

> ID：13529003
> 
> 赞同：3
> 
> 时间：2012-11-23T12:18:02.427
> 
> 标签：python, list, append, overwrite

我想追加到 list1，另一个 list2，所以修改 list2 和另一个时间追加到 list1，但 list1 的值被覆盖。

我使用`[:]`了附加并且工作正常：

```
list1=[1,2]
list2=[]

list2.append(list1[:])

list1[0]=20

print list1, list2 # [20, 2] [[1, 2]] 
```

但问题是当列表中有另一个列表时

```
list1=[[2,1],[2]] 
list2=[]

list2.append(list1[:])

print list1, list2  #[[2, 1], [2]] [[[2, 1], [2]]]

list1[0][0]=25

list2.append(list1)

print list1, list2  #[[25, 1], [2]] [[[**25**, 1], [2]], [[25, 1], [2]]] 
```

我想成为最后的印刷品`[[25, 1], [2]] [[[2, 1], [2]], [[25, 1], [2]]]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:24:44.820

我想你要问的是：

```
from copy import deepcopy
list1.append(deepcopy(list2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:31:49.373

**我建议您创建一个与list1**指向的列表内容完全相同的新对象，并使**listT1**指向该副本。这样，如果您修改**list1**（或**list1**指向的内容），**listT1**（或**listT1**指向的内容）将保持不变。例如 ：

```
>>> list1=[[2,1],[2]]
>>> list2=[]
>>> lisT1 = [[2,1],[2]]
>>> list2.append(lisT1[:])
>>> print (list1, list2)
[[2, 1], [2]] [[[2, 1], [2]]]
>>> list1[0][0]=25
>>> list2.append(list1)
>>> print (list1, list2)
[[25, 1], [2]] [[[2, 1], [2]], [[25, 1], [2]]] 
```

# dns - 使用域名进入网络

> ID：13529006
> 
> 赞同：5
> 
> 时间：2012-11-23T12:18:07.320
> 
> 标签：dns, wamp, wampserver

我在本地网络中配置了一个 Wamp 服务器，它运行良好。**我可以使用 xxx.xxx.xxx/myproject 访问每个项目，但是，作为另一种选择，我可以将它们配置为从本地网络**访问 www.myproject.com 或[http://myproject.com](http://myproject.com) 吗？我是一名嵌入式系统程序员，我必须使用各种机器访问我的嵌入式以太网板。它适用于 IP 地址，但我只想知道它是否可能。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T12:23:30.833

你可以通过配置你的虚拟主机和你的 apache 的 httpd.conf 文件来做到这一点

**配置阿帕奇**

您的 apache 文件将位于：

*   c:\wamp\Apache2\conf\httpd.conf

搜索类似的东西：

```
DocumentRoot 'c:/wamp/www' 
```

并在 DocumentRoot 'c:/wamp/www' 之后将以下代码添加到文件中：

```
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    ServerName localhost
    DocumentRoot 'C:\wamp\www'
</VirtualHost>
<VirtualHost 127.0.0.1>
    ServerName yourdomain.com
    DocumentRoot 'C:\wamp\www\ClientsMyClient'
</VirtualHost> 
```

**配置主机文件**

通过终端在mac上：

*   须藤纳米 /etc/hosts

在 Windows 7 上：

*   以管理员身份打开文本编辑器
*   打开文件并转到：%Systemroot%\System32\Drivers\Etc

（来源：[在 Windows 7 中编辑主机文件](http://www.windowsreference.com/windows-7/edit-hosts-file-in-windows-7-windows-vista/)）

当你打开它时，只需在文件中写入一个新行：

```
XXX.XXX.XXX yourdomain.com
(mostly this will be: 127.0.0.1 yourdomain.com) 
```

我建议您使用 yourdomain.local，因为如果您曾经托管过一个网站，您可能会混淆哪个是公共网站，哪个是本地网站 :)。

然后在您的浏览器中输入：yourdomain.com，您应该能够在 wamp 服务器上托管一个项目，并使用他自己的域。

希望这可以帮助！:-)

（来源：http: [//viralpatel.net/blogs/how-to-setup-multiple-virtual-hosts-in-wamp/](http://viralpatel.net/blogs/how-to-setup-multiple-virtual-hosts-in-wamp/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:20:26.153

打开 C:\Windows\system32\drivers\etc\hosts 并在 localhost 地址（127.0.0.1）之后添加您想要的域名，例如 www.example.com，并在 IP 地址和域名之间留一个空格。

例如，127.0.0.1 www.example.com

注意：您需要在 Administrator Privileges 中打开“hosts”文件。**

# jquery - 如何使用 Typescript 通过 AMD 模块加载 Jquery 插件

> ID：13529010
> 
> 赞同：2
> 
> 时间：2012-11-23T12:18:13.480
> 
> 标签：jquery, typescript, js-amd

我可以像这样使用 amd 模块加载 jQuery -[在 TypeScript 中通过 AMD 需要 jquery](https://stackoverflow.com/questions/12763684/how-to-require-jquery-via-amd-in-typescript) 我也了解插件如何在没有模块的情况下修改 jquery 界面 -[在 TypeScript 中使用 jQuery 插件](https://stackoverflow.com/questions/12719529/using-jquery-plugin-in-typescript)

但是如何通过 AMD 模块加载 jQuery 插件？它是否更新了 jQuery 界面？

```
import plugin1 = module("jquery.tmpl");
import jQuery= module("jquery"); 
```

plugin1 和 jQuery 都会有不同版本的 jQuery 接口，plugin1 不会添加到 jquery 模块中定义的接口。

我尝试将每个文件中的模块命名为相同

```
export module jQuery {
   // .., jQuery definitions
} 
```

但它仍然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T01:24:33.963

Typescript 不会导入模块，除非它们导出一些东西，除非你直接使用它们导出的东西，但是对于像 JQuery 插件这样简单地将新方法添加到 $. 解决方案是使用[此处](https://www.stevefenton.co.uk/Content/Blog/Date/201410/Blog/TypeScript-AMD-Dependency-Comment/)记录的 amd-dependency 标志。

在文件顶部添加这样的一行：

```
///<amd-dependency path="jgrowl" /> 
```

`define`这将强制 Typescript在已编译的 Javascript的调用中列出它。您还需要在 require.config 中为您的插件设置路径和填充程序，如下所示：

```
require.config({
  paths: {
    jquery: "external/jquery-2.1.1",
    jgrowl: "external/jquery.jgrowl-1.4.0.min",
  },
  shim: {
    'jgrowl': { deps: ['jquery'] },
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:24:02.927

[将以下内容添加到github/definetelytyped](https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery-1.8.d.ts)上 jquery.d.ts 文件的末尾。

```
declare module "jquery"{ 
 /****
 AJAX
*****/
export function ajax(settings: JQueryAjaxSettings): JQueryXHR;
export function ajax(url: string, settings?: JQueryAjaxSettings): JQueryXHR;

export function  ajaxPrefilter(dataTypes: string, handler: (opts: any, originalOpts: any, jqXHR: JQueryXHR) => any): any;
export function ajaxPrefilter(handler: (opts: any, originalOpts: any, jqXHR: JQueryXHR) => any): any;

export var ajaxSettings: JQueryAjaxSettings;

export function ajaxSetup(options: any);

export function get(url: string, data?: any, success?: any, dataType?: any): JQueryXHR;
export function getJSON(url: string, data?: any, success?: any): JQueryXHR;
export function getScript(url: string, success?: any): JQueryXHR;

export function param(obj: any): string;
export function param(obj: any, traditional: bool): string;

export function post(url: string, data?: any, success?: any, dataType?: any): JQueryXHR;

/*********
 CALLBACKS
**********/
export function Callbacks(flags?: string): JQueryCallback;

/****
 CORE
*****/
export function holdReady(hold: bool): any;
export function (selector: string, context?: any): JQuery;
export function (element: Element): JQuery;
export function (object: { }): JQuery;
export function (elementArray: Element[]): JQuery;
export function (object: JQuery): JQuery;
export function (func: Function): JQuery;
export function (array: any[]): JQuery;
export function (): JQuery;

export function noConflict(removeAll?: bool): Object;

export function when(...deferreds: any[]): JQueryPromise;

/***
 CSS
****/
export function css(e: any, propertyName: string, value?: any);
export function css(e: any, propertyName: any, value?: any);
export var cssHooks: { [key: string]: any; };
export var cssNumber: any;

/****
 DATA
*****/
export function data(element: Element, key: string, value: any): any;
export function data(element: Element, key: string): any;
export function  data(element: Element): any;

export function dequeue(element: Element, queueName?: string): any;

export function hasData(element: Element): bool;

export function queue(element: Element, queueName?: string): any[];
export function queue(element: Element, queueName: string, newQueueOrCallback: any): JQuery;

export function removeData(element: Element, name?: string): JQuery;

/*******
 EFFECTS
********/
export var fx: { tick: () => void; interval: number; stop: () => void; speeds: { slow: number; fast: number; }; off: bool; step: any; };

/******
 EVENTS
*******/
export function proxy(context: any, name: any): any;
export function Deferred(): JQueryDeferred;

/*********
 INTERNALS
**********/
export function error(message: any);

/*************
 MISCELLANEOUS
**************/
export var expr: any;
export var fn: any;  //TODO: Decide how we want to type this
export var  isReady: bool;

/**********
 PROPERTIES
***********/
export var browser: JQueryBrowserInfo;
export var support: JQuerySupport;

/*********
 UTILITIES
**********/
export function contains(container: Element, contained: Element): bool;

export function each(collection: any, callback: (indexInArray: any, valueOfElement: any) => any): any;

export function extend(target: any, ...objs: any[]): Object;
export function extend(deep: bool, target: any, ...objs: any[]): Object;

export function globalEval(code: string): any;

export function grep(array: any[], func: any, invert: bool): any[];

export function inArray(value: any, array: any[], fromIndex?: number): number;

export function isArray(obj: any): bool;
export function isEmptyObject(obj: any): bool;
export function isFunction(obj: any): bool;
export function isNumeric(value: any): bool;
export function isPlainObject(obj: any): bool;
export function isWindow(obj: any): bool;
export function isXMLDoc(node: Node): bool;

export function makeArray(obj: any): any[];

export function map(array: any[], callback: (elementOfArray: any, indexInArray: any) =>any): JQuery;

export function merge(first: any[], second: any[]): any[];

export function noop(): any;

export function now(): number;

export function parseJSON(json: string): Object;

//FIXME: This should return an XMLDocument
export function parseXML(data: string): any;

export function queue(element: Element, queueName: string, newQueue: any[]): JQuery;

export function trim(str: string): string;

export function type(obj: any): string;

export function unique(arr: any[]): any[];
} 
```

然后只需使用：

```
import $ = module("jquery"); 
```

这假设您的 jquery js 文件位于同一目录中并命名为 jquery.js。[您可以在我的博客](http://iandrake.com/downloads/)的下载部分看到我的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:39:30.940

您需要使用 import 语句加载它并添加带有引用的定义文件。

```
///<reference path="jquery.templ.d.ts" />

import plugin = module("jquery.templ"); 
```

# android - Android：如何拒绝其他应用程序访问我的帐户（帐户和同步）？

> ID：13529015
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:18:33.577
> 
> 标签：android

Android：如何拒绝其他应用程序访问我的帐户（帐户和同步）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:21:01.317

默认情况下，android os 不允许其他应用访问您的组件。所以你不必担心它。如果您想允许其他应用访问您的组件，则必须更改权限。

# java - Java (SE) 表单验证 API

> ID：13529018
> 
> 赞同：1
> 
> 时间：2012-11-23T12:18:52.920
> 
> 标签：java, swing, oop

来自 PHP，使用 CodeIgniter，处理表单验证非常简单；我现在正在寻找类似于我的 Java 应用程序的东西。（不是网络应用程序，也就是说）

当然，我可以创建自己的方法来实现这一点，并在提交按钮的`actionPerformed`事件上运行它。但是，这会导致很多`if(formElement.getText.isEmpty())`等等。

当然，必须有更好的方法来做到这一点？最好没有`XML`或大的笨拙的框架。我只找到了为 Java Web 应用程序执行此操作的框架。谢谢。

# javascript - JQuery 使用 div.find 发送数据

> ID：13529019
> 
> 赞同：0
> 
> 时间：2012-11-23T12:18:55.117
> 
> 标签：javascript, jquery

如何正确写：

```
var data = packageDiv.find('[name$=Code]').val();
var s = s + data;
packageDiv.find('[name$=Code]').val() = s; 
```

我遇到了问题：

```
packageDiv.find('[name$=Code]').val() = s; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:20:01.923

试试这个：

```
packageDiv.find('[name$=Code]').val(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:20:05.143

```
packageDiv.find('[name$=Code]').val(s); 
```

# html - Iframe 未在 Drupal 站点中显示

> ID：13529021
> 
> 赞同：2
> 
> 时间：2012-11-23T12:19:10.813
> 
> 标签：html, drupal, iframe, module

我正在使用[Iframe 模块](http://drupal.org/project/iframe)模块来显示 Iframe

它向我显示页面中的空白内容部分。

任何人都可以知道我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:34:28.190

您能否尝试**重新激活**您的**IFRAME 模块**可能是一些模块安装问题或数据库中的某些参数未更新

我有同样的问题，现在通过重新激活模块解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:50:17.117

最可能的原因是输入格式。如果 iframe 没有像输入格式那样显示`Filtered HTML`，那么您可能应该尝试将其更改为`Full HTML`.

# c# - 非静态字段、方法或属性需要对象引用

> ID：13529022
> 
> 赞同：0
> 
> 时间：2012-11-23T12:19:11.893
> 
> 标签：c#, asp.net-mvc-3

我通读了关于同一问题的其他主题，但不确定我是否应该解决一个问题，在我的例子中。

我有以下内容：

```
public interface ITrainingService : IDependency
{
   void ResetModule(int id, int userScormModuleId, int currentUser);
}

public class TrainingService : ITrainingService
{
 public void ResetModule(int id, int userScormModuleId, int currentUser)
 {
   Zinc.Repositories.Scorm.IScormModuleRepository.ResetModule(id, userScormModuleId, currentUser);  //i get the error here
 }
} 
```

ResetModule 包含在：

```
public class ScormModuleRepository : Repository<ScormModule>, IScormModuleRepository
{
   public void ResetModule(int id, int userScormModuleId, int currentUser)
   {
     using (SqlConnection conn = new SqlConnection(ZincModelContainer.CONNECTIONSTRING))
     {
         using (SqlCommand cmd = conn.CreateCommand())
         {
           conn.Open();
           cmd.CommandType = System.Data.CommandType.StoredProcedure;
           cmd.CommandText = "[Zinc].[ResetUserScormModuleData]";

           SqlParameter param = new SqlParameter("@userId", System.Data.SqlDbType.Int);
           param.Value = id;
           cmd.Parameters.Add(param);

           SqlParameter param2 = new SqlParameter("@userScormModuleId", System.Data.SqlDbType.Int);
           param2.Value = userScormModuleId;
           cmd.Parameters.Add(param2);

           SqlParameter param3 = new SqlParameter("@currentUser", System.Data.SqlDbType.Int);
           param3.Value = currentUser;
           cmd.Parameters.Add(param3);

           cmd.ExecuteNonQuery();
        }
     }
  }
}
 public interface IScormModuleRepository : IRepository<ScormModule>
 {
   void ResetModule(int id, int userScormModuleId, int currentUser);
 } 
```

整个错误：错误 1 ​​非静态字段、方法或属性需要对象引用 'Zinc.Repositories.Scorm.IScormModuleRepository.ResetModule(int, int, int)' C:\TFSPreview\Zinc\Project\ServiceImplementations \TrainingService.cs 501 8 锌

我不明白？我必须如何从一个实例工作？或者我必须实例化什么或者我的问题是另一种性质？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:24:58.980

您需要一个实现`IScormModuleRepository`. 使用您的代码，应该调用什么方法？`IScormModuleRepository`是一个接口，它甚至不包含您尝试调用的方法的实现......

你需要这样的东西：

```
public class TrainingService : ITrainingService
{
    IScormModuleRepository _repository;

    public TrainingService(IScormModuleRepository repository)
    {
        _repository = repository;
    }

    public void ResetModule(int id, int userScormModuleId, int currentUser)
    {
        _repository.ResetModule(id, userScormModuleId, currentUser);
    }
} 
```

你现在可以`TrainingService`像这样使用你的：

```
var repository = new ScormModuleRepository(...);
var trainingService = new TrainingService(repository);
trainingService.ResetModule(...); 
```

# c++ - 内存泄漏，找不到源

> ID：13529024
> 
> 赞同：1
> 
> 时间：2012-11-23T12:19:13.790
> 
> 标签：c++, memory-leaks, mfc, kinect

我有一个很大的内存泄漏，我需要一些帮助来找出它的来源。首先，关于代码的一些理论：

这是一个 Kinect 项目。它是在 MS Visual Studio 2012 中构建的 MFC 项目，它使用 Direct2D 将图像放在屏幕上。当我从 Kinect 1 切换到 Kinect 2 时会出现此问题。然后重建除“主”对象之外的每个对象（解构/释放并设置为 NULL（如果指针））。这包括：

*   所有 Direct2D 对象（工厂、渲染目标、位图、画笔、一切）
*   带有线程的 Kinect 面部跟踪器
*   带有线程的 kinect 对象。

对于每个 new 关键字，我在析构函数中使用了 delete 关键字（所以我没有做任何事情来破坏没有用 new 初始化的指针）。我关闭了所有线程处理程序并将它们设置为 NULL。

现在我有内存泄漏，我需要一些帮助才能找到它。我从使用[MS MFC 工具开始](http://msdn.microsoft.com/en-us/library/c99kz476(v=vs.80).aspx)

初始化后我有一些输出：

```
Dumping objects ->
{402} normal block at 0x1531E8F0, 28 bytes long.
 Data: <<       @       > 3C 07 06 00 F0 00 00 00 40 01 00 00 00 05 00 00 
{401} normal block at 0x152F6CD8, 96 bytes long.
 Data: <    >           > 00 CD CD CD 3E 07 06 00 D0 04 00 00 D8 17 00 00 
{400} normal block at 0x03EA0040, 1229064 bytes long.
 Data: <R            E, > 52 07 06 00 B8 A9 13 00 D0 87 D0 00 18 45 2C 15 
{396} normal block at 0x152C9EA0, 20 bytes long.
 Data: <                > 80 F9 89 00 01 00 00 00 01 00 00 00 01 00 00 00 
c:\users\work\documents\github\kinectmain\testmfc\main.cpp(148) : {305} client block at 0x152CF618, subtype c0, 8 bytes long.
a CFont object at $152CF618, 8 bytes long
{295} normal block at 0x152CFC20, 24 bytes long.
 Data: <X   ( , X       > 58 07 CC 00 28 F8 2C 15 58 07 CC 00 00 00 CD CD 
{284} normal block at 0x152CF828, 24 bytes long.
 Data: <X   X     ,     > 58 07 CC 00 58 07 CC 00 20 FC 2C 15 01 00 CD CD 
{206} normal block at 0x00CD0588, 12 bytes long.
 Data: <    @       > B0 04 CD 00 40 05 CD 00 B8 A9 13 00 
{205} normal block at 0x00CD0540, 12 bytes long.
 Data: <            > 88 05 CD 00 B0 04 CD 00 18 BE 13 00 
{204} normal block at 0x00CD04F8, 8 bytes long.
 Data: <        > EC F3 89 00 00 00 00 00 
{203} normal block at 0x00CD04B0, 12 bytes long.
 Data: <@           > 40 05 CD 00 88 05 CD 00 CD CD CD CD 
{202} normal block at 0x00CD0468, 12 bytes long.
 Data: <    H       > 08 FE CC 00 48 A5 CC 00 18 BE 13 00 
{201} normal block at 0x00CCFE08, 12 bytes long.
 Data: <H   h       > 48 A5 CC 00 68 04 CD 00 B8 A9 13 00 
{200} normal block at 0x00CCA590, 8 bytes long.
 Data: <        > FC A4 CC 00 00 00 00 00 
{199} normal block at 0x00CCA548, 12 bytes long.
 Data: <h           > 68 04 CD 00 08 FE CC 00 CD CD CD CD 
c:\users\work\documents\github\kinectmain\testmfc\main.cpp(163) : {198} normal block at 0x00CCA4F8, 16 bytes long.
 Data: <R       H       > 52 07 06 00 90 A5 CC 00 48 A5 CC 00 02 00 00 00 
{188} normal block at 0x00CC07B0, 8 bytes long.
 Data: <        > 9C FB A1 00 00 00 00 00 
{187} normal block at 0x00CC0758, 24 bytes long.
 Data: <( , ( ,   ,     > 28 F8 2C 15 28 F8 2C 15 20 FC 2C 15 01 01 CD CD 
Object dump complete.
0 bytes in 0 Free Blocks.
1229392 bytes in 17 Normal Blocks.
13498 bytes in 73 CRT Blocks.
0 bytes in 0 Ignore Blocks.
8 bytes in 1 Client Blocks.
Largest number used: 1245916 bytes.
Total allocations: 2504946 bytes. 
```

在 kinect 切换之后：

```
Dumping objects ->
{961} normal block at 0x1531E8F0, 28 bytes long.
 Data: <<       @       > 3C 07 06 00 F0 00 00 00 40 01 00 00 00 05 00 00 
{960} normal block at 0x1534A658, 96 bytes long.
 Data: <    >   p       > 00 CD CD CD 3E 07 06 00 70 05 00 00 A8 15 00 00 
{959} normal block at 0x03EA0040, 1229064 bytes long.
 Data: <R         ,   4 > 52 07 06 00 18 BE 13 00 90 F1 2C 15 98 9B 34 15 
{956} normal block at 0x152CBFD0, 20 bytes long.
 Data: <                > 80 F9 89 00 01 00 00 00 01 00 00 00 01 00 00 00 
c:\users\work\documents\github\kinectmain\testmfc\main.cpp(148) : {305} client block at 0x152CF618, subtype c0, 8 bytes long.
a CFont object at $152CF618, 8 bytes long
{295} normal block at 0x152CFC20, 24 bytes long.
 Data: <X   ( , X       > 58 07 CC 00 28 F8 2C 15 58 07 CC 00 00 00 CD CD 
{284} normal block at 0x152CF828, 24 bytes long.
 Data: <X   X     ,     > 58 07 CC 00 58 07 CC 00 20 FC 2C 15 01 00 CD CD 
{206} normal block at 0x00CD0588, 12 bytes long.
 Data: <    @       > B0 04 CD 00 40 05 CD 00 B8 A9 13 00 
{205} normal block at 0x00CD0540, 12 bytes long.
 Data: <            > 88 05 CD 00 B0 04 CD 00 18 BE 13 00 
{204} normal block at 0x00CD04F8, 8 bytes long.
 Data: <        > EC F3 89 00 00 00 00 00 
{203} normal block at 0x00CD04B0, 12 bytes long.
 Data: <@           > 40 05 CD 00 88 05 CD 00 CD CD CD CD 
{202} normal block at 0x00CD0468, 12 bytes long.
 Data: <    H       > 08 FE CC 00 48 A5 CC 00 18 BE 13 00 
{201} normal block at 0x00CCFE08, 12 bytes long.
 Data: <H   h       > 48 A5 CC 00 68 04 CD 00 B8 A9 13 00 
{200} normal block at 0x00CCA590, 8 bytes long.
 Data: <        > FC A4 CC 00 00 00 00 00 
{199} normal block at 0x00CCA548, 12 bytes long.
 Data: <h           > 68 04 CD 00 08 FE CC 00 CD CD CD CD 
c:\users\work\documents\github\kinectmain\testmfc\main.cpp(163) : {198} normal block at 0x00CCA4F8, 16 bytes long.
 Data: <R       H       > 52 07 06 00 90 A5 CC 00 48 A5 CC 00 02 00 00 00 
{188} normal block at 0x00CC07B0, 8 bytes long.
 Data: <        > 9C FB A1 00 00 00 00 00 
{187} normal block at 0x00CC0758, 24 bytes long.
 Data: <( , ( ,   ,     > 28 F8 2C 15 28 F8 2C 15 20 FC 2C 15 01 01 CD CD 
Object dump complete.
0 bytes in 0 Free Blocks.
1229392 bytes in 17 Normal Blocks.
13498 bytes in 73 CRT Blocks.
0 bytes in 0 Ignore Blocks.
8 bytes in 1 Client Blocks.
Largest number used: 1245916 bytes.
Total allocations: 3742634 bytes. 
```

所以总分配量从 2504946 字节增加到 3742634 字节，但没有其他变化。

此外，每次开关我都会收到以下错误：

```
calling DestroyWindow in CWnd::~CWnd; OnDestroy or PostNcDestroy in derived class will not be called. 
```

即使在程序关闭之前我不会调用destroyWindow。

关于可能是什么原因或我可以使用什么工具来查找原因的任何提示、建议或提示都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T13:12:02.727

{ } 括号中的数字是分配订单号。如果你的程序是完全确定的并且每次都做同样的事情，那么这些数字应该从一次运行到下一次保持不变。

在这种情况下，您可以使用此技巧。将以下代码添加到 main 函数的顶部：

```
long lBreakAlloc = 0;
if ( lBreakAlloc > 0 )
{
    _CrtSetBreakAlloc( lBreakAlloc );
} 
```

`if`然后在该语句上设置一个断点并启动您的程序。当它停在 时`if`，更改 的值`lBreakAlloc`以匹配您的第一个泄漏内存块的分配顺序号，然后让程序继续。

当它到达分配该内存块的位置时，嘿！它将在调试器中停止，您可以准确地看到哪个分配没有被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:41:35.673

您`unInit`在`Kinect`课堂上的方法绝对是内存泄漏的来源。每个字段都设置为空，而不首先删除指向的对象（如果有的话）。我还发现了至少一种方法，它返回指向新对象的指针 ( `selectKinect`)。除非您仔细管理这些对象，否则它们也将成为内存泄漏的来源。

您可能希望考虑使用库来帮助您进行内存管理。Boost 的共享指针非常有用。

```
#include <boost/shared_ptr.hpp>

using boost::shared_ptr;

shared_ptr<Kinect> kinect(new Kinnect);

kinect->SomeMethodOnKinnect(); 
```

Boost 的共享指针使用引用计数来知道何时删除对象并在调用 shared_ptr 构造函数和析构函数时自动更新对象的引用计数。

你真的需要用细齿梳来检查你的代码，因为你的代码似乎充满了内存泄漏。下面的代码说它应该删除指针，但只是将它们设置为 NULL。

```
//Should delete a pointer and set it to NULL
void FaceTracking::Release()
{
    faceTrackingResult = NULL;
    nuiPresent = NULL;
    ColorBuffer = NULL;
    DepthBuffer = NULL;
} 
```

# javascript - 用于检测任何（所有）浏览器的浏览器后退按钮单击的代码

> ID：13529025
> 
> 赞同：8
> 
> 时间：2012-11-23T12:19:18.220
> 
> 标签：javascript, session, cross-browser, back-button

> **可能重复：**
> [阻止使用后退按钮（在 IE 中）](https://stackoverflow.com/questions/54539/prevent-use-of-the-back-button-in-ie)
> [禁用浏览器上的后退按钮](https://stackoverflow.com/questions/87422/disabling-back-button-on-the-browser)
> [如何禁用 IE 和 firefox 中的后退按钮？](https://stackoverflow.com/questions/780718/how-to-disable-back-button-in-ie-and-firefox)

多次处罚，我认为发布这个问题不合适，因为它已经被问过很多次了，但这次我发布准备好应对后果，因为我别无选择。我会回答任何评论，我也可以在下面给出的任何链接上展示我的尝试（你会感兴趣）。

我有一个 loginpage 和一个 page1。我需要处理或不使用登录页面上的浏览器后退按钮。这是可能的，因为**我已经为 FF 和 Chrome 做过，**但不能为 IE 做。我的 FF 工作代码如下。

```
window.onload = function ()
{
    if (typeof history.pushState === "function")
    {
        history.pushState("jibberish", null, null);
        window.onpopstate = function ()
        {
            history.pushState('newjibberish', null, null);
            // alert('back button pressed');
            // This works in Chrome and FireFox but not in IE
        };
    }
} 
```

我需要在我的登录页面中有一些代码（适用于所有浏览器），以便：**期望的输出：**在登录页面上按下后退按钮不会将用户带回 page1（**就像 facebook 登录页面一样**）。**我不想禁用后退按钮**，只是为了处理它对登录页面的点击。

**从评论**编辑。****请回答要做什么**，我已阅读“不要这样做”，但没有阅读该做什么。以下代码每次都适用于页面加载，除非通过单击登录页面的后退按钮加载此页面（第 1 页）**

 **```
 if (Session["role"] == null)
        Response.Redirect("login.aspx"); 
```

我试图就同一问题提出一些问题，但无法得到我需要的东西。如果没有其他解决方案，我宁愿不使用 window.location.hash 但准备好

[代码项目 - 注销后浏览器后退按钮问题](http://www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout)

[BlogSpot - 检测浏览器的返回按钮](http://www.csharpcourses.com/2008/05/detect-back-button-of-browser.html)

[SO - 禁用浏览器后退按钮](https://stackoverflow.com/questions/961188/disable-browsers-back-button)

[SO - 禁用浏览器上的后退按钮](https://stackoverflow.com/questions/87422/disabling-back-button-on-the-browser)

[SO - 检测返回按钮点击](https://stackoverflow.com/questions/6359327/detect-back-button-click-in-browser)

[所以 - 在 window.location.hash - 改变？](https://stackoverflow.com/questions/680785/on-window-location-hash-change)

以下是几个插件。我试图跟随，但不知道它们是否是为我需要的，如果它们是我无法正确使用它们中的任何一个

[Salajax：简单的 Ajax 库](http://www.codeproject.com/Articles/19562/Salajax-simple-Ajax-library-solving-back-button-an)

[更好的 AJAX 后退按钮解决方案](http://www.ajaxonomy.com/2007/web-design/a-better-ajax-back-button-solution)

[历史.js](https://github.com/browserstate/history.js)**

# java - 使用 Android 执行 RESTful URL

> ID：13529039
> 
> 赞同：0
> 
> 时间：2012-11-23T12:20:05.160
> 
> 标签：java, android, url, rest, restful-url

我正在尝试使用 Android 执行以下 REST url，但出现以下错误，

> 11-23 12:12:32.749：E/AndroidRuntime(709)：原因：java.lang.IllegalArgumentException：索引 121 处的查询中存在非法字符： http: [//xxxxxxxxxxxxxxxxxx.com/add.php ?key=xxxxxxxxxxxx&type=Timbuktu&description =非洲&latitude=16.776767&longitude=-3.006361&private=](http://xxxxxxxxxxxxxxxxx.com/add.php?key=xxxxxxxxxxxx&type=Timbuktu&description=Africa&latitude=16.776767&longitude=-3.006361&private=) {"tag":"test"}

当我在浏览器中调用相同的 URL 时，它可以工作。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:23:47.657

首先编码您的网址，仅参数部分..

```
 URLEncoder.encode("key=xxxx&type=Timbuktu&description=Africa&latitude=16.776767&longitude=-3.006361&private={\"tag\":\"test\"}", "UTF-8") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:23:35.870

您需要对 URL 的参数进行 URL 编码，如下所示：

```
String privateParamValue = URLEncoder.encode("{\"tag\":\"test\"}", "UTF-8");
String url = "http://xxxx.com/add.php?key=xxxx&type=Timbuktu&description=Africa&latitude=16.776767&longitude=-3.006361&private=" + privateParamValue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:23:53.190

浏览器是智能的，并将 URL 编码为 UTF-8。我认为你也应该在客户端这样做。

```
URLEncoder.encode(url, "UTF-8"); 
```

# mysql - mysqli字符集的阿拉伯语数据问题

> ID：13529048
> 
> 赞同：1
> 
> 时间：2012-11-23T12:20:31.610
> 
> 标签：mysql

有没有办法将拉丁字符集 mysql 数据转换为 php 中的实际阿拉伯数据（utf8）？

阿拉伯语数据 - مشكلةمشكلةمشكلة
在数据库中 - Ø§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
Mysql 字符集 - 拉丁语

我想将“Ø§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„ÙŠÙˆÙ...ÙŠØ©”转换为“مشكلةمشكلةمشكلة”之类的东西，以便将其发送到 pdf 库。

有什么办法不改变mysql字符集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:32:39.810

您可以将该特定列的字符集更改为 utf8_general_ci。

# javascript - 如何在 iOS 中集成 Netsuite

> ID：13529049
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:20:31.380
> 
> 标签：javascript, iphone, ios, netsuite

我正在使用 Netsuite 帮助中心中提供的 RESTlet 脚本，并遵循与他们描述的相同的程序。我有登录凭据，也能够将 JS 文件上传到 Netsuite 文件柜，但我不知道如何为 Netsuite 传递 GET 或 POST 方法。请提供示例代码以在 JS 中创建 GET 和 POST 方法以及如何调用他们。谁能帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:45:14.097

目前无法通过客户端 JS 脚本访问 restlets。我们在这方面花了很多时间，但无法连接。您必须使用服务器端脚本或外部可用的套件来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:43:32.573

我想说 NETSUITE 在社区支持方面和 Magento 一样糟糕。似乎很少有 NetSuite 专家在线分享他们的想法并提供有用的代码来帮助初学者入门。

我有一个类似的问题，希望将数据从网站表单发布到 restlet 或套件，并且找不到带有工作代码的完整 DIY。这个社区给了什么？该公司在提供答案方面很可悲。他们只是将您指向用户手册并说“祝你好运”！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T12:07:54.823

我已经完成了许多大型 NetSuite 集成项目，我建议不要使用 NetSuite 的 RESTlet 作为 NetSuite 的 API。

我发现与 NetSuite 集成的最佳方法是使用他们的 SOAP API`netsuite`和`netsuite_rails`ruby​​ gems。创建一个位于 iOS 应用程序和 NetSuite 之间的 rails/sinatra 应用程序，并在 Rails/Sinatra 应用程序中而不是在 Suitelet 或 iOS 应用程序中处理所有 NetSuite 复杂性。

用于开发 Suitelet 的开发工具非常差，最终通过 Suitelets 开发、调试和维护您的 NetSuite 集成比创建一个充当 NetSuite 简化接口的单独应用程序需要更长的时间（它还允许您为您的业务逻辑编写单元测试相当容易）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T01:55:52.553

您需要了解 Suitescript API。从那里您可以使用 Netsuite Restlets 构建您自己的 REST（没有内置的 RESTful 服务，您必须自己创建它）。您只需要创建的 Restlet 中的 URL，因此您可以在任何应用程序中使用它，只要在标头中正确设置所需的凭据即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T11:44:16.467

是的，我已经做到了。我有 netsuite 帮助部分中描述的 netsuite 的用户 restlets API。我制作了一些 javascript 文件并将它们上传到 netsuite 服务器，它对我来说非常有用。

# c# - EF 错误地映射 ID 属性

> ID：13529051
> 
> 赞同：2
> 
> 时间：2012-11-23T12:20:42.720
> 
> 标签：c#, asp.net-mvc, entity-framework

我有两个 EF 模型，其中一个来自另一个。

```
public class Party
{
    [Key]
    public Guid Key { get; set; }

    [Required, MaxLength(50)]
    public string Name { get; set; }
}

public class Customer : Party
{

    [Range(1, int.MaxValue)]
    public int ID { get; set; }
} 
```

当我使用如下隐藏字段将属性放入**EDIT视图中时：**

```
@Html.HiddenFor(model => model.ID)
@Html.HiddenFor(model => model.Key) 
```

两个字段都获得相同的值，并且我收到验证错误，因为 ID 属性不能是 GUID。

```
<input data-val="true" data-val-number="The field ID must be a number." data-val-range="Feltet ID må være mellom 1 og 2147483647." data-val-range-max="2147483647" data-val-range-min="1" data-val-required="Feltet ID er obligatorisk." id="ID" name="ID" type="hidden" value="3b9ba191-3a3c-47d9-8bb7-48cc552cc6ec" />
<input data-val="true" data-val-required="Feltet Key er obligatorisk." id="Key" name="Key" type="hidden" value="3b9ba191-3a3c-47d9-8bb7-48cc552cc6ec" /> 
```

我如何告诉 EF 名为 ID 的属性**不是**主键（因为我认为 EF 假设了这一点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:52:00.500

由于任何域模型都必须在 EF 中有一个 ID，因此只需在您的客户类中创建另一个属性并用 [Key] 装饰它

```
public class Customer : Party
{
    [Key]
    public int CustomID { get; set; }

    [Range(1, int.MaxValue)]
    public int ID { get; set; }
} 
```

# php - Eclipse PHP 自动完成功能很有趣，有些文件完成有些没有

> ID：13529057
> 
> 赞同：3
> 
> 时间：2012-11-23T12:21:17.997
> 
> 标签：php, eclipse, autocomplete

orgional 的问题是，对于某些文件，自动完成不会完成诸如“self”和“public”之类的内容，如果我输入 self:: 它不会显示函数列表。

另一个问题是，对于某些文件，当类扩展时，它会完成但不显示 PHPUnit_Framework_TestCase 的函数，因此键入 $th 将完成：“$this->”但结果列表不会显示 assertEquals（这是PHPUnit_Framework_TestCase）。

通过更改解决了第一个问题：

```
throw(new Exception("Something wrong with the datastore",666)); 
```

到

```
throw new Exception("Something wrong with the datastore",666); 
```

（从括号中取出 throw 参数）

要为 phpunit 等 3rd 方库添加自动完成功能，请执行以下操作：

```
under project=>properties
  =>php include path (list on the left)
  =>libraries tab
  =>add external source folder
  =>added /usr/share/pear/PHPUnit/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:39:49.513

对于 Eclipse 提示基类方法，包含该类的文件必须是当前项目的一部分，或者链接到它。导航到项目 -> 属性 -> PHP 包含路径；您可以在那里将外部库/源文件夹永久添加到您的项目中。

至于 Eclipse 没有提示`self`and `$this`，你确定你是在类方法中输入的吗？显然，这些话在其他任何地方都没有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:47:25.840

检查您`.buildpath`是否包含所有具有基类的文件夹以及您想要自动完成的类。

如果您包含外部库，您可以将它们添加到项目的包含路径中。

# java - 试图在 ArrayList 中找到最大元素 , 在 Java 中

> ID：13529059
> 
> 赞同：2
> 
> 时间：2012-11-23T12:21:23.080
> 
> 标签：java, arraylist, max

我在 Java 中有一个带有 Float 元素的 ArrayList，我试图找到具有最大值的元素的位置。我尝试使用以下代码执行此操作，但没有成功：

```
 Float obj = Collections.max(arraylist);
    int index=arraylist.indexOf(obj); 
```

问题是`Collections.max()`，这似乎适用于 int 值，在我的情况下返回错误的结果..

关于出了什么问题以及如何以不同的方式做到这一点的任何想法？

更正：问题不在我想的地方，而是在将元素添加到 Arraylist 时。我添加的值是函数的浮点结果。我在添加之前打印函数的结果，然后我使用通常的`arraylist.add(value)`代码，但是当我要求在添加之后立即打印 arraylist 的值时，会返回一个完全不同的值：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:17:56.893

我找到了伙计们！问题在于，我没有将函数的结果存储在浮点值中然后使用它，而是在每次需要该值时调用该函数以节省内存空间。虽然我忘记初始化函数的一个值，所以每次它给我一个不同的起始值，所以每次我调用这个函数时它都会返回一个不同的结果..

非常感谢您的帮助，如果没有您的问题，我可能需要更长的时间才能找到它，这让我想到了真正的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:25:38.240

**IndexOf**返回此列表中指定元素第一次出现的索引，如果此列表不包含该元素，则返回 -1，而不是您要查找的最大值。

在此处查看文档[http://download.java.net/jdk7/archive/b123/docs/api/java/util/ArrayList.html#indexOf(java.lang.Object](http://download.java.net/jdk7/archive/b123/docs/api/java/util/ArrayList.html#indexOf(java.lang.Object) )

您还必须指定存储在 ArrayList 中的元素的类型。尝试 ：

```
... new ArrayList<Float>() ; .. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:26:50.447

希望您添加了以下两个库...

```
import java.util.ArrayList;
import java.util.Collections; 
```

你能试试这个代码吗？而不是保存到 Float 对象，

```
Object obj = Collections.max(arrayList); 
```

# c# - File.Exists 方法是否获得大量资源？

> ID：13529061
> 
> 赞同：4
> 
> 时间：2012-11-23T12:21:23.560
> 
> 标签：c#, .net

那么什么更好呢？要使用这样的构造：

```
if (File.Exist(fileName))
{
    // do something with file...
} 
```

只是

```
try 
{
    // do something with file.
}
catch(Exception ex)
{
} 
```

使用方法 File.Exist() 是否花费很多？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T12:27:52.920

前者有一个竞争条件：另一个进程可能会在`File.Exists`返回 true 之后但在您打开文件之前删除文件。后者没有。即使您事先检查，如果您想忽略不存在的文件，您仍然应该捕获异常。

所以它应该是

```
if (File.Exists(fileName))
{
    try
    {
        // ...
    }
    catch (FileNotFoundException)
    { }
} 
```

或者

```
try
{
    // ...
}
catch (FileNotFoundException)
{ } 
```

前者会重复检查，如果文件位于网络共享上，这可能会很慢，后者会针对非异常情况引发异常（已处理），从而使调试复杂化。两者都有其优点。就个人而言，我通常选择第二个，但任何一个都可以。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T12:25:20.143

不应使用异常来处理应用程序的流程，其想法是避免异常，而不是将它们视为执行流程的正常部分。

对于 99.999% 的应用程序，如果有任何性能差异，将不会是明显的。如果文件应该在那里并且没有找到是一种特殊情况，您可以使用该 `try catch`块，否则我会说您应该采用这种`File.Exist`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:27:18.180

取决于您的程序流程和您正在执行的操作。如果您*希望*该文件存在，则可以依赖异常处理，因为如果不存在，您的程序将无法继续，并且异常很可能需要在调用链的更高层进行处理。

否则，[`True|False|FileNotFound`](http://thedailywtf.com/Articles/What_Is_Truth_0x3f_.aspx)如果有问题的方法类似于`ReadFile()`.

使用 File.Exists 来“安全地”打开一个文件是非常没用的。考虑一下：

```
public String ReadFile(String filename)
{
    if (!File.Exists(filename))
    {
        // now what? throw new FileNotFoundException()? return null?
    }

    // Will throw FileNotFoundException if not exists, can happen (race condition, file gets deleted after the `if` above)
    using (var reader = new StreamReader(filename))
    {
        return reader.ReadToEnd();
    }
} 
```

有人可能会说，如果要向文件附加数据，则要检查文件是否存在，但是[StreamWriter](http://msdn.microsoft.com/en-us/library/f5f5x7kt.aspx)构造函数有一个带`append`参数的重载，如果文件不存在，它将让编写器创建文件并附加到如果是的话。

所以，也许问题最好是：存在哪些有效用例`File.Exists`？幸运的是[，这个问题已经被问及并得到了回答](https://stackoverflow.com/questions/673654/when-is-it-okay-to-check-if-a-file-exists)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:29:56.197

首先我会检查文件是否存在，如果不存在则抛出异常。

之后，我将使用 try-catch 块来处理可能引发的其他异常（权限等）

```
if (!File.Exist(fileName))
{
    throw new ArgumentException("filename");
    // or throw new FileNotFoundException("filename");
}

try 
{
    // do something with file.
}
catch(Exception ex)
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:35:06.020

第一个案例——

```
if (File.Exist(fileName)) //A single statement to check and proceed. 
```

虽然后来的异常处理方法涉及 -

如果`object`引发异常，将创建并传递给相应的 catch 块的异常类。

我更喜欢第一种方法，因为使用异常处理来处理执行流程不是一个好主意。

# spring - 对特定网页使用 Spring Multipart Resolver

> ID：13529063
> 
> 赞同：0
> 
> 时间：2012-11-23T12:21:40.240
> 
> 标签：spring, multipartform-data

我有两个网页，它们都发送多部分形式的数据。我只想将 Spring Multipart Resolver 用于其中一个，并希望单独处理另一个。

据我所知，Spring 检查每个请求是否包含多部分形式的数据（提供的 xml 配置具有多部分解析器条目），如果是，它会创建 MultipartHttpServletRequest 对象。基本上我不想收到这个对象。

由于我的整个项目都在 Spring 中，因此我无法进行简单的 JSP/Servlet 配置。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:34:24.517

您可以通过扩展`CommonsMultipartResolver`类并覆盖`isMultipart`方法来做到这一点。如果该方法返回 true，则应用 MultipartResolver 并将 a`MultipartHttpServletRequest`传递给 Spring 控制器。如果该方法返回 false，则将常规`HttpServletRequest`传递给 Spring Controller。

该`isMultipart`方法接收原始`HttpServletRequest`对象，您可以使用它来确定哪个页面将处理请求并相应地返回 true 或 false。

一旦你扩展了`CommonsMultipartResolver`使用扩展类来代替`CommonMultipartResolver`你的 bean 定义。

# android - 在android中调用上一个活动时无法做动画

> ID：13529064
> 
> 赞同：1
> 
> 时间：2012-11-23T12:21:58.333
> 
> 标签：android

我有两个活动。活动 1 和活动 2。当我从活动 1 调用活动 2 时，我已经给出了动画。

我给出的动画类型是活动 1 应该移动到右侧，活动 2 应该从左侧到右侧并占据活动 1 的位置（->activity2->activity1->）。我能够成功地做到这一点。我一调用活动 2，就完成了活动 1。

现在我试图从活动 2 中调用活动 1。我希望活动 2 移动到左侧，活动 1 应该从右侧到左侧并占据活动 2 的位置（<-活动 2<-活动 1<- ）。当我调用活动 1 时，我正在完成活动 2。问题是，当我尝试这样做时，活动 1 出现了两次。

问题是这样的，当我按下从活动2调用活动1的按钮时，活动1突然出现，没有任何动画。然后活动 1 滑开，活动 1 再次出现。

这是我用于从活动 1 移动到活动 2 的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
        <translate android:fromXDelta="-100%" android:toXDelta="0%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="700"/>
</set> 
```

这是我用于从活动 2 移动到活动 1 的 xml 代码：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

   <translate android:fromXDelta="0%" android:toXDelta="-100%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="700"/>

</set> 
```

以下是从活动 1 移动到活动 2 的代码：

```
Intent intent=new Intent();
            intent.setClassName(Generator.this,"com.xyz.activity2");
            startActivity(intent);
            finish();
            overridePendingTransition(R.anim.left_to_right, R.anim.left_to_right); 
```

这是从活动 2 移动到活动 1 的代码：

```
 Intent intent=new Intent();
                    intent.setClassName(MainMenu.this,"com.xyz.activity1");
                    startActivity(intent);
                        finish();
overridePendingTransition  (R.anim.right_to_left, R.anim.right_to_left); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:08:56.900

我已经测试了你的代码。并对其进行了一些修改。只需`finish()`在调用新意图之前调用该函数。

```
 finish();
        Intent intent=new Intent();
        intent.setClassName(Generator.this,"com.xyz.activity2");
        startActivity(intent);
        overridePendingTransition(R.anim.left_to_right, R.anim.left_to_right); 
```

这现在在我的设备上运行良好。让我知道它是否对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:22:03.750

用这个....

在一个 Activity.java

```
Intent i = new Intent(A_Acitivity.this,B_Activity.class);
startActivityForResult(i,100); 
```

这是 OnActivityResult 方法...

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        overridePendingTransition  (R.anim.right_to_left, R.anim.right_to_left);

    } 
```

B Activity.java 的 onCreate()

```
 overridePendingTransition(R.anim.left_to_right, R.anim.left_to_right); 
```

在 B Activity 的后退按钮上

只需调用完成（）；

# php - perl更改用户代理名称时如何通过php限制perl机器人

> ID：13529065
> 
> 赞同：4
> 
> 时间：2012-11-23T12:21:57.993
> 
> 标签：php, perl, user-agent

假设我们有以下 perl 脚本

```
 use LWP;
    use strict;
    use warnings;
    use LWP::UserAgent;

    my $ua = LWP::UserAgent->new;
    $ua->agent('NokiaN97i/SymbianOS/9.1 Series60/3.0');

    my $response = $ua->get('http://myhost.com');

    if ($response->is_success) print $response->decoded_content;
    else die $response->status_line; 
```

它只是连接到 myhost.com/index.php 页面并打印其内容。在 index.php 文件中我有

```
 file_put_contents('agent.txt', $_SERVER['HTTP_USER_AGENT'], FILE_APPEND); 
```

线。现在用户代理字符串不包含“libwww-perl”。如何识别 perl bot 并对其进行限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:00:24.667

您不能， USER_AGENT 字符串虽然是帮助您识别客户端“浏览器”的唯一因素，但基本上也是用户输入。如果他们改变它 - 你无能为力。

# nosql - 具有离线副本 + 高级安全性 + 查询的 DBMS

> ID：13529073
> 
> 赞同：4
> 
> 时间：2012-11-23T12:22:40.407
> 
> 标签：nosql, mapreduce, couchdb, database-replication, database

我们目前正在评估能够处理离线副本的 DBMS（例如，允许副本长时间保持离线状态）。CouchDB 将是一个主要的候选者，但是我们的用例有很多缺点。我们可以将其中一些特性添加到数据库周围的一些代码包装器中，但是有些是显示停止器：

*   没有内置的数据库范围加密（可以在文件级别添加）
*   没有每个文档的安全性（可以通过每个解决方案使用多个数据库来模拟）
*   没有内置编辑器角色（可以以编程方式完成）
*   没有简单的查询，每次查找都必须使用 map/reduce 完成（非常困难，要么在框架方面增加大量开发时间，要么为每个解决方案增加大量开发时间）

现在问题来了：您知道任何可以添加一个或多个这些特性的 DBMS 吗？也许有一些商业解决方案，可能是 CouchDB 的包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:27:18.967

你应该看这里：[编写重的、复制的、大于内存的键值存储](https://stackoverflow.com/questions/13444320/write-heavy-key-value-store)

我已经提到了一个非常有趣的通用 LevelDB 键值存储，可以修改，例如使用 Riak 多节点平台实现：

[http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html](http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html)

[http://basho.com/blog/technical/2011/07/01/Leveling-the-Field/](http://basho.com/blog/technical/2011/07/01/Leveling-the-Field/)

# ios - 为什么在 UIScrollView 中将 pagingEnabled 设置为 YES 会在触摸子视图时自动滚动到上一页？

> ID：13529074
> 
> 赞同：2
> 
> 时间：2012-11-23T12:22:44.327
> 
> 标签：ios, uiscrollview, uiscrollviewdelegate, scroll-paging

我正在使用 UIScrollView 来显示很多子视图。下面是创建滚动视图的代码：

```
ScrollView = [[UIScrollView alloc]initWithFrame:CGRectZero];
ScrollView.delegate = self;
ScrollView.showsHorizontalScrollIndicator = NO;
ScrollView.showsVerticalScrollIndicator = NO;
ScrollView.clipsToBounds = YES;
ScrollView.scrollEnabled = YES;
ScrollView.pagingEnabled = YES;

CGFloat widthOfScroll= (maxTotalColumnsVisibleAtAnyPoint * widthOfSubView );

ScrollView.frame = CGRectMake(0, 0, widthOfScroll, heightOfSubView);

CGSize contentSizeHeaderView =  self.ScrollView.frame.size;
CGFloat contentSizeWidth =  self.totalSubViews * self.widthOfSubView;
contentSizeHeaderView.width =  contentSizeWidth;

[ScrollView setContentSize:contentSizeHeaderView]; 
```

将控件添加到 ScrollView 的代码和用于 scrollView 的事件处理程序如下：

```
-(void)loadControlsInScroll{

    UIView *tempSubView = nil;
    CGFloat tempOriginX = 0;
    @autoreleasepool {

        for (int i = 0; i < self.totalSubViews; i++) {

            tempSubView = [dataSource viewForScroll:i];
            tempSubView.layer.borderColor = borderColor.CGColor;
            tempSubView.layer.borderWidth = kBorderWidth;
            tempSubView.frame = CGRectMake(tempOriginX, 0, widthOfSubView, heightOfSubView);
            tempOriginX = tempOriginX + widthOfSubView;

            [self.ScrollView addSubview:tempSubView];
        }

    }

}

-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
///Event handler
} 
```

我在这个滚动视图中启用了分页。

让我们假设最大滚动视图可以在其框架中容纳 8 个子视图。

**情况1：**

滚动视图中添加了 16 个子视图。现在显示两个页面。滚动到两个页面都正常工作。触摸两个页面中的子视图不会导致任何错误行为。

**案例二：**

滚动视图中添加了 9 个子视图。现在它也被拖页了。第一页包含第 1-8 个子视图。第二页包含第 2-9 个子视图。现在在第 1 页中触摸子视图可以正常工作。Page 2 中的触摸调用 UIScrollView 的事件处理程序 scrollViewDidScroll。

![在此处输入图像描述](../Images/3c6df18e747814e04fb4300b58df3541.png) ![在此处输入图像描述](../Images/f251ab3c2068fd41f25321f6ff97ae29.png)

**更多信息：**

1.  如果 PagingEnabled 设置为 NO，则不会发生这种情况。

为什么即使没有手动完成滚动，也会调用此 scrollViewDidScroll 事件？这个时候也调用事件处理函数scrollViewWillBeginDragging？

**更新 1：**

真正的问题是，如果 PagingEnabled 为 YES，那么是否设置了 scrollview 的委托，在情况 2 中，滚动视图会自动滚动到上一页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:22:17.610

问题是 UIScrollView 的 Paginenabled 属性总是将滚动视图滚动到其边界的宽度。因此，当您有 9 个子视图时，它会尝试滚动到第二页并向您显示 2-9 个子视图。实际上，您的 page1 有 1-8 个子视图，而 2nd pgae 只有 9 个子视图。所以真正的问题是 UIScrollview 的内容宽度应该与你的页数成正比。在您的情况下，您的 1 页包含 8 个子视图。所以内容大小应该是 UIScrollview * no 的宽度。页数。

```
// noOfpages = No of pages in scrollview (Each page has 8 subviews)
// noOfSubviews
int noOfpages = 
if(noOfSubviews%8==0){
   noOfPages = noOfSubviews/8;

}else{
   noOfPages = noOfSubviews/8 + 1;
}
scrollview.contentSize = CGSizeMake(scrollview.frame.size.width*noOfPages,scrollview.frame.size.height); 
```

这样，在第一页滚动将带您查看 9。向后滚动将带您返回子视图 1-8。

# android - 初始化扩展 FrameLayout 的类时出现 InstantiationException

> ID：13529075
> 
> 赞同：0
> 
> 时间：2012-11-23T12:22:50.230
> 
> 标签：android, android-view

我创建了一个扩展 FrameLayout 的类：

```
public class EnhancedMapView extends FrameLayout
{
private CustomMapView mapViewComponent;

public EnhancedMapView(Context context,String apiKey)
{
    super(context);
    /*mapViewComponent=new CustomMapView(context,apiKey);
    catch (Exception exception) 
    { 
        StackTraceElement[] stackTraceElements=exception.getStackTrace();
        for (StackTraceElement stackTraceElement:stackTraceElements)
            Log.i("Blabla",stackTraceElement.toString());
    }
    buildMapViewLayout();*/
}
} 
```

这是我在以下课程中使用的活动：

```
public class TestMapViewActivity extends Activity 
{
private EnhancedMapView enhancedMapView;

@Override protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    String apiKey=getResources().getString(R.string.google_maps_api_key);
    enhancedMapView=new EnhancedMapView(this,apiKey);
    setContentView(enhancedMapView);
}
} 
```

我得到：

```
11-23 11:43:44.425: E/AndroidRuntime(440): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{shira.android.mapview/shira.android.mapview.EnhancedMapView}: java.lang.InstantiationException: shira.android.mapview.EnhancedMapView
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.os.Looper.loop(Looper.java:130)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-23 11:43:44.425: E/AndroidRuntime(440):  at java.lang.reflect.Method.invokeNative(Native Method)
11-23 11:43:44.425: E/AndroidRuntime(440):  at java.lang.reflect.Method.invoke(Method.java:507)
11-23 11:43:44.425: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-23 11:43:44.425: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-23 11:43:44.425: E/AndroidRuntime(440):  at dalvik.system.NativeStart.main(Native Method)
11-23 11:43:44.425: E/AndroidRuntime(440): Caused by: java.lang.InstantiationException: shira.android.mapview.EnhancedMapView
11-23 11:43:44.425: E/AndroidRuntime(440):  at java.lang.Class.newInstanceImpl(Native Method)
11-23 11:43:44.425: E/AndroidRuntime(440):  at java.lang.Class.newInstance(Class.java:1409)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-23 11:43:44.425: E/AndroidRuntime(440):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

最初，我有一些使用谷歌地图的代码，但我把它全部注释掉了。似乎异常来自 FrameLayout 构造函数，我从自定义视图类（使用 super）调用它，我不知道是什么导致它发生......

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:58:34.123

尝试添加默认构造函数：

```
public EnhancedMapView(Context context){
     this(context, null);
}

public EnhancedMapView(Context context, AttributeSet attrs){
     this(context, attrs, 0);
}

public EnhancedMapView(Context context, AttributeSet attrs, int defStyle){
     super(context, attrs, defStyle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:46:22.930

对不起，这是我犯的一个愚蠢的错误。我在清单中的活动声明中放入了视图的名称而不是活动。我向任何试图提供帮助的人道歉。

# macos - Cocoa - 调用 createWebViewWithRequest 时，Webview 的请求为零

> ID：13529076
> 
> 赞同：2
> 
> 时间：2012-11-23T12:22:56.100
> 
> 标签：macos, cocoa, webview, webkit

我对 Cocoa 中的 WebView 有一个大问题。我的 WebView 加载了一个 javascript，它将在这个 WebView 中打开一个新窗口（不在浏览器中打开）。

我打电话

```
[myWebView setUIDelegate: self] 
```

调用 createWebViewWithRequest:withRequest:

在 createWebViewWithRequest 中，我加载了请求，但请求为零。我不知道为什么，被困在这里。

```
- (WebView*)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    [[sender mainFrame]loadRequest:request];
    return sender;
} 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T21:32:50.157

在这里传递一个 nil 请求是对[WebKit 的有意更改](http://trac.webkit.org/changeset/75349)。

也许您可以更改您的 JavaScript 以使用...

```
<a target=_blank href="http://www.example.com/"> 
```

...而不是`window.open()`？

如果你这样做，你可以使用

[`-webView:decidePolicyForNewWindowAction:request:newFrameName:decisionListener:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView:decidePolicyForNewWindowAction:request:newFrameName:decisionListener:)

`WebPolicyDelegate`获取请求的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T17:27:01.953

只需删除该行

```
[[sender mainFrame]loadRequest:request]; 
```

# c++ - 从 vc++ 中的 LPTSTR 获取目录名称

> ID：13529077
> 
> 赞同：0
> 
> 时间：2012-11-23T12:22:58.710
> 
> 标签：c++, visual-c++

使用

```
LPTSTR  strDLLPath1 = new TCHAR[_MAX_PATH];
::GetModuleFileName((HINSTANCE)&__ImageBase, strDLLPath1, _MAX_PATH); 
```

我得到了正确打印的 DLL 的路径。

```
D:\Test\work\EasyDLL\Debug\EasyDLL.dll

```

现在我只需要`"D:\Test\work\EasyDLL\Debug\"`.

鉴于我使用 VC++ 的经验，您能否指导我以最佳方式做到这一点 - 任何字符串替换、转换等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:51:14.143

查看[shell 补丁处理函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559%28v=vs.85%29.aspx)，更准确地说是[PathRemoveFileSpec](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773748%28v=vs.85%29.asp)，它完全符合您的要求。

您将需要与 shlwapi.lib 链接。

# facebook - 是否可以在 facebook 中禁用无摩擦支付？

> ID：13529078
> 
> 赞同：1
> 
> 时间：2012-11-23T12:23:07.437
> 
> 标签：facebook, actionscript-3

我们目前正在使用 facebook 积分，并且按预期进行无摩擦支付。作为向当地货币迁移和逐步淘汰积分的一部分，我们引入了自己的虚拟货币并调用 facebook 支付对话框从 AS3 购买货币，如下所示：

```
 var data : Object = new Object();

        data["credits_purchase"] = false;
        data["method"] = "pay.prompt";
        data["order_info"] = product;
        data["purchase_type"] = "item";
        data["dev_purchase_params"] = {"oscif":true};

        Facebook.ui("pay", data, onPayCallback, "iframe"); 
```

当用户没有 facebook 积分时，这可以正常工作，并使用用户的本地货币显示购买对话框。

但是，当用户有积分余额时，它会自动优先于当地货币使用（这没关系），但不会显示购买对话框，并且会发生无摩擦付款（如果交易小于 30 积分）。将显示“购买完成”对话框，但用户在这件事上别无选择。

是否可以禁用无摩擦支付，以便在逐步淘汰期间本地货币和信用之间的用户体验保持一致？

# jquery - 将 jquery 菜单动画重置为当前选择的菜单选项

> ID：13529083
> 
> 赞同：0
> 
> 时间：2012-11-23T12:23:17.383
> 
> 标签：jquery, animation, menu, hover

我正在为我的网站制作这样的导航菜单：有导航、箭头和主要内容。当您加载页面时，箭头指向导航中的主页选项，当您将鼠标悬停在其他选项上时，它会移动到当前悬停的选项，当鼠标离开导航时，它会返回主页选项。

我设法在主页上做到了，但现在我在其他 6 个页面上遇到了问题。我不知道如何使箭头始终返回具有 href="#" 的导航选项，而不是始终返回主页选项。导航是垂直的。

这是我的代码：

```
$(document).ready(function() {

$('#arrow').css({'marginTop' : top});

$('ul li h3').hover(function(){

     var top = $(this).parent().position().top; //getting margin-top value of hovered element

$('#arrow').stop().animate({
    'marginTop' : top-115 //setting margin top,and removing 115px for aesthetics 

    });
},function(){
    $('#arrow').stop().animate({
    'marginTop' : 10 //here i set margin-top to 10 because that is where home option is
    })
});
}); 
```

我知道我可以通过为每个页面制作不同的默认边距顶部值的 .js 文件来解决这个问题，但这样我就不会学到任何新东西，我正在制作这个网站来练习。

在此先感谢，多布里卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:42:11.767

没有测试它，但如果不工作，它可能会非常接近。

在 $(document).ready() 的开头声明 var top；

```
var top = $('ul li h3 a[href=#]').position().top; 
```

并运行您用于将箭头设置为动画到该位置的脚本。

基本上，您在 href 值中选择带有“#”的锚点，您得到它的顶部并将其设置为初始顶部值

# cakephp - CakePHP 在连接表上找到

> ID：13529084
> 
> 赞同：0
> 
> 时间：2012-11-23T12:23:21.393
> 
> 标签：cakephp

抱歉，如果这很明显 - 我正在尝试在连接表上执行 find() 并且失败了，这样做的正确语法是什么？

基本上，我的费用代码表与费用表有 HABTM 关系。

在我的费用代码模型中，我有：

```
public function beforeDelete($cascade  = false) {

    $count = $this->Expense->find("count", array(
        'conditions' => array('expense_code_id' => $this->id)
    ));

    if ($count == 0) {
        return true;
    } else {
        //$this->Session->setFlash('Record cannot be deleted as it has ' . $count . 'number of expenses attached to it');
        return false;
    }

} 
```

如果我取消注释 setFlash() 我得到错误。

我哪里错了？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:05:53.867

不幸的是，如果没有一些额外的工作，就不可能从其中一个父模型对 HABTM 连接表执行这样的查询。我假设 Expense 是父模型，而 ExpensesCode 是连接模型？

一种常见的方法是对 HABTM 连接表进行建模。假设您有一个`expenses`and`codes`表，由`expenses_codes`:

```
$this->Expense->bindModel(array('hasOne' => array('ExpensesCode')));
$this->Expense->find('all', array(
  'fields' => array('Expense.*'),
  'conditions' => array('ExpensesCode.expense_code_id' => $this->id)
)); 
```

然而，当定义了 HABTM 关联时，Cake 也会自动初始化连接表的模型（参见[手册](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)，以及可能键列表中的**“with”**键）。

所以这个语法可以让你直接查询连接表：

```
$this->Expense->ExpensesCode->find('all', array(
  'conditions' => array('ExpensesCode.expense_code_id' => $this->id)
)); 
```

上面的查询将为您提供一个仅包含连接表结果的数组，因为它不像第一个过程那样执行连接。因此，您必须`find()`在 Expense 模型上执行第二次才能找到与`expense_code_id`from ExpensesCode 相关的费用。

**编辑：** 这是一个框架约定，HABTM 连接表应该加下划线并按字母顺序排列。因此，如果调用`codes_expenses`HABTM 连接表，它会自动建模为`CodesExpense`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:23:01.440

如果您创建另一个具有两个 hasMany 关系而不是一个具有 HABTM 关系的模型，您也可以以更简单的方式工作。

> 两个模型之间的 HasAndBelongsToMany 实际上是通过 hasMany 和 belongsTo 关联关联的三个模型的简写。

我发现这是保存和检索数据的最简单方法之一。

欲了解更多信息： [http ://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated](http://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated)

# iphone - 如何通过json解析在表格单元格中显示图像

> ID：13529093
> 
> 赞同：0
> 
> 时间：2012-11-23T12:23:37.150
> 
> 标签：iphone, objective-c, ios

```
NSURL *url = [NSURL URLWithString:@"yourimage"];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[[UIImage alloc] initWithData:data] autorelease]; 
```

这段代码我用来获取图像，但如何在表格单元格中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:28:35.433

试试这个，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}
NSURL *url = [NSURL URLWithString:[imageArray objectAtIndex: [indexPath row]]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[[UIImage alloc] initWithData:data] autorelease];
[[cell imageView] setImage:img];

return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:29:39.673

首先，您需要在您的 iOS 应用程序中解析该 JSON 文件。我猜你从那个 JSON 中获得了一些 URL 来获取图像，所以你需要下载图像表单，它可以在任何 UIIMageView 上设置那个图像，你可以将那个 UIIMageView 设置为`UITablViewCell`.

在这里你只需要管理一件事假设你有许多图像要从特定路径下载。所以你应该注意 UI 交互这里是如何从 URL 下载图像并将下载的图像设置在UIImageView 并将 UIImageView 设置为 ContentView 。`UITableViewcell`在本例中，您还将看到如何在 TableViewcEll 上添加这些图像的方式。

[这是该示例的链接](http://developer.apple.com/library/ios/samplecode/LazyTableImages/Listings/Classes_RootViewController_m.html)

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:30:40.780

你可以这样做

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
[[cell imageView] setImage:img]; 
```

但这可能不会很好地运行，因为您正在同步下载图像，这很可能会使您的应用程序结结巴巴。

您应该对图像使用延迟加载，例如看看 [http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:08:47.017

这对我有用：

```
NSURL *url = [NSURL URLWithString:[aTweet objectForKey:@"profile_image_url"]];
NSData *imgData = [NSData dataWithContentsOfURL:url];
cell.imageView.image = [UIImage imageWithData:imgData]; 
```

# datacontracts - 如何从数据合约中的属性中获取属性名称

> ID：13529100
> 
> 赞同：0
> 
> 时间：2012-11-23T12:23:57.847
> 
> 标签：datacontracts

我有一个数据合同，我想获取下面代码中提到的属性名称。

```
 [DataMember]
   public string PhoneNumber { get; set; } 
```

现在我将值传递为

```
 void GetMethod()
{

// takes PropertyName and Property values

ValidateMe("PhoneNumber", phoneObj.PhoneNumber.ToString();

} 
```

现在我需要传递而不是获取属性名称而不是硬编码的“电话号码”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:10:58.427

```
string GetPropertyName<TValue>(Expression<Func<TValue>> propertyId)
{
   return ((MemberExpression)propertyId.Body).Member.Name;
} 
```

通过这种方式，我们可以检索属性名称

# ios - 拦截ios中的gsm数据

> ID：13529101
> 
> 赞同：1
> 
> 时间：2012-11-23T12:24:07.113
> 
> 标签：ios, gsm, iphone-privateapi

我想在发送之前对 ios 中的 gsm 数据进行一些处理。我知道我必须使用私有 APi，在我的情况下这不是问题，我的应用程序是实验性的，不会发送到 AppStor。我不知道从哪里开始。我认为我会遇到这些问题：

*   在 xcode 上安装/使用私有框架。
*   这些 API 没有官方文档，但我认为 Cydia 有很多人使用它们。

你有一些可以帮助我开始的教程或链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:29:30.563

我认为将这个问题分为两个子问题是个好主意：

1）如何使用私有API

您可以查看以下问题以获取有关此主题的信息：

[如何使用 iPhone SDK 私有 API](https://stackoverflow.com/questions/2838656/how-to-use-iphone-sdk-private-apis)

[http://aralbalkan.com/2106](http://aralbalkan.com/2106)

[iOS 私有 API 文档](https://stackoverflow.com/questions/1150360/ios-private-api-documentation)

[获取 iOS 的私有 API 方法的签名](https://stackoverflow.com/questions/11511570/getting-signatures-of-private-api-methods-for-ios)

如果您有任何其他问题。您可以在此处发布或给我发送电子邮件（我的个人资料中有）。

2) 如何使用私有 api 拦截 gsm 数据？

我不知道。

三个问题给你L

*   您真的是指“gsm”数据（gsm 协议级别信息）还是指无线数据（比如说从设备发送的 HTTP 请求）？

*   您需要拦截和修改还是只需要拦截并查看它们？

如果您的意思是无线数据并且只是查看它，那么请尝试搜索流量嗅探器。其中一些应该可以在 iOS 上运行。

再来一注。一旦我听到“拦截”，我的猜测是越狱调整会更好（与私有 API 相比）。私有 API 的使用受到限制。如果您的应用只能在越狱设备上运行，可以吗？

# facebook-fql - 如果两个FB用户是共同的朋友，如何离线检查

> ID：13529103
> 
> 赞同：4
> 
> 时间：2012-11-23T12:24:09.000
> 
> 标签：facebook-fql

我需要在 CRONJOB 中运行一个查询来检查 2 个 FBuser 是否是共同的朋友：类似于以下内容，但我收到此错误：

```
Warning: file_get_contents(https://graph.facebook.com/fql?q=SELECT......) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad  Request in... 
```

在 FBtool 我收到以下错误：

```
{
 "error": {
"message": "(#601) Parser error: unexpected '+' at position 6.",
"type": "OAuthException",
"code": 601
 }
 } ) 
```

这是脚本：

```
// get App AccessToken
$app_token_url = "https://graph.facebook.com/oauth/access_token?"
 . "client_id=" . $appId
 . "&client_secret=" .$secret
 . "&grant_type=client_credentials";

    $response = file_get_contents($app_token_url);
    $params = null;
    parse_str($response, $params);

  $App_access_token = $params['access_token'];

try { $permissions = $facebook->api('/'.$user1.'/permissions');
            } catch(Exception $o){  $log[] = "//***  error on   $user1/permissions > $o";   }
$permessi=$permissions[data][0];

if(array_key_exists('read_stream', $permessi) or array_key_exists('read_friendlists', $permessi) ) {

$fql_q = "SELECT 'uid1','uid2' FROM friend WHERE 'uid1'='$user1' AND 'uid2'='$user2'"; 
$fql_q = urlencode($fql_q); 
$fql_query_url = "https://graph.facebook.com"
  ."/fql?q=$fql_q"
  ."&access_token=$App_access_token";
 $fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true);
if(is_array($fql_query_obj)){ 
$CountFriends = $CountFriends + 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:21:53.190

Facebook 离线访问已被弃用 请点击此链接： [offline-access-removal](https://developers.facebook.com/roadmap/offline-access-removal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T07:43:02.947

这里的解决方案

[https://developers.facebook.com/docs/graph-api/reference/v2.0/user/friends#readmodifiers](https://developers.facebook.com/docs/graph-api/reference/v2.0/user/friends#readmodifiers)

我希望能有所帮助谢谢

# protocols - 如何编写协议文档

> ID：13529106
> 
> 赞同：2
> 
> 时间：2012-11-23T12:24:15.430
> 
> 标签：protocols

我正在为我的游戏编写协议，但我不确定要使用什么软件。

我一直在尝试用 Microsoft Word 和 Excel 编写它，但阅读或编辑它并不总是那么容易。

有什么好的做法或工具可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:29:57.550

您可以为此使用[doxygen 。](http://www.doxygen.nl/)您可以在源代码中的某处实现协议的文档，也可以创建一个独立文件。Doxygen 通常用于源文档，但也应该适用于此。

Doxygen 还实现[了 mscgen](http://www.mcternan.me.uk/mscgen/)，这对于您的目的应该很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T08:02:36.643

描述协议的标准工具是已被电信行业（和其他行业）使用了数十年的[消息序列图。](http://en.wikipedia.org/wiki/Message_sequence_chart)

![http://upload.wikimedia.org/wikipedia/commons/3/34/MSC_CallOperation.png](../Images/e201618574b55d14483fbd28973c705a.png)

这是一个非常强大的工具，您当然应该学习和使用。我建议使用[http://sourceforge.net/projects/msc-generator/](http://sourceforge.net/projects/msc-generator/)来编辑和生成图表。

# signalr - 可靠地计算到 SignalR 集线器的客户端连接数

> ID：13529111
> 
> 赞同：4
> 
> 时间：2012-11-23T12:24:31.430
> 
> 标签：signalr, signalr-hub

我正在创建一个 Web 仪表板，它将显示我们的测试环境的状态。

我使用集线器将浏览器连接到服务器，并有一个后台任务来轮询环境的状态。如果至少连接了一个客户端，我只想执行此检查。

我的集线器看起来有点像这样：

```
public class StatusHub : Hub
{
    private static int connectionCount = 0;

    public override Task OnConnected()
    {
        Interlocked.Increment(ref connectionCount);
        return base.OnConnected();
    }

    public override Task OnReconnected()
    {
        Interlocked.Increment(ref connectionCount);
        return base.OnReconnected();
    }

    public override Task OnDisconnected()
    {
        Interlocked.Decrement(ref connectionCount);
        return base.OnDisconnected();
    }

    // other useful stuff
} 
```

这主要有效，但有时会调用 OnConnected 但不会调用 OnDisconnected。

一种特殊情况是，如果我打开 chrome 并键入页面地址，但实际上并没有导航到它。似乎 Chrome 正在预取页面并连接，但从未断开连接。

所以两个问题：

1.  这是计算连接数的好方法吗（我永远不会在网络农场环境中运行）？
2.  这些来自 Chrome 的僵尸连接最终会超时吗（我尝试将超时设置得很低但仍然没有断开连接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:40:46.280

事件将始终触发。如果他们不这样做，请在 github 上使用 repro 步骤提交错误。要获得更准确的数字，您可以存储连接 ID 的哈希集并从中获取计数。

# qt - QML：如果委托条件？

> ID：13529112
> 
> 赞同：2
> 
> 时间：2012-11-23T12:24:34.320
> 
> 标签：qt, qml, qt-quick

我正在设计一个微调器列表控件，它一次显示 3 个项目。

它作为所需的行为工作正常，唯一面临的问题是我需要中心元素的外观更大一些。

我现在能想到的方法是在委托中有一个 if 条件，它在当前索引的基础上增加了字体大小。

上述方法可行吗？实现特定行为的任何建议

下面是代码片段

```
 SpinnerData {
              id: spinner
              focus: true
              model: 20
              delegate: Text { font.pixelSize: spinner.height/4.5; text: index; height: spinner.height }
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:03:57.083

我不知道您的组件的详细信息，但[在这里](http://qt.gitorious.org/qt-components/qt-components/blobs/master/src/symbian/extras/Tumbler.qml)您可以看到 Qt Quick Components 中相同控件的实现。

![在此处输入图像描述](../Images/28de0ea95b9127be17a853a77dd2bcc8.png)

# php - NuSoap 返回 complexType 数组不正确？

> ID：13529113
> 
> 赞同：2
> 
> 时间：2012-11-23T12:24:37.767
> 
> 标签：php, web-services, wsdl, nusoap, complextype

我有一个带有 NuSoap 的 Web 服务 WSDL。我将它与 CodeIgniter 一起使用。我遇到了 contexttype-array 返回的问题。这是我的 PHP 代码：

```
$this->nusoap_server->wsdl->addComplexType(
                    "getJobStatusByIdsResponse",
                    "complexType",
                    "array",
                    "all",
                    "SOAP-ENC:Array",
                    array(),
                    array(
                        'Job' => array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:jobStatusResponse[]', 'minOccurs'=>'1', 'maxOccurs'=>'unbounded')
                    ),
                    'tns:jobStatusResponse'
                );

$this->nusoap_server->wsdl->addComplexType(
                    "getJobStatusByIdsResponse",
                    "complexType",
                    "array",
                    "all",
                    "SOAP-ENC:Array",
                    array(),
                    array(
                        'Job' => array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:jobStatusResponse[]', 'minOccurs'=>'1', 'maxOccurs'=>'unbounded')
                    ),
                    'tns:jobStatusResponse'
                );

$this->nusoap_server->register(
                    "getJobStatusByIds",
                    array('getJobStatusByIdsRequest' => 'tns:getJobStatusByIdsRequest'),
                    array('getJobStatusByIdsResponse' => 'tns:getJobStatusByIdsResponse'),
                    false,
                    false,
                    "rpc",
                    "literal",
                    "get JobStatus By Ids"
);

function getJobStatusByIds($data) {
  return array(array('orderId' => '1000', 'jobStatus' => '5'),array('orderId' => '1001', 'jobStatus' => '3'),array('orderId' => '1002', 'jobStatus' => '7'))
} 
```

我得到这个作为回报：

```
 <ns1:getJobStatusByIdsResponse xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/">
         <getJobStatusByIdsResponse>
            <item>
               <orderId>1001</orderId>
               <jobStatus>5</jobStatus>
            </item>
            <item>
               <orderId>1002</orderId>
               <jobStatus>3</jobStatus>
            </item>
            <item>
               <orderId>1003</orderId>
               <jobStatus>7</jobStatus>
            </item>
         </getJobStatusByIdsResponse>
      </ns1:getJobStatusByIdsResponse> 
```

那不对，不是吗？

我怎样才能得到它（“工作”而不是“项目”）：

```
 <ns1:getJobStatusByIdsResponse xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/">
     <getJobStatusByIdsResponse>
        <Job>
           <orderId>1001</orderId>
           <jobStatus>5</jobStatus>
        </Job>
        <Job>
           <orderId>1002</orderId>
           <jobStatus>3</jobStatus>
        </Job>
        <Job>
           <orderId>1003</orderId>
           <jobStatus>7</jobStatus>
        </Job>
     </getJobStatusByIdsResponse>
  </ns1:getJobStatusByIdsResponse> 
```

我可以帮助谁？在哪里可以找到更多关于 NuSoap 的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:04:46.583

希望这可以帮助。

添加了代码注释以帮助那些无法记住 NuSoap 参数的人。

```
$this->nusoap_server->register(
                    "getJobStatusByIds",                                                           // method name
                    array('getJobStatusByIdsRequest' => 'tns:getJobStatusByIdsRequest'),           // input params
                    array('getJobStatusByIdsResponse' => 'tns:getJobStatusByIdsResponse'),         // output params
                    false,                                                                         // namespace
                    false,                                                                         // soap action
                    "rpc",                                                                         // style
                    "literal",                                                                     // use
                    "get JobStatus By Ids"                                                         // documentation
); 
```

我认为定义的响应应该是这样的。

```
// Job Status Result Complex Type (output)
$this->nusoap_server->wsdl->addComplexType(
                        "getJobStatusByIdsResponse",
                        "complexType",
                        "struct",
                        "all",
                        "SOAP-ENC:Array",
                        array('Job' => array('orderId' => 'your value here', jobStatus => 'your value here')),
    ); 
```

# file - 如何从名称中包含逗号（，）的 Hadoop 集群中删除目录？

> ID：13529114
> 
> 赞同：72
> 
> 时间：2012-11-23T12:24:38.447
> 
> 标签：file, hadoop, comma

当我尝试使用 rmr hadoop shell 命令删除此目录时，我已将目录上传到名称为“，”的 hadoop 集群，例如“MyDir，名称”，如下所示

```
hadoop dfs -rmr hdfs://host:port/Navi/MyDir, Name 
```

我收到以下消息 rmr: cannot remove hdfs://host:port/Navi/MyDir,: No such file or directory。rmr：无法删除名称：没有这样的文件或目录。

但是我已经使用相同的命令成功地从同一位置删除了其他目录，即

```
hadoop dfs -rmr hdfs://host:port/dir_path 
```

删除此类目录的任何解决方案。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-23T13:15:06.457

你有没有尝试过 ：

`hadoop dfs -rmr hdfs://host:port/Navi/MyDir\,\ Name`?

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-09-26T11:43:01.730

或者如果你不知道网址，你可以使用

```
hadoop fs -rm -r -f /user/the/path/to/your/dir 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-12-10T09:40:51.350

```
hdfs dfs -rm -r /path/to/directory 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-10-16T04:39:06.497

在终端运行命令

```
$hadoop fs -rm -r /path/to/directory 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-19T10:10:15.743

在 hadoop1.0 中：

```
hadoop fs -rmr /PATH/ON/HDFS 
```

在hadoop2.0中：

```
hdfs dfs -rm -R /PATH/ON/HDFS 
```

用于在路径`\`中逃生`,`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-08T12:53:32.597

[在这里](https://hadoop.apache.org/docs/r0.18.3/hdfs_shell.html)您可以找到所有 hadoop shell 命令：

**删除**：rmr 用法：`hadoop fs -rmr URI [URI …]`

递归版本的删除。

例子：

```
hadoop fs -rmr /user/hadoop/dir
hadoop fs -rmr hdfs://nn.example.com/user/hadoop/dir 
```

退出代码：

成功返回 0，错误返回 -1。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-17T19:34:01.633

`hadoop dfs -rm -r hdfs://host:port/Navi/MyDir\,\ Name`立即尝试

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-21T02:33:01.110

```
$ hadoop fs -rmdir {directory_name} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-30T18:00:20.613

或者您可以： `hadoop fs -rm -r PATH`

提示：如果你输入： `hadoop fs -rmr PATH` 你会得到：请改用'rm -r'。

# objective-c - NSString 类别的自我分配

> ID：13529115
> 
> 赞同：0
> 
> 时间：2012-11-23T12:24:41.280
> 
> 标签：objective-c, nsstring, variable-assignment, categories, init

我想通过类别自行分配调整后的 nsstring。该示例是一个修剪功能：

我不希望这样：

```
NSString *theTempString = [theExampleString xTrim];
// ... go on doing stuff with theTempString 
```

我想要这样：

```
[theExampleString xTrim];
// ... go on doing stuff with theExmapleString 
```

类别如下所示：

```
- (void)xTrim
{
    self = [self stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];

} 
```

不可能在 init 之外进行分配的错误 - 我明白这一点。但是现在对它很感兴趣，当然可以写一个自定义的init方法，但是就没有像上面那样的方法吗？？？

问候和感谢，

马蒂亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:31:02.777

您不需要创建新的 NSString，该方法已经为您完成了：

```
- (NSString *)xTrim
{
    return [self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
} 
```

NSString 是不可变的，所以你需要分配它：

```
yourString = [yourString xTrim]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:59:39.933

您不能在 上的类别中执行此操作`NSString`，因为`NSString`管理*不可变字符串*，这意味着字符串在创建后无法更改。

您可以将其实现为类别`NSMutableString`：

```
- (void)xTrim
{
    NSString *trimmed = [self stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];
    [self setString:trimmed]; // replaces the characters of "self" with those of "trimmed".
} 
```

如果你的问题是：我可以写一个 `xTrim`这样的方法吗

```
[theExampleString xTrim] 
```

**用新实例替换**接收器`theExampleString`：不，这是不可能的。

# php - 集成 OSExcelBundle

> ID：13529117
> 
> 赞同：1
> 
> 时间：2012-11-23T12:24:50.560
> 
> 标签：php, symfony-2.1

我尝试按照自述文件在 Symfony 2.1 上安装 OSExcelBundle（ [https://github.com/ouardisoft/OSExcelBundle ）：](https://github.com/ouardisoft/OSExcelBundle)

1.  将此行添加到 composer.json 文件中的 require 选项： "os/excel-bundle": "dev-master" OK

2.  在 app/autoloader.php 中为 PHPExcel 添加自动加载器： `require __DIR__.'/../vendor/os/php-excel/PHPExcel/PHPExcel.php';`symfony 2.1 中没有 app/autoloader.php - 我试图在 app/autoload.php 中添加该行 - 没有成功。

3.  这有效：`php composer.phar install`

但如果没有第 2 步，这将不起作用：我收到此错误消息：

> 您请求了一个不存在的服务“os.excel”

如果有人可以给我一个提示会很好......

编辑：我在 AppKernel 中添加了这一行：new OS\ExcelBundle\OSExcelBundle()，因此似乎考虑了捆绑包。

不过现在我得到了这个错误：致命错误：第 29 行的 ..\vendor\os\excel-bundle\OS\ExcelBundle\Excel\Excel.php 中找不到类 'PHPExcel_IOFactory'

所以我真的需要知道我可以在哪里声明 PHPExcel ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:05:33.450

我安装了另一个捆绑包： ExcelBundle 这个安装没问题（？？？）还有！！！：它解决了我与其他捆绑包的问题 - 因为它使 PHPExcel 可用所以我可以继续...

# android - 在android中实现自定义来电屏幕

> ID：13529118
> 
> 赞同：4
> 
> 时间：2012-11-23T12:24:50.297
> 
> 标签：android

在我的应用程序中，我想实现来电屏幕（这是假的）。所以用户可以在预定的时间接到假电话。有没有办法实现自定义的通话屏幕（看起来就像真正的来电一样制成）。请为此提出任何解决方案，我从上周开始就遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:29:40.863

不同设备上的通话屏幕可能会有所不同，具体取决于制造商（例如 HTC）或 Android 版本，因此如果您想制作通用应用程序，则必须全部模仿它们。

# facebook-graph-api - 如何使用 facebook android sdk 获取每个 facebook 专辑的封面照片

> ID：13529119
> 
> 赞同：0
> 
> 时间：2012-11-23T12:24:49.270
> 
> 标签：facebook-graph-api, cover

我正在使用 facebook android sdk 来访问 facebook 相册。我有包含所有专辑对象的 json。想得到每张专辑的封面照片。这是对象：

```
 "id": "3486732467234",
 "from": {
    "name": "Persons Name",
    "id": "Persons ID"
 },
 "name": "Vacation",
 "location": "City",
 "link": "https://www.facebook.com/album.php?fbid=434235&id=324343&aid=2430",
 "cover_photo": "3489234432",
 "privacy": "everyone",
 "count": 60,
 "type": "normal",
 "created_time": "2007-06-03T23:01:16+0000",
 "updated_time": "2011-03-18T19:46:43+0000",
 "can_upload": true 
```

我怎样才能得到这个值 "cover_photo": "3489234432" 的cover_photo 图像？我能够在字符串中获取此值..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T03:26:05.303

只需通过 photoID 请求照片信息，使用此 API：

```
 https://graph.facebook.com/photoID 
```

不要忘记 access_token

# javascript - 更改后的 Javascript 数组保持不变

> ID：13529121
> 
> 赞同：1
> 
> 时间：2012-11-23T12:24:57.613
> 
> 标签：javascript, arrays

我正在制作一个在数组上运行算法的应用程序。因为在算法执行过程中数组的内容会发生变化，所以我事先将数组内容存储到另一个数组中——在源数组上执行“if”语句，但更新临时数组，然后将它们等同起来。

问题是运行算法后，两个数组仍然是相同的。似乎更新临时数组会自动更新源数组。

我创建了[这个 jsfiddle](http://jsfiddle.net/bYnm3/)来演示：

```
var a = new Array( 0 , 1 , 2 );
var b = a;

b[1]=3;

document.write( (a[1]==b[1]) );

//Should show 'false' as this will not be correct 
```

上面的代码返回“True”。这是正常行为吗？我该如何克服呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:27:40.783

`b = a`不复制数组，而是一个引用。用于`b = a.slice()`制作副本。

[**也可以看看 ...**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:28:16.597

这是正常行为，当复制数组时，您实际上是在进行引用，所以当您这样做时`var b = a`，这意味着您不是复制值，而是复制引用

如果你想浅拷贝一个数组（只有一个深度级别的数组），那么你可以使用这样的简单方法：

```
var b = a.slice(0); 
```

但是，如果您想深度复制一个数组（具有 2 个或更多深度级别的数组），那么您可以使用以下方法：

```
var objClone = function(srcObj) {
  var destObj = (this instanceof Array) ? [] : {};
  for (var i in srcObj)
  {
     if (srcObj[i] && typeof srcObj[i] == "object") {
         destObj[i] = objClone(srcObj[i]);
     } else {
         destObj[i] = srcObj[i];
     }
  }

  return destObj;
}; 
```

要使用这两种方法，请检查[此 jsFiddle](http://jsfiddle.net/E7yW6/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:36:13.103

正如其他人提到`a = b`的那样，不会复制数组。但是，如果您最终使用该`.slice()`方法复制数组，请注意数组中的对象将通过引用进行复制。

举个例子

```
var obj = { greeting: "hello world" };

var a = [ obj ];
var b = a;

a[0].greeting = "foo bar";
b[0].greeting // => "foo bar"; 
```

除此之外，你很高兴:)

# java - 片段（TabHost）子项中的 ViewFlipper 直到触摸它才显示

> ID：13529126
> 
> 赞同：0
> 
> 时间：2012-11-23T12:25:15.023
> 
> 标签：java, android

我有一个选项卡（起诉片段），选项卡内容实际上是一个视图翻转器。

Flipper 的第一页显示图像列表。当我单击某些项目时，我会转到 Flipper 的第 2 页。它将以全屏显示图像。当我单击返回时，它会转到列表视图（包含所有图像）。在我将动画放入和输出到 ViewFlipper 之前，一切都按预期工作。在我将动画设置为一些翻译动画后，我什么也看不到，直到我触摸屏幕。当我触摸屏幕时，我会看到图像，如果没有，我会看到空白标签内容。

我正在使用支持包中的 ViewFlipper 和 Fragments。

这是某种预期的行为还是问题？

**添加的动画**

left_to_right_in.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="700"
        android:fromXDelta="-220%"
        android:fromYDelta="0"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="0"
        android:toYDelta="0" />

</set> 
```

left_to_right_out.xml：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="700"
        android:fromXDelta="0"
        android:fromYDelta="0"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="220%"
        android:toYDelta="0" />

</set> 
```

right_to_left_in.xml：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="700"
        android:fromXDelta="220%"
        android:fromYDelta="0"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="0"
        android:toYDelta="0" />

</set> 
```

right_to_left_out.xml：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="700"
        android:fromXDelta="0"
        android:fromYDelta="0"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="-220%"
        android:toYDelta="0" />

</set> 
```

然后我像这样使用它们：

当我想显示视图翻转器的第二个孩子时：

```
mViewFlipper.setInAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.left_to_right_in));
mViewFlipper.setOutAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.left_to_right_out));
mViewFlipper.showPrevious(); 
```

当我想回到第一个孩子时：

```
mViewFlipper.setInAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.right_to_left_in));
mViewFlipper.setOutAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.right_to_left_out));
mViewFlipper.showNext(); 
```

# android - 如何使用应用程序锁定消息收件箱

> ID：13529129
> 
> 赞同：1
> 
> 时间：2012-11-23T12:25:19.833
> 
> 标签：android, locking, inbox

我想创建一个android应用程序，当用户按下消息收件箱时，我的应用程序应该调用并询问密码。如何开始任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:27:03.327

一般来说，您无法锁定其他应用程序。您可以编写自己的邮件应用程序（或修改现有的开源应用程序，如 K9），但您无法以这种方式影响其他应用程序。

# ejb - @Schedule 不能注入 EJB

> ID：13529131
> 
> 赞同：3
> 
> 时间：2012-11-23T12:25:24.123
> 
> 标签：ejb, code-injection, schedule

我正在使用 JBoss AS 7.1.1。

我需要一些作业在特定的日期和时间运行，所以我没有使用 Quartz，而是尝试使用 @Schedule 注释。当我进行测试时，它工作得很好，但是当我开始实施我的实际业务时，我的真正问题开始了。所以，这就是我的场景：

我有 1 个组件，用于 loggin 和 utils porposes，我在很多项目中使用它并且它工作正常，就像它一样：

我的日志 ejb（它在很多其他组件中都可以正常工作，基本上都是）：

```
package com.ejb.utils;

@Stateless
public class LogBean implements LogRemote { // => that´s the remote interface

    public void log(LogParameters params) {
        doTheLogginThings();
    }

} 
```

所以，我有另一个项目，我正在使用@Schedule。在这个例子中，我使用了@Stateless 注解，但我也尝试过使用@Singleton。

问题是：计划工作得很好，但日志 EJB 无法获取对象的实例，只有在使用 @Schedule 时。在任何其他方面，它都可以正常工作。entitymanager 正在按预期注入。有人可以帮我吗？

```
package com.batch.jobs;

@Stateless
public class MyBatchJobsBean implements MyBatchJobsRemote { // => that´s my remote interface

    @PersistenceContext
    private EntityManager em;

    @EJB( lookup = LogRemote.JNDI_NAME )
    private LogRemote log;

    private someDAO dao;

    @PostConstruct
    private void init(){
        dao = new someDAO(em);
    }

    @Schedule( minute = "*/3", dayOfWeek = "Mon , Tue , Wed , Thu , Fri", hour = "7,8,9,10,11,12,13,14,15,16,17,18,19,20" )
    private void executeBatchJob() {
        executeSomeJob();
        log.log("Log this things");
    }

} 
```

编辑 2：新的堆栈跟踪：

```
16:09:01,066 ERROR [org.jboss.ejb3.invocation] (EJB default - 1) JBAS014134: EJB Invocation failed on component PSLogBean for method public abstract br.com.pvs.pscorepersistence.model.coreframework.PSLog br.com.pvs.pscoreservices.interfaces.PSLogRemote.iniciarLog(java.lang.String,java.lang.String): javax.ejb.EJBException: java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:166) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.requiresNew(CMTTxInterceptor.java:328) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:192) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropagatingInterceptor.processInvocation(EJBRemoteTransactionPropagatingInterceptor.java:80) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.remote.LocalEjbReceiver.processInvocation(LocalEjbReceiver.java:179) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:179) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.TransactionInterceptor.handleInvocation(TransactionInterceptor.java:43) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:128) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final]
    at $Proxy72.iniciarLog(Unknown Source)  at br.com.pvs.reports.business.ExecucaoRelatorioBusiness.executarDashboardPerfil(ExecucaoRelatorioBusiness.java:89)
    at br.com.pvs.reports.business.ExecucaoRelatorioBusiness.executarDashboardPerfil3Minutos(ExecucaoRelatorioBusiness.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:127) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:137) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:34) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:34) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:101) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:43) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.timerservice.TimedObjectInvokerImpl.callTimeout(TimedObjectInvokerImpl.java:101) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.timerservice.task.CalendarTimerTask.callTimeout(CalendarTimerTask.java:60) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.timerservice.task.TimerTask.retryTimeout(TimerTask.java:184) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.timerservice.task.TimerTask.run(TimerTask.java:140) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [rt.jar:1.6.0_31]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_31]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
    at org.jboss.threads.JBossThread.run(JBossThread.java:122)
Caused by: java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:163) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:85) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.component.stateless.StatelessSessionComponent$1.create(StatelessSessionComponent.java:66) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.component.stateless.StatelessSessionComponent$1.create(StatelessSessionComponent.java:63) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.pool.AbstractPool.create(AbstractPool.java:60) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.pool.strictmax.StrictMaxPool.get(StrictMaxPool.java:123) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:47) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 78 more
Caused by: java.lang.NullPointerException
    at br.com.pvs.pscoreservices.services.PSLogBean.init(PSLogBean.java:49) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_31]
    at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptorFactory$ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptorFactory.java:130) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.weld.injection.WeldInjectionInterceptor.processInvocation(WeldInjectionInterceptor.java:73) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ManagedReferenceFieldInjectionInterceptorFactory$ManagedReferenceFieldInjectionInterceptor.processInvocation(ManagedReferenceFieldInjectionInterceptorFactory.java:112) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:161) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    ... 86 more 
```

# python - 有没有一种简单的方法可以在任何模板系统中保持单选框的选中状态？

> ID：13529135
> 
> 赞同：0
> 
> 时间：2012-11-23T12:25:34.200
> 
> 标签：python, html, templates, web

我真的必须为每一个`radio`或`check box`如果我想在提交表格后保持状态而遭受这种痛苦吗？

```
 <input type="radio" name="all_gene" class="open_gene" checked=
            % if request.GET.get("all_gene") == "0":
                    checked="checked"
            % endif
     value="0"> <label>One gene</label>

    <input type="radio" name="all_gene" class="open_gene" checked=
            % if request.GET.get("all_gene") == "1":
                    checked="checked"
            % endif
     value="1"> <label>Another gene</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:02:46.967

您总是可以给出对象和索引的名称，并使用“for”循环来创建它们和“get”函数。

# jquery - 在单个元素上使用多个动画（连续）

> ID：13529138
> 
> 赞同：1
> 
> 时间：2012-11-23T12:25:56.173
> 
> 标签：jquery, jquery-animate, slide

我试过这个：

```
$('.element').animate({marginLeft: '-=1'}, 1).animate({marginTop: '+=1'}, 1).animate({marginLeft: '+=1'}, 500); 
```

这样做的想法是，我在现实中用上边距为幻灯片制作动画，但我不希望用户看到它是从左到右制作动画的。在我的情况下，我不能正常地从左向右滑动，否则会很容易。

上面的代码并没有得到我想要的结果，它只是滞后了一段时间并且很快就出现了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:57:16.080

我发现了几种不同的方法来实现这种类型的程序动画。正如 Dio 所说，一种有效的方法是在回调“完成”函数中启动动画。但更有效的方法是使用队列。默认队列是“fx”，但您可以创建自定义队列。[我用它来帮助我排长队。](http://cdmckay.org/blog/2010/06/22/how-to-use-custom-jquery-animation-queues/)

但是如果你不喜欢队列并且想要重复，我使用 setInterval 函数做了类似的事情。

[在此处查看我的测试版示例。](http://www.benetosimonelli.com/slidertest.html)（仍未发布）。请参阅下面的代码示例以获取示例：

```
<script>
            $(document).ready(function(){
        sliderAnimation();                     
    });
    sliderAnimation(){
        var timer = setInterval(function(){
            slide();},500);
    }
slide(){
    var position $('.element').pos();
    var direcLeft = '-=';
    var direcRight = '+=';
    if(position.left => 499){
        var move = direcLeft + '500';
    }
    else {
        var move = direcRight + '500';  
    }
    $('.element').animate({marginLeft : move},500)
}
</script> 
```

我没有测试过这段代码，但它应该从右向左移动并重复，因为距离、间隔和动画间隔具有相同的变量。

# javascript - 是否可以使用 js 从请求标头中删除“缓存”？

> ID：13529145
> 
> 赞同：0
> 
> 时间：2012-11-23T12:26:32.280
> 
> 标签：javascript, caching, iframe, request-headers

基本上，在请求特定静态资源（pdf）时，我需要删除请求标头的“缓存”部分。

这有可能实现吗？

更多上下文：

我正在比较对文件的两次调用（调用如将 pdf 的路径分配给 iframe 的 src 属性）。一个有效，一个无效。使用 fiddler2 我查看了流量，似乎唯一的区别是不起作用的请求的请求标头在其标头的“缓存”部分中包含 If-Modified-Since。如果我可以删除它，我认为它将解决我遇到的问题，因为我理解缓存和显示 pdf 的 iframe 可能会出现问题。如果我错了，它不能解决它，我至少会排除这是一个问题。

编辑：如果有任何帮助，这是 IE 8 独有的问题：[https ://stackoverflow.com/questions/13528332/pdf-freezing-browser-do-i-have-enough-information-to-isolate-the-cause](https://stackoverflow.com/questions/13528332/pdf-freezing-browser-do-i-have-enough-information-to-isolate-the-cause)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:36:16.383

就像@Lee Taylor 所说，在你的路径中使用一个唯一的变量。大多数情况下，这是通过时间戳完成的，因为它是独一无二的。

# iphone - 如何将for循环的索引存储在数组Xcode中

> ID：13529149
> 
> 赞同：1
> 
> 时间：2012-11-23T12:26:43.030
> 
> 标签：iphone, xcode, arrays, string

我有一个在字符串长度上运行的 for 循环。第一个循环查找第二个循环中常见的字符。我想保存数组或字符串中常见的 nameString 的索引。请帮忙。代码在下面提到。

```
for (int i=0; i < nameString.length; i++) {

        char currentLetter = [nameString characterAtIndex:i];

    for (int j=0; j < partnersNameString.length; j++) {
        if (currentLetter == [partnersNameString characterAtIndex:j]) {

            NSRange range;
            range.length=1;
            range.location=j;
           [partnersNameString replaceCharactersInRange:range withString:@""];
            calculateField.text = partnersNameString;
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:31:00.657

您可以为此使用 NSMutablearray

```
NSMutableArray myArray = [NSMutableArray new];
for (int i=0; i < nameString.length; i++) {

        char currentLetter = [nameString characterAtIndex:i];

    for (int j=0; j < partnersNameString.length; j++) {
        if (currentLetter == [partnersNameString characterAtIndex:j]) {
            //And add it here
            [myArray addObject:currentLetter];
            NSRange range;
            range.length=1;
            range.location=j;
           [partnersNameString replaceCharactersInRange:range withString:@""];
            calculateField.text = partnersNameString;
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:40:58.053

有几种方法可以做您正在寻找的事情：您可以使用带有计数的“普通”C 数组，或者您可以使用`NSMutableArray`带有包装器的数组。

第一种方法如下所示：

```
NSUInteger indexes[MAX_LENGTH];
NSUInteger lastIndex = 0;
for (int i=0; i < nameString.length; i++) {
    char currentLetter = [nameString characterAtIndex:i];
    for (int j=0; j < partnersNameString.length; j++) {
        if (currentLetter == [partnersNameString characterAtIndex:j]) {
            indexes[lastIndex++] = i;
            // Go through the rest of your code
            ...
        }
    }
}
for (NSUInteger i = 0 ; i != lastIndex ; i++) {
    NSLog(@"Found match at index %u", indexes[i]);
} 
```

第二种方式看起来很相似，只是现在您需要使用[`NSNumber`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)将数据包装到[`NSMutableArray`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)：

```
NSMutableArray *indexes = [NSMutableArray array];
for (int i=0; i < nameString.length; i++) {
    char currentLetter = [nameString characterAtIndex:i];
    for (int j=0; j < partnersNameString.length; j++) {
        if (currentLetter == [partnersNameString characterAtIndex:j]) {
            [indexes addObject[NSNumber numberWithInt:i]];
            // Go through the rest of your code
            ...
        }
    }
}
for (NSNumber in indexes) {
   NSLog(@"Found match at index %i", [[indexes objectAtIndex:i] intValue]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:41:52.833

```
[myArray addObject:[NSNumber numberWithInt:i]]; 
```

# batch-file - 使用延迟扩展限制拆分字符串

> ID：13529157
> 
> 赞同：2
> 
> 时间：2012-11-23T12:27:16.760
> 
> 标签：batch-file

当我测试脚本时，我在尝试使用批处理从字符串中提取字符时遇到了这个问题。我已将其简化为一个简单的示例。`t.txt`只包含这个词`hello`。

```
@echo off
setlocal enabledelayedexpansion
set a=0
set b=1
for /f %%a in (t.txt) do (
set x=%%a
echo !x:~!a!,!b!!
set /a x+=1
)
pause >nul 
```

问题是，需要使用延迟扩展来访问变量`x`，并且因为我正在通过循环更新这些值，`a`所以`b`也需要使用延迟扩展来访问这些值。

尝试使用变量`a`并`b`拆分字符串时，它们都需要延迟扩展，但是`!`标记的顺序意味着它没有按照我的意图进行解析！

CMD 会将我的命令扩展为`!x:~!`,`!,!`和`!!`，而不是先扩展内部命令。显然我也不能使用`%`'s 。

我发现解决这个问题的唯一方法是调用不在循环中的外部函数，所以我可以使用`%`'s.

```
@echo off
setlocal enabledelayedexpansion
set a=0
set b=1
set v=
for /f %%a in (t.txt) do (
set x=%%a
call :RETURN x
set /a x+=1
)
pause >nul

:RETURN
set v=%1
echo %v:~!a!,!b!% 
```

有什么方法可以让 cmd 以我需要的方式解析我的命令，或者这只是我必须使用的限制`call`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:56:22.577

混合延迟和正常扩展将起作用。

```
@echo off
setlocal EnableDelayedExpansion
set a=0
set b=1
for /f %%L in (t.txt) do (
  set "x=%%L"
  echo !x:~%A%,%B%!
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:53:06.490

只需将变量转移`a`到`b`FOR 变量即可。

```
@echo off
setlocal enabledelayedexpansion
set a=0
set b=1
for /f %%a in (t.txt) do (
  set "x=%%a"
  for /f "tokens=1,2" %%A in ("%a% %b%") do echo !x:~%%A,%%B!
  REM this line makes no sense if x=hello: set /a x+=1
)
pause >nul 
```

# groovy - 如何从日志中获取某个字符串？

> ID：13529163
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:27:42.767
> 
> 标签：groovy

我需要从我的日志中取出某个字符串并显示它，但我不知道该怎么做。这是我的代码

```
<%if(build.result==Result.OK) 
{ 
build.getLog(100).each() 
{ 
line -> %>
${line}
<%  } %> 
```

现在显示的字符串是这样的（名称的最后一部分会改变）：

```
 09:19:52 Deploying artifact: http://localhost:8081/artifactory/libs-release-local/2.0.4.121106.zip 
```

我想取出那个http字符串，但我不知道怎么做。有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:34:40.000

```
line.substring(line.indexOf("http://")) 
```

# java - 避免重复提交Struts 2 jsp页面

> ID：13529166
> 
> 赞同：7
> 
> 时间：2012-11-23T12:27:59.210
> 
> 标签：java, html, jsp, struts2

大家好，我有一些 jsp 页面，我使用 struts2 来处理我的表单。用户提交表单后，地址栏中显示的 url 变成了 somthing.action，所以当用户刷新页面时，表单会再次提交。我该如何处理？提交表格后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:41:48.117

如果目标是防止重复提交表单，则使用`token`拦截器[http://struts.apache.org/2.x/docs/token-interceptor.html](http://struts.apache.org/2.x/docs/token-interceptor.html)或`tokenSession`拦截器[http://struts.apache.org/2.x/ docs/token-session-interceptor.html](http://struts.apache.org/2.x/docs/token-session-interceptor.html)。

如果您只是想在提交后刷新页面而不再次提交，则重定向到只显示结果而不是表单的操作。使用`redirectAction`结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:57:47.993

对其他两个答案+1。

**[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)**是每个 Web 技术的经典模式。

当您使用 Struts2 时，**[令牌拦截器是另一种方法；](http://www.programr.com/Struts/Using_Token_Interceptor)**

如果您不关心与旧浏览器或禁用 Javascript 的浏览器的复古兼容性，还有第三种方法：**HTML5**的`window.history.pushState`.

页面加载完成后只需将url重置为原来的，按F5就会得到原来的页面，而不是重新提交请求。

```
 $(document).ready(function() {
   window.history.pushState("","", "myOriginalUrlWithNoParams");
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:45:12.063

`POST REDIRECT GET`

需要遵循此模式以防止在刷新时重新提交表单。这意味着，在提交`POST`请求后，`POST`应该`REDIRECT`使用`GET`. 使用这种模式，如果用户刷新页面，则只会再次发生 GET 请求，因此无需更新服务器中的任何内容即可获取相同的页面。

这是推荐用于 Web 的常见设计模式。谷歌会为此提供大量资源。

# iphone - tableviewcell 中的图像减慢滚动速度

> ID：13529173
> 
> 赞同：0
> 
> 时间：2012-11-23T12:28:33.483
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我的 tableview 包含从服务器加载的图像，这减慢了我的 tableview 滚动。下面是我的代码。任何想法，请帮助我。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CustomTblViewCellFacetoface *cell = (CustomTblViewCellFacetoface *) [tableView dequeueReusableCellWithIdentifier:@"cellA"];
    if  (cell == nil)
    {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomTblViewCellFacetofaceNib" owner:Nil options:nil];

        for (id currentObject in topLevelObjects)
        {
            if  ([currentObject isKindOfClass:[UITableViewCell class]])
            {
                cell =  (CustomTblViewCellFacetoface *) currentObject;

                break;
            }
        }
    }
    // configure cell

    IStructFacetofaceRequests *objappointmentdetails  =   [M_ArrFacetofaceRequests objectAtIndex:indexPath.row];   
    cell.selectionStyle                         =   UITableViewCellSelectionStyleNone;
    cell.backgroundColor                        =   [UIColor clearColor];
    cell.m_CtrllblName.text                     =   objappointmentdetails.m_strUsername;
    cell.m_CtrllblVenue.text                     =   [NSString stringWithFormat:@"Venue : %@",objappointmentdetails.m_strVenue];
    cell.m_CtrllblDate.text                     =   [NSString stringWithFormat:@"%@ - %@",objappointmentdetails.m_strStartDate,objappointmentdetails.m_strEndDate];
    [cell.m_CtrllblName setTextColor:[UIColor colorWithRed:(113/255.f) green:(113/255.f) blue:(113/255.f) alpha:1.0f]];
    [cell.m_CtrllblVenue setTextColor:[UIColor colorWithRed:(113/255.f) green:(113/255.f) blue:(113/255.f) alpha:1.0f]];
    [cell.m_CtrllblDate setTextColor:[UIColor colorWithRed:(113/255.f) green:(113/255.f) blue:(113/255.f) alpha:1.0f]];
    cell.m_CtrllblName.font=[UIFont fontWithName:@"Arial-BoldMT" size:16];
    NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: objappointmentdetails.m_strImageurl]];

    cell.m_CtrlImgViewUser.image=[UIImage imageWithData: imageData];
    [cell.m_CtrlBtnView addTarget:self action:@selector(MoveToNextView:) forControlEvents:UIControlEventTouchUpInside];
    cell.m_CtrlBtnView.tag=indexPath.row;

    return cell;

} 
```

这是我在索引路径的 cellfor 行中使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:33:24.263

您可以使用`UITableView`延迟加载。

这是苹果 的[样品](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

[你可以在github](https://github.com/rs/SDWebImage)上看到这个项目

是的，`UITableView`是围绕延迟加载的假设设计的。当您制作 a`UITableView`时，您根本不会加载任何条目。相反，您等待系统框架调用您的`cellForRowAtIndexPath`方法。对于需要加载的每个单元格，都会调用一次该方法，而这仅适用于当时可见的单元格。当用户滚动表格视图时，新的单元格进入视图，并且您的 cellforRowAtIndexPath 方法会为每个进入视图的新单元格再次调用。

现在这是一般原则。但是，如果您的单元格是由来自服务器的数据填充的，那么还有一些额外的注意事项。您可以将您的结构`cellForRowAtIndexPath`设置为尽可能懒惰，并为进入视野的每个单元格调用服务器。但是网络延迟会使用户体验非常糟糕。因此，您可以提前在数据结构中缓冲大量有价值的数据单元，而不是`UITableView`. 这样，当`cellForRowAtIndexPath`被调用时，您将能够通过从缓冲数据构造单元格来快速提供单元格的内容。究竟要缓冲多少数据取决于每个数据元素有多大，以及您的应用程序在内存分配方面还做了什么。顺便说一句，我认为在您的应用程序中缓冲 500 到 1000 个单元格的数据没有任何问题。但不要将数据缓冲与`UITableView's`单元格的排队和重用混为一谈。没有理由保持大量准备就绪的单元格 - 只是进入这些单元格的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:34:22.387

你可以通过使用异步加载来解决这个问题。请阅读本教程。

[http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

# mongodb - Mongodb读取偏好

> ID：13529174
> 
> 赞同：3
> 
> 时间：2012-11-23T12:28:34.060
> 
> 标签：mongodb, pymongo

设置：

我有 mongodb 的一个 PRIMARY 和两个 SECONDARY 实例。两个辅助实例之一托管在与我的 Web 应用程序相同的区域中。

我正在使用 pymongo 进行连接。

询问：

如何以较低的延迟连接到 SECONDARY。

目前我正在这样做：

```
 from pymongo import ReplicaSetConnection
  from pymongo import ReadPreference

  db = ReplicaSetConnection('localhost:27017', replicaSet='rs1')['my_db']
  db.read_preference = ReadPreference.SECONDARY 
```

我与任何一个中学都有联系。如何强制以较低延迟从实例获取连接

谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T14:38:47.707

读取偏好如下：

*   **PRIMARY**：查询被发送到副本集的主节点。
*   **PRIMARY_PREFERRED**：如果可用，查询将发送到主节点，否则发送到辅助节点。
*   **SECONDARY**：查询分布在辅助节点之间。如果没有可用的辅助节点，则会引发错误。
*   **SECONDARY_PREFERRED**：查询分布在辅助节点之间，如果没有可用的辅助节点，则分布在主节点之间。
*   **NEAREST**：查询分布在所有成员之间。

因此，*最近的*二级**没有**特定的。您可以通过结合 NEAREST 和[tag_sets](http://docs.mongodb.org/manual/reference/replica-configuration/#tag-setshat)并标记辅助节点来实现此目的。

 *然后，如果辅助节点已被标记`{'secondaries': 1}`，您可以从最近的辅助节点读取，如下所示：

```
from pymongo import ReplicaSetConnection
from pymongo import ReadPreference

db = ReplicaSetConnection('localhost:27017', replicaSet='rs1')['my_db']
db.read_preference = ReadPreference.NEAREST
db.tag_sets = [{'secondaries': 1}] 
```

# 更新：

您应该注意，如果发生选举并且您的副本集的拓扑发生更改，那么您必须手动更改 tag_sets 以表示新的辅助节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:36:20.650

这个答案非常适合我的情况，因为我最近的辅助服务器与我的 Web 服务器位于同一区域（与在同一台机器上运行一样好），因此数据传输速度非常快，而且我不必付费用于带宽使用（考虑到数据量，这在一个月内可能会变得很重要）。

否则，“secondary_acceptable_latency_ms”的默认值 = 15ms。所以这并不重要。

因此，如果有人发现自己处于同样的情况，这就是该怎么做：

```
 from pymongo import ReplicaSetConnection
    from pymongo import ReadPreference

    db = ReplicaSetConnection('localhost:27017', replicaSet='rs1')['my_db']
    db.read_preference = ReadPreference.SECONDARY
    db.secondary_acceptable_latency_ms = 0.001 
```

谢谢！！*

# c# - COM+ 应用程序的对象未显示

> ID：13529177
> 
> 赞同：2
> 
> 时间：2012-11-23T12:28:41.610
> 
> 标签：c#, com+

当我使用

```
string computerName;
string applicationName;

catalog = new COMAdminCatalog();
if (computerName != ".")
{
    catalog.Connect(computerName);
}
catalog.StartApplication(applicationName); 
```

com+ 应用程序运行，但是当我在组件服务中检查组件的状态时，我看不到每个组件中的任何对象。对象、激活和池列中没有任何内容。

如何使对象显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:22:56.950

您显示的代码正在启动 COM+ 应用程序，但 Objects、Activated、Pooled、In Call 和 Call Time (ms) 列指的是该应用程序中已启动的对象数量。

应用程序是托管服务的进程。每个对象都是服务的一个实例。

通常，当您启动应用程序时不会自动创建对象实例，它们是在您通过调用 New (VB)、CreateObject (VB) 或 CoCreate... (C++) 专门实例化它们时创建的。

但是，您可以将对象设置为池化。当对象被池化时，应在启动应用程序时启动最少数量的对象。对象池传统上是通过右键单击组件服务中的类，选择属性->激活并在那里设置正确的属性来设置的。在 C# 中，这可以通过使用类上的 ObjectPooling 属性以及在组件服务中进行设置。

这对你有帮助吗？

# ios - 在保存到 iCloud 时收到信号 SIGSTOP

> ID：13529180
> 
> 赞同：1
> 
> 时间：2012-11-23T12:28:53.813
> 
> 标签：ios, icloud

当我将单个数据保存到 iCloud 时，它工作正常，当我需要将大量数据保存到 iCloud 时，我将相同的代码步骤保存在`for`循环中。

当我尝试将数据数量保存到 iCloud 时，收到以下信号并且应用程序无限挂起。信号接收区域如下图所示。

![等待陷阱](../Images/05a6917af63509954c5d364cd4c67ccb.png)

并且坠机区域指向

![坠机区](../Images/733a83abde40964ea8ac1d3518ff2cbf.png)

如何调试此崩溃？有人可以尽快帮我解释吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:42:20.307

该方法的文档说：*“重要提示：不要从应用程序的主线程调用此方法。”* 警告继续说这样做**可能会**导致死锁。听起来好像这就是你的条件。

# php - 单击时如何更改菜单链接颜色

> ID：13529181
> 
> 赞同：-6
> 
> 时间：2012-11-23T12:29:03.640
> 
> 标签：php, html, css

我正在尝试更改所访问链接的背景颜色，

这是我的标题代码

```
echo ('<ul>');
echo('<li><a href="'.$FromPage.'">Back</a></li>');  
echo('<li><a href="Talent_Hire.php">Hire</a></li>');    
echo('<li><a href="Talent_Hire.php">Hire</a></li>');
echo('<li><a href="Talent_Hire.php">Hire</a></li>');
echo('<li><a href="Talent_Hire.php">Hire</a></li>');
echo('</ul>'); 
```

我知道我们可以尝试使用 javascript，但不知道如何...请帮我解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:35:29.560

如前所述，这是 CSS + 的工作哦，伙计，您的代码是错误的。尝试这样的事情：

```
$string = '<ul>
             <li><a href="' . $FromPage . '">Back</a></li>
             <li><a href="Talent_Hire.php">Hire</a></li>
             <li><a href="Talent_Hire.php">Hire</a></li>
             <li><a href="Talent_Hire.php">Hire</a></li>
             <li><a href="Talent_Hire.php">Hire</a></li>
          </ul>';

echo $string; 
```

在你的 CSS 文件中：

```
/** This will work only for tags `a` inside a `li` that is inside an `ul` tag.
    For all `a` tags, just remove the `ul` `li` part **/
ul li a:visited { background-color: #ff0000; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:30:45.140

这是您对 CSS（A:visited 类）所做的事情，因为您不知道用户是否访问了此链接。他的浏览器**可能**知道。请参阅本教程： http: [//www.echocho.com/csslinks.htm](http://www.echoecho.com/csslinks.htm)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:31:40.273

将此添加到您的代码中：

```
echo('<style>');
echo('a:visited{');  
echo('color:red;');   
echo('}');  
echo('</style>'); 
```

或者，如果您厌倦了`echo`不必要地使用这么多 s，您可以使用：

```
echo '<style>
      a:visited{
          color:red;
      }
      </style>'; 
```

# jquery - 将复选框添加到列表视图项

> ID：13529183
> 
> 赞同：0
> 
> 时间：2012-11-23T12:29:14.290
> 
> 标签：jquery, listview, jquery-mobile, linked-list

我正在使用 jQuery Mobile 和 Javascript 创建一个 iPhone 网站，我正在尝试一些以前似乎没有尝试过的东西，因为它们没有关于它的实际教程。

我想向 Listview 项目添加一个复选框，我试图修改 jQuery 网站上可用的每个示例，但我似乎无法获得我正在寻找的效果。有什么建议么

我拥有的代码不包括我尝试过的 1000 万个其他代码

```
<div class="content-primary">   
        <ul data-role="listview">
            <li><a href="index.html">
                <img src="images/album-bb.jpg" />
                <h3>Broken Bells</h3>
                <p>Broken Bells</p>
            </a></li>
            </ul>
            </div> 
```

下面是阐明我想要实现的目标的图像： ![在此处输入图像描述](../Images/de9f173a7d35c6c32b999ffc3e04893e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:36:53.680

```
 <div class="content-primary">   
            <ul data-role="listview">
                <li><input type="checkbox" ><img src="images/album-bb.jpg" style="float:left" />
<a href="index.html">

                    <h3>Broken Bells</h3>
                    <p>Broken Bells</p>
                </a></li>
                </ul>
                </div> 
```

# android - 如何找出哪个Android APP正在使用content provider监控系统数据？

> ID：13529185
> 
> 赞同：1
> 
> 时间：2012-11-23T12:29:20.563
> 
> 标签：android, detect, contentobserver

全部，

我知道我可以用 ContentObserver 监控 android Content 的变化来监控

Android系统数据，但是否可以通过以下方式获得监控系统的APP列表

内容观察者？

例如，我尝试找到一种解决方案来检测 android APP 运行以下代码：

```
this.getApplicationContext().getContentResolver().registerContentObserver(
Settings.System.getUriFor(Settings.System.SCREEN_BRIGHTNESS), true, 
contentObserver); 
```

任何的想法 ？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:42:21.267

不，抱歉，这是不可能的，除非修改操作系统本身。

# ruby-on-rails - 在rails，gem中渲染收到的电子邮件？

> ID：13529187
> 
> 赞同：1
> 
> 时间：2012-11-23T12:29:27.340
> 
> 标签：ruby-on-rails, ruby, email, render, incoming-mail

我想呈现存储在我的数据库中的接收到的电子邮件（通过 SMTP 服务器），我的问题是：

*   是否有提供从传入电子邮件（通过 SMTP 服务器接收）呈现 html_part、text_part 的 gem 或可以帮助呈现电子邮件的东西，具体取决于电子邮件的类型（HTML、TEXT）？

向汉内斯致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:11:05.373

是的，这里有一个非常漂亮的 gem [mailcatcher](http://mailcatcher.me/) [github链接](https://github.com/sj26/mailcatcher) 说明：

1) 安装 gem 通过替换你的默认设置来配置它

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = { :address => "localhost", :port => 1025 } 
```

2）打开终端类型mailcatcher进入。

3) 发送电子邮件。

4）现在打开浏览器并转到此地址`localhost:1080`。

您将看到您已收到电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T22:29:38.577

[来自 37signals 的MailView](https://github.com/basecamp/mail_view)允许您渲染 Mailer 对象并从浏览器中查看它们。

# wpf - 从合并序列中删除一个 IObservable

> ID：13529189
> 
> 赞同：2
> 
> 时间：2012-11-23T12:29:30.600
> 
> 标签：wpf, c#-4.0, system.reactive

我正在使用 Observable.Merge 组合多个序列并在 UI 的单个视图中显示。用户可以选择在 UI 中添加或删除序列（提要）。虽然我使用 Merge 来合并提要。我不确定如何将 IObservable 从合并的序列中分离出来。目前我正在创建一个全新的 IObservable，省略了我想要的提要。是否可以动态添加和删除 ViewModel 已经订阅的 IObsevable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:50:51.370

看看 using`IObservable<IObservable<T>>`然后使用`Merge`. 这会自动允许您通过结束内部来删除序列`IObservable<T>`。简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T23:57:24.663

像这样的东西也可以，但我怀疑有更简洁的方法。

```
class Merger<T>
{
    Subject<T> _merged = new Subject<T>();

    public IObservable<T> Merged { get { return _merged; } }

    public IDisposable Add(IObservable<T> newStream)
    {
        return newStream.Subscribe(_merged);
    }
} 
```

要从合并的流中删除某些内容，请处置 IDisposable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:24:17.233

这可能有助于您开始，但在重新连接时，因为 b 是冷的，b 将从头开始重新启动：

```
var a = Observable.Generate('A', x => x <= Char.MaxValue, x => ++x, x => x, x => TimeSpan.FromMilliseconds(200)).Select(x => "a: " + x).Publish();
var b = Observable.Generate('a', x => x <= Char.MaxValue, x => ++x, x => x, x => TimeSpan.FromMilliseconds(500)).Select(x => "b: " + x).Publish();

var merged = a.Merge(b).Publish();
var submerged = merged.Subscribe(x => x.Dump());

var subA = a.Connect();
var subB = b.Connect();
merged.Connect();

Task.Delay(2000).ContinueWith(t => subB.Dump("Disposing b.").Dispose());
Task.Delay(4000).ContinueWith(t => b.Connect()).ContinueWith(_ => "Reconnected to b"); 
```

**编辑：**

要向合并的 IO 添加另一个“c”：

```
var a = Observable.Generate('A', x => x <= Char.MaxValue, x => ++x, x => x, x => TimeSpan.FromMilliseconds(200)).Select(x => "a: " + x).Publish();
var b = Observable.Generate('a', x => x <= Char.MaxValue, x => ++x, x => x, x => TimeSpan.FromMilliseconds(500)).Select(x => "b: " + x).Publish();
var c = Observable.Generate('1', x => x <= Char.MaxValue, x => ++x, x => x, x => TimeSpan.FromMilliseconds(100)).Select(x => "c: " + x).Publish();

var merged = a.Merge(b).Merge(c).Publish();
var submerged = merged.Subscribe(x => x.Dump());

var subA = a.Connect();
var subB = b.Connect();
merged.Connect();

Task.Delay(2000).ContinueWith(t => subB.Dump("Disposing b.").Dispose());
Task.Delay(4000).ContinueWith(t => b.Connect()).ContinueWith(_ => "Reconnected to b".Dump());
Task.Delay(6000).ContinueWith(t => c.Connect()).ContinueWith(_ => "Connecting to c".Dump()); 
```

# android - Android：在没有 PC 连接的情况下获取日志

> ID：13529192
> 
> 赞同：2
> 
> 时间：2012-11-23T12:29:52.410
> 
> 标签：android, logging

我必须通过在街上走来调试我的 Android 应用程序并获得不同的 WiFi 信号。
当设备连接到我的 PC 时，我可以通过 LogCat 轻松获取日志，但在外部测试期间我需要日志语句。

现在，有没有办法获取日志？类似日志文件的东西？

如果没有，是否可以添加像 java.util.logging.FileHandler 这样的文件记录器？

或者有什么其他建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:32:51.747

检查 play store 中的 Logcat 应用程序。

这将向您显示设备的 logcat，并允许您将其保存到 sd 卡。

[https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=nl](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=nl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:30:51.960

您可以以编程方式捕获日志并在视图中跟踪它.. [http://www.androidsnippets.com/how-to-capture-application-log](http://www.androidsnippets.com/how-to-capture-application-log)

# vb.net - 在运行时看不到 datagridview 上新添加的项目

> ID：13529196
> 
> 赞同：1
> 
> 时间：2012-11-23T12:30:02.577
> 
> 标签：vb.net, winforms, datagridview

我有一个在 access 数据库中插入数据的程序，用户可以在数据网格视图中查看新添加的项目。在我将新项目添加到数据库后，程序运行时在 datagridview 中看不到它。我必须停止程序并再次运行它才能看到我所做的更改。

这是我加载datagridview的方式：

```
Public Class frmSupplies

Private Sub frmSupplies_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'SuppliesDataSet.product_info' table. You can move, or remove it, as needed.
    Me.Product_infoTableAdapter.Fill(Me.SuppliesDataSet.product_info)
End Sub 
```

如何在程序仍在运行时查看新添加的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:31:04.707

我创建了一个模块，它将调用 datagridview 的“刷新”函数。我在我的项目中添加了一个新模块并添加了以下代码：

```
Imports System.Data.OleDb
Module Module1
Dim con As New OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0;Data Source= database path")
Sub REFRESHDGV()
    Dim sql As String
    sql = "SELECT * FROM [product info]"
    Dim adapter As New OleDbDataAdapter(sql, con)
    Dim dt As New DataTable("product info")
    adapter.Fill(dt)
    Form1.dgv1.DataSource = dt
End Sub
End Module 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:11:07.233

当您将 Access 表绑定到 Windows 窗体上的网格，然后更改该应用程序外部的数据时，窗体或网格根本无法知道数据已更改，除非 1) 他们收到来自访问，或 2) 应用程序不断查询数据源以查看是否进行了更改。

选项 1 不适用于 MS Access。

您唯一的选择是在表单上放置一个计时器以定期检查更改（以固定的时间间隔）并重新加载表格并在发现更改时刷新网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:39:02.993

尝试环绕[beginedit](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.beginedit.aspx) ... 结束编辑

```
 gridview.BeginEdit();
 ----
 gridview.EndEdit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:57:22.690

我不熟悉访问（我使用oracle）。如果数据库发生变化，Oracle 数据库可以通知您，因此您可以刷新 datagridview。在您的情况下，您可以有一个按钮（用于刷新 datagridView）或一个计时器并每 x 次刷新一次（您知道时间）：

```
'I imagine that you have a bindingSource
 bindingSource1.DataSource = Product_infoTableAdapter.GetData()
 bindingSource1.ResetBindings(false) 
```

也许你想看看[DataGridView DataBinding](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)

# javascript - 只取具有一定宽度的 span 的内容

> ID：13529197
> 
> 赞同：-2
> 
> 时间：2012-11-23T12:30:06.287
> 
> 标签：javascript, jquery, css, html

我有一个动态填充内容的跨度。当内容达到 500px 的宽度时，我需要读取 300px 的内容。内容可以是一行或多行。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:09:15.430

grabbag.js库有一个专门用于此目的的方法* [。](https://github.com/doodads/grabbag.js)

文档不多，但其中有一个名为 grabbag.measure.crop 的函数，您可以使用它来将字符串裁剪为给定尺寸。我写了一个小的[JS fiddle](http://jsfiddle.net/9MyW3/)来演示如何使用这个库，但是基本的东西是这样的：

```
var result = grabbag.measure.crop(inputString, 300 /* number of pixels */, ele); 
```

其中 ele 是用于“窃取”样式的 DOM 元素。结果将包含一个字符串，该字符串几乎不适合给定的像素数。

希望有帮助。

*   免责声明：我是图书馆的作者之一。

# php - PHP中的对象数组

> ID：13529198
> 
> 赞同：0
> 
> 时间：2012-11-23T12:30:06.493
> 
> 标签：php, object, spl

我创建了一个在其属性中保留一些信息的类。它包含 add() 方法，该方法将一组新信息添加到此类属性中的所有当前。

我希望它的对象表现得像数组偏移量。例如，调用：

```
$obj = new Class[0]; 
```

将创建包含第一组信息的对象。

我还想在该类上使用 foreach() 循环。

应该从类外部拒绝属性的更改，但我应该可以访问它们。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:48:13.283

你需要的是`ArrayObject`它`IteratorAggregate , Traversable , ArrayAccess , Serializable , Countable`完全实现

例子

```
echo "<pre>";
$obj = new Foo(["A","B","C"]);
foreach ( $obj as $data ) {
    echo $data, PHP_EOL;
}

echo reset($obj) . end($obj), PHP_EOL; // Use array functions on object
echo count($obj), PHP_EOL; // get total element

echo $obj[1] ; // you can get element
$obj[0] = "D"; //  Notice: Sorry array can not be modified 
```

输出

```
A
B
C
AC
3
B 
```

使用的类

```
class Foo extends ArrayObject {
    public function offsetSet($offset, $value) {
        trigger_error("Sorry array can not be modified");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:48:06.047

在这种情况下，为什么不只拥有一个类实例数组？一个非常简单的例子：

```
/**
 * @var MyClass[]
 */
$myClasses = array();

$myClasses[] = new myClass(); 
```

或者使用更专业的 SPL 类之一，在这里：[http](http://php.net/manual/en/book.spl.php) ://php.net/manual/en/book.spl.php，例如 SplObjectStorage（我不需要这个，但它看起来像可能是你需要的）

最后，您可以通过简单地创建一个扩展 ArrayAccess 并强制您的类类型的类来创建自己的类？

这实际上取决于您需要什么，对于绝大多数情况，我将依赖于将类存储在数组中并在我的模型中强制执行任何业务逻辑（以便数组值始终是同一个类）。这可能性能较差，但假设您正在制作一个网络应用程序，这*不太*可能成为问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:35:08.293

这就是您可以创建具有不同构造函数值的多个实例的方法。

```
$objConfig = array( 
    array('id'=>1 , 'name'=>'waqar') , 
    array('id'=>2 , 'name'=>'alex')
);
$objects = array();

for($i=0; $i<count($objConfig) ; $i++)
{
    $objects[$i] = new ClassName($objConfig[$i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:40:41.977

您需要实现[`ArrayAccess`](http://php.net/manual/kr/class.arrayaccess.php)接口，示例非常简单。

无论如何，我真的不鼓励你为了糟糕的设计目的而混合类和数组行为：应该使用数组访问来保持语法更简洁。

充分利用类、魔法方法和反射：除了关联数组之外，还有一个明亮而快乐的世界。

# git - prepare-commit-msg 测试不同场景的输出

> ID：13529199
> 
> 赞同：1
> 
> 时间：2012-11-23T12:30:23.510
> 
> 标签：git, githooks, git-commit

我制作了一个 prepare-commit-msg 钩子，它将向提交消息中添加大量数据，这些数据将呈现给我的开发人员。

我想自动测试 prepare-commit-msg 钩子的输出，这样我就可以使用 jenkins 来验证我所做的新更改是否会破坏旧格式。

但是我如何在没有 git 的情况下“触发”并从 prepare-commit-msg 钩子中获取输出打开一个编辑器。

有没有解决方法。

git commit -m "Text" 不在任何地方给我输出，或者它可能给我？

或者我真的应该在钩子内部添加这个测试，所以当我启用调试时，我应该得到输出？

我只希望 git 可以给我输出，因为它将呈现给开发人员的消息。

# mysql - PHPExcel MySQL 导出 w/2 查询

> ID：13529201
> 
> 赞同：5
> 
> 时间：2012-11-23T12:30:34.277
> 
> 标签：mysql, loops, phpexcel

我已经开始使用 PHPExcel，我不得不说，它是一款很棒的软件。但是，我无法通过下面编写的这段代码，也不知道如何操作。

```
<?php
   $query1 = "SELECT DISTINCT id FROM table_name;";
   $result1 = mysql_query($query1);
   $registers1 = mysql_fetch_object($result1);

   $row = 15;
   $row2 = 16;
   $row3 = 17;
   $row4 = 18;
   $col = 1; // B

   for ($i = 1; $i <= $registers1; $i++) {
      while ($row_x = mysql_fetch_object($result1)) {
         $startColumn = $col;
         $endColumn = $col+5;
         $range = PHPExcel_Cell::stringFromColumnIndex($startColumn) . $row.':' .
                  PHPExcel_Cell::stringFromColumnIndex($endColumn) . $row2;
         $objPHPExcel->getActiveSheet()->mergeCells($range);
         // Print rest of cells.

         $query2 = "SELECT * FROM table2_name WHERE id = '".$registers1->id."' ORDER BY ID;";
         $result2 = mysql_query($query2);

         while ($row_y = mysql_fetch_object($result2)) {
            $objPHPExcel->getActiveSheet()->setCellValue('B'.$row4, $row_y->value_xyz);
            // Print rest of cells.
            $row4++;
         }
      $row += 20;
      $row2 += 20;
      $row3 += 20;
      }
   }

?> 
```

现在，如您所见，该代码有两个不同的查询。我想将这些结果转储到 XLS 页面（已使用 PHPExcel 例程创建），该页面将显示：

*   ID
    *   该 id 的值

（空格）

*   ID
    *   该 id 的值

等等。我知道这个问题可能很奇怪（也很容易解决），但我不能再盯着这段代码了。有任何想法吗？谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:58:04.020

最后，我遇到了解决方案。

看起来我不需要加倍循环。一旦解决了这个问题，剩下的就是迭代值并删除行而不是添加那些。

无论如何感谢所有的帮助。

# sql - 用逗号分隔子字符串 SQL Server

> ID：13529202
> 
> 赞同：1
> 
> 时间：2012-11-23T12:30:36.577
> 
> 标签：sql, sql-server

我有字符串，我必须从中提取子字符串并查询它们的值。

```
declare @str varchar(max)
@str='Hello,world,continent,nation,city'

select * from mytable
where col_word in(SELECT REPLACE(@str,',',''',''')) 
```

子查询

```
SELECT REPLACE(@str,',',''',''') 
```

结果是

```
Hello,'world','continent','nation','city 
```

我希望上面的结果用单引号引起来，以便它可以工作`IN`

但这仅返回第一个 col_word 值`Hello`，它是 中的第一个子字符串`@str`。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:38:59.283

尝试这个：

您不能将查询的一部分作为字符串。我们必须将整个查询作为一个字符串，然后使用[**EXEC()**](http://msdn.microsoft.com/en-us/library/ms188332.aspx)命令执行它.. 或[**sp_executesql**](http://msdn.microsoft.com/en-us/library/ms188001.aspx)存储过程。推荐后者。

```
declare @str varchar(max);
select @str='Hello,world,continent,nation,city';

SELECT @str=''''+REPLACE(@str,',',''',''')+''''
exec('select * from mytable where col_word in('+@str +')') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:45:01.580

尝试这个：

```
declare @str varchar(max)
declare @pattern varchar(max)
SET @str='Hello,world,continent,nation,city'
SELECT REPLACE(@str,',',''',''')
SET @pattern = REPLACE('Hello,world,continent,nation,city', ',', ''',''')
EXEC('select * from mytable where col_word in(''' + @pattern + ''')') 
```

# rotation - 网站可以强制设备旋转锁定吗？

> ID：13529207
> 
> 赞同：9
> 
> 时间：2012-11-23T12:30:56.897
> 
> 标签：rotation, portrait

我目前正在开发一个对所有设备都相对平等的网站；桌面和移动。我正在与 % 合作，因为我认为这是最好的选择。

它基于纵向模式。如果您将设备更改为横向，整个网站看起来就像一个胖胖的侏儒。

所以我想知道：是否有可能锁定一个网站，一直以纵向显示它？

我的意思是：设备旋转锁定。并不是说在横向时，网站会返回纵向，而在横向时。（我已经在 StackOverflow 上看到了一些代码。）

```
Check my site at: http://prototyping.iscs.nl/mobiel.html 
```

以供参考 ：）

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-26T15:19:44.497

*在对旧（'12）问题的更新中，我认为这可以帮助很多人！*

我还没有找到锁定设备旋转的真正方法，但想出了一个完美的替代方案，我也见过一些人这样做。

# 选项 A.**一个简单的警报**

通过使用简单的 jQuery 脚本，您可以检测设备的方向。

```
if(window.innerHeight > window.innerWidth){
  alert("Please use Landscape!");
} 
```

好吧，一个简单的警报很容易，但通知可以更好！

# 选项 B.**一个漂亮的图像通知**

**（截至 04-2018 年更新**：（因为我刚刚再次看到我的帖子，我想到了一些更简单的东西..）使用媒体查询。与下面几乎相同，但不是使用 Javascript，而是使用 css，默认隐藏元素并在方向为横向时显示它 → @media (orientation: Landscape) {...})

只需`fixed`向页面添加一个元素，该元素会在方向更改时显示。

**HTML**

```
<div class="turnDeviceNotification"></div> 
```

**CSS**

```
.turnDeviceNotification {
  position:fixed;
  top: 0;
  left:0;
  height:100%;
  width:100%;
  display: none;
} 
```

您可以使用文本更新此元素，或者简单地将其连接到背景图像

```
.turnDeviceNotification {
  background-image:url('../images/turnDevice.jpg');
  background-size:cover;
} 
```

只需将漂亮的背景添加到您的图像文件夹中，如下所示。

注意到该对象有一个`display: none`？那是因为否则即使在纵向模式下也会显示。现在，您需要做的就是使用下面的脚本，因此该对象仅以横向模式显示。

```
jQuery(window).bind('orientationchange', function(e) {
 switch ( window.orientation ) {
  case 0:
    $('.turnDeviceNotification').css('display', 'none');
    // The device is in portrait mode now
  break;

  case 180:
    $('.turnDeviceNotification').css('display', 'none');
    // The device is in portrait mode now
  break;

  case 90:
    // The device is in landscape now
    $('.turnDeviceNotification').css('display', 'block');
  break;

  case -90:
    // The device is in landscape now
    $('.turnDeviceNotification').css('display', 'block');
  break;
 }
}); 
```

这将仅在设备方向更改为横向时显示通知。 ![示例图像通知](../Images/3d8d44bb8603135482a98f9c0a419bde.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:40:41.337

不可能。锁定旋转是一个设备设置： http: [//support.apple.com/kb/HT4085](http://support.apple.com/kb/HT4085) 当没有被设备锁定时，浏览器会旋转，因为你的内容在浏览器里面，所以内容也会旋转。也许视口将有助于解决您的问题：< meta name="viewport" content="width = device-width"/>"。我看到您缺少那个元标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-09T18:50:15.717

```
@media screen and (min-width: 320px) and (max-width: 767px) and (orientation: landscape) {
  html {
    transform: rotate(-90deg);
    transform-origin: left top;
    width: 100vh;
    overflow-x: hidden;
    position: absolute;
    top: 100%;
    left: 0;
  }
} 
```

来源：[https ://css-tricks.com/snippets/css/orientation-lock/](https://css-tricks.com/snippets/css/orientation-lock/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-20T18:00:23.213

我认为不可能，但有几种方法可以解决

js方式：`window.DeviceOrientationEvent`

css方式

`@media (orientation: landscape) { body { background-color: black; } }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-25T03:20:57.837

目前不可能。但反过来说，

**使用 CSS**，媒体查询有助于横向视图正常工作。

`min-aspect-ratio: 13/9`很**重要**，如果你不指定这个，对于一些移动设备，**如果你专注于一个表单域，键盘打开**，这基本上改变了视口的高度**，基本上触发了横向媒体查询**。因此，最小纵横比对于横向媒体查询非常重要。

```
@media only screen and (min-width: 320px) and (max-width: 1023px) and (min-aspect-ratio: 13/9) and (orientation: landscape) {
    // Landscape view properties
} 
```

**使用 JavaScript**，我们可以**使用 screen.availHeight ，因为键盘显示时屏幕高度不会改变**。还必须添加更多检查以允许以下桌面视图。

```
var currentOrientation = function() {  
  if(screen.availHeight < screen.availWidth){
    // Landscape view
  } else {
    // Portrait view
  }
}
// Set orientation on initiliasation
currentOrientation();
// Reset orientation each time window is resized. Keyboard opening, or change in orientation triggers this.
window.addEventListener('resize', currentOrientation); 
```

# javascript - javascript OCR API

> ID：13529208
> 
> 赞同：10
> 
> 时间：2012-11-23T12:30:58.130
> 
> 标签：javascript, json, api, ocr

我正在寻找 JavaScript OCR API。

例如：发送图片和预期的结果类型（例如数字、对象、文本、混合等）并以字符串或 JSON 的形式接收结果。

有谁知道您可以通过 JavaScript 轻松访问的 API/服务？

编辑：我忘了说，主要用例只是识别数字（如浮点数和双精度数）和价格（例如 0.02 美元）。

我已经找到了一些像 abbyy 这样的“cloud-ocr API”，但是它们很贵……每个请求 2 美分……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-03T21:06:07.713

我看到这是一个旧帖子，但这个话题仍然是开放的，现在有一些新玩家。您可以使用HP [Haven OnDemand的](https://www.havenondemand.com/)[OCR API](https://dev.havenondemand.com/apis/ocrdocument)。有免费的开发者帐户，您可以使用自己的图像在线试用 API，它们支持 JavaScript（以及其他语言）并提供 JSON 格式的输出。

他们还有一些使用 JavaScript 进行 OCR 的教程，可能对您有所帮助。

1.  [[javascript] 使用 OCR 和实体提取进行 LinkedIn 公司查找](https://community.idolondemand.com/t5/Blog/javascript-Using-OCR-and-Entity-Extraction-for-LinkedIn-Company/ba-p/460)
2.  [[JavaScript] 从名片中提取联系信息](https://community.idolondemand.com/t5/Blog/JavaScript-Extracting-Contact-Information-from-Business-Cards/ba-p/268)

希望这会有所帮助。

问候，

Hughesthe1st
（我为惠普工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:37:31.480

试试[Ocrad.js](https://github.com/antimatter15/ocrad.js)。演示：

*   [绘制文字](http://antimatter15.github.io/ocrad.js/demo.html)
*   [使用网络摄像头](https://kdzwinel.github.io/JS-OCR-demo/)

# symfony - 将 Symfony2 的默认模板引擎更改为 PHP

> ID：13529209
> 
> 赞同：2
> 
> 时间：2012-11-23T12:30:58.627
> 
> 标签：symfony, twig, template-engine

我知道如何通过将 PHP 模板引擎添加到 app/config/config.yml 来使用 PHP 模板：

```
 templating:      { engines: ['php','twig'] } 
```

...而且我知道如何通过添加注释来更改特定控制器中的默认模板引擎：

```
/**
 * @Template(engine="php")
 */ 
```

...但是有没有办法改变整个应用程序的默认值，而不是一个控制器一个控制器？我找不到任何关于此的文档/讨论。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:40:36.607

你在这里有答案：http: [//symfony.com/doc/current/cookbook/templating/PHP.html](http://symfony.com/doc/current/cookbook/templating/PHP.html)

```
# app/config/config.yml
framework:
    templating:    { engines: ['twig', 'php'] } 
```

只需禁用树枝：

```
# app/config/config.yml
    framework:
        templating:    { engines: ['php'] } 
```

# c# - 蓝牙和 C# PC -> 无需配对的手机连接

> ID：13529216
> 
> 赞同：2
> 
> 时间：2012-11-23T12:31:18.730
> 
> 标签：c#, bluetooth, 32feet

我正在尝试编写简单的应用程序，它将短信发送到蓝牙适配器范围内的手机。

我的第一次尝试是发送文件：我可以将文件从 PC 发送到手机，但我必须在手机和 PC 上输入 PIN。

我宁愿发送短信（类似于推送消息） - 是否可以在不配对设备的情况下发送？

如果无法发送推送消息，也许我可以在不请求 PIN 的情况下发送简单文件？

我使用 32 英尺图书馆。

示例代码（用于向选定设备发送文件）

```
static int BTSendFile(string adres, string FileName)                            
        {
            Uri uri = new Uri("obex://" + adres + '/' + Path.GetFileName(FileName));
            ObexWebRequest req = new ObexWebRequest(uri);

            req.ReadFile(FileName);

            ObexWebResponse rsp = (ObexWebResponse)req.GetResponse();

            return (int)rsp.StatusCode;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:01:01.483

一个快速的答案是；不，你**总是**需要某种配对。

但是，如果您查看[不同*类型*的配对](http://en.wikipedia.org/wiki/Bluetooth#Pairing_and_bonding)，您会发现 BT 2.1 支持使用*Just Works模式的***安全简单配对 (SSP)**。这允许您（几乎）在没有任何用户交互的情况下配对设备。来自维基百科：

 *> **行之有效**：顾名思义，此方法行之有效。无需用户交互；但是，设备可能会提示用户确认配对过程。这种方法通常用于 IO 功能非常有限的耳机，并且比固定 PIN 机制更安全，固定 PIN 机制通常用于这组有限设备的传统配对。这种方法不提供中间人保护。

*但是*，由于“这种方法通常用于 IO 功能非常有限的耳机”，它可能不适用于您正在谈论的手机，但我认为您应该知道 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T12:46:59.803

根据官方蓝牙消息访问配置文件，即处理通过远程设备访问手机上的 SMS/MMS 系统的特定蓝牙配置文件：

'MCE设备只有在成功建立安全连接后才能使用MSE设备的服务。这包括交换安全初始化消息、创建链接密钥和启用加密'

来自：[https ://developer.bluetooth.org/TechnologyOverview/Pages/MAP.aspx](https://developer.bluetooth.org/TechnologyOverview/Pages/MAP.aspx)

如果您有兴趣，那里还有完整规范的链接。

这肯定表明需要安全配对，我认为这涉及密钥。我的经验是，一旦设备已配对，只要设备记住该配对，就可以建立连接而无需重复配对（即我已经配对了一次设备而不必再次配对）。至于上面 khillang 提到的更简单的非密钥配对，我还没有看到任何相关信息 - 如果它纯粹用于耳机等设备，那么安全要求可能会更低，因为他们不太可能想要对设备进行写访问？*

# java - ClassNotFoundException 在运行时，但应用程序编译

> ID：13529217
> 
> 赞同：7
> 
> 时间：2012-11-23T12:31:19.993
> 
> 标签：java, jar, compilation, runtime, classnotfoundexception

在 Java 应用程序中，我试图通过在类上使用**newInstance()**方法来创建类**Class1的实例。**Class1 属于我的项目，但它还需要来自另一个项目的**Class2**，它位于我已添加到项目和 Eclipse 中的构建路径**的外部 jar中。**Eclipse 似乎在编译项目时找到了 Class2，没有任何问题，但是当我尝试获取 Class1 的实例时，它会抛出关于 Class2的**ClassNotFoundException 。**

 ******这是 Class1 的样子：

```
import other.package.Class2;

public class Class1 implements Class1Interface{
    //there's no explicit constructor

    @Override
    public void method1(String param){
        System.out.println("Loading.....");
    }   

    @Override
    public void notifyChanges(String param) throws Exception{
        Class2 class2 = Class2.getInstance(); //here it's used the Class2 from another jar
        ... 
    }
} 
```

这就是我尝试获取它的实例的方式：

```
String myParam = "blabla";
Class1Interface interf = "my.package.Class1";
try {
    interf = (Class1Interface) Class.forName(interfazws).newInstance();
    interf.method1(myParam);
} catch (InstantiationException e) {
    handle(e);
} catch (IllegalAccessException e) {
    handle(e);
} catch (ClassNotFoundException e) {
    handle(e);
} 
```

当我执行时，我得到：

```
Caused by: org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method 'execute' on target class [class my.package.myJobJob] failed; nested exception is java.lang.NoClassDefFoundError: other/package/Class2            
...
Caused by: java.lang.NoClassDefFoundError: other/package/Class2
...
Caused by: java.lang.ClassNotFoundException: other.package.Class2 
```

关于我的项目配置要添加的另一件事是，在 WEB-INF 文件夹下，我有一个名为 libs 的文件夹，其中包含一些 jars，我创建了另一个名为 libs_other_company 的 lib 文件夹，并将 Class2 所在的 jar 放在那里。如果我去 java构建路径我可以看到库选项卡中添加的 jar。

我直接从 Eclipse 在 Tomcat 服务器中运行应用程序（我没有使用 Ant 或 Maven 之类的东西）。

它怎么可能在编译时找到类但在运行时找不到？有什么想法让它起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T12:58:12.660

您混淆了两个独立的东西，编译时类路径解析和运行时类路径访问。

1.  当你**编译**你的应用程序时，你需要让你的应用程序在你的开发环境中使用/引用的类编译类路径；如果您不（这样做），则会发生编译时错误。

2.  当您**运行**已编译的应用程序时，您需要将应用程序使用/引用的所有类都包含在您的 JVM 类路径中或包含在您的应用程序包中；如果您不（这样做），则会发生运行时错误。

你体验第二个。******

# php - 提取字符串中的源 url 和锚文本

> ID：13529219
> 
> 赞同：3
> 
> 时间：2012-11-23T12:31:32.443
> 
> 标签：php

我正在尝试从一系列字符串中提取数据，但没有运气。在下面的示例代码中，我尝试使用 preg_split 但它没有给我想要的结果。

使用下面的代码：

```
<?php
$str = '<a href="https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA" rel="nofollow noreferrer">Nike Air Jordan SC-2 Mens Basketball Shoes 454050-035</a><img src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
';
$chars = preg_split('/ /', $str, -1, PREG_SPLIT_OFFSET_CAPTURE);

echo '<pre>';
print_r($chars);
echo '<pre>';
?> 
```

给出结果：

```
Array
(
    [0] => Array
        (
            [0] =>  0
        )

    [1] => Array
        (
            [0] => href="https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA" rel="nofollow noreferrer">Nike
            [1] => 3
        )

    [2] => Array
        (
            [0] => Air
            [1] => 167
        )

    [3] => Array
        (
            [0] => Jordan
            [1] => 171
        )

    [4] => Array
        (
            [0] => SC-2
            [1] => 178
        )

    [5] => Array
        (
            [0] => Mens
            [1] => 183
        )

    [6] => Array
        (
            [0] => Basketball
            [1] => 188
        )

    [7] => Array
        (
            [0] => Shoes
            [1] => 199
        )

    [8] => Array
        (
            [0] => 454050-035 205
        )

    [9] => Array
        (
            [0] => src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA"
            [1] => 224
        )

    [10] => Array
        (
            [0] => width="1"
            [1] => 305
        )

    [11] => Array
        (
            [0] => height="1"
            [1] => 315
        )

    [12] => Array
        (
            [0] => border="0"
            [1] => 326
        )

    [13] => Array
        (
            [0] => alt=""
            [1] => 337
        )

    [14] => Array
        (
            [0] => style="border:none
            [1] => 344
        )

    [15] => Array
        (
            [0] => !important;
            [1] => 363
        )

    [16] => Array
        (
            [0] => margin:0px
            [1] => 375
        )

    [17] => Array
        (
            [0] => !important;"
            [1] => 386
        )

    [18] => Array
        (
            [0] => />

            [1] => 399
        )

) 
```

请注意在array1中，“Nike is included when I only need is just the URL.

```
[1] => Array
        (
            [0] => href="https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA" rel="nofollow noreferrer">Nike
            [1] => 3
        ) 
```

实际上，我提取 $str 的最终目标只是将源 URL 和锚文本输出到一个单独的数组中，如下所示：

**网址：**

[http://www.amazon.com/gp/product/B008EYEYBA/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B008EYEYBA&linkCode=as2&tag=mytwitterpage-20](https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA)

**锚文本：**

耐克 Air Jordan SC-2 男式篮球鞋 454050-035

非常感谢我如何做到这一点的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:04:03.923

使用正则表达式解析 html 是一种不好的做法。PHP 有[DOM](https://www.php.net/manual/en/book.dom.php)扩展。您根本无法构建适用于您可能遇到的任何 html 的通用正则表达式。DOM 方法更具可扩展性。

```
$string = '<a href="https://rads.stackoverflow.com/amzn/click/B008EYEYBA">Nike Air Jordan SC-2 Mens Basketball Shoes 454050-035</a><img src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />';
$dom = new DOMDocument();
libxml_use_internal_errors(true);
$dom->loadHTML($string);
libxml_clear_errors();
$elementA = $dom->getElementsByTagName('a')->item(0);
$aText = $elementA->nodeValue;
$aLink = $elementA->getAttribute('href');
echo $aLink . "\n" . $aText; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T12:36:28.133

您可以在 php 函数的帮助下执行此操作。

您想在此处删除锚标记。

您可以使用 strip_tags() 函数删除所有标签。

# java - 如何在java中为标准对象编写泛型扩展？

> ID：13529225
> 
> 赞同：0
> 
> 时间：2012-11-23T12:32:03.477
> 
> 标签：java, generics

我是 Java 初学者，我问一些关于 Java 编写通用代码的传统的话。我在下面的代码中编写了用于将项目推入通用排序集合的辅助类，我想知道它是否被接受？或者我应该扩展一些集合的基类？或者其他方式在 Java 中欢迎更多？

```
package com.rkovalev.Helper;

import java.util.Comparator;
import java.util.List;

public abstract class ListExtensions {
    public static <T> void addOnCompare(List<T> collection, T item, Comparator<T> comparator) {
        synchronized(collection) {
            int i = 0;
            int size = collection.size();
            if (size == 1) {
                int diff = comparator.compare(item, collection.get(0));
                switch(diff) {
                case 1: i++; break;
                default: break;
                }
            } else {
                int range = size - 1;
                i = size / 2;
                int left = 0; 
                int right = range;
                while(true) {
                    if (i <= 0) { i = 0; break; }
                    if (i > range) { i = range; break; }
                    int diff = comparator.compare(item, collection.get(i));
                    if (diff == 0) break;
                    else { 
                        if (diff == -1) right = i;
                        if (diff == 1) left = i;
                        int near = i + diff; 
                        if (near < 0) { i = 0; break; }
                        if (near > range) { i = range + 1; break; }
                        int diff_near = comparator.compare(item, collection.get(near));
                        if (diff_near == 0) { i = diff_near; break; }
                        if (diff_near == diff) {
                            int step = (right-left)/2;
                            if (step == 0) step = 1;
                            switch(diff){
                            case -1:
                                right = i;
                                i = i - step; break;
                            case 1: 
                                left = i;
                                i = i + step; break;
                            }
                        } else if (diff > diff_near) { 
                            i = near; break; 
                        } else { break; }           
                    }
                }
            }
        collection.add(i, item);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:56:56.783

如果您想为所有集合类提供额外的“通用”功能，那么将功能编写为“帮助”类中的静态方法是正确的方法。

将该方法添加到现有集合类的基类将不起作用。这将需要修改标准的 Java 类库，没有人会这样做。（这在技术上是可行的，但是您将为您的代码创建一个可移植性的噩梦。如果您在代码中使用商标术语“Java”，则更不用说法律问题了。）

# asp.net-mvc - 类似于 DevExpress ASPxTreeList（Grid 和 TreeView 的混合）但用于 ASP.NET MVC 的组件

> ID：13529232
> 
> 赞同：0
> 
> 时间：2012-11-23T12:32:39.387
> 
> 标签：asp.net-mvc, treeview

我正在寻找一个类似于 DevExpress 的 ASPxTreeList（Grid 和 TreeView 的混合）的组件，但适合在 MVC 4 中使用：

[http://demos.devexpress.com/ASPxTreeListDemos/](http://demos.devexpress.com/ASPxTreeListDemos/)

我的一般要求是：

*   带有一些附加列的树结构，
*   在某些单元格中使用图像的可能性，
*   按每列排序的可能性（可选）。

我正在使用带有模板选项的 TreeView 控件查看 Kendo UI：

[http://demos.kendoui.c​​om/web/treeview/templates.html](http://demos.kendoui.com/web/treeview/templates.html)

问题是，使用基于 ul/li 元素的树可能无法完全模拟表格布局。也许有任何 jQuery 解决方案可以解决这个问题？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:12:09.760

[DevExpress MVC TreeList 扩展](http://mvc.devexpress.com/TreeList/DataBinding)在最新版本中可用：[DXperience ASP.NET v2012.2](http://devexpress.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:37:44.983

DevExpress 的 MVC 有一个等价物。该组件几乎提供了 webform 的所有功能。

查看[MVC 的演示页面](http://mvc.devexpress.com/TreeView/Features)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:49:18.073

您可以查看[jqGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)及其 TreeGrid 功能（演示位于*“3.5 版中的新功能”*部分）。

您还可以查看以下演示，了解如何在 ASP.NET MVC 中使用它：

*   [ASP.NET MVC 中的 jqGrid - 强类型助手](http://tpeczek.codeplex.com/releases/view/62741)
*   [ASP.NET MVC 3 和 Razor 中的 jqGrid](http://tpeczek.codeplex.com/releases/view/61796)

# excel - Excel VBA，如果没有条目，则为必填字段（单元格）着色并显示消息框

> ID：13529234
> 
> 赞同：0
> 
> 时间：2012-11-23T12:32:39.483
> 
> 标签：excel, vba

我在 Excel 工作表上有一个表格，其中有两个必填单元格，用户通常不填写这些单元格。我有以下代码，如果单元格未完成，则不允许用户保存工作表，将以红色突出显示它们并显示一个消息框：

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

ok As Boolean
Dim xlSht As Worksheet
OK = False

Set xlSht = ThisWorkbook.Worksheets("Changes Form")

'Cell 1
If xlSht.Range("B13") = "" Then
    xlSht.Range("B13").Interior.Color = RGB(255, 0, 0)
    ok = True
Else
    xlSht.Range("B13").Interior.ColorIndex = xlNone
    ok = False

If xlSht.Range("E13") = "" Then
    xlSht.Range("E13").Interior.Color = RGB(255, 0, 0)
    ok = True
Else
    xlSht.Range("E13").Interior.ColorIndex = xlNone
    ok = False

End If

End If

If OK = True Then
MsgBox "Please review the highlighted cells and ensure the fields are populated."
Cancel = True
End If

End Sub 
```

但是，如果两个单元格中都没有条目，则代码可以工作，那么它只会为单元格 B13 着色。我认为一旦代码的“ok = True”位为 B13 运行，它会跳过其余代码到最后。我不确定如何修改它以便突出显示两个单元格。

我考虑过通过数据验证来提醒用户，但是我在两个单元格中都有一个列表框，所以我不确定这种方式是否仍然可行。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:12:20.043

用下面的代码替换你的代码。如果第一个值为空，那么您缺少第二个的逻辑。此外，如果有值，则无需设置为 false。我改变的最后一件事是你对 cellsNotPopulated 的“ok”布尔值，所以它更具可读性。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

Dim xlSht As Worksheet
Dim cellsNotPopulated As Boolean
cellsNotPopulated = False

Set xlSht = ThisWorkbook.Worksheets("Changes Form")

    With xlSht

        If .Range("B13") = "" Then
            .Range("B13").Interior.Color = RGB(255, 0, 0)
            cellsNotPopulated = True
        Else
            .Range("B13").Interior.ColorIndex = xlNone
        End If

        If .Range("E13") = "" Then
            .Range("E13").Interior.Color = RGB(255, 0, 0)
            cellsNotPopulated = True
        Else
            .Range("E13").Interior.ColorIndex = xlNone
        End If

    End With

    If cellsNotPopulated = True Then
        MsgBox "Please review the highlighted cells and ensure the fields are populated."
        Cancel = True
    End If

End Sub 
```

# matlab - 在 Matlab 中手动选择 ROI

> ID：13529236
> 
> 赞同：2
> 
> 时间：2012-11-23T12:32:42.970
> 
> 标签：matlab

我正在尝试选择一个用户定义的区域并用 1 填充，最好用鼠标输入。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:41:24.707

命令

```
roipoly 
```

完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:52:04.553

您需要按照 Georg 的建议使用*图像处理工具箱。*`roipoly`

如果你没有，你可以尝试使用创建一个橡皮筋盒

```
rbbox 
```

帮助中有一个很好的例子。根据您显示数据的方式，您可能需要调整单位。记得单击并按住，拖动和释放..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:43:24.577

> h=impoly;

此代码可帮助您选择图像的闭合多边形。

# php - 来自数据库的相同结果

> ID：13529237
> 
> 赞同：0
> 
> 时间：2012-11-23T12:32:45.817
> 
> 标签：php

我需要在成员资料中添加“最后一个成员主题”，以便它显示成员写的最后 5 个主题。

我使用了这段代码：

```
$last_topic = mysql_query("SELECT * FROM " .prefix. "TOPICS WHERE T_AUTHOR = '".$ProMemberID."' ORDER BY T_DATE DESC LIMIT 5") or die (mysql_error());
 $result = mysql_num_rows($last_topic);
if ($result > 0){
$rslast = mysql_fetch_array($last_topic);
$topic_id = $rslast['TOPIC_ID'];
$topic_subject = $rslast['T_SUBJECT'];
$topic_mes = $rslast['T_MESSAGE'];
$t_ret = $rslast['T_ENUM'];
$i=0;
   while ($i < $result){

echo '<tr>
  <td colSpan="2" align="center" class="userdetails_data" width="100%">
  <table border="0" width="100%">
   <tr>
   <td>

  <font style="font-size: 9pt" face="Arial"><a href="index.php?mode=t&t='.$topic_id.'">
  '.$topic_subject.'</a> 
    </td>
    <td  class="editedby" width="130">
    <font face="Arial" style="font-size: 9pt"> Edited 
    : 
    '.$t_ret.'</font></td>
   </tr>
  </table>
  </td>
 </tr> 
 ';  

    ++$i;

  }

}else {
echo '<tr><td colSpan="2" align="center" class="userdetails_data" width="100%">
  <span lang="ar-eg">
  <font color="#FF0000" style="font-size: 9pt" face="Arial">This member has no topics yet! </font></span></td></tr>';
} 
```

它有效，但在 5 行中显示相同的主题？？！！

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:41:22.090

这是因为您正在分配 $rslast 一次，然后在循环中使用此变量，

试试这个

```
 $last_topic = mysql_query("SELECT * FROM " .prefix. "TOPICS WHERE T_AUTHOR = '".$ProMemberID."' ORDER BY T_DATE DESC LIMIT 5") or die (mysql_error());
            $result = mysql_num_rows($last_topic);
            if ($result > 0){
                while($rslast = mysql_fetch_array($last_topic)) {

            $topic_id = $rslast['TOPIC_ID'];
            $topic_subject = $rslast['T_SUBJECT'];
            $topic_mes = $rslast['T_MESSAGE'];
            $t_ret = $rslast['T_ENUM'];
            echo '<tr>
              <td colSpan="2" align="center" class="userdetails_data" width="100%">
              <table border="0" width="100%">
               <tr>
               <td>

              <font style="font-size: 9pt" face="Arial"><a href="index.php?mode=t&t='.$topic_id.'">
              '.$topic_subject.'</a> 
                </td>
                <td  class="editedby" width="130">
                <font face="Arial" style="font-size: 9pt"> Edited 
                : 
                '.$t_ret.'</font></td>
               </tr>
              </table>
              </td>
             </tr> 
             ';  

            }

            }else {
            echo '<tr><td colSpan="2" align="center" class="userdetails_data" width="100%">
              <span lang="ar-eg">
              <font color="#FF0000" style="font-size: 9pt" face="Arial">This member has no topics yet! </font></span></td></tr>';
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:39:58.677

您将获得相同的值，因为您的`$result`var 具有来自查询的总行数，在这种情况下为 5，而您将值保存到 variable `$rslast`，而不是使用 while 循环，以便您可以循环数组值。

```
$last_topic = mysql_query("SELECT * FROM " .prefix. "TOPICS WHERE T_AUTHOR = '".$ProMemberID."' ORDER BY T_DATE DESC LIMIT 5") or die (mysql_error());
$result = mysql_num_rows($last_topic);

if ($result > 0){
   while($rslast = mysql_fetch_array($last_topic,MYSQL_ASSOC)) {
   //^-----while Loop added to loop through arrays, ^----associative array
     $topic_id = $rslast['TOPIC_ID'];
     $topic_subject = $rslast['T_SUBJECT'];
     $topic_mes = $rslast['T_MESSAGE'];
     $t_ret = $rslast['T_ENUM'];

     echo '<tr>
     <td colSpan="2" align="center" class="userdetails_data" width="100%">
       <table border="0" width="100%">
       <tr>
       <td>

       <font style="font-size: 9pt" face="Arial"><a href="index.php?mode=t&t='.$topic_id.'">
  '.$topic_subject.'</a> 
       </td>
       <td  class="editedby" width="130">
       <font face="Arial" style="font-size: 9pt"> Edited :'.$t_ret.'</font></td>
       </tr>
      </table>
     </td>
   </tr>';        
 }}else {

echo '<tr><td colSpan="2" align="center" class="userdetails_data" width="100%">
  <span lang="ar-eg">
  <font color="#FF0000" style="font-size: 9pt" face="Arial">This member has no topics yet! </font></span></td></tr>';
} 
```

# asp.net - 从第一个屏幕上传文件时，如何继续使用 Web 应用程序？

> ID：13529238
> 
> 赞同：0
> 
> 时间：2012-11-23T12:32:48.240
> 
> 标签：asp.net, html, asp.net-mvc-3, file-upload

我有一个项目需要上传一个大文件，而该文件正在上传，是否可以通过一系列其他屏幕继续获取用户的输入，然后一旦他们到达最终屏幕，文件就会被上传。

任何人都有这样的技巧吗？据我所知，文件上传发生在表单发布/获取中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:38:14.497

您可以使用 iframe 来执行此操作，它简单地链接到带有表单以发布文件的页面，一旦用户选择了文件并单击上传/提交，您就可以隐藏 iframe 并进入我们的区域......但事情会在您需要处理错误的地方变得棘手，即：不正确的文件格式、零字节文件等......也许您可以下载文件并在您的进程/向导输入结束时显示任何错误。

# java - 使用日期和日历

> ID：13529244
> 
> 赞同：0
> 
> 时间：2012-11-23T12:33:06.213
> 
> 标签：java, date, calendar

我有一个日期选择器，用户可以在其中选择一个日期，然后选择一个复选框，说明他想要从中获取日期的时间类型。例如：

用户选择 11 月的 1\. 并选中“月份”复选框，在这种情况下，结束日期将增加 1，即使这听起来很简单，但它慢慢开始让我很恼火！

问题是Java没有一个很好的日期对象来处理这种事情，所以我认为我会使用日历，但增加日历日期并不容易，例如以下示例：

```
endDate.set(startDate.YEAR, startDate.MONTH+1, startDate.DATE); 
```

从理论上讲，这将使月份比开始日期大一。这适用于从 12 月开始的大约 90% 的月份，如果您在 12 月将月份增加 1，那么整数月份返回 13 会发生同样的事情，`startDate.DATE;`并且`startDate.Year;`

我的问题是没有更简单的方法可以做到这一点吗？我可以写很多 If 句子，但我真的认为这有点多余。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:35:56.800

的使用`add`方法`java.util.Calendar`。

```
endDate.set(startDate.YEAR, startDate.MONTH, startDate.DATE);
if(some_condition) {
   endDate.add(Calendar.MONTH, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:34:24.763

这里的标准建议是查看[Joda-Time](http://joda-time.sourceforge.net/)（有关更多信息，请参见[此处](http://www.ibm.com/developerworks/java/library/j-jodatime/index.html)）。这是一个更加一致/功能更强大的 API，没有困扰标准 Java 日期/格式 API 的线程问题，因此被广泛使用和接受。

就你想要的上面而言，我建议如下：

```
LocalDate d = ...
LocalDate nd = d.plusMonths(1); 
```

以上将正确处理月/年翻转。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:35:44.943

您可以使用`Calendar.add()`将值添加到日历值，例如，`Calendar.add(Calendar.MONTH, 1)`这会增加一个月，并考虑到 1 月在 12 月之后。

# c# - 使用 AutoMapper 映射后，上下文未更新加载的实体

> ID：13529253
> 
> 赞同：6
> 
> 时间：2012-11-23T12:33:42.980
> 
> 标签：c#, entity-framework, ef-code-first, automapper

在我的代码中，我正在**加载**一个`entity`using its `id`，然后使用它**更新**它的内容`AutoMapper`，最后调用`Context.SaveChanges`. 但**它不**工作！. 但是当我**手动****设置**属性时它会**生效**！怎么了 ？

 ****```
var entity = Context.MyEntities.Find(id);

entity = Mapper.Map<MyEntity>(viewModel);

Context.SaveChanges; 
```

但这一个有效：

```
var entity = Context.MyEntities.Find(id);

entity.SomeProp = viewModel.SomeProp;

Context.SaveChanges; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T12:37:08.883

> 然后使用 AutoMapper 更新其内容

这不是真的 -`Mapper.Map<MyEntity>(viewModel)`返回类的新实例`MyEntity`。它不会更新现有实例的属性。您应该将该新实例附加到上下文：

```
var entity = Context.MyEntities.Find(id); // this line is useless
entity = Mapper.Map<MyEntity>(viewModel);
Context.MyEntities.Attach(entity);
Context.SaveChanges; 
```

当您创建新实体时，从上下文中检索实体也没有意义。您正在重用相同的变量来保存对不同对象的引用，这令人困惑。真正发生的事情可以这样描述：

```
var entityFromDb = Context.MyEntities.Find(id);
var competelyNewEntity = Mapper.Map<MyEntity>(viewModel);
Context.MyEntities.Attach(competelyNewEntity);
Context.SaveChanges; 
```

在您的第二个选项中，您正在更新存在于上下文中的实体的属性，您不需要附加它。

***顺便说一句***，有第三个选项（也是最好的） - 使用另一种映射方法，它会更新目标实体：

```
var entity = Context.MyEntities.Find(id);
Mapper.Map(viewModel, entity); // use this method for mapping
Context.SaveChanges; 
```****

# android - listview isEnabled() 调用了两次

> ID：13529256
> 
> 赞同：1
> 
> 时间：2012-11-23T12:33:47.860
> 
> 标签：android, android-adapter

我有一个自定义方法`adapter`，我在其中覆盖该`isEnabled()`方法。

我注意到，当调用该方法时，它会被调用，向下触摸，然后向上触摸。如果您想执行某些操作，这有点烦人。

假设您展示了 Toast 效果。效果会闪烁两次。

例子：

```
@Override
public boolean isEnabled(int position) {

    Toast.makeText(mContext, "Hello", Toast.LENGTH_SHORT).show(); // this will flash up twice
    return true;
} 
```

有没有办法禁用该`isEnabled()`方法的触地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:37:13.417

在适配器中使用通用变量，

```
Boolean isFirstTime=true;

@Override
public boolean isEnabled(int position) {

    if(isFirstTime){

        Toast.makeText(mContext, "Hello", Toast.LENGTH_SHORT).show(); // this will flash up twice
        isFirstTime = false;
    }

    return true;
} 
```

# html - 隐藏在内容 div 后面的页脚 div

> ID：13529258
> 
> 赞同：0
> 
> 时间：2012-11-23T12:34:05.143
> 
> 标签：html, css, internet-explorer, internet-explorer-8, web-deployment

我有以下网页可在 IE7 中使用，但在 IE8 中无法使用；

**的HTML：**

```
<div class="content">

    <div class="inner_content">
        <div class="column">
            <div class="widget">
                1
            </div>
        </div>
        <div class="column">
            <div class="widget">
                4
            </div>
        </div>
        <div class="column">
            <div class="widget">
                7
            </div>
        </div>
    </div>

</div>

<div class="footer">
    <div class="inner_footer">
        footer
    </div>
</div> 
```

**CSS：**

```
.inner_content, .inner_footer
{
    width:983px;
    margin:auto;
    padding:10px;
}

.content
{
    background:#FFFFFF;
}

.footer
{
    background:#BBBBBB;
} 
```

**问题：**

出于某种原因，页脚 div 在 IE8 中位于内容 div 下方，但在 IE7 中却没有。如何让它在 IE8 中看起来与在 IE7 中看起来一样？IE7 的外观是我想要的外观。

**jsFiddle：**

[http://jsfiddle.net/GgpaP/](http://jsfiddle.net/GgpaP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:39:25.430

你需要在`.column`里面包含浮动的 s `.inner_content`。

一种方法是添加`overflow: hidden`：http: [//jsfiddle.net/thirtydot/GgpaP/3/](http://jsfiddle.net/thirtydot/GgpaP/3/)

这也将使它在现代浏览器中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:40:05.193

添加`clear:both`到页脚...

**[演示](http://jsfiddle.net/GgpaP/2/)**

还对容器进行了轻微修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:42:35.467

添加`display:inline-block`到您的内容类（在 css 中）。

# caching - Android Webview - 无法禁用缓存

> ID：13529259
> 
> 赞同：4
> 
> 时间：2012-11-23T12:34:06.470
> 
> 标签：caching, socket.io, android-webview

我在我的应用程序中使用 webview，它正在加载远程网页，然后`socket.io`通过 xhr-pooling 使用（node.js）。

问题是我无法通过`socket.io`. 例如，我的节点服务器每 10 秒执行一次`io.emit`，我的 webview 接收它并将其保存在：

> /data/data/...../webviewCache

我不希望我的 webview 保存任何东西，因为随着时间的推移，这些文件的数量正在增加，它们并没有帮助我的应用程序运行得更快......

我试过了：

```
browser.getSettings().setCacheMode(2);   //(2 is LOAD_NO_CACHE)
browser.getSettings().setAppCacheEnabled(false); 
```

但这些都不起作用。我的 webview 仍在将文件保存到缓存文件夹中。

此时，我设置了每 60 秒清空缓存文件夹的计时器，但这不是我想在生产中发布的解决方案......

我在这里遗漏了什么还是在android中禁用缓存存在错误？

**更新1：**经过一整天的调试，我发现了一些有趣的东西。Logcat 展示了两个有趣的东西：**saveCacheFile**和**getCacheFile**

然后我决定再次尝试关闭缓存...

```
browser.getSettings().setCacheMode(android.webkit.WebSettings.LOAD_NO_CACHE); 
```

这实际上导致 WebView 不再从缓存中加载文件，但它仍在保存它们。日志猫说这样的话：

```
saveCacheFile for url .../socket.io/1/xhr-polling/BLNN28E7S4PZJsy2pWaF?t=13537 
```

所以我相信实际的问题是，如何防止 webview在每个请求上**保存**缓存文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T12:59:43.880

在 URL 的查询部分添加随机字符串怎么样？这个技巧在某些情况下有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-05T20:11:39.300

我找到的唯一解决方案是在 HTTP 响应标头中发送“Cache-Control: no-store”。

# java - JAVA：如何创建蛇形矩阵

> ID：13529262
> 
> 赞同：0
> 
> 时间：2012-11-23T12:34:12.477
> 
> 标签：java, arrays, matrix

您好我正在尝试使用二维数组在控制台上创建一个矩阵。这个想法是输出应该看起来像这样：

```
1|8|9 |16
2|7|10|15
3|6|11|14
4|5|12|13 
```

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:45:10.300

**您可以从矩阵中猜到**几件事：-****

 ***   首先，在移动到下一列之前，您必须先遍历一列的所有行

*   其次，您需要在每次迭代中交替`downwards`和`upwards`方向

*   因此，您需要**两个嵌套的 for 循环**，用于遍历特定列的行。一个会离开`row 0 to max - 1`，下一个会离开`row = max - 1 to 0`。

*   现在，要交替迭代方向，您可以使用布尔变量，并在每次内部循环迭代完成后切换它。

*   每个循环都需要包含在一个`if-else`. 它们都将在一定条件下被执行。如果`boolean downwards = false;`，则将执行向上移动的循环，反之亦然。

*   在每次迭代中，用整数计数器填充当前单元格，您必须使用 初始化`1`，并在每次填充后递增它。

* * *

**伪代码： -**

```
 // Initialize variables row, col, and count = 1

    boolean goDown = true;

    int[][] matrix = new int[row][col];  // declare matrix

    for i = 0 to col:
        if (goDown)
            for j = 0 to row:  // Move in downwards direction
                assign count++ to matrix[j][i] 
                // assign to `[j][i]` because, we have to assign to rows first

            goDown = false;    // Toggle goDown

        else
            for j = row - 1 to 0:  // Move in upwards direction
                assign count++ to matrix[j][i] 

            goDown = true;  // toggle goDown

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:44:36.653

只是一些伪代码，希望它对您有所帮助并为您提供一些开始。

```
boolean goUp = false;
boolean goDown = true;
size = 4;
matrix[size][size];
k = 0; 
l =0;

loop i->0 i < size*size i++
  matrix[l][k] = i;

  if(l==size and goDown)
    goDown = false;
    goUp = true;
    k++;
  else if(l==0 and goUp)
    goDown = true;
    goUp = false;
    k++;
  else
    l = l+ (1*goDown?1:-1);
end loop; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:04:21.363

最后在您的帮助下，在仔细研究了多维数组的工作原理之后，我解决了现在对我来说看起来很简单的问题。

```
int a = 4;
    int b = 4;
    int c = 1;
    boolean direction = true;
    int[][] arrey = new int[a][b];
    for (int y = 0; y <= b - 1; y++) {
        if (direction) {
            for (int x = 0; x <= a - 1; x++) {
                arrey[x][y] = c;
                c++;
            }
            direction = false;
        } else {
            for (int x = a - 1; x >= 0; x--) {
                arrey[x][y] = c;
                c++;
            }
            direction = true;
        }
    }

    for (int x = 0; x <= a - 1; x++) {
        for (int y = 0; y <= b - 1; y++) {
            System.out.print("["+arrey[x][y]+"]");
        }
        System.out.println("");
    } 
```**

# ruby-on-rails-3 - ThinkingSphinx 错误：这样的过滤器属性

> ID：13529272
> 
> 赞同：2
> 
> 时间：2012-11-23T12:34:45.940
> 
> 标签：ruby-on-rails-3, search, thinking-sphinx

我正在尝试使用[doc将](http://pat.github.com/ts/en/)**ThinkingSphinx**集成到我的项目中。对于具有**属性的****模型**，我将索引创建为：`User` ****`first_name``last_name`****

 ****用户.rb

```
define_index do
  indexes :first_name
  indexes :last_name
end 
```

然后我运行命令：

```
rake ts:index
rake ts:start 
```

这开始了我的搜索。当我使用以下命令进行搜索时，我得到了结果：

```
User.search('swati') 
```

但是当我跑步时

```
User.search :with => {:first_name => "swati"} 
```

它给了我错误：

```
Sphinx  Sphinx Daemon returned error: index user_core: no such filter attribute 'first_name'
Sphinx  Caught Sphinx exception: index user_core: no such filter attribute 'first_name' (0 tries left)
ThinkingSphinx::SphinxError: index user_core: no such filter attribute 'first_name'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/thinking-sphinx-2.0.13/lib/thinking_sphinx/search.rb:438:in `block in populate'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/thinking-sphinx-2.0.13/lib/thinking_sphinx/search.rb:606:in `call'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/thinking-sphinx-2.0.13/lib/thinking_sphinx/search.rb:606:in `retry_on_stale_index'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/thinking-sphinx-2.0.13/lib/thinking_sphinx/search.rb:426:in `populate'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/thinking-sphinx-2.0.13/lib/thinking_sphinx/search.rb:187:in `method_missing'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
from /home/swati/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我在 stackoverflow 上搜索了一个可能的解决方案，它被要求运行命令`rake ts:index`和`rake ts:rebuild`. 我已经运行了这个命令，但它没有帮助我。

请帮我找出解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:14:29.867

您应该在索引中使用**has**创建一个属性， **rebuild**，然后使用**with**

```
has :first_name 
```

**已**创建属性，并**用作**过滤器（用于属性）[http://pat.github.com/ts/en/searching.html#filters](http://pat.github.com/ts/en/searching.html#filters)

还要检查[http://pat.github.com/ts/en/indexing.html#attributes](http://pat.github.com/ts/en/indexing.html#attributes)的过滤器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-18T08:17:13.350

小心点，`rake ts:reindex`与众不同`rake ts:rebuild`。

如果添加新索引，则需要重建。

如果您像我一样偏执，请尝试一切：

```
rake ts:rebuild
rake ts:reindex
rake ts:restart 
```

如果它仍然不起作用，请确保您的索引[定义正确](http://pat.github.io/thinking-sphinx/indexing.html)。****

# windows-phone-7 - WP7 如何知道弹出窗口何时出现？

> ID：13529274
> 
> 赞同：0
> 
> 时间：2012-11-23T12:34:49.267
> 
> 标签：windows-phone-7, popup, show, detect

我正在使用弹出窗口来显示我的用户控件。我想检测弹出窗口何时真正显示在屏幕上，然后显示进度条，做一些工作，然后隐藏进度条

```
MyDialog dialog = new MyDialog();
myPopup.Child = dialog;
myPopup.IsOpen = true;

dialog.progressLoading.Visibility = Visibility.Visible;
Thread.Sleep(3000)
dialog.progressLoading.Visibility = Visibility.Collapsed; 
```

但是，我意识到这`IsOpen = true`不会立即显示弹出窗口。事实是我必须等待 3 秒钟才能显示出来。

如何知道弹出窗口何时出现？

# spring - 没有风景的春天

> ID：13529276
> 
> 赞同：1
> 
> 时间：2012-11-23T12:35:02.533
> 
> 标签：spring

我是春天的新手，所以不确定我打算做的事情是否可行。

我需要创建一个异步 web 服务和一个工作服务器（代理），两者都使用 spring 的模型和控制器方面。

Web 服务需要通过 JMS 将其客户端的请求发送到代理，然后立即将响应发送回客户端，指示请求已排队。

代理旨在保持活动状态，处理来自多个 Web 服务实例的消息并通过输出 JMS 队列发回结果。代理需要保持活跃的原因是因为处理每个 Web 服务消息的工作涉及调用其他 Web 服务，其中一些可能是异步的，并且可能需要大量时间来处理。

此外，我不想生成代理的多个实例，因为它旨在处理多个并发消息。

是否可以在同一个 spring 项目中创建 web 服务和代理，两者都在 web 容器（如 tomcat）中运行，或者我是否需要在单独的项目中对它们进行编码，也许代理作为传统的独立服务器而不是 web容器小服务程序？

如果是这样，有人可以指出我在 spring/tomcat 中创建一个存活代理的正确方向。

我了解 web 服务和 JMS 方面的东西，所以不需要任何帮助。

# xml - 表格组件显示 XML 数据源的空白报告

> ID：13529281
> 
> 赞同：7
> 
> 时间：2012-11-23T12:35:19.743
> 
> 标签：xml, jasper-reports

我在使用**XML 作为数据源**的报告摘要面板中创建表格组件时遇到问题，最终报告仅显示一个**空白行**。

下面是我的名为**ProjectXML.xml的 xml 数据源**

```
<testsuites>
    <testsuite name="testsuite1"/>
    <testsuite name="testsuite2"/>
    <testsuite name="testsuite3"/>
</testsuites> 
```

下面是我的*.jrxml*文件，名为**report12.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report12" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="bb749013-793e-4a97-a43a-08d89a11ce20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#3300CC"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#3300CC"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#3300CC"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#3300CC"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <subDataset name="tableDataSet" uuid="44f57638-9650-43f7-9a45-b12c6144c112">
        <queryString language="xPath">
            <![CDATA[/testsuites/testsuite]]>
        </queryString>
        <field name="name" class="java.lang.String">
            <fieldDescription><![CDATA[@name]]></fieldDescription>
        </field>
    </subDataset>
    <queryString language="xPath">
        <![CDATA[/testsuites/testsuite]]>
    </queryString>
    <field name="name" class="java.lang.String">
        <fieldDescription><![CDATA[@name]]></fieldDescription>
    </field>
    <summary>
        <band height="238" splitType="Stretch">
            <componentElement>
                <reportElement uuid="59f049a5-d77e-480c-a1ee-46987630290d" key="table" style="table" x="0" y="0" width="555" height="238"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="tableDataSet" uuid="6d3ecced-ba97-49c1-aec9-7f5903748fa5">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column uuid="ed4b1e17-dcec-4ed6-9f1f-efb543f240b7" width="90">
                        <jr:columnHeader style="table_CH" height="30">
                            <staticText>
                                <reportElement uuid="e2772a76-f9da-4438-8aa3-78cee739bdaf" x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20">
                            <textField>
                                <reportElement uuid="d496fc00-bab8-4b85-bb8d-c75c1cfc3dc4" x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </summary>
</jasperReport> 
```

下面是**report12.jrxml的空白预览截图**

![report12 预览](../Images/34fdf25ac193c50445bc908599a662b7.png)

高级感谢您为此提供的任何帮助，以获取带有**TestSuite**名称的完整表格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T10:49:41.647

我找到了一个“hack”并且不是很好的方法，但它正在工作。

您可以添加主（报告的）数据集并在*表格*组件中使用它。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport .. whenNoDataType="AllSectionsNoDetail" ..>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="tbDS">
        <queryString language="xPath">
            <![CDATA[/testsuites/testsuite]]>
        </queryString>
        <field name="name" class="java.lang.String">
            <fieldDescription><![CDATA[@name]]></fieldDescription>
        </field>
    </subDataset>
    <queryString language="xPath">
        <![CDATA[/testsuites/testsuite]]>
    </queryString>
    <field name="name" class="java.lang.String">
        <fieldDescription><![CDATA[@name]]></fieldDescription>
    </field>
    <summary>
        <band height="98" splitType="Stretch">
            <componentElement>
                <reportElement key="table" style="table" x="76" y="33" width="360" height="50"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="tbDS">
                        <dataSourceExpression><![CDATA[((net.sf.jasperreports.engine.data.JRXmlDataSource)$P{REPORT_DATA_SOURCE}).dataSource("/testsuites/testsuite")]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column width="90">
                        <jr:columnHeader style="table_CH" height="30">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </summary>
</jasperReport> 
```

在这个示例中，我使用`((net.sf.jasperreports.engine.data.JRXmlDataSource)$P{REPORT_DATA_SOURCE}).dataSource("/testsuites/testsuite")`表达式来设置 Table 的数据源。

结果将是：

![通过 iReport 预览生成的报告](../Images/0ad2336909e71f57c69628ea382f8c3b.png)

* * *

获得所需设计的另一种方法是使用*Detail*带（不使用*Table*组件）。

* * *

我认为您描述的情况检测到*JasperReports*引擎的错误。

我在[http://community.jaspersoft.com](http://community.jaspersoft.com)站点找到了类似的帖子：[Table component and XML datasource](http://community.jaspersoft.com/questions/540959/table-component-and-xml-datasource) and [using table elements with xml datasource](http://community.jaspersoft.com/questions/534913/using-table-elements-xml-datasource)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T02:28:43.750

我在 IReport 上找到了一个解决方案，选择 Edit table Datasource，在 Connection / Datasource Expression 的下拉列表中选择

使用数据源表达式

```
new net.sf.jasperreports.engine.JREmptyDataSource(1) 
```

它适用于 Java 应用程序

# javascript - 如何将 perl 哈希转换为 javascript 哈希

> ID：13529284
> 
> 赞同：5
> 
> 时间：2012-11-23T12:35:24.047
> 
> 标签：javascript, perl, template-toolkit

我正在使用[模板工具包](http://www.template-toolkit.org)框架。我的 tt 文件中有一个 perl 哈希数据类型。我想将此哈希数据类型转换为 javascript 哈希数据类型。

代码： 模板：

```
 [% PERL %]
        use JSON qw(encode_json);

        my $vars = {

            'version'  => 3.14,
            'days'     => [ qw( mon tue wed thu fri sat sun ) ],
            'cgi'      => CGI->new(),
            'me'       => {
                'id'     => 'abw',
                'name'   => 'Andy Wardley',
            },
        };

        my $json = encode_json($vars->{'me'});
    [% END %]

 <script>
   function callme(){
   var me = [% $json %]
  }
</script> 
```

现在我希望在 javascript 中可以访问 me 哈希

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:00:36.607

有几个 TT 插件可以做到这一点，其中任何一个都是比将原始 perl 嵌入到模板中更好的解决方案。就个人而言，我更喜欢[JSON::Escape](https://metacpan.org/module/Template%3a%3aPlugin%3a%3aJSON%3a%3aEscape)，但还有其他一些。在每天或多或少地编写 TT 的 5 年多的时间里，我从未不得不求助于使用该`[% PERL %]`指令。我想我不是在写 CGI。YMMV。

```
[%- USE JSON.Escape( pretty => 1 );
    SET me = { id => 'abw', name => 'Andy Wardley' };
...
-%]

<script>
    function callme() {
    var me = [% me.json %]
    ...
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:47:39.113

尝试使用来自 CPAN 的[JSON 。](https://metacpan.org/module/JSON)它是[JavaScript 简单对象表示法](http://www.json.org/)，您可以直接在 JavaScript 中使用它。

```
use JSON qw(encode_json);

my $vars = {

    'version'  => 3.14,
    'days'     => [ qw( mon tue wed thu fri sat sun ) ],
    'cgi'      => CGI->new(),
    'me'       => {
        'id'     => 'abw',
        'name'   => 'Andy Wardley',
    },
};
print encode_json($vars->{'me'}); 
```

输出：

```
{"name":"Andy Wardley","id":"abw} 
```

# c++ - 如何在 Matrix Class 中释放内存？

> ID：13529289
> 
> 赞同：0
> 
> 时间：2012-11-23T12:35:38.353
> 
> 标签：c++, matrix

我有一个矩阵类，并且具有以下构造函数：

```
template<class T>
Matrix<T>::Matrix(unsigned rows, unsigned cols) :
        rows(rows), cols(cols) {
    index = 0;
    data_ = new T[rows * cols];
}

template<class T>
Matrix<T>::~Matrix() {
    delete[] data_;
} 
```

当我计算矩阵的逆时，我想释放名为的临时变量的内存`a`：

```
template<class T>
Matrix<T> Matrix<T>::inverse() {
    unsigned i, j, k;
    Matrix<T> a(2 * rows, 2 * rows);        
    ....
    return tmp;
} 
```

我以为这个变量会在函数结束时被销毁，但是当我测试时：

```
for (int i = 0; i < 3; i++) {   
        Matrix<double> m(5, 5);
        m << 5, 2, 4, 5, 6, 1, 3, 1, 2, 5, 2, 5, 2, 7, 2, 9, 2, 1, 0.1, 0.43, 1, 0, 0, 0, 1;
        m.inverse();
        std::cout << m << std::endl;
    } 
```

在第一个循环中`a`用零初始化，但下一步 的初始值`a`是之前的值，所以`a(k+1)=a_endvalues(k)`. 为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:39:51.703

内存确实被释放了。然后在循环的下一次迭代中再次分配。并不是说您的`Matrix`构造函数没有将数组初始化为任何内容，因此它只包含碰巧存储在现在属于它的内存中的内容。

在您的特定情况下，分配器可能会将第二次迭代`a.data_`放置在第一次迭代所在的相同位置`a.data_`，因此您仍然会看到旧值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:43:22.843

每次调用函数时都会释放并重新分配内存。价值观的重叠只是偶然。新分配可能与旧分配位于同一位置。您可以通过创建另一个参数化构造函数并传递单独的初始化程序来测试它。

您还可以通过编写输出语句来测试是否调用了析构函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:03:07.317

问题是您没有在构造函数中初始化动态分配的数组的元素。要确保数组具有默认构造或零初始化元素，您需要在构造函数中执行此操作：

```
template<class T>
Matrix<T>::Matrix(unsigned rows, unsigned cols) :
        rows(rows), cols(cols) {
    index = 0;
    data_ = new T[rows * cols]();
                //             ^ HERE!
} 
```

但正如评论中指出的那样，您可以通过使用来让您的生活更轻松`std::vector<T>`：

```
template<class T>
Matrix<T>::Matrix(unsigned rows, unsigned cols) :
        rows(rows), cols(cols), data_(rows*cols) 
{ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T12:40:20.247

初始化数组与分配数组是分开的。

在您的析构函数中添加调试输出以验证它是否被调用。

也可以使用 memset 将数组初始化为零：

```
memset(a, 0, rows * cols * sizeof(T)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T12:42:50.843

局部变量“a”被销毁，析构函数释放内存。但是，当再次分配内存时，内存位置有以前的内容只是偶然的。

# javascript - “如果货币字段中存在值，则需要货币” - 设置默认货币

> ID：13529290
> 
> 赞同：0
> 
> 时间：2012-11-23T12:35:42.547
> 
> 标签：javascript, dynamics-crm-2011

我的一个托管解决方案存在严重问题，我有一个自定义工作流程，它创建了一堆自定义实体，这些自定义实体上有几个货币字段。

以下是我运行工作流程时发生的情况：

1.  自定义工作流进入“等待”状态并引发空引用异常。
2.  已经创建了几个实体，但其中一个在货币字段中具有空值（它们默认 onLoad 为 0.00 英镑）。
3.  当我打开这条记录时，我收到了这篇文章中提到的错误消息。

你应该知道的几件事：

1.  默认货币在系统中设置（英镑）。
2.  正如网络上其他地方所建议的那样，我试图在我的表单的 OnLoad() 事件中遵循 JavaScript：

* * *

```
var lookupData = new Array(); 
var lookupItem= new Object(); 
lookupItem.id = "{7bCA916E76-FA28-E211-8C7C-0800273EE9D1}"; 
lookupItem.entityType = "transactioncurrency"; 
lookupItem.name = "Pound Sterling";     
lookupData[0] = lookupItem; 
Xrm.Page.getAttribute("transactioncurrencyid").setValue(lookupData); 
```

* * *

如果此 JS 在表单上并且我尝试创建新记录，则会收到错误消息：

> 错误：“Xrm.Page.getAttribute(..)”为空或不是对象

谁能建议我在这里必须做什么？

此错误仅发生在实时系统上，不会发生在开发环境中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:40:16.330

这是因为您尝试设置的货币 ID 在实时环境中与在开发环境中不同。

您需要从 Live 环境中获取“英镑”货币的 ID 并将其放在“插入此处”的位置：

```
lookupItem.id = "--insert here--"; 
lookupItem.entityType = "transactioncurrency"; 
lookupItem.name = "Pound Sterling"; 
```

然后它将起作用。

# c++ - 冗余静态数据

> ID：13529299
> 
> 赞同：6
> 
> 时间：2012-11-23T12:36:15.277
> 
> 标签：c++, xml, vector, static

这个问题适用于任何类型的静态数据。我只是`int`用来保持示例简单。

我正在读取一个包含整数的大型 XML 数据文件并将它们存储在`vector<int>`. 对于我正在使用的特定数据，相同的值连续重复多次是很常见的。

```
<Node value="4" count="4000"> 
```

该`count`属性意味着该值将被重复 x 次：

```
for(int i = 0; i < 4000; i++)
    vec.push_back(4); 
```

当我已经知道它将连续出现 4000 次时，重复存储相同的值似乎是浪费内存。但是，我需要能够在任何时候对向量进行索引。

对于较大的数据对象，我知道我可以只存储一个指针，但在上面的示例中仍然需要存储 4000 个相同的指针。

是否有任何类型的策略来处理这样的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T12:46:03.627

使用两个向量。第一个向量包含索引，第二个向量包含实际值。

填写索引向量，使索引[i-1] 和索引[i] 之间的所有索引的值都在值[i] 中。

然后在索引数组上使用二进制搜索来定位值数组中的位置。二进制搜索非常有效 (O(log n))，与原始方法相比，您只会使用一小部分内存。

如果您假设以下数据：

```
4000 ints with value "4"
followed by 200 ints with value "3"
followed by 5000 ints with value "10" 
```

您将创建一个索引向量和值向量并像这样填充它：

```
indices = {4000, 4200, 9200}; // indices[i+1] = indices [i] + new_count or 0
values = {4,3,10}; 
```

正如其他答案中所建议的那样，您可能应该将其包装在运算符 [] 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:45:22.990

我建议编写一个特定的类而不是使用`vector`. 您的类应该只保存项目在列表中出现的次数并以智能方式计算索引，以便您可以轻松地根据索引检索元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:45:18.913

尝试使用类似矢量的接口（`operator[]`等等）将您的数据包装到一些对象中，这样您就可以隐藏实现细节（即您实际上并没有存储 4000 个数字）但提供类似的接口。

# c# - 从 base64String 加载 bitmapImage

> ID：13529301
> 
> 赞同：3
> 
> 时间：2012-11-23T12:36:18.023
> 
> 标签：c#, windows-8, microsoft-metro, bitmapimage

如何`bitmapImage`从`base64String`in加载`windows 8`？

我试过这个，但我没有成功。它曾经在windows phone上工作。有什么不同吗？

看起来我必须使用函数 setsourceasync。当我使用它时，我需要将参数作为 IRandomMemory 传递，这是我无法做到的。这该怎么做？

```
 public static BitmapImage Base64ToImage(string base64String)
    {
        var bitmapImage = new BitmapImage();
        try
        {
            if (!String.IsNullOrEmpty(base64String))
            {
                var imageBytes = Convert.FromBase64String(base64String);
                using (var ms = new MemoryStream(imageBytes, 0, imageBytes.Length))
                {
                    bitmapImage.SetSourcec(ms);
                    return bitmapImage;
                }
            }
        }
        catch (Exception e)
        {

        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:03:03.127

**要为SetSource**方法创建**IRandomAccessStream**对象，您需要使用**DataWriter**。看看这段代码：

 ****```
 public async Task<BitmapImage> GetImage(string value)
    {
        if (value == null)
            return null;

        var buffer = System.Convert.FromBase64String(value);
        using (InMemoryRandomAccessStream ms = new InMemoryRandomAccessStream())
        {
            using (DataWriter writer = new DataWriter(ms.GetOutputStreamAt(0)))
            {
                writer.WriteBytes(buffer);
                await writer.StoreAsync();
            }

            var image = new BitmapImage();
            image.SetSource(ms);
            return image;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:46:43.207

这里 System.Drawing.Bitmap 和 System.Windows.Media.BitmapSource 的转换方法。

享受

备注：未在 Win8 上测试，但没有理由不工作。

```
 string ToBase64(Bitmap bitmap)
    {
        if (bitmap == null)
            throw new ArgumentNullException("bitmap");

        using (var stream = new MemoryStream())
        {
            bitmap.Save(stream, ImageFormat.Png);

            return Convert.ToBase64String(stream.ToArray());
        }
    }

    string ToBase64(BitmapSource bitmapSource)
    {
        using (var stream = new MemoryStream())
        {
            var encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
            encoder.Save(stream);
            return Convert.ToBase64String(stream.ToArray());
        }
    }

    Bitmap FromBase64(string value)
    {
        if (value == null)
            throw new ArgumentNullException("value");

        using (var stream = new MemoryStream(Convert.FromBase64String(value)))
        {
            return (Bitmap)Image.FromStream(stream);
        }
    }

    BitmapSource BitmapSourceFromBase64(string value)
    {
        if (value == null)
            throw new ArgumentNullException("value");

        using (var stream = new MemoryStream(Convert.FromBase64String(value)))
        {
            var decoder = new PngBitmapDecoder(stream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
            BitmapSource result = decoder.Frames[0];
            result.Freeze();
            return result;
        }
    } 
```****

# php - 长时间运行的 php/fastcgi 脚本在 IIS 7.5 上挂起

> ID：13529303
> 
> 赞同：1
> 
> 时间：2012-11-23T12:36:18.897
> 
> 标签：php, iis, iis-7.5, fastcgi

我有一个在 IIS 7.5 上运行的 php 应用程序，php 5.4 作为 fastcgi 运行。该应用程序运行良好，但长时间运行的 php 脚本似乎挂起；没有 500 错误，它们似乎永远不会完成并将结果返回给浏览器。

我在下面编写了一个简单的测试脚本，以消除主应用程序中出现编程错误的可能性：

```
<?php
/* test timeout */
/*set_time_limit(110);*/
echo "Testing time out in seconds\n";
for ($i = 0; $i < 175; $i++) {
    echo $i." -- ";

    if(sleep(1)!=0)
    {
        echo "sleep failed script terminating"; 
        break;
    }
}

?> 
```

如果我运行脚本超过 175 秒，它就会挂起。在此之下，它会将结果返回给浏览器。

这是我为 php 和 fastcgi 设置的超时参数。我还尝试将这些设置设置得非常低，以便获得各种超时错误并成功了，这让我得出结论，我缺少另一个设置......也许。

如果我的假设是错误的，请纠正我，但公平地说，如果脚本超时，浏览器会出现错误，好像脚本在完成之前被 IIS 杀死，那么什么都不会返回到浏览器，你会得到什么就浏览器而言，看起来像挂起？

快速cgi

```
activity timeout=800 Idle Timeout = 900 request Timeout 800 
```

php

```
max_execution_time=700 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:32:17.327

如果长时间运行的脚本无法与浏览器通信，则在 180 秒左右后，大多数浏览器将对服务器返回结果无响应。服务器脚本没有挂起或被终止，它是浏览器（即，ff 和 chrome）变得无响应。

为了检查这一点，我运行了我的脚本并查看了请求的状态。IIS 管理器-> 选择服务器-> 选择工作进程（中央窗格）-> 选择应用程序池-> 选择查看请求（右侧窗格）并查看状态和经过时间的列。您将不得不反复单击“显示全部”以查看更新的值。

状态从 ExecuterequestHandler 更改为 Sending response，然后脚本按原样完成，但浏览器看起来仍然在等待服务器响应。

我从上面更新了我的测试脚本，以确保浏览器定期收到响应：

```
<?php 
@ini_set("output_buffering", "Off");
@ini_set('implicit_flush', 1);
@ini_set('zlib.output_compression', 0);
@ini_set('max_execution_time', 800);

header( 'Content-type: text/html; charset=utf-8' );

echo "Testing time out in seconds\n";
for ($i = 0; $i < 600; $i++) {
    echo $i." -- ";

    if(sleep(1)!=0)
    {
        echo "sleep failed script terminating"; 
        break;
    }
    flush();
    ob_flush();
}

?> 
```

输出没有像应有的那样返回到浏览器，问题仍然存在。

下一步，我查看了服务器上的响应缓冲。该设置被设置为一个非常高的数字，这意味着冲洗不起作用。所以我根据@Dario 在[PHP flush 中提供的说明将 ResponseBufferLimit 设置为 0 在 IIS7.5 中停止刷新](https://stackoverflow.com/questions/7178514/php-flush-stopped-flushing-in-iis7-5)

这解决了问题 :) 如果此解决方案对您有所帮助，请访问上述问题，并请给 Dario 另一个 +1 的我，也许还有一个给 OP 的问题和脚本。

谢谢

# artificial-intelligence - AND OR图在人工智能中的实现

> ID：13529304
> 
> 赞同：1
> 
> 时间：2012-11-23T12:36:25.320
> 
> 标签：artificial-intelligence

我如何实现`AND-OR`图形。我可以使用哪种数据结构，哪一种最好？在阅读算法时我阅读了单词`FUTILITY`，那是什么意思？
什么是`AND`弧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:42:40.213

你的问题的答案本身就是问题。您可以使用数据结构 GRAPH & TREE 来实现 AND_OR 图。在任何语言中，您都可以简单地创建树或图表。＆根据算法，您可以为其编写代码。
无用就像阈值。它用于检查特定条件，它可能是距离或任何东西。

# url-rewriting - 将 url 重写为 url:端口号

> ID：13529307
> 
> 赞同：6
> 
> 时间：2012-11-23T12:36:33.150
> 
> 标签：url-rewriting, iis-7.5

如何重写下一个 url 请求：

```
http://mydomain.com/virtualDirectory/default.aspx?param1=2&param2=car 
```

到：

```
http://mydomain.com:8888/virtualDirectory/default.aspx?param1=2&param2=car 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T12:49:25.883

您应该为 IIS 安装[URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)和[ARR（应用程序请求路由）](http://www.iis.net/downloads/microsoft/application-request-routing)模块。以下是两个链接，说明它们如何协同工作以创建反向代理来执行您想要的操作：

*   [具有 URL Rewrite v2 和应用程序请求路由的反向代理](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)
*   [使用 IIS、URL 重写和 ARR 设置反向代理](http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)

# windows-8 - 将我的 Windows Phone 的 GPS 连接为 Windows 位置传感器

> ID：13529313
> 
> 赞同：0
> 
> 时间：2012-11-23T12:36:56.523
> 
> 标签：windows-8, location, windows-phone

大约一年前，我遇到了一款软件，它可以模拟 Windows 位置传感器，以便通过串行连接（通过蓝牙）和 Windows 连接的传统 GPS 设备将坐标识别为有效。从那以后我已经升级到 Windows 8，但它的位置仍然是那个测试的缓存结果。

上周，我一直在考虑一个软件（一个移动应用程序和一个桌面应用程序），它将从一个到另一个解析数据。

我已经构建了移动应用程序，它成功地将 gps 坐标解析到桌面应用程序，现在最后一点（最棘手的一点）是尝试在系统中安装一个 gps 传感器守护程序，它将这些坐标解析到窗口（所以所有我的应用程序将与我当前的位置完美同步）。我在谷歌上看过，但找不到很多帮助指针。我希望能够做到这一点`C#.net`，但如果只能做到这一点，那就`C++`太酷了。任何可以帮助我的资源都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:11:54.567

查看：http: [//msdn.microsoft.com/en-us/library/windows/hardware/gg463473.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463473.aspx)

其中一个示例涉及为 GPS 创建 Win8 设备驱动程序。不过，我自己并没有这样做。

# python - Str转Python中的十六进制

> ID：13529314
> 
> 赞同：0
> 
> 时间：2012-11-23T12:37:00.957
> 
> 标签：python

我在我的套接字上收到一个 4 字节的值，我想将其打印为十六进制值。我在尝试：

```
 print "%08x" % (nonce) 
```

但是，我收到一条错误消息，指出字符串无法转换为十六进制。有人知道如何快速解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:39:58.270

使用该`struct`模块将从网络接收到的八位字节解包为实际数字。该`%08x`格式将适用于数字：

```
import struct
n, = struct.unpack('>I', nonce)
print "%08x" % n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:13:02.687

如果您的数据可以转换为字符串，则可以使用以下[`str.encode()`](http://docs.python.org/2/library/stdtypes.html#str.encode)方法：

```
>>> s = "XYZ"
>>> s.encode('hex')
'58595a' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:40:25.673

您很可能有一个包含字节的字符串。但是，要将它们打印为数字，您需要......一个数字。

您可以像这样轻松创建所需的十六进制字符串：

```
''.join('%02x' % ord(x) for x in nonce) 
```

演示：

```
>>> nonce = os.urandom(4)
>>> nonce
'X\x19e\x07'
>>> ''.join('%02x' % ord(x) for x in nonce)
'58196507' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:42:18.113

另一种选择是：

```
from binascii import hexlify
>>> hexlify('a1n4')
'61316e34' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:44:02.990

```
num = "9999"
print hex(int(num))
#0x270f 
```

# mongodb - 使用组数获取 $group 结果

> ID：13529323
> 
> 赞同：28
> 
> 时间：2012-11-23T12:37:28.130
> 
> 标签：mongodb, mongodb-query, aggregation-framework

假设我有一个名为“posts”的集合（实际上它是一个更复杂的集合，posts 太简单了），其结构如下：

```
> db.posts.find()

{ "_id" : ObjectId("50ad8d451d41c8fc58000003"), "title" : "Lorem ipsum", "author" : 
"John Doe", "content" : "This is the content", "tags" : [ "SOME", "RANDOM", "TAGS" ] } 
```

我希望这个集合跨越数十万甚至数百万，我需要按标签查询帖子并按标签对结果进行分组并显示分页的结果。这就是聚合框架的用武之地。我打算使用 aggregate() 方法来查询集合：

```
db.posts.aggregate([
  { "$unwind" : "$tags" },
  { "$group" : {
      _id: { tag: "$tags" },
      count: { $sum: 1 }
  } }
]); 
```

关键是要创建分页器，我需要知道输出数组的长度。我知道要做到这一点，你可以这样做：

```
db.posts.aggregate([
  { "$unwind" : "$tags" },
  { "$group" : {
      _id: { tag: "$tags" },
      count: { $sum: 1 }
  } }
  { "$group" : {
      _id: null,
      total: { $sum: 1 }
  } }
]); 
```

但这会丢弃前一个管道（第一组）的输出。有没有办法在保留每个管道的输出的同时组合这两个操作？我知道整个聚合操作的输出可以转换为某种语言的数组并计算内容，但管道输出可能超过 16Mb 限制。此外，执行相同的查询只是为了获得计数似乎是一种浪费。

那么是否可以同时获取文档结果和计数呢？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-24T02:55:20.640

1.  用于`$project`保存`tag`和`count`进入`tmp`
2.  使用`$push`或`addToSet`存储`tmp`到您的`data`列表中。

代码：

```
db.test.aggregate(
    {$unwind: '$tags'}, 
    {$group:{_id: '$tags', count:{$sum:1}}},
    {$project:{tmp:{tag:'$_id', count:'$count'}}}, 
    {$group:{_id:null, total:{$sum:1}, data:{$addToSet:'$tmp'}}}
) 
```

输出：

```
{
    "result" : [
            {
                    "_id" : null,
                    "total" : 5,
                    "data" : [
                            {
                                    "tag" : "SOME",
                                    "count" : 1
                            },
                            {
                                    "tag" : "RANDOM",
                                    "count" : 2
                            },
                            {
                                    "tag" : "TAGS1",
                                    "count" : 1
                            },
                            {
                                    "tag" : "TAGS",
                                    "count" : 1
                            },
                            {
                                    "tag" : "SOME1",
                                    "count" : 1
                            }
                      ]
              }
      ],
      "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:59:49.160

除了计算所有标签之外，我不确定您是否需要聚合框架，例如：

```
db.posts.aggregate(
  { "unwind" : "$tags" },
  { "group" : {
      _id: { tag: "$tags" },
      count: { $sum: 1 }
  } }
); 
```

对于每个标签的分页，您可以使用普通的查询语法 - 如下所示：

```
db.posts.find({tags: "RANDOM"}).skip(10).limit(10) 
```

# ios - 如何在 captureStillImageAsynchronouslyFromConnection 方法中聚焦

> ID：13529324
> 
> 赞同：3
> 
> 时间：2012-11-23T12:37:29.563
> 
> 标签：ios, image, camera, avcapturesession

我正在尝试在 iOS 上拍照。

我坚持从方法**captureStillImageAsynchronouslyFromConnection**获取图像。

我实现了该方法并且它有效，但我的问题是它立即拍摄图像并且不要等待首先聚焦它。

我真的很想找到答案，但我没有。

我已经实现了这样的预览视频：

```
session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetHigh;
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = cameraImage.frame;
captureVideoPreviewLayer.bounds = cameraImage.bounds;
captureVideoPreviewLayer.orientation = AVCaptureVideoOrientationLandscapeRight;
[cameraImage.layer addSublayer:captureVideoPreviewLayer];
 device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

 NSError *error = nil;

if ([session canSetSessionPreset:AVCaptureSessionPreset1920x1080]) {
    session.sessionPreset = AVCaptureSessionPreset1920x1080;
}

[session addInput:input];
stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey,nil];
[stillImageOutput setOutputSettings:outputSettings];

[session addOutput:stillImageOutput];

[session startRunning]; 
```

并按下按钮我有：

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
     }
     else{}

     // TAKE IMAGE

    if ([device lockForConfiguration:&error]) {
        [device setFocusPointOfInterest:CGPointMake(0.5f, 0.f)];
        [device setExposurePointOfInterest:CGPointMake(0.5f, 0.f)];

        [device setFocusMode:AVCaptureFocusModeAutoFocus];
        [device unlockForConfiguration];
    }
    NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData];
     UIImage *rotatedImage = [[UIImage alloc]initWithCGImage:image.CGImage scale:1.0f orientation:UIImageOrientationDown];

     [session stopRunning]; 
```

但遗憾的是拍摄的照片没有对焦。

有人可以帮我吗。

马尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T04:42:09.837

您想观察调整焦点值并在完成后拍摄照片。首先，在我通常尝试捕获图像之前，我检查设备是否正在聚焦，如果是，则添加观察者：

```
if ([device isAdjustingFocus])
{
    [device addObserver: self forKeyPath: @"adjustingFocus" options: NSKeyValueObservingOptionNew context:nil ];
}
else
{
    // You can just take the image if the device isn't adjusting
} 
```

然后创建一个观察值变化的方法：

```
-(void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString: @"adjustingFocus"])
    {
        BOOL adjustingFocus = [ [change objectForKey:NSKeyValueChangeNewKey] isEqualToNumber:[NSNumber numberWithInt:1] ];
        NSLog(@"Is adjusting focus? %@", adjustingFocus ? @"YES" : @"NO" );

        //
        // If not adjusting focus then call
        // captureStillImageAsynchronouslyFromConnection here
        if (adjustingFocus == NO)
        {
            // Remove the observer when we're finished
            [device removeObserver: self forKeyPath: @"adjustingFocus" ];

        }
    }
} 
```

希望有帮助...

# html - 限制页脚滚动

> ID：13529326
> 
> 赞同：5
> 
> 时间：2012-11-23T12:37:32.930
> 
> 标签：html, css

我有一个带有在页脚中创建的菜单栏的 Html 页面。目前，整个页面是可滚动的。如何限制页脚的滚动。所以，我正在寻找仅在页面内容上滚动。

页脚菜单栏的代码如下：

```
#menu-bar {
    height: 50px;
    position: fixed;
    left: 0px;
    bottom: 0px;
    width: 100%;
    margin: 0px;
    padding: 0px;
    line-height: 10px;
    background: #F07C1F;
    z-index: 1000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:23:09.643

定位元素，就是你要找的……

[http://jsfiddle.net/7fuQm/1/](http://jsfiddle.net/7fuQm/1/)

```
#menu-bar {
    height: 50px;
    position: absolute;
    left: 0px;
    bottom: 0px;
    width: 100%;
    margin: 0px;
    padding: 0px;
    line-height: 10px;
    background: #F07C1F;
    z-index: 1000;
}
#body {
    position: absolute;
    top:0px;
    bottom:50px;    
    left: 0px;   
    overflow:auto;
}
p
{
    margin: 10px;
} 
```

# linux - 什么是统一寻址内存？

> ID：13529330
> 
> 赞同：-3
> 
> 时间：2012-11-23T12:37:54.367
> 
> 标签：linux, memory, memory-management, operating-system

什么是“统一寻址内存”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:39:45.003

阅读有关[NUMA（非统一内存访问）](http://en.wikipedia.org/wiki/Non-Uniform_Memory_Access)的 wikipage 。

# java - 如何检查是否缺少任何文件

> ID：13529333
> 
> 赞同：1
> 
> 时间：2012-11-23T12:38:03.247
> 
> 标签：java, android, toast

我使用以下代码检查 sdcard 中的文件夹中是否存在文件：

```
//Check if database exists
    File fia = new File(Environment.getExternalStorageDirectory()+"/my_folder/db/my_file_1");
    if(fia.exists())
       {                        
         //do something 
       }                        
   else
    {                       
       Toast.makeText(getApplicationContext(), "Database is not available. Please install it.", Toast.LENGTH_LONG).show();                      
    } 
```

这段代码运行良好。

现在我有 5 个已知文件存储在不同的子文件夹中`sdcard/my_folder/`：

```
1\. sdcard/my_folder/db/my_file_1 
2\. sdcard/my_folder/db/my_file_2
3\. sdcard/my_folder/abc/my_file_3
4\. sdcard/my_folder/abc/my_file_3
5\. sdcard/my_folder/xyz/my_file_5 
```

问题是我想检查所有文件是否存在，然后做点什么。如果上述任何文件不可用或丢失，则显示 Toast 消息。

如果任何文件不存在，我不知道如何仅显示一次 Toast 消息（手动执行此操作会在文件不可用时显示 Toast 消息，这不是我的愿望）。

你能帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:45:53.377

只需添加方法来检查多个路径

```
private boolean checkFileExists(String path) {
    File file = new File(path);
    return file.exists();
}

private boolean checkAllFilesExist(String[] ... paths) {
    if (paths != null && paths.length > 0) {
        for (String path : paths) {
            if (!checkFileExists(path)) {
                return false;
            }
        }
        return true;    
    } else {
        return false;
    }
}

if (!checkAllFilesExist("/path1", "/path2")) {
    // some of them missed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:42:10.240

将您的文件名放入一个字符串数组，然后在循环中检查它，如下所示

```
ArrayList<String> arrFiles= new ArrayList<String>();
arrFiles.add(sdcard/my_folder/db/my_file_1 );
arrFiles.add(sdcard/my_folder/db/my_file_2 );
arrFiles.add(sdcard/my_folder/db/my_file_3 );
arrFiles.add(sdcard/my_folder/db/my_file_4 );
Boolean isOk=true;

for(String s : arrFiles){

File fia = new File(Environment.getExternalStorageDirectory()+s);
    if(fia.exists())
       {                        
          // it is ok
       }                        
   else
    {                       
      isOk=false;
    } 

} 
```

然后 isok = true 就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:43:54.357

```
File fia = new File(Environment.getExternalStorageDirectory()+"/my_folder/db/my_file_1");
File fia2 = new File(Environment.getExternalStorageDirectory()+"/my_folder/db/my_file_2");
File fia3 = new File(Environment.getExternalStorageDirectory()+"/my_folder/abc/my_file_3");
File fia4 = new File(Environment.getExternalStorageDirectory()+"/my_folder/abc/my_file_3");
File fia5 = new File(Environment.getExternalStorageDirectory()+"/my_folder/xyz/my_file_5");
if(fia.exists() && fia2.exists() && fia3.exists() && fia4.exists() && fia5.exists())
   {                        
     //do something 
   } else {                       
   Toast.makeText(getApplicationContext(), "Database is not available. Please install it.", Toast.LENGTH_LONG).show();                      
} 
```

# ios - iOS – 本地化 JSON 资源

> ID：13529337
> 
> 赞同：4
> 
> 时间：2012-11-23T12:38:09.297
> 
> 标签：ios, cocoa-touch, cocoa, localization

我的 /MyApp/Resources/ 文件夹中有一个 JSON 资源 resource.json。我希望这个资源本地化，所以我选择在 Xcode 中将它本地化为瑞典语和英语。我现在有 2 个文件夹：

**/MyApp/Resources/sv.lproj/resource.json**

和

**/MyApp/Resources/en.lproj/resource.json**

到现在为止还挺好。但是每当我尝试将此资源用于：

```
NSString *jsonPath = [[NSBundle mainBundle] pathForResource:@"resource" ofType:@"json"];
NSString *jsonString = [NSString stringWithContentsOfFile:jsonPath encoding:NSUTF8StringEncoding error:&error]; 
```

`jsonString`将始终包含资源的英文版本。我尝试在模拟器和设备上切换语言无济于事。

我不确定如何解决此问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:42:47.233

删除应用程序后，清理并构建它工作。

# javascript - CanJS Observable 和键中的点

> ID：13529342
> 
> 赞同：1
> 
> 时间：2012-11-23T12:38:39.937
> 
> 标签：javascript, observable, canjs

我的问题是在使用 canJS Observable 时我不能在对象键中使用点，因为可以认为这里有一些嵌套可用。

因此，假设我创建了新的 observable：

```
var obs = new can.Observe( { "div.test-class": { "color": "#000000;" } } ); 
```

可能会失败并显示消息

```
can.Observe: Object does not exist 
```

而且我不能只使用

```
var obs = new can.Observe( { ".test-class": { "color": "#000000;" } } ); 
```

因为现在可能会失败并出现以下错误：

```
TypeError: current._set is not a function 
```

使用以下代码创建 observable

```
var obs = new can.Observe( { "div": {}, "div.test-class": { "color": "#000000;" } } ); 
```

完美运行，但我不需要嵌套，并且可以尝试嵌套`test-class`到`div`内部 observable 中。

那么，有什么想法可以实现我所需要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:36:08.100

这确实是一个错误[，并已在 1.1.5 版本中修复](https://github.com/bitovi/canjs/issues/257)。现在的一般规则是：

```
var obs = new can.Observe( { "div": {}, "div.test-class": { "color": "#000000;" } } ); 
```

将创建您期望的观察。将对象传递给`.attr`喜欢

```
obs.attr({ 'my.test': 'testing' }); 
```

还将设置`my.test`为属性。将它作为二传手传递

```
obs.attr('my.test', 'testing'); 
```

将设置`{ my: { test: 'testing' } }`。

# c++ - 怎么重装系统

> ID：13529344
> 
> 赞同：1
> 
> 时间：2012-11-23T12:38:41.573
> 
> 标签：c++, c, opengl

当我按照以下方式进行操作时，指针的坐标会发生变化。现在如何重置我的坐标系以便`0,0,0`在绘制另一个对象之前？

```
glPushMatrix();
glTranslatef(0.0f, -500.0f, 1200.0f);
glRotatef(270.0f, 1.0f, 0.0f, 0.0f);

glPushMatrix();
glColor3f(0.0f, 1.0f, 1.0f);
gluCylinder(quadric,10.0f,10.0f,1000.0f,32,32);
glPopMatrix(); 
```

我将绘制另一个对象，但当前的原点系统不是`0,0,0`. 我认为重点在于已经画出的圆柱体。

而且，如果我在第一个对象之后绘制另一个对象，它也会被旋转。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:06:29.947

```
glPushMatrix () ;
glTranslatef(0.0f, -500.0f, 1200.0f ) ;
glRotatef ( 270.0f, 1.0f, 0.0f, 0.0f );
glColor3f ( 0.0f, 1.0f, 1.0f );
gluCylinder(quadric,10.0f,10.0f,1000.0f,32,32);
glPopMatrix();

glPushMatrix () ;
glTranslatef(0.0f, -500.0f, 1200.0f ) ;
glRotatef ( 270.0f, 0.0f, 1.0f, 0.0f );
glColor3f ( 0.0f, 1.0f, 1.0f );
gluCylinder(quadric,10.0f,10.0f,1000.0f,32,32);
glPopMatrix(); 
```

(This code draws 2 independent objects: one with rotated x-axis, the other one with rotated y-axis)

Every `glPushMatrix()` call needs an correspondending `glPopMatrix()` call. If you want to make 'local' transformations for one object (i.e. translate, rotate) you can simply call `glPushMatrix()`, do your transformation, draw your object and call `glPopMatrix()`. Then your coordinate system is finally untransformed again, and you can draw your next object.

If you don't get that, you could also use `glLoadIdentity()` on your Modelview Matrix after you applied some transformations (to reset all transformations again) - but if you're using transformation related code (i.e. gluLookAt) on your ModelviewMatrix you have to do that again, after every `glLoadIdentity()` call.

```
glLoadIdentity();
glTranslatef(0.0f, -500.0f, 1200.0f ) ;
glRotatef ( 270.0f, 1.0f, 0.0f, 0.0f );
glColor3f ( 0.0f, 1.0f, 1.0f );
gluCylinder(quadric,10.0f,10.0f,1000.0f,32,32);

glLoadIdentity();
glTranslatef(0.0f, -500.0f, 1200.0f ) ;
glRotatef ( 270.0f, 0.0f, 1.0f, 0.0f );
glColor3f ( 0.0f, 1.0f, 1.0f );
gluCylinder(quadric,10.0f,10.0f,1000.0f,32,32); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:42:07.790

`glPushMatrix()`将矩阵推送到当前活动的矩阵堆栈（在您的情况下可能是模型视图）。`glTranslate()`等`glRotate()`与顶部模型视图矩阵一起使用，渲染也是如此。`glPopMatrix()`从堆栈中删除顶部矩阵。

因此，一旦您平衡`glPushMatrix()`并`glPopMatrix()`调用，堆栈将处于与您开始时相同的状态。

# ruby-on-rails - NoMethodError：PDF::Toolkit:Class 的未定义方法 class_inheritable_accessor'

> ID：13529345
> 
> 赞同：0
> 
> 时间：2012-11-23T12:38:44.057
> 
> 标签：ruby-on-rails, nomethoderror

嗨，我正在尝试阅读 RoR 3.2.8 中的 pfd，因为我这样做了：

```
gem install pdf-toolkit 
```

我将 gem 添加到 Gemfile：`gem "pdf-toolkit", "0.5.0"`

在我进行了捆绑安装并且一切正常之后，现在当我尝试执行我的程序时，我得到了这个错误：`NoMethodError: undefined method class_inheritable_accessor’ for PDF::Toolkit:Class`

我一直在寻找解决方案，但不幸的是我无法解决它，有什么想法吗？谢谢！

这是我的代码的一部分：

```
require 'rubygems'
require 'pdf/toolkit'

class Terminations
  def initialize
    @seperator = " "
    #@extract_file = "/uploads/Test and rates.pdf"
  end
..
...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:36:37.927

The method class_inheritable_accessor was [removed from ActiveSupport in Rails 3.2](https://github.com/rails/rails/commit/9cafc28874a681082f9f7e1e445db91f195a25ae). The version of pdf-toolkit you are attempting to use was released in 2006 and it doesn't look like it's even being maintained anymore. There is a [1.0 release candidate](https://rubygems.org/gems/pdf-toolkit/versions/1.0.0.rc1) that was published in Feb. 2012 that you could try, but I wouldn't recommend depending on an abandoned gem for production use. The [github README](https://github.com/blambeau/pdf-toolkit) says the following:

> This is a prerelease 1.0.0.rc1 version on an almost abandonned project. The main difference (broken API) with the 0.5.0 branch is that support for ActiveRecord has been entirely removed (mostly because the implementation was ugly so far). If you use pdf-toolkit and would like activerecord to be included in 1.0.0, please just tell us and we'll add it. If you upgrade from 0.5.0 to 1.0.0.rc1 and something else goes wrong, please report the issue on github.

# java - paypal：如何在soap java中确认我的每个paypal定期付款期的申请

> ID：13529359
> 
> 赞同：0
> 
> 时间：2012-11-23T12:39:28.610
> 
> 标签：java, soap, paypal

我的 Java 应用程序如何确认每个计费周期交易

只是每个月我的应用程序如何知道交易是否成功

.ex：对于每个月的第二个月，我必须在当天支付我的应用程序在没有手动检查的情况下如何执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:42:49.523

您可以使用[即时付款通知](https://www.paypal.com/ipn)将自动 POST 数据发送到服务器上的脚本，然后该脚本可以相应地处理该数据。

发生定期付款时，您将获得一个 IPN，其中显示 payment_status 为已完成、失败/已跳过或付款发生的任何情况。

# r - 替换R中括号内的文本

> ID：13529360
> 
> 赞同：7
> 
> 时间：2012-11-23T12:39:31.293
> 
> 标签：r

> **可能重复：**
> [删除括号、括号和/或大括号内的文本](https://stackoverflow.com/questions/8621066/remove-text-inside-brackets-parens-and-or-braces)

我想替换大文本文件中的括号和括号之间的文本。

示例输入（文本文件中的内容）：

```
Keep me (Remove Me 1). Again keep me (Remove Me 2). Again again keep me (Remove Me 3). 
```

输出（新文本文件中的内容）：

```
Keep me. Again keep me. Again again keep me. 
```

是否可以在 R 中执行此操作（例如使用 grep）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-23T12:54:14.577

是的，用`gsub()`空字符串替换所有不需要的文本。

```
x <- "Keep me (Remove Me 1). Again keep me (Remove Me 2). Again again keep me (Remove Me 3)." 
```

这是您想要的正则表达式：

```
gsub( " *\\(.*?\\) *", "", x)
[1] "Keep me. Again keep me. Again again keep me." 
```

* * *

它是这样工作的：

*   `*?`在括号之前（和之后）找到 0 个或多个空格。
*   由于`(`和`)`是正则表达式中的特殊符号，因此您需要转义这些符号，即 (`\\(`
*   The `.*?` is a wildcard find to find all characters, where the `?` means to find in a non-greedy way. This is necessary because regex is greedy by default. In other words, by default the regex will start the match at the first opening parentheses and ends the match at the last closing parentheses.

# java - 如何将侦听器附加到单选按钮

> ID：13529361
> 
> 赞同：8
> 
> 时间：2012-11-23T12:39:35.853
> 
> 标签：java, android, radio-button

我有一个显示各种单选按钮的活动。单选按钮分组在单选组中。我希望在检查某个放射线量时消失一些radiobutton。例如，当事件按钮被选中时，跌倒、旅行和疾病单选按钮消失。我怎样才能做到这一点？

我有愚蠢的代码，但需要以某种方式将侦听器附加到事件按钮。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.reportsomethinglayout);

         resolution = (EditText)findViewById(R.id.editTextresolution);
        // resolution.setInputType(InputType.TYPE_NULL);
        // showSoftKeyboard(resolution);

         accident  = (RadioButton)findViewById(R.id.radioButtonaccident);
         incident  = (RadioButton)findViewById(R.id.radioButtonincident);
         concern  = (RadioButton)findViewById(R.id.radioButtonconcern);
         fall  = (RadioButton)findViewById(R.id.radioButtonfall);
         trip  = (RadioButton)findViewById(R.id.radioButtonTrip);
         illness  = (RadioButton)findViewById(R.id.radioButtonillness);

    }

     public void onRadioButtonClicked(View view) {
            // Is the button now checked?
            boolean checked = ((RadioButton) view).isChecked();

            // Check which radio button was clicked
            switch(view.getId()) {
                case R.id.radioButtonaccident:
                    if (checked)
                        Log.e(TAG, "accident radiobutton checked");
                    break;
                case R.id.radioButtonincident:
                    if (checked)
                        Log.e(TAG, "incident radiobutton checked");

                            fall.setVisibility(View.GONE);
                            trip.setVisibility(View.GONE);
                            illness.setVisibility(View.GONE);
                    break;
            }
        } 
```

.

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/carefreebgscaledalphajpg" >
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:id="@+id/linearlayoutasscrollneedsonenamedchild" >
<TextView
        android:id="@+id/reportsomethingtitletextview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Carer Reporting"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_gravity="center" />

       <TextView
        android:id="@+id/textViewcategory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Category" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

     <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">   

     <RadioButton
        android:id="@+id/radioButtonaccident"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Accident" />

    <RadioButton
        android:id="@+id/radioButtonincident"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Incident" />

    <RadioButton
        android:id="@+id/radioButtonconcern"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Concern" />

    </RadioGroup>

    </LinearLayout>

    <TextView
        android:id="@+id/textViewspacer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="" />

    <TextView
        android:id="@+id/textViewtype"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Type" />

     <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">   

     <RadioButton
        android:id="@+id/radioButtonfall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fall" />

    <RadioButton
        android:id="@+id/radioButtonTrip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Trip" />

    <RadioButton
        android:id="@+id/radioButtonillness"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Illness" />

    </RadioGroup>

    </LinearLayout>

     <TextView
        android:id="@+id/textViewspacer2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="" />

    <TextView
        android:id="@+id/textViewaction"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Action" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">

     <RadioButton
        android:id="@+id/radioButtonCallDoctor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Call Doctor" />

    <RadioButton
        android:id="@+id/radioButtoncalledkin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Called next of kin" />

    </RadioGroup>

    </LinearLayout>

    <TextView
        android:id="@+id/textViewspacer3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="" />

    <TextView
        android:id="@+id/textViewresolution"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Resolution" />

    <EditText
        android:id="@+id/editTextresolution"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="1"
        android:lines="8"
        android:inputType="textMultiLine"
         >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/buttonsubmit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Submit" />

    </LinearLayout>
</ScrollView> 
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T12:45:47.137

试试这样： -

```
RadioGroup group = (RadioGroup) findViewById(R.id.radioGroup1);

group.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) 
       {
        // TODO Auto-generated method stub
        if(radiobutton1.isChecked()) {
             fall.setVisibility(View.GONE);
             trip.setVisibility(View.GONE);
             illness.setVisibility(View.GONE);
        } else if(radiobutton2.isChecked()) {

        }
     }
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-23T12:49:13.253

`RadioGroup`您可以在with上设置监听器`setOnCheckedChangeListener`。回调在参数`onCheckedChanged`中接收新选中的按钮的 ID 。`checkedId`

在您的情况下，只需向您的广播组添加一个 ID（以便从您的代码中检索它）

```
<RadioGroup
    android:id="@+id/category_group"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" > 
```

并使用以下代码：

```
RadioGroup categoryGroup = (RadioGroup) findViewById(R.id.category_group);
categoryGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

@Override
public void onCheckedChanged(RadioGroup group, int checkedId) {
    switch(checkedId) {
        case R.id.radioButtonincident:
            // 'Incident' checked
            fall.setVisibility(View.GONE);
            trip.setVisibility(View.GONE);
            illness.setVisibility(View.GONE);
            break;
        case R.id.radioButtonaccident:
            // 'Accident' checked
            break;
        case R.id.radioButtonconcern:
            // 'Concern' checked
            break;
        }
    }
}); 
```

# validation - w3c 验证错误消息 - Facebook 小部件

> ID：13529363
> 
> 赞同：1
> 
> 时间：2012-11-23T12:39:43.150
> 
> 标签：validation, w3c

我从 xml 文件中回显一个 url

```
$mapurl = '"../villas-crete.php?adults='.$getadults.'&arrival='.$getarrival.'&departure='.$getdeparture.'&avail='.$getavail.'"';

echo '<a href='.$mapurl.'>&raquo; Crete</a>
    '
    ; 
```

当我验证页面时，出现以下错误：

第 3182 行，第 43 列：一般实体“到达”未定义且无默认实体

```
…&lt;a href="../villas-crete.php?adults=2&arrival=&departure=&avail=0">&raquo; Cre… 
```

错误行 3182，第 50 列：对无法为其生成系统标识符的实体“arrival”的引用

```
…ef="../villas-crete.php?adults=2&arrival=&departure=&avail=0">&raquo; Crete</a> 
```

昂继续……

我也有 Facebook 小部件的错误

小部件是：

```
<script type="text/javascript">
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="http://www.facebook.com/pages/..mypage" data-width="364" data-show-faces="true" data-stream="false" data-header="true"></div> 
```

没有属性“data-href”

```
<div class="fb-like-box" data-href="http://www.facebook.com/pages/ 
```

没有属性“数据宽度”

```
…-" data-width="364" data-show-faces="true" data-stream… 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:47:11.227

我快速浏览了一下：http: [//validator.w3.org/docs/errors.html](http://validator.w3.org/docs/errors.html)

> 25：通用实体 X 未定义且无默认实体
> 
> 这通常是由未定义的实体引用或在 URL 或正文中使用未编码的 & 符号引起的级联错误。
> 
> 325：对无法为其生成系统标识符的实体 X 的引用
> 
> 这通常是由未定义的实体引用或在 URL 或正文中使用未编码的 & 符号引起的级联错误。

也许尝试用 & 替换那些 &`&amp;`看看你是怎么做的？

编辑 facebook 问题：认为您需要一个支持 data-href 等的文档类型。请参阅： [W3C validation error with data-href](https://stackoverflow.com/questions/9774376/w3c-validation-error-with-data-href)

# c# - ListView 中的 BindingGroup 与 DataTemplate

> ID：13529366
> 
> 赞同：2
> 
> 时间：2012-11-23T12:39:46.410
> 
> 标签：c#, wpf, binding

我最近发现了`BindingGroups`，它看起来相当不错。但我无法让它在我`ListView`充满了`DataTemplates`.

（提前我只想说：对不起所有的代码，只是为了让你更好地理解）

所以在 XAML 中它看起来像这样：

```
<StackPanel Name="stpData">
    <StackPanel.BindingGroup>
        <BindingGroup />
    </StackPanel.BindingGroup>

    <!-- This works nice! -->
    <TextBox Text="{Binding Path=name}" />
    <CheckBox IsChecked="{Binding Path=enable}" />

    <!-- This doesn't work so nice... -->
    <ListView Name="lvBools" ItemsSource="{Binding Path=myList}">
        <ListView.View>
            <GridView>
                <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <CheckBox IsChecked="{Binding bools}" />
                            </StackPanel>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</StackPanel> 
```

和代码隐藏：

```
public MainWindow()
{
    InitializeComponent();

    TestData Data = new TestData()
    {
        name = "Test",
        enable = true,
        myList = new List<TestData.myItem> 
        {
            new TestData.myItem(true), 
            new TestData.myItem(true), 
            new TestData.myItem(false) 
        },
    };

    stpData.DataContext = Data;
    stpData.BindingGroup.BeginEdit();
}

private void btnSave_Click(object sender, RoutedEventArgs e)
{
    stpData.BindingGroup.CommitEdit();
    stpData.BindingGroup.BeginEdit();
}

private void btnCancel_Click(object sender, RoutedEventArgs e)
{
    stpData.BindingGroup.CancelEdit();
    stpData.BindingGroup.BeginEdit();
}

public class TestData
{
    public class myItem
    {
        public myItem(bool b)
        {
            this.bools = b;
        }
        public bool bools { get; set; }
    }

    public string name { get; set; }
    public bool enable { get; set; }
    public List<myItem> myList { get; set; }
} 
```

那么当我更改名称或按下启用复选框时会发生什么，直到我按下保存按钮（btnSave_Click）（不包含在`XAML`）或如果我按下取消按钮更改是“恢复” . 但是，如果我单击 ListView 中的复选框之一，这些更改将立即提交。

我自己的猜测： ListView （甚至可能是`StackPanel`in `DataTemplate`）停止了`BindingGroup`继承链。但在那种情况下，我怎样才能包括它们？

**编辑** 我还尝试向`BindingGroup`DataTemplate 添加一个新的：

```
<DataTemplate>
    <StackPanel x:Name="SPpan">
        <StackPanel.BindingGroup>
            <BindingGroup Name="BGStackPanel" />
        </StackPanel.BindingGroup>
        <CheckBox IsChecked="{Binding Path=bools}" />
    </StackPanel>
</DataTemplate> 
```

现在，当我编辑`bools`（在我的中单击它们`ListView`）时，源没有得到更新，这很好，但现在我找不到保存（*提交*）数据的方法。我既不能访问`SPpan`也不`BGStackPanel`能从代码隐藏访问。但是我尝试了以下方法：

```
var tmp = (lvBools.View as GridView).Columns[0];
(tmp.CellTemplate.LoadContent() as StackPanel).BindingGroup.BeginEdit(); 
```

但这也没有成功...

**编辑** 好的，所以编辑 II ... 所以我猜源不更新的原因是因为我在模板上运行 Begin/CommitEdit，而不是在从模板创建的实际对象上运行。那么有人知道如何到达这些物体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:57:17.783

好的，感谢[EL Dunn](https://chat.stackoverflow.com/users/1194870/e-l-dunn)先生，我设法解决了这个问题！

所以在我的第一次编辑中，我建议我可以在 中添加一个`BindingGroup`，`StackPanel`这`DataTemplate`有点朝着正确的方向......

所需要做的就是`BindingGroupName`在 DataTemplate 的 CheckBox 中添加一个。

```
<StackPanel Name="stpData">
    <StackPanel.BindingGroup>
        <BindingGroup Name="bindingGroup"/>
    </StackPanel.BindingGroup>

    <!-- This works nice! -->
    <TextBox Text="{Binding Path=name}" />
    <CheckBox IsChecked="{Binding Path=enable}" />

    <!-- Now this work nice as well! -->
    <ListView Name="lvBools" ItemsSource="{Binding Path=myList}">
        <ListView.View>
            <GridView>
                <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <CheckBox IsChecked="{Binding bools, BindingGroupName=bindingGroup}" />
                            </StackPanel>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</StackPanel> 
```

就那么简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:47:34.190

您可以将各种子项目放在相关单选按钮的块中。然后将每个组放在面板或多视图中。然后让主要电台列表进行自动回发。在回发阅读单击/选择了哪个单选按钮，然后通过显示相关面板或视图来显示相关子组。

如果您将这些放在更新面板中，您可以在没有明显的页面刷新的情况下完成所有这些操作。

# php - 如何在 drupal 7 中定义模块级变量

> ID：13529373
> 
> 赞同：3
> 
> 时间：2012-11-23T12:40:15.613
> 
> 标签：php, drupal, variables, drupal-7

如何在 drupal 模块中定义变量，以便我可以从任何函数访问该模块中的这些变量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T12:46:12.783

试试[variable_set](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/variable_set/7) () 和[variable_get](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/variable_get/7) ()

像这样设置变量：

```
// I have assumed the variable name to be "the_name_of_the_variable"
variable_set("the_name_of_the_variable", "the value of the variable"); 
```

然后像这样检索值：

```
$my_variable = variable_get("the_name_of_the_variable", "a default value in case the variable has never been set before"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:47:07.377

For every page load in Drupal all the `.module` files are loaded. But this is not the case for the `inc` files.

Inc files are loaded only when it is mentioned in the menu hook or they are explicitly mentioned in module file using module_load_include

```
// Load node.admin.inc from the node module.
  module_load_include('inc', 'node', 'node.admin'); 
```

I think this pretty much answers your question. So you should define your variables as global in these files.

By your question if you mean that the scope of the functions defines in your module also should be limited to your module only, then I don't think there is any solution as of now. But at-least the above method will make sure that your variables are not loaded, when your module is not performing any actions.

# regex - 在 PCRE 中将字符串截断为大小

> ID：13529375
> 
> 赞同：2
> 
> 时间：2012-11-23T12:40:18.250
> 
> 标签：regex, perl, pcre

使用单个正则表达式行（这在应用程序的配置文件中）我需要捕获电子邮件地址的本地部分。

如果它只包含数字，则不加修改地传递它。如果上面有任何非数字字符，则最多截断为 11 个字符。

我做了这个简单的程序来测试，但如果 localpart 超过 11 个字符，则不匹配（打印整个电子邮件地址）。

```
#!/usr/bin/env perl

my @emails = ('the-chuck.t1.norrisson@chuck.com', '358451399991@chucksphon.com', 'ph33t@gmail.com', 'the-average.guyisbald@example.com', 'alongnameit@11chars.com', 'alongnameitis@13chars.com', 'a1234567890@11charnum.com');

for my $email (@emails){

    # will put $1$2 on the substituion spot
    $email =~ s/^(\d+)@.+|^([a-zA-Z0-9._%+-]{1,11})@.+/  /;

    print '===> ' . $email  . " \n\n ";

} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:20:55.387

您需要包含一个正则表达式原子，例如`\S*?`以防字符数超过 11...

```
 $email =~ s/^(\d+)@.+|^([a-zA-Z0-9._%+-]{1,11})\S*?@.+/$1$2/; 
```

使用它会产生正确的输出：

```
[mpenning@Bucksnort ~]$ perl sample.pl
===> the-chuck.t

 ===> 358451399991

 ===> ph33t

 ===> the-average

 ===> alongnameit

 ===> alongnameit

 ===> a1234567890

 [mpenning@Bucksnort ~]$ 
```

# sharepoint - 在文档库中设置 SharePoint 中文件的过期时间

> ID：13529378
> 
> 赞同：3
> 
> 时间：2012-11-23T12:40:23.383
> 
> 标签：sharepoint, sharepoint-2010, browser-cache, cache-control, document-library

我得到了一个 SharePoint 站点，其中包含特殊资产站点集合中的图像。默认情况下，这些图像的最大年龄为“0”，因此不会被缓存。

```
Cache-Control:private,max-age=0
Date:Fri, 23 Nov 2012 10:44:56 GMT
ETag:"{C7D03C94-3DC1-49BB-86DA-EFC71BC61058},1"
Expires:Thu, 08 Nov 2012 10:44:56 GMT
Last-Modified:Wed, 07 Nov 2012 17:00:50 GMT 
```

我想改变这种行为。如果不仅文档网站集中的文件被缓存而且在任何地方都可以缓存，因为该网站集不包含任何其他文件。

# visual-studio - 在哪里可以找到 Microsoft Test Controller 2012 安装程序

> ID：13529381
> 
> 赞同：3
> 
> 时间：2012-11-23T12:40:28.857
> 
> 标签：visual-studio, tfs

我试图在 TFS 和 Visual Studio (Premium) 安装媒体中找到它。还试图从 MS 网站上找到一个下载，但在那里找不到。

我在哪里可以找到它？（以及测试代理安装程序）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T22:58:06.870

测试管理器的测试代理是 MSDN 订阅者可用的高级版和终极版中包含的一项功能：

## [Visual Studio 2012 (x86) 的代理 - DVD（英语）](http://msdn.microsoft.com/en-us/subscriptions/downloads/hh442898.aspx#FileId=49775)

![Visual Studio 2012 (x86) 的代理 - DVD（英语）](../Images/54bf1b172c108f9a689962c771524497.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:54:11.583

我找到了这个链接[Visual Studio Agents 2010 - ISO](http://www.microsoft.com/en-us/download/details.aspx?id=1334)

如果我发现对您来说更有趣的东西，我将编辑此答案。

但我必须这样看吗？

# javascript - 从 $('input[type="text"]') 中取反一个文本框

> ID：13529383
> 
> 赞同：1
> 
> 时间：2012-11-23T12:40:37.110
> 
> 标签：javascript, jquery, jquery-selectors

我有 4 个文本框，我写了一些代码：

```
$('input[type="text"]').keyup(function () {
    if ($(this).val() == '') {
... 
```

我不想将此代码应用于 1 texbox，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:43:17.587

给那个文本框一个`id`并像这样更新你的代码：

```
$('input[type="text"]:not("#id_of_txt")').keyup(function () {
    if ($(this).val() == '') {
    }
}); 
```

此解决方案只是为了回答您的问题，而不是建议作为一种好的做法。您可能在某个时候在 DOM 中添加更多输入框，并且您将不得不继续添加到`:not`列表中，因为其他所有内容都将绑定到 keyup 事件。

更好的解决方案是给三个输入框一个公共类，并像这样更新你的代码：

```
$('input.class_of_txt').keyup(function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:42:14.800

向 3 个文本框添加一个通用类。

```
<input type="text" class="myclass" /> 
```

然后只引用该类：

```
$('.myclass').keyup(function () { 
```

任何其他解决方案都会降低代码的可维护性。如果会有另一个特殊的文本框怎么办？你也会为此破例吗？

# android - 如何通过 View 和父 ViewGroup 处理 onClickEvent？

> ID：13529390
> 
> 赞同：2
> 
> 时间：2012-11-23T12:40:55.643
> 
> 标签：android, android-layout

我的每个项目`android.widget.Gallery`都是`LinearLayout`一个图像和一个文本视图。我设置了 ImageView 的 onClick 处理程序，它会触发，但现在 Gallery 不起作用。如果用户触摸图像，图库不再接受单击或滑动手势。如果他们对其他领域（如不消耗 onClick 事件的 TextView）进行处理，则效果很好。是否有解决此问题的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
  android:layout_width="fill_parent" xmlns:android="http://schemas.android.com/apk/res /android"
android:layout_height="wrap_content" android:padding="3sp" android:orientation="vertical" android:gravity="center_horizontal"> 

 <ImageView android:id="@+id/image" android:src="@drawable/logo"
    android:layout_height="110dp" android:layout_width="130dp" android:layout_gravity="center"></ImageView>
<TextView android:text="TextView" android:id="@+id/imageDescript" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:45:16.240

您可以扩展 LinearLayour，然后重写 onInterceptTouch 方法。

如果您想将事件保留在画廊布局中，您可以在那里进行管理，或者将其发送到内部 ImageView

# java - 如何从Java中的html字符串中按顺序获取所有html标签

> ID：13529394
> 
> 赞同：1
> 
> 时间：2012-11-23T12:41:04.420
> 
> 标签：java, regex, html-parsing, jsoup

```
<td valign="top" width="230">
<div>
<b><a href="http://www.cs.cornell.edu/johannes/">Johannes Gehrke</a></b>
</div>
<div class="small">
Professor<br>Computer Science, CS Field Member<br>Director of Graduate Studies<br>
Ph.D., Univ of Wisconsin, Madison, 1999<br><b>Research focus:</b> Database systems, data mining, and data privacy
</div>
</td> 
```

我想从给定的 html 字符串中获取标签序列。最简单的方法是什么？例如，以上面的 html 字符串作为输入，我希望我的方法输出一个字符串数组，即`[td,div,b,a,div,br,br,br,br,b]`.

我试图`Jsoup`解析 html 字符串，但似乎没有办法捕获像`br`. 我想知道任何其他 Java 库都可以为我解决问题。最后的手段是使用正则表达式技术。如果有人可以为此目的想出一个简洁的正则表达式，它也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:54:26.033

您可以使用正则表达式：

```
 Pattern p = Pattern.compile("<([^\\s>/]+)");
    Matcher m = p.matcher(txt);
    while(m.find()) {
        String tag = m.group(1);
        System.out.println(tag);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:48:59.993

使用 JSoup 解析字符串后，使用它的[getAllElements()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getAllElements%28%29)方法，迭代结果，并为每个元素调用[tagName()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#tagName%28%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:33:23.670

我会考虑使用`HTMLEditorKit.Parser`. 即使 Swing 只能呈现 HTML 3.2，解析器也应该读取并保留所有标签：

```
public List<String> getTags(Reader reader)
throws IOException {

    final List<String> tags = new ArrayList<>();

    HTMLEditorKit.ParserCallback callback =
        new HTMLEditorKit.ParserCallback() {
            @Override
            public void handleStartTag(HTML.Tag tag,
                                       MutableAttributeSet attributes,
                                       int pos) {
                super.handleStartTag(tag, attributes, pos);
                tags.add(tag.toString());
            }
        };

    HTMLEditorKit.Parser parser = new ParserDelegator();
    parser.parse(reader, callback, true);

    return tags;
} 
```

# dictionary - 资源字典中的样式

> ID：13529401
> 
> 赞同：1
> 
> 时间：2012-11-23T12:41:27.150
> 
> 标签：dictionary, combobox, resources, styles, staticresource

我创建了一个资源字典，其中包含组合框的控件模板。我已经使用 XamlWriter 提取了默认的组合框控件模板，并将该代码粘贴到我正在处理的这个资源字典中。只是研究我对控件模板的修改如何反映到控件本身。文件名为 Dictionary1.xaml。

是否可以在我的测试应用程序的每个组合框中使用该控件模板，而无需在 Xaml 中的每个组合框中键入它？我通常会设置组合框的 Style="{StaticResource ComboboxTesting}" 但如果我的更改能反映到我的测试应用程序中的每个组合框会很好。“ComboboxTesting”是我的资源字典中的关键。

我想出了这段代码，但它自然不起作用，因为我不知道在 Setter.Value 标记之间放置什么。

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
    <Style TargetType="ComboBox">
        <Setter Property="Style">
            <Setter.Value>
                <!-- Something here... -->
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

谢谢，

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T11:15:02.803

尝试这个

```
<Window.Resources>
<ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Dictionary1.xaml" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary>
<Style TargetType="ComboBox">
    <Setter Property="Background">
        <Setter.Value>
            <!-- Something here... -->
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T06:34:08.357

尝试将 setter 属性更改为“样式”以外的任何其他内容，尝试将其更改为高度、宽度、颜色、字体或除 Style 之外的任何其他内容...。可能是因为您将父样式从子 setter 更改为...

# tcl - 缺少“des”Tcl 包

> ID：13529405
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:41:36.587
> 
> 标签：tcl

当我尝试执行以下 tcl 代码时，我得到了这个

执行“package require des”时找不到 package des（文件“encdec.tcl”第 1 行）

**Tcl 代码**

```
package require des

set key "12345678";  # Must be 8 bytes long
set msg "abcde"

##### ENCRYPTION
set encryptedMsg [DES::des -dir encrypt -key $key $msg]
# $encryptedMsg is a bunch of bytes; you'll want to send this around...

##### DECRYPTION
set decryptedMsg [DES::des -dir decrypt -key $key $encryptedMsg]
puts "I got '$decryptedMsg'" 
```

如何获得该包裹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:46:28.747

这个包是“标准 Tcl 库” [tcllib](http://tcllib.sourceforge.net/)[的一部分](http://tcllib.sourceforge.net/doc/des.html)。

如果您正在使用“包含电池”的 Tcl 发行版，例如 ActiveTcl，您应该使用它的方法来获取这个包；例如，使用 ActiveTcl，要安装的命令`tcllib`是

```
teacup install tcllib 
```

（您应该在 Windows 控制台提示符下运行它）。

如果您使用的是从操作系统包中安装的 Tcl，`tcllib`则通常也以包的形式提供。例如，在 Debian（或其衍生产品）上，要安装的命令`tcllib`是

```
apt-get install tcllib 
```

下次请提前告诉我们您的平台，不要强迫任何人在这里猜测。

# c++ - 如何从 symbian 的 QT 移动应用程序发送和接收短信？

> ID：13529406
> 
> 赞同：5
> 
> 时间：2012-11-23T12:41:41.703
> 
> 标签：c++, qt, sms

我正在为 symbian 开发一个移动应用程序，但我在发送和接收 SMS 时遇到问题。我在互联网上搜索但没有找到好的解决方案，因为其中很多都已存档。

等待你的帮助。

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:51:07.157

> 消息传递库提供了一组用于访问消息传递数据的 API。提供了检索和查询消息、文件夹和帐户的接口，还提供了创建、修改和存储消息的接口。提供了用于处理和存储 SMS、MMS、MIME 电子邮件和 TNEF 电子邮件消息的统一界面。支持处理仅部分检索的消息。

[http://doc.qt.digia.com/qtmobility-1.2/messaging.html](http://doc.qt.digia.com/qtmobility-1.2/messaging.html)

# marionette - 当所有 itemView 都完成渲染时，Backbone.Marionette CollectionView 回调？

> ID：13529407
> 
> 赞同：6
> 
> 时间：2012-11-23T12:41:44.997
> 
> 标签：marionette

我正在使用木偶`Layout` `.show`来渲染 a`CollectionView`并且想知道是否有一种方法可以检测所有孩子何时完成**渲染**`ItemView`？

我的代码的简化版本是：

布局

```
Layouts.Group = Backbone.Marionette.Layout.extend({

    template: Templates.group,

    ...

    regions: {
        header: ".group-header"
        details: ".group-details"
    },

    ...

}); 
```

集合视图

```
Views.GroupDetail = Backbone.Marionette.CollectionView.extend({

    itemView: groupDetailRow,

    ...

    onRender: function () {

        // do something here after rendering *all* groupDetailRows of information for group detail section

    }

}); 
```

项目视图

```
Views.GroupDetailRow = Backbone.Marionette.ItemView.extend({

    onRender: function () {

        // single groupDetailRow of information

    }

}); 
```

。节目

```
var details = new Views.GroupDetail();

details.show(new DV.Time.Views.GroupDetail()); 
```

我注意到在文档中提到了一个`.done`函数：

```
new MyCollectionView().render().done(function(){
  // all of the children are now rendered. do stuff here.
}); 
```

是否可以将其与 一起使用`Layout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:23:48.863

你可以监听一个“render”事件，或者在视图上提供一个“onRender”回调函数。

```
 MyView = Marionette.CollectionView.extend({

  onRender: function(){
    // the list of items has been rendered. do stuff here
  }

});

var view = new MyView();

view.on("render", function(){
  // the list of items has been rendered. do stuff here
}); 
```

[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#render--onrender-event](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#render--onrender-event)

# java - 在包外隐藏构造函数

> ID：13529411
> 
> 赞同：1
> 
> 时间：2012-11-23T12:41:59.630
> 
> 标签：java, oop

我试图将类构造函数隐藏在包范围之外（以及其他一些设置器），并强制潜在的包用户仅通过其构建器获取这个特定的类（为了清晰和验证原因）。

到目前为止，我一直通过将该类及其构建器放在同一个包中并为我想隐藏的所有方法声明包可见性来实现这一目标。然而，这有一些缺点。它强加了更僵硬的包结构并限制了用户扩展类构建器的可能性。

我对任何替代解决方案或模式感到好奇？不久前我听说过关于向 Java 引入“模块”可见性修饰符的传言（我认为这可以解决问题），但我猜他们放弃了这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:46:41.303

**-**使用`protected` **访问修饰符**来限制对该包之外的构造函数代码的访问。

**例如：**

```
public class FilePro {

    protected FilePro(){      // This block is accessible only
                          // within this package

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:48:44.943

首先，我建议在产品中进行全面验证（和可变值的复制），而不是信任客户。

如果您想将客户端正在使用的构建器接口与产品分开，请添加该间接层。

最简单的方法是让产品公开一个带有大量参数列表的构造函数并执行通常的构造函数职责（复制可变参数、验证参数并确保对象初始化为可用状态）。构建器可以在不同的依赖包/模块/jar/库中并使用构造函数接口。

所以现在我们回到大构造函数。您可以通过多种方式解决此问题。例如，您可以在同一个类/包/模块中拥有一个规范的构建器，其他对象可以使用该构建器。

或者你可以有一个带有“get”方法的接口（去掉`get`前缀，它在gets类型中没有意义）替换构造函数中的每个参数。产品构造函数现在只需要一个参数并且可以提取每个参数。当需要完成产品构建时，每个构建器都可以将接口实现为匿名内部类（例如）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:49:34.520

使用公共 Builder 静态内部类：

```
public class OuterClass{

    private MyType1 field1;
    private MyType2 field2;

    private OuterClass(MyType1 field1, MyType2 field2){....} 

    public static class Builder{
        private static final MyType1 DEFAULT_VALUE_1 = something;
        private static final MyType2 DEFAULT_VALUE_2 = somethingelse;

        private MyType1 field1=DEFAULT_VALUE_1;
        private MyType2 field2=DEFAULT_VALUE_2;

        public Builder() {...}

        public setFiled1(MyType1 field1) { this.field1 = field1)
        public setFiled2(MyType2 field2) { this.field2 = field2)

        public OuterClass build() { return new OuterClass(field1,field2);}
    }
} 
```

为了进一步的稳健性，使你的领域在 outerClass final

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:40:33.840

我没有用 Java 做太多工作，但我相信你可以做的是声明一个创建类实例的静态方法

```
public static build()
{
 return new FilePro();
} 
```

这样您就可以仅从同一个包中创建该类的新实例，并且可以不受任何限制地扩展该类

# c# - 用于许多不同 TabControl 的 TabItem

> ID：13529412
> 
> 赞同：-3
> 
> 时间：2012-11-23T12:42:00.723
> 
> 标签：c#, wpf, tabcontrol, tabitem

我的解决方案中有很多项目。在很多项目中，我有一个 TabControl。我的项目中有一个 dll。如何在dll中创建一个tabItem，以便在其他项目的TabControl中动态添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:09:52.620

`UserControl`您必须在您的 dll中创建一个，然后在其他项目中引用它。
并展示您尝试过的内容以及您的问题所在，而不是提出任何搜索引擎都可以回答的简单问题，这样可以避免您投反对票。

# .net - 从 C# 中的另一个表单调用 WPF 表单

> ID：13529426
> 
> 赞同：0
> 
> 时间：2012-11-23T12:42:41.530
> 
> 标签：.net, wpf, c#-4.0

我正在使用 WPF 处理 C# 项目。我试图从 C# 表单调用 FPF 表单，但它没有打开 WPF 表单。我正在使用以下代码调用 WPF 表单。

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        newForm = new MainWindow();

        newForm.Show();
    } 
```

# android - 通过组的 id 在特定组中添加联系人

> ID：13529427
> 
> 赞同：1
> 
> 时间：2012-11-23T12:42:42.237
> 
> 标签：android, insert, contactscontract

我需要在组内插入联系人。我有该组的ID。

联系人插入到帐户内，但不在指定的组内。我不知道为什么。任何人都可以帮助我吗？

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
Account[] accounts = AccountManager.get(getActivity()).getAccounts();

String accountName = null;
String accountType = null;
String account = "mail@gmail.com";
    for(Account account2 : accounts)
        if(account2.name.equals(account)){
            accountName = account2.name;
            accountType = account2.type;
        }
ops.add(ContentProviderOperation
        .newInsert(ContactsContract.RawContacts.CONTENT_URI)
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, accountType)
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, accountName)
        .build());

ops.add(ContentProviderOperation
        .newAssertQuery(ContactsContract.Groups.CONTENT_URI)    
        .withSelection(ContactsContract.Groups._ID + " = ?", new String[]{Long.toString(idGroup)})   //new String[]{Long.toString(idGroup)}
        .withExpectedCount(1)
        .build());

ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
        .withValue(Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
        .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, "RICARDITO bla bla2")
        .build());

try{
    getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
}catch(Exception e){
    Log.e(ClientEditContact.class.getName(), e.toString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T19:09:42.730

Here is the code I use to insert a contact into a group. I use the group ID and the Contact ID:

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValue(ContactsContract.Data.RAW_CONTACT_ID, rawContactId)
                        .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID, groupId)
                        .build());

                try 
                {
                    resolver.applyBatch(ContactsContract.AUTHORITY, ops);
                } catch (RemoteException e) {

                } catch (OperationApplicationException e) {
                // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

I'm going to say that you need to add your contact in the ContactsContract.Data database by setting the rows ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID & and the CONTACT_ID and the correct mimetype, instead of adding directly to the ContactsContracts.Group database.

# java - 在android中监控服务

> ID：13529432
> 
> 赞同：1
> 
> 时间：2012-11-23T12:42:53.790
> 
> 标签：java, android

> **可能重复：**
> [android：检查服务是否正在运行](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)

我有一项服务可以执行我的操作，它将无限期地在后台运行。我想监视服务是否正在运行。所以，我想创建另一个服务来监控第一个。

是否有任何其他动作过滤器来广播，服务运行与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:46:16.013

你可以[`getRunningServices(int max)`](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningServices%28int%29)使用`ActivityManager`

ActivityManager actManager = // 获取活动管理器

```
int max = ??;

List<ActivityManager.RunningServiceInfo> runningServices = actManager.getRunningServices(max);

for(ActivityManager.RunningServiceInfo runningService : runningServices)
{

   boolean started = runningService.started;
} 
```

**注意：**此方法仅用于调试或实现服务管理类型的用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:50:39.233

```
Presumably, it is calling getRunningServices() on ActivityManager. There is no documented Intent to go straight to that screen. 
```

第 1 步。首先，您需要声明和初始化一些变量：-

```
private static final String APP_DETAILS_PACKAGE_NAME = “com.android.settings”; // Here you need to define the  package name

private static final String SCREEN_CLASS_NAME = “com.android.settings.RunningServices”; // Here you need to define the class name but NOTICE!! you need to define its full name including  package name. 
```

步骤 2\. 实例化一个 Intent

```
Intent intent = new Intent(); 
```

步骤 3\. 将操作设置为 ACTION_VIEW

```
intent.setAction(Intent.ACTION_VIEW); 
```

步骤 3\. 在 Intent 中设置类名，因为我们知道包可以有多个活动。所以 Intent 需要一些东西来匹配包名中的 Activity。

```
intent.setClassName(APP_DETAILS_PACKAGE_NAME,  SCREEN_CLASS_NAME); 
```

步骤 4\. 开始活动

```
context.startActivity(intent); 
```

在上面的示例中，如果您想访问一些不同的屏幕，然后根据您的需要更改 APP_DETAILS_PACKAGE_NAME 和 SCREEN_CLASS_NAME。

# javascript - Jquery：从单元格值中获取行

> ID：13529433
> 
> 赞同：1
> 
> 时间：2012-11-23T12:43:02.187
> 
> 标签：javascript, jquery, html-table, row

我有一张桌子，我所有的行都是这样的：

```
<tr> 
    <td class="name">name1</td>
    <td class="type">type1</td>
    <td class="edit">
        <a href="edit" class="edit">edit</a>
    </td>
</tr> 
```

我需要禁用某些类型的编辑 href。所以我需要类似的东西：

```
row = $('.mytable').find(row where .type value = type_with_no_edit) #this is where I need elp
row.find('a.edit').remove(); 
```

如果该行总是第一行，我会这样做：

```
row = $('.mytable tbody>tr:first') 
```

但情况并非总是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:47:14.660

听起来像是过滤器的工作...

```
$('.mytable tr').filter(function() {
    return $("td.type", this).text() === "type_with_no_edit";
}).find('a.edit').remove(); 
```

这将查找`type_with_no_edit`td 中具有类类型的文本的每一行，并删除`a.edit`具有同级的 td。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:02:37.227

您可以使用[`:contains`](http://api.jquery.com/contains-selector/)伪选择器：

```
$('td.type:contains("type_with_no_edit")').siblings('.edit').empty(); 
```

演示：http: [//jsfiddle.net/XLwfs/](http://jsfiddle.net/XLwfs/)

如果您不想清空 TD，只需定位锚点并将其移除即可。

# javascript - d3js 代码在在线编辑器中工作，但不在 html 文件中

> ID：13529440
> 
> 赞同：0
> 
> 时间：2012-11-23T12:43:18.913
> 
> 标签：javascript, canvas, charts, svg, d3.js

这是我的 d3.js 代码

```
<html>
<head>
    <title>D3 Test</title>

</head>
<body>
    <script type="text/javascript" src="d3/d3.v2.js"></script>
    <script type="text/javascript">
        var w = 400,
            h = 400,
            padding = 31,
            p = 10,
            barwidth = 10;
        var data = [{count:200,year:2008},
                    {count:240,year:2010},
                    {count:290,year:2009}];
        var bar_height = d3.scale.linear()
                        .domain([d3.max(data, function(d) { return d.count; }), 0] )  // min max of count
                        .range([p, h-p]);
        var bar_xpos = d3.scale.linear()
                        .domain([2005, d3.max(data, function(d) { return d.year; })] )  // min max of year
                        .range([p,w-p]);
        var xAxis = d3.svg.axis()
                    .scale(bar_xpos)
                    .orient("bottom")
                    .ticks(5);  //Set rough # of ticks

        var yAxis = d3.svg.axis()
                    .scale(bar_height)
                    .orient("left")
                    .ticks(5);

        var svg = d3.select("svg")
                    .attr("width", w)
                    .attr("height", h);

        svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(0," + (h - padding) + ")")
            .call(xAxis);

        svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(" + padding + ",0)")
            .call(yAxis);

        svg.selectAll("rect")
            .data(data)
            .enter().append("rect")
            .attr("x", function(d) {
                return bar_xpos(d.year); })
            .attr("y", function(d) { 
                return bar_height(d.count); })
            .attr("width", barwidth)
            .attr("height", function(d) {return h - bar_height(d.count) - padding; })
            .attr("fill", "steelblue")  
    </script>
</body> 
```

这段代码在这里工作正常[http://enjalot.com/inlet/4132552/](http://enjalot.com/inlet/4132552/) 但是当我在 html 文件中尝试它时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:16:44.400

将您的 svg 附加到正文或 div。

```
 var svg = d3.select("body").append("svg")
                .attr("width", w)
                .attr("height", h); 
```

它工作正常

# javascript - 防止基于布尔值的动画

> ID：13529443
> 
> 赞同：0
> 
> 时间：2012-11-23T12:43:33.690
> 
> 标签：javascript, jquery, internet-explorer, animation, opacity

你们中的许多人都知道，用 alpha 透明度为 PNG 制作动画效果`<IE8`并不好。因此，我只想在`<IE8`.

我能看到这样做的唯一方法是这样做：

**HTML**

```
<!--[if lt IE 8]>
    <script type="text/javascript">
        var browserUnsupported = true;
    </script>
<![endif]--> 
```

**JAVASCRIPT**

```
// Test if the browser is supported
if(browserUnsupported){
    // Hide the element
    $('#test').hide();
}else{
    // Fade out the element and then hide it
    $('#test').animate({
        opacity:0   
    },200,function(){
        $(this).hide();
    })
}

// Once the animation has completed, continue
setTimeout(function(){
    // This will execute once the animation has completed
    // We cannot use the callback in case the browser is unsupported
    // and the animate function has not been used
},200); 
```

但这是一个相当冗长的修复，特别是如果你考虑到每次我想为某些东西制作动画时，我都必须这样做。

**有人能想出更好的选择吗？**

你能在 Internet Explorer 8 及更低版本中关闭动画不透明度吗？如果有黑客攻击，请考虑我没有在本地存储我的 jQuery，我从 Google CDN 加载它。即使这是唯一的选择，我也不愿意更改 jQuery 源代码。

**更新**

我不是在寻找更好的方法来检测浏览器版本。上面的代码仅用于说明目的。我想知道的是是否有一种方法可以控制 jQuery 动画的不透明度？或者，有没有更好的方法来为 if 条件设置动画，如果不是，请不要设置动画？

**更新**

像这样的东西（未经测试）：

```
function myAnimate(styles,duration,easing,callback){
    // Get the selected element
    var element = this.elements;
    if($.browser.msie && $.browser.version<8){
        delete options.opacity;
    }
    // Call the animation method
    element.animate(options,duration,easing,callback);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:48:07.823

例如通过使用`$.browser`和`$.browser.version()`来自 jQuery

```
if($.browser.msie && $.browser.version < 8) {
 //fallback
} else {
 //real code
} 
```

**编辑**

您可以编写自己的执行函数，扩展 jQuery 以根据条件运行函数。如果你的条件不是 Internet Explorer，那么你可以确保在 IE 中不会调用此类函数。执行函数可能看起来像这样（虽然没有测试过）

```
$.fn.execute = function(a) {
    return this[a].apply(this, [].slice.call(arguments, 1));
}

condition = $.browser.msie;
$('div').execute(condition ? 'true' : 'false', function() {...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:58:21.747

`$().fadeOut`完全符合您的要求 - 为不透明度设置动画然后隐藏：

```
if(ie){
  $("#test").hide()
}else{
  $("#test").fadeOut(200)
} 
```

如果你喜欢简洁的代码，你可以这样做

```
$("#test").fadeOut(supported && 200) 
```

或者，您可以全局[禁用*所有*动画](http://api.jquery.com/jQuery.fx.off/)

```
if(ie) $.fx.off = true; 
```

或者将您的逻辑包装在一个您甚至可以添加到 jQuery 中的函数中：

```
$.fn.fadeIfSupported = function(){
  if(unsupported){
    this.hide()
  }else{
    this.fadeOut.apply(this, arguments)
  }
}
...
$("#test").fadeIfSupported(200); 
```

# xslt - 修改 Sp2013 上自定义字段类型的 XSLT 列表视图，以自定义总计呈现（计数、总和、平均值等） - 可能的 SP2013 错误？

> ID：13529444
> 
> 赞同：4
> 
> 时间：2012-11-23T12:43:38.540
> 
> 标签：xslt, sharepoint-2013, sharepoint-list, custom-field-type

只是想知道是否有一种方法可以修改 XSL 模板以进行包含自定义字段类型的列表视图呈现，以便自定义视图中的总计行。最近，我创建了这么简单的自定义字段类型，继承自`SPTextField`，将其添加到列表中，修改了列表视图并将其添加到*Totals*部分，但是该字段的*Count* total 似乎与其余部分一起呈现表中的行。这是 fldtypes_CustomFieldType.xsl 文件中管理该字段呈现的部分：

```
 <xsl:template match="FieldRef[@FieldType = 'CustomFieldType']" mode="Text_body">
      <xsl:param name="thisNode" select="." />
      <span style="background-color:lightgreen;font-weight:bold">
          test <xsl:value-of select="$thisNode/@*[name()=current()/@Name]" />
      </span>
  </xsl:template > 
```

这是列在列表视图显示中的样子： ![SP2013 列表视图中自定义字段类型的计数的 XSLT 呈现](../Images/7f2cf4ac5e0735b0560e2e2bf227ef1a.png)

我期待着您的反馈。谢谢！

**[编辑]** 我在我自己的博客上的一篇文章中描述了这个问题，其中包含更多细节和稍微不同的观点： [http ://beamusupscotty.wordpress.com/2012/11/27/sharepoint-2013-custom-field-type-vs -aggregation-vs-xslt-list-view-vs-jslink/](http://beamusupscotty.wordpress.com/2012/11/27/sharepoint-2013-custom-field-type-vs-aggregation-vs-xslt-list-view-vs-jslink/) 我也相信有一种可能的解决方法，但时间会证明一切。在发布您的答案之前，请考虑那里的信息。谢谢。

# python - 将瓶中的应用程序库更改为龙卷风

> ID：13529446
> 
> 赞同：0
> 
> 时间：2012-11-23T12:43:46.433
> 
> 标签：python, web-services, tornado, web-frameworks, bottle

我的团队开发了一个使用瓶子作为网络服务的网站。问题是应用程序已经增长，并且瓶子的简单性没有得到支持。曾经简单的事情变得复杂起来。

所以我们决定改成龙卷风。问题是我们不知道瓶子里有多少代码必须改变成龙卷风。

所以这是一个问题：

*   根据你们的经验，从瓶子到龙卷风的转变很容易吗？
*   有必要改很多代码吗？
*   或者你可以将两者合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-29T04:33:30.597

当我的瓶子应用程序的负载开始产生问题时，我发现使用 tornado 作为底层 Web 服务器是一个很好的解决方案。您可以在龙卷风顶部使用瓶子。保留你所有的瓶子代码，然后告诉 tornado 服务器运行它，如下所示：

```
from bottle import Bottle, get
import tornado.wsgi
import tornado.httpserver
import tornado.ioloop

app = Bottle()

@app.get('/')
    return 'my great web page'

if __name__ == "__main__":
    container = tornado.wsgi.WSGIContainer(app)
    server = tornado.httpserver.HTTPServer(container)
    server.listen(port=80)
    tornado.ioloop.IOLoop.instance().start() 
```

除了服务器的启动方式之外，我的瓶子应用程序中没有任何东西需要改变。当然，这个例子是一个非常简单的案例。

PS我意识到这是一个死灵帖子，但是，嘿！

# c++ - 如何在 gtk 中设置包含宽字符的文本？

> ID：13529451
> 
> 赞同：0
> 
> 时间：2012-11-23T12:44:03.627
> 
> 标签：c++, character-encoding, gtk

我正在努力尝试在我的 Gtk/c++ 应用程序中设置一个 wchar_t 数组。由于某些未知原因，Gtk 方法没有支持 wchar_t 数组但仅支持 gchar 数组的重载形式。

我读过几篇文章，这让我想知道它可能是一个可变宽度编码问题，它是在常规 UTF-8 中设置的。我正在尝试做类似的事情：

```
std::wstring propertiesText;

/*
String Manipulation...     
*/

gtk_label_set_text( (GtkLabel*)_propertiesLabel, propertiesText.c_str() ); 
```

正如我所说，编译器抱怨这种方法不支持 wchar_t。

如果你能以任何形式解决我的问题，甚至解释一下这些可变宽度编码/宽字符的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:52:31.530

GTK 构建在[Glib](http://developer.gnome.org/glib/stable/)之上。而且 Glib 已经深深地假设所有字符串都是[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码的。[wchar_t](http://en.wikipedia.org/wiki/Wchar_t#wchar_t)也不是很便携（在某些编译器上，它可能是 16 位，在其他编译器上，它可能是 32 位）。所以你应该避免在你的代码中使用`wchar_t`or 。`std::wstring`顺便说一句，如果您使用 C++ 编码，您可能会对[Gtkmm](http://www.gtkmm.org/en/index.html)感兴趣（然后考虑使用[Glib::ustring](http://developer.gnome.org/glibmm/unstable/classGlib_1_1ustring.html) -s）。

如果您出于某种原因绝对需要使用`std::wstring`，则必须手动显式地与 Glib UTF-8 编码字符串进行（可能是昂贵的）转换。

# regex - 如何使用 Scala 从文本文件中提取电子邮件地址

> ID：13529460
> 
> 赞同：1
> 
> 时间：2012-11-23T12:44:55.607
> 
> 标签：regex, scala

我想知道哪种方法是处理包含电子邮件地址的文本文件并使用 Scala 提取它们的最简单和最优雅的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:46:32.910

这是我自己的尝试：

```
scala> import scala.io.Source.fromFile

scala> val r = """(?i)\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b""".r

scala> fromFile("./mails").getLines.flatMap { r.findAllIn _ }.toList
res29: List[String] = List(address@domain.com, anotheraddress@domain.com, address2@domain.com) 
```

[正则表达式的来源。](http://www.regular-expressions.info/email.html)

# c# - 尽管控制器和/或视图发生变化，但输出没有变化

> ID：13529466
> 
> 赞同：1
> 
> 时间：2012-11-23T12:45:22.470
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, browser

我刚开始使用 ASP.Net MVC，遇到了一个我无法解决的问题。

到目前为止，我已经创建了一个模型、一个控制器和一个视图，并成功地在浏览器中使用纯文本和 ViewBag 将内容显示出来。但是，当我更改例如视图中的任何内容（文本从“Hello”到“Hello！”或其他）并启动项目时，新的更改不存在。

我已经尝试过构建，重建，开始调试，没有调试就开始，没有运气。我什至可以删除控制器和视图中的所有代码，并且什么都不会改变。

但是，如果我重新启动 VS 并再次打开项目，则会应用新的更改。

我究竟做错了什么？

注意：我知道浏览器缓存，在这种情况下这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:07:00.657

尝试使用构建菜单中的“干净”选项。这应该删除项目 bin > Debug 文件夹中的所有内容（或 Bin > Release，如果您选择了该文件夹）。此外，您有时也会停止您的 IIS 开发人员服务器 VS 无法正确关闭它。它应该在您单击构建并运行时启动。如果您的项目在“bin > Debug”文件夹中没有任何内容，或者在您重建时它是“Bin > Release”文件夹，这不是 VS 问题，我会在那时查看浏览器缓存。

干净是你的朋友吗...

# php - 正则表达式查找和替换状态句

> ID：13529473
> 
> 赞同：1
> 
> 时间：2012-11-23T12:46:02.890
> 
> 标签：php, regex

系统消息可能包括以下状态语句：

> 该函数执行了**312**次，最常被进程**Urbanus**使用：**16.06.2012 14:10**。

句子总是在一行中。

我需要：

1.  检索三个粗体部分：
    *   1 到 n 之间的整数（此处：312）
    *   由字符、符号（包括空格但不包括换行符）和数字组成的字符串（此处：Urbanus）
    *   “今天”或“昨天”的日期或 DD.MM.YYYY 中的日期（此处：16.06.2012）
    *   24 小时 hh:mm 格式的时间（此处：14:10）
2.  从系统消息中删除整个句子。

我尝试了以下方法，但它不起作用：

```
$matches = preg_replace(
"/This function was executed ([1-9]|[1-9][0-9]|[1-9][0-9][0-9]) times, most often used by process (.+?): ((Today|Yesterday|[0-9]{2}.[0-9]{2}.[0-9]{4}) ([0-9]{2}:[0-9]{2}))./iU", 
"", 
$message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:50:52.987

1部分：

尝试使用`preg_match_all`. 我也改进了你的模式

```
$message = 'This function was executed 312 times, most often used by process Urbanus: 16.06.2012 14:10.';

$matches = array();
if (preg_match_all("/This function was executed ([1-9]|[1-9][0-9]+) times, most often used by process (\w+?): ((Today|Yesterday|[0-9]{2}.[0-9]{2}.[0-9]{4}) ([0-9]{2}:[0-9]{2}))./i", $message, $matches)) {
    var_dump($matches);
} 
```

# jquery - 从 ajax 动态生成列表视图 - 刷新不起作用

> ID：13529480
> 
> 赞同：0
> 
> 时间：2012-11-23T12:46:17.540
> 
> 标签：jquery, jquery-mobile

我想用 jquery mobile 动态生成一个列表视图。我有这段代码，但 .listview('refresh') 不起作用：

```
<div id="content" data-role="content">       
</div><!-- /content -->

<script type="text/javascript">
    $.ajax({
        type: "GET",
        url: "my.json",
        dataType: "json",
        success: function(articles) {
            var html = '<ul id="hellolist" data-role="listview"><li><h3>One</h3></li><li><h3>Two</h3></li><li><h3>Three</h3></li></ul>';            
            $('#content').append($(html));
            $('#hellolist').listview('refresh');
        }                            
    });
</script> 
```

如果我只生成列表项或者我不使用 ajax，那么刷新会很好地格式化列表视图。

测试#1：效果很好。

```
<div id="content" data-role="content">
    <ul id="hellolist" data-role="listview"> </ul>
</div><!-- /content -->

<script type="text/javascript">
        var html = '<li><h3>One</h3></li><li><h3>Two</h3></li><li><h3>Three</h3></li>';            
        $('#hellolist').append($(html));
        $('#hellolist').listview('refresh');
</script> 
```

测试#2：效果很好。

```
<div id="content" data-role="content">       
</div><!-- /content -->

<script type="text/javascript">
        var html = '<ul id="hellolist" data-role="listview"><li><h3>One</h3></li><li><h3>Two</h3></li><li><h3>Three</h3></li></ul>';            
        $('#content').append($(html));
        $('#hellolist').listview('refresh');
</script> 
```

测试#3：效果很好。

```
<div id="content" data-role="content">
    <ul id="hellolist" data-role="listview"> </ul>       
</div><!-- /content -->

<script type="text/javascript">
    $.ajax({
        type: "GET",
        url: "my.json",
        dataType: "json",
        success: function(articles) {
            var html = '<li><h3>One</h3></li><li><h3>Two</h3></li><li><h3>Three</h3></li>';            
            $('#hellolist').append($(html));
            $('#hellolist').listview('refresh');
        }                            
    });
</script> 
```

有人有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:44:39.640

如果您不希望 HTML 中出现空的 UL 标记，可以尝试调用 .trigger('create") 方法而不是 .listview("refresh");

如果这不起作用，请尝试调用 .listview(); 没有“刷新”参数。

所以，基本上，而不是

```
$('#hellolist').listview('refresh'); 
```

尝试

```
$('#hellolist').trigger('create'); 
```

或者

```
$('#hellolist').listview(); 
```

祝你好运。

编辑：如果事情仍然无法正常工作，您可以尝试在包含新列表的页面上触发创建事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:40:50.477

第一个不起作用，因为您也附加了 UL 标签。尝试仅附加“LI”标签，UL 应该已经在 html 结构中。

```
var html = '<li><h3>One</h3></li><li><h3>Two</h3></li><li><h3>Three</h3></li>'; 
```

在您的 html 中：

```
 <ul data-role="listview" id="" data-split-icon="gear" data-split-theme="a" ></ul> 
```

# jquery - jQuery :last 选择器奇怪的行为

> ID：13529491
> 
> 赞同：0
> 
> 时间：2012-11-23T12:47:16.963
> 
> 标签：jquery, jquery-selectors

在`:last`某些情况下，选择器返回多个元素。[这里有一个 jsfiddle](http://jsfiddle.net/paska/F4CrV/)可以尝试，因为它很难相信！

代码一失败：

```
alert($(".child").find("span:last").length); // -> alerts 3 
```

[jQuery 文档](http://api.jquery.com/last-selector/)：

> 说明：选择最后一个匹配的元素。
> 
> 注意 :last 通过过滤当前 jQuery 集合并匹配其中的最后一个元素来选择单个元素。

我错过了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:50:25.380

当您使用`.find()`and`:first`时`:last`，它会搜索相对于使用 找到*的每个祖先元素*`$('.child')`的第一个和最后一个元素。

由于您有三个`.child`元素，因此您有三个要在其中搜索`span`s 的元素。由于每个`.child`都有一个`span`，`:last`因此在 的上下文中出现这三个中的每一个`.find()`。然后`.find()`将它们全部收集在一起，因此您有三个`span`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:52:40.097

这很正常，我认为您需要的是：

```
alert( $(".child:last").find("span:last").length ); 
```

因为否则只有“孩子”作为选择，您将始终输入第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:04:37.267

剖析您的测试，我们有：

```
var matches = [];
$('.child').each(function(){
    //get collection of all spans in the element
    var collection = $('span',this);

    //NOTE: There is only 1 span in collection at this point

    //get last element
    var match = collection.last();
    matches.push(match);
});
alert(matches.length); //which is obviously 3 
```

# css - 有没有办法只使用 CSS 来改变 HTML DIV 的顺序？

> ID：13529492
> 
> 赞同：7
> 
> 时间：2012-11-23T12:47:19.603
> 
> 标签：css, html

我有一个在任何情况下都无法更改的 .HTML 文件。

我必须设置网页样式，使页面顶部的标题 DIV（100% 宽度），导航 DIV（25% 宽度）出现在标题 DIV 下方的左侧下方，销售 DIV（75% 宽度） ，出现在导航 DIV 的右侧，产品 DIV（100% 宽度）位于销售 DIV 下方。

页脚 DIV 位于页面上所有其他 DIV 下方的最底部，宽度为 100%。

```
<body>
    <div id="wrapper">
        <div id="nav"></div>
        <div id="header"></div>
        <div id="sales"></div>
        <div id="products"></div>
        <div id="footer"></div>
    </div>
</body> 
```

是否可以在不更改 HTML DIV 的逻辑顺序且仅使用 CSS 定位、浮动等的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:20:14.687

如果您可以修复标题高度，那么它非常简单，只需使用 position:absolute 或 #header 的负边距：

```
#wrapper {positioN:relative;padding-top:100px;}
#header {position:absolute;top:0;width:100%;height:100px;}
#nav {display:inline-block;width:25%;}
#sales {display:inline-block;width:75%;}
#products {margin-left:25%;}
#footer {} 
```

[http://jsfiddle.net/FZTj7/1/](http://jsfiddle.net/FZTj7/1/)

并且这些内联块可以切换到浮动，以使#nav 低于产品块的顶部：

```
#wrapper {positioN:relative;margin:20px;padding-top:100px;}
#header {position:absolute;top:0;width:100%;height:100px;}
#nav {float:left;width:25%;}
#sales {float:left;width:75%;}
#products {margin-left:25%;}
#footer {clear:left;} 
```

[http://jsfiddle.net/FZTj7/2/](http://jsfiddle.net/FZTj7/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:20:22.157

`position`应该首先尝试使用 css属性（[截屏视频](http://www.barelyfitz.com/screencast/html-training/css/positioning/)）。

如果 CSS 不足以实现您的设计，另一种可能性是使用 javascript 重新排序 dom 树中的 div。例如， [JQuery具有操作 DOM 节点的助手。](http://jquery.com/)

在任何情况下，这些都是很好的做法，因此应该避免，但如果您无法更改源代码，那么您就只剩下所有这些了。

编辑：

如果您使用 javascript，您可能必须在 div 以正确的顺序排列后重新加载 css。重新加载 css 也可以[使用 javascript](https://stackoverflow.com/questions/2024486/is-there-an-easy-way-to-reload-css-without-reloading-the-page)来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:01:49.010

我知道这并不能回答问题，但我想通知它如此难以实现的原因是因为这是一种不好的做法。

为避免焦点顺序、SEO 或特殊设备（打印机、屏幕阅读器等）出现一些问题：“内容应按有意义的顺序排列”。

看看：[C27：使 DOM 顺序与视觉顺序相匹配](http://www.w3.org/TR/WCAG20-TECHS/C27)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:50:37.610

使用固定位置属性并设置顶部属性值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:50:43.070

这在很大程度上取决于页面的初始结构。您真正拥有的唯一选择是通过将 float:right 或 float:left 应用于相关部分并结合其他 css 规则来浮动 div。

使用 position:* 仅适用于非常有限的情况，我怀疑仅此一项就足以满足您的要求。

# iphone - BLE（蓝牙 4.0）模块名称是什么？

> ID：13529493
> 
> 赞同：0
> 
> 时间：2012-11-23T12:47:24.720
> 
> 标签：iphone, core-bluetooth, bluetooth-lowenergy

我需要知道与 iPhone 4S 兼容的蓝牙模块名称。我在很多文章中读到 iPhone 4S 具有 BLE 并且可以连接到非 iOS 设备。可用的 BLE 模块名称是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:45:25.750

BLE112 模块基于 TI CC2540 无线电芯片，但具有自定义堆栈。到目前为止，记录最好的堆栈是 TI，德州仪器有一个 wiki，非常好的数据包嗅探器[http://processors.wiki.ti.com/index.php/BLE_sniffer_guide](http://processors.wiki.ti.com/index.php/BLE_sniffer_guide)，而且堆栈确实有​​效！Panasonic 模块中使用相同的无线电 - CC2540 或 CC2541（在 DigiKey 或 Mouser 上搜索 CC254）。避免使用 BlueRadios，使用相同的芯片，但他们有自己的堆栈，并且对此非常保密 - 在他们让您访问任何东西之前，他们想要一份发票副本 - 证明您购买了他们的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:00:14.950

Bluegiga 的 BLE112 是目前最流行和最容易找到的模块： [http ://www.mouser.com/ProductDetail/Bluegiga-Technologies/BLE112-A/?qs=sGAEpiMZZMt1Kg3wsyvxe2VNUu4igQjl](http://www.mouser.com/ProductDetail/Bluegiga-Technologies/BLE112-A/?qs=sGAEpiMZZMt1Kg3wsyvxe2VNUu4igQjl)

它适用于 iOS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T19:31:03.950

ConnectBlue 的 OLP425（同样基于 2540）模块 ( [http://support.connectblue.com/display/Dashboard/OLP425](http://support.connectblue.com/display/Dashboard/OLP425) ) 是另一种选择。

他们的开发套件 (CB-OLP425I-26-A) 售价 66 美元，来自 DigiKey [http://www.digikey.com/scripts/DKSearch/dksus.dllDetail&itemSeq=133228274&uq=635089739906227723](http://www.digikey.com/scripts/DKSearch/dksus.dllDetail&itemSeq=133228274&uq=635089739906227723)

您需要一个 TI CC 调试器（来自 DigiKey 的 50 美元）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-02T09:29:16.413

为完整起见，有基于 TI 2540/41 的设计的替代方案。例如，Nordic Semi 有许多可用的[第三方模块](https://www.nordicsemi.com/eng/Products/3rd-Party-Bluetooth-Smart-Modules)。甚至还有一个基于他们芯片的[BLE Arduino 扩展板。](http://redbearlab.com/bleshield/)

# ms-access - Access 2007 对多种数据类型使用一个组合框控件？

> ID：13529496
> 
> 赞同：1
> 
> 时间：2012-11-23T12:47:36.500
> 
> 标签：ms-access, combobox, vba

我需要在 Access 2007 表单上添加基本记录搜索功能。我设置了两个组合框，第一个提供三种不同的搜索选项：按参考、按日期或按员工姓名搜索。然后，此 ComboBox 上的 AfterUpdate 事件将设置第二个 ComboBox 的 RowSource 以向用户显示任何可用的参考资料、日期或员工姓名，以允许他们选择他们想要的。一个 Go 按钮然后打开相关联的表单，其中包含符合其条件的记录。

一开始一切顺利，工作正常，但后来出现了一个错误。如果我选​​择按引用（长）或名称（字符串）搜索，它工作正常，但如果我选择按日期搜索，而可用日期在第二个组合中正确显示，当我尝试选择一个时出现错误：输入的值对此字段无效。这是因为控件只能用于单一数据类型，而我尝试在不同时间使用三种不同的数据类型会造成混淆吗？我没有在控件的属性中设置任何格式。

```
Private Sub btnGo_Click()
    'go clicked so find request being searched for and open form at that request(s)
    If Not IsNull(Me.cboSearchOption) And Not IsNull(Me.cboSearchFor) Then
        'search variables entered so go to specified request
        Select Case [gblOption]
            Case "Reference"
                    DoCmd.OpenForm "frmRequestForInformation", , , "reference = " & Me.cboSearchFor.Value
            Case "Request date"
                    DoCmd.OpenForm "frmRequestForInformation", , , "date_request_received = #" & Me.cboSearchFor.Value  & "#"
            Case "Staff"
                    DoCmd.OpenForm "frmRequestForInformation", , , "signed_by = '" & Me.cboSearchFor.Value & "'"
        End Select
    Else
        MsgBox "Please ensure you have entered search values in both fields", vbOKOnly, "Unable to search"
    End If 
```

结束子

注意：gblOption 包含 cboSearchOption 的值，并在其 AfterUpdate 事件中与 cboSearchFor 的 RowSource 一起设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T17:15:35.697

听起来第二个组合框有一个控制源。Access 正在尝试将该来源设置为 Date 并且不满意。您不需要该组合框的控制源。

我已经重载了组合框，而且没有太多问题，你的其余代码看起来还不错。

# networking - 为什么我们需要MAC地址来传输数据报？

> ID：13529498
> 
> 赞同：1
> 
> 时间：2012-11-23T12:47:48.387
> 
> 标签：networking, ip, protocols, packet

我是计算机网络的新手，不清楚以下问题。

为什么我们需要 Mac 地址来进行实际数据传输。为什么不能通过IP地址的逻辑地址传输数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:51:47.113

IP 从未打算直接封装到电线上。你必须有一个较低层的有线协议。有许多协议用于将数据包封装在电线上，例如 Packet over SONET (POS)、以太网、T1 等......

这些低层协议称为[RFC 791 的“本地网络协议”第 2.1 节：互联网协议](http://www.ietf.org/rfc/rfc791.txt)

```
2.1\.  Relation to Other Protocols

The following diagram illustrates the place of the internet protocol
in the protocol hierarchy:

               +------+ +-----+ +-----+     +-----+  
               |Telnet| | FTP | | TFTP| ... | ... |  
               +------+ +-----+ +-----+     +-----+  
                     |   |         |           |     
                    +-----+     +-----+     +-----+  
                    | TCP |     | UDP | ... | ... |  
                    +-----+     +-----+     +-----+  
                       |           |           |     
                    +--------------------------+----+
                    |    Internet Protocol & ICMP   |
                    +--------------------------+----+
                                   |                 
                      +---------------------------+  
                      |   Local Network Protocol  |  <--- Ethernet
                      +---------------------------+  

                         Protocol Relationships

                              Figure 1.

Internet protocol interfaces on one side to the higher level
host-to-host protocols and on the other side to the local network
protocol. 
```

An Ethernet NIC has its own address (i.e. the mac address), which allows it to discern whether the frame is intended for that specific NIC. IP has a partner protocol called [ARP](http://en.wikipedia.org/wiki/Address_Resolution_Protocol) protocol, which allows you to map between IP addresses and the appropriate ethernet address.

# html - 使用 html 属性的 DOM 惩罚

> ID：13529503
> 
> 赞同：10
> 
> 时间：2012-11-23T12:48:01.583
> 
> 标签：html, performance, dom, dotjs

我正在考虑使用 HTML5 数据属性来更轻松地为我的应用程序编写第三方脚本。所以，考虑两种情况：

1.  页面上有 10'000 个 HTML 元素，例如`<div>Sticker</div>`.
2.  还有其他 10'000 个 HTML 元素，例如`<div data-id="{{id}}" data-category="{{category-id}}">Sticker</div>`.

第二种情况（存在 attrs）可能会影响 DOM / 渲染性能，不是吗？如果有，多少钱？

澄清一下，我不打算自己使用数据属性，只是将它们公开给第三方脚本或浏览器插件。考虑dotjs左右。使用数据属性很容易抓取/抓取页面。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T19:35:24.677

这导致的主要性能命中是在解析 HTML 中。这个时间被捕获并显示在 Chrome DevTools 时间线中，但在伟大的计划中，它非常小。

数据属性不影响渲染树，因此对布局和绘制的影响为零。`querySelector('div')`性能也不会受到影响。这*可能*对性能产生的影响只是您将真相存储在 DOM 中，因此您将执行 DOM manip 来读取值。抓取元素以读取数据（使用`elem.dataset`）总是比从不在 DOM 上的结构中抓取数据要慢。因此，您可以使用 CPU 分析器或时间线来确定应用程序内 manip 的性能开销。真的取决于多少和多久。

**TL；DR：**对渲染/滚动没有影响。对页面加载时间的影响极小。对运行时性能的影响很小。

所有这些事情都可以通过 Chrome DevTools 时间线来衡量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:24:35.800

对于数据属性，有两篇有趣的文章值得阅读：

1- [https://hacks.mozilla.org/2012/10/using-data-attributes-in-javascript-and-css/](https://hacks.mozilla.org/2012/10/using-data-attributes-in-javascript-and-css/)

*   与将数据存储在 JS 数据仓库中相比，读取数据属性的性能很差。使用数据集甚至比使用 getAttribute() 读取数据还要慢。
*   部分浏览器[IE]存在支持问题：[http ://caniuse.com/#feat=dataset](http://caniuse.com/#feat=dataset)
*   在这里您可以找到每个浏览器的性能指标：http: [//jsperf.com/data-dataset](http://jsperf.com/data-dataset)

2- [http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

*   随着数据属性的使用越来越广泛，命名约定发生冲突的可能性也越来越大
*   从性能的角度来看，通过 getAttribute() 访问 DOM 显然比访问存储在数组中的 JS 变量、事件要慢，因此您给出的 JS 游戏使用它来存储值的用例可能永远不会发生：开发人员将使用它来将信息从服务器传输到客户端，但是一旦获取了 DOM，最好将所有值保留在 JS 中以便更快地访问

所以，在我看来，如果你对变量名有兴趣，如果你不关心 IE 中的一些问题（也许只有 IE7<，因为我认为在 9 和 8 中数据属性会起作用），使用数据属性将是一个不错的解决方案。关于性能，您可以尝试上面的链接并查看差异，但我认为最好将值存储在 Javascript 变量中的一致数据结构中。

# android - 我们如何在 android 中为整体布局制作文本样式？

> ID：13529508
> 
> 赞同：1
> 
> 时间：2012-11-23T12:48:16.343
> 
> 标签：android

我是android应用程序开发的新手。

我正在开发一个小型应用程序。在这个应用程序中，我使用了 3 个布局（相对、框架、相对）的 xml 页面之一。

我的要求是我必须将颜色和文本大小样式应用于该 xml 页面中的所有控件。

请帮助我前进。

谢谢你，

再见..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:50:04.943

您可以为应用程序使用全局主题。 [将主题应用于 Activity 或应用程序](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

# c# - 引用类型作为键的 C# 字典问题

> ID：13529509
> 
> 赞同：6
> 
> 时间：2012-11-23T12:48:21.490
> 
> 标签：c#

我有实现如下接口的类

```
class Person : IHuman
{
} 
```

我创建了如下字典

```
Dictionary <IHuman, collection<int>> dic = new Dictionary <IHuman, collection<int>>(); 
```

现在我添加一个键值对，如下所示

```
dic.Add (person, myCollection); 
```

再次，当我将 containsKey 用于“相同的人对象和相同的 HashCode”时，如下所示

```
if (dic.ContainsKey(person))
{
    dic[person] = mynewcollection;
}
else
{
    dic.Add (person, mynewcollection);
} 
```

这里 ContainsKey() 返回 false 并使用相同的 person 对象再创建一个键值对。

我想知道怎么可能......请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T12:50:23.587

是的，这是可能的，但你应该覆盖你的`Equals`班级。否则键（即人）将通过引用进行比较。并且每个新实例都将被认为是不同的，即使所有字段都具有相同的值。`GetHashCode``Person`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T12:50:36.903

基本上，这听起来像是您在压倒一切`GetHashCode()`或不正确。`Equals`如果没有更多信息，我们真的无法判断 - 大概您的`Person`课程中*实际上*有一些代码。

然而，基本上这段代码是愚蠢的：

```
if (dic.ContainsKey(person))
{
    dic[person] = mynewcollection;
}
else
{
    dic.Add (person, mynewcollection);
} 
```

在这两种情况下，字典都会以一个键为...`person`且值为`mynewcollection`... 的条目结束，这与您编写时得到的*完全相同：*

```
dic[person] = mynewcollection; 
```

这将根据需要添加新条目或覆盖现有条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:51:28.493

您需要在您的 person 对象上覆盖 equals 。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms173147.aspx](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

# java - 在没有 unsigned int 的情况下将 CRC16 函数从 C 转换为 JAVA 的问题

> ID：13529510
> 
> 赞同：3
> 
> 时间：2012-11-23T12:48:24.150
> 
> 标签：java, c, crc16

我必须为固件更新创建一个 CRC16 校验和。当我发送此数据时（从十六进制字符串转换为字节 []）

> 020000810000120000000002F001128100000C9462050C9481050C9481050C9481050C9481050C9481050C9481050C9481050C9481050C9481050C9481050C9

我从控制器得到以下 CRC16

> -17514

现在我尝试在 Java 中检查这一点，但我无法获得相同的值。

这是 C 中的原始函数：

```
static uint16_t crc16_update(uint16_t crc, uint8_t a)
{
  crc ^= a;
  for (unsigned i = 0; i < 8; ++i) {
    if (crc & 1)
      crc = (crc >> 1) ^ 0xA001;
    else
      crc = (crc >> 1);
  }
  return crc;
}

static uint16_t crc16(const uint8_t *b, size_t l)
{
  uint16_t crc = 0;
  while (l-- > 0)
    crc = crc16_update(crc, *b++);
  return crc;
} 
```

这是我在java中转换的函数：

```
public static int crc16_update(int crc, int a) {
    crc ^= a;
    for (int i = 0; i < 8; ++i) {
        if ((crc & 1) != 0) {
            crc = (crc >> 1) ^ 0xA001;
        } else {
            crc = (crc << 1);
        }
    }
    return crc;
}

public static int crc16(byte[] bytes) {
    int crc = 0;
    for (byte b:bytes) {
        crc = crc16_update(crc, b);
    }
    return crc;
} 
```

...但它不起作用。它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:38:51.797

```
public static int crc16_update(int crc, int a) {
    crc ^= a;
    for (int i = 0; i < 8; ++i) {
        if ((crc & 1) != 0) {
            crc = (crc >> 1) ^ 0xA001;
        } else {
            crc = (crc << 1); 
```

正如[looper 所提到的](https://stackoverflow.com/questions/13529510/problems-converting-crc16-function-from-c-to-java-without-unsigned-int#comment18523930_13529510)，你`>> 1`在 C 代码中有一个。

```
 }
    }
    return crc;
} 
```

现在对于另一个功能：

```
public static int crc16(byte[] bytes) {
    int crc = 0;
    for (byte b:bytes) {
        crc = crc16_update(crc, b); 
```

`crc16_update`在 Java 中采用 a`int`作为第二个参数，`uint8_t`在 C 中采用 a。当字节`b`设置了其最高有效/符号位时，该值为负数，因此当转换`int`为 的参数时`crc16_update`，符号扩展，因此您得到很多 1-您在 C 中没有的位。

您需要屏蔽除最低有效位 8 之外的所有位，

```
crc16_update(crc, ((int)b) & 0xFF); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:50:03.817

尝试使用`>>>`运算符。

在 Java 中，这是*无符号*移位运算符，而不是`>>`保留符号。

另请注意，它`uint16_t`是 16 位类型，就像`short`在 Java 中一样。在重写在位级别上工作的算法时，尝试使用适当的位长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:52:21.490

你的问题不是整数在java中签名，而是你使用了错误的数据类型。`int`有 32 位，您使用的算法对类型的数据大小很敏感。用于`short`16 位和`byte`8 位。

`>>>`如@Anony-Mousse 所述，在必要时还可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T11:42:00.643

我找到了正确的方法。现在它工作了！我认为问题在于实习生在 short 和 int 之间进行转换。

```
public static int crc16_update(int crc, byte a) {
    crc ^= ((a+128) & 0xff);
    for (int i = 0; i < 8; ++i) {
        if ((crc & 1) != 0) {
            crc = ((crc >>> 1) ^ 0xA001) & 0xffff;
        }
        else {
            crc = (crc >>> 1) & 0xffff;
        }
    }
    return crc;
}

public static short crc16(byte[] bytes) {
    int crc = 0;
    for (byte b : bytes) {
        crc = crc16_update(crc, b);
    }
    return (short) crc;
} 
```

# string - Scala：加入一个可迭代的字符串

> ID：13529512
> 
> 赞同：302
> 
> 时间：2012-11-23T12:48:34.953
> 
> 标签：string, scala

如何通过Scala中的另一个字符串“加入”一个可迭代的字符串？

```
val thestrings = Array("a","b","c")
val joined = ???
println(joined) 
```

我希望此代码输出`a,b,c`（通过“，”连接元素）。

* * *

## 回答 #1

> 赞同：479
> 
> 时间：2012-11-23T12:49:32.633

[mkString](http://www.scala-lang.org/api/2.7.5/scala/Iterable.html#mkString%28String%29)怎么样？

```
theStrings.mkString(",") 
```

存在一个变体，您也可以在其中指定前缀和后缀。

有关使用[foldLeft](http://oldfashionedsoftware.com/2009/07/10/scala-code-review-foldleft-and-foldright/)的实现，请参见[此处](https://web.archive.org/web/20171015150340/http://langref.org/scala/lists/output/join-the-elements-of-a-list-separated-by-commas)，该实现更为冗长，但出于教育的目的，也许值得一看。

# c++ - 为 QTableWidget 创建不对称单元格

> ID：13529514
> 
> 赞同：1
> 
> 时间：2012-11-23T12:48:49.383
> 
> 标签：c++, qt, qtablewidget

是否可以链接 setSpan() -调用或以某种方式使用它，以便跨越区域从第一列的单元格开始到同一列的末尾，然后从第二列的开头继续？

为了澄清，我正在创建一个日历应用程序，其中有一个用于周视图的表（每列代表一个工作日，每行代表一个小时的时间）。我已经成功地使用 setSpan 函数来表示日历中的条目需要多少时间，但是当单个条目跨越多天时我遇到了问题。例如，如果一个条目从星期一晚上 8 点开始，一直持续到星期二凌晨 12 点，那么包含该条目的单元格应该跨越星期一列的最后四个单元格和星期二列的前十二个单元格。

我对 Qt 很陌生，所以我不知道是否有比 setSpan 更好的方法来完成此任务，但我已经广泛搜索了解决我的问题的方法，但没有找到。我想如果我能以某种方式使同一个项目显示在同一个表格的多个单元格中，那将同样有帮助，但我也没有找到一种方法来做到这一点。

# c - C 双倍指数舍入误差

> ID：13529517
> 
> 赞同：0
> 
> 时间：2012-11-23T12:49:02.630
> 
> 标签：c, decimal, exponential

我正在尝试将双精度值转换为指数，但出现舍入错误。

```
int main (unsigned int argc, char **argv)
{
    float a=293.17;
    float b=293.10;
    double ULfreq = 2089.555000;
    double upfreq = 0.0;
    long int t = 0;
    long int u = 0;

    upfreq = ULfreq * 1000000.0;

    printf(" %f, upfreq:%22.16E\n", upfreq, upfreq);

    return 0;
} 
```

当我在 32 位计算机上运行此代码时，我得到以下结果：

```
2089555000.000000, upfreq:2.0895549999999998E+09 
```

在 64 位上运行它会给出正确的答案。

是否可以在 32 位服务器上进行此转换以及如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:57:16.927

这不是舍入误差，而是浮点的表示特征。大多数短分数，例如 1.1，都是以 2 为底的无限级数（如 1/3 = 0.3333...，以 10 为底）。因此，必须将其夹在某个地方。当转换回十进制时，你得到的就是 2.08955499999。

在第一种情况下，您要求 printf 函数将其四舍五入到默认精度 %f，即小数分隔符后的 6 位小数。在第二种情况下，您要求 22 位精度并得到...

# android - Android 开发者控制台，“所有应用程序”和“前 10 名”的百分比是什么意思？

> ID：13529520
> 
> 赞同：0
> 
> 时间：2012-11-23T12:49:16.373
> 
> 标签：android, google-play, android-market-filtering

最近我在生产力类别中上传了一个应用程序。它是一家公司的委托应用程序，该公司现在在 Android 应用程序市场上只有一个应用程序。这是一个免费的应用程序，几周以来人们一直在下载它。所以现在我正在查看统计页面以了解情况如何。

谷歌提供了非常漂亮和清晰的下载图表和数据。然而，统计页面的一个方面仍然有点神秘。

我正在查看“设备上的活动安装”，您可以显示基于 Android 版本、设备、国家/地区、语言、应用程序版本、提供商的数据。例如，当我选择 Country 时，我会看到如下内容：

```
 Your       All apps in
                   app       productivity
Netherlands     18   7,86 %     1,33%
India           15   6,55 %     2,63%
Brazil           9   3,93 %     1,77%
etc.

Top 10 countries for productivity
United States     28,64 %
South-Korea       10,51 %
Japan              8,34 %
etc. 
```

因此，荷兰有 18 次活跃安装，占我应用的所有活跃安装的 7.86%，我了解这一点。但我的问题是：

**“应用程序类别中的所有应用程序”和“应用程序类别的前 10 名*国家/语言/Android 版本*”的百分比是什么意思？**

我查看了 Google 帮助并找到了“管理您的帐户 -> 应用程序统计信息”，但它没有提及所有应用程序和前 10 名数据。顺便说一句，当您选择设备或应用程序版本时，不会显示“所有应用程序”和“前 10 个百分比”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:55:47.250

**生产力**中的所有应用程序：表示“生产力”类别中的所有应用程序（平均）在该国家/地区的安装量都相同。平均“生产力”应用在荷兰的安装量占其安装量的 1.33%。

**生产力排名前 10 的国家/地区版本**：表示“生产力”类别中的应用安装百分比最高的是这些国家/地区。平均“生产力”应用程序的大部分安装量 (28.64%) 在美国。

对于语言和安卓版本也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:53:28.837

意味着他们只是提供关于该类别的统计信息，人们如何使用不同版本的 android 手机下载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:55:03.720

这些值不仅与您的应用相关，还与 Google Play 中的所有应用相关。

# matlab - 使用“lsim”在 MATLAB 中模拟功率放大器

> ID：13529524
> 
> 赞同：1
> 
> 时间：2012-11-23T12:49:43.620
> 
> 标签：matlab, simulink

我有一个带有噪声作为输入的 simulink 模块和一个用于获得有色噪声的滤波器，该模块还包括一个用于放大输出的功率放大器。

> 噪声 --> 数字滤波器 --> 有色噪声 --> 功率放大器 --> 所需输出

我的问题是滤波器是数字的，并且可以使用`filt`命令定义传递函数，但是没有具体的方式来描述**功率放大器**，我想将**功率放大器分成**子块并使用 MATLAB 的控制工具箱组合成一个系统。

1.  我应该使用`s-plan`还是`z-plan`（因为我认为功率放大器不是数字的，但放大器的输入来自以一定速率采样的数字滤波器）

2.  这种方法是否合理，还是我应该寻找其他方法？

3.  我面临的一个主要问题是，在功率放大器模块的末端有一个数学函数（sqrt），当我尝试进行拉普拉斯变换时，我得到一个结果`pi^(1/2)/2*s^(3/2)`，对于 z 变换，它没有计算任何值相反，结果看起来像 `ztrans(n^(1/2), n, z)`

我的代码：

```
[result1, time_out1]=lsim(sys,u,t); %result1 output of the filter

   num_math2 = [2]
   den_math2 = [1 0 0 0]

   tf_sqr = tf(num_math2, den_math2); 

   num_gain = [1]
   den_gain = [1000 0 0 ]
   tf_gain = tf(num_gain, den_gain)

   s1 = series(tf_sqr, tf_gain)

   num_gain_f = [9999]
   den_gain_f = [10000 0 0 ] 

   tf_feedgain = tf(num_gain_f, den_gain_f)
   tf_delay = tf([1], [1 0])
   tf_g = series(tf_feedgain,tf_delay)

   %tf_g_1 = ss(tf_g);

   s2 = feedback(1,tf_g);
   s3 = series (s1,s2);

   %s_final = series(sys,s3);

   [result, time_out]= lsim(s3,result1,t) %power amp lsim
} 
```

# javascript - 如何将文本行分解为 Javascript 确认（）？

> ID：13529525
> 
> 赞同：11
> 
> 时间：2012-11-23T12:49:47.173
> 
> 标签：javascript, jquery, html

我想在 Javascript confirm() 函数中显示文本行：

第一行：¿您真的要取消手术吗？

第二行：所有输入的数据都将丢失');

```
$('#button').click(function () {
    return confirm('¿DO YOU REALLY WANT TO CANCEL THE OPERATION? ALL ENTERED DATA WILL BE LOST');
});​ 
```

演示：http: [//jsfiddle.net/8jEZZ/](http://jsfiddle.net/8jEZZ/)

![在此处输入图像描述](../Images/ee9d000b552a6c7b37737b4fcb44903e.png)

谢谢你。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-23T12:51:25.317

添加`\n`和魔法会发生！

```
$('#button').click(function () {
    return confirm('¿DO YOU REALLY WANT TO CANCEL THE OPERATION? \n ALL ENTERED DATA WILL BE LOST');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:53:17.000

尝试换行符，工作[小提琴](http://jsfiddle.net/gcf9d/)

```
 $('#button').click(function () {
    return confirm('¿DO YOU REALLY WANT TO CANCEL THE OPERATION?\n ALL ENTERED DATA WILL BE LOST');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:53:26.583

使用换行符

```
$('#button').click(function () {
   return confirm('¿DO YOU REALLY WANT TO CANCEL THE OPERATION? \nALL ENTERED DATA WILL BE        LOST');
});​ 
```

# php - 需要删除空间来创建 URL？

> ID：13529526
> 
> 赞同：0
> 
> 时间：2012-11-23T12:49:48.953
> 
> 标签：php, url, hyperlink

我有一个查询拉一堆城市名称。我需要将它们中的每一个都链接起来......链接看起来像这样：www.sitename.com/city-new-york

问题是，如果我将名称设置为名称的链接……某些城市（例如“纽约”）中有一个空格……然后 URL 就无法正常工作。我怎样才能使名称中的空格被替换为“-”，这样它就会显示为“city-new-york”，现在我有这个代码，但它将它链接为“city-new york”

```
<?php foreach ($cities as $city):?>
<li>
<a href="city-<?php echo $city['name']; ?>">
<?php echo $city['name']; ?>
</li>
<?php endforeach;?> 
```

另外，我只需要添加...我别无选择，我必须这样做，因为它是现有脚本的一部分...我不能只在D b。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:54:20.547

查看[urlencode](http://php.net/manual/en/function.urlencode.php)函数。简而言之，您需要对许多字符进行编码，而不仅仅是空格。

> 返回一个字符串，其中包含除 -_ 之外的所有非字母数字字符。已替换为百分号 (%) 后跟两个十六进制数字和编码为加号 (+) 的空格。它的编码方式与 WWW 表单中发布的数据的编码方式相同，即与 application/x-www-form-urlencoded 媒体类型中的方式相同

请注意，您的服务器将自动解码参数。上面对 HTTP 请求进行了编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:51:30.060

该`str_replace`函数允许您替换字符串中的字符并将`strtolower`整个内容变为小写：

```
<?php foreach ($cities as $city):?>
<li>
<a href="city-<?php echo strtolower( str_replace(' ', '-', $city['name']) ); ?>">
<?php echo $city['name']; ?>
</li>
<?php endforeach;?> 
```

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

[http://php.net/manual/en/function.strtolower.php](http://php.net/manual/en/function.strtolower.php)

# php - 为什么 setinterval 会减慢网站速度

> ID：13529528
> 
> 赞同：0
> 
> 时间：2012-11-23T12:49:51.520
> 
> 标签：php, jquery

我正在使用这个简单的功能，但是根据网页打开的时间，它会严重影响网站。当用户刷新或转到另一个页面时，刷新需要很长时间。

我基本上是在为用户提供新帖子。所以时间必须继续运行。

如果我不使用此功能，则网页加载速度很快。尽管这是一个简单的功能，请帮助或建议任何替代方法。

```
$(document).ready(function() {
   setInterval( "timer();", 1000 );
});

function timer(){
    $.post('sendchat2.php', {option:'timer',id= $('#timer').val()}, function(data) {
        $('#timer').html(data);

    })
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:54:25.840

这就是我的做法：

```
$(function () {

    var $timer = $ ( '#timer' );

    (function timeout () {
        $.post( 'sendchat2.php', { option: 'timer', id = $timer.val() }, function ( data ) {
            $timer.html( data );
            setTimeout( timeout, 1000 );  
        });            
    }());

}); 
```

因此，您启动 Ajax 请求，等待响应，将其注入 DOM，然后才*启动*一秒超时，这会重复整个过程。

* * *

一般模式：

```
(function f () {

    async(function () {

        // do work here

        setTimeout( f, delay );

    });

}()); 
```

因此，该函数`f`执行一些异步操作（例如 Ajax 请求）。该操作的回调函数执行一些工作（例如，将 Ajax 响应放入 DOM），并在最后设置一个计时器，该计时器`f`在给定延迟后调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:57:58.023

减速不是因为`setInterval()`，您使用 setInterval 每 1 秒调用一次该函数“计时器”，这应该只会使页面减速 1000（1 秒）。

问题出在`$.post()`，这是一个 Ajax 请求，它究竟做了什么，向脚本 (php) 发送一些信息，然后 php 处理这些信息产生一些输出，然后这个输出再次发送到第一页，并且$.post() 将此信息写入您的 $('#timer') 元素中。

所以减速可能是因为：

*   php脚本是产生延迟的地方
*   从 sendchat2.php 返回的数据非常大，因此延迟了页面加载。

此外，每秒发送一个 ajax 请求也不是很健康，php 脚本可能会过载。您可能想搜索推送方法或轮询方法以正确开发聊天

# c# - 在特定情况下将字节数组转换为字符串

> ID：13529529
> 
> 赞同：4
> 
> 时间：2012-11-23T12:49:52.520
> 
> 标签：c#, python

我在 Python 2.7 中编写了一个小应用程序，它比较了一个 MSSQL 和一个 Sqlite 数据库，但我对二进制数据类型（、、、等）有`binary`一些`varbinary`问题`image`。服务器端是一个用 C# 编写的应用程序，它将数据发送到移动设备，但首先将二进制类型转换为十六进制。
例如：

在数据库中有一个具有数据类型的列`binary(50)`并存储如下信息：

```
0x81B5ED7992000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

C# 应用程序使用以下代码将其转换为十六进制：

```
var sb = new StringBuilder();
sb.Append("'");
byte[] data = Encoding.UTF8.GetBytes(value.ToString());
foreach (byte b in data)
{
    sb.Append(string.Format("{0:x2}", b));
}
sb.Append("'");
valuesStringBuilder.Append(sb.ToString()); 
```

变量包含以下数据：

```
value
{byte[50]}
    [0]: 129
    [1]: 181
    [2]: 237
    [3]: 121
    [4]: 146
    [5]: 0
    [6]: 0
    [7]: 0
    [8]: 0
    [9]: 0
    [10]: 0
    [11]: 0
    [12]: 0
    [13]: 0
    [14]: 0
    [15]: 0
    [16]: 0
    [17]: 0
    [18]: 0
    [19]: 0
    [20]: 0
    [21]: 0
    [22]: 0
    [23]: 0
    [24]: 0
    [25]: 0
    [26]: 0
    [27]: 0
    [28]: 0
    [29]: 0
    [30]: 0
    [31]: 0
    [32]: 0
    [33]: 0
    [34]: 0
    [35]: 0
    [36]: 0
    [37]: 0
    [38]: 0
    [39]: 0
    [40]: 0
    [41]: 0
    [42]: 0
    [43]: 0
    [44]: 0
    [45]: 0
    [46]: 0
    [47]: 0
    [48]: 0
    [49]: 0

value.ToString()
"System.Byte[]"

data
{byte[13]}
    [0]: 83
    [1]: 121
    [2]: 115
    [3]: 116
    [4]: 101
    [5]: 109
    [6]: 46
    [7]: 66
    [8]: 121
    [9]: 116
    [10]: 101
    [11]: 91
    [12]: 93

sb
{'53797374656d2e427974655b5d'}
    Capacity: 32
    Length: 28
    MaxCapacity: 2147483647 
```

在我的 python 应用程序中，我使用的是[pyodbc](http://code.google.com/p/pyodbc/ "谷歌代码上的 pyodbc")库。从 MSSQL 数据库中，我以字节数组的形式获取数据：

```
bytearray(b'\x81\xb5\xedy\x92\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00') 
```

从 Sqlite 数据库中，我可以读取为 unicode 字符串：

```
u'53797374656d2e427974655b5d' 
```

所以我需要将该字节数组转换为与 unicode 字符串完全相同的格式来比较它们。我试图在 Stackoverflow 中找到解决方案，但我总是得到一个与我预期完全不同的字符串。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:58:33.707

这是一个例子：

```
using System;
using System.Data;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;
using System.ComponentModel;
using System.Collections.Generic;

namespace WindowsFormsApplication2
{
public partial class Form1 : Form
{
public Form1()
{
InitializeComponent();
}

private void Form1_Load(object sender, EventArgs e)
{
this.richTextBox1.Text = "I am a string";
}

private void button1_Click(object sender, EventArgs e)
{
if (button1.Text == "Convert to Hex")
{
this.LocalString = this.richTextBox1.Text;

ConvertToByteArray(this.LocalString);

this.button1.Text = "Convert to String";
}
else
{
string HexString = this.richTextBox1.Text.Trim();
HexString = HexString.Replace("'", "");

ConvertToString(HexString);

this.button1.Text = "Convert to Hex";
}
}

private byte[] LocalByteArray = new byte[50];

private string LocalString = string.Empty;

private void ConvertToByteArray(string myString)
{
// Convert the String passed to a Byte Array for Hex Conversion...
this.LocalByteArray = Encoding.UTF8.GetBytes(myString);

// Create a new StringBuilder Reference...
StringBuilder stringBuilder = new StringBuilder();

// Append Start Char...
stringBuilder.Append("'");

// Loop through and append each converted Byte (Converted to Hex) to the String that we are building...
foreach (byte b in this.LocalByteArray)
{
stringBuilder.Append(b.ToString("X2"));
}

// Append End Char...
stringBuilder.Append("'");

// Assign the String to TextBox...
this.richTextBox1.Text = stringBuilder.ToString();

}

private void ConvertToString(string HexString)
{
// Create a new StringBuilder Reference...
StringBuilder stringBuilder = new StringBuilder();

// Loop through and append each converted Byte (Converted from Hex) to the String that we are building...
for (int i = 0; i <= HexString.Length - 2; i += 2)
{
stringBuilder.Append(Convert.ToString(Convert.ToChar(Int32.Parse(HexString.Substring(i, 2), System.Globalization.NumberStyles.HexNumber))));
}

// Assign the String to TextBox...
this.richTextBox1.Text = stringBuilder.ToString();
}
}
} 
```

也许这会对你有所帮助。它有点被黑了，可以整理一下。但给你一个想法。

# javascript - 在浏览器中创建可拖动的表格行和奇怪的效果

> ID：13529530
> 
> 赞同：2
> 
> 时间：2012-11-23T12:49:55.663
> 
> 标签：javascript, jquery, html, jquery-ui

我目前正在处理一些代码，这些代码最终将用于我在 uni 的最后一年项目中，并且我添加了一个将从数据库中填充的表，但我想让行本身可拖动，以便我可以使用它在页面上的元素周围传递信息。

通过使用以下代码，我已经得到了工作：

```
$(document).ready(function(){
        $(".tr_row").draggable({
              helper: function(event) {
                  return $('<div class="drag-row"><table></table></div>')
                .find('table').append($(event.target).closest('tr').clone()).end();
              },
          });
     }); 
```

这是一个例子：[http ://example.faved.co.uk](http://example.faved.co.uk)

我遇到的问题是它的查看位置，如果它是在 chrome 或 safari 中打开的，那么当你拖动它时，它会在你放手之前弄乱表格的外观，如果你在 Firefox 中打开它，那么它可以正常工作并且不做桌子上的任何东西。

我的问题是，为什么这些浏览器会发生这种情况？我能做些什么来阻止它的发生，并让它像在 Firefox 中打开时一样工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:11:52.437

感谢大学的一位同事，我找到了答案，

基本上，如果我将拖动 div 的位置设置为绝对，那么它在所有浏览器中都有效：

# asp.net - 冻结asp.net网格视图列

> ID：13529532
> 
> 赞同：6
> 
> 时间：2012-11-23T12:50:00.420
> 
> 标签：asp.net, gridview, freeze, auto-generate

我如何冻结asp.net网格视图中最初的2 -3最左边的列？这样在水平滚动初始 2 - 3 列冻结时将始终显示。

有答案吗？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T13:43:10.877

是的，似乎可以通过一些 css 魔法，在不同的 z-index 上使用固定和可滚动的列来保持固定在顶部。这附带了一个`overflow:scroll`可能不是 100% 可移植的警告（我已经在 IE 8/9 和 Chrome FWIW 上进行了测试）。

看看这个[jsFiddle here](http://jsfiddle.net/7fuQm/3/)

我用来生成的 ASPX`GridView`如下。

分别注意 css 类`pinned`和`scrollable`固定列和滚动列（适用于标题和项目）

但真正的工作是在 CSS 中完成的。请特别注意，您需要调整列宽以正确对齐左侧的固定 td's / th's。

**aspx**

```
<div id="scrolledGridView">
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
        <Columns>
            <asp:BoundField DataField="ID" HeaderText="Col 1">
                <HeaderStyle CssClass="pinned col1"></HeaderStyle>
                <ItemStyle CssClass="pinned col1"></ItemStyle>
            </asp:BoundField>
            <asp:BoundField DataField="Name" HeaderText="Column 2">
                <HeaderStyle CssClass="pinned col2"></HeaderStyle>
                <ItemStyle CssClass="pinned col2"></ItemStyle>
            </asp:BoundField>
            <asp:BoundField DataField="Description" HeaderText="Column 3">
                <HeaderStyle CssClass="scrolled"></HeaderStyle>
                <ItemStyle CssClass="scrolled"></ItemStyle>
            </asp:BoundField>
            <asp:BoundField DataField="Cost" HeaderText="Column 4">
                <HeaderStyle CssClass="scrolled"></HeaderStyle>
                <ItemStyle CssClass="scrolled"></ItemStyle>
            </asp:BoundField>
        </Columns>
    </asp:GridView> 
```

**css**

```
 #scrolledGridView
    {
        overflow-x: scroll; 
        text-align: left;
        width: 400px; /* i.e. too small for all the columns */
    }

    .pinned
    {
        position: fixed; /* i.e. not scrolled */
        background-color: White; /* prevent the scrolled columns showing through */
        z-index: 100; /* keep the pinned on top of the scrollables */
    }
    .scrolled
    {
        position: relative;
        left: 150px; /* i.e. col1 Width + col2 width */
        overflow: hidden;
        white-space: nowrap;
        min-width: 500px; /* set your real column widths here */
    }
    .col1
    {
        left: 0px;
        width: 50px;
    }
    .col2
    {
        left: 50px; /* i.e. col1 Width */
        width: 100px;
    } 
```

​</p>

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T05:19:36.483

我写的jQuery插件可以固定标题和冻结列，它可以应用于GridView。看图片：

![在此处输入图像描述](../Images/f29e578a691e0a6cccb0203065367b32.png)

看网站： http: [//gridviewscroll.aspcity.idv.tw/](http://gridviewscroll.aspcity.idv.tw/)

支持的浏览器

*   Internet Explorer 7、8（IE 9 兼容性）
*   Internet Explorer 9 (9.0.8112)
*   Windows 7 预览版上的 Internet Explorer 10
*   谷歌浏览器(23.0.1271.64 m)
*   火狐 (16.0.2)
*   苹果 Safari (5.1.7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:46:24.930

演示可用这里

[http://gridviewscroll.aspcity.idv.tw/Demo.aspx](http://gridviewscroll.aspcity.idv.tw/Demo.aspx)

你可以错过剧本吗

```
 <script type="text/javascript" src="../Scripts/gridviewScroll.min.js"></script> 
```

该脚本遵循此处。

您可以修改的屏幕尺寸宽度（44）

别忘了放脚本

```
 <script type="text/javascript">

    (function (n) { jQuery.fn.extend({ gridviewScroll: function (t) { function yt(n, t) { pi(n, t), wi(n, t) } function pi(t, i) { t.find("input").each(function () { var t = n(this)[0].type, f, e; if (t == "checkbox" || t == "radio" || t == "text") { var r = n(this)[0].id, u = n(this)[0].name, r = r.replace("_Copy", ""), u = u.replace("_Copy", ""); n(this)[0].name = u + "_" + i, n(this)[0].id = r + "_" + i, f = n("#" + r), e = n(this); switch (t) { case "checkbox": case "radio": e.change(function () { var t = n(this).is(":checked"); f.attr("checked", t) }); break; case "text": e.change(function () { var t = n(this).val(); f.val(t) }) } } }) } function wi(t, i) { t.find("select").each(function () { var t = n(this)[0].id, r = n(this)[0].name, t = t.replace("_Copy", ""), r = r.replace("_Copy", ""), u, f; n(this)[0].name = r + "_" + i, n(this)[0].id = t + "_" + i, u = n("#" + t), f = n(this), f.change(function () { var n = this.selectedIndex; u.prop("selectedIndex", n) }) }) } function bi() { var a = l.attr("id") + "Freeze", o, y, v, h, b, c, k, e, s, d, f, t, g; for (document.getElementById(a) ? it = n("#" + a) : (it = l.clone(), it.attr("id", a), it.css({ position: "absolute", width: "", height: "100%", top: 0, left: 0, zIndex: li }), yt(it, "freezeheader"), it.appendTo(tt)), it.show(), o = it.children().eq(0), o.css({ width: "", height: "100%" }), o.find("td").each(function () { n(this)[0].style.display = "" }), y = o.children().eq(0), ki(), v = w[0].length, f = 0; f < i.headerrowcount; f++) for (t = 0; t < v; t++) (h = w[f][t], h != "RS" && h != "CS") && (b = parseInt(h.split(":")[1]), y.children().eq(f).children().eq(b)[0].style.display = t < ct ? "" : "none"); for (c = r.attr("id") + "Freeze", document.getElementById(c) ? p = n("#" + c) : (p = r.clone(), p.attr("id", c), p.css({ position: "absolute", width: "", top: 0, left: 0, zIndex: li }), yt(p, "freezeitem"), e = p.children().eq(0).children().eq(0), k = e.attr("id") + "Freeze", e.attr("id", k), p.appendTo(u)), e = p.children().eq(0).children().eq(0), e.css({ width: "" }), s = e.children().eq(0), s.find("td").each(function () { n(this)[0].style.display = "" }), d = s.children().length, f = i.headerrowcount; f < d; f++) for (t = 0; t < v; t++) t < ct ? s[0].rows[f].cells[t].style.display = "" : (g = s[0].rows[f].cells[t], g.style.display = "none"); o.width() < i.width - i.railsize ? (it.show(), p.show(), p.height(r.height())) : (it.hide(), p.hide()) } function ki() { var r = 0, n, t; for (ct = 0, n = 0; n < w[0].length; n++) { if (t = w[0][n], t == "RS" || t == "CS") { ct++; continue } if (i.freezesize == r) return ct; r++, ct++ } } function di() { for (var r = a.children().length, u = gi() + 1, t, n = i.headerrowcount; n < r; n++) t = a[0].rows[n].cells[0].children[0], t.style.height = u + "px" } function gi() { for (var e = a.children().eq(i.headerrowcount).children().length, t = 0, f, r, u, n = 0; n < e; n++) f = a.children().eq(i.headerrowcount).children().eq(n), r = f.children().eq(0), r[0].style.height = "auto", u = r[0].offsetHeight, u > t && (t = u); return t } function nr() { var it = f.attr("id") + "VerticalRail", r, ut, l, a, t, p, w, d, tt; document.getElementById(it) ? o = n("#" + it) : (o = n(nt).css({ background: i.railcolor, width: i.railsize + "px", position: "absolute", zIndex: ft }), o.attr("id", it), u.append(o), t = { right: 0 }, o.css(t), o.mousedown(function (t) { clearInterval(e); var i = n(this).offset(), r = t.clientY - i.top + n(document).scrollTop(), u = c.offset().top - i.top, f = c.height() + u; r < u && g(-1, !1, !0), r > f && g(1, !1, !0), e = window.setInterval(function () { var r = t.clientY - i.top + n(document).scrollTop(), u = c.offset().top - i.top, f = c.height() + u; r < u && g(-1, !1, !0), r > f && g(1, !1, !0) }, 200) }), o.mouseup(function () { clearInterval(e) }), o.mouseout(function () { clearInterval(e) })), r = f.attr("id") + "VerticalBar", document.getElementById(r) ? c = n("#" + r) : (c = n(nt).css({ background: i.barcolor, width: i.barsize + "px", position: "absolute", zIndex: ft }), c.attr("id", r), ut = { right: (i.railsize - i.barsize) / 2 }, c.css(ut), u.append(c), c.draggable({ axis: "y", containment: o, start: function () { n(this).css({ backgroundColor: i.barhovercolor }) }, stop: function () { n(this).css({ backgroundColor: i.barcolor }) }, drag: function () { g(0, !1) } })), l = f.attr("id") + "Vertical_TIMG", document.getElementById(l) ? v = n("#" + l) : (v = n(pt).css({ height: i.arrowsize, position: "absolute", zIndex: ft, top: 0 }), v.attr("id", l), v.attr("src", i.varrowtopimg), u.append(v), t = { right: 0 }, v.css(t), v.mousedown(function () { clearInterval(e), g(-1, !1, !0), e = window.setInterval(function () { g(-1, !1, !0) }, 200) }), v.mouseup(function () { clearInterval(e) }), v.mouseout(function () { clearInterval(e) })), a = f.attr("id") + "Vertical_BIMG", document.getElementById(a) ? y = n("#" + a) : (y = n(pt).css({ height: i.arrowsize, position: "absolute", zIndex: ft }), y.attr("id", a), y.attr("src", i.varrowbottomimg), u.append(y), t = { right: 0 }, y.css(t), y.mousedown(function () { clearInterval(e), g(1, !1, !0), e = window.setInterval(function () { g(1, !1, !0) }, 200) }), y.mouseup(function () { clearInterval(e) }), y.mouseout(function () { clearInterval(e) })), p = f.attr("id") + "HorizontalRail", document.getElementById(p) ? s = n("#" + p) : (s = n(nt).css({ background: i.railcolor, height: i.railsize + "px", position: "absolute", zIndex: ft }), s.attr("id", p), u.append(s), s.mousedown(function (t) { clearInterval(e); var i = n(this).offset(), r = t.clientX - i.left + n(document).scrollLeft(), u = h.offset().left - i.left, f = h.width() + u; r < u && rt(-1, !0), r > f && rt(1, !0), e = window.setInterval(function () { var r = t.clientX - i.left + n(document).scrollLeft(), u = h.offset().left - i.left, f = h.width() + u; r < u && rt(-1, !0), r > f && rt(1, !0) }, 200) }), s.mouseup(function () { clearInterval(e) }), s.mouseout(function () { clearInterval(e) })), w = f.attr("id") + "HorizontalBar", document.getElementById(w) ? h = n("#" + w) : (h = n(nt).css({ background: i.barcolor, height: i.barsize + "px", position: "absolute", zIndex: ft }), h.attr("id", w), u.append(h), h.draggable({ axis: "x", containment: s, start: function () { n(this).css({ backgroundColor: i.barhovercolor }) }, stop: function () { n(this).css({ backgroundColor: i.barcolor }) }, drag: function () { rt() } })), d = f.attr("id") + "Horizontal_LIMG", document.getElementById(d) ? b = n("#" + d) : (b = n(pt).css({ width: i.arrowsize, position: "absolute", zIndex: ft, top: 0 }), b.attr("id", d), b.attr("src", i.harrowleftimg), u.append(b), b.mousedown(function () { clearInterval(e), rt(-1, !0), e = window.setInterval(function () { rt(-1, !0) }, 200) }), b.mouseup(function () { clearInterval(e) }), b.mouseout(function () { clearInterval(e) })), tt = f.attr("id") + "Horizontal_RIMG", document.getElementById(tt) ? k = n("#" + tt) : (k = n(pt).css({ width: i.arrowsize, position: "absolute", zIndex: ft }), k.attr("id", tt), k.attr("src", i.harrowrightimg), u.append(k), k.mousedown(function () { clearInterval(e), rt(1, !0), e = window.setInterval(function () { rt(1, !0) }, 200) }), k.mouseup(function () { clearInterval(e) }), k.mouseout(function () { clearInterval(e) })) } function tr() { var n, t; o.css({ height: u.outerHeight() - i.railsize - i.arrowsize * 2, top: i.arrowsize }), c.css({ top: i.arrowsize }), s.css({ width: u.outerWidth() - i.railsize - i.arrowsize * 2, top: u.outerHeight() - i.railsize, left: i.arrowsize }), h.css({ top: u.outerHeight() - (i.railsize + i.barsize) / 2, left: i.arrowsize }), n = Math.max(r.outerHeight() / r[0].scrollHeight * o.outerHeight(), i.minscrollbarsize), c.css({ height: n + "px" }), t = Math.max(r.outerWidth() / r[0].scrollWidth * s.outerWidth(), i.minscrollbarsize), h.css({ width: t + "px" }), n + i.arrowsize * 2 >= r.outerHeight() ? (o.hide(), c.hide(), v.hide(), y.hide(), fi = !0) : (o.show(), c.show(), v.show(), y.show()), t + i.arrowsize * 2 >= r.outerWidth() ? (s.hide(), h.hide(), b.hide(), k.hide()) : (s.show(), h.show(), b.show(), k.show()), o.is(":hidden") && (tt.css({ width: ut }), l.css({ width: ut }), u.css({ width: ut }), r.css({ width: ut }), s.css({ width: ut - i.arrowsize * 2 }), t = Math.max(r.outerWidth() / r[0].scrollWidth * s.outerWidth(), i.minscrollbarsize), h.css({ width: t + "px" }), s.css({ top: u.height() - i.railsize }), h.css({ top: u.height() - (i.railsize + i.barsize) / 2 })), s.is(":hidden") && (o.is(":hidden") ? (u.css({ height: f.height() }), r.css({ height: f.height() })) : (u.css({ height: ot }), r.css({ height: ot })), o.css({ height: ot - i.arrowsize * 2 }), n = Math.max(r.outerHeight() / r[0].scrollHeight * o.outerHeight(), i.minscrollbarsize), c.css({ height: n + "px" })), v.css({ top: 0 }), y.css({ top: o.outerHeight() + i.arrowsize }), b.css({ top: r.outerHeight() }), k.css({ top: r.outerHeight(), left: s.outerWidth() + i.arrowsize }), i.arrowsize == 0 && (v.hide(), y.hide(), b.hide(), k.hide()) } function g(n, t, u) { var f = n, e, s, l; (t || u) && (e = 0, e = t ? n * parseInt(i.wheelstep) / 100 : n, f = parseInt(c.css("top")) + e * (r.outerHeight() / r[0].scrollHeight * o.outerHeight() - 1), s = r.outerHeight() - c.outerHeight() - i.arrowsize, f = Math.min(Math.max(f, i.arrowsize), s), c.css({ top: f + "px" })), l = (parseInt(c.css("top")) - i.arrowsize) / (o.outerHeight() - c.outerHeight()), f = l * (r[0].scrollHeight - r.outerHeight()), r.scrollTop(f), i.freezesize == 0 || h.is(":hidden") || (f + r.outerHeight() > r[0].scrollHeight && (f = r[0].scrollHeight - r.outerHeight()), p.scrollTop(f)) } function rt(n, t) { var u = n, f, e, o; t && (f = n, u = parseInt(h.css("left")) + f * (r.outerWidth() / r[0].scrollWidth * s.outerWidth() - 1), e = r.outerWidth() - h.outerWidth() - i.arrowsize, u = Math.min(Math.max(u, i.arrowsize), e), h.css({ left: u + "px" })), o = (parseInt(h.css("left")) - i.arrowsize) / (s.outerWidth() - h.outerWidth()), u = o * (r[0].scrollWidth - r.outerWidth()), u + l.outerWidth() > l[0].scrollWidth && (u = l[0].scrollWidth - l.outerWidth()), r.scrollLeft(u), l.scrollLeft(u) } function ir() { var u, r, t; if (st.show(), i.headerrowcount > 1) for (t = 1; t < i.headerrowcount; t++) a.children().eq(t).show(); if (lt.find("td").each(function (t) { n(this).children().eq(0).css("width", "auto"), ht.children().eq(t).children().eq(0).css("width", "auto"), n(this).children().eq(0).css("width", "auto") }), u = et.children().eq(0), r = [], lt.find("td").each(function (t) { var i = n(this)[0].childNodes[0].offsetWidth + 1; r[t] = i, n(this).children().eq(0).css({ width: i }) }), rr(), lt.find("td").each(function (n) { for (var s = r[n], f, e, o, t = 0; t < i.headerrowcount; t++) (f = w[t][n], f != "RS" && f != "CS") && (e = f.split(":")[0], e != "N") && (o = f.split(":")[1], u.children().eq(t).children().eq(o).children().eq(0).css({ width: s })) }), st.hide(), i.headerrowcount > 1) for (t = 1; t < i.headerrowcount; t++) a.children().eq(t).hide() } function rr() { for (var n = [], t = 0; t < i.headerrowcount; t++) w[t] = [], n[t] = 0; return lt.find("td").each(function (t) { for (var o, e, f, u, r = 0; r < i.headerrowcount; r++) if (w[r][t] != "RS" && w[r][t] != "CS") { if (o = a.children().eq(r).children().eq(n[r]), n[r]++, e = o.attr("rowspan"), f = o.attr("colspan"), e = e ? parseInt(e) : 1, f = f ? parseInt(f) : 1, e != 1) for (u = r; u < e; u++) w[u][t] = "RS"; if (f != 1) { for (u = 1; u < f; u++) w[r][u + t] = "CS"; w[r][t] = "N:" + (n[r] - 1) } f == 1 && (w[r][t] = "Y:" + (n[r] - 1)) } }), w } function ur() { a.find("td").each(function () { for (var r = n(this)[0].childNodes.length, i, t = 0; t < r; t++) i = n(this)[0].childNodes[t], i.tagName == "DIV" && alert(i.style.position); n(this)[0].innerHTML = "<div>" + n(this)[0].innerHTML + "<\/div>" }) } var i = n.extend({ width: 500, height: 300, railcolor: "#F0F0F0", barcolor: "#CDCDCD", barhovercolor: "#606060", bgcolor: "#F0F0F0", freezesize: 0, arrowsize: 0, varrowtopimg: "", varrowbottomimg: "", harrowleftimg: "", harrowrightimg: "", headerrowcount: 1, railsize: 15, barsize: 15, wheelstep: 20, minscrollbarsize: 30 }, t), e = null, hi = !0, a = null, st = null, lt = null, at = !1, fi = !1, nt = "<div><\/div>", pt = "<img />", tt = null, u = null, l = null, r = null, o = null, c = null, v = null, y = null, s = null, h = null, b = null, k = null, it = null, p = null, et = null, ht = null, f = null, wt = null, d = null, w = [], ci = 0, li = 0, ft = 0, ct = -1, f = n(this), bt, kt, dt, gt, ni, ti, ii, oi, ot, vt, si, vi, ui, yi; if (f[0] && (a = f.children().eq(0), !(a.children().length < 2))) { n.browser.msie && jQuery.browser.version == "7.0" || f.css({ position: "relative" }); var ut = i.width, fr = i.height, ei = f.attr("id") + "Wrapper"; if (document.getElementById(ei) ? wt = n("#" + ei) : (wt = n(nt), wt.attr("id", ei), f.parent().wrap(wt)), bt = f.attr("id") + "PanelHeader", document.getElementById(bt) ? tt = n("#" + bt) : (tt = n(nt), tt.attr("id", bt), f.parent().before(tt)), tt.css({ background: i.bgcolor }), kt = f.attr("id") + "PanelItem", document.getElementById(kt) ? u = n("#" + kt) : (u = n(nt), u.attr("id", kt), f.parent().before(u)), u.css({ background: i.bgcolor }), dt = f.attr("id") + "PanelHeaderContent", document.getElementById(dt) ? (l = n("#" + dt), l.scrollLeft(0), l.scrollTop(0)) : (l = n(nt).css({ background: "#FFFFFF" }), l.attr("id", dt), l.appendTo(tt)), gt = f.attr("id") + "PanelItemContent", document.getElementById(gt) ? (r = n("#" + gt), r.scrollLeft(0), r.scrollTop(0)) : (r = n(nt).css({ background: "#FFFFFF" }), r.attr("id", gt), r.appendTo(u), f.parent().appendTo(r)), st = a.children().eq(0), st.attr("id", f.attr("id") + "Header"), lt = a.children().eq(i.headerrowcount), ni = f.attr("id") + "Copy", document.getElementById(ni) ? et = n("#" + ni) : (et = f.clone().children().remove().end(), et.attr("id", ni), et.appendTo(l), ur(), hi = !1), ti = st.attr("id") + "Copy", document.getElementById(ti)) ht = n("#" + ti); else if (ht = st.clone(!1), ht.attr("id", ti), yt(ht, "Copy"), ht.appendTo(et), i.headerrowcount > 1) for (ii = 1; ii < i.headerrowcount; ii++) oi = a.children().eq(ii).clone(!1), yt(oi, "Copy"), oi.appendTo(et); if (ot = fr - tt.height(), vt = f.attr("id") + "PagerBottom", document.getElementById(vt)) d = n("#" + vt), d[0] && d.width(ut); else { var ri = a.children().eq(a.children().length - 1), er = ri.children().eq(0), ai = er.children().eq(0).children().eq(0); ai[0] != null && ai[0].tagName == "TABLE" && (document.getElementById(vt) || (d = n(nt), d.attr("id", vt), d.addClass(ri[0].className), u.after(d), ri.children().eq(0).appendTo(d), d.width(ut)), ri.remove()) } if (d && d[0] && (ot -= d.height()), u.css({ position: "relative", overflow: "hidden", width: ut, height: ot }), r.css({ overflow: "hidden", width: u.outerWidth() - i.railsize, height: ot - i.railsize, zIndex: ci }), tt.css({ position: "relative", overflow: "hidden", width: ut }), l.css({ overflow: "hidden", width: u.outerWidth() - i.railsize, zIndex: ci }), ir(), i.freezesize != 0 && di(), nr(), tr(), i.freezesize == 0 || s.is(":hidden") ? (si = l.attr("id") + "Freeze", vi = r.attr("id") + "Freeze", document.getElementById(si) && (n("#" + si).hide(), n("#" + vi).hide())) : bi(), !hi) return r.hover(function () { at = !0 }, function () { at = !1 }), i.freezesize == 0 || s.is(":hidden") || p.hover(function () { at = !0 }, function () { at = !1 }), ui = function (n) { if (at && !o.is(":hidden")) { var n = n || window.event, t = 0; n.wheelDelta && (t = -n.wheelDelta / 120), n.detail && (t = n.detail / 3), g(t, !0), n.preventDefault && !fi && n.preventDefault(), fi || (n.returnValue = !1) } }, yi = function () { window.addEventListener ? (this.addEventListener("DOMMouseScroll", ui, !1), this.addEventListener("mousewheel", ui, !1)) : document.attachEvent("onmousewheel", ui) }, yi(), this } } }), jQuery.fn.extend({ gridviewScroll: jQuery.fn.gridviewScroll }) })(jQuery)

        var windowSize;

        // Don't try this - $(window).load(function ()
        function pageLoad() {
            windowSize = $(window).width();
            gridviewScroll();
        }

        $(window).resize(function () {
            windowSize = $(window).width();
            gridviewScroll();
        });

        function gridviewScroll() {
            $('#<%=GridView1.ClientID%>').gridviewScroll({
                width: windowSize-44,
                height: 500,
                freezesize: 3
            });
        } 
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T06:07:17.677

Please see this, its also resolved this query that i found.

[http://www.bluelemoncode.com/post/2011/12/30/Freezing-gridview-header-and-columns-while-scrolling-rest-of-the-content.aspx](http://www.bluelemoncode.com/post/2011/12/30/Freezing-gridview-header-and-columns-while-scrolling-rest-of-the-content.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-19T12:12:08.720

```
<asp:GridView ID="grdTaskDataCat1" OnRowCommand="grdTaskDataCat1_RowCommand"
              OnSorting="grdTaskDataCat1_Sorting" AutoGenerateColumns="false" 
              ShowHeaderWhenEmpty="true" AllowSorting="true" Width="1800px" 
              DataKeyNames="ID" runat="server" 
              OnRowDataBound="grdTaskDataCat1_RowDataBound">
   <Columns>
     <asp:TemplateField HeaderText="Sr No" Visible="false">
        <ItemTemplate>
          <asp:TextBox ID="txtId" Visible="false" ReadOnly Style="width: 30%" Text='<%# Bind("ID")%>' runat="server"></asp:TextBox>
        </ItemTemplate>
        <%-- <ItemStyle Width="3%" />--%>
     </asp:TemplateField>
     <asp:TemplateField HeaderText="Sr No" Visible="true" ItemStyle-Width="20px">
       <ItemTemplate>
         <asp:Label ID="lblSerialNoCat1" runat="server"></asp:Label>
       </ItemTemplate>
     </asp:TemplateField> 
```

# jquery - document.addForm.submit() 在 Firefox 中不起作用

> ID：13529533
> 
> 赞同：1
> 
> 时间：2012-11-23T12:50:02.993
> 
> 标签：jquery

addForm 用作表单 id，但表单提交在 Firefox 中不起作用。

```
$(function() {
 var date = $("#todo_due").val();
 var text = $("#todo_due").val();
  if (date && text) {
    document.addForm.submit();
  } else if (!date && !text) {
    new Messi('{$LANG.main.todo_validation}', {ldelim}title: '{$LANG.error.error}', titleClass: 'info', modal: true{rdelim});
  } else if (!text) {
    new Messi('{$LANG.main.todo_validation_desc}', {ldelim}title: '{$LANG.error.error}', titleClass: 'info', modal: true{rdelim});
  } else {
    new Messi('{$LANG.main.todo_validation_date}', {ldelim}title: '{$LANG.error.error}', titleClass: 'info', modal: true{rdelim});
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:51:17.360

利用

```
document.getElementById('addForm').submit(); 
```

或者

```
$('#addForm').submit(); 
```

对于跨浏览器解决方案。

Internet Explorer 添加了一个名为的全局变量，`addForm`因为您有一个具有此 ID 的元素，但这是不正确且非标准的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:56:47.263

您似乎使用 jquery。您可以通过以下方式轻松提交表单：

```
$("#addForm").submit(); 
```

# asp-classic - 带参数的 CLASSIC ASP INSERT 语句

> ID：13529537
> 
> 赞同：2
> 
> 时间：2012-11-23T12:50:15.267
> 
> 标签：asp-classic, ado

我必须维护一个 ASP 3.0 网站...

我想保护 sql 语句。

我可以用这段代码保护的选择语句：

```
set cmd = Server.createObject("adodb.command")

cmd.commandText = "select from Foo where id=?"

set cmd.activeConnection = someConnection

set rs = cmd.execute(rows_affected, Array(42)) 
```

但是当我用更新或插入语句替换选择时，我无法让它工作。

谁能帮我？

我正在尝试的代码是：

```
sqlS1 = "INSERT into users (nome2) values (?)"

arParams = 1

set cmd = createobject("ADODB.Command") 

cmd.CommandText = sqlS1 

cmd.ActiveConnection = session("bdc")

cmd.Execute(,arParams,adExecuteNoRecords) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:22:37.563

如果你去掉括号，那应该运行：

```
cmd.Execute , arParams, adExecuteNoRecords 
```

或者

```
cmd.Execute recs, arParams, adExecuteNoRecords
Response.write recs & " updated" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:56:01.633

只是为了添加到 Remou 的答案，请注意，如果您愿意（例如，如果您习惯于 C/Java 类型语言），可以使用括号，方法是在 sub 调用前加上`Call`关键字：

`cmd.Execute recs, arParams, adExecuteNoRecords`

或者

`Call cmd.Execute(recs, arParams, adExecuteNoRecords)`

# oracle - Oracle 错误 ORA-04093，无法引用长数据类型

> ID：13529546
> 
> 赞同：2
> 
> 时间：2012-11-23T12:50:43.363
> 
> 标签：oracle, plsql, oracle11gr2

我正在尝试在 addcomments 表上创建一个触发器，该表包含一个长列

```
CREATE OR REPLACE TRIGGER careventCommentssysc
AFTER INSERT 
ON addcomments
FOR EACH ROW
DECLARE
BEGIN
        cargetcomments(:NEW.addcode, :NEW.addcomment,  'INSERTING');
END careventCommentssysc; 
```

当我尝试编译时，我收到以下错误。

```
ORA-04093, references to column of type LONG are not allowed in triggers. 
```

但我不能将表格列类型更改为长。

如果有人早些时候处理过这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:19:48.650

**编辑：***我认为这可以通过简单的复合触发器来完成，因为你正在使用`ORACLE 11g`，因此这对你有用。不需要任何环回 dblinks。干杯*

```
CREATE OR REPLACE TRIGGER careventCommentssysc FOR
   INSERT
   ON t
   COMPOUND TRIGGER
   l_new_long        LONG;

   TYPE addcomment_nt
   IS
      TABLE OF addcomments%ROWTYPE
         INDEX BY SIMPLE_INTEGER;

   v_addcomment_nt   user_id_nt;
   idx               SIMPLE_INTEGER := 0;
   -- AFTER EACH ROW Section:

   AFTER EACH ROW
   IS
   BEGIN
      idx := idx + 1;
      v_addcomment_nt (idx).addcode := :NEW.addcode;
   END
   AFTER EACH ROW;

   -- AFTER STATEMENT Section:

   AFTER STATEMENT
   IS
   BEGIN
      FOR i IN v_addcomment_nt.FIRST .. v_addcomment_nt.LAST
      LOOP
         EXECUTE IMMEDIATE 'select addcomment 
                            from addcomments 
                            where addcode = :1'
            INTO   l_new_long
            USING v_addcomment_nt (i).addcode;

         cargetcomments (v_addcomment_nt (i).addcode,
                         :l_new_long,
                         'INSERTING');
      END LOOP;
   END
   AFTER STATEMENT;

END careventCommentssysc; 
```

# android - 如何将拍摄的照片保存到特定文件夹？

> ID：13529547
> 
> 赞同：3
> 
> 时间：2012-11-23T12:50:48.760
> 
> 标签：android, file, camera, directory, photo

> **可能重复：**
> [如何将相机结果作为数据文件夹中的 uri 获取？](https://stackoverflow.com/questions/10042695/how-to-get-camera-result-as-a-uri-in-data-folder)

我正在拍摄 Picure，并将其保存在默认文件夹中。

这是我的`PictureCallBack()`功能：

```
PictureCallback myPictureCallback_JPG = new PictureCallback(){

        public void onPictureTaken(byte[] arg0, Camera arg1) {       

          Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());

          OutputStream imageFileOS;

          try {

           imageFileOS = getContentResolver().openOutputStream(uriTarget);
           imageFileOS.write(arg0);
           imageFileOS.flush();
           imageFileOS.close();

           Toast.makeText(MainActivity.this,"Image saved: " + uriTarget.toString(),Toast.LENGTH_LONG).show();

          } catch (FileNotFoundException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
          } catch (IOException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
          }

          camera.startPreview();
         }
    }; 
```

如何将其保存在特定文件夹中，例如`"/sdcard/MyCustonApp/Photos/"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:00:18.083

添加到您的代码

```
 String path = Environment.getExternalStorageDirectory().toString();
    File myNewFolder = new File(path + "/your/folder");
    myNewFolder.mkdir();
    File file = new File(path + "/your/folder", name    + ".png");
    OutputStream imageFileOS = new FileOutputStream(file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:01:03.510

这就是我检查要保存捕获的图像的文件夹是否存在、是否存在或创建文件夹（如果不存在）的方式。

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"MyCustomApp/Photos");
else
    cameraFolder = StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "MyCustomApp/Photos/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
Uri uri = Uri.fromFile(photo);

startActivityForResult(getCameraImage, 1); 
```

这段代码会将捕获的图像保存到指定的文件夹，名称为**camera_snap**和扩展名：**.jpg**

注意：这需要您在`Manifest`文件中声明以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:16:09.277

```
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
imagesFolder.mkdirs(); 
File image = new File(imagesFolder, "image.jpg");
Uri uriSavedImage = Uri.fromFile(image);
imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage); 
```

看看这个链接。[如何将Android相机中的图像保存到特定文件夹？](https://stackoverflow.com/questions/7266572/how-to-save-images-from-camera-in-android-to-specific-folder).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:03:20.980

试试这个简单的代码并将图像存储在一个文件夹中：

```
String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/req_images");
myDir.mkdirs();
Random generator = new Random();
int n = 10000;
n = generator.nextInt(n);
String fname = "Image-" + n + ".jpg";
file = new File(myDir, fname);
Log.i(TAG, "" + file);
if (file.exists())
file.delete();
try {
FileOutputStream out = new FileOutputStream(file);
bm.compress(Bitmap.CompressFormat.JPEG, 90, out);
out.flush();
out.close();
} catch (Exception e) {
e.printStackTrace();
} 
```

其中 bm 表示位图图像名称

# iphone - 增加 scrollViewDidScrollToTop 的计数

> ID：13529548
> 
> 赞同：0
> 
> 时间：2012-11-23T12:50:52.603
> 
> 标签：iphone, ios, uiscrollview

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    int scrollCount = 0;

    scrollin.text = [NSMutableString stringWithFormat:@"didScroll - %i",scrollCount];

    scrollCount++;
} 
```

总是得到 didScroll - 0; 它不应该是公司吗？因为每次滚动结束时都会调用此方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:53:53.767

`scrollCount`每次调用该方法时都会初始化 ，这意味着它将始终为 0，因此显示 0。如果您希望永远`scrollCount`存在于您的函数中，您应该将其设为静态。你可以这样做：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    static int scrollCount = 0;
    scrollin.text = [NSMutableString stringWithFormat:@"didScroll - %i",scrollCount];
    scrollCount++;
} 
```

这样，`scrollCount`只会被初始化一次，并且每次调用该方法时都会递增。

另一种方法是跟踪`scrollCount`某种类变量，但我认为这是不好的做法，如果你只在方法中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:54:59.470

在 .h 中定义 `int scrollCount;`它并分配它

```
- (void)viewDidLoad
  {
   scrollCount = 0;
  } 
```

删除 int 滚动计数；从您使用它的地方；

# java - 在 Excel 工作表中计算具有相似数据的重复行

> ID：13529552
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:51:12.743
> 
> 标签：java, apache-poi

我有一张包含下面提到的数据类型的 Excel 表。

```
 01-Aug-2012   EST213  Sowmya  Shivashankar    11  0   11  4   0   LOP
  01-Aug-2012   EST101  Prashanth  P    12  8   20  5   5.28    0     Half-day
  08-Aug-2012   EST213  Sowmya  Shivashankar    11  0   11  4   0   LOP 
```

在这里，我为一名员工提供了一天的数据。像这样，我一个月有大约 3000 行数据。我需要计算需要为特定员工计算每月多少 LOP 或半天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:00:21.340

我会这样做：

1.  创建一个`HashMap<String, List>`
2.  逐行解析XLS文件
3.  在一行中查找`EmployeeName`和（`LOP`或）`Half-day`
4.  如果`Integer`地图中没有员工姓名，请创建一个新对，添加您的`LOP`or `Half-Day`。如果有`List`，添加一条新记录。
5.  完成 XLS 解析后，从地图中获取员工姓名并计算存储在数组中的键。

或者你可以创建一个像

```
{ 
  Integer lop;
  Integer halfDay;
} 
```

而不是列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:40:35.027

您可以尝试在员工及其每月条目之间使用映射。
**注意：**这几乎是完整的代码，但是您需要自己完成某些部分，例如解析行数或月份数

```
class EmployeeEntry {
    String date;
    String name;
    String surname;
    // other fields representing excel columns

    TYPE_OF_DAY typeOfday;

    public static enum TYPE_OF_DAY {
        LOP, HALF_DAY, OTHER
    }

    public String getEmployeeID() {
        // you may return name+surname or some unique ID
        return name + " " + surname;
    }

    public Integer getMonth() {
        String monthStr = date.split("-")[1];
        return asMonthNumber(monthStr);
        // implement asMonthNumber to convert Aug --> 08
    }
}

public class A {

    private Map<String, Map<Integer, List<EmployeeEntry>>> entries;

    public void parseExcel(HSSFSheet sheet) {
        entries = new HashMap<String, Map<Integer, List<EmployeeEntry>>>();
        Iterator<Row> iter = sheet.iterator();
        // for every row
        while (iter.hasNext()) {
            Row row = iter.next();
            // parse will call getString, getNumber etc of the current row
            EmployeeEntry entry = parse(row);
            Map<Integer, List<EmployeeEntry>> userMonthlyEntriesMap = getOrCreate(entry
                    .getEmployeeID());
            List<EmployeeEntry> monthlyEntries = getOrCreate(
                    userMonthlyEntriesMap, entry.getMonth());
            monthlyEntries.add(entry);
        }
    }

    public int countLOP(String employeeID, Integer monthNum) {
        int counter=0;

        Map<Integer, List<EmployeeEntry>> map = entries.get(employeeID);
        if (map != null) {
            List<EmployeeEntry> list = map.get(monthNum);
            if (list != null) {
                for (EmployeeEntry entry : list) {
                    if (entry.typeOfday == EmployeeEntry.TYPE_OF_DAY.LOP) {
                        counter++;
                    }
                }
            }
        }
        return counter;
    }

    private List<EmployeeEntry> getOrCreate(
            Map<Integer, List<EmployeeEntry>> userMonthlyEntriesMap,
            Integer month) {
        List<EmployeeEntry> monthlyEntries = userMonthlyEntriesMap.get(month);
        if (monthlyEntries == null) {
            monthlyEntries = new LinkedList<EmployeeEntry>();
            userMonthlyEntriesMap.put(month, monthlyEntries);
        }
        return monthlyEntries;
    }

    public Map<Integer, List<EmployeeEntry>> getOrCreate(String emplID) {
        Map<Integer, List<EmployeeEntry>> entryList = entries.get(emplID);
        if (entryList == null) {
            entryList = new HashMap<Integer, List<EmployeeEntry>>();
            entries.put(emplID, entryList);
        }
        return entryList;
    }
} 
```

# javascript - 防止在键盘显示 iOS 6 上滚动

> ID：13529554
> 
> 赞同：13
> 
> 时间：2012-11-23T12:51:14.677
> 
> 标签：javascript, iphone, html, ios6, mobile-website

我遇到了一个奇怪的问题。我目前正在制作一个仅适用于 iOS 6 的使用 HTML5 和 CSS3 的移动网络应用程序。

但是，当`input`元素获得焦点并显示软键盘时，窗口会滚动，以便输入不会被键盘遮挡（即使在任何情况下都不会遮挡）。

我已经阅读了 SO 并通过 Google 可以添加以下内容来防止这种行为（在 UIWebView 中查看时）：

```
input.onfocus = function () {
    window.scrollTo(0, 0);
    document.body.scrollTop = 0;
} 
```

但是，似乎在 iOS 6 中，即使窗口最初滚动到`0,0`，然后再次滚动到焦点元素的中心。有没有其他人遇到过这个问题，他们知道 iOS 6 的修复方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-12T19:47:14.370

我也碰到了这个问题。以下适用于 iOS 6：

```
<input onfocus="this.style.webkitTransform = 'translate3d(0px,-10000px,0)'; webkitRequestAnimationFrame(function() { this.style.webkitTransform = ''; }.bind(this))"/> 
```

基本上，由于 Safari 会根据文本框的垂直位置决定是否滚动页面，因此您可以通过暂时将元素移动到屏幕顶部上方然后在焦点事件完成后再次返回来欺骗它。

缺点是元素消失了几分之一秒。如果您想解决这个问题，您可以在原始位置动态插入原始元素的克隆，然后在`webkitRequestAnimationFrame`回调中将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:04:43.310

会不会是时间问题？

尝试在超时中将其包装起来，以确保它在本机事件触发后触发。

```
input.onfocus = function () {
    setTimeout(function() {
        window.scrollTo(0, 0);
        document.body.scrollTop = 0;
    }, 50)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T15:25:42.573

**更新：** 虽然公认的解决方案适用于 UIWebView，但更新更快的 WKWebView 已经到来。如果您使用最新版本的 iOS 版 Cordova，您可以为 iOS 9 设备启用 WKWebView，但默认情况下，视图仍会向上滚动。要解决这个问题，只需添加键盘插件（不再需要 CSS hack）：

在终端中添加 Cordova 插件：

```
cordova platform add ios@4
cordova plugin add cordova-plugin-wkwebview-engine --save
cordova plugin add cordova-plugin-keyboard --save 
```

在 Cordova 的 config.xml 中设置 iOS 首选项以使用 WKWebView

```
<platform name="ios">
    <feature name="CDVWKWebViewEngine">
        <param name="ios-package" value="CDVWKWebViewEngine" />
    </feature>
    <preference name="CordovaWebViewEngine" value="CDVWKWebViewEngine" />
</platform> 
```

然后在 Cordova 的 config.xml 中插入 iOS 键盘首选项

```
 <preference name="KeyboardShrinksView" value="true" />
    <preference name="DisallowOverscroll" value="true" /> 
```

Cordova 文档中列出了有关 iOS 首选项的更多详细信息： [https ://cordova.apache.org/docs/en/5.4.0/guide/platforms/ios/config.html](https://cordova.apache.org/docs/en/5.4.0/guide/platforms/ios/config.html)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-10T02:56:46.583

将`input`的字体大小样式设置为`1em`或更高。

`<input type=text style="font-size:1.2em">`

# dart - 如何在 Dart Editor 中打开命令行工具？

> ID：13529556
> 
> 赞同：1
> 
> 时间：2012-11-23T12:51:18.650
> 
> 标签：dart, dart-editor

您用来编写诸如“pub install”之类的东西的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:50:09.080

AFAIK Dart Editor 不提供集成外壳。您必须打开系统上可用的任何外壳，或安装您选择的外壳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:20:54.433

如果您只是在寻找 pub 集成，您可以从工具菜单中找到`pub install`和。`pub update`

# c# - c#设置TextBox的FontSize

> ID：13529563
> 
> 赞同：27
> 
> 时间：2012-11-23T12:51:48.270
> 
> 标签：c#, textbox, font-size

如何在 c# 中设置 TextBox 的字体大小。我可以获得当前大小，但不允许设置它。

```
public static Form client;
((TextBox)client.Controls[0]).Font.size = 16; 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-23T12:54:24.303

您必须设置`Font`属性。`Size`是 的只读属性`Font`。

```
var textBox = (TextBox)client.Controls[0];
textBox.Font = new Font(textBox.Font.FontFamily, 16); 
```

# android - 蓝牙服务器和广播接收器

> ID：13529564
> 
> 赞同：4
> 
> 时间：2012-11-23T12:51:53.853
> 
> 标签：android

我的应用程序拥有一个具有特定 的开放式蓝牙服务器套接字`UUID`，以便另一台设备连接和传输文件。我对`BroadcastReceiver`.

在我的扩展类中`Activity`，我想检查蓝牙适配器的状态。但是我的 BroadcastReceiver 永远不会被触发。我尝试以这种方式使用 BroadcastReceiver：

```
public class MainClass extends Activity {
  public void onCreate(Bundle b) {
  super.onCreate(b);
  IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
  registerReceiver(mReceiver, filter);
}

private final BroadcastReceiver mReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();

            Log.w("BroadcastReceiver:  ", "Inside!");

            if (action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
                final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE, BluetoothAdapter.ERROR);
                switch (state) {
                case BluetoothAdapter.STATE_OFF:
                    Log.d("Bluetooth Receiver", "State-off");
                    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                    startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                    break;
                case BluetoothAdapter.STATE_TURNING_OFF:
                    Log.d("Bluetooth Receiver", "State turning off");
                    break;
                case BluetoothAdapter.STATE_ON:
                    Log.d("Bluetooth Receiver", "State-on");
                    btCom = new BluetoothCommunicator(MainClass.this, lastCases, nist);
                    btCom.startServer();
                    break;
                case BluetoothAdapter.STATE_TURNING_ON:
                    Log.d("Bluetooth Receiver", "State turning on");
                    break;
                }
            }
        }
    };

} 
```

我有一个关于州的问题：

*   状态**STATE_ON**是否仅在运行时打开蓝牙时才触发？或者我可以在打开蓝牙的情况下启动我的应用程序，这个事件会被触发吗？`btCom.startServer()`因为如果打开蓝牙，我想启动该方法

我还读到我需要在我的清单文件中注册广播接收器，如果 BroadcastReceiver 在扩展 Activity 的类中，我该怎么做？如果我在一个单独的类中有这个 BroadcastReceiver 我会这样做

例如说我的包名是`com.workbench`我的类名是`BluetoothReceiver`

清单看起来像这样：

```
 <receiver android:name="com.workbench.BluetoothReceiver"></receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T18:08:37.053

`BluetoothAdapter.ACTION_STATE_CHANGED`当蓝牙适配器的状态改变时发送广播动作。只有当适配器的状态发生变化时，您才会看到这一点。

您可以通过调用来检查蓝牙适配器的当前状态`BluetoothAdapter.isEnabled()`。

`BroadcastReceiver`如果您想在`Intent`应用程序未运行时获得广播，您只需在清单中注册。您实现`BroadcastReceiver`（作为匿名类）的方式不可能在清单中注册它。

# mysql - 基于来自另一个字段的 LIKE 构建 MySQL 表

> ID：13529567
> 
> 赞同：2
> 
> 时间：2012-11-23T12:52:01.493
> 
> 标签：mysql, sql, sql-like

我不确定这是否可以单独使用 SQL 查询，但我基本上想创建一个像这样的表，但在课程类型字段上有一个条件，根据什么存储“进一步”或“更高”作为数字“课程类型”是：

```
CREATE TABLE IF NOT EXISTS `courses_index` (
     `id` int(11) NOT NULL AUTO_INCREMENT,
      `title` text COLLATE utf8_unicode_ci NOT NULL,
      `url` text COLLATE utf8_unicode_ci NOT NULL,
      `further` int(1) NOT NULL,
      `higher` int(1) NOT NULL,
      PRIMARY KEY (`id`),
      FULLTEXT `index` (title, url, course_type)
) AS SELECT title, url, course_type FROM `courses` 
```

我`course_type`在课程表上的字段是一个标准文本字段，其中将包含一个字符串，例如`"Higher, Further"`or `"Further"`。

我想能够说如果这个`course_type`字段是`LIKE %higher%`那么行的值是`1`。同样，如果值为`course_type`is`LIKE %higher%further`那么两个字段都存储为 a`1`等。

这是否可以通过创建临时表或巧妙的 MySQL 查询来实现？

提前谢谢了

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:02:55.677

以下应该有效：

```
CREATE TABLE ...
AS 
SELECT title, 
       url, 
       CASE
         WHEN course_type LIKE '%Further%' THEN 1
         ELSE 0
       END as further,
       CASE
         WHEN course_type LIKE '%Higher%' THEN 1
         ELSE 0
       END as higher
  FROM `courses` 
```

编辑修复损坏的语法

另请参阅[此 sqlfiddle](http://sqlfiddle.com/#!2/1f8bf/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:24:10.033

根据@beny23 的回答，我最终得到了以下可行的方法：

```
CREATE TABLE IF NOT EXISTS `courses_index` (
     `id` int(11) NOT NULL AUTO_INCREMENT,
      `title` text COLLATE utf8_unicode_ci NOT NULL,
      `url` text COLLATE utf8_unicode_ci NOT NULL,
      `course_type` int(2),
      PRIMARY KEY (`id`),
      FULLTEXT `index` (title, url, course_type)) 
AS
SELECT title, 
       url, 
       course_type,
       CASE
         WHEN course_type LIKE '%higher%further%' THEN 3
         WHEN course_type LIKE '%higher%' THEN 2
         WHEN course_type LIKE '%further%' THEN 1
         ELSE 0
       END
  FROM `courses` 
```

# symfony - 如何在一个操作中执行两个存储库功能

> ID：13529576
> 
> 赞同：0
> 
> 时间：2012-11-23T12:52:44.800
> 
> 标签：symfony, doctrine-orm, twig, query-builder

我有个问题。我想执行这个

```
$events1 = $em->getRepository('AfishaBundle:Event')->getEvents($this->getCurrentRegion(),'2012-11-12');

//$event_repo->clear();`

$events2 = $em->getRepository('AfishaBundle:Event')->getEvents($this->getCurrentRegion(),'2012-11-13');

foreach($events2 as $event){
            die(var_dump($event->getSeanses()->toArray()));
        } 
```

但是当我不使用时，结果返回第一个日期 =“2012-11-12” `$event_repo->clear();`

没关系，但我在使用**Twig**渲染时遇到了问题。我可以在没有`clear()`方法的情况下执行这个吗？如果我不能，请发表评论。

为了完整起见，这是`getEvents()`代码：

```
 public function getEvents($region, $date){

    $qb = $this->_em->createQueryBuilder();
    $qb
            ->select('e,s')
            ->from('AfishaBundle:Event', 'e')
            ->leftJoin('e.seanses', 's')
            ->andWhere('s.date = :date')
            ->andWhere('s.region = :region')
            ->setParameter('region', $region)
            ->setParameter('date',$date)
    ;

     return $qb->getQuery()->getResult();
} 
```

`Event`这是和之间的关系`EventSeans`：

```
 /**
* @ORM\OneToMany(
 *     targetEntity="EventSeans",
 *     cascade={"persist", "remove", "merge"},
 *    mappedBy="event"
 *  )
 *  @ORM\OrderBy({"time"= "ASC"})
 */
protected $seanses; 
```

最后，这是`EventSeans`实体中的日期字段

```
/**
 *  @ORM\Column(name="date", type="date")
 */
protected $date; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:17:17.383

请考虑一下，很难理解您的要求！我知道当您将两个不同的日期传递给`getEvents()`函数时，您总是会得到相同的结果。

您当前发布的代码似乎还可以，但是您要做的不是选择具有该功能的`Event`实体。`getEvents()`

如果您准备好来自 QueryBuilder 的查询，则您选择的`EventSeans`实体是 $region 和 $date 是您提供的实体！但是您既不选择实体，也不涉及实体之间的`Event`关系。`Event``EventSeans`

也许对您的问题有更多详细信息和更好的解释可能会有所帮助。

* * *

**编辑** 我认为你不应该同时选择`Event`and ，因为一旦你从 repo 中检索到，你就可以从实体`EventSeanses`中获取所有`EventSeanses`对象。但我建议选择所有满足条件的对象，然后直接从对象中获取关联对象。干净又容易。`Event``Event``EventSeanses``Event``EventSeanses`

```
public function getEventSeanses($region, $date){    
    $qb = $this->_em->createQueryBuilder();
    $qb
            ->select('s')
            ->from('AfishaBundle:EventSeanses', 's')
            ->andWhere("s.date = ':date'")
            ->andWhere('s.region = :region')
            ->setParameter('region', $region)
            ->setParameter('date',$date)
    ;

     return $qb->getQuery()->getResult();
} 
```

请注意，在 SQL 中，您应该将字符串（如日期）放在下面`'date'`，而不是简单地`date`.

然后，在您的控制器中，您应该执行以下操作：

```
$events = array();
$region=...
$date=....//year-month-day
$eventseansesList =   $em->getRepository('AfishaBundle:EventSeanses')->getEventSeanses($region,$date);
foreach($eventseansesList as $es){
  $events[] $es->getEvent(); // this function retrieve the Event associated to the EventSeanses
} 
```

PS：您`$seanses`按“时间”`Event`而不是“日期”排序，这很奇怪！

# jquery - 将跨度标签放在数据标签中？

> ID：13529579
> 
> 赞同：-3
> 
> 时间：2012-11-23T12:52:54.480
> 
> 标签：jquery, html

有没有办法在数据标签中添加跨度？

```
 <a href="#" data-content="<span>Vivamus </span>sagittis.">Printer 127.0.13.123</a> 
```

输出显示 Vivamus sagittis 而不是制作 span 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:56:56.493

尝试`data-html="true"`

```
<a href="#" data-html="true" data-content="<span>Vivamus </span>sagittis.">
  Printer 127.0.13.123</a> 
```

# magento - Magento 税收四舍五入问题

> ID：13529580
> 
> 赞同：8
> 
> 时间：2012-11-23T12:52:55.537
> 
> 标签：magento, magento-1.9

我在 Magento 中遇到了增值税的奇怪四舍五入问题。我的产品设置是 * 含 20% 增值税的产品价格是 183.59

我在购物篮中添加了 30 件商品，成本为 30 * 183.59 = 5507.70。我可以在购物篮/结帐中看到这个值，这很好。如果我的篮子里只有 1 件商品，那没关系。

最终增值税也是 5507.70 * 20 / 120 = 917.95，但我得到 918.00

你知道如何解决这个问题或者我去哪里看看吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T13:40:24.070

最后我找到了解决方案。我将 System > VAT > Tax Calculation Method Based on 从 Unit price 更改为 Row Total 并且它有效，更多详细信息[在这里](http://docs.nostresscommerce.com:8090/display/~jaromir.muller/2012/11/23/How+to+avoid+tax+rounding+issue+in+basket+and+checkout)

我发现的问题在`core/store`模型中。我不得不重写`roundPrice`方法并在那里改变舍入精度。

```
public function roundPrice($price)
{
   return round($price, 4);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-30T14:47:46.737

# 信息

Magento 中基于先前舍入操作 delta 的舍入价格。

> [app/code/core/Mage/Tax/Model/Sales/Total/Quote/Tax.php:1392](https://github.com/OpenMage/magento-mirror/blob/1.9.3.7/app/code/core/Mage/Tax/Model/Sales/Total/Quote/Tax.php#L1392) [app/code/core/Mage/Tax/Model/Sales/Total/Quote/Subtotal.php:719](https://github.com/OpenMage/magento-mirror/blob/1.9.3.7/app/code/core/Mage/Tax/Model/Sales/Total/Quote/Subtotal.php#L719)

```
protected function _deltaRound($price, $rate, $direction, $type = 'regular')
{
    if ($price) {
        $rate = (string)$rate;
        $type = $type . $direction;
        // initialize the delta to a small number to avoid non-deterministic behavior with rounding of 0.5
        $delta = isset($this->_roundingDeltas[$type][$rate]) ? $this->_roundingDeltas[$type][$rate] : 0.000001;
        $price += $delta;
        $this->_roundingDeltas[$type][$rate] = $price - $this->_calculator->round($price);
        $price = $this->_calculator->round($price);
    }
    return $price;
} 
```

有时，由于高增量计算错误 ( `$this->_calculator->round($price)`)，这可能会导致错误。例如，出于这个原因，某些价格可能会在**±1 美分**的范围内变化。

# 解决方案

为避免这种情况，您需要提高增量计算的准确性。

改变

```
$this->_roundingDeltas[$type][$rate] = $price - $this->_calculator->round($price); 
```

至

```
$this->_roundingDeltas[$type][$rate] = $price - round($price, 4); 
```

需要在两个文件中进行更改：

> [app/code/core/Mage/Tax/Model/Sales/Total/Quote/Tax.php:1392](https://github.com/OpenMage/magento-mirror/blob/1.9.3.7/app/code/core/Mage/Tax/Model/Sales/Total/Quote/Tax.php#L1392) [app/code/core/Mage/Tax/Model/Sales/Total/Quote/Subtotal.php:719](https://github.com/OpenMage/magento-mirror/blob/1.9.3.7/app/code/core/Mage/Tax/Model/Sales/Total/Quote/Subtotal.php#L719)

**不要修改或破解核心文件！重写！**

该解决方案在不同版本的 Magento 1.9.x 上进行了测试，但也许这将在早期版本中工作。

# 附言

改变`roundPrice`函数，如下图，可以解决舍入误差问题，但会导致其他问题（例如，某些平台要求四舍五入到小数点后两位）。

> [app/code/core/Mage/Core/Model/Store.php:995](https://github.com/OpenMage/magento-mirror/blob/bea006a3fe4c87dc87a262e379ba879c7c4f8805/app/code/core/Mage/Core/Model/Store.php#L995)

```
public function roundPrice($price)
{
    return round($price, 4);
} 
```

# iphone - 用故事板连接表视图和视图控制器之间的插座

> ID：13529582
> 
> 赞同：0
> 
> 时间：2012-11-23T12:53:13.877
> 
> 标签：iphone, ios, xcode, xcode4, ios6

我正在尝试通过拖放连接*表视图*和*viewcontroller.h之间的插座。*我正在使用[本](http://www.techotopia.com/index.php/An_iOS_6_iPhone_Twitter_Integration_Tutorial_using_SLRequest)教程。我的问题发生在以下说明中：

*   选择 Table View 对象并使用 View -> Assistant Editor -> Show Assistant Editor 菜单选项显示 Assistant Editor。
*   按住 Ctrl 键单击视图中的 Table View 对象，然后将结果行拖到 Assistant Editor 面板中的 @interface 指令正下方的区域。
*   松开线路后，将出现连接面板。将连接配置为名为*tweetTableView*的 Outlet ，然后单击 Connect 按钮。

我没有选择连接两者*（通过拖放）*。我以前用 webview 做过，一切正常。*拖动在情节提要*本身中也适用于我，但在我拖动到*viewcontroller.h*文件时不起作用。也许是我的*故事板设置*；如下：

标签栏控制器（起点）

*   导航控制器 ---> 表格视图控制器
*   视图控制器（内部带有 webview）

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:53:34.193

你有一个标签栏？然后，您必须将另一个视图控制器（比如说 viewSecondViewController.h）关联到第二个标签栏。

![在此处输入图像描述](../Images/e4c8fe16b58558e4277c767cbec2de4f.png)

在那个“ViewSecondViewController.h”中，您可以拖动和链接......

# spring-batch - Spring Batch 2.1.8 多步并行执行有限制

> ID：13529583
> 
> 赞同：2
> 
> 时间：2012-11-23T12:53:13.950
> 
> 标签：spring-batch

我正在尝试使用 Spring 批处理中的单个作业并行执行多个步骤。这是我的配置的外观。

```
<job id="gmegdc1" xmlns="http://www.springframework.org/schema/batch" >
        <split id="splitStep" task-executor="taskExecutor">
            <flow>
                <step id="step1" parent="simpleStep1">
                    <tasklet ref="gdcTasklet1" task-executor="taskExecutor1" throttle-limit="6" />          
                </step>
            </flow>
            <flow>
                <step id="step2" parent="simpleStep2">
                    <tasklet ref="gdcTasklet2" task-executor="taskExecutor2" throttle-limit="6" />
                </step>
            </flow>
            <flow>
                <step id="step3" parent="simpleStep3">
                    <tasklet ref="gdcTasklet3" task-executor="taskExecutor3" throttle-limit="6" />
                </step>
            </flow>
            <flow>
                <step id="step4" parent="simpleStep4">
                    <tasklet ref="gdcTasklet4" task-executor="taskExecutor4" throttle-limit="6" />
                </step>
            </flow>
        </split>    
    </job>

<bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
        <property name="corePoolSize" value="25" />                  
        <property name="maxPoolSize" value="25" />        
    </bean>

<bean id="taskExecutor1" class="org.springframework.core.task.SimpleAsyncTaskExecutor"/>
    <bean id="taskExecutor2" class="org.springframework.core.task.SimpleAsyncTaskExecutor"/>
    <bean id="taskExecutor3" class="org.springframework.core.task.SimpleAsyncTaskExecutor"/>
    <bean id="taskExecutor4" class="org.springframework.core.task.SimpleAsyncTaskExecutor"/> 
```

我想为每个步骤运行 6 个线程。使用这种配置，每次我开始作业时，一次只运行 8 个不同步骤组合的线程。由于这个原因，一些步骤没有被执行，我也得到了所有线程运行的潜力。不知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T19:56:22.183

回答可能为时已晚。但可能会帮助其他有同样问题的人。

如果您已将 Spring Batch 管理项目与您的 Spring Batch 应用程序集成，那么正是该管理员将线程数限制为 8。我删除了 Spring Batch 管理依赖项并将我的 Spring Batch 制作为一个简单的 Spring Web 应用程序，现在线程数越过 8 并达到 maxpoolsize。

另一件要提到的事情是看一下 tasklet 标签中的油门限制配置。

# php - Symfony2 表单：在每个元素附近添加删除图标

> ID：13529584
> 
> 赞同：3
> 
> 时间：2012-11-23T12:53:15.993
> 
> 标签：php, symfony, doctrine-orm, symfony-forms

我想在我的表单中显示来自实体的元素列表。在每个元素附近，它应该是一个删除按钮，它将从实体中删除特定元素。

你知道我怎么能做到这一点吗？

示例：3 个实体：Person、Affiliation 和 PersonAffiliations。一个人有 0 个或多个从属关系。假设我为该人创建了 10 个从属关系，现在我想删除其中一个。如何创建表单以显示特定人员的所有从属关系列表，并在每个从属关系附近显示一个小的删除图标。单击此图标时，应删除此人的从属关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:05:21.013

您必须嵌入一[组表单](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)并使用大量 Javascript。它在*Symfony2 Cookbook*中！

按照上面链接中提供的标签的示例进行操作！这很简单，您必须为每个要删除的子表单放置一个带有“ *remove* ”或“ *x* ”字符串的锚点，并使用 Javascript 处理删除。

表单插入是通过使用您需要添加的子表单的*原型*来完成的，但似乎您不需要插入。

请注意，在您的示例中，您必须创建一个空`Person`对象并向其添加预定义`Affiliation`对象的列表，`FormBuilder`以便能够呈现与`Affiliation`. 然后您可以使用 Javascript 删除子表单。当然，通常最好定义专用的表单类型。

* * *

如果您只需要取消选择与主实体相关的实体列表，则可以使用[实体字段类型](http://symfony.com/doc/2.0/reference/forms/types/entity.html)，并且可以使用扩展选项将其呈现为复选框列表。您的控制器将绑定实体和相关关系，因此 Symfony 将取消之前的关系。

# android - 我如何使用上下文类android

> ID：13529592
> 
> 赞同：0
> 
> 时间：2012-11-23T12:53:38.813
> 
> 标签：android, opengl-es

我正在在线阅读有关如何在 android 应用程序中加载纹理并将它们传递给着色器的教程。我找到了这个方法

```
 public static int loadTexture(final Context context, final int resourceId)
{
    final int[] textureHandle = new int[1];

    GLES20.glGenTextures(1, textureHandle, 0);

    if (textureHandle[0] != 0)
    {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = false;   // No pre-scaling

        // Read in the resource
        final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);

        // Bind to the texture in OpenGL
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);

        // Set filtering
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

        // Load the bitmap into the bound texture.
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Recycle the bitmap, since its data has been loaded into OpenGL.
        bitmap.recycle();
    }

    if (textureHandle[0] == 0)
    {
        throw new RuntimeException("Error loading texture.");
    }

    return textureHandle[0];
} 
```

但我该如何使用它？调用这个方法的时候我把什么作为参数？？？它返回的整数是什么？我想根据我对 opengl 的了解，它返回的 int 只是纹理的“数字”，以防我加载许多纹理。如果可以的话，纹理句柄。但是剩下的呢？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:27:10.777

ANDROID 和上下文 如果您查看各种 Android API，您会注意到其中许多都将 android.content.Context 对象作为参数。您还会看到 Activity 或 Service 通常用作上下文。这是可行的，因为这两个类都是从 Context 扩展而来的。

上下文到底是什么？根据 Android 参考文档，它是一个代表各种环境数据的实体。它提供对本地文件、数据库、与环境关联的类加载器、包括系统级服务在内的服务等的访问。在本书中，以及在您使用 Android 进行的日常编码中，您会看到上下文频繁地传递。出自：《Android in Practice》一书。

所以上面的方法应该在 mainactivity 类中调用，第一个参数是 `getApplicationContext()`, `getContext()`,`getBaseContext()`或`this`

resourceID 表示您希望使用的资源文件。就我而言，我在 res/drawable 文件夹中有一个 BMP 图像，这可以通过编写

```
R.res.myimagename.bmp 
```

and this simple code returns a simple integer that is the location of the resource file so in fact resourceID. In other terms it somewhat like a relative path to the resource file

# drawing - 从 CLI 在光栅图像上绘制一个点？

> ID：13529593
> 
> 赞同：0
> 
> 时间：2012-11-23T12:53:39.383
> 
> 标签：drawing, imagemagick, command-line-interface

如何使用 ImageMagick（或其他一些 linux CLI 工具）在图像上画一个点？我试过：

```
convert tension_00.png -pointsize 100 -fill black -draw 'point 10,10' tension_001.png 
```

我没有给出错误，但我在处理后的图像上找不到点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:48:13.783

哦，我用 pygames（来自 python 脚本）解决了它：

```
import pygame
img = pygame.image.load('tension_00.png')
pygame.draw.circle(img, (1, 1, 1), (600,600), 50) # Surface, color, pos, radius, width=0
pygame.image.save(img, 'test.png') 
```

# c# - Get (join) list where linked to optional List via Linq

> ID：13529610
> 
> 赞同：0
> 
> 时间：2012-11-23T12:54:23.580
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, virtual

I created my database via EF, and now (using LINQ) I want to return a list (called posts) where it is linked to its optional list (called flags)

In the example below, you can see I give table Post a virtual List of flags (which means optional right?)

MODEL :

```
public class Post
{
    public int PostID { get; set; }
    public string Title { get; set; }
    public DateTime? Dateapproved { get; set; }
    public virtual List<Flag> Flags { get; set; }
}

public class Flag
{
    public int FlagID { get; set; }
    public int PostID { get; set; }
} 
```

EF :

```
public class sampleProject : DbContext
{
    public DbSet<Post> Posts { get; set; }
    public DbSet<Flag> Flags { get; set; }
} 
```

How would I get a list of Posts where there is a link to flags, and Dateapproved is not null?

Ofcourse this won't work, because the declaration is expecting a Post, and is getting a list of flags instead :

```
List<Post> postlist = context.Flags.Where(x => x.Post.DateApproved != null).ToList(); 
```

I know of the "Include" function, but not sure it will work here

What is the best practice here? Should I split it somehow into more steps?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:11:44.507

> How would I get a list of Posts where there is a link to flags, and Dateapproved is not null?

Try this:

```
var posts = db.Posts.Include("Flags").Where(x => x.Flags.Any() && x.Dateapproved != null).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:01:35.057

Use

```
 var result = from p in Posts
               join f in Flags on p.PostId equals f.PostId
               where f.Post.DateApproved != null
               select p; 
```

# forms - ExtJS 表单发送两次

> ID：13529619
> 
> 赞同：3
> 
> 时间：2012-11-23T12:55:00.167
> 
> 标签：forms, extjs, filter, extjs4, request

我有一个带有搜索（过滤）字段的表单，如下所示：

```
xtype: 'form',
id: 'searchPanel',
title: 'Search',
collapsible: true,
bodyPadding: 10,

height: 210,
buttonAlign: 'left',
defaults: {
    width: 400,
    labelWidth: 120,
    allowBlank: true,
    enableKeyEvents: true        
},
layout: {
    type: 'table',
    columns: 2
},
items: [
    {
        xtype: 'textfield',
        name: 'txtFltrSiteName',
        fieldLabel: 'Site name or alias',
        id: 'txtFltrSiteName'
    },

    {
        xtype: 'textfield',
        name: 'txtMonthTraffic',
        fieldLabel: 'Month traffic',
        id: 'txtMonthTraffic',
        style: 'margin-left: 100px;'
    },

    {
        xtype: 'combo',
        id: 'ddlFltrPM',
        name: 'ddlFltrPM',
        fieldLabel: 'Project manager',
        displayField: 'display_name',
        valueField: 'user_id',
        editable: false,
        store: new storeOfUsers({ filters: [{ property: 'user_group_code', value: 'projectmanager', exactMatch: true }] })
    },

    // and many other fields below 
```

但是当我点击`search`按钮时，我有两个帖子请求。一 - 里面有过滤器，二是没有。

我的`send`按钮操作代码：

```
xtype: 'button',
id: 'btn_srch_set',
text: 'Searh',
margin: '10 7 0 0',
width: '',
handler: function() {       
    var filters = new Array();

    var site_name = Ext.getCmp('txtFltrSiteName').getValue();
    if(site_name.length > 0)
        filters.push({dataIndex: 'site_name', type: 'string', value: site_name}); 

    var project_name = Ext.getCmp('txtFltrProjectName').getValue();
    if(project_name.length > 0)
        filters.push({dataIndex: 'project_name', type: 'string', value: project_name});

    var pm = Ext.getCmp('ddlFltrPM').getValue();
    if(pm && pm > 0)    
        filters.push({dataIndex: 'project_manager_id', type: 'int', value: {'eq':pm}});

    // many other fields

    listOfSites.filters.removeAll();
    if(filters.length > 0)  
        listOfSites.filters.addFilters(filters);
    listOfSites.store.load(); 
} 
```

**PS**当我在按钮处理函数
中覆盖这一行时：`search`

`filters.push({dataIndex: 'project_manager_id', type: 'string', value: pm});`

一切都很好，只有一个请求，所以问题可能就在这里。但我被卡住了，不知道为什么它会这样工作。

感谢您的帮助，
斯坦尼斯拉夫。

**UPD***

```
 var filters = {
        ftype: 'filters',
        // encode and local configuration options defined previously for easier reuse
        encode: true, // json encode the filter query
        local: false,
        filters: [{
            type: 'string',
            dataIndex: 'site_name'
        }, {
            type: 'date',
            dataIndex: 'startdate'
        }, {
            type: 'string',
            dataIndex: 'project_name'

        // more fields below 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T12:59:19.580

尝试关注

```
if(filters.length > 0)  
    listOfSites.filters.addFilters(filters);
else
    listOfSites.store.load(); 
```

`addFilters()`可能已经打电话`sync()`

# javascript - 在悬停问题上显示 div

> ID：13529622
> 
> 赞同：0
> 
> 时间：2012-11-23T12:55:12.093
> 
> 标签：javascript, html, css

在这个小提琴中，当我将鼠标悬停在“动作”上时，你会填写一个下拉菜单。

问题是当我们看到最后一个项目时它在滚动下方并且看不到。在`.scrollable`课堂上我用过`position:relative;`

```
.scrollable
{
    overflow: auto;
    height: 300px;
    position:relative;
    width:100px;    
} 
```

子类“drop”有`position:absolute;`

我不想更改`position:relative`类`.scrollable`，我希望`.drop`元素在悬停时从可滚动中出来，并且`.drop`不应该显示在滚动下方；

这是小提琴： http: [//jsfiddle.net/napper7/XPxsx/15/](http://jsfiddle.net/napper7/XPxsx/15/) 提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:23:34.240

这是一个工作代码，我添加了一些 js 来获取当前光标位置

```
$('.navItem').each(function() {
    $(this).hover(function(e) {
       $(this).find(".drops").css('left',e.pageX-20);   
       $(this).find(".drops").css('top',e.pageY);            

    }, function(e) {});
});​ 
```

[http://jsfiddle.net/XPxsx/43/](http://jsfiddle.net/XPxsx/43/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:30:57.487

```
 .scrollable
{      
    position:relative;
    height:300px;
    width:100px;    
}​ 
```

我认为你最好的选择是放弃溢出行为。据我所知，当嵌套 div 具有与可见不同的溢出值时，无法在其父级之外显示嵌套 div。其他值会剪辑某种形式的外框内容（通过添加滚动条或完全隐藏内容）

我编辑了一个 jsfiddle，它可以满足您的需求，但没有滚动条：http: [//jsfiddle.net/XPxsx/42/](http://jsfiddle.net/XPxsx/42/)

这里有一些关于溢出行为的文档：http: [//www.w3.org/TR/CSS21/visufx.html](http://www.w3.org/TR/CSS21/visufx.html)

除此之外的任何事情，都将使用 js 在 DOM 明智的不同位置显示内容。

此外，作为更一般的意见：使用 sass 很好（我猜来自 css 缩进），但更好的是按照含义顺序对选择器进行排序，从最一般到最具体（例如 html，然后是body，然后是div ..在你的情况下是.scrollable，然后是.actionTools，然后是.navItem ..）

希望有帮助

# asp.net-mvc - 在 ASP.NET Framework 4 Forms Auth 中使用电子邮件作为用户名

> ID：13529623
> 
> 赞同：1
> 
> 时间：2012-11-23T12:55:24.967
> 
> 标签：asp.net-mvc, entity-framework-4, formsauthentication

我想在使用 Framework 4.5 的 MVC 4 应用程序中使用内置的表单身份验证。

但是我似乎无法覆盖用户名字段 - 即使我编辑帐户模型并将用户名设置为 255 Maxlength 它仍在创建最大为 56 的表 - 因此我不能使用电子邮件地址密码。

我已经这样装饰了 UserProfile：

```
 [Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    [Display(Name = "User name (Email)")]
    [DataType(DataType.EmailAddress)]
    [RegularExpression(@"^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$", ErrorMessage = "Please enter a valid email address.")]
    [MaxLength(255)]
    public string UserName { get; set; }
} 
```

但它不起作用。

# c# - 是否存在适用于 winrt 应用程序的任何好的 3d 引擎？

> ID：13529624
> 
> 赞同：1
> 
> 时间：2012-11-23T12:55:30.040
> 
> 标签：c#, 3d, windows-8, windows-runtime, winrt-xaml

我想在我的 winrt 应用程序中进行一些复杂的 3d 转换，我发现使用**Matrix3DProjection**可以做到这一点，但这真的很难理解。对于 winrt 应用程序是否有任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:34:21.357

I expect you should be using [DirectX](http://social.msdn.microsoft.com/Forums/en-US/wingameswithdirectx/threads) which should work across all Windows 8 based platforms.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:58:58.097

[Ogre3D](http://www.ogre3d.org/)有一个 WinRT 渲染器。它是使用最广泛的开源 3d 引擎之一，并拥有许可许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:14:10.233

如果您的预算允许，我会推荐[Unity3D](http://unity3d.com/)，它是一种易于学习的专业引擎，几乎可以针对从 PC 到 IOS 和 Flash 播放器的所有平台。它还拥有开发工具和庞大的社区。

# iphone - 如何从 uiwebview 中加载的网页接收数据（url）？

> ID：13529625
> 
> 赞同：0
> 
> 时间：2012-11-23T12:55:37.200
> 
> 标签：iphone, xcode, url, uiwebview

我已经加载了网页的 UIWebView。这个网页很简单 - 在某处出现的一张图片 **在用 xcode 处理后如何接收这个 URL？**我不想在同一个网页视图中打开这个链接（现在发生了什么）。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:01:41.170

使用此委托功能。

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

NSURL *regURL=[request URL];
NSString *urlString=[regURL absoluteString];

} 
```

# angularjs - 使用 UI 更新模型和绑定更新操作

> ID：13529626
> 
> 赞同：10
> 
> 时间：2012-11-23T12:55:42.000
> 
> 标签：angularjs

我目前使用 AngularJS 开发了一个目录，该表将基于一个 Angular 服务“模型”填充，该模型调用 Web 服务并返回列表并使用 ng-repeat 并创建一个表及其所有内容。

目前一切正常，不过我有一个小问题。作为表格的一部分，我们正在输出一个操作按钮，单击该按钮会调用更新当前记录的 Web 服务。我试图让记录数据自动更新，但我必须刷新页面才能看到更改。

这是我的代码

我的 app.js

```
angular.module('my_vehicles', ['vehicleServices', 'AccountsDirectives']); 
```

服务.js

```
'use strict';

angular.module('vehicleServices', ['ngResource']).
    factory('Car', function($resource) {
        return $resource('/vehicle/api/car.json/:id', {},
            {
                query:   {method:'GET',     isArray:false},
                delete:  {method:'DELETE',  isArray:false},
                update:  {method:'PUT',     isArray:false}
            }
        );
}); 
```

控制器.js

```
'use strict';

function MyVehicleController($scope, Car) {

    var init = function() {
        $scope.page_has_next = true;
        $scope.cars = [];
        $scope.page = 1;
    };

    // initialize values
    init();

    Car.query({my_vehicle: true},
        // success
        function(data) {
            $scope.page_has_next = data.has_next;
            $scope.cars = data.objects;
        },
        // error
        function(data) {

        }
    );

    $scope.mark_sold = function(id, index) {
        Car.update({
            id      : id,
            status  : 'S'
        },
        function(data) {

        });
    }

    $scope.delete = function(id, index) {
        Car.delete(
            {id: id},
            // on success
            function() {
                // remove the element from cars array and it will be
                // automatically updated by ng-repeat
                $scope.cars.splice(index, 1);
                $scope.loadMore(1);
            }
        );
    }

    $scope.is_total_zero = function() {
        return !!($scope.cars.length)
        //return $scope.cars.length > 0 ? true : false
    }

    $scope.loadMore = function(limit) {
        if($scope.page_has_next) {
            $scope.$broadcast('loading_started');
            console.log(limit);
            Car.query({my_vehicle: true, page: $scope.page, limit: limit},
                // success
                function(data) {
                    $scope.page_has_next = data.has_next;
                    $scope.cars = $scope.cars.concat(angular.fromJson(data.objects));
                    $scope.page++;
                    $scope.$broadcast('loading_ended');
                },
                // error
                function() {
                    $scope.page_has_next = false;
                    $scope.$broadcast('loading_ended');
                }
            );
        }
    }

    $scope.$on('loading_started', function() {
        $scope.state = 'loading';
    });

    $scope.$on('loading_ended', function() {
        $scope.state = 'ready';
    });

} 
```

最后，我的 html 代码

```
 <tr ng-repeat="car in cars">
                        <td><a href="{% ng car.get_absolute_url %}">{% ng car._get_model_display.make_display %} {% ng car._get_model_display.model_display %} {% ng car._get_model_display.trim_display %}</a></td>
                        <td>{% ng car.created_at_format %}</td>
                        <td>{% ng car.view_count %}</td>
                        <td ng-model="car.status_label">{% ng car.status_label %}</td>
                        <td>
                            <div class="btn-group">
                                <button ng-disabled="car.status == 'S' || car.status == 'P'" ng-model="edit" class="btn btn-mini edit-btn">{% trans 'Edit' %}</button>
                                <button ng-disabled="car.status == 'S'" ng-click="delete(car.id, $index)" class="btn btn-mini delete-btn">{% trans 'Delete' %}</button>
                                <button ng-disabled="car.status == 'S' || car.status == 'P'" ng-click="mark_sold(car.id, $index)" class="btn btn-mini edit-btn">{% trans 'Mark as sold' %}</button>
                            </div>
                            </td>
                        </tr> 
```

PS {% ng XXX %} 正在输出 {{ XXX }}，我正在使用上述语法，因为 django 模板引擎不允许我使用 {{}} 所以我开发了一个可以输出 {{}} 的模板标签。 .

如前所述，我的问题是每次我调用“标记为已售”时，它都会调用 cars.update() 但它不会更新显示的记录，必须刷新才能看到更改。知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T14:39:13.053

据我了解您的代码，您只更新数据库而不更新汽车模型（$scope.cars），因此更改仅反映在数据库中，而不反映在 AngularJS 应用程序中。

也许尝试以下方法：

```
$scope.mark_sold = function(id, index) {
    Car.update({
        id      : id,
        status  : 'S'
    },
    function(data) {
        $scope.cars[id].status = 'S';
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:07:24.540

您还需要更新内存中的汽车阵列。您已经有了数组索引（mark_sold 函数的第二个参数）：

```
$scope.mark_sold = function(id, index) {
    Car.update({
        id      : id,
        status  : 'S'
    },
    function(data) {
        // Update in-memory array
        $scope.$apply(function(scope) {
          scope.cars[index].status = 'S';
        });

    });
} 
```

# ruby-on-rails - 如何在设计中将可确认更改为可选？

> ID：13529627
> 
> 赞同：0
> 
> 时间：2012-11-23T12:55:43.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise-confirmable

我已经设计了身份验证，并且我`confirmable`设计了用户模型，但我希望根据我发送的数据这是可选的。那是有一个`type field`用户模型，如果我发送`value 1`类型，那么可确认应该存在，如果`value is 2`那么不应该确认并且帐户应该自动激活。我怎样才能做到这一点？请帮我。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-02T15:47:05.557

您可以`config.allow_unconfirmed_access_for = nil`在 config/initializers/devise.rb 文件中进行设置。

感谢[Ajedi32](https://github.com/Ajedi32)的问题 – [https://github.com/plataformatec/devise/issues/2275](https://github.com/plataformatec/devise/issues/2275)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:33:58.797

你可以在你的用户模型中做这样的事情。

```
before_save :confirm_user, on: :create

def confirm_user
  self.confirm! if field.eql?("value_1")
end 
```

诀窍是您检查您的价值，如果您想在没有确认的情况下创建用户，那么您只需使用设计`confirm!`方法手动确认它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:17:21.360

我认为您可以使用skip_confirmation！方法在这里。所以它不会为用户发送确认邮件，并且会被确认。

```
before_save :require_confirmation, :on => :create

def require_confirmation
   self.skip_confirmation! if field == "value_2"
end 
```

# rails-admin - rails_admin 可搜索的关联

> ID：13529634
> 
> 赞同：8
> 
> 时间：2012-11-23T12:56:13.903
> 
> 标签：rails-admin

我将 rails_admin 与 globalize3 一起使用，无法使可搜索的关联起作用。以下是模型（人 has_one/belongs_to Name has_many/belongs_to NameTranslation）：

```
class Person < ActiveRecord::Base
  has_one :name, inverse_of: :person
end

class Name < ActiveRecord::Base
  belongs_to :person, inverse_of: :name
  translates :first_name, :last_name
  has_many :name_translations, inverse_of: :name, dependent: :destroy
end

class NameTranslation < ActiveRecord::Base
  belongs_to :name, inverse_of: :name_translations      
end 
```

该`NameTranslation`模型来自 globalize3，它包含与 name ( `first_name`and `last_name`) plus `locale`and相同的属性`name_id`。

在`config/initializers/rails_admin.rb`我有

```
config.model Person do
  list do
    field :name do
      searchable name_translations: :last_name
    end
  end
end 
```

然后，在 GUI 中，当我在 上添加过滤器时`name`，我得到：

```
SQLite3::SQLException: no such column: name_translations.last_name: SELECT  "people".* FROM "people"  WHERE (((name_translations.last_name LIKE '%freud%'))) ORDER BY people.id desc LIMIT 20 OFFSET 0 
```

显然，rails_admin 正在寻找一个名为`name_translations.last_name`in`people`而不是加入/包含的列，`names`并且`name_translations`- 为什么？

我需要 rails_admin 做的是，在 irb 工作：

```
>> Person.joins( name: :name_translations ).where('name_translations.last_name like "test"') 
```

生成以下 SQL：

```
SELECT "people".* FROM "people" INNER JOIN "names" ON "names"."person_id" = "people"."id" INNER JOIN "name_translations" ON "name_translations"."name_id" = "names"."id" WHERE (name_translations.last_name like "test") 
```

这可以在 rails_admin 中完成吗？谢谢你的帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-09T10:12:45.183

从[这个线程](https://groups.google.com/forum/#!topic/rails_admin/z3578Boilx4)中，我遵循了尼克罗斯福的建议，它适用于我的情况

```
class Room < ActiveRecord:Base
  has_many :time_slots
end

class TimeSlot < ActiveRecord::Base
  belongs_to :room

  rails_admin do
    list do
      field :day do
        searchable true
      end
      # field :room do
      #   searchable room: :name
      # end
      field :room do
        searchable [{Room => :name}]
        queryable true
      end
    end
  end
end 
```

我试过了，但它`searchable room: :name`不起作用，但`searchable [{Room => :name}]`似乎让它起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-03T12:08:03.233

我的关系也有类似的问题`has one`。我解决它的方法是`default_scope`在模型上设置 a 并将其与关联的表连接（这是我可以让 rails admin 连接这两个表的唯一方法）。

我还必须`queryable true`在相关字段上进行设置。

想象一下，您只需要在名称关联中进行搜索，那么它的工作方式如下：

```
class Person < ActiveRecord::Base
  has_one :name, inverse_of: :person

  default_scope { eager_load(:name) }
end

config.model Person do
  list do
    field :name do
      queryable true
      searchable [:column1, :column2, ..]
    end
  end
end 
```

但是，您需要搜索`has many`关联，我不知道这种方法是否仍然有效，但这里有一个猜测：

```
class Person < ActiveRecord::Base
  has_one :name, inverse_of: :person
  has_many :name_translations, through: :name

  default_scope { eager_load(:name_translations) }
end

config.model Person do
  list do
    field :name_translations do
      queryable true
      searchable :last_name
    end
  end
end 
```

# jquery - jquery悬停在悬停内

> ID：13529635
> 
> 赞同：2
> 
> 时间：2012-11-23T12:56:18.590
> 
> 标签：jquery, hover

（开始对不起我的英语）！我有一个 jquery 悬停问题。我有一个导航，如果鼠标悬停某个元素（播放器和登录按钮）jquery show() 相应的 div。这工作正常，但是当我将相应的 div 悬停时，div 隐藏但应该保留。

导航元素：

```
<li class="hover" title="login"><img src="images/nav-log.png" alt="player" border="0" /></li>       
<li class="hover" title="player"><img src="images/nav-ply.png" alt="player" border="0" /></li> 
```

jQuery：

```
var playerstat = 0;
$(".hover").mouseover(function() {

    link = $(this);
    layer = $("#" + link.attr("title") + "_content");   
    position = link.position();
    link.attr("id","aktiv");
    if(link.attr("title") == "player" && playerstat == 0){
        link.click(function() {

        });

    }

    layer.css({
        top : ($("html, body").scrollTop() + position.top + $(this).height() + 3) + 'px',
        left : (position.left - layer.outerWidth() + link.width()) + 'px'
    });

    layer.show();

    layer.mouseover(function() {
        alert("over");
        link.attr("id","aktiv");
        $(this).show();
        }).mouseleave(function(){
        link.attr("id","");
        $(this).hide();
    });
    }).mouseout(function(){
    link.attr("id","");   
    $("#" + $(this).attr("title") + "_content").hide();

}); 
```

玩家：

```
 <div id="player_content" class="theme-gradient theme-shadow">
      <span id="track-info" class="theme-fontbggrey"></span> 
  <span id="player-layer"></span></div> 
```

我希望有人理解我...谢谢你帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:04:16.177

将您的“player_content” div 写入`<li class="hover" ...></li>`标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:07:51.937

也许这可以帮助你，你可以做到这一点

```
$("#" + $(this).attr("title") + "_content").bind('mouseenter mouseleave', function() {
$(this).hide()
, $(this).show() 
}); 
```

# drupal-7 - drupal alter node 编辑表单

> ID：13529636
> 
> 赞同：6
> 
> 时间：2012-11-23T12:56:22.867
> 
> 标签：drupal-7, hook-form-alter

如何在“**创作信息**和**发布选项**”部分下方的节点编辑表单中添加自定义配置区域？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T02:41:31.807

您可以使用 [hook_form_FORM_ID_alter()](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_form_FORM_ID_alter/7)。下面的例子：

```
function my_module_form_node_form_alter(&$form, $form_state) {
  // if you are targeting a specific content type then 
  // you can access the type:
  $type = $form['#node']->type;
  // Then
  if ($type == 'my_content_type') {
  //  use a contact settings for the sake of this example
   $form['contact'] = array(
    '#type' => 'fieldset', 
    '#title' => t('Contact settings'), 
    '#weight' => 100, 
    '#collapsible' => TRUE, 
    '#collapsed' => FALSE,
   );
   // add simple checkbox to the field set
   $form['contact']['approve'] = array(
     '#type' =>'checkbox', 
     '#title' => t('Contact me'),
   );
  } 
} 
```

**现在为了存储数据**，我鼓励您查看[示例](http://drupal.org/project/examples)项目；它有许多代码示例和大量文档。此外，请查看[Form API](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/)以获取有关不同类型表单元素的更多信息。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T14:26:40.180

以下代码生成附加图像中的最后一个菜单：

```
 $form['barclays_epdq'] = array(
        '#type' => 'fieldset',
        '#access' => TRUE,
        '#title' => 'Barclays ePDQ',
        '#collapsible' => TRUE,
        '#collapsed' => TRUE,
        '#group' => 'additional_settings',
        '#weight' => 100,
        'barclays_epdq_active' => array(
            '#type' => 'checkbox',
            '#title' => 'Enable this webform to send users to your Barclays ePDQ store to make a payment',
            '#default_value' => $active_state,
        ),
    ); 
```

![在此处输入图像描述](../Images/6cf3966f60bf513c180e8f70d6047ea9.png)

ps：表格在hook_form_alter

# android - 如何处理 onItemClick 中的单独视图单击？

> ID：13529641
> 
> 赞同：1
> 
> 时间：2012-11-23T12:56:51.783
> 
> 标签：android, listview, onclick

我有以下布局作为我的`ListView`. 如何处理以`ImageView`iv_info 作为 ID 的第一次点击？

我必须同时使用`onItemClick`and`onClick`或其他任何东西吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_list_row_9patch"
    android:orientation="horizontal"
    android:padding="@dimen/fifteen_dp" >

    <ImageView
        android:id="@+id/iv_info"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="@dimen/exercise_list_row_iv_weight"
        android:contentDescription="@string/help"
        android:src="@drawable/btn_info" />

    <TextView
        android:id="@+id/erl_tv_exsercise_name"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="@dimen/exercise_list_row_tv_weight"
        android:paddingLeft="@dimen/ten_dp"
        android:textColor="@android:color/white"
        android:textSize="@dimen/list_row_text_size"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/erl_tv_participant_name"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="@dimen/exercise_list_row_tv_weight"
        android:gravity="right"
        android:textColor="@android:color/white"
        android:textSize="@dimen/list_row_text_size" >
    </TextView>

    <ImageView
        android:id="@+id/iv_exercise_status"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="@dimen/exercise_list_row_iv_weight"
        android:src="@drawable/btn_info" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:59:06.707

在适配器的`getView`方法中，获取图像视图并设置`onClickListener`..

例子：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    ViewHolder holder;
    if(convertView==null){
        vi = inflater.inflate(R.layout.item, null);
        holder=new ViewHolder();
        holder.text=(TextView)vi.findViewById(R.id.text);;
        holder.image=(ImageView)vi.findViewById(R.id.image);
        vi.setTag(holder);
    }
    else
        holder=(ViewHolder)vi.getTag();

    holder.text.setText("item "+position);
    holder.image.setTag(data.get(position));
    holder.image.setOnClickListener(this);
    holder.text.setOnClickListener(this);
    imageLoader.DisplayImage(data.get(position), activity, holder.image);
    return vi;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:02:08.110

```
 View vi=convertView;
    ViewHolder holder;

    if(convertView==null){
        vi = inflater.inflate(R.layout.item, null);
        holder=new ViewHolder();       

        holder.iv_info=(ImageView)vi.findViewById(R.id.iv_info);
        holder.iv_info.setOnClickListener(activity);

        holder.iv_exercise_status=(ImageView)vi.findViewById(R.id.iv_exercise_status);
        holder.image3.setOnClickListener(activity);

        vi.setTag(holder);
    } else
    holder=(ViewHolder)vi.getTag();

    public void onClick(View v) {
           // Perform action on click
          switch(v.getId()) {
            case R.id.iv_info:
              // do it smth
              break;
            case R.id.iv_exercise_status:

              break;               
          }
     } 
```

# actionscript-3 - 触发鼠标点击重叠的影片剪辑

> ID：13529643
> 
> 赞同：0
> 
> 时间：2012-11-23T12:56:54.807
> 
> 标签：actionscript-3, events

我有两个重叠的 MovieClip（同一个父级），都有一个鼠标点击监听器。

但只有最上面的 MC 会检测到点击。

是否可以让两个 MC 都使用侦听器检测点击？

如果不是，那么碰撞是比使用 ? 更好的方法`getObjectsUnderPoint()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:06:23.390

您可以将单击事件注册到父控制器或类。当它接收到事件回调时，它可以从该回调函数将其广播回所有其他子 MC。这只是管理 MC 的问题 - 要么跟踪它们的名称，要么将全部添加到数组中，这样你就可以使用 for 循环来遍历它们。

# jruby - 在 ruby 代码中执行 curl 命令

> ID：13529647
> 
> 赞同：2
> 
> 时间：2012-11-23T12:57:09.437
> 
> 标签：jruby, neo4j, jrubyonrails

我正在尝试`curl`从我的 ruby​​ 代码中运行以下命令

```
Kernel.system'curl -H "Content-Type:application/json" -H "Accept:application/json" -d "{\"project\":{\"name\":\"BB\",\"description\":\"Book\"}}" "http://localhost:3000/company/projects?auth_token=mRFWyxfdPKHsDb4HhyLP"' 
```

我想做类似的事情

`name = "BB"`（使用变量）

然后执行

`Kernel.system'curl -H "Content-Type:application/json" -H "Accept:application/json" -d "{\"project\":{\"name\":"#{name}",\"description\":\"Book\"}}" "http://localhost:3000/company/projects?auth_token=mRFWyxfdPKHsDb4HhyLP"'`

但这种方法不起作用......它`#{name}`作为字符串。

请帮帮我。如果我做错了什么，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:03:11.760

为了启用字符串插值，您需要在字符串中使用双引号。此处已涵盖该主题：[双引号与单引号](https://stackoverflow.com/questions/6395288/ruby-double-vs-single-quotes)

如果您重构代码并将这些部分分配给变量，然后再将它们组合成一个字符串，它也会使您的代码更好地阅读。

所以：

```
host_name = 'stackoverflow.com'

Kernel.system 'curl -I #{host_name}' 
```

将不起作用，而

```
Kernel.system "curl -I #{host_name}" 
```

将要

# xml - 从 shell 脚本的 xml 文件中提取单个标签

> ID：13529650
> 
> 赞同：1
> 
> 时间：2012-11-23T12:57:19.350
> 
> 标签：xml, bash

我有一堆 xml 文件，我想从中提取单个标签并保存到文本文件中。即，我该如何转

清单.xml：

```
<package>
        <description brief="Moving Horizon Estimator for the kite carousel">

    dynamicMHE - MHE for the kite carousel, with dynamic model

        </description>
        <author>rsetrsntrstn</author>
        <license>LGPL</license>
        <review status="unreviewed" notes=""/>
        <url>TODO</url>

        <!-- RTT & OCL integration -->
        <depend package="rtt_rosnode"/>
        <depend package="rtt_std_msgs"/>
        <depend package="rtt_rosnode"/>

        <!-- RTT & OCL -->
        <depend package="rtt"/>
        <depend package="ocl"/>

</package> 
```

进入

自述文件：

```
dynamicMHE - MHE for the kite carousel, with dynamic model 
```

以简单的方式从 shell 脚本。我不想学习任何关于花哨的 xml 解析器的知识；这个练习的重点是从我们的代码库中删除所有的 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:01:01.790

我通过查看其他问题弄清楚了：

> ```
> xmlstarlet sel -t -v //description manifest.xml > readme.txt 
> ```

注意：// 后面的内容不是任何类型的注释；xmlstarlet 只是有非常奇怪的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:53:18.723

[xmllint](http://linux.about.com/library/cmd/blcmdl1_xmllint.htm)可用于运行[xpath](http://en.wikipedia.org/wiki/XPath)表达式以从 XML 文件的任何部分提取信息：

```
xmllint --xpath "string(/package/description)" manifest.xml > readme.txt 
```

# java - 如何防止Eclipse在调试中遇到断点时自动打开调试面板

> ID：13529654
> 
> 赞同：1
> 
> 时间：2012-11-23T12:57:42.950
> 
> 标签：java, eclipse, debugging

我有一个烦人的问题，如果我在调试时最小化调试面板，每次应用程序遇到断点时仍然会显示它。

是否可以告诉 eclipse 在断点被击中时不要自动显示此面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:02:29.027

一切都在：

```
Window -> Preferences -> Run/Debug 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:02:42.167

转到`Window->Preferences->Run/Debug`，您将找到一个复选框`Activate the debug view when a breakpoint is hit`。所以，关掉

# c - (int) sizeof(void *) 和 int 有什么区别？

> ID：13529658
> 
> 赞同：1
> 
> 时间：2012-11-23T12:57:52.750
> 
> 标签：c, int, sizeof, void

我只是 C 编程的初学者。我可以问一个简单的问题吗？`(int) sizeof(void *)` 和 有什么区别 `int` ？

前任）

```
#define ptrint          int
#define PTRINT          ((int) sizeof(void *)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:00:42.490

第一种情况充当 int 的别名，因此您可以使用 ptrint 代替 int。

第二种情况是以字节为单位的指针大小。因此，例如在 32 位系统上，它将返回 4。

```
ptrint a = 8;
ptrint b = a;

int sizeofptr = PTRINT; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:59:23.870

一个是类型，另一个是返回类型大小的表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:04:53.707

使用 ptrint，您只需定义一个新类型，它只是 int 的别名，例如：

```
ptrint a;
a = 5;
printf("%d",(int) a); // all this is ok. 
```

使用 PTRIINT，您可以定义一个整数常量，该常量将包含系统上 void* 指针的大小。例子：

```
printf("Size of a void* pointer is %d\n",PTRINT); // will work. 
PTRINT a;  // will fail 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:00:57.850

((int) sizeof(void *)) 是一个值（取决于您的系统和编译器实现）， int 是一个类型。

# c - 在c中排序数组

> ID：13529668
> 
> 赞同：-2
> 
> 时间：2012-11-23T12:58:27.993
> 
> 标签：c, qsort

我有一个结构数组。让我们称之为`structsarray`

我有一个整数数组，其中整数是结构的索引。让我们称之为`indexarray`

我想排序`indexarray`，但我想将排序与`int`in进行比较`structsarray`

有什么方法可以通过该设置完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:03:27.767

您有一个比较功能，例如：

```
int my_compare(const void *a, const void *b)
{
    int index1 = *((const int *) a);
    int indexb = *((const int *) b);

    return structsarray[index1].field - structsarray[index2].field;
} 
```

参数是指向要排序的数组中的值的指针。我将常量 void 指针转换为常量 int 指针，然后取消引用该指针以获取实际值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:03:08.823

您可以通过实现自己的比较功能来使用 qsort。这里解释一下：[http ://www.cplusplus.com/reference/clibrary/cstdlib/qsort/](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:09:43.340

提供的信息非常有限。可能您可以执行以下操作：

算法示例：冒泡排序：

```
 for (c = 0 ; c < ( n - 1 ); c++)
  {
    for (d = 0 ; d < n - c - 1; d++)
    {
      if (index[d] > index[d+1]) /* For decreasing order use < */
      {

        /* Sort index */
        swap       = index[d];
        index[d]   = index[d+1];
        index[d+1] = swap;

        /* Sort struct using above index */
        swap       = struct[d];
        struct[d]   = struct[d+1];
        struct[d+1] = swap;

      }
    }
  } 
```

# symfony1 - 如何获取嵌入表单的最后插入 id 并将其存储在父表单中：symfony

> ID：13529671
> 
> 赞同：0
> 
> 时间：2012-11-23T12:58:43.220
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我必须将父表单称为**EventForm**并嵌入称为**RegisterForm**的表单。如果您没有登录意味着我想显示注册表。嵌入表格的注册工作正常。但注册后我想将用户 ID 存储到父表事件。

我猜在保存父表单后调用 saveEmbeddedFroms() 函数。那么哪个函数适合更新父表单。任何人都可以给我的想法。这该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:12:57.570

当您调用`$form->save()`表单时，它也会保存嵌入的表单，但嵌入的表单会保存在主对象之后。

我认为你可以做的是`preSave()`为你的主表单编写一个函数，你可以在其中获取嵌入的表单，执行`save()`它（这将给你保存的对象作为回报）并在主表单中手动设置用户 ID（记住取消设置嵌入的表单，这样它就不会被保存两次）。

你也可以重新考虑整个模型，因为它看起来有点复杂；）你真的必须在这里使用嵌入式表单吗？

# java - Grails 多对多和一对多冲突

> ID：13529682
> 
> 赞同：5
> 
> 时间：2012-11-23T12:59:46.103
> 
> 标签：java, grails, grails-orm, entity-relationship, relationship

我有以下两个域类，用户和帖子，它们之间有两个关系，用户有一对多的帖子和反向引用。用户与他关注的帖子有多对多的关系：我得到的关系如下：

```
User {
hasMany = [posts : Post, followingPosts: Post]
belongsTo = [Post] //For the many-to-many, this is the owner i'd like to have.

}

Post {
  hasMany = [followers: User]
  belongsTo = [owner: User] //For the 1-to-Many, this is my back-reference
} 
```

现在我与 Grails 发生冲突，我尝试通过映射解决它但没有成功，这是我得到的错误：

```
 Domain classes [Post] and [User] cannot own each other in a many-to-many relationship. Both   contain belongsTo definitions that reference each other. (Use --stacktrace to see the full trace) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:14:13.433

我认为您可以使用**mappedBy**来做到这一点，例如：

```
class User{

  static hasMany = [posts : Post, followingPosts: Post]
  static mappedBy = [posts : "user"]
}

class Post{  

  User user
  static hasMany = [followers: User]
  static belongsTo = User
} 
```

查看[此](http://grails.org/doc/2.0.x/ref/Domain%20Classes/mappedBy.html)内容以获取有关**mappedBy**的更多信息。

# javascript - javascript：构造函数与揭示模块模式以供一次性使用

> ID：13529684
> 
> 赞同：3
> 
> 时间：2012-11-23T13:00:01.263
> 
> 标签：javascript, constructor, revealing-module-pattern

我已经了解到构造函数可以被实例化以在 javascript 中创建新对象，该对象具有自己的 _proto_ 属性，并且还将属性“原型”赋予构造函数。

```
function MyController() {
    var controllerName = 'initialcontroller';
    function init() {
        console.log(controllerName);
    }
    this.init = init;
} 
```

在这里，init 可以这样调用：

```
var mycontroller = new MyController();
mycontroller.init(); 
```

假设我只实例化一次并且不再实例化，如果我不打算使用 MyController.prototype 提供的所有原型属性，这不是矫枉过正吗？

问题：相反，我可以不使用显示模块模式进行这样的编码吗？

```
var myController = function() {
    var controllerName = 'initialcontroller';
    function init() {
        console.log(controllerName);
    }
    return {
        init : init
    }
}(); 
```

在这里，init 可以这样调用：

```
myController.init(); 
```

在这种情况下，如果我尝试访问 myController 中不存在的任何属性，javascript 引擎将不会尝试查找该属性是否存在于原型链中的任何位置，从而节省了我的时间。

或者实例化我忽略的函数还有其他优点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T07:55:02.587

如果您只是想要一个带有一些方法和其他属性的“单例”类对象，您可以使用对象文字来进一步简化事情：

```
var myController = {
    init: function (foo) {
        // do something with foo or whatever
    }
}

myController.init("bar"); 
```

或者 - 如果您需要一些“私有”内部状态，请使用常规显示模块模式：

```
var myController = (function () {
    var internal = "i am private";
    return {
        init: function () {
            // blah blah
        }
    };
}());

myController.init(); 
```

关于原型查找时间：是的，理论上，当您尝试访问不存在的属性时，查找会遍历原型链。从理论上讲，对于具有“没有”特定构造函数的普通 ol' 实例，这可能会快**一点。**`Object`实际上，这种性能影响应该可以忽略不计。除非您真的需要，否则不要尝试在此处进行优化。:)

# c# - 实体框架获取带有子实体的实体

> ID：13529685
> 
> 赞同：0
> 
> 时间：2012-11-23T13:00:12.200
> 
> 标签：c#, asp.net-mvc, database, linq, entity-framework

我需要一份物品清单。每个项目都有一个文件列表。我需要的是某个日期的所有项目，每个项目都需要包含其文件。到目前为止我有

```
var result = (from i in db.Context.Items.AsNoTracking()
                          where EntityFunctions.TruncateTime(i.Date) == date.Date
                          select i).ToList();

            return result; 
```

这给了我所有的项目，它的基本属性，如名称和 ID 等。但是文件列表是空的。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:08:48.987

尝试这个：

```
var result = (from i in db.Context.Items.AsNoTracking()
                      where EntityFunctions.TruncateTime(i.Date) == date.Date
                      select i).Include(i=>i.Files).ToList();

        return result; 
```

确保您引用了 System.Data.Entity 以获取此 .Include 扩展方法重载。

# android - Google Nexus 10 支持多少个接触点？

> ID：13529690
> 
> 赞同：-3
> 
> 时间：2012-11-23T13:00:29.673
> 
> 标签：android, device

我想做一些 Android 4.2 编码，需要一个支持至少 10 个接触点的设备和 API。谷歌 Nexus 10 适合这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:27:45.287

`jazzhands`是的，根据 MultiTouch Tester 应用程序的结果，Nexus 10 似乎支持。

# javascript - 从 html 表中提取特定信息？

> ID：13529691
> 
> 赞同：0
> 
> 时间：2012-11-23T13:00:32.403
> 
> 标签：javascript, html

我有一个页面，上面有一些这样的表格：

```
<html>
<ol>
<li>entry1</li>
<li>entry2</li>
<li>entry3</li>
<li>entry4</li>
</ol>   
</html> 
```

我现在想计算页面上“条目”的出现次数，并提取每个放置在表格的哪一行（这里是第一行）。

是否有 java 工具来完成这项任务？为了搜索计数，我会使用 RegEx 和 Matcher Pattern。但是我怎样才能最好地从该文档中提取表格行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:03:01.803

您可以为此使用[JSoup](http://jsoup.org/) ，使用它很容易从 HTML 中提取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:05:51.697

或者，如果您不想使用其他库，您可以使用正则表达式[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

# php - Zend_Lucene：如何组合多个术语？

> ID：13529692
> 
> 赞同：1
> 
> 时间：2012-11-23T13:00:34.847
> 
> 标签：php, zend-framework, lucene, zend-search-lucene

我正在使用两种不同的方法在索引中搜索，一种有效，一种无效（但应该来自阅读文档）。我想知道我的错误是什么。

这是我的第一种方法，效果很好：

```
$query = '+language:EN +country:US';
$hits = $index->find($query); 
```

我尝试使用以下方法做同样的事情`Zend_Search_Lucene_Index_Term`：

```
$query = new Zend_Search_Lucene_Search_Query_MultiTerm();
$query->addTerm(new Zend_Search_Lucene_Index_Term('EN', 'language'), true);
$query->addTerm(new Zend_Search_Lucene_Index_Term('US', 'country'), true);
$hits  = $index->find($query); 
```

这不会产生结果。删除该`true`选项会将搜索转换为 OR 搜索（国家/地区=US OR 语言=EN）。

[我基于http://framework.zend.com/manual/1.12/de/zend.search.lucene.query-api.html](http://framework.zend.com/manual/1.12/de/zend.search.lucene.query-api.html)上的文档创建了第二种方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:07:20.583

我通过在搜索中不使用任何大写字符找到了解决方案。

搜索小写字符，即使数据字段是大写的，也解决了。

有效的示例代码：

```
$query = new Zend_Search_Lucene_Search_Query_MultiTerm();
$query->addTerm(new Zend_Search_Lucene_Index_Term('en', 'language'), true);
$query->addTerm(new Zend_Search_Lucene_Index_Term('us', 'country'), true);
$hits  = $index->find($query); 
```

数据字段具有值“EN”和“US”，并已被索引，文档输出证实了这一点，但由于某种原因，搜索需要小写输入。

# ruby-on-rails - 无效的 redirect_uri：rails 中的应用程序配置不允许给定 URL

> ID：13529700
> 
> 赞同：2
> 
> 时间：2012-11-23T13:01:04.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, facebook-oauth

我已经在stackoverflow中查看了这个问题的所有相关答案，但仍然找不到有效的解决方案。Twitter 和 linkedin 工作正常，但对于 facebook，我收到此错误，

```
{
   "error": {
      "message": "Missing client_id parameter.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

我在哪里放链接？我确实将它放在带有 facebook 登录选项的网站中。

```
http://127.0.0.1:3000/auth/facebook/callback 
```

我是否也必须将这些类型的链接放在其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:30:18.927

请参考omniauth github页面上的这个[问题。](https://github.com/mkdynamic/omniauth-facebook/issues/21)基本上，您的问题出在 facebook 凭据中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:42:07.233

```
I did change config.omniauth :facebook, ENV['AUTH_FB_KEY'],
 ENV['AUTH_FB_SECRET'] into 
```

config.omniauth :facebook,'AUTH_FB_KEY', 'AUTH_FB_SECRET' 为它工作。

# openerp - 如何在 openerp 6.1 中更改基本字段标签

> ID：13529701
> 
> 赞同：0
> 
> 时间：2012-11-23T13:01:04.323
> 
> 标签：openerp

研究性的，但实际上我已经完成了所有关于我想要在 openerp 中实现的谷歌，即如何更改这些字段标签，我不想玩字段，我知道如何创建新字段但是我无法创建基本字段怎么办要编辑它们，他们会抛出一些错误，您无法从此处更改基本字段，因此目标很清楚，那些标签（如公司、hr 模块中的 SSNID）我希望它们根据它们进行更改，别无其他！

请不要发布已经相同问题的链接，因为他们没有得到回答！

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:31:14.823

您可以通过两种方式更改字段的标签。

**1.Python代码**

继承定义该字段的模型，然后在 _columns 中添加具有新标签的相同字段名称。例如，如果您想将 SSNID 更改为 Employee ID，假设在基本模块中该字段被定义为“ssnid”并且该字段在 hr.employee 模型中。

```
from osv import osv, fields
class hr_employee(osv.osv):
    _inherit = 'hr.employee'
    _columns = {'ssnid': fields.integer('Employee ID')
    }
hr_employee() 
```

**2\. XML 代码（更改视图）**

继承您的视图并为字段“ssnid”添加属性。例如，在基本模块中，字段视图就像.要`<field name="ssnid"/>`更改它继承其相应的表单和树视图，您可以使用`position="attribute"`and position="replace" 更改字段。添加属性 string="Employee ID"。

```
<field name="ssnid" position="replace"> 
    <field name="ssnid" string="Employee ID"/>
</field> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:49:22.807

通过这种方式创建新的 Hr 员工继承视图。

```
<record model="ir.ui.view" id="updated_hr_form_view">
<field name="name">updated.hr.form</field>
<field name="model">hr.employee</field>
<field name="type">form</field>
<field name="inherit_id" ref="hr.view_employee_form" />
    <xpath expr="//form/notebook/page[@string='Personal Information'/group/field[@name='ssnid']]" position="replace">
        <field name="ssnid" string="Your New Label"/>
        </xpath>
</field>
</record> 
```

# perl - 记不清！Perl

> ID：13529703
> 
> 赞同：1
> 
> 时间：2012-11-23T13:01:10.540
> 
> 标签：perl

我在一个 perl 程序中使用了 28 个文件。
每个文件大小约为 2Mb。
我已将它们放入 28 个数组中。并打印 28 个输出文件。
每个输出文件都包含所有连接的数组，当前文件数组除外。11 个输出文件后，每个大约 70 MB 大小， **内存不足！**味精来了。如何增加内存限制。

我尝试的是：
将数据提取到数组后，我关闭了每个文件处理程序。但没有用....请提出解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T14:00:56.533

假设您有四个文件`A B C D`，然后您想创建四个文件，以便
文件 1 包含`B C D`、
文件 2 包含`A C D`、
文件 3 包含`A B D`、
文件 4 包含`A B C`。

您当前正在做的是将每个文件加载到一个数组中（仅使用字符串会节省一点内存），然后连续打印每个输出文件。

您也可以打开所有输出文件，然后依次打开每个输入文件并将其打印到每个不对应的输出文件中。这在任何时候都只会在内存中保留一个文件。

```
use strict; use warnings;

my @in =  qw(A B C D);
my @out = qw(1 2 3 4);

my @outhandles = map {open my $fh, ">", $_ or die $!; $fh} @out;

for my $i (0 .. $#in) {
   open my $fh, "<", $in[$i] or die $!;
   my $content = do {local $/; <$fh>};
   for my $j (0 .. $#outhandles) {
      print {$outhandles[$j]} $content unless $i == $j;
   }
} 
```

如果您说`print {$outhandles[$j]} $_ while <$fh>`而不是吞食输入文件，则可以进一步减少内存。

### 测试

```
$ mkdir test; cd test;
$ for file in {A..D}; do echo $file >$file; done
$ perl ../script.pl
$ ls
1  2  3  4  A  B  C  D
$ for file in `ls`; do echo == $file; cat $file; done
== 1
B
C
D
== 2
A
C
D
== 3
A
B
D
== 4
A
B
C
== A
A
== B
B
== C
C
== D
D 
```

# mysql - 减去 HQL 中的子选择值

> ID：13529707
> 
> 赞同：1
> 
> 时间：2012-11-23T13:01:31.673
> 
> 标签：mysql, hibernate, hql, subquery

我正在使用 Hibernate，我想从从两个不同的子查询中获取的两个值中获得减法，但我遇到了以下错误：

> SQLGramarEception：无法执行查询

```
SELECT termQuery.term.id,
   (SELECT COALESCE(MIN(termResult2.position),101) FROM termQuery2.results termResult2 WHERE termResult2.url.hostname MEMBER subscription.account.domains) as **prevPosition**, 
   (SELECT COALESCE(MIN(termResult.position),101) FROM termQuery.results termResult WHERE termResult.url.hostname MEMBER subscription.account.domains) as **currentPosition**,
   prevPosition - currentPosition as change --<<<<<<
FROM TermSubscription subscription, TermQuery termQuery, TermQuery termQuery2
WHERE subscription.account.id=1197 
    AND termQuery.term=subscription.term 
    AND termQuery.provider.id=2
    AND termQuery.queryDate.yearWeek = '201242'
    AND termQuery2.term=termQuery.term
    AND termQuery2.provider.id=termQuery.provider.id
    AND termQuery2.queryDate.yearWeek = '201241'
ORDER BY subscription.term.id, termQuery.queryDate.yearWeek 
```

我知道不可能像这样减去这两个值，但我不知道该怎么做。那么，会有什么办法呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:10:14.243

仅选择其他 3 个值，并在迭代查询结果时，`currentPosition`从`prevPosition`Java 中的 ,​​ 中减去 。

# lisp - 如果找到匹配则返回一行文本

> ID：13529709
> 
> 赞同：1
> 
> 时间：2012-11-23T13:01:39.733
> 
> 标签：lisp, newlisp

如果找到匹配项，我无法确定如何返回一行文本。

```
(set 'wireshark "http://anonsvn.wireshark.org/wireshark/trunk/manuf")

(set 'arptable (map (fn (x) (parse x " ")) (exec "arp -a")))

(define (cleanIPaddress x)
  (slice x 1 -1))

(define (cleanMACaddress x) 
  (upper-case (join (slice (parse x ":") 0 3) ":")))

(define (addIPandMACaddress x) 
  (list (cleanIPaddress (nth 1 x)) (cleanMACaddress (nth 3 x))))

(set 'arplist (map addIPandMACaddress arptable))

(set 'routerMAC (last (assoc (exec "ipconfig getoption en1 router") arplist)))

(find-all routerMAC (get-url wireshark)) 
```

返回

`("20:AA:4B")`

所以我知道代码“有效”

但我想检索整行文本

`"20:AA:4B Cisco-Li # Cisco-Linksys, LLC"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:37:36.170

这可以简单地通过使用`string-split`允许我们使用`remove-if`（Common Lisp 版本`filter`）的过程来搜索由换行符分割的字符串，删除任何不包含我们正在搜索的字符串的行。这将导致包含该字符串的每一行的列表。我们将在此处定义的函数已经可以通过各种 Common Lisp 库获得，但出于教育目的，我们将自己定义它们。您需要的代码如下所示：

```
; First we need a function to split a string by character

(defun string-split (split-string string)
  (loop with l = (length split-string)
        for n = 0 then (+ pos l)
        for pos = (search split-string string :start2 n)
        if pos collect (subseq string n pos)
        else collect (subseq string n)
        while pos))

; Now we will make a function based on string-split to split by newlines

(defun newline-split (string)
  (string-split "
" string))

; Finally, we go through our text searching for lines that match our string.
; Make sure to replace 'needle' with the string you wish to search for.

(remove-if #'(lambda (x) 
               (equal 'nil (search (string-upcase "needle") 
                                   (string-upcase x))))
           (newline-split haystack)) 
```

您应该能够将此策略应用于您发布的代码，只需进行一些小的修改。此代码在 Mac OS X 10.7.5 上的 SBCL 1.0.55.0-abb03f9（ANSI Common Lisp 的实现）上进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:59:45.643

最后我使用了：

```
(find-all (string routerMAC ".*") (get-url wireshark)) 
```

# c - C printf char 大于等于8个字符的行方式

> ID：13529711
> 
> 赞同：5
> 
> 时间：2012-11-23T13:01:42.873
> 
> 标签：c, char

```
if (namelist==NULL)
{
   namelist=(char**)malloc(sizeof(char**));
   namelist[i]=name;
}
else
{
   namelist=(char**)realloc(namelist,(i+1)*sizeof(char**));
   namelist[i]=name;
}

for(i=0;i<count;i++)
{
   printf("%s\t\t%s\n",namelist[i],namelist[i]);
} 
```

问题是如果我输入`"abcdefg"`，作为输入`"abcdefgh"`，`"abc"`我会得到

```
abcdefg          abcdefg
abcdefgh                    abcdefgh
abc              abc 
```

有没有办法让第二个和`"abcdefgh"`第二个一样排队？`"abcdefg"``"abc"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T13:05:56.550

停止使用 TAB 字符 (\t) 作为分隔符，改用正确的格式规范，如果您希望字符串从第 20 列开始，请编写：

```
printf( "%-20s%s", namelist[i],namelist[i]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:06:24.213

尝试这个：

```
printf("%-20s%-20s\n",namelist[i],namelist[i]); 
```

有关. [_](http://www.cplusplus.com/reference/clibrary/cstdio/printf/) _`printf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:35:34.243

为了保持灵活性，您可能需要使用参数化宽度：

```
#include <stdio.h>

typedef enum Alignment_e
{
  alignmentUndefined = -1,
  alignmentLeft = 0,
  alignmentRight,
  alignmentMax
} Alignment_t;

typedef struct Tab_s
{
  int position;
  Alignment_t alignment;
} Tab_t;

#define FORMAT_TABBED_STRING "%*s"
#define TABBED_STRING( \
  str, \
  tab \
) \
  ((tab).alignment != alignmentLeft) ?(tab).position :-(tab).position, (str)

/* test */
int main()
{
  const Tab_t tabs[] = {
    {9, alignmentLeft},
    {32, alignmentRight},
    {-1, alignmentUndefined} /* array termination; not to be used as tab descriptor */
  }; 

  char s1[] = "s1";
  char s2[] = "s2";

  printf(FORMAT_TABBED_STRING"|"FORMAT_TABBED_STRING"|\n", TABBED_STRING(s1, tabs[0]), TABBED_STRING(s2, tabs[1]));
  printf(FORMAT_TABBED_STRING""FORMAT_TABBED_STRING"\n", TABBED_STRING(s1, tabs[1]), TABBED_STRING(s2, tabs[0]));  
} 
```

# node.js - jQueryMobile 的 NodeJS 模板引擎

> ID：13529714
> 
> 赞同：1
> 
> 时间：2012-11-23T13:01:49.880
> 
> 标签：node.js, jquery-mobile

使用 jQueryMobile 多页模板时，NodeJS 推荐什么模板引擎？

我需要每个视图中的逻辑，例如 include_once('html-header') 因为我永远不知道当前页面是呈现列表中的第一个（也就是它是否符合会话特权标准）。

我已经尝试过 Jade，但对于此类问题，它似乎是完全不恰当的解决方案。但也许我的设计是错误的？

可能类似于 PHP 的 <? 和 <?= 将最适合我的项目需求。

**编辑：** 我使用 nodejs 作为 HTTP 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:57:09.520

您可以使用 emberjs 并检测状态，并且可以根据需要将视图附加和删除到插座，Ember 使用车把模板引擎来呈现 html

[余烬](http://emberjs.com/)

[还要检查此页面中的网点](http://emberjs.com/guides/router_primer/)

# python - 分发、epydoc 和 setup.py

> ID：13529722
> 
> 赞同：1
> 
> 时间：2012-11-23T13:02:12.187
> 
> 标签：python, setup.py, epydoc

我想要一个`docs`为我的包运行 epydoc 的目标（比如）。我假设我需要创建一个新命令，但我运气不佳。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:27:24.310

[Babel 项目](http://babel.edgewall.org/)提供了几个在`setup.py`文件中使用的命令。

您需要`distutils.commands`使用命令定义一个入口点；来自[Babel`setup.py`文件](http://babel.edgewall.org/browser/trunk/setup.py#L32)的示例：

```
entry_points = """
[distutils.commands]
compile_catalog = babel.messages.frontend:compile_catalog
extract_messages = babel.messages.frontend:extract_messages
init_catalog = babel.messages.frontend:init_catalog
update_catalog = babel.messages.frontend:update_catalog
""" 
```

然后额外的命令可以作为`python setup.py commandname`.

入口点指向 的子类`from distutils.cmd import Command`。再次来自 Babel 的示例，来自[`babel.messages.frontend`模块](http://babel.edgewall.org/browser/trunk/babel/messages/frontend.py)：

```
from distutils.cmd import Command
from distutils.errors import DistutilsOptionError

class compile_catalog(Command):
    """Catalog compilation command for use in ``setup.py`` scripts."""

    # Description shown in setup.py --help-commands
    description = 'compile message catalogs to binary MO files'
    # Options available for this command, tuples of ('longoption', 'shortoption', 'help')
    # If the longoption name ends in a `=` it takes an argument
    user_options = [
        ('domain=', 'D',
         "domain of PO file (default 'messages')"),
        ('directory=', 'd',
         'path to base directory containing the catalogs'),
        # etc.
    ]
    # Options that don't take arguments, simple true or false options.
    # These *must* be included in user_options too, but without a = equals sign
    boolean_options = ['use-fuzzy', 'statistics']

    def initialize_options(self):
        # Set a default for each of your user_options (long option name)

    def finalize_options(self):
        # verify the arguments and raise DistutilOptionError if needed

    def run(self):
        # Do your thing here. 
```

# jquery - 添加一个按钮来改变背景

> ID：13529725
> 
> 赞同：-3
> 
> 时间：2012-11-23T13:02:34.597
> 
> 标签：jquery, css, fancybox-2

我有 Fancybox v2 的画廊。我想在不同的背景下观看。在打开的图片上，我想放置三个按钮，可以更改外部背景。是否可以实施？感谢您提供的任何帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:15:26.970

这完全取决于您使用的选择器。$(body).css({'background-image' : 'url(...your url here)'}) 将更改正文图像。如此完整的代码：

```
<style>
    body{
        background-image:url(image%20here);
    }
</style>
<script>
    $(document).ready(function(){
        $('#button1').click(function(){
            $(body).css({'background-image' : 'url("new%20image%20here")'});
        }
        /*alternative way*/
        $('#button2').click(function(){
            var url = 'new%20url%20one');
            changeBody(url);
        });
        $('#button3').click(function(){
            var url = 'new%20url%20two');
            changeBody(url);
        });
    });
    changeBody(url){
        $(body).css({'background-image' : url});
    }
<script>
</head>
<body>
    <button id="button1">Change 1</button></br>
    <button id="button2">Change 2</button></br>
    <button id="button3">Change 3</button></br>
</body> 
```

# asp.net - 休息 WCF 服务器“远程服务器返回错误：(400) 错误请求。” 大于 64k 的内容

> ID：13529726
> 
> 赞同：1
> 
> 时间：2012-11-23T13:02:35.173
> 
> 标签：asp.net, wcf, c#-4.0, rest

问题与 WCF 配置地狱有关，我开发了一个 wcf 休息服务器，我将需要它与 iPhone 和 android 客户端一起使用。问题是我认为我的自定义配置没有得到支持，因为客户端提供了大于 64kb 的数据`The remote server returned an error: (400) Bad Request.`。这是我的代码

*   **服务器配置：**

    ```
     <bindings>
          <webHttpBinding>
            <binding name="customHttpsBinding" openTimeout="00:10:00"
              receiveTimeout="00:10:00" sendTimeout="00:30:00" maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
              maxReceivedMessageSize="2147483647" transferMode="Streamed"  crossDomainScriptAccessEnabled="true" >
              <readerQuotas maxDepth="999999999" maxStringContentLength="2147483647"
                maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2097151" />
              <security mode="Transport">
                <transport proxyCredentialType="Basic" />
              </security>
            </binding>
          </webHttpBinding>
        </bindings>
        <behaviors>
          <endpointBehaviors>
            <behavior name="webHttpBehaviour">
              <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"
                automaticFormatSelectionEnabled="false"  faultExceptionEnabled="true"/>
              <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
            </behavior>
          </endpointBehaviors>
          <serviceBehaviors>
            <behavior name="customServiceBehavior" >
              <serviceMetadata httpsGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="true" />
              <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
            </behavior>

          </serviceBehaviors>
        </behaviors>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" >
        </serviceHostingEnvironment>
      </system.serviceModel> 
    ```

**服务器方法：**

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/content?contributorId={contributorId}&marketId={marketId}&fileExtension={fileExtension}",
    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
ActionResult PostUerContent(string contributorId,int marketId,string fileExtension, Stream streamContent); 
```

**全球.asax：**

```
protected void Application_Start(object sender, EventArgs e)
{
    ServiceRoute serviceRoute = new ServiceRoute("api", new WebServiceHostFactory(), typeof(MobileAPI));
    RouteTable.Routes.Add(serviceRoute);
} 
```

**客户端代码 (.Net)**

```
Stream fileStream = new FileStream(Server.MapPath("~/desert_.jpg"), FileMode.Open);
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://shaq.***.local/mobile/api/content?contributorId=10634&marketid=2&fileExtension=.jpg");
Stream serverStream = null;
try
{
    request.ContentType = "application/plain";
    request.Method = "POST";
    request.KeepAlive = true;
    request.ContentLength = fileStream.Length;
    request.SendChunked = true;
    request.AllowWriteStreamBuffering = false;
    serverStream = request.GetRequestStream();

    byte[] buffer = new byte[16384];
    while (true)
    {
        int bytesRead = fileStream.Read(buffer, 0, buffer.Length);
        if (bytesRead > 0)
        {
            serverStream.Write(buffer, 0, bytesRead);
        }
        else
        {
            break;
        }
     }

     request.GetResponse();

 }
 catch (Exception ex)
 { }
 finally
 {
     serverStream.Close();
     fileStream.Close();
 } 
```

# asp.net - SQLDataSource 更新不应该包含 null

> ID：13529729
> 
> 赞同：0
> 
> 时间：2012-11-23T13:02:42.917
> 
> 标签：asp.net

请看下面的代码：

```
<asp:GridView ID="GVHistoricNames" runat="server" 
                DataSourceID = "SQLHistoricNames" AutoGenerateColumns="False" 
                AllowPaging="True" HorizontalAlign="Center" DataKeyNames="id">
                <Columns>
                    <asp:TemplateField HeaderText="id">
                        <ItemTemplate>
                            <asp:HyperLink ID="idHyperlink" runat="server" NavigateUrl='<%# Eval("id", "frmidHistoricNames.aspx?id={0}") %>' Text='<%# Bind("id") %>'></asp:HyperLink>                          
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="LastUpdated">
                        <ItemTemplate>
                            <asp:Label ID="LastUpdatedLabel" runat="server" Text='<%# Bind("LastUpdated") %>'></asp:Label>                           
                        </ItemTemplate>
                    </asp:TemplateField>
                     <asp:TemplateField HeaderText="LastChecked">
                        <ItemTemplate>
                            <asp:Label ID="LastCheckedLabel" runat="server" Text='<%# Bind("LastChecked") %>'></asp:Label>                           
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Usercode">
                        <ItemTemplate>
                        <asp:DropDownList ID="ddlUsercode" runat="server" SelectedValue='<%# Bind("Usercode") %>'>
                        </asp:DropDownList>
                        </ItemTemplate>       
                    </asp:TemplateField>
                    <asp:TemplateField ShowHeader="False">
                            <ItemTemplate>
                                <asp:LinkButton ID="UpdateHistoricName" runat="server" CausesValidation="False" CommandName="Update" Text="Update"></asp:LinkButton>
                            </ItemTemplate>
                        </asp:TemplateField>
                </Columns>
            </asp:GridView>

            <asp:SqlDataSource ID="SQLidHistoricNames" runat="server" UpdateCommand="update dbaperson set Usercode=@Usercode WHERE ID=@ID">
            <SelectParameters>

              <asp:Parameter Name="Usercode" Type="String" />
           </SelectParameters>
           <UpdateParameters>
               <asp:Parameter Name="id" Type="Int32" />
                <asp:Parameter Name="Usercode" Type="String" />

              </UpdateParameters> 
```

当更新语句运行时，@Usercode 的参数始终为空。@ID 的参数不是。为什么@Usercode 的参数值为空？我不知道如何解决这个问题（我通常会单步执行代码，但这都是以声明方式声明的）。

# android - WebKit 移动浏览器：Android 和 iPhone 的区别

> ID：13529737
> 
> 赞同：1
> 
> 时间：2012-11-23T13:03:09.587
> 
> 标签：android, iphone, iframe, mobile-webkit, 3d-secure

我有一个问题，我正试图深入了解，但我似乎找不到合适的答案。我们的移动网站（目前正在测试中）使用 3D Secure iframe。

我们的测试已经证实，在使用 Android 手机（内置基于 webkit 的浏览器，三星 Galaxy S II）时 iframe 正确显示的位置，不幸的是，它不适用于 iPhone（同样，内置基于 webkit 的浏览器，Apple iPhone 4S）。iPhone 根本不显示 iframe。我不确定 iframe 是否不会显示，或者它是否只是位于屏幕外（但没有任何 CSS 属性应用于 iframe 或父级会影响其位置/浮动/边距/填充）。

不同手机上的两个基于 webkit 的浏览器之间是否存在重大差异？有没有人遇到过同样的问题？如果你能帮忙，我该如何解决？

```
<iframe id="authenticationFrame" name="authenticationFrame" src="3d-secure-bit" height="400" width="330"></iframe> 
```

谢谢，

# c++ - C++ 循环模板模式，包括父级的嵌套模板类

> ID：13529743
> 
> 赞同：2
> 
> 时间：2012-11-23T13:03:28.580
> 
> 标签：c++, crtp, incomplete-type

请帮忙，我需要在 2005 年的以下（不是实际的，只是说明性的）MSVC 代码中解开重复出现的依赖项。我正在使用 g++ 编译，如下所示：

```
g++ -std=c++x -I. -o -Wall -Wextra -pedantic example example.cpp 
```

**代码：**

```
template <typename R> struct AAA
{
    typedef R rep_t;

    static function(rep_t n, rep_t d) {return d;}
};

template <typename T> struct HELPER_CLASS
{
    //arithmetic operators:

    friend T operator/ (T const& lhs) {T res; res /=lhs; return res;}

    //... so on, also for comparison operators
}

template <typename  T=long> class BBB : public HELPER_CLASS< BBB<T> >
{

        typedef typename HELPER_CLASS< BBB<T> >::template AAA<T> P;
        typedef typename AAA<T>::rep_t rep_t;

    public:
        BBB& operator/=(BBB const& that) 
        {this->rep_=P::function(this->rep_, that.rep_); return *this;}

    private:
        rep_t rep_;
} 
```

编译这个，我得到以下错误：

> 错误：“struct HELPER_CLASS>”中没有名为“AAA”的类模板

当我在 HELPER_CLASS 中声明 AAA 时，它看起来像这样：

```
template <typename T> struct HELPER_CLASS
{
    //arithmetic operators:
    friend T operator/ (T const& lhs) 

    {T res; res /=lhs; return res;}
    //etc. for e.g. comparison operators

    template <typename R> struct AAA;
}; 
```

我留下了这个错误：

> 错误：嵌套名称说明符中使用了不完整的类型 HELPER_CLASS< BBB >::AAA'。

有没有办法说服 g++ 像 MSVC 一样松散地对待这些东西？

如何确保在需要时定义类型？谢谢！

# ruby - 将值传递给使用 Class.new 创建的类

> ID：13529745
> 
> 赞同：1
> 
> 时间：2012-11-23T13:03:33.337
> 
> 标签：ruby, metaprogramming

我有一个名称和值列表，我正在尝试读取并转换为类，因此我正在使用`Class.new`.

我想要的最终结果是许多类的工作方式就像定义一样：

```
module MyMod
  class AA < Base
    def self.value
      value1
    end
  end

  class AB < Base
    def self.value
      value2
    end
  end

  ...
end 
```

我当前的代码如下所示：

```
name = 'AA'
value = 'test'
MyMod.const_set name, Class.new(Base) do
  ???
end 
```

设置名称效果很好，但还没有弄清楚我在块中需要什么才能`value`进入。调用`def`不起作用，因为闭包`value`丢失了。

我设法让事情与：

```
temp = const_set name, Class.new(Base)
temp.define_singleton_method(:value) { value } 
```

但是，似乎应该有一种方法可以使用`Class.new`. 另外，我真的不确定`define_singleton_method`是否将方法放在正确的位置。它在我的测试中有效，但我不确定该方法是否真的在我认为的位置或调用链上的其他位置。我尝试了`class_variable_set`, `attr_reader`, `class_eval`,`instance_eval`和其他的各种组合，但它到了只能猜测和检查的地步。我想我还没有完全理解元编程：-/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:10:42.853

如果我正确理解了您的问题，这应该对您有用：

```
class Base
end

class AA < Base

  name = :Blah
  klass = self.const_set name, Class.new(Base)

  class << klass
    def value
      __method__
    end
  end

end

p AA::Blah.value
#=> :value 
```

更新：似乎您希望在块中定义它：

```
class Base
end

class AA < Base

  name = :Blah
  klass = Class.new(Base) do

    class << self
      def value
        __method__
      end
    end

  end
  self.const_set name, klass

end

p AA::Blah.value 
```

你尝试这个：

```
const_set name, Class.new(Base) do
  ...
end 
```

**它不起作用，因为该块是指`const_set`而不是`Class.new`**

如果您更`define_singleton_method`喜欢`class << self`：

```
class Base
end

class AA < Base

  name = :Blah
  klass = Class.new(Base) do

    self.define_singleton_method :value do
      __method__
    end

  end
  self.const_set name, klass

end 
```

最后，如果您真的想立即定义它们，请使用括号而不是`do...end`：

```
class Base
end

class AA < Base

  name = :Blah
  self.const_set name, Class.new(Base) {

    self.define_singleton_method :value do
      __method__
    end

  }

end 
```

### [这](http://cibox.org/slivu/stackoverflow?lang=ruby&file=passing-values-into-a-class-created-with-class-new.rb&run=true)是一个工作演示

# firebird - 如何将排序规则 UNICODE_CI/_AI 添加到旧数据库

> ID：13529746
> 
> 赞同：1
> 
> 时间：2012-11-23T13:03:38.253
> 
> 标签：firebird, firebird2.5

我有一个在 Firebird 2.5 服务器上运行的旧数据库，它缺少排序规则 UNICODE_AI 和 UNICODE_CI。元表上的直接选择表明了这一点。

```
select * from RDB$COLLATIONS where rdb$collation_name like 'U%' 
```

返回 UNICODE、UNICODE_FSS、UTF8 和 UCS_BASIC。

如何将这些排序规则添加到我当前的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:52:37.280

对元表进行备份还原可以解决该问题。

# asp.net - 将数据表导出到 Excel 工作表

> ID：13529748
> 
> 赞同：0
> 
> 时间：2012-11-23T13:03:55.437
> 
> 标签：asp.net, excel, export-to-excel, export-to-csv

我想将数据从数据表导出到 Excel 文件。我需要将文件保存在服务器上。我正在为这个项目使用控制台应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:11:27.877

由于您没有提到是否安装[`EPPlus`](http://epplus.codeplex.com/releases/view/42439)了 excel，我建议创建 excel 文件。它有一个方便的方法`LoadFromDataTable`：

```
using (var pck = new ExcelPackage())
{
    var ws = pck.Workbook.Worksheets.Add("Worksheet-Name");
    ws.Cells["A1"].LoadFromDataTable(dataTable1, true, OfficeOpenXml.Table.TableStyles.Medium1);
    using(var fileStream = File.Create(path))
        pck.SaveAs(fileStream);
} 
```

**编辑**我刚刚看到你已经标记了`export-to-csv`。

```
var lines = dataTable1.AsEnumerable()
    .Select(r => string.Join(",", r.ItemArray));
string csv = string.Join(Environment.NewLine, lines);

File.AppendAllText(path, csv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:11:10.013

```
if (DtReqDetails != null)
 {
    string attachment = "attachment; filename=History.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/vnd.ms-excel";
    string tab = "";
    foreach (DataColumn dc in DtReqDetails.Columns)
    {
      Response.Write(tab + dc.ColumnName);
      tab = "\t";
    }
    Response.Write("\n");
    int i;
    foreach (DataRow dr in DtReqDetails.Rows)
   {
      tab = "";
      for (i = 0; i < DtReqDetails.Columns.Count; i++)
       {
        Response.Write(tab + dr[i].ToString());
        tab = "\t";
       }
       Response.Write("\n");
   }
   Response.End();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:47:22.047

如果您使用的是 MS SQL，那么他们有一个用于将表格导出到 Excel 电子表格的内置[过程。](http://msdn.microsoft.com/en-us/library/ms140052.aspx)无需编码。

# php - 无法模拟 HTTP 302 响应

> ID：13529750
> 
> 赞同：2
> 
> 时间：2012-11-23T13:04:02.520
> 
> 标签：php, codeigniter, http, payment-gateway

我正在尝试将 PagSeguro（支付网关 - 巴西版的 PayPal）合并到我的网站中。客户完成 PagSeguro 后，他们将数据（通过 POST）发送到我指定的函数。但是，我没有收到 POST。在完成了我能想到的所有故障排除后，我联系了 PagSeguro。他们说他们的日志表明 POST 正在正常发送，但他们正在接收 HTTP 302 响应。

为了弄清楚为什么会发生这种情况，我创建了一个带有隐藏值的表单来模拟向我的函数发送 POST。我将此表格放在不同的域下，以防万一它与此有关。每次从我的模拟表单发送 POST 时，我都会收到 HTTP 200 响应，并且我的日志表明已收到 POST。

PagSeguro 怎么可能收到与我的模拟不同的响应？它可能与服务器有关还是与我的脚本有关？

这是应该接收 POST 的函数（使用 CodeIgniter）：

```
function pagseguro_retorno(){
    if (count($_POST) == 0) {
        return FALSE;
    }
    $msg = 'POST RECEIVED';
    $simulate = $this->input->post('Simulate');
    if ( ! empty($simulate)){
        $result = 'VERIFICADO';
        $msg .= ' FROM SIMULATOR';
    } else {
        $this->load->library(PagSeguroNpi);
        $result = $this->PagSeguroNpi->notificationPost();
    }
    $this->log($msg);
    if ($result == "VERIFICADO") {
        $id = $this->input->post('Referencia');//cart id
        $this->load->model('transacao_model');
        $trans_row = $this->transacao_model->get_transaction($id);
        if ( ! is_object($trans_row)){
            //LOAD NEW TRANSACTION
            if ( ! $this->new_transaction($id)){
                $notice = "Unable to load new transaction</p><p>";
                $this->log($notice);
                $notice .= '<pre>'.print_r($_POST, TRUE).'</pre>';
                $this->email_notice($notice);
            }
        }
        $this->load->model('carrinho_model');
        if($_POST['StatusTransacao'] == 'Aprovado'){
            $status = 'apr';
        }elseif($_POST['StatusTransacao'] == 'Em Análise'){
            $status = 'anl';
        }elseif($_POST['StatusTransacao'] == 'Aguardando Pagto'){
            $status = 'wtg';
        }elseif($_POST['StatusTransacao'] == 'Completo'){
            $status = 'cmp';
            //nothing more happens here - client must click on 'mark as shipped' before cart is removed and history data is loaded
        }elseif($_POST['StatusTransacao'] == 'Cancelado'){
            //reshelf - don't set $status, because the cart's about to be destroyed
            $this->carrinho_model->reshelf(array($id));
        }
        if (isset($status)){
            $this->carrinho_model->update_carrinho($id, array('status' => $status));
        }
    } else if ($result == "FALSO") {
        $notice = "PagSeguro return was invalid.";
        $this->log($notice);
        $notice .= '<pre>'.print_r($_POST, TRUE).'</pre>';
        $this->email_notice($notice);
    } else {
        $notice = "Error in PagSeguro request";
        $this->log($notice);
        $notice .= '<pre>'.print_r($_POST, TRUE).'</pre>';
        $this->email_notice($notice);
    }
} 
```

安全更新：

发布后，我很快意识到我正在向黑客尝试敞开心扉。该函数必须是公开的，因此任何知道该函数名称的人都可以访问它并发布“模拟”以立即进行验证。然后他们可以传递他们想要的任何数据。

我将函数的名称更改为无法猜测的名称，并且当不在生产模式下时，我禁用了模拟选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:33:50.660

问题是当正确的 CSRF 代码未随 POST 一起发送时，我的 CSRF 保护会导致重定向。我的模拟器正在工作，因为我复制了我在相关网站上制作的动态模拟器生成的 HTML。然后我粘贴 HTML 以创建一个静态模拟器并将其放在不同的 URL 下。除了 HTML，我还无意中粘贴了 CSRF 代码。静态模拟器运行良好，直到代码过期。几次后我就放弃了它，所以直到今天我才发现它不再起作用。

我知道这种确切的情况在未来 500 年内可能不会再次发生，但是如果没有为接收 POST 的功能禁用，像 CSRF 安全这样的事情可能会导致支付网关等问题。

# javascript - jQuery如何在表单发布返回后触发事件？

> ID：13529752
> 
> 赞同：6
> 
> 时间：2012-11-23T13:04:05.797
> 
> 标签：javascript, jquery, html, unobtrusive-javascript

我有一个昂贵的表单操作，它在服务器上构建一个 zip 文件并将其返回给浏览器。

```
<form action='/download' method='post'>

<input type='submit' value='download'/>

</form> 
```

我想在点击按钮时阻止页面，这样用户就不会重复点击按钮。

但是我想在表单返回后取消阻止页面。

成功完成表单后如何触发事件？

（我知道我可以通过将表单更改为 ajax 提交来触发此操作，但不会出现保存文件对话框......）

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:07:15.617

您可以在不使用 AJAX 的情况下处理此问题的一种方法是将表单的内容提交给`iframe`元素。如果您将 onsubmit 函数附加到禁用进一步提交的表单并将 onload 函数附加到 iframe，您应该能够禁止用户多次提交表单。

示例 HTML：

```
<form action="/download" method="post" target="downloadFrame" onsubmit="return downloadFile();">
  <input type="submit" value="download" />
</form>
<iframe style="width: 0px; height: 0px;" scrolling="no" frameborder="0" border="0" name="downloadFrame" onload="downloadComplete();"></iframe> 
```

示例 Javascript：

```
var downloading = false;
function downloadFile() {
    var isDownloading = downloading;
    downloading = true;
    return !isDownloading;
}
function downloadComplete() {
    downloading = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T14:00:56.283

似乎还没有人找到一种方法来检测浏览器本身的 post return，但是使用 AJAX 还有另一种可能性。虽然它涉及更多：

```
<script type="text/javascript">
    $(function () {
        $('#submitbtn').click (function () {
            window.setTimeout (dldone, 100);
            return true;
        });

        function dldone () {
            $.get ("/downloadstatus?rand="+$('#rand').val (), function (data) {
                if (data == 'done') {
                    // data generation finished, do something
                } else {
                   window.setTimeout (dldone, 100);
                }
            });
        }
    });
</script>
<form action="/generatedata" method="post">
    <input type="hidden" id="rand" value="[RANDOMVALUE]">
    <input type="submit" id="submitbtn" value="Download Data">
</form> 
```

在服务器上，您必须进行一些进程间通信以在数据生成完成时发出信号。由于我已经有一个数据库，所以我这样做了：

```
public function downloadstatusAction () {
    if ($this->db->fetchOne ("SELECT rand FROM dlstatus WHERE rand = ?", (int) $_GET["rand"])) {
        $db->delete ("dlstatus", array ("rand = ?" => (int) $_GET["rand"]));
        print "done";
    } else {
        print "loading";
    }
}

public function generatedataAction () {
    // generate data
    $this->db->insert ("dlstatus", array ("rand" => (int) $_POST["rand"]));
    // output data
} 
```

我相信有更优雅的方法可以做到这一点，但你明白了。这似乎在我测试的所有浏览器中都能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T14:00:03.103

我用这个：

```
function generatePdfZipViaWS_ajax(theUrl) {

    //=========================
    // testé avec Chrome 37.0.2062.124 m, Firefox  32.0.3
    // ça block avec IE9 à cause du xmlHttp.overrideMimeType
    //=========================
    var xmlHttp = new XMLHttpRequest();

    var alert = document.getElementById("alertError");
    block_UI();

    var url = "undefined";

    xmlHttp.open("GET", theUrl, true);
    xmlHttp.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xmlHttp.overrideMimeType("application/octet-stream");
    xmlHttp.responseType = "blob";

    xmlHttp.onload = function(oEvent) {
        if (xmlHttp.status == 200) {

            deblock_UI();
            // a mettre apres un certain temps:  window.URL.revokeObjectURL(url);

        } else {
            alert.style.display = "block";
            deblock_UI();

            //  console.log("Error " + xmlHttp.status + " occurred downloading your file.<br \/>");
        }
    };

    xmlHttp.onreadystatechange = function() {

        if (xmlHttp.readyState == xmlHttp.DONE) {

            if (xmlHttp.status == 200) {

                var contentDisposition = xmlHttp.getResponseHeader("Content-Disposition");
                var type = xmlHttp.getResponseHeader("Content-Type");

                var reponseType = xmlHttp.responseType;

                var pos1 = contentDisposition.indexOf("archive");
                var pos2 = contentDisposition.lastIndexOf(".zip") + 4;
                var fileName = contentDisposition.substring(pos1, pos2);

                if (fileName === null) {
                    fileName = "archivexxxxxxxxxxxxxx.zip";
                }

                console.log("fileName:" + fileName);

                var blob = xmlHttp.response;
                url = URL.createObjectURL(blob);

                var a = document.createElement('a');
                a.style = "display: none";
                a.href = url;
                a.download = fileName;
                a.type = type;
                document.body.appendChild(a);
                a.click();
                //a.delete();

                deblock_UI();

            } else {

                var msg =" Une erreur "  + xmlHttp.status +" est apparue pendant que votre demande était traitée.\n"

                msg = msg + "Merci de réessayer plus tard!";

                alert.innerHTML = msg;
                alert.style.display = "block";

                deblock_UI();
                console.log(msg);
            }
        }
    };
    xmlHttp.send();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-16T16:39:57.663

I don't have time to write a proper answer right now, but since nobody else has a good answer, I think a "Mutation Observer" would work... [https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

# javascript - 如何在jquery中更改没有ID的元素？

> ID：13529756
> 
> 赞同：6
> 
> 时间：2012-11-23T13:04:18.003
> 
> 标签：javascript, jquery, html

HTML 代码如下所示：

```
<div id="select1_chzn" class="chzn-container chzn-container-single" style="width: 250px;">
     <a class="chzn-single chzn-single-with-drop"
      href="javascript:void(0)" tabindex="-1">
     <span>AFF5</span>
<div></div>
</div> 
```

我想知道如何在 jquery 中更改`<span>AFF5</span>`为。`<span>Another</span>`有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T13:06:01.860

可以使用它父母的ID

```
$("#select1_chzn span").text("Another"); 
```

**更新**

使用 > 表示直接后代，而空格表示后代不一定是直接的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T13:07:10.623

使用 CSS 选择器

```
#select1_chzn span 
```

我不是 jquery 人，但我在这里看到了足够多的问题来猜测你会使用

```
$('#select1_chzn span') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T13:06:42.993

```
$("#select1_chzn span").text("Another"); 
```

在这种情况下，应该简单地使用标准 CSS 后代选择器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T13:06:53.977

**父子** **，**像这样：

```
$("#select1_chzn span").text('Another'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-23T13:11:17.720

标题说“如何在 jquery 中更改没有 ID 的元素？”

如果你想在 div中定位所有*没有 ID*`span`的s ，你可以这样做*`#select1_chzn`*

 *```
$("#select1_chzn span:not([id])").text(...); 
```

好像你想要*最后一个* `span`：

```
$("#select1_chzn span:last").text(...); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T13:07:25.600

您可以使用任何可用的 css-selector 来选择 jquery 对象，例如这应该可以工作：

```
$('span').text('Another'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T13:12:43.913

如果这是您识别它们的唯一方法，您实际上可以根据它们的内容搜索跨度。

```
​$("span:contains(AFF5)").text( "Another" ); 
```

但是，这是区分大小写的。*

# node.js - Node.js connect.bodyParser 在 GET 请求中抛出 400

> ID：13529766
> 
> 赞同：0
> 
> 时间：2012-11-23T13:05:33.460
> 
> 标签：node.js, node.js-connect

我写了一个 node.js 代理服务器（它[在](http://bit.ly/R50nrE)github 上）

问题是 connect.bodyParser 不能很好地工作。对于这个 probject，我编写了自己的 bodyParser（参见文件“服务器”），但现在我再次使用 connect.bodyParser 进行测试。简而言之，我现在有类似的东西：

```
app.use(connect.bodyParser()) 
    .use(connect.query())
    .use(serveFromDB)
    .use(actAsProxyServer)
    .use(cacheContent)
    .use(function(err, req, res, next) {
        console.log("ERROR: " + JSON.stringify(err)) ;
        console.log("URL=" + req.url) ;
        console.dir(req.headers) ;
        res.setHeader('Content-Type', 'application/json');
        res.end(JSON.stringify(err));
}) ; 
```

这是错误函数的输出：

```
ERROR: {"status":400}
URL=/Client/rest/cache/Clients/user123/X7X1

{ host: 'localhost:8000',
  connection: 'keep-alive',
  'x-requested-with': 'XMLHttpRequest',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11',
  'content-type': 'application/json; charset=utf-8',
  accept: 'application/json, text/javascript, */*; q=0.01',
  referer: 'http://localhost:8000/Client/index.jsp?cache=true',
  'accept-encoding': 'gzip,deflate,sdch',
  'accept-language': 'en-US,en;q=0.8',
  'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
  cookie: 'JSESSIONID=d1cbd411e30bcfb759e29585ee23' } 
```

这个 GET 请求唯一做的就是调用那个 url（不带任何参数）

为什么**bodyParser**在这个 GET 请求上抛出错误有什么建议吗？

干杯

[更新：我在这里](http://www.senchalabs.org/connect/bodyParser.html)找到了 bodyParser 的代码。在 json.js 中，它最终会抛出错误，因为它试图将空字符串（因为没有正文）转换为 json。我虽然 bodyParser 仅用于 POST 请求！

UPDATE1：发现问题：[https](https://github.com/documentcloud/backbone/pull/267) ://github.com/documentcloud/backbone/pull/267我想我的 GET 请求中有一个内容类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T12:14:00.207

看看[B2MSolutions / gzip-bodyparser](https://github.com/B2MSolutions/gzip-bodyparser)

# java - 我应该在 Android 应用程序中使用哪种图像格式？

> ID：13529767
> 
> 赞同：9
> 
> 时间：2012-11-23T13:05:42.887
> 
> 标签：java, android, graphics

我正在为 Android 编写游戏，我想知道应该为游戏中的图形使用哪种图像。

我告诉客户以尽可能高（和合理）的分辨率创建艺术品，我会缩小它，但最近有人告诉我，**SVG**会比普通**PNG**更好，因为 Android 设备使用了很多分辨率并且图像必须缩放。大多数图形将是静止的背景或对象，但会有一些动画。我会用`AnimationDrawable`这个。

是否有一些图形文件格式的一般指南（我查看了[android 开发者](http://developer.android.com/)网站但没有找到任何东西）或者只是使用我目前拥有的任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:33:44.310

> 最近有人告诉我，例如 SVG 会比纯 PNG 更好

Android 本身不支持 SVG。有支持 SVG 的第三方库，例如[这个](http://code.google.com/p/svg-android/).

> 由于Android设备使用了很多分辨率，并且必须缩放图像

如果这确实是您的平面设计师告诉您的，那么您需要聘请其他平面设计师。迅速地。

分辨率通常是没有意义的。重要的是屏幕尺寸，对于图形来说更重要的是屏幕密度。Android 支持不同密度的图像的多个版本，并且还可以将图像从一种密度重新采样到另一种密度，因此您可以直接“拨入”您希望支持多少密度。这是[昨天关于屏幕密度的博客文章，](http://code.neenbedankt.com/dpi-hell) Android 文档中也有大量关于此的材料。

现在，您的图形设计师可能会“在内部”使用 SVG 并生成密度缩放的 PNG 文件供您使用——这是完全合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:33:00.557

> 是否有一些图形文件格式的通用指南

是的，[在这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)。它说

> Android 支持三种格式的位图文件：（**`.png`**首选）、**`.jpg`**（可接受）、**`.gif`**（不鼓励）。

没有对 SVG 可绘制对象的本机支持，但有支持 SVG 的库

请参阅[Android 上的 SVG 支持](https://stackoverflow.com/questions/3889882/svg-support-on-android)

您通常会将 SVG 图像转换为每个密度的像素图像。[Android 还为菜单图标](http://developer.android.com/guide/practices/ui_guidelines/icon_design_menu.html)等图标定义了一些标准尺寸

拥有用作 SVG 的图像的来源并不是一个坏主意。SVG 和其他基于矢量的图形通常比像素图形更好地缩放到不同的大小。尤其是当您需要放大图像时（例如Play 商店中使用[的高分辨率图标）。](http://www.droid-life.com/2012/06/29/high-res-icons-now-included-in-google-play-store-app-listings/)

还要小心`AnimationDrawable`，它不适用于全屏动画。只是小的动画图标等。

# php - 电视节目数据库：删除具有外键季节的节目

> ID：13529774
> 
> 赞同：2
> 
> 时间：2012-11-23T13:05:59.053
> 
> 标签：php, mysql

我正在为我的电视剧网站构建一个背板，我有 2 张桌子。一个叫节目，另一个叫季节。

结构：显示 - `show_id PK`,`show_title`

季节 - `season_id PK`, `show_id`(外键),`season`

我在后端的表格中列出了所有电视节目名称，并带有一个删除按钮，但是当我按下删除时，它不会删除该节目，因为它也附有季节。如果我尝试删除没有附加季节的节目，它将毫无问题地从数据库中删除。

我的代码在 remove.php 上看起来像这样：

```
$id=$_GET['id'];

// Delete show
$sql="DELETE FROM shows WHERE shows_id='$id'";

$result=mysql_query($sql); 
```

我猜我还需要删除分配给同一个节目的季节，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:10:42.913

```
$id=$_GET['id'];

// Delete all seasons for this show first.
$sql="DELETE FROM seasons WHERE show_id='$id'";

// Now, Delete show
$sql="DELETE FROM shows WHERE id='$id'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:32:08.967

如果您将 InnoDB 用于您的 MySQL 表，那么如果您检查/更改了外键上的约束，那么您的生活可能会非常简单。

更改这些取决于您如何设置它，无论您是使用命令行界面还是某些 GUI 来管理您的数据库。

但是，当您在季节表中创建外键字段时，您设置了约束。如果您将该约束更新为如下：

**更新时：什么都不做 \\ 删除时：级联**

现在，每当您从节目中删除一行时，由于级联规则，任何存在的相关季节行都将被自动删除。非常有帮助，是设置规范化数据库的必备工具。

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# windows - 在 Windows 8 中点击 IE10 灰色方块

> ID：13529777
> 
> 赞同：4
> 
> 时间：2012-11-23T13:06:15.990
> 
> 标签：windows, internet-explorer

如何禁用微软程序员的这种可怕的设计东西？当我单击链接时会发生这种情况。另一个可怕的特性是输入元素上的虚线边框。在过去，这个边界通过添加 outline: none 来消除输入的焦点状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:15:50.383

尝试以下元

```
<meta name="msapplication-tap-highlight" content="no" /> 
```

它适用于 IE10/Windows Phone 8，不确定 Windows 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:43:26.900

无论出于何种原因，元标记在 Windows 7 IE10 上对我不起作用，我必须设置

```
a:active{
  background: inherit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:24:20.660

```
background: inherit; 
```

如果您的背景颜色设置不同或有多个设置，则上述方法不起作用。

下面是失败证明。

```
a:active{
background: none;
} 
```

# php - PHP脚本在一定时间后没有执行

> ID：13529778
> 
> 赞同：0
> 
> 时间：2012-11-23T13:06:16.087
> 
> 标签：php, facebook-graph-api

我正在使用 Facebook 图形 api 来获取我的朋友的喜欢和他们的用户信息，这些信息是公开的。但是我遇到了一个奇怪的问题，我的通过图形 api 获取所有数据的 php 脚本在一定数量的请求后停止。我有近 180 个朋友，我得到了 124 个朋友的数据。在我收到第 124 个值后，PHP 脚本既不会将其插入数据库，也不会引发错误。它只是停止执行。超时可能是原因之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:20:17.953

是的，这是 php 超时问题，您可以通过在脚本顶部使用以下代码行来设置 php 的执行时间

```
ini_set('max_execution_time', 100); //300 seconds 
```

投入尽可能多的时间来执行你的 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:13:45.690

如果超时是问题，则意味着设置最大执行时间`set_time_limit(0);`

# java - AlarmManager 第二次过早触发 PendingIntent

> ID：13529783
> 
> 赞同：2
> 
> 时间：2012-11-23T13:06:31.793
> 
> 标签：java, android, alarmmanager, android-pendingintent

我有这个代码：

设置闹钟：

```
public void setAlarm()
{
    Calendar Calendar_Object = Calendar.getInstance();

    Calendar_Object.add (Calendar.DAY_OF_YEAR, 1);

    Calendar_Object.set(Calendar.HOUR_OF_DAY, 0);
    Calendar_Object.set(Calendar.MINUTE, 0);
    Calendar_Object.set(Calendar.SECOND, 1);

    Intent myIntent = new Intent(Main.this, AlarmReceiver.class);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(Main.this,
            0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT);

    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

    alarmManager.setRepeating(AlarmManager.RTC, Calendar_Object.getTimeInMillis(),1000*60*60*24, pendingIntent);
} 
```

广播接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

     @Override
     public void onReceive(Context context, Intent intent) {

      Intent myIntent = new Intent(context, NotificationService.class);
      context.startService(myIntent);
    }

} 
```

服务：

```
public class NotificationService extends Service {

private NotificationManager mManager;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    super.onCreate();

}

@SuppressWarnings("deprecation")
@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    mManager = (NotificationManager) this.getApplicationContext()
            .getSystemService( this.getApplicationContext().NOTIFICATION_SERVICE);

    Intent intent1 = new Intent(this.getApplicationContext(), ABC.class);

    Notification notification = new Notification(R.drawable.ic_launcher,
            "xxx", System.currentTimeMillis());

    intent1.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
            | Intent.FLAG_ACTIVITY_CLEAR_TOP);

    PendingIntent pendingNotificationIntent = PendingIntent.getActivity(
            this.getApplicationContext(), 0, intent1,
            PendingIntent.FLAG_UPDATE_CURRENT);

    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notification.setLatestEventInfo(this.getApplicationContext(),
            "abc", "xyz",
            pendingNotificationIntent);

    mManager.notify(0, notification);
    }
} 
```

在 00:00:01 设置闹钟后，一切都很完美，但下次问题又发生了。PendingIntent 在 24 小时间隔之间触发 6 到 8 次。我不记得每个触发器的时间是否相同，但我希望每天一次。代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:34:28.610

这将创建一个每天 00:05 响起的闹钟，重要的部分是`AlarmManager.INTERVAL_DAY`

```
Date date = new Date();
Calendar cal = Calendar.getInstance();
cal.setTime(date);
cal.set(Calendar.HOUR_OF_DAY, 0);
cal.set(Calendar.MINUTE, 5);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);
cal.add(Calendar.HOUR, 24);

PendingIntent pi = PendingIntent.getBroadcast(context, 0, alarmIntent, 0);
mgr.cancel(pi);
mgr.setRepeating(AlarmManager.RTC, cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi); 
```

另外，不要忘记在重新设置新警报时始终取消以前的类似警报，否则它们都会关闭，旧设置警报和新警报，见上文`mgr.cancel(pi);`

# c++ - opencv打开图像没有抽搐

> ID：13529786
> 
> 赞同：0
> 
> 时间：2012-11-23T13:06:43.903
> 
> 标签：c++, image, opencv

我正在使用opencv2打开一系列图像（在树莓派上）我发现过渡非常生涩（即打开图像）有什么办法可以平滑这个吗？
下面的代码片段是我正在使用的 atm （我想我应该使用 mat :)

```
 void loadImage()
{
int nImages = 6;
for (int i = 0; i < nImages; ++i)
 {
IplImage *image;
char filename[100];
strcpy(filename, "images/");

char frameNo[10];
sprintf(frameNo, "%03i", i);

strcat(filename, frameNo);
strcat(filename, ".jpg");

image = cvLoadImage(filename);
cvNamedWindow("pic");
cvShowImage("pic",image);
cvMoveWindow("pic", 0, 0);
cvWaitKey(1000);
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:27:43.420

您必须在其他线程中加载图像，或者如果您很懒，则必须在循环之前加载。它应该是这样的：

```
void loadImages() {
IplImage *images[NUM_IMAGES];

 images[0] = cvLoadImage("filename1.jpg");
 images[1] = cvLoadImage("filename1.jpg");
 images[2] = cvLoadImage("filename1.jpg");
 .
 .
 . (etc)
}

void showImages(){
    loadImages();
    for (int i = 0; i < nImages; ++i){

        cvNamedWindow("pic");
        cvShowImage("pic",images[i]);
        cvMoveWindow("pic", 0, 0);
        cvWaitKey(1000);
    }
} 
```

当然，图像的指针数组`*images[]`应该声明为全局的，或者你应该将它从`loadimages()`函数传递给`showImages()`（更好的解决方案）。

# python - 使 django 日期不可编辑

> ID：13529790
> 
> 赞同：0
> 
> 时间：2012-11-23T13:07:03.743
> 
> 标签：python, django, date

我正在用 django 做一个博客。我有一个入门类，有标题、内容、发布日期等。

日期字段应保存创建条目的日期。但是如果我编辑条目它会改变（如果我改变了内容或标题）

这是模型的代码：

```
class Entry(models.Model):
    title = models.CharField(max_length=70)
    content = models.TextField()
    pub_date = models.DateTimeField(auto_now=True)
    image = models.TextField()
    tags = models.ManyToManyField(Tag)

    def __unicode__(self):
        return self.title

    class Admin:
        pass

    class Meta:
        ordering = ['-pub_date',] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:12:19.970

更改`auto_now`为`auto_now_add`。

来自 django 文档：

> `DateField.auto_now`
> 
> 每次保存对象时自动将字段设置为现在。对于“最后修改”的时间戳很有用。请注意，始终使用当前日期；它不仅仅是您可以覆盖的默认值。
> 
> `DateField.auto_now_add`
> 
> 首次创建对象时自动将字段设置为现在。用于创建时间戳。请注意，始终使用当前日期；它不仅仅是您可以覆盖的默认值。

# python - 合并 2 个列表并删除重复条目

> ID：13529794
> 
> 赞同：4
> 
> 时间：2012-11-23T13:07:15.247
> 
> 标签：python, python-2.7

我有一段代码用这段代码加载了 2 个列表：

```
with open('blacklists.bls', 'r') as f:
            L = [dnsbls.strip() for dnsbls in f]
with open('ignore.bls', 'r') as f2:
            L2 = [ignbls.stip() for ignbls in f2] 
```

dnsbls 包含：

```
list1
list2
list3 
```

ignbls 包含

```
list2 
```

我想要做的是合并 dnsbls 和 ignbls，然后删除任何出现多次的行并用“for”打印这些行。我在想类似的事情：

```
for combinedlist in L3:
            print combinedlist 
```

在 aboe 示例中将打印出：

```
list1
list3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:09:23.913

您需要使用[集合](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)而不是列表：

```
L3 = list(set(L).difference(L2)) 
```

示范：

```
>>> L=['list1','list2','list3']
>>> L2=['list2']
>>> set(L).difference(L2)
set(['list1', 'list3'])
>>> list(set(L).difference(L2))
['list1', 'list3'] 
```

出于您的目的，您可能不必再次将其转换回列表，您可以很好地迭代结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:14:00.473

如果忽略小于黑名单（我认为通常是这种情况），那么（未经测试）：

```
with open('blacklists.bls') as bl, open('ignore.bls') as ig:
    bl_for = (line.strip() for line in bl if 'for' not in line)
    ig_for = (line.strip() for line in ig if 'for' not in line)
    res = set(ig_for).difference(bl_for) 
```

# c# - 如何加载类型库以在 C# 中解析它？

> ID：13529798
> 
> 赞同：7
> 
> 时间：2012-11-23T13:07:26.087
> 
> 标签：c#, .net, com, typelib

在非托管代码中，我可以使用`LoadTypeLib()`获取`ITypeLib*`指针并使用它来查看类型库以查找它包含的接口。

C# 中有`System.Runtime.InteropServices.ComTypes.ITypeLib`接口，但我找不到`LoadTypeLib()`函数的等价物。

如何`ITypeLib`在 C# 中加载类型库并获取引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T13:16:48.520

直接从 System.Design.NativeMethods 复制而来，Reflector 很有用：

```
[DllImport("oleaut32.dll", PreserveSig=false)]
public static extern ITypeLib LoadTypeLib([In, MarshalAs(UnmanagedType.LPWStr)] string typelib); 
```

# asp.net - 跟踪 Session_Start 方法中发生的重复错误

> ID：13529803
> 
> 赞同：0
> 
> 时间：2012-11-23T13:08:04.260
> 
> 标签：asp.net, session

我在 Global.asax.cs 文件（ASP.NET、C#、.NET Framework 4）的 Session_Start 方法中经常出现错误。错误似乎发生在以下行

```
if (!OnlineVisitorsUtility.Visitors.ContainsKey(currentContext.Session.SessionID)) 
```

它基本上检查这个 sessionId 是否在当前的 SessionIds 列表中。

错误是

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.
at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
at TestSystem.WebSite.Global.Session_Start(Object sender, EventArgs e) Global.asax.cs:line 142
at System.Web.SessionState.SessionStateModule.CompleteAcquireState()
at System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData)
at System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

没有用户针对该错误登录（因为这是在任何人登录之前引发的）。但是没有用户报告尝试登录的错误，我们看到这个的唯一原因是因为它出现在错误日志中。

该错误每分钟左右发生几天，然后停止几天，然后重新浮出水面。我们记录每个错误的远程主机 ip，对于我查看的每个错误实例，它都是不同的。我最初认为这是某种自动化的工作，但是当我跟踪位置 IP 地址时，我发现它源自我们有用户的地方，我们没有的地方和一个私人（我猜是内部）IP 地址.

我们无法在我们的内部测试和 QA 系统上复制此错误。我在两个方面寻求帮助，首先，任何人都知道可能导致此问题的原因，其次，如果没有，我可以记录哪些信息来阐明导致此问题的原因？

谢谢，尼尔

编辑

上面错误跟踪中的字典是一个存储 SessionId 和 WebsiteVisitor 类的字典。

```
public static Dictionary<string, WebsiteVisitor> Visitors = new Dictionary<string, WebsiteVisitor>(); 
```

我们仅在检查了上面的 ContainsKey if 语句后才添加此内容。整个声明如下

```
lock (visitorsLock)
{
    if (!OnlineVisitorsUtility.Visitors.ContainsKey(currentContext.Session.SessionID))
    {
        OnlineVisitorsUtility.Visitors.Add(currentContext.Session.SessionID, new WebsiteVisitor(currentContext));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:45:01.950

听起来你的`Visitors`字典有同步问题。[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)集合不是线程安全的，因此需要控制读/写访问。我看到您使用锁定对象来解决此问题，但是，这种方法的问题是 IIS 不能保证每个请求都将在同一个 AppDomain 实例甚至同一个工作进程下运行。

而不是跨线程锁定，您需要查看跨进程锁定，我建议使用[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex%28v=VS.90%29.aspx)。

**更新**

实际上@RichardDeeming 提出了一个很好的观点 - 访客对象不会在多个进程/AppDomain 之间共享，因此在这方面它*不会*是同步问题，但是，字典正在*以某种方式*损坏。我建议切换到使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)并让框架为您处理同步。

通常，Web 应用程序中的静态属性不是一个好主意，因为它们不能在多个 AppDomain 之间共享，您最终可能会遇到这样的神秘问题。

# ruby-on-rails - 如何在活动记录 where 子句中使用通配符同时防止 sql 注入

> ID：13529804
> 
> 赞同：24
> 
> 时间：2012-11-23T13:08:04.540
> 
> 标签：ruby-on-rails, activerecord

来自rails active record querying [guide on sql injection](http://guides.rubyonrails.org/active_record_querying.html)

> 此代码非常可取：
> 
> > Client.where("orders_count = ?", params[:orders])
> 
> 到这段代码：
> 
> > Client.where("orders_count = #{params[:orders]}")

我的问题是我想使用带有通配符的 LIKE 子句。我的旧查询看起来像这样 -

```
User.where("first_name LIKE '%#{first_name}%'") 
```

哪个容易受到 sql 注入的影响，但如果我这样做：

```
User.where("first_name LIKE '%?%'", first_name) 
```

然后生成的 sql 如下所示：

```
SELECT "users".* FROM "users"  WHERE (first_name LIKE '%'michael'%') 
```

由于额外的单引号，这是无效的。

使用通配符和 LIKE 子句的最佳方法是什么，同时还可以防止 sql 注入攻击？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-23T13:19:20.810

您应该像这样修改您的查询

```
User.where("first_name LIKE (?)", "%#{first_name}%") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-06T14:55:56.427

更新：Rails 对此进行了一些改进。

Arel 允许您使用简单的 DSL 构建查询，作为奖励，它包含在 ActiveRecord 中。这是您的用例的示例。

```
User.where(User.arel_table[:first_name].matches("%#{first_name}%")) 
```

`ILIKE`这将使用而不是进行不区分大小写的搜索`LIKE`。

还要注意的是，Arel 是 Rails 内部的，并且故意不被框架公开。

# silverlight - UI 冻结而不是在 Silverlight 中显示 BusyIndi cator

> ID：13529807
> 
> 赞同：1
> 
> 时间：2012-11-23T13:08:26.863
> 
> 标签：silverlight

这是另一个问题的相关问题： [BackgroundWorker in Silverlight ViewModel](https://stackoverflow.com/questions/13528486/backgroundworker-in-silverlight-viewmodel)

我有一个 TabControl，当用户选择菜单选项时，我会在其中加载许多 TabItem。我通过将 TabControl ItemsSource 绑定到 ObservableCollection 来加载此选项卡。当我向此集合添加新的 TabItem 时，它会完美显示。

问题是我已经意识到，由于用户按下按钮直到创建选项卡（ViewModel 和 View 创建需要几秒钟），屏幕被冻结。

我尝试在调用“loadTab”之前设置“IsBusy”，但它没有显示出来……我已经尝试了几乎所有异步调用的方法，但是 UI 线程正在使用中，当我创建新的选项卡控件。

有什么技巧我输了吗？？？有任何想法吗？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:17:02.433

你看过这个帖子吗？

[http://www.dotnetspark.com/kb/3524-doesnt-your-girlfriend-deserves-more-time.aspx](http://www.dotnetspark.com/kb/3524-doesnt-your-girlfriend-deserves-more-time.aspx)

当您避免加载事件中的繁重内容并在完成加载所有资源后使 Visible=true 时，它​​会有所帮助，因此从这个意义上说，您可以避免用户想要点击尚未准备好的内容。

不确定它是否有帮助，但这个想法怎么样？

```
public void DoStuff(Object values)
{
//your values object could be anything, 
//they might even be some objects from your form
//as long as you dont modify them in the other thread
imgLoading.Visible=true;
var client = new Proxy();
client.OnWorkCompletedAsync +=client_OnCompleted() ;
client.Work(values);
}

void client_OnCompletedAsync(object sender, EventArgs e)
{
    imgLoading.Visible=false;
    //now you can update the UI with other stuff
} 
```

# java - 遍历两个数组

> ID：13529827
> 
> 赞同：0
> 
> 时间：2012-11-23T13:10:23.200
> 
> 标签：java, arrays, loops

我有两个不同的数组一个`ArrayList`双精度数组和一个字符串数组

```
 public class tester {

        private final static String TIME[]={ "8:00", "9:00", "10:00", "11:00", 
            "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00"  };

        public static void main(String[] args){
            ArrayList<Double> stat = new ArrayList<>();
            stat.add(1.0);
            stat.add(2.0);
            stat.add(3.0);
            stat.add(4.0);
            stat.add(5.0);
            stat.add(6.0);
            stat.add(7.0);
            stat.add(8.0);
            stat.add(9.0);
            stat.add(10.0);
            stat.add(11.0);
            stat.add(12.0);
            int i = 0;
            for (String time : TIME) {
                System.out.println(time+" "+stat.get(i));
                i++;
            } 
```

我的问题很简单，如果我想让每个数组的相同位置匹配，这是遍历每个数组的最佳方法吗？所以`stat.get(0) ==TIME.get(0)`呢？

**更新**

首先感谢大家的快速回复，我喜欢创建课程的想法，但是您需要知道一些事情。

你看到的是一个测试类，我用它来测试我的数据。

我知道这两个数组的大小总是相同的，因为 stat ArrayList 通常定义如下：

stat 是从数据库中获得的数据的计算值，stat 的值基于时间，然后发送回 GUI 以放入图形和表格中。

这意味着对于每个 TIME 都有一个现有值，因此 stat.get(0) 始终等于 TIME.get(0) == "8:00"。

考虑到这一点，您仍然认为我应该创建一个类还是应该保留下面显示的类，然后添加一个包含数据的 HashMap，然后遍历该映射以在我的 GUI 中插入数据？

```
public class Statistics {
    private ArrayList<CallQueue> queues = new ArrayList<CallQueue>();
    private ArrayList<Double> averageData = new ArrayList<Double>();
    private Provider p;

    public Statistics(){
         try {
            this.p = new Provider();
        } catch (DopeDBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    /**
     * This recursive method calculates the average of each time table and then adds its to the arrayList in the following order:
     * 8.00  = 0
     * 9.00  = 1
     * 10.00 = 2
     * 11.00 = 3
     * 12.00 = 4
     * 13.00 = 5
     * 14.00 = 6
     * ect.
     * @param time
     */
    public void calculateAverage(){
        int data = 0;
        for (int i = 8; i < 20; i++) {
            for (CallQueue cq : queues) {
                data += cq.getCallsByTime(i);
            }
            if (data == 0) {
                Main.createErrorMessage("Fejl i dataen! \r\n kontakt venligst ansvarlige i Dope");
            }
            averageData.add((double) data/11);
        }
    }
    /**
     * @author MRCR
     * This method recives the object list from the database and sets the currentlist to the list recived.
     */
    public void setQueues(Calendar start, Calendar end){
        try {
            queues = p.getInformation(start, end, queues);
        } catch (DopeDBException e) {
            // TODO Auto-generated catch block
            Main.createErrorMessage("Message");
        } catch (DopeResultSetException e) {
            // TODO Auto-generated catch block
            Main.createErrorMessage("Message");
        }

    }
    /**
     * This method returns the calculated DataList list.
     * @author MRCR
     * @return averageData
     */
    public ArrayList<Double>getData(Calendar start, Calendar end){
        setQueues(start, end);
        calculateAverage();
        return averageData;
    }

}

import java.util.HashMap;

public class CallQueue {
    private String type;
    private HashMap<Integer, Integer> data = new HashMap<Integer,Integer>();
    public CallQueue(String type){
        this.type = type;
    }
    public String getType(){
        return type;
    }
    public int getCallsByTime(int time){
        return data.get(time);

    }
    public void addCallsByTime(int hourOfDay, int callAmount) {
        data.put(hourOfDay, callAmount);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:13:47.907

我会首先检查 2 个数组的长度是否相同。然后使用 for 循环进行迭代：

```
final int timeLength = TIME.length;
if (timeLength != stat.size()) {
    //something may not be right
}
for (int i = 0; i < timeLength; i++) {
    System.out.println(time[i]+" "+stat.get(i));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:12:10.423

```
for (int i = 0; i < TIME.length; i++) {
  // use i to access TIME[i] and stat.get(i)
} 
```

但您必须确保这些数组的长度相同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:14:32.830

您还需要考虑长度部分。您只需要迭代到可能涵盖数组和列表的最大长度。

因此，您可以首先找到它们之间的较低长度。然后迭代直到那个长度： -

```
int lower = TIME.length < stat.size()? TIME.length: stat.size();

for (int i = 0; i < lower; i++) {
    System.out.println(TIME[i] + " : " + stat.get(i);
} 
```

* * *

现在这是迭代两个数组的部分。

**现在我想说**，如果您必须同时迭代两个数组，只需`class`使用属性创建一个，您已经为其创建了数组。

因此，创建一个具有以下属性的类： -`time`和`stats`. 然后创建一个`List<YourClass>`. 并遍历类实例列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T13:13:00.907

```
if (TIME.length!=stat.size()) {
    // handle error
}

int count = stat.size();
for (int i=0; i<count; ++i) {
    double d = stat.get(i);
    String s = TIME[i];
} 
```

## 然而

正如评论中所指出的，您应该定义一个将收集两个数组信息的类。

例如：

公共类 MyTime { 私有双值；私有字符串标签；}

## 或者

在那种特殊情况下，我怀疑您可以使用时间格式化函数来替换您的字符串数组。

```
String.format("%1$d:00", (int) myDouble); 
```

# javascript - 将 php 变量值分配给 javascript 值，但 JS 变量似乎在脚本中未定义

> ID：13529828
> 
> 赞同：0
> 
> 时间：2012-11-23T13:10:23.430
> 
> 标签：javascript

我想知道为什么我没有收到下面的 javascript 代码的警报消息。似乎无法识别/定义变量 xyz？我找不到错误...非常感谢您的帮助！

**主文件**

```
<?php
...
$abc="http://www.path.de/image.jpg";
...
?>    

<script type="text/javascript">
            var xyz="<?= $abc ?>";
</script>

<script language="javascript" type="text/javascript">
        window.alert(xyz);
</script> 
```

**没有提示信息！源视图中的浏览器输出：**

```
...
<script type="text/javascript">
        var yxz = "http://www.bla.de/asd.jpg";
</script>

<script language="javascript" type="text/javascript">
        window.alert(yxz);

        </script>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:16:22.607

这有效：

```
<?php
$abc="http://www.path.de/image.jpg";
?>

<script type="text/javascript">
      var xyz="<?php print $abc; ?>";
</script> 
```

而且，请记住使用 json_encode() 函数来确保你不会搞砸 javascript：

[将 PHP 字符串传递给 JavaScript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-and-escape-newlines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:12:33.850

尝试

```
var xyz="<?= echo $abc ?>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:11:59.360

只需尝试

```
<script language="javascript" type="text/javascript">
        alert(<?=$abc?>);
</script> 
```

# visual-studio-2012 - 是否可以使用免费工具为 Visual Studio 2012 开发扩展？

> ID：13529829
> 
> 赞同：0
> 
> 时间：2012-11-23T13:10:26.943
> 
> 标签：visual-studio-2012, vsix

我想为 Visual Studio 2012 制作 F# lib + XNA 4.0 + Xbox360 的模板。我只有 Visual Studio 2012 Express Edition for Web。当我尝试安装 Visual Studio 2012 SDK 时，它在报告它需要 Visual Studio 2012 后停止。日志似乎表明它正在寻找专业版。

我对为业余爱好购买专业许可证不感兴趣，我有点惊讶微软会阻止业余爱好者扩展他们的产品。

不过，我确实拥有 Visual Studio 2010 的专业许可证。如果有办法使用 2010 为 2012 年扩展，那对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:27:21.767

您可以使用 VS2010 开发与 VS2012 兼容的扩展。您所要做的就是手动更改 vsixmanifest 以使其适用于较新的版本：

```
<SupportedProducts>
      <VisualStudio Version="11.0"> 
```

但是请注意，Visual Studio Express 不支持扩展，因此无论如何您都无法在 VS2012 Express 中安装它。

# java - Proguard 使用 _(numbers) 将 java 代码混淆为单行和标识符

> ID：13529832
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:10:39.410
> 
> 标签：java, obfuscation, proguard

我使用 proguard 来混淆我的 jar 文件。有什么方法可以删除 java 代码中的换行符并使用 proguard 指定具有 _(numbers) 而不是 chars 的标识符？

问候，

拉詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:12:42.950

ProGuard 只读写 Java 字节码，而不是源代码。默认情况下，它会选择混淆名称 a、b、c 等，但您可以使用选项 -obfuscationdictionary 指定您自己的集合。

# jqplot - 无法让 jqplot.DateAxisRenderer 与小时一起工作

> ID：13529838
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:11:05.930
> 
> 标签：jqplot

我正在尝试绘制 24 小时内的值。我正在jqplot 网站上的[这个例子中工作。](http://www.jqplot.com/tests/date-axes.php)我看不出我做错了什么。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="javascript/jqplot/jquery.jqplot.js"></script>
<link rel="stylesheet" href="javascript/jqplot/jquery.jqplot.css" type="text/css" />
<script type="text/javascript" src="javascript/jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>

<div id="chart1"></div>

<script type="text/javascript">
$(document).ready(function(){
  var line2=[['2008-06-30 8:00AM',4], ['2008-06-30 9:00AM',6.5], ['2008-06-30 10:00AM',5.7], ['2008-06-30 11:00AM',9], ['2008-06-30 12:00PM',8.2]];
  var plot2 = $.jqplot('chart1', [line2], {
      title:'Customized Date Axis',
      gridPadding:{right:35},
      axes:{
        xaxis:{
          renderer:$.jqplot.DateAxisRenderer,
          tickOptions:{formatString:'%r'}
        }
      },
      series:[{lineWidth:4, markerOptions:{style:'square'}}]
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:33:32.083

我试图用版本：1.0.4 修订：1121 绘制日期轴，当我有小时作为绘制点的时间单位时，无法让它绘制图形（我的所有点都绘制在X 轴）对我来说，解决方法是注释掉这一行 -

`min = min.getTime() + min.getUtcOffset();`

来自 jqplot.dateAxisRenderer.js

不确定这是否是一个错误，但在此代码更改后，情节确实对我有用。

# javascript - 在变量中将序列化数据从 js 发送到服务器端

> ID：13529844
> 
> 赞同：0
> 
> 时间：2012-11-23T13:11:22.913
> 
> 标签：javascript, python, django, serialization, query-string

我正在尝试通过 url 中的查询字符串/变量发送序列化数据。如您所知，当我们在 js 中进行序列化时，它会自己构建一个查询字符串。我正在将此数据发送到用 django 编写的服务器端。我该怎么做或如何在 django 代码中收集数据。

这就是我正在做的事情。

```
selected = $('input:checkbox:checked').serialize(); 
```

这给了我结果`multiselect_select_month=10&multiselect_select_month=11&multiselect_select_month=05`

我想将它与其他变量一起发送到 URL 中，并将孔字符串 ( `multiselect_select_month=10&multiselect_select_month=11&`) 收集到单个变量中。就像是

```
serialized = 'multiselect_select_month=10&multiselect_select_month=11' 
```

在服务器端我正在写`serialized = request.GET.get('serialized', '')`

如何在单个变量中发送该序列化字符串（这是一个查询字符串），以便我可以在服务器端捕获它。

注意：我想用上述序列化数据发送其他变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:26:27.323

您需要 URL-Encode `serialized`，然后您可以将其发送到单个变量中。

```
serialized = encodeURIComponent(serialized);
var link = "http://host.com/?data=" + serialized; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:31:19.213

此代码将所有`multiselect_select_month`值连接到 1 个参数中。
（具有显着减少参数长度的额外好处）

```
var multiSelects = [];
$('input:checkbox:checked').each(function(){
    multiSelects.push(this.value);
});
var parameter = "?multiselect_select_month=" + multiSelects.join(',');
//Will return "?multiselect_select_month=10,11,05" instead of "multiselect_select_month=10&multiselect_select_month=11&multiselect_select_month=05" 
```

然后，您可以获取`ultiselect_select_month`参数服务器端，并将`explode`其打开`','`：

```
string.split('10,11,05', ',') 
```

# java - XML编辑Java中所有同名标签

> ID：13529846
> 
> 赞同：0
> 
> 时间：2012-11-23T13:11:25.033
> 
> 标签：java, xml, edit

我有想要更改的值和标签字符串。但在我的场景中，我无法确定 xml 结构。

我想做一个简单的功能，例如：

```
for tag.equals(tagValue){
   if found{
      oldTagText=newValue
   }
} 
```

因此，无论结构如何，所有匹配的标签都将被更改。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:25:36.140

如果您想在 Java 而不是 XSL 中进行替换，请查看 StAX：[http ://docs.oracle.com/javase/tutorial/jaxp/stax/index.html](http://docs.oracle.com/javase/tutorial/jaxp/stax/index.html)

（注意：对于大多数 StAX 用例，建议使用 StAX 迭代器 API（基于事件），AFAIK。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:08:46.970

The simplest way to do it is SAX:

```
 String xml = "<root><e1>xxx</e1></root>";
    XMLFilterImpl xmlReader = new XMLFilterImpl(
            XMLReaderFactory.createXMLReader()) {

        @Override
        public void startElement(String uri, String localName,
                String qName, Attributes atts) throws SAXException {
            super.startElement(uri, localName, tagName(qName), atts);
        }

        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            super.endElement(uri, localName, tagName(qName));
        }

        private String tagName(String qName) {
            if (qName.equals("e1")) {
                return "e2";
            }
            return qName;
        }
    };
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer t = tf.newTransformer();
    StringWriter s = new StringWriter();
    t.transform(new SAXSource(xmlReader, new InputSource(new StringReader(
            xml))), new StreamResult(s));
    System.out.println(s); 
```

# c# - XMLValidatingReader 的构造函数中的灾难性故障

> ID：13529849
> 
> 赞同：1
> 
> 时间：2012-11-23T13:11:43.823
> 
> 标签：c#, xml

我正在开发一个库（VS 2010，针对 AnyCPU 的程序集），并且在跨过`XmlValidationReader(..)`. 此构造函数的参数是 的实例`XmlReader()`，并且特定的 XML 在语法上是正确的，并使用第三方工具进行验证。

> 错误：灾难性故障（来自 HRESULT 的异常：0x8000FFFF (E_UNEXPECTED)）
> 
> 异常对象：System.Runtime.InteropServices.COMException
> 
> 堆栈跟踪：
> 
> System.Security.Policy.PEFileEvidenceFactory.GetLocationEvidence(SafePEFileHandle peFile, SecurityZone& zone, StringHandleOnStack retUrl) 在 System.Security.Policy.PEFileEvidenceFactory.GenerateLocationEvidence() 在 System.Security.Policy.PEFileEvidenceFactory.GenerateEvidence(Type evidenceType) 在 System.Security。 System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type) 在 System.Security.Policy.Evidence.GetHostEvidence(Type type, Boolean markDelayEvaluatedEvidenceUsed) 在 System.Security.Policy.AppDomainEvidenceFactory.GenerateEvidence 的 Policy.AssemblyEvidenceFactory.GenerateEvidence(Type evidenceType) System.Security.Policy.Evidence.RawEvidenceEnumerator.MoveNext() 在 System.Security.Policy 的 System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type) 的（类型evidenceType）。Evidence.EvidenceEnumerator.MoveNext() 在 System.Configuration.ClientConfigPaths.GetEvidenceInfo(AppDomain appDomain, String exePath, String& typeName) 在 System.Configuration.ClientConfigPaths.GetTypeAndHashSuffix(AppDomain appDomain, String exePath) 在 System.Configuration.ClientConfigPaths..ctor( System.Configuration.ClientConfigurationHost.RequireCompleteInit(IInternalConfigRecord 记录) 处 System.Configuration.ClientConfigPaths.GetPaths(String exePath, Boolean includeUserConfig) 处的字符串 exePath, Boolean includeUserConfig) System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission , Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) 在 System.Configuration。BaseConfigurationRecord.GetSection(String configKey) 在 System.Configuration.ConfigurationManager.GetSection(String sectionName) 在 System.Xml.Schema.XmlSchemaCollection..ctor(XmlNameTable nametable)
> 在 System.Xml.XmlValidatingReaderImpl..ctor(XmlReader 阅读器) 在 System.Xml.XmlValidatingReader..ctor(XmlReader 阅读器)

我没有更改系统中的任何安全配置。加载程序集的特定帐户具有管理权限。知道什么可能导致这个问题吗？我已经广泛地浏览了网络，但徒劳无功。

# python - cygwin 运行命令而不是 cmd python

> ID：13529852
> 
> 赞同：2
> 
> 时间：2012-11-23T13:11:48.300
> 
> 标签：python, cygwin, cmd, subprocess

我有一个 python GUI，我想运行一个 shell 命令，你不能使用 windows cmd 执行我已经安装了 cygwin，我想知道如何运行 cygwin 而不是 windows cmd。我想使用 subprocess 并获取 .sh 文件的结果，但我的代码

```
subprocess.check_output("./listChains.sh < 2p31protein.pdb") 
```

这将在 cmd 中运行它，因为 windows 无法识别它，它不会工作，所以我怎样才能让它在 cygwin 而不是 cmd 中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:01:44.870

执行一个 cygwin shell（例如`bash`）并让它运行你的脚本，而不是直接运行你的脚本：

```
subprocess.check_output("C:/cygwin/bin/bash.exe ./listChains.sh < 2p31protein.pdb") 
```

或者，将`.sh`要打开的文件类型扩展名与`bash.exe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-28T14:54:00.287

使用 python 子进程运行 cygwin 可执行文件要求 ./bin 目录`cygwin1.dll`位于 Windows 路径上。`cygwin1.dll`向 Windows 公开 cygwin 可执行文件，允许它们在 Windows 命令行中运行并被 Python 子进程调用。

# xcode - Xcode：将字符串与数字组合

> ID：13529856
> 
> 赞同：0
> 
> 时间：2012-11-23T13:12:05.103
> 
> 标签：xcode, string

+我想按名称加载某个图像。此名称由大小和一些字符串组成。

例如，最终结果应该是

“button_bg_124_84_down.png”（不带引号）

我有

```
CGFloat nWidth = 124;
CGFloat nHeight = 84; 
```

请问我怎样才能形成这样一个字符串而没有任何嘲弄呢？

我希望我可以简单地说

```
NSString * mystring = "button_bg_" + nWidth + "_" + nHeight + "_down.png"; 
```

但这似乎不是这样做的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:19:21.230

```
NSString * mystring =[NSString stringWithFormat:@"button_bg_%.0f_%.0f_down.png", nWidth, nHeight]; 
```

编辑：因为你想要 222 而不是 222.000000 所以需要 .0f 将其转换为 int 值。否则十进制将被附加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:15:20.233

你是对的，这不是连接字符串的方法。试试这个：

```
NSString *myString = [NSString stringWithFormat:@"button_bg_%.0f_%.0f_down.png", nWidth, nHeight]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T13:17:00.250

是的，您可以使用以下代码执行此操作：

```
[NSString stringWithFormat:@"button_bg_%f_%f_down.png", nWidth, nHeight]; 
```

# javascript - 上传总大小

> ID：13529859
> 
> 赞同：0
> 
> 时间：2012-11-23T13:12:16.423
> 
> 标签：javascript, jquery, uploadify

我刚买了 Uploadifive，我想知道：如何限制总文件大小？我的意思是，有多个文件，如何限制总文件大小？

太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:21:46.557

您可以使用[**onAddQueueItem**](http://www.uploadify.com/documentation/uploadifive/onaddqueueitem/)事件。它以字节为单位提供文件大小。

添加所有添加的文件的大小，您可以获得总文件大小。

```
<script type="text/javascript">

var bytesLoaded = 0;

$(function () {
    $('#file_upload').uploadifive({
    'uploadScript': 'upload.php',
    'onAddQueueItem' : function(file) {
                bytesLoaded += file.size;
    },
    'onQueueComplete': function (uploads) {
                alert('Total bytes uploaded: ' + bytesLoaded);
    }
    });
});

</script> 
```

如果文件大小超过了允许的最大大小，您可以使用[**取消**](http://www.uploadify.com/documentation/uploadifive/cancel-2/)方法从队列中删除文件。

很可能，您现在已经解决了这个问题，因为这个问题已经在大约 5 个月前发布了。只是为碰巧到达这里的其他人分享我的答案。

# c# - 使用 += 运算符连接字符串

> ID：13529863
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:12:33.383
> 
> 标签：c#, .net, string, concatenation, string-concatenation

> **可能重复：**
> [String vs StringBuilder](https://stackoverflow.com/questions/73883/string-vs-stringbuilder)

为什么我不应该使用`+=`连接字符串？

最快的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:21:03.023

字符串在 .NET 中是不可变的。这意味着一旦它们存在，就无法更改。

*旨在缓解此问题，允许您附加到n*大小的`StringBuilder`预定字符数组（我认为默认为 16？！）。但是，一旦超过指定的限制..它需要分配一个更大的自身副本，并将内容复制到其中..从而产生可能更大的问题。*`StringBuilder`*

 *这归结为过早的优化。除非您注意到字符串连接使用过多内存的问题。担心它是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:18:44.027

+= 和 String1 = String1+String2 做同样的事情，将整个字符串复制到一个新字符串。

如果您在循环中执行此操作，则会生成大量内存分配，从而导致性能下降。

如果您想构建**长**字符串，您应该查看针对此类操作进行了优化的[StringBuilder 类。](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

简而言之：一些 concat 字符串不会对性能造成太大影响，但是通过在循环中添加小位来构建**大**字符串会大大减慢您的速度和/或使用大量内存。

另一篇关于字符串性能的有趣文章：http: [//www.codeproject.com/Articles/3377/Strings-UNDOCUMENTED](http://www.codeproject.com/Articles/3377/Strings-UNDOCUMENTED)*

# ruby - 如何在 Ruby 中通过数组存储和检索哈希

> ID：13529865
> 
> 赞同：1
> 
> 时间：2012-11-23T13:12:33.693
> 
> 标签：ruby, hash

我想构建一个用于存储目录的哈希。我想有多个级别的键。在比赛点，我想要一个文件数组。它就像计算机上的目录结构。似乎哈希是最好的方法。

鉴于我有一个文件夹数组，我该`["folder1", "folder1a", "folder1ax"]`如何：

1.  使用文件夹结构作为键和文件作为数组中的值设置哈希，并且
2.  使用文件夹结构查询哈希？

我正在使用它来解析 URL 以在文件夹结构中显示它们，这与在 Rails 应用程序中转储到 JSTree 非常相似。因此，如果您有更好的替代方法来显示 5000 个与 Rails 视图配合使用的 URL，请提供替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:27:33.517

这是一个起点：

```
dirs = %w(Downloads)
Hash[ dirs.map{ |dir| [dir, Dir.glob("#{dir}/*")] } ] 
```

这是结果：

```
{"Downloads"=> ["Downloads/jquery-ui-1.9.1.custom.zip", ... ] } 
```

您可以改进代码 fe 使其递归，从数组结果中删除文件夹名称......这是递归实现的一个示例：

```
class Dir
  def self.ls_r(dir)
    Hash[ dir,
      entries(dir).reject{ |entry| %w(. ..).include?(entry) }.map do |entry|
        entry_with_dir = File.join(dir, entry)
        File.directory?(entry_with_dir) ? ls_r(entry_with_dir) : entry
      end ]
  end
end

puts Dir.ls_r('~/Downloads').inspect 
#=> { "Downloads" => ["file1", {"Downloads/folder1"=>["subfile1"], ... ] } ... } 
```

请注意，这不是最好的实现，因为递归没有考虑到子文件夹键应该与各自的父键相关；要解决此问题，应通过递归维护此信息：

```
class Dir
  def self.ls_r(dir, key_as_last_path_component = false)
    Hash[ (key_as_last_path_component ? File.split(dir).last : dir),
      entries(dir).reject{ |entry| %w(. ..).include?(entry) }.map do |entry|
        entry_with_dir = File.join(dir, entry)
        File.directory?(entry_with_dir) ? ls_r(entry_with_dir, true) : entry
      end ]
  end
end

puts Dir.ls_r('~/Downloads').inspect
#=> { "Downloads" => ["file1", {"folder1"=>["subfile1"], ... ] } ... } 
```

现在子文件夹相对于它们的父键。

# jquery - 使用 jquery 滑动对象

> ID：13529867
> 
> 赞同：1
> 
> 时间：2012-11-23T13:12:39.543
> 
> 标签：jquery, css

用户在我的网站上向下滚动 200 像素后，我试图水平滑动固定图像。代码看起来像这样：

```
//CSS
div#slideimage
{
   position: fixed;
   left: -20%;
   width: 500%;
}

// JQUERY
$(window).scroll(function () {
if ($(this).scrollTop() > 100) {
   $('#slideimage').stop().animate({left: "100px"});
} else {
     $('#slideimage').stop().animate({left: "-400px"});
}
}); 
```

问题是滚动不流畅，并且似乎在部分暂停。谁能告诉我如何在用户向下滚动后平滑地水平滑动图像，例如垂直滑动 200 像素。

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:16:09.107

这是因为当用户滚动时，jQuery 会将动画队列堆积到浏览器中。这会创建一个不太流畅的动画，因为浏览器充满了多个阻碍的动画操作。你需要做的是等待几毫秒来做动画

```
$(window).scroll(function () {
if ($(this).scrollTop() > 100) {
 setTimeout(function() {
   $('#slideimage').stop().animate({left: "100px"});
 }, 150);
} else {
   setTimeout(function() {
     $('#slideimage').stop().animate({left: "-400px"});
 }, 150);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:24:31.243

可能 Tiny carousel 将是您的最佳目的地，我已经使用过它，并且从中获得了非常好的结果。这是该链接

[http://baijs.nl/tinycarousel/](http://baijs.nl/tinycarousel/)

# deployment - 使用 SCCM 2007 部署 Windows 7 x64 位

> ID：13529868
> 
> 赞同：1
> 
> 时间：2012-11-23T13:12:43.170
> 
> 标签：deployment, 64-bit, windows-7-x64, sccm, sccm-2007

我在使用 SCCM2007 部署 Windows 7 x64 位时遇到了一些困难。

当 PC 重新启动时，它没有显示使用 Windows 7 x64 处理的选项，我已经有 x86 版本，它只提供 x86 位。

谁能建议我如何排除故障？或者如果有人有一个检查清单，那么我可以检查我是否正确地做所有事情。

非常感谢

水仙花

# popupwindow - android中PopupWindow内的WebView

> ID：13529870
> 
> 赞同：2
> 
> 时间：2012-11-23T13:12:48.363
> 
> 标签：popupwindow

**用例：**

```
I am writing code for browser, in that I want to display WebView
content inside a PopupWindow. That is WebView should not be part of
MainApplication window. 
```

**细节：**

*   WebView 可以放置在 android Dialog 中（已经测试过），但问题是 Dialog 将成为 MainApplication 窗口的一部分，尽管它看起来像用户的单独窗口。
*   使用 PopupWindow，WebView 会显示片刻，然后消失。

弹出窗口布局详细信息如下

```
{
        popUp = new PopupWindow(this);
        layout = new LinearLayout(this);
        mainLayout = new LinearLayout(this);
        but = new Button(this);
        but.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                    popUp.showAtLocation(mainLayout, Gravity.CENTER, 10, 10);
                    popUp.update(0, 0, 1280, 1024);
            }
         }
        flayout = new FrameLayout(this);
        mwebview = new WebView(this);
        flayout.addView(mwebview);
        params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        layout.addView(flayout, params);

        popUp.setContentView(layout);
        mainLayout.addView(but, params);
        setContentView(mainLayout);

       === webview init done here===
} 
```

真的需要你的建议。

# c# - C# 向上/向下移动项目

> ID：13529871
> 
> 赞同：2
> 
> 时间：2012-11-23T13:12:50.403
> 
> 标签：c#, asp.net-mvc, linq-to-entities

我有一个包含项目的列表。他们都有一个“排序”列。排序列是 int 类型的，并且是唯一的。

设想：

> 排序1；排序2；排序3；

如果用户在列表中向上移动一个项目（例如排序 3）（例如到位置 1，这将给出排序值 1），则必须向下移动位于刚刚上移的项目之下的项目在列表中，并且应该相应地应用排序号。在这种情况下，所有移位的项目排序 - 1。

所以场景的最终状态如下所示：

> 排序 1 是排序 3；排序 3 是排序 2；排序 3 现在是排序 1；

我该怎么做`LINQ`？这不仅仅是3个项目。它可以更多。

[编辑]

```
 public ActionResult Up(int id)
 {
    var item = dataContext.item.FirstOrDefault(x => x.item == id);

    return View(dataContext.items);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:31:27.153

这可能不是最容易理解的代码，但我已经对其进行了测试，它似乎可以按预期工作。

让我们设置一些数据。

```
var array = new [] 
{ 
    new { Sort = 1, Value = "foo1", },
    new { Sort = 2, Value = "foo2", },
    new { Sort = 3, Value = "foo3", },
    new { Sort = 4, Value = "foo4", },
};

var oldSort = 1;
var newSort = 3; 
```

首先，查询根据新旧索引的位置分为三个部分，因此我们可以分别处理每种情况。

```
var q = 
    oldSort > newSort ? 
        array
            .Where(x => x.Sort >= newSort && x.Sort < oldSort)
            .Select(x => new { Sort = x.Sort + 1, Value = x.Value })
            .Union(array.Where(x => x.Sort < newSort || x.Sort > oldSort))
            .Union(array.Where(x => x.Sort == oldSort)
                        .Select(x => new { Sort = newSort, Value = x.Value }))
            : 
    oldSort < newSort ?         
        array
            .Where(x => x.Sort <= newSort && x.Sort > oldSort)
            .Select(x => new { Sort = x.Sort - 1, Value = x.Value })
            .Union(array.Where(x => x.Sort > newSort || x.Sort < oldSort))
            .Union(array.Where(x => x.Sort == oldSort)
                        .Select(x => new { Sort = newSort, Value = x.Value }))
            :
    array; 
```

向下移动项目的结果 ( `oldSort = 1`, `newSort = 3`)：

```
1 foo2
2 foo3 
3 foo1 
4 foo4 
```

向上移动项目的结果 ( `oldSort = 4`, `newSort = 2`)：

```
1 foo1 
2 foo4 
3 foo2 
4 foo3 
```

**更新**：查询通过将序列分成三个部分来工作

*   具有旧索引的项目成为具有新索引的项目；
*   新旧索引之间的项目向上或向下移动；
*   其余的保留他们的索引。

结果是各部分的结合。

**更新 2**：查询适用于任意数量的项目，并且没有循环是有意的。

**更新 3**：这是使查询与 LINQ-to-Entities 一起使用的一种方法。

```
using (var context = new TestDBEntities())
{
    var array = context.TestTables;
    var q =
        oldSort > newSort ?
            array
                .Where(x => x.Sort >= newSort && x.Sort < oldSort)
                .Select(x => new { Sort = x.Sort + 1, Value = x.Value })
                .Union(array.Where(x => x.Sort < newSort || x.Sort > oldSort)
                            .Select(x => new { Sort = x.Sort, Value = x.Value }))
                .Union(array.Where(x => x.Sort == oldSort)
                            .Select(x => new { Sort = newSort, Value = x.Value }))
                :
        oldSort < newSort ?
            array
                .Where(x => x.Sort <= newSort && x.Sort > oldSort)
                .Select(x => new { Sort = x.Sort - 1, Value = x.Value })
                .Union(array.Where(x => x.Sort > newSort || x.Sort < oldSort)
                            .Select(x => new { Sort = x.Sort, Value = x.Value }))
                .Union(array.Where(x => x.Sort == oldSort)
                            .Select(x => new { Sort = newSort, Value = x.Value }))
                :
        array.Select(x => new { Sort = x.Sort, Value = x.Value });
} 
```

不同之处在于这些类型现在是明确兼容的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:40:09.607

我知道您要求使用 LINQ 解决方案，但在这种情况下使用 LINQ 似乎很复杂，尤其是在您还想调整`Sort`列的情况下。我建议使用 for 循环和索引的简单旧方法。它就地执行排序操作并且不创建新列表。

为了使其可重用，我将其创建为`IList`接口的扩展方法，这也使其与数组兼容。

为了使其通用，您需要某种方式来访问该`Sort`列。通过接口公开此列会将解决方案限制为实现此接口的类。因此，我选择了您必须作为代表传递的访问器。如果`Sort`列具有其他名称`Order`，例如，它们也可以工作。

```
public static class ListExtensions
{
    public static void MoveItem<T>(this IList<T> list, int fromIndex, int toIndex,
                                   Func<T, int> getSortKey, Action<T, int> setSortKey)
    {
        T temp = list[fromIndex];
        int lastSortKey = getSortKey(temp);
        setSortKey(temp, getSortKey(list[toIndex]));
        if (fromIndex > toIndex) { // Move towards beginning of list (upwards).
            for (int i = fromIndex; i > toIndex; i--) {
                list[i] = list[i - 1];
                int nextSortKey = getSortKey(list[i]);
                setSortKey(list[i], lastSortKey);
                lastSortKey = nextSortKey;
            }
        } else if (fromIndex < toIndex) { // Move towards end of list (downwards).
            for (int i = fromIndex; i < toIndex; i++) {
                list[i] = list[i + 1];
                int nextSortKey = getSortKey(list[i]);
                setSortKey(list[i], lastSortKey);
                lastSortKey = nextSortKey;
            }
        }
        list[toIndex] = temp;
    }
} 
```

你可以使用这样的方法

```
list.MoveItem(3, 1, x => x.Sort, (x, i) => x.Sort = i); 
```

请注意，您必须传递列表索引而不是排序值。

* * *

这是我用于测试的类。只需在两个测试方法的末尾设置一个断点，以便在本地窗口中检查结果。通过右键单击`Test`类并选择“调用静态方法”在类视图中开始测试。

```
public class SomeItem
{
    public int Sort { get; set; }
    public string Value { get; set; }

    public override string ToString()
    {
        return String.Format("Sort = {0},  Value = {1}", Sort, Value);
    }
}

public static class Test
{
    public static void MoveUp()
    {
        List<SomeItem> list = InitializeList();
        list.MoveItem(3, 1, x => x.Sort, (x, i) => x.Sort = i);
    }

    public static void MoveDown()
    {
        List<SomeItem> list = InitializeList();
        list.MoveItem(1, 3, x => x.Sort, (x, i) => x.Sort = i);
    }

    private static List<SomeItem> InitializeList()
    {
        return new List<SomeItem> {
            new SomeItem{ Sort = 1, Value = "foo1" },
            new SomeItem{ Sort = 2, Value = "foo2" },
            new SomeItem{ Sort = 3, Value = "foo3" },
            new SomeItem{ Sort = 4, Value = "foo4" },
            new SomeItem{ Sort = 5, Value = "foo5" }
        };
    }

} 
```

* * *

**更新**

关于调整排序键的说明：如果排序键是有序且唯一的，则上述解决方案效果很好。如果情况并非总是如此，更可靠的解决方案是在将列表存储回数据库之前调整排序键，只需将排序键设置为等于列表索引即可。这将简化该`MoveItem`方法。

```
public static void MoveItem<T>(this IList<T> list, int fromIndex, int toIndex)
{
    T temp = list[fromIndex];
    if (fromIndex > toIndex) { // Move towards beginning of list (upwards).
        for (int i = fromIndex; i > toIndex; i--) {
            list[i] = list[i - 1];
        }
    } else if (fromIndex < toIndex) { // Move towards end of list (downwards).
        for (int i = fromIndex; i < toIndex; i++) {
            list[i] = list[i + 1];
        }
    }
    list[toIndex] = temp;
}

public static void FixSortKeys<T>(this IList<T> list, Action<T, int> setSortKey)
{
    for (int i = 0; i < list.Count; i++) {
        setSortKey(list[i], i);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T15:18:31.047

条件运算符在这里很有用：

```
var newitems = items.Select(x =>
                   new 
                   {
                       Value = x.Value,
                       Sort = x.Sort == oldSort ? newSort :
                              x.Sort < oldSort && x.Sort >= newSort ? x.Sort + 1 :
                              x.Sort > oldSort && x.Sort < newSort ? x.Sort - 1 :
                              x.Sort
                   }); 
```

这是使用[Serge 的设置](https://stackoverflow.com/a/13530170/480799)：

```
var items = new [] 
{ 
    new { Sort = 1, Value = "foo1", },
    new { Sort = 2, Value = "foo2", },
    new { Sort = 3, Value = "foo3", },
    new { Sort = 4, Value = "foo4", },
};

var oldSort = 1;
var newSort = 3; 
```

它的性能不错（在所有场景中都是 O(n)），而且它简洁易读。

# javascript - Javascript中精确的字符串格式

> ID：13529872
> 
> 赞同：0
> 
> 时间：2012-11-23T13:12:54.087
> 
> 标签：javascript, string, string-formatting

我正在使用这个原型在 javascript 中格式化字符串：

```
String.prototype.format = function () {
            var args = arguments;

            return this.replace(/{(\d+)}/g, function (match, number) {
                return typeof args[number] != 'undefined'
                    ? args[number]
                    : match
                    ;
            });
        }; 
```

虽然它工作正常，但它并没有做我想做的所有事情。如果我有一个应该格式化为 {0:000000} 的字符串，这将无法解决它。如何扩展它，将额外的 0 添加到我的字符串中？通过修复正则表达式，我可以轻松检测到它们，但是如何正确格式化返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:15:28.090

如果有帮助，调用`toFixed( )`浮点数会相应地舍入/填充它吗？

因此，您可以像检查浮点数不是未定义一样检查浮点数。如果你有一个，你会的`args[number].toFixed(6)`。

您还可以通过扩展您的正则表达式来解析您的模板以类似于 python 的功能来构建额外的灵活性（例如 3 dp 的“{.3f}”）

# git - 非交互式 GIT 使用

> ID：13529873
> 
> 赞同：11
> 
> 时间：2012-11-23T13:12:56.440
> 
> 标签：git, version-control

GIT 中是否有 SVN`--non-interactive`命令行参数的模拟？

我正在通过[gitpython](https://github.com/gitpython-developers/GitPython)库使用 GIT，并且在某些地方遇到问题 - 程序冻结。在这种情况下，GIT 试图向用户询问某些内容，但它无法做到。我想禁止这些尝试。

这是冻结过程：

```
$ pstree -ap 14712
python,14712 src/auto-release
└─git,14720 pull --strategy=recursive -Xtheirs -v origin +master:origin/master
    └─git-merge,14721 -s recursive -Xtheirs -v Merge branch 'master' of 172.17.2.22:~/test-repo HEAD 920e34cb7267f702b7a1bb3af93619175cb566f0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T14:32:54.637

当它是标准输入且标准输出未连接到终端时，Git 不会提问（isatty() 返回 false），它通常以错误结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-25T12:04:17.893

您可以使用环境变量

[`GIT_TERMINAL_PROMPT`](https://git-scm.com/docs/git#Documentation/git.txt-codeGITTERMINALPROMPTcode)

> 如果将此环境变量设置为 0，git 将不会在终端上提示（例如，在请求 HTTP 身份验证时）。

# curl - 使用 Curl 在 Alfresco 中删除文件调用 webscript

> ID：13529878
> 
> 赞同：1
> 
> 时间：2012-11-23T13:13:14.953
> 
> 标签：curl, alfresco, http-delete

我是 Alfresco、Web Scripts 和 curl 的新手，我正在尝试删除一个文件

```
Company home > Sites > mySite> documentLibrary > UploadedItems 
```

该文件称为`test.json`

我尝试使用以下 Web 脚本：

```
DELETE /alfresco/service/slingshot/doclib/action/file/site/{site}/{container}/{path} 
```

现在，我像这样调用 Web 脚本：

```
curl -v -X DELETE  "http://admin:admin@localhost:8080/alfresco/service/slingshot/doclib/action/file/mySite/documentLibrary/UploadedItems/test.json" 
```

当我这样做时，我得到一个 404 错误。

有人知道如何正确调用这个 webscript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:56:45.347

正如其他人所指出的，弹弓 API 并不打算直接使用。但是要回答您的问题，您似乎缺少部分 URL

您声明 webscript 的 URL 被指定为

```
/alfresco/service/slingshot/doclib/action/file/site/{site}/{container}/{path} 
```

但你用过

```
/alfresco/service/slingshot/doclib/action/file/{site}/{container}/{path} 
```

`/site/`如果使用基于路径的名称，则必须添加路径部分。否则，Web 脚本将找不到您的内容项。

我之前没有看到 URL 中指定的 HTTP Basic 用户名和密码（我通常使用 Curl 的`--user`选项），但是如果您收到 404 响应，那么它可能对您有用。

# objective-c - 两个日期之间有多少个季度？

> ID：13529880
> 
> 赞同：0
> 
> 时间：2012-11-23T13:13:21.387
> 
> 标签：objective-c, ios, nsdate, nscalendar, nsdatecomponents

```
NSCalendar *calendar= [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSCalendarUnit unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
NSDateComponents *dateStart = [calendar components:unitFlags fromDate:start];
quarterStart = [dateStart quarter];
NSDateComponents *dateEnd = [calendar components:unitFlags fromDate:end];
quarterEnd = [dateEnd quarter]; 
```

有两个 NSDate 开始和结束并提取开始季度和结束季度我需要知道这两个日期之间季度的差异。

我知道我可以划分总天数 / 90 天，但我正在寻找另一种只有这些数据的解决方案。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:28:17.587

你应该试试：

```
NSDateComponents *result = [[NSCalendar currentCalendar] components:NSQuarterCalendarUnit fromDate:start toDate:end options:0];
NSInteger numberOfQuaters = [result quarter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:53:18.797

我已经使用它解决了，因为其他建议的答案不适用于 Apple 在 Quarter Unit 上的错误。

```
numberOfQuarters = (4 - startQuarter) + ((endYear -1 - startYear) * 4) + endQuarter; 
```

# python - 使用 Python zip 函数时如何获取循环索引？

> ID：13529882
> 
> 赞同：2
> 
> 时间：2012-11-23T13:13:22.927
> 
> 标签：python, for-loop, indexing

当同时循环多个 python 列表时，我使用`zip`-function，我还想检索循环索引。为此，循环索引的单独列表可以包含在 zip 函数中，例如：

```
for index, item1, item2 in zip(range(len(list1)), list1, list2):
    <do something> 
```

有没有更好的方法来做到这一点（比如在`enumerate`-function 中）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T13:16:13.490

您可以解压缩以下内容中的所有内容`for`：

```
>>> for i, (x1, x2) in enumerate(zip([1,2,3], [3,4,5])):
...     print i, x1, x2
... 
0 1 3
1 2 4
2 3 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T13:16:25.693

您可以使用它（注意在解包嵌套元组`enumerate()`之后括号的位置）：`for`

```
>>> l1 = range(0, 10)
>>> l2 = range(10, 20)
>>> for index, (item1, item2) in enumerate(zip(l1, l2)):
...   print index, item1, item2
... 
0 0 10
1 1 11
2 2 12
3 3 13
4 4 14
5 5 15
6 6 16
7 7 17
8 8 18
9 9 19 
```

# java - 无法获取数据库的大小

> ID：13529890
> 
> 赞同：1
> 
> 时间：2012-11-23T13:14:07.433
> 
> 标签：java, mysql, jdbc

我正在检查我的数据库的大小（当我检查使用的数据库大小时，我发现它是浮动值）：我正在使用这段代码：

```
 Public class DBSize{

 private float dbSize;

    public float databaseSize(Float dbSize,String dataSize,String indexsize){
        String apps="apps";  // It's my DB name
        String query_data = "select table_schema,SUM(data_length+index_length)/1024/1024 AS total_mb,SUM(data_length)/1024/1024 AS data_mb,SUM(index_length)/1024/1024 AS index_mb,COUNT(*) AS tables,CURDATE() AS today FROM information_schema.tables where table_schema='"+apps+"' GROUP BY table_schema ORDER BY table_schema;";
        try {
            connection = getConnection();
            stmt = connection.createStatement();
            ResultSet rs=stmt.executeQuery(query_data);
            if(rs.next())      //as I'm selecting a particular database's information
            this.dbSize=rs.getFloat(2);
            this.dataSize=rs.getString(3);
            this.indexSize=rs.getString(4);

            System.out.println("DB Size : "+this.dbSize);           
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        finally
        {
            try {
                if(stmt != null)
                    stmt.close();
                if(connection != null)
                    connection.close();
                } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        return dbSize;

    }

public float getDbSize(){
        return dbSize;
    }
} 
```

*`rs`正在获取空值（不知道是否无法从数据库中获取值），即使我使用了字符串类型的函数但也获取了空值，*

任何输入...我出错的地方:( :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:24:37.973

将这三个赋值语句保留`if`在一个块内，否则只有第一个语句将在条件`rs.next()` 评估为时执行，`true`并且接下来的 2 个语句将始终执行，即使条件`rs.next()` 评估为`false` 可能导致某些异常

```
if(rs.next()){     
   this.dbSize=rs.getFloat(2);
   this.dataSize=rs.getString(3);
   this.indexSize=rs.getString(4);
} 
```

# jquery - JQuery UI自动完成无法处理鼠标事件

> ID：13529894
> 
> 赞同：0
> 
> 时间：2012-11-23T13:14:37.737
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

你好我有简单的JQuery UI Autocomplete实现

```
$("#adrField").autocomplete({
    source: function (request, response) {
        var reqvesturl = "myurl";
        $.ajax({
            type: "GET",
            url: reqvesturl,
            cache: false,
            dataType: "jsonp",
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: item.description + " (" + item.itemCount + ")",
                        value: item.description,
                        obj: item
                    };
                }))
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        });
    },
    minLength: 1,
    select: function (event, ui) {
        // this.value
        console.log(ui.item.label);

        var reqvesturl = "myurl");
        $.ajax({
            type: "GET",
            url: reqvesturl,
            cache: false,
            dataType: "jsonp",
            success: function (data) {
                addrHelper.showAddresses(data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        });

    }        
}); 
```

但是我可以通过键盘事件键向下/向上从列表框中选择数据并输入，如果我尝试使用鼠标我无法选择它？我没有看到任何 JS 错误等。它可以与某些 HTML 结构或其他东西有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:20:23.433

我发现了这个问题。这是我的其他脚本块 AC 行为。谢谢。

# php - PHP-Structure概述乱七八糟的项目

> ID：13529897
> 
> 赞同：1
> 
> 时间：2012-11-23T13:14:57.513
> 
> 标签：php, map, project

我正在寻找一种自动生成的工具，该工具可以在 laaaaaaaaaarge php 项目的结构上生成图表，其中包含 10 000 行代码的文件。在这里和那里将 php 与 html 与 css 和 javascript 混合在一起。

需要负责人意识到项目需要重构。在这个项目中实际上没有任何 oop，因此某种类图概述只会显示项目的一小部分，因为它具有 99% 的功能。

谁能指出我正确的方向来解决这个烂摊子？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:32:41.960

我不知道这是否真的有帮助，但评论太大了。

有一个名为[Doxygen](http://www.doxygen.nl/)的程序可以从 php 源文件生成文档，现在请耐心等待。

该程序还有一个[扩展](http://www.doxygen.nl/helpers.html "扩大")，它也可以根据源代码生成~~结构图（？）结构图，它可能会有所帮助。~~

如果没有[这个问题](https://stackoverflow.com/questions/77193/how-do-you-justify-refactoring-work-to-your-penny-pinching-boss)，也许[这个](https://stackoverflow.com/questions/1333133/how-do-you-convince-your-manager-that-your-project-needs-a-huge-refactoring)问题可以为您提供一些关于如何传达信息的建议。

# java - 休眠方式更改列的布尔值

> ID：13529900
> 
> 赞同：0
> 
> 时间：2012-11-23T13:15:11.743
> 
> 标签：java, hibernate

我如何在hibernate中编写类似于下面的查询

> `update tb_image set active = !active;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:31:24.787

您应该为此使用本机查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:48:31.037

您可以使用：

1.  反向值的单独属性并在 Hibernate 中映射该属性
2.  [实体侦听器](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)及其@PrePersist

第一个选项看起来更容易，而且更容易理解，imo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:12:21.270

最简单的答案是您已经加载了需要更新的实体，然后像往常一样设置该字段。`setBool(!isBool())`然后将更改提交到数据库。当您需要对持久存储中的数据进行操作而不是直接对对象进行操作时，我会担心您的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:42:36.633

使用本机查询，因为没有办法使用 Hibernate 查询语言来纠正相同的查询。

# c++ - C++ 中的拉普拉斯矩阵计算

> ID：13529902
> 
> 赞同：11
> 
> 时间：2012-11-23T13:15:15.390
> 
> 标签：c++, image-processing, opencv

我一直在尝试实现名为[Learning Based Digital Matting](https://ieeexplore.ieee.org/document/5459326)的研究论文中描述的 Digital Matting 算法。

它的 MATLAB 代码可[在此处](https://www.mathworks.com/matlabcentral/fileexchange/31412-learning-based-digital-matting)获得。我正在尝试使用 OpenCV 2.4.3 和 UMFPACK 将 MATLAB 代码转换为 C++。

问题是名为`getLap_iccv09_overlapping`（计算输入图像的拉普拉斯矩阵）的函数在 OpenCV 中没有现成的可用，我必须在 cpp 中编写自己的实现。我从我的实施中得到了不正确的结果。

是否有任何 C/C++ 库提供矩阵/图像的[拉普拉斯矩阵计算？](https://en.wikipedia.org/wiki/Laplacian_matrix)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:29:03.233

我最近不得不将几个 Matlab 函数“翻译”成 C++（使用 OpenCV），不幸的是你找不到完全相同的函数。有一些类似的函数，但结果并不完全相同，尤其是矩阵的边界。
我建议您阅读并理解您的 Matlab 函数使用的算法（对矩阵的运算）并用 C++ 编写（Opencv 非常适合矩阵运算）。
您可以使用一个小矩阵（例如 4 x 4）并逐步进行测试，首先使用矩阵内的元素，然后使用边缘和边界（我发现边界条件更难以理解）
祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:43:20.743

[这个功能](http://opencv.willowgarage.com/documentation/cpp/image_filtering.html#cv-laplacian)还不够吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:44:52.710

您的 Matlab 和 C++ 版本的函数有多相似？听起来您可能只需要逐步检查各种中间结果是否相同，然后尝试以这种方式查找错误。

您可能会发现[writeMat.cpp](https://code.ros.org/trac/opencv/attachment/ticket/1342/writeMat.cpp)的用途，该函数可用于获取您的 OpenCV cv::Mat 矩阵并将其保存为 Matlab .m 文件，这将使比较更容易 - 在 cpp 代码的各个点写出 .m，将它们加载到 Matlab 中，运行 Matlab 脚本并在适当的点进行比较。

# node.js - 并行执行（显式和隐式）什么以及在 node.js 中顺序执行什么？

> ID：13529903
> 
> 赞同：2
> 
> 时间：2012-11-23T13:15:15.880
> 
> 标签：node.js, event-handling, parallel-processing, promise

这个例子混淆了我对工作原理的理解`node.js`：

```
// 1.
numbers.forEach(function(number) {
  queue.push(Q.call(slowFunction, this, number));
});

// 2.
// Q.all: execute an array of 'promises' and 'then' call either a resolve 
// callback (fulfilled promises) or reject callback (rejected promises)
Q.all(queue).then(function(ful) {

  // All the results from Q.all are on the argument as an array
  console.log('fulfilled', ful);
}, function(rej) {

  // The first rejected (error thrown) will be here only
  console.log('rejected', rej);
}).fail(function(err) {

  // If something went wrong, then we catch it here, usually when there is no
  // rejected callback.
  console.log('fail', err);
}).fin(function() {

  // Finally statement; executed no matter of the above results
  console.log('finally');
}); 
```

为什么在这里假设部分代码将按顺序执行`1.`？那么，适用于所有推入元素`2.`的保证在哪里？是不是这样，from是如此之大，以至于它的工作原理比平行于？这些想法来自对 node.js 将处理的理解，首先是使用然后将其交给，这实际上类似于普通线程。`Q.all(queue)``queue``1.``numbers``1.``2.``1.``2.``node.js event-loop``workers`

所以问题 - 将彼此`1.`并行`2.`执行，从`node.js event-loop`顺序开始还是按顺序执行（`1.`推送队列中的所有元素，然后才`2.`开始处理中的每个元素`queue`）？请提供一些指向该主题文档的直接链接的论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T00:02:53.737

在最顶层，1\. 和 2 的`Q.all(queue).then(...).fail(...).fin(...);`方法链将明确地按顺序执行。

在 1 和 2 中定义/调用的函数执行的精确时间很大程度上取决于`slowFunction`.

*   如果`slowFunction`完全由同步 javascript 执行（例如一些广泛的数学），那么 1 将在 2 开始之前完全完成。在这种情况下，2 中指定的回调将在 2 的方法链完成执行后不久执行，因为任何返回的承诺`slowfunction`都将（或至少应该）已经解决。

*   然而，如果`slowFunction`涉及一个或多个异步节点 I/O 进程（例如文件处理或资源获取），那么对它的每次调用将（至少部分）由非阻塞工作线程（不是 javascript）进行；在这种情况下，`slowFunction`providing 写得正确，`queue`会积累一组 Promise，每一个 Promise 都会在后面被解决或拒绝。2 中指定的回调将在 2 的方法链执行完毕并且所有的 Promise 都已解决或拒绝后执行。

对我来说，改写版本的 2 的介绍性文本将大大有助于解释执行顺序：

> Q.all：等待`queue`数组中的每个“承诺”被解析或拒绝，“然后”调用相应的回调函数。

参考：[http ://rickgaribay.net/archive/2012/01/28/node-is-not-single-threaded.aspx](http://rickgaribay.net/archive/2012/01/28/node-is-not-single-threaded.aspx)

# javascript - 如何检查字符串是否在 jquery 中的“选择”的“选项”中？

> ID：13529910
> 
> 赞同：2
> 
> 时间：2012-11-23T13:15:43.320
> 
> 标签：javascript, jquery, html

html代码是这样的：

```
<select id="select1">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

我想知道如何编写一个函数来测试 a`string`是否在`option`一个选择中，例如

```
test_in("volvo", "select1")      // Return True
test_in("asdf", "select1")      // Return False
test_in("AUDI", "select1")      // Return False 
```

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:19:44.103

我会这样做：

```
function test_in(value, selector) {
    return $(selector + " option[value=" + value + "]").length > 0;
} 
```

[小提琴](http://jsfiddle.net/WZ5Ng/9/)

如果您希望它不那么严格，您可能需要转换大小写。此外，我不确定您要如何处理`option`元素具有不同值属性和文本内容的情况。哪一个是测试的决定性因素？我写的版本检查 value 属性。

**注意：**正如评论中所指出的，我编写的函数需要一个完整的选择器，因此您必须包含`#`id 和`.`类（例如`#select1`，在您的情况下）。我认为这是最好的方法，因为您不必为要检查的任何选择仅使用 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:50:36.133

如果你想要一个实际的 jQuery 函数，这里有一些你可以使用的东西。它接受正则表达式以及要在每个选项的值中搜索的字符串；只有 jQuery 集合的第一个元素用于搜索。

```
(function($) {
    $.fn.hasOption = function(re) {
        var options = this[0] && this[0].options || [],
        matches = re.test || function(val) {
            return val.indexOf(re) != -1;
        }

        for (var i = 0, item; item = options[i]; ++i) {
            if (matches.call(re, item.value)) {
                return true;
            }
        }

        return false;
    }
}(jQuery)); 
```

调用它：

```
$('#select1').hasOption('volvo')); // true
$('#select1').hasOption('asdf')); // false
$('#select1').hasOption('AUDI')); // false
$('#select1').hasOption(/AUDI/i)); // true! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:25:17.837

原版 JS 解决方案：http: [//jsfiddle.net/rfQga/2/](http://jsfiddle.net/rfQga/2/)

```
var test_in = function(val, target) {
    var select = document.getElementById(target),
    retVal = false,
    rgCheck = new RegExp(val, "g");

    var i = 0,
    opts = select.options,
    l = opts.length;

    for (;i<l;i++) {
        if (rgCheck.test(opts[i].value)) {
            retVal = true;
            break;
        }
    }

    return retVal;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T13:21:00.640

`$("#select1 option[value='volvo']").length`- 如果它等于零，则选择中没有它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T13:18:36.003

~~尝试在选择控件`indexOf`的`options`数组上使用~~

不，`options`它是一个 nodeList，所以试试：

尝试

```
var opts = [].slice.call(document.querySelector('#select1').options);
if (opts.filter(function(opt){return /mercedes/i.test(opt.value);}).length){
  /* ... */
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T13:22:46.223

尝试使用这样的东西：

```
function test_in(value, selectId){
    var foundValue = null;
    $("#" + selectId + " > option").each(function() {
        if (this.text == value){
            foundValue = value;
            return false; // break the each iteration
        }
    });
    return (foundValue != null);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-23T13:20:12.463

尝试这个：

```
$("#select1 > option").each(function() {
if($(this).val()=='volvo'){
alert("value is in the combobox");
}
});​ 
```

工作演示[在这里](http://jsfiddle.net/AeEJs/2/)

# java - 如何从 InputMethodService 打开 ProgressDialog

> ID：13529911
> 
> 赞同：2
> 
> 时间：2012-11-23T13:15:44.203
> 
> 标签：java, android

为什么我在下面的代码中从 Eclipse 得到错误？

**代码：**

```
public class ServiceKeyboard extends InputMethodService implements KeyboardView.OnKeyboardActionListener
 {
   public  static ProgressDialog progressDialog;

...
   @Override public void onStartInput( EditorInfo attribute, boolean restarting)
    {
      super.onStartInput( attribute, restarting);
      progressDialog = new ProgressDialog( ServiceKeyboard.this);
      progressDialog.setMessage( getString( R.string.sSpinner));
// after this line crash
      progressDialog.show();
...
...
      if( progressDialog != null)  progressDialog.dismiss();
    }
 } 
```

**错误：**

```
11-23 12:53:07.854: E/AndroidRuntime(23963): FATAL EXCEPTION: main
11-23 12:53:07.854: E/AndroidRuntime(23963): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:589)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.app.Dialog.show(Dialog.java:277)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at com.avanpost.mobile.ServiceKeyboard.onStartInput(ServiceKeyboard.java:354)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.inputmethodservice.InputMethodService.doStartInput(InputMethodService.java:1549)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.inputmethodservice.InputMethodService$InputMethodImpl.startInput(InputMethodService.java:388)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.inputmethodservice.IInputMethodWrapper.executeMessage(IInputMethodWrapper.java:158)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:61)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.os.Looper.loop(Looper.java:137)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at java.lang.reflect.Method.invokeNative(Native Method)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at java.lang.reflect.Method.invoke(Method.java:511)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-23 12:53:07.854: E/AndroidRuntime(23963):    at dalvik.system.NativeStart.main(Native Method) 
```

softKeyboard（InputMethodService）启动时使用progressDialog打开窗口的最佳解决方案是什么？

我尝试“new ProgressDialog(this);”、“new ProgressDialog(getApplicationContext());” 而是“new ProgressDialog（ServiceKeyboard.this）;”，但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T22:29:19.303

在创建没有关联 Activity 的 InputMethodService 时，我遇到了类似的问题。

这仅适用于 API 版本 12 及更高版本，但我设法通过传入输入视图使用的窗口令牌来显示 ProgressDialog。只要发生这种情况，就可以使用应用程序上下文构造 ProgressDialog。

这需要 API 版本 12 的原因是 InputMethodService 必须实现 OnAttachStateChangeListener 以便在输入视图附加到窗口时得到通知；尝试更早地执行该代码会导致 null 令牌。很可能在生命周期的后期有另一个地方可以放置令牌请求，但是由于我的 IME 已经有这些 API 要求，所以我没有费心去寻找。

编码：

```
public class SampleKeyboardService extends InputMethodService
                                   implements OnAttachStateChangeListener {
  private View mInputView;
  private ProgressDialog mProgress;

  @Override
  public View onCreateInputView() {
      super.onCreateInputView();
      LayoutInflater inflater =
          (LayoutInflater) getSystemService(Service.LAYOUT_INFLATER_SERVICE);
      mInputView = inflater.inflate(R.layout.input, null);
      mInputView.addOnAttachStateChangeListener(this);
      return mInputView;
  }

  /* ... */

  @Override
  public void onViewAttachedToWindow(View view) {
      Window progressWindow = mProgress.getWindow(); // mProgress created earlier
      WindowManager.LayoutParams layoutParams = progressWindow.getAttributes();
      layoutParams.token = view.getWindowToken();
      layoutParams.type = 
          WindowManager.LayoutParams.TYPE_APPLICATION_ATTACHED_DIALOG;
      progressWindow.setAttributes(layoutParams);
  }
} 
```

另请参阅[https://stackoverflow.com/a/13962770/793212](https://stackoverflow.com/a/13962770/793212)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:23:14.713

尝试从 Activity 调用 ProgressDialog。它将解决您的问题。给我更多解释你想要做什么。

# c# - c#: sql请求性能问题

> ID：13529919
> 
> 赞同：0
> 
> 时间：2012-11-23T13:16:25.727
> 
> 标签：c#, sql, performance

我正在使用 c# 访问数据库。现在我必须使用从某些表中获取的数据进行一些计算，并将其写入其他现有表中。这在大多数情况下工作得很好，但对于复杂的操作，它需要大量的时间。现在我想知道什么是加快查询速度并获得结果的好习惯。这是我所做的：

1.  我得到一个包含 3 个值（lom（唯一 ID）、laktanfang、laktende）的数据表，其中包含大约 700 行。
2.  对于此表中的每一行，我从另一个表中进行查询。这导致另一个包含 2 个值的数据表（lom(unique id), behanddatum）
3.  现在我检查 behanddatum 的值是否在 laktanfang 和 laktende 之间 --> 是：将行添加到我的函数返回的数据表中 --> 否：继续
4.  最后，我必须从我的数据表中获得阳性结果的数量

这是我目前使用的代码。我希望它不会太混乱。

```
public DataTable HoleAbgeschlosseneLaktationenMitDiagnosen(DateTime daAnfang, DateTime daEnde, string[] stDiagnosen = null)
    {            
        DataTable dtRet = new DataTable();
        dtRet.Columns.Add("lom", typeof(string));
        dtRet.Columns.Add("laktanfang", typeof(DateTime));
        dtRet.Columns.Add("laktende", typeof(DateTime));

        DataTable dtAbgänge = HoleAbgängeVonEinzeltierZugang(daEnde, daAnfang);
        //Abgeschlossene Laktationen für abgegegangene Tiere
        foreach (DataRow dr in dtAbgänge.Rows)
        {
            if (dr != null)
            {
                DateTime daAbgangsdatum = dr.Field<DateTime>("abgangsdatum");
                string stLom = dr.Field<string>("lom");
                DataTable dtKalbungVorAbgang = HoleLetzteKalbungFuerTier(stLom, daAbgangsdatum);

                if (dtKalbungVorAbgang.Rows.Count > 0 && !dtKalbungVorAbgang.Rows[0].IsNull("kalbedatum"))
                {
                    DateTime daKalbedatum = (DateTime)dtKalbungVorAbgang.Rows[0]["kalbedatum"];
                    int inLaktation = (int)dtKalbungVorAbgang.Rows[0]["laktation"];

                    if (PrüfeObDiagnoseInZeitraumAufgetreten(stLom, stDiagnosen, daKalbedatum, daAbgangsdatum) || stDiagnosen == null)
                    {
                        DataRow drLaktAbgang = dtRet.NewRow();
                        drLaktAbgang["lom"] = stLom;
                        drLaktAbgang["laktanfang"] = daKalbedatum;
                        drLaktAbgang["laktende"] = daAbgangsdatum;
                        dtRet.Rows.Add(drLaktAbgang);
                    }

                    if (daKalbedatum >= daAnfang && inLaktation > 1)
                    {
                        DataTable dtVorherigeKalbung = HoleLetzteKalbungFuerTier(stLom, daKalbedatum.AddDays(-1));
                        DateTime daVorhKalbung = (DateTime)dtVorherigeKalbung.Rows[0]["kalbedatum"];

                        if (dtVorherigeKalbung.Rows.Count > 0 && !dtVorherigeKalbung.Rows[0].IsNull("kalbedatum"))
                        {
                            if (PrüfeObDiagnoseInZeitraumAufgetreten(stLom, stDiagnosen, daKalbedatum, daAbgangsdatum) || stDiagnosen == null)
                            {
                                DataRow drLaktVorhKalbung = dtRet.NewRow();
                                drLaktVorhKalbung["lom"] = stLom;
                                drLaktVorhKalbung["laktanfang"] = daVorhKalbung;
                                drLaktVorhKalbung["laktende"] = daKalbedatum;
                                dtRet.Rows.Add(drLaktVorhKalbung);
                            }
                        }
                    }
                }
            }                
        }          

        DataTable dtKalbungen = HoleKalbungenFürLebendTiere(daEnde, daAnfang);
        //Abgeschlossene Laktationen für lebende Tiere
        foreach (DataRow dr in dtKalbungen.Rows)
        {
            DateTime daKalbedatumLetzte = dr.Field<DateTime>("kalbedatum");
            string stLom = dr.Field<string>("lom");
            int inLaktation = dr.Field<int>("laktation");

            if (inLaktation > 1)
            {
                DataTable dtKalbungVorErster = HoleLetzteKalbungFuerTier(stLom, daKalbedatumLetzte.AddDays(-1));

                if (!dtKalbungVorErster.Rows[0].IsNull("kalbedatum"))
                {
                    DateTime daKalbedatum = (DateTime)dtKalbungVorErster.Rows[0]["kalbedatum"];

                    if (PrüfeObDiagnoseInZeitraumAufgetreten(stLom, stDiagnosen, daKalbedatum, daKalbedatumLetzte) || stDiagnosen == null)
                    {
                        DataRow drLaktKalbung = dtRet.NewRow();
                        drLaktKalbung["lom"] = stLom;
                        drLaktKalbung["laktanfang"] = daKalbedatum;
                        drLaktKalbung["laktende"] = daKalbedatumLetzte;
                        dtRet.Rows.Add(drLaktKalbung);
                    }                      

                    inLaktation = (int)dtKalbungVorErster.Rows[0]["laktation"];

                    if (daKalbedatum >= daAnfang && inLaktation > 1)
                    {
                        DataTable dtVorherigeKalbung = HoleLetzteKalbungFuerTier(stLom, daKalbedatum.AddDays(-1));

                        if (dtVorherigeKalbung.Rows.Count > 0 && !dtVorherigeKalbung.Rows[0].IsNull("kalbedatum"))
                        {
                            DateTime daVorhKalbung = (DateTime)dtVorherigeKalbung.Rows[0]["kalbedatum"];

                            if (PrüfeObDiagnoseInZeitraumAufgetreten(stLom, stDiagnosen, daVorhKalbung, daKalbedatum) || stDiagnosen == null)
                            {
                                DataRow drLaktVorhKalbung = dtRet.NewRow();
                                drLaktVorhKalbung["lom"] = stLom;
                                drLaktVorhKalbung["laktanfang"] = daVorhKalbung;
                                drLaktVorhKalbung["laktende"] = daKalbedatum;
                                dtRet.Rows.Add(drLaktVorhKalbung);
                            }                                
                        }
                    }
                }
            }                
        }

        return dtRet;
    }

    private bool PrüfeObDiagnoseInZeitraumAufgetreten(string stLom, string[] stDiagnosen, DateTime daAnfang, DateTime daEnde)
    {
        SqlCommand cmd = new SqlCommand();
        DataTable dtDiagnosenGefunden = new DataTable();

        cmd.CommandText = "SELECT diagnose " +
                          "FROM b_milch_hms_diagnose " +
                          "WHERE lom=@lom AND behanddatum >= @datumanfang AND behanddatum <= @datumende";

        if (stDiagnosen != null)
        {
            int i = 0;

            foreach (string st in stDiagnosen)
            {
                if (st != "")
                {
                    if (i == 0)
                        cmd.CommandText += " AND diagnose LIKE @gesuchte_diagnose" + i;
                    else
                        cmd.CommandText += " OR diagnose LIKE @gesuchte_diagnose" + i;
                    cmd.Parameters.AddWithValue("@gesuchte_diagnose" + i, st + "%");
                }

                i++;
            }
        }

        cmd.Parameters.AddWithValue("@lom", stLom);
        cmd.Parameters.AddWithValue("@datumanfang", daAnfang);
        cmd.Parameters.AddWithValue("@datumende", daEnde);

        dtDiagnosenGefunden = w_milch.FühreSqlAus(cmd);
        if (dtDiagnosenGefunden.Rows.Count > 0 && !dtDiagnosenGefunden.Rows[0].IsNull("diagnose"))
            return true;

        return false;

    } 
```

我希望您能帮助我改进此功能以提高工作效率，或者至少给我一些提示。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:22:13.873

您已经创建了一个[N+1](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)问题。解决此问题的一种方法是进行更改`HoleAbgängeVonEinzeltierZugang`，使其[加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)表中您需要的数据 `b_milch_hms_diagnose`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:30:55.133

如果您使用的是 .NET 4.0，您还可以尝试使用并行 foreach 并查看它对循环执行时间的影响。（这是一个更一般的建议，您可以应用于许多示例）

```
 _dtAbgänge.Rows.AsParallel().ForEach(dr=>
                                              {
                                                  //do work
                                              }); 
```

# windows-runtime - 请求 bing microsofttranslate api 时出现 badrequest 错误？

> ID：13529920
> 
> 赞同：0
> 
> 时间：2012-11-23T13:16:29.330
> 
> 标签：windows-runtime, winrt-xaml, winrt-async

以下代码返回错误请求异常。不确定这里有什么问题。

```
 string appId = "956vaQc49TdepGpsywiM+BRqfxfgOTeCr/514="; 
     //go to  http://msdn.microsoft.com/en-us/library/ff512386.aspx to obtain AppId.
      string text = "translate this";
        string language = "en";
        System.Uri uri = new Uri("http://api.microsofttranslator.com/v2/Http.svc/Speak?&appId=" + appId + "&text=" + text + "&language=" + language);

        try
        {
            HttpClient client = new HttpClient();
            HttpResponseMessage response = await client.GetAsync(uri);
            response.EnsureSuccessStatusCode();
            Stream responseBody = await response.Content.ReadAsStreamAsync();
          //  meTextToSpeeach.Source = uri;
            string strResponse;
            using (Stream responseStream = responseBody)
            {
                using (StreamReader sr = new StreamReader(responseStream, System.Text.Encoding.Unicode))
                {
                    strResponse = sr.ReadToEnd();
                }
            }

        }
        catch (Exception)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:31:45.023

您没有对参数（appId、文本、语言）进行编码。你应该做 "..." + WebUtility.UrlEncode(appId) + "..." ...

# asp.net-mvc - 我们正在放弃我们的测试版标签。谷歌会怎么做？

> ID：13529921
> 
> 赞同：2
> 
> 时间：2012-11-23T13:16:33.010
> 
> 标签：asp.net-mvc, seo

到目前为止，我们的 ASP.NET MVC 站点可以通过[http://beta.fleex.tv](http://beta.fleex.tv)访问。现在我们删除了我们的 beta 标签，它位于[http://fleex.tv](http://fleex.tv)。

我们通过我们的域名注册商 1&1 设置了从 beta.fleex.tv 到 flex.tv 的 http 重定向。该重定向非常残酷：它不查看所咨询的页面，只查看域，并且例如将[http://beta.fleex.tv/page?arg=0](http://beta.fleex.tv/page?arg=0)直接重定向到[http://fleex.tv](http://fleex.tv)。

我有两个问题：

*   有没有一种简单的方法可以将[http://beta.fleex.tv/page?arg=0](http://beta.fleex.tv/page?arg=0)重定向到[http://fleex.tv/page?arg=0](http://fleex.tv/page?arg=0)？这是个好主意，还是我们应该完全删除 beta.fleex.tv？
*   我们应该用谷歌做什么？
    *   如果我们保留“测试版”页面，它们在 Google 的索引中会发生什么？当前重定向到位后，它们都指向[http://fleex.tv](http://fleex.tv)。我的猜测是谷歌将开始检测重复内容（甚至重定向内容）并从索引中删除所有内容，但我很想了解更多细节
    *   如果我们提交包含所有 flex.tv 节点的新站点地图，Google 会以任何方式惩罚我们，还是会简单地从头开始索引这些页面，不受 beta.fleex.tv 崩溃的影响？

一般来说，我很想知道你们对最佳策略的看法。这似乎是一个相当普遍的问题。我觉得没有办法避免丢失谷歌所做的所有索引，在这种情况下，虽然我只是想知道整个操作将如何影响我们在谷歌中的“声誉”......

如果不清楚，请提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:22:20.110

当谈到搜索引擎优化时，这是一场灾难。您*需要*进行页面级 301 重定向。

拥有不同的子域从一开始就是一个错误，因为现在它会导致麻烦，并且指向您的链接现在不准确。

重定向并不是特别难做：`Application_BeginRequest`查看`Request.Host`and`Request.RawUrl`属性并在必要时重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:21:39.623

我将提供与 usr 相同的建议，但重申一下 - 如果您不修复它，这绝对会扼杀您的排名和自然流量，尤其是长尾流量。

在您开始失去旧 URL 的价值之前，您有大约三到四个星期的宽限期来实施页面级别的内容。

我还要补充一点，因为您使用的是 302s 而不是 301s（在 ASP.NET 环境中很常见），Google 将需要更长的时间才能将重定向视为永久重定向，反复检查页面是否已移动 - 因此不会将价值从子域传递到主域 - 从个人经验来看，最终整体传递的链接价值会减少。

[http://support.google.com/analytics/bin/answer.py?hl=zh-CN&answer=2613318](http://support.google.com/analytics/bin/answer.py?hl=en-GB&answer=2613318)

# php - 服务器端图像大小调整性能

> ID：13529923
> 
> 赞同：7
> 
> 时间：2012-11-23T13:16:43.743
> 
> 标签：php, html

我越来越多地从大型网站（谷歌、Facebook、Youtube 和 co）中注意到，他们正在将图像的大小调整为“接近”他们所需的测量客户端，我想知道这是否是人们思维方式的转变，或者他们很懒惰。

假设为一组产品（电子商务）以特定尺寸将新图像尺寸添加到一组标准图像中，这些产品的数量达到数千甚至数百万。

想象一下，我有一个 300x350 或其他尺寸的原始图像的副本，以及客户端，将其大小调整为 200x250。我为每个产品在一个页面上的 20 个产品执行此操作。

适应这种新大小的服务器端的工作和问题真的值得客户端的好处吗？

如果不是，那么判断何时应该预处理某个尺寸的好方法是什么？

如果是，是否曾经有过服务器端处理和缓存可能变得过度的时候（即容纳 8 个 110x220、120x230、150x190 等的图像）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:25:02.990

考虑以下几点： 图像大小调整是服务器的繁重过程。首先，它本身是昂贵的。其次是硬盘 IO 操作非常慢。所以这一切都取决于您的服务器的负载情况。

对于客户来说，它有两个方面的意义：

1) 缩略图的文件大小更小，因此下载速度更快。所以它们会出现得更快。但这一切都取决于互联网连接的速度，而互联网连接的速度每天都在增加。你见过加载多大的图像吗？它们不会一次全部显示，而是按“线条”显示

2）如果您尝试以小尺寸显示大图像，质量会低得多。这是因为浏览器如何处理它。他们没有 Photoshop 的功能，也无法进行适当的质量调整。

3）单个页面上的许多大图像会增加该页面的内存使用量。在一些不太强大的计算机上，滚动打开它时可能会出现可怕的延迟。

作为这个问题的解决方案，我更倾向于做我在 Drupal 模块之一中看到的（`imagecache`如果我是对的）。

它不会在图像上传时创建缩略图。相反，它使用 .htaccess 和 mod_rewrite 功能在请求时创建它们。它检查请求的文件是否不存在，如果不存在，它将请求重定向到小型轻量级 PHP 脚本，该脚本将创建缩略图，将其写入文件系统，然后输出到客户端。

因此，下一位访问者将已经获得先前创建的缩略图。

因此，您实现了延迟/延迟图像大小调整，这将使加载更平滑（及时拉伸）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:26:59.207

我决定首先在页面上的单个图像上进行测试，然后进行一些乘法运算来预测多个图像。我应该注意：

*   我在这个测试中使用了 png，但是 png 看起来很标准。
*   `width`我正在使用一个特定的函数来调整图像的大小，以便`height`始终适合我调整大小的图像的原始纵横比。

我得到一张 450x450（大约）的图像，并决定在客户端将其缩小为 200x200（此答案中的所有测量值都是像素）。尽管调整大小超过图像总大小的一半，但我发现它的 CPU 跳跃很少。

所有现代浏览器的质量也很好，Chrome、Opera、Firefox 和 IE 都显示图像清晰，就好像它是在 Photoshop 或 GD 中完成的一样。

在 IE7 上，我没有注意到 CPU 跳动太多，而且质量很好，前提是我使用了基于图像大小限制的百分位调整大小。

总体而言，即使是这种大小的缓存服务器端所需的额外存储、计算和编码似乎也不利于用户端所暗示的能力。

话虽如此，如果我要开始多次进行这种类型的调整（比如我的问题中的 20 次），我可能会开始遇到问题。

经过一些调整后，我发现任何小于原始图像尺寸 1/3 的东西，只要图像的宽度或高度低于 1000 像素，对 CPU 和一般计算机性能的影响似乎都可以忽略不计。

通过我使用的附加功能，我从调整客户端大小获得了与服务器端一样好的质量。我使用的特定功能（针对相关方）是：

```
function pseudoResize($maxWidth = 0, $maxHeight = 0){

$width = $this->org_width;
$height = $this->org_height;

$maxWidth = intval($maxWidth);
$maxHeight = intval($maxHeight);

$newWidth = $width;
$newHeight = $height;

// Ripped from the phpthumb library in GdThumb.php under the resize() function
if ($maxWidth > 0)
{
    $newWidthPercentage = (100 * $maxWidth) / $width;
    $newHeight          = ($height * $newWidthPercentage) / 100;

    $newWidth = intval($maxWidth);
    $newHeight = intval($newHeight);

    if ($maxHeight > 0 && $newHeight > $maxHeight)
    {
        $newHeightPercentage    = (100 * $maxHeight) / $newHeight;

        $newWidth = intval(($newWidth * $newHeightPercentage) / 100);
        $newHeight = ceil($maxHeight);
    }
}

if ($maxHeight > 0)
{
    $newHeightPercentage    = (100 * $maxHeight) / $height;
    $newWidth               = ($width * $newHeightPercentage) / 100;

    $newWidth = ceil($newWidth);
    $newHeight = ceil($maxHeight);

    if ($maxWidth > 0 && $newWidth > $maxWidth)
    {
        $newWidthPercentage = (100 * $maxWidth) / $newWidth;

        $newHeight = intval(($newHeight * $newWidthPercentage) / 100);
        $newWidth = intval($maxWidth);
    }
}

return array(
    'width' => $newWidth,
    'height' => $newHeight
);
} 
```

因此，从我自己的测试来看，似乎可以容纳您要使用的每张图像的每种尺寸，即正如我在问题中所问的那样：

> 如果是，是否曾经有过服务器端处理和缓存可能变得过度的时候（即容纳 8 个 110x220、120x230、150x190 等的图像）？

在现代计算中似乎有点矫枉过正，如果您打算使用许多不同大小的图像，您应该进行近距离测量。

但是，我发现，如果您有一组标准的大小并且它们很小，那么优势实际上是服务器端调整大小和存储所有大小，因为强制客户端调整大小总是会减慢他们的计算机速度，但缩小它的原始尺寸的 1/3 似乎没有太大的区别。

因此，我认为 FB、Google 和 Youtube 等网站之所以不太担心存储所有图像的精确测量值，是因为“接近测量值”的缩放总体上性能更高。

# wcf - WCF Windows 身份验证 + 服务器上的控制台应用程序

> ID：13529931
> 
> 赞同：0
> 
> 时间：2012-11-23T13:17:08.030
> 
> 标签：wcf, windows-authentication

我有以下设置：

1.  WPF 客户端调用 WCF SerivceA。在这里，我使用基本 HTTP 绑定进行 Windows 身份验证。

2.  SerivceA 将从一个 UNC 路径调用一个批处理文件（.bat 或您可以说是 .exe 文件）。这行得通。批处理，因此在其内部调用的 exe 执行。

3.  执行的 exe 现在调用 ServiceB。在这里，它失败了。错误是：HTTP 请求未经客户端身份验证方案“协商”授权。从服务器收到的身份验证标头是“协商”。

这似乎执行的 exe 无法通过 AD 用户帐户。它通过以下： IIS APPPOOL\user1 不是 AD 用户，这就是它失败的原因。

为了解决这个问题，我尝试在 ServiceA 进行模拟，这样我就可以在调用者的凭据下调用批处理文件。但没有运气。我也尝试过委托。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:26:47.463

我最终为 IIS 创建了一个特定用户并将其注册到应用程序池。所以现在默认情况下，这些操作都是在这个用户的身份下完成的，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:21:35.153

您没有解释您是从哪个 IPrincipal 进行委派或模拟的，但只有在服务器正确配置的情况下才能使用委派，否则它将只接受执行请求的最低权限帐户。

# javascript - 8不小于等于30？

> ID：13529932
> 
> 赞同：2
> 
> 时间：2012-11-23T13:17:14.490
> 
> 标签：javascript, jquery, asp.net, .net

好吧，我有一个`RangeValidator`：

```
<asp:RangeValidator ID="DateRangeValidator" runat="server" ControlToValidate="DateRange"
    ErrorMessage="The date range must be at least 1 day, not more than 30, and neither date can be greater than today's date."
    EnableClientScript="true" MinimumValue="1" MaximumValue="30" CssClass="errortext span9 offset2"
    Display="Dynamic" /> 
```

如您所见，最小值为 1，最大值为 30。

* * *

那是验证一个隐藏字段**（由于我正在测试，它目前是可见的）**：

```
<asp:TextBox ID="DateRange" runat="server" ClientIDMode="Static" /> 
```

正如您所看到的，我已将客户端 ID 设置为静态，因此它可以很好地找到控件。

* * *

当两个日期之一发生更改时，此 JavaScript 方法会填充该隐藏字段：

```
$('.datepicker').change(function () {
    var startDate = new Date($('#StartDate').val());
    var endDate = new Date($('#EndDate').val());

    if (startDate > Date() || endDate > Date()) {
        $('#DateRange').val(-1);
    }
    else {
        var nDifference = endDate - startDate;
        var one_day = 1000 * 60 * 60 * 24;
        $('#DateRange').val(Math.round(nDifference / one_day) + 1);
    }

    Page_ClientValidate(null);
}); 
```

从设置正确的天数差异的角度来看，这种方法非常有效。

* * *

当`Page_ClientValidate`被调用时，我已经对其进行了调试，以确保验证器按预期触发，并且确实如此，并且它具有我期望的值。当检查最小值时，它会抓取 1 ......当它与值 8 进行比较时......它正在按预期进行评估...... 8 大于或等于 1。

然而，当检查最大值时，即使它获取最大值 30 ......当它与值 8 进行比较时......表示 8 小于或等于 30 的表达式被评估为假。

* * *

我真的希望有人可以在这里帮助我！

**世界上怎么8个不少于30个？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T13:21:06.597

你[`Type="Integer"`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx)的`RangeValidator`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:22:08.303

添加`Type="Integer"`到您的范围验证器

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:22:34.640

您需要在以下位置设置类型`RangeValidator`：

```
<asp:RangeValidator ID="DateRangeValidator" runat="server" ControlToValidate="DateRange"
    ErrorMessage="The date range must be at least 1 day, not more than 30, and neither date can be greater than today's date."
    EnableClientScript="true" MinimumValue="1" MaximumValue="30" CssClass="errortext span9 offset2"
    Display="Dynamic"
    Type="Integer" /> 
```

相关 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx)

# mysql - 如何通过正则表达式从mysql数据库中选择记录

> ID：13529937
> 
> 赞同：0
> 
> 时间：2012-11-23T13:17:49.867
> 
> 标签：mysql, ruby-on-rails, ruby, regex, scope

我有一个正则表达式来验证用户电子邮件地址。

```
/^(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,})$/i" 
```

在活动记录的帮助下，我想从数据库中获取电子邮件地址与此正则表达式不匹配的所有用户。我尝试了以下`scope`方法来达到预期的结果，但我得到的只是`ActiveRecord::Relation`.

```
scope :not_match_email_regex, :conditions => ["NOT email REGEXP ?'", /^(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,})$/"] 
```

这给了我以下查询：

```
SELECT `users`.* FROM `users` WHERE (email REGEXP '--- !ruby/regexp /^(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\\-+)|([A-Za-z0-9]+\\.+)|([A-Za-z0-9]+\\++))*[A-Za-z0-9]+@((\\w+\\-+)|(\\w+\\.))*\\w{1,63}\\.[a-zA-Z]{2,})$/\n...\n') 
```

我还尝试`scope`通过以下方式定义它，结果相同：

```
scope :not_match_email_regex, :conditions => ["email REGEXP '(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,})'"] 
```

它生成的查询是：

```
SELECT `users`.* FROM `users` WHERE (email REGEXP '(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+-+)|([A-Za-z0-9]+.+)|([A-Za-z0-9]+++))*[A-Za-z0-9]+@((w+-+)|(w+.))*w{1,63}.[a-zA-Z]{2,})') 
```

如何获取与给定正则表达式匹配或不匹配的所有记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:42:52.623

**部分根据@innocent_rifle 的评论**编辑 12-11-30小修正****

 ****这里建议的正则表达式试图进行与原始问题相同的匹配**

**1.**在我第一次编写解决方案时，我忘记了必须`\`在字符串中转义，因为我直接在 MySQL 中进行测试。在讨论正则表达式时，在字符串中使用正则表达式会让人感到困惑，所以我将使用这种形式来代替，例如`/dot\./.source`which (in Ruby) will give `"dot\\."`.

**2\.** [MySQL 中的REGEXP](http://dev.mysql.com/doc/refman/5.6/en/regexp.html#operator_regexp)（5.6 手动，5.0.67 测试）使用的是“C escape syntax in strings”，所以`WHERE email REGEXP '\.'`还是一样`WHERE email REGEXP '.'`，找到你必须使用的字符`"."`，`WHERE email REGEXP '\\.'`实现你必须使用的代码`.where([ 'email REGEXP ?', "\\\\."])`。使用起来更具可读性`.where([ 'email REGEXP ?', /\\./.source ])`（MySQL 需要 2 次转义）。但是，我更喜欢使用`.where([ 'email REGEXP ?', /[.]/.source ])`，那么我不必担心您需要多少转义。

**3.**你不需要`"-"`在正则表达式中转义，`[]`只要该字符是第一个或最后一个，就不需要转义。

* * *

我发现了一些错误：这是第一个正则表达式或“|” 在你的表达中，它应该作为查询中的字符串，或者使用我更喜欢的 Regexp#source。我认为最后还有一个额外的报价。除此之外，您真的确定正则表达式有效。如果您在控制台中尝试使用字符串？

另请注意，您不会在 db 中捕获带有 NULL 的电子邮件，在这种情况下，您必须添加`(<your existing expr in parentheses>) OR IS NULL`

**我的 MySQL 版本中的正则表达式语法。**

我还测试了@Olaf Dietsche 在他的建议中写的内容，似乎不需要，但强烈建议无论如何**都遵循标准语法**`NOT (expr REGEXP pat)`（或`expr NOT REGEXP pat`）。

我做了一些检查，这些东西必须改变：使用`[A-Za-z0-9_]`而不是`\w`，并且`\+`无效，你必须使用`\\+`（`"\\\\+"`如果字符串），更容易使用`[+]`（在正则表达式或字符串中）。

它导致**在 MySQL 中遵循 REGEXP**

```
'^(([A-Za-z0-9]+_+)|([A-Za-z0-9]+-+)|([A-Za-z0-9]+[.]+)|([A-Za-z0-9]+[+]+))*[A-Za-z0-9]+@(([A-Za-z0-9]+-+)|([A-Za-z0-9]+[.]))*[A-Za-z0-9]{1,63}[.][a-zA-Z]{2,}$' 
```

**小改动建议**

我不完全理解你的正则表达式，所以这只是改变你的正则表达式而不改变它会找到的内容。

*第一：按照我上面的描述改变整个字符串*

然后改变

```
(([A-Za-z0-9]+_+)|([A-Za-z0-9]+-+)|([A-Za-z0-9]+[.]+)|([A-Za-z0-9]+[+]+))* 
```

至

```
([A-Za-z0-9]+[-+_.]+)* 
```

和

```
@(([A-Za-z0-9]+-+)|([A-Za-z0-9]+[.]))* 
```

至

```
@([A-Za-z]+[-.]+)* 
```

**最终代码**`..., :conditions => ...`（如果您愿意，可以更改为语法）。我试图让它找到与@innocent_rifle*评论中相同的字符串*`"_"`，只在右侧添加表达式`@`

```
.where([ 'NOT (email REGEXP ?)', /^([A-Za-z0-9]+[-+_.]+)*[A-Za-z0-9]+@([A-Za-z0-9]+[-._]+)*[A-Za-z0-9_]{1,63}[.][A-Za-z]{2,}$/.source ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:10:01.293

对于验证电子邮件地址，您可能需要考虑[如何查找或验证电子邮件地址](http://www.regular-expressions.info/email.html)。至少，这个正则表达式看起来更简单一些。

根据[MySQL - 正则表达式](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)，正确的语法是

`expr REGEXP pat`

比赛，和

`expr NOT REGEXP pat`或者`NOT (expr REGEXP pat)`

相反。不要忘记第二个版本中的大括号。**

# php - 是否可以将 wordpress 评论框作为必填字段？

> ID：13529943
> 
> 赞同：4
> 
> 时间：2012-11-23T13:18:15.557
> 
> 标签：php, wordpress, comments

通常 wordpress 评论字段不是必填字段，我们无法从管理面板控制它。是否可以将该必填字段设置为名称和电子邮件字段？

如果可能的话，我该怎么做？

是代码更改还是配置更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:22:14.417

好吧，这是必需的 - 如果您提交表单而不输入评论（文本区域中的文本），您将看到一条错误消息：![在此处输入图像描述](../Images/30740461234408130611172fb4d66398.png)

# python - 词性标注——NLTK 认为名词是形容词

> ID：13529945
> 
> 赞同：5
> 
> 时间：2012-11-23T13:18:16.737
> 
> 标签：python, nltk

在下面的代码中，为什么 nltk 认为 'fish' 是形容词而不是名词？

```
>>> import nltk
>>> s = "a woman needs a man like a fish needs a bicycle"
>>> nltk.pos_tag(s.split())
[('a', 'DT'), ('woman', 'NN'), ('needs', 'VBZ'), ('a', 'DT'), ('man', 'NN'), ('like', 'IN'), ('a', 'DT'), ('fish', 'JJ'), ('needs', 'NNS'), ('a', 'DT'), ('bicycle', 'NN')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:27:04.403

我不确定解决方法是什么，但您可以在此处查看源代码[https://nltk.googlecode.com/svn/trunk/nltk/nltk/tag/](https://nltk.googlecode.com/svn/trunk/nltk/nltk/tag/)

同时，我用几乎没有什么不同的方法尝试了你的句子。

```
>>> s = "a woman needs a man. A fish needs a bicycle"
>>> nltk.pos_tag(s.split())
[('a', 'DT'), ('woman', 'NN'), ('needs', 'VBZ'), ('a', 'DT'), ('man.', NP'), ('A','NNP'),   ('fish', 'NN'), ('needs', 'VBZ'), ('a', 'DT'), ('bicycle', 'NN')] 
```

这导致鱼为“NN”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T17:43:14.640

如果您首先使用[NLTK 书第 5 章](http://nltk.org/book/ch05.html)中描述的查找标记器（例如使用 WordNet 作为查找参考），您的标记器将已经“知道”*鱼*不能是形容词。对于具有多个可能 POS 标签的所有单词，您可以使用统计标记器作为退避标记器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T10:28:50.823

这是因为您想`a woman needs a man like a fish needs a bicycle`为这样的“解析”获取 POS 标签：

`[ [[a woman] needs [a man]] like [[a fish] needs [a bicycle]] ]`

但相反，NLTK 默认的 pos 标记器不够聪明，并为您提供了 POS 标记以进行此类解析：

`[ [[a woman] needs [a man]] like [a fish needs] [a bicycle] ]`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-17T08:59:05.260

这取决于如何给 POS 标注器输入。例如句子：“女人需要男人，就像鱼需要自行车一样”

如果您使用默认的 nltk 词标记器和正则表达式标记器，则值将不同。

```
import nltk 
from nltk.tokenize import RegexpTokenizer

TOKENIZER = RegexpTokenizer('(?u)\W+|\$[\d\.]+|\S+')

s = "a woman needs a man like a fish needs a bicycle"

regex_tokenize = TOKENIZER.tokenize(s)
default_tokenize = nltk.word_tokenize(s)

regex_tag = nltk.pos_tag(regex_tokenize)
default_tag = nltk.pos_tag(default_tokenize)

print regex_tag
print "\n"
print default_tag 
```

输出如下：

```
 Regex Tokenizer: 

[('a', 'DT'), (' ', 'NN'), ('woman', 'NN'), (' ', ':'), ('needs', 'NNS'), (' ', 'VBP'), ('a', 'DT'), (' ', 'NN'), ('man', 'NN'), (' ', ':'), ('like', 'IN'), (' ', 'NN'), ('a', 'DT'), (' ', 'NN'), ('fish', 'NN'), (' ', ':'), ('needs', 'VBZ'), (' ', ':'), ('a', 'DT'), (' ', 'NN'), ('bicycle', 'NN')]

 Default Tokenizer: 

[('a', 'DT'), ('woman', 'NN'), ('needs', 'VBZ'), ('a', 'DT'), ('man', 'NN'), ('like', 'IN'), ('a', 'DT'), ('fish', 'JJ'), ('needs', 'NNS'), ('a', 'DT'), ('bicycle', 'NN')] 
```

在 Regex Tokenizer 中，fish 是一个名词，而在默认的 tokenizer 中，fish 是一个形容词。根据使用的分词器，解析不同导致解析树结构不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-16T23:37:46.713

如果您使用[Stanford POS 标记器](http://nlp.stanford.edu/software/tagger.shtml)(3.5.1)，则该短语被正确标记：

```
from nltk.tag.stanford import POSTagger
st = POSTagger("/.../stanford-postagger-full-2015-01-30/models/english-left3words-distsim.tagger",
               "/.../stanford-postagger-full-2015-01-30/stanford-postagger.jar")
st.tag("a woman needs a man like a fish needs a bicycle".split()) 
```

产量：

```
[('a', 'DT'),
 ('woman', 'NN'),
 ('needs', 'VBZ'),
 ('a', 'DT'),
 ('man', 'NN'),
 ('like', 'IN'),
 ('a', 'DT'),
 ('fish', 'NN'),
 ('needs', 'VBZ'),
 ('a', 'DT'),
 ('bicycle', 'NN')] 
```

# css - CSS 添加一个三角形

> ID：13529946
> 
> 赞同：0
> 
> 时间：2012-11-23T13:18:16.813
> 
> 标签：css

我有一个标签，带有以下标记：

```
#leftMenu ul li a   {color: #111; text-decoration: none; display: block;} 
```

我希望能够将鼠标悬停在它上面，并显示一个三角形的末端。类似于这个形状：

[http://www.promotionalpromo.com/Upfiles/Prod_v/1-7-8-x-2-7-8--Long-Arrow_2010017055476.jpg](http://www.promotionalpromo.com/Upfiles/Prod_v/1-7-8-x-2-7-8--Long-Arrow_2010017055476.jpg)

但不是具有相同的尺寸，更多的是： `width: 200px; height: 20px;`

要么我砍掉两端（右上边框和右下边框），要么用 :after 添加 css，但是当用户悬停标签时，我需要这一切发生。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:21:36.493

我发现这个网站非常有用： [http ://apps.eky.hk/css-triangle-generator/](http://apps.eky.hk/css-triangle-generator/)

当我需要创建三角形时。它为您生成一个三角形。

现在，在您生成三角形之后，您需要做的就是使用`:before`或`:after`在您想要的元素上使其工作，在您的情况下也可以悬停。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:45:36.310

仅供参考，这是我的做法：

```
#leftMenu ul li a   {color: #111; text-decoration: none; display: block; position: relative;}
#leftMenu ul li a:hover {color: #555; text-decoration: underline; background: #EEE; }
#leftMenu ul li a:hover:after 
            {
                content:"";
                float:right;
                position:absolute; top:0; right:-12px; width:0; height:0;
                border-style: solid;
                border-width: 13px 0 12px 12px;
                border-color: transparent transparent transparent #EEE;
            } 
```

# jquery - 为每个第三个元素添加 CSS 样式

> ID：13529947
> 
> 赞同：1
> 
> 时间：2012-11-23T13:18:23.123
> 
> 标签：jquery

我有这样的 HTML：

```
<div id="content">
    <div class="view-row view-row-1">
    <div class="view-row view-row-2">
    <div class="view-row view-row-3">
    <div class="view-row view-row-4">
    <div class="view-row view-row-5">
    <div class="view-row view-row-6">
</div> 
```

我需要在行中添加 CSS 样式 -`2, 5, 8, 11, 14`等等。可能有很多`.view-row-number`元素，例如 40 个。

```
$('.content .view-row').each( function(i) {
    if ($(this).hasClass('view-row-2') ) {
        $(this).css('padding-left', '7px');
    }
    else if($(this).hasClass(?)) {
    }
}); 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:25:08.060

您想像这样使用`nth-child`选择器：

```
$("#content .view-row:nth-child(3n-1)").addClass("highlight"); 
```

[**示例小提琴**](http://jsfiddle.net/Zkp2B/)

然后，您可以将所需的样式放在 CSS 类中以保持良好的关注点分离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T13:24:02.093

你在循环中有迭代器，所以你可以这样做：

```
$('.content .view-row').each( function(i) {
    if ((i + 2) % 3 == 0) { $(this).css('padding-left', '7px'); }
}); 
```

或使用 css3 选择器 nth-of-type：

```
$('.content .view-row:nth-of-type(3n-1)').css('padding-left', '7px'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T13:25:57.053

不要过度复杂化——

```
$('#content div:nth-child(3n-1)').addClass('foo'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:22:49.467

```
var num = 2;
$('.content .view-row').each( function(i) {
            if ($(this).hasClass('view-row-'+num) ) {
                num = num + 3;
                $(this).css('padding-left', '7px');
            }
            else if($(this).hasClass(?)) {

            }
           }); 
```

# git - 没有合并的 git push 分支

> ID：13529948
> 
> 赞同：7
> 
> 时间：2012-11-23T13:18:30.367
> 
> 标签：git, branch, git-branch, git-push

我在服务器（远程）上有一个分支主控。我创建了远程（服务器）上不存在的新本地分支。如何在不将其与主分支合并的情况下将分支添加（推送）到远程（服务器）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T13:28:12.633

您可以使用以下命令：

```
git push -u origin newBranch 
```

`-u`将设置您的本地分支以跟踪远程分支。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T13:29:14.383

```
git push remote local_branch_name:remote_branch_name 
```

通常，您的远程将是原始的，本地和远程分支将是相同的（尽管您可以将本地分支推送为具有不同名称的远程）。如果它们的名称相同，则不必提供以冒号分隔的名称——一个就足够了。

您要实现的目标与合并分支无关。我建议进一步阅读有关分支和遥控器的信息（[git-scm 书](http://git-scm.com/book)是非常好的资源）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:28:48.777

您只需推送本地分支：

```
$ git push origin <your-branch> 
```

您也可以使用该`-u`标志来设置本地分支以跟踪远程。

# pdf - pdf复制粘贴后的新词

> ID：13529950
> 
> 赞同：0
> 
> 时间：2012-11-23T13:18:38.963
> 
> 标签：pdf, clipboard

我有一个pdf文件。然后我选择并复制“K([2.2.2]crypt)]5[Co2Sn17”。但在剪贴板中有“KACHTUNGTRENUNG([2.2.2]crypt)]5ACHTUNGTRENUNG[Co2Sn17”。

任何想法什么是“ACHTUNGTRENUNG”？是一种保护吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:37:27.470

文件中可能有一些额外的（不可见的）字符。当您复制文本时，您用来复制的应用程序会将 PDF 文件中的字符翻译成可以存储在剪贴板上的内容。最有可能的情况是，将每个字符转换为存储在 PDF 文件中的 unicode 字符串，用于使用字体中的该字符。

对于大多数普通字符，Unicode 字符串应该与您视觉上看到的字符相同；在这里，您可能在 PDF 文件中有不可见的空格，这些空格在字体中称为“achtungtrenung”。

如果您在某处有可用的 PDF 文件，我将很乐意查看并验证这确实是正在发生的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-30T04:22:54.167

这是行之间的额外字符。

你可以试试[PDF Copy Paste](http://www.PDFCopyPaste.com)软件，看看你想要的部分是否可以转换成你喜欢的文本。

# verilog - Verilog + FPGA：用于 switch 的 If 语句

> ID：13529951
> 
> 赞同：1
> 
> 时间：2012-11-23T13:18:39.857
> 
> 标签：verilog, fpga

这是我控制 RC 伺服电机的代码。该代码基本上将50MHz频率变为1KHz。

我正在使用 FPGA 上的一个开关来控制电机。在开关打开之前，任何程序都不应运行。但这似乎并没有发生。我不知道我做错了什么。这可能是一个非常愚蠢的错误。

```
module servo(clk,rst,clk_out,switch);
  input clk,rst,switch;
  output reg clk_out;
  reg [15:0] counter;

  always @(posedge clk or posedge rst or posedge switch)
    if (switch) begin
     if(rst) begin
       counter <=16'd0;
       clk_out <= 1'b0;
     end
     else if(counter==16'd25000) begin
       counter <=16'd0;
       clk_out <= ~clk_out;
     end
     else begin
       counter<=counter+1;
     end
   end
endmodule 
```

我还尝试更改占空比，使电机旋转得更快，但这似乎不起作用。

```
module servo (clk,rst,clk_out,switch);
input clk,rst,switch;
output reg clk_out;
reg [15:0] counter;
always @(posedge clk or posedge rst)

if(rst)
begin
counter<=16'd0;
clk_out <= 1'b0;
end

else if (switch)

begin
  if(counter==16'd12500)
   begin
  clk_out <= 1'b1;
  counter<=counter+1;
   end
else
if(counter==16'd50000)
  begin
counter <= 16'd0;
clk_out <= 1'b0;
  end
else
  begin
counter<=counter+1;
  end
end
endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:29:34.787

这是我的切入点 - 我没有模拟它，所以要小心！

```
module servo(clk,rst,clk_out,switch);
input clk,rst,switch;
output reg clk_out;
reg [15:0] counter;

// clocked blocks should only have the clock and maybe a reset
// in the sensitivity list
always @(posedge clk or posedge rst) begin
    if(rst) begin
        counter <=16'd0;
        clk_out <= 1'b0;
    end
    else if (switch) begin  // 'switch' used as an enable
        if(counter==16'd25000) begin
            counter <=16'd0;
            clk_out <= ~clk_out;
        end
        else begin
            counter<=counter+1;
        end
    end
    else begin
        counter <= 16'd0;
    end
end
endmodule 
```

我做的第一件事是删除`switch`敏感列表中的条目 - 对于同步逻辑，这里应该只有一个时钟，也许还有一个重置。

逻辑的reset子句应该是第一个，所以我移动了测试，`switch`将它用作always块主体中的启用信号。计数器只有在高时才会运行`switch`。

# actionscript-3 - AS3 - 基于加速度计检测移动方向

> ID：13529956
> 
> 赞同：1
> 
> 时间：2012-11-23T13:18:59.423
> 
> 标签：actionscript-3, accelerometer

下面的代码基于加速度计移动一个影片剪辑。如何检测它向哪个方向移动或它是否静止？

```
import flash.sensors.Accelerometer; 
 import flash.events.AccelerometerEvent;

 var my_acc:Accelerometer = new Accelerometer();
my_acc.setRequestedUpdateInterval(50);

 my_acc.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate);
 function onAccUpdate(e:AccelerometerEvent):void{

 my_dot.x -= (e.accelerationX*10);

if (my_dot.x < 0) { 
 my_dot.x = 0; 
 } else if (my_dot.x > stage.stageWidth) { 
 my_dot.x = stage.stageWidth; 
 } 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:40:45.663

你得到真正的加速度矢量

```
Sqrt(accelerationX^2 + accelerationY^2) 
```

然后，你得到以度为单位的方向

```
Cos^-1 (accelerationX / realAcceleration) 
```

尝试以下操作：

```
var accVector = Math.sqrt(Math.pow(e.accelerationX,2) +
                          Math.pow(e.accelerationY,2))

var direction = Math.acos(e.accelerationX / accVector) 
```

并注意你得到`direction`了弧度！

如果你想要学位：`var directionDeg = direction * 180/Math.PI`

如果您`accelerationY`是负数，则需要更改符号`directionDeg`并（如果需要）添加 360 以始终获得正数。

# java - Android：日期对话框获取 onDateChange

> ID：13529963
> 
> 赞同：3
> 
> 时间：2012-11-23T13:19:26.757
> 
> 标签：java, android

我的日期对话框工作正常，但是我似乎无法让 onDateChange 让我使用 dialog.getMonth、getDate 等添加到我的 onclick 事件以保存日期。

这是我的代码；

```
 public void addInstallDate(View view){
        Log.e("Showing Dialog", "Dialog Date");

                DatePickerDialog dateDlg = new DatePickerDialog(this,
                        new DatePickerDialog.OnDateSetListener() {
                        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
                        {
                           Time chosenDate = new Time();
                           chosenDate.set(dayOfMonth, monthOfYear, year);
                           long dtDob = chosenDate.toMillis(true);
                           CharSequence strDate = DateFormat.format("MMMM dd, yyyy", dtDob);

                        }

                        public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {

                        }

                }, 2011,0, 1);

                        dateDlg.setButton("OK", new 
                                DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int which) {

                                    }
                                });

                         dateDlg.setMessage("Install Date?");
                         dateDlg.show();
        } 
```

在内部（函数下方）我尝试使用 dateDlg.getMonth() 等，但它们对我不可用

```
public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {

                            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:24:20.127

getMonth() 方法是在 DatePicker 上定义的，而不是 DatePickerDialog：

[http://developer.android.com/reference/android/widget/DatePicker.html](http://developer.android.com/reference/android/widget/DatePicker.html)

*但是，正如您所展示的， DatePickerDialog#onDateChanged 方法实际上提供了被选为*其参数之一的月份，这可能是您正在寻找的：

[http://developer.android.com/reference/android/app/DatePickerDialog.html](http://developer.android.com/reference/android/app/DatePickerDialog.html)

如果需要，您可以通过调用访问 DatePicker 实例中设置的月份

```
view.getMonth() 
```

在 onDateChanged 回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:25:15.117

您正在设置**OnDateSetListener**回调，它不起作用。该侦听器仅适用于**onDateSet**，而不适用于**onDateChanged**。

要使用**onDateChanged**回调，您必须实现**DatePicker.OnDateChangedListener**接口。

然后你必须在你的对话框上调用 getDatePicker 。然后你调用**init(int year, int monthOfYear, int dayOfMonth, DatePicker.OnDateChangedListener onDateChangedListener)**

如果您必须支持低于 API 级别 11，则不能使用此解决方案。您必须扩展 DatePickerDialog 类才能设置回调 onDateChanged。

像这样的东西：

```
public class Pre11DatePickerDialog extends DatePickerDialog {

    DatePicker.OnDateChangedListener    dateChangedCallback;

    public Pre11DatePickerDialog( Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth ) {
        super( context, callBack, year, monthOfYear, dayOfMonth );
    }

    public void setOnDateChangedListener( DatePicker.OnDateChangedListener dateChangedCallback ) {
        this.dateChangedCallback = dateChangedCallback;
    }

    @Override
    public void onDateChanged( DatePicker view, int year, int month, int day ) {
        super.onDateChanged( view, year, month, day );
        if ( dateChangedCallback != null ) {
            this.dateChangedCallback.onDateChanged( view, year, month, day );
        }
    }
} 
```

然后，当您创建对话框时，您必须像这样设置侦听器：

```
Pre11DatePickerDialog dialog = new Pre11DatePickerDialog( getActivity(), this, year, month, day );

dialog.setOnDateChangedListener( this ); 
```

现在您可以实现**onDateChanged()**：

```
 @Override
    public void onDateChanged( DatePicker view, int year, int monthOfYear, int dayOfMonth ) {
        //Do your thing here
    } 
```

希望这会有所帮助，干杯

# mysql - 创建一个未提供时初始化的 MySQL 过程变量

> ID：13529964
> 
> 赞同：1
> 
> 时间：2012-11-23T13:19:28.310
> 
> 标签：mysql, variables, procedure

我需要创建一个 MYSQL 过程，该过程接受多个参数并使用它们。但是，在它不存在的情况下，参数变量会选择一些“默认”值并继续。类似于在 PHP 中处理伪函数重载的方式。

这段代码是我能想到的。

```
CREATE PROCEDURE PROC_INS_CONTENT_TEST(IN DATA_VAL LONGTEXT)
BEGIN
    IF (DATA_VAL IS NULL) THEN SET DATA_VAL='DEFAULT'; END IF;
    INSERT INTO CONTENT_TEST (DATA) VALUES (DATA_VAL);
END 
```

而且这段代码不能按照我想要的方式工作。有没有办法在声明参数时将默认值赋给变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:52:02.770

就在这里。

如果你想在你的函数/过程中设置变量的默认值，你可以这样做：

```
CREATE PROCEDURE PROC_INS_CONTENT_TEST(IN DATA_VAL LONGTEXT)
BEGIN
    DECLARE my_data_double DOUBLE DEFAULT 0;
    DECLARE my_data_varchar VARCHAR(20) DEFAULT 'default_value';
    DECLARE DATA_VAL LONGTEXT DEFAULT 'default_value';
    DECLARE my_data_integer INT DEFAULT 0;
END 
```

或者，如果您想分配价值，您可以执行以下操作：

```
SET my_data_value = 12345; 
```

在你的函数/过程中。

# jpa - 如何在 JPA 中拥有一个父实体和多种类型的子实体？

> ID：13529969
> 
> 赞同：1
> 
> 时间：2012-11-23T13:19:42.273
> 
> 标签：jpa, entity

我正在尝试使用**JPA 注释设计我的****实体类**。

 **我想做的是如下：

**带有**
**id、***email、password、activation_key、active、role的 USER 表**

以及许多**TYPES OF USER 表**，例如。
**STUDENT_TABLE
USER_ID FirstName LastName 公司地址等**

**MENTOR
USER_ID 名字姓氏 DOB 部门等**

当 USER 将根据他们的角色注册时，他们将被存储在两个表中（USER、MENTOR/STUDENT）

当他们登录时，ManagedBean 将查看 UESR 表以验证身份验证。

我厌倦了使用@OneToOne，但它只适用于两张桌子。

如果any1可以提供帮助，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:53:52.503

如果我理解正确，您想要的是继承关系：

```
@Entity
@Inheritance(strategy = JOINED)
public abstract class User { ... }

@Entity
public class Student extends User { ... }

@Entity
public class Mentor extends User { ... } 
```

JOINED 策略告诉 JPA User 类中的字段存储在一个表（USER）中，并且每个子类在自己的表（STUDENT 和 MENTOR）中保留自己的字段，并使用连接列来引用 USER 表ID。**

# python - 文件系统 Python - 导入不起作用

> ID：13529971
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:19:48.567
> 
> 标签：python, import, path, filesystems

我在 MyFolder 文件夹中存储的文件中有一个 Python 脚本。文件系统的树结构如下

```
MyFolder
    - Image
          - scipt_image.py
    - script.py
    - script_test.py 
```

我想在脚本 script.py 中使用 Image 中的脚本 scipt_image.py。要包含这个 script_image.py，我使用这个：

```
import os, sys
DATA_DIR = os.path.abspath(os.path.join(os.getcwd(), 'Image'))
sys.path.append(DATA_DIR) 
```

然后，我导入 script_image.py，与

```
import scipt_image 
```

从编译时的错误来看，这似乎不起作用。但是，问题可能来自其他方面。这听起来正确吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:32:08.810

您是否有特定原因不简单地将`Image`文件夹用作 python 包并直接导入文件而不会弄乱 sys.path？

我会简单地`Image`变成一个[python 包](http://docs.python.org/2/tutorial/modules.html#packages)`__init__.py`（创建一个名为in的空文件`Image`），然后`script_image`像这样导入：

```
from Image import script_image 
```

# php - 传递隐藏值，html

> ID：13529974
> 
> 赞同：0
> 
> 时间：2012-11-23T13:20:07.240
> 
> 标签：php, html

我有以下 php 文件。显示项目.php

```
<?php
     *
     *
     *
   echo "<form action='http://retailthree.nn4m.co.uk/alex/add_data.html'>";
   echo   "<input type='hidden' name='value' value='$value'/>";
   echo   "<button type='submit'>Add</button>";
   echo "</form>";
 ?> 
```

然后是html文件。add_data.html：

```
 <form method="post" name="form">            
        <table id="mytable" border="1">
            <tr>
                <td>Trend <input type="text" name="trend" size="20"></td>
                  //many other fields
            </tr>
        </table>
  </forn> 
```

然后前面提到的 html 将对一个 php 文件执行一个操作。但是，我想要实现的是将隐藏数据 ->$value 从第一个 php 文件传递​​到 Trend 输入框（将 $value 内容打印到输入框）。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:24:18.417

您可以简单地使用发布的变量并将其放在您`<input>`喜欢的 value 属性中：

```
<input type="text" value="<?php echo $_GET['value'] ?>" name="trend" size="20"> 
```

当然，您应该先进行一些验证，然后再将其回显到`<input>`

编辑：

@ocanal 非常正确地提到 -`GET`是表单的默认方法。如果您的文件是 *.html，您将无法使用 PHP 处理这些表单，它必须是 *.php 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:28:13.850

更改文件名以在文件`add_data.html`中`add_data.php`使用以下代码`add_data.php`

```
<?php
// your php code
?>

<form method="post" name="form">            
  <table id="mytable" border="1">
    <tr>
     <td>
        Trend <input type="text" name="trend" size="20"  
                       value="<?php echo $_POST['trend'] ?>">
     </td>
      //many other fields
    </tr>
 </table>
 </forn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:37:35.863

我有点迷茫，但假设你的意思是你希望隐藏的值出现在另一个页面的文本输入字段中，我建议这样做：

网页

```
<form name='form' action='yourPhpFile.php' method='POST'>
    <input name='hiddenGuy' type='hidden' value='hello from the hidden guy'/>
    <input type='submit' value='Send'/>
</from> 
```

现在为您的名为 yourPhpFile.php 的 php 文件

```
<?php
    //your value from the hidden field will be held in the array $_POST from the previous document.
    //the key depends on your field's name.
    $val = $_POST['hiddenGuy'];
    echo "<form name='form' action='yourPhpFile.php' method='POST'>
    <input name='showingInText' type='text' value='".$val."'/>
</from>";
?> 
```

这也可以通过删除表单操作属性在同一页面上实现。并根据是否使用 isset 方法设置 $_POST 来回显不同的输入类型和值。

```
if(isset($_POST['hiddenGuy'])){
    echo "<input name='showingInText' type='text' value='".$_POST['hiddenGuy']."'/>";
}
else{
    echo "<input name='hiddenGuy' type='hidden' value='hello from the hidden guy'/>
    <input type='submit' value='Send'/>";
} 
```

# heroku - 删除大量 Heroku 应用程序的最简单方法是什么？

> ID：13529984
> 
> 赞同：1
> 
> 时间：2012-11-23T13:20:28.130
> 
> 标签：heroku

我有很多想要摆脱的 Heroku 应用程序。不幸的是，我没有原始存储库。我很高兴通过网络界面将它们一一删除。在我这样做之前，有没有一种使用工具带的快速方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:27:36.353

根据数量，您可以使用 Web 界面或使用[Heroku API DELETE/app 端点](https://api-docs.heroku.com/apps#DELETE/apps)创建脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T15:29:03.497

我会推荐下面的脚本。它要求您提供要保留的一个应用程序的名称，其想法是，如果您刚刚开始使用 heroku，您可能会在练习时创建一堆应用程序，直到您做对，然后想要删除所有休息。

```
myApp="$1"
ignore=("===" "<your email address>" "Apps")
allApps=($(heroku apps))

if [[ " ${allApps[@]} " =~ " $myApp " ]]; then
    # if the given app name is a listed app name
    for app in "${allApps[@]}"; do
        if [[ ! "$app" = "$myApp" ]]; then
            if [[ ! " ${ignore[@]} " =~ " $app " ]]; then
                heroku apps:destroy --app $app --confirm $app
            fi
        fi
    done
else
    echo "$1 is not a heroku app"
fi 
```

# windows - 如何从命令行设置 Sphinx 的 `exclude_patterns`？

> ID：13529985
> 
> 赞同：6
> 
> 时间：2012-11-23T13:20:28.423
> 
> 标签：windows, python-sphinx, exclusionpath

我在 Windows 上使用 Sphinx。
我的大部分文档都是针对普通用户的，但有些子页面的内容仅供管理员使用。所以我想构建我的文档的两个版本：一个完整​​的版本，以及一个不包括“管理”页面的第二个版本。

我[`exclude_patterns`在构建配置](http://sphinx-doc.org/config.html#general-configuration)中使用了它。
到目前为止，它有效。当我将其放入文件中时，将忽略名称包含“admin”的每个子文件夹中的每个`conf.py`文件：

```
exclude_patterns = ['**/*admin*'] 
```

问题是我想运行**一次**构建以获得两个版本。

我现在要做的是运行`make.bat`两次并在每次运行时提供不同的参数。
根据[文档](http://sphinx-doc.org/invocation.html#makefile-options)，我可以通过设置`BUILDDIR`和`SPHINXOPTS`变量来实现这一点。

所以现在我有一个`build.bat`看起来像这样的：

```
path=%path%;c:\python27\scripts

rem BUILD ADMIN DOCS
set SPHINXOPTS=
set BUILDDIR=c:\build\admin
call make clean
call make html

rem BUILD USER DOCS
set SPHINXOPTS=-D exclude_patterns=['**/*admin*']
set BUILDDIR=c:\build\user
call make clean
call make html

pause 
```

当我`set BUILDDIR=build`从 sphinx 生成的`make.bat`文件中删除该行时，两个不同目录中的构建工作。

但是，排除模式**不起作用**。
上面列出的批处理文件为第二个构建（具有排除模式的那个）输出了这个：

```
Making output directory...
Running Sphinx v1.1.3
loading translations [de]... done
loading pickled environment... not yet created

Exception occurred:
  File "C:\Python27\lib\site-packages\sphinx-1.1.3-py2.7.egg\sphinx\environment.
py", line 495, in find_files
    ['**/' + d for d in config.exclude_dirnames] +
TypeError: coercing to Unicode: need string or buffer, list found
The full traceback has been saved in c:\users\myusername\appdata\local\temp\sphinx-err-kmihxk.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
Either send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,
or report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. 
```

我究竟做错了什么？命令行中
的语法与文件中的语法不同吗？ 或者有没有更好的方法来一步构建两个不同的版本？`exclude_patterns``sphinx-build``conf.py`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T15:27:44.710

我的第一个想法是这是一个引用问题，引用在 Windows 命令行上很难正确引用是出了名的。但是，我无法想出任何改变行为的引用组合。（这个问题很容易复制）

当然，它仍然可能只是一些引用问题，我不够聪明，无法弄清楚，但我怀疑这是某种 Sphinx 错误，希望您将其报告给 Sphinx 开发人员。

**与此同时，这是一个替代解决方案：**

[从这里](http://sphinx-doc.org/config.html#module-conf)引用：

> 配置文件中有一个名为`tags`available 的特殊对象。它可用于查询和更改标签（请参阅包含基于标签的内容）。用于`tags.has('tag')`查询`tags.add('tag')`和`tags.remove('tag')`更改

`conf.py`这实际上允许您从命令行将标志传递到文件中，并且由于`conf.py`文件只是 Python，您可以使用语句根据您传入的标签有条件`if`地设置值。`exclude_patterns`

例如，您可以传递 Sphinx 选项，例如：

> 为管理员设置 SPHINXOPTS=-t

传递“foradmins”标签，然后`conf.py`像这样检查它：

```
exclude_patterns = blah
if tags.has('foradmins'):
    exclude_patterns = [] 
```

这应该允许你做你想做的事。祝你好运！

# cloudbees - SAML 身份验证

> ID：13529986
> 
> 赞同：0
> 
> 时间：2012-11-23T13:20:30.387
> 
> 标签：cloudbees

我们正在研究 IDaaS 产品（OneLogin、Okta 等）。当我们询问他们是否支持 CloudBees 时，他们说不支持，但他们说如果您支持 SAML 身份验证，他们可以非常轻松地添加对 CB 的支持。你知道你是否支持 SAML 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T01:02:38.343

CloudBees 支持与任何 SAML IdP 端点的 SAML 集成。SAML IdP 端点可以在您的场所运行，或者您可以使用 IdP 提供商，例如 OneLogin、Okta、Centrify 等。它们还提供您可以为 SAML 配置的 CloudBees 应用程序。流 - SP 启动或 IdP 启动的流也都受支持。

见，[http://developer-blog.cloudbees.com/2013/09/cloudbees-now-offers-saml-20.html](http://developer-blog.cloudbees.com/2013/09/cloudbees-now-offers-saml-20.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:46:08.667

没有对 SAML 的特定支持 - 但是托管在平台上的应用程序会很好地支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-01T15:59:13.257

Centrify 肯定有一个为 CloudBees 预先构建的 SAML 应用程序。

您可以在此处免费注册以进行测试。

[https://www.centrify.com/free-trial/](https://www.centrify.com/free-trial/)

# cakephp - 一个 CakePHP 应用程序，两个数据库

> ID：13529987
> 
> 赞同：0
> 
> 时间：2012-11-23T13:20:31.357
> 
> 标签：cakephp, database-connection, sqldatasource

我阅读了关于“一个模型/控制器的两个数据库”的各种问答，我发现了许多针对特定情况的解决方案（例如[http://goo.gl/EP8BB](http://goo.gl/EP8BB)），但我想知道是否必须将一个应用程序连接到两个数据库这既困难又费时。

我的意思是，我有两个数据库（相同的结构，不同的数据），但我只想使用一个 CakePHP 1.3 应用程序。我将如何选择连接到哪个数据库？很简单，查看 SERVER_NAME。

我的 database.php 文件中有两个数据库。为什么不能在模型中设置类似的东西？

```
**MyModel.php**
-----------
class MyModel extends AppModel {
    if ($_SERVER['SERVER_NAME' == "app1") {
        var $useDbConfig = "database1";
    } else if ($_SERVER['SERVER_NAME' == "app1") {  
        var $useDbConfig = "database2";
    }
} 
```

这个“快速解决方案”是幼稚和愚蠢的吗？它看起来很容易处理（部分原因是我还不能让它工作），而不是编写无穷无尽的组件和设置数据源等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:30:06.240

鉴于您将 ifelse 代码放在模型的 __construct 方法中（只是为了防止一些令人讨厌的错误填满您的屏幕） - 不，它既不幼稚也不愚蠢。

我使用了 sth - 更多扩展但 - 基本上类似于在开发和生产配置之间切换。

如果相应的配置开关更复杂和/或在多个应用程序中使用，那么一个组件在我看来是有意义的。

# ios - 从 didFinishPickingMediaWithInfo 调用 performSegueWithIdentifier

> ID：13529988
> 
> 赞同：0
> 
> 时间：2012-11-23T13:20:33.907
> 
> 标签：ios, objective-c, iphone, ipad, segue

我想`segue`从`imagePickerController:didFinishPickingMediaWithInfo:`方法中以编程方式调用 a ，但它不起作用。它不会崩溃，但不起作用。它什么也不做。该`prepareForSegue`方法被正确调用。

```
- (void) imagePickerController:(UIImagePickerController *)picker 
         didFinishPickingMediaWithInfo:(NSDictionary *)info {

   rutaFoto = [info valueForKey:UIImagePickerControllerMediaURL];
   [self dismissModalViewControllerAnimated:YES];
   [self performSegueWithIdentifier:@"aGaleria" sender:self];
} 
```

`segue`链接`UIViewControllers`2 。如果我`performSegueWithIdentifier`从其他地方（例如从推送`UIButton`方法）调用 segue，它会起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:24:53.693

尝试使用dismissViewControllerAnimated:completion: 并将对performSegueWithIdentifier:sender: 的调用放在完成块中（dismissModalViewControllerAnimated: 无论如何都会被贬值，所以你不应该使用它）。

```
 [self dismissViewControllerAnimated:YES completion:^{
           [self performSegueWithIdentifier:@"aGaleria" sender:self]; 
      }]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-23T15:29:14.350

我想知道这是否与已经处理当前 ViewController 中的更改的主线程有关，从 didFinishPickingMediaWithInfo 到触发它的原始 ViewController 之间的转换。

我会尝试两件事，第一是在您调用 aGaleria segue 时延迟：

```
sleep(2.0);
[self performSegueWithIdentifier:@"aGaleria" sender:self]; 
```

第二个更好的选择是在完成PickingMediaWithInfo 之后从视图中执行segue。您可以在原始 ViewController 中设置一个新的 NSNotificationCenter 触发器，然后在 didFinishPicking 方法中延迟触发它：

# iphone - mediaelement.js youtube 预览图像

> ID：13529989
> 
> 赞同：1
> 
> 时间：2012-11-23T13:20:38.613
> 
> 标签：iphone, html, youtube, mediaelement.js

我使用 Contao 3 和 youtube 内容元素，它基本上是 mediaelement.js 插件。一旦我添加了预览图像，就可以看到，然后我们单击视频开始播放。在台式计算机上它工作正常。在手机/平板电脑（Iphone、Ipad）上我不起作用。我们无法按播放或开始播放视频。只要我删除图片，它就可以工作。这有什么已知的问题吗？谢谢

# javascript - Javascript 复选框值

> ID：13529991
> 
> 赞同：0
> 
> 时间：2012-11-23T13:20:51.620
> 
> 标签：javascript

我有这个javascript代码，它从总和中减去一个复选框被选中时的值。在我的情况下，每个复选框都选中它减去 20。

```
<script language="JavaScript">
    function Calculate(){
    var tag = window.document.getElementsByClassName("hsnb"), total = <? echo $total; ?>;
    for (var i in tag){
        total -= tag[i].checked && !isNaN(Number(20)) ? Number(20) : 0;
    }
    var cucu = + total.toFixed(2);

    if(cucu < "20"){  
        alert("You dont have enough points!");
        for(i = 1; document.getElementById("bifa" + i) !== null; i++) {
            if (document.getElementById("bifa" + i).checked){

            } else {
                document.getElementById("bifa" + i).disabled = true;
            }
        }
    }

    window.document.getElementById("outputDiv").innerHTML = '<span style="font-size:20px;">You have: POINTS' + cucu + '</span>';
}​
</script> 
```

我想给每个复选框一个特定的值，比如说：

```
<input type="checkbox" id="check" name="check" value="10">
<input type="checkbox" id="check" name="check" value="20"> 
```

如果我选中第一个复选框，它应该减去 10，如果我选中第二个复选框，则减去 20。你知道我的意思，减去每个复选框的值。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:24:38.983

嗨，您应该尝试使用 jQuery，例如

```
var sub = 0;
jQuery("input[name=check]:checked").each(function(index, element){
    sub = sub + jQuery(element).val();
});
var total = yourNumber - sub; 
```

我还没有测试过这个片段，但它应该可以工作

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:18:36.653

在纯 javascript 中，您可以将事件附加到每个输入，并在每次调用处理程序时检查“checked”属性；如果为真，则从总和中减去输入值：

```
<input type="checkbox" id="check" name="check" value="10">
<input type="checkbox" id="check" name="check" value="20">
    <script type="text/javascript">
        window.onload = function(){
            var aBox = document.getElementsByTagName("input"), iTotal = <? echo $total; ?>;
            Array.prototype.forEach.call(aBox,function(oCheck, iIdx,aBox){
                oCheck.onclick = function(){
                    if(this.checked){
                        iTotal = iTotal - this.value;
                        console.log(iTotal);
                    }
                }
            });
        }
    </script> 
```

# ios - 不希望模态视图在键盘显示上向上移动

> ID：13529995
> 
> 赞同：4
> 
> 时间：2012-11-23T13:21:01.027
> 
> 标签：ios, xcode, modalviewcontroller

我从这里有一个视图控制器，我得到了一个弹出窗口。从这个弹出窗口中，我将视图呈现为模态视图。其中有一个文本视图。当编辑开始时，整个模态视图向上移动（这通常是人们想要的）。但我不希望那样。有什么办法，我可以阻止我的模态视图在键盘显示和隐藏上上下移动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:01:23.847

If I guessed correctly then you need to set yourviewControler.modalPresentationStyle=UIModalPresentationPageSheet;

instead of what you are probably using right now yourviewControler.modalPresentationStyle=UIModalPresentationFormSheet;

# android - Android：TextToSpeech 不适用于 Android 4.1

> ID：13529996
> 
> 赞同：1
> 
> 时间：2012-11-23T13:21:01.580
> 
> 标签：android

有谁知道为什么`TextToSpeech`我在这里的方法在 Android 4.1 上不再适用？

在`sayIt()`它总是返回的方法上`Log.i(TAG, "Failure: TextToSpeech instance tts was not properly initialized");`

```
public class SpeakSuperActivity extends Activity implements OnInitListener {

    private final static String TAG = "TextToSpeech";

    protected static final Locale defaultLocale = Locale.GERMAN;
    private static int TTS_DATA_CHECK = 100;
    protected TextToSpeech tts = null;
    protected boolean ttsIsInit = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Use an Intent and startActivityForResult to check whether TTS data installed on the
        // device. Result returned and acted on in method onActivityResult(int, int, Intent) below.

        Intent checkIntent = new Intent();
        checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkIntent, TTS_DATA_CHECK);
    }

    // protected void initTextToSpeech() {
    // Log.d(TAG, "TTS initTextToSpeech() called");
    // Intent intent = new Intent(Engine.ACTION_CHECK_TTS_DATA);
    // startActivityForResult(intent, TTS_DATA_CHECK);
    // }

    protected void onActivityResultOld(int requestCode, int resultCode, Intent data) {
        if (requestCode == TTS_DATA_CHECK) {
            Log.d(TAG, "onActivityResult: TTS_DATA_CHECK fork reached");
            if (resultCode == Engine.CHECK_VOICE_DATA_PASS) {
                Log.d(TAG, "Data installed: Engine.CHECK_VOICE_DATA_PASS fork reached");
                tts = new TextToSpeech(this, this);
                // tts = new TextToSpeech(this, new OnInitListener() {
                // public void onInit(int status) {
                // if (status == TextToSpeech.SUCCESS) {
                // Log.w(TAG, "TTS onInit() success :)");
                // ttsIsInit = true;
                // if (tts.isLanguageAvailable(Locale.UK) >= 0) {
                // Log.d(TAG, "Local UK available");
                // tts.setLanguage(Locale.UK);
                // }
                // if (tts.isLanguageAvailable(Locale.GERMAN) >= 0) {
                // Log.d(TAG, "Local German available");
                // tts.setLanguage(Locale.GERMAN);
                // }
                // tts.setPitch(0.8f);
                // tts.setSpeechRate(1.1f);
                // speak("Hallo Sprücheklopfer");
                // } else if (status == TextToSpeech.ERROR) {
                // Log.w(TAG, "TTS onInit() failed :(");
                // }
                // }
                // });

            } else {
                Log.i(TAG, "TTS not installed yet, calling intent to install...");
                Intent installVoice = new Intent(Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installVoice);
            }
        }

    }

    // Create the TTS instance if TextToSpeech language data are installed on device. If not
    // installed, attempt to install it on the device.

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == TTS_DATA_CHECK) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {

                // Success, so create the TTS instance. But can't use it to speak until
                // the onInit(status) callback defined below runs, indicating initialization.

                Log.i(TAG, "Success, let's talk");
                // XXX: NOTE: it is REALLY important to use new TextToSpeech(getApplicationContext(), this) instead of new TextToSpeech(this, this)!
                tts = new TextToSpeech(getApplicationContext(), this);

                // // Use static Locales method to list available locales on device
                // Locale locales [] = Locale.getAvailableLocales();
                // Log.i(TAG,"Locales Available on Device:");
                // for(int i=0; i<locales.length; i++){
                // String temp = "Locale "+i+": "+locales[i]+" Language="
                // +locales[i].getDisplayLanguage();
                // if(locales[i].getDisplayCountry() != "") {
                // temp += " Country="+locales[i].getDisplayCountry();
                // }
                // Log.i(TAG, temp);
                // }

            } else {
                // missing data, so install it on the device
                Log.i(TAG, "Missing Data; Install it");
                Intent installIntent = new Intent();
                installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installIntent);
            }
        }
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {
            ttsIsInit = true;

            // Set to a language locale after checking availability
            Log.i(TAG, "defaultLocaleAvailable=" + tts.isLanguageAvailable(defaultLocale));
            tts.setLanguage(defaultLocale);
            // Examples of voice controls. Set to defaults of 1.0.
            tts.setPitch(1.0F);
            tts.setSpeechRate(1.0F);
            // Issue a greeting and instructions in the default language
            // speakGreeting(defaultLocale.getDisplayLanguage());
            // sayIt("Hallo Sprücheklopfer", true);
        } else {
            ttsIsInit = false;
            Log.i(TAG, "Failure: TextToSpeech instance tts was not properly initialized");
        }
    }

    // protected void speak(String text) {
    // Log.d(TAG, "TTS sould say: " + text);
    // if (tts != null && ttsIsInit) {
    // tts.speak(text, TextToSpeech.QUEUE_ADD, null);
    // } else {
    // Log.w(TAG, "TTS not initialised or null");
    // }
    // }

    // Method to speak a string. The boolean flushQ determines whether the text is
    // appended to the queue (if false), or if the queue is flushed first (if true).

    public void sayIt(String text, boolean flushQ) {
        if (tts != null && ttsIsInit) {
            if (flushQ) {
                tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
            } else {
                tts.speak(text, TextToSpeech.QUEUE_ADD, null);
            }
        } else {
            Log.i(TAG, "Failure: TextToSpeech instance tts was not properly initialized");
        }
    }

    // Release TTS resources when finished

    @Override
    protected void onDestroy() {
        if (tts != null) {
            tts.stop();
            tts.shutdown();
            ttsIsInit = false;
        }
        super.onDestroy();
    }

    public void onInitOld(int status) {
        Log.i(TAG, "TTS onInit() status :" + status);
        if (status == TextToSpeech.SUCCESS) {
            Log.w(TAG, "TTS onInit() success :)");
            ttsIsInit = true;
            if (tts.isLanguageAvailable(Locale.UK) >= 0) {
                Log.d(TAG, "Local UK available");
                tts.setLanguage(Locale.UK);
            }
            if (tts.isLanguageAvailable(Locale.GERMAN) >= 0) {
                Log.d(TAG, "Local German available");
                tts.setLanguage(Locale.GERMAN);
            }
            tts.setPitch(0.8f);
            tts.setSpeechRate(1.1f);
            sayIt("Hallo Sprücheklopfer", true);
        } else if (status == TextToSpeech.ERROR) {
            Log.w(TAG, "TTS onInit() failed :(");
        } else {
            Log.w(TAG, "TTS onInit() unknown status :" + status);
        }
    }

} 
```