# StackOverflow 问答 14106000-14106999

# r - R中随机森林的并行执行

> ID：14106010
> 
> 赞同：32
> 
> 时间：2012-12-31T20:58:05.173
> 
> 标签：r, parallel-processing

我在 R 中并行运行随机森林

```
library(doMC)
registerDoMC()
x <- matrix(runif(500), 100)
y <- gl(2, 50) 
```

并行执行（耗时 73 秒）

```
rf <- foreach(ntree=rep(25000, 6), .combine=combine, .packages='randomForest') %dopar%
randomForest(x, y, ntree=ntree) 
```

顺序执行（耗时 82 秒）

```
rf <- foreach(ntree=rep(25000, 6), .combine=combine) %do%
randomForest(x, y, ntree=ntree) 
```

在并行执行中，树的生成非常快，例如 3-7 秒，但其余时间用于合并结果（合并选项）。因此，运行并行执行的唯一价值是树的数量非常多。有什么办法可以调整“组合”选项以避免在每个节点上进行任何我不需要的计算并使其更快

PS。以上只是数据的一个例子。实际上，对于大约 100 次观察，我有大约 10 万个特征。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-02T18:22:10.787

设置`.multicombine`为`TRUE`可以产生重大影响：

```
rf <- foreach(ntree=rep(25000, 6), .combine=randomForest::combine,
              .multicombine=TRUE, .packages='randomForest') %dopar% {
    randomForest(x, y, ntree=ntree)
} 
```

这会导致`combine`调用一次而不是五次。在我的台式机上，它在 8 秒而不是 19 秒内运行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-31T21:04:44.263

您是否知道[caret](http://cran.r-project.org/package=caret)包可以为您做很多并行运行（以及数据准备、摘要等）的手动操作？

当然，最终，如果随机森林计算本身还存在一些代价高昂的操作，那么您无能为力，因为 Andy 花了好几年的时间来改进它。我预计很少或没有低垂的水果可供采摘......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-21T08:49:33.867

H20 包可用于解决您的问题。

根据 H20[文档](https://cran.r-project.org/web/packages/h2o/h2o.pdf)页面，H2O 是“用于大数据的开源数学引擎，可在各种集群环境中计算并行分布式机器学习算法，例如广义线性模型、梯度提升机器、随机森林和神经网络（深度学习）。”

使用 H2O 实现随机森林：

[https://www.analyticsvidhya.com/blog/2016/05/h2o-data-table-build-models-large-data-sets/](https://www.analyticsvidhya.com/blog/2016/05/h2o-data-table-build-models-large-data-sets/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-16T17:31:56.223

我想知道[parallelRandomForest](https://bitbucket.org/mkuhn/parallelrandomforest)代码是否对您有帮助？

[根据作者的说法，](http://www.r-bloggers.com/introducing-parallelrandomforest-faster-leaner-parallelized/)它在他的数据集上运行速度提高了大约 6 倍，而内存消耗减少了 16 倍。

[SPRINT](http://www.ed.ac.uk/pathway-medicine/our-research/dpmgroups/ghazal-group/pathway-informatics/sprint)[在这里](http://www.inside-r.org/packages/cran/sprint/docs/prandomForest)也有一个并行实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-01T13:41:56.867

根据您的 CPU，您可能会获得 5%-30% 的加速，选择作业数量以匹配您的注册核心数量与系统逻辑核心数量相匹配。（有时匹配系统物理内核的数量会更有效）。如果您有一台具有超线程（4 个逻辑核心）的通用 Intel 双核笔记本电脑，那么 DoMC 可能注册了一个 4 核集群。因此，当计算迭代 5 和 6 以及启动/停止两个额外作业的额外时间时，2 个内核将空闲。只做 2-4 个工作的更多树木会更有效率。

# c# - RestRoute 允许 id 中的句点并接受结果格式

> ID：14106011
> 
> 赞同：1
> 
> 时间：2012-12-31T20:58:11.573
> 
> 标签：c#, regex, asp.net-mvc, rest

我有一个基于 asp.net mvc 的大量使用的 REST 服务。其中一个资源适用于您使用如下路线指定给定用户的用户：

```
.../User/{id}.{format} 
```

前任：

```
http://mysvc.com/User/abc123.json 
```

在这种情况下，id 是用户名。我们目前有一个路线图，它接受除句点之外的所有字符，以免与 [可选] 格式扩展名发生冲突。

路线地图：

```
/User/{id[^\\.]+} 
```

好吧，现在我们有了一个使用电子邮件地址作为用户名的新客户端。这显然会导致一个问题。我们已经考虑取消格式扩展支持，因为所有已知的客户端当前都使用 json。但是，我不希望这样做并修改我的路线以接受格式或 json 或 xml 并且仍然允许句点。

我觉得应该有一种方法来格式化这个正则表达式，以便说 id 可能包含句点并且如果提供它仍然映射格式。但是，我目前有一个心理障碍。

# sql - tablerows 中数据更改的历史表

> ID：14106013
> 
> 赞同：-3
> 
> 时间：2012-12-31T20:58:40.947
> 
> 标签：sql, sql-server, tsql

我有一个包含以下字段的历史表，

```
ColumnName,OldValue,NewValue 
```

现在我正在更新`table X`，我想更新我更改的字段值列表的历史记录表。我怎样才能在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:17:57.743

如果您使用的是 SQL Server 2008 或更高版本，则可以使用[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx) & [MERGE](http://msdn.microsoft.com/en-us/library/bb510625.aspx)命令。这里有几个链接应该

*   [MERGE 和 OUTPUT——T-SQL 的瑞士军刀](http://sqlblog.com/blogs/jamie_thomson/archive/2010/01/06/merge-and-output-the-swiss-army-knife-of-t-sql.aspx)
*   [MSDN：输出子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177564.aspx)
*   [MSDN：合并（Transact-SQL）](http://msdn.microsoft.com/en-us/library/bb510625.aspx)

或者，您可以仅将[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)命令（不需要 SQL Server 2008 或更高版本）与您的删除/更新语句结合使用，以通过单个语句移动数据。

# javascript - 最大值 + 选择 Div

> ID：14106014
> 
> 赞同：2
> 
> 时间：2012-12-31T20:58:44.353
> 
> 标签：javascript, jquery

我在使用以下 JSFiddle 时遇到问题。

我基本上想用黄色边框突出显示具有最高值的 div。

但是，如果多个 div 具有相同的值，即最大值，则程序必须从所有具有最大值的 div 中随机选择一个 div。

例如，三个 20 的 div 之一应该是随机选择的，它的边框颜色应该是黄色的。

[http://jsfiddle.net/DyGqm/5/](http://jsfiddle.net/DyGqm/5/)

**HTML**

```
<div class="num">16</div>
<div class="num">20</div>
<div class="num">18</div>
<div class="num">20</div>
<div class="num">20</div> 
```

**CSS**

```
.num {
    border: 2px solid green;
    width:120px;
    text-align: center;    
}​ 
```

**JS**

```
var max = -Infinity;

var maxEle = $(".num").each(function() {
    if (+this.value > max) max = +this.value;
}).filter(function() {
    return this.value == max;
});

if (maxEle.length > 1) maxEle = maxEle.eq(Math.floor(Math.random() * maxEle.length));

maxEle.css("border-color", "yellow");​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T21:06:51.160

1) 你没有选择 jQuery 作为框架。它正在使用 MooTools。

2)`div`没有`.value`. 您可以使用`.innerHTML`.

[http://jsfiddle.net/DyGqm/8/](http://jsfiddle.net/DyGqm/8/)

最终代码：

```
var max = -Infinity;

var maxEle = $(".num").each(function() {
    if (+this.innerHTML > max) max = +this.innerHTML;
}).filter(function() {
    return this.innerHTML == max;
});

if (maxEle.length > 1) maxEle = maxEle.eq(Math.floor(Math.random() * maxEle.length));

maxEle.css("border-color", "yellow"); 
```

# database-design - 谷歌电子表格之间的双向内容同步

> ID：14106019
> 
> 赞同：1
> 
> 时间：2012-12-31T20:59:32.493
> 
> 标签：database-design, sync, google-sheets, dashboard, database-mirroring

我正在创建一个谷歌电子表格仪表板来总结来自许多不同项目的内容。所有项目内容都包含在其他谷歌电子表格中。每个项目都有一个任务列表/待办事项列表。我正在尝试找到一个允许我执行以下操作的解决方案：

**1)**将每个项目电子表格中的任务列表拉到仪表板上的一个主任务表中

**2）**在项目任务表上添加/编辑/删除任务，然后将自动更新主任务表。

**3）**在主任务表上添加/编辑/删除任务，然后将自动更新项目任务表。

数字 1 和 2 使用 importrange() 和 query() 函数相当简单，但据我所知，这些只是单向解决方案。3号有帮助吗？

样本文件：

**[项目一](https://docs.google.com/spreadsheet/ccc?key=0AmPYYdOO5yOsdHhPRmxkbGdiN1ZsNzdCUmV3c2VrNnc#gid=0)**

**[项目 2](https://docs.google.com/spreadsheet/ccc?key=0AmPYYdOO5yOsdG1tYXlOY2RoMEVSdXIzS0wxTGtCb3c#gid=0)**

**[仪表板](https://docs.google.com/spreadsheet/ccc?key=0AmPYYdOO5yOsdGw4YVdFb2J0SWpOOF9vZ3hRRHJLdGc#gid=0)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T03:42:34.797

您可以使用此脚本并执行任务。但这适用于同一个电子表格。我无法将它与两个不同的电子表格链接起来。

```
function onEdit()

{
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var activeSheet = ss.getActiveSheet();
  var activeSheetName = ss.getActiveSheet().getSheetName();

  if( activeSheetName == "Sheet1" || activeSheetName == "Sheet2" )
  {
    var activeCell = activeSheet.getActiveCell();
    var activeCellinA1 = activeCell.getA1Notation();

    if( activeCellinA1 == "A1" )
    {
      var activeCellValue = activeCell.getValue();
      if( activeSheetName == "Sheet1" )
        ss.getSheetByName("Sheet2").getRange("A1").setValue(activeCellValue);
      if( activeSheetName == "Sheet2" )
        ss.getSheetByName("Sheet1").getRange("A1").setValue(activeCellValue);
    }      
  }
} 
```

# objective-c - 更改 NSMutableArray 中所有对象的属性

> ID：14106023
> 
> 赞同：8
> 
> 时间：2012-12-31T21:00:36.847
> 
> 标签：objective-c, properties, nsstring, nsmutablearray

我有`NSMutableArray`9 个对象。这些对象具有许多属性，例如`questionName`,`questionWhatRow`等。

**我**希望能够更改`NSMutableArray`.

这是我的 NSMutableArray 类。

```
-(id) init
{
    self = [super init];

    if (self)
    {
        self.questionsArray = [[NSMutableArray alloc] init];

        Question *newQuestion = [[Question alloc] init];
        newQuestion.questionName = @"What is the name of the girl who has to fetch water for her family every day?";
        newQuestion.questionRowName = @"Question 1";
        newQuestion.questionAnswer = @"Nya";
        newQuestion.questionHint = @"Maybe if you read the book you would know";
        newQuestion.questionWhatRow = @"Nya";
        newQuestion.questionCompleteOrNot = @"No";
        newQuestion.pointForQuestion = 1;
        [self.questionsArray addObject:newQuestion];

        newQuestion = [[Question alloc] init];
        newQuestion.questionName = @"What is Nya's sister's name?";
        newQuestion.questionRowName = @"Question 2";
        newQuestion.questionAnswer = @"Akeer";
        newQuestion.questionHint = @"Maybe if you read the book you would know";
        newQuestion.questionWhatRow = @"Nya";
        newQuestion.questionCompleteOrNot = @"No";
        newQuestion.pointForQuestion = 1;
        [self.questionsArray addObject:newQuestion];

        newQuestion = [[Question alloc] init];
        newQuestion.questionName = @"What people is Nya's mother scared of when her father and sons go hunting?";
        newQuestion.questionRowName = @"Question 3";
        newQuestion.questionAnswer = @"Dinka";
        newQuestion.questionHint = @"Maybe if you read the book you would know";
        newQuestion.questionWhatRow = @"Nya";
        newQuestion.questionCompleteOrNot = @"No";
        newQuestion.pointForQuestion = 1;
        [self.questionsArray addObject:newQuestion];

        newQuestion = [[Question alloc] init];
        newQuestion.questionName = @"What is Salva scared of when he is in the Akobo desert?";
        newQuestion.questionRowName = @"Question 4";
        newQuestion.questionAnswer = @"Lions";
        newQuestion.questionHint = @"He is scared of an animal because it ate his friend Marial";

        newQuestion = nil;

    }

    return self;
}

-(NSUInteger)count
{
    return questionsArray.count;
}

- (Question *)questionAtIndex:(NSUInteger)index
{
    return [questionsArray objectAtIndex:index];
} 
```

现在，我有另一个名为 的类`ScoreViewController`，我希望能够将所有对象/问题的属性`questionCompleteOrNot`更改`NSMutableArray` `questionsArray`为`@"No"`.

我的 ScoreView 有一个重置按钮，但我不知道该放什么来更改 to的**所有** `questionCompleteOrNot`属性。`questionsArray``@"No"`

对不起，这个问题很长，我试图非常具体。

# 编辑

这是我的 tableView 的 DetailView。

```
if ([[selectedQuestion questionCompleteOrNot] isEqualToString:@"No"])
    {
        if ([[selectedQuestion questionAnswer] caseInsensitiveCompare:answerField.text] == NSOrderedSame)
        {
            // Show the  correct label
            [correctLabel setHidden:NO];
            correctLabel.text = @"Correct!";
            correctLabel.textColor = [UIColor greenColor];

        }
        else
        {
            // Show the incorrect label
            [correctLabel setHidden:NO];
            correctLabel.text = @"Incorrect";
            correctLabel.textColor = [UIColor redColor];
            [incorrectPlayer play];
            [[selectedQuestion questionCompleteOrNot] isEqualToString:@"Yes"];

        }

        // Erase the text in the answerField
        answerField.text = @"";
    }
    if ([[selectedQuestion questionCompleteOrNot] isEqualToString:@"Yes"])
    {
        UIAlertView *error = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:@"You already answered this question. Please click the reset button on the score view to restart."
                              delegate:self
                              cancelButtonTitle:@"Okay!"
                              otherButtonTitles:nil];

        [error show];
        answerField.text = @"";
    }

    selectedQuestion.questionCompleteOrNot = @"Yes";
    correctLabel.text = @"";
    NSLog(@"Selected question's questionCompleteOrNot is %@", [selectedQuestion questionCompleteOrNot]); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T21:06:49.023

您可以使用`NSArray`'s [`makeObjectsPerformSelector:withObject:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/makeObjectsPerformSelector:withObject:)，如下所示：

```
[questionsArray makeObjectsPerformSelector:@selector(setQuestionCompleteOrNot:) withObject:@"No"]; 
```

# xcode - iOS - 从 UIPicker 获取价值，其中项目是关系

> ID：14106024
> 
> 赞同：0
> 
> 时间：2012-12-31T21:01:03.790
> 
> 标签：xcode, core-data, ios6, uipicker

我正在尝试在核心数据应用程序中使用来自 UIPicker 的值。

选择器中填充了实体 B（类别）中的项目。

我想让实体 A 中的记录使用实体 B 中的选定项目。

我可以加载选择器，通过记录，我可以看到选择器的值，例如：

猫是保险，

猫是旅行。

cat 是与主要实体（费用）的关系，我不知道如何将一个与另一个联系起来。

我一直在尝试其中一些：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    //NSString *cat = [expense valueForKey:@"category"];
    //NSLog(@"cat is %@", cat);

    NSString *cat2 = ((SPCategory *)[allCategories objectAtIndex:row]).name;
    NSLog(@"cat2 is %@", cat2); << this works I can see the cat name.

    self.expense.category.name = ((SPCategory *)[allCategories objectAtIndex:row]).name;
    NSLog(@"category is %@", self.expense.category.name );

    //categoryTextField.rightTextField.text = [self.expense valueForKey:@"category"];

} 
```

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:27:34.847

试试`self.expense.category = ((SPCategory *)[allCategories objectAtIndex:row])`。

# semantic-web - OWL 语言的非图形工具

> ID：14106025
> 
> 赞同：2
> 
> 时间：2012-12-31T21:01:36.167
> 
> 标签：semantic-web, owl

我目前正在做一个项目，我必须与 OWL 合作。我有像 Protege 和 OntoStudio 这样的图形工具，但我需要一个非图形工具。我可以直接在 Eclipse 或 Turbo-C 中编写代码时使用的工具，而不是创建图表并将其转换为 owl 代码。我能找到这样的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:15:16.657

我没有测试过这个，我通常使用 Protege 编辑（它也允许你直接编辑代码）

*   一些 vim owl 工具：[https](https://github.com/mattpap/vim-owl-tools) ://github.com/mattpap/vim-owl-tools ，似乎被放弃了
*   Protege 插件，可让您直接编辑：http: [//www.co-ode.org/downloads/manchesterowlsyntaxeditor/](http://www.co-ode.org/downloads/manchesterowlsyntaxeditor/)
*   另一种，基于Eclipse： http: [//owl-eclipse.projects.semwebcentral.org/html/userguide/tasks-3.1.html](http://owl-eclipse.projects.semwebcentral.org/html/userguide/tasks-3.1.html)

您还可以使用 notepad++ 或任何文本编辑器

我的建议是：将 Protege 与任何插件一起使用以使代码编辑更容易，或者从 protege 开始，然后根据需要编辑生成的文件

# python - 使用 matplotlib 在 wxpython 中绘图

> ID：14106027
> 
> 赞同：1
> 
> 时间：2012-12-31T21:02:07.243
> 
> 标签：python, matplotlib, plot, live

我想在 wxPython 的拆分窗口中创建一个实时图（使用 matplotlib？）——到目前为止，我有处理逻辑的代码：我正在创建一个 PID 控制器，我正在寻找添加一个实时图（假设样本之间有 1 秒的延迟，现在使用伪/随机样本）

到目前为止，我的代码在这里（如下）-请告知

```
import wx
import matplotlib as mpl
mpl.use('WXAgg')
import matplotlib.pyplot as plt
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as Canvas

# global constants
Kp = 10
Ki = 2
Kd = 1

# functions used
def AttentionBox( self, message ):
    dialog = wx.MessageDialog(self, message, 'Attention!', wx.ICON_ERROR)
    dialog.ShowModal()
    dialog.Destroy()

def StatusBar( self, message=None):
    statusMessage = "PID constants( " + str(Kp)+","+str(Ki)+","+str(Kd)+" ): "
    self.statusbar.SetStatusText( statusMessage + message )

class PIDFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title="PID Flow Controller", size=(1000,550))
        # split the screen
        self.sp = wx.SplitterWindow(self)
        self.p1 = wx.Panel(self.sp, style = wx.SUNKEN_BORDER)  
        self.p2 = wx.Panel(self.sp, style = wx.SUNKEN_BORDER)
        self.sp.SplitVertically(self.p1, self.p2, 860)
        self.statusbar = self.CreateStatusBar()
        StatusBar(self, "System Idle")

        # define Temperature and Flow Control 
        wx.StaticBox(self.p2, -1, "System Control",             pos=(5, 5), size=(100, 240))
        wx.StaticText(self.p2, -1,"Target (litres/min):",       pos=(15, 100))
        self.Heater     = wx.CheckBox(self.p2, -1 ,  "Heater",  pos=(20,35))
        self.Chiller    = wx.CheckBox(self.p2, -1 ,  "Chiller", pos=(20,65))
        self.TargetFlow = wx.SpinCtrl(self.p2,  -1,  "100",     pos=(15,120), size=(80, 20), min=0, max=350)

        self.ActivateButton = wx.Button(self.p2, -1, "Activate",pos=(20,180))
        self.ActivateButton.Bind(wx.EVT_BUTTON, self.ActivateSystem)

        self.StopButton = wx.Button(self.p2, -1,     "Stop",    pos=(20,215))
        self.StopButton.Bind(wx.EVT_BUTTON, self.StopSystem)

############################################ BUTTONS ######################################################
    def ActivateSystem(self, event):
        if( self.Heater.GetValue() and self.Chiller.GetValue() ):
         StatusBar(self,"Target Flow: " + str(self.TargetFlow.GetValue()) + " litres/min" )
         self.Heater.SetValue(0)
         self.Chiller.SetValue(0)
         AttentionBox( self, "Heater and Chiller? Not Possible - Neither Activated" )   

         elif( self.Heater.GetValue() ):
         StatusBar(self,"Heater Active. Target Flow: " + str(self.TargetFlow.GetValue()) + " litres/min" )

        elif( self.Chiller.GetValue() ):
         StatusBar(self,"Chiller Active. Target Flow: " + str(self.TargetFlow.GetValue()) + " litres/min" )

        else:
         StatusBar(self,"Target Flow: " + str(self.TargetFlow.GetValue()) + " litres/min" )  

    def StopSystem(self, event):
        StatusBar(self, "System Idle" )
        self.Heater.SetValue(0)
        self.Chiller.SetValue(0)    
        self.TargetFlow.SetValue(0)

############################################ GRAPHING ######################################################

app = wx.App(redirect=False)
frame = PIDFrame(None, -1)
frame.Show()
app.MainLoop() 
```

# objective-c - ios: MapView Pin 颜色注释不断变化；为什么？

> ID：14106033
> 
> 赞同：2
> 
> 时间：2012-12-31T21:03:06.047
> 
> 标签：objective-c, ios, annotations, mkmapview

您好，感谢您的帮助。

我正在使用以下代码在我的 MapView 注释上设置图钉颜色？

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"pinView"];
    if (!pinView) {

        //////////////
        pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pinView"];
        pinView.pinColor = MKPinAnnotationColorGreen;
        if([[annotation title] isEqualToString:@"MuRoom"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorRed;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Mike's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorRed;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Bill's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorPurple;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Steve's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorGreen;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Louisa's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorGreen;

            NSLog( @"data from ann index %@", annTile);
        }

        pinView.animatesDrop = YES;
        pinView.canShowCallout = YES;

        UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        pinView.rightCalloutAccessoryView = rightButton;
    } else {
        pinView.annotation = annotation;
    }
    return pinView;
}

I am then using the function below to filter my pins locaions

-(void)FilterAddAll:(id)sender
{
    [mapview removeAnnotations:annoArra];
    [mapview removeAnnotations:annoArrayVenue];
 [mapview removeAnnotations:artArray];

//    CLLocationCoordinate2D center = mapview.centerCoordinate;
//    mapview.centerCoordinate = center;

    [mapview addAnnotations:annoArra];
    [mapview addAnnotations:annoArrayVenue];
    [mapview addAnnotations:artArray];

}

-(void)FilterArt:(id)sender
{
    [mapview removeAnnotations:annoArra];
    [mapview removeAnnotations:artArray];
    [mapview removeAnnotations:annoArrayVenue];

    [mapview addAnnotations:annoArra];
}

-(void)FilterVenue:(id)sender
{
    [mapview removeAnnotations:annoArra];
    [mapview removeAnnotations:artArray];
    [mapview removeAnnotations:annoArrayVenue];

    [mapview addAnnotations:artArray];
} 
```

问题：如何让引脚颜色保持原来的颜色？在我过滤后，它们会作为随机的 pin 颜色返回。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:08:19.287

发生这种情况是因为您没有正确使用“reuseIdentifier”。当您从 dequeueReusableAnnotationViewWithIdentifier:@"pinView" 取回 pin 时，您需要：

始终设置引脚颜色，或者为每个彩色引脚使用不同的重用标识符

即，您可能会得到一个带有红色引脚的可重用视图，并且您想显示一个蓝色引脚

例子：

```
MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"pinView"];
    if (!pinView) {

        //////////////
        pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pinView"];

        pinView.animatesDrop = YES;
        pinView.canShowCallout = YES;

        UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        pinView.rightCalloutAccessoryView = rightButton;
    } else {
        pinView.annotation = annotation;
    }

// SET THE PIN COLOR REGARDLESS OF WHETHER A REUSABLE ANNOTATION WAS RETURNED OR NOT

        pinView.pinColor = MKPinAnnotationColorGreen;
        if([[annotation title] isEqualToString:@"MuRoom"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorRed;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Mike's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorRed;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Bill's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorPurple;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Steve's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorGreen;

            NSLog( @"data from ann index %@", annTile);
        }
        if([[annotation title] isEqualToString:@"Louisa's"])
        {
            // Do somethingMKAnnotation
            pinView.pinColor = MKPinAnnotationColorGreen;

            NSLog( @"data from ann index %@", annTile);
        } 
```

# c# - 居中gridview的一列

> ID：14106035
> 
> 赞同：0
> 
> 时间：2012-12-31T21:03:42.873
> 
> 标签：c#, css, gridview

在我的 C# Web 应用程序中，我有几个网格视图，它们使用 CSS 为它们提供相同的外观/感觉。在几个网格上，我需要一个列标题居中，而不是其余的。我尝试在设计器/HTML 中设置它们：

```
<HeaderStyle HorizontalAlign="Center" /> 
```

并在 dataBinding 和 DataBound 上使用：

```
GridViewRow gvr = this.GridView1.HeaderRow;
gvr.Cells[1].HorizontalAlign = HorizontalAlign.Center; 
```

在绑定和应用 CSS 后，如何最好地覆盖 CSS 或设置列的水平对齐方式？

# opengl - 错误 C2501：“WINGDIAPI”：缺少存储类或类型说明符

> ID：14106036
> 
> 赞同：1
> 
> 时间：2012-12-31T21:03:46.163
> 
> 标签：opengl

我正在尝试 Mipmap 纹理。Microsoft Visual Studio 6.0 给出以下错误。

```
error C2501: 'WINGDIAPI' : missing storage-class or type specifiers

WINGDIAPI void APIENTRY glAccum (GLenum op, GLfloat value);
WINGDIAPI void APIENTRY glAlphaFunc (GLenum func, GLclampf ref);
WINGDIAPI GLboolean APIENTRY glAreTexturesResident (GLsizei n, const GLuint *textures, GLboolean *residences);
WINGDIAPI void APIENTRY glArrayElement (GLint i); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:10:55.707

这是 Windows SDK 的 SNAFU。您必须在 Windows 平台上包含`windows.h`之前。`GL/gl.h`它通常是通过将`windows.h`包含放入预处理器中的`_WIN32`定义来完成的

```
#ifdef _WIN32
#include <windows.h>
#endif
#include <GL/gl.h> 
```

# javascript - 主干视图未正确更新

> ID：14106041
> 
> 赞同：0
> 
> 时间：2012-12-31T21:04:23.933
> 
> 标签：javascript, backbone.js

我想显示一个列表，一旦单击列表中的某个项目，我希望隐藏该列表，并检索并显示该项目的详细信息。

鼠标单击触发，从 REST Web 服务检索详细信息，并隐藏项目列表。问题是在我刷新页面之前不会出现项目详细信息。我不太明白我做错了什么。

这是我的代码示例：

```
<html>
<head>
    <title>Backbone Test</title>
    <script type="text/javascript" src="js/lib/jquery-1.7.1-min.js"></script>
    <script type="text/javascript" src="js/lib/underscore-min.js"></script>
    <script type="text/javascript" src="js/lib/backbone-min.js"></script>
</head>

<body>

<div>VIN Search List:</div>
<div id="item-list" />
<div id="item-details" />

<script type="text/javascript">
$(function() 
{
    var Item = Backbone.Model.extend({
        urlRoot: "rest/search",
        defaults: {
            "uid": ""
        }
    });    

    var Items = Backbone.Collection.extend({
        model: Item,
        url: "rest/search/", 
    });

    var ItemDetail = Backbone.Model.extend({
        urlRoot: "rest/search/details",
        defaults: {
            "uid": "",
            "details": ""
        },

        url : function() {
            return this.id ? this.urlRoot + '/' + this.id : this.urlRoot;
        } 
    });    

    var ListView = Backbone.View.extend(
    {
        tagName: "ol",

        initialize: function() 
        {
            _.bindAll(this, 'render');
            this.model.bind("destroy", this.close, this);
        },

        render: function() 
        {
            _.each(this.model.models, function(uid) {
                $(this.el).append( new ItemView({model:uid}).render().el );
            }, this);  
            return this;
        },

        close: function() 
        {
            $(this.el).unbind();
            $(this.el).remove();
        },
    });

    var ItemView = Backbone.View.extend(
    {
        tagName: "li",

        template: _.template("<%= uid %>"),

        events: { "click": "showDetails" },

        initialize: function() 
        {
            _.bindAll(this, 'render');
            this.model.bind("change", this.render, this);
            this.model.bind("destroy", this.close, this);
        },

        render: function(eventName) 
        {
            $(this.el).html( this.template( this.model.toJSON() ) );
            return this;
        },

        close: function() 
        {
            $(this.el).unbind();
            $(this.el).remove();
        },

        showDetails: function() 
        {
            app.navigate("details/" + this.model.get("uid"), {trigger: true});
            return false;
        },
    });

    var DetailsView = Backbone.View.extend(
    {
        tagName: "ul",

        template: _.template("<li><%= uid %></li><li><%= details %></li>"),

        initialize: function() 
        {
            _.bindAll(this, 'render');
            this.model.bind("change", this.render, this);
            this.model.bind("destroy", this.close, this);
        },

        render: function(eventName) 
        {
            $(this.el).html( this.template( this.model.toJSON() ) );
            return this;
        },

        close: function() 
        {
            $(this.el).unbind();
            $(this.el).remove();
        },
    });

    var AppRouter = Backbone.Router.extend({

        routes:
        {
            "": "list",
            "details/:uid": "Details"
        },

        list: function() 
        {
            var self = this;
            this.itemList = new Items();
            this.itemList.fetch(
            {
                success: function() 
                {
                    self.listView = new ListView({model: self.itemList});
                    $('#item-list').html( self.listView.render().el );
                }
            });
        },

        Details: function(uid) 
        {
            if (this.lListView) this.listView.close();

            var self = this;
            this.details = new ItemDetail({id: uid});
            this.details.fetch(
            {
                success: function() 
                {
                    self.detailsView = new DetailsView({model: self.details});
                    $('#item-details').html( self.detailsView.render().el );
                }
            });
        },

    });

    // Start up
    var app = new AppRouter();
    Backbone.history.start();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:28:09.903

如果我更改详细信息路由以修改#item-list 而不是#item-details，则一切正常。

~~我猜是因为 #item-list 是最初在默认路由中修改的元素，所以我不能修改位于它的层次结构之外的元素？我真的很想了解这种行为。~~

布拉格。看起来我只需要手动切换#item-details 元素的显示来强制渲染元素。我仍然不确定为什么默认路由的行为会有所不同，但这不是一个大问题。

```
 this.details.fetch(
        {
            success: function() 
            {
                self.detailsView = new DetailsView({model: self.details});
                $('#item-details').html( self.detailsView.render().el );
                $('#item-details').css( "display", "block" ); // FORCE DISPLAY
            }
        }); 
```

# c# - C# 中的可滚动 ODBC 游标

> ID：14106042
> 
> 赞同：2
> 
> 时间：2012-12-31T21:04:24.017
> 
> 标签：c#, .net, sql-server, cursor

我是一名 C++ 程序员，我不熟悉 .NET 数据库模型。我通常使用`IDataReader`( `OdbcDataReader`,`OledbDataReader`或`SqlDataReader`) 从数据库中读取数据。有时当我需要使用大量数据时`DataAdapter`，我应该怎么做才能实现 ODBC 等本机库中存在的可滚动游标的功能？

* * *

谢谢大家的回答，但是我处于无法接受的情况，当然这是我的错，没有完全解释我的问题。我将其解释为现在已删除的答案之一中的评论。

我必须编写一个程序来充当客户端程序和 MSSQL 之间的代理，对于这个库，我有以下要求：

*   我的程序应该兼容MSSQL2000
*   我不知道用户将发送的所有表和查询，我应该简单地向其中添加一些信息，制作日志，......然后针对 MSSQL 执行它，因此很难使用基于查询的有序字段或表的主键（我所有的作品都在一个数据库中，但该数据库很大，可能会随着时间而改变）。
*   客户端只需要一部分数据，大部分DBMS都支持`LIMIT OFFSET`，可惜`MSSQL`不支持，而且`ROW_NUMBER`不存在，`MSSQL2000`如果支持，那我又需要了解程序逻辑，需要解析SQL命令（其实我编写了一个解析库，`boost::spirit`但那是本机代码，除此之外，我还不能 100% 确定它的功能）。
*   我可能有多个客户端，但他们发送的大多数查询是少数预定义查询之一（当然用户仍然发送自定义查询，但它约占所有查询的 30%），所以我想我可以打开一些可滚动的游标和使用该游标和自定义缓存响应客户端。
*   服务器机器及其`MSSQL`将专用于我的程序，所以我真的想利用服务器和 DBMS 的所有功能来实现我的功能。

所以现在：

*   使用可滚动游标有什么问题，为什么我应该避免它们？
*   如何在 .NET 中使用可滚动游标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T23:11:52.890

在 SQL Server 中，您可以创建分页查询。您可以从应用程序轻松处理的页码。您不需要为此任务创建游标。

对于 SQL Server 2005 或更高版本

```
SELECT * FROM ( SELECT *, ROW_NUMBER() OVER (ORDER BY ID) AS ROW FROM TABLEA ) AS ALIAS 
WHERE ROW > 40 
AND ROW <= 49 
```

对于 SQL Server 2000

```
SELECT TOP 10 T.* FROM TABLA AS T WHERE T.ID NOT IN
    ( SELECT TOP 39 id from tabla order by id desc )
ORDER BY T.ID DESC 
```

PD：经过编辑以包括对 SQL Server 2000 的支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:29:18.650

当 Microsoft 设计 ADO.NET API 时，他们决定只公开 firehose 游标（`IDataReader`等）。这实际上可能会给您带来问题，也可能不会。您说您想要“可滚动光标的功能”，但这可能意味着各种各样的事情，而不仅仅是分页，并且每个特定的用例都可以通过多种方式处理。例如：

**要求：用户应该能够任意上下翻页结果集。**

*   一次只检索一页数据，例如使用`ROW_NUMBER()`函数。这比滚动光标更有效。

**要求：我有一个非常大的数据集，我只想一次处理一行以避免内存不足。**

*   使用 ADO.NET 提供的 firehose 游标。请注意，这仅在以下情况下才实用：（a）您在循环期间根本不需要访问数据库，或者（b）您在连接字符串中配置了[MARS 。](http://msdn.microsoft.com/en-us/library/cfa084cz%28v=vs.80%29.aspx)
*   通过将一组唯一标识符检索到数组中来模拟键集游标，然后遍历数组并一次读取一行数据。

**要求：我正在做一个复杂的计算，涉及在结果集中向前和向后移动。**

*   您应该能够重新编写算法以消除此要求。例如，读取一组行，处理它们，读取另一组行，处理它们等。

**更新（问题中提供了更多信息）**

您的业​​务需求要求过高。您必须处理假定存在可滚动游标的任意查询，但您不能提供可滚动游标，并且您不能重写客户端代码以不使用可滚动游标。这是一个不可能的位置。我建议您坚持现有的（C++ 和 ODBC），不要费心尝试在 .NET 中重新编写它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T08:16:20.080

在不支持分页的数据库上进行分页时，我通常`DataReader.Read()`会跳过所有不想使用的行。

如果您不想自己构建 SQL 分页查询，您可以随意使用我的分页类：[https ://github.com/jgauffin/Griffin.Data/blob/master/src/Griffin.Data/BasicLayer/Paging/ SqlServerPager.cs](https://github.com/jgauffin/Griffin.Data/blob/master/src/Griffin.Data/BasicLayer/Paging/SqlServerPager.cs)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T21:00:58.447

我认为游标不适用于您的特定情况。主要原因是你有3层。但是，让我们后退两步。

大多数 3 层应用程序都有一个无状态的中间层（您的 c++ 代码）。缓存很好，因为它实际上只是一种优化，不会在中间层创建任何真实状态。中间层通常有少量打开的数据库会话。因为打开 db 会话对处理器来说代价高昂，并且在打开 db 会话后，数据库服务器会保留一定数量的 RAM。当中间层收到请求时，会处理该请求并将其交给 SQL 数据库。一种算法可用于选择任何打开的会话，甚至可以随机完成。在此模型中，无法知道哪个会话将接收下一个请求。游标属于收到原始查询请求的会话。这样你就可以'

我描述的 3 层模型主要用于 Web 应用程序，因此它们可以扩展到数百或数千个客户端。如果 SQL 服务器永远无法打开那么多会话。Microsoft ADO.NET 已经有很多特性来支持我描述的那种架构，所以实现起来并不难。根据情况，即使在非 Web 应用程序中也使用相同的方法。您可能会跟踪您的会话，以便您可以为每个客户端打开一个会话，我首先要确保用例证明了这一点。知道打开的游标也会占用大量资源。

游标仍然在单个事务中占有一席之地，只是很难让它们保持打开状态，以便客户端应用程序可以获取/更新结果集中的值。

我建议您在查询事务中执行以下操作。将查询中主表的主键值存储在单独的表中。在单独的表中包括其他值，如 sessionid 和 rownumber。通过链接到原始查询中的新表来返回前几行。在随后的调用中，只需通过链接到您的新表来再次查询相应的行。您将需要一个等效的缓存机制来清除旧数据，并根据您的需要刷新结果集。

# iis - smtp;551 邮件主机在域的阻止列表中

> ID：14106052
> 
> 赞同：-1
> 
> 时间：2012-12-31T21:05:26.403
> 
> 标签：iis, iis-7, smtp

我们有一个网站托管在 Windows 2008 (SP2) 上，运行 iis 7.0

我们网站上的其中一个页面在提交后会向 info@mywebdomain.com 发送一封信息性电子邮件。电子邮件将发送到运行网站的同一台服务器上的 localhost smtp 服务器。这一直工作到 12 月 10 日，现在它总是失败。

据我所知，我似乎需要从 smtp 服务器的域阻止列表中删除 mywebdomain.com。但是，我无法弄清楚如何做到这一点。据我所知，在 iis 7.0 下运行的 smtp 服务器实际上是通过 iis 6.0 管理器配置的。我展开“本地计算机”，右键单击“SMTP 虚拟服务器#1”（列表中唯一的一个）并选择属性。我没有在任何选项卡中看到任何看起来可以用来解除阻止域的内容。

任何帮助将不胜感激！！！详情如下：

```
mywebdomain - substituted to keep this posting hopefully anonymous; but this domain is hosted on our server and is available on the internet

mwd3.mwd.local - again substituted for anonymity; but this is effectively localhost

From: postmaster@mwd3.mwd.local
To: webadmin@mywebdomain.com
Date: Mon, 10 Dec 2012 11:29:29 -0600
MIME-Version: 1.0
Content-Type: multipart/report; report-type=delivery-status;
    boundary="9B095B5ADSN=_01CDCE88DCFE2F9B00000001mwd3.mwd.local"
X-DSNContext: 7ce717b1 - 1196 - 00000002 - 00000000
Message-ID: <f69aZbLAX00000001@mwd3.mwd.local>
Subject: Delivery Status Notification (Failure)

This is a MIME-formatted message.  
Portions of this message may be unreadable without a MIME-capable mail program.

--9B095B5ADSN=_01CDCE88DCFE2F9B00000001mwd3.mwd.local
Content-Type: text/plain; charset=unicode-1-1-utf-7

This is an automatically generated Delivery Status Notification.

Delivery to the following recipients failed.

       info@mywebdomain.com

--9B095B5ADSN=_01CDCE88DCFE2F9B00000001mwd3.mwd.local
Content-Type: message/delivery-status

Reporting-MTA: dns;mwd3.mwd.local
Received-From-MTA: dns;mwd3.mwd.local
Arrival-Date: Mon, 10 Dec 2012 11:29:25 -0600

Final-Recipient: rfc822;info@mywebdomain.com
Action: failed
Status: 5.5.0
Diagnostic-Code: smtp;551 Mailhost is on domain's block list (Mode: normal)

--9B095B5ADSN=_01CDCE88DCFE2F9B00000001mwd3.mwd.local
Content-Type: message/rfc822

Received: from mwd3.mwd.local ([127.0.0.1]) by mwd3.mwd.local with Microsoft SMTPSVC(7.0.6002.18222);
     Mon, 10 Dec 2012 11:29:25 -0600
From: <webadmin@mywebdomain.com>
To: info@mywebdomain.com
Subject: Consumer Q & A
Date: Mon, 10 Dec 2012 11:29:25 -0600
Message-ID: <20121210-11292530-342c@mwd3.mwd.local>
MIME-Version: 1.0
Return-Path: webadmin@mywebdomain.com
X-OriginalArrivalTime: 10 Dec 2012 17:29:25.0305 (UTC) FILETIME=[E6549290:01CDD6FB]

The following information was submitted at 12/10/2012 11:29:25 AM from Consumer Q&A.

Body of the email 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:53:22.167

格雷格，

谢谢你的评论。我将其标记为在帖子中添加了一些有用的内容，因为它不是答案。

我花了一段时间才弄清楚如何获取 SMTP 成绩单。

对于阅读这篇文章的其他人，我是这样做的。适应你自己的情况。我能够停止/启动虚拟 SMTP 服务器，因为客户端给了我许可，因为它无论如何都没有完成设置的目的。

再次注意，即使在运行 IIS 7 时，IIS 6 也用于管理 SMTP 服务器。

1.  打开“Internet 信息服务 (IIS) 6.0 管理器”
2.  我在帮助菜单中找到了启用日志记录的说明：

    ```
    To enable logging that uses an ASCII text format
    ... Select the SMTP virtual server, and then click Properties on the Action menu. 

    On the General tab, select Enable logging. 

    In the Active log format drop-down menu, select a log format. 

    Click Properties, and then on the General tab, specify the New log schedule. 

    If you select Hourly, Daily, Weekly, or Monthly, a new log file is created at those intervals. 

    If you select Unlimited file size, only a single log file is created. 

    If you select When file size reaches, you can specify the maximum size of the log file and a new log file is created when the current log file reaches that size. 

    On the General tab, under Log file directory, specify the location where the log files will be stored. 

    If you have selected the World Wide Web Consortium (W3C) Extended Logging format, click the Advanced tab, and then select the extended logging options you want to track. 
    ```

3.  我将我的日志记录目标设置为一个新文件夹，以确保它不会与其他日志记录混淆。

4.  我打开了“高级”选项卡中的每个选项。然后我停止并启动了虚拟服务器。

5.  我使用其中一个无法正常工作的网站功能发送了一封电子邮件（请求信息）

6.  当我试图查看日志时，它说它正在使用中。所以我停止了虚拟 SMTP 服务器，复制了日志的内容，然后再次启动了虚拟 SMTP 服务器。

实际上，我发现客户端正在使用 mxlogic.net 进行垃圾邮件过滤。当垃圾邮件通过他们的服务时，他会定期与他们联系。我怀疑当他在 12 月 10 日联系他们时，他们阻止了他的地址，而不是冒犯性的垃圾邮件发送者。但这只是猜测。

他们承认他的 IP 地址在被封锁的 IP 范围内。他们在几分钟内修复了它，现在问题已经解决。

您可以在下面的脚本中看到第一个 OutboundConnectionResponse 正在启动与 mxlogic.net 服务器的对话。最后一行是关闭与 mxlogic.net 服务器的传输通道。在这之间你可以看到几条消息，“551+Mailhost+is+on+domain's+block+list”

```
 #Software: Microsoft Internet Information Services 7.0
    #Version: 1.0
    #Date: 2013-01-03 17:29:41
    #Fields: date time c-ip cs-username s-sitename s-computername s-ip s-port cs-method cs-uri-stem cs-uri-query sc-status sc-

    win32-status sc-bytes cs-bytes time-taken cs-version cs-host cs(User-Agent) cs(Cookie) cs(Referer) 
    2013-01-03 17:29:41 127.0.0.1 mwd3.mwd.local SMTPSVC1 MWD3 127.0.0.1 0 HELO -         +mwd3.mwd.local 250 0 38 19 0 SMTP - - - -
    2013-01-03 17:29:41 127.0.0.1 mwd3.mwd.local SMTPSVC1 MWD3 127.0.0.1 0 MAIL -         +FROM:+<webadmin@mywebdomain.com> 250 0 45 33 0 SMTP - - - -
    2013-01-03 17:29:41 127.0.0.1 mwd3.mwd.local SMTPSVC1 MWD3 127.0.0.1 0 RCPT -         +TO:+<info@mywebdomain.com> 250 0 29 27 0 SMTP - - - -
    2013-01-03 17:29:41 127.0.0.1 mwd3.mwd.local SMTPSVC1 MWD3 127.0.0.1 0 DATA - +<20130103-11294182-2d84@mwd3.mwd.local> 250 0 123 456 63 SMTP - - - -
    2013-01-03 17:29:41 127.0.0.1 mwd3.mwd.local SMTPSVC1 MWD3 127.0.0.1 0 QUIT - mwd3.mwd.local 240 78 63 4 0 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 220+p02c12m113.mxlogic.net+ESMTP+mxl_mta-6.16.0-0+[4d461940.13484498.00-2360];+Thu,+03+Jan+2013+10:29:41+-0700+(MST);+NO+UCE,+INBOUND 0 0 133 0 47 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 EHLO - mwd3.mwd.local 0 0 4 0 47 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250-p02c12m113.mxlogic.net 0 0 26 0 63 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 MAIL - FROM:<webadmin@mywebdomain.com> 0 0 4 0 63 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250+Sender+Ok 0 0 13 0 94 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 RCPT - TO:<info@mywebdomain.com> 0 0 4 0 94 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 551+Mailhost+is+on+domain's+block+list+(Mode:+normal) 0 0 53 0 188 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 RSET - - 0 0 4 0 188 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250+Reset+Ok 0 0 12 0 219 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 RSET - - 0 0 4 0 266 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250+Reset+Ok 0 0 12 0 297 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 MAIL - FROM:<> 0 0 4 0 297 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250+Sender+Ok 0 0 13 0 312 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 RCPT - TO:<webadmin@mywebdomain.com> 0 0 4 0 312 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 551+Mailhost+is+on+domain's+block+list+(Mode:+normal) 0 0 53 0 406 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 RSET - - 0 0 4 0 406 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 250+Reset+Ok 0 0 12 0 422 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionCommand SMTPSVC1 MWD3 - 25 QUIT - - 0 0 4 0 437 SMTP - - - -
    2013-01-03 17:29:41 208.65.145.12 OutboundConnectionResponse SMTPSVC1 MWD3 - 25 - - 221+p02c12m113.mxlogic.net+Service+closing+transmission+channel+[13484498.00] 0 0 77 0 453 SMTP - - - - 
```

# java - 宁静的网络服务日食

> ID：14106053
> 
> 赞同：-1
> 
> 时间：2012-12-31T21:06:02.500
> 
> 标签：java, html, eclipse, rest

我需要一些帮助。这不是大学作业。我通过eclipse ide在java命令行中编写了一个程序。然后我使用 windows builder 重写了程序，这是非常艰苦的工作。现在我想尝试使用 glassfish，带有 html 前端的宁静 Web 服务。我知道这听起来很多，但我正在将我的编程限制推到极致。

我想尝试的是只带一个字符串并在其末尾添加一个字母。然后将其返回到浏览器。让它通过html显示。有人可以帮忙吗？

基思

我试过的代码

```
 import javax.*;
    @Path("piggy")

    public class RESTPigLatin
    {
        @POST
        @Consumes("text/html")
        @Produces("text/html")

        public String getPigLatin(String w)
        {
            if (w != null && w.length() > 0)
                return w + wine;
            else
                return null;
        }
    } 
```

出现错误是因为所有 @ 命令都有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:35:13.777

如果您使用的是 Jersey，则不需要 Glassfish 或 Tomcat。Jersey 包括一个 HTTP 服务器。做这样的事情：

```
HttpServer server = HttpServerFactory.create("http://localhost:9998/");
server.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:07:45.993

如果您是初学者，请尝试 Netbeans IDE（与 Glassfish 一起使用就像魅力一样）。它比eclipse更好地支持restful webservices。然后你可以阅读自动生成的东西并分析它是如何做的。

它的缺点是你会做的更少，因为 Wisard 会为这样一个简单的事情做大部分工作。

# android - 图像在 Galaxy S3 上不可见

> ID：14106055
> 
> 赞同：1
> 
> 时间：2012-12-31T21:06:15.030
> 
> 标签：android, image, icons

我有以下问题 - 我的应用程序在我拥有的所有设备上运行良好，但我刚刚在 Galaxy S3 上尝试过，我很惊讶地看到，所有图像都......消失了。唯一仍然可见的图像是应用程序图标图像。在 S3 上，我已经从市场下载了该应用程序.. 并且如前所述 - 在其他设备上它按预期工作。图像在图像视图中以 xml 静态加载......没什么特别的......

知道什么会导致这种行为吗？

如果需要，这是市场上的应用 ID（不是应用广告！）：Com.rts.android.tictactoe3d

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:17:20.203

这是一个有线问题，在我将 S3 更新到最新固件后它就消失了。在此之前没有任何帮助，我曾尝试清理应用程序数据，卸载/重新安装，将应用程序更多地移至 SD 或返回手机 - 相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:53:53.680

事实证明，某些 Android 版本并不完全支持 GIF 图像格式，有关更多信息，您可以查看下面的帖子，非常感谢 Rich 解决了这个问题！

[图像无法在 Galaxy S3 上加载](https://stackoverflow.com/questions/15146250/images-not-loading-on-galaxy-s3)

# tinymce - Editor.isDirty() 坏了？

> ID：14106057
> 
> 赞同：5
> 
> 时间：2012-12-31T21:06:29.613
> 
> 标签：tinymce, javascript

Editor.isDirty() 似乎无法正常工作。在我们的应用程序中，我们检查 Editor.isDirty() 标志。当它评估为真时，我们需要采取一些行动。如果没有任何变化，我们不想浪费处理器时间来评估没有变化的数据。在我们的例子中，一旦内容更新一次，isDirty() 总是评估为真。即使什么都没有改变。

Editor.isDirty() 函数看起来很简单：

```
isDirty : function() {
  var self = this;
  return tinymce.trim(self.startContent) != tinymce.trim(self.getContent({format : 'raw', no_events : 1})) && !self.isNotDirty;
} 
```

关键似乎是 startContent 属性。这就是 TinyMCE 用来确定发生变化的方法。因此，我希望在编辑器上调用 save() 时更新此属性。查看代码显示这不会发生。事实上 startContent 不会在任何支持它在这里使用的地方重置。有没有其他人看到过这种行为，还是我错误地使用了 Editor 对象？

旁注：TinyMCE 版本 3.5.7。

# redirect - https://url.com 变成 https://12.34.56.67/ 不明原因

> ID：14106059
> 
> 赞同：1
> 
> 时间：2012-12-31T21:06:38.710
> 
> 标签：redirect, iis-7

在 IIS 7 上，我们的一位程序员正在对 URL 执行 Response.Redirect，它会在地址字段中返回已解析的 IP ADDRESS。

更新：这是在 response.redirect 之前发生的

1.  将标签硬编码为“https://url.com/whatever.aspx”
2.  显示带有该标签的页面
3.  请参阅“https://12.23.45.67/whatever.aspx”...其中 12.23.45.67 是“url.com”的正确 IP

这只发生在与 url.com（不同的应用程序）相同的服务器上，并且只发生在 url.com

“https://test-url.com/whatever.aspx”不会被改变。

怎么回事？

# rest - 保存基于 Dgrid JsonRest 的存储

> ID：14106062
> 
> 赞同：1
> 
> 时间：2012-12-31T21:06:48.820
> 
> 标签：rest, dojo, store, dgrid

我有一个具有可编辑日期字段的 dgrid。在它上方，我有一个“保存”按钮，它调用`grid.save`. 当我点击按钮时，它会向商店的目标发出 XHR 请求，但不会向服务器提供任何数据供我保存（即 POST 为空）。现在查询项目 id 1900 是硬连线的，如下面的代码所示。

以下是商店的启动方式：

```
 var store = new JsonRest({
    target: "/safari/resources/1900/calendarObjects/",
    sortParam: "sort",
    idProperty: "id",
    properties: {
        startDate:{
            format: "date-time"
        },
        endDate:{
            format: "date-time"
        }
    }
  }); 
```

这是网格：

```
 var grid = new declare([OnDemandGrid, dgridEditor, Keyboard, Selection, DijitRegistry])({
            store: store,
            query: {responseType: "json" },
            bufferRows: 40,
            loadingMessage: "Loading...",
            columns: [
                {field: "oid", label: "Object ID"},
                dgridEditor({field: "startDate", name: "Start Date", editorArgs: { selector: 'date', datePattern: 'yyyy-MM-dd', locale: 'en-us' }}, DateTextBox),
                dgridEditor({field: "startTime", name: "Start Time"}, TimeTextBox, "click"),
                dgridEditor({field: "endDate", name: "End Date"}, DateTextBox, "click"),
                dgridEditor({field: "endTime", name: "End Time"}, TimeTextBox, "click"),
                {field: "endDateOid", label: "End OID"}
            ],
        }, "grid"); 
```

保存按钮如下所示：

```
registry.byId("saveButton").on("click", function (){
    grid.save();    
 }); 
```

就像我说的，在我点击“保存”后，会触发一个新的 XHR 请求，但如果它正在将任何数据发送回服务器，我不确定它的去向。我让我的后端打印了它收到的所有 HTTP 标头，但什么也没看到。

**更新（2013 年 1 月 2 日）：**升级服务器后端以使用传统的 RESTful URL，这似乎让 Dojo 稍微更快乐，但它仍然在使用`GET`而不是`PUT`实际发送任何内容以保存。

**更新（2013 年 1 月 5 日）：** JsonRest 有什么理由会在调用 PUT 之前调用 GET 吗？我想知道我的程序是否需要在程序愿意执行 PUT 之前返回某些数据（因此问题不在于 GET 而是接下来发生的任何事情）......但是，这完全是猜测。我已经走到了死胡同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T09:55:48.443

我不确定这是否可行，您可以查看[https://github.com/SitePen/dgrid/blob/master/test/JsonRest.html](https://github.com/SitePen/dgrid/blob/master/test/JsonRest.html)

```
 window.grid = new (declare([Grid, Selection, Keyboard]))({
                    store: testStore,
                    getBeforePut: false,
                    columns: columns
                }, "grid"); 
```

您可以尝试将属性设置`getBeforePut`为`false`.

# javascript - javascript下拉菜单干扰的褪色图片

> ID：14106065
> 
> 赞同：0
> 
> 时间：2012-12-31T21:06:53.577
> 
> 标签：javascript, html, css, drop-down-menu, slideshow

我有一个 javascript 下拉菜单，它会覆盖 javascript 图片幻灯片。它们都运行良好，除非我在一张图片淡出时翻转菜单。发生这种情况时，javascript 菜单（与图片重叠）也会再次淡出/淡入。我该如何解决这个问题？谢谢！代码如下。

褪色图片html：

```
<div id = "slide_wrapper">
        <img id = "slider" src = "">
        </img>
    </div> 
```

褪色图片javascript：

```
$(document).ready(function()
{
var images = new Array ("images/CampCeliac360Degree.jpg", "images/array_pool.jpg",     "images/array_2.jpg", "images/array_3.jpg", "images/array_4.jpg");
$("#slider").attr('src', images[0])
var currimg = 1;
setInterval(function(){
        $("#slider").fadeOut('medium', (function(){
            $("#slider").attr('src', images[currimg]).stop(true,true).hide().fadeIn('slow'); 
            if(currimg < images.length - 1){
                currimg++;
            }else{
                currimg = 0;
            }       
        })
        );

},5000); 
```

下拉菜单html：

```
<!-- creating menu -->
    <div id = "nav_div">
        <ul id="navigation">
            <li id="home">
                <a href="#" class="nav_style" id="home_a">Home</a>
            </li>
            <li id="sign_ups">
                <a href="#" class="nav_style" id="sign_ups_a">Sign-ups</a>
                <ul class="sub_nav_style" id="sign_ups_sub">
                    <li>
                        <a href="#">Camper Sign-up</a>
                    </li>
                    <li>
                        <a href="#">Junior Counselor Sign-up</a>
                    </li>
                    <li>
                        <a href="#">Counselor Sign-up</a>
                    </li>
                </ul>
            </li>
            <li id="info">
                <a href="#" class="nav_style" id="info_a" name="info_a">Information</a>
                <ul class="sub_nav_style" id="info_sub">
                    <li>
                        <a href="#">Facts You Need</a>
                    </li>
                    <li>
                        <a href="#">Contact Information</a>
                    </li>
                    <li>
                        <a href="#">Vendor Information</a>
                    </li>
                </ul>
            </li>
            <li id="about_camp">
                <a href="#" class="nav_style" id="about_camp_a" name="about_camp_a">About Camp</a>
                <ul class="sub_nav_style" id="about_camp_sub">
                    <li>
                        <a href="#">What People Say</a>
                    </li>
                    <li>
                        <a href="#">Sample Menu</a>
                    </li>
                    <li>
                        <a href="#">Photos</a>
                    </li>
                </ul>
            </li>
            <li id="donate">
                <a href="#" class="nav_style" id = "donate_a">Make a Donation</a>
            </li>
        </ul>
    </div> 
```

下拉菜单javascript：

```
// JavaScript Document
$(document).ready(function()
{
// main rolls
$("#sign_ups_a").hover(function(){
    $(this).toggleClass("nav_style_roll");
});
$("#home_a").hover(function(){
    $(this).toggleClass("nav_style_roll");
});
$("#info_a").hover(function(){
    $(this).toggleClass("nav_style_roll");
});
$("#about_camp_a").hover(function(){
    $(this).toggleClass("nav_style_roll");
});
$("#donate_a").hover(function(){
    $(this).toggleClass("nav_style_roll");
});
//sub rolls sign ups
$("ul#navigation li#sign_ups ul li:eq(0) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#sign_ups_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#sign_ups ul li:eq(1) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#sign_ups_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#sign_ups ul li:eq(2) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#sign_ups_a").toggleClass("nav_style_roll_off");
});
// sup rolls info
$("ul#navigation li#info ul li:eq(0) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#info_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#info ul li:eq(1) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#info_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#info ul li:eq(2) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#info_a").toggleClass("nav_style_roll_off");
});
//sub rolls about_camp
$("ul#navigation li#about_camp ul li:eq(0) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#about_camp_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#about_camp ul li:eq(1) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#about_camp_a").toggleClass("nav_style_roll_off");
});
$("ul#navigation li#about_camp ul li:eq(2) a").hover(function(){
    $(this).toggleClass("sub_nav_style_bround_roll");
    $("#about_camp_a").toggleClass("nav_style_roll_off");
});
//slide toggles
$("#sign_ups").hover(function(){
        if(playing == 1){
            playing = 0;
        }else{
            playing = 1;
        }
        $("#sign_ups_sub").slideToggle('fast');
    });
    $("#info").hover(function(){
        if(playing == 1){
            playing = 0;
        }else{
            playing = 1;
        }
        $("#info_sub").slideToggle('fast');

    });
    $("#about_camp").hover(function(){
        if(playing == 1){
            playing = 0;
        }else{
            playing = 1;
        }
        $("#about_camp_sub").slideToggle('fast');
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:34:13.480

我认为停止功能与您的悬停菜单动画冲突。我很确定停止功能会影响页面上的所有动画。你能告诉我们这样做的目的吗？

这是我指的代码：

```
$("#slider").attr('src', images[currimg]).stop(true,true).hide().fadeIn('slow'); 
```

至于解决问题，为了检测特定动画是否正在运行，您可以创建一个变量来检测这种事情。就像是：

```
var anim;

    setInterval(function(){
    anim = 1;
    $("#slider").attr('src', images[currimg]).hide().fadeIn('slow', function(){
    anim = 0;
         });
    }); 
```

Javascript 是我的一个薄弱领域，所以这个解决方案对你来说可能很明显，但我希望它有所帮助。祝你好运！

# jquery - Livesearch - javascript 可点击行

> ID：14106066
> 
> 赞同：1
> 
> 时间：2012-12-31T21:07:03.683
> 
> 标签：jquery

我仍在研究我的实时搜索功能。它完美地填充，但现在我想添加可点击的行功能，它本身可以工作，但当我将它与其他代码集成时就不行了。

[http://www.fpmnky.com/](http://www.fpmnky.com/) 这是没有可点击的代码

[http://www.fpmnky.com/index2.php](http://www.fpmnky.com/index2.php) 在我为可点击的行添加额外代码后，实时搜索不起作用。这是与下面的代码：

```
 <script type="text/javascript" src="js/jquery-1.3.2.js"></script>
  <script type="text/javascript" src="js/jquery.watermark.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript">

  $(document).ready(function() {

  $("#airport").watermark("");

  $("#airport").keyup(function()
  {
  var airport = $(this).val();
  var dataString = 'keyword='+ airport;
  if(airport.length>1)

  {
  $.ajax({
  type: "GET",
  url: "ajax-search.php",
  data: dataString,
  beforeSend:  function() {

  $('input#airport').addClass('loading');

  },
  success: function(server_response)
  {

  $('#searchresultdata').html(server_response).show();
  $('span#faq_category_title').html(airport);

  if ($('input#airport').hasClass("loading")) {
   $("input#airport").removeClass("loading");
    } 

  }
  });
  }return false;
  });
  });

  jQuery( function($) {
$('tr[href]').addClass('clickable').click( function() {
    window.location = $(this).attr('href');
}).find('a').hover( function() {
    $(this).parents('tr').unbind('click');
}, function() {
    $(this).parents('tr').click( function() {
        window.location = $(this).attr('href');
    });
});

$('tr[href]').css( 'cursor', 'pointer' );    
$('tr[href]').hover(function() {
$(this).css('cursor','pointer');
});
  }); 

  </script> 
```

我猜这是一个格式问题，我还是 javascript/jQuery 的新手，所以请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:29:55.080

第 50 行有错误。

```
$("#airport").watermark(""); 
```

这个水印功能似乎会引起问题。使用 Firefox 并按 strg+shift+k 查看错误。在第一页上，您没有此错误消息。由于这个问题，我认为并不是所有的 JS 都被执行，我认为这是你的问题。

# google-chrome - 如何使用自动热键退出程序？

> ID：14106067
> 
> 赞同：4
> 
> 时间：2012-12-31T21:07:17.817
> 
> 标签：google-chrome, batch-file, autohotkey

我正在使用 autohotkey 来执行一些自动化过程。

我需要有关关闭 chrome.exe 的帮助

**我试过了**

```
 Process, Close,  chrome.exe
;    or
        Run taskkill /im chrome.exe 
```

但是当我再次启动它时，它给了我 chrome crashed 错误。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T21:22:51.240

用于`WinClose`向窗口发送关闭消息，而不是终止进程：

```
SetTitleMatchMode 2
WinClose Google Chrome 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T23:31:25.060

*如果单个*Chrome 窗口（通常包含多个*选项卡*）打开，[mihai 的有用答案](https://stackoverflow.com/a/14106157/45375)效果很好。

但是，**如果要关闭*所有*打开的 Chrome 窗口**，则需要做更多工作：

```
; Get all hWnds (window IDs) created by chrome.exe processes.
WinGet hWnds, List, ahk_exe chrome.exe

; Loop over all hWnds and close them.
Loop, %hWnds%
{
  hWnd := % hWnds%A_Index% ; get next hWnd
  WinClose, ahk_id %hWnd%
} 
```

另请注意，[`WinClose`文档](https://autohotkey.com/docs/commands/WinClose.htm)调用 using`WinClose`对`WM_CLOSE`消息“有些强制”的使用，并建议以下`PostMessage`替代方法，它模仿用户按下`Alt-F4`或使用 Window 菜单`Close`项的操作：

```
; Get all hWnds (window IDs) created by chrome.exe processes.
WinGet hWnds, List, ahk_exe chrome.exe

; Loop over all hWnds and close them.
Loop, %hWnds%
{
  hWnd := % hWnds%A_Index% ; get next hWnd
  PostMessage, 0x112, 0xF060,,, ahk_id %hWnd%
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-04T23:53:29.320

这是“软关闭”特定流程的功能：

```
CloseAllInstances( exename )
{
    WinGet LhWnd, List, % "ahk_exe " exename
    Loop, %LhWnd%
        PostMessage, 0x112, 0xF060,,, % "ahk_id " LhWnd%A_Index%
} 
```

因此，您只需调用以下行即可关闭所有 chrome 实例：

```
CloseAllInstances( "chrome.exe" ) 
```

# html - html 5 内容组元素

> ID：14106070
> 
> 赞同：1
> 
> 时间：2012-12-31T21:08:06.187
> 
> 标签：html

传统上，我会为此使用 div，但我想我会询问是否有更合适的元素。

我有一个完全实现的表，但 tbody 是空的。在表格之后，我有一个脚本元素（文本/javascript 类型），其中包含要放入表格的元素，并且我正在使用 jsrender 从 javascript 中的元素创建 tbody 中的元素。

据我所知，将 script 元素放在表中是不合适的，除了可能在 td 或 th 元素之一中，但这对我来说听起来有点恶心。

我可以让脚本标签出现在没有容器的表格之后，然后通过表格的下一个兄弟姐妹找到它，但这对我来说似乎很脆弱。我宁愿有一个容器。正如我所提到的，一个 div 可以工作，但认为 html5 中可能有一些东西可以专门解决这种类型的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:12:26.567

脚本的容器是`<script>`. 任何额外包含的内容都可以，但不会真正为页面添加任何语义值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T11:04:54.977

是的，如果您需要一个容器，请使用[`div`element](http://www.w3.org/TR/html5/grouping-content.html#the-div-element)。它“根本没有特殊含义”，因此以下两个片段在语义上是相同的：

```
<table><!-- … --></table>
<script></script>

<div>
  <table><!-- … --></table>
  <script></script>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T21:10:36.167

`<section></section>`是我将用于这种特殊情况的。但这是语义/个人偏好的问题。通过在此处使用新标签，您不会获得太多收益。

# asp.net-mvc - 如何在 DotNetNuke 7 和非 DotNetNuke 7 站点之间共享 ASP.NET 授权 cookie？

> ID：14106073
> 
> 赞同：3
> 
> 时间：2012-12-31T21:08:23.503
> 
> 标签：asp.net-mvc, iis, forms-authentication, dotnetnuke, machinekey

我们正在构建一个 ASP.NET MVC 4 网站，该网站将显示特定于 DotNetNuke 登录用户的信息。为了实现这一点，我们将 web.config 中的机器密钥设置为完全相同，并且我们还将`<authentication>`配置部分设置为跨网站匹配，以便查看从 MVC 站点登录的 DotNetNuke 用户.

有很多例子可以说明如何做到这一点。这是我们使用的指南：http: [//msdn.microsoft.com/en-us/library/eb0zx8fc.aspx](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)

但是，这仅在我们在两个 DotNetNuke 站点或两个非 DotNetNuke 站点之间设置信任时才有效。如果在 DotNetNuke 中设置了 ASP.NET auth-cookie，我们将无法在 MVC 站点中访问它。登录 DotNetNuke 站点，然后浏览到 MVC 站点后，HttpContext.Current.User.Identity.Name 为空。

这两个站点设置在同一台服务器上，每个站点都在不同的端口下运行。IIS 8 中都启用了匿名和表单身份验证，因为它在 Windows Server 2012 上运行。

以下是在两个站点之间设置的 web.config 值：

机器键值： `<machineKey decryption="3DES" decryptionKey="C7DE3391E9E25BC1106BA55B1A86EB825A66A06A2AA720CF" validation="SHA1" validationKey="F41C305583E22214850AD9B2B989588F5045EE2A99EFF68849B81EF154CFF745230F12D4BCFEBB0214BB24F8A6EDB34A9B45BB0849F6CB60E5D23528A69DBBC6" />`

认证部分： `<authentication mode="Forms"> <forms timeout="60" cookieless="UseCookies" ticketCompatibilityMode="Framework40" /> </authentication>`

任何见解将不胜感激。

谢谢！

# c# - 调用 IEnumerable ToList() 在运行时

> ID：14106077
> 
> 赞同：0
> 
> 时间：2012-12-31T21:09:27.740
> 
> 标签：c#, .net, generics

我有一个`IEnumerable<Person>`例子。

我希望能够`List<Person>`在运行时完成

我有以下代码，但错误提示我无法转换系统运行时类型

有什么我想念的吗？

```
private static readonly MethodInfo enumerableToListMethod = typeof(Enumerable).GetMethod("ToList", BindingFlags.Public | BindingFlags.Static);

//genericType will be Person
var genericType = modelType.GetGenericArguments().First();

var genericToListMethod = enumerableToListMethod.MakeGenericMethod(new[] { genericType });

//modelType is IEnumerable<Person>
var ienumtype = genericToListMethod.Invoke(null, new object[] { modelType });

Activator.CreateInstance(ienumtype.GetType()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:14:44.883

您必须将 IEnumerable 传递给调用，而不是可枚举的类型 - 此外，调用调用将返回列表，而不是类型。

输入代码：

```
var instance = < the IEnumerable >;
var modelType = instance.GetType();

//modelType is IEnumerable<Person>
var enumerableAsList = genericToListMethod.Invoke(null, new object[] { instance}); 
```

根据您的评论，我猜您正在追求类似这样的东西：

```
Func<IEnumerable<T>, List<T>> MakeMeAToListerForEnumerablesOfType<T>()
{
    var itemType = typeof(T);
    var enumerableToListMethod = typeof(Enumerable).GetMethod("ToList", BindingFlags.Public | BindingFlags.Static);
    var genericToListMethod = enumerableToListMethod.MakeGenericMethod(new[] { itemType });
    return (Func<IEnumerable<T>, List<T>>)Delegate.CreateDelegate(typeof(Func<IEnumerable<T>, List<T>>), genericToListMethod);
} 
```

你会这样称呼：

```
IEnumerable<string> enumerable = new string[] { "a", "b", "c" };
var toLister = MakeMeAToListerForEnumerablesOfType<string>(); 
```

德普。错过了电话...

```
var enumerableAsList = toLister(enumerable); 
```

# compilation - 如何反编译 AutoHotkey 文件

> ID：14106081
> 
> 赞同：1
> 
> 时间：2012-12-31T21:09:52.843
> 
> 标签：compilation, autohotkey

我早些时候发布了这个并且错误地假设这仍然是 AutoHotkey 的特定论坛，我为此道歉。

我有一个需要更新的已编译 AutoHotkey 文件，不幸的是，我在硬盘崩溃中丢失了原始 .ahk 文件。我认为可以使用该程序取消编译它，但不知道如何，因为这还没有出现。我能得到的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:51:57.257

使用文本编辑器打开您的 autohotkey.exe 文件。代码在那里。

# sql - 查询交叉引用表和计数匹配？

> ID：14106084
> 
> 赞同：0
> 
> 时间：2012-12-31T21:10:42.370
> 
> 标签：sql, ms-access, ms-access-2010

我有一个这样的查询：

```
SELECT a.title,
       a.spec,
       a.name,
       l.User AS CreatedBy,
       DateAdd ( "s", l.time, #03/01/1980# ) AS CreatedAt
FROM 
    (Reports AS a
      INNER JOIN
        AuditLog AS l ON a.id = l.id)
      INNER JOIN
        (SELECT min([time]) AS Mintime,
         id FROM AuditLog GROUP BY id)
        AS t ON (l.time = t.mintime)
      AND (l.id = t.id)
WHERE (((a.ACTIVE)='Y')); 
```

该表`Reports`有 15000 条记录，AuditLog 有 25800 条。但是这个查询只返回 7800 个结果，我想还会有更多（创建报告时会生成审计，因此假设每个报告都有匹配的审计）。

我可以进行哪些新查询来研究缺失的内容，例如记录计数等？我确实尝试复制此查询并使用 OUTER JOIN，但它给了我“JOIN 操作中的语法错误”。大多数都是活动的，因此删除 WHERE 子句不是原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:10:55.837

“*我可以提出哪些新的查询来研究缺失的内容，例如记录计数等？* ”

您期望查询结果集中有多少行`Reports`？如果每个 unique 应该是一行`Reports.id`，请首先检查您从该查询中获得的信息：

```
SELECT r.id, Count(*) AS num_matches
FROM [Reports] AS r
WHERE r.ACTIVE='Y'
GROUP BY r.id; 
```

单独检查子查询结果集也可能会有所帮助。

```
SELECT id, Min([time]) AS Mintime, Count(*) AS num_rows
FROM AuditLog
GROUP BY id; 
```

除了这些建议之外，我在试图从 SQL 中推断出您的预期目标时迷失了方向。但是，我想警告您，如果您切换到`LEFT JOIN`而不是`INNER JOIN`.

```
DateAdd("s", l.time, #03/01/1980#) AS CreatedAt 
```

使用 a `LEFT JOIN`，您可能会有带有 Null 的行`l.time`。以下表达式抛出“无效使用 Null”。

```
DateAdd("s", Null, #03/01/1980#) 
```

如果您遇到该问题，请将`DateAdd`表达式移动到子查询中，以确保它仅提供非 Null 值。或者在表达式`DateAdd`内部使用`IIf()`以保护它免受 Nulls 的影响。

```
IIf([time] Is Null, Null, DateAdd("s", [time], #03/01/1980#)) AS CreatedAt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:32:24.573

这是一个使用`Left Join`. 这将显示报告中的所有记录，无论 AuditLog 表中是否存在匹配项。

```
Select
  a.title, 
  a.spec, 
  a.name, 
  l.User AS CreatedBy, 
  IIf(IsNull(l.Time), Null, DateAdd ( "s", l.time, #03/01/1980# )) AS CreatedAt
From (
  Reports As a 
    Left Join
  AuditLog AS l 
    On a.id = l.id
  ) Left Join (
    Select
      Min([time]) AS Mintime, 
      id
    From 
      AuditLog 
    Group By
      id
  )  AS t ON (l.id = t.id) AND (l.time = t.mintime)
Where
  a.Active = 'Y'; 
```

这是我的测试数据库的数据库文档功能的摘录：

```
Table: AuditLog                                             

     Name      Type          Size
     ID        Long Integer  4
     Time      Long Integer  4
     User      Text          255

Table: Reports

     Name      Type          Size
     ID        Long Integer  4
     Title     Text          255
     Spec      Text          255
     Name      Text          255
     Active    Text          255

Query: Test

SQL

     SELECT a.title, a.spec, a.name, l.User AS CreatedBy, DateAdd ( "s", l.time,
     #03/01/1980# ) AS CreatedAt
     FROM (Reports AS a LEFT JOIN AuditLog AS l ON a.id = l.id) LEFT JOIN (SELECT
      Min([time]) AS Mintime, id FROM AuditLog GROUP BY id)  AS t ON (l.id = t.id)
     AND (l.time = t.mintime)
     WHERE a.Active = 'Y'

Columns

     Name      Type          Size
     title     Text          255
     spec      Text          255
     name      Text          255
     CreatedBy Text          255
     CreatedAt Date/Time     8 
```

我注意到 Access 在其中添加了更多括号。此外，文档记录器由于某种原因错过了 where 子句。它在查询定义中。

# java - 将 SSO 添加到/而不是 SSL

> ID：14106087
> 
> 赞同：0
> 
> 时间：2012-12-31T21:11:08.027
> 
> 标签：java, ssl, single-sign-on, kerberos, pkcs#11

我有一个受 SSL 保护的系统 - 客户端使用智能卡来访问他们的证书。我使用java的pkcs11。

我在这里发布了这个问题（即使有赏金）： [pkcs11 sso（使用以前的 Windows 登录和智能卡）](https://stackoverflow.com/questions/13873666/pkcs11-sso-using-prior-windows-login-with-smartcard)

相同的智能卡用于 Windows 登录 - 我想为客户端节省使用智能卡 (PIN) 重新登录的麻烦。

我读过很多关于这个问题的链接，让我进入了 SSO 的世界：NTLM、Kerberose 等。

我觉得 SSO 对我想要实现的目标来说有点过分了——而且从外观上看——至少 kerberose 要求我创建一个 KDC 服务器和其他新组件，这将延长我的开发时间。

所以 - 关于 SSO 的一些介绍性问题我找不到答案：

1.  它会真正解决我提出的问题吗？（智能卡包含由 CA 签名的“经典”证书）。

2.  我想要一个最小的解决方案（就组件而言） - 这是最好的实现？NTLM，Kerberose？我可能不得不使用像 WAFFLE 这样的 jna 包装器，对吧？顺便说一句，我将使用 WINDOWS 作为操作系统。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:12:31.317

唯一的方法是设置一个 Windows Active Directory（一个 KDC impl）以使用 Kerberos 的 SSO 的全部功能。没有其他选择。不要使用 NTLM，它有很多缺点。华夫饼有它的缺点。由于其性质不同，它没有集成到 JGSS 中，因此无法在 Java 中全面使用。如果您想避免 Windows 服务器的许可费用，您可以尝试 Samba 4，它是 AD 的 OSS 替代品。

从 Windows 客户端到基于 Unix 的服务器，我多年来一直在公司环境中这样做。

# perl - 修复 Perl 调试器

> ID：14106093
> 
> 赞同：3
> 
> 时间：2012-12-31T21:12:24.130
> 
> 标签：perl, debugging

我最近一直在研究各种 Perl IDE（[EPIC](http://www.epic-ide.org/)、[Komodo](https://en.wikipedia.org/wiki/Komodo_IDE)等），其中大多数都需要安装 CPAN 模块。很公平，但是所有的安装似乎都破坏了库存调试器（就价格而言，这很不错）。所以现在，当我进入调试器（`perl -d -e 0`）时，我得到了错误，并且“重新启动”似乎给出了更多错误。

如何修复安装？

我正在使用[ActiveState](https://en.wikipedia.org/wiki/ActiveState) Perl，版本 5.10.0。

```
> perl -d -e 0

Loading DB routines from perl5db.pl version 1.3
Editor support available.

Enter h or `h h' for help, or `perldoc perldebug' for more help.

main::(-e:1):   0

SetConsoleMode failed, LastError=|6| at C:/Perl/lib/Term/ReadKey.pm line 265.
 at C:/Perl/site/lib/Term/ReadLine/readline.pm line 1581
        readline::readline('  DB<1> ') called at C:/Perl/site/lib/Term/ReadLine/
Perl.pm line 11
        Term::ReadLine::Perl::readline('Term::ReadLine::Perl=ARRAY(0x1a9c26c)',
'  DB<1> ') called at C:/Perl/lib/perl5db.pl line 6414
        DB::readline('  DB<1> ') called at C:/Perl/lib/perl5db.pl line 2227
        DB::DB called at -e line 1
  DB<1> R
Warning: some settings and command-line options may be lost!
Your vendor has not defined POSIX macro _SC_OPEN_MAX, used at C:/Perl/lib/perl5d
b.pl line 3320
 at C:/Perl/lib/POSIX.pm line 56
        POSIX::AUTOLOAD() called at C:/Perl/lib/perl5db.pl line 3320
        DB::DB called at -e line 1
Debugged program terminated.  Use q to quit or R to restart,
  use o inhibit_exit to avoid stopping after program termination,
  h q, h R or h o to get additional info.

  DB<1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:30:12.460

我不了解 Komodo，但我确实记得读过一些关于 Perl 调试器在[Epic/Eclipse IDE](http://www.epic-ide.org/faq.php#debug)上遇到问题的信息？

EPIC 文档中没有任何内容说明您必须安装特定模块才能使 EPIC 工作。如果您必须为 Komodo 安装一个模块，我会感到惊讶，因为它是 ActiveState 自己的 IDE。

您可以将 CPAN 与 ActivePerl 一起使用。但是，您将需要安装`nmake`CPAN 或`dmake`C 编译器，具体取决于模块。它记录[在这里](http://docs.activestate.com/activeperl/5.16/faq/ActivePerl-faq2.html#CPAN_shell)。然而，ActiveState 建议您使用 PPM 实用程序，因为它已经为您编译了所有内容。

你也可以试试 Strawberry Perl 而不是 Active State。Strawberry Perl 已经包含了整个 MinGW 环境，因此保证 100% 兼容 Unix 版本和所有 CPAN 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:30:42.557

我知道可以在两个地方激活非标准 Perl 调试库。

检查您的环境。您可能设置了 PERLDB_OPTS。将此设置为“null”将（暂时）禁用它们并恢复标准的 Perl 调试器。

检查您的注册表。您可能在某处设置了 PERL5DB 键。HKEY_LOCAL_MACHINE\SOFTWARE\Perl 是典型的，特别是如果您正在测试的调试器之一是旧的 ActiveState PDK 图形调试器。

可能需要更改两者才能永久切换回本机调试器。

我可以确认[David W. 的声明](https://stackoverflow.com/questions/14106093/repair-perl-debugger/14107274#14107274)，即 Komodo IDE 不会要求您从 CPAN（或从 PPM 安装任何东西）。

# ruby-on-rails - 根据兴趣向用户推荐产品的最佳方式？

> ID：14106095
> 
> 赞同：0
> 
> 时间：2012-12-31T21:12:46.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, recommendation-engine

假设每个产品都有一个类别。我想要求用户选择用户感兴趣的几个类别，并找到具有相同类别的产品。这类似于 Quora、Stumbleupon 和 Pinterest 所做的一切。

在 Rails 中设置此数据库结构的最佳方法是什么？我应该创建 3 个表：用户、产品和类别，并建立关系用户有很多类别和产品有很多类别吗？

我看到的问题是它不是为每一行用户和产品创建而不是引用类别的新实例吗？

*额外：如果我想要子类别怎么办？例如，如果用户选择了技术，它可能会进一步要求在 Web 开发、移动开发、硬件等之间进行选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:21:46.467

你可以很容易地做那种“推荐”。

像这样的东西应该可以工作（注意：我没有测试这段代码，但它在精神上是正确的）：

```
def recommended_products
  joins(:categories, :products).where("product_id not in (?)", self.products)
end 
```

每个位的解释：

`joins(:categories, :products)`：这会执行用户、产品和类别的 SQL 连接。这为您提供了一个“表格”，其中每个用户-产品-类别组合都在其自己的行中。

`.where("product_id not in (?)", self.products)`：添加SQL where 子句，过滤掉当前用户产品列表中所有有产品的行。

关联不是问题。它们不会自己创建任何新实例，只有当您编写自己创建新实例的代码时。

至于子类别，我认为您最好将其作为自己的问题，因为它本身很容易成为一个完整的帖子。

# asp.net-mvc - 来自不同目录的 Html.RenderAction

> ID：14106096
> 
> 赞同：0
> 
> 时间：2012-12-31T21:12:54.773
> 
> 标签：asp.net-mvc, renderaction

我是 Asp.Net Mvc 的新手。这是我的解决方案层次结构

```
PROJECT
    --Area 
        -- Account
            --Controllers
            --Models
            --Views
                -- Edit.cshtml
    -- Contollers (this has an action method "SomeAction")
    --Models
    -- Views
         --Shared
           --Partial.cshtml 
```

实际上我想在 Edit.cshtml 视图中呈现 Parial.cshtml。所以我尝试了

```
@{Html.RenderAction("ControllerName", "SomeAction");} 
```

但我得到了以下错误。

> 找不到路径“/Account/Edit”的控制器或未实现 IController。

不知道我错过了什么？

*如果我从我的视图中删除 @{Html.RenderAction("ControllerName", "SomeAction");} 。它工作正常*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:58:33.173

您应该将区域名称传递给`RenderAction`方法：

```
@{Html.RenderAction("ControllerName", "SomeAction", new{area=""});} 
```

# objective-c - 将“ff0000”之类的字符串转换为目标c中的十六进制数

> ID：14106099
> 
> 赞同：4
> 
> 时间：2012-12-31T21:13:04.450
> 
> 标签：objective-c, parsing, color-picker, hex, color-codes

我需要将来自 UI 的字符串输入转换为目标 c 中的十六进制数。该字符串是一个 HTML 颜色代码，如 "ff0000"（'#' 将以图表方式处理），它应该被转换为数字 ff0000 以提供颜色选择。或者，目标 c 中是否有颜色选择器？在 xib 对象中找不到一个。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T21:39:57.863

从[Objective C解析十六进制字符串到整数](https://stackoverflow.com/questions/3648411)

```
unsigned result = 0;
NSScanner *scanner = [NSScanner scannerWithString:@"ff0000"];
[scanner scanHexInt:&result]; 
```

或使用“c”：

```
uint32_t value;
NSString *stringValue = @"ff0000";
const char *string = [stringValue cStringUsingEncoding:NSUTF8StringEncoding];
sscanf(string, "%x" , &value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T10:59:02.463

您可以使用下面的行进行转换。它只有一行代码：

```
NSString *hexString = @"01FFFFAB";
length = (UInt64)strtoull([sizeLine UTF8String], NULL, 16);
NSLog(@"The required Length is %d", length); 
```

快乐编码！！！

# php - Netbeans PHP 包含路径似乎未使用，无论是项目还是全局

> ID：14106104
> 
> 赞同：1
> 
> 时间：2012-12-31T21:14:33.980
> 
> 标签：php, netbeans, include-path

我最近从 Eclipse PDT 转换为 NetBeans，但在使用 NetBeans 的包含路径时遇到了问题。无论我是在全局范围内还是在每个项目中设置它，它似乎都没有被使用并且完全被忽略。

在一个项目中工作，我通过属性设置它。在全球范围内工作，我通过工具选项设置它。无论哪种方式，我都会在项目的包含路径下看到我的所有设置。如果我在两个地方都设置了它，我会在项目的包含路径中看到它们。然而，在这些路径中什么都找不到。

如果我将路径添加到 PHP.INI include_path 变量，一切正常。所以，我知道正在搜索路径，并且正在通过 PHP 找到包含。当然，这是构建项目的好方法。

由于我不太了解 NetBeans，因此我认为我在那里遗漏了一些东西。我需要做什么才能启用 NetBeans PHP 包含路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:47:32.007

The PHP Include Path option in Netbeans is only used by Netbeans to help it during code completion and file navigation. You will still need to set the Include path in your PHP.ini file if the script that you are running requires it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:31:50.263

需要在 PHPUnit 的 Project Properties 下配置 NetBeans 以使用 Bootstrap 程序和 XML 代码。需要该信息来加载命名空间和类信息以使项目运行。

# c# - 如何不允许特殊字符，但在正则表达式中允许空格？

> ID：14106109
> 
> 赞同：4
> 
> 时间：2012-12-31T21:15:25.280
> 
> 标签：c#, regex

当用户在 datagridview 中输入特殊字符时，我需要填充错误消息。到目前为止，我有以下内容：

```
if (Regex.IsMatch(columnValue.ToString(),"^[A-Za-z0-9]$"))
                {
                    MessageBox.Show("You may not use special characters.", "Saving not allowed at this time", MessageBoxButtons.OK, MessageBoxIcon.Error); 
```

此正则表达式有效，并且不允许特殊字符，但是如果字符之间有空格，则它属于 if 语句，应该允许。

如何让它允许一个空格，但不允许特殊字符？

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T21:20:13.363

我认为您只想在正则表达式中添加一个空格：

```
if (Regex.IsMatch(columnValue.ToString(),"^[ A-Za-z0-9]$")) 
```

在编写正则表达式时，使用逐字字符串运算符通常是一个好习惯，`@`因为许多特殊表达式要求您使用反斜杠字符。

```
if (Regex.IsMatch(columnValue.ToString(), @"^[ A-Za-z0-9]$")) 
```

如果您明确告诉正则表达式忽略模式中的空格，则需要转义空格字符。

```
if (Regex.IsMatch(columnValue.ToString(), @"^[\ A-Za-z0-9]$", RegexOption.IgnorePatternWhitespace)) 
```

如果您希望它们能够使用任何空白字符（空格、制表符、换行符等），您可以使用空白字符类`\s`

```
if (Regex.IsMatch(columnValue.ToString(), @"^[\sA-Za-z0-9]$")) 
```

* * *

**更新**

看来您可能想要一个排除组中字符的正则表达式。

您当前的正则表达式正在从字符串的开头到字符串`^`的结尾`$`查找 group 中的一个字符`A-Za-z0-9`。如果您想匹配完全相反的内容，您可以在`!`之前使用 not 运算符`Regex.IsMatch`，例如：

```
if (!Regex.IsMatch(columnValue.ToString(), @"^[ A-Za-z0-9]$")) 
```

但是如果你想在你的正则表达式中写一个被排除的字符组，你可以`^`在你的组中放一个。当`^`位于组内时，`[^]`它后面的任何字符都将被排除在匹配之外。

正则表达式`[A-Z]`将匹配任何字符 AZ。正则表达式`[^A-Z]`将匹配任何字符**NOT** AZ。

如果那是您正在寻找的内容，您可以将您的声明更改为：

```
if (Regex.IsMatch(columnValue.ToString(), @"[^A-Za-z0-9\ ]")) 
```

该语句将匹配包含任何不在组中的字符的任何字符串。因此，如果他们键入“Hello World”，它将不匹配。如果他们输入“Hello！World”，它会匹配，因为“！” 不在组内。

*注意：前导`^`和尾随`$`已删除。在这个正则表达式中，我们不关心字符串的长度，因为我们只匹配字符串中任何我们不期望的字符。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T21:22:09.180

```
if (Regex.IsMatch(columnValue.ToString(),"^[A-Za-z0-9 ]+$"))
{
   MessageBox.Show("You may not use special characters.", "Saving not allowed at this time", MessageBoxButtons.OK, MessageBoxIcon.Error); 
} 
```

或作为单个布尔检查来测试

```
bool isValid = Regex.IsMatch(columnValue, "^[a-z0-9 ]+$", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T21:20:34.013

你可以包括所有的数字、字符串和空格:)

```
"^[a-z]|[A-Z]|[0-9]|[ ]$" 
```

或者

```
"^[\d+]|[\w+]|[ ]$" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T21:22:04.690

为什么不试试这个正则表达式：`[a-zA-Z0-9\s]+`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T21:19:15.370

在字符类中添加一个空格，即使用`^[A-Za-z0-9 ]$`而不是`^[A-Za-z0-9]$`. 这仍然不允许其他空白字符，例如`tab`.

# php - 一种“全局”的 PHP 类

> ID：14106117
> 
> 赞同：2
> 
> 时间：2012-12-31T21:16:26.057
> 
> 标签：php

在我的 Web 应用程序中，我的数据库连接适配器被创建为第一件事。在此之前，构建应用程序配置。两者都是通过 ZF2 中相应的 Zend 组件实例化的。我注意到我只是将 ZF2 用作库，而不是本身作为框架。

基本上，这就是我的应用程序初始化中发生的事情。

```
$config   = new \Zend\Config\Config(array());
$database = new \Zend\Db\Adapter\Adapter($config->database->toArray);

/**
*Create the session, start the session
*Set error handling
*/ 
```

很酷，所以这就是它的大部分。现在，我们接着处理请求：

```
$router = new \ils\Router($_SERVER['REQUEST_URI'], $database]);
$router->dispatch(); 
```

在我的路由器内部，我基本上将 URI 拆分为其组件，检查路由是否有效，然后使用以下命令调度它：

```
$dispatchedController = new $this->controller($this->database);
$method = $this->method; 
```

我基本上是在注入数据库组件，该组件是我通过路由器从初始化提供到控制器中的。这与DI足够接近吗？我该如何改进它？

所以在我的控制器类中，我有承包商

```
public function __construct($database){
    $this->database = $database;
} 
```

就是这样。然后我可以根据需要将其传递给相关的 DAO 等。

我的问题是，在应用程序的某些地方，特别是视图和其他一些类，我有***服务***——可能不是你想的那种类型！这些服务仅中继信息，通常不实例化为对象：

```
class UserService {

  public static function getUsername(){

   $container = new \Zend\Session\Container('application_session');

   return $sessionContainer->userId;

  } 
```

然后我们有一个看起来像这样的方法 - 这就是问题所在：

```
public function getCurrentUser(){

    $user = new \ils\objects\user();
    $user->setUserId(self::currentUserId());

    $data = new \model\dao\users($database);
    $user = $data->loadUser($user);

    return $user;
} 
```

现在，我从哪里得到`$database`？虽然我可以在某些地方将类服务实例化为一个对象，然后以它为食，但有些地方我不能。

我正在考虑可能使用 Zend`ServiceManager`将东西连接到其中 - 但我将如何获得 ServiceManager？

潜在地，可以使用单例来创建一种标准对象（配置、数据库等）的全局容器吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T22:05:09.667

我以前遇到过这个问题，但我通过将我的`database`库传递给我的视图来解决它！我有一个调用来加载我的视图，并且在`$data`将要传递给正确视图的数组中，我将数据库和其他库放入其中。

```
$data = array(
  'DATABASE' => &$this->db,
  'INPUT' => &$this->input
); 
```

我尝试传递变量的地址，这样就不会发生过载。

# algorithm - 查找所有最大子集的高效算法

> ID：14106121
> 
> 赞同：29
> 
> 时间：2012-12-31T21:17:02.180
> 
> 标签：algorithm, set

我有一组独特的集合（表示为位掩码），并希望消除作为另一个元素的真子集的所有元素。例如：

```
input = [{1, 2, 3}, {1, 2}, {2, 3}, {2, 4}, {}]
output = [{1, 2, 3}, {2, 4}] 
```

我一直无法为此找到标准算法，甚至无法找到此问题的名称，因此我将其称为“最大子集”，因为没有其他任何内容。这是一个 O(n^2) 算法（在 Python 中具体来说），假设`is_subset_func`是 O(1): ¹

```
def eliminate_subsets(a, cardinality_func, is_subset_func):
    out = []
    for element in sorted(a, reverse=True, key=cardinality_func):
        for existing in out:
            if is_subset_func(element, existing):
                break
        else:
            out.append(element)
    return out 
```

是否有更有效的算法，希望 O(n log n) 或更好？

* * *

¹ 对于恒定大小的位掩码，在我的情况下是真的，`is_subset_func`is just `element & existing == element`，它在恒定时间内运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-01T04:18:00.840

假设您标记所有输入集。

```
A={1, 2, 3}, B={1, 2}, C={2, 3}, D={2, 4}, E={} 
```

现在构建中间集，宇宙中的每个元素一个，包含它出现的集合的标签：

```
1={A,B}
2={A,B,C,D}
3={A,C}
4={D} 
```

现在对于每个输入集计算其元素的所有标签集的交集：

```
For A, {A,B} intesect {A,B,C,D} intersect {A,C} = {A}   (*) 
```

如果交集包含集合本身以外的一些标签，则它是该集合的子集。这里没有其他元素，所以答案是否定的。但，

```
For C, {A,B,C,D} intersect {A,C} = {A,C}, which means that it's a subset of A. 
```

这种方法的成本取决于集合的实现。假设位图（如您所暗示的）。假设有 n 个最大大小为 m 和 |U| 的输入集 宇宙中的物品。然后中间集构造产生|U| 大小为 n 位的集合，因此有 O(|U|n) 时间来初始化它们。设置这些位需要 O(nm) 时间。如上所述计算每个交点`(*)`需要 O(mn)；全部为 O(mn^2)。

将所有这些放在一起，我们有 O(|U|n) + O(nm) +O(mn^2) = O(|U|n + mn^2)。使用相同的约定，您的“所有对”算法为 O(|U|^2 n^2)。由于 m <= |U|，该算法渐近地更快。它在实践中也可能更快，因为没有复杂的簿记来添加常数因子。

**补充：在线版**

OP 询问是否有该算法的在线版本，即当输入集一个接一个到达时，最大集合的集合可以增量维护。答案似乎是肯定的。中间集可以快速告诉我们一个新集是否是已经见过的*集的子集。*但是如何快速判断它是否是*超集*？如果是这样，哪些现有的最大集合？因为在这种情况下，那些最大集合不再是最大的，必须用新的集合来代替。

关键是要注意iff`A`的超集是（勾号'表示集合补码）的子集。`B``A'``B'`

遵循这个灵感，我们像以前一样保持中间集。当一个新的输入集`S`到达时，进行与上述相同的测试：设`I(e)`为输入元素的中间集`e`。那么这个测试是

```
For X = \intersect_{e \in S} . I(e), |X| > 0 
```

（在这种情况下，它大于零而不是上面的一，因为它还`S`没有进入`I`。）如果测试成功，那么新集合是现有最大集合的（可能不正确的）子集，因此可以丢弃它。

否则，我们必须添加`S`一个新的最大集，但在此之前，计算：

```
Y = \intersect_{e \in S'} . I'(e) = ( \union_{e \in S'} . I(e) )' 
```

再次将勾号'设置为补码。联合形式的计算速度可能会快一些。`Y`包含已被 取代的最大集合`S`。它们必须从最大集合和`I`. 最后添加`S`为最大集并`I`使用`S`' 元素进行更新。

让我们来看看我们的例子。到达时`A`，我们将其添加到`I`并拥有

```
1={A}  2={A}  3={A} 
```

当`B`到达时，我们找到了`X = {A} intersect {A} = {A}`，所以扔掉`B`并继续。同样的情况发生在`C`. 到了`D`我们就找到`X = {A} intersect {} = {}`了，所以继续`Y = I'(1) intersect I'(3) = {} intersect {}`。这正确地告诉我们最大集合`A`不包含在 中`D`，因此没有什么可删除的。但它必须作为一个新的最大集合添加，并且`I`变为

```
1={A}  2={A,D}  3={A}  4={D} 
```

到来的`E`原因没有改变。假设一个新集合的到来`F={2, 3, 4, 5}`。我们发现

```
X = {A} isect {A,D} isect {A} isect {D} isect {} 
```

所以我们不能扔掉`F`。继续

```
Y = \intersect_{e in {1}} I'(e) = I'(1) = {D} 
```

这告诉我们`D`是 的子集`F`，因此在添加时应该丢弃`F`，留下

```
1={A} 2={A,F} 3={A,F} 4={F} 5={F} 
```

由于算法的在线性质，补码的计算既棘手又漂亮。输入补语的域只需要包括到目前为止看到的输入元素。中间集的全域仅包含当前最大集合中的集标签。对于许多输入流，该集合的大小将随着时间的推移而稳定或减小。

我希望这是有帮助的。

**概括**

这里起作用的一般原则是算法设计中经常出现的一个强大的想法。是反向地图。每当您发现自己在进行线性搜索以查找具有给定属性的项目时，请考虑构建从属性返回到项目的映射。构建此地图通常很便宜，并且大大减少了搜索时间。首要的例子是一个排列图`p[i]`，它告诉您`i`排列数组后第 ' 个元素将占据什么位置。如果您需要搜索最终在给定位置的项目`a`，您必须搜索`p`，`a`线性时间操作。另一方面，一个逆映射不需要比实际计算时间更长（`pi`因此它的成本是“隐藏的”），但是`pi[p[i]] == i``p``pi[a]`在恒定时间内产生所需的结果。

**由原始海报实施**

```
import collections
import operator
from functools import reduce # only in Python 3

def is_power_of_two(n):
    """Returns True iff n is a power of two.  Assumes n > 0."""
    return (n & (n - 1)) == 0

def eliminate_subsets(sequence_of_sets):
    """Return a list of the elements of `sequence_of_sets`, removing all
    elements that are subsets of other elements.  Assumes that each
    element is a set or frozenset and that no element is repeated."""
    # The code below does not handle the case of a sequence containing
    # only the empty set, so let's just handle all easy cases now.
    if len(sequence_of_sets) <= 1:
        return list(sequence_of_sets)
    # We need an indexable sequence so that we can use a bitmap to
    # represent each set.
    if not isinstance(sequence_of_sets, collections.Sequence):
        sequence_of_sets = list(sequence_of_sets)
    # For each element, construct the list of all sets containing that
    # element.
    sets_containing_element = {}
    for i, s in enumerate(sequence_of_sets):
        for element in s:
            try:
                sets_containing_element[element] |= 1 << i
            except KeyError:
                sets_containing_element[element] = 1 << i
    # For each set, if the intersection of all of the lists in which it is
    # contained has length != 1, this set can be eliminated.
    out = [s for s in sequence_of_sets
           if s and is_power_of_two(reduce(
               operator.and_, (sets_containing_element[x] for x in s)))]
    return out 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-05T21:40:05.997

这个问题已经在文献中进行了研究。给定 S_1,...,S_k 是 {1,...,n} 的子集，Yellin [1] 给出了一种算法来在 O(kdm) 时间内找到 {S_1,...,S_k} 的最大子集其中 d 是 S_i 的*平均*大小，m 是 {S_1,...,S_k} 的最大子集的基数。后来 Yellin 和 Jutla [2] 将某些参数范围改进为 O((kd)^2/sqrt(log(kd)))。相信不存在针对该问题的真正的次二次算法。

[1] Daniel M. Yellin：子集测试和寻找最大集的算法。苏打水 1992：386-392。

[2] Daniel M. Yellin、Charanjit S. Jutla：在小于二次的时间内找到极值集。信息。过程。莱特。48（1）：29-34（1993）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T22:06:26.893

在我的脑海中，有一个 O(D*N*log(N)) ，其中 D 是唯一数字的数量。

递归函数“helper”的工作原理如下：@arguments 是集合和域（集合中唯一数字的数量）：基本情况：

1.  如果域为空，则返回
2.  如果 sets 为空或 sets 的长度等于 1，则返回

迭代案例：

1.  从集合中删除所有空集合
2.  在域中选择一个元素 D
3.  从域中删除 D
4.  根据集合是否包含 D 将集合分为两组（set1 和 set2）
5.  从集合中的每个集合中删除 D
6.  设置结果 = union ( helper(set1,domain), helper(set2,domain) )
7.  对于 set1 中的每个集合，添加 D 回
8.  返回结果

请注意，运行时取决于使用的 Set 实现。如果使用双向链表存储集合，则：

步骤 1-5,7 采用 O(N) 步骤 6 的并集是 O(N*log(N)) 通过排序然后合并

因此整体算法为 O(D*N*log(N))

这是执行以下操作的java代码

```
import java.util.*;

public class MyMain {

    public static Set<Set<Integer>> eliminate_subsets(Set<Set<Integer>> sets) throws Exception {
        Set<Integer> domain = new HashSet<Integer>();
        for (Set<Integer> set : sets) {
            for (Integer i : set) {
                domain.add(i);
            }
        }
        return helper(sets,domain);
    }

    public static Set<Set<Integer>> helper(Set<Set<Integer>> sets, Set<Integer> domain) throws Exception {
        if (domain.isEmpty()) { return sets; }
        if (sets.isEmpty()) { return sets; }
        else if (sets.size() == 1) { return sets; }

        sets.remove(new HashSet<Integer>());

        // Pop some value from domain
        Iterator<Integer> it = domain.iterator();
        Integer splitNum = it.next();
        it.remove();

        Set<Set<Integer>> set1 = new HashSet<Set<Integer>>(); 
        Set<Set<Integer>> set2 = new HashSet<Set<Integer>>();
        for (Set<Integer> set : sets) {
            if (set.contains(splitNum)) {
                set.remove(splitNum);
                set1.add(set);
            }
            else {
                set2.add(set);
            }
        }

        Set<Set<Integer>> ret = helper(set1,domain);
        ret.addAll(helper(set2,domain));

        for (Set<Integer> set : set1) {
            set.add(splitNum);
        }
        return ret;
    }

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        Set<Set<Integer>> s=new HashSet<Set<Integer>>();
        Set<Integer> tmp = new HashSet<Integer>();
        tmp.add(new Integer(1)); tmp.add(new Integer(2)); tmp.add(new Integer(3));
        s.add(tmp);

        tmp = new HashSet<Integer>();
        tmp.add(new Integer(1)); tmp.add(new Integer(2));
        s.add(tmp);

        tmp = new HashSet<Integer>();
        tmp.add(new Integer(3)); tmp.add(new Integer(4));
        s.add(tmp);
        System.out.println(eliminate_subsets(s).toString());
    }

} 
```

*新年是破坏性的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T22:07:32.290

预处理假设：

*   输入集按降序排列*   每个集合按值升序排序*   *可以访问每组的总长度和长度*

    ## 方法 #2 - 使用存储桶方法

    相同的假设。可以假设唯一性吗？（即没有 {1,4,6},{1,4,6}）否则，您可能需要在某个时候检查 distinct，可能是在创建存储桶后。

    半伪

    ```
    List<Set> Sets;//input
    List<Set> Output;
    List<List<Set>> Buckets;
    int length = Sets[0].length;//"by descending lengths"
    List<Set> Bucket = new List<Set>();//current bucket

    //Place each set with shared length in its own bucket
    for( Set set in Sets )
    {
     if( set.length == length )//current Bucket
     {
      Bucket.add(set);
     }else//new Bucket
     {
      length = set.length;
      Buckets.Add(Bucket);
      Bucket = new Bucket();
      Bucket.Add(set);
     }
    }
    Buckets.add(Bucket);

    //Based on the assumption of uniqueness, everything in the first bucket is
    //larger than every other set and since it is unique, they are not proper subsets
    Output.AddRange(Buckets[0]);

    //Iterate through the buckets
    for( int i = 1; i < Buckets.length; i++ )
    {
     List<Set> currentBucket = Buckets[i];

     //Iterate through the sets in the current bucket
     for( int a = 0; a < currentBucket.length; a++ )
     {
      Set currentSet = currentBucket[a];
      bool addSet = true;
      //Iterate through buckets with greater length
      for( int b = 0; b < i; b++ )
      {
       List<Set> testBucket = Buckets[b];

       //Iterate through the sets in testBucket
       for( int c = 0; c < testBucket.length; c++ )
       {
        Set testSet = testBucket[c];
        int testMatches = 0;

        //Iterate through the values in the current set
        for( int d = 0; d < currentSet.length; d++ )
        {
         int testIndex = 0;

         //Iterate through the values in the test set
         for( ; testIndex < testSet.length; testIndex++ )
         {
          if( currentSet[d] < testSet[testIndex] )
          {
           setClear = true;
           break;
          }
          if( currentSet[d] == testSet[testIndex] )
          {
           testMatches++;
           if( testMatches == currentSet.length )
           {
            addSet = false;
            setClear = true;
            break;
           }
          }
         }//testIndex
         if( setClear ) break;
        }//d
        if( !addSet ) break;
       }//c
       if( !addSet ) break;
      }//b
      if( addSet ) Output.Add( currentSet );
     }//a
    }//i 
    ```

    ## 方法#1 ( `O( n(n+1)/2 )`) ...效率不够

    半伪

    ```
    //input Sets
    List<Set> results;
    for( int current = 0; current < Sets.length; current++ )
    {
     bool addCurrent = true;
     Set currentSet = Sets[current];
     for( int other = 0; other < current; other++)
     {
      Set otherSet = Sets[other];
      //is current a subset of other?
      if( currentSet.total > otherSet.total 
       || currentSet.length >= otherSet.length) continue;
      int max = currentSet.length;
      int matches = 0;
      int otherIndex = 0, len = otherSet.length;
      for( int i = 0; i < max; i++ )
      {
       for( ; otherIndex < len; otherIndex++ )
       {
         if( currentSet[i] == otherSet[otherInex] )
         {
          matches++;
          break;
         }
       }
       if( matches == max )
       {
        addCurrent = false;
        break;
       }
      }
      if( addCurrent ) results.Add(currentSet);
     }
    } 
    ```

    这将获取一组集合，并遍历每个集合。对于每一个，它将再次遍历集合中的每个集合。当嵌套迭代发生时，它将比较外部集是否与嵌套集相同（来自内部迭代）（如果它们相同，则不进行检查），它还将比较外部集是否具有更大的总数比嵌套集合（如果总数更大，则外部集合不能是适当的子集），然后将比较外部集合的项目数量是否小于嵌套集合。

    一旦这些检查完成，它将从外部集合的第一项开始，并将其与嵌套集合的第一项进行比较。如果它们不相等，它将检查嵌套集的下一项。如果它们相等，则将一个计数器添加到计数器，然后将外部集合的下一项与它在内部集合中停止的位置进行比较。

    如果它达到匹配比较的数量等于外部集合中的项目数的点，则外部集合已被发现是内部集合的适当子集。它被标记为被排除，并且比较被停止。

# c++ - 我可以在 Surface RT 上运行 Windows 2003 SDK 应用程序吗？

> ID：14106124
> 
> 赞同：1
> 
> 时间：2012-12-31T21:17:28.373
> 
> 标签：c++, windows-rt

> **可能重复：**
> [在 Windows RT 上运行为 ARM 编译的 Win32 应用程序](https://stackoverflow.com/questions/13455035/running-win32-apps-compiled-for-arm-on-windows-rt)

我有一个通过 Codewarrior 和 Windows 2003 SDK 编译的 Windows 应用程序。它对我很有用。我目前使用的是 Windows XP。

我可以以某种方式将其复制到我的 Surface RT 并运行它吗？

我是否需要升级到 Windows 8 并迁移到 VC++ 2012？

编辑：所以我想我看到它不会在没有 Windows 8 和 VC++ 的 Surface RT 的情况下工作，因为它是基于 ARM 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:29:40.197

不，您必须为新处理器重新编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:59:29.910

1.  您必须为 ARM 处理器重新编译它。
2.  您必须由 Microsoft 签署您的应用程序！

不幸的是，Microsoft 仅支持适用于 Windows RT 的 Metro 风格应用程序，并且不会对您的应用程序进行签名。Windows RT 不支持 Windows 桌面应用程序。

但是您可以使用一些方法绕过签名检查：

[http://forum.xda-developers.com/showthread.php?t=1944675](http://forum.xda-developers.com/showthread.php?t=1944675)

# java - Java 错误：如何将 JVM 更新到 Java 7

> ID：14106126
> 
> 赞同：-4
> 
> 时间：2012-12-31T21:17:55.570
> 
> 标签：java, osx-lion

我有一个 mac osx 狮子。我收到了一个试图从终端运行的 jar：

```
java -jar Hello.jar 
```

但我收到以下错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: hello/world
hello/world/Hello:  Unsupported major.minor version 51.0 
```

有人会指导我解决问题吗？

我想我需要将我的 JVM 更新到 Java 7。但我不知道如何在我的 mac 上执行此操作。有人会帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:20:22.823

如果要更新 JVM，请卸载当前的并安装最新版本。（其实以前的版本不用卸载，只要知道具体的版本，就可以并排使用任意多个版本**）**。

取决于您需要 JDK 还是只需要 JRE：
[Mac OS X 的 JDK 7 安装 Mac OS X](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html)
[的 JRE 7 安装](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jre.html)

# mysql - 按另一个表的总和排序 SELECT 语句？

> ID：14106128
> 
> 赞同：0
> 
> 时间：2012-12-31T21:18:40.570
> 
> 标签：mysql

我知道以前有人问过这样的问题，但我不确定如何将它应用到我的代码中。我有两张桌子。我有一个`entry`存储这样的条目的表：

```
id | name | description
1    Test   Test entry 
```

在另一个表中，我有一个`rating`这样的表：

```
id | entryid | rating
1  | 1       | 1
2  | 1       | -1 
```

我想列出第一个表中的所有条目，但按总评分排序。因此，在此示例中，条目 #1 的评分为 0，因为 1 + -1 = 0。有没有办法可以通过查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:37:24.677

检查这个[SQLFIDDLE DEMO](http://sqlfiddle.com/#!2/e2aa3/4)。您只需要使用`Sum`来计算每个的所有评级`entryID`。

询问：

```
select r.entryid, sum(r.rating)
from ratings r
group by r.entryid
; 
```

结果：

```
ENTRYID     SUM(R.RATING)
1           -1
2           2 
```

最终查询：

```
select e.id, e.name, sum(r.rating)
from entry e
left join 
ratings r
on r.entryid = e.id
group by e.id
; 
```

最终结果：

```
ID  NAME    SUM(R.RATING)
1   Test1   -1
2   Test2   2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:34:44.610

您可以使用这样的内联视图：

```
select id, `name`, description from (
select t1.id, t1.`name`, t1.description, sum(t2.rating) as sum_rating
from
t1 inner join t2 on t1.id = t2.entryid
group by t1.id, t1.`name`, t1.description
) as t 
order by sum_rating desc 
```

因此，您计算所有相关评级的总和，然后从查询的内部按这些总和排序。如果您的第一个表的某些行没有任何评级，则将内连接替换为左连接。

# clojure - 数据库凭据和 leiningen？

> ID：14106131
> 
> 赞同：11
> 
> 时间：2012-12-31T21:19:29.787
> 
> 标签：clojure, leiningen, amazon-elastic-beanstalk

我正在开发一个 clojure Web 应用程序，使用 leiningen 2 进行构建和部署。这是一个非常普通的 web 应用程序，我正在使用 compojure、ring 和 lein-beanstalk。我的应用程序需要同时使用数据库凭据和 S3 凭据，我不确定在我的应用程序中存储和访问它们的最佳方式。

使用 leiningen 2 处理需要与我的应用程序一起部署的数据库凭据等敏感信息的常用方法是什么？

我可以在弹性豆茎上设置环境变量，但如果可能的话，我想避免这条路线。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T19:00:34.393

有两种方法可以做到。一种是使用环境变量，如果您的所有配置值都是字符串并且您不需要任意嵌套，这很好。您最好的选择是 Environ：[https ://github.com/weavejester/environ](https://github.com/weavejester/environ)

另一个不错的选择是从类路径中读取 Clojure 数据文件。您可以使用 dir 将开发配置设置检查到您的项目中，`dev-resources`并使用部署工具将生产配置放在类路径中。这里的优点是您的配置可以是带有嵌套映射等的任意 Clojure 值。对此最好的是 Carica：[https ://github.com/sonian/carica](https://github.com/sonian/carica)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T21:37:48.137

我非常喜欢使用环境变量来跟踪变量环境。;-)

其他人使用选项传递它们`-Ddb=foo`并阅读它们`(System/getProperty "db")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T01:15:10.540

看看 Confijulate——我为实现这种模式而创建的一个库：

[https://github.com/bbbates/confijulate](https://github.com/bbbates/confijulate)

您可以将密码或密钥存储在外部文件中，并通过系统属性将其加载。在连接到 S3 或 dB 的函数中，您可以使用通过相同机制加载的密钥对其进行解密。只需确保您读入的文件只能由 Web 用户（tomcat 或 jboss 或您与 beanstalk 一起使用的任何容器）读取。

# android - 如何使用 ActionBarSherlock 4.2.0 在我的项目中导入 SlidingMenu

> ID：14106136
> 
> 赞同：1
> 
> 时间：2012-12-31T21:20:11.957
> 
> 标签：android, android-actionbar, actionbarsherlock

我发现`https://github.com/jfeinstein10/SlidingMenu`非常有趣，我想在我现有的带有 actionbarsherlock 4.2 的项目中使用它。我已经将slidingmenu的库作为android的现有项目导入。然后我去了我的项目的属性并将slidingmenu项目添加为一个库，但是我在SlidingMenu menu = new SlidingMenu（this）上遇到错误。还有一个红色的“！” 在我的项目文件夹中。

![在此处输入图像描述](../Images/7b76f37910fba1f73a9d5d6a6243c932.png)

![在此处输入图像描述](../Images/0a1864c37a2f3f77e1a0992fbcc51e85.png)

我是滑动菜单的新手，我需要帮助。非常感谢你。

更新：我已经修复了最多的错误，但我有这个我不知道如何解决它 ![在此处输入图像描述](../Images/f09ad2eccbb9a70aced25389fa91943d.png)

最新错误：

```
Description Resource    Path    Location    Type

ACTION_POINTER_INDEX_MASK cannot be resolved or is not a field  CustomViewAbove.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 659    Java Problem

ACTION_POINTER_INDEX_MASK cannot be resolved or is not a field  CustomViewAbove.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 660    Java Problem
error: Error: String types not allowed (at 'layout_height' with value 'match_parent').  
list.xml    /SlidingMenuActivity/res/layout line 2  Android AAPT Problem

error: Error: String types not allowed (at 'layout_height' with value 'match_parent').  shadow.xml  /SlidingMenuActivity/res/layout line 2  Android AAPT Problem

error: Error: String types not allowed (at 'layout_width' with value 'match_parent').   list.xml    /SlidingMenuActivity/res/layout line 2  Android AAPT Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 11 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 20 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 30 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 39 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 50 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 75 Java Problem

MapActivity cannot be resolved to a type    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 149    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivityHelper.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 87 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingActivityHelper.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 87 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingFragmentActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingFragmentActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingFragmentActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingFragmentActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingListActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 72 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingListActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 72 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingListActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 95 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingListActivity.java    /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 95 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 67 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 67 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 90 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 90 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 195    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 195    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 198    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 198    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 298    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingMenu.java    
/SlidingMenuActivity/src/com/slidingmenu/lib    line 298    Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingPreferenceActivity.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingPreferenceActivity.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 68 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingPreferenceActivity.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

MATCH_PARENT cannot be resolved or is not a field   SlidingPreferenceActivity.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 91 Java Problem

R cannot be resolved to a variable  CustomViewAbove.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 859    Java Problem

R cannot be resolved to a variable  CustomViewAbove.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 878    Java Problem

R cannot be resolved to a variable  CustomViewAbove.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 883    Java Problem

R cannot be resolved to a variable  SlidingActivityHelper.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 46 Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 222    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 224    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 226    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 232    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 238    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 241    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 242    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 251    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 253    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 257    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 259    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 261    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 263    Java Problem

R cannot be resolved to a variable  SlidingMenu.java    /SlidingMenuActivity/src/com/slidingmenu/lib    line 265    Java Problem

The constructor SlidingActivityHelper(SlidingMapActivity) is undefined  SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 21 Java 
Problem

The container 'Android Dependencies' references non existing library '/Users/g3o/Documents/workspace/SlidingMenu/library/bin/slidingmenuactivity.jar'   Waiter      
Build path  Build Path Problem

The import com.google cannot be resolved    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 8  Java Problem

The import com.slidingmenu.lib.R cannot be resolved SlidingActivityHelper.java  /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 12 Java Problem

The method findViewById(int) of type SlidingMapActivity must override or implement a supertype method   SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 38 Java Problem

The method getLayoutInflater() is undefined for the type SlidingMapActivity SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 59 Java Problem

The method getLayoutInflater() is undefined for the type SlidingMapActivity SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 83 Java Problem

The method onCreate(Bundle) of type SlidingMapActivity must override or implement a supertype method    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 19 Java Problem

The method onKeyUp(int, KeyEvent) of type SlidingMapActivity must override or implement a supertype method  SlidingMapActivity.java 

/SlidingMenuActivity/src/com/slidingmenu/lib/app    line 146    Java Problem

The method onPostCreate(Bundle) of type SlidingMapActivity must override or implement a supertype method    SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 29 Java Problem

The method onSaveInstanceState(Bundle) of type SlidingMapActivity must override or implement a supertype method SlidingMapActivity.java 

/SlidingMenuActivity/src/com/slidingmenu/lib/app    line 49 Java Problem

The method setContentView(int) of type SlidingMapActivity must override or implement a supertype method SlidingMapActivity.java /SlidingMenuActivity/src/com/slidingmenu/lib/app    line 58 Java Problem

The method setContentView(View, ViewGroup.LayoutParams) of type SlidingMapActivity must override or implement a supertype method    SlidingMapActivity.java 

/SlidingMenuActivity/src/com/slidingmenu/lib/app    line 74 Java Problem

The method setContentView(View) of type SlidingMapActivity must override or implement a supertype method    SlidingMapActivity.java 

/SlidingMenuActivity/src/com/slidingmenu/lib/app    line 66 Java Problem

The project cannot be built until build path errors are resolved    Waiter      Unknown Java Problem 
```

* * *

**解决** 了我在 ActionBarSherlock、Slidemenu 和我的项目上都更改了 Goole API，所有错误都消失了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:29:10.810

解决方案：我在 ActionBarSherlock、Slidemenu 和我的项目上都更改了 Goole API，所有错误都消失了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T21:38:49.687

您需要扩展一个 SlidingMenu 类。要*同时使用 ActionBar Sherlock 库，您必须遵循*[自述文件](https://github.com/jfeinstein10/SlidingMenu#setup)中列出的步骤，特别是以下步骤：

> *   进入您计划使用的 SlidingActivity，使它们扩展 Sherlock__ *Activity 而不是 _* _Activity。

所以你的项目应该扩展 SlidingActivity：

```
public class Waiter extends SlidingActivity { 
```

您需要更改您的 SlidingMenu 库副本以使用 ABS。打开`com/slidingmenu/lib/app/SlidingActivity.java`和改变：

```
public class SlidingActivity extends Activity implements SlidingActivityBase { 
```

到：

```
public class SlidingActivity extends SherlockActivity implements SlidingActivityBase {
//             Add "Sherlock" here:  ^^^^^^^^ 
```

（对您希望使用的任何其他 SlidingMenu 活动重复此步骤。）

# java - 正则表达式从以下代码中选择名称

> ID：14106142
> 
> 赞同：0
> 
> 时间：2012-12-31T21:21:00.913
> 
> 标签：java, regex

```
alt="Abdul Aziz" width="75" height="75" class="thumb-border"></td> 
```

我想从上面的 html 中选择“Abdul Aziz”。我该怎么做？它必须是通用的，因为我必须从外观相似的 HTML 中选择许多名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:25:10.987

不确定您使用的是哪种语言，但这里有一种模式可以帮助您实现目标。请注意，使用正则表达式解析 HTML 有各种各样的缺点。

```
"/alt=\"(.*?)\".*?>/" 
```

这会将 alt="" 之间的内容检索到第一个捕获组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:27:32.827

```
alt="[\w\s]+" 
```

将选择整个语句，然后您可以使用代码删除 alt 和引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:29:36.903

使用 Javascript 会更加一致：

```
//You can get elements by tag :
els = document.getElementsByTag('td');

// or you can get elements by class name :
els = document.getElementsByClassName('thumb-border'); 
```

然后遍历您的元素并读取 alt 属性。

或者如果使用 jQuery，你可以使用选择器：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# objective-c - 花栗鼠物理/Cocos2d/Objective-c - cpSpaceBBQuery

> ID：14106146
> 
> 赞同：1
> 
> 时间：2012-12-31T21:21:16.607
> 
> 标签：objective-c, cocos2d-iphone, physics, chipmunk

我一直在互联网上寻找任何指南，甚至是 Chipmunk Physics 的 cpSpaceBBQuery 函数的示例。我已经阅读并重新阅读了作者自己提供的文档，但没有运气。

这是关于 Chipmunk 的所有文档：http: [//chipmunk-physics.net/release/ChipmunkLatest-Docs/](http://chipmunk-physics.net/release/ChipmunkLatest-Docs/)

据我了解，您必须在代码中的某处调用函数 cpSpaceBBQuery，将边界框设置为参考，并在找到形状时调用函数。当我设置这两个元素时，我的函数永远不会被调用。我尝试添加一个精灵作为数据参数也没有运气。我错过了什么？

一个很好的例子。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:10:06.580

没有这方面的专家，但我只是为您找到了以下内容，希望对您有所帮助。

[http://cutecoder.org/programming/wrapping-style-callbacks-blocks/](http://cutecoder.org/programming/wrapping-style-callbacks-blocks/)

[http://code.google.com/p/chipmunk-physics/source/browse/wiki/Queries.wiki?r=408](http://code.google.com/p/chipmunk-physics/source/browse/wiki/Queries.wiki?r=408)

```
==Bounding Box Queries==

{{{
typedef void (*cpSpaceBBQueryFunc)(cpShape *shape, void *data);
void cpSpaceBBQuery(cpSpace *space, cpBB bb, cpLayers layers, cpGroup group, cpSpaceBBQueryFunc func, void *data);
}}}
 Query `space` over the area of `bb` filtering out matches using the given `layers` and `group`. `func` is called for each shape found along with the `data` argument passed to `cpSpaceBBQuery()`. The bounding box of all shapes passed to the callback overlap the given bounding box, but the shapes themselves might not overlap the box. This function is meant to be an efficient way to find objects in an area, but not a detailed intersection test.

==Examples==

This is the mouse button handler function from the demo app. On mouse down, it finds the shape under the mouse if there is one and adds a joint to it so that you can drag it around.
{{{
static void
click(int button, int state, int x, int y)
{
        if(button == GLUT_LEFT_BUTTON){
                if(state == GLUT_DOWN){
                        cpVect point = mouseToSpace(x, y);

                        cpShape *shape = cpSpacePointQueryFirst(space, point, GRABABLE_MASK_BIT, 0);
                        if(shape){
                                cpBody *body = shape->body;
                                mouseJoint = cpPivotJointNew2(mouseBody, body, cpvzero, cpBodyWorld2Local(body, point));
                                mouseJoint->maxForce = 50000.0f;
                                mouseJoint->biasCoef = 0.15f;
                                cpSpaceAddConstraint(space, mouseJoint);
                        }
                } else if(mouseJoint){
                        cpSpaceRemoveConstraint(space, mouseJoint);
                        cpConstraintFree(mouseJoint);
                        mouseJoint = NULL;
                }
        }
}
}}}

Shoot a laser through a space, find the first shape it hits. We want to draw particles where the laser beam enters and exits the shape.
{{{
cpSegmentQueryInfo info;
if(cpSpaceSegmentQueryFirst(space, a, b, -1, 0, &info)){
        cpSegmentQueryInfo info2;
        cpShapeSegmentQuery(info.shape, b, a, &info2);

        cpVect enterPoint = cpSegmentQueryHitPoint(a, b, info);
        cpVect exitPoint = cpSegmentQueryHitPoint(b, a, info2);
}
}}} 
```

# image - 显示阵列中的图像

> ID：14106151
> 
> 赞同：1
> 
> 时间：2012-12-31T21:21:52.143
> 
> 标签：image, matlab

我只想一个一个地遍历一个图像数组，但我无法让它工作，我得到了下面的错误。我可以通过 imshow (a) 显示单个图像，但不能遍历数组。

使用 getImageFromFile 时出错（第 12 行）找不到指定的文件：“a”。

imageDisplayParseInputs 中的错误（第 74 行）[common_args.CData,common_args.Map] = ...

imshow 中的错误（第 198 行）[common_args,specific_args] = ...

代码

```
% Images
a = 'redsquare.bmp';
b = 'bluesquare.bmp';
c = 'greysquare.bmp';
d = 'yellowsquare.bmp';

% Array to display
t = [a b c d];

% Loop to display    
for n=1:length(t)
 imshow(t(n))
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:18:58.387

您的代码中有几个错误。首先，验证图像所在的目录是否在 Matlab 的路径中，或者尝试添加图像位置的完整路径。我建议使用**单元格数组**来包含所有文件名。您在问题中完成的方式是将所有字符串连接到一个长字符串，即

```
t =

redsquare.bmpbluesquare.bmpgreysquare.bmpyellowsquare.bmp 
```

所以在代码中更改`t`为：

```
t = {a, b, c, d}; % note the curly brackets 
```

在循环中，您需要先将图像读取到数组中，然后再显示它，因此添加`imread`一行。将文件读入一个数组（让我们称为该数组`im`）后，您可以使用`imshow`它来绘制它。总而言之，循环中的代码应该是：

```
for n=1:numel(t)
   im=imread(t{n}); 
   imshow(im);
end 
```

再次注意，我在行中使用了大括号`{}`，`imread`这是提取单元格元素内容的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:55:26.403

自从我完成 matlab 以来已经有一段时间了，所以我很难记住语法，但是我很确定您的问题是位图是由一个二维数组组成的，而您将其放入另一个数组中。

因此，当您执行 t(1) 时，您不会获得整个位图，而只会获得一个元素。

首先尝试向 matlab 询问 t 的形状。语法使我难以理解它已经有一段时间了。然后使用所需的语法来提取所需的二维矩阵。

希望这可以帮助

# c# - 显示数据库中的数据而不指定列

> ID：14106152
> 
> 赞同：3
> 
> 时间：2012-12-31T21:21:55.563
> 
> 标签：c#, sql-server, sql-server-2008, c#-4.0, login

我有一个简单的登录页面。我想要做的是当登录正确时，我想显示所有列 - 我不想手动指定要在 while 循环中显示哪些列。

这是我在 C# 中使用 SQL Server 2008 express 的示例：

```
private void Authenticate(string userName, string password)
{
    string connString = "server=.\\sqlexpress; database=TestDatabase; trusted_connection=true";
    SqlConnection conn = new SqlConnection(connString);
    conn.Open();

    string sqlCommand = "select * from Registration where UserName='" + userName + "' and   Password='" + password + "'";
    SqlCommand command = conn.CreateCommand();
    command.CommandText = sqlCommand;

    SqlDataReader reader = command.ExecuteReader();          

    while (reader.Read())
    {
        lblResult.Text += reader["CourseId"] + " " + reader["CourseName"] + " " + reader["Instructor"] + "<br />";
    } 
```

}

我知道这不是最好的实现。

如何使用从注册表返回的所有内容填充 lblResult？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:28:45.533

```
StringBuilder sb = new StringBuilder(1024); /* arbitrary size */
while (reader.read())
{
    for (int i = 0; i < reader.FieldCount; i++)
    {
        sb.Append(reader.GetName(i));
        sb.Append(": ");
        sb.Append(reader[i]);
    }
    sb.Append("<br />");
}
lblResult.Text = sb.ToString(); 
```

类似的东西，基于[MSDN docs](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T21:27:32.123

A[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)有一个名为的属性`FieldCount`，它告诉您返回了多少字段，然后您只需使用该知识遍历 Items 索引。我还将使用 a`StringBuilder`来构建结果字符串，而不是连接字符串来提高性能。像这样的东西：

```
var str = new StringBuilder()
while (reader.Read())
{
    for(int i=0; i<reader.FieldCount ; i++)
    {
        str.Append(reader[i].ToString());
        str.Append(" ");
    }
    str.Append("<br/>");    
}
lblResult.Text = str.ToString(); 
```

# javascript - 基于 canvas/webgl 的 3d 社区平台（开源）

> ID：14106156
> 
> 赞同：0
> 
> 时间：2012-12-31T21:22:18.713
> 
> 标签：javascript, html, canvas, webgl, three.js

我一直在研究 three.js，我想知道目前是否存在任何提供 3d 社区体验的开源平台。在 VRML 和 X3D 时代有很多这样的东西，只是想知道是否有人开发过这种东西。

换句话说：

*   3d 多用户世界

*   实时聊天

*   对象/项目

*   帐户

*   第一人称+头像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:27:48.697

据我所知，它还不存在。尽管我已经看到了几个正在开发的游戏/平台。我所知道的最接近你的实现的是[Cloud Party](https://its.cloudpartytime.com/)，它是基于 webgl 构建的，而不是在 Three.js 上。

# c# - 如何使用 Fluent NHibernate 映射包含与父类型相同类型的实体的列表？

> ID：14106160
> 
> 赞同：1
> 
> 时间：2012-12-31T21:23:01.617
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有这样的实体

```
public class Person
{
    public virtual int Pkey { get; set; }
    public virtual string Name { get; set; }

    public List<Person> Friends{ get; set; }
} 
```

它的表信息是这样的

```
create table Person
(
    PKey int not null IDENTITY,
    Name varchar (20),
    primary key (PKey)
) 
```

要获取朋友列表，我正在维护另一个这样的表

```
Create table Friends
(
     PKey int not null IDENTITY,
     PersonFKey int not null Foreign key references Person(PKey),
     FriendFKey int not null Foreign key references Person(PKey)
) 
```

现在，当我进行如下映射时，我遇到了一些错误（由于映射问题）

```
 public class PersonMap :  ClassMap<Person>
 {
    public PersonMap()
    {
        Id(x => x.Pkey);
        Map(x => x.Name);
        HasManyToMany(x => x.Friends).Cascade.All().Table("Friends").ParentKeyColumn("PersonFKey");
    }
 } 
```

抛出的异常是，

```
FluentConfigurationException: "An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail." 
```

除了内在的例外，

```
InvalidProxyTypeException: The following types may not be used as proxies:

FluentNhibernateLearning.Entities.Person: method get_Friends should be 'public/protected virtual' or 'protected internal virtual'
FluentNhibernateLearning.Entities.Person: method set_Friends should be 'public/protected virtual' or 'protected internal virtual' 
```

谁能帮我指出我缺少的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:37:56.687

您没有说明错误是什么并且映射与类不匹配，但我认为问题在于您缺少`ChildKeyColumn`声明。在多对多映射中，您必须声明父键列和子键列；父键是包含集合的类的主键，子键是集合中类的主键。

此外，您几乎从不希望级联多对多，因为这会导致删除删除所有相关实体。也就是说，删除一个人会删除他们所有的朋友。

```
 public class IntermediaryMap :  ClassMap<Intermediary>
 {
    public IntermediaryMap()
    {
        Id(x => x.Pkey);
        Map(x => x.Name);
        HasManyToMany(x => x.SubBrokers).Table("Intermediary2SubBroker")
            .ParentKeyColumn("IntermediaryFKey")
            .ChildKeyColumn("SubBrokerFKey")
            .AsSet();
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:36:43.547

我认为您需要将 Friends 声明为**virtual**。

这就是 Inner Exception 消息告诉您的内容：

“方法 get_Friends 应该是‘**公共**/受保护的**虚拟**’或‘受保护的内部虚拟’”

# node.js - Mongodb（mongolab）Node.js在集合中找不到任何东西

> ID：14106164
> 
> 赞同：3
> 
> 时间：2012-12-31T21:23:39.587
> 
> 标签：node.js, mongodb, mlab

我是一个大的 Node.js 和 Mongo 新手，所以请温柔一点。

这是我的 Node.js 应用程序：

```
var mongo = require('mongodb');
var Server = mongo.Server;
var Db = mongo.Db;

var server = new Server('hostname.mongolab.com', 666, {auto_reconnect : true}, {w:0, native_parser: false});
var db = new Db('dbName', server, {safe:true});

db.open(function(err, client) {
  if(err) { return console.dir(err); }
  client.authenticate('mongolabUser', 'mongolabUserPassword', function(authErr, success) {
    if(authErr) { return console.dir(authErr); }
    var stream  = client.collection('myCollection').find({}).stream();
    stream.on('data', function(item) {console.log("Do something with item"); });
    stream.on('end', function() {console.log("Empty!");});
  });
  db.close();
}); 
```

通过大量使用调试器语句，我得出的结论是 client.authenticate 似乎没有运行。看起来它即将执行该行，但随后跳过它并直接进入 db.close()。

但这只是我的第一个问题。在之前的某个时间，我能够连接到数据库并进行身份验证，但我的用户在 find({}) 命令中没有检索到任何内容。我尝试了各种方法，流是我决定暂时放弃之前的最新尝试。

Mongolab好像是在v2.0.7上，我的mongo安装的是v2.2.1。当我使用命令行工具以 mongolabUser 身份登录并执行 db.myCollection.find() 之类的命令时，我会在我的集合中获取所有内容，因此这不会是权限问题。

有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:36:49.780

`client.authenticate()`是异步的，因此调用它的行*开始*身份验证，但在继续执行下一行之前不等待服务器响应，`db.close()`. 因此，当服务器响应时，客户端已关闭连接。

移动`db.close()`事件处理程序内部是否有`stream.end`帮助？

```
var mongo = require('mongodb');
var Server = mongo.Server;
var Db = mongo.Db;

var server = new Server('hostname.mongolab.com', 666, {auto_reconnect : true}, {w:0, native_parser: false});
var db = new Db('dbName', server, {safe:true});

db.open(function(err, client) {
  if(err) { return console.dir(err); }
  client.authenticate('mongolabUser', 'mongolabUserPassword', function(authErr, success) {
    if(authErr) { return console.dir(authErr); }
    var stream  = client.collection('myCollection').find({}).stream();
    stream.on('data', function(item) {console.log("Do something with item"); });
    stream.on('end', function() {
      console.log("Empty!");
      db.close();
    });
  });
}); 
```

# c - 关于字符串长度、终止NUL等

> ID：14106165
> 
> 赞同：3
> 
> 时间：2012-12-31T21:23:41.317
> 
> 标签：c, string, arrays

我目前正在学习 C，我对 char 数组和字符串之间的差异以及它们的工作方式感到困惑。

**问题一：**

为什么源代码 1 和源代码 2 的结果存在差异？

源代码1：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char c[2]="Hi";
    printf("%d\n", strlen(c));   //returns 3 (not 2!?)
    return 0;
} 
```

源代码2：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char c[3]="Hi";
    printf("%d\n", strlen(c));   //returns 2 (not 3!?)
    return 0;
} 
```

**问题2：**

字符串变量与 char 数组有何不同？如何用最小要求的索引号声明它们，允许存储 \0（如果有的话）（请阅读下面的代码）？

```
char name[index] = "Mick";   //should index be 4 or 5?

char name[index] = {'M', 'i', 'c', 'k'};   //should index be 4 or 5?

#define name "Mick"   //what is the size? Is there a \0? 
```

**问题 3：**

终止的 NUL 是否只跟随字符串而不跟随字符数组？那么字符串“Hi”的实际值为[H][i][\0]，而char数组“Hi”的实际值为[H][i]？

**问题4：**

假设 c[2] 将存储 "Hi" 后跟 \0 （不确定这是如何完成的，使用`gets(c)`可能？）。那么 \0 存储在哪里？它是存储在 c[2] 之后“某处”变成 [H][i]\0 还是 c[2] 附加一个 \0 变成 c[3] 即 [H][i][\0 ]？

有时字符串/字符数组后面有一个 \0 并且当我比较两个变量时会引起麻烦，`if (c1==c2)`因为它很可能返回 FALSE (0)，这非常令人困惑。

详细的答案表示赞赏。但是保持你的回答简短有助于我的理解:)提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:11:31.770

> 问题一：
> 
> 为什么源代码 1 和源代码 2 的结果存在差异？

源代码1：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char c[2]="Hi";
    printf("%d", strlen(c));   //returns 3 (not 2!?)
    getchar();
} 
```

> 源代码2：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char c[3]="Hi";
    printf("%d", strlen(c));   //returns 2 (not 3!?)
    getchar();
} 
```

**回答**： 因为在第一种情况下，`c[]`只是拿着“Hi”。strlen 在最后寻找一个零，并且根据后面的确切内容，`c[]`迟早会找到一个，或者崩溃。我们不能说不知道`c[]`数组后面的内存中有什么。

> 问题2：
> 
> 字符串变量与 char 数组有何不同？如何用最小要求的索引号声明它们，允许存储 \0（如果有的话）（请阅读下面的代码）？

```
char name[index] = "Mick";   //should index be 4 or 5?

char name[index] = {'M', 'i', 'c', 'k'};   //should index be 4 or 5? 
```

**答案** 真的取决于你想做什么。如果您想实际将内容用作字符串，则可能为 5。但是没有什么说你不能将“Mick”存储在一个 4 个字符的数组中——你只是不能使用 strlen 来找出它有多长，因为 strlen 将继续为 5 并且很可能（很多）进一步找到长度，如果接下来的几个内存位置没有零，则可能导致崩溃，因为最终将没有有效的内存地址可供读取。

`#define name "Mick" //what is the size? Is there a \0?`

这完全没有大小，直到您在某处使用名称。#defines 不是编译器所看到的一部分——如果你在任何地方使用，预处理器将被替换`name`——希望这是编译器可以理解的地方。然后适用与上一个答案相同的规则 - 这取决于您要如何使用字符数组。要正确操作、和几乎所有其他函数，最后需要一个零。`"Mick"``name``strlen``strpy``str...`

> 问题 3：
> 
> 终止的 null 是否仅跟随字符串而不跟随 char 数组？那么字符串“Hi”的实际值为[H][i][\0]，而char数组“Hi”的实际值为[H][i]？

是的，不，也许。这完全取决于您如何使用`"Hi"`字符串文字（这是“双引号内的东西”的技术名称）。如果编译器是“允许的”，它会在最后放一个零。但是，如果您将数组初始化为给定的大小，它将把字节填充在那里，如果没有零空间，那是您的问题，而不是编译器的问题。

> 问题4：
> 
> 假设 c[2] 将存储 "Hi" 后跟一个 \0 （不确定这是如何完成的，也许使用 gets(c) ？）。那么 \0 存储在哪里？它是存储在 c[2] 之后“某处”变成 [H][i]\0 还是 c[2] 附加一个 \0 变成 c[3] 即 [H][i][\0 ]？

在 c[2] 中，除了 'H'、'i' 之外，不知道存储了什么 [从技术上讲，它很可能是“地球的尽头”——用计算机术语来说，那是“无法存储的内存”读取 - 在这种情况下`strlen`，您的程序会崩溃，因为 strlen 读取的内容超出了地球的尽头]。但 if 也可以是零、一、字母“a”、数字 42 或任何其他 8 位[1] 价值。

> 当我通过 if (c1==c2) 比较两个变量时，有时在 string/char 数组后面有一个 \0 并且会导致麻烦，因为它很可能返回 FALSE (0)，这很令人困惑。

如果 c1 和 c2 是 char 数组，那总是错误的，因为 c1 和 c2 永远不会有相同的地址，并且当以这种方式在 C 中使用数组时，它变成“在内存中的第一个元素的地址大批”。所以无论 c1 和 c2 的内容是什么，它们的地址永远不会相同[因为它们是两个不同的变量，并且两个变量在内存中不能有相同的位置 - 这就像试图将两辆车停在一个停车位大到只能容纳一辆车——不，在我们的思想实验中不允许压碎任何一辆车]。

[1] Char 不保证为 8 位。但是，让我们暂时先讨论一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T21:46:57.670

**答案 1**：在代码 1 中，您有一个不是字符串的 char 数组；在代码 2 中，您有一个 char 数组，它也是一个字符串。

**答案 2**：字符串是一个 char 数组，其中（至少）一个元素具有值`0`；如果您将大小部分留空，编译器将自动用可能的最小值填充它。

```
char astring[] = "foobar"; /* compiler automagically uses 7 for size */
printf("%d\n", (int)sizeof astring); 
```

**答案 3**：一个 char 数组，其中一个元素是`NUL`字符串；没有元素的 char 数组`NUL`不是字符串。

**答案 4**：定义为容纳两个元素 ( ) 的数组`char c[2];`不能容纳三个元素。如果它将是一个字符串，则它只能是空字符串或具有 1 个字符的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T21:31:59.343

`strlen()`适用于`\0`终止字符并且在`C`所有字符串中都应该`\0`终止。因此，当您只为 2 个字符提供了 2 个空格`H`但`i`没有`\0`. 因此，您正在`Undefined Behavior`进入`strlen()`。如果 `char c[3] = "Hi";`在`\0`第三位，strlen() 将计算实际长度。

`How to declare them with the minimum required index numbers allowing \0 to be stored if any ?`

当您不确定 char 数组的大小时，请这样做：

```
char c1[] = "Mike"; // strlen = 4 
char c2[] = "Omkant" // strlen = 6 
```

笔记 ：

**编辑**：在上述没有明确提及尺寸的情况下，不要`sizeof`与`strlen()`.

`strlen()`仅返回 `sizeof` 字符数给出字符数加一（对于`\0`字符）。

所以 sizeof 总是比 strlen() 返回的数字大 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T21:32:46.367

运行源代码一是未定义的行为，因为`strlen()`需要一个以 NUL 结尾的字符串，而事实`c[2] = "Hi"; /* = { 'H', 'i' } */`并非如此。字符串与 char 数组的不同之处在于，字符串是一个 char 数组，在数组的某处至少有一个 NUL 字节。

剩下的答案应该很容易从这个事实中得出。

要在初始化时自动调整 char 数组的大小以匹配字符串文字的大小，只需不指定数组大小：

```
char c[] = "This will automatically size the c array (including the NUL)."; 
```

请注意，您**不能将 char 数组与 == 运算符进行比较**。你必须使用

```
if (strcmp(c1, c2) == 0) {
   /* Equal. */
} else {
   /* Not equal. */
} 
```

# php - 绑定jQuery网格？

> ID：14106166
> 
> 赞同：4
> 
> 时间：2012-12-31T21:23:52.960
> 
> 标签：php, javascript, jquery, asp.net, ajax

假设我有一个 jquery 网格（插件）。

当然，它可以选择从 ajax 源或其他源（客户端源）获取数据。

现在让我们说，当页面加载时，我应该显示初始数据（因为我有一个寻呼机，所以数据不多，从第二页等等，分页的请求作为 ajax 结果得到）

我应该如何绑定*初始*数据（设计 POV）

我有的选择：

*   在 - ASP.net / PHP（在服务器代码上）注册一个启动客户端脚本，该脚本将在页面加载后运行（此脚本将通过 ajax 获取数据）

（缺点：它实际上会再向服务器发出 1 个请求（以获取数据））

*   我可以（通过初始响应）编写一个隐藏字段，该字段将通过注册客户端启动脚本（仍然）保存 json 数据 - 并`<Script>` 从隐藏字段中读取数据。

*   其他选择？

正确的做法是什么？

ps 我不想加入绑定，`document.ready`因为我相信最好尽快绑定数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:40:08.767

我更喜欢第一种方法，其中视图 UI 与数据源完全分离，即使它会导致来自服务器的第二次响应。

这允许视图被完全缓存；尽管在某些平台（如 ASP.NET）上有片段的缓存选项，因此通过一些配置嵌入数据可能并不是什么大不了的事。

如果您想限制回调，那么负责生成 JSON 回复（用于网格运行所需的分页或服务器端过滤服务调用）的完全相同的代码用于根据请求提供嵌入在页面本身中的第一页数据。

顺便说一句， [DataTables](http://datatables.net/)支持此功能（嵌入数据以及由 AJAX 调用满足的后续请求）。

# iphone - 如何将值传递给父视图控制器？

> ID：14106176
> 
> 赞同：5
> 
> 时间：2012-12-31T21:25:36.077
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

> **可能重复：**
> [dismissModalViewController 并传回数据](https://stackoverflow.com/questions/6203799/dismissmodalviewcontroller-and-pass-data-back)

我是 ios 开发的新手，并且遇到了这个问题：

我正在使用情节提要并有一个导航控制器，`vcA`其中有一个`TableView`显示来自 a 的一些数据（在同一类`MutableArray`中初始化）。`viewdidload`选择任何单元格后，将显示第二个视图控制器 ，`vcB`其中包含一个`TextField`和一个名为“添加到列表”的按钮。

我想要的是，当我在中输入一些文本`TextField`并按下“添加到列表”按钮时，文本应该被添加到前一个视图的数组中（显示在 中）并且当我点击“返回”`TableView`按钮时`vcB`s 导航栏，`vcA`应该显示更新`TableView`后的新条目（在列表顶部）。基本上，我想将`vcB`'s中的文本添加`TextField`到数组中，`vcA`并在单击 BACK 按钮后显示新数组。

我对这个问题进行了很多搜索，似乎发现委托和协议是实现预期结果的方法，但我在理解委托时遇到了麻烦。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T21:52:17.457

在此示例中，我有第二个视图控制器将自己呈现为模态：

在第二个视图控制器 h 文件中：

```
@protocol SecondViewControllerDelegate <NSObject>
- (void)addItemViewController:(id)controller didFinishEnteringItem:(NSString *)item;
@end

@interface SecondPageViewController : UIViewController <UITextViewDelegate>
{
     NSString *previouslyTypedInformation;
}

@property (weak, nonatomic) IBOutlet UITextView *textView;
@property (nonatomic) NSString *previouslyTypedInformation;
@property (nonatomic, weak) id <SecondViewControllerDelegate> delegate; 
```

在第二个视图控制器 m 文件中，确保合成属性并添加，然后添加：

```
- (IBAction)done:(id)sender
{
     NSString *itemToPassBack = self.textView.text;
     NSLog(@"returning: %@",itemToPassBack);
     [self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack];
     //dismiss modal view controller here
} 
```

然后在第一个视图控制器 h 文件中将其设置为委托：

```
 @interface FirstPageViewController: UIViewController <SecondViewControllerDelegate>
 @property (nonatomic) NSString *returnedItem; 
```

然后在第一个视图控制器的m文件中合成并添加方法：

```
- (void)addItemViewController:(SecondPageViewController *)controller didFinishEnteringItem:    (NSString *)item
{
    //using delegate method, get data back from second page view controller and set it to property declared in here
    NSLog(@"This was returned from secondPageViewController: %@",item);
    self.returnedItem=item;

    //add item to array here and call reload
} 
```

现在你有了返回的文本！您可以在第一个视图控制器的 viewDidLoad 中将字符串添加到数组中并调用

```
[self.tableView reloadData]; 
```

它应该可以工作。

# c# - 使用 X509 证书参数初始化 KeyInfo

> ID：14106180
> 
> 赞同：1
> 
> 时间：2012-12-31T21:26:33.890
> 
> 标签：c#, .net, cryptography, rsa, x509certificate

这是 C# 语言的问题。

我在一个 A 类（**称为 sslCert**）中引用了 X509 证书，即我可以访问与 X509 证书关联的各种成员。

另外，我有一个 B 类，具有以下 2 个加密密钥成员 --> **KeyInfo publicKey；KeyInfo 私钥；**

问题是我无法找到使用 X509 中的公钥和私钥值设置这两个值（公钥和私钥）的方法。直接分配不起作用并抱怨数据类型不匹配。

```
B.publicKey = A.sslcertificate.Certificate.PublicKey;
B.privateKey = A.sslcertificate.Certificate.PrivateKey; 
```

我已经尝试了很多，但不知道实现这一目标的确切分配方式是什么。任何人都可以对此有所了解吗？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:16:42.063

这是你想做的吗？不好意思，还在想办法。

```
 using System.Net;
    using System.Security.Cryptography.Xml;
    using System.Security.Cryptography.X509Certificates;

    namespace ConsoleApplication1
    {
        public class A
        {
            private string website = "https://www.chase.com/";
            private X509Certificate m_certificate;

            public X509Certificate Certificate
            {
                get
                {
                    if (m_certificate == null)
                    {
                        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(website);
                        HttpWebResponse response = (HttpWebResponse) request.GetResponse();
                        response.Close();
                        X509Certificate cert = request.ServicePoint.Certificate;
                        m_certificate = cert;
                    }
                    return m_certificate;
                }
            }
            public X509Certificate2 Certificate2
            {
                get
                {
                    return new X509Certificate2(Certificate);
                }
            }
        }

        public class B
        {
            public KeyInfo publicKey { get; set; }
            public KeyInfo privateKey { get; set; }
        }

        class Program
        {
            private static void Main(string[] args)
            {
                A tempA = new A();
                B tempB = new B();

                tempB.privateKey = tempA.Certificate.GetPublicKey(); // fails
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:39:36.703

假设你有证书：

```
X509Certificate2 certificate; 
```

你刚才

```
KeyInfo ki = new KeyInfo();
KeyInfoX509Data keyInfoData = new KeyInfoX509Data( certificate );
ki.AddClause( keyInfoData ); 
```

这会将整个证书存储在密钥信息中。私有部分和公共部分都可以分开存储，您只需使用其他类型的子句初始化 KeyInfo。支持的子句的完整列表：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.keyinfoclause.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.keyinfoclause.aspx)

# xmlhttprequest - Pubnub 和多个 XHR 请求

> ID：14106188
> 
> 赞同：1
> 
> 时间：2012-12-31T21:27:33.767
> 
> 标签：xmlhttprequest, pubnub

我创建了一个带有 pubnub (3.4) 订阅的简单网页，大约每 5 分钟我就会从我的 Chrome 控制台看到一个对 pubnub 的 XHR 请求。这是正确的行为吗？感谢您的任何见解！

```
In doSubscribe 
XHR finished loading: "https://ps3.pubnub.com/time/0". pubnub-3.4.min.js:11
XHR finished loading: "https://ps2.pubnub.com/time/0". pubnub-3.4.min.js:11
XHR finished loading: "https://ps1.pubnub.com/subscribe/demo/xxxxx/0/0?uuid=fb81a2a0-3fdc-4be1-94b2-dd23ce0c4bcd". pubnub-3.4.min.js:11
XHR finished loading: "https://ps1.pubnub.com/subscribe/demo/xxxxx/0/13569794952114592?uuid=fb81a2a0-3fdc-4be1-94b2-dd23ce0c4bcd". pubnub-3.4.min.js:11
XHR finished loading: "https://ps1.pubnub.com/subscribe/demo/xxxxx/0/13569794952114592?uuid=fb81a2a0-3fdc-4be1-94b2-dd23ce0c4bcd". pubnub-3.4.min.js:11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:50:24.480

# 答案：PubNub 和多个 XHR 请求

您显示的这些 5 分钟响应是来自 PubNub Cloud 的 PIN。是的，这是预期的正确行为。阅读下文以了解 PubNub 如何将数据流式传输到您的客户端（如 Google Chrome）。另请参阅[我的应用程序不断收到的空白消息是什么，](https://help.pubnub.com/entries/21119318-what-are-the-blank-messages-my-application-keeps-receiving)以了解更多信息。继续阅读细节：

# PubNub 套接字连接

用于移动和网络浏览器（如 Chrome (webkit)）的 PubNub JavaScript 客户端维护一个套接字连接，该连接将持续**一小时**到**24 小时**，具体取决于网络流量。连接会在**24 小时**后刷新，并会以可靠的数据传送能力自动重新连接（赶上错过的消息）。这是因为 PubNub 为您的客户维护一个云队列，该队列会重新传递任何错过的消息。

# PubNub 掉线连接追赶

PubNub 使用云队列在内存中维护消息，直到数据被传送到您的客户端设备（如 Google Chrome）。因此，如果您断开连接，您仍然会收到在离线状态下发送的数据，一旦连接恢复，您将收到您的消息。

# PubNub XHR Ping 和请求

**在您的 Chrome 开发控制台中，您将每300 秒**（即 5 分钟）看到一次 ping 。这些 ping 是一种[应用层](http://en.wikipedia.org/wiki/Application_layer)传输协议，可确保数据流仍然处于活动状态。这在互联网丢失和恢复的状态下很有帮助。这允许*比*TCP-KeepAlive 更好的连接性和更高的可靠性。在数据传输周期期间，连接状态将如上一节所述保持，连接持续最多 24 小时后被回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:33:28.677

是的，这是预期的，因为 PubNub 使用[HTTP 长轮询](http://www.leggetter.co.uk/real-time-web-technologies-guide/realtime-web-technology-transport-mechanisms#http-long-polling)在客户端和服务器之间进行通信。

# oop - 适用于数独的最佳模式？

> ID：14106191
> 
> 赞同：1
> 
> 时间：2012-12-31T21:28:05.137
> 
> 标签：oop, design-patterns, sudoku

我正在尝试制作数独游戏，并且对插入的每个数字都收集了以下验证：

*   数字必须在 1 到 9 之间；
*   编号在行中必须是唯一的；
*   编号在列中必须是唯一的；
*   子矩阵中的数字必须是唯一的。

由于我重复了太多“数字在...中必须是唯一的”规则，我做了以下设计：

*   组有3种，ColumnGroup、LineGroup、SubMatrixGroup（都实现了GroupInterface）；
*   GroupInterface 有一个方法`public boolean validate(Integer number)`；
*   每个单元格与 3 个组相关，并且在组之间必须是唯一的，如果其中任何一个不评估为 true，则不允许编号；
*   每个单元格都是可观察的，使组成为观察者，对一次单元格更改尝试做出反应。

这很糟糕。我找不到我的设计有什么问题。我只是被它困住了。

关于如何使它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T01:21:25.483

> 它在哪里过度客观化？我也能感觉到，或许还有比这更简单的解决方案……

您可以使用单个函数来完成，而不是拥有 3 个验证器类、一个抽象的 GroupInterface、一个 observable 等。

前面的伪代码：

```
bool setCell(int cellX, int cellY, int cellValue)
{
    m_cells[x][y] = cellValue;
    if (!isRowValid(y) || !isColumnValid(x) || !isSubMatrixValid(x, y))
    {
        m_cells[x][y] = null; // or 0 or however you represent an empty cell
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:30:49.273

What is the difference between a ColumnGroup, LineGroup and SubMatrixGroup? IMO, these three should simply be instances of a generic "Group" type, as the type of the group changes nothing - it doesn't even need to be noted.

It sounds like you want to create a checker ("user attempted to write number X"), not a solver. For this, your observable pattern sounds OK (with the change mentioned above).

[Here (link)](http://pastebin.com/gwkxWWfb) is an example of a simple sudoku solver using the above-mentioned "group" approach.

# objective-c - Objective-c 参数变量 - 颜色为红色

> ID：14106192
> 
> 赞同：1
> 
> 时间：2012-12-31T21:28:20.960
> 
> 标签：objective-c, xcode4

在 xcode 中使用以下内容时：

```
friend:(NSString*)friend 
```

朋友是红色的，例如（id）是红色的-朋友是保留字还是什么？

它工作正常，只是编辑器将其显示为红色？![在此处输入图像描述](../Images/baf83673992b17c26eecb8911623a8d8.png)

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T21:31:30.903

XCode 也是 C 和 C++ 的编辑器；在 C++ 中，friend 是一个有效的关键字。

值得一提的是，您可以在 Objective-C 项目中拥有 C++ 类。

# css - 使用 CSS3，95% 透明的纯黑色背景？

> ID：14106193
> 
> 赞同：2
> 
> 时间：2012-12-31T21:28:36.530
> 
> 标签：css

使用 CSS3，为了实现 95% 透明的纯黑色背景，应该用什么类似 RGB 的值替换下面的 VALUE？

```
div { background: VALUE } 
```

谢谢各位！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:31:19.393

RGBa（a 表示 alpha）

```
div { background: rgba(0, 0, 0, .05)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:15:10.780

伙计们，我在网上进行了挑战测试，以下是他们对我上面的问题提供的答案：

```
div { background:rgba(0, 0, 0, 0.05); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T21:33:21.997

RGBa，我认为：

```
div {
background:rgba(0, 0, 0, 0.95);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T21:37:31.680

您可以使用 RGBA 表示法。R 代表红色，G 代表绿色，B 代表蓝色，A 代表 aplha（透明度百分比，如您所问）。

所以最好的答案是：

```
div {
    background : rgba(0, 0, 0, .95);
} 
```

不用担心，所有主流浏览器都支持它（甚至 IE 9 之后的 IE）：[http ://caniuse.com/css3-colors](http://caniuse.com/css3-colors)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T19:26:30.967

为了检查，我在我的系统上进行了测试，@Blingue 绝对正确。使用 div {背景：rgba(0,0,0,0.05)}

# file - 批处理文件问题 - 嵌套/分支 'IF' 语句

> ID：14106195
> 
> 赞同：1
> 
> 时间：2012-12-31T21:28:45.233
> 
> 标签：file, if-statement, batch-file, nested, branch

我试图让它工作，但显然 Windows 不喜欢它。一旦它到达我的批处理文件的这一部分，.bat 就会关闭。

```
if %UserName% = Semedar (
    if %UserName% 1394677 (
        set administrator=true
    )
)

if %administrator% == "true" (
    echo This shows up for the admin
) Else (
    echo otherwise if %UserName% doesn't equal "Semedar" or "1394677" this shows up.
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:51:19.293

您需要在 if 语句中使用比较运算符（前两个 if 中缺少这些运算符）。 `EQU`或者`==` 您也将管理员设置为`true`但将其与`"true"`不同的比较。

请注意，批处理文件对空间非常敏感，因此最好将您的比较用引号括起来，因为 Windows 用户名可能包含空格。您的意思是说如果用户名是 Semedar 或 1394677 则将管理员设置为 true？因为使用嵌套的 if 语句，它会检查 UserName 是否等于两者。

```
if "%UserName%" EQU "Semedar" set "administrator=true"
if "%UserName%" EQU "1394677" set "administrator=true"

if "%administrator%" EQU "true" (
    echo This shows up for the admin
) Else (
    echo otherwise if %UserName% doesn't equal "Semedar" or "1394677" this shows up.
) 
```

# javascript - Phonegap GeoLocation - 频率选项

> ID：14106197
> 
> 赞同：1
> 
> 时间：2012-12-31T21:29:28.710
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在开发一个应用程序，我需要允许用户自己更改位置更新的频率，而不是对其进行硬编码。

以下是我尝试过的方法，但由于某种原因出现超时错误。有没有人遇到过类似的情况？或者也许我在下面的代码中有问题？

```
watchID = navigator.geolocation.watchPosition(win, fail, { maximumAge: 10000, timeout: (parseFloat(userfreq)*1000), enableHighAccuracy: true }); 
```

userfreq 是从数据库加载的值，是以秒为单位的值，例如 0.25 秒。因此，我将它乘以 1000 以将其更改为毫秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:36:18.173

如果您遇到`Timeout expired`位置错误，要么 watchPosition 被多次调用（使用相同的变量），要么 watchPosition 在其他地方被多次调用，带有另一个变量。

检查前两个屏幕截图，如果使用相同的变量或不同的变量调用两次 watchPosition，则会引发错误。 ![在此处输入图像描述](../Images/e09c8585a200b3c76acadd43a0e3fc2e.png)

![在此处输入图像描述](../Images/be7db68a7a2b220fae2e170218914ec0.png)

要解决此问题，请使用`clearWatch`该变量。

下面的屏幕截图显示了之后的地理定位结果`clearWatch` ![在此处输入图像描述](../Images/e6cc8c3e1786391758c680c68ab78166.png)

# php - 使在一个函数中定义的数组键可用于第二个函数

> ID：14106203
> 
> 赞同：1
> 
> 时间：2012-12-31T21:29:59.410
> 
> 标签：php, arrays, function, global

似乎无法完成这项工作。

我想让下面的数组可用于第二个函数，但它总是空的

主要代码是这样的：

```
function GenerateSitemap($params = array()) {          

$array = extract(shortcode_atts(array(                         
'title' => 'Site map',                         
'id'    => 'sitemap',                         
'depth' => 2                         
), $params));                                  

global $array; 

}  

function secondfunction()

{
global $array; 

print $title;

// this function throws an error and can't access the $title key from the first function
}

GenerateSitemap()

secondfunction() 
```

我想在第二个函数中使用**title**、**id**或**depth** KEYS。他们只是空出来并抛出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:36:10.377

“变量的范围是定义它的上下文。”

[http://us3.php.net/language.variables.scope.php](http://us3.php.net/language.variables.scope.php)

您需要在函数外部定义变量（至少最初是）：

```
 $array = array();

    function GenerateSitemap($params = array()) {          
       global $array; 
       $array = extract(shortcode_atts(array(                         
          'title' => 'Site map',                         
         'id'    => 'sitemap',                         
         'depth' => 2                         
      ), $params));                                  
   }  

   function SecondFunction() {          
       global $array; 
       ...
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:44:24.650

您需要像`global`在函数中使用它之前一样声明该变量，否则它将隐式创建一个局部变量。

```
function myFunc() {
    global $myVar;
    $myVar = 'Hello World';
}

myFunc();
print_r($myVar);    // 'Hello World' 
```

您实际上不必最初在全局范围内声明它，您不会收到通知/警告/错误，尽管这样做显然是一种好习惯。（尽管如果以良好的实践为目标，那么您可能不应该一开始就使用全局变量。）

# asp.net - 在数据库或文件中保存长细节？

> ID：14106205
> 
> 赞同：4
> 
> 时间：2012-12-31T21:30:13.593
> 
> 标签：asp.net, sql, sql-server, file

在和上开发`asp.net`网站。当我的管理员成员从**[HTMLEditorExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx)**保存有关项目的详细信息时，我在哪里保存它？`.NET Framework 4.0``SQL SERVER 2008`

*   我可以保存这个`Database`吗？（varchar 有 8000 个字符）细节可能很大。
*   或在`File`？

最佳做法是什么？
现在我保存它是`Files`因为`SQL Hosting`数据库空间比`Disk space`.
如果我将其保存在`File`然后如何取回格式化数据（带有图片和链接）？

请给我最好的路径。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T21:31:27.553

您可以使用`VARCHAR(MAX)`而不是`VARCHAR(8000)`- 它可以容纳大约 2GB 的数据。

但是，如果您要保存 HTML，请考虑使用`NVARCHAR(MAX)`如果发布的数据可能包含 Unicode 字符（想想国际观众）。

微软研究有一个很好的白皮书，关于在数据库中存储文件和从数据库中存储文件，这可以很好地阅读[——To Blob or not to Blob](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)。

# c++ - 为什么一行中的多个作业被认为是不好的风格？

> ID：14106210
> 
> 赞同：24
> 
> 时间：2012-12-31T21:31:27.040
> 
> 标签：c++, operators

在 C++ 中，您可以通过这样做来进行多重赋值

```
x = y = z = 10; 
```

然而很多人告诉我这是一种糟糕的风格，我不应该在没有给我理由的情况下使用它。

有人可以向我解释为什么这被认为是一种不好的风格吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-31T22:00:18.137

试试这些定义：

```
int x;
bool y;
int z;
x = y = z = 10; 
```

并对 x 的值感到惊讶。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-31T21:49:07.740

这并不是天生不好的风格，但是您通常可以通过每行只执行一个赋值并让编译器优化器整理出来来使代码更清晰。如果您使用多重赋值样式，那么有时可能不清楚`x = y = z = 10;`是故意的还是类似`x = y = z + 10;`. 通过始终将自己限制为每个语句一个作业，您可以在出现拼写错误时变得明显。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-31T21:59:51.553

只要您知道它们都应该是相同的值，就没有问题。

例如

改变

```
x = y = z = 10; 
```

到

```
x = y = z = 15; 
```

很容易。

但是，如果它们任意相同，则单独的分配可以传达这一点，并且更容易单独更改以进行测试。

```
x = 10;
y = 10;
z = 10; 
```

到

```
x = 10;
y = 15;
z = 10; 
```

总比不得不拆线好。

关键是你告诉下一个程序员看看代码（或者你自己在 6 个月后）。

# osx-mountain-lion - 编辑了主机文件，现在本地主机不起作用

> ID：14106223
> 
> 赞同：0
> 
> 时间：2012-12-31T21:34:26.320
> 
> 标签：osx-mountain-lion, hosts

所以我试图在我的主机文件中添加一个条目，以便我的测试环境位于 local.domain.com 而不是 localhost。

现在我进行了编辑，没有任何工作，包括 localhost。我在某处读到它与在某些程序中编辑它有关，它给出了奇怪的错误，所以在其他东西中打开它并保存它。我试过了，仍然没有。

有什么办法可以“重置”这个文件吗？或者任何人有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:37:56.093

你试过这个吗：

```
127.0.0.1       localhost
::1             localhost 
```

# c++ - 在特定功能上测量新/旧代码 CPU 使用率

> ID：14106225
> 
> 赞同：0
> 
> 时间：2012-12-31T21:34:47.510
> 
> 标签：c++, windows, function, timer, profile

长话短说，我正在重新编写一个非常消耗 CPU 的应用程序，打算以一种完全不同的方式对其进行重组，并改变它的很多内部工作方式。我一直在寻找一种比较新旧结果的好方法。

假设我从改变函数的`foo()`工作方式开始：

我想让程序运行 60 秒，并测量该函数在程序的总 CPU 使用率中使用的 CPU 百分比。如果它是恒定的 25%，我想知道这 25% 中有多少是我的功能。然后我改代码后测试，有两个很好的指标说明我是否有很好的改进。

我已经尝试过[非常困](http://www.codersnotes.com/sleepy)，但我无法访问我想要访问的功能；他们没有表现出来。我希望能够看到使用库函数 (SDL) 的我自己编码的函数的使用百分比，但它只会显示 SDL 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:54:02.277

有几种不同的方法，其中一种是在函数的开始和结束处简单地添加一个高精度计时器调用。根据对函数的调用次数，您可以累积时间，例如：

```
 typedef type_of_time_source tt;
 tt total = 0;

 void my_func(....)
 {
     tt time = gettime();

     ... lots of your code ... 

     time = gettime() - time;
     total += time;
 } 
```

或者您可以存储各个间隔，例如

```
 tt array[LARGE_NUMBER];
 int index = 0;

 ... same code as above ... 
     time = gettime() - time;
     if (index >= LARGE_NUMBER) index = 0; // [or LARGE_NUMBER-1?]
     array[index++] = time; 
```

当然，如果您对 SDL 的调用是在您的函数中间进行的，那么您需要在那个时候以一种或另一种方式打折。

另一种方法是测量几个函数的单独时间：

```
 enum {
     FUNCA,
     FUNCB,
     ....
     MAX_TIMINGS
}

struct timing_val
{
    tt start, end;
    char *name;
}
struct timing_val timing_values[MAX_TIMINGS];

#define START(f)   do { timing_values[f].name = #f; timing_values[f].start = gettime(); } while (0);
#define END(f)  do { timing_values[f].end = gettime(); } while(0);

void report()
{
     for(int i = 0; i < MAX_TIMING; i++)
     {
           if (timing_values[i].start == 0 && timing_vlaues[i].end
                cout << timing_values[i].name <<< " time = " << 
                     timing_values[i].end - timing_values[i].start << endl;
     }
}

void big_function()
{
    START(FUNCA);
    funca();
    END(FUNCA);
    START(FUNCB);
    funcb();
    END(FUNCB)

    ... 

    report();
} 
```

我当然已经使用了所有这些函数，并且由于函数相当大，所以长时间运行，它不应该增加太多开销。

您也可以一次测量多个函数，例如，如果我们想要拥有整个函数，我们可以将枚举“BIG_FUNC”添加到上面的枚举列表中，然后执行以下操作：

```
void big_function()
{
    START(BIG_FUNCTION);
    START(FUNCA);
    funca();
    END(FUNCA);
    START(FUNCB);
    funcb();
    END(FUNCB)

    ... 
    END(BIG_FUNCTION);
    report();
} 
```

# php - CakePHP 2.2.3 - 调试“第 0 行未知内存耗尽”错误

> ID：14106226
> 
> 赞同：1
> 
> 时间：2012-12-31T21:35:12.867
> 
> 标签：php, cakephp

我有一个 CakePHP 2.2.3 应用程序，它在我们的开发服务器上运行得非常好，这是一个来自 Turnkey Linux 的 Debian Squeeze LAMP 盒子。我们正在为我们的生产服务器使用 InMotion 托管，并且将我们的代码移至该服务器是非常糟糕的。

在一个页面上测试 AJAX 功能时，我们得到了非常无用的：

**致命错误：第 0 行的 Unknown 中允许的内存大小为 268435456 字节已用尽（尝试分配 389245600 字节）**

**tl；博士：我正在寻找有关如何调试此问题的建议**

我的第一个行动方案是将控制器功能中的所有代码精简到最低限度。我的一个控制器的 index() 操作包含一行代码，但每次执行仍然以某种方式设法超过 256mb 的内存：

```
$this->autoRender = false; 
```

为了将上述观点发挥到极致，我注释掉了产生此错误的模型和控制器的每一行。仍然内存不足。其他几个发出 MySQL 数据库请求的页面也显示此“内存耗尽”错误，尽管它们已完全加载。其他页面，内存错误更像是一个显示停止器并完全阻止执行。

我已经尝试将内存限制从 256 提高到 512 甚至 1024mb，这一切都是为了抑制错误消息本身。该页面不路由/渲染或做任何事情，它只是默默地失败。

[在另一篇 SO 帖子的建议下，我尝试将 Debug 从 2 变为 0，这也对解决问题没有任何帮助。](https://stackoverflow.com/questions/13115041/fatal-error-allowed-memory-size-of-268435456-bytes-exhausted-cakephp)

我们的生产服务器上没有安装 XDebug，所以我不知道应该如何为我们的网络主机跟踪问题以解决问题。

我们使用的 VPS 是运行 Apache 2.2.23、MySQL 5.3.18 和 CakePHP 2.2.3 的 CentOS 5.8 服务器

我们的虚拟主机不能或不会提供有关该主题的任何进一步信息。他们建议我们“问问 Cake 开发者他们以前是否见过这样的东西”，我觉得这是一种非常懦弱的方式来解决问题。我希望 SO 上的某个人之前已经看到过类似的问题，并且可能能够提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:12:32.543

我以前见过这个问题，可能是因为你没有使用 Containable 行为。在我学会设置`$recursive = -1`AppModel（或您正在使用的任何模型）之前，这种情况发生在我身上很多次。除非您有意管理每页的大量信息，否则您应该限制检索的数据。结合使用可[包含行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)和`$recursive`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T01:13:56.757

只是一个提示：这可能是一个会话问题。如果你在 $_SESSION 中存储太多，session_start() 可以做这样的事情，因为它必须读取你存储的所有内容。试试这个：

$_SESSION = 数组（）；

如果这有帮助，你会发现其余的。

# python - 哪个是最好和最简单的 Python GUI 工具包？

> ID：14106229
> 
> 赞同：6
> 
> 时间：2012-12-31T21:35:42.363
> 
> 标签：python, python-2.7, user-interface

我发现了一些 Python GUI 工具包。我喜欢的有：

1.  wxPython
2.  pyGTK
3.  特金特
4.  pyQt
5.  pySide

哪一个是最好的和最容易使用的？顺便说一句，pyQt 和 pySide 有什么区别？他们似乎都很相似：/。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:42:24.663

没有“最好”，也没有“最简单”。您提到的所有工具包都有优点和缺点。我在 wxPython 和 Tkinter 方面有丰富的经验，两者都很好。我想说 Tkinter 更简单一点，wxPython 功能更全。

当有人问我这个问题时，我告诉他们只选择一个。一旦你学会了一种——任何一种——你就可以更好地自己决定哪一种比其他的更好。

我推荐 Tkinter 只是因为您可能已经拥有它，但如果您不害怕安装其他 GUI 工具包，请选择其中任何一个并开始编码。

# asp.net-mvc-4 - 在 MVC 4 中实现角色时出错

> ID：14106230
> 
> 赞同：2
> 
> 时间：2012-12-31T21:36:08.293
> 
> 标签：asp.net-mvc-4, membership

我正在尝试将用户注册到角色，但出现以下错误：

```
No user found was found that has the name "MyName" 
```

我使用默认模板创建了一个 MVC 4 应用程序。

我创建了一个自定义成员资格提供程序并实现了 CreateUser 方法，如下所示

```
public User CreateUser(User i_userToCreate)
    {

        using (var _db = new Repository())
        {

           User _user = _db.CreateUser(i_userToCreate);
           MembershipUser _membershipUser = new MembershipUser(providerName: "ATWMembershipProvider",
           name: _user.UserName,
           providerUserKey: null,
           email: _user.Email,
           passwordQuestion: "",
           comment: "",
           isApproved: true,
           isLockedOut: false,
           creationDate: DateTime.UtcNow,
           lastLoginDate: DateTime.UtcNow,
           lastActivityDate: DateTime.UtcNow,
           lastPasswordChangedDate: DateTime.UtcNow,
           lastLockoutDate: DateTime.UtcNow);

           return _user;
        } 
```

这就是我配置 web.config 的方式

```
<appSettings>
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false"/>
</appSettings>
<system.web>
<membership defaultProvider="ATWMembershipProvider">
  <providers>
    <clear/>
    <add name="ATWMembershipProvider" type="AroundTheWorld.Infrastructure.ATWMembershipProvider"
         enablePasswordRetrieval="false"
         ConnetionStringName="Context"
         enablePasswordReset="true"
         requiresQuestionAndAnswer="false"
         equiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5"
         minRequiredPasswordLength="6"
         minRequiredNonalphanumericCharacters="0"
         passwordAttemptWindow="10" applicationName="myApplication" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider">
  <providers>
    <remove name="AspNetSqlRoleProvider" />
    <add name="AspNetSqlRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <!-- note: WebMatrix registers SimpleRoleProvider with name
     'AspNetSqlRoleProvider'. I don't know why but i kept it. -->
  </providers>
</roleManager> 
```

现在验证方法如下：

```
 var MembershipProvider = new ATWMembershipProvider();
            User authentictedUser = MembershipProvider.CreateUser(_userToCreate);

            FormsAuthentication.SetAuthCookie(authentictedUser.UserName, true);
            System.Web.Security.Roles.AddUserToRole(authentictedUser.UserName, authentictedUser.Role.Name);
            Session.Add("UserID", authentictedUser.ID);
            Session.Add("UserName", authentictedUser.UserName); 
```

我已经检查了以下内容：

1.  我的用户作为所有必要信息
2.  我在 App_start "user" , "admin" 中注册了两个角色

但我仍然收到一个错误，即未找到名为“MyName”的用户

在不需要基于角色保护文件夹的 asp Web 表单中

我要做的就是将控制器内的动作保护到特定的“角色”

```
[Authorize(Roles = "admin")]
    public ActionResult GetAllLocations()
    {
        using (var _db = new Repository())
        {
            return View(_db.GetLocations());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T10:18:52.113

我已经解决了问题...

问题是因为我只实现了一个没有角色提供者的自定义成员资格提供者。

我已经关注了这个[博客](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)。

基本上我创建了一个类`MyOwnRoleProvider`，它继承自`RoleProvider` 并且：

1.  实现了调用的方法`GetRolesForUser`
2.  实现了调用的方法`GetUsersInRole`

最后我将我的 web.config 修改为

```
<roleManager defaultProvider="ATWRoleProvider" enabled="true" cacheRolesInCookie="true">
  <providers>
    <clear />
    <add name="ATWRoleProvider" type="AroundTheWorld.Infrastructure.ATWRoleProvider, AroundTheWorld" connectionStringName="Context" />
  </providers>
</roleManager> 
```

之后我可以使用以下内容

```
[Authorize(Roles="admin")]
public ActionResult GetAllLocations()
{
  using (var _db = new Repository())
  {
    return View(_db.GetLocations());
  }
} 
```

和

```
@if (User.IsInRole("user")) 
```

我希望它对某人有帮助......

# c# - 使两个按钮的宽度相等

> ID：14106236
> 
> 赞同：3
> 
> 时间：2012-12-31T21:36:47.747
> 
> 标签：c#, .net, wpf, vb.net, xaml

我有以下内容：

```
<DockPanel Height="25" HorizontalAlignment="Stretch">
    <Button Content="Add" x:Name="bAdd" DockPanel.Dock="Left" />
    <Button Content="Remove" x:Name="bRemove" DockPanel.Dock="Right" />
</DockPanel> 
```

有人可以建议我如何在不`Width`手动设置按钮属性的情况下使两个按钮的宽度相等吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T21:42:34.820

如果您绝对不想设置`Width`属性，则可以使用`Grid`：

```
<Grid Height="25" HorizontalAlignment="Stretch">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Button Grid.Column="0" Content="Add" x:Name="bAdd" />
    <Button Grid.Column="1" Content="Remove" x:Name="bRemove" />
</Grid> 
```

他们都会有同样的`Width`方式

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-06T12:31:29.187

```
<UniformGrid Columns="2">
 <Button Content="Ok" Grid.Column="0"/>
 <Button Content="Cancel" Grid.Column="1"/>
</UniformGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-10T01:41:29.840

除了@Amir 的答案之外，您还可以通过绑定可见性来动态控制按钮的数量。

```
<UniformGrid Rows="1">
 <Button Content="Ok" Visiblity="{Binding IsShowOkayButton, Converter={...}"/>
 <Button Content="Cancel" Visiblity="{Binding IsShowCancelButton, Converter={...}}"/>
</UniformGrid> 
```

与枚举一起使用：（假设 ConfirmType 和 IsShowCancelButton 在同一个 ViewModel 中）

```
public enum ConfirmType { Confirm, ConfirmOrCancel }

public ConfirmType ConfirmType { get => _ConfirmType; 
            set {
                switch (_ConfirmType)
                {
                    case ConfirmType.Confirm:
                        IsShowCancelButton = false;
                        break;
                    case ConfirmType.ConfirmOrCancel:
                        IsShowCancelButton = true;
                        break;
                }
                // Your RaisePropertyChanged code here
            }
        } 
```

# java - 如何将命名参数与 CONTAINS 一起使用

> ID：14106239
> 
> 赞同：0
> 
> 时间：2012-12-31T21:37:00.220
> 
> 标签：java, hibernate

我想像这样使用带有 CONTAINS 的命名参数：

```
select p from person p
where CONTAINS(p.name , :myName)

String myName = "Bob Jones";
q.setString("myName", "*" + myName + "*"); 
```

它不起作用，错误：

```
org.hibernate.exception.GenericJDBCException: could not execute query
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2536)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
Caused by: java.sql.SQLException: Erreur de syntaxe près de 'Jones*' dans la condition de recherche en texte intégral '*Bob Jones*'.
    at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)
    at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
    at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:632)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:477)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:778)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    ... 8 more 
```

我用hibernate 3.6 应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:54:44.367

我假设您使用的是 SQL Server。那么您的查询包含与 Hibernate 或 Java 无关的问题。这只是关于 CONTAINS 运算符的语法。只需使用任何可以直接查询数据库的工具尝试一下。

如果要查询两个单词，语法为以下之一：

```
select * from person where contains(name, 'Bob AND Jones');
select * from person where contains(name, 'Bob OR Jones');
select * from person where contains(name, '"Bob Jones"'); 
```

如果您还想查询前缀，它是：

```
select * from person where contains(name, 'Bob* AND Jones*');
select * from person where contains(name, 'Bob* OR Jones*');
select * from person where contains(name, '"Bob Jones*"'); 
```

您不能将星号放在单词或短语的前面。

我建议您查看[CONTAINS 运算符](http://msdn.microsoft.com/en-us/library/ms187787.aspx)的描述。

**更新：**

谢谢你的评论。如果您查看旧代码，您会注意到包含在 CONTAINS 的第二个参数中的额外双引号，类似于我的第三个也是最后一个示例。这就是您当前代码中缺少的内容。所以要修复它：

```
String myName = "Bob Jones";
q.setString("myName", "\"*" + myName + "*\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:43:56.343

您可能想尝试使用 like 而不是 contains。

```
from Person p where p.name like :myName 
```

然后当你执行查询

```
List<User> userList = query.setParameter("myName", "%" + name+ "%").list(); 
```

# salesforce - 您可以强制刷新令牌在 Salesforce 中过期吗？

> ID：14106240
> 
> 赞同：3
> 
> 时间：2012-12-31T21:37:03.707
> 
> 标签：salesforce, oauth-2.0

我有一个通过远程访问应用程序使用 Salesforce 服务的应用程序。到目前为止，这工作正常。

但是，我的理解是，即使是刷新令牌最终也会过期，我相信会作为 404（？）的一部分返回以下内容：

```
"error_description":"expired access/refresh token" 
```

我的问题是：测试这种情况的最佳实践是什么？我显然知道正常的刷新令牌流程工作正常，但我如何适当地测试否定结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:49:08.550

您可以登录 Web 界面并转到设置 -> 我的个人信息。此页面上的相关列表之一称为远程访问，您可以在此处查看哪些刷新令牌存在问题，并撤销其中任何一个。

![在此处输入图像描述](../Images/a6fd401bdda47221755c972da4ab916d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T17:28:21.037

Go To the Setup and search for the apps ->Go to the connected apps under the managed apps ->select your app, there you can see the edit policies ->click on edit policies -> check for the refresh token policies under OAuth policies

# java - ExpandableListView OnChildClickListener 不起作用

> ID：14106244
> 
> 赞同：2
> 
> 时间：2012-12-31T21:37:41.667
> 
> 标签：java, android, expandablelistview

**适配器**

```
 public class ExpandableListAdapter extends BaseExpandableListAdapter {

     private Context mContext;
     private ExpandableListView mExpandableListView;
     private List <Grupe> mGroupCollection;
     private int[] groupStatus;

     public ExpandableListAdapter() {}
     public ExpandableListAdapter(Context pContext,
         ExpandableListView pExpandableListView,
         List <Grupe> pGroupCollection) {
         mContext = pContext;
         mGroupCollection = pGroupCollection;
         mExpandableListView = pExpandableListView;
         groupStatus = new int[mGroupCollection.size()];

         setListEvent();
     }

     private void setListEvent() {

         mExpandableListView
             .setOnGroupExpandListener(new OnGroupExpandListener() {
                 @Override
                 public void onGroupExpand(int arg0) {
                     groupStatus[arg0] = 1;
                 }
             });

         mExpandableListView
             .setOnGroupCollapseListener(new OnGroupCollapseListener() {
                 @Override
                 public void onGroupCollapse(int arg0) {
                     groupStatus[arg0] = 0;
                 }
             });
     }

     @Override
     public String getChild(int arg0, int arg1) {
         return mGroupCollection.get(arg0).getChildren().get(arg0).getPrimaoc_Poruke();
     }

     @Override
     public long getChildId(int arg0, int arg1) {
         return 0;
     }

     @Override
     public View getChildView(int arg0, int arg1, boolean arg2, View arg3,
         ViewGroup arg4) {

         ChildHolder childHolder;
         if (arg3 == null) {
             arg3 = LayoutInflater.from(mContext).inflate(
                 R.layout.list_group_item, null);

             childHolder = new ChildHolder();

             childHolder.title = (TextView) arg3.findViewById(R.id.item_title);
             arg3.setTag(childHolder);
         } else {
             childHolder = (ChildHolder) arg3.getTag();
         }

         childHolder.title.setText(mGroupCollection.get(arg0).getChildren().get(arg1).getPrimaoc_Poruke());
         return arg3;
     }

     @Override
     public int getChildrenCount(int arg0) {
         return mGroupCollection.get(arg0).getChildren().size();
     }

     @Override
     public Object getGroup(int arg0) {
         return mGroupCollection.get(arg0);
     }

     @Override
     public int getGroupCount() {
         return mGroupCollection.size();
     }

     @Override
     public long getGroupId(int arg0) {
         return arg0;
     }

     @Override
     public View getGroupView(int arg0, boolean arg1, View arg2, ViewGroup arg3) {

         GroupHolder groupHolder;
         if (arg2 == null) {
             arg2 = LayoutInflater.from(mContext).inflate(R.layout.list_group, null);
             groupHolder = new GroupHolder();
             groupHolder.img = (ImageView) arg2.findViewById(R.id.tag_img);
             groupHolder.title = (TextView) arg2.findViewById(R.id.group_title);
             arg2.setTag(groupHolder);
         } else {
             groupHolder = (GroupHolder) arg2.getTag();
         }

         if (groupStatus[arg0] == 0) {
             groupHolder.img.setImageResource(R.drawable.group_down);
         } else {
             groupHolder.img.setImageResource(R.drawable.group_up);
         }

         groupHolder.title.setText(mGroupCollection.get(arg0).getTip());

         return arg2;
     }

     class GroupHolder {
         ImageView img;
         TextView title;
     }

     class ChildHolder {
         TextView title;
     }

     @Override
     public boolean hasStableIds() {
         return true;
     }

     @Override
     public boolean isChildSelectable(int arg0, int arg1) {
         return true;
     }
 } 
```

**主要活动**

```
 public class Glavna extends Activity implements OnClickListener, OnChildClickListener {

     private List <Grupe> mGroupCollection;
     private ExpandableListView mExpandableListView;
     private ExpandableListAdapter adapter = null;

     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_glavna);
         prepareResource();
         initPage();
     }

     private void initPage() {
         mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView1);
         adapter = new ExpandableListAdapter(this,mExpandableListView, mGroupCollection);
         mExpandableListView.setAdapter(adapter);
         mExpandableListView.setOnChildClickListener(this);

     }

     private void prepareResource() {
         mGroupCollection = new ArrayList <Grupe> ();
         ge.setTip("Online korisnici");
         mGroupCollection.add(ge);

         AktivniChat gi = new AktivniChat(1, "receiver 1", new Korisnik(1, "sender1"));
         mGroupCollection.get(0).setAktivniChat(gi);
     }

     @Override
     public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
         return true;
     }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T08:44:39.940

在所有元素上设置 **android:focusable="false" 。**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false"
    android:paddingTop="5dip" 
    android:focusable="false">

    <LinearLayout
        android:id="@+id/groupItem"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#FFF385"
        android:clickable="false" 
        android:focusable="false">

        <TextView
            android:id="@+id/item_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FF84"
            android:clickable="false"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="sample"
            android:textColor="#000000"
            android:textSize="20sp" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T12:49:39.570

不要忘记启用子 Selectable 属性..

```
@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:23:10.327

它也对我有用......布局中的所有项目（孩子的）必须设置为focusable =“false”和clickable =“false”。但是，如果您在子布局中有按钮，这将不起作用。

# c++ - 如何使用 tinyxml2 解析空元素？

> ID：14106246
> 
> 赞同：4
> 
> 时间：2012-12-31T21:37:53.933
> 
> 标签：c++, tinyxml2

使用 tinyXml2，我可以解析

```
<MSG_TIME>2010-07-01 14:28:20</MSG_TIME>
```

很好，但是

```
<MSG_TIME></MSG_TIME>
```

和

```
<MSG_TIME/>
```

当它们是完全有效的 XML（据我所知）时，两者都会在 C++ 中引发异常。有没有人对此有修复或建议？我不控制这个 XML 的来源，我需要有容错性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-27T02:32:05.427

此答案假定您正在尝试使用空元素加载有效的 XML。

`XMLElement::GetText()`如果元素为空，则返回`nullptr`，因此您可以像这样进行简单的检查：

```
std::string szData;

// Get the element
XMLElement pElement = xmlDoc.FirstChildElement("MyElement");

// Check whether the element contains data & if so, extract it as text
if (pElement->GetText() != nullptr) szData = poElement->GetText(); 
```

这个问题实际上指出了我几个月前写的[TinyXML2 教程的一个错误，所以感谢发布它！](http://shilohjames.wordpress.com/tag/tinyxml2/):)

# node.js - ExpressJS 中的 Yeoman

> ID：14106248
> 
> 赞同：24
> 
> 时间：2012-12-31T21:38:30.817
> 
> 标签：node.js, angularjs, express, yeoman

我仍然想尝试使用 Yeoman 和 Express 运行示例。

我尝试了以下方法，它“正常”工作，但我被困在合并路线上。（为了可读性而过度简化）

```
mkdir test
cd test
express
mkdir app
cd app
mkdir js
cd js
yeoman angular 
```

然后我在 Gruntfile.js 中将“output:dist”更改为“output:../../public”

现在，两个服务器都可以自己运行（例如 yeoman 服务器和节点 app.js）。我现在也可以运行“yeoman build”，将缩小的 JS 输出到 express 应用程序中的 /public。

我对路线如何合并有点模糊？我想/拉起 Angular 路线而不是 express 路线等。github 上的 angular-express-seed 示例看起来不错，但我仍然希望 Yeoman 集成到项目中。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-01T16:31:16.047

我会为 yeoman + expressjs 推荐这种结构：

```
mkdir app
cd app
yeoman angular
express . 
```

所以你的目录树应该是这样的：

```
.
├── app
│   ├── 404.html
│   ├── favicon.ico
│   ├── index.html
│   ├── robots.txt
│   ├── scripts
│   │   ├── controllers
│   │   │   └── main.js
│   │   ├── vendor
│   │   │   ├── angular.js
│   │   │   ├── angular.min.js
│   │   │   ├── es5-shim.min.js
│   │   │   └── json3.min.js
│   │   └── yeoman-test.js
│   ├── styles
│   │   └── main.css
│   └── views
│       └── main.html
├── app.js
├── Gruntfile.js
├── package.json
├── public
│   ├── images
│   ├── javascripts
│   └── stylesheets
│       └── style.css
├── routes
│   ├── index.js
│   └── user.js
├── test
│   ├── lib
│   │   └── angular-mocks.js
│   └── spec
│       └── controllers
│           └── main.js
├── testacular.conf.js
└── views
    ├── index.jade
    └── layout.jade 
```

您可以删除现在冗余的`public`目录（我们将改为从中提供服务`app`）：

```
rm -rf public 
```

现在`app.js`，您需要更改从哪个目录提供静态文件。更改此行：

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

对此：

```
app.use(express.static(path.join(__dirname, 'app'))); 
```

这应该是关于它的。需要注意的是，您现在有两个“索引”文件——一个在 中`views/index.jade`，另一个在`app/index.html`. 删除`app/index.html`当前中断的 yeoman，所以我的建议是摆脱路线`app/index.jade`并仅对`index.html`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T14:06:57.090

这是另一个略有不同的设置

```
yo angular 
```

更新 Gruntfile.js 以将配置从“app”更改为“public”。

然后做

```
express . 
```

打开 app.js 并确保没有像这样的路由映射 app.get('/', routes.index); 这样节点服务器实际上会提供 index.html，与运行“grunt server”时加载的文件相同。

现在继续删除公共目录，然后将应用程序目录移动到公共

```
rm -rf public
mv app public 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-20T14:00:52.017

这个项目似乎涵盖了所有要求（甚至对 MongoDB 有可选支持）：[https ://github.com/DaftMonk/generator-angular-fullstack](https://github.com/DaftMonk/generator-angular-fullstack)

我刚刚在本地尝试过，它可以工作：

```
npm install -g generator-angular-fullstack

yo angular-fullstack [appname] 
```

有关更多信息，请参阅 GitHub 页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T22:32:32.847

如果我有名声，我会评论@btford 的答案 -

只是想添加，`express .`之后安装`yo angular`将覆盖 grunt-created package.json 文件，这将破坏 grunt，正如@jjperezaguinaga 报告的那样。

确保在安装前保存 package.json 的副本`express .`。然后在原来的 package.json 中添加如下依赖：

```
"dependencies" : { 
  "express": "3.3.4",
  "jade": "*"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T07:07:06.867

我在使用这个解决方案时遇到了问题：express 仍然尝试加载 index.jade 而不是 index.html，但是如果我输入 localhost:3000/index.html express 渲染正确。我解决了从 app.js 中删除这一行的问题：

```
//app.get('/', routes.index); 
```

希望这可以帮助。谢谢分享，D。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T02:28:00.417

这是其他人之前建议的步骤的汇编，但都是在一个编号的步骤中。这是基于版本：Yeoman 1.0.4 和 Express 3.3.8。

1）创建您的项目目录并 cd 进入它

2）安装角度：

```
yo angular 
```

（如果您没有以 su 身份登录，则需要运行接下来的两行）

```
bower install
sudo npm install 
```

3) 将 package.json 重命名为 package_yo.json （这样它就不会被 express 版本的 package.json 覆盖）

4) 安装 Express express -c less -Hs 。（或您想要的任何其他快递选项）

```
sudo npm install 
```

5) 删除 Express' 公共目录 & 将 Express' app.js 中路径的 'public' 更改为 'app': app.use(require('less-middleware')({ src: _ *dirname + '/app' }) ); app.use(express.static(path.join(* _dirname, 'app')));

6) 删除 express 的默认路由（ app.get('/', routes.index); ）（现在 express 将使用 angular 的 /app 文件夹中指定的路由

7) 启动服务器 npm start

（然后你应该看到 Yeoman 的欢迎页面：localhost:3000/）

# c# - .NET 图表自定义标签旋转

> ID：14106253
> 
> 赞同：2
> 
> 时间：2012-12-31T21:39:10.357
> 
> 标签：c#, asp.net, charts, mschart, axis-labels

我正在使用 X 轴上的自定义标签在 C# 中制作图表。刻度以日期为单位，并根据所选值（从一个月到两年）而变化。它工作得很好，每当我改变比例尺的值时，图表的宽度都保持不变；它只是调整条的宽度。

当我尝试旋转标签时会出现问题。当我这样做时，它会在每个不同的比例上以不同的方式调整所有条的大小，并且不会占用与原始条相同的空间。我希望能够在不调整所有大小的情况下旋转标签。我可以这样做吗？为什么会这样？我该如何解决？

我用来添加自定义标签的代码是这样的：

```
DateTime StartMonthPos = XValues[0];
DateTime EndPos = new DateTime();

if (Time == 6 || Time == 12 || Time == 24)
{
    foreach (DateTime Date in XValues)
    {
        EndPos = Date;

        if (Date.Month != month)
        {
            Chart4.ChartAreas[0].AxisX.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("MMMM"), 0, LabelMarkStyle.None);
            StartMonthPos = Date;
        }

        month = Date.Month;
    }

    XAxis.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("MMMM"), 0, LabelMarkStyle.None);
}
else
{
    foreach (DateTime Date in XValues)
    {
        EndPos = Date;
        Chart4.ChartAreas[0].AxisX.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("M"), 0, LabelMarkStyle.None);
        StartMonthPos = Date;
    }

    XAxis.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("M"), 0, LabelMarkStyle.None);
} 
```

如果我在那之后添加这行代码，事情就会变得一团糟：

```
 Chart4.ChartAreas[0].AxisX.LabelStyle.Angle = 0; 
```

这是有问题的代码之前的图片：

![在此处输入图像描述](../Images/65151f5ce8981189cee83c1341b7f648.png)

这是后图：

![在此处输入图像描述](../Images/b852b3b2b627e70040d56a4409d59366.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:48:03.683

*   请查看[这篇文章，了解如何轻松旋转 WPF 图表的轴标签](http://blogs.msdn.com/b/delay/archive/2010/03/06/turn-your-head-and-check-out-this-post-how-to-easily-rotate-the-axis-labels-of-a-silverlight-wpf-toolkit-chart.aspx)。

    *“这里的关键是自定义用于呈现标签的 AxisLabel 实例的模板。通过为子类的属性提供`Style`a非常简单”`Template Setter``AxisLabelStyle``Axis`* ...

那篇文章虽然涉及很多 XAML ......

*   这是另一篇文章：[C# 图表旋转标签](https://stackoverflow.com/questions/6047961/c-sharp-chart-rotate-labels)。

如您所见，仅此行无法获得轮换：

```
Chart4.ChartAreas[0].AxisX.LabelStyle.Angle = 0; 
```

**轮换**还有更多内容；）

# java - 关键地图的更改元素不在集合 B 中

> ID：14106254
> 
> 赞同：1
> 
> 时间：2012-12-31T21:39:24.493
> 
> 标签：java, collections, map, set

我确信这经常出现，足以在某个地方解决它，但我不知道如何进一步搜索它。

我想修改键不在集合 B 中的映射中的值。最好的方法是什么？这是我的想法：

```
Map<X,Y> map = ...

Set<X> B = ...

for(Map.Entry<X, Y> entry : map.entrySet() ) {

    if( ! B.contains(entry.getKey()) {
        entry.setValue( someMethod(entry.getValue);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:49:54.047

您目前拥有的应该可以正常工作。作为替代方案，您可以尝试这样的事情：

```
Map<X,Y> newMap = new HashMap<X,Y>(map);
newMap.keySet().removeAll(B);  // remove keys in the set B

for (Map.Entry<X, Y> entry : newMap.entrySet()) {
    entry.setValue(someMethod(entry.getValue());
}

map.putAll(newMap); 
```

虽然我不得不说，如果我这样做，我会采取你目前的方法。

# python - 优化从 fb-graph-api 检索到的 python 处理 json

> ID：14106255
> 
> 赞同：1
> 
> 时间：2012-12-31T21:39:28.210
> 
> 标签：python, json, facebook-graph-api

我从 facebook-graph-api 获取 json 数据：

1.  我和朋友的关系
2.  我的朋友之间的关系。

现在我的程序看起来像这样（在 python 伪代码中，请注意一些变量已经更改为隐私）：

```
import json
import requests

# protected
_accessCode = "someAccessToken"
_accessStr = "?access_token=" + _accessCode
_myID = "myIDNumber"

r = requests.get("https://graph.facebook.com/" + _myID + "/friends/" + _accessStr)
raw = json.loads(r.text)

terminate = len(raw["data"])

# list used to store the friend/friend relationships
a = list()

for j in range(0, terminate + 1):
    # calculate terminating displacement:
    term_displacement = terminate - (j + 1) 
    print("Currently processing: " + str(j) + " of " + str(terminate))
    for dj in range(1, term_displacement + 1):
        # construct urls based on the raw data:
        url = "https://graph.facebook.com/" + raw["data"][j]["id"] + "/friends/" + raw["data"][j + dj]["id"] + "/" + _accessStr
        # visit site *THIS IS THE BOTTLENECK*:
        reqTemp = requests.get(url)
        rawTemp = json.loads(reqTemp.text)
        if len(rawTemp["data"]) != 0:
            # data dumps to list which dumps to file
            a.append(str(raw["data"][j]["id"]) + "," + str(rawTemp["data"][0]["id"]))

outputFile = "C:/Users/franklin/Documents/gen/friendsRaw.csv"
output = open(outputFile, "w")

# write all me/friend relationship to file
for k in range(0, terminate):
    output.write(_myID + "," + raw["data"][k]["id"] + "\n")

# write all friend/friend relationships to file
for i in range(0, len(a)):
    output.write(a[i])

output.close() 
```

所以它的作用是：首先它调用我的页面并获取我的朋友列表（这是通过 facebook api 使用 access_token 允许的）调用朋友的朋友列表是不允许的，但我可以通过请求朋友之间的关系来解决这个问题我的名单和我名单上的另一个朋友。所以在第二部分（由双 for 循环表示）我正在发出另一个请求，以查看某个朋友 a 是否也是 b 的朋友（两者都在我的列表中）；如果是这样，将有一个长度为 1 的 json 对象，其中包含朋友 a 的名字。

但是对于大约 357 个朋友，实际上需要进行数千个页面请求。换句话说，该程序花费大量时间等待 json 请求。

我的问题是，这可以重写以提高效率吗？目前，由于安全限制，不允许调用好友的好友列表属性。而且看起来api不允许这样做。是否有任何 python 技巧可以使它运行得更快？也许并行？

**更新**修改的代码粘贴在下面的答案部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:31:38.370

**更新**这是我想出的解决方案。感谢@DMCS 的 FQL 建议，但我只是决定使用我所拥有的。当我有机会研究实施时，我将发布 FQL 解决方案。如您所见，此方法只是利用了更精简的 API 调用。

顺便说一下，API 调用限制为[每 600 秒、每个令牌和每个 IP 600 次调用](https://stackoverflow.com/questions/8713241/whats-the-facebooks-graph-api-call-limit)，因此对于每个具有唯一访问令牌的唯一 IP 地址，调用次数限制为每秒 1 次调用。我不确定这对于异步调用@Gerrat 意味着什么，但就是这样。

```
import json
import requests

# protected
_accessCode = "someaccesscode"
_accessStr = "?access_token=" + _accessCode
_myID = "someidnumber"

r = requests.get("https://graph.facebook.com/" 
    + _myID + "/friends/" + _accessStr)
raw = json.loads(r.text)

terminate = len(raw["data"])

a = list()
for k in range(0, terminate - 1):
    friendID = raw["data"][k]["id"]
    friendName = raw["data"][k]["name"]
    url = ("https://graph.facebook.com/me/mutualfriends/" 
        + friendID + _accessStr)
    req = requests.get(url)
    temp = json.loads(req.text)
    print("Processing: " + str(k + 1) + " of " + str(terminate))
    for j in range(0, len(temp["data"])):
        a.append(friendID + "," + temp["data"][j]["id"] + "," 
            + friendName + "," + temp["data"][j]["name"])

# dump contents to file:
outputFile = "C:/Users/franklin/Documents/gen/friendsRaw.csv"
output = open(outputFile, "w")
print("Dumping to file...")
# write all me/friend relationships to file
for k in range(0, terminate):
    output.write(_myID + "," + raw["data"][k]["id"] 
        + ",me," + str(raw["data"][k]["name"].encode("utf-8", "ignore")) + "\n")

# write all friend/friend relationships to file
for i in range(0, len(a)):
    output.write(str(a[i].encode("utf-8", "ignore")) + "\n")

output.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:00:23.603

这可能不是最优的，但我稍微调整了您的代码以使用 Requests 异步方法（未经测试）：

```
import json
import requests
from requests import async

# protected
_accessCode = "someAccessToken"
_accessStr = "?access_token=" + _accessCode
_myID = "myIDNumber"

r = requests.get("https://graph.facebook.com/" + _myID + "/friends/" + _accessStr)
raw = json.loads(r.text)

terminate = len(raw["data"])

# list used to store the friend/friend relationships
a = list()

def add_to_list(reqTemp):
    rawTemp = json.loads(reqTemp.text)
    if len(rawTemp["data"]) != 0:
        # data dumps to list which dumps to file
        a.append(str(raw["data"][j]["id"]) + "," + str(rawTemp["data"][0]["id"]))

async_list = []
for j in range(0, terminate + 1):
    # calculate terminating displacement:
    term_displacement = terminate - (j + 1) 
    print("Currently processing: " + str(j) + " of " + str(terminate))
    for dj in range(1, term_displacement + 1):
        # construct urls based on the raw data:
        url = "https://graph.facebook.com/" + raw["data"][j]["id"] + "/friends/" + raw["data"][j + dj]["id"] + "/" + _accessStr

        req = async.get(url, hooks = {'response': add_to_list})
        async_list.append(req)

# gather up all the results
async.map(async_list)

outputFile = "C:/Users/franklin/Documents/gen/friendsRaw.csv"
output = open(outputFile, "w") 
```

# java - 碰撞检测 Java 2D Sprite

> ID：14106260
> 
> 赞同：2
> 
> 时间：2012-12-31T21:40:43.543
> 
> 标签：java, 2d, collision-detection, sprite

所以我试图在我的游戏中实现碰撞检测，但由于某种原因，碰撞无法正常工作。

```
public class ArenaKeys extends KeyAdapter {
    arenaScreenBuild arena;
    int xPos = 0, playerFace = 4;
    int xPPos = 200, yPPos = 150;
    int pX = 40, pY = 30;
    AttackAshe aAtk = new AttackAshe();

    int[][] mask = new int[400][92];

    @SuppressWarnings("static-access")
    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();// Get key pressed
        if (keyCode == e.VK_RIGHT) {
            playerFace = 4;
            xPos += 5;
            pX = (xPos + xPPos) / 5;
            if (checkBoundary(pX, pY) == (false))
                xPos -= 5;
        } else if (keyCode == e.VK_LEFT) {
            playerFace = 3;
            xPos -= 5;
            pX = (xPos + xPPos) / 5;
            if (checkBoundary(pX, pY) == (false))
                xPos += 5;
        } else if (keyCode == e.VK_UP) {
            playerFace = 2;
            yPPos -= 5;
            pY = yPPos / 5;
            if (checkBoundary(pX, pY) == (false))
                yPPos += 5;
        } else if (keyCode == e.VK_DOWN) {
            playerFace = 1;
            yPPos += 5;
            pY = yPPos / 5;
            if (checkBoundary(pX, pY) == (false))
                yPPos -= 5;
        }
        if (keyCode == e.VK_SPACE) {
            aAtk.regArrow(arena.xPosition(), arena.yPosition());
            arena.shoot(playerFace);
            arena.xArrow = xPPos;
            arena.yArrow = yPPos;
        } else if (keyCode == e.VK_ESCAPE)
            System.exit(0);
        arena.moveArena(xPos);
        arena.turnPlayer(playerFace);
        arena.updateScreen(xPPos, yPPos);
    }

    public boolean checkBoundary(int x, int y) {
        Rectangle t1 = new Rectangle(Turret.x, Turret.y, Turret.WIDTH,
                Turret.HEIGHT);
        Rectangle p = new Rectangle(pX, pY, Player.WIDTH, Player.HEIGHT);

        if (t1.intersects(p))
            // if (mask[x][y] == 0)
            return false;
        else
            return true;
    }
    public static class Turret {
        static int x = 168;
        static int y = 40;
        static final int WIDTH = 50;
        static final int HEIGHT = 50;
    }

    public static class Player {
        static final int WIDTH = 25;
        static final int HEIGHT = 25;
    }

    public ArenaKeys(arenaScreenBuild arena) throws Exception {
        this.arena = arena;
    }
} 
```

在实际炮塔之前大约 20 个单位，精灵停止移动。即使你走得非常高或非常低，精灵也不能高于或低于炮塔。

似乎出了问题的是精灵太早地碰撞到炮塔矩形中，但我不明白这是怎么可能的。我在 168,40 处绘制了 50 宽、50 高的炮塔。玩家正在移动，所以它的 x，y 每次都不同，但它的尺寸是 25 宽和 25 高。

![我的炮塔](../Images/13ea0b38bfd0a1e141d68dc59eaa7723.png)

原始炮塔大约为 126x111，但我将其绘制为 50x50

![样本精灵](../Images/78af85432d5b92dc79f99ae1845e328b.png) 25x25

```
public class arenaScreenBuild extends JPanel implements ActionListener {
    String picPath = "pictures/";
    String[] fileName = { "stageBridge.png", "turret.png", "Ashe.png",
            "regArrow.png", "arenaScreen.png" };
    ClassLoader cl = arenaScreenBuild.class.getClassLoader();
    URL imgURL[] = new URL[5];
    Toolkit tk = Toolkit.getDefaultToolkit();
    Image imgBG, imgTurret, imgPlayer, imgRegArrow, imgBorder;
    Boolean[] ptFunc = new Boolean[3];

    int PLAYER_INITIAL_X = 200, PLAYER_INITIAL_Y = 150;
    int xPos = 0, xPFace = 150, yPFace = 0;
    int xPPos = 200, yPPos = 150;
    int xVal, yVal, xArrow, yArrow, xTemp, yTemp;
    Timer space;
    int counter, facePosition = 1;

    public arenaScreenBuild() throws Exception {
        for (int x = 0; x < 5; x++) {
            imgURL[x] = cl.getResource(picPath + fileName[x]);
        }
        imgBG = tk.createImage(imgURL[0]);
        imgTurret = tk.createImage(imgURL[1]);
        imgPlayer = tk.createImage(imgURL[2]);
        imgRegArrow = tk.createImage(imgURL[3]);
        imgBorder = tk.createImage(imgURL[4]);
        for (int x = 0; x < 3; x++)
            ptFunc[x] = true;

        space = new Timer(100, this);

    }

    public void updateScreen() {
        repaint();
    }

    public void moveArena(int x) {
        xPos = x;
    }

    public void updateScreen(int x, int y) {
        xPPos = x;
        yPPos = y;
        repaint();
    }

    public boolean arrow() {
        return (true);
    }

    public void turnPlayer(int face) {
        if (face == 4) {
            xPFace = 150;
        } else if (face == 3) {
            xPFace = 100;
        } else if (face == 2) {
            xPFace = 50;
        } else if (face == 1) {
            xPFace = 0;
        }
        if (yPFace == 50)
            yPFace = 0;
        else if (yPFace == 0)
            yPFace = 50;
    }

    public void paintComponent(Graphics g) {
        g.drawImage(imgBG, 10, 30, 610, 490, xPos, 0, xPos + 600, 460, this);

        g.drawImage(imgTurret, 850 - xPos, 200, 950 - xPos, 300, 0, 0, 126,
                110, this);
        g.drawImage(imgTurret, 1350 - xPos, 200, 1450 - xPos, 300, 0, 0, 126,
                110, this);

        g.drawImage(imgPlayer, xPPos, yPPos, 50 + (xPPos),
                50 + (yPPos), xPFace, yPFace, xPFace + 50, yPFace + 50, this);

        if (counter <= 5000 && counter > 0)
            g.drawImage(imgRegArrow, xArrow, yArrow, this);

        g.drawImage(imgBorder, 0, 0, 620, 600, 0, 0, 620, 600, this);

        g.setColor(Color.WHITE);
        g.drawString("x:" + (xPPos + xPos), 535, 525);
        g.drawString("y:" + yPPos, 535, 545);
    }

    public int xPosition() {
        xVal = xPPos + xPos;
        return (xVal);
    }

    public int yPosition() {
        yVal = yPPos;
        return (yVal);
    }

    public void shoot(int i) {
        facePosition = i;
        xTemp = xPosition();
        yTemp = yPosition();
        space.start();
    }

    public void actionPerformed(ActionEvent e) {
        counter++;

        if (facePosition == 4) {
            if (counter <= 5000) {
                xArrow += 50;
            }
        }

        else if (facePosition == 3) {
            if (counter <= 5000) {
                xArrow -= 50;
            }
        }

        else if (facePosition == 2) {
            if (counter <= 5000) {
                yArrow -= 50;
            }
        }

        else if (facePosition == 1) {
            if (counter <= 5000) {
                yArrow += 50;
            }
        }

        if (xArrow == (xTemp + 100)) {
            counter = 0;
            space.stop();
        }

        updateScreen();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:21:17.803

原来我对 x 位置的值是错误的。同样由于我之前的边界代码，仍然有它的残留物让我感到困惑，因此无法让我更快地看到问题。

对于任何寻找如何制作碰撞检测边界的人，只需制作 2 个矩形并使用

```
Rectangle rect1 = new Rectangle(topLeftX, topLeftY, rectangleWidth,rectangleHeight);
Rectangle rect2 = new Rectangle(topLeftX, topLeftY, rectangleWidth, rectangleHeight);
if (rect1.intersects(rect2))
//enter code to do if it intersects here 
```

# ruby - 是否有任何 mongodb ORM 允许您为字段起别名？

> ID：14106261
> 
> 赞同：4
> 
> 时间：2012-12-31T21:40:44.183
> 
> 标签：ruby, node.js, mongodb, orm

我刚刚看了这个：[http ://blog.mongodb.org/post/38467892360/mongodb-schema-design-insights-and-tradeoffs-from](http://blog.mongodb.org/post/38467892360/mongodb-schema-design-insights-and-tradeoffs-from)

谈话中提出的一个建议：在将被多次复制的文档中，尽量使字段名称尽可能小：

> 通过始终使用短字段名称作为约定来减少集合大小。这将帮助您随着时间的推移节省内存。

选择“u”而不是“publicationUrl”。如果您谈论的是数百万行，这是有道理的。但是，存在很大的可读性问题。很明显，该值是一个 url，但它是什么类型的 url？

不过，这在 ORM 中可能是可以解决的。与 MongoDb 接口的任何 ORM 是否允许您说数据库中的“u”将映射到代码中的“publicationUrl”？当你有类似`a.u`代码的东西时，可读性很差；`article.u`也好不了多少。

（有 Ruby 和 node.js 标签，因为这些是我使用 mongo 的语言。随意添加标签。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:41:24.867

根据[这个讨论](https://groups.google.com/d/msg/mongoose-orm/c68ZdYBAsVM/KgRH4clNYSQJ)，[Mongoose 允许](http://mongoosejs.com/docs/guide.html#virtuals)使用 getter 和 setter 的虚拟字段名称。不幸的是，虚拟不能用于查询和其他服务器端操作，例如 map-reduce。讨论还建议[使用这个别名插件](https://github.com/ramiel/Alias-Field-Mongoose-plugin)，这似乎解决了查询问题，但我怀疑它也会在更复杂的服务器端操作中遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:05:09.920

这很容易使用 Ruby ORM [Mongoid](http://mongoid.org/en/mongoid/index.html)。[这是直接来自文档](http://mongoid.org/en/mongoid/docs/documents.html#fields)的示例：

```
class Band
  include Mongoid::Document
  field :n, as: :name, type: String
end

band = Band.new(name: "Placebo")
band.attributes #=> { "n" => "Placebo" }

criteria = Band.where(name: "Placebo")
criteria.selector #=> { "n" => "Placebo" } 
```

我在很多项目（尽管都是小项目）中使用了 Mongoid，并且非常喜欢使用它。文档真的很棒，文档中也有一个关于性能的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:10:48.073

Doctrine MongoDB ODM 允许您为字段设置别名，而您的对象（包括 getter 和 setter）可以保持可读性：

/** @String(name="pUrl") */ private $publicationUrl;

[注释参考 — Doctrine MongoDB ODM 1.0.0-BETA2 文档 — 字段](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html#field)

# r - 如何从多个 DNA 距离文件在同一张图上绘制多个直方图？

> ID：14106262
> 
> 赞同：2
> 
> 时间：2012-12-31T21:40:54.713
> 
> 标签：r, histogram, fasta, genetics

我有 100 个 fasta 文件，我想绘制遗传距离矩阵的重叠直方图，以查看 DNA 数据的引导复制之间有多少重叠？

我已经想出如何让猿使用以下方法读取每个文件：

```
files <- list.files("/Volumes/ALEX_R-HD/", pattern="/Volumes/ALEX_R-HD/xii-27-D")
library("ape")
library("pegas")
library("plyr")
library("dostats")
filenames <- dir(path="/Volumes/ALEX_R-HD/xii-27_D_coccus", full.names="TRUE", pattern="xii-27")
listOfiles <- lapply(filenames, function(x) read.dna(x, format="fasta")) 
```

然后使用以下方法为每个生成一个遗传距离矩阵：

```
distOfiles <- lapply(listOfiles, function(y) dist.dna(y, model="TN93")) 
```

当我从 R 控制台调用它们时，遗传距离文件如下所示：

```
[[1]]
               M_51_1_new__ M_51_3_new__ M_51_4_new2__ M_51_5_new2__ M_51_6_new__ M_51_7_new__ M_51_8_new__ madera_1_new__ madera_2_new__  madera_3__ madera_4_new__ madera_5_new__
M_51_3_new__    0.000000000                                                                                                                                                        
M_51_4_new2__   0.000000000  0.000000000                                                                                                                                           
M_51_5_new2__   0.000000000  0.000000000   0.000000000                                                                                                                             
M_51_6_new__    0.000000000  0.000000000   0.000000000   0.000000000                                                                                                               
M_51_7_new__    0.000000000  0.000000000   0.000000000   0.000000000  0.000000000                                                                                                  
M_51_8_new__    0.000000000  0.000000000   0.000000000   0.000000000  0.000000000  0.000000000                                                                                     
madera_1_new__  0.037124343  0.037124343   0.037124343   0.037124343  0.037124343  0.037124343  0.037124343                                                                        
madera_2_new__  0.037124343  0.037124343   0.037124343   0.037124343  0.037124343  0.037124343  0.037124343    0.000000000                                                         
madera_3__      0.037124343  0.037124343   0.037124343   0.037124343  0.037124343  0.037124343  0.037124343    0.000000000  

and goes on to.... [[100]] 
```

我遇到麻烦的地方是绘制每个直方图，以便每个引导程序将在同一个窗口中绘制在另一个之上，下面的脚本只是在一个全新的窗口中绘制每个，并且不会重叠它们：

```
bins=seq(0,0.05,by=0.001)
HistOfiles <- lapply(distOfiles, function(z) hist(z, breaks=bins, main="Histogram of D. coccus   Mexico-types TN93 distances", ylim=c(0,1500), xlab="TN93 distance", ylab="frequency", col=rgb(0,0,0,0.01),  border=rgb(0,0,0,0.01))) 
```

我知道这可以通过以下方式完成：

```
bins=seq(0,0.05,by=0.001)
readfile1 <- read.dna("/Volumes/ALEX_R-HD/xii-27_D_coccus/xii-27-D_coccus1", format="fasta")
 distance_TN931 <- dist.dna(readfile1, model="TN93")
 bins=seq(0,0.05,by=0.001)
 hist(distance_TN931, breaks=bins, main="Histogram of D. coccus Mexico-types TN93 distances",   ylim=c(0,1500), xlab="TN93 distance", ylab="frequency", col=rgb(0,0,0,0.01),  border=rgb(0,0,0,0.01))
 lines(density(distance_TN931), col=rgb(1,0,0,0.01))
 par(new=TRUE)
 readfile2 <- read.dna("/Volumes/ALEX_R-HD/xii-27_D_coccus/xii-27-D_coccus2", format="fasta")
 distance_TN932 <- dist.dna(readfile2, model="TN93")
 bins=seq(0,0.05,by=0.001)
 hist(distance_TN932, breaks=bins, ylim="", main="", xlab="", ylab="", col=rgb(0,0,0,0.01),      border=rgb(0,0,0,0.01))
lines(density(distance_TN932), col=rgb(1,0,0,0.01))
par(new=TRUE) 
```

.......到最后一个文件

但我认为这将是很多工作，这对于 100 个文件来说很好，但如果其他人拥有 1,000 个文件（例如，使用 GenBank 数据工作的人等），这可能太多了。

我还尝试通过使用一些 Unix 将不同的文件粘贴到 \t 分隔的列列表中来解决这个问题：

```
paste /Volumes/ALEX_R-HD/xii-27_D_coccus/xii-27-D_coccus* /Volumes/ALEX_R-HD/xii-27_D_coccus/blank > /Volumes/ALEX_R-HD/xii-27_D_coccus/blank 
```

该文件看起来像这样，我“” \t 试图明确它们是如何分开的

```
 >name1 "\t" >name1 "\t" >name1 ...... 100 times for each row

 actgactg "\t" actgaca "\t" actgaca

 actgttgc "\t" actgact "\t" actgaca

 >name2 "\t" >name2 "\t" >name2 

 actgactg "\t" actgaca "\t" actgaca

 actgttgc "\t" actgact "\t" actgaca 
```

但我不知道如何让 read.dna 将每一列作为单独的数据矩阵读取，我可以让 read.table 读取文件，但卡在那里，

在这一点上我完全被难住了，因为我是一个新的 R 用户，我已经在网上做了很多寻找这个问题的解决方案，似乎没有一个我发现不涉及一些正如我上面所描述的那样做这件事的困难方法的变体，也许 lattice 可以完成工作？

# android - OnTouch 与 Android 中的多点触控

> ID：14106266
> 
> 赞同：1
> 
> 时间：2012-12-31T21:41:41.093
> 
> 标签：android, ontouchlistener

我很难计算在屏幕的每个“一半”中进行了多少触摸。当我触摸上侧时，它计数正确，下侧也一样。但是，当我触摸上侧时，不要松开它，然后触摸下侧，那么它算错了，我的实现有什么问题？

```
 myView.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                int action = event.getAction() & MotionEvent.ACTION_MASK;
                if (action == MotionEvent.ACTION_DOWN) {
                    if(event.getY()<400)
                    {

                    }
                    else
                    {

                    }
                }

                if (action == MotionEvent.ACTION_UP) {

                    if(event.getY()<400)
                    {

                        zenbat=zenbat+1;
                        tv.setText(String.valueOf(zenbat));

                    }
                    if(event.getY()>400)
                    {
                        zenbat1=zenbat1+1;
                        tv1.setText(String.valueOf(zenbat1));

                    }
                }

                if (action == MotionEvent.ACTION_POINTER_DOWN) {
                    if(event.getY()<400)
                    {                           
                    }
                    else
                    {
                    }
                }

                if (action == MotionEvent.ACTION_POINTER_UP) {
                    if(event.getY()<400)
                    {
                        zenbat=zenbat+1;
                        tv.setText(String.valueOf(zenbat));

                    }
                    if(event.getY()>400)
                    {
                        zenbat1=zenbat1+1;
                        tv1.setText(String.valueOf(zenbat1));

                    }
                } 
                return true;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:45:39.493

如果要正确处理多点触控事件，则需要使用指针索引来正确识别产生事件的手指。

我在[Android 多点触控干扰](https://stackoverflow.com/questions/12500465/android-multi-touch-interference/12645449#12645449)中回答了一个类似的问题，我在其中发布了一个代码示例如何做到这一点。

要正确识别手指，您应该参考`fingerId`发布的代码中的。

问候。

# perl - 相当于：进口*

> ID：14106270
> 
> 赞同：0
> 
> 时间：2012-12-31T21:42:14.853
> 
> 标签：perl, import, perl-module

我正在创建一个与我的 Python 项目等效的 Perl。

描述：我有一个基本模块“base.py”，我的所有脚本都通过“from base import *”使用该基本模块具有可以在脚本中执行的通用子例程/函数

我对 Perl 的尝试是放在每个脚本中“使用 base.pm”。然而，Perl 中的子程序并没有在本地导入到脚本中，所以每次我想执行子程序时都需要调用“基本”模块。什么是 Perl 等价于 Python 的“from base import *”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:13:06.650

一些东西：

*   `Local`命名空间非常适合用于您的本地模块。Perl 专门`Local`为此保留。命名空间中永远不会有官方模块`Local`。
*   Perl 不是 Python。Perl 会做一些不同的事情。有时有一个确切的等价物，有时没有。这没有*确切的*等价物。接近，但不准确。

## 方法#1：不要导出任何函数

如果您将完整的命名空间作为前缀，则您在模块中定义的所有函数都可用。这是定义和使用模块中的函数的最简单方法，也是最不可能引起问题的方法。很容易看出一个函数的来源，并且使用相同的函数名的两个模块不会有问题。

我有一个名为的模块`Local::Base`，其中有一个函数。我的程序可以使用此功能，只需将其称为`Local::Base::foo`：

### 我的程序

```
use strict;
use warnings;
use feature qw(say);

use Local::Base;

my $foo_string = Local::Base::foo("string");
say "Foo: $foo_string"; 
```

### 本地/Base.pm

```
package Local::Base;

use strict;
use warnings;

sub foo {
    my $string = shift;

    return qq(I've foo'd "$string"!);
}

1; 
```

## 方法 #2：使用`Exporter`Pragma 指定要自动导出的内容

Perl 有一个名为*Exporter的特殊**编译指示*，它允许我指定哪些模块将自动导入到我的程序中。

 *这不像 Python，我可以指定任何已定义的函数。相反，我必须列出我想要导出的那些。这与 Python 的方式相比有一个缺点：在 Python 中，如果我编写一个新函数，它会自动导入，而无需我做任何事情。与 Python 的方式相比，它还有一个很大的优势：在 Python 中，如果我编写一个新函数，它会自动导入，而***无论我是否要导入它，***我都无需做任何事情。你可以想象如果我写了一个我不想让人们使用的私有函数。在 Python 中，它将自动可用。在 Perl 中，除非我指定它，否则它不会是：

### 我的程序

```
use strict;
use warnings;
use feature qw(say);

use Local::Base;

my $foo_string = foo("string");
say "Foo: $foo_string"; 
```

### 本地/Base.pm

```
package Local::Base;
use strict;
use warnings;

use Exporter 'import';

our @EXPORT = qw(foo);

sub foo {
    my $string = shift;

    return qq(I've foo'd "$string"!);
}

1; 
```

现在，每当我使用 时`Local::Base`，都会自动导入该`foo`功能。

请注意，我列出了要在`@EXPORT`数组中导出的所有函数。`our`（另请注意，我用 a而不是 a声明了该数组`my`。这`our`意味着 the`@EXPORT`是一个 PACKAGE 变量。）。还要注意`qw(...)`语法。这是*引用词*。所有*单词*都是数组的单独元素。您不使用逗号：

```
my @array = ("one", "two", "three");
my @array = qw(one two three); 
```

这两者是等价的。你也可以这样看：

```
my @array = qw/one two three/; 
```

我喜欢括号，但正斜杠往往是标准。

## 方法#3：导出时要好

不建议您再使用自动导出。较旧的模块`File::Copy`仍然可以这样做，但较新的模块会让您导入您的东西。这也使用了*Exporter* pragma，但我指定`@EXPORT_OK`而不是仅指定`@EXPORT`.

现在，当我指定要使用`Local::Base`时，我必须指定要导入程序的函数：

### 我的程序

```
use strict;
use warnings;
use feature qw(say);

use Local::Base qw(foo);

my $foo_string = foo("string");
say "Foo: $foo_string"; 
```

### 本地/Base.pm

```
package Local::Base;
use strict;
use warnings;

use Exporter 'import';

our @EXPORT_OK; = qw(foo);

sub foo {
    my $string = shift;

    return qq(I've foo'd "$string"!);
}

1; 
```

这迫使用户记录他们想要使用的模块中的功能。这样，他们就知道导入函数的来源。它强制执行良好的编程实践。另外，如果您使用多个模块并且它们具有相似的函数名称，您可以确保使用您想要的模块中的一个。（记住，如果你想使用另一个，你仍然可以在函数前指定包名前缀）。

如果我是一名 Python 程序员并且我不关心良好的编程实践怎么办？（等等，结果不太对劲……）你仍然可以（在某种程度上）通过指定*正则表达式*（毕竟这是 Perl）以 Python 的方式来做：

```
use Local::Base '/.+/'; 
```

这将导出两者中列出`@EXPORT`并`@EXPORT_OK`与此正则表达式匹配的所有模块。由于这匹配所有内容，因此它将导入您在`@EXPORT`和中列出的所有内容`@EXPORT_OK`。它不会导入所有功能。它只会导入`@EXPORT`和`@EXPORT_OK`数组中的函数。当然，您可以指定任何正则表达式，甚至是 ant 正则表达式。这将导出所有可导出的函数，但名称中的函数除外`bar`：

```
use Local::Base '!/bar/'; 
```

看看[Exporter pragma](http://perldoc.perl.org/Exporter.html)，看看它还有什么其他好处。例如，您可以将函数分组到*标签*中。这样，用户只需一个标签就可以指定一组特定的功能。请参阅[Math::Trig](http://perldoc.perl.org/Math/Trig.html)以获得一个很好的示例。

希望这可以帮助。

对不起，答案很长，但我已婚并有孩子。就像，我在新年前夜做其他事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T22:04:39.577

您通常指定要导入的函数，就像名称列表一样：

```
use List::Util 'max', 'min'; 
```

大多数导出内容的模块将遵循以下语义：

```
use MyBase; # imports default exports (if any)
use MyBase 'baz'; # imports only baz
use MyBase (); # import nothing 
```

在模块内部，调用了一个导入类方法，该方法可以选择要导出的内容，通常有一个默认列表，但如果有一个则使用传递的列表。导出器模块可以帮助您做到这一点：

```
package MyBase;
use Exporter 'import';
our @EXPORT = ( 'foo', 'bar' );
our @EXPORT_OK = ( 'baz', 'quux' ); 
```

还有一个按标签对导出进行分组并允许轻松导入整个组的工具，请参阅导出器文档。变量也可以导出，而不仅仅是 subs。

有了这个背景，最后回答你的问题：

对于使用 Exporter 的模块（并非所有模块都这样做），您可以使用包含在 // 中的正则表达式指定导入：

```
use List::Util '/./'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T21:51:22.903

首先`base.pm`是一个非常糟糕的名字，因为它是一个核心模块。其次，可导出函数必须这样声明（通常），参见[Exporter](http://p3rl.org/Exporter)示例。*

# javascript - 是否可以在中转时修改服务器回复

> ID：14106271
> 
> 赞同：0
> 
> 时间：2012-12-31T21:42:19.437
> 
> 标签：javascript, security, srp-protocol

我正在构建一个 javascript 库，它允许使用 SRP-6 协议对服务器进行身份验证。

我知道由于 XSS，使用 javascript 作为身份验证方法不是最佳选择。但是适当的 XSS 预防可以消除大多数问题。

我唯一关心的是在用户收到请求之前修改服务器回复有多容易？

示例场景：

用户请求页面：`http://serverdomain/home`

服务器：回复：

```
<html>
   <head>Home</head>
   <script type="text/javascript" src="auth.js"></script>
   <body>Home</body>
</html> 
```

在用户收到回复之前。黑客能否以某种方式神奇地修改回复

```
<html>
   <head>Home</head>
   <script type="text/javascript" src="hacker_auth.js"></script>
   <body>Home</body>
</html> 
```

这可能吗？这是我在使用 javascript 进行身份验证时能想到的漏洞之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:01:09.953

您可以使用像 HTTPS 这样的安全协议来避免这种情况，尽管一切都可以通过某种方式被黑客入侵，但有些比其他的更容易被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:16:36.377

Badaboooooom 做到了：[http](http://en.wikipedia.org/wiki/Man-in-the-middle_attack) ://en.wikipedia.org/wiki/Man-in-the-middle_attack 您可以使用 https 来降低风险，尽管使用诸如[http://www.thoughtcrime.org/software/sslstrip/](http://www.thoughtcrime.org/software/sslstrip/)之类的工具如果用户没有注意到“锁”消失了，仍然可以进行攻击。

# android - 从 String Array 类型转换为 Double 时出现 NumberFormatException

> ID：14106275
> 
> 赞同：1
> 
> 时间：2012-12-31T21:43:37.303
> 
> 标签：android, numberformatexception

我正在尝试将字符串转换为双精度。我在很多情况下都能做到这一点，但这一次，它给了我一个 NumberFormatException。这是代码...

```
//strExpression = 2^3 (My Input in the editText)

strExpression = edtxtExpression.getText().toString();

try
{
   System.out.println("Inside Power case");
   //expSplit is a String[]
   expSplit = strExpression.split("^");
   double first = Double.parseDouble(expSplit[0]);
   System.out.println("First Number "+first);
   double second = Double.parseDouble(expSplit[1]);
   System.out.println("Second Number "+second);

   double result = Math.pow(first, second);
   System.out.println("Result "+result);
   edtxtExpression.setText(first+" ^ "+second+" = "+result);

}
catch (Exception e) {
    // TODO: handle exception
    Toast.makeText(this, e.getClass().toString(), 100).show();

} 
```

例外：：：

```
01-01 03:07:45.169: I/System.out(11287): Inside Power case
01-01 03:07:45.179: I/System.out(11287): class java.lang.NumberFormatException 
```

我得到了“Inside Power”输出，但其他打印语句没有被执行。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:00:06.060

`^`是 RegEx 中的保留字符，请尝试`\\^`.

```
expSplit = strExpression.split("\\^"); 
```

# javascript - 如何将 JS 对象文字名称值对传递给另一个函数

> ID：14106278
> 
> 赞同：0
> 
> 时间：2012-12-31T21:44:03.637
> 
> 标签：javascript, object-literal

给定一个 JS 文字对象，例如：

```
var foo = {
    _stuff : {
        a:10,
        b:20,
        c:30,
        state
    }
} 
```

和文字功能

```
addAB: function() {
    add(foo._stuff[a], foo._stuff[b]);
}

addAC: function() {
    add(foo._stuff[a], foo._stuff[c]);
}

add: function(bar, baz) {
    foo._stuff[bar] += foo._stuff[baz];
    state(foo._stuff[bar]);
}

state: function(value) {
   foo.state[value] = .... something complex ....
} 
```

如何一次性获得以下内容？

```
add(AB); foo._stuff[a] should be 30, foo.state[foo._stuff[a]] is something new
add(AC); foo._stuff[a] should be 40, foo.state[foo._stuff[a]] is something new 
```

正如 add() 将尝试查找 foo._stuff[10] 显然不会做我想要的。

是的，我知道 addAB() 和 addAC() 存在冗余，但这是我无法控制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:52:24.167

传递索引而不是值，如下所示：

```
addAB: function() {
    add('a', 'b');
}

addAC: function() {
    add('a', 'c');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:52:33.227

```
add: function(bar, baz) {
    if (arguments.length === 1) {
        this['add' + arguments[0]];
    } else {
      foo._stuff[bar] += foo._stuff[baz];
      state(foo._stuff[bar]);
    }
}

// assuming you are calling
var AB = 'AB', AC = 'AC';
add(AB); 
add(AC); 
```

否则，我不知道你在问什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:55:53.917

我不确定我是否完全遵循您想要完成的任务，但是您的对象文字不是有效的语法。我不明白你为什么想要`_stuff`房产。而且，您需要将`state`属性初始化为某个值，即使它未定义。但是，由于您想`state`根据某个属性名称在属性中存储值，因此您应该初始化`state`为一个对象。

```
var foo = {
    a:10,
    b:20,
    c:30,
    state: {}
} 
```

你的JavaScript：

```
addAB: function() {
    add('a', 'b');
}

addAC: function() {
    add('a', 'c');
}

add: function(propName0, propName1) {
    foo[propName0] += foo[propName1];
    state(propName0);
}

state: function(propName) {
    // state is initialized to an object, so can store properties in there now
   foo.state[propName] = .... something complex ....
} 
```

# cakephp - CakePHP 2.x：Model::afterFind() 上的 $primary 标志真的有用吗？

> ID：14106283
> 
> 赞同：11
> 
> 时间：2012-12-31T21:45:12.977
> 
> 标签：cakephp

CakePHP 的`Model::afterFind()`回调如下所示：

```
afterFind(array $results, boolean $primary = false) 
```

根据文档：

> 该`$primary`参数指示当前模型是否是发起查询的模型，或者该模型是否作为关联进行查询。如果将模型作为关联进行查询，则其格式`$results`可能会有所不同。

它们*可以*不同，但​​实验表明它们并不*总是*不同的。据我所知，该`$primary`参数实际上并不是那么有用。如果它设置为`false`您可能会或可能不会获得扁平的数据结构，因此您可能会或可能不会收到可怕的“不能将字符串偏移量用作数组”错误消息。

虽然我还没有尝试过，但我基于文档的想法是`$primary`完全忽略该标志并仅检查数据：

```
public function afterFind($results, $primary = false) {
  if (array_key_exists(0, $results) {
    // operate on $results[0]['User']['fieldname']
  } else {
    // operate on $results['fieldname']
  }
  return $results;
} 
```

这是 hackish，我不喜欢它，但它似乎可能比`$primary`.

明确地说，我的问题是：

1.  `$primary`旗帜实际上有什么用？
2.  我是否正确地说它对确定数组的结构*没有*`$results`用，还是我错过了一些东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T01:31:14.600

实际上，该`$primary`参数似乎仅在警告您格式`$results`不可预测的情况下有用。它在确定`$results`.

更多信息在这里：[https ://groups.google.com/forum/?fromgroups=#!topic/cake-php/Mqufi67UoFo](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/Mqufi67UoFo)

那里提供的解决方案是检查`!isset($results[$this->primaryKey])`格式是什么`$results`。这也有点小技巧，但可以说比检查密钥“0”更好。

我最终想出的解决方案是做这样的事情：

```
public function afterFind($results, $useless) {

    // check for the primaryKey field
    if(!isset($results[$this->primaryKey])) {
        // standard format, use the array directly
        $resultsArray =& $results;
    } else {
        // stupid format, create a dummy array
        $resultsArray = array(array());
        // and push a reference to the single value into our array
        $resultsArray[0][$this->alias] =& $results;
    }

    // iterate through $resultsArray
    foreach($resultsArray as &$result) {
        // operate on $result[$this->alias]['fieldname']
        // one piece of code for both cases. yay!
    }

    // return $results in whichever format it came in
    // as but with the values modified by reference
    return parent::afterFind($results, $useless);
} 
```

这减少了代码重复，因为您不必编写字段更改逻辑两次（一次用于数组，一次用于非数组）。

您可以通过`$resultsArray`在方法结束时返回来完全避免引用的东西，但我不确定如果 CakePHP（或其他一些父类）期望`$results`它被传入的方式会导致什么问题。另外这种方式没有复制`$results`数组的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T15:50:58.780

如果您不能总是依赖在`primaryKey`字段列表中并且您知道要查找的密钥，则可以使用更简单的方法。这是一个例子：

```
/**
 * Decrypt password
 *
 * @see Model::afterFind()
 */
public function afterFind($results, $primary = false) {        
    if (!empty($results['password'])) {
        $results['password'] = Security::rijndael($results['password'], Configure::read('encrypt.key'), 'decrypt');
        return $results;
    }

    foreach ($results as &$r) {
        if (!empty($r[$this->alias]['password'])) {
            $r[$this->alias]['password'] = Security::rijndael($r[$this->alias]['password'], Configure::read('encrypt.key'), 'decrypt');
        }
    }
    return $results;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T01:14:44.617

我遇到了这个问题。接受的答案效果很好。然而，我不得不做一个小的调整。如果您要修改字段，例如从徽标构造一个完全限定的文件名，最好创建一个新字段，如“return parent::afterFind($results, $useless);” 如果从其他模型调用模型 find 将执行两次。

```
foreach($resultsArray as &$result) {
        // operate on $result[$this->alias]['fieldname']
        // one piece of code for both cases. yay!

        // Added logoFull instead of modifying logo
        if(isset($result[$this->alias]['logo'])){
            $result[$this->alias]['logoFull'] = Configure::read('urlImg') . 'logos' . DIRECTORY_SEPARATOR .
                'carrier' . DIRECTORY_SEPARATOR . $result[$this->alias]['logo'];
        }
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-07T14:05:46.853

书中的答案...

> $primary 参数指示当前模型是否是发起查询的模型，或者此模型是否作为关联进行查询。如果将模型作为关联进行查询，则 $results 的格式可能会有所不同；
> 
> 如果使用递归查找，则期望 $primary 为 true 的代码可能会从 PHP 中得到“不能将字符串偏移量用作数组”的致命错误。

因此，它在某些情况下可能对逻辑处理很有用，并且可以用来对您的 $results 产生连锁反应

# html - HTML 表单 POST 重写动作属性

> ID：14106284
> 
> 赞同：1
> 
> 时间：2012-12-31T21:45:27.083
> 
> 标签：html, forms

我有一个 HTML 表单，我正在尝试使用已经就位的查询字符串的一部分进行发布，但它一直在重写 URL。

```
<form id="mls_form" action="/index.php?option=com_mls&view=mls" method="get">
    <label>MLS#:</label>
    <input type="text" name="mlsnum" />
    <input type="submit" value="Go" />
</form> 
```

输出是：

```
http://www.mysite.com/index.php?mlsnum=value 
```

看起来真的很简单，但是不知道为什么要重写action属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:49:52.750

使用 POST 方法而不是 GET 方法。URL 参数将按照`action`属性中的指定发送，表单输入将在 post 数据中发送。然后，您的服务器脚本可以使用任何适当的 API 读取它们（在 PHP 中，`$_GET`与`$_POST`，或在 中找到它们`$_REQUEST`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:51:20.407

如果您必须使用 GET，您可以将附加参数作为隐藏输入字段。

```
<form id="mls_form" action="/index.php" method="GET">
    <input type="hidden" name="option" value="com_mls" />
    <input type="hidden" name="view" value="mls" />
    <label>MLS#:</label>
    <input type="text" name="mlsnum" />
    <input type="submit" value="Go" />
</form> 
```

# java - Java 泛型类模板

> ID：14106285
> 
> 赞同：3
> 
> 时间：2012-12-31T21:45:32.903
> 
> 标签：java, generics

试图用不同类型的节点对象创建具有多个节点的 N 叉树[国家 | 状态等]，我尝试从 -

[https://github.com/vivin/GenericTree/blob/master/src/main/java/net/vivin/GenericTreeNode.java](https://github.com/vivin/GenericTree/blob/master/src/main/java/net/vivin/GenericTreeNode.java)

我尝试了以下 -

```
package com.mycompany.ds;

import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class GenericTreeNode<T>{

    private T data;
    private List<GenericTreeNode<? super T>> children;
    private GenericTreeNode<? super T> parent;

    public GenericTreeNode() {
        super();
        children = new ArrayList<GenericTreeNode<? super T>>();
    }

    public GenericTreeNode(T data) {
        this();
        setData(data);
    }

    public GenericTreeNode<? super T> getParent() {
        return this.parent;
    }

    public List<GenericTreeNode<? super T>> getChildren() {
        return this.children;
    }

    public int getNumberOfChildren() {
        return getChildren().size();
    }

    public boolean hasChildren() {
        return (getNumberOfChildren() > 0);
    }

    public void setChildren(List<GenericTreeNode<? super T>> children) {
        for(GenericTreeNode<? super T> child : children) {
           child.parent = this;
        }

        this.children = children;
    }

    public void addChild(GenericTreeNode<? super T> child) {
        child.parent = this;
        children.add(child);
    }

    public void addChildAt(int index, GenericTreeNode<T> child) throws IndexOutOfBoundsException {
        child.parent = this;
        children.add(index, child);
    }

    public void removeChildren() {
        this.children = new ArrayList<GenericTreeNode<? super T>>();
    }

    public void removeChildAt(int index) throws IndexOutOfBoundsException {
        children.remove(index);
    }

    public GenericTreeNode<? super T> getChildAt(int index) throws IndexOutOfBoundsException {
        return children.get(index);
    }

    public T getData() {
        return this.data;
    }

    public void setData(T data) {
        this.data = data;
    }

    public String toString() {
        return getData().toString();
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
           return true;
        }
        if (obj == null) {
           return false;
        }
        if (getClass() != obj.getClass()) {
           return false;
        }
        GenericTreeNode<?> other = (GenericTreeNode<?>) obj;
        if (data == null) {
           if (other.data != null) {
              return false;
           }
        } else if (!data.equals(other.data)) {
           return false;
        }
        return true;
    }

    /* (non-Javadoc)
    * @see java.lang.Object#hashCode()
    */
    @Override
    public int hashCode() {
       final int prime = 31;
       int result = 1;
       result = prime * result + ((data == null) ? 0 : data.hashCode());
       return result;
    }

    public String toStringVerbose() {
        String stringRepresentation = getData().toString() + ":[";

        for (GenericTreeNode<? super T> node : getChildren()) {
            stringRepresentation += node.getData().toString() + ", ";
        }

        //Pattern.DOTALL causes ^ and $ to match. Otherwise it won't. It's retarded.
        Pattern pattern = Pattern.compile(", $", Pattern.DOTALL);
        Matcher matcher = pattern.matcher(stringRepresentation);

        stringRepresentation = matcher.replaceFirst("");
        stringRepresentation += "]";

        return stringRepresentation;
    }
} 
```

但是以下方法中的错误 -

```
 public void setChildren(List<GenericTreeNode<? super T>> children) {
        for(GenericTreeNode<? super T> child : children) {
           child.parent = this;
        }

        this.children = children;
    }

    public void addChild(GenericTreeNode<? super T> child) {
        child.parent = this;
        children.add(child);
    } 
```

错误 -

```
1 - Type mismatch: cannot convert from GenericTreeNode<T> to GenericTreeNode<? super capture#2-of ? super 
 T>

2 - Type mismatch: cannot convert from GenericTreeNode<T> to GenericTreeNode<? super capture#4-of ? super 
 T> 
```

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:53:25.220

建立在 ditkin 的答案上：在使所有类实现或扩展 GISEntity 之后，您可以这样编写树：

```
public class GenericTreeNode<T extends GISEntity>{

    private T data;
    private List<GenericTreeNode<? extends GISEntity>> children;
    private GenericTreeNode<? extends GISEntity> parent;

    public GenericTreeNode() {
        super();
        children = new ArrayList<GenericTreeNode<? extends GISEntity>>();
    }

    ////////
    ......
    ////////

    public void addChild(GenericTreeNode<? extends GISEntity> child) {
        child.parent = this;
        children.add(child);
    }

    public void addChildAt(int index, GenericTreeNode<? extends GISEntity> child) throws IndexOutOfBoundsException {
        child.parent = this;
        children.add(index, child);
    }

    ////////
    ......
    ////////

} 
```

请注意，它不会真正帮助您避免类转换。问题是，一旦您将子节点添加到节点，当您检索它们时，您就会知道它们是 GISEntity，因为类型擦除。所以这种技术只会给你一点类型安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:14:49.620

您可以创建一个表示 GISEntity 的类/接口，并创建其通用类型 T 扩展 GISEntity 的通用树节点。这将允许您拥有不同类型的 GISEntity 子类的节点——国家/州等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:36:34.617

使用 Generic 将不同类型的对象存储在同一个集合中并不是一个好主意。您应该做的是创建一个层次结构并使用它来存储您的对象。通过良好的设计，基类将拥有访问不同对象所需的一切，而无需强制转换；否则你将不得不在这里和那里写一些演员表。这是一个代码示例（请注意，这里的设计远非最佳，只是为了展示虚函数和多态性的使用）：

```
static class GISEntity {
    final String name;
    public GISEntity (String name) { this.name = name; }
    public String getName() { return name; }
    public String getTypeName() { return "GISEntity"; }
    public String toString() { return name; }
}
//
static class Country extends GISEntity {
    final String typeName = "country";
    public Country (String name) { super(name); }
    public String getTypeName() { return typeName; }
    public String toString() { return name; }
}
//
static class State extends GISEntity {
    public State (String name) { super(name); }
    public String getTypeName() { return "state"; }
    public String toString() { return name; }
}
//
static class Territory extends GISEntity {
    public Territory (String name) { super(name); }
    public String getTypeName() { return "territory"; }
    public String toString() { return name; }
}
//
// Here's an example of subclassing GenericTreeNode<GISEntity>:
//
static class IsATerritory extends GenericTreeNode<GISEntity> {

    IsATerritory (String name) { super (new Territory (name)); }

    public GISEntity getData() {
        State s = new State (super.getData().getName().toUpperCase());
        return s; }
};
//
// Here we put some data. Note that the order of insertion is important
// for the tree and that it's not alphabetical in this example.
//
GenericTree<GISEntity> earth = new GenericTree<GISEntity>() ;
//
GenericTreeNode<GISEntity> ListOfCountries = new GenericTreeNode<GISEntity>(new GISEntity("List of countries"));
//
GenericTreeNode<GISEntity> US = new GenericTreeNode<GISEntity>(new Country("United States"));
GenericTreeNode<GISEntity> Washington = new GenericTreeNode<GISEntity>(new State("Washington"));
GenericTreeNode<GISEntity> Florida = new GenericTreeNode<GISEntity>(new State("Florida"));
//
GenericTreeNode<GISEntity> Canada = new GenericTreeNode<GISEntity>(new Country("Canada"));
//
// We are now using some different ways for creating the nodes:
//
@SuppressWarnings("unchecked")
List<GenericTreeNode<GISEntity>> CanadaProvinces = new ArrayList<GenericTreeNode<GISEntity>>(
Arrays.asList(new GenericTreeNode<GISEntity>(new State("Quebec")), 
    new GenericTreeNode<GISEntity>(new State("Ontario")))
);
//
US.addChild(Washington);
US.addChild(Florida);
//
// Here's are two examples of subclassing; this time with anonymous classes.
// Don't forget that these two anonymous classes will hold an hidden reference
// to the outer classe as they are not static!
//
GenericTreeNode<GISEntity> alberta = new GenericTreeNode<GISEntity>() {
    { setData(new State ("Alberta")); }

    public GISEntity getData() {
        State s = new State (super.getData().getName().toUpperCase());
        return s; 
      }
};
//
GenericTreeNode<GISEntity> saskatchewan = new GenericTreeNode<GISEntity>(new State ("saskatchewan")) {
    public GISEntity getData() {
        State s = new State (super.getData().getName().toUpperCase());
        return s; }
};
//
CanadaProvinces.add(alberta);
CanadaProvinces.add(saskatchewan);
//
// Other ways for creating the nodes:
CanadaProvinces.add(new GenericTreeNode<GISEntity>(new State("Manitoba")));
//
// Note the use of the IsATerritory subclass:
CanadaProvinces.add(new IsATerritory("Northwest Territories"));
//
Canada.setChildren(CanadaProvinces);
//
ListOfCountries.addChild(Canada);
ListOfCountries.addChild(US);
//
earth.setRoot(ListOfCountries);
//
System.out.println(earth.toString());
System.out.println();
System.out.println(earth.toStringWithDepth());
System.out.println();
System.out.println(ListOfCountries.toStringVerbose());
//
List<GenericTreeNode<GISEntity>> loc = earth.build(GenericTreeTraversalOrderEnum.PRE_ORDER);
System.out.println(loc);
//
Map<GenericTreeNode<GISEntity>, Integer> locd = earth.buildWithDepth(GenericTreeTraversalOrderEnum.PRE_ORDER);
System.out.println(locd);
//
Map<GenericTreeNode<GISEntity>, Integer> locd2 = earth.buildWithDepth(GenericTreeTraversalOrderEnum.POST_ORDER);
System.out.println(locd2);
//
// Two examples of iteration; showing both the use of the instanceof operator
// and of virtual (or override) functions:
// 
for (GenericTreeNode<GISEntity> gen: loc) {
    GISEntity data = gen.getData();

    if (data instanceof State) {
        System.out.println("Is State: " + data.getName());
    } else if (data instanceof Country) {
        System.out.println("Is Country: " + data.getName());
    } else {
        System.out.println(data.getTypeName() + data.getName());
    }
}
//
for (Entry<GenericTreeNode<GISEntity>, Integer> entry: locd.entrySet()) {
    GISEntity data = entry.getKey().getData();
    Integer depth = entry.getValue();

    if (data instanceof State) {
        System.out.println(depth.toString() + ": Is State: " + data.getName());
    } else if (data instanceof Country) {
        System.out.println(depth.toString() + ": Is Country: " + data.getName());
    } else {
        System.out.println(depth.toString() + ": " + data.getTypeName() + data.getName());
    }
} 
```

在此示例中，我以三种不同的方式（两个匿名类，一个命名类）对类 GenericTreeNode 进行了子类化，以更改 getData 以便它返回一个新的 GISEntity，其中名称已被其大写副本替换。

请注意，我正在使用所有这三个子类，`GenericTreeNode<GISEntity>`而不是类似`GenericTreeNode<Territory>`. 这是因为即使`Territory`是 的子类`GISEntry`，该类`GenericTreeNode<Territory>`也不是 的子类`GenericTreeNode<GISEntry>`。

为了使用类似于 with 的混合`GenericTreeNode<Territory>`，`GenericTreeNode<GISEntry>`我们必须使用`? extends GISEntry`and `? super GISEntry`，这将使通用代码的复杂度增加一千倍。除非您想对泛型类`GenericTree<>`和进行一些繁重的子类化`GenericTreeNode<>`，否则使用该类型是完全没用的`?`；甚至对于收集不同类型的对象。除非您有多年的通用代码经验，否则不要使用该`?`符号。大多数项目都可以使用更简单的通用代码完全正常。

我还为感兴趣的人添加了一些在通用树上迭代的示例`build()`和`buildWithDepth()`函数。

最后，作为参考，此通用树在[http://vivin.net/2010/01/30/generic-n-ary-tree-in-java/](http://vivin.net/2010/01/30/generic-n-ary-tree-in-java/)（3 页）中进行了解释。

# c# - EF 6 System.Data.Objects.ObjectContext 错误

> ID：14106286
> 
> 赞同：36
> 
> 时间：2012-12-31T21:45:35.773
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, azure-sql-database, entity-framework-6

我最近从实体框架 5 升级到实体框架 6 Alpha 2，我收到以下错误：

> 找不到方法：“System.Data.Objects.ObjectContext System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext()”。

当我打电话时，这会被击中

```
if (Membership.ValidateUser(model.UserName, model.Password)) {} 
```

在不确定为什么会出现此错误之前，这曾经可以正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-01T20:54:11.523

EF 6 没有`System.Data.Objects.ObjectContext`。EF 6 已将一些类型（包括`ObjectContext`, from ）`System.Data.Entity.dll`移入`EntityFramework.dll`，并更改了它们的命名空间。您收到此错误的事实表明您没有尝试重新编译您的应用程序，您只是替换`EntityFramework.dll`并希望获得最好的结果。那是行不通的。您需要更新代码以使用 EF 6：您需要删除对 的引用`System.Data.Entity.dll`，并更新代码以引用新类型。

对`IObjectContextAdapter.ObjectContext`属性的引用可能在您正在使用的某个库中，但很可能在您自己的代码中。错误消息（在您的问题中未包含的部分）应该告诉您它来自哪里。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-18T20:04:06.043

对我来说，更新以下这些工作：
`using System.Data.Objects; --> using System.Data.Entity.Core.Objects;`

`using System.Data.Objects.DataClasses; --> using System.Data.Entity.Core.Objects.DataClasses;`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-18T22:27:01.030

我也在用`EF 6`。

我设法解决了卸载软件包[`Microsoft.AspNet.Providers.Core`](https://nuget.org/packages/Microsoft.AspNet.Providers.Core)v. 1.2 的问题。我使用的是 1.1 版。如果您像我一样正在使用`LocaDb`，则必须卸载该`LocaDb`软件包，因为它依赖于该软件包。当然，您必须再次重新安装 LocaDb ......

您可以使用 Visual Studio 中的 NuGet 包管理器控制台获取 1.1 版：

```
Install-Package Microsoft.AspNet.Providers.Core -Version 1.1 
```

* * *

有一个关于此问题的 Microsoft Connect 错误：

[Microsoft.AspNet.Providers.Core 与 EF6 不兼容](https://connect.microsoft.com/VisualStudio/feedback/details/801350/microsoft-aspnet-providers-core-incompatible-with-ef6)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-07T12:59:26.913

提供程序的新 2.0 版本 ( [http://www.nuget.org/packages/Microsoft.AspNet.Providers.Core/](http://www.nuget.org/packages/Microsoft.AspNet.Providers.Core/) ) 与 EF6 兼容（它们实际上仅适用于 EF6）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-22T21:53:48.783

我设法通过删除我通过 Nuget 安装的 AspNet 提供程序来解决这个问题，这些提供程序被标记为已弃用。这样做也卸载了实体框架。

然后我安装了新的 AspNet Universal Providers，然后安装了 Entity Framework 6，我的所有问题都得到了解决。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-01T14:19:03.353

检查此链接

[http://visualstudiomagazine.com/articles/2014/03/01/whats-new-in-entity-framework-6.aspx](http://visualstudiomagazine.com/articles/2014/03/01/whats-new-in-entity-framework-6.aspx)

我更新了 EF 6.2 并得到相同的错误并找到解决方案作为休闲

将命名空间 System.Data.Entity 更改为 System.Data.Entity.Core，包括对 System.Data.* 命名空间的任何引用（例如，System.Data.Objects 变为 System.Data.Entity.Core.Objects）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-01T12:54:55.983

对我有用的是以下内容：

1.  使用以下命令安装 dll 'Microsoft.AspNet.DataSource'：

    PM> 安装包 Microsoft.AspNet.EntityDataSource

2.  在您的项目中引用“Microsoft.AspNet.DataSource.dll”。

3.  添加了以下使用声明：

    使用 System.Data.Entity.Core.Metadata.Edm；

    使用 System.Data.Entity.Core.Objects；

    使用 Microsoft.AspNet.EntityDataSource；

4.  删除了以下 using 声明：

    使用 System.Data.Entity；

    使用 System.Data.Metadata.Edm；

    使用 System.Data.Objects；

    使用 System.Web.UI.WebControls；

瞧，代码正在编译和工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-17T04:04:00.053

当实体框架无法在机器中安装的 dotnet 框架库中找到方法时，就会发生这种情况。所以安装 dotnet framework 4.5.2 或更高版本。它将解决问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-12T14:57:38.873

它有一个与 edmx 文件相关的旧版本：

*   使用 Nuget 重新安装 EF
*   删除 .edmx 文件并使用表重新创建它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-16T13:04:56.493

对我来说，一个快速简单的解决方法是删除有问题的程序集（已弃用）并添加对新库的引用。代码在 Context.tt 中进行了修改，如下所示：

```
if (container.FunctionImports.Any())
{
#>
using System.Data.Entity.Core.Objects; // The assembly you need
using System.Linq;
<#
} 
```

在进行任何修改之前，它看起来是这样的：

```
if (container.FunctionImports.Any())
{
#>
using System.Data.Objects; // Error on compile
using System.Data.Objects.DataClasses; // Error on compile
using System.Linq;
<# 
```

# jquery - jquery 获取单选按钮选择

> ID：14106294
> 
> 赞同：0
> 
> 时间：2012-12-31T21:47:46.210
> 
> 标签：jquery

我正在学习 jquery，但似乎无法从 asp.net 单选按钮列表中的单选按钮列表中找到所需的单选按钮的值。

这是标记；

```
 <fieldset style="width:50%;">
        <legend>Select one option below</legend>
        <div id="radioContactTasks">
            <asp:RadioButtonList ID="rblAddEditContact" runat="server"
                         RepeatDirection="Vertical" 
                         CssClass="registerradio" TextAlign="Left">
                <asp:ListItem Text="Add New Contact" />
                <asp:ListItem Text="Edit Existing Contact" />
                <asp:ListItem Text="Delete Existing Contact" />
            </asp:RadioButtonList>
        </div>
    </fieldset> 
```

我尝试了各种方法，都没有奏效。这是最新的变化，只是提醒我选择了什么。

```
$(document).ready(function () {
        $("#rblAddEditContact").on("change", ":radio", function () {
            alert($(this).siblings("label").value);
        });
    }); 
```

这是呈现的html

```
<fieldset style="width:45%;">
    <legend>Add New or Edit Exisiting Contacts</legend>
    <fieldset style="width:50%;">
        <legend>Select one option below</legend>
        <div id="radioContactTasks">
            <table id="MainContent_rblAddEditContact" class="registerradio">
<tr>
    <td><label for="MainContent_rblAddEditContact_0">Add New Contact</label><input id="MainContent_rblAddEditContact_0" type="radio" name="ctl00$MainContent$rblAddEditContact" value="Add New Contact" /></td>
</tr><tr>
    <td><label for="MainContent_rblAddEditContact_1">Edit Existing Contact</label><input id="MainContent_rblAddEditContact_1" type="radio" name="ctl00$MainContent$rblAddEditContact" value="Edit Existing Contact" /></td>
</tr><tr>
    <td><label for="MainContent_rblAddEditContact_2">Delete Existing Contact</label><input id="MainContent_rblAddEditContact_2" type="radio" name="ctl00$MainContent$rblAddEditContact" value="Delete Existing Contact" /></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:01:54.527

可能的解决方案是

```
$('input[type=radio]:checked').val(); 
```

或稍长但相同，应该也可以

```
$('input[type=radio]').filter(':checked').val(); 
```

随时随地获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:59:20.820

```
$(document).ready(function () {    
    $('#MainContent_rblAddEditContact input[type=radio]').change(function(){
      alert( $(this).val() );
    });
}); 
```

现场演示：http: [//codepen.io/joe/pen/DJleG](http://codepen.io/joe/pen/DJleG)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T22:19:40.730

如果你的`radio`按钮有`value`这样的

```
<input type="radio" value="rdo-1" name="radio1" /> 
```

那么你可以试试这个来获得`rdo-1`

```
$("#radioContactTasks [type='radio']").on("change", function () {
    alert($(this).val()); // rdo-1
}); 
```

[**例子**](http://jsfiddle.net/Z5DZa/1/)。

否则，如果你的`radio`按钮是这样的，没有值属性

```
<input type="radio" name="radio1" /> 
```

那么我认为你不需要上面的代码，因为`radio`在一个命名组中只能选择一个按钮，它的值可以是`on`or `off`，在这种情况下`$(this)`，处理程序内部总是`checked`一个，它的值将是`on`.

[**例子**](http://jsfiddle.net/Z5DZa/)。

或者，如果您需要在处理程序`radio`之外获取按钮的检查值，`change`那么您可以使用它

```
$("#radioContactTasks input[type='radio']:checked").val(); 
```

[**例子**](http://jsfiddle.net/Z5DZa/2/)。

P/S：如果您现在仍然有困惑，那么我建议您发布浏览器呈现的源代码。

# node.js - Node.js TCP 套接字会话

> ID：14106296
> 
> 赞同：1
> 
> 时间：2012-12-31T21:48:07.573
> 
> 标签：node.js, sockets, session, authentication, tcp

我有多个客户端从应用程序连接到 Node.js TCP 套接字服务器。我想知道一种管理他们会话的安全方式。

用户名 + 密码通过套接字传递到服务器。服务器确认这是正确的。

我相信我现在需要生成一个唯一的令牌以发送回客户端。

现在，如果用户关闭应用程序，然后再次打开它，此令牌可以传递给服务器，因此服务器将确认用户再次通过身份验证。

但是，其他人可能会使用此令牌来访问此人的帐户。有没有办法防止这种情况？

是否有更安全的方法（同时仍保持用户无需再次登录即可进行身份验证的能力）？

您将如何使用相同的登录名处理来自其他设备的连接。他们得到不同的令牌还是相同的令牌？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:58:15.680

这取决于您对足够安全的定义。您现在正在做的事情，本质上是会话跟踪，并且对于许多通用用途而言通常足够安全 - 但是通常会添加一个额外的组件，其中会话应仅被视为对特定 IP 有效。如果用户的 IP 发生变化，你应该让他们重新登录并给他们一个新的令牌。这样，如果一些坏人劫持了他们的会话 ID，那对他们没有任何好处。

当然，这仅在您的坏人无法与您的客户端来自同一 IP 地址时才有效。如果您担心与您的客户端位于同一 NAT 后面的坏人，因此可能看起来来自同一 IP，那么您将不得不进一步提高安全性，并且可能考虑使用类似于 SSH 的系统用途，但这有点复杂。

至于来自多个设备的连接，这取决于您 - 您可以跟踪某个令牌并在用户从不同 IP 登录时交回该令牌（同时现在允许两个 IP 访问该站点使用相同的令牌），或者您可以在每次有人进行身份验证时发出一个新的令牌。就我个人而言，我倾向于发现发行新令牌更容易，更少跟踪和麻烦......但这取决于您的应用程序以及您想要如何组织事物，我可以为这两种方法设计好的用例。

* * *

另外，至于进行密码交换..您至少应该在那里进行一些哈希处理，即服务器向客户端发送 some `random_string`，然后客户端使用某些`hash`函数（例如`md5`or `sha`）进行计算`hash(random_string + hash(username + password))`并将其发送回。`hash(random_string + password_hash)`然后，服务器通过检查是否等于用户发送的任何内容来验证此匹配。这使得用户的纯文本密码永远不必存储在任何地方 - 在`password_hash = hash(username+password)`密码更改时您只需存储的服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:26:52.673

也许是这样的：

```
FIRST LOGIN:
username + pwd (hashed)       ---> check user/hashed pwd
receive token                 <--- send token 

NEXT LOGIN:
request login                 ---> receive request 
receive random string         <--- send random string
hash string with token as salt ---> compare hashed string 
```

您应该只允许使用该随机字符串进行一次尝试，如果可能，请检查原始登录的 IP。

这并不完美，因为您仍然可以在登录时拦截令牌，但是您还将拥有用户名和密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:55:00.747

这个问题基本上归结为使用被盗 cookie 进行的会话劫持。所以问题是如何尽可能地保护 cookie。

1.  使用 https 而不是 http**并强制您的用户使用 https**。这样，cookie 就不会以明文形式传输，也不会被窃听。

2.  在 cookie 上设置`secure`属性（参见[Wikipedia](http://en.wikipedia.org/wiki/HTTP_cookie#Secure_and_HttpOnly)）以将 cookie 绑定到 https 并避免它通过 http 传输。

3.  使用某种消息身份验证摘要，例如 HMAC，以确保 cookie 没有被篡改。

4.  或者，您可以将客户端的 IP 地址嵌入到 cookie 中，并且仅在从特定 IP 发送时才接受它。不幸的是，这可能会导致代理服务器或不时重新分配 IP 地址的拨号连接出现问题。

5.  最后但并非最不重要的一点是，允许一个令牌在给定时间点仅使用一次。如果用户在第二台机器上使用相同的令牌登录，则要么禁止连接，要么结束第一台机器的会话。

希望这可以帮助 ...

**PS：非常抱歉，我跳过了*TCP*部分。当然我写的大部分内容只适用于http，而不适用于TCP。无论如何，有些事情可能会有所帮助，例如#3、#4 和#5。**

# android - 更改警报管理器使用的挂起意图的意图

> ID：14106299
> 
> 赞同：1
> 
> 时间：2012-12-31T21:48:44.463
> 
> 标签：android, alarmmanager, android-pendingintent

我设置了一些警报，例如：

```
public void SetAlarm(Context context, int tag, long time){
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     i.putExtra("position", tag);
     PendingIntent pi = PendingIntent.getBroadcast(context, tag, i, PendingIntent.FLAG_CANCEL_CURRENT);
     am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ time, pi); // Millisec * Second * Minute

 } 
```

现在由于某种原因我想更新`Intent i`触发警报的。我有用于识别欲望警报的 id(tag)。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T18:30:37.417

如果您只想更改 中的附加功能`Intent`，您可以这样做：

```
Intent i = new Intent(context, Alarm.class);
// Set new extras here
i.putExtra("position", tag);
// Update the PendingIntent with the new extras
PendingIntent pi = PendingIntent.getBroadcast(context, tag, i,
        PendingIntent.FLAG_UPDATE_CURRENT); 
```

否则，如果您想更改其中的任何其他内容`Intent`（例如操作、组件或数据），您应该取消当前警报并创建一个新警报，如下所示：

```
AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, Alarm.class);
// Extras aren't used to find the PendingIntent
PendingIntent pi = PendingIntent.getBroadcast(context, tag, i,
        PendingIntent.FLAG_NO_CREATE); // find the old PendingIntent
if (pi != null) {
    // Now cancel the alarm that matches the old PendingIntent
    am.cancel(pi);
}
// Now create and schedule a new Alarm
i = new Intent(context, NewAlarm.class); // New component for alarm
i.putExtra("position", tag); // Whatever new extras
pi = PendingIntent.getBroadcast(context, tag, i, PendingIntent.FLAG_CANCEL_CURRENT);
// Reschedule the alarm
am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ time, pi); // Millisec * Second * Minute 
```

# ios - 创建一个 viewController 还是两个表合二为一？

> ID：14106301
> 
> 赞同：0
> 
> 时间：2012-12-31T21:48:58.007
> 
> 标签：ios, parsing, viewcontroller, tabbarcontroller

我正在解析一个 XML 文档，该文档包含来自同一类型项目（主题和学校）的一个 XML 文档的两个分支，由 tabBarController 连接。

现在，主题已填充，但我不知道填充学校的正确方法：

**我应该为 School 创建另一个 viewController，还是在现有 viewController 中有某种条件语句/选择器与 Topics 共享空间？** 如果是后者，那怎么办？

我想第一次做这件事，请知道我几乎一无所知。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:46:46.510

如果两个信息在表格的一个单元格中以相同的方式呈现，你应该使用相同的视图控制器，改变的是数据源。您可以使用附加类型参数创建自定义初始化方法，该类型参数可以假定值“主题”或“学校”，并基于此值从 xml 文件中填充数组，并使用适当的元素。

# javascript - 在 asp.net 页面之间传递复选框值

> ID：14106303
> 
> 赞同：0
> 
> 时间：2012-12-31T21:49:10.567
> 
> 标签：javascript, c#, asp.net-mvc, asp.net-ajax, dom-events

在一个 ASP.NET 页面上，我有一个`DataTable`投资者列表。客户希望添加一个功能，允许他们的用户从该列表中选择个人投资者，并拥有一个电子邮件按钮，该按钮将打开一个电子邮件页面并使用投资者电子邮件填充密件抄送。到目前为止，我已经实现了复选框，并且我成功地通过了复选框并仅获取了选中框的电子邮件。从这一点开始，我完全不知道如何将该日期发送到下一页并让它们自动填写密件抄送。到目前为止，这是我的代码：

```
<a onclick="grabEmail()" href="/Settings/EmailSelect" class="button blue" >Email Selected</a> 
...
...
...
<script type="text/javascript">
    function grabEmail() {
    var emails = new Array();
    var $checked = $('[@id=investoremails:checked');
    $checked.each(function () {
        emails.push($(this).val());
        alert($(this).val()); //This was just to check to make sure emails 
                              //were grabbed
    }

    );

    $.ajax({
        url: '/Settings/EmailSelect/',
        type: "POST",
        data: emails,
        traditional: true,

    });
} 
```

然后，在 EmailSelect 页面上...

```
 $(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "/Settings/EmailSelect",
        error: function (xhr, status, error) {
            $("#results").html("An error occurred: " + error).addClass("notification error");
            return false;
        },
        success: function(response) {
            if (response != null) {
                if (!response.Successful) {
                    $("#results").html("An error occurred: " + response.Exception).addClass("notification error");
                    return false;
                } else {
                    $("#bcc").val(response.ReturnVal);
                }
            }
        }
    });
}); 
```

而对于控制器..

```
public ActionResult EmailSelect(string[] emails)
    {
        ViewData["Selected"] = emails;
        return View();
    } 
```

我们在这个程序中有一些类似的功能，投资者可以成为用户创建的组的一部分，并且还有另一个电子邮件页面，用户可以在其中选择要发送电子邮件的特定组，我试图以此为基础解决这个问题（甚至尽管它们本质上是不同的..）。如果有人能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:24:53.007

我应该早点回答这个问题，但我忘记发布了。

我对 MVC 表单以及它们如何与控制器交互进行了一些研究，通过将复选框作为字符串数组拉入控制器，然后将它们传递到 ViewData 中的下一页，我可以轻松地使其工作。

# php - 将图像上传到站点

> ID：14106311
> 
> 赞同：1
> 
> 时间：2012-12-31T21:51:17.460
> 
> 标签：php, html

我正在努力让用户将自己的缩略图上传到我的网站。我的代码是

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
        $explode = explode(".", $_FILES["file"]["name"]);
        $extension = end($explode);
        if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg") ||   ($_FILES["file"]["type"] == "images/jpg")) && ($_FILES["file"]["size"] < 50000) && in_array($extension, $allowedExts))
        {
            $sDate = date("m-d-Y");
            $sRandString = randomString(50);
            $sFileName = rename($_FILES["file"]["tmp_name"], $sDate . $sUsername . $sRandString);   //The name of the file
            $sTargetLink = $_PARAM["ThumbnailDir"] . $sFileName;

            if ($_FILES["file"]["error"] > 0)
                echo "There has been an unexpected error, we're working on fixing it as soon as possible. Please try again later.";
            else
            {
                if (file_exists($_PARAM["ThumbnailDir"] . $sFileName))
                {
                    unlink($_PARAM["ThumbnailDir"] . $sFileName);
                    $sFileLocation = $_PARAM["WebsiteAddress"]."images/thumbnails/".$sFileName; //The location of the file
                    move_uploaded_file($_FILES["file"]["tmp_name"],$_PARAM["ThumbnailDir"] . $sFileName);
                    echo "The thumbnail has been successfully uploaded.";
                    unlink($_FILES["file"]["tmp_name"]);
                }
                else
                {
                    $sFileLocation = $_PARAM["WebsiteAddress"] . "images/thumbnails/" . $sFileName; //The location of the file
                    $move = move_uploaded_file($_FILES["file"]["tmp_name"], $sTargetLink);
                    if ($move) echo "The thumbnail has been successfully uploaded.";
                    unlink($_FILES["file"]["tmp_name"]);
                }
            }
        } 
```

然后链接位置将保存在数据库中，允许可检索到图像的链接。但是，无论何时提交，页面都会返回：

> 警告：move_uploaded_file(C:\xampp\xxxxx\php3D71.tmp)：打开流失败：第 117 行的 C:\xampp\xxxxxxx\xxxxx\xxxx.php 中没有这样的文件或目录
> 
> 警告：move_uploaded_file(): Unable to move 'C:\xampp\xxxxx\php3D71.tmp' to 'C:\xampp\xxx\xxx\thumbnails1' in C:\xampp\xxxxxxxxx\xxx\xx\x.php on第 117 行

我不知道出了什么问题。表格是 enctype="multipart/form-data" 有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:20:36.003

**问题 1 -**
尝试更改为 -

```
$sFileName = $sDate . $sUsername . $sRandString;
rename($_FILES["file"]["tmp_name"], $sFileName);   //The name of the file
$sTargetLink = $_PARAM["ThumbnailDir"] . $sFileName; 
```

因为`rename()`返回true，这条线 -

```
$sTargetLink = $_PARAM["ThumbnailDir"] . $sFileName; 
```

正变成

```
$sTargetLink = 'thumbnails' . 1; //  => thumbnails1 
```

**问题 2 -**
您的`move_uploaded_file()`警告/错误是因为它找不到您的`thumbnails`文件夹。仔细检查您的目标路径/目录。确保它是绝对正确的。

另一个可能的问题是我看不到`/`between `$_PARAM["ThumbnailDir"]`&`$sFileName`来表示文件夹`thumbnails ~ ($_PARAM["ThumbnailDir"])`。它可以像更改为一样简单 -

```
$sTargetLink = $_PARAM["ThumbnailDir"] .'/'.$sFileName; 
```

# ios - 尝试在 iOS 中显示表格内容时无法从 NSUserDefaults 加载数据

> ID：14106315
> 
> 赞同：2
> 
> 时间：2012-12-31T21:51:39.450
> 
> 标签：ios, uitableview, nsmutablearray, nsuserdefaults

我有一个 iOS 应用程序，在没有 WiFi 或数据连接的情况下将两个`NSMutableArray`'s 作为对象存储在其中。`NSUserDefaults`在随后的访问中，用户应该能够通过从中检索保存的数据来将存储的数据加载到他们的表中`NSUserDefaults`，但不幸的是我无法这样做。`NSMutableArrays`它们正在存储将各种`NSString`值作为参数的对象。

这是将我的数据保存在我的 Singleton 类中的代码：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[DataModel sharedInstance].testResultList forKey:@"resultTable"];
    [defaults setObject:[DataModel sharedInstance].testResults forKey:@"jsonTable"];
    [defaults synchronize]; 
```

这是来自`UITableView`类的代码，它应该检索数据并将它们加载到表中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([[DataModel sharedInstance].testResults count] == 0) {

        if ([defaults objectForKey:@"resultTable"] == nil) {

            return;
        }

        else {

            [DataModel sharedInstance].testResultList = [defaults objectForKey:@"resultTable"];
            [DataModel sharedInstance].testResults = [defaults objectForKey:@"jsonTable"];

        }

    }

} 
```

这是我的`cellForRowAtIndexPath()`方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"testresultcell";
    ResultTableViewCell *cell = (ResultTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[ResultTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    TestResult *tResult = [[DataModel sharedInstance].testResultList objectAtIndex:indexPath.row];
    cell.name.text = tResult.testTitle;
    cell.date.text = tResult.dateStamp;
    cell.score.text = [[DataModel sharedInstance] getScore:tResult.score];
    cell.imgView.image = [UIImage imageNamed:[[DataModel sharedInstance] getImg:tResult.score]];

    return cell;
} 
```

谁能看到我做错了什么？我最初正在检查`NSMutableArray`'s 的当前值是否为空。只有这样我才会去检查是否`NSMutableArray`存在已保存的副本。如果是这样，那么我需要加载数组并在我的表中显示内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:04:24.507

这样做的典型模式如下（我通常在我的 ApplicationDelegate 中这样做）：

```
// Set up some default values
NSDictionary *myDefaults = @{@"aStringDefaultKey":@"someString",@"aBoolKey":@YES};

// Register the default values
[[NSUserDefaults standardUserDefaults] registerDefaults:myDefaults];

// Get a reference to them
NSUserDefaults *userSettings = [NSUserDefaults standardUserDefaults]; 
```

我看不到您在哪里使用 NSUserDefaults 注册了默认值。如果您不这样做，则在没有先前设置的值的情况下，它们将不会作为默认值提供。

然后稍后您可以引用该值或使用以下方式设置该值：

```
// Set a value or update a value
[userSettings setObject:@"anotherString" forKey:@"aStringDefaultKey"];
[userSettings objectForKey:@"aStringDefaultKey"]; 
```

**编辑：**如果事实证明您的 DataModel 对象（您没有发布任何代码）因为不符合 NSCopy 规则而无法存储，则将其序列化为可以存储在 NSDictionary 中的 NSData 对象，并且那样做。

# java - 为 Applet 指定代码路径

> ID：14106317
> 
> 赞同：1
> 
> 时间：2012-12-31T21:52:01.543
> 
> 标签：java, html, path, applet

我对如何在网页中正确指定小程序的代码属性感到困惑。我有一个绝对路径为的小程序

```
~/workspace/myProject/bin/A/B/C/app.class 
```

我的 HTML 在 myProject 下。app.class 的包声明为

```
package A.B.C 
```

如何指定页面应首先在 bin 中查找，然后在 A、B、C 中查找？如果我将页面粘贴在 /bin 中，我可以使用

```
code = "A/B/C/app.class" 
```

它工作正常，但把它放在 myProject 中并尝试

```
code = "bin/A/B/C/app.class" 
```

不起作用。我认为是因为那个包声明，但我不知道如何修复它；我无法更改包声明。我需要使用 . 某种程度上来说？我之前已经看到并在[另一个解决方案](https://stackoverflow.com/questions/11692373/applet-trouble-noclassdeffounderror)中使用它，但尝试使用 . 而不是 / 也不起作用。作为一个附带问题，有人可以解释 . 并且是？[这](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)只是说它用于描述文件类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:57:03.573

您将使用点而不是斜线并`CODEBASE`相应地指定

```
<applet code="A.B.C.app.class" codebase="bin" width="300" height="200">
</applet> 
```

# c++ - 使用 std::vector 与 std::list 时的 Linux 内存使用情况排在首位

> ID：14106320
> 
> 赞同：6
> 
> 时间：2012-12-31T21:52:16.240
> 
> 标签：c++, linux, memory, heap-memory, allocator

我注意到 Linux 中关于内存使用 (RES) 报告的一些有趣行为`top`。我附上了以下程序，它在堆上分配了几百万个对象，每个对象都有一个大约 1 KB 的缓冲区。指向这些对象的指针由 a`std::list`或 a跟踪`std::vector`。我注意到的有趣行为是，如果我使用 a `std::list`，则报告的内存使用情况`top`在睡眠期间永远不会改变。但是，如果我使用`std::vector`，则在这些睡眠期间内存使用量将降至接近 0。

我的测试配置是：
Fedora Core 16
Kernel 3.6.7-4
g++ version 4.6.3

**我已经知道：**
1\. std::vector 将根据需要重新分配（使其大小加倍）。
2\. std::list （我相信）一次分配它的元素 1
3\. std::vector 和 std::list 都默认使用 std::allocator 来获取它们的实际内存
4\. 程序没有泄漏; valgrind 已声明不可能发生泄漏。

**我感到困惑的是：**
1\. std::vector 和 std::list 都在使用 std::allocator。即使 std::vector 正在执行批量重新分配，std::allocator 不会以几乎相同的安排将内存分配给 std::list 和 std::vector 吗？这个程序毕竟是单线程的。
2\. 我在哪里可以了解 Linux 的内存分配行为。我听说过有关 Linux 将 RAM 分配给进程即使在它释放它之后仍保留它的声明，但我不知道这种行为是否得到保证。为什么使用 std::vector 会对这种行为产生如此大的影响？

非常感谢您阅读本文；我知道这是一个非常模糊的问题。我在这里寻找的“答案”是如果这种行为是“定义的”，我可以在哪里找到它的文档。

```
#include <string.h>
#include <unistd.h>
#include <iostream>
#include <vector>
#include <list>
#include <iostream>
#include <memory>

class Foo{
public:
    Foo()
    {
        data = new char[999];
        memset(data, 'x', 999);
    }

    ~Foo()
    {
        delete[] data;
    }

private:
    char* data;

};

int main(int argc, char** argv)
{
    for(int x=0; x<10; ++x)
    {
        sleep(1);
        //std::auto_ptr<std::list<Foo*> > foos(new std::list<Foo*>);
        std::auto_ptr<std::vector<Foo*> > foos(new std::vector<Foo*>);
        for(int i=0; i<2000000; ++i)
        {
            foos->push_back(new Foo());
        }
        std::cout << "Sleeping before de-alloc\n";
        sleep(5);
        while(false == foos->empty())
        {
            delete foos->back();
            foos->pop_back();
        }
    }
    std::cout << "Sleeping after final de-alloc\n";
    sleep(5);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:43:30.310

内存的释放是在“块”的基础上完成的。当您使用列表时，很有可能内存会被分割成小块。

当您使用向量进行分配时，所有元素都存储在一个大块中，因此内存释放代码很容易说“天哪，我这里有一个非常大的空闲区域，我将把它释放回操作系统”。也完全有可能在增大向量时，内存分配器进入“大块模式”，它使用与“小块模式”不同的分配方法 - 例如，您分配超过 1MB，内存分配代码可能会看到作为开始使用不同策略的好时机，只需向操作系统询问“完美契合”的内存。这个大块在被释放时很容易释放回操作系统。

另一方面，如果您要添加到列表中，您会不断地要求小块，因此分配器使用不同的策略，要求大块然后分配小块。确保块中的所有块都已被释放既困难又耗时，因此分配器很可能“不打扰”——因为很可能那里有一些区域“仍在使用”，然后它就可以了无论如何都不能被释放。

我还要补充一点，使用“top”作为内存度量并不是一种特别准确的方法，而且非常不可靠，因为它在很大程度上取决于操作系统和运行时库的功能。属于一个进程的内存可能不是“常驻”的，但该进程仍然没有释放它——它只是不“存在于实际内存中”（而是在交换分区中！）

对于您的问题“这是在某处定义的”，我认为在某种意义上是 C/C++ 库源代码定义了它。但它并没有被定义为某处写着“这就是它的工作方式，我们承诺永远不会挂掉它”。作为 glibc 和 libstdc++ 提供的库不会这么说，它们会随着新技术和想法的发明而改变 malloc、free、new 和 delete 的内部结构——有些可能会使事情变得更好，有些可能会使事情变得更糟，对于给定的设想。

正如评论中指出的那样，内存没有锁定到进程。如果内核认为内存更好地用于其他用途[并且内核在这里是无所不能的]，那么它将从一个正在运行的进程中“窃取”内存并将其提供给另一个进程。尤其是很久没有“触动”过的记忆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:03:35.893

> 1\. std::vector 和 std::list 都在使用 std::allocator。即使 std::vector 正在执行批量重新分配，std::allocator 不会以几乎相同的安排将内存分配给 std::list 和 std::vector 吗？这个程序毕竟是单线程的。

那么，有什么区别？

*   `std::list`一个接一个地分配节点（每个节点除了你的 之外还需要两个指针`Foo *`）。此外，它永远不会重新分配这些节点（这是由 的迭代器无效要求保证的`list`）。因此，`std::allocator`它将从底层机制请求一系列固定大小的块（可能`malloc`又会使用`sbrk`or`mmap`系统调用）。这些固定大小的块可能比列表节点大，但如果是这样，它们都将与`std::allocator`.

*   `std::vector`分配一个连续的指针块，没有记账开销（全部在向量父对象中）。每次 a`push_back`溢出当前分配时，向量将分配一个新的更大的块，将所有内容移至新块，并释放旧块。现在，新块将是旧块大小的两倍（或 1.6 倍，或其他），这*是*为`push_back`. 因此，很快，我希望它请求的大小超过`std::allocator`.

因此，有趣的交互是不同的：一种在`std::vector`分配器与底层机制之间，另一种在分配器`std::allocator`本身与底层机制之间。

> 2\. 我在哪里可以了解 Linux 内存分配的行为。我听说过有关 Linux 将 RAM 分配给进程即使在它释放它之后仍保留它的声明，但我不知道这种行为是否得到保证。为什么使用 std::vector 会对这种行为产生如此大的影响？

您可能会关心几个级别：

1.  容器自己的分配模式：希望在上面描述
    *   请注意，在实际应用中，容器的*使用*方式同样重要
2.  `std::allocator`本身，它可以为小分配提供一层缓冲
    *   我不认为这是标准所要求的，所以它特定于您的实施
3.  底层分配器，取决于您的`std::allocator`实现（例如，它可能是`malloc`，但它是由您的 libc 实现的）
4.  内核使用的 VM 方案，以及它与任何系统调用 (3) 最终使用的交互

* * *

在您的特定情况下，我可以想到一个可能的解释，即向量显然比列表释放更多内存。

考虑向量以单个连续分配结束，并且许多`Foo`s 也将连续分配。这意味着当您释放所有这些内存时，很容易发现大多数底层页面都是真正免费的。

`Foo`现在考虑列表节点分配与实例1:1 交错。即使分配器进行了一些批处理，堆似乎也比实际`std::vector`情况更加碎片化。因此，当您释放分配的记录时，需要进行一些工作来确定底层页面现在是否空闲，并且没有特别的理由期望会发生这种情况（除非随后的大分配鼓励合并堆记录）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T15:22:29.240

答案是 malloc “fastbins” 优化。std::list 创建微小的（小于 64 字节）分配，当它释放它们时，它们实际上并没有被释放 - 而是进入 fastblock 池。这种行为意味着即使在列表被清除后堆仍然是碎片的，因此它不会返回到系统。

您可以使用 malloc_trim(128*1024) 强制清除它们。或者使用 mallopt(M_MXFAST, 0) 来完全禁用 fastbins。

如果你真的不再需要内存时调用它，我发现第一个解决方案更正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T00:54:17.600

较小的块通过 brk 并调整数据段并不断拆分和融合，而较大的块 mmap 过程受到的干扰少一些。更多信息 ( [PDF](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http%3A%2F%2Fwww.inf.udec.cl%2F~leo%2FMalloc_tutorial.pdf&ei=nzLiUN-IDoSA2wXP-IHgBg&usg=AFQjCNF3hSXldxz3Pwk8lGAii4PwkKN0GQ&sig2=de4U0nq7cZ-nOYoeC08Ilg&bvm=bv.1355534169,d.b2I) )

还有 ptmalloc 源代码。

# php - 试图运行一个 cronjob，即使是非常简单的也行不通

> ID：14106324
> 
> 赞同：-3
> 
> 时间：2012-12-31T21:52:31.083
> 
> 标签：php, cron

我正在尝试运行这个：

`* * * * * lynx http://www.domain.com/cron/updatetest.php`

那应该很简单，但仍然行不通。现在这真的很奇怪，因为这应该有效。当我将地址放入浏览器（真实的）时，它工作得很好。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:10:19.380

cron 的问题通常是环境问题。在这种情况下，可能是 lynx 没有可使用的终端。由于您只想请求页面，请尝试

```
* * * * * lynx -dump http://www.domain.com/cron/updatetest.php >/dev/null 2>&1 
```

如果您想保存请求的页面，请使用类似

```
* * * * * lynx -dump http://www.domain.com/cron/updatetest.php >/path/to/file.txt 
```

也可以看看[`man lynx`](http://linux.die.net/man/1/lynx)

# java - 如何让 xgettext 支持 i18n Java？

> ID：14106329
> 
> 赞同：0
> 
> 时间：2012-12-31T21:53:31.737
> 
> 标签：java, internationalization, gettext

我正在尝试使用带有以下行的 xgettext 从 Java 项目中提取字符串：

```
xgettext --lanaguage=Java C:\workspace\HelloWorldJava\src\com\Dummy.java 
```

我收到以下错误：

```
language 'Java' unknown 
```

当我删除 --lanaguage=Java 参数并执行同一行时，我得到以下信息：

```
warning:file 'C:\workspace\HelloWorldJava\src\com\Dummy.java' extension 'java' is unknown; will try C 
```

如何让 xgettext 支持 i18n Java？

我从这里在 Windows 7 64 位上运行 xgettext win 32 二进制文件（“GNU gettext for WIN32”）：

[http://franco-bez.4lima.de/index.php?option=com_content&view=article&id=55&Itemid=64&lang=en](http://franco-bez.4lima.de/index.php?option=com_content&view=article&id=55&Itemid=64&lang=en)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:16:00.230

我猜你已经安装了一个相当旧的 Gettext 版本。通过检查您提供的 URL 上可用的包的源代码，Java 支持不可用。您应该为 Windows 下载并安装更新的 Gettext 端口。

Django 的文档包含一些[在 Windows 上安装 Gettext 的简单说明](https://docs.djangoproject.com/en/1.3/topics/i18n/localization/#gettext-on-windows)。

# ruby - Ruby：使用 Net::HTTP 将批处理请求发布到 Facebook API 的语法

> ID：14106331
> 
> 赞同：1
> 
> 时间：2012-12-31T21:53:47.987
> 
> 标签：ruby, facebook-graph-api

使用 curl 以下命令是正确的，并且 Facebook API 会回复预期的响应：

> curl -F 'access_token=TOKEN' -F 'batch=[{"method":"GET", "relative_url":"facebook"},{"method":"GET", "relative_url":"youtube"}] ' [https://graph.facebook.com](https://graph.facebook.com)

我想将其转换为 Ruby，但一直在努力寻找正确的语法。我尝试了以下变体，但没有运气：

> uri = URI.parse('https://graph.facebook.com')
> 
> res = Net::HTTP.post_form(uri, 'access_token' => 'TOKEN', 'batch' => "[{'method':'GET', 'relative_url':'facebook'}]")

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:59:15.547

感谢[这个问题](https://stackoverflow.com/questions/7510356/how-do-i-encode-the-symbol-for-batch-requests)和[这篇博文](http://code.activestate.com/recipes/578343-easy-way-to-use-graph-facebook-api-without-ad-hoc-/)，这就是我的工作：

```
uri = URI("https://graph.facebook.com/")
req = Net::HTTP::Post.new(uri.path)
attach = {}

attach = {'batch' => [{"method" => "GET", "relative_url"=>"facebook"}].to_json}
req.set_form_data(attach.merge('access_token' => "TOKEN"))

res = Net::HTTP.new(uri.host, uri.port)
res.verify_mode = OpenSSL::SSL::VERIFY_NONE
res.use_ssl = true

response = nil
res.start do |http|
  response = http.request(req)
end 
```

# json - 谷歌 API 客户端 Rails

> ID：14106337
> 
> 赞同：1
> 
> 时间：2012-12-31T21:55:24.443
> 
> 标签：json, api, google-api, google-custom-search, google-api-ruby-client

我正在为 ruby​​ 使用 google-api-client 客户端 gem，并且每当我调用 API 时都会收到 403 Access Not Configured 错误。

```
 require 'google/api_client'
  client = Google::APIClient.new
  client.authorization = nil
  search = client.discovered_api('customsearch')
  response = client.execute( search.cse.list, 'key' => '<<MY KEY>>', 'cx' => '<<MY CX>>', 'alt' => 'json', 'q' => 'hello world') 
```

我试图在不使用 OAuth 的情况下进行搜索，而只使用 API 密钥。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:15:09.207

我有同样的问题，我是这样解决的：

**谷歌账户设置：**

1.  转到 Google API ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) )。
2.  在“服务”下启用您想要使用的服务（例如 Analytics API）。
3.  在“API 访问”下，通过单击蓝色大按钮创建 OAuth 客户端 ID。
4.  在下一个屏幕上输入您的产品信息（名称、徽标、网址）。
5.  在下一个屏幕上，由于通信将由服务器处理，我们选中“服务帐户”选项并单击“创建客户端 ID”按钮。
6.  下载刚刚生成的私钥，放到（{Rails.root}/config/.p12）。
7.  让 API 访问页面保持打开状态，因为您将在下一步中需要一些参数值。
8.  在新标签中，转到[https://developers.google.com/products/](https://developers.google.com/products/)并选择您要使用的服务。在左侧菜单中导航到配置 > 管理 API (v3) > 资源 > 授权 ( [https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization) )。在下表中，您将找到适当的 ":scope" 参数 URL（例如[https://www.googleapis.com/auth/analytics.readonly](https://www.googleapis.com/auth/analytics.readonly)）。这就是你如何找到合适的范围。
9.  请注意，“:issuer”参数是显示在客户端 ID 旁边的服务帐户的电子邮件地址（例如 @developer.gserviceaccount.com）。
10.  对于检查 URL（例如[https://developers.google.com/youtube/analytics/v1/](https://developers.google.com/youtube/analytics/v1/)将是 youtubeAnalytics，v1）。我通常会找到谷歌搜索的例子:)。
11.  请注意，这是“公钥指纹”值。
12.  请检查[https://github.com/google/google-api-ruby-client](https://github.com/google/google-api-ruby-client)上返回的每个对象的源代码。
13.  也许您必须将发行人电子邮件地址添加到您的 Google Analytics（分析）帐户。

**Ruby on Rails 代码：**

```
# creating client instance
client = Google::APIClient.new

# authenticating
key = Google::APIClient::PKCS12.load_key("#{Rails.root}/config/<STRANGE_LONG_FILENAME>.p12", 'notasecret')
client.authorization = Signet::OAuth2::Client.new(
  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
  :audience => 'https://accounts.google.com/o/oauth2/token',
  :scope => '<SCOPE_URL>',
  :issuer => '<HASH>@developer.gserviceaccount.com',
  :signing_key => key)
client.authorization.fetch_access_token!

# API call
# NOTE: Check the documentation for API methods and parameters). The method discovered_api returns a service object. We can use to_h.keys to get the list of available keys of that object. Keys represents API methods (e.g. "analytics.management.accounts.list" the API method path is "management.accounts.list").
result = client.execute(
  :api_method => client.discovered_api('<SERVICE_NAME>', 'v3').management.accounts.list,
  :parameters => { accountId: '~all', webPropertyId: '~all'}
)
if result.success?
    result.data
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:16:21.623

未配置访问意味着它是一个 API，需要在 API 控制台中注册您的项目，并从服务选项卡中打开自定义搜索 API。您的客户端由 OAuth 令牌或 API 密钥标识。必须提供一个或两个。我怀疑您只是未能在服务选项卡中打开 API，因为您的示例包含 API 密钥参数。

您也可以尝试更明确地传递参数：

```
result = client.execute(
  :api_method => search.cse.list,
  :key => '<<MY KEY>>',
  :parameters => {
    'cx' => '<<MY CX>>',
    'alt' => 'json',
    'q' => 'hello world'
  }
) 
```

# php - 从服务器下载 CSV 文件

> ID：14106343
> 
> 赞同：2
> 
> 时间：2012-12-31T21:55:51.727
> 
> 标签：php, csv

我正在查询我的数据库并使用结果创建一个 csv 文件。然后我在前端页面上放了一个链接，指向在服务器上创建的文件，如下所示：

```
function writetofile($stringData, $myFile) {
     $fh = fopen('download/'.$myFile, 'w') or die("can't open file");
     fwrite($fh, $stringData);
     fclose($fh);
}

$filename = $file."_".date("d-m-Y_H-i",time()).'.csv';

writetofile($seperator, $filename);
print 'Right-click on the link below and select "Save as":' . '<br/><br/>';
print 'Download File: <a href="/download/'.$filename.'" target="_blank">Download Link</a>'; 
```

出于某种原因，当我直接从服务器下载文件时，数据库中的所有行看起来都是正确的。但是，当我完成用户将执行的操作（即右键单击并保存）的步骤时，该文件仅包含此页面中的 html 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T22:06:19.437

**更新**看看[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

放置合适的php头文件，输出文件内容并退出：

```
<?php // none space here
function writetofile($stringData, $myFile)
{
    if ( ! file_exists('download/' . $myFile))
    {
        echo 'file missing';
    }
    else
    {
        header('HTTP/1.1 200 OK');
        header('Cache-Control: no-cache, must-revalidate');
        header("Pragma: no-cache");
        header("Expires: 0");
        header("Content-type: text/csv");
        header("Content-Disposition: attachment; filename=$myFile");
        readfile('download/' . $myFile);
        exit;
    }
} 
```

在任何情况下调查[http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)以确保正确的 csv 格式...

# python - SQLAlchemy 声明式：向列添加静态文本属性

> ID：14106348
> 
> 赞同：5
> 
> 时间：2012-12-31T21:56:50.843
> 
> 标签：python, sqlalchemy, bottle

我正在使用：SQLAlchemy 0.7.9 和 Python 2.7.3 和 Bottle 0.11.4。我是python的业余爱好者。

我有一个从声明性基础派生的类（有很多列），如下所示：

```
class Base(object):

     @declared_attr
     def __tablename__(cls):
             return cls.__name__.lower()

     id = Column(Integer, primary_key = True)

     def to_dict(self):
             serialized = dict((column_name, getattr(self, column_name))
                     for column_name in self.__table__.c.keys())
             return serialized

Base = declarative_base(cls=Base)

class Case(Base):

     version                 = Column(Integer)
     title                   = Column(String(32))
     plausible_dd            = Column(Text)
     frame                   = Column(Text)
     primary_task            = Column(Text)
     secondary_task          = Column(Text)
     eval_objectives         = Column(Text)
     ... 
```

我目前在Bottle中使用这个“路线”来转储json中的一行/类，如下所示：

```
@app.route('/<name>/:record')
def default(name, record, db):
    myClass = getattr(sys.modules[__name__], name)
    parms = db.query(myClass).filter(myClass.id == record)
    result = json.dumps(([parm.to_dict() for parm in parms]))
    return result 
```

我的第一个问题是：如何让每列都有一些静态文本，我可以将其用作专有名称，以便我可以遍历列并获取它们的值和专有名称？例如：

```
class Case(Base):
     version    = Column(Integer)
     version.pn = "Version Number" 
```

我的第二个问题是：以下是否符合我的要求？我见过这样的例子，但我不明白解释。

来自[sqlalchemy.org](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#customizing-column-properties)的示例：

```
 id = Column("some_table_id", Integer) 
```

我对示例的解释：

```
 version   = Column("Version Number", Integer) 
```

显然我不希望创建一个表列。我只是希望该列具有一般意义上的“属性”。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T23:05:04.303

[信息](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#sqlalchemy.schema.Column.info)字典可以用于此。在您的模型类中定义如下：

```
class Case(Base):
    version = Column(Integer, info={'description': 'Version Number'}) 
```

然后它可以作为表列属性访问：

```
desc = Case.__table__.c.version.info.get('description', '<no description>') 
```

* * *

**更新**

这是遍历表中所有列并获取它们的名称、值和描述的一种方法。此示例使用 dict 理解，它从 Python 2.7 开始可用。

```
class Case(Base):
    # Column definitions go here...

    def as_dict(self):
        return {c.name: (getattr(self, c.name), c.info.get('description'))
                for c in self.__table__.c} 
```

# sql-server - SQL Server - PAGLOCK 表提示会导致高碎片吗？

> ID：14106351
> 
> 赞同：0
> 
> 时间：2012-12-31T21:57:45.850
> 
> 标签：sql-server, sql-server-2008

我们有一个应用程序，我们正在解析/加载大量消息并将它们加载到 SQL Server 2008 R2 实例中。我们正在使用 TVP 传递集合，这可以实现大吞吐量，但它也导致我们遇到很多死锁。我们最近在我们遇到问题的区域添加了 PAGLOCK 提示，它已经解决了大部分问题。

我担心的是这会导致大量的碎片吗？那是对的吗？我们也在研究一些重新设计的选项，但希望了解使用 PAGLOCK 提示的影响。

任何建议/意见将不胜感激。

谢谢，

小号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:29:46.363

`PAGLOCK`提示与碎片无关。分片与表上的索引有关。看起来您在有大量插入的表上没有正确的索引。

`PAGLOCK`是与并发相关的表提示。请参阅 SQL Server 联机丛书：

*   [MSDN：表提示 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187373.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T06:17:50.797

PAGLOCK 不影响碎片。如果插入新行导致页面拆分，则会发生碎片，因为新行不再适合正确的页面，因此与使用的锁类型无关。如果聚集索引键不是像标识那样递增的值，则页面拆分很常见。出于同样的原因，它也发生在非聚集索引中，尽管频率较低，因为更多的行往往适合一个页面。

这意味着您无法避免在具有多个索引和高插入频率的表上出现碎片。因此，您应该根据它们的实际碎片经常重组/重建索引。

# jquery - jQuery：如何完全克隆内容被 jQuery 修改的 iframe？

> ID：14106355
> 
> 赞同：0
> 
> 时间：2012-12-31T21:58:50.687
> 
> 标签：jquery, iframe, clone

好吧，这可能很难解释：我有一个 iframe，我们称它为 iframe 1，我从中运行 jQuery 对其父级执行各种操作，因为 iframe 是我可以为这个项目修改的所有内容。我要做的一件事是向其父级添加一个额外的 iframe（iframe 2）。iframe 2 嵌入在 iframe 1 中，我使用 jQuery 将 iframe 2 克隆到父页面（因此 iframe 1 和 2 成为兄弟）。

然而，iframe 2 的源代码有它自己的 jQuery，它会修改它的内容。问题是当我克隆 iframe 2 时，它并没有完整地克隆它的 jQuery 修改。我可以在原始 iframe 2 内容中看到它的 jQuery 修改是成功的，但是我想象的克隆是在那些能够执行之前完成的，因此没有修改的副本被制作了？

这是一些代码：

iframe 1 克隆和创建 iframe 2

```
$(window).on('load', function(){
$('#article_menu-iframe').clone().insertBefore(parent.document.querySelectorAll("#stock_menu"));
}) 
```

现在我使用 clone 方法，因为我也在做一些 HTML5 postMessage 的东西，而我之前尝试过的方法（我相信它是 .html 而不是 .clone 来创建 iframe 2）导致了一些其他问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:01:42.403

您可以像这样获取 iframe 的内容：

```
$('#article_menu-iframe').contents().find("html").html(); 
```

从这里您可以使用该值构造一个新的 iframe 对象（克隆它）

# c# - 处理 InvokeRequired 的方法或扩展方法

> ID：14106357
> 
> 赞同：1
> 
> 时间：2012-12-31T21:59:04.260
> 
> 标签：c#, winforms, events, delegates, extension-methods

我无法完全想出创建通用方法来处理`InvokeRequired`for void 方法的解决方案（稍后我将处理返回值）。我在想类似的事情：

```
// Probably not the best name, any ideas? :)
public static void CheckInvoke(this Control instance,
                               ,Action<object, object> action)
{
  if (instance.InvokeRequired)
  {
    instance.Invoke(new MethodInvoker(() => action));
  }
  else
  {
    action()
  }
} 
```

然后我可以写如下内容：

```
public partial class MyForm : Form
{
  private ThreadedClass c = new ThreadedClass();

  public MyForm()
  {
    c.ThreadedEvent += this.CheckInvoke(this
                                        ,this.MethodRequiresInvoke
                                        ,sender
                                        ,e);
  }
} 
```

这显然不能编译，我只是不能将它完全结合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:06:45.857

Hans 是正确的，因为您*可能*不想将这样的代码包装起来，特别是因为它可能会在确定正在发生的线程操作时导致一些调试问题。也就是说，这将是您想要的签名：

```
public static class FormsExt
{
    public static void UnwiseInvoke(this Control instance, Action toDo)
    {
        if(instance.InvokeRequired)
        {
            instance.Invoke(toDo);
        }
        else
        {
            toDo();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:29:24.973

“object,object”的松散动作参数（正如 JerKimball 建议的那样），将其命名为 SafeInvoke，并通过匿名委托附加到事件：

```
 c.ThreadedEvent += delegate
                        {
                           c.SafeInvoke(this.MethodRequiresInvoke);
                        }; 
```

# javascript - 按比例调整我在运行前无法访问的图像大小

> ID：14106366
> 
> 赞同：1
> 
> 时间：2012-12-31T22:00:44.953
> 
> 标签：javascript, wordpress, resize, image

我整天都在寻找解决方案，并阅读了许多关于图像调整大小和 DOM 节点搜索和 Wordpress 功能以及任何其他可能的方法的文章。

这是场景...

我正在为客户创建 Wordpress 的自定义主题。这是一个报纸网站，需要按比例自动调整图片大小以适合页面上某个框的功能。通常我只会`width:SomeWidth`在 CSS 中设置，但我没有任何方法来识别 img。

我的索引页面是一个框架，wordpress 引擎会加载内容。这意味着在它显示给用户之前，我无法控制图像上的属性。（是的，我们可以手动调整每张图片的大小，但我的客户不想这样做，她还希望它是单页上的原始大小。

这是其中一个盒子：

```
<div class="box-center">
        <h1>Music 101</h1>
        <div class="box-inner-center">
            <ul>
                <?php
                    global $post;
                    $args = array('numberposts'=>1,'category'=>get_cat_ID('Music 101'));
                    $myposts=get_posts($args);
                    foreach($myposts as $post) : setup_postdata($post); ?>
                        <li><?php the_content(); ?></li>
                    <?php endforeach; ?>
            </ul>
            <a class="more" href="<?php echo esc_url(get_category_link(get_cat_ID('Music 101'))); ?>">More Music 101 >></a>
        </div>
    </div> 
```

页面加载后会出现以下内容：

```
<div class="box-center">
    <h1>Music 101</h1>
        <div class="box-inner-center">
            <ul>
                <li>
                    <p>
                        <a href="http://***?attachment_id=150" rel="attachment wp-att-150">
                            <img class="alignnone  wp-image-150" alt="Venice Symphony Orchestra" src="http://***/Venice-Symphony-Orchestra.jpg" width="960" height="640">
                        </a>
                    </p>
                    <p><span style="color: #000000;"><b><i>Some sample text.</i></b></span></p>
                    <p><span style="color: #000000;"><b>By Someone</b></span></p>
                    <p><span style="color: #000000;">Some quote and more content</span></p>
                    <p><span style="color: #000000;"><a href="http://***?p=141#more-141" class="more-link">(more…)</a></span></p>
                </li>
            </ul>
            <a class="more" href="http://***/?cat=20">More Music 101 &gt;&gt;</a>
        </div>
    </div> 
```

我尝试使用`document.getElementById("box-center").childNodes`然后循环遍历结果`document.getElementByTagName("img")`并`for`在那里设置属性，但是上面的行以某种方式没有返回任何结果。

如果可能的话，我宁愿不使用 JQuery 或任何其他库。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:05:03.487

这假设您想要调整第一次出现的 <img> 内部元素与类'box-inner-center'

```
var thebox = document.getElementsByClassName('box-inner-center')[0];
var theimg = thebox.getElementsByTagName('img')[0];
theimg.style.width = '100px'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T22:10:09.523

我看不出有什么理由不能使用 css。我会建议这样的事情：

```
.box-center .box-inner-center img {
    width:150px; /* or whatever */
    height:auto; /* overrides the set HTML height*/
} 
```

这将覆盖图像本身的宽度和高度属性，如果需要，您甚至可以更具体：`.box-center .box-inner-center ul p > a img`或任何您想要的。

# android - 动画后设置imageview新位置

> ID：14106369
> 
> 赞同：0
> 
> 时间：2012-12-31T22:01:14.027
> 
> 标签：android, animation, android-animation

嗨，我是 android 动画的新手。我想在动画后将我的图像更新到新位置，但我没有这样做，将不胜感激任何帮助..（我有一个基本的从左到右和从右到左动画）

XML -

<

```
?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/main_menu_background"
    android:orientation="vertical" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="60dp" >

        <TextView
            android:id="@+id/logo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="3"
            android:background="@drawable/main_menu_fill"
            android:padding="10dip"
            android:text="My App"
            android:textColor="@android:color/white"
            android:textSize="34dp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <ImageView
            android:id="@+id/btn1"
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill"
            android:src="@drawable/main_menu_button" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <ImageView
            android:id="@+id/btn2"
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill"
            android:src="@drawable/main_menu_button" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <ImageView
            android:id="@+id/btn3"
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill"
            android:src="@drawable/main_menu_button" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <ImageView
            android:id="@+id/btn4"
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill"
            android:src="@drawable/main_menu_button" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <ImageView
            android:id="@+id/btn5"
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill"
            android:src="@drawable/main_menu_button" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/transparent"
        android:weightSum="4" >

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.18"
            android:background="@android:color/transparent" />

        <View
            android:layout_width="0.5dip"
            android:layout_weight="0.65"
            android:background="@drawable/main_menu_fill" />

        <View
            android:layout_width="3dip"
            android:layout_weight="3.17"
            android:background="@android:color/transparent" />
    </TableRow>

</LinearLayout>

Java:
package com.example.mainmenuscreen;

import android.location.GpsStatus.Listener;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.LinearLayout.LayoutParams;

public class MainScreenActivity extends Activity {
    OnClickListener openListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        Context context = getApplicationContext();
        final ImageView login = (ImageView) findViewById(R.id.login);

        final Animation lefttoright = AnimationUtils.loadAnimation(context,
                R.anim.lefttoright);
        Animation righttoleft = AnimationUtils.loadAnimation(context,
                R.anim.righttoleft);

        // login.startAnimation(righttoleft);
        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                login.startAnimation(lefttoright);
            }
        });

        lefttoright.setAnimationListener(new Animation.AnimationListener() {

            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationEnd(Animation animation) {
                android.widget.LinearLayout.LayoutParams params = new LayoutParams(
                        android.widget.LinearLayout.LayoutParams.FILL_PARENT,
                        android.widget.LinearLayout.LayoutParams.WRAP_CONTENT);
//               params.topMargin = login.getTop()-100;
                params.setMargins(0, 0, 100, 0);

                login.setLayoutParams(params);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:06:54.347

你有没有尝试过

```
Animation#setFillAfter 
```

[API文档](https://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

# ruby-on-rails - 创建新对象时为 nil:NilClass 定义的未定义方法“[]”

> ID：14106370
> 
> 赞同：0
> 
> 时间：2012-12-31T22:01:31.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

所以我搜索并找不到对我有帮助的现有问题。

我有一个模型：

```
class ClassComments < ActiveRecord::Base
 # attr_accessible :title, :body
 belongs_to :user
 belongs_to :class, :class_name => 'Clas'
end 
```

当我调用`c = ClassComments.new`我的控制器时，我得到了这个错误：

```
undefined method `[]' for nil:NilClass 
```

关于造成这种情况的任何想法？我难住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:29:49.983

将类名更改为`Clas`或`Class`将解决问题，因为类是 ruby​​/rails 中的保留字。

来源： http: [//latheesh.com/2010/02/02/rails-reserved-words/](http://latheesh.com/2010/02/02/rails-reserved-words/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:18:39.073

[我认为除了这个问题](https://stackoverflow.com/questions/6295262/rails-belongs-to-association-with-class-name-returns-nil)中的类名之外，您还需要指定外键

所以在你的情况下，它可能是：

```
belongs_to :class, :class_name => 'Clas', :foreign_key => "clas_id" 
```

# javafx - JavaFX 中的 3D 多边形

> ID：14106372
> 
> 赞同：2
> 
> 时间：2012-12-31T22:01:50.733
> 
> 标签：javafx, 3d, polygon

JavaFX 中是否有 3D 多边形（类似于 Java3D 中的 QuadArray）？
如果没有最简单的创建方法是什么？创建两个三角形？
如果没有比我应该使用 3rd 方 3D 库更简单的方法吗？但这首先会打败使用 JavaFX 的想法。

我希望能够在面部、有线模式和仅垂直模式之间切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:17:16.113

JavaFX 2.x 中的 3D 非常有限。

您可以通过创建 2D 多边形并对其执行变换来创建 3D 多边形。

[Ensemble 应用程序](http://www.oracle.com/technetwork/java/javafx/samples/index.html)中有一些3D 示例演示了如何执行此操作（使用源代码）。这里有一个[简单的立方体示例](https://forums.oracle.com/forums/thread.jspa?threadID=2480840&tstart=0)。

使用 JavaFX 2.x，您可以轻松实现面视图、线框视图和仅顶点视图之间的切换。复杂的光照、效果、网格加载、逼真的着色等其他事情会更加困难，并且在 JavaFX 8 中会更好地实现。

JavaFX 8 将有一个更加健壮和有用的 3D 实现。您应该根据您的要求和其他 3D 库（例如[lwjgl](http://www.lwjgl.org)）评估 Ensemble 中当前 JavaFX 3D 演示的功能以及[建议的 JavaFX 8 3D 功能集](https://wikis.oracle.com/display/OpenJDK/3D+Features)，以确定最适合您的需求。请注意，JavaFX 8 计划在 2013 年 9 月之前发布最终版本。随着时间的推移，提议的 JavaFX 8 3D 功能将被添加到[Java 8 预发布版本](http://jdk8.java.net/download.html)中。

我确实为 JavaFX 创建了一个简单的 3D 软件渲染器，`ImageView`如果有兴趣我可能会开源它——它将位图渲染到一个`ImageView`虽然——而不是直接渲染到 JavaFX 场景图原语。类似的东西，但通过 Java3D API 使用硬件渲染器是由[Interactive Mesh](http://www.interactivemesh.org/testspace/j3dmeetsjfx.html)创建的。与 JavaFX 8 不同，它具有今天可用的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:30:54.767

JavaFX 2 和用于低级 3D API 的主要 Java 绑定集（[JogAmp](http://jogamp.org/)及其主要竞争对手，jewelsea 引用）之间的互操作性已经部分实现。准备就绪后，您将能够使用最新版本的 Java3D（1.6.0，安装说明在[此处](http://tinyurl.com/cf47kcb)）或任何支持 JOGL 2.0 的场景图，包括 Ardor3D、JMonkeyEngine 3、Xith3D...一些应用程序在同一个窗口中混合了 JOGL 2 和 JavaFX，但不在同一个面板中，例如 Energy3D。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:13:47.767

JavaFX 2 中的实验性 3D 形状可在[google code](http://code.google.com/p/jfx3d/)的 jfx3D 项目中获得，另请参阅我在[designjk](http://designjk.wordpress.com/)的博客。

吉姆·凯 [jimbo8]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T23:02:03.300

[https://wikis.oracle.com/display/OpenJDK/3D+Features](https://wikis.oracle.com/display/OpenJDK/3D+Features)

JavaFX 8 包含一个完整的 3D 库。我目前正在使用它，但它可能有问题 + 它甚至还没有完全准备好用于开发，甚至还没有为一般发布做好准备。

# c++ - 'ret' 指令的访问冲突

> ID：14106374
> 
> 赞同：1
> 
> 时间：2012-12-31T22:02:01.017
> 
> 标签：c++, assembly, access-violation, inline-assembly

我有这个函数，它主要由内联汇编组成。

```
long *toarrayl(int members, ...){
    __asm{
        push esp

        mov eax, members
        imul eax, 4
        push eax
        call malloc
        mov edx, eax
        mov edi, eax

        xor ecx, ecx
        xor esi, esi
loopx:
        cmp ecx, members
        je done
        mov esi, 4

        imul esi, ecx
        add esi, ebp
        mov eax, [esi+0xC]
        mov [edi], eax
        inc ecx
        add edi, 4
        jmp loopx
done:
        mov eax, edx
        pop esp
        ret
    }
} 
```

在运行时，我在返回指令上遇到访问冲突。

我正在使用 VC++ 6，它有时可能意味着指向上面的行，所以可能在“pop esp”上。如果你能帮助我，那就太好了。谢谢，iDomo。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T22:12:46.600

您未能正确管理堆栈指针。特别是，您`malloc`对堆栈的调用不平衡，并且您`pop esp`最终将错误的值弹出到`esp`. 因此，当您尝试`ret`从无效堆栈（CPU 无法读取返回地址）时，会发生访问冲突。目前尚不清楚您为什么要推动和弹出`esp`；那一事无成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:28:52.027

正如您所发现的，您永远不应该使用指令 POP ESP - 当您在代码中看到它时，您就知道发生了一些非常错误的事情。当然，在汇编代码中调用 malloc 也是一件很糟糕的事情——例如，您忘记检查它是否返回 NULL，因此您很可能会崩溃。把它放在你的汇编器外面 - 并检查 NULL，调试“无法在文件 mycode.c 中的第 54 行分配内存”比“在汇编器的某个地方，我们得到一个

这里有一些改进建议，应该会加快你的循环速度：

```
long *toarrayl(int members, ...){
    __asm{
        mov eax, members
        imul eax, 4
        push eax
        call malloc
        add esp, 4
        mov edx, eax
        mov edi, eax

        mov ecx, members
        lea esi, [ebp+0xc]
loopx:
        mov eax, [esi]
        mov [edi], eax
        add edi, 4
        add esi, 4
        dec ecx
        jnz loopx
        mov lret, eax
        ret
    }
} 
```

改进：在每个循环中删除乘以四。只是增加`esi`。在 ecx 上使用递减，而不是递增，并在循环之前加载成员。这允许在循环中只使用一次跳转，而不是两次。从 edx 到 eax 删除多余的移动。直接使用eax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T22:12:54.523

我已经自己想出了答案。

对于那些有同样或类似问题的人：

实际异常发生在用户代码之后，当 vc++ 自动将寄存器弹出/恢复到调用函数之前的状态时。由于我在调用 malloc 时未对齐堆栈指针，因此从堆栈中弹出时存在访问冲突。我无法在编辑器中看到它，因为它不是我的代码，所以它只是显示为函数中我的最后一个代码。

要更正此问题，只需在您拨打的电话后添加一个 add esp，（先前调用的参数大小）。

固定代码：

```
long *toarrayl(int members, ...){
    __asm{
        mov eax, members
        imul eax, 4
        push eax
        call malloc
        add esp, 4
        mov edx, eax
        mov edi, eax

        xor ecx, ecx
        xor esi, esi
loopx:
        cmp ecx, members
        je done
        mov esi, 4

        imul esi, ecx
        add esi, ebp
        mov eax, [esi+0xC]
        mov [edi], eax
        inc ecx
        add edi, 4
        jmp loopx
done:
        mov eax, edx
        ret
    }
    //return (long*)0;
} 
```

优化代码：

```
long *toarrayl(int members, ...){
    __asm{
        mov eax, members
        shl eax, 2
        push eax
        call malloc
        add esp, 4
        ;cmp eax, 0
        ;je _error
        mov edi, eax
        mov ecx, members
        lea esi, [ebp+0xC]
loopx:
        mov edx, [esi]
        mov [edi], edx
        add edi, 4
        add esi, 4
        dec ecx
        jnz loopx
    }
} 
```

# php - PHP嵌套foreach循环中的最后一个变量在回显时不显示

> ID：14106379
> 
> 赞同：0
> 
> 时间：2012-12-31T22:02:25.853
> 
> 标签：php

这是我的代码：

```
$criterias = $_POST['criteria'];
$criteriaValue = $_POST['criteriaValue'];
$comments = $_POST['Comments'];

foreach ($criteriaValue as $key => $value ){
  foreach( $criterias as $criteriaValue ){
    if( $criteriaValue == $key ){
      $string1 = $key;
      //echo $string1;
      foreach( $comments as $comment => $comm ){
        if( $string1 == $comment ){
          $string3 = $comm;
          //echo $string3;
        }
      }
    }
  }
  foreach ( $value as $result ){
    $string2 = $result;
    //echo $string2;
  }
  $criteria .= mysql_real_escape_string( $string1 . '|' . $string2 . '|' . $string3 . '|' );
}
echo $criteria; 
```

$criteria 将回显 string1 和 string2。但是 string3 是空白的。当我从 foreach 循环中回显时，$string 3 显示了该值。

我真的很感谢大家的帮助！！我认为这可能很简单，但我已经打了我的头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:40:01.237

你在最后使用`mysql_real_escape_string`函数`$string3`。尝试在`$string3`不应用任何过滤功能的情况下回显。

# php - 如何通过 PHP(5.4.x) 以可移植方式使用 SQLite3

> ID：14106380
> 
> 赞同：0
> 
> 时间：2012-12-31T22:02:32.093
> 
> 标签：php, sqlite

我也被 SQLite 的宏伟主张所吸引。然而，就像许多其他软件一样，我遇到了过时的问题，并且不太容易关注好心开发人员的文档和博客。没有更多的抱怨，这里是环境的问题和细节：

我有一个运行 PHP 5.2.17 的网络主机提供商，安装了 SQLite 版本 2.8.17。phpinfo() 输出显示（在 pdo_sqlite 部分下）SQLite 版本是 3.3.7。在家里，我有运行 PHP 5.4.10 的 Apache 服务器。phpinfo() 在两个站点都可以正常工作。家用笔记本电脑说（在 sqlite3 下）版本是 3.7.7.1。

关于这个问题，我想创建一个带有几个表的数据库，并在家庭计算机和远程主机之间来回传输它（数据文件）。我正在尝试创建一个 PHP 脚本来

1.  如果不存在则创建表腿...
2.  删除现有行
3.  插入一些新行
4.  读取表格并将其打印为 Html 表格

不知何故，我组成了这个文件 dbc1.php，它在远程服务器上运行良好。类似的文件 dbc2.php 在“如果不存在”子句上失败，然后在其他语句上失败，如果数据库文件是由 dbc1.php 创建的，则甚至无法读取该文件。错误信息是：

```
file is encrypted or is not a database 
```

如果我移动文件，dbc2.php 将创建它，但无法获取插入的行。本地主机版本抱怨说

“在第 14 行调用 C:\Web\php\dbcheck.php 中未定义的函数 sqlite_libversion()”

在我的 php.ini 文件中，我没有注释两个扩展名“php_pdo_sqlite.dll”和“php_sqlite3.dll”，并检查了这两个 dll 文件是否都存在于“ext”文件夹中。我还需要做什么？问题：

1.  dbc1.php 中的样式是否优于 dbc2.php？为什么或者为什么不？
2.  SQLite 数据库文件真的像声称的那样可移植吗？
3.  我可以有一个指向 PHP5-SQLite3 教程的指针吗？
4.  为什么我从 phpinfo() 和 sqlite_libversion() 得到不同的版本号？

预先感谢您的回复。下面是 3 个 PHP 文件，虽然我希望使用 1 个单独的文件来执行操作。

```
<html> 
```

用 PHP 测试 SQLite

'; 回声“SQLite 版本：”。sqlite_libversion() 。'

';

```
 $db = new PDO('sqlite:dbname.db');      echo "[SQLite] DB opened<br/>";
    $db -> exec ($qc0);                     echo "[SQLite] table created<br/>";
    $db -> exec ($qr1);                     echo "[SQLite] Rows deleted<br/>";
    $db -> exec ($qi1); $db -> exec ($qi2);
    $db -> exec ($qi3); $db -> exec ($qi4); echo "[SQLite] Rows inserted<br/>";

    try {
            $rowsOfTable = $db -> query ($qr5);
            print "\t<table border='0' cellspacing='4' cellpadding='4'\n" .
                            "\t\t\tstyle='padding-top:20px;'>\n";
            print "\t\t<tr><td>Creation</td><td>Legs</td></tr>\n";
            foreach ($rowsOfTable as $row) {
                    echo "\t\t<tr>\n" .
                            "\t\t\t<td>" . $row['name'] . "</td>\n" .
                            "\t\t\t<td align='right'>" . $row['count'] . "</td>\n" .
                            "\t\t</tr>\n";
            }
            print "\t</table>\n";
    } catch (PDOException $ex) {
            die ($ex->getMessage());
    } 
```

?>

这是同一台 Unix 服务器上不起作用的文件：

```
<html> 
```

用 PHP 测试 SQLite \n"; echo "SQLite 版本：" . sqlite_libversion() . "
\n";

```
 try {
            $db = new SQLiteDatabase('./dbname.db', 0644, $error);
            echo "SQLite DB opened<br/>\n";

            $db -> queryExec ($qc0, $error);        echo "[SQLite] table created<br/>\n";
            $db -> queryExec ($qr1, $error);        echo "[SQLite] Rows deleted<br/>";
            $db -> queryExec ($qi1, $error);
            $db -> queryExec ($qi2, $error);
            $db -> queryExec ($qi3, $error);
            $db -> queryExec ($qi4, $error);        echo "[SQLite] Rows inserted<br/><br/>";
            if ($tableFromDB = sqlite_query ($db, $qr5, SQLITE_BOTH, $error)) {
                    print "\t<table border='2' cellpadding='4'>\n";
                    while ($row = $tableFromDB -> fetch()) {
                            print "\t\t<tr>\n" .
                                    "\t\t\t<td>" . $row['name'] .
                                    "</td><td>" . $row['count'] . "</td>\n\t</tr>\n";
                    }
                    print "\t</table>\n";
            } else {
                    echo "Cannot query DB table: $error\n";
    }} catch (Exception $ex) {
            die ($error);
    } 
```

?>

最后，我试图在笔记本电脑上运行的代码：

```
<html> 
```

用 PHP 测试 SQLite

phpinfo(); echo "PHP 版本：" . php版本（）。'
'; 回声“SQLite 版本：”。sqlite_libversion() 。'

';

```
 $db = new PDO('sqlite:dbname.db');      echo "[SQLite] DB opened<br/>";
    $db -> exec ($qc0);                     echo "[SQLite] table created<br/>";
    $db -> exec ($qr1);                     echo "[SQLite] Rows deleted<br/>";
    $db -> exec ($qi1); $db -> exec ($qi2);
    $db -> exec ($qi3); $db -> exec ($qi4); echo "[SQLite] Rows inserted<br/>";

    try {
            $rowsOfTable = $db -> query ($qr5);
            print "\t<table align='center' border='0' cellspacing='4' cellpadding='4'\n" .
                            "\t\t\tstyle='padding-top:20px;'>\n";
            print "\t\t<tr><td>Creation</td><td>Legs</td></tr>\n";
            foreach ($rowsOfTable as $row) {
                    echo "\t\t<tr>\n" .
                            "\t\t\t<td>" . $row['name'] . "</td>\n" .
                            "\t\t\t<td align='right'>" . $row['count'] . "</td>\n" .
                            "\t\t</tr>\n";
            }
            print "\t</table>\n";
    } catch (PDOException $ex) {
            die ($ex->getMessage()); 
```

} ?>

大家，新年快乐 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:28:00.160

> dbc1.php 中的样式是否优于 dbc2.php？为什么或者为什么不？

第二个示例（“dbc2”）中使用的类和函数来自[旧的 SQLite **2**函数](http://php.net/ref.sqlite)。SQLite2 是*旧*的，扩展实际上已被推到 PECL。除非您*需要*读取 SQLite2 数据库，否则不应在现代代码中使用它。

您应该使用[SQLite3 类](http://php.net/book.sqlite3)或 PDO，如您的第一个示例（“dbc1”）所示。

> SQLite 数据库文件真的像声称的那样可移植吗？

是的，但不是在主要版本之间。您可以在任何机器和平台之间移植 SQLite3 数据库文件并使其正常工作。

> 我可以有一个指向 PHP5-SQLite3 教程的指针吗？

因为你最好的选择是使用 PDO，所以你真的想要一个 PDO 教程。唯一的就是 MySQL。我们经常向[来自`mysql_`函数](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)的用户推荐这个教程，但也有人推荐[这个其他 PDO 教程](http://workbench.no/blog/php-pdo/)。阅读两者，只需使用 SQLite 兼容的 SQL 而不是 MySQL 风格的 SQL。

SQLite 站点有一个[全面的语法部分](http://www.sqlite.org/lang.html)，详细说明了它可以理解和不理解的内容。在大多数情况下，您可以放弃反引号并让事情正常工作。SQLite 也不喜欢将索引创建与表创建捆绑在一起，但许多其他数据库也不喜欢。

> 为什么我从 phpinfo() 和 sqlite_libversion() 得到不同的版本号？

这是安装了旧的 SQLite 2 扩展同时还安装了 SQLite 3 PDO 扩展的工件。

# java - Jdom 保存和加载磁贴

> ID：14106382
> 
> 赞同：0
> 
> 时间：2012-12-31T22:02:54.323
> 
> 标签：java, load, save, tiles, jdom

我有保存和加载瓷砖地图的代码：

```
public void load(File loadFile) {
    try {
        SAXBuilder builder = new SAXBuilder();
        Document document = builder.build(loadFile);
        Element root = document.getRootElement();
        for (Object tiles : root.getChildren()) {
            Element e = (Element) tiles;
            int x = Integer.parseInt(e.getAttributeValue("X"));
            int y = Integer.parseInt(e.getAttributeValue("Y"));
            worldTiles[x][y] = new Tile(tile.id, new Vector2f(x
                    * Tile.TILE_WIDTH, y * Tile.TILE_HEIGHT));
        }
    } catch (JDOMException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void save(File saveFile) {
    Document document = new Document();
    Element root = new Element("blocks");
    document.setRootElement(root);
    for (int x = 0; x < TILE_WIDTH - 1; x++) {
        for (int y = 0; y < TILE_HEIGHT - 1; y++) {
            Element tiles = new Element("block");
            tiles.setAttribute("x",
                    String.valueOf((int) (worldTiles[x][y].getX())));
            tiles.setAttribute("y",
                    String.valueOf((int) (worldTiles[x][y].getY())));
            tiles.setAttribute("type",
                    String.valueOf(worldTiles[x][y].getType()));
            root.addContent(tiles);
        }

    }
    XMLOutputter output = new XMLOutputter();
    try {
        output.output(document, new FileOutputStream(saveFile));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

然后我在我的输入处理程序中调用代码，如下所示：

```
if(Keyboard.isKeyDown(Keyboard.KEY_F)){
        world.save(new File("save.xml"));
    }

    if(Keyboard.isKeyDown(Keyboard.KEY_G)){
        world.load(new File("save.xml"));
    } 
```

但是，我得到一个空指针异常。老实说，这没有任何意义，因为我在尝试加载之前创建了保存文件，所以这不是问题。我的 worldTile[][] 数组中有瓷砖，所以它不会在那里抛出错误。一些额外的信息，Tile 构造函数如下所示：

```
public Tile(int id, Vector2f position) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:35:47.650

这是使用常量的一个很好的例子！有常数：

```
final String X = "X";
final String Y = "Y"; 
```

然后将避免使用小写“x”的“保存”和使用大写“X”读取的情况......

换句话说，“x”与“X”不是同一个属性。

罗尔夫

# emacs - 列表项评估

> ID：14106386
> 
> 赞同：1
> 
> 时间：2012-12-31T22:03:14.657
> 
> 标签：emacs, lisp, elisp

我正在学习 lisp 并且有一个关于简单列表的问题：

```
(setq stuff '(one two three (+ 2 2)))
stuff ; prints "one two three (+ 2 2)"

(setq stuff (list `one `two `three (+ 2 2)))
stuff ; prints "one two three 4" 
```

第一个 setq 创建一个列表“一二三 (+ 2 2)”。第二个列表创建“一二三 4”。为什么第一个列表不评估 (+ 2 2)，但第二个列表呢？我在 Emacs Lisp 介绍文档中读到，在构建列表时，它会从内到外进行评估。为什么第一个列表在添加到列表之前不评估添加？

这是 emacs 24 中的 elisp。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T22:08:04.100

`'`不等于`list`，它是 的简写`quote`。你真的在这样做：

```
(setq stuff (quote (one two three (+ 2 2)))) 
```

引用的参数是表达式`(one two three (+ 2 2))`。

来自[http://www.gnu.org/software/emacs/manual/html_node/elisp/Quoting.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Quoting.html)：“特殊形式的引号返回其单个参数，如所写，而不对其进行评估”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-01T05:54:36.270

看起来你正在掌握 Lisp 的求值语义，所以继续玩吧！

您可以将其`quote`视为*抑制对其论点的评估*。这允许您编写可以操作或传递的表达式。它还用于编写不应作为函数调用评估的数据结构。

数据结构：

```
'(1 2 3)    ; => '(1 2 3)
(1 2 3)     ; => Lisp error: (invalid-function 1) 

;; The Lisp reader sees the number 1 in the function position and tries to call it, signalling an error. 
```

语法转换：

```
(setq x '(string-to-int "123"))
(setf (car x) 'string-to-list)
x                                   ; => '(string-to-list "123") 
```

延迟评估：

```
(setq x '(message "Hello World"))   ; => '(message "Hello World")
(eval x)                            ; => "Hello World" 
```

有一个密切相关的特殊运算符，称为*语法引号*，使用反引号编写。它允许您使用逗号 ( , ) 运算符评估带引号的表达式中的单个表单。这就像`quote`一个逃生舱口。

```
`(1 2 (+ 3 4))     ; => '(1 2 (+ 3 4))   
`(1 2 ,(+ 3 4))    ; => '(1 2 7)         ;; Note the comma! 
```

语法引用还允许使用以下语法进行*列表拼接*`,@`：

```
`(1 2 ,@(+ 3 4))   ; => '(1 2 + 3 4) 
```

如您所见，它将后续表达式拼接到包含的表达式中。在您开始编写宏之前，您可能不会经常看到它。

* * *

`list`另一方面是一个简单的功能。它评估其参数，然后返回包含这些项目的新数据结构。

```
 (list 1 2 (+ 3 4)) ; => '(1 2 7) 
```

# python - postgres 和 python

> ID：14106388
> 
> 赞同：22
> 
> 时间：2012-12-31T22:03:49.173
> 
> 标签：python, postgresql, plpython

在 postgres 9.2 中，我正在尝试创建一个可以作为触发器的 python 程序。我想运行一个外部程序（本地磁盘上的一个 exe），所以我使用 python 来运行它。当我尝试创建一个这样的简单程序时：

```
CREATE FUNCTION one ()
RETURNS int
AS $$
# PL/Python function body
$$ LANGUAGE plpythonu; 
```

我得到错误：

```
ERROR:  language "plpythonu" does not exist
HINT:  Use CREATE LANGUAGE to load the language into the database. 
```

当我运行时：

```
CREATE LANGUAGE plpythonu 
```

我得到错误：

```
ERROR:  could not access file "$libdir/plpython2": No such file or directory 
```

我正在使用 Windows 7 和 python 2.5 。

我查看了很多地方，但找不到解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T07:41:29.930

几天前，我刚刚解决了这个问题。解决方案非常复杂。就这样吧。

1.  仅在您的系统上安装 python 3.2.* 版本。
2.  在 Postgresql 中使用“CREATE LANGUAGE plpython3u”命令安装 Python 3 语言支持。很多时候会报下面的错误“unable to load”.....\plpython3.dll”error 126。（注意如果安装正确，不会显示错误。）

3.  如果您遇到上述错误，请转到您的 python 安装目录（默认为 C:\python32）并在 DLL 的文件夹中查找“python3.dll”。将此文件复制到 Postgres 安装目录中的 Postgresql 'lib' 文件夹中（默认为 c:\program files\postgres\9.x\lib\"）。将此复制的文件重命名为 python32.dll。

4.  现在再次运行“CREATE LANGUAGE plpython3u”命令。这次应该可以了。

要验证，请查看 postgresql 系统表中的 pg_available_extensions 视图。包含 plpython3u 的行应该在“已安装版本”列中有一个版本号。

注意：这仅适用于 plpython3u 语言。我不知道 plpython2u 有任何类似的过程。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T02:33:43.450

要为 plpython3 解决此问题，有必要：

*   安装 Python 3.2
*   跑`CREATE LANGUAGE plpython3u`

更新：我在这里写了一个更好的解释：[https ://stackoverflow.com/a/24218449/398670](https://stackoverflow.com/a/24218449/398670)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T22:16:00.763

Postgres 使用 Python 的 ActiveState 发行版。很可能，您的 2.5 太过时了，Postgres 无法加载 plpython dll 或没有安装它，因为没有合适的 python。我认为最近的 postgres 是针对 Python3 而不是 2.x 的 buil6。您可以在 postgres lib 目录中查找 plpython3.dll 以找出您需要的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-02T18:48:01.607

我安装了 python 3.2(x64) 和 postgres 9.3 (x64)

执行此代码`CREATE EXTENSION plpython3u`

不要忘记检查您的 postgresSQL 版本的“installation-note.html”，您的 postgresSQL 有特定的 python 版本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-26T09:08:59.940

抱歉挖矿，但对于所有正在寻找丢失数据包的人（在我的情况下是在 Ubuntu 18.04 上）：

`sudo apt-get install -y postgresql-plpython3-10`

进而：

`create extension plpython3u;`

# matlab - 如何连接由 textscan() 加载的不同值？

> ID：14106389
> 
> 赞同：2
> 
> 时间：2012-12-31T22:04:03.487
> 
> 标签：matlab, concatenation, octave, textscan

我正在使用 textscan 加载一些文本，虽然数据通过了，但我想将该数据转换为浮点矩阵而不是 hh:mm:ss 格式。

以下是数据示例：

> ```
> 2010/01/01,00:00:00.979131, 27.4485,  51.9362, 14.8,  6
> 2010/01/01,00:00:01.021977, 27.5149,  51.9375, 16.0,  6
> 2010/01/01,00:00:01.074032, 27.4797,  51.9446, 14.5, 10
> 2010/01/01,00:00:01.663689, 25.8441,-152.8141, 14.6,  6
> 2010/01/01,00:00:01.639541, 25.8744,-152.6122,  1.5,  5
> 2010/01/01,00:00:02.232099, -2.2447,  11.5023, 18.8,  6
> 2010/01/01,00:00:02.256351, -0.8135,  27.3139, 17.7,  5
> 2010/01/01,00:00:02.306734, -2.7797,  28.5109, 26.0,  5
> 2010/01/01,00:00:02.620765, 25.6656,-154.2029, 26.2,  9
> 2010/01/01,00:00:02.658495, 25.6698,-154.2157, 23.0,  6
> 2010/01/01,00:00:02.731266, -5.7106, 126.4517,  3.6,  5
> 2010/01/01,00:00:02.787495, -5.7138, 126.5210, 24.4,  8
> 2010/01/01,00:00:02.811636, -3.2453, 124.6919, 21.1,  8
> 2010/01/01,00:00:02.917785, -5.6882, 126.4566,  4.9,  7
> 2010/01/01,00:00:02.568360, -0.5663,  27.0334, 21.1,  6
> 2010/01/01,00:00:03.693717, 33.5840, 152.1755, 14.7,  6 
> ```

这是我的代码：

```
setenv GNUTERM 'x11';
fid = fopen('data.txt', 'r');
m = textscan(fid, '%d/%d/%d %d:%d:%f %f %f %f %d', 'delimiter', ',');
%m = fscanf(fid, '%d/%d/%f');

a = [m{:,1}, m{:,2}, m{:,3}];
b = [m{:,4}, m{:,5}, m{:,6}];  %needs to contain a float
c = m{:,7};
d = m{:,8};
e = m{:,9};
f = m{:,10};

disp(b); 
```

还要注意 m{:,6} 被转换为整数，这是不可取的。目标是使 b 成为单行或单列浮点数，可以将小时：分钟：秒转换为 0 的单个数字。 - 23.999

感谢您的任何建议！jml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:05:03.903

用于[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)将所有单元格元素转换为双精度：

```
m = cellfun(@double , m, 'UniformOutput', false); 
```

然后您可以使用以下方法从元胞数组中创建一个矩阵`cell2mat`：

```
m=cell2mat(m); 
```

# php - 哪个更好，使用 SQL 查询进行数据操作或在 php 中操作数组中的数据？

> ID：14106391
> 
> 赞同：3
> 
> 时间：2012-12-31T22:04:08.917
> 
> 标签：php, sql, arrays, comparison, duplicates

> **可能重复：**
> [何时使用查询或代码](https://stackoverflow.com/questions/13843307/when-to-use-a-query-or-code)

我有一个庞大的用户数据库及其详细信息。我想找到所有彼此最相似的人。哪种方式更适合比较？直接编写 SQL 查询，以便它们在数据库中进行操作以检索过滤（匹配）的记录。或者首先在 php 的数组中检索原始数据，然后在该数组上应用比较操作？假设我有 1000 个用户，我想找到共同朋友最多的人。

```
UserA has {a,b,r,c,g,h,r,q,l}
UserB has {x,y,z}
UserC has {a,c,r,g,q}
.
.
.
UserN has{x,y....n} 
```

所以我想找到与UserA有最多共同朋友的用户。例如将 UserA 的每个元素与整个数据库中所有用户数组的所有元素进行比较？在上述情况下，UserC 应该是与 UserA 最相似的用户。我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T23:22:22.163

假设您在这样的表格中表示友谊：

```
Table: friendships
from_id  |  to_id
----------------------------
      a  |      a
      a  |      b
      a  |      r
      a  |      c
 ...etc...
      b  |      x
      b  |      y
      b  |      z
 ...etc... 
```

现在您可以编写一个查询来回答您的问题（在 MySQL 中测试）：

```
SELECT user_id AS user_id_with_most_common_friends, MAX(cnt) AS number_of_common_friends FROM 
  (SELECT f2.from_id AS user_id, COUNT(*) AS cnt
   FROM friendships f1
   JOIN friendships f2 ON (f1.to_id = f2.to_id AND f2.from_id <> 'a')
   WHERE f1.from_id = 'a'
   GROUP BY f2.from_id) totals; 
```

至于性能问题，具体情况下的经验测试会给出最可靠的答案，但对于大型数据库，我希望使用上述 SQL 查询比查询每一行并在 PHP 中计算结果要快得多，原因如下：

1.  如果 from_id 和 to_id 被索引，RDBMS 可能不需要接触每一行
2.  返回所有记录将确保您触及每一行并导致 php 代码消耗大量内存（这会增加内存分配的一些开销，并且如果您的 RAM 用完，会减慢速度到致命的爬行）。
3.  一旦您的 php 代码拥有数据，它就不可能比 SQL 更快地执行计算的各个步骤。

除非您的 php 代码有一些东西可以弥补这些缺点（例如无法用 SQL 表达的复杂度较低的算法，或者调用一些专门的 C 代码，例如图像处理），否则通常会更快地保持尽可能多地在 RDBMS 内部工作。

# regex - 打印正则表达式匹配的单词

> ID：14106393
> 
> 赞同：0
> 
> 时间：2012-12-31T22:04:25.377
> 
> 标签：regex, perl

好的，我要编写一个简单的 Perl 5 脚本，它打印出以 D 开头并以 E 结尾的单词...

```
$_ = "Dog Die Do Dome";
/^d.*e$/i; 
```

如图所示，我使用正则表达式搜索我的文本以找到这样的单词，但我如何打印出来呢？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:08:35.677

`/g`您可以使用修饰符捕获到数组。

```
use feature 'say';
my @words = /\bd\S+e\b/ig;
say for @words; 
```

在列表上下文中，这将返回所有以“d”开头并以“e”结尾的匹配项。请注意，您不能使用`.*`，因为该匹配是贪婪的，因此`"dog do die"`将返回具有贪婪匹配的整个字符串`dog do die`，而不仅仅是`"die"`. 使用单词边界`\b`会阻止您部分匹配，例如 with `foobaresk`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T23:03:01.263

首先是您的正则表达式正在捕获您的整个字符串。正则表达式*通常*是贪婪的，因此`.*`将匹配字符串中最长的部分。由于您的正则表达式以 a 开头并以 a`d`结尾`e`，因此它将匹配您的整个字符串。

有几种方法可以避免这种情况：

```
my $string = "Dog Die Do Dome";
my $string =~ /d[\S]+e/ig; 
```

由于`\S`说*no white space*，因此您只匹配以 a 开头`D`和以 an 结尾`E`且不包含空格的单词。因此，它现在将单独匹配`Die`and `Dome`，但不匹配`Dog`and `Do`。这是正则表达式中的常见技巧。例如，您有一个字符串`foo-bar-bam`，并且只想匹配第一个单词。使用`/[^-][^-]*/`会解决问题（请记住，它`*`可以代表前面的***零***个或多个。因此，您将它加倍以匹配至少一个。）。这主要用于旧版本的*grep*或*sed*，您没有 Perl 的扩展正则表达式的强大功能。在上面的示例中，我使用`+`了`*`因为`+`意味着匹配前面的***一个***或多个。

`*`Perl 还可以通过在or后面附加一个问号来使正则表达式不贪婪`+`：

```
my $string =~ /d.+?e/ig; 
```

但是，在您的情况下，这将匹配`Dog Die`，`Dome`这可能不是您想要的。

这是程序：

```
use strict;
use warnings;
use feature qw(say);

my $string = "Dog Die Do Dome";

my @matches = ($string =~ /D\S+e/gi);

for my $word (@matches) {
    say "The first match is $word";
} 
```

并且，它打印出：

```
 The first match is Die
 The first match is Dome 
```

好吧，也许我不应该使用`The first match`，但你明白了。试试这个带有各种正则表达式的示例程序，看看会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T22:08:29.013

### 使用`print`声明

您使用[print](http://perldoc.perl.org/functions/print.html)语句将输出发送到屏幕。由于您要匹配整行，因此您不必在这里做任何复杂的事情；您可以只使用隐含的*$_*变量。例如：

```
print if /^d.*e$/i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T15:00:38.580

```
>cat temp
Dog Die Do Dome
>perl -lne '@a=split" ";foreach(@a){print if(/^[dD].*[eE]$/)}' temp
Die
Dome 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T22:11:13.690

```
 1 
  2 my $word_list = "Dog Die Do Dome";
  3 my @words = split ' ', $word_list;
  4 for my $word (@words) {
  5         print "$word\n" if $word =~ /^d.*e$/i;
  6     }
~ 
```

~
~
~

# android - Android 应用程序崩溃时是否会创建 LOG？

> ID：14106395
> 
> 赞同：0
> 
> 时间：2012-12-31T22:04:36.807
> 
> 标签：android, logging

是否有某种日志（如操作系统事件日志或其他东西）可以让我了解为什么应用程序在启动时崩溃？

细节（与问题本身无关）：我最近为我的 Android 手机（带有 Android 2.3.7 的摩托拉 XT615）购买了《最终幻想维度》的副本，每次点击它时都会出现闪烁（黑屏），然后它回到主屏幕。

有没有人有任何建议，或者我对这个有什么建议？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:15:53.390

用户可以从 Google Play 下载一些应用程序，这些应用程序可以获取要发送给开发人员的日志文件。例如：[日志收集器](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector)和[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat)。

**注意：**对于 Jelly Bean 及更高版本，应用程序需要 root 访问权限才能访问另一个应用程序的日志，因此上面列出的日志抓取应用程序可能对普通 Android 用户没有用处。

如果您有可用的 Android 开发工具，请参阅[如何获取 Android 崩溃日志？](https://stackoverflow.com/questions/3643395/how-to-get-android-crash-logs?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:19:44.337

您可以使用[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat)或[Log Collector](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector)等应用程序读取日志，但它可能无法帮助您找到 FC 问题，除非您实际上有它的代码，除非您有它的代码，除非你是游戏的开发者。但是，无论如何，祝你好运！

# ruby-on-rails - 瑞克失败了！不知道如何构建任务“部署”

> ID：14106397
> 
> 赞同：0
> 
> 时间：2012-12-31T22:04:40.560
> 
> 标签：ruby-on-rails, ruby, heroku, rake

我正在尝试将更改部署到我的登台服务器（在 heroku 上）并且我不断收到以下错误消息：

```
 Matthews-MacBook-Air-2:iGiveMore WorkWell$ rake deploy staging --trace
rake aborted!
Don't know how to build task 'deploy'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task_manager.rb:49:in `[]'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:142:in `invoke_task'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/bin/rake:23:in `load'
/Users/WorkWell/.rvm/gems/ruby-1.9.2-p290/bin/rake:23:in `<main>' 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:21:49.860

Heroku 部署不使用 rake。你这样做`git push $REMOTE $REF:master`，其中 $REMOTE 是 git 远程的名称或 git URL，而 $REF 是 master、HEAD 或您想要推送的其他一些提交。

此外，如果你正在推送当前的 HEAD，你可以这样做`git push $REMOTE master`，或者，取决于你的 git 配置，`git push $REMOTE`

# java - 如何使用 actionbarsherlock 创建自定义下拉菜单？

> ID：14106399
> 
> 赞同：3
> 
> 时间：2012-12-31T22:04:56.113
> 
> 标签：java, android, menu, android-actionbar, actionbarsherlock

所以，我试图模仿潘多拉的菜单：

![潘多拉的菜单功能](../Images/34d72518f437528d0055a2081aa68984.png)

无论哪种方式，您都可以选择点击右上角的菜单按钮或图标，它将显示相同的下拉菜单列表。我尝试创建一个“溢出”菜单，但在旧设备上我发现菜单仍然出现在底部（我不想要）。所以我创建了一个`Spinner`并使用了：

```
getSupportActionBar().setNavigationMode(getSupportActionBar().NAVIGATION_MODE_LIST); 
```

这种方法的问题在于它显示的是项目的名称而不是图标（我假设我必须提供一个不成问题的图标）并且微调器显示更多朝向中间（我想要它全部向右）。

所以，总而言之，有没有一种方法可以创建一个类似于 Pandora 的菜单，它在最右侧显示一个图标，`ActionBar`并且可以通过按下图标或菜单按钮来打开？任何建议、提示或帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:41:06.660

通过一些实验，我设法完成了我想要完成的部分工作。我不确定这是否是最好的方法，但它确实有效。

我发现微调器不会显示在屏幕最右侧的原因是因为该空间是为菜单项保留的。如果您还记得，我不使用菜单项的最初原因是因为在旧设备上，当您点击菜单按钮时，它会在屏幕底部显示项目（不是我想要的）。但我找到了解决办法。

我首先在 XML 中创建了我的菜单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/spinner_menu_item"
        android:showAsAction="always" 
        android:actionLayout="@layout/spinner" />
    </menu> 
```

和`"@layout/spinner"`：

```
 <?xml version="1.0" encoding="utf-8"?>
    <com.actionbarsherlock.internal.widget.IcsSpinner xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinner_menu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    /> 
```

然后在 onCreateOptionsMenu 中：

```
 getSupportMenuInflater().inflate(R.menu.basic_menu, menu);
    MenuItem item = menu.findItem(R.id.spinner_menu_item);
    spinnerMenu = (IcsSpinner)item.getActionView();
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(MyActivity.this, android.R.layout.simple_dropdown_item_1line, menuItems);
    spinnerMenu.setAdapter(adapter);
    spinnerMenu.setOnItemSelectedListener(new IcsAdapterView.OnItemSelectedListener() {} 
```

最后我覆盖了菜单按钮，如下所示：

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event){
    if (keyCode == KeyEvent.KEYCODE_MENU){
        spinnerMenu.performClick();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

唯一不会做的是显示图标而不是文字。但是已经成功了一半！我希望这会帮助面临类似问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:34:55.750

如果我理解您想要创建一个弹出菜单并在用户单击某个硬件按钮上的图标时显示它们。

好吧，[这里](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)是弹出菜单的一个很好的解释，如果你想获得一些设备密钥试试这个：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
    case KeyEvent.KEYCODE_DPAD_CENTER:
        Toast.makeText(this, "The Center key was pressed",
                Toast.LENGTH_SHORT).show();
        return true;

    case KeyEvent.KEYCODE_DPAD_RIGHT:
        Toast.makeText(this, "The Right key was pressed",
                Toast.LENGTH_SHORT).show();
        return true;

    case KeyEvent.KEYCODE_DPAD_LEFT:
        Toast.makeText(this, "The Left key was pressed", Toast.LENGTH_SHORT)
                .show();
        return true;

    case KeyEvent.KEYCODE_BACK:
        Toast.makeText(this, "The Back key was pressed", Toast.LENGTH_SHORT)
                .show();

        //---this event has been handled---
        return true;
    }

    //---this event has not been handled---
    return false;
} 
```

我希望这能帮到您。

# scala - 期望从 for 循环返回的 Vector

> ID：14106403
> 
> 赞同：-1
> 
> 时间：2012-12-31T22:05:23.150
> 
> 标签：scala, for-loop, yield

斯卡拉菜鸟在这里。

这是我的简单 for 循环

```
 def forExampleStoreValues = {
    println(">>forExampleStoreValues");
    val retVal = for{i <- 1 to 5 if i % 2 == 0}  yield i;
    println("retVal=" + retVal);    
  } 
```

我的期望是当我调用它时，最后一个 val 将自动返回。但是，当我从 main 调用它时，

```
object MainRunner {
  def main(args: Array[String]){
    println("Scala stuff!");  // println comes from Predef which definitions for anything inside a Scala compilation unit. 
    runForExamples();
  }

  def runForExamples() {
    val forLE = new ForLoopExample(); // No need to declare type.
    println("forExampleStoreValues=" +forLE.forExampleStoreValues)  
  }
} 
```

输出是：

```
>>forExampleStoreValues
retVal=Vector(2, 4)
forExampleStoreValues=() 
```

因此，我尝试明确返回 retval。

```
 def forExampleStoreValues = {
    println(">>forExampleStoreValues");
    val retVal = for{i <- 1 to 5 if i % 2 == 0}  yield i;
    println("retVal=" + retVal);    
    return retval;
  } 
```

这给出了：

```
method forExampleStoreValues has return statement; needs result type 
```

所以我将函数签名更改为：

```
 def forExampleStoreValues():Vector 
```

这使：

```
Vector takes type parameters 
```

在这个阶段，不知道该放什么，我想确保我没有做我不需要做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:07:36.983

您不需要明确的回报。您方法中的最后一个表达式将始终返回。

```
def forExampleStoreValues = {
  println(">>forExampleStoreValues")
  val retVal = for{i <- 1 to 5 if i % 2 == 0}  yield i
  println("retVal=" + retVal)  
  retVal
} 
```

这也意味着如果你以 结束你的方法`println(...)`，它将返回`()`类型`Unit`，因为这是返回类型`println`。如果你做一个显式返回（通常是因为你想提前返回），你需要指定结果类型。结果类型是`Vector[Int]`，不是`Vector`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:13:17.287

返回 Scala 函数中的最后一个值。显式返回不是必需的。

您的代码可以简化为`for`表达式返回`IndexSeq[Int]`编译器推断的 a 。

```
def forExampleStoreValues = {
  for{i <- 1 to 5 if i % 2 == 0}  yield i;    
}

scala>forExampleStoreValues
res0: scala.collection.immutable.IndexedSeq[Int] = Vector(2, 4) 
```

该表达式返回一个实现 trait`for{i <- 1 to 5 if i % 2 == 0} yield i;`的实例。因此，要手动指定可以添加到表达式的类型。`Vector[Int]``IndexedSeq``IndexedSeq[Int]``for`

```
 def forExampleStoreValues: IndexedSeq[Int] = {
   for{i <- 1 to 5 if i % 2 == 0}  yield i;    
 } 
```

# php - PHP 返回引用

> ID：14106408
> 
> 赞同：1
> 
> 时间：2012-12-31T22:06:43.520
> 
> 标签：php, reference

我已经通过在函数定义和变量赋值中都放置与号来阅读 PHP 中返回引用的部分。但是，我还没有在与面向对象编程无关的 php 代码中找到“返回引用”的示例。任何人都可以为此提供用途和示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:30:07.037

让我从一个非常简单的例子开始，

```
class Test {

    //Public intentionally
    //Because we are going to access it directly later
    //in order to see if it's changed
    public $property = 'test';

    /**
     * Look carefully at getPropReference() title
     * we have an ampersand there, that is we're indicating
     * that we're returning a reference to the class property
     * 
     * @return string A reference to $property
     */
    public function &getPropReference()
    {
         return $this->property;
    }
}

$test = new Test();

//IMPORTANT!! Assign to $_foo a reference, not a copy!
//Otherwise, it does not make sense at all
$_foo =& $test->getPropReference();

//Now when you change a $_foo the property of an $test object would be changed as well
$_foo = "another string";

// As you can see the public property of the class
// has been changed as well
var_dump($test->property); // Outputs: string(14) "another string" 

$_foo = "yet another string";
var_dump($test->property);   //Outputs "yet another string" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T22:17:14.837

**更新：这个答案涉及通过引用传递，而不是通过引用返回。保留它的信息价值。**

读这个：

[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

然后看看这个例子：

```
<?php
function AddTimestamp(&$mytimes)
{
    $mytimes[] = time();
}

$times = array();
AddTimestamp($times);
AddTimestamp($times);
AddTimestamp($times);

// Result is an array with 3 timestamps. 
```

这可以使用面向对象的技术更好地实现吗？也许，但有时需要/理由来修改现有的基于值的数据结构或变量。

考虑一下：

```
function ValidateString(&$input, &$ErrorList)
{
   $input = trim($input);
   if(strlen($input) < 1 || strlen($input) > 10) 
   {
      $ErrorList[] = 'Input must be between 1 and 10 characters.';
      return False;
   }
} 

$Err = array();
$Name = '  Jason    ';

ValidateString($Name, $Err);

// At this point, $Name is trimmed. If there was an error, $Err has the message. 
```

因此，根据您的需要，仍有时间在 PHP 中通过引用传递。对象总是通过引用传递的，所以无论何时你将数据封装在一个对象中，它都会自动成为一个引用。

# jquery - 简单的 jQuery 选择问题

> ID：14106412
> 
> 赞同：1
> 
> 时间：2012-12-31T22:06:53.977
> 
> 标签：jquery

我有这个 HTML：

```
<tr>
    <td class="featureCell" id="featureCell_Announced">
           <div>Announced</div>
    </td>
</tr> 
```

我有这个 jQuery：

```
$('.featureCell').each(function () {
    console.log($(this).html());   
}) 
```

我期望的输出是：

```
<div>Announced</div> 
```

但是，我得到的输出是：

```
Announced 
```

为什么父 div 被剥离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:14:34.847

看起来 console.log() 剥离`<div>`标签或实际打印出 html，因此您看不到实际`<div>`文本。尝试在警报或页面中打印出来，看看是否`<div>`存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:16:36.800

`console.log`以 html 形式写入输出，所以`<div>text</div>` 但是如果你尝试过

`alert($(this).html());` 你会得到预期的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T22:13:34.527

[这个 jsfiddle](http://jsfiddle.net/GFmRr/)表明确实`<div>Announced</div>`是输出的。

除非你去掉`<table>`元素，因为`tr`and`td`元素不是 a 之外的有效元素`table`。

# jquery - 如何将 SuperScrollorama 与 iScroll 一起使用

> ID：14106419
> 
> 赞同：0
> 
> 时间：2012-12-31T22:07:41.833
> 
> 标签：jquery, iscroll

想使用一些 SuperScrollorama 滚动效果并在 ipad/iphone 上查看时保持它们。我发现这个很棒的小演示表明它可以完成，但它并没有以对我来说很有意义的方式解释它。这是我发现的：http: [//markdalgleish.com/presentations/embracingtouch/](http://markdalgleish.com/presentations/embracingtouch/)

如果有人能提供一些启示，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:56:09.343

文档和代码 [https://github.com/Prinzhorn/skrollr](https://github.com/Prinzhorn/skrollr)

示例 [http://prinzhorn.github.com/skrollr/](http://prinzhorn.github.com/skrollr/)

这比 superscrollorama 运行得更好，在 Android/iOS 中运行得更好。

# java - 将键盘输入与 JavaFX 中的 TextField 相关联

> ID：14106420
> 
> 赞同：0
> 
> 时间：2012-12-31T22:08:01.790
> 
> 标签：java, locale, javafx-2, javafx

我正在尝试拥有两个 JavaFX `TextField`，一个使用标准英文键盘/语言进行输入，另一个使用日文键盘/语言。

[这个答案](https://stackoverflow.com/questions/834758/preserving-keyboard-layout-in-a-jtextfield)解决了 Swing 的问题，但 JavaFX`TextField`没有所需的`getInputContext()`方法。

我的计划是要么抓住一个焦点事件并将其更改`Locale`为日语，要么将特定事件与日语相关`Locale`联`TextField`。但是，我不知道如何实际实现其中任何一个。

我怀疑可能需要Java[输入法客户端 API 。](http://docs.oracle.com/javase/6/docs/technotes/guides/imf/api-tutorial.html)

我正在使用 Windows 8，但最好有一个独立于操作系统的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:58:07.363

我能找到的唯一接近的是：

```
textfield.getText().regionMatches(); 
```

但是我不确定这是您要找的那个。

更新

我还发现

```
txt_message.getText().format(Locale.JAPANESE, format, args) 
```

# c# - 使用 ASP.NET 和本地部署的 Web 服务器创建响应式和跨平台的 C# 应用程序？

> ID：14106424
> 
> 赞同：0
> 
> 时间：2012-12-31T22:08:24.990
> 
> 标签：c#, asp.net, mono, cross-platform, xsp

我需要创建一个跨平台应用程序，我正在考虑我们的替代方案。该应用程序非常复杂，它需要显示视频、图形和图表并允许用户与之交互。

我认为 75% 的用户将使用台式机访问应用程序，25% 的用户将使用平板电脑或智能手机。

另一个限制是我非常喜欢用 C# 开发，因为我公司的大部分代码都是用这种语言编写的。

跨平台的需求显然很难满足。我正在考虑在 ASP.NET 中创建一个基于 Web 的应用程序。这很好，因为它允许在 iPad、Android、Win 等上运行，而移植工作最少，但是与远程服务器交互的缓慢让我担心。

然后我有了这个想法：创建一个 ASP.NET 应用程序怎么样？但是对于桌面用户，我会在他们的机器上部署一个**本地服务器**，可以直接访问本地视频文件等。因此，他们会得到更好的响应能力。对于移动用户，我会让他们使用远程服务器。由于 ASP.NET 服务器过于昂贵，无法随每个客户端一起安装，因此我可以从 Mono 的免费 ASP.NET 服务器 (XSP) 为他们的页面提供服务。

这行得通吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:17:49.440

这不是一个好主意。当您在他们的桌面上安装网络服务器时，用户不会感到高兴。与普通桌面应用程序相比，此网络服务器的部署将更加困难。如果我是你，我会创建 Web 应用程序作为所有平台的通用应用程序，之后你可以在 mono 或 .net 上为桌面创建特殊应用程序，如果它有用的话。

# android - 从 AsyncTask 调用 UI 线程方法

> ID：14106429
> 
> 赞同：3
> 
> 时间：2012-12-31T22:09:00.663
> 
> 标签：android, multithreading, methods, android-asynctask

我在从 AsyncTaskActivity onPostExecute() 方法内部调用 setadapter() 方法时遇到问题。我已经阅读了有关 AsyncTask 的文档：http: [//developer.android.com/reference/android/os/AsyncTask.html#onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute(Result) (Result ) 但没有找到如何实现的答案。我应该使用 Intent 这样做吗？我是 Android 开发的新手，所以如果这是一个愚蠢的问题，请原谅我。

主要活动

```
public class MainActivity extends ListActivity {

private String[] columns = new String[] {"foreign_word", "native_word"};
private int[] target = new int[] { R.id.foreign_word, R.id.native_word };
private Cursor cur = null;

 @Override
 protected void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);

     new AsyncTaskActivity(this).execute();
 }

    public void setadapter(Cursor cur)  {
        SimpleCursorAdapter aaa = new SimpleCursorAdapter(this.getApplicationContext(), R.layout.list_entry, cur, columns, target, 0);
        this.setListAdapter(aaa);
    }
} 
```

异步任务活动

```
public class AsyncTaskActivity extends AsyncTask<Void, Void, Cursor> {

Activity activity = null;
private SQLiteDatabase db = null;
private String[] selection = {"_id", "native_word", "foreign_word"};
Cursor cur = null;

public AsyncTaskActivity(Activity activity) {
    this.activity = activity;
}

@Override
protected Cursor doInBackground(Void... params) {
    DbAdapter mSQLadapter = new DbAdapter(activity);
    db = mSQLadapter.getWritableDatabase();
    Cursor cur = db.query("words", selection, "foreign_word='car'", null, null, null, null);
    return cur;
}

protected void onPostExecute(Cursor cur) {

// I'd like to call setadapter() ,passing it Cursor as a parameter

   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T22:13:51.897

假设您的 AsyncTask 始终由 调用`MainActivity`，请执行此操作

```
protected void onPostExecute(Cursor cur) {
   MainActivity mActivity = (MainActivity) activity;
   mActivity.setadapter();
   } 
```

您可以为您的方法指定更多参数，`setAdapter`以便您可以传递`Cursor`、`String`Array 等。

`AsyncTask`但是，如果仅调用 from ，则更好的方法`MainActivity`是将其`AsyncTask`设置为内部的私有内部类`MainActivity`。这将允许它访问所有全局变量和方法`MainActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:14:39.060

您的方法有点不寻常，但要回答所提出的问题：

更改`activity`为 ListActivity：

```
ListActivity activity = null; 
```

并使用：

```
protected void onPostExecute(Cursor cur) {
    activity.setListAdapter(new SimpleCursorAdapter(activity, R.layout.list_entry, cur, columns, target, 0));
} 
```

* * *

您应该考虑使用 LoaderManager 类，它会为您创建和处理后台线程。您还应该考虑使用 ContentProvider，它也会为您处理很多繁忙的工作。

最后 AsyncTaskActivity 不是一个 Activity，所以这个类名有点混乱......

# android - 无法从 ContentProvider 启动服务

> ID：14106430
> 
> 赞同：0
> 
> 时间：2012-12-31T22:09:59.143
> 
> 标签：android, android-intent, android-contentprovider

更新应用程序后，我需要使用来自互联网的其他数据唯一地填充数据库。为此，我实现了一个名为 OnUpgradeService() 的服务。该服务应该在 SQLiteOpenHelper 的 OnUpgrade() 方法中启动。

我可以看到 startService 已执行，但未调用 onStartCommand() 。

```
public class MyContentProvider extends ContentProvider {
    ...
    private static class MyOpenHelper extends SQLiteOpenHelper {
        ...
        public MyOpenHelper(Context context, String name, CursorFactory factory, int version) {
            super(context, name, factory, version);
            this.context = context;
        }
        ...
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            if (oldVersion == 1) {
                db.execSQL(DATABASE_CREATE_THUMBNAIL);
                db.execSQL("alter table " + DATABASE_TABLE_FRIEND + " add column " + KEY_THUMBNAIL_URI + " text;");
                ...
                Intent intent = new Intent(context, OnUpgradeService.class);
                context.startService(intent);
            }
            else {
                db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_FRIEND);
                onCreate(db);
            }
        }
        ...
        public class OnUpgradeService extends Service {
            ...
            @Override
            public int onStartCommand(Intent intent, int flags, int startId) {
                Thread t = new Thread(new Runnable() {
                    public void run() {
                        upgradeDatabase();
                        stopSelf();
                    }
                });
                t.start();
                return Service.START_REDELIVER_INTENT;
            } 
```

清单中的相关条目如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" >
    ...
    <application>
        ...
        <service android:enabled="true" android:name=".OnUpgradeService" /> 
        ...
    </application>
    ...
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:30:15.647

> 该应用程序既不会崩溃，LogCat 中也没有任何提示为什么服务没有启动

我觉得这有点难以置信——我敢打赌，有一些与此相关的警告（不一定是错误）。

Android 组件，如 a `Service`，不能是普通的内部类，因为 Android 无法创建实例。你`OnUpgradeService`需要成为一个`static`内部类。

然后，如果您进行更改，则您的清单条目是错误的，因为它声称这`OnUpgradeService`不是任何事物的内部类。

解决这两个问题的最简单方法是`OnUpgradeService`在其自己的文件中转换为常规的顶级公共 Java 类。

说了这么多，如果你发现你给定的方法长期有效，我会感到相当惊讶。以你的方式从互联网上填充数据库之类的东西似乎会给你带来很多问题。就目前而言，当您被要求填充数据库时，它是相对不可预测的，因为每当有人尝试对 this 执行某些操作时都会如此`ContentProvider`，这可能不是一个合适的时机。此外，还有一个问题是用户将立即看到什么，而数据填充还没有发生。我强烈建议您更认真地考虑您的数据同步模型，而不是将其视为随时发生的数据库模式更改的一些副作用。

# html - CSS块高度

> ID：14106431
> 
> 赞同：-1
> 
> 时间：2012-12-31T22:10:00.397
> 
> 标签：html, css

块元素，在另一个块内。第一个块的高度为 200 像素，因此根据 CSS 规范，内部块应获得总边距 + 填充 + 边框 + 200 像素的高度。所以在google chrome web developer tools中，顶部和底部边距只有16 px，总高度+填充+边距就像134。请解释一下吗？

```
 <html>
 <div style="height: 200px;border:1px solid black;">
 <p style="height: 50%; border:1px solid black;"></p>
 </div>
 </script>
 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:32:48.190

我认为您误解[了规范](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)。`200px`默认情况下，它是不包含or的*内容框*。因此，is of = content-box height 的数学运算，然后添加两次边框加上两次边距（根据您所说的），给出.`padding``border``p``50%``200px``100px``1px``16px``134px`

# android - 你可以断点到 Dalvik 来调试 Android 应用程序吗？

> ID：14106435
> 
> 赞同：1
> 
> 时间：2012-12-31T22:10:11.997
> 
> 标签：android, android-intent, android-emulator

我有一个 AppWidget 的性能问题。如果我在退出应用程序之前进行更改并等待 45 秒，则小部件会收到 Intent 并且我会看到屏幕更改。如果我退出得更快，我会看到代码正在根据 Log.d(...) 调用执行，但 GUI 没有更新。

这导致我想要获取 android 源代码，将其连接到 eclipse。编译源码。制作一个虚拟设备。运行 eclipse 和 break point 进入 dalvik 层。

我可以这样做吗？这有意义吗？我已经拉下了android源。我已经完成了午餐和制作 -j 的事情。但我对下一步是什么感到困惑。

# javascript - 更改 Div 的 CSS 一段时间

> ID：14106437
> 
> 赞同：2
> 
> 时间：2012-12-31T22:10:25.220
> 
> 标签：javascript, jquery, css

```
$("#team").css("background-color","blue"); 
```

我想把 id:team 的背景颜色变成蓝色，但是我只想把它变成这种颜色 4 秒。

我该怎么做呢？

我已经用谷歌搜索了，但我找不到任何关于在给定时间范围内更改 css 的信息。

**此外，从以前的设置淡出/淡入/淡入将是一个不错的选择。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T22:15:42.030

如果您希望它仅显示为蓝色 4 秒，您可以执行以下操作：

```
var element = $( "#team" );
var oldColor = element.css( "background-color" );
element.animate( { "background-color": "blue" } )
       .delay( 4000 )
       .animate( { "background-color": oldColor } ); 
```

你需要 jQuery UI `.animate()`，否则你可以只使用`.css()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T22:11:27.700

您必须使用计时器功能：

```
setTimeout(function() { 
     $('#team').css('background-color', 'whatever'); 
}, 4000); 
```

第二个参数是在调用第一个参数（函数）之前您希望等待多长时间的毫秒数。

没有内置的能力说“回到以前的样子”；您必须记住自己代码中的旧值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T23:22:10.760

如果您不想使用 jQuery UI 插件（可能是因为它的大小），那么您可以手动制作动画。

请参阅[以下在 jsFiddle 中工作的代码](http://jsfiddle.net/5U7hL/)。

```
function animblue(selector, from, to, step) {
    var
        target = $('#target'),
        color = from,
        next;
    next = function () {
        var hex = (Math.floor(color) < 16 ? '0' : '') + Math.floor(color).toString(16);
        target.css('background-color', '#' + hex + hex + 'ff');
        color += step;
        if (!((color < from && color < to) || (color > from && color > to))) {
            setTimeout(next, 10);
        }
    };
    next();
}

$('#action').on('click', function () {
    animblue('#target', 255, 0, -255 / 16);
    window.setTimeout(function () {
        animblue('#target', 0, 255, 255 / 16);
    }, 4000);
});​ 
```

# python - python pandas安装问题

> ID：14106439
> 
> 赞同：2
> 
> 时间：2012-12-31T22:10:55.490
> 
> 标签：python, pandas, homebrew, easy-install

我尝试从安装

1.  源（`python setup.py install`进入提取的 tar 球目录）
2.  使用`pip`
3.  使用`easy_install`但似乎没有任何效果......我已经下载并升级了xcode，安装了命令行工具..

我克隆了 pandas 的 github 存储库

```
cd ../pandas
python setup.py install 
running install
running bdist_egg
running egg_info
writing requirements to pandas.egg-info/requires.txt
writing pandas.egg-info/PKG-INFO
writing top-level names to pandas.egg-info/top_level.txt
writing dependency_links to pandas.egg-info/dependency_links.txt
reading manifest file 'pandas.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching 'setupegg.py'
no previously-included directories found matching 'doc/build'
warning: no previously-included files matching '*.so' found anywhere in distribution
warning: no previously-included files matching '*.pyd' found anywhere in distribution
warning: no previously-included files matching '*.pyc' found anywhere in distribution
warning: no previously-included files matching '.DS_Store' found anywhere in distribution
writing manifest file 'pandas.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.6-intel/egg
running install_lib
running build_py
copying pandas/version.py -> build/lib.macosx-10.6-intel-2.7/pandas
running build_ext
**gcc-4.2 not found, using clang instead**
building 'pandas.index' extension
clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/include -Ipandas/src/klib -Ipandas/src -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c pandas/index.c -o build/temp.macosx-10.6-intel-2.7/pandas/index.o
In file included from pandas/index.c:260:
In file included from pandas/src/klib/khash_python.h:3:
pandas/src/klib/khash.h:573:1: warning: expression result unused [-Wunused-value]
KHASH_MAP_INIT_STR(str, size_t)
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pandas/src/klib/khash.h:565:2: note: expanded from macro 'KHASH_MAP_INIT_STR'
    KHASH_INIT(name, kh_cstr_t, khval_t, 1, kh_str_hash_func, kh_str_hash_equal)
    ^ 
```

---更多这样的输出......最后

```
Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-      packages/pandas-0.10.1.dev_c934e02-py2.7-macosx-10.6-intel.egg
Processing dependencies for pandas==0.10.1.dev-c934e02
Searching for pytz
Reading http://pypi.python.org/simple/pytz/
Reading http://pytz.sourceforge.net
Reading http://sourceforge.net/project/showfiles.php?group_id=79122
Reading http://www.stuartbishop.net/Software/pytz
Reading http://sourceforge.net/projects/pytz/
Best match: pytz 2012h
Downloading http://pypi.python.org/packages/2.7/p/pytz/pytz-2012h-py2.7.egg#md5=4258fcfc023e9ff0057405d935fc6e1d
Processing pytz-2012h-py2.7.egg
creating /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pytz-2012h-py2.7.egg
Extracting pytz-2012h-py2.7.egg to /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Adding pytz 2012h to easy-install.pth file

Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pytz-2012h-py2.7.egg
-----
Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/six-1.2.0-py2.7.egg
Searching for numpy==1.6.2
Best match: numpy 1.6.2
Adding numpy 1.6.2 to easy-install.pth file

Using /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Finished processing dependencies for pandas==0.10.1.dev-c934e02

ipython

Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
Type "copyright", "credits" or "license" for more information.

IPython 0.14.dev -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: import pandas 
```

似乎工作没有问题..

当我使用 easy_install 安装 pandas 时，屏幕上的输出似乎表明它可以工作，但是在加载时，python 无法找到该库

```
sudo easy_install pandas
Searching for pandas
Best match: pandas 0.10.1.dev-c934e02
Processing pandas-0.10.1.dev_c934e02-py2.7-macosx-10.8-intel.egg
pandas 0.10.1.dev-c934e02 is already the active version in easy-install.pth

Using /usr/local/lib/python2.7/site-packages/pandas-0.10.1.dev_c934e02-py2.7-macosx-10.8-intel.egg
Processing dependencies for pandas
Finished processing dependencies for pandas

dekumar-mn:ipython dekumar$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.

>>> import pandas as pd
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named pandas 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T22:26:06.157

你有多个版本的 Python 2.7。您安装`pandas`了一个版本，然后尝试将其导入另一个版本，但您不能这样做，因为它们具有单独的站点库。

如果出于某种原因需要多个版本的 Python 2.7，则必须学习如何管理多个版本的 Python。例如，始终确定您是否使用`/usr/bin/easy_install`或，并使用您计划运行`/usr/local/bin/easy_install`的那个。`python`

但是您可能不需要多个版本。如果你只是卸载非苹果的，一切都会容易得多。

您可以从日志中的路径中找出详细信息。手动安装去了`/Library/Python/2.7/site-packages`，这是苹果的`/usr/bin/python`外观。但是`easy_install`去到了`/usr/local/lib/python/2.7/site-packages`，这就是第三方的地方（大概是 Homebrew，来自`brew`标签？）`/usr/local/bin/python`。很明显，`python`你路径上的第一个是`/usr/bin/python`，而第一个`easy_install`是`/usr/local/bin/easy_install`。这会导致混乱，就像这里一样。

更糟糕的是，如果你安装`ipython`到两个 Python 中，无论你安装第二个，最终都会变成`/usr/local/bin/ipython`，这将导致*更多的*混乱。

如果你这样做`sudo /usr/bin/easy_install pandas`，你可以`pandas`在 Apple Python 中使用。为确保这是您运行的那个，请始终执行`/usr/bin/python`or `/usr/bin/python /usr/local/bin/ipython`。如果你这样做`sudo /usr/local/bin/easy_install pandas`，你可以`pandas`在第三方 Python 中使用。为确保这是您运行的那个，请始终执行`/usr/local/bin/python`or `/usr/local/bin/python /usr/local/bin/ipython`。

查看您的评论和更详细的编辑，您可能实际上有*两个*第三方 Python，这让事情变得更加混乱。如果他们都喜欢`/usr/local/bin`（除非你使用 MacPorts 或 Fink，否则他们会这样做），你可能已经让其中一个被另一个覆盖了一半，而且你不可能让它工作。如果是这样的话，我建议你做一些激进的事情。如果您不愿意从头开始安装 OS X，至少`rm -rf /usr/local /Library/Python ~/Library/Python`，然后重新安装`brew`和任何其他您需要的第三方东西，这次确保只安装一个额外的 Python （虽然零仍然会更好！）。

同时，有两个小注解：

1.  它几乎总是比使用`pip`更好`easy_install`。如果你没有它，`sudo easy_install pip`现在你有。（“几乎”的唯一常见例外是`pip`它自己和`readline`。）

2.  不要`sudo`与 Homebrew 一起使用。Homebrew 在设置它所涉及的所有目录时遇到了很多麻烦，因此您永远不需要`sudo`. 一旦你开始做`sudo brew`,`sudo /usr/local/bin/easy_install`等等，你最终会破坏它，所以以后的安装会出现权限错误，并且需要大量的工作`brew doctor`来解决所有问题。

# javascript - 向左负滚动

> ID：14106440
> 
> 赞同：3
> 
> 时间：2012-12-31T22:11:12.353
> 
> 标签：javascript, css, sharepoint

我想做的只是有一个滚动条，允许我在 SharePoint 网站上导航到左侧。我尝试了几个使用 CSS 和 javascript 在网上找到的示例，但似乎我不知道只用一个滚动条就可以让它出现在 -120 像素上。任何帮助是极大的赞赏。

![在此处输入图像描述](../Images/414b09ab20df235a0204f5389d95233a.png)

当我到达边缘时，滚动出现。

![在此处输入图像描述](../Images/dd36ff094624318371634d1076a7fc05.png)

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:24:03.710

**您需要添加代码和/或工作示例。**否则，很难确定问题的根源。

* * *

您始终可以通过 CSS`overflow`定义强制滚动条。

```
overflow: scroll; 
```

[MDN`overflow`页面](https://developer.mozilla.org/en-US/docs/CSS/overflow)为每个选项提供了很好的解释和演示。它规定了以下内容`scroll`：

> `scroll`
> 
> 内容被剪裁，桌面浏览器使用滚动条，无论是否剪裁任何内容。这避免了滚动条在动态环境中出现和消失的任何问题。打印机可能会打印溢出的内容。

如有必要，您可以指定方向，尽管 MDN 页面会警告可能存在的兼容性问题。我不知道有任何问题。

```
overflow-x: scroll;
overflow-y: scroll; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T20:13:25.997

这听起来像是浮动、溢出和 s4-workspace 主容器 div 的问题。尽管没有更多代码和更大的屏幕截图，但很难进一步解释。或者加载 Firebug 的屏幕截图，以便我们可以看到存在哪些容器以及应用了哪些 css。

# html - 并排图像没有间隙？

> ID：14106446
> 
> 赞同：1
> 
> 时间：2012-12-31T22:11:36.920
> 
> 标签：html, css, image, button, space

![这是我需要帮助的，有什么想法吗？](../Images/b2836e63dcc37046f0419176c168b57f.png)

[http://i.stack.imgur.com/o2Kht.png](https://i.stack.imgur.com/o2Kht.png)

基本上我希望这些按钮并排放置。

我已将它们放在一个容器中，但我无法像下面的示例那样将它们并排放置。

```
 <head>
<link rel="stylesheet" type="text/css" href="mystyle.css">  <!-- Linking Style Sheets -->
</head>

<body>

<style type="text/css">

<!-- Background image -->

</style>

 <div class="img-wrapper-center" id="titlebar">
    <img src="titlebar.png" id="img1"/>      
</div>
</div>  

<div id="bodycontainer">
<div id="text">
Welcome to the shop, you can add your items to to the cart below
</div>

<div id="formcontainer">
<div id="myForm">
    <form name="theForm" action="shop.html" method="post" onSubmit="return checkWholeForm(theForm)">
        <input type="radio" name="ram" value="yes">yes<br>
        <input type="radio" name="ram" value="no">no

        <br><br>
        <input type="radio" name="cpu" value="yes">yes<br>
        <input type="radio" name="cpu" value="no">no

        <br><br>
        <input type="radio" name="harddrive" value="yes">yes<br>
        <input type="radio" name="harddrive" value="no">no

        <br><br>

</div>

<div id="submitbuttons">
        <input type="submit" value="Submit">
        <input type="reset">
</div>
</div>

 </form>

 <div id="buttoncontainer">

 <div class="homebtn">
    <a href="..\home.html" onmouseover="SwapOut()" onmouseout="SwapBack()"><img name="homebtn" src="homebuttonup.png"/>   
    </a>
     <div class="shopbtn">
    <a href="shop.html" onmouseover="SwapOutshop()" onmouseout="SwapBackshop()"><img name="shopbtn" src="shopbuttonup.png"/>  
    </a>
    </div>
</div>

</body>

 <!-- Start of rollover script -->

 <script>  
Rollimage = new Array()

Rollimage[0]= new Image(121,153)
Rollimage[0].src = "homebuttonup.png"

Rollimage[1] = new Image(121,153)
Rollimage[1].src = "homebutton.png"

function SwapOut() {
document.homebtn.src = Rollimage[1].src;
return true;
}

function SwapBack() {
document.homebtn.src = Rollimage[0].src;
return true;
}

Rollimageshop = new Array()

Rollimageshop[0]= new Image(121,153)
Rollimageshop[0].src = "shopbuttonup.png"

Rollimageshop[1] = new Image(121,153)
Rollimageshop[1].src = "shopbutton.png"

function SwapOutshop() {
document.shopbtn.src = Rollimageshop[1].src;
return true;
}

function SwapBackshop() {
document.shopbtn.src = Rollimageshop[0].src;
return true;
}

</script>
 <!-- end of rollover script -->

 <!-- Start of form validation -->

 <script>

function checkWholeForm(theForm) {
    var reason = ''; 
    reason += checkRadioButtons(theForm.ram); 

    if (reason != '') {  
       alert(reason);
       return false;
    }
    return true;
}

function checkRadioButtons(radiobuttons) {
    var checkvalue = "";
    var i=0;
    var error = "";
    var amountOfRadioButtons = radiobuttons.length; 
    for (i=0; i<amountOfRadioButtons; i++) { 
       if (radiobuttons[i].checked) {
            checkvalue = theForm.ram[i].value;  
       } 
    }
    if (!(checkvalue)) { 
       error = "Please choose an option for RAM.\n"
   }
    return error;
}

 </script>

 <!-- End of form validation --> 
```

抱歉耽搁了，我是新手，所以我不知道如何识别它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:13:58.593

```
.homebtn, .shopbtn{
    display:inline; /*or inline-block*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:48:22.593

查看您的代码，我可以发现一些可以改进的地方。

首先，您使用 JavaScript 来处理按钮翻转。除非有特定的理由这样做，否则没有必要。一种更有效的方法是使用纯 CSS 进行按钮翻转。

其次，您将图像嵌入到链接本身中：

```
<a href="..\home.html" onmouseover="SwapOut()" onmouseout="SwapBack()"><img name="homebtn" src="homebuttonup.png"/>   
</a> 
```

如果您要实际使用基于 CSS 的导航，则不需要这样做。好处是更少的代码以及最终的页面大小和加载时间。请记住，每次图像加载都是对服务器的单独 HTTP 请求。从长远来看，这等于更多的带宽。您的网站可能不受此类东西的影响，但这是一种很好的做法；最佳实践。

我创建了一个 JSFiddle 来向您展示我将如何处理您的导航。我要添加的另一件事是将所有导航图像放入 Sprite。

[http://jsfiddle.net/cbPRv/](http://jsfiddle.net/cbPRv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T22:40:09.713

我在[这里使用来自谷歌图像搜索的图像制作了一个 jsfiddle，](http://jsfiddle.net/Ru3Zn/)因为我无权访问您的图像，但是对于您自己的用途，css 应该非常相似。

您还应该为按钮容器修复 html

```
<div id="buttoncontainer">
  <div class="homebtn">
    <a href="..\home.html" onmouseover="SwapOut()" onmouseout="SwapBack()">
      <img name="homebtn" src="homebuttonup.png"/>   
    </a>
  </div>
  <div class="shopbtn">
    <a href="shop.html" onmouseover="SwapOutshop()" onmouseout="SwapBackshop()">
      <img name="shopbtn" src="shopbuttonup.png"/>  
    </a>
  </div>
</div> 
```

您当前有一个按钮嵌套在另一个按钮中。

# asp.net-mvc - ModelBindingContext.ValueProvider.GetValue(bindingContext.ModelName) 返回 null

> ID：14106447
> 
> 赞同：2
> 
> 时间：2012-12-31T22:11:56.700
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding, modelbinders

我有用于 ModelBinding 的 bindingContext.ValueProvider.GetValue(bindingContext.ModelName) 并且它返回 null，但是如果我使用 bindingContext.ValueProvider.GetValue("id") 则返回正确的记录。任何想法缺少什么？我应该以某种方式注册模型类吗？

```
public class EntityModelBinder<TEntity>: IModelBinder where TEntity : Entity
{
    private readonly IUnitOfWork unitOfWork;

    public EntityModelBinder(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
    }

    public object BindModel(ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {
        ValueProviderResult value =  bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        var id = Guid.Parse(value.AttemptedValue);

        var entity = ((IGenericRepository<TEntity>)unitOfWork.GetRepository(typeof(TEntity))).GetByID(id);

        return entity;
    }
} 
```

控制器调用是“比尔”是我的实体类之一，它是 UnitOfWork 的一部分：

```
public ActionResult Edit(Bill bill)
    {            
        var model = Mapper.Map<Bill, BillEditModel>(bill);
    return View("Edit",model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:17:08.090

我不是 mvc 方面的专家，但我对您的问题有所了解。我假设您正在尝试从您的工作单元中获取 Bill 实体。您的操作方法定义了参数`Bill bill`。这意味着 MVC 将设置`bindingContext.ModelName`为“bill”，而不是“id”。

我建议不要尝试通过模型绑定来获取 Bill 实体，而是建议在控制器中使用您的工作单元。所以编辑动作可能就像

```
public ActionResult Edit(Guid id)
{
     Bill bill = _unitOfWork.GetByID(id);
} 
```

并且您的 Controller 构造函数可能类似于：

```
public MyController(IUnitOfWork uow) {
    _unitOfWork = uow;
} 
```

这是假设您使用的是 DI。

我认为，使用模型绑定器从存储库中获取实体可能很危险。除非您的 GetByID 方法抛出异常，否则 MVC 将继续在请求数据中搜索 Bill 实体。想象一个场景，其中用户发布了一个您的存储库中不存在的新实体。您的控制器将不得不做一些额外的工作来检查该实体是否真的存在于您的存储库中。

你最好在控制器中使用你的工作单元。

# php - 根据您点击的内容，为联系表格提供已填写的字段

> ID：14106461
> 
> 赞同：0
> 
> 时间：2012-12-31T22:14:27.003
> 
> 标签：php, html, button, contact-form

我正在尝试建立一个包含产品列表的网站。每个产品下方都有一个按钮，上面写着“请求报价”。当他们单击该按钮时，我希望他们被带到联系页面，主题行填写产品 ID 和预定字符串（即“报价请求”）。

如何设置“请求报价按钮”以发送数据并在联系页面中获取主题行以阅读它？

如果这是一个明显的问题，我很抱歉，我对此很陌生，我正在将其作为一个学习项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:17:04.923

您可以通过将主题附加到 GET 字符串中来做到这一点。

```
 contact.php?subject=thus+is+the+subject 
```

然后在联系页面上，您可以使用`$_GET['subject']`;

```
 <input type="text" value="<?php echo $_GET['subject'];  ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:37:41.620

也许它有帮助： [http ://www.phpriot.com/articles/multi-step-wizards](http://www.phpriot.com/articles/multi-step-wizards)

您需要先通过 GET 或 POST 方法将参数传递给您的联系表单，然后在contact.php 中捕获它们，然后按照@InGodITrust 所说的那样显示它们。在其他方面，你可以使用一些向导控件，或者你可以自己做！

# mysql - 在 MySQL 中删除长度为 400 个字符或 10 个句子后的字符串

> ID：14106463
> 
> 赞同：1
> 
> 时间：2012-12-31T22:14:34.757
> 
> 标签：mysql, string

我有一张表，其中一个字段（描述）可以变化，理想情况下，我想删除 400 个字符或 10 个句子之后的任何内容（但在句子末尾，要么什么都没有，要么添加....看起来更自然）。

我得到了职位

```
SELECT description,LOCATE('.',description)   as pos
FROM table  
WHERE locate('.',description)>20; 
```

但我不能再进一步了；这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:36:30.997

要截断到 10 个句子，请使用[substring_index](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)：

```
substring_index( description, '.', 10 ) 
```

您的查询：

```
SELECT  concat(
            left(  substring_index( description, '.', 10 )
                  ,397
                )
            ,'...' )
FROM table  
WHERE len( description ) > 400 
```

注意：未测试。

# php - 我会使用 mb_substr 字符串来执行此操作吗？

> ID：14106465
> 
> 赞同：0
> 
> 时间：2012-12-31T22:14:41.540
> 
> 标签：php, arrays, multibyte

我正在寻找一种仅删除数组中以元音开头的元素的方法。所以亚当将被删除，爱德华将被删除等等。我的朋友告诉我，要做到这一点，我会使用[mb_substr](http://ca2.php.net/manual/en/function.mb-substr.php)和相关函数。

但是我不知道这会是什么样子，甚至为什么我会对此使用多字节字符串操作。有人能指出我正确的方向吗？请告诉我如何从数组中删除所有以元音开头的元素

**因为我迷惑了一些人**

如果数组看起来像这样：

```
$array = array(
    array('title' => 'apples'),
    array('title' => 'jack')
) 
```

那么 apples 将被删除，而 jack 则不会，因为它不是以元音开头的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:25:31.853

您期望什么语言/元音集？如果是英文，`aeiou`那么这里不需要多字节函数，case 已关闭。但是让我们让它更有趣，假设我们期望波兰语输入有 9 个元音：`aeiouyąęó`。

现在问题在于编码。现在是 2013 年，每个人都应该使用`utf8`，但众所周知，有些人只是想看着世界燃烧，仍然使用`iso-8859-2`甚至更糟`windows-1250`。如果我们知道，那就太好了，我们可以继续 - 如果`utf8`是，则需要多字节函数，其余两个则不需要。

但是，如果数据来自各种来源，并且您无法确定它的编码，但仍然必须正确响应所有情况......好吧，那么我为您感到抱歉，因为很难确定真正的编码。但是你肯定需要 mb_* 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:35:24.777

```
$new_array = array_filter(
    $array, 
    function($x) { 
        return !stristr('aeiou', $x['title'][0]); 
    }
); 
```

`array_filter`返回一个新数组，其元素是函数为真的所有元素。`$x`是被过滤的数组的元素，并且`$x['title'][0]`是其标题元素值的第一个字符。 `stristr`对第一个参数执行不区分大小写的搜索，因此它检查第一个字符是否在元音字符串中。如果找到，`stristr()`则返回位置，否则返回false；`!`反转 this 的真值，因此如果第一个字符*不是*元音，则函数返回 true。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T23:16:50.683

您想要使用的唯一原因`mb_*`是当您使用非 ASCII 字符串时（例如“ふーばー”）。但在你的情况下，因为你只是在寻找元音，这是没有意义的。

```
// go over each element in the array
foreach ($array as $key => $value)
{
    //check if the first character of the title is a vowel (ignore case, ie 'a' or 'A')
    if (stristr("aeiou", $value['title'][0]))
    {
        // remove it from the array
        unset($array[$key]);
    }
} 
```

# iphone - ios如何将json数据调用保存为文件

> ID：14106469
> 
> 赞同：2
> 
> 时间：2012-12-31T22:14:54.180
> 
> 标签：iphone, ios, xcode, json

你们中的任何人都知道如何将 json 数据调用保存到文件中吗？

```
self.results=[NSJSONSerialization
                           JSONObjectWithData:jsonData
                           options:0
                           error:&error]; 
```

我试过了：

```
 [_results writeToFile:@"jsonFile" atomically:YES]; 
```

但我没有看到文件：

NSArray * directoryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:directory error:&error];

```
file path (
    "Default-568h@2x.png",
    "Default.png",
    "Default@2x.png",
    "en.lproj",
    "Info.plist",
    "JSON Generator",
    PkgInfo
) 
```

你们中的任何人都知道我在做什么错吗？

我会非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:19:14.787

`JSONObjectWithData`返回 an`NSArray`或`NSDictionary`nil。如果不是 nil 写它：

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag 
```

# php - PHP SMTP 脚本“无法启动身份验证”错误

> ID：14106473
> 
> 赞同：2
> 
> 时间：2012-12-31T22:15:46.957
> 
> 标签：php, html, sendmail

我一直在寻找解决方案，但是即使在查看了几个类似的线程之后，我也无法找到适合我情况的解决方案。

我通过一个测试脚本运行它并得到这个输出：

```
string(33) "Failed to Initiate Authentication" 
```

在多次尝试解决问题后，我无法弄清楚导致错误的原因。

这是我的代码：

```
<?php

$SMTP_SERVER = 'relay-hosting.secureserver.net';
$SMTP_PORT = 25;
$SMTP_USERNAME = 'no-reply@website.com';
$SMTP_PASSWORD = 'password';
$SMTP_FROM = 'no-reply@website.com';

function smtpmail($to, $subject, $message, $headers = ''){

// set as global variable
global $SMTP_SERVER, $SMTP_PORT, $SMTP_USERNAME, $SMTP_PASSWORD, $SMTP_FROM;

// get From address
if ( $headers && preg_match("/From:.*?[A-Za-z0-9\._%-]+\@[A-Za-z0-9\._%-]+.*/", $headers, $froms) ){
    preg_match("/[A-Za-z0-9\._%-]+\@[A-Za-z0-9\._%-]+/", $froms[0], $fromarr);
    $from = $fromarr[0];
}else{
    $from = $SMTP_FROM;
    $headers = 'From: '.$from."\r\n".$headers;
    }

// Clean some of this stuff up...

// escape the message
$message = str_replace("\n.", "\n..", $message);

// also escape any leading period
if($message[0] == '.'){
    $message = '.'. $message;
    }

// escape the subject
$subject = str_replace( array("\r", "\n"), '', $subject );

// escape the recipient
$to = str_replace( array("\r", "\n"), '', $to );

// making sure not to send a zero, 'null', or etc.     ambiguity ftw..</sarcasm>
if(!$headers) $headers = '';

// Open an SMTP connection
$cp = fsockopen ($SMTP_SERVER, $SMTP_PORT, &$errno, &$errstr, 1);
if (!$cp)
return "Failed to even make a connection";
$res=fgets($cp,256);
if(substr($res,0,3) != "220") return "Failed to connect";

// Say hello...
fputs($cp, "HELO ".$SMTP_SERVER."\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "250") return "Failed to Introduce";

// perform authentication
fputs($cp, "auth login\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "334") return "Failed to Initiate Authentication";

fputs($cp, base64_encode($SMTP_USERNAME)."\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "334") return "Failed to Provide Username for Authentication";

fputs($cp, base64_encode($SMTP_PASSWORD)."\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "235") return "Failed to Authenticate";

// Mail from...
fputs($cp, "MAIL FROM: <$from>\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "250") return "MAIL FROM failed";

// Rcpt to...
fputs($cp, "RCPT TO: <$to>\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "250") return "RCPT TO failed";

// Data...
fputs($cp, "DATA\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "354") return "DATA failed";

// Send To:, Subject:, other headers, blank line, message, and finish
// with a period on its own line (for end of message)
fputs($cp, "To: $to\r\nSubject: $subject\r\n$headers\r\n$message\r\n.\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "250") return "Message Body Failed";

// ...And time to quit...
fputs($cp,"QUIT\r\n");
$res=fgets($cp,256);
if(substr($res,0,3) != "221") return "QUIT failed";

return true;
}

//var_dump(smtpmail('mramonster@hotmail.com', 'email subject', ".\r\njust a: (message) 'that'\nwill <a href='http://www.google.com/'>hopefully</a> %get #through\r\n.\r\nsomething","From: test@example.com\r\n"));

?> 
```

我已经仔细检查了用户名、服务器、密码、电子邮件等。我仍然无法弄清楚错误可能是什么。

注意：我不使用“no-reply@website.com”或“密码”作为我的凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:00:43.933

为什么我们不能使用让生活变得轻松的 PEAR 邮件包！

下载地址： http: [//pear.php.net/package/Mail/redirected](http://pear.php.net/package/Mail/redirected)

PEAR 的 Mail 包定义了一个接口，用于在 PEAR 层次结构下实现邮件程序。它还提供了对多个邮件后端有用的支持功能。目前支持的后端包括：PHP 原生的 mail() 函数、sendmail 和**SMTP**。

这是一个代码示例：

```
<?php

//Include the Pear Mail package
include("Mail.php");

/* mail setup recipients, subject etc */
$recipients = "feedback@yourdot.com";
$headers["From"] = "user@somewhere.com";
$headers["To"] = "feedback@yourdot.com";
$headers["Subject"] = "User feedback";
$mailmsg = "Hello, This is a test.";

/* SMTP server name, port, user/passwd */
$smtpinfo["host"] = "smtp.mycorp.com";
$smtpinfo["port"] = "25";
$smtpinfo["auth"] = true;
$smtpinfo["username"] = "smtpusername";
$smtpinfo["password"] = "smtpPassword";

/* Create the mail object using the Mail::factory method */
$mail_object =& Mail::factory("smtp", $smtpinfo);

/* Ok send mail */
$mail_object->send($recipients, $headers, $mailmsg);

?> 
```

# memory - 非临时指令如何工作？

> ID：14106477
> 
> 赞同：9
> 
> 时间：2012-12-31T22:16:23.170
> 
> 标签：memory, x86, cpu-architecture, intrinsics, cpu-cache

我正在阅读Ulrich Drepper 的[每个程序员应该了解](http://www.akkadia.org/drepper/cpumemory.pdf)的关于内存的知识 pdf。在第 6 部分的开头有一段代码：

```
#include <emmintrin.h>
void setbytes(char *p, int c)
{
    __m128i i = _mm_set_epi8(c, c, c, c,
    c, c, c, c,
    c, c, c, c,
    c, c, c, c);
    _mm_stream_si128((__m128i *)&p[0], i);
    _mm_stream_si128((__m128i *)&p[16], i);
    _mm_stream_si128((__m128i *)&p[32], i);
    _mm_stream_si128((__m128i *)&p[48], i);
} 
```

在它下面有这样的评论：

> 假设指针`p`正确对齐，调用此函数会将**寻址缓存行的所有字节设置为`c`**. 写组合逻辑将看到四个生成的 movntdq 指令，并且仅在执行完最后一条指令后才向内存发出写命令。总而言之，这个代码序列不仅**避免了在写入之前读取缓存行**，还避免了可能很快不需要的数据污染缓存。

让我感到困扰的是，在对函数的注释中写道，它“会将寻址缓存行的所有字节设置为 c”，但根据我对流内部结构的理解，它们绕过缓存 - 既没有缓存读取也没有缓存写入。此代码将如何访问任何缓存行？第二个粗体片段表示类似，该函数“避免在写入之前读取缓存行”。如上所述，我看不到任何缓存的写入方式和时间。此外，是否需要在缓存写入之前对缓存进行任何写入？有人可以向我澄清这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-01T20:09:57.487

当您写入内存时，您写入的缓存行必须首先加载到缓存中，以防您仅部分写入缓存行。

当您写入内存时，存储在存储缓冲区中分组。通常，一旦缓冲区已满，它将被刷新到缓存/内存。请注意，存储缓冲区的数量通常很小（~4）。对地址的连续写入将使用相同的存储缓冲区。

带有非临时提示的流式读/写通常用于减少缓存污染（通常使用 WC 内存）。这个想法是在 CPU 上保留一小组缓存线供这些指令使用。不是将缓存线加载到主缓存中，而是将其加载到这个较小的缓存中。

该评论假设以下行为（但我找不到硬件实际执行此操作的任何参考，需要测量或可靠来源，并且它可能因硬件而异）： - 一旦 CPU 看到存储缓冲区已满并且它与缓存行对齐，它将直接刷新到内存，因为非临时写入绕过了主缓存。

唯一可行的方法是，如果存储缓冲区与实际写入的缓存行在刷新后发生合并。这是一个公平的假设。

请注意，如果写入的缓存行已经在主缓存中，上述方法也会更新它们。

如果使用常规内存写入而不是非临时写入，则存储缓冲区刷新也会更新主缓存。这种情况完全有可能避免读取内存中的原始缓存行。

如果使用非临时写入写入部分缓存行，则可能需要从主内存（或主缓存，如果存在）中获取缓存行，如果我们没有提前读取缓存行，可能会非常慢使用常规读取或非临时读取（这会将其放入我们单独的缓存中）。

通常，非临时高速缓存大小约为 4-8 高速缓存行。

总而言之，最后一条指令开始写入，因为它也恰好填满了存储缓冲区。存储缓冲区刷新可以避免读取写入的高速缓存行，因为硬件知道存储缓冲区是连续的并且与高速缓存行对齐。非临时写入提示仅用于避免使用我们写入的缓存行 IF 填充主缓存，并且仅当它尚未在主缓存中时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-02T04:25:30.927

我认为这部分是一个术语问题：您从 Ulrich Drepper 的文章中引用的段落不是在谈论缓存数据。它只是使用术语“缓存线”来表示对齐的 64B 块。

这是正常的，并且在讨论具有不同缓存行大小的一系列硬件时特别有用。（早期的 x86 CPU，最近是 PIII，有 32B 缓存线，所以使用这个术语可以避免将微架构设计决策硬编码到讨论中。）

数据的缓存行仍然是缓存行，即使它当前在任何缓存中都不热。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-23T14:24:33.187

我没有参考资料来证明我在说什么，但我的理解是：内存总线上的唯一传输单元是高速缓存行，无论它们进入高速缓存还是某些特殊寄存器。所以确实，您粘贴的代码填充了一个缓存行，但它是一个不驻留在缓存中的特殊缓存行。一旦这个缓存行的所有字节都被修改，缓存行被直接发送到内存，而不通过缓存。

# c# - 有两种方法做同一件事

> ID：14106482
> 
> 赞同：1
> 
> 时间：2012-12-31T22:16:53.770
> 
> 标签：c#, .net, linq, entity-framework, tsql

我有一些 SQL 标量值函数和一些存储过程来执行我从许多其他存储过程和`SqlCommands`C# 代码中调用的一些任务。前段时间我开始在某些部分使用 EF，现在我在一个辅助类中用 C# 编写了一些方法，这些方法与那些常见的 SQL 函数和存储过程执行相同的操作。所以基本上我有很多方法写了两次，T-SQL 和 C# (EF+Linq)。我不能放过SQL，因为它们用于其他存储过程！

**在这种情况下，避免重复工作并将旧 TSQL 转换为 Linq（如果我应该这样做）的最佳做法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:21:13.603

将该功能放在*每个人都*调用的 SQL 函数中。在您的 C# 代码中，您可以有一个辅助函数来为您调用该函数，该函数也将在任何地方使用。

# android - 在我的应用程序中导入原始文件（密钥库）

> ID：14106492
> 
> 赞同：1
> 
> 时间：2012-12-31T22:18:55.367
> 
> 标签：android, ssl, https, import, keystore

我正在尝试将密钥库文件导入我的应用程序。我的`res/raw`文件夹里有它。我查看了有关 stackoverflow 的其他问题，但找不到任何可行的解决方案。

我试过使用

```
InputStream in = this.getResources().openRawResource(R.raw.keystore); 
```

它导致`java.lang.NullPointerException`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:07:37.453

最后，我让它工作了。

问题是，我在构造函数中使用了这个。并且在退出构造函数之前，您没有可用的上下文。就是这样。

# antlr3 - 如何从属性“元素”中提取令牌信息？

> ID：14106493
> 
> 赞同：1
> 
> 时间：2012-12-31T22:19:17.767
> 
> 标签：antlr3

**一、总体任务：**

我想自定义 Java.stg 以修改代码块注释中的令牌显示格式，以替代语法规则。

**2\. 背景：**

我目前的语法中的一条规则是：

```
temporal returns [String ret]:

  NEXT disj
  {$ret= $ret= "X ".concat($disj.ret);}

  | EVENTUALLY disj

  {$ret= "F ".concat($disj.ret);}`

; 
```

对应生成的代码块（在解析器中）如下：

```
switch (alt2) {

            case 1 :
                // RERS.g:26:7: NEXT disj
                {
                match(input,NEXT,FOLLOW_NEXT_in_temporal204); 

                pushFollow(FOLLOW_disj_in_temporal206);
                disj2=disj();

                state._fsp--;

                ret = ret = "X ".concat(disj2);

                }
                break;
            case 2 :
                // RERS.g:28:7: EVENTUALLY disj
                {
                match(input,EVENTUALLY,FOLLOW_EVENTUALLY_in_temporal222); 

                pushFollow(FOLLOW_disj_in_temporal224);
                disj3=disj();

                state._fsp--;

                ret = "F ".concat(disj3);

                }
                break; 
```

**3\. 我的目标：**

将评论从格式 like 更改`// RERS.g:26:7: NEXT disj`为`NEXT_disj`，即从`<fileName>:<description>`to`<MyOwnAttribute>`

**4.到目前为止的尝试：**

我尝试将模板“alt(elements,altNum,description,autoAST,outerAlt,treeLevel,rew)”修改如下：

```
alt(elements,altNum,description,autoAST,outerAlt,treeLevel,rew) ::= <<
/* <elements:ExtractToken()> */
{
<@declarations()>
<elements:element()>  // as I understand, it's just an template expansion to apply the sub templates in each elements
<rew>
<@cleanup()>
}
>> 
```

我检查了在这种情况下，属性元素的值类似于`{el=/tokenRef(), line=26, pos=7}{el=/ruleRef(), line=26, pos=12}{el=/execAction(), line=27, pos=7}`. 我认为我应该“重载”“tokenRef”模板以吐出格式为“NEXT_disj”的令牌

**5\. 问题：**

1.  如何“重载”现有模板？我想这样做，因为否则我将不得不修改“元素”的值。

2.  如何仅将模板应用于属性“元素”中的特定元素，而不是将其应用于每个元素（就像模板“元素（）”所做的那样）？

3.  我认为应该有一些方便的方法来实现我的目标。有什么建议吗？

提前致谢。

# android - Android : 通过服务启动音乐播放器

> ID：14106494
> 
> 赞同：1
> 
> 时间：2012-12-31T22:19:37.893
> 
> 标签：android, android-music-player

我正在尝试从服务启动 MediaPlayer，但它没有按预期工作。我收到以下异常，

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.MUSIC_PLAYER flg=0x10000000 } 
```

请找到在服务中调用的代码片段，

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

安卓清单

```
<service android:name="com.lakshmi.shakenfun.AlertService" >
    <intent-filter >
        <action android:name="android.intent.action.MUSIC_PLAYER" />
    </intent-filter>
</service> 
```

请让我知道，我在哪里做错了。

我的目标平台是 8

谢谢，拉梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:24:00.520

也许您的 8 目标平台对于该 api 来说太低了？你有这个音乐播放器加载吗？ [https://play.google.com/store/apps/details?id=com.google.android.music&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5nb29nbGUuYW5kcm9pZC5tdXNpYyJd](https://play.google.com/store/apps/details?id=com.google.android.music&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5nb29nbGUuYW5kcm9pZC5tdXNpYyJd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T10:42:27.663

MediaStore.INTENT_ACTION_MUSIC_PLAYER 已从 API 15 中弃用，新代码为：

```
try {
    String pkgname = "com.sec.android.app.music";
    PackageManager pkgmanager = getPackageManager();
    Intent intent = pkgmanager.getLaunchIntentForPackage(pkgname);
    startActivity(intent);
} catch(Exception e) {
    // music player not found
} 
```

只需将此代码添加到您的按钮侦听器上，它将调用默认音乐播放器。

# java - 如何从 Java 中读取在线文本文件

> ID：14106497
> 
> 赞同：-3
> 
> 时间：2012-12-31T22:20:08.483
> 
> 标签：java, file, url, text, runtime-error

```
url = new URL("https://dl-web.dropbox.com/get/userlist.txt?w=c8bdbe4a");  
Scanner s = new Scanner(url.openStream());
q=s.next();
if(me.equals(q))
    {b=true; break;} 
```

我收到此错误：

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: https://dl-web.dropbox.com/get/userlist.txt?w=c8bdbe4a
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at gui.main(gui.java:48) 
```

任何人都知道为什么，或者如何解决这个问题？我正在尝试从在线文本文件中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:21:46.750

似乎您需要登录才能访问该文件，它不能公开访问，这就是 403 错误代码的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:26:46.513

该资源受密码保护。您没有提供一个，因此您无法访问该文件。有关 HTTP 错误代码的列表，请参见[此处](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

注意：403 - 禁止。

# .net - 构建 .net 程序集时缺少幻像类型

> ID：14106499
> 
> 赞同：0
> 
> 时间：2012-12-31T22:20:33.577
> 
> 标签：.net, class, types, assemblies, .net-assembly

我正在使用 Visual Studio 2010 在 C#（.NET Framework 3.5 控制台应用程序）中开发一个 .NET 应用程序。（Win7 64 位）机器崩溃后，我将我的项目从旧 HD 复制到新的。现在在新机器上，每当我构建时，我都会收到错误消息：

> “Bloomberglp.AppPortalApi.DataPersistence.ExtensibleDataObject”类型是在未引用的程序集中定义的。您必须添加对程序集“Bloomberglp.AppPortalAPI, version=1.3.5.1, Culture=neutral, PublicKeyToken=51f5d93763bdb58e”的引用。

附在“Program”类中第一个方法的定义中，显然没有提及。

但是，我没有在我的项目中的任何地方使用这种类型，并且我的项目中的任何引用都没有使用它。我以前使用过它，但是所有对它的引用都被删除了……所以我想。我搜索了它，但在任何 .cs 文件中都找不到它。它在对象浏览器中也找不到。那么我应该在哪里/如何寻找它？

**编辑：**发现[在未引用的程序集中定义的 C# 类型](https://stackoverflow.com/questions/3431857/c-sharp-type-defined-in-an-assembly-that-is-not-referenced)；.csproj 中没有对类型或 dll 的引用

在 x86 和任何 cpu 之间切换我的目标并重新编译都没有效果，切换回来也没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:49:15.610

这通常是*间接*引用。换句话说，您引用了一个已经构建的程序集，并且*该*程序集引用了“幻像”中的一种类型。所以你根本不会在你的项目文件中看到它。您会在构建该程序集的项目中看到，您肯定会因为崩溃而丢失该程序集或只是忘记复制它。

解决此问题的另一种经典方法是针对客户端配置文件，这是 VS2010 的祸害，默认情况下会选择它。如果程序集引用了不属于客户端配置文件一部分的程序集（如 System.Web）中的类型，那么当程序集被拒绝时，编译器会变得愚蠢，因为它需要一个不可用的 .NET 框架程序集。您会收到有关它的*警告*，但是当您专注于*错误*时很容易忽略它。否则与彭博所从事的业务非常匹配，它是一家网状公司。您可以通过将框架目标更改为完整目标来修复该目标。

# javascript - 使用 Javascript 从本地文件夹读取 XML 文件

> ID：14106501
> 
> 赞同：7
> 
> 时间：2012-12-31T22:20:49.703
> 
> 标签：javascript, xml

我正在尝试学习如何读入 XML 文件中的网页数据。这是一个静态 HTML 页面。我不想要 Web 服务器，也不能使用 Ajax。XML 文件是本地的（与 HTML 文件位于同一目录中）。我希望这可以在 Chrome 浏览器中使用。

我需要做的是：

1.  读取页面上的 XML 文件 onLoad 事件。
2.  使用innerHTML 将XML 数据插入到一个div 中。

我的问题是读取 XML 文件。我发现的所有示例我认为只有在运行 Web 服务器时才有效，我必须避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:30:42.343

如果您正在读取另一个文件，那么使用前端 JS 执行此操作的唯一方法是另一个请求（ajax）。如果这是 node.js 会有所不同，因为 node 可以访问文件系统。或者，如果您将 xml 转换为同一页面上的 javascript 字符串，则可以对其进行操作。有许多好的库（jquery 的 parseXML）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:36:54.197

由于您只针对 Chrome，您可以查看[File API](http://www.w3.org/TR/FileAPI/)。您必须提示用户选择文件或将其放入页面的特定区域，这可能是您宁愿避免的事情，也可能不这样做。下面的[HTML5 Rocks 文章](http://www.html5rocks.com/en/tutorials/file/dndfiles/)应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T22:39:45.673

假设 HTML、XML 和浏览器都在同一台机器上，您可以尝试在 HTML 中使用 iframe，该 iframe 使用诸如 file:\ 之类的 URL 引用 XML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T00:05:35.247

原始答案在这里：[https ://stackoverflow.com/a/48633464/8612509](https://stackoverflow.com/a/48633464/8612509)

所以，我可能会迟到一点，但这是为了帮助那些一直在寻找解决方案的人。

首先，如果您不在服务器上运行 HTML 文件，则需要在浏览器中允许 CORS。其次，我发现大多数人在这类线程中引用的代码片段不适用于加载本地 XML 文件。试试这个（取自官方文档的例子）：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', 'file.xml', true);

xhr.timeout = 2000; // time in milliseconds

xhr.onload = function () {
  // Request finished. Do processing here.
  var xmlDoc = this.responseXML; // <- Here's your XML file
};

xhr.ontimeout = function (e) {
  // XMLHttpRequest timed out. Do something here.
};

xhr.send(null); 
```

如果您指的是本地文件，则 xhr.open 中的方法（第 1 个参数）将被忽略，并且默认情况下 async（第 3 个参数）为 true，因此您实际上只需要指向您的文件然后解析结果！=)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T22:53:28.733

你可以这样做：

```
<html>
<head>
<script type="text/javascript">
//If using jQuery, select the tag using something like this to manipulate  
//the look of the xml tags and stuff.
$('#xframe').attr('style', 'thisxmltag.....');
</script>
</head>
<body>
...
<frame id="xframe" src="the_xml_doc"></src>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-22T08:14:24.713

```
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp = new XMLHttpRequest();
}
else {// code for IE6, IE5
xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET", file_Location, false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;
document.getElementById(your_div_id).value =        
xmlDoc.getElementsByTagName(The_tag_in_xml_you_want_to_display) 
[0].childNodes[0].nodeValue; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-22T12:46:33.367

适用于 IE11

```
<head>
    // To be hidden with a better method than using width and height
    <OBJECT id="data1" data="data.xml" width="1px" height="1px"></OBJECT>

    // to work offline
    <script src="lib/jquery-2.2.3.min.js"></script>
</head>

<body>
    <script>
    var TheDocument = document.getElementById("data1").contentDocument;
    var Customers = TheDocument.getElementsByTagName("myListofCustomers");
    var val1 = Customers[0].getElementsByTagName("Name")[0].childNodes[0].nodeValue; 
```

# ios - 在 iPhone 中实现 RSA 算法

> ID：14106506
> 
> 赞同：1
> 
> 时间：2012-12-31T22:22:09.907
> 
> 标签：ios, cocoa-touch, security, rsa, iphone-security

我有一个场景，我需要在 iPhone 和 Web 中实现数字签名场景。简单来说，我会先在 iPhone 端生成 RSA 签名并与服务器共享公钥。服务器公钥也将使用从服务器生成的 x509 证书存在。我可以将其复制到 iPhone 文件夹结构中。这样做的想法是将其用作数字签名，服务器将通过服务器私钥和 iPhone 公钥加密来发送消息。从 iPhone 端，它可以使用 iPphone 私钥解密，并通过使用服务器公钥解密再次验证。

我浏览了 Apple 提供的示例代码，但它们并不容易理解。它也没有满足我的要求。这是我的问题。

1）我的目标可以实现吗？

2）iPhone 和我的服务器后端（Java）能否一起工作，因为许多论坛都说它有问题，因为它有 DER 编码。

3) 许多样本都集中在 iPhone 钥匙串中安装自己的证书。我也可以安装服务器 x509 吗？

4) 任何关注我的要求或任何指导的链接或材料表示赞赏。

# javascript - 如何使用 jQuery 对动态生成的 SELECT 元素中的数据进行排序？

> ID：14106507
> 
> 赞同：2
> 
> 时间：2012-12-31T22:22:11.927
> 
> 标签：javascript, jquery

我正在使用 JQuery 填充 SELECT 元素以减少输出标记的大小。

一切都按照我想要的方式进行，除了一件事；排序。

看起来当我到达`.each`下面的代码时，JQuery 正在按`val`值而不是`text`值排序。我希望列表按`text`值排序，或者更理想的是，按照我在变量中生成列表的顺序`dyn_list_product`。

我怎样才能做到这一点？

非常感谢。

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Sample Code</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type = "text/javascript" >
      $(document).ready(function(){
      var dyn_list_product = { 10075:'abc', 10635:'def', 10246:'ghi', 10245:'jkl', 10076:'mno', 10642:'pqr', 10995:'stu', 10255:'vwx', 10230:'yz' };
      $('.jquery_list_product').append( $('<option></option>').val('').html('----------') );
      $.each( dyn_list_product , function(val, text) { $('.jquery_list_product').append( $('<option></option>').val(val).html(text) ); });
      })
    </script>
  </head>

  <body>
    <select name="insert-1[]" class="jquery_list_product"></select>
    <select name="insert-2[]" class="jquery_list_product"></select>
    <select name="insert-3[]" class="jquery_list_product"></select>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:25:13.130

jQuery 代码没有对任何东西进行排序。JavaScript 中未定义对象键的迭代顺序。也就是说，您以某种顺序定义属性这一事实并不意味着`.each()`函数将它们传递给您的处理程序的顺序。

改用数组：

```
var dyn_list_product = [ { key: '10075', val: 'abc'}, { key: '10635', val: :'def'}, ... ]; 
```

您的`.each()`循环将如下所示：

```
$.each( dyn_list_product , function(index, obj) {
    $('.jquery_list_product').append( $('<option></option>').val(obj.key).html(obj.val) ); });
}) 
```

# ruby-on-rails - 在 Heroku 上设置 Firefly（ruby 链接缩短器）2.0？

> ID：14106508
> 
> 赞同：0
> 
> 时间：2012-12-31T22:22:19.720
> 
> 标签：ruby-on-rails, heroku, sinatra

我在我的本地机器上有一个工作安装，但无法在 heroku 上做同样的事情。

我所做的唯一更改：

*   将 firefly.yml 中的主机名更改为 rxlcc.herokuapp.com
*   注释掉 Gemfile 中的其他 dbs，只有 pg 未注释

我的回购地址：[https ://github.com/hayksaakian/rxlcc](https://github.com/hayksaakian/rxlcc)

github变更日志：[https ://github.com/hayksaakian/rxlcc/commit/d2e2f926b228372a9ff7861e918bdf193a3c3bca](https://github.com/hayksaakian/rxlcc/commit/d2e2f926b228372a9ff7861e918bdf193a3c3bca)

我猜这是因为没有与生产数据库的连接，但我不确定我会在哪里添加它们

```
2012-12-31T05:36:20+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 36424`
2012-12-31T05:36:26+00:00 app[web.1]: /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 27, col 0: `adapter = uri.scheme' (ArgumentError)
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/config.ru:2:in `block in <main>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/lib/firefly/database.rb:8:in `config'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/lib/firefly/database.rb:13:in `<top (required)>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/lib/firefly/database.rb:4:in `connect!'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:137:in `start'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/bin/rackup:4:in `<top (required)>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `<main>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/lib/firefly.rb:30:in `<top (required)>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/config.ru:2:in `require'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `load'
2012-12-31T05:36:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-12-31T05:36:28+00:00 heroku[web.1]: Process exited with status 1
2012-12-31T05:36:28+00:00 heroku[web.1]: State changed from starting to crashed
2012-12-31T05:41:04+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=rxlcc.herokuapp.com fwd=71.212.33.130 dyno= queue= wait= connect= service= status=503 bytes=
2012-12-31T05:41:05+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=rxlcc.herokuapp.com fwd=71.212.33.130 dyno= queue= wait= connect= service= status=503 bytes= 
```

我的heroku插件：

```
heroku-postgresql:dev  HEROKU_POSTGRESQL_NAVY 
```

* * *

更新：

我尝试在 lib/firefly/server.rb 中添加一行

```
 # suggested by iain on stackoverflow
  @config[:database_url] = ENV["DATABASE_URL"] 
```

这似乎并没有改变任何东西

[https://github.com/hayksaakian/rxlcc/commit/638bb8b215cf09f7edbafc0f21e964dfc05f86f2](https://github.com/hayksaakian/rxlcc/commit/638bb8b215cf09f7edbafc0f21e964dfc05f86f2)

```
 2013-01-02T06:32:19+00:00 heroku[web.1]: State changed from crashed to starting
    2013-01-02T06:32:22+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 18667`
    2013-01-02T06:32:25+00:00 app[web.1]: /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 27, col 0: `adapter = uri.scheme' (ArgumentError)
    2013-01-02T06:32:25+00:00 app[web.1]:   from /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/lib/firefly/database.rb:8:in `config'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/lib/firefly/database.rb:4:in `connect!'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/lib/firefly/database.rb:13:in `<top (required)>'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/lib/firefly.rb:30:in `<top (required)>'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/config.ru:2:in `require'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/config.ru:2:in `block in <main>'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/config.ru:1:in `new'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:137:in `start'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/bin/rackup:4:in `<top (required)>'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `load'
    2013-01-02T06:32:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `<main>'
    2013-01-02T06:32:26+00:00 heroku[web.1]: Process exited with status 1
    2013-01-02T06:32:27+00:00 heroku[web.1]: State changed from starting to crashed
    2013-01-02T06:37:44+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=rxlcc.herokuapp.com fwd=71.212.33.130 dyno= queue= wait= connect= service= status=503 bytes=
    2013-01-02T06:37:44+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=rxlcc.herokuapp.com fwd=71.212.33.130 dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:13:51.707

是的，您需要`host:`在 yml 文件的 under 中指定数据库 url。您可以在 Heroku 站点的设置页面中查看 url，也可以运行`heroku config --app rxlcc`并查找 DATABASE_URL。

**注意**：如果您要使用 Heroku，说明会告诉您更改 .gitignore 并签入 .yml 文件。如果您要在其中保留密钥，那么我不会这样做，但如果您这样做，**请不要将回购公开！**如果其他人知道秘密，您*需要*重新生成它。

我个人会通过添加任何秘密

```
heroku config:add SECRET_VARIABLE=blahblahblah --app rxlcc 
```

然后将其读入需要通过的应用程序

```
my_secret_variable = ENV["SECRET_VARIABLE"] 
```

我看到该应用程序在[https://github.com/hayksaakian/rxlcc/blob/master/lib/firefly/server.rb#L209和](https://github.com/hayksaakian/rxlcc/blob/master/lib/firefly/server.rb#L209)[https://github.com/hayksaakian/rxlcc](https://github.com/hayksaakian/rxlcc/blob/master/lib/firefly/server.rb#L109)的前块中设置了配置[/blob/master/lib/firefly/server.rb#L109](https://github.com/hayksaakian/rxlcc/blob/master/lib/firefly/server.rb#L109)。在任何一点上，您都可以尝试：

```
@config[:database_url] = ENV["DATABASE_URL"] 
```

添加任何秘密变量。

# cmake - 包和库管理和安装，以及与 cmake 的接口

> ID：14106510
> 
> 赞同：1
> 
> 时间：2012-12-31T22:23:17.490
> 
> 标签：cmake, installation, package, shared-libraries, lammps

我有一个具体问题，可以作为更一般问题的背景。

有一个名为 LAMMPS 的科学包，它通常用作可执行文件。但是，它支持用作“库”。为了尝试做正确的事情，我把它放在 /usr/local/lib/lammps 中。它包含一个 lammps/src/ 目录，其中包含大约 40 个源文件。使用提供的说明，我将 lammps 编译为 lammps/src/liblammps_serial.so 中的 .so 文件。

我在“~/code/ljtube/”中也有单独的代码。这使用 cmake 来尝试查找库。因此，我写了一个 FindLAMMPS.txt 以便我可以使用

```
FIND_PACKAGE (lammps) 
```

在我的 CMakeLists 中。我修改了 libtool 配置文件以在 /usr/local/ 中搜索成功。我发现它在 /usr/local/lib/ 中搜索 .so 文件，在 /usr/local/include/ 中搜索 .h 文件。所以我在/usr/local/lib/ 中创建了一个.so 文件的动态链接，并将.h 文件从lammps/src/ 复制到/usr/local/include/。

CMake 现在可以找到这两个文件，但它无法链接到 lammps/src/ 中的任何其他文件。需要为我想要包含的每个 .h （group.h、fix.h、force.h、pair.h 等）创建一个单独的 FIND_PACKAGE 似乎很荒谬。将整个 .h 文件包转储到 /usr/local/include/ 目录中似乎也很荒谬。我将在本地和集群上使用此代码，并可能将其分发给其他组成员。

如何让 CMake 在 /usr/local/lib/lammps/src/ 的位置没有硬编码的情况下找到我想要找到的内容？更笼统地说，我应该如何管理像这样的大包，以使它们在我编写的代码中易于链接，即使原始开发人员没有使用最佳约定？

（作为旁注，我使用共享库是因为它似乎是正确的选择，但我并不是特别喜欢它。我应该使用静态库吗？CMake 有没有办法找到已经编译的相对于当前源目录的库，这可能是实现这一点的更好方法吗？我知道我将在多个项目中使用 LAMMPS，因此从表面上看，拥有一个本地共享副本似乎是最有意义的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:32:15.010

通常，`find_package`调用会产生一个变量，该变量指定包的“包含”文件夹的路径。然后，这将通过 . 添加到调用者的 CMakeLists.txt 中`include_directories`。

例如，要使用`find_package`boost，你可以这样做：

```
find_package(Boost)  # sets ${Boost_INCLUDE_DIRS} and ${Boost_LIBRARIES}
if(Boost_FOUND)
  include_directories(${Boost_INCLUDE_DIRS})
  add_executable(foo foo.cc)
  target_link_libraries(foo ${Boost_LIBRARIES})
endif() 
```

关于您的旁注，您可以使用[`find_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library)和/或[`find_path`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_path)查找给定位置的库及其标题。

可以通过避免在公共位置搜索的方式调用这两个命令，例如通过设置`PATHS`为已知位置并`NO_DEFAULT_PATH`在查找命令中使用。

另一种选择是让您的项目使用[本文](http://www.kitware.com/media/html/BuildingExternalProjectsWithCMake2.8.html)[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aExternalProject)中更详细描述的功能。从这篇文章：

> 该`ExternalProject_Add`功能可以说“从互联网上下载这个项目，运行它的配置步骤，构建它并安装它”</p>

这种方法的一个缺点是您的每个项目最终都会有自己的第三方源代码和库的副本。

# c++ - c 对象成员在调用更改它的成员函数时未被更改

> ID：14106512
> 
> 赞同：2
> 
> 时间：2012-12-31T22:24:07.137
> 
> 标签：c++, class, function, object, member

我正在创建一个可以处理扑克牌的简单程序。我已经开始创建手牌，但遇到了一个问题：发牌时，牌并没有从牌堆中移除。套牌是包含花色、价值和颜色的卡片对象的向量。

这只是我为它编写的简短测试程序：

```
Deck testDeck; //default deck is in order
cout << testDeck << endl; //print the deck out

Hand testHand(5, testDeck); //generate a hand of 5 cards from testDeck
cout << testHand << endl; //print the hand
cout << testDeck << endl; //print the deck 
```

初始化的卡组

```
2H 3H 4H 5H 6H 7H 8H 9H 10H JH QH KH AH 2D 3D 4D 5D 6D 7D 8D 9D 10D JD QD KD AD
2C 3C 4C 5C 6C 7C 8C 9C 10C JC QC KC AC 2S 3S 4S 5S 6S 7S 8S 9S 10S JS QS KS AS 
```

从牌组中获得 5 张牌样本

```
2H 3H 4H 5H 6H 
```

套牌应该缺少 5 张牌，但它只是归还初始套牌，就好像什么都没发生一样。

```
2H 3H 4H 5H 6H 7H 8H 9H 10H JH QH KH AH 2D 3D 4D 5D 6D 7D 8D 9D 10D JD QD KD AD
2C 3C 4C 5C 6C 7C 8C 9C 10C JC QC KC AC 2S 3S 4S 5S 6S 7S 8S 9S 10S JS QS KS AS 
```

这是我的构造函数：

```
Hand::Hand(int numCards, Deck myDeck)
{
    myHand = myDeck.takeTopXCards(numCards);
} 
```

这是 takeTopXCards 函数：

```
vector<Card> Deck::takeTopXCards(int numCards)
{
    vector<Card> retCards;

    for(int i = 0; i < numCards; i++)
        retCards.push_back(takeTopCard());

    return retCards;
} 
```

当然还有 TakeTopCard 函数：

```
Card Deck::takeTopCard()
{
    Card ret = myDeck[0];
    myDeck.erase(myDeck.begin());
    return ret;
} 
```

我在使用擦除之前和之后通过打印 myDeck[0]（myDeck 是 Deck 类的私有数据成员）检查了 takeTopCard 函数，它工作正常。出于某种原因，一旦 takeTopXCards 返回，传递给它的 Deck 对象（测试程序中的 testDeck）就不会改变。

如果您还想看其他内容，请询问，我会在此处将其添加到末尾。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:28:47.750

改变这个：

```
Hand::Hand(int numCards, Deck myDeck) 
```

对此：

```
Hand::Hand(int numCards, Deck& myDeck) 
```

为什么：

你是在传递套牌的价值，在处理这手牌时会复制它。副本是减少的。原来的套牌不是。通过引用传递它，原始牌组将被修改。

# php - 附属开源免费脚本

> ID：14106515
> 
> 赞同：0
> 
> 时间：2012-12-31T22:25:23.947
> 
> 标签：php, mysql, counter, affiliate

我正在开发一个允许用户下载文件的网站。我正在寻找一个脚本，它可以让我通过标识符 download.php?id=555 识别将访问者发送到我的网站的推荐人。我想确定每个合作伙伴的下载量。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:38:03.613

只需在网站的每个页面中都包含一个 php 脚本文件。该脚本将查找 url 参数，假设为 $_GET['referalId'] 的referalId，如果找到并且它具有有效值，则必须在数据库中执行一些操作。

```
if (isset($_GET['referalId'] && isValid($_GET['referalId')){
  //doSomeThing In The DB.
} 
```

**注意**isValid 应该是自定义函数来验证 $_GET[referalId'] 值的值，以防止[sql-injection](/questions/tagged/sql-injection "显示标记为“sql-injection”的问题")和其他不合适的值

# networking - 使用我的家庭设备模拟网络视频传输

> ID：14106519
> 
> 赞同：1
> 
> 时间：2012-12-31T22:27:02.277
> 
> 标签：networking

在我的论文中，我需要为普通 WLAN 中的视频传输创建一个模拟，以检测质​​量降低了多少，具体取决于设备数量或原始传输的质量。

当有人建议我使用我的家用设备（我有许多电脑、平板电脑、电子阅读器、视频游戏机等）时，我正在使用 NS-3。

在我看来这是一个好主意，因为我有足够快的 WiFi 我可以使用我的 Mac 作为热点并通过它连接所有设备，然后使用wireshark 嗅探数据包并使用“网络链接调节器”限制传输速度我的问题是，使用网络链接调节器限制传输速度会影响使用我的计算机作为热点的设备吗？还是它只影响我的个人电脑，我需要找到另一种限制速度的方法来成功模拟我需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:36:06.693

我不是 100% 确定你在追求什么，但看到你提到*在你的 Mac 上限制带宽*，这可能正在使用中：

基本上，您需要一台可以运行 FreeBSD 的 PC 和两个网络接口（例如，一个内置的 NIC 和另一个卡）。然后你设置盒子来桥接这两张卡。

查看本教程以了解[网络带宽延迟和延迟模拟教程](http://www.technogumbo.com/tutorials/Network-Bandwidth-Latency-and-Delay-Simulation-Tutorial/Network-Bandwidth-Latency-and-Delay-Simulation-Tutorial.php)

设置完成后，您可以使用 FreeBSD 中的 ipfw 命令控制该网桥的参数，从而允许您更改比特率、延迟和模拟数据包丢失。

将这个盒子放在您的视频源（互联网？）之间，并在另一侧使用 wifi 路由器连接您的设备，您将能够模拟各种条件。

[注意：挖掘这个链接的功劳需要我的一个同事，但是一旦他设置了它，我就在一个项目中使用了它，它非常强大]

# objective-c - Objective C 中的自定义 NSFormatter

> ID：14106521
> 
> 赞同：0
> 
> 时间：2012-12-31T22:27:40.500
> 
> 标签：objective-c

我正在尝试通过继承 NSNumberFormatter 在Objective C 中编写我自己的自定义格式化程序。具体来说，我想做的是让一个数字在高于或低于某些值时变为红色。苹果[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/CreatingACustomFormatter.html#//apple_ref/doc/uid/20000196-CJBFABHB)说

*例如，如果您希望负财务金额以红色显示，您可以让此方法返回一个带有红色文本属性的字符串。在 attributesStringForObjectValue:withDefaultAttributes: 通过调用 stringForObjectValue: 获取非属性字符串，然后将适当的属性应用于该字符串。*

基于这个建议，我实现了以下代码

```
- (NSAttributedString*) attributedStringForObjectValue: (id)anObject withDefaultAttributes: (NSDictionary*)attr;
{
    NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:[self stringForObjectValue:anObject]];

    if ([[attrString string] floatValue] < -20.0f) {
        [attrString addAttribute:@"NSForegroundColorAttributeName" value:[NSColor redColor] range:NSMakeRange(0, 10)];
        return attrString;
    } else return attrString;
} 
```

但是当我测试这一切时，它所做的就是冻结我的应用程序。任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:41:03.363

我相信这与您`NSRange`创建的内容有关。我相信您的长度（在您的示例中为 10）超出了界限。尝试获取用于初始化`NSMutableAttributedString`.

例如：

```
- (NSAttributedString*) attributedStringForObjectValue: (id)anObject withDefaultAttributes: (NSDictionary*)attr;
{
    NSString *string = [self stringForObjectValue:anObject];
    NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:string];
    NSInteger stringLength = [string length];

    if ([[attrString string] floatValue] < -20.0f)
    {
        [attrString addAttribute:@"NSForegroundColorAttributeName" value:[NSColor redColor] range:NSMakeRange(0, stringLength)];
    }

    return attrString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T14:26:27.417

这是我最终能够实现这一点的方式。为了在数字为负数时更明显，我决定将文本的背景设置为红色和白色文本。以下代码在 NSTextField 单元格中工作。我不确定为什么我的问题（和答案）中的代码不起作用， addAttribute 应该起作用。

```
- (NSAttributedString *)attributedStringForObjectValue:(id)anObject withDefaultAttributes:  (NSDictionary *)attributes{

    NSString *string = [self stringForObjectValue:anObject];
    NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:string];
    NSInteger stringLength = [string length];

    if ([[attrString string] floatValue] < 0)
    {
         NSDictionary *firstAttributes = @{NSForegroundColorAttributeName: [NSColor whiteColor],
                                      NSBackgroundColorAttributeName: [NSColor blueColor]};
    [attrString setAttributes:firstAttributes range:NSMakeRange(0, stringLength)];
}

return attrString;
} 
```

# javascript - 我可以更改背景图像，但如何打印链接？

> ID：14106523
> 
> 赞同：2
> 
> 时间：2012-12-31T22:28:24.643
> 
> 标签：javascript, background-image

我正在使用 JavaScript 在刷新时随机更改背景图像。然后我一直想做的是获取当前的`background-image`网址并将其粘贴到其中的某个 div 中

```
<a href=""></a> 
```

以便人们可以下载图像。

背景图像脚本有效，如下所示：

```
var totalCount = 3;
function ChangeIt() 
{
    var num = Math.ceil( Math.random() * totalCount );
    document.body.background = 'bgimages/'+num+'.jpg';
    document.body.style.backgroundRepeat = "repeat";// Background repeat
} 
```

对不起，如果这很容易，但我无法弄清楚如何去做！谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:36:12.360

假设您在文档中的某处有此链接，并且您希望它指向当前背景图像：

```
<a href='#' id='bgDownload'>Download background image</a> 
```

以下函数现在将链接的“href”属性更改为当前背景和背景本身：

```
var totalCount = 3;
function ChangeIt() 
{
    var num = Math.ceil( Math.random() * totalCount );
    document.body.background = 'bgimages/'+num+'.jpg';
    document.body.style.backgroundRepeat = "repeat";// Background repeat

    // change link
    document.getElementById("bgDownload").href = 'bgimages/'+num+'.jpg';
} 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:33:45.807

在 HTML 中的页面上放置一个`DIV`，并使用...切换内容

```
document.getElementById("[ID of DIV]").innerHTML = '<a href="' + [link_var] + '">' + [text_var] + '</a>'; 
```

像这样的东西...

```
document.getElementById("[ID of DIV]").innerHTML = '<a href="bgimages/' + num + '.jpg">Image #' + num + '</a>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T22:36:46.153

试试这个

```
<a href='javascript:window.location.href=document.body.background'>
   Download Background
</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T22:40:02.247

试试这个 ：     

```
function downloadImage{ 
    window.open(document.body.background,'_blank'); 
   } 
```

# java - 获取池化 JDBC 数据源的通用方法？

> ID：14106524
> 
> 赞同：2
> 
> 时间：2012-12-31T22:28:33.230
> 
> 标签：java, jdbc, datasource, connection-pooling

我正在尝试在我的应用程序中获取一个池化的 JDBC 数据源。我正在编写一个开源库，并且希望尽可能地使配置成为可配置的。我宁愿不使用 JNDI 或强制使用任何特定类型的配置文件。

现在，我这样做：

```
MysqlConnectionPoolDataSource ds = new MysqlConnectionPoolDataSource();
ds.setDatabaseName("blah");
ds.setUrl("jdbc:mysql://blaggablah");
ds.setUser("jimbob");
ds.setPassword("dweezil"); 
```

如果您将来想使用 MySQL 以外的东西，显然不理想。

是否有某种通用的 PooledDataSourceFactory 将采用一些参数，如数据库类型和连接信息，并给我一个池化数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:32:33.610

我不确定您正在创建什么样的应用程序（库？），但除非它是一个网络应用程序。堆栈或其他东西，您可以要求客户端程序员传入数据源，例如通过构造函数。这确实是依赖注入的要点。

如果你应用。*是*例如一个网络应用程序。像 Django 一样的堆栈，您仍然可以这样做，以便在内部将数据源传递给中间件（又名 DI）。这样的设计促进了模块化，并使得在其他项目中使用这部分代码变得容易。但是，您必须以某种方式从配置转到 DataSource，因此在某些时候您需要确定其机制是什么（例如 JNDI）。我认为这是完全可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:22:11.860

您可以使用标准池/缓存库并让用户对其进行配置。像 Apache Jakarta Pool 还是 ehcache？

# ruby-on-rails - 如何在 Rails 中创建自定义路线？通过自定义，我的意思是对参数做出反应的人

> ID：14106527
> 
> 赞同：0
> 
> 时间：2012-12-31T22:29:09.950
> 
> 标签：ruby-on-rails, ruby, url-routing

所以基本上我已经设置了一个匹配“products/:product”的路由，它似乎响应了像baseurl/products/toaster这样的页面并显示了烤面包机产品。我的问题是我似乎无法使用 link_to 来生成这条路径，我的意思是我不知道如何。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:44:53.060

对此有几种解决方案：

```
<%= link_to 'Toaster', { :controller => 'products', :action => 'whatever', :product => 'toaster' } %> 
```

但这并不是真正的 Rails 方式，因为您需要`:as => :product`在路线的末尾添加。这将创建`product_path`可以以这种方式使用的助手：

```
<%= link_to 'Toaster', product_path(:product => 'toaster') %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T22:43:08.453

在您的路线文件中，您可以执行以下操作：

```
match "products/:product" => "products#show", :as => :product 
```

控制器在哪里，`ProductsController`视图在哪里`show`

在您拥有的 Products 控制器中

```
 def show
    @product = Hub.find_by_name(params[:product])

    respond_to do |format|
      format.html # show.html.erb
    end
  end 
```

products/ **:product**部分中的任何内容都可以通过参数获得。

然后，由于我们`:as`在您的路线中使用过，您可以这样做`link_to`：

```
<%= link_to product(@product) %> 
```

`@product`产品或字符串的实例在哪里。这只是一个例子，参数可以是你想要的任何东西，控制器/动作也是如此。有关更多信息，您应该查看[此内容。](http://guides.rubyonrails.org/routing.html#non-resourceful-routes)

希望这可以帮助！

# jquery - jQuery 发布到 Django

> ID：14106532
> 
> 赞同：1
> 
> 时间：2012-12-31T22:30:06.813
> 
> 标签：jquery, django

所以这可能是一个愚蠢的问题，但我已经研究了大约 4 个小时。我在 Python 中自学（这意味着我还过得去，但不是很好），我正在尝试将我的脚本扩展到 Django。但是，我需要一些客户端脚本，所以我尝试使用 jQuery 做一些非常非常基本的 Javascript 东西，因为有很多这样的演示。

但是，没有任何效果。我可以找到这样的教程：[http](http://webcloud.se/log/AJAX-in-Django-with-jQuery/) ://webcloud.se/log/AJAX-in-Django-with-jQuery/ 看起来很有帮助，但它们缺少信息（在这种情况下，Javascript 端给出的所有内容都是没有触发器的函数的代码）。当我尝试将 jQuery 代码嵌入到 Django 模板中时，它不起作用，但我不知道那是因为我在给定的代码周围写的东西有问题还是因为给我的东西是给我带来问题，因为某处的某些设置是错误的。

基本上，我希望看到一个非常简单的示例，即通过单击将数据从 Javascript 发送到 Django（例如，发送当前时间戳），然后 Django 从双方完全发布。（对于此类问题，我查看了许多其他 StackOverflow 答案，所有这些似乎都是更大的示例，我担心我会被一些与基本数据传输问题无关的切线弄糊涂。）我想要查看整个 Django 模板，其中包含所有标签和每个人都跳过的内容、URL 文件和视图文件。然后也许我可以弄清楚发生了什么足以开始用它做点什么。

提前致谢。

**更新** 实际上，问题可能更普遍。当我使用此代码时：

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test</title>
  </head>
  <body>
    <a href="http://jquery.com/">jQuery</a>
    <script type="text/javascript" src="/usr/lib/pymodules/python2.6/django/contrib/admin/media/js/jquery.js"></script>`
<script>
 $(document).ready(function(){
   $("a").click(function(event){
     alert("As you can see, the link no longer took you to jquery.com");
     event.preventDefault();
   });
 });
    </script>
  </body>
</html> 
```

并将其保存为运行良好的 html 文件。当我采用相同的代码并将其设置为 Django 模板时（除了将其放入正确的目录并确保模板加载器设置为加载它之外没有任何更改）它突然不起作用。我已经在 Firefox 和 Chrome 中测试过它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:15:26.573

这就是我喜欢使用 ajax、jquery 和 django 的方式。

视图.py：

```
def ajax(request):
    if request.is_ajax():
    // do whatever 
```

网址.py：

```
url(r'^ajax-url/$', 'views.ajax', name='ajax_url'), 
```

jQuery：

```
$(document).ready( function() {
$('div#ajax-div').click(function(){
  $.ajax({
  type: "POST",
  url:"/ajax-url/",
  success: function(data){alert('Success!');}
  error: function(){ alert("Error");}
});
} 
```

模板.html：

```
<div id='ajax-div'>
      <a href='{% url ajax-url %}'>Click here for ajax</a>
</div> 
```

请注意，{% url %} 标记有时需要在 url 模式的名称周围加上引号，具体取决于您的 django 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:47:04.233

AJAX 调试起来真的很痛苦。

我在此之前发布了一个帖子，其中应该包含获得工作示例所需的部分。

[https://stackoverflow.com/a/12905016/1406860](https://stackoverflow.com/a/12905016/1406860)

# javascript - 如何在 Javascript 幻灯片中链接单个图像？

> ID：14106537
> 
> 赞同：0
> 
> 时间：2012-12-31T22:31:06.507
> 
> 标签：javascript, image, hyperlink, slideshow

所以我对javascript相当陌生。我想为该幻灯片中的每个图像添加一个链接。只有两个图像。我曾尝试像使用`<a>`in html 一样将它们链接起来……但这不起作用，因为它是 Javascript。我可以添加一行简单的代码来将 Javascript 幻灯片中的每个单独图像链接到不同的站点吗？非常感谢。非常感谢任何反馈。

这是我的代码。感谢 dynamicdrive.com 的帮助

```
var mygallery=new fadeSlideShow({
    wrapperid: "fadeshow1", //ID of blank DIV on page to house Slideshow
    dimensions: [1024, 511], //width/height of gallery in pixels. Should reflect dimensions of largest image
    imagearray: [
        ["../Images/slideshow_wakeup.png"],
        ["../Images/slideshow_2.png"]
        <!--["newappvantagemobile.com/images/slideshow_3.png"]-->
         //<--no trailing comma after very last image element!
    ],
    displaymode: {type:'auto', pause:4500, cycles:0, wraparound:false},
    persist: false, //remember last viewed slide and recall within same session?
    fadeduration: 900, //transition duration (milliseconds)
    descreveal: "ondemand",
    togglerid: ""
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:59:53.430

从数组的[原始文档：](http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm)`imagearray`

```
["path_to_image", "optional_url", "optional_linktarget", "optional_description"] 
```

因此，您需要将`imagearray`数组更改为：

```
imagearray: [
         ["../Images/slideshow_wakeup.png"], "../Images/slideshow_wakeup.png", "_new", "Some text to describe the image."],
        ["../Images/slideshow_2.png", "../Images/slideshow_2.png", "_new", "Some text to describe the image."],
        <!--["newappvantagemobile.com/images/slideshow_3.png"]-->
         //<--no trailing comma after very last image element!
    ], 
```

我会解释的。该数组有 4 个元素。

1.  第一个是图像的地址（如您所知）。
2.  第二个是单击图像时将打开的链接。
3.  第三个指定如何打开链接。`_new`表示在新窗口/标签上
4.  最后一个参数是将显示在图像底部的文本。

希望这可以帮助。

# c# - 装箱和拆箱：为什么这个代表不匹配？

> ID：14106540
> 
> 赞同：2
> 
> 时间：2012-12-31T22:32:01.997
> 
> 标签：c#, boxing, anonymous-methods, unboxing

假设以下委托“调用者”签名：

```
FuncCaller<T>(Func<T, bool> predicate) 
```

和匹配方法：

```
bool MyFunc(object o) 
```

当`T`是引用类型时，我可以像这样`MyFunc` *隐式*调用：

```
FuncCaller<String>(MyFunc) // valid 
```

相反，当`T`是值类型时，在隐式调用 MyFunc 时出现编译错误：

```
FuncCaller<Int32>(MyFunc) // invalid ("No overload for 'MyFunc(object)' matches delegate 'System.Func<int?,bool>'") 
```

我的问题是，鉴于这两个示例，为什么`MyFunc`在隐式调用时调用无效，但在*显式*调用时有效，如下所示：

```
FuncCaller<Int32>(i => MyFunc(i)) // valid 
```

我认为这是与类型的装箱和拆箱有关的某种问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T22:40:01.757

是的，就是这样。

```
FuncCaller<Int32>(i => MyFunc(i)) // valid 
```

创建一个匿名函数，其参数类型为`Int32`，返回值为，除了将参数转换为，并调用`bool`之外，什么都不做。就好像你写的`object``MyFunc`

```
FuncCaller<Int32>(MyFunc2) 
```

其中`MyFunc2`定义为

```
bool MyFunc2(Int32 o) { return MyFunc(o); } 
```

转换参数是无操作的，因此当类型是引用类型时是不必要的，这就是为什么具有参数类型的函数对于具有参数类型的`object`委托足够接近`string`：参数类型*已经*是`object`.

转换参数是一个真正的操作，当类型是值类型时是无法绕过的。

值得指出的是

```
FuncCaller<Int32>(MyFunc) 
```

从来都不是简写

```
FuncCaller<Int32>(i => MyFunc(i)) 
```

即使它的行为方式几乎相同。前者直接传递`MyFunc`函数，后者围绕它创建一个包装函数。该包装器功能在这里是必要的。

# time - 解析不是“标准”格式的日期/时间字符串

> ID：14106541
> 
> 赞同：74
> 
> 时间：2012-12-31T22:32:19.500
> 
> 标签：time, go

如何解析 Go 中的非标准日期/时间字符串。例如，如果我想将字符串`10/15/1983`转换为`time.Time`? 据说该`time.Parse()`功能允许您指定格式。

[http://play.golang.org/p/v5DbowXt1x](http://play.golang.org/p/v5DbowXt1x)

```
package main

import "fmt"
import "time"

func main() {
    test, err := time.Parse("10/15/1983", "10/15/1983")
    if err != nil {
        panic(err)
    }

    fmt.Println(test)
} 
```

这会导致恐慌。

`panic: parsing time "10/15/1983" as "10/15/1983": cannot parse "" as "0/"`

从逻辑上讲，这是有道理的，因为它应该如何知道哪一天是哪一个月。

其他语言具有类似于以下的功能：

`parse("mm/dd/yyyy", "10/15/1983")`

我在 Go 文档中找不到这样的函数，我唯一的选择是正则表达式吗？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-12-31T22:36:43.497

time.Parse 正在寻找一些关键值。

通过改变：

```
test, err := time.Parse("10/15/1983", "10/15/1983") 
```

到

```
test, err := time.Parse("01/02/2006", "10/15/1983") 
```

解析器会识别它。

这是[操场上修改后的代码](http://play.golang.org/p/tPr45KHNbF)。

```
package main

import "fmt"
import "time"

func main() {
    test, err := time.Parse("01/02/2006", "10/15/1983")
    if err != nil {
        panic(err)
    }

    fmt.Println(test)
} 
```

您可以利用[src/pkg/time/format.go](http://golang.org/src/pkg/time/format.go)文件中的常量列表来创建自己的解析格式。

```
const (
    stdLongMonth      = "January"
    stdMonth          = "Jan"
    stdNumMonth       = "1"
    stdZeroMonth      = "01"
    stdLongWeekDay    = "Monday"
    stdWeekDay        = "Mon"
    stdDay            = "2"
    stdUnderDay       = "_2"
    stdZeroDay        = "02"
    stdHour           = "15"
    stdHour12         = "3"
    stdZeroHour12     = "03"
    stdMinute         = "4"
    stdZeroMinute     = "04"
    stdSecond         = "5"
    stdZeroSecond     = "05"
    stdLongYear       = "2006"
    stdYear           = "06"
    stdPM             = "PM"
    stdpm             = "pm"
    stdTZ             = "MST"
    stdISO8601TZ      = "Z0700"  // prints Z for UTC
    stdISO8601ColonTZ = "Z07:00" // prints Z for UTC
    stdNumTZ          = "-0700"  // always numeric
    stdNumShortTZ     = "-07"    // always numeric
    stdNumColonTZ     = "-07:00" // always numeric
) 
```

因此，只要您的格式指定年份，就应该使用“06”或“2006”，秒由“05”或“5”指定，时区指定为“MST”、“Z0700”、“Z07:00” ”、“-0700”、“-07”或“-07:00”。如果您引用常量列表，您可能会将需要解析的任何标准格式放在一起。

例如，如果您想解析[通用日志格式](http://en.wikipedia.org/wiki/Common_Log_Format)（Apache 用于其日志文件的格式）中的日期/时间，您可以通过将以下字符串`time.Parse()`作为*布局*参数传递给来实现。

```
"02/Jan/2006:15:04:05 -0700" 
```

“02”表示月份字段，“Jan”表示月份名称字段，“2006”表示年份字段，“15”表示 24 小时格式的小时字段，“04”表示分钟字段， “05”表示秒字段，“-0700”表示时区字段。

该格式将解析当前 PST 时间：`31/Dec/2012:15:32:25 -0800`

所以`time.Parse()`调用看起来像这样：

```
test, err := time.Parse("02/Jan/2006:15:04:05 -0700", "31/Dec/2012:15:32:25 -0800") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-02T08:25:46.253

如果您不记得指定布局中的数字（“2006-01-02T15:04:05.000Z”），您可以使用我的简单日期格式库[github.com/metakeule/fmtdate](https://github.com/metakeule/fmtdate)，它使用 MS Excel 约定，如 Y ,M,D,h 并在内部将它们转换为数字格式：

```
package main

import (
    "github.com/metakeule/fmtdate"

    "fmt"
)

func main() {
    test, err := fmtdate.Parse("MM/DD/YYYY", "10/15/1983")
    if err != nil {
        panic(err)
    }

    fmt.Println(test)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-13T10:10:25.313

如果您正在寻找 C 风格的格式化函数：在查看了一些选项后，我选择了[https://github.com/cactus/gostrftime](https://github.com/cactus/gostrftime)，因为它通常遵循 strfmt(3) 表示法。

引用这个例子：

```
import (
    "fmt"
    "time"
    "github.com/cactus/gostrftime"
)

func main() {
    now := time.Now()
    fmt.Println(gostrftime.Format("%Y-%m-%d", now))
} 
```

如果 C 和 Go 都必须使用日期格式并且不触及 C 实现，则别无选择，只能在 Go 端进行调整。上面的包满足了这个需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-27T03:06:13.727

如果您不想费心记住幻数，可以这样做：

```
package main

import (
   "fmt"
   "time"
)

func main() {
   var (
      y, d int
      m time.Month
   )
   fmt.Sscanf("10/15/1983", "%v/%v/%v", &m, &d, &y)
   t := time.Date(y, m, d, 0, 0, 0, 0, time.UTC)
   fmt.Println(t) // 1983-10-15 00:00:00 +0000 UTC
} 
```

[https://golang.org/pkg/fmt#Sscanf](https://golang.org/pkg/fmt#Sscanf)

# html - TeeChart 可以在光标处绘制数值标签吗？

> ID：14106542
> 
> 赞同：0
> 
> 时间：2012-12-31T22:32:26.990
> 
> 标签：html, teechart

我正在寻找可以像这样在光标点显示值的 HTML5 图表

[http://www.tradeviewforex.com/forex-blog/tip-14-how-to-use-the-crosshair-on-metatrader-4](http://www.tradeviewforex.com/forex-blog/tip-14-how-to-use-the-crosshair-on-metatrader-4)

我发现 StockChartX 可以做到这一点 [http://developer.modulusfe.com/stockchartx_html5/](http://developer.modulusfe.com/stockchartx_html5/)

（点击绘图 -> 注释）

但我可以努力这个价格：P

感谢您的回答！

附言。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:28:15.130

可以使用 TeeChart HTML5 中的注释工具完成类似的操作。[请参阅此处](http://www.steema.com/files/public/teechart/html5/v2012.12.14.1.4/demos/extra/annotations.htm)的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T17:02:21.920

Also, you can format a tool tip, if that is the need.

```
tip = new Tee.ToolTip(Chart1);
Chart1.tools.add(tip);

tip.format.font.style = "11px Verdana";
tip.render = "canvas";
tip.onshow = function (tool, series, index) {
    scaling = 2;
    poindex = index;
}
tip.onhide = function () {
    scaling = 0;
    poindex = -1;
}
tip.ongettext = function (tool, text) {

    var txt = tool.currentSeries.title + ":\n" + "Value: " + text + tool.currentSeries.units + "\n" + jsonDataArray[0].evDataTime[tool.currentIndex] + " (ms)";
    model.MouseOverY(text + tool.currentSeries.units);
    model.MouseOverX(jsonDataArray[0].evDataTime[tool.currentIndex] + " (ms)");
    model.SelectedSeries(tool.currentSeries.title);
    return txt;
} 
```

# php - 如何在 Apache 上显示 PHP 文件？

> ID：14106543
> 
> 赞同：-1
> 
> 时间：2012-12-31T22:32:46.213
> 
> 标签：php, apache

**注意：** *我在 Linux 上使用 apache2 和 PHP 5*

假设我有这个简单的 hello_world.php 文件：

```
<html>
    <head>
        <title>PHP Test</title>
    </head>
    <body>
        <?php echo '<p>Hello World </p>'; ?>
    </body>
</html> 
```

...我想在我的**apache2**服务器上显示它。我该怎么做，我在哪里移动源代码？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:38:24.877

您必须将文件移动到 /var/www 并确保 Apache 已启动。

在终端中运行以下命令：sudo /etc/init.d/apache start

启动浏览器（例如：Chrome）并在 url 地址栏中输入“localhost/hello_world.php”。

# jsf - 模板化 JSF 2.0 Primefaces

> ID：14106551
> 
> 赞同：0
> 
> 时间：2012-12-31T22:33:44.997
> 
> 标签：jsf, jboss, primefaces

所以我有：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"               
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<h:body>
    <ui:composition template="template.xhtml">
        <ui:define name="content">
            <h:outputText value="Test!!!" />
        </ui:define>
    </ui:composition>
</h:body>
</html> 
```

作为我网站和 template.xhtml 上的主页：

```
<div id="content">
     <h:panelGroup layout="block" styleClass="centercss">  
    <ui:insert name="content" />
 </h:panelGroup>
</div> 
```

...在页脚和页眉视图的中间。

现在，如果我尝试将 template="template.xhtml" 更改为 template.jsf 它不会出现在任何地方......现在我的“内容”页面完美地位于日食的页眉和页脚中间预览，但在浏览器上根本没有内容。

我使用 primefaces3.1.1，我有 javax.faces-2.1.14 + jsf-api 和 jsf-impl，所以我认为它的 primefaces 3 和 JSF 2。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T21:13:38.860

我认为您以错误的方式使用 facelets（模板）。您的主页上不应该有 html 和 body 标签。将使用模板的页面必须在`<ui:composition>`标签中定义，并且模板应将页面定义为一个整体（html、body、head 标签等）。

例子：

索引.html

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
    template="template.xhtml">
    <ui:define name="content">
        <h:outputText value="Test!!!" />
    </ui:define>
</ui:composition> 
```

模板.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"               
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <div id="content">
        <h:panelGroup layout="block" style="background-color: red;">
            <ui:insert name="content" />
        </h:panelGroup>
    </div>
</h:body>
</html> 
```

# javascript - 如何为angularjs编写自定义'row'和'col'元素

> ID：14106554
> 
> 赞同：3
> 
> 时间：2012-12-31T22:34:38.040
> 
> 标签：javascript, angularjs

我正在尝试围绕此处概述的网格元素编写一些 dsl：http: [//foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)

基本上我想做的是

```
<row>
  <column two mobile-one>{{myText}}</col>
  <column four centered mobile-three><input type="text" ng-model="myText"></input></col>
</row> 
```

转变成：

```
<div class="row">
  <div class="columns two mobile-one">{{myText}}</div>
  <div class= "columns four centered mobile-three"><input type="text" ng-model="myText"></input></div>
</div> 
```

理想情况下，我希望写一些可以任意嵌套的东西：row -> col -> row -> col -> row.....

我无法正确迈出第一步 - 嵌套元素，因为我不太清楚如何在不严重影响编译过程的情况下将子元素放入另一个模板。

```
  var app = angular.module('lapis', []);

  app.directive('row', function(){
    返回 {
      限制：'E'，
      编译：函数（tElement，attrs）{
        var 内容 = tElement.children();
        tElement.replaceWith(
          $('', {class: 'row',}).append(content));
      }
    }
  });

```

只是什么都不做。失败的尝试显示在这里 - [http://jsfiddle.net/ZVuRQ/](http://jsfiddle.net/ZVuRQ/)

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T00:24:26.280

> 我希望不要使用 ng-transclude，因为我发现它增加了一个额外的范围。

这是一个不使用 ng-transclude 的指令：

```
app.directive('row', function() {
    return {
        restrict: 'E',
        compile: function(tElement, attrs) {
            var content = angular.element('<div class="row"></div>')
            content.append(tElement.children());
            tElement.replaceWith(content);
        }
    }
}); 
```

您可能想要使用 tElement.contents() 而不是 tElement.children()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:41:15.147

您的示例中根本不需要 jquery（但您需要将它包含在您的页面/jsFiddle 中）：

```
var app = angular.module('lapis', []);

app.directive('row', function(){
    return {
      restrict: 'E',
      template: '<div class="row" ng-transclude></div>',
      transclude: true,
      replace: true
    };
}); 
```

# php - 具有最少行数的重复区域表

> ID：14106557
> 
> 赞同：0
> 
> 时间：2012-12-31T22:36:05.023
> 
> 标签：php, regions

我创建了一个使用 PHP 从 MySQL 数据库动态填充的表。第一行是所有记录的重复区域。但是，无论是否有记录，是否都可以创建最少数量的行。例如，如果我在给定日期有 8 条记录，那么表格是否可以用 12 行绘制，其中 4 行将是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:31:28.677

首先，好的设计将检索和数据模型与显示（MVC）分开

```
$data = array();
$result = $db->query("SELECT * FROM table");
while($row = $result->fetch_assoc()) {
  $data[] = $row;
} 
```

现在你就做

```
$MIN_VALUE = 12; // Some value
$i = 0;
foreach($data as $row) {
   //Data row
   $i++;
}
while(!$i < $MIN_VALUE) {
   //Blank row
   $i++;
} 
```

# jquery - jquery 与coldfusion cfc 和复选框表单的集成

> ID：14106560
> 
> 赞同：1
> 
> 时间：2012-12-31T22:36:32.700
> 
> 标签：jquery, coldfusion, cfc

我是 jquery 的新手，想要完成以下工作。
1）单击按钮时生成并显示表单

2）让用户使用该表单上的复选框来指示他们要将电子邮件发送给谁

3）对于对话框中的每个复选框，使用cfmail给该人发送电子邮件（我可以写这部分）

请在下面查看我的代码的开头。

```
<script>
$(document).ready(function() {

    $("#notifyregs").click(function() {
        var initialDiv = this;
       // HELP - set the checked box values

        var reminderemails = $(this).data("reminderemails");
        var count = 0;

        $("#editForm").dialog({ width: 500, height: 'auto', maxHeight: 1000,
            buttons: {
                "Send Emails": function() {
                    var thisDialog = $(this);
                   // HELP - Loop through reminderemails and send each value to the function sendreminders
                    $.post("tsafunctions.cfc", {
                        method: 'sendreminders',
                    reminderemails: $("#reminderemails").val(), 
                        }, 
                    function() {
                        $("#message").show();
                        $("#message").text('You sent reminders to ' + count + ' athletes');
                        $(thisDialog).dialog("close");
                    });
                }
            }
        });
    });

});
</script> 
```

表格

```
 <div id="editForm" title="Notify Incomplete Registrations">
  Check who to send emails to:<br />
  <input type="checkbox" name="reminderemails" value="123456" checked="checked" />
  <input type="checkbox" name="reminderemails" value="234567" checked="checked" /></td>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:16:03.977

试试这个：

```
selectedEmails=jQuery('#editForm :checkbox:checked').serialize(); 
```

在您的 jQuery.post 中有一个用于传递数据的数据选项：

```
$.post("tsafunctions.cfc", {data:selectedEmails, ...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:57:10.687

根据您的代码，您似乎希望为每个选定的复选框向 $.post 函数发出请求。如果您不想解析序列化数据，则需要以下内容：

```
//--collect the checked input values and store in array
var reArr = [];
$('#editForm input:checked').each(function(){
   /*--
     pushes the value of each checkbox control that 
     is checked within the #editForm Div into and array
   --*/
  reArr.push($(this).val()); 
});

//--loop through the array and make your requests
for(var i=0; i < reArr.length; i++ ){
   /*--
    access each of the array elements using array syntax (e.g. reArr[i])
   --*/
   console.log(reArr[i]) 
   $.post("tsafunctions.cfc", {"reminderemails":reArr[i]} );
 }
 console.log(reArr); 
```

# javascript - Openlayers + Superfish safari 冲突

> ID：14106563
> 
> 赞同：0
> 
> 时间：2012-12-31T22:36:46.060
> 
> 标签：javascript, css, drupal, openlayers, superfish

使用 Drupal 7、Openlayers 和 Superfish 会导致奇怪的错误。在带有子导航项的菜单项上，顶部菜单项会消失，直到您将鼠标悬停在它上面。悬停后，它会与 subnav 一起正确显示。这只发生在调用 openlayers js 的页面上。

经过检查，没有出现 zindex 问题，没有出现 js 错误，并且看起来 superfish js 工作正常，因为导航滑动得很好。

在此页面上，导航在您悬停之前不起作用：http: [//dev2.esavalanche.org/](http://dev2.esavalanche.org/)

在此页面上，导航工作正常：[http ://dev2.esavalanche.org/node/18](http://dev2.esavalanche.org/node/18)

我注意到这些物品在消失之前会出现一秒钟。

据我所知，这个问题仅存在于 Safari 中。在 Chrome 和 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:01:45.413

在这里的解决方案中发现了类似的问题：http: [//drupal.org/node/1748514](http://drupal.org/node/1748514)显然 openlayers 也使用 translate3d

添加

```
#superfish-1 ul,
#superfish-1  li {
 -webkit-transform: translate3d(0px, 0px, 1px);
} 
```

在 CSS 中修复了消失的菜单项。

# git - 如何grep git日志插入？

> ID：14106565
> 
> 赞同：3
> 
> 时间：2012-12-31T22:37:25.437
> 
> 标签：git

我想寻找我第一次引入函数的提交，以确保它们被单元测试覆盖。

我知道镐，

```
git log -Sfunction -p --author="ZenLikeThat" 
```

让我接近我所追求的，但我只想用镐搜索插入，而不是删除。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:37:15.700

如何 grepping 差异：

```
git log -Sfunction -p | egrep '^commit: |^+.*function' 
```

# php - 需要知道魔术 __call() 请求是否期望返回结果

> ID：14106567
> 
> 赞同：0
> 
> 时间：2012-12-31T22:37:42.100
> 
> 标签：php

本质上，我想在以下两种情况下制定不同的行为。

```
<?php
$foo = Bar();
echo $foo->baz(1);
$foo->baz(1); 
```

我想以不同的方式处理“echo $foo->baz(1)”，因为调用需要返回结果。

我将这些调用连接到 pl/sql 后端，其中 pl/sql 非常关心函数和过程之间的区别。有没有办法检测到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:24:34.190

好吧，我不明白您想要实现什么（换句话说，*“我想以`echo $foo->baz(1)`不同的方式处理”*的确切含义）。但是如果你想知道结果是否 `$foo->baz(...)`被回显，你可以编写`baz()`方法来返回实现`__toString()`方法的对象，在那里你可以做你沉重的奇怪魔法......

# php - 如何使用jquery删除mysql记录

> ID：14106568
> 
> 赞同：2
> 
> 时间：2012-12-31T22:37:42.397
> 
> 标签：php, jquery, mysql, ajax, sql-delete

我有以下代码可以删除一条 mysql 记录，我想对其进行转换，因此它将是一个 ajax/jquery 代码，以便在从表中删除记录后我可以留在同一页面。现在，它工作正常，但不在同一页面上，我需要刷新页面才能看到结果。这只是完整代码的一部分。所有代码都在一页上。

```
//get the mysql results
//this is a repeated region
<tr>
       <td><?php echo $row['id']; ?></td>
       <td><?php echo $row['title']; ?></td>
       <td><?php echo $row['description']; ?></td>
       <td><a href="manage.php?id=<?php echo $row['id']; ?>">Delete</a>
       </td>
</tr>

if ((isset($_GET['deleteid'])) && ($_GET['deleteid'] != "") &&             (isset($_POST['delete']))) {
  $deleteSQL = sprintf("DELETE FROM my_table WHERE id=%s",
                       GetSQLValueString($_GET['deleteid'], "int")); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T10:26:21.107

```
<tr>
       <td><?php echo $row['id']; ?></td>
       <td><?php echo $row['title']; ?></td>
       <td><?php echo $row['description']; ?></td>
       <td><div class="delete_class" id="<?php echo $row['id']; ?>">Delete</div></td>
</tr> 
```

现在在部分写这个

```
$(document).ready(function(){
 $(".delete_class").click(function(){
   var del_id = $(this).attr('id');
   $.ajax({
      type:'POST',
      url:'delete_page.php',
      data:'delete_id='+del_id,
      success:function(data) {
        if(data) {   // DO SOMETHING
        } else { // DO SOMETHING }
      }
   });
 });
}); 
```

现在在“delete_page.php”页面中执行此操作

```
$id = $_POST['delete_id'];
$query = "delete from TABLE NAME where ID = $id"; 
```

休息我希望你知道。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:49:31.283

包括 jQuery 和类似的东西就可以了

```
<tr>
       <td><?php echo $row['id']; ?></td>
       <td><?php echo $row['title']; ?></td>
       <td><?php echo $row['description']; ?></td>
       <td><a href="#" onClick="delete (<?php echo $row['id']; ?>); return false;">Delete</a>
       </td>
</tr>

<script>
function delete(id){
  $.post("manage.php", { deleteid: id , delete: true} );
}
</script> 
```

# php - 在 WordPress 上使用 Uploadify 上传文件时出现 404 错误

> ID：14106569
> 
> 赞同：1
> 
> 时间：2012-12-31T22:37:44.960
> 
> 标签：php, wordpress, http-status-code-404, uploadify

我最近在我的网站[http://tradersprinting.com/contact/send-file-2/](http://tradersprinting.com/contact/send-file-2/)上安装了 uploadifive ，每次尝试上传文件时都会遇到 404 错误。

该站点由 WordPress 内容管理系统提供支持，该站点托管在 1&1 上。uploadify 文件存储在目录中：“http://tradersprinting.com/wp-content/themes/traders/uploadify”。WordPress 函数“bloginfo('template_directory')”返回“http://tradersprinting.com/wp-content/themes/traders/”。目前一切都处于“出厂设置”，没有任何调整，保存我附在下面的代码片段：

**页面上的代码[http://tradersprinting.com/contact/send-file-2/](http://tradersprinting.com/contact/send-file-2/)**

```
 <?php
    chmod("wp-content/themes/traders/uploads/",0777);
    chmod("wp-content/themes/traders/uploadify/uploads/",0777);
  ?>
  <script src="<?php bloginfo('template_directory'); ?>/uploadify/jquery.min.js" type="text/javascript">
  </script>
  <script src="<?php bloginfo('template_directory'); ?>/uploadify/jquery.uploadifive.min.js" type="text/javascript">
  </script>
  <link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/uploadify/uploadifive.css">
  <style type="text/css">
    body {
      font: 13px Arial, Helvetica, Sans-serif;
    }
    .uploadifive-button {
      float: left;
      margin-right: 10px;
    }
    #queue {
      border: 1px solid #E5E5E5;
      height: 177px;
      overflow: auto;
      margin-bottom: 10px;
      padding: 0 3px 3px;
      width: 300px;
    }
  </style>
  <form>
    <div id="queue">
    </div>
    <input id="file_upload" name="file_upload" type="file" multiple="true">
    <a style="position: relative; top: 8px;" href="javascript:$('#file_upload').uploadifive('upload')">Upload Files</a>
  </form>
  <script type="text/javascript">
    <?php $timestamp = time();?>
      $(function() {
      $('#file_upload').uploadifive({
        'auto'             : false,
        'checkScript'      : 'check-exists.php',
        'formData'         : {
          'timestamp' : '<?php echo $timestamp;?>',
          'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
        },
        'queueID'          : 'queue',
        'uploadScript'     : 'uploadifive.php',
        'onUploadComplete' : function(file, data) { console.log(data); }
      });
    });
  </script> 
```

**我的uploadifive.php 副本**

```
<?php
/*
UploadiFive
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
*/

// Set the uplaod directory
$uploadDir = '/uploads/';

// Set the allowed file extensions
$fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions

$verifyToken = md5('unique_salt' . $_POST['timestamp']);

if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    //  Commenting out this line as a potential bugfix for 404 error
    //$uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;
    $uploadDir = "/wp-content/themes/traders/uploadify/uploads";
    $targetFile = $uploadDir . $_FILES['Filedata']['name'];

    // Validate the filetype
    $fileParts = pathinfo($_FILES['Filedata']['name']);
    if (in_array(strtolower($fileParts['extension']), $fileTypes)) {

        // Save the file
        move_uploaded_file($tempFile, $targetFile);
        echo 1;

    } else {

        // The file type wasn't allowed
        echo 'Invalid file type.';

    }
}
?> 
```

我在从根目录开始的目录树的每个分支中创建了一个“上传”目录，并且在到示例 uploadify 目录的每一步都包括一个目录，但它们都没有接收文件。

我喜欢这个程序，我认为设计师做得很出色，但我真的很想让产品工作，尤其是在投资之后！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:27:02.057

Uploadify uses a Flash SWF based uploader. In many cases Apache web server's mod_security module prevents data uploaded by any SWF. So I'd say check server's mod_security log (not Apache error log) if it is blocking your script.

# java - Eclipse 的 Linux 或 Sublime Text 选项卡式自动完成？

> ID：14106570
> 
> 赞同：3
> 
> 时间：2012-12-31T22:37:54.847
> 
> 标签：java, eclipse

有没有办法在 Eclipse 中启用 Sublime Text 样式选项卡自动完成。我已经非常习惯于在 Sublime 中简单地键入变量名的前几个字母，然后点击`tab`完成变量名，然后不假思索地继续前进。当我过渡到 Eclipse 时，它​​被证明是一个难以打破的肌肉记忆。

我知道`CTRL + Space`打开代码完成菜单以自动生成某些属性名称等等，但我更多的是指在我键入名称时真正快速完成名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T01:00:26.960

也许一个快速的[eclipse hack](https://stackoverflow.com/questions/3758205/is-there-eclipse-useful-add-on-for-autocomplete-function-like-xcode)对你有用？

我从未使用过 Sublime 的自动完成功能，但听起来 Xcode 有类似的东西。只需使用您想要切换自动完成的任何/所有字符填充“自动激活触发器”文本框。

# ios - GPUImage 和 OpenGL ES 中的多个单通道输出

> ID：14106572
> 
> 赞同：1
> 
> 时间：2012-12-31T22:38:04.597
> 
> 标签：ios, opengl-es-2.0, gpuimage

我正在尝试使用 GPUImage 库进行图像处理（而不是图像输出到屏幕）。默认情况下，库输出一个 BGRA 纹理。我想改为输出多个单通道/单字节纹理。到目前为止，我一直在为 BGRA 中的每个像素进行多次计算。我已经达到了这种方法的局限性，因为 a）我现在每个像素有超过 4 个返回值，并且 b）将 BGRA-BGRA-BGRA-BGRA..... 去隔行扫描到 BBBB 的开销......， GGGG ..，RRRR ..，AAAA ..，开始真正让我的程序陷入困境。

我知道有一些示例代码可以将多个输入纹理与 GPUImage 一起使用，但我还没有看到多个输出纹理的任何内容。对于单字节输出，我相信我可以使用 GL_ALPHA 纹理（？），所以我猜测将多个纹理绑定到我的过滤器内核中的变量是一个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:34:11.983

可能您需要的是多个渲染目标（或简称 MRT）。您可以使用 GL_COLOR_ATTACHMENT 检查您的目标硬件支持多少颜色附件。不幸的是，我相信并非所有 iOS 设备都支持（如果有的话）。

# spring - 如何从 entitymanager 访问 Hibernate 统计信息？

> ID：14106575
> 
> 赞同：3
> 
> 时间：2012-12-31T22:38:33.553
> 
> 标签：spring, hibernate, junit, second-level-cache, sessionfactory

我正在使用 Spring 3.1.1.RELEASE、JUnit 4.8.1 和 Hibernate 4.1.5.Final。我正在尝试测试我的二级缓存是否配置正确，但不确定如何操作。我正在使用 JPA 实体管理器，像这样在 Spring 中配置...

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaDialect">
        <bean class="org.collegeboard.springboard.core.jpa.HibernateJpaDialect">
            <property name="flushMode" value="COMMIT"/>
        </bean>
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="persistenceXmlLocation" value="classpath:META-INF/test-persistence.xml"/>
    <property name="persistenceUnitName" value="orgTestingDatabase"/>
    <property name="dataSource" ref="dataSource"/>
</bean>

<bean id="sharedEntityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
   <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

我已经像这样配置了我的二级缓存......

```
 <property name="hibernate.cache.use_second_level_cache">true</property>
    <property name="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</property>
    <property name="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</property> 
    <!--  Collect stats, this is for testing if the cache is working -->
    <property name="hibernate.generate_statistics">true</property> 
```

给定我的 javax.persistence.EntityManager ，如何访问 org.hibernate.stat.Statistics 对象？显然，我需要以某种方式访问​​ SessionFactory，但我无法找出合适的演员阵容。

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T13:20:27.430

我过去一直在努力解决这个问题：[通过 JMX 和 Tomcat 中的 Spring 公开 Hibernate (cache) statistics](https://stackoverflow.com/questions/5930803/exposing-hibernate-cache-statistics-through-jmx-with-spring-in-tomcat)

如果您只是想知道“它是否正常工作”，您可以为`org.hibernate.stat.Statistics`或启用 Hibernate 调试日志记录`org.hibernate.stat.*`。但是，如果您（像我一样）想要一个缓存统计报告，您可以执行以下操作。这会公开一个包含所有统计信息的 JMX bean：

```
/**
 * Provides code to register Hibernate's 2nd level cache statistics bean with a
 * JMX MBean server. Assumes that both the MBeanServer and the
 * EntityManagerFactory are available as Spring-managed beans. Note that while
 * registering this class enables the collection of statistics even if that was
 * previously disabled.
 */
public class HibernateCacheStatisticsJmxRegistration {

  @Autowired
  private EntityManagerFactory entityManagerFactory;

  @Autowired
  private MBeanServer mbeanServer;

  private ObjectName objectName;

  /**
   * Registers the statistics MBean that wraps a Hibernate session factory.
   * 
   * @throws JMException if anything fails..
   * @see HibernateCacheStatisticsJmxRegistration#unregister()
   */
  public void register() throws JMException {
    final SessionFactory sessionFactory = ((HibernateEntityManagerFactory) entityManagerFactory).getSessionFactory();

    objectName = new ObjectName("net.sf.ehcache:type=CacheStatistics,name=Hibernate2ndLevelCache");

    final StatisticsService statsMBean = new StatisticsService();
    statsMBean.setSessionFactory(sessionFactory);
    statsMBean.setStatisticsEnabled(true);
    mbeanServer.registerMBean(statsMBean, objectName);
  }

  /**
   * Unregisters the MBean that was registered.
   * 
   * @throws JMException if the de-registration fails
   * @see HibernateCacheStatisticsJmxRegistration#register()
   */
  public void unregister() throws JMException {
    mbeanServer.unregisterMBean(objectName);
  }
} 
```

应用上下文：

```
<!-- Setting up Ehcache manager for various caches. -->
<bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
  <property name="configLocation" value="classpath:ehcache.xml" />
</bean>  
<ehcache:annotation-driven cache-manager="ehCacheManager" />

<!-- Exposing cache statistics through JMX. -->
<context:mbean-server />
<bean class="net.sf.ehcache.management.ManagementService" init-method="init">
  <constructor-arg ref="ehCacheManager"/>
  <constructor-arg ref="mbeanServer"/>
  <constructor-arg value="true"/>
  <constructor-arg value="true"/>
  <constructor-arg value="true"/>
  <constructor-arg value="true"/>
</bean>    
<bean class="HibernateCacheStatisticsJmxRegistration" init-method="register" destroy-method="unregister" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:33:03.717

实体管理器有一个名为 getDelegate 的方法。调用它并将其类型转换为休眠会话对象。拥有休眠会话对象后，您可以获得会话工厂和统计信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-07T08:15:28.017

您可以通过多种方式访问​​ Hibernate 统计信息：

# 以编程方式

如果要`Statistics`在应用程序中获取对象，可以按如下方式进行：

```
Session session = entityManager.unwrap(Session.class);

Statistics statistics = session.getSessionFactory().getStatistics(); 
```

首先，我们将 解包`EntityManager`到 Hibernate`Session`中，然后您可以`Syatistics`通过关联的`SesisonFactory`.

# 日志记录

如果也可以记录`Statistics`报告，这种情况下需要添加如下日志配置项：

```
<logger name="org.hibernate.engine.internal.StatisticalLoggingSessionEventListener" level="info"/> 
```

# JMX

对于 Hibernate 5.4.2 及更高版本，您还可以[`Statistics`](https://vladmihalcea.com/hibernate-statistics/)通过 JMX 公开对象。

为此，您需要设置[`hibernate.jmx.enabled`](https://vladmihalcea.com/hibernate-statistics-jmx/)配置属性：

```
<property name="hibernate.jmx.enabled" value="true"/> 
```

`org.hibernate.core`并在您的 JMX 客户端应用程序中找到MBean 包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T23:03:54.933

最简单的方法是为您定义一个 bean，然后将其自动装配。据我所知，`SessionFactory`没有直接的方法可以`SessionFactory`从.`EntityManager`

# c++ - c ++ 2D数组：每个元素都有一个数字，但输出是一个不同的数字

> ID：14106578
> 
> 赞同：3
> 
> 时间：2012-12-31T22:39:32.637
> 
> 标签：c++, arrays

我编写了下面的代码，期望在运行时得到 123456789。然而，相反，我得到了 124457789，我可以终生找出原因。为什么我的代码不能做我认为它应该做的事情？

如果我更改数字，第三个和第六个数字仍将与第四个和第七个数字相同。

```
#include<iostream>
#include<string>
#include<cmath>

using namespace std;

int main(){

    int matrix[2][2];
    matrix[0][0]=1;
    matrix[0][1]=2;
    matrix[0][2]=3;
    matrix[1][0]=4;
    matrix[1][1]=5;
    matrix[1][2]=6;
    matrix[2][0]=7;
    matrix[2][1]=8;
    matrix[2][2]=9;

    cout<<matrix[0][0];
    cout<<matrix[0][1];
    cout<<matrix[0][2];
    cout<<matrix[1][0];
    cout<<matrix[1][1];
    cout<<matrix[1][2];
    cout<<matrix[2][0];
    cout<<matrix[2][1];
    cout<<matrix[2][2];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:41:18.737

您的矩阵只能从`[0][0]`through索引`[1][1]`，因为它是 2x2 声明。您正在索引`[2][2]`，因此这是未定义的行为。

将您的矩阵声明为并重`matrix[3][3]`试。

**编辑**使用模/除法循环以 1-9 加载。

```
int matrix[3][3];
for (int i=0;i<9;++i)
    matrix[i/3][i%3] = (i+1); 
```

盯着它看一会儿，看看你是否理解它与你相当大的直接分配堆栈的结果是一样的。同样在打印方面：

```
for (int i=0;i<9;++i)
    cout << matrix[i/3][i%3];
cout << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:42:12.650

应该是 3x3 数组，而不是 2x2：

```
int matrix[3][3]; 
```

否则，任何用 2 索引的东西都会导致未定义的行为。

# ruby - 覆盖命名空间的 put 仅在覆盖 Kernel.puts 后才有效？

> ID：14106581
> 
> 赞同：0
> 
> 时间：2012-12-31T22:40:00.980
> 
> 标签：ruby, overriding, puts

抱歉，问题标题含糊不清，但我不知道是什么原因导致以下问题：

```
module Capistrano
  class Configuration
    def puts string
      ::Kernel.puts 'test'
    end
  end
end 
```

现在当 Capistrano 调用时`puts`，我看不到“测试”，但我看到了原始输出。

但是，当我还添加此内容时：

```
module Kernel
  def puts string
    ::Kernel.puts 'what gives?'
  end
end 
```

现在，突然，`puts`实际上返回的是“test”，而不是“what give?”，不是原始内容，而是“test”。

是否有合理的解释为什么会发生这种情况（除了我对 Ruby Kernel 内部工作原理的有限理解）？

在我看来（但不知何故“似乎有效”）的事情：

*   我希望第一个块返回“测试”，但它没有
*   我希望这两个块的组合返回'what give?'，但它返回'test'？
*   我覆盖 Kernel.puts 的方式对我来说似乎是一个永无止境的循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:25:53.737

```
module Capistrano
  class Configuration
    def puts string
      ::Kernel.puts 'test'
    end
    def an_thing
      puts "foo"
    end
  end
end

Capistrano::Configuration.new.an_thing 
```

给出输出：

```
test 
```

第二个版本也提供相同的输出。原因是您定义的是实例级别方法而不是类级别方法（[这篇文章](http://railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/)似乎很好地解释了这些差异）。稍微不同的版本：

```
module Kernel
  def self.puts string
    ::Kernel.puts 'what gives?'
  end
end 
```

执行以下操作。因为它会导致无限递归，就像您预期的那样。

```
/tmp/foo.rb:14:in `puts': stack level too deep (SystemStackError)
    from /tmp/foo.rb:14:in `puts'
    from /tmp/foo.rb:4:in `puts'
    from /tmp/foo.rb:7:in `an_thing'
    from /tmp/foo.rb:18

shell returned 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:52:39.850

由于其编辑功能，我使用答案而不是评论。您可以对其进行编辑以添加更多信息，我稍后可能会删除它。

> 现在当 Capistrano 调用 puts 时，我看不到“测试”，但我看到了原始输出。

如果不了解 Capistrano 的调用方式`puts`和调用方式，就很难回答您的问题。我会说如果 puts 显示它的参数，使用原始参数是正常的`Kernel#puts`（不清楚你所说的*original output*，我必须假设你的意思是给 puts 的字符串）。

> *   我希望第一个块返回“测试”，但它没有

我看到调用`puts`Capistrano 模块中类 Configuration 中定义的实例方法的唯一方法是：

```
Capistrano::Configuration.new.puts 'xxx' 
```

或者

```
my_inst_var = Capistrano::Configuration.new 
```

和其他地方

```
my_inst_var.puts 'xxx' 
```

当然它会打印出来`test`。同样，如果没有看到结果让您感到惊讶的 puts 语句，就不可能知道发生了什么。

> *   我希望这两个块的组合返回'what give?'，但它返回'test'？

第二点很神秘，我需要查看调用 puts 的代码，以及控制台输出。

# sql-server - aspnetdb 对象应该在应用程序数据库中生成还是在它们自己的单独数据库中生成？

> ID：14106585
> 
> 赞同：1
> 
> 时间：2012-12-31T22:40:52.193
> 
> 标签：sql-server, asp.net-mvc-4, asp.net-membership, aspnetdb

我将 MVC 4 和 SQL Server 与我的应用程序数据库一起使用。我想添加用户身份验证，用户在注册时会有额外的字段*（例如地址、电话等）*。实现此目的的正确方法是什么？

我考虑了以下选项：

1.  生成一个单独的`aspnetdb`数据库并对其进行身份验证，更改其中的用户列并在身份验证后使用主应用程序数据库，大概使用会话来存储用户信息。

2.  不要创建`aspnetdb`，而是将`aspnetdb`表添加到应用程序数据库并将其他字段添加到相关生成的表中。

3.  如上面的＃2，但在应用程序数据库中创建一个单独的用户表并`aspnetdb`在现有表上加入相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T23:10:58.987

ASP.NET MVC 4 使用开箱即用的 SimpleMemebrship 提供程序。您可以将自定义字段添加到 UserProfile 表。这是一个[`step-by-step article`](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)解释如何实现这一目标。

# php - 根据键值将数组插入mysql

> ID：14106587
> 
> 赞同：0
> 
> 时间：2012-12-31T22:41:12.190
> 
> 标签：php, mysql, arrays

我已经为我的问题寻找了一个类似的解决方案，但我很难找到它，所以如果已经问过这个问题，请原谅。我有我的php代码

```
foreach($data['cells'] as $row) {
    print_r($row);
} 
```

产生

```
Array
(
    [1] => ASSET ID
    [2] => SERIAL IN CAPS
    [3] => COMPANYASSETTAG
    [4] => DATE RCVD
    [5] => MFR
    [6] => Type
    [7] => MODEL
    [8] => PRINTER MODEL COMMENTS
    [9] => PART NUMBER
    [10] => R ID
    [11] => GRADE
    [12] => PRICE
    [13] => COLOR CAPABLE (Color or Monochrome)
    [14] => COSMETICALLY ACCEPTABLE (Yes or No)
    [15] => PRINTERCABLEINCLUDED (Yes or No)
    [16] => PRINTER TECHNOLOGY (Laser, Inkjet, 4-1 Laser, 3-1 Laser, 4-1 Ink Jet, 3-1     Ink Jet, Dot Matrix, Plotter, Solid Ink, Thermal)
    [17] => DUPLEX (Yes or No)
    [18] => MULTIFUNCTION (Yes or No)
    [19] => COMMENT  (reason)
    [20] => COSMETICS COMMENT
    [21] => PURCHASE ORDER # (Trailer #)
    [22] => WAYBILL#
)
Array
(
    [1] => CNGYF04230
    [2] => CNGYF04230
    [3] => MISSING
    [4] => 28/12/2012
    [5] => Hewlett Packard
    [6] => Multi-Function Printers
    [8] => 4345X
    [9] => Q3943A
    [11] => G
    [13] => Monochrome
    [14] => Yes
    [15] => No
    [16] => Laser
    [17] => Yes
    [18] => Yes
    [21] => TRDS293
    [22] => HM693800
) 
```

如您所见，与上述数组相比，第二个数组中的键缺失了。这些对应于列。第二个中缺少一些的原因是因为这些字段不包含任何数据。我希望能够根据键将这些插入到 mysql 表中的相应字段中。

例如

```
foreach($data['cells'] as $row) {
    //print_r($row);
    $sql = "INSERT INTO table (asset_id,serial_in-caps...) VALUES ('$row[0]','$row[1]'...)";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:56:50.020

由于数组中有数字作为键，因此可以使用 for 循环遍历数组：

```
$keys = array();
foreach($data["cells"] as $row) {
    if(empty($keys)) {
        $keys = $row;
        continue;
    }

    $rowValues = array();
    for($i = 1; $i < count($keys); $i++) {
        if(isset($row[$i]))
            $rowValues[] = $row[$i];
        else
            $rowValues[] = "NULL"; //(or another standard value)
    }
    /* continue with the variable $rowValues */
} 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:53:12.767

我刚刚找到了解决方案。

```
foreach($data['cells'] as $row) {
    //print_r($row);
    foreach($row as $key => $value) {
        echo "$key is at $value<br>";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:05:06.713

@atreju

你的代码很完美，只是清理了一些丢失的字符:)

```
$keys = array();
foreach($data["cells"] as $row) {
    if(empty($keys)) {
        $keys = $row;
        continue;
    }

    $rowValues = array();
    for($i = 1; $i <= count($keys); $i++) {
        if(isset($row[$i]))
            $rowValues[] = $row[$i];
        else
            $rowValues[] = "NULL"; //(or another standard value)
        }
    /* continue with the variable $rowValues */
} 
```

# ios - 捕获有边界的图像？

> ID：14106589
> 
> 赞同：4
> 
> 时间：2012-12-31T22:41:15.703
> 
> 标签：ios, objective-c, camera, avcapturesession

我能够从 iOS 后置摄像头捕捉图像。除了我希望它按照我的`UIView`.

我的代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    session = [[AVCaptureSession alloc] init];

    session.sessionPreset = AVCaptureSessionPresetMedium;

    captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
    captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    captureVideoPreviewLayer.frame = vImagePreview.bounds;
    [vImagePreview.layer addSublayer:captureVideoPreviewLayer];

    AVCaptureDevice *device = [self backFacingCameraIfAvailable];
    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [stillImageOutput setOutputSettings:outputSettings];
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) {
            break;
        }
    }

    [session startRunning];

    [session addOutput:stillImageOutput];
}

-(AVCaptureDevice *)backFacingCameraIfAvailable{

    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    AVCaptureDevice *captureDevice = nil;
    for (AVCaptureDevice *device in videoDevices){
        if (device.position == AVCaptureDevicePositionBack){
            captureDevice = device;
            break;
        }
    }

    //  couldn't find one on the back, so just get the default video device.
    if (!captureDevice){
        captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    }
    return captureDevice;
} 
```

下面是捕获图像的代码：

```
- (IBAction)captureTask {
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections){
        for (AVCaptureInputPort *port in [connection inputPorts]){

            if ([[port mediaType] isEqual:AVMediaTypeVideo]){

                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) {
            break;
        }
    }

    NSLog(@"about to request a capture from: %@", stillImageOutput);
    [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
     {
         CFDictionaryRef exifAttachments = CMGetAttachment(imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments) {
             // Do something with the attachments.
             NSLog(@"attachements: %@", exifAttachments);
         } else {
             NSLog(@"no attachments");
         }

         NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
         UIImage *image = [[UIImage alloc] initWithData:imageData];
         stillImage = image;

     }];
} 
```

我面临的问题是它正在拍照并保存到`stillImage`，但是，据我所知，该图像适用于整个 iPhone 屏幕。这不是`UIView *vImagePreview`我创造的界限。有没有办法剪裁捕获图像的边界？

**[编辑]**

阅读文档后，我意识到图像是正确的分辨率，如下所示：`session.sessionPreset = AVCaptureSessionPresetMedium;`。有没有办法让图像像一个正方形？就像Instagram如何制作他们的图片一样？根据文档的所有会话预设都不是正方形:(

我尝试了以下内容：

`captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResize;`

但是，它只会调整图像大小以适合当前视图，不会制作方形图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T00:20:45.003

我理解你的沮丧，预设应该是可定制的或有更多的选择！我对图像所做的就是围绕中心裁剪它们，为此我编写了以下代码：

```
- (UIImage *)crop:(UIImage *)image from:(CGSize)src to:(CGSize)dst
{
    CGPoint cropCenter = CGPointMake((src.width/2), (src.height/2));
    CGPoint cropStart = CGPointMake((cropCenter.x - (dst.width/2)), (cropCenter.y - (dst.height/2)));
    CGRect cropRect = CGRectMake(cropStart.x, cropStart.y, dst.width, dst.height);
    CGImageRef cropRef = CGImageCreateWithImageInRect(image.CGImage, cropRect);
    UIImage* cropImage = [UIImage imageWithCGImage:cropRef];
    CGImageRelease(cropRef);

    return cropImage;
} 
```

其中`src`代表原始尺寸，`dst`代表裁剪后的尺寸；`image`当然是您要裁剪的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T07:47:33.533

如果设备是视网膜显示器，则此屏幕截图的工作方式如下所述：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] == YES && [[UIScreen mainScreen] scale] == 2.00)
{
    CGPoint cropCenter = CGPointMake((src.width), (src.height));
    CGPoint cropStart = CGPointMake((cropCenter.x - (dst.width)), (cropCenter.y - (dst.height)));
    CGRect cropRect = CGRectMake(cropStart.x, cropStart.y, dst.width*2, dst.height*2);
    CGImageRef cropRef = CGImageCreateWithImageInRect(image.CGImage, cropRect);
    UIImage* cropImage = [UIImage imageWithCGImage:cropRef];
    CGImageRelease(cropRef);
    return cropImage;
}
else
{
    CGPoint cropCenter = CGPointMake((src.width/2), (src.height/2));
    CGPoint cropStart = CGPointMake((cropCenter.x - (dst.width/2)), (cropCenter.y - (dst.height/2)));
    CGRect cropRect = CGRectMake(cropStart.x, cropStart.y, dst.width, dst.height);
    CGImageRef cropRef = CGImageCreateWithImageInRect(image.CGImage, cropRect);
    UIImage* cropImage = [UIImage imageWithCGImage:cropRef];
    CGImageRelease(cropRef);

    return cropImage;
} 
```

# excel - 请参阅文本文件中搜索文本下方的行

> ID：14106593
> 
> 赞同：1
> 
> 时间：2012-12-31T22:41:35.367
> 
> 标签：excel, vba

我在文本文件中有如下数据：

```
Member A
      Diameter      60 in
      Thickness     1  in
      Yield Stress  50 ksi

Brace B
      Diameter      54 in
      Thickness     1  in
      Yield Stress  50 ksi 
```

当在长文本文件中找到一串文本“成员 A”时，我需要提取数值直径（或厚度或屈服应力）。数据始终按相同顺序排列。

我可以使用“Trim”/“Mid”提取与正在搜索的文本在同一行的数据。我不知道如何引用我正在搜索的文本的“下面的行”。

我的代码：

```
Sub jtdtlextract()
    Dim str, str1, strOutPut, strBrcAngle, strComnJt, strChrdDia As String
    Dim FileToOpen, FileConverted, strRun, lngReturn, fs, f, s, ff

    FileToOpen = Application.GetOpenFilename("All Files (*.*), *.*")
    If FileToOpen <> False Then
        MsgBox FileToOpen, 0, "Open File"
    End If

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.GetFile(FileToOpen)

    FileConverted = UCase(f.ParentFolder.Path) & "\jt_dtls_extracted.txt"

    Open FileToOpen For Input Access Read Shared As #1
    Open FileConverted For Output Access Write Shared As #2

    Do Until EOF(1)
        Line Input #1, str
        str1 = LTrim(str)
        If Left(str1, 31) = "Detailed Review Report of Joint" Then
             strComnJt = Trim(Mid(str1, 35, 4))
             strOutPut = "Common_Jt" & Space(1) & strComnJt
             Print #2, strOutPut
        End If
                'I have a lot more information to extract from the text file
                'I was hoping to use a method similar to above since it's
                'fairly simple and I have no coding experience, the code
                'above only works when the information needed is on the
                'same line as the information searched for. Was written
                'by someone else.
    Loop
    Close #1
    Close #2

    strRun = "Notepad.exe " & FileConverted
    lngReturn = Shell(strRun)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:45:15.177

您需要一些状态管理代码来跟踪您在文件中的位置。

如果文件不是太大，则不需要全流式处理，可以在数组中使用全**缓冲。**

然后你可以使用简单的索引自然地扫描这个数组：

```
name = lines(i)
diameter = parseDiameter(lines(i+1))
thickness = parseThickness(lines(i+2))
yieldStress = parseYieldStress(lines(i+3))
i = i + 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:58:02.760

```
 Do Until EOF(1)
    Line Input #1, str
    str1 = LTrim(str)
    If Left(str1, 31) = "Detailed Review Report of Joint" Then
            strComnJt = Trim(Mid(str1, 35, 4))
            strOutPut = "Common_Jt" & Space(1) & strComnJt
            Print #2, strOutPut

            Line Input #1, strDiscardThisLine
            Line Input #1, str3rdLine
            strOutPut = Trim(Mid(str3rdLine,35,4))
            Print #2, strOutPut

    End If 
```

# java - java中的URLConnection并保存会话状态

> ID：14106595
> 
> 赞同：3
> 
> 时间：2012-12-31T22:41:49.633
> 
> 标签：java, session, urlconnection

我正在使用 URLConnection 登录页面。当我成功登录时，页面上将设置一个会话值。之后我想访问站点上的其他文件，但我无法维护站点的会话状态。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:58:53.297

我建议您改用 Apache HttpClient / HttpComponents。它具有维护客户端 cookie 存储的设施。

* * *

跨`URLConnection`实例维护会话状态涉及：

*   获取 set-cookie 响应标头
*   解析它们，找出它们适用于什么，并存储它们
*   为后续请求创建和添加 cookie 请求标头。

在 Java 1.6 之前，没有公共 Java API 可以为您执行此操作，您必须“手动”完成所有操作。`CookieHandler`从 Java 1.6 开始，以/ `CookieManager`/ `HttpCookie`/ `CookieStore`/的形式提供支持`CookiePolicy`。有关详细信息，请参阅[javadocs](http://docs.oracle.com/javase/7/docs/api/java/net/CookieManager.html)。

相关页面：

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/cookie_support.html](http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/cookie_support.html)
*   [http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/accessingCookies.html](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/accessingCookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:13:49.130

听起来您尝试访问的网站基于 cookie 处理会话。您可能需要捕获该 cookie 并将其添加到未来的请求中。这个问题可能对那篇文章有所帮助：

[带有 Cookie 的 URL 连接？](https://stackoverflow.com/questions/6354294/urlconnection-with-cookies)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T23:13:58.543

从 URLConnection 读取以查看是否设置了任何 cookie 或发送了包含会话 ID 的重定向，您可以将其发送回其他站点。

# c++ - 删除除特定文件夹外的所有文件夹

> ID：14106601
> 
> 赞同：2
> 
> 时间：2012-12-31T22:42:24.797
> 
> 标签：c++, directory, boost-filesystem

我已经有了一次删除一个文件夹的增强功能。`remove_all();`

文件夹列表如下：

```
folder1
folder2
folder3
folder4
folder5 
```

我想用上面的函数将它们全部删除，但保留文件夹 2 和文件夹 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:17:27.757

我实际上找到了两种方法来做到这一点。

首先，我将文件夹列表放入一个数组中。

第一种方法：使用函数在我的字符串数组中查找子字符串，然后将其删除。

第二种方式：使用 strcmp 与我的字符串数组进行比较，然后擦除找到的搜索标签。

这是最终的代码：

```
// simple_ls program form boost examples
// http://www.boost.org/doc/libs/1_52_0/libs/filesystem/example/simple_ls.cpp
#define BOOST_FILESYSTEM_VERSION 3

//  We don't want to use any deprecated features
#ifndef BOOST_FILESYSTEM_NO_DEPRECATED 
#  define BOOST_FILESYSTEM_NO_DEPRECATED
#endif
#ifndef BOOST_SYSTEM_NO_DEPRECATED 
#  define BOOST_SYSTEM_NO_DEPRECATED
#endif

#include "boost/filesystem/operations.hpp"
#include "boost/filesystem/path.hpp"
#include "boost/progress.hpp"
#include <iostream>
#include <cstring>

using namespace std;
using namespace boost::filesystem;
unsigned long dir_count = 0;

void RemoveSub(string& sInput, const string& sub) {
    string::size_type foundpos = sInput.find(sub);
    if ( foundpos != string::npos )
        sInput.erase(sInput.begin() + foundpos, sInput.begin() + foundpos + sub.length());
}

int listDir(string d) {
d.erase(
remove( d.begin(), d.end(), '\"' ),
d.end()
); //Remove Quotes

if (!is_directory(d)) {
    cout << "\nNot found: " << d << endl;
    return 1;
  }
    directory_iterator end_iter;
    for (directory_iterator dir_itr(d);
        dir_itr != end_iter;
        ++dir_itr) {
            if (is_directory(dir_itr->status())) {
            ++dir_count;
            string v = dir_itr->path().filename().string();
            v.erase(
            remove( v.begin(), v.end(), '\"' ),
            v.end()
            );
            string m[] = { v };
            string mm = m[0].c_str();
            RemoveSub(mm, "folder2"); // Keep folder2
            RemoveSub(mm, "folder5"); // Keep folder5
/*
            if( strcmp(m[0].c_str(), "folder2") == 0 ) mm.erase (mm.begin(), mm.end()); // Keep folder2
            if( strcmp(m[0].c_str(), "folder5") == 0 ) mm.erase (mm.begin(), mm.end()); // Keep folder5
*/
            if(!mm.empty()) { // Remove folders
            cout << "\nRemoving: " << mm << " ...";
            remove_all(d+"/"+mm);
            }
        }
    }
    return 0;
}

int main(int argc, char* argv[]) {
string i;
cout << "\nx: Exit\n\nDelete all folders in: ";
getline(cin,i);
if(i=="X" || i=="x") return 0;
if(i.empty()) return 0;

listDir(i); //Call our function
return 0;
} 
```

# c# - 将 DateTime.Parse() 格式转换为 jqgrid 中的日期和时间

> ID：14106602
> 
> 赞同：2
> 
> 时间：2012-12-31T22:43:07.697
> 
> 标签：c#, javascript, sql-server, jqgrid

我正在使用`jqGrid 4.4.1`和`C#.net`。我正在从`sqlserver`使用转换日期字段`DateTime.Parse()`。它`jqgrid`以这种格式发送到：

`1/5/2012 4:05:00 PM`

我希望它以相同的格式显示，但我的`formatoptions`值一定不正确，因为这个值：

`4/18/2007 11:21:00 AM`

像这样显示

`28/11/2010`

这是我的`formatoptions`设置：

`{ "srcformat": "n/j/Y g:i:s A", "newformat": "n/j/Y g:i:s A" }`

我还有其他正确显示`4/18/2010`为`4/18/2010`使用的日期字段：

`{ "srcformat": "m/d/Y", "newformat": "m/d/Y" }`

我猜这是一个问题，`srcformat`但我尝试过的许多组合都没有奏效。

日、月或小时没有前导零，AM/PM 采用 12 小时制，`srcformat`我应该使用什么正确？

由于日期可以很好地使用这种方法，我更喜欢转换格式`jqgrid`以避免在日期中包含时间时进行特殊解析。

**编辑：**

如果我不尝试将字段格式化为日期，它会正确显示日期，但我无法按该字段排序，因为它没有被排序为日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:14:43.790

事实证明这不是字符串格式的问题，而是我如何传递该格式的问题。我没有将其作为对象传递，而是`formatoptions`将其作为字符串传递。进行更改后，我的格式将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:09:18.220

尝试

```
{ "srcformat" : "m/d/Y h:i:s A", "newformat" : "n/j/Y g:i:s A" } 
```

# ruby - Watir Webdriver 加载 Chrome 扩展

> ID：14106604
> 
> 赞同：3
> 
> 时间：2012-12-31T22:43:14.477
> 
> 标签：ruby, google-chrome, watir

我正在尝试使用 Watir 加载 chrome 扩展程序，但遇到了问题。我发现了这个相关问题：[Ability to launch chrome with extensions loaded with watir-webdriver](https://stackoverflow.com/questions/12586751/ability-to-launch-chrome-with-extensions-loaded-with-watir-webdriver)。但是，在此之后我仍然遇到同样的问题。

```
require 'rubygems'
require 'watir-webdriver'
require 'ruby-debug'
require 'nokogiri'

browser = Watir::Browser.new :chrome, :switches => %w[--load-extension=~/.config/google-chrome/Default/Extensions/anepbdekljkmmimmhbniglnnanmmkoja/0.1.12_0]

sleep(10)
browser.close 
```

我还尝试将扩展名从 /Extensions 复制到 /Desktop 并从那里加载但无济于事。

我得到的错误是`Could not load extension from ... Manifest File Missing or Unreadable.` Manifest 文件确实存在，并且似乎是 JSON 格式的正确文件。

尝试加载不同的扩展也会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-21T05:06:24.207

下载 chrome 扩展 crx 文件，

```
Store the args or any other option need to pass in the watir_opts hash 
 watir_opts[:extensions] = ['path of *.crx file']
 browser = Watir::Browser.new :chrome, options: watir_opts 
```

这对我有用。注意：我没有使用 'base64' gem 进行编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:33:30.687

如果您打包扩展，然后将其 base64，您可以直接从您的 ruby​​ 代码将其加载到 Chrome 浏览器中。

1.  将您的扩展打包到 *.crx 文件中。您可以按照[本](http://www.booyagadget.com/2011/05/how-to-package-your-google-chrome-extensions-and-install.html)指南进行操作，或者只是 google 如何打包 chrome 扩展程序。

2.  Base64 然后将其添加到您所需的功能列表中。您可以使用一些类似于此的代码：

    ```
     chrome_extensions = []
       chrome_extension_path = '\home\user\packed_chrome_extension.crx'
    begin
      File.open(chrome_extension_path, "rb") do |file|
        chrome_extensions << Base64.encode64(file.read.chomp)
      end
    rescue Exception => e
      raise "ERROR: Couldn't File.read or Base64.encode64 a Chrome extension: #{e.message}"
    end

    # Append the extensions to your capabilities hash
    my_capabilities.merge!({'chrome.extensions' => chrome_extensions})

    desired_capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(my_capabilities)

    browser = Watir::Browser.new(:remote, :url => 'http://localhost:4444/wd/hub' :desired_capabilities => desired_capabilities) 
    ```

并且不要忘记`require 'base64'`。

该示例适用于远程 Web 驱动程序实例，但我认为它也应该在本地使用 Web 驱动程序时工作。只需调整传递给`Watir::Browser.new`.

# jenkins-plugins - 如何在 Jenkins 的 email-ext 插件中显示日志解析器插件的解析控制台输出

> ID：14106606
> 
> 赞同：2
> 
> 时间：2012-12-31T22:43:22.703
> 
> 标签：jenkins-plugins, logparser, email-ext

Email-ext 插件提供 build.getLog(100) 方法来显示控制台输出。是否有类似的方法来显示 Parsed Console Output 日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T10:17:45.867

将此行写入邮件的“默认内容”：

解析控制台输出链接：${BUILD_URL}parsed_console/

# java - jsp中usebean类属性的值无效

> ID：14106607
> 
> 赞同：0
> 
> 时间：2012-12-31T22:43:24.463
> 
> 标签：java, jsp, usebean

我通过stackoverflow搜索了这个错误，所有与此相关的答案似乎都不适用于我的情况（或者我可能忽略了这些答案中的某些内容）。无论如何，我是一个自学成才的 Java 新手，所以任何帮助都将不胜感激。

Tomcat 中的类路径是“/webapps/ROOT/WEB-INF/classes/VidCollPkg/feedData.class”。我的 jsp 文件位于“webapps/appletv”中。

以下是错误日志的摘录：

```
Dec 31, 2012 12:41:48 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/appletv] threw      exception [/select.jsp (line: 11, column: 0) The value for the useBean class attribute   vidCollPkg.feedData is invalid.] with root cause
org.apache.jasper.JasperException: /select.jsp (line: 11, column: 0) The value for the   useBean class attribute vidCollPkg.feedData is invalid. 
```

这是类文件的代码（编译成功）：

```
package vidCollPkg;

import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

public class feedData {

    java.sql.Connection con;

    public feedData() throws ClassNotFoundException, InstantiationException,  IllegalAccessException, SQLException {

        Class.forName("com.mysql.jdbc.Driver").newInstance();

        con = DriverManager.getConnection("jdbc:mysql://localhost/VideoDB? user=usr&password=pwd");

    }

    public ArrayList<String> getUnis() throws SQLException {
        ArrayList<String> vidList = new ArrayList<String>();
        String tryquery = "SELECT title FROM videoDB.vidtb ORDER BY title";
        java.sql.Statement stmt2 = con.createStatement();
        ResultSet rs1 = stmt2.executeQuery(tryquery);

        while (rs1.next()) {

            vidList.add(rs1.getString("title"));

        }

        return vidList;
    }

 } 
```

这是我的jsp文件的代码：

```
<%@ page contentType="text/html; charset=UTF-8" language="java" import="java.sql.*"  errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Rate video</title>
</head>

<body>
<jsp:useBean id="obj" scope="page" class="vidCollPkg.feedData" />
<h1 align="center">RATE VIDEO</h1> <br>

<form name="frm" action="updateRecord.jsp">
Title: <select name="title">
       <c:forEach var="title" items="${obj.vids}">
       <option value="${title}">${title}</option>
       </c:forEach>
       </select><br>
Date Viewed: <input type="text" name="sDateVwd"><br>
Rating: <input type="text" name="rating"><br>
Comments: <br /><textarea name="comments" cols="40" rows="6"></textarea><br>
<input type="submit" value="Rate Video"><br />
<input type="reset" value="Reset" />
</form>
</body>
</html> 
```

我有一种感觉，我忽略了一些简单的事情。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:24:19.943

将 vidCollPkg 添加到 jsp 中页面标记的导入部分，并将 jsp:useBean 类更改为“feedData”。

# video - 用于存档视频的视频格式

> ID：14106612
> 
> 赞同：1
> 
> 时间：2012-12-31T22:44:59.287
> 
> 标签：video, compression, format, h.264, mpeg

我希望你在新的一年里有一个好的开始，这些年来，已经收集了几部电影。所有的格式都不同，而且很多都非常大。我将主要节省空间。如果有些质量下降也不错。有些视频应该是旋转的。我需要一种多年来也受支持的格式。它必须只能在 PC 上播放。我不需要兼容 DVD 播放器和手机。音频质量可能对所有人都是统一的。手动使用 avidemux 没问题，我会浏览很多视频来命名它们。我通过命令行使用 ffmpeg 没有问题。我只是不知道格式的选择（容器、视频、音频）。

这是混乱的快速概述。谢谢你的帮助。

我认为这可能是最佳的：视频：MPEG-4 AVC 音频：AAC (Faac) 格式：MP4

有点长：{MPEG-4 Video (XVID) 768x576 fps:25 Planar 4:2:0 YUV MPEG Audio layer 1/2/3 (mpga) Stereo 44100 Hz 128 kb/s}

一些旧的：{MPEG-4 Videos (DX50) 176x144 fps 10 Planar 4:2:0 YUV MPEG Audio layer 1/2/3 (mpga) mono 44100Hz 128 kb/s}

一些来自相机：{Motion JPEG Video (MJPG) 640x480 30.000300 fps Planar 4:2:2 YUV full scale PCM S16 LE (arar) mono 8000 Hz 16bits/sample}

只有一种质量差：{MPEG-1/2 Video (mpgv) 720x480 59.940060 fps Planar 4:2:0 YUV MPEG Audio layer 1/2/3 (mpga) Stereo 44100 Hz 128kb/s}

许多来自相机：{Motion JPEG Video (MJPG) 640x480 29.970030 fps Planar 4:2:2 YUV full scale PCM MU-LAW (mlaw) mono 11025 Hz 8 bits per sample}

许多来自手机：{MPEG-4 Video (DX50) 176x144 10fps Planar 4:2:0 YUV MPEG Audio Layer 1/2/3 (mpga) mono 44100Hz 128kb/s}

许多来自相机：{JPEG Video (MJPG) 1280x720 29.969730 fps Planar 4:2:2 YUV full scale IMA WAV APPCM Audio (ms) mono 44100 Hz 16 bits per sample}

许多来自手机：{MPEG-4 Video (mp4v) 320x240 27.857868 fps Planar 4:2:0 YUV MPEG AAC Audio (mp4a) Stereo 3200Hz}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:16:33.137

“我认为这可能是最佳的：视频：MPEG-4 AVC 音频：AAC (Faac) 格式：MP4”——正确，我也这么认为。AVC 解码现在在每个 gpu（nvidia、amd、intel）、每个 Bluray 播放器和每个 ios/android 设备中（当然还有 ffmpeg 中的开源支持），这意味着今天几乎所有的多媒体设备。AAC 同样是 iTunes 和几乎所有设备的标准。MP4（或其 3GP/mov 变体）可能是除 MPEG2 传输流之外最广泛支持的容器。所以这是一个很好的组合:)

魔鬼在于 AVC 设置的细节。为了获得最广泛的兼容性，请使用 Main（或可能是 Baseline）配置文件，即与您的分辨率/fps 匹配的最低级别，1 参考帧，无 B 帧。这应该与任何传统设备兼容（只要它们能够处理分辨率）并且在未来很多年都可以理解。

视频存档图书馆世界的答案是不同的：它们似乎在 MJPEG2000 和 MXF 上融合。

见：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

[iPhone 支持的视频文件格式](https://stackoverflow.com/questions/1535836/video-file-formats-supported-in-iphone)

[http://www.archives.gov/records-mgmt/initiatives/dav-faq.html](http://www.archives.gov/records-mgmt/initiatives/dav-faq.html)

[http://www.digitalpreservation.gov/formats/content/video_preferences.shtml](http://www.digitalpreservation.gov/formats/content/video_preferences.shtml)

[http://cool.conservation-us.org/bytopic/video/](http://cool.conservation-us.org/bytopic/video/)

# ruby-on-rails-3 - Rails FactoryGirl Duplicated Factory

> ID：14106613
> 
> 赞同：2
> 
> 时间：2012-12-31T22:45:24.833
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我的 factory.rb 文件中定义了以下工厂：

```
require 'factory_girl'

FactoryGirl.define do
    sequence(:email) {|n| "person-#{n}@example.com" }

    factory :country do
        ...
    end
    factory :state do
        country
        ...
    end
    factory :school do
        name "Test School"
        country
        state
    end
    factory :user do
        school
        email
        ... 
    end
end 
```

当在 rspec 中调用`FactoryGirl.create(:school)`我的描述符之一进行测试时，会创建两所名为“Test School”的学校。

我认为 factory.rb 中定义的工厂只是一堆未保存的实例对象，有人可以澄清我为什么会遇到这个问题吗？

这是确切的rspec：

```
require 'spec_helper'
describe "school login" do
  it "displays a success message upon successful login to school",do  
    school = FactoryGirl.create(:school)
    user = FactoryGirl.create(:user, :username => "jdoe")
    School.all.each do |school|
      puts school.name #2x => "Test School"
    end
    visit school_path(user.school)
    click_link('login')
    fill_in "username", :with => "jdoe"
    fill_in "password", :with => "secret"
    click_button "Sign in"
    expect(page).to have_selector(".alert-success")
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:39:22.390

这条线创建了第一所学校

```
school = FactoryGirl.create(:school) 
```

这是第二个：

```
user = FactoryGirl.create(:user, :username => "jdoe") 
```

发生这种情况是因为在您的用户工厂中，您定义了每个用户都应该拥有一所学校，因此 FactoryGirl 正在为您创建它。如果您希望您的用户与第一所学校相关联，您可以执行以下操作：

```
user = FactoryGirl.create(:user, :username => "jdoe", :school => school) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:54:59.800

上下文代码是什么？你是怎么发现有2个`schools`创建的？

`create(:object)`在您声明或之前，用 ruby​​ 文件（工厂）编写的代码既不会保存到数据库中，也不会创建为对象`build(:object)`。

```
# Returns a User instance that's not saved
user = FactoryGirl.build(:user)

# Returns a saved User instance
user = FactoryGirl.create(:user) 
```

有关更多详细信息，请参阅：[https ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories)

# c - 从 cuda 内核打印

> ID：14106615
> 
> 赞同：12
> 
> 时间：2012-12-31T22:45:37.820
> 
> 标签：c, visual-studio-2010, cuda, gpgpu

我正在编写一个 cuda 程序并尝试使用 printf 函数在 cuda 内核中打印一些东西。但是当我编译程序时，我得到了一个错误

```
error : calling a host function("printf") from a __device__/__global__ function("agent_movement_top") is not allowed

 error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2008 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin" -I"C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include"  -G  --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g    -Xcompiler "/EHsc /nologo /Od /Zi  /MDd  " -o "Debug\test.cu.obj" "C:\Users\umdutta\Desktop\SANKHA_ALL_MATERIALS\PROGRAMMING_FOLDER\ABM_MODELLING_2D_3D\TRY_NUM_2\test_proj_test\test_proj\test_proj\test.cu"" exited with code 2. 
```

我正在使用计算能力大于 2.0 的卡 GTX 560 ti，当我搜索了一些关于从 cuda 内核打印的信息时，我还发现我需要将编译器从 sm_10 更改为 sm_2.0 以充分利用卡片。也有人建议 cuPrintf 达到目的。我有点困惑我应该做什么以及在我的控制台屏幕上获取打印输出的最简单和最快的方法应该是什么。如果我需要将 nvcc 编译器从 1.0 更改为 2.0，我该怎么办？还有一件事我想提一下，我正在使用 Windows 7.0 并在 Visual Studio 2010 中编程。感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T23:24:49.337

您可以编写此代码以从 CUDA 内核中打印您想要的任何内容：

```
# if __CUDA_ARCH__>=200
    printf("%d \n", tid);

#endif 
```

并包含 <stdio.h>

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T01:16:12.487

要在 Compute Capability >= 2.0 的设备上使用 plain `printf()`，重要的是编译 CC 至少为 CC 2.0 并禁用默认值，其中包括 CC 1.0 的构建。

右键单击`.cu`项目中的文件，选择`Properties`，选择`Configuration Properties`| `CUDA C/C++`| `Device`. 单击`Code Generation`线，单击三角形，选择`Edit`。在 Code Generation 对话框中，取消选中，在顶部窗口中`Inherit from parent or project defaults`键入，单击 OK。`compute_20,sm_20`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-31T23:40:45.080

解决此问题的一种方法是使用能够从内核打印的 cuPrintf 函数。复制文件`cuPrintf.cu`并`cuPrintf.cuh`从文件夹中复制

```
C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\src\simplePrintf 
```

到项目文件夹。然后将头文件添加`cuPrintf.cuh`到您的项目中并添加

```
#include "cuPrintf.cu" 
```

到你的代码。那么你的代码应该以下面提到的格式编写：

```
#include "cuPrintf.cu"
__global__ void testKernel(int val)
{
  cuPrintf("Value is: %d\n", val);
}

int main()
{
  cudaPrintfInit();
  testKernel<<< 2, 3 >>>(10);
  cudaPrintfDisplay(stdout, true);
  cudaPrintfEnd();
  return 0;
} 
```

按照上述步骤，可以从设备功能在控制台窗口上打印。虽然我以上述方式解决了我的问题，但我仍然没有`printf`从设备功能中使用的解决方案。如果确实并且绝对有必要将我的 nvcc 编译器从 sm_10 升级到 sm_21 以启用该`printf`功能，那么如果有人可以向我展示这将非常有帮助。感谢大家的合作

# html - 使用 HTML5 输入模式匹配字符串但不匹配空格

> ID：14106616
> 
> 赞同：4
> 
> 时间：2012-12-31T22:46:08.507
> 
> 标签：html, validation

我`pattern`在 an 中使用 HTML5 属性`<input>`来返回特定字符串的匹配项：`'felfogtam'`

我当前的标记是：

```
<input type="text" class="input input-small" pattern="felfogtam"> 
```

它确实有效，但如果字段为空，输入仍然有效。如何更改正则表达式以不允许空白字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T22:51:39.750

添加[`required`](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-required-attribute)属性

```
<input type="text" class="input input-small" pattern="felfogtam" required> 
```

[http://jsfiddle.net/bJU2D/](http://jsfiddle.net/bJU2D/)

# c# - 将委托传递给非托管方法，该方法需要具有 int 数组指针的委托方法

> ID：14106619
> 
> 赞同：3
> 
> 时间：2012-12-31T22:47:34.383
> 
> 标签：c#, delegates, callback, marshalling, dllimport

我正在开发一个使用非托管 dll 的 C# 应用程序，该 dll 作为一种将函数指针作为其参数之一的方法。由于我无法访问非托管 dll 的实际 C++ 源代码，因此我只能依赖我从使用相同 dll 的 C++ 示例中获得的片段。我遇到的问题是我传递给非托管方法的委托不起作用。

下面是我尝试使用的方法的 DllImport，它采用我创建的委托：

```
[DllImport("pos_tk.dll")]
static internal extern ErrorCode AddSIGHandle([MarshalAs(UnmanagedType.FunctionPtr)] SIG_Callback func); 
```

这是我目前拥有的代表签名：

```
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
public delegate void SIG_Callback ([MarshalAs(UnmanagedType.LPArray)] ref int[] buf, int rev, object sender); 
```

这是 C++ 示例片段使用的函数，我的委托是在其中使用的：

```
void __stdcall point_handle (int *buf, int rev, LPVOID pParam) 
```

现在，在您告诉我将`ref int[] buf`委托的参数更改`ref int buf`为程序之前，一旦尝试回调，就会抛出 InvalidVariant 错误。代码片段`int *buf`用作 size 的数组`rev`。

使用我上面的代码，应用程序在尝试回调时抛出 AccessViolationException。我的预感是我应该为`ref int[] buf`参数使用不同的类型，但我已经尝试了我能想到的一切。我也整天搜索 Google、SO 和 MSDN，但没有运气。

有人有想法么？

最后一点，这是否类似于如何将 a`StringBuilder`用作非托管方法的参数，该方法采用`char*`参数来检索可变长度的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T23:05:01.547

来回传递数组总是一个 PITA ......试试这个签名，它似乎适用：

```
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
public delegate void point_handle(
    [MarshalAs(UnmanagedType.LPArray, SizeParamIndex=1)]
    int[] buf,
    int rev,
    IntPtr pParam); 
```

编辑：只是为了详细说明，当你有一个“C 风格”数组（即 T*）以及参数中指定的长度时，SizeParamIndex 是你的救星；基本上它说“嘿，有一个未知长度的数组进来，但是这个索引处的参数会告诉你有多少个。使用它和类型来帮助编组”

# java - 带有 indexOf 的 Java StringBuilder

> ID：14106622
> 
> 赞同：2
> 
> 时间：2012-12-31T22:48:17.523
> 
> 标签：java, stringbuilder, indexof

我正在用 Java 编写一个传统的刽子手游戏。我目前坚持的是查找用户输入的字符是否不是`String`.

```
if(getLetters.indexOf(userCharInput)==-1) //getLetters is the StringBuilder, and the userCharInput is a String.
{
     playerCounter++;
} 
```

这是我似乎遇到麻烦的部分，我查看了不同的`indexOf`示例，并将其制定为与我的程序一起使用。

问题是，它不起作用。我将它设置为让玩家有 3 次猜测单词的机会，因为默认单词是“apple”，我猜的是 'a'、'p' 和 'l'，剩下的 'e' 有待猜测。现在我故意做出 3 个错误的猜测，但它不会触发下一个`else if`：

```
else if(playerCounter == 3)
{
    System.out.println("All lives are gone! Game Over!");
    playerCounter = 1; //resets the playerCounter to one.
    System.exit(0);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:58:41.143

这是因为当你不断猜错字母时，第一个`if`语句被评估为真：

```
if(getLetters.indexOf(userCharInput)==-1) //getLetters is the StringBuilder, and the userCharInput is a String.
{
     playerCounter++;
} 
```

So you keep increasing playerCounter (beyond 3). This means that your next statement is unreachable (once it's greater than 3, it's not going to get any smaller, at least with the code you have posted so far). So `else if (playerCounter == 3)` may not be reachable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:52:33.970

我猜你`else if`是另一个 if 语句的一部分，它正在变得真实，所以检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T02:53:17.523

The reason it was not working was because of the `indexOf` method being used improperly,it was partially because of the ordering of the if statements, but that was very miniscule to the primary issue. What had to be changed was the way I used the `indexOf` method.

ie. instead of `gletter.indexOf(character);` it should have been `word.indexOf(character);` where `word` was the word that had to be guessed, and `gletter` was the `StringBuilder` used to keep track of user guesses.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-31T22:56:16.053

这是 StringBuilder 的 Javadoc：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

根据您发布的代码，我猜：

1) 您将所需的字母（例如单词“apple”中的字母）保存到 getLetters。

2) getLetters 是 StringBuilder 类型

3) 如果 userCharInput 是“char”类型，那么 indexOf() 可能*不会*给出预期的结果

4) 用“if”代替“else if”

建议：

尝试将“getLetters”更改为“String”，看看是否有帮助。

```
while (...) {
  ...
  //getLetters is the StringBuilder, and the userCharInput is a String.
  if(getLetters.indexOf(userCharInput)==-1)  {
     playerCounter++;
  }
  // Debug: comment this out once it's working
  System.out.println ("userCharInput=" + userCharInput + ", playerCounter=" + playerCounter);
  if(playerCounter == 3) {
    System.out.println("All lives are gone! Game Over!");
    playerCounter = 1; //resets the playerCounter to one.
    System.exit(0);
  }
  ...
} 
```

# php - 在表单中结合 Validation (js)、submit (php) 和 modal (bootstrap)

> ID：14106624
> 
> 赞同：0
> 
> 时间：2012-12-31T22:48:31.993
> 
> 标签：php, javascript, jquery, validation, twitter-bootstrap

我正在使用 Bootstrap 创建一个简单的联系表单，并希望在按下“提交”按钮时实现以下目标：

*   使用 jQuery 验证表单字段
*   如果验证通过，则提交表单，使用 PHP 作为处理器
*   在 Bootstrap 模式对话框中显示一条消息，说明表单已通过电子邮件发送

知道我的 PHP 和 JS 知识低于平均水平，我很高兴地说我已经能够让所有项目单独工作，但我无法将它们组合在一起......

你能给我一些意见吗？

验证用途：

```
var validator = $("#contact").validate({
  ... 
```

PHP 使用：

```
mail() 
```

使用这样的按钮提交表单时，两者都有效：

```
<button type="submit" name="submit" id="submitButton" class="btn btn-bcome pull-right">Send</button> 
```

为了激活对话框，我将按钮更改为：

```
<button href="#submit" role="button" button type="submit" name="submit" id="submitButton" class="btn btn-bcome pull-right" data-toggle="modal">Send</button> 
```

这使得模态正确显示，但不会发生验证和提交。

我找到了一个相关的帖子： [出现在表单提交上的 jQuery Modal](https://stackoverflow.com/questions/5361873/jquery-modal-that-appears-on-form-submit)。但是我不知道要专门针对我的情况进行调整。

* * *

我试图调整你告诉我的内容，这就是我得到的：Html 部分：

```
button href="#submit" role="button" button type="submit" name="submit" id="submitButton" class="btn btn-bcome pull-right" data-toggle="modal">Envoyer</button> 
```

和

```
<div id="submit" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Thanks for your mail</h3>
      </div>
      <div class="modal-body">
        <p>We will get back to you soon</p>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      </div>
    </div> 
```

在我的 JS 文件中：

```
var $validator = {};

$(document).ready(function()
{
    // validate signup form on keyup and submit
    var validator = $("#contact").validate({
       submitHandler: function(form)
        {
            //code to submit your form here
            //code to open your modal here
        errorClass:'error',
        validClass:'success',
        errorElement:'span',
        highlight: function (element, errorClass, validClass) { 
            $(element).parents("div[class='clearfix']").addClass(errorClass).removeClass(validClass);
        }, 
        unhighlight: function (element, errorClass, validClass) { 
            $(element).parents(".error").removeClass(errorClass).addClass(validClass); 
        },
        rules: {
            fname: {
                required: true,
                minlength: 2
            },
            name: {
                required: true,
                minlength: 2
            },
            email: {
                required: true,
                email: true
            },
            message: {
                required: true,
                minlength: 10
            }
        },
        messages: {
            fname: {
                required: '<span class="help-inline">First name.</span>',
                minlength: jQuery.format('<span class="help-inline">2 chars</span>')
            },
            name: {
                required: '<span class="help-inline">Name.</span>',
                minlength: jQuery.format('<span class="help-inline">2 chars</span>')
            },
            email: {
                required: '<span class="help-inline">Email.</span>',
                email: '<span class="help-inline">Ex : name@exemple.com</span>'
            },
            message: {
                required: '<span class="help-block">Message</span>',
                minlength: jQuery.format('<span class="help-block">10 chars</span>')

        $('form').submit(function() {
            if ($validator.numberOfInvalids() > 0) {
                $('#submit').modal('hide');
            } else {
                $('#submit').modal('show');
            }
        }
    });
}
); 
```

我肯定遗漏了一些东西，但目前，只有模式部分被执行，而不是验证部分或提交表单部分。

知道我应该怎么做才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:20:50.533

如果您使用的是 bassastance 的 jquery 验证插件，那么您正在寻找 submitHandler 选项，该选项在此处定义：http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

```
$(document).ready(function()
    {
        // validate signup form on keyup and submit
        var validator = $("#contact").validate({
           submitHandler: function(form)
            {
                //code to submit your form here
                //code to open your modal here
            }
        });
    }
); 
```

更新：我正在根据 Fred 提供的进一步代码更新此答案。

Javascript：

```
var $validator; //declared for further use later

$(document).ready(function()
{
    // validate signup form on keyup and submit
    $validator = $("#contact").validate({
        errorClass:'error',
        validClass:'success',
        errorElement:'span',
        highlight: function (element, errorClass, validClass) { 
            $(element).parents("div[class='clearfix']").addClass(errorClass).removeClass(validClass);
        }, 
        unhighlight: function (element, errorClass, validClass) { 
            $(element).parents(".error").removeClass(errorClass).addClass(validClass); 
        },
        rules: {
            fname: {
                required: true,
                minlength: 2
            },
            name: {
                required: true,
                minlength: 2
            },
            email: {
                required: true,
                email: true
            },
            message: {
                required: true,
                minlength: 10
            }
        },
        messages: {
            fname: {
                required: '<span class="help-inline">First name.</span>',
                minlength: jQuery.format('<span class="help-inline">2 chars</span>')
            },
            name: {
                required: '<span class="help-inline">Name.</span>',
                minlength: jQuery.format('<span class="help-inline">2 chars</span>')
            },
            email: {
                required: '<span class="help-inline">Email.</span>',
                email: '<span class="help-inline">Ex : name@exemple.com</span>'
            },
            message: {
                required: '<span class="help-block">Message</span>',
                minlength: jQuery.format('<span class="help-block">10 chars</span>')
            }
        },
        submitHandler: function(form) //submitHandler is an option taken by the validate function
        {
            //i put your submission code in here

            $('form').submit(function() {
                if ($validator.numberOfInvalids() > 0) 
                {
                    $('#submit').modal('hide');
                } else 
                {
                    $('#submit').modal('show');
                }
            });
        }
    });
}); 
```

# php - 如何使用 Xdebug 分析单个 php 文件？

> ID：14106628
> 
> 赞同：4
> 
> 时间：2012-12-31T22:49:48.093
> 
> 标签：php, profiling, xdebug

我想使用 Xdebug 来分析单个 php 文件。从[Xdebug 文档](http://xdebug.org/docs/profiler)中，据说

> 通过在 php.ini 中将 xdebug.profiler_enable 设置为 1 来启用分析。这指示 Xdebug 开始将分析信息写入使用 xdebug.profiler_output_dir 指令配置的转储目录。

我试过了，但 Xdebug 会生成很多配置文件日志。我没有测试环境，只能使用生产服务器。我想知道有没有办法设置只测试一页？

有什么建议吗？

**---2013 年 2 月 11 日更新---------------------------**

最后我选择[facebook / xhprof](https://github.com/facebook/xhprof)作为我的生产服务器分析器。我现在每天都使用 xhprof_html。它节省了大量时间并且非常易于使用，尤其是 Full Callgraph 视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:53:36.077

使用触发器[http://xdebug.org/docs/all_settings#profiler_enable_trigger](http://xdebug.org/docs/all_settings#profiler_enable_trigger)并将其添加到您的 url。即[http://example.com/mypage.php?XDEBUG_PROFILE=1](http://example.com/mypage.php?XDEBUG_PROFILE=1)

此外，在对生产进行分析时，XHProf 优于 XDebug：[https ://github.com/facebook/xhprof](https://github.com/facebook/xhprof)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T22:53:51.463

xdebug 配置中还有另一个选项可以执行此操作：`xdebug.profiler_enable_trigger`. 将其设置为 1，然后使用查询字符串后缀打开要分析的 URL `?XDEBUG_PROFILE`。然后它将仅为该脚本编写日志。

# cmake - 如何通过 CMake 制作使用没有 apt-get 选项的库的可部署软件

> ID：14106630
> 
> 赞同：1
> 
> 时间：2012-12-31T22:50:34.857
> 
> 标签：cmake, static-libraries, static-linking

我写了一个在我自己的盒子上运行良好的软件。不过，把它放到另一个盒子上是一件令人头疼的事情。

主要问题是它使用的库不是 apt-get 涵盖的库；它被称为 pngwriter。而且pngwriter也很挑剔，也不是很容易安装。它还存在版本兼容性问题。为了解决所有这些问题，我认为将 pngwriter 的源代码包含在我的项目中会很棒，并让 CMake 继续使用其余代码制作 pngwriter。

所以我的主要问题是：这种类型的部署规范吗？CMake 应该调用软件开发人员已经编写的 makefile，然后`FIND_PACKAGE`在本地使用，还是我需要重写他们的所有 makefile 以便我可以使用`ADD_LIBRARY`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:46:58.113

我建议使用该[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aExternalProject)功能。

文档还可以，但是有一篇[不错的文章](http://www.kitware.com/media/html/BuildingExternalProjectsWithCMake2.8.html)更详细地解释了一些事情。从这篇文章：

> 该`ExternalProject_Add`功能可以说“从互联网上下载这个项目，运行它的配置步骤，构建它并安装它”</p>

请记住，您可以完全跳过安装步骤，或者您可以选择安装到您自己的构建目录中的某个位置。

# entity-framework-5 - DbContext.SaveChanges() 在循环中导致 DbUpdateException

> ID：14106634
> 
> 赞同：0
> 
> 时间：2012-12-31T22:52:39.010
> 
> 标签：entity-framework-5, foreign-key-relationship, dbcontext, savechanges

我有一个创建负责插入标题/详细信息记录的对象的过程。如果我运行代码自行插入到表中，那么一切都运行良好。但是，当我在循环中将该代码作为单独的类调用时，会出现异常：

> System.Data.Entity.Infrastructure.DbUpdateException 未处理
> Message=INSERT 语句与 FOREIGN KEY 约束“FK_CAS_ClaimsAdjustment_Header835”冲突。冲突发生在数据库“ERA835DB”、表“dbo.Header835”、列“TRANSACTIONID”中。

表中的`TRANSACTIONID`Column`Header`设置为`Identity=True`。子表`CAS_ClaimsAdjustment`有一个`TransactionID`FK to列`Header.TransactionID`。

为什么`DBContext.SaveChanges()`根据调用相同代码的方式似乎表现不同？

```
 foreach (var file in Files)
  { 
          Parser parser = new Parser();
          parser.HandleFile(file);
  }

public class Parser
{

  public void HandleFile(string file)
  {
      using (Model.DbContext dbcontext)
    {
        foreach (var itemn in file)
        {
           Claims claim = new Claims();

            // ...

           dbcontext.Claims.Add(claim);
        }

        dbcontext.SaveChanges();

    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:52:09.957

我解决了我的问题。在我的控制台应用程序中，我将我的实体声明为“静态”。当然，这没有用。一旦我删除了 static 关键字，一切都很好。

# r - 在由多列定义的类别中粘贴值

> ID：14106649
> 
> 赞同：0
> 
> 时间：2012-12-31T22:56:19.663
> 
> 标签：r, aggregate, reshape2

我想`result`在`df`水平方向创建一个数据集，为每个 `region`, `state`,组合单独的行创建一个数据集，`county`其中列被排序。`year``city`

我还想通过 标识新数据集中的每一行`region`，`state`并删除四列`county`之间的空白。`results`下面的代码完成了所有这些，但我怀疑它不是很有效。

有没有一种方法可以做到这一点，`reshape2`而无需为每个组创建唯一标识符并对每个组内的观察进行编号？有没有办法使用 apply 代替 for 循环从矩阵中删除空格？（此处使用矩阵的方式与数学或编程构造不同。）我意识到这是两个独立的问题，也许我应该分别发布每个问题。

鉴于我可以达到预期的结果并且只想改进代码，我不知道我是否应该发布这个，但我希望学习。感谢您的任何建议。

```
df <- read.table(text= "
region   state    county city  year result
1          1        1      1     1     1
1          1        1      2     1     2
1          1        1      1     2     3
1          1        1      2     2     4
1          1        2      3     1     4
1          1        2      4     1     3
1          1        2      3     2     2
1          1        2      4     2     1
1          2        1      1     1     0
1          2        1      2     1    NA
1          2        1      1     2     0
1          2        1      2     2     0
1          2        2      3     1     2
1          2        2      4     1     2
1          2        2      3     2     2
1          2        2      4     2     2
2          1        1      1     1     9
2          1        1      2     1     9
2          1        1      1     2     8
2          1        1      2     2     8
2          1        2      3     1     1
2          1        2      4     1     0
2          1        2      3     2     1
2          1        2      4     2     0
2          2        1      1     1     2
2          2        1      2     1     4
2          2        1      1     2     6
2          2        1      2     2     8
2          2        2      3     1     3
2          2        2      4     1     3
2          2        2      3     2     2
2          2        2      4     2     2
", header=TRUE, na.strings=NA)

desired.result <- read.table(text= "
region   state    county results
1          1        1     1234
1          1        2     4321
1          2        1     0.00
1          2        2     2222
2          1        1     9988
2          1        2     1010
2          2        1     2468
2          2        2     3322
", header=TRUE, colClasses=c('numeric','numeric','numeric','character'))

# redefine variables for package reshape2 creating a unique id for each
# region, state, county combination and then number observations in
# each of those combinations

library(reshape2)

id.var <- df$region*100000 + df$state*1000 + df$county
obsnum <- sequence(rle(id.var)$lengths)

df2 <- dcast(df, region + state + county ~ obsnum, value.var = "result")

# remove spaces between columns of results matrix
# with a for-loop.  How can I use apply to do this?

x <- df2[,4:(4+max(obsnum)-1)]

# use a dot to represent a missing observation

x[is.na(x)] = '.'

x.cat = numeric(nrow(x))

for(i in 1:nrow(x)) {
  x.cat[i] = paste(x[i,], collapse="")
}

df3 <- cbind(df2[,1:3],x.cat)
colnames(df3) <- c("region", "state", "county", "results")
df3

df3 == desired.result 
```

编辑：

Matthew Lundberg 下面的回答非常好。后来我意识到我还需要创建一个输出数据集，其中上面的四个结果列包含数字、有理数并用空格分隔。因此，我在下面发布了一种明显的方法来修改马修的答案。我不知道这是否是公认的协议，但新场景似乎与原始帖子直接相关，以至于我认为我不应该发布新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:09:25.307

我认为这可以满足您的要求：

```
df$result <- as.character(df$result)
df$result[is.na(df$result)] <- '.'

aggregate(result ~ county+state+region, data=df, paste0, collapse='')

  county state region result
1      1     1      1   1234
2      2     1      1   4321
3      1     2      1   0.00
4      2     2      1   2222
5      1     1      2   9988
6      2     1      2   1010
7      1     2      2   2468
8      2     2      2   3322 
```

这取决于您的数据框以正确的顺序（如您的顺序）排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:01:42.577

马修·伦德伯格的回答非常好。后来我意识到我还需要创建一个输出数据集，其中上面的四个结果列包含数字、有理数并用空格分隔。因此，在这里，我提供了一种明显的方法来使用 Matthew 的答案的修改来做到这一点。我不知道这是否是公认的协议，但新场景似乎与原始帖子直接相关，以至于我认为我不应该发布新问题。

前两行是对马修答案的修改。

```
df$result[is.na(df$result)] <- 'NA'
df2 <- aggregate(result ~ county+state+region, data=df, paste) 
```

然后我指定`NA`表示缺失的观察值并用于`apply`获取数字输出。

```
df2$result[df2$result=='NA'] = NA
new.df <- data.frame(df2[,1:3], apply(df2$result,2,as.numeric)) 
```

输出如下，但请注意我`df`在原始帖子中显示的每个值上添加了 0.5。

```
 county state region  X1  X2  X3  X4
     1     1      1   1.5 2.5 3.5 4.5
     2     1      1   4.5 3.5 2.5 1.5
     1     2      1   0.5  NA 0.5 0.5
     2     2      1   2.5 2.5 2.5 2.5
     1     1      2   9.5 9.5 8.5 8.5
     2     1      2   1.5 0.5 1.5 0.5
     1     2      2   2.5 4.5 6.5 8.5
     2     2      2   3.5 3.5 2.5 2.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:06:21.883

在我原来的帖子中，我询问了如何使用`apply`. 由于 Matthew Lundberg 对我更大问题的回答，这并没有被证明是必要的。尽管如此，删除数据集列之间的空格是我经常要做的事情。为了完整起见，我在这里发布了一种使用方法`paste0`，`apply`部分来自马修的回答。

要从数据集中删除所有空格`x`：

```
x <- read.table(text= "
A    B    C    D
1    1    1    1
1    1    2    2
1   NA    1    3
1    1    2    4
1    2    1    5
1    2   NA    6
1    2    1    7
1    2    2    8
", header=TRUE, na.strings=NA)

# use a dot to represent a missing observation

x[is.na(x)] = '.'

y <- as.data.frame(apply(x, 1, function(i) paste0(i, collapse='')))
colnames(y) <- 'result'
y 
```

给出：

```
 result
1   1111
2   1122
3   1.13
4   1124
5   1215
6   12.6
7   1217
8   1228 
```

以下代码仅删除第二列和第三列之间的空格：

```
z <- as.data.frame(apply(x[,2:3], 1, function(i) paste0(i, collapse='')))

y <- data.frame(x[,1], z, x[,4])
colnames(y) <- c('A','BC','D')
y 
```

给予：

```
 A BC D
1 1 11 1
2 1 12 2
3 1 .1 3
4 1 12 4
5 1 21 5
6 1 2\. 6
7 1 21 7
8 1 22 8 
```

# javascript - 基于单击另一个 div 的 JQuery 切换元素

> ID：14106651
> 
> 赞同：2
> 
> 时间：2012-12-31T22:57:08.890
> 
> 标签：javascript, jquery, twitter-bootstrap

我有我想要工作的开始，但恐怕我的思路并没有走上一条干燥的道路。

现在，如果您单击下面的任何 div，它将在下面的所有标题旁边隐藏或显示一个图标复选标记。

我只想在单击特定 div 时将图标复选标记显示到页面下方的相关标题。

我应该在我的方法中使用什么方法？我拥有它的方式在未来似乎没有意义。感谢您的关注，感谢您的关注。

```
<div class="row container">
  <div class="row offset1">
    <div class="span3 frustrate_topside">  
      <div>
        <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
      </div>
    </div>
    <div class="span3 frustrate_topside">
        <div>
          <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
        </div>
    </div>
    <div class="span3 frustrate_topside">
      <div>
        <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
      </div>
    </div>
  </div>
</div>

<div class="offset2 span6" id='container'>
  <h5 class="faq_header"><i class="icon-ok"></i> Hey, it would be cool if..</h5>  
  <div class='content'>trouble</div>
  <hr>
  <h5 class="faq_header"><i class="icon-ok"></i> The kick is up! And..</h5>
  <div class='content'> 80% completion rate.</div>
  <hr>
  <h5 class="faq_header"><i class="icon-ok"></i> Third anecdote</h5>
  <div class='content'>joke on me</div> 
</div>

<script>  
$('div.frustrate_topside').click(function(){
  $('i').toggle();
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:57:37.767

这是你所要求的一个有效的 JS 小提琴：http: [//jsfiddle.net/sTve6/1/](http://jsfiddle.net/sTve6/1/) 我没有用图标/图像设置你的文件，所以我使用了占位符文本 'o'每个图标，并假设您的图标开始隐藏。

HTML：

```
<div class="row container">
  <div class="row offset1">
    <div class="span3 frustrate_topside" for='q1'>  
      <div>
        <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
      </div>
    </div>
    <div class="span3 frustrate_topside" for='q2'>
        <div>
          <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
        </div>
    </div>
    <div class="span3 frustrate_topside" for='q3'>
      <div>
        <p>Click here to only show icon-ok element next to relevant anecdotes!</p>
      </div>
    </div>
  </div>
</div>

<div class="offset2 span6" id='container'>
  <h5 class="faq_header"><i class="icon-ok" id="q1">o</i> Hey, it would be cool if..</h5>  
  <div class='content'>trouble</div>
  <hr>
  <h5 class="faq_header"><i class="icon-ok" id="q2">o</i> The kick is up! And..</h5>
  <div class='content'> 80% completion rate.</div>
  <hr>
  <h5 class="faq_header"><i class="icon-ok" id="q3">o</i> Third anecdote</h5>
  <div class='content'>joke on me</div> 
</div> 
```

CSS：

```
.icon-ok 
{
 display:none;   
}​    ​ 
```

JS：

```
$('div.frustrate_topside').click(function(){
    var elt = $(this).attr('for');
    $("#" + elt).toggle();
});​ 
```

# c++ - 函数局部静态互斥锁是线程安全的吗？

> ID：14106653
> 
> 赞同：41
> 
> 时间：2012-12-31T22:57:43.360
> 
> 标签：c++, c++11

在以下程序中，我尝试`print`使用函数本地互斥对象使函数线程安全：

```
#include <iostream>
#include <chrono>
#include <mutex>
#include <string>
#include <thread>

void print(const std::string & s)
{    
    // Thread safe?
    static std::mutex mtx;
    std::unique_lock<std::mutex> lock(mtx);
    std::cout <<s << std::endl;
}

int main()
{
    std::thread([&](){ for (int i = 0; i < 10; ++i) print("a" + std::to_string(i)); }).detach();
    std::thread([&](){ for (int i = 0; i < 10; ++i) print("b" + std::to_string(i)); }).detach();
    std::thread([&](){ for (int i = 0; i < 10; ++i) print("c" + std::to_string(i)); }).detach();
    std::thread([&](){ for (int i = 0; i < 10; ++i) print("d" + std::to_string(i)); }).detach();
    std::thread([&](){ for (int i = 0; i < 10; ++i) print("e" + std::to_string(i)); }).detach();
    std::this_thread::sleep_for(std::chrono::milliseconds(100));
} 
```

这安全吗？

我的疑问来自 [这个问题](https://stackoverflow.com/questions/2955921/thread-safe-initialization-of-function-local-static-const-objects)，它提出了一个类似的案例。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-01T02:39:58.173

# C++11

在 C++11 及更高版本中：**是的，这种模式是安全的**。特别是，[函数局部静态变量的初始化是线程安全的](https://stackoverflow.com/q/1661529/149138)，因此您上面的代码可以跨线程安全地工作。

这种在实践中起作用的方式是编译器在函数本身中插入任何必要的样板，以检查变量是否在访问之前被初始化。然而，在,和`std::mutex`中实现的情况下，初始化状态是*全零*，因此不需要显式初始化（​​变量将存在于全零部分，因此初始化是“自由的”），正如我们从[大会](https://godbolt.org/g/9vcSXR)¹：`gcc``clang``icc`*`.bss`*

 *```
inc(int& i):
        mov     eax, OFFSET FLAT:_ZL28__gthrw___pthread_key_createPjPFvPvE
        test    rax, rax
        je      .L2
        push    rbx
        mov     rbx, rdi
        mov     edi, OFFSET FLAT:_ZZ3incRiE3mtx
        call    _ZL26__gthrw_pthread_mutex_lockP15pthread_mutex_t
        test    eax, eax
        jne     .L10
        add     DWORD PTR [rbx], 1
        mov     edi, OFFSET FLAT:_ZZ3incRiE3mtx
        pop     rbx
        jmp     _ZL28__gthrw_pthread_mutex_unlockP15pthread_mutex_t
.L2:
        add     DWORD PTR [rdi], 1
        ret
.L10:
        mov     edi, eax
        call    _ZSt20__throw_system_errori 
```

请注意，从该行开始，`mov edi, OFFSET FLAT:_ZZ3incRiE3mtx`它只是加载`inc::mtx`函数局部静态的地址并对其进行调用`pthread_mutex_lock`，而无需任何初始化。之前处理的代码`pthread_key_create`显然只是检查 pthreads 库[是否存在](https://stackoverflow.com/q/46369679/149138)。

但是，不能保证所有实现都将实现`std::mutex`为全零，因此在某些情况下，您可能会在每次调用时产生持续开销以检查是否`mutex`已初始化。在函数外部声明互斥体可以避免这种情况。

这是一个将这两种方法与具有不可内联构造函数的替代类进行对比的[示例](https://godbolt.org/g/eVhPdV)`mutex2`（因此编译器无法确定初始状态为全零）：

```
#include <mutex>

class mutex2 {
    public:
    mutex2();
    void lock(); 
    void unlock();
 };

void inc_local(int &i)
{    
    // Thread safe?
    static mutex2 mtx;
    std::unique_lock<mutex2> lock(mtx);
    i++;
}

mutex2 g_mtx;

void inc_global(int &i)
{    
    std::unique_lock<mutex2> lock(g_mtx);
    i++;
} 
```

函数本地版本编译（on `gcc`）为：

```
inc_local(int& i):
        push    rbx
        movzx   eax, BYTE PTR _ZGVZ9inc_localRiE3mtx[rip]
        mov     rbx, rdi
        test    al, al
        jne     .L3
        mov     edi, OFFSET FLAT:_ZGVZ9inc_localRiE3mtx
        call    __cxa_guard_acquire
        test    eax, eax
        jne     .L12
.L3:
        mov     edi, OFFSET FLAT:_ZZ9inc_localRiE3mtx
        call    _ZN6mutex24lockEv
        add     DWORD PTR [rbx], 1
        mov     edi, OFFSET FLAT:_ZZ9inc_localRiE3mtx
        pop     rbx
        jmp     _ZN6mutex26unlockEv
.L12:
        mov     edi, OFFSET FLAT:_ZZ9inc_localRiE3mtx
        call    _ZN6mutex2C1Ev
        mov     edi, OFFSET FLAT:_ZGVZ9inc_localRiE3mtx
        call    __cxa_guard_release
        jmp     .L3
        mov     rbx, rax
        mov     edi, OFFSET FLAT:_ZGVZ9inc_localRiE3mtx
        call    __cxa_guard_abort
        mov     rdi, rbx
        call    _Unwind_Resume 
```

`__cxa_guard_*`注意处理函数的大量样板文件。首先，检查相对于 rip 的标志字节`_ZGVZ9inc_localRiE3mtx`²，如果不为零，则变量已经初始化，我们完成并进入快速路径。不需要原子操作，因为在 x86 上，加载已经具有所需的*获取*语义。

如果此检查失败，我们将进入慢速路径，这本质上是一种[双重检查锁定](https://en.wikipedia.org/wiki/Double-checked_locking)形式：初始检查不足以确定变量需要初始化，因为这里可能有两个或多个线程在竞争。该`__cxa_guard_acquire`调用执行锁定和第二次检查，并且可能也进入快速路径（如果另一个线程同时初始化对象），或者可能跳转到实际的初始化代码`.L12`。

最后请注意，程序集中的最后 5 条指令根本无法从函数直接访问，因为它们前面是无条件的`jmp .L3`，并且没有任何东西跳转到它们。`mutex2()`如果对构造函数的调用在某个时候抛出异常，它们就会被异常处理程序跳转到。

总的来说，我们可以说第一次访问初始化的运行时成本是低到中等的，因为快速路径只检查一个字节标志而没有任何昂贵的指令（函数本身的其余部分通常意味着至少两个原子操作`mutex.lock()`和`mutex.unlock()`，但它会显着增加代码大小。

与全局版本相比，它是相同的，只是在全局初始化期间而不是在首次访问之前进行初始化：

```
inc_global(int& i):
    push    rbx
    mov     rbx, rdi
    mov     edi, OFFSET FLAT:g_mtx
    call    _ZN6mutex24lockEv
    add     DWORD PTR [rbx], 1
    mov     edi, OFFSET FLAT:g_mtx
    pop     rbx
    jmp     _ZN6mutex26unlockEv 
```

该函数的大小不到三分之一，根本没有任何初始化样板。

## 在 C++11 之前

然而，在 C++11 之前，这通常是不安全的，除非您的编译器对静态局部变量的初始化方式做出一些特殊保证。

前段时间，在查看类似问题时，我检查了 Visual Studio 为这种情况生成的程序集。为您的`print`方法生成的汇编代码的伪代码如下所示：

```
void print(const std::string & s)
{    
    if (!init_check_print_mtx) {
        init_check_print_mtx = true;
        mtx.mutex();  // call mutex() ctor for mtx
    }

    // ... rest of method
} 
```

这`init_check_print_mtx`是一个编译器生成的特定于该方法的全局变量，它跟踪本地静态是否已被初始化。请注意，在此变量保护的“一次性”初始化块内，该变量在互斥锁初始化之前设置为 true。

我虽然这很愚蠢，因为它确保其他线程竞相进入此方法将跳过初始化程序并使用未初始化的`mtx`- 而不是可能多次初始化的替代方案`mtx`- 但实际上这样做可以避免无限递归问题如果`std::mutex()`要回调打印，则会发生这种情况，而这种行为实际上是标准规定的。

上面的 Nemo 提到，这已在 C++11 中修复（更准确地说，重新指定）要求等待所有赛车线程，这将使其安全，但您需要检查自己的编译器是否合规。我没有检查新规范是否真的包含这个保证，但我一点也不感到惊讶，因为如果没有这个，本地静态在多线程环境中几乎没有用（除了可能没有的原始值）任何检查和设置行为，因为它们只是直接引用 .data 段中已经初始化的位置）。

* * *

¹请注意，我将该`print()`函数更改为一个稍微简单的`inc()`函数，该函数仅在锁定区域中增加一个整数。这具有与原始相同的锁定结构和含义，但避免了一堆代码处理`<<`运算符和`std::cout`.

²使用`c++filt`它可以消除对`guard variable for inc_local(int&)::mtx`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-01T16:08:46.423

由于几个原因，这与链接的问题不同。

链接的问题不是 C++11，但你的问题是。在 C++11 中，函数局部静态变量的初始化始终是安全的。在 C++11 之前，它只对某些编译器是安全的，例如 GCC 和 Clang 默认为线程安全初始化。

链接的问题通过调用函数来初始化引用，这是*动态初始化*并且在运行时发生。默认构造函数`std::mutex`是`constexpr`这样您的静态变量具有*常量初始化*，即互斥锁可以在编译时（或链接时）初始化，因此在运行时无需动态执行任何操作。即使多个线程同时调用该函数，在使用互斥体之前它们实际上也不需要做任何事情。

您的代码是安全的（假设您的编译器正确实现了 C++11 规则。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-31T23:00:31.947

只要互斥锁是静态的，就可以。

本地的、非静态的肯定不安全。除非你的所有线程都使用相同的堆栈，这也意味着你现在已经发明了一个内存，其中一个单元可以同时保存许多不同的值，并且只是在等待诺贝尔委员会通知你下一个诺贝尔奖。

您必须为互斥体提供某种“全局”（共享）内存空间。*

# wordpress - URL 重写地图和 Wordpress

> ID：14106654
> 
> 赞同：1
> 
> 时间：2012-12-31T22:57:46.503
> 
> 标签：wordpress, redirect, url-rewriting, iis-7.5, http-status-code-301

我正在从 ASP.NET 迁移到 Wordpress，我想在 IIS 7.5 中使用带有 URL 重写的重写映射来放置 301 重定向规则。我在一个名为 rewritemap.config 的文件中拥有所有重定向，并且我在 IIS 中的 URL 重写中创建了重定向规则，但我无法让重定向与 Wordpress 一起使用。我不知道这是否可能与 Wordpress 在 web.config 中拥有自己的重写规则以及将所有内容发送到 index.php 一样，它在内部处理它自己的重写，如此链接中所述：

[Wordpress 如何在没有重写映射的情况下重写 URL？](https://stackoverflow.com/questions/4785840/how-does-wordpress-rewrite-the-url-without-a-rewrite-map)

web.config 的 XML 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rewriteMaps configSource="rewritemap.config" />   
      <rules>

                <rule name="Redirect old links from redirect map" stopProcessing="true">
                    <match url=".*" negate="false" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{Redirects:{REQUEST_URI}}" pattern="(.+)" />
                    </conditions>
                    <action type="Redirect" url="{C:1}" appendQueryString="false" />
                </rule>

                <rule name="wordpress" enabled="true" patternSyntax="Wildcard">
                    <match url="*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php" />
                </rule>

      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

rewritemap.config 文件的 XML 是由 IIS 管理员创建的，所以我希望它是正确的，并且它与我在其他博客文章中看到的格式相匹配，这些文章已经展示了如何执行此操作。我是否正在尝试一些不可能的事情？我有数百个旧的 aspx 页面，我需要 301 重定向到 Wordpress 站点中的特定链接，并且有许多对旧链接的外部引用，甚至考虑没有 301 重定向。

# ajax - 监控来自浏览器的 AJAX 请求

> ID：14106657
> 
> 赞同：0
> 
> 时间：2012-12-31T22:59:26.753
> 
> 标签：ajax, browser, intercept

我正在浏览一个似乎通过 javascript 填充数据的网页。我想为我的浏览器使用一个扩展，它可以让我查看对哪个 url 发出的请求以及从请求中返回的数据。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T23:02:43.500

Firefox 有一个名为 Firebug 的插件，或者您可以在较新版本中使用 Ctrl+Shift+K 打开其本机控制台。Chrome 拥有带有网络标签的开发者工具。

# sql - 使用表关系编写复杂的 SQL 查询

> ID：14106658
> 
> 赞同：0
> 
> 时间：2012-12-31T22:59:30.130
> 
> 标签：sql, many-to-many

我将首先介绍我的表结构（仅提及相关字段）

```
/* The table Users */

user_id | user_name | user_registration_date
1       | USER1     | 19/09/2010
2       | USER2     | 20/09/2010

/* The table Levels_Completed */

user_id | level_id
1       | 1
1       | 2
2       | 1 
```

我想显示一个记分牌。列表中的第一个用户将是他完成的关卡数量最多的用户。对于上面的示例，USER1 将显示在 USER2 上方。

我想接收下一个数据：

```
user_id, user_name, user_registration_date, COUNT(level_id rows) AS score 
```

对于我收到的每个 SQL 行，按分数计数排序。例子：

```
1 | USER1 | 19/09/2010 | 2
2 | USER2 | 20/09/2010 | 1 
```

我知道如何使用`INNER JOIN`，但我认为计数和排序都在我目前的水平之上。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:02:08.913

```
SELECT Users.user_id, user_name, user_registration_date, COUNT(level_id) AS score
FROM Users INNER JOIN Levels_Completed ON Users.user_id = Levels_Completed.user_id
GROUP BY Users.user_id, user_name, user_registration_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:07:44.673

尝试这个：

```
SELECT
   U.user_id,
   U.user_name,
   U.user_registration_date,
   COUNT(L.level_id) as score
FROM Users U
   LEFT JOIN Levels_Completed L
       ON U.User_Id = L.User_Id
GROUP BY U.user_id, U.user_name, U.user_registration_date
ORDER BY score DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T23:09:34.297

```
SELECT Users.user_id, user_name, user_registration_date, score
FROM Users
INNER JOIN (
  SELECT user_id, COUNT(level_id) AS score
  FROM Levels_Completed
  GROUP BY user_id)
USING (user_id)
ORDER BY score DESC 
```

# visual-studio - 作为链接添加的源文件不会在 Windows 8 App 项目中打开，如果它们也已添加到另一个项目中

> ID：14106666
> 
> 赞同：0
> 
> 时间：2012-12-31T23:02:09.717
> 
> 标签：visual-studio, windows-8, code-sharing

我试图通过将源作为链接添加到每个项目中来在多个平台上共享代码。例如，如果我在 Windows 8 Store App 项目和 Windows Phone 8 项目中添加相同的源文件作为链接，则无论我单击哪个链接（在任一项目中），文件都将在 Windows Phone 项目中打开，所以IntelliSense 只会建议相关的电话命名空间。如果链接文件只添加到 Windows 8 项目中，它就可以正常工作。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:02:09.717

我在打字时实际上找到了答案。问题出在 VSCommands 上，在 VSCommands 选项页面中的 IDE Enhancements->Solution Explorer 下禁用 Smart Linked File Navigation 修复了它。只是想我会发布这个以防其他人遇到同样的问题。

# ruby-on-rails - 重置 Jekyll 的文件权限

> ID：14106673
> 
> 赞同：1
> 
> 时间：2012-12-31T23:03:51.223
> 
> 标签：ruby-on-rails, file-permissions, jekyll, chmod

`sudo chmod 600 -R /`当我打算这样做时，我不小心运行了该命令，`sudo chmod 600 -R Documents/some_directory`并且我的 macbook pro 的文件权限搞砸了。我跑了`sudo chmod 755 -R /directories_that_don't_need_to_be_secure`，试图修复所有的权限。但是当我启动我的 Jekyll 服务器时，`jekyll --server --auto`一切都被禁止了。我使我的整个目录可读、可写和可执行。但是错误不断弹出。这是我在 jekyll 服务器生成时得到的

```
 Shalin-Shah-Me:shalin shalinvs$ jekyll --server --auto
Configuration from /Users/shalinvs/Documents/Developer/Websites/shalin/_config.yml
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- sass (LoadError)
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `require'
    from /Users/shalinvs/Documents/Developer/Websites/shalin/_plugins/sass_converter.rb:5
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `require'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:78:in `setup'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:77:in `each'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:77:in `setup'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:76:in `each'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:76:in `setup'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/../lib/jekyll/site.rb:31:in `initialize'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/jekyll:238:in `new'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.12.0/bin/jekyll:238
    from /usr/bin/jekyll:23:in `load'
    from /usr/bin/jekyll:23 
```

我也尝试使用磁盘工具来修复我的权限，但仍然没有运气。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:06:27.527

Disk Utility.app 有一个 Fix Permissions 模块。也许这会解决它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:00:29.703

jekyll 命令在您当前所在的目录上运行。问题中的输出显示您正在主目录中运行它。这似乎不太可能是您存储 jekyll 站点的真正位置（特别是因为这意味着 jekyll 每次运行时都必须处理您的主目录中的所有内容）。

假设您在其他地方有您的 jekyll 文件，请切换到该目录（您应该在其中看到 _config.yml 和其他 jekyll 文件/目录）并尝试在那里运行命令。

# c++ - 维护有序（通过参数，int）集合

> ID：14106675
> 
> 赞同：0
> 
> 时间：2012-12-31T23:04:31.913
> 
> 标签：c++, list, collections, structure

对 c++ 结构没有经验：我需要一个满足以下内容的结构：

可以容纳大约 100 个，我会说最多 500 个对象（每个对象在内存中可能非常大：包含图像剪辑）

按 int 排序，对象具有：我想要它，所以我说“添加优先级为 2 的对象。然后添加优先级为 3 的对象！”，并让集合为（对象 w/优先级 3，对象 w/优先级 2 )，以便从头开始迭代它，从具有最高优先级的对象开始到最低优先级。

不需要删除（可能很方便，但不是必需的）

需要能够访问内部的对象，无论它们在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:06:31.443

听起来像一个[优先队列](http://en.wikipedia.org/wiki/Priority_queue)。在 C++ 中，它被实现为`std::priority_queue`，[这里有一个例子](http://comsci.liu.edu/~jrodriguez/cs631sp08/c++priorityqueue.html)。

# bash - bash中是否有带赋值（三元条件）的内联if？

> ID：14106679
> 
> 赞同：8
> 
> 时间：2012-12-31T23:05:15.150
> 
> 标签：bash, shell, if-statement, operators

> **可能重复：**
> [Bash 中的三元运算符 (?:)](https://stackoverflow.com/questions/3953645/ternary-operator-in-bash)

如果这是 AS3 或 Java，我会执行以下操作：

```
fileName = dirName + "/" + (useDefault ? defaultName : customName) + ".txt"; 
```

但在 shell 中，这似乎是不必要的复杂，需要几行代码，以及相当多的重复代码。

```
if [ $useDefault ]; then
    fileName="$dirName/$defaultName.txt"
else
    fileName="$dirName/$customName.txt"
fi 
```

您可以将所有内容压缩成一行，但这会极大地牺牲清晰度。

有没有更好的方法`if`在 shell 中编写带有变量赋值的内联？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-01T00:06:06.980

写吧：

```
fileName=${customName:-$defaultName}.txt 
```

它与您所拥有的并不完全相同，因为它不检查`useDefault`. 相反，它只是检查是否`customName`已设置。无需设置`useDefault`何时要使用默认值，只需取消设置`customName`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T23:11:15.943

shell中没有`?:`条件运算符，但您可以像这样使代码少一些冗余：

```
if [ $useDefault ]; then
    tmpname="$defaultName"
else
    tmpname="$customName"
fi
fileName="$dirName/$tmpname.txt" 
```

或者您可以编写自己的 shell 函数，其作用类似于`?:`运算符：

```
cond() {
    if [ "$1" ] ; then
        echo "$2"
    else
        echo "$3"
    fi
}

fileName="$dirname/$(cond "$useDefault" "$defaultName" "$customName").txt" 
```

虽然这可能有点矫枉过正（它会评估所有三个参数）。

感谢 Gordon Davisson 在评论中指出嵌套在`$(...)`.

# javascript - WinJS：高效的 xml 解析

> ID：14106680
> 
> 赞同：0
> 
> 时间：2012-12-31T23:05:20.587
> 
> 标签：javascript, microsoft-metro, winjs

我目前有以下代码可以从 xml 提要中获取一些数据。

```
 var title = []
    var start = []
    var end = []
    var xml = result;
    var channel = xml.split('<channel')[1].split('>')[0].split('"')[1]
    var xmlLength = xml.split("<programme>").length - 1;
    for (var i = 0; i < xmlLength; i++) {
        var event = xml.split("<event>")[i + 1].split("</event>")[0];
        title[i] = programme.split("<title>")[1].split("</title>")[0];
        var rs = programme.split("<start>")[1].split("</start>")[0].split(/\-|\s/);
        var re = programme.split("<end>")[1].split("</end>")[0].split(/\-|\s/);
        start[i] = new Date(rs.slice(0, 3).join('/') + ' ' + rs[3]);
        end[i] = new Date(re.slice(0, 3).join('/') + ' ' + re[3]);
    }
    setListView(event, start, end, channel) 
```

这目前有效，但似乎效率不高。我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:15:12.360

好吧，看起来您应该使用[Windows.Web.Syndication 命名空间](http://msdn.microsoft.com/en-us/library/windows/apps/windows.web.syndication.aspx)中的类，因为看起来您正在做与 RSS 相关的事情，但您也可以使用[原始 XML API](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.xml.dom.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:48:33.630

似乎您正在尝试自己解析`XML`。你考虑过使用`jQuery.parseXML()`吗？

在这里查看：http: [//api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# javascript - 如何更改传单地图中的默认光标？

> ID：14106687
> 
> 赞同：27
> 
> 时间：2012-12-31T23:06:43.687
> 
> 标签：javascript, leaflet

我正在尝试在按下某个控制按钮时修改默认光标图标。虽然我通过在容器 div 上使用 css 取得了部分成功，但这样做会覆盖移动光标状态，这是我不想要的。我的意思是在地图上移动时不再出现移动图标（但在标记上时不会出现！）。

我想知道是否有一种通过 api 实现特殊光标行为而不重新定义所有内容的非 hacky 方式。

这就是我试图做的，#map 是传单地图的容器 div。

```
#map[control=pressed] {
    cursor: url('..custom.png');
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-02-25T16:52:26.930

**编辑 5.18.2017：通过 Leaflet Framework 的原始 CSS 和 Javascript（推荐）**

我正在查看[BoxZoom 插件](https://github.com/gregallensworth/L.Control.BoxZoom)的源代码，并注意到他们使用[Leaflet 的内置 DOM 突变器](http://leafletjs.com/reference-1.0.3.html#domutil)的方法，并想在这里推广它……这当然是最佳实践。

[示例 jsfiddle](http://jsfiddle.net/hx2yxdc0/14/)

在您的 CSS 中某处包含这样的类..

```
.leaflet-container.crosshair-cursor-enabled {
    cursor:crosshair;
} 
```

当您想启用十字准线时，请在您的 JS 中执行此操作。

```
// Assumes your Leaflet map variable is 'map'..
L.DomUtil.addClass(map._container,'crosshair-cursor-enabled'); 
```

然后，当您想禁用十字准线时，请在您的 JS 中执行此操作。

```
L.DomUtil.removeClass(map._container,'crosshair-cursor-enabled'); 
```

* * *

**原始答案：地图级十字准线**

@scud42 让我走上了正确的道路。您可以使用 JQuery 来更改 Leaflet 地图光标，如下所示：

```
$('.leaflet-container').css('cursor','crosshair'); 
```

稍后，当您想要重置地图光标时，您可以这样做：

```
$('.leaflet-container').css('cursor',''); 
```

* * *

**编辑 1.21.2016：按功能十字准线**

您还可以为支持该`className`选项的单个要素启用十字准线，例如多边形或要素顶点等。

这是一个可拖动顶点的示例，它将切换指针十字准线（[jsfiddle](http://jsfiddle.net/hx2yxdc0/)）：

```
var svg_html_default = '<div style="margin:0px;padding:0px;height:8px;width:8px;border-style:solid;border-color:#FFFFFF;border-width:1px;background-color:#424242"</div>';

var default_icon = L.divIcon({
  html: svg_html_default,
  className: 'leaflet-mouse-marker',
  iconAnchor: [5,5],
  iconSize: [8,8]
});

var m = new L.marker([33.9731003, -80.9968865], {
  icon: default_icon,
  draggable: true,
  opacity: 0.7
}).addTo( map );

m.on("mouseover",function(){$('.leaflet-mouse-marker').css('cursor','crosshair');});

m.on("mouseout",function(){$('.leaflet-mouse-marker').css('cursor','');}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-26T17:24:44.393

Leaflet 的样式允许您更改某些光标行为。将这些放在本地 CSS 中以进行更改。

```
/* Change cursor when mousing over clickable layer */
.leaflet-clickable {
  cursor: crosshair !important;
}
/* Change cursor when over entire map */
.leaflet-container {
  cursor: help !important;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-04T16:44:02.823

设置为十字准线：

```
document.getElementById('map').style.cursor = 'crosshair' 
```

重新设置它：

```
document.getElementById('map').style.cursor = '' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T23:29:37.810

使用`active`伪类。

```
#map:active {
    cursor: url('..custom.png');
} 
```

**[JSFiddle](http://jsfiddle.net/WsmHw/)**

为了覆盖光标，您可能需要使用 css3 属性`user-select: none`，以便在拖动元素时不会在文本和默认光标之间切换。JSFiddle 中也显示了该实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-09T14:52:10.067

这对我有用：

```
// CSS first. Add this to leaflet stylesheet.
.leaflet-interactive.wait-cursor-enabled {
    cursor: wait !important;
}

// JS select from map container and add class to each element
let map = L.map('map');
let els = map.getContainer().querySelectorAll('.leaflet-interactive');
for(let el of els){
   el.classList += ' wait-cursor-enabled'; 
}

//JS remove class once no longer needed
let els = map.getContainer().querySelectorAll('.leaflet-interactive.wait-cursor-enabled');
for(let el of els){
   el.classList.remove("wait-cursor-enabled");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-08T11:58:15.440

```
$('.leaflet-container').css('cursor','crosshair'); 
```

# java - 无限绘画Java

> ID：14106688
> 
> 赞同：2
> 
> 时间：2012-12-31T23:07:06.943
> 
> 标签：java, loops, graphics, paintcomponent, infinite

我开始玩别人的代码并遇到了一个有趣的实验。该程序将与 if 语句一起正常工作。但是我发现如果我将 if 语句更改为 while 循环，程序会运行，但我无法使用 X 按钮关闭程序，而是必须按下 Eclipse 终止按钮。我猜这是一个无限循环的迹象，还是 Java 不能一遍又一遍地重复绘制相同的图像的事实？

```
// if you want to draw graphics on the screen, use the paintComponent method
        // it give you a graphic context to draw on
        public void paintComponent(Graphics g){

            super.paintComponent(g);

            // when the player is still in the game
            if(inGame){
                g.drawImage(apple, apple_x, apple_y, this);

                for (int z = 0; z < dots; z++) {
                    if (z == 0)
                        g.drawImage(head, collisionX[z], collisionY[z], this);
                    else g.drawImage(tail, collisionX[z], collisionY[z], this);
                }
                Toolkit.getDefaultToolkit().sync();

                // dispose graphics and redraw new one
                g.dispose();
            }
            else gameOver(g);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T23:11:52.153

将此行更改为`while`语句

```
if (inGame) { 
```

将不允许将变量重置为`false`，从而导致无限循环。一般来说，使用while 循环或任何资源密集型调用`paintComponent`是一个坏主意。Swing 具有处理这些的[并发机制。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T23:16:56.607

如果您希望您的 UI 保持响应，事件处理程序和重绘应该在合理的时间内完成。这意味着你根本不应该在里面循环`paintComponent()`；相反，您必须从其他地方反复触发重绘，例如动画计时器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T23:11:45.990

将 更改`if`为 a `while`，即：

```
while(inGame){ 
```

如果为真，将永远循环`inGame`，因为只有两种方法可以退出循环：

*   `inGame`在循环内设置为 false
*   `break`是循环中的一个语句

在代码中都没有找到。

仅供参考，代码模式`while(true)`是创建无限循环的常用方法，这对于等待请求的 Web 服务之类的事情是必需的

# java - 尽管表中有很多行，但 JDBC ResultSet 只给出一行？

> ID：14106691
> 
> 赞同：2
> 
> 时间：2012-12-31T23:07:59.793
> 
> 标签：java, jdbc

我在表中有很多行，我在 MySql 数据库上运行了相同的查询，但 java ResultSet 只给出了表的第一行。这是我的代码。

```
public ArrayList<String> getAllAlbumsName(Integer uid) {
    ArrayList<String>allAlbumsName = new ArrayList<String>();
    try {
        String qstring = "SELECT albumname FROM picvik_picture_album WHERE " +
                "uid = '" + uid + "';";

        System.out.println(qstring);
        connection = com.picvik.util.MySqlConnection.getInstance().getConnection();
        ptmt = connection.prepareStatement(qstring);
        resultSet = ptmt.executeQuery();
        if(resultSet.next()) {
            System.out.println(resultSet.getString("albumname"));
            allAlbumsName.add(resultSet.getString("albumname"));
        }

        resultSet.close();
        ptmt.close();
        connection.close();

    } catch (Exception e) {
        e.printStackTrace();
    }   
    return allAlbumsName;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T23:09:22.033

```
if(resultSet.next()) {
            System.out.println(resultSet.getString("albumname"));
            allAlbumsName.add(resultSet.getString("albumname"));
        } 
```

如果您想获取所有行，它应该是：

```
while(resultSet.next()) {
        System.out.println(resultSet.getString("albumname"));
        allAlbumsName.add(resultSet.getString("albumname"));
    } 
```

当特定条件为真时， [while](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)语句会持续执行语句块

注意：正如@BalusC 所评论的，您的代码会引入 SQL 注入攻击，最好使用 ptmt.set... 而不是手动构造 SQL 字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T23:10:28.620

尝试`while(resultSet.next()) {`

代替`if (resultSet.next()) {`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T23:09:43.450

更改`if (resultSet.next()) {`为`while (resultSet.next()) {`

# asp.net - 每小时运行 aspx 文件

> ID：14106698
> 
> 赞同：0
> 
> 时间：2012-12-31T23:09:45.693
> 
> 标签：asp.net, windows-server, windows-server-2012

我的 Windows 2012 服务器上有一个 aspx 文件，我来自 Linux 服务器，所以我习惯于 cron 作业。我在谷歌上搜索并发现了很多关于使用任务计划程序的讨论，但所有文档都在 Microsoft 的网站上，对于没有英语博士学位的人来说是完全不可能理解的。

有经验的可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:21:42.707

我不知道您是否可以这样做，但是如果您从您的 aspx 页面中获取逻辑并将其转换为 Web 服务，您可以创建一个简单的控制台应用程序 (.exe) 来执行您的 Web 服务代码. 任务调度程序将调用可执行文件而不是打开浏览器。

# objective-c - NSGradient 淡入淡出/动画

> ID：14106699
> 
> 赞同：0
> 
> 时间：2012-12-31T23:09:58.473
> 
> 标签：objective-c, macos, cocoa, animation, nsgradient

简单地说：是否可以在单个 NSView 上的两个 NSGradient“填充”之间淡入淡出？例如。绘制一个渐变并淡入淡出绘制下一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:13:31.027

我最终继承了 NSView；从中获取 NSImage；创建一个临时 NSView 绘制与原始大小相同的新渐变并从中获取图像；在 NSImageView 中绘制起始图像，它是原始 NSView 的子视图；然后使用 CATransition 淡入另一个带有新图像的 NSImageView 。最后，我会让我的 NSView 绘制新的渐变并删除 NSImageView，以防需要进行更多自定义绘图。

[在 GitHub 上发布了我的代码](http://github.com/sebj/SJKit/blob/master/SJView/SJView.m)。

# javascript - jQuery 折叠/展开指示，相应地切换 HTML 实体

> ID：14106704
> 
> 赞同：0
> 
> 时间：2012-12-31T23:10:53.947
> 
> 标签：javascript, jquery, html

我如何在 HTML 实体和 #9660 之间切换；（向下的三角形）和＆#9664; （左指三角形）分别用于打开和关闭状态，显示在 h2 封闭内容旁边（在向右浮动的 span 元素内），使用 jQuery Collapse 脚本：[https](https://github.com/danielstocks/jQuery-Collapse) ://github.com/danielstocks/jQuery-Collapse ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:38:09.483

您需要将 javascript 添加到可以为每个可折叠元素定义的打开/关闭函数中。我将下载文件中的以下演示修改为以下内容：

HTML（在带箭头的跨度中添加）：

```
<div class="col c2">
  <!-- BEGIN Custom open and close -->
  <h2>Custom show &amp; hide</h2>
  <div id="custom-show-hide-example">
    <h3><span>&#9660;</span>Hello</h3>
    <div>
      <p>Hello Sir.</p>
      <p>I'm sliding</p>
    </div>
    <h3><span>&#9660;</span>Anarachy in the UK</h3>
    <div>I like tea</div>
    <h3><span>&#9660;</span>Indeed</h3>
    <div>This is some information</div>
  </div> 
```

Javascript（添加`.html()`了更改受影响跨度的html的功能）：

```
 new jQueryCollapse($("#custom-show-hide-example"), {
      open: function() {
        this.slideDown(150);
        $('#custom-show-hide-example h3 span').html('&#9664;'); /*my added line*/
      },
      close: function() {
        this.slideUp(150);
        $('#custom-show-hide-example h3 span').html('&#9660;'); /*my added line*/
      }
    }); 
```

# sql - ms-access 2003 组合框填充

> ID：14106714
> 
> 赞同：0
> 
> 时间：2012-12-31T23:13:11.290
> 
> 标签：sql, ms-access-2003

我有一个带有子的条目表。我有三个可以一起工作的组合框。组合 1 设置了 vba 和后事件组合 2 并分为三个。它们独立于主表单工作正常，但是当我将表单作为子表单起诉时，级联停止工作。

形式

```
Main Form Name "1A-Event Entry"
SubForm Name "1B-Event sub" 
```

组合框 1（更新后）

```
Private Sub Category_AfterUpdate()
Me.Type = Null
Me.Type.Requery
Me.Type = Me.Type.ItemData(0)
End Sub 
```

组合框 2 (SQL)

```
SELECT Type.ID, Type.Type, Type.Category
FROM Type
WHERE (((Type.Category)=[Forms]![1B-Event sub]![Category]))
ORDER BY Type.Type; 
```

CombBox2（更新后）

```
Private Sub Type_AfterUpdate()
Me.Detail1 = Null
Me.Detail1.Requery
Me.Detail1 = Me.Detail1.ItemData(0)
End Sub 
```

组合框3 (SQL)

```
SELECT Detail.ID, Detail.Detail, Detail.Type
FROM Detail
WHERE (((Detail.Type)=[Forms]![1B-Event sub]![Type]))
ORDER BY Detail.Detail; 
```

我确信这与 SQL 中的表单/子表单脚本有关，但它让我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:22:29.660

作为子表单，您需要不同的参考：

```
WHERE Type.Category=[Forms]![1A-Event Entry]![Subform Control Name Here].Form![Category] 
```

当一个窗体作为另一个窗体的子窗体运行时，您必须引用子窗体控件。

# windows - 以本地管理员身份访问远程路径时，为什么会收到拒绝访问？

> ID：14106719
> 
> 赞同：0
> 
> 时间：2012-12-31T23:14:01.273
> 
> 标签：windows, authentication, privileges, administrator

我有一个 Windows-xp-sp3 虚拟机，配置了 NAT、禁用了防火墙和可 ping 的 IP 地址。

我正在尝试`\\<vm-name>\c$`从我的计算机访问。

我`<vm-name>\Administrator`在提示的身份验证窗口中输入了用户，但我得到拒绝访问。当我将“所有人”配置为我的 VM 上的管理员时，我可以访问该路径。

为什么我作为 vm-local 管理员用户收到“访问被拒绝”？

**编辑**：感谢这个博客解决了这个问题：http: [//chall32.blogspot.co.il/2010/02/how-to-enable-access-windows-7.html](http://chall32.blogspot.co.il/2010/02/how-to-enable-access-windows-7.html)

您可以在远程计算机上运行此行：

```
reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T16:46:39.160

提问者自己提供了答案。在远程机器（即被访问文件的主机）上运行一个简单的注册表调整就可以完成这项工作——

```
reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f 
```

答案基于[博客文章](http://chall32.blogspot.co.il/2010/02/how-to-enable-access-windows-7.html)，并由[MSKB](http://support.microsoft.com/kb/951016)支持。

# python - Python, subprocess, call(), check_call 和 returncode 来查找命令是否存在

> ID：14106720
> 
> 赞同：20
> 
> 时间：2012-12-31T23:14:13.420
> 
> 标签：python, command-line, call, subprocess, file-exists

我已经弄清楚如何使用 call() 让我的 python 脚本运行命令：

```
import subprocess

mycommandline = ['lumberjack', '-sleep all night', '-work all day']
subprocess.call(mycommandline) 
```

这可行，但有一个问题，如果用户的命令路径中没有伐木工人怎么办？如果将伐木工人放在与 python 脚本相同的目录中，它会起作用，但是脚本如何知道它应该寻找伐木工人？我想如果有一个未找到命令的错误，那么伐木工人就不会在命令路径中，脚本可以尝试找出它的目录是什么并在那里寻找伐木工人，最后警告用户将伐木工人复制到其中之一如果在任何一个地方都没有找到那两个地方。如何找出错误消息是什么？我读到 check_call() 可以返回错误消息和有关 returncode 属性的内容。我找不到有关如何使用 check_call() 和 returncode、消息是什么或如何判断消息是否为 command-not-found 的示例。

我是否以正确的方式去做这件事？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-31T23:30:30.797

一个简单的片段：

```
try:
    subprocess.check_call(['executable'])
except subprocess.CalledProcessError:
    pass # handle errors in the called executable
except OSError:
    pass # executable not found 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T23:24:16.900

`subprocess``OSError`当找不到命令时，将引发异常。

当找到该命令并`subprocess`为您运行该命令时，将从该命令返回结果代码。标准是代码 0 表示成功，任何失败都是一些非零错误代码（会有所不同；请查看您正在运行的特定命令的文档）。

所以，如果你抓住`OSError`了你可以处理不存在的命令，如果你检查结果代码，你可以找出命令是否成功。

最棒的`subprocess`是你可以让它收集来自`stdout`and的所有文本`stderr`，然后你可以丢弃它或返回它或记录它或随意显示它。我经常使用一个包装器来丢弃命令的所有输出，除非命令失败，在这种情况下`stderr`输出文本。

我同意您不应该要求用户复制可执行文件。程序应该在`PATH`变量中列出的目录中；如果缺少程序，则应安装它，或者如果它安装在不在用户上的目录中，`PATH`则用户应更新`PATH`以包含该目录。

请注意，您确实可以选择`subprocess`使用各种硬编码路径多次尝试可执行文件：

```
import os
import subprocess as sp

def _run_cmd(s_cmd, tup_args):
    lst_cmd = [s_cmd]
    lst_cmd.extend(tup_args)
    result = sp.call(lst_cmd)
    return result

def run_lumberjack(*tup_args):
    try:
        # try to run from /usr/local/bin
        return _run_cmd("/usr/local/bin/lumberjack", tup_args)
    except OSError:
        pass

    try:
        # try to run from /opt/forest/bin
        return _run_cmd("/opt/forest/bin/lumberjack", tup_args)
    except OSError:
        pass

    try:
        # try to run from "bin" directory in user's home directory
        home = os.getenv("HOME", ".")
        s_cmd = home + "/bin/lumberjack"
        return _run_cmd(s_cmd, tup_args)
    except OSError:
        pass

    # Python 3.x syntax for raising an exception
    # for Python 2.x, use:  raise OSError, "could not find lumberjack in the standard places"
    raise OSError("could not find lumberjack in the standard places")

run_lumberjack("-j") 
```

编辑：经过一番思考，我决定完全重写上面的内容。只传递一个位置列表，然后循环尝试替代位置，直到一个工作正常为止，这要干净得多。但是如果不需要的话，我不想为用户的主目录构建字符串，所以我只是将可调用对象放入替代列表中是合法的。如果您对此有任何疑问，请询问。

```
import os
import subprocess as sp

def try_alternatives(cmd, locations, args):
    """
    Try to run a command that might be in any one of multiple locations.

    Takes a single string argument for the command to run, a sequence
    of locations, and a sequence of arguments to the command.  Tries
    to run the command in each location, in order, until the command
    is found (does not raise OSError on the attempt).
    """
    # build a list to pass to subprocess
    lst_cmd = [None]  # dummy arg to reserve position 0 in the list
    lst_cmd.extend(args)  # arguments come after position 0

    for path in locations:
        # It's legal to put a callable in the list of locations.
        # When this happens, we should call it and use its return
        # value for the path.  It should always return a string.
        if callable(path):
            path = path()

        # put full pathname of cmd into position 0 of list    
        lst_cmd[0] = os.path.join(path, cmd)
        try:
            return sp.call(lst_cmd)
        except OSError:
            pass
    raise OSError('command "{}" not found in locations list'.format(cmd))

def _home_bin():
    home = os.getenv("HOME", ".")
    return os.path.join(home, "bin")

def run_lumberjack(*args):
    locations = [
        "/usr/local/bin",
        "/opt/forest/bin",
        _home_bin, # specify callable that returns user's home directory
    ]
    return try_alternatives("lumberjack", locations, args)

run_lumberjack("-j") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T04:27:59.187

哇，好快啊！我将 Theodros Zelleke 的简单示例和 steveha 对函数的使用与 abarnert 关于 OSError 的评论和 Lattyware 关于移动文件的评论结合起来：

```
import os, sys, subprocess

def nameandpath():
    try:
        subprocess.call([os.getcwd() + '/lumberjack']) 
        # change the word lumberjack on the line above to get an error
    except OSError:
        print('\nCould not find lumberjack, please reinstall.\n')
        # if you're using python 2.x, change the () to spaces on the line above

try:
    subprocess.call(['lumberjack'])
    # change the word lumberjack on the line above to get an error
except OSError:
    nameandpath() 
```

我在 Mac OS-X (6.8/Snow Leopard)、Debian (Squeeze) 和 Windows (7) 上对其进行了测试。它似乎在所有三个操作系统上都按照我想要的方式工作。我尝试使用 check_call 和 CalledProcessError 但无论我做了什么，我似乎每次都得到一个错误，我无法让脚本来处理这些错误。为了测试脚本，我将名称从“lumberjack”更改为“deadparrot”，因为我的脚本所在目录中有 lumberjack。

你觉得这个脚本的编写方式有什么问题吗？

# php - 从 XML 读取凭据并初始化变量

> ID：14106722
> 
> 赞同：0
> 
> 时间：2012-12-31T23:14:37.493
> 
> 标签：php, xml, simplexml

我正在尝试从 xml 读取凭据并使用 php 初始化为私有变量。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<config>
    <host>localhost</host>
    <username>Jani</username>
    <password>1234r</password>
</config> 
```

我正在使用以下类和构造函数来初始化变量。

```
<?php

class Admin {

    public $host = "";
    private $username;
    private $password;
    private $table;
    private $crendentials = array();

    public function __construct() {

    $xml = simplexml_load_file("config.xml");

    foreach ($this->crendentials as $key => $value) {
        if ($key == $this->host) {
            $this->host = $value;
        } elseif ($key == $this->username) {
            $this->username = $value;
        } elseif ($key == $this->password) {
            $this->password = $value;
        }
    }

    foreach ($xml->children() as $child) {
        $this->crendentials[$child->getName()] = $child;
    }
}

public function getHost() {
    print_r($this->crendentials);
    echo $this->host;
    echo $this->username;
    echo $this->password;
}

}

$obj = new Admin;
$obj->getHost();
?> 
```

它不是初始化变量。除此以外，还有没有加载凭据的好方法？我正在创建一个 cms。我做了一些研究，比如使用 ini 文件。但我认为 xml 是最简单的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:21:09.410

> 它不是初始化变量。

我看到两个问题：

*   `$this->crendentials`是一个空数组。所以你的第一个`foreach`永远不会运行。
*   从上面和内容来看`$xml->children()`，第二个`foreach`可能什么都不做。

> 除此以外，还有没有加载凭据的好方法？

撇开您从 XML 文件加载凭据不谈，我建议将两个`foreach`循环压缩为一个。只需循环遍历 XML 键并将它们分配给它们各自的类属性。也就是drop `$this->crendentials`。

# c++ - 在启动时为应用程序提供一些数据

> ID：14106724
> 
> 赞同：2
> 
> 时间：2012-12-31T23:15:00.287
> 
> 标签：c++, launch

我正在尝试创建一个应用程序，该应用程序可以在从另一个程序启动时接收一些数据。例如：

```
Start_App.exe calls Main_App.exe and gives it the current date, all at the same time
(while launching it)

Main_App.exe outputs the date on its console 
```

如果没有 Start_App 传递的数据，其他程序将无法正常工作或将执行其他操作。我一直在寻找一段时间，但似乎我错过了技术名称......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T23:21:59.487

您可能想要使用命令行参数。
它们是通过写出它们来传递的，用空格分隔，直接在程序名称之后。

像这样：

```
#include <iostream>

int main(int argc, char *argv[])
{
    using namespace std;

    cout << "There are " << argc << " arguments:" << endl;

    // Loop through each argument and print its number and value
    for (int nArg=0; nArg < argc; nArg++)
        cout << nArg << " " << argv[nArg] << endl;

    return 0;
} 
```

`argc`是程序接收到的参数数量。
`*argv[]`是一个字符串数组，每个参数一个。

如果你这样调用程序：

```
Program.exe arg1 arg2 arg3 
```

它为您提供：

```
There are 3 arguments:
0 arg1
1 arg2
2 arg3 
```

# javascript - 当谷歌地图在同一页面上时，持久的 Jquery 移动导航栏不起作用

> ID：14106729
> 
> 赞同：0
> 
> 时间：2012-12-31T23:16:03.837
> 
> 标签：javascript, jquery, html, google-maps, jquery-mobile

我想在我的应用程序中显示谷歌地图，许多人发现这样做有问题。为了克服它，我在应用程序加载时刷新了地图，因此使用了 javascript。

此外，我将其设置为 100%，以便菜单看起来像 Android 应用程序一样稍微透明。除了带有谷歌地图的页面之外，这个相同的菜单结构在应用程序中的其他地方也可以正常工作。

在地图页面上时，我无法选择导航栏中的任何菜单按钮，并且无法导航...。我的页脚仍然有效。

我确实认为这与 Google 接管屏幕有关，所以我什至尝试更改 div 的 z-index，但没有成功。

这种想法的原因是，将鼠标移到菜单上会显示（使用 Chrome）正确的链接，但无论出于何种原因，实际的触摸/点击事件都没有被捕获并因此被执行。

作为参考，我正在使用 jquery-1.8.2 & jquery.mobile-1.2.0

Javascript

```
$(function () {
    // To fix the google map display issue
    // https://forum.jquery.com/topic/google-maps-inside-jquery-mobile
    // http://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery
    // Web Kit Browser Version Of Code   

if (navigator.userAgent.match(/Android/) || navigator.userAgent.match(/webOS/) ||     navigator.userAgent.match(/iPhone/) || navigator.userAgent.match(/iPad/) || navigator.userAgent.match(/iPod/) || navigator.userAgent.match(/BlackBerry/)) {
    var mapheight = $(window).height() - 263;
    var mapwidth = $(window).width();
    $("#map").height(mapheight);
    $("#map").width(mapwidth);
    setTimeout("initializeeventsmap()", 150);
    setTimeout("google.maps.event.trigger(map, 'resize')", 350);
    //setTimeout("map.setZoom( map.getZoom() )", 170);
    setTimeout("showResultmapjsonp()", 250);

} else { // https://forum.jquery.com/topic/google-maps-inside-jquery-mobile
    // PC Version Of Code
    var mapheight = $(window).height();
    var mapwidth = $(window).width();
    $("#map").height(mapheight);
    $("#map").width(mapwidth);
    setTimeout("initializeeventsmap()", 150);
    setTimeout("google.maps.event.trigger(map, 'resize')", 350);
    //setTimeout("map.setZoom( map.getZoom() )", 170);
    setTimeout("showResultmapjsonp()", 250);
}; 
```

HTML

```
<div data-role="page" id="eventmap" data-theme="d">
    <div data-role="header" data-position="fixed" data-type="horizontal" class="ui-bar-androidtopmenubar">
        <div id="androidnavmenumain3" data-role="navbar" data-theme="d">
            <ul>
                <li> <a href="#home" data-theme="d" class="ui-bar-androidtopmenu" data-icon="home"> </a>

                </li>
                <li> <a href="#events" data-theme="d" class="ui-bar-androidtopmenu" data-icon="grid"> </a>

                </li>
                <li> <a href="#eventmap" data-theme="d" class="ui-bar-androidtopmenu" data-icon="search"> </a>

                </li>
                <li> <a href="#settings" data-theme="d" class="ui-bar-androidtopmenu" data-icon="gear"> </a>

                </li>
                <!-- <li>
                    <a href="#home" data-theme="d" data-icon="androidmore"> </a>
                </li> -->
            </ul>
        </div>
    <!-- <div id="androidnavmenu2" data-role="button" data-mini="true" data-icon="refresh"
    data-iconpos="notext" class="ui-btn-right" data-transition="fade" data-theme="d"
    style="border-width: 0px 0px 0px 0px;">Refresh Data</div> --></div>
<!--<div id="eventscontent" data-role="content" align="center"> -->
<!--<p>&nbsp;</p> -->
<div id="map" style="width:100%%; height:100%%;"></div>
<div id="eventmapcontrolsdiv1" data-role="footer" data-position="fixed"
data-type="horizontal" class="ui-grid-a ui-bar-androidbottommenubar">
    <div class="ui-block-a">
        <div id="followme" data-role="button" data-transition="fade" data-theme="d"
        data-shadow="false" class="ui-bar-androidbottommenu">Follow Me</div>
    </div>
    <div class="ui-block-b">
        <div id="centermap" data-role="button" data-transition="fade" data-theme="d"
        data-shadow="false" class="ui-bar-androidbottommenu">Center Map</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:42:08.713

答：由于 $(function () 变得混乱，在 javascript 中删除了一个额外的 showResultmapjsonp() 。

人族

# vba - MS Access - 通过取消报告创建的“幻影”进程

> ID：14106730
> 
> 赞同：5
> 
> 时间：2012-12-31T23:16:27.667
> 
> 标签：vba, ms-access

我在 Windows 的 Access 2010 中遇到了一个问题：

1.  使用 doCmd.OpenReport 启动报告
2.  在与报告关联的事件中设置“Cancel = True”
3.  关闭访问
4.  Access 继续作为“幻像”进程运行，并且必须在任务管理器中终止。在此进程被终止之前，Access 无法打开另一个数据库。该任务最初显示一些 CPU 使用率，但安静到 0%。

我在使用**doCmd.OpenReport**启动报告时发现了这一点。**报表在Report_Open**事件中打开一个表单。该表格提示用户输入报告参数并允许他们按“确定”以显示报告或按“取消”。“Cancel”的**On Click**事件设置“Cancel = True”。

看来**OpenReport()**没有优雅地响应取消。这似乎是一种经常使用的技术，所以我犹豫将其称为错误，并想知道我是否做错了什么。实际上......我解释得越多，它听起来确实像一个错误。在这一点上，我希望有人有解决方法，或者我遗漏了一些明显的东西。

这只是我为说明问题而创建的一个简化示例：

**形式**

```
Private Sub Form_Open(Cancel As Integer)
On Error GoTo errHandler

DoCmd.OpenReport "Test Report", acViewPreview, , , acDialog

Exit Sub

errHandler:
Select Case Err.Number
Case 2501   ' Cancelled by user, or by NoData event.
    MsgBox "Report cancelled, or no matching data.", vbInformation, "Information"
Case Else
    MsgBox "Error " & Err & ": " & Error$, vbInformation, "Form_Open()"
End Select
Resume Next

End Sub 
```

**报告**

```
Private Sub Report_Open(Cancel As Integer)
    Cancel = True
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T01:02:48.560

这种情况下出现问题的原因是acDialog：

```
 DoCmd.OpenReport "Test Report", acViewPreview, , , acDialog 
```

我想你会发现：

```
 DoCmd.OpenReport "Test Report", acViewPreview 
```

工作没有问题。

编辑重新评论

您不需要取消报告。在大多数情况下，避免错误比捕获错误更好，因此在打开表单之前检查数据并获取参数。将表单从报告打开事件移动到它自己的步骤，并在启动表单之前使用 DLookUp 或查询来检查数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:18:46.580

我无法测试这个问题，所以我只提供一个通用的解决方案：从报告定义中删除数据/记录集/记录源。

确定参数后，您可以将记录源应用于报表。如果报告被取消，它会在没有数据连接的情况下被取消。

# jquery - jquery表单验证插件

> ID：14106733
> 
> 赞同：1
> 
> 时间：2012-12-31T23:16:47.127
> 
> 标签：jquery, jquery-validate

我正在使用 jquery 表单验证来验证我的表单，但出现以下错误：

```
 Uncaught ReferenceError: jQuery is not defined jquery.validate.js:1178
Uncaught TypeError: undefined is not a function bootstrap.js:29
Uncaught ReferenceError: $ is not defined mimi.html:20 
```

这是我的代码：

```
<!DOCTYPE HTML>
<html>
 <head>
    <link type = "text/css" rel="stylesheet" href="css/bootstrap.css" />

       <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
       <script src="js/bootstrap.js"> </script>
       <script> 
                 $(function(){ 
                                 $('form').validate()
                             }); 
        </script> 
 </head>
 <body> 
 <form class = "well span6"> 

 <label> Username </label> 
 <input type="text" id = "myName" class ="span3" placeholder ="Type your username here..." class = "required"/> 

  <label> Password</label> 
 <input type="text" id "myPassword" class ="span3" placeholder ="Type your password here..." class = "required"/> <br/> 

 <button id = "submit" class ="btn btn-primary">Submit </button>
 <button class = "" > Clear <br/></button><br/> 
 </form> 

 </body> 

</html> 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T23:20:03.423

[jQuery 验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)需要 jQuery。`jquery.validate.js`您可以在脚本之前包含。

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js" type="text/javascript"></script> 
```

# python - 这是一个可接受的算法吗？

> ID：14106736
> 
> 赞同：2
> 
> 时间：2012-12-31T23:17:08.687
> 
> 标签：python, lcs

我设计了一个算法来找到最长的公共子序列。这些是步骤：

*   选择第一个字符串中的第一个字母。

*   在第二个字符串中查找它，如果找到，将该字母添加到 `common_subsequence`并将其位置存储在 中`index`，否则将 的长度`common_subsequence`与 的长度进行比较`lcs` ，如果更大，则将其值分配给`lcs`。

*   返回第一个字符串并选择下一个字母并再次重复上一步，但这一次从第一个`index`字母开始搜索

*   重复此过程，直到第一个字符串中没有要选择的字母。最后的值`lcs`是最长公共子序列。

这是一个例子：
</p>

```
X=A, B, C, B, D, A, B‬‬  
‫‪Y=B, D, C, A, B, A‬‬ 
```

选择`A`第一个字符串。在 中
寻找。 现在第二个字符串中有一个，将其附加到. 返回到第一个字符串并选择下一个字母. 这次从 的位置开始在第二个字符串中查找。 有一个之后，所以将 B 附加到. 现在选择第一个字符串中的下一个字母. 第二个字符串中没有旁边。所以将 common_subsequence 的值赋值给，因为它的长度大于. 重复前面的步骤，直到到达第一个字符串的末尾。最终的价值`A``Y`
`A``common_subsequence`
`B``B``A`
`B``A``common_subsequence`
`C``C``B``lcs``lcs``lcs`是最长公共子序列。

该算法的复杂度为 theta(n*m)。这是我的实现：

第一种算法：

```
import time
def lcs(xstr, ystr):
    if not (xstr and ystr): return # if string is empty
    lcs = [''] #  longest common subsequence
    lcslen = 0 # length of longest common subsequence so far
    for i in xrange(len(xstr)):
        cs = '' # common subsequence
        start = 0 # start position in ystr
        for item in xstr[i:]:
            index = ystr.find(item, start) # position at the common letter
            if index != -1: # if common letter has found
                cs += item # add common letter to the cs
                start = index + 1
            if index == len(ystr) - 1: break # if reached end of the ystr
        # update lcs and lcslen if found better cs
        if len(cs) > lcslen: lcs, lcslen = [cs], len(cs) 
        elif len(cs) == lcslen: lcs.append(cs)
    return lcs

file1 = open('/home/saji/file1')
file2 = open('/home/saji/file2')
xstr = file1.read()
ystr = file2.read()

start = time.time()
lcss = lcs(xstr, ystr)
elapsed = (time.time() - start)
print elapsed 
```

使用哈希表的相同算法：

```
import time
from collections import defaultdict
def lcs(xstr, ystr):
    if not (xstr and ystr): return # if strings are empty
    lcs = [''] #  longest common subsequence
    lcslen = 0 # length of longest common subsequence so far
    location = defaultdict(list) # keeps track of items in the ystr
    i = 0
    for k in ystr:
        location[k].append(i)
        i += 1
    for i in xrange(len(xstr)):
        cs = '' # common subsequence
        index = -1
        reached_index = defaultdict(int)
        for item in xstr[i:]:
            for new_index in location[item][reached_index[item]:]:
                reached_index[item] += 1
                if index < new_index:
                    cs += item # add item to the cs
                    index = new_index
                    break
            if index == len(ystr) - 1: break # if reached end of the ystr
        # update lcs and lcslen if found better cs
        if len(cs) > lcslen: lcs, lcslen = [cs], len(cs) 
        elif len(cs) == lcslen: lcs.append(cs)
    return lcs

file1 = open('/home/saji/file1')
file2 = open('/home/saji/file2')
xstr = file1.read()
ystr = file2.read()

start = time.time()
lcss = lcs(xstr, ystr)
elapsed = (time.time() - start)
print elapsed 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T00:45:27.143

如果您的教授希望您发明自己的 LCS 算法，那么您就完成了。你的算法不是有史以来最优化的算法，但它属于正确的复杂度等级，你清楚地理解它，而且你显然没有从互联网上复制你的实现。您可能希望准备好为您的算法辩护，或讨论替代方案。如果我是你的教授，如果：

*   你上交了那个程序。
*   您能够解释为什么没有可能的 O(N) 或 O(N log M) 替代方案。
*   即使您不知道结果，您也能够参与有关可能具有更好*下限*（或显着更低的常数等）的其他算法以及时间/空间权衡等的合理讨论提前讨论。

另一方面，如果您的教授希望您选择一种著名的算法并编写自己的实现，您可能希望使用标准的 LP 算法。它是一个标准算法是有原因的——你可能想继续阅读，直到你理解为止。（即使不参加考试，你也是在学习这门课，而不仅仅是为了给教授留下好印象，对吧？）

[维基百科](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)有基本实现的伪代码，然后是常见优化的英语描述。我很确定根据该页面上的内容编写自己的 Python 代码不会被视为抄袭，甚至不会被视为微不足道的移植，尤其是如果您可以证明您了解您的代码在做什么、为什么以及为什么这是一个很好的算法。另外，你是用 Python 编写的，它的记忆方式比那篇文章中演示的要好得多，所以如果你理解它是如何工作的，你的代码实际上应该比维基百科给你的要好得多。

无论哪种方式，正如我在评论中建议的那样，我会阅读Bergroth、Hakonen 和 Raita[的最长公共子序列算法调查](http://www.researchgate.net/publication/3871316_A_survey_of_longest_common_subsequence_algorithms)，并在网上搜索类似的论文。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-31T23:41:11.263

```
maxLength = 0
foundString = ""
for start in xrange(len(str1)-1):
     for end in xrange(start+1, len(str1)):
        str1Temp = str1[start:end]   
        maxLengthTemp = len(str1Temp)
        if(str2.find(str1Temp)):
             if(maxLengthTemp>maxLength):
                 maxLength = maxLengthTemp
                 foundString = str1Temp

print maxLength
print foundString 
```

# c# - 如何加载列表框中的所有项目而不仅仅是视觉项目

> ID：14106737
> 
> 赞同：2
> 
> 时间：2012-12-31T23:17:18.733
> 
> 标签：c#, wpf, listbox, virtualization

如何加载列表框中的所有项目而不仅仅是显示的项目？基本上，您如何关闭列表框的虚拟化？我试过但没有任何效果。

```
 <ListBox x:Name="listBox1" VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="Black" BorderThickness="0" IsEnabled="False" ForceCursor="True">
                <ListBox.RenderTransform>
                    <TranslateTransform x:Name="listBoxTransform" />
                </ListBox.RenderTransform>
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel x:Name="wp" IsItemsHost="True" ItemHeight="244" ItemWidth="184" Width="1700">
                        </WrapPanel>                            
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type Image}" x:Name="dtName">
                        <!-- The Image binding -->
                        <Image Width="170" Height="230" Source="{Binding}" Stretch="Fill" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:48:12.210

使用此代码（从您的修改）

```
 <ListBox x:Name="listBox1" VirtualizingStackPanel.IsVirtualizing="False"
                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  ScrollViewer.CanContentScroll="False"
                  Background="Black" BorderThickness="0" IsEnabled="False"
                  ForceCursor="True">
            <ListBox.RenderTransform>
                <TranslateTransform x:Name="listBoxTransform" />
            </ListBox.RenderTransform>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel x:Name="wp" IsItemsHost="True" ItemHeight="244" ItemWidth="184" Width="1700">
                    </WrapPanel>                            
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type Image}" x:Name="dtName">
                    <!-- The Image binding -->
                    <Image Width="170" Height="230" Source="{Binding}" Stretch="Fill" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListBox> 
```

我将 VirtualizingStackPanel.IsVirtualizing 更改为 False（如上一个答案中所建议的那样）并添加了 ScrollViewer.CanContentScroll="False"，它否定了虚拟化，并且如果 ListBox 内的项目太大（而不是从一个项目跳到另一个项目，它是一小步的）。

希望这能解决您的问题，问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:23:50.797

```
<ListBox VirtualizingStackPanel.IsVirtualizing="False" 
                       ItemsSource="{Binding XPath=Team}" 
                       ItemTemplate="{DynamicResource NameDataStyle}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T23:25:52.503

您必须覆盖`ItemsPanel`（特别是提供一个新的`ItemsPanelTemplate`），因为这`VirtualizingStackPanel`是指定/使用的地方。

像这样的东西：

```
<ListBox>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

# html - 较小 z-index 元素的圆角

> ID：14106738
> 
> 赞同：1
> 
> 时间：2012-12-31T23:18:56.843
> 
> 标签：html, z-index, css

我正在尝试设计一个网站，其中主要内容容器使用border-radius属性具有圆角。但是，我将侧边栏和顶部导航栏保持固定，以便在用户向上或向下滚动时它们不会移动。它类似于在 Google Plus 上可以看到的内容：

[http://www.techzek.com/wp-content/uploads/gsmarena_00121.jpg](http://www.techzek.com/wp-content/uploads/gsmarena_00121.jpg)。

我的问题是：如何为 z-index 值小于其他元素的内容容器设置边框半径，以便在用户滚动时圆角不会被其他元素重叠和隐藏？

在下面的示例中，我希望导航栏和侧边栏相交的角落是弯曲的，但不知道如何

HTML：

```
<body>
    <div class="navbar">
        <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Sign In</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div>

    <div class="sidebar"></div>

    <div class="contentcontainer"></div>
</body> 
```

CSS：

```
html, body {
    background-color: #eee;
    height: 100%;
}

.navbar {
    position:fixed;
    width:100%;
    height:50px;
    display:inline;
    z-index:2;
    background: rgb(61,40,77);
}

.navbar ul{
    float:right;
    display:block;
    padding-top:14px;
    padding-right:10px;
}

.navbar li {
    padding:15px;
    display:inline;
}

.sidebar {
    position:fixed;
    height:100%;
    margin-top:50px;
    width:170px;
    background: rgb(61,40,77);
    color: #eee;
}

.contentcontainer {
    position:absolute;
    margin-left:200px;
    margin-top:65px;
    z-index:1;
    width:82%;
    max-width:980px;
    background-color:#fbfbfb;
    border-style:solid;
    border-width:1px;
    border-color:black;
    border-radius:18px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:06:55.370

这是你想要的吗？[Codepen](http://codepen.io/joe/pen/sBzIb)

这就是诀窍。你用 做一个圆圈`border-radius`。你把它放在导航和侧边栏之间的交叉点。设置`border-color: transparent`并获得一些阴影来设置颜色。

```
.sidebar:after {
  content: '';
  position: absolute;
  width: 0;
  height: 0;
  top: 0px;
  right: -20px; /* negative (border-width * 2) */
  border-radius: 10px; /* same as border-width */
  border: 10px solid transparent;
  box-shadow: -10px -10px 0 rgb(61,40,77); /* first two values = negative border-width */
} 
```

# c++ - C++ 禁用缓冲区溢出框

> ID：14106740
> 
> 赞同：1
> 
> 时间：2012-12-31T23:18:59.080
> 
> 标签：c++, crash, minidump

我的问题是，在应用程序崩溃期间它会弹出缓冲区溢出消息，我正在使用 minidumps 设置未处理的异常过滤器，这足以使程序简单地崩溃并关闭而不是弹出消息。

我已经测试了应用过滤器后立即取消引用 NULL 指针的程序，并且它在服务器机器（程序设置为运行的地方）上工作，尽管即使使用过滤器，应用程序处于发布模式并且没有定义调试，仍然会弹出消息。

这个问题非常严重，因为我们有另一个应用程序在每次崩溃时自动重新启动它，这不会发生，因为在崩溃时会显示一个消息框而不是程序关闭，它是一个服务器，它应该没有停机时间，也是由于没有创建 .dmp 文件的消息框。

# c# - EF5 一对多关系导致外键列名不正确

> ID：14106744
> 
> 赞同：1
> 
> 时间：2012-12-31T23:19:15.830
> 
> 标签：c#, entity-framework-5, entity-relationship

我正在尝试仅在“多”端配置与导航的一对多关系，但似乎无法让 EF 生成正确的列名。

这是相关的架构：

```
QuoteItem
  Id INT PRIMARY KEY

QuoteItemFiles
  Id INT PRIMARY KEY
  QuoteItemId INT NOT NULL
  FileId INT NOT NULL

Files
  FileID INT PRIMARY KEY (legacy naming convention) 
```

和模型：

```
public class QuoteItem
{
  public int Id { get; set; }
  public ICollection<QuoteItemFile> Attachments { get; set; }
}

public class QuoteItemFile
{
  public int Id { get; set; }
  public File File { get; set; }
  public QuoteItem QuoteItem { get; set; }
}

public class File
{
  public int FileID { get; set; }
} 
```

我正在配置这样的关系：

```
public class QuoteItemMap()
{
  HasMany(x => x.Attachments)
    .WithRequired(x => x.QuoteItem)
    .Map(x => x.MapKey("QuoteItemId"))
    .WillCascadeOnDelete(true);
}

public QuoteItemFileMap()
{
  HasRequired(x => x.QuoteItem)
    .WithMany(x => x.Attachments)
    .Map(x => x.MapKey("QuoteItemId"))
    .WillCascadeOnDelete(true);
  HasRequired(x => x.File)
    .WithMany()
    .Map(x => x.MapKey("FileId")) <-- This isn't working
    .WillCascadeOnDelete(true);
} 
```

当我尝试访问 QuoteItem.Attachments 时，我得到“**无效的列名 'File_FileID'。** ”

为什么它不听我的`MapKey("FileId")`指令？

# ruby-on-rails - Rails 3组合时的两个字段唯一性验证

> ID：14106750
> 
> 赞同：2
> 
> 时间：2012-12-31T23:20:12.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型`Friendship` ，其中`:friend_id`也是一个外键`:user_id`

```
friendships
id | user_id | friend_id 
```

我知道验证这两个字段的唯一性将是这样的

```
validates :user_id, :uniqueness => {:scope => :friend_id} 
```

但是有没有办法验证

```
user_id = 1, friend_id = 3
user_id = 3, friend_id = 1 
```

所以只有 `user_id = 1, friend_id = 3`存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:13:18.553

更仔细地阅读这个问题，我现在认为它真的

```
validates :friend_id, :uniqueness => {:scope => :user_id} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:04:54.100

这是个难题。

> 如何建模对称关系？

上次我这样做时，我决定实际上它不是对称的。有关如何建模的想法，请查看[Disapora 的`Contact`课程](https://github.com/diaspora/diaspora/blob/develop/app/models/contact.rb)

```
class Contact < ActiveRecord::Base
  belongs_to :user
  belongs_to :person
  validates :person, :presence => true
  validates_presence_of :user
  validates_uniqueness_of :person_id, :scope => :user_id
end 
```

你会注意到他们没有做任何特别的事情来确保唯一性。

相反，他们所做的是仔细考虑建立或破坏友谊的互动的每一点。我们需要小心地将它们包装在事务中。

基本上，当用户发送“好友请求”时

1.  我们创建一个从“用户”到“朋友”的联系人，状态为“待定”
2.  我们创建一个从“朋友”到“用户”的联系人，状态为“已请求”

当“朋友”接受这个“请求”时

1.  两个联系人都设置为“已接受”

如果“朋友”选择破坏友谊

1.  两个联系人都被删除

这些动作中的每一个都需要在事务中完成。

只要这些交易是正确的，我们就永远不会有单向的友谊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T01:08:20.437

```
validate :relationship_uniqueness

def relationship_uniqueness

  existing_record = Friendship.find(:first, :conditions => ["user_id = ? AND friend_id = ?", user_id, friend_id])
  unless existing_record.blank?
    errors.add(:user_id, "has already been saved for this relationship")
  end

end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T01:15:33.047

多一个！

```
def unique_relationship?
    self.class.where("(user_id = ? and friend_id = ?) or 
                      (user_id = ? and friend_id = ?)", 
                      user_id, friend_id, friend_id, user_id).empty?
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T00:46:22.723

所以我想了一个办法来解决这个问题，但它非常混乱

```
friendships
id
1

friend_lists
id | friendship_id | user_id
1  |       1       |   1
2  |       1       |   3 
```

这样，我必须确保一个`friendship_id`只能输入两次`friend_lists`，然后

```
validates :friendship_id, :uniqueness => {:scope => :user_id} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T00:50:07.363

我会尝试：

```
validate :unique_relationship

def unique_relationship
  (user_id.to_s + friend_id.to_s).uniq
end 
```

# ruby-on-rails - Rails/Ember - active_model_serializer - 侧载时未定义的方法“对象”

> ID：14106752
> 
> 赞同：13
> 
> 时间：2012-12-31T23:20:25.463
> 
> 标签：ruby-on-rails, ember.js, active-model-serializers

我正在尝试为 Ember 应用程序在 active_model_serializer 中侧载数据，并在尝试包含对象时得到 NoMethodError：

> #Email:0x00000100d33d20 的未定义方法“对象”

它仅在 :include => true 设置时发生，如下所示：

```
class ContactSerializer < ActiveModel::Serializer
  embed :ids, :include => true
  attributes :first_name, :last_name
  has_many :emails
end 
```

我的模型如下所示：

```
class Contact < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :company,
  belongs_to :account
  belongs_to :user
  has_many :emails
end

class Email < ActiveRecord::Base
  attr_accessible :email_address, :email_type_id, :is_primary  
  belongs_to :contact
end 
```

我的控制器如下所示：

```
def show
  @contact = @current_user.contacts.where(:id => params[:id]).includes(:emails).first
  render :json => @contact
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T01:28:58.733

正如上面提到的 Deefour，确保你有一个用于任何侧载对象的序列化程序。在这种情况下，创建 EmailSerializer：

```
class EmailSerializer < ActiveModel::Serializer
  attributes :id, :email_address
end 
```

# ruby-on-rails - 使用 rake 任务更新记录

> ID：14106758
> 
> 赞同：0
> 
> 时间：2012-12-31T23:21:34.177
> 
> 标签：ruby-on-rails, cron, rake

```
desc "This task is called by the Heroku scheduler add-on"
task :queue => :environment do
  puts "Updating feed..."
  @books = Book.all
  @books.update_queue
  puts "done."
end 
```

我在一个名为`scheduler.rake`lib/tasks 的文件中有上述代码。当我跑步时，`rake queue`我得到：

```
Updating feed...
rake aborted!
undefined method `update_queue' for #<Array:0x007ff07eb3ffd0> 
```

该方法在我的 Books 模型中定义如下：

```
def update_queue
    days_gone = (Date.parse(:new_books.last.created_at.to_s) - Date.today).to_i

    unless days_gone > -7
        new_book = self.user.books.latest_first.new_books.last
        new_book.move_from_queue_to_reading
        user.books.reading_books.move_from_reading_to_list
    else
        self.user.books.create(:title => "Sample book", :reading => 1)
    end
  end 
```

这只是没有访问书籍，这就是为什么它给我这个未定义的错误？我在这里做错了什么？我只是想更新每本书的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:27:38.683

如错误消息所述，您无法在数组上运行实例方法。`Book.all`返回 books 表中所有项目的数组。您需要遍历数组中的每个实例才能使其工作。您可以通过以下两种方式之一执行此操作。

使用标准块语法：

```
@books.each do |book|
  book.update_queue
end 
```

或使用[send 方法](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

```
Book.all.each.send(:update_queue) 
```

无论哪种方式都应该完成同样的事情。

# php - 单击时使用 php 调用 java 脚本函数

> ID：14106759
> 
> 赞同：0
> 
> 时间：2012-12-31T23:21:52.810
> 
> 标签：php, javascript

好的，所以我支付了一个编码器来为我编写一个漫游地图脚本，用户可以在键盘上上下按下并使用 jquery 在地图上漫游。但现在我正在尝试制作它，所以我有一个上下图像，然后点击它会调用上下函数。所以用户可以使用上下键并点击图片。

这是用户按下键盘上的向上键时使用的向上功能。但是现在有些我需要在单击图像时调用相同的函数..

```
function move(d)
{
    if(d == "UP")
    {
        var top = (parseInt(document.getElementById('move').style.top) - 10);
        var left = parseInt(document.getElementById('move').style.left);
        if(canMove(new xy(left,top)))
        {
            document.getElementById('move').style.top = (parseInt(document.getElementById('move').style.top) - 10) + 'px';
            document.player.src = "maps/sprites/playerUp.png";
            //if(lastStep != "UP") clearTimeouts();
            //setTimeout('document.player.src="playerUp.png"', 500);
            //lastStep = "UP";
            reloadF();
        }
    } 
```

我该怎么做？

我猜我只需要调用函数 move(d) 并将其设置为如何？点击图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:29:21.793

```
var keynum = 0;

if(window.event) { keynum = e.keyCode; }  // for IE
else if(e.which) { keynum = e.which; }    // for others browsers

if(keynum === 38) { // up
    //if KEY UP
}

if(keynum === 40) { // down
    //if KEY DOWN
} 
```

我希望这有帮助...

# php - 如何让 preg_replace 只替换 URL，而不在 URL 之后出现任何额外的空格或文本？

> ID：14106760
> 
> 赞同：0
> 
> 时间：2012-12-31T23:21:58.047
> 
> 标签：php, regex, wordpress, preg-replace

这是我的代码：

```
function prepare_url($text) {
    if (strpos($text, 'youtu') === FALSE) {
        $url = "\\2";
    } else {
        $url = "<br><div id='".$playerid."'>Loading the player ...</div><script type='text/javascript'>jwplayer('".$playerid."').setup({flashplayer:'/jwplayer/player.swf',file:'".$text."',height:240,width:400});</script><br>";
        return $url;
    }
    $text = preg_replace("#(^|[\n ])(([\w]+?://[\w\#$%&~.\-;:=,?@\[\]+]*)(/[\w\#$%&~/.\-;:=,?@\[\]+]*)?)#is", "\\1<a href=\"\\2\" target=\"_blank\">".$url."</a>", $text);
    $text = preg_replace("#(^|[\n ])(((www|ftp)\.[\w\#$%&~.\-;:=,?@\[\]+]*)(/[\w\#$%&~/.\-;:=,?@\[\]+]*)?)#is", "\\1<a href=\"http://\\2\" target=\"_blank\">".$url."</a>", $text);

    return $text;
} 
```

仅当替换 YouTube URL 后没有任何反应时，此代码才有效。被替换的 Youtube URL 之后的所有内容都作为 $text 变量的一部分添加，使其无法使用。我该怎么做才能使 preg_replace 在到达 YouTube URL 的末尾时立即停止？那是只要它碰到一个空白区域？

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:33:19.020

我不久前写的这个函数将获取您输入的任何文本并设置电子邮件链接的 url 或嵌入 youtube 视频。它将删除 youtube url 的尾随字符。希望能帮助到你：

```
function MakeAutoLink($string)
{
        /** Add http:// **/
    $string = preg_replace("/([^\w\/])(www\.[a-z0-9\-]+\.[a-z0-9\-]+)/i", "$1http://$2",$string);
        /** make all URLs links **/
    $string = preg_replace("/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i","<a rel=\"nofollow\" target=\"_blank\" href=\"$1\">$1</A>",$string);
        /** make all emails hot links **/
    $string = preg_replace("/([\w-?&;#~=\.\/]+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}|[0-9]{1,3})(\]?))/i","<A HREF=\"mailto:$1\">$1</A>",$string);
        /** The Regular Expression filter **/
    $youtube_video = "/v=(.+?)&/";
        /** Check if there is a url in the text **/
    $video = preg_match_all($youtube_video, $string, $match);
    if ($video)
        { 
            $links=$match[0]; 
        for ($key=0;$key<$video;$key++) 
            { 
                $newstring = $string.'<br /><br /><iframe title="YouTube video player" class="youtube-player" type="text/html" width="320" height="185" src="http://www.youtube.com/embed/'.substr($links[$key], 2,11).'" frameborder="0" allowFullScreen></iframe><br />';
                return $newstring;
            } 
        } 
    return $string;
} 
```

**将此放在您的服务器上并导航到它进行测试：**

**视频.php**

```
 <?PHP
function MakeAutoLink($string)
    {
            /** Add http:// **/
        $string = preg_replace("/([^\w\/])(www\.[a-z0-9\-]+\.[a-z0-9\-]+)/i", "$1http://$2",$string);
            /** make all URLs links **/
        $string = preg_replace("/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i","$1",$string);
        $youtube_video = "/v=(.+?)&/";
            /** Check if there is a url in the text **/
        $longurl = preg_match_all($youtube_video, $string, $match);
        if ($longurl)
            { 
                $links=$match[0]; 
            for ($key=0;$key<$longurl;$key++) 
                { 
                    $newstring = "http://www.youtube.com/watch?v=".substr($links[$key], 2,11);
                    return $newstring;
                } 
            } 
        return $string;
    }

?>
<!DOCTYPE html>
<html lang="en">
  <head>
  </head>
  <body>
 <?PHP
 if(isset($_POST['video']))
    {
        echo MakeAutoLink($_POST['video']);
    }
    else
        { 
 ?> 

 Try these two links:<br>
 http://www.youtube.com/watch?v=1rqQQkcB0MY<br><br>
 http://www.youtube.com/watch?v=1rqQQkcB0MY&some more text<br>
 <div align="center">
 <form method="post" action="<?php echo htmlentities($_SERVER['PHP_SELF']);?>"> 
    <label>video:</label>
    <input type="text" title="Youtube video" name="video" size="60" value="" autocomplete="off" autofocus>
    <br><br>    
    <input class="login" type="submit" name="login" value="Get Video">
 </form>
 </div> 
 <?PHP
 }
 ?>

  </body>
</html> 
```

如果在使用“&”的视频 id 之后有其他选项，这将转换 url。如果您希望它在找到第一个空格后立即停止，请将**/v=(.+?)&/**替换为 **/v=(.+?) /**确保在 ) 和 / 之间留一个空格

# mysql - 如何避免对这个 mysql 查询进行全表扫描？

> ID：14106770
> 
> 赞同：9
> 
> 时间：2012-12-31T23:23:03.653
> 
> 标签：mysql

```
explain
select
    *
from
    zipcode_distances z 
inner join
    venues v    
    on z.zipcode_to=v.zipcode
inner join
    events e
    on v.id=e.venue_id
where
    z.zipcode_from='92108' and
    z.distance <= 5 
```

我正在尝试查找所有“在邮政编码 92108 5 英里范围内的场所的活动”，但是，我很难优化此查询。

这是解释的样子：

```
id, select_type, table, type, possible_keys, key, key_len, ref, rows, Extra

1, SIMPLE, e, ALL, idx_venue_id, , , , 60024, 
1, SIMPLE, v, eq_ref, PRIMARY,idx_zipcode, PRIMARY, 4, comedyworld.e.venue_id, 1, 
1, SIMPLE, z, ref, idx_zip_from_distance,idx_zip_to_distance,idx_zip_from_to, idx_zip_from_to, 30, const,comedyworld.v.zipcode, 1, Using where; Using index 
```

我正在对“e”表进行全表扫描，但我无法弄清楚我需要创建什么索引才能使其快速运行。

任何意见，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T01:28:33.913

根据`EXPLAIN`您问题中的输出，您已经拥有了查询*应该*使用的所有索引，即：

```
CREATE INDEX idx_zip_from_distance
  ON zipcode_distances (zipcode_from, distance, zipcode_to);
CREATE INDEX idx_zipcode ON venues (zipcode, id);
CREATE INDEX idx_venue_id ON events (venue_id); 
```

（我不确定您的索引名称是否`idx_zip_from_distance`真的包含该`zipcode_to`列。如果没有，您应该添加它以使其成为[覆盖索引](http://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_covering_index)。此外，为了完整性，我已经包含了该`venues.id`列`idx_zipcode`，但是，假设它是主键该表并且您正在使用 InnoDB，无论如何它都会自动包含在内。）

然而，看起来 MySQL 选择了一个不同的、可能不是最优的查询计划，它扫描所有事件，找到它们的地点和邮政编码，然后才过滤距离结果。如果事件表的基数足够低，这*可能*是最佳查询计划，但从您提出这个问题的事实来看，我认为不是。

次优查询计划的一个原因*可能*是您有*太多*索引，这会使计划者感到困惑。例如，考虑到它存储的数据可能是对称的，您*真的需要 zipcode 表上的所有这三个索引吗？*就个人而言，我建议只使用我上面描述的索引，加上一个唯一索引（如果你没有人工索引，它也可以是主键）`(zipcode_to, zipcode_from)`（最好按这个顺序，这样任何偶尔的查询`zipcode_to=?`都可以利用它）。

但是，根据我所做的一些测试，我怀疑 MySQL 选择错误查询计划的主要问题仅仅是表的相对基数。据推测，您的实际`zipcode_distances`表是*巨大的*`WHERE`，而 MySQL 还不够聪明，无法意识到子句中的条件真正缩小了多少。

如果是这样，最好和最简单的解决方法可能是简单地[强制 MySQL 使用您想要的索引](http://dev.mysql.com/doc/refman/5.6/en/index-hints.html)：

```
select
    *
from
    zipcode_distances z 
    FORCE INDEX (idx_zip_from_distance)
inner join
    venues v    
    FORCE INDEX (idx_zipcode)
    on z.zipcode_to=v.zipcode
inner join
    events e
    FORCE INDEX (idx_venue_id)
    on v.id=e.venue_id
where
    z.zipcode_from='92108' and
    z.distance <= 5 
```

使用该查询，您确实应该获得所需的查询计划。（你确实需要`FORCE INDEX`在这里，因为只有`USE INDEX`查询规划器仍然可以决定使用表扫描而不是建议的索引，这违背了目的。我第一次测试时发生了这种情况。）

附言。这是一个关于 SQLize 的演示，无论[有](http://www.sqlize.com/FLH73yfRlZ)[没有](http://www.sqlize.com/66rTDw4VB7) ，都`FORCE INDEX`演示了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:47:05.200

是否为两个表中的列建立了索引？

```
e.id and v.venue_id 
```

如果不这样做，则在两个表中创建索引。如果您已经拥有，则可能是您在一个或多个表中的记录很少，并且分析器检测到执行完整扫描而不是索引读取更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T23:32:58.830

您可以使用子查询：

```
select * from zipcode_distances z, venues v, events e
where
    z.id in (select id from zipcode z where z.zipcode_from='92108' and z.distance <= 5)
    and z.zipcode_to=v.zipcode
    and v.id=e.venue_id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-01T07:28:54.103

您正在从所有表中选择所有列，`(select *)`因此当查询引擎必须在每一行上从索引到表进行查找时，使用索引的优化器几乎没有意义。

# java - putExtra 是将数据传递给新活动的唯一方法吗？

> ID：14106771
> 
> 赞同：1
> 
> 时间：2012-12-31T23:23:21.963
> 
> 标签：java, android

我为我的应用创建了一个 SettingsActivity。在此`Activity`，我使用`SharedPreferences`该类来处理用户可编辑的首选项。

在设置时`SharedPreferences`，我必须将它们加载到`onCreate`我的主要活动中，然后再次加载到 SettingsActivity 中。可能是对`getXXXX()`方法的两个调用都需要默认值，我认为将默认值硬编码到这两个地方是不好的，因为我想如果我改变它们将来会出现问题。

这样做最好/最流行（或公认的标准）是什么？

*   创建一个全局变量类，我将在其中导入每个活动并在其中定义我的默认常量？

*   使用`putExtra`and`getExtra`将数据从主要活动传递到设置活动？

还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:14:37.930

我认为 Squonk 有一个很好的答案，但如果您正在寻找替代方案，请考虑创建一个`Settings`将您的所有设置作为成员的类。它可以有一个像这样的静态方法`loadFromPreferences(Context)`，它将返回一个`Settings`从 构造的对象`SharedPreferences`，使用您需要的任何默认值。它还可以有一种`saveSettings(Context)`方法来保存您的编辑。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:01:19.403

就个人而言，在这种情况下，我会将默认值放在资源文件中。这样就不需要使用全局变量类或辅助类。Android 资源已经为您做到了。

看：

[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)

[更多资源类型](http://developer.android.com/guide/topics/resources/more-resources.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:15:21.617

为什么不扩展应用程序类，而不是使用具有静态值的类，该类将在应用程序进程存在时始终存在。您可以在其中保留共享方法和变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T00:20:05.060

我强烈建议在两个活动的 onCreate 中打开 SharedPreference。每次我尝试使用全局变量时，这些值都会以一种难以检测和修复的方式消失。活动在关闭时被销毁。服务可以随时从内存中删除。如果您的服务正在休眠并且内存中没有活动，则应用程序上下文将被销毁。

话虽如此，在应用程序上下文中放置一个变量可能是最好的地方。创建一个扩展 Application 的类并将 AndroidManifest.xml 设置为使用它。如果您尝试从服务或广播接收器中使用它，请不要期望该值存在。

此外，除非您遇到活动加载太慢的问题，否则最好将时间花在功能上而不是优化上。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-31T23:54:57.683

您可以将对象声明为`public static`并从另一个类中引用它们。

活动A：

```
public static int testIntegerA = 42;

Intent intentInteger = new Intent(getActivityContext(), ActivityB.class);
intentInteger.putExtra("INTENT_EXTRA", testIntegerA);
startActivity(intentInteger); 
```

活动B：

```
public static int intentInt, staticInt;

staticInt = ActivityA.testIntegerA;
intentInt = getIntent().getExtras().getInt("INTENT_EXTRA"); 
```

现在两者都`intentInt`等于`staticInt`42；

# postgresql - rdbms 查询中语言标签（小标签集）的有效方法

> ID：14106779
> 
> 赞同：2
> 
> 时间：2012-12-31T23:25:50.627
> 
> 标签：postgresql, activerecord, database-schema, rdbms

我的应用程序使用 RDBMS（带有 activerecord 的 postgres）来存储和获取文本对象。每个文本对象可以有任意数量的与之关联的语言。到目前为止，我一直将这些语言关联视为我脑海中的标签，就像博客文章可以有任意数量的任意标签一样。然而，这些语言标签不是任意的，而是限制在大约 30 个的一小部分。在我的应用程序中，用户可以请求一些文本对象并提供一组语言（比如英语、德语和法语），并且应用程序应该继续并获取与任何这些语言相关联的一些文本对象。

将语言与这些文本对象相关联以简化查询的最有效方法/模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T10:36:44.457

为了便于查询，您可以创建一个视图来避免不断加入。

```
create table object (
    id serial unique,
    object text primary key
);

create table tag (
    id serial unique,
    tag text primary key
);

create table object_tag (
    object_id integer references object(id),
    tag_id integer references tag(id)
);

insert into tag (tag) values ('English'), ('French'), ('German');
insert into object (object) values ('o1'), ('o2');
insert into object_tag (object_id, tag_id) values (1, 1), (1, 2), (2, 3);

create view v_object_tag as
select o.id object_id, o.object, t.id tag_id, t.tag
from
    object o
    inner join
    object_tag ot on o.id = ot.object_id
    inner join
    tag t on t.id = ot.tag_id
; 
```

现在查询好像它是一个表：

```
select *
from v_object_tag
where tag in ('English', 'German')
;
 object_id | object | tag_id |   tag   
-----------+--------+--------+---------
         1 | o1     |      1 | English
         2 | o2     |      3 | German 
```

# mysql - mysql 选择没有在网站上发帖的用户

> ID：14106780
> 
> 赞同：-1
> 
> 时间：2012-12-31T23:25:51.423
> 
> 标签：mysql, join, mysql5

我想选择尚未发布工作的用户。

我试过这个：

```
SELECT 
    e.id, e.companyName, ee.emailAddress, ee.firstName, ee.surname    
FROM 
    employer as e, country as country, employerUser as ee , countryRegion as re, job as j 
WHERE 
    country.iso2=e.countryISO2FK AND ee.employerIDFK=e.id AND ee.originalUser=1 AND country.iso2='GB' AND (e.regionCodeFK ='GTL' AND e.regionCodeFK = re.code OR e.regionCodeFK ='' OR e.city ='' ) AND e.status=1 AND e.isActive=1 AND e.id=j.employerIDFK AND j.employerIDFK IS NULL 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:29:56.843

您正在使用带有过滤器的[CROSS JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)`WHERE`，它不会让您找到不存在的项目。您要使用的是“作业”表上的[LEFT JOIN ，如下所示：](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
SELECT e.id, e.companyName, ee.emailAddress, ee.firstName, ee.surname 
FROM employer as e
  JOIN country ON country.iso2=e.countryISO2FK
  JOIN employerUser as ee ON ee.employerIDFK=e.id
  LEFT JOIN job as j ON e.id=j.employerIDFK 
WHERE ee.originalUser=1 
  AND country.iso2='GB' 
  AND (e.regionCodeFK ='GTL' AND e.regionCodeFK = re.code OR e.regionCodeFK ='' OR e.city ='' ) 
  AND e.status=1 AND e.isActive=1  
  AND j.employerIDFK IS NULL 
```

# git - “锁定失败”错误

> ID：14106782
> 
> 赞同：7
> 
> 时间：2012-12-31T23:25:52.660
> 
> 标签：git, version-control, git-push

当我将分支从本地存储库推送到拇指驱动器时，我需要一些帮助来解决错误。我相信问题是由不同驱动器之间来回切换引起的。特别是，我丢失了一个并开始使用替代品。然后，当我找到原版时，我切换回了它。现在看来我的一些裁判/负责人搞砸了。例如，当我尝试推送分支时得到以下输出：

```
$ git push origin android-lite 
Counting objects: 111, done.
Compressing objects: 100% (98/98), done.
Writing objects: 100% (109/109), 29.63 KiB, done.
Total 109 (delta 40), reused 0 (delta 0)
error: unable to resolve reference refs/heads/android-lite: No such file or directory
remote: error: failed to lock refs/heads/android-lite
To /media/2AC0-E4E2/devel/src/java/bbct/
 ! [remote rejected] android-lite -> android-lite (failed to lock)
error: failed to push some refs to '/media/2AC0-E4E2/devel/src/java/bbct/'
$ 
```

如果我理解正确，这表示 refs/heads/android-lite 不存在于原点。但是，我很困惑为什么 git 不创建新分支。我的本地存储库中有什么东西表明 android-lite 分支已经存在于原点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:57:24.647

如果调试远程 repo 太复杂（如在[这个问题](https://stackoverflow.com/questions/4001847/git-problems-with-git-push-all)中，使用`git gc`, `git prune`, `git fsck`, ...）），您仍然可以：

*   [`git bundle`](http://git-scm.com/docs/git-bundle)你当前的仓库，只会给你一个文件，
*   将那个文件复制到远程驱动器上
*   来自该捆绑文件的 git clone
*   将您当前的远程地址设置为该新路径

这有点像“[如何同步两个 git 存储库](https://stackoverflow.com/questions/4860166/how-to-synchronize-two-git-repositories/4860455#4860455)”，并且为这个任务使用一个包是为了确保你没有任何文件错误副本。

# ruby-on-rails - 要求用户在 rails 上使用omniauth 登录

> ID：14106784
> 
> 赞同：1
> 
> 时间：2012-12-31T23:26:53.377
> 
> 标签：ruby-on-rails, ruby, omniauth

我在要求用户通过omniauth（使用twitter）登录时遇到了一些困难。我有一个 session_controller、用户模型和授权模型设置。

问题似乎是我无法访问omniauth哈希。有什么理由吗？

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :check_sign_in

  def check_sign_in
    omniauth = request.env["omniauth.auth"] 
    authentication = Authorization.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    unless authentication
        redirect_to signin_path
    end
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:35:09.937

你已经接近了，也许看[这个 RailsCast](http://railscasts.com/episodes/241-simple-omniauth)会让你到达那里。我跟着它走，像你一样走 Twitter 路线。它对我有用，所以你也应该成功。

在我的应用程序控制器中，我有

```
private
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

而且，在我的会话模型中，

```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    redirect_to root_url, :notice => "You are logged  in."
  end
  def destroy
    session[:user_id] = nil
    redirect_to root_url, :notice => 'You are logged out.'
  end
end 
```

在我的用户模型中

```
def self.from_omniauth(auth)
  where(auth.slice("provider", "uid")).first || create_from_omniauth(auth)
end

def self.create_from_omniauth(auth)
  create! do |user|
    user.provider = auth["provider"]
    user.uid = auth["uid"]
    user.name = auth["info"]["name"]
    user.nickname = auth["info"]["nickname"]
    user.image = auth["info"]["image"]
  end
end 
```

# java - android中用于节拍器的高分辨率计时器

> ID：14106786
> 
> 赞同：2
> 
> 时间：2012-12-31T23:28:09.633
> 
> 标签：java, android, timer, high-resolution

我正在尝试为 Android 创建一个节拍器，我编写了这段代码以使用 SoundPool 以 300BPM 的速度播放哔声，但它有时会跳过节拍并产生延迟。我已经研究过，我找到的所有答案都不能解决我的问题。当我尝试加快 bpm 计数或使用八分音符而不是四分音符（双倍时间）时，尤其会发生这种情况。有人可以指导我朝着正确的方向尽可能准确吗？延迟/跳拍是**不可接受**的。谢谢！！

```
 final SoundPool sndPool = new SoundPool(3, AudioManager.STREAM_MUSIC, 0);
     final int sndHigh = sndPool.load(this, R.raw.high, 1);
     setVolumeControlStream(AudioManager.STREAM_MUSIC);
     Thread th = new Thread(new Runnable(){
          public void run() {
            while(true){
                sndPool.play(sndHigh, 1f, 1f, 1, 0, 1f);
                //Log.d("asd", "beep");
                LockSupport.parkNanos(((240000/300)/4)*1000000); //300bpm
            }
          }
     });
     th.setPriority(Thread.MAX_PRIORITY);
     th.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T01:01:04.653

解决方案是根本不使用计时器或 SoundPool。而是使用您持续管理的低级 AudioTrack。您必须通过在缓冲区中的适当点将适当的样本插入 AudioTrack 来合成哔声或单击或其他任何内容。只需 Google AudioTrack 并查找有关如何使用它的示例。

# css - Clearfix自动删除边距0？

> ID：14106792
> 
> 赞同：0
> 
> 时间：2012-12-31T23:29:33.543
> 
> 标签：css, css-float, clearfix

clearfix 有问题...在使用时，它将删除我的 div 居中（margin 0 auto）。因此，以此为例，“容器”div 将向左浮动，而不是在“标题”中居中。“某些内容”将是没有定义高度的浮动项目。此时我只能使用 clear = display: block; 明确：两者；高度：0；宽度：100%；在最后的 div 中正确清除它们。

问题是什么？

例子 ：

```
<div id="header">
    <div class="container">
        <div>
            <p>some content</p>
        </div>
        <div>
            <p>some content</p>
        </div>
                          ****<div class="clear"></div>
    </div>
</div>

#header {width: 100%; margin: 0; padding: 0; clear:both;}

.container { clear:both; width: 960px; margin: 0 auto; padding: 0;}

.clearfix:after {
content: ".";
display: block;
clear: both;
visibility: hidden;
line-height: 0;
height: 0;
}

.clearfix {
display: inline-block;
}

html[xmlns] .clearfix {
display: block;
}

* html .clearfix {
height: 1%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-29T17:01:49.437

我刚遇到这个问题。要清除`margin: 0 auto;`，您可以使用`margin-left: 0;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:32:13.040

真的不需要像这样使用“clearfix”。你只需要提醒`container`它是一个包含元素，这很容易通过添加这个 CSS 规则来完成：

```
.container {
    overflow:auto;
    zoom:1; /* fix for older IE versions */
} 
```

然后您可以安全地删除 "clearfix" `div`，因为它不是必需的。

# android - 安装时出现“包文件未正确签名”错误

> ID：14106796
> 
> 赞同：2
> 
> 时间：2012-12-31T23:30:28.287
> 
> 标签：android, keytool, jarsigner

我创建了一个 Android 应用程序并将其发布在 Google Play 商店中。随后下载时，我收到“包文件未正确签名”错误。我调查并找到了条目：

[已发布的 Android apk 出现错误“包文件未正确签名”](https://stackoverflow.com/questions/2519374/published-android-apk-gives-error-package-file-was-not-signed-correctly)

我尝试了 JDK 6 解决方案（在 JDK 6 下编译和签名），但没有任何乐趣。我尝试在 2.3.3 和 4.x 设备上下载/安装，但都不起作用。就我而言，该应用程序是新的，因此密钥库也是（不是更新）新的。我会说新的密钥库最初是在 JDK 1.7 下创建的。

我很困惑如何解决这个问题，有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:51:15.157

I think I had this issue in the past. If you're using different folders for your layouts (for different screen size and different languages), can you check that the default folder for each resource is present ? (basically you need to have a folder res/drawable, res/layout, res/values etc... even if they're empty)

# sql - ORDER BY 2 可能为 NULL 的值

> ID：14106801
> 
> 赞同：0
> 
> 时间：2012-12-31T23:31:02.763
> 
> 标签：sql, sql-order-by

我想按两个日期排序，**startdate**和**enddate**，任何一个都可以为空。

1.  我想先按开始日期订购，然后按结束日期订购。
2.  如果结束日期为空，我根本不想按此订购。
3.  所有结束日期为空的开始日期都在所有结束日期的开始日期之前。
4.  如果开始日期为空，我希望这些条目位于列表的最后。（空开始日期将具有与之关联的空结束日期。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:35:42.507

这个 ORDER BY 子句应该这样做：

```
ORDER BY 
  CASE WHEN startdate IS NULL THEN 1 ELSE 0 END,
  startdate,
  CASE WHEN enddate IS NULL THEN 0 ELSE 1 END,
  enddate 
```

根据您的 DBMS，可能有更简单的方法来执行此操作，但不一定是可移植的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T23:35:48.047

如果您的数据库是 Oracle，那么您可以编写：

```
SELECT startdate, enddate
FROM yourtable
ORDER by startdate NULLS LAST, enddate NULLS FIRST; 
```

# java - 如何在java中创建自己的方法？

> ID：14106802
> 
> 赞同：-2
> 
> 时间：2012-12-31T23:31:35.023
> 
> 标签：java, methods

我一直在阅读 Barry Burd 的 Java for Dummies，这是一本 Java 初学者编程书籍，在我进入“创建自己的方法”部分之前，它一直很棒。我不太明白，或者实际上，我根本不明白。我在书中找到了这个例子。你能解释一下这个程序是做什么的，以及源代码中的所有内容吗？我真的很想知道。

（注意：以下几行是实际代码！）

* * *

```
import static java.lang.System.out;

public class Employee {
    private String name;
    private String jobTitle;

    public void setName(String nameIn) {
        name = nameIn;
    }

    public String getName() {
        return name;
    }

    public void setJobTitle(String jobTitleIn) {
        jobTitle = jobTitleIn;
    }

    public String getJobTitle() {
        return jobTitle;
    }

    public void cutCheck(double amountPaid) {
        out printf("Pay to the order of %s ", name);
        out.printf(""(% ***$", jobTitle);
        out.printf("%,.2f\n", amountPaid);
    }

} 
```

* * *

最终结果（成功编译然后运行程序时）：

* * *

```
Pay to the order of Barry Bird (CEO) ***$5,000.00
Pay to the order of Harriet Ritter (Captain) ****$7,000.00
Pay to the order of Your Name Here (Honorary Exec of the Day) ***$10,000.00 
```

* * *

至少，巴里·伯德假设这会发生，但事实并非如此。我无法在没有错误的情况下编译它。

最好的答案是对上面的源代码进行更正，并添加一些评论，但是，任何回复都将受到高度赞赏，不幸的是，我不经常检查我的 Stack Overflow 帐户，因此可能没有最佳答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T23:41:10.017

您在这里连续有两个引号导致它无法编译：

```
out.printf(""(% ***$", jobTitle); 
```

并且您在此处的“out”之后缺少一个点：

```
out printf 
```

该代码是一个带有 getter 和 setter 的 Java 类。还有一个使用 Java 5 的打印方法。（如果您使用的是非常旧的 Java 版本，这可能是它无法编译的另一个原因。）这是一种指定输出值格式的样式。

如果您仍然遇到问题，请发布实际的编译器错误。和所有的代码。这个类显然是由另一个调用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:46:38.170

检查这个：

```
package by.dev.madhead.demo;

import static java.lang.System.out;

public class Employee {
    private String name;
    private String jobTitle;

    public void setName(String nameIn) {
        name = nameIn;
    }

    public String getName() {
        return name;
    }

    public void setJobTitle(String jobTitleIn) {
        jobTitle = jobTitleIn;
    }

    public String getJobTitle() {
        return jobTitle;
    }

    public void cutCheck(double amountPaid) {
        out.printf("Pay to the order of %s ", name);
        out.printf("(%s)", jobTitle);
        out.printf(" ***$%,.2f\n", amountPaid);
    }

    public static void main(String args[]) {
        Employee e = new Employee();

        e.setName("Drake");
        e.setJobTitle("Programmer");

        e.cutCheck(57005.12);
    }
} 
```

# ruby-on-rails-3 - Rails Favicon 加载问题

> ID：14106803
> 
> 赞同：2
> 
> 时间：2012-12-31T23:31:47.690
> 
> 标签：ruby-on-rails-3, favicon

我有一个 favicon.ico 位于我的公用文件夹的根目录，我正在使用以下行将它加载到我的 application.html.erb 的 head 标记中

```
= favicon_link_tag 
```

我似乎只在 localhost 上遇到了这个问题，而且在我的测试过程中它似乎正在抛出 selenium，但它对加载真的很善变。有时它会在等待几分钟后加载，有时它根本不加载。有时当它在等待几分钟后加载时，它会导致之前（并成功）加载的其他图像启动并中断。这只是浏览器问题吗？我在 Chrome 和 Firefox 中都进行了测试。对于任何浏览器，我在任何其他网站上都没有这个问题。另外值得注意的是 - 在我的萤火虫和铬调试器中，我从未在网络选项卡中看到请求的图标，即使它偶尔加载？

我试过的：

*   将 favicon 放置在 public/images 和 assets/images 中
*   清除 Firefox 中的缓存
*   Chrome 隐身模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T17:39:08.033

刚刚用一个新的 Rails 3.2.13 和 Rails 4.0 应用程序对此进行了测试，它对我有用。favicon 会自动加载，而无需将帮助程序添加到您的应用程序布局中。

1) 确保文件在您的 rails_root/public 文件夹中

2) 确保文件名为 favicon.ico

# vb.net - 我正在尝试在 VB.net 中实现一个字典，其中的值可以是字符串或小数

> ID：14106807
> 
> 赞同：0
> 
> 时间：2012-12-31T23:33:06.153
> 
> 标签：vb.net, generics, dictionary

我从下面的代码开始

```
Public Class DictionaryFromExcel(Of itemType)
Implements IDictionary(Of String, itemType)

Private _Dictionary As Dictionary(Of String, itemType)
Public Sub New(ByVal FileName As String, ByVal Sheet As String, ByVal StartColumnName As String)
    MyBase.New()
    _Dictionary = New Dictionary(Of String, itemType)(System.StringComparer.OrdinalIgnoreCase) 
```

Visual Studio 2012 为其余代码创建了一个模板，为所有必需的例程留下了存根。除了 itemType 可以是字符串或小数之外，我对字典的正常实现非常满意。如何使用底层实现？

我试图通过调用底层实现来实现添加例程，但我收到一个错误，即 String 类型的值无法转换为 itemType。即使我实现了所有必需的例程，我仍然不知道如何从 itemType 转换为字符串/十进制。

```
_Dictionary.Add(key, value.ToString) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:39:52.850

您最好的选择是在字典上实现对象属性，例如

```
Dim dictionary As New Dictionary(Of String,  object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:08:38.460

由于您的类型并非旨在保存通用类型的数据，而是两种特定类型，因此您的类型没有理由应该是通用的。将其更改为简单`Class DictionaryFromExcel`的 .

一种方法是使用`Dictionary(Of String, Object)`, 并让您的类型实现`IDictionary(Of String, Object)`。另一种方法是使用 a`Dictionary(Of String, String)`来保存字符串，并使用 a`Dictionary(Of String, Decimal)`来保存数字；然后，您的集合可以提供的只读实现`IDictionary(Of String, Object)`（可以读取存储在任一字典中的内容），具有`Strings`返回实现的包装器对象`IDictionary(Of String, String)`的属性，以及`Decimals`返回实现的包装器对象的属性`IDictionary(Of String, Decimal)`。

前一种方法可以不受限制地在字典中存储任何类型的数据；这可能是也可能不是一件好事。调用者还必须在他们想要使用它的任何时候对从您的对象读取的任何数据进行类型转换。后一种方法会导致您的类型被硬编码以处理`Decimal`and `String`，但是访问您的类型的用户`myThing.Decimals("George")`可以使用返回的值作为 a`Decimal`而没有类型转换。后一种方法的最大弱点是您必须决定如果代码执行`myThing.Decimals("Fred")=4.4d`then会发生什么`myThing.Strings("Fred")="Flintstone"`。让后一个调用无效`myThing.Decimals("Fred")`会令人惊讶，但如果不是，则不清楚`myThing("Fred")`应该返回什么。

# vows - 如何在 flatiron 中测试 HTTP 服务器

> ID：14106809
> 
> 赞同：0
> 
> 时间：2012-12-31T23:34:18.453
> 
> 标签：vows, flatiron.js

我正在使用[flatiron](https://github.com/flatiron/flatiron)网站上的尽可能简单的 Web 服务器，并想尝试用誓言测试它。我可以让测试通过，但测试永远不会退出。我认为这是因为我的熨斗服务器从不关闭。如何关闭服务器或有更好的方法使用另一种技术进行简单的 http 测试？

**服务器.js**

```
var flatiron = require('flatiron'),
    app = flatiron.app;

app.use(flatiron.plugins.http);

app.router.get('/', function () {
  this.res.writeHead(200, { 'Content-Type': 'text/plain' });
  this.res.end('Hello world!\n');
});

app.start(8000); 
```

**服务器-test.js**

```
var request = require('request'),
    vows = require('vows'),
    assert = require('assert');

vows.describe('Hello World').addBatch({
  "A GET to /": {
    topic: function () {
      server = require('../server');
      request({
        uri: 'http://localhost:8000',
        method: 'GET'
      }, this.callback)
    },
    "should respond with 200": function (error, response, body) {
      assert.equal("Hello world!\n", body);
    },
    teardown: function (topic) {
      // *********************************
      // Do something to shutdown flatiron
      // *********************************
    }
  }
}).export(module); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:07:54.423

您需要导出服务器才能将其关闭。只需在**server.js**中添加：`module.exports = app;`

现在，您可以使用 server var 关闭 flatiron。文档对如何关闭它并不太冗长，但我设法用`app.server.close()`. 以下是文件：

**服务器.js**

```
var flatiron = require('flatiron'),
    app = flatiron.app;

module.exports = app;

app.use(flatiron.plugins.http);

app.router.get('/', function () {
  this.res.writeHead(200, { 'Content-Type': 'text/plain' });
  this.res.end('Hello world!\n');
});

app.start(8000); 
```

**服务器-test.js**

```
var request = require('request'),
    vows = require('vows'),
    assert = require('assert');

var app = require('./server');

vows.describe('Hello World').addBatch({
  "A GET to /": {
    topic: function () {
      request({
        uri: 'http://localhost:8000',
        method: 'GET'
      }, this.callback)
    },
    "should respond with 200": function (error, response, body) {
      assert.equal("Hello world!\n", body);
    },
    teardown: function (topic) {
      app.server.close();
    }
  }
}).export(module); 
```

# javascript - 在 Javascript 中设置函数的最佳方法（可能通过闭包？）

> ID：14106810
> 
> 赞同：1
> 
> 时间：2012-12-31T23:34:26.567
> 
> 标签：javascript, json, performance, closures, memory-efficient

我有一个 Web 应用程序，它调用一个 Web 服务，该服务返回一些表示对象数组的 JSON。每个对象都有一些字段。下面是一些示例 JSON 来给出一个想法：

```
{
   "data": [
      {
         "id": "12345",
         "from": {
            "name": "John Doe",
            "id": "6789"
         },
         "start_time": "2012-12-16T02:17:20+0000",
         "end_time": "2012-12-16T02:17:20+0000",
         "publish_time": "2012-12-16T02:17:20+0000"
         }
      },
      {
         "id": "8888",
         "from": {
            "name": "Jane Smith",
            "id": "011"
         },
         "start_time": "2012-12-16T02:17:20+0000",
         "end_time": "2012-12-17T02:17:20+0000",
         "publish_time": "2012-12-16T02:17:20+0000"
         }
      }
   ]
  } 
```

一旦返回，我使用 jQuery 的 parseJSON() 方法将其膨胀为对象数组（保留“数据”值）。这一切都很好，但是在我拥有我的数组之后，我有几个可以在每个数组插槽上运行的函数。例如，假设有一个名为 GetDuration() 的函数将打印出 end_time 和 start_time 之间的时间间隔。无论如何，我定义了几个函数（可能是 15 个），此时，我只需遍历整个数组并使用函数的副本对每个对象进行膨胀。例子

```
for (var i=0;i<data.length;i++)
 data[i].TimeLapse = function() { ... }; 
```

我认为这可以提高效率。现在，我认为每个数组项都有一个相同函数的单独副本，这不是必需的。我还注意到处理时间的滞后，我希望可以减少。我读过关于 javascript 闭包的文章，在这种情况下它们似乎可以帮助我，但我没有太多在闭包中编写函数的经验。我会设置闭包然后修改 JSON 以某种方式膨胀到闭包类型的对象吗？或者我会像我今天所做的那样膨胀到常规的 javascript 对象，然后以某种方式通过并更改对象类型以指向我创建的闭包？

任何想法或建议将不胜感激。

谢谢...

-本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:48:59.310

1.  If you have to loop over each element of data, why not calculate the duration for each item and just add it as a property?

2.  If you're willing to copy all the properties of each data object to a new one, you could use a prototype on the constructor of that object, and add functions such as `timeLapse` to the prototype. Then all your data objects are wired up to work through prototypical inheritance. But this is a lot of extra work and may not be performant.

3.  Instead of using straight JSON, you could use JSONP or a variant where the returned code is executed. Something like this:

    ```
    {
       "data": [
          new DataItem(
             12345",
             {
                "name": "John Doe",
                "id": "6789"
             },
             "2012-12-16T02:17:20+0000",
             "2012-12-16T02:17:20+0000",
             "2012-12-16T02:17:20+0000"
          ),
          // ... and so on ...
       ]
    } 
    ```

    You do have to be careful about executed code as opposed to straight up object notation (which is prevented from executing code, it's only allowed to have values), but I believe it can be done safely. For example, you could instead of saying `new DataItem()` just embed an array for each final object, then loop over them and convert the arrays to objects using [the technique here](http://www.bennadel.com/blog/2291-Invoking-A-Native-JavaScript-Constructor-Using-Call-Or-Apply-.htm), `apply`ing with the `new` keyword and passing in the item array to `DataItem` to get a new prototype-wired object.

4.  Adding a function to each item in your `data` array could theoretically take more memory than necessary. Depending on how much time vs. space you want to trade off, there are other options. For example:

    ```
    function ItemWrapper(dataobj) {
        for (key in dataobj) {
           if (!dataobj.hasOwnProperty(key)) { continue; }
           this[key] = dataobj[ky];
        }
        this.timeLapse = (new Date(this.end_time)).getTime() - (new Date(this.start_time)).getTime(); // assign simple static properties
    }

    ItemWrapper.prototype.dynamicFn = function () {
       return this.x - this.y; // changeable properties accessed as functions
    }

    var currentObj = new ItemWrapper(data[23]);
    console.log(currentObj.timeLapse); // static
    console.log(currentObj.dynamicFn()); //dynamic 
    ```

    The question is: do you want to perform this wrapping at *use* time, or at *parsing* time? Doing this at parsing time is actually my suggestion #2\. But this suggestion is to do it only when you need a particular item. I don't know your pattern of item access so this may not be ideal, but it is at least an option.

5.  Use `apply` or `call`:

    ```
    function timeLapse() {
       return (new Date(this.end_time)).getTime() - (new Date(this.start_time)).getTime();
    }

    var Item16Elapsed = timeLapse.apply(data[16]); 
    ```

    This way you're not attaching functions all over the place, you're not converting objects to new prototype-wired objects, but you have to call things a little differently.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:51:50.503

我认为您的意思是您想使用 JSON 来设置不同类型对象的属性，每个对象都有自己的方法？目前尚不清楚您在追求什么，或者目前正在做什么。但如果我是对的，那你肯定做错了。

简而言之，*不要*向您的数据添加函数。相反，*请*使用可以接受创建数据的方法创建类。

```
// Constructor, accepts an object expected to have data about a user
var User = function(data) {

  // save a field from the passed in user data on this instance
  this.name = data.name;
};

// a method every User object will have that uses some bit of user data
User.prototype.sayHi = function() {
  alert('Hi, my name is ' + this.name);
};

// A place to put our new user objects
var users = [];

// An array of objects to iterate through
var jsonData = [
  {name: 'Joe'},
  {name: 'Sally'}
];

// Iterate through the array
for (var i = 0; i < jsonData.length; i++) {

  // make a user, passing the constructor the data object for that user
  users.push( new User(jsonData[i]) );
}

users[0].sayHi(); // alerts: "Hi, my name is Joe"
users[1].sayHi(); // alerts: "Hi, my name is Sally" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T23:52:10.720

正如其他人在评论中所写，尚不清楚您想要什么，但这听起来最接近您所描述的：

```
function make_duration_fun(x) {
    return function() { return GetDuration(x.start_time, x.end_time); };
} 
```

然后你的循环可以做：

```
data[i].TimeLapse = make_duration_fun(data[i]); 
```

只有一个持续时间函数，但每次调用`make_duration_fun`时都会得到一个具有相同函数和不同`x`绑定的新闭包。

# ruby-on-rails - 将国家/地区默认设置为“美国”

> ID：14106811
> 
> 赞同：7
> 
> 时间：2012-12-31T23:34:36.400
> 
> 标签：ruby-on-rails

我正在尝试将表单中国家/地区输入的默认值设置为“美国”。我正在使用简单的表单 gem 和国家选择 gem。

在简单的表单初始化程序中，我设置了这个默认值

```
 config.country_priority = [ "United States" ] 
```

这使得最高值正确为美国，但默认值为“乌干达”。

在 _form 视图中，我执行了以下操作：

```
<%= f.input :country, :default => [ 'United States' ] %> 
```

我重新启动了 Rails，它仍然默认为乌干达。

我还尝试了以下方法：

```
<%= f.input :country, :default => 'United States' %> 
```

和

```
<%= f.input :country, :selected => 'United States' %> 
```

接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T06:00:32.703

尝试这个，

```
<%= form.country_select :country, ["United States"] %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-10T12:26:13.283

我用简单形式的 gem 'country_select' 尝试了这个。它对我有用。

```
= f.input :country,  priority: [ "Brazil" ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-29T18:05:12.673

我知道这是一个旧线程，但我最近才这样做，并认为我会分享以帮助他人。我正在使用 Rails 4.2.0、country_select (2.1.1) 和 simple_form (3.1.0)。这对我有用：

`<%= f.input :country, selected: 'US' %>`

如果要防止用户更改选择，请`:disabled`像这样使用：

`<%= f.input :country, selected: 'US', disabled: true %>`

只是为了澄清`:priority`其他答案中的选项，这只给予该国家更高的优先级（即，它将将该国家放在下拉列表的顶部），它实际上并没有选择该国家。希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-06T14:16:12.170

我正在使用它并且它有效。使用 formtastic gem，添加以下行。

```
 <% f.input :address_country, :as => :country, :priority_countries => ["United States", "United Kingdom","Australia", "New Zealand"] %> 
```

注意：数组中的国家是优先显示在全球所有国家之前的国家。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-18T12:24:57.217

您需要使用国家代码而不是国家名称：

```
<%= form.country_select :country, ["US"] %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T21:03:18.520

我最终没有使用 gem - 太复杂了。我刚刚创建了一个常量 COUNTRIES 并改用它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-11T15:30:46.050

我刚遇到这个问题。[它正在处理https://github.com/stefanpenner/country_select](https://github.com/stefanpenner/country_select)的 3fb63542c085148bcea73198037d37f15c6154d7 github 修订版：

```
<%= f.country_select :country, selected: 'US' %> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-31T23:40:40.280

您只需要做：

```
<%= f.country_select("user", "country_name", [ "United States" ]) %> 
```

[您正在使用的模型](https://github.com/stefanpenner/country_select#example)`user`的名称在哪里。

# javascript - jQuery 在 ASP.Net 网络表单中不起作用

> ID：14106813
> 
> 赞同：0
> 
> 时间：2012-12-31T23:34:55.813
> 
> 标签：javascript, jquery

我的 jQuery 根本不工作（使用母版页的 ASP.Net 网络表单）。

以下脚本甚至没有设置警告框（它位于主要内容部分的 .aspx 页面中）

```
<script>
    $(document).ready(function () {
        alert("working");
    });​
</script> 
```

我的母版页来自 google api 的 jquery，编码如下；

```
<link href="Styles/Site.css" rel="stylesheet" type="text/css" />
<link href="Styles/nav.css" rel="stylesheet" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="Scripts/modernizr-2.6.2.js"></script>
<link href="Content/jquery.lightbox.css" rel="stylesheet" type="text/css" />
<script src="Scripts/jquery.lightbox.min.js" ></script> 
```

任何帮助，将不胜感激。我以前在这个站点上运行过脚本，但现在该脚本无法运行，即使在其他页面上也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T15:24:39.163

在您添加的 jquery 的 Google 地址的 src 中添加 http。

# android - Android 操作栏自定义背景故障

> ID：14106814
> 
> 赞同：1
> 
> 时间：2012-12-31T23:35:18.780
> 
> 标签：android, android-actionbar, drawable

我创建了一个名为 ActionbarBackground 的自定义 Drawable 类，它为我的 Actionbar 的背景实现了一些特殊的绘图行为。当我在平板电脑上测试应用程序时，出现以下故障：

当应用程序启动时，actionbar 的内容被绘制在背景下方，将整个 Activity 的内容向下推。

例子： ![在此处输入图像描述](../Images/eae2180c2dc6111718b28e1d274446f3.png)

触摸屏幕后，重新绘制完成，操作栏的内容完全消失。Activity 的内容然后向上移动。

例子： ![在此处输入图像描述](../Images/fc8aa417c1cd2e3bcc8bfe11e4b3748b.png)

这个问题发生在 2 个活动中，我不知道为什么。我尝试从 XML 资源提供自定义可绘制对象，一切正常，但此背景需要编程绘图。

操作栏设置如下：

```
this.getActionBar().setDisplayShowTitleEnabled(false);
this.getActionBar().setIcon(R.drawable.actionbar_icon_and_title);
this.getActionBar().setBackgroundDrawable(new ActionbarBackground(this)); 
```

ActionbarBackground 的实现通常如下所示：

```
@Override
public void draw(Canvas canvas) 
{
    // Do special drawing on canvas object
}

@Override
public int getOpacity() {
    return PixelFormat.OPAQUE;
}

@Override
public void setAlpha(int alpha) {
    // Do nothing
}

@Override
public void setColorFilter(ColorFilter filter) {
    // Do nothing
} 
```

任何想法为什么会发生这种情况以及如何解决它？

# vb.net - 使用 VB 使用 OpenFileDialog 中的文件名填充列表视图

> ID：14106817
> 
> 赞同：1
> 
> 时间：2012-12-31T23:36:46.030
> 
> 标签：vb.net, listview, visual-studio-2012, rows, openfiledialog

我正在尝试使用列表视图来显示用户选择进行处理的文件。

到目前为止，我有：

```
If fd.ShowDialog() = Windows.Forms.DialogResult.OK Then
    posFilename = fd.FileName
    For Each posfilename As String In fd.FileNames
        ListView1.Items.Add(Path.GetFileName(posfilename))
    Next
End If 
```

我希望每个文件名都位于单独的行中，但结果却是在单独的列中为我提供了文件名。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T23:54:53.673

从您描述的症状来看，听起来您 ListView1 实际上是一个 ListViewItem 并且您正在添加列。当我使用 listview 和 OpenFileDialog 创建示例应用程序时，它按预期工作。

为了清楚起见，您的列表视图设置为详细信息视图，对吗？

# python - 如何使“while”循环将循环条件的结果打印到单行（连接）中？

> ID：14106819
> 
> 赞同：1
> 
> 时间：2012-12-31T23:37:28.447
> 
> 标签：python, while-loop

所以这是我的代码：

```
test = {
    'a':1, 'b':2 , 'c':3 , 'd':4
}

x = raw_input("Type 'abcd' ")
y = len(x)
z = 1
while z < y+1:
    a = x[z-1]
    print test[a]
    z = z + 1 
```

重点是制作一个基本的编码器，显然这段代码只是为了建立一个我可以构建的准代码。我的问题是这样的：

我不能将'while'循环的结果打印成一行，这样，不仅打印成一行，而且连接成一个更大的整数（或字符串，比如说代码显示字母而不是整数，以从这些字母创建字符串）。虽然，在这段代码中，我希望代码的结果是整数“ **1234** ”。不是：

```
1
2
3
4 
```

从本质上讲，我的问题是：如何使 while 循环的结果以连接整数（或字母）以创建更大的数字（或字符串）的方式打印？我不想要结果 1 2 3 4

变成 10，但我希望它变成整数**1234**。我在网上查过，但我找不到任何适合我的东西。事实上，我什么也没找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T23:41:58.033

首先，`while`在这里使用循环不是最佳选择，而是使用`for`循环，它旨在循环遍历数据结构之类的迭代器（字符串只是一个字符序列）：

```
for character in x:
    print(test[character]) 
```

然后不要打印字符，而是将它们存储在列表中。

```
characters = []
for character in x:
    characters.append(str(test[character])) 
```

然后我们可以将它们连接成一个字符串（我们之前制作了数字字符串以使这一步更容易），并`int`从该字符串中创建一个：

```
int("".join(characters)) 
```

Python 支持一种更简单的方法来进行这种列表构造 -[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
characters = [str(test[character]) for character in x] 
```

这会产生与上面的 for 循环相同的列表，但更快更简洁。

这意味着我们可以将您的程序编写为：

```
test = {'a': 1, 'b': 2 , 'c': 3 , 'd': 4}

user_input = raw_input("Type 'abcd':")

number = int("".join(str(test[character]) for character in user_input)) 
```

作为将数字字符串连接起来然后恢复的替代方法，我们也可以用数学来做：

```
number = sum((10 ** power) * test[character] 
             for power, character in enumerate(reversed(user_input))) 
```

我们在这里所做的是从右边开始，取每个数字，乘以它所在列的 10 的幂，然后求和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T23:39:10.103

简单的答案是：不要在`while`循环内打印，而是连接一个字符串以在最后打印：

```
result = ''
while z < y+1:
    a = x[z-1]
    result += str(test[a])
    z = z + 1
print result 
```

如果要处理一大堆事情，不要在运行中连接字符串，而是在末尾使用 a`list`和：`join`

```
result = []
while z < y+1:
    a = x[z-1]
    result.append(str(test[a]))
    z = z + 1
print ''.join(result) 
```

但是你说你想得到一个整数。除了打印出来之外，您是否需要该整数？如果是这样，您*可以*构建一个字符串，然后将其转换为整数：

```
result = []
while z < y+1:
    a = x[z-1]
    result.append(str(test[a]))
    z = z + 1
val = int(''.join(result)) 
```

但这是愚蠢的。为什么不首先将值构建为整数？

```
val = 0
while z < y+1:
    a = x[z-1]
    val = val * 10 + test[a]
    z = z + 1 
```

由于您似乎使用的是 Python 2，因此打印而不添加换行符的唯一方法是添加一个空格，这无济于事。但是 Python 3 和 Python 2 有`from __future__ import print_function`一个更灵活的选择：

```
while z < y+1:
    a = x[z-1]
    print(test[a], end='')
    z = z + 1
print() 
```

或者您可以`write`直接到`stdout`：

```
while z < y+1:
    a = x[z-1]
    sys.stdout.write(str(test[a]))
    z = z + 1
sys.stdout.write('\n') 
```

# django - 在 Django 1.4 中找不到静态文件

> ID：14106820
> 
> 赞同：1
> 
> 时间：2012-12-31T23:37:37.277
> 
> 标签：django, deployment, django-staticfiles, django-1.4, django-static

在部署 Django 应用程序时。我遇到了静态文件的问题。我在静态目录中有 JS 和 CSS 文件。但是浏览器无法找到这些文件。我在与服务器操作系统相同的 ubuntu 本地机器上有相同的文件和设置，并且在本地工作。尽管它具有相同的设置，但我将在下面粘贴该静态目​​录和文件设置。

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(ROOT_PATH,'static')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS =(
                os.path.join(ROOT_PATH,'static'),
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

上面代码中的根路径在此之前定义为：

```
import os
#from django.contrib.sites.models import Site
ROOT_PATH = os.path.dirname(__file__) 
```

我正在将 mod_wsgi 与 apache2 一起使用，据我了解，它应该在加载 /somefoldername 时找到文件，然后浏览器应该进入该目录但没有找到问题所在。要了解环境和 wsgi 设置等，我在这里关注的是我发布了我的 wsgi 文件详细信息及其工作方式的问题：[转移到服务器后 Django 站点上出现 500 服务器错误](https://stackoverflow.com/questions/14076643/500-server-error-on-django-site-after-shifting-to-server)

我在查找应用程序和其他模板和模块等时经常遇到问题。即使在服务器上的 syncdb 命令中，对于模板我附加了根路径并且它开始工作还在 wsgi 文件中添加了项目路径，但仍然没有解决静态文件问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:44:14.730

当您运行“collectstatic”时，是否所有文件都复制到了 STATIC_ROOT？ *您应该首先验证这一点，以便您知道文件应该在哪里。*

您是否已将 apache 配置为将 STATIC_ROOT 中的静态文件作为“/static/”提供服务？*Django 不会在生产环境中为您提供静态文件（DEBUG=False），因此您需要配置 Web 服务器软件来为您提供文件。*

另外，我认为您不希望您的 STATICFILES_DIRS 包含与 STATIC_ROOT 相同的路径。文件**从**STATICFILES_DIRS中的目录复制**到**STATIC_ROOT。您的 STATICFILES_DIRS 应该包含在“collectstatic”期间不会以其他方式搜索的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:19:11.557

Django 文档涵盖了该主题。看：

*   [https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-files](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T21:03:53.613

警告

这仅在 DEBUG 为 True 时有效。

**那是因为这种观点非常低效并且可能不安全。这仅用于本地开发，绝不能在生产中使用。**

如果您仍然需要在本地提供静态服务器（例如，无需调试的测试），您可以在不安全模式下运行开发服务器：

```
python manage.py runserver --insecure 
```

享受欢呼:)

# algorithm - 在 O(n) 时间内将堆转换为 BST？

> ID：14106821
> 
> 赞同：9
> 
> 时间：2012-12-31T23:37:45.747
> 
> 标签：algorithm, data-structures, big-o, binary-search-tree, binary-heap

我认为我知道答案并且最小复杂度是**O(nlogn)**。

但是有什么方法可以从**O(n)**复杂度的堆中创建二叉搜索树？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-01T01:55:29.583

没有在 O(n) 时间内从堆构建 BST 的算法。原因是给定 n 个元素，您可以在 O(n) 时间内从它们构建一个堆。如果您有一组值的 BST，则可以通过执行中序遍历在 O(n) 时间内对它们进行排序。如果您可以在 O(n) 时间内从堆中构建 BST，那么您可以通过以下方式获得 O(n) 排序算法

1.  在 O(n) 时间内构建堆，
2.  在 O(n) 时间内将堆转换为 BST，并且
3.  在 O(n) 时间内遍历 BST 以获得排序序列。

因此，不可能在 O(n) 时间内（或在 o(n log n) 时间内，其中 o 是**[little-o 表示法](http://en.wikipedia.org/wiki/Big_O_notation#Little-o_notation)**）将堆转换为 BST。

但是，可以在 O(n log n) 时间内从堆中构建 BST，方法是重复从 BST 中取出最大值并将其作为树中最右边的节点插入。（您需要在此处存储一个指针以便快速访问；只需在根处重复插入将花费 O(n ² ) 时间。）

希望这可以帮助！

# django - $sent_http_content_language 不起作用

> ID：14106823
> 
> 赞同：2
> 
> 时间：2012-12-31T23:38:59.620
> 
> 标签：django, nginx

我的 django 网站有 2 种语言，当语言发生变化时，nginx 会使用旧语言访问缓存并且语言不会改变（当然，缓存页面不会改变）。为防止发生这种情况，我需要将“$sent_http_content_language”变量添加到我的“proxy_cache_key”但无法正常工作，即使我尝试了：

```
 add_header Test $sent_http_content_language; 
```

[http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER](http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER)

![我的响应标头](../Images/00b7ea3da36db3eb360e3b8556a0c4e8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T01:49:42.620

我要试一试...`$sent_http_HEADER`对于缓存键没有多大意义，因为这是*响应*的一部分。nginx 在实际联系上游服务器并执行请求之前无法访问响应。

请注意，nginx 无法告诉上游服务器“嘿...根据响应标头，您刚刚发送，我将从缓存中处理其余的请求”。

所以......如果您无法从*请求*中得知响应已经在缓存中，那么您根本无法使用缓存。

解决此问题的一种方法是使用 cookie；您可以将用户的语言偏好添加到 cookie 中，该 cookie 将由客户端在后续请求中返回。由于该值存在于请求中，因此您可以在缓存键中使用它（例如`$cookie_lang`，如果响应具有`Set-Cookie: lang=tr`）。

* * *

这有一个相关的问题；即使您在服务器上有这种缓存，使用响应的 Language 标头，也可以正常工作；您仍然不会在客户端中看到更新；因为它会在*浏览器缓存*中。您无法关闭该缓存，也无法控制它，除非使用少数缓存控制标头。从您发布的内容来看，它们似乎已经以合理的方式设置（5 分钟过期，Vary header lists `cookie`）。这意味着您必须遵守该承诺，并且*仅*根据这些请求标头更改响应内容。

幸运的是，添加一个 cookie 来表达语言*确实*尊重您正在使用的缓存控制标头。

# jquery - 按钮点击事件无响应

> ID：14106825
> 
> 赞同：1
> 
> 时间：2012-12-31T23:39:17.293
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 表单验证插件，当用户在表单为空时单击提交按钮时，我需要显示错误。但是，我的点击事件没有响应。

```
 <!DOCTYPE HTML>
    <html>
     <head>
        <link type = "text/css" rel="stylesheet" href="css/bootstrap.css" />
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
           <script type="text/javascript" src="http://jzaefferer.github.com/jquery-           validation/jquery.validate.js"></script>
           <script src="js/bootstrap.js"> </script>

           <script> 
                 $('#submit').click(function(){ 
                                 $('form').validate()
                             }); 

        </script> 
     </head>
     <body> 
     <form class = "well span6"> 

     <label> Username </label> 
     <input type="text" id = "myName" class ="span3" placeholder ="Type your username     here..." class = "required"/> 

      <label> Password</label> 
     <input type="text" id "myPassword" class ="span3" placeholder ="Type your password here..." class = "required"/> <br/> 

     <button id = "submit" class ="btn btn-primary">Submit </button>
     <button class = "" > Clear <br/></button><br/> 
     </form> 

     </body> 

    </html> 
```

任何帮助都将受到赞赏和奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:42:51.463

只需在文档准备好时将验证附加到表单，它会在用户尝试提交时自动验证：

```
$(function () {
    $("form").validate();
}); 
```

该`validate()`函数实际上并不执行验证，它只是初始化插件并将其附加到指定的表单。如果要执行按需验证，可以`valid()`在初始化后调用。但是，如果您只想在提交期间自动完成验证，则不需要这样做，这是插件的默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:31:08.093

当您绑定`.validate()`到一个`click`或`submit`事件时，您只是在第一次单击时首先初始化插件。由于第一次单击按钮时验证插件尚未准备好，因此没有任何反应或行为异常。

正如已经指出的，您只需要在准备好 DOM 时初始化插件。该插件已经内置了事件处理程序，负责在各种事件（包括`submit`点击）上自动验证表单。

```
$(document).ready(function() {
    $('form').validate();
});​ 
```

* * *

您的元素上还有**两个** `class`属性`input`导致`required`该类被忽略。

```
<input type="text" id="myName" class="span3" placeholder="Type your username here..." class="required" /> 
```

只需将它们组合起来：

```
<input type="text" name="myName" id="myName" class="span3 required" placeholder="Type your username here..." /> 
```

我还将`name`属性添加到每个`input`元素。

工作演示：

[http://jsfiddle.net/ZjVWd/](http://jsfiddle.net/ZjVWd/)

# ios - 需要限制 UITextField 的大小，与文本长度和文本编辑无关

> ID：14106826
> 
> 赞同：1
> 
> 时间：2012-12-31T23:39:19.473
> 
> 标签：ios, uitextfield, xib

有没有办法`UITextField`在调用 setText 后限制 a 的帧大小？所有其他问题似乎都与用户编辑后根据字符串调整大小有关，或者在编辑时限制字符串本身的大小。

UITextField 从 IB 初始化，然后在 viewDidLoad 中调用 setText。是`UITextField`一个`UINavigationItem`在一个`UINavigationBar`。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *theURL = [NSString stringWithFormat:@"http://stackoverflow.com/questions/ask/ThisIsABogusURLForExamplePurposes.htm"];
    [_addressBar setText:theURL];
} 
```

在这种情况下，我确实需要用户能够编辑字符串，但它也是在第一次呈现视图时在代码中设置的。在 IB 中，我将宽度设置为所需的最大宽度，如果我`UITextField`用一个小字符串填充它，它仍然是那个大小。但是，使用任何导致文本超出字段宽度的字符串调用 setText 会导致其将`UITextField`宽度拉伸到`UINavigationBar`. 在调用 setText 后，我​​尝试以编程方式设置字段的帧大小，但似乎没有效果。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:15:06.627

我有一个类似的问题，我无法使用界面生成器解决它。我所做的是以编程方式将具有固定大小的地址栏添加到特定大小的 UIView 中。然后将此 UIView 设置为导航项的 titleView。

这将左对齐文本字段，并在您旋转设备时再次重新计算其位置（这就是我覆盖 viewWillLayoutSubviews 的原因）。

```
 - (void)viewWillLayoutSubviews
{
    NSString *theURL = [NSString stringWithFormat:@"http://stackoverflow.com/questions/ask/thisIsABogusURLForExamplePurposes.htm"];

    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.navigationController.navigationBar.frame.size.width, 30.0)];
    UITextField *addressBar = [[UITextField alloc] initWithFrame:CGRectMake(0.0, 0.0, 200.0, 30.0)];
    [addressBar setBorderStyle:UITextBorderStyleRoundedRect];
    [addressBar setText:theURL];

    [containerView addSubview:addressBar];
    [[self navigationItem] setTitleView:containerView];
} 
```

# java - 没有这样的表问题

> ID：14106829
> 
> 赞同：1
> 
> 时间：2012-12-31T23:39:32.083
> 
> 标签：java, android, sql, eclipse

另一个涉及 SQLite 方面的 Java 问题。

我已经运行了我的应用程序，一切都很好，直到我来添加插入的数据。我在“12-31 22:54:51.133: I/Database(273): sqlite returned: error code = 1, msg = no such table: peopleTable”的 Log cat 中收到错误。这显然导致了我不能使用我的插入方法添加到数据库的事实。

我尝试重命名数据库，但我的表创建语句或我的 onCreate/Upgrade 方法看不到任何问题。

继承人的代码：

代码：

```
public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_HOTNESS + "TEXT NOT NULL);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        db.execSQL("DROP TABLE IF EXCISTS" + DATABASE_TABLE);
        onCreate(db);
    } 
```

和日志猫：

```
12-31 22:54:51.133: I/Database(273): sqlite returned: error code = 1, msg = no such    table: peopleTable
12-31 22:54:51.158: E/Database(273): Error inserting persons_hotness=5 persons_name=F
12-31 22:54:51.158: E/Database(273): android.database.sqlite.SQLiteException: no such table: peopleTable: , while compiling: INSERT INTO peopleTable(persons_hotness,  persons_name) VALUES(?, ?);
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
12-31 22:54:51.158: E/Database(273):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
12-31 22:54:51.158: E/Database(273):    at com.example.sqliteexample.HotOrNot.createEntry(HotOrNot.java:174)
12-31 22:54:51.158: E/Database(273):    at com.example.sqliteexample.SQLiteExample.onClick(SQLiteExample.java:57)
12-31 22:54:51.158: E/Database(273):    at android.view.View.performClick(View.java:2408)
12-31 22:54:51.158: E/Database(273):    at android.view.View$PerformClick.run(View.java:8816)
12-31 22:54:51.158: E/Database(273):    at android.os.Handler.handleCallback(Handler.java:587)
12-31 22:54:51.158: E/Database(273):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-31 22:54:51.158: E/Database(273):    at android.os.Looper.loop(Looper.java:123)
12-31 22:54:51.158: E/Database(273):    at android.app.ActivityThread.main(ActivityThread.java:4627)
12-31 22:54:51.158: E/Database(273):    at java.lang.reflect.Method.invokeNative(Native Method)
12-31 22:54:51.158: E/Database(273):    at java.lang.reflect.Method.invoke(Method.java:521)
12-31 22:54:51.158: E/Database(273):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-31 22:54:51.158: E/Database(273):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-31 22:54:51.158: E/Database(273):    at dalvik.system.NativeStart.main(Native Method)
12-31 23:17:38.508: W/KeyCharacterMap(273): No keyboard for id 0
12-31 23:17:38.508: W/KeyCharacterMap(273): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-31 23:17:40.238: D/AndroidRuntime(273): Shutting down VM
12-31 23:17:40.238: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-31 23:17:40.259: E/AndroidRuntime(273): FATAL EXCEPTION: main
12-31 23:17:40.259: E/AndroidRuntime(273): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.example.sqliteexample.SQLView }
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.app.Activity.startActivityForResult(Activity.java:2817)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.app.Activity.startActivity(Activity.java:2923)
12-31 23:17:40.259: E/AndroidRuntime(273):  at com.example.sqliteexample.SQLiteExample.onClick(SQLiteExample.java:94)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.view.View.performClick(View.java:2408)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.view.View$PerformClick.run(View.java:8816)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.os.Handler.handleCallback(Handler.java:587)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
12-31 23:17:40.259: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-31 23:17:40.259: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
12-31 23:17:40.259: E/AndroidRuntime(273):  at    java.lang.reflect.Method.invoke(Method.java:521)
12-31 23:17:40.259: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-31 23:17:40.259: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-31 23:17:40.259: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T23:46:31.953

```
KEY_HOTNESS + "TEXT NOT NULL);"); 
```

看起来它可能会导致问题。2 个字符串值之间是否有空格 ( `" "`)，就像表声明中的其他列一样？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T23:44:53.067

更改`EXCISTS`为`EXISTS`它会起作用（或至少会解决您的一个问题）
；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T19:52:18.593

泰为你的帮助家伙。调整为你们看到的错误的组合，加上我在 upGrade 上使用相同的数据库版本的事实。

# asp.net - 限制对共享文件夹的访问

> ID：14106831
> 
> 赞同：3
> 
> 时间：2012-12-31T23:39:57.763
> 
> 标签：asp.net

我有一个名为“报告”的共享文件夹。在这个文件夹中有pdf文件。

fd6.pdf fd3.pdf

用户“fd3”通过身份验证后，用户可以通过 url 访问此文件夹中的任何 pdf。有没有简单的方法来防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:26:02.133

有几种方法可以做到这一点。我假设您的身份验证是 Forms Auth 或其他一些此类自定义应用程序身份验证，而不是通过模拟进行管理（如果您使用的是 Windows 身份验证/模拟，那么您可以直接在文件上使用 ACL 来解决这个问题）。

1.  您需要配置 IIS 以便它为 PDF 文件调用托管模块。如果您使用的是 IIS7+，这很简单，因为您可以使用集成管道。如果您使用的是 IIS6，或者必须使用 Classic Pipeline，那么您需要使用[通配符映射](http://ruslany.net/2008/09/wildcard-script-mapping-and-iis-7-integrated-pipeline/)，或者至少映射 PDF 扩展，以允许托管代码为您的静态内容执行。
2.  创建一个单独的`IHttpModule`，或添加到您的 Web 应用程序的 Global.asax.cs。您要做的是附加到应用程序的`AuthorizeRequest`事件。
3.  检查路径和文件名，看看它是否符合您的规则。如果失败，请将 Response.StatusCode 设置为 403（HTTP：禁止）。

Global.asax.cs 示例：

```
protected void Application_AuthorizationRequest(object sender, EventArgs e)
{
    var application = (HttpApplication)sender;
    var context = application.Context;

    if (context.User.Identity.IsAuthenticated
        && Path.GetFileName(Path.GetDirectoryName(context.Request.Path)).Equals("reports", StringComparison.OrdinalIgnoreCase)
        && Path.GetExtension(context.Request.Path).EndsWith("pdf", StringComparison.OrdinalIgnoreCase))
    {
        var fileName = Path.GetFileNameWithoutExtension(context.Request.Path);

        if (!context.User.Identity.Name.Equals(fileName, StringComparison.InvariantCultureIgnoreCase))
        {
            context.Response.StatusCode = 403;
            context.Response.StatusDescription = "You are forbidden to view this file.";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:58:46.717

我喜欢使用 web.config 中的本地属性保护文件

```
 <location path="pdfs/files">
<system.web>
  <authorization>
    <allow roles="superuser,admin,VolunteerCoordinator,presenter,ReferralMaker"/>
    <deny users="*"/>
  </authorization>
</system.web> 
```

然后确保您已定义角色以防止访问您正在保护的目录

# ios - iOS/Cocoa 数据控制器类 - 这是标准做法吗？

> ID：14106832
> 
> 赞同：4
> 
> 时间：2012-12-31T23:40:00.480
> 
> 标签：ios, class, cocoa-touch, controller

我已经完成了前两个在线教程“你的第一个 iOS 应用”和“你的第二个 iOS 应用”。后者使用了一个数据控制器类，如此[处所示](http://developer.apple.com/library/ios/ipad/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/DesigningDataModel/DesigningDataModel.html#//apple_ref/doc/uid/TP40011318-CH3-SW2)。

我现在正在阅读“iOS 编程：The Big Nerd Ranch Guide 3rd Edition”。然而，它似乎没有引用数据控制器类，并且似乎将方法放入模型类本身（即 into `MyClass.m`，not `MyClassDataController.m`）。

我相信最终一切都会变得清晰，但有人可以给我一个更广泛的参考框架吗？使用数据控制器类只是一种风格决定吗？我看过其他几本书，它们似乎也没有提到数据控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T00:53:49.267

That's a great question! To be honest, both approaches are acceptable. Aaron Hillegrass (who co-authors the BNR books) is a very well respected developer (who even used to train Apple engineers), and obviously the Apple sample code you looked at is 'from the horse's mouth', so to speak.

Why does Apple suggest you use a separate data controller in their app? Well, if your data controller conforms to the relevant protocols you could plug it straight into something like a `UITableView`. If you were writing a universal iPad / iPhone app that had different views for the two devices then this could be quite useful. This is also quite useful if you're working with storyboards. As Apple say:

> A data controller class allows other objects in the app to access objects [...] without needing to know anything about how the data model is implemented.

But this can be overkill: there are plenty of apps that *don't* use this pattern, and they throw that logic into the view controller itself. There are pros and cons to both. To put it another way: as you navigate around the sample code Apple put on their developer website you'll find plenty of apps that *don't* follow the pattern Apple suggest in the 'Your Second iOS App' tutorial!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:59:08.917

Think of it as an intermediate way of separating Data (the Model) from Controllers and Views.

A good exercise, once you get further inte the (excellent, IMHO) BNR book is to rewrite the Birdwatching example using Core Data instead of the Data Controllers.

It's not much work - (I've done it), and you'll get a better understanding of Core Data if you actually try to use it for something as simple as this.

Good luck.

# google-calendar-api - 如何使 iCal4j 在解析错误时不会失败（如 00001231T000000Z）

> ID：14106844
> 
> 赞同：0
> 
> 时间：2012-12-31T23:42:00.510
> 
> 标签：google-calendar-api, ical4j

我正在尝试让 iCal4j 解析导出的 Google .ics 日历文件。不幸的是，解析器在特定值（00001231T000000Z）上阻塞并抛出异常。我的问题是，尽管数据不正确，如何让解析器继续运行？我即将编辑源代码，但没有办法将其配置为不会因日期解析错误而失败。

我正在使用 ical4j-1.0.5-SNAPSHOT - 我相信它基于最新的代码。

我的数据包含以下事件（这似乎是一个反复出现的事件）：

```
BEGIN:VEVENT
DTSTART;TZID=America/Vancouver:20101206T060000
DTEND;TZID=America/Vancouver:20101206T150000
RRULE:FREQ=DAILY;UNTIL=20101210T140000Z
DTSTAMP:20121231T143813Z
UID:[deleted]@google.com
CREATED:00001231T000000Z
DESCRIPTION:
LAST-MODIFIED:20110102T020817Z
LOCATION:
SEQUENCE:1
STATUS:CONFIRMED
SUMMARY:iCal4j chokes on this
TRANSP:OPAQUE
END:VEVENT 
```

并在尝试解析此日期值时死掉（这似乎是胡说八道/错误的值）

```
CREATED:00001231T000000Z 
```

我并不特别关心创建的字段是否已设置或设置为虚拟值。我关心的是解析器继续运行并且不会因错误数据而窒息。

我尝试将解析设置为放松，但不知何故，这种情况似乎漏掉了。

```
 CompatibilityHints.setHintEnabled(
            CompatibilityHints.KEY_RELAXED_PARSING, true); 
```

那么，我怎样才能让这段代码更健壮地解析错误呢？我可以提供自己的解析器吗？我可以让它跳过有错误的记录吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T18:06:12.820

这实际上是一种回归。宽松的解析应该已经涵盖了这种情况。只需在分支和提示中修复它（[http://ical4j.hg.sourceforge.net/hgweb/ical4j/ical4j/rev/8c23205afac9](http://ical4j.hg.sourceforge.net/hgweb/ical4j/ical4j/rev/8c23205afac9)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:14:56.423

我复制了 CalendarBuilder 类，并用 try/catch 包装了属性集方法，如下所示。我仍然有兴趣听到其他解决方案。我真的不喜欢复制整个课程来解决这样的问题。

```
 public void propertyValue(final String value)
            throws URISyntaxException, ParseException, IOException {

        assertProperty(property);

        try {
            if (property instanceof Escapable) {
                property.setValue(Strings.unescape(value));
            } else {
                property.setValue(value);
            }
        } catch (Exception e) {
            Logger.warn("Could not set propety: " + property.getName()
                    + " to " + value);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:38:57.540

您是否尝试将所有这些设置在一起？

```
ical4j.unfolding.relaxed=true
ical4j.parsing.relaxed=true
ical4j.validation.relaxed=true
ical4j.compatibility.outlook=true 
```

# java - Play Framework 2 在 Intellij IDEA 中运行 JUnit 测试

> ID：14106848
> 
> 赞同：8
> 
> 时间：2012-12-31T23:43:19.920
> 
> 标签：java, junit, intellij-idea, playframework-2.0

我使用 Play Framework 2.0.4 和 Java + IntelliJ IDEA。

尝试从 IDEA 启动测试，并出现如下错误：

```
Class not found: "models.SoftwareTest" 
```

这是测试本身。

```
package models;

    public class SoftwareTest {

        @Test
        public void findById() {
            running(fakeApplication(), new Runnable() {
                @Override
                public void run() {
                    Software software1 = Software.find.byId(1L);
                    assertThat(software1.name).isEqualTo("Soft1");
                    assertThat(software1.description).isEqualTo("Description1");
                }
            });
        }
    } 
```

任何人？

PS 我已经清理了所有项目/常春藤文件，从播放 2.0.4 切换到 2.1 RC1 并返回.. 它没有帮助。但它在过去的一天工作。我在谷歌上找到了很多关于这个的记录，但还没有找到答案。

我还查看了这篇文章（与 Ebean 和测试相关）：

[http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/](http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/)

但是我现在遇到的问题是不同的。但只需在此处分享此链接，它可能有助于重现问题。

而这个： http: [//monocaffe.blogspot.com.es/2012/12/play-21-rc1-migration-mini-guide.html](http://monocaffe.blogspot.com.es/2012/12/play-21-rc1-migration-mini-guide.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-09T11:43:24.357

Sven 的链接 ( [http://youtrack.jetbrains.com/issue/SCL-5152](http://youtrack.jetbrains.com/issue/SCL-5152) ) 让我找到了使用 Play 框架 2.1.1 在 Intellij 12 中编译/运行单元测试的答案 [对不起，没有 Play 1.x不再安装]。

从菜单栏 [OSX -- 可能与其他平台类似] 导航到：IntelliJ -> Preferences -> Compiler

取消选中“使用外部构建”，瞧，我的单元测试能够运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T18:49:42.723

对我来说诀窍是使用这个 sbt 插件：[https](https://github.com/mpeltonen/sbt-idea) ://github.com/mpeltonen/sbt-idea 。使用 ：

```
sbt gen-idea 
```

代替 ：

```
play idea 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:33:54.067

我正在使用带有 Intellii IDEA 12.0.1 的 play 1.2.5 并且也收到此错误（按照 play doc 逐步创建项目文件）。

我在跟踪系统中发现了这个[问题。](http://youtrack.jetbrains.com/issue/SCL-5152)

# android - Android 在 FragmentManager 中找不到 ID 的视图

> ID：14106849
> 
> 赞同：2
> 
> 时间：2012-12-31T23:43:23.190
> 
> 标签：android, android-fragments

更熟悉我所知道的`Fragment`细节的人可以告诉我是什么导致了这个错误吗？许多用户都在发生这种情况，但我没有任何关于他们在发生这种情况时正在做什么的信息，而且我无法在我自己的设备上重新创建任何东西。

这是堆栈跟踪。当从后台堆栈中弹出片段时似乎正在发生这种情况 - 这是正确的吗？还有其他线索吗？

```
java.lang.IllegalArgumentException: No view found for id 0x7f0c006b for fragment AncestorNavFrag
{41324df0 #2 id=0x7f0c006b ancest_nav}
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:864)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
at android.support.v4.app.BackStackRecord.popFromBackStack(BackStackRecord.java:697)
at android.support.v4.app.FragmentManagerImpl.popBackStackState(FragmentManager.java:1511)
at android.support.v4.app.FragmentManagerImpl$4.run(FragmentManager.java:473)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

# c++ - C++11 延迟执行的“正确”方式

> ID：14106857
> 
> 赞同：1
> 
> 时间：2012-12-31T23:45:05.743
> 
> 标签：c++, c++11, scheduler

这是在 C++11 中延迟执行的“干净”方式吗？还是有“更清洁”的方式？

```
#include <iostream>
#include <boost/thread.hpp>

int main(int argc, char* argv[]) {
  boost::thread t([] () { boost::this_thread::sleep(boost::posix_time::milliseconds(1000)); std::cout << "rawr!" << std::endl; } );

  t.join();
} 
```

生成一个新线程并执行 sleep() 似乎过于繁重？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T23:49:59.347

理想情况下，如果作业相当短，您应该使用基于事件的系统，您可以在其中插入具有一定时间延迟的作业，然后执行它们。真的不需要线程，你可以在主线程中做所有事情。

你的主循环看起来有点像这样：

```
int main() {
    setup();

    while (true) {
        handleEvents();
        doYourOwnStuff();
        usleep(nextEvent.firingTime - currentTime); // Wait until the next event is triggered
    }
} 
```

当然，如果你已经有了一个系统，这样的系统就不容易实现了。许多流行的 UI 框架（Cocoa、Qt、Windows）都支持这种设计，因为它非常强大和简单。

# ruby-on-rails-3 - Rails 3：导出到 CSV - 模型及其所有 has_many 子模型到一个文件中

> ID：14106863
> 
> 赞同：2
> 
> 时间：2012-12-31T23:47:06.393
> 
> 标签：ruby-on-rails-3, csv, export

类似于这个[问题](https://stackoverflow.com/questions/2390320/export-nested-entities-to-csv-file)。我正在使用 Rails 3.2，所以我知道我不需要 FasterCSV，我想做的是将所有数据导出到 CSV 文件。数据有一个父模型，它有七个 has_many 子节点，并且每个 has_many 子节点中可能有一个或多个记录。例如。

> 类 ParentModel < ActiveRecord::Base
> 
> > has_many :child_1
> > 
> > has_many :child_2
> > 
> > has_many :child_3

然后

> 类 Child1 < ActiveRecord::Base
> 
> > 属于_to :parent_model
> 
> 类 Child2 < ActiveRecord::Base
> 
> > 属于_to :parent_model
> 
> 类 Child3 < ActiveRecord::Base
> 
> > 属于_to :parent_model

所以我有很多 ParentModel 记录，每个 ParentModel 记录可能有不同数量的 Child1、Child2 和 Child3 记录。如何动态找出 CSV 的第一行，然后填充 CSV，如果 ParentModel 恰好有一条 Child 记录，则插入 NULL？有没有一种有效的方法来做到这一点，或者它是否涉及很多循环？

例如，在整个数据库中，一个ParentModel最多有2条Child1记录，任何ParentModel最多只有1条Child2记录，有3条Child3记录。所以 CSV 的第一行是：

> ParentModel.field1, ParentModel.field1, Child1.field1, Child1.field2, Child1(record#2).field1, Child1(record#2).field2, Child2.field1, Child2.field2,Child3.field1, Child3.field2, Child3(record#2).field1, Child3(record#2).field2, Child3(record#3).field1, Child3(record#3).field2

但随后另一个 Child1 被添加到 ParentModel，因此下次您进行导出时，它会计算出来，然后 CSV 的第一行将如下所示：

> ParentModel.field1、ParentModel.field1、Child1.field1、Child1.field2、Child1(record#2).field1、Child1(record#2).field2、Child1(record#3).field1、Child1(record#3)。 field2, Child2.field1, Child2.field2,Child3.field1, Child3.field2, Child3(record#2).field1, Child3(record#2).field2, Child3(record#3).field1, Child3(record#3 ).field2

或者....在写完之后，我想知道我是否过于复杂化并且有一个平滑的“rails方式”来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T18:11:41.637

基本上，我必须弄清楚父模型拥有的最大子代数。然后，当它在 CSV 的每一行上导出一条记录时，它会用 a 填充子模型的列，`-`如果它没有与编号最多的记录一样多的子模型。（我知道，有点混乱，对吧？）

就我而言，我有可以有多个子记录的父模型。

```
class Parent < ActiveRecord::Base
  has_many :childs
...

class Child < ActiveRecord::Base
  belongs_to :parents
... 
```

在 中`ParentsController`，我找到任何一个父级的最大数量`childs`，并获取 CSV 标题的列名。

```
class ParentsController < ApplicationController

def download    

@parents = Parent.all
# find maximum number of children any parent has. Make sure to convert to integer.
@max_children = Child.select('parent_id, COUNT(parent_id)').group(:parent_id).order('COUNT(parent_id) DESC').first.count.to_i

@parent_columns = Parent.column_names
@child_columns = Child.column_names

@streaming = true
@filename = "export.csv"

respond_to do |format|
  format.csv
end 
```

然后在`download.csv.csvbuilder`我构建带有列名标题的 CSV 文件，以及父级可能从查询中获得的最大子级数的标题。

```
header = Array.new
@parent_columns.each do |column_name| 
  header << column_name.humanize 
end 

if @child_columns
    i = 0
    while i < @max_children do 
      @child_columns.each do |column_name| 
        header << "Child #{i+1} " + column_name.humanize 
      end
      i += 1
    end
end

csv << header.flatten

@parents.each do |parent|

  parent_record = Array.new

  parent_record << parent.attributes.values_at(*@parent_columns)

## NOTE: Here is the answer

if @child_columns
  if parent.childs.first.nil?
    i = 0
    while i < @max_children do 
        @child_columns.each do |column_name|
          parent_record << "-"
        end
      i += 1
    end
  elsif !parent.childs.first.nil?
    how_many_blanks = @max_children - parent.childs.length
    parent.childs.each do |child| 
      @child_columns.each do |child_column|
        parent_record << child.attributes.values_at(*child_column)
      end
    end
    i = 0
    while i < how_many_blanks do 
        @child_columns.each do |column_name|
          parent_record << "-"
        end
      i += 1
    end
  end
end

  csv << parent_record.flatten

end 
```

我希望这有帮助！

# jquery - 在html中链接jquery

> ID：14106864
> 
> 赞同：27
> 
> 时间：2012-12-31T23:47:15.190
> 
> 标签：jquery

我无法成功地将 jQuery 链接到我的 html。我已经制作了最简单的 jQuery 代码，所以我知道它是正确的，并且我已经尝试了所有我能想到的 - 搜索没有帮助..

我的 html（文件名：“test.html”：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <link rel="stylesheet" type="css/text" href="test.css"/>
        <script type="text/javascript" src="test.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    </head>
    <body>
        <div id="orange"></div>
    </body>
</html> 
```

我的 CSS（文件名：“test.css”）：

```
#orange {
    height: 100px;
    width: 100px;
    background-color: orange;
    border-radius: 5px;
    border: 3px solid black;
    margin-left: 100px;
    margin-top: 100px;
    display: none;
} 
```

我的 JS（文件名：“test.js”）：

```
$(document).ready(function() {
    $('div').fadeIn('slow');
}); 
```

控制台显示 jQuery 链接在 6.52 秒内加载。

我还尝试从我下载的 jQuery 文件链接

```
<script src="C:\jQuery\jquery.js"></script> 
```

这也惨败...

然而，我确实设法以某种方式链接 jQuery UI 并运行“.accordion()”... =/

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-31T23:49:26.413

在这种情况下，您`test.js`将不会运行，因为您在 jQuery 之前加载它。把它放在jQuery之后：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="test.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T23:49:36.380

在 jQuery 库之后添加 test.js 文件。这样你的 test.js 文件就可以使用这些库了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T14:32:11.740

看到答案，除了一件事，我没有其他要补充的了：

在您编写的 test.html 文件中

> 链接 rel="stylesheet" type="css/text" href="test.css"/

看看你在哪里写的

> 类型="css/文本"

你需要改成

> 类型="文本/css"

所以它看起来像这样

> 链接 rel="stylesheet" type="text/css" href="test.css"/

在这种情况下，CSS 文件将链接到 HTML 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T00:19:56.693

```
<script
 src="CDN">
</script> 
```

要更改 CDN，请查看[此](https://developers.google.com/speed/libraries/)网站。

第一个是 JQuery

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-20T05:29:02.023

我有一个类似的问题，但就我而言，这是我的 CSS 文件。

我在 JQuery 库之前加载了我的 CSS 文件，因为我的 jquery 函数正在与我的 css 文件交互，所以我的 jquery 函数不起作用。我发现这很奇怪，但是当我在加载 JQuery 库后加载 CSS 文件时，它起作用了。

这可能与问题没有直接关系，但它可能会帮助可能面临类似问题的其他人。

我的问题：

```
 <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script type="text/javascript" src="slider.js"></script> 
```

我的解决方案：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="slider.js"></script> 
```

# c# - 使用 ServiceStack 的 TypeSerializer 进行文件反序列化

> ID：14106865
> 
> 赞同：0
> 
> 时间：2012-12-31T23:47:52.300
> 
> 标签：c#, json, deserialization, windows-phone-8, servicestack

我`ServiceStack.Text`在我的 C# 项目中用作 JSON 库，我正在尝试使用它从文件中反序列化一个字符串`TypeSerializer.DeserializeFromString`。

我有以下代码：

```
async public static void TryLoad(Action<JsonArrayObjects> Ok, 
    Action<string> Fail, string key, int offset)
{
    try
    {
        var folder = ApplicationData.Current.LocalFolder;
        var stream = await folder.OpenStreamForReadAsync(key);
        var result = await new StreamReader(stream).ReadToEndAsync();

        Debug.WriteLine(result);
        var cacheItem = TypeSerializer.DeserializeFromString<CacheItem>(result);
        if (cacheItem.IsValid(offset) == true) Ok(cacheItem.Data); else Fail(key);
    }
    catch (Exception)
    {
        Fail(key);
    }
} 
```

`Debug.WriteLine`这里输出正确的 JSON 字符串，但下一行`TypeSerializer.DeserializeFromString`产生异常：

```
A first chance exception of type 'System.IndexOutOfRangeException' occurred in Unknown Module. 
```

似乎`TypeSerializer`得到一个空字符串。为什么会发生，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:30:43.827

如果 Json 对您的 Object 有效，这也可能有效：

```
 var cacheItem = (CacheItem) JsonSerializer.DeserializeFromString(result, typeof (CacheItem)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:32:08.870

通过切换到在这种情况下行为正确的 Json.NET 解决了问题。

# php - 反序列化阿拉伯字母渲染？？？作为输出

> ID：14106875
> 
> 赞同：4
> 
> 时间：2012-12-31T23:49:35.380
> 
> 标签：php, serialization, utf-8, arabic

我有以下代码：

```
function appear($data)
{
    $output = '';
    $unsee = unserialize ( $data );
    if (is_array ( $nsee ))
    {
        $output .= '<table>' . "";
        foreach ( $nsee as $button )
        {
            $output .= loadbutton ( $button);
        }
        $output .= '
        <tr><td>IP</td>
        <td>' . $_SERVER ['REMOTE_ADDR'] . '</td></tr>' . "";
        $output .= '</table>' . "";
    }
    return $output;
}

function loadbutton($button)
{
    $output = '';
    $output .= '<tr>' . "";
    $output .= '<td>';
    $output .= $button ['values'];
    $output .= '</td><td>';
    $output .= $_POST [strtolower ( $button ['values'])] ;
    $output .= '</td>' . "";
    $output .= '</tr>' . "";
    return $output;
} 
```

当我对英文序列化数据使用出现功能时，它工作得很好并且输出正常。

但是当我将它用于阿拉伯文序列化数据时。一切正常，除了阿拉伯字母显示为“？？？？？？” 而不是实际的阿拉伯字母。

我已经验证了数据库中的数据，一切都是 UTF-8，一切都是有效的 db 明智和保存 serilaized 明智。但输出和反序列化不正确。

你知道解决这个问题的方法吗？反序列化是否支持阿拉伯字母？如果不是，那么为什么它正确保存阿拉伯字母但不获取它们？

**编辑：**

我认为问题在于调用 $button ['values']。

我的`$button`数组是 `array ( 'values' => 'Field Value')`

没有想到任何解决方案。我知道它应该工作。

**解决方案：**

问题出在我的序列化数据的 mysql 插入语句中。我正在插入拉丁语。一个简单而愚蠢的错误。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T23:54:51.290

确保您已在 HTML 文档中设置：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>`

或者在输出任何内容之前将其放置在 PHP 代码的顶部，使用 HTTP 标头进行设置：

`header('Content-Type: text/html; charset=utf-8');`

浏览器未使用正确的字符集，因此显示`?`在这些字符的位置。

也可以使用：

```
$output .= $_POST[mb_strtolower($button['values'], 'UTF-8')]; 
```

因为`strtolower()`不会正确小写多字节字符。

# javascript - 关于 .Sortable() 中的句柄

> ID：14106879
> 
> 赞同：1
> 
> 时间：2012-12-31T23:50:54.867
> 
> 标签：javascript, jquery, events, handler, jquery-ui-sortable

当我们使用 ref= 作为标识时，我们写成 lkie $([ref=Hadle_Here])。

在 sortable() 中，要确定具体的区域，使用句柄：XXXXX。

这个句柄的问题：部分，如果我使用类来定义，比如'.Hadle_Here'，这将起作用。但是，如果我使用 '[ref=Hadle_Here]'，这将返回错误。

这是关于它不能使用还是我写错了？？？？请指教。

```
$(XXXXX).sortable({
    opacity: 0.6,
    cursor: 'move', 
    cancel: 'input',
    handle: ////HERE!!!!!!!!!!!!
    update: function() {} 
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:13:11.537

你可以试试这个

```
handle: $('[ref=xxxx]') 
```

[**这是一个例子**](http://jsfiddle.net/AuV3R/)。

# c# - C#检查数组中是否存在数字

> ID：14106883
> 
> 赞同：-2
> 
> 时间：2012-12-31T23:52:03.337
> 
> 标签：c#

我试图让用户输入 10 个数字并将它们存储到数组中。然后提示用户输入任何数字以检查该数字是否已存储在数组中。当我输入任何数字时，屏幕将消失，我无法验证该数字是否已存在。请看我的代码。提前致谢。

```
static void Main(string[] args)
    {
        int[] numCheck = new int[10];
        int[] userInput = new int[1];

        Console.WriteLine("Please enter 10 numbers: ");

        for (int i = 0; i < 10; i++)
        {
            Console.Write("Number {0}: ", i + 1);
            numCheck[i] = int.Parse(Console.ReadLine());
        }

        Console.WriteLine("Please enter any number to check if the number already exist");

        for (int j = 0; j <= 10; j++)
        {
            if (userInput == numCheck)
            {
                Console.Write("The number {0} is in the index", numCheck);
                userInput[j] = int.Parse(Console.ReadLine());
            }

            else 
            {
                Console.Write("The number {} is not in the index", numCheck);
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T23:58:26.823

您只从用户那里获取 1 项，因此无需声明数组

```
int userInput;

//read userInput

if (numCheck.Any(i => i == userInput))
{
    Console.Write("The number {0} is in the index", userInput);
}
else
{
    Console.Write("The number {} is not in the index", userInput);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:56:21.863

这不应该：

```
if (userInput == numCheck) 
```

是：

```
if (userInput[0] == numCheck[j]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:01:21.467

建议的替代方案：

```
static void Main(string[] args)
{
    int[] numCheck = new int[10];
    Console.WriteLine("Please enter 10 numbers: ");

    for (int i = 0; i < 10; i++)
    {
        Console.Write("Number {0}: ", i + 1);
        numCheck[i] = int.Parse(Console.ReadLine());
    }

    Console.WriteLine("Please enter any number to check if the number already exist");
    int userInput = int.Parse(Console.ReadLine());

    for (int i = 0; i < 10; i++)
    {
        if (userInput == numCheck[i])
        {
            Console.Write("FOUND NUMBER");

            break;
        }
    }
 } 
```

# ios - 在 UISegment 控件中设置编辑

> ID：14106886
> 
> 赞同：0
> 
> 时间：2012-12-31T23:53:42.787
> 
> 标签：ios, uisegmentedcontrol

我正在使用 UISplitViewController 和 UISegmentedControl 编写一个通用应用程序。UISegmentedControl 中的每个控制器都允许编辑。看来，当段变为当前段时，必须重新建立控制器的编辑状态。我的问题是由`[vc setEditing:YES animation:NO]`. 有人可以建议我如何避免这种情况吗？谢谢你。

```
- (void)segmentChanged:(UISegmentedControl *)sender
{ 
    UIViewController *vc = [self viewControllerForSegmentIndex:sender.selectedSegmentIndex];
    [self addChildViewController:vc];

    [self transitionFromViewController:self.currentViewController toViewController:vc duration:0.3 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
        [self.currentViewController.view removeFromSuperview];
        vc.view.frame = self.view.bounds;
        [self.view addSubview:vc.view];
        [vc setEditing:YES animated:NO];
    } completion:^(BOOL finished) {
        [vc didMoveToParentViewController:self];
        [self.currentViewController removeFromParentViewController];
        self.currentViewController = vc;
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:55:28.327

为了避免不合适的动画，我用setEditing和viewWillAppear完成了Controller显示的准备工作。

```
 [self transitionFromViewController:self.currentViewController toViewController:vc duration:0.3 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
        [self.currentViewController.view removeFromSuperview];
        vc.view.frame = self.view.bounds;
        [self.view addSubview:vc.view];
        [vc setEditing:YES animated:NO];
        [vc viewWillAppear:NO]; 
    } completion:^(BOOL finished) {
        [vc didMoveToParentViewController:self];
        [self.currentViewController removeFromParentViewController];
        self.currentViewController = vc;
    }]; 
```

# jquery - jQuery 仅序列化“可见”元素

> ID：14106887
> 
> 赞同：1
> 
> 时间：2012-12-31T23:54:13.023
> 
> 标签：jquery, serialization, jquery-ui-sortable

我正在尝试在容器内生成一个序列化的元素列表`#dd_menu_edit_items`- 但是，我只想序列化容器内的当前“可见”项目。`#dd_menu_edit_items:visible`似乎不起作用。有任何想法吗？谢谢。

```
$('#dd_menu_edit_items:visible').sortable('serialize') 
```

标记是：

```
<div id="dd_menu_edit_items" class="cust_menu_options">
   <? foreach($menus as $m_menu) { ?>
      <a id="ed_dd_<?=$m_menu['id']?>" class="ddGroup_<?=$m_menu['menu_id']?>"><div class="menu_icons"></div><?=$m_menu['dd_title']?></a>
   <? } ?>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:08:27.900

您正在过滤容器，如果要选择可见`a`元素，您可以编写代码：

```
$('#dd_menu_edit_items a:visible').sortable('serialize'); 
```

或者，如果您想选择所有可见的孩子：

```
$('#dd_menu_edit_items').children().filter(':visible').sortable('serialize'); 
```

# wpf - 图像填充 WPF 中按钮上的空间

> ID：14106888
> 
> 赞同：3
> 
> 时间：2012-12-31T23:54:49.803
> 
> 标签：wpf, image, xaml, button, telerik

我有`Button`我的 WPF 应用程序，我想要一个完全`Image`填充`Button`。目前我有以下代码，它不填充`Button`.

```
<Image x:Key="MyResource" Source="Images/up-arrow-icon.jpg" Margin="0" />

<telerik:RadButton  Height="25" Width="40" HorizontalAlignment="Left" Margin="417,10,0,0" 
                    Name="radButton1" VerticalAlignment="Top" Click="UpButtonClick">
    <telerik:RadButton.Content>
        <StaticResource ResourceKey="MyResource"/>
    </telerik:RadButton.Content>
</telerik:RadButton> 
```

我是否需要调整`Image`外部 WPF 的大小然后使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T01:58:39.100

您可以尝试将您的更改`Image`为 an `ImageBrush`，然后将其分配给您`BackGround`的图像，然后将在按钮的内表面上伸展。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ImageBrush x:Key="MyResource" ImageSource="C:\temp\test.jpg" />
    </Window.Resources>
    <Grid>
        <Button Height="25" Background="{StaticResource MyResource}" Width="40" HorizontalAlignment="Left" Margin="417,10,0,0" VerticalAlignment="Top"/>
    </Grid>
</Window> 
```

或将 TextBlock 添加到您的 Button Content 并将您的 Image 作为背景分配给它。

```
<Window.Resources>
    <ImageBrush x:Key="MyResource" ImageSource="C:\temp\test.jpg" />
</Window.Resources>
<Grid>
    <Button Height="25"  Width="40" HorizontalAlignment="Left" Margin="417,10,0,0" VerticalAlignment="Top">
        <Button.Content>
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="34" Height="19" Margin="0">
                <TextBlock.Background>
                    <StaticResource ResourceKey="MyResource"/>
                </TextBlock.Background>
            </TextBlock>
        </Button.Content>
    </Button>
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T06:28:39.067

的设置`HorizontalContentAlignment`和`VerticalContentAlignment`属性`Button`为`Stretch`：

```
<telerik:RadButton  Height="25" Width="40" 
      HorizontalContentAlignment="Stretch"  //this
      VerticalContentAlignment="Stretch"    //and this
       Margin="417,10,0,0" 
                   Name="radButton1" VerticalAlignment="Top" Click="UpButtonClick">
    <telerik:RadButton.Content>
        <StaticResource ResourceKey="MyResource"/>
    </telerik:RadButton.Content>
</telerik:RadButton> 
```

有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/11566122/what-is-the-difference-between-horizontalalignment-and-horizontalcontentalignmen)和[此链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.horizontalcontentalignment.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:04:48.750

尝试设置`HorizontalAlignment`and `VerticalAlignment`to`Stretch`和`Dock`to `Fill`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T23:27:40.823

Button.Background 的解决方案仅在垂直方向上对我有用（按钮显示为 3 像素宽的垂直切片），因为我需要将右侧的刷新按钮放入水平`Grid`容器中，如此屏幕截图所示：

[![在此处输入图像描述](../Images/a92d7e2de3568f39763fd27c5d6c39c2.png)](https://i.stack.imgur.com/lz5Db.png)

因此，我最终将 绑定`Width`到该`ActualHeight`属性，并且一切对我来说都很好：

```
<Button Name="RefreshButton"
    Width="{Binding ElementName=RefreshButton,Path=ActualHeight}"
    Margin="3"
    Padding="3"
    VerticalAlignment="Stretch"
    HorizontalAlignment="Right"
    HorizontalContentAlignment="Stretch"
    VerticalContentAlignment="Stretch"
    >
<Button.Background>
    <ImageBrush ImageSource="{StaticResource ICON_Refresh}"/>
</Button.Background>
</Button> 
```

我使用的资源是一个 ICO 文件，因此图像在不同尺寸下应该看起来不错，并且成像应该仍然非常快......

# cakephp - CakePHP 级联外键获取用户列表

> ID：14106893
> 
> 赞同：-1
> 
> 时间：2012-12-31T23:55:04.793
> 
> 标签：cakephp, foreign-keys, cakephp-model

我有一个用户表，一个城市表和一个州表。每个`user`都有一个`city`,`city_id`在其列中标识，并且每个`city`都与 a 相关`state`联`state_id`。

我想获取每个州的用户列表，但我不知道如何使用和访问`user`列表。`city``state`

当然，它们都有自己的模型、视图和控制器（由烘焙生成）。在烘焙生成它们之后，我没有进行任何更改，除了用户，他们的密码在包含之前被加盐和散列。

CakePHP 是最新的（2.2.4），我使用的是自己安装并正确配置的 AMP 堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:34:27.047

使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。您的代码应如下所示：

```
$this->State->find('all', array(
    'contain' => array(
        'City' => array(
            'User'
        )
    )
)); 
```

然后，您的数据将像这样返回（在我脑海中）：

```
>State
  >0
    id
    name
    >City
      >0
        id
        name
          >User
            >0
              id
              name
              email
            >1
              id
              name
              email
       >1
         id
         ...etc 
```

# c# - 如何使用 Json.NET StringEscapeHandling.EscapeNonAscii

> ID：14106894
> 
> 赞同：5
> 
> 时间：2012-12-31T23:56:02.923
> 
> 标签：c#, .net, json, escaping, json.net

> **可能重复：**
> [将 StringEscapeHandling.EscapeNonAscii 与 Json.NET 一起使用](https://stackoverflow.com/questions/14095247/using-stringescapehandling-escapenonascii-with-json-net)

最新版本的 Json.NET (4.5.11) contains `StringEscapeHandling.EscapeNonAscii`，它转义了所有非 ASCII 字符。但是，我不知道如何使用它。文档似乎没有我能找到的任何示例（只有一个发布说明宣布它）。

有人可以展示一个将对象序列化为 JSON 字符串的示例，使用`EscapeNonAscii`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T01:09:54.450

也许这个例子可以帮助

```
string obj = "abcn\n\rüö&/<>";
Console.WriteLine(Serialize(obj, StringEscapeHandling.Default));
Console.WriteLine(Serialize(obj, StringEscapeHandling.EscapeHtml));
Console.WriteLine(Serialize(obj, StringEscapeHandling.EscapeNonAscii)); 
```

* * *

```
public static string Serialize(object o,StringEscapeHandling stringEscapeHandling)
{
    StringWriter wr = new StringWriter();
    var jsonWriter = new JsonTextWriter(wr);
    jsonWriter.StringEscapeHandling = stringEscapeHandling;
    new JsonSerializer().Serialize(jsonWriter,o);
    return wr.ToString();
} 
```

# x11 - X Server 从 Windows 到 Windows - 这可能吗？

> ID：14106898
> 
> 赞同：1
> 
> 时间：2012-12-31T23:56:50.417
> 
> 标签：x11, rdp, terminal-emulator

我想知道是否可以在 Windows 上运行 X Server（例如 mobaxterm、xming 等）来显示在远程 Windows 机器上运行的应用程序。

我知道如果它在远程 Linux 机器上运行是可能的，但仍然想知道在 windows-windows 环境中这是否可能。

我需要在本地 Windows 机器上打开 Windows 远程应用程序。我知道我可以使用 VNC / radmin / RDP 但问题是这些解决方案给了所有远程机器。我必须在本地 Windows 上只显示特定的应用程序，就像我打开 xclock 一样。

请指教...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:15:47.313

MobaXterm 将允许您显示依赖于 X11 协议的远程图形应用程序：Unix/Linux 图形应用程序都设计为在 X11 服务器上运行，因此它们可以通过 MobaXterm X11 服务器导出和显示。

不幸的是，Windows 应用程序并非设计为在 X11 服务器上运行，因此使用 Xming 或 MobaXterm 从远程计算机显示它们将无法正常工作，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T00:40:40.577

一些 vnc 服务器实际上允许公开单个窗口而不是整个桌面（x11vnc 确实允许并且可能是 realvnc/tightvnc 服务器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:10:03.827

看，您可以在一台机器上设置 cygwin/X 服务器并从另一台指向该机器的机器上运行 X 应用程序，但我认为您在问一个不同的问题。

# java - 对象的通用下限

> ID：14106899
> 
> 赞同：3
> 
> 时间：2012-12-31T23:56:56.673
> 
> 标签：java, generics

可以将绑定的通用参数编码为：

```
public <T super Object> void someMethod(T t); 
```

这种界限是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:42:10.540

根据 JLS [http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)类型参数（<T extends Object> 术语）包括：

```
TypeParameter:
    TypeVariable TypeBound*

TypeBound:
    extends TypeVariable
    extends ClassOrInterfaceType AdditionalBoundList*

AdditionalBoundList:
    AdditionalBound AdditionalBoundList
    AdditionalBound

AdditionalBound:
    & InterfaceType 
```

* = 可选

你看`TypeBound`，只有`extends`指定的用法。`super`不幸的是，没有指定下限类型参数 using 。下限仅在通配符用法中指定（[JLS#4.5.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)）

好问题，这让我深入研究了 JLS，我不知道为什么这没有在 java 中实现，只是没有指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:04:53.760

这种较低的债券是完全没有用的。如果您想要一个只能接受 Object 的模板，您所要做的就是删除所有通用模板并使用 Object 作为您的类型直接在您的类中编写代码。

对于 Object 以外的其他类型，它也没有任何意义。为什么你想要一个模板可以接受 A 类型的对象或没有 A 类型的对象（例如 Object），但当 B 是 A 的子类时会拒绝 B 类型的对象？这完全不合逻辑。

与接口的想法相同：您将接受任何根本不实现接口 I 或实现它的类型，但您会拒绝不仅具有接口 I 还扩展了它的类型？？？

# c - 文件分块和缓冲？

> ID：14106901
> 
> 赞同：0
> 
> 时间：2012-12-31T23:57:32.757
> 
> 标签：c

最终，我只是想将二进制文件切成大小不大于 X 的片段。不要用它做其他事情。如果输入文件是 21MB，我想要 3 块 7MB 我可以加入 cat 或什么不加入。在下面的简单示例中，我使用的是 7MB 块大小的缓冲区。我是否必须使用它来获得 7MB 的文件块？如果块大小是 2GB，那显然不是我想放在内存中的东西。所以我需要创建一个缓冲区。

我确实在这里和其他网站上阅读了几篇关于此的帖子，但它们似乎都使用了某种由 malloc 或数组创建的缓冲区，并且查找非缓冲方式让我在套接字和 TCP/IP 方面的知识遥遥领先相关话题。

我注定要使用大量的 if/while 语句吗？

PS 在哪里可以找到有关 C 语言 I/O 流的书籍？我可以找到很多 C++，但不是 C。

```
ifp = fopen(ifile, "rb"); // ifile is a 25MB sound file
ofp = fopen(ofile, "w");  // Omitted error checking.

setvbuf( ifp, NULL, _IOFBF, 1024); // Are these on
setvbuf( ofp, NULL, _IOFBF, 1024); // by default?

size_t CHUNK = 7000000;  // 7MB Chunk sizes
size_t result = 0;
size_t *buffer = malloc(CHUNK);

if (buffer == NULL) {fputs ("Could not allocate memory",stderr); exit (1);}
// Read 1 btye at a time?
result = fread(buffer, 1, CHUNK, ifp);
if (result != CHUNK) {fputs ("ERROR: Buffer/read mismatch.",stderr); exit (1);}

fwrite(buffer, CHUNK, 1, ofp);

free(buffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:27:42.963

这是我最初在 1991 年编写的一个程序`bsplit`。它将文件分割成任意大小的块；默认大小以千字节为单位指定（好吧，千字节[-](http://en.wikipedia.org/wiki/Kibibyte) 1024 字节）。

```
/*
@(#)File:           $RCSfile: bsplit.c,v $
@(#)Version:        $Revision: 1.11 $
@(#)Last changed:   $Date: 2008/08/09 05:54:55 $
@(#)Purpose:        Split file into blocks -- binary
@(#)Author:         J Leffler
*/

#if __STDC_VERSION__ >= 199901L
#define _XOPEN_SOURCE 600
#else
#define _XOPEN_SOURCE 500
#endif /* __STDC_VERSION__ */

#include <ctype.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include "stderr.h"
#include "filter.h"

#define MAXFILENAMELEN  256
#define KILOBYTE 1024
#define MEGABYTE (KILOBYTE*KILOBYTE)
#define GIGABYTE (MEGABYTE*KILOBYTE)
#define NIL(x)  ((x)0)
#define MIN(a,b)    (((a) < (b)) ? (a) : (b))

char    *prefix = "bsplit.";
size_t   blocksize = 64;
size_t   nblocks = 0;
size_t   skipblocks = 0;
char     buffer[64*KILOBYTE];
long     counter = 0;

static int  bsplit(FILE *ifp, const char *fn)
{
    size_t   n;         /* Bytes read this time */
    size_t   bsize;     /* Size written for current block */
    size_t   tsize;     /* Size written for current file */
    size_t   rsize;     /* Amount to read */
    FILE    *op;        /* Output file stream */
    char     file[MAXFILENAMELEN];  /* Output file name */

    tsize = 0;
    bsize = 0;
    op = NIL(FILE *);
    rsize = MIN(sizeof(buffer), blocksize);
    while ((n = fread(buffer, sizeof(char), rsize, ifp)) > 0)
    {
        tsize += n;
        if (tsize > skipblocks)
        {
            if (bsize == 0)
            {
                sprintf(file, "%s%03ld", prefix, counter++);
                if ((op = fopen(file, "w")) == NIL(FILE *))
                {
                    err_sysrem2("failed to open file", file);
                    return(-1);
                }
                printf("%s\n", file);
            }
            bsize += n;
            if (fwrite(buffer, sizeof(char), n, op) != n)
            {
                err_sysrem2("failed to write to file", file);
                return(-1);
            }
            if (bsize >= blocksize)
            {
                fclose(op);
                bsize = 0;
            }
            if (nblocks > 0 && tsize >= nblocks)
                break;
        }
    }
    return 0;
}

int main(int argc, char **argv)
{
    int opt;
    size_t multiplier = KILOBYTE;
    char *p;
    char  c;
    int   rc;

    opterr = 0;
    err_setarg0(argv[0]);

    while ((opt = getopt(argc, argv, "s:n:p:b:V")) != -1)
    {
        switch (opt)
        {
        case 'p':
            prefix = optarg;
            if (strlen(prefix) > MAXFILENAMELEN - sizeof("000"))
                err_error("file name prefix (%s) is too long (max %d)", prefix,
                          (int)(MAXFILENAMELEN-sizeof("000")));
            break;
        case 's':
            skipblocks = atoi(optarg);
            break;
        case 'n':
            nblocks = atoi(optarg);
            break;
        case 'b':
            blocksize = atoi(optarg);
            p = optarg + strspn(optarg, "0123456789");
            if (*p != '\0')
            {
                c = tolower((unsigned char)*p);
                if (c == 'c')
                    multiplier = 1;
                else if (c == 'b')
                    multiplier = KILOBYTE/2;
                else if (c == 'k')
                    multiplier = KILOBYTE;
                else if (c == 'm')
                    multiplier = MEGABYTE;
                else if (c == 'g')
                    multiplier = GIGABYTE;
                else
                    err_error("unknown size multiplier suffix %s\n", p);
                if (p[1] != '\0')
                    err_error("unknown size multiplier suffix %s\n", p);
            }
            break;
        case 'V':
            err_version("BSPLIT", &"@(#)$Revision: 1.11 $ ($Date: 2008/08/09 05:54:55 $)"[4]);
            break;
        default:
            err_usage("[-b blocksize][-p prefix][-s skipblocks][-n blocks][file [...]]");
            break;
        }
    }

    /* Convert sizes to bytes */
    blocksize  *= multiplier;
    skipblocks *= blocksize;
    if (nblocks > 0)
        nblocks = skipblocks + nblocks * blocksize;

    rc = filter_stdout(argc, argv, optind, bsplit);
    return(rc);
} 
```

头文件`stderr.h`声明了一系列错误报告例程；我在我的大部分程序中都使用它。头文件`filter.h`声明了`filter_stdout()`一个遍历参数列表的函数，打开文件以读取和调用一个函数——在这种情况下`bsplit()`——依次处理每个文件。它会自动处理“无参数意味着读取标准输入”等。（联系我获取代码 - 请参阅我的个人资料。）

请注意，乘数`c`表示“字符”，`b`表示 512 字节块，而`k`, `m`, 和`g`分别表示 KiB、MiB 和 GiB。

* * *

支持代码现在可以在我的 GitHub 上的[SOQ](https://github.com/jleffler/soq)（堆栈溢出问题）存储库中以 files 、 、 和`filter.c`src `filter.h`/ `filterio.c`libsoq[子目录](https://github.com/jleffler/soq/tree/master/src/libsoq)的形式获得。还有一个标题将替换该节 - 并且将使用而不是请求 POSIX.1 2008 (2018) 支持。`stderr.c``stderr.h``posixver.h``__STDC_VERSION__``#define _XOPEN_SOURCE 700``600`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:15:05.377

```
setvbuf( ifp, NULL, _IOFBF, I_BUFFER); // Are these on
setvbuf( ofp, NULL, _IOFBF, O_BUFFER); // by default? 
```

这些将文件缓冲区设置为“完全缓冲”，这意味着仅当缓冲区（由 I_BUFFER 和 O_BUFFER 定义）已满时才写入数据。

我还建议您一次不需要阅读大量内容。10-100KB 足以将操作系统中的任何开销减少到几乎为零，并且执行几次的循环将是很小的一部分，这无关紧要。如果您读取较小的部分，然后写出一小部分，您甚至可能会出现一些重叠，如果您一次读取 7MB，则需要足够长的时间，以至于之前的 7MB 写入可能在已读取 7MB。

www.cplusplus.com 涵盖了所有 C 标准库（尽管名称如此，但它涵盖了 C 函数以及 C++ 函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:26:54.440

您根本不需要担心缓冲。标准 C 库开发人员已经为您完成了这项工作。即使您使用 逐字符读取`fgetc()`并使用 写入，也不会损失太多性能`fputc()`。这些通常是访问缓冲 stdio 结构的宏。

我相信我不必告诉您如何编写一个按字符读写并在所需字节数后切换到新文件的循环。

再次明确说明：优化的第一条规则：**不要**。第二：先测量再做。

# javascript - 改变事件目标

> ID：14106905
> 
> 赞同：2
> 
> 时间：2012-12-31T23:58:08.530
> 
> 标签：javascript, html, javascript-events

我有以下html：

```
<div id="div1">
    <div id="div2">
    </div>
</div> 
```

JS：

```
document.addEventListener('mousedown', function(e){
    console.log(e.target);
}); 
```

如果在 div2 上单击鼠标，则 e.target 为 div2。在这种情况下，我希望目标是 div1。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T00:06:29.113

最简单的方法可能是沿着 DOM 树向上走，直到找到所需的元素。

```
document.addEventListener('mousedown', function(e) {

    // start with the element that was clicked.
    var parent = e.target;

    // loop while a parent exists, and it's not yet what we are looking for.
    while (parent && parent.id !== 'div1') {

        // We didn't find anything yet, so snag the next parent.
        parent = parent.parentElement;
    }

    // When the loop exits, we either found the element we want,
    // or we ran out of parents.
    console.log(parent);
});​ 
```

示例：http: [//jsfiddle.net/7kYJn/](http://jsfiddle.net/7kYJn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:11:38.353

在 DOM 中，您可以指定将事件侦听器附加到哪个元素：

```
var div1 = document.getElementById('div1');
div1.addEventListener('mousedown',function(e){
   console.log(e.target);
}); 
```

# joomla - 获取文章创建日期 joomla

> ID：14106906
> 
> 赞同：0
> 
> 时间：2012-12-31T23:58:14.030
> 
> 标签：joomla

我正在尝试获取文章的创建时间戳或日期，以便可以使用 css 对其进行格式化。我在谷歌和论坛上搜索过，但我对结果感到困惑。

我已经这样做了：

```
echo $this->article->created;
echo $this->item->created; 
```

并且给了我一个空白的结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:33:43.230

查看页面布局 [https://github.com/joomla/joomla-cms/blob/2.5.x/components/com_content/views/article/tmpl/default.php#L114](https://github.com/joomla/joomla-cms/blob/2.5.x/components/com_content/views/article/tmpl/default.php#L114)

第 114 行，您可以看到日期在 2.5 中是如何呈现的。

```
<dd class="create">
<?php echo JText::sprintf('COM_CONTENT_CREATED_DATE_ON', JHtml::_('date', $this->item->created, JText::_('DATE_FORMAT_LC2'))); ?>
</dd> 
```

因此，要对其进行样式设置，您可以只使用创建类，也可以进行布局覆盖。

这是假设您希望在文章中使用它。如果您希望它在列表或其他内容中，请查看相应的布局。如果您想覆盖日期格式本身，请在布局覆盖中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:08:04.057

首先，您尝试显示创建日期的位置。

1) 在正常的文章视图中，如默认的 joomla 类别、博客或任何其他视图。您应该检查以下内容。

```
 The article options that available on the right side options of articles the created date is show true.

   Then Also make sure If it assigned to a menu there also these options available there also
   make true. 
```

然后您将在文章默认视图中获得创建日期。

2）如果您尝试使用自定义代码部分，您可以找到一些这样的代码。

```
$useDefList = (($params->get('show_author')) OR ($params->get('show_category')) OR ($params->get('show_parent_category'))
    OR ($params->get('show_create_date')) OR ($params->get('show_modify_date')) OR ($params->get('show_publish_date'))
    OR ($params->get('show_hits'))); 
```

在 joomla 的文章默认视图上。在任何版本的 joomla 中，这些都应该基于文章选项值。

希望这可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:01:05.070

您想要的元素似乎[因版本而异](http://magazine.joomla.org/issues/issue-may-2011/item/455-How-to-put-more-love-into-your-Joomla-dates?tmpl=component&print=1)，因此请确保您抄袭的任何内容都与您的安装相匹配。

# php - PHP 中 sort() 函数的问题

> ID：14106908
> 
> 赞同：0
> 
> 时间：2012-12-31T23:58:36.527
> 
> 标签：php, sorting

我正在尝试对我在 PHP 中的数组进行排序，由于某种原因，当我尝试使用任何`sort()`函数时，我得到的回报都是“1”。这是我到目前为止的代码：

```
$files = glob('Some\Random\Directory\*.txt');
$tag = array();
foreach($files as $file){
$fh = fopen($file, 'rb');
while($col = fgetcsv($fh)) {
if (isset($tag[$col[2]])) {
   $tag[$col[2]]++;}
else {
   $tag[$col[2]] = 1;}}
fclose($fh);}
print_r($tag); 
```

这导致按预期显示我的数组。但是，当我尝试这样做时：

```
echo arsort($tag); 
```

我在页面上得到的回报是“1”。

关于我做错了什么有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:00:02.263

数组[`sort()`](http://php.net/manual/en/function.sort.php)函数作用于数组的引用。因此，它们不返回排序后的数组，而是返回`true`(1) 或`false`(0)。

```
print_r($tag);
arsort($tag);
print_r($tag); 
```

# python - Python - 在数据行之间进行插值

> ID：14106912
> 
> 赞同：1
> 
> 时间：2013-01-01T00:00:19.470
> 
> 标签：python, numpy, matplotlib, scipy

我有以点（x，Y，Z）为特征的二维网格上的数据。X 和 Y 值表示每个点的位置，Z 是每个点的“高度”或“强度”。

我的问题是我沿 X 轴的数据坐标非常紧密（约 1000 点），而我的 Y 坐标分散开（约 50 点）。这意味着当绘制在散点图上时，我基本上有数据行，相邻行之间的空白空间数量相等。

*我的数据在散点图上的间隔示例：*

```
ooooooooooooooooooooooooooooooo

ooooooooooooooooooooooooooooooo

ooooooooooooooooooooooooooooooo 
```

我想插入这些点以获得一个连续的表面。我希望能够评估此表面上任何位置的“高度”。我已经尝试过每一种 scipy 插值方法，但不确定最“智能”的方法是什么。我应该插入每个垂直数据切片，然后将它们拼接在一起吗？

我想要一个尽可能光滑的表面，但需要一种形状保持方法。我不希望任何插值曲面超出我的输入数据。

您能提供的任何帮助都会非常有帮助。

**编辑：**

当我更多地考虑这个问题时，似乎插值垂直切片然后将它们缝合在一起是行不通的。这将导致沿垂直切片的值仅受该切片的影响，这不会导致表面不准确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T01:50:23.370

我推荐这个 [教程](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html#multivariate-data-interpolation-griddata)。它的胆量是（从链接中提取）：

```
>>> grid_x, grid_y = np.mgrid[0:1:100j, 0:1:200j]
>>> from scipy.interpolate import griddata
>>> grid_z0 = griddata(points, values, (grid_x, grid_y), method='nearest')
>>> grid_z1 = griddata(points, values, (grid_x, grid_y), method='linear')
>>> grid_z2 = griddata(points, values, (grid_x, grid_y), method='cubic') 
```

这将为您提供三种不同级别的数据插值[(doc)](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:11:03.753

如果您正在寻找表面，我的假设是您可以通过使用垂直切片，然后绘制填充数据来获得。

# sharepoint - 替换 SP2013 中 List 对象的 DoesUserHavePermissions

> ID：14106913
> 
> 赞同：1
> 
> 时间：2013-01-01T00:00:36.133
> 
> 标签：sharepoint

我正在开发一个重用以前解决方案中的一些代码的应用程序。

这个想法是向用户显示网站集中所有网站中某种类型的所有列表，以便用户可以聚合一些数据。

```
static public List<SPListMeta> AllSiteAnnouncementsLists(ClientContext clientContext)
{
    var returnList = new List<SPListMeta>();
    var per = new BasePermissions();
    per.Set(PermissionKind.Open);
    if (clientContext.Site.RootWeb.DoesUserHavePermissions(per).Value)
    {
        var rootWebLists = clientContext.Site.RootWeb.Lists;

        returnList.AddRange(from List oList in rootWebLists
                            where oList.DoesUserHavePermissions(SPBasePermissions.ViewListItems) &&
                            where oList.BaseTemplate == (int)ListTemplateType.Announcements
                            select new SPListMeta(oList));
        var collWebs =
            clientContext.Site.OpenWebById(clientContext.Site.RootWeb.Id).GetSubwebsForCurrentUser(null);
        foreach(Web oWeb in collWebs)
        {

        }
    }
    return returnList;
} 
```

不起作用且似乎没有替代品的临界线是

`oList.DoesUserHavePermissions(SPBasePermissions.ViewListItems)`

因为这已从 CSOM 列表对象中删除

有什么新方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:46:28.863

检查权限的新方法是：

`List.EffectiveBasePermissions.Has(PermissionKind.Open)`

# python - 生成所有可能的 rgb 颜色

> ID：14106917
> 
> 赞同：1
> 
> 时间：2013-01-01T00:01:46.270
> 
> 标签：python, colors

看起来它会比现在简单得多，但是如何用 python 生成所有 16,777,255 rgb 颜色呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T09:09:48.080

8 位 RGB 值是数字 0..255 的三元组。您可以使用 itertools 的笛卡尔积函数方便地生成它们。

```
itertools.product(xrange(256), repeat=3) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T00:03:58.903

颜色通常表示为十六进制数字，实际上只是整数。因此，从 0 到 16,777,215 (0xFFFFFF) 的简单循环足以生成所有 24 位 RGB 颜色。

在 python 2.x 中，您可以执行以下操作：

```
allcolors = range(0xFFFFFF+1): 
```

# python - 无法在 zc.buildout 中导入设置

> ID：14106920
> 
> 赞同：1
> 
> 时间：2013-01-01T00:02:21.950
> 
> 标签：python, django, buildout

我刚刚设置了我的项目，但在让 Django 工作时遇到了问题。这是我的`buildout.cfg`：

```
[buildout]
parts = python django
develop = .
eggs = myproject

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[django]
recipe = djangorecipe
project = myproject
settings = settings
wsgi = true
fcgi = true 
```

我通过运行生成了我的 Django 项目

```
$ bin/django startproject myproject src/ 
```

设置文件肯定存在并且看起来不错，但我收到以下错误：

> 错误：无法导入设置“myproject.settings”（它在 sys.path 上吗？）：没有名为 myproject.settings 的模块

关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:50:29.250

你还没有告诉你的`[django]`部分使用哪个鸡蛋。

通常，您需要相同的鸡蛋在一个扩建部分中有两个或三个部分。在你的情况下`[django]`和`[python]`部分。最佳做法是添加一个`eggs`选项`[buildout]`（如您所做的那样）并在其他相关部分中使用它作为`eggs = ${buildout:eggs}`.

所以......你只是错过了你的那条线`[django]`。

# php - 捕获没有条件结尾的字符串

> ID：14106923
> 
> 赞同：2
> 
> 时间：2013-01-01T00:03:07.890
> 
> 标签：php, regex

我正在尝试捕获包含条件结尾的 URL 的中间部分：

URL 可以有两种类型：

```
/a/b/(part/needed)
/a/b/(part/needed)/page/# 
```

这是我使用的正则表达式：

```
preg_match('@/a/b/(.*)(/page/\d)?@i', '/a/b/some/text/page/1', $matches); 
```

返回

```
0=>"/a/b/some/text/page/1",
1=>"some/text/page/1" 
```

没关系，但它包括我不想要的条件结尾！

有人能告诉我如何不包括以它结尾的条件字符串，但在最后一段存在或不存在时仍然匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:09:08.053

通过锚定表达式`^$`并使第一组 non-greedy `(.*?)`，您可以获得所需的段。单独是一个贪婪的`.*`匹配，并且会吃掉后面的所有东西`.*`。

```
preg_match('@^/a/b/(.*?)(/page/\d)?$@i', '/a/b/some/text/page/1', $matches);
//-----------^-------^^^-----------^
print_r($matches);
Array
(
    [0] => /a/b/some/text/page/1
    [1] => some/text
    [2] => /page/1
) 
```

如果您不需要`/page/1`，请将其设为非捕获组`(?:...)`。

```
preg_match('@^/a/b/(.*?)(?:/page/\d)?$@i', '/a/b/some/text/more/page/1', $matches);
//----------------------^^^
print_r($matches);
Array
(
    [0] => /a/b/some/text/more/page/4
    [1] => some/text/more
) 
```

[regular-expressions.info](http://www.regular-expressions.info/repeat.html)有关于字符重复的很好信息`+`and `*`，以及贪婪的陷阱。

# ios - 带有后台线程的 iOS 捕获视图

> ID：14106924
> 
> 赞同：1
> 
> 时间：2013-01-01T00:03:10.777
> 
> 标签：ios, screen-capture, ipad-3

我不确定如何在 iPad 3 (2048x1536) 等像素密集的 iOS 设备上有效捕获屏幕。我见过一些例子，比如[this](http://developer.apple.com/library/ios/#qa/qa1704/_index.html) & [this](https://stackoverflow.com/questions/8891772/low-quality-of-capture-view-context-on-ipad)：

但是，这些解决方案太慢了。我希望每秒定期捕获几次视图，但捕获机制足够慢，如果我在主线程中执行此操作，UI 会锁定。我想知道是否有可能以某种方式将其委托给后台线程？或者也许有更有效的视图捕获功能？提前致谢。

# iphone - 检索用户的手机/手机号码（iPhone）

> ID：14106928
> 
> 赞同：-1
> 
> 时间：2013-01-01T00:03:57.657
> 
> 标签：iphone, xcode, ios6

是否可以直接从用户的手机中检索用户的手机/手机号码？

如果是这样，这个号码会一直有效吗？（将能够确定它是用户的实际手机号码/手机号码）

* * *

**:( 似乎不可能。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:08:17.577

不是以编程方式。这有点严重违反用户隐私限制！但是如果你的应用程序合法地想要这个，你总是可以直接向用户询问它。

# python - 根据参数返回函数值？

> ID：14106932
> 
> 赞同：-3
> 
> 时间：2013-01-01T00:04:27.550
> 
> 标签：python

我在下面的程序流程中遇到了这个问题，其中 func1 需要 list3，list4 但我不想从 func2 返回它们，因为它会影响 func2 的神圣性，有没有一种方法可以根据某些条件返回？全局是一种方式，但是这对我不起作用，因为我将使用不同的值调用这些函数，返回的列表取决于对值执行的操作..我还有哪些其他选项？

```
def func3 (value):
    list3=[]
    list4=[]
    #do some operations based on value
    return list3,list4

def func2 (value,flag):
    list1=[]
    list2=[]
    value=10
    #do some operations based on value
    if flag:
        (list3,list4)=func3(value)
    return list1,list2

def func1() :
    value =20
    (list1,list2)= func2(value,1)
    #func1 needs list3 and list4

def main():
    func1()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:12:33.887

我不确定您所说的“我不想从 func2 返回它们，因为它会影响 func2 的神圣性”是什么意思，但我假设您的意思是它`func`有一个明显的 API，这会破坏该 API。

不过，如果您希望调用者能够使用 of 中的这些值，则必须以*某种*`func2`方式将它们传递出去。以下是一些替代方案：

 *```
# Internal function used by func2 and func1
def func2_(value):
    list1=[]
    list2=[]
    value=10
    #do some operations based on value
    (list3,list4)=func3(value)
    return list1, list2, list3, list4

# Real func2 with the desired public API
def func2(value):
    list1, list2, _, _ = func2_(value)
    return list1, list2

def func1() :
    value =20
    (list1,list2,list3,list4)= func2_(value)
    #func1 _has_ list3 and list4 
```

如果问题是`func2`有时调用`func3`，有时不调用，但`func1`总是需要拥有`list3`，`list4`无论如何......那么你必须弄清楚如果从不调用`func1` *应该*`func3`得到什么值，然后返回那个值。明显的选择是`[]`,`None`或调用者传入的默认值：

```
def func2():
    list1=[]
    list2=[]
    value=10
    if somePredicate():
        (list3,list4)=func3(value)
        return list1, list2, list3, list4
    else:
        return list1, list2, None, None 
```

如果您确定`func2`应该始终在调用`func3`它时调用它`func1`，即使在*其他*情况下它可能不是，您也需要上面的 wrapper-function 解决方案。

或者，您甚至可以不返回值——没有规则说您的返回值必须始终具有相同数量的组件。这几乎肯定会在将来给您带来可读性问题，但这是完全合法的：

```
def func2():
    list1=[]
    list2=[]
    value=10
    if somePredicate():
        (list3,list4)=func3(value)
        return list1, list2, list3, list4
    else:
        return list1, list2 
```

如果调用函数知道什么时候需要 2`list`秒和 4 秒，那么你有两个不同的函数，所以你需要包装器。但如果它不可预测，他们可以动态处理它：

```
lists = function2(value)
if len(lists) == 4:
    list1, list2, list3, list4 = lists
    # do stuff will all 4 lists
else:
    list1, list2 = lists
    # do stuff with just 2 lists—or, if you needed the others, complain 
```

或者，如果您有一组数据和一组紧密结合在一起的操作，那么这可能是一个对象的工作：

```
class Class1(object):
    def __init__(self):
        self.list1, self.list2, self.list3, self.list4 = [], [], [], []
    def func3 (value):
        self.list3=[]
        self.list4=[]
        #do some operations based on value (that presumably modify list3/list4)
    def func2(self, value):
        self.list1=[]
        self.list2=[]
        #do some operations based on value (that presumably modify list1/list2)
        self.func3(value) # this sets self.list3 and self.list4
    def func1(self):
        value =20
        self.func2(value)
        #func1 now has access to the same self.list3 and self.list4 as func2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:06:09.293

如果你想要它，你需要退回它。唯一的其他选择将是一个更加丑陋的全局。

根据某些条件，您显然可以返回不同的值（甚至是不同大小或不同类型的元组）。用于`if`此。然而，这样做通常是相当难看的，因为它在调用函数时通常需要额外的代码。例如，如果返回的不是两个元素的集合，`x, y = foo()`则会失败并出现异常。`foo()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:25:25.627

因此，如果我理解正确，您希望 func_1 可以访问 list1、list2、list3 和 list4，并且既然您已经在内部调用了 func_3，那么您想在将来使用该调用吗？

一种简单的方法是简单地定义一个辅助函数，如上所述，或者，给 func_2 2 个变量，例如：

```
def func_2(value, lists_3_4=false):
     list1=[]
     list2=[]
     value=10
     #do some operations based on value
     (list3,list4)=func3(value)
     if lists_3_4:
     return list1, list2, list3, list4 
     return list1,list2 
```

但同样，这可能会破坏你定义为神圣的东西。

在我看来，abarnert 的解决方案可能是最干净的利用辅助函数。*

# javascript - HTML5/JavaScript 音频播放列表

> ID：14106933
> 
> 赞同：0
> 
> 时间：2013-01-01T00:04:36.083
> 
> 标签：javascript, html, audio, playlist

*[我在博客文章HTML5 Audio and Video and how to make a playlist](http://blog.lastrose.com/html5-audio-video-playlist/)*中找到了关于如何使用 HTML5 和 JavaScript 构建播放列表的很好的教程。我按照说明进行操作，但没有得到正确的结果。

此代码应该按顺序播放所有三个音频文件，并在最后一首歌曲结束时停止，但它实际上所做的是自动播放第一个文件，然后在第一个文件完成时停止。我做错什么了？

```
<html>
    <body>
        <ul id="playlist">
            <li class="active">
                <a href="http://www.codenamejupiterx.com/song/soundtest.mp3">
                   soundtest
                </a>
            </li>
            <li>
                <a href="http://www.codenamejupiterx.com/song/soundtest2.mp3">
                    soundtest2
                </a>
            </li>
            <li>
                <a href="http://www.codenamejupiterx.com/song/soundtest3.mp3">
                    soundtest3
                </a>
            </li>
        </ul>

        <script>
            var audio;
            var playlist;
            var tracks;
            var current;

            init();
            function init(){
                current = 0;
                audio = $('#audio');
                playlist = $('#playlist');
                tracks = playlist.find('li a');
                len = tracks.length - 1;
                audio[0].volume = .10;
                audio[0].play();
                playlist.find('a').click(function(e){
                    e.preventDefault();
                    link = $(this);
                    current = link.parent().index();
                    run(link, audio[0]);
                });
                audio[0].addEventListener('ended',function(e){
                    current++;
                    if(current == len){
                        current = 0;
                        link = playlist.find('a')[0];
                    }
                    else{
                        link = playlist.find('a')[current];
                    }
                    run($(link),audio[0]);
                });
            }

            function run(link, player){
                player.src = link.attr('href');
                par = link.parent();
                par.addClass('active').siblings().removeClass('active');
                audio[0].load();
                audio[0].play();
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:16:01.810

**1）** JavaScript代码使用jQuery（那些`$(...)`语句），所以它必须被导入：

```
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  </head>
<body>
... 
```

**2)**缺少 HTML 元素（真正的`audio`“播放器”）：

```
<body>
  <audio id="audio" preload="auto" tabindex="0" controls="" >
    <source src="http://www.codenamejupiterx.com/song/soundtest.mp3">
  </audio>
... 
```

**3）**代码只播放两首歌曲。玩三个：

```
...
len = tracks.length; //"-1" removed
... 
```

**4)**代码反复播放三首歌曲。要停止它：

```
audio[0].addEventListener('ended',function(e){
    current++;
    if(current < len){
      link = playlist.find('a')[current];   
      run($(link),audio[0]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-23T09:02:47.037

使用 jQuery，我确实通过使用以下控件实现了这一点。

添加带有以下参数的音频控制标签：

```
<audio id="audio1" controls="controls" autoplay="autoplay">    </audio> 
```

在 JavaScript 中：

```
jQuery(function($) {
    var supportsAudio = !!document.createElement('audio').canPlayType;
    if (supportsAudio) {

        url = URL.baseUrl + Books + authors + "/" + subject + "/data.json";
        $.getJSON(url, function(data){
            console.log("ddd"+JSON.stringify(data));

            var index = 0,
            trackCount = data.URL.length,
                npAction = $('#npAction'),
                npTitle = $('#npTitle'),
                audioid = $('#audio1').bind('play', function() {
                }).bind('ended', function() {

                if((index + 1) < trackCount) {
                    index++;
                    loadTrack(index);
                    audioid.play();
                }
                else {
                    audioid.pause();
                    index = 0;
                    loadTrack(index);
                }
            }).get(0),
                loadTrack = function(id) {
                    index = id;
                    audioid.src = data.URL[index].ayah;
                };
            loadTrack(index);
        });
    }
}); 
```

# java - ant：警告：用于编码 UTF8 的不可映射字符

> ID：14106936
> 
> 赞同：15
> 
> 时间：2013-01-01T00:05:00.947
> 
> 标签：java, linux, ant

我见过很多像我这样的问题，但他们没有回答我的问题，因为我使用的是 ant 而我没有使用 eclipse。我运行这段代码：`ant clean dist`它多次告诉我`warning: unmappable character for encoding UTF8`.

我在 Java 命令上看到有一个 -encoding 选项，但这对我没有帮助，因为我正在使用 ant。

我在 Linux 上，我正在尝试运行[Sentrick](http://sourceforge.net/projects/sentrick/)的开发人员版本；我没有对任何东西进行任何修改，我只是下载了它并按照他们的所有[说明](http://sentrick.git.sourceforge.net/git/gitweb.cgi?p=sentrick/sentrick;a=blob;f=doc/readme.txt;h=6ef6ea2789a2f41dbcf542f5f076977f2e519585;hb=HEAD)进行操作，这没有任何区别。我给开发人员发了电子邮件，他们告诉我这是这个问题，但我怀疑这实际上与最后这个错误有关：

```
BUILD FAILED
/home/daniel/sentricksrc/sentrick/build.xml:22: The following error occurred while executing this line:
/home/daniel/sentricksrc/sentrick/ant/common-targets.xml:83: Test de.denkselbst.sentrick.tokeniser.components.DetectedAbbreviationAnnotatorTest failed 
```

我不确定我现在要做什么，因为我真的需要它来工作

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-01T00:17:01.490

尝试更改源文件的文件编码并将默认 Java 文件编码也设置为 UTF-8。

对于蚂蚁：

添加`-Dfile.encoding=UTF8`到您的`ANT_OPTS`环境变量

将默认 Java 文件编码设置为 UTF-8：

```
export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF8 
```

或者您可以使用参数启动 java`-Dfile.encoding=UTF8`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T08:19:36.130

问题不是日食或蚂蚁。问题是您有一个包含特殊字符的构建文件。就像 MS Word 中的智能引号或 m 破折号。无论如何，您的 XML 文件中有不属于 UTF-8 字符集的字符。因此，您应该修复您的 XML 以删除那些无效字符，并将它们替换为外观相似但有效的 UTF-8 版本。寻找特殊字符，如 @ © — ® 等，并将它们替换为 (c) 或任何对您有用的字符。

顺便说一句，坏字符在第 83 行的 common-targets.xml 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T07:29:14.153

将编码更改为 Cp 1252 适用于我的项目，但错误相同。我尝试多次更改 Eclipse 属性，但它对我没有任何帮助。我在 pom.xml 文件中添加了编码属性，错误消失了。[http://ctrlaltsolve.blogspot.in/2015/11/encoding-properties-in-maven.html](http://ctrlaltsolve.blogspot.in/2015/11/encoding-properties-in-maven.html)

# mysql - 查找不共享关系的记录

> ID：14106939
> 
> 赞同：0
> 
> 时间：2013-01-01T00:05:46.630
> 
> 标签：mysql, sql

> **可能重复：**
> [SQL - 从一个表中查找不存在于另一个表中的记录](https://stackoverflow.com/questions/367863/sql-find-records-from-one-table-which-dont-exist-in-another)

我在 MySQL 中有以下（简化的）模式：

![简化模式](../Images/7898126953d5311844ea29a2b03c7747.png)

箭头表示一个（非箭头侧）对多（箭头侧）的关系。

我想确定，对于哪个delivery_zone_weeks，客户没有weekly_order。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:33:36.777

没有结构、样本数据和预期结果很难完全理解，但似乎有点冒险你需要

```
SELECT * FROM DELIVERY_ZONE_WEEK WHERE ID_DELIVERY_ZONE_WEEK NOT IN
(SELECT WO.ID_DELIVERY_ZONE_WEEK FROM CUSTOMER C
JOIN SHIPPING_ADDRESS SA
    ON C.ID_CUSTOMER = SA.ID_CUSTOMER
JOIN WEEKLY_ORDER WO
    ON SA.ID_SHIPPING = WO.ID_SHIPPING
WHERE C.ID_CUSTOMER = @ID_CUSTOMER) 
```

# java - 关于java枚举的两个问题

> ID：14106943
> 
> 赞同：1
> 
> 时间：2013-01-01T00:07:28.643
> 
> 标签：java, enumeration

1.  我注意到我不能使用 foreach 进行枚举，我想知道为什么？

2.  为什么以下给了我无限循环：

    ```
    while(keyStore.aliases().hasMoreElements()) {
        System.out.println(keyStore.aliases().nextElement());
    } 
    ```

我必须使用：

```
Enumeration e = keyStore.aliases();
while(e.hasMoreElements()) {
    System.out.println(e.nextElement());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T00:08:52.983

每次调用 时，都会得到一个指向序列开头的`keyStore.aliases()`全新。`Enumeration`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:29:08.370

关于您的第一个问题，您可以`foreach`与任何实现`Iterable`. `Enumerations`不要，它们`Iterators`在 1998 年就已经过时了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:34:46.973

如果条目数量很少，您可以使用

`Collections.list(Enumeration)`这给了你一个`ArrayList`你可以迭代的东西。

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#list(java.util.Enumeration](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#list(java.util.Enumeration) )

# php - textarea 未提交到数据库

> ID：14106944
> 
> 赞同：3
> 
> 时间：2013-01-01T00:07:55.540
> 
> 标签：php, mysql, forms, textarea, nicedit

我有一个表单我试图提交到我的 MySQL 数据库中，它提交的所有记录都可以接受我博客表中的“内容”字段。

我不确定这是否重要，但我正在使用来自 nicedit.com 的 textarea 框架

更新：我已经删除了 NicEdit 框架，它作为普通文本区域提交时效果很好，我不确定现在该去哪里我会尝试将我的支持转移到 NicEdit 并在我找到解决方案时发布回复这个问题。

但是，我遇到了另一个问题并且不想打开关于它的新帖子，我的日期插入为 0000-00-00 而不是当前日期。有什么解决办法吗？

这是php post方法

```
<?php
include_once"dbconnection.php";
session_start();
$connect = mysql_connect($host, $username, $password) or die (@mysql_error());
$selectdb = mysql_select_db($database, $connect) or die (@mysql_error());
if(isset($_POST['postblog'])){
    $blogtitle = $_POST['blogtitle'];
    $blogcontent = $_POST['blogcontent'];
    $author = 'Admin';
    $query = mysql_query("INSERT INTO blog SET date='date()', title='$blogtitle', author='$author', published='1', content='$blogcontent'");
    if ($query == false){
        echo "false";
    } else {
        echo "true";
    }
}
?> 
```

和html表单

```
<form action='postblog.php' method='post'>
    <input class="inputMed" type="text" name="blogtitle"> <br />
    <textarea style="width: 600px;" name="blogcontent"></textarea> <br />
    <input type="submit" name="postblog" id="postblog" value="Post Blog" />
</form> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:44:41.320

您的编辑器可能正在提交不同的变量（或根本不提交）。一种判断方法是让您的 PHP 执行以下操作：

```
print_r($_REQUEST); 
```

暂时将其放入您的脚本中，以查看提交的内容和名称。如果你看到它，那就太好了。如果您没有看到您的内容，您将知道问题与 PHP 无关，您将不得不查看 nicedit 方面的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:18:47.797

关于你的`HOWEVER`日期问题。您`'date()'`被解析为字符串而不是函数，并且您尚未定义参数。改成-

```
$query = mysql_query("INSERT INTO blog SET date='".date('Y-m-d')."', title='$blogtitle', author='$author', published='1', content='$blogcontent'"); 
```

或使用 MySQL [`NOW()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_now)-

```
$query = mysql_query("INSERT INTO blog SET date=NOW(), title='$blogtitle', author='$author', published='1', content='$blogcontent'"); 
```

或使用 MySQL [`CURDATE()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_curdate)-

```
$query = mysql_query("INSERT INTO blog SET date=CURDATE(), title='$blogtitle', author='$author', published='1', content='$blogcontent'"); 
```

另见 -[单引号内的 PHP 函数显示为文本](https://stackoverflow.com/questions/11437975/php-function-inside-single-quotes-display-is-as-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T03:20:47.087

对于日期问题，您可以使用 mysql currdate 函数，例如

```
 mysql_query("INSERT INTO blog SET date='DATE: Auto CURDATE()', title='$blogtitle', author='$author', published='1', content='$blogcontent'"); 
```

对于 Nicedit 试试这个

```
 try this code
   <html>
   <head>
    <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
    <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
   </head>

   <body>
    <form action='postblog.php' method='post'>
     <input class="inputMed" type="text" name="blogtitle"> <br />
     <textarea style="width: 600px;" name="blogcontent"></textarea> <br />
     <input type="submit" name="postblog" id="postblog" value="Post Blog" />
   </form>
  </body>
  </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T00:23:05.550

根据这篇文章：[NicEdit data not in POST](https://stackoverflow.com/questions/12481032/nicedit-data-not-in-post)，你需要这样的东西：

```
<INPUT type=submit name="submit" value="Send" onclick="nicEditors.findEditor('blogContent').saveContent();"> 
```

可能是这样的：

```
var editor = new nicEditors.findEditor('blogContent');
var content = editor.getContent(); 
```

那应该为您指明正确的方向。如果您想要一个具体的答案，您需要将您的问题专门针对知道和/或使用 NicEdit 的人，因为您的问题与它 (NicEdit) 如何以非标准方式包装您的 DOM 密切相关。

# c++ - 以编程方式分析故障转储

> ID：14106950
> 
> 赞同：1
> 
> 时间：2013-01-01T00:09:11.727
> 
> 标签：c++, windows, visual-studio, mdp

是否有任何 api 可以加载故障转储、符号存储中的符号，然后允许以编程方式访问信息？

我想创建一个工具来自动处理故障转储并根据它们生成报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:20:08.560

使用 Windbg 的命令文件设置您的配置，然后运行`!analyze`​​. 将 windbg 设置为输出到文件（如此处所述：[windbg：命令输出到文本文件](https://stackoverflow.com/questions/1006060/windbg-command-output-to-text-file)）

然后，您可以享受尝试对输出进行排序、分类等操作。`!analyze`将在分析大多数崩溃方面做得很好。如果不能，我怀疑你会用自己的代码做得更好，除非你在按程序分析崩溃日志方面有很多经验（我从来没有尝试过，虽然我对什么有一个不错的想法要寻找，我不一定要编写代码来实际执行它-我已经编写了代码来在系统崩溃时编写日志，所以我知道您通常需要什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:32:51.933

Windows dbghelp API 加载符号和行号信息以支持进行堆栈回溯。不知道用于读取故障转储文件的 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:44:16.843

调试诊断工具有一个 com 接口，可以加载转储、使用符号处理它并返回信息。

[http://www.microsoft.com/en-au/download/details.aspx?id=26798](http://www.microsoft.com/en-au/download/details.aspx?id=26798)

教程：[http ://codenasarre.wordpress.com/2011/06/14/how-to-control-a-debugger-engine/](http://codenasarre.wordpress.com/2011/06/14/how-to-control-a-debugger-engine/)

# sql - SQL 查询帮助：选择最新记录并加入另一个表

> ID：14106952
> 
> 赞同：4
> 
> 时间：2013-01-01T00:09:42.523
> 
> 标签：sql

我一直在尝试在 SQL Server 2012 中编写一个在这里工作的查询，但没有成功。

我有 tblProducts 看起来像这样并且有大约 100000 行：

```
SKU, Title, CategoryID
155, 'Product a', 5
176, 'Product b', 5
630, 'Product 1', 10 
```

和 tblPrices 看起来像这样，大约有一百万行，每行记录特定时间项目的价格和库存：

```
SKU, Price, StockCount, TimeStamp (smalldatetime)
155, 10, 5, 2012-12-31 23:40:00
155, 9, 6, 2012-12-30 23:40:00
155, 7, 6, 2012-12-29 21:40:00
176, 0.50, 0, 2012-12-31 23:40:00 
```

基本上，我想获取第 5 类且当前价格 > 3 的 SKU 列表。

到目前为止，我有：

```
SELECT *
FROM tblPrices
WHERE Timestamp IN (
    SELECT MAX(TimeStamp)
    FROM tblPrices
    GROUP BY SKU 
```

这给了我 tblPrices 中每个 SKU 的当前/最新价格：

```
SKU, Price, StockCount, TimeStamp
155, 10, 5, 2012-12-31 23:40:00
176, 0.50, 0, 2012-12-31 23:40:00 
```

但我真正需要的是按价格过滤此表，将其加入 tblProducts，然后按类别过滤。但是，无论我如何尝试，它都会为每个 SKU 返回几行或忽略价格条件。下面返回多个 SKU（因此错过了最新价格点必须 > 3），并且还需要大约 2 分钟来执行并返回 810 行，其中大约四分之一是唯一的：

```
SELECT tblProducts.SKU , CategoryID
FROM tblProducts,

(SELECT EAN, Price
FROM tblPrices
WHERE Timestamp IN (
    SELECT MAX(TimeStamp)
    FROM tblPrices
    GROUP BY SKU
)) a

WHERE tblProducts.EAN = a.EAN AND tblProducts.CategoryID=5 AND a.Price > 3 
```

我将非常感谢任何帮助，因为我自己无处可去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:16:53.557

在`WHERE`子句中使用子查询

```
SELECT SKU
FROM tblProducts
WHERE CategoryId = 5 AND SKU IN (
    SELECT SKU
    FROM tblPrices
    WHERE Price > 3 AND Timestamp IN (
        SELECT MAX(TimeStamp)
        FROM tblPrices
        GROUP BY SKU
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:13:35.603

您可以[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)在 CTE 中使用`PARTITION BY SKU` 并`ORDER BY TimeStamp DESC`为每个 SKU 仅获取一行`CATEGORYID=5`：

```
WITH CTE AS 
(
   SELECT 
      PR.SKU, PR.Price, PR.StockCount, PR.TimeStamp, P.Title, P.CategoryID,
      ROW_NUMBER() OVER (PARTITION BY PR.SKU ORDER BY PR.TimeStamp DESC) AS RN
   FROM 
      tblProducts P 
      INNER JOIN tblPrices PR ON P.SKU=PR.SKU
   WHERE 
      p.CategoryID=5
      AND PR.Price > 3
)
SELECT 
   SKU, Price, StockCount, TimeStamp, Title, CategoryID
FROM 
   CTE
WHERE 
   RN = 1 
```

The`CTE`类似于子查询，而 the`PARTITION BY`类似于`GROUP BY`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:51:14.447

与带有*相关*子查询的 Voithos 相同的想法。

```
 SELECT p.SKU, p.Price
 FROM tblPrices p
      Join tblProducts d 
           On d.sku = p.sku
 WHERE d.CategoryId = 5 
     And p.Price > 3
     AND p.Timestamp =
        (Select Max(TimeStamp)
         From tblPrices 
         Where Sku = p.sku) 
```

# java - Swing - Thread.sleep() 停止 JTextField.setText() 工作

> ID：14106953
> 
> 赞同：5
> 
> 时间：2013-01-01T00:09:43.983
> 
> 标签：java, swing, jtextfield, thread-sleep

> **可能重复：**
> [对单个线程使用 sleep()](https://stackoverflow.com/questions/14074329/using-sleep-for-a-single-thread)

我在使用 Thread.sleep() 时遇到了 JTextField.setText() 的问题。这是我正在制作的基本计算器。当输入字段中的输入格式不正确时，我希望“输入错误”出现在输出字段中 5 秒钟，然后将其清除。当我将文本设置为“输入错误”一次并打印出中间的文本时，setText() 方法*确实*有效，我发现它与 setText("") 一个接一个地工作。当我将 Thread.sleep() 放在它们之间时，问题就出现了。这是代码的 SSCCE 版本：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.regex.Pattern;
import javax.swing.*;

public class Calc {
    static Calc calc = new Calc();

    public static void main(String args[]) {
        GUI gui = calc.new GUI();
    }

    public class GUI implements ActionListener {

        private JButton equals;

        private JTextField inputField, outputField;

        public GUI() {
            createFrame();
        }

        public void createFrame() {
            JFrame baseFrame = new JFrame("Calculator");
            baseFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JPanel contentPane = new JPanel();
            BoxLayout layout = new BoxLayout(contentPane, BoxLayout.Y_AXIS);
            contentPane.setLayout(layout);
            baseFrame.setContentPane(contentPane);
            baseFrame.setSize(320, 100);

            equals = new JButton("=");
            equals.addActionListener(this);

            inputField = new JTextField(16);
            inputField.setHorizontalAlignment(JTextField.TRAILING);
            outputField = new JTextField(16);
            outputField.setHorizontalAlignment(JTextField.TRAILING);
            outputField.setEditable(false);

            contentPane.add(inputField);
            contentPane.add(outputField);
            contentPane.add(equals);

            contentPane.getRootPane().setDefaultButton(equals);
            baseFrame.setResizable(false);
            baseFrame.setLocation(100, 100);

            baseFrame.setVisible(true);
        }

        /**
         * When an action event takes place, the source is identified and the
         * appropriate action is taken.
         */

        @Override
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == equals) {
                inputField.setText(inputField.getText().replaceAll("\\s", ""));
                String text = inputField.getText();
                System.out.println(text);
                Pattern equationPattern = Pattern.compile("[\\d(][\\d-+*/()]+[)\\d]");
                boolean match = equationPattern.matcher(text).matches();
                System.out.println(match);
                if (match) {
                    // Another class calculates
                } else {
                    try {
                        outputField.setText("INPUT ERROR"); // This doesn't appear
                        Thread.sleep(5000);
                        outputField.setText("");
                    } catch (InterruptedException e1) {
                    }
                }
            }
        }
    }
} 
```

我实际上并没有使用嵌套类，但我希望它能够为您包含在一个类中。对 GUI 的外观感到抱歉，但这又是为了减少代码。重要部分 ( `if (e.getSource() == equals)`) 与我的代码保持不变。给出错误输入的最简单方法是使用字母。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T00:25:31.760

当你使用时，`Thread.sleep()`你是在主线程上做的。这会将 gui 冻结五秒钟，然后更新`outputField`. 发生这种情况时，它使用最后设置的空白文本。

[使用Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)会好得多，这里有一个例子可以完成你想要完成的事情：

```
if (match) {
    // Another class calculates
} else {
    outputField.setText("INPUT ERROR");
    ActionListener listener = new ActionListener(){
        public void actionPerformed(ActionEvent event){
            outputField.setText("");
        }
    };
    Timer timer = new Timer(5000, listener);
    timer.setRepeats(false);
    timer.start();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-01T00:17:00.820

您正在`Thread.sleep()`Swing 主线程中执行操作。这不是好的做法。您最多需要使用`SwingWorker`线程。

发生的事情是它正在运行第一行，击中`Thread.sleep()`.

这可以防止（主）EDT 线程进行任何重绘（以及防止下一行执行）。

您应该使用 a[`javax.swing.Timer`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/Timer.html)来设置延迟反应，而不是将`sleep()`调用放在主线程中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-01T00:52:04.417

正如 Philip Whitehouse 在他的回答中所说，您正在通过`Thread.sleep(...)`调用阻止摇摆事件调度线程。

鉴于您已经花时间设置了一个，使用 a来控制清除文本`ActionListener`可能是最简单的。[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)为此，您可以在`GUI`类中添加一个字段：

```
 private Timer clearTimer = new Timer(5000, this); 
```

在 for 的构造函数中`GUI`，关闭重复功能，因为您实际上只需要一次：

```
 public GUI() {
        clearTimer.setRepeats(false);
        createFrame();
    } 
```

然后，`actionPerformed`可以修改为使用它来启动计时器/清除字段：

```
 public void actionPerformed(ActionEvent e) {
        if (e.getSource() == equals) {
            inputField.setText(inputField.getText().replaceAll("\\s", ""));
            String text = inputField.getText();
            System.out.println(text);
            Pattern equationPattern = Pattern.compile("[\\d(][\\d-+*/()]+[)\\d]");
            boolean match = equationPattern.matcher(text).matches();
            System.out.println(match);
            if (match) {
                // Another class calculates
            } else {
                clearTimer.restart();
                outputField.setText("INPUT ERROR"); // This doesn't appear
            }
        } else if (e.getSource() == clearTimer) {
            outputField.setText("");
        }
    } 
```

# mysql - Mysql将多张表合并为一张大表

> ID：14106957
> 
> 赞同：1
> 
> 时间：2013-01-01T00:11:08.600
> 
> 标签：mysql, union

我有一个选择多个表名称的查询：

从 INFORMATION_SCHEMA.TABLES 中选择 TABLE_NAME 作为表

```
+---------------+
| TABLES        |
+---------------+
| A             |
| B             |
| <more tables> |
+---------------+ 
```

我想创建一个查询，其中每个表中的每个值都被联合在一起，如下所示：

```
+------------+----+----------+
| table_name | id | name     |
+------------+----+----------+
| A          | 1  | item1    | <- Items from Table A
| A          | 2  | item2    | 
| A          | 3  | item3    |
| B          | 1  | item1    | <- Items from Table B
| B          | 2  | item2    |
| <entries for other tables> |
+------------+----+----------+ 
```

有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:22:45.097

假设您在最松散的意义上使用“聚合”...

```
select 'A' as table_name, id, name
from table_a
union all
select 'B' as table_name, id, name
from table_b 
```

# proxy - 在 EC2 上使用服务器端代理时，Google 放置 API - 'REQUEST_DENIED'

> ID：14106962
> 
> 赞同：4
> 
> 时间：2013-01-01T00:12:25.520
> 
> 标签：proxy, google-places-api, api-key

我一直在尝试对 Google Places 进行 API 调用。我正在为请求使用服务器端 PHP 代理 - 不是因为我想要，而是因为它是[JQuery-POI-Mapper](http://codecanyon.net/item/jquery-poi-mapper/292342)的一部分。

我使用的服务器是没有静态 IP 地址的 Amazon EC2 服务器。我目前没有固定 IP 地址，但如果人们认为这是问题所在，我会花时间请求更多。我通过在服务器上运行以下命令确定了我的 EC2 服务器的当前公共 IP 地址：

```
curl http://169.254.169.254/latest/meta-data/public-ipv4 
```

接下来，我访问了[https://code.google.com/apis/console](https://code.google.com/apis/console)并创建了一个新的 API 密钥。我选择了一个服务器端 API 密钥并使用了我的 EC2 服务器的公共 IP 地址。

* * *

![在此处输入图像描述](../Images/7362caa448eb28ec83d1c7db77e88e43.png)

* * *

在服务选项卡下，我启用了我能想到的所有相关 API，包括：

*   谷歌地图 API v2
*   谷歌地图 API v3
*   谷歌地图地理定位 API
*   地方 API
*   静态地图 API

这是我的服务的屏幕截图：

![在此处输入图像描述](../Images/2aeb704595a19ac498e3c656e7f579dc.png)

在 EC2 服务器上运行的代理代码是商业包的一部分，所以我不应该发布整个代码，但它很短，重要的部分是：

```
$json = file_get_contents($url); 
```

在我的例子中，$url 变量是：

```
https://maps.googleapis.com/maps/api/place/search/json?location=-37.7133771,145.14891620000003&radius=2000&types=bakery&sensor=false&key=AIzaSyCCUV... 
```

我得到的回应是：

```
{
   "html_attributions" : [],
   "results" : [],
   "status" : "REQUEST_DENIED"
} 
```

我检查了我是否已经超过了我的配额，但一切看起来都很好。有趣的是，Google 显示我今天向 Places API 发出了请求，所以 Google 肯定知道这些请求来自我。

这是我的 API 流量报告的屏幕截图，全部来自测试：

![在此处输入图像描述](../Images/d552d676c8f1f38407c1a8bcb88ca7b6.png)

任何建议将不胜感激。

谢谢，布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:55:48.647

您需要静态 IP 地址才能通过服务器 API 密钥成功使用 IP 锁定。

# programming-languages - 学习编程语言所需的时间

> ID：14106969
> 
> 赞同：1
> 
> 时间：2013-01-01T00:14:10.197
> 
> 标签：programming-languages

是否有某个地方可以知道学习编程语言需要多少时间？

我确实明白这在很大程度上取决于人/学习方法。但我更感兴趣的是看到语言之间的一些动态，我想这会不那么“个性化”——即我希望看到 HARD 和 EASY 语言之间的划分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:38:37.713

一般来说，一门语言的难易程度取决于它所拥有的库。以 C 的 Windows API 为例。让程序做简单的事情很难，而且很多时候效率很低。这就是 .NET 框架的用武之地。您仍然可以将 C++ 与 .NET 框架一起使用。该语言并不容易，但您使用的库更易于使用。

学习 Java 需要相当长的时间，尤其是对于初学者而言。然而，在我学习 Java 的前 5 分钟之后，我理解了 Swing 库并且可以编写一个简单的程序。如果我想对 Windows API 做同样的事情，那我需要一个月的时间。

最后，掌握和理解语言的内在是耗时的，但与所花费的努力成正比。

C++ 可以在 21 天内*学会*（正如本书所说），但要完全理解它需要数年时间。

# matlab - 感兴趣区域和数据顶点（3D），matlab

> ID：14106970
> 
> 赞同：4
> 
> 时间：2013-01-01T00:14:21.400
> 
> 标签：matlab, figure

我想要一个类似于 AutoCAD 的简单功能，它允许我通过鼠标选择来选择 3D 中的所有线条。

![在此处输入图像描述](../Images/30173d814d8dc9ee199992e99106a4ae.png)

在无花果中，我只想获取所有选择中的 (x,y,z) 。选择功能应该和AutoCAD一样。

1-鼠标点击一行

2-区域选择使用光标信息我只得到一个点（x，y，z），如图所示。如果我能得到鼠标制作的矩形内的所有点（感兴趣的区域可以是多边形），那就太好了。

我认为该功能可能看起来类似于

```
[BW, xi, yi] = roipoly(...) 
```

3D

```
 [ xi, yi,zi] = roipoly_new(...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T04:07:34.083

一般来说，要解决这个问题，您需要以下内容：

[ xi, yi,zi] = roipoly_new(...)

确定观点，POV。

从 POV 向外投影 ROI，并测试与所有具有已知顶点的对象的交集。这是一种光线追踪算法，但它是针对线性问题进行分析的，因此实现起来应该不会太难。matlab 中央的第一个结果给出了这个： http: [//www.mathworks.com/matlabcentral/fileexchange/authors/30179](http://www.mathworks.com/matlabcentral/fileexchange/authors/30179)

一旦你知道哪些物体与你的光线相交，世界就是你的牡蛎。

# javascript - 强制表单文本为小写

> ID：14106971
> 
> 赞同：30
> 
> 时间：2013-01-01T00:14:32.487
> 
> 标签：javascript, html, css

无论用户类型如何，如何强制“用户名”文本中的文本`input`为小写？

```
<div class="register">
   <label for="username">Select username:</label>
</div> 
<div class="registerform">
    <input name="username" class="registerfont" type="text"
           id="username" maxlength="15" style="height:35px; width:300px">
</div> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-01T00:18:28.213

在 CSS 中：

```
form input[type="text"] {
    text-transform: lowercase;
} 
```

否则在 JS 中：

```
var text="this is my text.";
var lowercase=text.toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-01T00:21:38.047

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-03-18T14:50:39.137

You can use something as

```
<input autocapitalize="none" ></input> 
```

and it should work in the latest browsers For more details check this [link](https://developers.google.com/web/updates/2015/04/autocapitalize)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-09T18:52:15.700

Using jquery assuming that the input ID is *username*

```
$(document).ready(function(){
    $("#username").on('change keyup paste',function(){
    $(this).val($(this).val().toLowerCase());
     })
}) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-04-20T07:53:14.293

@fdiv_bug's answer is good except for the issues mentioned in the comments of their answer. Using the input event instead of the keyup event fixed those issues for me.

HTML:

```
<input oninput="this.value=this.value.toLowerCase()"/>​ 
```

Javascript:

```
element.addEventListener('input',function(){this.value=this.value.toLowerCase()});​ 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-09-19T03:08:17.483

Combining a bit of everyone's answer to here simplify things.

1.  Use CSS to avoid any flashing and for display purposes.

    ```
    input[type="username"] {
      text-transform: lowercase;
    } 
    ```

Now, because this ONLY effects DISPLAY of the text in the browser, we need to also change the value of the input.

2.  Add an event listener to the input.

    ```
    const usernameInput = document.querySelector('input[type="username"]');
    usernameInput.addEventListener("input", function(e){
      e.target.value = e.target.value.toLowerCase();
    }); 
    ```

We can send this to the sever like normal and, like others have mentioned, check server-side to make sure a malicious user didn't send us UpPPercaSe input.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-13T11:33:25.323

This is my suggestion, it's based on the answer from @fdiv-bug & @ali-sheikhpour:

1.  Add [text-transform: lowercase;](https://stackoverflow.com/questions/14106971/forcing-form-text-to-be-lower-case##answer-14106992) for this field.

```
input[type="email"] {
    text-transform: lowercase;
} 
```

2.  catch "change" event on this field and transform value to lowercase by (String)toLowerCase function.

```
var upperCaseMatch = /[A-Z]/;
var events = {
    CHANGE: 'change'
};

$(function() {
    $(document).on('change', 'input[type="email"]', function() {
        var value = $(this).val();
        if (!upperCaseMatch.test(value)) {
            return;
        }
        $(this).val(value.toLowerCase());
    });
}); 
```

Hope its useful for you.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-29T22:24:31.903

I use this simple code :

```
<input type="text" onkeyup="this.value = this.value.toUpperCase();"> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-24T17:43:03.883

`setInterval()` will run if the user pastes something in

```
setInterval(function(){
  let myinput = document.getElementById('myinput');
  //make lowercase
  myinput.value = myinput.value.toString().toLowerCase();
  //remove spaces (if you want)
  myinput.value = myinput.value.toString().replace(' ', '');
  //force specific characters
  myinput.value = myinput.value.toString().replace(/[^a-z0-9\/\-_]/, '');
}, 10); 
```

because this is a loop function using `.replace()`, replacing only first occurrence at a time, but still looping all of them, this appears to animate removing spaces on pasted text.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-18T10:34:53.623

Use **onchange** instead

```
<input name="username"
  onchange="this.value = this.value.toUpperCase();"
  style="text-transform: lowercase; height:35px; width:300px"

  class="registerfont"
  type="text"
  id="username"
  maxlength="15"
> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-11T00:45:11.503

## Old question. New answer.

With HTML5 Form Validation now (2021) [supported across all major browsers](https://caniuse.com/?search=form%20validation), it is relatively simple to force lowercase text on an input field, client side, using the [pattern attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/pattern). (The `pattern` attribute is [supported](https://caniuse.com/input-pattern) by all but Opera Mini at the time of writing).

**HTML:**

```
<label>Field Name (lowercase letters only)</label>
<input type="text" pattern="[a-z]" placeholder="Field Name (lowercase letters only)"> 
```

* * *

**Note:** The below follows from but gets semi out of scope of the question.

Forcing lowercase on an **email address field** (which is what brought me to this question) seems to be more risky as using `pattern`/rejex to validate email addresses is [fairly complicated](https://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-an-email-address) and there are [potential issues associated with implementing `pattern` in conjunction with type="email"](https://stackoverflow.com/questions/31341523/is-both-pattern-and-type-email-used-in-conjunction-an-issue).

The above aside, for my use case, the following `pattern` was sufficient:

```
<label>Email Address (lowercase letters only)</label>
<input type="email" pattern="[^A-Z]+" placeholder="Email Address (lowercase letters only)"> 
```

The rejex expression `[^A-Z]+` allows any characters that aren't capitals. I leave the actual email address validation to the browser via `type="email"`. I tested this on desktop in Chrome, Firefox, Edge and IE11 and all worked fine.

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2020-10-08T19:19:04.060

Using jquery assuming that the input ID is username:

```
$(document).ready(function(){
    $("#username").on('input', function(){
        $(this).val( $(this).val().toLowerCase() );
    })
}); 
```

# c++ - 将 unique_ptr 与成员函数指针一起使用时出错

> ID：14106975
> 
> 赞同：5
> 
> 时间：2013-01-01T00:14:54.110
> 
> 标签：c++, member-function-pointers

我有一门课如下

```
class A
{
public:
    A(int key)          : m_key(key) {}
    int Key() const     {return m_key;}

private:
    int m_key;
}; 
```

我使用带有成员函数指针的 unique_ptr 进行测试

```
int (A::*MemFun)() const;
MemFun = &A::Key;
( std::unique_ptr<A>(new A(10))       ->*MemFun ) (); // Error C2296
( std::unique_ptr<A>(new A(10)).get() ->*MemFun ) (); // okay
(*std::unique_ptr<A>(new A(10))        .*MemFun ) (); // okay 
```

第一个给出编译错误（VC2010 给出错误 C2296，非法，左运算符包括 std::unique_ptr<_Ty>）。为什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T00:42:34.193

似乎`operator->*()`运算符没有为`std::unique_ptr<T>`. *尽管我认为在提出智能指针的时候还没有处理合适的重载的必要机制，*但未定义此运算符的原因并不完全清楚。

问题是`operator->*()`需要处理返回绑定结果。对于一个简单的成员函数，这是相当简单的，但对于函数来说，这并不完全是微不足道的。这是`unique_ptr<T>`类模板的一个简约变体，它只是显示了实现的样子：

```
template <typename T>
struct unique_ptr
{
    T* p_;
    unique_ptr(T* p): p_(p) {}
    T* operator->() { return this->p_; }
    template <typename R>
    R& operator->*(R T::*mem) { return this->p_->*mem; }
    template <typename R>
    auto operator->*(R (T::*mem)()) ->decltype(std::bind(mem, this->p_))
    {
        return std::bind(mem, this->p_);
    }
}; 
```

这个版本只处理指向成员变量的指针和指向不带参数的成员函数的指针。`operator->*()`对于任意数量的参数，我需要对运算符的一个版本进行一些思考。指向成员变量的指针的版本很简单：它只需要返回对应成员的引用。成员函数的版本需要创建一个可调用对象，其中第一个（隐式）参数绑定到正确的对象。

处理任意数量的参数需要使用可变参数。还处理带参数的成员函数指针的定义`unique_ptr<T>`可能如下所示：

```
template <typename T>
struct unique_ptr
{
private:
    T* p_;
    template <typename R, typename... A, int... I>
    auto bind_members(R (T::*mem)(A...), indices<I...>)
        -> decltype(std::bind(mem, this->p_, placeholder<I + 1>()...))
    {
        return std::bind(mem, this->p_, placeholder<I + 1>()...);
    }

public:
    unique_ptr(T* p): p_(p) {}
    T* operator->() const { return this->p_; }
    template <typename R>
    R& operator->*(R T::*mem) { return this->p_->*mem; }
    template <typename R>
    auto operator->*(R (T::*mem)()) ->decltype(std::bind(mem, this->p_))
    {
        return std::bind(mem, this->p_);
    }
    template <typename R, typename... A>
    auto operator->*(R (T::*mem)(A...))
        -> decltype(this->bind_members(mem,
                typename indices<sizeof...(A) - 1>::type())) {
        return this->bind_members(mem,
            typename indices<sizeof...(A) - 1>::type());
    }
}; 
```

主要技巧在于为参数创建一系列合适的占位符。相应的辅助类是这样定义的：

```
template <int... Indices> struct indices;
template <> struct indices<-1> { typedef indices<> type; };
template <int... Indices>
struct indices<0, Indices...>
{
    typedef indices<0, Indices...> type;
};
template <int Index, int... Indices>
struct indices<Index, Indices...>
{
    typedef typename indices<Index - 1, Index, Indices...>::type type;
};

template <int I>
struct placeholder
    : std::integral_constant<int, I>
{
};

namespace std
{
    template <int I>
    struct is_placeholder<placeholder<I>>
        : std::integral_constant<bool, true>
    {
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:42:33.750

语法是单个运算符（ “`->*`指向成员的”运算符之一）。此运算符可以重载，但`std::unique_ptr`不这样做。

# facebook - 如何从 Twitter、Facebook 和 Instagram 中提取内容作为 WordPress 中的帖子项目？

> ID：14106977
> 
> 赞同：1
> 
> 时间：2013-01-01T00:14:54.690
> 
> 标签：facebook, twitter, wordpress

有很多插件可以获取 Twitter / FB 内容并显示它们。但是，我想要原始内容，以便我可以自己设置样式。我不希望它吐出 a`ul`或插件的任何格式，而我只想要原始内容。

有没有插件或快速方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:03:55.633

我刚刚制作了一个快速插件来帮助您入门。

## [https://github.com/fyaconiello/WP_Social_Network_Posts](https://github.com/fyaconiello/WP_Social_Network_Posts)

它能做什么：

1.  创建自定义帖子类型：“社交网络帖子”
2.  有一个设置页面，用于为帐户时间线添加您的 facebook app_id、secret 和 facebook 名称/id
3.  `php PATH_TO_PLUGIN/cron/facebook.php`有一个 cron 文件，它将在运行时将来自 facebook 用户时间线的所有帖子导入/更新到帖子中

我没有使用 wordpress 预定事件，因为共享主机似乎超时了长时间运行的进程。最好使用操作系统的 cron 管理器注册同步命令。也就是说，如果用户想将其添加为计划事件，则同步功能是主插件文件的一部分，并且可以在插件的 epty 激活/停用方法中注册为事件。

去做：

1.  创建字段/设置以存储 Twitter 的 API 信息
2.  创建 twitter 后端/同步过程（在 facebook 之后建模）

## 编辑

可以从管理侧边栏访问社交网络帖子

![在此处输入图像描述](../Images/e22b78670023d3ebfe943031b61ae90d.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T16:45:29.560

对 Instagram 没有任何想法。但是看看这个插件

[http://wordpress.org/extend/plugins/oa-social-login/](http://wordpress.org/extend/plugins/oa-social-login/)

它有很多特点。Twitter、Facebook、Linkdin、OpenID 等

# c++ - Xcode：解析包含

> ID：14106979
> 
> 赞同：0
> 
> 时间：2013-01-01T00:15:09.403
> 
> 标签：c++, xcode

我有一些 C++ 项目，我尝试将项目创建为“外部构建系统”。我通过右键单击项目>“将文件添加到...”将文件添加到项目中。

`#include <boost/filesystem.hpp>`首先，即使我通过 macports 安装并在 HEADER_SEARCH_PATHS （构建设置）中添加路径 /opt/local/include/ ，编译器也找不到 。

其次，Xcode 看不到项目的本地标头：我在源代码树中同时看到“A.cpp”和“Ah”，但是当我 ⌘ + 单击 include like 时，Xcode 说“找不到符号” `#include "A.h"`。

我的项目设置有什么问题？

# git - 如何检查 git 远程存储库

> ID：14106981
> 
> 赞同：4
> 
> 时间：2013-01-01T00:16:05.563
> 
> 标签：git

有没有办法只查看远程 git 存储库上的日志而不克隆它？只查看一个文件怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:23:32.870

首先，

如果托管 repo 的站点有一些 git 可视化层（github 是一个允许您浏览整个 repo 内容的网站），则不是。只需转到项目页面并导航到文件。查看该文件（在 github 上）时，页面右上角有一个历史记录按钮。这将向您显示文件已更改的每个提交。或单击责备按钮，并逐行查看文件并查看其更改。

但如果它只是一个简单的 git repo，那就没有了。您将需要克隆整个事物以通过日志读取历史记录。

但可以克隆一个只有最后一次提交的仓库

`git clone -n git://path/to/the_repo.git --depth 1`

如果您将深度标志的值更改为 2，您将获得两次提交，依此类推。

那么如果你想签出一个文件

`cd repo_name`

`git checkout HEAD some_filename`

# git - 每个 git 存储库的特定 RSA 密钥

> ID：14106982
> 
> 赞同：3
> 
> 时间：2013-01-01T00:16:13.347
> 
> 标签：git, rsa

我想知道是否有可能拥有仅适用于特定存储库的 RSA 密钥。或类似的东西。我的用户需要能够创建一个 git repo 并对其进行读/写，并管理谁可以自己读或写它。我的计划是使用 RSA 密钥（authorized_keys）和一个 git 用户，并将密钥提供给需要连接的组。有没有办法指定 rsa 密钥可以访问哪些文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:19:21.853

是的，它受支持。尝试添加`config`（不带任何扩展名）文件`~./ssh`，内容如下：

```
Host github.com
    HostName github.com
    User madhead
    IdentityFile ~/.ssh/id_rsa_1
Host bitbucket.org
    HostName bitbucket.org
    User madhead_
    IdentityFile ~/.ssh/id_rsa_2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:19:14.840

听起来像是[Gitosis](https://wiki.archlinux.org/index.php/Gitosis)的工作。

Gitosis 允许您让每个用户都使用该`git@server`用户并通过公钥来识别自己。在 gitosis 中，您可以指定用户（及其密钥）、组和存储库。每个用户和组都可以被授予对任何存储库的读取或写入访问权限。

这有效地实现了您的要求：某些密钥可以访问某些存储库；所有用户都通过他们的公钥进行身份验证。

值得注意的是，gitosis 并不是一个新的服务器或守护进程，它只是利用了已经可以访问的 SSH 服务器；所有访问控制都是在用户建立 SSH 连接后完成的。此外，使用此方法无法进行常规 shell 登录。

基本上，Gitosis 和 GitHub 等完全一样。

# php - 如何在 PHP 中计算离散余弦变换（DCT）？

> ID：14106984
> 
> 赞同：4
> 
> 时间：2013-01-01T00:16:31.320
> 
> 标签：php, algorithm, image-processing, dct

我想要的是我当前代码的一个工作的、优化的版本。虽然我的函数确实返回了一个包含实际结果的数组，但我不知道它们是否正确（我不是数学大师，也不知道 Java 代码可以将我的结果与已知实现进行比较）。其次，我希望该功能能够接受自定义表格大小，但我不知道该怎么做。表格大小是否等同于重新采样图像？我是否正确应用了系数？

```
// a lot of processing is required for large images
$image = imagecreatetruecolor(21, 21);
$black = imagecolorallocate($image, 0, 0, 0);
$white = imagecolorallocate($image, 255, 255, 255);
imagefilledellipse($image, 10, 10, 15, 15, $white);

print_r(imgDTC($image));

function imgDTC($img, $tableSize){
    // m1 = Matrix1, an associative array with pixel data from the image
    // m2 = Matrix2, an associative array with DCT Frequencies
    // x1, y1 = coordinates in matrix1
    // x2, y2 = coordinates in matrix2
    $m1 = array();
    $m2 = array();

    // iw = image width
    // ih = image height
    $iw = imagesx($img);
    $ih = imagesy($img);

    // populate matrix1
    for ($x1=0; $x1<$iw; $x1++) {
        for ($y1=0; $y1<$ih; $y1++) {
            $m1[$x1][$y1] = imagecolorat($img, $x1, $y1) & 0xff;
        }
    }

    // populate matrix2
    // for each coordinate in matrix2
    for ($x2=0;$x2<$iw;$x2++) {
        for ($y2=0;$y2<$ih;$y2++) {

        // for each coordinate in matrix1
            $sum = 1;
            for ($x1=0;$x1<$iw;$x1++) {
                for ($y1=0;$y1<$ih;$y1++) {
                    $sum += 
                        cos(((2*$x1+1)/(2*$iw))*$x2*pi()) * 
                        cos(((2*$y1+1)/(2*$ih))*$y2*pi()) * 
                        $m1[$x1][$y1]
                    ;
                }
            }

            // apply coefficients
            $sum *= .25;
            if ($x2 == 0 || $y2 == 0) {
                $sum *= 1/sqrt(2);
            }

            $m2[$x2][$y2] = $sum;
        }
    }
    return $m2;
} 
```

我的 PHP 函数是 Java 中这篇文章的派生词：Java[中 DCT 和 IDCT 算法的问题](https://stackoverflow.com/questions/4240490/problems-with-dct-and-idct-algorithm-in-java)。我已经重写了 php 和可读性的代码。最终，我正在编写一个脚本，使我能够比较图像并找到相似之处。此处概述了该技术：[http](http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html) ://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html 。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:26:20.540

这就是我执行 DCT 的方式，我在这里所做的是在每一行上执行一维 DCT。然后我得到结果，在每一列上执行 DTC，它更快。

```
function dct1D($in) {
    $results = array();
    $N = count($in);
    for ($k = 0; $k < $N; $k++) {
        $sum = 0;
        for ($n = 0; $n < $N; $n++) {
             $sum += $in[$n] * cos($k * pi() * ($n + 0.5) / ($N));
        }
        $sum *= sqrt(2 / $N);
        if ($k == 0) {
            $sum *= 1 / sqrt(2);
        }
        $results[$k] = $sum;
    }
    return $results;
}

function optimizedImgDTC($img) {
    $results = array();

    $N1 = imagesx($img);
    $N2 = imagesy($img);

    $rows = array();
    $row = array();
    for ($j = 0; $j < $N2; $j++) {
        for ($i = 0; $i < $N1; $i++)
            $row[$i] = imagecolorat($img, $i, $j);
        $rows[$j] = dct1D($row);
    }

    for ($i = 0; $i < $N1; $i++) {
        for ($j = 0; $j < $N2; $j++)
            $col[$j] = $rows[$j][$i];
        $results[$i] = dct1D($col);
    }
    return $results;
} 
```

我在互联网上找到的大多数算法都假设输入矩阵是 8x8。这就是为什么你乘以 0.25。一般来说，你应该乘以 sqrt(2 / N) 一个一维矩阵，这里我们是二维的，所以 sqrt(2/N1) * sqrt(2/N2)。如果对 N1 = 8 和 N2 = 8 执行此操作： sqrt(2/8)^2 = 2/8 = 1/4 = 0.25

另一件事是乘以 1/sqrt(2) X0，它是一维矩阵，这里我们是二维的，所以当 k1 = 0 或 k2 = 0 时相乘。当 k1 = 0 和 k2 = 0 时，你必须做两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:20:44.290

首先，您需要测试您的功能，以便找到任何有效的实现。并将您的实施结果与工作实施的结果（使用相同的输入）进行比较。

如果您希望您的代码更快，您可以查看这篇论文[http://infoscience.epfl.ch/record/34246/files/Vetterli85.pdf](http://infoscience.epfl.ch/record/34246/files/Vetterli85.pdf)（前 2 部分）。

在您的情况下，您不能使用自定义表格大小，因为它应该与图像大小匹配（可能是错误的）。

# css - 浮动div时的额外行

> ID：14106989
> 
> 赞同：0
> 
> 时间：2013-01-01T00:17:25.597
> 
> 标签：css, html, grid, css-float, rows

为什么哦为什么我会在我的网格中看到这个额外的行？我正在`float:left`为每个网格容器使用属性和百分比宽度。每个容器的标记都是 WordPress 循环的一部分，因此`clear:both`每 4 个容器插入一个容器并不容易。帮助！

[在此处查看实际问题。](http://luckylab.worksdev.com/shop)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T02:05:58.023

你有一个明确的 div：在第一个和第二个 content4col 之间。

作为旁注，您可以使用 box-sizing:border-box 来包含盒子模型“内部”的填充和边框，而不是使用每四个元素清除一次。

（编辑：不知何故编辑器不工作，所以我不能让我的答案看起来不错。）

# java - 如何更改我的正则表达式以正确匹配浮点文字？

> ID：14106990
> 
> 赞同：0
> 
> 时间：2013-01-01T00:17:46.257
> 
> 标签：java, regex, parsing

我正在尝试为 java 表达式创建解析器，但由于某种原因我无法匹配浮点值。我正在使用`java.util.Matcher`从

```
Matcher token = Pattern.compile(
        "(\\w[\\w\\d]*+)|" + //identifiers as group 1
        "((?:(?>[1-9][0-9]*+\\.?[0-9]*+)|(?>\\.[0-9]++))(?:[Ee][+-]?[0-9]++)?)|" + //literal numbers
        "([^\\w\\d\\s]*+)" //operators as group 3
    ).matcher(); 
```

这旨在匹配标识符、浮点值或运算符（我仍然需要优化匹配的那部分，尽管稍后会优化匹配的那部分）。但是，我对此有疑问

下面是使用该表达式的代码，它旨在获取所有标识符、数字和运算符，在 中注册所有数字`vars`，并将所有标识符、每个数字的对应值和所有运算符`tokens`按相同的顺序放置在原始字符串中。

然而，这样做并没有成功，因为对于像结果列表这样的输入字符串`foo 34.78e5 bar -2.7`，结果列表是 '[34, A, , bar, , -, 2, B, ]' 其中 A=-78000.0 和 B=-0.7。它应该返回 '[foo, A, bar, B]`，其中 A=3478000 和 B=-2.7。我相信它可能只是没有将数字的两个部分都包含在正则表达式的匹配中，但情况可能并非如此。

我尝试从正则表达式中删除原子分组和所有格，但这并没有改变任何东西。

```
LinkedList<String> tokens = new LinkedList<String>();
HashMap<String, Double> vars = new HashMap<String, Double>();
VariableNamer varNamer = new VariableNamer();

for(Matcher token = Pattern.compile(
                        "(\\w[\\w\\d]*+)|" + //variable names as group 1
                        "((?:(?:[1-9][0-9]*+\\.?[0-9]*+)|(?:\\.[0-9]++))(?:[Ee][+-]?[0-9]++)?)|" +
                                             //literal numbers as group 2
                        "([^\\w\\d\\s]*+)"   //operators as group 3
                ).matcher(expression); token.find();){

        if(token.group(2) != null) { //if its a literal number, register it in vars and substitute a string for it
            String name = varNamer.next();

            if (
                    tokens.size()>0 &&
                    tokens.get(tokens.size()-1).matches("[+-]") &&
                    tokens.size()>1?tokens.get(tokens.size()-2).matches("[^\\w\\d\\s]"):true
                    )

                vars.put(name, tokens.pop().equals("+")?Double.parseDouble(token.group()):-Double.parseDouble(token.group()));
            else
                vars.put(name, Double.parseDouble((token.group())));

            tokens.addLast(name);
        } else {
            tokens.addLast(token.group());
        }
    } 
```

这是`VariableNamer`：

```
import java.util.Iterator;

public class VariableNamer implements Iterator<String>{

    StringBuffer next = new StringBuffer("A");

    @Override
    public boolean hasNext() {
        return true;
    }

    @Override
    public String next() {
        try{
            return next.toString();
        }finally{
            next.setCharAt(next.length()-1, (char) (next.charAt(next.length()-1) + 1));

            for(int idx = next.length()-1; next.charAt(idx) + 1 > 'Z' && idx > 0; idx--){
                next.setCharAt(idx, 'A');
                next.setCharAt(idx - 1, (char) (next.charAt(idx - 1) + 1));
            }

            if (next.charAt(0) > 'Z'){
                next.setCharAt(0, 'A');
                next.insert(0, 'A');
            }
        }
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:41:50.100

根据您的表达迷你语言的详细信息，它可能接近使用正则表达式的限制......或超出它。即使您确实成功地“解析”了，您也将面临将“组”子字符串映射为有意义的表达式的问题。

我的建议是采取完全不同的方法。要么查找/使用现有的表达式库，要么使用解析器生成器（如 ANTLR 或 Javacc）实现表达式解析。

# oracle - 带有日期字段的 ODP.Net OracleBulkCopy '不是有效月份'

> ID：14106991
> 
> 赞同：1
> 
> 时间：2013-01-01T00:18:12.083
> 
> 标签：oracle, datetime, copy, odp.net, bulk

首先，重要的是要注意，在 WPF 应用程序中使用 OracleBulkCopy 对象导入一组数据时会发生此错误，其中数据存储在 DataTable 对象中。

在这个表中有一列是“日期”（oracle）类型，对应的类型是日期时间？（可为空）在 WPF 应用程序中。但是，在为 OracleBulkCopy 对象设置 DataTable 时，我将该列的数据类型设置为 DateTime（不可为空），因为在 DataTable 的 DataColumn 对象中不允许为空类型。

发生的事情是，当所有日期值都为空时，数据导入工作正常，但是一旦我尝试使用任何实际日期进行导入，我就会从 Oracle 服务器收到错误“不是有效月份”。通常当发生这种情况时，您可以使用“to_date”来指定应该如何解释日期。

使用 OracleBulkCopy 这是不可能的，也不应该是必要的，因为日期不是字符串，而是实际的 DateTime 对象。

我也尝试过使用数据类型 Oracle.DataAccess.Types.OracleDate 但这有相同的结果。

我无法找到任何解决方案，因此将不胜感激。

# javascript - 无法读取meteor.JS函数中未定义的属性'profile'？

> ID：14106994
> 
> 赞同：5
> 
> 时间：2013-01-01T00:18:45.307
> 
> 标签：javascript, meteor

我有以下代码：

```
Template.analyze.userFullName = function() {
    var u = Meteor.users.findOne({_id: this.userId}, {fields: {name: 1}});
    return u.profile.name;
}; 
```

`Meteor.users.findOne({_id: this.userId}, {fields: {name: 1}})`在控制台中使用时返回以下内容：

```
Object
    _id: "79ef0e67-6611-4747-b669-45cc163cc1d8"
    profile: Object
        name: "My Name" 
```

但是当我在上面的代码中使用它时，我得到了这个：`Uncaught TypeError: Cannot read property 'profile' of undefined`

为什么会这样？我要做的就是在他们的个人资料中检索用户的全名并将其传递给模板部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T00:56:37.693

The Template is being rendered immediately on pageload when the user is not available yet, which is causing an error. Thankfully since you're using the Users collection, which is reactive, you can just have it re-render when it becomes available. You do this by checking first if the object is not null:

```
Template.analyze.userFullName = function() {
    // use Meteor.user() since it's available
    if (Meteor.user())
      return Meteor.user().profile.name;
}; 
```

This way, when the user is null (during load) the Template won't throw an error. Immediately upon the data being available, the reactivity will invoke the template again, and it will render on the screen.

# spring - Spring bean 定义空引用

> ID：14106998
> 
> 赞同：2
> 
> 时间：2013-01-01T00:19:24.453
> 
> 标签：spring

```
public class A{
  private B b;
}

public class B{
} 
```

应用程序上下文.xml

```
<bean id="aBean" class="A">
<property name="b">  ???  </property>
</bean> 
```

使用时如何使用 b = null 创建 A 的实例`context.getBean("aBean")`？

我试过了`<property name="b"><null/></property>`，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T00:22:37.880

实际上，默认情况下它将为空。无需具体配置，即省略`<property>`元素。

而实际上

```
<bean id="aBean" class="A">
  <property name="b"><null /></property>
</bean> 
```

**应该**工作：[http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-null-element](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-null-element)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T13:09:02.800

嗯？只是不要做任何事情。

```
<bean id="aBean" class="A"/> 
```

在 Java[中，对象引用默认为 null](http://www.javapractices.com/topic/TopicAction.do?Id=14)。

# file - Octave 读取文件的每一行到向量

> ID：14106999
> 
> 赞同：0
> 
> 时间：2013-01-01T00:19:30.167
> 
> 标签：file, matrix, octave, delimiter

我有一个文件 data.txt

```
1 22 34 -2
3 34 -3
2
3 43 -3 2 3 
```

我想将此文件作为单独的矩阵加载到 Octave

```
matrix1 = [1; 22; 34 ;-2]
matrix2 = [3; 34 -3]
.
.
. 
```

我该怎么做呢？我试过 fopen 和 fgetl，但似乎每个字符在矩阵中都有自己的位置。我想分隔值，而不是字符（它是空格分隔的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:40:30.203

又快又脏：

```
A = dlmread("file");

matrix = 1; # just for nice varname generation
for i = 1:size(A,1)
    name = genvarname("matrix",who());
    eval([name " = A(i,:);"]);
    eval(["[_,__," name "] = find(" name ");"]);
end

clear _ __ A matrix i 
```

格式需要与您指定的相同。