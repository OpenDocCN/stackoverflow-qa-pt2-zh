# StackOverflow 问答 13447000-13447999

# javascript - Rails 和跨域 Cookie

> ID：13447004
> 
> 赞同：2
> 
> 时间：2012-11-19T02:48:06.193
> 
> 标签：javascript, ruby-on-rails, ruby, cookies

我在使用 ajax 和带有 Rails 的 cookie 时遇到问题。我目前的设置如下：

我在 domainfoo.com 有一个应用程序设置，这是一个 Rails 应用程序，在 domainbar.com 有一个静态网页设置，我想通过 ajax 与 domainfoo.com 通信。

domainfoo.com 应用程序设置如下：

应用程序.rb

```
 before_filter :allow_cross_domain_access
    def allow_cross_domain_access
      response.headers["Access-Control-Allow-Origin"] = "*"
      response.headers["Access-Control-Allow-Methods"] = "*"
    end 
```

和应用程序的主要部分（check_controller.rb）：

```
 class CheckController < ApplicationController
      if cookies[:test]
        puts "cookie value: #{cookies[:test]}"
      else
        cookies[:test] = { :value => '123',
                           :domain => :all,
                           :path => "/check"
                          }
      end
     end 
```

路由[http://examplefoo.com/check](http://examplefoo.com/check)映射到该控制器。在 domainbar.com 的静态页面上，我只有一个简单的 jQuery ajax GET 请求，如下所示：

```
 $(document).ready(function(){
      $.get('http://domainfoo.com/check', function(data) {
        console.log(data);
      });
    }); 
```

当我在 chrome 中查看网络流量时，我可以看到来自服务器的 cookie，它在浏览器中设置，但是当我再次发出 ajax 请求时，cookie 永远不会被发送回服务器。我确定有些东西我忽略了，但我不确定它是什么。

# ruby - 将字符串强制为 Fixnum

> ID：13447006
> 
> 赞同：2
> 
> 时间：2012-11-19T02:48:17.113
> 
> 标签：ruby

我正在查看一些用 Ruby 1.8 编写的用于 RubyQuiz 的代码，当我在 1.9.2 中运行它时会抛出错误。这种方法

```
def encrypt(s)
  return process(s) {|c, key| 64 + mod(c + key - 128)}
end 
```

给我以下错误

```
in `+': String can't be coerced into Fixnum (TypeError) 
```

这是我的代码：

```
def mod(c)
  return c - 26 if c > 26
  return c + 26 if c < 1
  return c
end

def process(s, &combiner)
  s = sanitize(s)
  out = ""
  s.each_byte { |c|
    if c >= 'A'.ord and c <= 'Z'.ord
      key = @keystream.get
      res = combiner.call(c, key[0])
      out << res.chr
    else
      out << c.chr
    end
  }
  return out
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:59:14.720

您不能使用“+”运算符将字符串添加到整数。在 IRB 中，

```
 irb(main):001:0> 1 + '5'
 TypeError: String can't be coerced into Fixnum 
```

或者反过来：

```
irb(main):002:0> '5' + 1
TypeError: can't convert Fixnum into String 
```

您必须首先将字符串转换为 FixNum，即

```
irb(main):003:0> '5'.to_i + 1
=> 6 
```

或者

```
irb(main):004:0> 1 + '5'.to_i
=> 6 
```

"to_i" 将接受字符串第一部分的整数部分并将其转换为 FixNum：

```
irb(main):006:0> 1 + '5five'.to_i
=> 6 
```

但是，当字符串没有数字时，您可能会得到意想不到的结果：

```
irb(main):005:0> 1 + 'five'.to_i
=> 1 
```

在您的情况下，我认为您期望变量为整数，`key`但取而代之的是字符串。你可能想做`key.to_i`. 希望这可以帮助。

# java - 似乎无法让现有的 JPanel 添加更多 JPanel

> ID：13447008
> 
> 赞同：1
> 
> 时间：2012-11-19T02:48:35.007
> 
> 标签：java, swing, jpanel

我试图让我的程序添加更多行内容，最终允许他们输入点值（x 和 y）。但是，当按下添加按钮时，我似乎无法让我的 JPanel 实际添加任何内容。

这是我要添加到整个 JPanel 中的类（JPanel 扩展）：

```
class Coordinates extends JPanel
{
  public String x;
  public String y;
  public int id;

  public Coordinates(int spot)
  {
    super();
    x = "0";
    y = "0";
    id = spot;
    setLayout(null);
    setSize(440,30);
    setLocation(10,5);
    JLabel num = new JLabel("Point #" + (id + 1) + ":");
    num.setLocation(0,0);
    num.setSize(40,20);
    add(num);
  }
} 
```

这是添加按钮的 AbstractAction 扩展，按下时应该添加它：

```
class AddACT extends AbstractAction
{
  public void actionPerformed(ActionEvent e)
  {
    pointList.add(new Point());
    gui.add(new Coordinates(1));
  }
} 
```

而且，如果有人想要大量代码，这里是整个窗口的代码：

```
import java.util.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class PointWindow
{
  private ArrayList<Point> pointList = new ArrayList<Point>();

  public PointWindow()
  {
    initialize();
  }

  public void initialize()
  {
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("Set New Points");
    frame.setContentPane(createGUI());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(440,600);
    frame.setLocationRelativeTo(null);
    frame.setResizable(false);
    frame.setVisible(true);
  }

  public JPanel createGUI()
  {
    final JPanel gui = new JPanel();
    gui.setLayout(null);

    Font boldTitle = new Font("Arial", Font.BOLD, 30);

    class Line extends JPanel
    {
      protected void paintComponent(Graphics g)
      {
        super.paintComponent(g);
        g.drawLine(0,0,430,0);
      }
    }

    class Coordinates extends JPanel
    {
      public String x;
      public String y;
      public int id;

      public Coordinates(int spot)
      {
        super();
        x = "0";
        y = "0";
        id = spot;
        setLayout(null);
        setSize(440,30);
        setLocation(10,5);
        JLabel num = new JLabel("Point #" + (id + 1) + ":");
        num.setLocation(0,0);
        num.setSize(40,20);
        add(num);
      }
    }

    final JButton add = new JButton("Add");
    final JButton remove = new JButton("Remove");
    final JButton makeGraph = new JButton("Generate Graph!");

    final JLabel numPointsL = new JLabel("0");

    class AddACT extends AbstractAction
    {
      public void actionPerformed(ActionEvent e)
      {
        pointList.add(new Point());
        gui.add(new Coordinates(1));
      }
    }

    class RemoveACT extends AbstractAction
    {
      public void actionPerformed(ActionEvent e)
      {

      }
    }

    class MakeGraphACT extends AbstractAction
    {
      public void actionPerformed(ActionEvent e)
      {

      }
    }

    JPanel line1 = new JPanel();
    line1.setLayout(null);
    line1.setLocation(5,5);
    line1.setSize(440,35);
    gui.add(line1);

    JLabel text1 = new JLabel("Point Manager");
    text1.setFont(boldTitle);
    text1.setLocation(0,0);
    text1.setSize(300,35);
    line1.add(text1);

    add.setLocation(220,0);
    add.setSize(100,33);
    add.addActionListener(new AddACT());
    line1.add(add);

    remove.setLocation(330,0);
    remove.setSize(100,33);
    add.addActionListener(new RemoveACT());
    line1.add(remove);

    JPanel line2 = new JPanel();
    line2.setLayout(null);
    line2.setLocation(5,45);
    line2.setSize(440,30);
    gui.add(line2);

    JLabel text2 = new JLabel("Current number of points:");
    text2.setLocation(2,1);
    text2.setSize(165,20);
    line2.add(text2);

    numPointsL.setLocation(172,1);
    numPointsL.setSize(40,20);
    line2.add(numPointsL);

    makeGraph.setLocation(222,0);
    makeGraph.setSize(206,22);
    makeGraph.addActionListener(new MakeGraphACT());
    line2.add(makeGraph);

    Line l1 = new Line();
    l1.setLocation(5,29);
    l1.setSize(420,1);
    line2.add(l1);

    return gui;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:03:00.497

它们是开始添加的，但它是在其他组件之后开始添加的。

而不是使用`setLocation(10,5)`try `setLocation(5, 75)`，它将把它放在行的下面。

另外，在调用`gui.repaint()`后`add`调用以请求重新绘制 ui

更重要的是，使用布局管理器。

# jquery - 复选框、单选和提交元素上显示的文本指针（web-kit）

> ID：13447014
> 
> 赞同：0
> 
> 时间：2012-11-19T02:49:45.007
> 
> 标签：jquery, html, css

我正在一个网站上工作，由于某种原因，当我在基于 web-kit 的浏览器中的表单元素之间进行选项卡时，它会在复选框、单选和提交输入元素的左上角显示文本（I-beam）光标。在 CSS 中将光标设置为指针或默认值无效。

我自定义样式的复选框和单选输入，不透明度 0 位于我的样式元素顶部，但提交按钮并没有什么特别之处（只是通常的 bg 图形样式。

这是其他人以前有过的吗？谁能指出一个可能的原因。

在 chrome 中检查 DOM 将元素显示为使用我定义的光标，但我的眼睛讲述了一个不同的故事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:36:00.910

我最终通过添加**-webkit-user-modify: read-only;来解决它。**输入（提交、复选框和单选）

# c# - 如何在 RowUpdating(...) 中设置字段值等于 null

> ID：13447015
> 
> 赞同：0
> 
> 时间：2012-11-19T02:49:45.283
> 
> 标签：c#, asp.net, gridview, null

这是我的代码：

```
 protected void ConfigurationGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        // row's Update button is clicked, but before the GridView control 
        // updates the row
        DropDownList ddlst = 
           ((DropDownList)ConfigurationGridView.Rows[e.RowIndex].FindControl("SubUnitDropDownList"));

        if (ddlst != null)
        {
            ListItem li = ddlst.SelectedItem;

            if (li != null)
            {
                if (Convert.ToInt32(li.Value) == -1)
                {
                    // next line is where the problem is
                    // null doesn't change the old value
                    // it does nothing, how to I change this value to null??
                    e.NewValues["SubUnitId"] = null;
                }
                else
                {
                    // we set the actual value
                    // this works nicely
                    e.NewValues["SubUnitId"] = li.Value;
                }
            }
        }
    } 
```

基本上，我有一个通过组合框获取其值的字段，组合中的第一个值表示未分配/不适用/未设置的值，或者该记录的空值，当我分配其他值时它可以工作，比如 1 , 2, 或 3，当组合得到 -1 我想清除这个值，即放空值，但上面的行似乎没有做任何事情，我试过`Nullable<int32>, Int32? value = null, Convert.ToInt32(null)`实际上放 0 而不是空。当我尝试 System.DBNull.Value 时，我收到一个错误：“'System.DBNull' 类型的对象无法转换为 'System.Nullable`1[System.Int32]' 类型。”。

我究竟做错了什么？提前感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T02:28:06.820

也许你可以试试这个：

```
e.NewValues["SubUnitId"]=System.DBNull.Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:01:24.713

尝试改变`e.NewValues["SubUnitId"] = null;`

至：

```
Nullable<Int32> notSetvalue = null;
e.NewValues["SubUnitId"] = notSetvalue; 
```

如果我没记错的话，您的字段需要一个可为空的 int32 类型，但您直接传递 DBNull 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:20:12.413

解决方案原来是

```
e.NewValues["SubUnitId"] = ""; 
```

效果很好。

# mysql - MySQL：存储过程插入语句错误

> ID：13447016
> 
> 赞同：1
> 
> 时间：2012-11-19T02:49:56.897
> 
> 标签：mysql, sql, stored-procedures, insert

我创建了一个 MySQL 脚本，该脚本创建了一个存储过程，该脚本在给定存储过程的 IN 参数的情况下将新行插入到表中。但是，当我们尝试运行脚本时，会显示此错误：

> 第 22 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

这基本上是脚本文件中的存储过程：

```
CREATE PROCEDURE 'packagename'.`procedureName`
(IN param1 DATE, 
 IN param2 TIME, 
 IN param3 VARCHAR(45), 
 IN param4 VARCHAR(100))
BEGIN
    INSERT INTO packagename.table (`param1`, `param2`, `param3`, `param4`) 
    VALUES (param1, param2, param3, param4);
END; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:52:05.360

*   改变`DELIMITER`
*   在包名中使用反引号而不是单引号
*   如果您的表的名称在`table`包名中。`table`, 用反引号转义

询问，

```
DELIMITER $$
CREATE PROCEDURE `packagename`.`procedureName`
(
      IN param1 DATE, 
      IN param2 TIME, 
      IN param3 VARCHAR(45), 
      IN param4 VARCHAR(100)
)
BEGIN
     INSERT INTO packagename.`table` (`param1`, `param2`, `param3`, `param4`) 
            VALUES (param1, param2, param3, param4);
END $$
DELIMITER ; 
```

# python - Python：描述符列表

> ID：13447017
> 
> 赞同：6
> 
> 时间：2012-11-19T02:50:12.207
> 
> 标签：python, list, descriptor

我正在尝试使用列表来引用一系列描述符但没有成功。有一个`_b`由外部库 () 定义的对象 () 列表`class A`，我想通过描述符 () 访问这些对象 ( `class Descriptor`)。在下面的示例中，`b`分配了对描述符的引用列表，但是当列表的任何项目被分配一个值时，对描述符的引用被该值覆盖，而不是将该值传递给描述符。即使在阅读了几篇关于描述符的参考资料和文章之后，我显然还是错过了描述符的基本行为。

```
class Descriptor(object):
    def __init__(self, varname):
        self.varname = varname
        pass

    def __get__(self, instance, owner):
        print('get', self.varname)
        #return getattr(getattr(instance, self.varname),"get")()
        return instance.__dict__[self.varname].get()

    def __set__(self, instance, value):
        print('set', self.varname)
        #getattr(getattr(instance, self.varname),"set")(value)
        instance.__dict__[self.varname].set(value)

class A(object):
    def __init__(self, value=None):
        self.value = value
    def get(self):
        return self.value
    def set(self, value):
        self.value = value

class C(object):
    print "root"
    a = Descriptor('_a')
    b = [Descriptor('_b[x]') for x in range(5)]
    def __init__(self, val):
        print "init"
        self._a = A()
        self.a = val
        self._b = [A() for x in range(5)]
        self.b[0] = 1
c = C(3)
d = C(4)

print c._a.get()
print c.a
print d._a.get()
print d.a
print c.b[0] 
```

在我的实际程序中，外部库是一个 gui 库，我想对其进行抽象，以便可以轻松地交换不同的接口。gui 中的几个视图包含与程序中的列表相对应的输入框列（每列最多 40 个）。

此外，这是访问传递给描述符的实例对象的成员函数的首选方法：`getattr`或`__dict__`. `__dict__`看起来更干净，但我不知道使用它是否有任何框架或可用性问题。

对所提出的问题的任何帮助或满足我在程序中的需求的其他方法的建议，我们将不胜感激。谢谢。

根据millimoose 的建议，以下类似列表的课程似乎满足了我的需求。除了在类根中定义描述符而在类中定义“列表描述符”`__init__`以及在初始化时必须将类作为参数提供之外，此方法是否存在任何缺陷？需要添加其他列表功能，需要添加负索引等特殊索引行为。

```
class DescriptorList(object):
    def __init__(self, owner, varname):
        self.owner = owner
        self.varname = varname

    def __getitem__(self, index):
        print('getitem', self.varname, index)
        return getattr(getattr(self.owner, self.varname)[index],"get")()

    def __setitem__(self, index, value):
        print('setitem', self.varname, index)
        getattr(getattr(self.owner, self.varname)[index],"set")(value)

class C(object):
    a = Descriptor('_a')
    def __init__(self, val):
        self._a = A()
        self.a = val
        self._b = [A() for x in range(5)]
        self.b = DescriptorList(self, '_b')
        for i in range(5):
            self.b[i] = i

c = C(3)
print [c.b[i] for i in range(5)] 
```

此外，通过`DescriptorList`在 中实例`C.__init__`化，可以简化代码，以便`DescriptorList`使用对象本身而不是对象的名称。这种方法有什么优点或缺点吗？

```
class DescriptorList(object):
    def __init__(self, var):
        self.var = var

    def __getitem__(self, index):
        print('get', self.var, index)
        return self.var[index].get()

    def __setitem__(self, index, value):
        print('set', self.var, index)
        self.var[index].set(value)

class C(object):
    a = Descriptor('_a')
    def __init__(self, val):
        self._a = A()
        self.a = val
        self._b = [A() for x in range(5)]
        self.b = DescriptorList(self._b)
        for i in range(5):
            self.b[i] = i 
```

为什么`__get__`和的`__set__`处理方式与`__getitem__`和不同`__setitem__`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T17:58:27.243

我需要类似的东西，我想出了以下内容：

```
class Element(object):
  def __get__(self, obj, objtype=None):
    print("Element.__get__(), obj.idx={0}".format(obj.idx))
    return random.randint(1, 10)

  def __set__(self, obj, value):
    print("Element.__set__(), obj.idx={0}, value={1}".format(obj.idx, value))

class Indexable(object):
  # Can also sub-class from list; I needed mine to be fixed length 
  # because I was mapping them to a set of hardware registers.

  element = Element()

  def __init__(self, sz):
    self.sz = sz
    self.idx = 0

  def __getitem__(self, idx):
    self.idx = idx
    return self.element

  def __setitem__(self, idx, value):
    self.idx = idx
    self.element = element

class Owner(object):
  def __init__(self):
    self.seq = Indexable(5) 
```

`Element.__get__`调用 random.randint() 但显然，它是任意的。我需要的是索引，以便 get/set 函数知道要读取/写入哪个寄存器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:12:33.463

根据来自 millimoose 和[另一篇](https://stackoverflow.com/questions/11354171/writing-a-thin-object-proxy-by-implementing-the-get-descriptor)性质相似的帖子的反馈，以下代码似乎可以满足我的需求，尽管它看起来有点杂乱无章。

```
class Descriptor(object):
    def __init__(self, varname, index=None):
        self.varname = varname
        self.index = index

    def __get__(self, instance, owner):
        print('get', self.varname, self.index)
        if self.index is not None:
            return getattr(getattr(instance, self.varname)[self.index],"get")()
        else:
            return getattr(getattr(instance, self.varname),"get")()

    def __set__(self, instance, value):
        print('set', self.varname, self.index)
        if self.index is not None:
            getattr(getattr(instance, self.varname)[self.index],"set")(value)
        else:
            getattr(getattr(instance, self.varname),"set")(value)

class DescriptorList(list):
    def __init__(self, initlist, instance):
        self.instance = instance
        super(DescriptorList,self).__init__(initlist)

    def __getitem__(self, index):
        print('getitem', self.instance, index)
        return super(DescriptorList,self).__getitem__(index).__get__(self.instance, self.instance.__class__)

    def __setitem__(self, index, value):
        print('setitem', self.instance, index, value)
        super(DescriptorList,self).__getitem__(index).__set__(self.instance, value)

class A(object):
    def __init__(self, value=None):
        self.value = value
    def get(self):
        return self.value
    def set(self, value):
        self.value = value

class C(object):
    a = Descriptor('_a')
    b = [Descriptor('_b', x) for x in range(5)]

    def __init__(self, val):
        self._a = A()
        self.a = val
        self._b = [A() for x in range(5)]
        self.b = DescriptorList(self.__class__.b, self)
        for i in range(5):
            self.b[i] = i*val

c = C(3)
d = C(4)
print c.a
print d.a
print [c.b[i] for i in range(5)]
print [d.b[i] for i in range(5)] 
```

对此解决方案的限制或错误或建议的改进的任何评论表示赞赏。

# search - 将数据表中的信息放入gridview

> ID：13447019
> 
> 赞同：1
> 
> 时间：2012-11-19T02:50:41.650
> 
> 标签：search, gridview, datatable

我正在编写一个简单的搜索算法来显示包含在文本框中键入的值的结果。

我正在尝试将数据表中的信息放入 gridview 的 boundfield 元素中。我必须显示搜索结果的代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SimpleSearch.ascx.cs"Inherits="SimpleSearch" %>

 <asp:TextBox ID="SimpleSearchBox" runat="server" />
        <asp:Button ID="submitSearch" runat="server" Text="Search" 
        onClick="SimpSearch" />

            <asp:Gridview ID="results" runat="server" Visible="false" >

            <Columns>
            <asp:BoundField  DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField  DataField="Description" HeaderText="Description" SortExpression="Description" />
            <asp:BoundField  DataField="Path" headerText="Path" SortExpression="Path" />

            </Columns>

        </asp:Gridview>
        <label ID="errMsg" runat="server" /> 
```

但我认为真正的麻烦来自我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.OleDb;    
using System.Web.Configuration;
using System.Data.Common;
using System.Data;

public partial class SimpleSearch : System.Web.UI.UserControl
{
protected void Page_Load(object sender, EventArgs e)
{
}

protected void SimpSearch(object sender, EventArgs e)
{
    // retrieve the connection string from our config file
    string connString =
    WebConfigurationManager.ConnectionStrings["GeoNames"].ConnectionString;
    // retrieve the provider name from config file
    string providerName =
    WebConfigurationManager.ConnectionStrings["GeoNames"].ProviderName;
    // get the factory based on the provider name
    DbProviderFactory factory = DbProviderFactories.GetFactory(providerName);
    // create the connection
    DbConnection conn = factory.CreateConnection();
    conn.ConnectionString = connString;
    //get text from search box
    string query = SimpleSearchBox.Text;
    try
    {
        // define the SQL command1
        string sql = "SELECT Title, td.ImageID, ti.ImageID, Description FROM TravelImageDetails as td, TravelImage as ti";
        sql += " WHERE td.ImageID = ti.ImageID AND td.Title LIKE '%@query%' OR td.Description LIKE'%@query%' ";
        // create a command
        DbCommand cmd = factory.CreateCommand();
        cmd.CommandText = sql;
        cmd.Connection = conn;
        // create the data adapter
        DbDataAdapter adapter = factory.CreateDataAdapter();
        adapter.SelectCommand = cmd;
        // fill a data table from the adapter
        DataTable dt = new DataTable();
        adapter.Fill(dt);
        results.DataSource = dt;
        results.DataBind();
        results.Visible = true;
    }

    catch (Exception ex)
    {
        errMsg.InnerText = "<h2>An Error Occurred</h2>";
        errMsg.InnerText += ex.Message;
    }

    finally
    {
        conn.Close();
    }
}
} 
```

单击搜索按钮显示没有数据，我想知道为什么它不会做任何事情。任何输入都会有所帮助，我的 c# 技能非常有限

# checkbox - 单击表格视图中的复选框时PYQT4重复输出

> ID：13447023
> 
> 赞同：1
> 
> 时间：2012-11-19T02:51:48.067
> 
> 标签：checkbox, pyqt4, tableview

我正在构建这个应用程序，它默认到一个特定的位置，它将查看该文件夹中的所有文件夹以及这些文件夹中的文件数。尽管您没有配置文件，但它应该只打开您的 C 或主目录。这个想法是我会在那些我想要与之交互的文件的文件夹中打勾。我基本上在*handleFolderChecked*中有一个打印语句，让我知道我选择了正确的项目，并且它有效。

当我打开*文件*时出现问题- >从菜单栏*打开*然后点击弹出窗口上的*选择文件夹*按钮，无论是否选择，我最终都会在我的表格视图中显示一个新的显示，但是，如果我单击任何项​​目中的复选标记，打印语句将出现我打开“*选择文件夹*”窗口的项目数，这不是我想要的。

还有一些令人烦恼的事情，当我在“*选择文件夹*”窗口中点击取消时，程序将转储到主目录，有人知道我如何让它留在它所在的目录中吗？

```
from PyQt4 import QtCore, QtGui
from os import getcwd

from sys import platform
from sys import argv
from lxml import etree as ET

class Anaylzer(QtGui.QMainWindow):
    try:
        tree = ET.parse(''.join([getcwd(),'/config.xml']))
        if 'win' in platform:
            save_path = tree.find('SAVE').find('win').text
        if 'linux' in platform:
            save_path = tree.find('SAVE').find('linux').text
        del tree
    except IOError:
        if 'win' in platform:
            save_path = "C:/"
        if 'linux' in platform:
            save_path = "/home"        

    def __init__(self, parent=None):
        super(Anaylzer, self).__init__(parent)

        self.setWindowTitle("Anaylzer")
        self.resize(700,300)
        self.statusBar()

        self.pushWidgets()

        self.displayTableItems()

    '''Create objects'''
    def createFilesTable(self):        
        self.filesTable = QtGui.QTableWidget(0, 2)
        self.filesTable.setSelectionBehavior(QtGui.QAbstractItemView.SelectRows)
        self.filesTable.setHorizontalHeaderLabels(("Folder", "Files"))
        self.filesTable.horizontalHeader().setResizeMode(0, QtGui.QHeaderView.Stretch)
        self.filesTable.verticalHeader().hide()
        self.filesTable.setShowGrid(False)
    def createButton(self, text, member):
        button = QtGui.QPushButton(text)
        button.clicked.connect(member)
        return button

    '''Actions'''    
    def open(self):        
        directory = QtGui.QFileDialog.getExistingDirectory(self, "Select Folder",
                Anaylzer.save_path)
        Anaylzer.save_path = ''.join([str(directory),"\\"]) 
        self.displayTableItems()

    def displayTableItems(self):
        from os import listdir     
        self.filesTable.setRowCount(0)
        folders = listdir(Anaylzer.save_path)
        if folders:
            for fl in folders:
                folder_name_item = QtGui.QTableWidgetItem(fl)
                folder_name_item.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
                folder_name_item.setCheckState(QtCore.Qt.Unchecked)
                try:
                    folder_files_names = listdir(''.join([Anaylzer.save_path,fl]))
                    folder_files_count = QtGui.QTableWidgetItem(str(len(folder_files_names)))
                    folder_files_count.setFlags(QtCore.Qt.ItemIsEnabled)
                    folder_files_count.setTextAlignment(QtCore.Qt.AlignCenter)

                    row = self.filesTable.rowCount()
                    self.filesTable.insertRow(row)
                    self.filesTable.setItem(row, 0, folder_name_item)
                    self.filesTable.setItem(row, 1, folder_files_count)
                except WindowsError: pass
            self.filesTable.itemClicked.connect(self.handleFolderChecked)

    def handleFolderChecked(self, folder_name_item):
        if folder_name_item.checkState() == QtCore.Qt.Checked:
            print '{s} Checked'.format(s="".join([Anaylzer.save_path,str(folder_name_item.text())]))

    def createActions(self):
        self.openAct = QtGui.QAction("&Open...", self, shortcut=QtGui.QKeySequence.Open,
                statusTip="Open folder", triggered=self.open)
        self.exitAct = QtGui.QAction("E&xit", self, shortcut="Ctrl+Q",
                statusTip="Exit the application", triggered=self.close)

    def createMenus(self):
        self.fileMenu = self.menuBar().addMenu("&File")
        self.fileMenu.addAction(self.openAct)
        self.fileMenu.addAction(self.exitAct)

    '''Push widgets'''
    def pushWidgets(self):
        '''create'''
        self.createActions()
        self.createMenus()
        self.createFilesTable()
        '''put on window'''
        widget = QtGui.QWidget()
        self.setCentralWidget(widget)
        vbox = QtGui.QVBoxLayout()
        vbox.addStretch(1)
        vbox.addWidget(self.filesTable)
        widget.setLayout(vbox)

if __name__ == '__main__':
    app = QtGui.QApplication(argv)
    window = Anaylzer()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:10:28.307

好的，我想通了，显然负责调整*QtGui.QTableWidgetItem*的方法中也不能有 * *.connect*行，只需将*self.filesTable.itemClicked.connect(self.handleFolderChecked)*移出*def displayTableItems(self)*和将它放入一个只会被调用一次的方法中，但是在表构建之后，比如在*def createFilesTable(self)*的末尾或在该方法之外的任何地方，但在该方法之后，并且在程序只能运行的区域中它一次，然后它可以在没有上述错误的情况下工作。我将发布最终代码，以便任何人都可以看到简单的行移动如何解决我的问题。

```
from PyQt4 import QtCore, QtGui
from os import getcwd
from sys import platform
from sys import argv
from lxml import etree as ET

class Anaylzer(QtGui.QMainWindow):
    try:
        tree = ET.parse(''.join([getcwd(),'/config.xml']))
        if 'win' in platform:
            save_path = tree.find('SAVE').find('win').text
        if 'linux' in platform:
            save_path = tree.find('SAVE').find('linux').text
        del tree
    except IOError:
        if 'win' in platform:
            save_path = "C:/"
        if 'linux' in platform:
            save_path = "/home"        

    def __init__(self, parent=None):
        super(Anaylzer, self).__init__(parent)

        self.setWindowTitle("Anaylzer")
        self.resize(700,300)
        self.statusBar()

        self.pushWidgets()

        self.displayTableItems()

    '''Create objects'''
    def createFilesTable(self):        
        self.filesTable = QtGui.QTableWidget(0, 2)
        self.filesTable.setSelectionBehavior(QtGui.QAbstractItemView.SelectRows)
        self.filesTable.setHorizontalHeaderLabels(("Folder", "Files"))
        self.filesTable.horizontalHeader().setResizeMode(0, QtGui.QHeaderView.Stretch)
        self.filesTable.verticalHeader().hide()
        self.filesTable.setShowGrid(False)
        self.filesTable.itemClicked.connect(self.handleFolderChecked)
    def createButton(self, text, member):
        button = QtGui.QPushButton(text)
        button.clicked.connect(member)
        return button

    '''Actions'''    
    def open(self):        
        directory = QtGui.QFileDialog.getExistingDirectory(self, "Select Folder",
                Anaylzer.save_path)
        Anaylzer.save_path = ''.join([str(directory),"\\"])
        self.displayTableItems()

    def displayTableItems(self):
        from os import listdir     
        self.filesTable.setRowCount(0)
        folders = listdir(Anaylzer.save_path)
        if folders:
            for fl in folders:
                folder_name_item = QtGui.QTableWidgetItem(fl)
                folder_name_item.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
                folder_name_item.setCheckState(QtCore.Qt.Unchecked)
                try:
                    folder_files_names = listdir(''.join([Anaylzer.save_path,fl]))
                    folder_files_count = QtGui.QTableWidgetItem(str(len(folder_files_names)))
                    folder_files_count.setFlags(QtCore.Qt.ItemIsEnabled)
                    folder_files_count.setTextAlignment(QtCore.Qt.AlignCenter)

                    row = self.filesTable.rowCount()
                    self.filesTable.insertRow(row)
                    self.filesTable.setItem(row, 0, folder_name_item)
                    self.filesTable.setItem(row, 1, folder_files_count)
                except WindowsError: pass
            #self.filesTable.itemClicked.connect(self.handleFolderChecked)

    def handleFolderChecked(self, folder_name_item):
        if folder_name_item.checkState() == QtCore.Qt.Checked:
            print '{s} Checked'.format(s="".join([Anaylzer.save_path,str(folder_name_item.text())]))

    def createActions(self):
        self.openAct = QtGui.QAction("&Open...", self, shortcut=QtGui.QKeySequence.Open,
                statusTip="Open folder", triggered=self.open)
        self.exitAct = QtGui.QAction("E&xit", self, shortcut="Ctrl+Q",
                statusTip="Exit the application", triggered=self.close) 
    def createMenus(self):
        self.fileMenu = self.menuBar().addMenu("&File")
        self.fileMenu.addAction(self.openAct)
        self.fileMenu.addAction(self.exitAct)

    '''Push widgets'''
    def pushWidgets(self):
        '''create'''
        self.createActions()    
        self.createMenus()         
        self.createFilesTable()
        '''put on window'''
        widget = QtGui.QWidget()
        self.setCentralWidget(widget)
        vbox = QtGui.QVBoxLayout()
        vbox.addStretch(1)
        vbox.addWidget(self.filesTable)
        widget.setLayout(vbox)

if __name__ == '__main__':
    app = QtGui.QApplication(argv)
    window = Anaylzer()
    window.show()
    app.exec_() 
```

我仍然不知道为什么 *QtGui.QFileDialog.getExistingDirectory(self, "Select Folder", Anaylzer.save_path)* 中的取消按钮将我转储到根目录，哦，好吧。

# php - 快速而肮脏的 preg_replace / 正则表达式 (PHP)

> ID：13447025
> 
> 赞同：1
> 
> 时间：2012-11-19T02:51:56.140
> 
> 标签：php, regex, preg-replace

我最近将我的基于 php 的论坛转移到了另一个版本，其中一个 bbcode 需要稍微改变......所以希望有一些正则表达式帮助来替换现有的 bbcode。

我对正则表达式很不满意，想知道是否有人可以帮我想出 preg_replace 的正则表达式，我可以用它来替换 bbcode。

基本上我需要在现有的显示名称周围加上引号。

从`[quote=Display Name]`到`[quote="Display Name"]`

先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:58:22.930

以下似乎可以完成您的要求：

```
echo preg_replace('/\[quote=(.*?)\]/', '[quote="$1"]', $code); 
```

演示：[sandbox.onlinephpfunctions.com](http://sandbox.onlinephpfunctions.com/code/e07bfd6b87a8d66df524bb0da965268340ab9014)

# php - 我的 foreach 语句在 switch 语句中不起作用

> ID：13447026
> 
> 赞同：0
> 
> 时间：2012-11-19T02:52:05.167
> 
> 标签：php, function, foreach, switch-statement

这个函数让我困惑了一段时间，我只是无法让 foreach 语句工作，这两种情况都有效，因为它会显示单词`Today`，`Yesterday`但`year`, `month`, and`day`不会出现。

```
function time_decider($timestamp){

$date = date('m/d/Y', $timestamp);
$dif_date = date('m/d/Y',time() - (24 * 60 * 60));

$a = array( 12 * 30 * 24 * 60 * 60  =>  'year',
                30 * 24 * 60 * 60       =>  'month',
                24 * 60 * 60            =>  'day',
                );

switch ($date) {
    case date('m/d/Y'):
        return "Today";
        break;
    case $dif_date:
        return "Yesterday";
        break;
    default:

        foreach ($a as $secs => $str) {
            $d = $etime / $secs;
            if ($d >= 1) {
                $r = round($d);
                return $r . ' ' . $str . ($r > 1 ? 's ago' : '');
                break;
            }
        }
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:58:57.760

在现在的函数`$d`中将始终为零，因为`$etime`未定义

# python - 径向基函数库

> ID：13447028
> 
> 赞同：1
> 
> 时间：2012-11-19T02:52:12.567
> 
> 标签：python, matlab, machine-learning, octave

我正在寻找一个能够使用径向基函数网络进行分类的机器学习库（用于家庭作业）。优先使用 Python，但也可以接受 Matlab/Octave。

我查看了 PyML、PyBrain、scikit-learn 和 mlpy，但在其中都找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:19:00.430

[这是Radial Basis Function Network](http://www.mathworks.com/matlabcentral/fileexchange/22173-radial-basis-function-network)的 matlab FEX 选项，以及[Mark Orr 的旧代码](http://www.anc.ed.ac.uk/rbf/)。

# tfs - TFS 使用服务器的主机名而不是域名

> ID：13447030
> 
> 赞同：0
> 
> 时间：2012-11-19T02:52:24.453
> 
> 标签：tfs, tfsbuild

我已经在具有构建控制器的远程 Windows 2008 R2 服务器 (www.mydomain.com) 上安装了 TFS 2012。我在本地机器上创建了一个构建代理，但我的构建只是在队列中停留了很长时间，然后才放弃错误。消息显示 Exception Message: TF30063: You are not authorized to access [http://mydomain.com:8080/tfs/defaultcollection](http://mydomain.com:8080/tfs/defaultcollection)。在 Visual Studio 中，它将我的构建器控制器命名为“myhost - Controller”，其中 myhost 是提供给 Windows 2008 R2 服务器的主机名。主机名仅在内部用于命名机器。

编辑：我没有使用活动目录，只是普通的本地用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:10:43.290

我有同样的设置，我使用的“解决方法”是向您的工作机器添加一个主机记录，该记录与它正在寻找的名称与您的 IP 地址或实际主机名相匹配。它一直运行良好。

编辑主机记录快速谷歌（http://www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/）

并输入 [预期主机名] [实际 IP 或主机名]

然后它将适当地解决

# python - 运行引导程序时出现“LookupError：未知编码：ascii”

> ID：13447032
> 
> 赞同：4
> 
> 时间：2012-11-19T02:52:37.430
> 
> 标签：python, macos, encoding, buildout

我正在使用 zc.buildout，当我尝试运行引导程序（第一次在新计算机上）时，我收到以下错误：

```
>> python2.7 bootstrap.py

Traceback (most recent call last):
  File "bootstrap.py", line 158, in <module>
    import pkg_resources
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/../../Extras/lib/python/pkg_resources.py", line 698, in <module>
    class Environment(object):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/../../Extras/lib/python/pkg_resources.py", line 701, in Environment
    def __init__(self, search_path=None, platform=get_supported_platform(), python=PY_MAJOR):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/../../Extras/lib/python/pkg_resources.py", line 99, in get_supported_platform
    plat = 'macosx-%s-%s' % ('.'.join(_macosx_vers()[:2]), m.group(3))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/../../Extras/lib/python/pkg_resources.py", line 209, in _macosx_vers
    _cache.append(mac_ver()[0].split('.'))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py", line 803, in mac_ver
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py", line 780, in _mac_ver_xml
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py", line 78, in readPlist
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py", line 406, in parse
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py", line 418, in handleEndElement
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py", line 452, in end_key
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py", line 436, in getData
LookupError: unknown encoding: ascii 
```

有没有人见过这个或知道如何解决它？它似乎与获取我的操作系统的当前版本有关。我的操作系统是 Mac 10.8.2。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:05:04.247

正如 Vitaly 回答的那样，问题确实是原始 .py 文件丢失了`/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/`（干净安装中只有 .pyc 文件）。具体来说，这些文件必须存在才能使 bootstrap.py 成功：

```
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/__init__.py
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py 
```

您可以从 virtualenv 或其他计算机复​​制它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:07:58.490

安装 Xcode 命令行工具为我解决了这个问题，尽管我无法解释原因。你可以从 Xcode 安装这些

```
Preferences -> Downloads 
```

或从[Apple Developers 下载页面](https://developer.apple.com/downloads/index.action)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:00:34.053

检查是否`/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7`包含未编译的模块 (*.py)。默认情况下它们是缺失的，这就是问题所在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T13:23:48.363

这似乎是 Mountain Lion 唯一的问题，并且只有在您的 python 是全新安装的情况下（或者报告似乎表明）。

解决方法是使用`-S`开关运行 python：

```
python2.7 -S bootstrap.py 
```

或者创建一个 virtualenv，然后`bootstrap.py`使用 virtualenv python 运行脚本。

# cordova - 使用 Java 本机文件构建 Phonegap

> ID：13447036
> 
> 赞同：2
> 
> 时间：2012-11-19T02:53:20.450
> 
> 标签：cordova, paypal, phonegap-plugins

我是 PhoneGap 和移动 Paypal 的新手。我在我的 PhoneGap 应用程序中尝试了[https://github.com/azicchetti/MECLPayPalPlugin](https://github.com/azicchetti/MECLPayPalPlugin)插件，并且在模拟器上运行良好。

现在我想发送到 PhoneGap Build 以在真实手机中进行测试。但是根据 Phonegap Build doc，如果我们上传像 .java 这样的原生文件，我们的应用程序很可能无法编译。那么，当我需要发布我的应用程序时，如何在此插件中将 Paypal 服务器更改为 live 和应用程序 ID？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:58:43.813

Phonegap build 只允许 html5、css 文件。正如您提到的，不支持 .java 文件。因此，如果您想构建您的 android 应用程序，您需要在 eclipse 中构建它，然后它也会使用 paypal 插件打包您的 html 代码。

[从这里](http://phonegap.com/download)下载 phonegap 库

随附的是示例项目，它也可以指导您了解 android 的结构和休息，您可以[在此处查找文档](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

在 plugins.xml 文件中定义插件，如下面的示例所示。

```
 <config-file target="res/xml/config.xml" parent="/cordova/plugins">
            <plugin name="ChildBrowser"
                value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
        </config-file>

        <source-file src="src/android/ChildBrowser.java"
                target-dir="src/com/phonegap/plugins/childBrowser" /> 
```

这是我的 plugins.xml 文件之一，供您参考。

```
<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
xmlns:android="http://schemas.android.com/apk/res/android"
id="com.phonegap.plugins.childbrowser"
version="3.0.4">

<name>Child Browser</name>

<asset src="www/childbrowser.js" target="childbrowser.js" />
<asset src="www/childbrowser" target="childbrowser" />

<!-- android -->
<platform name="android">
    <config-file target="AndroidManifest.xml" parent="/manifest/application">
        <activity android:name="com.phonegap.plugins.childBrowser.ChildBrowser"
                  android:label="@string/app_name">
            <intent-filter>
            </intent-filter>
        </activity>
    </config-file>

    <!-- Cordova 1.5 - 1.9 -->
    <config-file target="res/xml/plugins.xml" parent="/plugins">
        <plugin name="ChildBrowser"
            value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
    </config-file>

    <!-- Cordova 2.0.0 -->
    <config-file target="res/xml/config.xml" parent="/cordova/plugins">
        <plugin name="ChildBrowser"
            value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
    </config-file>

    <source-file src="src/android/ChildBrowser.java"
            target-dir="src/com/phonegap/plugins/childBrowser" />
</platform>
<!-- ios -->
<platform name="ios">
    <plugins-plist key="ChildBrowser"
                string="ChildBrowserCommand" />

    <resource-file src="ChildBrowser.bundle" />
    <resource-file src="ChildBrowserViewController.xib" />

    <header-file src="ChildBrowserCommand.h" />
    <header-file src="ChildBrowserViewController.h" />

    <source-file src="ChildBrowserCommand.m" />
    <source-file src="ChildBrowserViewController.m" />
</platform> 
```

**要添加的另一件事** 包括在 config.xml 文件中的插件

```
<plugin name="MECLPayPalPlugin" value="com.phonegap.plugins.paypal.MECLPayPalPlugin"/> 
```

**如果您的项目中当前没有 plugins.xml 文件，请在 res/xml/plugins.xml 下创建它**

# c++ - 高级 I/O 文件操作，带函数

> ID：13447038
> 
> 赞同：0
> 
> 时间：2012-11-19T02:54:09.033
> 
> 标签：c++

请原谅我的新手格式。我正在尝试通过 ref 函数从现有文件中从第一个位置读取到最后一个位置。我试图让它读取并显示文件内容，首先使用 seekg 读取文件中有多少字符或字节。我一直在使用我教授的例子和教科书中的点点滴滴。我有一种感觉，比起组织，我的职能更多的是问题。它编译并且它似乎计数正确但不显示arrays.txt文件的内容。任何帮助将一如既往地受到赞赏。

```
//  Using Bloodshed...

#include <iostream.h>
#include <fstream.h>
#include <stdlib.h>
#include <string.h>
#include <iomanip>

using namespace std;

char x;
void calcFunc(fstream&, char&, long&, long&);
int main()
{

    fstream file;
    char ch, choice;
    long offset, last, first;

    file.open("arrays.txt");
    if (file.fail())
    {
        cout << " file name cannot be found \n";
        system("pause");
        exit(1);
    }

    cout << "Hello You!  Please choose Option A,B,C, or D:   " << endl << endl;;

    cout << "A.  READ THE FILE FROM FIRST POSITION TO LAST. " << endl;
    cout << "B.  READ THE FILE FROM THE LAST TO THE FIRST IN REVERSE." << endl;
    cout << "C.  READ THE FILE FROM FIRST POSITION TO  ANY PLACE." << endl;
    cout << "D.  READ FILE FROM ANY PLACE TO ANY PLACE. " << endl << endl;
    cout << "A, B, C, OR D,: ";
    cin >> choice;

    cout << endl << endl;

    switch (choice)
    {

    case 'A':
        file.seekg(0L, ios::end);
        last = file.tellg();
        cout << last;
        system("pause");
        calcFunc(file, ch, offset, last);
        cout << offset << "  " << last << "  " << x << "  " << ch;
        system("pause");

        break;

    default:
        cout << "please enter appropriate value";
    }

    return (0);
}

void calcFunc(fstream& file, char& x, long& offset, long& last)
{
    for (offset = last; offset > 0; offset--)
    {
        x = file.get();
        cout << x;
        return x;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T18:54:04.403

我看到的唯一问题（到目前为止）是使用`return x`. 除非`calcFunc`返回`char`并`x`满足某些条件并且您想要停止循环并因此返回，否则不需要它。我会简单地把它拿出来。

# android - Android LogCat sqlite 语法错误含义

> ID：13447039
> 
> 赞同：1
> 
> 时间：2012-11-19T02:54:33.310
> 
> 标签：android, database, sqlite, logcat, android-sqlite

我得到下面的日志猫错误：

```
 11-18 21:37:49.700: E/AndroidRuntime(19122): Caused by: android.database.sqlite.SQLiteException: no such column: Home1: , while compiling: SELECT _id FROM projects WHERE _name like Home1
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1697)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1582)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1538)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1618)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at com.example.home_painter.DatabaseHandler.checkName(DatabaseHandler.java:334)
11-18 21:37:49.700: E/AndroidRuntime(19122):    at com.example.home_painter.MainActivity.addProject(MainActivity.java:37)
11-18 21:37:49.700: E/AndroidRuntime(19122):    ... 14 more 
```

这是因为“SELECT _id FROM projects WHERE _name like Home1”的语法不正确吗？我似乎无法弄清楚这个错误的原因。

这是我的 sqldatabaseHelper 文件中的一些代码：变量：

```
 // table name
private static final String TABLE_PROJECTS = "projects";
private static final String TABLE_IMAGES = "images";
private static final String TABLE_COLOR_MAP = "colorMap";
private static final String TABLE_COLORS_COLLECTION = "collection";

// Project Table columns names
private static final String KEY_ID = "_id"; // Primary, integer
private static final String KEY_NAME = "_name"; // Unique, text 
```

OnCreate 方法：

```
 public void onCreate(SQLiteDatabase db) {

    // FOREIGN KEYS
    String FOREIGN_KEYS = "PRAGMA foreign_keys = ON;";

    // PROJECTS TABLE
    String CREATE_PROJECTS_TABLE = "CREATE TABLE " + TABLE_PROJECTS 
            + "(" + KEY_ID + " INTEGER NOT NULL, " + KEY_NAME + " TEXT NOT NULL, " +" PRIMARY KEY("
            + KEY_ID + "), UNIQUE( "+ KEY_NAME + "))";

    // IMAGES TABLE
    String CREATE_IMAGES_TABLE = "CREATE TABLE " + TABLE_IMAGES + "(" + KEY_IM_ID + " INTEGER NOT NULL, "
            + IM_URI + " TEXT, PRIMARY KEY(" + KEY_IM_ID+ "))";

    // COLOR MAP TABLE
    String CREATE_COLOR_MAP_TABLE = "CREATE TABLE " + TABLE_COLOR_MAP + "(" + PROJ_COLOR_ID + " INTEGER NOT NULL, "
            + COLLECTION_COLOR_ID + " INTEGER NOT NULL, FOREIGN KEY(" + PROJ_COLOR_ID + ") REFERENCES " 
            + TABLE_PROJECTS + "(" + KEY_ID + "), FOREIGN KEY(" + COLLECTION_COLOR_ID + ") REFERENCES " + TABLE_COLORS_COLLECTION
            + "(" + KEY_ID_COLLECT + "))";

    // COLLECTION COLOR TABLE
    String CREATE_COLORS_COLLECTION = "CREATE TABLE " + TABLE_COLORS_COLLECTION + "("
            + KEY_ID_COLLECT + " INTEGER NOT NULL, " + COLLECTION_HEX + " TEXT NOT NULL, "
            + COLLECTION_NAME + " TEXT NOT NULL, PRIMARY KEY(" + KEY_ID_COLLECT + "), UNIQUE("
            + COLLECTION_NAME + "))";
    /*System.out.println(CREATE_PROJECTS_TABLE);
    System.out.println(CREATE_IMAGES_TABLE);
    System.out.println(CREATE_COLORS_TABLE);*/

    db.execSQL(FOREIGN_KEYS);
    db.execSQL(CREATE_PROJECTS_TABLE);
    db.execSQL(CREATE_IMAGES_TABLE);
    db.execSQL(CREATE_COLORS_COLLECTION);
    db.execSQL(CREATE_COLOR_MAP_TABLE);

} 
```

onUpgrade 方法：

```
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    //Drop older tables if existing
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_PROJECTS);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_IMAGES);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COLORS_COLLECTION);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COLOR_MAP);
    // Create tables again
    onCreate(db);
} 
```

我认为的代码与我从 project.java 获取信息以放入数据库的方法相关：

```
values_PT.put(KEY_NAME, project.getName()); // project name
long project_id = db.insert(TABLE_PROJECTS, null, values_PT); // insert into database and save id for use 
```

checkName 方法的代码：

```
 public boolean checkName(String name) {

    boolean resultName = false;
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor c = db.query(TABLE_PROJECTS, new String[]{KEY_ID}, KEY_NAME + " like " + name, null, null, null, null);

    if (c != null) {

        resultName = true;
    }

    return resultName;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T05:58:50.813

您发送到 SQLite 的 SQL 如下所示：

```
SELECT _id FROM projects WHERE _name like Home1 
```

SQLite 将您解释`Home1`为列名，因为，一个不带引号的字符串值是 SQL 中的标识符。这就是您的“未知列”错误的来源。你想要这样的东西进入 SQLite：

```
SELECT _id FROM projects WHERE _name like 'Home1' 
```

或（可能）更好：

```
SELECT _id FROM projects WHERE _name = 'Home1' 
```

如果您不使用通配符`_`或`%`通配符，那么 LIKE 通常只是一个过于复杂且昂贵的`=`.

我们如何解决这个问题？您可以尝试手动引用`name`，但这在 2012 年很愚蠢，我们有占位符将引用和转义问题推送到它们所属的数据库中。我想你想使用这样的[`db.query`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)调用：

```
db.query(TABLE_PROJECTS, new String[]{KEY_ID}, KEY_NAME + "=?", new String[] {name}, null, null, null); 
```

占位符将`?`替换为`name`（正确引用和转义）的值。使用占位符还有助于保护您免受 SQL 注入问题的影响，因此这是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:02:50.120

您使用查询：

```
"SELECT _id FROM projects WHERE _name like Home1" 
```

但是，在您的表 PROJECTS 中没有 _id 和 _name 列。你有 key_id 和 key_name。因此将查询更改为：

```
"SELECT key_id FROM projects WHERE key_name like Home1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:31:02.923

您的查询必须是：

```
Cursor c = db.query(TABLE_PROJECTS, new String[]{KEY_ID}, KEY_NAME + " like ?",new String[]{"'"+name+"%'"}, null, null, null); 
```

# c# - WPF - 如何保护字符串

> ID：13447040
> 
> 赞同：1
> 
> 时间：2012-11-19T02:54:58.807
> 
> 标签：c#, .net, wpf, decompiling

我目前正在开发一个WPF项目，项目分为几层。其中一个层（类库）称为安全性，其中包含定义的常量，我将其用作一些使用的密钥加密。

我的问题是，我怎样才能保护这些字符串对任何开发人员进行逆向工程师？

有安全的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:26:19.300

您可以在 .NET 中开发安全应用程序 :) 混淆不应与安全性相混淆 - 它是迄今为止最基本的形式，但不是唯一形式。例如，您可以编写安全库，使其由存储在属于用户的[独立存储中的加密密钥字符串进行初始化，并在您的应用程序首次运行时在那里创建。](http://msdn.microsoft.com/en-us/library/3ak841sy%28v=vs.80%29.aspx)反过来，您可以使用以下方法为每个用户生成密钥：[GUID 是（临时）加密的好密钥吗？](https://stackoverflow.com/questions/6267555/is-a-guid-a-good-key-for-temporary-encryption)

# java - 将动态数据加载到具有多行的表中

> ID：13447042
> 
> 赞同：0
> 
> 时间：2012-11-19T02:55:17.310
> 
> 标签：java, jsp

编辑：
我需要使用 JSP 将动态数据显示到具有多行的表上。我希望该表显示 2 行、1 行类别的列和 1 行内容的列。我在下面有一个示例源代码，但它没有以正确的格式显示。我应该如何修改代码以正确的格式显示？

```
<%
String userName = (String)request.getSession().getAttribute("screenName");
ArrayList<String> stringList = (ArrayList<String>)request.getSession().getAttribute("stringList");
%>
<table id="table" border="1" align="center">
<tr>
<td align="center">
Category of Tweets:
</td>
<td align="center">
All Tweets of User: <%out.println(userName); %>
</td>
</tr>
<%
for(int i=0;i<stringList.size();i++){
%>
<tr>
<td>
<%
if(i%2==0){
String category = stringList.get(i).toString();
out.print(category);
%>
</td>
<%}else{ %>
<td>
<%
String content = stringList.get(i).toString();
out.print(content);
}
%>
</td>
</tr>
<%
}
%>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:30:02.647

您的问题很简单，您缺少第二个表格列

您应该有代码在 if 和 else 中输出空白列......如下

我试图简化标签编码

```
<table id="table" border="1" align="center">
    <tr>
        <td align="center">
            Category of Tweets:
        </td>
        <td align="center">
            All Tweets of User: <%out.println(userName); %>
        </td>
    </tr>
    <%
        for(int i=0;i<stringList.size();i++)
        {   
            String content = stringList.get(i).toString();          
            out.print("<tr>");
            if (i % 2 == 0) 
            {                                   
                out.print("<td>");
                out.print(content);
                out.print("</td>");
                out.print("<td></td>");
            }               
            else 
            {                       
                out.print("<td></td>");
                out.print("<td>");
                out.print(content);
                out.print("</td>");
            }
            out.print("</tr>"); 
        }   
    %>              
</table> 
```

![这应该会产生类似的东西......只是作为一个例子](../Images/660a1d3c9c6b0001eb5f93ea8ebd242f.png)

如果您想让描述与 category 位于同一行，请使用单独的计数器...

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:40:10.567

请查看您的代码中的以下几点

```
ArrayList<String> stringList = (ArrayList<String>)request.getSession().getAttribute("stringList");
%> 
```

您再次获取会话对象它已经在 jsp 中可用您可以编写 session.getattribute

```
String category = stringList.get(i).toString(); 
```

您再次使用 toString，因为 arraylist 是字符串类型

# grails - 通过域类/脚手架隐藏关系字段

> ID：13447044
> 
> 赞同：0
> 
> 时间：2012-11-19T02:56:28.513
> 
> 标签：grails, crud, dsl

我需要从 Grails 中的脚手架生成的视图中隐藏关系字段。

我发现了类似的问题和答案：[有没有办法在 grails crud 动态脚手架的视图部分隐藏字段](https://stackoverflow.com/questions/11684645/is-there-a-way-to-hide-fields-on-the-view-part-of-the-grails-crud-dynamic-scaffo)

然而，在申请关系领域时，上述答案似乎没有帮助。这是一个例子：

```
static hasMany = [car:Car]

static constraints = {
    car (display: false)
} 
```

请问谁能告诉我如何通过域类定义隐藏关系字段？

谢谢你。

# mfc - MFC：从触摸屏输入重新翻译鼠标坐标

> ID：13447047
> 
> 赞同：0
> 
> 时间：2012-11-19T02:56:54.647
> 
> 标签：mfc, touch

我正在尝试更改触摸屏返回的鼠标坐标。例如，如果我有一个始终全屏的应用程序，并且用户触摸坐标 (1023, 767)，那么我希望鼠标光标位于 (799, 479)。它应该是一个简单的缩放公式，但我似乎无法实现。我尝试更改 中的坐标`PreTranslateMessage`，但无论我将值设置为什么，它似乎都没有任何效果。

我需要在应用程序级别执行此操作，因为我无权访问驱动程序/控制器级别。

这是我的实验样本：

```
BOOL CMyDialog::PreTranslateMessage(MSG* pMsg)
{
   if (pMsg->message == WM_LBUTTONDOWN ||
       pMsg->message == WM_LBUTTONUP ||
       pMsg->message == WM_MOUSEMOVE)
   {
      // In this example, I'm simply reducing the "screen" by half.
      // I am expecting that the mouse cursor would always be between
      // my touch point and the upper-left corner, with a distance of half.
      // But nothing seems to be happening. Is pMsg->pt just "read-only"?

      pMsg->pt.x = pMsg->pt.x / 2;
      pMsg->pt.y = pMsg->pt.y / 2;
   }

   return CDialog::PreTranslateMessage(pMsg);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:16:04.843

我确定您的`OnLButtonDown`处理程序确实获得了坐标的修改值。鼠标消息与鼠标的“物理”位置无关。这只是一条消息，告诉您的窗口在某个位置发生了鼠标事件。

要设置鼠标的实际位置，您需要调用[SetCursorPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394%28v=vs.85%29.aspx)。另外，我相信您应该处理[WM_TOUCH](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317341%28v=vs.85%29.aspx)消息。

**编辑：**如果您想在应用程序中全局捕获鼠标坐标，请考虑使用挂钩。[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx) + [WH_MOUSE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_mousehook)。这可以从另一个进程中完成，但在这种情况下，您需要将挂钩的东西放在一个 DLL 中，操作系统将为*所有*进程注入该 DLL（请参阅[this](https://stackoverflow.com/questions/454477/how-to-make-a-keyboard-hook-global-across-processes)）。要记住的一件事；始终使您的挂钩尽可能轻巧！

# eclipse - Eclipse + Ubuntu 箭头键和退格键不起作用

> ID：13447049
> 
> 赞同：3
> 
> 时间：2012-11-19T02:57:08.683
> 
> 标签：eclipse, ubuntu

我正在使用 Ubuntu 12.10 和 Eclipse Juno。这种情况经常发生：箭头键和退格键在编辑器中停止工作。解决它的唯一方法是重新启动计算机。重新启动 Eclipse 没有帮助。有人遇到过这个问题或知道解决方案吗？谢谢。

更新：我有一台带触摸屏的戴尔笔记本电脑。我注意到这个问题在我触摸屏幕后开始发生。有没有办法在 Ubuntu 上禁用触摸？

更新 2：如果我在 Ubuntu 上禁用 N-Trig，就可以解决问题。有没有办法永久关闭它，无需启动脚本等？

更新3：似乎如果我在触摸屏幕后使用触摸板，问题就会消失。所以，如果我只是触摸屏幕，Eclipse 中的箭头键就会停止工作。然后，如果我使用触摸板，甚至只是触摸它，Eclipse 中的箭头键就会再次开始工作。很奇怪，但至少它现在解决了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T18:39:47.817

根据此链接：http: [//developerbits.blogspot.com/2012/03/arrow-keys-and-backspace-stop-working.html](http://developerbits.blogspot.com/2012/03/arrow-keys-and-backspace-stop-working.html)

你只需要按下所有的鼠标键，它就会回来。您可能有一个鼠标按钮处于按下状态，这会导致 Eclipse 出现问题。我已经证实，按住按钮可以防止箭头键在 Eclipse 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T04:39:23.643

这仅仅是由于失去对编辑器的关注造成的。焦点仍然在任何最后一个弹出窗口上。

您可以执行以下操作：显示更多弹出窗口（例如，通过右键单击编辑器并选择快速大纲）然后按 Esc，焦点将立即返回，您可以像往常一样使用箭头键。

**右键单击（在编辑器上）-> 快速大纲-> 按 Esc 键。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T03:14:44.260

要禁用触摸屏，此页面应该会有所帮助：[https ://superuser.com/questions/371617/permanently-disable-dell-latitude-2120-touchscreen-in-x-org-upon-start-up-and-su](https://superuser.com/questions/371617/permanently-disable-dell-latitude-2120-touchscreen-in-x-org-upon-start-up-and-su)

本质上，您需要在启动时运行某个命令。我可以澄清一下，如果您需要帮助，但该命令会禁用触摸屏的 xinput 设备。

# iphone - Youtube 视频帧不会出现或在 iOS 6 中播放

> ID：13447050
> 
> 赞同：0
> 
> 时间：2012-11-19T02:57:12.270
> 
> 标签：iphone, ios, xcode, sdk, youtube

我有一个现有应用程序的问题，问题是该应用程序在 UIScrollView 中的应用程序内播放 Youtube 视频，但是在我安装了新的 Xcode SDK 4.5.2 后，这些视频有一个空白的白色方块，它们不像他们那样工作习惯于点击它们时，这是我的应用程序中的代码：

```
- (void)playVideo:(NSString *)urlString frame:(CGRect)frame
{
NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";
NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width,        frame.size.height];
UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];

[videoView loadHTMLString:html baseURL:nil];
[self.scrollView addSubview:videoView];
[videoView release];
NSLog(@"%@",html);
}

- (void)viewDidLoad
{

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 20, 110, 110)];

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 170, 110, 110)];

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 320, 110, 110)];

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 470, 110, 110)];

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 620, 110, 110)];

[self playVideo:@"http://www.youtube.com/...." frame:CGRectMake(5, 765, 110, 110)];

[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320,1400)];

[super viewDidLoad];
} 
```

我不知道我需要在此代码中更改什么以使它们出现并再次播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:07:20.640

我为我的问题找到了解决方案。我需要在代码中更改的唯一一件事是替换此代码：

```
NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>"; 
```

使用此代码：

```
NSString *embedHTML = @"<body style=\"margin:0\"> <iframe height=\"110\" width=\"110\"        src=\"http://www.youtube.com/embed/HERE YOU PUT THE ID OF YOUR VIDEO\"   frameborder=\"0\"/></iframe></body> "; 
```

# jquery - jQuery如果复选框选中计算字段

> ID：13447053
> 
> 赞同：0
> 
> 时间：2012-11-19T02:57:24.613
> 
> 标签：jquery, coldfusion, checkbox

我是 jQuery 的新手，这可能是一个简单的答案，但如果选中了复选框，我会尝试计算价格和数量。我遍历项目列表，用户选择复选框并输入数量，我希望它在最后一个单元格中总计。

```
<table>
<tr>
<td width="10%">&nbsp;</td>
<td width="80%">Item</td>
<td width="10%">Price</td>
<td width="10%">Quantity</td>
<td width="10%">Total</td>
</tr>

<tr>
<td > <input type="checkbox" name="Extras" value="id" checked="no"></td>
<td >ItemName</td>
<td><cfinput type="text" name="quantity" class="quantity" size="4"></td>
<td>#Extras.Price #</td>
<td><span id="total"></span></td>
</tr>

</table> 
```

到目前为止，我的 jQuery 有以下内容：

```
$(document).ready(function() {

  $("input[type=checkbox]:checked").each (function (){
    // not sure what to put here    
  });

}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:15:47.250

我想你尝试做这样的事情，在这里检查：http: [//jsfiddle.net/vNg9v/2/](http://jsfiddle.net/vNg9v/2/)

脚本：

```
$(document).ready(function() {
    var totalQ = $('#total-q'),
        totalT = $('#total-t'),
        valQ = 0,
        valT = 0;
    $('input:checkbox').change(function () {
        var $this = $(this),
            parentRow = $this.closest('tr'),
            totalCell =             parentRow.find('.total'),
            price = parseFloat(parentRow.find('.price').html()),
            quantity = parseFloat(parentRow.find('.quantity').val()),
            total = price * quantity;

        if ($this.prop('checked') === true)
        {
            totalCell.html(total);
            valQ += quantity;
            valT += total;
        }
        else
        {
            valQ -= quantity;
            valT -= total;
            totalCell.text('')   
        }           
        totalQ.html(valQ);
        totalT.html(valT);    
    });
});​ 
```

html:

```
<table>
    <tr>
        <td width="10%">&nbsp;</td>
        <td width="80%">Item</td>
        <td width="10%">Price</td>
        <td width="10%">Quantity</td>
        <td width="10%">Total</td>
    </tr>
    <tr>
        <td > 
            <input type="checkbox" name="Extras" value="id" />
        </td>
        <td>ItemName</td>
        <td class="price">12.10</td>
        <td>
            <input name="quantity" class="quantity" size="3" value="0" />
        </td>
        <td class="total"></td>
    </tr>
    <tr>
        <td colspan="3">TOTAL</td>
        <td id="total-q">0</td>
        <td id="total-t">0</td>
    </tr>
</table>​ 
```

现在这应该正是您想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:48:33.633

[@erik1001 的答案](https://stackoverflow.com/a/13447160/104223)就是一切。我只会做以下更改：

使用“on”而不是“click”：

```
$('input:type=checkbox').on('click',function(){}); 
```

将函数存储为变量。这样您就可以从多个事件中重用它：

```
var runthis = function(){};
$('input:type=checkbox').on('click',runthis);
$('input.quantity').on('change',runthis); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:07:58.613

使用您当前的组织，这可能会变得非常混乱，非常快速。但是，您可以使用[jQuery.parent](http://api.jquery.com/parent/)和[jQuery.children](http://api.jquery.com/children/)的组合来获得您需要的东西。

首先，将元素更改为使用类，因为听起来您的示例代码中不止一行。

```
<td class="price">#Extras.Price #</td>
<td><span class="total"></span></td> 
```

然后，在您的`.each`函数中，将单击事件处理程序绑定到每个复选框：

```
$(document).ready(function() {

  $("input[type=checkbox]:checked").each (function (){
    $(this).on('click', function(e) { // bind click event
      var $row = $(this).parent('tr'); // <tr> element
      var total = $row.children('.quantity').val() 
          * parseInt($row.children('.price').val());
      $row.children('.total').html(total);
    });
  });
}); 
```

老实说，我不知道 jQuery 是否会拾取您的`<cfinput>`元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:10:08.483

我试着把你的 html 整理成这样：

```
<tr>
   <td> <input type="checkbox" name="Extras" value="id" checked="no" class="theCheckboxItem"></td>
   <td>ItemName</td>
   <td><cfinput type="text" name="quantity" class="quantity" size="4"></td>
   <td class="priceContainer">#Extras.Price #</td>
   <td class="totalContainer"><span id="total"></span></td>
</tr> 
```

jquery 将是这样的：

```
 var totalVal = "";
  var qty, price;
  $("input.theCheckboxItem:checked").each (function (){
    qty = $(this).parent().parent().find('.quantity').val();
    price = $(this).parent().parent().find('.priceContainer').text();

    totalVal = parseInt(qty) * parseInt(price);
    $(this).parent().parent().find('.totalContainer').text(totalVal);
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T03:22:01.450

到目前为止，您已经收到了一些很好的信息。我唯一要补充的是，在您尝试使用用户输入进行数学运算之前，请确保用户实际输入了一个数字。

两个答案提到了 parseInt 和 parseFloat 可能适合您的需求。请注意 parseInt("123fred") 返回 123。

# javascript - Bootstrap Datepicker（避免文本输入或限制手动输入）

> ID：13447057
> 
> 赞同：24
> 
> 时间：2012-11-19T02:58:34.360
> 
> 标签：javascript, wordpress, twitter-bootstrap, datepicker, user-input

这是我的网站：[http ://splash.inting.org/wp/](http://splash.inting.org/wp/)

我目前使用[Bootstrap Datepicker（范围分支）](https://github.com/eternicode/bootstrap-datepicker/tree/range)作为我的 Call Date 字段，它很棒。

虽然我有**2 个问题**：

1）您可以在输入字段中手动输入字符串。这很奇怪，因为[eyecon 的原始版本](http://www.eyecon.ro/bootstrap-datepicker/)不允许在您输入非日期值时输入当前日期。我尝试了 readonly 属性，但它似乎不起作用，因为它不允许您选择任何日期。

[2）我通过修改另一个帖子](https://stackoverflow.com/questions/10234153/limit-bootstrap-datepicker-to-weekdays-only)中的答案将日期输入选择限制为星期二和星期四。加载日期选择器后，选择的默认日期是当前日期，可以是一周中的任何其他日期。我想避免这种情况，只选择周二或周四。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2015-02-23T09:38:58.270

覆盖输入控件上的键事件。

```
<input onkeydown="return false" ... /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T22:55:29.010

使用 readonly 属性并在 input 元素后附加一个附加组件以在输入后触发 datepicker：

```
<input type="text" name="CallDate" value="" id="CallDate" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required input-medium date date-pick" size="40" readonly>
<span class="add-on"><i class="icon-calendar"></i></span> 
```

那应该工作。

对于第二个问题，您可以从此处使用日期选择器的修改版本： [https](https://github.com/eternicode/bootstrap-datepicker) ://github.com/eternicode/bootstrap-datepicker并使用选项[daysOfWeekDisabled](https://github.com/eternicode/bootstrap-datepicker#daysofweekdisabled)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-17T09:22:21.417

我设法得到如下可接受的解决方案：

```
$(".date").datetimepicker({
    defaultDate: moment(),
    format: 'YYYY-MM-DD'
}).end().on('keypress paste', function (e) {
    e.preventDefault();
    return false;
}); 
```

希望它也适合你！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-02T12:49:20.490

使用`onKeyDown`如下属性。它对我有用 [限制日期选择器中的手动输入]

```
 <input type="text" id="signedDate" name="signedDate" 
  onkeydown="event.preventDefault()" class="form-control input-med datepicker" 
  maxlength="10" placeholder="" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T14:55:30.700

禁用输入元素上的键盘事件。

```
<input onkeydown="return false" ... /> 
```

为日期和时间等类型的输入元素禁用鼠标单击事件。

```
<input type="date" onkeydown="return false" onclick="return false" ... />
<input type="time" onkeydown="return false" onclick="return false" ... /> 
```

> 如您所见，我刚刚为下一代开发人员升级了这个问题的最佳答案。

# java - 空对象还是虚拟对象？

> ID：13447060
> 
> 赞同：4
> 
> 时间：2012-11-19T02:59:08.057
> 
> 标签：java, oop, design-patterns

考虑一个可能需要也可能不需要很长时间才能完成工作的批处理操作（取决于数据）。用户可以注册一个***可选***的监听器来跟踪作业进度。

> 注意：监听器注册是完全可选的，用户可能希望在不注册任何监听器的情况下调用作业。

**问：以下哪种解决方案是您的首选，为什么？**

> 编辑：这里关心的是**性能**与**干净的代码**。有人说，与第二种解决方案相比，检查空引用（解决方案 1）更快。但第二种解决方案更干净，更容易理解。我想听听你的意见。

否 1：允许空侦听器并始终检查侦听器是否不为空，然后调用它。

```
doMyBatchJob() {
   if (listener != null) {
      listenr.progressStarted(params);
   }
   while (x) {
      if (listener != null) {
          listener.progressUpdated(current, expected)
      }
   }
   if (listener != null) {
      listenr.progressFinished(params);
   }
} 
```

No 2：实现一个虚拟监听器，如果用户没有通过他/她自己的监听器，则注册它。这样就可以在不检查空对象的情况下调用侦听器。

```
DummyListener {
     public void progressStarted(params) { //DO NOTHING }
     public void progressUpdated(current, expected) { //DO NOTHING }
     public void progressFinished(params) { //DO NOTHING }
}

doMyBatchJob() {
   listener.progressStarted(params);
   while (x) {
         //Do a single unit of the batch operation
         // ... code omitted here
         listener.progressUpdated(current, expected)
   }
   listener.progressFinished(params)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:37:40.437

## 您对`if x==null`代码异味的担忧是正确的，这绝对是！

使用该模式有非常正当的理由[`Null Object`](http://sourcemaking.com/refactoring/introduce-null-object)，一个是避免在您的代码中乱扔`if (x == null)`噪音，这些噪音通常与业务相关性较低，与设计相关性更差。`NULL`表示没有值**而不是**默认值。

我认为您对`Null Object`模式的了解还不够。

### 永远不要返回 null 并且您永远不必检查它

首先，永远不要`return null`来自方法，也永远不要`if x == null`在你的代码中。两者都是设计不佳的肯定迹象。`null`引用并且`NPE`应该是一个错误，应该在没有发生的地方解决。

### 永远不要接受 null 并且您永远不必检查它。

具有`return null`返回 a 的方法，`Null Object`并具有接受 null 并且可能处理`null`引用的事物具有`Null Object`处理`Null References`.

在您的情况下，您的`Dummy`对象不仅*不会做任何事情*，它还应该向日志*警告*报告它遇到了 a`null`并且应该对其进行处理。

### 使用一个好的 JSR305 库来注释您的方法，以便它们不接受空值。

我[`com.google.code.findbugs`](http://minds.coremedia.com/2012/10/31/jsr-305-nonnull-and-guava-preconditions/)在我创建的每个 Java 程序中都有 maven 依赖项，无论多么微不足道，我都可以用它来装饰每个方法和方法参数，`@NONNULL`而不必担心`if x == null`再次编写！

### 如果您有返回`null`包装它的第 3 方代码并使用 JSR305 注释。

将 Guava`Preconditions.checkNotNull()`与`static`导入一起使用，这样您就可以`checkNotNull()`对所有标记的参数执行操作`@Nonnnull`，您甚至可以包含关于什么是的描述性错误消息，`null`以及为什么它不应该是或其他什么。

并且得意地想想他们的代码设计得多么糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:11:07.593

我会将批处理作业建模为 an[`Observable`](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html)并将侦听器建模为[`Observer`](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html). [`notifyObservers(object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html#notifyObservers%28java.lang.Object%29)批处理作业中的状态更改可以在用于通过该方法与观察者通信的对象中进行跟踪。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T03:10:38.257

答案取决于背后的真实意图`default listener`。如果您的默认侦听器（虚拟）不做任何事情，则无需创建此类侦听器。`Null`with`null-check`仅用于处理此类场景（更高效和紧凑）。

但另一方面，如果您希望通过默认侦听器实现一些默认行为，那么您应该创建默认侦听器。

作为一个经验法则，在有任何使用/需求之前，我不会用对象来挤满程序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T04:03:35.217

我都不会。我会使用选项 1，但大大简化了：

```
doMyBatchJob() {
   if (listener == null) {
       return; // if listener is null, do nothing
   }
   listener.progressStarted(params);
   while (x) {
      listener.progressUpdated(current, expected)
   }
   listener.progressFinished(params);
} 
```

这遵循“早日退出”的口头禅。此外，它不会导致“类膨胀”——你的`DummyListener`想法没有任何价值。使用 a`null`代替是干净和清晰的 - 如果侦听器是（即什么都没有），每个人都知道发生了`null`什么，并且在调试时更加明显。

# c# - ASP.NET MVC 4 VS2012 中的简单示例 SignalR -1.0.0-alpha2 不起作用

> ID：13447062
> 
> 赞同：0
> 
> 时间：2012-11-19T02:59:32.197
> 
> 标签：c#, jquery, asp.net-mvc-4, visual-studio-2012, signalr

* * *

**更新4**：（已**解决**）

*   做了新项目；
*   进口来源；
*   将 SignalR 更新到最新版本（通过 NuGet 包管理器控制台）；
*   做了相应的修改（根据官方文档：[http](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server) ://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server ）。

最后，一切都像魅力一样运作。感谢 SignalR 团队！

* * *

这个 SignalR 做得很好，迫不及待想试试！

我找到了本教程 - SignalR - 5 分钟演示 ( [http://www.youtube.com/watch?v=tEBaDo_sFfA](http://www.youtube.com/watch?v=tEBaDo_sFfA) )

但是，我有一些问题： - 我安装了 VS2012Ultimate，在创建示例 ASP.NET MVC4 Internet 应用程序后，右键单击参考 -> 管理 NuGet 包，搜索 SignalR .... 没有像视频中那样出现，没有那些：SignalR、SignalR.Js、SignalR.Server ... :( 有谁知道为什么？

**UPDATE1**：我安装了 SignalR（[http://nuget.org/packages/microsoft.aspnet.signalr](http://nuget.org/packages/microsoft.aspnet.signalr)），之后，我安装了 asp.net 秋季更新（[http://www.microsoft.com/en-us/download /details.aspx?id=35493](http://www.microsoft.com/en-us/download/details.aspx?id=35493)）。

但是我从下面得到关于函数“ `writeMessage`”的错误`ChatHub.cs`。

```
"Error1'Microsoft.AspNet.SignalR.Hubs.HubConnectionContext' does not contain a definition for 'writeMessage'
and no extension method 'writeMessage' accepting a first argument of type
'Microsoft.AspNet.SignalR.Hubs.HubConnectionContext' could be found (are you missing a using directive or an
assembly reference? ..\MvcApplication1\Hubs\ChatHub.cs" 
```

`Clients.All.`在聊天初始化和使用之后使用or`Clients.Others.`和启动集线器“解决”此错误后`chat.writeMessage`，在 GoogleChrome 控制台中加载时出现两个错误：

*   在**Index.cshtml**中：

    ```
    "Uncaught TypeError: Cannot set property 'writeMessage' of undefined" 
    ```

*   在**localhost:3420/signalr/hubs**：

    ```
    "Uncaught TypeError: Object #<Object> has no method 'createProxy'" 
    ```

    *   在这**条线上**：

        ```
        // Create and store the hub proxy
            hub._.proxy = hubConnection.createProxy(hub._.hubName); 
        ```

`Clients.All.`在使用or`Clients.Others.`并在最后启动集线器并使用`chat.client.writeMessage`（我安装了 Microsoft.AspNet.SignalR.Client）“解决”此错误后，在 GoogleChrome 控制台中加载时出现两个错误：

*   在**Index.cshtml**中：

    ```
    "Uncaught TypeError: Cannot read property 'client' of undefined" 
    ```

任何人都可以帮助我吗？:(

提前致谢！！

**文件** `ChatHub.cs`：

```
namespace MvcApplication1.Hubs
{
    //[Microsoft.AspNet.SignalR.Hubs.HubName("chathub")]
    [Microsoft.AspNet.SignalR.Hubs.HubName("chatHub")]
    public class ChatHub : Microsoft.AspNet.SignalR.Hubs.Hub
    {
        public void BroadcastMessage(string message)
        { 
            //rebroadcast the message to all the connected clients
            Clients.writeMessage(message);//ERROR on compile

        //I tried both of the followings, give no error, BUT when i press Submit doesn't appear messages anywhere
            //Clients.All.writeMessage(message);
            //Clients.Others.writeMessage(message);
        }
    }
} 
```

**文件** `Index.cshtml`：

```
@section scripts
{
    <script type="text/javascript" src="~/Scripts/jquery.signalR-1.0.0-alpha2.js"></script>

@*not working, GET localhost:3420/SignalR 500 (Internal Server Error)*@
    @*<script type="text/javascript" src="SignalR"></script>*@

@*  with any of these declarations i don't get 500 error any more, but still not working *@
    <script type="text/javascript" src="~/signalr/hubs"></script>
    @*<script type="text/javascript" src="../signalr/hubs"></script>*@    

    <script type="text/javascript">
        $(document).ready(function()
        {
        //i tried these, but in vain..
            //var connection = new Microsoft.AspNet.SignalR.Connection("localhost:3420/");
            //$.connection.hub.url = 'localhost:3420/signalr/';

            var chat = $.connection.chatHub;

            $.connection.hub.start();

        //Uncaught TypeError: Cannot set property 'writeMessage' of undefined 
            //chat.writeMessage = function (msg)

        //Uncaught TypeError: Cannot read property 'client' of undefined 
            chat.client.writeMessage = function (msg) {
            {
                $("#messages").append("<li>" + msg + "</li>");
            }

            $("#buttonSubmit").click(function ()
            {
                //chat.broadcastMessage($("#txtInput").val());
                chat.server.broadcastMessage($("#txtInput").val());
            });

            $.connection.hub.start();//just one error at client
        });
    </script>
}
<h5>Chat with SignalR</h5>       
<fieldset>
    <legend>SignalR Demo</legend>
    <label for="txtInput">Chat Message</label>
    <input id="txtInput" type="text" />
    <button id="buttonSubmit">Submit</button>            
    <fieldset>
        <legend>Messages</legend>
        <ul id="messages"></ul>
    </fieldset>
</fieldset> 
```

**更新2**：

根据**Tim B James**的建议，我：

*   创建了新的 ASP.NET MVC 4 项目；
*   使用建议的命令通过 NuGet 安装 SignalR；
*   [尝试使用来自https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)的集线器的源代码示例，但无法正常工作！

提及：

~~- 将函数中的代码`Main`放入我的`HomeController.cs`-> 函数中：`public ActionResult Index()`；~~

~~- 改变了这一行：~~

~~var hubConnection = new HubConnection("localhost/mysite");~~

~~有了这个：~~

~~var hubConnection = new HubConnection("localhost:14079");~~

~~但是，我的页面没有加载（“等待本地主机...”）~~

~~- 如果我不将 Main 中的代码放入控制器的函数中，~~

我收到此**错误**：

```
 "Uncaught TypeError: Cannot read property 'chat' of undefined "
on this line: 

    var chat = $.connection.chat; 
```

**更新3**：

UPDATE2 与~~**删除线**~~线条

**更新4**：（已**解决**）

开头的暗示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:00:37.960

最新版本有一些未记录的细微差别，事实上我今天正在处理它们。

首先，在您引用的链接中，您不需要 Main 中的代码。这是为了在 WPF 应用程序或 Windows 8 应用程序中使用 Signalr。

第一个问题可能是也可能不是问题，是 HubNameAttribute 的使用，它可能需要也可能不需要。
如果没有 HubName，您的集线器名称应解析为 $.connection.chatHub

您已经处理的下一部分是每个集线器上的新命名空间。

```
chatHub.client - These are client defined methods, that the server may invoke.
chatHub.server - These are server defined methods, that the client may invoke.
chatHub.state - This is the state that gets sent to and from the server. 
```

现在未捕获的错误是 JavaScript 中没有正确输出的东西，很可能是集线器定义，因为集线器变量为空。您需要在后台验证集线器是否正常恢复。

```
<script type="text/javascript" src="~/signalr/hubs"></script> 
```

这应该返回一个格式正确的 jQuery 就绪块，它定义了所有集线器和这些集线器的服务器方法。使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的工具将对此有所帮助。

我也会开始使用带 Firebug 的 Chrome 或 Firefox，它们各有优缺点，但它们都会为您提供网络监控和调试工具。能够捕获未处理的异常一直是尝试调试 JavaScript 的所有东西的救命稻草。

希望这可以帮助您解决悬而未决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:26:18.200

首先，与现在可用的 SignalR 版本相比，YouTube 视频现在已经过时了。

其次，我会删除您正在使用的项目并重新开始。这次，通过 NuGet 包管理器安装 SignalR Alpha 版本。

**安装包 Microsoft.AspNet.SignalR -pre**

**安装包 Microsoft.AspNet.SignalR.client -pre**

完成此操作后，请阅读此处的 SignalR 网站上的文档/示例

[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

如果您遵循一些基础知识，那么您应该进行排序。

# c++ - 我将如何“生成可变参数”？

> ID：13447063
> 
> 赞同：2
> 
> 时间：2012-11-19T02:59:40.663
> 
> 标签：c++, c++11, variadic-templates, variadic-functions

在这种情况下，我需要一种将可变数量的参数传递给函数的方法：

```
template<typename ...T>
struct Lunch
{
    Lunch(T...){}
};

template<typename T>
T CheckLuaValue(lua_State* luaState,int index)
{
    //Do Stuff
    return value;
}

template <class MemberType, typename ReturnType, typename... Params>
struct MemberFunctionWrapper <ReturnType (MemberType::*) (Params...)>
{
    static int CFunctionWrapper (lua_State* luaState)
    {
        ReturnType (MemberType::*)(Params...) functionPointer = GetFunctionPointer();
        MemberType* member = GetMemberPointer();

        int index = 1;

        //Get a value for each type in Params
        Lunch<Params...>
        {
           (CheckLuaValue<Params>(luaState,index), index++, void(), 0)...
        }; 
```

CheckLuaValue 为 Params 中的每种类型返回一个值。我的问题是我现在需要一种方法来使用所有这些值调用我的函数

```
 member->*functionPointer(returnedLuaValues); 

    }
}; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T06:09:26.767

因此，我窃取了 Luc Danton 对 sFuller 和 Pubby 的一些序列建议（关于序列），并生成了这个“停止乱搞`operator,`”版本：

```
#include <iostream>
struct lua_State {};
template<typename T>
T CheckLuaValue( int n, lua_State* l)
{
    std::cout << "arg[" << n << "] gotten\n";
    return T(n);
}

template<int ...>
struct seq { };

// generates a seq< First, ..., Last-1 > as "type"
template<int First, int Last>
struct gen_seq
{
  template<int N, int... S>
  struct helper : helper<N-1, N-1, S...> {};
  template<int... S>
  struct helper<First, S...> {
    typedef seq<S...> type;
  };
  typedef typename helper<Last>::type type;
};

template< typename X >
struct MemberFunctionWrapper;

template< typename F >
struct MemberFunctionHelper
{
    typedef F MethodPtr;
};
template<class InstanceType, typename ReturnType, typename... Params>
struct MemberFunctionWrapper< ReturnType(InstanceType::*)(Params...) >
{
  typedef MemberFunctionHelper<ReturnType(InstanceType::*)(Params...)> Helper;
  typedef typename Helper::MethodPtr MethodPtr;
  static MethodPtr& GetFunctionPointer() {static MethodPtr pFunc; return pFunc;}
  static InstanceType*& GetMemberPointer() {static InstanceType* pThis;return pThis;}
  template<int n, typename Param>
  static auto GetLuaValue( lua_State* luaState )->decltype(CheckLuaValue<Param>(n,luaState))
  {
    return CheckLuaValue<Param>(n,luaState);
  }

  template< typename sequence >
  struct call;

  template< int... I >
  struct call<seq<I...>>
  {
    ReturnType operator()( lua_State* luaState, InstanceType* instance, MethodPtr method ) const
    {
      return (instance->*method)( GetLuaValue<I,Params>( luaState )... );
    }
  };
  static int CFunctionWrapper( lua_State* luaState)
  {
    MethodPtr func = GetFunctionPointer();
    InstanceType* instance = GetMemberPointer();
    ReturnType retval = call< typename gen_seq< 1, sizeof...(Params)+1 >::type >()( luaState, instance, func );
    return 0;
  }
};

struct test{ int foo(int x, double d){std::cout << "x:" << x << " d:" << d << "\n";}};
int main(){
    typedef MemberFunctionWrapper< int(test::*)(int, double) > wrapper;
    test bar;
    wrapper::GetFunctionPointer() = &test::foo;
    wrapper::GetMemberPointer() = &bar;
    wrapper::CFunctionWrapper(0);
} 
```

现在，请注意对 CheckLuaValue 的调用可能是无序的（即，它可以在 arg 1 之前从 Lua 请求 arg 2），但正确的参数将传递给正确的参数。

这是一个测试运行：http: [//ideone.com/XVmQQ6](http://ideone.com/XVmQQ6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:07:16.383

如果我理解正确，您应该更改定义`Lunch`以调用成员函数指针：

```
template <class MemberType, typename ReturnType, typename... Params>
struct MemberFunctionWrapper <ReturnType (MemberType::*) (Params...)>
{
  template<typename ...T>
  struct foo // new Lunch
   {
     foo(ReturnType (MemberType::*)(Params...) functionPointer, MemberType* member, T... args){
       member->*functionPointer(args...);
     }
   };

   static int CFunctionWrapper (lua_State* luaState)
    {
        ReturnType (MemberType::*)(Params...) functionPointer = GetFunctionPointer();
        MemberType* member = GetMemberPointer();

        int index = 1;
        //member->*(bindedMemberFunction->memberFunction);

        //Get a value for each type in Params
        foo<Params...>
        {
           functionPointer,
           member,
           (++index, CheckLuaValue<Params>(luaState,index))...
        };
    }
}; 
```

# .htaccess - PHP url # 拆分

> ID：13447065
> 
> 赞同：0
> 
> 时间：2012-11-19T02:59:56.063
> 
> 标签：.htaccess, parsing, url

我有一个包含这些内容的 .htaccess 文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ([^/\.]+)$ index.php?string=$1&match=all [L] 
```

所以当我输入： domain.com/test 页面重定向到*domain.com/index.php?string=test&match=all*

但是如果我想访问这个页面：domain.com/test#sub1

页面重定向到*domain.com/index.php?string= **test** &match=all*

而不是*domain.com/index.php?string= **test#sub1** &match=all*

我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:05:47.447

锚点/哈希仅由浏览器使用。服务器不会看到这些请求，因为这样的请求是无效的。（没有“test#sub1”文件，只有“test”文件。）它无法知道你只是想访问一个锚点而不是试图访问一个不存在的文件，所以这些信息不会传递到 Web 服务器。

编辑：此外，通过单个 php 文件重定向*所有内容*对我来说似乎是渎职行为。也许这里发生了一些特别的事情，这使它成为一种有信誉的方法。

# vim - vi/vim 编辑器，复制一个块（不是通常的动作）

> ID：13447066
> 
> 赞同：91
> 
> 时间：2012-11-19T02:59:58.650
> 
> 标签：vim, copy-paste, vi

在 vi/vim 编辑器中，我需要复制一个块。有很多方法，但一种方法非常快。

1.  以某种方式标记第一行，

2.  然后以某种方式标记结束线，

3.  然后输入一些命令来复制标记的行。

4.  然后复制，可能使用'p'，但不确定。

有人知道命令（不是 yy 或 10yy）吗？提前致谢。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-11-19T03:10:56.203

只需用于`V`选择行或`v`选择字符或`Ctrl``v`选择块。

When the selection spans the area you'd like to copy just hit `y`and use `p`to paste it anywhere you like...

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2015-09-22T11:52:33.363

**[他们的文档说：](http://vim.wikia.com/wiki/Copy,_cut_and_paste)**

**剪切和粘贴：**

1.  将光标放在要开始切割的位置。
2.  按`v`选择字符（或大写`V`选择整行）。
3.  将光标移动到要剪切的内容的末尾。
4.  按`d`剪切（或`y`复制）。
5.  移动到您要粘贴的位置。
6.  按`P`粘贴到光标之前，或`p`粘贴到之后。

使用相同的步骤执行复制和粘贴，除了步骤 4 中您将按 y 而不是 d：

`d`= `delete`=`cut`

`y`= `yank`=`copy`

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-11-19T11:34:53.257

另一个可能更容易记住的选项是用`m``a`and在两行上放置标记`m``b`，然后运行`:'a,'byank`。

许多不同的方法来完成这项任务，只是提供另一种。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-05-09T15:34:42.497

我发现下面的命令更方便。如果要从 6 到 12 复制行并从当前光标位置粘贴。

```
:6,12 co . 
```

如果要从第 6 行复制到第 12 行并从第 100 行粘贴。

```
:6,12t100 
```

来源：[https ://www.reddit.com/r/vim/comments/8i6vbd/efficient_ways_of_copying_few_lines/](https://www.reddit.com/r/vim/comments/8i6vbd/efficient_ways_of_copying_few_lines/)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2012-11-19T03:28:48.383

听起来您想在文件中放置*标记*。

`m``x`在光标下放置一个名为*x的标记*

`y``'``x`拉动光标当前位置和包含*标记 x*的行之间的所有内容。

您可以使用`'``x`简单地将光标移动到您的标记所在的行。

您可以使用````x`（反引号）移动到标记的*确切位置*。

* * *

我一直在做的一件事是*将光标和标记 x 之间的所有内容拉到剪贴板*中。

你可以这样做：

`"``+``y``'``x`

注意：在某些环境中，剪贴板缓冲区由 a`*`而不是 a表示`+`。

* * *

类似的问题有一些很好的答案：

*   [如何将文本从 vi 复制/粘贴到不同的应用程序](https://stackoverflow.com/q/10803436/778118)

*   [如何在vim的ex模式下从缓冲区粘贴？](https://stackoverflow.com/q/13043986/778118)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-03-15T18:49:46.627

键盘快捷键是：

1.  对于复制：将光标放在块的开头并按**md** ，然后转到块的末尾并按**y'd**。这将选择要粘贴的块按 p

2.  对于剪切：将光标放在块的开头并按**ma** ，然后转到块的末尾并按**d'a**。这将选择要粘贴的块按 p

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-13T01:44:43.323

您可以像在 vi 中一样执行此操作，例如将行从 3020 拉到末尾，执行以下命令（将块写入文件）：

:3020,$ w /tmp/yank

并将此块写入另一行/文件，转到所需位置并执行下一个命令（插入之前写入的文件）：

:r /tmp/yank

（提醒：不要忘记删除文件：/tmp/yank）

# jquery - Jquery 内容滑块

> ID：13447067
> 
> 赞同：0
> 
> 时间：2012-11-19T03:00:31.190
> 
> 标签：jquery, html, slider

这是供参考的图片链接。 [http://i.stack.imgur.com/TfoD0.png](http://i.stack.imgur.com/TfoD0.png)

大家好，我需要一个能够根据每个 div 内容中的内容自动调整高度的内容滑块，我遇到了很多滑块，但都不符合我的标准，即：

1.  每个内容的自动高度。
2.  左右箭头，当高度改变时应居中对齐。
3.  缩略图如下。
4.  里面的内容应该足够灵活，可以放 html5 video / youtube embedded video 和其他 div 内容。

我发现了一些滑块，例如 [http://webbies.dk/assets/files/SudoSlider/package/demos/callbacks%204%20%7Bthumbnails%7D.html](http://webbies.dk/assets/files/SudoSlider/package/demos/callbacks%204%20%7Bthumbnails%7D.html)

它确实符合标准，但缩略图轮播，没有左右箭头。和滑块上的左右箭头，不会根据每个调整大小的内容对齐到中心。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:43:17.693

像这样？ [http://webbies.dk/assets/files/SudoSlider/package/demos/thumbnails%20with%20rich%20content.html](http://webbies.dk/assets/files/SudoSlider/package/demos/thumbnails%20with%20rich%20content.html)

我制作了 SudoSlider，所以只要问你是否有任何问题。

如果您想要一种完全控制缩略图的方法，可以查看此演示。 [http://webbies.dk/assets/files/SudoSlider/package/demos/customLinks.html](http://webbies.dk/assets/files/SudoSlider/package/demos/customLinks.html)

# php - php中的exec命令不起作用

> ID：13447070
> 
> 赞同：0
> 
> 时间：2012-11-19T03:00:40.333
> 
> 标签：php, r, exec

我有一个需要在我的 PHP 页面上执行的 R 脚本。这是我的代码

```
exec("Rscript D:/webs/popdyn/SingleSpeciesLWR_2.r D:/webs/popdyn/hello.csv none"); 
```

我这里有 2 个参数，第一个是我的 csv 文件，第二个没有。当我在 cmd 中执行它时效果很好，但在 PHP 中它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:09:25.937

这很可能是 PATH 问题。检查 Rscript.exe 是否在您的系统环境的 PATH 中，而不是您的本地用户环境中。

原因：当 PHP 运行 exec 时，它运行的是加载应用程序的用户环境（可能是 IIS、Apache 或 PHP，取决于您的设置）。您可以找出哪个用户并添加该用户的路径，或者只是将路径添加到系统环境。您可以通过控制面板执行此操作（不是命令行 - 仅添加到本地！）。

或者，在 exec() 中指定 Rscript 的完整路径。

# php - PHP 代码以 HTML 格式显示

> ID：13447071
> 
> 赞同：0
> 
> 时间：2012-11-19T03:00:53.437
> 
> 标签：php, html

我正在使用以下代码从数据库表中获取数据：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Search data</title>
    </head>
    <body>
        <table>
            <tr>
                <td align="center">EMPLOYEES DATA</td>
            </tr>
            <tr>
        <td>
        <table border="1">
            <tr>
            <td>NAME</td>
            <td>EMPLOYEES<br>NUMBER</td>
            <td>ADDRESS</td>
            </tr>
    <?php
        //the example of searching data with the sequence based on the field name
        //search.php
        mysql_connect("localhost","root","");//database connection
        mysql_select_db("db_psu_online");

        $order = "SELECT * FROM tb_income_statement_igp_fields";
        //order to search data
        //declare in the order variable

        $result = mysql_query($order);  
        //order executes the result is saved
        //in the variable of $result

        while($data = mysql_fetch_row($result)){
            echo("<tr><td>$data[1]</td><td>$data[0]</td><td>$data[2]</td></tr>");
        }
    ?>
        </table>
        </td>
        </tr>
        </table>
    </body>
</html> 
```

上面代码的输出是这样的： ![在此处输入图像描述](../Images/69618f072ad80ede0b034b71771cfbb2.png)

我不知道为什么字符：`"); } ?>` 正在打印。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:02:18.753

您是否使用扩展名保存文件`.php`？您的服务器上是否安装并启用了 PHP？

至少其中一个的答案是“否”，因为您看到的是 HTML 中的原始 PHP 输出 - 如果您使用浏览器的查看源代码，您会清楚地看到这一点。

# hyperlink - CSS - 链接悬停不起作用

> ID：13447073
> 
> 赞同：0
> 
> 时间：2012-11-19T03:01:04.713
> 
> 标签：hyperlink, hover, anchor, mailto

有谁知道如何使 CSS 链接悬停属性适用于不链接到另一个 html 页面或锚点的链接？

例如这有效：

```
<a href="page1.html">Page1</a>
<a href="#page9">Link</a>

a:hover,a:visited:hover{
color:#fff;
text-decoration:none;
}
a:link,a:visited{
color:#555;
text-decoration:none;
} 
```

但是，当我将链接更改为不是锚点或 html 文件的内容时，假设是 mailto：

```
<a href='mailto:bla@bla.com'>Send email</a> 
```

当我将鼠标悬停在链接上时，它不再改变颜色。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T03:21:14.180

你正在覆盖你自己的风格。尝试

```
 <style type="text/css">
        a:link, a:visited
        {
            color: #555;
            text-decoration: none;
        }
        a:hover, a:visited:hover
        {
            color: #fff;
            text-decoration: none;
        }
    </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:21:23.340

您不需要做 a:link，在定义锚标签样式时只需 a 就可以了，但是，如果出于某种原因确实需要它，那么您需要比链接样式更具体地定义悬停样式。

```
a:link:hover,a:visited:hover{
color:#fff;
text-decoration:none;
}
a:link,a:visited{
color:#555;
text-decoration:none;
} 
```

或者

```
a:hover,a:visited:hover{
color:#fff;
text-decoration:none;
}
a,a:visited{
color:#555;
text-decoration:none;
} 
```

将解决您的问题

# node.js - NodeJS 基本认证

> ID：13447077
> 
> 赞同：3
> 
> 时间：2012-11-19T03:01:34.213
> 
> 标签：node.js, lambda, connect

我想使用基本身份验证来验证用户。问题是当用户需要身份验证时，浏览器会加载一个丑陋的表单，用户应该在其中输入他们的凭据（这是所有浏览器在收到基本身份验证请求时的默认设置）。

我想知道如何绕过这个丑陋的浏览器默认表单，而是提供另一种好看的定制表单。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:15:16.440

您看到的是您的 Web 服务器输出的 HTTP 身份验证页面。浏览器只是按原样传递它，它不是可定制的。这就是为什么除了在开发过程中锁定站点或隐藏站点的特定部分之外，没有人真正使用它们。

如果您想做一些适合您网站的外观和感觉的事情，您将需要设计一个页面或将您的登录信息包含在现有页面的某个位置。

# php - 使用 PHP 回显 Jquery 来执行 .post(); 在 .click() 上；导致我无法解释的查询

> ID：13447081
> 
> 赞同：2
> 
> 时间：2012-11-19T03:02:11.780
> 
> 标签：php, jquery, mysql, ajax

我已经搜索，我已经编辑，重新编辑，我已经被 JSLint 屈尊并重新测试过。我已经达到了我所知道的实际极限，而且我没有使用 Firebug 或其他工具来更具体地隔离问题的经验。将一个小男孩指向正确的方向。

这是我认为有问题的代码：

```
echo '<script type="text/javascript">' . "\n";
echo '$(document).ready(function() {' . "\n";   
echo '$("#' . $row['firstname'] . $row['lastname'] . '").click(function() {' . "\n";
echo '  $.post("http://example.com/publish.php", { fname: "' . $row['firstname'] . '", lname: "' . $row['lastname'] . '", input: "' . $published['input'] . '", table: "' . $q . '" });' . "\n";
echo 'e.preventDefault();' . "\n";
echo 'return false;' . "\n";
echo '     });' . "\n";
echo '});' . "\n";
echo '</script>'; 
```

这是一个更大的 while 循环的一部分，该循环从 mysql 数据库中获取数据，详细说明作为外展计划的一部分被分配了 html 模板的个人。除其他外，循环让用户知道内容是否已发布到网络上，或者它是否只是作为查询的一部分准备就绪；0 表示未发布，1 表示已发布。上面的脚本预计会告诉 publish.php 执行 UPDATE 查询并将 0 更改为 1，反之亦然。看起来很简单，如果我手动查询脚本，我的内容就会发布——我会得到预期的结果。

现在在浏览器端，我使用 PHP 在表格中输出数据库信息。在最后一列中，有一个按钮可以发布或取消发布。

```
echo "<td><button id='" . $row['firstname'] . $row['lastname'] . "' class='btn btn-small " . $published['UI'] . "'>" . $published['do'] . "</button></td>"; 
```

上面的代码似乎工作正常；它只是根据他们的名字和姓氏的合并生成一个唯一的#id，回显要附加到按钮的适当类（红色表示取消发布，绿色表示发布）并提醒用户他们将采取的行动，如果他们选择按下按钮。

现在，它应该与以下内容结合在一起。这是我认为可能是有问题的代码的输出（我发布的第一个片段）。对我来说，它看起来很甜蜜，但谁知道呢。毕竟我是业余爱好者。

```
$(document).ready(function() {
$("#FirstnameLastname").click(function() {
  $.post("http://example.com/publish.php", { fname: "Firstname", lname: "Lastname", input: "1", table: "Tablename" });
e.preventDefault();
return false;
     });
}); 
```

如果我写：

```
$.post("http://example.com/publish.php", { fname: "Firstname", lname: "Lastname", input: "1", table: "Tablename" }); 
```

直接进入控制台，我将 Tablename 中用户 Firstname Lastname 的发布状态从 0 更改为 1。如果我单击该按钮，我将在地址栏中得到一个无意义的字符串：

```
http://example.com/outreach.php?names=Tablename&names=None 
```

**这到底是怎么回事？**

在此先感谢您阅读本文。期待解决这个问题！哈哈。

补充笔记：

```
PHP 5.3.x
Jquery is called in the head.
All table names contain a number of dashes - could this be causing the string to turn into rubbish? e.g outreach.php?names=Ta-bl-ena-me&names=None 
```

下面是 outreach.php 如何请求表名列表。在更改时，这将作为 Ajax 发送到 getnames.php，然后以前面提到的表格的形式将 html/js 发送回 outreach.php（没问题）。这就是为什么我现在想我可能需要回到绘图板...

```
<?php   while($showtablerow = mysql_fetch_array($showtablequery_result))    {   echo "<option>" . $showtablerow[0]."<br />" . "</option>";  } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:16:38.793

好的，到目前为止，我刚刚清理了您的代码以提高可读性。我认为发布参数时出了点问题。他们最终也出现在网址中吗？

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#<?php echo $r['firstname'] . $r['lastname']; ?>").click(function(e) {
        $.post("http://thinknextmedia.com/publish.php", 
            { fname: "<?php echo $r['firstname']; ?>", 
              lname: "<?php echo $r['lastname']; ?>", 
              input: "<?php echo $published['input'] ?>", 
              table: "<?php echo $q ?>" });
        return false;
        });
    });
</script> 
```

# c - 基于空格分隔符从文件中读取

> ID：13447088
> 
> 赞同：0
> 
> 时间：2012-11-19T03:04:53.807
> 
> 标签：c

我有包含 4 行数据的文本文件。每一行如下

```
Candies 2
Cookies -4
Soda 5
Milk 8 
```

我必须读取 C 函数中的值 (2,-4,5,8) 并将它们存储在变量中。

我已经编写了以下代码，但我被困在了 XXXXXX 指示的位置。我不确定那里和之后到底发生了什么。感谢你的帮助。

```
 void function()
  {
    int count=0,value[4],length=0;

    FILE *fp;

    fp = fopen("file.txt","r");

    if (fp == NULL)
    {
      fprintf(stderr, "Can't open file !\n");
      exit(1);  
    }

     char line[100];
        for (count = 0; count < 4; count++)
        {      
            if (fgets(line,sizeof(line),fp)==NULL)
        break;

        else 
    {  

       while(fp!="" && length<strlen(line))
       {
       fp++;length++
       }

       if(fp == "") 
         value[count]= XXXXXXXX;
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:28:35.720

```
void function()
 {
    int count=0,value[4],length=0;

    FILE *fp;

    fp = fopen("file.txt","r");

    if (fp == NULL)
    {
      fprintf(stderr, "Can't open file !\n");
      exit(1);  
    }

     char line[100];
        for (count = 0; count < 4; count++)
        {      
            if (fgets(line,sizeof(line),fp)==NULL)
                break;

          else 
            {  
              sscanf(line,"%*s %d",&value[count]);
            }
      } 
```

我修改了代码，你可以试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:18:09.600

请*不要*增加`fp`。它不会做你认为它会做的事情。

如果您想在现有 C 函数的最小帮助下执行此操作，只需在您的行中搜索一个空格（好吧，我`isspace`在`atoi`这里使用过）：

```
int pos = 0;
while( line[pos] != 0 && !isspace(line[pos]) ) pos++;
if( line[pos] != 0 ) {
    line[pos++] = 0;
    value[count] = atoi( &line[pos] );
    printf( "Key: '%s' / Value: %d\n", line, value[count] );
} 
```

或者你可以使用`sscanf`...

```
int nread = sscanf( line, "%*s %d", &value[count] ); 
```

或者：

```
char key[100];
int nread = sscanf( line, "%s %d", key, &value[count] ); 
```

# cocoa - 可可。为什么应用程序的图像在沙盒中从 png 更改为 tiff 格式？

> ID：13447094
> 
> 赞同：1
> 
> 时间：2012-11-19T03:06:03.127
> 
> 标签：cocoa, png, sandbox, tiff

我的app的资源是png格式的，但是当我运行app，打开沙盒的内容资源目录，发现所有png格式的图片都变成了tiff格式，怎么回事？

任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:49:35.890

这听起来像您在项目的构建设置中设置了“组合高分辨率艺术品”设置。使用此选项集，Xcode 将自动将标准图像和@2x 图像组合成单个 TIFF。有关详细信息，请参阅[此 Apple 文档](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)。

# asp.net-mvc-4 - 如何处理字符串中的 Html 标签 - 在 MVC 页面中显示时

> ID：13447095
> 
> 赞同：0
> 
> 时间：2012-11-19T03:07:00.323
> 
> 标签：asp.net-mvc-4, rally

所以我正在从 Rally Web 服务中检索数据，并且描述字段包含 html 标记。

我的 MVC 页面如下所示：

```
<table width="100%" id="stories">
        <tr>
            <td>ID</td>
            <td>Name</td>
            <td>Description</td>
            <td>TaskEstimateTotal</td>
        </tr>
        @foreach (var story in Model.UserStories)
        {
            <tr>
                <td>@story["FormattedID"]</td>
                <td>@story["Name"]</td>
                <td>@story["Description"]</td>
                <td>@story["TaskEstimateTotal"]</td>
            </tr>
        }
    </table> 
```

html 标签显示为文本，例如：

```
<DIV>As a Marketing Analytics And Data Manager</DIV> 
```

我已经尝试对其进行编码和解码，但它们都没有产生所需的响应。对其进行编码会将其转换`<`为`&lt;`文本类型。

```
<td>@HttpUtility.HtmlEncode(story["Description"])</td> 
```

希望这只是我错过的一些简单的事情！

除非我应该去掉标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:13:10.533

你有没有尝试过：

```
<td>@Html.Raw(story["Description"])</td> 
```

MSDN： http: [//msdn.microsoft.com/en-us/library/gg480740 (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg480740(v=vs.98).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:13:18.383

你可以做：

```
<td>@Html.Raw(story["Description"])</td> 
```

Razor html 默认对字符串进行编码。

# javascript - 如何在javascript中验证一个文本框中的字符和数字

> ID：13447097
> 
> 赞同：-1
> 
> 时间：2012-11-19T03:07:15.647
> 
> 标签：javascript

文本框的最大大小为 11。我想将前 4 个字符打印为字母，将接下来的 7 个字符打印为数字。请只用javascript给我一个解决方案。

```
function Myfunction2() {
    var x2 = document.getElementById('text').value;
    var re = /^[A-za-z]+$/;
    for (i = 0; i < 4; i++) {
        y = x2charAt(i);
        if (re.test(x2.value)) {
            alert("please enter char only");
        }
    }
}

function Myfunction() {
    var x = document.getElementById("text").value;
    for (i = 5; i < 11; i++) {
        y = x.charAt(i);
        if (y == " " || isNaN(y)) {
            alert("not numeric");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:10:43.173

根据预期模式对其进行测试：

```
/^[a-z]{4}[0-9]{7}$/i.test(value); 
```

您也可以将其绑定到实际的输入元素，并在每次击键时对其进行测试：

```
​var supercode = document.getElementById("supercode"),
    rePattern = /^[a-z]{4}[0-9]{7}$/i;

supercode.addEventListener("keyup", function(e){
    this.style.borderColor = rePattern.test(this.value) ? "green" : "red" ;
}, false); 
```

演示：http: [//jsfiddle.net/RfMK7/](http://jsfiddle.net/RfMK7/)

# sql - ORA-00907: 缺少右括号

> ID：13447099
> 
> 赞同：0
> 
> 时间：2012-11-19T03:07:33.903
> 
> 标签：sql, oracle

我似乎无法弄清楚为什么会发生此错误。

这是我的代码：

```
SELECT DISTINCT c.cid 
  FROM customers c
 WHERE EXISTS ( SELECT DISTINCT t.aid 
                  FROM transactions t
                 WHERE EXISTS ( SELECT a.balance 
                                  FROM accounts a 
                                 WHERE t.cid = c.cid
                                   AND a.aid = t.aid
                                   AND ((sysdate - a.date_opened) > 365)
                                 ORDER BY a.balance DESC
                               )
              ); 
```

错误在最后一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:16:00.497

有2个问题：

1.  您不能从不是直接父级别的子查询中引用表 - 内部的子查询`EXISTS`看不到表`c`，因此条件`t.cid = c.cid`错误
2.  我在`ORDER BY`内部`EXISTS`子查询中看不到任何含义。它也可能是非法的，但我不确定。

我建议您将查询从 2 重写`EXISTS`为 2 `JOINS`。就像：

```
SELECT cid 
  FROM (SELECT c.cid, a.balance
          FROM customers c,
               accounts a,
               transactions t 
         WHERE t.cid = c.cid
           AND a.aid = t.aid
           AND sysdate - a.date_opened > 365)
 ORDER BY balance DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:10:44.740

旁注：您的子查询将需要对 进行全表扫描`accounts`，即使您在 上有索引`date_opened`，因为您正在 WHERE 子句中进行数学运算。

对于每一行，Oracle 都必须计算这个表达式：

```
((sysdate - a.date_opened) > 365) 
```

取值`sysdate`并减去打开的日期，然后将其与 365 进行比较。它必须单独检查每一行。

但是，如果您以代数方式将该表达式更改为

```
sysdate - 365 > a.date_opened 
```

那么它只需要`sysdate-365`在查询开始时评估一次表达式，然后可以将其与索引进行比较`a.date_opened`并使用索引进行索引扫描。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T06:28:11.450

您在**AND ((sysdate - a.date_opened) > 365)中犯了错误**

像这样使用：-

**AND (sysdate - a.date_opened) > 365**

# ios - 用户使用完我的 iOS 应用后，将之前的应用放回前面

> ID：13447101
> 
> 赞同：3
> 
> 时间：2012-11-19T03:08:11.730
> 
> 标签：ios

我的 iOS 4/5/6 应用程序旨在短暂使用。我希望用户单击“完成，现在离开”按钮，该按钮将他们带回他们在我的出现之前使用的应用程序。

有没有办法让我的 iOS 将自己置于后台，同时将前一个应用程序返回到前面？

在 iPad 上，用户可以通过在屏幕上水平滑动四指来获得这种效果。但该手势并不是一个完整的解决方案，因为 (a) 该手势在手持设备上不起作用，并且 (2) 没有多少用户知道该手势。我想以编程方式将以前的应用程序返回到前面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T03:29:40.697

> 我希望用户单击“完成，现在离开”按钮

该按钮是主页按钮。

> 我想以编程方式将以前的应用程序返回到前面。

没有用于切换到另一个应用程序的公共 API。不过，用户有许多在应用程序之间切换的选项。除了你提到的滑动手势外，他们还可以用四指向上滑动来进入最近的应用程序列表，或者双击主页按钮以获得相同的效果，或者点击一次主页按钮返回 Springboard . 用户而不是应用程序应该控制哪个应用程序在前台。他们这样做的方式应该是从一个应用程序到另一个应用程序的标准。我可以理解想要让用户的生活更轻松，但是你想要做的事情是不可能使用可用的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T03:28:51.493

如果之前的应用程序不是您的财产，或者您不知道[URL 方案](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)是否已包含在您知道的之前的应用程序中，我认为您不能这样做。

[通过 URL Scheme 启动应用程序](http://www.coronalabs.com/blog/2011/12/22/using-app-url-schemes-in-ios/)！

# php - 对象属性范围

> ID：13447106
> 
> 赞同：0
> 
> 时间：2012-11-19T03:08:51.557
> 
> 标签：php, codeigniter

我想在类中声明一个私有变量，我想在我的所有类中访问它而不使用参数将它传递给另一个函数。我有以下情况

```
class One extends CI_Controller {
    private $name;
    public function index () {
        $name = $this->input->post('name');
        $this->validate();
    }

    public function validate() {
        echo $name;
    }
} 
```

但是我上面的 $name 变量给了我一个错误消息`variable $name is undefined`。

如果是的话，在PHP中是否有可能，那么如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T03:11:28.730

只是 using 只是`$name`函数范围内的局部变量。

如果使用`$this->name`，则可以访问控制器的私有属性。

请参阅[属性^(*文档*)](http://php.net/language.oop5.properties)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T03:13:25.123

当你在一个类中声明一个变量时，你将不得不使用`$this->`它来调用它。

因此，您在方法中调用它的方式是使用`$this->name`而不是`$name`

# qt - 具有自定义形状的 QPushButton

> ID：13447108
> 
> 赞同：2
> 
> 时间：2012-11-19T03:09:18.903
> 
> 标签：qt, qtstylesheets, qpushbutton

我想让一些按钮看起来像你在 Skype 中看到的按钮。如何`QPushButton`使用自定义形状设置样式？我没有这样做的任何想法。所以我需要一些建议。例如，我希望我`QPushButton`看起来像这张[图片](http://meship.com/Blog/wp-content/uploads/2011/07/virtual-call-center.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:37:06.403

You can use `QT-Stylesheets` to style a `QPushButton` whatever the way you like it to be. You can style the `border-image` property of the `QPushButton`, there is an example [here](http://doc.qt.digia.com/qt/stylesheet-examples.html#qpushbutton-and-images) explains just that. Go through [documentation](http://doc.qt.digia.com/qt/stylesheet.html). Specially study [css box-modal](http://doc.qt.digia.com/qt/stylesheet-customizing.html).

But your requirement can be fulfilled simply by setting following style sheet to your `QPushButton`. You have to prepare PNG images using an image editing software like GIMP, so the image will have a transparent background.

```
QPushButton#myPushButton
{
    background-color: transparent;
    background-image: url(":/transparent_image.png");
    background-repeat: none;    
    border: none;
} 
```

Furthermore, you might want to style `:hover` and `:pressed` pseudo states as well by setting two additional images, so it will look more like a button in terms of its behavior.

```
QPushButton#myPushButton:hover
{
   background-image: url(":/transparent_image_hover.png");
}

QPushButton#myPushButton:pressed
{
   background-image: url(":/transparent_image_pressed.png");
} 
```

I have virtually spoon-fed the answer for you, so keep in mind that it is necessary to be specific when looking for an answer. So people can help you with more focused answers.

# c++ - 当构造函数或类型转换发生时？

> ID：13447109
> 
> 赞同：0
> 
> 时间：2012-11-19T03:09:22.863
> 
> 标签：c++

> **可能重复：**
> [什么是复制省略和返回值优化？](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)

根据昨天问的问题，我写了一个简单的测试代码：

```
class A
{
public:
    A(int)
    {
        cout<<"constructor\n";
    }
    A(const A&)
    {
        cout<<"copy constructor\n";
    }
};

int main()
{
    A(0);
    cout<<"------------------------\n";
    A(A(0));
    cout<<"------------------------\n";
    A(A(A(0)));
    cout<<"------------------------\n";
    A(A(A(A(0))));
    cout<<"------------------------\n";
    A(A(A(A(A(0)))));
    cout<<"------------------------\n";
    return 0;
} 
```

输出：

```
constructor
------------------------
constructor
------------------------
constructor
copy constructor
------------------------
constructor
copy constructor
------------------------
constructor
copy constructor
copy constructor
------------------------ 
```

所以当构造函数调用或类型转换发生时说清楚是很奇怪的，有人可以解释一下吗？

# jquery - 删除父母的父母或特定标签

> ID：13447112
> 
> 赞同：0
> 
> 时间：2012-11-19T03:09:56.207
> 
> 标签：jquery, dom

我有一些这样的生成输出：

```
<figure>
    <a href="location.php"><img src=""></a>
</figure> 
```

当我应用这个 JS 时：

```
$(funciton() {
    $('img').each(function(){
        if($(this).attr('src') == null || $(this).attr('src') == '')
            { 
                $(this).parent().remove();
            }
}); 
```

它删除了 img 标签，它是一个标签的父标签，但在页面上留下了这个输出：

```
<figure>
"&#8203"            ​
</figure> 
```

如何删除 paren't 的父标签或只是修剪它以便不存在空白实体？当图形标签中有任何内容时，它的高度和 css 的边距为 1px。我可以更改css，但想弄清楚这一点，非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:12:35.067

如果您想确保`<figure>`在图像标签没有的情况下父标签为空`.src`，您可以这样做：

```
$(function() {
    $('img').each(function() {
        if(!this.src) { 
            $(this).closest("figure").empty();
        }
     }
}); 
```

`.empty()`删除元素中的所有子节点和任何文本。

请注意，我还简化了您对`.src`. 首先，这里不需要使用 jQuery，其次，一个测试可以检查任何空值。

如果您真的希望`<figure>`标签不占用页面上的空间，您也可以`.hide()`在其上执行 a。

# html - 仅样式化无序列表的第一级

> ID：13447115
> 
> 赞同：1
> 
> 时间：2012-11-19T03:10:26.467
> 
> 标签：html, css

我有一个这样的列表：

```
 <ul id="main">
        <li>January
            <ul>
                <li>test</li>
                <li>test2</li>
            </ul>
        </li>

        <li>February
            <ul>
                <li>test</li>
                <li>test2</li>
            </ul>
        </li>
    </ul> 
```

我只想影响 li 的第一级 - 我认为这个 css 可以解决问题，但它似乎无法正常工作。

```
#main > li {
cursor: pointer;
list-style-image: url('plus_sign.gif');
} 
```

子列表旁边仍然有一个加号......我会做错什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:43:49.400

你可以试试这个css，它看起来像你想要的。

```
#main{
    cursor:pointer;
    list-style-image:url('http://www.w3schools.com/cssref/sqpurple.gif');
}
#main ul{
    /*If you don't want the hallow circles*/
    list-style:none;
    /*if you want the hollow cirles, remove list-style and uncomment list-style-image:none
     list-style-image:none;
    */
} 
```

它将仅在 1 月和 2 月显示 plus_sign.gif（在这种情况下为 sqpurple.gif）。见[小提琴](http://jsfiddle.net/aCj9A/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:19:27.387

这应该有效：

```
 #main  li {
    list-style-image: none;
  }    
  #main > li {
    cursor: pointer;
    list-style-image: url('plus_sign.gif');
  } 
```

list-style-image 是一个可继承的属性，因此它从其父级获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:16:40.377

添加另一条规则来处理 li 的所有其他情况：

```
ul > li{
    color: red;
    /*specifically*/
    list-style-image: none;
} 
```

给 css 一个默认值，这样您的特定情况将是一个例外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:49:18.870

创建另一种样式并修改 ul 以使用该类：

```
.main > li {
cursor: pointer;
list-style-image: url('imageurl');
}
.main > li > ul > li {
cursor: auto;
list-style-image: none;
}

<ul class="main">
    <li>January
        <ul>
            <li> test</li>
            <li>test2</li>
        </ul>
    </li>

    <li>February
        <ul>
            <li>test</li>
            <li>test2</li>
        </ul>
    </li>
</ul> 
```

# iphone - endTurnWithNextParticipant 弃用

> ID：13447121
> 
> 赞同：1
> 
> 时间：2012-11-19T03:11:00.977
> 
> 标签：iphone, objective-c, ios, xcode

以为我解决了弃用问题，但现在发现我没有。我的游戏无法正常运行。

在新的 endTurnWithNextParticipant 中，下一个玩家也有一个超时（他们必须在那里回答的时间间隔）我已将其设置为 86400（一天中的秒数）

然而，游戏根本不再发送回合，我可以将第二个设置为例如 1，然后它会发送回合，但仍然会在被弃用之前使用它。即使我将间隔设置为 0。

我认为问题在于转牌被发送给刚刚发送转牌的玩家。

这是代码：（注释行是我使用的，但现在已弃用）

```
[currentMatch endTurnWithNextParticipants:currentMatch.participants turnTimeout:86400 matchData:data completionHandler:^(NSError *error){
    //[currentMatch endTurnWithNextParticipant:nextParticipant matchData:data completionHandler:^(NSError *error) {
        if (error) {
            NSLog(@"%@", error);
            statusLabel.text = @"Oops, there was a problem.  Try that again.";
        } else {
            statusLabel.text = @"Your turn is over.";
            textInputField.enabled = NO;
        }
    }]; 
```

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:29:00.177

而不是`currentMatch.participants`，您可能想尝试

```
[[NSArray alloc] initWithObjects:nextParticipant,nil] 
```

这样，唯一被发送的播放器是`nextParticipant`，就像你在不推荐使用的代码中一样。

# java - 我找不到导致异常的原因

> ID：13447123
> 
> 赞同：4
> 
> 时间：2012-11-19T03:11:07.480
> 
> 标签：java, file, csv

我是一个 java 菜鸟，也是这个网站的新手，所以请在这里多多包涵。如果我在发布此内容时做错了什么，请告诉我，对于我所做的任何事情或任何错误的语法，我提前道歉。

我需要在 java 中编写一个自定义 CSV 解析器，它不会在引号内分隔逗号。我不能使用任何与 CSV 类相关的东西。1,2,3,4 -> 1 2 3 4 a,"b,c",d -> ab,cd

无论我尝试什么，我总是会遇到异常

```
import java.io.*;
import java.util.*;

public class csv
{
    public static void main(String[] args)
    {
        File file = new File("csv.test");
        BufferedReader buf = null;

        try
        {
            buf = new BufferedReader(new FileReader(file));

            String str;

            while ((str = buf.readLine()) != null)
            {
                String[] values = null; // array for saving each split substr
                int c1 = 0; // counter for current position in string
                int c2 = 0; // counter for next space in array to save substr
                int c3 = 0; // location of last comma or quotation for substring creation
                int i = 0; // counter used later for printing

                while (c1 <= str.length())
                {
                    char x = str.charAt(c1);
                    String s = Character.toString(x);

                    if (c1 == str.length())
                    {
                        values[c2] = str.substring(c3, (c1 - 1));
                    }
                    else if (s == ",")
                    {
                        values[c2] = str.substring(c3, (c1 - 1));
                        c1++;
                        c2++;
                        c3++;
                    }
                    else if (s == "\"")
                    {
                        c1++;
                        c3 = c1;
                        while (s != "\"")
                            c1++;
                        values[c2] = str.substring(c3, (c1 - 1));
                        c1 = c1 + 2;
                        c2++;
                        c3 = c1;
                    }
                    else
                    {
                        c1++;
                    }
                    while (i < values.length)
                        System.out.println("\"" + values[i] + "\"");
                }
            }
        }
        catch (Exception e)
        {
            System.out.println("Error locating test file");
        }
    }
} 
```

我尝试删除所有逻辑并测试它是否与文件 io 相关。读起来很好，所以我归结为它与逻辑有关。我看了一遍，找不到任何问题。我什至让一个朋友看过它，说它看起来不错。异常在哪里抛出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:14:11.347

你没有`values`在这一行初始化你，`String[] values = null;`因此当你使用它时它会失败，即在 list `values[c2] = str.substring(c3, (c1 - 1));`。

要解决此问题，请`values`使用适当的长度初始化数组，例如`String[] values = new String[SIZE];`. 可能您需要使用`str.length()`as `SIZE`of 数组。

同样在您的比较`else if (s == ",")`中，您正在比较 String using `==`，这是不正确的。相反，您可以将`x`自身用作`else if (x == ',')`.

**编辑：**您的以下条件将`c1`无限增加，因为您没有更改`str(x after correction as advised)`任何地方的值。

旧状态：

```
 while (s != "\"")
                  c1++; 
```

按照建议进行更改后（仍然错误，因为 x 在 while 循环中没有更改）：

```
 while (x != '"')
                  c1++; 
```

**请更正循环逻辑。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:15:38.600

与具体问题无关，但`s == ","`您应该这样做`",".equals(s)`，与其他字符串相等检查类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:19:34.177

这不是您的异常的原因，但它显然是不正确的：

```
 while (s != "\"")
        c1++; 
```

这是不正确的，原因有两个：

*   由于`c1++`不会改变循环条件，这将永远循环。
*   当您应该使用`==`/来比较字符串时，您正在使用. 您似乎在其他地方也犯了这个错误。`!=``equals(...)`

* * *

要找出导致异常的原因，您应该做的第一件事是打印出堆栈跟踪。添加`e.printStackTrace();`到 catch 块。

或者更好的是，将其更改为 catch `IOException`。捕捉`Exception`是个坏主意……除非您要记录/输出完整的堆栈跟踪。

# mongodb - 在 OSX 上测试 mongo 复制

> ID：13447125
> 
> 赞同：5
> 
> 时间：2012-11-19T03:11:26.913
> 
> 标签：mongodb

在两个不同的终端中，我使用以下命令启动 mongod：

```
mongod --dbpath 1 --port 27001 --smallfiles --oplogSize 50 --logpath log.1 --replSet test
mongod --dbpath 2 --port 27002 --smallfiles --oplogSize 50 --logpath log.2 --replSet test 
```

（数据子目录 1 和 2 已经创建）。

我进入第三个窗口并针对其中一个 mongod 实例运行 mongo shell

```
mongo --port 27001 
```

在外壳中，我将配置设置为

```
cfg = { _id: "test", members: [ {_id:0, host: "localhost:27001"}, {_id:1, host:"localhost:27002"} ] } 
```

然后运行：

```
use admin
rs.initiate(cfg) 
```

来自外壳的响应是：

```
{
"startupStatus" : 4,
"info" : "hotest",
"errmsg" : "all members and seeds must be reachable to initiate set",
"ok" : 0
} 
```

例如，端口 27001 上的日志文件报告：

```
Sun Nov 18 18:32:56 [rsStart] trying to contact macbookpro.local:27001
Sun Nov 18 18:32:56 [rsStart] couldn't connect to macbookpro.local:27001: couldn't connect to server macbookpro.local:27001
Sun Nov 18 18:32:56 [rsStart] replSet can't get local.system.replset config from self or any seed (yet) 
```

看来 rs.initiate(cfg) 无法连接到端口 27001 上的 mongod 实例。但是当我在没有 --replSet 的情况下运行 mongod 时，mongo shell 连接得很好。

目前尚不清楚我在哪里搞砸了，但我敢打赌这很明显。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T22:42:46.680

找到了！

事实证明，当使用 brew 在 OSX 上安装 MongoDB 时，会在 /usr/local/etc/mongo.conf 中创建一个配置文件。在这个文件中有一行：

# 只接受本地连接 bind_ip = 127.0.0.1

好吧，如果您查看日志，则 rsStart 错误是：

```
Sun Nov 18 18:32:56 [rsStart] trying to contact macbookpro.local:27001
Sun Nov 18 18:32:56 [rsStart] couldn't connect to macbookpro.local:27001: couldn't connect to server macbookpro.local:27001
Sun Nov 18 18:32:56 [rsStart] replSet can't get local.system.replset config from self or any seed (yet) 
```

如果我 ping macbookpro.local 返回的 IP 地址是 192.168.41.1。192.168.41.1 <> 127.0.0.1 所以 mongod 拒绝回应。从配置中删除此行允许成功设置复制。

嘘。我真是个白痴。看了几个小时，一直认为连接到网络时的机器名称是 127.0.0.1。让这成为你的一个教训——不要变老！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T07:00:32.267

找出主机名可能会很痛苦，因此与其传递配置对象并尝试找出您的主机名应该是什么`rs.initiate()`，不如在第一台主机上不带任何参数。这将创建所需的配置，为您发现正确的值。它将打印出它创建的配置的“有效”版本。这是一个示例：

```
> rs.initiate()
{
    "info2" : "no configuration explicitly specified -- making one",
    "me" : "adamc-mbp.local:27001",
    "info" : "Config now saved locally.  Should come online in about a minute.",
    "ok" : 1
} 
```

复制并粘贴“me”字段并使用新的端口号，传递给`rs.add()`：

```
sotest:PRIMARY> rs.add("adamc-mbp.local:27002")
{ "ok" : 1 } 
```

现在看看你的配置：

```
sotest:PRIMARY> rs.conf()
{
    "_id" : "sotest",
    "version" : 2,
    "members" : [
        {
            "_id" : 0,
            "host" : "adamc-mbp.local:27001"
        },
        {
            "_id" : 1,
            "host" : "adamc-mbp.local:27002"
        }
    ]
} 
```

你应该很高兴:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T01:32:18.900

我遇到过同样的问题。不知何故，mongo 将 localhost 解析为您机器的名称 macbookpro.local。

只需将此行添加到您的 /etc/hosts 文件中：

```
127.0.0.1           macbookpro.local 
```

# iphone - 在其他 2 个 UIView 之间插入一个 UIView 以创建一个包含 3 个 UIView 的列表

> ID：13447127
> 
> 赞同：0
> 
> 时间：2012-11-19T03:11:33.310
> 
> 标签：iphone, ios5, uiviewanimation

我在我的应用程序中有一个`ViewController`需要`UIScrollView`

在这`UIScrollView`我有很多`UIButton`。当我按下我触摸的按钮下方的一个按钮时，我想显示一个`UIView`动画他的入口。就像手风琴一样，像这样：[Jquery demo](http://jqueryui.com/accordion/ "jQuery 示例")

目前我有这种方法来打开“手风琴”：

```
-(void) openView:(UIView *)view inFrame:(CGRect)final {
  CGRect frame = view.frame;
  frame.size.height = 0;
  frame.origin = finalFrame.origin;
  view.frame = frame;

  [self.buttonsView addSubview:view];

  [UIView animateWithDuration:1.0 animations:^{
    view.frame = finalFrame;
  } completion:^(BOOL finished){
  }];
} 
```

这`self.buttonsView`是`UIView`我在我的`scrollview`.

使用这种方法，我可以在按钮后插入视图。但问题是：我无法打开按钮之间的空间来放大我的`buttonsView`

有没有办法做到这一点？

```
button1
button2
button3 
```

点击按钮 2：

```
button1
button2
a view
button3 
```

再次单击按钮 2：

```
button1
button2
button3 
```

**而且我不能使用`UITableView`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:19:59.293

请试试这个

//在.h文件中声明一个变量

```
IBOutlet UIButton *btnpreviouslySelected;
CGRect customerButtonFrame,inventoryButtonFrame,templatesButtonFrame; 
```

考虑 btnCustomer、btnInventroy、btntemplate 是您的三个按钮并将它们分别分配为 1、2、3 标记。viewsearch 是您要在两个按钮之间添加的新视图

//在.m

```
//in view did load method set following 
btnpreviouslySelected=nil;
customerButtonFrame=btnCustomer.frame;
inventoryButtonFrame=btnInventory.frame;
templatesButtonFrame=btnTemplates.frame;

-(void) RepositioningFrameMneuTree
{
    btnCustomer.frame=customerButtonFrame;
    btnInventory.frame=inventoryButtonFrame;    
    btnTemplates.frame=templatesButtonFrame;    
}

-(void) RepositioningMenuTree:(int)iCaseValue
{
    if (iCaseValue==1) 
    {
        btnInventory.center=CGPointMake(btnInventory.center.x,btnInventory.center.y+300);

    }

    if (iCaseValue==2 || iCaseValue==1) 
    {
        btnTemplates.center=CGPointMake(btnTemplates.center.x,btnTemplates.center.y+300);

    }
}

-(IBAction) buttonClicked:(UIButton*)btn;
{       

        if(btnpreviouslySelected==btn)
        {

            //set to default location
            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.5];
            //here remove search view
            [viwSearchView removeFromSuperview];

            [self RepositioningFrameMneuTree];           
            [UIView commitAnimations];
            return;
        }

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];      

        //assign previousbutton to new button
        btnpreviouslySelected=btn;
            [self RepositioningFrameMneuTree]; 

            viwSearchView.frame=CGRectMake(0,btn.frame.origin.y+45,viwSearchView.frame.size.width,viwSearchView.frame.size.height);

            //add search view on your view
            [self.buttonsview addSubview:viwSearchView];

        //-------------------------------------------
        //change the location of button below selected button to show the search button
        switch (btn.tag) {

            case 1:

                [self RepositioningMenuTree:1];
                break;
            case 2:

                [self RepositioningMenuTree:2];
                break;
            case 3:
                //dont do any thing
                break;

            default:
                break;
        }
        //end animation
        [UIView commitAnimations];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:10:51.347

修改您的`openView:inFrame:`方法以同时为您点击的按钮下方的所有按钮的框架设置动画。

# javascript - 如何在 jquery 代码中重构这些回调？

> ID：13447130
> 
> 赞同：0
> 
> 时间：2012-11-19T03:12:05.980
> 
> 标签：javascript, jquery, html

代码如下：

```
<label>radio 1 </label>
<input type="radio" onchange="$('input2').show()" id="radio1" name="RadioGroup">
<label>radio 2 </label>
<input type="radio" onchange="$('input2').show()" id="radio2" name="RadioGroup">
<label>radio 3 </label>
<input type="radio" onchange="$('input2').hide()" id="radio3" name="RadioGroup">

<input type="text" id="input2"> 
```

这些代码可能有两个缺点：

1.  的 jquery 代码`onchange`必须写三遍
2.  **只有当我单击/更改**其中一个`onchange`时才会执行代码。换句话说，这些代码在**页面初始化时****不会**被执行。例如，如果在页面初始化时正在检查 ，仍然会显示 ..**`radio`****`radio3``input2`******

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:51:00.210

我做了一个快速的 jsfiddle 来重新组织一下。

1）为显示输入的任何单选按钮分配一个类 2）为隐藏输入的任何单选按钮分配另一个类 3）在管理操作的单独 js 文件中的 jQuery document.ready 中附加一个事件。

小提琴：http: [//jsfiddle.net/Kw4gu/2/](http://jsfiddle.net/Kw4gu/2/)

HTML

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<label>radio 1 </label>
<input type="radio" class="open" name="radioGroup" id="radio1">
<label>radio 2 </label>
<input type="radio" class="open" name="radioGroup"   id="radio2">
<label>radio 3 </label>
<input type="radio" class="close" name="radioGroup"   id="radio3">

<input type="text" id="input2"> 
```

​JS

```
$(document).ready(function() {
    $(".open").on("change", function(event) {

        $('#input2').show();
    });

    $(".close").on("change", function(event) {

        $('#input2').hide();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:15:29.063

您可以做的一件事是通过 Javascript 设置事件处理程序，而不是像那样将它们捆绑在 HTML 中。使用 jquery 选择器选择单选按钮，然后在一个地方添加事件。

通过 Javascript 做事还可以让您在何时初始化代码、如何运行等方面更加灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T04:02:44.380

您可以通过几种不同的方式来执行此操作，但在 jQuery 中它相当简单。我已经稍微更新了您的 HTML（为两个相似的按钮提供了一个通用类以便于选择，并且我为所有按钮提供了相同的名称，因此它们属于同一个按钮组）。

```
<label>radio 1 </label>
<input type="radio" class="radioButton" id="radio1" name="buttonGroup">
<label>radio 2 </label>
<input type="radio" class="radioButton" id="radio2" name="buttonGroup">
<label>radio 3 </label>
<input type="radio" id="radio3" name="buttonGroup">

<input type="text" id="input2">​ 
```

现在，您必须编写选择器以根据选择的按钮隐藏或显示该字段。此处显示：

```
$(function() {
    $('#input2').hide();

    $('.radioButton').on('change', function() {
        $('#input2').show();
    });
    $('#radio3').on('change', function() {
        $('#input2').hide();
    });
});​ 
```

注意，我一开始`$('#input2').hide();`只是为了隐藏它，但我通常会在 CSS 中做类似的事情。

在任何情况下，您都可以在[这个 jsFiddle 示例中看到一个这样的示例](http://jsfiddle.net/4YpdY/1/)。******

# c++ - C++ 引用和指针

> ID：13447131
> 
> 赞同：1
> 
> 时间：2012-11-19T03:12:11.763
> 
> 标签：c++, pointers, reference

我的程序中有以下用于二十一点游戏的代码：

```
Player *p;
Deck *d = new Deck();
Hand *playerHand = new Hand(), *dealerHand = new Hand();
p = get_Simple();  //This returns a pointer to an instance of a Simple Player for my game
Card dealerCard = d->deal();
p->draw(dealerCard, playerHand); 
```

画被定义为

```
virtual bool draw(Card dealer, const Hand &player); 
```

当我尝试运行此代码时，出现以下错误：

```
error: no matching function for call to 'Player::draw(Card&, Hand*&);
note: candidates are: virtual bool Player::draw(Card, const Hand&); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:14:36.687

快速解决方法是将调用与签名匹配：

```
p->draw(dealerCard, *playerHand); 
```

正确的方法是处理您的代码并摆脱动态分配和原始指针，用智能指针替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:17:07.967

错误信息很清楚（看了几次之后）：

> 错误：没有匹配函数调用'Player::draw(Card&, Hand*&); 注意：候选人是：virtual bool Player::draw(Card, const Hand&);

在代码中，您尝试将 a`Card`和 a传递`Hand*`给函数，但编译器没有找到接受这些的重载。最接近的是一个接受 a`Card`和 a的函数`const Hand&`。

您需要取消引用指针以获取对象：

```
p->draw(dealerCard, *playerHand); 
```

或者考虑是否需要通过指针保存所有对象。如果避免使用指针，代码会简单得多。

# objective-c - 使用 UIControlStateHighlighted 获取 UIButton 的标题集

> ID：13447132
> 
> 赞同：0
> 
> 时间：2012-11-19T03:12:14.997
> 
> 标签：objective-c, ios, uibutton

如果按钮的标题设置为`UIControlStateHighlighted`，那么以后如何访问该标题？该`currentTitle`方法不起作用，因为它只返回按钮当前显示的内容。

例如，假设按钮的标题设置如下：

```
[myButton setTitle:title forState:UIControlStateHighlighted]; 
```

然后如何从中检索此标题`myButton`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:36:23.960

How about:

```
NSString *highlightedTitle = [myButton titleForState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:18:10.007

这成功了：

```
myButton.highlighted=YES;
NSString *title=[myButton currentTitle];
myButton.highlighted=NO; 
```

# asp.net - 如何从asp.net中的sql数据制作动态tabcontainer菜单？

> ID：13447133
> 
> 赞同：1
> 
> 时间：2012-11-19T03:12:18.213
> 
> 标签：asp.net, asp.net-ajax

我正在尝试在 tabcontainer 中制作动态菜单，但不知道该怎么做。我有客户和公司详细信息的 sql 数据，我创建了一个 tabcontainer 来在 tabcontainer 和 tabpanel 上显示公司详细信息和个人详细信息，称为公司、个人详细信息，并尝试在 tabpanel 中创建每个人的详细信息。

我的想法是在选项卡面板内创建另一个选项卡容器，并使用 sql 数据在顶部或侧面创建另一个菜单，但我找不到任何关于它的线程。我曾尝试在谷歌和此处搜索，但我无法真正找到与我的问题相关的问题。我可以看到其他线程来创建动态菜单，但没有关于 tabcontainer 的内容。

如果有人能告诉我如何在 tabcontainer 中动态创建菜单或知道与我的问题相关的其他线程的链接，将不胜感激。

谢谢

# php - 当数据太大时，php 中的 $_POST 为空

> ID：13447135
> 
> 赞同：4
> 
> 时间：2012-11-19T03:12:34.390
> 
> 标签：php, post

我们使用 php 开发了一个 Web 应用程序。在客户将其迁移到 VMware 之前，它一直运行良好。因为在 POST 中发送的一些表单没有被发送，我们发现只有在发送超过一定数量的数据时才会发生这种情况。只有在 VMware 环境中运行应用程序时才会发生这种情况。

请帮忙！！

更新：在 apache_error.log 文件中，我发现以下错误：PHP 警告：未知：输入变量超过 1000。要增加限制，请更改 php.ini 中的 max_input_vars。在第 0 行的未知中，引用者：.....

这个参数只能在 php.ini-development 和 php.ini-production 中找到，它被注释了，所以我删除了 ;; 并增加了值并在 php.ini 文件中添加了值，但正如我在 phpinfo() 中看到的任何建议一样，这一切都被忽略了？

PHP 版本 5.3.13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:10:22.440

php.ini 中的`max_input_vars`注释很可能意味着它正在使用默认值。您可以通过取消注释来覆盖它。在这种情况下，评论并不意味着忽略。

该`post_max_size`参数还应该在您的 php.ini 文件中进行配置。确保在测试之前和更改该文件中的任何内容之后重新启动 apache。在您的 php.ini 文件中，找到显示的行

```
post_max_size = 2M 
```

（或任何最大尺寸）

并将其增加到8M或类似的东西。

您的 php.ini 文件可能位于也可能不在

```
/etc/php5/apache2/php.ini 
```

它确实因发行版而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:22:00.527

`post_max_size`将php.ini 中的值更改 为`post_max_size = 2M`

或通过 .htaccesss 添加这个

```
php post_max_size = 2M 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:15:22.310

通过增加 php.ini 文件中 max_input_vars 的值来解决它。这值得知道，其中一个症状是 POST 数组是空的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:17:53.517

我的猜测是您的发行版配置为处理

```
post_max_size 
```

高于标准的 2MB 并且您发送的“超过”2MB。

您可以根据服务器配置使用自定义 php.ini 或自定义“php_value post_max_size 8MB”来覆盖它。

# windows - IIS Windows 身份验证

> ID：13447136
> 
> 赞同：1
> 
> 时间：2012-11-19T03:12:37.107
> 
> 标签：windows, authentication, iis, single-sign-on

有一个第三方系统，它的认证是通过IIS Windows Authentication(Integration AD)。现在，我想用sharepoint实现单点登录。我知道 Sharepoint 2010 有一个 SSS 服务，我可以配置它。我的问题：虽然我可以得到账号和密码，但是如何将它们提供给第三方系统，然后在系统的指定网页上登录。

# grails - encodeAsSHA() 函数从何而来

> ID：13447138
> 
> 赞同：1
> 
> 时间：2012-11-19T03:13:01.643
> 
> 标签：grails, grails-2.0

我从 Grails 开始，我正在关注[这里](http://www.infoq.com/minibooks/grails-getting-started)的 InfoQ 电子书。

这本书在第 9 章中讲授了身份验证以及如何加密密码。下面显示了它是如何完成的，但我不明白它是如何工作的。

首先，我们需要创建一个类`grails-app/utils/SHACodec.groovy`：

```
import java.security.MessageDigest
    class SHACodec{
      static encode = { target->
        MessageDigest md = MessageDigest.getInstance('SHA')
        md.update(target.getBytes('UTF-8'))
        return new String(md.digest()).encodeAsBase64()
      }
} 
```

然后在我的`User domain`，我需要添加一个闭包`beforeInsert`：

```
class User{
...
String password

def beforeInsert = {
  password = password.encodeAsSHA()
  password
  }
...
} 
```

* * *

代码工作正常，但我没有看到关于如何添加类以`grails-app/utils/SHACodec.groovy`启用`encodeAsSHA()`在.`password``User domain`

由于`SHACodec`该类只分配了一个闭包`encode`，而从不提及`encodeAsSHA()`. `password`(a )是如何`String`无处使用它的？

我肯定在这里遗漏了一些东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:37:49.723

Grails 编解码器类可能包含编码闭包、解码闭包或两者兼有。当 Grails 应用程序启动时，Grails 框架会从 grails-app/utils/ 目录动态加载编解码器。

该框架在 grails-app/utils/ 下查找以约定 Codec 结尾的类名。例如，Grails 附带的标准编解码器之一是 HTMLCodec。

如果编解码器包含一个编码闭包，Grails 将创建一个动态编码方法并将该方法添加到 Object 类，其名称代表定义编码闭包的编解码器。例如，HTMLCodec 类定义了一个 encode 闭包，因此 Grails 将其命名为 encodeAsHTML。

# php - jquery next() 在刚刚添加的元素上

> ID：13447161
> 
> 赞同：0
> 
> 时间：2012-11-19T03:15:47.010
> 
> 标签：php, jquery, next

这就是我想要发生的事情：

*   有人在输入字段中输入文本
*   当他们敲击`ENTER`键盘时，它会使用该功能在当前输入字段之后添加一个输入字段`after()`，然后聚焦该输入字段，以便他们可以继续输入并一遍又一遍地执行此操作

这是我的代码不起作用：

```
$('.table-todo input[type=text]').live('keypress', function (e) {   
    if (e.which == 13) 
    {
        $parent = $(this).parent('.field');     
        $.get('projects-add-task.php?show_delete=yes', function (data) { $parent.after(data); }, 'html');
        $(this).next('input[type=text]').focus();
    }
}); 
```

继承人的内容`projects-add-task.php`：

```
<div class="field">
<input type="text" name="task[]" />
<a href="#" title="Add Task Below" class="todo-add"><img src="images/icon-todo-add.png" alt="" onmouseover="this.src='images/icon-todo-add-h.png'" onmouseout="this.src='images/icon-todo-add.png'" /></a>
<?php if ($_GET['show_delete'] == 'yes') { ?>
<a href="#" title="Delete This Task" class="todo-delete"><img src="images/icon-todo-delete.png" alt="" onmouseover="this.src='images/icon-todo-delete-h.png'" onmouseout="this.src='images/icon-todo-delete.png'" /></a>
<?php } else { ?>
<img src="images/icon-todo-delete-o.png" alt="" />
<?php } ?>
<div style="clear: both;"></div>
</div> 
```

它只是没有关注通过添加的输入，`$.get`我不知道如何修复它。它正在将下一个输入字段添加到页面中，但它没有聚焦它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:19:18.103

你可以这样做：

```
 $parent = $(this).parent('.field');    
    $this = $(this);
    $.get('projects-add-task.php?show_delete=yes', function (data) { 
        $parent.after(data); 
        $parent.next().children('input[type=text]').focus();
    }, 'html'); 
```

问题是下一个输入元素在`$(this).next('input[type=text]').focus();`执行时实际上并没有创建，因为您正在使用 AJAX 调用来创建它。您还需要父母的下一个元素。

# javascript - Jquery UI Dialog + Jquery在取消时重复其功能

> ID：13447162
> 
> 赞同：0
> 
> 时间：2012-11-19T03:15:47.273
> 
> 标签：javascript, jquery, jquery-ui

请帮我解决这个
问题 Q1：当我点击取消按钮时，所有功能似乎都在重复调用自己，我只在 IE 中遇到这个

我的 HTML

```
<button class="btnCaller">diag caller 1</button>
<button type="button" class="btnCaller">diag caller 2</button >

<table id="diagMenu" style="display:none">
    <tr><td>
        <input id="anyField"></input>
        <button id="cmdInsertNewProject">Ok</button >
        <button id="cmdCancelNewProject">Cancel</button >
        </td></tr>  

</table> 
```

我的 JS

```
$(document).ready(function() {
        $('.btnCaller').click(function() {
        fnAddNewProject()
        AddNewProject_ShowUI()
    })
});

function fnAddNewProject() {
    $('#diagMenu').dialog({
        autoOpen: false,
        width: 650,
        maxHeight: 1000,
        maxWidth: 600,
        modal: true,
        resizable: false,
        title: "Insert New Project",
        position: "center"
    })

    $('#btnRun').click(function() {
       alert("do other stuff")
    })
    $('#cmdInsertNewProject').live('click', function() {
        InsertNewProject();
    })

    $('#cmdCancelNewProject').live('click', function() {
        $('#diagMenu').dialog('close');
    })
}  

function InsertNewProject() {
    if ($('#anyField').val() == '') {
        alert("Fill up field to continue") //dont close the dialog
        return false
    } else {
        //reset and exit
        $('#anyField').val('')
        $('#diagMenu').dialog('close');
    }
}

function AddNewProject_ShowUI() {
    $('#diagMenu').dialog('open');
} 
```

我在 jsFiddle 上有这个 [http://jsfiddle.net/aeris/Qn9HE/](http://jsfiddle.net/aeris/Qn9HE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:42:31.133

您注册事件处理程序的方式存在问题。click 事件处理程序应该只添加一次，所以这可以在`ready()`方法中完成。

此外，您所做的一切都`fnAddNewProject()`应该只做一次，而不是每次都做，`click`这样您就可以将函数调用移动到`ready()`

你可以看到它在[这里](http://jsfiddle.net/Qn9HE/19/)工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:19:37.227

改变

```
.live('click', 
```

至

```
.click( 
```

我认为这应该可以解决您的问题。

编辑：

根据[http://api.jquery.com/live/](http://api.jquery.com/live/)，似乎不推荐使用 .live() 命令。尝试使用 .on() 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:53:13.637

因此，正如已经指出的那样，您向对话框注册处理程序的方式导致每次事件发生时都重新注册它。结果，您会反复看到弹出窗口（因为每次都是新注册）。

话虽如此，您可以利用 jQueryUI 对话框的按钮属性将按钮（和相应的功能）附加到对话框，而不必担心所有这些事件注册。我没有完成它，但我[在这里更新了你的例子](http://jsfiddle.net/Qn9HE/20/)（你会注意到 - 它更简单）。请注意对话框中的“按钮”属性。

```
$('#diagMenu').dialog({
    autoOpen: false,
    width: 650,
    maxHeight: 1000,
    maxWidth: 600,
    modal: true,
    resizable: false,
    title: "Insert New Project",
    position: "center",
    buttons: {
        "OK": function() {
            InsertNewProject();
            $(this).dialog("close");
        },
        "Cancel": function() {
            $(this).dialog('close');
        }
    },
    Cancel: function() {
        $(this).dialog("close");
    }
}); 
```

# data-structures - 修改 Dijkstra 算法以获得两个节点之间的最短路径

> ID：13447163
> 
> 赞同：7
> 
> 时间：2012-11-19T03:15:57.027
> 
> 标签：data-structures, graph, graph-theory, dijkstra

所以我看到了与此类似的问题，但并不完全是我正在寻找的问题。我需要修改 Dijkstra 算法以返回顶点 S（源）和顶点 X（目标）之间的最短路径。我想我已经知道该怎么做了，但我需要一些帮助。这是我修改的伪代码。

```
 1  function Dijkstra(Graph, source, destination):
 2      for each vertex v in Graph:                                // Initializations
 3          dist[v] := infinity ;                                  // Unknown distance function from 
 4                                                                 // source to v
 5          previous[v] := undefined ;                             // Previous node in optimal path
 6      end for                                                    // from source
 7      
 8      dist[source] := 0 ;                                        // Distance from source to source
 9      Q := the set of all nodes in Graph ;                       // All nodes in the graph are
10                                                                 // unoptimized - thus are in Q
11      while Q is not empty:                                      // The main loop
12          u := vertex in Q with smallest distance in dist[] ;    // Start node in first case
13          remove u from Q ;
14          if dist[u] = infinity:
15              break ;                                            // all remaining vertices are
16          end if                                                 // inaccessible from source
17          
18          for each neighbor v of u:                              // where v has not yet been 
19                                                                 // removed from Q.
20              alt := dist[u] + dist_between(u, v) ;
21              if alt < dist[v]:                                  // Relax (u,v,a)
22                  dist[v] := alt ;
23                  previous[v] := u ;
24                  decrease-key v in Q;                           // Reorder v in the Queue
25              end if
26          end for
27      end while
28  return dist[destination]; 
```

代码取自维基百科并修改：[http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

这看起来正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T05:52:11.263

Dijkstra's algorithm does not need to be modified, it is an all-pairs shortest path algorithm. It seems like you are trying to find the shortest path between two specific nodes - Dijkstra handles this fine.

If you want something that's designed specifically for an unweighted, undirected graph, which is what it seems like you're doing, I would suggest doing a BFS.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T06:03:22.487

After finding the shortest-path starting from the single SOURCE, we need begin with DESTINATION to backtrack its predecessor, in order to print the path.

```
Print-Path(G,s,v)
{
    if(v==s)
        print s;
    else if (pi[v]==NULL)       
        print "no path from "+s+" to "+v;
    else{
        Print-Path(G,s,pi[v])
        print v;
    }
} 
```

codes above courtesy to Introduction to Algorithm, MIT press

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T20:34:54.793

解决这个问题的最好方法是考虑从每个可达节点返回源的路径，通常用 v 表示。当你更新每个给定节点的距离时，跟踪它在通往 v 的路径上的直接后继节点。那个节点是最短距离到v树中给定节点的父节点。当您构建了该父映射时，要找到从 v 到 w 的最短路径，以相反的顺序构建路径：w, parent[w], parent[parent[w]], ...

# java - 将 X509 证书转换为 PKCS12

> ID：13447165
> 
> 赞同：2
> 
> 时间：2012-11-19T03:16:23.013
> 
> 标签：java, security

我是 Java 安全领域的新手。我经历了所有可能的线程来找到我的答案，但没有用。我有 X509Certificate，我需要将此证书转换为 PKCS12 格式。我如何使用 java api 实现这一点。任何代码片段都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-30T06:13:33.253

由于我发现 Java KeyTool 难以使用，我们使用 KeyStore Explorer ( [https://keystore-explorer.org/](https://keystore-explorer.org/) ) 来查看/创建/更改 Java KeyStore。要实现您想要的，您可以创建一个新的 PKCS12 密钥库并导入 X509 证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:19:50.740

假设您已经在 PKCS12 密钥库中拥有您的私钥条目，您可以使用`keytool` with`-importcert`命令。它应该看起来像

```
keytool -importcert -file <certificate.cer> -keystore <keystore.p12> -storetype pkcs12 -alias <alias> 
```

[在http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/keytool.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/keytool.html)上使用 keytool 的详细信息

如果您将私钥放在 JKS 密钥库中，则可能首先需要将该条目导入 PKCS12 存储中，使用`-importkeystore`

```
keytool -importkeystore -srckeystore abc.jks -destkeystore abc.p12 -deststoretype pkcs12 
```

*当您将不存在的文件作为`destkeystore`时，将创建一个新文件。*

# java - 当某些组件调整大小时，BoxLayout 中的组件会移动

> ID：13447167
> 
> 赞同：0
> 
> 时间：2012-11-19T03:16:28.877
> 
> 标签：java, swing, resize, layout-manager, boxlayout

```
public class LabelResizing2 {

    public static JPanel createSliderPanel(
            int min, int max, int curr)
    {       
        /*outer panel*/
        final JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS)); 
        panel.setBorder(BorderFactory.createRaisedBevelBorder());       

        final JLabel valueLabel = new JLabel();
        valueLabel.setBorder(BorderFactory.createLineBorder(Color.BLACK)); 

        /*set up slider*/
        final JSlider slider = new JSlider(JSlider.VERTICAL, min, max, curr);
        slider.setBorder(BorderFactory.createLineBorder(Color.BLACK)); 

        panel.add(valueLabel); 
        panel.add(slider);

        /*slider move event*/
        slider.addChangeListener(new ChangeListener() {

            public void stateChanged(ChangeEvent event) {

                valueLabel.setText(Integer.toString(slider.getValue()));
            }

        });

        valueLabel.setText(Integer.toString(curr));
        return panel; 
    }

    public static void main(String[] args) {
        JFrame gui = new JFrame("Label Resizing");
        gui.setMinimumSize(new Dimension(500, 500));
        gui.add(createSliderPanel(-100, 100, 0)); 
        gui.setVisible(true); 

    }

} 
```

这里的问题是，随着标签从“99”调整到“100”以及从“0”调整到“-1”等，滑块会到处移动。

几个问题：

1.  为什么会四处弹跳？
2.  如果我投入

    `valueLabel.setSize(100, 100);` 它完全没有任何作用。为什么？

    `valueLabel.setMinimumSize(100,100);` 会阻止它弹跳，但实际上不会调整标签的大小。为什么？

3.  我发现的最佳解决方案是去`slider.setAlignmentX(Component.LEFT_ALIGNMENT);`~~这是一个好的解决方案吗？~~`CENTER_ALIGNMENT`但是，这对or不起作用`RIGHT_ALIGNMENT`，这是怎么回事？

4.  如果我们稍微修改一下并将 valueLabel 放在面板中。

：

```
final JPanel labelPanel = new JPanel(); 
final JLabel valueLabel = new JLabel();
valueLabel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
labelPanel.add(valueLabel); 
labelPanel.setBorder(BorderFactory.createLineBorder(Color.RED));
panel.add(labelPanel); 
panel.add(slider); 
```

即使 labelPanel 没有调整大小（valueLabel 在其中调整大小），滑块仍会四处移动。这里发生了什么？布局管理器是否也在查看嵌套组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:25:03.687

> 1 为什么会反弹？

这就是这个特定布局管理器的本质。随着组件的`preferredSize`更改，布局管理器正在更新布局。

> 2 如果我输入
> 
> valueLabel.setSize(100, 100); 它完全没有任何作用。为什么？
> valueLabel.setMinimumSize(100,100); 会阻止它弹跳，但实际上不会调整标签的大小。为什么？

在布局管理器的控制下更改组件的大小没有任何效果，因为布局管理器会在重新布局子组件时调整组件的大小。

`preferred/minimum/maximumSize`是布局管理器可以用来确定如何最好地执行其各个布局的“建议”，他们没有义务以任何方式使用它们。

> 3 我发现的最佳解决方案是使用 slider.setAlignmentX(Component.LEFT_ALIGNMENT);。这是一个好的解决方案吗？

我猜是这样，但是*“请注意，这些只是提示，某些布局管理器可能会忽略”*

> 4 如果我们稍微修改一下并将 valueLabel 放在面板中。

现在，不是组件开始直接受布局管理器影响，而是每个面板都影响它的父布局管理器，最终结果，一些问题

**更新示例**

在这种情况下，你可以作弊一点......

```
public class BadLayout03 {

    public static void main(String[] args) {
        new BadLayout03();
    }

    public BadLayout03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestLayout());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestLayout extends JPanel {

        public TestLayout() {
            setLayout(new GridBagLayout());

            final JLabel valueLabel = new JLabel("000");
            final JSlider slider = new JSlider();

            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    StringBuilder sb = new StringBuilder(Integer.toString(slider.getValue()));
                    while (sb.length() < 3) {
                        sb.insert(0, "0");
                    }
                    valueLabel.setText(sb.toString());
                }
            });

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 0.75;
            gbc.anchor = GridBagConstraints.WEST;
            valueLabel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
            add(valueLabel, gbc);
            gbc.gridx = 1;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(slider, gbc);
        }
    }
} 
```

# java - 抽象关键字的位置

> ID：13447171
> 
> 赞同：0
> 
> 时间：2012-11-19T03:16:43.090
> 
> 标签：java, syntax, abstract-class

> **可能重复：**
> [Java 中的修饰符关键字顺序](https://stackoverflow.com/questions/10299067/modifier-keyword-order-in-java)

我正在使用 netbeans IDE，并且正在检查 JAVA 的各种特性。通常我声明一个抽象类如下

```
public abstract class ClassName 
```

但是下面的声明似乎也没有产生任何错误

```
abstract public class ClassName 
```

上述两种声明有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:24:19.150

没有区别，但是，我认为`public abstract class ClassName`对大多数人来说更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:18:04.173

没有区别。您可以按任何顺序指定限定符（public、abstract 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:21:54.883

唯一的区别是实践，我更喜欢将它写/读为

```
public abstract class ClassName { 
```

# javascript - jQuery Ajax 调用在有效 URL 上失败

> ID：13447172
> 
> 赞同：1
> 
> 时间：2012-11-19T03:16:55.580
> 
> 标签：javascript, jquery, ajax, web-services, rest

我正在尝试从 HTML/JavaScript 应用程序访问 REST Web 服务。我正在通过 Apache HTTPD 2.2 访问 Web 应用程序和 Web 服务。当直接在浏览器中调用时，Web 服务 GET 方法确实有效（执行并返回数据）。当尝试从 Web 应用程序调用时，Web 服务永远不会收到请求。

Web 服务 URL 是

```
http://127.0.0.1/pbws/all/ 
```

调用它的网页是

```
http://127.0.0.1/~myusername/phonebook/ 
```

我不相信我的问题是 Wikipedia ( [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy) ) 上解释的同源策略我对 Web 应用程序和被调用的应用程序使用相同的主机、协议和端口网络服务。

失败的调用是：

```
getAll = function (callback) {
   $.ajax({
       type: "GET",
       url: "http://127.0.0.1/pbws/all/",
       dataType: "json",
       async: true,
       success: function (data, textStatus, jqXHR) {
          callback(data);
       },
       error: function (jqXHR, textStatus, errorThrown) {
          console.dir(jqXHR);
          alert('getAll error: ' + textStatus);
       }
   });
}; 
```

永远不会调用成功，只会调用错误。设置断点后，jqXHR 不包含我可以看到的任何有用信息，textStatus = "error" 并且 errorThrown 为空白。Chrome 开发人员工具/网络选项卡显示状态为“（失败）”。

我已经在 Windows 7 上使用 Chrome 23 和 Firefox 16 对此进行了测试。关于问题可能是什么或如何进一步调试的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:28:47.883

是 appcache 导致我的 jQuery Ajax 调用失败。在 index.html 中注释掉 appcache 指令后，REST WS 调用工作正常。

我现在正在测试[使用 HTML5 的 appcache 功能时如何允许 json 请求中的建议？](https://stackoverflow.com/questions/9740854/how-do-i-allow-json-requests-when-using-html5s-appcache-feature)

# html - 客户端宽度不对

> ID：13447175
> 
> 赞同：2
> 
> 时间：2012-11-19T03:17:09.183
> 
> 标签：html

我正在制作一个移动网站。

我使用了这个元标记

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

这是我的设备和他们展示的“clientWidth”

```
.iPhone4(640x960), Safari Browser : 320 x 480
.LG L7(480x800), Google Chrome, FireFox : 320 x 480
.HTC Desire HD (480x800), Google Chrome, FireFox: 320 x 480
.Samsung Galaxy S2 (480x800), Google Chrome, FireFox : 320 x 480 
```

总结：移动网页在其他设备、浏览器上运行，但客户端宽度是一样的。那么如何使用全屏设备访问我的网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:27:39.890

不要在那里使用元标记来查找设备宽度，而是尝试使用 Javascript 来输出`document.width`或`screen.width`.

其中之一应包含您要查找的号码。

通过设置初始和最大比例，我认为用户无论如何都无法缩放。在这种情况下，width=device-width 似乎是多余的，因为您的内容可以使用 style="width: 100%" 或类似的技巧来填充整个屏幕。这对你有意义/有用吗？

# objective-c - viewForAnnotation 返回 nil 时抛出错误

> ID：13447177
> 
> 赞同：0
> 
> 时间：2012-11-19T03:17:30.807
> 
> 标签：objective-c, ios, ios6

所以我已经实现了我的 viewForAnnotation

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
static NSString *identifier = @"id";

if ([annotation isKindOfClass:[infl8Node class]]) {
    NSLog(@"Creating a pin");
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    return annotationView;
}

return nil;
} 
```

但是我仍然遇到这个错误：

```
2012-11-18 22:12:35.608 Infl8[5960:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[infl8Node coordinate]: unrecognized selector sent to instance 0x846f460' 
```

有谁知道可能导致此错误的原因？我已经将其追溯到注释属于 MKUserLocation 类的情况。

编辑：这是 infl8Node.h 文件：

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface infl8Node : NSObject <MKAnnotation>

@property (nonatomic, strong) NSString *accountName;
@property (nonatomic, strong) NSString *status;
@property (nonatomic, strong) CLLocation *location;
@property (nonatomic, strong) NSDictionary *address;

- (id) initWithDictionary:(NSDictionary *)dict;
- (MKMapItem *) mapItem;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:36:41.240

实现`MKAnnotation`协议的类必须实现`coordinate`属性。

该`infl8Node`课程似乎没有这样做，这就是您收到该`unrecognized selector`错误的原因。

至少，该类需要实现一个`coordinate`方法，该方法返回与其位置相关的坐标。

# c++ - 在 C++ 中跟踪随机发生的 C0000005 访问冲突有哪些有用的提示？

> ID：13447180
> 
> 赞同：2
> 
> 时间：2012-11-19T03:18:01.007
> 
> 标签：c++, memory, pointers, access-violation, heap-corruption

我在这里、MSDN 以及通过谷歌通过其他一些论坛进行了一些搜索，试图找到任何类型的解决方案，但到目前为止我被卡住了。

我一直在寻找一个星期，试图追踪我的 C++ 程序中的访问冲突错误。我不能在这里发布代码，因为它受到一些 IP 限制，但基本上，它是一个循环，大约每 100 毫秒运行一次，从 TCP 连接读取字节并将它们放在 std::queue 的后面。

在我注意到一个特定的字节序列通过后，我从队列中删除 x 个字节并将它们作为内部协议中定义的消息处理。

发生的事情是，在我的应用程序内部的某个地方，队列正在损坏并使应用程序崩溃。因此，将它与它是访问冲突的事实结合起来，它一定是某个地方的一个狡猾的指针。

我曾尝试使用 VS2005 调试器和 Windbg 来找到它，我有调用堆栈要查看，但它没有多大帮助。我可以从中得出的结论是，原因是我的内部队列损坏了。它崩溃的原因是因为消息的标头被发送以进行解析，但是因为它已损坏，所以一切都失败了。

然后我尝试了 Intel Thread Checker，但在这个应用程序中使用太慢了，因为我的程序是同步多线程系统的一部分。

有时它会运行 300 次读取……有时它可以读取 5000 次……有时它可以在崩溃之前读取 10000 次。

我可以尝试哪些其他诊断途径？我是否在这里遗漏了一些我应该已经检查过的简单内容？据我所知，任何新的东西都有一个匹配的删除，我正在使用 Boost Librarys for Shared Pointers 和长寿命对象上的自动指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:34:14.430

使用 SEH（结构化异常处理）找出哪个部分引发了 AV。

## 来自 MSDN 的 C++ 示例代码中的 SEH。

```
#include <stdio.h>
#include <windows.h>
#include <eh.h>
void SEFunc();
void trans_func( unsigned int, EXCEPTION_POINTERS* );
class SE_Exception
{
private:
    unsigned int nSE;
public:
    SE_Exception() {}
    SE_Exception( unsigned int n ) : nSE( n ) {}
    ~SE_Exception() {}
    unsigned int getSeNumber() { return nSE; }
};
int main( void )
{
    try
    {
        _set_se_translator( trans_func );
        SEFunc();
    }
    catch( SE_Exception e )
    {
        printf( "Caught a __try exception with SE_Exception.\n" );
    }
}
void SEFunc()
{
    __try
    {
        int x, y=0;
        x = 5 / y;
    }
    __finally
    {
        printf( "In finally\n" );
    }
}
void trans_func( unsigned int u, EXCEPTION_POINTERS* pExp )
{
    printf( "In trans_func.\n" );
    throw SE_Exception();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:08:31.183

随机崩溃通常是由堆损坏引起的，很难找到。过去几年我处理过几个堆损坏问题，我记得，其中一个问题花了我整个周末的时间才找到。这里有一些建议：

1.  首先尝试应用验证程序。详细信息在：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd371695](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695(v=vs.85).aspx) (v=vs.85).aspx 。
2.  Gflags： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff549557](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549557(v=vs.85).aspx) (v=vs.85).aspx 。使用它来启用页面堆验证。
3.  解决方案 1 和 2 都对您的整个程序使用堆验证，因此您可能会遇到很多异常并减慢您的程序，但其中一些与您的问题无关。如果您知道代码的哪一部分有错误，您可以使用窗口 API _CrtSetDbgFlag 来启用堆验证，如下所示：

    `int tmpFlag = _CrtSetDbgFlag(_CRTDBG_REPORT_FLAG);

    tmpFlag |= _CRTDBG_CHECK_ALWAYS_DF;

    _CrtSetDbgFlag(tmpFlag); // 在 alloc 和 dealloc 时验证堆

    //你在这里编码，如果堆损坏，下次分配时会抛出异常。

    tmpFlag |= ~_CRTDBG_CHECK_ALWAYS_DF;

    _CrtSetDbgFlag(tmpFlag)// 不验证堆`

# c# - c# web服务不返回结果

> ID：13447192
> 
> 赞同：2
> 
> 时间：2012-11-19T03:19:24.340
> 
> 标签：c#, winforms, web-services, webmethod

我最近“完成”了一个新项目，除了有一个小问题。我没有拿回我的结果。

该项目通过 SOAP 客户端以及请求和响应类使用 c# Web 服务。该项目旨在预留一些东西，在这个演示中，它在电影院预留了一个座位。但是，当数据从 Windows 窗体客户端传递到 Web 服务时，什么都没有返回。我最近在执行 web 方法时停止了项目冻结。

这是调用 Web 服务的方法（方法签名只是临时的）

```
public void derp()
{
    var client = new SampleServiceSoapClient();
    var req = new GetReservationRequest();
    req.row = row;
    req.seat = seat;
    req.name = textNameRequest.Text;
    try
    {
        client.GetReservation(req);
    }
    catch (Exception err)
    {
        MessageBox.Show("Server Unavailable");
    }
} 
```

我在单独的线程上运行此方法以停止崩溃。该方法的输出应该通过响应对象返回，然后我将所述对象的值分配给表单上的文本框。但是，数据在返回之前会丢失。

网页方法如下

```
[WebMethod]
public GetReservationResponse GetReservation(GetReservationRequest req)
{
    object o = HttpContext.Current.Cache["Reservation"];
    if(o == null)
    {
        o = reservedSeat;
    }
    else
    {
        reservedSeat = (bool[,])o;
    }

    GetReservationResponse resp = new GetReservationResponse();
    string rowHolder = "A";
    int rowRequest = req.row;
    int seatCopy = 0;

    bool emptySeat = false;
    while (rowRequest < 12)
    {
        for (int seat = req.seat; seat < 16; seat++)
        {
            if (reservedSeat[req.row, seat])
            {
             //Loop back
            }
            else
            {
                emptySeat = true;
                seatCopy = seat;
                break;
            }
        }
        if (reservedSeat[req.row, 15])
        {
            seatCopy = 0;
            break;
        }
    }
    switch (rowRequest)
    {
        case 1: rowHolder = "A";
            break;
        case 2: rowHolder = "B";
            break;
        case 3: rowHolder = "C";
            break;
        case 4: rowHolder = "D";
            break;
        case 5: rowHolder = "E";
            break;
        case 6: rowHolder = "F";
            break;
        case 7: rowHolder = "G";
            break;
        case 8: rowHolder = "H";
            break;
        case 9: rowHolder = "I";
            break;
        case 10: rowHolder = "J";
            break;
        case 11: rowHolder = "K";
            break;
        case 12: rowHolder = "L";
            break;
        default: rowHolder = "None Specified";
            break;
    }
    int x = 0;
    if (!reservedSeat[rowRequest, seatCopy])
    {
        reservedSeat[rowRequest, seatCopy] = true;
        seatCopy++;
        //resp.row = rowRequest;
        x = seatCopy;
        seatCopy--;
        if (seatCopy.Equals(15))
        {
            rowRequest++;
        }
    }
    resp.row = rowHolder;
    resp.seat = x;   
    //row++            
    return resp;
} 
```

我不知道为什么数据在它回来之前就丢失了，但有些信息会很棒......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:44:26.467

此代码 rowrequest 在哪里增加？在我看来，你在这里有无限循环：

```
 while (rowRequest < 12)
        {
                for (int seat = req.seat; seat < 16; seat++)
                {
                    if (reservedSeat[req.row, seat])
                    {
                    //Loop back
                    }
                    else
                    {
                        emptySeat = true;
                        seatCopy = seat;
                        break;
                    }
            }
            if (reservedSeat[req.row, 15])
            {
                seatCopy = 0;
                break;
            }
        } 
```

# android - 如何在android中动态访问“strings.xml”中的值？

> ID：13447198
> 
> 赞同：2
> 
> 时间：2012-11-19T03:19:43.763
> 
> 标签：android

应用程序版本 2.3.3

这就是我要找的...

我在“values/strings.xml”中有几个字符串。我希望根据字符串的“名称”属性检索值并将其用于我的应用程序。xml 中应该使用哪个字符串的输入是动态的。这是一个例子......

我来自其他文件的输入 :: "A" => 这个值发生了变化。它可以是 A、B、C、D 中的任何值。

我在strings.xml中有不同的字符串，比如......

```
 <string name="A">AforApple</string>
<string name="B">BforBall</string>
<string name="C">CforCat</string>
<string name="D">DforDog</string> 
```

现在，我如何以编程方式获取名称为“A”的字符串的值（AforApple）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:23:01.343

```
String str = context.getResources().getString(R.string.A) 
```

或者你可以使用

```
textBox.setText(R.string.A); 
```

不要忘记导入包`com.yourpackackage.R`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T03:22:00.340

您需要使用 getResources() 方法：

```
String a = getResources().getString(R.string.A); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T10:02:05.427

只是为了记录，您还可以使用反射动态生成它。

```
int stringRes=R.string.class.getField("Here you put the dynamically generated input, such as A").getInt(null);
textView.setText(stringRes); 
```

这将根据输入从字符串 XML 返回资源 int 值，只要输入值“A”与 XML 中的字符串名称匹配，就会动态检索它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-10T15:38:33.743

要从 Android/Java 代码访问您在 XML 文件中定义的字符串资源/值，请使用 Android getString 方法，如下所示：

```
String A = getString(R.string.a_string); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T03:22:41.040

试试这个：

```
 String word = getResources().getString(R.string.A); 
```

看看[这里的链接。](https://stackoverflow.com/questions/2183962/how-to-read-value-from-string-xml-in-android)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-19T03:23:00.463

如果您的代码得到一个类似“A”的字符串，并且您试图在资源中动态查找与该名称匹配的字符串，我认为您不能这样做。

在需要访问这些字符串之前，您可能希望使用 arrays.xml 并从中构建一个 HashMap，而不是使用 strings.xml

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-22T09:01:12.113

您可以使用以下代码：

```
getText(R.string.A); 
```

> 基本上，您需要将资源 id 作为参数传递给 getText() 方法。

# objective-c - 如何正确地将消息发送到另一个类 Objective-C

> ID：13447199
> 
> 赞同：2
> 
> 时间：2012-11-19T03:19:48.430
> 
> 标签：objective-c, message, nsview, class-method

我的项目是 Mac OS X 的某种计时应用程序，看起来我很难理解如何使事情协同工作:)

到目前为止我做了什么：

**1.**一个`NSObject`类`TimeController`，它启动一个计时器并`NSTextEdit`以一秒为基础修改一些 s。

**2.**一个连接到自定义视图（图像右上角）的`NSView`类，我想用两条线画一个圆圈，代表我点击**Start**后的进度。`TimeCircle`

 ****3.**进口`TimeCircle.h`_`TimeController.m`

**4.**设置一个类方法，当**1**`+ (void) callFromOutside`中的计时器运行时我会发送一条消息。 这行得通。**`[TimeCircle callFromOutside];`**

 **这是中的方法`TimeCircle.m`：

```
+ (void) callFromOutside {
 [self setNeedsDisplay:YES];
} 
```

问题是`callFromOutside`正确接收消息但抱怨： **找不到类方法'+ setNeedsDisplay：'（返回类型默认为'id'）**

如何触发`callFromOutside`以正确更新我的圈子？

我显然做错了。我也尝试连接`TimeController`到我的`NSView`但是`TimeController`一个`NSObject`班级，我无法连接它。

有什么线索吗？

![在此处输入图像描述](../Images/437a8aacdd4bab6b10cb4bd17061606b.png)

罗纳德****

# php - 在php中上传文件限制

> ID：13447201
> 
> 赞同：0
> 
> 时间：2012-11-19T03:20:01.537
> 
> 标签：php

我已经编写了用于上传任何文件的代码，并且还应用了某些限制。但是现在当我尝试上传任何视频时，它没有显示任何错误，它只是显示一个空白屏幕。我已经为图像写了它。我对为别人写什么感到困惑。我的代码如下

```
 <?php
session_start();
define ("MAX_SIZE","4000"); 
define ("WIDTH","750"); 
define ("HEIGHT","563");

   function getExtension($str) 
{
    $i = strrpos($str,".");
    if (!$i) 
    {
         return "";
     }
    $l = strlen($str) - $i;
    $ext = substr($str,$i+1,$l);
    return $ext;
}

$errors=0;

        if(isset($_POST['Upload']))
        {

    $image=$_FILES['image']['name'];

    if ($image) 
    {
        $filename = stripslashes($_FILES['image']['name']);

        $extension = getExtension($filename);
        $extension = strtolower($extension);
            $size=getimagesize($_FILES['image']['tmp_name']);
            $sizekb=filesize($_FILES['image']['tmp_name']);

            if ($sizekb > MAX_SIZE*1024)
            {
                echo '<h1>You have exceeded the size limit!</h1>';
                $errors=1;
            }

            $image_n=time();
            $image_name=$image_n.'.'.$extension;
            //$image_name1="vimal".$extension;
            echo "<br> Image  Name " . $image_name;
            echo "<br> " . $_SESSION['Id'];
            $newname=$_SESSION['Id'] ."/upload/".$image_name;
            $copied = copy($_FILES['image']['tmp_name'], $newname);
            //$copied1 = copy($_FILES['image']['tmp_name'], $image_name1);

        if (!$copied) 
        {
            echo '<h1>Copy unsuccessfull!</h1>';
            $errors=1;
        }
        else
        {
                echo "Your databaase Insert Code Here";
            include ("config.php");

            $st = "insert into file_master values('".$_SESSION['Id'].$image_n ."','" . $extension . "','".$image_name."','".$_SESSION['Id'] ."/upload/".$image_name. "','".$_SESSION['Id']."','N')" ;
            echo "<br>". $st;
            try
            {
                mysql_query($st);
            }
            catch(Exception $e)
            {
                    echo $e->getMessage();
            }
}
    }   
        }
    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:30:19.713

虽然这不是一个答案，但我希望与您分享许多与您的代码和编码方式相关的有用技术。

**获取文件的扩展名**

```
$extension = end(explode('.', basename($completepath))); 
```

无需使用复杂的指令进行检查，只需获取文件名（basename），然后在句点上展开并获取生成数组的最后一项......

**检查文件是否正确上传**

```
if(is_file_uploaded($_FILES['nameofinput']['tmp_name'])){ 
```

这将使用标准的安全方法来检查文件是否真实存在。您应该使用的另一个功能是

```
move_uploaded_file($_FILES['nameofinput']['tmp_name'], $targetfilename); 
```

这将确保您只尝试移动您应该可以正常访问的文件，并且将证明对试图通过调整输入数据从您的系统中滥用的黑客来说是有效的。

# c - C Minishell 命令扩展打印乱码

> ID：13447205
> 
> 赞同：0
> 
> 时间：2012-11-19T03:20:58.250
> 
> 标签：c, shell, command, expansion

我正在用 C 编写一个 unix minishell，并且正在添加命令扩展。我的意思是我可以将命令嵌套在其他命令中，例如：

```
$> echo hello $(echo world! ... $(echo and stuff))
hello world! ... and stuff 
```

我想我大部分时间都在工作，但是它没有正确标记扩展字符串的结尾，例如，如果我这样做：

```
$> echo a $(echo b $(echo c))
a b c
$> echo d $(echo e)
d e c 
```

看到它打印 c，即使我没有要求它。这是我的代码：

msh.c - [http://pastebin.com/sd6DZYwB](http://pastebin.com/sd6DZYwB) expand.c - [http://pastebin.com/uLqvFGPw](http://pastebin.com/uLqvFGPw)

我有更多代码，但有很多，这些是我目前遇到问题的部分。我会试着告诉你我这样做的基本方法。

Main 在 msh.c 中，这里它从命令行或 shellfile 中获取一行输入，然后调用 processline (char *line, int outFD, int waitFlag)，其中 line 是我们刚刚得到的行，outFD 是输出文件的文件描述符，waitFlag 告诉我们如果我们 fork 是否应该等待。当我们从 main 调用它时，我们这样做：

```
processline (buffer, 1, 1); 
```

在 processline 中，我们分配一个新行：

```
char expanded_line[EXPANDEDLEN]; 
```

然后我们在 expand.c 中调用 expand：

```
expand(line, expanded_line, EXPANDEDLEN); 
```

在 expand 中，我们将字符从 line 复制到 expand_line，直到找到 $(，然后调用：

```
static int expCmdOutput(char *orig, char *new, int *oldl_ind, int *newl_ind) 
```

orig 是线，new 是扩展线。oldl_ind 和 newl_ind 分别是行和扩展行中的当前位置。然后我们通过管道递归调用 processline，将嵌套命令传递给它（例如，如果我们有“echo a $(echo b)”，我们将传递 processline“echo b”）。

这就是我感到困惑的地方，每次调用 expand 时，它是否分配了一块新的内存 EXPANDEDLEN 长？如果是这样，这很糟糕，因为我会很快用完堆栈空间（在大量嵌套的命令行输入的情况下）。在扩展中，我在扩展字符串的末尾插入了一个空字符，那么为什么它会打印过去呢？

如果你们需要更多代码或解释，请询问。其次，我将代码放在 pastebin 中，因为它有很多，而且根据我的经验，当我用代码填满几页时人们不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:37:04.650

你的问题在于`expCmdOutput`。正如您已经注意到的，在使用`read`. 你想要做的是手动终止字符串，通过添加类似

```
 buf[bytes_read] = '\0'; 
```

在您致电`read`第 29 行 (expand.c) 之后。Sicne 你需要 NUL 的空间，`BUF_SIZE - 1`当然你最多只能读取字节。

不过，您可能应该重新考虑之后执行的整个循环：

```
 /* READ OUTPUT OF COMMAND FROM READ END OF PIPE, THEN CLOSE READ END */
    bytes_read = read(fd[0],buf,BUF_SIZE);
    while(bytes_read > 0)
    {
            bytes_read = read(fd[0], buf, BUF_SIZE);
            if (bytes_read == -1) perror("read");
    }
    close(fd[0]); 
```

如果您的命令输出长于 BUF_SIZE，您只需再次读取到`buf`，覆盖您刚刚读取的输出。您在这里真正想要的是分配内存并使用`strcat`（或通过持有指向字符串末尾的指针以提高效率）追加到末尾。

# java - 用gson序列化嵌套类空对象？

> ID：13447212
> 
> 赞同：3
> 
> 时间：2012-11-19T03:21:39.360
> 
> 标签：java, object, null, gson

我知道如何序列化空对象。但是如果我有一个对象并且在另一个为空的对象内部怎么办？

例如

我的第一堂课：

```
public class Invoice {

   private Adresse adresse;
   private Double betrag;
   private Double Ust;
   private String zweck;

} 
```

我的第二堂课：

```
public class Adresse {
   private String name;
   private Ort ort;
} 
```

还有更多的子类...

如果我这样做：

```
Gson gson = new GsonBuilder().serializeNulls().create(); 
```

我只得到这个：

```
{"adresse":null,"betrag":null,"Ust":null,"zweck":null} 
```

而不是这个：

```
{"adresse":{"name":null,"ort"{"plz":null,"name":null}},"betrag":null,"Ust":null,"zweck":null} 
```

应该有一种自动化的方法。总会有其他子类。因此，手动方法是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:49:47.373

我让它工作了！使用 Java 反射！

这里的代码：

1.  **userDefined()**检查一个类是用户定义的还是原始的，可以根据需要进行自定义。

    ```
    public boolean isUserDefined(Class o) {
      if (o.isAssignableFrom(String.class)) {
        return false;
      }
      if (o.isAssignableFrom(Double.class)) {
        return false;
      }
      if (o.isAssignableFrom(Integer.class)) {
        return false;
      }
      if (o.isAssignableFrom(Boolean.class)) {
        return false;
      }
      if (o.isAssignableFrom(Short.class)) {
        return false;
      }
      if (o.isAssignableFrom(Float.class)) {
        return false;
      }
      if (o.isAssignableFrom(Long.class)) {
        return false;
      }
      return true;
    } 
    ```

2.  **getSetterMethod()**返回字段的设置方法。

    ```
    private static Method getSetterMethod(Object o, Field f) {       
        for (Method method : o.getClass().getMethods()) {
            String fieldname = "set" + f.getName();
            String methodname = method.getName().toLowerCase();
            if (fieldname.equals(methodname)) {
                return method;
            }
        }
        return null;
    } 
    ```

3.  最后，**invokeSetters()**调用用户定义的对象 setter 方法和子类的方法！是的。

    ```
     private void invokeSetters(Object o) throws IllegalArgumentException, IllegalAccessException, ClassNotFoundException, InstantiationException, NoSuchMethodException, InvocationTargetException {
        System.out.println("INVOKING THE OBJECT " + o.getClass().toString());
          for (Field f : o.getClass().getDeclaredFields()) {
            System.out.println("NOW IN THE FIELD: " + f.getName());
            f.setAccessible(true);
            Object obj = null;
            if (isUserDefined(f.getType()) && f.get(o) == null) {
                System.out.println("FIELD is USER DEFINED AND NULL");
                Class c = Class.forName(f.getType().getName());
                System.out.println("CLASS IS " + c.getName());
                obj = c.getConstructor().newInstance();
                System.out.println("GOING INSIDE " + obj.toString() + " NOW.");
                invokeSetters(obj);
            }
            if (obj != null) {
                Method setter = getSetterMethod(o, f);
                System.out.println("IM IN PARENT OBJECT " + o + " AND INVOKING METHOD " + setter.getName() + " WITH PARAMETER " + obj.toString());
                setter.invoke(o, obj);
                System.out.println("METHOD WAS INVOKED");
            }
          }
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:25:38.403

如果你想`adresse`拥有这些属性，那么你需要实例`adresse`化为：

```
 public class Invoice implements Serializable{
        private Adresse adresse = new Adresse();
        private Double betrag;
        private Double Ust;
        private String zweck;
    } 
```

# javascript - Rails 的综合 ajax 页面

> ID：13447225
> 
> 赞同：0
> 
> 时间：2012-11-19T03:23:35.970
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3

我有一个名为 ProductsController 的控制器。在该控制器中有几个动作，例如袜子和毛巾。我也有袜子和毛巾的意见。袜子和毛巾的视图页面内部具有完全相同的形式。我将在表单的两个文件中使用 ajax。由于两个视图中的表单完全相同，我认为创建多个 ajax js 文件以在调用 ajax 时调用操作是没有意义的。我怎样才能让袜子和毛巾都调用同一个 js.erb 文件而不是分别调用`socks.js.erb`和`towels.js.erb`？

我的控制器和动作袜。

```
def socks
 @socks = Socks.all

 respond_to do |format|
   format.html # index.html.erb
   format.json { render json: @socks }
   #ok, I get the line below is needed for ajax. Is there something I could add for
   #the action not to call socks.js.erb and instead a different file, say ajax.js.erb
   format.js
 end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:33:59.463

我想你在`render`这里寻找。使用它，您可以呈现另一个动作的模板/视图。请参阅文档：[布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)。

```
render 'products/show'
render :template => 'products/show'
render "/u/apps/warehouse_app/current/app/views/products/show" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:08:10.850

正如[Sergio所说，您可以使用](https://stackoverflow.com/users/125816/sergio-tulentsev)**render**命令完全做到这一点。基本上，在socks 和towels 动作中，当respond_to 用于JS 时，您可以渲染一个通用的ajax.js.erb 文件。

但是，由于您的评论，我正在添加此答案。看来您的袜子和毛巾方法以及形式和相关响应非常相似。如果是这样的话，为什么不使用一个动作来做同样的事情呢？基本上，您可以使用 URL 参数在 ProductsController 操作中指定产品的性质。

所以你会有类似的东西：

```
def ProductsController

   def index
       if params[:nature] == "socks"
          @socks = Sock.all
          respond_to do |format|
             format.html # index.html.erb
             format.json { render json: @socks }
             format.js
          end
       elsif params[:nature] == "towels"
          @towels = Towel.all
          respond_to do |format|
             format.html # index.html.erb
             format.json { render json: @towels }
             format.js
          end
       end
   end
end 
```

现在您需要 2 个视图文件 index.html.erb 和 index.js.erb ，您可以在那里再次检查参数值并显示相关集合。

这不是一个理想的解决方案，而是一个快速修复。

如果做不到这一点，您还可以在 ProductsController 中定义一个新的操作方法，并让两个表单都指向它。

# python - 计算一个键的一部分在字典python中出现的次数

> ID：13447226
> 
> 赞同：0
> 
> 时间：2012-11-19T03:23:51.663
> 
> 标签：python, list, dictionary, key, tuples

我有以下字典，我想计算键出现的次数，字典很大。

```
a = { (1,2):3, (1,3):5, (2,1):6 } 
```

我想要这个结果

```
1: 3 times
2: 2 times
3: 1 time 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T03:29:19.447

使用[`itertools.chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)和一个[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
collections.Counter(itertools.chain(*a.keys())) 
```

或者：

```
collections.Counter(itertools.chain.from_iterable(a.keys())) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T03:30:47.450

```
>>> from collections import Counter
>>> a = { (1,2):3, (1,3):5, (2,1):6 }
>>> 
>>> Counter(j for k in a for j in k)
Counter({1: 3, 2: 2, 3: 1}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T03:28:47.393

使用`itertools`和`collections.defaultdict`

```
In [43]: a={(1,2):3,(1,3):5,(2,1):6}

In [44]: counts = collections.defaultdict(int)

In [45]: for k in itertools.chain.from_iterable(a.keys()):
   ....:     counts[k] += 1
   ....:     

In [46]: for k in counts:
    print k, ": %d times" %counts[k]
   ....:     
1 : 3 times
2 : 2 times
3 : 1 times 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:28:25.970

首先，这不是代码编写服务。试着先写一些，然后问一个问题。

其次，作为免费赠品，在 Python 中：

```
import collections
s = collections.defaultdict(int)
for j, k in a.keys():
   s[j] += 1
   s[k] += 1
for x in s.keys():
   print x + ": " + s[x] + " times" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T03:29:19.057

```
from collections import Counter
items = Counter(val[2] for val in dic.values()) 
```

希望能解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T14:24:40.487

使用python 3.2

```
from collections import Counter
from itertools import chain  

res = Counter(list(chain(*a))) 
```

# ruby - 如何从哈希中删除密钥？

> ID：13447229
> 
> 赞同：0
> 
> 时间：2012-11-19T03:24:35.720
> 
> 标签：ruby, hash-of-hashes

我有一个代表一副纸牌的哈希值，我试图弄清楚如何从纸牌中删除一张特定的卡片。请让我知道我应该学习或阅读以提供帮助的任何建议或方法。

```
@deck_of_cards = {
  :hearts => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
              :queen => 10, :king => 10, :ace => 11},
  :spades => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
              :queen => 10, :king => 10, :ace => 11},
  :clubs => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
              :queen => 10, :king => 10, :ace => 11},
  :diamonds => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
              :queen => 10, :king => 10, :ace => 11}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:28:30.353

这很简单

```
def delete a, b
  @deck_of_cards[a].delete(b)
end

delete :hearts, :three

@deck_of_cards # => {:hearts=>{:two=>2, :four=>4, :five=>5, :six=>6, ... 
```

# haskell - Haskell快速检查问题

> ID：13447233
> 
> 赞同：1
> 
> 时间：2012-11-19T03:25:01.350
> 
> 标签：haskell, quickcheck

我正在使用 quickcheck 编写一个简单的测试。

```
import Test.QuickCheck

f :: Int -> Int 
f x
        | x < 0 = (-x)
        | otherwise = x 

main = do
        putStrLn "Testing"
        quickCheck ((\x -> ((f x) >= 0)) :: Int -> Bool) 
```

每当我通过 运行它时`$ runhaskell test.hs`，我都会看到两种不同的结果之一。要么我得到： 测试 +++ 好的，通过了 100 次测试。或者：我没有得到任何输出，程序终止。我无法对这种行为进行推理。

这是在 Quickcheck 2.5.1.1 和 ghc 7.4.2 上。

# git - 使用 git/info/exclude 删除未添加的文件和目录

> ID：13447234
> 
> 赞同：5
> 
> 时间：2012-11-19T03:25:02.097
> 
> 标签：git, gitignore

```
git version 1.7.11.7
Fedora 17 
```

你好，

我创建了一个新的 git 工作响应

```
git init 
```

我添加了一些文件和一些目录。

但是，根据我的环境，我有一些我想忽略的文件。我不想创建`.gitignore`文件，因为我不想将它添加到存储库中。只是我的本地人。

所以我想忽略我的`server/build`目录，所以我将它添加到我的`.git/info/exclude`文件中。

```
# exclude patterns (uncomment them if you want to use them):
 *.[oa]
 *~
 server/build 
```

server 是我初始化 git resposity 的根目录。

但是，当我执行 git status 时，我总是在我未添加的文件中获得这个目录。

```
# On branch dev
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
server/build/ 
```

我想从我的 git 状态中删除它。

我尝试了以下方法对我不起作用

```
git rm -r --cached server/build 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T03:38:30.747

你在模式之前留下了一个空格。删除它，它应该可以工作：

```
# exclude patterns (uncomment them if you want to use them):
*.[oa]
*~
server/build 
```

如果您的存储库没有，您也可以创建一个并忽略它自己 - 但无论如何`.gitignore`使用它确实更正确。`exclude`

# java - 引导播放应用程序

> ID：13447237
> 
> 赞同：0
> 
> 时间：2012-11-19T03:25:19.693
> 
> 标签：java, playframework, playframework-2.0, bootstrapping

我想在启动 Play 应用程序时运行一些代码。这似乎不起作用。有什么线索吗？

```
public class Global extends GlobalSettings {

    @Override
    public void onStart(Application app) {
        Logger.info("Foo Fee Fi");
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T05:17:04.987

您的 Global 类是否在默认包中？应该是，否则您必须在以下位置定义其位置`application.conf`：

```
# Global object class
# ~~~~~
# Define the Global object class for this application.
# Default to Global in the root package.
global=mypackage.MyGlobal 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T04:46:41.310

您可能扩展了错误的对象或将对象放入了错误的包中。有关更多详细信息，请查看有关[Java](http://www.playframework.org/documentation/2.0.4/JavaGlobal)或[Scala](http://www.playframework.org/documentation/2.0.4/ScalaGlobal)的 Global 对象的文档。

# java - Apache commons Fileutils

> ID：13447243
> 
> 赞同：1
> 
> 时间：2012-11-19T03:25:55.637
> 
> 标签：java, apache-commons

我下载了 apache commons FileUtils 来执行复制目录，并将它们添加到 eclipse 中的库下。当我`Fileutils.copyDirectory(s,d)`在下面说 eclipse 说“此行有多个标记 - 令牌“（”上的语法错误，删除这个令牌 - 令牌“）上的语法错误”时，删除这个令牌”。有人可以帮忙吗

```
import org.apache.commons.io.FileUtils;

Public class b {

    File s = new file("C://Tom//eso");         
    File d = new file("C://Tom//pos");

    FileUtils.copyDirectory(s,d);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:28:54.707

试试这个：

```
import org.apache.commons.io.FileUtils;

public class B {

    public static void main(String[] args) throws Exception {
        File s = new File("C:/Tom/eso");         
        File d = new File("C:/Tom/pos");
        FileUtils.copyDirectory(s,d);
    }

} 
```

您的代码中有几个错误：

*   类以大写字符开头 - 它是`File`，不是`file`。它是`class B`，不是`class b`（记住还要将文件重命名为`B.java`）
*   你不能使用双`/`字符，只有一个
*   代码必须驻留在方法中，而不是在类级别
*   是`public`，不是`Public`
*   你不是在处理异常，要么抛出它们，要么捕获它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:27:38.577

```
File s = new file("C://Tom//eso");  
File d = new file("C://Tom//pos"); 
```

`file`应该大写。应该是`new File(...`。

旁注：通常对于 Windows，路径看起来像`C:\\Tom\\eso`，你有正斜杠而不是反斜杠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T03:28:49.887

您正在尝试在方法主体之外调用方法...尝试更多类似的方法；

```
public class b {
    public static void main(String args[]) {
        File s = new File("C:/Tom/eso");         
        File d = new File("C:/Tom/pos");

        try {
            FileUtils.copyDirectory(s,d);
        } catch (IOException exp) {
            exp.printStackTrace();
        }        
    }
} 
```

只是为了强调...

*   `Public`应该`public`
*   `file`应该`File`
*   `//`应该是`/`或者`\\`（大多数人喜欢`/`）
*   执行代码必须从方法或静态初始化部分的上下文中执行

我还建议您花时间学习[Java 命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)，并通读[Trails Covering the Basics](http://docs.oracle.com/javase/tutorial/)部分下的教程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:32:42.267

两个错误。
第一的

```
File s = new file("C://Tom//eso");         
File d = new file("C://Tom//pos"); 
```

应该

```
File s = new File("C://Tom//eso");         
File d = new File("C://Tom//pos"); 
```

第二

```
FileUtils.copyDirectory(s,d); 
```

应该在主要方法中。

# list - 使用 GPU 创建二维数组中出现的不同数字的列表

> ID：13447244
> 
> 赞同：0
> 
> 时间：2012-11-19T03:25:58.303
> 
> 标签：list, cuda, numbers, gpgpu, multidimensional-array

例如，给定一个二维整数数组

3 3 1 1 1

3 3 3 1 1

3 3 3 3 1

3 3 3 2 2

3 3 7 2 2

是否有一种高效的 GPU 算法，可以生成所有出现数字的列表？例如

1 2 3 7

对于上面的二维数组。

该列表不需要排序（例如 3 2 1 7 也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:33:10.097

假设没有太大的整数范围需要处理（并且这些是非负整数），您可以创建一个新数组，该数组的长度与原始数组中可能的整数范围的长度相同，值初始化为零。

然后，当一个线程找到一个数字时，它会将数组的索引加一（所以如果我们看到整数 4，我们会做类似的事情`result[4]++`。我们不需要在这里同步，因为我们只关心是否此结果数组的给定索引的值是否为零。

当然，如果我们也期望负整数也可以这样做 - 我们只需要结果数组中的两倍空间。

# c - 使用 C 将数据文件存储到二维数组中

> ID：13447245
> 
> 赞同：0
> 
> 时间：2012-11-19T03:26:03.093
> 
> 标签：c, arrays, string, file

我正在尝试使用 C 将字符串数据文件存储到多维数组中。我的示例数据如下所示。我正在考虑使用下面的 char 声明来存储我的数据。如果还有其他方法，请告诉我。

```
char *array[6][10];

53,v42,p11,51097,310780,ok
56,v45,p11,260,1925,ok
68,v42,p11,51282,278770,ok
77,v50,p11,46903,281485,ok
82,v46,p12,475,2600,ok
84,v48,p12,433,3395,ok
96,v49,p14,212,1545,ok
163,v50,p20,373819,1006375,ok
204,v50,p26,36917,117195,ok
241,v70,p33,21777,91360,ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:30:32.940

看起来不错，如果您希望它是字符串。

我建议不要为每个字段分配一个字符串。相反，从文件中读取一行，为其分配一个字符串，标记逗号，并将指针存储在二维数组中。

或者实际上，如果您的数据文件很容易放入内存中，那么没有理由不阅读整个内容并进行标记。实际上，您只需将数组用作缓冲区的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:37:42.300

还有很多其他方法可以做到这一点；有些将取决于您是否已经了解了结构。

需要注意的一点：C 对数组使用“行优先”排序，因此大多数程序员会编写`char *array[10][6];`10 行，每行 6 列。

您可以决定不使用`char *`，而是允许每个字符串包含 10 个字符，并使用：

```
char array[10][6][10]; 
```

这将适合显示的数据（留出一点空间；对于显示的数据，第二个 10 可能小到 8）。它需要更少的动态内存管理。

或者，您可以定义一个表示线条的结构：

```
struct csv_line
{
    int  col1;
    char col2[4];
    char col3[4];
    int  col4;
    int  col5;
    char col6[4];  // Correct length uncertain...
}; 
```

然后有一个这些的一维数组：

```
struct csv_line array[10]; 
```

这或多或少是我的做法。请注意，该结构每行使用 24 个字节，而 in 中每行`char array[10][6][8];`使用 48 个字节，并且与 48 个字节的指针以及`char *`64 位机器上的版本的实际字符串和存储开销相比。在 64 位机器上，char 指针版本的总存储空间很容易达到每行 144 个字节。

显然，这种大小分析假设您对每个字符串都有单独的分配。如果您将每行数据读入单独分配的行，然后存储指向该行各部分的指针，则存储开销（显着）减少。很大程度上取决于您将如何使用数据。如果您要将看起来像数字的字段视为数字，那么我将使用该结构；它将在以后节省数据转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T05:37:48.617

我希望这个示例程序能帮助您解决您的问题。我使用了结构和 sscanf。这是解决这个问题的好方法。

```
#include <stdio.h>
struct data
{
    char date[100];
    char state[100];
    char profit[100];
    char revenue[100];
};

int main()
{
      char line[4096] = {'\0'};
      char t1[100], t2[100], t3[100], t4[100];
      struct data d[2];
      int i = 0;
      while(fgets(line, 4096, stdin) != NULL) {
              sscanf(line, "%[^','],%[^','],%[^','],%s", &t1, &t2, &t3, &t4);
              strcpy(d[i].date, t1);
              strcpy(d[i].state, t2);
              strcpy(d[i].profit, t3);
             strcpy(d[i++].revenue, t4);
     }
     i = 0;
     while(i<2){
             printf("%s %s %s %s\n", d[i].date, d[i].state, d[i].profit, d[i].revenue);
             i++;
     }
 } 
```

$> a./exe <文件

$> 猫文件

```
12/2/2012,TN,1200,14000
12/3/2012,KA,2333554,424 
```

# c# - 如何分配列表 没有它是对原始列表的引用 ?

> ID：13447248
> 
> 赞同：80
> 
> 时间：2012-11-19T03:26:41.723
> 
> 标签：c#, reference

例如

```
List<string> name_list1 = new List<string>();
List<string> name_list2 = new List<string>(); 
```

稍后在代码中：

```
name_list1.Add("McDonald");
name_list1.Add("Harveys");
name_list1.Add("Wendys");

name_list2 = name_list1; // I make a copy of namelist1 to namelist2 
```

因此，从这一点开始，我想继续在 name_list2 中添加元素或进行更改，而不影响 name_list1。我怎么做？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-11-19T03:29:10.337

```
name_list2 = new List<string>(name_list1); 
```

这将克隆列表。

编辑：此解决方案仅适用于原始类型。对于对象，请参阅下面的其他回复。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-23T07:51:31.117

另一种选择是：深度克隆

```
public static T DeepCopy<T>(T item)
        {
            BinaryFormatter formatter = new BinaryFormatter();
            MemoryStream stream = new MemoryStream();
            formatter.Serialize(stream, item);
            stream.Seek(0, SeekOrigin.Begin);
            T result = (T)formatter.Deserialize(stream);
            stream.Close();
            return result;
        } 
```

所以，

您可以使用 ：

```
name_list2 = DeepCopy<List<string>>(name_list1); 
```

或者：

```
name_list2 = DeepCopy(name_list1); 
```

也将工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-03T11:21:04.333

对于原始类型，您可以这样做：

```
List<string> CopyList = new List<string>(OriginalList); 
```

对于非原始/用户定义的类型，您可以这样做：

```
List<Person> CopyList = new List<Person>();
foreach(var item in OriginalList)
{
    CopyList.Add(new Person { 
            Name = item.Name,
            Address = item.Address
    });
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-19T03:30:00.880

```
name_list2 = new List<string>(name_list1); // Clone list into a different object 
```

此时，两个列表是不同的对象。您可以在不影响 list1 的情况下将项目添加到 list2

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-19T03:34:34.507

问题是任务。在赋值之前，变量和`name_list2 = name_list1;`指向的堆上有两个不同的 List 对象。你填满，这很好。但作业说，“将堆上的同一个对象指向.” 曾经指向的 List不再可访问，将被垃圾回收。你真正想要的是将内容*复制*到. 您可以使用[List.AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx)执行此操作。请注意，这将导致“浅”副本，这对于您引用的示例很好，其中列表内容是字符串，但当列表成员是更复杂的对象时可能不是您想要的。这一切都取决于您的需求。`name_list1``name_list2``name_list1``name_list2``name_list1``name_list2`*`name_list1``name_list2`*

 ** * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-17T06:07:31.763

我更喜欢 Json 转换器的方法来序列化和反序列化，这样你就不必标记要序列化的类，尤其是你有很多子类。

[https://www.newtonsoft.com/json/help/html/SerializingJSON.htm](https://www.newtonsoft.com/json/help/html/SerializingJSON.htm)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-01T17:34:31.290

这是一个替代解决方案：

```
 List<string> name_list1 = new List<string>();
    List<string> name_list2 = new List<string>();

    name_list1.Add("McDonald");
    name_list1.Add("Harveys");
    name_list1.Add("Wendys");

    name_list2.AddRange(name_list1.ToArray()); 
```

ToArray() 方法将“name_list1”复制到一个新数组，然后我们通过 AddRange() 方法将其添加到 name_list2。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-27T18:47:04.753

我喜欢 linq 这...

如果列表元素是基元或结构，那么......

```
L2 = L1.ToList() 
```

如果列表元素是类，那么...

```
L2 = L1.Select(x => x.Copy()).ToList(); 
```

哪里`Copy`可能只是浅拷贝曝光`MemberWiseClone`，也可能是深度拷贝的某种实现。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-25T16:17:28.327

**对于原始类型：**
List ClonedList = new list(OriginalList);

**对于非原始/用户定义类型：**
我们需要进行深拷贝：深拷贝用于对内部引用类型进行完整的深拷贝，为此我们需要配置 MemberwiseClone() 返回的对象。

Step1- 在你的类中从 ICloneable 继承：
public class MyClass:ICloneable

Step2- 实现方法

```
public MyClass Clone()
{
  MyClass MyClassObj =new MyClass();
  MyClassObj.Property1 = this.Property1;
  .
  .
  MyClassObj.Property_N = this.Property_N;
  return MyClass;
} 
```

Step3- 现在克隆你的列表

```
List<MyClass> MyClassClone = new List<MyClass>(); 
for(i=0; i<Count; i++)
  {
      MyClassClone.Add(OriginalClaaObj[i].Clone());
  } 
```

这将对对象的每个项目进行深层复制。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-27T15:08:03.957

使用类对象列表时，上述解决方案都不适合我。

这可用于将任何对象复制到具有共享属性名称的另一个对象。

```
public static void ObjectToObject(object source, object destination)
{
  // Purpose : Use reflection to set property values of objects that share the same property names.
  Type s = source.GetType();
  Type d = destination.GetType();

  const BindingFlags flags = BindingFlags.Public | BindingFlags.Instance;

  var objSourceProperties = s.GetProperties(flags);
  var objDestinationProperties = d.GetProperties(flags);

  var propertyNames = objSourceProperties
  .Select(c => c.Name)
  .ToList();

  foreach (var properties in objDestinationProperties.Where(properties => propertyNames.Contains(properties.Name)))
  {

    try
    {
      PropertyInfo piSource = source.GetType().GetProperty(properties.Name);

      properties.SetValue(destination, piSource.GetValue(source, null), null);
    }
    catch (Exception ex)
    {
      throw;
    }

  }
}

public static List<T> CopyList<T>(this List<T> lst)
{
  List<T> lstCopy = new List<T>();

  foreach (var item in lst)
  {
    var instanceOfT = Activator.CreateInstance<T>();
    ObjectToObject(item, instanceOfT);
    lstCopy.Add(instanceOfT);
  }
  return lstCopy;
} 
```

对于列表，请使用：list2 = list1.CopyList();

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-19T11:12:05.190

如果两个列表都属于相同的复杂类型，那么您可以执行以下操作：-

SomeClass List2 = new List();

List1.ForEach(u => List2.Add(u));

我正在做的是循环遍历 List1 的每个元素并继续将其添加到 List2 中。我相信这是最短的方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-08T09:28:02.917

虽然它可能是潜在的性能威胁解决方案，但它会雄辩地逐个属性地复制值。

```
using Newstonsoft.Json;

ClassA classA = new ClassA();
ClassA classACopyWithoutReference = JsonConvert.DeserializeObject<ClassA>(JsonConvert.SerializeObject(classA)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-11-27T18:32:36.993

基于@Mrunal 的回答，我创建了一个扩展方法：

```
public static T Clone<T>(this T source)
    {
        // Don't serialize a null object, simply return the default for that object
        if (source == null)
        {
            return default;
        }

        // initialize inner objects individually
        // for example in default constructor some list property initialized with some values,
        // but in 'source' these items are cleaned -
        // without ObjectCreationHandling.Replace default constructor values will be added to result
        var deserializeSettings = new JsonSerializerSettings { ObjectCreationHandling = ObjectCreationHandling.Replace };

        return JsonConvert.DeserializeObject<T>(JsonConvert.SerializeObject(source), deserializeSettings);
    } 
```

你可以这样称呼它：

```
L2 = L1.Select(x => x.Clone()).ToList(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-14T12:50:05.530

这对我使用 LINQ 有用...

```
lst1= lst2.ToList(); 
```*