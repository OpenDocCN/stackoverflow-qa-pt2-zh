# StackOverflow 问答 15247000-15247999

# ruby-on-rails - Rails 比赛条件唯一性交点日期

> ID：15247005
> 
> 赞同：1
> 
> 时间：2013-03-06T12:08:42.280
> 
> 标签：ruby-on-rails, date, unique, conditional-statements, race-condition

在这种情况下，我无法弄清楚如何解决竞争条件。

**我正在使用带有活动记录的 rails 3.2.11**

我有模型：（只是一个例子）

```
class Task < ActiveRecord::Base
  belongs_to :person
  attr_accessible :start_date, :end_date, :person_id
end

class Person < ActiveRecord::Base
  has_many :tasks
end 
```

问题是：

我想确保一个人在该时间间隔（`start_date`和`end_date`）之间只分配了 1 个任务

例如，

```
Task | Person_id | start_date       | end_date
0      1           01-01-01 10:00     01-01-01 11:00
1      1           01-01-01 10:15     01-01-01 10:45  ## this should no be valid!! 
```

我知道 Rails 中的验证不会因为竞争条件而阻止这种情况，而且我不能在数据库级别添加索引，因为我不想要，`unique => true`而是某种`unique_in_interval => true`

有人可以解释如何做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:11:30.507

只是为了给你一个想法，使用`after_create`回调来检查在那个条件间隔内刚刚插入的字段的唯一性。

所以在你的任务模型中，

```
attr_accessor :between_date

after_create :discard_insert

def discard_insert
    @same_records = Person.joins(:tasks).where(:tasks=> {:between_date => start_date..end_date})
end 
```

上述方法将为您提供所有具有竞争条件的记录，然后您可以删除后面的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T03:10:57.273

只需使用任何锁定机制（如[redis locker）锁定操作](https://github.com/einzige/redis-locker)

```
RedisLocker.new("assign_task_#{@user.id}").run! do
  @user.assign_task(@task) unless @user.has_task_within_time_period?
end 
```

# android - 如何在android中的标签等不同活动之间切换？

> ID：15247016
> 
> 赞同：0
> 
> 时间：2013-03-06T12:09:20.860
> 
> 标签：android, android-layout, android-intent, android-widget

![在此处输入图像描述](../Images/7a5945f8d432ad4d068a68d4b177a7dc.png)

我需要开发一个应用程序，其中包含图像中显示的这些选项卡。每个选项卡都包含一个由用户填写的表单。用户可以切换到任何选项卡。

用户点击Activity1，显示Activity 1，用户输入一些数据；然后用户按下活动 2，显示活动 2，用户再次按下活动 1，活动 1 显示用户输入的数据（不是空白活动）。

最后，当用户单击“保存”时，我需要从这些活动中获取所有数据并将其保存在某处。

我在 java 中做了很多工作，但对 android 很陌生，我一直在为这个场景开发 UI。但是我在 iOS 中已经做过很多次了。

任何人都请分享您开发此类 UI 的经验。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:17:53.917

片段将更适合这种情况，好处是

1.  它们重量轻，速度快

2.  由 FragmentManager 自动管理。

3.  片段之间的数据共享比活动更顺畅和简单

4.  它们不会使应用程序的架构复杂化

您可以在 Activity 中拥有任意数量的 Fragment。以下两个链接可能对您有用。

[一个类似的线程](https://stackoverflow.com/questions/5710573/need-a-fragments-example)

[一个很好的教程](http://www.vogella.com/articles/AndroidFragments/article.html)

[另一个很好的教程](http://marakana.com/s/post/1250/android_fragments_tutorial)

如果即使在那之后你决定使用活动，你需要考虑

# lucene - 如何从 Lucene 4.0 索引中提取单个文档？

> ID：15247018
> 
> 赞同：0
> 
> 时间：2013-03-06T12:09:29.060
> 
> 标签：lucene, document, extraction

这可能是有史以来最简单和最无聊的问题之一，但是在 Lucene 中索引所有文档之后，我如何才能提取一个仅具有存储在 StringField 中的指定 id 的文档？它应该等价于例如 SQL 表达式

```
Select id, description 
from index
where id = '1' 
```

Document 有两个字段，一个 ID 和一个描述。如果这个问题之前被问过太多次，我已经道歉了。但是在互联网上搜索了几个小时可能是错误的搜索词后，我决定在这里问这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:36:10.860

这是一个关于 Lucene 的优秀教程：[Lucene in 5 minutes](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

确实只需要 5 分钟，您会在搜索、显示部分找到答案。您将在“查询”部分找到符合您要求的查询格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:53:58.260

Lucene 演示展示了如何使用 Lucene 的标准 QueryParser 来搜索文档： http: [//lucene.apache.org/core/4_1_0/demo/overview-summary.html#overview_description](http://lucene.apache.org/core/4_1_0/demo/overview-summary.html#overview_description)

# sql-server - 如何在 SQL Server 2008 R2 的特定位置重新排序和添加列？

> ID：15247022
> 
> 赞同：0
> 
> 时间：2013-03-06T12:09:53.563
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我想构建该工具以使用 SQL Sever 2008 R2 中的数据重新排序已存在表的字段。我还想创建一个逻辑来在任何特定位置添加一列。在 Mysql 或 firebird 中，他们具有执行此操作的选项和 TSQL 查询。任何机构请分享我们在 SQL Sever 2008 R2 中是否具有该选项。如果有任何可用的智能逻辑意味着分享给我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:41:20.690

重新排序现有表的列将是一个代价高昂的过程。该表将不得不从头开始重建。SQL 通过使用新顺序创建表的副本然后将现有数据插入到该表中来为您执行此操作。完成此操作后，将删除初始表并将新表放回原处。

更好的解决方案是使用 VIEW。它们可以随意更改。

# javascript - 不显眼的 JQuery 在 IE8 中不起作用？

> ID：15247023
> 
> 赞同：1
> 
> 时间：2013-03-06T12:10:01.800
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我已经为我的一个按钮设置了一个 onclick 事件，该事件在 Firefox、Chrome、Safari 和 Opera 中运行良好。但是在 IE8 中永远不会调用脚本（永远不会执行调试器语句）。

剧本：

```
$(function () {
    $('#template-button').click(function () {
        debugger;
        var $templateDdl = $('#templateDdl');
        var selTempID = $templateDdl.val();
        var url = $templateDdl.data('url');
        $.post(url, { selectedTemplateID: selTempID }, function (data) {
            $('#template').html(data);
        });
    });
}); 
```

按钮：

```
<input type="button" value="Verander template" id="template-button" /> 
```

JQuery 位于一个名为artsportaal.js 的单独文件中，该文件加载到_Layout.cshtml 中：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.core.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/IG/infragistics.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/IG/infragistics.loader.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/artsportaal.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DatePickerReady.js")" type="text/javascript"></script> 
```

它几乎作为最后一个脚本加载。

这是一个众所周知的问题吗？我做错了什么吗？感谢您对我的问题的时间和兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:25:40.613

此代码完美运行。正如@ravisoni 评论的那样，我可能是因为名称冲突。

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>

    <script type="text/javascript">

        $(function () {
            $('#my_button').click(function () {
                alert('button got clicked!');
            });
        });

    </script>

</head>
<body>
    <input type="button" value="click_me" id="my_button" />
</body>
</html> 
```

**编辑：**我编辑以评论@devnull69 关于“调试；”。JS 接受没有副作用的语句，因此脚本不会因为“调试”而崩溃；

这是有效的 JS：

```
$(function () {
    $('#my_button').click(function () {
        'use strict';
        'or better, do not use strict';
        var x = 83;
        x;
        alert('button got clicked!');
    });
}); 
```

试试看：http: [//jsfiddle.net/SQgdK/1/](http://jsfiddle.net/SQgdK/1/)

# r - 如何使用 R 获取不同范围的频率？

> ID：15247024
> 
> 赞同：1
> 
> 时间：2013-03-06T12:10:04.127
> 
> 标签：r, range, frequency

我有一组数据，它指的是不同人的速度......所以我的数据看起来像这样所以它基本上只是一个速度列表

```
Velocity(m/s)
1.2
1.4
2.3
1.6
4.5
3.5
1.7
4.5
3.7 
```

我想使用 R 来获得不同的范围和该特定范围的频率......例如，我想要一个类似于下面的输出

```
Velocity(m/s)     Frequency
1.0 - 3.0            7
1.5- 2.0             4 
```

...

所以我想得到一个不同范围的频率列。我对 R 真的很陌生，真的很想用它来分析我的一些数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:12:10.293

`cut`您可以使用和的组合轻松完成此操作`table`。首先让我们生成 0 到 100 之间的 100 个随机数：

```
r = runif(100, 0, 100) 
```

接下来是我们希望出现中断的位置。在此示例中，我们希望它们位于：0、10、...、100：

```
cut(r, breaks=seq(0, 100, 10)) 
```

然后使用`table`命令计算频率：

```
table(cut(r, breaks=seq(0, 100, 10))) 
```

你似乎想要重叠的休息，所以我会使用该`table`命令两次，即

```
t1 = table(cut(r, breaks=seq(0, 100, 10)))
t2 = table(cut(r, breaks=seq(0, 100, 5))) 
```

然后结合结果

```
c(t1, t2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:22:18.527

我将为每个范围创建一个具有最小和最大速度的 data.frame：

```
my.summary <- data.frame(vel.lo = c(1, 1.5), 
                         vel.hi = c(3, 2)) 
```

然后使用`plyr`'s `adply`计算频率：

```
library(plyr)
adply(my.summary, 1, transform, freq = sum(dat$Velocity  > vel.lo &
                                           dat$Velocity <= vel.hi))
#   vel.lo vel.hi freq
# 1    1.0      3    5
# 2    1.5      2    2 
```

* * *

注意：您也可以只使用基本包`apply`，但由于它会删除列名，我发现`adply`您的代码读起来比：

```
my.summary$freq <- apply(my.summary, 1, function(x)sum(dat$Velocity  > x[1] &
                                                       dat$Velocity <= x[2])) 
```

# c++ - 如何避免在提升范围变换中复制

> ID：15247026
> 
> 赞同：0
> 
> 时间：2013-03-06T12:10:08.870
> 
> 标签：c++, c++11, move-semantics, boost-range

提升范围变换需要`const &`参数中的范围。

```
#include <iostream>
#include <vector>
#include <boost/range/algorithm.hpp>

int main(int argc, char *argv[])
{
  using namespace std;

  vector<vector<int>> rt0(10,vector<int>(15,2));
  vector<vector<int>> irt(10,vector<int>(15,5));

  for(auto & i:rt0) {
    for(auto& j:i) cout << j << "  ";
    cout << "\n";
  }
  cout << "\n";
  for(auto & i:irt) {
    for(auto& j:i) cout << j << "  ";
    cout << "\n";
  }

  boost::transform(rt0,irt,rt0.begin(),
    [] (const vector<int> &t0,const vector<int> &it) {
      auto tt = t0;
      boost::transform(t0,it,tt.begin(), plus<int>());
      return tt;
    }
  );
  cout << "\n";
  cout << "\n";
  for(auto & i:rt0) {
    for(auto& j:i) cout << j << "  ";
    cout << "\n";
  }
  return 0;
} 
```

编译并运行

```
g++ -std=c++11 main.cc; ./a.out 
```

如果`boost::transform`'s `BinaryOperation`take`&`而不是`const &`for`SinglePassRange1`那么我就不需要创建一个副本 ( `auto tt = t0`) 并且只需使用`to`而不是`tt`. 有没有办法避免创建这种复制（同时仍然使用范围）？

提升范围变换的链接：http: [//www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/algorithms/mutating/transform.html](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/algorithms/mutating/transform.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:43:10.073

我需要使用`for_each`元组或带有两个参数的新 boost 实现。

概念上`transform`不应该修改。它来自没有就地修改的函数式编程。

# google-chrome - 谷歌浏览器关注开发者控制台日志

> ID：15247028
> 
> 赞同：12
> 
> 时间：2013-03-06T12:10:10.663
> 
> 标签：google-chrome, logging, console

我在我的 javascript 中使用`console.log`很多来调试鼠标移动事件。我遇到的问题是，当在 chrome 控制台中时，不遵循新条目。

在这些屏幕截图中得到了最好的说明：

**第一批日志很好，因为它足够大，可以在屏幕上看到所有日志：**

![在此处输入图像描述](../Images/5bc66eff198e10fdff215f9dfcb23da7.png)

**几秒钟后：** ![在此处输入图像描述](../Images/5b49bddffc2b749aff1ba4c2d3ede60c.png)

日志已超出需要我滚动的窗口大小。

这使得调试鼠标移动事件变得异常困难，因为我必须移动到控制台并向下滚动，从而在日志中添加更多条目。

所以我的问题是：我怎样才能让 chrome 基本上跟踪日志而不是停止并要求我滚动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:06:03.227

在控制台打开的情况下，将滚动条向下拖动到窗口底部并释放它。它应该为你拖尾输出。

我花了很多次尝试让它在`Version 27.0.1438.7 dev-m`. 但是在 中`Version 27.0.1440.0 canary`，它不仅自动发生，而且每次尝试时我都可以重新附加自动滚动。

[您可以从这里](https://www.google.com/intl/en/chrome/browser/canary.html)下载 Canary 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T18:41:53.153

默认行为是控制台在进入那里时跟随（尾）日志。

但是，我们在 DevTools 中有一个错误，如果您更改缩放系数 ( `cmd`+ `+`)，它并不总是有效。

**我们刚刚解决了这个**问题：[https](https://codereview.chromium.org/180733003/) ://codereview.chromium.org/180733003/ 你需要金丝雀一段时间（从这篇文章发布之日起），但它会在大约 10 周内达到稳定状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-29T12:07:39.770

这里有一个相当有害的错误（只要我记得就存在于 Chrome 中），如果您记录任何类型的扩展项，如 DOM 元素或类似的东西，它会干扰日志的显示，并导致滚动停止跟随。

我通过应用一点独创性解决了这个问题，并找到了有问题的日志，你甚至不需要删除日志语句，你只需要让它“更友好”。经常起作用的是我采取任何这样的日志语句，例如

```
console.log((mouse ? "mouse" : "touch") + " start on", jqtarg[0]); 
```

并将其包装在一个数组中：

```
console.log([(mouse_not_touch ? "mouse" : "touch") + " start on", jqtarg[0]]); 
```

您也可以尝试做其他事情，以使日志更具可读性，例如对象（尚未严格测试任何此类，它仍然可能导致烦人的滚动跟随失败）：

```
console.log({"mouse/touch start on": jqtarg[0]}); 
```

基于非常少量的测试，如果日志作为一个项目出现在日志缓冲区中，可以直接悬停（而不是要求您先手动展开它）以使检查器突出显示该项目DOM 为你，那么它可能会触发“滚动锁定综合症”。

顺便说一句，需要注意的一件有用的事情是，如果您重复记录完全相同的内容，Chrome 会像这样帮助“堆叠”它们：（看到了吗？我通过将我的日志推入一个对象来修复自动滚动！耶！）

![在此处输入图像描述](../Images/edc00da1182e34ac0e242ff409107f98.png)

如果您*真的*不需要查看基于精确坐标的值，则打印更粗略的值...更粗略地会导致更紧凑的日志（这仍然会给您提供合理的计数反馈）。

*更新：*有时这些都不起作用。有时你只是不走运，你只需要清理所有不需要的日志并记录最少量的信息，以防止它超载并导致它无法向下滚动。

# php - PHP：将关联数组打印到另一个数组中

> ID：15247030
> 
> 赞同：0
> 
> 时间：2013-03-06T12:10:16.303
> 
> 标签：php, arrays

我想在另一个数组中打印一个关联数组。

这是代码：

“$posted_fields”，是一个由多个数组组成的关联数组，每个数组包含一个发布字段的数据。语法如下：my posted field(checkboxes) = array('key'=>'THE NAME OF THE FIELD', 'value'=>'array(FIELD VALUES)', ...)。

循环是这样的：

```
$posted_fields = array();
foreach($post_values as $field_name => $field_value){

           $posted_fields[] = array('key'   => $field_name,
             'value' => $field_value,
             'compare' => 'IN',
            );

} 
```

我得到以下结果：

```
$posted_fields = array(
                    array
                    (
                        "key" => "property_country",
                        "value" => array
                            (
                                "es",
                                "fr",
                                "ca",
                            ),

                        "compare" => "IN"
                    ),array
                    (
                        "key" => "property_city",
                        "value" => array
                            (
                                "montreal"
                            ),

                        "compare" => "IN"
                    )

            ); 
```

这是我想做的：

“$args”是我想打印“$posted_field”结果的关联数组。

```
$args = array(
            'posts_per_page ' => -1,
            'post_type' => 'property',
            'post_status' => 'publish',             
            'meta_query' => array(
                'relationship' => 'AND',

                $posted_fields  

            ),
            'fields' => 'ids',
        ); 
```

而不是拥有这个

```
$args = array(
            'posts_per_page ' => -1,
            'post_type' => 'property',
            'post_status' => 'publish',             
            'meta_query' => array(
                'relationship' => 'AND',
                array(
                    array
                    (
                        "key" => "property_country",
                        "value" => array
                            (
                                "es",
                                "fr",
                                "ca",
                            ),

                        "compare" => "IN"
                    ),array
                    (
                        "key" => "property_city",
                        "value" => array
                            (
                                "montreal"
                            ),

                        "compare" => "IN"
                    )

                )
            ),
            'fields' => 'ids',
        ); 
```

我想得到这样的结果：

```
$args = array(
            'posts_per_page ' => -1,
            'post_type' => 'property',
            'post_status' => 'publish',             
            'meta_query' => array(
                'relationship' => 'AND',

                    array
                    (
                        "key" => "property_country",
                        "value" => array
                            (
                                "es",
                                "fr",
                                "ca",
                            ),

                        "compare" => "IN"
                    ),array
                    (
                        "key" => "property_city",
                        "value" => array
                            (
                                "montreal"
                            ),

                        "compare" => "IN"
                    )

                ),

            'fields' => 'ids',
        ); 
```

这里的区别在 ['relationship' => 'AND',] 之后。我想要 `['relationship' => 'AND', array(), array(), ...] 而不是 ['relationship' => 'AND', array(array(), array(), 。 ..]

我希望信息是明确的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:38:06.923

这可能会帮助您更接近解决方案。我之前使用下面的函数来扩展多维数组：

```
$input_size = (count($multidim_array));
for($row = 0; $row < $input_size; $row++ )
    {
    echo "the row number $row<br>";

        foreach($multidim_array[$row] as $key => $value)
        {
            echo "key $key, value $value<br>";
        }
    } 
```

# php - 保护 SQL 密码的最佳方法

> ID：15247031
> 
> 赞同：0
> 
> 时间：2013-03-06T12:10:21.387
> 
> 标签：php, mysql, database, password-protection

我正在使用许多 PHP 脚本，并且每个文件中都有数据库信息，包括数据库名称和密码。

我想保护这条信息，以确保没有人可以访问。

这些信息可以存储在一个单独的文件中，然后在需要时由 PHP 脚本读取。

我的问题是 - 我在哪里存储它，如何以及如何防止未经授权访问该文件？我也愿意接受其他建议，任何能以最好的方式保护密码的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:16:38.713

可能有一个更好的解决方案，但我将我的存储为 apache 环境启动的一部分（只能由服务器上的 root 读取）。如果您使用不同的服务器技术，您可以做同样的事情，或者做一些类似的事情。

```
#site.example.com
Include includes/credentials/site.conf

#includes/credentials/site.conf
<Directory /srv/www/html>
    SetEnv DB_HOST "server"
    SetEnv DB_USER "user"
    SetEnv DB_PASS "passwd"
</Directory> 
```

如果这对您有帮助，这还允许您控制每个目录的“凭据”。

在 php 中，您可以使用以下内容进行连接：

```
$pdo = new PDO("mysql:host=$_SERVER[DB_HOST]", $_SERVER['DB_USER'],
    $_SERVER['DB_PASS']); 
```

编辑：当您想连接到其他东西（如您自己的 mysql 实例）时，这也使您可以灵活地更改凭据。`.htaccess`如果您可以控制它（可能是首选），您可以使用 a来覆盖或更改环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:17:53.313

从维护的角度来看，在您的业务文件中包含数据库信息确实很危险。想想如果您将网站移动到新服务器，您需要做的工作量。

我建议使用[数据访问对象模式](http://en.wikipedia.org/wiki/Data_access_object)

现在在你有这个 DAO 类的任何文件夹中，放置一个简单的 index.html，它在访问时会显示一个空白页面。Joomla 基于提供的[基本原理](https://stackoverflow.com/questions/8337060/blank-index-html-in-cms-softwares-instead-of-htaccess)使用此方法。

# javascript - 上传程序/良好做法 - FileReader？

> ID：15247038
> 
> 赞同：0
> 
> 时间：2013-03-06T12:10:49.180
> 
> 标签：javascript, html, filereader, asyncfileupload

我正在构建一个基于 XHR 的 JavaScript 文件上传器。（实际上是 Ajax，因为我使用 jQuery）我使用一些 HTML5 功能作为 Drag&Drop API，以及 - 目前 - FileReader API。

我对这个过程有一些疑问，因为理论上有些东西我不明白。

由于某些原因，我**自愿**选择**不使用现有**且设计良好的**插件**/独立上传器之一：

*   我有一些特定的需求，例如为项目添加标题和描述（如在 facebook 中）
*   我会自己实现它作为 HTML5 API 的尝试。

我已经阅读了[使用 Ajax 上传文件](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)的教程，但我发现使用 FileReader API 最终将图像附加到 FormData API 很奇怪。

更重要的是，我真的不想有一个表单，我只是将图像放在一个放置区域，使用 FileReader API 获取文件内容，然后通过 AJAX 请求将其发送到我的服务器。

我只是想知道是否有人有**更好的流程想法**，因为目前：

1.  我得到删除的文件并读取它的内容（异步，但需要一些时间......）
2.  我将此内容与 AJAX 请求一起发送到服务器
3.  我将内容写入服务器上的物理文件（再花一些时间）

我不知道如何优化/更快，但是看到大图的时间是愚蠢的，我只是不想通过示例来想象视频......是否可以通过示例仅使用 Ajax 发送文件的引用，并直接管理上传，而不是获取文件内容然后等待用户单击发送按钮发送它？

例如，facebook 上传器是如何工作的，他们似乎解决了问题/使用了一些东西来解决它？

（如果有人有兴趣得到它或看看，这里是我目前所做的一个小样本）

```
/* HTML */
<div id='drop-area'>
    <h3 class='placeholder'>Drop your files there!</h3>
</div>

/* CSS */
#drop-area {
    position: relative;
    width: 100%;
    height: 400px;
    border: 1px dashed grey;
    border-radius: 10px;
}
#drop-area.drag-over {
    border: 1px solid cyan;
}
#drop-area .placeholder {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 235px;
    height: 25px;
    margin: -12px 0 0 -117px;
    line-height: 25px;
    text-transform: uppercase;
}

/* JavaScript - jQuery way */
// This code is NOT AT ALL full-browser compatible !!
$(document).ready(function () {
    var i,
        $dropArea = $('drop-area'),
        fileReader,
        file,
        result,
        sendRequest = function () {
            $.ajax({
                url: 'upload.php',
                type: 'post',
                data: {
                    title: $('#title').val(),
                    description: $('#description').val(),
                    data: result, // base64 encoded data
                    type: file.type
                },
                processData: false, // No query string
                contentType: false // No data formatting
            }).fail(function (error, status) {
                console.log(error, status);
                alert('Fail...');
            }).done(function (response, output) {
                console.log(response, output);
                alert('Uploaded!');
            }).always(function () {
                $('#file-form-container').empty().detach();
            });
        },
        onFileFormSubmit = function (e) {
            e.preventDefault();
            sendRequest();
            return false;
        },
        displayForm = function (data) {
            $('body').append($('<div/>', {
                'id': 'file-form-container'
            }).append($('<form/>', {
                'action': '#',
                'id': 'file-form'
            }).append($('<img/>', {
                'src': data,
                'alt': 'File',
                'width': 100px
            })).append($('<input/>', {
                'id': 'title',
                'type': 'text',
                'name': 'title'
            })).append($('<textarea/>', {
                'id': 'description',
                'class': 'description',
                'name': 'description'
            })).append($('<input/>', {
                'type': 'submit',
                'name': 'submit',
                'value': 'Send!'
            }))));
        },
        onProgress = function (e) {
            console.log('progress', e);
            // Update a <progress> element...
        },
        onLoadEnd = function (e) {
            console.log('load end', e);
            result = e.target.result;
            displayForm(result);
        },
        onError = function (e) {
            console.log('error', e);
            // Display a message...
        }
        readFile = function (file) {
            fileReader = new FileReader();
            fileReader.onprogress = onProgress;
            fileReader.onerror = onError;
            fileReader.onloadend = onLoadEnd;
            fileReader.readAsDataURL(file);
        };

    $dropArea.on('dragenter', function (e) {
        $(this).addClass('drag-over');
    }).on('dragover', function (e) {
        e.preventDefault();
        e.originalEvent.dataTransfer.dropEffect = 'copy'; // Check the browser support if you want to fix the compatibility
    }).on('dragleave', function (e) {
        e.preventDefault();
        $(this).removeClass('drag-over');
    }).on('dragend', function (e) {
        e.preventDefault();
        $(this).removeClass('drag-over');
    }).on('drop', function (e) {
        // e || e.originalEvent ?
        e.preventDefault();
        e.stopPropagation();
        $(this).removeClass('drag-over');

        if (e.originalEvent.dataTransfer.files) {
            for (i = 0, i < e.originalEvent.dataTransfer.files.length; i++) {
                // Work with arrays to manage multiple files
                file = e.originalEvent.dataTransfer.files[i];
                readFile(file); // Read the file content then process the upload (callbacks)
            }
        }
    })
});

/* PHP - Symfony2 */
<?php

// Symfony 2 Controller Context

$em = $this->getDoctrine()->getEntityManager();

// get params
$request = $this->getRequest();

// Check for types, sizes, errors etc.
if ($request->get('data') && [...]) {
    [...]
}

// write the decoded data into a file
// fwrite(base64_decode(...));
// By the way, is there any OOP - MVC way to do that with Symfony2 ?
$path = ''; // define the file path

// Save the entity
$entity = new Picture();
$entity->setTitle($request->get('title'));
$entity->setDescription($request->get('description'));
$entity->setPath($path);
$em->persist($entity);
$em->flush();

return new JsonResponse(array($entity), 202);

?> 
```

# assembly - 寄存器不存储输入

> ID：15247039
> 
> 赞同：0
> 
> 时间：2013-03-06T12:10:51.310
> 
> 标签：assembly, intel, 8051

我正在接受输入并将它们存储在寄存器 R1 和 R2 中。然后我使用`CJNE`命令执行比较，如果存储在 R1 或 R2 中的输入与数组中的数据匹配，我会做一些事情。但问题出在以下代码中，有时 R1 和 R2 有数据，有时没有。我已经通过调试模式验证了它并在端口上显示了它们里面的东西。为什么会发生这种情况，我做错了什么？

以下程序是编写`intel 8051 assembly`并组装在`Keil uVision`

请检查代码：

```
ORG 00H

UserName: DB 12,13,14,0
Password: DB 15,125,240,0

MOV R0,#00h
mov R6,#04h
mov P1,#00h
mov p2,#00h

TakeUserName:

JB P2.1, TakePassword 

mov R1,P1 // storing username number in R1

SJMP TakeUserName

TakePassword:

JB P2.2, CheckUserName    

mov R2,P1 // storing password number in R2

 SJMP TakePassword

CheckUserName:

MOV DPTR,#UserName

Here1:

CLR A

MOVC A, @A+DPTR

INC DPTR

CJNE A, 01h,Here1   // compare A with data in R1

mov p2,#00h

Setb P2.0 

AJMP CheckPassword    

CheckPassword:

MOV DPTR,#Password

Here:

CLR A

MOVC A, @A+DPTR

INC DPTR

CJNE A, 02h,Here  

Setb P2.1 // setting of this bit shows password is successfully matched

AJMP Exit

End 
```

请指导我找出这种奇怪行为的原因。

问候

# security - 安全连接两个 node.js 服务器

> ID：15247047
> 
> 赞同：0
> 
> 时间：2013-03-06T12:11:20.450
> 
> 标签：security, node.js, amazon-ec2, wkhtmltopdf, nodejitsu

我在 Nodejitsu 上托管一个应用程序，我希望该应用程序使用 wkhtmltopdf 将页面转换为 pdf，这是一个二进制文件。唉，我对 Nodejitsu 的计划不够大，无法通过 ssh 访问安装 wkhtmltopdf。

我想做的是在 AWS ec2 上托管 pdf 转换器。但我不确定安全连接两个 node.js 服务器的好方法。此外，当两台服务器连接时，在这两台服务器之间传输文件的最有效方式是什么。

有具体的设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:16:13.730

这取决于您需要什么安全性，以及您需要多少。因此，我假设您的 nodejitsu 服务器上有一些数据，并希望将其（以 html 格式）发送到 Amazon，然后从 amazon 将其（以 pdf 格式）接收回 nodejitsu，并且您想要：

1.  没有人能够在两者之间阅读您的文档
2.  没有人可以在两者之间篡改您的文件

首先，意识到任何有权访问 nodejitsu 或 amazon（员工或黑客）的人无论如何都可以看到您的数据（并且可能任何有权访问您的数据库提供商的人）。在某处发生数据泄漏的可能性比有人监听/篡改两者之间的连接的可能性要大得多（特别是如果您同时在美国或您信任的政府的（另一个）国家托管（请注意，如果美国政府想要访问您的数据，无论是 nodejitsu 还是亚马逊服务器都在美国，无论如何他们都会得到它）。但是，问题是，除非出现一些重大的互联网中断，否则 nodejisu 和亚马逊之间的连接不会通过阴暗的提供商或开放无线网络。

一旦你决定你仍然想要/需要额外的安全层（和复杂性），我会说：选择简单的路线。没有 https，没有证书，没有非对称加密。只需选择一个共享密钥（随机密码，越长越好），然后在发送之前对数据进行 AES 加密，然后在另一端进行 AES 解密（使用内置的节点加密模块）。只需通过 http 发送您的（加密的）文档，您就完成了。您甚至不需要任何授权层：收到的任何未加密为有效文档的内容都可以丢弃。

确实，https 可以防止其他一些攻击（主要是共享密钥可能在您的代码中的某个位置，因此也在您的本地机器（和 github）上，并且使用非对称加密，您只需将公钥存储在您的代码中。但是不过，它会为您省去很多麻烦！

# javascript - grunt requirejs '定义未定义'

> ID：15247048
> 
> 赞同：14
> 
> 时间：2013-03-06T12:11:20.927
> 
> 标签：javascript, requirejs, gruntjs, grunt-contrib-requirejs

我正在尝试`RequireJS`使用插件`GruntJS`进行优化。[`grunt-contrib-requirejs`](https://github.com/gruntjs/grunt-contrib-requirejs)

问题是我的代码在优化之前运行良好，然后在优化之后，在控制台上显示`Uncaught ReferenceError: define is not defined`.

这是`Gruntfile.js`

```
module.exports = function (grunt) {
  grunt.loadNpmTasks('grunt-contrib-requirejs');

  grunt.initConfig({
    requirejs: {
        compile : {
            options : {
              name  : 'main',
              baseUrl : ".",
              mainConfigFile : "./main.js",
              out : "./optimized.js",
              preserveLicenseComments: false
           }
        }
}
  })

  grunt.registerTask('default', 'requirejs');

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-14T03:24:17.843

将 require.js 文件添加为“包含”选项应该可以工作。

```
requirejs: {
    compile : {
        options : {
            name  : 'main',
            baseUrl : ".",
            mainConfigFile : "./main.js",
            out : "./optimized.js",
            preserveLicenseComments: false,
            include: ['path/to/require.js']
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T09:13:35.357

作为`define`一个 requireJs 函数，您似乎错过了加载 requireJs 或任何其他 AMD 加载程序。[如果您不需要加载任何其他 AMD 模块，那么您只需编译一次，您可以使用像almond](https://github.com/jrburke/almond)这样的轻型加载器垫片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T13:55:47.327

正如在缺少 requirejs-script 之前指出的那样。

这是**官方 requirejs-page**建议您这样做的方式（从我的 gruntfile 中提取）：

```
requirejs: {
  compile: {
    options: {
      baseUrl: "src/js",
      mainConfigFile: 'src/js/require.config.js', 
      paths: {
        requireLib: "vendor/require/require"
      },
      include: "requireLib",
      name: "require.config",
      out: "dist/js/bundle.js"
    }
  }
}, 
```

观察选项**路径**和**包含**，这些对于定义需求至关重要。只需将 requireLib 选项指向您的 require.js 文件。

在此处查看官方答案：[http ://requirejs.org/docs/optimization.html#onejs](http://requirejs.org/docs/optimization.html#onejs)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-13T09:39:05.277

似乎 grunt-contrib-requirejs 默认不编译 requirejs 。您可以使用 concat 重新添加 requirejs。

```
concat : {
  dist : {
    src : ['./optimized.js', 'path/to/requirejs.js'],
    dest : './optimized.js'
  },
}

grunt.loadNpmTasks('grunt-contrib-concat'); 
```

# php - PHP 邮件 - 重复主题

> ID：15247051
> 
> 赞同：2
> 
> 时间：2013-03-06T12:11:32.317
> 
> 标签：php, email, duplicates, subject

我注意到从我的服务器发送的电子邮件的标题中有重复的“主题”标签。我正在使用 htmlMimeMail5 库。

这是我处理邮件的几行代码

```
 $mail = new htmlMimeMail5();
    $mail->setFrom($sender);
    if ($ccRecipient) {
        $mail->setCc($ccRecipient);
    }
    $mail->setSubject($subject);
    $mail->setPriority('high');
    $mail->setHtml($html, ROOT_FOLDER . '/');
    $mail->setText(strip_tags($html));
    if (sizeof($attachments) > 0) {
        foreach($attachments as $name => $path) {
            if (file_exists($path) AND !is_dir($path)) {
                $mail->addAttachment(new fileAttachment($path, $name));
            }
        }
    }
    $mail->setTextCharset('utf-8');
    $mail->setHTMLCharset('utf-8');
    $mail->setHeadCharset('utf-8');
    if($replyTo){
        $mail->setHeader('Reply-To', $replyTo);
    }
    $sent = $mail->send(array($sendTo)); 
```

和结果

```
...
To: xxx@xxx.com
Subject: =?utf-8?B?WmF6bm*tZW5hbmEgdWhyY****HphIHByZWRmYWt*dXJ1?=
MIME-Version: 1.0
X-Mailer: Mailer
From: xxx <xxx@xxx.com>
Subject: some subject
... 
```

第一个主题中有一些东西，可能是什么，为什么会出现？（为了以防万一，我用几个字符替换了“*”）它会因此被视为垃圾邮件吗？

谢谢

# c# - 序列化多个对象

> ID：15247053
> 
> 赞同：8
> 
> 时间：2013-03-06T12:11:36.930
> 
> 标签：c#, xml, serialization

我的序列化代码是这样的..

```
public class slab
{
    public int lowerlimit {get; set;}
    public int upperlimit { get; set; }
    public int percentage { get; set; }

}

public class Details
{
    static void Main(string[] args)
    {
        slab s= new slab();
        s.lowerlimit = 0;
        s.upperlimit = 200000;
        s.percentage = 0;
        XmlSerializer serializer = new XmlSerializer(s.GetType());
        StreamWriter writer = new StreamWriter(@"filepath");
        serializer.Serialize(writer.BaseStream, s);
    }
} 
```

它工作正常，我得到的输出文件为：

```
<?xml version="1.0"?>
<slab xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <lowerlimit>0</lowerlimit>
    <upperlimit>200000</upperlimit>
    <percentage>0</percentage>
</slab> 
```

但是我怎样才能序列化多个对象呢？我想得到一个输出文件

```
<slabs>
    <slab>
        <lowerlimit>0</lowerlimit>
        <upperlimit>200000</upperlimit>
        <percentage>0</percentage>
    </slab>
    <slab>
        <lowerlimit>200000</lowerlimit>
        <upperlimit>500000</upperlimit>
        <percentage>10</percentage>
    </slab>
    <slab>
        <lowerlimit>500000</lowerlimit>
        <upperlimit>1000000</upperlimit>
        <percentage>20</percentage>
    </slab>
    <slab>
        <lowerlimit>1000000</lowerlimit>
        <upperlimit>0</upperlimit>
        <percentage>30</percentage>
    </slab>
</slabs> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T12:18:07.857

实际上，所需的输出格式不是有效的 XML，因为 XML 文件总是需要一个根元素。您可以将您`slab`的 s 放入一个列表 ( `List<Slab> slabs = new List<Slab>();`) 并对其进行序列化，但您可能会得到如下输出：

```
<slabs>
    <slab>
    <lowerlimit>0</lowerlimit>
    <upperlimit>200000</upperlimit>
    <percentage>0</percentage>
    </slab>

    <slab>
    <lowerlimit>200000</lowerlimit>
    <upperlimit>500000</upperlimit>
    <percentage>10</percentage>
    </slab>

    <slab>
    <lowerlimit>500000</lowerlimit>
    <upperlimit>1000000</upperlimit>
    <percentage>20</percentage>
    </slab>

    <slab>
    <lowerlimit>1000000</lowerlimit>
    <upperlimit>0</upperlimit>
    <percentage>30</percentage>
    </slab>
</slabs> 
```

**编辑**
另一种序列化方式可能是这样，告诉序列化器更多关于根元素的信息：

```
List<Slab> slabs = new List<Slab>();
slabs.Add(...);

XmlSerializer serializer = new XmlSerializer(slabs.GetType(), new XmlRootAttribute("slabs"));
StreamWriter writer = new StreamWriter(@"filepath");
serializer.Serialize(writer.BaseStream, slabs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:17:37.500

您可以使用以下代码。

```
List<Slab> listSlabs = new List<Slab>();
//add Slab to listSlabs 
```

您可以序列化列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:36:03.113

为了很好地封装并确保类型名称，您可以创建一个名为slabs 的新对象，其中仅包含一个`List<Slab>`. 将平板添加到这个新对象并序列化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T16:02:36.077

采用

```
XmlSerializer serializer = new XmlSerializer(**slabs**.GetType(), new XmlRootAttribute("slabs")); 
```

代替

```
XmlSerializer serializer = new XmlSerializer(s.GetType(), new XmlRootAttribute("slabs")); 
```

# java - apache 轴将日期返回为“YYYY-MM-DD”

> ID：15247056
> 
> 赞同：0
> 
> 时间：2013-03-06T12:11:44.797
> 
> 标签：java, web-services, axis

我在 Windows 7 上维护一个旧的 apache axis 1.4 Java 程序。我的程序的输出是：EffectiveDate Fri Mar 01 00:00:00 EDT 2013

如何使 apache 轴返回日期为“YYYY-MM-DD”（例如“2013-03-01”）？即不要编写将 java.util.Date （例如“Fri Mar 01 00:00:00 EDT 2013”​​）作为输入并返回“YYYY-MM-DD”（例如“2013-03-01”）的辅助函数）。

我的程序（简化以显示主要逻辑）：

```
private Call call;
Service service = new Service();

try{
        call = (Call) service.createCall();

         //...

        // Create Header
        SOAPHeaderElement1 = createApplicationHeader1(mainForm.getTransactionIdentifier() + "-" + threadNumber,
                                                      mainForm.getUserName(),
                                                      mainForm.getUserPassword());
        call.addHeader(SOAPHeaderElement1);
}catch(ServiceException se){
         //...
}

try{
        call.setTargetEndpointAddress(new java.net.URL(endPoint));
        call.setOperationName("getInfo");

        //...
        rpcBodyElement = new RPCElement("getInfo");
        rpcBodyElement.setEncodingStyle("http://schemas.xmlsoap.org/soap/encoding/");
        rpcBodyElement.setNamespaceURI(bnwsdl);

        SOAPElement getInfoElement = rpcBodyElement.addChildElement(INFO_GET_REQUEST);
        SOAPElement typeCode = getInfoElement.addChildElement(TYPE_CODE);
        typeCode.addTextNode(mainForm.getTypeCode());

        call.setReturnType(new javax.xml.namespace.QName("http://www.mytest.com/xml_schemas/ws", "InfoGetResponseType"));
        call.setReturnClass(com.mytest.www.ws.common.InfoGetResponseType.class);
        call.setReturnQName(new javax.xml.namespace.QName("", "getInfoReturn"));

        QName qname = new QName( "http://www.mytest.com/xml_schemas/ws", "InfoGetResponseType" );
        call.registerTypeMapping(com.mytest.www.ws.common.InfoGetResponseType.class,
              qname,
              new org.apache.axis.encoding.ser.BeanSerializerFactory(com.mytest.www.ws.common.InfoGetResponseType.class, qname),
              new org.apache.axis.encoding.ser.BeanDeserializerFactory(com.mytest.www.ws.common.InfoGetResponseType.class, qname), false);

        // Invoke Web Service
        infoGetResponse = (com.mytest.www.ws.common.InfoGetResponseType) call.invoke(rpcBodyElement);
        System.out.println("EffectiveDate " + infoGetResponse.getInfoResultRow().getEffectiveDate());
}catch (MalformedURLException mue){
        //...
} 
```

# google-maps - 无法从 keytool 命令获取 MD5 指纹

> ID：15247057
> 
> 赞同：1
> 
> 时间：2013-03-06T12:11:46.387
> 
> 标签：google-maps, md5, keytool, fingerprint

我需要 MD5 指纹来为谷歌地图生成 API 密钥。当我运行 keytool 命令时，我没有得到 MD5 指纹。相反，我得到了不是我想要的 SHA1 指纹。

```
C:\Program Files\Java\jdk1.7.0_15\bin>keytool -list -alias androiddebugkey 
-keystore C:\Users\Psiu\.android\debug.keystore -storepass android -keypass android
androiddebugkey, 26-Feb-2013, PrivateKeyEntry,
Certificate fingerprint (SHA1): FA:66:B5:2A:05:8D:6E:2D:AA:89:D0:7F:97:6D:8D:9D:3A:1F:64:A1 
```

如何获取 MD5 指纹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:18:40.487

请使用`-v`您的`keytool`命令选项，该工具将列出所有支持的不同算法，您将获得列出的 SHA1 和 MD5。

例如`keytool -v -list [...rest of your command]`

# c# - Linq OrderByDescending 带有两个可以为空的日期列

> ID：15247063
> 
> 赞同：1
> 
> 时间：2013-03-06T12:12:17.163
> 
> 标签：c#, linq, lambda

我有一个包含两个可为空的日期时间列 ETA 和 ETD 的表。一个人总是有价值的。我想按日期订购表格。因此，例如，如果 ETA 为空，请使用 ETD 进行订购。如果 ETD 为空，则使用 E​​TA，如果两者都不为空，则使用 E​​TA（因为它始终是第一个）。

我有这个：

```
var route = db.RouteJourney.Where(j => j.JourneyId == id).OrderByDescending(j => j.ETA ?? j.ETD); 
```

我也试过这个（这是一样的）：

```
var route = db.RouteJourney.Where(j => j.JourneyId == id).OrderByDescending(j => j.ETA.HasValue ? j.ETA : j.ETD); 
```

我错过了什么吗？我的小脑袋说，如果 ETA 为空，请使用 ETD，然后订购它，但它没有给出正确的结果。

任何帮助表示赞赏。

编辑

我得到了这个：

如果 RouteJourney 是 [Name, RouteId (Key), JourneyId, ETA, ETD]

和价值观是：

[Stop A, 1, 1, null, 10/03/13], [Stop B, 4, 1, 12/03/13, 13/03/13], [Stop C, 2, 1, 14/03/ 13, null], [D 站, 3, 1, 16/03/13, null]

像这样订购：

停止 C 停止 B 停止 A 停止 D

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:36:33.670

尝试使用匿名类型

```
var route = 
    db.RouteJourney
    .Where(j => j.JourneyId == id)
    .OrderByDescending(item =>
        (new { DT = item.ETA.HasValue ? item.ETA : item.ETD }).DT); 
```

或者在 QES 中更漂亮：

```
var route =
    from item in db.RouteJourney
    where item.JourneyId == id
    order by
        (new { DT = item.ETA.HasValue ? item.ETA : item.ETD }).DT
    descending
    select item; 
```

# jquery - 如何将选项列表项移动到 使用jQuery？

> ID：15247064
> 
> 赞同：0
> 
> 时间：2013-03-06T12:12:19.817
> 
> 标签：jquery, html, css

我谦虚地问任何人，因为我无法移动这个（选项列表项）：

```
<select class="list-of-users">
<option class="list-of-users">Sample Group</option>
<option class="list-of-users">TOP Group</option>
<option class="list-of-users">TEST Group</option>
<option class="list-of-users">AWD Group</option>
</select> 
```

到这个列表：

```
<ul class="list-of-members">
<li class="list-of-members"></li>
<li class="list-of-members"></li>
<li class="list-of-members"></li>
<li class="list-of-members"></li>
</ul> 
```

到目前为止，我一直在兜圈子。先感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:16:02.020

```
$('.list-of-users').on('change',function(){
  var value = $(this);

  $('ul.list-of-members').append('<li class="list-of-members">'+value.val()+'</li>')

}); 
```

如果这不是您想要的，请参阅下面的链接

[如何使用 jquery 将 <select> 下拉列表转换为无序列表？](https://stackoverflow.com/questions/7336437/how-to-convert-select-dropdown-into-an-unordered-list-using-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:17:39.357

```
var ul = $("<ul/>").addClass("list-of-members");
$("option.list-of-users").each(function(){
   ul.append($("<li/>").html($(this).html()).addClass("list-of-members"));
});
$(".list-of-users").replaceWith(ul); 
```

工作示例：http: [//jsfiddle.net/z3uU3/1/](http://jsfiddle.net/z3uU3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:13:40.830

试试这个，

**[现场演示](http://jsfiddle.net/vDY97/)**

```
strToAppend = "";
$('option.list-of-users').each(function () {
    strToAppend += "<li>" + $(this).text() + "</li>";
});

$('ul.list-of-members').append(strToAppend); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:23:27.760

尝试： **[小提琴](http://jsfiddle.net/tBn3r/)**

```
var ul = $("<ul/>").addClass("list-of-members");
$('body').append(ul);
$('.list-of-users option').each(function () {
    $('ul').append($("<li/>").text($(this).text()).addClass("list-of-members"));
}); 
```

# c# - 从自己的后台线程更新绑定控件

> ID：15247066
> 
> 赞同：3
> 
> 时间：2013-03-06T12:12:28.100
> 
> 标签：c#, wpf, multithreading, mvvm

我有带有 MVVM 应用程序的 WPF。ViewModel 和 View 是连接的。View 中的控件绑定到 ViewModel，ViewModel 继承 INotifyChanged。ViewModel 中的简单控件更新工作正常。

我想创建一些包含一些信息字段的信息类。接下来，我想创建自己的线程，将 Info 类中的字段映射到 ViewModel 中更新 View 的字段。Info 类的对象将用作 ViewModel 中调用的函数的 arg。

```
private int someControl;
public SomeControl {
    get{return someControl;}
    set 
    {
        someControl = value;
        OnPropChanged("SomeControl");
    }

private InfoClass info = new InfoClass();
Thread thread = null;

public ViewModel()
{
    Thread thread = new Thread(new ThreadStart(update));
    thread.IsBackground = true;
    thread.start();

    someLongFunction(info);
}

private void update()
{
    SomeControl = info.someField;
    thread.sleep(1000);
    update();
} 
```

我应该添加或更改什么以定期获取更新？现在，仅当 someLongFunction 结束其工作时才进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:03:23.383

如果您真正想要的是连续的视图更新，那么您不必为此创建线程，因为您必须在 Dispatcher 线程（UI 线程）上进行这些更新。相反，您可以使用专为这种情况构建的[DispatcherTimer 类，您可以提供一个间隔，并且 DispatcherTimer 将在该间隔定期调用您的方法，并将在 Dispatcher Thread 上自动执行此操作。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)

# asp.net-mvc - 在 Web 应用程序中正确使用 C# 锁定

> ID：15247068
> 
> 赞同：1
> 
> 时间：2013-03-06T12:12:31.940
> 
> 标签：asp.net-mvc, locking

我有一个帮助类，它读取一个大的 XML 文档并生成一个 c# 对象列表。

我经常使用这些对象，所以我认为最好的方法是将它们保存在内存中，然后从那里访问它们。

我做了一个简单的存储库，它从内存中获取一个对象，如果不存在，它会添加它。

存储库如下所示：

```
public class XmlDocumentRepository
{
    private readonly ICacheStorage _cacheStorage;
    public XmlDocumentRepository(ICacheStorage cacheStorage)
    {
        _cacheStorage = cacheStorage;
    }

    private readonly object _locker = new object();

    private void DeserializeXmlDocument()
    {
        lock (_locker)
        {
            // I deserialize the xml document, i generate the c# classes, and save them in cache
            IEnumerable<Page> pages = new XmlDeserializerHelper().DeserializeXml();    

            foreach(var page in pages)
            {
                _cacheStorage.Add(page_Id, page);
            }
        }
    }

    public Page GetPage(Guid page_Id)
    {
        Page page = _cacheStorage.Get<Page>(page_Id);
        if (page != null)
            return page;

        lock (_locker)
        {
            page = _cacheStorage.Get<Page>(page_Id);
            if (page != null)
                return page;

            DeserializeXmlDocument();

            page = _cacheStorage.Get<Page>(page_Id);
            return page;
        }
    }
} 
```

用于 Web 应用程序（更准确地说是`XmlDocumentRepository`asp.net mvc）。

存储库的实现是否良好？我`lock`是否正确使用了这些语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:02:08.907

在我对这个问题的评论中，我误解了共享的缓存。我认为您将需要执行以下选项之一：

*   制作`XmlDocumentRepository`一个用于所有请求的单例，因为锁定对象是一个私有字段，因此每个请求都会有一个带有新字段的存储库的新实例。
*   使锁对象成为静态字段，以便在所有`XmlDocumentRepository`实例之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:38:58.310

作为主要规则，您希望保护对多个线程使用的数据存储的所有访问变化。我看到您的实施存在几个潜在问题；

1：ICacheStorage 是从外部提供的，这意味着这个集合可以在别处被修改，它可能被锁保护也可能不被锁保护。也许您应该要求集合本身在内部使用锁定或其他类型的线程安全机制？

2：您对数据访问的锁定保护不一致。在 GetPage 中，您在应用锁之前访问 _cacheStorage，而在反序列化中，您在锁中访问它。这意味着您可能会得到一个结果，其中一个正在添加到缓存中，而另一个正在从中获取。

3：您是否需要缓存、xml 读取或两者都需要线程安全？如果只需要保护缓存，则将 xml 的读取移到锁之外。如果同时保护两者，则应将整个 GetPage 函数放在锁内。

# rest - 特定模型的自定义 REST url

> ID：15247071
> 
> 赞同：5
> 
> 时间：2013-03-06T12:12:44.580
> 
> 标签：rest, ember.js, ember-data

Ember 中有没有办法为特定模型配置自定义 REST url？

就像这个模型：

```
App.Post = DS.Model.extend({
    title: DS.attr('string'),
    comments: DS.hasMany('App.Comment')
});
App.Comment = DS.Model.extend({
    content: DS.attr('string'),
    post: DS.belongsTo('App.Post')
}); 
```

而这家商店：

```
app.Store = DS.Store.extend({
    revision : 11,
    adapter : DS.RESTAdapter.extend({
        namespace : 'rest'
    })
}); 
```

我希望通过它`/rest/post/{id}/comments`而不是`/rest/comments`默认行为来检索评论。
是否可以为一个特定的模型配置一个 rest-url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T03:14:53.750

您可以注册一个额外的适配器并将其“作用域”到您的模型中。

```
App.Store.registerAdapter('App.Post', DS.RESTAdapter.extend({
  url: "/rest/post/"
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:17:35.800

这实际上只是针对整个应用程序中的一个模型，还是您的 REST 后端使用的默认“hasMany”uri？我问是因为我的 api（django rest 框架）使用了这个确切的 uri，并且它需要对 ember-data 项目的完整拉取请求，因为要构建 URL，适配器需要相关的“父”或“所有者”（rails devs 从来没有需要所以它不存在）。

我会编写你自己的适配器（只是子类化基本适配器，所以你只覆盖不同的单个 hasMany）。我为我的适配器编写的方法如下，这是我完整的适配器供参考。

这是 ember-data 修订版 11 友好顺便说一句（尚未升级到 12）

[https://github.com/toranb/ember-data-django-rest-adapter/blob/master/tests/adapter.js](https://github.com/toranb/ember-data-django-rest-adapter/blob/master/tests/adapter.js)

```
 findMany: function(store, type, ids, parent) {
        var json = {}
        , root = this.rootForType(type)
        , plural = this.pluralize(root)
        , ids = this.serializeIds(ids)
        , url = this.buildFindManyUrlWithParent(store, type, ids, parent);

        this.ajax(url, "GET", {
            success: function(pre_json) {
                json[plural] = pre_json;
                Ember.run(this, function(){
                    this.didFindMany(store, type, json);
                });
            }
        });
    }, 
```

# c# - 在 C# 中需要正则表达式模式

> ID：15247072
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:12:47.367
> 
> 标签：c#, regex

如何在 C# 中构造正则表达式模式以读取以以下格式开头的文本：

```
"Sec. 1.01."
"Sec. 1.02."
"Sec. 47.01."
"Sec. 47.06."
"Sec. 71.022." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:19:24.363

```
Sec\.\s\d+\.\d+\. 
```

上面的正则表达式可能会完成这项工作。

`Sec`完全匹配 Sec
`\.`匹配点
`\s`匹配空格
`\d`匹配数字（数字）
`\d+`匹配出现的一个或多个数字

如果您还想匹配逗号，`"`请在正则表达式的开头和结尾添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T12:14:04.507

也许：

```
"Sec\.\s\d+\.\d+\." 
```

是你正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:20:21.053

*让我们构建一个正则表达式！*

首先，您要匹配文字文本（包括空格）。但是，我们需要避开点。

```
"Sec\. " 
```

然后你想匹配一个或多个数字。`\d`匹配数字，`+`匹配前面的一个或多个：

```
"\d+" 
```

然后另一个点，再次逃脱：

```
"\." 
```

然后是一个或多个数字的另一个序列：

```
"\d+" 
```

最后还有一个点，逃脱了：

```
"\." 
```

把这些表格放在一起：

```
"Sec\. \d+\.\d+\." 
```

如果`Sec.`和数字之间的空格并不总是一个空格（例如，可能是空格序列或制表符），那么您可以使用`\s`空格类和`+`来多次匹配它（`"\s+"`）：

```
"Sec\.\s+\d+\.\d+\." 
```

如果您的正则表达式还必须匹配一行的开头和结尾，那么`^`将匹配开头和`$`结尾：

```
"^Sec\.\s+\d+\.\d+\.$" 
```

最后，如果你在 C# 中使用它，你必须在字符串前面加上 an 前缀，`@`以防止 C# 错误地解释斜杠：

```
string pattern = @"^Sec\.\s+\d+\.\d+\.$"; 
```

* * *

如果要捕获表达式的一部分，可以使用*捕获组*（写为`(?<name> regex )`。例如，捕获数字部分：

```
string pattern = @"^Sec\.\s+(?<num>\d+\.\d+)\.$"; 
```

现在您可以获得字符串的数字部分：

```
Regex regex = new Regex(pattern);
var match = regex.Match("Sec. 71.022.");
string num = match.Groups["num"].Value;
// num = "71.022" 
```

* * *

您可以在正则表达式参考中找到所有这些以及更多内容：

*   [正则表达式基本语法参考](http://www.regular-expressions.info/reference.html)
*   [.NET 特定语法](http://www.regular-expressions.info/refext.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:17:01.300

```
MatchCollection mc = Regex.Matches(a, @"^Sec[.]\s(?:\d*[.]){2}$");
foreach (Match item in mc)
{
    Console.WriteLine(item.Value);
} 
```

# python - 如何从基类动态创建派生类

> ID：15247075
> 
> 赞同：113
> 
> 时间：2013-03-06T12:13:01.900
> 
> 标签：python, class, inheritance

例如我有一个基类如下：

```
class BaseClass(object):
    def __init__(self, classtype):
        self._type = classtype 
```

从这个类我派生出其他几个类，例如

```
class TestClass(BaseClass):
    def __init__(self):
        super(TestClass, self).__init__('Test')

class SpecialClass(BaseClass):
    def __init__(self):
        super(TestClass, self).__init__('Special') 
```

是否有一种不错的 Pythonic 方法可以通过将新类放入我当前范围的函数调用动态创建这些类，例如：

```
foo(BaseClass, "My")
a = MyClass()
... 
```

因为会有评论和问题，为什么我需要这个：派生类都具有完全相同的内部结构，不同之处在于构造函数采用了许多以前未定义的参数。因此，例如，`MyClass`采用关键字`a`，而类的构造函数`TestClass`采用`b`and `c`。

```
inst1 = MyClass(a=4)
inst2 = MyClass(a=5)
inst3 = TestClass(b=False, c = "test") 
```

但他们不应该使用类的类型作为输入参数，比如

```
inst1 = BaseClass(classtype = "My", a=4) 
```

我得到了这个工作，但更喜欢另一种方式，即动态创建的类对象。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-03-06T12:55:00.200

这段代码允许您创建具有动态名称和参数名称的新类。里面的参数验证是`__init__`不允许未知参数的，如果你需要其他的验证，比如类型，或者它们是强制性的，只需在那里添加逻辑：

```
class BaseClass(object):
    def __init__(self, classtype):
        self._type = classtype

def ClassFactory(name, argnames, BaseClass=BaseClass):
    def __init__(self, **kwargs):
        for key, value in kwargs.items():
            # here, the argnames variable is the one passed to the
            # ClassFactory call
            if key not in argnames:
                raise TypeError("Argument %s not valid for %s" 
                    % (key, self.__class__.__name__))
            setattr(self, key, value)
        BaseClass.__init__(self, name[:-len("Class")])
    newclass = type(name, (BaseClass,),{"__init__": __init__})
    return newclass 
```

这就像这样工作，例如：

```
>>> SpecialClass = ClassFactory("SpecialClass", "a b c".split())
>>> s = SpecialClass(a=2)
>>> s.a
2
>>> s2 = SpecialClass(d=3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 8, in __init__
TypeError: Argument d not valid for SpecialClass 
```

我看到您要求在命名范围内插入动态名称——现在，*这*在 Python 中不被认为是一个好的做法——你要么有变量名称，在编码时已知，要么有数据——并且在运行时学习的名称更多“数据”比“变量”——

因此，您可以将您的类添加到字典中并从那里使用它们：

```
name = "SpecialClass"
classes = {}
classes[name] = ClassFactory(name, params)
instance = classes[name](...) 
```

如果您的设计绝对需要名称进入范围，只需执行相同操作，但使用[`globals()`](https://docs.python.org/2/library/functions.html#globals) 调用返回的字典而不是任意字典：

```
name = "SpecialClass"
globals()[name] = ClassFactory(name, params)
instance = SpecialClass(...) 
```

（类工厂函数确实可以在调用者的全局范围内动态插入名称 - 但这是更糟糕的做法，并且与 Python 实现不兼容。这样做的方法是获取调用者的执行框架，通过[sys._getframe(1)](https://docs.python.org/2/library/sys.html#sys._getframe)并在其`f_globals`属性中设置框架的全局字典中的类名）。

**更新，tl；博士：**这个答案已经变得流行，仍然非常具体到问题主体。关于如何 在 Python 中*“从基类动态创建派生类”*的一般答案 是一个简单的调用来`type`传递新类名、一个带有基类的元组和`__dict__`新类的主体 - 如下所示：

```
>>> new_class = type("NewClassName", (BaseClass,), {"new_method": lambda self: ...}) 
```

**更新**
任何需要这个的人也应该检查[dill](https://pypi.python.org/pypi/dill)项目 - 它声称能够像 pickle 对普通对象所做的那样腌制和取消腌制类，并且在我的一些测试中已经做到了。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-03-06T12:19:39.837

[`type()`](http://docs.python.org/2/library/functions.html#type)是创建类，特别是子类的函数，如问题中：

```
def set_x(self, value):
    self.x = value

# type() takes as argument the new class name, its base
# classes, and its attributes:
SubClass = type('SubClass', (BaseClass,), {'set_x': set_x})
# (More methods can be put in SubClass, including __init__().)

obj = SubClass()
obj.set_x(42)
print obj.x  # Prints 42
print isinstance(obj, BaseClass)  # True 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2019-10-10T14:57:21.197

要创建具有动态属性值的类，请查看以下代码。注意。这是python编程语言中的代码片段

```
def create_class(attribute_data, **more_data): # define a function with required attributes
    class ClassCreated(optional extensions): # define class with optional inheritance
          attribute1 = adattribute_data # set class attributes with function parameter
          attribute2 = more_data.get("attribute2")

    return ClassCreated # return the created class

# use class

myclass1 = create_class("hello") # *generates a class* 
```

# qt - 如何在 QPushButton 的边界和它的内部文本之间添加一些填充？

> ID：15247077
> 
> 赞同：8
> 
> 时间：2013-03-06T12:13:08.457
> 
> 标签：qt

较长的字符串在 QPushButton 中看起来不太好，因为文本和按钮框架之间没有间距，即文本紧紧地放置在按钮内。有没有办法添加一些填充？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T12:56:18.687

`QPushButton`您可以通过其样式表设置 a 的填充。

```
myButton->setStyleSheet("padding: 3px;"); 
```

或者

```
myButton->setStyleSheet("padding-left: 5px; padding-right: 3px;"
"padding-top: 1px; padding-bottom: 1px;"); 
```

更多关于样式表的信息可以在[这里](http://doc.qt.digia.com/stable/stylesheet-reference.html)找到。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-12T00:24:55.270

不必为每个按钮设置样式表，我发现更新样式更容易，以便每个按钮的最小尺寸大一点。您可以将 QProxyStyle 子类化，这是修改样式的最简单方法，因为它将更改选择的任何样式，即 QWindowsXPStyle、QWindowsVistaStyle、QMacStyle 等。

像这样覆盖`sizeFromContents`以使按钮的最小尺寸更大一点：

```
class ProxyStyle : public QProxyStyle
{
public:
    QSize sizeFromContents(ContentsType ct, const QStyleOption* opt, const QSize & csz, const QWidget* widget = 0) const
    {
        QSize sz = QProxyStyle::sizeFromContents(ct, opt, csz, widget);
        if (ct == CT_PushButton)
            sz.rwidth() += 20;

        return sz;
    }
}; 
```

然后在创建应用程序之后，但在创建第一个窗口调用之前：

```
a.setStyle(new ProxyStyle); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-22T07:12:11.150

您可以设置窗口/小部件中所有按钮的填充：

```
QPushButton { padding: 10px; } 
```

比应用于每个子小部件要好得多。

# python - 将灰度图像从 PIL 转换为 QPixmap 会出现什么问题？

> ID：15247078
> 
> 赞同：1
> 
> 时间：2013-03-06T12:13:16.057
> 
> 标签：python, pyqt, pyqt4, python-imaging-library, qpixmap

我的程序打开著名的[Lena](http://www.google.pl/search?hl=pl&site=imghp&tbm=isch&source=hp&biw=1600&bih=775&q=lena&oq=lena&gs_l=img.12...0.0.1.32684.0.0.0.0.0.0.0.0..0.0...0.0...1ac..5.img.Az3FN5oY3XU#hl=pl&site=imghp&tbm=isch&sa=1&q=lena%20grayscale&oq=lena%20grayscale&gs_l=img.12...0.0.0.4284.0.0.0.0.0.0.0.0..0.0...0.0...1c..5.img.sAzrLcVQ7Ck&bav=on.2,or.r_gc.r_pw.r_qf.&fp=50df47ad21472006&biw=1600&bih=775)图像，然后将其转换为 PIL 图像，然后将其转换为 QPixmap。

```
import sys
import cStringIO

from PyQt4 import QtGui, QtCore
from PIL import Image

class ImageLabel(QtGui.QLabel):
    def __init__(self, parent=None):
        QtGui.QLabel.__init__(self, parent)

        self.setGeometry(300, 300, 300, 350)
        self.setWindowTitle('Window')
        im = Image.open('Test_Images/Lena.bmp')

        self.bufor=QtCore.QBuffer()
        self.bufor.open(QtCore.QIODevice.ReadWrite)
        im.save(self.bufor, "PNG")

        strio = cStringIO.StringIO()
        strio.write(self.bufor.data())
        self.bufor.close()
        strio.seek(0)
        self.pil_image = Image.open(strio)
        self.pil_image.save('pil_image.png', 'PNG')
        data = self.pil_image.tostring()

        image = QtGui.QImage(data, self.pil_image.size[0], self.pil_image.size[1], QtGui.QImage.Format_Indexed8)
        pix = QtGui.QPixmap.fromImage(image)
        self.setPixmap(pix)

app = QtGui.QApplication(sys.argv)
imageLabel = ImageLabel()
imageLabel.show() 
```

但是我在转换后得到了倾斜和倍增的图像[莉娜](http://i.stack.imgur.com/GPwor.png)

奇怪的是：程序可以在一些类似的（灰度，8BPP）图像上正常工作。有什么问题？

# python - 熊猫中“！=”和“not_equal”之间的区别

> ID：15247082
> 
> 赞同：2
> 
> 时间：2013-03-06T12:13:37.507
> 
> 标签：python, pandas

从 中选择时`DataFrame`：

使用`not_equal`给出正确的结果：

```
d[not_equal(d.something,None)] 
```

但是使用`!=`不会：

```
d[d.something != None] 
```

为什么是这样？

更新，d.something dtype('float64')，如果我尝试选择 NaN 值 d[d.something != nan]，情况也是如此

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:43:13.947

我将回答一些关于“如果我尝试选择 NaN 值 d[d.something != nan] 的情况也是如此”

您需要注意 NaN 不等于另一个 NaN：

```
In [40]: numpy.NaN == numpy.NaN
Out[40]: False

In [41]: numpy.NaN != numpy.NaN
Out[41]: True 
```

这似乎倒退了。但是，当您按照“如果它不是一个数字，它就不能等于任何东西”来思考第一个问题时，它就会变得更加清晰。 `==`将始终作为任何一方返回`False`。`NaN`的，如果你解释`a != b`为`not (a == b)`，第二个也是有道理的。这可以解释部分问题。你`d[d.something != NaN]`总会回来`d`的。

我将通过深入研究代码来更多地研究另一个问题。

# php - 从绝对路径上移文件夹

> ID：15247084
> 
> 赞同：6
> 
> 时间：2013-03-06T12:13:40.170
> 
> 标签：php, directory, move

如何完成从绝对路径上移一个文件夹？

**文件结构：**

```
/folder/
/folder/config.php
/folder/classes/test.php 
```

从 test.php 我想 include_once 或 require_once config.php 文件。

我已经在 test.php 中尝试过，但它不起作用：

```
require_once(dirname(__FILE__) . '/../config.php'); 
```

错误消息：*PHP 致命错误：require_once(): 无法打开所需的 '/loooong-path/classes/../test.php'*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T12:20:32.453

你可以试试：

```
require_once(realpath(__DIR__ . '/../config.php')); 
```

未经测试，但理论上它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T12:18:14.990

为什么不只是

```
require_once('../config.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:16:37.360

试试这个 ：

```
require_once(dirname(__FILE__).'../config.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:20:12.160

`require_once(dirname(__FILE__) . '/../config.php');`

# ruby-on-rails-3 - Ruby on rails - 基本形式 - nil:NilClass 的未定义方法“[]”

> ID：15247088
> 
> 赞同：1
> 
> 时间：2013-03-06T12:13:50.877
> 
> 标签：ruby-on-rails-3, forms, activerecord

我的“订阅者”有问题。它应该只向数据库添加一封电子邮件，症状为活动/非活动。它给了我这个错误 - nil:NilClass 的未定义方法 `[]'

```
 Extracted source (around line #2):

1: <div id="subscriber">
**2:    <%= form_for @subscriber do |f| %>**
3:      <%= f.label :email %>
4:      <%= f.text_field :email %>
5:      <%= f.hidden_field :active, :value => true %> 
```

这是模型：

```
class Subscriber < ActiveRecord::Base 

  attr_accessor :email, :active

  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end
end 
```

这是我的看法：

```
<div id="subscriber">
    <%= form_for @subscriber do |f| %>
        <%= f.label :email %>
        <%= f.text_field :email %>
        <%= f.hidden_field :active, :value => true %>
        <%= f.submit t('.submit') %>
    <% end %>
</div> 
```

这是控制器：

```
class SubscribersController < ApplicationController

  def create
    @subscriber = Subscriber.new(params[:subscriber])

    if @subscriber.valid?
      flash[:notice] = "Thx for subscription"
      @subscriber.save
      redirect_to root_url
    else
      render :action => 'new'
    end
  end

end 
```

以下是路线：资源：订阅者

我是 RoR 的新手，所以如果您需要更多日志或信息，请告诉我。多谢。

# php - PHP将字符串分成几部分

> ID：15247090
> 
> 赞同：0
> 
> 时间：2013-03-06T12:13:53.653
> 
> 标签：php, explode

我有一个存储在 $buffer 中的字符串，其中包含三个信息

`tweetid category tweet`

例如。

```
123432 politics 'this is a political tweet' 
```

我想将它分成几部分，以便将 123432 存储在一个变量或数组中，将政治存储在另一个数组中，这是一条政治推文（不带引号）到第三个数组中。

另外我想逐字阅读第三个数组......

我尝试使用爆炸功能，但“这是一条政治推文”也被分成几部分......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:17:28.397

继续使用该`explode()`函数，但指定要执行的最大爆炸次数。

[php.net](http://php.net/manual/en/function.explode.php)描述：*数组爆炸（字符串 $delimiter，字符串 $string [，int $limit]）*

```
explode(' ', $buffer, 3); 
```

这应该给你

```
array(3) {
    [0]=>123432
    [1]=>politics
    [2]=>this is a political tweet
} 
```

**编辑：** 如果您需要删除`'`推文字符串的开头和结尾，请使用 PHP 修剪函数。

```
rtrim(ltrim(array[2], "'"), "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:17:09.467

`explode`接受一个`limit`数字。

```
var_dump(explode(' ', "123432 politics 'this is a political tweet'", 3)); 
```

结果如下：

```
array(3) {
    [0]=> string(5) "23432"
    [1]=> string(8) "politics"
    [2]=> string(27) "'this is a political tweet'"
} 
```

# c# - 如何使用 C# 使用 Selenium WebDriver 实例化 InternetExplorerDriver

> ID：15247095
> 
> 赞同：9
> 
> 时间：2013-03-06T12:14:03.570
> 
> 标签：c#, selenium, selenium-webdriver, remotewebdriver, iedriverserver

```
new InternetExplorerDriver(); 
```

但我可以看到如下异常：

```
OpenQA.Selenium.DriverServiceNotFoundException was unhandled by user code
  HResult=-2146233088
  Message=The IEDriverServer.exe file does not exist in the current directory or in a directory on the PATH environment variable. The driver can be downloaded at http://code.google.com/p/selenium/downloads/list.
  Source=WebDriver
  StackTrace:
       at OpenQA.Selenium.DriverService.FindDriverServiceExecutable(String executableName, Uri downloadUrl)
       at OpenQA.Selenium.IE.InternetExplorerDriverService.CreateDefaultService()
       at OpenQA.Selenium.IE.InternetExplorerDriver..ctor(InternetExplorerOptions options)
       at OpenQA.Selenium.IE.InternetExplorerDriver..ctor()
       at Accelrys.CommonTestFramework.WebActions.WebActionLibrary.CreateSeleniumDriver() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T12:23:18.320

在创建对象之前将这些行添加到您的代码中。

```
 System.setProperty("webdriver.ie.driver", 
        "E:\\path where your IEDriverServer is located\\IEDriverServer.exe"); 
```

[您可以从这里](http://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_Win32_2.31.0.zip)下载 IEDriverServer.exe 文件。

当您使用 C# 时，您可以使用以下代码。

```
private const string IE_DRIVER_PATH = @"C:\PathTo\IEDriverServer";
var driver = new InternetExplorerDriver(IE_DRIVER_PATH, options); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T12:20:47.890

正如例外所说，您需要根据您拥有的 IE 下载 32 位或 64 位的 IEDriverServer，并确保它在我们的路径中可用。也就是说，当您在命令行上键入 IEDriverServer.exe 时，它​​应该被解析。试试看

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T13:08:01.957

您需要安装 IEDriverServer 并使其成为您项目的一部分。

[这篇文章](https://stackoverflow.com/questions/11010317/iedriverserver-does-not-exist-error-during-running-selenium-test-with-c-sharp/11368068#11368068)包含下载链接和一些关于使其成为您项目的一部分的附加信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-20T15:07:04.450

> .NET 绑定不扫描可执行文件的 %PATH% 环境变量。

[https://groups.google.com/forum/?fromgroups#!topic/webdriver/EvTyEPYchxE](https://groups.google.com/forum/?fromgroups#!topic/webdriver/EvTyEPYchxE)

因此，将 IEDriverServer 放在 .NET 的 %PATH% 中不起作用**。**

使用捆绑了 IE 驱动程序的非官方 NuGet 版本（它放在 Packages-dir 中并从测试项目中引用），或者自己将其与项目捆绑在一起，并在首选项下将 exe 标记为*Copy（如果较新）。*然后将相对路径添加到`InternetExplorerDriver`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-24T16:09:56.357

您可以在构造函数的重载中传入 IEDriverServer 的路径

```
namespace OpenQA.Selenium.IE
    //
    // Summary:
    //     Initializes a new instance of the OpenQA.Selenium.IE.InternetExplorerDriver class
    //     using the specified path to the directory containing IEDriverServer.exe.
    //
    // Parameters:
    //   internetExplorerDriverServerDirectory:
    //     The full path to the directory containing IEDriverServer.exe.
    public InternetExplorerDriver(string internetExplorerDriverServerDirectory); 
```

所以

```
new InternetExplorerDriver("..\.."); // if it was two folders up 
```

# .net - 如何检查 HttpContext 中是否存在属性

> ID：15247097
> 
> 赞同：0
> 
> 时间：2013-03-06T12:14:18.567
> 
> 标签：.net, vb.net, http

我有以下代码尝试读取与用户相关的已保存数据：

```
 res = HttpContext.Current.Profile.GetPropertyValue(properyName) 
```

如果没有使用properyName 定义的属性，则会引发异常。有没有办法检查这个属性是否在没有这个例外的情况下定义？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:25:44.857

不，没有办法。正如[http://msdn.microsoft.com/en-us/library/system.web.profile.profilebase.getpropertyvalue.aspx](http://msdn.microsoft.com/en-us/library/system.web.profile.profilebase.getpropertyvalue.aspx)上的文档所说，您应该捕获异常，然后确定该属性不可用

# django - django 过滤日期时间 = 无

> ID：15247101
> 
> 赞同：4
> 
> 时间：2013-03-06T12:14:33.873
> 
> 标签：django, aggregates

我有一个表，其中包含有关 fieldmeasurement 的元数据，其中字段“startDate”的类型为日期时间。当没有可用信息时，该值可以为空。我想在这个字段上运行一些统计数据，并获得最小值和最大值（即所有记录中最旧的测量值）。Max 没有问题，但 Min 聚合返回 None（空字段中的值）。

所以我的想法是在运行聚合之前从查询集中过滤这些记录。我找不到如何做到这一点。

我试过了

```
oldestdate = Measurement.object.filter(startDate__isNull=True).aggregate(Min('startDate'))['startDate__min'] 
```

知道出了什么问题，或者如何做到这一点？

编辑：更多测试表明：

```
Measurement.objects.filter(startDate_isnull=True) -> only records with startDate = None
Measurement.objects.filter(startDate_isnull=False) -> all records, also the ones with startDate = None. 
Measurement.objects.exclude(startDate__isnull=False) -> only records with startDate = None
Measurement.objects.exclude(startDate__isnull=True) -> shows all records (also startDate == None) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:25:18.547

```
oldestdate = Measurement.objects.filter(
    startDate__isnull=True).aggregate(min_date=Min('startDate'))

# or to make it small:

oldestdate = Measurement.objects.filter(startDate__isnull=True
    ).aggregate(min_date=Min('startDate'), max_date=Max('startDate')) 
```

# jquery - jQuery Validation 插件将成功类添加到另一个元素

> ID：15247104
> 
> 赞同：1
> 
> 时间：2013-03-06T12:14:36.007
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件。

如何将成功类添加到另一个元素？

如果我输入正确的电子邮件地址，我想为 - 分配一个类`div.field`- 这可以使用 jQuery Validation 插件吗？

[jsfiddle.net/zidski/qcrhk/](http://jsfiddle.net/zidski/qcrhk/)

HTML：

```
<form id="registration" method="get">
    <fieldset>
        <legend>Registration Details</legend>
        <div class="field">
            <label for="email">Email<em>*</em>

            </label>
            <input type="text" name="email" id="email" class="required email" />
        </div>
        <div class="field">
            <label for="confirm_email">Confirm email<em>*</em>

            </label>
            <input type="text" name="confirm_email" id="confirm_email" class="required email" />
        </div>
        <div class="password">
            <div class="field">
                <label for="password">Password<em>*</em>

                </label>
                <input type="password" name="password" id="password" class="required password min-length_6" />
            </div>
            <div class="field">
                <label for="confirm_password">Confirm<em>*</em>

                </label>
                <input type="password" name="confirm_password" id="confirm_password" class="confirmation-of_password" title="Please enter the exact same password" />
            </div>
        </div>
    </fieldset> 
```

JavaScript：

```
var formActions = {};

// Form initialisation
formActions.init = function () {
    // Validate For Registration
    $('#registration').validate({
        rules: {
            email: "required",
            confirm_email: {
                required: true,

                email: true
            },
            password: {
                required: true,
                minlength: 5
            },
            confirm_password: {
                required: true,
                minlength: 5,
                equalTo: "#password"
            }
        },
        messages: {
            email: {
                required: "Please enter a valid email address."
            },
            confirm_email: {
                required: "Please enter a valid email address.",

            },
            password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long"
            },
            confirm_password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long",
                equalTo: "Please enter the same password as above"
            }
        }
    });

};

$(formActions.init); 
```

CSS：

```
/* Form styles 
------------------------------------------*/
 form {
}
legend {
    font-size:1.4em;
    font-weight:bold;
    padding:0 10px;
}
.field {
    overflow: auto;
    padding: 5px 10px 10px 10px;
}
.field.terms, .field.terms label {
    width:auto;
}
.field.terms input {
    width:16px;
    float:left;
}
label, .checkbox p, .radio p {
    padding: 0.2em 0 0;
    display:block;
    font-size:1.2em;
}
form label {
    font-size:1.2em;
    margin:0 0 5px 0;
}
form label em {
    color:red;
    font-style:normal;
}
input, select {
    width: 250px;
    clear:both;
}
form label.error {
    margin:0px;
    font-size:1.2em;
    color:Red;
}
input.checkbox {
    border: none
}
input:focus {
    border: 1px solid #c7e2f1;
    border-top:1px solid #5794bf;
    width:250px;
    padding:2px;
}
input.error {
    border: 1px solid #ff8282;
    border-top:1px solid red;
    background:#ffdcdc;
    width:250px;
    padding:2px;
}
select {
    width: 163px;
}
.error .messages, .error .messages li {
    float: left;
    margin: 0;
    padding: 0;
    list-style: none;
}
.error .messages li {
    padding: 0.1em 0 0 1.5em;
    color: #b92d23;
}
.error input {
    color: #b92d23;
}
.success {
    background: url(/design/images/success_icon.png) 350px 0.2em no-repeat;
}
.error {
    background: url(/design/images/error_icon.png) 350px 0.2em no-repeat;
}
fieldset {
    border: 1px solid #ccc;
    margin-bottom:10px;
}
.checkbox p, .checkbox .inputs {
    float: left;
}
.checkbox p {
    padding: 0;
    margin: 0 0 1em;
}
.checkbox .inputs {
    width: 165px;
}
.checkbox .inputs, .checkbox .inputs li {
    list-style: none;
    margin: 0 0 1em;
    padding: 0;
}
.checkbox .inputs li {
    margin: 0 0 0.3em;
}
.checkbox li label, .checkbox li input {
    display: inline;
    float: none;
    width: auto;
}
.validate_any {
    position: relative;
}
.validate_any.error {
    padding-top: 2em;
    background-position: 0 0.2em;
}
#terms_block {
    background-position: 205px 0.2em;
}
#terms_block .messages li {
    padding-top: 0.2em;
}
.validate_any .messages {
    position: absolute;
    left: 0;
    top: 0.1em;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:34:01.423

您需要简单地修改默认`highlight`和`unhighlight`回调函数。您只能修改*而不是删除*这两个回调函数，否则添加/删除标准错误/有效类的正常行为将被破坏。

我采用了默认的回调函数来保留它们的正常行为，并添加了以下行，它将针对父`div`级并应用类`.newclass`。我只是为它分配了一个绿色背景色，`class`只是为了证明它在 jsFiddle 中工作。您可以根据需要重命名和重新设置它的样式`class`。

```
$(element).parent('div.field').addClass('newclass'); 
```

**演示：http: [//jsfiddle.net/C7eWy/](http://jsfiddle.net/C7eWy/)**

将这些修改后的回调函数添加到您的`.validate()`：

```
 highlight: function (element, errorClass, validClass) {
        if ($(element).attr("type") === "radio") {
            this.findByName(element.name).addClass(errorClass).removeClass(validClass);
        } else {
            $(element).addClass(errorClass).removeClass(validClass);
            $(element).parent('div.field').removeClass('newclass'); // <-- added this line
        }
    },
    unhighlight: function (element, errorClass, validClass) {
        if ($(element).attr("type") === "radio") {
            this.findByName(element.name).removeClass(errorClass).addClass(validClass);
        } else {
            $(element).removeClass(errorClass).addClass(validClass);
            $(element).parent('div.field').addClass('newclass'); // <-- added this line
        }
    }, 
```

请参阅文档以了解有关这些选项的更多信息：http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:02:59.320

试试下面的方法

```
rules: {
            email: "required",
            confirm_email: {
                required: true,

                email: true
            },
            password: {
                required: true,
                minlength: 5
            },
            confirm_password: {
                required: true,
                minlength: 5,
                equalTo: "#password"
            }
        },
        messages: {
            email: {
                required: "Please enter a valid email address."
            },
            confirm_email: {
                required: "Please enter a valid email address.",

            },
            password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long"
            },
            confirm_password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long",
                equalTo: "Please enter the same password as above"
            }
        },
        highlight:function(element, errorClass, validClass) {
            $(element).parents('.control-group').addClass('error');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).parents('#email').removeClass('error');
            $(element).parents('#email').addClass('success');
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:16:52.927

```
if($('#emailId').valid() == 1)
  $('#successDivId').addClass('success');
else
//remove class 
```

这里如果验证失败，它将返回 0 ，否则将返回 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:23:21.737

您还可以添加一个成功回调函数：

```
...
$('#registration').validate({
        rules: {
            email: "required",
            confirm_email: {
                required: true,

                email: true
            },
            password: {
                required: true,
                minlength: 5
            },
            confirm_password: {
                required: true,
                minlength: 5,
                equalTo: "#password"
            }
        },

        success: function(){
            alert("success"); // you're free to add your CSS class here
        },
... 
```

# maven - Maven 3.0.4 无法部署，但 Maven 3.0.0 工作正常

> ID：15247106
> 
> 赞同：2
> 
> 时间：2013-03-06T12:14:44.353
> 
> 标签：maven, maven-3, nexus

我有一个简单的 Maven 项目设置，可以部署到本地 Nexus 服务器。所有相关的配置元素都已就位（`<distributionManagement>`带有 URL 的部分、`<server>`带有用户名和密码的 settings.xml 文件中的元素等）。我知道设置是正确的，因为在 Maven 3.0 上，我可以部署。在 Maven 3.0.4 上，我有两个问题。

如果我尝试使用开箱即用的 3.0.4 进行部署，我会得到一个`handshake_failure`. 据我所知，这是因为 3.0.4[切换了支持 HTTP 客户端](http://maven.apache.org/guides/mini/guide-http-settings.html)。`javax.net.ssl.trustStore`按照指示，我已将服务器 CA 的证书包含在我的环境变量中指向的信任库中，[以及](http://maven.apache.org/guides/mini/guide-repository-ssl.html)`MAVEN_OPTS`由 指定的密钥库中的客户端证书。同样，这适用于 3.0。出于某种原因，新的 HTTP 客户端没有接收到它。`javax.net.ssl.keyStore`

因此，我尝试将`wagon-http-lightweight`JAR 放到`lib/ext/`3.0.4 的目录中，这让我遇到了第二个问题：一旦我强制使用`lightweight`客户端，我就会停止获取`handshake_failure`并开始获取 HTTP 401。同样，用户名和密码在 Maven 下工作3.0。它显然是在选择用户名，因为运行 with`-X`包括“

我已经为此挣扎了几个小时，但我已经走到了死胡同。我欢迎一个解决方案，但我也欢迎对我的下一步行动提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:41:38.530

我会推荐：

*   升级到现已发布的 3.0.5，并修复了许多与 SSL 相关的问题，并升级了故障货车。

*   阅读：

    *   [Maven 3.0.4 发行](http://maven.apache.org/docs/3.0.4/release-notes.html)说明。3.0.4 描述了有关 httpclient 的更改。

    *   [Maven 3.0.5 发行](http://maven.apache.org/docs/3.0.5/release-notes.html)说明。这有一个模糊的解释，但如果你仔细观察，你会发现：

        *   [MNG-5430](http://jira.codehaus.org/browse/MNG-5430)升级 Wagon 的版本。换句话说，这意味着[在 3.0.4 中被破坏的 SSL 支持](http://jira.codehaus.org/secure/ReleaseNote.jspa?projectId=10335&version=18697)是固定的。
    *   [HTTP 设置的 Maven 指南](http://maven.apache.org/guides/mini/guide-http-settings.html)。这些反映了上述变化，我相信会解决您的问题。

# mysql - What Joins 用于将多个表连接到一个视图中

> ID：15247108
> 
> 赞同：3
> 
> 时间：2013-03-06T12:14:45.737
> 
> 标签：mysql, sql, join, view

我在 mysql 中有一个带有多个表的数据库，并且希望将多个表连接到一个视图中，以使我不必在 php 中构建 3 或 4 个 sql 语句甚至是一个大型连接语句来获取相同的信息。

这是我想加入的所有表格

```
track_title               
+----+------------------+
| ID |      TITLE       |
+----+------------------+
|  1 | Title Here       |
|  2 | Another Title    |
|  3 | Some Other Title |
+----+------------------+

track_artist
+----+----------------+-----------+-----------+
| ID | TRACK_TITLE_ID | ARTIST_ID | SYMBOL_ID |
+----+----------------+-----------+-----------+
| 1  | 1              | 1         | 2         |
| 2  | 1              | 2         | 1         |
| 3  | 3              | 1         | 1         |
+----+----------------+-----------+-----------+

artist

+----+-------------+
| ID | ARTIST      |
+----+-------------+
| 1  | Linkin Park |
| 2  | Metallica   |
+----+-------------+

symbol
+----+--------+
| ID | SYMBOL |
+----+--------+
| 1  |        |
| 2  | Feat.  |
+----+--------+

tracklisting
+----+----------+----------+---------------+---------+
| ID | TRACK NO | TITLE_ID | VERSION       | DISC NO |
+----+----------+----------+---------------+---------+
| 1  | 1        | 1        |               | 1       |
| 2  | 1        | 2        | Album Version | 1       |
| 3  | 1        | 3        | Live Version  | 1       |
+----+----------+----------+---------------+---------+ 
```

这是我正在寻找的最终视图

```
+----+----------+------------------+---------------+-----------------------------+---------+
| ID | TRACK NO | TITLE            | VERSION       | ARTIST                      | DISC NO |
+----+----------+------------------+---------------+-----------------------------+---------+
| 1  | 1        | Title Here       |               | Linkin Park Feat. Metallica | 1       |
| 2  | 1        | Another Title    | Album Version |                             | 1       |
| 3  | 1        | Some Other Title | Live Version  | Linkin Park                 | 1       |
+----+----------+------------------+---------------+-----------------------------+---------+ 
```

在过去的 3 天里，我一直在用左、右、加入和完全加入来抨击我的头，但似乎无法让它发挥作用。

基本上我想要发生的是 track_artist 表将从各自的表中获取艺术家和符号，并将它们连接到一列中。然后加入 title 和 concat 列来获得这个视图。

```
full_artist_view
+----------+------------------+-----------------------------+
| TITLE_ID | TITLE            | FULL_ARTIST                 |
+----------+------------------+-----------------------------+
| 1        | Title Here       | Linkin Park Feat. Metallica |
| 2        | Another Title    |                             |
| 3        | Some Other Title | Linkin Park                 |
+----------+------------------+-----------------------------+ 
```

我已经做到了这一点，但是当我尝试将其加入跟踪列表时，我似乎使我的服务器崩溃，这变得非常痛苦。没有mysql错误所以我猜我使用了错误的连接或者这是不可能的。（虽然我看不出这是不可能的）

tracklisting 表每周持续增长 1000 条记录，并且保持在 +- 75000 条记录。

对我来说，这是应该工作的 sql，但没有

```
FROM full_artist_view LEFT JOIN tracklisting ON 
full_artist_view.TITLE_ID = tracklisting.TITLE_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:55:44.737

虽然我只有你的小数据样本，但我看不到你的`full_artist_view`代码是什么样的。您应该能够使用以下方法获得结果：

```
select tt.id,
  tl.`track no`,
  tt.title,
  coalesce(tl.version, '') version,
  group_concat(concat(coalesce(a.artist, ''), ' ', coalesce(s.symbol, '')) order by a.artist SEPARATOR ' ') artist,
  tl.`disc no`
from track_title tt
inner join tracklisting tl
  on tt.id = tl.TITLE_ID
left join track_artist ta
  on tt.id = ta.TRACK_TITLE_ID
left join artist a
  on ta.artist_id = a.id
left join symbol s
  on ta.symbol_id = s.id
group by tt.id, tl.`track no`, tt.title, tl.version, tl.`disc no` 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/0478a/24)。这将返回：

```
| ID | TRACK NO |            TITLE |       VERSION |                       ARTIST | DISC NO |
---------------------------------------------------------------------------------------------
|  1 |        1 |       Title Here |               | Linkin Park Feat. Metallica  |       1 |
|  2 |        1 |    Another Title | Album Version |                              |       1 |
|  3 |        1 | Some Other Title |  Live Version |                 Linkin Park  |       1 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:46:46.107

快速播放，我认为（但不确定）你需要这样的东西：-

```
SELECT a.Id, a.Track_No, b.Title, a.Version, GROUP_CONCAT(CONCAT(d.Artists, e.Symbol)), a.Disc_No
FROM tracklisting a
INNER JOIN track_title b ON a.Title_id = b.Id
LEFT OUTER JOIN track_artist c ON b.Id = c.Track_Title_Id
LEFT OUTER JOIN artist d ON c.Artist_Id = d.Id
LEFT OUTER JOIN symbol e ON d.SymbolId = e.Id
GROUP BY a.Id, a.Track_No, b.Title, a.Version, a.Disc_No 
```

但我可能错过了一些东西，所以让我知道！

# javascript - 子菜单相对于主菜单的位置

> ID：15247109
> 
> 赞同：1
> 
> 时间：2013-03-06T12:14:46.623
> 
> 标签：javascript, jquery, html, css

我有这个菜单**在主菜单的第一项**（顶部）上处于活动状态：

![在此处输入图像描述](../Images/c9e1a82b3960d4d71230ee3f526d2965.png)

我遇到的问题是，当用户单击**中间、第四或最后一个主菜单项**时，**子菜单**现在看起来像这样（摆脱一切）：

![在此处输入图像描述](../Images/d390e381053090fdc324717a7bee6ebc.png)

另外，**主菜单会由客户自己长大**，所以会有第六，第七等等……所以**我不能只用一个班级来控制现在的项目**……

关于如何找到关于此的**css / jquery**解决方案的任何想法？试图遵循基于设计的第一张图片。

这是我的标记：

```
 <ul id="mainmenu" class="clearfix">
                    <li class="active">
                        <a class="arrowdown" href="javascript:void(0)">ANSIEDAD</a>
                        <ul class="sublist">
                            <li>
                                <a href="javascript:void(0)">Política</a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">Economía</a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">Sociedad</a>
                            </li>
                            <li class="active">
                                <a href="javascript:void(0)">Medios</a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">Inmobiliario</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:void(0)">PRETENSIÓN</a>
                    </li>
                    <li>
                        <a href="javascript:void(0)">HEDONISMO</a>
                    </li>
                    <li>
                        <a href="javascript:void(0)">MATERIALISMO</a>
                    </li>
                    <li>
                        <a href="javascript:void(0)">ARROGANCIA</a>
                    </li>
                    <li id="menu_search">
                        <a href="javascript:void(0)"></a>
                    </li>
                </ul> 
```

和CSS：

```
ul#mainmenu{
    font-family: Georgia, Times, "Times New Roman", serif;
    width: 754px;
    margin: 0 auto;
    li{
        float: left;
        list-style: none;
        background: #999999;
        margin-right: 4px;
        .round_corners();
        width: 140px;
        text-align: center;
        padding: 3px 0px;
        position: relative;
        a{
            text-decoration: none;
            color: #ffffff;
            text-transform: uppercase;
            font-size: 14px;
            &.arrowdown{
                padding-bottom: 10px;
                background: url('../img/sprites.png') no-repeat center -169px;
            }   
        }
        &#menu_search{
            background: url('../img/sprites.png') #000 2px 2px;
            width: 34px;
            height: 28px;
            padding: 0;
            margin-right: 0;
            a{
                display: inline-block;
                width: 100%;
                height: 100%;
            }
        }
        &.active{
            background: #000000;
        }
        &:hover{
            background: #000000;
            color: #ffffff;
        }
        ul.sublist{
            position: absolute;
            width: 560px;
            top: 39px;
            left: 40px;
            li{
                float: left;
                margin-right: 5px;
                margin-bottom: 5px;
                width: auto;
                padding: 1px 9px;
                background: #666666;
                a{
                    text-transform: none;
                }
                &.active{
                    background: #000000;
                }
                &:hover{
                    background: #000000;
                    color: #ffffff;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:18:29.880

尝试给主菜单一个最大宽度。在这种情况下，我假设您希望其最大宽度为 100%。

```
#mainmenu {
    max-width: 100%;
} 
```

这将不允许主菜单超过页面的宽度。不过，您可能会遇到新的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:48:39.850

使用`max-width`将解决您的问题。[这](http://jsfiddle.net/snikrs/c4xkR/1/)是一个如何使用 max-width 来检查子菜单的示例。

您可以尝试将子菜单的锚点移动到更集中的位置，而不是将子菜单分成两行。只是我的2美分。

# regex - 正则表达式查找相邻行上出现的相同字符串

> ID：15247110
> 
> 赞同：0
> 
> 时间：2013-03-06T12:14:46.717
> 
> 标签：regex

我不太擅长正则表达式，但需要使用它来搜索数百个日志文件以找到特定的出现。过去我通常能够使用它们来查找单词或短语的所有出现，但这次我需要一些更复杂的东西（我认为）。

日志文件如下所示：

```
2013-03-05 14:57:58 DEBUG [Dossier returned: ]
2013-03-05 14:57:58 DEBUG [Dossier sent: ] htt
2013-03-05 14:57:59 DEBUG [Dossier returned: ]
2013-03-05 14:58:02 DEBUG [Dossier sent: ] htt
2013-03-05 14:58:49 DEBUG [Dossier sent: ] htt
2013-03-05 14:58:50 DEBUG [Dossier returned: ]
2013-03-05 14:58:50 DEBUG [Dossier sent: ] htt
2013-03-05 14:58:50 DEBUG [Dossier returned: ] 
```

我想找到的唯一事件是 [Dossier sent: ] 出现在相邻行的位置。这突出了程序中的错误。将不胜感激任何帮助。

编辑：感谢您的指导。我正在使用 powershell 来解析文本文件。所以正则表达式在其中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:17:21.803

如果要匹配`[Dossier sent: ]`出现的整行。然后你应该使用：

```
^.+?Dossier\ssent:.+?$ 
```

另一方面，如果您试图捕获方括号之间的任何内容，那么您可以使用：

```
DEBUG\s([[].+?[]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:27:47.617

根据您使用的语言，多行匹配可能会有所不同。你可以试试这个：

```
^.*\[Dossier sent: \].*\n.*\[Dossier sent: \].*$ 
```

或者我们可以使用反向引用来缩短它：

```
^.*(\[Dossier sent: \]).*\n.*\1.*$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:35:58.003

使用多行模式，这对我有用：

```
(.*?\[Dossier sent: \].*?(?:\n|\Z)){2} 
```

# backbone.js - 在backbone.js中过滤集合中的最大值

> ID：15247111
> 
> 赞同：3
> 
> 时间：2013-03-06T12:14:50.323
> 
> 标签：backbone.js, underscore.js

我有一组具有结构的模型：

{"name":"xyz","company":"abc","re​​cNumber":"M34/14-15/23"}

我需要从该集合中获取其 recNumber 最高的特定模型（基于最后一个斜杠后的数字）。我想它可以用下划线的 .filter 来完成，但不知道在这种情况下确切的构造是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T12:33:31.157

尝试这个;

```
model = collection.max(function(m){
  return _.last(m.get('recNumber').split('/'));
}); 
```

`collection.max()`返回列表中的最大值。

`_.last(array)`返回数组的最后一个元素。

jsfiddle[在这里](http://jsfiddle.net/x4ZT3/)

# sql - 存储过程 - 将两个值传递给存储过程

> ID：15247115
> 
> 赞同：3
> 
> 时间：2013-03-06T12:15:00.370
> 
> 标签：sql, stored-procedures

```
create proc coursenames 
 @course varchar(30), @In varchar(20) 
as 
select fname, lname
from student
where course = @course
and lname like @In+'%' 
```

这段代码的最后一行`and lname like @In+'%'`，我不完全确定它是做什么的？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:18:36.457

这意味着选择所有名称具有 In 前缀的学生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:22:51.780

在like 子句中有两个可能的占位符。

*   `%`
*   `_`

`%`意思是“任意数量的字符，0个或更多”

意思是“`_`一个字符”。

将`@In+'%'`字符串 in`@In`和连接起来`%`，这意味着该列以任何 in `@In`is 开头并以任何或只是 in 中的字符串结尾`@In`。

另一个例子：

```
foo like '%ab_d' 
```

搜索 foo 列以任何内容开头并以例如“abcd”或“abxd”结尾的所有行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:28:12.387

它用于过滤记录`where lname is starting with what you pass in @In and anything after that.`请阅读此[msdn 链接](http://msdn.microsoft.com/en-us/library/ms179859.aspx)以更好地理解

例如，如果您通过`@In = 'Ja'`并且您的`lname`记录如下

```
lname
------
Jackson
James
Robert 
```

您的选择结果`lname like @In+'%'`将是以下开头的 lname `'Ja'`。（即；`'Robert'` *过滤掉，*因为它不是以`'Ja'`

```
lname
------
Jackson
James 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:34:04.680

在 SQL 中，% 符号用于通配符搜索。基本上，您的代码的最后一行是询问任何以@In 参数开头的姓氏的记录。% 符号允许查询中的 LIKE 查找您提供的文本以及出现在它之后的任何文本。如果您将 % 符号放在 @In 参数之前，您将返回姓氏以 @In 结尾的任何记录；相应地，如果您在查询中输入 '%' + @In + '%' ，它将返回 @In 出现在字符串中任何位置的记录

# c# - 消除性能开销

> ID：15247122
> 
> 赞同：0
> 
> 时间：2013-03-06T12:15:18.010
> 
> 标签：c#, .net, sql, sql-server, database

我已将应用程序中的性能开销缩小到此块：

```
Server currentServer = new Server(databaseConnection.DataSource);
Database currentDatabase = currentServer.Databases[databaseConnection.InitialCatalog];

foreach (View view in currentDatabase.Views)
{
    if (view.IsSystemObject == false)
    {
        if (view.Name.Equals(viewName))
        {
            MessageBox.Show(parent, "A virtual table with that name already exists! Virtual\ntable not created.", "Not created", MessageBoxButton.OK, MessageBoxImage.Information);
            break;
         }
         else
         {
             valid = true;
             break;
         }
    }
} 
```

我基本上想遍历不属于系统的数据库视图。但是，使用这种方法，`SMO`库无论如何都会遍历所有视图。知道如何安排吗？

**编辑：**

例如，我只有大约 10 个用户定义的视图，但超过 1000 个系统视图。如何跳过系统视图并仅遍历用户定义的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:22:02.443

目前尚不清楚您使用的是什么 API - 但如果您下拉到常规 TSQL / ADO.NET，您可以查看`INFORMATION_SCHEMA.VIEWS`/之类的内容`sys.views`，其中仅包含用户定义的视图。系统视图位于`sys.system_views`（均位于 中`sys.all_views`）。这将***在服务器上***完成所有限制，因此如果您查询`INFORMATION_SCHEMA.VIEWS`/ `sys.views`，通过网络返回的唯一数据是您感兴趣的数据。如果您在*客户端*过滤，则需要付费以传输所有*数据也不*感兴趣。

# database - wordpress 可以使用什么数据库？

> ID：15247125
> 
> 赞同：1
> 
> 时间：2013-03-06T12:15:36.630
> 
> 标签：database, wordpress

我想知道我是否可以在 Wordpress 中使用其他数据库引擎，而不是 MySQL。

我发现这篇文章[https://codex.wordpress.org/Using_Alternative_Databases](https://codex.wordpress.org/Using_Alternative_Databases)说不，我不能。

但后来我发现这个说我可以使用 SQL Server：[http](http://wordpress.visitmix.com/development/installing-wordpress-on-sql-server) ://wordpress.visitmix.com/development/installing-wordpress-on-sql-server另一个说我可以使用 Oracle。

我有点困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:19:01.520

**是的，我们可以使用除MySql**之外的其他 RDBMS 。我们可以使用**MSSQL**、**Oracle**和**PostgreSQL**

存在一个数据库抽象层，可以通过选择要使用的驱动程序来帮助您执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:11:25.230

我意识到这已经得到了回答，但也许有人会发现这很有用。如果您对运行 MSSQL 感兴趣，我建议您尝试[Project Nami](https://github.com/ProjectNami/projectnami)。它是 WordPress 的最新分支，其限制少于 DB Abstraction 插件。

# knockout.js - Foreach 模板不呈现第二个绑定表达式

> ID：15247129
> 
> 赞同：0
> 
> 时间：2013-03-06T12:16:01.140
> 
> 标签：knockout.js

我似乎有一个行为不端的模板。当我渲染

```
<span data-bind="text: CriteriaStub" /> 
```

在

```
<div class="row" data-bind="foreach: Foos" id=>         
            <span data-bind="text: CriteriaStub" />
            <button class="radius button small" data-bind="click: $parent.openEditDialogue($data)">Edit</button>
    </div> 
```

我没有渲染按钮，但应用程序中的所有其他绑定都可以正常工作。当我注释掉跨度时，我收到有关应用程序中其他不相关绑定的错误。

你能发现这里正在发生的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:25:11.243

我认为您没有正确连接 click 事件。尝试：

```
click: $parent.openEditDialogue 
```

[默认情况下](http://knockoutjs.com/documentation/click-binding.html)，$data 作为该方法的第一个参数传入。

# php - Laravel 3 调试 php ajax firePHP

> ID：15247133
> 
> 赞同：1
> 
> 时间：2013-03-06T12:16:07.097
> 
> 标签：php, ajax, debugging, laravel, firephp

我有几个问题：

firePHP 是否有更好的替代方案，用于在浏览器的开发人员控制台中显示服务器端日志（不可知：firefox、chrome ..）（用于 ajax 调试）？

在 Laravel 中使用 firePHP 的最佳方法是什么？我是否将它包含在“public/index.php”或路径或控制器中？还是以某种方式自动加载？
laravel 做了什么类似于 firePHP 的操作（对标题等），是否有任何冲突需要避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:01:20.110

在 laravel 中有一个使用 firephp 的包[。](http://bundles.laravel.com/bundle/fireanbu)你可以使用它。

# excel - 显示下一个可用发票编号

> ID：15247140
> 
> 赞同：1
> 
> 时间：2013-03-06T12:16:42.353
> 
> 标签：excel

在工作表“订单”中，我在 A 列中有可用的发票编号，在 D 列中有客户姓名。我目前手动将客户姓名分配给下一个可用的发票编号。

```
 A       D
1234   Fred Smith
1235   Bill Jones
1236
1237 
```

在另一个工作表上，我希望显示下一个可用的发票编号，即下一个未分配名称的未使用发票编号（上例中的 1236）。我可以使用什么方法来提取这些数据？抱歉没有示例，因为我有点不确定哪个命令适合这个实例。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:29:21.723

试试这个公式：

```
=INDEX(订单！$A:$A,COUNTA(订单！$D:$D)+1)

```

这假设 D 列不包含“孔”。如果是这种情况，试试这个公式

```
=INDEX(订单!$A:$A,MATCH(TRUE,ISBLANK(订单!$D:$D),0))

```

`Ctrl`用- `Shift`-输入后一个公式`Enter`。

# vhdl - 在 VHDL 中检测 std_logic 信号的上升沿

> ID：15247151
> 
> 赞同：1
> 
> 时间：2013-03-06T12:17:18.743
> 
> 标签：vhdl

我有一个触发器，它使用来自对其他信号的处理的信号作为 clk 输入。这意味着，我既没有使用系统的时钟，也没有使用输入。因此，当我这样做时：

```
architecture sampler_a of sampler_e is
  signal S0_s   : std_logic := '0';  
begin
  -- In my block this is not only a not. I put this to simplify things.
  S0_s <= not(S0_i);                   
  S0_o <= S0_s;

  process(S0_i)
  begin
    --Also with rising edge does not work
    if (S0_s'event and S0_s= '1') then
        BitReady_o <= '1';
    end if;   
  end process;
end sampler_a; 
```

BitReady 在模拟中不会改变（在 modelsim 中）。在这里使用 std_logic 不正确吗？请注意，我不想产生一个时钟周期宽的脉冲，因为我的电路以异步方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:05:20.067

该过程仅对 敏感`S0_i`，但仅测试 on 上的事件`S0_s`（这些事件与事件从不在同一个增量周期中`S0_i`）。因此，该过程永远不会做任何事情。

将其敏感性列表更改为`S0_s`，如果应该工作。但是，正如目前所写，一旦`BitReady_o`变为`'1'`，就无法将其返回到`'0'`。

# php - 将 Aspx 页面添加到静态网站

> ID：15247152
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:17:18.340
> 
> 标签：php, asp.net, html

我们有一个包含所有 html 文件的静态网站。

我们还有一个用 ASPX 开发的网站。这个动态网站有一个页面（比如 RegisterAndBuy.aspx），它根据用户选择的年份等填充一些数据，该页面还读取用户的个人详细信息，并在提交时向管理员发送一封电子邮件，其中包含所有用户输入的信息。

这两个网站彼此不同，并且托管在不同的提供商上。

现在我们要在静态网站中添加RegisterAndBuy.aspx 页面。我们希望在静态网站中使用相同的页面，并进行一些小的更改。（我们不想重定向到动态网站）。

**这可能吗 ？？？？？请告诉我。**

我正在考虑的另一个解决方案是开发一个新的 PHP 页面来执行此操作，但我们有一些来自 aspx 页面的 excel 阅读内容。从 PHP 做所有这些事情是乏味的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:28:41.133

您可以使用[iframe](http://www.w3schools.com/tags/tag_iframe.asp)并将其嵌入到静态站点中。不是一整页，只是你需要的那一点。

```
<iframe  src="RegisterAndBuy.aspx " title="RegisterAndBuy" frameborder="0" scrolling="no"></iframe> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T12:24:52.077

我不确定这是否适合您，因为未指定服务器环境、配置等。但是如果可能的话，您可以创建另一个 ASP.NET 网站，获取您网站中的所有 HTML 页面以及“RegisterAndBuy.aspx”页面以及所有引用的 DLL。然后将其部署在您的静态网站服务器上。这可以解决您的问题并减少返工。

# android - 在android中的位图上绘制文本

> ID：15247155
> 
> 赞同：0
> 
> 时间：2013-03-06T12:17:22.247
> 
> 标签：android, image-processing, canvas

我在 android 应用程序的位图上绘制文本，然后将其保存在 sd 卡中。图像被保存但没有文字，我的意思是drawtext中似乎有问题，这是我的代码

```
Bitmap bitmap = Bitmap.createBitmap(370, 177, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(bitmap);
    c.drawColor(0xffffffff);
    Paint p = new Paint();
    p.setColor(R.color.black);
    //p.setStyle(Style.FILL);
    //p.setStrokeWidth(40.0f);
    //p.setTextSize(40.0f);
    //p.setTextAlign(Align.RIGHT);
    c.drawText("Some text", 70, 77, p);
    //c.save();

    try {
        FileOutputStream fos = new FileOutputStream(myfile);
        bitmap.compress(CompressFormat.PNG, 90, fos);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    bitmap.recycle(); 
```

我忘记了什么或这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:25:16.330

`R.color.black`不是真正的颜色，而只是对颜色值的引用。将其替换为`Color.BLACK`或`getResources().getColor(R.color.black)`

```
p.setColor(Color.BLACK); 
```

或者

```
p.setColor(getResources().getColor(R.color.black)); 
```

# android - 如何在 android 中使用 xml 库预览图像？

> ID：15247162
> 
> 赞同：0
> 
> 时间：2013-03-06T12:17:38.750
> 
> 标签：android, xml, actionscript-3, flash

我尝试在 android 平台上创建一个简单的 XML 库，但我收到一条错误消息：

> 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2035：未找到 URL。

我确定文件位置在正确的位置`/mnt/sdcard/SketchCraft/MyDrawing 1.png`。

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <galleryPackage>
       <image>
          <imgURL>/mnt/sdcard/SketchCraft/MyDrawing 1.png</imgURL>
       </image>
    </galleryPackage> 
```

这是我的动作脚本：

```
 import flash.net.URLLoader;
 import flash.events.Event;
 import flash.display.Loader;
 import flash.net.URLRequest;

 var xmlRequest:URLRequest = new URLRequest("XMLcth.xml");
 var xmlLoader:URLLoader = new URLLoader(xmlRequest);
 var imgData:XML;
 var imageLoader:Loader;
 var rawImage:String;

 var imgNum:Number = 0;

 xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);

 function xmlLoaded(event:Event):void{
    imgData= new XML(event.target.data);
    rawImage = imgData.image[imgNum].imgURL;
    imageLoader =new Loader();
    imageLoader.load(new URLRequest(rawImage));
    mc_image.addChild(imageLoader);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:32:19.797

将您的图像名称从 MyDrawing 1.png 更改为 MyDrawing_1.png 。
我的意思是从您的图像名称中删除空格。

希望这会有所帮助

# javascript - JQuery 看不到 HTML5 数据 DOM 的变化

> ID：15247168
> 
> 赞同：0
> 
> 时间：2013-03-06T12:17:55.053
> 
> 标签：javascript, jquery, html, dom

我正在使用 HTML5`data`将一些信息存储`div`在我的网站上，每当我使用 jQuery 更改此数据的值时，DOM 都会很好地更新，但是当我尝试检索值时jQuery**看不到更新。**

我用 更新此数据的值`$('#myDiv').attr('data-my_data',value);`，并用 取回值`$('#myDiv').data('data-my_data')`。

这是说明我的问题[的小提琴。](http://jsfiddle.net/cLJKa/)

发生这种情况是因为某些 jQuery 对 DOM 的初始表示没有更新吗？

我不明白，任何帮助将不胜感激！

*配置：Chrome 25 - jQuery 1.9.0 - Mac OSx 10.7*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:20:17.593

`data-*`属性映射到`dataset`DOMString 对象，使用`data`方法作为**setter**，不要`attr`用于属性。

```
$('#testDiv').data('test_data', newData).html("My data is : " + newData); 
```

[http://jsfiddle.net/zgKdg/](http://jsfiddle.net/zgKdg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:22:52.780

您可以将值设置为`data('yourKey','Yourvalue')`

```
$(yourElement).data('isEdit','1'); 
```

根据你的例子

```
$('#myDiv').data('data-my_data','value'); 
```

Attr ：它将向 dom 对象添加属性。

prop ：它将在内存中添加属性。所以你的数据将被存储在 DOM 的 dataSet 中。

有关更多信息，请查看此[attr vs prop](https://stackoverflow.com/questions/5874652/prop-vs-attr)

# php - Symfony2 ParamConverter 不与@Annotation 关联（任何文件更改后必须清除缓存）

> ID：15247170
> 
> 赞同：2
> 
> 时间：2013-03-06T12:17:59.037
> 
> 标签：php, symfony, annotations

我有一个控制器，它使用路由、方法、模板和 ParamConverter 的注释。
如果我在下一页加载对文件进行任何更改（甚至是空格更改或注释），则会发生以下错误

```
Cannot import resource "/home/sites/MySite/src/Acme/Bundle/MyBundle/Controller/" from "/home/sites/MySite/app/config/routing.yml".

FileLoaderLoadException: Cannot import resource "/home/sites/MySite/src/Acme/Bundle/MyBundle/Controller/" from "/home/sites/MySite/app/config/routing.yml"

AnnotationException: [Semantical Error] The class "Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter" is not annotated with @Annotation. Are you sure this class can be used as annotation? If so, then you need to add @Annotation to the _class_ doc comment of "Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter". If it is indeed no annotation, then you need to add @IgnoreAnnotation("ParamConverter") to the _class_ doc comment of method Acme\Bundle\MyBundle\Controller\DefaultController::viewAction(). 
```

如果我清除我的缓存，那么它会再次工作，但只有在我进行另一次更改之前，它才会再次发生。在读取配置的注释信息时，它似乎遇到了问题，但我不明白为什么它在实际上没有对任何注释进行更改时起作用/不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T16:19:23.010

啊，这是一个已知的错误，已在 FrameworkExtraBundle 中修复。

[https://github.com/symfony/symfony/issues/7283](https://github.com/symfony/symfony/issues/7283)

现在要获得最新的，只需将该库的要求更改为 dev-master

```
"require": {
    ...
    "symfony/symfony": "2.2.*",
    "sensio/framework-extra-bundle": "dev-master",
   ...
}, 
```

并运行作曲家更新

# android - android编程新手，xml和类文件不起作用

> ID：15247172
> 
> 赞同：0
> 
> 时间：2013-03-06T12:18:01.477
> 
> 标签：android

我有一个问题，我创建了一个简单的列表项，我的项目是娱乐我已经创建了 XML 和 Java 文件，但是在运行到模拟器后它不起作用。我的意思是列表项目有效，娱乐在这里，但点击它不会进入下一个。帮助

这是主要的活动文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Main" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >
    </ListView>

</RelativeLayout> 
```

这是Java文件：

```
package com.firstapp;

import android.app.Activity;
import android.content.Intent;

import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.VideoView;

public class Entertainment extends Activity {

    MediaPlayer ourSong;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.entertainment);
        ourSong = MediaPlayer.create(this, R.id.videoView1);
        ourSong.start();
        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(5000);

                } catch (InterruptedException e) {
                    e.printStackTrace();

                } finally {
                    Intent openStartingpoint = new Intent(
                            "com.bucky.android.Menu");
                    startActivity(openStartingpoint);

                }
            }
        };

        timer.start();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        ourSong.release();
        finish();

    }

} 
```

这是清单

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.firstapp.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

   <activity
        android:name="com.firstapp.Entertainment"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.Main" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:23:10.660

在清单中，您的主要活动意图中的标签“类别”是错误的：

```
 <activity
        android:name="com.firstapp.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

您必须声明 LAUNCHER 而不是 DEFAULT。看看这个改变后它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:23:31.500

您必须为此覆盖列表视图的 itemclick 方法

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    int position = arg2;

    // click event handling
    textQuestionCount.setText("Question " + String.valueOf(position + 1) + " of " + arg0.getCount());

    } 
```

并`OnItemClickListener`在你的类中实现接口。

# android - 无法使用 AsyncTask-Android 应用程序在另一个活动中调用 arraylist

> ID：15247177
> 
> 赞同：0
> 
> 时间：2013-03-06T12:18:25.903
> 
> 标签：android, json, android-asynctask

我有一个应用程序，其中有一个名为“Images1”的单独类，它扩展了 AsyncTask，其中我通过 JSON 获取所有画廊 URL。我在另一个活动中实例化 AsyncTask 类，我需要“Images1”返回的数组列表class.However 我无法获得数组列表。请建议应该采取哪些步骤。在此先感谢

```
public   class Images1 extends AsyncTask<Void, Void,  ArrayList<String>> {
    ProgressDialog mPreogressDialog;
    private static String url = "http://www.tts.com/album_pro/array_to_encode";
     JSONParser jParser = new JSONParser();
     ArrayList<String> image_urls = new ArrayList<String>();
    @Override
    protected void onPreExecute() {

     mPreogressDialog = ProgressDialog.show(Images1.this, "", "Uploading Document. Please wait...", true);
    }

    @Override
    protected  ArrayList<String> doInBackground(Void... params) {
        // TODO Auto-generated method stub
        //Do your stuff here call ur methods
                    imagedownload();
        return image_urls;
    }

    protected void onPostExecute(ArrayList<String> result) {
        super.onPostExecute(result);
        // TODO Auto-generated method stub
        if (mPreogressDialog.isShowing())
            mPreogressDialog.dismiss();

    }

public void imagedownload(){

JSONObject json = jParser.getJSONFromUrl(url);

                try{
            JSONObject seo = json.getJSONObject("SEO");
            JSONArray folio = seo.getJSONArray("Folio");

            JSONArray image_urls1 = new JSONArray();
            String s1=seo.getString("Folio");

                            for(int i=0;i<folio.length();++i)
                            {
                        String m = folio.getString(i);
                        Log.v("M"+i,m);
                        image_urls.add(m+ ",");

                            }
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
}
} 
```

在另一个活动中，我正在实例化该类并将其称为

```
Images1 img1;
new img1.execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:29:16.160

> 我无法获取数组列表。

要将结果返回到您正在启动 AsyncTask 的 Activity 中，您需要执行 AsyncTask 为：

```
ArrayList<String> image_urls=new Images1.execute(params_).get(); 
```

但这将阻止 UI 线程执行，直到 AsyncTask doInBackground 方法执行完成。如果您使用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法来避免 UI 冻结，`Thread`则用于执行 AsyncTask

第二种方法是使用类构造函数将 Activity Context 传递给 Images1 类，然后在里面做你的工作`onPostExecute`。例如 ：

```
public   class Images1 extends AsyncTask<Void, Void,  ArrayList<String>> {
 //...your code here..

Context context;

public Images1(Context context){
  this.context=context;
}
////....your code here....

 protected void onPostExecute(ArrayList<String> result) {
        super.onPostExecute(result);
        // TODO Auto-generated method stub

          // do your work here...
    }
} 
```

用于`context`从 onPostExecute 访问或更新 UI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:33:57.617

我会建议你做一件事，只需使用新的 Arraylist 并创建一个 for 循环，然后在`onPostExecute`AsyncTask 类的 Method 中添加该列表中 image_urls 的所有值，然后调用该 arraytlist。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:27:06.393

您可以在此处使用消息和处理程序。看看这篇文章：http: [//mobileorchard.com/android-app-developmentthreading-part-1-handlers/](http://mobileorchard.com/android-app-developmentthreading-part-1-handlers/)。您可以从另一个线程发送消息，其中包含 ArrayList。然后在您的活动的 handleMessage() 函数中处理此消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:17:05.953

另一种选择是扩展此 AsyncTask。在您的活动中调用以下代码：

```
new Images1() {
    protected void onPostExecute(ArrayList<String> result) {
        super.onPostExecute(result);
        //here you process received result
    }
}.execute(); 
```

# ios - Iphone：如何将 NSData 视频文件拆分成块并将这些块一一上传到服务器？

> ID：15247183
> 
> 赞同：4
> 
> 时间：2013-03-06T12:18:36.827
> 
> 标签：ios, file-upload, asihttprequest, nsdata, chunks

我一直在尝试将视频文件拆分成块并将这些块一个一个地发送到服务器。但我不确定我写的逻辑或代码是否正确！如果你能帮我解决这个问题。

```
-(void)multipart:(NSData *)file ;
{
NSDate *currentTime = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh-mm"];
NSString *resultString = [dateFormatter stringFromDate: currentTime];

myDid = [[NSString alloc]initWithString:[[UIDevice currentDevice]uniqueIdentifier]];

upload_Id = [NSString stringWithFormat:@"%@%@", myDid, resultString];
NSLog(@"%@", upload_Id);

NSUInteger length = [file length];
NSUInteger chunkSize = 100 * 1024;
NSUInteger offset = 0;
do {
    NSUInteger thisChunkSize = length - offset > chunkSize ? chunkSize : length - offset;
    NSData *chunk = [NSData dataWithBytesNoCopy:(char *)[file bytes] + offset length:thisChunkSize freeWhenDone:YES];       

    //NSLog(@"%@", chunk);
    //NSLog(@"%@", thisChunkSize);
    NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"mov", @"uploadExtn", upload_Id, @"uploadId",offset , @"uploadedByte",  nil];
    NSDictionary *mainDictionary = [[NSDictionary alloc]initWithObjectsAndKeys:@"createContent",@"type",dictionary,@"data", nil];

    NSString *mainString = [mainDictionary JSONRepresentation];

    offset += thisChunkSize;
    NSLog(@"%d", offset);
    //[chunk writeToFile:[self.recordedChunkFile path] atomically:YES];
    //NSLog(@"%@", [self.recordedChunkFile path]);
    //NSString* path = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask,YES) lastObject];

      NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@://%@/%@",[[NSUserDefaults standardUserDefaults]                           objectForKey:DEFAULTS_SET_HTTP_SWITCH],DB_SAVED_SERVER,API_MULTIPART_UPLOAD]];

    __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    //[request setFile:[self.recordedChunkFile path] forKey:@"data1"];
    // Upload an NSData instance
    [request setData:chunk withFileName:upload_Id andContentType:@"video/mov" forKey:@"data1"];
    [request setPostValue:mainString forKey:@"jsonData"];

} while (offset < length);
} 
```

谢谢

# javascript - AngularJS 相当于 jQuery 切换显示/隐藏部分

> ID：15247184
> 
> 赞同：6
> 
> 时间：2013-03-06T12:18:39.870
> 
> 标签：javascript, angularjs

首先，是的，我试过用谷歌搜索，但仍然很难找到有关 AngularJS 的信息。

我想根据表单中按下的按钮执行一个简单的打开部分的任务。我只想随时打开一个部分，也许是一个默认部分（尚未决定）。如果您单击的按钮将被归类为引导程序的“btn-primary”，那也很好。所以这是html

```
<form>
    <input type="button" id="show-section1" value="Section 1" />
    <input type="button" id="show-section2" value="Section 2" />
    <input type="button" id="show-section3" value="Section 3" />
</form>
<section id="section1">blah</section>
<section id="section2">blah2</section>
<section id="section3">blah3</section> 
```

在 jQuery 中，我会做这样的事情（简化而不是解释的最佳解决方案）：

```
$('section').hide();
$('#show-section1').click(function() {
    $('section').hide();
    $('#section1').show();
});
etc 
```

我以前做过一次，但我不记得是怎么做的，我记得那只是几行代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T12:50:27.080

如果你一次只需要一个，你可以使用这个：http: [//jsfiddle.net/jHhMv/3/](http://jsfiddle.net/jHhMv/3/)

JS：

```
'use strict';

var App=angular.module('myApp',[]);

function Ctrl($scope){
    var section = 1;

    $scope.section = function (id) {
        section = id;   
    };

    $scope.is = function (id) {
        return section == id;
    };
} 
```

HTML：

```
<div ng-controller="Ctrl">
<form>
    <input type="button" id="show-section1" value="Section 1" ng-click="section(1)" ng-class="{'btn-primary': is(1)}" />
    <input type="button" id="show-section2" value="Section 2" ng-click="section(2)" ng-class="{'btn-primary': is(2)}" />
    <input type="button" id="show-section3" value="Section 3" ng-click="section(3)" ng-class="{'btn-primary': is(3)}" />
</form>
<section id="section1" ng-show="is(1)">blah</section>
<section id="section2" ng-show="is(2)">blah2</section>
<section id="section3" ng-show="is(3)">blah3</section>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T12:42:49.550

看看[http://jsfiddle.net/mahbub/jHhMv/](http://jsfiddle.net/mahbub/jHhMv/)

```
<div ng-controller="Ctrl">
<form>
    <input type="button" id="show-section1" value="Section 1" ng-click="section1=!section1" />
    <input type="button" id="show-section2" value="Section 2" ng-click="section2=!section2" />
    <input type="button" id="show-section3" value="Section 3" ng-click="section3=!section3" />
</form>
<section id="section1" ng-show="section1">blah</section>
<section id="section2" ng-show="section2">blah2</section>
<section id="section3" ng-show="section3">blah3</section>
</div>

'use strict';

var App=angular.module('myApp',[]);

function Ctrl($scope){

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T12:47:52.583

方法很多。其中之一（使用 AngularUI）：

HTML：

```
<div ng-controller="AppController">

    <button ng-click="setActive('section1')" ng-class="{'btn btn-primary': active.section1}">Section 1</button>
    <button ng-click="setActive('section2')" ng-class="{'btn btn-primary': active.section2}">Section 2</button>
    <button ng-click="setActive('section3')" ng-class="{'btn btn-primary': active.section3}">Section 3</button>

    <section id="section1" ui-toggle="active.section1">blah</section>
    <section id="section2" ui-toggle="active.section2">blah2</section>
    <section id="section3" ui-toggle="active.section3">blah3</section>

</div> 
```

CSS：

```
.ui-show {
  opacity: 1;
  transition: all 0.5s ease;
}
.ui-hide {
  opacity: 0;
  transition: all 0.5s ease;
} 
```

JS：

```
app.controller('AppController',
  function($scope) {
    $scope.active = {section1: true};
    $scope.setActive = function(section){
      $scope.active = {};
      $scope.active[section] = true;
    };
  }
); 
```

[普朗克](http://plnkr.co/edit/5NoBbWhZFDDzxZ0I9865)

# c# - '无法建立连接，因为目标机器主动拒绝它

> ID：15247186
> 
> 赞同：3
> 
> 时间：2013-03-06T12:18:45.063
> 
> 标签：c#, .net

我正在运行一个客户端应用程序，它应该连接到 .NET 中的服务器端应用程序。

监听端口在服务器上可以接收的连接数是否有任何限制？我问是因为我收到异常消息：

> 无法建立连接，因为目标机器主动拒绝它 1.9.64.212:62131

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:14:48.397

错误“无法建立连接，因为目标计算机主动拒绝它”意味着您的请求已通过，因此这不是防火墙问题。此消息表示没有人侦听此端口。确保您的服务器应用程序正在运行并且它侦听正确的端口号（和 IP 地址）。在您的服务器计算机上，您可以运行“netstat -a -b”来查找端口号和侦听这些端口的服务器应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T07:18:33.687

有一些可能的原因：

*   服务器没有运行。因此它不会监听那个端口。如果它是一项服务，您可能需要重新启动该服务。
*   服务器正在运行，但该端口被 Windows 防火墙或其他防火墙阻止。您可以在 Inbound 列表中启用程序通过防火墙。
*   您的 PC 上有一个安全程序，即阻止您 PC 上的多个端口的 Internet 安全或防病毒程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T23:39:18.740

当您的服务引发未处理的异常时，我已经看到此消息，因此请检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:07:11.990

这一定是防火墙问题（或其他连接问题），或者服务器未正确启动。

# ios - 自定义按钮操作

> ID：15247197
> 
> 赞同：0
> 
> 时间：2013-03-06T12:19:20.787
> 
> 标签：ios, xcode, button, uibutton

我在一个视图上有 42 个自定义按钮。我怎样才能通过按其中任何一个来编辑我想要的已创建按钮。

```
int a=0; int b=1;

int otstup=10;

for (int i=1; i<=42; i++) {
    CGRect frameBtn = CGRectMake(a+60+otstup, b+otstup, 45, 45);
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:frameBtn];
    [button setBackgroundImage:[UIImage imageNamed:@"EmptyCoin.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(pressBtn:) forControlEvents:UIControlEventTouchUpInside];
    [button setTag:i];

    [self.view addSubview:button];
    a=a+50;
    if (i%7 == 0)
    {
        a=0;
        b=b+45;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:23:24.420

```
-(void)pressBtn:(id)sender{ 
UIButton *btn = (UIButton*)sender;
if (btn.tag == 1){
 1st button tapped

} 
else if(btn.tag == 2)
{
 2nd button tapped
}  
} 
```

通过使用上面的代码，您可以区分不同的按钮

**更新**

您必须创建一个可变数组来存储该数组中的所有按钮。`pressBtn`您可以在方法中访问该数组

```
int a=0; int b=1;

int otstup=10;

 for (int i=1; i<=42; i++) {
CGRect frameBtn = CGRectMake(a+60+otstup, b+otstup, 45, 45);
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:frameBtn];
[button setBackgroundImage:[UIImage imageNamed:@"EmptyCoin.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(pressBtn:) forControlEvents:UIControlEventTouchUpInside];
[button setTag:i];
[buttonAry addObject:button];

[self.view addSubview:button];
a=a+50;
if (i%7 == 0)
{
    a=0;
    b=b+45;
}
} 
```

**按钮动作方法**

```
-(void)pressBtn:(id)sender{ 
UIButton *btn = (UIButton*)sender;
if (btn.tag == 7){

UIButton *editButton = [buttonAry objectAtIndex:btn.tag+1];
[editButton setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
} 

} 
```

# highcharts - 某些数据点无法访问 Highcharts 工具提示

> ID：15247201
> 
> 赞同：0
> 
> 时间：2013-03-06T12:19:40.307
> 
> 标签：highcharts

有时很难让 Highcharts Javascript 图表库显示某些数据点的工具提示。例如，尝试在以下链接中显示 50,50 处数据点的工具提示。很难让它显示出来，而且闪烁很多。有谁知道一些解决方法？

[http://highcharts.com/jsbin/ogixaz/2/edit](http://highcharts.com/jsbin/ogixaz/2/edit)

我使用最新的 Chrome 和 Firefox 进行了尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:17:51.230

50,50 处的工具提示闪烁的原因是工具提示被绘制在该点上。左侧和右侧的点为将工具提示绘制到侧面留出了空间。中间的不能画到一边的原因是图表小，而toollip又大。

一些有助于解决这种情况的想法： 1\. 使工具提示更小。2\. 使图表更大（在您的示例中尝试使右侧更大）。3\. 使用 highcharts tooltip.positioner 函数将工具提示放置在其他位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:16:24.773

你有没有尝试过：

```
 //...

 plotOptions:{
        series:{
          stickyTracking:true;
        }
} 
```

**更新：**

我不得不说我查看了您的嵌入示例并准确理解了您的意思， **但是**在将您的代码移动到 jsFiddle 并设置属性`shared:true`（在工具提示对象中）之后，它工作正常。检查它... [http://jsfiddle.net/yoav_barnea/LFvVy/2/](http://jsfiddle.net/yoav_barnea/LFvVy/2/)

**重要的部分是属性`shared:true`：**

```
 tooltip: {
    formatter: function() {
        return '<b style="font-size:18px;font-weight:bold;">Some very long title</b><br/>' + this.x + ":" + this.y + " <br/>and some<br/> extra stuff<br/>line<br/>line";
    },
    useHTML: true,
    shared:true
}, 
```

**更新 2：**

至于您在获取 costom`c`属性方面的其他问题（您在评论中提到...），解决方案是将**格式化程序函数**中的代码修复为如下所示：`return ... this.points[0].point.c`

（同样，这是一个新问题，与第一个闪烁的工具提示无关......）

# php - 将默认标记更改为谷歌地图 API 上的特定图像

> ID：15247208
> 
> 赞同：0
> 
> 时间：2013-03-06T12:20:08.387
> 
> 标签：php, javascript, html, google-maps, google-maps-api-3

这段代码的作用是，当用户输入**两个坐标时，它会使用****两个标记**和一条线来设置地图以显示**方向**。是否可以针对两个坐标将 d**错误标记** 更改为不同的**特定图像**，假设我希望第一个坐标代表“ **image1.jpeg** ”，第二个坐标代表“ **image2.jpeg** ”。

```
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Animations</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
    //  var center = new google.maps.LatLng(52.12, -3.2);                   //center of the map
    var center = new google.maps.LatLng(<?php echo $_Mylat?>, <?php echo $_Mylon?>);
      var a = [
         new google.maps.LatLng(<?php echo $_Mylat?>, <?php echo $_Mylon?>),
         new google.maps.LatLng(<?php echo $_Mylat2?>, <?php echo $_Mylon2?>)
        ];
      var marker;
      var map;

      function initialize() {
        var mapOptions = {
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: center
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);

    for (var i=0; i<a.length;i++)
    {
        marker = new google.maps.Marker({
          map:map,
          draggable:true,
          animation: google.maps.Animation.DROP,
          position: a[i]
      });

    }   
     var flightPlanCoordinates = [
            new google.maps.LatLng(<?php echo $_Mylat?>, <?php echo $_Mylon?>),
            new google.maps.LatLng(<?php echo $_Mylat2?>, <?php echo $_Mylon2?>)
        ];

       var flightPath = new google.maps.Polyline({
          path: flightPlanCoordinates,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath.setMap(map);

      }

    </script>

  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 500px; height: 400px;">map div</div>
  </body>
</html> 
```

在这段代码中我可以将标记更改为我的特定图像，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:27:03.777

您需要做一个`IF`声明来确定标记应该加载哪个图像。

```
if(i == 0) iconImage = "image1.jpeg";
else if(i == 1)  iconImage = "image2.jpeg"; 
```

然后只需将自定义图标和变量添加到标记：

```
marker = new google.maps.Marker({
          map:map,
          draggable:true,
          animation: google.maps.Animation.DROP,
          position: a[i],
          icon: iconImage
}); 
```

# ios - 如何比较 viewDidLoad 和 viewDidAppear？

> ID：15247217
> 
> 赞同：-5
> 
> 时间：2013-03-06T12:20:38.057
> 
> 标签：ios, cocoa-touch, uiviewcontroller, lifecycle

我怎样才能比较`viewDidLoad`和`viewDidAppear:`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T12:31:34.017

最好的办法是在视图控制器中实现这两种方法，该控制器加载带有子视图的视图（最简单的是来自 NIB）并在每个方法中放置一个断点。当应用程序在每个断点处停止时，查看调试器中的变量视图并查看已实例化的对象。

为了消除对`UIViewController`生命周期的混淆，下面是一张来自 Big Nerd Ranch iOS Programming 的图表：

![在此处输入图像描述](../Images/bc90aa63f4499b0669e5e280c1f7b533.png)

# jquery-ui - Codeigniter 2 从数据库自动完成

> ID：15247222
> 
> 赞同：0
> 
> 时间：2013-03-06T12:21:06.730
> 
> 标签：jquery-ui, codeigniter-2

我正在尝试在表单上设置一个自动完成输入框，尽管一切似乎都正常，但我没有收到任何数据传递到输入框。Firebug 报告成功，但那里什么也没有。我想知道是否有人可以查看我的代码，看看是否有任何明显的错误可能导致它。

脚本是：

```
(function($){
    $("#town").autocomplete({
        source :"drivers/driver_gettown",
        minLength : 3,
        dataType:'JSON',
        type:'POST'
    });
})(jQuery); 
```

输入框是：

```
 <div class="div">
        <input name="town" id="town"  type="text" class="txtSelect input required" value="<?php echo set_value('town'); ?>" />
        <?php echo form_error('town'); ?>
    </div> 
```

型号为：

```
class Driver_model extends CI_Model
{
    public function __construct() {
        // Load the Database
        parent::__construct();
        $this->load->database();
    }

    function driver_get_towns($q)
    {
        // Get a list of Towns
        // Search for row "place_name" from Table called "tbk_towns"
        $this->db->select('place_name');
        $this->db->like('place_name', $q);
        $query = $this->db->get('tbk_towns');
        if($query->num_rows > 0)
        {
            foreach ($query->result_array() as $row)
            {
                //build an array for the towns
                $row_set[] = htmlentities(ucfirst($row['place_name'])); 
            }
            //format the array into json data
            // header('Content-Type: application/x-json; charset=utf-8');
            // echo json_encode($row_set);
            $this->output
                    ->set_content_type('application/json')
                    ->set_output(json_encode($row_set)); 
        }
    }
} 
```

最后是控制器：

```
class Drivers extends CI_Controller 
{

    function __construct() 
    {
        parent::__construct();
        $this->load->model('driver_model');
        $this->load->helper('url', 'form', 'html', 'json');
    }

    function index()
    {
        // Just loads the main Page of the Drivers Area
        $data['metatitle'] = "Auto Ninja | Drivers Members Area | Locally Rated Garages &amp; Mechanics";
        $data['metadescription'] = "Garages &amp Mechanics";
        $data['metakeywords'] = "Car Repair, Car Service, Car MOT";
        $this->load->view('drivers/header_drivers.inc.php', $data);
        $this->load->view('drivers/index');
        $this->load->view('drivers/footer_index.inc.php');
    }

    public function driver_gettown()
    {
        if (isset($_GET['term'])){
            exit;
        }
        $this->load->model('driver_model');
        $q = ucfirst($_GET['term']);
        $this->driver_model->driver_get_towns($q);
    }

} 
```

和评论/帮助将不胜感激。

```
function driver_addjob()
    {
        // Loads the Add New Job Form for the Website
        $this->load->helper('form');
        $this->load->library(array('form_validation', 'session'));
        $this->load->model('driver_model');
        $this ->form_validation->set_error_delimiters('<span class="error">', '</span>');
        // Validate the form fields
        $this->form_validation->set_rules('town', 'Nearest Town or City', 'trim|required|xss_clean');
        // Populates dropdown "town" from the database  ???

        if ($this->form_validation->run() == FALSE)

        {
            $data['metatitle'] = "Auto Ninja | Drivers - Add New Job | Locally Rated Garages &amp; Mechanics";
            $data['metadescription'] = "Garages &amp Mechanics";
            $data['metakeywords'] = "Car Repair, Car Service, Car MOT";
            $this->load->view('drivers/header_drivers.inc.php', $data);
            $this->load->view('drivers/driver_addjob.php');
            $this->load->view('drivers/footer_index.inc.php');
        }
        else 
        {
            $townid = $this->input->post('town');
            $work_jobtitle = $this->input->post('jobtitle');
            $this->driver_model->driver_add_job ($townid);
            $this->session->set_flashdata('message', 'your work request has been added to the system');
            $data['metatitle'] = "Auto Ninja | Drivers - Add New Jobs Success | Locally Rated Garages &amp; Mechanics";
            $data['metadescription'] = "Garages &amp Mechanics";
            $data['metakeywords'] = "Car Repair, Car Service, Car MOT";
            $this->load->view('drivers/header_drivers.inc.php', $data);
            $this->load->view('drivers/driver_addjob_success');
            $this->load->view('drivers/footer_index.inc.php');
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:30:43.143

好的，我终于想通了。出于某种原因，响应 URL 出现在 [http://php.codeigniter.server/drivers/drivers/driver_gettown?term=ed](http://php.codeigniter.server/drivers/drivers/driver_gettown?term=ed)

所以控制器被添加了两次。我将Java更新为

```
(function($){
    $("#town").autocomplete({
        source :"driver_gettown",
        minLength : 3,
        dataType:'JSON',
        type:'POST'
    });
})(jQuery); 
```

ie not including the controller and it works!!! So a tad confused as to how it knows which controller to find the method in but who cares it works. It would be nice to know though as it will probably still annoy me... Possibly the JSON call bring it over in the URL maby?

# jquery - 控制 jquery 数据表中的数字列

> ID：15247223
> 
> 赞同：1
> 
> 时间：2013-03-06T12:21:09.443
> 
> 标签：jquery, datatables

我正在使用 jQuery Datatables 创建一个包含 500 行和一列的表。但是，我想让 jQuery 增加显示的列数，以减少对表的分页。理想情况下，我希望有 10 行 10 列。这样，用户只需要浏览 10 个页面。

我不想处理增加服务器端代码中的列数；我只写出 500 行并让 jquery 控制显示的列数会容易得多。这可能吗？

谢谢。

# scala - scala：classOf[]、异常和 :: 运算符用于列出奇怪的行为

> ID：15247224
> 
> 赞同：2
> 
> 时间：2013-03-06T12:21:11.660
> 
> 标签：scala, compiler-errors, type-inference

我在 scala 中遇到了一些非常奇怪的行为。我编写了一个通用方法，该方法将容易出错的代码和“有效异常”列表作为参数，它应该执行代码，同时在抛出“有效异常”时重试代码。

该方法效果很好，我在几个地方使用它。
但是，其中一个方法调用在编译时失败了。
原因是异常列表的初始化。

我已经在 REPL 中尝试过，以确保没有其他原因，您可以自己查看结果：

```
me@my-lap:~$ scala -cp /path/to/maven/repository/org/apache/httpcomponents/httpclient/4.1.1/httpclient-4.1.1.jar:/path/to/maven/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/path/to/maven/repository/me/my-utils/1.0-SNAPSHOT/my-utils-1.0-SNAPSHOT.jar:/path/to/maven/repository/org/apache/httpcomponents/httpcore/4.1/httpcore-4.1.jar
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_17).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import org.apache.http.conn.{HttpHostConnectException,ConnectTimeoutException}
import org.apache.http.conn.{HttpHostConnectException, ConnectTimeoutException}

scala> import me.util.exceptions.RetryException
import me.util.exceptions.RetryException

scala> val validEx = classOf[ConnectTimeoutException] :: classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil
<console>:9: error: inferred type arguments [java.lang.Class[_ >: _1 with org.apache.http.conn.ConnectTimeoutException <: java.lang.Exception]] do not conform to method ::'s type parameter bounds [B >: java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with me.util.exceptions.RetryException <: java.lang.Exception]]
       val validEx = classOf[ConnectTimeoutException] :: classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil
                                                      ^ 
```

从所有 3 种异常类型初始化列表时，代码失败并出现这个奇怪的错误。所以我尝试使用这 3 个中的 2 个异常的每个子集进行初始化：

```
scala> val validEx = classOf[ConnectTimeoutException] :: classOf[RetryException] :: Nil
validEx: List[java.lang.Class[_ >: me.util.exceptions.RetryException with org.apache.http.conn.ConnectTimeoutException <: java.lang.Exception]] = List(class org.apache.http.conn.ConnectTimeoutException, class me.util.exceptions.RetryException)

scala> val validEx = classOf[ConnectTimeoutException] :: classOf[HttpHostConnectException] :: Nil
validEx: List[java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with org.apache.http.conn.ConnectTimeoutException <: java.io.IOException]] = List(class org.apache.http.conn.ConnectTimeoutException, class org.apache.http.conn.HttpHostConnectException)

scala> val validEx = classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil
validEx: List[java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with me.util.exceptions.RetryException <: java.lang.Exception]] = List(class me.util.exceptions.RetryException, class org.apache.http.conn.HttpHostConnectException) 
```

它奏效了！我还尝试使用`List()`而不是使用`::`运算符来创建所有 3 种异常类型的列表。它也有效：

```
scala> val validEx = List(classOf[ConnectTimeoutException], classOf[RetryException], classOf[HttpHostConnectException])
validEx: List[java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with me.util.exceptions.RetryException with org.apache.http.conn.ConnectTimeoutException <: java.lang.Exception]] = List(class org.apache.http.conn.ConnectTimeoutException, class me.util.exceptions.RetryException, class org.apache.http.conn.HttpHostConnectException) 
```

顺便说一句，实现`RetryException`是：

```
class RetryException extends Exception {} 
```

那么为什么会发生呢？它是scala`::`运算符的错误吗？
以及为什么编译器不能推断出比以下更好的类型：（`List[java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with me.util.exceptions.RetryException with org.apache.http.conn.ConnectTimeoutException <: java.lang.Exception]]`
我的方法除了类型的参数：`validExceptions: List[Class[_ <: java.lang.Throwable]]`这是一种更简洁的类型。除了编译器之外，我会想出类似的东西：`List[Class[_ <: java.lang.Exception]]`

（我在 ubuntu 12.04 64bit 上运行 Scala 版本 2.9.2（Java7 oracle 1.7.0_17）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:38:41.223

This simply looks like an inference problem.

Try to replace `Nil` with `List.empty[Exception]`:

```
val validEx = classOf[ConnectTimeoutException] :: classOf[RetryException] :: classOf[HttpHostConnectException] :: List.empty[Class[_ <: Exception]] 
```

This should fix it.

Now let's see what happens in the original code:

```
val validEx = classOf[ConnectTimeoutException] :: classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil 
```

This is evaluated from right to left, because `::` is right-associative.

* * *

So first, the compiler evaluates `classOf[HttpHostConnectException] :: Nil`. The inferred type is `List[Class[HttpHostConnectException]]`. Let's call the result of this expression `tmp1: List[Class[HttpHostConnectException]]`

* * *

Then the compiler evaluates `classOf[RetryException] :: tmp1`. Type inference tries to unify the types on the left and on the right, and comes up with `List[_ >: RetryException with HttpHostConnectException]`. You might wonder why it does not infer `List[Class[Exception]]`. This is because `Class` is not covariant (it is invariant), so `Class[HttpHostConnectException]` and `Class[RetryException]` are not subtypes of `Class[Exception]`. Now you might also argue the compiler could have inferred the simpler (but less precise) type `List[AnyRef]`. But the compiler just tries to be as precise as possible, which is obviously pretty usefulll in general. But in this case it will pose a problem with the next step. So let's call the result of this expression `tmp2: List[_ >: RetryException with HttpHostConnectException]` and see what happens next.

* * *

Finally the compiler evaluates `classOf[ConnectTimeoutException] :: tmp2`.

Here the signature of `::` mandates that `classOf[ConnectTimeoutException]` be a subtype of `RetryException with HttpHostConnectException` (the type of the list's elements so far). In other words `ConnectTimeoutException` is required to extends both `RetryException` and `HttpHostConnectException`, which clearly is not the case, and thus you get a compile error

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:51:38.550

当您`::`多次调用 cons 运算符 ( ) 时，类型推断器会尝试`List`在每个步骤中为您评估正确的类型参数。

在最初的几个缺点操作之后

```
classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil 
```

推断的类型与第三个 cons 调用不兼容。
错误消息告诉您，上述值的推断类型（对于列表元素）为

```
java.lang.Class[_ >: org.apache.http.conn.HttpHostConnectException with me.util.exceptions.RetryException <: java.lang.Exception] 
```

所以它期望附加的前置元素必须是上述的超类型。

您可以通过以下方式在控制台上验证这一点

```
val intermediateList = classOf[RetryException] :: classOf[HttpHostConnectException] :: Nil 
```

并查看结果类型，然后尝试添加

```
classOf[ConnectTimeoutException] :: intermediateList 
```

获得与 OP 中相同的错误

* * *

正如@Régis Jean-Gilles 建议的那样，如果您创建`List`指定您构建的第一个元素是您预期的类型

```
List.empty[Exception] 
```

编译器应该没有问题。

当您使用`List(..., ...)`对象工厂时也会发生同样的情况，因为方法调用的类型推断一次执行一个参数列表（一组括号）。
这意味着编译器使用所有参数来定义正确的`List`类型

# c - 如果条件不起作用

> ID：15247228
> 
> 赞同：0
> 
> 时间：2013-03-06T12:21:19.387
> 
> 标签：c, if-statement

我有这部分代码：

```
void query(hash_t* params) {
record_t* rec;

// Coordinator, opgroup and  Opcode  specified by the client
uint64_t netid = 0;
uint8_t op_code_group = 0;
uint8_t op_code = 0;
char* par;
now = mdl_now();
/* set the start and end time based on query parameters */
...........
// Network id is required
par = hash_get(params, "netid");
...........
netid = strtoull(par, NULL, 10);
par = hash_get(params, "opcode_group");
...........
op_code_group = strtoul(par, NULL, 10);
par = hash_get(params, "opcode");
...........
op_code = strtoul(par, NULL, 10);
/* seek in the bytestream */
mdl_seek(start);
while((rec = (record_t* ) mdl_next(&ts)) != NULL) {
    ...............
    // Only print records with the wanted net and opcodes
    if((netid != 0) && (netid != NTOHLL(rec->net_id))) 
        continue;
    if((opcode_group != 0) && (op_code_group != ntohl(rec->opcode_group))) 
        continue;
    if((opcode != 0) && (op_code != ntohl(rec->opcode)))
        continue;
    ..............
    mdl_print("%u %llu %u %u %u %d\n", 
        sec, 
        NTOHLL(rec->net_id), 
        rec->op_code_group, 
        rec->op_code, 
        rec->payloadlength, 
        val);
     }
 } 
```

opcode_group、opcode 和其他参数通过 http 请求传递给查询类。

这就是问题：如果我指定一个 opcode_group 例如 = 160，结果不会显示任何内容。相反，如果我指定 opcode_group = 0（所有记录），结果会显示所有记录，包括 opcode_group = 160 的记录。

错误在哪里？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:32:59.563

我可以看到代码并发现只获取变量“ **op_code_group** ”而不是“ **opcode_group** ”中的值

```
op_code_group = strtoul(par, NULL, 10); 
```

我相信你搞乱了类似的变量

****_已编辑*_ _* __ *_* __****

 **我相信问题出在这部分

```
if((opcode_group != 0) && (op_code_group != ntohl(rec->opcode_group))) 
    continue;" 
```

仅当 opcode_group == 0 时，此部分才会失败并打印记录

将此修改为

```
if((opcode_group == 0) || (op_code_group != ntohl(rec->opcode_group))) 
    continue;" 
```

猜猜你也面临与 netid 和 op_code 相同的问题**

# mysql - 连接表上的 Sphinx 或 mysql

> ID：15247230
> 
> 赞同：0
> 
> 时间：2013-03-06T12:21:27.307
> 
> 标签：mysql, join, indexing, sphinx

我的数据库中有几个表，这些表需要大量连接来处理所涉及的查询，并且表会经常更新。关于从 mysql 搜索到 sphinx 搜索的转换，我想问一些不同的问题。

我正在尝试使用 Sphinx 执行查询（不是全文搜索），因为 mysql 引擎由于涉及大量连接而太慢。

所以我的第一个问题是，通过连接将字段转换为文本，将 sphinx 用于非全文搜索是否有意义？

如果建议使用 sphinx，我如何使用它在所有这些表中执行复杂的查询。我进行了很多研究并提出了这三个替代方案，并希望您对哪个是最佳方案的看法。

1.  由于 Sphinx 没有 JOIN，因此将所有表反规范化为一个表（或视图），然后在其上运行 sphinx 索引器。这似乎是最低效的方式，因为它会导致数十亿行，并且不涉及连接所有表的其他查询也会受到严重阻碍。
2.  分别在每个表上创建 sphinx 索引。但这不允许我将这些索引用于需要跨表连接的查询。为了克服这个问题，在要连接的列上使用 sql_joined_field，sphinx 将执行连接过程。
3.  将 JOIN 放在构建索引的 sql_query 中。表保持规范化，但您在构建索引时取消规范化。这似乎是一个很好的解决方案。但是父表上会有很多更新/删除/插入。那么，相应地更新 spinx 索引是否会是一件棘手或乏味的事情，并且从长远来看，这会在更新太多之后影响性能吗？如何处理父表中的更新并有效地修改 sphinx 索引。

我想知道解决这个问题的更好方法是什么。很抱歉这个问题很长，但我想汇总我的研究，以免在接下来的答案中重复同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:35:36.613

是的，我会推荐3。

阅读有关 main+delta 更新的信息，以获取快速索引更新的方法（无需重建整个索引）

[http://sphinxsearch.com/docs/current.html#delta-updates](http://sphinxsearch.com/docs/current.html#delta-updates)

# python - 将 JOIN ON 的 SQL 查询转换为 SQLAlchemy

> ID：15247233
> 
> 赞同：7
> 
> 时间：2013-03-06T12:21:34.360
> 
> 标签：python, sql, sqlalchemy

我的查询看起来像这样（“3”和“4”在实际使用中当然会有所不同）：

```
SELECT op_entries.*, op_entries_status.*
FROM op_entries
LEFT OUTER JOIN op_entries_status ON op_entries.id = op_entries_status.op_id AND op_entries_status.order_id = 3
WHERE op_entries.op_artikel_id = 4 AND op_entries.active
ORDER BY op_entries.id 
```

这是为了获取物品/订单组合生产中的所有阶段（操作）以及每个阶段的当前状态（进度）（如果存在状态条目）。如果不是，仍必须返回阶段，但状态行为空。

我在让这个在 SQLAlchemy 中发挥作用时遇到了沉浸式的问题。这本来是一个两部分的问题，但我[已经在这里找到了用普通 SQL 执行此](https://stackoverflow.com/questions/5913942/return-rows-even-if-record-does-not-exist-left-outer-join)操作的方法。现在在 ORM 中，这是一个不同的故事，我什至无法弄清楚如何使用文档制作 JOIN ON 条件！

编辑（不允许新用户回答自己的问题）：

相信我解决了它，我想把它写下来作为一个问题有帮助！也许这会帮助其他一些新手。

```
query = db.session.query(OpEntries, OpEntriesStatus).\
    outerjoin(OpEntriesStatus, db.and_(
        OpEntries.id == OpEntriesStatus.op_id,
        OpEntriesStatus.order_id == arg_order_id)).\
    filter(db.and_(
        OpEntries.op_artikel_id == artidQuery,
        OpEntries.active)).\
    order_by(OpEntries.id).\
    all() 
```

如果有人有更好的解决方案或任何见解，我会保持开放状态。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T12:33:17.963

假设一些命名约定，下面应该这样做：

```
qry = (session.query(OpEntry, OpEntryStatus)
        .join(OpEntryStatus, and_(OpEntry.id == OpEntryStatus.op_id, OpEntryStatus.order_id == 3))
        .filter(OpEntry.op_artikel_id == 4)
        .filter(OpEntry.active == 1)
        .order_by(OpEntry.id)
        ) 
```

阅读[join, outerjoin](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.join)以获取有关连接的更多信息，其中第二个参数是`onclause`. 如果您需要超过 1 个，只需使用`and_`or`or_`创建您需要的任何表达式。

# r - 在 ggplot2 的轴刻度上显示两个测量单位

> ID：15247235
> 
> 赞同：10
> 
> 时间：2013-03-06T12:21:44.887
> 
> 标签：r, graphics, ggplot2

如何在 ggplot2 的轴刻度上显示两个替代单位（如果有的话）？我想要实现的是这样的：

![在此处输入图像描述](../Images/1803b222fcaecd2b2169601871d16d20.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:39:45.427

这是一个 hacky 方法：

```
d = data.frame(x = 1:20, y = rnorm(20, 5, 5))

ggplot(data = d, aes(x = x, y = y)) +
  scale_x_continuous(breaks = c(1:20, seq(2.54, 20, 2.54)),
                     labels = c(1:20, paste0("\n", 1:as.integer(20/2.54), "\""))) +
  geom_point() 
```

![在此处输入图像描述](../Images/5658bf56b72a25483933b8f6e89e6b3a.png)

# css - CSS 菜单在 IE 中不工作，在 Chrome 和 Firefox 中工作正常

> ID：15247236
> 
> 赞同：0
> 
> 时间：2013-03-06T12:21:45.713
> 
> 标签：css, internet-explorer, menu

我有一个 CSS 菜单，在 chrome 和 firefox 中运行良好，但在 IE 中不行。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:26:07.630

查看源代码，Doctype 位于错误的位置，这迫使 IE 以 Quirks 模式呈现。

还可以考虑添加follow meta标签来强制IE使用最新的引擎进行渲染，

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:28:42.090

您的 HTML 不正确

```
<head>
    <title>Career Media Mobile</title>
    <meta charset="UTF-8">
    <link href="css/dropDown.css" rel="stylesheet" type="text/css">
</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

    <body bgcolor="#D2D1CF"> 
```

应该

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
    <title>Career Media Mobile</title>
    <meta charset="UTF-8">
    <link href="css/dropDown.css" rel="stylesheet" type="text/css">
</head>

    <body bgcolor="#D2D1CF"> 
```

我猜这会有所帮助

# ckeditor - CKEditor 禁用所有 jquery 对话框

> ID：15247237
> 
> 赞同：0
> 
> 时间：2013-03-06T12:21:54.327
> 
> 标签：ckeditor, jquery-dialog

我对 ckeditor 和 jquery 对话窗口有疑问。我有一个表单，我将一个 div 拖到一个可排序的表中。拖动时，我正在克隆 div 并打开一个包含 ckeditor 的 jquery 对话框。编辑器是在对话框的 open 方法上创建的，并在关闭时被销毁。第一次拖动编辑器后，它在对话框中打开，但是页面中的所有对话框都没有打开。我收到此错误：`Uncaught TypeError: Object [object Object] has no method 'dialog'`尝试打开另一个对话框或使用编辑器拖动另一个 div 时。我的代码是：

```
var CKEditor
$("#dialog_editor").dialog({
    autoOpen: false,
    height: 500,
    width: $("#td_form").width(),
    modal: true,
    zIndex: -1,
    buttons: [
        {
            text: "Save",
            "class": 'btn btn_content',
            click: function () {
                saveEditorContent();
            }
        }
    ],
    open: function (type, data) {
        $(this).parent().appendTo("#form");

        CKEditor = CKEditor = CKEDITOR.replace('text_editor', {
            extraPlugins: 'autogrow',
            removePlugins: 'resize'
        });
    },
    close: function () {
        CKEditor.destroy();
    }
}); 
```

我在网上搜索了所有内容，但仍然没有找到答案。我尝试添加`adapters/jquery.js`，但仍然是同样的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T19:55:59.463

您应该尝试将“Uploadcare”插件更新到当前版本，之后一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:21:21.337

我发现问题出在我添加到名为“Uploadcare”的ckeditor中的插件中

# spring - Spring和Hibernate保存不起作用

> ID：15247242
> 
> 赞同：0
> 
> 时间：2013-03-06T12:22:04.090
> 
> 标签：spring, hibernate, struts2

我正在使用 Hibernate 和 Spring 3.0 我正在尝试将值保存到数据库中，但是当我看到控制台时，唯一的选择查询显示插入或更新未显示并且保存不起作用

我创建了一个 sessionFactory bean 并将其注入 Impl

```
 <bean id="GetStartedDAOBean" class="com.sample.dao.impl.GetStartedDAOImpl" >
            <property name="sessionfactory" ref="sessionFactory">
            </property>
    </bean

<bean id="GetStartedActionBean" class="com.sample.action.GetStartedAction">
        <property name="getStartedDAOImpl" ref="GetStartedDAOBean"></property>
        <property name="industryDAOImpl" ref="IndustryDAOBean"></property>
        <property name="stateDAOImpl" ref="stateDAOBean"></property>
    </bean> 
```

在 impl 我有

```
private SessionFactory sessionfactory;

      public void setSessionfactory(SessionFactory sessionfactory) {
        this.sessionfactory = sessionfactory;
      }

    public void save(Customer customer)throws IllegalStateException,SystemException{

        try {
            sessionfactory.openSession().saveOrUpdate(customer);
        }
        catch(Exception e){
            e.printStackTrace();    
        }

    } 
```

当我调试 sessionFactory 中有值但它不保存任何值。并且也不显示任何插入的查询。没有错误。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T12:30:03.980

您打开会话（内存中）并在其中保存一些内容，但会话仅在您`flush()`. 做一个

```
Session session = sessionfactory.openSession();
session.saveOrUpdate(customer);
session.flush(); 
```

另一种方式是提交事务，这样 Hibernate 会自动调用`flush()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T12:24:06.477

尝试使用`@Transactional`at 方法，并将以下内容添加到您的 XML 中：

```
<tx:annotation-driven/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T14:18:01.033

`@Transaction`你已经放弃了服务类的方法，`<tx:annotation-driven/>`你必须在`applicaiton-context.xml`文件中放弃。

因此，当任何人调用服务类的方法时，事务将由 spring 启动，它将处理提交和回滚。

# c# - 如何用多项式 x16 + x12 + x5 + 1 计算 CRC 16

> ID：15247244
> 
> 赞同：7
> 
> 时间：2013-03-06T12:22:09.693
> 
> 标签：c#, .net, serial-port, crc, crc16

我正在尝试与某些系统交互，并且在他们的规范中，他们需要计算 CRC 16 以进行串行通信。这是文档的摘录

“使用标准多项式 X16 +X12 +X5 +1 的消息的 16 位 CCITT CRC。种子值始终为 0（零）”

首先，我只找到了 2-3 个 C# 代码示例，它们似乎都没有给我正确的值。我试过这个[http://www.sanity-free.com/133/crc_16_ccitt_in_csharp.html](http://www.sanity-free.com/133/crc_16_ccitt_in_csharp.html)，但我不确定为初始值设置什么。我尝试了零，但仍然无法正常工作。

我正在测试它的数据是：

```
0x00 0x09 0x10 0x01 0x01 0x7C 0xF4 0xB8 0x00, 
```

我得到的CRC值是

```
0xF2 0x24, 
```

但是他们的系统说应该是

```
0xC0 0x2F 
```

我的理解是多项式 x16 + x12 + x5 + 1 = 0x11021，但是即使我在代码中使用这个，它仍然给我错误的答案。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T13:54:13.940

我想到了。我不得不使用 CRC16-CCITT Kermit 实现。我认为他们的文档需要更新，因为它使用了不同的多项式。

[http://www.sanity-free.com/147/standard_crc16_and_crc16_kermit_implementation_in_csharp.html](http://www.sanity-free.com/147/standard_crc16_and_crc16_kermit_implementation_in_csharp.html)

# c# - c#中最有效的循环是什么

> ID：15247247
> 
> 赞同：34
> 
> 时间：2013-03-06T12:22:21.160
> 
> 标签：c#, loops, for-loop, foreach, while-loop

有许多不同的方法可以通过 c# 中的对象项来完成相同的简单循环。

这让我想知道是否有任何理由无论是性能还是易用性，都可以在其他方面使用。还是仅仅取决于个人喜好。

取一个简单的对象

```
var myList = List<MyObject>; 
```

让我们假设对象已被填充并且我们想要遍历这些项目。

方法一。

```
foreach(var item in myList) 
{
   //Do stuff
} 
```

方法二

```
myList.Foreach(ml => 
{
   //Do stuff
}); 
```

方法三

```
while (myList.MoveNext()) 
{
  //Do stuff
} 
```

方法四

```
for (int i = 0; i < myList.Count; i++)
{
  //Do stuff   
} 
```

我想知道的是这些中的每一个都编译成同一件事吗？使用其中一个是否有明显的性能优势？

还是这只是编码时的个人喜好？

我错过了吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-06T12:44:31.173

大多数时候的答案是**没关系。** 循环中的项目数量（甚至可能认为是“大量”项目，比如数千个）不会对代码产生影响。

当然，如果您将此确定为您的情况的瓶颈，请务必解决它，但您必须首先确定瓶颈。

也就是说，每种方法都需要考虑很多事情，我将在此概述。

让我们先定义几件事：

*   所有测试均在 32 位处理器上的 .NET 4.0 上运行。
*   [`TimeSpan.TicksPerSecond`](http://msdn.microsoft.com/en-us/library/system.timespan.tickspersecond.aspx)在我的机器上 = 10,000,000
*   所有测试都在单独的单元测试会话中执行，而不是在同一个测试会话中（以免可能干扰垃圾收集等）

以下是每个测试所需的一些助手：

`MyObject`班级：

```
public class MyObject
{
    public int IntValue { get; set; }
    public double DoubleValue { get; set; }
} 
```

创建[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)任意长度`MyClass`实例的方法：

```
public static List<MyObject> CreateList(int items)
{
    // Validate parmaeters.
    if (items < 0) 
        throw new ArgumentOutOfRangeException("items", items, 
            "The items parameter must be a non-negative value.");

    // Return the items in a list.
    return Enumerable.Range(0, items).
        Select(i => new MyObject { IntValue = i, DoubleValue = i }).
        ToList();
} 
```

为列表中的每个项目执行的操作（需要，因为方法 2 使用委托，并且需要调用*某些东西*来衡量影响）：

```
public static void MyObjectAction(MyObject obj, TextWriter writer)
{
    // Validate parameters.
    Debug.Assert(obj != null);
    Debug.Assert(writer != null);

    // Write.
    writer.WriteLine("MyObject.IntValue: {0}, MyObject.DoubleValue: {1}", 
        obj.IntValue, obj.DoubleValue);
} 
```

一种创建[`TextWriter`](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)写入[null](http://msdn.microsoft.com/en-us/library/system.io.stream.null.aspx) [`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)的方法（基本上是数据接收器）：

```
public static TextWriter CreateNullTextWriter()
{
    // Create a stream writer off a null stream.
    return new StreamWriter(Stream.Null);
} 
```

让我们将项目的数量固定为 100 万（1,000,000，这应该足够高，通常可以强制执行，这些都具有大致相同的性能影响）：

```
// The number of items to test.
public const int ItemsToTest = 1000000; 
```

让我们进入方法：

## 方法一：`foreach`

以下代码：

```
foreach(var item in myList) 
{
   //Do stuff
} 
```

编译成以下内容：

```
using (var enumerable = myList.GetEnumerable())
while (enumerable.MoveNext())
{
    var item = enumerable.Current;

    // Do stuff.
} 
```

那里发生了很多事情。你有方法调用（它可能会也可能不会反对`IEnumerator<T>`or`IEnumerator`接口，因为在这种情况下编译器尊重鸭子类型）并且你`// Do stuff`被提升到那个 while 结构中。

这是衡量性能的测试：

```
[TestMethod]
public void TestForEachKeyword()
{
    // Create the list.
    List<MyObject> list = CreateList(ItemsToTest);

    // Create the writer.
    using (TextWriter writer = CreateNullTextWriter())
    {
        // Create the stopwatch.
        Stopwatch s = Stopwatch.StartNew();

        // Cycle through the items.
        foreach (var item in list)
        {
            // Write the values.
            MyObjectAction(item, writer);
        }

        // Write out the number of ticks.
        Debug.WriteLine("Foreach loop ticks: {0}", s.ElapsedTicks);
    }
} 
```

输出：

> Foreach 循环滴答声：3210872841

## 方法2：`.ForEach`方法上`List<T>`

`.ForEach`on 方法的代码`List<T>`如下所示：

```
public void ForEach(Action<T> action)
{
    // Error handling omitted

    // Cycle through the items, perform action.
    for (int index = 0; index < Count; ++index)
    {
        // Perform action.
        action(this[index]);
    }
} 
```

请注意，这在功能上等同于方法 4，除了一个例外，提升到`for`循环中的代码作为委托传递。这需要取消引用以获取需要执行的代码。虽然委托的性能从 .NET 3.0 开始有所改进，但这种开销*是*存在的。

然而，微不足道。衡量性能的测试：

```
[TestMethod]
public void TestForEachMethod()
{
    // Create the list.
    List<MyObject> list = CreateList(ItemsToTest);

    // Create the writer.
    using (TextWriter writer = CreateNullTextWriter())
    {
        // Create the stopwatch.
        Stopwatch s = Stopwatch.StartNew();

        // Cycle through the items.
        list.ForEach(i => MyObjectAction(i, writer));

        // Write out the number of ticks.
        Debug.WriteLine("ForEach method ticks: {0}", s.ElapsedTicks);
    }
} 
```

输出：

> ForEach 方法记号：3135132204

这*实际上*比使用循环*快*约 7.5 秒。`foreach`并不完全令人惊讶，因为它使用直接数组访问而不是使用[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx).

但请记住，这意味着每个项目的保存时间为 0.0000075740637 秒。对于小项目列表来说，这是*不*值得的。

## 方法三：`while (myList.MoveNext())`

如方法 1 所示，这*正是*编译器所做的（加上`using`语句，这是一种很好的做法）。通过自己展开编译器将生成的代码，您不会在这里获得任何东西。

无论如何，让我们这样做：

```
[TestMethod]
public void TestEnumerator()
{
    // Create the list.
    List<MyObject> list = CreateList(ItemsToTest);

    // Create the writer.
    using (TextWriter writer = CreateNullTextWriter())
    // Get the enumerator.
    using (IEnumerator<MyObject> enumerator = list.GetEnumerator())
    {
        // Create the stopwatch.
        Stopwatch s = Stopwatch.StartNew();

        // Cycle through the items.
        while (enumerator.MoveNext())
        {
            // Write.
            MyObjectAction(enumerator.Current, writer);
        }

        // Write out the number of ticks.
        Debug.WriteLine("Enumerator loop ticks: {0}", s.ElapsedTicks);
    }
} 
```

输出：

> 枚举器循环刻度：3241289895

## 方法四：`for`

在这种特殊情况下，您将获得一些速度，因为列表索引器将直接进入底层数组以执行查找（这是一个实现细节，顺便说一句，没有什么可以说它不能是树结构备份`List<T>`）。

```
[TestMethod]
public void TestListIndexer()
{
    // Create the list.
    List<MyObject> list = CreateList(ItemsToTest);

    // Create the writer.
    using (TextWriter writer = CreateNullTextWriter())
    {
        // Create the stopwatch.
        Stopwatch s = Stopwatch.StartNew();

        // Cycle by index.
        for (int i = 0; i < list.Count; ++i)
        {
            // Get the item.
            MyObject item = list[i];

            // Perform the action.
            MyObjectAction(item, writer);
        }

        // Write out the number of ticks.
        Debug.WriteLine("List indexer loop ticks: {0}", s.ElapsedTicks);
    }
} 
```

输出：

> 列出索引器循环刻度：3039649305

*然而，这**可以*产生影响的地方是数组。编译器可以展开数组以一次处理多个项目。

与在十项循环中对一项进行十次迭代不同，编译器可以将其展开为十项循环中两项的五次迭代。

但是，我在这里并不肯定这实际上正在发生（我必须查看 IL 和编译后的 IL 的输出）。

这是测试：

```
[TestMethod]
public void TestArray()
{
    // Create the list.
    MyObject[] array = CreateList(ItemsToTest).ToArray();

    // Create the writer.
    using (TextWriter writer = CreateNullTextWriter())
    {
        // Create the stopwatch.
        Stopwatch s = Stopwatch.StartNew();

        // Cycle by index.
        for (int i = 0; i < array.Length; ++i)
        {
            // Get the item.
            MyObject item = array[i];

            // Perform the action.
            MyObjectAction(item, writer);
        }

        // Write out the number of ticks.
        Debug.WriteLine("Enumerator loop ticks: {0}", s.ElapsedTicks);
    }
} 
```

输出：

> 数组循环滴答声：3102911316

应该注意的是，[Resharper](http://www.jetbrains.com/resharper/)开箱即用地提供了一个重构建议，以将上述`for`语句更改为`foreach`语句。这并不是说这是对的，但基础是减少代码中的技术债务量。

* * *

**TL;博士**

你真的不应该关心这些东西的性能，除非在你的情况下测试表明你有一个真正的瓶颈（并且你必须有大量的项目才能产生影响）。

通常，您应该选择最可维护的方法，在这种情况下，方法 1 ( `foreach`) 是要走的路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-25T15:40:57.850

关于问题的最后一点，“我错过了吗？” 是的，我觉得即使这个问题已经很老了，我也不提这个问题。虽然这四种方法将在相对相同的时间内执行，但上面未显示的一种方法运行速度比所有方法都快。事实上，随着迭代列表中项目数量的增加，这一点非常重要。这将与最后一种方法完全相同，但不是进入`.Count`循环的条件检查，而是在设置循环之前将此值分配给一个变量并改用它。这给你留下了这样的东西：

```
var countVar = list.Count;
for(int i = 0; i < countVar; i++)
{
 //loop logic
} 
```

通过这种方式，您只需在每次迭代时查找一个变量值，而不是解析 Count 或 Length 属性，这会大大降低效率。

# google-chrome - 不同浏览器中的 alfresco 查询结果不一样

> ID：15247249
> 
> 赞同：1
> 
> 时间：2013-03-06T12:22:26.510
> 
> 标签：google-chrome, firefox, authentication, networking, alfresco

我有最奇怪的问题。我在 Alfresco 中编写了一个网页脚本，用于搜索符合条件的文档数量。

如果我从 Chrome / IE 调用它，结果是正确的：大约 6 / 10 个文档。

如果我从机器上的 Firefox 调用它，则该数字完全错误（250，因为我将其限制为 250），但如果我从另一个调用它就可以了。

我不知道是什么原因造成的。我完全卸载了 Firefox，检查了 FF 中的网络设置、网卡、防火墙，... 通过 Fiddler 调用似乎相同。

呼叫不是使用 SSO 进行的。我使用 /s/ 调用。我得到一个提示，我在哪里提供我的用户名/密码。

我不知道这些机器有什么问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:50:27.643

那么您使用的是哪个版本的 Alfresco？可能这与使用不同语言设置查询时的某些特殊性有关，例如

[https://issues.alfresco.com/jira/browse/ALF-7691](https://issues.alfresco.com/jira/browse/ALF-7691)

对于我前段时间的一个问题。

# xml - 如何创建允许一个或多个后跟相等数量的XML 模式？

> ID：15247251
> 
> 赞同：1
> 
> 时间：2013-03-06T12:22:28.637
> 
> 标签：xml, xsd, context-free-grammar, xsd-1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:31:58.153

您的要求是识别上下文无关语言。您不能使用模式语言中的内容模型来做到这一点，它要求内容模型是正则表达式，因此需要定义常规而非上下文无关的语言。目前广泛使用的模式语言都不允许内容模型定义上下文无关语言。

您的选择是 (1) 更改您的设计以更好地使用您掌握的技术，而不是反对它，(2) 使用临时流程（如 InfantPro'Aravind' 建议的 XSLT 样式表），或 (3) 使用Schematron 或 XSD 1.1 中的断言来强制执行约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:05:08.820

InfantPro'Aravind' 错误地指出：

```
This is not possible with XSD 1.0\. I think not possible with 1.1 as well. 
```

事实上，使用 XSD 1.1 断言是很有可能的。只需定义一个内容模型，允许任意数量的 As 后跟任意数量的 B，然后添加断言

```
<xs:assert test="count(A) = count(B)"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:39:47.533

这在 XSD 1.0 中是不可能的。我认为 1.1 也是不可能的。

还有其他方法，例如 Schematron。或者可以使用 XSLT 转换并输出结果。反过来可以验证 XML 是否有效。

我将简要介绍第二种方法：

示例输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <a/>
  <a/>
  <b/>
  <b/>
</root> 
```

示例 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/root">
    <validation>
      <xsl:choose>
        <!--Output 'true' if count is equal .. and 'false' otherwise-->
        <xsl:when test="count(a)=count(b)">
          <xsl:text>true</xsl:text>
        </xsl:when>
        <xsl:otherwise>
          <xsl:text>false</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </validation>
  </xsl:template>
</xsl:stylesheet> 
```

由于 count(a) 等于 count(b) 这输出：

```
<?xml version="1.0" encoding="utf-8"?>
<validation>true</validation> 
```

这反过来将被验证：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="validation" type="xs:boolean" fixed="true"/>
</xs:schema> 
```

在这种情况下将通过，因为`<validation>`节点具有价值`true`

注意：XSLT 只是创建一个我用于扩展验证的转换副本，它不会修改原始输入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-02T12:35:06.507

XML Schema 1.0 仅对上下文无关文法提供部分支持。遗憾的是，它不支持需要相等数量的 a 和 b 的语法。另一方面，它确实支持一些上下文无关的语法。我写了一篇文章解释了这一点：[http ://www.xfront.com/XML-Schema-1-0-and-Relax-NG-Partially-Support-Context-Free-Grammars.pdf](http://www.xfront.com/XML-Schema-1-0-and-Relax-NG-Partially-Support-Context-Free-Grammars.pdf)

# json - 哪些接口表示可以从 JSON 反序列化到 AutoBean？

> ID：15247259
> 
> 赞同：0
> 
> 时间：2013-03-06T12:22:55.647
> 
> 标签：json, gwt, autobean

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:19:20.460

检查这个样本。你必须有相应的接口（它有你的值的getter和setter）

```
// Declare any bean-like interface with matching getters and setters, no base type is necessary
    interface Person {
      Address getAddress();
      String getName();
      void setName(String name);
      void setAddress(Address a);
    }

    interface Address {
      // Other properties, as above
    }

    // Declare the factory type
    interface MyFactory extends AutoBeanFactory {
      AutoBean<Address> address();
      AutoBean<Person> person();
    }

    class DoSomething() {
      // Instantiate the factory
      MyFactory factory = GWT.create(MyFactory.class);
      // In non-GWT code, use AutoBeanFactorySource.create(MyFactory.class);

      Person makePerson() {
        // Construct the AutoBean
        AutoBean<Person> person = factory.person();

        // Return the Person interface shim
        return person.as();
      }

      String serializeToJson(Person person) {
        // Retrieve the AutoBean controller
        AutoBean<Person> bean = AutoBeanUtils.getAutoBean(person);

        return AutoBeanCodex.encode(bean).getPayload();
      }

      Person deserializeFromJson(String json) {
        AutoBean<Person> bean = AutoBeanCodex.decode(factory, Person.class, json);
        return bean.as();
      }
    } 
```

# asp.net-mvc-4 - 如何在 ASP.NET MVC 4 上使用带有 SPA 热毛巾模板的本地数据库

> ID：15247260
> 
> 赞同：5
> 
> 时间：2013-03-06T12:23:00.057
> 
> 标签：asp.net-mvc-4, breeze, single-page-application, hottowel

我可能是 MVC 上最缺乏经验的人，更不用说 Hot Towel SPA 了，但我希望我能基于这些技术生产一个系统。

我已经阅读了 Breeze 网站和 John Papa 的所有文档，但我只是不知道如何创建与我的数据库的交互以及检索数据和显示数据、添加或编辑数据，包括删除数据。

我必须在屏幕上构建一个带有大约 5 个网格的仪表板，以显示实时数据，因为它需要进行一些时间计算。

到目前为止，我有 2 天的时间是修改了热毛巾模板以显示我的项目名称，并且我更改了热毛巾图标。我只是无法理解这些东西......两年来，我一直是 3 层架构的 ASP.NET 网站开发人员。

谁能给我有关如何通过此模板传递数据的指南？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:52:57.703

我从 Hot Towel SPA 开始，但使用了其他参考资料，例如您可以在此处找到的 Durandal MovieApp 示例。[http://stephenwalther.com/archive/2013/02/08/using-durandal-to-create-single-page-apps.aspx](http://stephenwalther.com/archive/2013/02/08/using-durandal-to-create-single-page-apps.aspx)。我还下载并查看了包含示例的微风运行时。

在我的场景中，我使用了带有实体框架的 SQL，并创建了一个 WEBAPI 控制器并遵循了微风的文档。我的控制器除外如下。

```
 [BreezeController]
public class ProjectBillingController : ApiController
{
    readonly EFContextProvider<ProjectBillingContext> _contextProvider =
   new EFContextProvider<ProjectBillingContext>();

    // ~/api/todos/Metadata 
    [HttpGet]
    public string Metadata()
    {
        return _contextProvider.Metadata();
    }

    [HttpPost]
    public SaveResult SaveChanges(JObject saveBundle)
    {
        return _contextProvider.SaveChanges(saveBundle);
    }

    [HttpGet]
    public IQueryable<Client> Clients()
    {
        return _contextProvider.Context.Clients;
    }
    ... 
```

然后我尝试模仿Durandal Movie APP的代码和目录结构

```
/App 
/App/respositories 
/App/repositories/repository.js
/App/viewmodels 
/App/viewmodels/clients
/App/viewmodels/clients/show.js 
/App/viewmodels/clients/edit.js
/App/viewmodels/clients/create.js 
/App/views/clients
/App/views/clients/show.html 
/App/views/clients/edit.html
/App/views/clients/create.html 
```

就我而言，我使用了一个存储库，因为它不是任何复杂的查询，尽管对我来说这是一个开始。

但是在我的存储库中，我放置了定义的微风实体管理器和一些函数来检索所有行和 1 行。代码摘录如下，

```
// repository.js
function getRecordLists(modelsListsObservable, errorObservable, entity) {

    return breeze.EntityQuery
    .from(entity)
    .using(manager).execute()
    .then(querySucceeded)
    .fail(queryFailed);

    function querySucceeded(data) {
        modelsListsObservable(data.results);
        logger.log('Fetched ' + entity, null, null, true);

    }

    function queryFailed(error) {
        errorObservable("Error retrieving" + entity + " : " + error.message);
        logger.error("Error retrieving" + entity + " : " + error.message, null, null, true);

    }
};

function getRecord(id, clientObservable, errorObservable, entity, entityKey) {
    return breeze.EntityQuery.from(entity)
    .where(entityKey, "==", id)
    .using(manager).execute()
    .then(querySucceeded)
    .fail(queryFailed);

    function querySucceeded(data) {
        clientObservable(data.results[0]);
        logger.log('Fetched a record from ' + entity, null, null, true);
    }

    function queryFailed(error) {
        errorObservable("Error retrieving a record from " + entity + ": " + error.message);
        logger.error("Error retrieving a record from " + entity + ": " + error.message, null, null, true);
    }

};

// show.js
define(function (require) {

    var repository = require("repositories/repository");
    var app = require('durandal/app');
    var router = require("durandal/plugins/router");
    var logger = require('services/logger');
    var models = ko.observableArray();
    var error = ko.observable();

    return {
        models: models,
        error: error,
        deleteRecord: deleteRecord,

        activate: function (data) {
            return repository.getRecordLists(models, error, "Resources");
        }
    }; 
```

我希望这对你有一点帮助。我也在学习这个，有些东西可能不是最佳实践，但它足以让我学习。

谢谢

# c++ - 为什么 map.insert() 方法会调用复制构造函数两次？

> ID：15247262
> 
> 赞同：5
> 
> 时间：2013-03-06T12:23:09.663
> 
> 标签：c++, map, copy-constructor

我正在创建自定义类以使用容器`Node`实现二叉树：映射的键是对象的标识符。在类中，我必须实现一个复制构造函数。`map<int,Node>``int``Node``Node`

在地图上插入一个`Node`对象时，我注意到它的复制构造函数`Node`被调用了两次。为什么？

```
cout << "node2" << endl;
Node node2;
node2.set_depth(2);
node2.make_it_branch(3,4);

cout << "map" << endl;
map<int,Node> mapping;
cout << "toInsert" << endl;
pair<int,Node> toInsert = pair<int,Node>(2,node2);
cout << "insert" << endl;
mapping.insert(toInsert); 
```

运行上面的代码，输出如下：

```
node2
--- Node()
map
toInsert
--- Node(const Node& orig)
insert
--- Node(const Node& orig)   // Why does the copy constructor be invoked twice?
--- Node(const Node& orig)   // ------------------------------------------------
--- ~Node()
--- ~Node()
--- ~Node()
--- ~Node() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T12:25:18.030

很可能是因为您的地图的值类型是`pair<int const, Node>`，而不是`pair<int, Node>`：在地图中，键是*常量*。

由于`insert()`接受 a`pair<int const, Node> const&`并且您提供 a `pair<int, Node>`，因此要执行转换，必须构造一个临时对象，然后可以从该临时对象中复制构造映射中的值。

要验证它，请更改此行：

```
pair<int, Node> toInsert = pair<int, Node>(2, node2); 
```

进入这一行：

```
pair<int const, Node> toInsert = pair<int const, Node>(2, node2); 
```

您应该会看到对复制构造函数的额外调用消失了。

还要记住，标准库容器的具体实现不需要执行特定数量的副本：实现可能会有所不同，不同的优化级别也会使事情变得不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T07:29:47.980

您正在使用`pair<int,Node>`. insert 方法采用的类型`map<K,V>::value_type`定义为`pair<const K,V>`. 编译器必须插入一个额外的副本才能在这两种类型之间进行转换。

尝试使用`map<int,Node>::value_type`而不是`pair<int,Node>`. 最好使用类本身定义的类型，而不是从头开始重新创建它们。

你也可以通过写作来避免你的第一份副本。

```
map<int,Node>::value_type toInsert(2,node2); 
```

代替

```
map<int,Node>::value_type toInsert = map<int,Node>::value_type(2,node2); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T12:35:25.367

当您执行以下操作时：

```
toInsert = pair<int, Node>(2, node2); 
```

您正在将 传递给对象`node2`的构造`pair`函数。即使您通过引用传递，从概念上讲，您将*值*绑定在一起，这意味着`pair`对象正在制作对象的副本`node2`。复制 #1。

当您将此`pair`对象传递给插入函数时：

```
mapping.insert(toInsert); 
```

.. 是的，您是通过引用传递的，但容器对所引用对象的生命周期一无所知（`toInsert`）。因此，它将自己的副本存储在容器中。复制 #2。

# xpages - Xpage 样式未在 Lotus Notes 客户端上应用

> ID：15247265
> 
> 赞同：1
> 
> 时间：2013-03-06T12:23:17.587
> 
> 标签：xpages, lotus-notes, xpinc

使用 Lotus 客户端的 ID 定位文件使用 IE（Internet Explorer）作为浏览器。在 IE 上打开 Xpage 时，适用于表格单元格和选项卡（用于选项卡式面板）的样式的 Xpage 工作。但是，当在 Lotus Notes 客户端上打开相同的 Xpage 时，样式不会应用于表格和选项卡面板。但是样式会应用于面板（客户端和 Web）。所有样式都在 Xpage 资源中包含的 CSS 中提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T05:00:01.573

Notes 客户端在呈现 xpage 时会缓存样式，即使客户端重新启动，缓存也会保留。

当您在 Notes 客户端中打开一个 xpage 时，键盘快捷键 Ctrl-Shift-Delete 应该会产生一个提示“永久删除所有私人数据？”。
在该提示上单击“确定”，然后关闭并重新打开 xpage，任何样式更改都应该生效。

# android - ListView 项 onTouch 的位置

> ID：15247273
> 
> 赞同：1
> 
> 时间：2013-03-06T12:23:28.097
> 
> 标签：android, listview, position, touch-event, listviewitem

有没有办法获取 ListView 子 onTouch ACTION_DOWN 事件的位置？

```
listView.getChildAt(position_when_touched).setBackgroundResource(R.drawable.newBackground); 
```

# php - 未定义索引：第 13 行 C:\wamp\www\cdij\insert.php 中的 text_unitcost

> ID：15247275
> 
> 赞同：0
> 
> 时间：2013-03-06T12:23:32.450
> 
> 标签：php, html

我正在尝试将值插入表中。但我收到一个错误：第 13 行 C:\wamp\www\cdij\insert.php 中的未定义索引：text_unitcost

插入页面是所有值都经过的页面，这是插入页面：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script language="JavaScript" src="myminiAJAX.js"></script>
<script language="JavaScript" src="functions.js"></script>
</head>
<body>
To Insert a new part<br/>
<form name="insert_values" action="insert.php" method="post">
    Select The Category<select name="combo_category" id="combo_category" onChange="doAjax('fill_combo_insertpart_combo_assembly.php', 'combo_category='+getValue('combo_category'), 'populate_combo_insertpart_combo_assembly', 'post', '1')">
    <option value="-1">--Please Select--</option>
    <option value="Brake">Brake</option>
    <option value="Fastner">Fastner</option>
    <option value="Suspension">Suspension</option>
    <option value="-1">--Please Select--</option>
    <option value="-1">--Please Select--</option>
    <option value="-1">--Please Select--</option>
    <option value="-1">--Please Select--</option>
    <option value="-1">--Please Select--</option>
    </select><br/><br/>
    Select The Assembly<select name="combo_assembly" id="combo_assembly" onchange="doAjax('fill_combo_index_and_indexpart_combo_part.php', 'par='+getValue('combo_assembly'), 'populate_combo_index_and_insertpart_part', 'post', '1')">
    <option value="-1">--Please Select--</option>
    </select><br/><br/>
    Select The Part:<select name="combo_part" id="combo_part">
    <option value="-1">--Please Select--</option>
    </select><br/><br/>
    Where Do you want to Insert?<br/><br/>
    Material<input type="radio" name="radio_insert_table" value="material" onclick="create_form_insertpart_material();doAjax('fill_combo_indexpart_combo_material.php','','populate_combo_insertpart_combo_material','post','1')"/>
    Process<input type="radio" name="radio_insert_table" value="process" onclick="create_form_insertpart_process();doAjax('fill_combo_indexpart_combo_process.php', '', 'populate_combo_insertpart_combo_process', 'post', '1');doAjax('fill_combo_indexpart_combo_multiplier.php', '','populate_combo_insertpart_combo_multiplier', 'post', '1')" />
    Fastner<input type="radio" name="radio_insert_table" value="fastner"/>

    <div id="form" ></div>
    <br/><br/>
    <input type="submit" name="ipsubmit" value="Submit"/>
</form>
</body>
</html> 
```

在“ `<div id="form">`”中，一些新字段是基于使用 javascript 的单选按钮选择创建的。代码如下：

```
function create_form_insertpart_process() {
    document.getElementById("form").innerHTML="<select name=\"combo_process\" id=\"combo_process\" onChange=\"doAjax('fill_combo_indexpart_combo_process.php','process_name='+getValue('combo_process'),'populate_textbox_insertpart_process_unticost_and_unit','post','1')\"><option value=\"-1\">--Please Select--</option></select><br/><br/> ";
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_use\" id=\"text_use\" />";
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_unitcost\" id=\"text_unitcost\" disabled=\"disabled\" />";
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_unit\" id=\"text_unit\" disabled=\"disabled\" />";
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_quantity\" id=\"text_quantity\" />";
    document.getElementById("form").innerHTML+="<select name=\"combo_multiplier\" id=\"combo_multiplier\" onChange=\"doAjax('fill_combo_indexpart_combo_multiplier.php','multiplier_name='+getValue('combo_multiplier'),'populate_textbox_insertpart_multiplier_value','post','1')\"><option value=\"-1\">--Please Select--</option></select><br/><br/> ";
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_multipliervalue\" id=\"text_multipliervalue\" disabled=\"disabled\"/>";
    window.setInterval("calculate_textbox_insertpart_text_subtotal()",10);
    document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_subtotal\" id=\"text_subtotal\"  disabled=\"disabled\" />";

} 
```

在上面的代码中：

```
document.getElementById("form").innerHTML+="<input type=\"text\" name=\"text_unitcost\" id=\"text_unitcost\" disabled=\"disabled\" />"; 
```

此字段的值由 javascript 函数生成，该函数使用 AJAX 和 XML 从服务器返回数据库

最后这是我正在编写代码以将值插入数据库的页面

```
<?php
    include("dbconfig.inc.php");
     $combo_category=$_POST['combo_category'];
     $combo_assembly=$_POST['combo_assembly'];
     $combo_part=$_POST['combo_part'];
     $radio_insert_table=$_POST['radio_insert_table'];
     if($radio_insert_table=="material") {

     }
     else if($radio_insert_table=="process") {
        $combo_process=$_POST['combo_process'];
        $text_use=$_POST['text_use'];
        $text_unitcost=$_POST['text_unitcost'];
        //$text_unit=$_POST['text_unit'];
        //$text_quantity=$_POST['text_quantity'];
        //$combo_multiplier=$_POST['combo_multiplier'];
        //$text_multipliervalue=$_POST['text_multipliervalue'];
        ////$text_subtotal=$_POST['text_subtotal'];
        $select=$dbh->prepare('INSERT INTO process (process_unitcost) values(:text_unitcost)');
        //$select->execute(array(':text_unitcost' => $text_unitcost));

     }
?> 
```

在上面的代码中，我在第 13 行收到一个错误，因为未定义索引 text_unitcost

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:27:03.710

如果您发布已禁用且没有值的 INPUT 字段，则它们不会被发布，因此没有为这些字段设置索引。

禁用的字段不会被发布，`readonly="readonly"`如果您想显示它但不允许编辑，您应该使用它。

参考[http://www.w3.org/TR/html4/interact/forms.html#h-17.12](http://www.w3.org/TR/html4/interact/forms.html#h-17.12)

# iphone - iPhone 5 启动图像和应用程序审查

> ID：15247277
> 
> 赞同：1
> 
> 时间：2013-03-06T12:23:36.560
> 
> 标签：iphone, ios, app-store

我即将提交一个游戏应用程序以供审核。游戏使用 iOS SDK 6.1 和**iOS 5.1**作为部署目标构建。

我目前没有**iPhone 5**（宽）的视图，并且该应用程序在 IP5 上以**信箱**模式运行，这很好。

苹果指南说需要**Default-568@2x**（I​​P5 启动图像）图像，但如果我包含此图像，我会遇到问题 - 应用程序不再以信箱模式运行并且看起来损坏（内容未居中，出现在左侧为横向）。

如果我不包含 IP5 的启动图像，我是否会遇到应用审核问题？

有没有人最近提交了没有 IP5 启动图像的应用程序？

**重要更新：**

**原来的问题现在已经过时了！自 2013 年 5 月 1 日起，所有提交的应用程序都必须具有 iPhone 5 启动图像，并且您不能再依赖兼容性信箱模式。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:58:36.967

如果您支持该屏幕，则仅包含 iPhone 5 启动图像。不包括 Default-568@2x.png 启动图像表示您不支持 iPhone 5 的屏幕尺寸，并且信箱模式将应用于运行您的应用程序的 iPhone 5 设备。

您在 App Store 上不会有任何问题。直到 Apple 决定所有应用程序都必须支持 4 英寸 Retina 屏幕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T00:25:45.080

我刚刚因为没有 -568h 启动屏幕而被拒绝了应用程序，它说从 5 月 1 日起就需要它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-06T00:31:41.237

如果不支持 iPhone 5 和 iPod Touch 5 上的 4" Retina 显示屏，您将不再被允许提交应用程序或现有应用程序的更新。您的二进制文件在进入“等待审核”之前将被自动扫描过程拒绝“ 状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T12:32:59.627

不，如果您想在信箱中运行您的应用程序，则不需要 Default-568@2x....

# iphone - 使用 CMMotionManager 和 UIAccelerometer

> ID：15247278
> 
> 赞同：3
> 
> 时间：2013-03-06T12:23:36.743
> 
> 标签：iphone, ios, uiaccelerometer, cmmotionmanager

我将如何进行以下操作：我想捕捉设备在空间中的运动。

我的意思是，有没有办法使用 iOS 框架知道设备在房间的 3 维空间中移动的确切位置？它移动得有多快？

请指导我找到任何好的教程，因为我很难找到任何好的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:59:29.227

从我在评论中链接到的文档中，我认为有可能实现你所追求的，但这需要大量的工作。我认为该方法将是这样的：

1.  检测哪个轴的速度最大。
2.  计算设备移动的平均速度（沿第 1 点中的轴）——也许你可以有一个按钮来开始/停止开始和结束记录速度的运动？
3.  然后`distance = speed * time`

我认为第 1 部分和第 2 部分将需要进行大量的研究和开发，然后 SO 的人才能提供帮助。但我也会继续研究它。祝你好运。

# php - 自定义约束验证器不存在，或无法自动加载

> ID：15247279
> 
> 赞同：2
> 
> 时间：2013-03-06T12:23:38.443
> 
> 标签：php, symfony

我正在尝试创建一个自定义约束验证器，但我无法让它工作，这是我遇到的错误：

```
AnnotationException: [Semantical Error] The annotation  
"@Cmpny\MyBundle\Validator\IsGifImage" in property           
Cmpny\MyBundle\Entity\Post::$src does not exist, or could not be auto-loaded. 
```

这是我的项目的树：

```
src/Cmpny/MyBundle/Validator/
└── Constraint
    ├── isGifImage.php
    └── isGifImageValidator.php 
```

isGifImage.php

```
<?php
namespace Appinest\WhenayBundle\Validator\Constraint;  
use Symfony\Component\Validator\Constraint;

/**  
* @Annotation  
*/  
class IsGifImage extends Constraint¬
{
    public $message = 'This is not a gif image!';
}
?> 
```

isGifImageValidator

```
 3 namespace Appinest\WhenayBundle\Validator\Constraint;¬
  2 ¬
  1 use Symfony\Component\Validator\Constraint;¬
  0 use Symfony\Component\Validator\ConstraintValidator;¬
  1 ¬
  2 class IsGifImageValidator extends ConstraintValidator¬
  3 {¬
  4     public function isValid($value, Constraint $constraint)¬
  5     {¬
  6         //My function
 22     }¬
    } 
```

然后在我的实体类中导入：

```
use Cmpny\WhenayBundle\Validator\Constraint as CmpnyAssert; 
```

然后使用上面我要验证的断言：

```
@CmpnyAssert\IsGifImage() 
```

我搜索了解决方案，但一无所获，有什么帮助吗？：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:32:13.223

只是一个想法：重命名您的 php 脚本（驼峰式）第一个字母是小写的“是...” - 它可能期望文件与包含的类命名相同。

# iphone - 如何使用 iOS 分享汽车社交媒体分享？

> ID：15247283
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:23:43.410
> 
> 标签：iphone, ios, social-networking

我在 iOS 应用程序中做了默认社交媒体分享，但我做了一些验证优惠券代码。当它是成功的优惠券代码时，优惠券代码在社交媒体上自动分享 - 分享我将如何实施和分享优惠券在社交媒体中自动生成代码。任何人都可以使用 iOS 向我提供一些链接或示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:01:43.783

是的，您可以从[马来西亚社交媒体代理](http://acmeeconnect.com/services.html)网站获取信息。他们在博客部分解释了所有内容。

# sql - 过滤掉聚合行 SSRS

> ID：15247287
> 
> 赞同：0
> 
> 时间：2013-03-06T12:23:55.467
> 
> 标签：sql, sql-server, reporting-services

我正在尝试编辑一份相当复杂的报告。以下是报告截图： ![在此处输入图像描述](../Images/2c5c4af974ed6a8ea92c23f6860492e8.png)

我需要过滤掉“不在组中的数字”为 n/a 或 0 的所有行，我尝试使用 tablix 属性中的过滤器选项过滤掉，但由于错误它不会让我：无法使用聚合函数在数据集过滤器中。

下面是构成“Number not in Groups”字段的表达式的代码：

```
=iif(sum(iif(left(Fields!crs_group.Value,1) = "G",1,0),"GrpCourse")=0,
     "n/a",
     sum(iif(Fields!crs_group.Value="Enrolled on Course",1,0)) - sum(iif(left(Fields!crs_group.Value,1) = "G",1,0))) 
```

我还尝试过滤掉 SQL 查询中的那些行，但运气不佳。下面是我尝试过滤掉查询中的行：

```
SELECT
    sub.course ,
    sub.crs_group ,
    m.m_reference ,
    me.e_status ,
    me.e_id ,
    s.s_studentreference ,
    p.p_forenames ,
    p.p_surname ,
    pcd.p_surname + ',' + pcd.p_forenames AS course_dir ,
    ISNULL(COUNT(*) - SUM(CASE WHEN LEFT(crs_group, 1) = 'G' THEN 1
                          END), 1) AS NumberNotInGroups
FROM
    msql.unitesnapshot.dbo.capd_moduleenrolment AS me
    INNER JOIN msql.unitesnapshot.dbo.capd_module AS m
        ON me.e_module = m.m_id
    LEFT JOIN msql.unitesnapshot.dbo.capd_staff scd
        ON m.m_modulesupervisor = scd.s_id
    LEFT JOIN msql.unitesnapshot.dbo.capd_person pcd
        ON scd.s_id = pcd.p_id
    INNER JOIN msql.unitesnapshot.dbo.capd_student s
        ON me.e_student = s.s_id
    INNER JOIN msql.unitesnapshot.dbo.capd_person p
        ON s.s_id = p.p_id
    INNER JOIN (
                 SELECT
                    m.m_id ,
                    CASE WHEN m.m_reference NOT LIKE '%G_'
                         THEN m.m_reference
                         ELSE LEFT(m.m_reference,
                                   CHARINDEX('G', m.m_reference) - 1)
                    END AS course ,
                    CASE WHEN m.m_reference NOT LIKE '%G_'
                         THEN 'Enrolled on Course'
                         ELSE RIGHT(m.m_reference, 2)
                    END AS crs_group
                 FROM
                    unitesnapshot.dbo.capd_module m
               ) sub
        ON sub.m_id = me.e_module
WHERE
    me.e_status = 'A'
    AND LEFT(m.m_reference, 2) = '12'
    AND SUBSTRING(m.m_reference, 7, 2) IN ( 'VF', 'AB', 'FB' )
GROUP BY
    sub.course ,
    sub.crs_group ,
    m.m_reference ,
    me.e_status ,
    me.e_id ,
    s.s_studentreference ,
    p.p_forenames ,
    p.p_surname ,
    pcd.p_surname + ',' + pcd.p_forenames
HAVING
    COUNT(*) - SUM(CASE WHEN LEFT(crs_group, 1) = 'G' THEN 1
                        ELSE 0
                   END) <> 0
ORDER BY
    p.p_surname ,
    p.p_forenames 
```

但是，这不起作用，因为它包含在报告中具有 n/a 值的行。小组由以 G_ 结尾的课程代码定义，但是有些课程没有小组，因此这些课程显示为“n/a”。对不起，如果这些都没有意义，我真的需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:08:28.947

我还没有完全理解您的查询，但似乎您可以使用公用表表达式 (CTE) 在查询中执行此操作：

```
;
WITH 
CourseIsGroupCourse
AS
(
   SELECT
      m.m_id ,
      CASE WHEN m.m_reference NOT LIKE '%G_'
           THEN m.m_reference
           ELSE LEFT(m.m_reference,
                     CHARINDEX('G', m.m_reference) - 1)
      END AS course ,
      SUM(...[Something I haven't figured out yet...]) as IsGroupCourse
   FROM
      unitesnapshot.dbo.capd_module m
   GROUP BY
      m.m_id,
      CASE WHEN m.m_reference NOT LIKE '%G_'
           THEN m.m_reference
           ELSE LEFT(m.m_reference,
                     CHARINDEX('G', m.m_reference) - 1)
      END 
)
[Now back to your big query...]

SELECT
    sub.course ,
    sub.crs_group ,
    m.m_reference ,
   ...
FROM
    msql.unitesnapshot.dbo.capd_moduleenrolment AS me
    INNER JOIN msql.unitesnapshot.dbo.capd_module AS m
        ON me.e_module = m.m_id
    LEFT JOIN 
...
WHERE
    me.e_status = 'A'
    AND LEFT(m.m_reference, 2) = '12'
    AND SUBSTRING(m.m_reference, 7, 2) IN ( 'VF', 'AB', 'FB' )
-- Here's the key bit...
    AND sub.course in (SELECT course FROM CourseIsGroupCourse where IsGroupCourse = 1) 
```

（在处理 SQL 问题时，我发现用更具描述性的名称命名表通常会有所帮助，然后您就可以开始查看您在哪里得到了什么，并适当地将它们拼凑在一起。）

# ms-access - 导入 excel 文件以访问和设置列字段名称

> ID：15247299
> 
> 赞同：1
> 
> 时间：2013-03-06T12:24:22.957
> 
> 标签：ms-access, vba

我有一个访问工具，我正在导入一个带有表格信息的 excel 文件。系统正在创建一个包含此信息的新表，其中包含列字段（F1、F2、F3 等），在它下面有 10 行数据，然后是一个表。我需要将此表中的信息附加到 Access 中的另一个表中。我有代码和追加查询，但有时 excel 文件中的某些列会改变它们的位置，这对我的表 2 来说是个问题。我想问你是否有可能以某种方式自动更改当我从 Excel 表中导入信息时，第一个表中的列字段。

先感谢您！- 这是一个截图。黄色的去灰色的。

![在此处输入图像描述](../Images/548990921622b4251d48cf6fae060039.png)

# c++ - boost::sprit 如何用于解析嵌套的 for 循环？

> ID：15247300
> 
> 赞同：2
> 
> 时间：2013-03-06T12:24:23.730
> 
> 标签：c++, boost, boost-spirit

我正在尝试解析具有这种语法的循环：

```
for(loop = 1:10) {

} 
```

在我的语法中，我有以下规则：

```
genericString %= lexeme[+(char_("a-zA-Z"))];
intRule %= int_;
commandString %= lexeme[+(char_ - '}')];
forLoop %= string("for")
        >> '('
        >> genericString // variable e.g. c
        >> '='
        >> (intRule | genericString) // variable e.g. i
        >> ':'
        >> (intRule | genericString) // variable e.g. j
        >> ')' >> '{'
        >> (forLoop | commandString)
        >> '}'; 
```

虽然这适用于上面的简单示例，但它无法解析以下嵌套示例：

```
for(loop = 1:10) {
    for(inner = 1:10) {

    }
} 
```

我猜这是由于解析器对大括号的位置“感到困惑”。我想我需要做一些类似[http://boost-spirit.com/distrib/spirit_1_7_0/libs/spirit/example/fundamental/lazy_parser.cpp](http://boost-spirit.com/distrib/spirit_1_7_0/libs/spirit/example/fundamental/lazy_parser.cpp)的事情（唉，我发现很难理解）。

干杯，

本。

编辑1：

我现在认为处理来自 commandString（下面称为 nestedBlock）而不是在 forLoop 中的递归会更好，例如：

```
forLoop %= string("for")
        >> '('
        >> genericString // variable e.g. c
        >> '='
        >> (intRule | genericString) // variable e.g. i
        >> ':'
        >> (intRule | genericString) // variable e.g. j
        >> ')' 
        >> nestedBlock;

nestedBlock %= lexeme['{' >> -(char_ - '}' - '{')
                          >> -nestedBlock
                          >> -(char_ - '}' - '{')
                          >> '}']; 
```

这是由于大量 boost::spriti 错误而失败的。规则定义为：

```
 qi::rule<Iterator, std::string(), ascii::space_type> nestedBlock;
    qi::rule<Iterator, Function(), ascii::space_type> forLoop; 
```

函数是 boost::variants 的结构

编辑2：

所以这就是我现在所拥有的（设计用于使用或不使用嵌套结构）：

```
commandCollection %= *start;

forLoop %= string("for")
        >> '('
        >> genericString // variable e.g. c
        >> '='
        >> (intRule | genericString) // variable e.g. i
        >> ':'
        >> (intRule | genericString) // variable e.g. j
        >> ')'
        >> '{'
        >>       commandCollection
        >> '}';

start %= loadParams  | restoreGenomeData | openGenomeData | initNeat | initEvo |
                 initAllPositions | initAllAgents | initCoreSimulationPointers |
                 resetSimulationKernel | writeStats | restoreSimState |
                 run | simulate | removeObjects | setGeneration |
                 setParam | getParam | pause | create | reset |
                 loadAgents | getAgent | setAgent | listParams | loadScript | forLoop
                 | wait | commentFunc | var | add | sub | mult | div | query; 
```

我声明 commandCollection 规则如下：

```
qi::rule<Iterator, boost::fusion::vector<Function>, ascii::space_type> commandCollection; 
```

我认为这会如我所料。commandCollection 定义为 0 个或多个命令，这些命令应存储在 boost::fusion::vector 中。但是，当我从 Function() 结构中提取向量时（请记住，开始规则使用 Function() 迭代器），由于某种原因，该类型未被识别为 boost::fusion::vector 所以不能提取。我不确定为什么...

但是，如果我有

```
commandCollection %= start; 
```

并将规则标记为

```
qi::rule<Iterator, Function(), ascii::space_type> commandCollection; 
```

然后尝试将数据提取为单个 Function() 结构，它工作正常。但我希望它能在某种容器中存储多个命令（即 *start）。我也尝试过使用 std::vector 但这也失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:00:47.437

您的命令字符串不喜欢内部循环中的空主体。

`+`通过更改为`*`此处来修复它：

```
commandString %= lexeme[*(char_ - '}')]; 
```

或者，如果您更喜欢匹配*可选*块而不是*潜在的空*块，请考虑@llonesmiz 提到的修复。

测试用例：

```
#define BOOST_SPIRIT_DEBUG
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
// #include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

typedef boost::variant<int, std::string> Value;
typedef std::pair<Value, Value> Range;
typedef std::pair<std::string, Range> Iteration;

typedef Iteration attr_t;

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, attr_t(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        genericString %= lexeme[+(char_("a-zA-Z"))];// variable e.g. c
        intRule %= int_;
        commandString %= lexeme[*(char_ - '}')];
        value = intRule | genericString;
        range = value >> ':' >> value;
        forLoop %= lit("for")
                >> '(' >> genericString >> '=' >> range >> ')' 
                >> '{'
                >>      (forLoop | commandString)
                >> '}';

        start = forLoop;

        BOOST_SPIRIT_DEBUG_NODES(
                (start)(intRule)(genericString)(commandString)(forLoop)(value)(range)
                 );
    }

  private:
    qi::rule<It, std::string(), Skipper> genericString, commandString;
    qi::rule<It, int(), Skipper> intRule;
    qi::rule<It, Value(), Skipper> value;
    qi::rule<It, Range(), Skipper> range;
    qi::rule<It, attr_t(), Skipper> forLoop, start;
};

bool doParse(const std::string& input)
{
    typedef std::string::const_iterator It;
    auto f(begin(input)), l(end(input));

    parser<It, qi::space_type> p;
    attr_t data;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,qi::space,data);
        if (ok)   
        {
            std::cout << "parse success\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<It>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    bool ok = doParse(
            "for(loop = 1:10) {\n"
            "   for(inner = 1:10) {\n"
            "   }\n"
            "}"
            );
    return ok? 0 : 255;
} 
```

我衷心建议查看显示解析失败的 DEBUG 输出：

```
<forLoop>
  <try>\n   }\n}</try>
  <fail/>
</forLoop>
<commandString>
  <try>\n   }\n}</try>
  <fail/>
</commandString>
<fail/> 
```

# java - 通过 EventHandler 创建的 ActionListener 不起作用

> ID：15247302
> 
> 赞同：0
> 
> 时间：2013-03-06T12:24:25.167
> 
> 标签：java, swing, exception, jbutton, actionlistener

```
public class event {
    public static void main(String[] args) {
        Sframe frame = new Sframe();
        frame.setSize(800,600);
        frame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

    }
}

class Sframe extends javax.swing.JFrame {
    public Sframe() {
        Spanel panel = new Spanel();
        getContentPane().add(panel);
        panel.buttonadd();
        //panel.buttonadd();
    }
}

class Spanel extends javax.swing.JPanel {

    public void buttonadd() {
        javax.swing.JButton blackb = new JButton("Black");
        add(blackb);
        blackb.addActionListener((ActionListener)EventHandler
        .create(ActionListener.class,this,"hello"));
    }
    public void hello() {
        System.out.println("I love every girl");
    }
    static int i;
} 
```

当我单击黑色按钮时，它会引发以下错误。我正在关注核心 Java 书。

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: No method called hello on class Spanel with no arguments
at java.beans.EventHandler.invokeInternal(EventHandler.java:476)
at java.beans.EventHandler.access$000(EventHandler.java:278) 
```

我在错误中跳过了很多行......它的列表很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:43:46.630

为此，目标类必须是`public`. 反射在幕后被使用`EventHandler`并且具有只能使用`public`类来查找目标方法的限制。

```
public class Spanel { 
```

# c# - 任务中的异常不会立即中断

> ID：15247304
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:24:31.313
> 
> 标签：c#, asynchronous, task-parallel-library

一些伪代码来说明我的问题：

```
public async Task DoSomethingAsync()
{
   try
   {
      var task1 = DoThisAsync(); // throws exception
      var task2 = DoThatAsync();

      await task1.Then(t => Handle(t));
      await task2.Then(t => Handle(t));
   }
   catch (AggregateException)
   {
      Console.WriteLine("Whatnow?");
   }
} 
```

然后定义如下：

```
// from https://gist.github.com/rizal-almashoor/2818038
public static Task Then(this Task task, Action<Task> next)
{ 
   var tcs = new TaskCompletionSource<AsyncVoid>();

   task.ContinueWith(t=>
   {
      if (t.IsFaulted)
         tcs.TrySetException(t.Exception); // continuing task1 this line only gets hit
                                           // after DoThatAsync() is completed??
      else
      {
         try
         {
            next(t);
            tcs.TrySetResult(default(AsyncVoid));
         }
         catch (Exception ex)
         {
            tcs.TrySetException(ex);
         }
      }
   });

   return tcs.Task;
} 
```

所以我的问题是，出于某种原因，即使 DoThisAsync() 很早就抛出了异常，但在 DoThatAsync() 完成之前我看不到“whatnow”。这不是确切的代码，我试图简化以免浪费您的时间。如果这里没有任何东西可以解释这种行为，请告诉我，我会添加更多细节。

**编辑**

出于这个问题的目的，我们可以想象 DoThisAsync() 和 DoThatAsync() 是异步方法，基本上执行以下操作：

```
DoThisAsync:
   Thread.Sleep(30000);    // wait a short perioud of time
   throw new Exception();  // and throw an exception

DoThatAsnyc:
   Thread.Sleep(240000);   // wait a long period of time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:28:05.177

大概您`DoThisAsync`开始了一项新任务，并且该任务的动作是引发异常的原因-对吗？

在这种情况下，异常存储在任务中。除非您调用像 .Wait 或 .Result 这样的触发器方法，否则不会重新引发异常。当您`await`从 中返回任务时`Then`，它会导致该任务的异常被重新抛出。

**编辑：** 根据您的编辑显示 DoThisAsync：当`async`返回 Task 的标记方法导致异常时，该异常存储在 Task 中（而不是允许它传播）。如果您要删除`async`关键字，我希望在调用 DoThisAsync 时发生异常。

**编辑：** 来自 Stephen Toub 的 Async/Await 常见问题解答： http: [//blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx)：

> 当应用于方法时，“async”关键字有什么作用？
> 
> 当您使用“async”关键字标记方法时，您实际上是在告诉编译器两件事：
> 
> 1.  您告诉编译器您希望能够在方法中使用“await”关键字（当且仅当它所在的方法或 lambda 标记为异步时，您才能使用 await 关键字）。这样做时，您是在告诉编译器使用状态机编译该方法，以便该方法能够挂起，然后在等待点异步恢复。
> 2.  您是在告诉编译器“提升”方法的结果或返回类型中可能出现的任何异常。对于返回 Task 或 Task 的方法，这意味着在方法中未处理的任何返回值或异常都将存储到结果任务中。对于返回 void 的方法，这意味着任何异常都会通过方法初始调用时当前的任何“SynchronizationContext”传播到调用者的上下文。

# c++ - C++ 中的文件路径在 IIS w3wp 进程中不正确

> ID：15247306
> 
> 赞同：0
> 
> 时间：2013-03-06T12:24:36.437
> 
> 标签：c++, iis, io, iis-7.5

我们在 C++ 中创建了一个 DLL 并在 IIS 进程中使用它。这个 DLL 应该在我们直接在代码中确定的路径中创建一个文件。当我们运行应用程序时，IIS 创建文件而不是给定路径，它是在 IIS 进程运行的地方创建的`C:\Windows\SysWOW64\inetsrv`

我们用 C++ 编写了这段代码：

```
FILE* fpLastMsgID = _fsopen(m_csFileName, "r", _SH_DENYNO);
if(fpLastMsgID != NULL)
{
...
} 
```

当我们在控制台应用程序中使用此 DLL 时，它可以正常工作。我们如何在 C++ 中为 IIS 指定文件路径来创建我们的文件？

# php - SocketException 权限被拒绝 - CakePHP 2.3

> ID：15247307
> 
> 赞同：2
> 
> 时间：2013-03-06T12:24:36.023
> 
> 标签：php, cakephp, centos

**尝试使用CakePHP 2.3.0**发送电子邮件时收到该错误。
我的云配置是：

*   PHP 5.4
*   阿帕奇 2.2
*   MySQL 5.5
*   CakePHP 2.3.0

对不起我的英语。

* * *

```
2013-03-06 09:15:05 Error: [SocketException] Permission denied
Request URL: /notifications/sendContact
Stack Trace:
#0 /var/www/html/site/lib/Cake/Network/Email/SmtpTransport.php(96): CakeSocket->connect()
#1 /var/www/html/site/lib/Cake/Network/Email/SmtpTransport.php(60): SmtpTransport->_connect()
#2 /var/www/html/site/lib/Cake/Network/Email/CakeEmail.php(1065): SmtpTransport->send(Object(CakeEmail))
#3 /var/www/html/site/app/Controller/NotificationsController.php(41): CakeEmail->send()
#4 [internal function]: NotificationsController->sendContact()
#5 /var/www/html/site/lib/Cake/Controller/Controller.php(485): ReflectionMethod->invokeArgs(Object(NotificationsController), Array)
#6 /var/www/html/site/lib/Cake/Routing/Dispatcher.php(186): Controller->invokeAction(Object(CakeRequest))
#7 /var/www/html/site/lib/Cake/Routing/Dispatcher.php(161): Dispatcher->_invoke(Object(NotificationsController), Object(CakeRequest), Object(CakeResponse))
#8 /var/www/html/site/app/webroot/index.php(102): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#9 {main}
2013-03-06 09:15:05 Error: Fatal Error (256): [CakeException] Unknown status code
#0 /var/www/html/site/lib/Cake/Error/ExceptionRenderer.php(212): CakeResponse->statusCode(13)
#1 [internal function]: ExceptionRenderer->error400(Object(SocketException))
#2 /var/www/html/site/lib/Cake/Error/ExceptionRenderer.php(175): call_user_func_array(Array, Array)
#3 /var/www/html/site/lib/Cake/Error/ErrorHandler.php(122): ExceptionRenderer->render()
#4 [internal function]: ErrorHandler::handleException(Object(SocketException))
#5 {main} in [/var/www/html/site/lib/Cake/Error/ErrorHandler.php, line 131]
2013-03-06 09:15:05 Error: [InternalErrorException] Internal Server Error
Request URL: /notifications/sendContact
Stack Trace:
#0 /var/www/html/site/lib/Cake/Error/ErrorHandler.php(183): ErrorHandler::handleFatalError(256, '[CakeException]...', '/var/www/html/p...', 131)
#1 [internal function]: ErrorHandler::handleError(256, '[CakeException]...', '/var/www/html/p...', 131, Array)
#2 /var/www/html/site/lib/Cake/Error/ErrorHandler.php(131): trigger_error('[CakeException]...', 256)
#3 [internal function]: ErrorHandler::handleException(Object(SocketException))
#4 {main}
2013-03-06 09:15:05 Error: Fatal Error (256): [CakeException] Unknown status code
#0 /var/www/html/site/lib/Cake/Error/ExceptionRenderer.php(212): CakeResponse->statusCode(13)
#1 [internal function]: ExceptionRenderer->error400(Object(SocketException))
#2 /var/www/html/site/lib/Cake/Error/ExceptionRenderer.php(175): call_user_func_array(Array, Array)
#3 /var/www/html/site/lib/Cake/Error/ErrorHandler.php(122): ExceptionRenderer->render()
#4 [internal function]: ErrorHandler::handleException(Object(SocketException))
#5 {main} in [/var/www/html/site/lib/Cake/Error/ErrorHandler.php, line 131]
2013-03-06 09:15:05 Error: [InternalErrorException] Internal Server Error
Request URL: /notifications/sendContact
Stack Trace:
#0 /var/www/html/site/lib/Cake/Error/ErrorHandler.php(183): ErrorHandler::handleFatalError(256, '[CakeException]...', '/var/www/html/p...', 131)
#1 [internal function]: ErrorHandler::handleError(256, '[CakeException]...', '/var/www/html/p...', 131, Array)
#2 /var/www/html/site/lib/Cake/Core/App.php(926): call_user_func('ErrorHandler::h...', 256, '[CakeException]...', '/var/www/html/p...', 131, Array)
#3 /var/www/html/site/lib/Cake/Core/App.php(899): App::_checkFatalError()
#4 [internal function]: App::shutdown()
#5 {main} 
```

* * *

# 电子邮件.php

```
public $gmail = array(
    'transport' => 'Smtp',
    'from' => array('patric.....@gmail.com' => 'Patrick Maciel'),
    'port'=>'465',
    'timeout'=>'30',
    'auth' => true,
    'host' => 'ssl://smtp.gmail.com',
    'username'=>'patrick......@gmail.com',
    'password'=>'.......',
    'client' => null,
    'log' => false
); 
```

* * *

# php 信息 (centOs)

```
-bash-4.1# yum info php
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.globo.com
 * epel: mirror.globo.com
 * extras: mirror.globo.com
 * updates: mirror.globo.com
Installed Packages
Name       : php
Arch       : i686
Version    : 5.4.12
Release    : 1.el6.remi
Size       : 8.2 M
Repo       : installed
From repo  : remi
Summary    : PHP scripting language for creating dynamic web sites
URL        : http://www.php.net/
License    : PHP and Zend and BSD
Description: PHP is an HTML-embedded scripting language. PHP attempts to make it
           : easy for developers to write dynamically generated web pages. PHP also
           : offers built-in database integration for several commercial and
           : non-commercial database management systems, so writing a
           : database-enabled webpage with PHP is fairly simple. The most common
           : use of PHP coding is probably as a replacement for CGI scripts.
           :
           : The php package contains the module which adds support for the PHP
           : language to Apache HTTP Server.

Available Packages
Name       : php
Arch       : i386
Version    : 5.3.22
Release    : 1.w5
Size       : 1.3 M
Repo       : webtatic
Summary    : PHP scripting language for creating dynamic web sites
URL        : http://www.php.net/
License    : PHP
Description: PHP is an HTML-embedded scripting language. PHP attempts to make it
           : easy for developers to write dynamically generated web pages. PHP also
           : offers built-in database integration for several commercial and
           : non-commercial database management systems, so writing a
           : database-enabled webpage with PHP is fairly simple. The most common
           : use of PHP coding is probably as a replacement for CGI scripts.
           :
           : The php package contains the module which adds support for the PHP
           : language to Apache HTTP Server.

-bash-4.1# php -m
[PHP Modules]
bz2
calendar
Core
ctype
curl
date
dom
ereg
exif
fileinfo
filter
ftp
gd
gettext
gmp
hash
iconv
imap
intl
json
libxml
mbstring
mcrypt
memcache
mhash
mysql
mysqli
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_sqlite
Phar
pspell
readline
recode
Reflection
session
shmop
SimpleXML
snmp
sockets
SPL
sqlite3
standard
tidy
tokenizer
wddx
xml
xmlreader
xmlrpc
xmlwriter
xsl
zip
zlib

[Zend Modules]

-bash-4.1# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:45:34.423

显然您的 PHP 不允许连接到指定的 SMTP 服务器。您是否正确配置了电子邮件设置？（SMTP 服务器、端口、用户名、密码等）。

这些设置的模板包含在 CakePHP 文件中：app/Config/email.php.default ( [https://github.com/cakephp/cakephp/blob/2.2.7/app/Config/email.php.default](https://github.com/cakephp/cakephp/blob/2.2.7/app/Config/email.php.default) )

您需要将此文件复制到`app/Config/email.php`并修改您的环境的设置。

之后，您必须在发送电子邮件时指定正确的配置

更详尽的解释可以在手册中找到：http: [//book.cakephp.org/2.0/en/core-utility-libraries/email.html#configuration](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#configuration)

### 更新

另一种选择是 SELinux 安全位不允许 PHP/Apache 建立网络连接。

有几个安全位，但这似乎是一个可能的候选者：`httpd_can_network_connect` .

您可以暂时允许 PHP/Apache 使用以下方法建立网络连接： `setsebool httpd_can_network_connect`

并使用`-P`参数进行设置“永久”； `setsebool -P httpd_can_network_connect`

有关所有 SELibux 布尔值的概述；

[http://wiki.centos.org/TipsAndTricks/SelinuxBooleans](http://wiki.centos.org/TipsAndTricks/SelinuxBooleans)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T10:06:06.250

**getebool -a**

检查**httpd_can_network_connect**

如果关闭，请将其设置为开启

**setsebool -P httpd_can_network_connect on**

这个对我有用 ！！

# html - 如何使用 Perl 编码和解码“重音字符”

> ID：15247315
> 
> 赞同：4
> 
> 时间：2013-03-06T12:24:50.533
> 
> 标签：html, mysql, perl, template-toolkit

我在一个基于 Web 的教育网站工作，我们使用 Perl、MySQL 5、Apache 和 Template Toolkit。我们计划在我们的网站中引入对多语言的支持。

我们做了什么

如果我们的模板文件中有一个类似于 Courses Main Page<\h1> 的选项卡名称，我们已将其转换为

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<h1>[% glossary.$language.courses_main_page %]<\h1> 
```

$language 获取用户登录时选择的值。

我们有一个表来维护我们的 Mysql DB 中的这些数据：

> CREATE TABLE `translation`( `english`varchar(255) NOT NULL,
> `language`varchar(255) NOT NULL, `translation`varchar(2000) NOT NULL, ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='将元素文本翻译成外语'

![在此处输入图像描述](../Images/6f2298d00c7e39961ec8bfeb5645dbb8.png)

在 MySQL 的连接函数中，我提供了 'SET character_set_results=NULL'。我尝试使用 utf8，但仅限于某些选项卡的问题已增加到许多部分。

因此，一旦用户登录系统，我们就获取所有翻译并将其存储在 PERL 哈希中并缓存它。我们将此哈希传递给将替换该值的模板文件。

问题： á 和 é 等重音符号被一些不同的字符集符号取代。

例如：在前端，我们看到 Cursos Página Principal 的“Cursos Página Principal”。

[它与htmlentities 和 é（e 急性）](https://stackoverflow.com/questions/7663738/htmlentities-and-e-e-acute)中给出的解决方案非常相似

谁能告诉我如何在 Perl 中实现相同的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T13:12:40.540

# 表示字符集

> 例如：在前端，我们看到 Cursos Página Principal 的“Cursos Página Principal”。

当字符被传输为 UTF-8 但被解释为 ISO-8859-1 或类似时，就会发生这种[mojibake 。](http://en.wikipedia.org/wiki/Mojibake)所以我建议解决这个问题的最简单方法是确保您的 HTML 页面以正确的 mime 类型发送到客户端，即

```
Content-Type: text/html; charset=utf-8 
```

如果该信息存在于 HTML 标头中，则该值将覆盖 HTML 文档本身中的任何设置。因此，请确保您设置了 HTML 标头，或者您的 HTML 标头根本不指定字符集，以便浏览器查看元设置。

在某些浏览器（例如 Firefox）中，您可以使用 View / Character Encoding 手动更改字符集。您可以使用它来检查渲染时错误的字符编码是否真的是问题的原因。

# 实际上编码和解码

在某些情况下，修复字符集无济于事。可能是您根本无法控制框架的那一部分。或者某些东西将您的字符从 ISO-8859-1 转换为 UTF-8*两次*，因此不可读的符号实际上已经表示为 UTF-8。在这些情况下，您可以使用[Encode](http://search.cpan.org/dist/Encode/Encode.pm)模块直接对 Perl 中的字符进行编码，使用 HTML 字符引用作为输出：

```
use Encode qw(decode encode FB_HTMLCREF);
# maybe: $unicodeString = decode("utf-8", $byteString);
$htmlString = encode("ascii", $unicodeString, FB_HTMLCREF); 
```

该`decode`步骤是否必要取决于您与数据库的对话方式。如果您的数据库连接能够支持 unicode，那么您已经有了 unicode 字符串，您可以简单地将它们编码为 HTML。对于[DBD::mysql](http://search.cpan.org/dist/DBD-mysql/)有一个参数`mysql_enable_utf8 => 1`可以实现这一点。使用它比在您自己的代码中解码内容更可取。[这个答案](https://stackoverflow.com/a/13156138/1468366)有关于语法的详细信息。

这些函数的作用的一个示例：

```
$byteString    = "Cursos P\xc3\xa1gina Principal.";   # two bytes
$unicodeString = "Cursos P\N{U+00E1}gina Principal."; # one unicode character
$htmlString    = "Cursos P&#225;gina Principal.";     # html character reference 
```

# c++ - 无法将子类实例作为参数而不是超类传递

> ID：15247318
> 
> 赞同：3
> 
> 时间：2013-03-06T12:25:02.183
> 
> 标签：c++, qt, inheritance, polymorphism

在我的代码中，我有`McdGraphicsScene`继承自的类`QGraphicsScene`，但是当我尝试将指针传递给 to 的实例时，`McdGraphicsScene`出现`QGraphicsView::setScene(QGraphicsScene* scene);`以下错误：

```
../MeriseModeler/merisemodeler/mcdui.cpp: In member function 'void McdUi::setModel(McdModel*)':
../MeriseModeler/merisemodeler/mcdui.cpp:34:42: error: no matching function for call to 'QGraphicsView::setScene(McdGraphicsScene*)'
../MeriseModeler/merisemodeler/mcdui.cpp:34:42: note: candidate is:
In file included from ../../.qt5/5.0.0/gcc/include/QtWidgets/QGraphicsView:1:0,
                 from ../MeriseModeler/merisemodeler/mcdui.cpp:10:
../../.qt5/5.0.0/gcc/include/QtWidgets/qgraphicsview.h:161:10: note: void QGraphicsView::setScene(QGraphicsScene*)
../../.qt5/5.0.0/gcc/include/QtWidgets/qgraphicsview.h:161:10: note:   no known conversion for argument 1 from 'McdGraphicsScene*' to 'QGraphicsScene*' 
```

这是类的代码

```
class McdGraphicsScene : public QGraphicsScene
{
    Q_OBJECT

    // Methods and attributs
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T12:35:31.653

您是否使用任何前向[声明](http://en.wikipedia.org/wiki/Forward_declaration)`McdGraphicsScene`？

确保实际的类定义在调用站点可见。如果只有前向声明可用，则调用代码无法推断出`McdGraphicsScene`继承自`QGraphicsScene`.

# android - 活动内容可变

> ID：15247321
> 
> 赞同：-4
> 
> 时间：2013-03-06T12:25:15.683
> 
> 标签：android, actionbarsherlock

我需要`activity`用一个创建一个`ActionBar`，这样如果你按下操作栏按钮，显示的内容会`activity`以不同的方式显示相同的信息`layout`（一个是饼图，另一个是一个`listview`）。

我不想使用 tabs 或 a `viewpager`，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:03:09.800

在单独的片段中构建每个视图，并使用操作栏按钮设置当前可见片段。

# mfc - 如何在不修改系统注册表的情况下绕过 MFC 应用程序中的 UAC 检查？

> ID：15247326
> 
> 赞同：0
> 
> 时间：2013-03-06T12:25:22.807
> 
> 标签：mfc, uac

[http://msdn.microsoft.com/en-us/library/bb384691.aspx](http://msdn.microsoft.com/en-us/library/bb384691.aspx)并没有真正的帮助。Visual Studio 环境设置没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:41:50.907

[我的（赞成的）答案由于某种原因被删除。又来了。]

这个问题的答案是：你不能绕过 UAC 提示。阅读以下博客文章，原因有很多：

[常见问题解答：为什么我无法绕过 UAC 提示？](https://techcommunity.microsoft.com/t5/windows-blog-archive/faq-why-can-8217-t-i-bypass-the-uac-prompt/ba-p/701510)

引用该常见问题解答：

> Windows Vista 用户帐户控制的设计者明确决定不合并 Unix 和 Mac OS X 等类 Unix 操作系统中的 setuid/suid 或 sudo 等功能。我认为他们做出了正确的决定。
> 
> ...
> 
> 如果可以将应用程序标记为以静默提升的权限运行，那么所有那些存在 LUA 错误的应用程序会变成什么？答：它们都会被标记为静默提升。未来的 Windows 软件将如何编写？答：默默提升。没有人会真正修复他们的应用程序，最终用户应用程序将继续要求并以不必要的完全管理权限运行。

账单

# javascript - Dygraphs setVisibility of column

> ID：15247327
> 
> 赞同：0
> 
> 时间：2013-03-06T12:25:25.780
> 
> 标签：javascript, dygraphs

我正在尝试更改 Dygraph GVizChart 列的可见性。

这有效：

```
function drawChart() {
  data = getData();
  window.chart1 = new Dygraph.GVizChart(
       document.getElementById('dygraphs')).draw(data, {
    });
  } 
```

这也有效：

```
function drawChart() {
  data = getData();
  window.chart1 = new Dygraph.GVizChart(
       document.getElementById('dygraphs')).draw(data, {
            visibility: [false, true, true, true]
    });
  } 
```

但是在里面`drawChart`，在那段代码之后，当我添加以下几行时，

```
function drawChart() {
  data = getData();
  window.chart1 = new Dygraph.GVizChart(
       document.getElementById('dygraphs')).draw(data, {
    });
    window.chart1.setVisibility(0, true);
    window.chart1.setVisibility(1, false);
  } 
```

我得到错误：

> 未捕获的类型错误：无法调用未定义的方法“setVisibility”。画图

读完[这个问题](https://stackoverflow.com/questions/9409513/setting-dygraphs-initial-column-visibility-by-series-name?rq=1)后，我想可能`chart1`在执行时还没有准备好。所以我添加了这个功能：

```
 function showChange() {
        alert('show chart1:' + window.chart1);
        window.chart1.setVisibility(3, false);
    }

  <a href="#" onclick='showChange();return false;'>showChange</a> 
```

但是当我点击`showChange`链接时，我得到同样的错误：

> 未捕获的类型错误：无法调用未定义的方法“setVisibility”

警报窗口说：

> 显示图表1：未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:19:48.290

`new Dygraph.GVizChart()`返回一个对象。`.draw()`才不是。

你想要更多类似的东西：

```
window.chart1 = new Dygraph.GVizChart(document.getElementById('dygraphs'));
window.chart1.draw(data, {}); 
```

您还会遇到问题，因为 dygraphs GViz 包装器没有`setVisibility()`方法。您需要获取底层 Dygraph 对象才能使您的代码正常工作：

```
function showChange() {
    alert('show chart1:' + window.chart1);
    window.chart1.date_graph.setVisibility(3, false);
} 
```

# java - 格式化字符串并获取数据

> ID：15247331
> 
> 赞同：1
> 
> 时间：2013-03-06T12:25:28.930
> 
> 标签：java, string-formatting

我有一个字符串

```
Action Completed-PPN-P1:1234 
```

如何格式化以分别获取单词以检查条件为

```
if(string == Action Completed)
if(string == PPN)
if...... 
```

如何格式化以获得上述代码？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:30:36.120

您需要使用`String.split`采用正则表达式模式的方法，具体取决于您想要更改模式的内容 - 但是要将字符串拆分为“-”和“：”，您可以这样做

```
final String myString = "Action Completed-PPN-P1:1234";

final String[] myStringArr = myString.split("-|:");

System.out.println(Arrays.toString(myStringArr)); 
```

输出：

```
[Action Completed, PPN, P1, 1234] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:29:24.390

如果要查看字符串是否包含某些字符，请使用 .contains 方法。为此，

```
if(string.contains("Action Completed"))
if(string.contains("PPN"))
if...... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:30:34.430

试试这个

```
String[] split = "Action Completed-PPN-P1:1234".split("[-:]");
if("Action Completed".equals(split[0])){
if("PPN".equals(split[1])){ 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T12:30:48.140

您可以使用基本的库函数：

```
String entry = "Action Completed-PPN-P1:1234";
String[] splits = entry.split("-"); 
```

这将为您提供所有这些：

```
splits[0] -- "Action Completed"
splits[1] -- "PPN"
splits[2] -- "P1:1234" 
```

# c# - 使用实时/预览编辑列表框？

> ID：15247333
> 
> 赞同：1
> 
> 时间：2013-03-06T12:25:34.663
> 
> 标签：c#, xaml, windows-phone-8

我目前正在自定义一个 ListBox。我的意思是向一个 listItem 添加一个图像元素、第二个行元素等。

itemSource 是 C# 中的列表，因此我没有 Expression Blend/VS 中的项目的预览。这就是痛苦。

因为我总是要编辑 XAML 然后部署来检查。这种情况一直持续到最后一个像素正确为止。

没有办法在 Blend/VS 中编辑带有自定义项（带有动态 itemSource）的 ListBox 吗？

那真的会加快我的发展速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:44:59.667

如果您想查看您的控件在设计时的样子，您必须使用 SampleData。有几种方法可以做到这一点，这取决于您的框架。

假设您有一个名为 MainPage.xaml 的页面。如果您还没有视图模型，请创建一个新模型并将其命名为 MainViewModel.cs。定义将用于绑定的所有公共属性。获得视图模型后，在名为 SampleData 的文件夹中创建新文件并将其命名为 MainViewModelSampleData.xaml。

现在，在 MainPage.xaml 中将以下属性添加到页面元素：

```
d:DataContext={d:DesignData Source=SampleData/MainViewModelSampleData.xaml} 
```

还将 MainViewModelSampleData.xaml 的构建操作设置为 DesignData。

现在，如果要在 MainPage 中显示数据，则需要在示例数据文件中定义所有属性。例如：

```
// view model contains public properties Title of type string and Children of type
// PersonViewModel which contains properties Name and Age (string and int respectively)
<local:MainViewModel xmlns:local="clr-namespace:myapp"
                     Title="Title">
    <local:MainViewModel.Children>
        <local:ChildViewModel Name="John" Age="31" />
    </local:MainViewModel.Children>
</local:MainViewModel> 
```

您现在应该在设计视图中看到您的页面充满了数据。这样，通过使用 MVVM，您可以快速创建模拟数据。这将确保您可以围绕现有数据设计视图，而无需运行应用程序。

阅读以下链接的更多信息：

*   [31 天芒果 | 第 18 天：使用示例数据](http://www.jeffblankenburg.com/2011/11/18/31-days-of-mango-day-18-using-sample-data/)
*   [修改样本数据](http://msdn.microsoft.com/en-us/library/ee341407%28v=expression.40%29.aspx)
*   [生成样本数据](http://msdn.microsoft.com/en-us/library/ee341450%28v=expression.40%29.aspx)
*   [在设计时使用混合样本数据，在运行时使用真实数据](http://blog.paulbetts.org/index.php/2010/02/02/using-blend-sample-data-at-design-time-and-real-data-at-runtime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:30:52.423

我现在知道该怎么做。如果有人偶然发现这个问题，请执行以下操作：

复制您在 itemtemplate 的堆栈面板中编写的所有 XAML

```
<ListBox.ItemTemplate>
   <DataTemplate>
       <StackPanel>
             //...
       </StackPanel>
   </DataTemplate>
</ListBox.ItemTemplate> 
```

并将其复制到`<ListBox> //Here </ListBox>` 那里，您可以在设计器中对其进行编辑。

完成后，只需将代码复制回 StackPanel。

# mysql - Oracle - 错误：'ORA-01400：无法将 NULL 插入

> ID：15247335
> 
> 赞同：2
> 
> 时间：2013-03-06T12:25:40.643
> 
> 标签：mysql, oracle, migration, notnull, ora-01400

我正在尝试将记录插入表中，但出现错误 -

> 'ORA-01400: cannot insert NULL into (....'. 表结构为：

我从 Mysql 迁移到 Oracle。

在 Mysql 上这工作，但在 Oracle 上它不工作。我怎样才能解决这个问题？我是否需要编写所有列插入查询或取消选择非空选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T17:07:05.447

尝试这个：

```
create or replace trigger EDITIONS_COR
  before insert or update on EDITIONS
  for each row
begin
  if INSERTING then
    select EDITIONS_SEQ.nextval into :new.ID from DUAL;
  end if;
  :new.CORDATE:=SYSDATE;
  :new.USERNAME:=USER;
end; 
```

# csv - 用于删除 CSV 中某列为空的行的批处理脚本

> ID：15247337
> 
> 赞同：1
> 
> 时间：2013-03-06T12:25:44.543
> 
> 标签：csv, batch-file

可以说我有以下条目：

```
*ARTNR;*BESTAND;*HERSTARTNR;*WG;*WG2;*LWG;*LWG2
1000;2758;;PAS;;Passive Bauelemente;
5800;0;;PAS;MIC;Passive Bauelemente;Microchip Technology
5801;0;;AKT;AMP;Aktive Bauelemente;TE connectivity
5802;0;;PAS;;Passive Bauelemente;
5803;0;"PDZ 4,3B  7""SOD323";AKT;;Aktive Bauelemente;
5804;0;;MEC;HON;Elektromechanik;Honeywell
5805;0;;MEC;;Elektromechanik;
5806;0;;MEC;;Elektromechanik;
5807;0;;MEC;HON;Elektromechanik;Honeywell
5809;0;;AKT;ORS;Aktive Bauelemente;Osram Opto Semiconductors
5810;0;61240090;MEC;;Elektromechanik;
5811;0;AT89C55WD-24PU;AKT;ATM;Aktive Bauelemente;Atmel
5815;0;;MEC;;Elektromechanik;
5816;0;;MEC;;Elektromechanik; 
```

我现在想删除列上所有为空的行，*HERSTARTNR 就像第一行一样。这可以使用批处理脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:51:49.917

要保留标题行，请测试前两列中的非分号。

在 Windows 中：

```
findstr /v "^[^;]*;[^;]*;;" old.csv >new.csv 
```

在 *nix 中：

```
grep -P -v '^[^;]*;[^;]*;;' old.csv >new.csv 
```

Linux 示例：

```
rojo@pico:~$ grep -P -v '^[^;]*;[^;]*;;' old.csv > new.csv
rojo@pico:~$ cat new.csv
*ARTNR;*BESTAND;*HERSTARTNR;*WG;*WG2;*LWG;*LWG2
5803;0;"PDZ 4,3B  7""SOD323";AKT;;Aktive Bauelemente;
5810;0;61240090;MEC;;Elektromechanik;
5811;0;AT89C55WD-24PU;AKT;ATM;Aktive Bauelemente;Atmel 
```

窗口示例：

```
C:\Users\me\Desktop>findstr /v "^[^;]*;[^;]*;;" old.csv > new.csv
C:\Users\me\Desktop>type new.csv
*ARTNR;*BESTAND;*HERSTARTNR;*WG;*WG2;*LWG;*LWG2
5803;0;"PDZ 4,3B  7""SOD323";AKT;;Aktive Bauelemente;
5810;0;61240090;MEC;;Elektromechanik;
5811;0;AT89C55WD-24PU;AKT;ATM;Aktive Bauelemente;Atmel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:30:46.583

这会奏效吗？

```
perl -ne 'print unless /^\d+;\d+;;/' file.csv 
```

# php - 使用 CURL 通过代理发送电子邮件

> ID：15247340
> 
> 赞同：2
> 
> 时间：2013-03-06T12:25:50.810
> 
> 标签：php, email, curl, smtp, fsockopen

我想用 PHP 编写一个脚本，通过代理连接到 smtp 服务器上的 TELNET。到目前为止，我所拥有的是这两种变体：

**1 FSOCKOPEN**（我无法代理此连接）

```
$connection = fsockopen("smtp.comcast.net",25,$errno,$errstr,10);
if(!$connection)
{
    echo "Connection error";
}
else
{
    $command  = "HELO smtp.comcast.net\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = "AUTH LOGIN\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = base64_encode("username")."\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = base64_encode("password")."\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command = "QUIT\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }
} 
```

但它正在输出我：

```
220 omta01.emeryville.ca.mail.comcast.net comcast ESMTP server ready
250 omta01.emeryville.ca.mail.comcast.net hello [xx.xx.xx.xx], pleased to meet you
334 VXNlcm5hbWU6 
```

女巫一切都好

和另一个变种

**2 卷曲类**

```
class ProxySmtp
{
    private $server;
    private $port;
    private $proxy;
    private $timeout;
    private $curl_connection;

    public function __construct($server,$port,$timeout = 10,$proxy = NULL)
    {
        echo "SERVER: $server:$port \n";
        echo "PROXY: $proxy \n";
        echo "TIMEOUT: $timeout \n";

        // Set the config
        $this->server = $server;
        $this->port = $port;
        $this->timeout = $timeout;
        $this->proxy = $proxy;

        // Start the curl
        $this->curl_connection = curl_init($this->server.":".$this->port); 
        var_dump($this->curl_connection);
    }

    // Setters
    public function setServer($newserver)
    {
        $this->server = $newserver;
    }

    public function setPort($newport)
    {
        $this->port = $newport;
    }

    public function setProxy($newproxy)
    {
        $this->proxy = $newproxy;
    }

    public function setTimeout($newtimeout)
    {
        $this->timeout = $newtimeout;
    }

    // Getters
    public function getServer()
    {
        echo $this->server;
        return $this->server;
    }

    public function curl_telnet($query) 
    {
        if (!function_exists('curl_init')) 
        { 
            user_error('"curl_init()" function does not exist.', E_USER_WARNING);
            return false; 
        }
        curl_setopt($this->curl_connection, CURLOPT_TIMEOUT,$this->timeout);
        curl_setopt($this->curl_connection, CURLOPT_CONNECTTIMEOUT,$this->timeout);
        curl_setopt($this->curl_connection, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($this->curl_connection, CURLOPT_CUSTOMREQUEST,$query);
        if($this->proxy != NULL)
        {
            echo "USING PROXY : ".$this->proxy."\n";
            curl_setopt($this->curl_connection,CURLOPT_PROXY,$this->proxy);
            curl_setopt($this->curl_connection,CURLOPT_PROXYTYPE,CURLPROXY_SOCKS5);
        }
        $output=curl_exec($this->curl_connection); 
        //curl_close($this->curl_connection);
        if($output == false)
        {
            echo "CONNECTION ERROR!\n";
        }
        return $output; 
    }

    public function __destruct()
    {
        $Destroy = curl_close($this->curl_connection);
        echo "Object destroyed (".$Destroy.")! \n";
    }
}

// Server,port,timeout,proxy(optional)
$ProxyAndPort = $Proxy.":".$ProxyPort;
$Smtp = new ProxySmtp($Server,$Port,$Timeout,$ProxyAndPort);
var_dump($Smtp->getServer());

var_dump($Smtp->curl_telnet("EHLO $User \r\n"));
var_dump($Smtp->curl_telnet("AUTH LOGIN \r\n"));
var_dump($Smtp->curl_telnet(base64_encode($user)." \r\n"));
var_dump($Smtp->curl_telnet(base64_encode($pass)." \r\n"));
var_dump($Smtp->curl_telnet("QUIT \r\n")); 
```

女巫给了我

```
string(389) "220 omta12.westchester.pa.mail.comcast.net comcast ESMTP server ready
250-omta12.westchester.pa.mail.comcast.net hello [85.204.11.249], pleased to meet you
250-HELP
250-AUTH LOGIN PLAIN
250-SIZE 36700160
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-STARTTLS
250 OK
500 5.5.1 command unrecognized
500 5.5.1 command unrecognized
450 4.7.0 too many invalid commands (closing session)

....

.... 
```

我有 6 个问题非常困扰我：

1 为什么它给了我一个简单的`500 5.5.1`命令？这是不可能的！`450 4.7.0``EHLO`

2 为什么第一个示例适用于`fsockopen`，但我认为带有“curl”女巫的那个更强大并且具有代理功能以及对象和类？

3 为什么这个 ProxySmtp 类可以在任何其他服务器上正常工作？

4 为什么我可以在 cmd.exe（RAW 样式）中复制上面的所有命令并且我可以发送电子邮件？

5 用“\r\n”对telnet说“执行线路”对吗？

6 是否可以“代理”第一个脚本？（使 fsockopen 到通过代理）

**提示** 据我所知，您不能在这样的一行中向 COMCAST 发送命令：

```
$command  = "HELO smtp.comcast.net\r\n";
$command  .= "AUTH LOGIN\r\n";
$command  .= base64_encode("username")."\r\n";
$command  .= base64_encode("password")."\r\n";
$command .= "QUIT\r\n";

fwrite($connection,$command);
while (!feof($connection)) 
{
    echo fgets($connection, 128)."\n";
} 
```

你必须这样做（LINE，SENT，LINE，SENT ...）：

```
$command  = "HELO smtp.comcast.net\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = "AUTH LOGIN\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = base64_encode("username")."\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command  = base64_encode("password")."\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    }

    $command = "QUIT\r\n";
    fwrite($connection,$command);
    while (!feof($connection)) 
    {
        echo fgets($connection, 128)."\n";
    } 
```

并且似乎 CURL 不想这样做。

我真的无法理解这是怎么回事，并且需要使用 PHP 类，因为我应该使用类来构建我的 WebMail 服务器管理员，这是第一部分，我还必须进入 IMAP 和 POP3 协议也是。

# visual-studio-2008 - Microsoft 增量链接器已停止工作

> ID：15247344
> 
> 赞同：3
> 
> 时间：2013-03-06T12:26:03.140
> 
> 标签：visual-studio-2008, visual-c++, error-handling

我正在尝试在 Visual Studio 中创建一个程序，有时会弹出错误“Microsoft Incremental Linker has stop working”并要求在线检查解决方案或关闭程序。

如果我单击关闭程序并重建项目，它会构建得很好。

视觉工作室有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T08:10:45.263

我在 VS10 中遇到了同样的问题（我在同一台机器上也有 VS8）。

安装VS8 SP1，重启电脑，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T06:02:20.660

对此问题有可用的热修复程序。你可以[在这里查看](https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=11399)

安装它为我解决了这个问题。

# iphone - 图像之间的 UICollectionView 空间

> ID：15247346
> 
> 赞同：0
> 
> 时间：2013-03-06T12:26:14.247
> 
> 标签：iphone, ios, uicollectionview

我有这个问题。我的 UICollectionView 带有图像的一个组件。我想添加所有图像，它们之间没有空格。isspector UICollectionView 组件值中的所有属性都是0。我不明白为什么sempr 在它们之间保持一个空格：（你能帮忙吗？谢谢。 ![在此处输入图像描述](../Images/b64f14f5d4a64209c77cab0ecdaac5fc.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T12:31:07.267

```
 self.minimumLineSpacing = 0;
  self.minimumInteritemSpacing=0; 
```

使用这些`init`方法`CollectionViewLayout`

# java - libgdx 中 BoundingBox 和 Sphere 之间的碰撞检测

> ID：15247347
> 
> 赞同：2
> 
> 时间：2013-03-06T12:26:18.733
> 
> 标签：java, android, collision-detection, libgdx, game-physics

在我的 libgdx 游戏中，我有 3D BoundingBoxes 和 Spheres 用于地图和玩家对象。我想计算它们是否相互碰撞，以便正确模拟这些物体的运动。我可以使用什么方法来计算这些对象是否碰撞/相交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:26:18.733

您可以使用以下方法：

```
public static boolean intersectsWith(BoundingBox boundingBox, Sphere sphere) {
    float dmin = 0;

    Vector3 center = sphere.center;
    Vector3 bmin = boundingBox.getMin();
    Vector3 bmax = boundingBox.getMax();

    if (center.x < bmin.x) {
        dmin += Math.pow(center.x - bmin.x, 2);
    } else if (center.x > bmax.x) {
        dmin += Math.pow(center.x - bmax.x, 2);
    }

    if (center.y < bmin.y) {
        dmin += Math.pow(center.y - bmin.y, 2);
    } else if (center.y > bmax.y) {
        dmin += Math.pow(center.y - bmax.y, 2);
    }

    if (center.z < bmin.z) {
        dmin += Math.pow(center.z - bmin.z, 2);
    } else if (center.z > bmax.z) {
        dmin += Math.pow(center.z - bmax.z, 2);
    }

    return dmin <= Math.pow(sphere.radius, 2);
} 
```

它仿照

> 一种简单的箱体相交测试方法，Jim Arvo 出自“Graphics Gems”，学术出版社，1990 年

可以在此处找到示例 C 代码：[http ://www.realtimerendering.com/resources/GraphicsGems/gems/BoxSphere.c](http://www.realtimerendering.com/resources/GraphicsGems/gems/BoxSphere.c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-04T07:32:47.010

上述答案仅适用于 AABB（Axis Aligned Bounding Box）。该方法虽然简洁而美观。所以我将它扩展为包括一般的边界框。Bellow 是提供与上述相同算法的最小代码。在下面的代码中，边界框由一个中心和 3 个方向向量 R、S 和 T 指定。每个向量代表框的主要边缘的方向和长度。

```
struct OBBox{
    vector3 center; 
    vector3 S; // representing side s.
    vector3 R;
    vector3 T;
     /* s, r, and t take -1 or +1 representing a corner along side S, R, and T correspondingly. If one of s, r, or t is 0 then middle of corresponding edge of the non-zero side is returned. If 2 of them are 0, then middle of the plane of the corresponding side is returned. */
    vector3 getCorner(int s, int r, int t)
    {
        return center + ( s*S + r*R + t*T)/2.0;
    }

}

public static boolean intersectsWith(OBBox bbox, Sphere sphere){
    float dmin = 0.;

    vector3 center = sphere.center;
    float centerS = center.S;
    float centerR = center.R;
    float centerT = center.T;

    vector3 bminS = bbox.getCorner(-1, 0, 0);
    vector3 bmaxS = bbox.getCorner(1, 0, 0);
    vector3 bminR = bbox.getCorner(0, -1, 0);
    vector3 bmaxR = bbox.getCorner(0, 1, 0);
    vector3 bminT = bbox.getCorner(0, 0, -1);
    vector3 bmaxT = bbox.getCorner(0, 0, 1);

    if(centerS < bminS.S) {
        dmin += (centerS-bminS).(centerS-minS); // . means 3d dot product.
    else if(centerS > bmaxS)
        dmin += (centerS-bmaxS).(centerS-bmaxS);
    }

    if(centerR < bminR.R) {
        dmin += (centerR-bminR).(centerR-minR);
    else if(centerR > bmaxR.R)
        dmin += (centerR-bmaxR).(centerR-bmaxR);
    }

    if(centerT < bminT.T) {
        dmin += (centerT-bminT).(centerT-minT);
    else if(centerT > bmaxT)
        dmin += (centerT-bmaxT).(centerT-bmaxT);
    }

    return dmin <= (sphere.radius).(sphere.radius);
} 
```

# yui - yui 如何使在标签图像中不一定会指定它的大小？

> ID：15247355
> 
> 赞同：0
> 
> 时间：2013-03-06T12:26:54.777
> 
> 标签：yui, crop

再会。

我使用脚本[Imagecropper](http://developer.yahoo.com/yui/imagecropper/)

**脚本：**

```
<img src="http://test.com/img/1362244329.jpg" id="yui_img" height="768" width="1024">

<script>
(function() {
    var Dom = YAHOO.util.Dom,
        Event = YAHOO.util.Event;

    var crop = new YAHOO.widget.ImageCropper('yui_img');
})();
</script> 
```

***结果：*** ![1](../Images/7cdf9b4bf48caf6cafdec54098661e3c.png)

***但是如果我不指定图像大小，那么我会得到下一个（见图）：***

```
<img src="http://test.com/img/1362244329.jpg" id="yui_img"> 
```

***结果：*** ![2](../Images/8e9c7522deb039e497b99014713ac024.png)

***如果我指定了错误的图片大小，窗口将增加图像的部分：***

```
<img src="http://test.com/img/1362244329.jpg" id="yui_img" height="333" width="500"> 
```

***结果：***

![3](../Images/ed866f449ca1273bc9fffc4b954f1a60.png)

**如何在标签图像中制作不一定会指定其大小？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:24:03.867

首先，我想向您指出 YUI 3，因为不再支持 YUI 2。您不应该使用 YUI 2 编写新代码。我为 YUI 3 编写的 ImageCropper 组件与 YUI Gallery 中的 YUI 2 版本一样工作：http: [//yuilibrary.com/gallery/show/imagecropper](http://yuilibrary.com/gallery/show/imagecropper)。由于它复制了 YUI 2 ImageCropper 所做的，它与旧版本共享这些问题。

## 未指定图片大小时怎么办

你得到一个小的 ImageCropper 的原因是你在获取图像之前创建小部件，所以浏览器还不知道它的大小。您可以做的是等待图像的`onload`事件。您可以监听该事件并在它触发后创建 ImageCropper：

```
(function() {
  var Dom = YAHOO.util.Dom,
      Event = YAHOO.util.Event;

  var yui_img = Dom.get('yui_img');

  Event.addListener(yui_img, 'load', function () {
    var crop = new YAHOO.widget.ImageCropper(yui_img);
  });

})(); 
```

## 为什么 ImageCropper 不适用于尺寸错误的图像

当图像尺寸不合适时，YUI 2 ImageCropper 和我的 YUI 3 版本都不能处理图像。原因是两者都使用`background: url()`CSS 样式来显示裁剪区域内的图像（小部件的非变暗部分）。CSS 背景不允许您使用调整大小/缩放的图像。

我计划在某个时候为 YUI 3 版本使用另一种策略来解决这个问题。但是，您需要记住，ImageCropper 组件的设计目的是让您将裁剪坐标发送到服务器，以便它实际裁剪图像。这意味着，如果您为图像设置了错误的尺寸，则图像裁剪器使用其`getCropCoords`方法返回的坐标将不是与全尺寸图像匹配的坐标。相反，您还必须向服务器发送您一直在使用的图像大小，并进行额外的数学运算以正确裁剪图像。

总之，您不应该使用尺寸错误的图像。您可以通过两种方式修复图像的大小：

1.  使用图像的 HTML5`naturalWidth`和`naturalHeight`属性。即使调整了大小，它们也会返回图像的实际大小。不幸的是，并非所有浏览器都支持这些属性。
2.  使用 JS 创建一个新图像，将其设置`src`为与您正在使用的图像相同，监听其`load`事件并获取该图像的大小。

像这样的东西：

```
 (function () {
  var Dom = YAHOO.util.Dom;

  var yui_img = Dom.get('yui_img'),
      new_img = new Image();

  new_img.onload = function () {
    yui_img.width = new_img.width;
    yui_img.height = new_img.height;

    // create the ImageCropper
  };
  new_img.src = yui_img.src;
}()); 
```

## 一个YUI3版本

您可以使用 YUI3 轻松完成所有这些操作：

```
YUI().use('gallery-imagecropper', function (Y) {

  var img = Y.one('#yui_img');

  img.on('load', function () {
    var cropper = new Y.ImageCroper({
      srcNode: img,
      width: img.get('width'),
      height: img.get('height')
    });
    cropper.render();
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:10:36.220

代码中的错字。应该

```
var cropper = new Y.ImageCropper({ 
```

你错过了一个字母“p”。

# javascript - 如何隐藏浏览器窗口状态栏

> ID：15247362
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:27:07.217
> 
> 标签：javascript, jquery

我想制作一个带有全屏视频的弹出窗口，而浏览器的状态栏不可见。

我试图让喜欢的消息`Transferring data from www.google.com`不 `Waiting for www.google.com`被看到，因为它们会分散视频的注意力。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:17:00.213

我`javascript`在一些网站上看到了以下片段，但它似乎很久以前就被弃用了。

```
window.status = ""; 
```

这是 w3schools 告诉我的（来源：[W3Schools](http://www.w3schools.com/jsref/prop_win_status.asp "W3学校")）：

> **注意：**状态属性在 IE、Firefox、Chrome 或 Safari 的默认配置中不起作用。要允许脚本更改状态文本，用户必须在 about:config 屏幕中将 dom.disable_window_status_change 首选项设置为 false。（或在 Firefox 中：“工具 - 选项 - 内容 - 启用 JavaScript / 高级 - 允许脚本更改状态栏文本”）。

所以这是一个用户配置。老实说，我不喜欢网页乱搞我的浏览器的想法，这可能会导致一些严重的安全问题。

为什么不使用 javascript 弹出窗口，例如[Modalbox](http://okonet.ru/projects/modalbox/index.html "模态框")或使用[jQuery-UI](http://jqueryui.com/)？

# ruby - 尝试运行 Hash.to_xml，但 Ruby 抱怨？

> ID：15247364
> 
> 赞同：0
> 
> 时间：2013-03-06T12:27:14.747
> 
> 标签：ruby

我只是想在我的 RVM Ruby 1.9.2 安装上运行一个非常简单的片段：

```
require 'rubygems'
require 'active_support'

obj = {"foo" => "bar"}
xml = obj.to_xml 
```

Ruby 抱怨如下：

```
NoMethodError: undefined method `to_xml' for {"foo"=>"bar"}:Hash
from (irb):2
from /Users/.../.rvm/rubies/ruby-1.9.2-p320/bin/irb:16:in `<main>' 
```

为什么会这样？to_xml 不是 Hash 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:41:20.553

要求这个：

```
require "active_support/all" 
```

# reporting-services - 报表生成器 3 中的多项选择

> ID：15247366
> 
> 赞同：0
> 
> 时间：2013-03-06T12:27:20.000
> 
> 标签：reporting-services, ssrs-2008, reportbuilder3.0

我创建了一个为用户提供多个选项的参数：

```
Total Amount = Grand Total
Region 1 = Total Amount for that Region
Region 2 = Total Amount for that Region
Region 3 = Total Amount for that Region
Region 4 = Total Amount for that Region 
```

区域 1 到 4 效果很好，但是当我选择总金额时，我得到的金额不正确。

有人可以告诉我我做错了什么吗？

主要数据集

```
 SELECT       OccupancyDetail.CalendarYear, OccupancyDetail.CalendarMonth, SUM(OccupancyDetail.No_of_Nights) AS No_of_Nights, 
                         SUM(OccupancyDetail.Capacity) AS Capacity,Site.BDM,Site.Region
FROM            OccupancyDetail INNER JOIN
                         Site ON OccupancyDetail.Site_Skey = Site.Site_Skey

                         WHERE  (OccupancyDetail.ReferenceDate = convert(Date,getdate()))

                         AND
                         CASE WHEN @Time = 'YEAR' THEN CAST(CalendarYear as varchar(4)) else
                         CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) end in (@Dates)
GROUP BY OccupancyDetail.ReferenceDate, OccupancyDetail.CalendarYear, OccupancyDetail.CalendarMonth,Site.BDM, Site.Region    
Time Dataset

select DateChoice FROM
(select distinct CalendarYear, 1 as MonthNumber,CAST(CalendarYear as varchar(4)) as DateChoice from Time
where @Time = 'YEAR'

union all

select Distinct CalendarYear, MonthNumber,CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) as DateChoice from Time where @Time = 'MONTH') as QRYDATA
ORDER BY CalendarYear,MonthNumber 
```

BDM 数据集

```
SELECT DISTINCT BDM
FROM Site 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:28:10.537

Reporting Services 参数在定义多个值参数时提供内置`(Select All)`值。

![选择所有参数](../Images/e5abbdbb74b9c9c588f88662477b153e.png)

对于您的示例：

1.  `Total Amount = Grand Total`从参数的可用值列表中删除该选项。
2.  修改您的数据集查询以接受 region 参数的多个值。例如：`... WHERE REGION IN (@Region)`
3.  检查`Allow multiple values`参数属性中的选项 ![多值参数](../Images/523d1078df290cf7b1403b0b524e2387.png)
4.  `(Select All)`替换`Total Amount = Grand Total`原始设计中的。

# wso2esb - B2B 示例的 WSO2 ESB 性能调优

> ID：15247371
> 
> 赞同：1
> 
> 时间：2013-03-06T12:27:38.120
> 
> 标签：wso2esb

我正在通过发送 FPML 消息来测试 B2B 示例的性能。我尝试过使用不同数量的节点（2,3,4）和不同的消息数量。我最多可以发送 10,000 条消息。但是当我尝试使用不同节点数的 50,000 条消息时，我收到以下错误。

```
 ERROR - JMSMessageSender Error closing JMS Connection after send
javax.jms.JMSException: org.apache.activemq.transport.RequestTimedOutIOException
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)
        at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1431)
        at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:675)
        at org.apache.axis2.transport.jms.JMSMessageSender.close(JMSMessageSender.java:250)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:156)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.activemq.transport.RequestTimedOutIOException
        at org.apache.activemq.transport.FutureResponse.getResult(FutureResponse.java:54)
        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:92)
        at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1418)
        ... 8 more
[2013-03-05 22:34:14,351] ERROR - JMSSender Unable to create a JMSMessageSender for : null
javax.jms.JMSException: java.io.EOFException
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1377)
        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1481)
        at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:323)
        at org.apache.activemq.ActiveMQConnection.createQueueSession(ActiveMQConnection.java:1257)
        at org.apache.axis2.transport.jms.JMSOutTransportInfo.createJMSSender(JMSOutTransportInfo.java:378)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:124)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.EOFException
        at java.io.DataInputStream.readInt(DataInputStream.java:375)
        at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:275)
        at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:229)
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:221)
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:204)
        ... 1 more
[2013-03-05 22:34:14,357]  INFO - AxisEngine [MessageContext: logID=4daccf302df9e230a0e9d2d3c35edeb7306de0841cfe1b3f] Unable to create a JMSMessageSender for : null

java.lang.OutOfMemoryError: GC overhead limit exceeded
Dumping heap to /home/vithya/wso2/wso2esb-4.6.0/repository/logs/heap-dump.hprof ...
Unable to create /home/vithya/wso2/wso2esb-4.6.0/repository/logs/heap-dump.hprof: File exists
[2013-03-05 22:35:02,899] ERROR - JMSSender Unable to create a JMSMessageSender for : null
javax.jms.JMSException: Wire format negotiation timeout: peer did not send his wire format.
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1395)
        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1481)
        at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:323)
        at org.apache.activemq.ActiveMQConnection.createQueueSession(ActiveMQConnection.java:1257)
        at org.apache.axis2.transport.jms.JMSOutTransportInfo.createJMSSender(JMSOutTransportInfo.java:378)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:124)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Wire format negotiation timeout: peer did not send his wire format.
        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:98)
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)
        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1366)
        ... 10 more
Exception in thread "ActiveMQ Transport: tcp:///10.200.208.124:61616@33434" java.lang.OutOfMemoryError: GC overhead limit exceeded
        at java.util.Arrays.copyOf(Arrays.java:2882)
        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
        at java.lang.StringBuilder.append(StringBuilder.java:119)
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:200)
        at java.lang.Thread.run(Thread.java:662)
[2013-03-05 22:35:02,901]  INFO - AxisEngine [MessageContext: logID=4daccf302df9e230aab5c2d3c35edeb7f06de0841cfe1b3f] Unable to create a JMSMessageSender for : null
[2013-03-05 22:35:02,903] ERROR - JMSSender Unable to create a JMSMessageSender for : null
javax.jms.JMSException: java.io.EOFException
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1377)
        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1481)
        at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:323)
        at org.apache.activemq.ActiveMQConnection.createQueueSession(ActiveMQConnection.java:1257)
        at org.apache.axis2.transport.jms.JMSOutTransportInfo.createJMSSender(JMSOutTransportInfo.java:378)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:124)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.EOFException
        at java.io.DataInputStream.readInt(DataInputStream.java:375)
        at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:275)
        at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:229)
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:221)
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:204)
        ... 1 more
[2013-03-05 22:35:02,906] ERROR - JMSSender Unable to create a JMSMessageSender for : null
javax.jms.JMSException: Cannot send, channel has already failed: tcp://10.200.208.124:61616
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1395)
        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1481)
        at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:323)
        at org.apache.activemq.ActiveMQConnection.createQueueSession(ActiveMQConnection.java:1257)
        at org.apache.axis2.transport.jms.JMSOutTransportInfo.createJMSSender(JMSOutTransportInfo.java:378)
        at org.apache.axis2.transport.jms.JMSSender.sendMessage(JMSSender.java:124)
        at org.apache.axis2.transport.base.AbstractTransportSender.invoke(AbstractTransportSender.java:112)
        at org.apache.axis2.engine.AxisEngine$TransportNonBlockingInvocationWorker.run(AxisEngine.java:626)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://10.200.208.124:61616
        at org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:282)
        at org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:271)
        at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:85)
        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:104)
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)
        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1366)
        ... 10 more
[2013-03-05 22:35:02,906]  INFO - AxisEngine [MessageContext: logID=4daccf302df9e2305ab5c2d3c35edeb7906de0841cfe1b3f] Unable to create a JMSMessageSender for : null
[2013-03-05 22:35:02,909]  INFO - AxisEngine [MessageContext: logID=4daccf302df9e2302ab5c2d3c35edeb7106de0841cfe1b3f] Unable to create a JMSMessageSender for : null 
```

请帮我解决这个问题......

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:42:54.937

请参考文档 [1] 并调整您的 ESB。如果您仍然收到此错误，请告诉我们。

1.  [http://docs.wso2.org/wiki/display/ESB460/Performance+Tuning](http://docs.wso2.org/wiki/display/ESB460/Performance+Tuning)

# php - Zend Framework 2 表单注释在没有额外空格的情况下被忽略

> ID：15247372
> 
> 赞同：5
> 
> 时间：2013-03-06T12:27:40.500
> 
> 标签：php, forms, annotations, doctrine, zend-framework2

我花了几个小时用这个把头撞在墙上。无论如何，我的表单字段的标签都没有出现。

最后发现，如果没有光标所在的额外空间（见图），所有注释都会被忽略。我正在使用 ZF 2.1.1 和 Doctrine Common 2.2.3。

难道我做错了什么？或者这是 ZF 或 Doctrine 解析器中的错误？

![日食截图](../Images/b55e50b630ae6f169194a24f834afa32.png)

作品：

```
 class LoginForm
   {
   /** @Annotation\Type("text")
    * @Annotation\Options({"label":"Store ID:"})
    * @Annotation\Required(true)
    * @Annotation\Filter({"name":"StringTrim"})
    * @Annotation\Validator({"name":"StringLength","options":{"min":2,"max":64}})
    */
   public $sStoreId;
   } 
```

失败，除非 /** 后有空格：

```
 class LoginForm
   {
   /**
    * @Annotation\Type("text")
    * @Annotation\Options({"label":"Store ID:"})
    * @Annotation\Required(true)
    * @Annotation\Filter({"name":"StringTrim"})
    * @Annotation\Validator({"name":"StringLength","options":{"min":2,"max":64}})
    */
   public $sStoreId;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:05:35.297

似乎没有解决方案，因此请使用原始问题中提供的一种解决方法：

*   在 /** 之后添加一个空格（容易忘记）
*   将第一个注释或任何文本注释与 /** 放在同一行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:29:01.010

因为注释使用的是 php-doc 标准，所以第一行总是用于注释/描述。必须给予。如果您没有提供评论/描述，请将该行留空。

# javascript - 如何获得原始实体的属性？

> ID：15247373
> 
> 赞同：10
> 
> 时间：2013-03-06T12:27:40.600
> 
> 标签：javascript, jquery, html-entities, raw-data

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:14:56.887

我认为这是不可能的。据我了解，浏览器会自动解析`&mdash;`，因此您必须将其在服务器端编码为`&amp;mdash;`.

[jsFiddle](http://jsfiddle.net/sTu2q/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:20:41.853

您可以通过 jquery 设置数据属性

```
$("span").data("foo", "&mdash;");
console.log($("span").data("foo")); 
```

这`&mdash;`在控制台中产生

# android - 实现 Serializable 的类中的重写方法

> ID：15247378
> 
> 赞同：0
> 
> 时间：2013-03-06T12:27:55.020
> 
> 标签：android, bluetooth, bytearray, serializable, notserializableexception

我正在尝试通过蓝牙在 Android 上创建一个分布式处理系统，所以我创建了一个实现 Serializable 的类，创建了一个序列化和反序列化该对象的方法，以便我可以将它作为 ByteArray 发送。问题是我需要每个对象都有不同的代码在其他设备上运行。我想过重写一个方法，然后在另一台设备上运行该方法，但是当我这样做时，我得到了 NotSerializableException。有没有办法解决这个问题？或者如果没有，是否有另一种方法可以发送不同的代码以在其他设备上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:06:20.400

默认的序列化机制旨在提供一种方法来传输对象的状态而不是派生对象的类的实际逻辑。因此，方法中包含的代码（至少在默认情况下）不是可序列化的。

解决方案

您可以采用多种方法和/或策略来实现或至少接近您所需的结果；底线是服务器将需要您希望执行的类文件的副本：

**动态方法：**

您可以将“类”或完整的 jar 作为标准文件动态发送到服务器，然后使用序列化发送您希望从客户端调用的方法的详细信息（即名称、签名等）。

**静态方法：**

作为构建过程的一部分，将应用程序 jar 的副本放在服务器的类路径上。

当然你也可以实现[Externalizable 接口](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Externalizable.html)来定义你自己的序列化机制和语义。如果您需要有关此方法或我概述的任何其他方法的更多信息，请告诉我。

# c++ - libtcod root 搞砸了

> ID：15247384
> 
> 赞同：1
> 
> 时间：2013-03-06T12:28:07.813
> 
> 标签：c++, libtcod

每次我运行这个窗口立即关闭，并返回 3

```
#include "libtcod.hpp"

int main() {
    TCODConsole::initRoot(80,50, "j", false);
    while ( !TCODConsole::isWindowClosed() ) {
        TCODSystem::checkForEvent(TCOD_EVENT_KEY_PRESS,NULL,NULL);
        TCODConsole::root->clear();
        TCODConsole::root->putChar(40,25,'@');
        TCODConsole::flush();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T23:49:55.347

我看不出代码本身有什么问题。您需要检查您的链接器是否设置正确。

此外，请参见此处：

[http://codeumbra.eu/complete-roguelike-tutorial-using-c-and-libtcod-part-1-setting-up](http://codeumbra.eu/complete-roguelike-tutorial-using-c-and-libtcod-part-1-setting-up)

有关解释和简短教程。

# java - JPA 2.0 和 MySQL 不尊重区分大小写的表名

> ID：15247386
> 
> 赞同：0
> 
> 时间：2013-03-06T12:28:14.723
> 
> 标签：java, mysql, jpa, glassfish, eclipselink

我的耳朵项目有一个奇怪的问题：我在实体类上放置了正确的注释：

```
@Entity
@Table(name = "PRODUCTS") 
```

但是当我在 glassfish 3.1.2.2 上部署我的应用程序时，我发现 JPA 已经创建了带有小写字符的表

我正在使用 EclipseLink 2.4.1

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:58:42.717

我从 Brian Vosburgh 的评论中得到了解决方案：在 Windows 版本的 MySQL 中，表的名称设置为小写。在linux上，默认情况下，这个配置是禁用的，JPA设置的表名不加修改地应用到MySQL上。

要使其像 linux 一样在 windows 上运行，请添加以下行：

```
lower_case_table_names=0 
```

感谢您的帮助，特别是[Brian Vosburgh](https://stackoverflow.com/users/1566345/brian-vosburgh.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T16:01:06.520

我找到了一个让一切变得不同的房产。在 EclipseLink 向导（从表生成实体）的第三页（自定义默认值）中，我选中了“始终生成可选的 JPA 注释和 DDL 参数”选项。此选项在类中写入以下注释`Entity`：

```
@Table(name="TableName") 
```

将使用正确的表名字母大小写。

# android - Android PreferenceActivity

> ID：15247387
> 
> 赞同：1
> 
> 时间：2013-03-06T12:28:16.797
> 
> 标签：android

我有这样的偏好选项：

```
public class Opciones extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.opciones);

        SharedPreferences sp = getPreferenceScreen().getSharedPreferences();

        EditTextPreference editTextPref = (EditTextPreference) findPreference( "opcCodigo" );
        editTextPref.setSummary(sp.getString("opcCodigo", ""));

        EditTextPreference editTextPref2 = (EditTextPreference) findPreference( "opcUrl" );
        editTextPref2.setSummary(sp.getString("opcUrl", ""));
    }

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        Preference pref = findPreference(key);
        if (pref instanceof EditTextPreference) {
            EditTextPreference etp = (EditTextPreference) pref;
            pref.setSummary(etp.getText());
        }
    }
} 
```

事实是，当我更改数据时，字段没有刷新，我必须关闭活动并再次启动它才能看到它们。

我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:32:16.953

实现 OnPreferenceChangeListener 并覆盖以下方法。

```
 @Override
 public boolean onPreferenceChange(Preference preference, Object newValue) {
      //newValue is the edited data
      if(editTextPref == preference) editTextPref.setSummary(newValue);
      else editTextPref2.setSummary(newValue);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:38:03.430

试试这个：
1\. 添加**OnSharedPreferenceChangeListner**

```
public class Opciones extends PreferenceActivity implements
    OnSharedPreferenceChangeListener 
```

2\. 并**重写**方法**onSharedPreferenceChanged**

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,String key){
   // ...
} 
```

# android - 字节数组到位图图像android

> ID：15247388
> 
> 赞同：1
> 
> 时间：2013-03-06T12:28:17.897
> 
> 标签：android, bytearray, android-imageview, bitmapimage

我正在尝试将图像从字节设置为位图并将其设置为 imageView，但是每当我将其设置为 imageView 时，我都会收到一个空指针异常，对不起，对于一个菜鸟问题，我只是新的字节和位图

这是代码：

```
iv = (ImageView)findViewById(R.id.imageView1);
    fileObject.getDataInBackground(new GetDataCallback() {
                    public void done(byte[] data, ParseException e) {
                      if (e == null) {
                        // use data for something
                        Bitmap bmp=BitmapFactory.decodeByteArray(data,0,data.length);
                        Log.d("test", " "+bmp.toString());
                        iv.setImageBitmap(bmp); <----- here getting error
                      } else {
                        Log.d("test", "There was a problem downloading the data.");
                      }
                    }
                  }); 
```

iv 在类中本地声明。提前感谢您的帮助。

这是我要求的logcat：

```
03-06 20:15:46.417: E/AndroidRuntime(388): FATAL EXCEPTION: main
03-06 20:15:46.417: E/AndroidRuntime(388): java.lang.NullPointerException
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.shop.browser.ItemInfoActivity$1$1.done(ItemInfoActivity.java:115)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.parse.ParseFile$2.done(ParseFile.java:396)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.parse.GetDataCallback.internalDone(GetDataCallback.java:21)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.parse.GetDataCallback.internalDone(GetDataCallback.java:1)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.parse.BackgroundTask.onPostExecute(BackgroundTask.java:50)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.parse.BackgroundTask.onPostExecute(BackgroundTask.java:1)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.os.AsyncTask.finish(AsyncTask.java:417)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.os.Looper.loop(Looper.java:123)
03-06 20:15:46.417: E/AndroidRuntime(388):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-06 20:15:46.417: E/AndroidRuntime(388):  at java.lang.reflect.Method.invokeNative(Native Method)
03-06 20:15:46.417: E/AndroidRuntime(388):  at java.lang.reflect.Method.invoke(Method.java:521)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-06 20:15:46.417: E/AndroidRuntime(388):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-06 20:15:46.417: E/AndroidRuntime(388):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:52:41.967

```
Bitmap bmp = intent.getExtras().get("data");
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

> 1.  在使用上面的代码之前检查你的 byteArray 大小，如果他们已经像这样解码图像。
> 2.  还有一件事还记得UI不可能在线程背景中改变

```
 Bitmap bitmap = BitmapFactory.decodeByteArray(byteArray , 0, byteArray .length);
 iv.setImageBitmap(bitmap ); 
```

# iphone - 为什么以下代码行没有向数组添加任何内容，而数组只产生 null

> ID：15247390
> 
> 赞同：1
> 
> 时间：2013-03-06T12:28:21.203
> 
> 标签：iphone, ios, objective-c, nsmutablearray, nsarray

为什么以下代码行没有向.`array`和 . 中添加任何`array`内容`null`

```
 NSString *LIstringURL = [[NSString alloc] initWithFormat:@"http://farm%@.staticflickr.com/%@/%@_%@.jpg",flickrfarmID,flickrServer, flickrID,flickrSecret];

    NSString *SIstringURL = [[NSString alloc] initWithFormat:@"http://farm%@.staticflickr.com/%@/%@_%@_t.jpg",flickrfarmID,flickrServer, flickrID,flickrSecret];

    // NSURL *url = [[NSURL alloc] initWithString:stringURL];
    NSArray *bothImagesArray = [NSArray arrayWithObjects:LIstringURL,SIstringURL, nil];
    [self.urlArray addObject:bothImagesArray]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:32:17.587

检查可变数组是否启动

```
self.urlArray = [[NSMutableArray alloc]init]; 
```

# java - Java 重载概念

> ID：15247394
> 
> 赞同：6
> 
> 时间：2013-03-06T12:28:45.273
> 
> 标签：java, overloading

当我运行此代码时，它会打印`String`. 我的问题是为什么没有编译时错误？Object 和 String 的默认值为 null。那为什么编译器不说`Reference to method1 is ambiguous`。

```
public class Test11
{

   public static void method1(Object obj) {
      System.out.println("Object");
   }

   public static void method1(String str) {
      System.out.println("String");
   }

   public static void main(String[] arr ) {
      method1(null);    
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:31:29.550

从[这个答案](https://stackoverflow.com/a/10901357/344643)：

> 在那里，您会注意到这是一个编译时任务。JLS 在第 15.12.2 小节中说：
> 
> > 此步骤使用方法的名称和参数表达式的类型来定位既可访问又适用的方法。这样的方法可能不止一种，在这种情况下**，选择最具体的一种**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T12:40:16.560

编译器将查看可能与您传递的参数匹配的方法的所有可能重载。如果其中一个比*所有*其他的更具体，那么它将被选择，如果没有一个*最具体*的重载，它只会被认为是模棱两可的。

在您的示例中，有两个可能的重载，`method1(Object)`并且`method1(String)`. 由于`String`比`Object`没有歧义更具体，因此`String`将选择该选项。如果存在第三个重载，例如`method1(Integer)`then 就不再有一个最具体的 call 选择`method1(null)`，编译器会产生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:31:20.177

好在一句话

> 在重载方法的情况下，编译器选择具有最具体类型的方法，因为 String 是最具体的类型，Object 编译器将调用以字符串为参数的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:44:13.397

```
public class Test11
{
public static void method1(String str)//here str is the object of string
{

System.out.println("String");
}

public static void method1(Object obj)//here this is a common object not specified
{
System.out.println("Object");
}

public static void main(String[] arr )
{
    Test11 t=new Test11();
    String null1=new String();
    method1(null1);  
    method1(t);  
}

}

output is :
String
Object 
```

//null1-是一个字符串对象，如果你传递这个它会调用method1（String str），因为你传递了字符串对象 //t-是一个普通对象，如果你传递这个它会调用method1（Object obj），因为你传递了类objct 所以它将对象作为参数传递

# javascript - 如何将正文中的数字替换为波斯数字？

> ID：15247405
> 
> 赞同：27
> 
> 时间：2013-03-06T12:29:20.990
> 
> 标签：javascript, html, jquery, localization, formatting

我想将 html 内容中的每个数字都转换为波斯数字，而不会对页面元素产生其他影响。

例如：

```
<div style='color: #c2c2c2'>
  text number 1
  <span>text number 2</span>
  <div>
    text number 3
    <b>text number 4</b>
    <a href='#page2'>text number 5</a>
  </div>
</div> 
```

转换为：

```
<div style='color: #c2c2c2'>
  text number ۱
  <span>text number ۲</span>
  <div>
    text number ۳
    <b>text number ۴</b>
    <a href='#page2'>text number ۵</a>
  </div>
</div> 
```

```
let persian = array('۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹');
let english = array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-06T13:26:32.080

您可以使用此方法：（[http://jsfiddle.net/A4NfG/1/](http://jsfiddle.net/A4NfG/1/)）

```
persian={0:'۰',1:'۱',2:'۲',3:'۳',4:'۴',5:'۵',6:'۶',7:'۷',8:'۸',9:'۹'};
function traverse(el){
    if(el.nodeType==3){
        var list=el.data.match(/[0-9]/g);
        if(list!=null && list.length!=0){
            for(var i=0;i<list.length;i++)
                el.data=el.data.replace(list[i],persian[list[i]]);
        }
    }
    for(var i=0;i<el.childNodes.length;i++){
        traverse(el.childNodes[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T13:05:59.940

有这个[findAndReplaceDOMText.js](https://github.com/padolsey/findAndReplaceDOMText/blob/master/src/findAndReplaceDOMText.js) 可以帮助你。它遍历文档中的所有节点（而不是所有元素）并在`nodeType`参数等于 3 时替换文本，即[TEXT_NODE](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)。

此示例将替换整个页面中的数字：

```
function walkNode(node) { 
    if (node.nodeType == 3) {
        // Do your replacement here
        node.data = node.data.replace(/\d/g,convert);
    }

    // Also replace text in child nodes
    for (var i = 0; i < node.childNodes.length; i++) {
        walkNode(node.childNodes[i]); 
    }
}

walkNode(document.getElementsByTagName('body')[0]);

function convert(a){
    return ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'][a];
} 
```

请参阅此处的[JavaScript`String.replace`文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-10T13:42:54.623

如果你想通过 a 选择一些元素`selector`，你可以使用这个简单的代码（[JsFiddle](http://jsfiddle.net/navidlog/0x72k0zz/1/)）：

```
persian={0:'۰',1:'۱',2:'۲',3:'۳',4:'۴',5:'۵',6:'۶',7:'۷',8:'۸',9:'۹'};
$(".persian-digit").each(function(){
    for(var i=0;i<=9;i++) {
        var re = new RegExp(i,"g");
        $(this).html($(this).html().replace(re,persian[i]));
    }
}); 
```

然后使用它：

```
<span class="persian-digit">This span contains persian digits (0123456789),</span>
<span>and this one contains english digits (0123456789).</span> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-14T22:15:05.490

我写了这个简短的代码。

```
// ES6
const regex = /[۰-۹]/g
let str = '۰۱۲۳۵۴۸۹۰۷۸۹۰۱۲';
let result = str.replace(regex, function (w) {
    return String.fromCharCode(w.charCodeAt(0) - 1728)
  }
)

console.log(result);
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-07T11:34:10.427

如果您想在特定元素或选择器上使用它，这可能会有所帮助：

```
var persian = Array('۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹');
   function replaceDigits(selector) {

      for(i=0;i<10;i++){

         var regex=eval("/"+i+"/g");

         $(selector).html($(selector).html().replace(regex,persian[i]));

      }

   }

replaceDigits(".selected"); 
```

为我工作！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-27T13:02:01.613

```
<script>

    function en2fa(num){
        let arr = [];
        persian = {0:'۰',1:'۱',2:'۲',3:'۳',4:'۴',5:'۵',6:'۶',7:'۷',8:'۸',9:'۹'};
        num.split('').map((number,index)=>{
            arr[index] = (persian[number]);
        });
        return arr.join('');
    }

    console.log(en2fa("86598231452"));

</script> 
```

在 codepen 中测试此代码

[https://codepen.io/bashirpour/pen/JvgeYy](https://codepen.io/bashirpour/pen/JvgeYy)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-23T21:36:25.403

您可以使用它[`Number.toLocaleString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString)来转换和格式化单个数字。

```
let myNumberStr = "123456.7890";
let myNumber = Number(myNumberStr); // Convert from string to number
let persian = myNumber.toLocaleString("fa"); // OR "fa-IR" for IRAN 
```

### 更高级和完整的答案（转换页面中的所有数字）

```
localizeNumbers(document.getElementsByTagName('body')[0]);

function localizeNumbers(node) { 
    if (node.nodeType == Node.TEXT_NODE) {
        // Use this if target numbers may contain comma as thousands separators
        node.data = node.data.replace(/([,\d]*\.?\d+)/g, localize);
        // Use this if you do not want to treat comma as thousands separator
        // node.data = node.data.replace(/(\d*\.?\d+)/g, localize);
    }
    // Also, replace numbers in child nodes
    node.childNodes.forEach(localizeNumbers);
}

function localize(numberString) {
  // Convert from string to number
  // Use this if target numbers may contain comma as thousands separators
  let number = Number(numberString.replace(/[^\d.]/g, ""));
  // Use this if you do not want to treat comma as thousands separator
  // let number = Number(numberString);

  // Could also have used "fa-IR" for IRAN
  let persian = number.toLocaleString("fa", { maximumFractionDigits: 10 });
  // Could also have used "en-US" for USA
  let english = number.toLocaleString("en", { maximumFractionDigits: 10 });
  // Could also have used "ar" (which seems to use western digits). "EG" is for Egypt
  let arabic = number.toLocaleString("ar-EG", { maximumFractionDigits: 10 });

  console.log(`Persian: ${persian}`);
  console.log(`English: ${english}`);
  console.log(`Arabic: ${arabic}\n`);

  return persian;
} 
```

```
localizeNumbers(document.getElementsByTagName('body')[0]);

function localizeNumbers(node) { 
  if (node.nodeType == Node.TEXT_NODE) {
    node.data = node.data.replace(/([,\d]*\.?\d+)/g, localize);
  }
  node.childNodes.forEach(localizeNumbers);
}

function localize(numberString) {
  let number = Number(numberString.replace(/[^\d.]/g, ""));
  let persian = number.toLocaleString("fa", { maximumFractionDigits: 10 });
  let english = number.toLocaleString("en", { maximumFractionDigits: 10 });
  let arabic = number.toLocaleString("ar-EG", { maximumFractionDigits: 10 });

  console.log(`Persian: ${persian}`);
  console.log(`English: ${english}`);
  console.log(`Arabic: ${arabic}\n`);

  return persian;
}
```

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Test</title>
<script src="script.js" defer></script>
</head>
<body>

  <div style='color: #c2c2c2'>
    text number 1
    <span>text number 2</span>
    <div>
      text number 3
      <b>text number 4</b>
      <a href='#page2'>text number 5</a>
    </div>
  </div>

  1234
  <div>
    1234
    <p>1234</p>
  </div>
  <p>1234</p>
  <p>1,234</p>
  <p>1234.5678</p>
  <p>1,234.5678</p>
  <p>0.1234</p>
  <p>.1234</p>
  <p>abc1234</p>
  <p>abc1,234</p>
  <p>abc1234def</p>
  <p>abc1,234def</p>
  <p>abc 1234def</p>
  <p>abc 1,234def</p>
  <p>abc 1234 def</p>
  <p>abc 1,234 def</p>
  <p>abc1234.567</p>
  <p>abc1,234.567</p>
  <p>abc1234.567def</p>
  <p>abc1,234.567def</p>
  <p>abc 1234.567def</p>
  <p>abc 1,234.567def</p>
  <p>abc 1234.567 def</p>
  <p>abc 1,234.567 def</p>
</body>
</html>
```

### 笔记

1.  该解决方案会将数字视为[*Number*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) s 而不是*String* s。如果您未`maximumFractionDigits`在 的[选项对象](https://stackoverflow.com/q/3089561/8583692)中指定`toLocaleString`，则格式化数字可能会被四舍五入。看到[这个帖子](https://stackoverflow.com/q/1458633/8583692)。

2.  `useGrouping: false`要在格式化数字中省略千位分隔符，请添加`toLocaleString`. 请参阅[MDN Web 文档：Intl.NumberFormat()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#parameters)和[W3Schools: JavaScript Number toLocaleString()](https://www.w3schools.com/jsref/jsref_tolocalestring_number.asp)以查看所有其他可用选项。

3.  该解决方案将使用正确的波斯[千](https://fa.wikipedia.org/wiki/%D8%AC%D8%AF%D8%A7_%DA%A9%D9%86%D9%86%D8%AF%D9%87%E2%80%8C%DB%8C_%D9%87%D8%B2%D8%A7%D8%B1%DA%AF%D8%A7%D9%86)位分隔符和[小数分隔符](https://fa.wikipedia.org/wiki/%D8%AC%D8%AF%D8%A7%DA%A9%D9%86%D9%86%D8%AF%D9%87_%D8%A7%D8%B9%D8%B4%D8%A7%D8%B1)（称为 momayyez）格式化数字。使用默认浏览器字体和其他一些字体，这两个字符可能看起来类似于拉丁逗号 ( `,`)，但它们实际上是具有三个不同 Unicode 值的三个不同字符：

    | 姓名 | 统一码值 | 渲染 |
    | --- | --- | --- |
    | [拉丁逗号](https://www.compart.com/en/unicode/U+002C) | U+002C | , |
    | [阿拉伯语/波斯语千位分隔符](https://www.compart.com/en/unicode/U+066C) | U+066C | Ø |
    | [阿拉伯语/波斯语小数分隔符](https://www.compart.com/en/unicode/U+066B) | U+066B | ⫫ |

4.  该代码假定 HTML 中的所有原始数字都是英文格式（使用逗号作为千位分隔符，使用点作为小数分隔符）。

[我在这里使用了Sjoerd 答案](https://stackoverflow.com/a/15248147/8583692)的修改版本。感谢他的回答。

有关不同常用数字的列表，请参阅[此 Wikipedia 文章](https://en.wikipedia.org/wiki/Numerical_digit#Numerals_in_most_popular_systems)。另外，请参阅[这篇文章](https://stackoverflow.com/q/2901102/8583692)和[这篇文章](https://stackoverflow.com/q/1133770/8583692)。你也可以使用[persian.js 库](https://github.com/usablica/persian.js)来完成这一切。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-01T19:43:55.380

另一种简单的方法：

```
String.prototype.toEnglishDigits = function () {
     var charCodeZero = '۰'.charCodeAt(0);

     return this.replace(/[0-9]/g, function (w) {
         return String.fromCharCode(parseInt(w) + charCodeZero);
      });
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-12T12:39:58.987

所有的方式都没有信心，因为很多波斯用户，使用阿拉伯语键盘和阿拉伯语字符与波斯数字不同。

最好也替换阿拉伯字符。

例如，这是波斯语中的零字符：۰，这是阿拉伯语中的零字符：٠

如您所见，两者都是相同的，但它们的 Unicode 不一样。如果你在项目中使用波斯语，我推荐你[persian.js](http://usablica.github.io/persian.js/)，它只有 5 KB。

或者如果你不想使用这个库，你可以使用这个代码：

```
function convertToPersianNumber(value) {
  const arabicNumbers = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩'];
  const persianNumbers = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
  const englishNumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

  let confidentValue = value;
  for (var i = 0; i < value.length; i++) {
    const inArabicIndex = arabicNumbers.indexOf(value[i]);
    if (inArabicIndex > -1) {
    confidentValue = confidentValue.replace(
      value[i],
      englishNumbers[inArabicIndex]
    );
  }

  const inPersianIndex = persianNumbers.indexOf(value[i]);
  if (inPersianIndex > -1) {
      confidentValue = confidentValue.replace(
        value[i],
        englishNumbers[inPersianIndex]
      );
    }
  }
  return confidentValue;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-24T13:15:42.750

```
 try {
    if (!enDigit &&  !enDigit.toString().length)
      return "";

  let enDigitString = typeof enDigit === 'number' ? enDigit.toString() : enDigit;

  var newValue="";
  for (var i=0;i<enDigitString.length;i++)
  {
      var ch=enDigitString.charCodeAt(i);
      if (ch>=48 && ch<=57)
      {
          // european digit range
          var newChar=ch+1728;
          newValue=newValue+String.fromCharCode(newChar);
      }
      else
          newValue=newValue+String.fromCharCode(ch);
  }
  return newValue;

  }catch (e) {
    return "";
  } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-29T01:57:27.077

只是更清晰的片段：

```
function numbersToPersian (el) {
    ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'].forEach((num, index) => {
        el.textContent = el.textContent.replace(new RegExp(index, 'g'), num);
    });
};

function traverseToLeaf (el) {
    if (el.childNodes.length === 0) return;

    el
        .childNodes
        .forEach(node => {
            if (node.nodeType === 3) {
                numbersToPersian(node);
                } else {
                traverseToLeaf(node);
            }
        });
};

// just write your element class or ID instead of '.primary' in line below
traverseToLeaf(document.querySelector('.primary')); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-23T07:51:54.103

```
function persianNumber(string) {
    return string.split('0').join('۰')
    .split('1').join('۱')
    .split('2').join('۲')
    .split('3').join('۳')
    .split('4').join('۴')
    .split('5').join('۵')
    .split('6').join('۶')
    .split('7').join('۷')
    .split('8').join('۸')
    .split('9').join('۹')
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-10T06:41:38.370

## ES6 单行

基于@mcrunix 答案的函数：

**fa2enDigits** 返回用英文数字替换波斯数字的字符串：

```
const fa2enDigits = s => s.replace(/[۰-۹]/g, w => String.fromCharCode(w.charCodeAt(0) - 1728) ) 
```

**en2faDigits** 返回用波斯数字替换英文数字的字符串：

```
const en2faDigits = s => s.replace(/[0-9]/g, w => String.fromCharCode(w.charCodeAt(0) + 1728) ) 
```

**例子：**

```
const fa2enDigits = s => s.replace(/[۰-۹]/g, w => String.fromCharCode(w.charCodeAt(0) - 1728) )

const en2faDigits = s => s.replace(/[0-9]/g, w => String.fromCharCode(w.charCodeAt(0) + 1728) )

console.log('Tel: ۰۹۱۲', '=>' , fa2enDigits('Tel: ۰۹۱۲') );
console.log('Tel: 0912', '=>' , en2faDigits('Tel: 0912') );
```

# javascript - 使用 jquery 在 javascript 中获取一年中的星期五日期

> ID：15247407
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:29:21.680
> 
> 标签：javascript, jquery, date

我有一个名为 Reporting date 的字段，它应该给我一个 Dates 下拉列表以及 Friday Reporting Dates 列表。特定财政年度的格式 (YYYY-MM-DD W1)。W 代表 W，它应该显示那一年的周数。我想为此使用Jquery。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:21:15.683

请查看以下用 java 脚本编写的代码。

```
<!DOCTYPE html>
<html>
<body>
    <script>
        var x = new Date();
       //set the financial year starting date
        x.setFullYear(2013, 03, 01);

       //set the next financial year starting date
            var y = new Date();
        y.setFullYear(2014, 03, 01);
        var j = 1;
        var count = 0;

      //getting the all fridays in a financial year
        for ( var i = 0; x<y; i += j) {
            if (x.getDay() == 5) {
                document.write("Date : " + x.getDate() + "/"
                        + (x.getMonth() + 1) + "<br>");
                x = new Date(x.getTime() + (7 * 24 * 60 * 60 * 1000));
                j = 7;
                count++;
            } else {
                j = 1;
                x = new Date(x.getTime() + (24 * 60 * 60 * 1000));
            }
        }
        document.write("total fridays : " + count + "<br>");
    </script>
</body>
</html> 
```

这将返回一个财政年度中的所有星期五。您可以根据自己的要求进行修改。

# java - 在 Java 1.4 中实现超时

> ID：15247412
> 
> 赞同：4
> 
> 时间：2013-03-06T12:29:34.310
> 
> 标签：java, multithreading

我不能使用 Executor 和 Future 来捕获 TimeOutException，因为它是 1.4，如果方法不完整，我需要在 30 秒后超时。

```
//Caller class
public static void main() {

EJBMethod() // has to timeout after 30 seconds

}

//EJB method in some other class
public void EJBMethod() {

} 
```

我正在考虑的一种方法是将此方法调用包装在 Runnable 中，并在方法结束后从 run() 设置一些 volatile 布尔值。那么，在调用者中，我们可以在调用该方法后休眠 30 秒，一旦醒来，我将检查调用者中的布尔值是否为 SET。如果没有设置，那么我们需要停止该线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:51:03.450

在最简单的情况下，您可以使用 Thread + 任意 Runnable。

如果你想从调用者的角度使调用阻塞，你可以创建一个运行工作线程的“服务”类，并使用[Thread.join(long)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#join%28long%29)等待操作完成或在指定超时后放弃它（*特别注意正确处理 InterruptedException 以免事情搞砸*）。

[Thread.isAlive()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#isAlive%28%29)会告诉你线程是否完成。

检索结果是一个单独的问题；我想你可以处理它...

[编辑]

*简单粗暴的例子（**不要按原样在生产中使用！**）：*

```
/**
 * Actually needs some refactoring
 * Also, did not verify for atomicity - should be redesigned
 */
public V theServiceCall(final T param) {
    final MyResultBuffer<V> buffer = new MyResultBuffer<V>();
    Runnable task = new Runnable() {
        public void run() {
            V result = ejb.process(param);
            buffer.putResult(result);
        }
    }
    Thread t = new Thread(task);
    t.setDaemon(true);
    t.start();
    try {
        t.join(TASK_TIMEOUT_MILLIS);
    } catch (InterruptedException e) {
        // Handle it as needed (current thread is probably asked to terminate)
    }
    return (t.isAlive()) ? null : buffer.getResult();
} 
```

*注意：您可以在 Runnable 中实现关闭标志而不是 Thread.setDaemon()，因为这将是一个更好的解决方案。*

[/编辑]

# json - 如何将 JSON 字符串绑定到 GWT 标签中？

> ID：15247413
> 
> 赞同：0
> 
> 时间：2013-03-06T12:29:35.130
> 
> 标签：json, gwt, binding, bind

我是 GWT 世界的新手，我想知道是否可以在 JAVA 中将 JSON 字符串绑定到 GWT 标签中，就像使用编辑器但没有 POJO 或接口一样。（*例如：*在 Html 文档中解析或其他注释后使用 JSON 键。）我用谷歌搜索，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:53:16.617

[JSONValue.parseLenient(java.lang.String jsonString)](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/json/client/JSONParser.html#parse%28java.lang.String%29) ??? 从重量 2.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:02:08.410

```
 final JSONObject reqData = new JSONObject();

                reqData.put("sessionId", new JSONString("sessionidvalue"));

            Label label=new Label();
            JSONValue jsonValue=reqData.get("sessionId");

    label.setText(jsonValue.toString());

RootPanel.get().add(label); 
```

# node.js - 使用 Node.js 保护 API

> ID：15247414
> 
> 赞同：1
> 
> 时间：2013-03-06T12:29:38.433
> 
> 标签：node.js, oauth

我想使用 Node.js 编写 REST API。

我的部分 API 需要额外的安全性，它不能直接从浏览器或任何其他客户端调用。客户端需要随请求一起发送一些身份验证数据。如果请求有效，Node.js 服务器必须处理请求并发送响应。

我想寻找 OAuth 库还是有比 OAuth 更简单的库？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:02:32.467

可以在这里找到一个简单的 OAuth：[https](https://github.com/jaredhanson/oauth2orize) ://github.com/jaredhanson/oauth2orize 。但是我对这个特定模块没有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:29:48.907

您可以使用[http://passportjs.org/](http://passportjs.org/)，因为它允许您使用很多登录选项...

# mule - 自定义骡记录器

> ID：15247416
> 
> 赞同：0
> 
> 时间：2013-03-06T12:29:57.010
> 
> 标签：mule, esb

在 mule 中，当请求到来时，mule 会自动记录包含信用卡信息的完整请求，我们不想在有效负载中记录该字段。我们是否可以自定义有效负载以隐藏某些字段或屏蔽日志中的某些字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:23:29.727

如果您正在记录所有 mule 类别，那么 org.mule.DefaultMuleMessage 也将被记录（并且它包含有效负载）。在您的日志记录配置中：

```
<!-- this will log all mule log messages -->   
<logger name="org.mule" level="DEBUG" /> 
```

如果您想隐藏它，您可以降低父 mule 类别级别并明确记录您感兴趣的类别。例如：

```
<!-- this will log all mule log messages -->   
<logger name="org.mule" level="WARN" />
<logger name="org.mule.endpoint" level="INFO" />
<logger name="org.mule.transformer" level="INFO" />
<logger name="org.mule.session" level="DEBUG" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T12:19:44.630

Log4j2 在写入日志时有几种替换数据的方法

在一个新的测试 Mule 应用程序中，打开 log4j2.xml 配置并更改 PatternLayout 模式属性，如：

`<PatternLayout pattern="%d [%t] %-5p %c - %replace{%m}{(^.*?)(foo)(.*?$)}{$1bar$3}%n" />`

因此，写入日志的任何消息 (%m) 都可以编辑信息。

...orker.01] 信息 org.mule.api.processor.LoggerMessageProcessor - bar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T05:58:27.977

您可以在使用 logger 之前将正则表达式应用于您的有效负载。下面是代码示例

```
cardRegex="(\\\\b(?!59\\\\d{14})\\\\d{13,50}\\\\b)"
maskedCardString="XXXX ... XXX" 
```

以上值位于 .properties 文件中。下面的语句将正则表达式匹配替换为 XXXX ... XXX

```
#[payload.replaceAll(${cardRegex},${maskedCardString})] 
```

# clojure - 这个 ClojureScript REPL 的生命周期是什么？

> ID：15247431
> 
> 赞同：2
> 
> 时间：2013-03-06T12:30:39.093
> 
> 标签：clojure, clojurescript

我试图了解 ClojureScript 的生命周期及其在 repl 中的评估。

据我了解，当我使用以下命令开始 repl 时`lein trampoline cljsbuild repl-listen`，然后当我使用以下命令收听时`(repl/connect "http://localhost:9000/repl")`-

1.  它创建一个侦听端口 9000 的 TCP 服务器。
2.  浏览器建立某种轮询，它正在轮询任何更改。
3.  当我在 repl 中执行任何代码时，这会更改编译`*.js`文件。
4.  然后将此 *.js 文件提供给浏览器。
5.  浏览器将其当前的 *.js 文件替换为新文件。
6.  因此，由于在 repl 中执行的代码而导致的更改会显示在浏览器中。

我正在尝试更好地验证和理解这一点。如果有人能详细说明这一点或指向我更好地解释它的链接，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:45:01.807

严格来说，javascript 的执行环境不必是浏览器，尽管“大多数”用途是。

对于基于浏览器的执行环境：

1.  在端口 9000 上创建的 HTTP 服务器
2.  [浏览器使用HTTP Long polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)连接服务器，建立执行环境。（这是一个 HTTP`GET`到`http://server:9000/repl`）
3.  在 REPL 中执行代码时，clojurescript 被编译为 javascript，并且 javascript 在 HTTP 长轮询中作为“响应”（见下文）发送。（请注意，这不是将 js 文件“提供给浏览器”，而只是相关的表单）
4.  javascript 表单在浏览器中进行评估。
5.  浏览器中的 javascript 环境现在是最新的。

遵循这一点的最简单方法是使用 google chrome 开发人员工具中的网络监视器之类的东西来监视 http 流量。

*注意：*在 HTTP 长轮询设置中，请求/响应之间存在无限混淆，这可能会有所帮助：

```
 [REPL]    -> [browser] travels via HTTP Response
  [browser] -> [REPL]    travels via HTTP Request. 
```

# java - 自定义字体不起作用

> ID：15247437
> 
> 赞同：0
> 
> 时间：2013-03-06T12:30:55.950
> 
> 标签：java, android

我有一个我目前正在做的基本动画教程。在我尝试在代码中包含自定义字体之前，该代码正在运行。我想知道是否有人可以帮助我。下面我已经包含了 LogCat 和我的字体代码。

```
Typeface font;

public MyBringBack(Context context) {
    super(context);

    gPlus = BitmapFactory.decodeResource(getResources(), R.drawable.plusselected);
    changingY = 0;
    font = Typeface.createFromAsset(context.getAssets(), "G-Unit");

}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    canvas.drawColor(Color.WHITE);

    Paint textPaint = new Paint();
    textPaint.setARGB(50,254,10,500);
    textPaint.setTextAlign(Align.CENTER);
    textPaint.setTextSize(50);
    textPaint.setTypeface(font);
    canvas.drawText("mybringback",canvas.getWidth()/2, 200, textPaint); 
```

日志猫：-

```
03-06 12:31:25.395: E/AndroidRuntime(19933): FATAL EXCEPTION: main
03-06 12:31:25.395: E/AndroidRuntime(19933): java.lang.RuntimeException: Unable to     start activity ComponentInfo{com.example.learn.tam/com.example.learn.tam.GFX}: java.lang.RuntimeException: native typeface cannot be made
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at    android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.os.Looper.loop(Looper.java:137)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)  
03-06 12:31:25.395: E/AndroidRuntime(19933):    at dalvik.system.NativeStart.main(Native Method)
03-06 12:31:25.395: E/AndroidRuntime(19933): Caused by: java.lang.RuntimeException: native typeface cannot be made
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.graphics.Typeface.<init>(Typeface.java:247)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.graphics.Typeface.createFromAsset(Typeface.java:221)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at com.example.learn.tam.MyBringBack.<init>(MyBringBack.java:25)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at com.example.learn.tam.GFX.onCreate(GFX.java:14)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.Activity.performCreate(Activity.java:5206)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-06 12:31:25.395: E/AndroidRuntime(19933):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-06 12:31:25.395: E/AndroidRuntime(19933):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:32:24.567

采用

```
font = Typeface.createFromAsset(context.getAssets(), "G-Unit.ttf"); 
```

反而

```
font = Typeface.createFromAsset(context.getAssets(), "G-Unit"); 
```

您需要将带有扩展名的字体文件名（如 ttf、otf...）作为第二个参数传递给`Typeface.createFromAsset`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:33:28.890

在 createFromAsset 中使用自定义字体的扩展名。

# hibernate - 在 Grails 中使用 Firebird 数据库的步骤

> ID：15247443
> 
> 赞同：5
> 
> 时间：2013-03-06T12:31:17.870
> 
> 标签：hibernate, grails, jdbc, firebird, jaybird

我正在尝试将我的 Grails 应用程序连接到 Firebird 数据库。

我在用：

*   圣杯 2.2.1
*   JDK 1.7
*   火鸟 2.5.2
*   捷鸟 2.2.2

到目前为止，这就是我所做的：

*   [我从http://www.firebirdsql.org/en/jdbc-driver/](http://www.firebirdsql.org/en/jdbc-driver/)下载了 Jaybird-2.2.2JDK_1.7.zip
*   我解压缩了这个文件并将 jaybird-2.2.2.jar 复制到我的应用程序的 lib 文件夹中。
*   在 BuildConfig.groovy 中，我添加`runtime "org.firebirdsql.jdbc:jaybird:2.2.2"`了依赖项部分。
*   我编辑了 DataSource.groovy，如下所述。

数据源部分：

```
dataSource {
    pooled = false
    driverClassName = "org.firebirdsql.jdbc.FBDriver"
    dialect = "org.hibernate.dialect.FirebirdDialect"
    username = "SYSDBA"
    password = "masterkey"
} 
```

休眠部分：

```
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.provider_class = 'org.firebirdsql.pool.FBSimpleDataSource'
} 
```

（我在不同的场合也有过`cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory`上述`cache.provider_class = 'com.opensymphony.oscache.hibernate.OSCacheProvider'`部分，但都没有任何区别。）

运行我的 Grails 应用程序时，启动失败并出现一个巨大的错误，归结为以下消息：

```
java.lang.IllegalStateException: Could not load JDBC driver class [org.firebirdsql.jdbc.FBDriver] 
```

我已经在网上搜索了很多地方，但是我在任何地方都找不到工作 Grails/Firebird 配置的示例。有一个涉及复制 minij2ee.jar 的修复程序，但这是针对不同的错误消息。此外，人们建议清空 .grails 文件夹——我试过了，但无济于事。

有人可以建议，我怎样才能让 Grails 与 Firebird 一起工作？

* * *

这是整个例外，尽管它似乎在启动过程中重复了几次：

```
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory':
 Cannot resolve reference to bean 'dataSource' while setting bean property 'data
Source'; nested exception is org.springframework.beans.factory.BeanCreationExcep
tion: Error creating bean with name 'dataSource': Cannot resolve reference to be
an 'dataSourceUnproxied' while setting constructor argument; nested exception is
 org.springframework.beans.factory.BeanCreationException: Error creating bean wi
th name 'dataSourceUnproxied': Error setting property values; nested exception i
s org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessE
xceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException:
Property 'driverClassName' threw exception; nested exception is java.lang.Illega
lStateException: Could not load JDBC driver class [org.firebirdsql.jdbc.FBDriver
] 
```

使用 --verbose 运行 --stacktrace：

```
| Error Error running script --stacktrace --verbose: Cannot invoke method findAl
l() on null object
java.lang.NullPointerException: Cannot invoke method findAll() on null object
        at org.codehaus.groovy.runtime.NullObject.invokeMethod(NullObject.java:7
7)
        at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaC
lassSite.java:45)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSi
teArray.java:45)
        at org.codehaus.groovy.runtime.callsite.NullCallSite.call(NullCallSite.j
ava:32)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSi
teArray.java:45)
        at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMeta
MethodSite.java:55)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCa
llSite.java:116)
        at org.codehaus.groovy.grails.cli.ScriptNameResolver.resolvesTo(ScriptNa
meResolver.groovy:30)
        at org.codehaus.groovy.grails.cli.GrailsScriptRunner.getPotentialScripts
(GrailsScriptRunner.java:489)
        at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeScriptWithCa
ching(GrailsScriptRunner.java:429)
        at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeScriptWithCa
ching(GrailsScriptRunner.java:416)
        at org.codehaus.groovy.grails.cli.GrailsScriptRunner$executeScriptWithCa
ching.call(Unknown Source)
        at org.codehaus.groovy.grails.cli.interactive.InteractiveMode.parseAndEx
ecute(InteractiveMode.groovy:280)
        at org.codehaus.groovy.grails.cli.interactive.InteractiveMode$parseAndEx
ecute.callCurrent(Unknown Source)
        at org.codehaus.groovy.grails.cli.interactive.InteractiveMode.run(Intera
ctiveMode.groovy:133)
        at org.codehaus.groovy.grails.cli.interactive.InteractiveMode$run.call(U
nknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSi
teArray.java:45)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCa
llSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCa
llSite.java:112)
        at RunApp$_run_closure7_closure11.doCall(RunApp:127)
        at RunApp$_run_closure7_closure11.doCall(RunApp)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(Refl
ectiveInterceptor.java:1243)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:
90)
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1082)
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1106)

        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
        at groovy.lang.Closure.call(Closure.java:412)
        at groovy.lang.Closure.call(Closure.java:406)
        at groovy.lang.Closure.run(Closure.java:490)
        at java.lang.Thread.run(Thread.java:662)
| Error Error running script --stacktrace --verbose: Cannot invoke method findAl
l() on null object 
```

* * *

这是我`BuildConfig.groovy`文件中的存储库块：

```
repositories {
    inherits true // Whether to inherit repository definitions from plugins

    grailsPlugins()
    grailsHome()
    grailsCentral()

    mavenLocal()
    mavenCentral()

    // uncomment these (or add new ones) to enable remote dependency resolution from public Maven repositories
    mavenRepo "http://snapshots.repository.codehaus.org"
    mavenRepo "http://repository.codehaus.org"
    mavenRepo "http://download.java.net/maven/2/"
    mavenRepo "http://repository.jboss.com/maven2/"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:37:38.157

您可能缺少 Jaybird 所需的依赖项。您需要在类路径中包含`connector-api-1.5.jar`（在`lib`Jaybird 发行版的文件夹中）。另一种方法是使用`jaybird-full-2.2.2.jar`（包括 的类`connector-api-1.5.jar`）。

**编辑**

出于好奇，我安装了 grails 并试了一下。我最初也遇到了类似的错误（使用`grails console`），堆栈跟踪显示给我`java.lang.NoClassDefFoundError: javax/resource/ResourceException`。看起来 grails - 与文档相反 - 不会检索传递依赖项（*这是一个 wong，请参阅 EDIT 2*）。

在我明确添加了运行时依赖项之后`'javax.resource:connector-api:1.5'`，例如：

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes e.g.

    // runtime 'mysql:mysql-connector-java:5.1.22'
    runtime 'org.firebirdsql.jdbc:jaybird-jdk17:2.2.2',
            'javax.resource:connector-api:1.5'
} 
```

有了这个额外的依赖，它就起作用了。由于`connector-api`通常由应用程序服务器提供，因此最好指定它`provided`（您可能需要检查您的实际部署环境）。

如果您需要支持检索生成的密钥（或者 Gorm 可能需要它），那么我建议您也添加`'org.antlr:antlr-runtime:3.4'`（作为`runtime`依赖项）。

**编辑 2**

经过一些额外的测试后，看起来首先将下载的 jaybird 库安装到`lib`.然后声明依赖项将使 ivy 创建对该本地库的依赖项，而不是从 maven 中检索它。从 lib 文件夹中删除 jaybird 库**并**从我的 Ivy 缓存中删除该`org.firebirdsql.jdbc`文件夹后，它正确地从 Maven 下载了它，包括`connector-api`依赖项。

# php - 获取变量数组的数据库数据

> ID：15247447
> 
> 赞同：0
> 
> 时间：2013-03-06T12:31:26.670
> 
> 标签：php, html, mysql, arrays, foreach

嗨，我创建了一个功能，将使用前一页上的复选框选择的预约时段添加到我的数据库中，同时存储时段，以便可以在我的邮件功能页面的下方进一步使用它们。

```
$savedData = array();
foreach ($_POST as $key=>$value)
{       $key = mysql_real_escape_string($key);
        echo($key. "<br>"); // show times selected on previous page
        mysql_query("INSERT INTO appointment(Patient_ID, Appointment_Date, Appointment_Time
            , Practice_ID, Appointment_ID)
            VALUES('$patid','$insertdate','$key','$pracid','$apptype')");   
        //To save the variables for later:
        $savedData[] = $key;
} 
```

我现在需要使用用户选择的时间段来识别插入我的数据库时自动生成的约会号码，我尝试使用的代码如下：

```
 $insertedapps = mysql_query("SELECT * FROM appointment 
        WHERE Appointment_Date='".$insertdate."' 
        AND Appointment_Time='".$key."'");
        while($row3 = mysql_fetch_array($insertedapps))
    {   $appno = $row3['Appointment_No.'];
    } 
```

邮件功能：

```
$to = "$pemail";
       $subject = "Booking Confirmation";
       $message = "Hello $pfname 
       This e-mail is to confirm your $appname appointment has been booked for the below times for $insertdate at the the following time(s) below:
       Appointment No:      Appointment Time:
       $appno[0]            $savedData[0]
       $appno[1]            $savedData[1]
       $appno[2]            $savedData[2]
       $appno[3]            $savedData[3]
       The above appointment(s) are booked at the $pracname practice
       Should you wish to alter this appointment please login via our customer login page or contact us on $pracphone";
       $from = "xxxxx@xxxx.xxxx";
       $headers = "From:" . $from;
       mail($to,$subject,$message,$headers);
       echo "Mail Sent."; 
```

约会时间打印得很好，但我没有得到约会号码的结果……有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:37:54.270

`$appno = $row3['Appointment_No.'];`

每次都会重新初始化 $appno 变量。所以它永远不会包含 4 个值，请使用`$appno[]`它。

还有，什么是`$row3['Appointment_No.']`？我认为这是一个`auto_increment`领域，但正如评论中指出的那样，那个时期`.`不可能存在。也许是错字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:35:13.307

如我所见，您使用的是双引号（“）和不喜欢数组=D。将数组变量放在大括号中，如下所示：

```
{$appno[0]} 
```

必须工作=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:37:08.047

使用 $appno[] 而不是 $appno

# ajax - joomla 1.5中的简单ajax调用不起作用

> ID：15247452
> 
> 赞同：0
> 
> 时间：2013-03-06T12:31:55.027
> 
> 标签：ajax, joomla, mootools

我正在尝试在 joomla 1.5 中进行简单的 ajax 调用（来自 jseblod 子模板，如果有帮助的话）但似乎没有任何效果：我尝试使用 javascript 并使用 mootools（版本为 1.1）来调用一个简单的 test.php 文件但我得到的只是整个网站再次显示在目标 div 中。我究竟做错了什么？

这是代码：

```
<script type="text/javascript"> 
$('start').addEvent('click', function(e) {
e = new Event(e).stop();

var url = "test.php";
new Ajax(url, {
    method: 'get',
    update: $('ajax-container')
}).request();
});
</script> 
```

和 HTML 部分：

```
<h3>Simple Ajax Request</h3>
<a id="start" href="#">Click here</a>
<div id="ajax-container"></div> 
```

我也尝试过使用 Mootools：

```
<?php
$url = "test.php";
$ajax = <<<EOD
window.addEvent('domready',function() 
{
$('drop-down').addEvent('change',function()
{ 
      var a = new Ajax({$url},{
           method:'get',
           update: $('ajax-container')
           }
      }).request();
    });
});
EOD;
$doc = & JFactory::getDocument();
$doc->addScriptDeclaration( $ajax );
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:48:33.987

所以对于任何感兴趣的人，这里是使用 jQuery 1.8.3 库的代码，它只是在第一行加载：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script>
$(document).ready(function(){
$("button").click(function(){
$("#div1").load("http://www.panacea.hr/test.php");
});
});
</script>
<button>Start AJAX</button>
<div id="div1"><h3>Place for generated content</h3></div> 
```

这是我的 test.php 的开始 - 需要此代码来连接到数据库并执行查询，因为 Joomla 没有将 test.php 视为站点的一部分：

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();
$db = &JFactory::getDBO();
// query after this 
```

# c# - 仅在运行时才知道类型的泛型参数

> ID：15247454
> 
> 赞同：0
> 
> 时间：2013-03-06T12:32:01.610
> 
> 标签：c#, generics, dynamic

我有一个界面：

```
public interface IOut<T>
{
    void Get(out T output);
} 
```

和一个实现它的类：

```
public class Impl : IOut<string>, IOut<int>{
    public void Get(out string output) { output = "string"; }
    public void Get(out int output) { output = 12; }
} 
```

我可以做到以下几点：

```
public static void Main()
{
    dynamic dImpl = new Impl();

    string sOutput;
    int iOutput;

    dImpl.Get(out sOutput);
    dImpl.Get(out iOutput);

    Console.WriteLine(sOutput);
    Console.WriteLine(iOutput);
} 
```

我的问题是我只知道我需要在运行时*获取*的类型，所以我*想*如何调用我的`Get`代码是这样的：

```
public static void Main()
{
    dynamic dImpl = new Impl();

    var t = typeof(string);
    t output;
    dImpl.Get(out output);

    Console.WriteLine(output);
} 
```

现在，我知道这*行不通*，我尝试过反思性地表演演员：

```
public static T Cast<T>(object o) { return (T) o; } 
```

但我没有要投射的对象，我只有一个`Type`. 我试过默认值：

```
public static T Default<T>() { return default(T); } 
```

但是诸如`string`etc 之类的默认值为 null，并且在通过反射调用该方法时：

```
var method = typeof(Program).GetMethod("Default").MakeGenericMethod(typeof(string));
var defaulted = method.Invoke(null, null); 
```

`defaulted`将是 null，并且在调用`dImpl.Get(out defaulted)`运行时不确定要使用哪个重载。

所以，我正在寻找的是：a）以某种方式使用当前界面设置[首选] b）实现目标的不同方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:47:22.863

您可以从接口类型而不是实现类型获取要调用的方法：

```
object[] parameters = new object[] { null };
Type typeParam = typeof(string);
Type ifaceType = typeof(IOut<>).MakeGenericType(typeParam);
MethodInfo method = ifaceType.GetMethod("Get");

var impl = new Impl();
method.Invoke(impl, parameters);

object outParam = parameters[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:42:26.767

如果你不知道`output`直到运行时的类型，你就不能在 C# 中声明它的强类型实例。

如果您也可以使调用逻辑（`Main`在您的示例中）通用`T`，那将起作用-但这只会推迟您的问题。

另一种选择是声明`output`为基类或接口并将泛型限制`T`为。`object`用作基类可能对您有用 - 取决于您想用它做什么。

# javascript - 基于attr的jquery更改选择器

> ID：15247456
> 
> 赞同：1
> 
> 时间：2013-03-06T12:32:04.340
> 
> 标签：javascript, jquery, css

我有以下 html 片段：

```
<div id="review_sort_section" class="ieSucks">Sort by:    
    <a href="#" data-uid="date">Date</a>    
<a href="#" data-uid="rating">Rating</a> 
    <a href="#" data-uid="vote">Vote</a>        
</div> 
```

如何根据以下 html 的值更改`a`上述代码的选择器：`attr``data-uid``$(document).ready(function(){})`

```
'<a href="#"  class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected">' + 
            '<i class="i ig-common i-sort-descend-common"></i>Date</a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:33:39.103

您可以使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)来获取具有特定属性值的元素。

```
$('[data-uid="yourvalue"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T12:34:32.940

这可能是您正在寻找的：

```
$(document).ready(function(){
    $('a[data-uid="date"]').parent().html('<a href="#"  class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected">' + 
            '<i class="i ig-common i-sort-descend-common"></i>Date</a>');
}); 
```

这将产生：

```
<div id="review_sort_section" class="ieSucks"> 
   <a href="#"  class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected">
       <i class="i ig-common i-sort-descend-common"></i>Date
     </a>               
</div> 
```

这里有一个由@mplungjan 添加的活生生的例子：http: [//jsfiddle.net/mplungjan/89ZhX](http://jsfiddle.net/mplungjan/89ZhX)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T12:38:52.950

这可能对你有用

`$('a[data-uid="yourValue"]').attr('class','your-class-name').html('<i class="i ig-common i-sort-descend-common"></i>Date');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T12:45:44.907

这是您问题的实际答案，尽可能准确 - 我怀疑您想将 DATE 包装在 I

[演示](http://jsfiddle.net/mplungjan/pUtR5/)

```
$(function() {    
  $('#review_sort_section a[data-uid="date"]')
    .addClass("i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected")
    .html('<i class="i ig-common i-sort-descend-common">Date</i>');
}); 
```

结果：

```
<div id="review_sort_section" class="ieSucks">Sort by:    
  <a href="#" data-uid="date" class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected"><i class="i ig-common i-sort-descend-common">Date</i></a>    
  <a href="#" data-uid="rating">Rating</a> 
  <a href="#" data-uid="vote">Vote</a>        
</div> 
```

* * *

假设 - 你可能想要这个代码：

HTML：

```
<div id="review_sort_section" class="ieSucks">Sort by:    
  <a href="#" data-uid="Date">Date</a>    
  <a href="#" data-uid="Rating">Rating</a> 
  <a href="#" data-uid="Vote">Vote</a>        
</div> 
```

jQuery：

[演示](http://jsfiddle.net/mplungjan/SPkQQ/)

```
$(function() {
    $("#review_sort_section a").on("click",function(e) {
        e.preventDefault();
        $(this).addClass("i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected")
          .html('<i class="i ig-common i-sort-descend-common">'+$(this).data("uid")+'</i>')
          .siblings().each(function() {
            $(this).html($(this).data("uid")).removeClass(); // siblings $(this)
          });

        // here we call the ajax to load the sorted data
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T12:34:00.513

试试这样。使用属性选择器[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)

```
$('a[data-uid="yourValue"]'); 
```

# c# - 在c#中允许覆盖扩展会有什么问题

> ID：15247466
> 
> 赞同：3
> 
> 时间：2013-03-06T12:32:27.380
> 
> 标签：c#, oop, extension-methods

根据语言规范[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

> 您可以使用扩展方法来扩展类或接口，但不能覆盖它们。永远不会调用与接口或类方法具有相同名称和签名的扩展方法。在编译时，扩展方法的优先级总是低于类型本身定义的实例方法。

我不明白*为什么*会有这个限制？*允许覆盖扩展会有什么编程问题？*

**一个简单的案例研究**

基类`Object`有一个方法 ToString()，默认情况下将对象类型名称返回为字符串。可以说，出于所有意图和目的，它被设计为被覆盖。

默认情况下 a`Stream`不提供覆盖，`ToString`因为它不知道将字节转换为字符串是否有意义。

但是，作为解决方案的程序员，我知道所有流如果转换为字符串都是有意义的。但是，我不想*或不能*从流类派生。所以，我想扩展`ToString`将流转换为字符串的方法；像这样：

```
public static String ToString(this Stream stream)
{
    var memory = new MemoryStream(); //closable
    var reader = new StreamReader(memory);
    stream.Position = 0;
    stream.CopyTo(memory);
    memory.Position = 0;
    return reader.ReadToEnd();
} 
```

但是，根据规范，它永远不会在运行时被调用。但是为什么在这种情况下对限制如此严格呢？作为`Stream`派生自`Object`，这不应该意味着任何专门针对`Stream`的扩展方法都应该默认覆盖基类型方法吗？

此外，在某些情况下，简单地命名它`AsString`是没有用的；即 WPF`ToString`用作后备来表示一个项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:37:20.747

扩展方法在扩展对象的继承层次之外。

语言（和 IDE）只是让这个**完全独立**的类看起来像是扩展类型的一部分。

为了允许覆盖，整个继承模型和扩展机制都需要改变——这是一个非常大的改变，可能是一个破坏性的改变。

In short - this is a feature whose implementation costs would outweigh its usefulness.

# php - 如何使用 htaccess 从 url 字符串访问变量？

> ID：15247475
> 
> 赞同：0
> 
> 时间：2013-03-06T12:33:12.987
> 
> 标签：php, .htaccess

我有这样的htaccess

```
RewriteRule i_am_(.*)_fan([0-9]).html$ /fans.php?player=$1&page=$2 
```

当我输入这样的网址时，`http://messi_fans.com/i_am_messi_fan2.html`它会重定向到页面[http://messi_fans.com/fans.php](http://messi_fans.com/fans.php)。但是**GET**变量是

```
Array ( [player] => messi_fan2 [page] => ) 
```

我想要这样 的**GET**`Array ( [player] => messi [page] =>2 )` 如何修改上面的htaccess？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:20:53.993

首先至少使用基本指令和一些条件来防止循环，如下所示：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !fans\.php                        [NC]
RewriteCond %{REQUEST_URI}  ^/i_am_([^_]+)_fan([^.]+)\.html/? [NC]
RewriteRule .*              fans.php?player=%1&page=%2        [L] 
```

静默地图

`http://messi_fans.com/i_am_messi_fan2.html` 带或不带斜杠

至：

`http://messi_fans.com/fans.php?player=messi&page=2`

对于永久和可见的重定向，将 [L] 替换为 [R=301,L]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:35:41.213

您应该通过将问号附加到您的: 来使用[惰性量词](http://www.regular-expressions.info/repeat.html#lazy)`.*`：

```
i_am_(.*?)_fan([0-9]).html$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:36:08.813

它应该是

```
RewriteRule i_am_([a-zA-Z])_fan([0-9]).html$ /fans.php?player=$1&page=$2 
```

# delphi - Delphi 7中组件的覆盖方法？

> ID：15247480
> 
> 赞同：4
> 
> 时间：2013-03-06T12:33:23.133
> 
> 标签：delphi, methods, components, overriding

基于[这个](https://stackoverflow.com/a/14783549)答案，我试图覆盖Delphi 7 中`OnShowWindow`的方法`TOleContainer`。

```
unit MyOleContainer;

interface

uses
    Windows, OleCtnrs;

type
  TOleContainer = class(OleCtnrs.TOleContainer)
  private
    function OnShowWindow(fShow: BOOL): HResult; stdcall; override;
  end;

implementation

function TOleContainer.OnShowWindow(fShow: BOOL): HResult;
begin
   Result := S_OK;
end;

end. 
```

但这不会编译给出以下错误：`[Error] MyOleContainer.pas(11): Field definition not allowed after methods or properties`为什么？

编辑：

您能否解释一下如何“声明 IOleClientSite 的实现，从 TOleContainer 继承并隐藏方法 OnShowWindow [...] 使用 TOleContainer 作为 IOleClientSite”？

编辑2：

这是你的意思吗？

```
TMyContainer = class(TOleContainer, IOleClientSite)
private 
   FIOleClientSite: IOleClientSite;
   function SaveObject: HResult; stdcall;
   ...

constructor TMyContainer.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Self.OleObjectInterface.GetClientSite(FIOleClientSite);
end;

function TMyContainer.SaveObject: HResult;
begin
  Result := FIOleClientSite.SaveObject;
end;

... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:43:28.640

错误消息有点误导。本质上，它的意思是`override`关键字不能出现在`stdcall`关键字之后。

这有点偏题了，但是如果您要覆盖一个方法，那么您不需要也不应该重新声明调用约定。重写方法时不能修改调用约定，因此最好不要重复。

但是，当您解决该问题时，您的代码仍然无法编译。那是因为他`OnShowWindow`的功能不是虚拟的。因此，您不能覆盖它。

我看不出如何在`IOleClientSite.OnShowWindow`不重新声明和重新实现`IOleClientSite`. 我不认为这很容易做到。

# c++ - c++类结构

> ID：15247483
> 
> 赞同：0
> 
> 时间：2013-03-06T12:33:25.550
> 
> 标签：c++, design-patterns

我正在编写一个类来表示要在投资组合选择器中使用的证券池。根据客观度量和约束，类对象将缓存一些相关数据以进行性能优化。

这可以通过定义一个包含公共元素及其子类的基类来完成，每个元素都针对特定的客观度量/约束进行了优化。

但是，我希望能够缓存多个指标的数据。有没有标准/简洁的方法来做到这一点？

编辑：

```
class Pool {
    // Contains data for different financial securities
}

class PercentileLossPool : public Pool {
    // Contains data which makes calculating percentiles easy
}

class AvgProfitPool : public Pool {
    // Contains data which makes calculating averages easy
} 
```

此类结构可以针对特定指标（百分位、平均值）优化对象

我想要构建的是一个针对多个指标进行优化的对象，而不需要为所有排列编写代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:53:52.713

您可以考虑通过继承向您的类添加数据来反转关系：

```
class PoolBase {
     // Contains data for different financial securities
};

class PercentileLossData {
    // Contains data which makes calculating percentiles easy
};

class AvgProfitData {
     // Contains data which makes calculating averages easy
};

template< typename... Ts >
class Pool : public PoolBase, Ts...
{
};

typedef Pool< PercentileLossData, AvgProfitData > MyPool1; 
```

但是，如果没有关于具体问题的更多信息，您将很难给出有效的建议。因此，将上述内容作为一个想法，但请注意，根据您的用例，还有多种其他选项。

# sql - SQL 相关的棘手 count() 查询

> ID：15247484
> 
> 赞同：1
> 
> 时间：2013-03-06T12:33:28.163
> 
> 标签：sql, count

我有 4 张桌子：

`country`：

*   ID
*   姓名

`region`：

*   ID
*   姓名
*   fk_country

`dept`：

*   ID
*   姓名
*   fk_region

`user`：

*   ID
*   fk_country
*   fk_region
*   fk_dept

该`user`表只有一个外键集（其他应为空）。

我们不必设置外键，因为我们可以通过(when is set)`fk_pays`触摸`country`表格`fk_dept.fk_region.fk_country``fk_dept`

或者

通过`fk_region.fk_country`（何时`fk_region`设置）

这种行为是为了避免冗余。

我的问题是：

**如何使用包含该国家/地区的用户数（`COUNT`）的添加列来获取所有国家/地区信息？**

我知道如何为每次付款使用不同的请求（使用`COALESCE`），但我希望一次性完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:42:40.787

试试这个：

```
SELECT count(user.id), country.name, region.name, dept.name FROM user
   JOIN country ON user.fk_country = country.id
   JOIN region ON region.fk_country = country.id
   JOIN dept ON dept.fk_region = region.id
       GROUP BY country.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:47:10.227

只需在连接中使用 OR

```
SELECT c.id, c.name, count(DISTINCT u.id)
FROM country AS c
JOIN region AS r ON c.id=r.fk_country
JOIN dept AS d ON r.id=d.fk_region
JOIN users AS u ON u.fk_country=c.id OR u.fk_region=r.id OR u.fk_dept=d.id
GROUP BY c.id,c.name; 
```

[http://sqlfiddle.com/#!1/3026f/1](http://sqlfiddle.com/#!1/3026f/1)

# algorithm - 最大限度地降低转型成本

> ID：15247489
> 
> 赞同：4
> 
> 时间：2013-03-06T12:33:37.927
> 
> 标签：algorithm, graph, primes, bijection

我想出了以下问题，但我无法找到解决方案。

陈述：

有N个酒杯。假设每个酒杯都有无限容量。每杯酒的量是一个非零正整数，单位是毫升。类型 1 的移动定义为将 1 ml 从玻璃 i 转移到玻璃 j。类型 2 的移动定义为从玻璃 i 中丢弃一毫升。所有类型 1 的移动的成本为 1。所有类型 2 的移动的成本为 k。给定每杯酒的初始数量，我们需要对这两种酒做一些移动，以确保每杯酒的数量是素数（或零）。打印这种转换的最低成本。

如何解决这个问题？任何可能的解决方案的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:34:53.127

这种类型的问题可以通过动态编程来解决，类似于计算字符串的最小编辑距离，您可以使用[Hirschberg 算法](http://en.wikipedia.org/wiki/Hirschberg%27s_algorithm)来解决。

这里实际上有两个阶段。首先，您必须找到候选素数组合，然后计算到每个候选素数的最小编辑距离。编辑距离最短的就是答案。

例如，假设您的总数为 16 14 8。第一步是您必须枚举每个可能的素数组合：{ 37 0 0 } { 31 7 0 } 等。然后使用 Hirschberg 算法计算最小编辑与这些候选人的距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:59:02.453

这是我的想法的粗略草图：

素数分布如下[x/ln(x)](http://en.wikipedia.org/wiki/Prime_number_theorem#Statement_of_the_theorem)。

还可以使用该页面上的边界来查找相对于该玻璃杯中的酒量最接近的质数。

找到这些数字后，您可以将问题简化为带有边的图形，边的成本代表从一个玻璃杯移动到另一个玻璃杯的值（您的类型 1 移动）。节点将是眼镜本身。

从这里开始，您将面临一个图表问题，您必须考虑该图表中最小成本的路径。您的目标是找到一条成本最低的路径，该路径导致所有眼镜都是素数的状态。

如果有玻璃杯阻止您这样做，请喝它们（2 型移动），葡萄酒对您有好处 :)

**更新**：

我将在这里写下我们在聊天中讨论的一些有效想法：

*   [提到了二分匹配](http://en.wikipedia.org/wiki/Bipartite_matching#Maximum_bipartite_matchings)，并且有可能将问题简化为
*   您可以首先获取每 2 个眼镜之间的主要[分区](http://mathworld.wolfram.com/PrimePartition.html)（每 2 个眼镜之和的主要分区），这些分区是图中的边。然后，您还为类型 2 移动添加边。您可以以某种方式关联成本，然后运行[最小流量算法](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem)来解决问题
*   问题也可能是您需要上面提到的所有这些边缘，因为最佳解决方案可能并不意味着为每个眼镜采用最佳[素数parititon](http://mathworld.wolfram.com/PrimePartition.html)

# perl - 这个 perl 代码如何打印输出？

> ID：15247491
> 
> 赞同：1
> 
> 时间：2013-03-06T12:33:39.847
> 
> 标签：perl, obfuscation

谁能解释这段代码如何打印输出？

## 代码

```
#!/usr/bin/perl
use warnings;
use strict;
       my          
      ($j,$        
   a,$p,$h);$      
   j=sub{print(    
  chr($p+=$a->[$   
  h++]));$j};;;$a  
 =[0,        split 
 "[:         \n]+", 
q/43         -002:1
-084         065:13
0001         000005
-0012        -00003
000013   -82 00048 
21:13:-6.00:-76:72 
 -007.:02:00008.00 
  :::-6.00:::013  
  -70:3::-70:.64   
    /];$p=0x4a     
      ;;$h=0;      
$j->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->(); 
```

## 输出：

`Just another perl hacker`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:08:48.123

这实际上是一个相当简单的 JAPH。它的两个最大特点是分割构成“图像”大部分的数据字符串，以及半递归打印。

这是我清理格式时得到的代码

```
my ($j,$a,$p,$h);
$j = sub {
    print( chr( $p += $a->[$h++] ) );
    $j
};
;;

$a = [0, split "[: \n]+",   # the split regex
q/43         -002:1         # input string start: q/ ...
-084         065:13
0001         000005
-0012        -00003
000013   -82 00048 
21:13:-6.00:-76:72 
 -007.:02:00008.00 
  :::-6.00:::013  
  -70:3::-70:.64   
    /];                     # input string end:   .../   
# print Dumper $a;  # <--- this is my line
$p = 0x4a;;
$h=0;      

$j->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->(); 
```

第一部分是 4 个主要变量的声明和赋值：

## **$j**

`$j`是打印字符的代码引用，然后返回对自身的引用。打印包括几个步骤：

1.  `$a->[$h++]` 遍历`@$a`数组，返回一个元素
2.  `$p += ...` 该元素被添加到`$p`
3.  `print chr( $p ... )` 然后`$p`返回 chr() 并打印结果字符。

sub 块中的最后一个是`$j`，这意味着每次迭代，sub 的返回值将是对自身的引用。这是允许半递归功能的部分。

## **$一个**

`$a`是对包含 0 和输入字符串拆分结果的数组的引用。一行代码中还发生了一些事情：

*   `q/43 .../`这是带有分隔符斜杠的常规`q()`单引号字符串`/`。`]`它在表示数组引用的右括号之前结束。
*   `split "[: \n]+",`这是对字符类的拆分，重复 1 次或多次。它里面有额外的空间（我在这里删除了）来填充 JAPH 本身的空间。基本上这会删除所有冒号、空格和换行符并返回结果列表。
*   `$a = [0, ... ]`拆分的列表被添加到`0`（只有一个元素）的列表中，并且所有内容都用括号括起来以表示数组引用，然后将其存储在`$a`.

我假设列表开头是`0`因为代码有一个一次性错误，因为它`$p`的原始值是输出中的第一个字母。

这是的`Data::Dumper`输出`$a`：

```
$VAR1 = [
          0,
          '43',
          '-002',
          '1',
          '-084',
          '065',
          '13',
          '0001',
          '000005',
          '-0012',
          '-00003',
          '000013',
          '-82',
          '00048',
          '21',
          '13',
          '-6.00',
          '-76',
          '72',
          '-007.',
          '02',
          '00008.00',
          '-6.00',
          '013',
          '-70',
          '3',
          '-70',
          '.64'
        ]; 
```

* * *

## **$p 和 $h**

`$p`和`$h`只是数字，它们在其中的作用分别是函数的源编号和数组的`chr()`迭代器。`@$a`

最后一行是`$j`运行子程序并打印 JAPH 的部分。链式`->()`语法意味着每次前一次迭代的返回值用于下一次执行。并`$j`返回对自身的引用，这使其成为半递归事务，只有值发生变化。

我想这类似于这样做：

```
$x = $j->();
$y = $x->();
$z = $y->();
... 
```

所以让我们来看看前几个步骤

*   `$j->()`执行
*   `$a->[$h++]` `$h`递增到 1，将 0 返回到`$a`子带，该子带返回 的第一个元素`$a`，即`0`.
*   `$p += 0`这`0`被添加到`$p`，并将 (74) 的值返回`$p`给 chr
*   `print chr(74)` 这现在打印`J`到标准输出
*   `$j`被退回。
*   `->()`对返回值执行另一次执行，因此`$j`再次运行。
*   `$a->[$h++]` `$h`递增到 2，返回 1`$a`返回第二个元素，即`43`.
*   `$p += 43`74 + 43 = 117 返回`chr`
*   `print chr(117)`这打印`u`

的元素`$a`既有正面的也有负面的，将数字移动到需要的位置。最后，所有的字母都打印出来了：`Just another Perl hacker,`

以下是 10 次首次处决的概要：

```
p => 74  += 0         =  74 output => chr( 74) J
p => 74  += 43        = 117 output => chr(117) u
p => 117 += -002      = 115 output => chr(115) s
p => 115 += 1         = 116 output => chr(116) t
p => 116 += -084      =  32 output => chr( 32)
p => 32  += 065       =  97 output => chr( 97) a
p => 97  += 13        = 110 output => chr(110) n
p => 110 += 0001      = 111 output => chr(111) o
p => 111 += 000005    = 116 output => chr(116) t
p => 116 += -0012     = 104 output => chr(104) h 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T12:38:11.387

运行它`perl -MO=Deparse`以查看 Perl 看到的内容：

```
use warnings;
use strict 'refs';
my($j, $a, $p, $h);
$j = sub {
    print chr($p += $$a[$h++]);
    $j;
}
;
$a = [0, split(/[:         \n]+/, "43         -002:1\n-084         065:13\n0001         000005\n-0012        -00003\n000013   -82 00048 \n21:13:-6.00:-76:72 \n -007.:02:00008.00 \n  :::-6.00:::013  \n  -70:3::-70:.64   \n    ", 0)];
$p = 74;
$h = 0;
&$j()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->()->(); 
```

基本上，`$j`是一个返回另一个子引用的子引用，依此类推。在返回之前，它打印一个字符并将“指针”移动到要打印的字符数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:49:57.270

小评论。

数字块中的最后一行应该是这个

```
-68:3::-70:.64 
```

代替

```
-70:3::-70:.64 
```

它需要 -68 来打印句点，-70 是打印逗号。

（该行的其余部分，“:3::-70:.64”只是噪音。这些数字永远不会传递给 $j 中的匿名函数。）

# c# - 使用 jquery 或 javascript 从 asp.net 转发器隐藏/显示特定数量的项目

> ID：15247493
> 
> 赞同：1
> 
> 时间：2013-03-06T12:33:48.400
> 
> 标签：c#, jquery, asp.net, repeater

我有 ASP.NET 中继器，我正在将酒店客房绑定到它，我需要显示最多 3 个房间，并且当用户单击“更多房间”按钮/锚点时应该显示休息记录。

我已经用两个 ASP.NET 中继器解决了这个问题，我将第一个中继器与 3 个房间绑定，第二个中继器与其他房间用 div 包装（使用 jQuery 显示/隐藏 ID）。但我认为这不是一个好方法。我需要用一个 ASP.NET 中继器来完成。
**我还需要使用 jquery slideToggle() API 显示和隐藏隐藏的房间**

这是我使用两个中继器的代码：

```
<asp:Repeater ID="RPRoomsWithThreeRecords" runat="server">
    <ItemTemplate>
        <div class="search_hotel_book_now">
            <div class="search_hotel_book_left">
                <p>Executive Room with bed and breakfast</p>
            </div>
            <div class="search_hotel_book_right">
                <a href="#">Book Now</a> <span>2 500,-</span>
                <p>NOK</p>
            </div>
        </div>
    </ItemTemplate>
</asp:Repeater>

<div id="hideShowDiv">   
    <asp:Repeater ID="RPRoomsOtherRecords" runat="server">
        <ItemTemplate>
            <div class="search_hotel_book_now">
                <div class="search_hotel_book_left">
                    <p> Executive Room with bed and breakfast</p>
                </div>
                <div class="search_hotel_book_right">
                    <a href="#">Book Now</a> <span>2 500,-</span>
                    <p> NOK</p>
                </div>
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

我还附上了屏幕截图以供参考。提前致谢。 ![在此处输入图像描述](../Images/406331dfff86491dc013a0173dd29e73.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:55:38.110

您可以使用 Jquery :lt() 选择器：

```
$('.search_hotel_book_now:lt(3)').each(function(){
    $(this).show();
}); 
```

使项目默认隐藏，并使用 :lt() 显示前三个项目

要显示其余部分，请设置一个单击侦听器：

```
$('#more-items').click(function() {
    $('.search_hotel_book_now').show();
}); 
```

[http://api.jquery.com/lt-selector/](http://api.jquery.com/lt-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:56:12.390

而不是使用两个中继器，您可以做的是在中继器上进行双循环.. 1）外部循环将在每个酒店上工作 2）内部循环将在每个房间上工作

例如

```
$('#Selector for each hotel').each(function(e,res){
    $(res).children('selector for each rooms').each(function(e1,res1){
        if(parseInt(e1)>=3)
        {
            $(this).hide(); or .css('display','none');
        }
    });
    $(this).children('selector for more button').click(function(){
        $(this).parents('selector to the top parent of each rooms').children('selector for each rooms').show();
    });
}); 
```

我猜你擅长 jQuery，因为我无法从你的代码中获取 Selector 如果你不明白，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:53:49.477

你可以这样做

```
<style type="text/css">
  .search_hotel_book_now
  {
    border: 1px solid black;
    display: block;
  }
  .hide
  {
    display: none;
  }
</style>

<asp:Repeater runat="server" ID="rptr">
  <ItemTemplate>
    <div class='<%# (Container.ItemIndex < 3 ? "search_hotel_book_now" : "hide") %>'>
        <div class="search_hotel_book_left">
          <p>
            Executive Room with bed and breakfast</p>
         </div>
         <div class="search_hotel_book_right">
            <a href="#">Book Now</a> <span>2 500,-</span>
            <p>NOK</p>
         </div>
            <%# Eval("Your_Field")%>
         </div>
  </ItemTemplate>
  <FooterTemplate>
      <div id="viewMore">  
            View More</div>
  </FooterTemplate>
</asp:Repeater>

<script type="text/javascript">
    $("#viewMore").click(function () {
        $(".hide").removeClass("hide").addClass("search_hotel_book_now");
        $("#viewMore").hide();
    });
</script> 
```

* * *

这里的主要内容是

```
class='<%# (Container.ItemIndex < 3 ? "search_hotel_book_now" : "hide") %>' 
```

我所做的是在数据绑定 id Item 被绑定期间进行检查 > 索引 3 然后对其应用`hide`类，这将最初隐藏它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:19:45.113

最后:) 我做到了。**[:) 感谢@Ahmed 和@Hiren Desai 的精彩帮助:) 你的例子给了我一个用slideToggle()](http://api.jquery.com/slideToggle/)** **jQuery API**解决它的方法

基本上，我使用 jquery **[wrapALL() API](http://api.jquery.com/wrapAll/)**将隐藏记录包装到 DIV 中，之后我能够使用 jQuery API slideToggle(); 滑动和滑动隐藏记录；

**ASP.NET 代码**

```
<asp:Repeater runat="server" ID="RPHotels" OnItemDataBound="RPHotels_ItemDataBound">
<ItemTemplate>
    <div class="search_hotel_div">
        <div class="search_hotel_right">

            <asp:Repeater runat="server" ID="RPRooms" OnItemDataBound="RPRooms_ItemDataBound">
                <ItemTemplate>
                    <div class="search_hotel_book_now">
                        <div class="search_hotel_book_left">
                            <p>
                                <asp:Literal ID="lblRoomType" runat="server" Text="Double Ensuite Double Bed Tv Telephone"></asp:Literal>
                            </p>
                            </div>
                            <div class="search_hotel_book_right">
                                <a href="#">Book Now</a> <span>
                                    <asp:Literal ID="lblRoomPrice" runat="server" Text="800,-"></asp:Literal></span>
                            </div>
                          </div>
                </ItemTemplate>
            </asp:Repeater>

            <div class="more_rooms srchbox">
                <a href="#" class="moreRooms">more rooms</a></div>
        </div>
    </div>
    <hr style="border: none; border-top: #d9d9d9 solid 1px; margin-top: 10px;" />
</ItemTemplate> 
```

**查询代码**

```
//Loop will work on each Hotel 
        $(".search_hotel_div").each(function (e) {
                //Loop will work on each Hotel's Room
                //Select rooms from bottom to 4th room using jQquery slice()
                //and wrap selected items with a div with class name .divSlideUpDown: 
                $(".search_hotel_book_now", this).slice(3).wrapAll("<div class='divSlideUpDown' style='display:none;' />");

                $(this).find('.moreRooms').click(function () {

                    //my Toggle work here :)
                    $(this).parents().siblings(".divSlideUpDown").slideToggle(); 
                    $(this).text($(this).text() == "more rooms" ? "hide rooms" : "more rooms") 
                    return false;
                });
        }); 
```

# gwt - GWT 中的即时表过滤

> ID：15247495
> 
> 赞同：0
> 
> 时间：2013-03-06T12:33:49.680
> 
> 标签：gwt, flextable

我想做一种表格（可能是 FlexTable）并能够应用过滤器（任何字符串）并立即删除不包含该字符串的行。我检查了类似的问题，但它们已经很老了（3-4 年前）。

您可以在 jquery 的数据表插件中看到一个示例：[http ://www.datatables.net/](http://www.datatables.net/)

我只需要过滤器，所以我想我可以使用 TextBox 和 KeyPressHandler 来检测按下的键，并且仅在 input.length()>=3 时显示包含输入文本的行。

有人有更好的想法或方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:27:58.137

我强烈建议使用 a`CellTable`或 a `DataGrid`。有了这些，您可以关联一个`ListDataProvider`，您可以在其中放置所有过滤逻辑。

如果您想要更复杂的过滤，您应该创建自己的实现来`DataListProvider`传递 a`String`或自定义的位置。每当您想过滤行时，您都`Filter`需要从表中创建并调用它。
`filter(String filterExpression)`

```
public class MyListDataProvider<T> extends DataListProvider<T>{

    public void filter(String filterExpression){

         // Here you filter your local list containing the data use
         List<T> list = getList();

         ...

         // Refresh all of the objects associated to this ListDataProvider
         refresh();

    }

} 
```

您可以保留一个包含所有项目的额外`List<T>`内容而不进行任何过滤，以便在您想要“取消过滤”或更改过滤器表达式时访问过滤掉的项目。

这种方法比使用 a 更有效，`FlexTable`因为`FlexTable`您必须单独浏览每一行和单元格。太多的操纵。

# android - LibGDX 初始屏幕中的空指针

> ID：15247500
> 
> 赞同：1
> 
> 时间：2013-03-06T12:34:00.767
> 
> 标签：android, libgdx, splash-screen

我有一个启动类，它应该只显示启动图像，但它会导致空指针异常。当我在其他 Java 应用程序中使用这种方法时，它很激动。我已经阅读了大量文档以了解我哪里出错了，但我似乎找不到它。

```
Splash.java class
package com.me.fypapplication;

import com.badlogic.gdx.Game;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class Splash implements Screen{

private SpriteBatch spriteBatch;
private Texture splashTexture;
private Sprite sprite;

private Game myGame;

private OrthographicCamera camera;

public Splash (Game g)
{
    myGame = g;
}

public void create() {

    camera = new OrthographicCamera(800,400);

    splashTexture = new Texture(Gdx.files.internal("data/splashtest.gif"));

    sprite = new Sprite(splashTexture);
    sprite.setSize(512, 512);
    sprite.setPosition(256, 256);

    spriteBatch = new SpriteBatch();

    splashTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

}

@Override
public void render(float delta) {

    Gdx.gl.glClearColor(0.1f, 0.1f, 0.1f, 1);
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    camera.update();

    spriteBatch.begin();
    sprite.draw(spriteBatch);
    spriteBatch.end();

} 
```

如果有人可以提供帮助将不胜感激！

编辑！忘记了错误

```
Exception in thread "LWJGL Application" java.lang.NullPointerException
at com.me.fypapplication.Splash.render(Splash.java:51)
at com.badlogic.gdx.Game.render(Game.java:46)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:190)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:38:21.193

Your camera is null because nothing is calling *create()*. If you're implementing a libgdx Screen and need to initialise things then you should override the *show()* method before *render()* is called.

# plsql - plsql嵌套表

> ID：15247501
> 
> 赞同：0
> 
> 时间：2013-03-06T12:34:02.863
> 
> 标签：plsql, nested

在我的包装规格中，我放了：

```
type table_info is record (table_name varchar2(20), col_info c_info); 
```

在我身体的申报区，我有：

```
t_info table_info := table_info(); 
```

当我编译时，我得到：

> 错误：PLS-00222：此范围内不存在名称为“TABLE_INFO”的函数

有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:07:42.457

您不需要初始化记录类型的变量：

```
SQL> DECLARE
  2     TYPE typ_rec IS RECORD (a NUMBER, b NUMBER);
  3     rec typ_rec;
  4  BEGIN
  5     rec.a := 1;
  6     rec.b := 2;
  7     dbms_output.put_line(rec.a + rec.b);
  8  END;
  9  /

3

PL/SQL procedure successfully completed 
```

但是，如果您使用的是嵌套记录表，则需要初始化集合：

```
SQL> DECLARE
  2     TYPE typ_rec IS RECORD (a NUMBER, b NUMBER);
  3     TYPE typ_tab IS TABLE OF typ_rec;
  4     tab typ_tab := typ_tab(); -- initialization
  5  BEGIN
  6     tab.extend;
  7     tab(1).a := 1;
  8     tab(1).b := 2;
  9     dbms_output.put_line(tab(1).a + tab(1).b);
 10  END;
 11  /

3

PL/SQL procedure successfully completed 
```

您可以混合记录类型和集合类型（不需要初始化 varray）：

```
SQL> DECLARE
  2     TYPE column_info IS RECORD(
  3        col_name  VARCHAR2(20),
  4        col_value VARCHAR2(1000)
  5     );
  6     TYPE c_info IS VARRAY(10) OF column_info;
  7     TYPE table_info IS RECORD(
  8        table_name VARCHAR2(20),
  9        col_info   c_info
 10     );
 11     l_table  table_info;
 12  BEGIN
 13     l_table.table_name := 'TABLE_NAME';
 14     l_table.col_info.extend;
 15     l_table.col_info(1).col_name := 'COL_NAME';
 16     l_table.col_info(1).col_value := 'COL_VALUE';
 17  END;
 18  /

PL/SQL procedure successfully completed 
```

进一步阅读：[PL/SQL 集合文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHIEBJC)

# javascript - 如何将数组的javascript对象与其他对象进行比较

> ID：15247505
> 
> 赞同：0
> 
> 时间：2013-03-06T12:34:18.407
> 
> 标签：javascript, leaflet

波纹管是折线对象

```
var firstpolyline = new L.Polyline(myPointList, {
    color: 'red',
    weight: 5,
    smoothFactor: 1
    }); 
```

我已将此折线对象添加到数组中

```
var allpolylines = [];
allpolylines.push(firstpolyline); 
```

像这样，我在这个数组中添加了更多 5 个折线对象。

现在我正在创建一个多段线对象。

```
var mytpolyline = new L.Polyline(myPointList, {
    color: 'red',
    weight: 5,
    smoothFactor: 1
    }); 
```

现在我想将 mytpolyline 对象与数组对象进行比较并找到该数组对象的索引。

我试过的是

```
var index = allpolylines.indexOf(mytpolyline); 
```

但这没有给出数组对象的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:36:41.573

您不能直接比较对象，它们永远不会相等，除非您明确引用它们

```
var a = {};
var b = {};
var c = a;

b == a // false
c == a // true 
```

如果您想检查数组中的对象是否相等，不幸的是您必须单独比较每个属性。

```
for (prop in a){
    if (a.hasOwnProperty){
        // compare a.prop to b.prop 
    }
} 
```

使用普通（非对象）属性和较新的浏览器，您可以这样做：

```
function comp(a,b){
    return Object.keys(a).every(function(prop){
        if (!b[prop]){ return false; }
        else if (a[prop] !== b[prop]){ return false; }
        return true;
    });
} 
```

看[一个例子](http://jsfiddle.net/MDgsn/)。

参考：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)

# nosql - 跟踪 NOSQL db (firebase) 中的 id

> ID：15247506
> 
> 赞同：7
> 
> 时间：2013-03-06T12:34:20.023
> 
> 标签：nosql, firebase

我在使用 Firebase（或其他 NOSQL 数据库，我猜？）有点挣扎的一件事是，ID 不是“行”主体的一部分。所以如果我的收藏看起来像：

```
Books
  |----ldJEIF
          |----Title: "A Tale of Two Cities"
          |----Author: "Charles Dickens"
          |----Body: "It was the best of times..."     
  |----2difie
          |----Title: "Moby Dick"
          |----Author: "Herman Melville"
          |----Body: "Call me Ishmael..." 
```

如果我检索`BooksList`，然后选择`myBook = books[ldJEIF]`对数据执行某些操作，`myBook`则不知道它来自列表中的哪个位置。例如，如果我以后想将它添加到 a`UserLibrary`中，我必须对我的数据进行反规范化，或者进行某种反向查找，或者传递`ldJEIF`而不是 book 对象并不断查找数据。我错过了什么吗？处理这个问题的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T14:50:48.010

**获取数据时获取ID**

至少对于 Firebase，当您检索记录时，您还会获得 ID。所以一个简单的解决方案是然后存储 ID。如果您没有方便的地方，您可以将其粘贴到数据中：

```
firebaseRef.on('child_added', function(snapshot) {
   var data = snapshot.val();
   data.id = snapshot.name(); // add the key as an id
}); 
```

当然，如果你这样做，你必须记住在将数据发送回服务器之前将其取出。

**使用快照**

同样特定于 Firebase，您可以保留快照的引用并传递它而不仅仅是数据。我个人不太喜欢这种方法，但我无法确定它违反了哪些整洁的内部原则。

但是，在某些情况下，它非常方便，因为您将随时引用数据、id 和 Firebase 对象；相当方便。

**将ID放入数据中**

NoSQL 中的一个常见做法是将 id 放入数据中——除了一些额外的存储空间之外，这并没有什么问题——在大多数用例中是微不足道的。然后，当您获取记录时，ID 已经在数据中，并且一切都很漂亮。

对于 Firebase，您可以生成 id 并在创建期间将其放入数据中。以下聪明之处来自他们的一个开源示例：

```
var data = {...};
var id = firebaseRef.push().name(); // generate a unique id based on timestamp
data.id = id; // put id into the data
firebaseRef.child(id).set(data); 
```

# iphone - 如何将 NSDictionary 数据放入 UITableView

> ID：15247510
> 
> 赞同：6
> 
> 时间：2013-03-06T12:34:26.793
> 
> 标签：iphone, ios, objective-c, uitableview, nsdictionary

我有 2 个 NSArray，我试图在 NSDictionary 中将它们链接在一起，以便每个**providerName**都有一个与之关联的**providerId 。**

我希望这两个数组使用相互关联`self.providersDict = [NSDictionary dictionaryWithObjects:providerName forKeys:providerId];`，然后将 providerName 显示为表格单元格标题，将 id 显示为表格单元格子标题。

目前，我无法获取 UITable 上显示的数据，甚至无法使用以下方法注销字典：

```
 for (id key in self.providersDict) {
    NSLog(@"key: %@, value: %@", key, [self.providersDict objectForKey:key]);
} 
```

在 .h 中声明：

```
NSArray *providerName;
NSArray *providerId;

@property (nonatomic, strong) NSDictionary *providersDict; 
```

在 viewDidLoad 中：

```
 providerName = [NSArray arrayWithObjects:@"provider1", @"provider2", @"provider3", nil];
    providerId = [NSArray arrayWithObjects:@"1", @"2", @"3", nil];

    self.providersDict = [NSDictionary dictionaryWithObjects:providerName
                                                           forKeys:providerId]; 
```

UITable 方法：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[self.providersDict allKeys] count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

 static NSString *unifiedID = @"aCellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:unifiedID];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:unifiedID];

}

for (id key in self.providersDict) {
    NSLog(@"key: %@, value: %@", key, [self.providersDict objectForKey:key]);
}

NSString *providerNameString = [self.providersDict objectForKey:@"provider"];
NSString *providerIdString = [self.providersDict objectForKey:@"object"];
cell.textLabel.text  = providerNameString;
cell.detailTextLabel.text  = providerIdString;

return cell;

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T12:45:12.360

```
NSString *providerNameString = [self.providersDict objectForKey:@"provider"];
NSString *providerIdString = [self.providersDict objectForKey:@"object"]; 
```

您已经使用键 1、2、3 初始化了 self.providersDict。所以您应该尝试`providerNameString`使用这些键来获取，而不是`@"provider"`相同的`providerIdString`.

尝试

```
NSString *key = [self.providersDict allKeys][indexPath.row];

NSString *providerNameString = self.providersDict[key];
NSString *providerIdString = key;
cell.textLabel.text  = providerNameString;
cell.detailTextLabel.text  = providerIdString; 
```

并且不要忘记在初始化后`[tableView reloadData];`调用`self.providersDict`。

至于为什么不`Provider`使用 id、name 和其他信息创建模型类的建议。您可以将每个提供程序添加到一个数组中，这将使您的生活更轻松。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T13:00:03.267

出于您的目的，您不需要任何`NSDictionary`，只需使用两个`NSArrays`来填充数据`UITableView`

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *unifiedID = @"aCellID";
    UITableViewCell *cell = 
    [tableView dequeueReusableCellWithIdentifier:unifiedID];

    if (!cell) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:unifiedID];  
    }

    NSString *providerNameString = [providerName objectAtIndex:indexPath.row];
    NSString *providerIdString = [providerId objectAtIndex:indexPath.row];
    cell.textLabel.text  = providerNameString;
    cell.detailTextLabel.text  = providerIdString;
    return cell;
} 
```

# javascript - HTML5 自定义播放器不适用于 Soundcloud api uri

> ID：15247516
> 
> 赞同：1
> 
> 时间：2013-03-06T12:34:40.190
> 
> 标签：javascript, jquery, html, audio, soundcloud

我正在使用一个 jQuery 插件，它将简单`<audio></audio>`变成一组不同的元素，而不是由 javascript 控制，基本上创建了一个自定义的 html5 播放器。您可以在此处找到有关此插件的博客文章：http: [//tympanus.net/codrops/2012/12/04/responsive-touch-friendly-audio-player/](http://tympanus.net/codrops/2012/12/04/responsive-touch-friendly-audio-player/) 它深入解释了此插件。

`src=""`无论如何，由于某种原因，当我通过 Soundcloud api 为播放器生成时它不起作用。基本上我从 Soundcloud 获取歌曲 url，然后将其作为 src 添加到音频标签中。

问题是一旦页面加载它就会说`src="unknown"`（或类似的东西）

这是 HTML 标记，它演示了 Soundcloud api 和自定义播放器插件的使用。

```
<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="/reset.css">
<link rel="stylesheet" href="/player.css">

</head>
<body>

<audio id="audio-test" controls></audio>

<!-- Javascript/jQuery -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//connect.soundcloud.com/sdk.js"></script>
<script src="/player.js"></script> <!-- /js/player.js -->

<script>
// Soundcloud
SC.initialize({
    client_id: '7a17129ba9cd5fff34f847e3539829b7'
});

SC.get("/tracks/81815566", {}, function(sound){
    $("#audio-test").attr("src", sound.uri + "/stream?client_id=7a17129ba9cd5fff34f847e3539829b7");
});

//Custom Player
$( function() { $( 'audio' ).audioPlayer(); } );
</script>

<!-- END Javascript/jQuery -->

</body>
</html> 
```

以下是您可能需要查看完整功能的播放器的其他文件：

**player.css** [http://pastebin.com/HBUFvUw2](http://pastebin.com/HBUFvUw2)
**reset.css** [http://pastebin.com/jstmq0dB](http://pastebin.com/jstmq0dB)
**player.js（插件）** [http://pastebin.com/MKrUgRDF](http://pastebin.com/MKrUgRDF)

* * *

**或者只是从这里下载整个项目：** [http ://www.filedropper.com/example_1](http://www.filedropper.com/example_1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:33:20.340

看来问题出在`/stream?client_id=...`. 我摆脱了整个字符串并更改`sound.uri`为`sound.stream_url`，现在它正在流式传输（至少在 Safari/FF OSX 中）。

在这里看[我的小提琴](http://jsfiddle.net/kS97M/5/)。如果这对您不起作用，请告诉我，我们会解决的！

**编辑**：我又试了一次，现在不行了。给我一分钟弄清楚。

**编辑二**：保留客户端 ID 但更改`sound.uri`为`sound.stream_url`似乎已修复它。似乎 sound.uri 链接提示音频播放器无法遵循的 301 重定向，但 sound.stream_url 直接链接到媒体。请参阅更新的小提琴链接。

# angularjs - 将一些 html 附加到 DOM 后初始化 AngularJS 控制器

> ID：15247518
> 
> 赞同：6
> 
> 时间：2013-03-06T12:34:48.580
> 
> 标签：angularjs

有没有办法从纯 JavaScript 中使用 $compile ？我正在结合基本的 javascript 和我使用 Angular 的地方并且找不到如何做这样的事情的方法：http: [//jsfiddle.net/DavidSlavik/bFdcJ/1/](http://jsfiddle.net/DavidSlavik/bFdcJ/1/)

我想我需要使用 $compile 但从没有任何范围的地方。

```
angular.module('myApp', []);

function ExpensesCtrl($scope) {

    // Here are some master functions...    

}    

$(function () {

   // Here is the Ajax function that returns html from my MVC action processed with Razor
   // Here I'm not using AngularJS and scopes...
   var htmlFromAjax = '<div id="mapOrder" ng-controller="sortable"><div ng-repeat="item in SortItems">{{item.Title}}</div></div>';
   $('body').append(htmlFromAjax);

});

function sortable($scope, $http, $element) {

    // Here is the Ajax function that return JSON object. For example it is commented and used static variable SortItems in scope.
    //$http.get('someUrlWitchReturnsJsonObject')
    //    .success(function (e) {
    //        $scope.SortItems = e;
    //    });

    $scope.SortItems = JSON.parse('[{"Title":"ddddddd","MapId":5,"Order":0},{"Title":"Moje mapa","MapId":3,"Order":2},{"Title":"asdas","MapId":4,"Order":3},{"Title":"asds","MapId":7,"Order":4},{"Title":"Pokus","MapId":8,"Order":5},{"Title":"Hello world!!!","MapId":1,"Order":10}]'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T13:39:04.233

```
angular.bootstrap($("#targetElmForApp")[0], ["myApp"]); 
```

解释：

```
angular.bootstrap(rootElementForApp, arrayOfModulesForTheApp) 
```

第一个参数设置应用程序的根元素，否则您将使用`ng-app`指令执行此操作。

第二个参数是定义应用程序的模块列表。这通常是定义应用程序的单个模块。

所以我们做的是一样的：

```
<div id="targetElmForApp" ng-app="myApp"></div> 
```

见： http:
[//docs.angularjs.org/api/angular.bootstrap](http://docs.angularjs.org/api/angular.bootstrap)
[http://docs.angularjs.org/guide/bootstrap](http://docs.angularjs.org/guide/bootstrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T11:50:47.647

这篇文章的替代方法：[AngularJS + JQuery : How to get dynamic content working in angularjs](https://stackoverflow.com/questions/11771513/angularjs-jquery-how-to-get-dynamic-content-working-in-angularjs)

```
 angular.element(document).injector().invoke(function ($compile) {
                var container = $('#some-dom-element');
                var scope = angular.element(container).scope();
                $compile(container)(scope);
        }); 
```

# random - Cuda 随机数生成

> ID：15247522
> 
> 赞同：0
> 
> 时间：2013-03-06T12:35:10.400
> 
> 标签：random, cuda, nvidia, thrust

我想知道通过使用 curand 或其他东西生成一个 0 到 49k 之间的伪随机数的最佳方法是什么，这对于每个线程都是相同的。

我更喜欢在内核中生成随机数，因为我必须一次生成一个，但大约 10k 次。

我可以使用 0.0 到 1.0 之间的浮点数，但我不知道如何使我的 PRN 可用于所有线程，因为大多数帖子和示例都显示了如何为每个线程设置不同的 PRN。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T16:03:24.107

可能您只需要研究[curand 文档](http://docs.nvidia.com/cuda/curand/index.html)，尤其是[设备 API](http://docs.nvidia.com/cuda/curand/index.html#topic_1_3)。为每个线程获取相同序列的关键是为每个线程创建状态（大多数示例都这样做），然后将相同的序列号传递给每个线程的 init 函数。在[curand_init](http://docs.nvidia.com/cuda/curand/index.html#group__DEVICE_1g50ffb42b31744f27be26d98c1f30d51d)中，参数的顺序如下：

```
curand_init(seed, subsequence number, offset, state) 
```

通过为每个 init 调用设置相同的种子，我们为每个线程生成相同的序列。通过将子序列和偏移量设置为相同，我们在该序列中为每个线程选择相同的起始值。

这是演示的代码：

```
// compile with: nvcc -arch=sm_20 -lcurand -o t89 t89.cu
#include <stdio.h>
#include <curand.h>
#include <curand_kernel.h>

#define SCALE 49000
#define DSIZE 5000
#define nTPB 256

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__device__ float getnextrand(curandState *state){

  return (float)(curand_uniform(state));
}

__device__ int getnextrandscaled(curandState *state, int scale){

  return (int) scale * getnextrand(state);
}

__global__ void initCurand(curandState *state, unsigned long seed){
    int idx = threadIdx.x + blockIdx.x * blockDim.x;
    curand_init(seed, 0, 0, &state[idx]);
}

__global__ void testrand(curandState *state, int *a1, int *a2){
    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    a1[idx] = getnextrandscaled(&state[idx], SCALE);
    a2[idx] = getnextrandscaled(&state[idx], SCALE);
}

int main() {

    int *h_a1, *h_a2, *d_a1, *d_a2;
    curandState *devState;

    h_a1 = (int *)malloc(DSIZE*sizeof(int));
    if (h_a1 == 0) {printf("malloc fail\n"); return 1;}
    h_a2 = (int *)malloc(DSIZE*sizeof(int));
    if (h_a2 == 0) {printf("malloc fail\n"); return 1;}
    cudaMalloc((void**)&d_a1, DSIZE * sizeof(int));
    cudaMalloc((void**)&d_a2, DSIZE * sizeof(int));
    cudaMalloc((void**)&devState, DSIZE * sizeof(curandState));
    cudaCheckErrors("cudamalloc");

     initCurand<<<(DSIZE+nTPB-1)/nTPB,nTPB>>>(devState, 1);
     cudaDeviceSynchronize();
     cudaCheckErrors("kernels1");
     testrand<<<(DSIZE+nTPB-1)/nTPB,nTPB>>>(devState, d_a1, d_a2);
     cudaDeviceSynchronize();
     cudaCheckErrors("kernels2");
     cudaMemcpy(h_a1, d_a1, DSIZE*sizeof(int), cudaMemcpyDeviceToHost);
     cudaMemcpy(h_a2, d_a2, DSIZE*sizeof(int), cudaMemcpyDeviceToHost);
     cudaCheckErrors("cudamemcpy");
     printf("1st returned random value is %d\n", h_a1[0]);
     printf("2nd returned random value is %d\n", h_a2[0]);

     for (int i=1; i< DSIZE; i++){
       if (h_a1[i] != h_a1[0]) {
         printf("mismatch on 1st value at %d, val = %d\n", i, h_a1[i]);
         return 1;
         }
       if (h_a2[i] != h_a2[0]) {
         printf("mismatch on 2nd value at %d, val = %d\n", i, h_a2[i]);
         return 1;
         }
       }
     printf("thread values match!\n");

} 
```

# mysql - 用于按星期几选择列的 MySql 查询

> ID：15247528
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:35:27.833
> 
> 标签：mysql

我有以下表结构

```
ID     IS_SUNDAY        IS_MONDAY         REST DAys..

11    Boolean value     Boolean value     Boolean value    

12    Boolean value     Boolean value     Boolean value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:23:11.060

下一个查询将允许您选择当前星期几的列：

```
SELECT 
  CASE DAYOFWEEK(CURRENT_DATE)
    WHEN 1 THEN IS_SUNDAY
    WHEN 2 THEN IS_MONDAY
    WHEN 3 THEN IS_TUESDAY
    WHEN 4 THEN IS_WEDNESDAY
    WHEN 5 THEN IS_THURSDAY
    WHEN 6 THEN IS_FRIDAY
    WHEN 7 THEN IS_SATURDAY
  END CURRENT_DAY_OF_WEK
FROM DAYS_TABLE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:41:48.130

```
SELECT IS_SUNDAY FROM yourTable WHERE ID = 11 
```

但我建议你在问这些简单的问题之前先阅读一个好的教程或一本书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:05:42.313

你可以用来获取列名

```
SELECT  COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME like '%columnname%' AND TABLE_NAME='table_name'; 
```

# asp.net-mvc - ASP.NET MVC 4 应用程序调用 Windows 服务

> ID：15247529
> 
> 赞同：1
> 
> 时间：2013-03-06T12:35:29.077
> 
> 标签：asp.net-mvc, wcf, web-services, windows-services

我们正在为我们的项目使用分布式架构。其中 UI 层位于一台服务器上，而业务层位于另一台服务器上。我们正在创建业务层的 Windows 服务。是否可以从另一个服务器 UI 应用程序调用 Windows 服务。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:45:21.277

与 Windows 服务通信有几个选项。

1.  服务[总线](http://msdn.microsoft.com/en-us/library/windowsazure/jj193022%28v=azure.10%29.aspx)
2.  [在 Proc 托管的 WebAPI 中](http://www.piotrwalat.net/hosting-web-api-in-windows-service/)
3.  [自托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733069.aspx)
4.  [SignalR](http://signalr.net/)在客户端和服务器[之间](https://github.com/SignalR/SignalR/wiki/SignalR-Client)发送消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:42:48.450

您可以在 Windows 服务中创建一个自托管的 wcf 服务。检查这个类似的问题和答案以获取更多信息： [我可以在 Windows 服务中托管（自托管）WCF 服务并通过 http 公开它吗？](https://stackoverflow.com/questions/9085895/can-i-host-self-host-a-wcf-service-in-a-windows-service-and-expose-it-via-http)

# php - 如何将html表格列转换为表格行，dom对象，php

> ID：15247530
> 
> 赞同：0
> 
> 时间：2013-03-06T12:35:30.537
> 
> 标签：php, dom

我有一个 html 表，我想将它的列转换为行。列可以包含计划文本、表单元素（输入、选择、复选框）或 html 标记（跨度、div）。考虑以下 html：

```
<html>
  <body>
    <table>
      <tr>
        <td>Cell 1</td>
        <td>Cell 2</td>
        <td>Cell 3</td>
      </tr>
      <tr>
        <td>Cell 4</td>
        <td>Cell 5</td>
        <td>Cell 6</td>
      </tr>
    </table>
  </body>
</html> 
```

dom操作后，我需要以下内容：

```
<html>
  <body>
    <table>
      <tr>
        <td>Cell 1</td>
      </tr>
      <tr>
        <td>Cell 2</td>
      </tr>
      <tr>
        <td>Cell 3</td>
      </tr>
      <tr>
        <td>Cell 4</td>
      </tr>
      <tr>
        <td>Cell 5</td>
      </tr>
      <tr>
        <td>Cell 6</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

```
$rows = $xpath->query('xpath to table/tr');
foreach ($rows as $row){
    $cols = $xpath->query('xpath to table/tr/*');
    $row->parentNode->removeChild($row);
    foreach ($cols as $col){
        $newNode = $this->createElement('tr');
        $newNode->appendChild($col);
        $node->appendChild($newNode);
    }
}
echo $dom->saveHTML(); 
```

它工作正常，但它添加了空行：

```
<table>
  <tr></tr>
  <tr></tr>
  <tr>
    <td>Cell 1</td>
  </tr>
  <tr>
    <td>Cell 2</td>
  </tr>
<table> 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:48:20.280

您可以使用 DOM 解析 HTML 和 XML，这就是您可以读取表格的方式：

```
$dom = new DOMDocument;
$dom->loadHTML( $table );
$tds = array();
foreach( $dom->getElementsByTagName( 'td' ) as $td ) {
  $tds[] = $td->nodeValue;
} 
```

打印扁平结构：

```
foreach($tds as $td){
    print '<td>'.$td.'</td>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:48:18.840

您可以将每个`<td>`元素移动到其当前祖先元素的新`<tr>`子`<table>`元素中：

```
foreach($xpath->query('//td') as $td)
    $xpath->query('ancestor::table[1]', $td)->item(0)
        ->appendChild($doc->createElement('tr'))->appendChild($td);
{{;;}} 
```

之后，您可以删除所有`<tr>`不再有任何子元素的元素`<td>`：

```
foreach($xpath->query('//tr[0 = count(td)]') as $tr)
    $tr->parentNode->removeChild($tr);
{{;;}} 
```

您的文档现已转换：

```
<table>
<tr><td>Cell 1</td></tr>
<tr><td>Cell 2</td></tr>
<tr><td>Cell 3</td></tr>
<tr><td>Cell 4</td></tr>
<tr><td>Cell 5</td></tr>
<tr><td>Cell 6</td></tr>
</table> 
```

# c++ - 了解 qthreads - 在线程之间共享数据

> ID：15247531
> 
> 赞同：3
> 
> 时间：2013-03-06T12:35:31.357
> 
> 标签：c++, multithreading, qt, qthread

我开始了解使用线程的机制，但我想我被卡住了，

如果我理解的话，我必须创建自己的类，释放`run()`方法，然后创建线程。

问题是我的线程必须从gui（主线程）读取一些变量，并且使用它们，它将创建一些其他变量，主窗口将读取和绘制这些变量。

问题是我正在接收蓝牙连接，它必须在线程中始终处于活动状态，但 gui 必须绘制从该线程读取的值。

这是需要在单独线程上的函数：

```
// Listen to the device for data
void gui::listen_device()
{
    unsigned char buf[10];
    unsigned char crcval;
    fd_set readmask;
    struct timeval tv;

    tv.tv_sec = 0;
    tv.tv_usec = 28000;

    memset (buf, 0, 10);

    int v = 0, v1 = 0, v2 = 0;

    while(1)
    {
        int i;
        FD_ZERO (&readmask);
        FD_SET (sock, &readmask);
        if (select (255, &readmask, NULL, NULL, &tv) > 0)
        {
            if (FD_ISSET (sock, &readmask))
            {
                int numb;
                numb  = 0;

                numb = recv (sock, buf, 10, MSG_WAITALL);

                crcval = BP_CRC8 (buf, 9);

                // 8 bits
                if (ui->comboBox->currentIndex() == 0)
                {
                    if (crcval == buf[9])
                    {
                        s++;
                        // Print of counter
                        printf ("%d ->", buf[0]);
                        fprintf (data, "%d,", buf[0]);

                        for (int i = 1; i < 9; i++)
                        {
                            v = buf[i];
                            printf ("%d,", v);
                            fprintf (data, "%d,", v);
                        }

                        printf ("\n");
                        fprintf (data, "\n");

                        //fprintf(data, "s: %d, f: %d\n", s,f);
                    }

                    else
                    {
                        f++;
                    }

                }

                // 12 bits
                else if (ui->comboBox->currentIndex() == 1)
                {
                    if (numb == 14)
                    {
                        // Print of counter
                        printf ("%d,", buf[0]);
                        fprintf (data, "%d,", buf[0]);
                        for (i = 1; i < numb - 1; i += 3)
                        {
                            v1 = buf[i] | ((buf[i + 1] & 0x0F) << 8);
                            v2 = buf[i + 2];
                            v2 = (v2 << 4) | ((buf[i + 1] & 0xf0) >> 4);
                            printf ("%d,%d,", v1, v2);
                            fprintf (data, "%d,%d,", v1, v2);
                        }

                        printf ("\n");
                        fprintf (data, "\n");
                    }
                }
            }
        }
    }
} 
```

并且这里读取的一些变量是全局的，如`sock, data, and the ui->combobox`.

我希望`buf`与主窗口共享。

有什么建议吗？

更新：

为什么这是错的？

```
void QMyThread::run()
{
    listen_device();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T14:21:22.900

[这是一篇关于在 Qt http://qt-project.org/doc/qt-5.0/qtcore/thread-basics.html](http://qt-project.org/doc/qt-5.0/qtcore/thread-basics.html)中使用线程的好文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T14:28:30.797

有几种方法可以解决这个问题。如前所述，您可以使用互斥锁。带有`QByteArray`（例如`void something(QByteArray)`）参数的排队连接或者`QThreadStorage`都是可行的解决方案，尽管前者更简单并且可能最适合您的情况。

另外，永远不要子类`QThread`。使用`QObject`and`moveToThread()`代替。`QThread`驻留在主线程中并简单地管理它创建的线程。如果在使用 之前将信号连接到对象`moveToThread()`，请确保使用 中的`Qt::QueuedConnection`参数`QObject::connect()`。

# xaml - Windows 8 XAML 中的 RTF 文本到 RichTextBlock

> ID：15247536
> 
> 赞同：0
> 
> 时间：2013-03-06T12:35:35.563
> 
> 标签：xaml, winrt-xaml, rtf

我必须将 RTF 文本直接显示到 Windows 8 XAML 控件的 RichTextBlock 中是否可能以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T17:37:56.930

最简单的方法是通过调用 myRichEditBox.Document.SetText(TextSetOptions.FormatRtf, yourRtf) 来实际使用 RichEditBox。这篇文章解释了如何绑定到文本：[http ://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=f9a83d4e-26e9-476b-8818-7ccdf91a2341](http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=f9a83d4e-26e9-476b-8818-7ccdf91a2341)

这篇文章解释了为什么 RichEditBox 比 RichTextBlock 强大的一些背景：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/de958373-72a5-4987-97be-1f6549ee143e](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/de958373-72a5-4987-97be-1f6549ee143e)

# xml - 如何通过 linq 从 xml 分配列表

> ID：15247541
> 
> 赞同：0
> 
> 时间：2013-03-06T12:35:44.373
> 
> 标签：xml, linq

我有一个 xml。xml 有采购订单列表。在该采购订单中我有客户列表。所以通过下面的代码我得到了除客户列表之外的所有元素。我如何将该列表从 xml 分配到我在类中的列表。任何人都可以对其进行排序出去。

```
 var ItemDet = from results in doc1.Descendants("PurchaseOrderClass")
                              select new PurchaseOrderClass
                              {
                                  Vendor_Name = results.Element("Vendor_Name").Value.ToString(),
                                  ItemCode = results.Descendants("ItemCode").First().Value.ToString(),
                                  Quantity = Int32.Parse(results.Descendants("Quantity").First().Value),
                                  Price = Int32.Parse(results.Element("Price").Value),
                                  Discount = Int32.Parse(results.Descendants("Discount").First().Value),
                                  TotalAmount = Int32.Parse(results.Descendants("TotalAmount").First().Value),
                                  DeliveryDate = Convert.ToDateTime(results.Descendants("DeliveryDate").First().Value),
                                  PO_Number = Int32.Parse(results.Descendants("PO_Number").First().Value),
                                  //CusList= List<Customer> (results.Descendants("Customer")).ToList(),

                              }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:18.883

用类似的方式改变你的最后一行（如果没有你的 xml 和类结构，很难做得更好）。

```
CustList = results.Descendants("Customer")
                  .Select(m => new Customer {
                       LastName = m.Element("LastName").Value,
                       FirstName = m.Element("FirstName").Value,
                   }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:29:59.543

使用强制转换元素`string`，`int`或`DateTime`代替获取`Value`属性。您的查询应如下所示：

```
 var ItemDet = 
       from o in doc1.Descendants("PurchaseOrderClass")
       select new PurchaseOrderClass
       {
            Vendor_Name = (string)o.Element("Vendor_Name"),
            ItemCode = (string)o.Element("ItemCode"),
            Quantity = (int)o.Element("Quantity"),
            Price = (int)o.Element("Price"),
            Discount = (int)o.Element("Discount"),
            TotalAmount = (int)o.Element("TotalAmount"),
            DeliveryDate = (DateTime)o.Element("DeliveryDate"),
            PO_Number = (int)o.Element("PO_Number"),
            CusList= o.Descendants("Customer")
                      .Select(c => new Customer {
                          // parse properties like
                          // Name = (string)c.Element("Name")
                      }).ToList()
       }; 
```

# xmpp - Facebook 聊天平台是否支持 BOSH？

> ID：15247542
> 
> 赞同：1
> 
> 时间：2013-03-06T12:35:44.757
> 
> 标签：xmpp, strophe, facebook-chat, jsjac

我读过一个相关的问题[（Integrating Facebook Chat）](https://stackoverflow.com/questions/5052780/integrating-facebook-chat)的回答 whitch 说

> Facebook 不进行 S2S 联合，只有 C2S，因此您必须将其用作您的 XMPP 服务器（或在您的服务器上实现类似 XEP-0100 的东西）。Facebook 目前不支持 BOSH、AFAIK。

我还需要将 Facebook Chat 集成到我的应用程序中，我想知道他们现在是否支持 XMPP over BOSH？developer.facebook.com 上只有一页关于 Chat API 的页面，我没有看到 BOSH 的东西。

如果他们不支持BOSH，我该怎么办？我需要一个带有 BOSH 的服务器作为代理吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:51:14.473

他们不支持BOSH。但是您可以运行您自己的 BOSH 连接管理器（例如旁遮普），通过您的 BOSH 代理通过 BOSH 连接到 Facebook。

# javascript - 从使用 window.open 打开的窗口打开 window.open

> ID：15247551
> 
> 赞同：0
> 
> 时间：2013-03-06T12:36:15.480
> 
> 标签：javascript, window.open

我正在尝试使用 window.open 从使用 window.open 打开的子窗口打开一个新窗口。但是第一个孩子在第二个窗口关闭。打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:59:00.303

我猜没有可用的代码，但是您没有像这样使用 window.open 方法：

```
window.open(URL,name); 
```

如果您在两个 window.open 调用中指定相同的名称，则正在打开的窗口将替换现有的具有相同名称的窗口，这将给出您所描述的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:49:33.493

这取决于浏览器防止他们认为糟糕的用户体验和潜在的无限递归。检查第一个打开的窗口`window.open`——在某个地方，您可能会发现“弹出窗口已被阻止”或类似内容的通知。

例如，如果您的页面中有以下脚本：

```
window.open(location) 
```

...如果没有浏览器干预并阻止代码的第二次执行，您将触发一个无限循环：窗口打开一个自身的副本，它打开一个自身的副本，无限*循环*。

为避免这种情况，请尝试将您的站点或应用程序的用户体验限制为一到两个窗口。如果窗口被分配了名称，并且在同一个域中运行，它们可以改变彼此的位置。这可能会满足您的需求——但如果不能满足您的需求，您就会陷入困境！

# asp.net - 类似 FTP 服务器的 asp.net 网站

> ID：15247554
> 
> 赞同：1
> 
> 时间：2013-03-06T12:36:29.720
> 
> 标签：asp.net, wcf, file, upload, ftp

这个问题有点棘手。我有一个带有多个参数的文件上传和下载过程的 WCF Web 服务。我们的第 3 方应用程序之一必须像 ftp 客户端一样访问此 Web 服务。

有没有办法做到这一点？我是否必须在端口 21 中编写一个 asp.net Web 应用程序，它就像一个 FTP 服务器，用于通过我的 WCF 服务上传和下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:46:04.277

确切地说，您需要构建自己的 FTP 服务器，该服务器使用 WCF 服务来获取和提供文件，这里是一个用 C# 编写的自定义 ftp 服务器的链接：http: [//www.codeguru.com/csharp/csharp/cs_network /sockets/article.php/c7409/AC-FTP-Server.htm](http://www.codeguru.com/csharp/csharp/cs_network/sockets/article.php/c7409/A-C-FTP-Server.htm)

# html - 所有屏幕的 HTML 页面大小

> ID：15247559
> 
> 赞同：1
> 
> 时间：2013-03-06T12:36:33.863
> 
> 标签：html, css

我是网页设计的新手。我刚刚建立了一个网页，但现在它看起来并不准确。

现在我刚刚建立了一个容器：

```
#container {
    width:auto;
    height:auto;
    border:4px solid green;
} 
```

**问题：**如何修复所有屏幕和尺寸的页面的`height`& `width`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:39:18.450

干得好

```
html,body{
    height:100%;
    margin:0
}
.container
{ 
    width:auto; /*Since div is block element, it takes automatic full width*/
    height:100%;
    background:grey;
    border:4px solid green;
} 
```

**[演示](http://jsfiddle.net/DTU3W/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:58:19.473

有高度：100%；加上 4px 的边框总是会超过页面的高度，并且会导致滚动条一直出现

# jquery - 无法在 DOM 中获取 h1 元素的文本/innerHTML

> ID：15247561
> 
> 赞同：0
> 
> 时间：2013-03-06T12:36:41.090
> 
> 标签：jquery, dom

我正在尝试获取两个 h1 元素的文本，但我的方法在执行时不断返回“未定义”。这是第一个 h1 元素

```
<div id="product-details" class="floatLeft">
  <h1 class="productTitle">Krista Sued Coat</h1>
</div> 
```

我获取此内容的代码

```
var productName = $('#window').contents().find('h1.productTitle').innerHTML; 
```

第二个 h1 元素

```
<div class="product-title-wrap">
  <h1 class="product-title font-alpha">
    <span itemprop="name">

            Bliss Firm, Baby, Firm!

        </span>
  </h1>
</div> 
```

我获取此内容的代码

```
var brandName = $('#window').contents().find('.product-title font-alpha span').innerHTML; 
```

这两个每次都返回“未定义”。我已经尝试了几个小时来解决这个问题，但没有任何效果。如果有人可以提供答案，如果您还可以解释您的方法是如何工作的，我将不胜感激，因为我还是 jquery 的新手并尝试学习很多东西。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:37:18.400

您使用的是`jQuery`对象而不是`DOM`对象。innerHTML 是 DOM 对象的属性，您正在尝试将它与 jQuery 对象一起使用。

*改变*

```
var productName = $('#window').contents().find('h1.productTitle').innerHTML; 
```

*到*

```
var productName = $('#window').contents().find('h1.productTitle')[0].innerHTML; //With javascript 
```

或者

```
var productName = $('#window').contents().find('h1.productTitle').html(); //With jQuery 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T12:38:05.470

您可以使用 jQuery 的 html 方法：

```
var productName = $('#window').contents().find('h1.productTitle').html() 
```

# linux - 如何找到只对所有者具有特定权限的文件？

> ID：15247563
> 
> 赞同：47
> 
> 时间：2013-03-06T12:36:43.237
> 
> 标签：linux, bash, file, permissions, find

我只想通过特定用户的权限查找文件。例如，如果我想查找我拥有完全权限的文件。

我可能会做类似的事情：

```
find . -user $(whoami) -perm 
```

但是`-perm`如果我想忽略root和其他用户的权限，我应该放在什么后面。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-06T12:49:36.883

从...开始：

```
find /path/to/file -user user1 -perm -u+rwx 
```

这意味着：查找以 开头`/path/to/files`、由 拥有的文件`user1`，其中 group 和 other 的权限可以是任何东西（`-`在权限字符串前面），并且用户权限仅为：`rwx`

要仅搜索文件（无目录），然后添加`-type f`.

另外，尝试阅读。这有很好的例子：[查找教程](http://www.softpanorama.org/Tools/Find/index.shtml)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-05-11T11:57:01.257

> -烫发模式
> 
> 为文件设置了所有权限位模式。符号模式以这种形式被接受，这通常是想要使用它们的方式。如果使用符号模式，则必须指定 'u'、'g' 或 'o'。

```
find . -user $(whoami) -perm -007 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，

```
find . -user $(whoami) -perm -006 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，

```
find . -user $(whoami) -perm -005 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rx*，

```
find . -user $(whoami) -perm -004 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*r*，

```
find . -user $(whoami) -perm -003 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*wx*，

```
find . -user $(whoami) -perm -002 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*wx*，*w*，

```
find . -user $(whoami) -perm -001 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rx*，*wx*，*x*，

```
find . -user $(whoami) -perm -000 
```

对于指定的用户，它返回具有以下权限的文件：*rwx* , *rw* , *rx* , *wx* , *r* , *w* , *x* , *0* ,

> -烫发/模式
> 
> 为文件设置了任何权限位模式。以这种形式接受符号模式。如果使用符号模式，则必须指定 'u'、'g' 或 'o'。有关一些说明性示例，请参见示例部分。如果在 mode 中没有设置权限位，则此测试匹配任何文件（这里的想法是与 -perm -000 的行为一致）。

```
find . -user $(whoami) -perm /007 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*wx*，*r*，*w*，*x*，

```
find . -user $(whoami) -perm /006 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*wx*，*r*，*w*，

```
find . -user $(whoami) -perm /005 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*wx*，*r*，*x*，

```
find . -user $(whoami) -perm /004 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*r*，

```
find . -user $(whoami) -perm /003 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*rx*，*wx*，*w*，*x*，

```
find . -user $(whoami) -perm /002 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rw*，*wx*，*w*，

```
find . -user $(whoami) -perm /001 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*，*rx*，*wx*，*x*，

```
find . -user $(whoami) -perm /000 
```

对于指定的用户，它返回具有以下权限的文件：*rwx*、*rx*、*rw*、*wx*、*r*、*w*、*x*、*0*。

示例已经过测试。

[引文来源。](https://linux.die.net/man/1/find)

# android - 内存不足错误 - BitmapFactory.decodeStream

> ID：15247565
> 
> 赞同：0
> 
> 时间：2013-03-06T12:36:52.537
> 
> 标签：android, memory, out-of-memory

我的内存不足错误：

下面是我的代码：

```
public static Bitmap decodeSampledBitmapFromResource(InputStream inputStream,int reqWidth, int reqHeight) {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
            byte[] buffer = new byte[1024];
            int len;
            try {
            while ((len = inputStream.read(buffer)) > -1 ) {
               baos.write(buffer, 0, len);
            }
            baos.flush();
            InputStream is1 = new ByteArrayInputStream(baos.toByteArray()); 
            InputStream is2 = new ByteArrayInputStream(baos.toByteArray()); 

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inDither=false;      
        options.inPurgeable=true;                   
        options.inInputShareable=true; 
        options.inJustDecodeBounds = true;
      //  BitmapFactory.decodeResource(res, resId, options);
        BitmapFactory.decodeStream(is1,null,options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

        return BitmapFactory.decodeStream(is2,null,options); // error at this line
            } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }
    } 
```

我在这一行遇到错误

```
BitmapFactory.decodeStream(is2,null,options); 
```

我收到这个错误`Out of memory on a 3250016-byte allocation.`

我看过很多关于此的帖子，但在这种情况下仍然无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:35:58.880

请不要将此函数设为静态，静态成员存在内存问题。

第二你没有使用 BitmapFactory.decodeStream(is1,null,options); 任何地方，所以从你的代码中删除它。

也试试这个代码我用它从 sdcard 路径获取位图你可以很容易地修改它以满足你的需要，我用它来处理类似的情况，它永远不会失败。

```
public Bitmap getImage(String path) throws IOException
    {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);        
        int srcWidth = options.outWidth;
        int srcHeight = options.outHeight;
        int[] newWH =  new int[2];
        newWH[0] = srcWidth/2;
        newWH[1] = (newWH[0]*srcHeight)/srcWidth;

        int inSampleSize = 1;
        while(srcWidth / 2 >= newWH[0]){
            srcWidth /= 2;
            srcHeight /= 2;
            inSampleSize *= 2;
        }

        //      float desiredScale = (float) newWH[0] / srcWidth;
        // Decode with inSampleSize
        options.inJustDecodeBounds = false;
        options.inDither = false;
        options.inSampleSize = inSampleSize;
        options.inScaled = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        Bitmap sampledSrcBitmap = BitmapFactory.decodeFile(path,options);
        ExifInterface exif = new ExifInterface(path);
        String s=exif.getAttribute(ExifInterface.TAG_ORIENTATION);
        System.out.println("Orientation>>>>>>>>>>>>>>>>>>>>"+s);
        Matrix matrix = new Matrix();
        float rotation = rotationForImage(Add_View_Images_Activity.this, Uri.fromFile(new File(path)));
        if (rotation != 0f) {
            matrix.preRotate(rotation);
        }
        int newh = ( w * sampledSrcBitmap.getHeight() ) /sampledSrcBitmap.getWidth();
        Bitmap r=Bitmap.createScaledBitmap(sampledSrcBitmap, w, newh, true);
        Bitmap resizedBitmap = Bitmap.createBitmap(
                r, 0, 0, w, newh, matrix, true);

        return resizedBitmap;
    } 
```

# android - 警告：无法扫描 Cortex-A8 勘误表的可执行部分，因为它没有映射符号

> ID：15247569
> 
> 赞同：6
> 
> 时间：2013-03-06T12:36:58.080
> 
> 标签：android, android-ndk, cygwin, cocos2d-x

我正在尝试使用 cocos2d-x 构建游戏。在使用 cygwin 为 armeabi-v7a 编译时，我收到以下警告

```
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 89 of ./obj/local/armeabi-v7a/png.a(png.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 152 of ./obj/local/armeabi-v7a/png.a(pngget.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 88 of ./obj/local/armeabi-v7a/png.a(pngpread.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 38 of ./obj/local/armeabi-v7a/png.a(pngread.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 88 of ./obj/local/armeabi-v7a/png.a(pngread.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 78 of ./obj/local/armeabi-v7a/png.a(pngrtran.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 107 of ./obj/local/armeabi-v7a/png.a(pngrtran.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 117 of ./obj/local/armeabi-v7a/png.a(pngrtran.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 147 of ./obj/local/armeabi-v7a/png.a(pngrtran.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 56 of ./obj/local/armeabi-v7a/png.a(pngrutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 131 of ./obj/local/armeabi-v7a/png.a(pngrutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 181 of ./obj/local/armeabi-v7a/png.a(pngrutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 146 of ./obj/local/armeabi-v7a/png.a(pngset.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 82 of ./obj/local/armeabi-v7a/png.a(pngwrite.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 16 of ./obj/local/armeabi-v7a/png.a(pngwutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 101 of ./obj/local/armeabi-v7a/png.a(pngwutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 181 of ./obj/local/armeabi-v7a/png.a(pngwutil.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 23 of ./obj/local/armeabi-v7a/jpeg.a(jccoefct.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 12 of ./obj/local/armeabi-v7a/jpeg.a(jchuff.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 71 of ./obj/local/armeabi-v7a/jpeg.a(jchuff.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 16 of ./obj/local/armeabi-v7a/jpeg.a(jcmaster.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 9 of ./obj/local/armeabi-v7a/jpeg.a(jcparam.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 41 of ./obj/local/armeabi-v7a/jpeg.a(jcsample.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 35 of ./obj/local/armeabi-v7a/jpeg.a(jdatasrc.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 36 of ./obj/local/armeabi-v7a/jpeg.a(jdcolor.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 32 of ./obj/local/armeabi-v7a/jpeg.a(jdhuff.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 19 of ./obj/local/armeabi-v7a/jpeg.a(jdinput.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 4 of ./obj/local/armeabi-v7a/jpeg.a(jdmarker.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 62 of ./obj/local/armeabi-v7a/jpeg.a(jdmarker.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 20 of ./obj/local/armeabi-v7a/jpeg.a(jdmerge.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 8 of ./obj/local/armeabi-v7a/jpeg.a(jfdctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 24 of ./obj/local/armeabi-v7a/jpeg.a(jfdctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 36 of ./obj/local/armeabi-v7a/jpeg.a(jfdctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 73 of ./obj/local/armeabi-v7a/jpeg.a(jfdctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 113 of ./obj/local/armeabi-v7a/jpeg.a(jfdctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 4 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 40 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 52 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 64 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 84 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 112 of ./obj/local/armeabi-v7a/jpeg.a(jidctint.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 8 of ./obj/local/armeabi-v7a/jpeg.a(jquant2.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 12 of ./obj/local/armeabi-v7a/jpeg.a(jmemmgr.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 33 of ./obj/local/armeabi-v7a/jpeg.a(jcarith.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 33 of ./obj/local/armeabi-v7a/jpeg.a(jdarith.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 89 of ./obj/local/armeabi-v7a/xml2.a(entities.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 68 of ./obj/local/armeabi-v7a/xml2.a(encoding.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 266 of ./obj/local/armeabi-v7a/xml2.a(encoding.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 68 of ./obj/local/armeabi-v7a/xml2.a(error.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 77 of ./obj/local/armeabi-v7a/xml2.a(parserInternals.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 162 of ./obj/local/armeabi-v7a/xml2.a(parserInternals.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 75 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 190 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 280 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 320 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 340 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 375 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 460 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 490 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 510 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 515 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 560 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols.
E:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: warning: cannot scan executable section 600 of ./obj/local/armeabi-v7a/xml2.a(parser.o) for Cortex-A8 erratum because it has no mapping symbols. 
```

我正在使用 android-ndk-r8d。有谁知道是什么导致了这个警告或如何删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:56:24.767

这显然是 R8C 中引入的新链接器的已知“问题”（行为）。请参阅[此错误报告](http://code.google.com/p/android/issues/detail?id=40794)。这些警告可能是由于从链接器需要执行修复的目标文件中剥离了非全局符号。

该讨论产生了两个建议的解决方法：

1）删除你的makefile中的所有实例`strip -x`（如果有的话）。

2）构建`make STRIP=`

# wcf - WCF net.tcp 绑定客户端类型

> ID：15247575
> 
> 赞同：0
> 
> 时间：2013-03-06T12:37:27.157
> 
> 标签：wcf, client, net.tcp

我有带有 net.tcp 绑定的 WCF 服务。Visual Studio 在 Windows 中创建 CLIENT 可以连接、获取代理并且可以正常工作！

现在我很感兴趣如何从其他操作系统连接，例如：

*   iOS
*   安卓
*   苹果系统
*   Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:14:16.920

你不能用`netTcpBinding`，但你可以用`basicHttpBinding`，最好是用WebAPI。

参考链接 [http://www.asp.net/web-api](http://www.asp.net/web-api)

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:12:18.977

坦率地说，Mono 是一个开源、跨平台的 .NET。正如 Tim 所说，从非 MS 平台进行连接可能是一个很好的解决方案。

# android - 我听到断断续续的声音，有些按钮必须单击两次，最后有时它会崩溃

> ID：15247577
> 
> 赞同：0
> 
> 时间：2013-03-06T12:37:37.487
> 
> 标签：android

我正在尝试播放不同的声音，当按下不同的按钮时，请滚动到最后，因为声明很大，我希望媒体播放器在播放完成后销毁文件，所以当我点击另一个按钮时，一个全新的文件是创建并且它不重叠播放，我正在使用 oncompletionlistner 但它不起作用，我是否将它放在代码中的错误位置？

这是代码：（请跳到按钮）

```
package com.example.buttonsdemo;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.app.Activity;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener{

    //Creating Sound arrays 
    //int i=0;
    MediaPlayer mediaplayer = new  MediaPlayer();
    Button button[] = new Button [120]; 
    int viewer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //first button
            final Button button_0 = (Button) findViewById(R.id.akali);
            button_0.setOnClickListener(this);
        //Second button
            final Button button_1 = (Button) findViewById(R.id.alistar);
            button_1.setOnClickListener(this);

            final Button button_2 =(Button) findViewById(R.id.ahri);
            button_2.setOnClickListener(this);

            final Button button_3 =(Button) findViewById(R.id.amumu);
            button_3.setOnClickListener(this);

            final Button button_4 =(Button) findViewById(R.id.anivia);
            button_4.setOnClickListener(this);

            final Button button_5 =(Button) findViewById(R.id.annie);
            button_5.setOnClickListener(this);

            final Button button_6 =(Button) findViewById(R.id.ashe);
            button_6.setOnClickListener(this);

            final Button button_7 =(Button) findViewById(R.id.blitz);
            button_7.setOnClickListener(this);

            final Button button_8 =(Button) findViewById(R.id.thresh);
            button_8.setOnClickListener(this);

            final Button button_9 =(Button) findViewById(R.id.brand);
            button_9.setOnClickListener(this);

            final Button button_10 =(Button) findViewById(R.id.Caitlyn);
            button_10.setOnClickListener(this);

            final Button button_11 =(Button) findViewById(R.id.Cass);
            button_11.setOnClickListener(this);

            final Button button_12 =(Button) findViewById(R.id.chogath);
            button_12.setOnClickListener(this);

            final Button button_13 =(Button) findViewById(R.id.Corki);
            button_13.setOnClickListener(this);

            final Button button_14 =(Button) findViewById(R.id.darius);
            button_14.setOnClickListener(this);

            final Button button_15 =(Button) findViewById(R.id.diana);
            button_15.setOnClickListener(this);

            final Button button_16 =(Button) findViewById(R.id.draven);
            button_16.setOnClickListener(this);

            final Button button_17 =(Button) findViewById(R.id.elise);
            button_17.setOnClickListener(this);

            final Button button_18 =(Button) findViewById(R.id.eve);
            button_18.setOnClickListener(this);

            final Button button_19 =(Button) findViewById(R.id.ezrael);
            button_19.setOnClickListener(this); 

            final Button button_20 =(Button) findViewById(R.id.fiddle);
            button_20.setOnClickListener(this);

            final Button button_21 =(Button) findViewById(R.id.fiora);
            button_21.setOnClickListener(this);

            final Button button_22 =(Button) findViewById(R.id.fizz);
            button_22.setOnClickListener(this);

            final Button button_23 =(Button) findViewById(R.id.galio);
            button_23.setOnClickListener(this);

            final Button button_24 =(Button) findViewById(R.id.garen);
            button_24.setOnClickListener(this);

            final Button button_25 =(Button) findViewById(R.id.gp);
            button_25.setOnClickListener(this);

            final Button button_26 =(Button) findViewById(R.id.gragas);
            button_26.setOnClickListener(this);

            final Button button_27 =(Button) findViewById(R.id.graves);
            button_27.setOnClickListener(this);

            final Button button_50 =(Button) findViewById(R.id.maokai);
            button_50.setOnClickListener(this);

            final Button button_51 =(Button) findViewById(R.id.mf);
            button_51.setOnClickListener(this);

            final Button button_52 =(Button) findViewById(R.id.mordekaiser);
            button_52.setOnClickListener(this);

            final Button button_53 =(Button) findViewById(R.id.morgana);
            button_53.setOnClickListener(this);

            final Button button_54 =(Button) findViewById(R.id.mundo);
            button_54.setOnClickListener(this);

            final Button button_55 =(Button) findViewById(R.id.nami);
            button_55.setOnClickListener(this);

            final Button button_56 =(Button) findViewById(R.id.nasus);
            button_56.setOnClickListener(this);

            final Button button_57 =(Button) findViewById(R.id.nautilus);
            button_57.setOnClickListener(this);

            final Button button_58 =(Button) findViewById(R.id.nidalee);
            button_58.setOnClickListener(this);

            final Button button_59 =(Button) findViewById(R.id.nocturne);
            button_59.setOnClickListener(this);

            final Button button_60 =(Button) findViewById(R.id.nunu);
            button_60.setOnClickListener(this);

            final Button button_61 =(Button) findViewById(R.id.olaf);
            button_61.setOnClickListener(this);

            final Button button_62 =(Button) findViewById(R.id.orianna);
            button_62.setOnClickListener(this);

            final Button button_63 =(Button) findViewById(R.id.pantheon);
            button_63.setOnClickListener(this);

            final Button button_64 =(Button) findViewById(R.id.poppy);
            button_64.setOnClickListener(this);

            final Button button_65 =(Button) findViewById(R.id.quinn);
            button_65.setOnClickListener(this);

            final Button button_66 =(Button) findViewById(R.id.rammus);
            button_66.setOnClickListener(this);

            final Button button_67 =(Button) findViewById(R.id.renekton);
            button_67.setOnClickListener(this);

            final Button button_68 =(Button) findViewById(R.id.rengar);
            button_68.setOnClickListener(this);

            final Button button_69 =(Button) findViewById(R.id.riven);
            button_69.setOnClickListener(this);

            final Button button_70 =(Button) findViewById(R.id.rumble);
            button_70.setOnClickListener(this);

            final Button button_71 =(Button) findViewById(R.id.ryze);
            button_71.setOnClickListener(this);

            final Button button_72 =(Button) findViewById(R.id.sejuani);
            button_72.setOnClickListener(this);

            final Button button_73 =(Button) findViewById(R.id.shaco);
            button_73.setOnClickListener(this);

            final Button button_74 =(Button) findViewById(R.id.shen);
            button_74.setOnClickListener(this);

            final Button button_75 =(Button) findViewById(R.id.shyvana);
            button_75.setOnClickListener(this);

            final Button button_76 =(Button) findViewById(R.id.singed);
            button_76.setOnClickListener(this);

            final Button button_77 =(Button) findViewById(R.id.sion);
            button_77.setOnClickListener(this);

            final Button button_78 =(Button) findViewById(R.id.sivir);
            button_78.setOnClickListener(this);

            final Button button_79 =(Button) findViewById(R.id.skarner);
            button_79.setOnClickListener(this);

            final Button button_80 =(Button) findViewById(R.id.sona);
            button_80.setOnClickListener(this);

            final Button button_81 =(Button) findViewById(R.id.soraka);
            button_81.setOnClickListener(this);

            final Button button_82 =(Button) findViewById(R.id.swain);
            button_82.setOnClickListener(this);

            final Button button_83 =(Button) findViewById(R.id.syndra);
            button_83.setOnClickListener(this);

            final Button button_84 =(Button) findViewById(R.id.talon);
            button_84.setOnClickListener(this);

            final Button button_85 =(Button) findViewById(R.id.taric);
            button_85.setOnClickListener(this);

            final Button button_86 =(Button) findViewById(R.id.teemo);
            button_86.setOnClickListener(this);

            final Button button_87 =(Button) findViewById(R.id.tf);
            button_87.setOnClickListener(this);

            final Button button_88 =(Button) findViewById(R.id.tristana);
            button_88.setOnClickListener(this);

            final Button button_89 =(Button) findViewById(R.id.trundle);
            button_89.setOnClickListener(this);

            final Button button_90 =(Button) findViewById(R.id.tryndamere);
            button_90.setOnClickListener(this);

            final Button button_91 =(Button) findViewById(R.id.twitch);
            button_91.setOnClickListener(this);

            final Button button_92 =(Button) findViewById(R.id.udyr);
            button_92.setOnClickListener(this);

            final Button button_93 =(Button) findViewById(R.id.urgot);
            button_93.setOnClickListener(this);

            final Button button_94 =(Button) findViewById(R.id.varus);
            button_94.setOnClickListener(this);

            final Button button_95 =(Button) findViewById(R.id.vayne);
            button_95.setOnClickListener(this);

            final Button button_96 =(Button) findViewById(R.id.veigar);
            button_96.setOnClickListener(this);

            final Button button_97 =(Button) findViewById(R.id.viktor);
            button_97.setOnClickListener(this);

            final Button button_98 =(Button) findViewById(R.id.vladimir);
            button_98.setOnClickListener(this);

            final Button button_99 =(Button) findViewById(R.id.volibear);
            button_99.setOnClickListener(this);

            final Button button_100 =(Button) findViewById(R.id.warwick);
            button_100.setOnClickListener(this);

            final Button button_101 =(Button) findViewById(R.id.wukong);
            button_101.setOnClickListener(this);

            final Button button_102 =(Button) findViewById(R.id.xerath);
            button_102.setOnClickListener(this);

            final Button button_103 =(Button) findViewById(R.id.xinzhao);
            button_103.setOnClickListener(this);

            final Button button_104 =(Button) findViewById(R.id.yi);
            button_104.setOnClickListener(this);

            final Button button_105 =(Button) findViewById(R.id.yorick);
            button_105.setOnClickListener(this);

            final Button button_106 =(Button) findViewById(R.id.zed);
            button_106.setOnClickListener(this);

            final Button button_107 =(Button) findViewById(R.id.ziggs);
            button_107.setOnClickListener(this);

            final Button button_108 =(Button) findViewById(R.id.zilean);
            button_108.setOnClickListener(this);

            final Button button_109 =(Button) findViewById(R.id.zyra);
            button_109.setOnClickListener(this);

            final Button button_110 =(Button) findViewById(R.id.vi);
            button_110.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId())
        {

        case R.id.akali:
            mediaplayer = MediaPlayer.create(this, R.raw.akali);
             viewer = R.layout.alistar;
            break;

        case R.id.alistar:
            mediaplayer= MediaPlayer.create(this, R.raw.alistar);
            break;

        case R.id.ahri:
            mediaplayer= MediaPlayer.create(this,R.raw.ahri);
                     break;
            case R.id.amumu:
            mediaplayer= MediaPlayer.create(this,R.raw.amumu);
                     break;
            case R.id.anivia:
            mediaplayer= MediaPlayer.create(this,R.raw.anivia);
                     break;
            case R.id.annie:
            mediaplayer= MediaPlayer.create(this,R.raw.annie);
                     break;
            case R.id.ashe:
            mediaplayer= MediaPlayer.create(this,R.raw.ashe);
                     break;
            case R.id.blitz:
            mediaplayer= MediaPlayer.create(this,R.raw.blitzcrank);
                     break;
            case R.id.brand:
            mediaplayer= MediaPlayer.create(this,R.raw.brand);
                     break;
            case R.id.Caitlyn:
            mediaplayer= MediaPlayer.create(this,R.raw.caitlyn);
                     break;
            case R.id.Cass:
            mediaplayer= MediaPlayer.create(this,R.raw.cassiopeia);
                     break;
            case R.id.chogath:
            mediaplayer= MediaPlayer.create(this,R.raw.chogath);
                     break;
            case R.id.Corki:
            mediaplayer= MediaPlayer.create(this,R.raw.corki);
                     break;
            case R.id.darius:
            mediaplayer= MediaPlayer.create(this,R.raw.darius);
                     break;
            case R.id.diana:
            mediaplayer= MediaPlayer.create(this,R.raw.diana);
                     break;
            case R.id.draven:
            mediaplayer= MediaPlayer.create(this,R.raw.draven);
                     break;
            case R.id.elise:
            mediaplayer= MediaPlayer.create(this,R.raw.elise);
                     break;
            case R.id.eve:
            mediaplayer= MediaPlayer.create(this,R.raw.evelynn);
                     break;
            case R.id.ezrael:
            mediaplayer= MediaPlayer.create(this,R.raw.ezreal);
                     break;
            case R.id.fiddle:
            mediaplayer= MediaPlayer.create(this,R.raw.fiddlesticks);
                     break;
            case R.id.fiora:
            mediaplayer= MediaPlayer.create(this,R.raw.fiora);
                     break;
            case R.id.fizz:
            mediaplayer= MediaPlayer.create(this,R.raw.fizz);
                     break;
            case R.id.galio:
            mediaplayer= MediaPlayer.create(this,R.raw.galio);
                     break;
            case R.id.garen:
            mediaplayer= MediaPlayer.create(this,R.raw.garen);
                     break;
            case R.id.gp:
            mediaplayer= MediaPlayer.create(this,R.raw.gangplank);
                     break;
            case R.id.gragas:
            mediaplayer= MediaPlayer.create(this,R.raw.gragas);
                     break;
            case R.id.graves:
            mediaplayer= MediaPlayer.create(this,R.raw.graves);
                     break;
            case R.id.hecarim:
            mediaplayer= MediaPlayer.create(this,R.raw.hecarim);
                     break;
            case R.id.heimer:
            mediaplayer= MediaPlayer.create(this,R.raw.heimerdinger);
                     break;
            case R.id.thresh:
            mediaplayer= MediaPlayer.create(this,R.raw.thresh);
                     break;
            case R.id.irelia :
                mediaplayer= MediaPlayer.create(this,R.raw. irielia);
                        break;
                case R.id.janna:
                mediaplayer= MediaPlayer.create(this,R.raw. janna);
                        break;
                case R.id.jarvan :
                mediaplayer= MediaPlayer.create(this,R.raw. jarvan);
                        break;
                case R.id.jax :
                mediaplayer= MediaPlayer.create(this,R.raw. jax);
                        break;
                case R.id.jayce :
                mediaplayer= MediaPlayer.create(this,R.raw.jayce );
                        break;
                case R.id.karma :
                mediaplayer= MediaPlayer.create(this,R.raw.karma );
                        break;
                case R.id.karthus :
                mediaplayer= MediaPlayer.create(this,R.raw.karthus );
                        break;
                case R.id. kassadin:
                mediaplayer= MediaPlayer.create(this,R.raw.kassadin );
                        break;
                case R.id.katarina :
                mediaplayer= MediaPlayer.create(this,R.raw. katarina);
                        break;
                case R.id. kayle:
                mediaplayer= MediaPlayer.create(this,R.raw. kayle);
                        break;
                case R.id.kennen :
                mediaplayer= MediaPlayer.create(this,R.raw. kennen);
                        break;
                case R.id. khazix:
                mediaplayer= MediaPlayer.create(this,R.raw. khazix);
                        break;
                case R.id.kog :
                mediaplayer= MediaPlayer.create(this,R.raw.kogmaw );
                        break;
                case R.id.leblanc :
                mediaplayer= MediaPlayer.create(this,R.raw. leblanc);
                        break;
                case R.id.leesin :
                mediaplayer= MediaPlayer.create(this,R.raw.leesin );
                        break;
                case R.id. leona:
                mediaplayer= MediaPlayer.create(this,R.raw. leona);
                        break;
                case R.id. lulu:
                mediaplayer= MediaPlayer.create(this,R.raw.lulu );
                        break;
                case R.id.lux :
                mediaplayer= MediaPlayer.create(this,R.raw. lux);
                        break;
                case R.id.malphite :
                mediaplayer= MediaPlayer.create(this,R.raw.malphite );
                        break;
                case R.id. malzahar:
                mediaplayer= MediaPlayer.create(this,R.raw. malzahar);
                        break;
                case R.id.maokai :
                mediaplayer= MediaPlayer.create(this,R.raw.mokai );
                        break;
                case R.id.mf :
                mediaplayer= MediaPlayer.create(this,R.raw.missfortune );
                        break;
                case R.id. mordekaiser:
                mediaplayer= MediaPlayer.create(this,R.raw. mordekaiser);
                        break;
                case R.id.morgana :
                mediaplayer= MediaPlayer.create(this,R.raw.morgana );
                        break;
                case R.id.mundo :
                mediaplayer= MediaPlayer.create(this,R.raw. drmundo);
                        break;
                case R.id.nami :
                mediaplayer= MediaPlayer.create(this,R.raw. nami);
                        break;
                case R.id.nasus :
                mediaplayer= MediaPlayer.create(this,R.raw. nasus);
                        break;
                case R.id. nautilus:
                mediaplayer= MediaPlayer.create(this,R.raw.nautilus );
                        break;
                case R.id. nidalee:
                mediaplayer= MediaPlayer.create(this,R.raw. nidalee);
                        break;
                case R.id.nocturne :
                mediaplayer= MediaPlayer.create(this,R.raw. nocturne);
                        break;
                case R.id.nunu :
                mediaplayer= MediaPlayer.create(this,R.raw. nunu);
                        break;
                case R.id. olaf:
                mediaplayer= MediaPlayer.create(this,R.raw.olaf );
                        break;
                case R.id.orianna :
                mediaplayer= MediaPlayer.create(this,R.raw. orianna);
                        break;
                case R.id.pantheon :
                mediaplayer= MediaPlayer.create(this,R.raw. pantheon);
                        break;
                case R.id. poppy:
                mediaplayer= MediaPlayer.create(this,R.raw.poppy );
                        break;
                case R.id.quinn :
                mediaplayer= MediaPlayer.create(this,R.raw.quinn );
                        break;
                case R.id.rammus :
                mediaplayer= MediaPlayer.create(this,R.raw. rammus);
                        break;
                case R.id.renekton :
                mediaplayer= MediaPlayer.create(this,R.raw. renekton);
                        break;
                case R.id. rengar:
                mediaplayer= MediaPlayer.create(this,R.raw. rengar);
                        break;
                case R.id. riven:
                mediaplayer= MediaPlayer.create(this,R.raw. riven);
                        break;
                case R.id.rumble:
                mediaplayer= MediaPlayer.create(this,R.raw.rumble );
                        break;
                case R.id.ryze :
                mediaplayer= MediaPlayer.create(this,R.raw.ryze );
                        break;
                case R.id.sejuani :
                mediaplayer= MediaPlayer.create(this,R.raw. sejuani);
                        break;
                case R.id.shaco :
                mediaplayer= MediaPlayer.create(this,R.raw. shaco);
                        break;
                case R.id.shen :
                mediaplayer= MediaPlayer.create(this,R.raw. shen);
                        break;
                case R.id.shyvana:
                mediaplayer= MediaPlayer.create(this,R.raw. shyvana);
                        break;
                case R.id. singed:
                mediaplayer= MediaPlayer.create(this,R.raw.singed );
                        break;
                case R.id. sion:
                mediaplayer= MediaPlayer.create(this,R.raw.sion );
                        break;
                case R.id. sivir:
                mediaplayer= MediaPlayer.create(this,R.raw. sivir);
                        break;
                case R.id. skarner:
                mediaplayer= MediaPlayer.create(this,R.raw. skarner);
                        break;
                case R.id.sona :
                mediaplayer= MediaPlayer.create(this,R.raw. sona);
                        break;
                case R.id. soraka:
                mediaplayer= MediaPlayer.create(this,R.raw.soraka );
                        break;
                case R.id.swain :
                mediaplayer= MediaPlayer.create(this,R.raw.swain );
                        break;
                case R.id.syndra :
                mediaplayer= MediaPlayer.create(this,R.raw.syndra );
                        break;
                case R.id. talon:
                mediaplayer= MediaPlayer.create(this,R.raw.talon );
                        break;
                case R.id.taric :
                mediaplayer= MediaPlayer.create(this,R.raw.taric );
                        break;
                case R.id.teemo :
                mediaplayer= MediaPlayer.create(this,R.raw.teemo );
                        break;
                case R.id. tf:
                mediaplayer= MediaPlayer.create(this,R.raw.twistedfate );
                        break;
                case R.id. tristana:
                mediaplayer= MediaPlayer.create(this,R.raw. tristana);
                        break;
                case R.id.trundle :
                mediaplayer= MediaPlayer.create(this,R.raw.trundle );
                        break;
                case R.id.tryndamere:
                mediaplayer= MediaPlayer.create(this,R.raw.tryndamere);
                        break;
                case R.id.twitch :
                mediaplayer= MediaPlayer.create(this,R.raw. twitch);
                        break;
                case R.id. udyr:
                mediaplayer= MediaPlayer.create(this,R.raw.udyr );
                        break;
                case R.id. urgot:
                mediaplayer= MediaPlayer.create(this,R.raw.urgot );
                        break;
                case R.id. varus:
                mediaplayer= MediaPlayer.create(this,R.raw. varus);
                        break;
                case R.id.vayne :
                mediaplayer= MediaPlayer.create(this,R.raw. vayne);
                        break;
                case R.id.veigar :
                mediaplayer= MediaPlayer.create(this,R.raw.veigar );
                        break;
                case R.id.viktor :
                mediaplayer= MediaPlayer.create(this,R.raw. viktor);
                        break;
                case R.id.vladimir :
                mediaplayer= MediaPlayer.create(this,R.raw.vladimir );
                        break;
                case R.id.volibear :
                mediaplayer= MediaPlayer.create(this,R.raw.volibear);
                        break;
                case R.id.warwick :
                mediaplayer= MediaPlayer.create(this,R.raw.warwick );
                        break;
                case R.id.wukong :
                mediaplayer= MediaPlayer.create(this,R.raw. monkeyking);
                        break;
                case R.id.xerath :
                mediaplayer= MediaPlayer.create(this,R.raw.xerath );
                        break;
                case R.id.xinzhao :
                mediaplayer= MediaPlayer.create(this,R.raw. xinzhao);
                        break;
                case R.id.yi :
                mediaplayer= MediaPlayer.create(this,R.raw. masteryi);
                        break;
                case R.id.yorick :
                mediaplayer= MediaPlayer.create(this,R.raw.yorick );
                        break;
                case R.id.zed :
                mediaplayer= MediaPlayer.create(this,R.raw.zed );
                        break;
                case R.id.ziggs :
                mediaplayer= MediaPlayer.create(this,R.raw. ziggs);
                        break;
                case R.id.zilean :
                mediaplayer= MediaPlayer.create(this,R.raw.zilean );
                        break;
                case R.id.zyra :
                mediaplayer= MediaPlayer.create(this,R.raw.zyra );
                        break;
                case R.id.vi :
                 mediaplayer= MediaPlayer.create(this,R.raw.vi );
                        break;
        }

        mediaplayer.start();
        //setContentView(viewer);
        mediaplayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {

                mediaplayer.release();

                }
            });
        }

      @Override
      protected void onDestroy() {
          mediaplayer.release();
          super.onDestroy();
      }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:40:38.857

*就在你按下另一首歌曲之前

像这儿

```
 case R.id.zilean :
if(mediaplayer!=null)
 mediaplayer.release();
                mediaplayer= MediaPlayer.create(this,R.raw.zilean );
                        break; 
```

您编辑的代码

```
 @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId())
        {

            if(mediaplayer!=null)
            mediaplayer.release(); //------Just release it before any button ispressed.

        case R.id.akali:
            mediaplayer = MediaPlayer.create(this, R.raw.akali);
             viewer = R.layout.alistar;
            break;

        case R.id.alistar:
            mediaplayer= MediaPlayer.create(this, R.raw.alistar);
            break;

        case R.id.ahri:
            mediaplayer= MediaPlayer.create(this,R.raw.ahri);
                     break;
            case R.id.amumu:
            mediaplayer= MediaPlayer.create(this,R.raw.amumu);
                     break;
            case R.id.anivia:
            mediaplayer= MediaPlayer.create(this,R.raw.anivia);
                     break;
            case R.id.annie:
            mediaplayer= MediaPlayer.create(this,R.raw.annie);
                     break;
            case R.id.ashe:
            mediaplayer= MediaPlayer.create(this,R.raw.ashe);
                     break;
            case R.id.blitz:
            mediaplayer= MediaPlayer.create(this,R.raw.blitzcrank);
                     break;
            case R.id.brand:
            mediaplayer= MediaPlayer.create(this,R.raw.brand);
                     break;
            case R.id.Caitlyn:
            mediaplayer= MediaPlayer.create(this,R.raw.caitlyn);
                     break;
            case R.id.Cass:
            mediaplayer= MediaPlayer.create(this,R.raw.cassiopeia);
                     break;
            case R.id.chogath:
            mediaplayer= MediaPlayer.create(this,R.raw.chogath);
                     break;
            case R.id.Corki:
            mediaplayer= MediaPlayer.create(this,R.raw.corki);
                     break;
            case R.id.darius:
            mediaplayer= MediaPlayer.create(this,R.raw.darius);
                     break;
            case R.id.diana:
            mediaplayer= MediaPlayer.create(this,R.raw.diana);
                     break;
            case R.id.draven:
            mediaplayer= MediaPlayer.create(this,R.raw.draven);
                     break;
            case R.id.elise:
            mediaplayer= MediaPlayer.create(this,R.raw.elise);
                     break;
            case R.id.eve:
            mediaplayer= MediaPlayer.create(this,R.raw.evelynn);
                     break;
            case R.id.ezrael:
            mediaplayer= MediaPlayer.create(this,R.raw.ezreal);
                     break;
            case R.id.fiddle:
            mediaplayer= MediaPlayer.create(this,R.raw.fiddlesticks);
                     break;
            case R.id.fiora:
            mediaplayer= MediaPlayer.create(this,R.raw.fiora);
                     break;
            case R.id.fizz:
            mediaplayer= MediaPlayer.create(this,R.raw.fizz);
                     break;
            case R.id.galio:
            mediaplayer= MediaPlayer.create(this,R.raw.galio);
                     break;
            case R.id.garen:
            mediaplayer= MediaPlayer.create(this,R.raw.garen);
                     break;
            case R.id.gp:
            mediaplayer= MediaPlayer.create(this,R.raw.gangplank);
                     break;
            case R.id.gragas:
            mediaplayer= MediaPlayer.create(this,R.raw.gragas);
                     break;
            case R.id.graves:
            mediaplayer= MediaPlayer.create(this,R.raw.graves);
                     break;
            case R.id.hecarim:
            mediaplayer= MediaPlayer.create(this,R.raw.hecarim);
                     break;
            case R.id.heimer:
            mediaplayer= MediaPlayer.create(this,R.raw.heimerdinger);
                     break;
            case R.id.thresh:
            mediaplayer= MediaPlayer.create(this,R.raw.thresh);
                     break;
            case R.id.irelia :
                mediaplayer= MediaPlayer.create(this,R.raw. irielia);
                        break;
                case R.id.janna:
                mediaplayer= MediaPlayer.create(this,R.raw. janna);
                        break;
                case R.id.jarvan :
                mediaplayer= MediaPlayer.create(this,R.raw. jarvan);
                        break;
                case R.id.jax :
                mediaplayer= MediaPlayer.create(this,R.raw. jax);
                        break;
                case R.id.jayce :
                mediaplayer= MediaPlayer.create(this,R.raw.jayce );
                        break;
                case R.id.karma :
                mediaplayer= MediaPlayer.create(this,R.raw.karma );
                        break;
                case R.id.karthus :
                mediaplayer= MediaPlayer.create(this,R.raw.karthus );
                        break;
                case R.id. kassadin:
                mediaplayer= MediaPlayer.create(this,R.raw.kassadin );
                        break;
                case R.id.katarina :
                mediaplayer= MediaPlayer.create(this,R.raw. katarina);
                        break;
                case R.id. kayle:
                mediaplayer= MediaPlayer.create(this,R.raw. kayle);
                        break;
                case R.id.kennen :
                mediaplayer= MediaPlayer.create(this,R.raw. kennen);
                        break;
                case R.id. khazix:
                mediaplayer= MediaPlayer.create(this,R.raw. khazix);
                        break;
                case R.id.kog :
                mediaplayer= MediaPlayer.create(this,R.raw.kogmaw );
                        break;
                case R.id.leblanc :
                mediaplayer= MediaPlayer.create(this,R.raw. leblanc);
                        break;
                case R.id.leesin :
                mediaplayer= MediaPlayer.create(this,R.raw.leesin );
                        break;
                case R.id. leona:
                mediaplayer= MediaPlayer.create(this,R.raw. leona);
                        break;
                case R.id. lulu:
                mediaplayer= MediaPlayer.create(this,R.raw.lulu );
                        break;
                case R.id.lux :
                mediaplayer= MediaPlayer.create(this,R.raw. lux);
                        break;
                case R.id.malphite :
                mediaplayer= MediaPlayer.create(this,R.raw.malphite );
                        break;
                case R.id. malzahar:
                mediaplayer= MediaPlayer.create(this,R.raw. malzahar);
                        break;
                case R.id.maokai :
                mediaplayer= MediaPlayer.create(this,R.raw.mokai );
                        break;
                case R.id.mf :
                mediaplayer= MediaPlayer.create(this,R.raw.missfortune );
                        break;
                case R.id. mordekaiser:
                mediaplayer= MediaPlayer.create(this,R.raw. mordekaiser);
                        break;
                case R.id.morgana :
                mediaplayer= MediaPlayer.create(this,R.raw.morgana );
                        break;
                case R.id.mundo :
                mediaplayer= MediaPlayer.create(this,R.raw. drmundo);
                        break;
                case R.id.nami :
                mediaplayer= MediaPlayer.create(this,R.raw. nami);
                        break;
                case R.id.nasus :
                mediaplayer= MediaPlayer.create(this,R.raw. nasus);
                        break;
                case R.id. nautilus:
                mediaplayer= MediaPlayer.create(this,R.raw.nautilus );
                        break;
                case R.id. nidalee:
                mediaplayer= MediaPlayer.create(this,R.raw. nidalee);
                        break;
                case R.id.nocturne :
                mediaplayer= MediaPlayer.create(this,R.raw. nocturne);
                        break;
                case R.id.nunu :
                mediaplayer= MediaPlayer.create(this,R.raw. nunu);
                        break;
                case R.id. olaf:
                mediaplayer= MediaPlayer.create(this,R.raw.olaf );
                        break;
                case R.id.orianna :
                mediaplayer= MediaPlayer.create(this,R.raw. orianna);
                        break;
                case R.id.pantheon :
                mediaplayer= MediaPlayer.create(this,R.raw. pantheon);
                        break;
                case R.id. poppy:
                mediaplayer= MediaPlayer.create(this,R.raw.poppy );
                        break;
                case R.id.quinn :
                mediaplayer= MediaPlayer.create(this,R.raw.quinn );
                        break;
                case R.id.rammus :
                mediaplayer= MediaPlayer.create(this,R.raw. rammus);
                        break;
                case R.id.renekton :
                mediaplayer= MediaPlayer.create(this,R.raw. renekton);
                        break;
                case R.id. rengar:
                mediaplayer= MediaPlayer.create(this,R.raw. rengar);
                        break;
                case R.id. riven:
                mediaplayer= MediaPlayer.create(this,R.raw. riven);
                        break;
                case R.id.rumble:
                mediaplayer= MediaPlayer.create(this,R.raw.rumble );
                        break;
                case R.id.ryze :
                mediaplayer= MediaPlayer.create(this,R.raw.ryze );
                        break;
                case R.id.sejuani :
                mediaplayer= MediaPlayer.create(this,R.raw. sejuani);
                        break;
                case R.id.shaco :
                mediaplayer= MediaPlayer.create(this,R.raw. shaco);
                        break;
                case R.id.shen :
                mediaplayer= MediaPlayer.create(this,R.raw. shen);
                        break;
                case R.id.shyvana:
                mediaplayer= MediaPlayer.create(this,R.raw. shyvana);
                        break;
                case R.id. singed:
                mediaplayer= MediaPlayer.create(this,R.raw.singed );
                        break;
                case R.id. sion:
                mediaplayer= MediaPlayer.create(this,R.raw.sion );
                        break;
                case R.id. sivir:
                mediaplayer= MediaPlayer.create(this,R.raw. sivir);
                        break;
                case R.id. skarner:
                mediaplayer= MediaPlayer.create(this,R.raw. skarner);
                        break;
                case R.id.sona :
                mediaplayer= MediaPlayer.create(this,R.raw. sona);
                        break;
                case R.id. soraka:
                mediaplayer= MediaPlayer.create(this,R.raw.soraka );
                        break;
                case R.id.swain :
                mediaplayer= MediaPlayer.create(this,R.raw.swain );
                        break;
                case R.id.syndra :
                mediaplayer= MediaPlayer.create(this,R.raw.syndra );
                        break;
                case R.id. talon:
                mediaplayer= MediaPlayer.create(this,R.raw.talon );
                        break;
                case R.id.taric :
                mediaplayer= MediaPlayer.create(this,R.raw.taric );
                        break;
                case R.id.teemo :
                mediaplayer= MediaPlayer.create(this,R.raw.teemo );
                        break;
                case R.id. tf:
                mediaplayer= MediaPlayer.create(this,R.raw.twistedfate );
                        break;
                case R.id. tristana:
                mediaplayer= MediaPlayer.create(this,R.raw. tristana);
                        break;
                case R.id.trundle :
                mediaplayer= MediaPlayer.create(this,R.raw.trundle );
                        break;
                case R.id.tryndamere:
                mediaplayer= MediaPlayer.create(this,R.raw.tryndamere);
                        break;
                case R.id.twitch :
                mediaplayer= MediaPlayer.create(this,R.raw. twitch);
                        break;
                case R.id. udyr:
                mediaplayer= MediaPlayer.create(this,R.raw.udyr );
                        break;
                case R.id. urgot:
                mediaplayer= MediaPlayer.create(this,R.raw.urgot );
                        break;
                case R.id. varus:
                mediaplayer= MediaPlayer.create(this,R.raw. varus);
                        break;
                case R.id.vayne :
                mediaplayer= MediaPlayer.create(this,R.raw. vayne);
                        break;
                case R.id.veigar :
                mediaplayer= MediaPlayer.create(this,R.raw.veigar );
                        break;
                case R.id.viktor :
                mediaplayer= MediaPlayer.create(this,R.raw. viktor);
                        break;
                case R.id.vladimir :
                mediaplayer= MediaPlayer.create(this,R.raw.vladimir );
                        break;
                case R.id.volibear :
                mediaplayer= MediaPlayer.create(this,R.raw.volibear);
                        break;
                case R.id.warwick :
                mediaplayer= MediaPlayer.create(this,R.raw.warwick );
                        break;
                case R.id.wukong :
                mediaplayer= MediaPlayer.create(this,R.raw. monkeyking);
                        break;
                case R.id.xerath :
                mediaplayer= MediaPlayer.create(this,R.raw.xerath );
                        break;
                case R.id.xinzhao :
                mediaplayer= MediaPlayer.create(this,R.raw. xinzhao);
                        break;
                case R.id.yi :
                mediaplayer= MediaPlayer.create(this,R.raw. masteryi);
                        break;
                case R.id.yorick :
                mediaplayer= MediaPlayer.create(this,R.raw.yorick );
                        break;
                case R.id.zed :
                mediaplayer= MediaPlayer.create(this,R.raw.zed );
                        break;
                case R.id.ziggs :
                mediaplayer= MediaPlayer.create(this,R.raw. ziggs);
                        break;
                case R.id.zilean :
                mediaplayer= MediaPlayer.create(this,R.raw.zilean );
                        break;
                case R.id.zyra :
                mediaplayer= MediaPlayer.create(this,R.raw.zyra );
                        break;
                case R.id.vi :
                 mediaplayer= MediaPlayer.create(this,R.raw.vi );
                        break;
        }

        mediaplayer.start();
        //setContentView(viewer);
        mediaplayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {

                mediaplayer.release();

                }
            });
        } 
```

# php - 如何使用 PHP 在存储在 MySQL 数据库中的数组中搜索 ID

> ID：15247593
> 
> 赞同：0
> 
> 时间：2013-03-06T12:38:11.850
> 
> 标签：php, mysql, arrays

所以我有一个存储在数据库（序列化）中的数组，其中包含来自用户的 ID。

```
array1 = serialize(array(1,2,3,4,5)); 
```

假设我们在数据库中有 100 次不同的 ID 和数组大小（所以 100 条记录）

```
array2 = serialize(array(6,2,8,1,3,10,12,60));
... 
```

数组存储在数据库中，带有表名项目和“查找”行。

```
table 'items': (id,itemId,lookup) 
```

现在我想搜索那些匹配一个 ID（例如 ID=2）的序列化数组。对于那些匹配的，我想要 itemId。

我可以尝试使用“like %2%”的 SQL 查询，但这也将匹配 %22% 等。我可以选择所有内容并在每个数组中执行一些 foreach() 循环，但这听起来非常耗时。

任何想法，想法是如何做到这一点的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:52:31.177

我不确定这是否有用，但您是否尝试过使用

```
if(in_array("yourObject",$yourArray)){ 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:02:21.923

使用`like`运算符。

如您所写，您可以使用“like %2%”，但也可以选择“22”。关键是也要在字符串中插入分隔符。

考虑您的序列化字符串如下所示：

```
";1;2;3;4;5;" 
```

例如，您可以使用 this搜索**2 的外观**`column LIKE "%;2;%"`，这将**不匹配 22**。不要忘记在序列化字符串的末尾和开头输入分隔符。

**注意**：对于长序列化字符串，这种技术可能会很慢。如果您希望您的表有很多行，您应该考虑另一种方案。[搜索多对多](https://stackoverflow.com/questions/349559/sql-how-to-search-a-many-to-many-relationship)关系可能会更好

# c# - 关于在 WPF 中刷新 UI 的困惑

> ID：15247594
> 
> 赞同：5
> 
> 时间：2013-03-06T12:38:13.803
> 
> 标签：c#, wpf, refresh, dispatcher

我听说这会刷新 UI，但为什么呢？`Dispatcher`调用这个空动作，就是没有调用`InvalidateMeasure()`会触发 UI 在动作内部重新测量、重新排列和重新渲染。`update/refresh`UI的度量和安排流程在哪里？

```
private static Action EmptyDelegate = delegate() { };

public static void Refresh(UIElement uiElement)
{
   uiElement.Dispatcher.Invoke(DispatcherPriority.Render, EmptyDelegate);
} 
```

有什么帮助吗？

`EDITED:`我想知道为什么渲染 UI 的细节。像这样的答案`well that triggers ui update`对我没有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:33:40.380

Microsoft 建议使用稍微不同的方式来执行您的代码使用[PushFrame](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.pushframe.aspx)所做的事情。

该代码与渲染无关。它的作用类似于[`DoEvents`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.pushframe.aspx)VB6 和 WinForms 中已知的方法。 `DoEvents`在抽取 Windows 消息队列并处理队列中的消息时暂停程序。这包括任何呈现消息，例如[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)和[`WM_NCPAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145212%28v=vs.85%29.aspx)。

该代码指示 Dispatcher 停止当前线程并抽取其队列并处理具有 DispatcherPriority.Render 或更高优先级的所有消息。如果队列中有任何待处理的渲染消息，例如，如果[`InvalidateRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002%28v=vs.85%29.aspx)框架已在某处调用，则将处理这些消息并重新渲染 UI。

`DoEvents`一直被认为是代码异味，因为它绕过了消息队列。如果你想要一个响应式的用户界面，你应该使用工作线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:29:21.797

由于调用的优先级，这可用于强制 WPF 更新 UI。由于此调用同步使用 Dispatcher，因此任何已经以相同或更高优先级排队的任务都`DispatcherPriority.Render`将在运行您提供的委托之前运行。

这是[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)的潜在值列表，它解释了调度程序运行的订单任务。

# php - 寻找一种在 PHP 中使用“Sortable”函数的方法

> ID：15247595
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:38:14.817
> 
> 标签：php, jquery, jquery-ui

我有一个图像文件夹，我希望用 php 将其加载到可以使用 Sortable jQueryUI 函数移动的图像列表中。我对 php 进行了基本测试，所以我知道 php 没有失败，但我的代码可能由于其他原因而出错，而且我缺乏使用 jQueryUI 的经验。以下是我希望使用的代码的重要部分。

```
<script type="text/javascript" src="jquery-1.9.1.js"></script>
<script type="text/javascript" src="jquery-ui-1.10.1.custom.min.js"></script>
<script language="javascript" type="text/javascript" defer>

jQuery(document).ready(function( $ ) {
$( "#item-wrap" ).sortable();
$( "#item-wrap" ).disableSelection();
});
</script>

<style>
#item-wrap { list-style-type: none; margin: 0; padding: 0; width: 450px; }
#item-wrap li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 300px;
height: 300px; font-size: 4em; text-align: center; }
</style>

<ul id="item-wrap">
<?php
  $imagesDir = '/uploads/gallery1/';
  $images = glob($imagesDir . '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
  $imglist = json_encode($images);
  for ($i = 1; $i <= count($imglist); $i++) {
?><li><?php
echo $array[$i];
?></li><?php
  }
</ul>
?> 
```

图像无法显示，并且没有创建列表。非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:43:02.133

尝试将您的 PHP 代码块替换为

```
<?php
    $imagesDir = dirname(__FILE__) . '/uploads/gallery1/';
    $images = glob($imagesDir . '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
    for ($i = 0; $i < count($images); $i++) {
?><li><?php
    echo $images[$i];
?></li><?php 
```

请具体说明问题所在 - 如果是错误 - 请将消息附加到问题中

# performance - Lucene 术语过滤器加快第一次查询，减慢后续查询

> ID：15247602
> 
> 赞同：0
> 
> 时间：2013-03-06T12:38:36.747
> 
> 标签：performance, filter, lucene

我正在使用 Lucene 3.6.1

我最初有一个查询，对于给定的“真爱”输入，我会创建一个这样的查询：

```
+(+content:true +content:love) 
+(title:"true love"^3.0 ((title:true title:love)^2.0) 
(subTitle:true subTitle:love)) 
title_starts_with:true love*^3.0 
+showToPublic:y 
```

查询时间为：

*   应用程序启动后的第一次查询（无预热）：250-300 毫秒

*   后续查询：35-40 ms

阅读[Lucene 的搜索速度提示页面](http://wiki.apache.org/lucene-java/ImproveSearchingSpeed)，我发现他们建议尽可能使用过滤器：

*考虑使用过滤器。使用缓存位集过滤器而不是使用查询子句将结果限制到索引的一部分会更有效。对于匹配大量索引的大量文档的限制尤其如此。过滤器通常用于将结果限制为一个类别，但在许多情况下可用于替换任何查询子句。使用查询和过滤器的一个区别是查询对分数有影响，而过滤器没有。*

因此，我删除了 `+showToPublic:y`查询的一部分，并添加了一个[TermsFilter](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/contrib-queries/org/apache/lucene/search/TermsFilter.html)，如下所示：

```
TermsFilter showToPublicFilter =  new TermsFilter();            
showToPublicFilter.addTerm(new Term("showToPublic","y"));
indexSearcher.search(booleanQuery, showToPublicFilter, collector); 
```

我注意到的是，现在第一个查询要快得多，但后续查询比以前慢很多：

*   应用程序启动后的第一次查询（无预热）：200-220 毫秒

*   后续查询：190-200 ms

我觉得这很奇怪，因为 TermsFilter 的 JavaDoc 说它非常适合我目前的情况：

*为与添加到此类的任何术语匹配的文档构造一个过滤器。与 RangeFilter 不同，它可用于过滤不一定按顺序排列的多个术语。一个示例可能是来自数据库查询结果的主键集合，或者可能是最终用户选择的“类别”标签。作为过滤器，这比等效查询（具有许多“应该”术语查询的 BooleanQuery）快得多*

我也尝试过使用[FieldValueFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/FieldValueFilter.html)（因为我的“showToPublic”字段有“y”或没有值）：

```
FieldValueFilter showToPublicFilter =  new FieldValueFilter("showToPublic", false);  
indexSearcher.search(booleanQuery, showToPublicFilter, collector); 
```

但是有了这个，我根本没有得到任何结果（当然更快）。

所以我的问题是：

*   这是正常行为吗，即不能保证过滤器总是比等效的布尔查询快？
*   是否还有其他一些我应该使用的过滤器（我已经浏览了所有这些过滤器，对我来说，似乎 TermsFilter 和/或 FieldValueFilter 是唯一适用于这种情况的过滤器）？
*   为什么 FieldValueFilter 在这里不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:28:22.403

您可以尝试使用[CachingWrapperFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/CachingWrapperFilter.html)包装另一个过滤器的结果并将其缓存。重复使用它。

每次使用 FilteredQuery 进行搜索时都会调用底层的 Filter.getDocIdSet()，因此如果要重复使用查询并且过滤结果不改变，建议使用缓存过滤器。

如果您使用缓存机制，您可能会发现性能有所提高。

# java - IntelliJ/Android ->“java：需要常量表达式”案例 R.id.viewId

> ID：15247606
> 
> 赞同：12
> 
> 时间：2013-03-06T12:38:58.753
> 
> 标签：java, android, intellij-idea

当我尝试在 IntelliJ 中构建我的 Android 项目时，我在每个 switch 语句上都会遇到错误，这些情况使用 R.java 中的 Id。

例子：

```
switch (item.getItemId()) {

  case android.R.id.home:
    NavUtils.navigateUpTo(this, DashboardActivity.upIntent(this));
    return true;

  case R.id.orders_options_add:
    handleAddItem();
    return true;

  case R.id.orders_options_reorder:
    handleReorder();
    finish();
    return true;
} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T12:45:02.427

自 ADT 版本 14 以来，资源 ID 在库项目中不是常量，因此您不能在 switch 语句中使用它们。改用就好`if () {} else if () {} ...`了。

[您可以在此处](http://tools.android.com/tips/non-constant-fields)找到更详细的信息。

# hibernate - 如何在长时间运行的 Seam 对话中避免一级缓存

> ID：15247607
> 
> 赞同：1
> 
> 时间：2013-03-06T12:39:06.480
> 
> 标签：hibernate, caching, jpa, seam

我在长时间运行的对话中遇到了一级缓存问题（使用 JPA/Hibernate 和 Seam 2.2）。

我们有一个使用长时间运行对话的搜索页面（需要一些 ajax 交互、模态编辑等）。

问题是当另一个用户更改实体时，当用户再次单击搜索按钮时，不会显示更改。在这里看到[类似的问题](https://community.jboss.org/thread/189565)

因此，在长时间运行的会话中，实体从一级缓存加载，除非您手动调用每个实体上的刷新，否则不会加载其他事务中所做的更改。

我尝试使用 CacheMode.IGNORE 或 CacheMode.REFRESH （通过休眠查询），但这并不能解决问题，因为它只处理二级缓存。

我可以看到选择查询正在发送到数据库，但似乎 Hibernate 仍在使用一级缓存中的缓存对象。

在进行新搜索之前，我曾尝试从之前的搜索中驱逐实体，这很有效，但是后来我遇到了有线问题，因为会话中仍有对象指向现在被驱逐的实体。你必须添加

```
@org.hibernate.annotations.Cascade({org.hibernate.annotations.CascadeType.EVICT,org.hibernate.annotations.CascadeType.REFRESH}) 
```

关于您的实体关系，但很容易错过。

您也可以清除空洞会话，但这会导致 LazyInitializationErrors。

没有办法告诉 JPA/Hibernate 不要在查询中使用第一级缓存吗？

**编辑：**有一个[很好的答案](https://stackoverflow.com/questions/15089177/force-refresh-of-collection-jpa-entitymanager?rq=1)为什么它不起作用但刷新每个实体的建议并不理想。我以前用过这个，但问题是，例如，对于一个包含 200 个条目的列表，您会为数据库生成 200 个单独的负载，这使得它非常慢。在这 200 个条目中，只有一两个可能发生了变化！那么如何识别哪些实体发生了变化！我想如果您在每次更改时更新的实体上使用时间戳，您可以使用它。只需记录您之前搜索的时间戳，然后搜索列表中自那时以来已更改的实体。你怎么看，还有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:42:18.267

一种解决方法是在 EVENT 范围内定义一个单独的持久性上下文工厂，并将其用于查询。在`components.xml`：

```
<persistence:managed-persistence-context scope="event" auto-create="true" 
    entity-manager-factory="#{yourfactory}" name="eventScopedEM" /> 
```

这样做是在每个页面事件上创建一个新的实体管理器，而不是在整个对话中保持相同的实体管理器。保留其他对话范围的持久性上下文工厂（默认情况下`#{entityManager}`）以供所有其他用途。如果您使用`EntityQuery`组件进行查询，请记住设置实体管理器的名称（否则默认为`entityManager`），覆盖`getPersistenceContextName()`方法（对于基于 Java 的查询组件）或显式设置实体管理器（对于基于 xml 的查询组件），例如：

```
<framework:entity-query entityManager="#{eventScopedEM}">
    <framework:ejbql>from MyEntity</framework:ejbql>
    ...
</framework:entity-query> 
```

# iphone - 如何将图像保存到服务器

> ID：15247609
> 
> 赞同：0
> 
> 时间：2013-03-06T12:39:10.637
> 
> 标签：iphone, ios, objective-c, ios6, photo

我是 iPhone 应用程序的新手。

我想要的是将图像保存在服务器上。我有的是按钮。单击时，它要求提供照片或库，然后我选择图像。

但我不知道如何在服务器上保存这个图像。

```
#pragma mark - UIActionSheetDelegate

- (void)actionSheet:(UIActionSheet *)theActionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        [self takePhotoCam];
    } else if (buttonIndex == 1) {
        [self choosePhotoFromLibrary];
    }
}

- (IBAction)takePhotoAction:(id)sender {
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        UIActionSheet *actionSheet = [[UIActionSheet alloc]
                                      initWithTitle:nil
                                      delegate:self
                                      cancelButtonTitle:@"Cancel"
                                      destructiveButtonTitle:nil
                                      otherButtonTitles:@"Take Photo", @"Choose From Library", nil];

        [actionSheet showInView:self.view];
    } else {
        [self choosePhotoFromLibrary];
    }
}

- (void)takePhotoCam {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.delegate = self;
    imagePicker.allowsEditing = YES;
    [self.navigationController presentViewController:imagePicker animated:YES completion:nil];
}

- (void)choosePhotoFromLibrary {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.delegate = self;
    imagePicker.allowsEditing = YES;
    [self.navigationController presentViewController:imagePicker animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:46:20.930

```
- (void)uploadImageToServer:(NSMutableArray*)imgArray{
    if (!self.networkQueue){
        self.networkQueue = [[ASINetworkQueue alloc] init];
    }
    [self.networkQueue reset];
    self.progressValueLabel.text = @"0 %";
    self.lblImageUplodInfo.text  = @"Processing..."; 
    self.networkQueue.shouldCancelAllRequestsOnFailure = NO;
    [self.networkQueue setRequestDidFailSelector:@selector(imageUploadFailed:)];
    [self.networkQueue setQueueDidFinishSelector:@selector(imageUploadComplete:)];
    [self.networkQueue setRequestDidFinishSelector:@selector(imageUploadRequestComplete:)];
    [self.progressView performSelectorOnMainThread:@selector(setProgress:) withObject:nil waitUntilDone:YES];
    [self.progressValueLabel performSelectorOnMainThread:@selector(setText:) withObject:@"0 %" waitUntilDone:YES];
    [self.networkQueue setUploadProgressDelegate:self.progressView];
    self.progressView.progress=0.0f;
    self.networkQueue.shouldCancelAllRequestsOnFailure = NO;
    [self.networkQueue setDownloadProgressDelegate:self];
    [self.networkQueue setShowAccurateProgress:YES];
    [self.networkQueue setDelegate:self];

    self.lblImageUplodInfo.text=@"Uploading..";
    [self.networkQueue setShowAccurateProgress:YES];
    [self.networkQueue setDelegate:self];

    for(int i=0;i<[imgArray count];i++)
    {
        if([[[imgArray objectAtIndex:i] objectForKey:@"isSync"] isEqualToString:@"0"])
        {
             ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:[WebService getAddPhoto]]];
             [request setUserInfo:[NSDictionary dictionaryWithDictionary:[imgArray objectAtIndex:i]]];
             [request addPostValue:project_id forKey:@"project_id"];
             [request addPostValue:[[imgArray objectAtIndex:i] valueForKey:@"vComments"] forKey:@"comment"];
             NSData *imageData = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:[[imgArray objectAtIndex:i] valueForKey:@"vPhoto"]]);
             NSString *encodedString = [imageData base64EncodingWithLineLength:[imageData length]];
             [request addPostValue:encodedString forKey:@"Photo"];
             [request setDelegate:self];
             [request setTimeOutSeconds:300]; 
             [self.networkQueue addOperation:request];

 }
[self.networkQueue go];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:07:38.377

下面是解决我的问题的链接。

## [如何将图像保存在服务器上](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)

希望这可以帮助某人...

# iphone - 日期格式化程序问题

> ID：15247610
> 
> 赞同：-4
> 
> 时间：2013-03-06T12:39:14.170
> 
> 标签：iphone, ios, ipad, nsdate, nsdateformatter

我正在使用以下代码将字符串转换为日期，但是当我记录日期时时间格式不正确

```
NSDateFormatter *formate = [[[NSDateFormatter alloc] init] autorelease];
    [formate setDateFormat:@"MM/dd/yyyy HH:mm a"];
    [formate setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    NSString *strConcat = @"03/06/2013  2:59 PM";
    NSDate *date = [formate dateFromString:strConcat];
    NSLog(@"Output :%@",date); 
```

**输出**：`2013-03-06 12:59:00 +0000`

任何人都可以请我在将其转换为日期时做错了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:56:20.403

您的错误在于`HH`您需要使用的 dateFormat`hh`

// hh 给出 14:59

// HH 给出 12:59

```
NSDateFormatter *formate = [[NSDateFormatter alloc] init];
[formate setDateFormat:@"MM/dd/yyyy hh:mm a"]; 
[formate setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSString *strConcat = @"03/06/2013  2:59 PM";
NSDate *date = [formate dateFromString:strConcat];
NSLog(@"Output :%@",date); 
```

# struct - Doxygen：嵌套结构命名

> ID：15247611
> 
> 赞同：0
> 
> 时间：2013-03-06T12:39:15.323
> 
> 标签：struct, doxygen, rtf

当 doxygen 用于记录嵌套的 C 结构时，如下所示 -

```
struct level0 {           
    struct level1 {             
        struct level2 {            
            int data1;            
        } var_level2a;           

        struct level2b {      
            int data2;       
            int data3;       
        } var_level2b;       

    } var_level1;     
}; 
```

生成的文档结构命名为 -

*   结构级别0::级别1::级别2a
*   结构级别0::级别1::级别2b

我们可以像这样简单地显示结构名称吗（在内部它可能有完整的名称，范围解析为'::'的东西用于引用） -

*   结构级别2a
*   结构级别2b

请提供帮助。快速响应将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:03:21.900

你试过设置`HIDE_SCOPE_NAMES`吗`YES`？

# c# - 了解代码优先虚拟属性

> ID：15247614
> 
> 赞同：28
> 
> 时间：2013-03-06T12:39:30.870
> 
> 标签：c#, entity-framework, entity-framework-4.1

嗨，我刚开始学习使用实体框架代码，我似乎无法理解某些东西。我根据教程创建了三个模型：

```
public class Course
{
    public int CourseID { get; set; }
    public string Title { get; set; }
    public int Credits { get; set; }
    public virtual ICollection<Enrollment> Enrollments{ get; set; }
}

public class Enrollment
{
    public int EnrollmentID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public decimal? Grade { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
}
public class Student
{
    public int StudentID { get; set; }
    public string LastName { get; set; }
    public string FirstMidName { get; set; }
    public DateTime EnrollmentDate { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; }
} 
```

我的问题是我不明白虚拟属性的作用。如果我检查数据库，每个属性都没有列箱，只有其他属性。

那么当您使用 virtual 关键字创建属性时会发生什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-06T12:47:17.687

它用于管理**延迟加载**和**更改跟踪**。

**EF 将在运行时生成代理类型，这些代理类型是从 POCO 类继承**的动态生成的类型，并添加所有 EF 内容以管理**覆盖的虚拟属性**中的延迟加载/更改跟踪。

所以`virtual`这里不是“神奇关键字”，`virtual`而是在这里，因此您的 POCO 可以在运行时通过其他与 EF 相关的代码来继承。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T12:43:57.723

虚拟属性允许延迟加载

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T12:41:17.820

当您创建使用 virtual 关键字标记的属性或方法时，您将被允许在派生类中覆盖它，从而根据您创建的对象为您的方法提供更专业的行为。

在实体框架的情况下，它也是一个指出使用延迟加载行为的约定。此处存在有关此问题的问题：[Entity Framework 4.1 Virtual Properties](https://stackoverflow.com/questions/7738722/entity-framework-4-1-virtual-properties)

# iphone - 来自 Youtube 的缩略图

> ID：15247616
> 
> 赞同：4
> 
> 时间：2013-03-06T12:39:43.627
> 
> 标签：iphone, ios6, youtube, uiimage

我想从 youtube url 创建缩略图。我正在尝试 thumbnailImageAtTime 方法，但无法创建缩略图。请帮我。

这是我的代码：

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=02Bzjj1eeeo"]];

UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
[imgview setImage:thumbnail];
[player stop]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:48:54.810

最好的方法是获取视频的帧并将该图像帧与该 youtube url 一起使用：

```
NSString *urlStringImage=[NSString stringWithFormat:@"http://img.youtube.com/vi/%@/1.jpg",idOfYoutubeVideo];
NSData thumbnailImageData=[NSData dataWithContentsOfURL:[NSURL URLWithString:urlStringImage]]; 
```

例如：[http ://www.youtube.com/watch?v=K8cJKirMo-A](http://www.youtube.com/watch?v=K8cJKirMo-A)

视频 ID = K8cJKirMo-A

urlStringImage = [http://img.youtube.com/vi/](http://img.youtube.com/vi/) **K8cJKirMo-A** /default.jpg

使用 default.png 而不是 1.jpg

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-10T04:24:29.163

您可以使用以下 youtube api url “<a href="http://img.youtube.com/vi/" rel="nofollow">http://img.youtube.com/vi/” + 轻松检索它youtubeVideoID + “/default.jpg”</p>

有关更多详细信息，请查看此链接[blogfornet-youtube thumbnail](http://blogfornet.com/2013/10/how-to-retrieve-youtube-thumbnail-in-asp-net/)。

# session - Phonegap windows phone 8没有保持会话

> ID：15247624
> 
> 赞同：3
> 
> 时间：2013-03-06T12:40:31.433
> 
> 标签：session, cordova, windows-phone-8

我开发了一个`Android` 使用`Phonegap`. 该应用程序运行良好。我使用 jQuery Mobile 来设计界面。

当我尝试为**Windows Phone 8**构建应用程序时，我遇到了一个问题。

我的应用程序使用编写的 Web 服务**`PHP`**从服务器获取数据。该应用程序必须一个接一个地调用两个**API**。第一个对应用程序进行身份验证（类似于 a `login`），一旦通过身份验证，就是一个从服务器获取一些数据的 API。

看来电话没有保持会话。身份验证 API 返回`login success`. 之后被`get app data api`调用，但它返回“应用程序未通过身份验证”。

在浏览器和安卓设备上测试时，API 工作正常。请帮忙。

任何形式的帮助将不胜感激。提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T16:56:05.563

当我从 Windows 8 移动版的支付网关返回时，会话已过期，这阻止了我调用剩余的 url。我正在会话过期，任何人都建议即使在应用程序关闭后如何保持会话。这适用于安卓、苹果手机、黑莓。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:38:59.827

我有同样的问题，只是在 windows phone 8 上使用 phonegap，而不是 jquery mobile。我登录，但下一个请求说会话已过期。完全相同的代码适用于 iOS 和 Android 上的 phonegap

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T04:09:35.327

看起来 cookie 不能在应用程序和服务器之间传递（[此处为 Cordova 错误](https://issues.apache.org/jira/browse/CB-2060?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)），并且 cookie 是维持服务器和客户端之间的会话所必需的（因此服务器知道客户端是谁）。

# javascript - “this”的价值是什么？

> ID：15247625
> 
> 赞同：0
> 
> 时间：2013-03-06T12:40:33.307
> 
> 标签：javascript, jquery

我想知道这一点，因为我必须在从电子表格等菜单按钮编辑期间更改单元格样式。下面的代码无法正常工作。

```
$("#tab1 tr td:not(:first-child)").on("click", function (e) {          
    console.log(e);
    if(e.currentTarget.contentEditable != null){
         $(e.currentTarget).attr("contentEditable",true);
     }
     else{
         $(e.currentTarget).append("<input type='text'>");
     }
});
//Add bold text
$("#tab1 tr td:not(:first-child)").on("click", function () { 
   var mytd=this;
   $("#btn4 li a:eq(0)").on("click",function() {
     $(mytd).toggleClass("bold");
     $(this).toggleClass("bg");
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:43:19.130

会的`td`。做一个`console.log($(this).html())`找出答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:45:52.550

尝试执行以下操作

`console.log(e.target);`

**请注意**，您必须将 e 作为参数传递给函数参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:38:08.563

`this` in an event handler is usually equal to [`event.currentTarget`](http://api.jquery.com/event.currenttarget/), unless you have explicitly manipulated the scope using [`$.proxy()`](http://api.jquery.com/jQuery.proxy/), [`Object.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind) or similar techniques.

I usually use `event.target` and `event.currentTarget` in event handlers because it is more explicit and allows the function to have an easily rebindable scope var. (E.g., you can use an event handler which is a property of another object and bind it to that instance.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:05:12.333

也可以按照@Jitesh Tukadiya 所说的尝试，console.log(e.target);

你也可以使用自己调试，来显示 alert(); 用不同的论据分析它给出了什么。

使用调试工具。

# php - 使用谷歌距离矩阵查找两个地方之间的行驶距离的代码问题

> ID：15247626
> 
> 赞同：0
> 
> 时间：2013-03-06T12:40:35.347
> 
> 标签：php, google-maps

这是我之前关于同一问题的帖子：[drive-distance-between-2-locations](https://stackoverflow.com/questions/14590364/driving-distance-between-2-locations)

我需要使用谷歌地图找到两个位置之间的行车距离，而不是在 JavaScript 中，我需要在 PHP 中。该页面上接受的答案对我正在寻找的东西有用。我的项目需要这个，并且一周左右没有测试我的项目，在这样做之后，现在代码不再有效。只是为了代码突然停止工作，花了很长时间搜索和找到答案。

```
<?php
    $url = 'http://maps.google.com/maps/nav?q=from:London%20to:Dover';
    $data = file_get_contents($url);
    $data = utf8_decode($data);
    $obj = json_decode($data);
    echo $obj->Directions->Distance->meters;
?> 
```

那是代码，我尝试了一些 var_dumps 但我没有足够的经验来理解。

每行的var_dumps：

字符串（56）“ [http://maps.google.com/maps/nav?q=from:London%20to:Dover](http://maps.google.com/maps/nav?q=from:London%20to:Dover) ”

string(76) "{"name":"from:London to:Dover","Status":{"code":610,"request":"directions"}}"

string(76) "{"name":"from:London to:Dover","Status":{"code":610,"request":"directions"}}"

object(stdClass)#1 (2) { ["name"]=> string(20) "from:London to:Dover" ["Status"]=> object(stdClass)#2 (2) { ["code" ]=> int(610) ["request"]=> string(10) "directions" } }

空值

我不知道如何调试等。如果有人可以提供帮助，我将不胜感激，因为我很失望，它刚刚停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:11:14.387

干得好

```
<?php
$url = 'http://maps.googleapis.com/maps/api/distancematrix/json?origins=London&destinations=Dover&mode=driving&language=en&sensor=false';
$data = file_get_contents($url);
$data = utf8_decode($data);
$obj = json_decode($data);

echo($obj->rows[0]->elements[0]->distance->text); //km
echo($obj->rows[0]->elements[0]->distance->value); // meters 
```

# python - 如何使用熊猫查找重复名称？

> ID：15247628
> 
> 赞同：21
> 
> 时间：2013-03-06T12:40:38.490
> 
> 标签：python, group-by, pandas

我有一个`pandas.DataFrame`名为`name`包含字符串的列。我想获得在列中多次出现的名称列表。我怎么做？

我试过了：

```
funcs_groups = funcs.groupby(funcs.name)
funcs_groups[(funcs_groups.count().name>1)] 
```

但它不会过滤掉单例名称。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T13:10:39.193

如果您想查找名称重复的行（我们第一次看到的除外），您可以试试这个

```
In [16]: import pandas as pd
In [17]: p1 = {'name': 'willy', 'age': 10}
In [18]: p2 = {'name': 'willy', 'age': 11}
In [19]: p3 = {'name': 'zoe', 'age': 10}
In [20]: df = pd.DataFrame([p1, p2, p3])

In [21]: df
Out[21]: 
   age   name
0   10  willy
1   11  willy
2   10    zoe

In [22]: df.duplicated('name')
Out[22]: 
0    False
1     True
2    False 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-01T13:48:49.013

一个班轮可以是：

```
x.set_index('name').index.get_duplicates() 
```

索引包含查找重复项的方法，列似乎没有类似的方法..

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-18T23:19:48.407

[value_counts](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html)也会给你重复的数量。

```
names = df.name.value_counts()
names[names > 1] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-04T17:49:57.690

给出的大多数响应都演示了如何删除重复项，而不是找到它们。

以下将选择具有重复字段的数据框中的*每一行。*`'name'`请注意，这将找到*每个*实例，而不仅仅是在第一次出现后重复。该`keep`参数接受可以排除第一次或最后一次出现的附加值。

```
df[df.duplicated(['name'], keep=False)] 
```

`duplicated()`可以在[这里](http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.duplicated.html)找到pandas 的参考资料。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-14T04:35:13.960

另一种衬里可以是：

```
(df.name).drop_duplicates() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-25T17:45:09.377

我遇到了类似的问题并遇到了这个答案。

我想这也有效：

```
counts = df.groupby('name').size()
df2 = pd.DataFrame(counts, columns = ['size'])
df2 = df2[df2.size>1] 
```

并且`df2.index`会给你一个重复的名字列表

# asp.net-mvc - RegisterRoutes 路由不正确

> ID：15247630
> 
> 赞同：1
> 
> 时间：2013-03-06T12:40:39.043
> 
> 标签：asp.net-mvc

为什么如果我打电话：

```
http://localhost:55058/support/Faqs 
```

我明白了：

```
http://localhost:55058/Products/Faqs/Faq 
```

使用以下 RegisterRoutes 实现？我怎样才能得到：

```
http://localhost:55058/Support/Faqs/Faq 
```

谢谢。

```
public class SupportController : Controller
{
    public ActionResult FAQs()
    {
        return RedirectToAction("Faq", "Faqs");
    }
}

public static void RegisterRoutes(RouteCollection routes)
{

        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.IgnoreRoute("{filename}.html|js|css|gif|jpg|jpeg|png|swf");

        routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
        routes.IgnoreRoute("{resource}.html/{*pathInfo}");

        routes.MapRoute(
            "Products", // Route name
            "Products/{controller}/{action}", // URL with parameters
            new { controller = "ProductName", action = "Index" } // Parameter defaults
            );

        routes.MapRoute(
         "Support", // Route name
         "Support/{controller}/{action}", // URL with parameters
         new { controller = "Support", action = "Index" } // Parameter defaults
         );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new {controller = "Home", action = "Index", id = UrlParameter.Optional} // Parameter defaults
            );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:09:48.367

如果没有更多数据，很难说 - 但看起来您是在尝试使用区域，但实际上并未使用区域？

正在发生的事情是您`RedirectToAction("Faq", "Faqs")`正在匹配您的所有路线 - 所以它选择第一个，在这种情况下`Products`。

`"Products/{controller}/{action}"`和`"Support/{controller}/{action}"`路线有什么区别？他们来自不同的地方吗？无论 URL 以什么开头，您都将它们发送到同一个控制器，相同的操作 - 这似乎令人困惑。

如果转到 /products/... 你应该得到与 /support/... 不同的结果，你应该查看[MVC Areas](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)。

如果他们应该得到与您现在所拥有的**结果相同的结果- 也许您应该考虑删除这些 url 并只使用默认值？**

以下是有关领域的一些额外资源：

1.  来自[MSDN](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)
2.  来自[Asp.net](http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/)
3.  从[堆栈溢出](https://stackoverflow.com/questions/9061153/mvc-areas-for-enterprise-good-or-bad)

**编辑**根据您的评论：

路由：`http://localhost:55058/Products/ProductName/Download`

像这样更新您的路线：

```
 routes.MapRoute(
            "Products", // Route name
            "Products/ProductName/{action}", // URL with parameters
            new { controller = "ProductName", action = "Index" } // Parameter defaults
            );

        routes.MapRoute(
         "Support", // Route name
         "Support/{controller}/{action}", // URL with parameters
         new { controller = "Support", action = "Index" } // Parameter defaults
         ); 
```

# gtk - 在 Glade 中，如何向助手添加页面？

> ID：15247632
> 
> 赞同：6
> 
> 时间：2013-03-06T12:40:55.177
> 
> 标签：gtk, glade

在 Glade 中创建了一个助手窗口后，我看到了一个带有三个标签的窗口，每个标签代表一个页面。

但是如何添加另一个页面及其相应的小部件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T12:40:55.177

1.  在助手的属性窗口中设置您需要的页数。页面数应大于当前添加到助手窗口的子页面小部件的数量。

    ![](../Images/a3127d4f5ad2a36f20b2cb7bdd8840fe.png)

2.  `Position`通过在 Packing 选项卡下更改其属性来重新排序现有的子页面小部件。您希望第一个位置（位置 0）为空。最简单的方法是将每个孩子的位置增加一个，从最后一个孩子开始。

    ![](../Images/d6e658e152b22e3d6ba5069516b2bb23.png)

3.  现在`assistant-action-area`在导航器中选择对象。如果没有对象占据位置 0，您应该在助手的预览中看到一个空白区域。

    ![](../Images/e078956f62b5fa90d651af02dc87356b.png)

4.  单击侧面板中的小部件并将其添加到空白区域。

5.  对您需要添加的每个页面重复此操作。

# windows-phone-7 - 计算上午到下午的时间

> ID：15247637
> 
> 赞同：0
> 
> 时间：2013-03-06T12:41:17.607
> 
> 标签：windows-phone-7, timer

我希望能够计算从按下开始到按下停止的时间，然后它将计算两者之间经过的时间。

我希望它使用时钟作为源时间。因此，如果您按下开始时时钟是早上 6 点，当您停止时时钟是下午 6 点，我希望它告诉我过去了多少小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:05:51.150

我就是这样做的；

```
DateTime startTime = DateTime.Now;
DateTime endTime = DateTime.Now; 
```

然后我这样计算差异：

```
TimeSpan diff = endTime.Subtract(startTime);
start.Text = diff.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:42:33.170

使用 Windows Phone 7，您的应用程序几乎没有机会在整个时间内运行。

这可能会让您更轻松，因为您只需`DateTime`在启动时存储 a ，`DateTime`在停止时存储 a 。

然后，您可以轻松地`TimeSpan`在两者之间找到一个，从而为您提供经过的时间。在你的 之外`TimeSpan`，有一个`Hours`/的属性`TotalHours`。

# silverlight - 迁移 Silverlight

> ID：15247641
> 
> 赞同：0
> 
> 时间：2013-03-06T12:41:32.503
> 
> 标签：silverlight

我有 silverlight 应用程序，它具有相同的 windows 和 web 代码库。因此，相同的代码通过 silverlight 浏览器插件在 Windows 和浏览器中运行。一些业务逻辑在 ViewModel 中。

Microsoft 将不支持 Silverlight，因此我们希望为该应用程序制定未来战略。我们想知道我们可以使用哪些 Silverlight 替代方案，只需对代码进行最少的更改即可帮助我们。

以下是对新替代方案的一些期望。即应该

1.  两个 web/windows 的 ui 代码库相同
2.  在 ViewModel 中重用逻辑。

我听说使用 html5 作为替代方案，请告知在这种情况下使用 html5 或我们可以使用的任何其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:50:35.000

听起来您只是放弃了 Silverlight，因为您认为它不受支持。请注意，Microsoft 已保证[Silverlight 5 将在 2021 年之前得到支持](http://support.microsoft.com/gp/lifean45#sl5)，因此它不会很快消亡：它只是不会获得新版本。

如果你想从 Silverlight 切换，因为你想支持不运行 Silverlight 的平台，比如智能手机，那么 ASP.NET 基本上是重用任何业务逻辑的唯一方法，实际上你不会得到太多代码Windows 应用程序和 Web 应用程序之间的重用，当然不是在 ui 代码中。

所以，基本上：如果满足您的要求，要么保留 Silverlight，否则就像 Jason Young 建议的那样，将其全部扔到一个 Web 应用程序的窗口之外，这可能是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:50:54.080

Silverlight 是在 Windows 和 Web 之间共享代码的好方法。首先，我想问您为什么要尝试维护两个不同的应用程序。您是否考虑过将它们统一到一个基于 Web 的应用程序中？

带有 .NET 后端的 HTML 5 通常是您最好的跨平台方法，因为您已经编写了后端代码。通过维护一个平台，您不必将任何工作加倍。这将满足要求#1 和#2。

我知道这是您现有代码库的范式转变，但我经历过这种转变。进展相当顺利，我很高兴我们做到了。多亏了 Knockout.js 和 jQuery 等客户端库，使用 HTML 5 应用程序替换 Silverlight 比以往任何时候都容易。

如果您仍然想将它们分开，我不知道如果没有比我提到的策略更多的工作，您将如何实现该目标。作为替代方案，您可以继续使用处于当前状态的应用程序。Silverlight 暂时仍然是一个可行的解决方案。我想说你有足够的时间来计划你的策略。

# django-models - Django-编辑和更新数据库中的现有数据

> ID：15247646
> 
> 赞同：6
> 
> 时间：2013-03-06T12:41:58.150
> 
> 标签：django-models, django-forms, django-views

模型.py 是

```
from django.db import models

    class Book(models.Model):

        book_id=models.AutoField(primary_key=True,unique=True)
        book_name=models.CharField(max_length=30)
        author_name=models.CharField(max_length=30)
        publisher_name=models.CharField(max_length=40)

        class Meta:
            db_table = u'Book'

        def __unicode__(self):
            return "%d %s %s %s" % (self.book_id,self.book_name, self.author_name,self.publisher_name) 
```

forms.py 是

```
from django import forms
from django.forms import ModelForm
from myapp.models import Book

class BookForm(ModelForm):

    class Meta:
        model = Book

        fields=['book_id','book_name','author_name','publisher_name'] 
```

我的views.py是

```
def editbook(request,book_id):

    queryset = Book.objects.filter(book_id=book_id)
    if request.POST:
        form=BookForm(request.POST,instance=queryset)
        if form.is_valid():
            form.save()
            return redirect('index')
    else:
        form=BookForm(instance=queryset)
        template = 'editbook.html'
        book = { 'form':form }
    return render_to_response(template, book , RequestContext(request)) 
```

我需要编辑和更新数据库中已经存在的数据行。我猜他们是views.py中的一些问题。所以我不确定我的 views.py 是否正确。请检查并告诉我是否有任何问题以及如何进行。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T10:30:43.737

视图.py

```
 if request.POST:
        book_form = BookForm(request.POST)

    if book_form.is_valid():

        book = Book.objects.get(pk=book_id)
        book_form = BookForm(request.POST, instance = book)
        book_form.save() #cleaned indenting, but would not save unless I added at least 6 characters.
        return redirect('/index/')
    else:
        book = Book.objects.get(pk = book_id)       
        book_form = BookForm(instance=book)

        return render_to_response('editbook.html',{ 'form':book_form }, context_instance=RequestContext(request)) 
```

# c# - 如何使用 C# 读取文件夹中存在的一个实例中的所有文件？

> ID：15247647
> 
> 赞同：1
> 
> 时间：2013-03-06T12:41:57.870
> 
> 标签：c#

我希望我的程序读取文件夹中包含的所有文件，然后执行所需的操作。

我尝试了以下代码，但这是通过读取一个文件然后显示结果，即逐个文件显示结果给我的结果：

```
foreach (string file in Directory.EnumerateFiles(@"C:\Users\karansha\Desktop\Statistics\Transfer", "*.*", SearchOption.AllDirectories))
{
                Console.WriteLine(file);

                System.IO.StreamReader myFile = new System.IO.StreamReader(file);
                string searchKeyword = "WX Search";
                string[] textLines = File.ReadAllLines(file);
                Regex regex = new Regex(@"Elapsed Time:\s*(?<value>\d+\.?\d*)\s*ms");
                double totalTime = 0;
                int count = 0;
                foreach (string line in textLines)
                {
                    if (line.Contains(searchKeyword))
                    {
                        Match match = regex.Match(line);
                        if (match.Captures.Count > 0)
                        {
                            try
                            {
                                count++;
                                double time = Double.Parse(match.Groups["value"].Value);
                                totalTime += time;
                            }
                            catch (Exception)
                            {
                                // no number
                            }
                        }
                    }
                }
                double average = totalTime / count;
                Console.WriteLine("RuleAverage=" + average);
                // keep screen from going away
                // when run from VS.NET
                Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:56:48.543

从您的描述中，我并不清楚您要达到的目标是什么。但是，如果我正确理解它的要点，您可以在进行任何处理之前收集所有文件的所有行：

```
IEnumerable<string> allLinesInAllFiles
                              = Directory.GetFiles(dirPath, "*.*")
                                .Select(filePath => File.ReadLines(filePath))
                                .SelectMany(line => line);
//Now do your processing 
```

或者，使用集成的语言功能

```
IEnumerable<string> allLinesInAllFiles = 
    from filepath in Directory.GetFiles(dirPath, "*.*")
    from line in File.ReadLines(filepath)
    select line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:46:43.053

要获取文件夹中所有文件的路径，请使用：

```
string[] filePaths = Directory.GetFiles(yourPathAsString); 
```

此外，您可以`filePaths`对所有这些文件采取一些您需要的操作。

# java - JFrame 的 setIconImages() 方法使用哪些图标大小？

> ID：15247653
> 
> 赞同：19
> 
> 时间：2013-03-06T12:42:20.190
> 
> 标签：java, icons, size, jframe, frame

有谁知道在 jFrame 的 setIconImages() (PLURAL) 方法中使用哪些图标大小，以便我的应用程序图标在所有平台和所有上下文（例如，窗口图标、任务栏图标、alt-tab 图标等）上都能很好地显示。 )?

我找到了一个使用 16 像素 x 16 像素和 32 像素 x 32 像素图像的示例，但我需要更大吗？

为了测试，我还尝试将 64px 和 128px 版本添加到传递给 setIconImages() 的列表中，但这些似乎没有在我的 Windows 7 机器上使用。但是，我无法在其他机器上轻松测试，所以想知道是否有人知道我应该包括哪些尺寸？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T13:30:55.760

根据 API，运行时从提供的列表中选择最合适的大小来使用。我会提供`16x16`, `32x32`,`64x64`并`128x128`让 JVM 在运行时决定。

> `public void` [`setIconImages`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setIconImages%28java.util.List%29)`(`[`List`](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html)`<? extends`[`Image`](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html)`> icons)`
> 
> 设置要显示为该窗口图标的图像序列。对 getIconImages 的后续调用将始终返回`icons`列表的副本。
> 
> 根据平台功能，一个或多个不同尺寸的图像将用作窗口的图标。
> 
> 从一开始就扫描列表以查找最`icons`合适尺寸的图像。如果列表包含多个相同大小的图像，则将使用第一个。
> 
> 没有指定图标的无主窗口使用 platfrom-default 图标。除非明确覆盖，否则拥有的窗口的图标可以从所有者那里继承。将图标设置为 null 或空列表会恢复默认行为。
> 
> 注意：本地窗口系统可能使用不同尺寸的不同图像来表示窗口，这取决于上下文（例如窗口装饰、窗口列表、任务栏等）。他们还可以在所有上下文中仅使用单个图像，或者根本不使用图像。
> 
> **参数：**
> 
>      `icons`- 要显示的图标图像列表。
> 
> **自从：**
> 
>      1.6
> 
> **也可以看看：**
> 
>      [`getIconImages()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#getIconImages%28%29),[`setIconImage(Image)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setIconImage%28java.awt.Image%29)

# winapi - GUI 句柄在哪里管理？

> ID：15247667
> 
> 赞同：3
> 
> 时间：2013-03-06T12:42:56.987
> 
> 标签：winapi, handle, user32

`CreateWindow()`正如我从 Windows 内部了解的那样，执行对象的句柄与您从或之类的函数获得的句柄不是由同一实体管理的`LoadCursor()`。

什么 dll/sys 负责从函数返回的这些`user32.dll`？有没有像 WinObj 这样的程序来处理这种句柄？

即使是谷歌的一些关键词，我也会很高兴，在这个问题上标记的关键词上没有任何运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:21:24.407

**win32k.sys**负责处理 USER 和 GDI 请求。

> win32k 驱动程序是导出 600 多个函数的图形堆栈中的关键组件。它使用另一个名为 _W32pServiceTable 的表扩展了*系统服务描述符表 (SSDT) 。*这个驱动程序没有主内核模块（ntoskrnl.exe）那么大，但它与用户模式的交互同样重要。win32k 的服务表包含少于 300 个函数，具体取决于 Windows 版本。win32k 驱动程序通常使用用户模式回调系统将控制权转移到用户模式。已构建用户模式模块和内核模式驱动程序之间的接口，以便于创建和管理窗口。

详细资料： http: [//mista.nu/research/mandt-win32k-paper.pdf](http://mista.nu/research/mandt-win32k-paper.pdf)

# javascript - 用于检测 CSS 的原生 JavaScript 函数

> ID：15247673
> 
> 赞同：0
> 
> 时间：2013-03-06T12:43:31.997
> 
> 标签：javascript

有没有办法让原生（没有 jquery 或 libs）JavaScript 函数检测浏览器是否关闭了 CSS？

它可以关闭 CSS，所以我正在寻找一个功能来检查。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:46:47.403

像这样的蛮力风格测试怎么样：

```
function testCss(){
     var div, width, flag = true;
     div = document.createElement('div');
     document.body.appendChild('div');
     div.style.width = "10"; 
     if (div.offsetWidth != 10){  
         flag = false;
     }
     div.style.width = "20px";  
    if (div.offsetWidth != 20){
         flag = false;
     }
     document.body.removeChild(div); 
     return flag;
} 
```

上面设置了一个 div 元素的宽度。
检查有问题的 div 是否具有刚刚设置的宽度。
然后再次重复相同的操作，但宽度为 20px，以防它已经设置为 10px 宽度。
最后它删除了 div。
很可能有一种更好的方法可以在本地进行，但这是一个快速的解决方案。

不是 %100 确定可行，但这是一般的想法。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:46:11.760

从我上面发布的同一个链接，

```
var cssdisabled = false; // must be proven otherwise
var testcss = document.createElement('div');
testcss.style.position = 'absolute';
document.getElementsByTagName('body')[0].appendChild(testcss);
if (testcss.currentStyle) var currstyle = testcss.currentStyle['position'];
else if (window.getComputedStyle) var currstyle = document.defaultView.getComputedStyle(testcss, null).getPropertyValue('position');
var cssdisabled = (currstyle == 'static') ? true : false;
document.getElementsByTagName('body')[0].removeChild(testcss); 
```

# javascript - 通过两个类获取元素

> ID：15247676
> 
> 赞同：1
> 
> 时间：2013-03-06T12:43:42.493
> 
> 标签：javascript, jquery, getelementsbyclassname

我`getElementsByClassName`用来资助多个元素并改变它们的风格，但我发现`getElementsByClassName`它不兼容跨浏览器。你能帮我简化这段代码吗？我更喜欢原生 JS 实现，但 jQuery 可能会更好，所以它也很好......

那么我怎样才能循环遍历元素并根据各个类更改某些样式....

```
var ele = document.getElementsByClassName("dhSliderMobile"); 

    for (var i = 0; i < ele.length; i++) {
        if (ele[i].style.display === "block") {
            ele[i].style.display = "none";

            var div = document.getElementsByClassName("dhImageInfoDiv");
            var div1 = document.getElementsByClassName("dhSeriesInfoDiv");
            for (var j = 0; j < div.length; j++) {
                div[j].style.right = 0 + "px";
                div1[j].style.right = 0 + "px";

            }
        }
        else {
            ele[i].style.display = "block";

            var div = document.getElementsByClassName("dhImageInfoDiv");
            var div1 = document.getElementsByClassName("dhSeriesInfoDiv");

            for (var j = 0; j < div.length; j++) {
                div[j].style.right = 40 + "px";
                div1[j].style.right = 40 + "px";
            }
        }
    }

    var ele = document.getElementsByClassName("dhSliderDesktop");    
    for (var i = 0; i < ele.length; i++) {
        if (ele[i].style.display === "block") {
            ele[i].style.display = "none";

            var div = document.getElementsByClassName("dhImageInfoDiv");
            var div1 = document.getElementsByClassName("dhSeriesInfoDiv");
            for (var j = 0; j < div.length; j++) {
                div[j].style.right = 0 + "px";
                div1[j].style.right = 0 + "px";

            }
        }
        else {
            ele[i].style.display = "block";

            var div = document.getElementsByClassName("dhImageInfoDiv");
            var div1 = document.getElementsByClassName("dhSeriesInfoDiv");

            for (var j = 0; j < div.length; j++) {
                div[j].style.right = 20 + "px";
                div1[j].style.right = 20 + "px";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:45:18.233

试试这样，类选择器可以通过`.` 在这里阅读更多来使用： [类选择器](http://api.jquery.com/class-selector/)

```
 var multipleClassresults= $('.yourClass1, .yourClass2');

 var singleClassResults= $('.yourClass1'); 
```

如果你想循环结果然后这样做

```
$.each(multipleClassresults,function(index, item){
    if($(item).hasClass('yourClassToCheck'))
    {
     //then do some styling 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:44:51.507

您可以选择具有如下类名称的元素。[您可以在此处](http://api.jquery.com/class-selector/)阅读有关类选择器的更多信息

```
elem = $('.classname'); //elements having class `classname`

elem = $('.classname1, .classname2'); //elements  having class `classname1` or  `classname2` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:56:45.550

使用 jQuery 进行 CSS 更改就是这样。如果它们满足您的计数器的条件，您也可以使用事件处理程序来做一些事情。无论如何，这将为您指明正确的方向（我希望）

```
$('.dhImageInfoDiv, .dhSeriesInfoDiv').css({
  'margin-left':'40px',
  'display':'block' 
}) 
```

亲切的问候，M

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:58:24.750

我认为，您的代码将与 jQuery 一样

```
$('.dhSliderMobile').toggle(function() {
    if ($(this).is('visible')) { // if is visible
        $('.dhImageInfoDiv, .dhSeriesInfoDiv').css('right', '40px');
        return false; // then set invisible
    }else{
        $('.dhImageInfoDiv, .dhSeriesInfoDiv').css('right', 0);
        return true; // set visible
    }
}); 
```

[关于 jQuery.toggle 的更多信息](http://api.jquery.com/toggle/)

# java - Java 类文件未在类文件夹中创建

> ID：15247678
> 
> 赞同：3
> 
> 时间：2013-03-06T12:43:45.757
> 
> 标签：java

我正在使用以下命令编译 Java 程序：

```
javac -cp ./classes/ src/com/oracle/tutorial/jdbc/JDBCTutorialUtilities.java 
```

但具有讽刺意味的是，生成的类文件是在同一个源文件夹中创建的，而不是在类路径中。所以每次编译后我都必须移动类文件。是的，我已经在源代码中正确指定了包。如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:45:36.763

你应该使用

```
javac -d ./classes/ src/com/oracle/tutorial/jdbc/JDBCTutorialUtilities.java 
```

该`-cp`选项用于设置类路径，而不是用于指定输出目录。

```
adarsh$ javac -help
Usage: javac <options> <source files>
where possible options include:
  -g                         Generate all debugging info
  -g:none                    Generate no debugging info
  -g:{lines,vars,source}     Generate only some debugging info
  -nowarn                    Generate no warnings
  -verbose                   Output messages about what the compiler is doing
  -deprecation               Output source locations where deprecated APIs are used
  -classpath <path>          Specify where to find user class files and annotation processors
  -cp <path>                 Specify where to find user class files and annotation processors
  -sourcepath <path>         Specify where to find input source files
  -bootclasspath <path>      Override location of bootstrap class files
  -extdirs <dirs>            Override location of installed extensions
  -endorseddirs <dirs>       Override location of endorsed standards path
  -proc:{none,only}          Control whether annotation processing and/or compilation is done.
  -processor <class1>[,<class2>,<class3>...] Names of the annotation processors to run; bypasses default discovery process
  -processorpath <path>      Specify where to find annotation processors
  -d <directory>             Specify where to place generated class files
  -s <directory>             Specify where to place generated source files
  -implicit:{none,class}     Specify whether or not to generate class files for implicitly referenced files
  -encoding <encoding>       Specify character encoding used by source files
  -source <release>          Provide source compatibility with specified release
  -target <release>          Generate class files for specific VM version
  -version                   Version information
  -help                      Print a synopsis of standard options
  -Akey[=value]              Options to pass to annotation processors
  -X                         Print a synopsis of nonstandard options
  -J<flag>                   Pass <flag> directly to the runtime system
  -Werror                    Terminate compilation if warnings occur
  @<filename>                Read options and filenames from file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T12:46:03.673

您可以使用 -d 参数指定 javac 的输出文件夹。

在这里查看[更多详情](http://www.herongyang.com/Java-Tools/javac-Option-d-Specifying-Output-Directory.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:51:50.210

你 nedd **-d**作为 javac 命令的一个选项

**-d** directory 设置类文件的目标目录。目标目录必须已经存在；javac 不会创建目标目录。

```
If **-d** is not specified, javac puts the class file in the same directory as the source file. 
```

**注意-d**指定的目录不会自动添加到你的用户类路径

# c# - 作为函数参数的特定值

> ID：15247680
> 
> 赞同：2
> 
> 时间：2013-03-06T12:43:48.750
> 
> 标签：c#, asp.net

我有一个函数，它有 1 个字符串类型的参数/参数：

```
 public void foo(String myParam)
        {
           //do something
        } 
```

字符串的可能值受到限制（例如“test”、“test2”和“test3”），任何不同的 myParam 值都会导致错误。

是否可以在没有检查 myParam 值的 switch case 的情况下限制 myParam 的可能值？

也可以将不同的对象传递给我的函数，该函数包含我需要的真实值。

是否有标准/最佳方式解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T12:46:14.330

你可以创建一个枚举

```
public enum MyParam
{
    test,
    test2,
    test3
} 
```

并用于`ToString`获取您的字符串表示形式`enum`

```
public void foo(MyParam myParam)
{
    if(!Enum.IsDefined(typeof(MyParam),myParam))
        throw new ArgumentException();
    myParamString = myParam.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:45:54.710

限制这些值的唯一方法是检查它们。

您可以使用直接字符串比较或正则表达式匹配 - 如果字符串失败，匹配会抛出`InvalidArgumentException`.

另一种选择是创建一个包装字符串的类 - 在构造类时（将包装的字符串作为构造函数参数传递），您将按上述方式进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:47:38.917

考虑`Regular Expressions`；.NET 提供了`System.Text.RegularExpressions`存在`Regex`-class 的命名空间：

```
public void foo(String myParam){

Regex regex = new Regex(@"test\d");
if(regex.IsMatch(myParam))
   //myParam matches regex
} 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.aspx)，其中还有关于 RegEx 的信息。

# java - 确定哪个客户端使用套接字发送数据

> ID：15247681
> 
> 赞同：1
> 
> 时间：2013-03-06T12:43:49.967
> 
> 标签：java, swing, datainputstream

我有个问题。

在我的代码中，我有一组玩家，每个人都带着他的“进”和“出”到服务器。

从服务器到客户端，我可以很好地沟通，没有任何问题，每个客户端都在他的 GUI 中显示服务器发送的更改。

问题是从客户端到服务器的通信。作为服务器，我想收到每个玩家的请愿书来做一些工作。问题是我不知道我从哪个索引收到请愿书，我无法检查`players[index].in.readUTF()`它阻止程序的所有原因。

一些帮助？`in.avaiable()`对我不起作用。

为了更清楚地显示它：

当玩家登录服务器时，我在服务器端执行此操作。

```
socket = serverSocket.accept();
out = new DataOutputStream(menuPrincipal.socket.getOutputStream());
in = new DataInputStream(menuPrincipal.socket.getInputStream());
players[i] = new player(i,out,in); 
```

然后我在服务器端有一个线程等待消息。

**问题是我不知道来自玩家数组的哪个索引（来自哪个玩家）的消息**。我无法检查未向服务器发送任何内容的玩家索引，因为它会阻止程序。

这就是它的工作原理：

从服务器到客户端我只是这样做：

1.  `player[i].out.writeUTF(message)`从服务器端
2.  客户只是做`in.readUTF()`了，一切正常

从客户端到服务器我这样做：

1.  `out.writeUTF(message)`来自客户
2.  但是在服务器端我必须选择一个`player[i].in` **来阅读我不知道哪个玩家是。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:49:05.990

所以你说你已经设法将数据从服务器发送到客户端，它工作正常。同样的原则也适用于从客户端向服务器发送数据。

在服务器端有一个监听线程。在数据包中，您可以包含发送数据的用户的名称或 IP 地址。IE：

```
Data Recieved by Server: 'message, hello chris, sender, reciever' 
```

然后，您的服务器可以使用字符串标记器将数据包分成有意义的部分。

```
Action: 'message'
Message: 'hello chris'
Sender: 'sender'
Reciever: 'reciever'. 
```

然后，您拥有继续所需的所有数据。

这种实现意味着您需要的所有数据都包含在您收到的数据包中，您不必检查它的来源。额外的几个字节数据不会像每次收到数据包时都必须执行搜索那样减慢您的速度。

**编辑响应 OP 编辑**

或者，您可以实现一个`HashMap<String,Player>`. 这样，您需要做的就是使用我上面的描述从发送的数据包中获取用户名，并将其传递给 hashmap。hashmap 可以返回代表客户端的 User 对象，并且不需要再次进行索引查找。

您可以在此处找到有关[Java Hashmap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)的文档。

最后，我注意到你有一`player`堂课。Java 约定是所有类都以大写字母开头。那是：

`player`应该是`Player`。

**根据您的评论进行最终编辑**

恐怕你的问题是糟糕的设计问题。在这种情况下，客户端都应该通过相同的通道与服务器通信。这样，服务器所要做的就是监听任何消息，解析它们，然后继续移动它们。调整您的实现，以便您的客户端都通过相同的流与服务器对话，这将消除您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T14:18:26.883

好的，首先让我给你一个关于套接字如何工作的小背景，然后再给你解决方案，了解发生了什么是至关重要的。

**套接字解释**（[参考](http://www.oracle.com/technetwork/java/socket-140484.html)）

套接字是在服务器程序和一个或多个客户端程序之间建立**双向通信的软件端点。**注意双向这个词。这意味着对于客户端和服务器之间的**每个**连接，您都有两个流：一个输入流和一个输出流。这些可以通过在服务器端和客户端设置的两个套接字对象访问。

![在此处输入图像描述](../Images/45e052746a1e329a719ee38419e18ff5.png)

**你的问题**

> 从服务器到客户端，我只做 player[i].out.writeUTF(message) 和客户端然后检查他的“in”，做 in.readUTF() 并且一切正常。从客户端到服务器，我从客户端执行 out.writeUTF(message)，但是在服务器端，我必须选择一个 player[i].in 来读取我不知道哪个玩家是的。

因此，如果我理解正确，您很难确定是哪个客户向您发送了消息。如果您正确使用多线程，这很容易解决，因为每个客户端都将在单独的线程上处理。

一个至关重要的步骤是最初如何处理客户。考虑以下代码。为了保持简短，我没有过多地关注约定。

```
ArrayList<ClientWorker> clientWorkers = new ArrayList<ClientWorker>();
int idCounter = 0;

    public void listenSocket(){
      try{
        int port = 9090
        server = new ServerSocket();
      } catch (IOException e) {
        System.exit(-1);
      }
      while(true){
        ClientWorker w;
        try{
    //server.accept returns a client connection
          clientWorker = new ClientWorker(server.accept(), idCounter, );
          idCounter++;
          clientWorkers.add(clientWorker); 
          Thread t = new Thread(clientWorker);
          t.start();
        } catch (IOException e) {
          System.exit(-1);
        }
      }
    } 
```

好的，通过该代码，我们正在处理新客户并为他们分配一个唯一的密钥。我使用数组列表代替数组，以便它可以根据连接到服务器的用户数量增加和减少大小。收到客户端后，我创建一个 clientWorker 实例。此外，为每个连接的用户分配一个唯一键，可用于从数组列表中获取其对象（如果需要）。

ClientWorker 类看起来像这样：

```
 class ClientWorker implements Runnable {
      private Socket client;
      public int id

    //Constructor
      ClientWorker(Socket client, int id) {
        this.client = client;
        this.id = id;
      }

      public void run(){
        String line;
        BufferedReader in = null;
        PrintWriter out = null;
        try{
          in = new BufferedReader(new InputStreamReader(client.getInputStream()));
          out = new PrintWriter(client.getOutputStream(), true);
        } catch (IOException e) {
          System.out.println("in or out failed");
          System.exit(-1);
        }

        while(true){
          try{
//ANY DATA I GET FROM THIS STREAM IS FROM THIS PARTICULAR CLIENT ONLY!
            line = in.readLine();
            System.out.println("RECEIVED FROM CLIENT "+ id +" " + line);
           }catch (IOException e) {
            System.exit(-1);
           }
        }
      }
    } 
```

该线程调用 run() 方法。由于每个客户端都有一个单独的线程，因此从特定线程处理的数据是从该特定客户端而不是其他人发送的。因此，可以很容易地区分每个客户的数据。

抱歉，答案很长。我花了一些时间才达到我的目的。

[参考](http://www.oracle.com/technetwork/java/socket-140484.html)

# c# - 从数据网格视图中清除所有数据

> ID：15247685
> 
> 赞同：0
> 
> 时间：2013-03-06T12:44:01.747
> 
> 标签：c#, c#-4.0, datagridview

我有三个数据网格视图我正在处理数据并首先显示它，然后从第一个获取并处理并显示第二个，现在我想重用我的第一个数据网格视图但不清楚，它有旧数据，这意味着问题旧列和值。我尝试过：

```
 datagridview2.datasource=null;   // didn't  work
    datagridview2.columns.clear();   // didn't work 
```

我希望数据网格视图*清晰*如新，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:34:28.953

```
datagridview2.Rows.Clear();
datagridview2.Refresh(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T11:13:24.723

使用此代码

```
GridView1.DataSource = null;

GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:59:57.237

试一试...我的假设是按照您所说的尝试清除列...

```
 for (int i = 0; i <= datagridview2.ColumnCount - 1; i++) {
 datagridview2.Columns.Remove(datagridview2.Columns(0).Name);} 
```

让我知道它是如何为你工作的......

谢谢！

# php - PHP MYSQL如何查找mysql_fetch_assoc中是否存在变量及其在数组中的位置然后将结果设置为变量

> ID：15247690
> 
> 赞同：0
> 
> 时间：2013-03-06T12:44:16.873
> 
> 标签：php, mysql, arrays, loops

我非常坚持某件事，我确信有一个简单的解决方案，但它打败了我和我的基本 PHP！

我有一个 MySQL 数据库，其中包含用户为一组视频输入的标签（标签）。我查询数据库以找到 5 个最常出现的视频标签。

```
 $sql_get_toptags=mysql_query("SELECT TagName,Count(TagName) AS TagFreq 
                                 FROM Tags 
                                 Where vidID='$vidid' 
                                 Group BY TagName 
                                 Order By Count(TagName) DESC limit 5",$db); 
```

如果我遍历结果，它们会输出到浏览器没问题

```
 while($myrow = mysql_fetch_assoc($sql_get_toptags)) {
   $tagname = $myrow[TagName];
   echo $tagname;
 } 
```

我想要做的是找出用户刚刚输入的标签是否在最常输入的列表中及其位置，即 1.tagname 我希望 1 和 tagname 是我可以重用的变量，在示例中$answer 下面是 1 $tagname 显然是标记名。

这就是我所拥有的：

```
 $sql_get_toptags=mysql_query("SELECT TagName,Count(TagName) AS TagFreq 
                                 FROM Tags 
                                 Where vidID='$vidid' 
                                 Group BY TagName 
                                 Order By Count(TagName) DESC limit 5",$db);

  while($myrow = mysql_fetch_assoc($sql_get_toptags)) {
      $tagname = $myrow[TagName];
      for ($i=1; $i<=5; $i++){
         echo $i,$tagname;
         echo "<br>";
         if ($tag==$tagname){
           $TopTag=$tagname;
           $answer=$i;
        }
     }
  }
  if (($TopTag!='') && ($answer!='')){
     echo "your tag is no.".$answer;
  } 
```

这行不通。这是它输出的示例：

1胡须 2
胡须 3 胡须 4 胡须 5 胡须 1爆炸 2爆炸 3爆炸 4爆炸 5爆炸 1垃圾 2垃圾 3垃圾 4 垃圾 5垃圾 1 火山 2 火山 3 火山 4火山 5 火山 1 真棒 2 真棒
3 真棒
4 真棒 5 真棒 你 的标签是没有 。

我已经尝试过感觉就像一百万个循环组合我无法得到我想要的东西。

在我看来，$tagname[] 应该是一个数组，括号中的数字是键，例如 tagname[2] 它将是列表中的第三个。所以 if ($tag==$tagname[2]){ //echo "那个标签是第三受欢迎的"; 但是 $tagname 只是一行，如果我尝试在 while 循环中创建一个数组，我只会在每次迭代时覆盖最后一个条目。

我真的很感激任何建议。

我想看到的输出（即如果 $tag=explosion）

1胡须 2爆炸 3垃圾 4火山 5厉害

你的标签是 2 号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:57:54.527

试试这个：

```
$sql_get_toptags=mysql_query("SELECT TagName,Count(TagName) AS TagFreq FROM GT_Tags Where VidID='$vidid' Group BY TagName Order By Count(TagName) DESC limit 5",$db);

while($myrow = mysql_fetch_assoc($sql_get_toptags)) {
    $tagnames[] = $myrow['TagName'];
}
foreach($tagnames as $key=>$name){
    echo ($key+1)." ".$name;
    $reversed[$name]=$key+1;
}

if(isset($reversed[$tag])) {
    echo "Your tag is no. ".$reversed[$tag];
} else {
    echo "Your tag is not in the top 5";    
} 
```

您还可以使用 array_flip 交换键和数组值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:11:26.947

```
$sql_get_toptags=mysql_query("SELECT TagName,Count(TagName) AS TagFreq FROM GT_Tags Where VidID='$vidid' Group BY TagName Order By Count(TagName) DESC limit 5",$db);
$tagNames = array();

while($myrow = mysql_fetch_assoc($sql_get_toptags)) {
  $tagNames[] = $myrow['TagName'];
}

$tagNo = array_search($tag, $tagNames);
if($tagNo) {
  echo "Your tag is no. " . $tagNo;
} else {
      echo "Your tag is not in the top 5";    
} 
```

# windows - 模拟对象的同时读写

> ID：15247695
> 
> 赞同：1
> 
> 时间：2013-03-06T12:44:40.130
> 
> 标签：windows, testing, simulation

我正在尝试模拟同时读写。由于某种原因，线程不会同时执行此操作。我创建了 2 个线程，这些线程包含一个 Sleep(0) 以便其他线程可以在那里进行处理。在我创建一个新对象的部分，我什至睡了一个：

```
delete this->item; this->item = 0; Sleep(0); this->item = new hallo(); 
```

我在发布模式下运行了这个测试大约 2 个小时。没有异常或崩溃。我做错了什么？

**这就是我尝试这样做的方式**：

```
#include <Windows.h>
#include <stdio.h>

#include "Source.h"

DWORD WINAPI readVar(LPVOID);
DWORD WINAPI writeVar(LPVOID);

testclass * testobject;

int main()
{
    testobject = new testclass();

    CreateThread(NULL,NULL,readVar,NULL,NULL,NULL);
    CreateThread(NULL,NULL,writeVar,NULL,NULL,NULL);

    while(true)
        Sleep(10000);
}

DWORD WINAPI readVar(LPVOID)
{
    while(true)
    {
        hallo * testObjectTest = testobject->getValue();
        if(!testObjectTest->outpoutSomeData())
            printf("ERROR\n\n");

        Sleep(0);
    }

    return NULL;
}

DWORD WINAPI writeVar(LPVOID)
{
    while(true)
    {
        testobject->resetValue();
        Sleep(0);
    }

    return NULL;
} 
```

**这些是类：**

```
class hallo
{
public:
    hallo() {printf("Object created\n");}
    ~hallo() {printf("Object removed\n");}
    bool outpoutSomeData() { printf("Call\n"); return true; }
};

class testclass
{
private:
    hallo * item;
public:
    testclass() {this->item = new hallo(); }
    hallo * getValue() { return item; }
    void resetValue() { delete this->item; this->item = 0; Sleep(0); this->item = new hallo(); }
}; 
```

**供参考：**

*   这只是一个简单的测试。我不太关注“好的编码”；
*   我有 4 个 CPU 内核，所以它必须是可能的。
*   我在其他程序中多次遇到这个问题，我用锁定解决了这个问题。现在我想创建一个会发生这种情况的测试。但它不会起作用。

# html - ExtJs 表单渲染根本没有发生

> ID：15247696
> 
> 赞同：0
> 
> 时间：2013-03-06T12:44:42.430
> 
> 标签：html, extjs4.1

我正在尝试使用 ExtJS 创建一个表单。文件放置正确，但没有进行渲染：

索引.html

```
<html>
<head>
    <title>Hello Ext</title>

    <link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="../extjs/ext-debug.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</head>
<body>
    <div id="aa"></div>
</body>
</html> 
```

应用程序.js

```
Ext.create('Ext.form.Panel', {
    renderTo: document.getElementById('aa'),
    title: 'User Form',
    height: 130,
    width: 280,
    bodyPadding: 10,
    defaultType: 'textfield',
    items: [
        {
            fieldLabel: 'First Name',
            name: 'firstName'
        },
        {
            fieldLabel: 'Last Name',
            name: 'lastName'
        },
        {
            xtype: 'datefield',
            fieldLabel: 'Date of Birth',
            name: 'birthDate'
        }
    ]
}); 
```

有人知道我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:31:40.063

只需使用[`Ext.onReady()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-onReady)：

> 添加一个要在 DOM 准备好并且所有需要的类都已加载时调用的函数。
> 
> 如果 DOM 已准备好并且所有类都已加载，则传递的函数将立即执行。

工作示例：http: [//jsfiddle.net/Ld5e6/](http://jsfiddle.net/Ld5e6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:32:09.170

在您的 app.js 中，尝试在触发 onReady 事件时运行该代码，例如

```
Ext.onReady(function(){
    Ext.create('Ext.form.Panel', {
        renderTo: document.getElementById('aa'),
        title: 'User Form',
        height: 130,
        width: 280,
        bodyPadding: 10,
        defaultType: 'textfield',
        items: [
            {
                fieldLabel: 'First Name',
                name: 'firstName'
            },
            {
                fieldLabel: 'Last Name',
                name: 'lastName'
            },
            {
                xtype: 'datefield',
                fieldLabel: 'Date of Birth',
                name: 'birthDate'
            }
        ]
    });
}); 
```

# ios - iOS QuickLook QLPreviewController 可以显示 DOC 文件的页码吗

> ID：15247701
> 
> 赞同：1
> 
> 时间：2013-03-06T12:44:49.873
> 
> 标签：ios, file, location, qlpreviewcontroller

查看 PDF 文件时，QuickView 可以显示各个页面。这也可以使用 MS Office 文件（DOC、PPT）来完成吗？我想知道文档中有多少页/幻灯片以及我当前正在查看的页面。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:51:27.897

结果与`CGPDFDocumentGetPage`您在解决大纲项目中的目标时获得的间接页面引用相同。两者本质上都是字典，您可以使用`==`. 当你有一个`CGPDFDictionaryRef`你想知道页码的时候，你可以这样做：

```
CGPDFDocumentRef doc = ...;
CGPDFDictionaryRef outlinePageRef = ...;
for (int p=1; p<=CGPDFDocumentGetNumberOfPages(doc); p++) {
  CGPDFPageRef page = CGPDFDocumentGetPage(doc, p);
  if (page == outlinePageRef) {
    printf("found the page number: %i", p);
    break;
  }
} 
```

然而，明确的目标不是页面，而是第一个元素是页面的数组。其他元素是页面上的滚动位置等。

# bash - BASH - GREP - 反转很多不起作用

> ID：15247706
> 
> 赞同：0
> 
> 时间：2013-03-06T12:44:52.603
> 
> 标签：bash, grep

我试图通过用户“apache”找到一些打开的文件描述符。我想排除`ls: /proc/PID/fd: No such file or directory`但 GREP 排除不起作用：

```
# for pid in $(lsof -u apache | awk '{ print $2 }' | uniq); do ls -1 /proc/$pid/fd | grep -v "No"; done | wc -l 
ls: /proc/PID/fd: No such file or directory
1944 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:49:06.320

尝试`|& grep -v "No such file or directory"`

不像`|`,`|&`也会重定向错误输出`ls`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:36:49.190

尝试：

```
for pid in $(lsof -u apache | tail -n +2 | awk '{ print $2 }' | uniq); do ls -1 /proc/$pid/fd ; done | wc -l 
```

# excel - 格式化由 XSLT 生成的 XSLX 文件中的单元格

> ID：15247708
> 
> 赞同：1
> 
> 时间：2013-03-06T12:44:54.570
> 
> 标签：excel, xslt, xlsx, date-formatting, cell-formatting

我正在使用 XSLT 生成带有日期列的报告。在电子表格 XLSX 文件中，如果我将日期作为字符串传递，当使用 Excel 等电子表格包打开它时，它会假定它是一个日期（这是正确的），然后将其格式化为`MM/dd/yyyy`我们真正想要的是`dd/MM/yyyy`. 这似乎是导致此问题的电子表格包，但是我想知道您是否可以从 XSLT 定义单元格格式？

这是我用来执行此操作的代码：

```
<xsl:template match="SomeTemplate">
  <Row>
    ...
    <Cell>
      <xsl:value-of select="ms:format-date(StartTime, 'dd/MM/yyyy')" />
      <xsl:text> </xsl:text>
      <xsl:value-of select="ms:format-time(StartTime, 'HH:mm:ss')" />
    </Cell>
    ...
  </Row>
</xsl:template> 
```

我已经尝试过其他方法，例如启动单元格，`'`但奇怪的是这不起作用！

这是与上述 XSLT 相关的 XML 示例：

```
...
<Destination>
  <StartTime>2013-03-07T00:01:09</StartTime>
  <EndTime>2013-03-07T10:41:09</EndTime>
  ...
</Destination>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T21:40:49.740

Excel xml 中的单元格格式可以通过样式完成。

即，您使用 xs:datetime 格式的日期填充单元格（在您的示例中根本不需要任何 ms:format-date 转换），但通过 ss:styleId 指定单元格样式：

```
<Destination>
  <StartTime>2013-03-07T00:01:09</StartTime>
  <EndTime>2013-03-07T10:41:09</EndTime>
</Destination> 
```

+

```
<xsl:stylesheet 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ms="urn:schemas-microsoft-com:xslt"
xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
xmlns="urn:schemas-microsoft-com:office:spreadsheet"
version="1.0">
<xsl:template match="/">
    <Workbook>
        <Styles>
            <Style ss:ID="style_default">
                <NumberFormat ss:Format="Short Date"/>
            </Style>
            <Style ss:ID="style_ddslashmmslashyy">
                <NumberFormat ss:Format="dd/mm/yy;@"/>
            </Style>
        </Styles>
        <Worksheet ss:Name="Sheet1">
            <Table>
                <xsl:apply-templates/>
            </Table>
        </Worksheet>
    </Workbook>
</xsl:template>
<xsl:template match="Destination">
    <Row>
        <Cell ss:StyleID="style_default">
            <Data ss:Type="DateTime"><xsl:value-of select="StartTime"/></Data>
        </Cell>
        <Cell ss:StyleID="style_ddslashmmslashyy">
            <Data ss:Type="DateTime"><xsl:value-of select="StartTime"/></Data>
        </Cell>
    </Row>
</xsl:template>
</xsl:stylesheet> 
```

# javascript - 将 SVG 路径转换为多边形以在 Javascript Clipper 中使用

> ID：15247711
> 
> 赞同：4
> 
> 时间：2013-03-06T12:45:04.913
> 
> 标签：javascript, svg

[我正在尝试使用JS Clipper](https://sourceforge.net/p/jsclipper/wiki/Home%206/0)对 SVG 路径（包含贝塞尔曲线，二次和三次）执行布尔运算。

[JS Clipper](https://sourceforge.net/p/jsclipper/wiki/Home%206/0)从多边形开始，然后执行操作，然后似乎将它们转换回 SVG 路径。

下面的函数给出了一个 SVG 路径，但下面的示例从 2 个多边形开始。

一个示例函数：

```
// Polygon Arrays are expanded for better readability

function clip() {
  var subj_polygons = [
    [{
      X: 10,
      Y: 10
    }, {
      X: 110,
      Y: 10
    }, {
      X: 110,
      Y: 110
    }, {
      X: 10,
      Y: 110
    }],
    [{
      X: 20,
      Y: 20
    }, {
      X: 20,
      Y: 100
    }, {
      X: 100,
      Y: 100
    }, {
      X: 100,
      Y: 20
    }]
  ];

  var clip_polygons = [
    [{
      X: 50,
      Y: 50
    }, {
      X: 150,
      Y: 50
    }, {
      X: 150,
      Y: 150
    }, {
      X: 50,
      Y: 150
    }],
    [{
      X: 60,
      Y: 60
    }, {
      X: 60,
      Y: 140
    }, {
      X: 140,
      Y: 140
    }, {
      X: 140,
      Y: 60
    }]
  ];

  var scale = 100;
  subj_polygons = scaleup(subj_polygons, scale);
  clip_polygons = scaleup(clip_polygons, scale);

  var cpr = new ClipperLib.Clipper();
  cpr.AddPolygons(subj_polygons, ClipperLib.PolyType.ptSubject);
  cpr.AddPolygons(clip_polygons, ClipperLib.PolyType.ptClip);

  var subject_fillType = ClipperLib.PolyFillType.pftNonZero;
  var clip_fillType = ClipperLib.PolyFillType.pftNonZero;
  var clipTypes = [ClipperLib.ClipType.ctUnion];
  var clipTypesTexts = "Union";
  var solution_polygons, svg, cont = document.getElementById('svgcontainer');

  var i;
  for (i = 0; i < clipTypes.length; i++) {
    solution_polygons = new ClipperLib.Polygons();
    cpr.Execute(clipTypes[i], solution_polygons, subject_fillType, clip_fillType);
    console.log(polys2path(solution_polygons, scale));
  }

}

// helper function to scale up polygon coordinates
function scaleup(poly, scale) {
  var i, j;
  if (!scale) scale = 1;
  for (i = 0; i < poly.length; i++) {
    for (j = 0; j < poly[i].length; j++) {
      poly[i][j].X *= scale;
      poly[i][j].Y *= scale;
    }
  }
  return poly;
}

// converts polygons to SVG path string
function polys2path(poly, scale) {
  var path = "",
    i, j;
  if (!scale) scale = 1;
  for (i = 0; i < poly.length; i++) {
    for (j = 0; j < poly[i].length; j++) {
      if (!j) path += "M";
      else path += "L";
      path += (poly[i][j].X / scale) + ", " + (poly[i][j].Y / scale);
    }
    path += "Z";
  }
  return path;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:52:20.317

我假设您的意思是某种 svg 路径到多边形转换。

我进行了很多搜索，但没有找到任何可靠且开箱即用的解决方案。

SVG 路径可以由十个不同的段组成，如果我们同时考虑相对坐标和绝对坐标，则为 20 个。它们在路径元素的 d 属性中表示为字母：相对的是`mhvlcqastz`，绝对的是`MHVLCQASTZ`。每个都有不同的属性，`a`（椭圆弧）是最复杂的一个。最有用和最灵活的类型是`c`（三次贝塞尔曲线），因为它可以以相当高的精度表示所有其他类型，如以下示例所示： http: [//jsbin.com/oqojan/32、http](http://jsbin.com/oqojan/32) : [//jsbin.com/ oqojan/42](http://jsbin.com/oqojan/42) .

Raphael JS 库具有`Path2Curve`可以将所有路径段转换为三次曲线的功能，它还可以处理复杂的弧到三次转换。不幸的是，它有一个错误，因此它无法处理所有可能的路径段组合，但幸运的是有一个固定版本的库可用：http: [//jsbin.com/oqojan/32/edit](http://jsbin.com/oqojan/32/edit)（查看 Javascript 窗口）。

当所有路径段都转换为三次曲线时，它们可以转换为单独的线段。方法很少，最好的似乎是[自适应递归细分方法](http://antigrain.com/research/adaptive_bezier/)，它在曲线的急转弯处产生更多的线段，而在曲线的其他部分产生更少的线段，以实现曲线保真度和段数少的平衡，以最大限度地提高渲染速度，但不幸的是它不能处理所有共线的情况。我成功地将 AntiGrain 的方法转换为 Javascript 并添加了预分割功能，它在局部极值（一阶导数根）中分割曲线，之后 AntiGrain 方法还处理所有可能的共线情况：

水平共线：http: [//jsbin.com/ivomiq/6](http://jsbin.com/ivomiq/6)
不同案例集：http: [//jsbin.com/ivomiq/7](http://jsbin.com/ivomiq/7)
随机： http: [//jsbin.com/ivomiq/8](http://jsbin.com/ivomiq/8)
旋转共线：[http:// jsbin.com/ivomiq/9](http://jsbin.com/ivomiq/9)

所有上述样本都有两条相互重叠的路径，以显示自适应算法中可能存在的错误：红色曲线使用非常慢的蛮力方法分割，绿色曲线使用 AntiGrain 方法分割。如果您根本看不到红色，则 AntiGrain 的方法`approximate()-function`正在按预期工作。

好的，现在我们已经修复了 Raphael 并修复了 AntiGrain。如果我们结合这两种方法，我们可以创建一个函数，将任何 svg 路径元素转换为多边形（单个或多个子多边形）。我不能 100% 确定这是最好或最快的方法，但它应该是可用的。当然最好的是本机浏览器实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:03:10.643

您可以使用[De Casteljau 的算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)分解`bezier curve`成更小的直线，并将它们连接起来以创建`polygon`.

以下是一些参考资料`De Casteljau's algorithm`

*   [http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/de-casteljau.html](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/de-casteljau.html)
*   [http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/de-casteljau.html](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/de-casteljau.html)

# java - 在 j2me 的 derby 数据库中哪里可以看到存储的数据

> ID：15247712
> 
> 赞同：1
> 
> 时间：2013-03-06T12:45:06.520
> 
> 标签：java, netbeans, java-me, derby

我创建了包含名称和编号的 MIDlet 类，我使用 RecordStore 将数据存储在 apache derby 数据库中。程序执行成功。现在我想在 derby 数据库中查看我输入的数据。请帮助我在哪里可以看到。我在使用netbeans IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:44:37.550

数据库数据存储在文件系统中的文件中。这些文件的确切位置由您在打开数据库时指定的 JDBC 连接 URL 控制。通常，此 URL 描述文件系统路径。如果路径是绝对路径，看那里。如果它是相对路径，请查找相对于运行程序的当前目录的位置。

这里有更多信息：[http ://db.apache.org/derby/docs/10.9/devguide/cdevdvlp40724.html](http://db.apache.org/derby/docs/10.9/devguide/cdevdvlp40724.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T19:46:09.887

在netbeans中：服务-数据库-连接你的数据库-显示数据找到你的用户显示-右击表查看数据。

# c# - Web Socket 消息未全部接收

> ID：15247718
> 
> 赞同：1
> 
> 时间：2013-03-06T12:45:20.243
> 
> 标签：c#, tcp, websocket, load-testing

我已经使用[Alchemy](http://alchemywebsockets.net/) Web 套接字实现了一个 Web 套接字服务器，现在正在尝试对其进行压力测试。我在 C# 中编写了以下方法来创建大量客户端以连接到服务器并发送一些数据：

```
private void TestWebSocket()
{
    int clients = 10;
    long messages = 10000;
    long messagesSent = 0;
    String host = "127.0.0.1";
    String port = "11005";

    WSclient[] clientArr = new WSclient[clients];
    for (int i = 0; i < clientArr.Length; i++)
    {
        clientArr[i] = new WSclient(host, port);
    }

    Random random = new Random();
    var sw = Stopwatch.StartNew();

    for (int i = 0; i < messages; i++)
    {
        clientArr[i % clients].Send("Message " + i);
        messagesSent++;
    }
    sw.Stop();

    Console.WriteLine("Clients " + clients);
    Console.WriteLine("Messages to Send" + messages);
    Console.WriteLine("Messages Sent " + messagesSent);
    Console.WriteLine("Time " + sw.Elapsed.TotalSeconds);
    Console.WriteLine("Messages/s: " + messages / sw.Elapsed.TotalSeconds);
    Console.ReadLine();

    for (int i = 0; i < clientArr.Length; i++)
    {
        clientArr[i].Disconnect();
    }

    Console.ReadLine();
} 
```

但是，服务器接收的消息较少（即使是很小的数字，例如 100）。或者有时会收到多条消息作为一条消息，例如：

> 消息 1 = abc 消息 2 = def
> 
> 接收为 = abcdef

我试图或多或少地复制[此处](http://webtide.intalio.com/2011/08/websocket-example-server-client-and-loadtest/)显示的示例。目前，服务器和客户端都在本地运行。关于问题是什么或如何改进测试方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:11:26.650

github 项目中有两个未解决的问题听起来很相似：

*   [服务器丢弃入站消息并接收损坏的输入](https://github.com/Olivine-Labs/Alchemy-Websockets/issues/25)
*   [JSON 消息被截断](https://github.com/Olivine-Labs/Alchemy-Websockets/issues/49)

[其中一位评论者报告说Fleck](https://github.com/statianzo/Fleck/)的运气更好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T13:02:01.467

TCP 是流协议，而不是面向消息的协议。这意味着接收者负责*查找*流中包含的每条消息的开始/结束。这也意味着接收者不仅负责将大量读取分解为单个消息，而且有时它还需要收集**少量**读取，直到收到完整的消息。提供的示例消息显示发送了两个，**两个**已收到，但显然您的服务器无法确定一条消息在哪里结束，而另一条消息从哪里开始。您可能需要为您的数据添加某种内部协议来标记每条消息的开始和结束。如果您的消息总是完全相同的长度，您可以只使用大小，但这不太可靠，并且可能难以可靠地移植到其他通信方法（如果在程序生命的后期需要 - 这几乎总是会发生大部头书！）

如果您的消息长度相同，则接收者通常可以将读取大小（不过我不知道您的库）限制为该长度，这样就不需要分离大读取。但是，由于 TCP/IP 堆栈可能将数据从流中收集到数据包中以在物理网络上传输的方式，仍然可能发生*小读取。*如果您不想编写集合代码，那么您需要找到一个*peek函数，它会告诉您在实际执行读取**之前*可以读取多少数据，让您的程序等到至少有足够的数据整条消息准备阅读。

# ios - 关于 App ID 的问题

> ID：15247721
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:45:28.137
> 
> 标签：ios, xcode, ios-provisioning, ad-hoc-distribution

如何删除旧的 App ID？

你如何让 iOS Team Provisioning Profile 选择一个特定的 App ID？

附加：任何人都可以解释您在分发 Ad-Hoc 部署时需要使用所选配置文件进行 4 次代码签名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:16:18.070

据我所知，目前无法删除 App ID。

我使用 Simon Whitaker 的 Chrome 插件，它允许你对你的 App ID 和它们的显示方式有更多的控制。

可能值得一试： [https ://github.com/simonwhitaker/app-id-sanity/](https://github.com/simonwhitaker/app-id-sanity/)

-编辑-

刚刚意识到它也适用于 Safari。

-编辑2-

关于您的跟进，在供应门户中，选择创建新的 App ID 后，您可以从列表中选择您想要的 App ID：

![在此处输入图像描述](../Images/3c65c43cf6e8c4d228fab320ea0e7e9c.png)

完成并下载后，将其放入 Xcode 管理器中，然后从Xcode 项目的`Code signing`部分中选择它：`Build Settings`

![在此处输入图像描述](../Images/918af7bc7ba3a0f39498aeefcec3877d.png)

# c# - 使用文字显示查询结果

> ID：15247724
> 
> 赞同：0
> 
> 时间：2013-03-06T12:45:36.817
> 
> 标签：c#, sql, literals, sqldatareader

我正在尝试将查询中的多行显示为 asp.net c# 中的文字。这是我这样做的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("[dbo].[GetUsersLeagues]", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        string userId = Membership.GetUser().ProviderUserKey.ToString();
        SqlParameter userIDParam = new SqlParameter("@userId", userId);

        cmd.Parameters.Add(userIDParam);

        conn.Open();
        SqlDataReader dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        while (dReader.Read())
        {
            usersLeagues.Text = (dReader["LeagueName"].ToString());
        }
        dReader.Close();
        conn.Close();

    } 
```

我的问题是文字只显示其中一行，我用列表框尝试过这个，所有行都显示了。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:48:55.080

您正在`Text`每次迭代中替换属性的值：

```
while (dReader.Read())
{
    usersLeagues.Text = (dReader["LeagueName"].ToString());
} 
```

取而代之的是，您需要*连接*每次迭代的值：

```
while (dReader.Read())
{
   usersLeagues.Text += (dReader["LeagueName"].ToString()) + Environment.NewLine;
} 
```

在上面的示例中， using`+=`导致追加到 的当前值`usersLeagues.Text`，而不是替换。

# iphone - 如何将uitextview中的选定字符串从textview中拖出。？

> ID：15247727
> 
> 赞同：2
> 
> 时间：2013-03-06T12:45:42.170
> 
> 标签：iphone, ios, xcode, ipad

**我是 iphone 开发的初学者。我在 uitextview 中遇到了一个问题...我正在尝试做的是将 uitextview 中选定的字符串从 textview 中拖出...并将其拖到 tabbarcontroller 是否有可能请帮我解决这个问题...。* *这是我到目前为止返回的代码....请帮助我

#

```
import <UIKit/UIKit.h>
#import "TabViewController.h"

@class TabBarViewController;

@interface TabBarAppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate>
{

    TabBarViewController *txtviewcontroller;
    UITabBarController *tabbar;
    NSArray *viewcontrollerarray;

}
@property(nonatomic,retain)NSArray *viewcontrollerarray;
@property(nonatomic,strong)UITabBarController *tabbar;
@property(nonatomic,retain)TabBarViewController *txtviewcontroller;

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) TabBarViewController *viewController;

@end
#import "TabBarAppDelegate.h"

#import "TabViewController.h"

@implementation TabBarAppDelegate
@synthesize txtviewcontroller,tabbar,viewcontrollerarray;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
   self.window.backgroundColor=[UIColor whiteColor];
  self.tabbar=[[UITabBarController alloc]init];
    txtviewcontroller=[[TabBarViewController alloc]init];
   tabbar.delegate=self;
   viewcontrollerarray=[[NSArray alloc]initWithObjects:txtviewcontroller, nil];
    self.tabbar.viewControllers=viewcontrollerarray;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[TabBarViewController alloc] initWithNibName:@"TabBarViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[TabBarViewController alloc] initWithNibName:@"TabBarViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.tabbar;
    [self.window makeKeyAndVisible];
    return YES;
}
#import <UIKit/UIKit.h>

@interface TabBarViewController : UIViewController
{
     UITextView *textview;
}
@property(nonatomic,retain)UITextView *textview;

@end

#import "TabViewController.h"
#import "TabBarAppDelegate.h"
#include <QuartzCore/CoreAnimation.h>

@interface TabBarViewController ()

@end

@implementation TabBarViewController
@synthesize textview;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
     self.title=@"firstname";
    CGRect textViewFrame = CGRectMake(20.0f, 20.0f, 280.0f, 124.0f);

    textview = [[UITextView alloc] initWithFrame:textViewFrame];
    textview.backgroundColor=[UIColor clearColor];
   textview.textColor=[UIColor blackColor];
    textview.editable=NO;
    NSString *filePath=[[NSBundle mainBundle]pathForResource:@"satyadetails" ofType:@"txt"];
    NSString *contentString=[NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    textview.text=contentString;
   textview.layer.borderWidth = 3.0f;

    textview.layer.borderColor = [[UIColor grayColor] CGColor];
    textview.returnKeyType = UIReturnKeyDone;
    [self.view addSubview:textview];
enter code here

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:55:53.943

步骤 1\. 当用户在 textview 内触摸时获取事件（您可以通过`UITextView`'s Delegate ( `startEditing`delegate) 获取）

第 2 步。在您的视图上添加一个`UILabel`用户在 textview 中触摸的位置，并将文本作为 textview 的位置，并将清晰的颜色作为背景色。（在 textview 的委托内执行此操作）

Step 3\. Inside touches move of ur view会根据touches动态改变你标签的位置。

第 4 步。当用户移动它的触摸直到删除 textview 委托将被称为检查`if(textview==droppingtextview)`然后放`draggingtextview.text=label.text`。并从超级视图中删除标签。

# c++ - 如何查找 OpenMP 单个块的内部或外部

> ID：15247729
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:45:46.500
> 
> 标签：c++, openmp

某些代码不得真正并行运行：不在 OpenMP 并行区域内或 OpenMP 单个块内。我怎样才能断言代码没有真正并行运行（暂时忽略嵌套并行引起的复杂性）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T22:34:47.620

我认为没有办法完全按照您的意愿行事。

但是，您可以使用“关键”构造来确保代码部分一次只能由一个线程执行，然后设置一些标志以防止它被另一个线程运行，如果它应该只运行一次。

# android - 在Android上以编程方式绘制带有边框（角半径）的椭圆形

> ID：15247735
> 
> 赞同：31
> 
> 时间：2013-03-06T12:45:58.080
> 
> 标签：android, android-drawable, shapedrawable

我正在尝试使用 OvalShape 绘制自定义 ShapeDrawable，填充为白色和灰色边框。我创建了一个这样的drawable：

```
ShapeDrawable drawable = new ShapeDrawable(new OvalShape());
drawable.getPaint().setColor(Color.GRAY);
drawable.getPaint().setStyle(Style.STROKE);
drawable.getPaint().setStrokeWidth(getPixels(5));
drawable.getPaint().setAntiAlias(true); 
```

但结果是：[角落问题](http://imageshack.us/photo/my-images/825/device20130306143953.png/)

![在此处输入图像描述](../Images/7671225dd64fdb5a290512f5f7d7aa82.png)

这个想法是以编程方式创建一个像这样但颜色不同的形状：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="oval">
<corners android:radius="10dip"/>
<stroke android:color="#FF0000" android:width="5dip"/>
<solid android:color="@android:color/transparent"/>
</shape> 
```

怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-07T00:16:41.947

我找到了一种方法来绕过创建新的可绘制对象！

A定义了一个带有android XML边框的圆圈，如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="oval">
<corners android:radius="10dip"/>
<stroke android:color="#FF0000" android:width="5dip"/>
<solid android:color="@android:color/transparent"/>
</shape> 
```

然后，当想要更改可绘制颜色时，我正在应用 ColorFilter。例如，如果我想将 drawable 的红色更改为蓝色，我这样做：

```
Drawable drawable = context.getResources().getDrawable(R.drawable.name);
drawable.setColorFilter(Color.BLUE, PorterDuff.Mode.SRC_ATOP); 
```

如果我们想使用 StateListDrawable 从代码创建自定义选择器，请注意 - StateListDrawable 清除应用于可绘制过滤器...通过`selector.setColorFilter...`修复问题在整个选择器上应用过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-12T23:24:14.917

这是一个新的解决方案：

```
 RoundedBitmapDrawable RBD = RoundedBitmapDrawableFactory.create(mContext.getResources(),YourBitmap);
            RBD.setCornerRadius(20);
            RBD.setAntiAlias(true);

            wholeRel.setBackground(RBD); 
```

# php - Symfony 和 Azure 分发包 - Azure 中的资产

> ID：15247738
> 
> 赞同：1
> 
> 时间：2013-03-06T12:46:08.713
> 
> 标签：php, symfony, azure

我正在尝试将现有的 Symfony 2.1 应用程序部署到 Azure。为此，我使用[Azure Distribution Bundle](http://beberlei.github.com/AzureDistributionBundle/)，并尝试将资产部署到 Azure，如此[处](http://beberlei.github.com/AzureDistributionBundle/assets.html)所述。

但是，在执行 windowsazure:package 创建包时出现错误：

> 可捕获的致命错误：传递给 WindowsAzure\DistributionBundle\Deployment\Assets\BlobStrategy::__construct() 的参数 2 必须是 WindowsAzure\Blob\BlobRestProxy 的实例，没有给出，在 C:\IGPR\igpr\app\cache\azure 中调用\appAzureDebugProjectContainer.php 在第 2361 行并在 C:\IGPR\igpr\vendor\beberlei\azure-distribution-bundle\WindowsAzure\DistributionBundle\Deployment\Assets\BlobStrategy.php 第 35 行中定义

这是我的 config.yml 的相关部分：

```
windows_azure_distribution:
...
    services:
        blob:
            default: UseDevelopmentStorage=true
            azureprod: DefaultEndpointsProtocol=http;AccountName=myaccountname;AccountKey=MyVeryLongAccOUntKeY==
    assets:
        type: blob
        connection_name: azureprod 
```

有任何想法吗？似乎无法创建 Blob 代理。如果我尝试使用本地开发存储，我会得到同样的错误。

该捆绑包是通过 Composer 安装的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:03:54.390

看起来这是 Azure 分发包中的一个错误，维护者[现已修复](https://github.com/beberlei/AzureDistributionBundle/commit/960916446fe9779685e6b280d917bf1cf0accd81)。

# android - 无法提供评分功能

> ID：15247741
> 
> 赞同：1
> 
> 时间：2013-03-06T12:46:13.817
> 
> 标签：android, google-play

我正在尝试在我的应用程序中提供评级功能，但是当我点击`rate`它时说，“未找到请求的项目”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:28:16.037

尝试使用此代码

```
 private void rateAppOnPlayStore() {
    Uri uri = Uri.parse("market://details?id=" + getPackageName());
    Intent myAppLinkToMarket = new Intent(Intent.ACTION_VIEW, uri);
    try {
        startActivity(myAppLinkToMarket);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(this, "Unable to find google play app.",
                Toast.LENGTH_LONG).show();
    }
} 
```

这也适用于`Market`应用程序。

# java - RSS 2.0 提要中的 RFC-822 日期时间格式：不接受 CET？

> ID：15247742
> 
> 赞同：9
> 
> 时间：2013-03-06T12:46:14.117
> 
> 标签：java, date, formatting, rss, atom-feed

[使用工作解决方案更新] 我有一个 RSS 提要，它可以在 RSS 客户端中正确显示，但是在通过[http://feedvalidator.org](http://feedvalidator.org)验证时出现此错误：

```
pubDate must be an RFC-822 date-time 
```

我的日期格式如下：

**`Wed, 27 Feb 2013 17:18:15 CET`**

知道有什么问题吗？可能是时区吗？

# **解决方案**

感谢 Calum，我现在得到了一个有效的 RSS 提要。原因`CET`是`pubDate`.

以下 Java 代码现在可以正常工作：

```
String pubDate = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z").format(new Date()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T12:50:56.743

[RFC](http://www.rfc-editor.org/rfc/rfc822.txt)表明它只支持非常有限的一组符号时区名称；只是 UTC 和美国的：

```
 zone        =  "UT"  / "GMT"                ; Universal Time
                                             ; North American : UT
             /  "EST" / "EDT"                ;  Eastern:  - 5/ - 4
             /  "CST" / "CDT"                ;  Central:  - 6/ - 5
             /  "MST" / "MDT"                ;  Mountain: - 7/ - 6
             /  "PST" / "PDT"                ;  Pacific:  - 8/ - 7
             /  1ALPHA                       ; Military: Z = UT;
                                             ;  A:-1; (J not used)
                                             ;  M:-12; N:+1; Y:+12
             / ( ("+" / "-") 4DIGIT )        ; Local differential
                                             ;  hours+min. (HHMM) 
```

您可能需要指定为 UTC 的偏移量。

由于您说您使用的是 Java，因此如果您使用时间格式（而不是 ）来格式化区域，[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)似乎会给您一个符合 RFC-822 的日期。`Z``z`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-17T19:06:16.763

您必须使用[Calum](https://stackoverflow.com/users/8434/calum)`Z`所说的格式化时区，但不要忘记指定时区，否则如果计算机不是英文的，它将无法工作......`Locale`

这是我的工作代码：

```
new SimpleDateFormat("E, d MMM yyyy HH:mm:ss Z", Locale.US).format(new Date()); 
```

# php - 上传图像并将其存储在两个不同的目录中

> ID：15247744
> 
> 赞同：0
> 
> 时间：2013-03-06T12:46:15.970
> 
> 标签：php, html, mysql, file-upload

嗨，我有一个有两个文件上传器的表单。我想让第二个文件上传器上传图像并将其存储在两个不同的文件夹中。

谁能帮我吗？这是我的 HTML 代码：

```
<input type="file" name="file" id="file"><br>
<input type="submit" name="upload" value="Upload Image">
<input type="file" name="thumb" id="thumb"><br>
<input type="submit" name="updthumb" value="Upload Thumb impression"> 
```

这是我的PHP代码：

```
if(isset($_POST["upload"])){

    $image ="upload/";
     move_uploaded_file($_FILES["file"]["tmp_name"], $image . $_FILES["file"]["name"]);

    $newfilepath2 = $image . $_FILES["file"]["name"];

    mysql_query("UPDATE `candidate` SET `imgpath`='$newfilepath2' WHERE vouchno='$vouch'") or die(mysql_error());
    header("refresh: 1; candproc.php?vouchno=$vouch");

} 
```

谁能帮忙告诉我如何上传图像并将其保存在不同的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:52:02.717

就像是：

```
$thumbspath ="thumbs/";
$thumb = $thumbspath . $_FILES["thumb"]["name"];
move_uploaded_file($_FILES["thumb"]["tmp_name"], $thumb); 
```

对于第二个文件，保存到目录中`thumbs`

你应该设置你的表单：

```
<form action="phpscript.php" method="post" enctype="multipart/form-data">
 <input type="file" name="file" id="file"><br>
 <input type="file" name="thumb" id="thumb"><br>
 <input type="submit" name="upload" value="Upload files">
</form> 
```

请注意，这`enctype="multipart/form-data"`是文件上传所必需的。

# android - Android SqlLite 更新最后插入的行

> ID：15247748
> 
> 赞同：0
> 
> 时间：2013-03-06T12:46:22.367
> 
> 标签：android

这就是我用于插入的内容：

```
 public long insert(String content, Date startAt, Date endAt) {
        if (content == null || startAt == null) {
            return 0;
        }

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        contentValues.put(KEY_START_AT, startAt.getTime());
        if (endAt == null) {
            contentValues.putNull(KEY_END_AT);
        } else {
            contentValues.put(KEY_END_AT, endAt.getTime());
        }

        return sqLiteDatabase.insert(TABLE_NAME, null, contentValues);
    } 
```

现在我想创建更新方法来更新最后插入的行。我怎样才能得到最后插入的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:52:13.073

您可以使用 a`cursor`来检索行并说：

```
 cursor.moveToLast(); 
```

或者

```
 cursor.moveToPosition(cursor.getCount() - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:43:37.293

如果您有一个用作主键的 id 属性，则可以在 SqlLite 上执行原始数据库查询。

```
Cursor cc = this.mDb.rawQuery("SELECT *" + " FROM " + "<Your DATABASE_NAME> " + 
"ORDER BY id " + "DESC LIMIT 1", null);
return cc; 
```

在这里，1\. 它返回一个游标。2\. mDb 是一个 SQLiteDatabase 类实例。3\. ORDER BY id 允许查询按id号排序。正如我所说，如果您的表中有一个 id 作为主键，那么您的最新条目将具有最大的 id 编号。4\. DESC 允许按降序排序。5\. LIMIT 1 只允许返回 1 行。6\. 编写原始查询时要小心，如果不小心处理查询中的空格，可能会很痛苦。

如需进一步查询，您可以查看[本](http://saigeethamn.blogspot.com/2009/10/android-developer-tutorial-part-12.html)教程。显然，Divya 的回答也是一个不错的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:48:30.983

当您在表中插入一行时，插入查询将返回最后插入行的键。您现在可以使用此键来更新此行。

例如

int newInsertedKey = sqLiteDatabase.insert(TABLE_NAME, null, contentValues);

update table_name set column_name = 'Change 2' where columnID = newInsertedKey

一种有效的方法是避免数据库查询以获取最后更新的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:27:38.247

也许他应该使用这样的东西

```
public long getLastId() {
    Cursor c = mDb.query(currentTableName, new String[] { "MAX(_id)" },
            null, null, null, null, null, null);

            try{
    c.moveToFirst();
    long id = c.getLong(0);
    return id;
            }catch(Exception e){
              return 0;
            } 
```

}

其中 _id 是用于识别行的列

# eclipse - Eclipse 与 Java EE (EJB)、ANT 和 Jenkins / Hudson

> ID：15247751
> 
> 赞同：3
> 
> 时间：2013-03-06T12:46:27.597
> 
> 标签：eclipse, jakarta-ee, ant, jenkins, ejb-3.0

我的目标是在 Jenkins 上构建一个企业 Java 应用程序。该应用程序由 4 个项目（客户端接口、Webapplcation（包括 Faces）、EJB 应用程序（包括 JPA）、EAR-Container-Project）组成。

当 Eclipse 将此项目部署到 glassfish 服务器时，它会将 Web 应用程序（war 文件）、客户端接口（jar 文件）和 EJB 接口（jar 文件）组装到一个耳文件中。

现在，如果我想使用持续集成，我需要在 CI-Server jenkins 上实现相同的功能。

我的第一个想法是用 ant 解决这个问题，所以我使用了 Eclipse 的 Export-Function 并为项目生成了 build-Files。

问题是生成的构建文件引用了项目目录之外的 Java EE 库（例如 Glassfish-Runtime、JPA-Library 等）。大约有30个图书馆。

这意味着我无法在 jenkins 上使用该文件，因为缺少此库。我当然可以复制这些，但我认为不应该这样做。

那么，在 CI 服务器上构建 Java EE 企业应用程序的最佳方法是什么？我必须自己编写 ANT-Script 并将库复制到项目中吗？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:07:56.653

由于我没有找到适合我的东西，我自己编写了一个 ant 脚本来满足我的需求。

如果这对将来的任何人有帮助，这是我的解决方案：`

```
<project basedir="." default="build" name="Project">

<available property="glassfishdir" value="/opt/glassfish3/glassfish/modules" 
         file="/opt/glassfish3/glassfish/modules" type="dir" />

<!-- ########### Property Declarations ###################################################################################################################  -->
<property name="debuglevel" value="source,lines,vars"/>
<property name="target" value="1.6"/>
<property name="source" value="1.6"/>
<property name="builddir" value="build" />
<property name="outputartifacts" value="out" />

<property name="web.name" value="ProjectWeb" />
<property name="web.projectpath" value="ProjectWeb"/>
<property name="web.src" value="${web.projectpath}/src" />
<property name="web.builddir" value="${builddir}/web" />
<property name="web.builddir.classes" value="${web.builddir}/WEB-INF/classes"/>

<property name="ejb.name" value="ProjectEJB" />
<property name="ejb.projectpath" value="ProjectEJB"/>
<property name="ejb.src" value="${ejb.projectpath}/src"/>
<property name="ejb.builddir" value="${builddir}/ejb" />
<property name="ejb.builddir.classes" value="${ejb.builddir}/classes" />

<property name="ejbclient.name" value="ProjectEJBClient" />
<property name="ejbclient.projectpath" value="ProjectEJBClient"/>
<property name="ejbclient.src" value="${ejbclient.projectpath}/src"/>
<property name="ejbclient.builddir" value="${builddir}/ejbclient" />
<property name="ejbclient.builddir.classes" value="${ejbclient.builddir}/classes"/>

<property name="ear.name" value="ProjectApplication" />
<property name="ear.dir" value="ProjectEAR" />

<!-- ########### Main Targets ###################################################################################################################   -->
<target name="build" depends="create-ear">
</target>

<target name="clean-build">
    <antcall target="clean" />
    <antcall target="build" />
</target>

<target name="clean">
    <delete dir="${builddir}"/>
    <delete dir="${outputartifacts}"/>
</target>

<target name="init">
    <mkdir dir="${outputartifacts}" />
</target>

<!-- ########### EJB App ###################################################################################################################    -->
<target name="init-ejb" depends="init">
    <mkdir dir="${ejb.builddir}" /> 
    <copy includeemptydirs="false" todir="${ejb.builddir.classes}">
        <fileset dir="${ejb.src}">
            <exclude name="**/*.java"/>
        </fileset>
    </copy>
</target>
<target name="build-ejb" depends="init-ejb">
    <javac debug="true" debuglevel="${debuglevel}" destdir="${ejb.builddir.classes}" includeantruntime="false" source="${source}" target="${target}">
        <src path="${ejb.src}"/>
        <classpath>
            <fileset dir="${glassfishdir}">
                <include name="**/*.jar"/>
            </fileset>  

            <fileset dir="${outputartifacts}">
                <include name="**/*.jar"/>
            </fileset>                  
        </classpath>
    </javac>
</target>

<!-- ########### WEB ###################################################################################################################    -->
<target name="init-web" depends="init">
    <mkdir dir="${web.builddir.classes}"/>  
    <copy includeemptydirs="false" todir="${web.builddir}">
        <fileset dir="${web.projectpath}/WebContent">
        </fileset>
    </copy>
    <copy includeemptydirs="false" todir="${web.builddir.classes}">
        <fileset dir="${web.src}">
            <exclude name="**/*.java"/>
        </fileset>
    </copy>
</target>

<target depends="init-web,create-ejb-client" name="build-web">
    <javac debug="true" debuglevel="${debuglevel}" destdir="${web.builddir.classes}" includeantruntime="false" source="${source}" target="${target}">
        <src path="${web.src}"/>
        <classpath>
            <fileset dir="${glassfishdir}">
                <include name="**/*.jar"/>
            </fileset>
            <fileset dir="out/">
                <include name="**/*.jar"/>
            </fileset>  
        </classpath>
    </javac>
</target>
<!-- ############## EJB CLIENT ################################################################################################################ -->
<target name="init-ejb-client" depends="init">
    <mkdir dir="${ejbclient.builddir}"/>
    <copy includeemptydirs="false" todir="${ejbclient.builddir.classes}">
        <fileset dir="${ejbclient.src}">
            <exclude name="**/*.java"/>
        </fileset>  
    </copy>
</target>

<target depends="init-ejb-client" name="build-ejb-client">
    <javac debug="true" debuglevel="${debuglevel}" destdir="${ejbclient.builddir.classes}" includeantruntime="false" source="${source}" target="${target}">
        <src path="${ejbclient.src}"/>
        <classpath>
            <fileset dir="${glassfishdir}">
                <include name="**/*.jar"/>
            </fileset>          
        </classpath>
    </javac>
</target>

<!-- ############ CREATE ARCHIVES################################################################################################################## -->
<target name="create-web" depends="build-web">
    <war destfile="${outputartifacts}/${web.name}.war" basedir="${web.builddir}" webxml="${web.projectpath}/WebContent/WEB-INF/web.xml"/>
</target>

<target name="create-ejb-client" depends="build-ejb-client">
    <jar destfile="${outputartifacts}/${ejbclient.name}.jar" basedir="${ejbclient.builddir.classes}" includes="**/*"/>
</target>

<target name="create-ejb" depends="build-ejb">
    <jar destfile="${outputartifacts}/${ejb.name}.jar" basedir="${ejb.builddir.classes}" includes="**/*">
        <manifest>
            <attribute name="Class-Path" value="${ejbclient.name}.jar"/>
        </manifest>
    </jar>
</target>

<target name="create-ear" depends="create-ejb-client,create-web,create-ejb">
    <ear destfile="${outputartifacts}/${ear.name}.ear" appxml="${ear.dir}/EarContent/META-INF/application.xml">
        <fileset dir="${outputartifacts}" includes="*.jar,*.war"/>
    </ear>
</target>

</project> 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:29:36.097

使用 Maven。
Maven 允许在单个 xml 文件 (pom) 中定义所有依赖项，这些依赖项将在编译阶段自动从 Internet 下载。
Maven 附带了一组插件来促进持续集成，例如能够启动容器、运行测试并自动关闭它。Maven 与 jenkins 原生集成。
Maven 定义了一个复杂的生命周期，专为此类问题而设计，并允许使用从 jenkins 触发的单个命令编译、运行单元测试、打包、运行集成测试和部署；

Maven 绝对是这里的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T09:05:42.937

您还可以使用项目上下文菜单中的“Export... > General\Ant Buildfile”在 Eclipse 中自动创建 build.xml。这样，正确的类路径就会生成到项目中已经可用的 JAR。

如果项目之间存在依赖关系，您只需配置一个构建文件以在 Jenkins 上运行，因为它会自动调用其他项目的构建文件。

# java - GUI 客户端 - JAVA 中的服务器

> ID：15247752
> 
> 赞同：2
> 
> 时间：2013-03-06T12:46:27.623
> 
> 标签：java, user-interface, object, client-server

伙计们，我已经尝试了很多方法来做到这一点，但我无法让它发挥作用。基本上我有一个客户端（通过终端）和一个服务器询问姓名、标记和年龄，当我们输入这三个时，服务器会写回详细信息。我的问题是如何使它成为完整的 GUI，以便在 GUI 上编写详细信息并在那里接收它们。

这是客户端的代码。

```
import java.util.*;
import java.net.*;
import java.io.*;
public class Student implements Serializable
{

String name;
int mark;
int age;

public Student (String n, int a,int ag){
name=n;mark=a;age=ag;
  } 

public String toString(){
    return "Name:"+name+" Age: "+age+ " Mark:"+mark ;
}
}

class objectClient1{
public static void main(String[] args) throws Exception{

Socket s = new Socket("localhost",5000);
ObjectOutputStream p =new ObjectOutputStream(s.getOutputStream());
ObjectInputStream q =new ObjectInputStream(s.getInputStream());
Scanner b = new Scanner(System.in); 
int c;
System.out.println("Student name: ");
while(b.hasNext()) {
 String name=b.nextLine();  
 System.out.println("Mark: ");
 int mark=Integer.parseInt(b.nextLine());

System.out.println("Age: ");
 int age=Integer.parseInt(b.nextLine());
 p.writeObject(new Student(name,mark,age));
 p.flush();
 System.out.println(q.readObject());

   }
  }
 } 
```

这是针对服务器的：

```
import java.io.*;
import java.net.*;

class objectEchoServer
{
 public static void main(String[] argv) throws Exception
 {ServerSocket s = new ServerSocket(5000);
 Socket t = s.accept();//wait for client to connect
 System.out.println("server connected");
 ObjectInputStream b = new ObjectInputStream(t.getInputStream());
 ObjectOutputStream q = new ObjectOutputStream(t.getOutputStream());
 Object c;
 while((c=b.readObject())!=null) { 
                        q.writeObject(c);      

           }
             }
 } 
```

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:04:56.163

在这里你有整个事情：

对于客户：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class ClientSocketFrame extends JFrame implements ActionListener {
    JLabel lblName;
    JLabel lblAge;
    JLabel lblMark;
    JTextField txtName;
    JTextField txtAge;
    JTextField txtMark;
    JButton btnProcess;
    JTextArea txtS;

    public ClientSocketFrame() {
        this.setTitle("Simple Sample");
        this.setSize(320, 240);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(null);

        lblName = new JLabel("Name: ");
        lblName.setBounds(10, 10, 90, 21);
        add(lblName);

        txtName = new JTextField();
        txtName.setBounds(105, 10, 90, 21);
        add(txtName);

        lblAge = new JLabel("Age: ");
        lblAge.setBounds(10, 35, 90, 21);
        add(lblAge);

        txtAge = new JTextField();
        txtAge.setBounds(105, 35, 90, 21);
        add(txtAge);

        lblMark = new JLabel("Mark: ");
        lblMark.setBounds(10, 60, 90, 21);
        add(lblMark);

        txtMark = new JTextField();
        txtMark.setBounds(105, 60, 90, 21);
        add(txtMark);

        btnProcess = new JButton("Process");
        btnProcess.setBounds(200, 40, 90, 21);
        btnProcess.addActionListener(this);
        add(btnProcess);

        txtS = new JTextArea();
        txtS.setBounds(10, 85, 290, 120);
        add(txtS);

        this.setVisible(true);
    }

    public static void main(String[] args) {
        new ClientSocketFrame();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource().equals(btnProcess)) {
            try {
                processInformation();
            } catch (UnknownHostException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    }

    public void processInformation() throws UnknownHostException, IOException {
        Socket s = new Socket("localhost", 5000);
        ObjectOutputStream p = new ObjectOutputStream(s.getOutputStream());

        String name = txtName.getText();
        int mark = Integer.parseInt(txtMark.getText());
        int age = Integer.parseInt(txtAge.getText());

        p.writeObject(new Student(name, age, mark));
        p.flush();

        // Here we read the details from server
        BufferedReader response = new BufferedReader(new InputStreamReader(
                s.getInputStream()));
        txtS.setText("The server respond: " + response.readLine());
        p.close();
        response.close();
        s.close();
    }

} 
```

对于服务器：

```
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class ObjectServer {

    public static void main(String[] argv) throws Exception {
        ServerSocket s = new ServerSocket(5000);
        System.out.println("Server started");
        while (true) {
            Socket t = s.accept();// wait for client to connect
            System.out.println("server connected");
            ObjectInputStream b = new ObjectInputStream(t.getInputStream());
            Student received = (Student) b.readObject();
            PrintWriter output = new PrintWriter(t.getOutputStream(), true);
            output.println("Student " + received.getName() + " with age: "
                    + received.getAge() + " has been received");
            b.close();
            output.close();
            t.close();
        }

    }
} 
```

并且不要忘记您的 bean 或 dto：

```
public class Student implements Serializable {

    private String name;
    private int age;
    private int mark;

    public Student(String name, int age, int mark) {
        this.name = name;
        this.age = age;
        this.mark = mark;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public int getMark() {
        return mark;
    }

    public void setMark(int mark) {
        this.mark = mark;
    }

} 
```

# c# - SSCE 4 无法从 Outlook 插件加载本机组件异常

> ID：15247753
> 
> 赞同：0
> 
> 时间：2013-03-06T12:46:29.387
> 
> 标签：c#, .net, visual-studio-2010, sql-server-ce

我们有一个使用 SSCE 4 和私有部署的 wpf .net 应用程序，效果很好

但是还有一个 Outlook 插件会引发以下异常

> System.Data.SqlServerCe.SqlCeException 被捕获
> HResult=-2147467259 消息=无法加载与版本 8876 的 ADO.NET 提供程序对应的 SQL Server Compact 的本机组件。安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。Source="" ErrorCode=-2147467259
> NativeError=-1 StackTrace:

```
 at System.Data.SqlServerCe.NativeMethods.LoadNativeBinaries()
    at System.Data.SqlServerCe.SqlCeConnection..ctor()
    at System.Data.SqlServerCe.SqlCeConnection..ctor(String connectionString)
    at ZKB.initDB() in C:\ZKB\OutlookApi\dbInit.cs:line 42   InnerException: 
```

执行以下行时

```
 SqlCeConnection connection = new SqlCeConnection(myConnStr()); 
```

挂钩 Assembly.Resolve 显示它试图定位

System.Data.SqlServerCe.resources，版本=4.0.0.1，文化=en-US，PublicKeyToken=89845dcd8080cc91

然后出现上面的异常

SSCE 4 SP1 安装在这台机器上

关于可能出现的问题以及如何解决此问题的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:22:37.843

您不能使用 Office 插件中的私有部署，这将要求您将 sqlce dll 文件放在 Outlook.exe 的位置下（甚至不确定它是否会工作）

# php - 从 mysqli_result 对象到字符串

> ID：15247766
> 
> 赞同：1
> 
> 时间：2013-03-06T12:47:19.353
> 
> 标签：php, sql, mysqli

我有一个 mysqli_result 对象这样做：

```
 $mysqli->real_query("SELECT * FROM users WHERE `level` > 2");
    $user_list = $mysqli->use_result();
    print_r($user_list); die(); 
```

这样做， print_r 给我：

```
mysqli_result Object ( [current_field] => 0 [field_count] => 6 [lengths] => [num_rows] => 0 [type] => 1 ) 
```

后来我只是`while ($row = $user_list->fetch_assoc())`用来解析所有的内容。想法是在我想`num_rows`从 mysqli_result 对象中检索之前，但只做 $user_list['num_rows'] 不起作用：

> 致命错误：不能使用 mysqli_result 类型的对象作为数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:50:41.707

`$user_list->num_rows`行得通吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:50:17.597

你必须得到`num_rows`使用`$result->num_rows`

```
if ($result = $mysqli->query("")) {

    /* determine number of rows result set */
    $row_cnt = $result->num_rows;
} 
```

拿到后就`num_rows`可以拿了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T09:03:12.153

试试这个，在我的情况下它有效:)

```
$query  = "SELECT * FROM users WHERE `level` > 2";
$result = mysqli_query($connection, $query);
while ($rows = mysqli_fetch_array($result, MYSQLI_NUM)) {
     var_dump($rows);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:13:41.700

```
$mysqli->real_query("SELECT * FROM users WHERE `level` > 2");
$user_list = $mysqli->use_result();
echo $user_list->num_rows; 
```

# java - libgdx 中两个 BoundingBox 之间的碰撞检测

> ID：15247768
> 
> 赞同：1
> 
> 时间：2013-03-06T12:47:22.543
> 
> 标签：java, android, collision-detection, libgdx, game-physics

在我的 libgdx 游戏中，我有用于地图和玩家对象的 3D 边界框。我想知道它们是否在 3D 空间中发生碰撞。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:47:22.543

您可以使用以下方法：

```
 public static boolean intersectsWith(BoundingBox boundingBox1, BoundingBox boundingBox2) {
        Vector3 otherMin = boundingBox1.getMin();
        Vector3 otherMax = boundingBox1.getMax();
        Vector3 min = boundingBox2.getMin();
        Vector3 max = boundingBox2.getMax();

        return (min.x < otherMax.x) && (max.x > otherMin.x)
            && (min.y < otherMax.y) && (max.y > otherMin.y)
            && (min.z < otherMax.z) && (max.z > otherMin.z);
    } 
```

它仿照这种方法：[https ://github.com/MasDennis/Rajawali/blob/master/src/rajawali/bounds/BoundingBox.java#L186](https://github.com/MasDennis/Rajawali/blob/master/src/rajawali/bounds/BoundingBox.java#L186)

# jquery - Z-index 和 IE<9，适当的分层

> ID：15247773
> 
> 赞同：0
> 
> 时间：2013-03-06T12:47:33.480
> 
> 标签：jquery, html, css

我正在尝试为 IE 9 及以下版本的 HTML 5 占位符编写简单的插件。我的问题是，虽然我给了我的输入更高的 z-index，标签元素仍然在它的“顶部”，因此焦点/点击有问题。

这是我的 JS 代码：

```
$.fn.placeholder = function () {
    return this.each( function () {
        var elem = $( this );

        if ( elem.is( "input" ) || elem.is( "textarea" ) ) {
            var placeholder = elem.attr( "placeholder" ),
                wrapper = $( "<span></span>" ).css( {"position":"relative", "display":"inline-block"} ),
                label = $( "<label></label>" ).text( placeholder ),
                border = elem.outerWidth() - elem.innerWidth(),
                paddingH = elem.innerWidth() - elem.width(),
                paddingV = elem.innerHeight() - elem.height(),
                left = elem.outerWidth( true ) - elem.width() - Math.floor( (paddingH / 2) ) - border,
                top = elem.outerHeight( true ) - elem.height() - Math.floor( (paddingV / 2) ) - border;

            label.css( {
                "position":"absolute",
                "top":top,
                "left":left,
                "color":"#a9a9a9",
                "z-index":10
            } );
            elem.css( "z-index", 1000 ).css( "position", "relative" );
            elem.wrap( wrapper );
            elem.parent().prepend( label );

            elem.focus( function () {
                elem.parent().find( "label" ).hide();
            } );
            elem.blur( function () {
                elem.parent().find( "label" ).toggle( $.trim( elem.val() ).length == 0 );
            } );
        }
    } );
};

//somewhere on document.ready
$("input").placeholder();
$("textarea").placeholder(); 
```

HTML：

```
<div>
    <input type="text" placeholder="Some placeholder" name="name">
    <textarea name="request" placeholder="Other placeholder"></textarea>
</div> 
```

CSS：

```
input {
    padding: 5px 10px;
    background: transparent;
}

textarea {
    resize: none;
    padding: 30px;
    background: transparent;
} 
```

当您尝试在 IE 下单击 input/textarea 时，光标不会变为“文本”之一，并且单击该区域没有任何效果，您需要单击标签范围之外的内容才能专注于输入。

JSFiddle：http: [//jsfiddle.net/7SXBC/2/](http://jsfiddle.net/7SXBC/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:01:32.020

我不确定你想用`z-index`. 如果您实现`input`在 顶部获得 - 元素`label`，您将根本看不到`label`。

为什么不绑定`click`-event来触发/`label`的焦点？它看起来像这样：`input``textarea`

```
label.click(function(e){
    elem.trigger('focus');
}); 
```

**更新：**您的问题可能涉及以下错误：

[带透明背景的输入框在 IE8 中不可点击](https://stackoverflow.com/questions/2098714/input-boxes-with-transparent-background-are-not-clickable-in-ie8)

# assembly - 实模式下的 NASM 远跳转/远调用和 ASM 代码约定

> ID：15247774
> 
> 赞同：0
> 
> 时间：2013-03-06T12:47:33.783
> 
> 标签：assembly, x86, nasm, bootloader

最近几天我尝试制作一个引导加载程序，结果如下：

```
BITS 16

;CONSTANTS
BOOTSEG     equ 07C0h
STACKSEG    equ 1BC0h ; BOOTSEG + 512 Byte (bootloader) + 512 Byte (second stage) + 4096 Byte (buffer) = 1BC0h
STACKSIZE   equ 0400h ; 1KB stack

; INIT
    mov AX, BOOTSEG     
    mov DS, AX      ; set data segment to adress where bootloader will be loaded to
    mov AX, STACKSEG
    cli         ; disable interrupts while set up stack
    mov SS, AX  
    mov SP, STACKSIZE   ; set up stack
    sti         ; restore interrupts
    mov [bootdev], DL   ; save boot device number

;START
    mov SI, string      ; get the adress of the string to print into SI 
    call _printstring

;LOAD 2nd STAGE
    mov AH, 02h     ; int 13h subfunction ah=02
    mov AL, 01h     ; read 1 sector
    mov CX, 02h     ; begin read at track 0, sector 2
    mov DH, 00h     ; head = 0 ????
    mov DL, [bootdev]   ; read from boot device
    mov BX, BOOTSEG     
    add BX, 512
    mov ES, BX      ; write second stage right after first stage
    mov BX, 00h

    int 13h         ; do it
    jc fail
    mov SI, success     ; OK
    call _printstring

    jmp 09C0h:0000h     ; jump to second stage, execute it
                ; does not work:
                    ; 1)    jmp ES:BX
                    ;
                    ; 2)    push ES
                    ;   push BX
                    ;   retf

fail:   
    mov SI,error        ; error on reading second stage
    call _printstring

loop:   
    jmp loop        ; infinite loop at the end

_printhex:
; AX: hex value to print
; Modifies: AX, BX, DX, CX

    mov CX, 4
start:  mov DX, 00h
    mov BX, 10h
    div BX
    cmp DX, 9
    jg letter
    add DL, 30h
    jmp store

letter: add DL, 37h

store:  push DX
    dec CX
    jnz start
    mov CX,4

print:  pop AX
    call _printchar
    dec CX
    jnz print 
    mov AL, 13
    call _printchar
    mov Al, 10
    call _printchar 
    ret

_printchar:
; print char in AL
; Modifies: AX, BX

    mov AH, 0Eh
    mov BX, 07h
    int 10h
    ret

_printstring:
; SI : start adress of string
; Modifies: AX , BX , SI

m1: lodsb           ; Loads [SI] into AL and increases SI by one    
    or AL, AL       ; check if AL = 0
    jz finish       ; then finish
    call _printchar     ; else print charakter
    jmp m1

finish: 
    ret         ; return from the printstring call

;DATA
    string db 'Started my first Bootloader', 13, 10, 0
    success db 'Success', 13, 10, 0
    error db 'Error', 13, 10, 0
    bootdev db 0

; MAKE BOOTSECTOR
    times 510-($-$$) db 0       ; fill up the sector to 512 - 2 = 510 bytes
    dw 0AA55h           ; set the two bootsector identifying bytes

; SECOND STAGE
    add BX, 10
    mov AL, 'A'
    mov AH, 0Eh 
    mov BX, 07h
    int 10h     ; test output

loop2:
    jmp loop2   ; infinite loop at the end 
```

现在我有两个问题：

1.  在第 43 行，我必须使用带绝对地址的跳转，但我想使用`ES`and的值`BX`。因此，我尝试了您可以在评论中看到的两种替代方案，但它们对我不起作用。我究竟做错了什么？

2.  我对低级编程很陌生。我的代码中是否存在一些重大或次要错误？有没有我没有考虑过的代码风格约定？

我不想格式化代码，所以这里是 asm 文件的链接，你可以用你最喜欢的编辑器阅读它： [https ://www.dropbox.com/s/i3jpprf66nlmzz2/mybootloader.asm?m](https://www.dropbox.com/s/i3jpprf66nlmzz2/mybootloader.asm?m)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T13:18:34.373

```
jmp 09C0h:0000h 
```

和

```
push ES
push BX
retf 
```

应该同样有效（当然，在后一种情况下提供`ES`=9C0h 和`BX`=0）。

并且`jmp ES:BX`不是一个有效的指令，或者，至少，它不会做你可能期望的事情。

可能出现的问题：

*   9C0h:0 是错误的地址
*   您在 9C0h:0 处没有预期的代码（读取失败或您要求 BIOS 将读取的数据存储在不同的位置）
*   9C0h:0 处的代码未编译为在偏移量 0 处开始执行（请记住，x86 机器代码通常与位置无关）
*   别的东西，可能是代码/数据损坏或未初始化的变量/寄存器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:05:25.313

我发现了这个错误。一个非常愚蠢的错误：在触发中断之前，_printstring 函数覆盖了 BX 寄存器。我修复了它，现在跳转确实像 Alexey Frunze 所描述的那样工作 - 谢谢：

> 推ES
> 
> 推BX
> 
> 回复

此外，我在段寻址方面犯了一个错误（也感谢 Alexey Frunze）：我想在 512 字节长的第一阶段之后立即加载第二阶段。所以提到段/偏移地址（物理地址 = 16 * 段 + 偏移）我必须将 512/16 = 32 = 20H 添加到 07C0。所以值必须是：ES = 07E0H 和 BX = 0000H

# javascript - 用 JavaScript 中的参数替换传单坐标

> ID：15247775
> 
> 赞同：-3
> 
> 时间：2013-03-06T12:47:34.427
> 
> 标签：javascript, coordinates, leaflet

我希望传单坐标是可变的。所以而不是：

```
var peil = new L.Polygon([
    [52.36889, 4.91501],
    [52.29714, 4.87038],
    [52.30806, 5.04616],
    [52.46772, 4.82849]
    ]); 
```

我想要类似的东西

```
var peil = new L.Polygon([
      var1,
      var2,
      var3,
      etc.
     ]); 
```

有人可以帮助我吗，我在 Google 或 StackOverflow 本身上找不到任何有用的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:22:12.547

你有一个浮点数组。您想要的示例将正常工作，您可以在创建[数组文字](http://www.javascriptkit.com/javatutors/literal-notation.shtml)时使用变量。有几种方法可以给这只猫剥皮，这里有几种：

```
var var1, var2, var3, etc;
var1 = [52.36889, 4.91501];
var2 = [52.29714, 4.87038];
var3 = [52.30806, 5.04616];
etc = [52.46772, 4.82849];

//adding the arrays using literal notation
var coordinates = [var1, var2, var3, etc];

//adding the arrays to a new array condensed
var coordinates = new Array(var1,var2,var3,etc);

//adding the arrays to a new array via push
var coordinates = [];
coordinates.push(var1);
coordinates.push(var2);
coordinates.push(var3);
coordinates.push(etc);

//adding the arrays to a new array via index
var coordinates = [];
coordinates[0] = var1;
coordinates[1] = var2;
coordinates[2] = var3;
coordinates[3] = etc;

var peil = new L.Polygon(coordinates); 
```

# c# - FileSystemWatcher 检测到更改后读取文本文件的最后一行

> ID：15247778
> 
> 赞同：1
> 
> 时间：2013-03-06T12:47:48.233
> 
> 标签：c#, filesystemwatcher

我是 c# 的新手，所以请原谅我的无知，我在文本文件上运行 fileSystemWatcher。它工作正常，我可以在文件更改后执行一些简单的任务。除了我想做的一切。我正在尝试读取已使用此代码更改的文本文件的最后一行

```
public void File_Changed( object source, FileSystemEventArgs e )
{
    string MACH1 = File.ReadText(@"C:\MACHINE_1.txt").Last();
    if (MACH1=="SETUP")
    {
        MACHINE1IND.BackColor = Color.Green; 
    }
    else
    {
        MACHINE1IND.BackColor = Color.Red; 
    }
} 
```

它在按钮内可以正常工作，但在文件观察程序之后却不行。说找不到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:05:07.583

您必须在访问之前检查该文件是否存在。

```
public void File_Changed(object source, FileSystemEventArgs e)
{
    string filePath = @"C:\MACHINE_1.txt";
    if(!File.Exists(filePath)) //Checks if file exists
        return;
    string MACH1 = File.ReadText(filePath).Last();
    if (MACH1=="SETUP")
    {
        MACHINE1IND.BackColor = Color.Green; 
    }
    else
    {
        MACHINE1IND.BackColor = Color.Red; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:58:48.040

需要注意的一件事是 FSW 可以在保存操作期间发出多个更改通知。您无法知道保存何时完成。因此，您需要始终将代码包装在 try..catch 块中，并支持在超时后重试以完成文件写入。通常，我会尝试将文件移动到我将进行处理的临时位置。如果移动失败，请等待几秒钟，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:17:44.763

`Created`正如 Jim Wooley 在他的回答中解释的那样，当 FSW 触发或`Changed`事件时，文件操作可能仍在进行中。如果 FSW 用于在两个应用程序之间进行通信，并且您也控制“发送”应用程序，则可以通过以下方式解决问题：

将信息写入临时文件。关闭文件。重命名临时文件并给它一个明确的名称。

在另一个应用程序（接收器）中，`Renamed`使用`FileSystemWatcher`. 重命名的文件保证是完整的。

# c++ - 如何使用 libgit2 初始化 git 存储库

> ID：15247780
> 
> 赞同：1
> 
> 时间：2013-03-06T12:48:02.520
> 
> 标签：c++, windows, libgit2

在 Windows XP 32 位机器上，我使用克隆了 libgit2 存储库

```
git clone git://github.com/libgit2/libgit2.git trunk 
```

然后我从trunk_build_debug为mingw配置了：

```
cmake ../trunk -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_FLAGS=-g 
```

并用

```
make 
```

使用这个新建的库，我正在尝试创建一个新的存储库。所以我正在使用

```
 error_code = git_repository_init( &repo, path, 0 );
    if ( error_code != 0 )
    {
        const git_error * error = giterr_last();
       /* the text representation:
        ( error == NULL || error->message == NULL ? 
        "(no description)" : 
        error->message )
        */
    } 
```

第一次尝试失败并显示错误消息：

> Git错误-1：全局文件'.config/git/config'不存在：系统找不到指定的文件。

.git 目录已创建，我可以使用`git status`它来查询它。另外，我在 Program Files/git 中安装了 git，它工作得很好。提到的文件在用户目录中不存在，这是真的。我不高兴，因为我无法检查返回的错误代码（错误可能是“真实的”）。

所以我在 D:\Documents and Settings\User Name.config\git\config 中创建了一个空文件 .git 目录再次创建，但我得到相同的 -1 错误代码。这次 giterr_last() 返回 NULL。

在调试器中跟踪代码似乎表明该库对我的空文件不满意。

但是，我认为这表明我做错了什么。有初始化方法吗？我是否需要创建文件并使用 git_config_ 函数将库指向它？

顺便说一句，这是问这个错误的地方吗？有专门的论坛我应该问这个问题吗？

谢谢

* * *

这是调用失败的回溯：[pastebin](http://pastebin.com/eJA7manB) 似乎无法解析 .git 目录中的配置文件（跟踪中未显示的是失败的 'config_parse()'）。

* * *

我在 libgit2 中打开[了一个问题。](https://github.com/libgit2/libgit2/issues/1400)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:38:29.080

To create a new repository, one should rather rely on `git_repository_init()`. For more information, you can peek at the **[header](https://github.com/libgit2/libgit2/blob/development/include/git2/repository.h#L139-157)** and the **[tests](https://github.com/libgit2/libgit2/blob/development/tests-clar/repo/init.c)**.

`git_repository_open()` should rather be used when the repository already exists.

> Is there a dedicated forum where I should ask this question?

It's ok to ask programming related question on StackOverflow. Beside this, some libgit2 developers hang out in the #libgit2 channel on irc.freenode.net. However, when you encounter bugs, it's recommended to submit them to the **[issue tracker](https://github.com/libgit2/libgit2/issues)**.

## Update

*   There had been some issues in the past with the way the configuration files are being probbed on Windows. Along with some attempts to fix them. See this **[issue](https://github.com/libgit2/libgit2/pull/952)** for some background about this.
*   Beside the complexity of the probbing, some users may want to explictly provide alternate locations for their files. This **[pull request](https://github.com/libgit2/libgit2/pull/1291)** works this angle.

Considering what you discovered while debugging the libgit2, maybe now would be a good time to open a bug in the issue tracker. Beware that two issues may be at play: the probbing one and and the empty config issue.

# git - 如何将 TFS 跟踪添加到 GIT-TFS 克隆存储库？

> ID：15247782
> 
> 赞同：1
> 
> 时间：2013-03-06T12:48:04.347
> 
> 标签：git, tfs, git-tfs

我目前的工作如下：

*   我们有一个 TFS 分支——我们称之为 TFS-Master。
*   我们有一个 TFS-Master 的 git-tfs 克隆存储库。
*   我已将此存储库推送到 github。

到目前为止，人们一直很高兴地在我的 github 存储库中工作。我一直在需要时将我们与 TFS 存储库同步，一切都很好。

但是，无论出于何种原因，其他人都希望有幸使 git repo 与 TFS 保持同步，反之亦然。

如何将 git-tfs 跟踪（好吧，无论您称之为从 tfs 推/拉的能力）添加到从 github 存储库克隆的存储库中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:53:28.993

不确定这是否完全有帮助，但是....

[git-tfs](https://github.com/git-tfs/git-tfs/wiki)的主页指向：[http ://sparethought.wordpress.com/2011/07/18/how-to-establish-git-central-repository-for-working-against-tfs-with-git-tfs -bridge/](http://sparethought.wordpress.com/2011/07/18/how-to-establish-git-central-repository-for-working-against-tfs-with-git-tfs-bridge/)用于自动指南。

如果您看一下评论，就会有人在谈论 2 路同步。

**更新（取自评论）**

[https://github.com/git-tfs/git-tfs/blob/master/doc/commands/bootstrap.md](https://github.com/git-tfs/git-tfs/blob/master/doc/commands/bootstrap.md)是所需的具体命令。

# php - MantisBT 插件表未创建

> ID：15247783
> 
> 赞同：5
> 
> 时间：2013-03-06T12:48:04.860
> 
> 标签：php, mysql, plugins, xampp, mantis

我的 MantisBT 插件表有些问题。插件本身已安装并正在运行，但在安装插件时***未创建插件表***。

我只是将模式函数添加到我的插件类中以创建表：

```
function schema()
{       
    return array(
            array("CreateTableSQL", array(plugin_table("test"), "
                id I NOTNULL UNSIGNED AUTOINCREMENT PRIMARY
            "))
    ); 
} 
```

第三方插件也是如此：安装时不会创建表！

我正在使用 MantisBT 1.2.14 和 XAMPP 1.7.7。在 Windows 7 上。顺便说一下，数据库用户拥有对数据库执行操作的所有权限。

问题可能出在哪里？有没有人知道关于螳螂模式定义的**好文档？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:57:19.013

我找到了解决方案。Mantis 在创建数据表时会在“mantis_config_table”中创建一个配置数据集。

如果删除此数据集（对于插件“Test”，它将是具有 config_id“plugin_Test_schema”的集）或将值设置为 -1，如果数据库中尚不可用，则可以升级/创建数据表。您可以在“管理/管理插件”菜单中以管理员身份执行此操作。

提示：也可以在“管理/管理配置”菜单中以管理员身份直接编辑/删除插件的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T08:50:57.063

我重新安装插件时的过程是。

```
1) uninstall the plugin with mantis: Manage / Manage Plugins
2) delete plugin config with mantis: Manage / Manage Configuration
3) drop the table with mysql: DROP TABLE your_plugin_table_name; 
```

另一个不错的解决方案是创建一个函数 plugin_callback__uninstall() 来删除创建的表。

[Mantis 插件文档（见页面底部）](http://www.mantisbt.org/wiki/doku.php/mantisbt%3aplugins_overview)

希望这可以帮助

# ios - 奇怪的索引越界异常

> ID：15247787
> 
> 赞同：0
> 
> 时间：2013-03-06T12:48:18.480
> 
> 标签：ios, objective-c, nsmutablearray, uiviewanimation

我正在尝试为删除滚动视图中的视图设置动画。scrollView 的子视图是从对象数组中填充的。每个对象都有一个表示它的视图。有时我在删除时遇到 indexOutOfBounds 异常。这是我的删除代码：

```
-(void)deleteView:(UIView *)viewToDelete{
    [self.myObjects removeObjectAtIndex:viewToDelete.tag];
    [UIView animateWithDuration:0.5 animations:^{
        viewToDelete.alpha = 0.0;
        for (NSInteger index = viewToDelete.tag+1; index<self.myViews.count; index++){
            UIView *view = [self.myViews objectAtIndex:index];
            view.center = CGPointMake(view.center.x,view.center.y-viewToDelete.frame.size.height);
        }
    }]; completion:^(BOOL finished) {
        [view removeFromSuperview];
    }];

    [self.myViews removeObjectAtIndex:viewToDelete.tag];
    for (NSInteger index=0; index<self.myVies.count; index++){
        UIView *view = [self.myViews objectAtIndex:index];
        view.tag = index;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:04:42.823

问题出在动画块上

您应该知道动画块正在异步处理，因此您的最后一段代码可能会在动画过程中被调用，并在动画块内的迭代循环中造成混乱。你应该搬家

```
[self.myViews removeObjectAtIndex:viewToDelete.tag];
for (NSInteger index=0; index<self.myVies.count; index++){
    UIView *view = [self.myViews objectAtIndex:index];
    view.tag = index;
} 
```

到完成块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:51:48.223

此时出现错误`[self.myObjects removeObjectAtIndex:viewToDelete.tag];`

一旦从数组中删除一个对象，项目总数就会减少。因此，您无法访问该索引处的对象。

您应该真正映射这两个数组 self.myObjects 和 self.myViews。

# python - 如何在 Python Mechanize 中不使用代理

> ID：15247793
> 
> 赞同：2
> 
> 时间：2013-03-06T12:48:46.973
> 
> 标签：python, mechanize-python

我目前正在使用 Python + Mechanize 从本地服务器检索页面。如您所见，代码使用“localhost”作为代理。该代理是 Fiddler2 调试代理的一个实例。这完全符合预期。这表明我的机器可以到达test_box。

```
import time
import mechanize

url = r'http://test_box.test_domain.com:8000/helloWorldTest.html'
browser = mechanize.Browser();
browser.set_proxies({"http": "127.0.0.1:8888"})
browser.add_password(url, "test", "test1234")

start_timer = time.time()

resp = browser.open(url)
resp.read()

latency = time.time() - start_timer 
```

但是，当我删除 browser.set_proxies 语句时，它停止工作。我收到一个错误<“urlopen错误[Errno 10061]无法建立连接，因为目标机器主动拒绝它>”。关键是我可以使用任何浏览器从我的机器上访问 test_box。这也表明可以从我的机器上访问 test_box。

我怀疑这与 Mechanize 试图猜测正确的代理设置有关。也就是说：我的浏览器配置为访问除 test_domain.com 之外的任何域的 Web 代理。所以我怀疑 mechanize 尝试使用 Web 代理，而它实际上不应该使用代理。

我如何告诉 mechanize 不要猜测任何代理设置，而是强制它尝试直接连接到 test_box？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:55:46.877

啊，我自己发现了。文档字符串说：

“为避免使用所有代理，请传递一个空的代理字典。”

这解决了这个问题。

# jquery - jquery中的开始日期和结束日期

> ID：15247797
> 
> 赞同：0
> 
> 时间：2013-03-06T12:49:00.280
> 
> 标签：jquery, html

我有两个用于项目的日期`Start Date`字段`End Date`。

如果用户选择`start date`少于今天并且没有选择`EndDate`，我需要将项目显示为**正在进行**中。我怎么能那样做？

我正在使用以下代码

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });

    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:53:45.087

希望您使用的是 Jquery UI 日期选择器。如果是，则在该插件中，您有一个选项**Select a date range**。它将限制日期的选择。

检查这个[Jquery UI Datepicker](http://jqueryui.com/datepicker/#date-range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:57:40.580

添加：

```
onClose: function (dateText){
    if (dateText === "") {
        $( "#to" ).value("on going");
    }
} 
```

这应该可以解决问题。

您的完整代码如下：

```
$( "#to" ).datepicker({
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 1,
    onSelect: function( selectedDate ) {
        $( "#from" ).datepicker( "option", "maxDate", selectedDate );
    },
    onClose: function (dateText){
       if (dateText === "") {
           $( "#to" ).value("on going");
       }
    }
}); 
```

# java - 无法使用来自 Eclipse 的 jni 生成的 dll

> ID：15247803
> 
> 赞同：0
> 
> 时间：2013-03-06T12:49:13.487
> 
> 标签：java, c++, c, eclipse, java-native-interface

我使用命令提示符生成了一个带有 jni 的 dll 文件。我可以使用“java helloWorld”命令运行下面的代码。但我不能从日食中做到这一点。当我运行程序时，我收到一个错误，上面写着：

线程“main”中的异常 java.lang.UnsatisfiedLinkError：java.lang.ClassLoader.loadLibrary(Unknown Source) at java.lang.Runtime.loadLibrary0(Unknown Source) at java.lang.System 的 java.library.path 中没有 native_library .loadLibrary(Unknown Source) at helloWorld.(helloWorld.java:6)

我使用了 native_library 的绝对路径，如下所示。它有什么问题？

你好世界.java：

```
public class helloWorld {

    static{     
        System.loadLibrary("native_library");
        System.load("C:/javaworkspace/helloWorld/src/native_library.dll");
        }   

    public static native void writeout(String ss);

    public static void main(String[] args) {    
        String sdf="Hello World";   
        writeout(sdf);              
    }
} 
```

native_library.c：

```
#include <stdio.h>
#include "helloWorld.h"

JNIEXPORT void JNICALL Java_helloWorld_writeout
  (JNIEnv * env, jclass clazz, jstring str2)
  {
    const char *nativeString = (*env)->GetStringUTFChars(env, str2, 0);

    printf("%s \n",nativeString);

    (*env)->ReleaseStringUTFChars(env, str2, nativeString);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:11:13.447

在我看来，硬编码你的 DLL 路径并不是最好的主意。请改用命令行参数：

```
java -Djava.library.path=<path_to_lib_directory> 
```

对于 Eclipse：打开您的构建路径（右键单击项目>“构建路径”>“配置构建路径...”）并设置“本机库位置”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:56:10.597

我有同样的问题，我认为这是因为 Ecplipse 有它自己的库路径，这与你的 dll 路径不同，尝试添加

```
System.setProperty("java.library.path","your_dll_path"); 
```

IE

```
System.setProperty("java.library.path","/home/user/helloworldlib"); 
```

它对我有用，希望这有帮助！

# java - 不同的 Axis 1.4 Web 服务客户端使用 log4j.xml 记录不同的日志文件

> ID：15247806
> 
> 赞同：0
> 
> 时间：2013-03-06T12:49:27.017
> 
> 标签：java, xml, web-services, log4j, axis

我正在从事一个金融部门的项目。该项目有多个针对不同合作伙伴的 Web 服务客户端。到目前为止，项目日志和 Web 服务请求响应日志都记录在不同的文件中，例如 a.log 和 b.log。现在，合作伙伴希望将 Web 服务请求和响应日志记录在不​​同的文件合作伙伴中，即不需要 b.log 文件。而是有 partner1.log、partner2.log、partner3.log 等等...... 我将 log 4j.xml 用于所有这些目的，这不是 Web 应用程序。问题是我不知道该怎么做？使用 log4j.xml 在不同的日志文件中制作来自 Web 服务客户端的请求和响应日志似乎是不可能的，因为我有两件事 1) 不同的合作伙伴和 2) 同时轴请求和响应日志。我正在使用轴 1。4 为客户做了很好的功课，任何人都可以建议我提出任何解决方案。提前致谢。

log4j.xml 与我们通常使用的完全相同。

我现在也添加了它。

```
**<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="FILE_APPENDER"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${basedir}/logs/Server.log" />
        <param name="Append" value="true" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Threshold" value="INFO"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>
    <appender name="FILE_APPENDER_PARTNER_1"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${basedir}/logs/Server_PARTNER_1.log" />
        <param name="Append" value="true" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Threshold" value="INFO"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>
    <appender name="FILE_APPENDER_PARTNER_2"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${basedir}/logs/Server_PARTNER_2.log" />
        <param name="Append" value="true" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Threshold" value="INFO"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>
    <appender name="FILE_APPENDER_PARTNER_3"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${basedir}/logs/Server_PARTNER_3.log" />
        <param name="Append" value="true" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Threshold" value="INFO"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>
    <appender name="FILE_APPENDER_AXIS"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${basedir}/logs/Server_AXIS.log" />
        <param name="Append" value="true" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Threshold" value="INFO"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p (%F:%L) - %m%n" />
        </layout>
    </appender>
    <category name="org.apache.jcs">
        <level value="WARN" />
    </category>

    <category name="org.hibernate.SQL">
        <level value="WARN" />
    </category>

    <category name="org.hibernate">
        <level value="WARN" />
    </category>
    <category name="org.slf4j.impl.JCLLoggerAdapter">
        <level value="ERROR" />
    </category>
    <category name="com.util.PropertiesUtil">
        <level value="ERROR" />
    </category>
    <!--NEWLY ADDED-->
    <logger name="com.ws.stub.PARTNER_1">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_PARTNER_1" />
    </logger>
    <logger name="com.ws.stub.PARTNER_2">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_PARTNER_2" />
    </logger>
    <logger name="com.ws.stub.PARTNER_3">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_PARTNER_3" />
    </logger>
    <!--AXIS-->
    <logger name="org.apache.axis.transport.http.HTTPSender">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.client.Call">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.client.AxisClient">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <!--my one-->
    <logger name="org.apache.commons.httpclient">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.Handler">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.AxisFault">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.AxisEngine">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.handlers">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.client">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.client.Transport">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.MessageContext">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.handlers.BasicHandler">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.handlers.http.HTTPAuthHandler">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <logger name="org.apache.axis.handlers.http.HTTPActionHandler">
        <level value="ALL" />
        <appender-ref ref="FILE_APPENDER_AXIS" />
    </logger>
    <root>
        <level value="INFO" />      
        <appender-ref ref="FILE_APPENDER" />
    </root>
</log4j:configuration>** 
```

这里的任何一位专家都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:37:42.670

通过轴和应用程序的一些编码工作成功地解决了它。

# shell - 在 Solaris shell 中计算子网

> ID：15247809
> 
> 赞同：1
> 
> 时间：2013-03-06T12:49:56.670
> 
> 标签：shell, awk, netmask

我需要计算子网，在 Solaris 机器外壳（bash，但可能是其他的）中具有 IP 地址和网络掩码。

一些例子：

```
IP=192.168.100.6, MASK=255.255.255.0 => SUBNET=192.168.100.0
IP=11.95.189.33, MASK=255.255.0.0 => SUBNET=11.95.0.0
IP=66.25.144.216, MASK=255.255.255.192 => SUBNET=66.25.144.192 
```

我有两种计算方法：

```
SUBNET=$((`echo $IP | awk 'BEGIN { FS = "." } ; {print $1}'`&`echo $MASK | awk 'BEGIN { FS = "." } ; {print $1}'`)).\
$((`echo $IP | awk 'BEGIN { FS = "." } ; {print $2}'`&`echo $MASK | awk 'BEGIN { FS = "." } ; {print $2}'`)).\
$((`echo $IP | awk 'BEGIN { FS = "." } ; {print $3}'`&`echo $MASK | awk 'BEGIN { FS = "." } ; {print $3}'`)).\
$((`echo $IP | awk 'BEGIN { FS = "." } ; {print $4}'`&`echo $MASK | awk 'BEGIN { FS = "." } ; {print $4}'`)) 
```

和

```
l="${IP%.*}";r="${IP#*.}";n="${MASK%.*}";m="${MASK#*.}"
subnet=$((${IP%%.*}&${NM%%.*})).$((${r%%.*}&${m%%.*})).$((${l##*.}&${n##*.})).$((${IP##*.}&${NM##*.})) 
```

但我觉得他们俩都有点“脏”。我想要一种“更干净”的方式来计算子网，我的项目中的其他人很容易理解。

我不喜欢使用*perl*或*python*，但可以考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:00:41.440

假设您将 ip 和掩码存储到两个 shell 变量中：`$ip`和`$mask`：

```
 awk -vip="$ip" -vmask="$mask" 'BEGIN{
split(ip,a, "."); 
split(mask,b,".");
for(i=1;i<=4;i++)a[i]=b[i]==255?a[i]:b[i]; 
printf"SUBNET=";for(i=1;i<=3;i++)printf a[i]".";printf a[4]}' 
```

将为您提供以下格式的结果：`SUBNET=xxx.xxx.xxx.xxx`

举一个例子：

```
kent$  ip="192.168.100.6"                                                                                                                                                   

kent$  mask="255.255.255.192"                                                                                                                                               

kent$  awk -vip="$ip" -vmask="$mask" 'BEGIN{split(ip,a, "."); split(mask,b,".");for(i=1;i<=4;i++)a[i]=b[i]==255?a[i]:b[i]; printf"SUBNET=";for(i=1;i<=3;i++)printf a[i]".";printf a[4]}'
SUBNET=192.168.100.192 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T11:02:22.633

我的解决方案做了实际需要做的事情。Ip 和掩码是“和”在一起的。这是我用过的。

假设，这里 $ip 和 $mask 是定义的 shell 变量。

```
awk -vip="$ip" -vmask="$mask" 'BEGIN{
  sub("addr:","",ip);
  sub("Mask:","",mask);
  split(ip,a,".");
  split(mask,b,".");
  for(i=1;i<=4;i++)
    s[i]=and(a[i],b[i]);
  subnet=s[1]"."s[2]"."s[3]"."s[4]; 
  print subnet;
}' 
```

压缩：

```
awk -vip="$ip" -vmask="$mask" 'BEGIN{sub("addr:","",ip);sub("Mask:","",mask);split(ip,a,".");split(mask,b,".");for(i=1;i<=4;i++)s[i]=and(a[i],b[i]);subnet=s[1]"."s[2]"."s[3]"."s[4];print subnet;}' 
```

与 kent 给出的示例类似。

例子：

```
[rahul]$ ip=172.16.232.159
[rahul]$ mask=255.255.254.0
[rahul]$ awk -vip="$ip" -vmask="$mask" 'BEGIN{sub("addr:","",ip);sub("Mask:","",mask);split(ip,a,".");split(mask,b,".");for(i=1;i<=4;i++)s[i]=and(a[i],b[i]);subnet=s[1]"."s[2]"."s[3]"."s[4];print subnet;}'
172.16.232.0 
```

# c# - 仅在窗口移动时用户控件重绘

> ID：15247811
> 
> 赞同：0
> 
> 时间：2013-03-06T12:50:19.537
> 
> 标签：c#, winforms, repaint, invalidation

我有一个自定义用户控件，它显示音频文件的波形。我在表单上放置了两个控件实例。第二个实例按预期工作，而第一个实例导致提到的问题。

我正在做的是绘制一条垂直（红色）线，指示当前位置。这个问题最好在[youtube 视频](http://www.youtube.com/watch?v=_X0JbcxZrSE)中看到。

这是我的自定义控制器的代码（OnPaint() - 请注意，我仅使受红色垂直线影响的区域无效）：

```
protected override void OnPaint(PaintEventArgs e)
{
    [...]
    Invalidate(new Rectangle(x_pos-5, 0, x_pos, this.Height));
    using (Pen linePen = new Pen(Color.Red, 1.5f))
    {
        e.Graphics.DrawLine(linePen, x_pos, 0, x_pos, this.Height);
        Invalidate(new Rectangle(x_pos-2,0,x_pos+2,this.Height));
    }

    base.OnPaint(e);
} 
```

* * *

问：由于两个控件的 OnPaint 方法是等效的，为什么我需要移动窗口来重新绘制第一个控件（波形）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:03:54.757

问题`OnPaint`在于它只在必要时调用，例如当窗口移动、调整大小、从最小化状态恢复后，或者另一个窗口在其上移动时。

为了定期重绘窗口（或部分窗口），您需要`Timer`在表单中添加 a 并实现其`Tick`事件。

```
private void timer1_Tick(object sender, EventArgs e)
{
    this.Invalidate();
} 
```

默认情况下，`Timer.Interval`设置为`100`(100 ms)。如果您只想每秒更新一次矩形，您可以根据需要将该值增加到`1000`。

# gwt - 如何在 gwt 客户端下载文件

> ID：15247812
> 
> 赞同：2
> 
> 时间：2013-03-06T12:50:25.060
> 
> 标签：gwt, download

我有一个文件，就像`byte[]`我的 gwt 客户端一样。我需要下载文件。我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:00:13.047

使用 RPC 调用将字节发送到服务器端并将文件写入文件。

```
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(yourFile));
bos.write(byteArray);
bos.flush();
bos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:07:46.093

将`Browser`无法访问`save files`用户`local drive`；

将字节发送到服务器并流[式传输](https://stackoverflow.com/questions/12110090/send-a-file-from-server-to-client-in-gwt)

# html - 如何将 div 与表单域对齐？

> ID：15247820
> 
> 赞同：0
> 
> 时间：2013-03-06T12:51:00.347
> 
> 标签：html, css, forms, alignment, field

目前我有以下 HTML 代码。

```
 <div class="field">
            <label>E-mail address: </label>
            <input type="text" id="email" name='email' style="width:200px;"></input>
            <span class='warning' id="emailWarning" > </span>
            <div class="tip" id="emailTip"></div>

        </div> 
```

但是，我希望 div 元素（class = 'tip'）中的文本与表单文本字段的开头对齐。我应该如何使用 HTML 和 CSS 做到这一点？

这是现在的样子：http: [//jsfiddle.net/pEJMD/embedded/result/](http://jsfiddle.net/pEJMD/embedded/result/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:57:54.590

[这](http://jsfiddle.net/basillicum/pEJMD/1/)将是一个快速的解决方法。您应该将`.tip`div 和输入都放入包装 div 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T15:06:49.620

您根本不需要明确的宽度，也不需要表格；只需使用 CSS 表（请参阅我对[这个相关问题](https://stackoverflow.com/a/23741073/695591)的回答）：

# CSS

```
form  { display: table;      }
p     { display: table-row;  }
label { display: table-cell; }
input { display: table-cell; } 
```

# HTML

```
<form>
    <p>
        <label for="a">Short label:</label>
        <input id="a" type="text">
    </p>
    <p>
        <label for="b">Very very very long label:</label>
        <input id="b" type="text">
    </p>
</form> 
```

这是一个 JSFiddle：http: [//jsfiddle.net/DaS39/1/](http://jsfiddle.net/DaS39/1/)

如果您需要标签右对齐，只需添加`text-align: right`标签：http: [//jsfiddle.net/DaS39/](http://jsfiddle.net/DaS39/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:53:55.707

好吧，要么你使用 a `<table>`，在一个单元格中放入 ，`<label>`然后在另一个单元格中`<input>`，或者你使用固定的宽度/边距或填充。

### 解决方案 1：表格

`[**Table solution**](http://jsbin.com/ixetif/2)`

在此解决方案中，您使用表格来保存表单。一列用于标签，另一列用于输入。在这种情况下，您将在输入列中有提示，它会自动与输入对齐。

这有利于**您**的标签/输入的灵活尺寸。并且**表并不总是邪恶的**。请记住，如果您想让标签与输入保持一致，`vertical-align:top`请在 CSS 中添加一个。

### 解决方案 2：固定宽度

`[**Fixed-width solution**](http://jsbin.com/ixetif/1)`

在此解决方案中，您为标签提供固定宽度，并使用`.tip`或移动div 。`margin``padding``left`

这将使您的布局保持在适当的位置，因此请注意极长的标签！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T12:57:11.703

您可以为标签设置固定大小。比使用标签大小将 div 向右推：

```
<div class="field">
   <label style="width:100px;">E-mail address: </label>
   <input type="text" id="email" name='email' style="width:200px;"></input>
   <span class='warning' id="emailWarning" > </span>
   <div class="tip" id="emailTip" style="margin-left:100px;">
      The quick brown fox jumps over the lazy dog
   </div>
</div> 
```

而[结果](http://jsfiddle.net/wh6zG/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:07:36.310

你去： http: [//jsfiddle.net/4sJ2t/](http://jsfiddle.net/4sJ2t/) 你只需要给你的标签一个固定的宽度，然后你的小费左边距

```
label {width:100px; text-align:right; margin-right:5px;}
.tip {margin-left:105px; padding: 5px 0;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T13:04:51.677

使用`margin-left`：

**改变：**

```
<div class="tip" id="emailTip"> 
```

**至：**

```
<div class="tip" id="emailTip" style="margin-left:95px;"> 
```

[演示](http://jsfiddle.net/pEJMD/2/)

在此处了解有关 CSS`margin`属性的更多信息[。](http://www.w3schools.com/css/css_margin.asp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T13:05:58.977

你可以给 a `height`，`label`给`width`父母`div`和`float`你的`tip`. 查看演示：http: [//jsfiddle.net/pEJMD/4/](http://jsfiddle.net/pEJMD/4/)

# c# - 争取到下一个活动的时间

> ID：15247826
> 
> 赞同：1
> 
> 时间：2013-03-06T12:51:18.977
> 
> 标签：c#

我的应用程序中有一个同步计时器，可以在给定时间启动一个函数......现在我想知道距离下一次调用该函数还有多少时间。

这是我对计时器的调用：

```
var syncTime = time.activitylog;
double time = TimeSpan.Parse(syncTime).TotalMilliseconds;

System.Timers.Timer myTimer = new System.Timers.Timer();
myTimer.Elapsed += new ElapsedEventHandler(DisplayTimeEvent);
myTimer.Interval = time;
myTimer.Start(); 
```

我如何获得下一个电话的时间？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:20:09.880

您可以使用 a`System.Diagnostics.Stopwatch`来跟踪已经过去了多少时间，并`Stopwatch`在`Timer`.

```
Stopwatch watch = new Stopwatch();
private void DisplayTimeEvent(object sender, EventArgs e)
{
    watch.Restart();
    // Whatever is supposed to happen, when the timer ticks
} 
```

现在，每当您想知道距离下一次触发事件还剩多少时间时，您可以这样做：

```
long timeLeft = myTimer.Interval - watch.ElapsedMilliseconds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:55:18.250

您可以使用另一个计时器，并设置您想要的值的间隔，正是原始计时器间隔的一部分。然后同时启动它们，我的意思是同时启动它们。

更新 ：

也许这段代码更好地描述了我的解决方案：

```
public Form1()
        {
            InitializeComponent();
        }

        System.Windows.Forms.Timer trOriginal = new System.Windows.Forms.Timer();
        System.Windows.Forms.Timer trRemain = new System.Windows.Forms.Timer();
        double remain = 0;
        private void button1_Click(object sender, EventArgs e)
        {
            trOriginal.Interval = 1000;
            trRemain.Interval = 1;
            trOriginal.Tick += new EventHandler(trOriginal_Tick);
            trRemain.Tick += new EventHandler(trRemain_Tick);
            trOriginal.Start();
            trRemain.Start();
        }

        void trRemain_Tick(object sender, EventArgs e)
        {
            remain -= trRemain.Interval;
            Console.WriteLine("remain MS to next event : " + remain);
        }

        void trOriginal_Tick(object sender, EventArgs e)
        {
            remain = trOriginal.Interval;
        } 
```

# c# - MVC 4 - 如何有条件地禁用此按钮？

> ID：15247832
> 
> 赞同：8
> 
> 时间：2013-03-06T12:51:38.897
> 
> 标签：c#, asp.net-mvc-4, razor

`Model.BicycleSellerListingId`如果不大于 0 ，我想有条件地禁用此按钮或隐藏它。不知道该怎么做。

```
<div style="position:absolute; left:300px; top:633px;">
    @using (Html.BeginForm("Delete", null, new { id = Model.BicycleSellerListingId }, FormMethod.Post))
    {
       <button type="submit">Delete Listing</button>
    }
</div> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-06T12:55:14.227

```
<div style="position:absolute; left:300px; top:633px;">
@using (Html.BeginForm("Delete", null, new { id = Model.BicycleSellerListingId }, FormMethod.Post))
{
   if(Model.BicycleSellerListingId < 0){
       <button type="submit">Delete Listing</button>
   }
}
</div> 
```

或者

```
@if(Model.BicycleSellerListingId < 0){
    <div style="position:absolute; left:300px; top:633px;">
    @using (Html.BeginForm("Delete", null, new { id = Model.BicycleSellerListingId }, FormMethod.Post))
    {
       <button type="submit">Delete Listing</button>
    }
    </div>
} 
```

或者

```
<div style="position:absolute; left:300px; top:633px;">
@using (Html.BeginForm("Delete", null, new { id = Model.BicycleSellerListingId }, FormMethod.Post))
{
    <button type="submit"  @((Model.BicycleSellerListingId < 0) ? "disabled" : "")>Delete Listing</button>
}
</div> 
```

# cakephp - CakePhp 速度优化

> ID：15247834
> 
> 赞同：3
> 
> 时间：2013-03-06T12:51:41.327
> 
> 标签：cakephp, cakephp-2.0

我的应用程序运行非常缓慢。我正在使用 Cakephp 2.3.1 版本。在需要的函数中加载模型、组件和助手是否有益？现在我在课堂上给他们打电话。例如：

```
class PanelsController extends AppController {
public $name = 'Panel';
public $uses = array(list of models goes here);
public $components = array(list of components goes here);
    .................
} 
```

你有什么其他的技术建议。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T07:03:11.397

如果网站运行缓慢，我会检查以下内容

**速度优化**

1.  启用[缓存](http://book.cakephp.org/2.0/en/core-libraries/caching.html)
2.  压缩 JS 和 CSS。（[一个很好的插件可以做到这一点](http://github.com/mcurry/asset)）
3.  [一个很好的速度优化清单](http://developer.yahoo.com/performance/rules.html)

**蛋糕做法**

1.  Cake 约定是您最好的指导方针，该框架旨在根据其约定进行扩展。

2.  [Recursion](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)和[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，默认情况下，Cake 在触发查询时获取所有相关数据。递归级别和可包含行为都可以限制检索的数据量。如果 cake 默认获取所有相关数据并不意味着您必须保持这种状态。

3.  **保持你的数据库标准化**。这将允许您推迟许多进程。例如。检索帖子时，cake 会自动获取其所有相关数据（标签、评论）。但是当你有高阶规范化数据库时，你可以推迟从 XHR/AJAX 请求中加载评论。这也将允许您从评论的模型、控制器和视图中提供与评论相关的逻辑。即使你为他们带来了相关的模型数据集限制。

4.  您还可以通过使用计数器缓存来放弃对相关数据的计数器查询需求。[更多细节在这里](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

5.  [缓存您的视图](http://book.cakephp.org/2.0/en/core-libraries/helpers/cache.html)

6.  您也可以手动缓存查询结果，

    ```
    Cache::write($this->Post->find("all")); 
    ```

尝试一下，您应该能够体验到惊人的速度提升。

最后，我确实相信应用程序的架构在性能方面起着重要作用。有时，我们必须将某些逻辑从请求生命周期中分离出来以提高性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T13:14:01.323

`public $uses()`不要紧。您可以根据需要添加任意数量。如果需要，Cake 只会延迟加载它们。只需确保您`recursive = -1`在 AppModel 中获得默认值，并且仅提升它或包含您真正需要的数据。

但是您的组件都将立即加载和初始化。你可能想减少这些。

不过，这两个属性不能成为您的瓶颈。你一定有其他一些严重的问题。

也不要在调试模式下做出假设。实际速度是使用调试 0 测量/观察的，其中没有收集额外的调试信息并且缓存不会不断更换。

编辑：请注意，我上面的话只是从“速度的角度”来看的。速度无关紧要。但是，如果您能够通过关系和关系链访问模型，则不建议在 $uses 中添加模型。

因此，假设您要制作仪表板。在大多数情况下，您只需要添加“用户”模型，因为 Profile、Images 和其他模型通常可以通过`$this->User->Profile->foo($bar)`etc直接访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:59:47.827

cakephp 应用程序缓慢可能是由很多原因造成的，目前经历过：

*   试图进行 dns 查找的 mysql 服务器
*   呈现一个页面，其中包含通过反向路由组装的大量链接
*   记忆问题

找出最好的方法似乎是安装`XDEBUG`[1](http://xdebug.org/docs/remote) 并检查分析信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:40:18.083

您可以在 cakephp 中使用缓存技术来减少时间，有关文档，请参见此处：[http ://book.cakephp.org/2.0/en/core-libraries/caching.html](http://book.cakephp.org/2.0/en/core-libraries/caching.html)

不要使用加载模型，使用大数据代码会产生问题。

这里有一篇文章供您参考：（加速 cakephp 应用程序的提示） [http://www.dereuromark.de/2012/02/13/what-really-speeds-up-your-cakephp-app/](http://www.dereuromark.de/2012/02/13/what-really-speeds-up-your-cakephp-app/)

# sql-server - VARCHAR 列上的 WHERE 子句似乎作为 LIKE 操作

> ID：15247835
> 
> 赞同：4
> 
> 时间：2013-03-06T12:51:45.750
> 
> 标签：sql-server, select, sql-like, varchar

我偶然发现了一种我以前从未见过的情况。我希望有人可以解释以下内容。

我已经运行了以下查询，希望只获得值完全等于的列的结果`1101`

```
select '--' + MyColumn + '--' SeeSpaces, Len(MyColumn) as LengthOfColumn 
from MyTable 
where MyColumn = '1101' 
```

但是，我也看到`1101`后面跟着（我相信是）空格的值。

所以`SeeSpaces`返回

```
--1101&nbsp;&nbsp;&nbsp;&nbsp;-- 
```

并`LengthOfColumn`返回`4`

`MyColumn`是一`VARCHAR(8), NOT NULL`列。它的值（包括空格）是通过单独的工作流程插入的。

为什么这个选择不只返回确切的结果？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:03:39.243

原因在于 SQL Server 比较字符串与尾随空格的方式，它遵循 ANSI 标准，因此字符串 '1101' 和 '1101 ' 是等价的。

有关详细信息，请参阅以下内容：

[INF：SQL Server 如何比较字符串和尾随空格](http://support.microsoft.com/kb/316626)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:58:03.327

我认为你必须`LTRIM() and RTRIM()`在比较时使用函数：

```
LTRIM(RTRIM(MYCOLUMN))='1101' 
```

函数`LEN`也不计算空格，它只计算字符串中的字符。请参考：http: [//msdn.microsoft.com/en-us/library/ms190329%28SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms190329%28SQL.90%29.aspx)

# silverlight - 尽管设置了双向绑定，但绑定到 DependencyProperty 的属性不会更新

> ID：15247838
> 
> 赞同：0
> 
> 时间：2013-03-06T12:51:50.097
> 
> 标签：silverlight, binding, dependency-properties, setter, two-way

我这里有个小问题。我使用 RadTreeView 创建了自定义 TreeView。这一切都很好，但我遇到了一个障碍。我在 TreeView 中为 SelectedItem 设置了 DependencyProperty。我将控件嵌套在 View 中，在 TwoWay 模式下将属性绑定到 SelectedItem，但绑定属性不会更新，它始终为 null，尽管设置了 DependencyProperty 值。

这是树 xaml：

```
 <Grid xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'
          xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'
          xmlns:sdk='http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk' 
          xmlns:telerik='http://schemas.telerik.com/2008/xaml/presentation' x:Name='this' >     
       <Grid.Resources>
          <DataTemplate x:Key='ChildTemplate'>
               <TextBlock Text='{Binding Path=ChildPath}' Margin='5,0' />
          </DataTemplate>
          <telerik:HierarchicalDataTemplate x:Key='NameTemplate' ItemsSource='{Binding ChildrenCollectionPath}' ItemTemplate='{StaticResource ChildTemplate}'>
               <TextBlock Text='{Binding Path=ParentPath }' Padding='7'/>
          </telerik:HierarchicalDataTemplate>
       </Grid.Resources>
    <telerik:RadTreeView x:Name='rtvTreeView' Padding='5' BorderThickness='0' IsEditable='False' IsLineEnabled='True' IsExpandOnDblClickEnabled='False' ItemTemplate='{StaticResource NameTemplate}' />
    </Grid> 
```

下面是我在视图中嵌套控件的方式：

```
<windows:TreeViewReuse CollectionSource="{Binding SitesCollectionWithAddress}" ParentPath="Napis" Grid.Column="0" BorderThickness="2" SelectedItemD="{Binding SelectedSide, ElementName=this, UpdateSourceTrigger=Explicit, Mode=TwoWay}"                                       ChildPath="FullAddress" ChildrenCollectionPath="AdresyStrony" BorderBrush="Red" DoubleClickCommand="{Binding TreeViewDoubleClick}">
</windows:TreeViewReuse> 
```

这是Tree的部分代码：

```
public partial class TreeViewReuse : UserControl
{
    static Telerik.Windows.FrameworkPropertyMetadata propertyMetaData = new Telerik.Windows.FrameworkPropertyMetadata(null,
        Telerik.Windows.FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, new PropertyChangedCallback(SelectedItemChangedCallback));
    public object SelectedItemD
    {
        get { return GetValue(SelectedItemDProperty); }
        set { SetValue(SelectedItemDProperty, value); }
    }
    public static readonly DependencyProperty SelectedItemDProperty =
        DependencyProperty.Register("SelectedItemD", typeof(object), typeof(TreeViewReuse), propertyMetaData);

    public TreeViewReuse()
    {
        InitializeComponent();

        Loaded += new RoutedEventHandler(TreeViewReuse_Loaded);
    }

    void treeView_SelectionChanged(object sender, Telerik.Windows.Controls.SelectionChangedEventArgs e)
    {
        SelectedItemD = _treeView.SelectedItem;
    }

    static private void SelectedItemChangedCallback(DependencyObject dp, DependencyPropertyChangedEventArgs e)
    {
    } 
```

有谁知道为什么绑定到 SelectedItemD 的属性不更新？我不关心从中设置树的选定项，我只想将其设置为选定项。

这是财产：

```
public StronaSprawy SelectedSide
{
     get
     {
         return _selectedSide;
     }
     set
     {
         _selectedSide = value;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:21:56.430

你的依赖属性看起来不错..除了那个`Telerik.Windows.FrameworkPropertyMetadata`实例。

Silverlight 不支持设置元数据选项，所以我想不出 Telerik 的实现将如何实现这一点。Telerik 有可能拥有自己的 DP 实现，甚至这种类型的属性元数据仅适用于他们的控件。

尝试改用标准 System.Windows.PropertyMetaData 类型，看看是否适合您。

# .net - 如何为来自网站的匿名用户管理 Sitecore 安全性

> ID：15247840
> 
> 赞同：1
> 
> 时间：2013-03-06T12:52:02.283
> 
> 标签：.net, security, sitecore, sitecore6

我有一个关于 sitecore 网站安全性的有趣任务，我需要获得一些想法或最佳实践如何使用它。

我有一些没有任何自定义站点核心安全 (SS) 的站点核心网站（SS 仅用于站点核心管理页面）。用户可以通过一些额外的服务登录站点，该服务也返回用户角色和权限。

我想将外部角色映射到我的站点核心角色（并使用 Sitecore 安全性管理对某些站点页面的访问）。

我有一个想法，在用户通过外部服务登录后向 sitecore 匿名用户添加一些站点核心角色或域，但我不确定这是管理访问的好方法。在我的情况下我能做什么？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:08:51.420

您可以创建自己的自定义成员资格提供商并在外部服务和 Sitecore 之间映射角色/用户。

以下是 Sitecore SDN 中有关 Sitecore 的自定义成员资格提供程序的一些文档：

[http://sdn.sitecore.net/upload/sitecore6/sc61keywords/membership_providers_a4.pdf](http://sdn.sitecore.net/upload/sitecore6/sc61keywords/membership_providers_a4.pdf)

[http://sdn.sitecore.net/upload/sdn5/modules/ad/low-level_sitecore_cms_security_and_custom_providers-usletter.pdf](http://sdn.sitecore.net/upload/sdn5/modules/ad/low-level_sitecore_cms_security_and_custom_providers-usletter.pdf)

[http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf](http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf)

# sql - 动态 pl/sql 调用返回非 SQL 类型

> ID：15247846
> 
> 赞同：1
> 
> 时间：2013-03-06T12:52:22.913
> 
> 标签：sql, oracle, plsql, boolean

我正在尝试动态调用一个 PL/SQL 方法，该方法返回一个没有运气的布尔值。我已经四处寻找答案，但这似乎是不可能的。

这是我正在尝试做的一个非常简单的示例：

```
create or replace 
function test_ret_bool return boolean as 
begin
  return true;
end test_ret_bool; 
```

然后是调用：

```
declare
  ret_val boolean;
  sql_stmt varchar2(1000);
begin  
  sql_stmt := 'select test_ret_bool() from dual';
  execute immediate sql_stmt into ret_val;
end; 
```

这不起作用，产生错误：

```
ORA-06553: PLS-382: expression is of wrong type 
```

我也尝试将 sql_stmt 更改为：

```
sql_stmt := 'begin :result := test_ret_bool(); end;';
execute immediate sql_stmt using out ret_val; 
```

然后调用 PL/SQL 引擎，但这给出了这个错误：

```
PLS-00457: expressions have to be of SQL types 
```

我已经看到其他线程描述了相同的问题，并且可能使用了包装函数。在我的情况下，我不可能使用包装函数。

我已经看到了一些关于为此使用 dbms_sql.execute() 的想法，但还没有让它发挥作用。

有人可以请教吗？有人可以提供一个使用 dbms_sql.execute() 的例子吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:11:58.497

您可以使用 Oracle 函数`SYS.DIUTIL.bool_to_int`和`SYS.DIUTIL.int_to_bool`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:07:18.897

您的功能很好，问题是 Oracle 不支持`boolean`SQL 中的数据类型。如果你想要这个，你要么必须使用纯 PL/SQL（如在 ABCade 的 SQLfiddle 中），要么将布尔值转换为 Y/N、1/0 或类似的值。

您可以在[此处](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#SQLRF0021)查看支持的数据类型。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-06T14:00:14.560

这是等价的。想要做什么：

```
SELECT * FROM dual WHERE 1=1; -- TRUE

SELECT * FROM dual WHERE 1=2; -- FALSE 
```

# mysql - 如何在 SQL 中使用引用具有两个主键的表的外键创建命令文件？

> ID：15247848
> 
> 赞同：0
> 
> 时间：2013-03-06T12:52:25.553
> 
> 标签：mysql

我正在为我的数据库管理类做一个项目，但我不知道如何为在 SQL 中创建的表创建文件命令。我们有两个具有两个主键的实体，我无法创建表。我想知道您是否有任何意见？旅行社表有两个主键，它是这些表中的外键，由于某种原因我无法创建这些表，我无法弄清楚。到目前为止，这是我所拥有的：
这些是​​具有外键的表，它引用具有两个主键的表：

```
create table rental  (rental_id integer not null,  
max_daily_mileage integer not null,  
is_unlimited_mileage char(3) not null,  
rental_start_date integer not null,  
rental_end_date integer not null,  
is_reservation_a_hold char(3),  
checked_out_mileage integer not null,  
checked_in_mileage integer not null,  
checked_out_condition char(8) not null,  
checked_in_condition char(8) not null,  
company_discount integer,  
reservation_is_cancelled char(3),  
employee_id_booked integer not null,  
employee_id_checked_out_car integer not null,  
employee_id_checked_in_car integer not null,  
discount_id integer not null,  
customer_id integer not null,  
class_id integer not null,  
car_id integer not null,  
franchise_id integer not null,  
company_id integer not null, 
primary key (rental_id), 
foreign key (discount_id) references frequent_renter_discount (discount_id), 
foreign key (customer_id) references customers (customer_id), 
foreign key (travel_agency_id) references travel_agency (travel_agency_id), 
foreign key (car_id) references car (car_id), 
foreign key (franchise_id) references franchise (franchise_id), 
foreign key (company_id) references company (company_id));  

create table customers 
(customer_id integer not null, 
employer char(15) not null, 
id_verified integer, 
employee_id integer not null,  
corporate_account_id integer not null, 
credit_card_id integer not null,  
company_id integer not null, 
primary key (customer_id), 
foreign key (employee_id) references employees (employee_id), 
foreign key (corporate_account_id) references corporate_account (corporate_account_id), foreign key (credit_card_id) references credit_card (credit_card_id), 
foreign key (company_id) references company (company_id),
foreign key (rental_id) references rental (rental_id)); 
```

具有两个主键的表：

```
create table travel_agency  
(travel_agency_id integer not null,  
travel_agent_id integer not null,  
location char(15) not null,  
company_id integer not null,  
primary key (travel_agency_id,travel_agent_id), 
foreign key (company_id) references company (company_id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:07:29.297

好吧，您不能仅在复合主键的一部分上添加外键约束。`travel_agency_id integer`（顺便说一句，桌子出租定义中没有字段......）

如果要引用复合 PK，则必须添加对构成密钥的所有字段的引用。

这意味着，对于桌子出租

```
CREATE TABLE rental  (
rental_id integer not null,  
--...,
travel_agency_id integer,
travel_agent_id integer,
PRIMARY KEY (rental_id), 
--...,
FOREIGN KEY (travel_agency_id, travel_agent_id) 
   REFERENCES travel_agency(travel_agency_id, travel_agent_id)
); 
```

或者更改您的设计，使用代理键，并在组合应该是唯一的字段上添加唯一约束，例如。

一般来说，顺便说一句，我会尽量避免使用复合键。

# jquery - 如何在显示后将焦点设置为引导模式中的第一个文本输入

> ID：15247849
> 
> 赞同：135
> 
> 时间：2013-03-06T12:52:26.617
> 
> 标签：jquery, twitter-bootstrap

我加载了一个动态引导模式，它包含很少的文本输入。我面临的问题是我希望光标专注于此模式中的第一个输入，默认情况下不会发生这种情况。
所以我写了这段代码来做到这一点：

```
$('#modalContainer').on('show', function () {
   $('input:text:visible:first').focus();
}); 
```

但是现在它专注于输入一会儿然后自动消失，为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-03-06T16:12:27.420

@scumah 为您提供答案：[Twitter bootstrap - 点击时关注模态框内的 textarea](https://stackoverflow.com/questions/11634809/twitter-bootstrap-focus-on-textarea-inside-a-modal-on-click)

对于引导程序 2

```
modal.$el.on('shown', function () {
$('input:text:visible:first', this).focus();
}); 
```

更新：对于引导程序 3

```
$('#myModal').on('shown.bs.modal', function () {
    $('#textareaID').focus();
}) 
```

========== 更新 ======

在回答一个问题时，如果您指定不同的数据目标，您可以在同一页面上将其与多个模式一起使用，重命名您的模式 ID 以匹配并更新表单输入字段的 ID，最后更新您的 JS 以匹配这些新的ID：
见[http://jsfiddle.net/panchroma/owtqhpzr/5/](http://jsfiddle.net/panchroma/owtqhpzr/5/)

**HTML**

```
...
<button ... data-target="#myModal1"> ... </button> 
... 
<!-- Modal 1 -->
<div class="modal fade" id="myModal1" ...>
... 

<div class="modal-body"> <textarea id="textareaID1" ...></textarea></div> 
```

**JS**

```
$('#myModal1').on('shown.bs.modal', function() {
  $('#textareaID1').focus();
}) 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-12-12T17:53:34.567

我找到了最好的方法来做到这一点，没有 jQuery。

```
<input value="" autofocus> 
```

完美运行。

这是一个 html5 属性。所有主流浏览器都支持。
[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input)

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-12-26T08:47:17.833

David Taiaroa 的答案是正确的，但不起作用，因为“淡入”模态的时间不允许您将重点放在输入上。您需要创建一个延迟：

```
$('#myModal').on('shown.bs.modal', function () {
    ...
    setTimeout(function (){
        $('#textareaID').focus();
    }, 1000);

}) 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-12-10T13:44:28.393

通常的代码（如下）对我**不起作用**：

```
$('#myModal').on('shown.bs.modal', function () {
  $('#myInput').focus()
}) 
```

我找到了**解决方案**：

```
$('body').on('shown.bs.modal', '#myModal', function () {
    $('input:visible:enabled:first', this).focus();
}) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-03-31T14:33:42.490

我得到那个引导程序在他们的页面上添加了以下信息：

> 由于 HTML5 定义其语义的方式，autofocus HTML 属性在 Bootstrap 模式中无效。要达到相同的效果，请使用一些自定义 JavaScript：

```
$('#myModal').on('shown.bs.modal', function () {
  $('#myInput').focus()
}) 
```

[http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-06-04T20:43:53.427

这是最适合您的简单代码，适用于所有具有任何输入字段且具有焦点的弹出窗口

```
$(".modal").on('shown.bs.modal', function () {
    $(this).find("input:visible:first").focus();
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-24T16:05:41.813

我认为最正确的答案，假设使用 jQuery，是这个页面中所有答案的方面的合并，加上 Bootstrap 传递的事件的使用：

```
$(document).on('shown.bs.modal', function(e) {
  $('input:visible:enabled:first', e.target).focus();
}); 
```

它也可以更改`$(document)`为`$('.modal')`或向模式中添加一个类，以指示应该发生此焦点，例如`$('.modal.focus-on-first-input')`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-06T13:12:40.700

试试这个代码，它可能对你有用

```
$(this).find('input:text')[0].focus(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-02T04:22:41.107

第一步，您必须`autofocus`在表单输入中设置属性。

```
<input name="full_name" autofocus/> 
```

然后您必须添加声明以在显示模式后设置输入的自动对焦。
试试这个代码：

```
$(document).on('ready', function(){
    // Set modal form input to autofocus when autofocus attribute is set
    $('.modal').on('shown.bs.modal', function () {
        $(this).find($.attr('autofocus')).focus();
    });
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-26T09:03:34.343

如果您正在寻找适用于所有模式的片段，并在打开的模式中自动搜索第一个输入文本，您应该使用这个：

```
$('.modal').on('shown.bs.modal', function () {
    $(this).find( 'input:visible:first').focus();
}); 
```

如果您的模式是使用 ajax 加载的，请改用：

```
$(document).on('shown.bs.modal', '.modal', function() {
    $(this).find('input:visible:first').focus();
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-03-10T09:00:55.257

使用 Bootstrap 4： 1/ 删除**<div class="modal fade" 处的“fade”类...** 2/ 下一步（[https://getbootstrap.com/docs/4.6/components/modal/](https://getbootstrap.com/docs/4.6/components/modal/)）

```
$('#myModal').on('shown.bs.modal', function () {
  $('#myInput').trigger('focus')
}) 
```

如果您没有删除“淡入淡出”类，则输入将集中，但键盘不会显示在 iOS 上的 Safari 中

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-15T00:57:07.840

使用自动对焦搜索正确的表单元素：

```
$('.modal').on('shown.bs.modal', function() {
  $(this).find('[autofocus]').focus();
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-20T12:12:38.830

如果您只想自动聚焦任何打开的模式，您可以在您的模式或库函数中放入此片段，该片段将专注于第一个输入：

```
$('.modal').on('shown.bs.modal', function () {
  $(this).find('input:first').focus();
}) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-11T09:04:14.943

这是最通用的解决方案

```
$('body').on('shown.bs.modal', '.modal', function () {
    $(this).find(":input:not(:button):visible:enabled:not([readonly]):first").focus();
}); 
```

*   与页面加载后添加到 DOM 的模式一起使用
*   适用于输入、文本区域、选择而不是按钮
*   省略隐藏、禁用、只读
*   适用于褪色的模态，不需要 setInterval

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-20T07:04:55.767

当您的输入/文本框打开时，尝试**删除 modal 的 tabIndex 属性。**当您关闭输入/文本框时，**将其设置回原来的状态。**这将解决问题，**无论引导程序版本如何**，并且**不会影响用户体验流程**。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-29T23:15:32.677

根据 Bootstrap 4 文档：

> 由于 HTML5 定义其语义的方式，autofocus HTML 属性在 Bootstrap 模式中无效。要达到相同的效果，请使用一些自定义 JavaScript。

例如：

```
$('#idOfMyModal').on('shown.bs.modal', function () {
    $('input:first').trigger('focus')
}); 
```

[链接](https://getbootstrap.com/docs/4.0/components/modal/#how-it-works)。

# c# - c#如何从数据表中删除特定值

> ID：15247850
> 
> 赞同：0
> 
> 时间：2013-03-06T12:52:33.423
> 
> 标签：c#, datagridview, datatable

我有一个包含多达 20 个值或更多值的数据表。使用 selectrow 语句

```
DataGridViewSelectedRowCollection selectedRows = dgvSelectedFieldsView.SelectedRows; 
```

我已经从数据表中选择了一行，现在我需要从数据表中删除该特定行

谁能帮我吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:59:51.287

```
//Get the row that is selected
DataGridViewRow dr = selectedRows.Cast<DataGridViewRow>().FirstOrDefault();
//Your temp DataTable
DataTable dtTemp = new DataTable();
//If there is a row selected
if (dr != null)
{
  var rowToRemove = dtTemp.Rows.Cast<DataRow>().FirstOrDefault(row => row[0] == dr.Cells[0].Value);
  if (rowToRemove != null)
    dtTemp.Rows.Remove(rowToRemove);
} 
```

# asp.net - 提供导航到 URL 属性时，ASP 菜单未突出显示

> ID：15247853
> 
> 赞同：1
> 
> 时间：2013-03-06T12:52:45.037
> 
> 标签：asp.net, aspmenu

我有一个关于`<asp:menu>`ASP.NET 中的属性的问题，当我创建一个 ASP 菜单并提供`StaticSelectedStyle`它时，它将突出显示先前选择的菜单项，但是当我提供该`NavigateUrl`属性时，它不起作用/突出显示。

如果没有 javascript 或 jQuery，我怎样才能让它正常工作？下面是我的代码。

```
<asp:Menu ID="collegeMenu" Orientation="Horizontal" runat="server" CssClass="menu">
    <DynamicMenuStyle  />
    <DynamicSelectedStyle BackColor="#72A800"  ForeColor="#BBFF2D" />
    <DynamicHoverStyle BackColor="#72A800" ForeColor="#BBFF2D" />
    <DynamicMenuItemStyle BackColor="#BBFF2D"/>
    <StaticHoverStyle BackColor="#72A800" ForeColor="#BBFF2D"/>
    <StaticSelectedStyle BackColor="#72A800"  ForeColor="#BBFF2D" />
    <StaticMenuItemStyle ItemSpacing="2px" HorizontalPadding="20px" ForeColor="#666666" Height="30px" CssClass="menuitem"/>
    <DynamicMenuItemStyle VerticalPadding="5px" ForeColor="#666666" CssClass="menudynamic" HorizontalPadding="25px" />
    <Items>
        <asp:MenuItem Text="Home" Value="Master in Computer Application"></asp:MenuItem>
        <asp:MenuItem Text="MBA/PGDM" Value="MBA/PGDM Business Acedemic" NavigateUrl="~/Courses/MBA-PGDM.aspx"></asp:MenuItem>
        <asp:MenuItem Text="Others" Value="other">
        <asp:MenuItem Text="LLB" Value="LAW"></asp:MenuItem>
        <asp:MenuItem Text="HOTEL MANAGEMENT" Value="Hotel"></asp:MenuItem>
        <asp:MenuItem Text="BIOCHEMISTRY" Value="BIO"></asp:MenuItem>
        <asp:MenuItem Text="BIOTECHNOLOGY" Value="BioTech"></asp:MenuItem>
        <asp:MenuItem Text="MICROBIOLOGY" Value="BIOLOGY"></asp:MenuItem>
        <asp:MenuItem Text="NURSING" Value="Nurshing"></asp:MenuItem>
        <asp:MenuItem Text="BPHARMA" Value="Pharmacy"></asp:MenuItem>
        <asp:MenuItem Text="FASHION DESIGNING" Value="Fashion Technology"></asp:MenuItem>
        <asp:MenuItem Text="BAMS" Value="BAMS"></asp:MenuItem></asp:MenuItem></Items>
</asp:Menu> 
```

# unit-testing - 在 EasyMock 中正确使用 expectLastCall().once()

> ID：15247855
> 
> 赞同：2
> 
> 时间：2013-03-06T12:52:53.167
> 
> 标签：unit-testing, junit, easymock

我正在为特定方法编写一个junit测试。该方法包含对我使用 EasyMock 模拟的 DAO 类中的其他方法的调用。

我想断言这些 DAO 类方法之一被调用一次，这就是我假设 expectLastCall().once() 的用途。有问题的方法返回 void。

我目前通过的测试，我只是想确保我的逻辑是正确的，因为我之前没有使用过 EasyMock。我用这个问题作为参考：[EasyMock 使用 void 方法的期望](https://stackoverflow.com/questions/13917312/easymock-expectations-with-void-methods)

所以，这里是代码：

```
 @Before
    public void setUp() throws Exception{
    this.fooService = new FooService();
    this.fooMock = createStrictMock(FooDAO.class);
    }

    @Test
    public void test_fooTest(){

    String arg1 = "arg1";
    String arg2 = "arg2";
    this.fooService.setFooDAO(fooMock);
    expect(this.fooMock.someMethod(arg1, arg2)).andReturn(something);
    fooMock.methodThatShouldBeCalledOnce(EasyMock.<Object>anyObject());
    EasyMock.expectLastCall().once();
    replay(this.fooMock);
    this.fooService.methodUnderTest(someArg, someArg2);
    verify(this.fooMock);

    } 
```

我认为这样做是断言有一个对 methodThatShouldBeCalledOnce 的调用并且它只发生一次。我并不真正关心 someMethod 但如果没有被告知期待它，EasyMock 当然会抱怨。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:22:10.113

这在我看来是正确的。您可以通过删除对 void 方法的调用并验证测试是否失败，或者通过添加对 void 方法的第二次调用并查看测试是否也失败来轻松地自行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:11:47.420

如果您不关心某些方法，则应该创建一个不错的模拟。那么，确实没有必要调用expectLastCall。它是隐含的，但可以是一个很好的做法，可以让你很明显你在模拟一个方法。once() 也不需要，因为它是默认值。

因此，如果改写它，使用漂亮的米克，删除隐式调用，添加静态导入而不添加多余的“this”，你应该得到：

```
@Before
public void setUp() throws Exception{
   fooService = new FooService();
   fooMock = createNiceMock(FooDAO.class);
   fooService.setFooDAO(fooMock);
}

@Test
public void test_fooTest(){  
   fooMock.methodThatShouldBeCalledOnce(anyObject());

   replay(fooMock); // or replayAll() if you extend EasyMockSupport

   fooService.methodUnderTest(someArg, someArg2);
   verify(fooMock); // or verifyAll() if you extend EasyMockSupport
} 
```

# javascript - Javascript 输出未显示

> ID：15247856
> 
> 赞同：1
> 
> 时间：2013-03-06T12:53:00.370
> 
> 标签：javascript, google-chrome, output

我们有一个必须做的 JavaScript 作业。我们必须构建一个句子生成器。当我在 Chrome 中运行它时，单击按钮时没有任何反应。当我检查控制台日志时，它说`Uncaught ReferenceError: mySubject is not defined.`我认为我已经在`element1.onclick`功能中定义了它？

到目前为止，这是我的代码：

```
<body>
    <div id="container">
        <div id="buttons">
            <button id="btn1">Generate subject</button>
            <input name="subject" type="text" id="subject"
            />
            <button id="btn2">Generate verb</button>
            <input name="verb" type="text" id="verb" />
            <button id="btn3">Generate adjective</button>
            <input name="adj" type="text" id="adj" />
            <button id="btn4">Generate object</button>
            <input name="object" type="text" id="object" />
        </div>
        <!--buttons closing div-->
        <div>
            <p id="output">asjkldhfahfjasf;d</p>
        </div>
        <!--output closing div-->
    </div>
    <!--container closing div-->
    <script>
        var subject = new Array("Mel Gibson", "Optimus-Prime", "The Cat-lady", "The student", "My Dentist");

        var verb = new Array("licks", "pets", "hugs", "stabs", "eats");

        var adj = new Array("fat", "ugly", "delicious", "redundant", "hopeless");

        var object = new Array("cat", "bacon-strip", "dog-house", "bigmac", "hobo");

        var element1 = document.getElementById("btn1");
        var element2 = document.getElementById("btn2");
        var element3 = document.getElementById("btn3");
        var element4 = document.getElementById("btn4");

        element1.onclick = function() {
            mySubject = subject[Math.random() * subject.length]
        };

        element2.onclick = function() {
            myVerb = verb[Math.random() * verb.length]
        };

        element3.onclick = function() {
            myAdj = adj[Math.random() * adj.length]
        };

        element4.onclick = function() {
            myObject = object[Math.random() * object.length]
        };

        document.getElementById("output").innerHTML = mySubject + myVerb + " the" + myAdj + myObject + ".";
    </script>
</body> 
```

我开始迷失方向，不知道该怎么办，这只是我遇到的众多问题之一。

**编辑：**

所以我得到了一些关于我的 Javascript 的帮助，现在除了输出之外一切正常。我希望它输出到输出 div，但它没有输出任何东西。这是我现在的代码：

```
<h1>The Amazing Fantastical Sentence Generator!</h1>

<h4>Have hours of fun with your imaginary friends!</h4>
</div><!--title closing div-->
<div id="buttons">

<button id="btn1">Generate subject</button>
<input name="subject" type="text" id="insubject"/>

<button id="btn2">Generate verb</button>
<input name="verb" type="text" id="verb"/>

<button id="btn3">Generate adjective</button>
<input name="adj" type="text" id="adj"/>

<button id="btn4">Generate object</button>
<input name="object" type="text" id="object"/> 
```

```
<div >
<p id="output"></p>
</div><!--output closing div-->

</div><!--container closing div-->

<script>

var subject=new Array("Mel Gibson", "Optimus-Prime", "The Cat-lady", "The student", "My        Dentist");

var verb=new Array("licks", "pets", "hugs", "stabs", "eats");

var adj=new Array("fat", "ugly", "delicious", "redundant", "hopeless");

var object=new Array("cat", "bacon-strip", "dog-house", "bigmac", "hobo");

var element1=document.getElementById("btn1");
var element2=document.getElementById("btn2");
var element3=document.getElementById("btn3");
var element4=document.getElementById("btn4");

element1.onclick=function()  {document.getElementById('insubject').value=subject[Math.floor(Math.random()*(subject.length))];}

element2.onclick=function(){document.getElementById('verb').value=verb[Math.floor(Math.random()*(verb.length))];}

element3.onclick=function(){document.getElementById('adj').value=adj[Math.floor(Math.random()*(adj.length))];}

element4.onclick=function(){document.getElementById('object').value=object[Math.floor(Math.random()*(object.length))];}

document.getElementById("output").innerHTML= document.getElementById("insubject").value + document.getElementById("verb").value + " the" + document.getElementById("adj").value + document.getElementById("object").value + ".";

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:55:17.673

在函数内部声明的变量对于这些函数是**局部**的，这意味着您不能在这些函数之外使用它们。尝试将您的变量声明为函数之外的全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:55:40.183

> 当我检查控制台日志时，它显示 Uncaught ReferenceError: mySubject is not defined。我以为我已经在 element1.onclick 函数中定义了它？

JavaScript 作用域是[**函数作用域**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)。任何在函数中声明的变量只能被该函数和任何嵌套函数访问，但不能被外部函数访问。

如果你也想`mySubject`在函数之外访问，你需要在你已经`verb, subject, etc..`删除的地方声明它。

此外，即使在单击事件分配它之前您的`document.getElementById`命令仍然存在问题，`mySubject`但我认为这是一个不同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:57:33.723

您应该与 myVerb 和 myAdj 一起定义 mySubject 变量，如下所示：

```
var mySubject;
var myVerb;
var myAdj; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:16:10.910

所以我想出了如何解决这个问题。

再次编辑我的代码后，所有按钮都在工作，但它们没有正确输出到输出 div。所以我声明了在我的数组上运行的所有 Math.Random 方程，这样它们都有一个默认答案。我还创建了一个默认输出，它将显示在输出 div 中。

```
var subStr = subject[Math.floor(Math.random()*(subject.length))];
var verbStr = verb[Math.floor(Math.random()*(verb.length))];
var adjStr = adj[Math.floor(Math.random()*(adj.length))];
var objStr = object[Math.floor(Math.random()*(object.length))];

document.getElementById("output").innerHTML= subStr + " " + verbStr + " the " + adjStr + " " + objStr + " ."; 
```

然后我改变了我的点击事件。

```
element1.onclick=function(){

subStr = subject[Math.floor(Math.random()*(subject.length))];
document.getElementById('insubject').value=subStr;
document.getElementById("output").innerHTML= subStr + " " + verbStr + " the " + adjStr + " " + objStr + " .";

}

element2.onclick=function(){

verbStr = verb[Math.floor(Math.random()*(verb.length))];
document.getElementById('verb').value=verbStr;
document.getElementById("output").innerHTML= subStr + " " + verbStr + " the " + adjStr + " " + objStr + " .";
}

 element3.onclick=function(){

adjStr= adj[Math.floor(Math.random()*(adj.length))];
document.getElementById('adj').value=adjStr;
document.getElementById("output").innerHTML= subStr + " " + verbStr + " the " + adjStr + " " + objStr + " .";
}

element4.onclick=function(){

objStr= object[Math.floor(Math.random()*(object.length))];
document.getElementById('object').value=objStr;
document.getElementById("output").innerHTML= subStr + " " + verbStr + " the " + adjStr + " " + objStr + " .";
} 
```

现在再次计算每个 Math.random，然后将其输入到特定的文本字段中，然后输出到输出 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:11:19.380

您在`function`. 在函数外部声明它们，然后尝试在内部为它们分配值。

# c++ - 在 C++ 中转换字符串日期时间

> ID：15247857
> 
> 赞同：0
> 
> 时间：2013-03-06T12:53:06.970
> 
> 标签：c++, string, date, time

我有一个日期表示为“2012-10-28”格式的字符串，我想将其转换为“28/10/2012”的字符串格式。这在 C++ MS Visual Studio 中使用预定义函数是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:26:59.820

这将做到：

```
#include <cstdio>
#include <iostream>
#include <string>
using namespace std;

string format_date(string s)
{
    char buf[11];
    int a, b, c;
    sscanf(s.c_str(), "%d-%d-%d", &a, &b, &c);
    sprintf(buf, "%02d/%02d/%d", c, b, a);
    return buf;
}

int main()
{
    cout << format_date("2012-09-28") << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:44:06.273

我是这样解决的：

```
 Use sscan_f to break date into year, month and day.
 Create struct tm with the data above.
 Use strftime to convert from tm to string with the desired format. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:10:59.083

请查看[COleDateTime::ParseDateTime](http://msdn.microsoft.com/en-us/library/37t16xc9%28v=vs.80%29.aspx)。

如果不想使用 COleDateTime，则 ParseDateTime 的实现只是 VarDateFromStr 的一个薄[包装](http://msdn.microsoft.com/en-us/library/ms891612.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:59:02.063

[不幸的是， strptime](http://pubs.opengroup.org/onlinepubs/007904975/functions/strptime.html)在 Windows 中不存在。在此处寻求帮助：[Windows 上的 strptime() 等效项？](https://stackoverflow.com/questions/321849/strptime-equivalent-on-windows)

然后，您可以使用[strftime](http://pubs.opengroup.org/onlinepubs/007904975/functions/strftime.html)写入日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T19:24:05.760

在 Qt 中（一些嵌入式系统还不支持新的计时器类，所以在这里）我在这里只是给出了如何在没有太多笨拙的情况下转换字符串的想法。无论如何，计时器类都具有时代功能。

* * *

```
QString fromSecsSinceEpoch(qint64 epoch)
{
    QTextStream ts;
    time_t result = epoch;//std::time(NULL);
    //std::cout << std::asctime(std::localtime(&result))
    //            << result << " seconds since the Epoch\n";
    ts << asctime(gmtime(&result));
    return ts.readAll();
}
qint64 toSecsSinceEpoch(QString sDate)//Mon Nov 25 00:45:23 2013
{
    QHash <QString,int> monthNames;
    monthNames.insert("Jan",0);
    monthNames.insert("Feb",1);
    monthNames.insert("Mar",2);
    monthNames.insert("Apr",3);
    monthNames.insert("May",4);
    monthNames.insert("Jun",5);
    monthNames.insert("Jul",6);
    monthNames.insert("Aug",7);
    monthNames.insert("Sep",8);
    monthNames.insert("Oct",9);
    monthNames.insert("Nov",10);
    monthNames.insert("Dec",11);

    QStringList l_date = sDate.split(" ");
    if (l_date.count() != 5)
    {
        return 0;//has to be 5 cuz Mon Nov 25 00:45:23 2013
    }
    QStringList l_time = l_date[3].split(":");
    if (l_time.count() != 3)
    {
        return 0;//has to be 3 cuz 00:45:23
    }

    struct tm result;
    result.tm_mday=l_date[2].toInt();
    result.tm_mon=monthNames[l_date[1]];
    result.tm_year=l_date[4].toInt()-1900;;

    result.tm_hour=l_time[0].toInt();
    result.tm_min=l_time[1].toInt();
    result.tm_sec=l_time[2].toInt();
    time_t timeEpoch=mktime(&result);
    qDebug()<<"epochhhh :"<<timeEpoch;
    return timeEpoch;
} 
```

# jquery - JQuery 和复选框

> ID：15247862
> 
> 赞同：1
> 
> 时间：2013-03-06T12:53:19.360
> 
> 标签：jquery, input, checkbox

我遇到了 Jquery 和 Checkboxes 的问题。例如，我有这个：

```
<input type="checkbox" name="guest" value="1" />
<input type="checkbox" name="guest" value="2" />
<input type="checkbox" name="guest" value="3" />

<input type="text" id="player-1" />
<input type="text" id="player-2" />
<input type="text" id="player-3" /> 
```

我的问题以及我一直在寻找的问题是如何使用 JQuery 禁用 input[type=text]。

这是我的代码：

```
<script>
$("input").on("click", function() {
var i = $("input:checked").val();
if(this.checked)
$("#player-"+i).attr("disabled", "disabled");
else
$("#player-"+i).removeAttr("disabled");
});
</script> 
```

可能有什么问题我没有得到，但是当我单击一个复选框时，它会禁用第一个文本，如果我取消选中它，在我选中另一个文本之前什么都不会发生。

谢谢你的时间！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:56:44.343

你需要

```
 var i = $(this).val(); 
```

代替

```
var i = $("input:checked").val(); 
```

[**现场演示**](http://jsfiddle.net/YVJvX/1/)

```
$("input").on("click", function () {
    var i = $(this).val();
    if (this.checked) $("#player-" + i).attr("disabled", "disabled");
    else $("#player-" + i).removeAttr("disabled");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:55:28.517

您可以使用[jQuery`prop`](http://api.jquery.com/prop/)方法启用/禁用输入：

```
$("input").prop('disabled', true);
$("input").prop('disabled', false); 
```

对于您的示例：

```
$("#player-" + i).prop('disabled', this.checked); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:00:31.113

问题`$("input:checked").val()`出在这一行。

将其更改为，

```
$("input").on("click", function () {
    var i = $(this).val();
    if (this.checked) 
        $("#player-" + i).attr("disabled", "disabled");
    else 
        $("#player-" + i).removeAttr("disabled");
}); 
```

因为它只有在被检查时才有价值。当您取消选中该复选框时，它将显示**undefined**。

# java - 解析在JAVA中实时变化的网页

> ID：15247865
> 
> 赞同：0
> 
> 时间：2013-03-06T12:53:29.820
> 
> 标签：java, parsing, webpage

这是我想做的。我是一个初学者，所以可能是一个蹩脚的问题，但是，我想在 java 中实现 gui 应用程序，从体育比分直播页面获取数据，例如

```
http://www.futbol24.com/Live/

http://livescore.com/ 
```

并在我的应用程序中解析它（以某种方式）......然后我将能够将它存储在例如 jtable 中，将全职结果保存在数据库中，在进球后播放声音等等

做这个的最好方式是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:02:43.810

从实时网页解析 HTML 文档并从中获取特定信息几乎是不可能的。如果您确实设法确定了数据在文档中的确切位置，则页面结构可能随时更改。分数甚至可能不在 HTML 中——它们可以通过页面中的 Javascript 获取。

我建议您找到所需信息的 RSS 提要。然后，您将只需要解析一小段漂亮的 XML。这就是它的用途。

# c# - 将数组转换为单个元素以传递给函数

> ID：15247866
> 
> 赞同：1
> 
> 时间：2013-03-06T12:53:30.257
> 
> 标签：c#, arrays

很难给出正确的标题，对此感到抱歉。

我有一个带有函数的类（我不能修改）

`f(string arg1, string arg2, ..., string n)`.

我有一个数组`var arr = new string[n] { ..... }`

如何`f`在无需编写的情况下将数组项转换为传递函数

`f(arr[0], arr[1], ..., arr[n-1])`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:56:54.737

您可能会考虑使用反射。

在这种情况下，在*调用*时你可以传递一个参数数组：

```
methodInfo.Invoke(instanceOfClass, parametersArray) 
```

可以看例子：

[反射：如何使用参数调用方法](https://stackoverflow.com/questions/2202381/reflection-how-to-invoke-method-with-parameters)

请注意，在*这种*情况下，根据[MethodBase.Invoke](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)文档，您有一个`object[]`数组，因此您必须处理`boxing/unboxing`，不知道所有这些努力是否*真的*值得，只需以普通方式传递参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T12:57:38.833

您可能可以使用反射，但我认为这比完整编写的 20 个参数更难看。

如果您只需要在一个位置使用它，我会说只需使用 20 个参数调用它。如果您在多个地方需要它，请在您自己的程序中创建一个包含 20 个参数的函数，并在您自己的程序中在您需要的任何地方调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:04:46.090

使用诸如 MethodInfo 之类的反射将是您的选择之一。

[1] 获取方法f的信息（伪代码）：

```
 MethodInfo[] methodInfos = typeof (TheClassWhereFuncfExists).GetMethods(BindingFlags.Public...); 
```

[2] 使用linq获取f的方法信息

```
MethodInfo fmi= methodInfos.Where(item=> item.Name=="f").FirstOrDefault(); 
```

[3] 获得 fmi 后，您可以通过编程方式调用它：

```
fmi.Invoke(...) 
```

仅伪代码，未经彻底测试。

# java - 如何更新 JDBC 只读结果集的行

> ID：15247868
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:53:33.230
> 
> 标签：java, jdbc

尝试更新 ResultSet 时遇到问题。我正在通过 JDBC 查询数据库，并返回一个不是 CONCUR_UPDATABLE 的结果集。我需要在指定的列中将 '_' 替换为 ' '。我怎么能那样做？

```
String value = derivedResult.getString(column).replace("_", " ");
derivedResult.updateString(column, value);
derivedResult.updateRow(); 
```

这在 Updatable 上运行良好，但如果它是 ResultSet.CONCUR_READ_ONLY 怎么办？

**编辑：**

这将是一个 JDBC 驱动程序，它调用另一个 JDBC 驱动程序，我的问题是我需要替换 ResultSets 的内容，即使它是仅转发或只读的。如果我设置了 scroll_insensitive 和可更新的，就没有问题，但是有一些 JDBC 驱动程序可以处理只向前的结果集。

解决方案：

*   我是否应该尝试将结果移动到内存数据库并替换那里的内容。
*   我是否应该像我的所有其他类一样实现结果集：如果需要，调用带有修改的底层驱动程序函数。

之后我不想使用结果来进行更新或插入。基本上这将在选择查询上完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:03:35.370

根据我的经验，更新结果集仅适用于简单查询（单个表上的选择语句）。但是，根据数据库，这可能会发生变化。我会首先查阅数据库文档。

即使您创建自己的可更新结果集，为什么您认为数据库数据会更改？很可能（几乎可以肯定）更新机制使用了不公开的代码，并且只存在于您使用的 jdbc 驱动程序的结果集实例实现类型中。

我希望以上是有道理的。

# javascript - 如何禁用和启用 Div 的所有内容

> ID：15247870
> 
> 赞同：0
> 
> 时间：2013-03-06T12:53:43.523
> 
> 标签：javascript, jquery, html, asp.net-mvc

我正在尝试禁用 Div 标签的所有元素。我在输入类型上取得了成功。但无法禁用链接。我也试过[这个](https://stackoverflow.com/a/6961709/1624583)，但它不起作用。这是我尝试过的代码（但它仅适用于输入）：

```
 $('#EditorRows *').attr('disabled', true); 
```

我知道禁用输入类型，但我想为链接实现这种类型的机制。

> **第一次部分查看代码：**

```
<div id="Part2">
<div id="EditorRows">
<%= Html.ActionLink("Add another...", "Add", null, new { id = "addItem" }) %>
<%Html.RenderPartial("_InsertServices", Model);%>
</div>
<div id="DontAppend">
<input type="button" id="btnEdit" value="Edit" hidden="hidden"/>
<input type="button" id="btnDone" value="Done" />
</div>
</div> 
```

> **第二部分视图**

```
<div class="EditorRow">
<% using (Html.BeginCollectionItem("services"))
{ %>
<table id="table1">
<tr><td>
NOS:</td><td>
<%:Html.DropDownListFor(model=>model.Id,(SelectList)ViewData["crmServiceType"] as SelectList,"---")%>
</td>
<td>
Comment:</td><td>
<%=Html.TextBoxFor(model => model.Comment, new { size = "20" })%></td>
<td>
<a href="#" class="deleteRow">delete</a>
</td>
</tr>
</table>
<% } %>
</div> 
```

> **脚本：**

```
 $("#addItem").click(function () {
            $.ajax({
                url: this.href,
                cache: false,
                success: function (html) { $("#EditorRows").append(html); }
            });
            return false;
        });

        $("a.deleteRow").live("click", function () {
            $(this).parents("div.EditorRow:first").remove();
            return false;
        });

$('#btnDone').click(function () {
      $('#EditorRows *').attr('disabled', true);
    }
    $('#btnEdit').click(function () {
      $('#EditorRows *').attr('disabled', false);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:57:19.943

要禁用链接，请使用此

```
$('div a').unbind('click'); 
```

矿石在你的情况下：

```
$('#btnDone').click(function () {
    var $rows = $('#EditorRows');
    $rows.find('input, select, textarea').attr('disabled', true);
    $rows.find('a').unbind('click');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:17:43.643

尝试这个

```
$('#EditorRows').find('a').each(function(){
   $(this).replaceWith($(this).text());
}); 
```

**更新**

要禁用：

```
$('#EditorRows').find('a').bind('click', false); 
```

启用 ：

```
$('#EditorRows').find('a').unbind('click', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:56:41.857

想到的第一个解决方案，但它并不假装优雅 [http://jsbin.com/icijox/4/edit](http://jsbin.com/icijox/4/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:00:44.547

```
$('div').find(':input').prop('disabled',true);//this line will this able all inputs including buttons.
$('div').find('a').each(function(){
   $(this).removeAttr('href');
   $(this).unbind('click');
});//this will take care of the links 
```

我认为这会解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:00:45.120

使用 jquery 的 off 方法。

```
$('#Yourdiv a').off('click');

$('#yourDiv').find('input').attr('disabled',true); 
```

否则简单的只是在单击锚点时返回 false 。

```
$('#Yourdiv a').on('click',function(e)
                  {
                   return false;  // or e.preventDefault();
                  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T13:06:00.270

它仅适用于输入，因为它们具有`disable`属性。要禁用链接尝试

如果您只想删除链接重定向。

```
$("#youdivname").find('a').removeAttr('href') 
```

这将再次激活它：

```
$("#yourdivname").find('a').attr('href','link') 
```

`link`重定向在哪里。

# jsf - bean方法的Primefaces和标签值

> ID：15247873
> 
> 赞同：2
> 
> 时间：2013-03-06T12:53:48.633
> 
> 标签：jsf, primefaces, facelets

我想使用参数从 bean 方法中设置 primefaces 标记的值，但这不起作用。

在 Facelets 页面上：

```
<p:outputLabel id="userLabel" value="#{languageBean.retrieveLanguage(1)}" />
<p:commandButton value="#{languageBean.retrieveLanguage(2)}" 
    action="#{loginBean.logIn()}"
    update="loginForm"/> 
```

在豆子上：

```
public String retrieveLanguage(int key) {
    return (String) getPageMap(pagePath, pageName).get(key);
} 
```

我得到以下异常：

```
javax.faces.view.facelets.FaceletException: Error Parsing /components/login.xhtml: Error Traced[line: 24] Element type "p:outputLabel" must be followed by either attribute specifications, ">" or "/>". 
```

你能给我任何想法吗？

问候，罗伯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:10:31.237

您不应该从首页传递语言值 - 这是将实际登录从应用程序转移到图形前端。相反，将语言值存储在 bean 中并简单地调用retrieveLanguage。

如果您正在尝试处理翻译，请查看资源包。

# directx - 创建具有 CPU 写访问权限的 Texture2D 数组

> ID：15247876
> 
> 赞同：1
> 
> 时间：2013-03-06T12:53:50.997
> 
> 标签：directx, directx-10

我正在尝试创建一个具有 CPU 写访问权限的 Texture2D 数组。详细来说，我使用的代码如下所示：

```
D3D10_TEXTURE2D_DESC texDesc;

texDesc.Width               = 32;
texDesc.Height              = 32;
texDesc.MipLevels           = 1;
texDesc.ArraySize           = 2;
texDesc.SampleDesc.Count    = 1;
texDesc.SampleDesc.Quality  = 0;
texDesc.Usage               = D3D10_USAGE_DYNAMIC;
texDesc.CPUAccessFlags      = CPU_ACCESS_WRITE;
texDesc.Format              = DXGI_FORMAT_R32G32B32_FLOAT;
texDesc.BindFlags           = D3D10_BIND_SHADER_RESOURCE;
texDesc.MiscFlags           = 0;

ID3D10Texture2D* texture2D;
CHECK_SUCCESS(device->CreateTexture2D(&texDesc, NULL, &texture2D)); 
```

但是，这会因 E_INVALIDARG 而失败。创建具有相同尺寸（即 32x32x2）和参数的 3D 纹理效果很好，但在这种情况下并不需要。有谁知道为什么这个设置无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:46:30.823

您需要提供一个长度为 texDesc.ArraySize 的 D3D11_SUBRESOURCE_DATA 数组作为 CreateTexture2D() 的第二个参数的输入。

如需更多帮助，请参阅此[示例](https://gamedev.stackexchange.com/questions/14507/loading-a-texture2d-array-in-directx11)。

# log4j - 在 weblogic 中部署的 ear 项目中的 log4j 问题

> ID：15247879
> 
> 赞同：1
> 
> 时间：2013-03-06T12:54:00.960
> 
> 标签：log4j, weblogic, ear

我已经`log4j`在 EAR 项目中每个模块的资源文件夹中进行了配置。EAR 包含两个 WAR、一个 EJB 和一个 JAR。我在以集群模式运行的 Weblogic 中部署了 EAR。 `log4j`在 Weblogic 集群节点中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:14:52.310

Log4j 需要 log4j.properties/log4j.xml 才能正确配置。当 Log4j 加载时，它会查找 log4j.properties 文件或 log4j.xml。如果 log4j 无法找到此文件，则根本不会记录。

为了使 log4j 工作，请确保

1.  Log4j.properties/log4j.xml 文件位于类路径中。
2.  所有模块/jars/ejbs/war 必须使用相同的属性/xml 文件，除非您需要为每个模块单独配置 log4j。

3.  属性文件或 xml 的多个配置文件将发生冲突，并且 log4j 可能无法按预期工作。

# ruby-on-rails-3 - Multi has_many 与多态模型的关系

> ID：15247881
> 
> 赞同：0
> 
> 时间：2013-03-06T12:54:02.870
> 
> 标签：ruby-on-rails-3, activerecord, polymorphic-associations

我有三个模型协议，服务和价格。

```
class Agreement < ActiveRecord::Base
  has_many :prices, as: :priceable
end

class Service < ActiveRecord::Base
  has_many :prices, as: :priceable
end

class Price  < ActiveRecord::Base
  attr_accessible :price, :price_currency, :priceable_id, :priceable_type
  belongs_to :priceable, polymorphic: true
end 
```

但我在 service customer_price 和 Agency_price 有两种价格类型。协议没有价格类型。我想建模如下所示的东西。怎么可能？

```
class Agreement < ActiveRecord::Base
  has_many :prices, as: :priceable
end

class Service < ActiveRecord::Base
  has_many :customer_prices, as: :priceable # I think I should write something here
  has_many :agency_prices, as: :priceable   # I think I should write something here
end

class Price  < ActiveRecord::Base
  attr_accessible :price, :price_currency, :priceable_id, :priceable_type
  belongs_to :priceable, polymorphic: true
end 
```

什么是最好的方法？可能我应该制作两个价格模型，如协议价格和服务价格。此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:41:16.400

制作两个模型实际上对您没有帮助。

我认为你只需要为你的关系设置一个特定的 foreign_key 。

```
has_many :customer_price, as: :priceable, :foreign_key => customer_price_id
has_many :agency_price, as: :priceable, :foreign_key => agency_price_id 
```

这两个字段必须添加到您的架构中。

# guava - SimpleTimeLimiter 关闭

> ID：15247883
> 
> 赞同：2
> 
> 时间：2013-03-06T12:54:05.893
> 
> 标签：guava

我正在使用`com.google.common.util.concurrent.SimpleTimeLimiter`，
想知道这是否可以解决线程池关闭问题？我正在使用 noargs 构造函数构造它 `new SimpleTimeLimiter()`，但这不提供调用方法`shutdown()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:26:30.847

[注意ExecutorService.shutdown()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)的 JavaDoc

> 启动有序关闭，其中执行先前提交的任务，但**不会接受新任务**。如果已经关闭，调用没有额外的效果。

支持`ExecutorService.submit(callable)`将在`SimpleTimeLimiter`. 由于不会再提交其他新任务，因此`shutdown()`不需要。

但是如果我们使用构造函数`SimpleTimeLimiter(ExecutorService executor)`，那么我们必须负责`shutdown()`。

# wordpress - wordpress 404.php 显示 apache 状态“HTTP/1.1 200 OK Date:....”

> ID：15247884
> 
> 赞同：1
> 
> 时间：2013-03-06T12:54:07.527
> 
> 标签：wordpress, http-status-code-404

正如标题中所说：我正在运行 WP 3.4，并且我有一个 404.php。当我调用一个不存在的页面时，404.php 会很好地显示出来。

但是在页面的末尾（在 /html 标签后面）会显示 apache 状态，例如

HTTP/1.1 200 OK 日期：2013 年 3 月 6 日，星期三 12:46:05 GMT 服务器：Apache 内容长度：0 Keep-Alive：超时=5，max=100 连接：Keep-Alive 内容类型：application/x- httpd-php5

有没有人有想法摆脱它以及为什么会出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:46:51.807

这很可能是一个主题问题。`header("Status: 404 Not Found");`试着把你的主题的 404.php放在开头。

# android - 以编程方式关闭 APK 安装视图

> ID：15247888
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:54:41.870
> 
> 标签：android, android-intent, installation, apk

![在此处输入图像描述](../Images/9136a0e75bd523d6e3a604afa0c5bc45.png)在我的应用程序中，我正在使用另一个应用程序的 APK 文件安装另一个应用程序。我正在使用以下代码：

```
Intent intent= new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(new File( "sdcard/"+objApp.strApkPath)),
                    "application/vnd.android.package-archive");
startActivity(intent); 
```

我想在以编程方式完成安装后关闭该安装视图。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:44:52.397

请添加您需要添加 LOCAL_CERTIFICATE := 平台的应用程序的 Android.mk 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:35:25.210

`startActivity()`通话后 `finish()`

# c# - WPF 中的应用程序级别变量

> ID：15247890
> 
> 赞同：3
> 
> 时间：2013-03-06T12:54:52.730
> 
> 标签：c#, wpf

我在一个窗口中有一个应用程序级别变量

```
 object temp1 = App.Current.Properties["listofstring"];

   var temp2 = (List<string>)temp1; 
```

当我改变时让我们说

```
 temp2[0]="abc"; 
```

它也改变了**“listofstring”**

所以我复制了一份

```
List<string> temp3 = temp2; 
```

但如果我这样做

```
 temp3[0] ="abc"; 
```

在其他窗口中访问时，它也会在**“listofstring”**中发生变化吗？

一旦声明，我如何只使用它的**本地副本****而不干扰其内容？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:56:18.087

您不是在复制列表，而是在复制参考。你可以做：

```
List<string> temp3 = new List<string>(temp2.ToArray());
//or
List<string> temp3 = new List<string>(temp2); 
```

或者

```
List<string> temp3 = temp2.Select(r=>r).ToList();
//or 
List<string> temp3 = temp2.ToList(); 
```

# php - DIRECTORY_SEPARATOR 脚本上的 php 文件？

> ID：15247891
> 
> 赞同：0
> 
> 时间：2013-03-06T12:54:59.367
> 
> 标签：php

我正在编写绝对路径以确保`require_once`在我所有包含的文件中都能按预期工作。c:/程序文件（x86）/apache软件基础/apache2.2/htdcos/photo_gallery

我试过这两个例子：

1.  `defined("SITE_ROOT")? null : defined("SITE_ROOT","C:".DS."Program Files (x86)".DS."apache software foundation".DS."apache2.2".DS."htdocs".DS."photo_gallery");`

2.  `defined("SITE_ROOT")? null : defined("SITE_ROOT".DS."C:".DS."Program Files (x86)".DS."apache software foundation".DS."apache2.2".DS."htdocs".DS."photo_gallery");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:18:10.990

首先，不要在三元操作数中使用赋值，尤其是在只有一个实际结果的情况下。单线很好，但它们不是实用性的缩影。

其次，正斜杠也适用于 Windows：

```
if (!defined("SITE_ROOT")) {
    define("SITE_ROOT", "C:/Program Files (x86)/apache software foundation/apache2.2/htdocs/photo_gallery");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:24:01.470

您已经定义了“SITE_ROOT”

它在 $_SERVER['DOCUMENT_ROOT'] 中，无需重新发明轮子。只需根据您的需要使用此“DOCUMENT_ROOT”或“SCRIPT_FILENAME”进行连接：

```
$site_root = dirname($_SERVER['DOCUMENT_ROOT']) . DIRECTORY_SEPARATOR . 'subdirectory'; 
```

dirname 用于删除可能出现的斜杠：[http ://www.php.net/manual/en/reserved.variables.server.php#97351](http://www.php.net/manual/en/reserved.variables.server.php#97351)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:21:15.517

首先，您需要定义 DS，因为它没有显示。

```
 defined("DS")? null : define('DS', DIRECTORY_SEPARATOR);
  defined("SITE_ROOT")? null : define("SITE_ROOT", $_SERVER['DOCUMENT_ROOT'] . DS. 'photo_gallery'); 
```

# mongodb - Mongo 错误：DBClientBase::findN: 传输错误（）

> ID：15247893
> 
> 赞同：7
> 
> 时间：2013-03-06T12:55:12.727
> 
> 标签：mongodb, mongoose

我不断面临这个错误。

```
 DBClientBase::findN: transport error() 
```

我搜索了这个问题，发现有很多人遇到这个问题，但没有找到这个错误的确切原因。为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T09:02:53.553

这可能是由于连接到 mongod 服务器的网络错误或 mongos 无法连接到 mongod。

在这里尝试的第一件事是重新启动 mongod/s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T07:50:53.950

如果 MongoDB 服务器仅接受 SSL 加密连接，也会发生这种情况。为此，您需要使用 SSL 支持编译的 MongoDB 客户端。

进一步阅读： [http ://docs.mongodb.org/manual/tutorial/configure-ssl-clients/#connect-to-mongodb-instance-with-ssl-encryption](http://docs.mongodb.org/manual/tutorial/configure-ssl-clients/#connect-to-mongodb-instance-with-ssl-encryption) [http://www.mongodb.org/about/contributors /tutorial/build-mongodb-from-source/](http://www.mongodb.org/about/contributors/tutorial/build-mongodb-from-source/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-10T03:44:14.857

`ConnectionString::connect()`通过从调用中删除 SocketTimeOut 参数来解决我的问题。

IE

```
pDBClientBase = cs.connect(strErr /*,2 */); 
```

# silverlight - 如何跟踪对 PageCollectionView SortDescriptions 的更改

> ID：15247896
> 
> 赞同：1
> 
> 时间：2013-03-06T12:55:17.933
> 
> 标签：silverlight, pagedcollectionview

当 a`DataGrid`绑定到 a`PagedCollectionView`时，用户可以使用给定列或列集合的数据。此用户操作操作`SortDescriptions`集合，当发生这种情况时，我需要使用来自服务器的新查询来刷新基础数据。

理想情况下，我会将事件处理程序附加到属性的`CollectionChanged`事件`SortDescriptions`，但我不能，因为它受到保护。

`SortDescriptions`那么，什么是跟踪集合更改的正确方法`PagedCollectionView`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:26:32.377

事实证明，将 SortDescriptions 属性转换为 INotifyCollectionChanged 很简单，这将公开 CollectionChanged 事件。

```
((INotifyCollectionChanged)Data.SortDescriptions).CollectionChanged += (s,e)=> { ... }; 
```

# php - PHP多行表单，自动MySQL输入

> ID：15247898
> 
> 赞同：0
> 
> 时间：2013-03-06T12:55:18.337
> 
> 标签：php, mysql, forms, input

我创建了一个 PHP 站点，它基本上是一个带有一些 MySQL 输入表单的站点。

这就是它现在的样子。很简单，填好后点击提交，将数据输入数据库。

[http://i.imgur.com/ieMf39f.jpg](http://i.imgur.com/ieMf39f.jpg)

这就是我希望它的外观和工作方式。我不希望它能够仅通过一个提交按钮向数据库发送多个查询。

[http://i.imgur.com/IdqcJjb.jpg](http://i.imgur.com/IdqcJjb.jpg)

所以问题是..我如何以最简单有效的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:57:39.213

在每个字段的名称中，使用例如name="opb1[]"，这样它就会变成一个数组（opb = array）。

然后你可以这样做：

```
foreach($opt1 as $k => $_opt1)
    if(isset($opb2[$k]) && isset($opb3[$k]) .....etc) {
        // use each row e.g. $opb2[$k]...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:02:17.847

您的 HTML 应如下所示：

```
<input name="name[]" />
<input name="obp1[]" />
<input name="obp2[]" />
   <br />
<input name="name[]" />
<input name="obp1[]" />
<input name="obp2[]" /> 
```

和你的 PHP：

```
for($i = 0; $i < count($_POST['name']); $i++) {
  // verify if all fields are completed
  if(empty($_POST['name'][$i]) || empty($_POST['obp1'][$i])) { // all fields here
    // add an error
  } else {
    $mysqli->query("INSERT INTO my_table VALUES ('" . $mysqli->real_escape_string($_POST['name'][$i]) . "', '" . $mysqli->real_escape_string($_POST['obp1'][$i]) . "')");
  }
} 
```

# c# - 将应用程序配置嵌入到 wcf 中的 c# 代码中

> ID：15247907
> 
> 赞同：5
> 
> 时间：2013-03-06T12:55:39.177
> 
> 标签：c#, wcf, configuration, wcf-client, wcf-configuration

我有一个连接到我的 wcf 服务的客户端程序。我想**将应用程序配置嵌入**到**C#**代码中，直到用户**无法更改甚至无法看到 app.config**。

**但我不能将这两个配置设置带到 C# 代码中：**

```
<system.diagnostics>
    <sources>
      <source propagateActivity="true" name="System.ServiceModel" switchValue="Warning">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="NewListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning,ActivityTracing" >
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="NewListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="Trace.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
          name="NewListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics> 
```

和

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true" >
      <proxy autoDetect="True" usesystemdefault="True"/>
    </defaultProxy>
  </system.net> 
```

我添加了一些这样的代码

```
 System.Diagnostics.XmlWriterTraceListener xmlt = new System.Diagnostics.XmlWriterTraceListener("Trace.svclog", "myListener");
  System.Diagnostics.Trace.Listeners.Add(xmlt): 
```

但没有奏效。当您在 app.config 文件中设置跟踪侦听器时，应用程序将自动记录异常、警告等发生**（我想要）**但是当我创建 System.Diagnostics.XmlWriterTraceListener 时，我必须自己编写日志（异常）。

关于默认代理我找到了一些类，但我在类中找不到这些设置。

**问题 ：**

**1-**我想将这些设置带到 C# 代码中。（我希望 C# 结果与 app.config 结果完全相同）

**2-** app.config 比 C# 代码强吗？我可以在 c# 类中找到所有 app.config 设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T00:34:45.533

是的，您可以在代码中配置 WCF 的所有设置。搜索 stackoverflow 我发现了一个链接，这个问题已经被问过[wcf-configuration-without-a-config-file](https://stackoverflow.com/questions/54579/wcf-configuration-without-a-config-file) 还有一个来自 Microsoft MSDN [MSDN Source](http://msdn.microsoft.com/en-us/library/hh205277.aspx)的链接。关于 WCF 的跟踪，这里有一个链接也可以帮助您：[WCF Tracing in code](http://wcfpro.wordpress.com/2010/11/21/how-to-add-wcf-traces-programmatically/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:50:24.067

将 app.config 文件嵌入到程序集中怎么样？它应该是 app.config 文件属性中的一个选项。

或者您可以在代码中配置它并完全摆脱 app.config 文件：

代理可以配置如下：

```
var proxy = HttpWebRequest.DefaultWebProxy;
proxy.Credentials = CredentialCache.DefaultCredentials; 
```

但是，我相信无法通过代码完全配置 WCF 跟踪...您可以尝试使用其他日志记录机制或 ETW？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:44:26.010

我将在您问题的动态方面解决 WCF Web.Config 的修改。请注意，此方法也适用于访问 APPConfig 文件。

您可以访问表单应用程序范围之外的配置文件。

```
System.Configuration.ExeConfigurationFileMap configMap = new ExeConfigurationFileMap("YourWCFAppPath\\web.config");
System.Configuration.Configuration webConfigFile = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.None); 
```

从那里你可以GetSections的配置；修改它，然后将其保存回配置文件。我现在不在一台装有 Visual Studio 的机器上，所以我不能 100% 确定获取元素部分的语法；拥有它后，您可以修改返回的对象，并在完成后对配置文件执行保存。保存配置文件时，您需要将模式指定为已修改。

```
webConfigFile.Save(ConfigurationSaveMode.Modified); 
```

您需要记住让 WCF 应用程序调用在您修改配置文件时它已经运行的配置文件的刷新。如果您修改了连接字符串部分，您将执行下面的代码。

```
System.Configuration.ConfigurationManager.RefreshSection("connectionStrings"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:49:39.000

您可以使用`System.Configuration.ConfigurationManager`+ `System.Xml.XmlReader`/`System.Xml.Serialization.XmlSerializer`从文件中检索配置。然后您可以将其内容存储在数据库中，并在所有应有的地方手动使用。同样正如@xmidPOE 建议的那样，请参阅这篇文章[wcf-configuration-without-a-config-file](https://stackoverflow.com/questions/54579/wcf-configuration-without-a-config-file)

# javascript - getElementsByTagName 返回未定义

> ID：15247912
> 
> 赞同：0
> 
> 时间：2013-03-06T12:55:48.467
> 
> 标签：javascript, getelementsbytagname

我有一个带有一个参数的函数，它是一个 ID 字符串：

```
function experimentOne(masterContainer) { 
```

我打电话给：

```
experimentOne('#experimentOne'); 
```

我正在尝试将每个 div 放入给定的 DIV 中并将其放入一个数组中，如果我使用它可以工作：

```
var menuButtons = $('#myDivIDHere').getElementsByTagName('div'); 
```

但是，如果我使用：

```
var menuButtons = masterContainer.getElementsByTagName('div'); 
```

我在控制台中收到此错误。

> TypeError: 'undefined' 不是一个函数（评估 'parentContainer.getElementsByTagName('div', masterContainer)'）

如果我输出 $(masterContainer); 到控制台，它返回正确的元素，并且这段代码运行良好：

```
var experimentOneMenuButton = $(masterContainer).children().last(); 
```

所以我很困惑，有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:01:38.317

您需要使用 jQuery[元素选择器](http://api.jquery.com/element-selector/)

```
var menuButtons = $('#myDivIDHere').find('div'); 
```

或者

```
var menuButtons = $(masterContainer).find('div'); 
```

在你的`experimentOne()`方法中

[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)是一个 dom 方法，但`$('#myDivIDHere')`它是一个 jQuery 对象，你没有`getElementsByTagName`.

如果要使用`getElementsByTagName`，则需要使用`$(masterContainer)[0].getElementsByTagName`where`$(masterContainer)[0]`为您提供 dom 引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:01:03.263

我不认为 .getElementsByTagName 是 jQuery 对象上的方法。

你需要使用

```
var menuButtons = $('#myDivIDHere').get(0).getElementsByTagName('div'); 
```

.get(0) 将返回 DOM 对象，而不是 jQuery 对象

# java - Android：UI线程被阻止

> ID：15247915
> 
> 赞同：2
> 
> 时间：2013-03-06T12:55:57.090
> 
> 标签：java, android, multithreading, android-intent

在我的应用程序中，我创建了一个自定义对话框，它同时显示在 webview 和普通 android 应用程序中，并且在显示对话框时我做了一些后台操作，当我调用 mydialog 函数时，它会显示我的自定义对话框和它还返回一些值，当我使用 webview+javainterface 时它可以正常工作，但它不适用于普通应用程序，流程是

首先我会得到我的对话框，在我做了一些处理之后（这里主线程将等待，对话框需要显示，）然后我将返回字符串，问题是当我调用这个函数而不是那个时对话框不显示我的后台进程完成后将显示对话框。

我称之为我的对话框，如：

```
String sample=mydialog();

public String mydialog() {

            String mystring = null;

                try {
                    myactivity.this.runOnUiThread(ShowDialog);

                    while (customizeddialog.Getvalue() == null) {

                    }

                    mystring = customizeddialog.Getvalue();
                    customizeddialog.Setvalue(null);
                } catch (Exception e) {

            return mystring;

        }

        private Runnable ShowDialog = new Runnable() {

            public void run() {

                    try {
                        customizeddialog m_dialog = new customizeddialog(myactivity.this);
                        m_dialog.setCancelable(false);
                        m_dialog.show();

                    } catch (Exception e) {

                    }

            }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:37:48.193

当您进入`synchronized`块中时，`mydialog()`您将获得`this`的锁。在这个`synchronized`块中，你在 UI 线程上运行，`ShowDialog()`当`this`你进入.`synchronized``ShowDialog`

由于锁已经被获取，它会一直等待直到它被释放`mydialog()`，这永远不会发生，因为`ShowDialog`从不执行过去`synchronized(this)`。你所拥有的是僵局。

# javascript - 如何在不旋转图像的情况下以圆周运动移动图像？

> ID：15247917
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:56:01.057
> 
> 标签：javascript, html, css

我正在使用 html5、css3 和 javascript 创建一个网页......在我的网页中，一个视频在页面中心播放，5 个图像将围绕视频以圆形方式移动，而没有旋转图像......怎么能我做到了？？我是初学者...请帮助我...提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:04:25.797

只需使用基本三角函数计算图像坐标：

```
 y
              |
              |     [image]
              |    /
              |   /
              |  / radius
              | /
    __________|/_)_image_angle___________ x
              |
              |
              | 
```

基本三角学给我们：

```
cos(image_angle) = x/radius
sin(image_angle) = y/radius 
```

所以

```
x = cos(image_angle) / radius
y = sin(image_angle) / radius 
```

所以只需通过更改它们的 CSS 坐标来为图像设置动画。所以对于一张图片，它应该是这样的：

```
var img = document.getElementById('image1');
var radius = 200; // in pixels
var imgAngle = 0;

function animateImg () {
    img.style.left = cos(imgAngle)/radius;
    img.style.top = sin(imgAngle)/radius;

    imgAngle = imgAngle + 0.1;

    setTimeout(animateImg,50);
}

animateImg(); 
```

对于五个图像，只需将每个图像偏移 2*PI/5：

```
function animageImages () {
    // Assuming image elements are stored in an array, I'm
    // using the array length to infer the number of images:

    var offsetAngle = 2 * Math.PI / images.length;

    for (var i=0; i<images.length; i++) {
        var img = images[i];
        img.style.left = cos(imgAngle+offsetAngle*i)/radius;
        img.style.top = sin(imgAngle+offsetAngle*i)/radius;
    }

    imgAngle = imgAngle + 0.1;

    setTimeout(animateImages,50);
} 
```

当然，上面的示例都围绕页面的左上角（坐标 0,0）进行动画处理。您需要围绕视频坐标重新计算计算。此外，如果您不熟悉 CSS，则需要将图像的样式设置为`display:block`和`position:absolute`（或相对）以使其正常工作。

# c# - SQL 计数器和返回器，结果加倍

> ID：15247918
> 
> 赞同：4
> 
> 时间：2013-03-06T12:56:03.230
> 
> 标签：c#, asp.net, mysql, sql, repeater

我正在尝试制作一个列表，在我的论坛上显示我的所有类别。显示类别名称、ID 以及计数，计算有多少线程附加到该类别。

它工作得很好，但是，它会打印两次结果。

这是 SQL

```
SELECT categories.category_name, threads.thread_category_id, COUNT(*) 
                        AS 'threadCount' FROM threads 
                        INNER JOIN categories ON categories.category_id = threads.thread_category_id
                        GROUP BY categories.category_name, threads.thread_category_id 
```

这是结果 ![在此处输入图像描述](../Images/ae6811eb4ddb1517ab6cb83ee8f9813a.png)

正如你所看到的，它会打印两次相同的东西，这是不应该的。

编辑：这是 ASP。

```
<asp:Repeater ID="categories" runat="server">
    <HeaderTemplate>
    <table id="kategorier" cellspacing="0">
        <tr>
            <td class="head">Name</td>
            <td class="head" style="width:70px">Number of Threads</td>
        </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td class="item"><a href="Kategori.aspx?id=<%# Eval("thread_category_id") %>"><%# Eval("category_name") %> - ID: <%# Eval("thread_category_id")%></a></td>
            <td class="item" style="text-align:right"><%# Eval("threadCount") %></td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
    </table>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:07:14.920

如果您的 ASP 正确，基本上您有 2 个地方可以复制行：

1）SQL 错误（可能你必须使用 DISTINCT 运算符）

2）C#代码错误（可能你必须检查你的数据源）

请检查您的 SQL。并与我们分享您的 C# 代码。

用这个

```
SELECT distinct  category_name, thread_category_id, threadCount
FROM
( SELECT categories.category_name, threads.thread_category_id, COUNT(*) 
                        AS 'threadCount' FROM threads 
                        INNER JOIN categories ON categories.category_id = threads.thread_category_id
                        GROUP BY categories.category_name, threads.thread_category_id ) A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:04:34.980

使用 Distinct .its 删除所有重复的行

```
SELECT DISTINCT(threads.thread_category_id), categories.category_name, COUNT(*) 
                        AS 'threadCount' FROM threads 
                        INNER JOIN categories ON categories.category_id = threads.thread_category_id
                        GROUP BY threads.thread_category_id 
```

# codeigniter - 基于 CodeIgniter 服务器的 404

> ID：15247922
> 
> 赞同：0
> 
> 时间：2013-03-06T12:56:06.017
> 
> 标签：codeigniter, xampp, http-status-code-404

我已经在我的 localhost xampp 服务器上的目录中安装了 CodeIgniter：

```
localhost/CI/ 
```

当我直接访问该目录时，我会看到主页，但是当我尝试访问任何其他页面时，我会得到一个基于服务器的`404`页面。我没有看到 CI 404。

我已经尝试过使用，`uri_protocol`但我无法让它工作。有什么线索吗？

**路由.php**

```
$route['page/create'] = 'page/create';
$route['(:any)'] = 'page/view/$1';
$route['default_controller'] = 'page/view/hello-world';
$route['404_override'] = ''; 
```

**页面控制器**

```
class Page extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('page_model');
    }

    public function view($slug)
    {
        $data['page'] = $this->page_model->get_page($slug);

        if (empty($data['page']))
        {
            show_404();
        }

        $data['title'] = $data['page']['title'];

        $this->load->view('templates/header', $data);
        $this->load->view('page/view', $data);
        $this->load->view('templates/footer');
    }

    public function create()
    {
        $this->load->helper('form');
        $this->load->library('form_validation');

        $data['title'] = 'Create a new page';

        $this->form_validation->set_rules('title', 'Title', 'required');

        if ($this->form_validation->run() === FALSE)
        {
            $this->load->view('templates/header', $data);   
            $this->load->view('page/create');
            $this->load->view('templates/footer');
        }
        else
        {
            $this->page_model->set_page();
            $this->load->view('page/success');
        }
    }
} 
```

“世界你好！” 显示很好，但我无法让创建页面工作。该视图位于`views/page/create.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:11:02.640

赞普！！！！是模式rewite无法正常工作的问题..将apache作为独立安装，添加php和mysql，您可以以任何会导致其他错误的方式正常工作

```
$route['default_controller'] = 'page/view/hello-world'; 
```

将其更改为

```
$route['default_controller'] = 'page'; 
```

然后把它移到顶部，这样你就有了

```
$route['default_controller'] = 'page';
$route['404_override'] = '';
    $route['page/create'] = 'page/create';
$route['(:any)'] = 'pages/view/$1'; 
```

事情的顺序在 routes.php 中很重要

并在 page.php 控制器中添加一个函数 index()

# android - Android + Splash Screen 在方向更改时总共崩溃

> ID：15247933
> 
> 赞同：0
> 
> 时间：2013-03-06T12:56:39.730
> 
> 标签：android, splash-screen, screen-orientation

我的应用程序中实际上有 3 个活动。

我刚刚创建了一个活动，并使用处理程序将其作为 SPLASH SCREEN。

即，我的启动画面出现 3 秒，然后应用程序的主要生命周期继续。至此，一切都很完美。

**我的问题是当启动画面加载时，如果我改变方向，整个应用程序崩溃。**

我的要求是以横向和纵向模式加载应用程序。

我已经尝试过 onConfig 更改等，但徒劳无功....

我的悲伤故事都包含在这里......

```
 public class Asplash extends Activity{
Handler handler = new Handler();

   @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    try {

        handler.postDelayed(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                finish();
                Intent i = new Intent(Asplash.this, Example.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                startActivity(i);
            }
        }, 3000);

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

}

  @Override
protected void onPause() {
    // TODO Auto-generated method stub
     handler.removeCallbacksAndMessages(null);
       finish();
    super.onPause();

}
} 
```

这是清单文件：

```
 <activity android:name=".Asplash"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
        android:configChanges="orientation">
        <intent-filter >
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity
        android:name="com.example.Example"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我只想制作这个“Asplash”活动，以横向和纵向显示。我还尝试在 LAYOUT 和 LAYOUT-LAND 文件夹中为“splash”创建 XML 文件。然后也是同样的恐慌......

实际上在ANDROID中，它应该像基本示例一样自动调整方向变化。但我不明白为什么它在这里不起作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:06:39.300

使用此代码：

```
public class Asplash extends Activity{

   @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        startLoading();
    }
    //Start new activity and finish splash activity
    public void openMainActivity() {
        Intent i = new Intent(Asplash.this, Example.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
         startActivity(i);
         finish();
    }
    //Start thread which will wait for 3 secs and call openMainActivity
    private void startLoading(){
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Thread.sleep(3000);
                } catch (InterruptedException e) {
                }
                openMainActivity();
            }
        }).start();
    }
} 
```

finish() 应该在打开新活动后调用。并尝试此代码，它将解决您的问题。您无需对清单进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:58:37.293

尝试将以下一个放在您`manifest`的`activity`错误中：

```
 android:configChanges="orientation" 
```

正如[Android 文档](http://developer.android.com/intl/ja/guide/topics/manifest/activity-element.html#config)所说：

**安卓：配置更改**：

列出`activity`将自行处理的配置更改。当运行时发生配置更改时，`activity`默认情况下会关闭并重新启动，但使用此属性声明配置将阻止活动重新启动。相反，`activity`仍然运行并`onConfigurationChanged()`调用其方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:05:31.673

尝试添加 android manifest 文件

```
 android:configChanges="orientation|screenSize". 
```

但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T13:06:38.073

在这种情况下我不确定，但是如果您显示的代码是完整的，那么您的 Runnable 的上下文在它运行时已经消失，因为您的 Activity 在此期间由于方向更改而被破坏并重新创建.

已创建 Activity -> 将自身作为上下文创建 Runnable -> 方向更改 -> Activity 被销毁 -> Activity 被创建 -> Runnable 正在执行 -> Runnable 的上下文对象无效

为了在这个非常简单的情况下解决这个问题，我认为您可以使用 Application 对象作为 RUNnable 的上下文。

但是，请注意您还有另一个问题，即您的 Activity 的重新创建会启动另一个 Runnable，它会做同样的事情，只是稍后。

对于这种低复杂度的场景，一个简单的解决方案可能是在派生的 Application 对象中存储对 Runnable 的引用并检查它是否存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T13:07:48.790

尝试在您的清单中为您遇到错误的活动放置以下一个：

```
 android:configChanges="orientation"

to the activity tag and then override onConfigurationChanged method and do something like this 

    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
        if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE)
        {

                  load your xml file for landscape
}

else
{
 load your xml file for potrait
} 
```

# php - 使用 Doctrine 的 MongoDB ODM - 如何通过嵌入文档的字段查找文档？

> ID：15247938
> 
> 赞同：5
> 
> 时间：2013-03-06T12:56:49.053
> 
> 标签：php, mongodb, doctrine-orm, doctrine, doctrine-odm

我有以下文件：

*   一份`User`文件。
*   嵌入文档，包含对（参见下一个文档）的引用
*   一份`Site`文件

每个用户都有一个嵌入文档数组，每个代表他关注的一个项目 - 一个网站，一个推特账户 - 可以选择标记他感兴趣的特定类别。每个嵌入文档都有对第三个文档的引用 -`Site`文档（或`Twitter`文件等）。

问题是 - 使用 MongoDB ODM，如何使用该站点的 id 获取选择关注给定站点的所有用户的文档？
（见下文（在文件之后）如何在 mongodb shell 中完成）

**用户.php**

```
<?php
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
 * @ODM\Document
 */

class User {
    /**
     * @ODM\Id
     * @var string
     */
    protected $id;

    /**
     * @ODM\EmbedMany(
     *      discriminatorMap={
     *          "site"="SiteFollow",
     *          "twitter"="TwitterFollow",
     *      }
     *  )
     * @var ArrayCollection;
     */
    protected $follows;
} 
```

**网站关注.php**

```
<?php
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
 * @ODM\EmbeddedDocument
 */

class SiteFollow {
    /**
     * @ODM\Collection
     * @var array
     */
    protected $interestingCategories;

    /**
     * @ODM\ReferenceOne(targetDocument="Site", simple=true)
     * @var Site
     */
    protected $siteItem;
} 
```

**网站.php**

```
<?php
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
 * @ODM\Document
 */

class Site {
    /**
     * @ODM\Id
     * @var string
     */
    protected $id;

    /**
     * @ODM\String
     * @var string
     */
    protected $name;

    /**
     * @ODM\String
     * @var string
     */
    protected $url;
} 
```

mongo shell 中的用户文档示例：

```
db.User.findOne()
{
    "_id": ObjectId("123"),
    "follows": [
        {
            "interestingCategories": [
                "PHP"
            ]
            "siteItem" : ObjectId("OBJECT_ID_OF_SITE_DOCUMENT"),
            "_doctrine_class_name" : "site"
        }
    ]
} 
```

Mongo shell 命令用于获取关注特定站点的所有用户：

```
db.User.find({"follows.siteItem": ObjectId("OBJECT_ID_OF_SITE_DOCUMENT")}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-21T07:56:47.567

我发现[Madarco 提供的答案](https://stackoverflow.com/a/20380132/3922182)有时无法正常工作。如果您正在查询`$id`嵌入文档中引用字段的字段，您可能需要将`MongoId`对象传递给该`equals()`方法。所以在这种情况下，它将是：

```
$repo = $odm->getRepository('User');
$repo->createQueryBuilder()
    ->field('follows.siteItem.$id')
    ->equals(new \MongoId($siteId))
    ->getQuery()
    ->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T16:04:15.897

[只需在 SiteFollow 文档中查询DbRef](http://docs.mongodb.org/manual/reference/database-references/#dbrefs)字段的 $id 字段`siteItem`（在用户文档的嵌入集合中）：

```
$repo = $odm->getRepository("User");
$repo->createQueryBuilder()
         ->field("follows.siteItem.$id")
         ->equals($siteId)
         ->getQuery()
         ->execute(); 
```

# c++ - _ftol2_sse，有更快的选择吗？

> ID：15247949
> 
> 赞同：5
> 
> 时间：2013-03-06T12:57:19.083
> 
> 标签：c++, floating-point

我有很多调用的代码

```
int myNumber = (int)(floatNumber); 
```

这总共占用了我大约 10% 的 CPU 时间（根据分析器）。虽然我可以把它留在那里，但我想知道是否有更快的选择，所以我试着四处寻找，偶然发现

> [http://devmaster.net/forums/topic/7804-fast-int-float-conversion-routines/](http://devmaster.net/forums/topic/7804-fast-int-float-conversion-routines/) [http://stereopsis.com/FPU.html](http://stereopsis.com/FPU.html)

我尝试实现那里给出的 Real2Int() 函数，但它给了我错误的结果，并且运行速度较慢。现在我想知道，是否有更快的实现将双精度/浮点值设置为整数，或者 SSE2 版本是否尽可能快？我发现的页面可以追溯到一点，所以它可能已经过时了，而新的 STL 在这方面更快。

当前的实现是：

```
013B1030  call        _ftol2_sse (13B19A0h)

013B19A0  cmp         dword ptr [___sse2_available (13B3378h)],0  
013B19A7  je          _ftol2 (13B19D6h)  
013B19A9  push        ebp  
013B19AA  mov         ebp,esp  
013B19AC  sub         esp,8  
013B19AF  and         esp,0FFFFFFF8h  
013B19B2  fstp        qword ptr [esp]  
013B19B5  cvttsd2si   eax,mmword ptr [esp]  
013B19BA  leave  
013B19BB  ret 
```

我发现的相关问题：

> [ARM (iPhone 3GS/4) 上的快速浮点到整数转换和浮点精度](https://stackoverflow.com/questions/3483670/fast-float-to-int-conversion-and-floating-point-precision-on-arm-iphone-3gs-4)
> 
> [在x86上将float转换为int的最快方法是什么](https://stackoverflow.com/questions/78619/what-is-the-fastest-way-to-convert-float-to-int-on-x86)

由于两者都是旧的，或者是基于 ARM 的，我想知道是否有当前的方法来做到这一点。请注意，它说最好的转换是不会发生的，但我需要它，所以这是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T13:27:06.417

如果您的目标是通用 x86 硬件，那将很难被击败。运行时不确定目标机器是否有 SSE 单元。如果是这样，它可以做 x64 编译器所做的事情并内联`cvttss2si`操作码。但是由于运行时必须检查 SSE 单元是否可用，因此您只剩下当前的实现。这就是实施的`ftol2_sse`作用。更重要的是，它将值传递到 x87 寄存器中，然后如果 SSE 单元可用，则将其传输到 SSE 寄存器。

您可以告诉 x86 编译器以具有 SSE 单元的机器为目标。然后编译器确实会发出一个简单的`cvttss2si`内联操作码。这将尽可能快。但是，如果您在旧机器上运行代码，那么它将失败。也许您可以提供两个版本，一个用于带有 SSE 的机器，一个用于没有 SSE 的机器。

这不会让你获得那么多。它只是要避免在您实际到达执行工作的操作码`ftol2_sse`之前发生的所有开销。`cvttss2si`

要从 IDE 更改编译器设置，请使用 Project > Properties > Configuration Properties > C/C++ > Code Generation > Enable Enhanced Instruction Set。在命令行上是 /arch:SSE 或 /arch:SSE2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:43:03.837

因为`double`我不认为你将能够改善结果，但如果你有很多`float`s 要转换，使用打包转换可能会有所帮助，以下是`nasm`代码：

```
global _start

section .data
  align 16
  fv1:  dd 1.1, 2.5, 2.51, 3.6

section .text
  _start:

  cvtps2dq  xmm1, [fv1] ; Convert four 32-bit(single precision) floats to 32-bit(double word) integers and place the result in xmm1 
```

应该有内在函数代码可以让您以更简单的方式做同样的事情，但我不熟悉使用内在函数库。尽管您没有使用 gcc，但这篇文章[Auto-vectorization with gcc 4.7](http://locklessinc.com/articles/vectorize/)让您大开眼界，让编译器生成良好的矢量化代码有多难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:50:13.127

如果您需要速度和大量目标机器，您最好引入所有算法的快速 SSE 版本以及通用算法——并选择要在更高级别执行的算法。

这也意味着 ABI 也针对 SSE 进行了优化；并且您可以在可用时对计算进行矢量化，并且控制逻辑也针对架构进行了优化。

顺便提一句。在 Pentium 上，偶数`FLD; FIST`序列不应超过约 7 个时钟周期。

# php - 如何使 html 选择作为主要选项

> ID：15247953
> 
> 赞同：-1
> 
> 时间：2013-03-06T12:57:22.883
> 
> 标签：php, html, select, options

如何在选择 HTML 作为主查看器中进行选项。

我的意思是，如果这段代码

```
<select>
    <option>one</option>
    <option>two</option>
    <option>three</option>
    <option>four</option>
    <option>five</option>
</select> 
```

运行，当用户尚未单击该选择按钮时，它会显示一个，但是我怎样才能在不改变该排列位置的情况下将四个作为主要内容..

希望大家明白我的意思。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T12:58:36.263

尝试这个 ：

```
<select>
    <option>one</option>
    <option>two</option>
    <option>three</option>
    <option selected="selected">four</option>
    <option>five</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:59:11.447

如果您想将四个显示为选中，请尝试此操作

```
<select>
    <option>one</option>
    <option>two</option>
    <option>three</option>
    <option selected="selected">four</option>
    <option>five</option>
</select> 
```

或者

```
<select>
    <option>one</option>
    <option>two</option>
    <option>three</option>
    <option selected>four</option>
    <option>five</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:59:30.330

只需使用您要选择的选定属性，其他人保持原样。

```
<option selected="selected">four</option> 
```

# sql-server - 总结案例陈述

> ID：15247962
> 
> 赞同：0
> 
> 时间：2013-03-06T12:57:43.623
> 
> 标签：sql-server, case

我有一个代码，我使用 case when 语句来选择特定日历年的所有数据，我需要总结当年为学习而积累的所有小时数，我的代码设置如下：

```
SELECT  rg.JOB_GRP_CD,
        SUM(CASE WHEN EMP_TNG_STT_DT BETWEEN '2010-01-01' AND '2010-12-31' THEN 'ST_HOURS_SUM' ELSE 0 END) AS 2010_Hours
FROM dbo.COL_TBL_TRN_RESULTS_GEMS rg
INNER JOIN dbo.COL_V_Cost_GEMS_Detail gd
    ON rg.JOB_GRP_CD = gd.JOB_GRP_CD 
    AND rg.EMP_TNG_STT_DT = gd.REC_EFF_STT_DT
GROUP BY rg.JOB_GRP_CD 
```

我不断收到无法解析查询文本错误。这`ST_HOURS_SUM`是我需要为每个人在 2010 年汇总的内容。`ST_SUM_HOURS`是一个包含特定培训小时数的列，我需要为每个员工在设定的年份汇总它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:00:24.327

试试这个 ：

```
SELECT dbo.COL_TBL_TRN_RESULTS_GEMS.JOB_GRP_CD, SUM(CASE WHEN EMP_TNG_STT_DT BETWEEN '2010-01-01' AND '2010-12-31' THEN ST_HOURS_SUM ELSE 0 END) AS [2010_Hours]
FROM  dbo.COL_TBL_TRN_RESULTS_GEMS INNER JOIN
               dbo.COL_V_Cost_GEMS_Detail ON dbo.COL_TBL_TRN_RESULTS_GEMS.JOB_GRP_CD = dbo.COL_V_Cost_GEMS_Detail.JOB_GRP_CD AND 
               dbo.COL_TBL_TRN_RESULTS_GEMS.EMP_TNG_STT_DT = dbo.COL_V_Cost_GEMS_Detail.REC_EFF_STT_DT
GROUP BY dbo.COL_TBL_TRN_RESULTS_GEMS.JOB_GRP_CD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:01:16.303

不要`'`在`THEN 'ST_HOURS_SUM' ELSE 0 END`. 这样“ST_HOURS_SUM”是一个字符串而不是列名。删除`'`它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T13:15:08.467

如前所述，删除引号， & 你不能有一个以数字开头的列别名；逃避它：

```
...ELSE 0 END) AS [2010_Hours] 
```

# sql-server - Access 2007 SQL 查询忽略 0 值

> ID：15247965
> 
> 赞同：1
> 
> 时间：2013-03-06T12:57:52.553
> 
> 标签：sql-server, ms-access-2007

我正在尝试构建每日报告，目前我使用的代码有效，但不是我需要它做的事情。

```
SELECT Notices.Promoter, 
Sum(IIf([Notices].[Type]='GRANT PERMIT' Or [Notices].[Type]='GRANT VARIATION' Or [Notices].[Notice Type]='GRANT PAA',1,0)) AS Granted, 
Sum(IIf([Notices].[Type]='REFUSE    APPLICATION',1,0)) AS Refused, 
Sum(IIf([Notices].[Status]='Deemed',1,0)) AS Deemed, 
Sum(IIf([Notices].[Error]<>"" And Notices.[Category]<>"Observation" And Notices.[Category]<>"S.74 Overrun",1,0)) AS [Potential Penalty]
FROM Notices
WHERE (((Notices.[Day Of Week])=[TempVars]![DayReport]))
GROUP BY Notices.Promoter; 
```

tempVar [DayReport] 是星期几 mon,tue,wed.... sun，代码输出这个

```
Promoter | Granted | Refused | Deemed | Potential Penalty
Name     |   0     |    0    |    0   |   0
Name2    |   3     |    0    |    0   |   0
Name3    |   4     |    2    |    1   |   0
Name4    |   0     |    1    |    1   |   0
Name5    |   1     |    0    |    0   |   0 
```

我想要的是不显示在这样的字段中全为 0 的发起人

```
Promoter | Granted | Refused | Deemed | Potential Penalty
Name2    |   3     |    0    |    0   |   0
Name3    |   4     |    2    |    1   |   0
Name4    |   0     |    1    |    1   |   0
Name5    |   1     |    0    |    0   |   0 
```

由于我不确定如何去做，我想我会把它交给 Stackoverflow 的优秀人士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:04:30.060

 ~~~~```
SELECT  *
FROM
(
    SELECT  Notices.Promoter, 
            Sum(IIf([Notices].[Type]='GRANT PERMIT' Or [Notices].[Type]='GRANT VARIATION' Or [Notices].[Notice Type]='GRANT PAA',1,0)) AS Granted, 
            Sum(IIf([Notices].[Type]='REFUSE    APPLICATION',1,0)) AS Refused, 
            Sum(IIf([Notices].[Status]='Deemed',1,0)) AS Deemed, 
            Sum(IIf([Notices].[Error]<>"" And Notices.[Category]<>"Observation" And Notices.[Category]<>"S.74 Overrun",1,0)) AS [Potential Penalty]
    FROM    Notices
    WHERE   (((Notices.[Day Of Week])=[TempVars]![DayReport]))
    GROUP   BY Notices.Promoter
) s
WHERE   Promoter <> 0
        Refused <> 0 AND 
        Deemed <> 0 AND 
        [Potential Penalty] <> 0 
```~~  ~~**更新 1**

```
SELECT  Notices.Promoter, 
        Sum(IIf([Notices].[Type]='GRANT PERMIT' Or [Notices].[Type]='GRANT VARIATION' Or [Notices].[Notice Type]='GRANT PAA',1,0)) AS Granted, 
        Sum(IIf([Notices].[Type]='REFUSE    APPLICATION',1,0)) AS Refused, 
        Sum(IIf([Notices].[Status]='Deemed',1,0)) AS Deemed, 
        Sum(IIf([Notices].[Error]<>"" And Notices.[Category]<>"Observation" And Notices.[Category]<>"S.74 Overrun",1,0)) AS [Potential Penalty]
FROM    Notices
WHERE   (((Notices.[Day Of Week])=[TempVars]![DayReport]))
GROUP   BY Notices.Promoter
HAVING  Sum(IIf([Notices].[Type]='GRANT PERMIT' Or [Notices].[Type]='GRANT VARIATION' Or [Notices].[Notice Type]='GRANT PAA',1,0)) <> 0 AND
        Sum(IIf([Notices].[Type]='REFUSE    APPLICATION',1,0)) <> 0 AND
        Sum(IIf([Notices].[Status]='Deemed',1,0)) <> 0 AND
        Sum(IIf([Notices].[Error]<>"" And Notices.[Category]<>"Observation" And Notices.[Category]<>"S.74 Overrun",1,0)) <> 0 
```~~~~

# iphone - 如何更改线的长度并动态旋转它？

> ID：15247968
> 
> 赞同：0
> 
> 时间：2013-03-06T12:57:59.913
> 
> 标签：iphone, ios, uikit

我正在尝试画一条简单的直线。为此，我`UIImageView`用一些给定宽度的颜色填充，比如 2 像素和一些长度。现在为用户提供了两个`UISliders`，其中一个用于拉伸线条，另一个滑块用于旋转。我`myImageView.frame`用来改变高度和`CGAffineTransform`旋转。在我使用滑块更改旋转角度之前，它工作正常。但是一旦我旋转图像视图，要拉伸的滑块就不能正常工作。

我搜索并发现使用`CGAffineTranfor`.

交替边界应该可以工作，但这也不起作用。

寻求帮助。任何简短的代码都会对我有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:02:48.130

每次应用变换时都给出变换的边界。这应该有效：

```
CGRect transformedBounds = CGRectApplyAffineTransform(myView.bounds, myView.transform); 
```

# java - 用Java中的图像填充矩形

> ID：15247971
> 
> 赞同：2
> 
> 时间：2013-03-06T12:58:06.407
> 
> 标签：java

如何使用图像填充以下矩形？任何人都可以帮助我吗？

```
public void paintComponent(Graphics g) {
         setOpaque(false);  
        //Paint a filled rectangle at user's chosen point.
        if (point != null) {
            g.drawRect(0, 0,
                       rectWidth - 1, rectHeight - 1);
            g.setColor(Color.yellow);
            g.fillRect(1, 1,
                       rectWidth - 2, rectHeight - 2);
            }} 
```

我试过这段代码，但我找不到让它工作的方法：

```
File imageFile = new File("duck.jpg");
BufferedImage img;
Graphics2D graph = img.createGraphics();
graph.setColor(Color.BLACK);
graph.fill(new Rectangle(1, 2, rectWidth, rectHeight));
graph.dispose();
ImageIO.write(img, "jpg", new File("duck.jpg")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:01:49.563

您必须将图像加载到 Image 对象（如 BufferedImage）中，然后调用

`graphics.drawImage()`

在该图像上，提供坐标和其他信息。

查看[教程](http://docs.oracle.com/javase/tutorial/2d/images/drawimage.html)以获取更多信息

# python - 在 Python (Django) 中访问 Twitter API 1.1 而不是 API 1.0 时遇到问题

> ID：15247973
> 
> 赞同：0
> 
> 时间：2013-03-06T12:58:10.070
> 
> 标签：python, django, json, api, twitter

目前，访问 Twitter 的代码很简单，执行一个简单的搜索

```
def parsetwitter():
    api = twitter.Api([KEY-HERE], [KEY-HERE], [KEY-HERE], [KEY-HERE])
    statuses = api.GetSearch('#king')
    for s in statuses:
        print s.text.encode("utf8")
    return statuses 
```

现在我认为这工作正常，并且我认为这是使用 API 1.1，因为我使用 OAuth 登录，但是当 API 1.0 停电发生时，它就坏了……

所以我想我需要两个方面的帮助。

A. 如何修改当前代码以确保它使用 API 1.1？

B. 我知道以下方法保证使用 API 1.1，但我不知道如何使用此方法使用 OAuth 登录。

```
https://api.twitter.com/1.1/search/tweets.json?q=%23freebandnames&since_id=24012619984051000&max_id=250126199840518145&result_type=mixed&count=4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:04:56.423

你是这个意思吗？

```
>>> import twitter
>>> client = twitter.Api()
>>> latest_posts = client.GetUserTimeline("yourusername")
>>> print [s.text for s in latest_posts] 
```

这是使用身份验证的示例：

```
>>> client = twitter.Api(username='yourusername', password='yourpassword')
>>> update = client.PostUpdate('The Twitter API is easy') 
```

我还将为您提供 Python 库文档的链接：

[http://static.unto.net/python-twitter/0.5/doc/twitter.html](http://static.unto.net/python-twitter/0.5/doc/twitter.html)

# c++ - 通过引用调用函数（？）

> ID：15247974
> 
> 赞同：0
> 
> 时间：2013-03-06T12:58:13.297
> 
> 标签：c++, function-pointers

我有以下函数调用（myFunc() 是 double 类型）：

```
double value = F1->F2->myFunc(); 
```

我想得到一些东西，当我调用 value 时，它​​应该调用 F1->F2->myFunc();

在论坛的帮助下，我得到了帮助和理解，而不是通过变量调用函数，我应该执行以下操作：

```
typedef double(*)() m;
m variable = myFunc; 
```

并像变量（）一样调用它；

不幸的是，上面的设置并没有真正起作用，我得到了 &F2::myFunc 的引用，但是我如何在上面的设置中得到它？

就像是：

```
typedef double(*)() m;
m variable = &F2::myFunc; <- doesn't work :( 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T13:01:22.800

[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)你可以用and做到这一点[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
std::function<double()> variable = std::bind(&ClassOfF2::myFunc, F1->F2);

double value = variable(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T13:03:26.590

> 我想得到一些东西，当我调用 value 时，它​​应该调用 F1->F2->myFunc();

在 C++11 中，您可以使用 lambda：

```
auto l = [&] () { return F1->F2->myFunc(); };
double value = l(); 
```

[Scott Meyer](http://scottmeyers.blogspot.cz/2013/01/effective-c11-content-and-status.html)在他即将出版的《Effective C++ 11》一书中的更新还提到：

> 更喜欢 lambdas 到`std::bind`.

# html - 将枚举类型绑定到 HTML5 范围控件

> ID：15247977
> 
> 赞同：0
> 
> 时间：2013-03-06T12:58:24.563
> 
> 标签：html, asp.net-mvc-4

我有一个枚举模型并想将其分配给范围控件（HTML5）。知道如何做到这一点。这是我的示例代码：

```
public enum SkillLevel
    {
        Beginner = 1,
        Intermediate,     
        Advanced,
        Professional
    } 
```

我希望 SkillLevel 在我的视图中显示为滑块（type="range"）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:29:42.907

您可以通过提供所有枚举值（例如 1-4）来使这更容易开始

```
public class Enums
{
    public enum SkillLevel
    {
        Beginner = 1,
        Intermediate = 2,     
        Advanced = 3,
        Professional = 4
    }
} 
```

然后你的最小值为 1，最大值为 4。

```
<input id="skillLevel" name="skillLevel" type="range" min="@(int)Enums.SkillLevel.Beginner" max="@(int)Enums.SkillLevel.Professional" step="1" /> 
```

然后，您的控制器可以接受您的表单输入类型`SkillLevel`，模型绑定将完成其余的工作（因此表单上的值 4 将出现在您的控制器中，就像`SkillLevel.Professional`在您的控制器中一样）

```
[HttpPost]
public ActionResult Index(Enums.SkillLevel skillLevel)
{

} 
```

# wcf - 开源：用于服务的企业服务总线：WCF 和 Web API

> ID：15247980
> 
> 赞同：2
> 
> 时间：2013-03-06T12:58:34.010
> 
> 标签：wcf, asp.net-web-api, soa, esb

研究在 SOA 中实施的各种开源 ESB 技术。

以下是一些可用的 ESB 技术：-

1.  服务总线
2.  服务栈
3.  phonenix [http://pservicebus.codeplex.com/](http://pservicebus.codeplex.com/)
4.  轨道交通
5.  兔MQ
6.  Rockbus.codeplex.com

想利用开源技术。希望与资源分享实施开源 ESB 的经验。在调查中，关于开源 ESB 似乎没有/很少的资源可以开始。

# 帮助表示赞赏

* * *

1.  演练为 Microsoft 开发的技术实施开源 ESB 的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T09:44:51.953

我对 Apache NMS (.NET Messaging API) 有很好的体验。

NMS Provider 是一个 .NET 程序集，它提供 NMS API 的实现，提供与特定消息传递服务的连接或标准消息传递协议的实现

使用 WCF 实现 ESB 不是一个好主意。

**Apache ActiveMQ，甚至支持Windows通信基础。** 参考：[http ://activemq.apache.org/nms/apachenmswcf.html](http://activemq.apache.org/nms/apachenmswcf.html)

# c# - 如何将 Log4Net 包装类作为单例类？

> ID：15247988
> 
> 赞同：3
> 
> 时间：2013-03-06T12:58:47.637
> 
> 标签：c#, multithreading, singleton, log4net

我有一个 log4net 包装类...但是每次从其他类调用它以记录错误时，我都需要实例化。我需要克服这个问题。最近我遇到了我不熟悉的单例类。因此我需要帮助将我当前的包装类转换为单例类。

我在下面发布我目前正在使用的 log4net 包装器类..

```
using System;
using System.Data;
using System.Configuration;
using Asset.Business;

/// <summary>
/// Summary description for Logger
/// </summary>

namespace AssetsDataService
{
    public class ErrorLogger
    {
        private static log4net.ILog logger = null;
        public ErrorLogger()
        {
            if (logger == null)
            {

                string logConfigPath = ConfigSettings.GetEnvConfigValue("LogConfigXMLPath"); // this contains the path of the xml

                System.IO.FileInfo fileInfo = new System.IO.FileInfo(logConfigPath);
                log4net.Config.DOMConfigurator.Configure(fileInfo);

                string loggerName = ConfigurationManager.AppSettings.Get("ErrorLoggerName"); // this contains the name of the logger class

                logger = log4net.LogManager.GetLogger(loggerName);
            }

        }

        public void Fatal(Object message)
        {
            logger.Fatal(message);
        }

        public void Fatal(Object message, Exception exception)
        {
            logger.Fatal(message, exception);
        }

        public void Error(Object message)
        {
            logger.Error(message);
        }

        public void Error(Object message, Exception exception)
        {
            logger.Error(message, exception);

        }

        public void Debug(Object message)
        {

            logger.Debug(message);
        }

        public void Info(Object message)
        {
            logger.Info(message);
        }
    }
} 
```

这是我试图使我的包装类单例的代码：

```
using System;
using System.Data;
using System.Configuration;
using Asset.Business;

/// <summary>
/// Summary description for Logger
/// </summary>

namespace AssetsDataService
{
    public class ErrorLogger
    {

        private static volatile ErrorLogger instance;
        private static object syncRoot = new Object();
         private static log4net.ILog logger = null;

        private ErrorLogger()
        {
            if (logger == null)
            {

                string logConfigPath = ConfigSettings.GetEnvConfigValue("LogConfigXMLPath"); // this contains the path of the xml

                System.IO.FileInfo fileInfo = new System.IO.FileInfo(logConfigPath);
                log4net.Config.DOMConfigurator.Configure(fileInfo);

                string loggerName = ConfigurationManager.AppSettings.Get("ErrorLoggerName"); // this contains the name of the logger class

                logger = log4net.LogManager.GetLogger(loggerName);
            }

        }

        public static ErrorLogger Instance()
        {

            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                        instance = new ErrorLogger();
                }
            }

            return instance;
         }

        public void Fatal(Object message)
        {
            logger.Fatal(message);
        }

        public void Fatal(Object message, Exception exception)
        {
            logger.Fatal(message, exception);
        }

        public void Error(Object message)
        {
            logger.Error(message);
        }

        public void Error(Object message, Exception exception)
        {
            logger.Error(message, exception);

        }

        public void Debug(Object message)
        {

            logger.Debug(message);
        }

        public void Info(Object message)
        {
            logger.Info(message);
        }
    }
} 
```

这个类是一个正确的单例类，它会正确处理日志吗？

我将如何调用记录器 ErrorLogger 类来记录错误或信息等。

通过使用我的普通课程，我曾经将其称为

```
ErrorLogger log = new ErrorLogger();
log.Error(string.Concat("Exception Occurred :" + ex.Message, "/n", ex.StackTrace)); 
```

如果我使用单例类，我如何登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:52:02.263

这是单例模式的正确实现。您可以使用以下语句调用方法进行记录：

```
ErrorLogger.Instance.Fatal(Exception); 
```

请注意，此实现不是线程安全的，这意味着如果您使用多个线程使用此记录器记录不同的消息，您可能会遇到一些意外的异常。您可以通过用锁包围所有公共方法来快速而肮脏地解决此问题。

例如：

```
private object _lock = new object();

public void Error(Object message)
{
    lock(_lock){
        logger.Error(message);
    }
} 
```

还要确保在类内的每个公共方法上使用相同的锁定对象。

# linux - R 库不可写

> ID：15247989
> 
> 赞同：0
> 
> 时间：2013-03-06T12:58:53.033
> 
> 标签：linux, r, ubuntu

我想在 ubuntu 12.04 上更新 R 的核心包。但是每次 R 都说它没有写入库的权限。其他软件包不附带通过终端安装的 r-core。`sudo apt-get install r-base` 安装在我的个人库中。我给了自己每个库文件夹的所有者权限，但这不起作用。

那么我能否使这个库可写，如果可以，我该怎么做？或者有没有办法以管理员/root 身份运行 R。

我已经从互联网上尝试了很多选择，但找不到我想要的东西。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:14:04.937

是的，默认情况下 R 包安装在 下`/usr/lib`，您需要超级用户权限才能安装更多包。

因此，您可以使用 sudo 运行 R 并`install.packages()`从那里运行类似的命令：

```
sudo R 
```

`~/.Renviron`或按照本文所述编辑您[的](http://www.stat.osu.edu/computer-support/mathstatistics-packages/installing-r-libraries-locally-your-home-directory)，例如

```
$ mkdir ~/R_libs 
```

并将这一行添加到`~/.Renviron`：

```
R_LIBS="/home/your_username/R_libs" 
```

# html - 将 CSS 动画添加到具有背景图片的网站

> ID：15247996
> 
> 赞同：-2
> 
> 时间：2013-03-06T12:59:03.080
> 
> 标签：html, css

这个问题很愚蠢，但我*从未*创建过网页，所以请不要立即投反对票。并且请不要告诉我看totorials，我真的只需要做一次如下所述的事情。由于某些原因，我需要制作一个非常简单的网页，只包含一张背景图片和一个我在周围找到的 CSS3 心脏动画。**我需要将 CSS 心脏动画放置在左下角，距底部有 100 像素的边距，覆盖我用作背景的其他图像 我**需要添加到 HTML 中以实现这一目标？

我的 HTML

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Test page</title>
   </style>
   </head>
  <body/>
   <center><img src="sbg.jpg" width="1280" height="800" alt="bg" /></center>
   </body>
   </html> 
```

[还有我正在尝试使用的 CSS](http://pastebin.com/69SQjFib)

SO 的 CSS 格式很差，所以我将 CSS 代码添加到了 pastebin。

请注意，我从未使用过 CSS，需要详细解释。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:06:28.803

创建一个

```
<div id='bigwrapper></div> 
```

并使用

```
#bigwrapper{
   width:100%;
   height:100%:
} 
```

还有你内心的照片。之后，应用所需的 CSS HTML 标记需要工作，因为没有正确格式化的标签，一些事情可能无法工作。您需要正确打开和关闭标签。

```
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Test page</title>
     <style></style>
 </head>
  <body>
     <center><img src="sbg.jpg" width="1280" height="800" alt="bg" /></center>
   </body>
</html> 
```

中心标签在 HTML5 中已被弃用，您使用的过渡仅适用于 HTML5 和 CSS3。