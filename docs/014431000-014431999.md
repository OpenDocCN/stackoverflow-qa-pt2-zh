# StackOverflow 问答 14431000-14431999

# ruby-on-rails - Rails Mobiscroll 不适用于 Heroku

> ID：14431002
> 
> 赞同：0
> 
> 时间：2013-01-21T00:38:36.600
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，我刚刚安装了 gem 'mobiscroll-rails'。我让它在我的 iMac 上进行开发。但是，当我在 Heroku 上运行它时，我得到：

ActionController::RoutingError (没有路由匹配 [GET] "/apple-touch-icon-precomposed.png"): app[web.1]: cache: [GET /apple-touch-icon-precomposed.png] 错过 heroku[路由器]：at=info method=GET path=/apple-touch-icon-precomposed.png host=www.requestsys.com fwd=70.34.1.156 dyno=web.1 queue=0 wait=0ms connect=5ms service=8ms status=404 bytes=728 heroku[nginx]: 70.34.1.156 - - [20/Jan/2013:23:58:46 +0000] "GET /apple-touch-icon-precomposed.png HTTP/1.1" 404 728 " -" "MobileSafari/8536.25 CFNetwork/609 Darwin/13.0.0" www.requestsys.com app[web.1]: 在 2013-01-20 16 开始 GET "/apple-touch-icon.png" for 70.34.1.156 :58:47 -0700 ActionController::RoutingError (没有路线匹配 [GET] "/apple-touch-icon.png"): 缓存: [GET /apple-touch-icon.png] 错过 "GET /apple-touch- icon.png HTTP/1.1"404 728 "-" "MobileSafari/8536.25 CFNetwork/609 Darwin/13.0.0" www.requestsys.com at=info method=GET path=/apple-touch-icon.png host=www.requestsys.com fwd=70.34。 1.156 dyno=web.1 队列=0 等待=0ms 连接=3ms 服务=7ms 状态=404 字节=728

我的 application.html.erb 有：

```
 <!-- Le fav and touch icons -->
  <link href="images/favicon.ico" rel="shortcut icon">
  <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
  <link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"> 
```

谢谢！

更新——现在我得到了这个：

ActionView::Template::Error（“.ios td:”之后的无效 CSS：预期的伪类或伪元素，是“first-child .d...”（在 /app/app/assets/stylesheets/application.css 中）） : 17: } 18: 19: 20: <%= stylesheet_link_tag "application", :media => "all" %> app/views/layouts/application.html.erb:20:in `_app_views_layouts_application_html_erb__4520300412125467599_68152740'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:00:57.653

看起来像 mobiscroll-rails gem 中某处的一些无效 CSS。我捆绑时在本地获得它：

```
gem 'mobiscroll-rails' 
```

和 did `rake assets:precompile`，这就是 Heroku 在资产编译期间发生的事情。我从 git repo 加载了版本并且能够很好地预编译：

```
gem 'mobiscroll-rails', :git => 'https://github.com/crushlovely/mobiscroll-rails.git' 
```

编辑：或者，您可以尝试几天前刚刚推出的这个宝石：

[https://github.com/Dinuz/mobiscroll-rails.git](https://github.com/Dinuz/mobiscroll-rails.git)

# objective-c - How the correct way to change the actual view controller? On loaded view parent, presented and presentingViewController are null

> ID：14431004
> 
> 赞同：0
> 
> 时间：2013-01-21T00:38:49.080
> 
> 标签：objective-c, xcode, cocoa, ios6, parentviewcontroller

I have the following structure on my iOS iPad app:

*   RootViewController: Login
    *   @property UITabbar *main (which is loaded after login with success);

On `appDelegate` I have two properties: window and login. On the first one I load the `UIWindow` and on other `LoginViewController (UIViewController)`. And set Login as RootViewController.

On Login I have a property named "main" typed as `MainController` (extends `UITabbarController`).

After the successfull login I use the code above to load main:

```
[_main setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
[self presentViewController:_main animated:YES completion:nil]; 
```

MainController was loaded in the viewDidLoad method. I have two points:

I need to set self as delegate of MainController?

This is the begin of my MainController viewDidLoad method:

```
[super viewDidLoad];
[self setDelegate:self];
NSLog(@"Parent view controller is: %@", [self parentViewController]);
NSLog(@"Presented view controller is: %@", [self presentedViewController]);
NSLog(@"Presenting view controller is: %@", [self presentingViewController]); 
```

The log of this is:

```
2013-01-20 21:23:53.180 MyApp[6304:11303] Parent view controller is: (null)
2013-01-20 21:23:53.181 MyApp[6304:11303] Presented view controller is: (null)
2013-01-20 21:23:53.182 MyApp[6304:11303] Presenting view controller is: (null) 
```

Am I using the correct way to present a viewController? Or to show a view after I click on a button or login? What is missing? Am I using correctly the view hierarchy?

Exists the need of a property to contain the controller which will be presented?

I appreciate since now!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:27:42.530

您是否自己编写了应用程序委托和其他控制器的代码？如果是这种情况，那么因为您还没有发布其余代码，所以我只能说初始化所有视图控制器。

```
YourViewControllerNameHere = [[ViewControllerType alloc] init]; 
```

或者如果你有一个 nib/xib/storyboard 文件，那么

```
 YourViewControllerNameHere = [[ViewControllerType alloc] initWithNibName:youInterfaceFileNameHereWithoutFileType bundle:nil]; 
```

# javascript - javascript中的正则表达式问题

> ID：14431007
> 
> 赞同：1
> 
> 时间：2013-01-21T00:39:05.670
> 
> 标签：javascript, regex

```
"foo = '@test.bar';\nfooa = @test.darn;".match(/@([a-z][a-z\.-_]*)/igm) 
```

为什么这样匹配

```
["@test.bar", "@test.darn;"] 
```

而不仅仅是

```
["@test.bar", "@test.darn"] 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T00:44:58.573

在[字符类](http://www.regular-expressions.info/charclass.html)中，一些字母具有特殊含义。例如，点没有，也不需要转义。相反，减号定义了一系列字符，如果您的意思是字面意义上的减号，您需要对其进行转义或将其放在字符类的末尾/开头。您的范围从`.`到`_`实际上包括`./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`. 您可能想使用`[a-z.\-_]`or`[a-z._-]`代替。

# xaml - XAML 矩形事件 Tapped 在 Windows 8 中不会触发

> ID：14431009
> 
> 赞同：1
> 
> 时间：2013-01-21T00:39:21.240
> 
> 标签：xaml, windows-8

我在 XAML 中有一个简单的矩形

```
<Rectangle x:Name="rect" IsTapEnabled="True" Height="100" Width="100" Fill="#FF72BB5C" Stroke="#FFFB0000" Tapped="rect_Tapped"/> 
```

它画得很好，但是当我尝试点击它时，什么也没有发生。

我试过把笔画变大，然后点击它，什么也没有。

我已经尝试了许多与 Rectangle 相关的其他事件，但没有任何反应。

当我使用鼠标而不是触摸屏时，调用 Tapped 事件会不会有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T10:16:45.460

刚刚面临同样的问题。解决了它上面的每个视图的`IsHitTestVisible`属性。对于 rect 和其他人。虽然是默认值，但可以省略。`Rectangle``True``False``True`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T10:26:45.253

我刚刚为此找到了奇怪而有趣的解决方案。

如果您的布局如下所示：

```
<Grid>
    <Canvas>
        <Rectangle x:Name="rect" IsTapEnabled="True" Canvas.Top="100" Canvas.Left="100" Height="100" Width="100" Fill="#FF72BB5C" Stroke="#FFFB0000" Tapped="rect_Tapped"/>
    </Canvas>
    <TextBlock Name="Test" Text="Hi" />
</Grid> 
```

然后将其更改为：

```
<Grid>
    <Canvas>
        <Rectangle x:Name="rect" IsTapEnabled="True" Canvas.Top="100" Canvas.Left="100" Height="100" Width="100" Fill="#FF72BB5C" Stroke="#FFFB0000" Tapped="rect_Tapped"/>
    </Canvas>
    <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Name="Test" Text="Hi" />
</Grid> 
```

我刚刚添加`VerticalAlignment="Center" HorizontalAlignment="Center"`，`TextBlock`现在它可以工作了。不知道为什么，但工作。我将深入探讨这个问题。

# ember.js - emberjs new-router-V3/controller 无法使用 ember-data 创建或编辑记录

> ID：14431010
> 
> 赞同：2
> 
> 时间：2013-01-21T00:39:21.377
> 
> 标签：ember.js, ember-data, ember-router

在这个**[jsfiddle](http://jsfiddle.net/rxWzu/10/)**中，我有**EmBlog.PostsNewRoute** 和**EmBlog.PostsEditRoute**。路由包含“保存、取消和销毁”事件。

当我创建一个新记录时，它只在内存中创建它并且从不调用 store.commit() 并且在控制台中，它会抛出错误：

**未捕获的类型错误：无法调用未定义的方法“提交”**

当我尝试编辑时，它会抛出相同的错误，但编辑仍然只发生在内存中。

破坏动作也失败了。

当我打电话取消时，我得到：

**无法读取未定义的属性“defaultTransaction”**

大部分代码都在**[jsfiddle](http://jsfiddle.net/rxWzu/10/)**中。保存和取消事件遵循**[Yehuda 在这里](https://github.com/emberjs/ember.js/issues/1692)**描述的模式：

```
 App.NewUserRoute = Ember.Route.extend({
      model: function() {
         return App.User.createRecord();
      },

     events: {
         save: function(user) {
          this.get('store').commit();
         }
     }
   }); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:59:53.800

更新[小提琴](http://jsfiddle.net/mgrassotti/GLHWz/1/)！它现在适用于创建、编辑和销毁用例。有关我更改的详细信息，请参见下文...

> 当我创建一个新记录时，它只在内存中创建它并且从不调用 store.commit() 并且在控制台中，它会抛出错误： Uncaught TypeError: Cannot call method 'commit' of undefined

原始`PostNewRoute`失败，因为 this.store 未定义。也`this.content`将是未定义的。

```
save: function(post) {
  this.store.commit();
  this.content.addObserver('id', this, 'afterSave');
 }, 
```

更新的版本在帖子的事务上调用 commit。还使用 post.one 回调在创建记录后进行转换。

```
 save: function(post) {
   post.one('didCreate', this, function(){
     this.transitionTo('posts.show', post);
   });
   post.get('transaction').commit();
 }, 
```

稍后将更新其他更新的详细信息...

> 当我尝试编辑时，它会抛出相同的错误，但编辑仍然只发生在内存中。
> 
> 破坏动作也失败了。
> 
> 当我调用取消时，我得到：无法读取未定义的属性'defaultTransaction'

# jquery - 在 Ajax 加载之前验证电子邮件使用：jquery.validate.min.js

> ID：14431011
> 
> 赞同：0
> 
> 时间：2013-01-21T00:39:23.853
> 
> 标签：jquery, jquery-validate

我是 jquery 的新手。我一直在研究并且在尝试使用 query.validate.min.js 加载 ajax 之前尝试验证电子邮件地址时遇到了麻烦。

**我想验证表单，并且只有在输入有效时才调用 app.ajax.load。**无论我在 ajax 加载之前设置什么条件，表单仍然在未经验证的情况下发布，也忽略了我的回电。（这是一条“谢谢”消息）

有人可以帮我解决这个问题还是我需要编写一个单独的函数来验证？

```
$('#emailsignup_form').validate({
rules: {
email: {
required: true;
email:true
}
},
messages: {
email: "Invalid Email",
},

submitHandler: function(form){
    app.ajax.load({
         reqName : 'emailSubmit',
         url: '$httpUrl('Bronto-OptIn')$?email=' + $('#email').val(), 
         selector : '#emailbox',
         callback: function(responseText, textStatus) { }
    });
            return false;
});

});

<form id="emailsignup_form" name="emailsignup_form" method="post" action="$httpUrl('Bronto-OptIn', 'fid', 'information')$">
<div class="fl"><input class="email-signup-input" type="text" title="Enter Your Email Address" value="Enter Your Email Address" name="email" id="email" /></div>
<div class="fl"><button class="email-signup-btn" value="Submit" name="submitemail" id="submitemail">Submit</button></div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:49:06.037

当还有一个被调用时，分配一个`input` `name`of对你来说是危险的。从技术上讲，它会起作用，但正如您在下面看到的，它可能会导致很大的混乱。示例：您的内部打算分配给named还是被调用？`"email"``rule``"email"``email``messages:``input``email``rule``email`

* * *

您的`rules`和`messages`...中有一些语法错误

```
rules: {
email: { 
required: true; // <-- semicolon incorrect, must be a comma
email:true
}
},
messages: {
email: "Invalid Email", // <-- should define a message for each corresponding rule
}, 
```

应该是这样的...

```
 rules: {
        email: { // the field name
            required: true,
            email: true // the rule
        }
    },
    messages: {
        email: { // the field name
            required: "this is required",
            email: "Invalid email" // the rule's message
        }
    }, 
```

而且你`submitHandler:`的格式不正确...

```
submitHandler: function (form) {
    app.ajax.load({
        reqName: 'emailSubmit',
        url: '$httpUrl('Bronto - OptIn')$?email=' + $('#email').val(),
        selector: '#emailbox',
        callback: function (responseText, textStatus) {}
    });
    return false; 
}); // <-- this is not correct 
```

应该更像这样（假设你的ajax函数是正确的）......

```
submitHandler: function (form) {
    app.ajax.load({
        reqName: 'emailSubmit',
        url: '$httpUrl('Bronto - OptIn')$?email=' + $('#email').val(),
        selector: '#emailbox',
        callback: function (responseText, textStatus) {}
    });
    return false; 
} 
```

**演示：**

[http://jsfiddle.net/CagLw/](http://jsfiddle.net/CagLw/)

# python - 如何在 Python 中即时将 SASS 转换为 CSS？

> ID：14431012
> 
> 赞同：6
> 
> 时间：2013-01-21T00:39:26.530
> 
> 标签：python, css, sass, bottle

我来自 PHP 背景，更具体的 Symfony2。Symfony2 具有通过[Assetic 将 SASS 文件自动转换为 CSS](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)的功能。

现在我正在使用bottle 框架处理我的第一个python 项目，我想知道是否存在类似的方法来动态生成CSS 文件。

在 python 世界中是否有与 Assetic 过滤器等效的东西？

`compass`不能在后台手动运行。我想使用`SASS`，但整个过程对我的工作流程来说应该是*非常*腼腆的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:45:47.353

换个角度想，我想我可以让我的 python 脚本运行`sass --watch source.sass:target.css`，所以我跟进了[如何在 python 中运行 bash 命令](https://stackoverflow.com/questions/4256107/running-bash-commands-in-python)。因此我`__init_.py`现在包括：

```
bashCommand = "sass --watch ./css/main.sass:./css/main.css"
import subprocess
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE) 
```

这导致`sass`文件被自动转换为，`css`而我不必担心整个`sass`转换方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-06T14:25:02.773

我建议您使用[Boussole](https://boussole.readthedocs.io/en/latest)。它使用[libsass-python](https://github.com/sass/libsass-python)和[watchdog](https://github.com/gorakhargosh/watchdog)来监视和自动编译任何给定的文件或目录！只需使用命令`boussole watch`并指定源和目标文件/目录。

# c++ - 实例化继承类时出现错误无法实例化抽象类

> ID：14431015
> 
> 赞同：2
> 
> 时间：2013-01-21T00:40:14.263
> 
> 标签：c++, game-loop

这是我的通用 C++ 游戏循环：

```
std::vector<std::unique_ptr<State>> states;

while(window.isOpen())
{
    //event checking and other stuff

    for(size_t i = 0; i < states.size(); i++)
    {
        states[i]->Update();

        //clear backbuffer
        states[i]->Draw(window);
        //draw backbuffer
    }
} 
```

问题是，每当我从`states`列表中删除一个状态时，程序就会崩溃。我猜这是因为一旦状态被删除，您就不能再使用该对象，因为它显然不再存在。

我很确定解决此问题的最佳方法是将`states`向量内的状态复制到一个新状态，然后对向量进行任何我想要的更改`states`，这样在循环期间不会进行任何更改。

所以这就是我想出的：

```
std::vector<std::unique_ptr<State>> states;
std::vector<State> tempStates;

while(window.isOpen())
{
    //event checking and other stuff

    for(size_t i = 0; i < states.size(); i++)
    {
        tempStates.push_back(*states[i]);
    }

    for(size_t i = 0; i < tempStates.size(); i++)
    {
        tempStates[i].Update();

        //clear backbuffer
        tempStates[i].Draw(window);
        //draw backbuffer
    }

    tempStates.clear();
} 
```

但是一旦`error C2259: 'State' : cannot instantiate abstract class`在 file 中构建应用程序时出现错误`xmemory0`。“状态”是我的其他状态继承自的抽象基类。我不明白为什么我会收到这个错误，因为我没有实例化那个抽象类，我正在实例化一个继承自它的类。`states`不是充满了`State`对象它充满了从它继承的对象，我想这会在某种程度上使它充满`State`对象，但不管我没有实例化它们。

那么为什么我会收到这个错误，我该如何解决呢？

谢谢。

*编辑*

`states`这基本上是使用上述第一种方法时删除内部元素的方式。这是在继承自的类中`State`：

```
void Update()
{
    if(/*whatever*/)
    {
        StateManager::RemoveState(std::unique_ptr<State>(this));
        //call stack comes back here but cant because this no longer exists
    }
} 
```

状态管理器.cpp

```
void StateManager::RemoveState(std::unique_ptr<State> state)
{
    states.erase(std::remove(states.begin(), states.end(), state), states.end());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:47:35.880

也许*转移*要删除的元素会很简单：

```
std::vector<unique_ptr<state>> states;

while ( /* stuff */)
{
    std::vector<unique_ptr<state>> temp;

    for (std::size_t i = 0; i != states.size(); ++i)
    {
        if ( /* move? */)
        {
            temp.push_back(std::move(states[i]));
        }
    }

    for (std::size_t i = 0; i != temp.size(); ++i)
    {
        // process temp[i]
    }
} 
```

删除的元素将是`states`每个循环体末尾的向量中的空指针，因此您可能希望修剪这些：

```
states.erase(std::remove(states.begin(), states.end(), nullptr), states.end()); 
```

（目前还没有`std::copy_if`和`std::move_if`算法，但是一旦添加到标准库中，这段代码会变得更短。）

# php - 如此具体，将艺术家的图像添加到 joomla 组件中最近歌曲的表格视图中

> ID：14431020
> 
> 赞同：2
> 
> 时间：2013-01-21T00:41:27.260
> 
> 标签：php, mysql, sql, joomla

我希望在查看最近的歌曲时可以看到艺术家（歌曲艺术家）的形象。这是我猜你在回答时可能需要的 php 文件和数据库表：（如果有人能这么快地教我如何使用查询命令在交叉使用的表中选择这样的数据，我会很高兴只有一排表格。如果没有请更改代码以便查看艺术家图片）

**这是助手的php代码**

```
<?php

// no direct access
defined('_JEXEC') or die('Restricted access');

class modMusColRecentlyAddedSongsHelper
{

function getSongs(&$params)
{
    global $mainframe;
    $_db    = & JFactory::getDBO();
    $model      = modMusColRecentlyAddedSongsHelper::getModel();

        $limit = $params->get( 'n_songs', 5 );

        if($params->get( 'artist_id' )) $where_clause[] = " s.artist_id = " . $params->get( 'artist_id' ) . " " ;

        if ($params->get( 'genre_id' )) {
            $genre_id = $params->get( 'genre_id' );
            $model->getDescendantsId($genre_id); 
            $descendants = $model->descendantsId;
            $descendants[] = $genre_id ;
            $genre_clause = ' ( s.genre_id = ' . implode(' OR s.genre_id = ',$descendants) . ' ) ';
            $where_clause[] = $genre_clause;
        }

            //$where_clause[] = ' ra.type = "song" ';
            $where_clause = (count($where_clause) ? ' WHERE '.implode(' AND ', $where_clause) : '');

            $query =    ' SELECT s.*, ar.artist_name,al.name as album_name, AVG(ra.points) as points FROM #__muscol_songs as s '.
                        ' LEFT JOIN #__muscol_albums as al ON al.id = s.album_id '.
                        ' LEFT JOIN #__muscol_artists as ar ON ar.id = s.artist_id '.
                        ' LEFT JOIN #__muscol_ratings as ra ON ra.album_id = s.id AND ra.type = "song" '.
                        $where_clause .
                        ' GROUP BY s.id ' .
                        ' ORDER BY s.added DESC '.
                        ' LIMIT '. $limit;

                        //echo $query;die;

        $_db->setQuery( $query );
        $recent_songs = $_db->loadObjectList();

        //print_r($query);die;

        return $recent_songs;

}

function getModel()
{
    if (!class_exists( 'ArtistsModelSearch' ))
    {
        // Build the path to the model based upon a supplied base path
        $path = JPATH_SITE.DS.'components'.DS.'com_muscol'.DS.'models'.DS.'search.php';
        $false = false;

        // If the model file exists include it and try to instantiate the object
        if (file_exists( $path )) {
            require_once( $path );
            if (!class_exists( 'ArtistsModelSearch' )) {
                JError::raiseWarning( 0, 'Model class ArtistsModelSearch not found in file.' );
                return $false;
            }
        } else {
            JError::raiseWarning( 0, 'Model ArtistsModelSearch not supported. File not found.' );
            return $false;
        }
    }

    $model = new ArtistsModelSearch();

    return $model;
}

} 
```

**这是 default.php 代码**

```
<?php // no direct access
defined('_JEXEC') or die('Restricted access'); ?>
<?php
if($params->get( 'Itemid' )) $itemid = "&Itemid=".$params->get( 'Itemid' );
   else $itemid = "";
   $document =& JFactory::getDocument();
   $document->addStyleSheet(JURI::base(true).'/modules/mod_muscol_recently_added_songs/tmpl/recently_added_songs.css');
?>

 <div class='recently_added_songs'>
 <table border='0' cellpadding='0' cellspacing='0' width="100%">
 <thead>
 <tr>
  <th> <?php echo JText::_( 'آهنگ' ); ?> </th>
   <? if($params->get('show_album')){ ?><th> <?php echo JText::_( 'آلبوم' ); ?> </th><? } ?>
  <? if($params->get('show_artist')){ ?><th> <?php echo JText::_( 'خواننده' ); ?> </th><? } ?>
  <? if($params->get('show_rating')){ ?><th> <?php echo JText::_( 'امتياز' ); ?> </th><? } ?>
</tr>
</thead>
<?php
 $n = 0;
  for ($j=0, $m=count( $songs ); $j < $m; $j++) {
 $song = $songs[$j];
$link= JRoute::_( 'index.php?option=com_muscol&view=song&id='. $song->id . $itemid);
$link_album= JRoute::_( 'index.php?option=com_muscol&view=album&id='. $song->album_id . $itemid);
$link_artist= JRoute::_( 'index.php?option=com_muscol&view=artist&id='. $song->artist_id . $itemid);

//$image = MusColHelper::createThumbnail($album->image, $album->name, $params->get('default_width'), $image_attr);
?>
 <tr class="tr_recent_songs <?php echo "row$n"; ?>">
  <td><a href="<?php echo $link; ?>"><?php echo $song->name; ?></a></td>
  <? if($params->get('show_album')){ ?><td><a href="<?php echo $link_album; ?>"><?php echo $song->album_name; ?></a></td><? } ?>
  <? if($params->get('show_artist')){ ?><td><a href="<?php echo $link_artist; ?>"><?php echo $song->artist_name; ?></a></td><? } ?>
  <? if($params->get('show_rating')){ ?><td><?php echo MusColHelper::show_stars($song->points,false,false,false,true);?></td><? } ?>
</tr>
<?php
$n = 1 - $n ;
}
?>
 </table>
</div> 
```

**数据库中的歌曲**表（表名是歌曲）

```
id  album_id  num  disc_num  length  name  lyrics  artist_id  composer_id  filename  extension  review  songwriters  chords  genre_id  hits  buy_link  video  position  downloaded  user_id 
```

**数据库中的艺术家**表（艺术家图片应从图片列中读取）

```
id artist_name  image  review  letter  class_name  related  keywords  added  hits  country  picture  user_id  metakeywords  metadescription  city  years_active  url  genre_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:58:51.817

您已经在帮助程序中查询了正确的表，因此 - 如果您显示的代码已经有效 - 您只需要返回额外的字段：

```
 $query =    ' SELECT s.*, ar.artist_name,al.name 
```

变成

```
 $query =    ' SELECT s.*, ar.artist_name,ar.image as artistimage, al.name 
```

然后在视图中：

```
<?php echo $song->artist_name; ?> 
```

变成

```
<?php echo  $song->artist_name;
echo sprintf('<img src="%s" class="artistpic" />',$song->artistimage);
 ?> 
```

# ruby - 如何将字符串转换为散列中的浮点数

> ID：14431023
> 
> 赞同：1
> 
> 时间：2013-01-21T00:41:45.677
> 
> 标签：ruby, hash

我们如何实现“就地”转换为散列值的浮点数？动机是不必像这样编写一堆代码

```
r['delivery_fee'] = r['delivery_fee'].to_f
r['delivery_free_over'] = r['delivery_free_over'].to_f
r['delivery_possible_over'] = r['delivery_possible_over'].to_f
r['delivery_range'] = r['delivery_range'].to_f 
```

反而

```
to_f r['delivery_fee']
to_f r['delivery_free_over']
# ... 
```

我这样做了，但它没有按预期的方式工作。

```
def to_f(s)
  s = s.to_f
end

data = "1"
p data # => "1"
to_f data
p data # => Still "1" and not float 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T01:53:35.883

这很简单：

```
h = { one: '1', two: '2' }

Hash[h.keys.zip(h.values.map(&:to_f))]
# => { :one => 1.0, :two => 2.0 }

# or

Hash[h.map {|k, v| [k, v.to_f] }]
# => { :one => 1.0, :two => 2.0 } 
```

使用这两者中的哪一个是一个偏好问题，真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T00:56:10.273

你不能做你想做的，因为你不能改变变量引用的对象。您只能操纵对象。您不能将`String`对象更改为`Float`; 您只能生成从字符串派生的新浮点数。

但是您可以减少代码的重复性：

```
%w{delivery_fee delivery_free_over delivery_possible_over delivery_range}.each do |k|
  r[k] = r[k].to_f
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T00:56:19.357

正如 dbenhur 所说，您需要更改哈希，而不是 a 的结果字符串`hash[key]`。

```
h = {:key => 'value'}
def to_f(h, key)
  h[key] = h[key].to_f
end
to_f(h, :key)
# => 0.0
h
# => {:key=>0.0} 
```

# android - 如何在手机中查询收件箱消息？模拟器里可以

> ID：14431025
> 
> 赞同：1
> 
> 时间：2013-01-21T00:42:06.567
> 
> 标签：android

我基于 查询收件箱消息`content://sms/inbox`。我在emulator2.3中使用Debug进行测试，可以获取数据成功。但我在移动系统 4.0 中测试。获取光标为空。这是我使用的以下代码：

```
Uri inboxUri = Uri.parse(Utils.SMS_URI); 
        //        Uri inboxUri = Uri.parse(Utils.INBOX_URI); 
        ContentResolver resolver = mContext.getContentResolver(); 

        Cursor cursor = resolver.query(inboxUri, new String[] { "_id",
                 "address", "thread_id", "date", "protocol", "type", "body",
                 "read" },       
                  " address=?",              
                  new String[] { safeNum },
                  "date desc");        
                  if (cursor != null) {
            while (cursor.moveToNext()) {
                String smsBody = cursor
                        .getString(cursor.getColumnIndex("body"));
                String id = cursor.getString(cursor.getColumnIndex("_id"));
                          password = sp.getString("password", "");
                Log.i(Utils.TAG, "password==============="+password);
                         if (smsBody.contains("+" + password)) {
                    resolver.delete(Uri.parse(Utils.SMS_URI), "_id=?", new String[]{id});
                    Message msg = new Message();
                         if (("dingwei+" + password).equals(smsBody)) {Send text messages to a safe location number
                        Log.i(Utils.TAG, "Receive positioning command，Send text messages to a safe 

    location number");
      msg.what = Utils.SEND_LOCATION_SMS;

                        }
                            else if (("shanchu*" + password).equals(smsBody)) {
                            Log.i(Utils.TAG, "receive the delete command, and delete the  phone directory");
                            msg.what = Utils.SEND_DELETE_SMS;
                        }
                            mHandler.sendMessage(msg);
                    }  
                    break;
                } 
```

我已经扎根于手机。模拟器中的应用程序没有root。我还添加了权限：

```
 <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

谁能给我解释一下？非常感谢你！

# javascript - 在 Android WebView 中隐藏 HTML 元素？

> ID：14431026
> 
> 赞同：5
> 
> 时间：2013-01-21T00:42:07.570
> 
> 标签：javascript, android, html, webview

我看到了相关主题，但我无法让它发挥作用。

我需要从我正在使用的 Web 视图中删除搜索栏和导航下拉菜单。

我的代码如下。

```
webView.getSettings().setJavaScriptEnabled(true);  
webView.setWebViewClient(new WebViewClient() { 
    public void onPageFinished(WebView view, String url)  
    {  
        webView.loadUrl("javascript:(function() { " +  
            "document.getElementsById('omc-main-navigation')[0].style.display = 'none'; " +  
            "})()");  
    }  
});  

webView.loadUrl(links.get(arg2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:08:12.170

没有类似的方法`document.getElementsById()`。

利用

```
document.getElementById() 
```

而不是

```
document.getElementsById() // "s" is extra here. 
```

它应该工作。

# css - @font-face 在一个文件中工作，而不是在另一个文件中

> ID：14431027
> 
> 赞同：0
> 
> 时间：2013-01-21T00:42:13.353
> 
> 标签：css, font-face

我在我的网站上使用样式表中的@font-face 进行了自定义字体设置。它在我的主页上工作得很好，但是如果我尝试通过不同目录中的另一个 html 文件读取相同的样式表，除了字体之外，所有样式都可以正常工作。

样式表 (style.css) 和字体位于 /style/ 目录中。html 文件位于子目录中，我正在使用以下方式读取样式表：

```
<link href = "../style.css" type = "text/css" rel = "stylesheet"/> 
```

同样，它将使用*除*自定义字体之外的所有样式。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:44:51.253

您应该始终使用绝对 URL（包含完整域名和所有内容）或相对于域根目录 ( `/path/to/font.ttf`) 的 URL，以防止混淆字体是相对于样式表还是相对于文档加载的。

# visual-studio-2010 - 让 Visual Studio 2010 默认将 C++ 预处理器指令放在 .h 文件中？

> ID：14431028
> 
> 赞同：0
> 
> 时间：2013-01-21T00:42:23.380
> 
> 标签：visual-studio-2010, preprocessor

我相信这是可能的，因为我确信我已经看到 Visual Studio 创建带有`#ifdef/#ifndef`预处理器指令的 .h 文件，但由于某种原因我的安装不包括它们。我发现自己输入它们很乏味，有什么想法为什么不只包括这些指令？也不是特快版。

我过去可能在没有意识到的情况下更改了设置，这是有可能的，无论如何感谢您的帮助！

# database-design - 超类型/子类型继承（子类型鉴别器的数量是否应该等于子类型实体的数量？）

> ID：14431030
> 
> 赞同：0
> 
> 时间：2013-01-21T00:42:36.700
> 
> 标签：database-design, normalization, entity-relationship, database-normalization, entity-relationship-model

[主要编辑：感谢 Branko 关于继承的提示]

业务 ( **business_id** )

OFFICE ( **office_id** , business_id, office_name) office_id 是 PK 的序列；business_id 和 office_name 是复合唯一键（业务键）；business_id 是 BUSINESS 的强制性 FK；

CUBICAL（**cubical_ID**，office_id，cubical_#）cubical_ID是PK的序列；office_id 和cubical_# 是复合唯一键（业务键）；office_id 是 OFFICE 的强制性 FK。

实体 BUSINESS 有许多办公室；每个办公室必须属于一个企业。一个办公室有许多立方；每个 CUBICAL 必须属于一个办公室。

* * *

第四个实体 TASK ( **task_id** , task_descr)**可以分配给立方体，也可以分配给办公室内除了应用 TASK 之外对业务没有任何用途的区域，例如走廊、电气室或整个办公室.**

对于继承，我看到了两种使用超类型 TASKABLE 执行此操作的方法：要么创建两个子类型，CUBICAL 和 NON CUBICAL，并使用“cubical”或“noncubical”的子类型鉴别器；或创建一个子类型，CUBICAL，子类型区分符为“立方”、“走廊”、“电气室”、“物业宽”等。

* * *

TASKABLE ( **taskable_id** , taskable_type) 其中 taskable_type in ('cubical', 'noncubical')

立方（**cubical_ID**，office_id，cubical_#，taskable_id）

NONCUBICAL ( **noncubical_ID** , office_id, descr, taskable_id)*其中描述在 ('hallway', 'electric room', 'office wide', 'etc')*

任务（**task_id**，task_descr，taskable_id）

```
select cubical_#, task_descr from cubical, task where cubical.taskable_id = taskable.taskable_id
union
select non_cubical.descr, task_descr from noncubical, task where noncubical.taskable_id = taskable.taskable_id 
```

* * *

TASKABLE ( **taskable_id** , taskable_type) where *taskable_type in ('cubical', 'hallway', 'electric room', 'office wide', 'etc')*

CUBICAL（**cubical_ID**、office_id、cubical_#、taskable_id）其中 taskable_id

任务（**task_id**，taskable_id）

```
select cubical_#, task_descr from cubical, task where cubical.taskable_id = task.taskable_id
union
select taskable.taskable_type, task.task_descr from taskable, task_descr where taskable.taskable_id = task.task_id
    and taskable.taskable_type NOT LIKE 'cubical' 
```

* * *

因为在这种情况下，非立方区域除了分配任务之外没有其他用途，并且没有其他属性，我认为最好使用一个子类型并在 sql 语句的 where 子句上使用附加条件（NOT LIKE 'cubical ')

有 5 个以上的子类型鉴别器但只使用一个子类型实体，这很奇怪吗？

谢谢，--马修·莫伊森

# ruby - 如果包括？== 假

> ID：14431031
> 
> 赞同：3
> 
> 时间：2013-01-21T00:42:41.137
> 
> 标签：ruby

我有一个数组和一个字符串：

```
$header = ["Date", "Time", "Site Name", "Computer Name"]
columnName = "esfjk sdhf sdf" 
```

我正在检查是否`$header`包含`columnName`：

```
return if $header.include? columnName == false 
```

上面的条件总是返回`true`，并且代码继续，即使数组不包含字符串。

我也有同样的问题，当`$hash`是一个哈希并且`recordNum`是一个数字时，例如`99999999`which 不在其中，我这样做：

```
return if $hash.has_key? recordNum == false 
```

发生这种情况有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T00:45:24.723

优先权。

```
$header.include? columnName == false 
```

被解释为

```
$header.include?(columnName == false) 
```

也就是说，通常，

```
$header.include?(false) 
```

这是错误的。所以你想要做的是：

```
$header.include?(columnName) == false 
```

但在你的特殊情况下，我会这样做（谢谢，Alex Wayne）：

```
return unless $header.include?(columnName) 
```

如果你这样做，那么你可以回到无括号的形式：

```
return unless $header.include? columnName 
```

# java - 我想计算Java中两点之间的距离

> ID：14431032
> 
> 赞同：32
> 
> 时间：2013-01-21T00:42:43.753
> 
> 标签：java, math, distance

好的，所以我已经编写了大部分程序，可以让我确定两个圆圈是否重叠。

除了一个问题之外，我的程序没有任何问题：程序不会接受我为两个中心点之间的距离编写的代码。我可以找出 if/else 逻辑来告诉用户稍后会根据距离的值发生什么，但我想知道现在出了什么问题。我正在编写的程序 Eclipse 告诉我应该将距离解析为一个数组，但我已经告诉过你它是一个整数。

这是我的代码：

```
package circles;
import java.util.Scanner;

public class MathCircles {    
    // variable for the distance between the circles' centers
    public static int distance;

    // variable for the lengths of the radii combined
    public static int radii;

    public static void main(String[] args) {
        // Get the x-value of the center of circle one
        System.out.println("What is the x-coordinate for the center of circle one?");
        Scanner keyboard = new Scanner(System.in);
        int x1 = keyboard.nextInt();

        //Get the y-value of the center of circle one
        System.out.println("What is the y-coordinate for the center of circle one?");
        Scanner keyboard1 = new Scanner(System.in);
        int y1 = keyboard1.nextInt();

        //Get the radius length of circle one.
        System.out.println("How long is circle one's radius?");
        Scanner keyboard2 = new Scanner(System.in);
        int r1 = keyboard2.nextInt();

        // Get the x-value of the center of circle two.
        System.out.println("What is the x-coordinate for the center of circle two?");
        Scanner keyboard3 = new Scanner(System.in);
        int x2 = keyboard3.nextInt();

        //Get the y-value of the center of circle two.
        System.out.println("What is the y-coordinate for the center of circle two?");
        Scanner keyboard4 = new Scanner(System.in);
        int y2 = keyboard4.nextInt();

        //Get the radius length of circle two.
        System.out.println("How long is circle two's radius?");
        Scanner keyboard5 = new Scanner(System.in);
        int r2 = keyboard5.nextInt();

        /*
         * OK, so now I have the location of the two circles' centers,
         * as well as the lengths of their radii.
         * The circles are intersecting IF THE DISTANCE BETWEEN THE TWO CENTERS
         * IS EQUAL TO OR LESS THAN THE COMBINED LENGTHS OF THE RADII.
         * Now I need to get some math done.
         */

        //calculate the combined lengths of the radii

        radii = r1 + r2;

        //calculate the distance
        distance = Math.sqrt((x1-x2)(x1-x2) + (y1-y2)(y1-y2));

    }    
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2015-08-17T09:55:16.357

根据@trashgod 的评论，这是计算距离的最简单方法：

```
double distance = Math.hypot(x1-x2, y1-y2); 
```

从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#hypot%28double,%20double%29)`Math.hypot`：_

> 返回：`sqrt(x²+ y²)` 没有中间溢出或下溢。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-21T00:45:12.323

与`maths-on-paper`符号不同，大多数编程语言（包括 Java）需要一个`*`符号来进行乘法运算。因此，您的距离计算应为：

```
distance = Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2)); 
```

或者：

```
distance = Math.sqrt(Math.pow((x1-x2), 2) + Math.pow((y1-y2), 2)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-15T03:44:28.913

这可能是旧的，但这是最好的答案：

```
 float dist = (float) Math.sqrt(
            Math.pow(x1 - x2, 2) +
            Math.pow(y1 - y2, 2) ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-27T23:12:14.300

> 根据@trashgod 的评论，这是计算 >distance 的最简单方法：
> 
> `double distance = Math.hypot(x1-x2, y1-y2);` 来自 Math.hypot 的文档：
> 
> 返回：`sqrt(x²+ y²)`没有中间溢出或下溢。
> 
> ## 鲍勃

在 Bob 批准的评论下方，他说他无法解释

```
Math.hypot(x1-x2, y1-y2); 
```

做过。解释一个三角形有三个边。使用两个点，您可以根据每个点找到这些点的长度`x,y`。`Xa=0, Ya=0`如果在笛卡尔坐标中思考 是`(0,0)`然后再`Xb=5, Yb=9`一次，笛卡尔坐标是`(5,9)`。因此，如果您要将它们绘制在网格上，假设它们在同一 y 轴上，从 x 到另一个 x 的距离为`+5`. 并且假设它们在同一 x 轴上，沿 Y 轴从一个到另一个的距离是`+9`。（想想数轴）因此三角形长度的一边是 5，另一边是 9。斜边是

```
 (x^2) + (y^2) = Hypotenuse^2 
```

这是三角形剩余边的长度。因此与标准距离公式完全相同，其中

```
 Sqrt of (x1-x2)^2 + (y1-y2)^2 = distance 
```

因为如果您取消操作左侧的 sqrt 并改为使用 distance^2 ，那么您仍然必须从远处获取 sqrt。所以距离公式是勾股定理，但在某种程度上教师可以称之为不同的东西来混淆人们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-21T00:45:13.627

您需要明确告诉 Java 您希望进行乘法运算。

```
(x1-x2) * (x1-x2) + (y1-y2) * (y1-y2) 
```

与书面方程式不同，编译器不知道这是您想要做的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-08T19:48:46.240

您也可以使用 Point2D Java API 类：

`public static double distance(double x1, double y1, double x2, double y2)`

例子：

```
double distance = Point2D.distance(3.0, 4.0, 5.0, 6.0);
System.out.println("The distance between the points is " + distance); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-21T00:48:39.577

Math.sqrt 返回一个 double 所以你也必须将它转换为 int

`distance = (int)Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2));`

# c - Segfault when assigning AF_INET to the sin_family attribute of a sockaddr_in structure

> ID：14431042
> 
> 赞同：1
> 
> 时间：2013-01-21T00:44:07.260
> 
> 标签：c, sockets, network-programming

Here's my problem:

I'm trying to fill a socket address struct with the appropriate information so that I can use it in a program the handles communication between a server and a client. This is part of the server code. The problem is that it segfaults. When I run `gdb`, it says that the seg fault occurs when I assign `AF_INET` to the `sin_family` attribute for the `servaddr` struct.

code:

```
servaddr->sin_family = (short)(AF_INET); 
```

I can't seem to figure out why this occurs.

Here's the full code:

```
// Function Prototypes
struct sockaddr_in* getServerInfo(char[]);

int main()
{

    char hostname[MAXHOSTNAMELEN];
    struct sockaddr_in* servaddr = getServerInfo(hostname);

 return 0;
} // End main

struct sockaddr_in* getServerInfo(char hostname[])
{

    struct sockaddr_in* servaddr = malloc((size_t)sizeof(struct sockaddr_in));
    gethostname(hostname, 32);
    struct hostent *hostptr;
    hostptr = gethostbyname(hostname);

    memset((void *) &servaddr, 0, (size_t)sizeof(servaddr));
    servaddr->sin_family = (short)(AF_INET);
    memcpy((void *)& servaddr->sin_addr, (void *) hostptr->h_addr, hostptr->h_length);
    servaddr->sin_port = htons((u_short)8000);

    return servaddr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:08:04.307

你的错误在这里：

```
memset((void *) &servaddr, 0, (size_t)sizeof(servaddr)); 
```

改为这样做：

```
memset((void *) servaddr, 0, (size_t)sizeof(*servaddr)); 
```

否则，您将 servaddr 的指针归零（即将其变为 NULL）。当您尝试使用它时，它会爆炸。

同样，您需要更改 memcpy 调用。

# android - Android 使用哪种布局

> ID：14431048
> 
> 赞同：0
> 
> 时间：2013-01-21T00:44:23.863
> 
> 标签：android, android-layout

我在用android创建这样的东西时遇到了一些麻烦。

我在 a 中添加了图像按钮，`tableLayout`但事情变得一团糟。我应该`linearLayout`改用吗？问题是它们应该伸展以适应...

![在此处输入图像描述](../Images/eea53edb3eb9d8f53903dc33e2cdd939.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:49:55.173

假设每个钞票/硬币都是一个单独的元素，您可以在 3 个线性布局中执行此操作，它们都是父线性布局的所有子元素

伪...

```
<linearLayout
   vertical>
     <!-- first row -->
     <linearLayout 
        horizontal
        weightSum = 2>
         <image layout_width="0dp" layout_weight="1">
         <image layout_width="0dp" layout_weight="1">
     </linearLayout>  
     <!-- second row -->
     <linearLayout 
        horizontal
        weightSum = 2>
         <image layout_width="0dp" layout_weight="1">
         <image layout_width="0dp" layout_weight="1">
     </linearLayout>  

     <!-- coins -->
     <linearLayout 
        horizontal
        weightSum = 3>
         <image layout_width="0dp" layout_weight="1">
         <image layout_width="0dp" layout_weight="1">
         <image layout_width="0dp" layout_weight="1">
     </linearLayout>
</linearLayout> 
```

我省略了您必须填写的所有 android 特定的东西，只提供必需品。我相信这会让你得到你所追求的。

您需要在中间硬币上添加一些 marginLeft 和 marginRight 以将它们分开，这样它们就不会并排放置（或者只是在图像本身中添加该填充作为透明度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:51:32.093

我强烈推荐使用`LinearLayout`，使用它你可以`layout_weight`在它的子元素上使用它来使元素的宽度/高度相等。

在这种情况下，我将使用一个带有方向的线性布局：垂直，高度设置为`wrap_content`并在其内部使用三个带有方向的线性布局：水平，宽度为 match_parent 和高度为 wrap_content。

在三个 LinearLayout 中，您设置 ImageView 并指定宽度：0dp、高度：wrap_content 和 layout_weight：1。

# processing - ProcessingJS 图像处理有什么不准确的地方？

> ID：14431057
> 
> 赞同：1
> 
> 时间：2013-01-21T00:45:09.933
> 
> 标签：processing

[卷积示例](http://processing.org/learning/topics/convolution.html)的代码说：

> “此示例当前在 JavaScript 模式下不准确”

Javascript 模式有什么不准确之处？我想做一些 ProcessingJS 图像处理，但这个警告令人担忧。不准确的根源究竟是什么？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:54:48.850

Processing 2.0 与 Processing 1.5.x 有不同的 API——Processing.js 1.4.1 还没有完全实现那个 API，所以专门为 Processing 2.0 编写的示例可能还不是 100% 兼容 Processing.js

编辑：要回答实际问题，唯一错误的是处理草图假定“int offset = matrixsize / 2;” 是一个整数。JavaScript中没有整数，一切都是浮点数，所以要强制它是整数，行应该是“int offset = int(matrixsize / 2);” 和presto。完全按预期工作。

# mysql - 我重新安装 XAMPP 但无法创建同名数据库

> ID：14431063
> 
> 赞同：0
> 
> 时间：2013-01-21T00:45:27.003
> 
> 标签：mysql, xampp

1.  我已经卸载了 XAMPP
2.  我又安装了
3.  首先，我有一个名为“xyz”的数据库。在我重新安装 XAMPP 后，数据库通常会被删除，但问题就从这里开始了......
4.  当我尝试创建具有相同名称“xyz”的数据库时，我可以创建它，但是如果我尝试在“xyz”数据库中创建例如“城市”表，MySQL 会给出错误并阻止我。**因为在我卸载 XAMPP 之前我有城市表。**

如果数据库没有被删除，它在哪里？如果它被删除，为什么我不能创建城市表？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:59:48.813

在 Windows 机器上卸载 XAMPP 或任何其他虚拟 Web 服务器时，仍有一个文件夹，其中包含数据库和其他文件，如日志等。卸载后转到您安装的位置（在我的情况下为 c:wamp ）并删除所有剩余文件你不需要它们，如果你需要数据库，不要删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:55:17.613

也许你可以去 mysql 命令行，`show databases;`用来查看数据库和`show tables`表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T00:56:47.907

DB 可能无法正确删除。

请使用`Drop database dbname`，看看是否有帮助

# ios6 - UICollectionView 新手设置帮助

> ID：14431067
> 
> 赞同：0
> 
> 时间：2013-01-21T00:45:54.687
> 
> 标签：ios6, xcode4.5, uicollectionview

首先，如果答案很明显，但我对 iOS 开发是全新的（就像这是我尝试编程的第一个应用程序，即使它只是为了我玩：P），所以我的问题的可能性是相当轻微是相当高的。

**代码（包含 xcode 项目的 zip 文件）**：

[http://www.mediafire.com/?p55xw0q2dwwwwvm](http://www.mediafire.com/?p55xw0q2dwwwwvm)

我保证那里没有其他有害的东西:)。

**问题：**

我正在跟进：

[http://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial](http://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial)

我正在尝试制作一个 UICollectionView 来玩。我进入了“测试应用程序”部分。我对指南中的几个部分进行了自己的解释：

1.  而不是使用不同的图片，我只使用 1 张图片，底部有一个标签，里面只有一个数字。数字是动态设置的。是的，我可以在没有我正在使用的数组的情况下实现它，但是如果我将来扩展这个项目的范围，那么拥有那个数组将会很有帮助。

2.  我在 viewDidLoad 中添加了代码以将视图布局设置为流式布局。再次这样做是为了面向未来，因为一旦我以基本形式进行工作，我想使用格式，这将需要我对 flowlayout 进行子类化。

**代码编译没有错误，但屏幕上没有任何显示**。我已经尽我所能检查代码大约一两个小时，但我所做的没有任何改变。我的控制器类是一个简单的骨架，试图让集合视图显示在屏幕上，而我的单元类是一个骨架单元，其中只有一个图像视图和标签。

感谢您提供任何帮助以使其正常工作！

tl; dr 看看加粗的东西。为方便起见，提供以下代码：

**MyCollectionViewController.m**

```
#import "MyCollectionViewController.h"

    @interface MyCollectionViewController ()
    @property (nonatomic, strong) NSMutableArray *dataArray;
    @end

    @implementation MyCollectionViewController

    @synthesize dataArray = _dataArray;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        // Create data to display
        for(int i = 0; i < 50; i++){
            [self.dataArray addObject:[NSString stringWithFormat:@"%d", i]];
        }

        // Configure Layout
        UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
        [flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
        [self.collectionView setCollectionViewLayout:flowLayout];

    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    #pragma mark -
    #pragma mark UICollectionViewDataSource

    -(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
    {
        return 1;
    }

    -(NSInteger)collectionView:(UICollectionView*)collectionView numberOfItemsInSection:(NSInteger)section
    {
        return [self.dataArray count];
    }

    -(UICollectionViewCell*)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
    {
        MyCollectionViewCell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
        int row = [indexPath row];
        UIImage* image = [UIImage imageNamed:@"200px-AND_ANSI"];
        myCell.cellTitle = [self.dataArray objectAtIndex:row];
        myCell.cellImageView.image = image;
        myCell.backgroundColor = UIColor.whiteColor;

        return myCell;
    } 
```

**MyCollectionViewcontroller.h**

```
#import <UIKit/UIKit.h>
#import "MyCollectionViewCell.h"

@interface MyCollectionViewController : UICollectionViewController <UICollectionViewDataSource, UICollectionViewDelegate>

@end 
```

**MyCollectionViewCell.h**

```
#import <UIKit/UIKit.h>

@interface MyCollectionViewCell : UICollectionViewCell
@property (strong, nonatomic) IBOutlet UIImageView *cellImageView;
@property (strong, nonatomic) IBOutlet UILabel *cellTitle;

@end 
```

**我的CollectionViewCell.m**

```
#import "MyCollectionViewCell.h"

@implementation MyCollectionViewCell

@synthesize cellImageView = _cellimageView;
@synthesize cellTitle = _cellTitle;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:20:43.377

`self.dataArray`在您的代码中没有分配/初始化，因此等于`nil`. 允许发送消息`nil`，但没有效果，因此即使在

```
for(int i = 0; i < 50; i++){
    [self.dataArray addObject:[NSString stringWithFormat:@"%d", i]];
} 
```

`self.dataArray`还在`nil`，又`[self.dataArray count]`回来了`0`。

您必须分配和初始化数组

```
self.dataArray = [[NSMutableArray alloc] init]; 
```

一个合适的地方是`initXXX`视图控制器的一些方法。但是`initWithNibName:`如果视图控制器是从情节提要文件中实例化的，则不会调用，您必须`initWithCoder:`改用：

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        self.dataArray = [NSMutableArray array];
    }
    return self;
} 
```

# ruby-on-rails - 当我尝试使用作用域时，为什么会出现此错误？

> ID：14431070
> 
> 赞同：1
> 
> 时间：2013-01-21T00:47:04.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我得到这个错误。

> # 的未定义方法“最近”

我的代码是

**用户控制器**

```
@users = User.find_by_username(params[:id]).all_following.recent 
```

**用户模型**

```
scope :recent, lambda { |n = 10| order("last_active_at DESC").limit(n) } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:37:22.153

如果使用 lambda ，是否应该争论？如果您确切知道限制是什么，则不需要使用 lambda

尝试在 13.2 [http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes上查看本指南](http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T01:40:01.250

来自 gem 文档`all_following`的是一个数组。该阵列甚至可能是非同质的。

`recent`作用域实际上是一种可以在`ActiveRecord`.

恐怕这两者不匹配，这就是为什么错误说你不能`recent`调用`Array`.

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:52:28.847

我认为使用范围是不可能的，因为 all_following 方法将返回一个数组，因此它甚至不会在 User 模型中查找范围。您不应该使用范围的另一个原因是范围用于以您想要重用的特定方式从数据库中获取项目，而不是对事物进行排序。为了获得您想要的功能，我将向 Array 类添加一个方法，如下所示：

```
class Array
  def recent(limit = 10)
    self.sort_by { |users| users[:last_active_at] }[0..(limit-1)]
  end
end 
```

然后你可以调用`@users = User.find_by_username(params[:id]).all_following.recent(3)`你的控制器，并传入你想要的任何值作为限制值。如果您不使用限制值，例如 with `@users = User.find_by_username(params[:id]).all_following.recent`，那么它将使用 10 作为默认值。

# scheme - 使用大爆炸来成长图像

> ID：14431074
> 
> 赞同：0
> 
> 时间：2013-01-21T00:47:46.227
> 
> 标签：scheme, racket

尝试使用 big-bang 制作一个程序来增加图像/文本“你好吗”。我想让文本大小从 1 开始并停止增长，直到达到 80 大小。

这是我到目前为止所拥有的：

```
(require 2htdp/image)
  (require 2htdp/universe)

    (define word "How Are You" )

    (define (draw-world world)
      (place-image (text world 1 "olive")
                   100 100
                   (empty-scene 200 200)))

    (big-bang word

         (on-draw draw-world)) 
```

我有文字，但在达到 80 大小之前它不会增长。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:26:49.623

世界节目需要订阅他们将观看的刺激。你的程序根本没有记录任何刺激，所以世界上没有任何变化。

查看[即时消息](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._%28%28lib._2htdp/universe..rkt%29._on-tick%29%29)。例如，请查看[绘图程序](http://picturingprograms.com)，[第 6 章](http://picturingprograms.com/download/chap06.pdf)。它讨论了如何制作动画。搜索`on-tick`那里的使用，你应该看到它。

# java - Java WS：如何将直接 XML 作为 SOAP 请求的一部分发送

> ID：14431075
> 
> 赞同：1
> 
> 时间：2013-01-21T00:47:46.820
> 
> 标签：java, jakarta-ee, xml-serialization, jax-ws

1.  我有 SOAP Web 服务的 WSDL

2.  我在 RAD Developer（与 IBM Websphere 一起使用的基于 Eclipse 的编译器）中创建了一个“自上而下的 Java Bean”Web 服务客户端，并自动生成了一堆 JAX-WS .java 模块

3.  以下是其中一项操作的自动生成的 JAX-WS 代码：

* * *

```
@WebMethod(operationName = "CommitTransaction", action = "http://myuri.com/wsdl/gitsearchservice/CommitTransaction")

@RequestWrapper(localName = "CommitTransaction", targetNamespace = "http://myuri.com/wsdl/gitsearchservice", className = "com.myuri.shwsclients.CommitTransaction")
@ResponseWrapper(localName = "CommitTransactionResponse", targetNamespace = "http://myuri.com/wsdl/gitsearchservice", className = "com.myuri.shwsclients.CommitTransactionResponse")
public void commitTransaction(
    @WebParam(name = "requestOptions", targetNamespace = "http://myuri.com/wsdl/gitsearchservice")
    RequestOptions requestOptions,
    @WebParam(name = "transactionData", targetNamespace = "http://myuri.com/wsdl/gitsearchservice")
    TransactionData transactionData); 
```

问题：

*   “transactionData”来自一个大型的、复杂的 XML 数据记录。WSDL 格式与我将在 Java 端编写的 XML 完全匹配，并且与 Web 服务将在服务器端读取的完全匹配。

*   问：如何绕过“transactionData”参数的 Java 序列化，在我的 SOAP 消息中发送原始 XML？不必读取我的 XML、解析它并逐字段打包 Java“TransactionType”结构？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:58:48.347

我看到两种方法：

1.  复杂，并且一旦重新生成任何生成的代码就会崩溃...深入研究在您生成的服务代理类中创建的服务、调度和绑定提供程序实现——您可以通过替换您的自己的 BindingProvider 实现，但您必须进行其他替换才能到达那里。

2.  通过 XML 序列化，但没有“逐个字段打包”的麻烦

从您说“完全匹配”预期格式的原始 XML 字符串开始

```
String rawXML = someMethodThatReturnsXml();
JAXBContext context = JAXBContext.newInstance(TransactionData.class);
Unmarshaller unmarshaller =  context.createUnmarshaller();
Object obj = unmarshaller.unmarshal(new StringReader(rawXML));
TransactionData data = (TransactionData) obj; 
```

如果 jaxb 生成的类“TransactionData”类未注释为“XmlRootElement”，那么您仍然应该能够像这样完成此操作：

```
String rawXML = someMethodThatReturnsXml();
JAXBContext context = JAXBContext.newInstance(TransactionData.class);
Unmarshaller unmarshaller =  context.createUnmarshaller();

DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
DocumentBuilder db = dbf.newDocumentBuilder();
InputSource input = new InputSource(new StringReader(rawXML));
Document doc = db.parse(input);
JAXBElement<?> element = unmarshaller.unmarshal(doc, TransactionData.class);
Object obj = element.getValue();

TransactionData data = (TransactionData) obj; 
```

如果您处理大量各种类型的 XML 记录，您可以将它们放在一起，并将所需的输出类作为参数并具有通用的 xml-to-object 实用程序：

```
import java.io.IOException;
import java.io.StringReader;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
/**
 * @author <a href="http://stackoverflow.com/users/1904450/zachofalltrades">Zach Shelton</a>
 */
public class SampleCode {
    /**
     * Turn xml into an object. 
     *
     * @param <SomeJaxbType>
     * @param wellFormedXml a String of well-formed XML, with proper reference to the correct namespace
     * @param jaxbClass the class representing the type of object you want to get back (probably a class generated from xsd or wsdl) 
     * @return an object of the requested type
     * @throws JAXBException if there is a problem setting up the Unmarshaller, or performing the unmarshal operation
     * @throws SAXException if the given class is not annotated as XmlRootElement, and the xml String can not be parsed to a generic DOM Document
     */
    public <SomeJaxbType> SomeJaxbType xmlToObject(String wellFormedXml, Class<SomeJaxbType> jaxbClass) throws JAXBException, SAXException {
        if (jaxbClass==null) throw new IllegalArgumentException("received null jaxbClass");
        if (wellFormedXml==null || wellFormedXml.trim().isEmpty()) throw new IllegalArgumentException("received null or empty xml");
        if (!jaxbClass.isAnnotationPresent(XmlType.class)) throw new IllegalArgumentException(jaxbClass.getName() + " is not annotated as a JAXB class");

        JAXBContext context = JAXBContext.newInstance(jaxbClass);
        Unmarshaller unmarshaller =  context.createUnmarshaller();

        Object genericObject;
        if (jaxbClass.isAnnotationPresent(XmlRootElement.class)) {
            genericObject = unmarshaller.unmarshal(new StringReader(wellFormedXml));
        } else {//must use alternate method described in API
                //http://docs.oracle.com/javaee/6/api/javax/xml/bind/Unmarshaller.html#unmarshalByDeclaredType
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder db;
            try {
                db = dbf.newDocumentBuilder();
            } catch (ParserConfigurationException e) {
                throw new IllegalStateException("failed to get DocumentBuilder from factory");
            }
            InputSource input = new InputSource(new StringReader(wellFormedXml));
            Document doc;
            try {
                doc = db.parse(input);
            } catch (IOException e) {
                throw new IllegalStateException("xml string vanished");
            }
            JAXBElement<?> element = unmarshaller.unmarshal(doc, jaxbClass);
            genericObject = element.getValue();
        }

        SomeJaxbType typedObject = (SomeJaxbType) genericObject;
        return typedObject;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:33:24.923

我不太熟悉`RequestWrapper`and`ResponseWrapper`注释的用法，但是您的出站消息最终看起来像：

```
<CommitTransaction>
    <requestOptions>...</requestOptions>
    <transactionData>...</transactionData>
</CommitTransaction> 
```

让我们假设它确实如此:) 我们还将假设`TransactionData`参数的 XML 由一个`Source`实例表示。创建一个`SOAPHandler`维护该句柄的自定义`Source`：

```
public class TransactionDataHandler implements SOAPHandler<SOAPMessageContext> {
    private final Source transactionDataSource;

    public TransactionDataHandler(Source transactionDataSource) {
        this.transactionDataSource = transactionDataSource;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        // no exception handling
        Boolean isOutbound = (Boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (Boolean.TRUE.equals(isOutbound)) {
            SOAPMessage message = context.getMessage();
            SOAPBody body = message.getSOAPBody();
            Node commitTransactionNode = body.getFirstChild();
            Result commitTransactionResult = new DOMResult(commitTransactionNode);
            TransformerFactory.newInstance().newTransformer().transform(this.transactionDataSource, commitTransactionResult);
        }
        return true;
    }

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        return true;
    }

    @Override
    public void close(MessageContext context) {
        // no-op
    }
} 
```

这个想法是转换步骤应该创建子`<transactionData>`节点。您还需要一个 custom `HandlerResolver`，也许是这样的：

```
public class TransactionDataHandlerResolver implements HandlerResolver {
    private final Handler transactionDataHandler;

    public TransactionDataHandlerResolver(Source transactionDataSource) {
        this.transactionDataHandler = new TransactionDataHandler(transactionDataSource);
    }

    @Override
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        return Collections.singletonList(this.transactionDataHandler);
    }
} 
```

`Service`最后，在 XML 中创建一个实例`Source`并挂钩`HandlerResolver`：

```
Source transactionDataSource;
URL wsdlDocumentLocation;
QName serviceName;
Service service = Service.create(wsdlDocumentLocation, serviceName);
service.setHandlerResolver(new TransactionDataHandlerResolver(transactionDataSource)); 
```

从这里，您可以获得一个`Dispatch`或端口代理并启动该操作。这可能不完全适合您现有的代码/环境，但希望它能给您一些思考...

编辑：如果您使用的是端口代理，请传递`null`第二个参数：

```
port.commitTransaction(requestOptions, null); 
```

# json - 在 googleVis 气泡图中隐藏标签

> ID：14431082
> 
> 赞同：7
> 
> 时间：2013-01-21T00:48:48.820
> 
> 标签：json, r, google-visualization, googlevis

我想隐藏标签。我相信这与选项`bubble.textStyle`和设置颜色有关，`none`但我无法弄清楚。

```
Bubble <- gvisBubbleChart(Fruits, idvar="Fruit", xvar="Sales", yvar="Expenses",
                          colorvar="Year", sizevar="Profit",
                          options=list(hAxis='{minValue:75, maxValue:125}',
                                       width=500, height=300))
plot(Bubble) 
```

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:30:21.107

棘手的是它是 JSON 对象中的 JSON 对象。首先你`bubble="{}`用来创建第一个 JSON 对象，然后`textStyle:{}`在里面创建下一个 JSON 对象 `bubble="{}`。

这是我的代码和屏幕截图，

```
# install.packages("googleVis", dependencies = TRUE)
require(googleVis)

Bubble <- gvisBubbleChart(Fruits, idvar="Fruit", xvar="Sales", yvar="Expenses",
                          colorvar="Year", sizevar="Profit",
                          options=list(hAxis='{minValue:75, maxValue:125}',
                                       width=500, height=300),
                                       bubble="{textStyle:{color: 'none', fontName: 
                                       <global-font-name>, fontSize: 
                                       <global-font-size>}}")
plot(Bubble) 
```

![在此处输入图像描述](../Images/1dc97d7dd9804366a900ddba5fd16856.png)

# c# - 保存派生类的集合实例的基类

> ID：14431089
> 
> 赞同：2
> 
> 时间：2013-01-21T00:50:10.290
> 
> 标签：c#, oop, generics, inheritance

我的 C# 程序中有一堆包含一个静态成员的类，它是该类所有实例的字典集合 - 如下所示：

```
class A
{
  private static Dictionary<int,A> dict = new Dictionary<int, A>();
  public static A GetInstance(int handle) { return dict[handle];}

  public A(int handle) {this._handle = handle; dict[handle] = this;}
  ~A() { dict.Remove(_handle);}
  private int _handle;

} 
```

我已经在许多类中重复了这个，并且想分解出这个公共代码，但不知道如何做到这一点。把它放到一个普通的基类中是行不通的，因为我想为每个具体类创建一个新集合。我觉得必须有一种方法可以用泛型来做到这一点，但我目前还不太清楚。

例如，这是不对的：

```
abstract class Base<T>
{
  private static Dictionary<int,T> dict = new Dictionary<int, T>();
  public static T GetInstance(int handle) { return dict[handle];}

  public A(int handle) {this._handle = handle; dict[handle] = this;}
  ~Base() { dict.Remove(_handle);}
  private int _handle;
}

class A : Base<A>
{
} 
```

由于 A 的构造函数不正确，因此无法编译。我在这里错过了一个技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:36:51.337

这是我使用[`IDisposable`接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)实现的变体：

```
class Base<T> : IDisposable
    where T : Base<T>, new()
{
    private static Dictionary<int, T> dict = new Dictionary<int, T>();
    private static T Get(int handle)
    {
        if (!dict.ContainsKey(handle))
            dict[handle] = new T(); //or throw an exception
        return dict[handle];
    }
    private static bool Remove(int handle)
    {
        return dict.Remove(handle);
    }

    public static T GetInstance(int handle)
    {
        T t = Base<T>.Get(handle);
        t._handle = handle;
        return t;
    }

    protected int _handle;

    protected Base() { }

    public void Dispose()
    {
        Base<T>.Remove(this._handle);
    }
}

class A : Base<A> { } 
```

然后使用它：

```
using (A a = Base<A>.GetInstance(1))
{

} 
```

在这里，您没有`public`任何派生自`Base<T>`. 而静态工厂`GetInstance`方法应该用于创建实例。请记住，只有在`Dispose`调用方法时才会从字典中删除实例，因此您应该使用[`using`语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)或`Dispose`手动调用。

但是，我想您仍然应该考虑 SLaks 的评论。

# apache - ProxyHTML 重写 URL

> ID：14431090
> 
> 赞同：23
> 
> 时间：2013-01-21T00:50:36.070
> 
> 标签：apache, apache2, reverse-proxy, mod-proxy-html

我已经设置了 2 个 apache 服务器。一个在端口 80 上，另一个在端口 8077 上。我想通过反向代理查看 8077 上服务器上的所有内容。目前我有：

```
ProxyPreserveHost Off
ProxyHTMLInterp On
ProxyPass /translate/ http://www.example.com:8077/
ProxyPassReverse /translate/ http://www.example.com:8077/
ProxyHTMLURLMap / /translate/ 
```

这让我可以进入网站的初始页面，但图片、css 和其他页面的链接不起作用。

例如 html 中的 css 显示为

```
/css/style.css 
```

我真正想要的地方

```
/translate/css/style.css 
```

让它从 8077 服务器获取文件。我可以用当前设置做什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T22:35:01.193

好的，这就是我最终要做的让它工作

```
ProxyPass /translate/ http://www.example.com:8077/
ProxyPassReverse /translate/ http://www.example.com:8077/

ProxyHTMLURLMap http://www.example.com:8087 /translate/

<Location /translate/>
   ProxyPassReverse /
   SetOutputFilter  proxy-html
   ProxyHTMLURLMap http://www.example.com:8077 /translate/
   ProxyHTMLURLMap / /translate/
   ProxyHTMLURLMap  /translate/ /translate/
   RequestHeader    unset  Accept-Encoding
</Location> 
```

这似乎运作良好。ProxyHTMLURLMap [http://www.example.com:8077](http://www.example.com:8077) /translate/ 行只需要翻译一些基于“引荐来源”的 url，这会导致某些页面最终尝试直接从 8077 端口服务器提供服务。

# c++ - 一旦满足条件，C ++停止做while循环

> ID：14431091
> 
> 赞同：0
> 
> 时间：2013-01-21T00:50:46.330
> 
> 标签：c++

```
do {
   cout << "Quantity  : ";
   cin >> sale->quantity;
   cout << "Unit Price: ";
   cin >> sale->unitPrice;
   cout << "Taxable   : ";
   cin >> sale->taxStatus;
} while (sale->quantity != 0); 
```

当我输入`0`for`quantity`时，它仍然要求我输入`unitPrice`and `taxStatus`，然后它终止。我怎样才能让我的循环在`quantity`输入后立即终止`0`？

编辑

```
> echo "" | a.out 
Sale Records 
=============
Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : Quantity  : Unit Price: Taxable   : > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T00:52:24.810

您是否尝试过在质量为 0 时告诉它终止？

```
cin >> sale->quantity;
if (sale->quantity == 0) break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:52:25.050

您可以通过在之后添加此检查来尽早跳出循环`cin >> sale->quantity;`

```
if (sale->quantity == 0)
    break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T00:54:06.497

输入 0 后立即终止循环的一种方法`quantity`是将其余逻辑放入`if`语句中。

另一种方法是使用 a `break`，但随后我会将循环更改为 a `for(;;)`。

`do`请注意，对于循环体末尾的循环，每次循环迭代仅检查一次循环继续条件：它不会连续检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T01:24:43.890

另一种选择是

```
cout << "Quantity  : ";
cin >> sale->quantity;
while (sale->quantity != 0)
{
   cout << "Unit Price: ";
   cin >> sale->unitPrice;
   cout << "Taxable   : ";
   cin >> sale->taxStatus;
   // next iteration for Quantity
   cout << "Quantity  : ";
   cin >> sale->quantity;
} 
```

但我不确定您是否在每次迭代中对销售结构做任何事情。如果是这样，您需要在评论之前添加该代码`// next iteration for Quantity`

# objective-c - 调整 NSCollectionView 的大小以适应内部项目？

> ID：14431097
> 
> 赞同：1
> 
> 时间：2013-01-21T00:51:26.693
> 
> 标签：objective-c, cocoa, nscollectionview, nscollectionviewitem

如何调整 NSCollectionView 的大小以适合我所有项目的大小？

我尝试过这样的事情：

```
 float height=0;
for(int i=0;i<[drives count]; i++) {
    height += [[[collectionView itemAtIndex:i] view] bounds].size.height;
}
NSLog(@"%lg", height);
[[self view] setBoundsSize:NSMakeSize(300, height)]; 
```

我得到的只是一个可怕的结果：collectionView 被扭曲了。它以前比父视图小，因此它扩展以填充父视图。

注意：我删除了集合视图的滚动条，内部​​项目是 NSBox。

Ps：这是我没有任何调整大小的东西；

![在此处输入图像描述](../Images/e62a02886ce884aaee5170057ea83704.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:31:56.567

看看这个问题：[NSCollectionView 可以自动调整其子视图的宽度以显示一列](https://stackoverflow.com/questions/2107755/can-nscollectionview-autoresize-the-width-of-its-subviews-to-display-one-column)我认为这可能有助于解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:00:39.330

好吧，我的第一种方法还不错。

我只需要使用 `[[self view] setFrame:]`而不是`[[self view] setBoundsSize:]`调整大小`NSCollectionView`

# javascript - 如何动态更改 jquery 弹出窗口的文本？

> ID：14431100
> 
> 赞同：1
> 
> 时间：2013-01-21T00:52:06.610
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试动态更改弹出窗口的文本。我认为它可能是这样的：

```
$("#mypopup").text("Loading...");
$("#mypopup").popup("open");
load();
$("#mypopup").text("Loaded!"); 
```

这意味着弹出文本将是“正在加载..”，直到函数 load() 完成。然后它将是“加载！”

在许多其他不同的方法中，我已经尝试过这个，但都没有奏效。

有人可以帮我解决这个问题吗？

先感谢您！

**编辑** 对不起大家，我忘了提到我正在使用 jQuery Mobile。

这里有更多信息[http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:05:56.130

**更改内容的方法**之一**`popup`**

 **鉴于您有这样的标记：

```
<div data-role="page" id="page1">
    <div data-role="content">
        <a id="btn2" href="#popup" data-role="button" data-transition="flip" data-rel="popup">Open a popup</a>
        <div data-role="popup" id="popup" data-overlay-theme="a">
            <h1>It's a popup</h1>
        </div>
    </div>
</div> 
```

您可以处理`popupbeforeposition`和/或`popupafteropen`事件

```
$(document).on("pageinit", "#page1", function(){
    $("#popup").on("popupbeforeposition", function(event, ui) {
        $(this).append("<p>I've been added to popup!</p>");
    });
    $("#popup").on("popupafteropen", function(event, ui) {
        $(this).append("<p>It has been added after I'm open!</p>");
    });
}); 
```

**另一种**方法是在`click`事件中创建（或更改）弹出窗口的内容

鉴于标记

```
<a id="btn1" href="#" data-role="button" data-transition="flip">Dynamic popup</a>
<div data-role="popup" id="popup2" data-overlay-theme="e">
</div> 
```

你可以做

```
$("#btn1").click(function(){
    $("#popup2").html("<h1>Header</h1><p>This is the popup's message.</p>").popup("open");
}); 
```

**更新：** 最后你可以把它们放在一起：

```
$("#btn1").click(function(){
   $.mobile.loading('show', {theme:"e", text:"Loading the content...", textonly:true, textVisible: true});
    setTimeout(function(){
        //Do some lengthy work here
        doWork();
        //Show the popup
        $("#popup2").html("<h1>Header</h1><p>This is the popup's message.</p>").popup("open");
    }, 50);
});
$("#popup2").on("popupafteropen", function(event, ui) {
    $.mobile.loading('hide');
}); 
```

**UPDATE2**：更新[了 jsFiddle](http://jsfiddle.net/pmatseykanets/gH6xf/)以说明一些冗长的工作**

# mysql - 如何执行此查询 - GROUP_CONCAT

> ID：14431105
> 
> 赞同：0
> 
> 时间：2013-01-21T00:52:35.017
> 
> 标签：mysql, sql, select, group-concat

我想做一个`SELECT`有`table A`：

```
table_a:

╔══════════╦════════╗
║ GROUP_ID ║  NAME  ║
╠══════════╬════════╣
║        1 ║ Tom    ║
║        2 ║ Frank  ║
║        3 ║ Shilla ║
║        1 ║ Scully ║
║        1 ║ Jen    ║
╚══════════╩════════╝

table_b:

╔════╦════════════╗
║ ID ║ GROUP_NAME ║
╠════╬════════════╣
║  1 ║ Troopers   ║
║  2 ║ Clubs      ║
║  3 ║ Mavericks  ║
╚════╩════════════╝ 
```

现在，我想显示给定成员名称的组：

```
SELECT GROUP_NAME,GROUP_CONCAT(table_a.NAME) MEMBERS     
FROM table_a     
JOIN  table_b ON table_a.GROUP_ID = table_b.ID   
WHERE
table_a.NAME = 'Scully' 
```

我想得到这个：

```
╔════════════╦════════════════╗
║ GROUP_NAME ║    MEMBERS     ║
╠════════════╬════════════════╣
║ Troopers   ║ Tom,Scully,Jen ║
╚════════════╩════════════════╝ 
```

为什么这个查询不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:05:04.990

```
SELECT  b.GROUP_NAME, GROUP_CONCAT(c.Name) Members
FROM    
        (
            SELECT GROUP_ID
            FROM   table_a
            WHERE  name = 'Scully'
        ) a 
        INNER JOIN table_b b
            ON a.GROUP_ID = b.ID
        INNER JOIN table_a c
            ON a.GROUP_ID = c.GROUP_ID
GROUP   BY b.GROUP_NAME 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ac1e65/10)

为了获得更好的性能，为 . 添加一个`UNIQUE`约束`table_b.GROUP_Name`。

结果

```
╔════════════╦════════════════╗
║ GROUP_NAME ║    MEMBERS     ║
╠════════════╬════════════════╣
║ Troopers   ║ Tom,Scully,Jen ║
╚════════════╩════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:57:07.503

我认为你的 WHERE 条件太受限制了。

`WHERE table_b.GROUP_NAME = 'Troopers'`

如果你只有一个成员的名字，那么你需要使用另一个加入来获取组 ID：

试试这个：

```
SELECT table_b.GROUP_NAME, GROUP_CONCAT(table_a.NAME) MEMBERS     
FROM table_a     
JOIN  table_b ON table_a.GROUP_ID = table_b.ID   
JOIN  table_b `temp` ON table_a.GROUP_ID = temp.ID   
WHERE temp.NAME = 'Scully' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:06:32.413

```
SELECT
    `group_name`,
    GROUP_CONCAT(a.`name`) AS 'members'
FROM `table_a` a
INNER JOIN `table_b` b
ON a.`group_id` = b.`id`
AND a.`group_id` = (
    SELECT `group_id` FROM `table_a` WHERE `name`='Scully'
)
GROUP BY NULL 
```

# mysql - MySQL重新安装

> ID：14431107
> 
> 赞同：-2
> 
> 时间：2013-01-21T00:52:43.957
> 
> 标签：mysql

我安装了 MySQL，然后将其卸载，然后在我启动并运行 apache 后重新安装，问题是在安装结束时（mysql）它要求我打开端口：3306 以获取它给我的选项的安全设置如果我以前安装过 MySQL 就跳过，所以我跳过了它。
我的安装是否正确安装并且在 MySQL 的程序下`start menu > Programs`我所拥有的只是 MySQL 控制台 CMD 提示符，所有这些都应该在 Programs 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:56:57.350

Mysql 是一个基于命令行的应用程序，可以通过安装诸如

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

这使您可以选择通过 gui 界面编辑数据库模式。

您可以安装 PHPMYADMIN，它是一个 apache 扩展（对于本地主机，您通常去 /phpmyadmin/）

# php - 限制用户仅查看他们已上传的项目？

> ID：14431109
> 
> 赞同：-2
> 
> 时间：2013-01-21T00:53:00.727
> 
> 标签：php

我在如何只向用户展示他们的上传内容方面有点挣扎。我有一个登录系统，登录用户可以上传图片，但是在显示图片时，用户会看到所有用户上传的所有图片，而不仅仅是他们的。我有两个数据库，一个用于登录，一个用于上传。

我之前曾问过这个问题，但我无法让它工作（我被告知使用外键）..我也做了一个谷歌搜索，发现了[这个](https://wordpress.stackexchange.com/questions/1482/restricting-users-to-view-only-media-library-items-they-have-uploaded/4412#4412/)但无法得到它......有人有任何想法吗？如果你给我看一个例子，我会感到惊讶。谢谢。我正在使用 php 上传和显示图像

这是我在数据库中的（我切换到一个数据库）

**图片**

```
id | photo | Author| 
```

**用户**

```
id | username | Password|... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:57:49.327

Do you have two databases or two tables in one database?

If the latter, add a column into your upload table called "userid", where userid is same as the primary key of the login. When showing the images, show the only images where

SELECT * FROM images WHERE userid = login.userid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T01:02:22.713

这是可以做到的。您可以更改文件上传器以将信息插入数据库，例如文件的位置、所有权、查看/点击等...

**更新** *开始*

将您的表修改为以下内容：

*图片*

> 编号 | 所有者 ID | 照片 | 作者|

设置从 users 表（最好是 ID）到 Images 表中 OwnerID 的一对多关系...然后，在插入时，输入`$UserID`OwnerID 所在的位置；

$UserID 应该由用户名（唯一..）定义，然后在从图像中选择时，确保选择列出的所有文件：`Images.UserID = $UserID`

*结尾*

这只是一个例子。

上传时，在上传表中插入一行，标识您想要的位。

那么在观看的时候，

仅在循环中选择/列出您的项目，这些项目由上传表中的 USERID（在用户表上的 ID 中标识）或用户名列出。

围绕这个基础构建你的代码结构

# rubymine - 调整 RubyMine IDE

> ID：14431111
> 
> 赞同：3
> 
> 时间：2013-01-21T00:53:16.020
> 
> 标签：rubymine

这发生在我尝试过的每个项目中：如果我使用终端并说 bundle install 或 rake db:migrate ，它工作正常，可以看到我的网站，工作完全正常。

但是，如果我在 RubyMine 中打开项目并想要执行相同的任务，它会给我带来各种错误或错误。我只是复制粘贴其中一些作为示例。

我确信应该在某处设置一些小项目设置。但不知道什么和在哪里

注意：始终在 Rails 1.8 上设置“编辑配置”，尽管我将其更改为 Rails 1.9 ，但仍然没有区别。

我在 Mac 上运行最新版本的 RubyMine。

```
/usr/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /usr/bin/rake db:migrate
/Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/spec_set.rb:90:in `materialize': Could not find i18n-0.6.1 in any of the sources (Bundler::GemNotFound)
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/spec_set.rb:83:in `map!'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/spec_set.rb:83:in `materialize'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/definition.rb:113:in `specs'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/definition.rb:158:in `specs_for'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/definition.rb:147:in `requested_specs'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/environment.rb:23:in `requested_specs'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:11:in `setup'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler.rb:116:in `setup'
    from /Users/JonyIve/.gem/ruby/1.8/gems/bundler-1.2.3/lib/bundler/setup.rb:17 
```

**编辑：从 IDE 运行 bundler 安装后：**

```
/usr/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/JonyIve/.gem/ruby/1.8/bin/bundle install
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
sudo: no tty present and no askpass program specified

Gem::Exception: Cannot load gem at [/Library/Ruby/Gems/1.8/cache/rake-10.0.3.gem] in /Users/JonyIve/Downloads/code-1/rails32/depot_c
An error occurred while installing rake (10.0.3), and Bundler cannot continue.
Make sure that `gem install rake -v '10.0.3'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-17T09:59:12.163

我在使用 RubyMine 时遇到了同样的错误。我通过添加以下内容解决了“不存在 tty ......”错误：

```
Defaults    visiblepw 
```

到

```
/etc/sudoers 
```

文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T16:01:03.993

我问作者，这是他的回答：

[http://devnet.jetbrains.net/message/5476810#5476810](http://devnet.jetbrains.net/message/5476810#5476810)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T00:56:39.250

您是否尝试过 IDE 菜单中的 Tools->Run Bundler？除了控制台之外，您还需要在 Rubymine 中运行 Bundler 以更新 IDE 的 gems 副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-12T16:23:14.120

好的，我有同样的问题。这是因为 ruby​​mine sdk 指向的 ruby​​ 是系统 ruby​​，/usr/bin/ruby--- 别名为 Library 中的那个，而不是 ln -svf /usr/local/Cellar/ruby/2.0 中的那个.0-p247/bin/红宝石

用指向本地版本的链接替换链接解决了这个问题。

# javascript - 在 html 文件中，如何包含位于不同主机中的 javascript？

> ID：14431113
> 
> 赞同：0
> 
> 时间：2013-01-21T00:53:25.960
> 
> 标签：javascript, host

我在主机 a 中有一个名为“a.js”的 javascript 文件。a.js 中的代码如下：

```
function sayHello() {
    alert("Hello, world");
} 
```

我在主机 b 中有一个名为 html 的文件`b.html`，其中有如下代码：

```
<html>
  <head>
    <script type="text/javascript" src="http://a/js/a.js" />
    <script type="text/javascript">
      sayHello();
    </script>
  </head>
  <body>
  </body>
</html> 
```

当我在浏览器中输入 url“http://b/b.html”（我在 IE8、Chrome 中测试过）时，我的浏览器不会弹出警报窗口。我错过了什么配置吗？

我应该怎么做才能使我的 b.html 可以包含位于另一台主机中的 javascript 文件，并且可以像包含 Google 的 javascript API 文件一样执行 javascript 文件中的函数？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:56:40.667

包含来自不同域的 javascript 没有安全限制（与必须驻留在一个域中的 ajax 调用不同），因此您一定是输入错误或文件不可用。确保您可以直接在浏览器中查看 js 本身，只需直接转到 url，然后将其复制并粘贴到您的 src 标签中。它会工作（如果它正在工作的javascript！）:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T01:01:07.293

您遇到此问题是因为`<script>`标签不是自动关闭的（除非您使用 XML 内容类型提供文件）。正如 Dr.Dredel 所说，在这种情况下，它与任何类型的安全限制无关。将您的标记更改为：

```
<script type="text/javascript" src="http://a/js/a.js"></script> 
```

进一步参考：[为什么自闭合脚本标签不起作用？](https://stackoverflow.com/q/69913/825789)

# testing - 依赖年份的测试

> ID：14431114
> 
> 赞同：0
> 
> 时间：2013-01-21T00:53:27.793
> 
> 标签：testing, automated-tests, mathics

自动测试取决于当前年份的函数的正确行为的最佳实践是什么？具体来说，我想`DateList`在[Mathics](http://mathics.org/)（类似 Mathematica 的 CAS）中添加一个测试，以确保在没有给出年份作为参数时返回当前年份。

我想到了两种可能的解决方案：

1.  在测试中硬编码当前年份。所以这个测试必须每年更新一次，因为新年之后可能会出现一些失败的集成测试。
2.  创建另一个应该返回当前年份并确保它们返回相同的函数。这降低了出错的可能性，但当然，这两个函数仍然可能是错误的。

任何其他想法或对现有实践的指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:12:03.120

我使用服务器上的时间来获取当前的日期/年份并对我的单元进行单元测试，它在同一年返回（我从系统时间获得）

在针对当前服务器日期时间测试返回值时，您应该记住时区差异。

这适用于我的测试，希望对您也有帮助。

# requirejs - Typescript - 如何在运行时解析内部模块

> ID：14431115
> 
> 赞同：1
> 
> 时间：2013-01-21T00:53:39.540
> 
> 标签：requirejs, typescript, amd

从 main.ts 入口点运行的 bootstrapper.ts 看起来像这样（减去引用标题）：

```
import Dialogs = App.Widgets.Dialogs;
declare var $ : JQueryStatic;

export class Bootstrapper { 
    static SiteLoad() { 
       var dialog = new Dialogs.LoginDialog();
       ...
    }
} 
```

但是，当 main.ts 尝试加载此文件时，第一行会立即引发引用错误。那时我意识到导入内部模块不会将任何依赖项添加到`define`生成的 .js 文件的包装器中。

那么如何在运行时解析内部模块呢？是不是 AMD 只与外部模块兼容，而我必须在 main.ts 的入口点加载内部模块以及外部库？

我更喜欢内部模块的别名语法而不是外部模块。我上面的代码看起来比使用外部模块语法时要干净得多：

```
import Dialogs = module("Modules/App.Widgets.Dialogs");
declare var $ : JQueryStatic;

export class Bootstrapper { 
    static SiteLoad() { 
       var dialog = Dialogs.App.Widgets.Dialogs.LoginDialog(); //Seriously?
       ...
    }
} 
```

那只是丑陋。该怎么办？

**更新：**

史蒂夫，你建议的方法有局限性。在我使用内部模块的原始方法中，我可以执行以下操作：

```
import Dialogs = App.Widgets.Dialogs;

declare var $ : JQueryStatic;

export class Bootstrapper { 
    static SiteLoad() { 

        var loginDialog1 = new Dialogs.LoginDialog();  //Instantiation      -OK
        var loginDialog2: Dialogs.LoginDialog;         //Type-Declaration   -OK
    }
} 
```

在您建议的方法中，我失去了使用别名进行类型声明的能力：

```
import DialogsModule =  module("Modules/App.Widgets.Dialogs");

var Dialogs : DialogsModule.App.Widgets.Dialogs;

declare var $ : JQueryStatic;

export class Bootstrapper { 
    static SiteLoad() { 

        var loginDialog1 = new Dialogs.LoginDialog();   //Instantiation  -OK        
        var loginDialog2: Dialogs.LoginDialog;  //Type-Declaration -ERROR: The name "Dialogs" does not exist in the current context  
        var loginDialog3: DialogsModule.App.Widgets.Dialogs.LoginDialog;  //Must use full name instead
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:30:46.267

您可以像这样为长模块路径起别名：

```
import DialogModule = module("Modules/App.Widgets.Dialogs");
var dialogs = DialogModule.App.Widgets.Dialogs;
declare var $ : JQueryStatic;

export class Bootstrapper { 
    static SiteLoad() { 
       var dialog = dialogs.LoginDialog();
       ...
    }
} 
```

您可以通过自己包含适当的文件来将 AMD 与纯 JavaScript 混合使用——但我建议您选择一种模式在您的程序中使用，以使事情更易于理解。

# python - 如何修复这个迭代的python代码并减少重复？

> ID：14431118
> 
> 赞同：2
> 
> 时间：2013-01-21T00:53:54.407
> 
> 标签：python

这段代码应该生成一个代表问题的随机数。数字生成器生成从 1 到 10 的数字。但如果该数字不在数字列表中，`"numlist"`它应该生成另一个数字。这应该是为了使程序不会两次问同一个问题。using`numlist.remove()`不适用于此目的。什么会起作用？或者，有什么更好的方法。

另外，我想知道如何制作它，以减少代码中的重复（循环？）。

```
def roll():
    var = random.randint(1,10)
    if var not in numlist:
        roll()

    elif var == 1:
        numlist.remove(1)
        q1()
    elif var == 2:
        numlist.remove(2)
        q2()
    elif var == 3:
        numlist.remove(3)
        q3()
    elif var == 4:
        numlist.remove(4)
        q4()
    elif var == 5:
        numlist.remove(5)
        q5()
    elif var ==6:
        numlist.remove(6)
        q6()
    elif var == 7:
        numlist.remove(7)
        q7()
    elif var == 8:
        numlist.remove(8)
        q8()
    elif var == 9:
        numlist.remove(9)
        q9()
    elif var == 10:
        numlist.remove(10)
        q10() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:05:56.093

您似乎仅将这些数字用于调度。无需先通过数字就可以实现相同的结果（以随机顺序调用 10 个函数中的每一个），如下所示：

```
import random

def roll():
    qs = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
    random.shuffle(qs)
    for q in qs:
        yield q

# ...

for rolled in roll():
    rolled() 
```

通过不`q#()`直接调用函数而是生成它们，只要调用者方便，就可以调用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:57:40.003

关于什么：

```
def roll():
    var = random.randint(1,10)
    if var not in numlist:
        roll()
    else:
        numlist.remove(var)
        call_me = getattr(module, 'q%s'% var) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T00:59:07.140

我不确定你是否可以，但不是有 10 个函数 q1()..q10 我会创建一个以这种方式接受参数的函数：

```
def roll():
    var = random.randint(1,10)
    if var not in numlist:
        roll()
    else:
        numlist.remove(var)
        q(var) 
```

您还应该检查是否`numlist`为空（以防万一）。

此外，随机 int 不太可能是列表中导致堆栈溢出的那个，尽管 10 个 int 不太可能发生，但如果你想确保这不会发生，你应该：

列出选择：

```
choices = range(1,11) 
```

您应该使用[选择](http://docs.python.org/2/library/random.html#random.choice)从该列表中进行选择：

```
var = random.choice(choices) 
```

然后删除该选择：

```
choices.remove(var) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T01:59:52.687

每个问题保留一个功能不是一个好策略。如果您想稍微改变问题、提示和答案的给出方式怎么办？你要改变几十个甚至几百个函数？

更好的方法是面向对象的方法——例如，每个问题都是`Question`类的一个对象。例如：

```
class Question:
    def __init__(self, question, hints, answer):
        self.question = question
        self.hints = hints
        self.answer = answer

    def ask_question(self):
        print "Here is your question:"
        print self.question

    def give_hint(self):
        if len(self.hints) == 0:
            print "That's all the hints I have!"
        else:
            print self.hints.pop(0)

     def guess(self, guess):
        if guess == self.answer:
            print "You guessed correctly!"
        else:
            print "No, try again!" 
```

您最初封装在问题函数中的任何行为（限制猜测次数、限制时间、以某种格式显示等等）都将由`Question`该类的方法处理。同时，特定于一个问题的所有信息都将保存在特定于该问题的数据成员中（在这种情况下`question`，`hints`和`answers`，尽管可能有其他变量）。

你会创建一个这样的问题：

```
q1 = Question("How many roads must a man walk down?", ["Think Douglas Adams.", "It's more than 40 and less than 50"], "42") 
```

或者更好的是，从制表符分隔的文件创建它们，其中文件类似于：

```
How many roads must a man walk down?    Think Douglas Adams./It's more than 40 and less than 50    42 
```

它们的创建方式如下：

```
questions = []
with open("questions.txt") as inf:
    for l in inf:
        question, hints, answer = l[:-1].split("\t")
        questions.append(Question(question, hints.split("/"), answer)) 
```

然后你的 main 函数将调用 的方法`Question`，这些方法封装了它的提问行为。这将使您不必重复代码（所有代码仅存在于一个地方：`Question`对象的方法），并将您的所有问题以灵活的格式保存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T01:05:08.737

您可以将所有功能放在一个列表中，将列表打乱，然后弹出结果问题功能：

```
>>> import random
>>>
>>> l = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
>>> random.shuffle(l)
>>> qfunc = l.pop() 
```

# ios - Xcode 分发到应用商店后…….app 和 .dSYM 在哪里？

> ID：14431122
> 
> 赞同：0
> 
> 时间：2013-01-21T00:54:34.540
> 
> 标签：ios, xcode, xcode4, app-store, app-store-connect

我刚刚将二进制文件上传到应用商店，使用 Xcode 的 Product -> Archive，然后分发（当窗口弹出时）。

在过去，Products 文件夹中有一个项目的 .app 文件和一个 .dSYM 文件，我可以右键单击它们，然后“在 Finder 中显示”，然后复制我在那里找到的内容备份（以及项目的 zip），或者以防万一我需要符号化任何应用程序崩溃报告。

现在，唯一的 .app 文件来自更早的时间，而不是构建被推送到应用商店的时间，并且没有 .dSYM 文件。

我还需要它们吗？他们现在在别处吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:52:05.263

使用 Xcode 4.0 及更高版本，当您构建和归档时，您的目标产品及其 dSYM 文件将全部归档。档案可用于符号化崩溃日志。

选择存档，然后[显示包内容]，您可以看到 dSYM 和应用程序在那里。

# php - 找到第一个空输入框

> ID：14431128
> 
> 赞同：0
> 
> 时间：2013-01-21T00:56:17.800
> 
> 标签：php, html

我有很多输入字段，我需要确定第一个空输入字段。目前我正在单独检查每一个，如果它不是空的，则转到下一个。但我想知道是否有人知道这样做的更有效方法：

```
if(empty($a)){$a=$name;}else
if(empty($b)){$b=$name;}else
if(empty($c)){$c=$name;}else 

............if(empty($z)){$z=$name;}else

{$message="all boxes are filled"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:59:55.583

好吧，假设您正在使用`POST`或`GET`在表单上，​​您可以像这样遍历每个表单元素：

```
foreach ($_GET as $key => $value) { } 
```

# razor - 为什么 Umbraco 在我登录后运行 App_Data\Temp\Razor\inline-xxxx.cshtml 注销控件？

> ID：14431136
> 
> 赞同：0
> 
> 时间：2013-01-21T00:57:13.093
> 
> 标签：razor, forms-authentication, umbraco, appdata

我的 Umbraco 网站有 2 种会员类型。我制作了一个自定义登录表单，用于检查凭据并验证成员身份。这是我的 Umbraco 剃须刀控制代码：

```
@using umbraco.MacroEngines;

@{
    if (Request.HttpMethod.ToLower() == "post")
    {
        if (!string.IsNullOrEmpty("username") && !string.IsNullOrEmpty("password"))
        {
            string username = Request["username"];
            string password = Request["password"];
            var isValid = Membership.ValidateUser(username, password);
            if (isValid)
            {
                FormsAuthentication.SetAuthCookie(username, true);

                //FormsAuthentication.RedirectFromLoginPage(username, true);
                Response.Redirect(new DynamicNode(2431).Url, true);
            }

        }
    }
} 
```

对于其中一种成员类型，身份验证工作得很好。对于其他，在成员通过身份验证后，Umbraco 运行脚本 \App_Data\TEMP\Razor\inline-6ff314cb99b9da6a178f3b2d31bc709e.cshtml。该脚本具有以下代码：

```
@{
        FormsAuthentication.SignOut();

        // Drop all the information held in the session
        Session.Clear();
        Session.Abandon();

        // clear authentication cookie
        HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
        cookie1.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie1);

        // clear session cookie
        HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
        cookie2.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie2);

        // Redirect the user to the login page
        Response.Redirect("login.aspx", true);
  } 
```

当然，在触发此脚本后，我的成员已注销。为什么会触发此脚本，我该如何停止它？

我当前的 Umbraco 版本是 4.11.3。我认为重要的是要提到它曾经是 4.7.0 并且我升级了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:05:28.350

问题不在于 Umbraco 或成员资格。它与我的自定义成员对象有关。

# javascript - 如何根据第一个选择禁用（或更改颜色）第二个下拉选项？

> ID：14431139
> 
> 赞同：0
> 
> 时间：2013-01-21T00:57:31.723
> 
> 标签：javascript, jquery

我的问题是“如何根据第一个选择在第二个下拉列表中更改选项颜色（或禁用）？” 使用 javascript/jquery。

例如：如果在我的第一个下拉列表中选择“13 个楼梯”，则 14 和 15 个楼梯在第二个下拉列表中应该具有“红色” ***（或禁用）***颜色。

类似“如果选项==13 楼梯* -> 14* / 15* == 禁用”或“如​​果选择值“a”-> 值“先生”= 红色。

也许这很容易，但我完全是 Javascript 的小菜一碟。:( 希望有人能帮助我。

```
<form id="test" name="test" method="post" action="">
    <label for="demo"></label>
    <select name="first-election" id="first-election">
      <option value="a">13 Stairs - 001</option>
      <option value="b">13 Stairs - 002</option>
      <option value="c">13 Stairs - 003</option>
      <option value="d">14 Stairs - 001</option>
      <option value="e">14 Stairs - 002</option>
      <option value="f">14 Stairs - 003</option>
      <option value="g">15 Stairs - 001</option>
      <option value="h">15 Stairs - 002</option>
      <option value="i">15 Stairs - 003</option>
    </select>
<br /><br />
    <select name="color" id="color">
      <option value="j">13 Stairs - green</option>
      <option value="k">13 Stairs - yellow</option>
      <option value="l">13 Stairs - black</option>
      <option value="m">14 Stairs - green</option>
      <option value="n">14 Stairs - yellow</option>
      <option value="o">14 Stairs - black</option>
      <option value="p">15 Stairs - green</option>
      <option value="q">15 Stairs - yellow</option>
      <option value="r">15 Stairs - black</option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:04:38.623

除非您编写自己的自定义选择对象（由 Divs 制成并且看起来像股票选择但不使用标准浏览器对象），否则您不能将某些项目设置为一种颜色，而将其他项目设置为另一种颜色。但是，您可以重新绘制整个选择器以包含您想要的任何字段，因此您的第二种方法（隐藏不再相关的元素）是完全可行的。

您需要使用 onSelect 回调并将其放在第一个下拉列表中，然后编写一个函数，根据用户在第一个中选择的项目更改第二个下拉列表的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:09:58.550

以下是`disable`s的方法`option`：

```
var $options = $('#color').find('option');

$('#first-election').change(function () {

    var num = parseInt( $('option:selected', this).text(), 10 );

    $options.prop('disabled', false).filter(function () {
        return $.text(this).indexOf(num) !== 0;
    }).prop('disabled', true);

}).change(); 
```

这是小提琴：http: [//jsfiddle.net/Gp7fF/](http://jsfiddle.net/Gp7fF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:24:53.033

我认为你可以做到。看这个例子：http: [//jsfiddle.net/TxbVt/773](http://jsfiddle.net/TxbVt/773)

HTML：

```
<select>
    <option>1111111</option>
    <option>222222222</option>
    <option>33333333</option>
    <option>44444444</option>
</select> 
```

JS：

```
var options = document.getElementsByTagName('option');
for(var i = 0; i < options.length; i += 1) {
    var option = options[i];
    var colors = ['blue','yellow','purple','brown'];
    $(option).css('background-color',colors[i]);
} 
```

点击选择表格，选项有不同的颜色。

# c# - 正则表达式匹配顺序

> ID：14431145
> 
> 赞同：0
> 
> 时间：2013-01-21T00:58:04.213
> 
> 标签：c#, regex

从这个可能的输入中，我想处理粗体文本：

> 类型:**惊悚, 冒险, 动作**, 2012
> 
> 类型:**惊悚, 冒险, 动作**

我做了这样的事情`(?<=Genre: ).*(?=(, \d{4})?)`

我的问题是我把这部分放在`(, \d{4})?`希望因为有匹配`", 2012"`它会在这一点停止但它不会，它只是忽略匹配......

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:12:46.833

`.*`是贪婪的，所以它会消耗它可以消耗的任何东西。由于带有数字的最后一部分是可选的，因此所有这些都被`.*`.

可能有一种更有说服力的方法，但可能只有两个正则表达式：

```
(?<=Genre: ).*(?=(, \d{4}))|(?<=Genre: ).* 
```

如果我是对的，第一个将与数字匹配，但如果失败，它将落入更一般的情况。

**编辑：**实际上，它可能会执行以下操作：

```
(?<=Genre: ).*?(?=(, \d{4})|$) 
```

这样`.*`，它就不是贪婪的，但它*必须*消耗直到数字或字符串末尾的所有内容。

# perl - 从 TAP::Harness 获取聚合 TAP 输出的单个结果

> ID：14431148
> 
> 赞同：-1
> 
> 时间：2013-01-21T00:58:58.347
> 
> 标签：perl, testing, tap, tap-harness

我正在通过 TAP::Harness 运行一些测试，现在我正试图从 TAP 解析器中获取所有单独的结果。我要做的是首先运行测试：

```
my $harness = TAP::Harness->new( { verbosity => 1, lib => [ 'blib/lib' ] } );
my $aggregator = $harness->runtests( @tests ); 
```

这很好用。然后我尝试按照 TAP::Parser 文档获取结果：

```
my @results;

my @parsers = $aggregator->parsers;
foreach my $prsr( @parsers ) { 
    while( my $result = $prsr->next ) { 
        push @results, { type => $result->type,
                         ok   => $result->ok,
                         text => $result->as_string };
    }
} 
```

但是，这会导致`@results`为空数组。

如果我`Dumper`是单个 Parser 对象，我可以看到它们已经成功解析了测试结果：

```
 bless( {
           'tests_run' => 5,
           'actual_passed' => [
                                1,
                                2,
                                3,
                                4,
                                5
                              ],
  ....etc 
```

我不知道如何从对象中获取测试结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:31:03.333

好吧，我能够通过手动构建单个解析器并运行它们来获得我想要的东西。

```
 foreach my $test( @tests ) { 
        my @test_results;
        my $parser = TAP::Parser->new( { source => $test } );
        while( my $result = $parser->next ) { 
            push @test_results, 
              { text => $result->as_string,
                ...
              }
        } 
```

然后我想我可以手动进行聚合，尽管我仍然希望有一种方法可以从单个 TAP::Harness 实例中获取聚合结果和实际的 TAP 数据。不过，我一直无法弄清楚。

# ruby-on-rails-3 - 如何使用黄瓜/水豚测试 Rails Web 服务的上传图像？

> ID：14431153
> 
> 赞同：0
> 
> 时间：2013-01-21T00:59:26.400
> 
> 标签：ruby-on-rails-3, cucumber, capybara

我是使用 Cucumber 测试 Rails 应用程序的新手，尤其是测试 Rails Web 服务。我正在尝试在步骤定义中使用 post 方法来上传图像，但是，看起来它永远不会上传，更不用说保存图像了。

```
 When /^I get json from "(.*)" API endpoint with:$/ do |path, input|
      json = JSON.parse(JsonSpec.remember(input))
      photo = fixture_file_upload(photo_path_to(data), 'image/jpeg')
      post api_path_to(path), json, :photo => photo
    end 
```

我相信我完全错了，但我找不到正确用黄瓜张贴的方法。我可以知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:55:42.450

这是我的做法：

```
def file_attachment
 fixture_file_upload("/images/pic.png", 'image/png')
end 
```

然后在我的规格中，例如：

```
post 'create', { photo:file_attachment } 
```

# python - sqlsoup 插入 忽略

> ID：14431157
> 
> 赞同：0
> 
> 时间：2013-01-21T00:59:41.610
> 
> 标签：python, sqlsoup

我正在使用 sqlsoup 来处理 MySQL 数据库，并且我想运行以下 SQL：

```
INSERT IGNORE mytable SET col1=value1 col2=value2 vol3=value3 
```

有没有办法使用 sqlsoup 做到这一点？我似乎很难找到比一般的 sqlsoup 标准查询更复杂的信息。有没有我找不到的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:14:36.967

您需要先阅读 sqlsoup 教程。有 db.yourtable.insert 方法可以完成这项工作。 [https://sqlsoup.readthedocs.org/en/latest/tutorial.html](https://sqlsoup.readthedocs.org/en/latest/tutorial.html)

# c++ - C++11 线程：notify_all() 或 notify_one() 当我只有一个时？

> ID：14431159
> 
> 赞同：3
> 
> 时间：2013-01-21T00:59:48.943
> 
> 标签：c++, c++11, condition-variable

我的线程作为链表运行（有重叠，因此有线程），实现了与时间线没有什么不同的东西。每个条件变量解锁链表中的下一个线程。

我应该使用`notify_all()`还是`notify_one()`当我只有一个要通知时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:04:49.410

`notify_one`除非您的代码更易于阅读，否则请使用`notify_all`（例如，您构建了一个恰好包含一个元素的列表）。

# html - html中的“a”标签如何与路径级别一起使用

> ID：14431162
> 
> 赞同：1
> 
> 时间：2013-01-21T00:59:57.407
> 
> 标签：html, tags

例如，我有这个当前的 URL `http://test.com/dir1/dir2/dir3/div4`，在这个页面上我想要一个链接，它只是将 /dir5 添加到当前标签，所以我会得到`http://test.com/dir1/dir2/dir3/div4/dir5`。我知道你可以使用

```
<a href="/dir5">dir5</a> or <a href="./dir5">dir5</a> 
```

但是这些结果根据当前的 URL 路径有很大不同，有时对我没有任何意义。有没有办法可以轻松地将另一个目录添加到标签中的路径，`<a>`或者我只需在标签中写下完整的路径名`<a>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:02:40.753

它们都是相对网址。但是，它们的行为不同：

第一个将转到名为“dir5”的子文件夹。对于您的示例，它将转到`http://test.com/dir5`

第二个将转到名为 dir5 的下一个子文件夹（如果有）。这取决于您是在一个文件夹中还是另一个文件夹中。因为`http://test.com/dir1/dir2/dir3/div4`，你会到达`http://test.com/dir1/dir2/dir3/div4/div5`，但因为`http://test.com/dir1/dir2/`你会到达`http://test.com/dir1/dir2/dir5`。

如果你想从任意文件夹转到那个文件夹，你必须写完整的东西。所以你可以使用绝对网址`<a href="http://test.com/dir1/dir2/dir3/div4/div5">Go</a>`或相对网址`<a href="/dir1/dir2/dir3/div4/div5">Go</a>`，它们都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:01:43.687

```
<a href="dir5/">click me</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:09:25.463

另一种可能的解决方案是使用 html 基本标记。更多信息可以在[这里建立](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)

# sql - 删除基于多列的非不同行

> ID：14431163
> 
> 赞同：2
> 
> 时间：2013-01-21T01:00:00.117
> 
> 标签：sql, sql-server-2012

我正在使用 SQL Server Management Studio 2012。我有一个包含数千行数据的表。许多行是重复的，我需要删除它们。每行都有一个唯一标识符`[OwnerID]`，该标识符设置为 Identity Specification，Identity Increment 为 1。对于每一行，重复项位于以下列中：`[FirstName]`、`[LastName]`和`[CompanyName]`。

所以我需要删除这 3 列中具有重复值组合的行。删除后，我是否可以编写 t-sql 来将身份规范重置 `[OwnerID]`为从第一行的 1 开始，并以 1 的增量为其余行分配值？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:37:32.380

这是删除行的一种方法，使用`row_number()`保留第一个：

```
with todelete as (
    select t.*,
           row_number() over (partition by firstname, lastname, companyname
                              order by ownerid) as seqnum
    from t
)
delete from todelete
    where seqnum = 1; 
```

要重置 ownerid，也可以使用类似的思路：

```
with toupdate as (
    select t.*, row_number() over (order by ownerid) as seqnum
    from t
   )
update toupdate
    set ownerid = seqnum; 
```

但是，您应该对此非常小心。在设计良好的数据库中，名为的字段将引用名为or 或`OwnerID`的表中的列。更改 ids 的值可能会对其他表产生影响。`Owner.OwnerId``Owner.Id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:51:52.617

这是我使用临时表[SQL Fiddle](http://sqlfiddle.com/#!3/f12d1/6)的尝试：

```
SELECT 
firstName, LastName, CompanyName, COUNT(*) thecount, MIN(ID) min_id
INTO #temp
FROM tab
GROUP BY firstName, LastName, CompanyName;

SELECT 
a.id ID, b.min_id
INTO #temp1
FROM tab a, #temp b
WHERE  a.firstName  = b.FirstName 
AND a.LastName    = b.LastName
AND a.CompanyName = b.CompanyName
AND b.thecount > 1;

-- run this query on all referenced tables:
UPDATE tab2 SET tab2.ID = t.min_id
FROM tab2, #temp1 t
WHERE tab2.ID = t.ID;

DELETE t
FROM tab t, #temp1 a
WHERE t.id = a.id and a.id <> a.min_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T12:17:52.093

如果要删除重复数据并保留一个值，请使用此查询并用逗号分隔多列

删除 a from (select *, rn=row_number() over (partition by FirstName order by MemberId) from Membership ) a where rn > 1;

# matlab - 将 4d 数组拆分为 3d 数组

> ID：14431164
> 
> 赞同：1
> 
> 时间：2013-01-21T01:00:29.087
> 
> 标签：matlab

我有一个大小为 4D 的矩阵：`50 x 180 x 320 x 3`

其中第一个维度只是从 50 张图片中选择的索引，其他三个维度`180 x 320 x 3`代表一张图像。例如 (3,:,:,:) 是我的第三张图像等等......现在我想使用`image`函数（或任何其他绘图函数）绘制图像，问题是它只接受 2D 或 3D 矩阵。我该如何绘制这个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:10:43.857

`squeeze(your_array(n,:,:,:))`会给你`n`第一个图像作为一个 3d 数组。您应该能够将其传递给`image()`.

你想在网格或其他东西中绘制所有图像吗？

# ios - Xcode通讯录显示全名而不是电话号码

> ID：14431169
> 
> 赞同：3
> 
> 时间：2013-01-21T01:01:20.307
> 
> 标签：ios, abaddressbook

我有太多代码要在这里发布，所以我想知道是否可以获取一些关于 iPhone 通讯簿框架的代码示例来获得一个想法。

目前，当我从通讯录中提取电话号码时，我在文本控件中显示实际电话号码，如下所示：

![用户界面模拟](../Images/bf9ffdcf7861af79cf4474bad8d37853.png)

问题：我是否可以只在控件中显示实际全名，但在幕后能够从控件中捕获电话号码。

![在此处输入图像描述](../Images/16cdbd4d01a991b990ddf3e96a21e53f.png)

我非常感谢处理 iPhone 地址簿框架的示例代码。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:01:13.170

我想你可能已经在使用类似下面的代码：一旦你从通讯录中获得了这个人的 ID，

```
ABAddressBookRef addressBook = ABAddressBookCreate();
ABRecordRef recordRef = ABAddressBookGetPersonWithRecordID(addressBook,ID);
ABMutableMultiValueRef emailMultiValue = ABRecordCopyValue(recordRef, kABPersonPhoneProperty); 
```

其中 ID 是地址簿中的记录 ID。

您可以通过以下方式获取名称：

```
NSString *firstName = (NSString *)ABRecordCopyValue(recordRef, kABPersonFirstNameProperty);
NSString *lastName = (NSString *)ABRecordCopyValue(recordRef, kABPersonLastNameProperty); 
```

所以现在你有了名字和号码。您可以在控件中显示实际的全名，但在幕后您可以从控件中捕获电话号码。

希望这可以帮助。

# python - 在 Python 中获取浮点数的“位”？

> ID：14431170
> 
> 赞同：14
> 
> 时间：2013-01-21T01:01:24.790
> 
> 标签：python, floating-point, bitwise-operators

我正在寻找与 Java 的`Float.floatToBits`.

我发现了这个[Python：获取和操作（作为整数）浮点数的位模式，](https://stackoverflow.com/questions/1922771/python-obtain-manipulate-as-integers-bit-patterns-of-floats)但有人知道一种不太复杂的方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-21T01:09:47.027

Alex Martelli 在该问题中给出的答案非常简单——您可以将其简化为：

```
>>> import struct
>>> 
>>> 
>>> def floatToBits(f):
...     s = struct.pack('>f', f)
...     return struct.unpack('>l', s)[0]
...     
... 
>>> floatToBits(173.3125)
1127043072
>>> hex(_)
'0x432d5000' 
```

一旦你将它作为一个整数，你就可以执行你需要的任何其他操作。

您可以将操作顺序反转为往返：

```
>>> def bitsToFloat(b):
...     s = struct.pack('>l', b)
...     return struct.unpack('>f', s)[0]

>>> bitsToFloat(0x432d5000)
173.3125 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-17T16:35:59.197

Here is the 64-bit, little endian representation of a python float¹ just to add to the discussion:

```
>>> import struct
>>> import binascii
>>> print('0x' + binascii.hexlify(struct.pack('<d', 123.456789)))
0x0b0bee073cdd5e40 
```

References:

*   [`struct.pack` endianness and byte size format specifiers](http://docs.python.org/2/library/struct.html#byte-order-size-and-alignment)
*   [`binascii.hexlify`](http://docs.python.org/3.1/library/binascii.html#binascii.hexlify)

* * *

[[1] for example I needed this specifically for interoperability with .NET's [`BitConverter`](http://msdn.microsoft.com/en-us/library/system.bitconverter%28v=vs.110%29.aspx) on intel (ie little endian)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-13T10:49:49.143

```
>>> import ctypes
>>> f = ctypes.c_float(173.3125)
>>> ctypes.c_int.from_address(ctypes.addressof(f)).value
1127043072 
```

# vbscript - 将名称中带有日期的文件移动到日期文件夹

> ID：14431171
> 
> 赞同：-2
> 
> 时间：2013-01-21T01:01:30.173
> 
> 标签：vbscript

我在文件名中有日期的文件夹中有大量文件。有人可以创建一个 vbscript 将文件夹中的所有文件移动到文件名中以年份命名的其他文件夹。此外，如果该文件夹不存在创建它。

因此，如果文件是`c:\test\FileName_2012_01_25`，它将被移动到一个名为`c:\Sample\2012`

如果有人可以帮助我，我会很高兴

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:33:51.677

请参阅[此答案](https://stackoverflow.com/a/14407630/603855)以帮助您入门。改变：

```
n = Split(f.Name, "_") ' split on _ instead of - 
```

应该是唯一必要的修改。

# facebook - 与移动 Facebook 集成应用程序相关的应用程序数据

> ID：14431173
> 
> 赞同：0
> 
> 时间：2013-01-21T01:01:40.620
> 
> 标签：facebook, facebook-graph-api, mobile, mobile-application

当用户在您的应用程序中使用 Facebook 进行身份验证时，您可以在哪里以及如何存储同样使用该应用程序的其他朋友的数据，可以看到？

例如。想象一个简单的博客应用程序。完成身份验证后，您可以将帖子提交到您的博客。如果您的任何朋友也使用该应用程序，他们可以找到您的博客并查看帖子。

我的问题是这个。您将博客文章保存在哪里，以及如何检索它以供朋友查看？

是否所有 Facebook 用户都有一个可从 Facebook SDK 访问的唯一标识符？例如，我可以使用博主 Facebook ID 将博客文章保存在数据库中吗？当朋友请求查看任何博客文章时，我是否可以访问她所有的朋友 ID，然后循环访问数据库以查看是否有匹配项？

在这种情况下，设置后端服务器的首选方式是什么？

甚至，这是我会使用的唯一标识符（“id”字段）吗？[http://graph.facebook.com/henrik.skogmo](http://graph.facebook.com/henrik.skogmo)（我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:33:10.583

Facebook 没有任何外部数据的方法。这意味着您应该将所有用户的帖子（如果您的应用程序是博客应用程序）保存在您自己的服务器上。还必须在您的服务器上检索朋友的帖子。通过 Facebook API 和朋友的 ID 找到用户的朋友后，您应该从您的服务器获取他的帖子。

所有 Facebook 对象（用户、应用程序、页面等）都有唯一的 ID。在您的图形 API 响应中，`"id": "1042920928"`就是这样。您可以将用户的朋友列表存储在您自己的服务器上，或者在客户端需要时加载它。有利有弊，因此您应该考虑整个结构。

抱歉英语不好，有什么不清楚的可以问我。

# html - 是否可以将小图像放置在具有非画布 HTML 的单个字母下方？

> ID：14431177
> 
> 赞同：0
> 
> 时间：2013-01-21T01:02:10.337
> 
> 标签：html, image

例如，我有一些这样的标记：

`<div>testword</div>`

我想在字母下方放置一个小图像，在字母下方放置`s`一个不同的小图像`d`。图像应该在字母下方居中，以便清楚分配给哪个字母。使用额外的 HTML 也是可以的，例如，也许我需要将每个字母包装在`<span>`标签或其他东西中。

是否可以在不使用画布的情况下为所有浏览器执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:32:25.857

正如评论中所建议的，您可以使用`background-image`and来做到这一点`padding-bottom`。我已经用示例完成了小型[jsfiddle](http://jsfiddle.net/9REAf/1/)，以便为您提供一些起点。

```
<div>te<span class='bottom-img'>s</span>twor<span class='bottom-img'>d</span></div>

span.bottom-img
{
    background:url("/img/keys.png") no-repeat 0 10px transparent;
    padding-bottom:10px;
} 
```

但是，您需要准备图像以将它们与您的字母大小一起使用

# android - 简单的登录方法

> ID：14431179
> 
> 赞同：0
> 
> 时间：2013-01-21T01:02:31.093
> 
> 标签：android, passwords

我制作了自己的应用程序，我想为它设置一个密码（我的密码是 ABC）。当我输入密码以编辑文本时，如果`Password = ABC`我的应用程序自动打开，否则密码 #ABC 再试一次。请帮我这样做！我尝试了这种方法，但它有错误。错误是当我输入密码错误并将其删除时，我的应用程序被强制关闭。

```
class mythread implements Runnable {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        int i = 0;
        while (i == 0) {
            if (edit.getText().toString().equals(ABC)) {
                android.os.Process.killProcess(android.os.Process.myPid());
            }
        }
    }
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main) 
```

......

```
mythread thread = new mythread();
    Thread td = new Thread(thread);
    try {
        td.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    td.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:18:10.817

对于您描述的 set uo，这实际上不需要线程化。查看 SharedPreferences 并检查是否在登录页面之前的屏幕上保存了值，甚至在登录页面的活动的 onCreate 中是否保存了值。

# javascript - 如何获取推特新闻提要

> ID：14431180
> 
> 赞同：-1
> 
> 时间：2013-01-21T01:02:36.647
> 
> 标签：javascript, html, twitter

我如何获得用户的新闻提要，就像他们在 Twitter 上看到的一样。我正在一个网站上工作，用户在该网站上登录 twitter，页面向他们显示他们的提要，而他们却不去 twitter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:31:30.740

请参阅此片段示例：

```
<?php 

$fname = "../tmp/twitter.cache.html"; 

// Sistema de cache - tentando recuperar 
    if (file_exists($fname)) { 
if (time() - filemtime($fname) < 240) { 
        echo file_get_contents($fname);     
        exit; 
    } 
}  

ob_start(); 

?> 

<style> 
ul li { 
    list-style:none; 
} 
</style> 

<?php  
    $url = 'https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=unilogica&count=35';   
    $xml = @simplexml_load_file($url);   

    $twitter = @json_decode(file_get_contents("http://api.twitter.com/1/users/show.json?screen_name=unilogica")); 
    $avatar = $twitter->profile_image_url; 

    if (!isset($xml->channel->item)) { 
       echo "<center>Oops, Twitter instavel...</center>"; 

       exit; 
    } 

    foreach(@$xml->channel->item as $node){   
        $node->title = substr($node->title, 10); 

        $offset = strpos($node->title, ' RT @'); 

        if ($offset !== false) { 
            $screen_name  = substr($node->title, $offset+5, strpos($node->title, ':', 2) - $pos - 5); 
            $twitter = json_decode(file_get_contents("http://api.twitter.com/1/users/show.json?screen_name=$screen_name")); 

            $node->title = str_replace(" RT @$screen_name:", "<img width=\"32\" height=\"32\" align=\"left\"  src=\"{$twitter->profile_image_url}\">", $node->title); 

        } else { 
            $node->title = "<img width=\"32\" height=\"32\" align=\"left\" src=\"{$avatar}\"> ".$node->title; 
        } 

        echo '<ul>';   
        printf('<li><div class="twitter-msg-container"><a href="%s" style="color:#069; font-family: arial, verdana, helvetica, sans-serif;" target="_blank">%s</a></div></li>',   
            $node->link,   
            $node->title   
         );   
         echo '</ul>';   
     }  

$buffer = ob_get_clean(); 

@file_put_contents($fname, $buffer); 

echo $buffer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:05:46.127

这应该会有所帮助，只需更改用户名，它就会为您提供 json 格式的 twitter 提要。

```
<script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline.json?callback=twitterCallback2&amp;count=2&amp;include_rts=true&amp;screen_name=TWITTERUSERNAME"></script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T01:07:13.963

您可以使用小部件来执行此操作。Twitter 有一个非常简单的小部件系统，您可以在其中将 Twitter 提要嵌入网站。[在这里](https://twitter.com/settings/widgets/new)查看。

还有[this](http://tweet.seaofclouds.com/)，它使用 jQuery 并且很好地设置了 Twitter 提要的样式。

但请在转向 StackOverflow 之前进行谷歌搜索。任何人都可以在谷歌搜索后两秒钟内找到我提供给你的链接。

# java - 使用 Swing 创建多个聊天窗口

> ID：14431183
> 
> 赞同：0
> 
> 时间：2013-01-21T01:03:07.987
> 
> 标签：java, swing, user-interface, netbeans

我正在做一个项目，需要创建一个聊天客户端。我已经创建了朋友列表，双击列表中的朋友应该会显示一个新的聊天窗口。我要设计的聊天窗口有一个`Jtextpane`（用于对话）、Jtextarea（用户输入）和一个发送按钮。我在 netbeans 中使用 GUI 来创建新窗口。

我在从朋友列表中单击朋友时使聊天窗口可见，但我不确定如何实例化另一个窗口，我从朋友列表中单击另一个朋友。

# android - 如何禁止下拉ListView效果？

> ID：14431188
> 
> 赞同：0
> 
> 时间：2013-01-21T01:04:18.113
> 
> 标签：android, listview

我创建了一个常见的 Android 微调器效果，如下所示：

![在此处输入图像描述](../Images/487dc6ce85099a0705568f4f9211a614.png)

看起来在不同制造商的机器上有不同的效果。

当按下视图顶部并向下拖动时，它可以拉入一些机器。但它不能拉入其他机器。

做机器的时候创造的好不好？

我想禁止下拉`ListView`效果。怎么做？是否可以使用滚动视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:09:50.773

这有什么影响吗？

```
setOverScrollMode(View.OVER_SCROLL_NEVER) 
```

[http://developer.android.com/reference/android/widget/AbsListView.html#setOverScrollMode(int](http://developer.android.com/reference/android/widget/AbsListView.html#setOverScrollMode(int) ) [http://developer.android.com/reference/android/view/View.html#OVER_SCROLL_NEVER](http://developer.android.com/reference/android/view/View.html#OVER_SCROLL_NEVER)

# sql - Postgres 连接所有

> ID：14431189
> 
> 赞同：6
> 
> 时间：2013-01-21T01:04:31.540
> 
> 标签：sql, postgresql, postgresql-9.1

我需要将每一行的所有列（未知列）连接到一个字符串

我想做这样的事情：

```
select concat(*) from table; 
```

问题是函数 concat 不带参数“*”

任何人都可以帮助我吗？

例子：

桌子

```
GID | Name
----------
1   | nameA
2   | nameB
3   | nameC 
```

我需要输出：

```
1nameA
2nameB
3nameC 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T01:28:46.447

```
select rtrim(ltrim(replace(tablename::text, ',', ''), '('), ')') from tablename; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T01:58:28.383

我会提出两种选择。他们都使用`table_row to text`技术工作。

1.  又快又脏：

    ```
    select r::text from some_table AS r 
    ```

    样本输出：

    ```
    (289,310,,2010-09-10,6,0,1,6,0,30514,6,882,8,4,1,7,2,2,3,1,2,2,2,1,2,2,2,,1,51,0,0,0,0,0,1386,1,1,,6,,0,,,010100002082080000B3EA73156DA25C411E85EB61CB155641) 
    ```

2.  快速操作数据的可能性：

    ```
    select translate(string_to_array(r::text, ',')::text, '()', '')::text[] from some_table AS r 
    ```

    它返回一个实际的文本数组 ( `text[]`)，可以在其上应用任何数组函数 :)
    示例输出（注意开始和结束括号类型）：

    ```
    {289,310,"",2010-09-10,6,0,1,6,0,30514,6,882,8,4,1,7,2,2,3,1,2,2,2,1,2,2,2,"",1,51,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1386,1,1,"",6,"",0,"","",010100002082080000B3EA73156DA25C411E85EB61CB155641} 
    ```

使用第二种方法和`array_to_string(array, delimiter)`函数，您可以将所有列文本表示连接成一个字符串。只需选择一个分隔符（例如`','`，`'|'`甚至`''`）。例如，使用`'|'`你最终得到一个查询：

```
select array_to_string(translate(string_to_array(r::text, ',')::text, '()', '')::text[], '|') from some_table AS r 
```

带有样本输出：

```
289|310||2010-09-10|6|0|1|6|0|30514|6|882|8|4|1|7|2|2|3|1|2|2|2|1|2|2|2||1|51|0|0|0|0|0|0|0|1|0|0|0|0|0|0|0|2|0|0|0|0|0|0|0|1|0|0|0|0|0|0|0|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1386|1|1||6||0|||010100002082080000B3EA73156DA25C411E85EB61CB155641 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:13:41.040

试试`select concat(gid, user) from foo;`，就像在[这个小提琴](http://sqlfiddle.com/#!1/787d6/2)中一样。

# r - 具有随机系数的有序 Probit/Logit

> ID：14431202
> 
> 赞同：2
> 
> 时间：2013-01-21T01:06:30.337
> 
> 标签：r, choice, ordinal

我到处搜索，但没有找到我想要的，这就是为什么我在这里提出问题。有谁知道`R`允许用`random coefficients`.

我发现的唯一混合效应模型是`clmm`包`ordinal`，但它只提供随机截距。我很感激每一个提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:18:00.797

感谢您查看我的问题！答案：该`MCMCglmm`包提供了贝叶斯版本的序数回归，带有概率链接函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T19:37:34.923

进行有序逻辑回归的一种方法是扩展数据。例如，如果您有：

让 | 猫 -|----- 一个 | 类别 3 b | 猫5

您可以将其扩展为：

让通过水平 a T aboveCat0 a T aboveCat1 a T aboveCat2 a F aboveCat3 a F aboveCat4 b T aboveCat0 b T aboveCat1 b T aboveCat2 b T aboveCat3 b T aboveCat4

...然后使用“级别”作为固定效果。

页眉 | 页眉 ------ | ------ 细胞 | 细胞

# php - 使用哪种 HTTP 身份验证来保护传输到服务器的数据？

> ID：14431209
> 
> 赞同：-1
> 
> 时间：2013-01-21T01:07:27.130
> 
> 标签：php, ios, database, http, authentication

> **可能重复：**
> [HTTP 身份验证的类型以及如何设计安全数据库？](https://stackoverflow.com/questions/14429057/types-of-http-authentication-and-how-to-design-a-secure-database)

我有一个与我的服务器交换 XML 数据的 iphone 应用程序。

用户第一次运行应用程序时，应用程序连接到一个 URL 并请求一个用户 ID。

我对这件事使用了 HTTP 基本身份验证，但是通过一个简单的 Web 调试器（嗅探器），我能够看到发送/接收到我的服务器的所有 XML 表单以及发出用户 ID 的 url。

那么我能做些什么来隐藏所有这些数据并且在调试器中不那么可见呢？有些人建议使用 https（http over ssl），但我看到数以百万计的站点/应用程序使用 http 来处理这些事情。我在这里错过了什么吗？我该怎么做才能拥有这种安全性？

我想要的只是避免有人编写脚本并用垃圾淹没我的数据库，因为所有内容（URLS，XML 文件的形式）都是可见的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T01:09:57.263

HTTPS 是您想要使用的。如果您不使用 HTTPS，那么您很容易受到攻击。

仅仅因为数以百万计的网站不安全并不意味着您希望自己的网站不安全。网站最初使用 HTTPS，然后从那里使用 HTTP 也很常见。不过，如果您真的想受到保护，请再次使用 HTTPS。

最后，HTTPS 不会保护您免受有人用垃圾淹没您的数据库。为此，您需要良好的身份验证，并限制某人可以从特定帐户执行的操作。

# java - 如何从 Onclickitem 膨胀上下文菜单？

> ID：14431213
> 
> 赞同：1
> 
> 时间：2013-01-21T01:07:45.517
> 
> 标签：java, android, android-contextmenu

我正在尝试从此代码中扩展上下文菜单。但是，当我单击某个项目时，程序就会运行，没有任何反应。这是我正在使用的代码。你能帮我找出问题所在吗？我试图打开的菜单的名称称为“testmenu”。

```
package com.carouseldemo.main;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselItem;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.main.R;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MenuInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;

import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {
 @Override
  public void onCreateContextMenu (ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.testmenu, menu);
  }

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MediaPlayer mp = MediaPlayer.create(this, R.raw.radio);

    mp.start();
    Carousel carousel = (Carousel)findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {    
            registerForContextMenu(view);
            openContextMenu(view);

        }

        @Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                CoTell me please, whenntextMenuInfo menuInfo) {
            // TODO Auto-generated method stub

        }

    });

    carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

        public void onItemSelected(CarouselAdapter<?> parent, View view,
                int position, long id) {

            final TextView txt = (TextView)(findViewById(R.id.selected_item));

            switch(position){
            case 0:
                txt.setText("Power Source International ");
                break;
            case 1:
                txt.setText("Power Source International");
                break;
            case 2:
                txt.setText("Power Source International");
                break;
            case 3:
                txt.setText("Power Source International.");
                break;
            case 4:
                txt.setText("Power Source International");
            case 5:
                txt.setText("Power Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source InternationalPower Source International");
                break;
            }

        }

        public void onNothingSelected(CarouselAdapter<?> parent) {
        }

    }
    );

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

如果有帮助，这里也是菜单的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/new_game"
      android:icon="@drawable/cat"
      android:title="@string/new_game"
      android:showAsAction="ifRoom" android:checkable="true" android:enabled="true"         android:visible="true"/>
<item android:id="@+id/help"
      android:icon="@drawable/cat"
      android:title="@string/help" /> 
```

如何在我的活动中打开此菜单？当我单击一个项目时，菜单不会出现。

# css - 如何调整内联文本链接的边框偏移？

> ID：14431215
> 
> 赞同：0
> 
> 时间：2013-01-21T01:07:58.000
> 
> 标签：css

我正在使用`border-bottom: 1px dotted blue;`我的锚标签而不是`text-decoration: underline;`这样我可以有一条虚线。

有谁知道如何将边框的偏移量调整为离文本更近或更远？

[提琴手的例子](http://jsfiddle.net/Vw6bH/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:10:03.230

如果您将 设置`display`为`inline-block`，您可以使用`line-height`将边框移动得更近或更远。

[js小提琴](http://jsfiddle.net/Vw6bH/2/)。

# login - YouTube 自动让我登录

> ID：14431218
> 
> 赞同：-1
> 
> 时间：2013-01-21T01:08:24.083
> 
> 标签：login, youtube, gmail, google-account

最近，当我从笔记本电脑访问 YouTube 时，我看到了一些奇怪的行为。出于某种原因，我**总是登录**。

现在，我有一台笔记本电脑和一台台式机，在过去的几个月里，我只用这台笔记本电脑访问我的邮件（Gmail）和检查 SE，我用我的台式机浏览 YouTube、邮件、编程......

我不明白为什么我总是登录，即使我从未输入我的凭据。所以我尝试了一些东西，但到目前为止没有任何效果（保持注销）：

1.  特别是注销，重新打开浏览器（Firefox），我仍然登录
2.  清除所有记住的密码
3.  清除所有 cookie
4.  使用 Internet Explorer（请原谅我）

我不使用 Chrome 或任何其他谷歌应用程序。

所以我的问题是：尽管我在上面做了这些事情，YouTube 仍然如何知道我的帐户并在我每次访问他们的网站时登录我，我可以以某种方式禁用它吗？（取决于使用的任何技术）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:16:27.150

Youtube 使用您的 Gmail 会话让您登录。

这是因为您的 Youtube 帐户已链接到您的 Gmail 帐户，如果 Youtube 帐户是在 2009 年 5 月之前创建的，您可以取消它们的链接 - [Unlink my YouTube account from a Google Account](http://support.google.com/youtube/bin/answer.py?hl=en&answer=183819)。

请注意，您需要将另一个 Gmail 帐户链接到您的 Youtube 帐户。

# jquery - jQuery幻灯片事件顺序

> ID：14431219
> 
> 赞同：1
> 
> 时间：2013-01-21T01:08:33.170
> 
> 标签：jquery

我在 div (RTab) 中显示用户定义的搜索结果，该搜索结果在查询开始之前一直隐藏。我希望在单击搜索按钮 (cmdSub) 后立即显示结果 div，然后发出查询。AutoProc 是填充结果 div 的 PEAR AJAX 函数。

问题是查询完成后 div 滑动打开，而我希望它在查询发送到服务器之前滑动打开。

```
 $("#cmdSub").click(function(){
       $('#RTab').show('slide', { direction: 'right' }, 100);
       AutoProc('UsrQuery');
    }); 
```

我尝试了很多方法，例如强制 UI 重绘、将我的 AJAX 调用绑定到 RTab 的 show 事件以及通过将显示更改为无并返回阻止来确保 hasLayout 为真。似乎没有什么影响操作的顺序。它总是运行查询然后显示 div！非常令人沮丧！

我哪里错了？

编辑以显示最终更正的行：

```
 $('#RTab').show('slide', { direction: 'right',complete: function(){AutoProc('Query');} }, 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:21:49.910

看起来您想在动画完成后运行查询函数，因此将您的函数附加到`complete`事件上：

```
$("#cmdSub").click(function(){
   $('#RTab').show({
     complete: function(){
                 AutoProc('UsrQuery');
               },
     duration: 100
   });       
}); 
```

虽然我不知道任何“方向”属性[`$.show()`](http://api.jquery.com/show/)......

# c# - 如何在温莎城堡注册mongodb？

> ID：14431220
> 
> 赞同：1
> 
> 时间：2013-01-21T01:08:39.177
> 
> 标签：c#, asp.net-mvc, mongodb, castle-windsor

我正在尝试插入 MongoDatabase 的实例，但不知道实现此目的的好方法。

我可以尝试将它包装在另一个对象中，但这似乎是一种浪费的抽象，因为我确实想直接访问 MongoDatabase 对象。

我希望我能够创建一个对象，然后将其传递给温莎城堡并告诉它在解析时使用该对象。

希望像

```
var client = new MongoClient("mongodb://localhost");
var server = client.GetServer();
var database = server.GetDatabase("test"); 
```

然后我希望我可以在温莎城堡注册类似于的数据库对象

```
container.Register(Component.For(typeOf(MongoDatabase)).UseTheCreatedObject(database)); 
```

是否可以这样做或其他方式来获取`MongoDatabase`对象设置？

答案是 Krzysztof Koźmic 所建议的。我最初是在做类似的事情

```
Component.For(typeOf(MongoDatabase)).ImplementedBy<MongoDatabase>().Instance(database); 
```

这导致了一个错误，说 MongoDatabase 已经注册或实现（不记得了）。所以我要做的就是删除 ImplementedBy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T09:35:04.203

尝试：

```
Component.For<MongoDatabase>().Instance(database); 
```

# java - 为什么在允许“return x”时必须使用“this.x = x”？

> ID：14431222
> 
> 赞同：3
> 
> 时间：2013-01-21T01:09:15.760
> 
> 标签：java, syntax

我对教程有一点误解。这是它的一个片段：

```
public class Test {
  private int id;

  public int getId() {
    return id;
  }
  public void setId(int id) {
    this.id = id;
  }
} 
```

无论如何，我无法理解的是如何引用 id。例如，我可以看到，在 getId 方法中，我可以通过返回 id 直接访问先前定义的 id。但是在 setId 方法中，之前定义的 id 被称为 this.id，方法参数是 id。

现在，如果 get 方法中有“return this.id”，那么我会理解一切。但此刻我很困惑。我假设如果我在 set 方法中返回 id，我会得到参数，而不是类定义的 id。所以总而言之，除非有同名的参数传递，否则只需键入“id”就可以访问类定义的id？这听起来有点奇怪，我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T01:16:39.043

在 Java 中，在正常情况下，`this`类的内部是可选的。可以使用或不使用 . 来引用任何属性`this`。

当您有同名的参数或局部变量时，歧义使得编写`this`, 是强制性的。

这称为“*阴影*”。据说局部变量正在遮蔽属性。

当你写的时候`id`，对Java最合理的猜测是你的意思是最局部的引用，也就是参数名而不是属性。要覆盖此行为，您必须澄清您愿意访问`this.id`，即属性，而不是局部变量。

希望把事情弄清楚！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T01:10:42.807

```
this.id = id; 
```

问题是您还有一个同名的局部变量。因此，您不能直接访问类成员，因为`id`将引用局部变量。这就是为什么`this`需要在此处访问类成员变量的原因。

您可以通过更改名称重写如下，现在`this`不再需要。

```
public void setId(int locID) {
    id = locID;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:10:30.367

您可以将 this.id 放在 getId 方法中，它仍然可以工作。它实际上是在说同样的事情。这将编译并且完全有效：

```
private int id;

public int getId() {
    return this.id;
}
public void setId(int id) {
    this.id = id;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-21T01:19:43.570

如果您从 Test 类创建了对象并且您尝试`id` 像这样访问它：

```
int test;
test=TestObject.id; 
```

你会得到错误因为`id`是私人的所以你必须说

```
test=TestObject.getid(); 
```

现在`getid()`将为我们返回`id`我们可以调用它的私有方法，因为它的公共方法

# javascript - 如何使用移动 Safari 停止在 touchend 上滚动？

> ID：14431237
> 
> 赞同：1
> 
> 时间：2013-01-21T01:10:48.463
> 
> 标签：javascript, touch, mobile-safari, hammer.js

我试图在一个网络应用程序上执行这种操作，它由一个“马赛克”视图组成，总共 6 列视图，共 6 行。导航在桌面浏览器上运行良好，但使用 Mobile Safari 时会变得很困难。

这是我想要采取的行动：

> 用户滑动（快速）-> 页面移动 1 个视图上/下/左/右
> 用户触摸和拖动 -> 页面跟随手指用户抬起手指（触摸端）-> 惯性滚动停止，页面移动 1 个视图上/下/左/右

目前我正在使用 Hammer.js，它的 prevent_default 设置为 true 效果很好，但拖动时内容不会跟随手指。

哪个更容易/更好，使用代码在拖动事件上移动页面，或者试图劫持 touchend 上的滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:55:52.540

你在正确的轨道上！我喜欢hammer.js。如果您希望页面用用户的手指移动，我会使用代码在拖动事件上移动页面。例如，您可以执行以下操作：

```
hammer.bind('drag', function(ev) {
    x = ev.position.x;
    y = ev.position.y;
    mosaic.style.webkitTransform = 'translate3d('+(x) +'px, '+(y) + 'px, 1px)'; 
```

“马赛克”是容纳瓷砖的容器。棘手的部分是确定然后“捕捉”到哪个图像。也许您也可以使用 jQuery .offset() 来确定触摸坐标和马赛克之间的关系？

查看最新版本的 Hammer.js 以获得更多帮助。您现在还可以评估：

```
center      {Object}        center position of the touches. contains pageX and pageY
deltaTime   {Number}        the total time of the touches in the screen
deltaX      {Number}        the delta on x axis we haved moved
deltaY      {Number}        the delta on y axis we haved moved
velocityX   {Number}        the velocity on the x
velocityY   {Number}        the velocity on y 
```

# css - 删除特定页面的底部边框

> ID：14431238
> 
> 赞同：1
> 
> 时间：2013-01-21T01:10:50.517
> 
> 标签：css, border

我使用 CSS 为每个页面条目提供了一个可以在此处看到的底部边框。 [http://www.jobspark.ca/job-listings/](http://www.jobspark.ca/job-listings/)

问题是当您单击页面以在页面的最底部打开它时，边框是可见的。您必须仔细查看“打印此作业”下方的最底部才能看到它。

[http://www.jobspark.ca/job-listings/2013/1/18/general-labourers.html](http://www.jobspark.ca/job-listings/2013/1/18/general-labourers.html)

希望保留列表的边框，但在打开页面时将其删除。希望这是有道理的。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:31:25.933

1.你可以找到一个独立的类：

```
.single-journal-entry-wrapper .journal-entry-tag-post-body-line1{border:none 0;background:none;} 
```

2.向父类添加另一个类：

```
.single-nobdbg .journal-entry-tag-post-body-line1{border:none 0;background:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:18:11.247

删除以下内容：

```
#modulePage19099460 .journal-entry-wrapper {
border-bottom: 1px solid #CCCCCC;
} 
```

# php - 使用一次调用 twitter 和 twitter 计算它的次数

> ID：14431244
> 
> 赞同：0
> 
> 时间：2013-01-21T01:12:02.683
> 
> 标签：php, api, twitter

我正在使用[abrahm 库](https://github.com/abraham/)连接到 twitter，并且我在我的 PHP 网站中使用 Search REST API，在每次向 Twitter API 发出请求后，我都会检查它的速率限制减少 50，就像我向 API 请求 50 次时有任何帮助为了那个原因

这是我的连接方法

```
$temp=$con->get('search/tweets', array('q' => $hash ,'count'=>100)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:23:54.960

请注意，随着 API 版本 1.1 Twitter 改变了方式，速率限制起作用了。正如您所说的一般“速率限制”，我假设您仍在访问 1.0 版本的速率限制信息。

我建议您阅读[新的速率限制](https://dev.twitter.com/docs/rate-limiting/1.1)和[实际限制](https://dev.twitter.com/docs/rate-limiting/1.1/limits)。在您的情况下，您应该能够使用 1.1[搜索/推文](https://dev.twitter.com/docs/api/1.1/get/search/tweets)界面每 15 分钟进行 180 次搜索。[您可以使用application/rate_limit_status](https://dev.twitter.com/docs/api/1.1/get/application/rate_limit_status)接口获取速率限制的当前状态，`search`并将其用作其资源参数。

# r - 忽略R中ggplot的因素之一

> ID：14431246
> 
> 赞同：2
> 
> 时间：2013-01-21T01:12:03.933
> 
> 标签：r, ggplot2, r-factor

我使用 ggplot 来绘制我的变量和属性。我正在使用以下代码来使用 ggplot 和因子：

```
require(ggplot2)
require(reshape2)
df <- data.frame(HMn25_30$avg,HMn25_30$h)
df[3] = c("Normal",   
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Normal",
                "Outlier",
                "Outlier",
                "Outlier",
                "Outlier",
                "Outlier",
                "Outlier",
                "Normal",
                "Outlier",
                "Outlier",
                "Normal",
                "Normal",
                "Outlier",
                "Outlier",
                "Normal",
                "Normal"
)
names(df)[1] <- 'Node 25'
names(df)[3] <-'Results'
df.m <- melt(df, names(df)[2:3], names(df)[1])
df.m$Results <- factor(df.m$Results)
df.m$HMn25_30.h <- strptime(as.character(df.m$HMn25_30.h), format = "%Y-%m-%d %H:%M:%S")
p <- ggplot(df.m, aes(x = HMn25_30.h, y = value, group = variable, color = variable))
p <- p + scale_shape_manual(values=c(20,22))
p <- p + geom_point(aes(shape = Results), cex=9, color= "blue3")
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,color="darkred"))
p <- p + scale_color_manual(values=c("Red"))
p <- p + ylim(-1,8)
p <- p + theme_bw()
p <- p + xlab('Date and Time') 
p <- p + ylab('Temprature') 
p <- p + ggtitle("Temporal Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black", size=29))
p <- p + theme(legend.text = element_text(colour="darkred", size = 25))
p <- p + theme(legend.title = element_text(colour="brown", size=25))
p <- p + theme(axis.title.x = element_text(face="bold", colour="darkred", size=16),axis.text.x  = element_text(angle=90, vjust=0.5, size=26))
p <- p + theme(axis.title.x = element_text(face="bold", colour="darkred", size=14),axis.text.y  = element_text(angle=00, vjust=0.5, size=20))
p <- p + labs(x = "Date-Time [UTC] \ 2007-09-30 ", y = "Temprature  ")
p <- p + theme(axis.title.y = element_text(size = rel(2.1), angle = 90))
p <- p + theme(axis.title.x = element_text(size = rel(2.1), angle = 00))
p <- p + geom_line(size=1.9)
p 
```

代码结果： ![在此处输入图像描述](../Images/ba8c829e8b5d663f9c6bd8aee789d7c8.png)

我只想呈现“异常值”，并从情节中省略“正常”因素。

样本数据：

```
 Node 25          HMn25_30.h Results
1   0.26000000 2007-09-29 23:00:00  Normal
2   0.01500000 2007-09-30 00:00:00  Normal
3  -0.35333333 2007-09-30 01:00:00  Normal
4  -0.42333333 2007-09-30 02:00:00  Normal
5  -0.73333333 2007-09-30 03:00:00  Normal
6  -0.65000000 2007-09-30 04:00:00  Normal
7  -0.40000000 2007-09-30 05:00:00  Normal
8  -0.09166667 2007-09-30 06:00:00  Normal
9   0.19000000 2007-09-30 07:00:00  Normal
10  0.63500000 2007-09-30 08:00:00  Normal
11  1.05500000 2007-09-30 09:00:00 Outlier
12  1.26833333 2007-09-30 10:00:00 Outlier
13  2.28166667 2007-09-30 11:00:00 Outlier
14  4.17000000 2007-09-30 12:00:00 Outlier
15  6.34000000 2007-09-30 13:00:00 Outlier
16  6.56666667 2007-09-30 14:00:00 Outlier
17  6.74666667 2007-09-30 15:00:00  Normal
18  5.82833333 2007-09-30 16:00:00 Outlier
19  6.36500000 2007-09-30 17:00:00 Outlier
20  4.60333333 2007-09-30 18:00:00  Normal
21  4.98000000 2007-09-30 19:00:00  Normal
22  2.65666667 2007-09-30 20:00:00 Outlier
23  4.90833333 2007-09-30 21:00:00 Outlier
24  5.05000000 2007-09-30 22:00:00  Normal
25  4.56500000 2007-09-30 23:00:00  Normal 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:24:32.407

您可以在`subset`调用中添加参数`geom_point`并使用 plyr`.()`函数来定义子集。

例如

```
p + geom_point(aes(x = HMn25_30.h, y = value, colour = variable), subset = .(Results == 'Outlier')) 
```

一个很好的可重现的小例子

```
DF <- data.frame(a = letters[1:4], b = 1:10)

library(plyr) # must be explicitly loaded

 ggplot(DF, aes(x = b, y = b)) + 
  geom_point(subset = .(a == 'a'), colour = 'blue') + 
  geom_point(subset = .(a == 'c'), colour = 'green') +
  geom_line() 
```

![在此处输入图像描述](../Images/fe5c264c42dda318898934f6e6f047ef.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T09:28:25.423

使用数据框的子集，其中`Results == "Outlier"`命令`geom_point`：

```
p <- p + geom_point(data = df.m[df.m$Results == "Outlier",], 
                    cex=9, color= "blue3", shape = 22) 
```

那么，就不需要`scale_shape_manual`命令了。

![在此处输入图像描述](../Images/43136fab4e8f0bd51edfe88e456d740d.png)

完整代码：

```
library(ggplot2)
p <- ggplot(df.m,
            aes(x = HMn25_30.h, y = value, group = variable, color = variable))
#p <- p + scale_shape_manual(values=c(20,22))                 # command removed
p <- p + geom_point(data = df.m[df.m$Results == "Outlier",], 
                    cex=9, color= "blue3", shape = 22)        # command modified
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,
               color="darkred"))
p <- p + scale_color_manual(values=c("Red"))
p <- p + ylim(-1,8)
p <- p + theme_bw()
p <- p + xlab('Date and Time') 
p <- p + ylab('Temprature') 
p <- p + ggtitle("Temporal Outliers of Node 25 ") + 
         theme(plot.title = element_text(lineheight=3, face="bold", 
               color="black", size=29))
p <- p + theme(legend.text = element_text(colour="darkred", size = 25))
p <- p + theme(legend.title = element_text(colour="brown", size=25))
p <- p + theme(axis.title.x = element_text(face="bold",colour="darkred" size=16),
               axis.text.x  = element_text(angle=90, vjust=0.5, size=26))
p <- p + theme(axis.title.x = element_text(face="bold",colour="darkred",size=14),
               axis.text.y  = element_text(angle=00, vjust=0.5, size=20))
p <- p + labs(x = "Date-Time [UTC] \ 2007-09-30 ", y = "Temprature  ")
p <- p + theme(axis.title.y = element_text(size = rel(2.1), angle = 90))
p <- p + theme(axis.title.x = element_text(size = rel(2.1), angle = 00))
p <- p + geom_line(size=1.9)
p 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:23:12.743

您尚未提供包含您的数据的可重现代码，但您似乎可以通过简单的子集来实现这一点。尝试更改此行：

```
p <- ggplot(df.m, aes(x = HMn25_30.h, y = value, group = variable,
                                         color = variable)) 
```

对此：

```
p <- ggplot(df.m[df.m$Result == "Outlier", ], aes(x = HMn25_30.h, y = value,
                                    group = variable, color = variable)) 
```

如果我正确理解您的数据框的结构，则应该只绘制该`Results`列具有 value的行`Outlier`。

# javascript - 如何向 Raphael.js 对象添加内部阴影？

> ID：14431247
> 
> 赞同：0
> 
> 时间：2013-01-21T01:12:20.630
> 
> 标签：javascript, jquery, svg, raphael

我发现了一些基于模糊或发光的阴影插件，还有描边不透明度，但这只是模拟，不能用于内阴影的情况。

SVG 规范中也没有简单的过滤器，所以你不能简单地利用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:12:20.630

我基于这两个链接编写了自己的插件：

[https://github.com/dahoo/raphael.dropshadow.js](https://github.com/dahoo/raphael.dropshadow.js)

[http://svgquickref.com/properties/filter/inner-shadow/index.html](http://svgquickref.com/properties/filter/inner-shadow/index.html)

HTML 代码（用法）：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Raphael Test</title>

        <script type="text/javascript" src="js/libs/jquery.js"></script>
        <script type="text/javascript" src="js/libs/raphael.js"></script>
        <script type="text/javascript" src="js/libs/raphael.innershadow.js"></script>
    </head>
    <body>
        <div id="raphael"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                var raphael, path, pattern;
                raphael = Raphael(document.getElementById('raphael'), 500, 500);
                path = raphael.circle(200, 200, 180);
                path.attr('fill', 'red');
                path.innerShadow(50, 0, 0, "green", 0.5);
            });
        </script>
    </body>
</html> 
```

插件代码：

```
(function() {
    if(Raphael.vml) {
        Raphael.el.innerShadow = function (size, offsetX, offsetY, color, opacity, filter_id, input) {
            // not supporting VML yet
            return this; // maintain chainability
        }
    } else {
        var $ = function(el, attr) {
            if(attr) {
                for(var key in attr)
                if(attr.hasOwnProperty(key)) {
                    el.setAttribute(key, attr[key]);
                }
            } else {
                return document.createElementNS("http://www.w3.org/2000/svg", el);
            }
        };
        Raphael.el.innerShadow = function(size, offsetX, offsetY, color, opacity, filter_id, input) {

            opacity = opacity || 1;
            filter_id = filter_id || "innershadow";
            input = input || "SourceGraphic";

            if(size != "none") {
                var fltr = $("filter"),
                    offset = $("feOffset"), // offset
                    blur = $("feGaussianBlur"), // shadow bluer
                    composite1 = $("feComposite"), // invert drop shadow to create inner shadow
                    flood = $("feFlood"), // color & opacity
                    composite2 = $("feComposite"), // clip color inside shadow
                    composite3 = $("feComposite") // put shadow over original object

                fltr.id = filter_id;

                $(fltr, {
                        "height" : "150%",
                        "width" : "150%"
                });

                $(offset, {
                    dx: offsetX,
                    dy: offsetY
                });

                $(blur, {
                    stdDeviation: +size,
                    result: "offset-blur"
                });

                $(composite1, {
                    operator: "out",
                    "in": "SourceGraphic",
                    in2: "offset-blur",
                    result: "inverse"
                });

                $(flood, {
                    "flood-color": color,
                    "flood-opacity": opacity,
                    result: "color"
                });

                $(composite2, {
                    operator: "in",
                    "in": "color",
                    in2: "inverse",
                    result: "shadow"
                });

                $(composite3, {
                    operator: "over",
                    "in": "shadow",
                    in2: input
                });

                fltr.appendChild(offset);
                fltr.appendChild(blur);
                fltr.appendChild(composite1);
                fltr.appendChild(flood);
                fltr.appendChild(composite2);
                fltr.appendChild(composite3);

                this.paper.defs.appendChild(fltr);
                this._blur = fltr;

                $(this.node, {
                    "filter" : "url(#" + filter_id + ")"
                });

            } else {
                if(this._blur) {
                    this._blur.parentNode.removeChild(this._blur);
                    delete this._blur;
                }
                this.node.removeAttribute("filter");
            }
            return this;  // maintain chainability
        };
    }

    Raphael.st.innerShadow = function(size, offsetX, offsetY, color, opacity, filter_id, input) {
        return this.forEach(function(el) {
            el.innerShadow(size, offsetX, offsetY, color, opacity, filter_id, input);
        });
    };
})(); 
```

# java - Android检索手机内存中的最新图像？

> ID：14431250
> 
> 赞同：1
> 
> 时间：2013-01-21T01:12:32.797
> 
> 标签：java, android

我正在尝试使用查看器构建一个简单的图片库，该应用程序适用于视力不好的人，因此它应该直接跳到最后一张图片并让用户向左滑动以查看下一张图片，而不是首先显示图片网格，但是我不知道如何从手机内存中检索图像。

回答这些问题中的任何一个都会帮助我：

如何获取画廊中出现的所有图像（无论它们的位置）？或提供的图像按从最新到最旧的顺序排列，我如何获取图像 0 并将其添加到图像视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:49:13.960

要按日期对图像进行排序，

```
MediaStore.Images.Media.DATE_ADDED + " DESC"" 
```

要仅从内部存储器中检索图像，请使用`Images.Media.INTERNAL_CONTENT_URI`,

下面的代码将返回手机内部存储器中的所有图像，按添加日期排序。

```
Cursor cursor = context.getContentResolver().query(Images.Media.INTERNAL_CONTENT_URI, 
                MediaStore.Images.Media.DATA, 
                null, 
                null, 
                MediaStore.Images.Media.DATE_ADDED + " DESC"); 
```

希望这会给您一些提示，根据所需的功能更改光标。

# java - JButton 仅在鼠标悬停时显示

> ID：14431251
> 
> 赞同：0
> 
> 时间：2013-01-21T01:12:44.990
> 
> 标签：java, image, swing, background, jbutton

我正在开发一款“Tron”游戏，对于我的菜单，我使用了一种绘制方法来为菜单绘制背景。一切都很好，除了 3 个 JButtons “隐藏”在背景后面，直到我将鼠标放在它上面然后它出现。如果有办法让按钮保持可见，我将不胜感激！

我的代码：

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Menu extends JFrame {
    private static final long serialVersionUID = 1L;
    String name;
    Image bk;
    public Menu() {
        super("TRON");
        // Set the size of window
        setSize(800, 800);
        // Set the default operation for the window
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        // Set a background
        ImageIcon ibk = new ImageIcon("background.jpg");
        bk = ibk.getImage();
        // Set a new panel
        JPanel p = new JPanel(new GridBagLayout());
        // Make buttons!
        JButton b = new JButton("Play!");
        JButton b2 = new JButton("High Scores");
        JButton b3 = new JButton("Exit");
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                new GameFrame();
            }
        });
        b2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                new hsview();
            }
        });
        b3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        // Set the GridBagConstraints to organize the layout
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets (15, 15, 15, 15);
        // Use gbc to space out each button
        gbc.gridx = (0);
        gbc.gridy = (0);
        // Add them to the panel then to JFrame
        p.add(b, gbc);
        gbc.gridx = (0);
        gbc.gridy = (1);
        p.add(b2, gbc);
        gbc.gridx = (0);
        gbc.gridy = (2);
        p.add(b3, gbc);
        // Add to the frame at the bottom
        add(p, BorderLayout.SOUTH);
    }
    // Background stuff
    @Override
    public void paint(Graphics g) {
        super.paint(g);
        g.drawImage(bk, 0, 0, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:34:43.973

Swing 使用“分层”概念进行绘画......

`paint`调用`paintComponent`,`paintBorder`和`paintChildren`. 通过覆盖`paint`和调用失败`super.paint`，您阻止了组件绘制它的各个层。

在 Swing 中，最好使用`paintComponent`提供自定义绘制，它允许您在可能添加到组件的任何其他组件下方绘制。

![在此处输入图像描述](../Images/caa5731d0eec8f89d762b1f5006b93a7.png)

```
public class TestPaint01 {

  public static void main(String[] args) {
    new TestPaint01();
  }

  public TestPaint01() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex) {
        }

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TestPane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

      }
    });
  }

  public class TestPane extends JPanel {

    private Image backgroundImage;

    public TestPane() {
      try {
        BufferedImage background = ImageIO.read(new File("/path/to/image.jpg"));
        //backgroundImage = background.getScaledInstance(-1, background.getHeight() / 4, Image.SCALE_SMOOTH);
        backgroundImage = background;
      } catch (IOException ex) {
        ex.printStackTrace();
      }
      setLayout(new GridBagLayout());
      add(new JButton("Hello"));
    }

    @Override
    public Dimension getPreferredSize() {
      return backgroundImage == null ? super.getPreferredSize() : new Dimension(backgroundImage.getWidth(this), backgroundImage.getHeight(this));
    }

    @Override
    protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      int x = (getWidth() - backgroundImage.getWidth(this)) / 2;
      int y = (getHeight() - backgroundImage.getHeight(this)) / 2;
      g.drawImage(backgroundImage, x, y, this);
    }

  }

} 
```

您可能会发现[A Closer look at the Paint Mechanism](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html) and [Painting in AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)提供了丰富的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:16:56.423

我认为您需要为您的框架调用 pack() 方法和此显示。我认为 pack() 方法将您的组件设置为显示。

以下是 JFrame 教程列出的步骤。

[如何制作相框](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

```
//1\. Create the frame.
JFrame frame = new JFrame("FrameDemo");

//2\. Optional: What happens when the frame closes?
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

//3\. Create components and put them in the frame.
//...create emptyLabel...
frame.getContentPane().add(emptyLabel, BorderLayout.CENTER);

//4\. Size the frame.
frame.pack();

//5\. Show it.
frame.setVisible(true); 
```

# volume - audioSessionGetProperty 不起作用 (iOS)

> ID：14431256
> 
> 赞同：0
> 
> 时间：2013-01-21T01:14:35.003
> 
> 标签：volume, audiosession

我正在尝试检测当前音量，但结果始终为 0。这是我的代码：

在视图控制器.m

1.  导入音频工具箱。

2.  在 viewDidLoad 方法中，AudioSessionInitialize(NULL, NULL, NULL, NULL);

3.  在 viewDidLoad 方法中，按照上面的初始化方法。

    ```
     Float32 volume_reading; 
    ```

    UInt32 dataSize = sizeof(Float32);

    AudioSessionGetProperty (kAudioSessionProperty_CurrentHardwareOutputVolume, &dataSize, &volume_reading);

4.  po volume_reading 在调试器中，结果为 0。

有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T10:58:41.457

这是一个较老的问题，但是您是否初始化了音频会话？

例子：

```
AudioSessionInitialize(NULL, NULL, NULL, (__bridge void*)self); 
```

# functional-programming - 如何将移位/重置转换为 delimcc？

> ID：14431257
> 
> 赞同：10
> 
> 时间：2013-01-21T01:14:41.403
> 
> 标签：functional-programming, ocaml, continuations, delimited-continuations

我正在研究 Oleg 和 Asai 的“for dummies”论文的分隔延续（http://pllab.is.ocha.ac.jp/~asai/cw2011tutorial/main-e.pdf），但本文使用移位/重置形式代替Oleg 的 delimcc 中可用的提示内容。所以我有几个问题：

首先，什么是提示？又为什么是传中等`shift`功能呢？知道什么是 subcont 也很好，但我愿意跳过它，因为我只是想通过论文。此外，它们之间有什么区别`shift`以及它们在论文中`shift0`如何对应`shift`。

另外，`reset`delimcc 里有什么？我的直觉告诉我，`new_prompt`并且`push_prompt`以某种方式对应于`reset`. 但我也需要在这里澄清一下。

编辑：我能够从论文中翻译一个简单的例子，我的直觉证明是正确的。但是，我想对差异进行真正的解释，以及为什么 delimcc 是这样的。这是两个版本以防万一有人感兴趣

纸：

```
reset (fun () -> 3 + shift (fun _ -> 5 * 2) - 1) 
```

脱脂：

```
let _ = let open Delimcc in
  let np = new_prompt () in
  push_prompt np (fun () -> 3 + (shift np (fun _ -> 5 * 2)) - 1) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T09:02:35.453

# .net - 产品 API 综合列表

> ID：14431263
> 
> 赞同：2
> 
> 时间：2013-01-21T01:16:05.270
> 
> 标签：.net, web-services, api, directory

有谁知道一个网站提供了用于检索产品数据列表（例如书籍、电影、游戏、葡萄酒、啤酒等）的 API 的完整列表？那里有 Web API 的目录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:23:22.990

尝试使用 ApiHub： http: [//www.apihub.com/](http://www.apihub.com/)

比如书籍相关的API，可以搜索： http: [//www.apihub.com/search/api/books](http://www.apihub.com/search/api/books)

# javascript - 多个并发 $.post 导致阻塞

> ID：14431265
> 
> 赞同：0
> 
> 时间：2013-01-21T01:16:17.720
> 
> 标签：javascript, jquery

我有一个应用程序，其中多个并发 ajax 请求被发送到我的 nodeJS 后端服务器。呼叫连续快速发出，收到数据后立即再次发出。

我并不是说所有的 JS 都被阻止了，请查看屏幕截图（右下角）以了解我所指的内容。

![在此处输入图像描述](../Images/1d782b4dc7dda3993c47a4c2acb27cd9.png)

有人可以向我解释一下这个阻塞是什么，如果周围有的话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:44:44.740

有浏览器连接限制，但大多数现代浏览器都是[6+ 并发连接，](http://www.browserscope.org/?category=network)看起来它在服务器端被阻止了。这个请求是否相当占用 CPU 资源？如果是这样，Node 可能会阻止请求，因为它是单线程的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:32:35.443

您的浏览器可能会限制同时连接到服务器的数量。

PS。

> 但是，与服务器建立太多连接被认为是不礼貌的行为，可能会导致您被禁止访问该服务器。任何超过 10 的都是过度的。
> - *mozillaZine : [Network.http.max-persistent-connections-per-server](http://kb.mozillazine.org/Network.http.max-persistent-connections-per-server)* -

# c++ - 使用字符串分隔符标记/拆分字符串的最简单方法？

> ID：14431276
> 
> 赞同：0
> 
> 时间：2013-01-21T01:18:40.037
> 
> 标签：c++, parsing, boost, split, token

好的，我承认字符串操作在 C++ 方面从来都不是我的强项，尽管我在各种情况下仅通过使用 Boost 就取得了相当大的成功，但我仍然遇到一些问题。

所以，这就是我需要的（这个例子很精确）......

* * *

**输入是：**

`position fen <arg_a1> <arg_a2> ... <arg_aN> moves <arg_b1> <arg_b2> ... <arg_bN>`

（好吧，对于那些熟悉该主题的人来说，这是UCI协议的命令）

**我想做的就是：**

*   将`<arg_a1> <arg_a2> ... <arg_aN>`（包括空格）放入一个字符串（即和之间的字符串`position`）`moves`
*   也`<arg_b1> <arg_b2> ... <arg_bN>`进入另一个字符串（即从`moves`直到结束的字符串）。

* * *

我玩了很多，`Boost::split`但显然这很像`strtok`（接受*字符*而*不是字符串*分隔符）。

我该怎么做呢？解决这个特定问题的最简单方法是什么，而不需要我重新发明轮子（我倾向于这样做......经常......哈哈）？

***提示：**显然我可以做到。但我现在能想到的都是丑陋的。我正在寻找的是一种 C++ 友好的方式......*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:40:36.670

**这是解决方案**（带有一些数字技巧）：

```
 // where are 'fen' and 'moves' within the initial string?
    int fenPos = input.find("fen");
    int movesPos = input.find("moves");

    // get the exact string but taking into account the position of our initial tokens
    // as well as their length (e.g. fenPos.length()+1 = 4, etc)
    string fen = input.substr(fenPos+4,movesPos-fenPos-5);
    string moves = input.substr(movesPos+6); 
```

所以对于输入：

`"position fen rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 moves f2f3 e7e6 g2g4"`，这将返回：

```
fen   = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"
moves = "f2f3 e7e6 g2g4" 
```

# perl - 是否有“官方”CPAN 规范文件？

> ID：14431277
> 
> 赞同：4
> 
> 时间：2013-01-21T01:18:52.383
> 
> 标签：perl, cpan

是否有权威的和/或事实上的文件详细说明 CPAN 的工作原理，足够详细，以至于任何人都可以使用它从头开始重建 CPAN，而无需依赖口头传统和传闻？记录目录结构、应该在分发中的文件、版本号如何真正工作、谁可以上传什么以及在 search.CPAN.org 网站上列出的确切内容等的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T01:27:57.737

CPAN 只不过是一个镜像文件存储库。使用 PAUSE 上传文件。[*关于 PAUSE*](http://pause.perl.org/pause/query?ACTION=pause_04about)可以回答您的大部分问题（如果不是全部的话）。

您还提到了 search.cpan.org，但这不是 CPAN 的一部分。它只是访问 CPAN 的众多工具之一。网站[https://metacpan.org/](https://metacpan.org/)和命令行工具`cpan`等等`cpanm`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:57:07.113

你的问题涉及很多不同的事情......

“A”CPAN 只是一个具有一定结构和一些特殊文件的目录。结构和文件格式没有正式定义，但相当简单。有几个模块（主要在 CPAN:: 命名空间中）可以为您创建这些文件。最重要的文件是[modules/02packages.details.txt.gz](http://cpan.perl.org/modules/02packages.details.txt.gz)文件（又名“索引”），它将模块名称映射到包含它们的分发档案的路径。假设索引中的路径是相对于[authors/id](http://cpan.perl.org/authors/id)目录的。差不多就是这样。其他文件，如[authors/01mailrc.txt.gz](http://cpan.perl.org/authors/01mailrc.txt.gz)和[modules/03modlist.data.gz](http://cpan.perl.org/modules/03modlist.data.gz)必须存在并具有“有效”格式，但不需要其中包含任何真实数据——它们对于模块安装程序的基本操作不是必需的。

“The”CPAN 是一个中央 CPAN，社区在其中共享他们的发行版。[作者可以通过PAUSE](http://pause.perl.org)将他们的工作放入“CPAN”中， PAUSE执行分析分布和生成索引的工作。[About](http://pause.perl.org/pause/query?ACTION=pause_04about)页面描述了 PAUSE 如何在高层次上工作。“The”CPAN 实际上被镜像到几个不同的位置，因此您可以将安装程序指向其中的任何一个。您也可以轻松[创建自己的镜像](http://www.cpan.org/misc/how-to-mirror.html)。 [search.cpan.org](http://search.cpan.org)和[metacpan](http://metacpan.org)是建立在“the”CPAN 之上的搜索和浏览服务。因此，如果您将分发上传到 PAUSE，它（最终）也会出现在这些网站上。

但是，您实际进行分发的方式要复杂一些。同样，对于分布应该是什么样子没有正式的定义。PAUSE 实际上会接受任何东西，并且会非常努力地理解它。但几乎所有作者都使用像[Module::Build](http://metacpan.org/module/Module%3a%3aBuild)或[ExtUtils::MakeMaker](http://metacpan.org/module/ExtUtils%3a%3aMakeMaker)这样的工具来完成大部分工作。这些工具将规定组织代码的约定，并可以生成帮助 PAUSE 和其他系统了解您的分发的文件。在更高的层次上，[Module::Starter](http://metacpan.org/module/Module%3a%3aStarter)和[Dist::Zilla](http://metacpan.org/module/Dist%3a%3aZilla)等工具将为您生成更多的基础设施。你不必**使用**它们中的任何一个，但你**应该使用**至少其中之一。

如果您的目标是使用您选择的发行版构建您自己的 CPAN（可能是您自己的专有模块以及来自“CPAN”的一些开源模块），那么[Pinto](http://metacpan.org/module/Pinto)可能就是您正在寻找的。Pinto 将使用您想要的任何发行版构建一个类似 CPAN 的本地存储库。Pinto 知道如何处理依赖项并从上游存储库（通常是“CPAN”）获取它们。Pinto 有一些工具可以帮助您随着依赖项的发展而管理变更。而且它与现有的 Perl 模块安装程序完全兼容，因此您所要做的就是将它们“指向”您的本地存储库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:36:29.597

有各种项目，例如 MyCPAN、Pinto 和 StratoPAN，它们使用 PAUSE 提供的和客户期望的索引文件创建类似于 CPAN 的存储库。你想达到什么目的？

# java - 终端和 Eclipse 以不同方式显示 \n0000

> ID：14431284
> 
> 赞同：1
> 
> 时间：2013-01-21T01:20:35.443
> 
> 标签：java, printing, null, char

用图片很容易解释，用文字很难做到： [1](http://i.imgur.com/0SvwLwg.png) [2](http://i.imgur.com/iPVpp0S.png)

如您所见，在终端中，打印工作正常。在eclipse中，如果前面的打印值为`null`

具体代码：

```
for(int colIndex = 0; colIndex<COL; colIndex++)
{
    System.out.print(" "+board[rowIndex][colIndex]+" ");
    System.out.print("|");
} 
```

# validation - 如何在 C# 中验证 XML 文件，我的代码中有一个 XMLDocument 实例，但我不想使用 XMLReader？

> ID：14431285
> 
> 赞同：0
> 
> 时间：2013-01-21T01:20:52.017
> 
> 标签：validation, object, xsd, xmldocument

我的代码中已经有一个 XMLDocument 对象，我想验证该对象。我有 XSD 文件。我找到了一种使用 xmlreader 验证它的方法，但我没有在代码中的任何地方使用 Xml Reader。我准备好了一个 XMLDocument 实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:40:49.147

您可以像这样使用 XmlDocument 对象上的 schemas 属性来添加 xsd。

```
xmlDoc.Schemas.Add(namespace, xsdFileName); 
```

然后您可以加载您的 xml 文件，然后调用 Validate 方法，向它传递一个 ValidationEventHandler ，就像这样。

```
xmlDoc.Load(xmlfileName);
xmlDoc.Validate(handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:16:22.057

XmlDocument xmlDoc = new XmlDocument(); xmlDoc.Schemas.Add("http://www.w3.org/2001/XMLSchema", "fileName.xsd"); ValidationEventHandler validationEventHandler = new System.Xml.Schema.ValidationEventHandler(ValidationEVentHandler); xmlDoc.Load("fileName.xml"); xmlDoc.Validate(validationEventHandler);

公共无效ValidationEventHandler（对象发件人，ValidationEventArgs e）{开关（e.Severity）{案例XmlSeverityType.Error：lblLabel.Text = e.Message；休息; 案例 XmlSeverityType.Warning: lblLabel.Text = e.Message; 休息; } }

# c# - 我如何重写此代码以避免“Linq to entity doesn't identify method”错误

> ID：14431288
> 
> 赞同：2
> 
> 时间：2013-01-21T01:21:53.847
> 
> 标签：c#, .net, entity-framework-4, linq-to-entities

我在 MVC 4 Web API 控制器上有以下方法。

```
public JsonResult GetJourney(List<string> assetIds, DateTime start, DateTime finish)
{
    var journey = new List<JourneyPoint>();

    var startUTC = start.ToUniversalTime();
    var finishUTC = finish.ToUniversalTime();

    foreach (var assetId in assetIds)
    {
        string id = assetId;

        var events = _eventRepo.GetAll().Where(evt => evt.EventTypeId == 0 && evt.TimeStamp > startUTC && evt.TimeStamp < finishUTC && evt.AssetId == id);

        foreach (var @event in events)
        {
            var myGps = _gpsRepo.GetAll().FirstOrDefault(gps => gps.Id == @event.GPSId);

            if (myGps != null)
            {
                var myJourneyPoint = new JourneyPoint
                {
                    Id = @event.Id,
                    AssetId = @event.AssetId,
                    TimeStamp = @event.TimeStamp.ToUnixEpocSeconds(),
                    Lat = myGps.Lat,
                    Long = myGps.Long,
                    Speed = myGps.Speed,
                    Elevation = myGps.Elevation,
                    Heading = myGps.Head
                };
                journey.Add(myJourneyPoint);
            }
        }
    }

    var jsonJourney = Json(journey.OrderBy(ju => ju.TimeStamp).ToList());
    jsonJourney.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
    return jsonJourney;
} 
```

使用回购方法：

```
public IQueryable<Event> GetAll()
{
    var db = new CasLogEntities();
    return db.Event;
}

public IQueryable<GPS> GetAll()
{
    var db = new CasLogEntities();
    return db.GPS;
} 
```

这一切都很好，并且使用存储库允许我为控制器代码编写一个测试套件。

尽管我怀疑这段代码效率低下，因为对数据库有多次调用，并且很多计算工作是由 .Net 而不是 sql server 完成的。

Re-sharper 建议我可以将 for each 循环转换为 linq 语句，我这样做并最终得到以下代码。

```
public JsonResult GetJourney(List<string> assetIds, DateTime start, DateTime finish)
{
    var journey = new List<JourneyPoint>();

    var startUTC = start.ToUniversalTime();
    var finishUTC = finish.ToUniversalTime();

    foreach (var assetId in assetIds)
    {
        string id = assetId;

        var events = _eventRepo.GetAll().Where(evt => evt.EventTypeId == 0 && evt.TimeStamp > startUTC && evt.TimeStamp < finishUTC && evt.AssetId == id);

        journey.AddRange(from @event in events
                         let myGps = _gpsRepo.GetAll().FirstOrDefault(gps => gps.Id == @event.GPSId)
                         where myGps != null
                         select new JourneyPoint
                         {
                             Id = @event.Id,
                             AssetId = @event.AssetId,
                             TimeStamp = @event.TimeStamp.ToUnixEpocSeconds(),
                             Lat = myGps.Lat,
                             Long = myGps.Long,
                             Speed = myGps.Speed,
                             Elevation = myGps.Elevation,
                             Heading = myGps.Head
                         });
    }

    var jsonJourney = Json(journey.OrderBy(ju => ju.TimeStamp).ToList());
    jsonJourney.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
    return jsonJourney;
} 
```

但是，当我运行此代码时出现错误：

> LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[CasWeb.Models.DataContext.GPS] GetAll()' 方法，并且此方法无法转换为存储表达式。

我知道这是因为 LINQ To Entities 试图将“GetAll()”方法映射到 sql，但它不能。

我的问题是：如何重写我的代码以避免此错误并让 SQL 服务器执行尽可能多的工作？如果可能的话，维护存储库模式以允许测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:53:42.620

正如@Rup 在评论中建议的那样，以下应该避免错误。

```
 journey.AddRange(from @event in events
                 join gps in _gpsRepo.GetAll() on gps.Id == @event.GPSId
                 select new JourneyPoint
                 {
                     Id = @event.Id,
                     AssetId = @event.AssetId,
                     TimeStamp = @event.TimeStamp.ToUnixEpocSeconds(),
                     Lat = gps.Lat,
                     Long = gps.Long,
                     Speed = gps.Speed,
                     Elevation = gps.Elevation,
                     Heading = gps.Head
                 }); 
```

# html - 计时器而不是鼠标事件

> ID：14431289
> 
> 赞同：0
> 
> 时间：2013-01-21T01:21:57.827
> 
> 标签：html, function, timer, mouseevent, containers

> **可能重复：**
> [如何在 javascript 中设置计时器](https://stackoverflow.com/questions/460474/how-to-set-a-timer-in-javascript)

我在我的网站上添加了一个容器。容器是一个小窗体，在单击或悬停等鼠标事件中出现和消失。如何使用计时器控制其行为？例如，如果出现一个小框，我可以让它在 5 秒后自动隐藏而不是点击它吗？

这是我想用计时器控制的功能：

```
<script type="text/javascript">
$(document).ready(function(){
$(".button-slide").click(function(){
$(".feedback").slideToggle("slow");
return false;
});
});
</script> 
```

# android - 无法将文件 /dbfdata/database/com.test.myapp/shared_prefs/cpShared.xml 重命名为 cpChared.bak

> ID：14431292
> 
> 赞同：1
> 
> 时间：2013-01-21T01:22:19.807
> 
> 标签：android

此错误的原因是什么，如何解决？

```
Could not rename file /dbfdata/database/com.test.myapp/shared_prefs/cpShared.xml to cpChared.bak 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T14:49:22.250

我怀疑你使用`java.io.File.renameTo`.

如果是，它会失败，因为您尝试写入您没有写入权限的当前目录。为避免这种情况，您必须指定完整的目标路径：`/dbfdata/database/com.test.myapp/shared_prefs/cpChared.bak`

# ruby - 修改 ruby 代码以使用 Postgresql

> ID：14431293
> 
> 赞同：0
> 
> 时间：2013-01-21T01:22:20.933
> 
> 标签：ruby, postgresql, sqlite, pg

我以前使用 sqlite3 作为我的 ruby​​ 代码，它适用于以下代码

```
def existsCheck( db, id )
    temp = db.exec( 'SELECT 1 WHERE EXISTS(
        SELECT 1
        FROM Products
        WHERE promoID = ?
    ) ', [id] ).length > 0
end

def writeDB( db, product )
    db.exec( 'INSERT INTO Products ( promoID, name, price, shipping, condition, grade, included, not_included, image, time_added )
                        VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', [product.promoID, product.name, product.price, product.shipping, product.condition, product.grade, product.included, product.notIncluded, product.image, product.time] )
end 
```

Postgresql 不支持“？”的想法？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:52:53.970

来自[精美`PG::Connection`手册](http://rubydoc.info/gems/pg/PG/Connection%3aexec)：

> `- (PG::Result) exec(sql[, params, result_format ])`
> `- (Object) exec(sql[, params, result_format ]) {|pg_result| ... }`
> [...]
> PostgreSQL 绑定参数在 SQL 查询中表示为`$1`、`$1`、`$2`等。params 数组的第 0 个元素绑定到`$1`，第一个元素绑定到`$2`，依此`nil`类推`NULL`。

所以你想在 PostgreSQL 中使用编号占位符：

```
def existsCheck( db, id )
    temp = db.exec( 'SELECT 1 WHERE EXISTS(
        SELECT 1
        FROM Products
        WHERE promoID = $1
    ) ', [id] ).to_a.length > 0
    # You'll also need to .to_a the result before you can
    # treat it as an array...
end 
```

# excel - 在excel 2010上格式化日期

> ID：14431295
> 
> 赞同：0
> 
> 时间：2013-01-21T01:22:23.043
> 
> 标签：excel, csv

有谁知道如何将此字符串 20.01.2012 09:30:11 转换为 excel 日期 01/20/2012 09:30:11。尝试使用“文本到列”工具，如果字符串不包含时间（hh：mm：ss）部分，则成功。任何人都可以帮助提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:31:18.570

选择有问题的单元格并进行查找和替换...

寻找 。代替 /

我对其进行了测试，并且效果很好:)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:57:14.997

**正式方式**

您可以使用以下公式将其转换为：

```
=日期（中（A1,7,4），中（A1,4,2），左（A1,2））+时间（中（A1,13,2），中（A1,16,2），右(A1,2))

```

此公式提取所有位（天、月等）并从中构造日期和时间。

**手动方式**

如果您临时将 Windows 的区域设置中的日期格式更改为要导入的格式（在本例中为德语），Excel 会将其理解为正确的日期：

1.  更改日期格式
2.  打开 Excel 并粘贴您的日期
3.  保存并关闭 Excel
4.  改回日期格式
5.  重新打开 Excel 文件

# vba - 使这段代码更简单

> ID：14431303
> 
> 赞同：-5
> 
> 时间：2013-01-21T01:23:38.807
> 
> 标签：vba, excel

我有这个代码，从宏记录。我必须一次又一次地复制代码以完成该过程。

请帮我做一个循环，直到过程完成。

```
Sub Macro1()

    Sheets("Sheet1").Select
    Range("D2:E2").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("ALB1").Select
    Range("C1").Select
    ActiveSheet.Paste
    Sheets("Sheet1").Select
    Range("D3:E3").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("ALB2").Select
    Range("C1").Select
    ActiveSheet.Paste
    '
    '
    '
    '
    Sheets("Sheet1").Select
    Range("D127:E127").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("ALB126").Select
    Range("C1").Select
    ActiveSheet.Paste

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:43:19.960

像这样的东西：

```
Sub Macro1()
  Dim Sh1 As WorkSheet, Sh2 As WorkSheet
  Set Sh1 = Sheets("Sheet1")
  Set Sh2 = Sheets("ALB1")

  Dim R As Long
  For R = 2 to 127
    Sh1.Range("D" & R & ":E" & R).Copy Sh2.Range("C" & R - 1)
  Next R
End Sub 
```

甚至更好：

```
Sheets("ALB1").Range("C1:D126") = "=Sheet1!D2" 
```

将适用于范围的第一个单元格的公式分配给整个范围相当于在第一个单元格上键入公式并向右和向下复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:47:47.690

最后我在这里找到了我的问题的解决方案

```
Sub Check_After()
Dim Sh1 As Worksheet, Sh2 As Worksheet
Dim lCount As Long
Dim lCountA As Long
Dim lCountB As Long
Dim lNum As Long

lCount = 0
lCountA = 2
lCountB = 1

lNum = 127
Set Sh1 = Sheets("Sheet1")
Set Sh2 = Sheets("ALB" & lCountB)
Do
    Set Sh2 = Sheets("ALB" & lCountB)
    Sh1.Range("D" & lCountA & ":E" & lCountA).Copy Sh2.Range("C1")

    lNum = lNum - 1
    lCount = lCount + 1

    lCountA = lCountA + 1
    lCountB = lCountB + 1

Loop Until lNum = 1
MsgBox "The Do Until loop made " & lCount & " loop(s)." 
```

结束子

# svn - Netbeans RapidSVN 和存储库

> ID：14431304
> 
> 赞同：0
> 
> 时间：2013-01-21T01:23:39.417
> 
> 标签：svn, netbeans, version-control, rapidsvn

我有一个包含所有目录结构等的 Netbeans 项目。我将我的 Netbeans 项目导入了一个在线存储库。以上都是用windows pc完成的。

现在，使用 Ubuntu 和 RapidSVN（一个 GUI svn 客户端），我将我的存储库检出到 NetBeansProjects 目录。

当我加载 NetBeans 时，我得到一个类未找到异常说：

```
A java.lang.NoClassDefFoundError exception has occurred.
However, the system should continue working without further problems.
Click Show Details for the stack trace. 
```

以下是详细信息：

```
java.lang.ClassNotFoundException: org.tigris.subversion.javahl.SVNClientInterface
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
        ...
        ... 
```

所以，我现在可以查看我的所有文件并进行编辑。但是，每当我进行更改然后测试并运行我的程序时，它似乎总是运行加载到存储库中的版本。

同样，它似乎没有保存我的任何更改。当我关闭并打开 Netbeans 时，我刚刚从存储库编辑的项目不会出现在左侧的项目面板中。

1.  如何让 Netbeans 将其保留为项目并保存更改？
2.  我使用 RapidSVN 错了吗？
3.  我使用我的存储库错误吗？

如果您有任何其他建议或需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:31:20.243

您使用什么版本的 NetBeans 和 RapidSvn？服务器上运行的是什么版本的 Subversion？NetBeans 7 支持 SVN 1.7，而 RapidSVN 不是最新的。

进行更改后，请执行*提交*，以便将当前文件上传到 SVN。

以下是您可以尝试的一些事情：

*   使用 NetBeans 检查您的 ( **`Team -> Subversion -> Checkout`**)
*   使用 NB进行*提交*，如果这不起作用进行*更新*（NB 也是）
*   你有写目录的权限吗？如果您将 RapidSVN 运行为*sudo*有什么不同吗？
*   在 NB: **`Tools -> Options -> Miscellaneous -> Versioning -> Subversion`**: *Prefered Client*中检查这些设置（你有什么？如果尚未设置：尝试使用*SvnKit*）

如果一切都失败了，请查看以下（免费）备用客户端：

*   [SmartSVN](http://www.smartsvn.com/) (Linux / 赢)
*   [TortoiseSVN](http://tortoisesvn.net/)（仅限 Win）
*   [eSvn](http://zoneit.free.fr/esvn/) (Linux / Win)

请参阅：[NetBeans 常见问题解答 - SVN 客户端](http://wiki.netbeans.org/FaqSubversionClients)

# c - 带有 AVR Studio 6 的 Procyon 库

> ID：14431311
> 
> 赞同：2
> 
> 时间：2013-01-21T01:25:06.147
> 
> 标签：c, avr, avr-gcc

我在使用带有 AVR Studio 6 的 Procyon 库时遇到问题。现在我正在尝试使用 timer.h 库。

我已将 Procyon 文件作为目录包含在 AVRProject Properties/toolchain/Compiler/Directories 中。

所以我有一个项目，我包括 timer.h 和 global.h 文件。由于执行上述步骤，有关丢失包含文件的错误已停止。

现在我发现编译器无法识别 timer.h 中的任何函数，即`setPWMAon()`等。

有谁知道为什么会这样？是否有教程显示成功设置和使用 AVR Studio 6 的 Procyon 库？

**编辑：**我还尝试单独包含头文件并将它们放在文件路径中。但是后来我得到了一堆关于库中宏的错误，说它们被毒化了。以及一些未定义的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:03:10.553

您是否尝试过将包含要使用的头文件的目录添加到项目目录中，然后像这样将其调用到您的程序中？

```
#include "(name_of_dir_with_header_files)/timer.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T18:15:28.440

我对计时器库也有问题我认为这些库与 Atmel studio 6 不兼容我对由 MR.Pascal 编写的 LCD 库有同样的问题所以我更改了库并且它工作正常我建议你更改计时器图书馆如果你找到了图书馆，请告诉我们我也在搜索

# preg-match-all - preg_match_all 和多种语言

> ID：14431320
> 
> 赞同：0
> 
> 时间：2013-01-21T01:26:56.100
> 
> 标签：preg-match-all, multilingual

我有以下代码。

```
$pattern = '~[a-z0-9]+~';
preg_match_all($pattern, "some text from a website", $array); 
```

哪个适用于 en - The English Language 或 USA American Engish，但**我如何使它适用于所有其他语言**？我从 html 中检测到了追逐和语言。

编辑：我想我必须使用[http://php.net/manual/en/regexp.reference.unicode.php](http://php.net/manual/en/regexp.reference.unicode.php) - [http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

任何人都知道我如何使用 Unicode 正则表达式在任何语言中匹配 (a-z0-9) 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:59:19.003

答案是使用代码正则表达式以任何语言表示 [a-z0-9] 的模式是：

```
$pattern = '~[\p{L}\p{Nd}]+~'; 
```

这里非常有用的文章：[http ://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

# iphone - UIWebView 中的 Google API ClientID 和 HTML

> ID：14431321
> 
> 赞同：1
> 
> 时间：2013-01-21T01:27:36.193
> 
> 标签：iphone, api, uiwebview

我正在开发一个 webapp`HTML`并将其加载到一个简单`iphone app`的`UIWebview`. 这部分工作得很好，但我使用的是 Goo.gl URL Shortener API，而且是 Google API，为了获取客户端 ID，需要指定授权`Javascript`来源，但我不知道我必须输入什么.

我试过了，没用`"http://localhost"`，API 没有加载。我也尝试使用 IOS 应用程序类型，输入我的应用程序包 ID，但它也不起作用。

有人可以帮我吗？

# facebook - Facebook 视频上传公共视频问题

> ID：14431327
> 
> 赞同：2
> 
> 时间：2013-01-21T01:28:09.983
> 
> 标签：facebook, video, facebook-ios-sdk

我从我的 iOS 应用程序上传视频取得了一些成功。我能够确认 publish_action 权限并处理上传。

```
ACFacebookPermissionsKey : @[@"email", @"user_videos", @"publish_actions"],
ACFacebookAudienceKey:ACFacebookAudienceEveryone}; 
```

成功上传后，我收到来自 Facebook API 的带有 video_id 的响应。由于它是公共视频，因此我将其存储在 dB 中以供以后访问。那么，当我检查返回的 video_ids 时 - 它们看起来不同吗？

通过我的应用上传的视频（登录，公开）的 ID 类似于：**4239462546398** 通过 Facebook 应用上传的视频（登录，公开）的 ID 类似于：**10150495056083275**

因此，无论我是否登录 FB，我都可以使用以下 URL 访问 Facebook 应用程序视频上传：http: *//www.facebook.com/video/video.php?v=10150495056083275*

我无法使用 Facebook 创建的 video_id 访问通过我的 iOS 应用上传的视频：http: *//www.facebook.com/video/video.php?v= 4239462546398*

我需要知道我在上传视频时做错了什么？即使我将其设置为公开等...我似乎看不到我的视频？？？？

关于我的环境的一些细节：

*   为 iOS 6 构建

*   使用 iOS 6 FB 集成

*   使用 SLRequest 上传视频（成功请求/响应）

如果有帮助（并且有效），这是我的视频帖子代码

```
- (void) uploadFBVideo2:(NSURL*) filePath
{
      ANVideoMashManager *videoMashManager = [ANVideoMashManager sharedManager];

      NSURL *videourl = [NSURL URLWithString:@"https://graph.facebook.com/me/videos"];
      NSData *videoData = [NSData dataWithContentsOfURL:filePath];

      NSDictionary *params = @{
        @"title": videoMashManager.videoStoryTitle,
        @"description": videoMashManager.videoDescTitle
      };

      SLRequest *uploadRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                              requestMethod:SLRequestMethodPOST
                                                        URL:videourl
                                                 parameters:params];
      [uploadRequest addMultipartData:videoData
                       withName:@"video"
                           type:@"video/mov"
                       filename:[filePath absoluteString]];

      uploadRequest.account = facebooAccount;

     [uploadRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
     NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
     if(error){
         NSLog(@"Video Upload ERROR: %@", error.localizedDescription);

     }else{
         NSLog(@"Video Upload SUCCESS: %@", responseString);
         NSDictionary* jsonResponse = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
         NSString *videoId = [jsonResponse objectForKey:@"id"];

     }

     }];
} 
```

# java - 如何为片段实现 OnSelectedItemListener？

> ID：14431329
> 
> 赞同：1
> 
> 时间：2013-01-21T01:28:26.803
> 
> 标签：java, android, android-widget, android-fragments, android-spinner

我有一个 2 的应用程序`Fragments`。其中之一`Fragments`有 2 `Spinners`。用户在第一个中选择一个值，`Spinner`然后`Adapter etc`为第二个设置`Spinner`。问题是`onSelectedItem`事件永远不会被触发。这是我的代码（为简洁起见，删除了不相关的代码）。

```
public class RadarSelectionFragment extends Fragment implements AdapterView.OnItemSelectedListener {
    //Have also tried just plain OnItemSelectedListener

    public static final String ARG_SECTION_NUMBER = "section_number";

    public RadarSelectionFragment() {
    }

    @Override
    public final View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (getArguments().getInt(ARG_SECTION_NUMBER) == 1) {
            return inflater.inflate(R.layout.radars, container, false);
        } else {
            return container;
        }
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Spinner s = (Spinner) findViewById(R.id.stateselector);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity().getApplicationContext(), R.array.states, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(adapter);
                    //I have tried setting the onItemSelectedListener(this) here, but it shows up in Eclipse as not being valid.
    }

    public void onViewCreated() {

    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
        Toast.makeText(getActivity().getApplicationContext(), "onItemSelected() Triggered", 1).show();
        Spinner s = (Spinner) findViewById(R.id.stateselector);
        Spinner r = (Spinner) findViewById(R.id.townselector);
        ArrayAdapter<CharSequence> radapter;
        int selectedstate = 1;

        if (s.getItemAtPosition(pos).toString() == "New South Wales") {
            selectedstate = 1;
        } else if (s.getItemAtPosition(pos).toString() == "Victoria") {
            selectedstate = 2;
        } else if (s.getItemAtPosition(pos).toString() == "Queensland") {
            selectedstate = 3;
        } else ...

        switch (selectedstate) {
            case 1:
                radapter = ArrayAdapter.createFromResource(getActivity().getApplicationContext(), R.array.states, android.R.layout.simple_spinner_item);
                radapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                r.setAdapter(radapter);
                break;
            case 2:
                radapter = ArrayAdapter.createFromResource(getActivity().getApplicationContext(), R.array.states, android.R.layout.simple_spinner_item);
                radapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                r.setAdapter(radapter);
                break;

            ...
        }
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
} 
```

# php - 连接到远程 mysql 服务器（drupal）

> ID：14431331
> 
> 赞同：2
> 
> 时间：2013-01-21T01:28:33.213
> 
> 标签：php, mysql, cisco

我想在我开发的drupal网站上连接ip地址为192.168.1.104的mysql服务器，而我的开发机器ip为10.0.0.2，计算机之间有一个cisco路由器，192.168.1.104正在连接一个正在连接的板带路由器cisco 路由器，而 10.0.0.2 直接连接到 cisco 路由器。我已经在 cisco 路由器上设置了一个访问列表，它允许源 192.168.1.104:3306 到端口 3306 上的目标 10.0.0.2。

```
 $databases = array (
      'default' => 
      array (
        'default' => 
        array (
          'database' => 'dbname',
          'username' => 'root',
          'password' => 'password',
          'host' => 'domainname.no-ip.com',
          'port' => '3306',
          'driver' => 'mysql',
          'prefix' => '',
        ),
      )
); 
```

首先，
1.可以远程连接数据库吗？
2\. 使用root作为用户名怎么样？有什么问题吗？
3.我可以使用本地局域网ip连接mysql服务器吗？有网络问题吗？

我测试过，有错误

> 致命错误：第 304 行的 C:\xampp\htdocs\folder\includes\database\database.inc 中的最大执行时间超过 30 秒

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:51:56.183

**1\. 可以远程连接数据库吗？** 是的，只需在您的 PHP 连接字符串中指定远程 IP（在您的情况下为 192.168.1.104）作为您的主机。

**2\. 使用root作为用户名怎么样？有什么问题吗？** 没问题，但一个愚蠢的想法。在您的 MySQL 服务器上添加一个新用户，称为您喜欢的任何名称（我通常使用“appname_remote”）并将该用户的主机设置为允许从 10.0.0.2 开始。这将允许您的开发机器通过该用户远程联系您的 mysql 服务器，但没有其他机器（即使他们知道凭据）。这种访问限制更加安全。

**3.我可以使用本地局域网ip连接mysql服务器吗？有网络问题吗？** 您正在跨不同的子网路由，即 10.0.0 和 193.168.1 范围。由于您在整个批次之间有一个 Cisco 路由器，因此您必须配置 Cisco 以允许子网之间的路由。测试它是否已经打开的最简单方法是尝试从一台机器对另一台机器执行 ping 操作。如果您收到 ping 响应，则启用路由。如果没有，那么你就进入思科的路由协议（在那里玩得开心:)）

3) 很可能是问题的全部原因。

# java - Java Swing 中的错误 PNG 渲染（低颜色深度）

> ID：14431339
> 
> 赞同：3
> 
> 时间：2013-01-21T01:29:16.023
> 
> 标签：java, image, swing, png

我目前正在使用 swing 用 java 设计吃豆人。我有使用以下语句在屏幕上绘制的 PNG 图像。

```
wall = new ImageIcon(GamePanel.class.getResource("wall.png")).getImage();
g2d.drawImage(wall, x, y, this); 
```

* * *

我遇到的问题是它似乎渲染了实际文件的非常低的颜色深度再现。看起来它确实保留了透明度（灰色背景是 Panel bg 颜色），但它失去了颜色深度。

实际图像如下所示：![在此处输入图像描述](../Images/1bbbb18e57122ce6d7194aef77f1846e.png) 运行时，如下所示：![在此处输入图像描述](../Images/d3e34a50b582375ca2269c7959661325.png)

有没有人有办法解决吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:15:19.573

在第二张图片中似乎肯定有问题。在黑色 BG 上看到它，它看起来非常不同 - 没有“光环”。

![测试黄点图像](../Images/23c27abdfa1861a47815aebb305e7e5a.png)

```
import java.awt.*;
import java.net.URL;
import javax.swing.*;

public class TestYellowDotImage {

    public static JLabel getColoredLabel(Icon icon, Color color) {
        JLabel label = new JLabel(icon);
        label.setBackground(color);
        label.setOpaque(true);

        return label;
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/1EZVZ.png");
        final Icon icon = new ImageIcon(url);
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(0, 4));

                gui.add(new JLabel(icon));
                gui.add(getColoredLabel(icon, Color.BLACK));
                gui.add(getColoredLabel(icon, Color.WHITE));
                gui.add(getColoredLabel(icon, Color.RED));

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T01:31:56.620

试试这个设置`g2d`：-

```
 Map<RenderingHints.Key, Object> map = new HashMap<RenderingHints.Key, Object>();
    map.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    map.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    map.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    RenderingHints renderHints = new RenderingHints(map);
    g2d.setRenderingHints(renderHints); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T03:16:35.280

使用[`Grid`](https://stackoverflow.com/a/2901472/230513)，您可以将鼠标悬停在像素上，以查看 alpha 分量如何在图标边缘滚动。

```
public Grid(String name) {
    this.setBackground(new Color(0xFFFFFFC0));
    Icon icon = null;
    try {
        icon = new ImageIcon(new URL("http://i.stack.imgur.com/1EZVZ.png"));
    } catch (MalformedURLException e) {
        e.printStackTrace(System.err);
    }
    ...
} 
```

![图片](../Images/a1e49e27350f56c618a7db4a100ae41b.png)

这`IconTest`显示了图标如何以不同的 alpha 和默认 `AlphaComposite.SRC_OVER`规则呈现。

![在此处输入图像描述](../Images/d384752ba388ad6d3cbb89d85b20c7fc.png)

```
/*** @see https://stackoverflow.com/a/14432025/230513 */
public class IconTest {

    private static final int N = 8;
    private static final Random r = new Random();

    public static void main(String[] args) throws MalformedURLException {
        final URL url = new URL("http://i.stack.imgur.com/1EZVZ.png");
        final Icon icon = new ImageIcon(url);
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("IconTest");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JPanel p = new JPanel(new GridLayout(N, N));
                for (int i = 0; i < N * N; i++) {
                    final JLabel label = new JLabel(icon);
                    label.setOpaque(true);
                    label.setBackground(new Color(0, 0, 255, i));
                    p.add(label);
                }
                f.add(p);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T05:12:42.750

解决了。在paint() 方法中使用了repaint()。删除它，它的工作原理。

感谢所有的帮助。

# android - 用xml持久化数据，如何实现一个xml阅读器？

> ID：14431340
> 
> 赞同：1
> 
> 时间：2013-01-21T01:29:18.747
> 
> 标签：android, xml, persistent-data

我正在尝试使用“内部存储”的方法来保留我的数据。在下面的代码中，我试图将 xml 写入存储。这是正确的方法吗？我正在尝试使用 fileInputStream 打开此文件，但我看到的该类的唯一读取函数是 .read() ，它显然一次读取一个字节的数据。这对于读取 xml 文件似乎很不方便。我应该如何最好地读/写我的数据？

```
 @Override
    protected void onDestroy() {
        super.onDestroy();
        try {
             FileOutputStream fos=openFileOutput(LOCALSTORAGEFILE,Context.MODE_PRIVATE);
             XmlCreator create=new XmlCreator();
             fos.write(create.subjectListToXml(subjectMasterList).getBytes());
             fos.close();

        } catch (IOException ex) {
            Logger.getLogger(MainActivity.class.getName()).log(Level.SEVERE, null, ex);     
        } 
```

* * *

```
public class XmlCreator {
    XmlSerializer serializer=Xml.newSerializer();
    StringWriter writer=new StringWriter();

    public String subjectListToXml(ArrayList<Subject> masterList){
        try{
            serializer.setOutput(writer);
            serializer.startDocument("UTF-8", true);
            serializer.startTag("", "subjects");
            serializer.attribute(null, null, null);
            for(Subject subject:masterList){
                serializer.endTag("","subject");
                for(Cards card:subject.getCards()){
                    serializer.startTag("","card");
                     serializer.startTag("","word");
                     serializer.text(card.getCardFront());
                     serializer.endTag("","word");
                    serializer.endTag("", "card");
                }
                serializer.endTag("", "subject");
            }
                serializer.endTag("","subjects");
                serializer.endDocument();

        }catch(Exception e){
            e.printStackTrace();
        }
        return writer.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:32:36.397

没有必要重新发明东西。考虑使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

如果您仍想使用您的 XML 格式并希望以正确的方式阅读它，这里有一些内容可以帮助您入门：

```
InputStream is = ...
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(is);
doc.getDocumentElement().normalize();
NodeList myTags = doc.getElementsByTagName("your_xml_tag"); 
```

我还强烈推荐 XML/JSON 库[Jackson](http://jackson.codehaus.org/)。它只需几行代码就可以读取和保存完整的对象。

# javascript - 通过数据过滤

> ID：14431345
> 
> 赞同：0
> 
> 时间：2013-01-21T01:30:13.053
> 
> 标签：javascript, dojo

我目前有一组我希望过滤的 json 数据，但是当我尝试过滤它时它不起作用并显示错误：' TypeError: 'undefined' is not a function '

这是一个片段：

```
load: function(data){
    for (var i = 0; i < data.length; i++) {
        var titlePane = new TitlePane({
            title: data[i].Name ,
            open: false,
            content: '<div>' + data[i].Summary  +   '</div>'
        });
        titlePane.placeAt(dom.byId('licenseContainer'));
        titlePane.filter({ Archived:true });
    }
 }, 
```

如您所见，我只想显示归档的 json 数据。

这是我的 json 数据的片段：

```
 [ {"Name":"james", "Archived":true, "Summary": "sfksfsd"}, {"Name":"kay", "Archived":false, "Summary": "sfksfsd"}, {"Name":"greg", "Archived":true, "Summary": "sfksfsd"}           ] 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:48:45.767

**编辑**更新功能来做我认为 OP 希望过滤方法为他做的事情。

`dom.byId`当我认为你真的想说`dojo.byId`你的函数实际上应该如下所示时，你调用了一个函数：

```
load: function(data){
    for (var i = 0; i < data.length; i++) {
        if (data[i].Archived) {
            var titlePane = new TitlePane({
                title: data[i].Name,
                open: false,
                content: '<div>' + data[i].Summary + '</div>'
            });
            titlePane.placeAt(dojo.byId('licenseContainer'));
        }
    }
} 
```

# android - onCreate in new Activity 无法显示

> ID：14431347
> 
> 赞同：0
> 
> 时间：2013-01-21T01:30:24.130
> 
> 标签：android

我在 MainActivity 中打开了一个 NewActivity。它可以很好地运行。但是NewActivity中没有布局。它只是显示白色。我不知道为什么。

我在 R.layout.activity_first 中编写布局。

MainActivity.java

```
package com.example.hello_2;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button=(Button)this.findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,NewActivity.class);
                startActivity(intent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

 } 
```

新活动.java

```
package com.example.hello_2;

import com.example.hello_2.NewActivity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.SubMenu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class NewActivity extends Activity{
    protected void onCreat(Bundle savedInstanceState1){
        super.onCreate(savedInstanceState1);
        setContentView(R.layout.activity_first);
        Log.d("NewActivity", "onCreat");
        }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        return super.onCreateOptionsMenu(menu);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:31:36.820

你拼错`onCreate()`了`onCreat()`

```
@Override
protected void onCreate(Bundle savedInstanceState1){
        super.onCreate(savedInstanceState1);
        setContentView(R.layout.activity_first);
        Log.d("NewActivity", "onCreat");
        } 
```

添加`e`. 考虑使用`@Override`注释，它对这类事情有**很大** [帮助。](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)

# c# - 在它自己的应用程序域中加载我的 C# 类库并在发生异常时卸载而不干扰第三方应用程序

> ID：14431349
> 
> 赞同：0
> 
> 时间：2013-01-21T01:30:42.167
> 
> 标签：c#

我正在使用 c# 类库创建插件，可以将其加载到第三方应用程序中，但我希望它在自己的应用程序域中加载并在我的代码中发生异常时卸载而不影响第三方应用程序进程

这是场景，我们有一个允许加载插件的第三方应用程序。我正在创建插件，可以将其加载到此第三方应用程序中。但是当它加载时，默认情况下它会加载到它自己的应用程序域中，但是我希望我的插件加载到它自己的应用程序域中，而不会在我的插件中发生异常时影响第三方进程..你能帮我解决实现上述要求的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:00:29.697

主机应用程序选择应用程序域来加载插件。如果您不控制主机应用程序，则无法控制您加载到的应用程序域。理论上，应用程序域是无关紧要的：对插件进行编码使得异常不会从类中冒出，并且您最终可能会得到更持久、设计更好的代码。

# c# - 在后台运行基于时间的函数

> ID：14431350
> 
> 赞同：0
> 
> 时间：2013-01-21T01:30:43.363
> 
> 标签：c#, function, time, timer

我确实有一个函数来更新我的 UI：目前我在我的 Action 函数中调用这个函数超过 8 次，这将更新我的 UI

```
 public void CheckStatus()
        {
             this.ovl_stacker1.FillColor =
             OvalShape == MEssage.EMPTY ? Color.Red :
                        OvalShape == Message.WARNING ? Color.Yellow : Color.Green;
            this.OvalShape .Refresh();
} 
```

我怎样才能让这个功能在我的主服务器上每 5 秒自动运行一次？（因为我不想多次调用其他函数中的函数）

这是我的动作函数

```
 public void Action()
{
//do something....
checkstatus();
//do something.......
checkstatus();
//do something........
checkstatus();
...
...
..
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:39:15.347

要每 5 秒调用一次方法，您可以使用计时器，但我认为这不是正确的解决方案。（虽然，要让计时器工作，您还需要让 UI 线程处于空闲状态，但您似乎不需要。）

相反，您应该`CheckStatus()`在实际更改状态时调用，最好是在相关属性的设置器中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:39:16.250

我想你会想使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)类

# java - 使用 supercsv 验证 CSV 标头

> ID：14431353
> 
> 赞同：1
> 
> 时间：2013-01-21T01:31:19.603
> 
> 标签：java, csv, supercsv

如何验证 CSV 文件的数据是否包含标题？我正在使用 supercsv 和 Java。我的 csv 文件包含；

ACCOUNT,NAME,PHONE (header) <--- 需要验证，所有的 headers 必须存在 Checking,John,1122222222 (data)

储蓄，卡尔，1234567891（数据）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T01:56:29.023

如果您事先不知道标头值是什么，则无法知道第一行是否是标头（它看起来就像另一条数据线）。

如果您*确实*知道标题值应该是什么，那么您可以简单地确保所有预期的列都在那里（只要它们在那里，顺序无关紧要）。

例如

```
List<String> expectedHeaders = Arrays.asList("ACCOUNT","NAME","PHONE");

String[] header = csvReader.getHeader(true);

if (!Arrays.asList(header).containsAll(expectedHeaders)){
    // not all headers present - handle appropriately 
    // (e.g. throw exception)
} 
```

# javascript - SVG 元素上的事件委托

> ID：14431361
> 
> 赞同：20
> 
> 时间：2013-01-21T01:31:44.160
> 
> 标签：javascript, jquery, svg

我正在尝试为要附加到 SVG 画布的所有元素创建一个通用的单击处理程序。但是我不能将处理程序委托给新创建的元素。

这是我试图委托的代码，但没有运气

```
$("#floor").on('click','.drawnLine', function() {
    //#floor is the SVG Element
    //.drawnLine is the <line> element that is added dynamically
    console.log($(this).data('index'));
}); 
```

**更新：** 在[`.on()`](http://api.jquery.com/on/)它的jQuery手册中提到

> **注意：**委托事件不适用于 SVG。

所以现在的问题是这个问题的任何其他解决方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T14:37:33.940

当 jQuery 使用 SVG 失败时，您可以使用 vanilla js。幸运的是，每个支持 svg 的浏览器也支持事件监听器。纯js委托事件没那么难看：

```
$("#floor")[0].addEventListener('click', function(e) {
  // do nothing if the target does not have the class drawnLine
  if (!e.target.classList.contains("drawnLine")) return;
  console.log($(this).data('index'));
}); 
```

但是您也可以创建自己的函数来更干净地委派您的事件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-17T14:35:16.813

**TL/DR：将事件侦听器附加到非 SVG 父元素。**

jQuery 文档中的注释有些误导。

> 委派事件不适用于 SVG。

应该是...

> ***当侦听器附加到***SVG时，委托事件不起作用。

当事件侦听器附加到 SVG 元素时，jQuery 的事件委托不起作用；但是，如果您将侦听器附加到 SVG 的非 SVG 父级，事件传播将按预期工作，并且任何匹配 SVG 元素的选择器确实会触发您的事件处理函数。

将侦听器附加到 SVG 元素将***不起作用***：

```
$("#floor").on('click','.drawnLine', function() {
    console.log($(this).data('index'));
}); 
```

但是将其附加到父元素将起作用：

```
$(document.body).on('click','#floor .drawnLine', function() {
    console.log($(this).data('index'));
}); 
```

Note: one quirk I've noticed is that if the event target is an SVG element, the event won't bubble up all the way to `document.body` on iOS. So if you want iOS users to be able to trigger your handler function you'll need to attach your event listener to some element in between (such as the `div` element your SVG resides in).

# php - 在保存到服务器 png/gif 之前将 DURING 上传转换为 jpg

> ID：14431363
> 
> 赞同：1
> 
> 时间：2013-01-21T01:32:15.623
> 
> 标签：php, image, jpeg, gd, imagemagick-convert

所以我有一个图片上传脚本。它上传图像并将其保存到服务器上的空间。我似乎无法理解的是，当用户上传 .png 时，当它保存在我的服务器上时，我希望它是 jpg。

任何人都可以帮助解决这个问题，请不要只是将我引向另一个问题，因为我还没有任何工作。这是我的代码示例。

```
$name = addslashes($_FILES['image']['name']);
$ext = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION); 
$size = $_FILES['image']['size'];
$temp = $_FILES ['image']['tmp_name'];
$error = $_FILES ['image']['error'];

if ($error > 0)
    die("Error uploading file! Code $error.");
else

if ($password == "" || $size > 2000000) {
    move_uploaded_file($temp, $images.$name);   
    mysql_query("INSERT INTO image_approval VALUES ('','$description','','$images$name','',NOW())");

    echo "Upload complete!";
    }else{
echo "Error uploading file";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:43:55.127

使用[GD](http://php.net/manual/en/function.imagejpeg.php)，并假设`$images`是您存储图像的目录（以斜线结尾），以及`$name`- 原始图像的文件名：

```
$destinationPath = $images . basename($name, $ext) . '.jpg';
$source = imagecreatefrompng($images . $name);
imagejpeg($source, $destinationPath, 75);
imagedestroy($source); 
```

或使用[Imagick](http://php.net/manual/en/imagick.writeimage.php)：

```
$image = new Imagick($images . $name);
$image->writeImage($destinationPath);
$image->destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:46:46.857

使用该函数转换上传的图片

```
// http://stackoverflow.com/a/1201823/358906
// Quality is a number between 0 (best compression) and 100 (best quality)
function png2jpg($originalFile, $outputFile, $quality) {
    $image = imagecreatefrompng($originalFile);
    imagejpeg($image, $outputFile, $quality);
    imagedestroy($image);
} 
```

然后删除旧图像`unlink()`。

您的代码将类似于：

```
// After the upload
png2jpg($the_jpg_file_path, $the_png_file_path, 80);
unlink($the_jpg_file_path); 
```

# matlab - 从 Windows 命令行向编译为 .exe 的 Matlab 函数提供输入参数

> ID：14431370
> 
> 赞同：2
> 
> 时间：2013-01-21T01:33:36.463
> 
> 标签：matlab, exe, command-prompt, input-parameters

嗨，我曾经`mcc`将 Matlab 函数转换为独立的 .exe。当我在 windows 命令提示符下运行 .exe 文件时，它返回以下错误：

1.  输入参数太多 // 当我给出两个输入时
2.  当我给出一个输入时，第一个参数应该有与输入变量一样多的列和独立的输入值集一样多的行。

我使用命令构建独立：“mcc -mv myfile.m -a datfile.fis”-----------构建过程正常。但是，当我在 Windows 提示符下使用此命令“myfile.exe 2.0 20.2”运行时，会出现上述错误。我的程序接受两个输入并给出一个输出。我已经在同一台计算机上运行 Matlab 教程 magicsquare.m 来转换 magicsquare.exe 并且工作正常有人可以帮忙吗？注意转换之前程序在matlab中运行良好我在MATLAB中给出如下输入

> > 我的文件（[2.0 20.2]）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:46:33.517

当您从 Windows/DOS 命令行运行可执行文件时，参数将作为字符串传递给可执行文件 - 就好像您在 MATLAB 中将您的函数称为`myfile "2.0" "20.2"`.

这些输入中的每一个都是一个字符数组（例如，包含“2”、“.”和“0”的 ASCII 值），因此您的函数可能会出错，因为输入太多。

尝试重写您的函数，以便它使用`str2num`or将输入转换为数字`str2double`。或者将您的输入存储在一个文件中，并设计您的函数以接受文件名作为输入。

`isdeployed`如果您希望它在 MATLAB 中运行和部署时的行为有所不同，请使用子句中的内置函数`if`来切换行为。

# python - 寻找快速计算许多字符串的成对距离的方法

> ID：14431371
> 
> 赞同：0
> 
> 时间：2013-01-21T01:33:37.447
> 
> 标签：python, distance

我有一个大约 100 万个唯一的 16 个字符的字符串列表（一个称为 VEC 的数组），我想计算 Python 中每个字符串的最小成对汉明距离（一个称为 RES 的数组）。基本上，我一次计算一行完整的成对距离矩阵，但只将每行的最小值存储在 RES 中。

```
VEC= ['AAAAAAAAAAAAAAAA','AAAAAAAAAAAAAAAT','AAAAGAAAAAATAAAA'...] 
```

因此 dist(VEC[1],VEC[2])=1, dist(VEC[1],VEC[3])=2 等等...并且 RES[1]=1。使用这些页面中的提示和技巧，我想出了：

```
#METHOD#1:
import Levenshtein
import numpy
RES=99*numpy.ones(len(VEC))
i=0
for a in VEC:
    dist=numpy.array([Levenshtein.hamming(a,b) for b in VEC] ) #array of distances
    RES[i]=numpy.amin(dist[dist>0])  #pick min distance greater than zero
    i+=1 
```

一个只有 10,000 的缩短 VEC 大约需要 70 秒，但如果我将其推断为整百万，则需要 8 天。我的方法似乎很浪费，因为我正在重新计算距离矩阵的对称部分，所以我尝试计算矩阵的一半，同时更新每一行的 RES：

```
#METHOD #2:
import Levenshtein
import numpy
RES=99*numpy.ones(len(VEC))
for i in range(len(VEC)-1):
    dist=[Levenshtein.hamming(VEC[i],VEC[j]) for j in range(i+1, len(VEC))]
    RES[i]=min(numpy.amin(dist),RES[i])
    #update RES as you go along:
    k=0
    for j in range(i+1,len(VEC)):
        if dist[k]<RES[j]:
             RES[j]=dist[k]
        k+=1 
```

可能并不奇怪，第二种方法需要几乎两倍的时间（117 秒），所以它不是很好。无论如何，任何人都可以推荐改进/更改以使其更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T21:22:50.027

如果您只需要每个二进制文件的最近邻居（忽略自身），并且您*可能*只获得一个近似最近邻居的可能性很小，那么您可以考虑为汉明距离实施“位采样”局部敏感哈希。简而言之，创建三个哈希表。从每个 128 位输入中，使用这 16 位样本作为键，对 16 位进行 3 次采样。哈希表的值应该是具有该采样键的所有 128 位输入的列表。将所有数百万个输入放入 LSH 索引后，只需：

*   迭代超过百万点
*   对于每个输入，执行上述 3 次采样
*   在三个列表的每一个中找到最近的邻居（距离> 0），保持最好的整体

加载和测试都快得离谱。我可能会推荐优秀的[bitarray](https://pypi.python.org/pypi/bitarray/)库来支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T20:16:08.807

我尝试使用 numpy。这是我的代码：

```
#!/usr/bin/env python

import numpy as np
import time

def gen_data(n):
    arr = np.empty(shape=(n, 16))
    for i in range(n):
        arr[i] = np.random.randint(ord('A'), ord('Z')+1, 16)
    return arr

def distance_from_array(i, arr):
    r = arr[i] != arr
    r[i,:] = True
    min_i = np.argmin(np.sum(r, axis=1))
    return min_i

data = gen_data(1000000)
distances = []
start = time.time()
for i in range(200):
    distances.append(distance_from_array(i, data))
end = time.time()
print end - start 
```

您可以将字符串列表转换为数字数组。然后您可以使用 numpy 函数来处理数组，例如 sum 和 argmin。如果一个字符串可能出现两次，我认为你不想只找到大于 1 的距离。

我在我的电脑上测试了一下，处理 200 个字符串大约需要 10 秒。对于每一个，您必须遍历所有 1 000 000 个其他字符串，因此我们可以相当容易地计算出处理所有这些字符串所需的时间。应该是13小时左右。但是，不要忘记我们目前只使用一个核心。如果您拆分索引并使用[http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)，您可以很快得到结果。

# c++ - 哪个是 turbo C++ 的其他替代编译器

> ID：14431372
> 
> 赞同：3
> 
> 时间：2013-01-21T01:33:42.843
> 
> 标签：c++

我正在学习 Turbo C++，但我不喜欢旧的 Turbo C++ 蓝色编译器。

是否有任何适用于 C++ 的图形 IDE 和编译器，例如 Eclipse 或其他任何工具，以便我也拥有完整的复制粘贴功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:41:55.577

IDE 就是您要寻找的东西。编译器只在后台进行工作。有许多非常好的 C++ IDE。我建议使用[Eclipse CDT](http://www.eclipse.org/cdt/)或[Microsoft Visual Studio Express C++](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)。

两者都不仅仅是复制粘贴，即代码自动完成。它很快就会成为你最好的朋友。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T01:37:38.983

为什么在 21 世纪仍然使用 Turbo C++？

您应该使用 gcc(g++ for compile c++ program) 作为编译器，并使用 vi/emacs 作为编辑器。

# mysql - 我在 mysql 中使用什么变量类型来保存复选框值？

> ID：14431378
> 
> 赞同：0
> 
> 时间：2013-01-21T01:35:04.147
> 
> 标签：mysql, checkbox

例如，我在他们的个人资料设置页面上的人名旁边有一个复选框，可以选择是否对公众可见。可见的？

在我的数据库中，我将有一个名为 first_name_visible 的变量。应该是什么类型？如果选中，复选框返回值（在本例中为“1”），否则返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:37:14.770

布尔类型是这种情况下最好的类型，1 为真，null 为假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:37:34.013

MySQL 确实有 BOOL 和 BOOLEAN 数据类型，但它们是 INT(1) 的同义词。所以这是您将使用的可能值 0、1 或 NULL 的类型。

1 为真（选中）。0 将是错误的。NULL 应被视为 NULL - 未输入任何值。我会避免使用 NULL 来表示错误。这使您可以更好地检查输入和数据完整性。在大多数情况下，我会将 BOOLEAN 列设置为 NOT NULL。

# php - php服务器中的Android应用内计费签名验证

> ID：14431379
> 
> 赞同：3
> 
> 时间：2013-01-21T01:35:12.137
> 
> 标签：php, android, in-app-billing, public-key-encryption

我正在我的 android 应用程序中开发 IAB v3。每次成功购买后，我希望我的应用程序将签名数据和签名发送回我的 php 服务器，以通过谷歌开发者控制台生成的公钥进行验证。我找到了以下代码。

```
<?php
// $data and $signature are assumed to contain the data and the signature

// fetch public key from certificate and ready it
$fp = fopen("/src/openssl-0.9.6/demos/sign/cert.pem", "r");
$cert = fread($fp, 8192);
fclose($fp);
$pubkeyid = openssl_get_publickey($cert);

// state whether signature is okay or not
$ok = openssl_verify($data, $signature, $pubkeyid);
if ($ok == 1) {
    echo "good";
} elseif ($ok == 0) {
    echo "bad";
} else {
    echo "ugly, error checking signature";
}
// free the key from memory
openssl_free_key($pubkeyid);
?> 
```

现在我有一个问题。google 给出的公钥是 String Base64 Encoded。我不知道如何将该字符串键转换为“.pem”格式。

如果我在上面的代码中将 Base64 Encoded 密钥设置为“$pubkeyid”。将发出警告。

`Warning: openssl_verify() [function.openssl-verify]: supplied key param cannot be coerced into a public key in myxxx.php.`

如何将我的字符串 Base64 编码公钥转换为 php 接受格式？

有没有人有以上经验或解决方法？请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T21:57:58.413

要将您从 Google 获得的长 base64 编码的公钥转换为可以在 PHP 中使用的公钥，请尝试以下操作：

```
$base64EncodedPublicKeyFromGoogle = "..."; // This is the public key for your app you get from Google.

$openSslFriendlyKey = "-----BEGIN PUBLIC KEY-----\n" . chunk_split($base64EncodedPublicKeyFromGoogle, 64, "\n") .  "-----END PUBLIC KEY-----"; 
```

然后你可以将它传递给`openssl_get_publickey()`.

```
$publicKeyId = openssl_get_publickey($openSslFriendlyKey); 
```

如您所见，Google 提供的格式几乎是正确的。它只需要分成 64 个字符的行，并在前面/附加正确的页眉/页脚。

您还可以使用 OpenSSL 命令来转换公钥，如下所示：

```
openssl enc -base64 -d -in publickey.base64 -A | openssl rsa -inform DER -pubin > publickey.pem 
```

然后您可以使用 PHP 读取生成的`publickey.pem`文件并将其内容传递给`openssl_get_publickey()`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:11:19.073

这个 API 解决了我的问题。

[https://github.com/mgoldsborough/google-play-in-app-billing-verification](https://github.com/mgoldsborough/google-play-in-app-billing-verification)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-05T15:06:11.010

海报问题的完整解决方案：

```
<?php
// $data and $signature are assumed to contain the data and the signature

// Paste your google public key below:
$base64EncodedPublicKeyFromGoogle  = "###############################"

//Convert the key to the right format for open SSL
$openSslFriendlyKey = "-----BEGIN PUBLIC KEY-----\n" . chunk_split($base64EncodedPublicKeyFromGoogle, 64, "\n") .  "-----END PUBLIC KEY-----";
$publicKeyId = openssl_get_publickey($openSslFriendlyKey);

// free the key from memory
openssl_free_key($publicKeyId);

//Perform signature verification. Don't forget to decode the signature!
$ok = openssl_verify($data, base64_decode($signature), $publicKeyId, OPENSSL_ALGO_SHA1);
if ($ok == 1) {
    echo "good";
} elseif ($ok == 0) {
    echo "bad";
} else {
    echo openssl_error_string();
}

?> 
```

# css - 下拉菜单项隐藏在 ie8 中

> ID：14431380
> 
> 赞同：1
> 
> 时间：2013-01-21T01:35:31.963
> 
> 标签：css, superfish, skeleton-css-boilerplate

在 IE8 文档模式 IE8 中，我使用了 simplethemes 的 wp-skeleton 主题，它使用了[superfish](http://themes.simplethemes.com/skeleton/)的变体。除了 IE8 之外，所有浏览器似乎都可以正常工作，如下所示：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:59:33.687

您需要为 IE8 重新编码一些 css，此外我认为这对 IE8 很重要，让大家更新软件；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:55:56.127

IE8 不喜欢溢出：隐藏，所以你可以尝试删除它。另一个线程提到位于 ie.css：#header_container #nav_container。

# html - CSS 菜单问题我只是想不通

> ID：14431382
> 
> 赞同：0
> 
> 时间：2013-01-21T01:35:41.670
> 
> 标签：html, css

我正在使用 Thematic 开发 WordPress 主题。一切都很顺利，直到我开始使用子菜单。

您可以在此处查看正在开发的站点：http: [//yem.synaxistech.net/](http://yem.synaxistech.net/)

好的，这是我的 CSS 问题。如果您转到上面的站点，并将鼠标悬停在“主页”按钮上，您将看到一个子菜单弹出。这正是我希望菜单的外观。

但是，如果您“单击”主页，然后转到该页面 (http://yem.synaxistech.net/?page_id=17)，然后再次将鼠标悬停在同一按钮上，您将看到子菜单按钮有一个他们身后的背景图片，我这辈子都无法摆脱！

这是一张图片：

[http://i.stack.imgur.com/SQhwS.jpg](http://i.stack.imgur.com/SQhwS.jpg)

在左侧，您可以看到“正确”的格式，但在右侧，背景出现在特定页面上。它以某种方式被主菜单继承，我似乎无法超越它。

任何人都可以在这里帮助我吗？我花了过去三个小时试图弄清楚这一点，但无济于事。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:03:21.010

找到这些样式：

```
.sf-menu li.current-menu-item a,
.sf-menu li.current_page_item a {
    background-image: url(images/navbutton-hover.png);
    background-color: transparent;
    background-repeat: no-repeat;
    background-position: left -2px;
} 
```

有两种方法可以解决这个问题：

**方式A：** 您可以更换：

```
.sf-menu li.current-menu-item a,
.sf-menu li.current_page_item a 
```

和：

```
.sf-menu li.current-menu-item > a,
.sf-menu li.current_page_item > a 
```

或**方式 B：** 您可以添加以下样式：

```
.sf-menu li.current-menu-item ul a,
.sf-menu li.current-menu-item ul a {
        background-image: none;
} 
```

菜单结构如下：

*   ul（主菜单）
    *   li（主要项目）
        *   a（主要项目链接）
        *   ul（子菜单）
            *   li (子项)
                *   a（子项目链接）

所以原始选择器`.sf-menu li.current-menu-item a`可以选择所有子项链接并导致您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:55:47.937

转到下面的 CSS 文件：http: [//yem.synaxistech.net/wp-content/themes/youreventmatters/style.css](http://yem.synaxistech.net/wp-content/themes/youreventmatters/style.css)

第 144 行，

你看到条目

```
.sf-menu li.current-menu-item a, .sf-menu li.current_page_item a
{
background-image: url(images/navbutton-hover.png);
background-color: transparent;
background-repeat: no-repeat;
background-position: left -2px;
} 
```

然后从这里删除整个背景属性；）（为了安全，只删除背景图像属性）

# css - HTML5 / CSS DIV 没有水平对齐？

> ID：14431385
> 
> 赞同：3
> 
> 时间：2013-01-21T01:36:00.700
> 
> 标签：css, html

我也很难让这个工作，出于某种奇怪的原因，DIV 确实水平对齐正确，但第二个 div 最终在第一个下面。任何帮助将不胜感激。

HTML：

```
<footer>
    <div class="inner">
    <section id="footer-copyright" class="clear left">
    <ul>
    <li>© 2013
    <a href="/">Company</a>
    |
    <a href="sitemap.html">Sitemap</a>
    |
    <a href="privacy.html">Privacy Policy</a>
    </li>
    </ul>
    </section>
    <section class="footer-box clear right">
    <ul>
    <li>Design by <a href="/" target="new">Template</a></li>
    </ul>
    </section>
    </div>
</footer> 
```

CSS：

```
footer .inner {
    padding-top: 50px;
}

#footer-copyright {
    display: block;
    padding-top: 35px;
    width:50%;
}

#footer-box {
    display: block;
    padding-top: 35px;
}

footer ul {
    color: #FFFFFF;
    list-style: none outside none;
    padding: 10px 0;
}

.inner {
    margin: 0 auto;
    position: relative;
    width: 1000px;
}

.clear {
    clear: both;
    display: block;
}

.right, .alignright {
    float: right;
}

.left {
   float:left;
} 
```

也许我只需要一双新的眼睛...... :)

[您可以在此处](http://www.snoopingmidget.com/australiantourismcollege/)查看工作链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:42:22.490

这是因为您`footer-box`有`clear: both;`规则集（来自`clear`班级）。删除它并添加`padding-top: 35px`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T01:42:37.823

`#footer-box`has`clear: both`由于它的`clear`类，所以它在`#footer-copyright`.

# php - 如何在php中将货币转换为字符串

> ID：14431388
> 
> 赞同：1
> 
> 时间：2013-01-21T01:36:27.717
> 
> 标签：php, currency

> **可能重复：**
> [有没有一种简单的方法可以将数字转换为 PHP 中的单词？](https://stackoverflow.com/questions/277569/is-there-an-easy-way-to-convert-a-number-to-a-word-in-php)

我想问一下，例如有一个价格为110 000 的数字格式作为转换为字符串的结果为“十一万”。php的编码如何？

例如。

```
 $price = 110000;
  $price_string = "one hundred and ten thousand" 
```

请帮我。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:43:34.467

例如，您可以使用[这个库](http://pear.php.net/package-info.php?package=Numbers_Words)。或者如果您不想将外部代码添加到项目中，请使用[此代码段。](http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php/)

# ruby-on-rails - wkhtmltopdf 尝试从 http 而不是文件加载

> ID：14431391
> 
> 赞同：11
> 
> 时间：2013-01-21T01:36:53.223
> 
> 标签：ruby-on-rails, ruby, pdf, wkhtmltopdf

这是一个奇怪的小问题，导致我在 SO 上发布了我的第一个问题。我正在使用 wkhtmltopdf 将 HTML 文档转换为 PDF 作为 Rails 应用程序的一部分。为此，我将 Rails 网页呈现为临时目录中的静态 HTML 文件，将静态页眉、页脚和图像复制到同一临时目录，然后使用“系统”执行 wkhtmltopdf。

这在开发和测试环境中完美运行。在我的暂存环境中，它没有。起初我怀疑权限，但该过程的前几个部分（创建 HTML 静态文件并将它们复制到目录）正在工作。我可以从该临时目录中的命令行运行 wkhtmltopdf 并获得预期的结果。最后，我在暂存环境中通过 Rails 控制台通过“系统”和反引号运行 wkhtmltopdf，这是我得到的输出：

```
> `wkhtmltopdf --footer-html tmp/invoices/footer.html --header-html tmp/invoices/header.html -s Letter -L 0in -R 0in -T 0.5in -B 1in tmp/invoices/test.html tmp/invoices/this.pdf`
Loading pages (1/6)
QPainter::begin(): Returned false                            ] 10% 
Error: Unable to write to destination                             
Error: Failed loading page http://tmp/invoices/test.html (sometimes it will work just to ignore this error with --load-error-handling ignore) => "" 
```

注意最后一点。我指向本地文件，但它正在通过 http 查找它们。好的，我想，也许我需要明确并提供 file:// 协议，这样它就不会寻找 http。所以我试试这个：

```
> system("wkhtmltopdf --footer-html file://Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/footer.html --header-html file://Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/header.html -s Letter -L 0in -R 0in -T 0.5in -B 1in file://Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/test.html file://Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/this.pdf")
Loading pages (1/6)
Error: Failed loading page file://library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/test.html (sometimes it will work just to ignore this error with --load-error-handling ignore)
=> false 
```

请注意，这个失败并在库上显示小写“l”。有没有搞错？（不，建议忽略该开关的错误并没有变得更好。）

有任何想法吗？是否存在会导致系统命令被重写的 Rails 或 Ruby 设置？有没有我可以添加到 wkhtmltopdf 以确保它从本地文件加载的选项？我很困惑。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-17T13:07:39.037

使用绝对文件路径时我取得了成功（请注意 之后的额外斜杠`file://`）

```
wkhtmltopdf --footer-html file:///Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/footer.html --header-html file:///Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/header.html -s Letter -L 0in -R 0in -T 0.5in -B 1in file:///Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/test.html file:///Library/Server/Web/Data/Sites/intranet-staging/current/tmp/invoices/this.pdf 
```

这在windows上是一样的

Unix 路径

```
file:///absolute/path/to/file 
```

窗口路径

```
file:///C:/absolute/path/to/file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-07T16:12:59.670

在上一个 0.11 whicked-pdf 中，我发现了一个错误
示例 C:\Ruby193\lib\ruby\gems\1.9.1\gems\wicked_pdf-0.11.0\lib>wicked_pdf.rb 第 198 行我更改为：
options[hf][ :html][:url] = "file://#{tf.path}" 到 options[hf][:html][:url] = "file:///#{tf.path}" - （更改// 到 ///)
更改 whicked-pdf 后再次起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:25:38.157

看看 wicked_pdf gem。您可以添加 PDF mime 类型，然后添加您想要 pdf 的任何页面，只需将 .pdf 添加到 URL。

我在产品中使用它，效果很好。无需直接调用 wkhtmltopdf。

# php - 获取特定日期的 SQL 数据

> ID：14431395
> 
> 赞同：0
> 
> 时间：2013-01-21T01:37:24.650
> 
> 标签：php, mysql, sql, date, datetime

我的网站上有一个模块，显示过去 30 天的收入。我的问题是我希望所有收入都按天分类，而不是按 24 小时分类。

这是我的代码：

```
$days = array(29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0);

foreach($days as $day)
{
    $daybefore = $day -1;

   if($day == 0)
{
    $query = "SELECT SUM(earnings)
FROM earnings 
WHERE `timestamp` <= CURRENT_DATE + INTERVAL
  AND `timestamp`  > CURRENT_DATE + INTERVAL -1 DAY";
}
if($day == 1)
{
$query = "SELECT SUM(earnings)
FROM earnings 
WHERE `timestamp` <= CURRENT_DATE + INTERVAL -" . $day . "
  AND `timestamp`  > CURRENT_DATE + INTERVAL -" . $daybefore . " DAY";
} 
```

问题是它会在查询后的 24 小时内获取所有数据。我想要的数据是：

今天 = 当天开始的所有数据。今天 = 从当天开始到当天结束的所有数据。等等。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:31:20.497

首先，您在完全没有必要的情况下在代码中执行循环。让 SQL 完成工作！您可以使用该`date()`函数仅获取日期时间的日期部分。

以下查询将这些放在一起以获取过去 30 天的完整收入：

```
$query = "SELECT date(timestamp) as thedate, SUM(earnings)
FROM earnings
where date(timestamp) >= date(CURRENT_DATE) - interval 30
group by date(timestamp)
"; 
```

# regex - regex101.com 任务 8 从字符串中去除所有 HTML 标记

> ID：14431398
> 
> 赞同：0
> 
> 时间：2013-01-21T01:37:46.393
> 
> 标签：regex

我正在参加 regex101.com 测验，并被困在任务 8 上。

请求：从字符串中剥离所有 HTML 标记。HTML 标记包含在 < 和 > 中。

我试过了，</?\w*+\s?/?>，但它说

“测试 6 of 13 失败：您过度使用了贪婪的量词。例如，在字符串“ace”中，当您应该返回“ace”时，您却返回了“ae”。”

但是，[http://rubular.com/r/CD2zJjSFgs](http://rubular.com/r/CD2zJjSFgs)似乎有效。如何防止它变得贪婪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:39:10.883

使用补充字符类：

```
<[^>]+> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:20:09.210

我自己尝试了这个网站，起初它非常糟糕，有 4-5 个任务，测试用例中有错误，但我给管理员发了电子邮件，他修复了所有问题。目前，我已经完成了所有可用的任务——这意味着所有的任务都是可行的。唯一可能的错误是测试用例太窄以至于不太通用的正则表达式可以通过，但这与手头的问题没有任何关系。

@willOEM 和 @fge 的答案，甚至你的答案在测试用例 8 （由于空标签而在测试用例 9 处被阻止，但空标签是否真的需要删除是有争议的）或测试用例 9（由于附加要求而在测试用例 10 处被阻止），***如果`g`指定了标志***。没有它，您只会在测试用例 6 中删除一个标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:44:44.650

它会认为这不那么贪婪吗？

```
<.+?> 
```

# java - java.io.FileNotFoundException: /mnt/sdcard/1358731920220.jpg （没有这样的文件或目录）

> ID：14431403
> 
> 赞同：0
> 
> 时间：2013-01-21T01:38:07.093
> 
> 标签：java, android, file, camera, uri

```
public class BeginTakePhotoScene extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_begin_take_photo_scene);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        takephotobtn = new ImageButton(this);
        takephotobtn.setId(888);
        takephotobtn.setBackgroundResource(R.drawable.take_photo_btn);
        takephotobtnparam = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        takephotobtnparam.addRule(RelativeLayout.CENTER_HORIZONTAL);
        takephotobtnparam.topMargin = margin.heightPixels * 9 / 10 - height;
        takephotobtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                mUri = Uri.fromFile(new File(Environment
                        .getExternalStorageDirectory(), String.valueOf(System
                        .currentTimeMillis()) + ".jpg"));
                camera.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mUri);
                camera.putExtra("return-data", false);
                startActivityForResult(camera, PICTURE_RESULT);
            }
        });

        choosephotobtn = new ImageButton(this);
        choosephotobtn.setId(889);
        choosephotobtn.setBackgroundResource(R.drawable.choose_photo_btn);
        choosephotobtnparam = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        choosephotobtnparam.addRule(RelativeLayout.CENTER_HORIZONTAL);
        choosephotobtnparam.addRule(RelativeLayout.BELOW, 888);
        choosephotobtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        SELECT_PICTURE);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                selectedImageUri = data.getData();
                uncroppedimage = getFilePath(selectedImageUri);

                Intent cropIntent = new Intent("com.android.camera.action.CROP");

                cropIntent.setDataAndType(selectedImageUri, "image/*");

                cropIntent.putExtra("crop", "true");

                cropIntent.putExtra("aspectX", 1);
                cropIntent.putExtra("aspectY", 1);

                cropIntent.putExtra("outputX", 128);
                cropIntent.putExtra("outputY", 128);

                File tempFile;
                tempFile = new File(Environment.getExternalStorageDirectory(),
                        String.valueOf(System.currentTimeMillis()) + ".jpg");
                mSavedUri = Uri.fromFile(tempFile);
                cropIntent.putExtra("output", mSavedUri);

                cropIntent.putExtra("return-data", true);

                startActivityForResult(cropIntent, PIC_CROP);

            } else if (requestCode == PICTURE_RESULT) {
                Log.e("mUri", mUri.getPath());
                uncroppedimage = mUri.getPath();

                Intent cropIntent = new Intent("com.android.camera.action.CROP");

                cropIntent.setDataAndType(mUri, "image/*");

                cropIntent.putExtra("crop", "true");

                cropIntent.putExtra("aspectX", 1);
                cropIntent.putExtra("aspectY", 1);

                cropIntent.putExtra("outputX", 128);
                cropIntent.putExtra("outputY", 128);

                File tempFile;
                tempFile = new File(Environment.getExternalStorageDirectory(),
                        String.valueOf(System.currentTimeMillis()) + ".jpg");
                mSavedUri = Uri.fromFile(tempFile);
                cropIntent.putExtra("output", mSavedUri);

                cropIntent.putExtra("return-data", true);

                startActivityForResult(cropIntent, PIC_CROP);
            } else {
                Log.e("mSavedUri", mSavedUri.getPath());
                profileimage.setImageURI(mSavedUri);
                croppedimage = mSavedUri.getPath();

                profileimage.setVisibility(View.VISIBLE);
                confirmbtn.setVisibility(View.VISIBLE);

                takephotobtnparam.topMargin = margin.heightPixels * 9 / 10
                        - height * 2;
            }
        }
    }

    private String getFilePath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = this.managedQuery(uri, projection, null, null, null);
        if (cursor != null) {
            int colum_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(colum_index);
        } else
            return null;
    }
} 
```

我登录`uri.getpath`，它返回`file:///mnt/sdcard/1358731920220.jpg`。这个链接似乎有额外的`/`。但是，我不确定为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:49:22.400

`cropIntent.putExtra("return-data", true);`

改成

`cropIntent.putExtra("return-data", false);`

将裁剪后的图像保存到 sdcard 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:49:50.133

在 Manifest 文件中添加此权限，如果您尚未添加，

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# clojure - 如何在 enlive 中使用片段？

> ID：14431404
> 
> 赞同：9
> 
> 时间：2013-01-21T01:38:19.657
> 
> 标签：clojure, templating, compojure, enlive

我是一名 Rails 开发人员，在 Clojure 中涉足。我正在尝试用 ERB 做一些非常简单的事情，但我一生都无法在 enlive 中弄清楚。

假设我在 layout.html 中有一个网站的简单布局文件：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
</body>
</html> 
```

我有这些片段，例如 header.html 和 footer.html 以及这条简单的路线。

```
(deftemplate layout "layout.html" [])

(defroutes home-routes
  (GET "/" [] layout)) 
```

每当请求转到“/”时，我怎样才能做到这一点，它会转换布局并将页眉和页脚片段插入其中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T10:08:44.183

defsnippet 仅匹配 html 的特定部分（这就是它采用选择器作为参数的原因），并对其进行转换。deftemplate 获取整个 html，并对其进行转换。此外，defsnippet 返回一个 Clojure 数据结构，而 deftemplates 返回一个字符串向量，因此通常在 deftemplate 中使用 defsnippet。

为了让您了解片段（或选择器）返回的数据是什么样的：

```
(enlive/html-snippet "<div id='foo'><p>Hello there</p></div>")
;=({:tag :div, :attrs {:id "foo"}, :content ({:tag :p, :attrs nil, :content ("Hello there")})}) 
```

在你的情况下，你想要类似的东西：

**header.html：**

```
<div id="my-header-root">
...
</div> 
```

**Clojure 代码：**

```
(enlive/defsnippet header "path/to/header.html" [:#my-header-root] []
identity)

(enlive/defsnippet footer "path/to/footer.html" [enlive/root] []
identity)

(enlive/deftemplate layout "layout.html" [header footer]
[:head] (enlive/content header)
[:body] (enlive/append footer))

(defroutes home-routes
  (GET "/" [] (layout (header) (footer)) 
```

片段中使用的标识函数返回它的参数，在本例中是由 :#my-header-root 选择器选择的数据结构（我们不进行任何转换）。如果你想在head.html 中包含所有内容，你可以使用enlive 附带的根选择器步骤。

您可以使用以下方式查看从 defsnippet 生成的 html：

```
(print (apply str (enlive/emit* (my-snippet)))) 
```

我还推荐教程：[https](https://github.com/swannodette/enlive-tutorial/) ://github.com/swannodette/enlive-tutorial/ 和 Brian Marick 的教程，了解更多关于 defsnippet 和 deftemplate 宏如何工作的细节。

最后一个提示，您可以使用 enlive 附带的 sniptest 宏来试验选择器和转换：

```
(enlive/sniptest "<p>Replace me</p>"
[:p] (enlive/content "Hello world!"))
;= "<p>Hello world!</p>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:12:35.487

[在enlive 教程](https://github.com/swannodette/enlive-tutorial#the-templates-and-snippets)中有很好的示例答案。

**警告**。所有源文件链接似乎都已损坏。您需要在所有链接`enlive-tutorial/blob/master/`之后插入，`https://github.com/swannodette/`或者直接从教程项目中打开它们。

# android - OpenGL ES 2.0 无法正确渲染

> ID：14431405
> 
> 赞同：1
> 
> 时间：2013-01-21T01:38:24.773
> 
> 标签：android, opengl-es, opengl-es-2.0

这应该渲染一个立方体。看起来背面的某些部分在最靠近相机的部分前面渲染。即使我将它设置得更远，也会发生这种情况。这是来自我的渲染器：

```
public void onDrawFrame(GL10 unused) {

    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3f, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    Matrix.setIdentityM(mModelMatrix, 0);
    Matrix.setRotateM(mModelMatrix, 0, mAngle, 0f, 1f, 0.0f);

    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mModelMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix,   0);

    // Draw object
    cube.draw(mMVPMatrix, context);

    mAngle++;
} 
```

和我的对象的绘制方法

```
public void draw(float[] mvpMatrix, Context context) {
    GLES20.glUseProgram(mProgram);

    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                 GLES20.GL_FLOAT, false,
                                 vertexStride, vertexBuffer);

    GLES20.glVertexAttribPointer(mTexHandle, 2,
                                 GLES20.GL_FLOAT, false,
                                 8, textureBuffer);

    GLES20.glEnableVertexAttribArray(mPositionHandle);
    GLES20.glEnableVertexAttribArray(mTexHandle);

    GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, mTextureID);
    GLES20.glUniform1i ( mSampler, 0 );

    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);

    GLES20.glDisableVertexAttribArray(mPositionHandle);
    GLES20.glDisableVertexAttribArray(mTexHandle);
} 
```

和我的着色器：

```
 String vertexShaderCode =
         "uniform mat4 uMVPMatrix;" +
         "uniform float u_offset;      \n" +
         "attribute vec4 a_position;   \n" +
         "attribute vec2 a_texCoord;   \n" +
         "varying vec2 v_texCoord;     \n" +
         "void main()                  \n" +
         "{                            \n" +
         "   gl_Position = uMVPMatrix *  a_position; \n" +
         "   gl_Position.x += u_offset;\n" +
         "   v_texCoord = a_texCoord;  \n" +
         "}                            \n";

String fragmentShaderCode = 
      "precision mediump float;                            \n" +
      "varying vec2 v_texCoord;                            \n" +
      "uniform sampler2D s_texture;                        \n" +
      "void main()                                         \n" +
      "{                                                   \n" +
      "  gl_FragColor = texture2D(s_texture, v_texCoord);  \n" +
      "}                                                   \n"; 
```

和结果

图片：http: [//i.imgur.com/eWI2Uom.png](http://i.imgur.com/eWI2Uom.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:01:25.370

假设您正在使用深度缓冲区，您似乎没有在`onDrawFrame`函数中清除它。尝试：

```
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT|GLES20.GL_DEPTH_BUFFER_BIT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:47:28.617

当我在 iOS 上编程时，我不确定 Android 特定的代码，但我从阅读“OpenGL ES 2.0 编程指南”（Munshi 等人的）中了解到，差别很小。这是我的代码在最近的一个小项目中的样子：

设置好帧缓冲区和颜色渲染缓冲区后，正如您已经完成的那样，设置深度缓冲区。

```
GLuint depthRenderbuffer;

GLint backingWidth, backingHeight;

glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &backingWidth);
glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &backingHeight);

glGenRenderbuffers(1, &depthRenderbuffer);
glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);

glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, backingWidth, backingHeight);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer); 
```

最好包含有关根据颜色渲染缓冲区设置深度缓冲区尺寸的部分，使用`glGetRenderbufferParameteriv()`，因为它确保无论如何，它们都会匹配。

附带说明一下，在 iOS 上，建议直接从底层 iOS 绘图层设置颜色渲染缓冲区存储，但是在设置深度渲染缓冲区时，它需要调用来`glRenderbufferStorage()`代替，如上所示。

您还需要在绘图例程中包含以下代码行：

```
glClearDepthf(1.0);
glEnable(GL_DEPTH_TEST);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

如果您不调用`glEnable(GL_DEPTH_TEST)`，它似乎一开始会出现故障，然后就可以正常工作，至少在我在 iOS 中的实现上是这样。将`glClearDepthf(1.0)`其一直清除到远平面，而不是值 0.0 将其清除到前平面。

看起来你可能有一些特定于 Android 的代码，但希望这能让你有一个正确的开始。干杯!

# css - 纯 CSS 根据动态字符数量使字体大小响应

> ID：14431411
> 
> 赞同：361
> 
> 时间：2013-01-21T01:39:41.277
> 
> 标签：css

我知道这可以用 Javascript 很容易地解决，但我只对纯 CSS 解决方案感兴趣。

我想要一种动态调整文本大小的方法，以便它始终适合固定的 div。这是示例标记：

```
<div style="width: 200px; height: 1em; overflow: hidden;">
  <p>Some sample dynamic amount of text here</p>
</div>
```

我在想，也许这可以通过在 ems 中指定容器的宽度，并让字体大小继承该值来实现？

* * *

## 回答 #1

> 赞同：577
> 
> 时间：2013-05-02T19:20:38.603

*注意：此解决方案根据视口大小而不是内容量而变化*

我刚刚发现使用大众单位可以做到这一点。它们是与设置视口宽度相关的单位。有一些缺点，例如缺乏对旧版浏览器的支持，但这绝对是要认真考虑使用的东西。另外，您仍然可以为旧浏览器提供后备，如下所示：

```
p {
    font-size: 30px;
    font-size: 3.5vw;
} 
```

[http://css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/) 和 [https://medium.com/design-ux/66bddb327bb1](https://medium.com/design-ux/66bddb327bb1)

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2014-02-24T07:51:13.680

**编辑：**注意[**attr()**](https://developer.mozilla.org/en-US/docs/Web/CSS/attr)它与css中的**calc()相关。**您将来也许可以实现它。

不幸的是，目前还没有唯一的 CSS 解决方案。这是我建议你做的。给你的元素一个标题属性。并使用文本溢出省略号来防止破坏设计并让用户知道那里有更多文本。

```
<div style="width: 200px; height: 1em; text-overflow: ellipsis;" title="Some sample dynamic amount of text here">
 Some sample dynamic amount of text here
</div> 
```

*.*

*.*

*.*

**或者**，如果您只想根据视口减小尺寸。**CSS3**支持与视口相关的新尺寸。

```
body {
   font-size: 3.2vw;
} 
```

1.  3.2vw = 视口宽度的 3.2%
2.  3.2vh = 视口高度的 3.2%
3.  3.2vmin = 3.2vw 或 3.2vh 中的较小者
4.  3.2vmax = 3.2vw 或 3.2vh 中的较大者，请参阅[css-tricks.com/....](http://css-tricks.com/viewport-sized-typography/)并查看[caniuse.com/....](http://caniuse.com/viewport-units)

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2017-08-24T13:59:02.277

您可能对这种`calc`方法感兴趣：

```
font-size: calc(4vw + 4vh + 2vmin); 
```

完毕。调整值直到符合您的口味。

来源：[https ://codepen.io/CrocoDillon/pen/fBJxu](https://codepen.io/CrocoDillon/pen/fBJxu)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-04-29T10:06:09.443

唯一的方法可能是为不同的屏幕尺寸设置不同的宽度，但是这种方法非常不准确，您应该使用 js 解决方案。

```
h1 {
    font-size: 20px;
}

@media all and (max-device-width: 720px){
    h1 {
        font-size: 18px;
    }
}

@media all and (max-device-width: 640px){
    h1 {
        font-size: 16px;
    }
}

@media all and (max-device-width: 320px){
    h1 {
        font-size: 12px;
    }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-03-19T02:23:35.140

作为参考，非 CSS 解决方案：

下面是一些 JS，它根据容器中的文本长度重新调整字体大小。

[Codepen](https://codepen.io/MarsAndBack/pen/WYvvRP?editors=1111)代码稍作修改，但思路与以下相同：

```
function scaleFontSize(element) {
    var container = document.getElementById(element);

    // Reset font-size to 100% to begin
    container.style.fontSize = "100%";

    // Check if the text is wider than its container,
    // if so then reduce font-size
    if (container.scrollWidth > container.clientWidth) {
        container.style.fontSize = "70%";
    }
} 
```

对我来说，当用户在下拉列表中进行选择时，我调用此函数，然后我的菜单中的 div 被填充（这是我出现动态文本的地方）。

```
 scaleFontSize("my_container_div"); 
```

此外，我还使用 CSS 省略号（“...”）来截断*更长*的文本，如下所示：

```
#my_container_div {
    width: 200px; /* width required for text-overflow to work */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

所以，最终：

*   **短文本：**例如“APPLES”

    完全渲染，漂亮的大字母。

*   **长文本：**例如“APPLES & ORANGES”

    通过上述 JS 缩放功能，缩小 70%。

*   **超长文本：**例如“APPLES & ORANGES & BANAN...”

    通过上面的 JS 缩放函数和 CSS 规则，缩小 70% 并用“...”省略号截断。

您还可以探索使用 CSS letter-spacing 来使文本更窄，同时保持相同的字体大小。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-08-09T21:01:12.347

```
calc(42px + (60 - 42) * (100vw - 768px) / (1440 - 768)); 
```

使用这个等式。

对于大于或小于 1440 和 768 的任何值，您可以给它一个静态值，或者应用相同的方法。

vw 解决方案的缺点是您无法设置缩放比例，例如屏幕分辨率为 1440 的 5vw 最终可能是 60px 字体大小，您的想法字体大小，但是当您将窗口宽度缩小到 768 时，它可能会结束12px，不是你想要的最小值。使用这种方法，您可以设置上边界和下边界，字体将在两者之间自行缩放。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-06-30T17:26:27.763

正如@DMTinter 帖子的评论中提到的许多人所提到的那样，OP 正在询问更改字符的数量（“数量”）。他也在询问 CSS，但正如 @Alexander 指出的那样，“仅使用 CSS 是不可能的”。据我所知，目前这似乎是真的，所以人们想知道下一个最好的事情似乎也是合乎逻辑的。

我对此并不特别自豪，但它确实有效。似乎需要大量的代码来完成它。这是核心：

```
function fitText(el){
  var text = el.text();
  var fsize = parseInt(el.css('font-size'));
  var measured = measureText(text, fsize);

  if (measured.width > el.width()){
    console.log('reducing');
    while(true){
      fsize = parseInt(el.css('font-size'));
      var m = measureText(text, fsize );
      if(m.width > el.width()){
        el.css('font-size', --fsize + 'px');
      }
      else{
        break;
      }
    }
  }
  else if (measured.width < el.width()){
    console.log('increasing');
    while(true){
      fsize = parseInt(el.css('font-size'));
      var m = measureText(text, fsize);
      if(m.width < el.width()-4){ // not sure why -4 is needed (often)
        el.css('font-size', ++fsize + 'px');
      }
      else{
        break;
      }
    }
  }
} 
```

这是一个 JS Bin： http: [//jsbin.com/pidavon/edit](http://jsbin.com/pidavon/edit?html,css,js,console,output)
?html,css,js,console,output 请提出可能的改进建议（我对使用画布测量文本并不感兴趣......似乎像太多的开销（？））。

感谢@Pete 提供 measureText 功能： [https ://stackoverflow.com/a/4032497/442665](https://stackoverflow.com/a/4032497/442665)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-30T15:07:26.507

试试MartijnCuppens 的[RFS（用于响应式字体大小）](https://github.com/MartijnCuppens/rfs)库，它可能会[在 Bootstrap 中实现](https://github.com/twbs/bootstrap/pull/23816)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-30T08:36:57.427

此解决方案也可能有帮助：

```
$(document).ready(function () {
    $(window).resize(function() {
        if ($(window).width() < 600) {
            $('body').css('font-size', '2.8vw' );
        } else if ($(window).width() >= 600 && $(window).width() < 750) {
            $('body').css('font-size', '2.4vw');
        } 
         // and so on... (according to our needs)
        } else if ($(window).width() >= 1200) {
            $('body').css('font-size', '1.2vw');
        }
    }); 
  }); 
```

它对我很有效！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-08T01:53:01.563

为什么不根据字符数在服务器端设置类？

```
 .NotMuchText {
        font-size: 20px;
    }

    .LotsOfText {
        font-size: 10px;
    } 
```

我还想要一个非 JavaScript 解决方案，CSS 解决方案，并改用 PHP/CSS 解决方案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-18T17:24:15.060

[如果在Bootstrap 4](https://getbootstrap.com/docs/4.3/content/typography/#responsive-font-sizes)中从头开始

1.  转到[https://bootstrap.build/app](https://bootstrap.build/app)
2.  点击搜索模式
3.  搜索`$enable-responsive-font-sizes`并打开它。
4.  单击导出主题以保存您的自定义引导 CSS 文件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-25T16:43:31.060

好的，您的动态文本一定来自某个地方。就我而言，这看起来像：

```
<div class="large" :data-contentlength="Math.floor(item.name.length/7)">[[ item.name ]]</div> 
```

和我的 CSS 类：

```
.large[data-contentlength="1"]{ font-size: 1.2em; }
.large[data-contentlength="2"]{ font-size: 1.1em; }
.large[data-contentlength="3"]{ font-size: 1.0em; }
.large[data-contentlength="4"]{ font-size: 0.9em; }
.large[data-contentlength="5"]{ font-size: 0.8em; }
.large[data-contentlength="6"]{ font-size: 0.7em; }
.large[data-contentlength="7"]{ font-size: 0.6em; } 
```

我也有“非大”文本的类：

```
[data-length="1"]{ font-size: 1.00em; }
... 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-06-13T00:40:08.490

创建一个查找表，该表根据`<div>`.

```
const fontSizeLookupTable = () => {
  // lookup table looks like: [ '72px', ..., '32px', ..., '16px', ..., ]
  let a = [];
  // adjust this based on how many characters you expect in your <div>
  a.length = 32;
  // adjust the following ranges empirically
  a.fill( '72px' ,     );
  a.fill( '32px' , 4 , );
  a.fill( '16px' , 8 , );
  // add more ranges as necessary
  return a;
}

const computeFontSize = stringLength => {
  const table = fontSizeLookupTable();
  return stringLength < table.length ? table[stringLength] : '16px';
} 
```

通过经验测试调整和调整所有参数。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2020-12-09T19:03:21.073

我是这样使用的：

*1* .style.fontSize = 15.6/(document.getElementById(" *2* ").innerHTML.length)+ 'vw'

其中：*1* - 父 div Id 和*2* - 带有我的文本的 div 的 Id

# java - 我需要在我的列表视图中添加一个图像视图或网络视图

> ID：14431420
> 
> 赞同：0
> 
> 时间：2013-01-21T01:40:58.897
> 
> 标签：java, android, listview, webview

我有问题。我得到了一些代码，我不会全部放在这里，因为它太大了。但我有一个列表视图。我这样做：

```
lv = (ListView) findViewById(R.id.list);

(Here is normally some asynctask code and stuff)

// list adapter
ListAdapter adapter = new SimpleAdapter(MainActivity.this, placesListItems,
R.layout.list_item, new String[] { KEY_REFERENCE, KEY_NAME, KEY_VICINITY, KEY_DISTANCE,
     KEY_LOCATION}, new int[] { R.id.reference, R.id.name, R.id.vicinity, R.id.radius, R.id.location});

// Adding data into listview

lv.setAdapter(adapter); 
```

现在问题是我得到了一个网址，而网站上唯一的东西就是一张图片。它来自 Google Place Photos。现在我想要我的列表视图中的图像。所以在每个项目中都有另一个图像。

我可以使用 imageview 或 webview 来完成。

所以让我们看看 url 存储在这个：

```
KEY_URL; 
```

imageview 或 webview 是这样的：

```
R.id.image; 
```

我怎样才能做到这一点？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:20:43.850

### 首先，

WebView 比 ImageView 占用更多内存。所以我推荐你使用ImageView。

### 第二，

查看以下网址。

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

在本文中，我使用的第一个库是小型且可自定义的库。它使用线程池并且似乎控制传输。第二个库，我没用过，比较大。但是这个库中的更多方法似乎可以轻松控制各种配置。

### 最后，

我认为您应该创建自己的适配器，扩展 SimpleAdapter（或 CursorAdapter，或...）。就像下面的伪代码一样。

```
public class MySimpleAdapter extends SimpleAdapter {
    private ImageLoader mImageLoader;
    private int mResource;
    private LayoutInflater inflater;
    public static class ViewHolder {
        public ImageView img;
        public TextView txt;
    }

    public MySimpleAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        mResource = resource;
        mImageLoader = new ImageLoader(context);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.cell_text, null);
            holder      = new ViewHolder();
            holder.txt  = (TextView) convertView.findViewById(R.id.txt);
            holder.img  = (ImageView) convertView.findViewById(R.id.img);
            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.txt.setText("something text");
        mImageLoader.displayImage("url", holder.img);
        return convertView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:09:35.843

您可以使用 [androidQuery] [https://code.google.com/p/android-query/](https://code.google.com/p/android-query/) 它有一个线程池。它以不同的方式加载图像。可以选择降低样本图像以节省内存。由谷歌制作:)

# objective-c - MacRuby 指针和 Obj-C 函数通过引用返回值

> ID：14431430
> 
> 赞同：0
> 
> 时间：2013-01-21T01:42:45.200
> 
> 标签：objective-c, pointers, reference, macruby, nsrange

我正在尝试在 Macruby 中实现以下 NSAttributedString 方法：

*   (id)attribute:(NSString *)attributeName atIndex:(NSUInteger)index EffectiveRange:(NSRangePointer)aRange

根据定义，它`Returns the value for an attribute with a given name of the character at a given index, and by reference the range over which the attribute applies.`

好的，所以我需要一个指向 NSRange 的指针，我设置如下：

```
range=Pointer.new("{_NSRange=QQ}")[0] 
```

似乎很好`range.class`=> `NSRange`。

但是，当我执行该方法时：

```
font=txtStor.attribute(NSFontAttributeName,atIndex:index,effectiveRange:range) 
```

我`range`的总是`#<NSRange location=0 length=0>`。另外，`p range`给我`#<NSRange location=0 length=0>`.

任何想法如何正确实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:53:26.347

Watson 在 MacRuby-devel 邮件列表中为我提供了解决方案。我应该这样写我的代码：

```
 range=Pointer.new(NSRange.type)
 #though range=Pointer.new("{_NSRange=QQ}") would also work 
```

然后，就像我以前一样

```
font=txtStor.attribute(NSFontAttributeName,atIndex:index,effectiveRange:range) 
```

如果需要，我可以取消引用范围`range[0]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T13:36:48.753

这是另一个有效的解决方案

```
 NSRange range;
 font=txtStor.attribute...effectiveRange:&range); 
```

Here the range is passed by reference, in other words the address of the value of range is passed, this allows the value to be changed inside the method and that have that changed remain in the caller.

# javascript - 使用变量名和字符串组合创建 Javascript 变量

> ID：14431432
> 
> 赞同：1
> 
> 时间：2013-01-21T01:43:11.607
> 
> 标签：javascript, string, variables

我似乎无法解决这个问题，这就是我所拥有的......

```
vid1=0;
vid2=0;
vid3=0;

num=1;

'vid'+num = 1;
// vid1=1; 
```

我想根据数字来创建变量，所以如果数字是2，则以vid2的名称创建一个变量并将其设置为1。

PS：这是我第一次在stackoverflow上，如果我在这个网站上的传统方面犯了任何错误，很抱歉=）提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T01:44:26.290

如果您在全局命名空间中，请使用以下命令：

```
window['vid' + num] = 1; 
```

但这是一个非常好的数组用例：

```
var numbers = [0, 0, 0];
var num = 1;

numbers[num] = 1; 
```

# google-tv - GoogleTV 快速搜索框建议仅显示 1 个条目

> ID：14431435
> 
> 赞同：0
> 
> 时间：2013-01-21T01:43:35.640
> 
> 标签：google-tv, android-searchmanager, android-qsb

我正在尝试让 googletv 中的全局快速搜索框向我展示我所有的自定义建议。在最新的 googleTV 模拟器上运行我的应用程序时，Global QSB 会向我显示所有适当的自定义建议；但是，在 GTV 设备上运行相同的应用程序时，全局 QSB 仅向我显示第一个自定义建议，而不是其余的。我已将内容提供程序设置为返回以下数据：_id、suggest_text_1、suggest_text_2、suggest_intent_data、suggest_intent_extra_data

任何见解将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:26:45.833

编辑：我与团队核对过，看来模拟器的行为不正确。

我们只返回来自搜索提供者的最高结果，而不是全部。这是我们对现有的 Android QSB 所做的更改。

# gwt - 为 IE9 独立安装文件寻找 GWT Developer Plugin

> ID：14431436
> 
> 赞同：1
> 
> 时间：2013-01-21T01:43:54.450
> 
> 标签：gwt, plugins, internet-explorer-9

我正在寻找**为 IE9 下载 GWT Developer 插件**的独立安装文件。我在谷歌上搜索并找到了以下网址，但两个网址都不起作用......

[http://google-web-toolkit.googlecode.com/svn-history/trunk/plugins/ie/prebuilt/](http://google-web-toolkit.googlecode.com/svn-history/trunk/plugins/ie/prebuilt/) [http://dl.google.com/dl/gwt/plugins/ie/1.0.7263.20091208111100/gwt-开发插件.msi](http://dl.google.com/dl/gwt/plugins/ie/1.0.7263.20091208111100/gwt-dev-plugin.msi)

我尝试从 IE9 中安装它，安装开始但过了一会儿它失败并`The Download Failed`显示消息。见下文...

![在此处输入图像描述](../Images/fd4b672e7dcf06684a5861ffde339533.png)

有人可以告诉我在哪里可以找到独立安装文件。（我正在运行 Windows 7。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:59:33.577

您尝试的第一个 URL 已移至[https://gwt.googlesource.com/gwt-plugins/+/master/ie/prebuilt/](https://gwt.googlesource.com/gwt-plugins/+/master/ie/prebuilt/)

# php - 带有包含和正则表达式的 php xpath 查询

> ID：14431442
> 
> 赞同：0
> 
> 时间：2013-01-21T01:45:07.247
> 
> 标签：php, regex, xpath

现在我有一个看起来像这样的 xpath 搜索功能：

```
$paragraph = $xmldoc->xpath("//p[contains(., '$wordsearch')]"); 
```

我想知道是否有可能 let`$wordsearch`是一个正则表达式，所以我的搜索看起来像这样：

```
$paragraph = $xmldoc->xpath("//p[contains(., '$regularExpression')]"); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:19:29.500

您可以改为使用正则表达式过滤数组：

```
$paragraph = array_filter(
    $xmldoc->xpath("//p"), 
    function ($p) use ($regularExpression) {
        return preg_match($regularExpression, $p);
    }
); 
```

见[`array_filter`](http://php.net/array_filter)。

# haskell - 如何使用 lambdabot 获取 prelude 中未包含的函数的来源？

> ID：14431444
> 
> 赞同：2
> 
> 时间：2013-01-21T01:45:54.820
> 
> 标签：haskell

我可以从前奏中得到函数的来源：

```
lambdabot> src foldr
foldr f z []     = z
foldr f z (x:xs) = f x (foldr f z xs) 
```

但我无法从其他模块获取源代码：

```
lambdabot> src flatten
Source not found. Maybe if you used more than just two fingers...
lambdabot> hoogle flatten
Data.Tree flatten :: Tree a -> [a]
Data.Graph flattenSCC :: SCC vertex -> [vertex]
Data.Graph flattenSCCs :: [SCC a] -> [a]
lambdabot> src Data.Tree flatten
Source not found. Just try something else.
lambdabot> src Data.Tree.flatten
Source not found. Have you considered trying to match wits with a rutabaga?
lambdabot> src Tree flatten
Source not found. And you call yourself a Rocket Scientist!
lambdabot> src Tree.flatten
Source not found. Just try something else. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:46:30.023

你真的不能这样做。lambdabot 使用一个包含 name->source 映射的硬连线文件；它不会以特别有原则的方式查找标识符的来源。

通常，您可以做的最好的事情是`:i foo`在 ghci 中找出标识符来自哪个模块，然后查找该模块的源（例如，使用[Hoogle](http://www.haskell.org/hoogle/)，它通常链接到具有源链接的页面）。

# python - 将图像与列表 Python 进行比较

> ID：14431446
> 
> 赞同：1
> 
> 时间：2013-01-21T01:46:33.473
> 
> 标签：python, image

我一直在与一个程序作斗争，我已经阅读了许多关于在 python 中使用图像的信息，但我没有让我的程序正常工作。

我正在做一个识别卡的程序。我有一个所有卡片的“数据库”，每个卡片都在不同的 jpg 文件中。因此，它尝试将我们想知道的卡片与所有可能的卡片进行比较。那么更相似的卡片将是我正在寻找的卡片。我尝试了几种不同的代码，但没有人能正确完成他的工作。

```
def get_card(image1path):
    from PIL import Image
    import math
    import os
    import operator
    __docstring__ = "compare two image files"
    h1 = Image.open(image1path).resize((40,55)).histogram()
    best=99999999
    for root,dirs,files in os.walk("cards"):
        for file in [f for f in files]:
            list=(os.path.join(root, file))
            h2 = Image.open(list).resize((40,55)).histogram()
            rms = math.sqrt(reduce(operator.add, map(lambda a,b: (a-b)**2, h1, h2))/len(h1))
            print "RMS = "+str(rms)+"  and the picture is:"+list
            if rms<best:
                best=rms
                card=(os.path.join(file)).split(".")[0]

    return card

image1path="C:\\8d.jpg" #eight of diamonds.
card=get_card(image1path)
print card 
```

问题是它不能正常工作，因为在将每张卡的 RMS 与所有卡进行比较之后，有一些错误的卡可以获得最佳 RMS 标点符号。因此，公认的牌不是 t 必须的八方格。

我该怎么做？？如果您需要，我会用其他方式解释它，只需说出来。

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:35:25.810

通过查看您正在比较的图像，您实际上不想使用诸如`RMSE`和其他的指标。原因是因为所有图像在“RMSE 感觉”中都是相似的，甚至对于不关心图像中存在的基本关系的更精细的度量。以下是自己举的一些例子：

![在此处输入图像描述](../Images/3d4ae1ef4e3a13dda0aee759f5350616.png) ![在此处输入图像描述](../Images/f65e732b7cb22e9170d4bcbb5e13b9c8.png) ![在此处输入图像描述](../Images/544a00ac80077b21b8b3cf27494f0334.png) ![在此处输入图像描述](../Images/fb9d4d04e2f70d5b49074db5d96d8c4a.png) ![在此处输入图像描述](../Images/6894659d30506a57fd2d0fd919ce5a55.png)

在您的情况下，基本关系是：颜色（也区分黑桃、红心、菱形和梅花牌）和形状度量。因此，通过检测卡片的颜色，减少了搜索空间，剩下的就是辨别卡片顶部的数字。连同连通分量的数量和欧拉数，搜索进一步受到限制。现在剩下的就是区分：“9”与“6”、“4”、queen 或“A”；“J”、“2”、“5”或“7”中的“3”；“8”和“10”被解决，前者是由于欧拉数而后者是由于其连通分量的数量（这一切都假设卡片是唯一的，否则你继续寻找最相似的卡片）。在这里做的最简单的事情，

这是一个简单的实现，它考虑了这些点并适用于所有给定的输入。它需要一个图像和一个目录来查找要比较的图像。每一步都可以改进。

```
import sys
import numpy
from scipy.ndimage import morphology, label, find_objects
from PIL import Image

COLORS = range(4)
RED, GREEN, BLUE, BLACK = COLORS

def card_color(img):
    im = img.load()
    width, height = img.size
    black, blue, green, red = 0, 0, 0, 0
    for x in xrange(width):
        for y in xrange(height):
            r, g, b = im[x, y]
            if r > 200 and g > 200 and b > 200:
                # "white", ignore
                continue

            if r > 200 and g < 100 and b < 100:
                red += 1
            elif r < 100 and g < 100 and b > 200:
                blue += 1
            elif r < 50 and g < 50 and b < 50:
                black += 1
            elif r < 100 and g > 120 and b < 50: # dark green
                green += 1
    return max(zip((black, blue, green, red), COLORS))

def euler_number(img, conn=4):
    im = img.load()
    width, height = img.size

    c1, c2, c3 = 0, 0, 0
    for x in xrange(width - 1):
        for y in xrange(height - 1):
            s = (im[x,y] + im[x+1,y] + im[x,y+1] + im[x+1,y+1]) / 255
            if s == 1:
                c1 += 1
            elif s == 2:
                if (im[x+1,y] and im[x,y+1]) or (im[x,y] and im[x+1,y+1]):
                    c3 += 1
            elif s == 3:
                c2 += 1
    if conn == 4:
        return (c1 - c2 + 2 * c3) / 4
    else: # 8
        return (c1 - c2 - 2 * c3) / 4

def carefully_binarize(img, color):
    if color == BLACK:
        img = img.convert('L')
    else:
        img = img.split()[color]
    width, height = img.size
    im = numpy.empty((height + 2, width + 2), dtype=numpy.uint8) # Padding
    im.fill(255)
    im[1:-1, 1:-1] = numpy.array(img)
    threshold = im.mean() - im.std()
    im[im <= threshold] = 1
    im[im > threshold] = 0
    # Discard small components.
    lbl, ncc = label(im)
    for i in xrange(1, ncc + 1):
        py, px = numpy.nonzero(lbl == i)
        if len(py) < 30:
            im[lbl == i] = 0
    return Image.fromarray(im * 255)

def discard_bottom(img, k=0.5):
    width, height = img.size
    im = numpy.array(img)
    limit = height * k
    lbl, ncc = label(im)
    for i, oslice in enumerate(find_objects(lbl)):
        srow, scol = oslice
        if srow.stop > limit:
            ncc -= 1
            im[srow.start:srow.stop, scol.start:scol.stop] = 0
    return Image.fromarray(im), ncc

def signature(img):
    # Assumption: a single connected component is present now.
    im = numpy.array(img)
    im = morphology.binary_fill_holes(im)
    im = morphology.binary_dilation(im) - im

    py, px = numpy.nonzero(im)
    return Image.fromarray(im.astype(numpy.uint8)*255), zip(py, px)

def hausdorff(a, b):
    dist = 0
    for ai in a:
        mindist = float('inf')
        for bi in b:
            chess = max(abs(ai[0]-bi[0]), abs(ai[1]-bi[1]))
            if chess < mindist:
                mindist = chess
        if mindist > dist:
            dist = mindist
    return dist

img1 = Image.open(sys.argv[1]).convert('RGB')
dirpath = sys.argv[2]

img1_color = card_color(img1)[1]
img1 = carefully_binarize(img1, img1_color)
img1_top, img1_top_ncc = discard_bottom(img1)
img1_top_en = euler_number(img1_top)

feature = [img1_color, img1_top_ncc, img1_top_en]

match = []
for fname in os.listdir(dirpath):
    try:
        img2 = Image.open(os.path.join(dirpath, fname)).convert('RGB')
    except IOError:
        print "Ignoring", fname
        continue

    if card_color(img2)[1] != feature[0]:
        continue

    img2 = carefully_binarize(img2, feature[0])
    img2_top, ncc = discard_bottom(img2)
    if ncc != feature[1]:
        continue
    en = euler_number(img2_top)
    if en != feature[2]:
        continue

    match.append((img2_top, os.path.join(dirpath, fname)))

if len(match) == 1:
    print "Here is your best match:", match[0][1]
else:
    img1_sig, sig1 = signature(img1_top)
    best_match = float('inf'), None
    for img2, fname in match:
        img2_sig, sig2 = signature(img2)
        dist = hausdorff(sig1, sig2)
        if dist < best_match[0]:
            best_match = dist, fname

    print "Best match:", best_match[1] 
```

# c# - Castle DynamicProxy - 'classToProxy' 必须是一个类

> ID：14431447
> 
> 赞同：3
> 
> 时间：2013-01-21T01:46:42.620
> 
> 标签：c#, .net, castle-dynamicproxy

我可能错过了一些非常简单的东西。

我只是想写一个非常简约的 DynamicProxy 用法示例——我基本上想拦截调用并显示方法名称和参数值。我的代码如下：

```
public class FirstKindInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        Console.WriteLine("First kind interceptor before {0} call with parameter {1} ", invocation.Method.Name, invocation.Arguments[0]);
        invocation.Proceed();
        Console.WriteLine("First kind interceptor after the call");
    }
}

public interface IFancyService
{
    string GetResponse(string request);
}

public class FancyService : IFancyService
{
    public string GetResponse(string request)
    {
        return "Did you just say '" + request + "'?";
    }
}

class Program
{
    static void Main(string[] args)
    {
        var service = new FancyService();
        var interceptor = new FirstKindInterceptor();
        var generator = new ProxyGenerator();
        var proxy = generator.CreateClassProxyWithTarget<IFancyService>(service, new IInterceptor[] { interceptor } );

        Console.WriteLine(proxy.GetResponse("what?"));
    }
} 
```

但是，当我运行它时，出现以下异常：

> 未处理的异常：System.ArgumentException：“classToProxy”必须是类参数名称：classToProxy

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T20:12:22.713

错误是`CreateClassProxyWithTarget`需要是类而不是接口的类型。`CreateInterfaceProxyWithTarget`使用接口。

# java - 在java textArea中复制和粘贴导致问题

> ID：14431448
> 
> 赞同：0
> 
> 时间：2013-01-21T01:46:45.350
> 
> 标签：java, textarea, whitespace

我正在使用 textArea 从用户那里收集信息。用户必须每行输入一条信息。为了记录这些信息，我使用了一个字符串数组。当我测试它时，如果我手动键入行，它会起作用，但是如果我复制并粘贴行的信息并删除空白，我会得到一个 NumberFormatException。

```
//from applet class
private void record(java.awt.event.ActionEvent evt) {

    Test.copy(display.getText());

} 
```

类测试

```
public class Test{

    public Test() {

    }

    public void record() {    
        String [] lines = new String [4];

        lines = str.split("\n");

        String workerName = lines[0];
        String workerDepartment = lines[1];
        String workerID = lines[2];
        String workerPhone = lines[3];

        int wID = Integer.parseInt(workerID);
        int wPhone = Integer.parseInt(workerPhone);
    }
} 
```

例子

这有效...

> 约翰
> 
> 老板
> 
> 10
> 
> 5555555555

这不

粘贴

> 约翰老板 10 5555555555

（boss前点击，回车，10前点击，回车等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:53:37.003

我认为这是因为您只在换行符上拆分。尝试替换这个：

```
lines = str.split("\n"); 
```

有了这个：

```
lines = str.split("\\s+"); 
```

# php - 带有递增 id 的 MYSQL JOIN

> ID：14431450
> 
> 赞同：1
> 
> 时间：2013-01-21T01:46:47.893
> 
> 标签：php, mysql, join

> **可能重复：**
> [MySQL JOIN 查询帮助：对于最左侧表中的每一行，只返回最右侧表中的一行](https://stackoverflow.com/questions/3313614/mysql-join-query-help-return-only-one-row-from-the-right-most-table-for-every-r)

澄清并希望能帮助自己：

```
table1
------------
ID | jobname
_____________
1  | job1
2  | job2
3  | job3

table 2
-------------
ID  | jnid | image#
1   | 1    | 1.jpg
2   | 1    | 2.jpg
3   | 2    | 3.jpg
4   | 2    | 4.jpg
5   | 1    | 5.jpg 
```

所需的输出：job1 - 1.jpg
job2 - 3.jpg
等，直到我用完 jobname（现在 17 个条目）每个作业可能有 5 个以上的图像。我想从 image# 中随机选择一个与 jobname 对应的图像，直到 jobname 的总数，而不复制图像或 jobname。链接到该作业的 17 个作业名称和 17 个随机图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:37:22.730

您可能想尝试以下方法：

```
SELECT * FROM table1 t1 JOIN table2 t2 ON t1.ID = t2.jnid GROUP BY t1.ID 
```

# windows - 端口 localhost:3000 没有响应

> ID：14431454
> 
> 赞同：0
> 
> 时间：2013-01-21T01:46:55.647
> 
> 标签：windows, command, port, meteor

我使用 Windows 并运行了 .msi。

`localhost:3000`不响应。我激活并休息了 iis，但在 3000 以下看不到任何内容。如何检查端口是否处于活动状态以及是否有人在监听？我在 cmd 中尝试过`lsof -i`，我收到错误“lsof unrecognized batch file”

此外，当我从带有示例或虚拟目录的目录中运行流星时，我没有其他任何内容，例如

> ..正在运行，端口 localhost:3000 处于活动状态

它看起来不像命令'meteor'在我的机器上做任何事情。

我是否需要将我的流星文件夹放在安装文件夹中（即`C:/Program Files(x86)/meteor`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T14:05:43.650

自从发布此问题以来，Meteor 已经获得了官方的 Windows 安装程序。看看现在能不能用。

# java - Java压缩集合库

> ID：14431455
> 
> 赞同：4
> 
> 时间：2013-01-21T01:47:15.753
> 
> 标签：java, collections, compression

是否有提供压缩其组成对象的集合的 Java 第三方库？我用谷歌搜索了它，但结果是空白的。这样的构造对大型（读取多演出）地图或类似的东西有用吗？当然，访问和存储会降低性能，但是对于长期不经常访问的引用，这似乎是合理的，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:59:49.733

这个用例本质上是内存数据库的用例，所以你应该研究一下。

如果要这样做，您可能必须基本上将任意 java 对象序列化为字节，然后将它们反射回类中。也可以使用内存数据库 - 无论如何我都看不到真正的区别，除了 java 对于这种事情可能有点高级。

请注意，这实际上在某种程度上是特定于 java 的——它可能是在 C 中你可以有一个库来获取内存并压缩它而无需做任何花哨的事情，但是由于 Java 无法访问内存，所以它使那种东西有点难……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T02:32:34.380

MapDB 显然实现了 Java 集合样式映射并且可以执行“透明压缩”（参见[http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#compressionEnable()](http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#compressionEnable%28%29)）。

我认为它是为磁盘存储或堆外存储设计的（请参阅[http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#newDirectMemoryDB()](http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#newDirectMemoryDB%28%29)），因此您可以在磁盘块之间进行选择或一块非垃圾收集的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T02:57:07.593

不太可能——这样的集合在大多数情况下并不是很有用

数据结构通常旨在为一组特定的使用模式提供高性能。添加压缩只会增加开销并减慢它们的主要用例。特别注意，最有效的压缩算法使用对先前看到的数据的反向引用。这通常与集合类所期望的随机访问模式不兼容（即不可能有效地实现），并且也与改变集合部分的能力不兼容。

当然，压缩非常适合顺序访问大块数据，以及处理我们需要在较慢的存储和主内存之间切换的非常大的数据量。但是我们已经有了用于文件系统和数据库的强大工具 :-)

# c# - 如何从 3 个值创建唯一 ID ?

> ID：14431456
> 
> 赞同：6
> 
> 时间：2013-01-21T01:47:24.203
> 
> 标签：c#, .net, .net-4.0

我正在解析一个在线提要（tcp 中继），它每秒发送大约 30-50 条消息（300-500 行数据）。消息包含 2 种类型的信息：***订单***和***历史***。

因此，对于***orders***，每个人都有一个唯一的 ID，我得到了：

```
private static Dictionary<long,MarketOrder> MarketOrders = new Dictionary<long,MarketOrder>(); 
```

我在订单进来时将订单插入其中。数据来自缓存文件，因此消息可以包含旧数据并且必须被过滤掉。我目前正在这样做：

```
if (MarketOrders.ContainsKey(order.OrderID))
{
    // If record exists in a dictionary add hits and overwrite the object if newer.
    int hits = MarketOrders[order.OrderID].Hits;

    if (MarketOrders[order.OrderID].LastUpdated < order.LastUpdated)
    {
        MarketOrders[order.OrderID] = order;
    }

    MarketOrders[order.OrderID].Hits = hits + 1;
}
else
{
    // If not, add new one
    order.Hits = 1;
    MarketOrders.Add(order.OrderID, order);
} 
```

这在 BackgroundWorker 进程中运行，当字典项计数达到 2500 时，将对其进行深度克隆（使用二进制序列化程序）、清除并启动另一个后台进程，将克隆副本插入数据库。一旦字典被清除，就会再次插入订单。所以基本上我试图尽可能多地接收并分批插入数据库。

***我正在尝试对历史***数据做类似的事情。没有唯一的 ID，唯一性来自`<int, int, DateTime>`值的组合。

我需要一种从这 3 个值生成唯一键的快速方法，因此我可以像处理订单一样将其存储在字典中，或者另一种存储和过滤该数据的方法。

有什么建议么？我的目标是 .NET 4.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T01:52:51.023

a 的键`Dictionary`不必是简单类型。在您的情况下，最简单的解决方案是`Tuple<int, int, DateTime>`用作密钥。另一种方法是创建正确实现`Equals()`和`GetHashCode()`（理想情况下也是`IEquatable`）的自定义类型。

你可以在数据库端做同样的事情，大多数数据库都支持[复合键](http://en.wikipedia.org/wiki/Compound_key)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:15:26.523

您可以创建一个`Guid`并使用它是关键：

```
byte[] bytes = new byte[16];

BitConverter.GetBytes(i1).CopyTo(bytes, 0);
BitConverter.GetBytes(i2).CopyTo(bytes, 4);
BitConverter.GetBytes(dt.Ticks).CopyTo(bytes, 8);

Guid key = new Guid(bytes); 
```

`Dictionary<Guid, int>`使用 a vs a在循环中运行上述内容`Dictionary<Tuple<int, int, DateTime>, int>`，`Guid`关键似乎更快，但您应该在您的场景中对其进行测试。

只是为了澄清，我用 a`Dictionary<Guid, int>`来测试，但在你的情况下，它会是`Dictionary<Guid, YourHistoryType>`. `Guid`如果在您的代码中进行所有其他操作时，如果使用 a和之间的任何差异`Tuple<int, int, DateTime>`可以忽略不计，并且您可以使用任何感觉更合适的方法，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:16:38.957

您如何看待将所有数据放入数组或其他对象并对其进行序列化？

此外，您可以使用 MD5 算法将所有这些打包成固定长度的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T02:43:54.063

我更喜欢 svick 的回答，但只是把它扔在那里嵌套怎么样`Dictionary`？`Dictionary<int, Dictionary<int, Dictionary<DateTime, object>>>`. 可能的？它可以允许快速查找项目集合。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-21T01:54:39.327

像这样的东西怎么样：

```
int i1 = 123123;
int i2 = 23433;
DateTime dt = DateTime.Now;
string s;
s = i1.ToString("X") + i2.ToString("X") + dt.Ticks.ToString(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-21T01:58:57.053

我开放的唯一方法就是这样做，

```
DateTime dt = GetYourDateTime();
string uniqueID = dt.Year + "" + dt.Month + "" + dt.Day + "" + dt.Hour + "" + dt.Minute + "" + dt.Second + "" + dt.Millisecond + ""; 
```

然后，您可以将其转换为任何数字类型，即十进制、长整数等

**更新**

```
int a = 2000;
int b = 3000;
DateTime dt = GetYourDateTime();
    string uniqueID = a + "-" + b+ "-" +dt.Year + "" + dt.Month + "" + dt.Day + "" + dt.Hour + "" + dt.Minute + "" + dt.Second + "" + dt.Millisecond + ""; 
```

对于 2013 年 1 月 11 日：2000-3000-2013011100000000

对于 2013 年 11 月 1 日：2000-3000-2013110100000000

# java - Httpsurlconnection 不关闭套接字

> ID：14431458
> 
> 赞同：1
> 
> 时间：2013-01-21T01:47:59.040
> 
> 标签：java, android

我试图解决这个问题，但我没有得到一个好的解决方案。我刚刚用 httsurlconnection 打开了一个套接字并关闭了。但是，我打开的套接字没有关闭，并且套接字状态为 CLOSE_WAIT。这是我的代码和空气记录。我的代码有什么问题？

```
 String https_url = "https://www.google.com";

    URL url = new URL(https_url);

    try {
        con = (HttpsURLConnection) url.openConnection();
        con.setRequestProperty("Connection", "close");
        if(con!=null){
            BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream()));
            String input = br.readLine();
            while(input.length() != 0)
            {

                input = br.readLine();  
            }
            br.close();
            con.disconnect();               

        }
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:02:32.067

您肯定会从此代码中获得 NullPointerException。在执行任何其他操作之前，您必须测试 readLine() 的结果是否为 null。我看不出测试 HTML 页面中的*空*行有什么意义。

# java - 在 Eclipse 中创建 servlet 后控制台不刷新 - Juno

> ID：14431460
> 
> 赞同：0
> 
> 时间：2013-01-21T01:48:09.370
> 
> 标签：java, eclipse

我有

```
Eclipse Java EE IDE for Web Developers.

Version: Juno Service Release 1
Build id: 20120920-0800 
```

我创建了一个基本的

```
public class T1 {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println("Hello World");
}

} 
```

这工作正常。

但是，一旦我创建了另一个动态 Web 项目，现在返回以任何新输出而不是“Hello World”运行之前的程序，控制台仍然会打印相同的旧`Hello World`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:21:03.157

检查 Web 服务器中的配置文件。如果是 tomcat，它的 installDirectory/conf/server.xml .. 检查您的服务器文档以了解该文件。检查 DefaultContext 元素，它的 reloadable 属性应该设置为 true，.. 我觉得它没有正确配置。

这将帮助您在代码更改时重新编译后自动重新加载 servlet 和 jsp。

# mongodb - 从MongoDB中的数组中获取文档

> ID：14431461
> 
> 赞同：0
> 
> 时间：2013-01-21T01:48:15.077
> 
> 标签：mongodb

我有一个名为 season 的集合，如下所示：

```
[ 
  { 
    week: 1,
    matchups: [ 
        {
            home : ObjectId("1"),
            away : ObjectId("2")
        },
        {
            home : ObjectId("3"),
            away : ObjectId("4")
        },

    ],
    _id: 50fc50c9ce87149ee3000007 
  },
  { 
    week: 2,
    matchups: [ 
        {
            home : ObjectId("3"),
            away : ObjectId("1")
        },
        {
            home : ObjectId("2"),
            away : ObjectId("4")
        },
    ],
    _id: 50fc50c9ce87149ee3000008 
  }
] 
```

我正在尝试获取主队或客队为 ObjectId("1") 的所有比赛。我希望返回看起来像这样：

```
[ 
  { 
    week: 1,
    matchups: [ 
        {
            home : ObjectId("1"),
            away : ObjectId("2")
        }

    ],
    _id: 50fc50c9ce87149ee3000007 
  },
  { 
    week: 2,
    matchups: [ 
        {
            home : ObjectId("3"),
            away : ObjectId("1")
        }
    ],
    _id: 50fc50c9ce87149ee3000008 
  }
] 
```

是否可以在 db.season.find() 上使用此结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:55:27.973

只要您最多`matchups`匹配一个潜在元素，就可以使用[`$elemMatch`](http://docs.mongodb.org/manual/reference/projection/elemMatch/)投影运算符来执行此操作：

```
db.seasons.find(
    {$or: [{'matchups.home': ObjectId("1")},{'matchups.away': ObjectId("1")}]}, 
    {week: 1, matchups: {
        $elemMatch: {$or: [{home: ObjectId("1")},{away: ObjectId("1")}]}
    }}); 
```

与 Wes 关于`ObjectId("1")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:27:44.003

不是使用 .find，而是使用 .aggregate：

```
db.seasons.aggregate(
  {$match:{$or:[{"matchups.home":ObjectId("1")}, {"matchups.away":ObjectId("1")}]}}, 
  {$unwind:"$matchups"}, 
  {$match:{$or:[{"matchups.home":ObjectId("1")}, {"matchups.away":ObjectId("1")}]}}, 
  {$group:{_id:"$_id", week:{$first:"$week"}, matchups:{$addToSet:"$matchups"}}}); 
```

1.  第一个匹配过滤器的那些有你的团队（如果有一些不包含你的团队的记录将使其余的更有效率）
2.  放松对决
3.  第二场比赛过滤器仅适用于拥有您的团队的人
4.  组再次重建您的记录

限制是带有聚合的文档大小。希望这可以帮助。

使用 .find 可以做的最好的事情是第一次匹配，然后在应用程序端过滤匹配，AFAIK。

此外， ObjectId("1") 无效，仅供参考。

# android - 从drawable打开图像到画廊意图

> ID：14431464
> 
> 赞同：1
> 
> 时间：2013-01-21T01:48:38.013
> 
> 标签：android, android-intent, android-gallery, android-image, android-drawable

我想只打开一张图像并具有音高缩放功能，所以（我认为）最简单的方法是在画廊意图中打开该图像。任何人都可以分享如何使用可绘制的特定图片调用画廊意图的示例？

我尝试使用类似的东西但无法使其工作（错误的文件补丁？）。

```
Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse("com.me.example/drawable/thisimage.png"), "image/*");
            startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:33:10.880

根据[这个帖子](http://androidbook.blogspot.in/2009/08/referring-to-android-resources-using.html)

您应该执行以下操作：

```
 String uriStr = "android.resource://"+ "com.example.myapp"+ "/" +  R.drawable.photo_h01;
 Uri uri = Uri.parse(uriStr); 
```

我面前没有 Eclipse，但这就是我在几个来源中发现的

# java - 如何确定系统托盘在屏幕上的位置？

> ID：14431467
> 
> 赞同：3
> 
> 时间：2013-01-21T01:49:10.350
> 
> 标签：java

所以我想`JPopupMenu`在用户单击系统托盘中的图标时显示一个。但是，任务栏可以位于屏幕上的任何位置——底部、顶部、右侧、左侧。

![在此处输入图像描述](../Images/44f2be16de4b08d2fea8307101525bd3.png)

如何确定系统托盘的位置以便显示弹出窗口？
`getX()`并且`getY()`可以得到点击的坐标。可以做一些数学运算来正确显示弹出窗口吗？

一个简单的解释和示例代码将不胜感激。

`TrayIcon`另外，如果任务栏是隐藏的，我添加的时候会不会产生异常`SystemTray`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T01:59:36.237

在 Swing 本机中没有真正的方法可以做到这一点，但是，您可以使用以下命令推导出可能的位置...

```
GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
Rectangle bounds = gd.getDefaultConfiguration().getBounds();
Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gd.getDefaultConfiguration());

Rectangle safeBounds = new Rectangle(bounds);
safeBounds.x += insets.left;
safeBounds.y += insets.top;
safeBounds.width -= (insets.left + insets.right);
safeBounds.height -= (insets.top + insets.bottom);

System.out.println("Bounds = " + bounds);
System.out.println("SafeBounds = " + safeBounds);

Area area = new Area(bounds);
area.subtract(new Area(safeBounds));
System.out.println("Area = " + area.getBounds()); 
```

哪个输出

```
Bounds = java.awt.Rectangle[x=0,y=0,width=2560,height=1600]
SafeBounds = java.awt.Rectangle[x=0,y=40,width=2560,height=1560]
Area = java.awt.Rectangle[x=0,y=0,width=2560,height=40] 
```

对于我的系统（注意，我的任务栏位于屏幕顶部）

**更新**

正如我之前对您关于托盘图标的问题的回答所证明的那样......

```
public class TestTaskIcon {

  public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {

        Image img = null;
        try {
          img = ImageIO.read(new File("floppy_disk_red.png"));
        } catch (IOException e) {
          e.printStackTrace();
        }
        TrayIcon ti = new TrayIcon(img, "Tooltip");
        ti.addMouseListener(new MouseAdapter() {
          @Override
          public void mouseClicked(MouseEvent e) {
            Rectangle bounds = getSafeScreenBounds(e.getPoint());
            JPopupMenu popup = new JPopupMenu();
            popup.add(new JLabel("hello"));

            Point point = e.getPoint();

            int x = point.x;
            int y = point.y;
            if (y < bounds.y) {
              y = bounds.y;
            } else if (y > bounds.y + bounds.height) {
              y = bounds.y + bounds.height;
            }
            if (x < bounds.x) {
              x = bounds.x;
            } else if (x > bounds.x + bounds.width) {
              x = bounds.x + bounds.width;
            }

            if (x + popup.getPreferredSize().width > bounds.x + bounds.width) {
              x = (bounds.x + bounds.width) - popup.getPreferredSize().width;
            }
            if (y + popup.getPreferredSize().height > bounds.y + bounds.height) {
              y = (bounds.y + bounds.height) - popup.getPreferredSize().height;
            }
            popup.setLocation(x, y);
            popup.setVisible(true);
          }
        });
        try {
          SystemTray.getSystemTray().add(ti);
        } catch (AWTException ex) {
          Logger.getLogger(TestTaskIcon.class.getName()).log(Level.SEVERE, null, ex);
        }
      }
    });
  }

  public static Rectangle getSafeScreenBounds(Point pos) {

    Rectangle bounds = getScreenBoundsAt(pos);
    Insets insets = getScreenInsetsAt(pos);

    bounds.x += insets.left;
    bounds.y += insets.top;
    bounds.width -= (insets.left + insets.right);
    bounds.height -= (insets.top + insets.bottom);

    return bounds;

  }

  public static Insets getScreenInsetsAt(Point pos) {
    GraphicsDevice gd = getGraphicsDeviceAt(pos);
    Insets insets = null;
    if (gd != null) {
      insets = Toolkit.getDefaultToolkit().getScreenInsets(gd.getDefaultConfiguration());
    }
    return insets;
  }

  public static Rectangle getScreenBoundsAt(Point pos) {
    GraphicsDevice gd = getGraphicsDeviceAt(pos);
    Rectangle bounds = null;
    if (gd != null) {
      bounds = gd.getDefaultConfiguration().getBounds();
    }
    return bounds;
  }

  public static GraphicsDevice getGraphicsDeviceAt(Point pos) {

    GraphicsDevice device = null;

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice lstGDs[] = ge.getScreenDevices();

    ArrayList<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);

    for (GraphicsDevice gd : lstGDs) {

      GraphicsConfiguration gc = gd.getDefaultConfiguration();
      Rectangle screenBounds = gc.getBounds();

      if (screenBounds.contains(pos)) {

        lstDevices.add(gd);

      }

    }

    if (lstDevices.size() > 0) {
      device = lstDevices.get(0);
    } else {
      device = ge.getDefaultScreenDevice();
    }

    return device;

  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T01:53:28.787

我认为您无法确定系统托盘位置，但您可以获得整个任务栏的位置和大小。您必须使用 WINAPI (shell32.dll)。

看到这个：

[如何获取任务栏的位置和大小？](https://stackoverflow.com/questions/1264406/how-do-i-get-the-taskbars-position-and-size)

这是 C# 中的示例，但 WINAPI 在 java 中可用。

在这里您可以找到有关 Java + WINAPI 的信息：

[从 Java 调用 Win32 API 方法](https://stackoverflow.com/questions/2389156/calling-win32-api-method-from-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T21:52:35.960

我按照 Kamil 的方法使用 JNA 和 Win32 DLL 获取任务栏大小。似乎该机制可以检测任务栏，但要获得确切的图标位置是一项挑战。

JNA 代码，使用 Kamil 提供的链接，用 Java 实现：

```
package at.cone.core.tray;

import java.awt.Rectangle;

import com.sun.jna.Native;
import com.sun.jna.platform.win32.Shell32;
import com.sun.jna.platform.win32.ShellAPI.APPBARDATA;
import com.sun.jna.platform.win32.User32;
import com.sun.jna.platform.win32.WinDef.DWORD;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.platform.win32.WinDef.UINT;
import com.sun.jna.platform.win32.WinDef.UINT_PTR;

public class SystemTray {

    private static final String TASKBAR_CLASSNAME = "Shell_TrayWnd";
    private static UINT_PTR UINT_PTR_ZERO = new UINT_PTR(0);

    /*
     * See
     * https://msdn.microsoft.com/en-us/library/windows/desktop/bb762108(v=vs.85).
     * aspx
     */
    private static DWORD ABS_ALWAYSONTOP = new DWORD(0x2);
    private static DWORD ABM_GETSTATE = new DWORD(0x4);
    private static DWORD ABM_GETTASKBARPOS = new DWORD(0x5);
    private static DWORD ABM_GETAUTOHIDEBAR = new DWORD(0x7);

    static {
        System.setProperty("jna.library.path", YOUR_PATH_TO_JNA_DLLS);

    }

    private UINT position;
    private Rectangle bounds;
    private boolean alwaysOnTop;
    private boolean autoHide;

    public SystemTray() {
        HWND hTaskbar = User32.INSTANCE.FindWindow(TASKBAR_CLASSNAME, null);

        APPBARDATA data = new APPBARDATA();

        data.cbSize = new DWORD(Native.getNativeSize(APPBARDATA.class));// (uint) Marshal.SizeOf(typeof(APPBARDATA));
        data.hWnd = hTaskbar;
        UINT_PTR result = Shell32.INSTANCE.SHAppBarMessage(ABM_GETTASKBARPOS, data);
        if (result == UINT_PTR_ZERO)
            throw new IllegalStateException();

        this.position = (UINT) data.uEdge;
        this.bounds = new Rectangle(data.rc.left, data.rc.top, data.rc.right - data.rc.left,
                data.rc.bottom - data.rc.top);

        data.cbSize = new DWORD(Native.getNativeSize(APPBARDATA.class));
        result = Shell32.INSTANCE.SHAppBarMessage(ABM_GETSTATE, data);
        long state = result.longValue();
        this.alwaysOnTop = (state & ABS_ALWAYSONTOP.longValue()) == ABS_ALWAYSONTOP.longValue();
        this.autoHide = (state & ABM_GETAUTOHIDEBAR.longValue()) == ABM_GETAUTOHIDEBAR.longValue();
    }

    public Rectangle getBounds() {
        return bounds;
    }
} 
```

但是这个实现主要考虑任务栏位置。确切的图标位置机制仍然可以改进 - 参见[https://social.msdn.microsoft.com/Forums/windows/en-US/4ac8d81e-f281-4b32-9407-e663e6c234ae/how-to-get-screen-coordinates- of-notifyicon?forum=winforms](https://social.msdn.microsoft.com/Forums/windows/en-US/4ac8d81e-f281-4b32-9407-e663e6c234ae/how-to-get-screen-coordinates-of-notifyicon?forum=winforms)

# ruby-on-rails - 使用 Rails 数组中的两个键/值对构建哈希数组

> ID：14431469
> 
> 赞同：0
> 
> 时间：2013-01-21T01:49:34.847
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有一个看起来像这样的数组：

```
[172336, 60, 172339, 64, 172342, 62, 172345, 61, 172348, 62, .....] 
```

我正在尝试将其转换为哈希数组，其中每个哈希有两个键/值对，键是“时间”或“海拔”，“时间”哈希的值在 [0] 处索引， [2]、[4] 等，而“海拔”位于 [1]、[3] 等。所以，它看起来像：

```
[{time => 172336, elevation => 60}, {time => 172339, elevation => 64}, {time => 172342, elevation => 62},.....] 
```

通过以下方式获取每个项目很容易：

```
my_array.each do |x|
 new_array << {:time => x}
end 
```

但这显然会将每个值分配给一个“时间”键。我无法弄清楚如何获得每第二个项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T01:53:41.677

您可以尝试使用 each_slice(2) 将返回的结果按 2 分批处理

```
 my_array.each_slice(2) do |value| 
  array << {:time => value[0], :elevation => value[1]}
end 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:02:54.100

你可以做

```
keys = [:time, :elevation]
values = [172336, 60, 172339, 64, 172342, 62, 172345, 61, 172348, 62]

array = values.each_slice(2).map { |value| Hash[keys.zip(value)] }
# [{:time=>172336, :elevation=>60},
#  {:time=>172339, :elevation=>64},
#  {:time=>172342, :elevation=>62},
#  {:time=>172345, :elevation=>61},
#  {:time=>172348, :elevation=>62}] 
```

# ruby-on-rails - 设计 /users/confirmation 路径

> ID：14431470
> 
> 赞同：3
> 
> 时间：2013-01-21T01:49:48.237
> 
> 标签：ruby-on-rails, devise, routing, confirmation, devise-confirmable

无法确认电子邮件，与设计。

**路由.rb**

```
 devise_for :users, :controllers => { :sessions => "users/sessions" ,:omniauth_callbacks => "users/omniauth_callbacks" } do
    post   "users/confirmation",          :to => "devise/confirmations#create"
    get    "users/confirmation/new",      :to => "devise/confirmations#new", :as => "new_confirmation"
    get    "users/confirmation",          :to => "devise/confirmations#show"
  end
  resources :pensioners #, :only => [:index, :destroy, :new]
  resources :users #, :only => [:index, :destroy, :new] 
```

**heroku 运行 rake 路线**

```
 ....
   user_confirmation POST   /users/confirmation(.:format) devise/confirmations#create

   new_user_confirmation GET    /users/confirmation/new(.:format) devise/confirmations#new

                  GET    /users/confirmation(.:format)          devise/confirmations#show

                                                              .... 
```

但是当我提出**要求时**

```
 GET /users/confirmation?confirmation_token=BeELxDDq9sxpseLh8Rdn 
```

我收到 404**错误**

```
 The page you were looking for doesn't exist.
  You may have mistyped the address or the page may have moved. 
```

我哪里错了？

**型号**：

```
 class User < ActiveRecord::Base
      devise .... , :confirmable 
```

**迁移**：

```
class AddConfirmableToUsers < ActiveRecord::Migration
  def up
   add_column :users, :confirmation_token, :string
   add_column :users, :confirmed_at, :datetime
   add_column :users, :confirmation_sent_at, :datetime
   add_index :users, :confirmation_token, :unique => true
   User.update_all(:confirmed_at => Time.now)
  end
  .... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-18T10:40:45.297

有点晚了，但无论如何。尝试使用 PATCH 而不是 GET。你`routes.rb`应该有一个像

```
patch '/user/confirmation' => 'user/confirmations#update', :via => :patch, :as => :update_user_confirmation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T18:20:58.147

在带有 Devise 4.4.3 的 Rails 4.2.10 中，这对我有用：

```
devise_for :users, controllers: { registrations: 'registrations',
                                  sessions: 'sessions',
                                  confirmations: 'confirmations' }
devise_scope :user do
  # custom routes...
  get 'confirmation/sent' => 'confirmations#sent'
  patch 'users/confirmation' => 'confirmations#create'
end 
```

# java - 为什么在 Java 中在单独的文件中声明枚举？

> ID：14431472
> 
> 赞同：25
> 
> 时间：2013-01-21T01:49:53.327
> 
> 标签：java, enums

为什么这个枚举在它自己的文件中声明。这有优势吗？另外我怎么能把它放在两个文件之一中。我真的不知道我在做什么。还请以简单的方式解释这一点，因为这是一个教科书示例，而且我对 Java 还很陌生。

ScaleName.java

```
enum ScaleName {celsius, fahrenheit, kelvin, rankine}; 
```

温度.java

```
class Temperature {

    private double number;
    private ScaleName scale;

    public Temperature() {
        number = 0.0;
        scale = ScaleName.fahrenheit;
    }

    public Temperature(double number) {
        this.number = number;
        scale = ScaleName.fahrenheit;
    }

    public Temperature(ScaleName scale) {
        number = 0.0;
        this.scale = scale;
    }

    public Temperature(double number, ScaleName scale) {
        this.number = number;
        this.scale = scale;
    }

    public void setNumber(double number) {
        this.number = number;
    }

    public double getNumber() {
        return number;
    }

    public void setScale(ScaleName scale) {
        this.scale = scale;
    }

    public ScaleName getScale() {
        return scale;
    }
} 
```

使用温度.java

```
class Temperature {

    private double number;
    private ScaleName scale;

    public Temperature() {
        number = 0.0;
        scale = ScaleName.fahrenheit;
    }

    public Temperature(double number) {
        this.number = number;
        scale = ScaleName.fahrenheit;
    }

    public Temperature(ScaleName scale) {
        number = 0.0;
        this.scale = scale;
    }

    public Temperature(double number, ScaleName scale) {
        this.number = number;
        this.scale = scale;
    }

    public void setNumber(double number) {
        this.number = number;
    }

    public double getNumber() {
        return number;
    }

    public void setScale(ScaleName scale) {
        this.scale = scale;
    }

    public ScaleName getScale() {
        return scale;
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T02:05:24.853

> 为什么在 Java 中在单独的文件中声明枚举？

您不必在单独的文件*中*声明。`enum`你可以这样做：

```
public class Temperature {
    public enum ScaleName {celsius, fahrenheit, kelvin, rankine};

    private double number;
    private ScaleName scale;

    public Temperature() {
        number = 0.0;
        scale = ScaleName.fahrenheit;
    }
    ...
} 
```

这与使枚举成为顶级类之间的唯一区别是，当您在不同的类中使用枚举时，您现在需要*限定枚举的名称。*

但是*在我的示例*中发生的事情与枚举是任何其他静态嵌套类时发生的事情没有什么不同。（嵌套枚举是隐式静态的，因此我们不需要`static`关键字。请参阅[JLS 8.9](https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.9)。）

* * *

> 为什么这个枚举在它自己的文件中声明。

因为代码作者选择了这种方式¹ .

> 这有优势吗？

是的。这意味着不必限定`enum`使用它......在某些情况下，如果`enum`如上所述嵌套，则必须这样做。

* * *

实际上，Java 确实允许您将多个顶级类放入同一个源文件*中，前提是*除了其中一个类之外的所有类都是“包私有的”。但是，这样做通常被认为是不好的风格，并且对于某些工具链来说可能会有问题......我听说过。

* * *

^(1 - 如果您想知道代码作者选择这样做的*真正*原因，您需要询问他们！)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-21T01:54:35.607

枚举不仅仅是 Java 中的裸值，它们远不止这些。它们本身就是类（它们继承`Object`）。并考虑这些：

```
public enum Int {
    ONE(1),
    TWO(2);

    private final int value;

    Int(final int value) { this.value = value; }

    public int getValue() { return value; }

    @Override
    public String toString() { return "I am integer " + value; }
} 
```

还要考虑：

```
public enum Operation
{
    PLUS
        {
            @Override
            public int calculate(final int i1, final int i2)
            {
                return i1 + i2; 
            }
        };

    public abstract int calculate(int i1, int i2);
}

final int ret = Operation.PLUS.calculate(2, 3); 
```

你也可以将它们结合起来。它们是非常强大的工具。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T01:53:12.327

An`enum`是 a`class`并且遵循相同的规则。

将它放在自己的文件中就像在单独的文件中移动内部类一样，不多也不少。所以是的，您可以将它移动到其中一个类中，并能够使用`OuterClass.ScaleName`语法从外部访问它。

# java - if else 语句

> ID：14431474
> 
> 赞同：0
> 
> 时间：2013-01-21T01:51:00.930
> 
> 标签：java, android, htmlcleaner

我有一个包含几个 if/else 语句的代码。但是，每当抛出“else”案例时，所有后续语句也会导致“else”。这是代码，我会很感激一些帮助！

```
public List<Integer> htmlHelper(String arg) throws IOException,
        XPatherException, ParserConfigurationException,
        XPathExpressionException {
    CleanerProperties props = new CleanerProperties();

    props.setTranslateSpecialEntities(true);
    props.setTransResCharsToNCR(true);
    props.setOmitComments(true);

    HtmlCleaner cleaner = new HtmlCleaner(props);
    rootNode = cleaner.clean(arg);

    TagNode tagNode = new HtmlCleaner(props).clean(new URL(
            "http://www.athletics.psu.edu/psustrength/index_rec.asp"));
    org.w3c.dom.Document doc = (org.w3c.dom.Document) new DomSerializer(
            new CleanerProperties()).createDOM(tagNode);

    XPath jpath = XPathFactory.newInstance().newXPath();
    String recinfo = (String) jpath
            .evaluate(

"/html/body/div/div[1]/div/div/table/tbody/tr[3]/td[2]/p[2]/text()",
                    doc, XPathConstants.STRING);
    String recnum = recinfo.replaceAll("\\D+", "");

    if (recnum != null && recnum.length() == 0) {

        recnumint = 500;
        grec = 0;
    } else {
        recnumint = Integer.parseInt(recnum);
        grec = recnumint;
    }

    XPath ipath = XPathFactory.newInstance().newXPath();
    String iminfo = (String) ipath
            .evaluate(

"/html/body/div/div[3]/div/div/table/tbody/tr[2]/td[2]/p[2]/text()",
                    doc, XPathConstants.STRING);
    String imnum = iminfo.replaceAll("\\D+", "");

    if (imnum != null && recnum.length() == 0) {

        imint = 400;
        gim = 0;
    } else {
        imint = Integer.parseInt(imnum);
        gim = imint;
    }

    XPath xpath = XPathFactory.newInstance().newXPath();
    String whiteinfo = (String) xpath
            .evaluate(

"/html/body/div/div[3]/div/div/table/tbody/tr[1]/td[2]/p[2]/text()",
                    doc, XPathConstants.STRING);
    String whitenum = whiteinfo.replaceAll("\\D+", "");

    if (whitenum != null && recnum.length() == 0) {

        whitenumint = 450;
        gwhite = 0;
    } else {
        whitenumint = Integer.parseInt(whitenum);
        gwhite = whitenumint;
    }

    XPath fpath = XPathFactory.newInstance().newXPath();
    String fitinfo = (String) fpath
            .evaluate(

"/html/body/div/div[3]/div/div/table/tbody/tr[4]/td[2]/p[2]/text()",
                    doc, XPathConstants.STRING);
    String fitnum = fitinfo.replaceAll("\\D+", "");

    if (fitnum != null && recnum.length() == 0) {

        fitint = 470;
        gfit = 0;
    } else {
        fitint = Integer.parseInt(fitnum);
        gfit = fitint;
    }

    List<Integer> list = new ArrayList<Integer>();
    list.add(recnumint);
    list.add(whitenumint);
    list.add(imint);
    list.add(fitint);

    return list;
}

} 
```

如前所述，当抛出第一个“else”语句时，就会出现问题。如果第一种情况是“if”，第二种情况是“else”，那么第三和第四种情况也将是“else”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:59:04.187

你所有的`if`s都有相同的第二个条件，也许这就是原因？

你的意思是

```
if (imnum != null && imnum .length() == 0) {
                     ^^^^^^ 
```

**代替**

```
if (imnum != null && recnum.length() == 0) { 
```

同样地

```
if (whitenum != null && whitenum.length() == 0) {
                        ^^^^^^^^^ 
```

而且当然..

```
if (fitnum != null && fitnum.length() == 0) {
                      ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:04:12.027

请记住，NOT (A AND B) 与 (NOT A) OR (NOT B) 相同。使用调试器找出失败的条件。

# permissions - 无法更改服务器上的文件权限。这可能是因为我的网站没有域名吗？

> ID：14431475
> 
> 赞同：1
> 
> 时间：2013-01-21T01:51:30.893
> 
> 标签：permissions, ftp, webserver, tinymce, whm

我正在为尚未决定其域名的客户开发一个网站。我通过 WHM 在 Web 服务器上设置了一个帐户，但没有将任何域名指向它。

一切都很顺利，直到我使用插件（TinyMCE）尝试浏览服务器上的文件 - 它不起作用，所以我查看了它的脚本文件并意识到它们的权限设置为不可执行（644）。我厌倦了将其更改为可执行文件 (755)，但在我的 FTP 客户端控制台中出现错误：

```
550 Could not change perms on file.js: Operation not permitted 
```

这可能是因为我不是通过特定的 FTP 帐户访问服务器，因此服务器已锁定文件？

EG：我使用服务器 IP 地址通过我的 FTP 访问文件，而不是类似：

`ftp.mysite.com`

任何关于这方面的建议都会很棒！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T11:48:47.077

是的，FTP 帐户权限存在问题。您必须使用主 cPanel 帐户用户名和密码登录您的服务器，或者您可以通过 cPanel >> 文件管理器更改您的文件权限

# php - 如何在类方法中正确使用全局变量

> ID：14431478
> 
> 赞同：0
> 
> 时间：2013-01-21T01:52:09.707
> 
> 标签：php

目前我正在重新修改我目前编写的一些代码，如下所示：

```
<?php
global $foo;
$foo = "foo";

class foo{
   function bar(){
      global $foo;
      return $foo."bar";
   }
}

$class = new foo();
echo foo->bar();
//returns 'foobar';
?> 
```

这行得通，很好。我的问题是，这是包含变量的正确方法吗？我的一些类文件有超过 20 个全局变量，必须在使用它们的每个方法中重新定义为全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:59:08.960

尽可能避免使用全局变量。我不会在这里重复为什么，因为有很多关于 SO 的答案解释了为什么它被认为是一种不好的做法（[示例](https://stackoverflow.com/questions/5166087/php-global-in-functions)）。

相反，将类中需要的变量传递给构造函数，例如：

```
class foo{

   protected $foo;

   public function __construct($foo){
     $this->foo = $foo;
   }

   public function bar(){
      return $this->foo . "bar";
   }
}

$foo = "foo";
$class = new foo($foo);
echo foo->bar(); 
```

# sql - 在存储过程中多次使用 SQL WITH 语句的结果

> ID：14431486
> 
> 赞同：0
> 
> 时间：2013-01-21T01:53:15.617
> 
> 标签：sql, sql-server-2008, stored-procedures, with-statement

我有下面的 SQL 存储过程：

```
ALTER PROCEDURE [dbo].[sp_getpaginatedusersbyglobalfilter] 
    @globalFilter varchar(max)
    , @pageSize int
    , @page int
    , @totalRecords int output
    , @totalFilteredRecords int output
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    ;WITH PaginatedUsers AS(
        SELECT     ROW_NUMBER() OVER(ORDER BY u.LastName) ID
                   , u.Username
                   , u.FirstName
                   , u.OtherNames
                   , u.LastName
                   , e.Nombre
                   , r.RoleName
                   , u.PhoneNumber
        FROM       webpages_Users u
        INNER JOIN Establecimiento e
        ON         u.FacilityId = e.IDReporte
        AND        e.EstadoRegistro = 1
        INNER JOIN webpages_UsersInRoles ur
        ON         u.UserId = ur.UserId
        INNER JOIN webpages_Roles r
        ON         ur.RoleId = r.RoleId
        WHERE      u.Username LIKE '%' + @globalFilter + '%'
        OR         u.FirstName LIKE '%' + @globalFilter + '%' 
        OR         u.OtherNames LIKE '%' + @globalFilter + '%'
        OR         u.LastName LIKE '%' + @globalFilter + '%'
        OR         e.Nombre LIKE '%' + @globalFilter + '%'
        OR         r.RoleName LIKE '%' + @globalFilter + '%'
        OR         u.PhoneNumber LIKE '%' + @globalFilter + '%'
    )

    SELECT  pu.ID, pu.Username
            , pu.FirstName
            , pu.OtherNames
            , pu.LastName
            , pu.Nombre AS FacilityName
            , pu.RoleName
            , pu.PhoneNumber
    FROM    PaginatedUsers pu
    WHERE   pu.ID BETWEEN ((@page - 1) * @pageSize + 1)
    AND     @page * @pageSize

    SELECT @totalFilteredRecords = COUNT(pu.ID)
    FROM    PaginatedUsers pu

    SELECT @totalRecords = COUNT(u.UserId)
    FROM   webpages_Users u
END 
```

我遇到的问题是该部分：

```
 SELECT @totalFilteredRecords = COUNT(pu.ID)
    FROM    PaginatedUsers pu 
```

我得到的错误是“无效的对象名称'PaginatedUsers'”。根据我的研究，我不能在查询中多次使用 PaginatedUsers（由 WITH 产生）对象。那么，如何返回输出变量@totalFilteredRecords 中的记录总数？我一直在考虑将结果插入到临时表中，然后从中获取计数以及最终结果集，但我不喜欢这个想法。我能做些什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:34:28.960

您的研究是正确的，您不能多次使用 CTE。

- 编辑

正如 OP 指出的那样，为变量赋值的 SELECT 语句不得与数据检索操作结合使用。

因此，除了使用临时表之外，我没有任何其他建议——这是一个未经测试的示例：

```
SELECT     ROW_NUMBER() OVER(ORDER BY u.LastName) ID
               , u.Username
               , u.FirstName
               , u.OtherNames
               , u.LastName
               , e.Nombre
               , r.RoleName
               , u.PhoneNumber
       INTO #PaginatedUsers
FROM       webpages_Users u
    INNER JOIN Establecimiento e
    ON         u.FacilityId = e.IDReporte
    AND        e.EstadoRegistro = 1
    INNER JOIN webpages_UsersInRoles ur
    ON         u.UserId = ur.UserId
    INNER JOIN webpages_Roles r
    ON         ur.RoleId = r.RoleId
WHERE      u.Username LIKE '%' + @globalFilter + '%'
    OR         u.FirstName LIKE '%' + @globalFilter + '%' 
    OR         u.OtherNames LIKE '%' + @globalFilter + '%'
    OR         u.LastName LIKE '%' + @globalFilter + '%'
    OR         e.Nombre LIKE '%' + @globalFilter + '%'
    OR         r.RoleName LIKE '%' + @globalFilter + '%'
    OR         u.PhoneNumber LIKE '%' + @globalFilter + '%'

SELECT  pu.ID, pu.Username
        , pu.FirstName
        , pu.OtherNames
        , pu.LastName
        , pu.Nombre AS FacilityName
        , pu.RoleName
        , pu.PhoneNumber
FROM    #PaginatedUsers pu
WHERE   pu.ID BETWEEN ((@page - 1) * @pageSize + 1)
AND     @page * @pageSize

SELECT @totalFilteredRecords = COUNT(pu.ID)
FROM    #PaginatedUsers pu

SELECT @totalRecords = COUNT(u.UserId)
FROM   webpages_Users u

DROP TABLE #PaginatedUsers 
```

这是我读到的关于 CTE 与临时表的一个很好的[答案。](https://stackoverflow.com/a/698634/1073631)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:11:22.007

您只能在与 With 子句相同的语句中使用 With 子句的输出。第一个 Select 子句是第一个以 With 子句开头的 SQL 语句的一部分。通过使用第二个 Select，它位于单独的 SQL 语句中。如果将两个 Select 连接到一个语句中，那么它将起作用。

# javascript - 在我的 ASP.Net 应用程序中找不到 Javascript

> ID：14431487
> 
> 赞同：1
> 
> 时间：2013-01-21T01:53:16.400
> 
> 标签：javascript, asp.net, visual-web-developer-2010

我的javascript的位置有问题，位置是正确的，但是当我在我的visual web developer 2010 express中运行它时，找不到位置，我不知道为什么......

这是我的 javascript 的位置：

```
<script src="Style/javascript/jquery-1.7.1.js" type="text/javascript"></script> 
```

这是错误：

```
**Server Error in '/Maitenance' Application.**

**The resource cannot be found.**

**Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.** 

**Requested URL: /Maitenance/Maintenance/Style/javascript/jquery-1.7.1.js** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:21:03.110

我猜您正在使用母版页，而您的 .aspx 页面放在另一个目录中。您在母版页中包含的文件路径是相对于 .aspx 文件的。当您的页面与母版页位于同一目录中时，它可以正常工作。

您可以使用 ResolveUrl 包含您的 js 文件：

```
<script src="<%=ResolveUrl("~/js/jquery.js")%>" type="text/javascript"></script> 
```

或者您可以在母版页后面的代码中包含您的脚本：

```
ClientScript.RegisterClientScriptInclude("jquery", ResolveClientUrl("~/js/jquery.js")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T05:09:49.733

使用这个...它会工作

```
<script src="<%=Page.ResolveUrl("~")%>Style/javascript/jquery-1.7.1.js" type="text/javascript"</script>
```

# grails - 在内存中创建文件并让用户下载

> ID：14431493
> 
> 赞同：5
> 
> 时间：2013-01-21T01:53:43.637
> 
> 标签：grails, text, download

我来自asp.net中的剃刀。通常我会为此使用 [FilePost]，但不确定如何在 grails 中执行此操作。这是情况

我有一个控制器

```
class MyController{
def index{ }
} 
```

然后我在索引上有一个链接，形式为

```
<g:link controller="MyController" action="downloadFile">Download</g:link><br> 
```

我想要做的是获取一个字符串（不管它是什么），我希望它提示用户下载包含该字符串的文本文件。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:22:27.717

工作解决方案：

```
def downloadFile =
{
    File file = File.createTempFile("temp",".txt")
    file.write("hello world!")
    response.setHeader "Content-disposition", "attachment; filename=${file.name}.txt"
    response.contentType = 'text-plain'
    response.outputStream << file.text
    response.outputStream.flush()
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T02:24:27.473

所以可能是这样的：

```
byte[] bytes = "string".bytes

response.setContentType("text/plain")
response.setHeader("Content-disposition", "filename=\"xyz.txt\"")
response.setContentLength(bytes.size())
response.outputStream << bytes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T02:27:19.773

是什么阻止您自己创建字节并将其提供给输出流？例如，从您的业务方法创建的 String.getbytes 或字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T23:42:12.670

在标题中再次不需要 .txt 文件扩展名。

# mysql - 如何组合这 2 个 mysql 查询？

> ID：14431498
> 
> 赞同：0
> 
> 时间：2013-01-21T01:55:01.837
> 
> 标签：mysql

抱歉，如果重复此操作，但我找到的所有解决方案均无效，可能是因为两个查询都在同一张表上。

这就是我现在正在做的事情。

```
$sql = $database->query("SELECT id FROM attachments WHERE user='$user_id'");
$count = mysql_num_rows($sql);

$sql = $database->query("SELECT id FROM attachments WHERE member_id IN ($found_groups)");
$count += mysql_num_rows($sql); 
```

$found_groups 是来自先前查询的字符串

```
$sql_groups = $database->query("SELECT DISTINCT group_id FROM tbl_members WHERE client_id='$client_id'"); 
```

然后结果内爆

两个查询都可以正常工作。问题是结果不是 DISTINCT 并且每个用户有 3 个查询，我觉得很多。

我怎样才能减少这个？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:57:58.790

尝试：

```
SELECT DISTINCT id FROM attachments 
WHERE user='$user_id' OR member_id IN ($found_groups) 
```

# java - 替换一系列增加整数数组中七个变量的 if/else-if/else 语句

> ID：14431499
> 
> 赞同：0
> 
> 时间：2013-01-21T01:55:15.670
> 
> 标签：java, bluej

我需要用一个增加集合中适当整数的语句替换一系列增加七个整数的 if/else-if/else 语句。我有一个初始化的整数数组：

```
 int[] finals={0, 0, 0, 0, 0, 0, 0}; 
```

我不知道如何访问和修改列表中不同变量的索引。这是Java顺便说一句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:59:04.633

访问数组中的变量：

`int[] finals={1,2,3,4,5,6,7};`

```
finals[0] = 1;
finals[1] = 2; 
```

# .net - 接口的运行时类型

> ID：14431500
> 
> 赞同：0
> 
> 时间：2013-01-21T01:55:30.793
> 
> 标签：.net, entity-framework, types, interface

我使用实体框架和`DbContext`T4 代码生成器。生成的代码包括具有子实体集合的实体对象。它们被声明为`ICollection<T>`. 现在，我在运行时发现它们实际上变成了`HashSet<T>`. .NET 如何处理这种情况？有人可以指出我可以在其中找到有关特定接口的默认实现类型的信息的文档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:11:11.387

接口没有“默认实现”。如果一个方法返回一个接口，该方法决定了实际返回的类型。在您的情况下，这很可能是实体框架内部的东西。

# linux - CMake 在 Ubuntu 上寻找错误路径中的 Qt 库

> ID：14431501
> 
> 赞同：-2
> 
> 时间：2013-01-21T01:55:38.337
> 
> 标签：linux, ubuntu, cmake

ubuntu 上的 CMake 给了我以下错误

```
CMake Error at blah/CMakeLists.txt:19 (ADD_LIBRARY)
Cannot find source file:
    /usr/lib/libQtGui.so 
```

CMakeLists.txt 的相关部分是这个

```
FIND_PACKAGE (Qt4 REQUIRED)
INCLUDE(${QT_USE_FILE})
INCLUDE_DIRECTORIES (${QT_INCLUDES})
QT4_WRAP_CPP (QT_SRCS ${HEADERS})
ADD_LIBRARY (blah ${CPP} ${QT_SRCS} ${QT_LIBRARIES}) 
```

一个小调查表明 libQtGui.so 和它的朋友住在`/usr/lib/i386-linux-gnu`（这是[正确](http://packages.ubuntu.com/search?suite=precise&arch=any&mode=filename&searchon=contents&keywords=libQtGui)的）而不是`/usr/lib`CMake 认为的那样。

几个月前，这个构建环境运行良好。没有更改源文件或配置文件，但软件包已定期更新。

发生了什么变化？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:46:35.153

[如该问题](https://stackoverflow.com/questions/7412548/gnu-stubs-32-h-no-such-file-or-directory)的答案所述，问题在于 Ubuntu 12.04 将库安装到非标准路径。

修复是

```
export LIBRARY_PATH=/usr/lib/i386-linux-gnu/
export C_INCLUDE_PATH=/usr/include/i386-linux-gnu
export CPLUS_INCLUDE_PATH=/usr/include/i386-linux-gnu 
```

# opencv - 将数据保存到opencv中的文件

> ID：14431507
> 
> 赞同：1
> 
> 时间：2013-01-21T01:56:21.203
> 
> 标签：opencv

我需要将连接组件的区域保存为文本文件，并且我编写了如下代码，但我不知道我哪里出错了。谁能帮我找出问题所在？

```
imagefet=cvCreateImage(cvGetSize(lab),IPL_DEPTH_8U,3);
CvMemStorage* contour_storage = cvCreateMemStorage(0);
CvSeq* contours;
CvFont font;
cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.6f, 0.6f, 0, 2);
cvFindContours(lab, contour_storage, &contours, sizeof (CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE,cvPoint(0,0));
cvZero(imagefet);

FILE *file=fopen("mytxt.txt","W");
for( int ncount=1; contours != NULL; contours = contours->h_next, ncount++)
 {
    CvScalar color =  CV_RGB( rand()&255, rand()&255, rand()&255 );
    cvDrawContours( imagefet, contours, color, CV_RGB(255,255,255), -1, CV_FILLED, 8 ,cvPoint(0,0));        
    int area = abs(cvContourArea(contours, CV_WHOLE_SEQ));      
    fprintf(file,"%d",area);        
  }
fclose(file); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:01:38.860

您对错误的描述不是很具体。

如果您的文件未打开，我建议您使用小写字母`w`作为模式标志。我从未见过使用大写字母，我不知道是否允许。

如果您的文件中充满了没有空格的数字，那是因为您没有写出任何空格。`\n`尝试在通话中添加换行符`fprintf`：

```
fprintf(file,"%d\n",area); 
```

在这方面，您应该真正使用文本模式来创建文件`"wt"`，而不是`"w"`.

您应该做的另一件事是通过检查调用后是否为NULL来*测试文件是否成功打开。*`file``fopen`

# ruby - 无法覆盖读取方法 URI::HTTP

> ID：14431509
> 
> 赞同：0
> 
> 时间：2013-01-21T01:56:58.197
> 
> 标签：ruby, overriding

我正在尝试存根以下内容：

```
uri = URI(base_url)
source = uri.read 
```

我重写了`read`方法如下： equire 'open-uri'

```
 module OpenURI

    module OpenRead 

      def read                                               
        return IO.read('source.html')                        
      end                                                       

    end

  end 
```

但这似乎不起作用。Ruby 新手，可以使用一些指针。我似乎总是以

```
NoMethodError: undefined method `read' for #<URI::HTTP:0x10ac59918> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:04:06.033

```
uri = URI(base_url)
source = uri.read 
```

您使用该`read`方法，所以看看它在哪里：

```
uri.method(:read).method_location 
```

如果你想知道在哪里覆盖，去

```
uri.method(:read).owner 
```

或者干脆

```
def uri.read
  <your body>
end 
```

# java - java位运算符，abs的力量

> ID：14431512
> 
> 赞同：2
> 
> 时间：2013-01-21T01:57:35.757
> 
> 标签：java, bit

研究一种将采用整数 (num) 和整数 (n) 的方法，该整数 (n) 将采用 n 位数字的绝对值。我相信我的逻辑是正确的，已经在纸上完成了它并且成功了，但是代码似乎已经关闭了。非常感谢所有帮助！

```
/**
 * Take the absolute value of an n-bit number.
 * 
 * Examples:
 *     abs(0x00001234, 16); // => 0x00001234
 *     abs(0x00001234, 13); // => 0x00000DCC
 * 
 * Note:  values passed in will only range from 1 to 31 for n.
 * 
 * @param num An n-bit 2's complement number.
 * @param n The bit length of the number.
 * @return The n-bit absolute value of num.
 */
public static int abs(int num, int n)
{
    int shifter = num << (n+1);
    int newInt = num & ~shifter;
    return newInt;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:16:22.337

使用`-1`（全 1 位）作为移位器。

```
int shifter = -1 << n; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:56:47.170

我认为没有一个位掩码可以同时适用于正面和负面的情况。

首先通过检查第n位是否为1来测试数字是否为负；如果不是，则返回原来的，否则返回二进制补码。

像这样的东西看起来很有效：

```
public static int abs(int num, int n)
{
    int shifter = -1 << (n - 1);
    if ((num & shifter) == 0) 
        return num;
    shifter = shifter << 1;
    return (~num + 1) & ~shifter;
} 
```

例如，假设您将 0x1FFF 作为 16 位数字传入，所以它是正数。
`-1 << 15`将是 0xFFFF8000（最低 15 位为 0，其余为 1），0xFFFF8000 和 0x00001FFF 为 0，您返回原件。

另一方面，如果 0x1FFF 仅被视为 13 位，则为负数。 `num & shifter`将为 1，因为两者都设置了第 13 位。现在通过翻转位和添加位来进行二进制补码。因为您将翻转所有 32 位，所以您需要使用位掩码将所有剩余的位清零。`shifter`如果您将其再向左推一点并将其反转，则原始作品将起作用。

# python - 无法在参数列表中初始化字典？

> ID：14431513
> 
> 赞同：0
> 
> 时间：2013-01-21T01:57:56.027
> 
> 标签：python, django

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我有以下奇怪的行为： -

```
def set_diary_time_data(day_str, x={}):
    # Dict for template in html
    print 'Set diary time data'
    print x 
```

我用以下方式调用此函数：-

```
 x = heading_queries.set_diary_time_data(day_str) 
```

所以字典 x 没有作为参数传递，所以它应该初始化为 {}

但是，在重复调用此函数时，放置在 x 中的值会保留先前调用的值。这是在 django 中，当用户登录时调用，前一个用户的详细信息保留在 x. （x 未设置为全局变量。）

我可以通过将功能更改为来克服这个问题

```
def set_diary_time_data(day_str, x=None):
    if not x: x = {} 
```

(Python 2.7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:24:52.833

在 python 中，参数和默认值只计算一次，而不是每次调用。这可能会导致一些令人惊讶的行为。

例如：

```
def foo( names=[ "foo", "bar", "hello" ] )
  names.append( "whatever" )
  print names

foo()
foo() 
```

产生一个输出：

```
[ "foo", "bar", "hello", "whatever" ]
[ "foo", "bar", "hello", "whatever", "whatever"] 
```

因此，经验法则应该是避免将任何可变对象作为参数默认值。

# javascript - 如何水合 WinJS.Class

> ID：14431516
> 
> 赞同：2
> 
> 时间：2013-01-21T01:58:07.100
> 
> 标签：javascript, windows-8, windows-store-apps, winjs

我正在序列化和存储从 WinJS.Class 创建的对象，如下所示：

```
var myClass = WinJS.Class.define(...);
var myObject = new myClass();
var serialized = JSON.stringify(myObject);
//store the object 
```

后来我将对象从存储中取出，我想反序列化它并将其转换为`myClass`. 开箱即用的 WinJS 是否可行，或者我是否需要为我的类创建一个构造函数，该构造函数能够获取一个可以将其转换为新对象的对象？

我还没有进入 TypeScript，我认为在这种情况下会有所帮助，但在那之前我想知道如何使用普通的 JavaScript/WinJS 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-26T23:56:57.223

有几种方法可以处理这个问题，没有一种对 WinJS 来说特别特别。简单来说：JSON 序列化只对对象值进行序列化和反序列化，而不是对其方法、原型或其他类型信息进行序列化和反序列化。

**选项 1：将值复制到类的新实例** 这通常最好通过让构造函数将反序列化对象作为参数并将数据复制到新实例来完成。

这有多种变体。使用对象构造函数通常是性能最好的，因为这通常使 JS 引擎能够对对象应用更多的优化。

WinJS.UI.setOptions 在这里可能会有所帮助，或者您可以使用这样的简单循环复制数据：

```
var keys = Object.keys(source);
for (var i = 0, len = keys.length; i < len; i++) {
    var key = keys[i];
    destination[key] = source[key];
} 
```

**选项 2：设置 __proto__** 警告：这可能会对性能产生显着的不利影响，因此在某些情况下不合适。但有时它会很方便。

```
Object.setPrototypeOf(myObject, myClass.prototype); 
```

请注意， setPrototypeOf 相对较新。它在 Win8.1 上用于 Web 应用程序（我猜这是关于）和 IE 11，但在 Safari 中不可用，例如。在较旧的浏览器/Safari 上，分配给**proto**是等效的（但如果可用， setPrototypeOf 更好）。

这会将 myClass 中的方法附加到对象，但除了负面的性能影响之外，它也不会在对象上运行您的构造函数 - 因此它可能仍然与您最初序列化的对象处于不同的状态。

**其他有用的东西：JSON“revivers”** JSON.parse 采用可选的第二个参数，称为“reviver”。这使您可以提供一个函数，该函数有机会转换正在反序列化的 JSON 的每个节点。例如，这对于将序列化的日期重新合成为 JavaScript Date 对象很有用。它还有机会转换最顶层的对象，这在某些情况下可能有助于将反序列化的对象转换为您想要的“类”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T20:39:11.800

Javascript 是一种动态语言，所以我认为您不需要强制转换反序列化的对象，只需将其视为 myClass 类型即可。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T22:00:18.827

您应该考虑使用“选项”构造函数模式，其中选项值是反序列化的对象：

```
// MovieModel Constructor
// ----------------------
function MovieModel(options) {
    this._titleValue = options.title || "Sample Title";
} 
```

电影方法闭包是这样的：

```
// MovieModel Methods
// ------------------
var movieModelMethods = {
    title: {
        get: function () {
            return this._titleValue;
        },
        set: function (val) {
            this._titleValue = val;
            this.dispatchEvent("title");
        }
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-25T09:33:26.387

由于WinJS类定义只能指定一个构造函数（据我了解），您可以使用静态成员定义一个工厂函数，它将序列化数据作为参数。这个工厂方法实际上会创建一个新实例，并将值一个一个设置并返回新对象。

它有一些优点，例如您可以随着增强应用程序的时间实际管理数据结构的变化......缺点是你不能一直编写 new MySuperClass() ......

```
...
// let's suppose we already called JSON.parse(data);
create: function(serializedData) {
    var newObj = new MySuperClass();
    newObj.name = serializedData.name || "";
    newObj.color = serializedData.color || "";
    return newObj;
} 
```

然后你会在应用程序的其他地方调用：

```
var myInstance = MySuperClass.create(serializedDataFromfile); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-21T02:17:40.323

您应该能够在将 JSON.parse 从本地存储中拉出后调用它：

变量 myObject2; myObject2 = JSON.parse(localStorage["mySeriazliedObject"];

# python - 使用 ESMTP 和 Twisted 发送电子邮件到 GMail 就在那里（没有错误或任何东西）

> ID：14431517
> 
> 赞同：1
> 
> 时间：2013-01-21T01:58:07.557
> 
> 标签：python, smtp, gmail, twisted

**更新**弄清楚为什么，gmail在端口465和587上提供smtp服务器，465是SSL，587是TLS，ESMTP想要TLS，这就是为什么它不能与465，ssl服务器一起使用......我想（我知道作品我只是不确定为什么如果有人能解释为什么请这样做:))

* * *

我正在尝试使用 SMTP 和 Twisted 发送电子邮件，但没有任何反应，没有错误，没有输出，也没有电子邮件.....

**输出**

```
MacBookPro:EmailSender User$ python send_mime_email.py 
What is your email address? [REMOVED]@gmail.com
What is your username (typically same as email address)? [REMOVED]@gmail.com
What is your password? [REMOVED]
What is your smtp server details? smtp.gmail.com:465
-------Email Details-------
Subject: Hello
Body: Hi, how are you?
Attachment: FTP_Commands.txt
-------Logging-------
2013-01-20 20:43:44-0500 [-] Log opened.
2013-01-20 20:43:44-0500 [-] Creating email
2013-01-20 20:43:44-0500 [-] Created Message.
2013-01-20 20:43:44-0500 [-] Starting factory <twisted.mail.smtp.ESMTPSenderFactory instance at 0xa3c508>
2013-01-20 20:43:44-0500 [-] Sending Email
2013-01-20 20:53:44-0500 [ESMTPSender,client] SMTP Client retrying server. Retry: 5
^C2013-01-20 20:54:47-0500 [-] Received SIGINT, shutting down.
2013-01-20 20:54:47-0500 [ESMTPSender,client] SMTP Client retrying server. Retry: 4
2013-01-20 20:54:47-0500 [-] Main loop terminated. 
```

**代码**

```
import sys
import email
import email.mime.application

import sys

from OpenSSL.SSL import SSLv3_METHOD

from twisted.mail.smtp import ESMTPSenderFactory
from twisted.internet.ssl import ClientContextFactory
from twisted.internet.defer import Deferred
from twisted.internet import reactor
from twisted.python import log

try:
    from cStringIO import cStringIO as StringIO
except ImportError:
    from StringIO import StringIO

def create_email(address, subject, body, data):
    print "Creating email"
    # email block

    # text body
    msg = email.mime.Multipart.MIMEMultipart()
    msg['Subject'] = subject

    # send it to ourselves to make it simple
    msg['From'] = address
    msg['To'] = address

    # body
    body = email.mime.Text.MIMEText(body)
    msg.attach(body)
    att = email.mime.application.MIMEApplication(data, _subtype="binary")
    att.add_header('Content-Disposition','attachment',filename="data.bin")
    msg.attach(att)

    print "Created Message."

    # Create a context factory which only allows SSLv3 and does not verify
    # the peer's certificate.
    return str(msg)

def send_email(smtp_server, smtp_port, username, password, from_, to, msg):

    contextFactory = ClientContextFactory()
    contextFactory.method = SSLv3_METHOD

    resultDeferred = Deferred()

    mime_obj = StringIO(str(msg))

    senderFactory = ESMTPSenderFactory(
                                       username,
                                       password,
                                       from_,
                                       to,
                                       mime_obj,
                                       resultDeferred,
                                       contextFactory=contextFactory)

    reactor.connectTCP(smtp_server, smtp_port, senderFactory)
    print "Sending Email"
    return resultDeferred

if __name__ == '__main__':
    email_address = raw_input("What is your email address? ")
    username      = raw_input("What is your username (typically same as email address)? ")
    password      = raw_input("What is your password? ")
    sd            = raw_input("What is your smtp server details? ")
    ss, sp        = sd.split(":")
    sp            = int(sp)
    print "-------Email Details-------"
    subject = raw_input("Subject: ")
    body    = raw_input("Body: ")
    attachment_file = raw_input("Attachment: ")
    o = open(attachment_file, "rb")
    data = o.read()
    o.close()
    print "-------Logging-------"

    log.startLogging(sys.stdout)
    email_data = create_email(email_address, subject, body, data)
    send_email(ss, sp, username, password, email_address, email_address, email_data)
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:44:17.137

我认为这里有一些棘手的、令人困惑的术语会使事情变得混乱。“SSL”和“TLS”实际上最常用作**同一事物**的不同名称。对词汇稍微严格一些（尽管在技术上可能仍然不是绝对正确的），有一个名为“SSLv2”的协议和另一个名为“SSLv3”的协议（对 SSLv2 的更新）和另一个名为“TLSv1”的协议（对 SSLv3 的更新）。

许多人说“SSL”是指这三件事中的任何一个，或者可能是全部。

此外，许多人说“TLS”是指这三件事中的任何一件，或者可能是全部！

*此外，还有一个单独的概念，即在已*用于交换某些（非加密）数据的已建立连接上开始使用这些协议之一。有时*这*就是人们说“TLS”时的意思，这就是您在问题顶部说“TLS”时的意思。

gmail 在端口 465 上提供的是一个强制 SSL（SSLv2、SSLv3 或 TLSv1，我没有检查过）的 SMTP 服务器，它从连接的最开始 - 即在交换任何 SMTP 流量之前开始。

gmail 在端口 587 上提供的是一个没有任何 SSL（SSLv2、SSLv3 或 TLSv1 中的任何一个）的 SMTP 服务器，但它支持 SMTP 功能，用于协商*开关*以在稍后的某个时间打开 SSL。

当然，就客户端而言，这里的区别在于他们是否应该在 TCP 连接建立后立即启动 SSL（SSLv2、SSLv3 或 TLSv1），或者他们是否应该开始使用 SMTP，然后可能稍后协商一个“升级”到 SSL（SSLv2、SSLv3 或 TLSv1）。

如果客户端和服务器不同意这里究竟应该发生什么，结果可能是“挂起”连接 - 例如，服务器等待客户端启动 SSL 握手，客户端等待服务器向其发送 SMTP问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:55:45.947

解决了问题是我使用的是 smtp.gmail.com:465 而不是 smtp.gmail.com:587。

# javascript - 如何在 JavaScript 中交换两个日期

> ID：14431518
> 
> 赞同：2
> 
> 时间：2013-01-21T01:58:25.743
> 
> 标签：javascript, momentjs

我在 JavaScript 中有两个日期，`start`并且`finish`由[Moment.js](http://momentjs.com/)解析。如果不需要创建第三个日期，那么交换它们的最有效方法`start`是什么？`finish`通常，日期将是这样一个函数的参数：

```
function getDates(start, finish) {
  var start_date = moment(new Date(start));
  var finish_date = moment(new Date(finish));
  if (start_date.diff(finish_date) > 0) {
    // Swap code goes here...
  }
} 
```

人们可能想要交换日期的原因是因为某些函数的定义方式是即使交换日期也会返回相同的结果，但该函数需要知道哪个日期更早。例如，Microsoft Excel 中的[YEARFRAC就是这样工作的。](http://office.microsoft.com/en-us/excel-help/yearfrac-function-HA102752812.aspx?CTT=5&origin=HA102752955)[您可以在此处](https://gist.github.com/4567843)查看我对该函数的实现，以获取次优日期交换的示例。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:29:35.103

> 如果开始在结束之后，交换它们的最有效方法是什么

带有第三个变量。为了好玩，您可以使用[解构赋值](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Avoiding_temporary_variables)来~~防止在~~语法上围绕它进行工作，但这几乎不会产生性能差异。

> 无需创建第三个日期？

这就是使用变量的意义所在。使用您提到的[二元运算符方式](https://stackoverflow.com/q/249423/1048572)，您需要将 Date 对象转换为整数，应用该操作，然后从整数创建*两个新*的 Date 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:29:46.400

如果您对拥有额外 Date 的约束应该被解释为根本没有另一个变量，那么我有一个基于[此人对内联变量交换的绝妙想法](http://www.greywyvern.com/?post=265)的解决方案：

```
function getDates(start, finish) {
    var start_date = new Date(2013, 0, 5);
    var finish_date = new Date(2013, 0, 4);
    start_date = start_date.getTime();
    finish_date = finish_date.getTime();
    start_date = -(finish_date = (start_date += finish_date) - finish_date) + start_date;
    start_date = new Date(start_date);
    finish_date = new Date(finish_date);
    alert(start_date);
    alert(finish_date);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:49:44.090

我不确定是否了解您的需求，但是，如果您将时间戳传递给`start`and `finish`，则使用如下内容：

```
start_date = start > finish ? finish : start;
finish_date = start > finish ? start : finish; 
```

您在没有第三个临时变量的情况下交换值。然后您可以创建时刻对象并使用它们。例如：

```
function dateDiff( start, finish, measure ){
  var start_date = start > finish ? finish : start, 
      finish_date = start > finish ? start : finish;
  return moment(finish_date).diff(moment(start_date), measure);
}

dateDiff( new Date(2013,1,21), new Date(2013,1,28), 'days' ) // 7
dateDiff( new Date(2013,1,28), new Date(2013,1,21), 'days' ) // 7 
```

如果您只需要知道积极的差异，您甚至可以这样做：

```
date_diff = (start < finish ? finish : start) - (start < finish ? start : finish); 
```

**编辑：**

但是，可以[测试](http://jsperf.com/js-ternary-vs-if-else/3)即使使用三元运算符，性能也低于经典`if..else`语句。

希望这可能会有所帮助。

# jquery - JQuery AppendTo 函数在 IE 中不起作用

> ID：14431520
> 
> 赞同：0
> 
> 时间：2013-01-21T01:58:40.160
> 
> 标签：jquery, internet-explorer, append

我查看了我的代码，我找不到导致它在早期版本的 IE 中中断的原因。该代码适用于 FF、Chrome 和 Safari。

该代码应该在阅读列表的一侧生成一个带有标题和照片的 div，然后在底部生成一个 x 以将其删除。但是，在 IE 上，它只显示一个 x。网站：www.hearditfrom.com

我真的很感激任何帮助！提前致谢。

这是代码：

```
 $(function() {
        $('a.addtoreadinglist').click(function(){
            $('<li id="arrayorder_' + $(this).attr('data-storyid') + '">   <div class="reading_list drop-shadow lifted"><div class="reading_list_container"><p class="reading_list_story"><a class="rlstory" href="' + $(this).attr('data-url') + '" data-storyid="' + $(this).attr('data-storyid') + '">' + $(this).attr('data-headline') + '</a></p></div><div class="rlbuttons"><a class="deletefromrl" data-storyid="'+ $(this).attr('data-storyid') + '" data-parent="arrayorder_' + $(this).attr('data-storyid') + '"><div class="deletebutton">x</div></div></div></li>').appendTo('#list ul');
            $(this).hide();
            $('#instruction').fadeOut('slow').remove();
            var order = $('#list ul').sortable("serialize") + '&update=update'; 
                $.post("updateReadingList.php", order, function(theResponse){
                     $("#response").html(theResponse);
                });                     
        })
    })

    //photo
    $(function() {
        $('a.addtoreadinglistphoto').click(function(){
            $('<li id="arrayorder_' + $(this).attr('data-storyid') + '"><div class="reading_list drop-shadow lifted"><div class="reading_list_container"><p class="reading_list_story"><img class="reading_list_thumbnail" src="http://images.hearditfrom.com/timthumb.php?src=' + $(this).attr('data-photoname') + '&q=100&w=30&h=30" /><a class="rlstory" href="' + $(this).attr('data-url') + '" data-storyid="' + $(this).attr('data-storyid') + '">' + $(this).attr('data-headline') + '</a></p></div><div class="rlbuttons"><a class="deletefromrl" data-storyid="'+ $(this).attr('data-storyid') + '" data-parent="arrayorder_' + $(this).attr('data-storyid') + '"><div class="deletebutton">x</div></div></div></li>').appendTo('#list ul');
            $(this).hide();
            $('#instruction').fadeOut('slow').remove();
            var order = $('#list ul').sortable("serialize") + '&update=update'; 
                $.post("updateReadingList.php", order, function(theResponse){
                    $("#response").html(theResponse);
                });             
        })
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:34:47.327

我不知道究竟是什么导致了这个问题，但是从 Chrome 与 IE8 的调试中我看到下面一行是问题所在（减去 appendTo 语句）。

```
$('<li id="arrayorder_' + $(this).attr('data-storyid') + '"><div class="reading_list drop-shadow lifted"><div class="reading_list_container"><p class="reading_list_story"><img class="reading_list_thumbnail" src="http://images.hearditfrom.com/timthumb.php?src=' + $(this).attr('data-photoname') + '&q=100&w=30&h=30" /><a class="rlstory" href="' + $(this).attr('data-url') + '" data-storyid="' + $(this).attr('data-storyid') + '">' + $(this).attr('data-headline') + '</a></p></div><div class="rlbuttons"><a class="deletefromrl" data-storyid="'+ $(this).attr('data-storyid') + '" data-parent="arrayorder_' + $(this).attr('data-storyid') + '"><div class="deletebutton">x</div></div></div></li>').appendTo('#list ul'); 
```

我不太了解这段代码在做什么，或者没有足够的资金来调试它，但你应该能够将它分解成更小的语句，然后找出导致错误的语句。例如：

```
var $li = $('<li />', { id: 'arrayorder_' + $(this).prop('data-storyid'));
var $div1 = $('<div />').addClass('reading_list drop-shadow lifted');
var $div2 = $('<div />').addClass('reading_list_container');
etc

//add elements one at a time to the DOM 
```

通过不将所有声明都作为连接字符串，可以更容易地识别代码中的罪魁祸首。请注意，我为每个新元素使用了一个自结束标记。对于列表项，我使用了一组参数来添加 id。对于我使用 addClass 的 div。这有助于分离您的代码并简化调试。

另外，我会使用`prop`而不是`attr`因为您使用的是 jQuery 1.8.3。

我会`data`用来访问数据元素。`$(this).data('storyid');`

祝你好运。

# sml - number_in_month 练习（SML 错误：将列表中的整数与整数进行比较时，运算符和操作数不一致）

> ID：14431526
> 
> 赞同：1
> 
> 时间：2013-01-21T01:59:06.667
> 
> 标签：sml, typechecking

我是标准 ML 的新手，不知道为什么会出现这种类型不匹配错误：

```
fun number_in_month (month : int, dates : int list) =                                            
    if null dates                                                                                
    then 0                                                                                       
    else if (month = (hd (tl (hd dates))))            
    then number_in_month(month, (tl dates)) + 1
    else number_in_month(month, (tl dates)) 
```

评估此函数会导致以下错误：

```
Error: operator and operand don't agree [tycon mismatch]     
 5  operator domain: 'Z list                                                                       
 6  operand:         int                                                                           
 7  in expression:                                                                                 
 8    tl (hd dates) 
```

但是，在 REPL，如果我执行以下操作：

```
val x = [[84, 12, 23], [83, 01, 18]]
12 = (hd (tl (hd x)))                    (*  -> val it = true : bool *) 
```

我不确定在这种情况下类型检查规则是什么，我不明白为什么相同的表达式会在 REPL 上起作用，但当我尝试评估函数中的子表达式时却不行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T04:43:12.780

您正在获得列表头部的尾部头部。您的`x`（在 REPL 中）是一个`int list list`（整数列表的列表）。但是您的函数定义将其声明为`int list`. 重新声明应该`number_in_month`可以`dates: int list list`解决您的问题：

```
fun number_in_month (month : int, dates : int list list) =  
   ... 
```

它可以像您在 REPL 中所期望的那样工作，因为您在`x`没有明确声明它的类型的情况下进行定义。SML 推断 x 的类型`int list list`是`(hd (tl (hd x)))` 通过类型检查器的原因。

**更新**

（试图在stackoverflow关闭时添加这个权利）

如果您有兴趣，这里有一些关于如何重新编写代码以使其更像 ML 的想法：

首先，您可以使用模式匹配：

```
fun number_in_month (month: int, []) = 0
  | number_in_month (month: int, ([y,m,d]::rest)) = 
      if month = m then number_in_month(month, rest) + 1
      else number_in_month(month, rest) 
```

所以`number_in_month`需要一个月的元组和日期列表，逻辑上是`[]`or `([y,m,d]::rest)`。这与您选择表示日期的方式（作为整数列表）兼容，但编译时会出现`match nonexhaustive`警告。这是有道理的，因为如果你传入`dates`as会发生什么`[[84], [83]]`？模式匹配方法至少会警告您这一点，但是使用类似代码的代码，`(hd (tl (hd dates)))`尽管您的程序已成功进行类型检查，但您会收到运行时错误。您可以为日期包含少于/多于 3 个元素的日期列表添加另一个模式匹配，但如果可能，将日期表示为3 个整数的*元组可能更清晰。*

```
 type date = (int * int * int) 
```

然后你可以有：

```
fun number_in_month (month: int, []: date list) = 0
  | number_in_month (month: int, ((y,m,d)::rest)) = 
      if month = m then number_in_month(month, rest) + 1
      else number_in_month(month, rest) 
```

此外，如果您更愿意重用代码，您可以尝试高阶函数（例如`foldr`）：

```
fun number_in_month (month: int, dates: date list) =
  foldl (fn ((_,m,_), c) => if m = month then c+1 else c) 0 dates 
```

或者

```
fun number_in_month (month: int, dates: date list) =
  length (List.filter (fn (_,m,_) => m = month) dates) 
```

比你要求的要多，但我希望它有所帮助。

# arrays - 总和至少为 K 的最小数字集

> ID：14431529
> 
> 赞同：3
> 
> 时间：2013-01-21T01:59:09.110
> 
> 标签：arrays, algorithm, sorting

给定一个包含 n 个对象的列表，编写一个函数，输出总和至少为 K 的最小数字集。 跟进：你能击败 O(n ln n) 吗？

最小集合将是具有 1 个元素的集合。难道我们只需要遍历数组并找到一个元素，即> = K。

否则对于 O(nlgn)，我知道我们必须首先对数组进行排序，然后我们才能找到总和 >=k 的对或三元组。如果我们没有找到这样的组合并且必须使用更大的集合怎么办，这个问题会不会与 N sum 问题相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:40:03.883

这与 N Sum 问题非常不同，因为它要求集合加起来*至少为*K，而不是恰好为 K。

它可以在 O(n ln n) 内完成，方法是对列表进行排序并从最大元素开始直到总和大于 K。可以通过首先扫描列表来优化它，以消除单个数字 > K 和在所有成员的总和 < K 的情况下。您还可以获得列表的平均值，并且有时只对列表的“上”半部分进行排序。但是，这些优化并没有改善 O(n ln n) 时间。

排序可以使用索引数组（或整数列表）来完成，因此不需要移动原始值或对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T02:49:55.130

这是一个使用线性时间中值查找作为子程序的线性算法：

```
Findsum(A, K) {
  Let n be the length of A.
  Let M be the median element of A, found in linear time.
  Let L be the elements of A less than M.
  Let U be the elements of A greater than M.
  Let E be the elements of A equal to M.
  If the sum of the elements in U is at least K,
    Return Findsum(U, K).
  Else, if the sum of the elements in U and E is at least K,
    Return U together with enough elements of E that the sum is at least K.
  Else,
    Return Findsum(L, K - sum(U) - sum(E)).
} 
```

每个递归调用最多在一个大小为 A 一半的列表上完成，所有其他步骤最多花费线性时间，因此该算法总体上花费线性时间。

# git - 提交已推送但仍保留在本地存储库中

> ID：14431530
> 
> 赞同：1
> 
> 时间：2013-01-21T01:59:19.090
> 
> 标签：git

我是 Git 新手。我已经成功推送并合并了两个提交。但是当我检查git状态时，它仍然说

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)

no changes added to commit (use "git add" and/or "git commit -a") 
```

`git push`（`***`是公司Git服务器地址，下面忽略）之后的输出：

```
$ git push
Total 0 (delta 0), reused 0 (delta 0)
remote: Processing changes: refs: 1, done
To ssh://***
 ! [remote rejected] master -> refs/for/master (no new changes)
error: failed to push some refs to 'ssh://***' 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:06:43.700

提到的错误消息`refs/for/master`表明您正在推送到[Gerrit 代码审查](https://code.google.com/p/gerrit/)服务器。虽然 Gerrit 是完全兼容的 Git 服务器，但它有一些特殊的规则需要遵循。

请参阅 Gerrit 文档，了解如何正确[提交代码审查](http://gerrit.googlecode.com/svn/documentation/2.2.1/user-upload.html#_git_push)。

可能更好的主意是询问您公司的 Git/Gerrit 管理员如何正确上传您的提交。

在任何情况下，请注意，您上传到 Gerrit 的更改不会成为正式的（并且不会移动`origin/master`分支），直到使用 Gerrit Web 界面的人批准它们。

一旦在 Gerrit 中获得批准，您应该能够在下次执行`git fetch`（或`repo sync`）时看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:36:02.297

只需阅读帖子的其余部分。问题是以下两个之一：

1.  有文件未提交或未添加*

    当一个新文件被创建并且你提交@命令行时，它不会像在 git extensiosn UI 中那样自动添加它们。您需要添加所有（或一些），即 git add --all （或一些路径和文件）

2.  您的本地存储库未与远程（源）同步。在推送之前进行获取和合并或拉取。（如果您有尚未添​​加的文件阻止您进行合并，您将收到另一个错误。只需确保添加了所有文件，然后从源合并，一切都应该工作）

# javascript - 以 4 倍速度运行 Javascript 时钟

> ID：14431532
> 
> 赞同：0
> 
> 时间：2013-01-21T01:59:25.197
> 
> 标签：javascript, performance, clock

> **可能重复：**
> [运行时钟（日期和时间）的 Javascript 速度提高了 4 倍](https://stackoverflow.com/questions/14272133/javascript-to-run-the-clock-date-and-time-4-times-speeder)

我正在尝试制作一个时钟，该时钟以我提供的时间值 (hh:mm:ss) 开始，并以 4 倍速度运行（对于运行 4 倍实际时间的在线游戏的服务器时间）。我已经修改了一个我在网上找到的免费时钟来执行此操作，但它只适用于每隔一分钟（如果这没有意义，请尝试下面的代码以确切了解我的意思）。

```
var customClock = (function () {
    var timeDiff;
    var timeout;

    function addZ(n) {
        return (n < 10 ? '0' : '') + n;
    }

    function formatTime(d) {
        t1 = d.getHours();
        t2 = d.getMinutes();
        t3 = d.getSeconds() * 4;
        if (t3 > 59) {
            t3 = t3 - 60;
            t2 = t2 + 1;
        }
        if (t2 > 59) {
            t2 = t2 - 60;
            t1 = t1 + 1;
        }
        if (t1 > 23) {
            t1 = 0;
        }
        return addZ(t1) + ':' + addZ(t2) + ':' + addZ(t3);
    }

    return function (s) {
        var now = new Date();
        var then;

        var lag = 1015 - now.getMilliseconds();

        if (s) {
            s = s.split(':');
            then = new Date(now);
            then.setHours(+s[0], +s[1], +s[2], 0);
            timeDiff = now - then;
        }

        now = new Date(now - timeDiff);
        document.getElementById('clock').innerHTML = formatTime(now);
        timeout = setTimeout(customClock, lag);
    }
}());

window.onload = function () {
    customClock('00:00:00');
}; 
```

知道为什么会这样吗？我对 Javascript 很陌生，这绝对是一个小技巧。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:25:21.760

我取原始时间并从当前时间中减去它，然后将其乘以 4 并将其添加到原始时间。我认为应该注意或同步问题。

```
(function(){
  var startTime = new Date(1987,08,13).valueOf() //save the date 13\. august 1987
    , interval = setInterval(function() {
          var diff = Date.now() - startTime

          //multiply the diff by 4 and add to original time
          var time = new Date(startTime + (diff*4))

          console.log(time.toLocaleTimeString())
      }, 1000)
}()) 
```

*如何使用自定义日期*（使用[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象）

`Date(year, month, day, hours, minutes, seconds, milliseconds)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:14:22.367

`var lag = 1015 - now.getMilliseconds();`正在尝试“在下一个时钟滴答后再次运行一次（15 毫秒）”。使这个值更小（除以 4？），这段代码会更频繁地运行。

接下来，让它显示当前时钟持续时间的 4 倍。类似的问题：在 formatTime() 内部或外部将 now 的详细信息乘以 4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:44:58.913

我将首先创建一个`Clock`构造函数，如下所示：

```
function Clock(id) {
    var clock = this;
    var timeout;
    var time;

    this.hours = 0;
    this.minutes = 0;
    this.seconds = 0;
    this.stop = stop;
    this.start = start;

    var element = document.getElementById(id);

    function stop() {
        clearTimeout(timeout);
    }

    function start() {
        timeout = setTimeout(tick, 0);
        time = Date.now();
    }

    function tick() {
        time += 1000;
        timeout = setTimeout(tick, time - Date.now());
        display();
        update();
    }

    function display() {
        var hours = clock.hours;
        var minutes = clock.minutes;
        var seconds = clock.seconds;

        hours = hours < 10 ? "0" + hours : "" + hours;
        minutes = minutes < 10 ? "0" + minutes : "" + minutes;
        seconds = seconds < 10 ? "0" + seconds : "" + seconds;

        element.innerHTML = hours + ":" + minutes + ":" + seconds;
    }

    function update() {
        var seconds = clock.seconds += 4;

        if (seconds === 60) {
            clock.seconds = 0;
            var minutes = ++clock.minutes;

            if (minutes === 60) {
                clock.minutes = 0;
                var hours = ++clock.hours;

                if (hours === 24) clock.hours = 0;
            }
        }
    }
} 
```

然后你可以创建一个时钟并像这样启动它：

```
var clock = new Clock("clock");
clock.start(); 
```

这是一个演示：http: [//jsfiddle.net/Nt5XN/](http://jsfiddle.net/Nt5XN/)

# javascript - 使用 Javascript 插入新行（rowspan）

> ID：14431537
> 
> 赞同：1
> 
> 时间：2013-01-21T01:59:37.540
> 
> 标签：javascript, html, row, html-table

我有如下的Javascript：

```
function addRow(table1) {

            var table = document.getElementById(table1);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[0].cells.length;

            for(var i=0; i<colCount; i++) {

                var newcell = row.insertCell(i);

                newcell.innerHTML = table.rows[0].cells[i].innerHTML;
                //alert(newcell.childNodes);
                switch(newcell.childNodes[0].type) {
                    case "text":
                            newcell.childNodes[0].value = "";
                            break;
                }
            }
        } 
```

和 HTML 如下：

```
<input type="button" value="Insert row" onclick="addRow('table1')" />
<table id="table1" border=1>
    <tr>
        <td rowspan=2><input type="text" name="txt1"></td>
        <td><input type="text" name="txt2"></td>
    </tr>
    <tr>
        <td><input type="text" name="txt3"></td>
    </tr>
</table> 
```

我有一排`rowspan=2`，两排没有行跨度。如何编写以下行，以便用户单击“插入行”按钮后，将三个文本框添加到新行中？

```
newcell.innerHTML = table.rows[0].cells.innerHTML; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:33:33.607

请注意，在您的代码中，您有：

```
> newcell.innerHTML = table.rows[0].cells.innerHTML; 
```

我想你的意思是：

```
newcell.innerHTML = table.rows[0].cells[i].innerHTML; 
```

但是无论如何，您是否考虑过使用克隆行来代替？例如类似于以下内容（未经测试）：

```
function addRow(tableID) {
  var table = document.getElementById(tableID);
  var row = table.rows[0].cloneNode(true);
  var inputs = row.getElementsByTagName('input');
  var i = inputs.length;

  while (i--) {

    if (inputs[i].type = 'text') {
      inputs[i].vaule = '';

      // Might want to change other properties too
    }
  }
  table.tBodies[0].appendChild(row);
} 
```

# function - 确定递归函数是否收敛

> ID：14431540
> 
> 赞同：1
> 
> 时间：2013-01-21T01:59:54.893
> 
> 标签：function, parsing, recursion, static-analysis, convergence

考虑以下递归阶乘函数：

```
fact(n) =
    if (n = 0) return 1
    return n * fact(n - 1) 
```

上述函数收敛于包括零在内的所有正整数。但是它不会收敛于负整数。

接下来，考虑以下程序：

```
fact(n) =
    if (n < 0) return 0
    if (n = 0) return 1
    return n * fact(n - 1) 
```

上述函数收敛于所有整数。

我想知道您将如何静态确定递归函数是否收敛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:43:34.653

在一般情况下，您不能。这个问题正是[停顿问题](http://en.wikipedia.org/wiki/Halting_problem)。

这是一个递归函数的简单示例，它可能对所有正输入都终止，以尾递归风格编写（断言它对所有正输入都停止`n`是[Collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)）：

```
stop(n, a=0) =
  if (n == 1) return a
  if (n % 2 == 0) return stop(n / 2, a + 1)
  return stop(3 * n + 1, a + 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:01:49.123

您没有指定语言并暗示您正在考虑无界整数，这是一件好事，因为这意味着我可以将您指向[这个原型分析器，用于](http://kaz.dsic.upv.es/sett/)作为 Web 应用程序提供的玩具语言。

对于无界整数，rici 是对的，这是停止问题。然而，静态分析器解决的大多数其他问题也等价于停机问题。这并不妨碍所讨论的静态分析器发挥作用。他们通过接受假阴性、假阳性或两者兼而有之来解决不确定性。

如果您更喜欢使用类似 C 的语法，您还可以使用 Frama-C 的值分析来确定[一个简单的 C 程序是否终止](http://blog.frama-c.com/index.php?post/2012/06/08/To-finish-on-termination)。此分析器不处理递归函数，它将整数类型视为有界（它们是）。有界整数类型在理论上使问题更容易（对于输入语言的某些定义，它变得可判定），但在实践中仍然很难。

# c - 如何让 Komodo Edit 7 自动完成 C？

> ID：14431542
> 
> 赞同：0
> 
> 时间：2013-01-21T02:00:38.680
> 
> 标签：c, autocomplete, komodoedit, code-intelligence

我正在使用 Komodo Edit 7.1 编写 C 代码，但它不会自动完成在包含的头文件中声明的函数名称或宏，即使它们位于同一目录中，即使我打开它们也是如此。让 Komodo Edit 将 C 头文件合并到其代码智能中需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:13:03.777

使用 Python 使用以下资源创建词法分析器：

*   [科莫多代码情报库](https://github.com/Komodo/KomodoEdit/tree/master/src/codeintel)

*   [科莫多文件位置](http://community.activestate.com/faq/komodo-file-locations)

*   [Komodo 扩展教程](http://trentm.com/2007/09/an-intro-to-komodo-extensions.html)

*   [R 语言自动完成项目](http://community.activestate.com/forum/code-intelligence-putting-it-all-together)

*   [Leo 语言自动完成项目](http://leo.zwiki.org/Autocompletion)

# ios - 在情节提要中调用 xib

> ID：14431544
> 
> 赞同：0
> 
> 时间：2013-01-21T02:01:06.447
> 
> 标签：ios, storyboard, xib

我可以将现有的 xib 文件与其对应的 .h 和 .m 调用或集成到 Storyboard 中吗？我有大约 6 个 xib 文件，里面有它们的布局，我需要在我的新故事板中调用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:59:27.387

您不能在情节提要中调用您的 xib 文件，但您可以将任何视图从您的 xib 复制并粘贴到情节提要，并将您的任何情节提要视图控制器的类更改为拥有您的 xib 的控制器的类。

# three.js - 如何使用 THREE.js createMultiMaterialObject 函数控制线宽？

> ID：14431545
> 
> 赞同：3
> 
> 时间：2013-01-21T02:01:09.743
> 
> 标签：three.js, webgl

我正在尝试使用 THREE.js 中的**createMultiMaterialObject**函数来创建也显示线框的着色对象。问题是线条出现断线并且似乎对**线框**线宽参数没有响应。

我的材料定义如下：

```
var mat1 = new THREE.MeshBasicMaterial( { color: 0xd02000, transparent: true, blending: THREE.AdditiveBlending } )
var blackLines = new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true, wireframeLinewidth: 4 } ); 
```

对象在这里：

```
 var object = THREE.SceneUtils.createMultiMaterialObject( new THREE.CubeGeometry( 100, 100, 100, 4, 4, 4 ), materials );
                object.position.set( -100, 150, 0 );
                scene.add( object ); 
```

但这会产生以下结果：![MultiMaterial 上的错误线框](../Images/5628b7f0bf5f62d9d444be829ffd6e25.png)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:50:42.667

你的代码很好。你在运行 Windows 吗？如果是这样，则可能是 ANGLE 问题，在这种情况下无法更改线宽。请参阅此相关[问题](https://stackoverflow.com/questions/11638883/thickness-of-lines-using-three-linebasicmaterial)。

如果您无法增加线宽，则在您的情况下，一种解决方法是使线框网格比实体网格稍大一点，如下所示：

```
object.children[ 1 ].scale.multiplyScalar( 1.01 ); 
```

如果你这样做，就不会有更多的折线，它会很漂亮。:-)

三.js r.55

# ruby-on-rails - Rails 的 cknife 版本问题

> ID：14431551
> 
> 赞同：2
> 
> 时间：2013-01-21T02:02:02.900
> 
> 标签：ruby-on-rails, chef-infra, knife

我正在运行一个命令：`cknife cluster launch mysite-production app --bootstrap`

```
/Users/shamoon/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `gem_original_require': no such file to load -- cluster_chef/knife (LoadError)
    from /Users/shamoon/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `require'
    from /Users/shamoon/.rvm/gems/ruby-1.8.7-p370@mysite/gems/cluster_chef-0.1.0.x2/bin/cknife:4
    from /Users/shamoon/.rvm/gems/ruby-1.8.7-p370@mysite/bin/cknife:19:in `load'
    from /Users/shamoon/.rvm/gems/ruby-1.8.7-p370@mysite/bin/cknife:19 
```

这就是我得到的错误。我试过: `bundle install`，这表明：`Your bundle is complete! Use`bundle show [gemname]`to see where a bundled gem is installed.`

那么`cknife`它没有安装是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:25:50.150

您是否尝试过捆绑执行命令？

所以：

```
bundle exec cknife cluster launch mysite-production app --bootstrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:39:14.590

该错误似乎试图从 Rubygems 中检索它，但它不存在。

你有没有跑过`gem install knife-cluster`然后又跑了`bundle`？

你为什么使用`cknife`？

[https://github.com/rberger/knife-cluster](https://github.com/rberger/knife-cluster)

# apache - apache配置站点维护页面

> ID：14431554
> 
> 赞同：1
> 
> 时间：2013-01-21T02:02:26.093
> 
> 标签：apache

我正在尝试在 apache httpd.conf 中为以下场景进行配置。任何人都可以请建议如何做到这一点。

当 apache 实例启动并且有人试图点击下面的 url

[http://mydomain.com/xxx](http://mydomain.com/xxx)

它应该显示存在于 sitemaintenance.html 中的内容，而不更改 url 上下文路径。

假设 sitemaintenance.html 位于 /usr/local/apache/my-apache-instance/htdocs/sitemaintenance.html

这里 xxx 是一个子域，它与主域 (mydomain.com) 分开托管。

-KS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:43:51.520

尝试将其放入您的子域`httpd.conf`或`.htaccess`为您的子域：

```
 RewriteEngine on
 RewriteCond  /usr/local/apache/my-apache-instance/htdocs/sitemaintenance.html -f
 RewriteRule ^.*$ /sitemaintenance.html [PT,L] 
```

中的条件`RewriteCond`仅在该文件存在时才启用重写，因此您可以动态添加或删除它，而无需重新启动 Apache 或更改`.htaccess`.

# grails - 使用域类作为持久性和瞬态？

> ID：14431555
> 
> 赞同：0
> 
> 时间：2013-01-21T02:02:27.080
> 
> 标签：grails, grails-domain-class, transient

我正在实施一个交易系统，我想对实时交易和回测使用相同的代码。在进行实时交易时，我需要持久化发生的所有事情，但是在回测时，我想使用相同的类和逻辑但不持久化它们（为了速度，因为我没有理由存储它们）。

我想我可以通过不调用 save() 来做到这一点，但我遇到了一个问题。我有一个 Account 类，其中包含 Position 对象的 hasMany 集合。问题是我需要在账户中找到正确的位置，但似乎我做不到，因为它从未被保存。我尝试遍历 hasMany 的 Positions 集合，但其中没有任何内容，即使我构造了一个 Position 对象并使用 addToPositions() 将其添加到帐户中。我想这在我试图避免的 save() 调用之后才有意义。

有没有办法为持久和瞬态目的重用相同的类，还是我试图做出不自然的行为？我愿意接受有关如何在这两种情况下重用这些类的任何建议。

**更新（添加代码示例）：**

Account.groovy：

```
class Account {
    String name
    static belongsTo = [user:S2User]
    static hasMany = [positions:Position, transactions:Transaction]
} 
```

SimAccount.groovy：

```
class SimAccount extends Account {
} 
```

位置.groovy：

```
class Position implements Serializable {
    String symbol
    static belongsTo = [account:Account]
} 
```

BacktestController.groovy：

```
 // add Account
        def acct = new SimAccount(name:"backtest")
        // add position
        def pos = new Position(symbol:'SIRI')
        acct.addToPositions(pos) 
```

策略.groovy：

```
 println "apply($accounts, $quotes) [$name]"
    accounts.each{ a ->
        println "  acct $a (${a?.name})"
        a?.positions?.each{ p ->
            println "    pos: $p"
        }
    }

    def siri = Position.findByAccountAndSymbol(accounts[0], 'SIRI')
    println "siri pos: $siri" 
```

保存对象后 Strategy.groovy 的输出是

```
apply([com.lossless.account.SimAccount : 1, null], [:]) [Live SIRI 50k]
  acct com.lossless.account.SimAccount : 1 (sim1)
    pos: com.lossless.account.Position : 1
  acct null (null)
siri pos: com.lossless.account.Position : 1 
```

对象尚未保存时的输出是

```
apply([com.lossless.account.SimAccount : null, null], [bid:1.74, ask:1.74]) [Backtest SIRI 50k]
  acct com.lossless.account.SimAccount : null (backtest)
    pos: com.lossless.account.Position : null
  acct null (null)
| Error 2013-01-21 03:11:11,984 [http-bio-8080-exec-2] ERROR errors.GrailsExceptionResolver  - TransientObjectException occurred when processing request: [POST] /lossless/backtest/index - parameters:
object references an unsaved transient instance - save the transient instance before flushing: com.lossless.account.Account. Stacktrace follows:
Message: object references an unsaved transient instance - save the transient instance before flushing: com.lossless.account.Account
   Line | Method
->> 105 | doCall         in org.grails.datastore.gorm.GormStaticApi$_methodMissing_closure2
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    66 | apply          in com.lossless.Strategy 
```

Strategy.groovy 中的第 66 行是对`Position.findByAccountAndSymbol()`.

# java - 如何从链表中创建堆栈？

> ID：14431561
> 
> 赞同：-1
> 
> 时间：2013-01-21T02:03:35.577
> 
> 标签：java

我正在尝试创建一个堆栈来获取一个字符串并将每个字符串字符添加到其中，但有人告诉我使用 LinkedList 会更有效。我将如何使用 LinkedList 来创建和操作堆栈？

一个例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:22:49.220

好的，问题是您根本没有使用`First`。尝试以下操作：

```
public class Example
{
    private LinkedList aList = new LinkedList();

    public void push(char c) {
        aList.addFirst(c);
    }
    public Object pop() {
        return aList.removeFirst();
    }
    public boolean empty() {
        return aList.isEmpty();
    }
    public static void main(String[] args)  {
        Stack exmpStack = new Stack();
        String ranString = "Dad";
        for (int i = 0; i < ranString.length(); i++)  {
            exmpStack.push(ranString.charAt(i));
        }
        while (!exmpStack.empty())  {
            System.out.print(exmpStack.pop());
        }
    }
} 
```

因为你永远不会使用`First`它`null`- 所以你的循环根本不会运行！而不是使用它，只需使用内置`isEmpty()`功能。

**编辑：**当然，您根本不需要这些功能 - 以下将正常工作：

```
public class Example
{
    private LinkedList aList = new LinkedList();

    public static void main(String[] args)  {
        String ranString = "Dad";
        for (int i = 0; i < ranString.length(); i++)  {
            aList.push(ranString.charAt(i));
        }
        while (!aList.isEmpty())  {
            System.out.print(aList.pop());
        }
    }
} 
```

现在这仍然有点不安全 - 您可以使用以下内容更进一步：

```
private LinkedList<Character> aList = new LinkedList<>(); 
```

这样它会更安全一些，并返回`Character`s 而不是`Objects`- 并且`Characters`可以隐式转换为`char`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:07:28.673

Java 的 LinkedList 是一个双向链表，具有高效的访问器来获取、添加和删除列表末尾和开头的元素，因此您可以使用这些方法来模拟堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:12:07.430

`LinkedList`确实更有效，因为`Stack`它依赖于同步方法`Vector`。在单线程应用程序中，使用后者意味着付出同步代价而没有任何好处。即使在多线程应用程序中，您也可能希望对同步进行更多控制。

这是一个可能的基于 LinkedList 的解决方案。请注意使用组合而不是继承。这将为您提供一个行为良好的堆栈，不能通过使用与列表相关的方法来滥用。

```
class MyStack<T> {
    private List<T> list = new LinkedList<T>();

    public void push(T object) { list.add(0, object); }

    public T pop(T object) {
        if (isEmpty()) throw new NoSuchElementException();
        return list.remove(0);
    }

    public boolean isEmpty() { return list.isEmpty(); }
} 
```

尽管如此，如果您的堆栈仅适用于您的问题所暗示的字符串字符，您可能希望直接在动态字符数组上模拟堆栈。我将把它作为练习留给读者，或者我可能会在以后的编辑中提供它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T02:13:06.440

LinkedList 提供了比堆栈更多的操作。

您使用堆栈来推送和弹出字符串中的字符。但是，您只能按照与插入字符串的方式相反的顺序检索字符。所以你确定你是否想要这种行为。

链表允许您从头/尾添加/检索数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T02:15:13.493

这是示例：[堆栈实现](http://www.firatatagun.com/stack-with-linkedlist-implementation/)。希望能帮助到你。

它是用 C# 完成的，但你明白了

# visual-studio-2010 - 我可以升级到 Windows 8 并且仍然可以使用 Visual Studio 2010 Professional 吗？

> ID：14431562
> 
> 赞同：2
> 
> 时间：2013-01-21T02:03:44.263
> 
> 标签：visual-studio-2010, windows-8, virtual-machine

我正在尝试升级装有 Windows 7 的 VM 并升级到 WIndows 8。在升级过程开始时，它突出显示 Visual Studio 2010 不兼容。这是真的？VS 2010 无法升级到 Windows 8 让我感到非常震惊。我想我现在会继续使用 Windows 7，但我想知道是否有一些补丁或其他东西可以让我在 Windows 8 升级中使用 VS 2010 .

我看到[了另一个相关的问题](https://stackoverflow.com/questions/13170054/visual-studio-2010-sp1-incompatible-with-windows-8)，但它是一个略有不同的问题，并没有真正回答为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T02:20:53.807

如果您查看[Microsoft Connect 网站](http://connect.microsoft.com/VisualStudio/feedback/details/769074/visual-studio-2010-incompatible-with-windows-8)，它指出 VS2010 主要与测试工具不兼容。

从上面的链接：

> 您好 - VS 2010 确实与 Win8 不兼容 - 不兼容的情况是围绕测试工具，所以通常 VS 2010 将在 Win8 上安装后运行 - 此问题已在此 GDR ( [http://support.microsoft .com/kb/2736182](http://support.microsoft.com/kb/2736182)）。

他们建议运行更新[http://support.microsoft.com/kb/2736182](http://support.microsoft.com/kb/2736182)这篇文章还提供了更多关于问题所在的见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:05:39.910

我自己并没有真正尝试过，但大多数 Windows 7 应用程序在 Windows 8 中都可以正常工作，而且我想不出 VS2010 不能工作的原因。您可以尝试复制您的虚拟机并升级它以确保安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:15:37.380

我在 Windows 8 上运行 VS2010。它工作得很好。

# asp.net-mvc - GZIP、asp.net mvc2 + iis7.5 时奇怪的80端口

> ID：14431578
> 
> 赞同：0
> 
> 时间：2013-01-21T02:07:53.110
> 
> 标签：asp.net-mvc, asp.net-mvc-2, gzip

**对于“text/html”** mimeType， GZIP 不能在**80**端口工作，尽管其余类型可以正常使用 GZIP。因此，我尝试将端口更改为其他端口，例如**808 或其他任何**端口，一切都变得正确。所有的 mimiTypes 都包括**"text/html"**做 GZIP 很好。

 ******* * *

**80 端口响应标头：**

**文本/html**不能 gzip

```
Cache-Control:private
Content-Length:2469
Content-Type:text/html; charset=utf-8 
```

**text/css**或任何其他类型都可以正常工作

```
Accept-Ranges:bytes
Content-Encoding:gzip
Content-Length:1550
Content-Type:text/css 
```

* * *

**808 端口响应标头：**

所有类型都包括**text/html** 工作 GZIP 罚款：

```
Cache-Control:private
Content-Encoding:gzip //became work fine!
Content-Length:1452
Content-Type:text/html; charset=utf-8

Accept-Ranges:bytes
Content-Encoding:gzip // work fine like before
Content-Length:1550
Content-Type:text/css 
```

* * *

1.**环境**：asp.net mvc 2.0 + iis7.5 + windows2008 R2。

2\. **IIS配置**：打开**动态内容和静态内容**压缩，**根站点**（我是指IIS树中的根节点，抱歉我不知道怎么用英文称呼它）和**目标站点**。

3.**根站点**：%systemroot%\System32\inetsrv\config\applicationHost\ **applicationHost.config**：

```
 <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files" doDiskSpaceLimiting="false" minFileSizeForComp="0">
            <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
            <dynamicTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="application/x-javascript" enabled="true" />              
                <add mimeType="message/*" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </dynamicTypes>
            <staticTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="message/*" enabled="true" />
                <add mimeType="application/x-javascript" enabled="true" />
                <add mimeType="application/atom+xml" enabled="true" />
                <add mimeType="application/xaml+xml" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </staticTypes>
        </httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true" /> 
```

4.target站点的**Web.config**：同样在mimeType上面打开：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
  <dynamicTypes>
    <add mimeType="text/*" enabled="true" />
    <add mimeType="message/*" enabled="true" />
    <add mimeType="application/x-javascript" enabled="true" />
    <add mimeType="application/json" enabled="true" />
    <add mimeType="application/json; q=0.5" enabled="true" />
    <add mimeType="application/json; charset=utf-8" enabled="true" />
    <add mimeType="application/json; q=0.5; charset=utf-8" enabled="true" />
    <add mimeType="*/*" enabled="false" />
  </dynamicTypes>
  <staticTypes>
    <add mimeType="text/*" enabled="true" />
    <add mimeType="message/*" enabled="true" />
    <add mimeType="application/x-javascript" enabled="true" />
    <add mimeType="application/atom+xml" enabled="true" />
    <add mimeType="application/xaml+xml" enabled="true" />
    <add mimeType="*/*" enabled="false" />
  </staticTypes>
</httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true" /> 
```

解决方案参考： [asp.net mvc - 某些文件未压缩](https://stackoverflow.com/questions/9336860/asp-net-mvc-some-files-are-not-gzipped) [http://www.iis.net/configreference/system.webserver/httpcompression](http://www.iis.net/configreference/system.webserver/httpcompression)

我怎样才能让 GZIP在 80 端口上为**text/html工作？********

# python - Django 将查询集序列化为 JSON 以仅使用字段信息和 id 构造 RESTful 响应

> ID：14431580
> 
> 赞同：18
> 
> 时间：2013-01-21T02:08:44.457
> 
> 标签：python, django, json, api, rest

我目前有一个带有“标题”和“摘要”字段的帖子模型。我正在检索所有帖子并将它们作为 JSON 作为 RESTful API 接口的一部分返回。

这是基本方法

```
from django.core import serializers

def list_posts(request):
    posts = Post.objects.filter(owner=authenticated_user)
    serialized = serializers.serialize("json", posts, fields=('title', 'summary'))
    return HttpResponse(serialized, mimetype='application/json') 
```

当我访问相应的路线时，我会收到以下回复。

## 当前响应

```
[{"pk": 4, "model": "api.post", "fields": {"summary": "Testing", "title": "My Test"}}, {"pk": 5, "model": "api.post", "fields": {"summary": "testing again", "title": "Another test"}}] 
```

这在技术上包含我的客户端构建模型所需的所有信息（我正在使用 Backbone 并且可以使用 collection.parse 来构建我需要的东西，但服务器端应该负责很好地构建响应）。对此我感到困扰的是，它看起来不像我习惯于在信誉良好的 API 中看到的标准 API 响应。我认为像下面这样的 JSON 响应会更“标准”。

## 期望的反应

```
[{'summary': 'Testing', 'id': 4, 'title': 'My test'}, {'summary': 'My Test', 'id':5, 'title': 'Another test'}] 
```

serialize 的输出似乎不太适合以 JSON 格式返回模型实例集合作为 API 调用的响应，这似乎是一种相当普遍的需求。我想将字段信息与 id （或 pk，如果必须称为 pk）一起返回。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T07:26:55.043

您想要实现的是转储到 json 的字段子集。

你正在做的是序列化整个 django 的 ORM 对象。不好。

把事情简单化：

```
import json

posts = (Post.objects.filter(owner=authenticated_user)
                     .values('id', 'title', 'summary'))
json_posts = json.dumps(list(posts)) 
```

# gcc - 关于 Makefile 的问题 - 什么是“$+”&这里调用的 .c 文件/依赖项在哪里？

> ID：14431581
> 
> 赞同：4
> 
> 时间：2013-01-21T02:08:49.283
> 
> 标签：gcc, makefile, dependencies, gnu-make

我遇到了这个 Makefile（通过一个名为 sendip 的开源项目找到它）

我对此文件有两个困惑-

1.  文件在哪里`.c`被指定为依赖项？`ipv6.so`尽管像,之类的所有库`tcp.so`都可以正常生成，但是这里的哪一行负责呢？

我认为这是行.....对吗？？

```
%.so: %.c $(LIBS)
                    $(CC) -o $@ $(CFLAGS) $(LIBCFLAGS) $+ $(LIBS) 
```

但`$(LIBS)`只指定一些 .o 文件。这是`$+`在做什么吗？

2.没听说过`$+`。我试图找出它并遇到了许多其他人，例如，，，等`$?`，但从未见过这个。我认为它的行为就像但它仍然需要指定依赖关系。`$@``$<``$?``.c`

**生成文件：**

```
#configureable stuff 

PREFIX ?= /usr/local
BINDIR ?= $(PREFIX)/bin
MANDIR ?= $(PREFIX)/share/man/man1
LIBDIR ?= $(PREFIX)/lib/sendip

#For most systems, this works
INSTALL ?= install

#For Solaris, you may need
#INSTALL=/usr/ucb/install

CFLAGS= -fPIC -fsigned-char -pipe -Wall -Wpointer-arith -Wwrite-strings \
-Wstrict-prototypes -Wnested-externs -Winline -Werror -g -Wcast-align \
-DSENDIP_LIBS=\"$(LIBDIR)\"

#-Wcast-align causes problems on solaris, but not serious ones

LDFLAGS=        -g -rdynamic -lm -ldl
#LDFLAGS_SOLARIS= -g -lsocket -lnsl -lm
LDFLAGS_SOLARIS= -g -lsocket -lnsl -lm -ldl
LDFLAGS_LINUX= -g  -rdynamic -lm -ldl
LIBCFLAGS= -shared
CC=     gcc-4.4

PROGS= sendip
BASEPROTOS= ipv4.so ipv6.so
IPPROTOS= tcp.so udp.so icmp.so
UDPPROTOS= rip.so ripng.so ntp.so
TCPPROTOS= bgp.so
PROTOS= $(BASEPROTOS) $(IPPROTOS) $(UDPPROTOS) $(TCPPROTOS)
LIBS= libsendipaux.a
LIBOBJS= csum.o compact.o protoname.o headers.o parseargs.o 
         cryptomod.o crc32.o
SUBDIRS= mec

all:    $(LIBS) subdirs sendip $(PROTOS) sendip.1 sendip.spec

#there has to be a nice way to do this

sendip: sendip.o        gnugetopt.o gnugetopt1.o compact.o
    sh -c "if [ `uname` = Linux ] ; then \
$(CC) -o $@ $(LDFLAGS_LINUX) $(CFLAGS) $+ ; \
elif [ `uname` = SunOS ] ; then \
   $(CC) -o $@ $(LDFLAGS_SOLARIS) $(CFLAGS) $+ ;\
else \
$(CC) -o $@ $(LDFLAGS) $(CFLAGS) $+ ; \
fi"

libsendipaux.a: $(LIBOBJS)
    ar vr $@ $?

subdirs:
    for subdir in $(SUBDIRS) ; do \
            cd $$subdir ;\
            make  ;\
            cd ..  ;\
            done

protoname.o:    mec/protoname.c
    $(CC) -o $@ -c -I. $(CFLAGS) $+

headers.o:      mec/headers.c
    $(CC) -o $@ -c -I. $(CFLAGS) $+

parseargs.o:    mec/parseargs.c
    $(CC) -o $@ -c -I. $(CFLAGS) $+

cryptomod.o:    mec/cryptomod.c
    $(CC) -o $@ -c -I. $(CFLAGS) $+

crc32.o: mec/crc32table.h mec/crc32.c
    $(CC) -o $@ -c -I. $(CFLAGS) mec/crc32.c

mec/crc32table.h: mec/gen_crc32table
    mec/gen_crc32table > mec/crc32table.h

sendip.1:       ./help2man $(PROGS) $(PROTOS) subdirs VERSION
                    ./help2man -n "Send arbitrary IP packets" -N >sendip.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T02:38:43.730

你是对的。

当目标定义以`%`字符开头时，它定义了目标模式，而不是特定模式。So`%.so`表示生成其他目标所需或用户所需的所有 .so 文件的目标。`%.c`也是一种模式，表示所有文件`.c`。

因此，`$(CC) -o $@ $(CFLAGS) $(LIBCFLAGS) $+ $(LIBS)`意味着命令输出将具有正在生成的目标的名称（$@ -> 与模式匹配的目标的名称）......并且`$+`意味着与`prerequisite`模式匹配的所有文件（即：）`%.c`。

查看 GNU make 手册，特别是[Catalog of Rules](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)以了解`$+`, `$^`, ... 的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:29:31.557

其中一些是 GNU Make（又名“gmake”）的扩展：

*   [http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles](http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles)

    变量定义解析如下：

    ```
     immediate = deferred
     immediate ?= deferred
     immediate := immediate
     immediate += deferred or immediate 
    ```

> GNU make 在两个不同的阶段完成它的工作。在第一阶段，它读取所有的 makefile、包含的 makefile 等，并内化所有变量及其值、隐式和显式规则，并构建所有目标及其先决条件的依赖图。在第二阶段，make 使用这些内部结构来确定需要重建哪些目标并调用必要的规则来这样做。
> 
> ...我们说，如果它发生在第一阶段，扩展是*立即*的：在这种情况下，make 将在解析 makefile 时扩展该构造部分中的任何变量或函数。如果不立即执行扩展，我们说扩展是*延迟的。*直到构造稍后出现在直接上下文中或直到第二阶段才执行延迟构造的扩展。

# ruby - 生成长度在给定范围内的数组的所有可能组合

> ID：14431582
> 
> 赞同：27
> 
> 时间：2013-01-21T02:08:51.633
> 
> 标签：ruby, arrays, combinations

如何生成长度在给定范围内的数组元素的所有可能组合？例如：

```
('a'..'f').to_a.all_possibilities(3, 5) 
```

应该产生一个数组，如：

```
['abc', 'abd', 'abe', 'abf', ..., 'abcde', 'abcdf', 'abcda', ...] 
```

包括从`"abc"`（三个字符）到最后可能的`('a'..'f').to_a`五个字符长度的组合。我不知道该怎么做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-21T02:17:21.510

[`Array#combination`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-combination)是标准库：

```
[1] pry(main)> a = ('a'..'f').to_a
=> ["a", "b", "c", "d", "e", "f"]
[2] pry(main)> a.combination(3).to_a
=> [["a", "b", "c"],
 ["a", "b", "d"],
 ["a", "b", "e"],
 ["a", "b", "f"],
 ["a", "c", "d"],
 ["a", "c", "e"],
 ["a", "c", "f"],
 ["a", "d", "e"],
 ["a", "d", "f"],
 ["a", "e", "f"],
 ["b", "c", "d"],
 ["b", "c", "e"],
 ["b", "c", "f"],
 ["b", "d", "e"],
 ["b", "d", "f"],
 ["b", "e", "f"],
 ["c", "d", "e"],
 ["c", "d", "f"],
 ["c", "e", "f"],
 ["d", "e", "f"]] 
```

如果您想要所有尺寸最小到最大的组合：

```
(min..max).flat_map{|size| a.combination(size).to_a } 
```

如果您希望它们转换为字符串，只需替换`.to_a`为`.map(&:join)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-21T02:14:59.397

```
(3..5).flat_map{|n| ('a'..'f').to_a.combination(n).map(&:join)} 
```

编辑：为了满足 OP 的明确意图，使用`repeated_permutation`.

```
(3..5).flat_map{|n| ('a'..'f').to_a.repeated_permutation(n).map(&:join)} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T02:35:51.257

您可以通过这种方式修改我对您之前问题的回答以获得您想要的。

```
class Array
  def all_possibilities(from, to)
    (from..to).flat_map do |i|
      if i < size
        permutation(i).to_a 
      else
        permutation(to - i).flat_map do |e|
          (self + e).permutation.to_a
        end
      end
    end.map(&:join)
  end
end

array = ["F", "E", "R", "N", "A", "D", "O"]
array.all_possibilities(3, 8) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-23T19:13:52.690

`

```
D = length of array
N = number of possible values. i.e a-z = 26
possible combinations = N ^ D
array = [possible values]

map26 = '0123456789abcdefghijklmnop'
map10 = 'abcdefghijklmnopqrstuvwxyz'

combo = '' 
for 0...N ** D do |i|
  i.to_s(D).split(//).each do |v|  
    combo += map10[map26.index(v)].chr
  end
  puts combo
  combo = ''
end 
```

`

编辑：请原谅上面的简洁，在浏览另一个答案时在 iPad 上破解它。我错了。

假设您希望 az 中的所有组合最多包含 3 列。

所有组合为 26 * 26 * 26 = 26 ** 3 = 17576

让数组的 0 个起点减去 1 = 17575

我们还需要一个映射变量，map26 是一列的 base 26 查找

```
map26 = '0123456789abcdefghijklmnop'
map10 = 'abcdefghijklmnopqrstuvwxyz' 
```

回到我们的最大组合

```
17575.to_s(26)
=> "ppp" 
```

从 map26 中提取 'p' 的索引并将其放入 map10 中：

```
map10[map26.index('p')]   (add .chr for ruby ~ 1.8)
=> "z" 
```

因此，如果您对上面的“ppp”进行切片和切块，您将获得最大的“zzz”组合

从映射变量中也可以看出“000”会映射到“aaa”

我已经修改了原始代码以包含这些更改。

关于原题，可以用D来控制字符串的最大长度，用for循环的起始值来控制最小长度。

# c# - 从父编辑表单更新多个子实体？

> ID：14431584
> 
> 赞同：0
> 
> 时间：2013-01-21T02:09:07.147
> 
> 标签：c#, asp.net-mvc-4

我有一个使用实体框架的 MVC4 C# 项目，我想知道如何从父实体更新多个子实体。

我正在使用视图模型将数据从两个模型发送到视图：

```
public class ResultData
    {
        public Result Result { get; set; }
        public IEnumerable<ResultNote> ResultNotes { get; set; }
    } 
```

所以我想更新结果编辑表单上的所有结果注释。

我的观点：

```
@model RSC3_DB.ViewModels.ResultData
@foreach (var note in Model.ResultNotes)
  {
    <div class="editor-field">
        @Html.EditorFor(model => note.NoteText)
        @Html.ValidationMessageFor(model => note.NoteText)
    </div>
  } 
```

这会将它们正确地呈现在表单上。我的问题是我需要在结果控制器“[HttpPost]ActionResult Edit”方法中放入什么来对 ResultNotes 进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:43:46.117

事实证明，您只需使用分配了指定索引值的 for 循环并列出每个模型属性。

```
for (int i = 0; i < Model.ResultNotes.Count(); i++ ) 
```

# html - 使用 PrettyPhoto/Lightbox 效果悬停？

> ID：14431586
> 
> 赞同：0
> 
> 时间：2013-01-21T02:09:46.817
> 
> 标签：html, css, lightbox, prettyphoto

我想在页面上有 4 张图片

当用户翻转每个图像时，我想将所有内容涂黑并有一个弹出窗口，用户可以在其中阅读一些信息并单击图像将它们带到不同的页面。

我通过漂亮照片获得了我想要的东西，但用户需要单击图像/不仅仅是将鼠标悬停在它上面，

```
<table class="gallery clearfix" cellpadding="10" cellspacing="40" border="0">
            <tr>
            <td valign="top" width="200px">
                <a href="#info_leadership" rel="prettyPhoto[inline]"><img src="../../images/misc/graphics/leadership_development.jpg" style="border:none" height="300" /></a>
            </td>
            <td valign="top" width="200px">
                <a href="#info_team_development" rel="prettyPhoto[inline]"><img src="../../images/misc/graphics/team_development.jpg" style="border:none" height="300" /></a>
            </td> 

        </tr>
        <tr>

            <td valign="top">
                <a href="#info_strategic_intelligence" rel="prettyPhoto[inline]"><img src="../../images/misc/graphics/strategic_intelligence.jpg" style="border:none" height="300" /></a>
            </td> 
            <td valign="top">
                <a href="#info_emotional_social" rel="prettyPhoto[inline]"><img src="../../images/misc/graphics/emotional_social.jpg" style="border:none" height="300" /></a>
            </td>
        </tr>
        </table>
        <div id="info_leadership" style="display:none;">
            <p class="table"><b>Leadership Development</b></p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dapibus, magna sed consectetur dapibus, libero ligula elementum urna, 
            cursus venenatis diam augue quis metus. Nulla et libero vitae dolor semper mollis in et est. Donec consequat tellus vel orci laoreet egestas. 
            Maecenas vitae lectus ut est malesuada faucibus vel sit amet felis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec felis ligula,
             varius vehicula massa. Curabitur suscipit venenatis dolor vel blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per 
             inceptos himenaeos. Duis facilisis, urna a egestas ultricies, nulla nisl tempus turpis, sed egestas dui mauris a quam. Integer porta pulvinar 
             ligula, quis accumsan mauris pretium eget. Nulla eu tortor quis urna pretium imperdiet. Aenean sed pellentesque elit. Aliquam erat volutpat. </p>
         </div>
        <div id="info_team_development" style="display:none;">
            <p class="table"><b>Team Development</b></p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dapibus, magna sed consectetur dapibus, libero ligula elementum urna, 
            cursus venenatis diam augue quis metus. Nulla et libero vitae dolor semper mollis in et est. Donec consequat tellus vel orci laoreet egestas. 
            Maecenas vitae lectus ut est malesuada faucibus vel sit amet felis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec felis ligula,
             varius vehicula massa. Curabitur suscipit venenatis dolor vel blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per 
             inceptos himenaeos. Duis facilisis, urna a egestas ultricies, nulla nisl tempus turpis, sed egestas dui mauris a quam. Integer porta pulvinar 
             ligula, quis accumsan mauris pretium eget. Nulla eu tortor quis urna pretium imperdiet. Aenean sed pellentesque elit. Aliquam erat volutpat. </p>
        </div>
        <div id="info_strategic_intelligence" style="display:none;">
            <p class="table"><b>Strategic Intelligence</b></p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dapibus, magna sed consectetur dapibus, libero ligula elementum urna, 
            cursus venenatis diam augue quis metus. Nulla et libero vitae dolor semper mollis in et est. Donec consequat tellus vel orci laoreet egestas. 
            Maecenas vitae lectus ut est malesuada faucibus vel sit amet felis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec felis ligula,
             varius vehicula massa. Curabitur suscipit venenatis dolor vel blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per 
             inceptos himenaeos. Duis facilisis, urna a egestas ultricies, nulla nisl tempus turpis, sed egestas dui mauris a quam. Integer porta pulvinar 
             ligula, quis accumsan mauris pretium eget. Nulla eu tortor quis urna pretium imperdiet. Aenean sed pellentesque elit. Aliquam erat volutpat. </p>
        </div>
        <div id="info_emotional_social" style="display:none;">
            <p class="table"><b>Emotional &amp; Social Intelligence</b></p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dapibus, magna sed consectetur dapibus, libero ligula elementum urna, 
            cursus venenatis diam augue quis metus. Nulla et libero vitae dolor semper mollis in et est. Donec consequat tellus vel orci laoreet egestas. 
            Maecenas vitae lectus ut est malesuada faucibus vel sit amet felis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec felis ligula,
             varius vehicula massa. Curabitur suscipit venenatis dolor vel blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per 
             inceptos himenaeos. Duis facilisis, urna a egestas ultricies, nulla nisl tempus turpis, sed egestas dui mauris a quam. Integer porta pulvinar 
             ligula, quis accumsan mauris pretium eget. Nulla eu tortor quis urna pretium imperdiet. Aenean sed pellentesque elit. Aliquam erat volutpat. </p>
        </div>

        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $("area[rel^='prettyPhoto']").prettyPhoto();
                $(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({ theme: 'light_square' });
                $(".gallery:gt(0) a[rel^='prettyPhoto']").prettyPhoto({ hideflash: true });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:11:34.827

如果有任何方法可以通过**悬停****触发**它，您应该查看**PrettyPhoto 文档**。 但我首先想到的是用 jQuery 模拟点击事件。

 ****像这样的东西：

```
$(document).ready(function () {

    $('div').hover(function () {
        $(this).trigger('click');
    });

    $('div').click(function () {
        alert("clicked");
    });

}); 
```

**[JSFiddle](http://jsfiddle.net/NRTqX/)******

# jquery - 让 jQuery 不丢弃某些元素

> ID：14431592
> 
> 赞同：0
> 
> 时间：2013-01-21T02:11:04.550
> 
> 标签：jquery, dom

我正在尝试使用 jQuery 解析一些 HTML，例如这个简单的示例：

```
$('<html><body><div><p>Test</p></div></body>') 
```

现在，生成的对象有点令人失望。当我使用 .html() 函数时，我应该得到根元素内的所有内容。

不幸的是，jQuery 丢弃了`<html>`, `<body>`&`<head>`标签。

所以我得到：

```
$('<html><body><div><p>Test</p></div></body>').html()
"<p>Test</p>" 
```

而不是身体。它将第一个元素视为根元素。

我可以使用这个：

```
$('<html><body><div><p>Test</p></div></body>')[0].outerHTML
"<div><p>Test</p></div>" 
```

但我仍然没有我想要解析的标签。

那么，我该如何解决呢？我可以以某种方式创建一个新的 jQuery dom 窗口对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:17:49.273

我不知道您为什么要使用它，但是针对您的问题的解决方案（不确定是否最好）是使用该方法`.append()`

```
$('<html>').append('<body>').append('<div>').append('<p>Test</p>'); 
```

这将创建一个`<html>`标签并用其他元素填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:19:15.970

当您向 jQuery 传递一个 HTML 字符串时，它会创建一个文档片段，而不是整个文档。因此，它不会包含您要询问的部分，例如`<body>`or `<head>`。

如果你想要所有这些部分，你可以创建一些不同的东西，比如 iframe。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T02:19:19.557

奇怪的是，这在 Chrome 和 Firefox 中都能完美运行：

```
$('<html>').html('<html><body><div><p>Test</p></div></body>') 
```

添加`<head>`标签也不会破坏它。

将`<body>`标签添加到原始选择器后，它将停止工作：

```
> $('<html></html>')
[<html>​&lt;/html>​]
> $('<html><body></body></html>')
[] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T02:27:02.583

我很确定 jQuery 不允许你这样做。但是，您可以将文档视为 XML 并以这种方式对其进行解析：

```
$.parseXML('<html><body><div><p>Test</p></div></body></html>').childNodes[0] 
```

`$.parseXML`创建一个 XML 文档，并将`.childNodes[0]`成为`<html>`节点。

# mysql - 添加新的 MySQL 表列并创建索引

> ID：14431600
> 
> 赞同：21
> 
> 时间：2013-01-21T02:12:19.473
> 
> 标签：mysql, sql

我有这个现有的查询来为现有表创建一个额外的 MySQL 列。：

```
$wpdb->query("ALTER TABLE mytable ADD COLUMN myarguments VARCHAR(255)"); 
```

如何在添加新列的同时创建索引？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-21T02:15:11.417

将它组合起来添加逗号，例如

```
ALTER TABLE mytable 
    ADD COLUMN myarguments VARCHAR(255), 
    ADD INDEX (myarguments); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/618c5/3)

# c# - 如何在 C# 匿名类型中声明“键”字段？

> ID：14431601
> 
> 赞同：18
> 
> 时间：2013-01-21T02:12:21.797
> 
> 标签：c#, vb.net, anonymous-types

在 VB.NET 中，我习惯于在创建匿名类型时做这样的事情（[VB.NET 匿名类型包括键字段的概念](http://msdn.microsoft.com/en-us/library/bb384767.aspx)）：

```
Dim prod1 = New With {
    Key .Name = "paperclips",
    Key .Price = 1.29,
    .OnHand = 423
} 
```

但是，我无法在 C# 中找到任何方法来执行此操作，因为似乎`Key`不支持该关键字。

有没有办法在 C# 中表明我只想在查找相等性时比较一些匿名类型的字段？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T02:25:29.773

C# 中没有类似的东西。[在 C# 中，匿名类型的所有属性都是只读的并参与相等比较。](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types)

如果你想在 C# 中做这样的事情，你需要创建自己的（命名的）类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T02:26:31.443

c# 中没有等效的 Key。

# c++ - 在 Visual Studio 2010 中编译 libpng 的问题

> ID：14431602
> 
> 赞同：2
> 
> 时间：2013-01-21T02:12:22.437
> 
> 标签：c++, visual-studio-2010, libpng

我在尝试使用 Visual Studio 2010 编译 libpng 1.5.13 时遇到了很多麻烦。

我下载了源码，打开了`\projects\vstudio`. 首先，它对 a 中的文件有很多错误的引用`..\..\..\1.2.5`——我手动从 1.2.7 文件夹中导入了文件（这是一个单独的项目，我认为它会指向我因此下载的 zlib 项目）。解决这个问题。

现在它抱怨它找不到文件`#include "zlib.h"`- 但是我没有找到那个文件？- 考虑到 " 标志，它应该在项目文件夹中，不是吗 - 或者我也应该将其更改为`..\..\..\1.2.5\zlib.h`?

我尝试下载 zlib，但是 pnglib 是否希望实际编译 zlib 并且不使用静态库之类的？- 那么我应该将整个 zlib 文件夹复制到 libpng 文件夹中吗？

# android - 跨平台推送消息 - 原生还是 Phonegap/Titanium？

> ID：14431603
> 
> 赞同：0
> 
> 时间：2013-01-21T02:12:43.787
> 
> 标签：android, ios, cordova, titanium, native

我需要开发一个简单的消息应用程序。它将使用 GCM 和 APNS。我对 JS/jQuery 有一些经验。

我应该同时学习 eclipse/java 和 xcode/object c，还是使用 phonegap（或钛）让我的生活更轻松？到目前为止，试图让科尔多瓦工作我只是遇到了兼容性问题......

我打算使用我自己的 php 推送服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:11:27.343

如果你想拥有强大的平台能力，那么你需要同时学习eclipse/java和xcode/objective C。如果你想为用户提供他们习惯的原生界面和控件。

但是，如果您打算让您的界面在两个平台上都可以工作，并且您需要考虑一个轻微的性能问题，而不是在多个平台上的开发成本。

但无论如何，你需要学习 eclipse 和 xcode 来进行部署和代码结构。此外，如果您想与操作系统通信，您需要在本机中编写插件。

希望你现在可以做出选择。

# asp.net-mvc - ASP.NET MVC 中的模型和控制器可以用于其他视图吗？

> ID：14431606
> 
> 赞同：1
> 
> 时间：2013-01-21T02:13:52.243
> 
> 标签：asp.net-mvc, model-view-controller, xaml, asp.net-mvc-4

好吧，我在想，是否可以将相同的 ASP.NET MVC 模型和控制器用于任何类型的视图，例如命令行、WPF 或任何其他 Xaml 视图层？因为理论上这应该是可能的。

如果有一个实际的实现，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:31:13.367

我相当确定您将无法按照您的意愿重用您的任何 MVC 架构，您必须采用如下所述的稍微不同的模式：

MVC（模型视图控制器）的替代方案是 MVP（模型视图演示者）。两者的模型基本相同，控制器的作用也非常相似。根据您的实现，MVP 中的控制器可能会承担更多责任。在 MVP 内部，有两种实现方式：Supervising Controller 和 Passive View。MVP 通常被认为是 WinForms 客户端的标准架构，也可以应用于 WebForms。以下是一些相关链接以获取更多信息：

*   MVP 的 MSDN - [http://msdn.microsoft.com/en-us/library/cc304760.aspx](http://msdn.microsoft.com/en-us/library/cc304760.aspx)
*   监督控制器 - [http://martinfowler.com/eaaDev/SupervisingPresenter.html](http://martinfowler.com/eaaDev/SupervisingPresenter.html)
*   被动视图 - [http://martinfowler.com/eaaDev/PassiveScreen.html](http://martinfowler.com/eaaDev/PassiveScreen.html) Jeremy Miller on
*   ASP.NET 的 MVP - [http://codebetter.com/blogs/jeremy.miller/archive/2006/02/01/137457.aspx](http://codebetter.com/blogs/jeremy.miller/archive/2006/02/01/137457.aspx)。您还可以查看他的 Build Your Own CAB 系列。它教授 MVP，因为它适用于 WinForms。
*   监督控制器上的多态播客截屏 - [http://polymorphicpodcast.com/shows/mv-patterns/](http://polymorphicpodcast.com/shows/mv-patterns/)

最后，如果您想阅读一本书，C# 中的敏捷原则、模式和实践包含了构建基于控制台的工资单应用程序的出色演练。完成后，他们构建到 WinForms UI 以展示他们的应用程序架构如何允许他们轻松添加新视图。

# php - 在 Smarty 中，如何指定要显示的默认模板？

> ID：14431609
> 
> 赞同：1
> 
> 时间：2013-01-21T02:14:07.883
> 
> 标签：php, templates, smarty

要显示模板，只需：

```
$smarty->display('base_layout.tpl'); 
```

在我的项目中，我将始终使用相同的模板，但会更改变量。是否有我可以在配置文件中设置的配置值，以便我可以执行以下操作：

```
$smarty->display(); 
```

并且总是打电话`filename.tpl`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:35:50.973

您可以覆盖`smarty->display()`函数来处理其参数。

# ruby-on-rails - 在这种情况下如何正确建立链接？

> ID：14431614
> 
> 赞同：0
> 
> 时间：2013-01-21T02:15:00.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试建立与亚马逊员工的链接。

如果我将关键字放在两者之间`<a type=amzn>`，`</a>`它会自动链接到带有关键字的亚马逊搜索结果页面。

我正在尝试制作以这种方式工作的按钮。
我怎样才能存档呢？

它应该是这样的。

**看法**

```
<%= link_to "Buy", "<a type=amzn >" + @book.title + "</a>", :class => 'btn' %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:17:52.550

尝试类似：

```
<%= link_to @book.title, "", :class => 'btn btn-primary', :type => 'amzn' %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:40:47.090

像这样的东西怎么样：

```
<%= link_to @book.title, :class => "btn" do %>
  and
<% end %> 
```

`and`您希望链接上的文本在哪里。

我不是 100% 确定我是否正确地理解了您正在寻找的东西 - 但如果我是......那么这应该有效。

# visual-studio-2010 - 运动检测代码 {EDIT}

> ID：14431615
> 
> 赞同：0
> 
> 时间：2013-01-21T02:15:02.500
> 
> 标签：visual-studio-2010, opencv, motion-detection

**EDIT** [Human walk motion Detect](http://andisplanet.com/classprojects/CFS/cfs2.html)链接解释了如何`Opencv 2.3`使用 C++ 在 Visual Studio 2010 上检测人体运动。我下载了源代码`motemp9.c`以及文本文件`walkImgs.txt`和`output.txt`标题`filter.h`，但不理解以下内容。

我很难执行这个程序。有人可以帮助我澄清这些观点吗？

1.  在`motiontemp9.c`文件中，在 main 下，行中的文件不存在。还是这些文件 walkImgs 和输出？

    ```
    if((ReadFP=fopen("walk2.txt", "r")) == NULL) ErrorExit(ER_READ_OPEN);
    if((WriteFP=fopen("output2.txt", "w")) == NULL) ErrorExit(ER_WRITE_OPEN); 
    ```

2.  运行代码出现以下错误

    ```
    error C2660: 'cvGetSeqElem' : function does not take 3 arguments
    motemp9.cpp(186): error C2227: left of '->rect' must point to class/struct/union/generic type
    motemp9.cpp(189): error C2440: '=' : cannot convert from 'CvScalar' to 'int'
    1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
    motemp9.cpp(218): error C2664: 'cvCircle' : cannot convert parameter 4 from 'int' to 'CvScalar'
    1>          No constructor could take the source type, or constructor overload resolution was ambiguous
    motemp9.cpp(220): error C2664: 'cvLine' : cannot convert parameter 4 from 'int' to 'CvScalar'
    1>          No constructor could take the source type, or constructor overload resolution was ambiguous
    ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
    ```

请指导运行此代码需要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:43:56.697

你能重新表述你的第一个问题吗，因为我真的不明白。

```
if((ReadFP=fopen("walk2.txt", "r")) == NULL) ErrorExit(ER_READ_OPEN);
if((WriteFP=fopen("output2.txt", "w")) == NULL) ErrorExit(ER_WRITE_OPEN); 
```

这两行只是在运行程序时检查文件是否存在。如果其中一个不存在，则返回 ErrorExit

对于你的第二个问题，在这个例子中，

> 创建运动历史图像。这包括将图像转换为灰度，按顺序一次查找两帧之间的差异，从而创建运动分层历史的剪影图像。[执行](http://andisplanet.com/classprojects/CFS/cfs2.html)

因此，您需要将您从自己的视频中提取的图像的路径放入 walk2.txt。

希望能帮助到你

# html - 如何布局与移动和桌面以及任何浏览器兼容的网站？

> ID：14431617
> 
> 赞同：0
> 
> 时间：2013-01-21T02:15:12.587
> 
> 标签：html, mobile

我最近做了一个网站

[http://www.albuquerqueautomotiveservice.com](http://www.albuquerqueautomotiveservice.com)

但是我搞砸了很长时间，因为它在每个移动网站测试仪上都失败了，而且它真的很糟糕我最近了解了表格，但后来我跳到了 html5 并了解了带有 web 工具包的弹性框，但我发现它们与所有浏览器都不兼容

所以我在这个没完没了的尝试中找到一个好的不完美的布局，可以根据我的网站的内容从任何浏览器和任何大小查看

我尝试了谷歌但收效甚微，而 youtube 上充斥着虚假的网络研讨会

有没有哪位大神能帮我解答一下，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:19:10.217

[Twitter bootstrap](http://twitter.github.com/bootstrap/)提供了一个流畅的响应式布局系统，可以适应所有设备。

但是，在大多数情况下，除了简单的内容页面之外，您根本无法涵盖所有​​形式因素和设备。您在带有键盘和鼠标的桌面中使用的习语很简单，与支持触摸的设备不同。

找出您的受众将使用什么，并让它决定您的解决方案。不要试图成为所有人的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:23:40.900

如果你愿意改进你的代码，一个对我来说总是很好的解决方案是使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)之类的东西，因为你可以根据需要使用尽可能多或尽可能少的功能，而且它没有太多的学习内容曲线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:32:04.327

如果您想使用某些东西，并且想查看有多少浏览器支持该功能，您可以查看[http://caniuse.com/](http://caniuse.com/)。

您也可以查看 jQuery Mobile 来提供帮助，但是，您可以通过以下问题找到更多信息：[jQuery Mobile for mobile and desktop?](https://stackoverflow.com/questions/5048695/jquery-mobile-for-mobile-and-desktop)

您没有说明您在服务器端使用什么，但您可以轻松检测移动浏览器[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)并更改启动它们的页面。

我个人喜欢使用 REST 服务进行所有数据交互的想法，然后您只需为 UI 和格式设置一层薄薄的 html，因此大部分业务逻辑都是集中的。

# perl - 发行版中的每个 Perl 模块都需要有版本号吗？

> ID：14431622
> 
> 赞同：9
> 
> 时间：2013-01-21T02:16:02.290
> 
> 标签：perl, cpan, perl-module

我正在维护一个包含 100 多个 .pm 文件的 CPAN 发行版。他们每个人都需要有一个 $VERSION，还是可以只将它包含在主模块中？

对于发行版中的其他模块，包含或不包含 $VERSION 有什么影响？

如果它与问题相关，人们应该只“使用”这个发行版中的主模块。而且，出于这个问题的目的，我不是在问它应该*如何在任何文件中指定，只是它**是否*以任何形式存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T06:59:00.837

根据经验，许多模块不会将版本号放在每个`.pm`文件中。如果你做一个快照包（`b`in `cpanp`）并查看生成的文件，你会看到。*在我的机器上，添加了许多*模块的 Perl 5.16.2 的快照包含 7962 个模块，但其中 2070 个包含“undef”作为版本（因此大约四分之一的版本具有 undef）。

就个人而言，我不喜欢这样，所以`.pm`我的模块中的所有文件——DBD [::Informix——](http://search.cpan.org/perldoc?DBD%3A%3AInformix)在每个版本中都标记了相同的版本（当前版本是 2013.0118，所有`.pm`文件都标记为 2013.0118 作为版本number），但是有很多模块（人）不这样做。

*   您不必为每个`.pm`文件提供版本号。
*   总体而言，最好为每个`.pm`文件提供一个版本号。
*   我认为为`.pm`分发中的所有文件提供相同的版本号是明智的。

在我看来，最糟糕的问题是当一个模块更新但有些没有更新时，所以 CPANPLUS 认为模块已经过时，即使安装最新版本并没有改变任何东西。目前我有 5 个这样的模块，我非常想将它们全部删除，尤其是因为我并没有真正使用它们。（有时，这是由安装在新位置的文件触发的，但我认为这不是唯一的原因。我不确定还有什么触发它，但这是一个定期发生的问题。）

# php - 在 BST 中打印第 k 个最小的，难以应用递归

> ID：14431630
> 
> 赞同：0
> 
> 时间：2013-01-21T02:17:32.850
> 
> 标签：php, data-structures

我目前正在使用以下代码按顺序遍历 BST。我的问题是，一旦达到第 k 个最小值，所有计算就会停止。

[http://codepad.viper-7.com/XMGcxz](http://codepad.viper-7.com/XMGcxz)

我的问题是以下功能

```
public function _kthSmallest($node, $k){        

    if($node->left != NULL){
        $this->_kthSmallest($node->left, $k);
    }        
    echo $node->data . ' ';
    self::$counter++;
    echo self::$counter . "<br/>";

    /*
    if(self::$counter >= $k){
        return $node->data;
    }        
    */    

    if($node->right != NULL){

        $this->_kthSmallest($node->right, $k);
    }        
} 
```

如果我取消注释此代码，我会遇到问题，因为根节点总是被打印出来。

```
/*
if(self::$counter >= $k){
    return $node->data;
}        
*/ 
```

关于在我达到第 k 个最小值后如何停止的任何想法？目前，该功能在整个 BST 中继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:21:34.773

如果返回`self::$counter > $k`。

实际上，你不应该达到那种状态。

由于您的函数似乎打算返回一个节点，因此如果计数较小，您将返回 NULL。

如果计数相等，您将返回当前节点。如果递归返回非 NULL，您将立即返回相同的值。

# php - 来自数组的php optgroup

> ID：14431631
> 
> 赞同：1
> 
> 时间：2013-01-21T02:17:35.393
> 
> 标签：php, optgroup

我很难得到一个填充了 optgroup 的选择框，然后有一个与 optgroup 关联的记录列表。optgroups 来自以下数组：

```
$state_list = array(
'AL'=>"Alabama",
'AK'=>"Alaska",
'AZ'=>"Arizona",
'AR'=>"Arkansas",
'CA'=>"California"
'CO'=>"Colorado", 
'CT'=>"Connecticut",
'DE'=>"Delaware",
'DC'=>"District Of Columbia",
'FL'=>"Florida",
'GA'=>"Georgia",
'HI'=>"Hawaii",
'ID'=>"Idaho",
'IL'=>"Illinois",
'IN'=>"Indiana",
'IA'=>"Iowa",
'KS'=>"Kansas",
'KY'=>"Kentucky", 
'LA'=>"Louisiana",
'ME'=>"Maine",
'MD'=>"Maryland",
'MA'=>"Massachusetts",
'MI'=>"Michigan",
'MN'=>"Minnesota",
'MS'=>"Mississippi",
'MO'=>"Missouri",
'MT'=>"Montana",
'NE'=>"Nebraska",
'NV'=>"Nevada",
'NH'=>"New Hampshire",
'NJ'=>"New Jersey",
'NM'=>"New Mexico",
'NY'=>"New York",
'NC'=>"North Carolina",
'ND'=>"North Dakota",
'OH'=>"Ohio",
'OK'=>"Oklahoma",
'OR'=>"Oregon",
'PA'=>"Pennsylvania",
'RI'=>"Rhode Island",
'SC'=>"South Carolina",
'SD'=>"South Dakota",
'TN'=>"Tennessee",
'TX'=>"Texas",
'UT'=>"Utah",
'VT'=>"Vermont",
'VA'=>"Virginia",
'WA'=>"Washington",
'WV'=>"West Virginia",
'WI'=>"Wisconsin",
'WY'=>"Wyoming",
'VI'=>'US Virgin Islands',
'AB'=>'Alberta',
'BC'=>'British Columbia', 
'MB'=>'Manitoba',
'NB'=>'New Brunswick',
'NL'=>'Newfoundland/Labrador',
'NT'=>'Northwest Territories',
'NS'=>'Nova Scotia',
'NU'=>'Nunavut',
'ON'=>'Ontario',
'PE'=>'Prince Edward Island',
'QC'=>'Quebec',
'SK'=>'Saskatchewan',
'YT'=>'Yukon Territory',
); 
```

从这里我尝试使用与数据库中的值匹配的键填充选择框，并且每个具有该状态键的记录都将成为该选项组的一个选项。

这是我的代码：

```
// We are going to go through each of the states in the array
foreach($state_list as $key => $value) {
  // we are going to set the value of the state
  echo '<optgroup label="' . $value. '">';
  // for each of the states we are going to find the markets that are associated with each of the states
  $market = mysqli_query($link, "select `title` from `ntvb-v4`.`campaigns` where `state` = "' .$key. '" AND `status` = 'ENABLED' AND `live` = '1' AND `title` NOT LIKE '%mail%' AND (`activity` = '' OR `activity` IS NULL)");
    while($row_market = mysqli_fetch_assoc($market)) {
    // now we need to add option for each of the markets
    echo '<option value="'.$row_market['title'].'">'.$row_market['title']'</option>';
  }
  echo '</optgroup>';
} 
```

正如你所知道的，我对这段代码没有任何帮助，我对如何解决这个问题感到困惑。任何有助于理解我需要做什么，以便键与表中的状态匹配，然后使用与该键关联的记录填充 optgroup，这是适当 optgroup 下的一个选项。

感谢您在这个困难的主题上为我提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:33:28.493

这是一个使用PDO进行参数绑定的示例，因为我无法忍受MySQLi中的绑定函数

```
<?php
ini_set('display_errors', 'On');
error_reporting(E_ALL);

$pdo = new PDO(/* connection string */);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare("
    SELECT `title` FROM `btvb-v4`.`campaigns`
    WHERE `state` = :state
    AND `status` = 'ENABLED'
    AND `live` = 1
    AND `title` NOT LIKE '%mail%'
    AND (`activity` = '' OR `activity` IS NULL)
    ORDER BY `title`
    ");
$stmt->bindParam('state', $state);

?>

<select name="campaign">

<?php foreach ($state_list as $state => $value) : ?>

    <optgroup label="<?= htmlspecialchars($value, ENT_QUOTES) ?>">

    <?php $stmt->execute(); while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) : ?>
        <option value="<?= htmlspecialchars($row['title'], ENT_QUOTES) ?>">
            <?= htmlspecialchars($row['title'] ?>
        </option>
    <?php endwhile ?>

    </optgroup>

<?php endforeach ?>

</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:34:08.133

看起来您的单引号/双引号`$key`是错误的/向后的-

```
$market = mysqli_query($link, "select `title` from `ntvb-v4`.`campaigns` where `state` = "' .$key. '" AND `status` = 'ENABLED' AND `live` = '1' AND `title` NOT LIKE '%mail%' AND (`activity` = '' OR `activity` IS NULL)");
                                                                                         ^^        ^^ 
```

尝试切换到 -

```
$market = mysqli_query($link, "select `title` from `ntvb-v4`.`campaigns` where `state` = '" .$key. "' AND `status` = 'ENABLED' AND `live` = '1' AND `title` NOT LIKE '%mail%' AND (`activity` = '' OR `activity` IS NULL)"); 
```

# spring - Cloudbees jsp或html页面可以与正在运行的应用程序分开编辑吗？

> ID：14431636
> 
> 赞同：0
> 
> 时间：2013-01-21T02:18:09.327
> 
> 标签：spring, cloudbees

使用 Cloudbees，是否可以将网页（即视图）与应用程序（即模型/控制器）分开存储，以便第三方网页设计师可以编辑网页，或者只能在构建应用程序之前完成。我正在使用 Spring 使用 Java 进行开发，并且可以在本地执行此操作，但看不到使用 Cloudbees 执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:31:57.763

您的问题实际上更多是关于如何构建应用程序，而不是如何在 CloudBees 上工作。

如果您使用 Maven 等构建应用程序，您可以将项目构建为一个多模块项目，其中一个`.jar`模块用于应用程序代码，一个`.war`模块用于 Web 应用程序。您可以将两个不同的模块放入单独的 SCM 存储库中，让 Jenkins 构建它们并通过部署到 CloudBees 的 RUN@cloud 服务来完成。

这绝不限于 Maven，您可以使用 ANT 或任何值得其盐的构建工具做同样的事情。

单片机的选择可以使这更容易或不...

*   如果您选择 GIT 作为您的 SCM（并且所有酷孩子都使用 GIT），请注意 GIT 旨在保存所有内容，这些内容将一次性发布在统一子目录树中的同一 GIT 存储库中。我的意思是你不能[轻松]检出（或标记）GIT存储库的一部分。因此，例如，如果您在 GIT 存储库中有一个多模块 Maven 项目，您必须同时检出所有模块，网页设计师将不得不转到`webapp/src/main/webapp`目录处理这些文件并忽略其他文件...哦，网页设计师无论如何都会在他们的机器上拥有所有文件。当需要发布版本时，您将一次性发布所有内容，因此所有模块都将具有相同的版本号。这意味着您将削减一个新的应用程序`.jar`即使所有更改都在`.jsp`文件中，也要发布...另一方面，您知道`.jar`每次剪切发布时都在使用最新的代码。诸如 GIT 子模块之类的[愚蠢行为可能会诱使您认为它们可能是一种解决方案，但这些并不是您正在寻找的解决方案。](http://en.wikipedia.org/wiki/Folly)

*   如果您选择 Subversion 作为您的 SCM，情况就不同了。Subversion 允许您仅签出和标记树的一部分。因此，您实际上可以只为网页设计师提供树的网页部分的 SCM URL，然后他们可以只检查那个并只处理那个。当然，他们失去了分布式 SCM 的所有乐趣，但他们不必看到任何不必要的干扰。有一个缺点......即他们不能轻易地为自己启动 Web 应用程序来验证他们的更改。他们仅限于猜测他们在文件中所做的更改`.jsp`将产生有效的 HTML 标记。

我个人的建议是设计师不傻（或者也许只是我们的设计师不傻）。你告诉他们他们需要处理的文件在哪里，他们将在那里工作。他们不会对您的其余代码进行更改……而且您无论如何都在使用 SCM，因此即使他们确实在其他地方进行了更改，您也可以轻松地回滚这些更改。如果你有设计师不应该看到的秘方，那么你一开始就做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:54:52.623

CloudBees 只是一个托管您的应用程序的地方——它不会影响您创建内容的方式。

要以这种方式工作 - 您最好设置一个构建管道（查找“clickstarts”并找到适合的），以便您的设计人员可以编辑网页，并且当进行更改并提交到源代码控制时，构建/部署周期是发起。

# python - 使用 gunicorn 时如何设置 django 测试服务器？

> ID：14431639
> 
> 赞同：11
> 
> 时间：2013-01-21T02:18:35.097
> 
> 标签：python, django, selenium, gunicorn

我正在用 gunicorn 在 django 中运行一个应用程序。我正在尝试使用 selenium 来测试我的应用程序，但遇到了问题。

我需要创建一个测试服务器，就像使用 djangos 完成的那样，`LiveServerTestCase`它可以与 gunicorn 一起使用。

有谁知道我该怎么做？

注意：也有人可以确认我`LiveServerTestCase`是作为线程而不是进程执行的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T00:34:29.183

我已经阅读了代码。寻找`LiveServerTestCase`灵感是有道理的，但试图通过扩展或以某种方式调用来制造一些东西`LiveServerTestCase`是在自找麻烦并增加维护成本。

一个健壮的运行方式*看起来*像什么，是从具有自定义和方法的测试用例类`LiveServerTestCase`创建。方法：`unittest.TestCase``setUpClass``tearDownClass``setUpClass`

1.  使用适合测试的设置设置 Django 应用程序的实例：位于不会干扰其他任何内容的位置的数据库，记录到适当位置的日志，如果在正常操作期间发送电子邮件，则电子邮件设置将不会t 让您的系统管理员想要扼杀您，等等。

    [实际上，这是一个部署过程。由于我们希望最终部署我们的应用程序，因此上述过程是我们*无论如何*都应该开发的过程。]

2.  将所需的任何固定装置加载到数据库中。

3.  启动一个 Gunicorn 实例运行 Django 应用程序的这个实例，为此使用常用的操作系统命令。

`tearDownClass`：_

1.  再次使用正常的操作系统命令关闭 Gunicorn 实例。

2.  删除为测试而创建的数据库，删除可能已创建的任何日志文件等。

在设置和拆卸之间，我们的测试在分配给 Gunicorn 的端口上联系应用程序，如果需要，它们会加载更多的固定装置，等等。

为什么不尝试使用修改后的`LiveServerTestCase`?

1.  `LiveServerTestCase`在一个过程中包含整个测试设置：测试、WSGI 服务器和 Django 应用程序。Gunicorn 不是为这样的操作而设计的。一方面，它使用主进程和工作进程。

2.  如果`LiveServerTestCase`被修改为以某种方式在外部进程中启动 Django 应用程序，那么这个类的很多好处就会消失。`LiveServerTestCase` *依赖*于它可以只修改其进程空间中的设置或数据库连接并且这些修改将传递到 Django 应用程序的事实，因为它存在于同一个进程中。如果应用程序处于不同的进程中，这些技巧将不起作用。一旦`LiveServerTestCase`被修改以解决这个问题，最终结果将接近我上面概述的内容。

**附加：**有人可以让 Gunicorn 和 Django 在同一个进程中运行吗？

我敢肯定有人*可以*将它们粘合在一起，但请考虑以下内容。这肯定意味着更改 Gunicorn 的*核心*代码，因为 Gunicorn*旨在*使用主进程和工作进程。然后，当 Gunicorn 或 Django 的内部结构发生变化导致胶水破裂时，创建胶水的人将负责保持胶水的最新状态。归根结底，这样做比使用本答案开头概述的方法需要更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T21:23:01.947

在我的脑海中，你可以尝试覆盖`LiveServerTestCase.setUpClass`并结束 gunicorn 而不是`LiveServerThread`

# python - Google 通讯录和 Google Plus 属性

> ID：14431640
> 
> 赞同：1
> 
> 时间：2013-01-21T02:19:07.270
> 
> 标签：python, django, google-plus, google-contacts-api

我正在使用 Python 应用程序来访问我的 Google 联系人并检索他们的信息。然而，我目前的问题不是编程，而是概念性的。

我注意到在过去，手机和家庭住址等字段是 Google 联系人的一部分。但是，现在 Google 通讯录似乎只包含电子邮件/群组，而所有额外信息（例如手机和地址）都是 Google Plus 个人资料的一部分。

因此，我假设为了获取某人的完整联系信息，包括电话号码和地址，我需要使用 Google Plus API 而不是 Google Contacts API。这是一个公平的假设吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:01:18.463

我无法谈论 Google Contacts API 的状态，但有关 Google+ API 的人员资源的更多信息，您可以查看[https://developers.google.com/+/api/latest/people](https://developers.google.com/+/api/latest/people)。

需要注意的一件事：只有当用户在其 Google+ 个人资料中将它们列为公开时，才会填充这些字段。

# python - 如何使用索引将 Pandas 数据框写入 sqlite

> ID：14431646
> 
> 赞同：41
> 
> 时间：2013-01-21T02:19:42.023
> 
> 标签：python, sqlite, pandas

我在 pandas DataFrame 中有一个从 Yahoo 提取的股票市场数据列表（请参见下面的格式）。日期用作 DataFrame 中的索引。我想将数据（包括索引）写入 SQLite 数据库。

```
 AAPL     GE
Date
2009-01-02  89.95  14.76
2009-01-05  93.75  14.38
2009-01-06  92.20  14.58
2009-01-07  90.21  13.93
2009-01-08  91.88  13.95 
```

根据我对 Pandas 的 write_frame 代码的阅读，它[目前不支持编写 index](https://github.com/pydata/pandas/blob/master/pandas/io/sql.py#L163)。我尝试改用 to_records ，但遇到了[Numpy 1.6.2 和 datetimes 的问题](https://github.com/pydata/pandas/issues/1908)。现在我正在尝试使用 .itertuples 编写元组，但 SQLite 会引发不支持数据类型的错误（请参见下面的代码和结果）。我对 Python、Pandas 和 Numpy 比较陌生，所以我完全有可能遗漏了一些明显的东西。我想我在尝试将日期时间写入 SQLite 时遇到了问题，但我认为我可能过于复杂了。

我想我*可以*通过升级到 Numpy 1.7 或 Pandas 的开发版本来解决这个问题，它在 GitHub 上发布了一个修复程序。我更喜欢使用软件的发布版本进行开发——我是新手，我不希望稳定性问题进一步混淆问题。

有没有办法使用 Python 2.7.2、Pandas 0.10.0 和 Numpy 1.6.2 来实现这一点？也许以某种方式清理日期时间？我有点不知所措，任何帮助将不胜感激。

**代码：**

```
import numpy as np
import pandas as pd
from pandas import DataFrame, Series
import sqlite3 as db

# download data from yahoo
all_data = {}

for ticker in ['AAPL', 'GE']:
    all_data[ticker] = pd.io.data.get_data_yahoo(ticker, '1/1/2009','12/31/2012')

# create a data frame
price = DataFrame({tic: data['Adj Close'] for tic, data in all_data.iteritems()})

# get output ready for database export
output = price.itertuples()
data = tuple(output)

# connect to a test DB with one three-column table titled "Demo"
con = db.connect('c:/Python27/test.db')
wildcards = ','.join(['?'] * 3)
insert_sql = 'INSERT INTO Demo VALUES (%s)' % wildcards
con.executemany(insert_sql, data) 
```

**结果：**

```
---------------------------------------------------------------------------
InterfaceError                            Traceback (most recent call last)
<ipython-input-15-680cc9889c56> in <module>()
----> 1 con.executemany(insert_sql, data)

InterfaceError: Error binding parameter 0 - probably unsupported type. 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-21T05:07:41.777

在最近的 pandas 中，索引将保存在数据库中（您以前必须[`reset_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reset_index.html)先保存）。

按照[文档](https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-sql)（在内存中设置 SQLite 连接）：

```
import sqlite3
# Create your connection.
cnx = sqlite3.connect(':memory:') 
```

*注意：您也可以在此处传递 SQLAlchemy 引擎（请参阅答案末尾）。*

我们可以保存`price2`到`cnx`：

```
price2.to_sql(name='price2', con=cnx) 
```

我们可以通过以下方式检索`read_sql`：

```
p2 = pd.read_sql('select * from price2', cnx) 
```

但是，当存储（和检索）**日期时，`unicode`**而不是`Timestamp`. 要转换回我们开始的内容，我们可以使用`pd.to_datetime`：

```
p2.Date = pd.to_datetime(p2.Date)
p = p2.set_index('Date') 
```

我们得到与以下相同的 DataFrame `prices`：

```
In [11]: p2
Out[11]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 1006 entries, 2009-01-02 00:00:00 to 2012-12-31 00:00:00
Data columns:
AAPL    1006  non-null values
GE      1006  non-null values
dtypes: float64(2) 
```

* * *

您还可以使用[SQLAlchemy 引擎](https://docs.sqlalchemy.org/en/latest/core/engines.html)：

```
from sqlalchemy import create_engine
e = create_engine('sqlite://')  # pass your db url

price2.to_sql(name='price2', con=cnx) 
```

这允许您使用`read_sql_table`（只能与 SQLAlchemy 一起使用）：

```
pd.read_sql_table(table_name='price2', con=e)
#         Date   AAPL     GE
# 0 2009-01-02  89.95  14.76
# 1 2009-01-05  93.75  14.38
# 2 2009-01-06  92.20  14.58
# 3 2009-01-07  90.21  13.93
# 4 2009-01-08  91.88  13.95 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-04-06T15:56:38.727

不幸的是，`pandas.io.write_frame`关于当前接受的答案，在最新版本的 Pandas 中不再存在。例如，我使用的是 pandas 0.19.2。你可以做类似的事情

```
from sqlalchemy import create_engine

disk_engine = create_engine('sqlite:///my_lite_store.db')
price.to_sql('stock_price', disk_engine, if_exists='append') 
```

然后依次使用以下内容预览您的表格：

```
df = pd.read_sql_query('SELECT * FROM stock_price LIMIT 3',disk_engine)
df.head() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-12-07T19:30:32.367

下面是对我有用的代码。我能够将它写入 SQLite DB。

```
import pandas as pd
import sqlite3 as sq
data = <This is going to be your pandas dataframe>
sql_data = 'D:\\SA.sqlite' #- Creates DB names SQLite
conn = sq.connect(sql_data)
cur = conn.cursor()
cur.execute('''DROP TABLE IF EXISTS SA''')
data.to_sql('SA', conn, if_exists='replace', index=False) # - writes the pd.df to SQLIte DB
pd.read_sql('select * from SentimentAnalysis', conn)
conn.commit()
conn.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T09:26:45.223

## sqlite3 的最小示例

基于[Keertesh Kumar 的回答](https://stackoverflow.com/a/53675765/13083583)。

### 将df写入sqlite

```
import pandas as pd
import sqlite3 as sq

df = pd.DataFrame({'col1': [1, 2], 'col2': [3, 4]})
table_name = "test" # table and file name

conn = sq.connect('{}.sqlite'.format(table_name)) # creates file
df.to_sql(table_name, conn, if_exists='replace', index=False) # writes to file
conn.close() # good practice: close connection 
```

### 读取 sqlite 到 df

```
conn = sq.connect('{}.sqlite'.format(table_name))
df = pd.read_sql('select * from {}'.format(table_name), conn)
conn.close() 
```

# c# - 适合在沙箱中运行客户端代码的语言

> ID：14431652
> 
> 赞同：14
> 
> 时间：2013-01-21T02:20:45.017
> 
> 标签：c#, java, javascript, security, sandbox

我想在我的服务器上模拟（不安全的）客户端代码，我正在寻找一种合适的语言来做到这一点。我更喜欢让客户用我将用来模拟的相同语言编写。

*   安全是首要问题
*   最好是众所周知的语言（便于客户学习语法）
*   应该很容易禁用/启用沙箱中可用的语言功能
*   如果我可以逐步模拟代码，那将是一个加号

理想情况下，我会简单地构建一些接口（并发布这些接口），加载客户端代码，并通过允许它仅使用我的接口 + 我精心选择的标准 API 的子集来模拟该代码。

在此模拟期间，我应该能够限制客户端代码使用的资源（时间和内存）。如果我可以逐步模拟代码，那么我总是可以返回一个确定性的解决方案。

性能并不是真正的问题。这个想法是允许客户为小型游戏/拼图编写自定义 AI。游戏将被模拟（在服务器上！）并将结果返回给用户。

最初我想自己构建一个外部 DSL，包括解析器和评估器，但也许有一个现成的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T06:24:57.647

我的选择是使用一些无需自动提供对某些扩展框架（如 .Net 或 Java）的访问即可使用的脚本语言 - 添加功能比限制它们更容易。[像LUA](http://www.lua.org/)这样的游戏引擎脚本语言可能是一种选择，并且通常带有多个平台的实现以在其中使用它们。

**一般考虑：**

无论您选择哪种语言/框架，请确保您可以从以下风险中恢复/接受：

*   致命异常（如递归函数导致的堆栈溢出）
*   无限的内存分配/内存不足异常
*   长时间运行的任务

谨防公开允许用户在您的控制之外创建新线程/任务/同步对象（锁/信号量）或在提供此类 API 的平台上构建的 API。允许这样的方法可能会打开服务器的资源以无限消耗或 DOS/死锁...

请注意，长时间运行的任务对于任何合理的语言都是一个问题，因为您无法通过查看程序来确定程序是否结束 -[停止问题](http://en.wikipedia.org/wiki/Halting_problem)。无论您选择什么平台，您都必须找出解决方案。

**.Net/C#：**

您可以查看在 .Net 中执行此操作的[Terrarium - 在沙盒环境中在用户机器上运行不受信任的代码。](http://terrarium2.codeplex.com/)

.Net 提供了一种限制使用多个 API 的方法 -[如何：在沙盒中运行部分受信任的代码](http://msdn.microsoft.com/en-us/library/bb763046%28v=vs.100%29.aspx)是一个很好的起点。请注意，正如@Andrew 指出的那样，最好验证用户提供的程序集（直接或从用户源编译）是否不使用您不喜欢的 API（或者甚至相反 - 仅使用 API你确实允许）除了基本的沙盒。在单独的 AppDomain 中运行的部分受信任的代码可以让您免受不太敌对的代码的影响。

[堆栈溢出](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception%28v=vs.100%29.aspx)通常很难防止，并且需要在 .Net 中处理自定义主机。长时间运行的任务可以使用 Thread.Abort 或使用用户代码关闭 AppDomain 来终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:30:58.810

我会推荐 .NET（C#、VB 和 F#）。您可以利用 JIT 让服务器以编程方式编译代码，使用反射分析代码，并让每个客户端在单独的 AppDomain 中运行以实现安全性和代码隔离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:59:03.727

如果您想运行最终用户提供的代码，并且希望它使用他们可能已经知道的语言，为什么不使用 JavaScript？

可以在 WebWorker 中对 JavaScript 进行沙箱处理（与主 JavaScript 应用程序隔离的并发线程，无法访问共享内存或全局变量，例如 Window 对象和 DOM，并且只有与主线程通信的单一途径）。

我能想到的唯一安全问题是限制一个人消耗的硬件资源，但我还没有研究过——这很可能使用其中一个 JavaScript 运行时。您还想找到一种方法来防止一个 WebWorker 产生其他 WebWorker。您必须添加一些额外的代码来确保某人的 WebWorker 在一定时间后自动关闭。

我还没有尝试过服务器端 WebWorkers，但是从它的外观来看，NodeJS、Rhino 和 PhantomJS 都支持它。Node 和 Rhino 提供了不同于典型 Web 浏览器的环境，而 PhantomJS 是一个无头运行的完整浏览器引擎 (WebKit)。从 WebWorker 的角度来看，它们可能看起来都一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:03:26.380

Java 具有[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)的概念，它使您能够微调虚拟机中可以运行或不可以运行的内容。

它还允许您在运行时[编译](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)代码并[加载](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)生成的类。然后，您可以运行这些类中的任何代码，前提是 SecurityManager 不会因为不允许该操作而引发 SecurityException。

[这篇文章](https://stackoverflow.com/questions/14282726/urlclassloader-and-accessibility-of-package-private-methods)展示了一个人为的例子，它在运行时编译、加载和运行一些代码（作为文本源代码提供）。

[这篇另一篇文章](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application)给出了运行不受信任（并且可能是恶意）代码的指导。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T01:57:49.120

如果你真的想要“众所周知”，[ADsafe](http://www.adsafe.org/)是 JavaScript 的一个子集，它被有效地沙盒化，尽管它有一些怪癖（例如避免`this`）。

Java 有“类加载器”，它可以限制类可以访问的类（请参阅 参考资料`SecureClassLoader`）。我对细节有点模糊，但它本质上是用来提供 Java 小程序安全性的。我不知道它是否可以限制内存使用，但限制 CPU 时间并不太难（不要让它产生线程并在超时后杀死运行不受信任代码的线程）。

（我深情地想起了[Robocode](http://robocode.sourceforge.net/)，它运行不受信任的 AI，试图在游戏的限制范围内杀死其他不受信任的 AI。主要区别在于它旨在在最终用户的计算机上运行，​​尽管有些网站会进行自动排名。它是我对 Java 的介绍，尽管我注意到它现在支持 .NET，可能是由于这两种语言的相似性。）

# actionscript-3 - 如何处理单个类的某些事件？

> ID：14431657
> 
> 赞同：0
> 
> 时间：2013-01-21T02:21:04.603
> 
> 标签：actionscript-3, flash, actionscript

例如，如何创建一个处理所有 startDrag() 和 stopDrag() 事件的类？这个类没有MovieClip。我希望此类仅用作多个类使用的事件的处理程序。

我正在制作一个游戏，我有很多可以拖放的项目，我需要一种更有效的方法，而不是把这段代码放在每个项目类中。

那么还有其他方法可以做到这一点吗？现在我必须将它复制并粘贴到我拥有的每个可以拖放的类中。

```
public function Weapon1() 
{
        originalPosition = new Point(x,y);
        addEventListener(Event.ENTER_FRAME, onEntrance);
}
public function onEntrance(evt:Event)
{
        addEventListener(MouseEvent.MOUSE_DOWN, mousedown);
        addEventListener(MouseEvent.MOUSE_UP, mouseup);
}
public function mousedown(evt:MouseEvent)
{
        startDrag(true);
}
public function mouseup(evt:MouseEvent)
{
        stopDrag();
        if(dropTarget)
        {
            if(dropTarget.parent.name == "slot")
            {
                this.x = dropTarget.parent.x;
                this.y = dropTarget.parent.y;
            }
        }
        else
        {
            returnToPosition();
        }
    }
    else
    {
        returnToNewPosition();
    }
}
public function returnToPosition()
{
    x = originalPosition.x;
    y = originalPosition.y;
}
public function returnToNewPosition()
{
    x = newPosition.x;
    y = newPosition.y;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:03:10.327

您需要的是**继承**，它是**面向对象编程**[的四个基本概念](http://www.adobe.com/devnet/actionscript/learning/oop-concepts/inheritance.html)之一。在 OOP 中，继承使类能够采用现有基类（也称为超类）的属性和方法。

 **所以; 您应该创建一个具有拖放逻辑的基类，并扩展该类以创建其他派生类（也称为子类）。

例如，这是基类 ( `Draggable`)：

```
package
{
    public class Draggable extends MovieClip
    {
        //Constructor

        public function Draggable()
        {
            addEventListener(Event.ADDED_TO_STAGE, onStageReady);
        }

        //Event Handlers

        protected function onStageReady(event:Event):void
        {
            addEventListener(MouseEvent.MOUSE_DOWN, mousedown);
            addEventListener(MouseEvent.MOUSE_UP, mouseup);
        }

        protected function mousedown(event:MouseEvent):void
        {
            startDrag(true);
            //more stuff here...
        }

        protected function mouseup(event:MouseEvent):void
        {
            stopDrag();
            //more stuff here...
        }
    }
} 
```

...这是`Weapon1`扩展基类的类：

```
package
{
    public class Weapon1 extends Draggable
    {
        //Constructor

        public function Weapon1()
        {
            //initialize Weapon1
        }

        //Methods, handlers, etc...
    }
} 
```

如你所见; 它**`extend`**是启用`Weapon1`类继承的关键字。
您可以继续创建更多武器类别...

```
public class Weapon2 extends Draggable { ... }
public class Weapon3 extends Draggable { ... }
public class Weapon4 extends Draggable { ... } 
```

请注意，`Draggable`该类还**扩展**了`MovieClip`该类以获得一些其他功能。因此，您扩展的每个类都`Draggable`将具有`MovieClip`和`Draggable`类的功能。

### 参考：

*   **[面向对象编程](http://oreilly.com/actionscript/excerpts/actionscript-3-design-patterns/object-oriented-programming.html)**
*   **[遗产](http://www.adobe.com/devnet/actionscript/learning/oop-concepts/inheritance.html)**
*   **[封装](http://www.adobe.com/devnet/actionscript/learning/oop-concepts/encapsulation.html)**
*   **[抽象](http://www.as3dp.com/2011/05/beginning-actionscript-3-0-abstraction-the-factory-method-at-work/)**
*   **[多态性](http://www.adobe.com/devnet/actionscript/learning/oop-concepts/polymorphism-and-interfaces.html)****

# php - 从 Web 服务器连接我办公室中的 MySQL 服务器

> ID：14431660
> 
> 赞同：4
> 
> 时间：2013-01-21T02:21:39.287
> 
> 标签：php, mysql

我想询问有关将网站上的数据库连接到我的办公室数据库的问题。

我有一个托管在共享托管服务器上的网站。我将 PHP 用于 Web，将 MySQL 用于数据库。现在，我想要的是服务器上的网站连接到我办公室数据库中的 MySQL 数据库。有没有办法做到这一点？

我现在可以做的是我的办公应用程序连接到网络上的数据库（远程 MySQL），但我需要的是相反，我的网络连接到我的办公数据库。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:28:38.967

MySQL 是网络数据库服务器，您可以从任何地方登录...

...如果计算机之间有网络连接:)

1.  您只需配置**MySQL 用户权限**并允许从该其他机器登录（其 IP 可配置，或者您可以允许任何 IP）。**默认情况下，MySQL 用户只能从 localhost 登录。** [更多信息（您可以使用 IP 代替域）](https://stackoverflow.com/questions/6239131/how-to-grant-remote-access-permissions-to-mysql-server-for-user)

2.  您可能需要让您的家庭/办公室互联网提供商（或网络管理员）提供/配置“公共 IP”。

3.  您可能需要在家庭/办公室路由器上设置“虚拟服务器”，并在家庭/办公室中配置任何**防火墙**。MySQL 默认使用 3306 端口。

4.  稍后添加：您可能必须在 MySQL 配置中启用 TCP/IP 协议。[更多的...](http://forums.mysql.com/read.php?11,414677,414683#msg-414683)

还有一件事 - “localhost”意味着在没有网络的情况下将计算机连接到自身。如果您谈论的是 2 台计算机 - 最好说“其他计算机”或“家用计算机”，而不是“本地主机”。

# php - 在 foreach 循环中将 $key 的值设置为新变量

> ID：14431664
> 
> 赞同：1
> 
> 时间：2013-01-21T02:22:23.140
> 
> 标签：php, html

> **可能重复：**
> [变量变量](https://stackoverflow.com/questions/3555057/variable-variables)

一旦我建立了第一个空输入字段，然后我想`$_POST['email'];`通过将 $key 的值变为变量来赋予它的值，但是我怎样才能将变量的值变为新变量（如果你明白我的意思）我将尝试在下面证明我的意思：

```
$email = $_POST['email'];
      foreach( $_POST as $key=> $for ) {
               if($for=="") { 

        //     $ + the value of ($key) = $email;           
                  break;
                }
         }

email: <input name="email">

    a: <input type="text" name="a" value='<?php echo $a; ?>'>
    b: <input type="text" name="b" value='<?php echo $b; ?>'>
    c: <input type="text" name="c" value='<?php echo $c; ?>'>
       <input type="submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:25:53.057

使用`$$key = $email`到 foreach 中，它将使用变量`$key`值创建一个新变量并为其赋值`$email`。

# objective-c - 使用 Objective-C 检索 JSON 数据

> ID：14431668
> 
> 赞同：0
> 
> 时间：2013-01-21T02:23:16.203
> 
> 标签：objective-c, json, api

> **可能重复：**
> [如何使用 Objective-C 解析 JSON？](https://stackoverflow.com/questions/5547311/how-do-i-parse-json-with-objective-c)

首先让我说我还是 Objective-C 的新手，但我正在寻找将 JSON 数据从 restful API 存储到变量的方法。我已经建立了与 API 的连接我只是不熟悉用于搜索以查找特定信息的命令。任何帮助或参考将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:36:08.880

从 RESTful API 检索 JSON 数据的最简单方法之一是使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)库。

这是一个示例代码

```
NSURL *url = [NSURL URLWithString:@"http://yourAPIUrl/whatever"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // do whatever you like with your JSON object
    NSLog(JSON);
} failure:nil];

[operation start]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:04:50.153

为 Objective-c 添加 JSON 解析器。它的开源。

```
SBJSON *parser = [[SBJSON alloc] init];
NSString *tempStr = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

// parse the JSON string into an object - assuming json_string is a NSString of JSON data
id object = [parser objectWithString:tempStr error:nil];

[resultObj release];
resultObj = [object retain]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T03:28:05.553

```
NSDictionary* myDict =  [NSJSONSerialization JSONObjectWithData:myJsonData 
                                                        options:0 
                                                          error:&error]; 
```

# python - Fedora 17 中的 vpython GdkGLExt-WARNING

> ID：14431669
> 
> 赞同：0
> 
> 时间：2013-01-21T02:23:20.487
> 
> 标签：python, linux, fedora, yum, vpython

我已经`Python 2.7.3`安装在 Fedora 17 中。我安装`vpython`并运行以下 python 脚本

```
from visual import *
a = sphere(color = color.red) 
```

我得到一个简短的 vpython 窗口轮廓但没有图像，以及以下错误输出

```
(python:3538): GdkGLExt-WARNING **: Cannot open \u000f

(python:3538): GdkGLExt-WARNING **: Cannot open ЇO\xa4O\u007f

(python:3538): glibmm-ERROR **: 
unhandled exception (type std::exception) in signal handler:
what: Unable to get extension function: glCreateProgramObjectARB even though the      extension is advertised.

Trace/breakpoint trap (core dumped) 
```

我过去使用过 Ubuntu，并通过安装摆脱了同样的错误`libgtkglextmm-x11-1.2-dev`，这完全修复了它。`yum`我需要安装以解决此问题的存储库中的软件包是什么？如果不可用，我还能做什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T05:18:58.080

gtkglextmm-开发

您可以使用 yum 提供来确定文件属于哪个包：

```
$ yum provides *libgtkglextmm*

Loaded plugins: langpacks, presto
gtkglextmm-1.2.0-15.fc18.i686 : C++ wrapper for GtkGlExt
Repo        : fedora
Matched from:
Filename    : /usr/lib/libgtkglextmm-x11-1.2.so.0.0.0
Provides    : libgtkglextmm-x11-1.2.so.0
Filename    : /usr/lib/libgtkglextmm-x11-1.2.so.0

gtkglextmm-devel-1.2.0-15.fc18.i686 : Development tools for gtkglextmm 
Repo        : fedora
Matched from:
Filename    : /usr/lib/libgtkglextmm-x11-1.2.la
Filename    : /usr/lib/libgtkglextmm-x11-1.2.so
Provides    : libtool(/usr/lib/libgtkglextmm-x11-1.2.la) 
```

为简洁起见，我只显示 i686 输出。您还将看到 x86_64 列表。

# codeigniter - Codeigniter `include` 和 `$this->view`

> ID：14431672
> 
> 赞同：0
> 
> 时间：2013-01-21T02:23:41.750
> 
> 标签：codeigniter, view, standards

例如，主视图包含来自另一个视图的部分视图。什么更好：

```
<html><head>...</head><body>
    <?php $this->view("anotherview.php"); ?>
</body>
</html> 
```

和：

```
<html><head>...</head><body>
    <?php include "anotherview.php"; ?>
</body>
</html> 
```

我知道第一个是 Codeigniter's View 的官方方式。但是，如果我使用第二个版本，是否有任何权衡/担忧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:28:12.993

更多信息在这里[https://stackoverflow.com/questions/474641/why-should-i-use-an-mvc-framework-for-php](https://stackoverflow.com/questions/474641/why-should-i-use-an-mvc-framework-for-php)

但简而言之，不`$this->view("anotherview.php");`，您不必使用它，如果您不使用它，那么完全使用codeigniter框架没有多大意义。

# android - 视图未出现在 viewpager 中

> ID：14431674
> 
> 赞同：4
> 
> 时间：2013-01-21T02:24:03.193
> 
> 标签：android

我第一次尝试构建一个viewpager。我在主 onCreate 方法中填充视图的 ArrayList 并将其传递给 PagerAdapter 的构造函数。活动启动正常，我可以看到 ViewPager（或至少它的背景），但没有任何视图出现在其中，我只看到空白背景。我试过膨胀我知道在其他小部件中工作的布局 XML，所以那里不会有问题。我猜这与我编写 instantiateObject 方法的方式有关。无论如何，这是我的适配器：

```
 public class StoryAdapter extends PagerAdapter {
    private Context ctx;
    private ViewBuilder viewBuilder;

    public StoryAdapter(Context ctx, ArrayList<View> views){
        this.ctx = ctx;
    }

    @Override
    public int getCount() {         
        return views.size();
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public Object instantiateItem(View arg0, int arg1) {
            View v = views.get(arg1);
            ((ViewPager) arg0).addView(v);
            return v;
            }

    @Override
    public void destroyItem(View pager, int arg1, Object view) {
    ((ViewPager) pager).removeView((View) view);

}
} 
```

这是我的 onCreate()：

```
public class ShowStory extends Activity {
public int totalPages;
Button backBtn;
public String text;
public ArrayList<View> views;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_show_story);

    backBtn = (Button)findViewById(R.id.backBtn);

    backBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View view){
            Intent intent = new Intent();
            setResult(RESULT_CANCELED, intent);        
            finish();       
        }
    });
    ViewPager vp = (ViewPager)findViewById(R.id.storyFlipper);
    views = new ArrayList<View>();

    View v0 = getLayoutInflater().inflate(R.layout.galleryview, null);

    TextView v0t = (TextView)v0.findViewById(R.id.headline);
    v0t.setText("COVER1");

    View v1 = getLayoutInflater().inflate(R.layout.coverpage, null);
//      TextView v1t = (TextView)findViewById(R.id.coverText);
//      v1t.setText("COVER2");      

    View v2 = getLayoutInflater().inflate(R.layout.coverpage, null);
//      TextView v2t = (TextView)findViewById(R.id.coverText);
//      v2t.setText("COVER3");  

views.add(v0);
views.add(v1);
views.add(v2);  

    StoryAdapter sa = new StoryAdapter(this, views);        
    vp.setAdapter(sa); 
```

PS我这样做主要是为了教育目的，这显然是一个非常简单的例子。任何帮助将不胜感激！

------编辑：我尝试了您的建议：

```
 @Override
    public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {

    case 0:
        resId = R.layout.coverpage;
        break;
    case 1:
        resId = R.layout.coverpage;
        break;
    case 2:
        resId = R.layout.coverpage;
        break;
    case 3:
        resId = R.layout.coverpage;
        break;

    }
    View view = inflater.inflate(resId, null);
    ((ViewPager) collection).addView(view, 0);
    return view;

    } 
```

并得到相同的结果 - 我看到 viewpager 的空白背景，但没有出现任何视图

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T03:25:00.013

我想通了 - 这是因为我在 isViewFromObject 方法中没有任何内容。将 null 替换为

```
return arg0 == (View) arg1; 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:05:26.610

我认为视图需要在 instantiateItems 方法中膨胀。我是这样做的：

```
@Override
public Object instantiateItem(View collection, int position) {
LayoutInflater inflater = (LayoutInflater) collection.getContext()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

int resId = 0;
switch (position) {

case 0:
    resId = R.layout.first_layout_id;

    break;
case 1:
    resId = R.layout.layout_id;
    break;
case 2:
    resId = R.layout.layout_id;
    break;
case 3:
    resId = R.layout.layout_id;
    break;

}

View view = inflater.inflate(resId, null);
((ViewPager) collection).addView(view, 0);
return view;

} 
```

# mod-rewrite - 将子域请求重写到主域（无重定向）

> ID：14431679
> 
> 赞同：0
> 
> 时间：2013-01-21T02:24:49.967
> 
> 标签：mod-rewrite

我正在努力实现这一目标：

当用户请求如下页面时：

```
en.domain.com/page.php
en.domain.com/subdir/page.php 
```

重写（**不是重定向**，只是重写）到：

```
www.domain.com/page.php
www.domain.com/subdir/page.php 
```

但是，index.php 应该是这个重写的一个例外，所以如果用户请求：

```
en.domain.com/index.php 
```

它将读取该物理页面而不进行任何重写。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:26:07.333

找到了答案：

```
RewriteEngine On
RewriteRule ^$ index.php [L]
RewriteRule ^(index.php) - [L]

RewriteCond %{HTTP_HOST} ^en\.domain\.com$ [NC]
RewriteRule (.+)$ "http://www.domain.com/$1" [L,P] 
```

# string - 在R中操作字符串

> ID：14431682
> 
> 赞同：0
> 
> 时间：2013-01-21T02:24:58.890
> 
> 标签：string, r, stata

我有以下`stata`代码，我试图将其转换为`R`：

`dataframe`

```
 y1  y2  y3  y4  y5  y6  y11 y12 y13 y14 y15 y16
    5   0   0   0   0   0   0   0   0   0   0   0
    5   0   0   0   0   0   0   0   0   0   0   0
    5   0   0   0   0   0   0   0   0   0   0   0
    5   0   0   0   0   0   0   0   0   0   0   0
    5   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   0   0   0   0   0   0
    0   0   0   0   0   0   1   2   1   2   0   0
    0   0   0   0   0   0   1   1   1   2   0   0
    0   0   0   0   0   0   1   8   1   2   0   0
    0   0   0   0   0   0   1   1   1   2   0   0
    0   0   0   0   0   0   1   1   1   2   0   0
    1   1   0   0   0   0   0   0   0   0   0   0
    1   1   0   0   0   0   0   0   0   0   0   0
    1   1   0   0   0   0   0   0   0   0   0   0
    1   1   0   0   0   0   0   0   0   0   0   0
    2   2   5   1   1   2   2   2   1   1   2       1

local z1 "y1 y12 y3 y4 y5 y6"
local z2 "y11 y12 y13 y14 y15 y16"
local i = 1
local n : word count `z1'
gen k=.

while `i'<=`n' {

    local z1`i' : word `i' of `z1'
        local z2`i' : word `i' of `z2'
        replace k=max(0,`z1`i'')*(`z2`i''==2|`z2`i''==1)
        local i=`i'+1
    } 
```

预期输出：

```
k
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
2 
```

我使用了以下等效`R`代码：

```
 dataframe$z1<- "y1 y12 y3 y4 y5 y6"
      dataframe$z2<- "y11 y12 y13 y14 y15 y16"
      i<-  1
      n<-sapply(gregexpr("\\W+", z1), length) + 1
      dataframe$k<-NA

    for (j in i:n){
  .... #I wanted to refer to each word of z1 
  ...#e.g.,dataframe$z1[i]<-which gives word i of z1 
  .. #I wanted to refer to each word of z2
  ... #e.g.,dataframe$z1[i]<-whicg gives word i of z2 

   dataframe$k<-with(dataframe, pmax(0,z1[j])*ifelse(z2[j] %in% c(1,2),1,0))

} 
```

虚线表示我无法在`R`. 如果您能在这方面帮助我，我将不胜感激。

```
 # Updated Stata codes and data (number of observation is reduced to 10)

y1  y2  y3  y4  y5  y6  y11 y12 y13 y14 y15 y16
5   0   0   0   0   0   0   0   0   0   0   0
5   0   0   0   0   0   0   0   0   0   0   0
5   0   0   0   0   0   0   0   0   0   0   0
5   0   0   0   0   0   0   0   0   0   0   0
5   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0

y111    y112    y113    y114    y115    y116    y1111   y1112   y1113   y1114   y1115   y1116
1   0   0   0   0   0   81000   0   0   0   0   0
1   0   0   0   0   0   86000   0   0   0   0   0
1   0   0   0   0   0   96000   0   0   0   0   0
1   0   0   0   0   0   84000   0   0   0   0   0
1   0   0   0   0   0   76000   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0
0   0   0   0   0   0   0   0   0   0   0   0

    local z1 "y1 y2 y3 y4 y5 y6"
    local z2 "y11 y12 y13 y14 y15 y16"
    local z3 "y111 y112 y113 y114 y115 y116"
    local z4 "y1111 y1112 y1113 y1114 y1115 y1116"
    local i = 1
    local n : word count `z1'
    gen k=.
    gen r=0
    gen s=0
    gen t=0
    while `i'<=`n' {

        local z1`i' : word `i' of `z1'
            local z2`i' : word `i' of `z2'
            local z3`i' : word `i' of `z3'
            local z4`i' : word `i' of `z4'

            replace k=max(0,`z4`i'')*(`z1`i''==5|`z1`i''==10|`z2`i''==2|`z2`i''==1|`z3`i''==1)
            replace r=r+k if `i'<=3
            replace s=s+k if `i'>3
            replace t=t+k
            local i=`i'+1
        } 

#Expected output

t       r   s       k
81000   81000   0   0
86000   86000   0   0
96000   96000   0   0
84000   84000   0   0
76000   76000   0   0
0           0   0   0
0           0   0   0
0           0   0   0
0           0   0   0
0           0   0   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:18:39.420

尼克提出了一个很好的观点，即您的`max`调用没有引用上一个`k`，因此它折叠到对第六列的检查。这是 R 等效项，假设您真的想要最大行数。我首先将您的数据存储在一个txt文件中。

```
data_all <- read.table("data.txt", header=T)
data_one <- data_all[,1:6]
data_two <- data_all[,7:12]
my_fun_one <- function(x, y) {
  x * ((y == 1) | (y == 2))
}
data_three <- mapply(FUN = my_fun_one, x=data_one, y=data_two)
my_fun_two <- function(x) {
  max(x, 0)
}
k <- apply(data_three, 1, FUN = my_fun_two) 
```

这产生

```
> k
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 
```

* * *

更新 - 这是您更新后的完整问题的解决方案。它或多或少地使用相同的构建块。一旦您熟悉了 R 的基础知识，我认为您将从`apply`、`lapply`和`mapply`.

```
data_one <- read.table("data_one.txt", header=T)
data_two <- read.table("data_two.txt", header=T)
z1 <- data_one[, 1:6]
z2 <- data_one[, 7:12]
z3 <- data_two[, 1:6]
z4 <- data_two[, 7:12]
my_fun <- function(w, x, y, z) {
  z * (z > 0) * ((w %in% c(5, 10)) | (x %in% c(1, 2)) | (y == 1))
}
z5 <- mapply(FUN=my_fun, w=z1, x=z2, y=z3, z=z4)
r <- rowSums(z5[, 1:3]) 
s <- rowSums(z5[, 4:6]) 
t <- rowSums(z5)
k <- z5[, ncol(z5)]
data_three <- data.frame(t, r, s, k) 
```

这产生：

```
> data_three
       t     r s k
1  81000 81000 0 0
2  86000 86000 0 0
3  96000 96000 0 0
4  84000 84000 0 0
5  76000 76000 0 0
6      0     0 0 0
7      0     0 0 0
8      0     0 0 0
9      0     0 0 0
10     0     0 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:08:12.443

无论如何，Stata 代码都毫无意义。给定数据后，代码循环遍历变量`y1`, ...`y6`和变量`y11`, ..., `y16`。它最初将一个新变量设置`k`为缺失，但无论以前的变量是什么，结果都将是

```
max(0, y6) * (y16 == 2|y16 == 1) 
```

这对 R 用户来说应该比提供的大多数代码更透明。该函数`max()`返回较大的参数并按行操作。

我怀疑这是否是预期的，但我不会试图猜测预期是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T16:14:52.353

这是原始 Stata 代码的较短版本。它采用给定的 Stata 变量（列、向量）`y1`...`y6`和`y11`... `y16`。

```
gen k = .

forval i = 1/6 {
    replace k = max(0, y`i') * (y1`i' == 2|y1`i' == 1)
} 
```

`forval`循环循环超过 1、2、3、4、5、6 。有宏替换，所以第一次循环 RHS 是`max(0, y1) * (y11 == 2|y11 == 1)`，最后一次循环 RHS 是`max(0, y6) * (y16 == 2|y16 == 1)`。因此，从循环中出来的结果不可避免地是最后一次计算的结果。

（编辑）我确认`local`不需要任何陈述。

（第二次编辑）我还假设`y12`在原件`local z1 "y1 y12 y3 y4 y5 y6"`中是`y2`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T19:46:02.890

正如已经表明的那样，Stata 代码可以简化为

```
gen k = .
gen r = 0
gen s = 0
gen t = 0
quietly forval i = 1/6 {
replace k = max(0, y111`i')*(y`i'==5|y`i'==10|y1`i'==2|y1`i'==1|y11`i'==1)
     replace r = r+k if `i'<=3
     replace s = s+k if `i'>3
     replace t = t+k
} 
```

修改后的代码确实清楚地说明了为什么覆盖`k`没有问题，因为`k`总是及时使用每个新结果。

# postgresql - PostgreSQL 中的平均函数，容差为 5 分钟

> ID：14431684
> 
> 赞同：0
> 
> 时间：2013-01-21T02:25:12.853
> 
> 标签：postgresql, aggregate-functions, time-series, average, temporal-database

我有一个时间数据库，我想通过平均函数聚合每个 HH 瞬时值，前 5 分钟和后 5 分钟。数据采样频率为 2 分钟，数据包括时间戳和温度列。首先，代码应该从 00, 01, 02, 03, ... 24 中提取瞬时值，然后在瞬时时间之前应用 2 次观察和之后的 2 次观察。此外，在 db 中，有时分钟是奇数，有时是偶数。因此，我们同时拥有 HH-1:59 和 HH:00 。平均值取自 5 个值的平均值。date_time 列的格式是时间戳。此外，代码应该可以处理多天的数据。

样本数据：

```
 dt          ambtemp
       "2007-09-29 00:11:09+02";-1.87
    "2007-09-29 00:13:09+02";-1.87
    "2007-09-29 00:15:09+02";-1.8
    "2007-09-29 00:17:09+02";-1.64
    "2007-09-29 00:19:09+02";-1.6
    "2007-09-29 00:21:09+02";-1.9
    "2007-09-29 00:23:09+02";-2.08
    "2007-09-29 00:25:09+02";-1.94
    "2007-09-29 00:27:09+02";-2.12
    "2007-09-29 00:29:09+02";-1.87
    "2007-09-29 00:31:09+02";-2.18
    "2007-09-29 00:33:09+02";-1.98
    "2007-09-29 00:35:09+02";-1.73
    "2007-09-29 00:37:09+02";-1.84
    "2007-09-29 00:39:09+02";-2.04
    "2007-09-29 00:41:09+02";-1.86
    "2007-09-29 00:43:09+02";-1.94
    "2007-09-29 00:45:09+02";-1.77
    "2007-09-29 00:47:09+02";-1.78
    "2007-09-29 00:49:09+02";-1.5
    "2007-09-29 00:51:09+02";-1.46
    "2007-09-29 00:53:09+02";-1.72
    "2007-09-29 00:55:09+02";-1.67
    "2007-09-29 00:57:09+02";-1.56
    "2007-09-29 00:59:09+02";-1.69
    "2007-09-29 01:01:09+02";-1.97
    "2007-09-29 01:03:09+02";-1.79
    "2007-09-29 01:05:09+02";-1.79
    "2007-09-29 01:07:09+02";-1.84
    "2007-09-29 01:09:09+02";-1.91
    "2007-09-29 01:11:09+02";-1.87
    "2007-09-29 01:13:09+02";-1.98
    "2007-09-29 01:15:09+02";-1.83
    "2007-09-29 01:17:09+02";-1.88
    "2007-09-29 01:19:09+02";-1.88
    "2007-09-29 01:21:09+02";-1.78
    "2007-09-29 01:23:09+02";-1.78
    "2007-09-29 01:25:09+02";-1.66
    "2007-09-29 01:27:09+02";-1.7
    "2007-09-29 01:29:09+02";-1.46
    "2007-09-29 01:31:09+02";-1.36
    "2007-09-29 01:33:09+02";-1.4
    "2007-09-29 01:35:09+02";-1.34
    "2007-09-29 01:37:09+02";-1.34
    "2007-09-29 01:39:09+02";-1.3
    "2007-09-29 01:41:09+02";-1.36
    "2007-09-29 01:43:09+02";-1.4
    "2007-09-29 01:45:09+02";-1.43
    "2007-09-29 01:47:09+02";-1.38
    "2007-09-29 01:49:09+02";-1.4
    "2007-09-29 01:51:09+02";-1.42
    "2007-09-29 01:53:09+02";-1.47
    "2007-09-29 01:55:09+02";-1.66
    "2007-09-29 01:57:09+02";-1.84
    "2007-09-29 01:59:09+02";-1.92
    "2007-09-29 02:01:09+02";-1.88
    "2007-09-29 02:03:09+02";-2.11
    "2007-09-29 02:05:09+02";-1.91
    "2007-09-29 02:07:09+02";-2.04
    "2007-09-29 02:09:09+02";-1.94
    "2007-09-29 02:11:09+02";-1.92
    "2007-09-29 02:13:09+02";-1.8
    "2007-09-29 02:15:09+02";-1.74
    "2007-09-29 02:17:09+02";-1.74
    "2007-09-29 02:19:09+02";-1.76
    "2007-09-29 02:21:09+02";-1.74
    "2007-09-29 02:23:09+02";-1.8
    "2007-09-29 02:25:09+02";-1.8
    "2007-09-29 02:27:09+02";-1.8
    "2007-09-29 02:29:09+02";-1.82
    "2007-09-29 02:31:09+02";-1.9
    "2007-09-29 02:33:09+02";-1.93
    "2007-09-29 02:35:09+02";-2.06
    "2007-09-29 02:37:09+02";-2.08
    "2007-09-29 02:39:09+02";-1.95
    "2007-09-29 02:41:09+02";-1.98
    "2007-09-29 02:43:09+02";-2.32
    "2007-09-29 02:45:09+02";-1.86
    "2007-09-29 02:47:09+02";-1.97
    "2007-09-29 02:49:09+02";-1.64
    "2007-09-29 02:51:09+02";-2
    "2007-09-29 02:53:09+02";-1.48
    "2007-09-29 02:55:09+02";-1.74
    "2007-09-29 02:57:09+02";-1.85
    "2007-09-29 02:59:09+02";-1.82
    "2007-09-29 03:01:09+02";-1.82
    "2007-09-29 03:03:09+02";-1.92
    "2007-09-29 03:05:09+02";-1.8
    "2007-09-29 03:07:09+02";-1.54
    "2007-09-29 03:09:09+02";-1.36
    "2007-09-29 03:11:09+02";-1.5
    "2007-09-29 03:13:09+02";-1.59
    "2007-09-29 03:15:09+02";-1.6
    "2007-09-29 03:17:09+02";-1.58
    "2007-09-29 03:19:09+02";-1.81
    "2007-09-29 03:21:09+02";-2.16
    "2007-09-29 03:23:09+02";-1.97
    "2007-09-29 03:25:09+02";-1.94
    "2007-09-29 03:27:09+02";-2.29
    "2007-09-29 03:29:09+02";-2.46
    "2007-09-29 03:31:09+02";-2.42
    "2007-09-29 03:33:09+02";-2.34
    "2007-09-29 03:35:09+02";-2.38
    "2007-09-29 03:37:09+02";-2.44
    "2007-09-29 03:39:09+02";-2.28
    "2007-09-29 03:41:09+02";-2.24
    "2007-09-29 03:43:09+02";-2.26
    "2007-09-29 03:45:09+02";-2.05
    "2007-09-29 03:47:09+02";-2.38
    "2007-09-29 03:49:09+02";-2.24
    "2007-09-29 03:51:09+02";-2.46
    "2007-09-29 03:53:09+02";-2.22
    "2007-09-29 03:55:09+02";-2.24
    "2007-09-29 03:57:09+02";-2.2
    "2007-09-29 03:59:09+02";-2.28
    "2007-09-29 04:01:09+02";-1.86
    "2007-09-29 04:03:09+02";-1.9
    "2007-09-29 04:05:09+02";-1.98
    "2007-09-29 04:07:09+02";-1.99
    "2007-09-29 04:09:09+02";-2
    "2007-09-29 04:11:09+02";-1.98
    "2007-09-29 04:13:09+02";-2.13
    "2007-09-29 04:15:09+02";-2.11
    "2007-09-29 04:17:09+02";-2.1
    "2007-09-29 04:19:09+02";-2.28
    "2007-09-29 04:21:09+02";-2.28
    "2007-09-29 04:23:09+02";-2.44
    "2007-09-29 04:25:09+02";-2.44
    "2007-09-29 04:27:08+02";-2.2
    "2007-09-29 04:29:08+02";-2.2
    "2007-09-29 04:31:08+02";-2.11
    "2007-09-29 04:31:09+02";-2.11
    "2007-09-29 04:33:09+02";-2.3
    "2007-09-29 04:35:09+02";-2
    "2007-09-29 04:37:08+02";-1.7
    "2007-09-29 04:39:08+02";-1.43
    "2007-09-29 04:41:08+02";-1.55
    "2007-09-29 04:43:09+02";-1.43
    "2007-09-29 04:45:09+02";-1.59
    "2007-09-29 04:47:08+02";-1.58
    "2007-09-29 04:49:08+02";-1.52
    "2007-09-29 04:51:08+02";-1.5
    "2007-09-29 04:53:09+02";-1.4
    "2007-09-29 04:55:08+02";-1.46
    "2007-09-29 04:55:09+02";-1.46
    "2007-09-29 04:57:08+02";-1.5
    "2007-09-29 04:59:08+02";-1.52
    "2007-09-29 05:01:08+02";-1.64
    "2007-09-29 05:03:08+02";-1.7
    "2007-09-29 05:05:08+02";-1.7
    "2007-09-29 05:07:08+02";-1.71
    "2007-09-29 05:09:08+02";-1.96
    "2007-09-29 05:11:08+02";-2.03
    "2007-09-29 05:13:08+02";-2.18
    "2007-09-29 05:15:08+02";-2.2
    "2007-09-29 05:17:08+02";-1.91
    "2007-09-29 05:19:08+02";-2.06
    "2007-09-29 05:21:08+02";-2
    "2007-09-29 05:23:08+02";-1.92
    "2007-09-29 05:25:08+02";-2
    "2007-09-29 05:27:08+02";-1.86
    "2007-09-29 05:29:08+02";-2.08
    "2007-09-29 05:31:08+02";-2.03
    "2007-09-29 05:33:08+02";-1.83
    "2007-09-29 05:35:08+02";-1.7
    "2007-09-29 05:37:08+02";-1.7
    "2007-09-29 05:39:08+02";-1.6
    "2007-09-29 05:41:08+02";-1.64
    "2007-09-29 05:43:08+02";-1.65
    "2007-09-29 05:45:08+02";-1.67
    "2007-09-29 05:47:08+02";-1.8
    "2007-09-29 05:49:08+02";-1.82
    "2007-09-29 05:51:08+02";-1.88
    "2007-09-29 05:53:08+02";-1.91
    "2007-09-29 05:55:08+02";-1.92
    "2007-09-29 05:57:08+02";-1.93
    "2007-09-29 05:59:08+02";-1.9
    "2007-09-29 06:01:08+02";-2.04
    "2007-09-29 06:03:08+02";-1.98
    "2007-09-29 06:05:08+02";-1.96
    "2007-09-29 06:07:08+02";-1.98
    "2007-09-29 06:09:08+02";-1.93
    "2007-09-29 06:11:08+02";-1.78
    "2007-09-29 06:13:08+02";-1.73
    "2007-09-29 06:15:08+02";-1.76
    "2007-09-29 06:17:08+02";-1.67
    "2007-09-29 06:19:08+02";-1.68
    "2007-09-29 06:21:08+02";-1.38
    "2007-09-29 06:23:08+02";-1.33
    "2007-09-29 06:25:07+02";-1.31
    "2007-09-29 06:27:08+02";-1.34
    "2007-09-29 06:29:08+02";-1.28
    "2007-09-29 06:31:08+02";-1.28
    "2007-09-29 06:33:07+02";-1.51
    "2007-09-29 06:35:08+02";-1.76
    "2007-09-29 06:37:08+02";-1.84
    "2007-09-29 06:39:08+02";-1.89
    "2007-09-29 06:41:08+02";-1.98
    "2007-09-29 06:43:08+02";-2
    "2007-09-29 06:45:08+02";-2
    "2007-09-29 06:47:08+02";-1.96
    "2007-09-29 06:49:08+02";-1.92
    "2007-09-29 06:51:08+02";-1.88
    "2007-09-29 06:53:07+02";-1.79
    "2007-09-29 06:55:07+02";-1.73
    "2007-09-29 06:57:08+02";-1.7
    "2007-09-29 06:59:07+02";-1.72
    "2007-09-29 07:01:08+02";-1.74
    "2007-09-29 07:03:08+02";-1.8
    "2007-09-29 07:05:08+02";-1.8
    "2007-09-29 07:07:08+02";-1.84
    "2007-09-29 07:09:08+02";-1.88
    "2007-09-29 07:11:08+02";-1.89
    "2007-09-29 07:13:08+02";-1.92
    "2007-09-29 07:15:08+02";-1.92
    "2007-09-29 07:17:08+02";-1.96
    "2007-09-29 07:19:07+02";-1.98
    "2007-09-29 07:21:08+02";-2
    "2007-09-29 07:23:07+02";-1.96
    "2007-09-29 07:25:08+02";-1.94
    "2007-09-29 07:27:08+02";-1.92
    "2007-09-29 07:29:07+02";-1.92
    "2007-09-29 07:31:08+02";-1.92
    "2007-09-29 07:33:08+02";-1.92
    "2007-09-29 07:35:08+02";-1.94
    "2007-09-29 07:37:08+02";-1.9
    "2007-09-29 07:39:08+02";-1.92
    "2007-09-29 07:41:08+02";-1.9
    "2007-09-29 07:43:07+02";-1.9
    "2007-09-29 07:45:08+02";-1.88
    "2007-09-29 07:47:08+02";-1.85
    "2007-09-29 07:49:08+02";-1.86
    "2007-09-29 07:51:07+02";-1.87
    "2007-09-29 07:53:08+02";-1.72
    "2007-09-29 07:55:08+02";-1.55
    "2007-09-29 07:57:08+02";-1.52
    "2007-09-29 07:59:08+02";-1.53
    "2007-09-29 08:01:08+02";-1.54
    "2007-09-29 08:03:08+02";-1.6
    "2007-09-29 08:05:08+02";-1.77
    "2007-09-29 08:07:08+02";-1.8
    "2007-09-29 08:09:08+02";-1.8
    "2007-09-29 08:11:08+02";-1.8
    "2007-09-29 08:13:08+02";-1.96
    "2007-09-29 08:15:09+02";-1.88
    "2007-09-29 08:17:08+02";-1.44
    "2007-09-29 08:19:08+02";-1.34
    "2007-09-29 08:21:08+02";-1.22
    "2007-09-29 08:23:08+02";-1.34
    "2007-09-29 08:25:09+02";-1.24
    "2007-09-29 08:27:09+02";-0.66
    "2007-09-29 08:29:09+02";-0.98
    "2007-09-29 08:31:09+02";-1.1
    "2007-09-29 08:33:08+02";0.1
    "2007-09-29 08:35:09+02";0.27
    "2007-09-29 08:37:09+02";-0.14
    "2007-09-29 08:39:08+02";-0.52
    "2007-09-29 08:41:08+02";-1
    "2007-09-29 08:43:08+02";-0.58
    "2007-09-29 08:45:08+02";-0.7
    "2007-09-29 08:47:08+02";-0.6
    "2007-09-29 08:49:08+02";-0.87
    "2007-09-29 08:51:08+02";-0.44
    "2007-09-29 08:53:08+02";-0.69
    "2007-09-29 08:55:08+02";-0.14
    "2007-09-29 08:57:08+02";0.12
    "2007-09-29 08:59:08+02";-0.37
    "2007-09-29 09:01:08+02";0.32
    "2007-09-29 09:03:07+02";0.04
    "2007-09-29 09:05:07+02";0.3
    "2007-09-29 09:07:07+02";0.32
    "2007-09-29 09:09:07+02";-0.2
    "2007-09-29 09:11:07+02";-0.07
    "2007-09-29 09:13:07+02";0.11
    "2007-09-29 09:15:07+02";0.34
    "2007-09-29 09:17:07+02";0.58
    "2007-09-29 09:19:07+02";0.46
    "2007-09-29 09:21:07+02";-0.27
    "2007-09-29 09:23:07+02";-0.57
    "2007-09-29 09:25:07+02";-0.2
    "2007-09-29 09:27:07+02";0
    "2007-09-29 09:29:07+02";-0.04
    "2007-09-29 09:31:07+02";-0.77
    "2007-09-29 09:33:07+02";-0.3
    "2007-09-29 09:35:07+02";0.34
    "2007-09-29 09:37:07+02";0.1
    "2007-09-29 09:39:07+02";0.05
    "2007-09-29 09:41:07+02";0.18
    "2007-09-29 09:43:07+02";1.2
    "2007-09-29 09:45:07+02";1.84
    "2007-09-29 09:47:07+02";0.93
    "2007-09-29 09:49:07+02";0.58
    "2007-09-29 09:51:07+02";-0.22
    "2007-09-29 09:53:07+02";0.09
    "2007-09-29 09:55:07+02";0.28
    "2007-09-29 09:57:07+02";1.4
    "2007-09-29 09:59:07+02";1.38
    "2007-09-29 10:01:07+02";2
    "2007-09-29 10:03:07+02";2.16
    "2007-09-29 10:05:07+02";2.48
    "2007-09-29 10:07:07+02";2.8
    "2007-09-29 10:09:07+02";1.66
    "2007-09-29 10:11:07+02";1.56
    "2007-09-29 10:13:07+02";1.49
    "2007-09-29 10:15:07+02";0.86
    "2007-09-29 10:17:07+02";1.37
    "2007-09-29 10:19:07+02";1.16
    "2007-09-29 10:21:07+02";1.16
    "2007-09-29 10:23:07+02";1.6
    "2007-09-29 10:25:07+02";0.84
    "2007-09-29 10:27:07+02";2.14
    "2007-09-29 10:29:07+02";2.25
    "2007-09-29 10:31:07+02";2.25
    "2007-09-29 10:33:07+02";2.12
    "2007-09-29 10:35:07+02";1.68
    "2007-09-29 10:37:07+02";2.14
    "2007-09-29 10:39:07+02";1.1
    "2007-09-29 10:41:07+02";1.23
    "2007-09-29 10:43:07+02";1.4
    "2007-09-29 10:45:07+02";1.78
    "2007-09-29 10:47:07+02";1.36
    "2007-09-29 10:49:07+02";2.26
    "2007-09-29 10:51:07+02";1.8
    "2007-09-29 10:53:07+02";2.08
    "2007-09-29 10:55:07+02";1.96
    "2007-09-29 10:57:07+02";2.46
    "2007-09-29 10:59:07+02";2.69
    "2007-09-29 11:01:07+02";2.24
    "2007-09-29 11:03:07+02";1.59
    "2007-09-29 11:05:07+02";1.74
    "2007-09-29 11:07:07+02";1.38
    "2007-09-29 11:09:07+02";1.97
    "2007-09-29 11:11:07+02";2.06
    "2007-09-29 11:13:07+02";1.64
    "2007-09-29 11:15:07+02";2.22
    "2007-09-29 11:17:07+02";3.07
    "2007-09-29 11:19:07+02";1.98
    "2007-09-29 11:21:07+02";2.88
    "2007-09-29 11:23:07+02";2.9
    "2007-09-29 11:25:07+02";1.62
    "2007-09-29 11:27:07+02";1.79
    "2007-09-29 11:29:07+02";2.7
    "2007-09-29 11:31:07+02";1.96
    "2007-09-29 11:33:07+02";2.9
    "2007-09-29 11:35:07+02";2.76
    "2007-09-29 11:37:07+02";2.08
    "2007-09-29 11:39:07+02";2.88
    "2007-09-29 11:41:07+02";2.55
    "2007-09-29 11:43:07+02";2.49
    "2007-09-29 11:45:07+02";2.52
    "2007-09-29 11:47:07+02";2.68
    "2007-09-29 11:49:07+02";3.1
    "2007-09-29 11:51:07+02";3.72
    "2007-09-29 11:53:07+02";2.94
    "2007-09-29 11:55:07+02";3.86
    "2007-09-29 11:57:07+02";3.76
    "2007-09-29 11:59:07+02";2.8
    "2007-09-29 12:01:07+02";2.28
    "2007-09-29 12:03:07+02";2.8
    "2007-09-29 12:05:07+02";3.1
    "2007-09-29 12:07:07+02";2.63
    "2007-09-29 12:09:07+02";2.76
    "2007-09-29 12:11:07+02";4.02
    "2007-09-29 12:13:07+02";3.47
    "2007-09-29 12:15:07+02";3.2
    "2007-09-29 12:17:07+02";2.65
    "2007-09-29 12:19:07+02";4.11
    "2007-09-29 12:21:07+02";2.66
    "2007-09-29 12:23:07+02";4.34
    "2007-09-29 12:25:07+02";4.1
    "2007-09-29 12:27:07+02";4.17
    "2007-09-29 12:29:07+02";3.16
    "2007-09-29 12:31:07+02";3.98
    "2007-09-29 12:33:07+02";3.72
    "2007-09-29 12:35:07+02";3.66
    "2007-09-29 12:37:07+02";3.26
    "2007-09-29 12:39:07+02";4.5
    "2007-09-29 12:41:07+02";3.94
    "2007-09-29 12:43:07+02";4.11
    "2007-09-29 12:45:07+02";3.89
    "2007-09-29 12:47:06+02";3.22
    "2007-09-29 12:49:06+02";4.26
    "2007-09-29 12:51:06+02";4.98
    "2007-09-29 12:53:06+02";4.46
    "2007-09-29 12:55:06+02";4.86
    "2007-09-29 12:57:07+02";3.91
    "2007-09-29 12:59:07+02";3.56
    "2007-09-29 13:01:07+02";5.27
    "2007-09-29 13:03:07+02";4.12
    "2007-09-29 13:05:07+02";5.07
    "2007-09-29 13:07:06+02";4.16
    "2007-09-29 13:09:06+02";4.56
    "2007-09-29 13:11:06+02";4.24
    "2007-09-29 13:13:06+02";4.34
    "2007-09-29 13:15:06+02";4.63
    "2007-09-29 13:17:06+02";4.68
    "2007-09-29 13:19:06+02";3.71
    "2007-09-29 13:21:06+02";3.79
    "2007-09-29 13:23:06+02";4.61
    "2007-09-29 13:25:06+02";4.95
    "2007-09-29 13:27:06+02";4.66
    "2007-09-29 13:29:06+02";4.32
    "2007-09-29 13:31:06+02";3.98
    "2007-09-29 13:33:06+02";5.43
    "2007-09-29 13:35:06+02";4.38
    "2007-09-29 13:37:06+02";4.39
    "2007-09-29 13:39:06+02";4.7
    "2007-09-29 13:41:06+02";4.34
    "2007-09-29 13:43:06+02";5.56
    "2007-09-29 13:45:06+02";4.61
    "2007-09-29 13:47:06+02";4.58
    "2007-09-29 13:49:06+02";4.81
    "2007-09-29 13:51:06+02";5.04
    "2007-09-29 13:53:06+02";5.74
    "2007-09-29 13:55:06+02";4.92
    "2007-09-29 13:57:06+02";4.65
    "2007-09-29 13:59:06+02";5.08
    "2007-09-29 14:01:06+02";4.9
    "2007-09-29 14:03:06+02";4.34
    "2007-09-29 14:05:06+02";5.42
    "2007-09-29 14:07:06+02";5.58
    "2007-09-29 14:09:06+02";4.98
    "2007-09-29 14:11:06+02";4.91
    "2007-09-29 14:13:06+02";5.44
    "2007-09-29 14:15:06+02";4.62
    "2007-09-29 14:17:06+02";5.36
    "2007-09-29 14:19:06+02";4.56
    "2007-09-29 14:21:06+02";4.77
    "2007-09-29 14:23:06+02";4.88
    "2007-09-29 14:25:06+02";4.29
    "2007-09-29 14:27:06+02";4.43
    "2007-09-29 14:29:06+02";4.78
    "2007-09-29 14:31:06+02";5.06
    "2007-09-29 14:33:06+02";4.83
    "2007-09-29 14:35:06+02";4.44
    "2007-09-29 14:37:06+02";5.48
    "2007-09-29 14:39:06+02";4.9
    "2007-09-29 14:41:06+02";4.42
    "2007-09-29 14:43:06+02";4.82
    "2007-09-29 14:45:06+02";4.9
    "2007-09-29 14:47:06+02";4.76
    "2007-09-29 14:49:06+02";5.48
    "2007-09-29 14:51:06+02";5.48
    "2007-09-29 14:53:06+02";5.46
    "2007-09-29 14:55:06+02";5.54
    "2007-09-29 14:57:06+02";5.53
    "2007-09-29 14:59:06+02";5.5
    "2007-09-29 15:01:06+02";5.33
    "2007-09-29 15:03:06+02";6.18
    "2007-09-29 15:05:06+02";4.91
    "2007-09-29 15:07:06+02";5.08
    "2007-09-29 15:09:06+02";4.71
    "2007-09-29 15:11:06+02";4.49
    "2007-09-29 15:13:06+02";5.47
    "2007-09-29 15:15:06+02";4.58
    "2007-09-29 15:17:06+02";4.75
    "2007-09-29 15:19:06+02";5.46
    "2007-09-29 15:21:06+02";5.39
    "2007-09-29 15:23:06+02";5.59
    "2007-09-29 15:25:06+02";5.76
    "2007-09-29 15:27:06+02";5.08
    "2007-09-29 15:29:06+02";5.96
    "2007-09-29 15:31:06+02";4.9
    "2007-09-29 15:33:06+02";5.36
    "2007-09-29 15:35:06+02";5.08
    "2007-09-29 15:37:06+02";5.93
    "2007-09-29 15:39:06+02";5.34
    "2007-09-29 15:41:06+02";5.24
    "2007-09-29 15:43:06+02";5.78
    "2007-09-29 15:45:06+02";6.58
    "2007-09-29 15:47:06+02";6.09
    "2007-09-29 15:49:06+02";5.4
    "2007-09-29 15:51:06+02";6.18
    "2007-09-29 15:53:06+02";5.79
    "2007-09-29 15:55:06+02";5.36
    "2007-09-29 15:57:06+02";5.8
    "2007-09-29 15:59:07+02";6.06
    "2007-09-29 16:01:06+02";5.7
    "2007-09-29 16:03:07+02";5.58
    "2007-09-29 16:05:07+02";6.5
    "2007-09-29 16:07:07+02";5.83
    "2007-09-29 16:09:07+02";5.54
    "2007-09-29 16:11:06+02";5.8
    "2007-09-29 16:13:06+02";6.03
    "2007-09-29 16:15:06+02";5.54
    "2007-09-29 16:17:07+02";5.56
    "2007-09-29 16:19:07+02";6.04
    "2007-09-29 16:21:07+02";5.74
    "2007-09-29 16:23:06+02";5.4
    "2007-09-29 16:25:07+02";6.39
    "2007-09-29 16:27:07+02";6.64
    "2007-09-29 16:29:07+02";6.3
    "2007-09-29 16:31:07+02";5.86
    "2007-09-29 16:33:07+02";5.62
    "2007-09-29 16:35:07+02";6.29
    "2007-09-29 16:37:07+02";5.24
    "2007-09-29 16:39:07+02";5.92
    "2007-09-29 16:41:07+02";5.68
    "2007-09-29 16:43:07+02";6.2
    "2007-09-29 16:45:07+02";6.53
    "2007-09-29 16:47:06+02";5.44
    "2007-09-29 16:49:06+02";5.58
    "2007-09-29 16:51:07+02";4.68
    "2007-09-29 16:53:07+02";6.36
    "2007-09-29 16:55:07+02";5.46
    "2007-09-29 16:57:06+02";5.4
    "2007-09-29 16:59:06+02";5.84
    "2007-09-29 17:01:06+02";6.12
    "2007-09-29 17:03:06+02";6.28
    "2007-09-29 17:05:06+02";5.48
    "2007-09-29 17:07:06+02";4.67
    "2007-09-29 17:09:06+02";4.69
    "2007-09-29 17:11:06+02";4.36
    "2007-09-29 17:13:06+02";4.6
    "2007-09-29 17:15:06+02";4.86
    "2007-09-29 17:17:06+02";4.52
    "2007-09-29 17:19:06+02";4.04
    "2007-09-29 17:21:06+02";3.98
    "2007-09-29 17:23:06+02";3.8
    "2007-09-29 17:25:06+02";3.76
    "2007-09-29 17:27:06+02";3.44
    "2007-09-29 17:29:06+02";3.44
    "2007-09-29 17:31:06+02";3.45
    "2007-09-29 17:33:06+02";3.64
    "2007-09-29 17:35:06+02";3.62
    "2007-09-29 17:37:06+02";3.43
    "2007-09-29 17:39:06+02";3.52
    "2007-09-29 17:41:06+02";3.31
    "2007-09-29 17:43:06+02";3.13
    "2007-09-29 17:45:06+02";3.21
    "2007-09-29 17:47:06+02";3.26
    "2007-09-29 17:49:06+02";3.17
    "2007-09-29 17:51:06+02";3.05
    "2007-09-29 17:53:06+02";2.86
    "2007-09-29 17:55:06+02";2.84
    "2007-09-29 17:57:06+02";2.79
    "2007-09-29 17:59:06+02";2.6
    "2007-09-29 18:01:06+02";2.54
    "2007-09-29 18:03:06+02";2.51
    "2007-09-29 18:05:06+02";2.54
    "2007-09-29 18:07:06+02";2.6
    "2007-09-29 18:09:06+02";2.5
    "2007-09-29 18:11:06+02";2.25
    "2007-09-29 18:13:06+02";2.26
    "2007-09-29 18:15:06+02";2.28
    "2007-09-29 18:17:06+02";1.95
    "2007-09-29 18:19:06+02";1.9
    "2007-09-29 18:21:06+02";1.8
    "2007-09-29 18:23:06+02";1.78
    "2007-09-29 18:25:06+02";1.56
    "2007-09-29 18:27:06+02";1.59
    "2007-09-29 18:29:06+02";1.55
    "2007-09-29 18:31:06+02";1.52
    "2007-09-29 18:33:06+02";1.48
    "2007-09-29 18:35:06+02";1.5
    "2007-09-29 18:37:06+02";1.44
    "2007-09-29 18:39:06+02";1.36
    "2007-09-29 18:41:06+02";1.34
    "2007-09-29 18:43:06+02";1.26
    "2007-09-29 18:45:06+02";1.2
    "2007-09-29 18:47:06+02";1.28
    "2007-09-29 18:49:06+02";1.34
    "2007-09-29 18:51:06+02";1.29
    "2007-09-29 18:53:06+02";1.36
    "2007-09-29 18:55:06+02";1.44
    "2007-09-29 18:57:06+02";1.43
    "2007-09-29 18:59:06+02";1.73
    "2007-09-29 19:01:06+02";1.94
    "2007-09-29 19:03:06+02";1.86
    "2007-09-29 19:05:06+02";1.88
    "2007-09-29 19:07:06+02";1.78
    "2007-09-29 19:09:06+02";1.52
    "2007-09-29 19:11:06+02";1.36
    "2007-09-29 19:13:06+02";1.28
    "2007-09-29 19:15:06+02";1.32
    "2007-09-29 19:17:06+02";1.24
    "2007-09-29 19:19:06+02";1.17
    "2007-09-29 19:21:06+02";1.16
    "2007-09-29 19:23:06+02";1.22
    "2007-09-29 19:25:06+02";1.18
    "2007-09-29 19:27:06+02";1.13
    "2007-09-29 19:29:06+02";1.06
    "2007-09-29 19:31:06+02";1.12
    "2007-09-29 19:33:06+02";1.16
    "2007-09-29 19:35:06+02";1.04
    "2007-09-29 19:37:06+02";0.98
    "2007-09-29 19:39:06+02";0.85
    "2007-09-29 19:41:06+02";0.85
    "2007-09-29 19:43:06+02";1.04
    "2007-09-29 19:45:06+02";0.97
    "2007-09-29 19:47:06+02";1.08
    "2007-09-29 19:49:06+02";1.2
    "2007-09-29 19:51:06+02";0.99
    "2007-09-29 19:53:06+02";0.86
    "2007-09-29 19:55:06+02";0.88
    "2007-09-29 19:57:06+02";0.86
    "2007-09-29 19:59:06+02";0.82
    "2007-09-29 20:01:06+02";0.89
    "2007-09-29 20:03:06+02";0.86
    "2007-09-29 20:05:06+02";0.94
    "2007-09-29 20:07:06+02";0.96
    "2007-09-29 20:09:06+02";1
    "2007-09-29 20:11:06+02";1.11
    "2007-09-29 20:13:06+02";1.06
    "2007-09-29 20:15:06+02";0.94
    "2007-09-29 20:17:06+02";1.18
    "2007-09-29 20:19:06+02";1.2
    "2007-09-29 20:21:06+02";1.05
    "2007-09-29 20:23:06+02";0.94
    "2007-09-29 20:25:06+02";1.02
    "2007-09-29 20:27:06+02";0.96
    "2007-09-29 20:29:06+02";0.85
    "2007-09-29 20:31:06+02";0.79
    "2007-09-29 20:33:06+02";0.92
    "2007-09-29 20:35:06+02";0.7
    "2007-09-29 20:37:06+02";0.78
    "2007-09-29 20:39:06+02";0.64
    "2007-09-29 20:41:06+02";0.54
    "2007-09-29 20:43:06+02";0.68
    "2007-09-29 20:45:06+02";0.58
    "2007-09-29 20:47:06+02";0.48
    "2007-09-29 20:49:06+02";0.46
    "2007-09-29 20:51:06+02";0.4
    "2007-09-29 20:53:06+02";0.5
    "2007-09-29 20:55:06+02";0.4
    "2007-09-29 20:57:06+02";0.49
    "2007-09-29 20:59:06+02";0.38
    "2007-09-29 21:01:06+02";0.32
    "2007-09-29 21:03:06+02";0.31
    "2007-09-29 21:05:06+02";0.22
    "2007-09-29 21:07:05+02";0.2
    "2007-09-29 21:09:05+02";0.17
    "2007-09-29 21:11:05+02";0.12
    "2007-09-29 21:13:05+02";0.22
    "2007-09-29 21:15:05+02";0.15
    "2007-09-29 21:17:05+02";0.18
    "2007-09-29 21:19:05+02";0.09
    "2007-09-29 21:21:05+02";-0.01
    "2007-09-29 21:23:05+02";-0.05
    "2007-09-29 21:25:05+02";0
    "2007-09-29 21:27:05+02";0.12
    "2007-09-29 21:29:05+02";0.09
    "2007-09-29 21:31:05+02";0.18
    "2007-09-29 21:33:05+02";0.04
    "2007-09-29 21:35:05+02";0.02
    "2007-09-29 21:37:05+02";-0.04
    "2007-09-29 21:39:05+02";-0.06
    "2007-09-29 21:41:05+02";0.06
    "2007-09-29 21:43:05+02";0.04
    "2007-09-29 21:45:05+02";0.04
    "2007-09-29 21:47:05+02";0.15
    "2007-09-29 21:49:05+02";0.22
    "2007-09-29 21:51:05+02";0.24
    "2007-09-29 21:53:05+02";0.22
    "2007-09-29 21:55:05+02";0.1
    "2007-09-29 21:57:05+02";0.11
    "2007-09-29 21:59:05+02";0.06
    "2007-09-29 22:01:05+02";0.09
    "2007-09-29 22:03:05+02";0.2
    "2007-09-29 22:05:05+02";0.11
    "2007-09-29 22:07:05+02";0.08
    "2007-09-29 22:09:05+02";0.08
    "2007-09-29 22:11:05+02";0.07
    "2007-09-29 22:13:05+02";0.06
    "2007-09-29 22:15:05+02";0.11
    "2007-09-29 22:17:05+02";0.12
    "2007-09-29 22:19:05+02";0.1
    "2007-09-29 22:21:05+02";0.19
    "2007-09-29 22:23:05+02";0.24
    "2007-09-29 22:25:05+02";0.24
    "2007-09-29 22:27:05+02";0.24
    "2007-09-29 22:29:05+02";0.22
    "2007-09-29 22:31:05+02";0.24
    "2007-09-29 22:33:05+02";0.28
    "2007-09-29 22:35:05+02";0.28
    "2007-09-29 22:37:05+02";0.26
    "2007-09-29 22:39:05+02";0.28
    "2007-09-29 22:41:05+02";0.28
    "2007-09-29 22:43:05+02";0.26
    "2007-09-29 22:45:05+02";0.27
    "2007-09-29 22:47:05+02";0.31
    "2007-09-29 22:49:05+02";0.29
    "2007-09-29 22:51:05+02";0.27
    "2007-09-29 22:53:05+02";0.3
    "2007-09-29 22:55:05+02";0.26
    "2007-09-29 22:57:05+02";0.26
    "2007-09-29 22:59:05+02";0.3
    "2007-09-29 23:01:05+02";0.3
    "2007-09-29 23:03:05+02";0.28
    "2007-09-29 23:05:05+02";0.22
    "2007-09-29 23:07:05+02";0.2
    "2007-09-29 23:09:05+02";0.16
    "2007-09-29 23:11:05+02";0.2
    "2007-09-29 23:13:05+02";0.2
    "2007-09-29 23:15:05+02";0.12
    "2007-09-29 23:17:05+02";0.08
    "2007-09-29 23:19:05+02";0.1
    "2007-09-29 23:21:05+02";0.14
    "2007-09-29 23:23:05+02";0.16
    "2007-09-29 23:25:05+02";0.27
    "2007-09-29 23:27:05+02";0.32
    "2007-09-29 23:29:05+02";0.34
    "2007-09-29 23:31:05+02";0.4
    "2007-09-29 23:33:05+02";0.37
    "2007-09-29 23:35:05+02";0.35
    "2007-09-29 23:37:05+02";0.32
    "2007-09-29 23:39:05+02";0.23
    "2007-09-29 23:41:05+02";0.26
    "2007-09-29 23:43:05+02";0.35
    "2007-09-29 23:45:05+02";0.31
    "2007-09-29 23:47:05+02";0.32
    "2007-09-29 23:49:05+02";0.3
    "2007-09-29 23:51:05+02";0.36
    "2007-09-29 23:53:05+02";0.33
    "2007-09-29 23:55:05+02";0.27
    "2007-09-29 23:57:05+02";0.27
    "2007-09-29 23:59:05+02";0.2 
```

预期成绩：

16 点钟的小时平均值为：5.7=5.36+5.80+6.06+5.70+5.58

```
2007-09-29 16:00  5.7 
```

我已经尝试过这段代码，但它不能正常工作。

```
select date_trunc('hour', newest_time) as average_time,  
       (oldest_temp + middle_temp + newest_temp) / 3 as average_temp 
from (  
  select
     date_trunc('hour', dt) as average_time,
     lag(dt, 2) over w as oldest_time,
     lag(dt, 1) over w as middle_time,
     dt as newest_time,
     lag(ambtemp, 2) over w as oldest_temp,
     lag(ambtemp, 1) over w as middle_temp,
     ambtemp as newest_temp   
  from n32   
    window w as (order by dt) 
) as s 
where oldest_time = newest_time - '4 minutes'::interval 
  and middle_time = newest_time - '2 minutes'::interval 
  and extract(minute from newest_time) in (2, 3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:56:54.087

这只是[@Catcall 已经发布](https://stackoverflow.com/a/14435394/939860)的内容的一个更简单的版本（正确）：

```
WITH h AS (
   SELECT g - interval '5m' AS lo
         ,g + interval '5m' AS hi
   FROM   generate_series('2007-09-29 15:00'::timestamp  -- abs. dt range ..
                        , '2007-09-29 18:00'::timestamp  -- from / to
                        , interval '1h') AS g
   )
SELECT lo, hi
     , to_timestamp(avg(extract(epoch FROM s.dt))) AS avg_dt
     , round(avg(s.ambtemp)::numeric, 4) AS avg_ambtemp
FROM   h
LEFT   JOIN s_25 s ON s.dt BETWEEN lo AND hi
GROUP  BY 1,2
ORDER  BY 1,2 
```

[-> sqlfiddle](http://www.sqlfiddle.com/#!12/80185/3)

如果您不想列出找不到匹配行的时间，请将 替换`LEFT JOIN`为`JOIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:08:47.823

好吧，首先，您有两组完全不同的要求。这两件事不是一回事。

*   每小时前 5 分钟和后 5 分钟。
*   每小时观察 2 次，之后观察 2 次。

第二个依赖于您的采样*永远不会*在两分钟的采样间隔内。我不仅敢打赌有一天你的采样*会*在两分钟的间隔内失败，我敢打赌它已经做到了。采样可能由于多种原因而失败，但 5 分钟的时间间隔*永远*不会是 5 分钟的时间间隔。使用第一个，而不是第二个。

此查询每小时生成一个存储桶，并对每小时 5 分钟内的所有读数进行平均。它包括两个端点。也就是说，对于 16:00，它包括 15:55 和 16:05。

```
with buckets as (
  select '00:00'::time + (n || ' hours')::interval bucket
  from generate_series(0,23) n
)
select b.bucket, avg(t.observation) obs_avg
from buckets b
inner join test t 
        on test_ts::time between (bucket - interval '5' minute) 
                             and (bucket + interval '5' minute)
group by bucket;

bucket    obs_avg
--
16:00:00  5.7
17:00:00  5.82 
```

如果你的值不是正态分布的——而且它们*看起来*不是正态分布的——你应该使用中位数而不是平均值。当您的值不是正态分布时，中位数是集中趋势的更好指示。您需要为此[创建一个函数](http://wiki.postgresql.org/wiki/Aggregate_Median)；PostgreSQL 没有原生的中值函数。

* * *

> 我的表名称是 s_25，时间日期表是 dt，变量是 ambtemp

基于那晚评论，并假设您的意思是您的时间戳列是 dt，这是我最好的猜测。

```
with buckets as (
  select '00:00'::time + (n || ' hours')::interval bucket
  from generate_series(0,23) n
)
select b.bucket, avg(t.ambtemp) obs_avg
from buckets b
inner join s_25 t 
        on dt::time between (bucket - interval '5' minute) 
                        and (bucket + interval '5' minute)
group by bucket 
```

如果您要在多个日期运行此查询，仅按时加入是不够的。改用这个。CTE“even_hours”和“obs_dates”返回在“bucket_midpoints”中交叉连接的片段，以返回您感兴趣的日期的所有小时。“obs_dates”中的 WHERE 子句可防止您生成太多行。

```
with even_hours as (
  select '00:00'::time + (n || ' hour')::interval as obs_time
  from generate_series(0, 23) n
), 
obs_dates as (
  select distinct (dt)::date obs_date
  from s_25
  -- *This* WHERE clause keeps you from generating too many rows
  -- for the join below. You *could* select the min and max dates
  -- from your table, but you'd probably get too many rows that way.
  where dt between '2007-09-01' and '2007-09-30'
), 
bucket_midpoints as (
  select (obs_dates.obs_date || ' ' || even_hours.obs_time)::timestamp as bucket_midpoint
  from obs_dates, even_hours
)
select (bucket_midpoint - interval '5' minute) bucket_start,
       (bucket_midpoint + interval '5' minute) bucket_end,
       avg(s_25.ambtemp)
from bucket_midpoints
left join s_25
       on s_25.dt between (bucket_midpoint - interval '5' minute)
                      and (bucket_midpoint + interval '5' minute)
group by bucket_start, bucket_end
order by bucket_start, bucket_end 
```

# submit - 在表单中保留原始 InfoPath 提交日期

> ID：14431687
> 
> 赞同：2
> 
> 时间：2013-01-21T02:25:29.790
> 
> 标签：submit, infopath

表格提交到电子邮件。我想将提交日期作为变量获取。设置一个变量`now()`是不够的，因为在提交后再次打开表单时变量会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:21:04.027

一些可能的解决方案：

1.  > 只需在表单中创建一个字段，将其默认值设置为 `now()`函数，然后取消选中“重新计算公式结果时更新此值”。你应该准备好了。

    通过[http://www.infopathdev.com/forums/p/12569/44295.aspx#44295](http://www.infopathdev.com/forums/p/12569/44295.aspx#44295)

2.  创建一个变量`submissionDate`来存储提交日期。当用户提交表单时，设置`submissionDate`为当前日期。如果变量尚未包含值，则添加检查以仅设置日期。如果不以这种确切的方式实现，这个想法可以以某种形式使用。我不明白为什么它不起作用。

3.  此处建议的与 #2 类似的解决方案：[我需要一个不会更改的提交日期](http://www.infopathdev.com/forums/p/7189/26271.aspx#26271)。

    > 您只需要在表单中添加一个保存原始文件名的字段。
    > 
    > 有一个打开规则，如果文件名为空，则设置为您的 concat（添加到表，ID）。然后在您的 SP 提交中使用此字段作为文件名。
    > 
    > 在随后的打开中，因为它有一个值，所以文件名不会改变。
    > 
    > 在您现有的表单上，您需要手动设置它，因为您想保留原始文件名，但在任何新表单上都可以解决您的问题。
    > 
    > 另一种选择是查询文档库，如果您识别出用户和他们最近打开的文件，则可能会查找您的用户名。

4.  这里还有一些建议：[Submitting Infopath forms to a Sharepoint Library - how can I generate a unique name for each record](http://go4answers.webhost4life.com/Example/submitting-infopath-forms-sharepoint-136783.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T13:24:01.947

我遇到过同样的问题。使用 now() 函数根据日期/时间创建了一个唯一的表单 ID 字段。问题是 ID 更改了，每次更新表单时都会出现问题。

我正在使用 InfoPath 2013。要解决此问题：

1.  选择 ID 的表单域。
2.  使用功能区，单击控件属性。
3.  选择默认值或字段属性，这将打开字段或组属性窗口。
4.  取消选中“重新计算公式时刷新值。
5.  单击确定并重新发布表单。测试，它的工作原理。

# sql-server - 从 Azure 门户创建期间命名 Azure SQL Server

> ID：14431689
> 
> 赞同：10
> 
> 时间：2013-01-21T02:25:47.950
> 
> 标签：sql-server, powershell, azure

通过 Azure 门户创建 SQL Server 时，它会生成一个随机服务器名称，例如 abcsomejunkcharactersxyz.database.windows.net。虽然我意识到这是通过默默无闻的某种程度的安全性......有没有办法控制 Azure 中 SQL Server 的名称？

最理想的情况是，这可以在创建时或通过重命名进行控制，并且能够通过 PowerShell 以自动方式完成。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-16T12:30:45.827

在[新的 Azure 门户](https://portal.azure.com/)中，可以设置您自己的 SQL Server 实例名称。

![在此处输入图像描述](../Images/d2515951e186b5fe13629bfb1da4b5f8.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T03:02:52.183

你不能，命名不是为了安全，而是为了确保唯一性——如果两个用户想要相同的名字怎么办？哪个用户应该得到它？

# java - 从 Java 程序运行 SQL 文件脚本

> ID：14431692
> 
> 赞同：4
> 
> 时间：2013-01-21T02:26:08.883
> 
> 标签：java, mysql, sql, jdbc

我有一组转换原始数据集的 SQL 文件。目前，我打开每个文件并执行它。如何在 Java 程序中执行每个文件？目标是使这个过程更加自动化。

我想做类似的事情`SqlScript.execute("myScript.sql");`

**注意**这些 SQL 脚本作用于一个数据库。我想我必须传递某种连接字符串。我正在使用 MySQL。

1.  我需要哪些对象、库、包等...在 Java 中执行此操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T03:58:57.550

Ibatis提供了一个[ScriptRunner](http://ibatis.apache.org/docs/java/dev/com/ibatis/common/jdbc/ScriptRunner.html)可以帮助你。您可以参考的简单代码片段：

```
Connection conn=getConnection();//some method to get a Connection
ScriptRunner runner=new ScriptRunner(conn, false, false);
InputStreamReader reader = new InputStreamReader(new FileInputStream("foo.sql"));
runner.runScript(reader);
reader.close();
conn.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-12T02:28:18.473

使用 iBatics 会更容易。

[http://repo1.maven.org/maven2/org/mybatis/mybatis/3.2.3/mybatis-3.2.3.jar](http://repo1.maven.org/maven2/org/mybatis/mybatis/3.2.3/mybatis-3.2.3.jar)

此外，您需要[MySQL java 驱动程序：**com.mysql.jdbc.Driver**](http://dev.mysql.com/downloads/connector/j/)，可以在 mysql 站点中找到。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.sql.DriverManager;

import org.apache.ibatis.jdbc.ScriptRunner;

public class Main {
    public static void main(String[] args) {

        String script = "scriptname.sql";
        try {
            Class.forName("com.mysql.jdbc.Driver");
            new ScriptRunner(DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/mysql", "root", "root`"))
                    .runScript(new BufferedReader(new FileReader(script)));
        } catch (Exception e) {
            System.err.println(e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T03:01:26.447

您可以尝试以下方法：[http ://www.tonyspencer.com/2005/01/20/execute-mysql-script-from-java/](http://www.tonyspencer.com/2005/01/20/execute-mysql-script-from-java/)

```
public static String executeScript (String dbname, String dbuser,
        String dbpassword, String scriptpath, boolean verbose) {
    String output = null;
    try {
        String[] cmd = new String[]{"mysql",
            dbname,
            "--user=" + dbuser,
            "--password=" + dbpassword,
            "-e",
            "\"source " + scriptpath + "\""
            };
        System.err.println(cmd[0] + " " + cmd[1] + " " +
        cmd[2] + " " + cmd[3] + " " +
        cmd[4] + " " + cmd[5]);
        Process proc = Runtime.getRuntime().exec(cmd);
        if (verbose) {
            InputStream inputstream = proc.getInputStream();
            InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
            BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

            // read the output
            String line;
            while ((line = bufferedreader.readLine()) != null) {
                System.out.println(line);
            }

            // check for failure
            try {
                if (proc.waitFor() != 0) {
                    System.err.println("exit value = " +
                    proc.exitValue());
                }
            }
            catch (InterruptedException e) {
                System.err.println(e);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return output;
} 
```

# android - 如何使用 Android NDK 将整数颜色的像素数组绑定到纹理？

> ID：14431693
> 
> 赞同：1
> 
> 时间：2013-01-21T02:26:22.820
> 
> 标签：android, c, integer, buffer, nio

我正在尝试将我在 Android 上的 Java OpenGL 代码移植到 Native SDK，我需要一个 IntBuffer 实现。

基本上，我在 Java 中将任意整数 RGBA 像素颜色数组加载到纹理中的操作是：

```
 // pixel array
    pixelIntArray = new int[width * height];

    bb = ByteBuffer.allocateDirect(pixelIntArray.length * 4);
    bb.order(ByteOrder.nativeOrder());

    // native buffer
    pixelBuffer = bb.asIntBuffer();

    // push integer array of pixels into buffer
    pixelBuffer.put(pixelIntArray);
    pixelBuffer.position(0);

    // bind buffer to texture
    gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, width, height, 0,
                GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, pixelBuffer); 
```

在 C 中，以便我可以使用缓冲区将纹理推送到四边形。

目前我只是将它绑定到我在 C 中的 pixelIntArray 并且纹理变形了。

基本上，我需要能够通过类似于 Java 的 NIO 类的缓冲区将整数像素数组中的一系列颜色绑定到纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:53:10.403

我认为这可能是如何解决它：

* * *

## 初始化

* * *

```
 int length = width * height;

    int* pixels = (int*) malloc(sizeof(int) * length);
    unsigned char * buffer = (unsigned char*) malloc(sizeof(char) * length * 4); 
```

* * *

## 复制到缓冲区

* * *

```
 int i, j;

    for (i = 0; i < length; i++) {

        j = 4 * i;

        buffer[j] = (char) (pixels[i] & 0xFF);
        buffer[j + 1] = (char) (pixels[i] >> 8 & 0xFF);
        buffer[j + 2] = (char) (pixels[i] >> 16 & 0xFF);
        buffer[j + 3] = (char) (pixels[i] >> 24 & 0xFF);

    } 
```

* * *

## 资源

* * *

**来自：[http ://www.c-sharpcorner.com/Forums/Thread/32972/](http://www.c-sharpcorner.com/Forums/Thread/32972/)**

# jquery - 带有 jQ uery 的 HTML5 范围滑块偶尔不会达到最大值或最小值

> ID：14431709
> 
> 赞同：2
> 
> 时间：2013-01-21T02:27:37.983
> 
> 标签：jquery, html, input, range

我有一个相当简单的表单，其中包含一个 HTML5 范围元素（呈现为滑块）。代码如下所示：

```
<form name="redform" id="redform" action="/">
    <input id="id"        name="id"        type="hidden" value="<?php echo $row['id']; ?>" />
    <input id="sliderRed" name="sliderRed" type="range"  value="<?php echo $data[5]; ?>" min="0" max="255" />
</form>
<p class="note">Current value: <span id="redValue">0</span></p>
<div style="text-align:center; color:#FF0000" id="redresults"></div> 
```

随之而来的是一些 jQuery，它在滑块移动时执行外部 php 脚本：

```
$(function(){
    var redValue = $('#redValue');
    $('#sliderRed').change(function(){
        redValue.html(this.value);
    }); 
    $('#sliderRed').mouseup(function(){
        $.post('process.php',  $("#redform").serialize(), function(data) {
            $('#redresults').html(data);
            $('#redresults').fadeIn('slow').delay(2000).fadeOut('slow');
        });
    });
    $('#sliderRed').change();
}); 
```

所有这些都有效。我可以移动滑块，实时更新值，释放滑块时运行 PHP 脚本。这就是奇怪的地方。范围滑块的最大值和最小值设置为 0 和 255。但是，有时，当将滑块一直拖动到一端时，它只会达到 1 或 254。似乎没有任何模式到何时有时候是这样的。有时它会走全范围，有时它不能一路走。甚至在按住鼠标并前后拖动鼠标时也是如此。

如果将最大值和最小值分别更改为 256 和 -1，则会观察到类似的行为。有时它会在 256 时达到最大值，有时它会在 255 时达到最大值。在底端，它有时会达到 -1，有时它只能被拖到 0。这对我来说表明它没有与实际数字有关，但有一些奇怪的“一对一”错误。

对此有什么想法吗？我完全被难住了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:51:05.893

您可以考虑[在 jQuery UI 中使用滑块对象](http://jqueryui.com/slider/)和“停止”对象以获得更好的性能。看到[这个线程](https://stackoverflow.com/questions/621147/jquery-ui-slider-cant-slide-to-0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:46:43.560

使用 setTimeout() 将 mouseup 回调的执行延迟 10 毫秒左右。

**更新**：

为了澄清，下面的代码应该可以工作。我以前也遇到过同样的问题，设置一个小的延迟解决了这个问题。（经过进一步思考，我不记得所需延迟的确切持续时间；如果您实现此代码并且问题仍然存在，您可能会增加延迟值。）

```
$('#sliderRed').mouseup(function() {
    setTimeout(function() {
        $.post('process.php',  $("#redform").serialize(), function(data) {
            $('#redresults').html(data);
            $('#redresults').fadeIn('slow').delay(2000).fadeOut('slow');
        });
    }, 10);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:48:52.027

虽然提供的建议很棒（感谢 Jason）。值得解释为什么这个问题实际上会发生。我将此作为错误提交给铬错误跟踪器，认为它可能是铬错误。我猜对了一半。请参阅此处的帖子：[http ://code.google.com/p/chromium/issues/detail?id=171362](http://code.google.com/p/chromium/issues/detail?id=171362)

问题是，如果滑块的长度不是至少 256 像素，那么不可能选择所有值。使用 CSS，您可以将宽度更改为 256px，这消除了我在问题中描述的问题。

```
<input id="sliderRed" name="sliderRed" stlye="width:256px;" type="range"  value="<?php echo $data[5]; ?>" min="0" max="255" /> 
```

然而，这个限制使得使用 jQuery-UI 成为首选的解决方案，而我最终可能会实现它。

# javascript - 循环未完成

> ID：14431717
> 
> 赞同：0
> 
> 时间：2013-01-21T02:28:40.007
> 
> 标签：javascript, loops, if-statement, after-effects

出于某种原因，尽管我的循环只经过一次`importedChar.numItems =2`

After effects item 从 1 而不是 0 开始，所以我使用`x=1`，这就是我所拥有的

```
for(x=1; x < importedChar.numItems; x++) {
    if (importedChar.item(x) instanceof CompItem) {
        //Add imported Char to Main Comp
        var newObj = null;      
        var newObj = myComp.layers.add(importedChar.item(x))

        //Move Layer under null
        newObj.moveAfter(newNull);

        //Parent to Null
        newObj.parent = newNull;
    }    
} 
```

如果第一个项目是一个组合，它运行良好，但如果它是第二个则离开循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:31:34.863

您需要使用`<=`而不是`<`让它运行两次。

**编辑：**或者，`for(x=0; x < importedChar.numItems; x++) {`然后`x+1`在您需要使用它时使用它，但在您可以避免这种情况的情况下，这`<=`是更可取的。

*当您需要访问索引和*有意义的值（例如打印人性化的错误消息）时，通常会出现您想要替代方案的情况

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T02:31:45.980

`x = 1, importedChar.numItems =2, x < importedChar.numItems true;`

然后`x = 2, importedChar.numItems =2, x < importedChar.numItems false;` 如此循环

我猜这样

# ruby - 匿名类上的 ActiveModel::Validations

> ID：14431723
> 
> 赞同：14
> 
> 时间：2013-01-21T02:29:39.117
> 
> 标签：ruby, activemodel

我正在开发一个类似于 DataMapper 的小型 ODM 项目，并且正在尝试使用该`ActiveModel::Validations`组件。但是，我在编写测试时遇到了一个问题——我正在使用匿名类来构建我的测试模式，但是在运行验证器时，`ActiveModel::Name`该类抛出了一个错误： `Class name cannot be blank. You need to supply a name argument when anonymous class given`

这是一个简单的代码示例来重现：

```
require 'active_model'

book_class = Class.new do
  include ActiveModel::Validations

  validates_presence_of :title

  def title; ""; end # This will fail validation
end

book_class.new.valid? # => throws error 
```

仅当验证器失败时才会引发异常 - 我猜当它尝试构造验证错误消息时会发生问题。所以我的问题是：

*   我做了很多搜索，但找不到任何人试图做类似的事情。这对 ActiveModel 来说是不可能的，还是有我不知道的解决方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T02:57:38.873

ActiveModel 在设置错误消息时尝试获取模型名称（如您在此处看到的）。解决它的最快方法（不给你的匿名类一个名字）是给你的类一个类方法`model_name`，它返回一个`ActiveModel::Name`.

例如

```
require 'active_model'

book_class = Class.new do
  include ActiveModel::Validations
  def self.model_name
    ActiveModel::Name.new(self, nil, "temp")
  end
  validates_presence_of :title

  def title; ""; end # This will fail validation
end

book_class.new.valid? # => no error 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-02T19:39:13.550

`ActiveModel::Name` [在here](https://github.com/rails/rails/blob/8742bc9d5e030b4ac6119d61a163ba72c2e7e380/activemodel/lib/active_model/naming.rb#L148)的初始化函数中引发了错误。

```
module ActiveModel
  class Name
    def initialize(klass, namespace = nil, name = nil)
      @name = name || klass.name

      raise ArgumentError, "Class name cannot be blank. You need to supply a name argument when anonymous class given" if @name.blank?       
      # ...
    end
  end
end 
```

因此，您可以定义一个返回 a的类方法，而不是定义一个`model_name`返回 的类方法。`ActiveModel::Name``name``String`

```
require 'active_model'

book_class = Class.new do
  include ActiveModel::Validations
  validates_presence_of :title

  def self.name
    "Book"
  end

  def title; ""; end # This will fail validation
end

book_class.new.valid? # => false 
```

# ios - 图像在屏幕上水平滑动时循环播放，看起来像是在无限滚动

> ID：14431725
> 
> 赞同：5
> 
> 时间：2013-01-21T02:29:44.853
> 
> 标签：ios, objective-c, uiimageview, uiimage

我想要一个视图控制器，它在背景中循环图像以呈现无限滚动的外观。例如，如果我使用下面的图像，左右边缘完美匹配，将用于提供无限滚动的外观。有谁知道我可能会如何进行设置？我做了一些研究，迷路了。谢谢你们！

![无限滚动图片](../Images/ebc5f5e6c76bc59a7ee1a81c095c140f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T02:52:31.167

我会这样做。 **编辑**而不是将其作为练习留给读者，而是更新以显示如何向任一方向平移...

```
@property (nonatomic, assign) BOOL keepGoing;
@property (nonatomic, assign) BOOL panRight;
@property (nonatomic, strong) UIImageView *imageViewA;
@property (nonatomic, strong) UIImageView *imageViewB;

- (void)getReady {

    // init theImage
    UIImage *theImage = [UIImage imageNamed:@"theImage.png"];

    // get two copies of the image
    self.imageViewA = [[UIImageView alloc] initWithImage:theImage];
    self.imageViewB = [[UIImageView alloc] initWithImage:theImage];

    // place one in view, the other, off to the right (for right to left motion)
    NSInteger direction = (self.panRight)? 1 : -1;
    self.imageViewA.frame = self.view.bounds;
    self.imageViewB.frame = CGRectOffset(self.view.bounds, direction*self.imageViewA.bounds.size.width, 0.0);

    [self.view addSubview:self.imageViewA];
    [self.view addSubview:self.imageViewB];
    self.keepGoing = YES;
}

- (void)go {
    NSInteger direction = (self.panRight)? 1 : -1;
    CGFloat offsetX = -direction*self.imageViewA.bounds.size.width;

    [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^{
        self.imageViewA.frame = CGRectOffset(self.imageViewA.frame, offsetX, 0);
        self.imageViewB.frame = CGRectOffset(self.imageViewB.frame, offsetX, 0);
    } completion:^(BOOL finished) {
        if (self.keepGoing) {
            // now B is where A began, so swap them and reposition B
            UIImageView *temp = self.imageViewA;
            self.imageViewA  = self.imageViewB;
            self.imageViewB = temp;
            self.imageViewB.frame = CGRectOffset(self.view.bounds, direction*self.view.bounds.size.width, 0.0);
            // recursive call, but we don't want to wind up the stack
            [self performSelector:@selector(go) withObject:nil afterDelay:0.0];
        }
    }];
} 
```

为此，请设置 panRight 属性，然后调用`[self getReady];`and `[self go];`。

它将主要异步运行。为了让它停下来，`set self.keepGoing = NO;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:52:58.893

一种简单的方法是将图像设置为屏幕宽度的两倍。将其置于 0,0。根据需要为它左右设置动画。只要原点小于 x 轴上图像宽度一半的负值，它就会到达其右边缘的末端，而一旦原点在 x 轴上高于 0，它就会到达其左边缘的末端。发生这种情况时，您可以重置原点。

# android - Android：如果视图方向发生变化，我的游戏会从头开始

> ID：14431728
> 
> 赞同：0
> 
> 时间：2013-01-21T02:30:07.343
> 
> 标签：android

> **可能重复：**
> [在 android 应用程序中更改方向时出现问题](https://stackoverflow.com/questions/5263346/problem-while-changeing-the-orientation-in-android-app)

我有一个正在开发的纸牌游戏应用程序。当我翻转安卓设备，从横向切换到纵向（或反之）时，我的纸牌游戏从头开始。

每次 android 设备翻转时，它都会调用 create 方法。我假设它正在创造一个新的意图？他们无论如何要阻止这一切吗？如果设备翻转，它可以保持相同的意图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:01:50.997

是的，Android 正在重新创建您的 Activity，让您有机会插入新的布局或您需要的任何特定方向的处理。您可以使用下面的清单条目强制您的活动坚持特定方向。

```
 <activity android:name=".MyActivity"  android:screenOrientation="portrait"       android:configChanges="orientation" ...> 
```

有关这些属性的更多详细信息，请参阅：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

# python - 替换字符串中的空字符串

> ID：14431731
> 
> 赞同：12
> 
> 时间：2013-01-21T02:30:58.210
> 
> 标签：python, string, performance

无意中发现，在python中，一个表单的操作

```
string1.join(string2) 
```

可以等价地表示为

```
string2.replace('', string1)[len(string1):-len(string1)] 
```

此外，在尝试`timeit`了几个不同大小的输入之后，这种奇怪的加入方式似乎快了两倍多。

1.  为什么join方法要慢一些？
2.  像这样替换空字符串是安全/定义明确的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:05:57.200

所以首先，让我们分解一下为什么会这样。

```
>>> string1 = "foo"
>>> string2 = "bar"
>>> string1.join(string2)
'bfooafoor' 
```

`string1`这是在每个项目（字符）之间放置的操作`string2`。

所以替换空字符串会做一些有趣的事情，它将空字符之间的间隙计算为空字符串，因此基本上完成了相同的任务，除了在开始和结束处有一个额外的分隔符：

```
>>> string2.replace('', string1)
'foobfooafoorfoo' 
```

因此，切掉这些会产生与以下相同的结果`str.join()`：

```
>>> string2.replace('', string1)[len(string1):-len(string1)]
'bfooafoor' 
```

显然，这个解决方案的可读性远低于`str.join()`，所以我总是反对它。`str.join()`还被开发为在所有平台上都高效。在某些版本的 Python 上替换空字符串的效率可能要低得多（我不知道是否是这种情况，但这是有可能的——就像在 CPython 中重复连接相当快，但在其他地方不一定是这种情况。）

我什至在文档中找不到任何表明替换空字符串的行为应该以这种方式起作用的任何内容，[文档`str.replace()`](http://docs.python.org/3/library/stdtypes.html#str.replace)简单地说：

> 返回字符串的副本，其中所有出现的子字符串 old 都替换为 new。如果给定了可选参数 count，则仅替换第一个 count 出现。

我认为我们没有理由假设字母之间的间隙应该算作空字符串的出现（可以说，您可以在字符串的任何位置放置无限的空字符串），因此，依赖这种行为可能是一个坏主意。

这种操作也非常少见——将一系列字符串连接在一起更为常见——连接字符串的单个字符并不是我个人经常需要做的事情。

有趣的是，这在[Python 源代码](http://hg.python.org/cpython/file/96721e364870/Objects/stringobject.c#l2347)`x.replace("", y)`中似乎是特殊情况：

```
2347 /* Algorithms for different cases of string replacement */
2348
2349 /* len(self)>=1, from="", len(to)>=1, maxcount>=1 */
2350 Py_LOCAL(PyStringObject *)
2351 replace_interleave(PyStringObject *self,
2352 const char *to_s, Py_ssize_t to_len,
2353 Py_ssize_t maxcount)
2354 {
... 
```

很可能是这种特殊的外壳使它表现良好。同样，由于文档中没有提到，这是一个*实现细节*，假设它在其他 Python 版本中也能快速（或完全）工作是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T03:58:13.757

正如 Lattyware 所提到的，对于空字符串替换，它是一种特殊情况，`replace_interleave`它是一个直接循环，其中来自源和来自字符串的替代字符被复制到结果字符串。循环被编码为**尽可能快**。

```
count = self_len+1;

count -= 1;
Py_MEMCPY(result_s, to_s, to_len);
result_s += to_len;
for (i=0; i<count; i++) {
    *result_s++ = *self_s++;
    Py_MEMCPY(result_s, to_s, to_len);
    result_s += to_len;
}

/* Copy the rest of the original string */
Py_MEMCPY(result_s, self_s, self_len-i); 
```

Join方法也有一个Loop，但是也有改进的地方（通过我还没有找到所有方面的原因都已经按照下面的方式编码了）和瓶颈的原因。

```
char *sep = PyString_AS_STRING(self);
seq = PySequence_Fast(orig, "");
/* Catenate everything. */
p = PyString_AS_STRING(res);
for (i = 0; i < seqlen; ++i) {
    size_t n;
    item = PySequence_Fast_GET_ITEM(seq, i);
    n = PyString_GET_SIZE(item);
    Py_MEMCPY(p, PyString_AS_STRING(item), n);
    p += n;
    if (i < seqlen - 1) {
        Py_MEMCPY(p, sep, seplen);
        p += seplen;
    }
} 
```

正如您在这里看到的，在循环内

*   字符串的每个项目都被索引
*   确定项目的大小
*   索引项转换为字符串

上述三个操作，即使它可能是内联的，也有相当大的开销。***注意****这也解释了为什么使用 List 与使用 STring 相比有不同的结果，正如 Blended 所观察到的那样*

还比较两个循环，

前者

*   可以很容易地[自动矢量化](http://gcc.gnu.org/projects/tree-ssa/vectorization.html)
*   缓存友好。

**最后说明**

编写时牢记所有形式的`str.join`可迭代和序列，而不仅仅是字符串，并且没有详细说明，它完全可以预期通用例程的执行速度可能不如专用例程来服务特定形式的数据。

# c++ - 以编程方式在正确位置显示主音量控制滑块 (sndvol.exe)

> ID：14431732
> 
> 赞同：1
> 
> 时间：2013-01-21T02:31:06.070
> 
> 标签：c++, windows-8

刚买了一个新的东芝Satellite Z930，失望地发现没有提供音量增大/减小功能键。但是，超级本在电源按钮旁边**确实**有两个可编程键，所以我正在尝试开发一个可以从这些键调用的小型 C++ 应用程序。

到目前为止，我的所有代码都可以很好地根据传递给程序的命令行参数来增加/减少音量。我遇到的唯一问题是我想显示主音量滑块以让用户知道操作有效，并且我希望它出现在您单击扬声器图标时出现的正常位置通知区。

ATM 我只是使用 CreateProcess() 来运行“sndvol.exe -f”，它可以工作，但会在一个奇怪的位置（大约 {100、400}）显示窗口。因此，我尝试通过 EnumWindows() 和 GetWindowThreadProcessId() 获取窗口句柄，并使用 SetWindowPos() 将其移动到我想要的位置，但这没有任何效果。我可以成功获得进程顶级窗口的句柄，但不能移动它！

谁能解释这种行为？这与将焦点从滑块窗口关闭的事实有关吗？[此](https://superuser.com/questions/440751/windows-7-open-the-volume-control-popup-from-the-command-prompt)页面表明我想要实现的目标**是**可能的，那么我做错了什么？

MTIA:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:36:51.190

不知何故，这个有趣的 STARTUPINFO 和 SetWindowPos 组合似乎起作用了：

```
#include "windows.h"
#include <iostream>

BOOL CALLBACK EnumWindowsProc(HWND hWnd, LPARAM lParam) {
    const DWORD myProcessId = (DWORD) lParam;

    DWORD processId;
    GetWindowThreadProcessId(hWnd, &processId);
    if (processId == myProcessId) {
        SetWindowPos(hWnd, 0, 1, 1, 0, 0, SWP_NOSIZE | SWP_NOZORDER);
    }
    return TRUE;
}

int _tmain(int argc, _TCHAR* argv[])
{
    STARTUPINFO si;
    ZeroMemory(&si, sizeof(si));
    si.cb = sizeof(si);
    si.wShowWindow = SW_SHOWNORMAL;
    si.dwFlags = STARTF_USESHOWWINDOW;
    wchar_t cmdline[33000] = L" -f";
    PROCESS_INFORMATION pi;
    BOOL x = CreateProcess(L"c:\\Windows\\System32\\sndvol.exe", &cmdline[0], 0, 0, true, 0, 0, 0, &si, &pi);
    //std::cerr << x << " " << GetLastError() << std::endl;
    WaitForInputIdle(pi.hProcess, 100);

    for (int i = 0; i < 200; ++i)
    {
        x = EnumWindows(EnumWindowsProc, (LPARAM) pi.dwProcessId);
        //std::cerr << x << " " << GetLastError() << std::endl;
        Sleep(20);
    }

    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
    return 0;
} 
```

您可能想尝试更多以获得更好的解决方案（例如，观察回调是否成功移动窗口至少`k`多次。我尝试检查一次成功但它并没有总是移动窗口。另外请务必检查您的进程是否处理仍然引用一个有效的过程 - 你不想写一个无限循环。）。

尽管通过最新的编辑，该解决方案变得非常可靠。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-05T03:06:55.127

从“开箱即用”开始，而不是从代码中处理窗口的位置，而是在 CreateProcess 调用中添加命令行参数，正如您可以在[此处](https://www.sevenforums.com/tutorials/198083-volume-mixer-shortcut-create.html%20(OPTION%20TWO)%20https://superuser.com/questions/440751/windows-7-open-the-volume-control-popup-from-the-command-prompt)和[此处](https://superuser.com/questions/440751/windows-7-open-the-volume-control-popup-from-the-command-prompt)考虑的那样。显然，示例中的字母参数可以省略。我不确定我是否可以自己做数学，不熟悉坐标从哪里开始，但这似乎是一个可能的解决方案。

# ember.js - 我应该如何使用 ember-data 使用 SSL 发送 POST 请求？

> ID：14431736
> 
> 赞同：3
> 
> 时间：2013-01-21T02:31:47.820
> 
> 标签：ember.js, ember-data

我想在我的 ember 应用程序中创建一个用户并使用 SSL 将信息发送到服务器。我不知道该怎么做。我可以将模型的 url 设置为`https`地址吗？从[我正在阅读](https://stackoverflow.com/a/6418699/986415)的有关 SSL 的内容来看，将 SSL 与 ajax 函数一起使用是违反 Javascript 的同源策略的。

也许我遗漏了一些简单的东西，但我无法在文档或此处的任何其他问题中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:26:25.887

> 也许我错过了一些简单的东西

如果您只通过 SSL 提供所有内容，那将非常简单。Ember 将使用请求的协议和域为您的模型构建 API url，因此如果页面本身是通过 SSL 请求的，那么您的 API 请求也将如此。

> 这实用吗？

是的。由于您正在寻找创建用户，我假设您也会对他们进行身份验证。任何创建/验证用户的应用程序（ember/rails/php/whatever）都应该只使用 SSL。相反，如果您只是使用 SSL 登录，然后传递未加密的会话 cookie，则该 cookie 可能会通过中间人攻击被盗。有关详细信息，请参阅此堆栈溢出答案： [https ://stackoverflow.com/a/11715508/983357](https://stackoverflow.com/a/11715508/983357)

# ffmpeg - 将 mkv 转换为 mp4 vs ogv vs webm

> ID：14431737
> 
> 赞同：1
> 
> 时间：2013-01-21T02:31:47.457
> 
> 标签：ffmpeg, mp4, webm, mkv

我正在尝试使用 ffmpeg 将 mkv 文件转换为 mp4、webm 和 ogv，我得到了非常显着的性能结果。

mkv -> mp4 转换耗时 2 秒，而 webm 和 ogv 转换耗时约 5-10 分钟。有没有更快的方法来转换成这些格式？

使用的命令：

mkv -> mp4

```
ffmpeg -i ironman2trailer.mkv -vcodec copy -acodec copy -absf aac_adtstoasc output.mp4 
```

mkv -> webm

```
ffmpeg -i -f webm -vcodec libvpx -acodec libvorbis output.webm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:34:23.533

在第二个命令中，大部分时间可能是由视频编码占用的。

更具体地说，除了更改文件容器格式（即 from `mkv`to `webm`）之外，第二个命令还更改了视频和音频流的编解码器。这包括解码原始流并使用新的编解码器对其进行编码。

您的第一个命令只是更改了不是处理器密集型操作的文件容器格式。原始音频和视频流编码保持不变，由`copy`音频和视频编解码器的选项指定。

# windows - Doom 3 项目文件包括

> ID：14431738
> 
> 赞同：1
> 
> 时间：2013-01-21T02:31:54.627
> 
> 标签：windows, visual-studio, include, include-path

我正在清理代码并希望从一些源文件中最小化#includes。

我一直在查看 id Softwares Doom 3 源代码，并注意到许多文件不包含任何内容，但仍然可以访问其他文件中定义的#defines。

例如，Timer.h 没有 #includes 什么也可以访问 ID_INLINE 宏。

我比较了 .sln、.vcxproj、.vcxproj.filters、.props 文件，我与他们的文件几乎相同（减去文件数、文件名等）。

有没有人对如何完成这样的事情有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:23:05.930

头文件不是自己编译的；它们#included 到 .cpp 文件中，并且 .cpp 文件被编译。因此，头文件`X`可以引用在其他头文件`Y`（不包括`X`）中定义的宏，并且当两者`Y`和`X`（按特定顺序）包含到某个源（.cpp）文件中时，所有引用会解决的。

在您的情况下，几乎可以肯定的是，在引用`sys/sys_public.h`宏之类的宏之前，该文件最终会在每个文件中#included 。`ID_INLINE`事实上，如果你用 grep 搜索，你会看到`sys_public.h`#included from `precompiled.h`，这是许多 .cpp 文件中包含的第一个头文件。

# tfs - TFS 2012 中的门控签到

> ID：14431740
> 
> 赞同：0
> 
> 时间：2013-01-21T02:32:13.770
> 
> 标签：tfs, continuous-integration

在我目前工作的地方，我们正在考虑从 TFS 2010 升级到 TFS 2012。我非常喜欢的一个功能是门控签入，因为这可以确保您正在开发的分支在没有签入/变更集方面保持原始状态由于编译错误或单元测试失败而导致构建中断。

然而，在 TFS 2010 中，许多开发人员和我发现此功能使用起来有点麻烦。一个可用性问题是在 CI 构建成功验证您的签入不会破坏构建之后需要协调您的工作区。另一个问题是，如果您的变更集确实破坏了构建，那么开发人员发现将破坏的变更集搁置起来并不直观。

TFS 2012 中是否改进了门控值机体验？我通过在 Internet 上进行研究发现的一项改进是能够在调用 CI 构建之前排队进行大量签入。除此之外，我没有找到任何进一步的信息，特别是关于此功能的开发人员/用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:10:05.327

TFS 2012 确实添加了[批处理门](http://mattvsts.blogspot.it/2012/12/batched-gated-check-ins.html)控签入，但除此之外，我发现门控签入用户体验除此之外非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:49:01.577

我认为您错过了有关 Gated-checked-in 的一件重要事情，即在 Gated-checked-in 运行时，您可能需要一些时间来添加和修改您的代码，这意味着您可能需要搁置当前代码并获取从搁置什么打破构建。

协调也很有意义，因为当您通过签入代码开始构建时，您不知道您的文件是否会签入，并且它还可能在构建运行时包含新的修改，因此此功能专为所有情况而设计不止一种情况。

# php - 从 xml 解析器获取数据

> ID：14431742
> 
> 赞同：0
> 
> 时间：2013-01-21T02:32:18.767
> 
> 标签：php, xml, parsing

> **可能重复：**
> [PHP 的最佳 XML 解析器](https://stackoverflow.com/questions/188414/best-xml-parser-for-php)

我想在我网站的表格中显示我从此 url 获得的数组。但是我不知道从哪里开始。链接是

[http://www.islamicfinder.org/prayer_service.php?country=usa&city=germantown&state=MD&zipcode=20876&latitude=39.2074&longitude=-77.2311&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrday&isha&maghribInterval=1&isha&maghribInterval=1& 1&simpleFormat=xml](http://www.islamicfinder.org/prayer_service.php?country=usa&city=germantown&state=MD&zipcode=20876&latitude=39.2074&longitude=-77.2311&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrInterval=1&maghribInterval=1&dayLight=1&simpleFormat=xml)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:08:01.893

为什么不试试[这个](http://simplehtmldom.sourceforge.net/)简单的 HTML 解析器呢？

```
$data = Array();
$html = file_get_html('http://www.islamicfinder.org/prayer_service.php?country=usa&city=germantown&state=MD&zipcode=20876&latitude=39.2074&longitude=-77.2311&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrInterval=1&maghribInterval=1&dayLight=1&simpleFormat=xml');

foreach($html->find('prayer') as $prayer)
{
    $data['fayr']    = $prayer->find('fayr', 0)->plaintext;
    $data['sunrise'] = $prayer->find('sunrise', 0)->plaintext;
    $data['dhur']    = $prayer->find('dhur', 0)->plaintext;
} 
```

# java - line.split("[ ]+") 表示用空格分割？

> ID：14431744
> 
> 赞同：-1
> 
> 时间：2013-01-21T02:32:19.997
> 
> 标签：java, string, split

您好，如果我有包含以下行的 txt 文件：

```
newmtl material0
Ka 1.000000 1.000000 1.000000
Kd 1.000000 1.000000 1.000000
Ks 0.000000 0.000000 0.000000
Tr 1.000000 
```

它被拆分为：

```
if(line.startsWith("Ks")){
String[] str=line.split("[ ]+");} 
```

它返回

```
0.000000 
0.000000 
0.000000 
```

为什么“[]+”表示用空格分割？？找不到引用此内容的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:34:41.990

`[ ]`是括号内的空格。加上一个`+`，它的意思是“1 个或多个空格”。这是一个[正则表达式（点击这里了解更多）](http://www.regular-expressions.info/)。

例如，`[abc]+`将匹配`aaa`、`acba`、`cbabcbab`或一个或多个字母`a`、`b`和的任意组合`c`。意思是“这里的`[]`东西之一”，`+`意思是“一个或多个”。

更多示例：

```
f[ao]o      will match "foo" and "fao"
ya+y        will match "yay" or "yaaaaay" or "yaaaaaaaaaaaay"
hooray[!1]+ will match "hooray!!!!" or "hooray!!1!!1!!!!1" or "hooray!111" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:35:09.987

`String.split()`将正则表达式作为参数。而这个写得不好，可能是：

```
" +" 
```

这是一个匹配一个或多个空格的正则表达式。

这记录[在 Javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:02:41.727

在这种情况下，您的问题表明正则表达式中需要一个空格。但是您的意图似乎是捕获`one or more spaces`。

尽管您`" +"`通常可以为此写作`"\n"`，`"\t"`但也考虑了准确性。因此，您可以使用以下表达式：

```
"\s+" 
```

在 Java 中表示为：

```
"\\s+" 
```

以避免编译器错误。

# java - Target android 4.1 适用于以前的版本？

> ID：14431749
> 
> 赞同：1
> 
> 时间：2013-01-21T02:33:19.310
> 
> 标签：java, android, api, target

我有一个可能看起来很愚蠢的问题，但我有这个...

我有一个适用于 android 的应用程序，由于使用了 api，因此必须将目标设置为 Android 4.1。

我的疑问是该应用程序是否可以在系统低于 4.1 的 android 设备上运行？

在我的清单文件中放入以下内容

```
<uses-sdk
         android: minSdkVersion = "8"
         android: targetSdkVersion = "16" /> 
```

我在具有 android 2.3.6 的设备上进行了测试，并且运行正常，没有任何错误，其他版本也一样，没有出现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:36:47.757

## 最低 SDK 版本

最低 SDK 版本是您可以在其上运行应用程序而不会导致问题的最低 API。

> 一个整数，指定应用程序运行所需的最低 API 级别。如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序。您应该始终声明此属性。
> 
> --[`<uses-sdk>`文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

## 目标 SDK 版本

目标 SDK 版本只是说明您可以为您的应用程序使用方法的 API。

> 一个整数，指定应用程序所针对的 API 级别。...此属性通知系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为以保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行（低至`minSdkVersion`）。
> 
> --[`<uses-sdk>`文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

## 例子

例如，假设您[`Display.getSize(Point)`](http://developer.android.com/reference/android/view/Display.html#getSize(android.graphics.Point))在应用程序中使用。此方法仅适用于 API 13+，因此您*必须*针对 13 或更高版本。但是，如果您不在使用 API 12 或更低版本的设备上调用此方法，则不会遇到任何问题。

但是，假设您的应用程序要求您有权访问`Fragment`s 及其方法（并且不想使用支持库）。然后，您的 SDK 级别*必须*至少为 11 - 否则，它将在低于该 API 级别的设备上崩溃。

## 简短的回答

`android:minSdkVersion="8"`表示您的应用可以在 Android 2.2+ 上使用。`android: targetSdkVersion="16"`意味着您在编译应用程序时可以访问 Android 4.1+ 的任何内容（但并不*意味着*旧设备可以使用这些功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:36:19.393

minSdkVersion = 8 表示它将在运行 Android 2.2 或更高版本的设备上工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T05:16:00.150

埃里克的回答非常好。我只想从文档中添加更多内容。它可能会帮助你..

**关于 minsdkversion**

1.  如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序
2.  如果不声明该属性，系统会假定默认值为“1”，表示您的应用兼容所有版本的Android
3.  所以如果你使用在你的 minsdk 版本之后引入的任何 api，那么程序将会崩溃。

**关于targetsdkversion**

1.  如果未设置，则默认值等于提供给 minSdkVersion 的值。
2.  根据您应用程序在不同版本的 android 操作系统上的 targetsdkversion，行为和外观可能会发生变化。因此从文档..

> 例如，将此值设置为“11”或更高允许系统在 Android 3.0 或更高版本上运行时将新的默认主题 (Holo) 应用到您的应用程序，并且还可以在大屏幕上运行时禁用屏幕兼容模式（因为支持 API 11 级隐式支持更大的屏幕）。

再举一个例子。假设您将targetsdk 版本设置为5。那么在所有操作系统版本中，菜单、标题栏和整体主题都将像ECLAIR。但是如果您将targetsdk 版本设置为14。那么对于ics，主题将是ics。并且在以下版本的操作系统上，主题将与该操作系统相对应。

**最后关于maxsdkVersion：**

由于提到了其他两个，所以我认为我们也应该包括这个孤独的属性。如果声明了此属性，则其值必须等于或大于系统的 API 级别整数。如果未声明，则系统假定应用程序没有最高 API 级别。

# javascript - 如何找到“这个”节点的“父”？

> ID：14431755
> 
> 赞同：1
> 
> 时间：2013-01-21T02:34:27.310
> 
> 标签：javascript, dom, javascript-events

当定位当前节点时，你可以`event="function(this)"`告诉函数你正在处理这个节点。如何获取当前元素所在的节点？

```
<div>
    <span event="function(this)">Click here</span>
</div> 
```

我想处理`div`，而不是`span`。当前代码处理`span`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T02:37:29.813

每个 DOM 节点都有一个[`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)属性。

# ruby-on-rails - Rails如何将元素插入现有哈希

> ID：14431760
> 
> 赞同：0
> 
> 时间：2013-01-21T02:34:45.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个将数据发送到我的控制器的 ajax 请求，但我想在将元素保存到数据库之前将元素添加到哈希中。

我现有的哈希看起来像这样：

```
{"application_field_attributes"=>{"0"=>{"id"=>"10"}}} 
```

我也有元素`params[:xposition]`，`params[:yposition]`我想添加到上面的哈希中，使其看起来像这样：

```
{"application_field_attributes"=>{"0"=>{"id"=>"10", "xposition"=>"1", "yposition"=>"0"}}} 
```

我该怎么做呢？

**编辑**

我这样做的原因是因为我试图跟踪可拖动元素在网格上的放置位置。

在我的 ajax 调用中，我传入了 x 和 y 位置，这些位置是从我放置在网格上的一些“data-id”属性中获得的。

在我的控制器方法中，我目前有`@application.update_attributes(params[:application])`，但它不包含 xposition 和 yposition，这就是我试图将它们注入哈希的原因。

也许更好的解决方案是在 update_attributes 命令之后手动更新控制器中的 x 和 y 位置？

所以它看起来像：

```
@application.update_attributes(params[:application])
@application.update_xposition(params[:xposition])
@application.update_yposition(params[:yposition]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:42:51.720

你可能想以不同的方式做到这一点。

例如，也许更好的主意是在表单中使用 xposition 和 yposition 隐藏字段。

你能告诉我们更多关于你想要做什么，什么是 x/yposition （如果它们对于每个应用程序都不同，它们来自哪里）。

不过要回答你的问题：

```
app_attrs = {"application_field_attributes"=>{"0"=>{"id"=>"10"}}}
app_attrs["application_field_attributes"]["0"].merge!({
    "xposition" => params[:xposition],
    "yposition" => params[:yposition]
}) 
```

但如果我是你，我不会那样做。

# jquery - 检查是否有任何 Input 元素处于焦点位置

> ID：14431762
> 
> 赞同：6
> 
> 时间：2013-01-21T02:34:52.287
> 
> 标签：jquery, input, focus

我有一个 jquery 脚本，当按下键盘上的任何键时会显示一个 div。我想向脚本添加一个条件，该条件仅在页面上没有其他输入区域（textarea 或 texfields）时才运行脚本。这样，您实际上可以在页面的其余部分上键入而不显示 div。

```
$(document).on('keydown', function (e) {
    if (!$('#test').is(':visible')) {
        //######## IF (every input is not active....) {
        if (65 <= e.keyCode && e.keyCode <= 90) {
            $(elem).fadeIn();
            $('#textarea').val('');
            $('#textarea').focus();
            $('#textarea').val(temp);
        }
    }
}); 
```

谢谢。如果有必要，我可以为页面上的所有其他文本区域提供相同的 ID。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T02:37:34.937

使用 jQuery 的[焦点](http://api.jquery.com/focus-selector/)伪选择器

```
if ( $('input:focus').length > 0 ) {  return; } 
```

或者对于您的代码示例

```
if ( $('input:focus').length == 0) { ... } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T02:40:57.450

你可以使用 jQuery`.is()`和`document.activeElement`这样的。

```
var targetInput = $('#myInput');

if(!targetInput.is(document.activeElement)) {
    alert('Typed while not focused on #myInput!');
} 
```

**[JSFiddle](http://jsfiddle.net/zXhQM/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T02:38:40.860

使用 jQuery，您所要做的就是搜索当前焦点所在的 input 或 textarea 元素。

```
if ( $('input:focus, textarea:focus').length === 0 ) {
    // put some code here...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-14T13:44:25.993

我想建议将其用于任何表单输入

```
if ( $(':input:focus').length ) { ... }
```

# groovy - 使用 gremlin 查找距起始节点给定距离内的所有节点

> ID：14431766
> 
> 赞同：3
> 
> 时间：2013-01-21T02:35:57.507
> 
> 标签：groovy, cypher, gremlin

我正在尝试通过 java/pipes 使用 gremlin，作为我的第一个查询之一，我试图找到从给定起始节点可到达的所有节点，最大距离为 3。在密码中，我的查询是：

```
START n = node(*)
MATCH n -[*1..3]-> reached 
WHERE (has(n.id) and n.id = \"v1\")
RETURN distinct n, reached 
```

哪个工作正常，到目前为止我在 gremlin 中所拥有的是：

```
_().has('idd', 'v1').out().loop(1){it.loops < 3}{true} 
```

这不能正常工作。根据我的理解，它应该从每次迭代中发出输出并迭代 3 次。目前我得到的结果太少了。

任何帮助，将不胜感激，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:05:02.423

如果您的起始节点是 gv(1)，那么要在三步后找到所有唯一节点：

```
g.v(1).out.loop(1){it.loops < 3}{true}.dedup 
```

..您可能必须使其< 4（忘记）。接下来，如果您的起始节点具有 idd=v1，则执行以下操作：

```
g.V('idd','v1').out.loop(1){it.loops < 3}{true}.dedup 
```

确保你在 idd 上有一个索引，否则它是对所有 gV 的线性扫描，用于那些 idd=v1 的顶点。

HTH，马尔科。

# php - 做在线游戏服务器升级的最佳做法？

> ID：14431767
> 
> 赞同：5
> 
> 时间：2013-01-21T02:36:01.740
> 
> 标签：php, mysql, upgrade

假设我有一个在线游戏正在运行，它的版本是 1.0。

我一直在登台服务器上开发并为游戏带来新功能。登台服务器是独立于实时服务器的服务器。（我相信大多数人都是这样做的）

好的。我完成了新版本1.1。现在进行在线游戏服务器升级的最佳做法是什么？

假设它是一个简单的游戏服务器 PHP+MYSQL。因此有新的 php 脚本或更改的脚本，以及新的 mysql 表、列或修改的列。我希望不要手动进行 - 在实时服务器上手动进行相同的更改。这很丑陋且容易出错，并且必须记住您所做的每一个更改。

我能想到的另一种方法是使登台服务器处于活动状态，并导入所有现有的数据库数据。我不喜欢它，似乎错误随时可能发生。

您可以推荐的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T02:58:56.740

*   版本控制 - 使用它！
*   迁移 - 使用它！

**版本控制 (Git)**

你应该在实时服务器上有一个 git 服务器，以及在你的测试/阶段服务器上。您将对所做的更改进行提交，然后将这些提交/更改“推送”到服务器。一旦您的测试服务器工作，您将其推送到您的实时服务器。

**迁移**

大多数现代 PHP 框架都提供此功能。基本上，您将在代码中描述您的数据库模式。使用 Laravel，你可以运行：`artisan migrate`或者将模式推送到数据库的东西。

只有一个数据库和一个 Web 服务器，您可能希望在更新之前阻止公众访问它们，这主要用于数据库，并且只会持续几秒钟，但可以防止迁移时出现任何错误。一个简单的 git post 钩子就可以了。网上有大量关于此的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:30:25.293

创建数据库升级脚本。最好使用工具生成一个。

如果您还没有这样做，请为 1.0 版构建一个发布包。为 1.1 版本构建一个升级包和部署脚本，它将你的生产版本从 1.0 修补到 1.1

有关如何更新现有部署的灵感，您可以查看[Wordpress 如何升级](http://halfelf.org/2011/how-the-wordpress-upgrade-works/)：

1.  下载升级包解压到临时目录
2.  确保文件解压！
3.  发布“停机维护”消息
4.  复制新文件。这是直接复制/替换。不删除。
5.  如果数据库尚未更新，请升级数据库
6.  从临时目录中删除解压缩的文件
7.  删除“停机维护”消息
8.  删除旧文件。浏览已弃用和未使用文件的列表并删除它们。

使用 1.0 版本包在暂存环境中重新创建生产机器，并在那里测试升级包的部署，直到您满意为止，然后再上线。

备份生产，升级生产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:11:00.153

我听说 SharePoint 让前端支持新旧数据库。然后您首先更新所有前端代码并使用旧数据库。在所有用户使用新的前端代码后，更新数据库。升级完成后，您可以删除对旧数据库的支持，并为下一个版本再次执行相同的技巧。

通过这种方式，您可以通过负载平衡的前端将停机时间降至最低。

也许他们让它听起来比实际上更容易，但我喜欢这个原则。

# count - 子查询返回超过 1 个值且不允许

> ID：14431769
> 
> 赞同：0
> 
> 时间：2013-01-21T02:36:17.403
> 
> 标签：count, sql-server-2008-r2

我有这个选择查询来显示一个表

```
select distinct 
   a.afdeling as AFD,  
   convert(varchar(10),DateAdd(Day, DateDiff(Day, 0, a.datetrans) , 0),103) as datetrans  ,
   convert(varchar(10),DateAdd(Day, DateDiff(Day, 0, a.doe ), 0),103) as inputdate,  
   (select COUNT(distinct a.DOE)  from detail a left join
      estate b on a.CodeEstate=b.Code   group by
      a.afdeling, a.datetrans , convert(varchar(10),DateAdd(Day, DateDiff(Day, 0, a.DOE ) ,0),103)
      ) as total ,
   datediff(DAY,a.datetrans,a.DOE) as variant , 
   GetDiffStatus(a.datetrans,a.DOE) as status from
   detail a  left join
   estate b on a.CodeEstate=b.Code  where b.name='Estate 1' and convert(varchar(10),DateAdd(Day, Datediff(Day, 0,
   a.datetrans), 0),103)  between '01/01/2013' and '31/01/2013' Group
   BY a.datetrans, a.doe,DateDiff(Day, 0, a.doe),a.afdeling  order by
   a.afdeling, a.datetrans, a.inputdate  , a.variant,
   a.status 
```

我想要做的是计算一个表中相同日期的总 DOE，基于在表详细信息中有键的其他表（房地产）中的名称，但是当我使用该查询时，它显示错误子查询返回超过1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

如何解决这个问题，我使用的是 SQL Server 2008 r2，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:27:31.250

子查询有一个`GROUP BY`子句，但没有`WHERE`将它与外部查询关联的子句。因此，它会产生多个值。由于您使用子查询表达式的（可能是单个）值作为列值，因此您会收到错误。

通过在子查询和外部查询中使用相同的别名来增强混淆。

您想查找有关*相关子查询*的其他信息。

# mysql - MySQL列出所有重复项

> ID：14431772
> 
> 赞同：19
> 
> 时间：2013-01-21T02:36:35.963
> 
> 标签：mysql, sql, select, duplicates

> **可能重复：**
> [在 MySQL 中查找重复记录](https://stackoverflow.com/questions/854128/find-duplicate-records-in-mysql)

我在 MySQL 中有一个这样的表：

```
ID    name    email
1    john     abc@abc.com
2    johnny   abc@abc.com
3    jim      eee@eee.com
4    Michael  abec@awwbc.com 
```

我怎样才能让 MySQL 查询像这样列出重复的查询？

重复搜索的结果：

```
ID    name    email         Duplicate
1    john     abc@abc.com      2
2    johnny   abc@abc.com      2 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-21T02:42:02.340

```
SELECT  a.*, b.totalCount AS Duplicate
FROM    tablename a
        INNER JOIN
        (
            SELECT  email, COUNT(*) totalCount
            FROM    tableName
            GROUP   BY email
        ) b ON a.email = b.email
WHERE   b.totalCount >= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5dc584/1)

为了获得更好的性能，请添加一个`INDEX`on 列`EMail`。

或者

```
SELECT  a.*, b.totalCount AS Duplicate
FROM    tablename a
        INNER JOIN
        (
            SELECT  email, COUNT(*) totalCount
            FROM    tableName
            GROUP   BY email
            HAVING  COUNT(*) >= 2
        ) b ON a.email = b.email 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5dc584/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T03:27:08.097

如果您可以在逗号分隔列表中使用 ID 和名称，那么您可以尝试：

```
select email, count(*) as numdups,
       group_concat(id order by id), group_concat(name order by id)
from t
group by email
having count(*) > 1 
```

尽管结果不是关系格式，但这会保存连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:42:45.003

检查[MySQL 论坛](http://forums.mysql.com)上的[这篇文章](http://forums.mysql.com/read.php?10,180556,180572#msg-180572)，它提供了以下内容：

```
SELECT t1.id, t1.name, t1.email FROM t1 INNER JOIN ( 
SELECT colA,colB,COUNT(*) FROM t1 GROUP BY colA,colB HAVING COUNT(*)>1) as t2 
ON t1.email = t2.email; 
```

# c++ - C++: ::ntohs() 在更高的优化级别上失败

> ID：14431776
> 
> 赞同：6
> 
> 时间：2013-01-21T02:37:21.223
> 
> 标签：c++, linux, autoconf, automake

我有一个`.cpp`文件：`htonstest.cpp`. 我`g++`用来编译它：

```
$ g++ -o test htonstest.cpp 
```

它有效，程序`./test`也有效。

但是，当我使用 automake 编译它时，会出现编译错误：

```
 htonstest.cpp: In function ‘int main()’: 
 htonstest.cpp:6: error：expected id-expression before ‘(’ token. 
```

我的操作系统是CentOS，gcc的版本是4.1.2 20080704，autoconf的版本是2.59，automake的版本是1.9.6。

重现：

```
$ aclocal
$ autoheader
$ autoconf
$ automake -a
$ ./configure
$ make 
```

ntohstest.cpp：

```
 #include <netinet/in.h>
 #include <iostream>

 int main()
 {
     short a = ::ntohs(3);
     std::cout << a << std::endl;
     std::cin.get();
     return 0;
 } 
```

配置.ac：

```
 AC_PREREQ(2.59)
 AC_INIT(FULL-PACKAGE-NAME, VERSION, BUG-REPORT-ADDRESS)
 AC_CONFIG_SRCDIR([htonstest.cpp])
 AC_CONFIG_HEADER([config.h])
 AM_INIT_AUTOMAKE([foreign])
 # Checks for programs.
 AC_PROG_CXX

 # Checks for libraries.

 # Checks for header files.
 # AC_CHECK_HEADERS([netinet/in.h])

 # Checks for typedefs, structures, and compiler characteristics.

 # Checks for library functions.
 AC_CONFIG_FILES(Makefile)
 AC_OUTPUT 
```

生成文件.am：

```
 bin_PROGRAMS=main
 main_SOURCES=htonstest.cpp 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T02:45:19.413

这实际上与 autotools 无关，当我测试您的程序时，我感到非常惊讶。相关代码在`netinet/in.h`...

```
#ifdef __OPTIMIZE__
...
# define ntohs(x) ...
...
#endif 
```

Automake下代码失败的原因是因为Automake默认为`-O2`，`-O2`启用时`ntohs()`为宏。

## 修复

使用`ntohs(3)`而不是`::ntohs(3)`.

## 替代修复

在包含后添加以下行：

```
#undef ntohs 
```

## 文档

`byteorder(3)`手册页内容如下：

> 该`htons()`函数将无符号短整数`hostshort`从主机字节顺序转换为网络字节顺序。

所以在我看来，图书馆定义宏充其量是*粗鲁的。*`htons()`

# php - Jquery选择更改不更新

> ID：14431782
> 
> 赞同：0
> 
> 时间：2013-01-21T02:37:46.620
> 
> 标签：php, jquery, html, web

下面是我的代码。我可以让这些部分单独工作，但无法找出为什么它不能作为一个整体工作。你可以在[http://www.center-center.com/frames-stretcher%20app.php看到一个活生生的例子](http://www.center-center.com/frames-stretcher%20app.php). 我希望表单在每次更改表单元素时更新页面底部的表格。更改选择的单选按钮和文本输入时页面功能正常，但由于我不知道的原因使用下拉菜单时不会即时更新。带有选择元素的值是通信的，但由于某种原因不会像其他输入一样即时更新。我已经单独对它们进行了测试，并且效果很好，但是当所有这些都在一起时，就不行了。任何帮助将不胜感激，因为过去几天我一直在努力让它正常工作。

```
 $(document).ready(function(){
        var type = null;

        $("#stretcher-op").change(function() {
            $("#stock-select div").hide();

            if (type != $('input[name=type]:checked').val()) {
                if (type == 'frame') {
                    $("select#stock-op").remove();
                    $("select#corner-op").remove();
                    $("select#finish-op").remove();

                    $("label[for=finish-op]").hide();
                }

                $("label[for=stock-op]").after('<select id="stock-op" name="stock"><option selected="selected"></option><?php $i = 0; foreach($stretcher_stock_options as $option) { if ($option['show'] == 1) { echo('<option value="' . $i . '">' . $option['name'] . '</option>'); } $i++; } ?></select>');
                $("label[for=corner-op]").after('<select id="corner-op" name="corner"><option selected="selected"></option><?php $i = 0; foreach($stretcher_corner_options as $option) { if ($option['show'] == 1) { echo('<option value="' . $i . '">' . $option['name'] . '</option>'); } $i++; } ?></select>');
            }

            type = $('input[name=type]:checked').val(); //stretcher
        });

        $("#frame-op").change(function() {
            $("#stock-select div").hide();

            if (type != $('input[name=type]:checked').val()) {
                if (type == 'stretcher') {
                    $("select#stock-op").remove();
                    $("select#corner-op").remove();
                }

                $("label[for=finish-op]").show();               

                $("label[for=stock-op]").after('<select id="stock-op" name="stock"><option selected="selected"></option><?php $i = 0; foreach($framing_stock_options as $option) { if ($option['show'] == 1) { echo('<option value="' . $i . '">' . $option['name'] . '</option>'); } $i++; } ?></select>');
                $("label[for=corner-op]").after('<select id="corner-op" name="corner"><option selected="selected"></option><?php $i = 0; foreach($framing_corner_options as $option) { if ($option['show'] == 1) { echo('<option value="' . $i . '">' . $option['name'] . '</option>'); } $i++; } ?></select>');
                $("label[for=finish-op]").after('<select id="finish-op" name="finish"><option selected="selected"></option><?php $i = 0; foreach($framing_finish_options as $option) { if ($option['show'] == 1) { echo('<option value="' . $i . '">' . $option['name'] . '</option>'); } $i++; } ?></select>');
            }

            type = $('input[name=type]:checked').val(); //frame
        });

        $("input,select").change(function() {
            width = $('#width').val();
            height = $('#height').val();
            quantity = $('#quantity-op').val();
            stock = $('#stock-op option:selected').val();
            corner = $('#corner-op option:selected').val();
            finish = $('#finish-op option:selected').val();

            $("#quote").load('art-product-calculator.php?type=' + type + '&width=' + width +'&height=' + height + '&quantity=' + quantity + '&stock=' + stock + '&corner=' + corner + '&finish=' + finish);
        });
    });
</script>
</head>

<body>
<div id="container">
    <header id="banner">
        <img src="" />
    </header>

    <section id="selection">
        <div class="option" id="stretcher">
            <label for="stretcher-op">Stretcher</label><br />
            <input id="stretcher-op" name="type" type="radio" value="stretcher" />
        </div>
        <div class="option" id="frame">
            <label for="frame-op">Frame</label><br />
            <input id="frame-op" name="type" type="radio" value="frame" />
        </div>

        <div class="option" id="quantity">
            <label for="quantity-op">Quantity </label><input id="quantity-op" name="width" type="" value="" size="6" />
        </div>

        <div class="option" id="dimensions">
            <input id="width" name="width" type="" value="width" size="6" /> <label for="width">inches</label> by 
            <input id="height" name="height" type="" value="height" size="6"  /> <label for="height">inches</label>
        </div>

        <div class="option" id="stock-select">
            <label for="stock-op">Stock Selection </label><div class="space-holder">&nbsp;</div>
        </div>

        <div class="option" id="corner-joint">
            <label for="corner-op">Corner Joint </label>
        </div>

        <div class="option" id="finish">
            <label for="finish-op">Finishing </label>
        </div>
    </section>

    <section id="quote">
    </section>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:43:20.790

您的下拉菜单是动态添加的，您必须像这样在它们上委托事件：

```
$(document).on("change", "#mydrop, #lastdrop, #newdrop", function() {

     // do something    

}); 
```

如果不使用，您还需要使用最新版本的 jQuery。

# ios - 当#define a variable 时，@interface @ implementation 和 in .h 有什么不同

> ID：14431783
> 
> 赞同：0
> 
> 时间：2013-01-21T02:37:53.607
> 
> 标签：ios, objective-c

。H

```
@interface AdvancedSearchMainVC : UIViewController 
```

.m

```
#import "AdvancedSearchMainVC.h"

@interface AdvancedSearchMainVC ()

@end

@implementation AdvancedSearchMainVC 
```

哪个是添加的最佳位置`"#define HIDEBUTTON_TAG 100"`以及为什么

@interface @ implementation 和 .h 中的宏定义有什么不同

非常感谢~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:44:39.193

AFAIK，唯一的区别是范围。如果您在接口中定义它，则导入标头的任何内容也可以访问该值，而如果您将其放入实现中，则只能由该类的方法访问。

# node.js - 在 Windows 中开始使用 Node.js

> ID：14431784
> 
> 赞同：-5
> 
> 时间：2013-01-21T02:38:03.477
> 
> 标签：node.js

我应该如何在 Windows 上使用 Node.js？我需要什么依赖项？我需要下载什么？我需要在命令提示符中输入任何内容吗？我什至可以在 Windows 上使用 Node.js 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T02:39:31.030

您所要做的就是下载 Windows 版本： [http](http://www.nodejs.org/download/) ://www.nodejs.org/download/ 仅此 而已。

您可以通过`node`在命令提示符下键入来运行它。它甚至为您设置了路径。就是这么简单。

# c# - C# WinForms：带有垂直滚动条的多列列表框

> ID：14431786
> 
> 赞同：1
> 
> 时间：2013-01-21T02:38:30.940
> 
> 标签：c#, winforms, listbox, vertical-scrolling, multiple-columns

我需要以类似于此处显示的中央面板的方式显示数据：http: [//www.binaryworks.it/extremegamesmanager/images/features/features_2.PNG](http://www.binaryworks.it/extremegamesmanager/images/features/features_2.PNG)（带有游戏封面和标题）。

我已经有一个类似的控件（基于标准 WinForms ListBox），但它有一个水平滚动（因为 ListBox 不允许多列垂直滚动：http: [//msdn.microsoft.com/en-us/library/system .windows.forms.listbox.multicolumn.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.multicolumn.aspx) )

ListView 似乎不支持将自定义对象作为元素，而 DataGrid 适用于相关数据的行——但我有一个图像列表（带标题）。

您如何建议我继续进行 - 是否有比扩展面板更快（更简单）的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:33:57.730

这是一个第 3 方组件，但您可以查看[Better Thumbnail Browser](http://www.componentowl.com/better-thumbnail-browser)，它类似于 ListView，但支持 Thumbnails 视图，允许任意图像大小、背景缩略图加载以及项目可以居中或左对齐，但它们的内部间距不会改变如在 ListView 的 LargeIcon 视图中：

![在此处输入图像描述](../Images/7cdd75938093dc41daa30044b40118b2.png)

我们提供免费软件组件[Better ListView Express](http://www.componentowl.com/better-listview-express)，它支持具有任意图像大小的 LargeIcon 视图。

这两个控件都有很多布局和显示选项。

# c# - 以编程方式将网格“转换”为另一个网格

> ID：14431796
> 
> 赞同：3
> 
> 时间：2013-01-21T02:40:15.523
> 
> 标签：c#, unity3d, mesh

我需要一些方法通过添加或减去三角形和顶点并改变它们的位置来将我的网格转换为另一个。

我的目标是在 Unity 中将我的“怪物”（即单个网格）平滑地转换为人类（也就是单个网格）。看起来像“Crumple Mesh Modifier”的东西，你可以在这个项目中找到[这里](https://www.assetstore.unity3d.com/#/content/5141)

对不起我的英语，我不是英语演讲者，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:40:33.300

动态创建网格：

```
MeshFilter meshFilter = GetComponent();
Mesh mesh = meshFilter.sharedMesh;

if (mesh == null){
    meshFilter.mesh = new Mesh();
    mesh = meshFilter.sharedMesh;
}

Vector3 p0 = new Vector3(0,0,0);
Vector3 p1 = new Vector3(1,0,0);
Vector3 p2 = new Vector3(0,1,0);
Vector3 p3 = new Vector3(0,0,1);

// clear mesh of current data
mesh.Clear();

// set vertices
mesh.vertices = new Vector3[]{p0,p1,p2,p3};

// set 
mesh.triangles = new int[]{
    0,1,2,
    0,2,3,
    2,1,3,
    0,3,1
};
mesh.RecalculateNormals();
mesh.RecalculateBounds();
mesh.Optimize(); 
```

修改现有顶点（对面的工作类似）：

```
// mesh.vertices returns a copy
Vector3[] vert_copy = mesh.vertices;
vert_copy[0] = new Vector3(10,11,12);
vert_copy[1] = new Vector3(13,14,15);

// reassign new vertices to mesh
mesh.vertices = vert_copy;

mesh.RecalculateNormals();
mesh.RecalculateBounds();
mesh.Optimize(); 
```

当您重新计算法线和边界时，这些调用会变得很昂贵。如果您的网格在“转换”时不会与其他网格进行物理交互，您可以推迟 **RecalculateBounds()**直到“转换”完成之后。类似地，如果您预计网格的每帧只有很小的变换，您可以将**RecalculateNormals()**限制为每隔一帧或每 300 毫秒。

# crystal-reports - 水晶报表：删除文本上方的空白

> ID：14431801
> 
> 赞同：1
> 
> 时间：2013-01-21T02:42:14.113
> 
> 标签：crystal-reports

最近，我被要求将几十份看起来很奇怪的报告归为一个标准。一切都很好，但是有一个问题经常出现并开始让我烦恼：

[http://img845.imageshack.us/img845/1549/fitsection.png](http://img845.imageshack.us/img845/1549/fitsection.png)

正如您所看到的，文本“VESSEL”上方有很多空白空间，我想删除它们，并且默认情况下，Crystal Reports 仅当空白空间位于最后一行下方时才具有“适合部分”的选项。更糟糕的是，如果该部分的内容是由对象的组合（即文本和行、框等）组成的，则选择全部并将其向上拖动经常会弄乱项目的对齐方式。虽然我可以手动完成，但当必须在许多报告上重复时可能会非常烦人。有没有简单的解决方法？

编辑：解决了，我解决了我的问题。让我再次澄清一下问题所在：Hrere 是原来的复杂标题： ![http://img651.imageshack.us/img651/4299/move1.png](../Images/2ee606bcaa3f96728595e50c3f7e6852.png)

简单移动后它看起来像这样： ![在此处输入图像描述](../Images/cf45ca36a592c8491424766d7f53435b.png)

要修复它，在开始移动任何东西之前，右键单击该部分并选择“删除所有水平参考线”。奇迹般有效：

![在此处输入图像描述](../Images/18961b458fce86761717931257035919.png) 现在我可以轻松地选择“适合部分”来删除空白空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:13:31.853

我没有什么可以帮助您的，但是您可以移动引导线，而不是移动字段。（这将使所有对齐的字段一起移动）

另一件事是：在 Crystal XI 上，您还可以单击垂直标尺，然后将其向左拖动以创建一个新部分，这将在顶部分割一个空白部分，在底部分割一个小部分（最好有图片但不允许），然后您可以在部分专家中删除上部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:20:56.537

将“容器”拖到页眉的顶部。然后在“容器”下向上拖动分割线。

# debugging - 为什么生成的随机数不存储在变量中

> ID：14431805
> 
> 赞同：0
> 
> 时间：2013-01-21T02:43:18.637
> 
> 标签：debugging, excel, vba

这是我的代码

```
Sub lab1()

Dim first As Integer
Dim third As Integer
Dim total As Integer

total = 0

For i = 0 To i = 99
    first = Application.WorksheetFunction.RandBetween(1, 100)
    total = total + first
Next i

MsgBox (total)

End Sub 
```

我正在尝试生成 100 个介于 1 到 100 之间的随机数，并将每个数字存储到变量“total”中。我不明白为什么总的值总是低于 100 ，似乎“总”只存储 1 个随机数而不是 100 个随机数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:47:29.170

对于 i = 0 To 99 << 这是需要注意的重要行

```
Dim first As Integer
    Dim third As Integer

    Dim total As Integer

    total = 0

    For i = 0 To 99

    first = Application.WorksheetFunction.RandBetween(1, 100)

    total = total + first

    Next i

    MsgBox (total) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:35:15.597

VBA 期望在 之后有一个数字`To`，因此该行`For i = 0 To i = 99`被解释为`For i = 0 To (i = 99)`，并且由于`i`刚刚使用该值创建`0`，因此表达式`i = 99`等于`False`，并且布尔值`False`转换为`0`。

所以该行`For i = 0 To i = 99`被解释为`For i = 0 To 0`。

# django - 免费 CDN 用于在 heroku 上为 django 存储我的图像和 css 文件

> ID：14431807
> 
> 赞同：2
> 
> 时间：2013-01-21T02:43:27.870
> 
> 标签：django, heroku, amazon-s3

我正在学习在 上部署`django`应用程序。`heroku`从 heroku 网站上的文章和 SO 上的许多帖子中，我了解到这`Amazon S3`是`CDN`. 我知道这对大多数读者来说可能听起来很奇怪。不幸的是我没有信用卡（因为我住的地方和我的银行账户状态等——长篇大论:() 并且无法注册 Amazon S3。有没有我可以使用的免费文件托管网站`MEDIA_URL`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T03:28:36.360

您可能想看看[CloudFlare](http://www.cloudflare.com/)，他们有[CDN 功能](http://www.cloudflare.com/features-cdn)和[免费计划](http://www.cloudflare.com/plans)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:05:21.320

根据您的规模，Google AppEngine 可能是最佳解决方案。

你可以在没有信用卡的情况下注册，如果你构建一个简单的项目来托管和服务你的静态资产，只要你保持在免费的每日限制（存储大小和带宽）之下，他们的基础设施就非常强大。

# python - 如何从具有列表值的字典中检索给定一系列键的所有可能组合

> ID：14431814
> 
> 赞同：4
> 
> 时间：2013-01-21T02:44:23.567
> 
> 标签：python, biopython

例如，我有这本词典

```
d={'M':['ATG'],'D':['GAC','GAT'],'E':['GAA','GAG']} 
```

在给定一系列键的情况下，我希望作为输出的是一个包含所有可能序列的列表。（也可以是一个字符串，其中所有可能的序列都在单独的行“\n”中）

```
sequence = "MDE" 
```

因此，输出应如下所示：

```
['ATGGACGAA','ATGGACGAG','ATGGATGAA','ATGGATGAG'] 
```

到目前为止我尝试过的是以下内容，但当然这不是我想要的：

```
seq_trans = ''

for aa in sequence:
  for k, v in d.iteritems():
    if k == aa:
      for item in v:
        seq_trans= seq_trans + item
print seq_trans 
```

我得到的“MDE”是：

```
'ATGGACGATGAAGAG' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T02:47:31.887

你可以 [`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)在这里使用，它返回输入迭代的笛卡尔积。

```
In [78]: seq="MED"

In [79]: ["".join(x) for x in product(*(d[y] for y in seq))]
Out[79]: ['ATGGAAGAC', 'ATGGAAGAT', 'ATGGAGGAC', 'ATGGAGGAT'] 
```

# c++ - 模板化函数名称查找难题 (ADL)

> ID：14431815
> 
> 赞同：2
> 
> 时间：2013-01-21T02:44:34.083
> 
> 标签：c++, templates, mismatch, argument-dependent-lookup, name-lookup

鉴于以下代码，为什么调用 Generic 函数而不是更具体的基于 SomeClass 的函数？

```
template <typename T>
class SomeClass
{
};

template <typename T>
void foo(T)
{
   std::cout << "foo() Generic - Undesired function\n";
}

template <typename T>
void foo(const SomeClass<T>*)
{
   std::cout << "foo() SomeClass<T> - Desired function\n";
}

int main()
{
   SomeClass<char>* sc = new SomeClass<char>();
   foo(sc);
   return 0;
} 
```

注意：如果我要从 " `void foo(const SomeClass<T>*)`" 定义中删除 const，则会调用所需的函数。我也尝试过重新排列 foo，尽管它没有任何影响。如果可能的话，请一些人引用标准中描述此特定 ADL 场景的相关区域。

带常量：http: [//ideone.com/DIchLl](http://ideone.com/DIchLl)

没有常量：http: [//ideone.com/Iam4LV](http://ideone.com/Iam4LV)

使用 const（第 1 次）：http: [//ideone.com/W6PoJw](http://ideone.com/W6PoJw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:46:54.363

因为没有的`const`需要更少的转换。当编译器选择重载时，它首先查找完全匹配的，然后按特定顺序进行一系列转换，找到的第一个就是使用的那个。

在此示例中，`sc`是`SomeClass<char>*&`. 编译器首先尝试完全匹配，因为没有，它会尝试删除`&`. 因为它找到了一个，所以它停止查找，并且不添加`const`允许它看到另一个的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T02:47:24.887

`foo(T)`与`T`=的参数完全匹配`SomeClass<T>*`。

`foo(const SomeClass<T>*)`需要资格转换（添加`const`限定符）。

精确匹配优于需要任何类型转换的匹配，即使它只是限定转换。

# html - CSS样式占位符文本

> ID：14431818
> 
> 赞同：2
> 
> 时间：2013-01-21T02:44:39.443
> 
> 标签：html, css

我正在尝试设置占位符文本的样式，但似乎无法选择它。如果我的输入是这样的：

```
<input id="search" class="search-query" placeholder="Placeholder text here" name="" value""> 
```

如何在 CSS 中选择占位符文本进行样式设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T02:47:20.697

```
::-webkit-input-placeholder {
   color: red;
}

:-moz-placeholder { /* Firefox 18- */
   color: red;  
}

::-moz-placeholder {  /* Firefox 19+ */
   color: red;  
}

:-ms-input-placeholder {  
   color: red;  
}

/* All modern browsers except IE and EDGE */
::placeholder { color: red } 
```

演示：http: [//jsfiddle.net/DLGFK/](http://jsfiddle.net/DLGFK/)

# java - css上的Spring资源映射问题

> ID：14431820
> 
> 赞同：0
> 
> 时间：2013-01-21T02:45:07.337
> 
> 标签：java, spring, jsp

```
<resources mapping="/resources/**" location="/resources/" />
<resources mapping="/css/**" location="/resources/css/" />
<resources mapping="/swf/**" location="/resources/swf/" />
<resources mapping="/images/**" location="/resources/images/" /> 
```

这是我在 Spring MVC 项目中的资源映射。我先后在jsp加载了一些图片。但是，我无法使用“../images/blah.png”在css中加载背景图像有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:20:10.707

这是背景标签问题。

```
background-image -> background 
```

# php - 表单字段不保留输入数据

> ID：14431821
> 
> 赞同：1
> 
> 时间：2013-01-21T02:45:08.303
> 
> 标签：php, forms, input, field, isset

我似乎无法弄清楚为什么当我提交表单并返回错误消息时，它没有保留我在字段中输入的内容。这是我的输入字段的示例：

```
<input type="text" value="<?php if (isset($_POST['the_field'])) echo $_POST['the_field'];?>" name="the_field" id="the_field"/> 
```

我正在使用会话来处理错误消息。但我不认为这会有所作为，对吧？有任何想法吗？

我的表格的一部分：

```
<form action="process.php" method="post" name="edit" id="edit">
<input type="text" value="<?php if (isset($_POST['name']))  echo htmlentities($_POST['name']);  ?>" name="name" id="name" class="text" tabindex="1"/>
<input type="text" value="<?php if (isset($_POST['the_field'])) echo $_POST['the_field'];?>" name="the_field" id="the_field"/>
<input type="hidden" value="Create" name="action"/>
<input type="submit" class="btn" value="Create New Project" />
</form> 
```

我的 PROCESS.PHP 的一部分：

```
if(isset($_POST)){
    switch($_POST['action']){   
        case 'Create':
        $client = $_POST['client'];
            if(empty($_POST['name'])){
              $_SESSION['error'] = 'You need to enter a project name!';
              header('location: add.php');
              exit; 
            }
    }
break;
} 
```

您是否认为这是因为在 THE_FIELD 之前处理了 NAME 字段，并且当 NAME 出错时，它没有返回任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:50:12.273

没关系`isset`，要显示您发送的内容，`post`您必须这样写`$_POST['the_field']`：

```
<input type="text" value="<?php echo htmlspecialchars($_POST['the_field']);?>" name="the_field" id="the_field"/> 
```

**更新**

不要`sessions`用于这类事情。

```
if (isset(whatever))
// this 
else
// other 
```

在任何情况下，您都使用值重新填充输入`post`：

```
<input type="text" value="<?php echo htmlspecialchars($_POST['the_field']);?>" 
```

我的意思是你必须`post`在输出 html 之前处理所有的东西。例如：

```
if (isset(whatever))
// echo "you posted whatever, great!"
else
// post "value missing, please try again"
<input type="text" value="<?php echo htmlspecialchars($_POST['the_field']);?>" 
```

`sessions`适合存储永久数据（当然是会话中的永久数据）要警告`users`无效输入，您必须在`post`操作后立即通知他们。无需将信息保存在`sessions`数据中。

总之，执行此操作的正常方法是：

```
<?php
if (input data is valid)
    echo 'valid'
else
    echo 'invalid'
?>
<input value="<?php echo htmlspecialchars($_POST['the_field']); ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:25:50.650

自从我发布到流程页面后，我最终不得不使用会话，这似乎是原因，而不是 SELF。需要更多时间，但可以满足我的需要。

# android - BroadcastReceiver设置忽略了一些东西

> ID：14431825
> 
> 赞同：0
> 
> 时间：2013-01-21T02:45:20.387
> 
> 标签：android, broadcastreceiver

我正在尝试设置一个 BroadcastReceiver 来处理预定的事件。我一直在关注[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)，并且该功能正常工作，或者我相信。有人能帮我找出为什么它现在不起作用吗？

这是接收器：

```
public class ScheduledEventReceiver extends BroadcastReceiver {
private static final String DEBUG_TAG = "ScheduledEventReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    Log.d(DEBUG_TAG, "ScheduledEventReceiver " + intent.getData());
    Intent activity = new Intent(context, Model.class);
    activity.setData(intent.getData());
    context.startService(activity);
}
} 
```

还有一点清单：

```
 <receiver android:name=".receiver.ScheduledEventReceiver" /> 
```

从发送 Intent 的 DialogFragment 中：

```
private void setEventTest(Calendar time) {
    setEvent(getActivity(), Uri.parse("http://teststring"), time);
}

private void setEvent(Context context, Uri data, Calendar when) {
    Intent intent = new Intent(context, ScheduledEventReceiver.class);
    intent.setData(data);
    PendingIntent scheduledEvent = PendingIntent
            .getBroadcast(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager schedule = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);
    schedule.set(AlarmManager.RTC_WAKEUP, when.getTimeInMillis(), scheduledEvent);
} 
```

我认为它不起作用的原因是我从来没有看到 onReceive 的日志输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:42:57.013

检查以确保您的接收器实际上在您的活动的子包中，如果不是，请删除“.receiver”。

```
<receiver android:name=".receiver.ScheduledEventReceiver" /> 
```

# objective-c - 可以在 Objective-C 中通过其字符串名称检索结构属性吗？

> ID：14431826
> 
> 赞同：3
> 
> 时间：2013-01-21T02:45:32.250
> 
> 标签：objective-c

我有一个对象，它的属性是如下结构：

```
struct someStruct{
    float32 x, y;
}; 
```

我想做的是通过字符串调用该结构属性的getter：

```
id returnValue = [theObject performSelector:NSSelectorFromString(@"thePropertyName")]; 
```

但正如您所见，“performSelector:”返回的是一个对象，而不是一个结构。我尝试了所有我能想到的投射方式，但无济于事，这让我觉得我错过了一些东西——也许是一些简单的东西......

任何想法如何将 returnValue 哄回结构？谢谢！

编辑：无论最初的回复者是谁（他后来出于某种原因删除了他的帖子） - 你是对的：根据你的回答，以下内容有效：

```
StructType s = ((StructType(*)(id, SEL, NSString*))objc_msgSend_stret)(theObject, NSSelectorFromString(@"thePropertyName"), nil); 
```

编辑 2：可以在[此处](http://www.sealiesoftware.com/blog/archive/2008/10/30/objc_explain_objc_msgSend_stret.html)找到对该问题的相当详细的了解。

编辑3：为了对称起见，这里是如何通过其字符串名称设置结构属性（请注意，这正是接受的答案完成设置的方式，而我的问题需要对上面第一个编辑中提到的getter略有不同的方法）：

```
NSValue* thisVal = [NSValue valueWithBytes: &thisStruct objCType: @encode(struct StructType)];
[theObject setValue:thisVal forKey:@"thePropertyName"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:08:27.323

您可以使用键值编码通过包装`struct`内部来做到这一点`NSValue`（并在返回时解开它）。考虑一个具有结构属性的简单类，如下所示：

```
typedef struct {
    int x, y;
} TwoInts;

@interface MyClass : NSObject

@property (nonatomic) TwoInts twoInts;

@end 
```

然后，我们可以`struct`在一个`NSValue`实例中包装和解包，以将其传递给 KVC 方法。下面是使用 KVC 设置结构值的示例：

```
TwoInts twoInts;
twoInts.x = 1;
twoInts.y = 2;
NSValue *twoIntsValue = [NSValue valueWithBytes:&twoInts objCType:@encode(TwoInts)];
MyClass *myObject = [MyClass new];
[myObject setValue:twoIntsValue forKey:@"twoInts"]; 
```

要将结构作为返回值，请使用`NSValue`'s`getValue:`方法：

```
TwoInts returned;
NSValue *returnedValue = [myObject valueForKey:@"twoInts"];
[returnedValue getValue:&returned]; 
```

# ruby-on-rails - Heroku] 处理数据库

> ID：14431830
> 
> 赞同：1
> 
> 时间：2013-01-21T02:46:12.703
> 
> 标签：ruby-on-rails, database, postgresql, heroku

我最近在处理 heroku postgresql 数据库时遇到了一个问题。

我想更新某个用户的属性（让他成为管理员），所以我从 heroku 中提取了数据库以在本地更新他的属性并再次将其推回。

```
heroku db:pull
UPDATE users SET user_type = 'admin' WHERE name = 'thisuser'; //in postgres
heroku db:push 
```

然后，出现了下面的问题。

```
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: PGError: ERROR:  time zone displacement out of range: "2013-01-21 12:00:00.000000+5895153600"
LINE 1: ....facebook.com/thisuser', 'facebook', '2374538475', '2013-01-2... 
```

所以我再次运行以下命令以从错误中恢复。

```
heroku db:pull
heroku db:push 
```

这导致从生产和开发中清除我的整个数据库。我有两个问题要问。

1.  **在 Heroku 环境中更新某些用户的属性的正确方法是什么？仅仅为了更新一个小对象的一个​​属性而拉动整个数据库似乎有点太多了。**
2.  **为什么我的行为会导致数据库中的所有内容都被清除？**

谢谢您的帮助。我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:09:27.980

对于您的命令，我建议您[在控制台中](https://devcenter.heroku.com/articles/one-off-dynos)执行此类小操作：

```
$ heroku run rails console 
```

您可以像在本地计算机上一样键入一次性命令。

关于不稳定性：显然这是Ruby 1.9.3 上 Heroku的一个[错误。](http://zaiste.net/2012/07/heroku_taps_pgerror_time_zone_displacement_out_of_range/)在 1.9.2 上，您不会遇到问题。所以如果你使用 rbenv 或 rvm，你可以在执行 heroku 之前切换 rubies。您甚至可能想编写一个小 shell 脚本，例如：

```
#!/bin/sh
#safe_heroku.sh
HEROKU_CMD=/usr/local/heroku/bin/heroku   # Check which heroku
RBENV_CMD=/usr/bin/rbenv                  # Check which rbenv
SAFE_RUBY_VERION=1.9.2                    # Check rbenv versions 

$RBENV_CMD shell $SAFE_RUBY_VERSION
$HEROKU_CMD "$@" 
```

用法：

```
$ safe_heroku rake db:push   # Or whatever command you want to run... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:13:50.453

我同意上面的答案，但是我尝试使用 ruby​​ 安全地进行我需要的任何更改，例如为我会做的用户添加角色：

```
$ heroku run console
user = User.find(1)
Role = Role.find(1)
user.roles << role 
```

或者在你的情况下

```
user = User.find_by_name('user name')
user.user_type = 'admin'
user.save! 
```

使用经过测试的代码进行更新而不是破解数据库更安全。

# java - Swixml xml 文件捆绑在 jar 中

> ID：14431834
> 
> 赞同：1
> 
> 时间：2013-01-21T02:47:05.243
> 
> 标签：java, embedded-resource, swixml

我正在使用 swixml 从 xml 文件创建 UI。当我使用 eclipse 运行程序时，它运行良好。但是，当我制作一个 jar 时，swixml 会抛出一个文件未找到类型异常。但是，如果我将 xml 存储在 jar 之外并在同一目录中，它会奇迹般地工作。我对如何让它发挥作用有点不知所措。

我使用 sax builder 来读取 xml。视图位于 jar 中的目录 views/ 中。我验证了目录结构确实存在于生成的 jar 中。

# c# - 将变量传递给已经打开的窗口

> ID：14431839
> 
> 赞同：0
> 
> 时间：2013-01-21T02:47:33.217
> 
> 标签：c#, wpf

上下文：使用文本输入创建自定义 MessageBox

如何从自定义 MessageBox 窗口将变量传递回原始窗口？我知道在打开一个新窗口时如何执行此操作，但不是已经打开了一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:00:55.100

你能不能只在消息框关闭时从消息框中获取数据

```
var msgBox = new MyMessageBox();
If (msgBox.ShowDialog(blah, blah, etc) == true)
{
   var dataBack = msgBox.PropertyThatHasInfo;
} 
```

要从您的窗口返回 DialogResult，您只需根据用户交互设置 DialogResult 布尔值

例如：

```
 public class MyMessageBox : Window
   {

        private void OK_Click(object sender, RoutedEventArgs e)
        {
            DialogResult = true;
        }

        private void Cancel_Click(object sender, RoutedEventArgs e)
        {
            DialogResult = false;
        }
   } 
```

# svn - SVN 分支中的廉价副本（硬链接）

> ID：14431840
> 
> 赞同：1
> 
> 时间：2013-01-21T02:47:40.823
> 
> 标签：svn, branch, commit, hardlink

我读到 SVN 的“分支”使用修订版的廉价副本（硬链接）。链接在这里。[http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html) “创建分支”一章处理了这个问题。

但是这本书还说“就 Subversion 而言，这两个提交影响了不同存储库位置的不同文件。” 在“使用您的分支”一章中。

我认为这些是矛盾的。如果分支是主干中修订的硬链接，则对分支的提交应该会影响主干，更不用说分支本身了。

“两个提交影响不同存储库位置的不同文件”怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:53:55.993

是的，SVN 使用类似于硬链接的东西来引用相同版本的文件。但是，一旦您修改了文件，它就会从该硬链接中分离出来，以创建该特定文件的修订版。分支的问题是大多数时候您只更改数百个文件中的几个。因此，与“廉价复制”的处理是使分支既节省时间又节省存储。

正如您所指的文件所说：

> Subversion 的存储库有一个特殊的设计。当您复制一个目录时，您不必担心存储库会变得庞大——Subversion 实际上不会复制任何数据。相反，它会创建一个指向现有树的新目录条目。如果您是一位经验丰富的 Unix 用户，您会认识到这与硬链接背后的概念相同。
> 
> **随着对复制目录下的文件和目录的进一步更改，Subversion 继续尽可能地使用这个硬链接概念。只有在需要区分不同版本的对象时，它才会复制数据。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:19:33.693

在'svn copy'之后，分支实际上是一个修订的硬链接。

但是，如果某些内容被提交到该分支，则会通过“冒泡”方法创建一个新修订版。因此，该分支不再是简单的硬链接。

关于[“冒泡”](http://svn.apache.org/repos/asf/subversion/trunk/notes/subversion-design.html#server.fs.struct.bubble-up)的文件有很大帮助。

# c - 新变量指向旧变量

> ID：14431842
> 
> 赞同：0
> 
> 时间：2013-01-21T02:48:01.373
> 
> 标签：c, pointers, variable-assignment

免责声明：我对 C 很陌生。我试图找到答案，但我的 google-fu 惨遭失败，因为我不完全知道我应该用于搜索的术语......

目前，我遇到了一个相当出乎意料的问题，代码`int a = 100;`使结构内的整数也改变了值。

从调试器中，我可以看到 a 和 s->pos 都指向同一个值。这是我的代码的净化版本。

```
typedef struct {
    char data[4096];
    int start;
    int end;
} buffer;

typedef struct {
    int * data;
    int length;
} data_format;

buffer * create_buffer() {
    buffer result;
    result.start = -1;
    return &result;
}

data_format * method(buffer * s) {
    data_format result = (data_format) { malloc(100), 0 };
    ... // POINT1
    int a = 100;
    ... // POINT2
}

int main(int argc, char **argv) {
    buffer * s = create_buffer();
    data_format * df = method(s);
} 
```

从调试器中，我可以看到在标有 的行中`// POINT1`，`a`是 -1；在`// POINT2`，两者`a`和`s->start`现在都是 100。

声明不应该`int`在尚未被任何东西使用的内存点中创建一个变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:28:47.347

您通过在 中返回其地址违反了局部变量的范围`create_buffer`。

局部变量是在栈上创建的，栈在每次函数调用时都会被复用。通过返回 in 的地址，`result`您`create_buffer`可以保存 C 仅在函数执行期间保留供您使用的一段内存的地址`create_buffer`。当它终止时，该内存被重用。在这种情况下，当您调用时，它是否与您的变量`method`对齐。`s`您需要动态分配您的返回变量`malloc`

根据您的编译器，您应该会收到有关返回局部变量地址的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T03:26:54.043

请原谅我的无知，但是在 C 中，`create_buffer`甚至可能吗？您正在`result`堆栈上创建，然后返回一个指向它的指针。被执行后不会`result`被销毁吗？`create_buffer`所以现在`s`指向'垃圾'。也许，就像 aib 在评论中所说，它指向的内存地址恰好是`a`.

相反，`create_buffer`如果`malloc`,`buffer`那么你可以安全地返回一个指向它的指针。

# python - Python 正则表达式不匹配

> ID：14431843
> 
> 赞同：0
> 
> 时间：2013-01-21T02:48:22.080
> 
> 标签：python, regex, string

```
import re
str2='hello: acb cross'
reg = re.compile('hello: (a*) cross')
m = reg.search(str2)
print m
if m:
   nat= m.group(0)
   print(nat) 
```

在上面的片段中，我期望输出是“你好：acb cross”，如果我使用 group(1)，它应该是“acb”。但我没有得到任何。print m 返回无。谁能告诉我它不起作用的原因。

但是，如果我尝试这样的事情，它会起作用：

```
import re
str1 = "carter notes: dependent on stems"
r = re.compile('carter notes:(.*)stems')
m = r.search(str1)
if m:
   lx = m.group(1)
   #print(m.group(0))
   print(lx) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:50:27.467

`a*`表示“任意数量的`a`s”。

`.*`意思是“任意数量（任意单个字符）”。

您的意思是“一个`a`，后跟任意数量的（任何单个字符）”；那就是`a.*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:00:28.950

尝试这个：

```
str2='hello: acb cross'
reg = re.compile('hello: (a.*?) cross') 
```

# jquery - Jquery 滑块不起作用 - 显示所有图像

> ID：14431845
> 
> 赞同：0
> 
> 时间：2013-01-21T02:48:37.173
> 
> 标签：jquery, jquery-slider

我在[cascadesdev1.wpengine.com中有一个 JQuery 滑块](http://cascadesdev1.wpengine.com)

它垂直显示所有图像，当我应用时`<style="overflow:hidden;">`，滑块只停留在第一张图像上，不滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:58:53.273

有时，我们自己编写动画而不是使用插件更容易......

看看这个小提琴：http: [//jsfiddle.net/promatik/p8SYJ/](http://jsfiddle.net/promatik/p8SYJ/)

```
setInterval(scrollImage,2500);

function scrollImage() {
    actual = (actual == nImages-1) ? 0 : actual+1;
    $('.slider').animate({ top: -250*actual+'px' }, 800, 'easeInOutBack');
}; 
```

由于您想要在图像之间进行简单的过渡，您可以创建自己的 jquery 动画，并自定义间隔时间（2500ms）、过渡时间（800ms）和效果，我使用了 easeInOutBack，但您可以使用简单的 easeOutQuad 甚至是令人惊叹的 easeOutBounce。试试看...

# android - android如何给出正确的convertView

> ID：14431846
> 
> 赞同：2
> 
> 时间：2013-01-21T02:48:39.513
> 
> 标签：android, android-listview, android-adapter

[我按照https://nodeload.github.com/necronet/section-list/zip/master](https://nodeload.github.com/necronet/section-list/zip/master)的说明实现了部分列表视图。一切正常，但出于好奇，我想知道 Android 操作系统如何`getView`在适配器的功能中给我正确的 convertView （下面的代码）。有两种类型的视图（两种不同的布局文件），一种是SectionView 和ItemView。想象一种情况，当一个拳头部分和一个项目滚动出屏幕时，视图回收器中有两个视图。然后将要从底部滚动一个新视图。在`getView`函数中，我必须通过函数检查位置`isSection`, 以确定我应该在那个位置给出什么观点。令人惊奇的是，Android OS（或任何底层）总是给我正确的 convertView（在 Recycler 中的两种视图中）来回收，它是如何在我检查之前知道的？谢谢。

```
 public View getView(final int position, final View convertView,
                        final ViewGroup parent) {
        if (isSection(position)) {
            return getSectionView(convertView, sectionPositions.get(position));
        }
        return getItemView(getLinkedPosition(position), convertView,
                parent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:01:40.893

这是我对`getView`适配器如何工作的理解：

这将返回列表中特定项目的视图“类型” - 并因此使用正确`convertView`的`getView()`

```
@Override
public int getItemViewType(int position) {
    return 0;
} 
```

这将返回有多少种不同类型的视图：

```
@Override
public int getViewTypeCount() {
    return 0;
} 
```

当然，这些不会以正确的代码返回 0。

# java - “双重铸造”

> ID：14431857
> 
> 赞同：14
> 
> 时间：2013-01-21T02:51:18.670
> 
> 标签：java, casting

我目前正在辅导一名 AP Java 高中生，她问我一个关于“双重铸造”的问题。我以前从未听说过这个学期，但显然她的老师希望她在即将到来的期末考试中知道它。

她的老师提供的示例是，如果您想将 Integer 转换为 String，则必须执行以下操作才能避免编译器错误：

```
Integer i = new Integer(5);
String s = (String)(Object) i; 
```

问题是：你什么时候想在现实生活中这样做？

老师只提供了导致运行时错误的示例。另外，我从来不知道有这个术语，但这样做似乎是个坏主意，因为当这两种类型不兼容时只会出现错误。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T03:19:55.653

虽然“双重转换”当然不是一个常用术语，而且您似乎也不应该对引用进行任何类型的转换，但您应该知道会发生什么（a `ClassCastException`）。

为了完整起见，在某些情况下它不会 CCE：

*   如果值实际上是`null`.
*   涉及原语的东西。（呃，`Object`to `Integer`to [unboxing] `int`，或者`int`to [lossy] `byte`to [positive] `char`）
*   更改泛型类型参数。`List<String>`到`Object`到`List<Integer>`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T02:56:45.110

是的，我很确定这不是一回事。没有理由需要双重转换 - 它可能会消除有关不安全转换的编译警告（在这种情况下，您可能做错了），但否则这是不对的。

我的意思是，有自动`toString`调用 eg `println("" + i)`，但即使那样你也不需要先转换为对象......

**编辑**：阅读汤姆的回答后，我突然不确定这个答案 - 原语和（特别是）泛型实际上可以使用它。我现在没有能力测试任何东西，但是任何阅读这个答案的人都应该**看看**他的（并且可能会赞成）。

但是，我将坚持没有（或至少极少且相差甚远）*充分的*理由这样做，并且提供的示例肯定与此无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-10T01:16:30.190

确实，在大多数情况下，双重转换会导致 a `ClassCastException`，但也有一些特殊情况。正如其他答案中提到的，它对于处理原语和泛型很有用，但是当编译的类不一定代表运行时类时也可以使用它。当涉及 ASM 字节码类转换器时尤其如此。

例如，我将使用[Mixin](https://github.com/spongepowered/Mixin)框架。以下代码将`Foo`在运行时注入到类中。我不会详细说明它是如何工作的。

```
@Mixin(Foo.class)
public class MixinFoo {

    public Foo bar() {
        return (Foo) (Object) this;
    }
} 
```

的编译时类型`this`似乎是`MixinFoo`，但这个方法实际上是动态插入的，所以在运行时，它会是`Foo`. 编译器不知道这一点；我们必须将其强制转换为`Foo`，但这也会导致编译器错误。

先转换`Object`为`Foo`（双重转换）将解决编译器的问题。请记住，如果该方法未在运行时应用，这将导致运行时错误。

当然，这远远超出了 Java 入门的技能水平。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T02:56:41.473

当然，虽然这只是避免了编译器错误，但运行时错误肯定会发生。此外，如果两个类在继承层次结构中，则无需向下转换为基类并再次向上转换。

即使在上面的问题中，最终也需要一个API方法来转换对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-05T20:04:21.443

我最近遇到了这个问题并使用它。我有一个包含 2 个整数值和一个字符串的对象数组。当我来解压它时，我需要将整数转换为双精度以进行一些除法。

问题是，当我将整数值转换为加倍时会出错，因为 Java 会自动将其检测为`Integer`对象而不是`int`原始对象，并且您无法从整数转换为加倍。

因此，解决方案是`(double)(int)value`在进行除法之前使用。

所以总结一下，如果你将 int 存储为对象，并且你想将它转换为 double 以进行某些除法，java 会自动将它转换为 Integer，从而无法进行除法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-16T14:29:43.523

一个真正的用例是：

```
static class Y extends X<Date> {
//some code
}

List<Y> n = new ArrayList<>();

someMethod((List<X<Date>>)(List<?>) n); 
```

在哪里

```
void someMethod(List<X<Date>>){
//some code
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-08T08:30:52.100

这是我遇到的一个简单的现实世界示例，您需要帮助编译器理解它应该在强制转换之前自动装箱：

```
class NumberConverter<F extends Number, T> {

    public T convertNumber(F value) {
        if (targetType.equals(Integer.class) || targetType.equals(int.class)) {
            return (T) (Object) value.intValue();
        }

        (..)
    }
} 
```

您不能直接转换为 T，但可以转换为 Object，这会导致 JVM 在将其转换为 Object 之前对其进行自动装箱。然后你可以毫无问题地转换为 T 。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-29T16:54:54.817

是的，当您需要处理已擦除泛型和类型标记的交集时。

假设您想要一个在编译时和运行时都是类型安全的通用函数。所以你用类型标记声明它：

```
public static <T> T getT(
    ExampleDataSource exampleDataSource,
    String key,
    Class<T> typeToken) {

    // code goes here...
} 
```

只要您只尝试从数据源中检索非泛型类型，这将非常有效。例如：

```
String string = getT(source, "some-string", String.class);
int integer = getT(source, "some-integer", Integer.class);
DateTime dateTime = getT(source, "some-datetime", DateTime.class); 
```

但是，如果您想`List<String>`从数据源中获取信息，会发生什么？好吧，它的语法是一个非常丑陋的双重转换。它还要求数据源能够自己找出擦除的类型，因为它在运行时不存在于类型标记中，尽管进行了强制转换：

```
List<String> listOfString = getT(
    source,
    "some-list-of-strings",
    (Class<List<String>>) (Class) List.class
); 
```

为什么 Java 不允许一步`List.class`直接转换为（虚构的）类型`Class<List<String>>`，我无法告诉你。我希望 Java 在未来的某个时候能够具体化泛型类型。然后`List<String>.class`将是一个有效的类型标记，并且您不需要任何转换，更不用说奇怪的双重原始到假通用转换了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-21T03:25:37.943

也许这个问题是逻辑？我的意思是，有一种方法可以计算一些东西（使用整数）并返回对象，以及将结果转换为字符串的方法的使用，通常这个方法可以被覆盖几次，像这样的功能在 Java 1.5 之前使用过你是否定义了 Generic calss（但没有泛型）并且每个方法的返回都是对象，因为有几个孩子，每个都可以返回自己的类型，我不知道但可以回答，像这样的双重转换

```
public class Main {
    public static void main(String[] args) {

        AbstractToDO abstractToDO2 = new SomeToDoTwo();
        String result2 = (String) abstractToDO2.toDo(); // here is second, all is good

        System.out.println(result2);

        AbstractToDO abstractToDO1 = new SomeToDoOne();
        String result1 = (String) abstractToDO1.toDo(); // here is second, Runtime error

        System.out.println(result1);

    }

    Object onePlusOne(){

        return 1+1 +" ";
    }
}

interface AbstractToDO{
     Object toDo();
}

class SomeToDoOne implements AbstractToDO{
    @Override
    public Object toDo() {
        return (Object)(1+1); // here is first casting, // we can use without (Object) casting
    }
}class SomeToDoTwo implements AbstractToDO{
    @Override
    public Object toDo() {
        return (Object)"1+1"; // here is first casting, // we can use without (Object) casting
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-06-22T18:42:08.833

尽管双重转换在程序员看来似乎是多余的，但至少了解语法的工作原理可以帮助您理解 Java 的底层工作原理。

例如：

假设 an`Animal`是一个类的超`Dog`类。我们知道`Object`类是所有类的超类。

```
Dog d = new Dog(); 
Object a = d;          //no errors occur 
```

在这里，`d`被隐式转换为`Object`对象。明确地说，这将是`Object a = (Object)d;`

这里怎么样？

```
Dog d = new Dog(); 
Object a = (Animal)d;  //no errors occur 
```

我们将其转换`d`为`Animal`对象，但编译器将其隐式转换为`Object`对象。双铸。

`d`最终被选为哪一个？

明确地说，这将是`Object a = (Object)(Animal)d;`

知道双重转换的语法，我们会知道`d`最终会被转换为`Object`，因此不会发生错误。

# matlab - 检查单元格中的条目是否在单元格数组中

> ID：14431860
> 
> 赞同：0
> 
> 时间：2013-01-21T02:51:35.573
> 
> 标签：matlab, cells

假设我有一个细胞

`A = {[3,0], [2,1]}`

和一个单元阵列

```
B = {[4,-1],[3,0];      
      [-1,4],[-3,5];
      [3,0],[2,1];
      [2,1],[-1,4]}. 
```

我想找到第一个或第二个条目都出现的索引，`A`不`B`包括`B`两个条目都`A`出现的行。

在这个例子中，我应该得到`[1 4]`类似`B`. 我一直在尝试解决这个问题`cellfun`，`cell2mat`但一直在跌跌撞撞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:36:52.727

又快又脏：

```
C=zeros(size(B));

for i=1:size(C,1);
    for j=1:size(C,2);
        for k=1:length(A);
            C(i,j)=C(i,j)+isequal(B{i,j},A{k}); % Does element k of A match?
        end;
    end;
end;

find(sum(C')==1) % Sums the rows and finds the rows with only one match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:04:13.103

我会通过将单元格数组转换为适当维度的数值数组来解决这个问题，然后使用`ismember`.

以下示例说明了此方法如何处理问题中的示例元胞数组：

```
%# Build the example cell arrays
A = {[3,0], [2,1]};
B = {[4,-1],[3,0];      
     [-1,4],[-3,5];
     [3,0],[2,1];
     [3,0],[3,0];
     [2,1],[-1,4]};

%# Get the number of elements in A, and the length of the first element
K = size(A, 2);
J = length(A{1, 1});

%# Convert cell arrays to usefully shaped numerical matrices
ANumVec = cell2mat(A);
ANum = reshape(ANumVec, K, J)';
BNum = cell2mat(B);

%# Find matches of 1*2 vectors in ANum in sets of two columns of BNum 
I1 = ismember(BNum(:, 1:J), ANum, 'rows');
I2 = ismember(BNum(:, J+1:end), ANum, 'rows');
I3 = ismember(BNum, ANumVec, 'rows');

%# Find all indices where there was exactly 1 match (ie omit cases of no matches and cases of 2 matches)
MainIndex = I1 + I2;
MainIndex(I3) = 0;
Soln = find(MainIndex > 0); 
```

几点：

1) 该方法查找 的`B`元素`A`位于 的第一列或第二列的所有行的索引`B`，*不包括*`A`与 的行完全对应的情况`B`。

2) 如果. 中有多行，此方法将失败`A`。但是，它`A`对于大小为 1*N 的元胞数组是稳健的，其中 N 表示任意数量的 1*2 数值向量。`A`因此，可以通过首先重塑为 1*N 单元阵列来规避单行限制。

3) 使用逻辑运算符测试等价性`==`。这对于浮点数可能很危险，除非您有理由先验地相信您的输入不会出现任何浮点错误。

4) I can't shake the feeling that there is a much more efficient way to solve this problem, but that I'm not seeing it at the moment. :-)

# git - 如何在 git 中将 2 个分支从本地推送到远程仓库？

> ID：14431868
> 
> 赞同：11
> 
> 时间：2013-01-21T02:52:49.270
> 
> 标签：git

我在本地有 2 个分支机构，例如：

> *   第一应用
> *   第二应用

如何将它们都推送到远程仓库？我还需要在远程创建两个分支吗？

非常感谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T03:20:30.487

您可以通过执行以下命令来完成。

git push [远程名称] [branch1] [branch2]

例如，如果您想要两个将分支 FirstApp 和分支 SecondApp 放到远程源，您可以执行

```
git push origin FirstApp SecondApp 
```

如果要推送更多分支，只需将需要推送的分支名称添加到末尾即可。

有关 git 的更多信息。您可以从以下链接查看这本书 - [http://git-scm.com/book](http://git-scm.com/book)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T06:52:21.540

随着[**默认推送策略**](https://stackoverflow.com/a/10002469/6309)的最新变化，我建议：

```
 git push -u origin FirstApp
 git push -u origin SecondApp 
```

这样，即使使用新的“简单”策略，它也会推送并创建一个以本地分支命名的上游分支。

现在请记住，如果您克隆回远程仓库，它**不会为所有远程分支创建本地分支**：请参阅“[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches)”。

要查看您的分支是否在新克隆后被推送，请查看以下结果：

```
git branch -a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T02:05:17.547

现在我使用 SourceTree 来帮助管理我的本地存储库。

它有助于通过以下方式推送所有尚未在 repo 中创建的本地分支：

*   按下顶部栏上的按钮
*   检查尚未推送到远程的每个分支的 Push 和 Track 列
*   按确定按钮

# symfony - 使用教义一对一映射的延迟加载

> ID：14431869
> 
> 赞同：20
> 
> 时间：2013-01-21T02:52:52.007
> 
> 标签：symfony, doctrine-orm

我很难为此找到正确的结果。

我有一对一的映射。有两个表：

```
/**
* @ORM\Table(name="users")
* @ORM\Entity
*/
class Users {

   /**
    * @ORM\OneToOne(targetEntity="UsersSettings", mappedBy="user",cascade={"persist"})
   */
   private $userSetting;

   //getters and setters
}

/**
* @ORM\Table(name="notifications_settings")
* @ORM\Entity
*/
class UsersSettings {

   /**
   * @var Users
   *
   * @ORM\OneToOne(targetEntity="Users", inversedBy="userSetting")
   * @ORM\JoinColumns({
   *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
   * })
   */
   private $user;
} 
```

每当我获取如下实体之一时：

```
$q = $this
            ->createQueryBuilder('u')
            ->select('u, r')
            ->leftJoin('u.roles', 'r')
            ->where('u.username = :username OR u.email = :email')
            ->setParameter('username', $username)
            ->setParameter('email', $username)
            ->getQuery(); 
```

Doctrine 立即加入我不想要的 usersSettings 实体：

> SELECT t0.id AS id1, t0.username AS username2, t0.email AS email3, t0.password AS password4, t29.id AS id30, t29.is_notify_by_email AS is_notify_by_email31, t29.user_id AS user_id32 FROM users t0 LEFT JOIN users_settings t29 ON t29.user_id = t0.id 在哪里 t0.id = ？

其他类型的映射喜欢`OneToMany`并`ManyToOne`执行延迟加载，但在一对一映射的情况下，我无法配置为延迟加载。我怎样才能延迟加载这种关系？我正在使用学说 2.3 和 Symfony 2.1

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-05T00:06:46.203

使用提示 HINT_FORCE_PARTIAL_LOAD 来避免延迟加载。

```
...
$qb->getQuery()->setHint(Query::HINT_FORCE_PARTIAL_LOAD, true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-05-29T14:13:08.007

一对一关联的反面不能偷懒。

解释：

> 这是预期的行为。反面没有外键，因此无法决定是否代理它。我们必须查询关联的对象或加入它。请注意，这只影响单值关联的反面，也就是说，实际上只影响双向一对一关联的反面。
> 
> 为什么我们不能在没有 FK 的情况下创建代理？
> 
> 这很简单，在单面为反面的一对多关联中，它包含一个集合。集合可能是空的，也可能不是，但总有一个集合，所以总是把一个代理集合放在那里很容易和正确。
> 
> 如果你有一个单值的一面是反面，你怎么能决定是否放一个代理对象呢？如果没有看到外键，您将无法区分：没有关联对象（因此将代理对象放置在适当的位置将完全是错误的）或存在一个并且它是哪种类型，如果涉及继承（因为放置错误类型的代理也是错误的）。

请参阅[https://github.com/doctrine/orm/issues/4389上的讨论](https://github.com/doctrine/orm/issues/4389)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-19T09:09:44.417

解决方案 1：您可以更改关系的拥有方和反方

解决方案 2：您可以将反面的映射声明为 oneToMany 而不是 oneToOne，然后在 setter（如果需要 setter）中将旧集合替换为仅包含一个元素的新集合，并在 getter 中返回集合的第一个元素（即唯一的元素），像这样：

```
class Users {

    /**
    * 
    @ORM\OneToMany(targetEntity="UsersSettings", mappedBy="user")
    */
    private $userSetting;

    public function setUserSettings(UserSettings $setting): void
    {
        $setting->setUser($this);
        $this->userSettings = new ArrayCollection([$setting]);   
    }

    public function getUserSettings(): UserSettings
    {
        return $this->userSettings->first();
    }
} 
```

在这种情况下，UserSettings 实体保持不变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-26T13:14:50.770

这个问题至少从 2010 年 2 月 21 日就已经知道了 - [https://github.com/doctrine/orm/issues/4389](https://github.com/doctrine/orm/issues/4389)。我们有 7 种解决方法，前 6 种在这里描述 - [https://stackoverflow.com/a/34353840/5735549](https://stackoverflow.com/a/34353840/5735549)

最流行的解决方案的缺点：

1.  “**更改关系的拥有方和反方**”（[https://developer.happyr.com/choose-owning-side-in-onetoone-relation](https://developer.happyr.com/choose-owning-side-in-onetoone-relation)） - 将在拥有方产生额外的 id。例如，用户表将包含不必要的列，如 user_setting_id、user_cart_id、user_notification_settings_id 等。如果您决定对 user 和 user_settings 表使用相同的 id 策略，它看起来会更加错误。users 表中的行将类似于“id=123, user_setting_id=123, user_cart_id=123, ...=123”。

2.  “**将反面更改为 OneToMany 而不是 OneToOne** ” - 如果您以这种方式执行原则架构验证器（控制台原则：架构：验证）将产生错误，如“如果关联 UserSettings#user 是一对一的，那么反面用户#userSettings 也必须是一对一的”，symfony profiler 会在每个请求的“教义/实体映射”部分显示这个错误，它让你对错误有更大的容忍度并学会忽略它们。

具有延迟加载支持的双向 OneToOne 关联的另一个解决方案是“ **OneToMany/ManyToOne 技巧”** - 允许您延迟加载相关实体，将 id 存储在预期的一侧并且没有架构验证错误。

以下是具有相同 id 策略的 user 和 userSetting 的示例：

```
class User
{
    #[ORM\OneToMany(mappedBy: 'user', targetEntity: UserSettings::class, cascade: ['persist', 'remove'], fetch: 'LAZY', orphanRemoval: true)]
    #[ORM\JoinColumn(name: 'id', referencedColumnName: 'id', onDelete: 'CASCADE')]
    private Collection $userSettings;

    public function __construct()
    {
        $this->userSettings = new ArrayCollection;
    }    

    public function setUserSettings(UserSettings $setting): void
    {
        $this->userSettings = new ArrayCollection([$setting]);
    }

    public function getUserSettings(): ?UserSettings
    {
        return $this->userSettings->isEmpty() ? null : $this->userSettings->first();
    }
}

class UserSettings
{
    #[ORM\Id]
    #[ORM\ManyToOne(targetEntity: User::class, inversedBy: 'userSettings')]
    #[ORM\JoinColumn(name: 'id', referencedColumnName: 'id', onDelete: 'CASCADE')]
    private User $user;

    public function __construct(User $user)
    {
        $this->user = $user;
        $this->user->setUserSettings($this);
    }

    public function getUser(): User
    {
        $this->user->setUserSettings($this);

        return $this->user;
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-21T03:00:28.453

您可以在注释中启用关联的[额外延迟](http://doctrine-orm.readthedocs.org/en/latest/tutorials/extra-lazy-associations.html)加载。`fetch="EXTRA_LAZY"`

```
* @ORM\OneToOne(targetEntity="Users", inversedBy="userSetting", fetch="EXTRA_LAZY") 
```

# c++ - 将 c++ char 结构与 ASCII 值进行比较会产生错误

> ID：14431871
> 
> 赞同：0
> 
> 时间：2013-01-21T02:53:45.163
> 
> 标签：c++, arrays

```
if (sale->taxStatus[i] = "y")  // line 44 
```

产生错误：

`y.cpp:44:12: error: request for member taxStatus in sale, which is of non-class type Sale*`

我的结构：

```
struct Sale {
    int quantity[MAX_SALES];
    float unitPrice[MAX_SALES];
    char taxStatus[MAX_SALES]; // MAX_SALES = 10
}; 
```

完整的功能：

```
void total(struct Sale sale[], int sales) {

    int i = 0;
    float subTotal, hst, total = 0;

    for (i = 0; i < sales; i++) {
        subTotal = subTotal + (sale->quantity[i] * sale->unitPrice[i]);
        if (sale->taxStatus[i] = "y")
        {
            hst = hst + ((sale->quantity[i] * sale->unitPrice[i]) * 0.13);
        }
    }

    cout << "\n" << "Subtotal  : " << subTotal << endl;   
    cout << "HST (13%) : " << hst;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:55:38.737

```
if (sale->taxStatus[i] == 'y') 
```

正如@jweyrich 和@AustinPhillips 还指出的那样，您需要双等号（ == ），并且在单引号中比较字符。

单个等号 ( = ) 用于赋值。

例如`s = 5;`

双等号 ( == ) 用于检查两个或两个以上值的相等性。

例如`if( s == d && d== e && e == f && f == b ) { };`

带感叹号 ( != ) 的等号用于检查两个或两个以上值的不等式。

例如`if( s != d && d != e && e != f && f != b ) { };`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:00:48.323

首先，正如已经提到的，`if (sale->taxStatus[i] = "y")`是分配而不是比较！

但主要问题是：`sale`(function parameter) 是一个数组（具有 size `sales`），但是您将它（在`for`主体内部）作为`Sale*`...

正确的访问必须是`sale[i]->taxStatus`因为`i`数组内部的索引点`sale`，而不是`taxStatus`！（顺便说一句，如果`sales > MAX_SALES`你会得到 UB）。那么你需要用来`strcmp`与`"y"`文字进行比较......

# objective-c - 如何从数组中生成随机值而不在 Objective-C 中重复任何值

> ID：14431873
> 
> 赞同：0
> 
> 时间：2013-01-21T02:54:03.530
> 
> 标签：objective-c, xcode

现在我已经设法在我的按钮上显示随机文本，我注意到大多数时候数组中的项目会重复自身。所以我得到类似“abb b”或“acb c”的东西，而不是“abc d”或“acd b”。如何告诉我的 for 循环排除已使用的数组值的索引，这样它就不会重复任何内容？

另外，我如何告诉 for 循环从数组中的某些值而不是从所有值中进行选择，这样我就不必为测验中的每个问题制作一个数组列表？就像我的数组中有 [abcdefg] 一样，我希望问题 1 仅以随机顺序显示 [abce]。

这是我当前的代码的样子：

```
answerList = [[NSMutableArray alloc] initWithObjects:
"a", "b", "c", "d", "e", "f", "g", nil];
    for (int j=0; j<answerList.count; j++)
{
    int k = arc4random() % [answerList count];
    [btnA setTitle:[answerList objectAtIndex:k] forState:UIControlStateNormal];
    [answerList removeObjectAtIndex:k];
    int l = arc4random() % [answerList count];
    [btnB setTitle:[answerList objectAtIndex:l] forState:UIControlStateNormal];
    [answerList removeObjectAtIndex:l];
    int m = arc4random() % [answerList count];
    [btnC setTitle:[answerList objectAtIndex:m]  forState:UIControlStateNormal];
    [answerList removeObjectAtIndex:m];
    int n = arc4random() % [answerList count];
    [btnD setTitle:[answerList objectAtIndex:n] forState:UIControlStateNormal];
    [answerList removeObjectAtIndex:n]; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T05:19:56.620

只需将您的问题转换为洗牌问题。

您可以使用[Fisher-Yates 洗牌算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)来洗牌数组

```
answerList = [[NSMutableArray alloc] initWithObjects:@"a", @"b", @"c", @"d", @"e", @"f", @"g", nil];
for (int i = answerList.count - 1; i >= 0; --i) {
    int r = arc4random_uniform(answerList.count);
    [answerList exchangeObjectAtIndex:i withObjectAtIndex:r];
} 
```

然后从中取出前 n 个对象：您将从原始数组中获得 n 个随机唯一元素。

```
[btnA setTitle:answerList[0] forState:UIControlStateNormal];
[btnB setTitle:answerList[1] forState:UIControlStateNormal];
[btnC setTitle:answerList[2] forState:UIControlStateNormal];
[btnD setTitle:answerList[3] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T04:25:12.397

尝试这个，

```
int random;

NSString *currentText;

nonrepeatingArray = [[NSMutableArray alloc] init];

buttonArray = [[NSMutableArray alloc] initWithObjects:btnA, btnB, btnC, btnD, btnE, btnF, btnG, nil];

answerList = [[NSMutableArray alloc] initWithObjects:"a", "b", "c", "d", "e", "f", "g", nil];

for (int j=0; j<answerList.count; j++)
{
    do {
          random = arc4random()%answerList.count;
          currentText = [answerList objectAtIndex:random];
       } while ([nonrepeatingArray containsObject:currentText]);

    [nonrepeatingArray addObject:currentText];

    UIButton *button = (UIButton *)[buttonArray objectAtIndex:j];

    NSString *title = [answerList objectAtIndex:random];

    [button setTitle:title forState:UIControlStateNormal];  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T03:01:43.587

`while`用于测试随机结果是否有效，这样是一个坏主意。理论上，一串随机数可能会导致 CPU 长时间锁定，尽管可能性不大。如果您可以在每个答案中仅迭代一次循环，那就更好了。

而是尝试制作数组的副本，并在选择下一个项目之前简单地删除您使用过的任何项目。

```
// master answer list
answerList = [[NSMutableArray alloc] initWithObjects:@"a", @"b", @"c", @"d", @"e", @"f", @"g", nil];

// make a copy we can delete from
NSMutableArray *unusedAnswerList = [answerList mutableCopy];

// loop until they are all gone
while([unusedAnswerList count] > 0)
    // get a random index
    int index = arc4random()%[unusedAnswerList count];

    // pull out the value at the random index
    NSString *title = [unusedAnswerList objectAtIndex:index];

    // remove the value we just grabbed.
    [unusedAnswerList removeObjectAtIndex:index];

    // do somehting with the value we jsut grabbed
    [btnA setTitle:title forState:UIControlStateNormal];
    [btnB setTitle:title forState:UIControlStateNormal];
    [btnC setTitle:title forState:UIControlStateNormal];
    [btnD setTitle:title forState:UIControlStateNormal];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T05:13:12.220

```
 numberArray = [[NSMutableArray alloc]initWithCapacity:0];
    for(int i=1;i<=20;i++)
    {
        [numberArray addObject:[NSNumber numberWithInt:i]];
    }

   for (int i = 0;i<[numberArray count];i++,i--,k++)  {
        srand(time(NULL));
        a = rand()%[numberArray count];
        //NSLog(@"a Value :%@",[numberArray objectAtIndex:a]);
        tempStr1 = [numberArray objectAtIndex:a];
        [numberArray removeObjectAtIndex:a];
        b=rand()%[numberArray count];
        //NSLog(@"b VAlue :%@",[numberArray objectAtIndex:b]);
        tempStr2 = [numberArray objectAtIndex:b];
        [numberArray removeObjectAtIndex:b];

        c = rand()%[numberArray count];
        //NSLog(@"a Value :%@",[numberArray objectAtIndex:a]);
        tempStr3 = [numberArray objectAtIndex:c];
        [numberArray removeObjectAtIndex:c];
        d=rand()%[numberArray count];
        //NSLog(@"b VAlue :%@",[numberArray objectAtIndex:b]);
        tempStr4 = [numberArray objectAtIndex:d];
        [numberArray removeObjectAtIndex:d]; } 
```

# java - Eclipse GWT java.lang.NullPointerException

> ID：14431875
> 
> 赞同：0
> 
> 时间：2013-01-21T02:54:18.143
> 
> 标签：java, mysql, eclipse, gwt

我现在对我的代码进行了干净的编译，并且正在使用 WAMPServer。但是，当我尝试从 Eclipse（运行方式，GWT 应用程序）运行我的代码时，我在控制台中收到以下错误：

```
java.lang.NullPointerException
at com.google.gwt.dev.DevMode.validateServletTags(DevMode.java:611)
at com.google.gwt.dev.DevMode.doStartup(DevMode.java:449)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1083)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

这是与第一行相关的代码（为简洁起见，我没有包括其余的代码，如果需要，请告诉我）：

```
"DevMode.java:611"

TreeLogger servletLogger =
    logger.branch(TreeLogger.DEBUG, "Validating <servlet> tags for module '" + module.getName()
        + "'", null, new InstalledHelpInfo("servletMappings.html"));
for (String servletPath : servletPaths) {
  String servletClass = module.findServletForPath(servletPath);
  assert (servletClass != null);
  // Prefix module name to convert module mapping to global mapping.
  servletPath = "/" + module.getName() + servletPath;
  if (servletValidator == null) {
    servletWriter.addMapping(servletClass, servletPath);
  } else {
    servletValidator.validate(servletLogger, servletClass, servletPath);
  } 
```

这是我的

```
AwardTracker.get.xml

<module>
<inherits name="com.google.gwt.user.User"/>
<inherits name="com.google.gwt.user.theme.standard.Standard"/>
<entry-point class="org.AwardTracker.client.AwardTracker"/>

<!--  servelet context - path is arbitrary, but must match up with the rpc init inside java class -->
<!--  Tomcat will listen for this from the server and waits for rpc request in this context -->
<servlet class="org.AwardTracker.server.MySQLConnection" path="/MySQLConnection" />
    <inherits name="com.google.gwt.user.theme.standard.Standard"/>
    <inherits name="com.google.gwt.user.theme.chrome.Chrome"/>
    <inherits name="com.google.gwt.user.theme.dark.Dark"/>
</module> 
```

这是我的

```
web.xml

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

<!-- Default page to serve -->
<welcome-file-list>
    <welcome-file>AwardTracker.html</welcome-file>
</welcome-file-list>

</web-app>

<servlet>
     <servlet-name>mySQLConnection</servlet-name>
     <servlet-class>org.AwardTracker.server.MySQLConnection</servlet-class>
</servlet>

<servlet-mapping> 
    <servlet-name>mySQLConnection</servlet-name> 
    <url-pattern>/org.AwardTracker.AwardTracker/MySQLConnection</url-pattern> 
</servlet-mapping> 
```

任何帮助将不胜感激。

问候，

格林

**答案是：**

WEB.XML 的顺序不正确。它应该是：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app
PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

<servlet>
     <servlet-name>mySQLConnection</servlet-name>
     <servlet-class>org.AwardTracker.server.MySQLConnection</servlet-class>
</servlet>

<servlet-mapping> 
    <servlet-name>mySQLConnection</servlet-name> 
    <url-pattern>/org.AwardTracker.AwardTracker/MySQLConnection</url-pattern> 
</servlet-mapping>

<!-- Default page to serve -->
<welcome-file-list>
    <welcome-file>AwardTracker.html</welcome-file>
</welcome-file-list>    

</web-app> 
```

谢谢，

格林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:29:10.087

请转到“validateServletTags(DevMode.java:611)”并检查该行。尝试打印所有变量。那应该告诉你哪个是空的。

# c# - 如何根据用户重定向到单独的视图？

> ID：14431877
> 
> 赞同：0
> 
> 时间：2013-01-21T02:54:41.670
> 
> 标签：c#, asp.net, asp.net-mvc

这就是我想做的。我在 /Admin/Vendors/Index 有一个页面。如果用户具有特定角色并且他们转到此页面，我希望他们被重定向到仅向他们显示某些数据的另一个视图。

这是我所拥有的：

```
public ActionResult Index()
{
    if (User.IsInRole("Special User"))
    {
        SpecialIndex();
    }

    return View();
}

public ActionResult SpecialIndex()
{
    var viewModel = GetSpecialData();

    return View(viewModel);
} 
```

所以我认为如果用户在角色中并且它调用`SpecialIndex`方法，它会调用方法并将用户发送到`SpecialIndex`视图。

它确实调用了该`SpecialIndex`方法，但是当我调用 时`return View(viewModel)`，它只是返回到该`Index`方法，并且向用户显示了`Index`视图而不是`SpecialIndex`.

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:59:52.043

您应该使用`View()`获取视图名称的构造函数，在这种情况下，您可以明确说明要返回哪个视图，或者使用该`RedirectToAction`方法重定向到`SpecialIndex`操作。查看[文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)

```
public ActionResult Index()
{
    if (User.IsInRole("Special User"))
    {
        return this.RedirectToAction("SpecialIndex");
    }
    return View();
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:07:41.597

检查`User.IsInRole("Special User")`它会解决你的问题。无论哪种方式，您都在为它返回一个视图。

# matrix - 不使用循环的矩阵转置..？

> ID：14431879
> 
> 赞同：0
> 
> 时间：2013-01-21T02:55:13.400
> 
> 标签：matrix

如何在不使用任何循环的情况下转置矩阵。如果它是 nxn，我们可以将对角线作为基元素和移位元素。但是对于 nxm 矩阵，我认为这个解决方案是不可行的。

无论如何，要读取或存储我们需要使用循环对...？？

没有循环的任何解决方案..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:03:45.297

如果您在一开始就知道矩阵的维度，那么您将不需要任何循环。因为您只需交换矩阵位置即可整体转置矩阵。在第一个条件下，即使维度是 mx n，您也不需要循环。

但是如果你一开始不知道矩阵的维数，那么在转置矩阵的过程中，我们肯定需要循环迭代矩阵以读取某个位置并交换到其他位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:04:55.440

为了存储整个转置矩阵，您肯定需要使用循环。这并不是什么大问题，因为存储矩阵无论如何都使用循环，因为您需要遍历矩阵的成员来存储它。

如果您只是阅读它，则可以使用矩阵转置的定义并仅转换索引。例如，在 C 中：

```
int getTransposedElement(int i,int j, int** originalMatrix) {
  return originalMatrix[j,i];
} 
```

如果您使用具有类和多态性的语言，则可以创建一个新的矩阵类来自动执行此操作。这样做的另一个好处是它避免了复制原始矩阵，从而节省了内存并允许对转置矩阵的更改反映在原始矩阵中。

# django - Django 表单不显示 django-generic-ratings

> ID：14431889
> 
> 赞同：0
> 
> 时间：2013-01-21T02:57:44.110
> 
> 标签：django, jquery-ui, django-forms, django-ratings

我浏览了`django-generic-ratings`教程，但我看不到表格。我注册了我的模型如下，

```
from ratings.handlers import ratings
from ratings.forms import SliderVoteForm
ratings.register(Restaurant, score_range=(1, 10), form_class=SliderVoteForm) 
```

我在我看来经过餐厅。我的模板是：

```
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery-ui.js" type="text/javascript"></script>
{% load ratings_tags %}

{% get_rating_form for resturant as rating_form %}
<form action="{% url ratings_vote %}" method="post">
   {% csrf_token %}
   {{ rating_form }}
<p><input type="submit" value="Vote &rarr;"></p>
</form>

{% get_rating_score for restaurant as score %}
{% if score %}
    Average score: {{ score.average|floatformat }}
    Number of votes: {{ score.num_votes }}
{% else %}
    How sad: nobody voted {{ restaurant }}
{% endif %} 
```

当我打开投票页面时，我得到一个没有可见字段或滑块的“投票餐厅”按钮，因此我无法选择任何投票。在“多么悲伤：没有人投票”下方 `|<Restaurant: Lemon >|`。当我按下“投票餐厅”时，它会加载另一个页面，上面写着“缺少必填字段”。

我使用`jquery1.9`和`jquery-ui-1.10`。并且路径是正确的，因为我从浏览器控制台检查它正在加载。

另一件事是我可以从管理页面评价一家餐厅，但它仍然说该餐厅没有投票权。

# jquery - 如何使用 jQuery 从文件中获取图像大小？

> ID：14431893
> 
> 赞同：1
> 
> 时间：2013-01-21T02:58:03.260
> 
> 标签：jquery

我想从文件中获取宽度以将其用作变量。尝试这样做：

```
iconOS_img = new Image();
iconOS_img.src = '/details/images/icon.png';
var iconOS_img_width = iconOS_img.width;

alert(iconOS_img_width); 
```

但是，它返回`0`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T02:59:30.837

您必须等到图像加载。试试这个

```
iconOS_img.onload = function() {
    alert(this.width);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T03:00:28.560

你问得太快了。您必须给图像一些时间来加载。最好是绑定`load`处理程序并在那里读取宽度。

# javascript - jsPDF 损坏的 PDF？

> ID：14431894
> 
> 赞同：3
> 
> 时间：2013-01-21T02:58:08.063
> 
> 标签：javascript, html, pdf, jspdf

我正在尝试使用**jsPDF**创建一个带有 JavaScript 的 PDF 文件。我有一个小测试页。基本上我有一个下载 PDF 按钮，它从一个跨度中获取 base64 图像并将其用于`imgData`. 然后我尝试`addImage`将该图像数据转换为pdf，然后保存。一切似乎都正常，它会生成 PDF 并提示下载。但是，当我尝试使用 xpdf 或 Foxit 阅读器查看 PDF 时，我被告知 PDF 已损坏。**我是否错误地创建了此 PDF？**我的网页很长，所以我把它放在[Pastebin](http://pastebin.com/uzyNLybM)上。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
<script type="text/javascript" src="js/jquery/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="../jspdf.js"></script>
<script type="text/javascript" src="../libs/FileSaver.js/FileSaver.js"></script>
<script type="text/javascript" src="../libs/BlobBuilder.js/BlobBuilder.js"></script>
<script type="text/javascript" src="../jspdf.plugin.addimage.js"></script>
<script type="text/javascript" src="../jspdf.plugin.standard_fonts_metrics.js"></script>
<script type="text/javascript" src="../jspdf.plugin.split_text_to_size.js"></script>
<script type="text/javascript" src="../jspdf.plugin.from_html.js"></script>
<script type="text/javascript" src="js/basic.js"></script>
<title>Sup!</title>
<script>
function changeCan() {
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.fillStyle="#FF0000";
  ctx.fillRect(0,0,128,128);
}
function changeCan3() {
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.fillStyle="#FFFFFF";
  ctx.fillRect(0,0,128,128);
  var image = new Image();
  image.src = document.getElementById("3span").innerHTML;
  ctx.drawImage(image,0,0);
}
function changeCan4() {
  var imgData = document.getElementById("3span").innerHTML;
  window.alert(imgData.length);
  var doc = new jsPDF();
  doc.addImage(imgData, 'JPEG', 15, 40, 128, 128);
  doc.save('Test.pdf');
}
</script>
</head>
<body>
  Yo!<hr>
  <canvas id="myCanvas" width="128" height="128"></canvas><hr>
  <button type="button" onClick="changeCan()">Change Me To Red!</button>
  <button type="button" onClick="changeCan3()">Change Me To Span!</button>
  <button type="button" onClick="changeCan4()">Download Me!</button>
  <hr>
  <span id="3span" style="display:none;">B64 DATA HERE</span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:08:19.527

我有类似的问题，这就是解决它的方法。我使用[了 Blob.js](https://github.com/eligrey/Blob.js)、[canvas-toBlob](https://github.com/eligrey/canvas-toBlob.js)、[FileSaver](https://github.com/eligrey/FileSaver.js/)。我还注意到最新的 BlobBuilder.min.js 不能正常工作，所以我改用了 BlobBuilder.js。

```
var content = canvas.toDataURL('image/jpeg');
var doc = new jsPDF('landscape');
doc.addImage(content, 'JPEG', 0, 0);

var data = doc.output();
var buffer = new ArrayBuffer(data.length);
var array = new Uint8Array(buffer);

for (var i = 0; i < data.length; i++) {
    array[i] = data.charCodeAt(i);
}

var blob = new Blob(
    [array],
    {type: 'application/pdf', encoding: 'raw'}
);

saveAs(blob, filename); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-04T12:57:32.860

我使用了 jsPDF 的 1.3.4 版本，它工作正常

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T13:39:29.203

**我在使用png**图像类型时遇到了类似的问题：使用 Adob​​e Reader 打开时 PDF 已损坏。

将其更改为**jpeg**解决了它！

```
// Before : Corrupted PDF file when opened with Adobe Reader
var imgData = canvas.toDataURL('image/png');
var doc = new jsPDF('p', 'mm');
doc.addImage(imgData, 'png', 0, 0, 210, 295);

// After : Working
var imgData = canvas.toDataURL('image/jpeg');
var doc = new jsPDF('p', 'mm');
doc.addImage(imgData, 'jpeg', 0, 0, 210, 295); 
```

# ruby-on-rails - 保持与 act_as_paranoid 的关联

> ID：14431899
> 
> 赞同：1
> 
> 时间：2013-01-21T02:58:58.887
> 
> 标签：ruby-on-rails, authlogic, acts-as-paranoid, rails-activerecord

我有两个模型，其中一个是用户，另一个是评论。评论属于用户。

```
class User < ActiveRecord::Base
    act_as_paranoid
    has_many :comments
end

class Comment < ActiveRecord::Base
    belongs_to :user
end 
```

当我在控制器中执行 user.delete 时，我得到了设置的 deleted_at 列和隐藏记录的预期结果。

我的问题是用户的评论关联设置为空。所以现在在网站上它显示没有用户拥有评论。我希望评论仍然显示用户名不是“无”或“匿名”等。

查看 github 上的源代码[https://github.com/goncalossilva/rails3_acts_as_paranoid/blob/rails3.2/lib/acts_as_paranoid/core.rb](https://github.com/goncalossilva/rails3_acts_as_paranoid/blob/rails3.2/lib/acts_as_paranoid/core.rb)似乎调用 run_callbacks 反过来导致 Rails 3 回退到 Nullify 默认的关联.

就我而言，我只想在删除时关闭用户帐户。不再出现在查询中，因此 Authlogic 将拒绝它们并且用户索引页面不会显示它们。但仍然允许用户拥有的所有东西仍然归他们所有（因为他们可能会回来，等等）。

还有比acts_as_paranoid更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:16:13.937

而不是去覆盖destroy方法的麻烦，我创建了一个简单地将closed_at设置为时间戳的close方法。如果您将默认范围设置为：

```
default_scope { where("closed_at IS NULL") } 
```

然后该模型将不会显示给包括 User.All 在内的任何查询。您可以删除范围以获得完整的查询，基本上我从 act_as_paranoid 中汲取了这些想法，但更加简化了。问题是，即使 Comments 仍然设置了 user_id，默认范围也会与任何关联负载一起运行。所以说

```
c = Comment.first
c.user 
```

如果 user_id 是一个关闭的帐户，那将输出 nil。在我的情况下，最简单的解决方案是删除默认范围并将我的 Authlogic 函数修改为：

```
def self.find_by_username_or_email(login)
  u = User.find(:first, :conditions => ["lower(username) = ?", login.downcase]) || User.find_by_email(login)
  return u unless u.closed_at  
end 
```

这种方式关闭的帐户无法登录。我在视图中列出用户的任何地方都使用了 hide_closed 范围。

不确定这是否是最好最优雅的解决方案。但就我的目的而言，它有效。

# c - ANTLR 3.4（C 运行时）中的 antlr3NewAsciiStringCopyStream 发生了什么？

> ID：14431902
> 
> 赞同：1
> 
> 时间：2013-01-21T02:59:07.967
> 
> 标签：c, antlr, antlr3

ANTLR 3.2 的 C 运行时发行版曾经有一个函数声明为

```
ANTLR3_API pANTLR3_INPUT_STREAM antlr3NewAsciiStringCopyStream
    (pANTLR3_UINT8 inString, ANTLR3_UINT32 size, pANTLR3_UINT8 name); 
```

在`include/antlr3defs.h`. 还有一些类似的功能，例如`antlr3NewAsciiStringInPlaceStream`，`antlr3NewUCS2StringInPlaceStream`等等。

但在 3.4 版本中，这些功能似乎消失了。它们既没有在任何 .h 文件中声明，也没有编译到库中。

我查看了[3.3](http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.3+Release+Notes)和[3.4](http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.4+Release+Notes)的发行说明以及[常见问题解答](http://www.antlr.org/wiki/pages/viewpage.action?pageId=29131147)，但我找不到任何提及。相反，FAQ 建议（见下文 [2]）：

> **如何从 std::string （或 char* 变量）中获取 pANTLR3_INPUT_STREAM？**
> 职能
> 
> ```
> [1]pANTLR3_INPUT_STREAM
> [2]antlr3NewAsciiStringCopyStream
> ([3]pANTLR3_UINT8 inString, [4]ANTLR3_UINT32 size, [5]pANTLR3_UINT8 name) 
> ```
> 
> 创建一个 ASCII 字符串流作为 ANTLR 3 的输入，复制输入字符串。

我有使用 ANTLR 3 和此功能的旧代码，我无法轻松切换到 ANTLR 4。我可以继续使用 3.2 版本或上面列出的其他功能之一，但很高兴知道发生了什么，并且如何最好地处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:54:21.337

我最近也遇到了这个问题。看起来，您可以使用以下函数来获得相同的功能：

```
pANTLR3_INPUT_STREAM antlr3StringStreamNew (pANTLR3_UINT8 data, ANTLR3_UINT32 encoding, ANTLR3_UINT32 size, pANTLR3_UINT8 name); 
```

对于编码，您将使用`ANTLR3_ENC_8BIT`（或其他方式）

汤姆。

# c# - Windows 8 文件访问和 ms-appx:/// 协议

> ID：14431904
> 
> 赞同：1
> 
> 时间：2013-01-21T02:59:20.190
> 
> 标签：c#, xaml, windows-8

是否可以在不使用“ms-appx:///”协议的情况下访问 Windows 8 C# 中的文件（例如图像、音频和视频）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:16:15.943

如果您正在访问最终用户的图像/等，则可以在没有 ms-appx 的情况下执行此操作（其中文件的类型为 StorageFile）：

```
var fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
BitmapImage img = new BitmapImage();
img.SetSource(fileStream); 
```

如果您包含图像/等。在您的应用程序中，您可以使用 ms-appx 协议。它本质上意味着“从应用程序包中获取它”。但您也可以使用相对路径。请参阅[这篇文章了解如何加载文件资源](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322%28v=win.10%29.aspx)。

# java - 如何使用 JSTL sql:query 访问重复的列名？

> ID：14431907
> 
> 赞同：4
> 
> 时间：2013-01-21T02:59:38.060
> 
> 标签：java, sql, jsp, jstl

出于某种原因，这

```
 <sql:query dataSource="${ds}" sql="select user.id, user.name as userName, city, state, country, country.name as countryName, latitude, longitude, ip, last_visit from user, country where user.country = country.id order by last_visit desc limit 100" var="result"/>
    <c:forEach var="col" items="${result.columnNames}">
        ${col}, 
    </c:forEach> 
```

生产

```
id, name, city, state, country, name, latitude, longitude, ip, last_visit, 
```

这是错误的。我专门重命名了查询中的列。我不知道它是如何找到原始字段名称的。那么如何访问 user.name 的值呢？`${row.userName}`不起作用。

我正在使用 JSTL jstl-1.2.2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T03:19:38.013

不确定这是否会有所帮助，但我读过使用别名并不总是能正常工作。我见过的一个可能的替代方案：

```
 <sql:query dataSource="${ds}" sql="select user.id, concat(user.name,'') as userName, city, state, country, concat(country.name,'') as countryName, latitude, longitude, ip, last_visit from user, country where user.country = country.id order by last_visit desc limit 100" var="result"/>
    <c:forEach var="col" items="${result.columnNames}">
        ${col}, 
    </c:forEach> 
```

希望这可以帮助。祝你好运。

# iphone - 如何根据平台定义相同的宏但不同的值？

> ID：14431913
> 
> 赞同：1
> 
> 时间：2013-01-21T03:00:32.980
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [为 iPad 编译时是否设置了特定的 Xcode 编译器标志？](https://stackoverflow.com/questions/2159951/is-there-a-specific-xcode-compiler-flag-that-gets-set-when-compiling-for-ipad)

我想根据 ipad 或 iphone 定义相同的宏但不同的值。例如，我想为 iphone 定义 THUMB_WIDTH 为 40，但为 ipad 定义为 100。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:11:07.427

是的，这是可能的。首先，您必须了解宏只是在编译时将在您的代码中替换的一些代码。

我认为您想要一个通用应用程序（iPhone/iPad），这意味着您将为两个平台编译和共享相同的代码。所以你不能使用#if 宏来改变这个值。逻辑部分必须在宏中，这样在执行时就知道值，并且会根据您在 iPhone 或 iPad 上执行而改变。

你可以使用类似的东西来做到这一点：

```
#define THUMB_WIDTH (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) ? 40 : 100 
```

# matlab - 将每个列元素除以 MATLAB 中另一列中的对应元素

> ID：14431928
> 
> 赞同：1
> 
> 时间：2013-01-21T03:02:17.777
> 
> 标签：matlab

如果我有一个简单的矩阵

```
A = [1 3 ; 4 3 ; 6 12] 
```

然后走

```
A(:,3) = (A(:,1)+A(:,2)) 
```

那么第 3 列中的每个元素都将包含第 1 列和第 2 列中对应元素的总和。

然而，当我去

```
A(:,3) = (A(:,1)/A(:,2)) 
```

我收到一条错误消息`Subscripted assignment dimension mismatch.`Google 搜索没有显示对此错误消息的启发性解释。这里有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T03:10:00.430

`A(:,3) = (A(:,1)/A(:,2))` 实际上是在做矩阵除法。

我猜你想划分向量的相应元素。在这种情况下，您需要在分区中添加一个点。所以你想要的代码会读...

`A(:,3) = (A(:,1)./A(:,2))`

请参阅[http://www.mathworks.com/help/matlab/ref/arithmeticoperators.html](http://www.mathworks.com/help/matlab/ref/arithmeticoperators.html)以获得很好的解释。

# iphone - 如何将 UITableViewController 链接到多个 ViewController 以及如何调用它们

> ID：14431929
> 
> 赞同：1
> 
> 时间：2013-01-21T03:02:39.077
> 
> 标签：iphone, objective-c, xcode4.5

我正在尝试将单元格从 UITableViewController 链接到 UIViewController，但是每个单元格都必须调用不同的 UIViewController（所以我想我必须为每个视图控制器创建一个链接）而且我不知道如何链接它们通过故事板。

这是我到目前为止所拥有的：

主视图.h

```
@interface MainView : UITableViewController <UITableViewDelegate, UITableViewDataSource>
{
    NSArray *tableData;
}
@property (nonatomic, retain) NSArray *tableData;
@end 
```

主视图.m

```
- (void)viewDidLoad
{
    tableData = [[NSArray alloc] initWithObjects:@"1", @"2", @"3", @"4", nil];
    [super viewDidLoad];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }
    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    UIViewController *anotherVC = nil;
    if (indexPath.section == 0) //here I've also tried to use switch, case 0, etc
    {
        if (indexPath.row == 0)
        {
            anotherVC = [[ViewForFirstRow alloc] init];
        }
    NSLog(@"anotherVC %@", anotherVC); // shows that anotherVC = ViewForFirstRow
    [anotherVC setModalPresentationStyle:UIModalPresentationFormSheet];
    [anotherVC setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self.navigationController pushViewController:anotherVC animated:YES];
    }
}

@end 
```

So, when first row is selected and I didn't link UITableViewController to UIViewController (ViewForFirstRow), it shows a black screen.

如果我将 UITableViewController 链接到 ViewForFirstRow，它会打开视图但没有我在代码中使用的效果`[self.navigationController pushViewController:anotherVC animated:YES];`，所以看起来它调用视图是因为链接而不是因为代码`[self.navigationController pushViewController:anotherVC animated:YES];`

如何通过代码正确调用视图以及我应该在情节提要中使用哪种链接？另外，如何将 UITableViewController 链接到多个 UIViewController（ViewForFirstRow、ViewForSecondRow、ViewForThirdRow 等）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:18:38.377

首先，您不能在情节提要中从单元格（在动态表格视图中）连接转场，您必须在代码中完成。代码应如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if (indexPath.row == 0) {
        UIViewController *anotherVC = [self.storyboard instantiateViewControllerWithIdentifier:@"anotherVC"];
        [self.navigationController pushViewController:anotherVC animated:YES];
    }else if (indexPath.row == 1) {
        UIViewController *someOtherVC = [self.storyboard instantiateViewControllerWithIdentifier:@"someOtherVC"];
        [self.navigationController pushViewController:someOtherVC animated:YES]; 
    } 
} 
```

你不应该对 indexPath.section 做任何事情，因为你的表格视图只有一个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:09:09.723

在情节提要中以模态方式呈现另一个视图控制器，然后使用：

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
  Synergy *objSynergy = (Synergy *)[mainStoryboard instantiateViewControllerWithIdentifier:@"Synergy"];
 [self presentModalViewController:objSynergy animated:YES]; 
```

Synergy 是我的控制器名称 您可以在此处输入您想要显示的控制器名称。

根据您的要求进行更改。并且对于从不同行打开的不同视图控制器

用这个：

```
 if (indexPath.section==0) 
          {
              if (indexPath.row ==0) 
              {
              }
          } 
```

# android - Eclipse Android 自定义活动类文件（新项目的自动生成活动文件的子目录）

> ID：14431934
> 
> 赞同：0
> 
> 时间：2013-01-21T03:03:05.107
> 
> 标签：android, eclipse

当我创建一个“新的 Android 应用程序项目”时，我希望 Eclipse 通过（至少）一个自定义来继续其正常操作。

我希望 Eclipse 使用更完整的 @Overrides 而不仅仅是 onCreate() 创建新的 Activity.Class 文件，例如还提供 onStart()、onResume()、onPause()、onRestart() 等。

换句话说，我想要一个比 Eclipse 已经完成的更详细的 Activity.Class 文件。

更进一步，我还希望 Eclipse 添加我自己的内部类——如果这不是要求太多的话。

简而言之，Eclipse 中是否有我可以针对此自定义进行定制的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:37:56.847

[这](https://www.google.com/url?sa=t&rct=j&q=android%20custumized%20code%20templates&source=web&cd=3&cad=rja&ved=0CEQQFjAC&url=http://es.droidcon.com/wp-content/uploads/2012/12/Custom-Android-Code-Templates.pdf&ei=ZF5QUZX_H4XD4AOu5oDICQ&usg=AFQjCNE8x-0rEdIlkAm5Bz8VR4tCiqaVDw&sig2=p4eNpIWT6Gzrd1uJhpMnjw&bvm=bv.44158598,d.dmg)可能会回答你的问题。在您的 Android SDK 中有一个模板目录，您可以在其中添加或更改 XML 模板。

祝你好运，

血压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:17:49.060

我不知道在“新的 Android 应用程序项目对话框”中完成此操作的方法，但是您可以通过单击源下拉菜单自己为每个活动添加额外的覆盖，然后单击覆盖/实施方法...，然后选择每个方法你想覆盖。

我不确定添加自己的内部类是什么意思。您可以自己轻松地做到这一点，我不确定 Eclipse 可以提供哪些附加功能。

# c# - 如何使此代码在 .NET 3.5 中运行？

> ID：14431935
> 
> 赞同：0
> 
> 时间：2013-01-21T03:03:10.540
> 
> 标签：c#, facebook, dynamic, .net-3.5, facebook-c#-sdk

如何将其转换为在 .NET 3.5 中工作？它由于某种原因无法编译...抱怨“myInfo.data”缺少 .NET 4.0 中使用的 Microsoft CSharp 参考。

```
var auth = new CanvasAuthorizer { Perms = "user_about_me,friends_about_me" };

if (auth.Authorize())
{
    var fb = new FacebookClient(auth.Session.AccessToken);
    dynamic myInfo = fb.Get("/me/friends");
    foreach (dynamic friend in myInfo.data  )
    {
        Response.Write("Name: " + friend.name + "<br/>Facebook id: " + friend.id + "<br/><br/>");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:13:16.367

大概是：

```
var auth = new CanvasAuthorizer { Perms = "user_about_me,friends_about_me" };

if (auth.Authorize())
{
    var fb = new FacebookClient(auth.Session.AccessToken);
    MyInfoType myInfo = (MyInfoType)fb.Get("/me/friends");
    foreach (var friend in myInfo.data)
    {
        Response.Write("Name: " + friend.name + "<br/>Facebook id: " + friend.id + "<br/><br/>");
    }
} 
```

什么类型的 fb.Get 返回？

# c# - 单击行标题时如何强制datagridviewcell结束编辑

> ID：14431936
> 
> 赞同：9
> 
> 时间：2013-01-21T03:03:14.320
> 
> 标签：c#, winforms, datagridview

当用户单击与正在编辑的单元格位于同一行的行标题时，我试图强制`DataGridViewCell`退出编辑模式。作为记录，editmode 设置为 EditOnEnter。

所以我相应地写了以下事件：

```
private void dGV_common_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    dGV_common.EndEdit();   
} 
```

上面的代码没有强制单元格结束编辑模式。虽然下面的代码强制单元格退出编辑模式：

```
 private void dGV_common_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        dGV_common.EndEdit();   
        dGV_common.CurrentCell = null;
    } 
```

它还会取消选择整行，这不是用户单击`RowHeader`.

因此，我的工作如下：

```
private void dGV_customer_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    dGV_customer.EndEdit();
    dGV_customer.CurrentCell = null;
    dGV_customer.Rows[e.RowIndex].Selected = true;
} 
```

当您选择单个行标题时效果很好，但当您尝试通过按住 shift 来选择多个行标题时会失败。

我该如何正确处理这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T10:18:56.207

这周我遇到了完全相同的问题！看来这是 datagridview 中一个有据可查的错误。我不确定它是否已在任何更高版本中得到修复。单击网格时检查行标题并更改编辑模式似乎可行：

```
private void dataGridView_MouseClick( object sender, MouseEventArgs e ) {
  DataGridView dgv = (DataGridView)sender;
  if (dgv.HitTest(e.X, e.Y).Type == DataGridViewHitTestType.RowHeader) {
    dgv.EditMode = DataGridViewEditMode.EditOnKeystrokeOrF2;
    dgv.EndEdit();
  } else {
    dgv.EditMode = DataGridViewEditMode.EditOnEnter;
  }
} 
```

但是，如果您在整个应用程序中使用许多数据网格视图，这仍然是一项令人讨厌的工作，所以如果您发现更好的解决方案，请告诉我。

编辑：[这个问题似乎有类似的解决方案](https://stackoverflow.com/questions/3207420/datagridview-editmode-editonenter-how-to-select-the-row-to-delete-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T09:08:24.573

我找到了一个简单的方法来禁用编辑模式：

```
SendKeys.Send("{TAB}");
SendKeys.Send("+{TAB}"); 
```

它只需按 Tab，然后按 shift+tab

# android - FrameLayout 和 TabHost - 换行/滚动

> ID：14431937
> 
> 赞同：1
> 
> 时间：2013-01-21T03:03:20.927
> 
> 标签：android, android-layout, android-scroll, android-wrap-content

我的布局有问题。在大屏幕上，选项卡内容被包装（在内容的结尾和底部的按钮之间，您只会看到背景）。

另一方面，在小屏幕上滚动条是可见的。有没有办法做一些适合屏幕的技巧？

我的布局如下所示：

```
TabHost (fill_parrent, fill_parrent)
    LinearLayout (fill_parrent, fill_parrent)
        LinearLayout (wrap_content, wrap_content)
        FrameLayout (fill_parrent, fill_parrent)
        TabWidget (fill_parrent, wrap_content) 
```

框架布局代码：

```
<FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:padding="5dp" /> 
```

# c# - 读出百分比的进度条

> ID：14431939
> 
> 赞同：0
> 
> 时间：2013-01-21T03:03:30.383
> 
> 标签：c#

我试图放一个`label1.text = progressbar1.value.ToString();`，但它不会读出它的进展情况。到目前为止，这是我在一些帮助下所拥有的。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);

            label1.Text = progressBar1.Value.ToString();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
        }

        private const Int32 TOTAL_CHECKBOXES = 4;

        private static Int32 s_Checks = 0;

        private void OnCheckedChanged(object sender, EventArgs e)
        {
            if (((CheckBox)sender).Checked)
                ++s_Checks;
            else
                --s_Checks;

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
        }

        private void progressBar1_Click(object sender, EventArgs e)
        {
        }

        private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {
            if (((CheckBox)sender).Checked)
                ++s_Checks;
            else
                --s_Checks;

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
        }

        private void checkBox2_CheckedChanged(object sender, EventArgs e)
        {
            if (((CheckBox)sender).Checked)
                ++s_Checks;
            else
                --s_Checks;

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
        }

        private void checkBox3_CheckedChanged(object sender, EventArgs e)
        {
            if (((CheckBox)sender).Checked)
                ++s_Checks;
            else
                --s_Checks;

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
        }

        private void checkBox4_CheckedChanged(object sender, EventArgs e)
        {
            if (((CheckBox)sender).Checked)
                ++s_Checks;
            else
                --s_Checks;

            progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (checkBox1.Checked || checkBox2.Checked || checkBox3.Checked || checkBox4.Checked == true)
            {
                checkBox1.Checked = false;
                checkBox2.Checked = false;
                checkBox3.Checked = false;
                checkBox4.Checked = false;
            }
        }

        private void clearCheckBoxToolStripMenuItem_Click(object sender, EventArgs e)
        {
            if (checkBox1.Checked || checkBox2.Checked || checkBox3.Checked || checkBox4.Checked == true)
            {
                checkBox1.Checked = false;
                checkBox2.Checked = false;
                checkBox3.Checked = false;
                checkBox4.Checked = false;
            }
        }

        private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close(); 
        }

        private void label1_Click(object sender, EventArgs e)
        {
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            label1.Text = progressBar1.Value.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:25:51.047

```
public Form1()
{
    InitializeComponent();

    progressBar1.Value = s_Checks * (progressBar1.Maximum / TOTAL_CHECKBOXES);
    label1.Text = progressBar1.Value.ToString();

    timer1.Tick += new EventHandler(timer1_Tick);
    timer1.Interval = 1000;
    timer1.Enabled = true;
    timer1.Start();
} 
```

# mysql - MySQL 使用 JOIN 和报告

> ID：14431943
> 
> 赞同：1
> 
> 时间：2013-01-21T03:04:21.973
> 
> 标签：mysql, sql, select, join

所以，我有一个如下所示的 mysql 查询：

```
SELECT rewards.name, redemptions.points, redemptions.value
FROM rewards
INNER JOIN redemptions ON rewards.id = redemptions.reward_id; 
```

问题是它会吐出这样的表格：

```
-----------------------------
| Reward 1 |  500   |  30   |
-----------------------------
| Reward 1 |  500   |  30   |
-----------------------------
| Reward 1 |  500   |  30   |
-----------------------------
| Reward 2 |  100   |  10   |
-----------------------------
| Reward 2 |  100   |  10   |
-----------------------------
| Reward 3 |  250   |  20   |
----------------------------- 
```

等等。理想情况下，我实际上希望它只列出一次，但对某些列求和。例如，它看起来像这样：

```
-----------------------------
| Reward 1 |  500   |  90   |
-----------------------------
| Reward 2 |  100   |  20   |
-----------------------------
| Reward 3 |  250   |  20   |
----------------------------- 
```

它对第三列求和，但只列出前两列一次。我想也许工会会这样做，因为我知道它会忽略重复项，但我认为它在使用工会时也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:05:51.523

使用`SUM`，并记得添加`GROUP BY`：

```
SELECT rewards.name, redemptions.points, SUM(redemptions.value)
FROM rewards
INNER JOIN redemptions ON rewards.id = redemptions.reward_id
GROUP BY rewards.name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:08:11.483

```
SELECT  a.name, b.points, SUM(b.value)
FROM    rewards a
        INNER JOIN redemptions b
            ON a.id = b.reward_id
GROUP   BY a.name, b.points 
```

# kendo-ui - 几次ajaxrequest后剑道拆分器未定义

> ID：14431959
> 
> 赞同：0
> 
> 时间：2013-01-21T03:06:42.920
> 
> 标签：kendo-ui, splitter

我有一个包含左右窗格的拆分器。在左侧窗格中显示导航，当单击某个项目时，与该项目对应的 URL 将被加载到右侧窗格中。我已经成功地做到了这一点，但我注意到在**三个**成功的 ajaxrequest 之后，我的拆分器在第四次点击后是未定义的。

这是我的部分 js： var onPanelItemSelect = function (e) {

```
 var windowPath;

    windowPath = $(e.item).attr('data-value');

    if (windowPath != '#') {
        // get a reference to the splitter
        var splitter = $("#splitter").data("kendoSplitter");
        // load content into the pane    
        splitter.ajaxRequest("#right_pane", windowPath);
    }

    return false;
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:59:16.163

您确定原因是您加载了 3 次局部视图吗？这种行为的原因可能是这些请求实际加载的内容。

著名的问题是使用这些 ajax 请求加载另一个 jQuery，因此所有小部件将从内存中清除，您将开始遇到未定义的问题。

# boost - 根据实际字段值查询提升

> ID：14431960
> 
> 赞同：0
> 
> 时间：2013-01-21T03:06:47.163
> 
> 标签：boost, elasticsearch

嗨 StackOverflowcrowd，

我目前正在为我的网站开发弹性搜索。我的问题是：是否可以根据字段的值来提升查询。

示例：我有一个名为 premiumlevel 的字段。如果“数据行”包含 4 的保费级别，则提升值应为 40，如果为 3，则提升值应为 30，依此类推。提升 = 字段值乘以 10

有没有办法实现这样的查询？我看到了一种对具有范围的日期进行类似查询的方法，但我从未找到将字段的实际值用于提升值计算的示例。

### 编辑：

我想我刚刚找到了我的问题的解决方案。如果我获得了正确的文档，则可以使用 CustomScore 查询来实现我的目标。完成测试后，我将使用我的代码片段编辑此答案。

这是文档段： [http ://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)

PS：老实说，不允许新用户在 8 小时之前回答自己的问题的规则是不合逻辑的/没有效率的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:16:46.100

我能想到的唯一方法是实际索引提升值：

来自文档：[http ://www.elasticsearch.org/guide/reference/mapping/boost-field.html](http://www.elasticsearch.org/guide/reference/mapping/boost-field.html)

```
{
  "tweet" : {
    "_boost" : {"name" : "_boost", "null_value" : 1.0}
  }
} 
```

> 上面的映射定义了一个名为 _boost 的字段的映射。如果 _boost 字段存在于索引的 JSON 文档中，则其值将控制索引文档的提升级别。

# c++ - 结构序列化

> ID：14431961
> 
> 赞同：1
> 
> 时间：2013-01-21T03:06:53.410
> 
> 标签：c++, serialization

有一些消息结构。每个都可以序列化为字符串并从字符串反序列化。对于序列化部分，我使用重载运算符<<。但是对于反序列化部分，我想不出一个合适的方法来做到这一点。所以我使用一个类来解析字符串。最近，我遇到了 boost 序列化。我不知道它是否可以达到这个目的或者有什么更好的主意。

```
struct S
{
  int32_t type;
  double a;
  int32_t b;
  bool c;
  std::string d;

  friend std::ostream& operator<< (std::ostream& os, const S& s)
  {
     os << "{field1" << "="  << s.a << "|";
     os << "field2" << "=" << s.b << "|";
     os << "field3" << "=" << s.c << "|";
     os << "field4" << "=" << s.d << "}";

     return os;
  }
}; 
```

编辑：所以，我选择使用 xml 存档。但是，我还有另一个问题。由于有几种类型的消息由字段 msgtype 分类。反序列化时，如何指定要反序列化到哪个对象？我需要手动搜索 msgtype 字段吗？

```
 template <typename Archive>
  void serialize(Archive &ar, const unsigned int version)
  {
   using boost::serialization::make_nvp;
        ar & make_nvp("msgtype", type);
        ar & make_nvp("field1", a);
        ar & make_nvp("field2", b);
        ar & make_nvp("field3", c);
        ar & make_nvp("field4", d);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:19:17.940

使用 Boost 序列化：

[http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)

有了这个库，它几乎可以为您处理一切。例如，您可以将此函数添加到您的结构中：

```
void serialize(Archive & ar, const unsigned int version)
{
    ar & a;
    ar & b;
    ar & c;
    ar & d;
} 
```

然后，您将能够通过执行以下操作进行序列化和反序列化：

```
 boost::archive::text_oarchive oa(ofs);
    // write class instance to archive
    oa << g; 
```

和这个：

```
boost::archive::text_iarchive ia(ifs);
    // read class state from archive
    ia >> newg; 
```

假设`g`and`newg`是你的结构。

然后，您还可以更改为`binary_archive`或其他以节省空间或`text_archive`保持可读性。

**编辑：**对于您的编辑，boost 序列化将为您处理反序列化。只要您序列化为存档，您只需将该存档与创建存档的类型相反，boost 会将所有内容放回正确的位置。

我不熟悉 boost 中的 NVP 和 XML 东西，所以如果它与我不同，我很抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:18:01.127

boost::serialization（据我所知）支持很少的表示形式：二进制、文本和 XML。并且不难（AFAIK）扩展它以序列化到/从其他任何东西（例如JSON（也许它已经完成，我不知道））。

如果你想重新发明轮子，你可以遵循 boost::serialization 的设计原则——很明显结束（相对）容易以简化的方式重新实现（不支持链接对象，大多数人不需要例）。但是看看你的代码，我认为你最好使用 smth else （已经测试过）而不是你自己的序列化......

对不起，但你的设计远非好...

# visual-studio-2010 - WiX Burn Bootstrapper 的替代品？（可以使用 InstallShield LE 引导程序吗？）

> ID：14431962
> 
> 赞同：4
> 
> 时间：2013-01-21T03:07:26.140
> 
> 标签：visual-studio-2010, wix, windows-installer, installshield, nsis

## 背景资料：

我们曾经有一个基于[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)的安装程序项目，但我们的安装情况变得更加复杂，而且随着项目在 2012 年消失，我们认为我们应该开始学习[WiX](https://en.wikipedia.org/wiki/WiX) / [InstallShield LE](http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio)。

### 问题：

[InstallShield LE 在它创建的MSI](http://en.wikipedia.org/wiki/Windows_Installer)文件中似乎过于有限，无法满足我们的需求——（例如，如果您检查 Office 2007 先决条件，即使错误说您需要“Office 2007 或更高版本”，如果您有 Office 2010，它也会失败而是安装了——你可以检查一个或另一个，但你不能创建一个 OR 条件——还有很多只是冰山一角）。-- 另一方面，它创建的引导程序非常棒！

另一方面，WiX 非常适合制作我们的 MSI，但 Burn Bootstrapper 只是一个又一个令人头疼的问题——我们终于让它工作了——但现在在我们客户的盒子上，它不仅没有升级启动 MSI 文件，但它被[Symantec SONAR](https://en.wikipedia.org/wiki/SONAR_(Symantec))检测为病毒，并且安装被阻止！（InstallShield LE 不会发生这种情况，并且代码签名证书对于这个项目来说成本太高。）老实说，我很想不使用[Burn](http://en.wikipedia.org/wiki/WiX#Burn) Bootstrapper。

## 问题：

WiX Burn Bootstrapper 有哪些替代品？可以使用 InstallShield LE 吗？[NSIS](http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System)呢？（它是否与 Visual Studio 2010/Visual Studio 2012 完全集成？）——我希望对我们的先决条件进行 Web 安装以减小安装程序文件的大小——是的，我还必须维护 .MSI （否则，此时我将切换到完全开启的 NSIS）。

## 解析度：

虽然我无法让[Christopher Painter 的解决方案](https://stackoverflow.com/questions/14431962/alternatives-to-wix-burn-bootstrapper-can-the-install-shield-le-boot-strapper/14432253#14432253)发挥作用，但我将其标记为答案，因为我相信这是建议的最佳方法。我提出了一个[非常邪恶](https://stackoverflow.com/a/14531199/398630)的解决方案，但如果你能让克里斯托弗的方法奏效，我认为这就是要走的路。如果你不能，也许我的黑客会让你摆脱困境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:46:51.003

只需大约 2000 美元，您就可以升级到 InstallShield Professional。但是，如果您对 ISLE 非常满意并且可以忍受只有 1 个功能并且没有自定义 UI，我可以为您解决有关启动条件的问题。

请参阅我的博客文章：

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

这个概念是您创建一个搜索两个 Office 版本的 WiX 合并模块，并安排一个错误自定义操作（MSI 类型 19），该操作在逻辑或条件中使用这两个搜索。将其添加到您的 ISLE 项目中，您就已经“混合”了这两种技术。

Professional 还为您提供 PRQ（XML prereq 文件）编辑器。然后再次在 VM 上进行 30 天评估可以得到相同的结果。

这是它的 WXS 方面：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Module Id="ISWIX.REQUIRE.MSOFFICE20102013" Language="1033" Version="1.0.0.0">
        <Package Id="10ed24f2-6c07-4066-9f39-ba9f66c2667b" Manufacturer="ISWIX, LLC" InstallerVersion="200" />
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="MergeRedirectFolder"/>
        </Directory>
        <Property Id="OFFICE2010FOUND">
            <RegistrySearch Id="findOffice2010" Root="HKLM" Key="SOFTWARE\Microsoft\Office\14.0\Common\InstallRoot" Name="Path" Type="raw" />
        </Property>
        <Property Id="OFFICE2010X64FOUND">
            <RegistrySearch Id="findOffice2010X64" Root="HKLM" Key="SOFTWARE\Microsoft\Office\14.0\Common\InstallRoot" Name="Path" Type="raw" Win64="yes" />
        </Property>
        <Property Id="OFFICE2013FOUND">
            <RegistrySearch Id="findOffice2013" Root="HKLM" Key="SOFTWARE\Microsoft\Office\15.0\Common\ProductVersion" Name="LastProduct" Type="raw" />
        </Property>
        <CustomAction Id="ErrorNoOffice20102013" Error="[ProductName] setup requires Microsoft Office 2010 or 2013." />
        <InstallUISequence>
            <Custom Action="ErrorNoOffice20102013" After="AppSearch">Not OFFICE2010FOUND and Not OFFICE2010X64FOUND and Not OFFICE2013FOUND and Not Installed</Custom>
        </InstallUISequence>
        <InstallExecuteSequence>
            <Custom Action="ErrorNoOffice20102013" After="AppSearch">Not OFFICE2010FOUND and Not OFFICE2010X64FOUND and Not OFFICE2013FOUND and Not Installed</Custom>
        </InstallExecuteSequence>
    </Module>
</Wix> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:59:21.020

我想解决您提出的有关 Burn 的所有问题。如果您可以就这些问题提交错误，那将非常有帮助。

同时，如果您使用的是 WiX 工具集 v3.5+，您可能会查看 setupbld.exe。该工具可以创建一个微型 pre-req 安装程序，它启动一个 pre-req，然后启动一个 MSI。

注意：我们在 WiX 工具集中的目标是最终包含该工具对 Burn 的作用，因此非常感谢 Burn 不起作用的错误报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:23:32.797

NSIS 可以通过名为[Visual & Installer](http://www.unsigned-softworks.sk/visual-installer/index.html)的插件与 Visual Studio（2005/2008/2010 和 2012）集成。也支持[Inno Setup 。](http://en.wikipedia.org/wiki/Inno_Setup)如果您正在寻找简单且便宜的解决方案，请选择此解决方案（NSIS 和 Inno Setup 都是免费软件系统，拥有庞大的社区。）

我对 WiX 没有任何经验，但 NSIS 和 Inno Setup 无法创建[MSI](http://en.wikipedia.org/wiki/Windows_Installer)文件，只能创建[EXE](http://en.wikipedia.org/wiki/EXE)文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T22:14:17.400

最后，Install Shield LE 对我来说太头疼了，我最终做的是创建一个基于 .vdproj 的老式 2010*虚拟*安装项目，具有正确的先决条件（Windows Installer 3.1、.NET 4.0 和 VSTO 2010 ）。

我构建了一次，然后偷了 setup.exe（我确保升级代码等其他内容与我当前基于 WiX 的 .msi 文件相匹配——它生成的 .msi 与我想使用的名称相同， ETC）。

我将 setup.exe 与基于 WiX 的 .msi 文件打包在一起，一切正常——这绝对是一个巨大的 hack——但这是我能找到的唯一解决方案，两者都可以开箱即用（-ish），但不能掀起赛门铁克SONAR杀毒。

我不会每次都构建 .vdproj（我只构建了一次，我删除了 .msi 文件，并收集了 setup.exe），因此未来不会依赖 Visual Studio 2010 走这条路。

对于不那么老套的方法，请参阅@Christopher Painter 的回答——如果你能让他的方法对你有用，我推荐他的方法而不是我的方法。

# ios - 获取选定的选项卡视图 (iOS)

> ID：14431963
> 
> 赞同：0
> 
> 时间：2013-01-21T03:07:30.413
> 
> 标签：ios, uiviewcontroller, tabs

首先，为了您的信息，我是 iOS 6 编程的新手，但在 PHP 方面有很强的背景。所以我知道两者都非常不同。

我的问题是，在选择一个选项卡后，我想尝试找出可以在 viewController 中的一个实例方法下触发“if else”语句的代码。

我非常感谢详细的回答，如果我的问题太基本，我很抱歉，因为我还是 ios 的新手。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:27:05.490

你想要这个“if else”语句的控制器需要是标签栏的代表，并实现tabBar:didSelectItem:。

# jquery - 弹出窗口的 JQuery 参考

> ID：14431964
> 
> 赞同：0
> 
> 时间：2013-01-21T03:07:30.847
> 
> 标签：jquery

如何为弹出窗口提供 JQuery 参考？

我有下面的JS：

```
chatPage = window.open( ... );
chatPage.document.getElementById('someid'); 
```

我在下面尝试但没有用：

```
$(chatPage).$('#someid'); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:08:19.180

您必须提供`chatPage`上下文：

```
$('#someid', chatPage); 
```

# ios - 将数据从互联网加载到 ios 应用程序的最佳方法是什么？

> ID：14431965
> 
> 赞同：-1
> 
> 时间：2013-01-21T03:07:35.483
> 
> 标签：ios

我正在考虑为连锁影院制作应用程序。我在目标 c 方面有经验，但可能没有从互联网加载数据。

我要问的是从互联网将数据加载到应用程序的最佳方式是什么。数据将是电影的图像、名称和时间之类的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:11:50.403

最好的方法是 JSON。对于电影，您可以使用[http://www.omdbapi.com/](http://www.omdbapi.com/)。是 IMDB 的非官方 api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:35:23.727

[来自api](http://www.omdbapi.com/)的 JSON 响应可以使用`NSURLConnection`您可以查看苹果的[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)来使用，或者您可以简单地使用[RestKit](http://restkit.org/)。

# android - 要列出的 Android/java sqlite 数据

> ID：14431970
> 
> 赞同：0
> 
> 时间：2013-01-21T03:08:14.360
> 
> 标签：android, sqlite

我正在学习一个教程，并且我创建了一个数据库类和一个活动类。这是我的活动课：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    datasource = new CommentsDataSource(this);
    datasource.open();

    List<Comment> values = datasource.getAllComments();

    // Use the SimpleCursorAdapter to show the
    // elements in a ListView
    ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
        android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
  } 
```

我的数据库有点不同，但大部分内容与教程中的相同。评论只是一个 setter/getter 类。现在的问题是，在我的列表中我想显示评论名称，但我得到“com.example.blabla.Comment@40dca9d0”。我认为这是因为我将整个评论类传递给适配器。传递名称的正确方法是什么？

这是教程的链接，我一定遗漏了一些东西，因为它似乎在那里工作，但我不知道到底是什么：[http ://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview_sqliteopenhelper](http://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview_sqliteopenhelper)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:18:07.130

```
 // Will be used by the ArrayAdapter in the ListView
  @Override
  public String toString() {
    return comment;
  } 
```

你确定你把这个添加到你的评论类了吗？
在 java 中，toString() 的默认实现是 Class@Hashcode，这是您当前所显示的，因此您需要通过返回注释来覆盖默认实现。

您看不到 toString() 被调用，因为它在[DOCS](http://developer.android.com/reference/android/widget/ArrayAdapter.html) (parag2)中说

> 然而，TextView 被引用，它将被数组中每个对象的 toString() 填充。您可以添加自定义对象的列表或数组。覆盖对象的 toString() 方法以确定将为列表中的项目显示哪些文本。

# excel - 如何将唯一值从列复制到数组并修剪它们？

> ID：14431975
> 
> 赞同：-1
> 
> 时间：2013-01-21T03:08:48.937
> 
> 标签：excel, vba

**问题描述：**

我有两张表，一张是空白报告模板，另一张包含我的数据。在数据集中，M 列中有一个位置 ID。每个位置 ID 的格式为 , ()。例如，位于迈阿密的仓库将是：“Miami,FL (DIST)”，因为它是分销部门的一部分。

我想将所有唯一值导入一个数组，然后修剪内容，以便最终得到一个仅包含城市名称的数组。

* * *

**多余的细节：**

我曾想过以旧的“首选”方式将数据高级过滤到单独的工作表中，对其进行修剪并引用范围，但最终决定反对。

我想了解更多关于使用数组而不是工作表对象进行编程的知识，这是我一直避免使用的，因为我不喜欢 VBA 处理它们的方式与我使用的数组具有更多动态属性的其他语言相比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:46:06.560

您可以使用`WorkSheetFunction.Transpose`方法将列中的数据复制到数组。它给你一个`index 1 based Single Dimensional Array`. 如果您有多列，则该方法为您提供多维数组。

```
Dim arrayV as Variant    
arrayV = WorkSheetFunction.Transpose(Sheets(1).Range("A2:A20").Value) 
```

要查找此范围内最后使用的行，请使用以下代码删除填充到数组中的任何空单元格值，

```
Dim LastRow as Long
LastRow = Sheets(1).Cells(Sheets(1).Rows.Count, _
      Sheets(1).Range("A2:A20").Column).End(xlUp).Row 
arrayV = WorkSheetFunction.Transpose(Sheets(1).Range("A2:A20").Resize(LastRow-1).Value) 
```

接下来，要获取唯一值，您可以使用一个`dictionary`对象，因为它只会保存唯一项。

```
Dim dc as Object
Set dc = CreateObject("Scripting.Dictionary")

For i = Lbound(arrayV) to Ubound(arrayV)
   If Not dc.Exists(arrayV(i)) Then
      dc.Add arrayV(i), i
   End If
Next i

'--output to Sheet or do whatever you want with this
dc.Keys() '-- gives you an array with the unique values    

Set dc = Nothing 
```

# python - 未知命令'sql'

> ID：14431977
> 
> 赞同：1
> 
> 时间：2013-01-21T03:09:11.133
> 
> 标签：python, django

```
$ ./manage.py sql addressbook                                                                                             
Unknown command: 'sql' 
```

当我收到这个奇怪的错误时，我正在尝试查看应用程序模型生成的 SQL。

我的设置.py

```
import os
# Django settings for DoneBox project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('Levi Campbell', 'levicc00123@gmail.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'levicc00123_cc51',
        'USER': 'levicc00123_cc51',
        'PASSWORD': 'n440844291',
        'HOST': 'mysql0.db.koding.com',
        'PORT': 3306,
        }
    }
# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Denver'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = 'media'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = 'd1eyn4cjl5vzx0.cloudfront.net'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = 'static'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = 'd280kzug7l5rug.cloudfront.net'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '2vhexv#0!u4eeyai9jluz8g&amp;h7=815op$8nwa)5+=2m$hl61cu'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'DoneBox.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'DoneBox.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.sitemaps'
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'main',
    'basic.blog',
    'contact_form',
    'django-registration',
    'django-ses',
    'django-storages',
    'dajax',
    'dajaxice',
    'addressbook',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
        'django.db.backends': {
            'handlers': ['mail_admin'],
            'level': 'DEBUG',
            }
        }
    }

ACCOUNT_ACTIVATION_DAYS = 2
EMAIL_BACKEND = 'django_ses.SESBackend'
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = '<snip>'
AWS_SECRET_ACCESS_KEY ='<snip>'
STATIC_FILES_BUCKET = "donebox-static"
MEDIA_FILES_BUCKET = "donebox-media" 
```

和我的 requirements.txt：

```
BeautifulSoup==3.2.1
Django==1.4.3
MySQL-python==1.2.4
argparse==1.2.1
boto==2.7.0
distribute==0.6.34
django-dajax==0.9.2
django-dajaxice==0.5.4.1
django-piston==0.2.3
django-registration==0.8
django-ses==0.4.1
django-storages==1.1.6
django-tagging==0.3.1
markup==0.2
python-dateutil==2.1
six==1.2.0
tweepy==1.13
wsgiref==0.1.2 
```

更新： ./manage.py --help 现在给我一个堆栈跟踪。

```
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_comma
nd_line
    utility.execute()
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/core/management/__init__.py", line 380, in execute
    sys.stdout.write(self.main_help_text() + '\n')
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/core/management/__init__.py", line 231, in main_help_text
    for name, app in get_commands().iteritems():
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/conf/__init__.py", line 93, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "/Users/levicc00123/DoneBox/env/lib/python2.6/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/levicc00123/DoneBox/DoneBox/settings.py", line 16, in <module>
    'NAME': os.environ['RDS_DB_NAME'],
  File "/Users/levicc00123/DoneBox/env/lib64/python2.6/UserDict.py", line 22, in __getitem__
    raise KeyError(key) 
```

有没有人有一些想法可以阐明这个奇怪的问题？感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:15:16.200

您应该同时拥有`sqlall`和`sql`管理命令。两者都从 1.0 开始存在，[看起来](https://docs.djangoproject.com/en/1.0/ref/django-admin/#sql-appname-appname)

```
$ ./manage.py help sqlall
...
Usage: manage.py sqlall [options] <appname appname ...>

Prints the CREATE TABLE, custom SQL and CREATE INDEX SQL statements
for the given model module name(s).
... 
```

查看其中包含的命令`sql`：

```
$ ./manage.py --help | grep sql
monitor (pid=16660): Starting change monitor.
    sql
    sqlall
    sqlclear
    sqlcustom
    sqlflush
    sqlindexes
    sqlinitialdata
    sqlreset
    sqlsequencereset
    sqlcreate
    sqldiff 
```

你用的是什么版本的django？——这并不重要

```
$ ./manage.py shell
monitor (pid=16669): Starting change monitor.
Python 2.7.3 (default, Jan 15 2013, 12:25:59) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-48)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> import django
>>> django.VERSION
(1, 4, 3, 'final', 0) 
```

正如评论中指出的，您有一个 KeyError：

```
 File "/Users/levicc00123/DoneBox/DoneBox/settings.py", line 16, in <module>
    'NAME': os.environ['RDS_DB_NAME'],
  File "/Users/levicc00123/DoneBox/env/lib64/python2.6/UserDict.py", line 22, in __getitem__
    raise KeyError(key) 
```

为了解决这个问题，您可以使用`get`of 的方法`os.environ`并提供一个默认值。例如：

```
os.environ.get('RDS_DB_NAME', "default value if not in environment") 
```

# dotcloud - dotCloud nginx.conf：如何让“index index.php”指令工作？

> ID：14431984
> 
> 赞同：0
> 
> 时间：2013-01-21T03:10:08.840
> 
> 标签：dotcloud

我通过“推送”应用程序目录中的 nginx.conf 文件来进行身份验证，所以我知道该文件有效，但 /app 不会触发 /app/php.index。我无法让 nginx 在我的 vista 笔记本电脑上使用 php 工作，也无法编辑 dotCloud 实例中的 /etc/nginx/nginx.conf ，因为 dotCloud 不给 root 权限会让生活变得困难。

（注意 .htpasswd 是相对于 ngnix.conf 文件位置的，很好）。

```
server { 

location / {
          index  index.php;
}

location /admin {
            auth_basic "enter password";
            auth_basic_user_file .htpasswd;
    index  index.php;
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:26:38.023

您可能需要一个 nginx 指令来将请求映射到您的动态内容。然后，该控制器可以适当地路由它们。

```
try_files $uri $uri/ /index.php; 
```

有关示例项目，请参阅[CakePHP 教程](http://docs.dotcloud.com/0.9/tutorials/php/cakephp/)。

# c# - 获取上一页网址

> ID：14431986
> 
> 赞同：6
> 
> 时间：2013-01-21T03:10:30.250
> 
> 标签：c#, asp.net

如何获取上一页网址？

senario，用户可能来自 google、yahoo、bing。
如何知道它们来自哪里？

我尝试使用 Request.UrlReferrer
但它返回一个空值。

谢谢你的建议。

我正在使用 ASP.NET 网络表单，C#。

**更新**
我有一个网站正在运行。
我只想知道当用户访问我的网站时它们来自哪里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T03:49:27.003

您所描述的是`Referer`HTTP 标头（最初是我们现在坚持使用的“Referrer”的拼写错误）。浏览器会使用导致用户导航到新页面的任何网页的 URI 填充此字段（例如通过单击`<a>`超链接、`<form`> 提交、Flash 对象中的操作等）。并非每个用户操作都会导致设置标题，例如，如果直接在地址栏中输入地址，或者在桌面电子邮件消息中打开链接。

在 ASP.NET 下，此标头可由`Request.UrlReferrer`属性访问。但是，如果 HTTP 标头值不是 URI 或客户端 UA 未设置该字段，则此属性将为 null。

您绝不能依赖此机制，因为它是由客户端设置的，并且您绝不能信任客户端 ( [http://en.wikipedia.org/wiki/Defensive_programming](http://en.wikipedia.org/wiki/Defensive_programming) )。如前所述，并非所有访问者都会设置 Referer 标头。

# sparql - sesame2 和 jena 的结果数量不同

> ID：14431998
> 
> 赞同：3
> 
> 时间：2013-01-21T03:12:07.793
> 
> 标签：sparql, jena, sesame

我正在编写一些在 jena 和 sesame2 上运行的查询。它们中的大多数在 sesame2 下都可以正常工作，除非我指定了路径的深度。例如，如果我在 sesame 下运行此查询，它会给出 8 个结果，而 jena 会给出 217（正确的数字）。

```
PREFIX edge: <http://danielfrentz.com/edge#> 
PREFIX property: <http://danielfrentz.com/property#> 
select  distinct ?start ?reached where{ 
?start property:id \"v1\". 
?start (edge:uses | edge:implements | edge:extends)+ ?reached.
filter(?start != ?reached)} 
```

所以我的问题是，sesame2 对路径深度语法的定义是否不同？还是有其他原因导致我可能会得到不同的结果？

谢谢。

额外细节：

我正在使用 2.6.10 并试用 2.7 beta。

我拥有的最小示例图如下（对不起，太长了）：

```
@prefix edge: <http://danielfrentz.com/edge#>.
@prefix edge: <http://danielfrentz.com/property#>.
<http://danielfrentz.com/v2> <http://danielfrentz.com/property#name> "Class3".
<http://danielfrentz.com/v2> <http://danielfrentz.com/property#abstract> "false".
<http://danielfrentz.com/v2> <http://danielfrentz.com/property#type> "class".
<http://danielfrentz.com/v2> <http://danielfrentz.com/property#namespace>    "com.example".
<http://danielfrentz.com/v2> <http://danielfrentz.com/property#id> "v2".
<http://danielfrentz.com/v1> <http://danielfrentz.com/property#name> "Class2".
<http://danielfrentz.com/v1> <http://danielfrentz.com/property#abstract> "false".
<http://danielfrentz.com/v1> <http://danielfrentz.com/property#type> "class".
<http://danielfrentz.com/v1> <http://danielfrentz.com/property#namespace>      "com.example".
<http://danielfrentz.com/v1> <http://danielfrentz.com/property#id> "v1".
<http://danielfrentz.com/v3> <http://danielfrentz.com/property#name> "Class4".
<http://danielfrentz.com/v3> <http://danielfrentz.com/property#abstract> "false".
<http://danielfrentz.com/v3> <http://danielfrentz.com/property#type> "class".
<http://danielfrentz.com/v3> <http://danielfrentz.com/property#namespace> "com.example".
<http://danielfrentz.com/v3> <http://danielfrentz.com/property#id> "v3".
<http://danielfrentz.com/v4> <http://danielfrentz.com/property#name> "AbstractClass1".
<http://danielfrentz.com/v4> <http://danielfrentz.com/property#abstract> "true".
<http://danielfrentz.com/v4> <http://danielfrentz.com/property#type> "class".
<http://danielfrentz.com/v4> <http://danielfrentz.com/property#namespace>   "com.example".
<http://danielfrentz.com/v4> <http://danielfrentz.com/property#id> "v4".
<http://danielfrentz.com/v0> <http://danielfrentz.com/property#name> "Class1".
<http://danielfrentz.com/v0> <http://danielfrentz.com/property#abstract> "false".
<http://danielfrentz.com/v0> <http://danielfrentz.com/property#type> "class".
<http://danielfrentz.com/v0> <http://danielfrentz.com/property#namespace>  "com.example".
<http://danielfrentz.com/v0> <http://danielfrentz.com/property#id> "v0".
<http://danielfrentz.com/v5> <http://danielfrentz.com/property#name> "Interface1".
<http://danielfrentz.com/v5> <http://danielfrentz.com/property#abstract> "true".
<http://danielfrentz.com/v5> <http://danielfrentz.com/property#type> "interface".
<http://danielfrentz.com/v5> <http://danielfrentz.com/property#namespace>    "com.example".
<http://danielfrentz.com/v5> <http://danielfrentz.com/property#id> "v5".
<http://danielfrentz.com/v3> <http://danielfrentz.com/edge#extends>     <http://danielfrentz.com/v4>.
<http://danielfrentz.com/v2> <http://danielfrentz.com/edge#uses>    <http://danielfrentz.com/v3>.
<http://danielfrentz.com/v4> <http://danielfrentz.com/edge#uses> <http://danielfrentz.com/v2>.
<http://danielfrentz.com/v5> <http://danielfrentz.com/edge#uses> <http://danielfrentz.com/v0>.
<http://danielfrentz.com/v1> <http://danielfrentz.com/edge#implements> <http://danielfrentz.com/v5>.
<http://danielfrentz.com/v0> <http://danielfrentz.com/edge#uses> <http://danielfrentz.com/v1>. 
```

查询是：

```
PREFIX edge: <http://danielfrentz.com/edge#>
PREFIX property: <http://danielfrentz.com/property#>
select  distinct ?start ?reached where{
?start property:id \"v1\". 
?start (edge:uses | edge:implements | edge:extends){1,3} ?reached.
FILTER (?start != ?reached)} 
```

结果是：

```
start start=http://danielfrentz.com/v1
reached reached=http://danielfrentz.com/v5 
```

应该有 2 个结果而不是 1 个。

我还应该补充一点，当我不使用属性路径（即我使用 + 而不是 {1,3}）时，它会给出正确数量的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:27:52.120

您在路径长度 ( ) 上使用的具有下限和上限的构造`{1,3}`不再是官方支持的 SPARQL 功能，它已在最近的一次更新中从 SPARQL 规范中删除。

Sesame 的 SPARQL 查询解析器仍然接受构造。我在 Sesame 2.7.0-beta1 上测试了您的查询，您是正确的，它没有产生预期的答案（而 using`+`仍然*是*SPARQL 的官方功能，确实可以正常工作）。所以这是芝麻的查询解析器中的一个错误。但是，鉴于该`{1, 3}`构造不再是 SPARQL 的正式组成部分，我不确定它是否会得到修复 - 在下一个 Sesame 版本中，该构造更有可能导致语法错误。